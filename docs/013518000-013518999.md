# StackOverflow 问答 13518000-13518999

# ruby-on-rails - 数组范围被识别为字符串 - 无法转换为整数

> ID：13518000
> 
> 赞同：0
> 
> 时间：2012-11-22T18:03:09.000
> 
> 标签：ruby-on-rails, ruby, web-scraping, nokogiri

我在模型中编写了一个函数来抓取站点并将某些属性存储在单独的模型中（`story`）：

```
def get_content   

          request = HTTParty.get("#{url}")

          doc = Nokogiri::HTML(request.body)

         doc.css("#{anchor}")["#{range}"].each do |entry|

            story = self.stories.new
            story.title = entry.text
            story.url = entry[:href]
            story.save

        end 
```

这使用 Sections 变量的`url`、`anchor`和`range`属性。range 属性存储为数组范围 - 即`0..2`或`11..13`- 但是，我被告知它不能将字符串转换为变量。我试过存储`range`为整数和字符串，但都失败了。

我意识到我可以在我的数据库中输入范围的开头和结尾作为两个单独的整数，然后放`["#{beginrange}".."#{endrange}"]`，但这似乎是一种混乱的方式。

还有其他想法吗？提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:10:33.780

嗯，如果您确定`range`始终是像 ' `1..2`' (' `<Integer >..<Integer>`') 这样的字符串，则可以使用以下`eval`方法：

在我的 IRB 控制台中：

```
1.9.3p0 :032 > (eval "1..2").each { |l| puts l }
1
2
 => 1..2 
1.9.3p0 :033 > (eval "1..2").inspect
 => "1..2" 
1.9.3p0 :034 > (eval "1..2").class
 => Range 
```

**在你的情况下：**

```
doc.css("#{anchor}")[eval(range)].each do |entry|
  #...
end 
```

但是`eval`有点危险。如果您确定该`range`属性是作为字符串的范围（验证和正则表达式可提供帮助），您可以`eval`毫无风险地使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:37:40.847

有几件事我看错了。

`["#{beginrange}".."#{endrange}"]`创建一个字符范围，而不是整数范围，这`Array[]`需要：

```
beginrange = 1
endrange = 2

["#{beginrange}".."#{endrange}"]
=> ["1".."2"]

[beginrange..endrange]
=> [1..2] 
```

但是，您将所需的数组范围的表示形式存储为字符串。如果我有一个范围的字符串表示，我会使用这个：

```
range_value = '1..2'

[Range.new(*range_value.scan(/\d+/).map(&:to_i))]
=> [1..2] 
```

或者，如果有机会我会遇到一个独家范围：

```
[Range.new(*range_value.scan(/\d+/).map(&:to_i), range_value['...'])]
=> [1..2]

range_value = '1...2'

[Range.new(*range_value.scan(/\d+/).map(&:to_i), range_value['...'])]
=> [1...2] 
```

当您不能信任 Range 字符串表示的来源时，这些都很好，即值来自其他人创建的表单或文件。如果您拥有传入值，或者为方便起见，将其作为字符串存储在数据库中，则可以使用以下命令轻松重新创建范围`eval`：

```
eval('1..2').class
=> Range
eval('1..2')
=> 1..2
eval('1...2')
=> 1...2 
```

人们害怕`eval`，因为不明智地使用它是危险的。这并不意味着我们应该避免使用它，相反，我们应该在安全的情况下使用它。

您可以使用正则表达式检查字符串的格式，如果不可接受则引发异常，然后继续：

```
raise "Invalid range value received" if (!range_value[/\A\d+\s*\.{2,3}\s*\d+\z/])
[eval(range_value)] 
```

# grails - 超过 512M 的内存限制

> ID：13518004
> 
> 赞同：1
> 
> 时间：2012-11-22T18:03:26.883
> 
> 标签：grails, cloud-foundry, permgen, vmc

我正在尝试在 cloudfoundry.com 上运行 Grails 应用程序，但它返回 502 Bad Gateway，然后返回 404 Not Found。我找到了logs/err.log，它说：

```
# Logfile created on 2012-11-22 17:39:55 +0000 by logger.rb/25413
F, [2012-11-22T17:39:55.488036 #10723] FATAL -- : Memory limit of 512M exceeded.
F, [2012-11-22T17:39:55.488101 #10723] FATAL -- : Actual usage was 516M, process terminated. 
```

在此之前，我遇到了 PermGen 空间错误，因此我将其添加到环境中：

```
+-----------+----------------------------------------+
| Variable  | Value                                  |
+-----------+----------------------------------------+
| JAVA_OPTS | -XX:MaxPermSize=512m -Xms512M -Xmx512M |
+-----------+----------------------------------------+ 
```

我有什么选择？我可以进行任何调整以尝试使我的应用程序适合 512M 吗？如果我减少 MaxPermSize，那会给我的应用程序更多空间吗？有什么方法可以准确确定需要多大的 Perm 空间？

还是我已经超越了 CloudFoundry？有什么方法（包括付费）可以在 CloudFoundry 获得更大的虚拟机？还是我必须完全转移到不同的服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:28:50.030

您只需要更改分配给应用程序的资源量。您可以使用 VMC 执行此操作，例如，将名为 my app 的应用程序的内存分配更改为 1GB；

```
vmc mem myapp 1G 
```

请记住，您的所有应用程序的帐户最多有 2G。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T00:37:16.947

我遇到了同样的问题，`vmc`api 已经改变，将被[cf](https://github.com/cloudfoundry/cf)取代。

到目前为止，增加应用程序内存的方法是执行`vmc scale [APP] --memory MEMORY`。例如，如果你想将你的应用程序增加到 1G，命令将是`vmc scale yourappname --memory 1G`

# haskell - 通过比较haskell中的第一个值来查找列表中的数据类型

> ID：13518007
> 
> 赞同：1
> 
> 时间：2012-11-22T18:03:44.950
> 
> 标签：haskell

我有一个数据类型列表，如果存在，我想找到与第一个值匹配的数据类型。如果它不存在，我想返回一个默认值。

```
data MyType = MyType String Int
findOrMake :: [MyType] -> String -> Int
findOrMake list x = do  i <- -- find index
                        -- if i is a value, return the x[i]
                        -- if i is not a value, return (MyType x 0) 
```

我有一种直觉，我应该使用`fmap`and `find`，但我以前从未使用过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:21:21.840

要在未找到该项目时提供默认值，您可以使用[`fromMaybe`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#v%3afromMaybe)：

```
fromMaybe :: a -> Maybe a -> a 
```

结合`find`，它应该看起来像这样：

```
fromMaybe defaultValue $ find predicate list 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T18:09:57.513

一个简单的递归解决方案怎么样？

```
data MyType = MyType String Int

findOrMake :: [MyType] -> String -> Int
findOrMake [] s = 42
findOrMake ((MyType mstr mint):ms) s = if mstr == s then mint else findOrMake ms s 
```

# php - 尽管在我的会员表中没有作为用户存在，但用户能够登录到我的网站 - 为什么会这样？

> ID：13518011
> 
> 赞同：0
> 
> 时间：2012-11-22T18:04:08.440
> 
> 标签：php, codeigniter

如果用户不存在，它应该在登录屏幕上返回一个错误，但用户随后会被带到主页，就好像他们以前在我的标志控制器中注册过一样。登录控制器 - 验证凭据功能 - 和我的模型 - 功能 can_log_in() - 将说明它应该反弹的错误

模型：

```
 class Membership extends CI_Model
{
function Membership()
{
    parent::__construct();
}

public function can_log_in()
{
    $this->db->select('*')->from('membership');
    $this->db->where('username', $this->input->post ('username'));
    $this->db->where('password', md5($this->input->post ('password')));

    $query = $this->db->get('membership');
    if ($query->num_rows() == 1)
    {
        return true;
    }

    else{

        return false;

    }

} 
```

登录控制器：

```
 class Login extends CI_Controller 
 {

   function Login()
    {
     parent::__construct();

      $this->load->model('membership');
    }

    function loguserin()

    {

$this->load->helper(array('form', 'url'));

$this->load->library('form_validation');

$this->form_validation->set_rules('username', 'Username', 'required|min_length[5]|max_length[12]|trim');
$this->form_validation->set_rules('password', 'Password', 'required|md5|trim');

$username = $this->input->post('username');
$password = $this->input->post('password');
      if ($this->form_validation->run()==TRUE)
     {
          $this->load->model('membership');
           if($this->membership->can_log_in($this->input->post('username'),$this->input->post('password'))
       { // this is unepected despite a new if statement called
        $this->session->set_userdata('status', 'OK');
        $this->session->set_userdata('username', $username);  
        redirect('home');
        } else //this else is unexpected
          {
       $this->session->set_userdata('status', 'NOT_OK');

      $this->session->set_flashdata('Incorrect username/password');
       $this->index();
      }
    } else {
   $this->index; 

   }

  }

        function logout()
      {
$this->session->sess_destroy();
redirect ('start');
       }

      function index()
      {
      $this->load->view('shared/header');
       $this->load->view('account/logintitle');
      $this->load->view('account/loginview');
        $this->load->view('shared/footer');
       }
      } 
```

再次感谢 :) 只是用户如果不在表格中应该无法登录主页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:52:17.240

您的逻辑无处不在，并且您误解了表单验证的概念。表单验证验证表单输入，它不验证凭据。老实说，您拥有的 validate_credentials 函数有点毫无意义，因为您无法从 run 函数外部调用表单验证错误。所以你不妨干脆让它完全消失。

首先，form_validation 之后的初始调用应该是这样的：

```
if ($this->form_validation->run()==TRUE)
{
    $this->load->model('membership');
    if($this->membership->can_log_in($this->input->post('username'),$this->input->post('password')))
    {
    $this->session->set_userdata('status', 'OK');
    $this->session->set_userdata('username', $username);  
    redirect('home');
    } else {
    $this->session->set_userdata('status', 'NOT_OK');// you'll need to do something
   // here to tell them their credentials are wrong as I said this won't work through
   // the form validation, perhaps look into using $this->session->set_flashdata()
    $this->index();
    }
} else {
$this->index; //reload the index to display the validation errors 
```

好的，负责将数据发送到登录函数，现在该函数实际上需要接收数据，并且由于它不是发送数据的第一页，因此帖子字符串将为空，这就是我在函数中传递数据的原因以上。模型中唯一需要更改的部分如下：

```
public function can_log_in($username,$password)
{
$this->db->select('*')->from('membership');
$this->db->where('username', $username);
$this->db->where('password', md5($password)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:25:01.923

尝试更换

```
if ($this->form_validation->run()) 
```

和

```
if ($this->form_validation->run() && validate_credentials()) 
```

# iphone - 如何在 iOS 设备上模拟磁盘空间不足的情况？

> ID：13518016
> 
> 赞同：11
> 
> 时间：2012-11-22T18:04:26.853
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想测试一些我已经到位的代码来管理没有足够可用磁盘空间来完成操作的情况。

但是，我无法实现这种情况。我曾尝试从 iTunes 同步内容以填满设备，但要么我获得了太多可用磁盘空间，要么内容将超过设备容量并且 iTunes 不允许同步。

我确信必须有一个更简单更好的策略来在设备上测试这种情况，但我想不通。我将不胜感激，您可以分享有关此的提示或经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:19:56.660

填充设备直到它在 iTunes 中几乎达到极限，然后设置循环以将较大的文件复制到您的 Documents 目录中。每次复制时，给它一个唯一的名称（使用 UUID）。使用界面中的控件或计时器激活循环以运行多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:19:25.940

这是一个愚蠢的想法。

1.  越狱您的设备
2.  ssh 进入根目录
3.  执行一个基本上实现了这个算法的脚本（zsh？）：

```
def logbomb(tries=5):
    try:
        for i in range(100):
            pass
            # write pow(2, i) many bytes into a log file in /private/var/tmp
    catch IOError:
        logbomb(tries - 1) 
```

到最后你应该得到一个非常塞满的私人分区。如果没有接近，请稍微增加尝试次数。

# c++ - 带地图的 BGL BasicMatrix 实现

> ID：13518021
> 
> 赞同：1
> 
> 时间：2012-11-22T18:05:18.520
> 
> 标签：c++, boost

我正在尝试使用 BGL 计算图形之间的最短路径。我正在调用的函数是

```
boost::johnson_all_pairs_shortest_paths(g,distances); 
```

其中 g 是自定义图形类型

```
typedef property<label_t, int> LabelProperty;
typedef  property<edge_weight_t,int> EdgeWeightProperty;

//graph definition
typedef adjacency_list<listS, 
                       listS, 
                       directedS,
                        property<vertex_index_t,int, 
                       LabelProperty >,
                        EdgeWeightProperty
                       > Graph; 
```

我正在将距离实现为地图

```
typedef map<int,map<int,int> > DistMat;
DistMat distances; 
```

所以我可以将距离作为距离[i][j] 访问，并且可以处理大图。

当我编译（使用 gcc 4.6.3）时，我收到以下错误：

/usr/include/boost/graph/graph_concepts.hpp:518:31: 错误：将 'const std::map >' 作为 'std::map<_Key, _Tp, _Compare, _Alloc> 的 'this' 参数传递:: mapped_type& std::map<_Key, _Tp, _Compare, _Alloc>::operator[](const key_type&) [with _Key = int, _Tp = std::map, _Compare = std::less, _Alloc = std::allocator > >, std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type = std::map, std::map<_Key, _Tp, _Compare, _Alloc>::key_type = int]' 丢弃限定符 [-fpermissive]

事实上，如果我使用 [-fpermissive] 选项，代码可以编译并运行。但是，我想安排代码以便在不选择此选项的情况下进行编译。我相信解决方案就[在这里](http://gcc.gnu.org/onlinedocs/gcc/Name-lookup.html)，但我在这么多模板中迷失了方向。

有什么提示吗？非常感谢您提前

# sql - 在 SQLite 中，如何排除包含某些字符串的行？

> ID：13518024
> 
> 赞同：4
> 
> 时间：2012-11-22T18:05:36.773
> 
> 标签：sql, sqlite

这是我的 SQLite 表（以逗号分隔的格式）：

```
ROWID,COLUMN
1,"This here is a string |||"
2,"Here is another string"
3,"And yet another string" 
```

我想排除“COLUMN”下包含“|||”的所有行。这在 SQLite 中可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T18:08:00.337

```
select * from table where column not like '%|||%' 
```

这应该工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:06:50.163

```
select * from your_table
where your_column not like '%'|||%' 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!7/32e44/1)

# java - 无法使用来自 JNI 的 ArrayList 对象调用 Java API

> ID：13518025
> 
> 赞同：3
> 
> 时间：2012-11-22T18:05:39.603
> 
> 标签：java, android, java-native-interface

我正在尝试调用一个接受来自 JNI 的 ArraList 字符串的 Java API

```
/*My Java Method that needs to be called from JNI*/

public void postArrayListOfStringsToJavaFromJNI(ArrayList<String> list)
{
}

//I am trying to create the methodId like below in JNI to call my Java API postArrayListOfStringsToJavaFromJNI

jmethodID method_id = env->GetMethodID(dmrcallbacks, "postArrayListOfStringsToJavaFromJNI", "(Ljava/lang/Object;)V"); 
```

但我收到一个错误

```
11-22 23:22:45.130: E/AndroidRuntime(19189): java.lang.NoSuchMethodError: no method with name='postArrayListOfStringsToJavaFromJNI' signature='(Ljava/lang/Object;)V' in class Lcom/example/JavaSample; 
```

将“(Ljava/lang/Object;)V”作为第一个参数用于使用参数“ArrayList”调用 Java API 的 GetMethodID 调用是否有任何问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:17:17.393

`(Ljava/lang/Object;)V``void`是采用单个参数类型的方法的签名`java.lang.Object`，您可能需要`(Ljava/util/ArrayList;)V`。

# android - Android Json 应用程序错误

> ID：13518032
> 
> 赞同：1
> 
> 时间：2012-11-22T18:06:09.563
> 
> 标签：android, json

我正在尝试使用带有 MySQL 数据库的 Json 创建一个 android 登录应用程序，但是当我运行它并尝试登录时，我收到以下错误：

```
11-22 12:29:08.079: E/AndroidRuntime(731): FATAL EXCEPTION: main
11-22 12:29:08.079: E/AndroidRuntime(731): java.lang.NullPointerException
11-22 12:29:08.079: E/AndroidRuntime(731):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
11-22 12:29:08.079: E/AndroidRuntime(731):  at com.example.loctrans.DBConnection.DBConnection(DBConnection.java:41)
11-22 12:29:08.079: E/AndroidRuntime(731):  at com.example.loctrans.MainActivity.onClick(MainActivity.java:56)
11-22 12:29:08.079: E/AndroidRuntime(731):  at android.view.View.performClick(View.java:4084)
11-22 12:29:08.079: E/AndroidRuntime(731):  at android.view.View$PerformClick.run(View.java:16966)
11-22 12:29:08.079: E/AndroidRuntime(731):  at android.os.Handler.handleCallback(Handler.java:615)
11-22 12:29:08.079: E/AndroidRuntime(731):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-22 12:29:08.079: E/AndroidRuntime(731):  at android.os.Looper.loop(Looper.java:137)
11-22 12:29:08.079: E/AndroidRuntime(731):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-22 12:29:08.079: E/AndroidRuntime(731):  at java.lang.reflect.Method.invokeNative(Native Method)
11-22 12:29:08.079: E/AndroidRuntime(731):  at java.lang.reflect.Method.invoke(Method.java:511)
11-22 12:29:08.079: E/AndroidRuntime(731):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-22 12:29:08.079: E/AndroidRuntime(731):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-22 12:29:08.079: E/AndroidRuntime(731):  at dalvik.system.NativeStart.main(Native Method) 
```

当我验证代码时，我添加了一个 log.e() 方法来查找有错误的行。这是我的BD连接代码

```
public class DBConnection extends Activity{
String result =  null;
    InputStream is = null;

public String DBConnection(ArrayList<NameValuePair> nameValuePairs, String URL){

      try{
          Log.e("info error", " fase 2");
          HttpClient httpclient = new DefaultHttpClient();
          Log.e("info error", " fase 3");
          HttpPost httppost = new HttpPost(URL);
          Log.e("info error", " fase 4");
          httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
          Log.e("info error", httppost.toString());
          HttpResponse response = httpclient.execute(httppost);
          Log.e("info error", " fase 6");
          HttpEntity entity = response.getEntity();
          Log.e("info error", " fase 7");
          is = entity.getContent();
          Log.e("info error", " fase 8");
  }catch(Exception e){
      Toast.makeText(getApplicationContext(), "Error in http connection"+e.toString(), Toast.LENGTH_LONG).show();
  }
  //convert response to string
  try{
      Log.e("info error", " fase 9");
          BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
          StringBuilder sb = new StringBuilder();
          Log.e("info error", " fase 10");
          String line = null;
          while ((line = reader.readLine()) != null) {
                  sb.append(line + "\n");
          }
          is.close();
          result=sb.toString();
          Log.e("log_tag", "Cadena JSon " + result);
  }catch(Exception e){
      Toast.makeText(getApplicationContext(), "Error converting result "+e.toString(), 
              Toast.LENGTH_LONG).show();
      Log.e("log_tag", "Error converting result " + e.toString());
  }
  return result;
}

public String getResult(){
    return result;
}

} 
```

在 logcat 中只有前三个 log.e 消息。

```
11-22 12:29:07.899: E/info error(731):  fase 2
11-22 12:29:07.919: E/info error(731):  fase 3
11-22 12:29:07.929: E/info error(731):  fase 4 
```

所以我认为问题出在这一行： httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs) 但我不知道究竟是什么错误

这是主要活动代码的一部分：

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("Login" ,logi));
String URL = "http://192.168.1.10/Android/getlogin.php";          
DBConnection DBC = new DBConnection();
String result = DBC.DBConnection(nameValuePairs, URL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:26:03.770

```
java.lang.NullPointerException
  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
  at com.example.loctrans.DBConnection.DBConnection(DBConnection.java:41) 
```

LogCat 报告问题出`getApplicationContext()`在您的 Toast 中，但在 catch 块中。你是对的，*真正的*问题在于你的 Http 代码，它可能抛出了 NetworkOnMainThread 异常。（您使用的是 Android 3.0+ 吗？）

您需要在不同的线程中执行可能较慢的网络操作。只需创建一个自定义 AsyncTask 并将您的代码移动到`doInBackground()`.

* * *

DBConnection为什么要扩展Activity？您是否像使用未发布的代码中的 Activity 一样使用它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:35:02.580

在 Activity 中，您应该在需要上下文而不是 getApplicationContext() 的地方使用关键字**this 。**

```
Toast.makeText(this, "Error in http connection"+e.toString(), Toast.LENGTH_LONG).show(); 
```

这个错误指的是这个，就像 Sam 说的，有一个问题与你在 Thread UI 中运行的 HTTP 代码有关。您需要使用 AsyncTask 来完成所有 HTTP 工作。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c - 在 C 中输入后忽略该行的其余部分

> ID：13518037
> 
> 赞同：4
> 
> 时间：2012-11-22T18:06:38.947
> 
> 标签：c, input, scanf

给定输入，例如：

```
6 2
1 2 3 4 5 6
4 3 3 4 5 6 
```

其中第一行中的第一个数字是行中的变量数，第二个是行数。怎么可能只获得第一个`n/2`值，`n`一行中的值的数量在哪里并跳到下一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:30:15.907

如果输入长度没有变化（例如，6 个数字，如您的示例），您可以使用以下命令读取所需的输入：

```
scanf("%d %d %d", ...); 
```

然后，处理其余的输入：

```
while ((ch = getchar()) != '\n' && ch != EOF); 
```

如果输入长度**确实**不同，则必须将其读入缓冲区。然后您可以遍历字符串以找到其中的空格数（因此 n = 空格 + 1），然后再次使用`strtok`n/2 次迭代以获得前 n/2 个数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T18:56:41.343

我很惊讶没有人提到`fscanf("%*d")`- 该`*`符号告诉`fscanf`读取一个整数值，但忽略它（请参阅[此处](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)的文档）。这使您可以执行以下操作：

```
int numbers[MAX_NUMS];
int n = numbers_in_line();
for( i = 0; i < n; i++ )
   if(i<n/2)
      fscanf("%d", &numbers[i]);
   else
      fscanf("%*d"); 
```

这似乎比仅阅读其余字符更清晰。如果你`n`提前知道，你也可以写：

```
scanf("%d %d %d %*d %*d %*d",&numbers[0],&numbers[1],&numbers[2]); 
```

您没有直接询问这个问题，但是如果您正在读取二进制数据，还有另一种方法可以跳过该行的其余部分。您可以读取您想要的数据，然后计算下一行开头的位置（这里是一些指针算法）并使用该[`fseek`](http://www.cplusplus.com/reference/clibrary/cstdio/fseek/)函数跳转到该位置，这可以节省一些 I/O 时间。不幸的是，您不能对 ASCII 数据执行此操作，因为这些数字不会占用相同数量的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:26:30.353

以前，你知道一行有多少个数字吗？如果你的回答是肯定的，我建议你试试这个：

```
int n = numbersInALine(); 
int i = 0;
int *numbers = (int*) malloc( sizeof( int ) * ( n / 2 ) );
for( i = 0; i < n/2; i++ )
    scanf( "%d", &numbers[i] ); 
```

# java - 哈希表的数组链表数组

> ID：13518039
> 
> 赞同：0
> 
> 时间：2012-11-22T18:06:45.997
> 
> 标签：java, arrays, linked-list, hashtable

所以我正在创建一个使用数组链接列表数组的哈希表。让我花一点时间来解释为什么会这样。

所以我之前通过创建一个Array来实现Hash Tables，并且该数组的每个元素都是一个Linked List。这样，我可以通过首先在数组中搜索散列值，然后搜索这个 LL 的元素，快速查找 450,000 个元素的 LL。我应该补充一点，这是一个学校项目，我不能只使用 java 附带的哈希表。

现在我想做类似的事情......但我有大量需要搜索的数组。这里 LL 的每个元素都是文本文件的一行，它由一个 4 元素数组表示，其中 4 个元素中的每一个都是在输入文件中以制表符分隔的不同字符串。我需要能够快速访问位于每行中的第 2、第 3 和第 4 个字符串，这现在是该数组的一个元素。

所以我想要的是能够创建一个 LL of Arrays 的数组......首先我会找到数组第二个元素的 ascii 值的总和。然后我将使用这个值将整个数组散列到哈希表中。然后当我以后需要找到这个元素时，我会去数组的对应元素，那里有一个数组列表。我将搜索列表中每个数组的第二个值。如果我找到我想要的，那么我返回那个数组，并使用这个数组的第三和第四个元素。

正如我所说，对于 LL 数组，我可以正常工作，但是在里面添加数组的额外维度已经完全让我失望了。我认为这主要是在弄清楚语法，因为我已经成功地初始化了一个 LL 的数组（公共静态 LinkedList[] RdHashLL），所以看起来 Java 在原则上是可以接受的。但是，我不知道如何将元素放入哈希表，以及如何读出它们。

下面是我的链接列表数组的代码，可以正常工作。我只需要帮助让它适用于 LL OF ARRAYS 的阵列！

```
public class TableOfHash{

public static LinkedList<String>[] HashLL;

//HASH FUNCTION - Finds sum of ascii values for string
public static int charSum(String s){
    int hashVal = 0;
    int size = 1019; //Prime Number around size of 8 char of 'z', (8 chars is amoung largest consistantly in dictionary)

    for(int i = 0; i < s.length(); i++){
        hashVal += s.charAt(i);
    }   
    return hashVal % size;
}

//CREATE EMPTY HASH TABLE - Creates an array of LL
public static void makeHash(){
    HashLL = new LinkedList[1019];
    for(int i=0; i<HashLL.length; i++){
        HashLL[i] = new LinkedList<String>();
    }
}

//HASH VALUES INTO TABLE!
public static void dictionary2Hash(LinkedList<String> Dict){
    for(String s : Dict){
        HashLL[charSum(s)].add(s);
        //Finds sum of char vales of dictionary element i,
        //and then word at i to the HashLL at point defined
        //by the char sum.
    }   
    //Print out part of Hash Table (for testing! for SCIENCE!)
    //System.out.println("HASH TABLE::");
    //printHashTab();
}

//SEARCH HashTable for input word, return true if found
public boolean isWord(String s){

    if(HashLL[charSum(s)].contains(s)){
        wordsfound++;
        return true;
    }
    return false;
} 
```

}

我已经做了一些尝试来改变这一点，但是对于 if(HashLL[charSum(s)].contains(s)) 之类的东西，它在 charsum(s) 返回的元素处搜索 LL ......我不知道如何当它是数组而不是字符串的 LL 时让它工作。我已经厌倦了 HashLL[charSum(s)].[1].contains(s)) 和 HashLL[charSum(s)][1].contains(s)) 以及其他各种东西。

Google 搜索“数组的链接列表”（带引号）显示为空的事实并没有帮助。

最后一点。我意识到可能还有另一种数据结构可以满足我的要求，但除非您认为 LL of Arrays 的 Array 是完全没有希望的原因，否则我想让它按原样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:15:53.770

如果你有

```
LinkedList<String[]>[] hashLL; 
```

您可以像这样读取特定的字符串（多种方式之一）

```
String str = hashLL[outerArrayIndex].get(listIndex)[innerArrayIndex]; 
```

要写入字段，这是可能的（假设一切都已正确初始化）。

```
String[] arr = hashLL[outerArrayIndex].get(listIndex);
arr[index] = "value"; 
```

# joomla - 修改joomla登录模块的值提交按钮的翻译

> ID：13518041
> 
> 赞同：0
> 
> 时间：2012-11-22T18:06:50.240
> 
> 标签：joomla, login, module

我想翻译登录 joomla 模块的提交值

```
<input type="submit" name="Submit" class="button" value="<?php echo JText::_('JLOGIN') ?>" /> 
```

我在哪里可以提前找到“JLOGIN”文本和 thnks。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:07:11.963

在 Joomla 1.6 或更高版本中，有一个用户界面用于覆盖语言管理器中的特定语言字符串。转到语言管理器并选择覆盖选项卡。UI中有详细的使用说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:28:43.977

这些总是在您的语言 ini 文件中定义。快速搜索显示：`language/en-GB/en-GB.ini`。该`en-GB`目录将根据您的默认语言而有所不同。

此文本的当前值为`Log in`, 对于 en-GB 即。

# svn - Sourceforge svn checkout 找不到中继

> ID：13518042
> 
> 赞同：0
> 
> 时间：2012-11-22T18:06:51.207
> 
> 标签：svn, sourceforge

当我尝试在 sourceforge 上检查我的存储库的主干时，我收到一条错误消息，指出路径不存在。后备箱确实存在，我检查了两次和三次是否有错别字。当我检查整个存储库（标签、分支、主干）时，Tortoise SVN 毫不犹豫地做到了，瞧，突然间，主干文件夹也被签出。

这是一个已知的错误？

另外：我总是需要连续输入密码三次才能让 Tortoise SVN（或 sourceforge）接受它。

编辑：

此结帐有效： `svn+ssh://atrioom@svn.code.sf.net/p/michaelkrebs/code`

此结帐不起作用： `svn+ssh://atrioom@svn.code.sf.net/p/michaelkrebs/code/trunk` 尽管中继确实存在。这似乎是一个sourceforge问题。对不起，这只是一个讨论，而不是问答。这完全放错地方了吗？

编辑2：

正如@David W. 指示的那样，我确实得到了信息：

```
URL: svn+ssh://atrioom@svn.code.sf.net/p/michaelkrebs/code/MichaelKrebs/trunk 
Repository Root: svn+ssh://atrioom@svn.code.sf.net/p/michaelkrebs/code 
Repository UUID: 5725c7ca-164e-43f7-a85e-87d1503a1558 
Revision: 40 
Node Kind: directory 
Schedule: normal 
Last Changed Author: atrioom 
Last Changed Rev: 39 
Last Changed Date: 2011-11-09 01:20:08 +0100 (Mi, 09 Nov 2011) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:30:23.557

网址错误。是的，trunk 存在，但不是 under `code`- 它是 under `MichaelKrebs`。

我使用匿名访问来查看：

```
$ svn ls svn://svn.code.sf.net/p/michaelkrebs/code
MichaelKrebs/

$ svn ls svn://svn.code.sf.net/p/michaelkrebs/code/MichaelKrebs
branch/
tags/
trunk/

$ svn ls svn://svn.code.sf.net/p/michaelkrebs/code/MichaelKrebs/trunk
.htaccess
.project
404.html
crossdomain.xml
css/
images/
includes/
index.php
js/
robots.txt 
```

所以，你想要的网址必须是这样的：

```
svn+ssh://atrioom@svn.code.sf.net/p/michaelkrebs/code/MichaelKrebs/trunk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:27:18.667

你能做一个

```
svn co --depth=immediates svn+ssh://atrioom@svn.code.sf.net/p/michaelkrebs/code 
```

然后， cd 到中继并执行

```
svn up --set-depth=infinity 
```

之后，您可以`svn info`在主干上执行并查看 URL，复制并粘贴并再次结帐。

# c++ - WriteFileEx 完成例程成功，但传输的字节不正确

> ID：13518045
> 
> 赞同：9
> 
> 时间：2012-11-22T18:07:00.607
> 
> 标签：c++, c, windows, winapi, named-pipes

我正在使用 IO 完成例程通过管道在不同机器上的两个进程之间进行通信。

有时，当调用WriteFileEx 的完成例程时，完成例程参数dwErrorCode 为0（即无错误），GetOverlappedResult 返回true（即无错误），但dwNumberOfBytesTransfered 与WriteFileEx 调用中的nNumberOfBytesToWrite 不匹配。然而，我只在管道的客户端看到这个。

如果传输的字节数与请求传输的字节数不匹配，怎么能认为这是成功的呢？

这是创建客户端对管道的句柄的方式：

```
mHPipe = CreateFile(pipeName,                 // pipe name 
                    GENERIC_READ |            // read and write access 
                    GENERIC_WRITE, 
                    0,                        // no sharing 
                    NULL,                     // default security attributes
                    OPEN_EXISTING,            // opens existing pipe 
                    FILE_FLAG_OVERLAPPED |    // overlapped
                    FILE_FLAG_WRITE_THROUGH,  // write through mode
                    NULL);                    // no template file 

// do some checking...

// The pipe connected; change to message-read mode. 
DWORD dwMode = PIPE_READMODE_MESSAGE; 
BOOL fSuccess = SetNamedPipeHandleState(mHPipe,   // pipe handle 
                                        &dwMode,  // new pipe mode 
                                        NULL,     // don't set maximum bytes 
                                        NULL);    // don't set maximum time 
```

谁能明白为什么会发生这种情况？

谢谢

**编辑：**

相关的 WriteFileEx 代码如下：

```
void WINAPI CompletedWriteRoutine(DWORD dwErrorCode, DWORD dwNumberOfBytesTransfered, LPOVERLAPPED lpOverLap)
{
  BOOL fWrite = FALSE;
  LPPIPEINST lpPipeInst = (LPPIPEINST)lpOverLap;

  //
  // !  99.9% of the time, dwNumberOfBytesTransfered == lpPipeInst->cbDataSize
  //    but 0.1% of the time, they do not match
  //

  // Some stuff

  // Copy next message to send
  memcpy_s(lpPipeInst->chData, sizeof(lpPipeInst->chData), pMsg->msg, pMsg->size);
  lpPipeInst->cbDataSize = pMsg->size;

  // Some other stuff

  fWrite = WriteFileEx(lpPipeInst->hPipeInst,
                       lpPipeInst->chData,
                       lpPipeInst->cbDataSize,
                       (LPOVERLAPPED) lpPipeInst,
                       (LPOVERLAPPED_COMPLETION_ROUTINE)CompletedWriteRoutine);

  // Some other, other stuff
} 
```

其中 LPPIPAINST 被声明为：

```
typedef struct 
{ 
  OVERLAPPED oOverlap;      // must remain first item
  HANDLE hPipeInst;
  TCHAR chData[BUFSIZE];
  DWORD cbDataSize;
} PIPEINST, *LPPIPEINST; 
```

并且对 CompletedWriteRoutine 的初始调用给出了这样声明的 lpOverlap 参数：

```
PIPEINST pipeInstWrite        = {0};
pipeInstWrite.hPipeInst       = client.getPipeHandle();
pipeInstWrite.oOverlap.hEvent = hEvent[eventWriteComplete]; 
```

**编辑：**

在尝试按照 Harry 的建议重新初始化重叠结构之后，我注意到了一些奇怪的东西。我在每个之前`memset`将`OVERLAPPED`结构归零`WriteFileEx`，大约 1/5000 完成例程回调，`cbWritten`参数和`OVERLAPPED`结构的`InternalHigh`成员现在设置为前一条消息的大小，而不是最近的消息。我在完成例程内的管道的客户端和服务器端都添加了一些日志记录到文件中，并且两端发送和接收的数据完全匹配（以及正确的预期数据）。然后揭示了在将数据写入文件的时间里，结构中的`InternalHigh`成员`OVERLAPPED`已经改变，现在反映了我期望的消息的大小（`cbWritten`仍然是旧的消息大小）。我删除了文件日志记录，现在可以使用以下代码重现类似发条的问题：

```
void WINAPI CompletedWriteRoutine(DWORD dwErr, DWORD cbWritten, LPOVERLAPPED lpOverLap)
{
  LPPIPEINST lpPipeInst = (LPPIPEINST)lpOverLap;

  // Completion routine says it wrote the amount of data from the previous callback
  if (cbWritten != lpPipeInst->cbDataSize)
  {
    // Roughly 1 in 5000 callbacks ends up in here

    OVERLAPPED ovl1 = lpPipeInst->oOverlap; // Contains size of previous message, i.e. cbWritten
    Sleep(100);
    OVERLAPPED ovl2 = lpPipeInst->oOverlap; // Contains size of most recent message, i.e lpPipeInst->cbDataSize
  }
  ...
} 
```

似乎有时，完成例程在`OVERLAPPED`结构和完成例程输入参数更新之前被调用。我正在使用`MsgWaitForMultipleObjectsEx(eventLast, hEvent, INFINITE, QS_POSTMESSAGE, MWMO_ALERTABLE);`在 Windows 7 64 位上调用完成例程。

[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684139%28v=vs.85%29.aspx)说：

> “系统在调用完成例程后不使用 OVERLAPPED 结构，因此完成例程可以释放重叠结构使用的内存。”

...显然，这段代码可以重现的东西永远不会发生？

这是一个 WINAPI 错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:25:20.707

添加`FILE_FLAG_NO_BUFFERING`到`CreateFile`通话中 - 从那以后没有看到问题。感谢所有为您的时间发表评论的人。

# html - CSS - 仅在表格内具有单元格间距的边框

> ID：13518046
> 
> 赞同：0
> 
> 时间：2012-11-22T18:07:05.543
> 
> 标签：html, css

我试图弄清楚如何仅在具有单元格间距的表格内添加边框。当我做：

```
table {
  border-collapse: collapse;
  border-spacing: 4px;
}
table td, table th {
  border: 1px solid black;
} 
```

它几乎可以正常工作，只是没有间距的单元格。如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:35:40.313

发布的 CSS 代码是正确的，并且在符合标准的浏览器上导致单元格周围（但整个表格周围）和单元格之间的 4px 间距。我想您是在不支持该[`border-spacing`](https://developer.mozilla.org/en-US/docs/CSS/border-spacing)属性的 IE 7 或更早版本上对此进行测试。

恐怕没有比创建一个没有任何边框的表格并在每个单元格内放置一个内部元素更简单的解决方法了，使该单元格占据除小边距之外的整个单元格，并在内部元素周围绘制边框。这可能会变得很难看，所以我宁愿让 IE 7 上的演示效果欠佳。

（出于某种原因，`border-spacing`似乎在 jsfiddle 中不起作用。可能某些一般规则会覆盖设置属性的正常尝试。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:08:40.370

如果您尝试为已定义`cellspacing`属性的表编写 CSS 规则，解决方案可能是这样的：

```
table[cellspacing] {
  border-collapse: collapse;
  border-spacing: 4px;
}
table[cellspacing] td, table[cellspacing] th {
  border: 1px solid black;
} 
```

但是给你的桌子上课会更干净、更有效（`<table class="withspace">`）。所以你会更经典地做

```
table.withspace {
  border-collapse: collapse;
  border-spacing: 4px;
}
table.withspace td, table.withspace th {
  border: 1px solid black;
} 
```

编辑：以防万一，如果您只想在单元格中留出一些空间，请在您的 css 中添加一个填充值：

```
table {
  border-collapse: collapse;
  border-spacing: 4px;
}
table td, table th {
  border: 1px solid black;
  padding: 4px;
} 
```

# ruby-on-rails - 访问嵌套模型中的资源

> ID：13518047
> 
> 赞同：0
> 
> 时间：2012-11-22T18:07:15.223
> 
> 标签：ruby-on-rails, helpers

我有一个嵌套模型

```
resources :customer do
  resources :readings
end 
```

客户模型有

```
class Customer < ActiveRecord::Base
 attr_accessible :first_name, :last_name, :phase_type, :readings_attributes
 has_many :readings
end 
```

读数控制器有

```
 class Reading < ActiveRecord::Base
   attr_accessible :customer_id, :date_of_reading, :reading1, :reading2, :reading3
   belongs_to :customer
 end 
```

我已经编写了一个辅助方法来确定如何根据客户模型中的 phase_type 呈现部分，但是，辅助方法在读数编辑视图中以表单形式呈现。

readings/_form_reading 中的形式是

```
<%= simple_form_for [@reading.customer, @reading], :html => { :class => 'form- horizontal' } do |f| %>
<%= render "shared/error_messages", :target => @reading %>
<%= f.input :customer_id %>
<%= f.input :date_of_reading, :as => :date %>
<%= render_readings_conditionally(f) %>
<div class="form-actions">
  <%= f.button :submit, :class => 'btn-primary' %>
  <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
              customer_path, :class => 'btn' %>
</div>
<% end %> 
```

Render_readings_conditionally 助手是

```
module ApplicationHelper
def render_readings_conditionally(form)
 if @customer.phase_type == 'Single Phase'
  render 'readings/single_phase',f: form
 else
  render 'readings/three_phase',f: form
 end 
 end
end 
```

我遇到的问题是我需要确定客户阶段类型的类型才能无条件地渲染部分但是，@customer.phase_type 将不起作用，因为它不在读数模型中，我该如何访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:44:18.620

我不确定你想做什么，但也许这会有所帮助。嵌套资源的 routes.rb 应该是这样的：

```
resources :customers do
  resources :readings
end 
```

如果你想在@reading 中访问 phase_type

```
@reading.customer.phase_type 
```

[Rails 嵌套资源指南](http://guides.rubyonrails.org/getting_started.html#generating-a-controller)

# android - 引用旧片段的回调方法

> ID：13518049
> 
> 赞同：5
> 
> 时间：2012-11-22T18:07:17.383
> 
> 标签：android

我有一个包含 Fragment 的片段活动，Fragment 启动了一个下载一些数据的 Asynctask，我在我的 Fragment 中实现了一个回调方法，该方法更新了适配器和列表视图中的一些值。我遇到的问题如下：这是我的 onCreateView 方法（重要部分）：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    list=(PullToRefreshListView)v1.findViewById(R.id.listapull);
    adapterList=new ListViewAdapter(secciones, mContext);
} 
```

当我在 AsyncTask 运行时旋转设备时，doInBackground() 方法继续运行，然后在执行后触发侦听器并在我的片段中启动回调方法，此方法具有我的适配器和列表视图的旧引用： ![在此处输入图像描述](../Images/76104b60e3c021f22bb3b466cad26f37.png)

当方向改变发生并且这是正确的时，片段及其内容被重新创建，但是有谁知道为什么回调方法保留对在方向改变之前创建的适配器和列表视图的引用？

**编辑：**

我有一个执行异步任务的按钮，如下所示：

```
asyncRefresh = new PullRefreshTask(taskContext, mContext, secciones);
asyncRefresh.setUpdatePull2RefreshListener(this);
asyncRefresh.execute(); 
```

如果用户按下按钮，asyncTask 会将旧 Fragment 设置为侦听器，并且当 asynctask 运行时发生方向更改时，我认为激活的回调方法是来自新创建的片段方法的方法，但我不确定了。

**编辑2：**

我已经解决了我的问题，正如我在第一次编辑中所说的那样，正在为旧片段调用回调方法。所以我所做的是将我的 asynctask 保存在另一个名为“Info”的类中的变量中，并在创建视图中这样做：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        list=(PullToRefreshListView)v1.findViewById(R.id.listapull);
        adapterList=new ListViewAdapter(secciones, mContext);
        PullRefreshTasktask task = Info.getAsyncTask();
        asyncRefresh =  task;
        asyncRefresh.setUpdatePull2RefreshListener(this);
    } 
```

这样我在我的片段中设置了新的引用

> setUpdatePull2RefreshListener()

正在运行的 asynctask 的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:57:01.067

> ...有谁知道为什么回调方法保留对在方向更改之前创建的适配器和列表视图的引用？

（这个答案在不知道你的回调实现或你的`AsyncTask`外观的情况下出现）为什么回调不应该保留对旧片段的引用？您在那个`Button`监听器中设置**当前** `Fragment`实例，然后在任务运行时进行设备旋转。您没有任何代码`Fragment`，因为它在配置更改后重建，将更新您的回调实例`AsyncTask`以指向新片段。根据您的使用方式，`Fragment`您可以使用[`Fragment.setRetainInstance()`](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)防止`Fragment`被销毁的方法，因此即使在轮换之后，您的任务也将具有相同的回调实例。另请查看[一位 Android 工程师关于此特定问题的答案](https://stackoverflow.com/questions/8417885/android-fragments-retaining-an-asynctask-during-screen-rotation-or-configuratio)。

# java - Java，将CSV的每一行转换为字符串

> ID：13518051
> 
> 赞同：1
> 
> 时间：2012-11-22T18:07:26.920
> 
> 标签：java, arrays, csv

您好，我是使用 BlueJ 的 Java 新手。我有一个 csv 文件，其中包含表格排列中的大量数据。我试图找到一种方法来获取这些信息并找出第一行中有多少逗号分隔值，然后不管行将每个逗号分隔值放入一个数组中。

有人对如何做到这一点有任何建议吗？

在此先感谢，
哈利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:11:14.163

由于需要支持引用值，CSV 解析可能会很棘手。我建议不要编写自己的 CSV 解析器，而是使用现有的库，例如[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:11:32.973

这是另一个处理 csv 文件的库。[javacsv](http://sourceforge.net/projects/javacsv/) 代码示例在[这里](http://www.csvreader.com/java_csv_samples.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:15:02.800

您可以使用 Scanner 文件来读取文件的每一行，类似于：

```
//  create a File object by giving the filepath
File file = new File("C:\\data.csv");

try {
    // Create a new scanner class that will read the file
    Scanner scanner = new Scanner(file);

    //  while the file has lines to read
    while (scanner.hasNextLine()) {

        //  read the line to a string
        String line = scanner.nextLine();

        //  do what you need with that line
    }
//  catch the exception if no file can be found
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

# dynamic - Selenium ide：动态值不匹配问题

> ID：13518053
> 
> 赞同：0
> 
> 时间：2012-11-22T18:07:34.990
> 
> 标签：dynamic, selenium, ide

我是 selenium ide 的新手，面临以下问题：

我在 Target 中有一个用于单击命令的动态值。该值类似于：XYZ_1234098:out。数值不断变化。我已经尝试过包含和开始，但没有成功。

我尝试过使用正则表达式，但我想我们不能在 selenium ide 中使用它们。

请为该问题提出任何可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:21:11.257

考虑到在您的情况下，某些标签是**id=XYZ_1234098**。你可以尝试类似的东西

```
//*[contains(@id,'XYZ')] 
```

# java - JavaFX Media 无法读取 mp3 流？

> ID：13518058
> 
> 赞同：0
> 
> 时间：2012-11-22T18:07:52.053
> 
> 标签：java, streaming, mp3, javafx-2

我正在尝试创建一个简单的流式 mp3 服务器和客户端。我有一台可以与我能找到的所有客户端一起使用的服务器。接下来我尝试创建一个使用 javafx Media 的流式客户端，本质上是这样的：

```
 new JFXPanel();
    final Media media = new Media(url);
    final MediaPlayer player = new MediaPlayer(media);
    player.setOnPlaying(new Runnable() {
        public void run() { System.out.println("Running"); }
    });
    player.play(); 
```

这在 URL 是 file:/// 时有效，但在 URL 指向我的流服务器时无效。[指向http://lyd.nrk.no/nrk_radio_mp3_mp3_h](http://lyd.nrk.no/nrk_radio_mp3_mp3_h)时也不起作用。使用 curl 手动将数据假脱机到磁盘，然后从文件中播放它可以正常工作。

Java版本是：

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

平台是带有pulseaudio的Debian Linux。

有谁知道这是否应该工作？

编辑：

不工作意味着，它从网络读取一些数据，然后似乎停止。它不打印“正在运行”。

# javascript - 如何将悬停更改为单击 jquery 滑块

> ID：13518061
> 
> 赞同：1
> 
> 时间：2012-11-22T18:08:03.083
> 
> 标签：javascript, jquery, onclick, onhover

我正在使用以下代码（我在其他地方找到并尝试修改以满足我的需要）来创建一个从右侧滑到我的屏幕上的 div。当我单击而不是悬停时，我将如何让它滑出？在此先感谢您的帮助。

```
jQuery(function($) {
$(document).ready(function() {
    $('#introbutton').hover(function() {
        $('#intro-container').stop(true, false).animate({
            'left': '0px'
        }, 900);
    }, function() {
        jQuery.noConflict();
    });

    jQuery('#introbutton').hover(function() {
        // Do nothing
    }, function() {

        jQuery.noConflict();
        jQuery('#intro-container').animate({
            left: '100%'
        }, 800);

    });
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:10:34.087

尝试使用 on.() 即

```
$('#introbutton').on('click', function() {
    // do whatever here
}); 
```

**编辑**

```
$('#introbutton').on('click',function(){
    $('#intro-container').stop(true, false).animate({'left': '0px'}, 900);
}); 
```

您也可以按照 TheSmose 使用 click 作为 on() 的“快捷方式”- 但请记住

> .on() 是从 jQuery 1.7 开始进行所有事件绑定的推荐方法。它将 .bind() 和 .live() 的所有功能整合到一个函数中，当您向其传递不同的参数时，该函数会改变行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:24:44.707

好吧，而不是使用

```
 $('#introbutton').hover(function(){}) 

```

利用

```
 $('#introbutton').click(function(){}) 

```

当然，你必须意识到，与*hover不同，它会返回到之前的状态，在**click*函数运行后，div 不会返回到原来的状态。您可能希望将其纳入整体解决方案。

希望这可以帮助。

### 编辑

此代码段解决了所有问题

```
 var is_show = true;
jQuery(function($) {
  $(document).ready(function() {
    $("#introbutton").click(function(){return runFunction();});    
  });
});

function runFunction(){
    if (is_show){ //show div
        is_show = false;
        $('#intro-container').animate({
            'left': '0px'
        }, 900);       
    }
    else{ //hide div
        is_show = true;
        $('#intro-container').animate({
            'left': '100%'
        }, 800);         
    }
    return false;
} 

```

# java - Java SSLSocket - 如何设置本地端口

> ID：13518062
> 
> 赞同：1
> 
> 时间：2012-11-22T18:08:04.193
> 
> 标签：java, sockets, ssl

创建 SSLSocket 时如何设置本地端口？

这就是我创建套接字的方式：

```
SSLSocketFactory factory = (SSLSocketFactory)SSLSocketFactory.getDefault();  
SSLSocket s = (SSLSocket) factory.createSocket(SERVER_ADDRESS, SERVER_PORT); 
```

似乎 createSocket 方法没有用于设置 LOCAL_PORT 的参数，并且 SSLSocket 的构造函数也不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:16:34.510

有一个 createSocket 方法的变体，它由 SSLSocketFactory 从 SocketFactory 继承，它接受一个主机和一个端口。请参阅[文档](http://docs.oracle.com/javase/7/docs/api/javax/net/SocketFactory.html#createSocket%28java.lang.String,%20int%29)。

# wpf - Expander 折叠时父容器不会缩小

> ID：13518065
> 
> 赞同：1
> 
> 时间：2012-11-22T18:08:41.680
> 
> 标签：wpf, expander

我在 Border 控件中有一个 Expander 控件。当 Expander 折叠时，边框保持相同的高度。我如何使边框也改变它的高度？说明问题的代码：

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Grid.Resources>
        <Style TargetType="Border">
            <Setter Property="BorderBrush" Value="Red"/>
            <Setter Property="BorderThickness" Value="2" />
        </Style>
        <Style TargetType="StackPanel" x:Key="StackPanel1">
            <Setter Property="Orientation" Value="Vertical"/>
            <Setter Property="MaxHeight" Value="100" />
        </Style>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" x:Key="panelBackgroundBrush">
            <LinearGradientBrush.GradientStops>
                <GradientStop Color="#FFE3EFFF" Offset="0" />
                <GradientStop Color="#FFAFD2FF" Offset="1" />
            </LinearGradientBrush.GradientStops>
        </LinearGradientBrush>
        <Style TargetType="{x:Type GridSplitter}">
            <Setter Property="FrameworkElement.Height" Value="3"/>
            <Setter Property="UIElement.SnapsToDevicePixels" Value="True" />
            <Setter Property="UIElement.Focusable" Value="False" />
            <Setter Property="FrameworkElement.Cursor" Value="SizeNS"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border>
                            <Border BorderThickness="0" BorderBrush="{StaticResource panelBackgroundBrush}">
                                <Canvas Width="19" Height="3">
                                    <Canvas.Resources>
                                        <Style TargetType="Rectangle">
                                            <Setter Property="Width" Value="2" />
                                            <Setter Property="Height" Value="2" />
                                            <Setter Property="Canvas.Top" Value="0" />
                                        </Style>
                                    </Canvas.Resources>
                                    <Rectangle Fill="{StaticResource panelBackgroundBrush}" Canvas.Left="1" />
                                    <Rectangle Fill="{StaticResource panelBackgroundBrush}" Canvas.Left="5" />
                                    <Rectangle Fill="{StaticResource panelBackgroundBrush}" Canvas.Left="9" />
                                    <Rectangle Fill="{StaticResource panelBackgroundBrush}" Canvas.Left="13" />
                                    <Rectangle Fill="{StaticResource panelBackgroundBrush}" Canvas.Left="17" />
                                    <Rectangle Fill="{TemplateBinding TextElement.Foreground}" Canvas.Left="0" />
                                    <Rectangle Fill="{TemplateBinding TextElement.Foreground}" Canvas.Left="4" />
                                    <Rectangle Fill="{TemplateBinding TextElement.Foreground}" Canvas.Left="8" />
                                    <Rectangle Fill="{TemplateBinding TextElement.Foreground}" Canvas.Left="12" />
                                    <Rectangle Fill="{TemplateBinding TextElement.Foreground}" Canvas.Left="16" />
                                </Canvas>
                            </Border>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Grid.Resources>
    <Border>
        <Expander>
            <Border>
                <StackPanel Style="{StaticResource ResourceKey=StackPanel1}" >
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                </StackPanel>
            </Border>
        </Expander>
    </Border>
    <Border Grid.Row="1">
        <Expander>
            <Border>
                <StackPanel Style="{StaticResource ResourceKey=StackPanel1}" >
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                </StackPanel>
            </Border>
        </Expander>
    </Border>
    <GridSplitter Grid.Row="1" />
    <Border Grid.Row="2">
        <Expander>
            <Border>
                <StackPanel Style="{StaticResource ResourceKey=StackPanel1}" >
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                    <TextBlock Text="aaaa"/>
                </StackPanel>
            </Border>
        </Expander>
    </Border>
    <GridSplitter Grid.Row="2" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:58:36.420

为了解决这个问题，必须将 RowDefinition.Height 设置为 Auto。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:42:38.927

最好的方法是将边框设置为停靠面板的子项，并将停靠面板的 LastChildFill 属性设置为 true。这是一个例子：

```
<DockPanel LastChildFill="True">
    <Border>
        <Expander Name="PropertiesExpander2"
                  ExpandDirection="Left"
                  IsExpanded="False"
                  DockPanel.Dock="Right">
         </Expander>
    </Border>

    <Border>
              //Here you can add other controls
    </Border>
    </DockPanel> 
```

# objective-c - IOS 5 中的 UINavigationBar 外观错误

> ID：13518073
> 
> 赞同：0
> 
> 时间：2012-11-22T18:09:14.643
> 
> 标签：objective-c, ios, xcode, ios5

我想制作一个带有阴影的自定义 UINavigationBar。这样做：

```
UIImage *barImage = [[UIImage imageNamed:@"navbar2.png"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)]; // OK
[[UINavigationBar appearance] setBackgroundImage:barImage forBarMetrics:UIBarMetricsDefault];  // OK

[[UINavigationBar appearance] setShadowColor:[UIColor blackColor]]; // Error 
```

怎么了？

我可以用“外观”做这件事吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:33:26.430

`UINavigationBar`没有阴影颜色。它有一个阴影图像，或者如果您想设置文本阴影，请使用`titleTextAttributes`.

# php - PHP中的递归函数问题

> ID：13518075
> 
> 赞同：1
> 
> 时间：2012-11-22T18:09:32.087
> 
> 标签：php, function, recursion

我把下面的函数放在一个类中

我尝试在此函数中再次调用它（我在此函数中进行了递归调用`$this->buildMenu($this->itemId, $menuData);`）

只有在没有递归调用的情况下，这个函数才有效，否则它不会返回任何值。

```
// menu builder function, parent_id 0 is the root 
function buildMenu($parent_id, $menuData)
{       
    $this->html = ''; 
    if (isset($menuData['parents'][$parent_id])) 
    { 
        if($parent_id=='0') $this->html = '<ul class="menu responsive-menu sf-js-enabled">';
        else $this->html = '<ul>';
        foreach ($menuData['parents'][$parent_id] as $this->itemId) 
        { 
            if($this->itemId=='1'){$this->html .= '<li><a href="'.PATH.'">' . $menuData['items'][$this->itemId]['menu_name'].'</a>';}
            else $this->html .= '<li class=""><a href="?action='. md5($menuData['items'][$this->itemId]['menu_link']).'">' . $menuData['items'][$this->itemId]['menu_name'].'</a>';
            $this->html .= $this->buildMenu($this->itemId, $menuData); 
            $this->html .= '</li>'; 
        } 
        $this->html .= '</ul>'; 
    } 

    return $this->html;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:15:38.393

问题可能出在`$this->html = '';`.
看起来像是`$html`一个类变量，所以每次递归调用函数，你都将它初始化为一个空字符串。
尝试将其用作局部函数变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:15:06.467

首先，替换`$this->html`为`$html`: 你在递归时用一个空字符串来限制它的值，这不是你想要的，我猜。

# java - Java 泛型运算结果类型

> ID：13518076
> 
> 赞同：0
> 
> 时间：2012-11-22T18:09:47.940
> 
> 标签：java, templates, generics, types

我不是专业的 Java 程序员，所以这个问题可能很简单，但我已经在网上搜索了答案，但到目前为止一无所获。

假设我们在 Java 中有一个泛型类：

```
public class C1 <T, U> {
  public /*TYPE*/ f(T t, U u) {  
    return t.g(u)
  } 
```

问题是 - 我如何确定这个通用示例的结果类型？有没有可能写出类似的东西`typeof(t.g(u))`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:15:25.740

您不能按原样调用`t.g(u)`，因为`T`它是无界类型。您需要对其进行编译时限制，以便编译器知道哪些方法可用。否则，您将只能调用`Object`方法，因为编译器唯一可以推断`T`的就是 extends `Object`。

例如，如果您有一个`G<U>`带有`g`您要调用的方法的接口：

```
public interface G<U> {
    R g(U u);
} 
```

然后你会指定那个`T extends G<U>`，它可以让你调用`g()`. 现在你知道返回类型`g()`是什么了：它是`R`.

```
public class C1<T extends G<U>, U> {
    public R f(T t, U u) {  
        return t.g(u)
    }
} 
```

如果您希望结果`g()`取决于类型`T`，`U`那么您可以执行以下操作：

```
public interface G<T, U> {
    T g(U u);
}

public class C1<T, U> {
    public T f(G<T, U> g, U u) {  
        return g.g(u)
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:13:43.233

您的代码不会按原样编译，因为没有什么可以告诉编译器`t`有一个成员函数`g`。您需要将类型参数声明`T`为扩展某些确实声明`g()`方法的基类或接口。返回类型将是`g`（可能是另一个参数类型）的返回类型。

例如：

```
public interface Foo<X, Y> {
    X g(Y u);
}

public class C1 <T extends Foo<X, U>, U, X> {
    public X f(T t, U u) {  
        return t.g(u);
    }
} 
```

请注意，如果返回类型`X`也是泛型的，则需要在 class 中为其声明一个单独的类型参数`C1`。或者，您可以声明`C1`统一处理单个参数化类型（例如，`String`× `String`→ `String`）：

```
public class C1 <T extends Foo<T, T>> {
    public T f(T t, T u) {  
        return t.g(u);
    }
} 
```

其他变化也是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:13:54.417

如果你想强制 t 使用方法 g，你必须像这样声明你的类：

```
public class C1<T extends Ginterface, U extends SecInterface> {
} 
```

该方法的返回类型将是 Ginterface 中 g 函数的返回类型

# php - CURL 解析 HTML 数据

> ID：13518081
> 
> 赞同：0
> 
> 时间：2012-11-22T18:10:13.390
> 
> 标签：php, json, curl

我正在使用 CURL 生成数据。虽然该站点没有提供任何其他格式的提取所以我所做的只是将 url 和检索 HTML 中的数据这是我的脚本正在检索。我可以将该 html 数据转换为任何其他格式，如 JSON 或 XML，以便我可以轻松地在 PHP 中解析 HTML。如果我无法在 JSON/XL 中获取数据，我将如何提取根据我的相关性解析它的数据。我有一些代码可以在 json 中获取它。

```
function get_json_content($json_url = '') {
    $ch = curl_init($json_url);
    $options = array(
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_HTTPHEADER => array('Content-type: application/json'),
        CURLOPT_TIMEOUT => 160,
        CURLOPT_FOLLOWLOCATION => 1
    );

    curl_setopt_array($ch, $options);               // Setting curl options
    $result = curl_exec($ch);                       // Getting jSON result string
    return $result;
}

$json_url = 'http://www.evertek.com/viewpart.asp?auto=78053&cat=45#.UKZWHme5JI4';
$get_result = get_json_content($json_url);
die($get_result); 
```

这`$get_result`是在 html 中接收的。请帮助我，我的座右铭是以正确的格式提取或解析数据，无论它采用何种格式。我只想轻松解析数据，以便可以将其与 PHP 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:13:02.000

你只能使用 CURL 给你的东西，而 CURL 只能得到它所给的东西——在这种情况下是 HTML。

HTML 并不难使用，请看这里的答案：[How do you parse and process HTML/XML in PHP?](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:15:58.050

试图从一个完整的网站检索数据并不是一件容易的事。您可能希望使用网站支持的 api 以易于操作的有意义的方式为您提供数据。

您需要查看一些与网站抓取有关的教程，否则您将不得不解析 html 并删除无用的信息。

# ruby-on-rails - 具有 mongoid 的许多对象的 update_attributes

> ID：13518083
> 
> 赞同：3
> 
> 时间：2012-11-22T18:10:25.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, mongoid

可能是这样的：

```
@users = User.criteria.for_ids(params[:user_ids])
@users.update_all(:suspend => true) 
```

代替：

```
for u in @users
 u.suspend = true
 u.update_attributes
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T18:18:00.967

看看这个：

```
# Updating one record:
Person.update(15, :user_name => 'Samuel', :group => 'expert')

# Updating multiple records:
people = { 1 => { "first_name" => "David" }, 2 => { "first_name" => "Jeremy" } }
Person.update(people.keys, people.values) 
```

在这里看到：http: [//apidock.com/rails/ActiveRecord/Base/update/class](http://apidock.com/rails/ActiveRecord/Base/update/class)

> *如果验证通过，则更新一个对象（或多个对象）并将其保存到数据库中。无论对象是否成功保存到数据库，都会返回结果对象。*

**在你的情况下：**

```
User.update(params[:user_ids], :suspend => true) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T18:54:54.027

只要`for_ids`方法返回一个条件（而不是数组），您就可以使用`update_all`.

```
@users = User.criteria.for_ids(params[:user_ids])
@users.update_all(:suspend => true) 
```

呼叫被`update_all`翻译成`set`呼叫。有关更多详细信息，请参阅[文档](http://mongoid.org/en/mongoid/docs/querying.html#query_plus)。

# blackberry-simulator - 我无法在 Dev Alpha Simulator 中启动 Android 移植应用程序

> ID：13518096
> 
> 赞同：1
> 
> 时间：2012-11-22T18:11:17.630
> 
> 标签：blackberry-simulator, blackberry-android

我在 BlackBerry Dev Alpha 模拟器中启动 Adroid 移植应用程序时遇到问题。我已经从 BB Dev 网站下载了最新的工具。该应用程序通过 Online Packager 打包。我已经按照说明启动了 Dev Alpa Simulator。该应用程序安装正常，图标在模拟器中可见。但是，当我单击应用程序图标时，它只会显示带有 BlackBerry 徽标的新屏幕，并且永远不会加载应用程序。我用几个应用程序测试过，结果总是一样的。我的电脑详情：Intel Pentium B950 @ 2.10GHz RAM 4.00 GB NVIDIA GeForce GT 520M

我的电脑不支持硬件虚拟化，所以模拟器有点慢。我尝试使用 2 个内核启动模拟器并将模拟器 RAM 增加到 2 GB，但结果相同 - 应用程序没有启动。

附加信息：所有应用程序在 PlayBook（真实设备）上运行良好。我已经使用命令提示符安装了应用程序：blackberry-tablet-sdk-2.1.0\bin\"blackberry-deploy -installApp

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:04:40.127

您使用的是最新版本的 Dev Alpha 模拟器（10.0.9 beta3），您是否尝试过重新启动它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:44:33.413

如果您的机器上没有虚拟化，Android 运行时可能需要一段时间才能启动。我建议改为在安全模式下运行它。如果可能，将内存增加到 2 gig，这有助于不进行虚拟化。

此外，您可以通过 Virtual Machine->Power->Reset 选项执行完整的电源循环，而不仅仅是保持模拟器相同状态的重置（包括 Android 运行时）。

# wpf - 通过 ExitActions 中的动画恢复到初始状态

> ID：13518099
> 
> 赞同：3
> 
> 时间：2012-11-22T18:11:44.530
> 
> 标签：wpf, animation, templatebinding

我为选项卡控件制作了一个模板。它的作用是获取边框的背景并在鼠标悬停时进行动画处理。

当鼠标离开时，它应该从 Background 属性中读取当前值并相应地设置它们。

```
<MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="IsSelected" Value="false"/>
        <Condition Property="IsMouseOver" Value="true"/>
    </MultiTrigger.Conditions>
    <MultiTrigger.EnterActions>
        <BeginStoryboard>
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="Bd" 
                                Storyboard.TargetProperty="Background.GradientStops[0].Color" To="#003372" 
                                Duration="0:0:0.2"/>
                <ColorAnimation Storyboard.TargetName="Bd" 
                                Storyboard.TargetProperty="Background.GradientStops[1].Color" To="#025092" 
                                Duration="0:0:0.2"/>
                <ColorAnimation Storyboard.TargetName="Bd" 
                                Storyboard.TargetProperty="Background.GradientStops[2].Color" To="#003372" 
                                Duration="0:0:0.2"/>
            </Storyboard>
        </BeginStoryboard>
    </MultiTrigger.EnterActions>
    <MultiTrigger.ExitActions>
        <BeginStoryboard>
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="Bd" 
                                Storyboard.TargetProperty="Background.GradientStops[0].Color" To="{TemplateBinding Background.GradientStops[0].Color}" 
                                Duration="0:0:0.2"/>
                <ColorAnimation Storyboard.TargetName="Bd" 
                                Storyboard.TargetProperty="Background.GradientStops[1].Color" To="{TemplateBinding Background.GradientStops[1].Color}" 
                                Duration="0:0:0.2"/>
                <ColorAnimation Storyboard.TargetName="Bd" 
                                Storyboard.TargetProperty="Background.GradientStops[2].Color" To="{TemplateBinding Background.GradientStops[2].Color}" 
                                Duration="0:0:0.2"/>
            </Storyboard>
        </BeginStoryboard>
    </MultiTrigger.ExitActions>
</MultiTrigger> 
```

问题是

`To="{TemplateBinding Background.GradientStops[0].Color}"`部分不工作。我应该在那里写什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T21:29:59.807

不要在块`To`中为您的动画使用任何属性。`ExitActions`然后目标属性应该动画回它的原始值。

# c# - 测量机器的性能以比较代码性能

> ID：13518100
> 
> 赞同：1
> 
> 时间：2012-11-22T18:11:47.597
> 
> 标签：c#, performance

我正在使用 C# 在 .NET Framework 4.5 上运行

我希望测量代码性能，但有额外的复杂性，我想在机器（不同的硬件）之间进行比较。

核心目标之一是提出比较算法的基准（算法 X 与使用数据集 Z 的算法 Y），如果我始终使用相同的硬件，这很好，但我也希望可以选择将这些性能测试分布在许多机器-它们大多不同。

如何有效地衡量特定机器的性能？

我目前正在使用 System.Diagnostics.StopWatch 类与斐波那契套件混合，试图测量机器可以处理多少序列以使用 X 滴答/毫秒。但是，您可能已经知道这种技术不是很精确。

Stopwatch.Frequency 中的答案是什么？

有人有更好的建议吗？

附加信息 -----

示例：比较非多线程的算法（核心数量无关紧要）就像运行顺序扫描和使用红/黑树之间的区别一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:18:25.207

简单地说：你不能。或者至少，不可靠。

例如，我曾经与某人讨论过 .NET 中的静态方法和线程，并且我对几台机器进行了测试。运行相同的可执行文件，单核机器的性能优于双核机器。显然问题在于 .NET 运行时使用不同的内部算法来确定安全性（即，它在双核机器上放置的锁比单核机器上需要的锁更多，或者单核工作站和单核工作站之间的运行时不同）双核服务器）。关键是您甚至无法运行相同的可执行文件来获得不同的基线。

因此，如果您在机器 A 和 B 上运行算法 X，并记录差异（假设机器 B 的速度是机器 B 的两倍），那么您就不能在机器 A 上运行算法 Y，并假设如果在机器上执行该算法的运行速度将是原来的两倍B.

您必须考虑的因素的复杂性太大了。你所能做的就是在不同的机器上比较相同的东西，如果你正在测试机器性能，或者在同一台机器上比较不同的东西，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:20:07.177

不幸的是，实际上不可能提出一个*准确*的度量标准来比较一台计算机 A 在算法 X 上的时间与另一台计算机 B 在算法 Y 上的时间。例如，如果算法 X 比 Y 更占用内存并且计算机 A 运行缓慢与 B 相比，内存和更快的 CPU，算法 X 看起来很糟糕，即使它在计算机 B 上的运行速度可能比 Y 快。

你可以做的是在每台机器上运行每个算法，看看哪个算法具有最佳的平均运行时间、内存使用率等。

您也可以尝试提出一个指标来比较机器，就像您似乎正在尝试做的那样。如果你让它持续几秒钟，并且所有算法都依赖于大致相同比例的 CPU、磁盘、内存和各种 CPU 缓存级别，那么这应该是相当准确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:27:21.990

不仅仅是机器。可能是它有多忙，忙什么。

取决于您是在寻找最低限度的硬件推荐，还是在寻找环境调优。

假设在一台机器上多次运行算法的两个版本之间，除了通常“更慢”或“更快”之外，算法只是不确定的

除了像单核和多核这样的总体差异之外，比较不同的机器是徒劳的。

# delphi - 如何将字符串转换为 TPenStyle？

> ID：13518101
> 
> 赞同：1
> 
> 时间：2012-11-22T18:11:47.977
> 
> 标签：delphi

我在这里看到了一些非常相似的线程，但我找不到解决问题的方法。我从中获取值`TStringList`并将其用作笔样式（`psDot`等`psSolid`），但编译失败并`Incompatible types: 'TPenStyle' and 'String'`显示错误消息。

这是代码：

```
Image1.Canvas.Pen.Style := myList.ValueFromIndex[j]; 
```

我怎样才能转换`myList.ValueFromIndex[j]`为`TPenStyle`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T18:17:16.163

如果存储为 psDot, psSolid 否则你必须适应

```
uses TypInfo;

Image1.Canvas.Pen.Style := TPenStyle(GetEnumValue(TypeInfo(TPenStyle),myList.ValueFromIndex[j])); 
```

正如大卫赫弗南所建议的那样

```
Function PenStyleFromName(const Name: string):TPenStyle;
begin
  Result := TPenStyle(GetEnumValue(TypeInfo(TPenStyle),Name));
end;

//....
Image1.Canvas.Pen.Style := PenStyleFromName(myList.ValueFromIndex[j]); 
```

# c - 检测 GTK 文本缓冲区中的光标移动

> ID：13518102
> 
> 赞同：0
> 
> 时间：2012-11-22T18:11:57.240
> 
> 标签：c, gtk

我正在使用 C 语言编写 GTK+ 编辑器。我添加了在文本视图中显示光标位置的当前行号和列号的功能。它运作良好。但缺点是当我尝试用箭头键移动光标时，行号和列号不会更新。下面是我更新行号和列号的代码

```
 update_statusbar(GtkTextBuffer *buffer,GtkStatusbar  *statusbar)
{
  gchar *msg;
  gint row, col;
  GtkTextIter iter;

  gtk_statusbar_pop(statusbar, 0); 
  g_print("c");
  gtk_text_buffer_get_iter_at_mark(buffer,
      &iter, gtk_text_buffer_get_insert(buffer));

  row = gtk_text_iter_get_line(&iter);
  col = gtk_text_iter_get_line_offset(&iter);

  msg = g_strdup_printf("Col %d Ln %d", col+1, row+1);

  gtk_statusbar_push(statusbar, 0, msg);

  g_free(msg);
}

int main ( int argc, char *argv[])
{
.
.
.
.
.
.
  g_signal_connect(buffer, "changed", G_CALLBACK(update_statusbar), statusbar);
  update_statusbar(buffer, GTK_STATUSBAR (statusbar));

} 
```

我想问题出在“改变”的信号上。由于光标是用箭头键移动的，所以缓冲区不会改变。所以任何人都可以建议我一个更好的方法来解决这个问题。

提前致谢 ：）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T03:30:19.410

TextBuffer [“光标位置”属性](http://developer.gnome.org/gtk3/stable/GtkTextBuffer.html#GtkTextBuffer--cursor-position)具有插入标记（又名光标）的缓冲区偏移量。与该属性变化对应的信号被命名为“notify::cursor-position”，并且是[在 gobject 中定义](http://developer.gnome.org/gobject/stable/gobject-The-Base-Object-Type.html#GObject-notify)的通知信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T16:52:14.397

这可能是完成这项工作的最佳方式。虽然 GtKTextView 上的 move_cursor 信号很适合按键操作。它不响应基于鼠标单击的光标位置更改。GtKTextView 上的通知信号适用于鼠标单击，但在尝试更新缓冲区的插入位置时会导致线程冲突。所以最好的办法是直接将信号“notify::cursor-position”关联到GtKTextView后面的缓冲区。无需将信号关联到 GtKTextView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:42:12.763

[这里](http://developer.gnome.org/gtk/2.24/GtkWidget.html)有一个文本缓冲区信号列表，[这里](http://developer.gnome.org/pygtk/2.22/class-gtktextbuffer.html)有一个通用小部件信号列表。

后一个链接有一个名为的信号[`key-release-event`](http://developer.gnome.org/gtk/2.24/GtkWidget.html#GtkWidget-key-release-event)，您可能会觉得它很有趣。

# opengl - OpenGL - 投影后正确的表面法线

> ID：13518104
> 
> 赞同：2
> 
> 时间：2012-11-22T18:12:04.540
> 
> 标签：opengl, transform, projection, normals

我目前正在使用 OpenGL 开发一个小玩具程序，该程序在剪辑空间视图中显示场景，即它绘制一个立方体以可视化规范视图体积，并在立方体内部绘制投影变换模型。要显示模型图的代码片段：

```
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glScalef(1.0f, 1.0f, -1.0f);
glMultMatrixd(projectionMat);
glMultMatrixd(modelviewMat);
glEnable(GL_LIGHTING);
draw_model();
glDisable(GL_LIGHTING); 
```

因此，自然地，绘制的模型是“扭曲的”（这是所需的行为）。然而，照明是错误的，因为表面法线也被投影矩阵变换，因此在变换后与它们的表面不正交。我想要完成的是“正确”的照明，即扭曲模型的表面具有正确的法线。

问题是 - 我该怎么做？我正在使用通常的法线转置逆矩阵规则，但据我所知，这就是 OGL 默认情况下对其法线所做的事情。我想在用模型视图矩阵转换表面之后，我必须重新计算表面法线，但是该怎么做呢？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:53:16.677

> ```
> glMatrixMode(GL_MODELVIEW);
> glLoadIdentity();
> glScalef(1.0f, 1.0f, -1.0f);
> glMultMatrixd(projectionMat); 
> ```

投影矩阵进入`glMatrixMode(GL_PROJECTION);`。变换法线发生在模型视图的逆转置中。如果模型视图中有一个投影组件，它会破坏您的正常转换。

正确的代码是

```
glMatrixMode(GL_PROJECTION);
glLoadMatrixd(projectionMat);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glScalef(1.0f, 1.0f, -1.0f);
glMultMatrixd(modelviewMat);
glEnable(GL_LIGHTING);
draw_model();
glDisable(GL_LIGHTING); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:08:08.660

如果您使用的是固定函数，则必须将所有这些都放在投影矩阵中。*包括*投影后发生的缩放、平移和旋转：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glScalef(1.0f, 1.0f, -1.0f);
glMultMatrixd(projectionMat);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glMultMatrixd(modelviewMat);
glEnable(GL_LIGHTING);
draw_model();
glDisable(GL_LIGHTING); 
```

这是因为位置（即：您所看到的）由投影和模型视图矩阵转换，但*固定功能照明*仅在视图空间中完成（即：在模型视图之后但*在*投影之前）。

事实上，这正是固定函数 GL 在两个矩阵之间存在区别的原因。

# html - 如何在 div 中添加“闪耀”叠加层？

> ID：13518111
> 
> 赞同：3
> 
> 时间：2012-11-22T18:12:58.313
> 
> 标签：html, css, overlay, gradient

如何添加一个像下图中这样的漂亮叠加层？

![在此处输入图像描述](../Images/d912c3f439d0e91fd2d4918d47d8f036.png)

考虑以下 HTML，我将如何添加这样的叠加层？我知道我可以在上面使用渐变，然后对角应用它，但我也可以弯曲它吗？

```
<div class="photostrip">
  <div class="overlay" />
  <img src="http://i.imgur.com/a21tM.jpg" />
  <img src="http://i.imgur.com/a21tM.jpg" />
  <img src="http://i.imgur.com/a21tM.jpg" />
</div> 
```

* * *

[这是我尝试过的东西](http://codepen.io/sergiotapia/pen/eJwGm)（我已经使覆盖层过度饱和，因此很容易看到），但这并不是我正在寻找的形状。

```
body { background-color: #4b74db; }

.photostrip {
  margin: 0 auto;
  width: 185px;
  background-color: #000;  
  box-shadow: 0px 3px 7px 3px #333;
  padding: 7px;
  padding-bottom: 2px;
  position: relative;

  .overlay {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    border-bottom-right-radius: 200px 403px;
    /* This adds the nice overlay. */
  background: -webkit-linear-gradient(top, rgba(255,255,255,0.60) 0%,rgba(255,255,255,0.05) 100%);
  }

  img {
    display: block;    
    width: 175px;
    height: 120px;
    margin: 0 auto;
    margin-top: 6px;
    margin-bottom: 11px;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:58:12.860

这样的事情对你有用吗： http: [//codepen.io/defo550/pen/Fcsxo](http://codepen.io/defo550/pen/Fcsxo)

```
.photostrip {
  margin: 0 auto;
  width: 185px;
  background-color: #fff;  
  box-shadow: 0px 3px 7px 3px #333;
  padding: 7px;
  padding-bottom: 2px;

  /* Remove default list stylings*/
  list-style: none;

  /* provide a position context for our   pseudo element */
  li {
    position: relative;
  }

  img {
    display: block;  
    width: 175px;
    height: 120px;
    margin: 0 auto;
    margin-top: 6px;
    margin-bottom: 11px;
  }
}

/* overlay styles
  create pseudo element  
*/
.photostrip li:after {
        content: "";
        position: absolute;
       /* position above img */
        z-index: 5;

        width: 175px;
        height: 120px;
        top: 0;
        left: 5px;

/* overlay styles */
        background: linear-gradient(135deg, rgba(255,255,255,0.33) 0%,rgba(255,255,255,0.33) 60%,rgba(255,255,255,0) 61%,rgba(255,255,255,0) 100%);
      }

<ul class="photostrip">
 <li><img /></li>
 <li><img /></li>
 <li><img /></li>
</ul> 
```

我将您的图像放在一个无序列表中，然后在 li （包装每个图像）上创建了一个伪元素，该元素具有背景渐变，具有上面图像的所需效果（或 close ）。

您还可以在 CSS 中分别定位每个 li 以更改背景渐变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:28:28.133

我认为这接近您正在寻找的内容，您只需使用数字 [http://codepen.io/anon/pen/GDvju](http://codepen.io/anon/pen/GDvju)

我刚刚添加了另一层并给了它一个左上角半径

```
body { background-color: #4b74db; }

.photostrip {
  margin: 0 auto;
  width: 185px;
  background-color: #000;  
  box-shadow: 0px 3px 7px 3px #333;
  padding: 7px;
  padding-bottom: 2px;
  position: relative;

  .overlay {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    /* This adds the nice overlay. */
  background: -webkit-linear-gradient(top, rgba(255,255,255,0.60) 0%,rgba(255,255,255,0.05) 100%);
  }
  .overlay2 {
    height: 100%;
    width: 50%;
    position: absolute;
    right: 0px;
    border-top-left-radius: 300px 600px;
    background: -webkit-linear-gradient(top, rgba(0,0,0,0.60) 0%,rgba(0,0,0,0.05) 100%);
  }

  img {
    display: block;    
    width: 175px;
    height: 120px;
    margin: 0 auto;
    margin-top: 6px;
    margin-bottom: 11px;
  }
} 
```

# matlab - 如何创建多项式矩阵并将其转化为系统形式

> ID：13518114
> 
> 赞同：0
> 
> 时间：2012-11-22T18:13:09.783
> 
> 标签：matlab

我目前正在研究 Matlab 中的卷积码。描述这种代码的一种方法是通过其奇偶校验矩阵 H，对于 R = b/c = 2/3 代码的情况，它看起来像这样：

```
[ 1   D   D^3 ]
[ D^3 D^2 1   ] 
```

我想把这个矩阵变成系统形式，即第一个 bxb 列应该形成一个单位矩阵。对于上面的示例，这将类似于：

```
[ 1   0   ? ]
[ 0   1   ? ] 
```

我的问题是，**如何在 Matlab 中**最方便地表示这样一个每个条目都是多项式的矩阵？我在想一个系数向量矩阵，但这似乎有点笨拙。目前，我只是想不出在不产生不必要的复杂性的情况下解决这个问题的最佳方法。

一些进一步
的评论：系数来自 GF(2)，因此所有计算都是模 2 即 1 + 1 = 0，但是在回答了这个问题之后这应该不会有问题。
非常感谢有关此主题的一般提示和问题:-)

EitanT 回答的问题，对多项式次数有一些限制（最大 64，由于 64 位精度）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:31:57.533

由于系数属于 GF(2)，因此您可以将每个多项式表示为二进制数，其中每个位代表相应的幂。例如：D ³ +D ² = 1100 [2] = 12

这使您可以将其存储`H`为简单的矩阵并在将其转换为简化的行梯形形式以获得系统形式时执行相当快速的二元运算符（例如 XOR）。

您示例中的`H`矩阵如下所示：

```
H = [1 2 8;
     8 4 1] 
```

# eclipse - 将 Eclipse 3.3 功能/插件迁移到 Eclipse Juno 4.2

> ID：13518116
> 
> 赞同：0
> 
> 时间：2012-11-22T18:13:21.730
> 
> 标签：eclipse, eclipse-plugin

我正在使用旧版本的 Eclipse（Eclipse Platform 3.3），它使用包含大量功能和插件的产品。产品供应商已不再营业，因此我正在研究迁移功能/插件以在 Eclipse Juno 4.2 上运行的可行性。插件中的 JAR 文件是在 Java 5 上编译的，将在 Java 7 环境中运行（无源代码）。有没有人有做过这样的事情的经验，有没有可能，有没有参考资料？我真的想不出更多细节可以添加到这个问题中，所以我打算这样做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:54:58.593

您有功能的更新站点吗？如果是这样，您是否尝试在新的 Eclipse 4.2 上安装功能/插件？

如果您可以识别您尝试与 4.2 一起使用的产品的 plugins 和 features 文件夹中的文件，您是否尝试将它们复制到干净的 4.2 的 plugins/features 文件夹中？

Eclipse 4 应用程序平台为 3.x 插件提供了一个兼容层，因此它可以正常工作。

[http://xseignard.github.com/demoCamp2012/prez/#22](http://xseignard.github.com/demoCamp2012/prez/#22)

您还可以在此处找到一些关于将 3.x 插件迁移到 4.X 的文献：[http ://www.vogella.com/blog/2012/11/13/getting-your-eclipse-plug-ins-ready-for-日食-4/](http://www.vogella.com/blog/2012/11/13/getting-your-eclipse-plug-ins-ready-for-eclipse-4/)

问候

# javascript - Javascript 标题动画 Tumblr

> ID：13518119
> 
> 赞同：-1
> 
> 时间：2012-11-22T18:13:25.880
> 
> 标签：javascript

我刚看到这个可爱的标题动画（[http://anchorage-theme.pixelunion.net/](http://anchorage-theme.pixelunion.net/)），想知道如何在网站上实现这样的效果。我对 html 和 css 非常流利，并且涉足过 javascript，但从未真正深入了解。也许这是开始的地方。

但是我将如何处理这个标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:18:00.370

那不是动画，那是一种叫做视差滚动的技术。

这个想法是模仿 3D 电视中使用的“视差”视错觉，以便在页面滚动时向页面添加深度效果（即“背景”元素比“前景”元素移动得慢）。

它利用页面的滚动位置来动态设置各种元素的位置、不透明度、旋转或其他属性来达到这种效果。

这是一个简单的教程： http: [//net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/](http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/)

# java - java中的超时锁

> ID：13518120
> 
> 赞同：3
> 
> 时间：2012-11-22T18:13:26.943
> 
> 标签：java, locking, timeout

我正在寻找可以帮助我实现以下模式（伪代码）的机制：

```
TimeoutLock lock = new TimeoutLock();
while(condition) {

    prepare();

    lock.enter(); //cannot enter until specified lock timeout elapses
    execute();
    lock.lockFor(2 minutes);

    finish();
} 
```

我需要将**执行**的调用限制为不比某个指定的时间间隔（例如，两分钟）更频繁地发生，但如果没有必要，我不想阻止**准备**或**执行。**我想知道java是否支持任何锁定机制，一段时间后会“消失”。当然，要求是即使它是由锁定它的同一个线程进入的，锁也不会通过。

我正在考虑涉及 semaphore 和**TimerTask**的解决方案，或者自己计算截止日期并睡多余的时间，但我想知道这样的东西是否已经可用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:02:29.277

[正如 Marko 所说](https://stackoverflow.com/questions/13518120/timed-out-lock-in-java#comment18505663_13518120)，您很可能希望通过将工作交给某种调度程序来执行此操作，而不是阻塞线程。

但是，如果您确实想这样做，我建议您通过在退出临界区时记录时间戳来做到这一点，并让进入的线程在此之后等待一段时间才能通过。就像是：

```
public class TimeoutLock {

    private boolean held;
    private long available;

    public void enter() throws InterruptedException {
        acquire();
        long pause;
        while ((pause = available - System.currentTimeMillis()) > 0L) {
            Thread.sleep(pause);
        }
    }

    private synchronized void acquire() throws InterruptedException {
        while (held) {
            wait();
        }
        held = true;
    }

    public synchronized void lockFor(long period) {
        held = false;
        available = System.currentTimeMillis() + period;
        notify();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:24:08.240

无需特殊课程：

```
synchronized(lock) {
   execute();
   Thread.sleep(120 * 1000)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T18:28:32.773

下面将基本上你有一个信号，它只会让你访问如果有可用的许可证，我这种情况下是零许可证。所以它会在最终放弃之前尝试 2000 秒 ->

```
Semaphore s = new Semaphore(0);
Object lock = new Object();
 synchronized(lock)
{
execute();
s.tryAcquire(2,TimeUnit.Minutes)
} 
```

`Thread.sleep`是一种蹩脚和低级的做法。不建议

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T18:15:48.127

你可以使用睡眠

```
sleep(1000); 
```

# linux - 使用 xinit 控制非 x 实用程序的放置

> ID：13518129
> 
> 赞同：1
> 
> 时间：2012-11-22T18:14:05.177
> 
> 标签：linux, x11

刚刚开始使用 linux 编程和特定的 X Windows。我正在尝试制作一个应用程序，我在象限视图中启动 4 个不同的程序（例如 VLC、Web 浏览器等）。现在我不需要（或想要）一个位于顶部的窗口管理器，只需要运行最基本的应用程序。

我可以使用 -geometry 命令使用 x 实用程序（如时钟等）来执行此操作。

我的问题是，我如何控制这些其他应用程序的放置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:18:02.760

**解决方案 1**

[Devilspie](https://help.ubuntu.com/community/Devilspie)是完成此任务的完美工具。举个例子：

```
+--------+------------------------+
| Pidgin |                        |
| Buddy  |        Pidgin          |
| List   |     Conversation       |
|        |                        |
|        +------------------------+
|        |                        |
|        |        Xchat           |
|        |                        |
|        |                        |
+--------+------------------------+ 
```

可以通过以下配置完成。

```
(if (is (application_name) "Pidgin")
        (begin
                (if (is (window_role) "buddy_list")
                        (begin
                                (undecorate)
                                (skip_tasklist)
                                (geometry "199x767+0+0")
                        )
                )
                (if (is (window_role) "conversation")
                        (begin
                                (undecorate)
                                (geometry "822x400+201+0")
                        )
                )
        )
) 
```

**解决方案 2**

启动所需的应用程序，然后使用[wmctrl](http://tomas.styblo.name/wmctrl/)将窗口移动并调整到所需位置。您可以使用 -r 参数来实现这一点。

```
 -r <WIN> -e <MVARG>  Resize and move the window around the desktop. 
```

**恶魔经验（更新）**

按照评论中的要求。我一直在使用devilspie，它真的很棒，并且可以与我使用过的每个窗口管理器一起使用 gnome、xfce、kde、fvwm。我已经整理了一个有效的devilspie 配置，可以完成您想要的部分工作。您可以将此文件放在`~/.devilspie/devilspie.ds`. 还附有一个屏幕截图，显示了此配置文件的结果。我在 foosel.org 上找到的关于 devilspie 的最佳[文档](http://www.foosel.org/linux/devilspie). 我强烈建议您使用它。在测试devilspie 时，在终端的前台运行它。如果是这样，请确保没有其他恶魔进程正在运行杀死它们。每次您更改配置并希望查看结果时，请在 Devilspie 上按 CTRL+C 并再次运行它。其他一些需要注意的事情，如果 vlc 在关闭时被最大化，那么它将再次最大化打开，并且会忽略调整大小和移动的恶魔请求。因此，请确保在关闭 vlc 时不会将其最大化。您也可以先打电话`unmaximize`，然后再`geometry`打电话。

```
(debug)
(if
    (is (application_name) "VLC media player")
    (geometry "500x300+0+0")
)
(if
    (is (application_name) "xterm")
    (geometry "300x300+510+0")
)
(focus) 
```

**截图** ![在此处输入图像描述](../Images/6912c91c7963d50924e743d212835417.png)

# ajax - tiny mce 无法在 ajax 中发送单词标签

> ID：13518130
> 
> 赞同：2
> 
> 时间：2012-11-22T18:14:10.937
> 
> 标签：ajax, tags, tinymce, word

我正在使用 tiny mce 通过 post 方法发送 ajax 信息。当我发送常规文本甚至 HTML 标签时，它工作正常；但是，当我的用户从 Word 文档中粘贴时，只有第一个标签会发布到服务器页面。我已经尝试了所有这些插件：

```
 theme_advanced_statusbar_location: "bottom",
          theme_advanced_resizing: true,
          force_br_newlines: true,
          force_p_newlines: false,
          apply_source_formatting : false, 
```

当我看到 html 代码时，它看起来不错，但我总是只获得服务器页面中的第一个标签（类似于`<p>`）。我已经尝试了我能想到的一切，我不知道这是一个 ajax 还是一个微小的 mce 问题。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:09:17.160

看起来您必须将这些单词标签和/或属性定义为有效。仔细查看 tinymce 配置选项 valid_elements 和 valid_children。

# php - 照片上传批量请求错误 + 多用户

> ID：13518132
> 
> 赞同：0
> 
> 时间：2012-11-22T18:14:22.810
> 
> 标签：php, facebook, facebook-batch-request

我有带有 publish_stream 的应用程序，我可以在我的用户墙上发布状态更新，现在我想发布照片，在搜索后我阅读了 batchrequest 并制作了这样的代码

```
<?php 
require_once('./includes/config.php');
require_once('./includes/skins.php');
require_once('./includes/functions.php');
require_once('./includes/facebook.php');
 $app_id = "$appid";
 $app_secret = "$appsec"; 

$sql=mysql_query("select `f_id`, `facebook_access_token` from `users` ");
while($rows = mysql_fetch_array($sql)){
$f_id=$rows['f_id'];
$facebook_access_token=$rows['facebook_access_token'];   
$batched_request = '[{"method":"POST", "relative_url":"'.$f_id.'/photos",' 
    . ' "body" : "message=لو بتحب جاهين و رباعياته اشترك معانا فى التطبيق و هننشرلك على بروفايلك اجمد رباعيات صلاح جاهين http://2lshmaker.uni.me/jahin/", "attached_files":"file1"}}]';

$post_url = "https://graph.facebook.com/" . "?batch="
    . Urlencode($batched_request) . "&". $facebook_access_token 
    . "&method=post";
}  
 echo ' <form enctype="multipart/form-data" action="'.$post_url.'" 
       method="POST">';
 echo 'Please choose 2 files:';
 echo '<input name="file1" type="file">';
 echo '<input type="submit" value="Upload" />';
 echo '</form>';
?> 
```

但它给了我那个错误

```
{
   "error": {
      "message": "Top level access token or app id not specified for batch request.",
      "type": "GraphBatchException"
   }
} 
```

尽管已经有了 publish_stream 和有效的 access_token，但我不知道我得到了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:41:46.577

您需要指定顶级访问令牌，即使您为批处理中的每个单独请求都包含访问令牌

阅读批处理 API 文档中标记为“为不同操作指定不同访问令牌”的部分

> 上述所有示例都将单个访问令牌指定为顶级参数。Batch API 非常灵活，允许各个请求将自己的访问令牌指定为查询字符串或表单发布参数。在这种情况下，顶级访问令牌被视为后备令牌，并且在单个请求未明确指定访问令牌时使用。
> 
> 当您想要使用多个用户的不同访问令牌查询 API，或者如果您的某些调用需要使用应用程序访问令牌进行时，这可能很有用。
> 
> 如果没有一个单独的请求指定要使用的访问令牌，则必须包含一个访问令牌作为顶级参数，这将用于所有请求。

假设`$facebook_access_token=$rows['facebook_access_token'];`返回一个访问令牌列表，这些需要附加*在*批处理中的每个调用中，因此`$batched_request`应该有相同数量的调用以匹配您提供的访问令牌的数量。除此之外，如果您提供的任何令牌失败，您还需要一个顶级访问令牌，因此很可能它将应用程序访问令牌作为后备。

特定于您的代码，您甚至没有正确定义顶级访问令牌参数，它应该是

`$post_url = "https://graph.facebook.com/" . "?batch=" . Urlencode($batched_request) . "&access_token=". $facebook_access_token . "&method=post";`

**“&access_token=”。$facebook_access_token**
`------^MISSING^`

那就是它必须是字段和值的形式。[http://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)

# visual-studio-2010 - 添加 TimeScaleValue MS 项目时出现异常

> ID：13518133
> 
> 赞同：0
> 
> 时间：2012-11-22T18:14:26.197
> 
> 标签：visual-studio-2010, ms-office, ms-project

我在这段代码中遇到了这个异常：

```
Dim TSV As TimeScaleValues
TSV = ActiveProject.Task(ntask).Resources(nresource).TimeScaleData(nStartDate , nEndDate, PjResourceTimescaledData.pjResourceTimescaledActualWork, PjTimescaleUnit.pjTimescaleDays, 1)

TSV.item(1).Add( nMinutes , 1 ) ' nMinutes is the value of time in minutes. The error occours in this line !!!! 
```

当我执行最后一行时，我得到了这个异常

> 参数值无效。
> 
> > 错误代码-2146827187
> > 
> > {Microsoft.Office.Interop.MSProject.TimeScaleValue Add(System.Object, System.Object)}

奇怪的是我从这个[微软参考页面得到了这个例子。](http://msdn.microsoft.com/en-us/library/office/office.vbapj.chm131340%28v=office.14%29.aspx)

我想要做的是在项目中添加时间尺度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:10:27.653

我解决了这个问题。我将值设置在错误的位置。

似乎很困惑，但我试图从资源中获取时间尺度值，但设置值的正确位置是在分配上。

我在做这个。。

```
TSV = ActiveProject.Task(ntask).Resources(nresource).TimeScaleData... 
```

正确的代码如下：

```
TSV = ActiveProject.Assignments.TimeScaleData.. 
```

为任务中的每个资源创建一个分配，因此最终代码如下：

```
 For Each assignment As Assignment In Task.Assigments
     if assignment.Resource.WindowsUserAccount = <desiredAccount> then
         tsv = assingment.TimeScaleData..
   end if
Next 
```

# oracle - Oracle 中的 Diatric 字符串转换 – Oracle 中的 TO_ASCII 替代方法 – 如何删除重音符号和特殊字符

> ID：13518136
> 
> 赞同：4
> 
> 时间：2012-11-22T18:14:51.497
> 
> 标签：oracle, character-encoding, plsql, ascii, non-ascii-characters

我需要将带有diatrics的字符串转换为它的ASCII版本。

例如，字符串“Caicó”被转换为“Caico”，“À bientôt”被转换为“A bientot”。许多欧洲语言使用变音符号来装饰常规拉丁字母以改变其发音，这是一个常见的问题。

问题是当使用 ASCII（常规）编码输入数据库时​​，您需要将其与 Unicode 字符进行比较。

该函数`TO_ASCII`在葡萄牙语的 PostegreSQL 中运行良好。对 Oracle 上的类似功能或在 Oracle 中比较此类字符串的更好方法有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:24:18.180

这样的东西合适吗？也许将它包装在一个函数中？

```
SELECT CONVERT(TRANSLATE('Ä Ê Í Ó Ø A B C D E ã Ã ã Ã'
   ,'ãÃ','aA')
   ,'US7ASCII','WE8ISO8859P1') from dual 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:14:51.497

下面的函数在 Oracle 中几乎适用于葡萄牙语中的所有字符，但不适用于字符 'ã' 或 'Ã'</p>

```
SELECT CONVERT('Ä Ê Í Ó Ø A B C D E ã Ã','US7ASCII','WE8ISO8859P1') from dual 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T16:47:54.683

尝试使用

```
SELECT CONVERT('Ä Ê Í Ó Ø A B C D E ã Ã', 'us7ascii', 'ee8mswin1250') FROM DUAL 
```

这将删除字符“ã”或“Ã”。

# javascript - Nodejs Express3使用会话检查用户是否登录

> ID：13518149
> 
> 赞同：4
> 
> 时间：2012-11-22T18:15:56.677
> 
> 标签：javascript, node.js, session, cookies, express

我有以下`app.js`代码

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.enable('jsonp callback');
  app.set('view engine', 'jade');
  app.set('view options', {layout : false});
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({
    secret : 'abcdefg'      
  }));
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
  app.use(function(req, res, next){
    res.locals.user = req.session.user;
    next();
  })

}); 
```

我正在努力做到这一点，以便我`.jade`视图中的以下代码可以正常工作

```
- if(session.user)
          div#logoutsection.pull-right
            a#logout-btn.btn.btn-info.pull-right.top-bar-form-button(href='logout/') Logout
            p#loginprompt.pull-right.login-prompt #{session.user.username} logged In
        - else
          ul.pull-right
            li
          a#signup-btn.btn.pull-right.top-bar-form-button(href='#signup-modal', data-toggle="modal") Sign Up 
```

因此，如果他们未登录，请提供注册选项，如果他们已登录，请告诉他们“已登录”。我在代码末尾添加了函数，`app.configure`就像它使用之前一样，`dynamicHelpers()`我被告知这`cookieParser()`是要走的路，但是我将如何编码，以便我可以检查我的用户是否已登录并提供他们的用户名我想在上面吗？

任何帮助表示赞赏。

谢谢！

编辑：index.js

```
'use strict'

var util = require('util');
var Logger = require('devnull');
var logger = new Logger({namespacing : 0});
var User  = require('../schemas/User');
var Post = require('../schemas/Post');

/**
  * Get Meta information about all the Post's
  */
var getAllMeta = function(req, res, next){
  Post.getAllMeta(function(err, postsList){
    if(!err && postsList){
      req.postsList = postsList;
    }
    next(err);
  });
};

/**
  * validate the signup credentials entered by the user
  * @param {String} username 
  * @param {String} pass1 : first password
  * @param {String} pass2 : verification password
  */
var validateUserData = function(username, pass1, pass2){
  if(pass1.trim() !== pass2.trim()){
    util.log('Passwords not Matching ' + pass1 + ' ' + pass2);
    return 'Passwords not Matching';
  }
  return '';
  //put any other validations here
};

/*
 * GET home page.
 */
module.exports = function(app){
  /**
    * Map the URL '/' to the callback
    */
  app.get('/', function(req, res){
    logger.log('Serving request for url [GET]' + req.route.path)
    Post.getAll(function(err, allPosts){
      if(!err && allPosts){
        res.render('index', {'allPosts' : allPosts});
      }else{
        util.log('Error fetching posts from database : ' + err);
        res.render('error');
      }
    });
  });

  /**
    * Map the URL '/login' to the callback
    */
  app.post('/login', function(req, res){
    logger.log('Serving request for url [POST] ' + req.route.path);
    var username = req.body.User;
    var password = req.body.Password;

    User.validateUser(username, password, function(err, user){
      if(err && !user){
        res.json({
          retStatus : 'failure'  
        });
      }else{
        console.log(user);
        req.session.user = user;
        res.json({
          retStatus : 'success',
          user : user ,
        });
      }
    });
  });

  /**
    * Logout the current user and clear the session
    */
  app.get('/logout', function(req, res){
    logger.log('Serving request for url [GET] ' + req.route.path);
    req.session.user = undefined;
    res.redirect('/');
  });

  /**
    * Add a new User to database
    */
  app.post('/signup', function(req, res){
    util.log('Serving request for url [POST] ' + req.route.path);
    var signupForm = req.body.signupForm;
    var username = signupForm.username;
    var pass1 = signupForm.pass1;
    var pass2 = signupForm.pass2;

    var validateMsg = validateUserData(username, pass1, pass2);
    if(validateMsg !== ''){
      res.json({
        'retStatus' : 'failure',
        'message' : validateMsg
      });
    }else{
      var newUser = new User();
      newUser.username = username;
      newUser.password = pass1;

      newUser.save(function(err, savedUser){
        var message = '';
        var retStatus = '';
        if(!err){
          util.log('Successfully created new user with Username : ' + username);
          message = 'Successfully created new user : ' + username;
          retStatus = 'success';
          req.session.user = savedUser;
        }else{
          util.log('Error while creating user : ' + username + ' error : ' + util.inspect(err));
          if(err.code === 11000){
            message = "User already exists";
          }
          retStatus = 'failure';
        }
        res.json({
          'retStatus' : retStatus,
          'message' : message
        });
      });
    }
  });

  app.get('/admin', getAllMeta, function(req, res){
    util.log('Serving request for url [GET] ' + req.route.path);    
    if(req.session.user){
      res.render('post', {'postsList' : req.postsList});
    }else{
      res.redirect('/');
    }
  });

  /**
    * Save the post to database
    */
  app.post('/admin/save/post', function(req, res){
    var postContent = req.body.postContent;

    if(postContent.postKey === '' || postContent.postKey === undefined){
      var post = new Post();
      post.subject  = postContent.postSubject;
      post.content  = postContent.postContent;
      post.author   = req.session.user.username;
      post.tags     = postContent.postTags;

      post.save(function(err, response){
        if(!err && response){
          util.log('Successfully saved Post with id : ' + response.id);
          res.json({
            'retStatus' : 'success',
            'data' : response
          })
        }else{
          util.log('Error saving the Post : ' + err);
          res.json({
          'retStatus' : 'failure',
            'error' : err
          });
        }
      });
    }else{
      var conditions = {'key' : postContent.postKey};
      var update = {
        'subject' : postContent.postSubject,
        'content' : postContent.postContent,
        'tags' : postContent.postTags
      };

      Post.update(conditions, update, null, function(err, numAffected){
        if(!err && numAffected){
          util.log('Successfully updated the Post with id : ' + postContent.postKey);
          res.json({
            'retStatus' : 'success',
            'numAffected' : numAffected
          });
        }else{
          util.log('Error updating the Post with id : ' + postContent.postKey + ' ' + err);
          res.json({
            'retStatus' : 'failure'
          });
        }
      });
    }
  });

  app.get('/post/show/:key', function(req, res){
    Post.findByKey(req.params.key, function(err, postData){
      if(!err && postData){
      postData = postData[0];
        res.json({
          'retStatus' : 'success',
          'postData' : postData
        });
      }else{
        util.log('Error in fetching Post by key : ' + req.params.key);
        res.json({
          'retStatuts' : 'failure',
          'msg' : 'Error in fetching Post by key ' + req.params.key
        });
      }
    }); 
  });

  app.post('/admin/save/', function(req, res){
    //container for saving a post
  });

  app.get('/admin/remove/:key', function(req, res){
    //container for deleting a post
  });

  app.get('/contact', function(req, res){
    util.log('Serving request for url[GET] ' + req.route.path);
    res.render('contact');
  });
}; 
```

用户.js

```
'use strict'

var util    = require('util');
var bcrypt  = require('bcrypt');
var mongoose = require('mongoose');
var Schema   = mongoose.Schema;

var validatePresenceOf = function(value){
  return value && value.length; 
};

var toLower = function(string){
  return string.toLowerCase();
};

var User = new Schema({
  'username' : { type : String, 
              validate : [validatePresenceOf, 'a Username is required'],
              set : toLower,
              index : { unique : true }
              },
  'password' : String,
});

User.statics.findUser = function(username, password, cb){
  return  this.find({'username' : username}, cb);
};

User.statics.validateUser = function(username, password, cb){
  this.find({'username' : username}, function(err, response){
    var user = response[0];
    if(!user || response.length === 0){
      cb(new Error('AuthFailed : Username does not exist'));
    }else{
      if(password == user.password){
        util.log('Authenticated User ' + username);
        cb(null, user);
      }else{
        cb(new Error('AuthFailed : Invalid Password'));
      }
    }
  });
};

module.exports = mongoose.model('User' , User); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:26:36.727

也许我理解您的问题是错误的，但您唯一缺少的是一条路线，您可以在其中对用户进行身份验证，例如：

```
app.post('/login', function(req, res){
  if(req.body.user == 'Ryan' && req.body.password == 'Dahl'){
    req.session.user = aUserIdOrUserObject;
    res.send(200) // or redirect
  }
}; 
```

这是hust伪代码。您显然想检查用户和密码是否与您的数据库匹配。

您缺少的第二点是永久会话存储，例如[https://github.com/masylum/connect-mongodb](https://github.com/masylum/connect-mongodb)或[https://github.com/CarnegieLearning/connect-mysql-session](https://github.com/CarnegieLearning/connect-mysql-session)。内存存储仅对开发有用，在生产中这可能会杀死您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:15:50.233

我在我工作的应用程序中所做的，并且为了不必在每个控制器操作中进行此验证，是：

```
//userValidation.js
module.exports = function(req, res, next){
    if(req.body.user == 'Ryan' && req.body.password == 'Dahl'){
        next();
    }else res.send("Not auth");
}

//controller.js
var validate = require("./userValidation");

app.post("/route", validate, function(req, res){
    //if execution get to this point you are sure that user is authenticated.
}); 
```

这段代码也来自我工作的应用程序，这就是我们设置会话工作的方式。出于开发目的，您可以替换`MongoStore`为`MemoryStore`.

```
app.configure(function(){
        app.set('views', __dirname + '/views');
        app.set('view engine', 'jade');

        app.use(connect.compress());
        app.use(express.static(__dirname + "/public", { maxAge: 6000000 }));
        app.use(express.favicon(__dirname + "/public/img/favicon.ico", { maxAge: 6000000 }));    
        app.use(express.bodyParser());
        app.use(express.methodOverride());
        app.use(express.cookieParser());
        app.use(express.session({
            secret: config.sessionSecret,
            maxAge: new Date(Date.now() + (1000 * 60 * 15)),
            store: new MongoStore({ url: config.database.connectionString })
        }));
        app.use(function(req, res, next){
            console.log("\n~~~~~~~~~~~~~~~~~~~~~~~{   REQUEST   }~~~~~~~~~~~~~~~~~~~~~~~".cyan);
            res.locals.config = config;
            res.locals.session = req.session;
            res.locals.utils = viewUtils;
            next();
        });
        app.use(app.router);
        app.use(function(req, res, next){
            res.status(404).send("Resource not found");
        });
}); 
```

为了在会话中设置用户，我们有这个：

```
var User = require("../utils/modelRegistrar").user; //any way to get the User model
var userRepository = require("../domain/repositories/usuarioRepository");
var hash = require("../utils/hash");

module.exports.init = function(app, io){
    app.publicPost("/login", login);
    app.put("/exit", exit);
};

function login(req, res){
    var dadosDeLogin = req.body.dadosDeLogin; 
    userRepository.autenticar(dadosDeLogin.login, /*hash.md5(*/dadosDeLogin.senha/*)*/, function(err, user){
        if(err) req.next(err);
        if(user){
            user.lastAcess = new Date();
            user.access++;

            userRepository.update(user, ["lastAcess", "acess"], function(err){
                if(err) req.next(err);
                else{
                    req.session.logedUser = user;
                    res.redirect("/home");
                }
            });
        }
        else res.redirect("/#user-not-found");
    });
};

function exit(req, res){
    if(req.session.logedUser) delete req.session.logedUser;
    res.redirect("/");
} 
```

可能部分代码仍然是葡萄牙语

# javascript - 没有 jQuery 的纯 CSS 工具提示

> ID：13518151
> 
> 赞同：5
> 
> 时间：2012-11-22T18:16:17.987
> 
> 标签：javascript, html, css

> **可能重复：**
> [如何使用纯 CSS 创建“工具提示尾部”？](https://stackoverflow.com/questions/5623072/how-can-i-create-a-tooltip-tail-using-pure-css)

我想创建一个 Facebook/Twitter 样式的工具提示（当您将鼠标悬停在人们的个人资料上并且有他们个人资料的简短摘要时）。我遇到了很多教程，但他们使用 jQuery。有没有办法做到这一点是CSS，也许是javascript？

+我希望它也适用于图像。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T19:28:01.587

你可以用纯CSS来做

您可以使用悬停伪类来触发它。

这是一个可以帮助您入门的一般概念

```
div.profile-on-hover { display: none }
a:hover + .profile-on-hover { display: block }

<a>hover me</a>
<div class="profile-on-hover">bunch of stuff</div> 
```

[http://jsfiddle.net/AsKpv/](http://jsfiddle.net/AsKpv/)

div 需要跟在 a 标签之后，才能使用 CSS

如果你想让它变得时髦，你可以使用 opacity: 0 和 opacity:1 和一个 css3 过渡来让它淡入淡出。

祝你好运

# symfony - 检查 Behat Mink 场景中的单选按钮状态？

> ID：13518157
> 
> 赞同：2
> 
> 时间：2012-11-22T18:16:31.683
> 
> 标签：symfony, tdd, behat, gherkin, mink

如果选中了给定的单选按钮，我需要在输出中查看。我应该使用什么样的定义？我在谷歌上搜索了很多，但没有找到解决方案（这可能就在我面前，因为有人可能会向我保证）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:22:48.343

Mink 提供了一个测试复选框的步骤：

```
the "form_checkbox" checkbox should be checked 
```

但是对于单选按钮，您需要编写自己的步骤。就像是 ：

```
/**
 * @Then /^Radio button with id "([^"]*)" should be checked$/
 */
public function RadioButtonWithIdShouldBeChecked($sId)
{
    $elementByCss = $this->getSession()->getPage()->find('css', 'input[type="radio"]:checked#'.$sId);
    if (!$elementByCss) {
        throw new Exception('Radio button with id ' . $sId.' is not checked');
    }
} 
```

您可以使用 find() 方法使用 CSS 选择器来定位元素。在这里，我们搜索一个已选中并具有给定 id 的单选按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-02T15:36:47.413

这个定义对我有用：

```
And the "radio-buton-name" field should contain "radio-button-value" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T14:15:41.377

您可以编写自己的步骤定义。例如，这就是我所做的：

```
/**
 * @When /^I check the "([^"]*)" radio button$/
 */
 public function iCheckTheRadioButton($labelText)
     {
     foreach ($this->getMainContext()->getSession()->getPage()->findAll('css', 'label') as $label) {
         if ($labelText === $label->getText() && $label->has('css', 'input[type="radio"]')) {
             $this->getMainContext()->fillField($label->find('css', 'input[type="radio"]')->getAttribute('name'), $label->find('css', 'input[type="radio"]')->getAttribute('value'));
             return;
         }
     }
     throw new \Exception('Radio button not found');
 } 
```

我知道这是一个老问题，但我在 Stack Overflow 和 Google 上搜索时并没有真正找到一个好的答案，所以我在这里发布了我的解决方案。它可能会帮助某人。

[http://blog.richardknop.com/2013/04/select-a-radio-button-with-mink-behat/](http://blog.richardknop.com/2013/04/select-a-radio-button-with-mink-behat/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T13:07:24.150

Behat/Mink 扩展本身提供的方法运行良好：

**@版本** `Behat v3.0.14`

**@看** `\Behat\MinkExtension\Context\MinkContext`

```
/**
 * Checks checkbox with specified id|name|label|value.
 *
 * @When /^(?:|I )check "(?P<option>(?:[^"]|\\")*)"$/
 */
public function checkOption($option)
{
    $option = $this->fixStepArgument($option);
    $this->getSession()->getPage()->checkField($option);
} 
```

刚刚测试过，它也适用于标签（如方法定义上方的 phpdoc 中所述）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-15T21:08:57.140

我认为这值得一提，我为使用标签查找它的复选框添加了一个。

```
/**
 * @Then the checkbox for :checkboxLabel should be selected
 */
public function theCheckboxForShouldBeSelected($checkboxLabel)
{
    $elementByCss = $this->getSession()->getPage()->find('css', 'label:contains("'.$checkboxLabel.'") input:checked');
    if (!$elementByCss) {
        throw new Exception('Checkbox with label ' . $checkboxLabel.' is not checked');
    }
} 
```

# javascript - Spotify 应用程序仅在使用调试器时显示专辑封面

> ID：13518158
> 
> 赞同：2
> 
> 时间：2012-11-22T18:16:33.480
> 
> 标签：javascript, api, spotify, timing

我已经构建[了这个 Spotify 应用程序，它使用](https://github.com/chirpradio/chirpradio-spotify)[Spotify API](https://developer.spotify.com/technologies/web-api/search/)搜索专辑。我已经`Player`从专辑中实例化了一个对象，但在正常操作下它没有将专辑封面显示为背景图像。**但是，如果我在**[这一行](https://github.com/chirpradio/chirpradio-spotify/blob/master/app/app.js#L59)上创建一个断点并逐行创建，专辑封面*确实可以*正常显示。我什至[更改](https://github.com/chirpradio/chirpradio-spotify/blob/master/app/spotify-metadata.js#L31)了 Spotify API`GET`请求`async: false`以消除奇怪的时间问题。任何帮助，将不胜感激。

**图片**

1.  [使用调试器单步执行代码时工作](https://www.evernote.com/shard/s8/sh/96a211ec-3fd7-468b-9c6b-e6ad2395684c/8f48da77190ecccbaa348899eb89f2bb)
2.  [不使用调试器时不工作](https://www.evernote.com/shard/s8/sh/5c5c83b6-7658-4d3b-930a-38a2d5fef034/afe104e14c8ad9cb33f0926261bdac10)

# java - 根据java中的输入选择一个函数

> ID：13518161
> 
> 赞同：0
> 
> 时间：2012-11-22T18:16:36.753
> 
> 标签：java, function

如果我有以下两个功能。如何选择将要选择的功能？

我想要么有某种形式的语句来确定扫描仪的内容，因此只有一个功能。或者它将是传递给函数的东西。

```
 public static int questionAsk(String question)
{
    Scanner scan = new Scanner (System.in);
    System.out.print (question+"\n");
    System.out.print ("Answer: ");
    return scan.nextInt();
}
    public static String questionAsk(String question)
{
    Scanner scan = new Scanner (System.in);
    System.out.print (question+"\n");
    System.out.print ("Answer: ");
    return scan.nextLine();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:24:35.603

编译器无法知道您正在调用哪一种方法。您可以通过将字符串类型更改为其他内容来使其类型安全，如下所示：

```
 public static int questionAsk(IntQuestion question)
{
    Scanner scan = new Scanner (System.in);
    System.out.print (question.toString() +"\n");
    System.out.print ("Answer: ");
    return scan.nextInt();
}
    public static String questionAsk(StringQuestion question)
{
    Scanner scan = new Scanner (System.in);
    System.out.print (question.toString() +"\n");
    System.out.print ("Answer: ");
    return scan.nextLine();
} 
```

并添加两个新类：

```
 public class IntQuestion extends String{
       public IntQuestion(String question){
            super(question);
       }
   }

   public class StringQuestion extends String{
        public StringQuestion(String question){
            super(question);
        }
   } 
```

当你构造一个`IntQuestion`of 时`StringQuestion`，你可以简单地构造它们，就像你调用构造函数时构造一个 String 一样：

```
IntQuestion intQuestion = new IntQuestion("Some String Here"); 
```

这只是让编译器运行良好并根据类型选择正确方法的一点语法糖。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:22:02.530

您应该首先扫描、解析，然后使用 if else 或 switch case 调用所需的函数。

您现在正在做的是在两个函数中使用相同的代码，而不是重用代码。只需使用单次扫描即可

# scala - 以方法为上限的泛型不能将泛型类型作为参数

> ID：13518162
> 
> 赞同：3
> 
> 时间：2012-11-22T18:16:41.030
> 
> 标签：scala, generics

我正在尝试创建一个泛型工厂方法，该方法具有方法的上限，该方法采用该泛型类型的参数并返回该泛型类型的某些内容。我试过这个，

```
def apply[Type <: {def *(that: Type): Type}](length: Int)(implicit manifest: Manifest[Type]) = new Array[Type](length) 
```

但我得到这个错误，

```
Parameter type in structural refinement may not refer to an abstract type defined outside that refinement 
```

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:11:00.127

根据该错误消息，您应该定义`*`为这样的通用函数： `def apply[Type <: {def *[Type](that: Type): Type}](length: Int)(implicit manifest: Manifest[Type]) = new Array[Type](length)`

# extjs - 外部图表自动调整大小

> ID：13518163
> 
> 赞同：4
> 
> 时间：2012-11-22T18:16:56.053
> 
> 标签：extjs, charts

我正在尝试制作图表（ext 4.1）：

```
 var chart = Ext.create('Ext.chart.Chart', {
    width: 280,
    height: 230,
    animate: true,
    autoSize: true,
    shadow: true,
    store: storeChart2,
    renderTo: 'chart2',
    legend: {
//position: 'right'
    },
    theme: 'Base:gradients',
    series: [{
        type: 'pie',
        field: 'data',
        showInLegend: false,
        highlight: {
          segment: {
            margin: 20
          }
        },
         tips: {
                  trackMouse: true,
          width: 100,
                  renderer: function(storeItem, item) {
                    this.setTitle(storeItem.get('name') + ': ' + Math.round(all * storeItem.get('data') / 100) +' ('+ Math.round(storeItem.get('data') / 100 * 100) + '%)');
                  }
                },
        label: {
            field: 'name',
            display: 'rotate',
            contrast: true,
            font: '12px Arial'
        }
    }]
}); 
```

AutoSize: true, - 不工作。在 Chrome 控制台中：

```
Error: Invalid value for <svg> attribute width="-Infinity"
Error: Invalid value for <svg> attribute height="-Infinity" 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T12:26:11.680

尝试添加一个属性，

> 最小值：0

请参考这个[帖子](http://www.sencha.com/forum/showthread.php?159196-getting-error-as-Error-Invalid-value-for-lt-rect-gt-attribute-y-quot-Infinity-quot-on-chart&p=878711&viewfull=1#post878711)

# java - 为什么叫动态绑定，而不是静态绑定？

> ID：13518165
> 
> 赞同：0
> 
> 时间：2012-11-22T18:17:08.747
> 
> 标签：java, compiler-construction

我是 Java 新手，我有一些疑问。例如，考虑如下表达式：

```
a.method()
a.method("string") 
```

人们称它们为“动态调度”。但我确信类型检查器确保命名的方法`method()`可`method(String a)`用于 object `a`。

但是为什么叫“动态”呢？不是静态调用吗？既然编译器已经发现了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T18:22:50.833

您发布的示例不会使用动态调度。您发布了一个`Method Overloading`. `Overloading`并且在编译时完成方法调用的决定。`formal parameters`由编译器根据传递的和决定调用哪个方法`actual arguments`。

* * *

`Dynamic Binding`当您使用 时开始发挥作用`Method Overriding`，其中实际调用哪个方法的决定延迟到运行时。

例如： -

```
class A {
    public void demo() { }
}

class B extends A {
    public void demo() { }
}

public class Test {
    public static void main(String[] args) {
        A a = new B();
        a.demo();   // B class method will be invoked.

        A obj = new A();
        obj.demo();  // A class method will be invoked.
    }
} 
```

调用哪个方法的决定取决于特定引用指向的类实例，而这仅在`runtime`. 因此`Dynamic Dispatch`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:21:31.390

您显示的代码不**表达动态调度（绑定）**。请看下面的代码。

```
class Super {
  public void method() {}
}

class Sub extends Super {
  public void method() {}

  public static void main(String... args) {
    Super inst = new Sub();
    inst.method(); //Sub's method() would be invoked.(Express's Dynamic Dispatch)
  }
} 
```

# data-binding - 刷新数据源时重置PageIndex

> ID：13518170
> 
> 赞同：2
> 
> 时间：2012-11-22T18:17:38.520
> 
> 标签：data-binding, paging, radgrid

我试图从一个巨大的数据库中读取时实现分页。当用户移动到窗口外的页面时，我获取下一组记录并为 9-10 页填充表格。问题是，刷新数据源后，我无法将 PageIndex 重置为 0，刷新后它仍然在最后一页。我的代码如下：

```
protected void AccountQueueGrid_PageIndexChanged(object sender, Telerik.Web.UI.GridPageChangedEventArgs e) 
{
int newWindowNumber = currentWindowNumber() + ( e.NewPageIndex / (windowSize / PageSize));
            if (newWindowNumber != currentWindowNumber())
            {
                PopulateAccountQueueGrid(newWindowNumber, true);
                AccountQueueGrid.CurrentPageIndex = 0;
                AccountQueueGrid.Rebind();

            }
} 
```

PopulateAccountQueueGrid 获取新数据并设置为 DataSource 并调用 DataBind。那部分工作正常。但是设置 CurrentPageIndex 然后重新绑定不会将其重置为 0。尝试设置 AccountQueueGrid.MasterTableView.CurrentPageIndex 也行不通。

AllowPaging 和 EnableViewState 设置为 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-15T10:13:11.723

在绑定以下示例之前将您的页面索引设置为`0`（零）`datasource` 对我来说非常有效。

```
AccountQueueGrid.CurrentPageIndex = 0;
AccountQueueGrid.DataSource = dsList.Tables[0];
AccountQueueGrid.Rebind(); 
```

# wpf - 在网格列内制作一个 TextBlock 换行

> ID：13518179
> 
> 赞同：9
> 
> 时间：2012-11-22T18:18:13.040
> 
> 标签：wpf, xaml

我有以下 XAML，它在网格中显示一个文本块。问题是它只是伸展开来，它甚至伸展得比窗户的宽度还大。

```
<Grid Background="Gray">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>

    <Label Grid.Row="1" Grid.Column="0" Padding="0" FontWeight="Bold" Margin="0,0,5,0">Description:</Label>
    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Description}" TextWrapping="Wrap" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T18:22:12.707

您需要`restrict the width`在第二列中进行文本换行 -

```
<Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
</Grid.ColumnDefinitions> 
```

# android - 如何以编程方式暂停音乐播放器

> ID：13518180
> 
> 赞同：5
> 
> 时间：2012-11-22T18:18:23.183
> 
> 标签：android

我`MUSIC_PLAYER`在我的应用程序中使用了这样的开始：

```
Intent myint = new Intent("android.intent.action.MUSIC_PLAYER");
startActivity(myint); 
```

我想暂停这个播放器。我怎么做？

```
import android.media.AudioManager;

import android.media.MediaPlayer;

import android.os.Bundle;

import android.app.Activity;

import android.content.Intent;

import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Thread mtr = new Thread(){
            public void run()
            {
                try {
                    Intent myint = new Intent("android.intent.action.MUSIC_PLAYER");
                    startActivity(myint);
                    sleep(50000);
                    // Here I want to pause my application after those 50 seconds.
                }
                catch(InterruptedException e){
                    e.printStackTrace();
                }
                finally{
                    Intent myint = new Intent("nextscreen");
                    startActivity(myint);
                }
            }
        };
        mtr.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:06:28.593

在[三星](http://en.wikipedia.org/wiki/Samsung)设备中，您可以通过以下方式控制音乐播放器：

```
ICS:
"com.android.music.musicservicecommand.play"
"com.android.music.musicservicecommand.pause"
"com.android.music.musicservicecommand.next"
...

JB:
"com.sec.android.app.music.musicservicecommand.play"
"com.sec.android.app.music.musicservicecommand.pause"
"com.sec.android.app.music.musicservicecommand.next"
...

context.sendBroadcast(new Intent("com.sec.android.app.music.musicservicecommand.pause")); 
```

另一个解决方案是 AudioManager 中的 requestAudioFocus （不要忘记使用放弃AudioFocus 释放它）。例如：

```
...
((AudioManager)getSystemService(Context.AUDIO_SERVICE)).requestAudioFocus(listener, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN_TRANSIENT);
...

...
((AudioManager)getSystemService(Context.AUDIO_SERVICE)).abandonAudioFocus(listener);
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T18:39:41.707

你不能那样做。暂停音乐播放器是用户专有的应用程序内部的内部操作，因此无法从应用程序外部访问/调用它。

但是，您可以通过调用[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)`setStreamMute(AudioManager.STREAM_MUSIC, true)`类将音乐音频流静音。

代码示例：

```
AudioManager am = (AudioManager)MainActivity.this.getSystemService(Context.AUDIO_SERVICE);
am.setStreamMute(AudioManager.STREAM_MUSIC, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-20T23:53:37.663

[在这里](https://stackoverflow.com/a/7634606/2826409)查看答案，您可以非常轻松地发送广播以暂停或停止默认音乐播放器。

# r - 如何自动化这些 emacs ESS (ess-remote) 命令？

> ID：13518185
> 
> 赞同：6
> 
> 时间：2012-11-22T18:18:40.623
> 
> 标签：r, emacs, elisp, ess

我正在使用本地 emacs 实例 (aquamacs) 在远程服务器上运行 R 进程，并且我想自动化连接到我的服务器的过程。过程如下：

[在 Emacs 中]

```
M-x shell 
```

[在结果控制台中]

```
TERM=xterm
ssh -Y -C <my remote server>
screen -rd [and/or] R 
```

[在 Emacs 中]

```
M-x ess-remote
r 
```

我在这里发现了这种通用方法：http: [//blog.nguyenvq.com/2010/07/11/using-r-ess-remote-with-screen-in-emacs/](http://blog.nguyenvq.com/2010/07/11/using-r-ess-remote-with-screen-in-emacs/)。-Y -C 选项允许您使用 xterm 查看绘图。我不知道 lisp，尽管我已经用谷歌搜索了一下，但我似乎无法拼凑出如何实际定义一个函数来自动执行此操作（例如，在 .emacs.el 中）。有没有人实施过这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T02:47:47.477

假设您只想调用`shell`代码。在 Lisp 中，一切都是用括号括起来的前缀表示法。所以我们把它输入到一个缓冲区（比如暂存缓冲区）：

```
(shell) 
```

将指针移到闭括号后的行尾，然后键入`<C-x C-e>`以执行 Lisp 代码。您应该看到该`shell`函数已被调用。

现在，让我们把它变成一个函数，这样我们就可以向它添加其他东西。创建函数的命令是`defun`，它需要函数的名称、参数列表（在括号中），然后是函数体：

```
(defun automate-connection ()
  (shell)) 
```

将光标移动到代码的末尾，点击`<C-x C-e>`，函数将被定义。您可以通过执行从 Lisp 调用它

```
(automate-connection) 
```

好的，现在我们只需要将一些文本放入 shell 缓冲区。

```
(defun automate-connection ()
  (shell)
  (insert "TERM=xterm")) 
```

现在，当我们运行它时，我们将“TERM=xterm”放入 shell 缓冲区。但它实际上并没有发送命令。让我们尝试换行。

```
(defun automate-connection ()
  (shell)
  (insert "TERM=xterm\n")) 
```

这会换行，但实际上并没有使命令运行。为什么不？让我们看看回车键的作用。转到您的`*shell*`缓冲区，然后键入`<C-h c>`，然后按回车键。（`<C-h c>`运行[`describe-key-briefly`](http://www.gnu.org/software/emacs/manual/html_node/emacs/Key-Help.html)，它打印通过点击给定键调用的函数的名称）。也就是说，当你点击 RET 时，它不是换行，而是实际调用`comint-send-input`. 所以让我们这样做：

```
(defun automate-connection ()
  (shell)
  (insert "TERM=xterm")
  (comint-send-input)) 
```

现在，当您从任何 Lisp 代码运行 `(automate-connection) 时，您应该会发送给定的内容。我把它作为练习留给读者添加你的​​其他命令。

可是等等！我们还没有真正完成，不是吗？我假设您不想移动到 Lisp 暂存缓冲区，输入`(automate-connection)`，然后评估该代码。您可能只想输入 ，然后收工。默认情况下，您不能使用我们刚刚创建的函数执行此操作。幸运的是，允许这样做很简单：只需`(interactive)`在你的函数中添加一个调用：

```
(defun automate-connection ()
  (interactive)
  (shell)
  (insert "TERM=xterm")
  (comint-send-input)) 
```

现在你可以随心所欲地调用它，它会打开`*shell*`缓冲区，放入文本，并告诉 Emacs 告诉 shell 运行该文本。

# java - 自定义样式

> ID：13518187
> 
> 赞同：0
> 
> 时间：2012-11-22T18:18:54.603
> 
> 标签：java, android, themes

要自定义标准样式，我使用以下 XML 文件：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

   <style name="AppTheme" parent="android:Theme.Holo.Light">
       <item name="windowNoTitle">true</item>
   </style>

</resources> 
```

问题是 Eclipse 告诉我“windowNoTitle”属性不存在，但我已经从官方网站中显示的示例中剪切并粘贴了它，以获取 Android 开发文档中指示的样式和主题。

如何修改此标准代码以使其没有标题栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:35:13.903

可能您需要`android:`在属性名称之前添加前缀，您还需要使用有效的语法来链接到父主题，例如：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

   <style name="AppTheme" parent="@android:style/Theme.Holo.Light">
       <item name="android:windowNoTitle">true</item>
   </style>

</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:36:50.210

您可以`.NoTitleBar`在最后添加，这样就不需要额外的`style item`.

```
 <style name="AppTheme" parent="android:Theme.Holo.Light.NoTitleBar" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T14:08:42.073

我将它用于全屏：
`<style name="FullscreenTheme" parent="android:Theme.NoTitleBar"> <item name="android:windowContentOverlay">@null</item> </style>`
而且它没有标题栏。希望这会有所帮助。

# ruby-on-rails - 延迟作业和 Rails 管理员：未初始化的常量 ActiveRecord::Base::Delayed::Job

> ID：13518191
> 
> 赞同：0
> 
> 时间：2012-11-22T18:19:10.340
> 
> 标签：ruby-on-rails, activerecord, delayed-job, rails-admin

嗨，所有在感恩节修复错误的 SO 用户，

我的延迟作业设置工作正常，我让它在生产和开发中运行，但是在访问 rails admin 的用户部分时，我收到错误

未初始化的常量 ActiveRecord::Base::Delayed::Job

我应该在某个地方定义一个延迟的工作类吗？如果是这样，那么正确的语法是什么？Delayed::Job 还是 DelayedJob？我试过这样做没有成功。

我还运行了迁移以创建作业表。也许在某处定义的用户和延迟工作之间存在关联？不太确定...

这是一个完整的跟踪：

```
ActionView::Template::Error (uninitialized constant ActiveRecord::Base::Delayed::Job):
10: 
11:   export_action = RailsAdmin::Config::Actions.find(:export, { :controller => self.controller, :abstract_model => @abstract_model })
12:   export_action = export_action && authorized?(export_action.authorization_key, @abstract_model) ? export_action : nil
13: 
14:   properties = @model_config.list.with(:controller => self.controller, :view => self, :object => @abstract_model.model.new).visible_fields
15:   # columns paginate
16:   @filterable_fields = @model_config.list.fields.select(&:filterable?)

activerecord (3.2.3) lib/active_record/inheritance.rb:119:in `compute_type'
  activerecord (3.2.3) lib/active_record/reflection.rb:172:in `klass'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/adapters/active_record.rb:233:in `association_model_lookup'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/adapters/active_record.rb:70:in `block (2 levels) in associations'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/fields/association.rb:63:in `call'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/fields/association.rb:63:in `associated_model_config'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/fields/association.rb:33:in `block in <class:Association>'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/configurable.rb:68:in `instance_eval'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/configurable.rb:68:in `block in register_instance_option'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/configurable.rb:42:in `block in register_instance_option'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/proxyable/proxy.rb:31:in `method_missing'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/has_fields.rb:113:in `select'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/has_fields.rb:113:in `visible_fields'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/proxyable/proxy.rb:31:in `method_missing'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/app/views/rails_admin/main/index.html.haml:13:in `__var_www_apps_miracleticket_shared_bundle_ruby_______bundler_gems_rails_admin____e____d__f_app_views_rails_admin_main_index_html_haml___3620510256847226470_59069620'
  actionpack (3.2.3) lib/action_view/template.rb:143:in `block in render'
  activesupport (3.2.3) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.3) lib/action_view/template.rb:141:in `render'
  actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
  actionpack (3.2.3) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.3) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
  actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
  actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:18:in `render'
  newrelic_rpm (3.5.0.1) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:156:in `block in render_with_newrelic'
  newrelic_rpm (3.5.0.1) lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
  newrelic_rpm (3.5.0.1) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:155:in `render_with_newrelic'
  actionpack (3.2.3) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.3) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.3) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.3) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.3) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.3) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.3) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.3) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.3) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.3) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /home/shark/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.3) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:39:in `render'
  remotipart (1.0.2) lib/remotipart/render_overrides.rb:8:in `render'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/actions/index.rb:35:in `block (4 levels) in <class:Index>'
  actionpack (3.2.3) lib/action_controller/metal/mime_responds.rb:196:in `call'
  actionpack (3.2.3) lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
  /var/www/apps/miracleticket/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-556e9032d23f/lib/rails_admin/config/actions/index.rb:32:in `block (2 levels) in <class:Index>'
  (eval):8:in `instance_eval'
  (eval):8:in `index'
  actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.3) lib/active_support/callbacks.rb:524:in `_run__2345189654170037202__process_action__1989048903076684056__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.5.0.1) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:34:in `block in process_action'
  newrelic_rpm (3.5.0.1) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:268:in `block in perform_action_with_newrelic_trace'
  newrelic_rpm (3.5.0.1) lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
  newrelic_rpm (3.5.0.1) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:263:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.5.0.1) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:33:in `process_action'
  actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
  rack-pjax (0.6.0) lib/rack/pjax.rb:12:in `call'
  omniauth (1.1.1) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
  newrelic_rpm (3.5.0.1) lib/new_relic/rack/error_collector.rb:8:in `call'
  newrelic_rpm (3.5.0.1) lib/new_relic/rack/browser_monitoring.rb:12:in `call'
  sass (3.2.2) lib/sass/plugin/rack.rb:54:in `call'
  exception_notification (3.0.0) lib/exception_notifier.rb:40:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
  remotipart (1.0.2) lib/remotipart/middleware.rb:30:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__3685644371886104563__call__3962699592338143344__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  rack (1.4.1) lib/rack/sendfile.rb:102:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb:479:in `safe_fork'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/shark/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:49:18.497

看起来某处的某个类与`Delayed::Job`该类相关联。我猜您在该关联上`Delayed::Job`指定了 class_name 选项。我不确定这在实践中`Delayed::Job`是如何工作的，因为它不是一个活跃的记录类。您确实必须与延迟作业的活动记录后端相关联（`Delayed::Backend::ActiveRecord::Job`）。

在第一种情况下，值得评论该关联并查看它是否可以在没有它的情况下工作。在第二种情况下，值得重新考虑如何将您的用户与正在处理的作业相关联。

# c# - DbSet 的扩展

> ID：13518192
> 
> 赞同：1
> 
> 时间：2012-11-22T18:19:10.983
> 
> 标签：c#, asp.net, winforms, entity-framework

DbSet 的扩展是什么？我想添加方法“FindTheLatest”。这是我的代码：这是我的代码

```
    公共静态列表 FindTheLatest（此 DbSet<Review> 评论，int nums）
    {
        返回reviews.OrderByDescending(r => r.Created).Take(nums).ToList();
    }

```

但它不起作用。我必须做什么？

这是我的扩展类：

```
public static class RestaurantReviewsExtenstion
{
    public static IEnumerable<Review> FindTheLatest(this IQueryable<Review> reviews, int nums)
    {
        return reviews.OrderByDescending(r => r.Created).Take(nums).ToList();
    }

    public static Review FindById(this System.Data.Entity.DbSet<Review> reviews, int id)
    {
        return reviews.SingleOrDefault(s => s.ReviewId == id);
        //return reviews.Find(item => item.Id == id);
    }

    public static Review FindTheBest(this List<Review> list)
    {
        return list.OrderByDescending(o => o.Rating).FirstOrDefault();
    }
} 
```

这是我的 DBContex 类：

```
public class OdeToFoodDb: DbContext
{
    public DbSet<Restaurant> Restaurants { get; set; }
    public DbSet<Review> Reviews { get; set; }

    protected override void OnModelCreating(System.Data.Entity.DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Restaurant>()
            .HasMany(resturant => resturant.Reviews)
            .WithRequired(review => review.Resturant);
        base.OnModelCreating(modelBuilder);
    }
} 
```

这是我得到错误的地方：

```
 OdeToFoodDb _db = new OdeToFoodDb();
    public PartialViewResult LatestReview()
    {
        System.Threading.Thread.Sleep(1500);
        //this is where i get error
        var review = _db.Reviews.FindTheLatest(1);
        //************************************
        return PartialView("_Review", review);
    } 
```

抱歉信息不全。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T18:21:28.913

一方面，`List`是泛型类型。对于另一个`DbSet`不是任何*特定*类型的集合-您可能想要`DbSet<T>`一些适当的`T`. 也许你的意思是：

```
public static List<Review> FindTheLatest(this DbSet<Review> reviews, int nums)
{
    return reviews.OrderByDescending(r => r.Created).Take(nums).ToList();
} 
```

或者：

```
public static List<Review> FindTheLatest(this DbSet reviews, int nums)
{
    return reviews.Cast<Review>()
                  .OrderByDescending(r => r.Created)
                  .Take(nums)
                  .ToList();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-10T07:27:03.883

您可以使用 Generic 实现扩展方法以接受任何类型：

```
public static class DbSetExtensions
{
    public static IQueryable<T> FindTheLast<T,TResult>(this IQueryable<T> t, Expression<Func<T, TResult>> expression, int nums) where T : class 
    {
      return t.OrderByDescending(expression).Take(nums);
    }
} 
```

并使用它：

```
dbContext.Entity.FindTheLast(x => x.Property,2); 
```

# jsf-2 - Websphere 8.5：org.apache.commons.logging.impl.Jdk14Logger 类未实现 Log

> ID：13518193
> 
> 赞同：4
> 
> 时间：2012-11-22T18:19:15.413
> 
> 标签：jsf-2, websphere, apache-commons-logging, icefaces-3, websphere-8

我用 ICEFaces 3.0.1 开发了一个 JSF-App。使用 Tomcat 和 Glassfish，该应用程序运行良好。现在我想在 WebSphere Application Server 8.5.0.0 上测试它。该应用程序启动，但是当我执行某些操作时，它崩溃了。

我正在使用以下库：

```
antlr-2.7.6.jar
commons-collections-3.1.jar
commons-lang-2.5.jar
dom4j-1.6.1.jar
icefaces-ace.jar
icefaces-compat.jar
icefaces.jar
icepush.jar
iText-5.0.4.jar
jxl.jar
slf4j-api-1.6.1.jar
hibernate3.jar
javassist-3.9.0.GA.jar
poi-3.8-20120326.jar
xpp3-1.1.4c.jar
slf4j-simple-1.7.2.jar
ojdbc6.jar
commons-logging-1.1.jar
hibernate-jpa-2.0-api-1.0.0.Final.jar
javax.faces.jar
jta-1.1.jar 
```

堆栈跟踪：

```
[11/22/12 18:57:38:284 CET] 00000063 ExtendedExcep W   queued exception
                                 javax.faces.FacesException: invalid property: md
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:84)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1214)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1027)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3703)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:522)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:311)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:87)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1783)
Caused by: javax.validation.ValidationException: invalid property: md
    at org.apache.bval.jsr303.util.PathNavigation.navigateAndReturn(PathNavigation.java:105)
    at org.apache.bval.jsr303.util.PathNavigation.navigate(PathNavigation.java:117)
    at org.apache.bval.jsr303.ClassValidator.validateValueImpl(ClassValidator.java:718)
    at org.apache.bval.jsr303.ClassValidator.validateValue(ClassValidator.java:239)
    at org.apache.bval.jsr303.ClassValidator.validateValue(ClassValidator.java:231)
    at javax.faces.validator.BeanValidator.validate(BeanValidator.java:306)
    at javax.faces.component.UIInput.validateValue(UIInput.java:1149)
    at javax.faces.component.UIInput.validate(UIInput.java:967)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at com.icesoft.faces.component.paneltabset.PanelTabSet.applyPhase(PanelTabSet.java:155)
    at com.icesoft.faces.component.paneltabset.PanelTabSet.applyPhase(PanelTabSet.java:127)
    at com.icesoft.faces.component.paneltabset.PanelTabSet.processValidators(PanelTabSet.java:199)
    at javax.faces.component.UIForm.processValidators(UIForm.java:253)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1172)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    ... 25 more
Caused by: org.apache.commons.logging.LogConfigurationException: org.apache.commons.logging.LogConfigurationException: org.apache.commons.logging.LogConfigurationException: Class org.apache.commons.logging.impl.Jdk14Logger does not implement Log
    at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:532)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:272)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:246)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:395)
    at org.apache.commons.beanutils.ConvertUtilsBean.<init>(ConvertUtilsBean.java:157)
    at org.apache.commons.beanutils.BeanUtilsBean.<init>(BeanUtilsBean.java:117)
    at org.apache.commons.beanutils.BeanUtilsBean$1.initialValue(BeanUtilsBean.java:68)
    at org.apache.commons.beanutils.ContextClassLoaderLocal.get(ContextClassLoaderLocal.java:153)
    at org.apache.commons.beanutils.BeanUtilsBean.getInstance(BeanUtilsBean.java:80)
    at org.apache.commons.beanutils.PropertyUtilsBean.getInstance(PropertyUtilsBean.java:114)
    at org.apache.commons.beanutils.PropertyUtils.getPropertyDescriptors(PropertyUtils.java:480)
    at org.apache.bval.util.PropertyAccess.getPropertyReadMethod(PropertyAccess.java:126)
    at org.apache.bval.util.PropertyAccess.getTypeInner(PropertyAccess.java:113)
    at org.apache.bval.util.PropertyAccess.isKnown(PropertyAccess.java:101)
    at org.apache.bval.jsr303.util.ValidationContextTraversal.handleProperty(ValidationContextTraversal.java:130)
    at org.apache.bval.jsr303.util.PathNavigation$PathPosition.handleProperty(PathNavigation.java:278)
    at org.apache.bval.jsr303.util.PathNavigation.parse(PathNavigation.java:143)
    at org.apache.bval.jsr303.util.PathNavigation.navigateAndReturn(PathNavigation.java:101)
    ... 46 more
Caused by: org.apache.commons.logging.LogConfigurationException: org.apache.commons.logging.LogConfigurationException: Class org.apache.commons.logging.impl.Jdk14Logger does not implement Log
    at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor(LogFactoryImpl.java:416)
    at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:525)
    ... 63 more
Caused by: org.apache.commons.logging.LogConfigurationException: Class org.apache.commons.logging.impl.Jdk14Logger does not implement Log
    at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor(LogFactoryImpl.java:412)
    ... 64 more 
```

谁可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T10:26:09.123

必须删除commons-logging-1.1.jar，或者使用maven时，必须将此依赖设置为“provided”范围。

# javascript - document.execCommand 导致 firefox addon-sdk 出错

> ID：13518204
> 
> 赞同：0
> 
> 时间：2012-11-22T18:20:16.490
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在使用 Firefox addon-sdk 开发一个 Firefox 扩展。我的内容脚本之一是尝试使用此标准 javascript 函数将一些文本插入可编辑的 div：

```
document.execCommand("InsertHTML", false, 'test text'); 
```

上面的代码在我的 Chrome 扩展程序中运行良好，但在 Firefox 中失败并出现以下错误：

**[异常...“组件返回失败代码：0x80004005（NS_ERROR_FAILURE）[nsIDOMHTMLDocument.execCommand]”nsresult：“0x80004005（NS_ERROR_FAILURE）”数据：否]**

是否有任何其他解决方案可以将当前位置的文本插入可编辑的 div（在内容脚本中）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T00:04:28.293

乍一看，该功能不存在。不可访问：

要么是因为没有使整个文档可编辑（至少 FF 3.5.13 显示了行为），要么是因为没有使整个文档可编辑。'midas' 未调用或时间问题：midas 的调用可能需要一些（100？）毫秒。如果可编辑性由脚本触发或在页面加载后以其他方式触发，则应等待（文档的）.execCommand 函数的“出现”，因为 midas 加载完成成功。

# android - Android 应用程序和 PHP 网站之间的 RESTful 接口的设计模式

> ID：13518205
> 
> 赞同：0
> 
> 时间：2012-11-22T18:20:16.930
> 
> 标签：android, rest, design-patterns

为 Android 本机应用程序和 PHP 网站之间的 RESTful 接口寻找最佳实践/设计模式的确认和相关文档。

这有意义吗？

*   通过 SSL 的 HTTPS 请求（以便加密通信）。
*   OAuth2 用于基于令牌的身份验证（以便用户最初可以使用用户名和密码向站点授权，但随后依赖授权令牌）。

有什么遗漏吗？有更好的方法吗？是否有用于持久连接的通用方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:26:39.570

我已经看到使用了这种方法，并且它的实现非常安全。我没有将其称为 authToken，而是将其称为 sessionToken，因为我的设置为在一段时间后过期，并让服务器再次从客户端请求用户名/密码。这有助于删除无效会话，并确保如果有人成功恶意获取用户的 sessionToken，那么下次应用程序转移到 HTTPS 以再次提供凭据时（假设您只使用 SSL 上的 HTTPS 进行登录），他们就会被阻止。如果所有流量都通过 SSL 发送，那么用例将是让会话令牌超时以使服务器受益，以便它们可以清除死会话。

*需要注意的是，与常规请求相比，通过 SSL 发送所有数据在服务器上的成本相当高，因此如果您可以在不影响安全性的情况下避免它，它确实有助于提高可扩展性。

# php - 如何通过电子邮件响应影响 PHP 程序/mysql 数据库

> ID：13518211
> 
> 赞同：2
> 
> 时间：2012-11-22T18:20:43.920
> 
> 标签：php, mysql, email, comments, feedback

我正在尝试弄清楚如何做某事。这一定是可能的——我在多个系统（推特、脸书等）中看到过类似的事情。

我想做的基本事情是——有人在我的网站上发表评论。评论会发送到我的电子邮件以及我的 MySql 数据库。然后我直接在我的电子邮件上回复。回复将保存到数据库中，并自动批准用户的评论。

我不知道如何直接通过电子邮件与我的 MySql / PHP 系统对话。另外 - 我不知道如何设置收件箱？

我猜我需要设置邮件服务器规则，以便发送到 xxxx-response@mydomain.com 的电子邮件实际上被重定向到 php 脚本，其中 xxxx 是原始评论的标识符？

感谢您提供的任何光...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:30:43.077

假设您在一个unix 系统上，您可以设置一个帐户来接收邮件，例如“fred”，并在fred 的主目录中使用.forward 将电子邮件传送到您的php 脚本。例如

。向前：

```
|"/usr/bin/php /path/to/your/script.php" 
```

每当电子邮件到达弗雷德的邮箱时，它将调用您的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:25:14.080

您不能“通过电子邮件与 mysql 交谈”。电子邮件是一段被动的文本，没有任何东西可以采取行动。

该解决方案基于以下内容：

您有一个电子邮件帐户，并通过 php 脚本定期轮询该帐户的收件箱，方法是使用`wget`或类似的方式与`crontab`条目结合使用。您也可以创建事件驱动的方法，但这更复杂，并没有真正提供优势。对于在该收件箱中找到的所有消息，您检查它是否与数据库中的任何先前条目匹配。您可以这样做，因为您可以通过 php.ini 访问消息标题和正文（文本）。这就是你所需要的。通常，两条消息之间的连接是通过评估电子邮件程序在您按下回复按钮时设置的“In-reply-to”标头来完成的。它就像一个参考。

对帐户收件箱的访问是通过标准邮件访问协议完成的，通常是 pop3 或更好的 imap4。当邮件服务器不在同一个系统上时，显然您也想添加 ssl 加密。php 的`imap`扩展是实现这样一个客户端的一个很好的开始，它支持多种协议。

# ruby-on-rails - 如何在表单中显示 Rails ActiveRecord 模型的序列化数组属性？

> ID：13518213
> 
> 赞同：10
> 
> 时间：2012-11-22T18:20:46.397
> 
> 标签：ruby-on-rails, forms

我们在 Rails 中使用 ActiveRecord 的“序列化”功能，如下所示：

```
class User < ActiveRecord::Base
    serialize :favorite_colors, Array
    ....
end 
```

所以我们可以有

```
u = User.last
u.favorite_colors = [ 'blue', 'red', 'grey' ]
u.save! 
```

所以基本上 ActiveRecord 正在序列化上面的数组并将其存储在一个名为 favorite_colors 的数据库字段中。

我的问题是：您如何允许用户在表单中输入他最喜欢的颜色？您是否使用一系列文本字段？一旦它们被输入，你如何以表格形式显示它们以供他编辑？

这是一个与 Rails Form Helpers 相关的问题，用于序列化数组属性。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:08:12.967

如果您想要*多选*HTML 字段，请尝试：

```
= form_for @user do |f|
  = f.select :favorite_colors, %w[full colors list], {}, :multiple => true 
```

如果您使用的是[simple_form](https://github.com/plataformatec/simple_form) gem，您可以轻松地将选项显示为*复选框*：

```
= simple_form_for @user do |f|
  = f.input :favorite_colors, as: :check_boxes, collection: %w[full colors list] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T17:23:56.593

我已经通过“展平”视图中的数组并在控制器中重构数组来解决这个问题。

模型中也需要进行一些更改，见下文。

```
class User < ActiveRecord::Base

    serialize :favorite_colors, Array

    def self.create_virtual_attributes (*args)
        args.each do |method_name|
            10.times do |key|
                define_method "#{method_name}_#{key}" do
                end
                define_method "#{method_name}_#{key}=" do
                end
            end
        end
    end

    create_virtual_attributes :favorite_colors
end 
```

如果您不定义上述方法，Rails 会在视图中抱怨表单元素的名称，例如“favorite_colors_0”（见下文）。

在视图中，我动态创建了 10 个文本字段，favourite_colors_0、favourite_colors_1 等。

```
<% 10.times do |key| %>
    <%= form.label :favorite_color %>
    <%= form.text_field "favorite_colors_#{key}", :value => @user.favorite_colors[key] %>
<% end %> 
```

在控制器中，我必须在调用 save 或 update_attributes 之前将 favorite_colors_* 文本字段合并到一个数组中：

```
unless params[:user].select{|k,v| k =~ /^favorite_colors_/}.empty?
    params[:user][:favorite_colors] = params[:user].select{|k,v| k =~ /^favorite_colors_/}.values.reject{|v| v.empty?}
    params[:user].reject! {|k,v| k=~ /^favorite_colors_/}
end 
```

我正在做的一件事是硬编码 10，这限制了您可以在 favorite_colors 数组中拥有多少个元素。在表单中，它还输出 10 个文本字段。我们可以轻松地将 10 更改为 100。但我们仍然有一个限制。欢迎您就如何删除此限制提出建议。

希望你觉得这篇文章有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T18:32:43.703

要允许访问 AR 属性，您必须像这样授予它们：

```
class User < ActiveRecord::Base
  serialize :favorite_colors, Array
  attr_accessible :favorite_colors
  ....
end 
```

# ios - GKTurnBasedMatch 邀请推送通知？

> ID：13518214
> 
> 赞同：1
> 
> 时间：2012-11-22T18:20:54.480
> 
> 标签：ios, push

当您邀请玩家时，GKTurnBasedMatch 是否会发送*推送通知？*

我在文档或任何地方都找不到这个答案。我看到每回合发送推送通知的引用，但没有看到邀请。

我期待它们存在，但在我正在开发的应用程序中没有收到它们。在我再把头撞到墙上之前，很高兴知道它们是否真的被实施了。

如果*没有*实施，玩家如何知道他们何时被邀请参加游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:27:53.753

轮到玩家时，玩家会收到来自游戏中心的推送通知，而不是直接收到邀请。

# jquery - CSS 动画在 Safari 中有效，但在 Firefox 和 Chrome 中无效

> ID：13518216
> 
> 赞同：0
> 
> 时间：2012-11-22T18:21:07.570
> 
> 标签：jquery, css

我[`animate.css`](http://daneden.me/animate/)用来为页面中的一些元素设置动画。有一个 JQuery 插件可以帮助您轻松使用它[`animateCSS.js`](https://github.com/craigmdennis/animateCSS) （来自 GitHub）。问题是动画在 Safari 中有效，但在 Firefox 和 Chrome 中无效，例如，我使选择器不可见：

```
#top{
  visibility: hidden;
} 
```

这个 JQuery 脚本将其淡入：

```
$('#top').animateCSS('fadeInDown', 400); 
```

400 毫秒后它变得可见，但没有动画！

它在这里在线[http://ashraafi.com/index.html](http://ashraafi.com/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:36:03.417

我制作了示例： http: [//jsfiddle.net/QkCq2/](http://jsfiddle.net/QkCq2/)在 Chrome HTML 中工作：

```
<div class="animated fadeInDown" style="background-color:green;">
<pre>

</pre>
</div> 
```

CSS：

```
.animated {
    -webkit-animation-duration: 2s;
       -moz-animation-duration: 2s;
        -ms-animation-duration: 2s;
         -o-animation-duration: 2s;
            animation-duration: 2s;
    -webkit-animation-fill-mode: both;
       -moz-animation-fill-mode: both;
        -ms-animation-fill-mode: both;
         -o-animation-fill-mode: both;
            animation-fill-mode: both;
}

.fadeInDown{
    -webkit-animation-name: fadeInDown;
    -moz-animation-name: fadeInDown;
    -ms-animation-name: fadeInDown;
    -o-animation-name: fadeInDown;
    animation-name: fadeInDown;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:02:40.530

很奇怪，看起来作者在他的插件代码中留下了不应该存在的部分 - 至少它没有记录在应该存在的任何地方。

删除插件的第 63-67 行：

```
 if (!$("html").hasClass("csstransforms")) {

            onEnd();

        } 
```

这导致动画立即停止。为什么它在 Safari 中工作我不知道。

# c++ - 使用 sqlite3 时内存不足

> ID：13518218
> 
> 赞同：2
> 
> 时间：2012-11-22T18:21:11.793
> 
> 标签：c++, sqlite, out-of-memory

我刚开始用 c++ 编程（IDE 是 CodeBlocks）。

我写了两个简单的类（歌曲和元数据）并用 sqlite 进行测试。

问题：我的程序似乎内存不足：当我启动程序时，它要么立即崩溃，要么 sqlite3_open 命令返回错误“内存不足”。当我在没有任何其他代码的情况下测试 SQLITE 函数时，它可以工作！

所以这不起作用：

```
#include <iostream>
#include "metadata.h"
#include "Song.h"
#include <cstdio>
#include "sqlite3.h"

using namespace std;

int main()
{
    // Without this block it DOES work!
    Metadata* tmpMeta  = new Metadata("Eiffel 65", "Blue", "Europop");
    Song* tmpSong;
    tmpSong = new Song();
    tmpSong->set_metadata(*tmpMeta);
    // end of block

    sqlite3 *db;
    int rc;
    rc = sqlite3_open_v2("test.db", &db, SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, NULL);
    cout << "Result: " << sqlite3_errmsg(db) << '\n';
    sqlite3_close(db);
    return 0;
} 
```

请参阅附加的歌曲和元数据类。

我不知道如何应对这个错误。

我的环境： - Windows 8、64 位 - Code::Blocks 10.05 - 编译器：GNU GCC 编译器

先感谢您！

问候塞巴斯蒂安

歌曲.h：

```
#include <iostream>
#include <cstring>
#include "metadata.h"

using namespace std;

class Song {
    private:
    Metadata metadata;
    unsigned int iD;
    char filename[400];

    public:
    //Constructors
    Song( Metadata, unsigned int, const char*);
    Song( );

    //Methods
    void set_metadata(Metadata& meta);
    void set_id(unsigned int i);
    void set_filename(const char* f);

    Metadata get_metadata();
    unsigned int get_id();
    const char* get_filename();

}; 
```

歌曲.cpp：

```
#include <iostream>
#include "Song.h"

using namespace std;

Song::Song(Metadata m, unsigned int id, const char* f) {
    metadata = m;
    iD = id;
    strncpy(filename, f, sizeof(filename)-1);
    filename[sizeof(filename)] = '\0';
}

Song::Song( ) {
    Metadata tmpMeta;
    metadata = tmpMeta;

    iD = 0;
    strncpy(filename, "unknown", sizeof(filename) -1);
    filename[sizeof(filename)] = '\0';
}

void Song::set_filename(const char* f) {
    strncpy( filename, f, sizeof(filename)-1 );
    filename[sizeof(filename)] = '\0';
}

void Song::set_id(unsigned int i) {
    iD = i;
}

void Song::set_metadata(Metadata& meta) {
    metadata = meta;
}

Metadata Song::get_metadata() {
    return metadata;
}

const char* Song::get_filename() {
    return filename;
}

unsigned int Song::get_id() {
    return iD;
} 
```

元数据.h：

```
#include <iostream>
#include <cstring>
#ifndef _METADATA_H_
#define _METADATA_H_

using namespace std;
class Metadata {
    private:
    unsigned int trackNumber;
    char artist[20];
    char title[20];
    unsigned int year;
    char genre[20];
    char album[20];

    public:
    Metadata(const char*, const char*, const char*);

    const char* get_artist();
    const char* get_title();
    const char* get_album();
    const char* get_genre();
    unsigned int get_trackNumber();
    unsigned int get_year();

    void set_artist(const char*);
    void set_title(const char*);
    void set_album(const char*);
    void set_genre(const char*);
    void set_year(unsigned int);
    void set_trackNumber(unsigned int);
};

#endif 
```

元数据.cpp：

```
#include <iostream>
#include "metadata.h"

Metadata::Metadata(const char* ar, const char* tit, const char* al) {
    trackNumber = 0;
    year = 0;
    strncpy(genre, "unknown", sizeof(genre) -1);
    genre[sizeof(genre)] = '\0';

    strncpy(artist, ar, sizeof(artist) -1);
    artist[sizeof(artist)] = '\0';

    strncpy(title, tit, sizeof(title) -1);
    title[sizeof(title)] = '\0';

    strncpy(album, al, sizeof(album) -1);
    album[sizeof(album)] = '\0';
}

const char* Metadata::get_artist() {
    return artist;
}

const char* Metadata::get_title() {
    return title;
}

const char* Metadata::get_album() {
    return album;
}

const char* Metadata::get_genre() {
    return genre;
}

void Metadata::set_artist(const char* ar) {
    strncpy(artist, ar, sizeof(artist) -1);
    artist[sizeof(artist)] = '\0';
}

void Metadata::set_title(const char* tit) {
    strncpy(title, tit, sizeof(title) -1);
    title[sizeof(title)] = '\0';
}

void Metadata::set_album(const char* al) {
    strncpy(album, al, sizeof(album) -1);
    album[sizeof(album)] = '\0';
}

void Metadata::set_genre(const char* g) {
    strncpy(genre, g, sizeof(genre) -1);
    genre[sizeof(genre)] = '\0';
}

void Metadata::set_trackNumber(unsigned int tn) {
    trackNumber = tn;
}

void Metadata::set_year(unsigned int y) {
    year = y;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:37:40.900

对于初学者：您在 Metadata.cpp 和 Song.cpp 中的*所有字符串终止代码都是错误的：*

**例子：**

```
strncpy(genre, "unknown", sizeof(genre) -1);
genre[sizeof(genre)] = '\0'; 
```

对 strncpy() 的调用是正确的。硬终结符不是。它应该是：

```
strncpy(genre, "unknown", sizeof(genre) -1);
genre[sizeof(genre) -1] = '\0'; 
```

这将在您的所有字符串上复制。重新检查它们。在你修复它们之前，它会出现一些副作用。考虑到这些对象都是堆分配的，你正在破坏你的堆，因为`Song::filename[]`and的不正确终止`MetaData::albumin[]`。不要只修复这两个；**把它们都修好**。

记住。`sizeof()`返回传递的字段的八位字节计数。这意味着`char field[N];`将返回`N`。如果您已经了解 C/C++，您就知道数组是从零开始的，因此`field[N-1]`是允许的最大索引。

# java - ClassNotFoundException 在 weblogic 10.3.6 的爆炸耳朵中部署 Spring 上下文

> ID：13518221
> 
> 赞同：0
> 
> 时间：2012-11-22T18:21:29.250
> 
> 标签：java, spring, jakarta-ee, weblogic

我在 Weblogic 中使用爆炸耳朵部署布局来开发应用程序，在向这个旧应用程序添加新项目后，它将不再部署，尝试从 WEB/WEB-INF 加载实际应用程序代码时抛出 ClassNotFoundException /类。

目录树如下所示：

```
我的运行
    |
    ---- EJB
    |
    ----META-INF
    |
    ----网络
          |
          元信息
          |
          网络信息
              |
              班级
              |
              库

```

在我开始之前，我的同事已经成功部署了 WEB/WEB-INF/lib 目录中所有需要的 jar 库，并且还复制到了 Weblogic 域 lib 目录中。我认为 EJB 会导致复杂性，因为它是 EJB2.0 遗留的东西。

这种方式现在对我不起作用，并给我一个错误，当我启动服务器或只是应用程序时，无法加载 Hibernate。然后我在 Weblogic 域库中使用 Hibernate 进行了尝试，然后无法加载 Spring。

我今天花了整整 8 个小时在谷歌上搜索这个问题，并阅读并尝试了几乎所有可以用 Weblogic 完成的事情，包括 weblogic jar prefs xml 条目，它给出了非常奇怪的与 xml 相关的类转换问题。

我尝试将其简化为基础知识并清空除 JDBC jar 和 Weblogic 安全性等所需的东西之外的所有东西的 weblogic 域库，但我未能找到解决方案。

我尝试在 application.xml 中使用，没有用。

我尝试将 Class-Path 条目放入 MANIFEST.MF 中，结果相同。

当然这不是那么复杂吗？

我现在在 WEB-INF/lib 目录和 Weblogic 域库中都拥有所有必需的 jar，并且应用程序找不到自己的 Hibernate pojos。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T20:29:03.180

我找不到答案，只好将必要的 JAR 文件放在服务器的 lib 目录（user_projects/domains/{mydomain}/lib/*.jar）中。它似乎有效，但它是一个修复的组合。还找不到更好的东西。

***编辑：***在[这个问题](https://stackoverflow.com/questions/18619487/where-to-put-a-jar-file-in-an-exploded-ejb-module)中，我发布了一个更好的内容，涉及`PRE_CLASSPATH`服务器启动脚本中的设置。仍然是一团糟，但上面的解决方案破坏了我系统上的其他东西。

# python - Django 模型命名约定

> ID：13518222
> 
> 赞同：2
> 
> 时间：2012-11-22T18:21:29.970
> 
> 标签：python, django, django-models, naming-conventions

我对 Django 中的模型命名约定有一个非常*愚蠢*的问题。

想象一个农庄，它的建筑物有房间。

农庄 --> 建筑 --> 房间

使用 Farmstead 没问题，我们称它为`Farmstead`. 下一个：`Building`或`FarmsteadBuilding`？`BuildingRoom`,`Room`或`FarmsteadBuildingRoom`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T18:33:29.307

如果您的所有实例都`Room`属于a `Building`（并且没有其他类型的模型，例如`Apartment`）并且您的所有实例都`Building`属于a `Farmstead`（遵循相同的想法），那么只需使用模型的名称，例如`Farmstead`，`Building`和`Room`。没有必要指定业务逻辑中已经指定的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:36:59.703

根据代码其他部分的结构，您可以使用 Django 应用程序、包或模块的名称来进一步确定名称的范围。

# javascript - javascript postMessage 发送回主机

> ID：13518227
> 
> 赞同：0
> 
> 时间：2012-11-22T18:21:55.217
> 
> 标签：javascript, facebook, iframe, cross-domain, postmessage

我正在尝试重现 facebook 的推荐按钮，尤其是出现在主机页面上的那种工具提示。

可能这超出了我的能力范围，但我想了解 FB 是如何做到的。

他们使用 Recommend 按钮实现了 iframe。当你点击时，你会得到一种工具提示（简单的 div），它会越过主机页面。

我正在尝试做同样的事情，但当然，我不能在 iframe 之外显示内容！

这是我的代码（hostingdomain.org）的一些示例：

```
<script type="text/javascript">
(function() { 
            id_marchand = 'daL/RqzZcfqc.'; 
            var tyd = document.createElement('script');
            tyd.type = 'text/javascript';
            tyd.async = true; 
            tyd.src = 'http://mydomain.fr/tyd//module/pro_mod.js'; 
            var s = document.getElementsByTagName('script')[0]; 
            s.parentNode.insertBefore(tyd, s);})
();</script> 
```

此脚本的目标是读取主机页面上的一些内容，然后通过 postMessage 将其发送到该 iframe ：

```
<iframe src="http://multipress.fr/tyd//module/pro_mod.php"
height="50px" width="150px" 
name="tyd_frame" id="tyd_frame" style="border:1px solid black;" 
onload="start_tyd();"></iframe> 
```

iframe 我收到消息内容然后对其应用功能。我使用了 iframe，因为我需要从 mydomain.fr 读取 cookie 来执行我的东西。

现在我想显示一个工具提示（或extradiv）以向用户确认它已完成。但我不能让任何东西出现在 iframe 中……出于安全原因，我敢肯定，但 Facebook 会这样做！

所以我正在研究的解决方案是再次使用 iframe 中的 postMessage 将内容发送回 pro_mod.js，这可以在主机页面上工作，但我不知道如何做到这一点。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:25:02.090

我在那里找到了解决方案：

[http://benalman.com/projects/jquery-postmessage-plugin/](http://benalman.com/projects/jquery-postmessage-plugin/)

这是一个 jquery 插件，我可以在 myiframe 中调用它并允许向父主机发送消息。

因为我无法在主机中实现 jquery，所以我放了一个简单的 addeventlistener 然后我明白了！所以现在我可以在父级中创建“工具提示”div！

一切都很好 ！

# prolog - Prolog 的上下文无关语法？

> ID：13518232
> 
> 赞同：3
> 
> 时间：2012-11-22T18:22:27.807
> 
> 标签：prolog, grammar, dcg

根据您对翻译和类型 2 语法的了解，回忆一下示例，定义如下：

```
G = {N, T, S, P} 
T = {x, y, z} 
N = {A, B, C} 
S = A 
P = 
< A> ::= x<B>
< A> ::= x<C> 
< B> ::= x<B> 
< B> ::= y 
< C> ::= x<C> 
< C> ::= z 
```

编写 Prolog 规则来表示这个语法。使用以下列表进行测试：

```
[x,x,x,z]. 
[x, x, y]. 
[x]. 
[x, y, z]. 
[ ] 
```

有人可以帮我解决这个问题吗？我不知道如何在序言中表示这一点，因为网上的大多数例子都非常不同！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:09:15.603

只是一个提示，完成你的作业，为每个生产添加一个子句

```
'A' --> [x], 'B'.
... 
```

以这种方式测试它

```
?- phrase('S', [x,x,x,z], []). 
```

# c++ - 如何打印 const void* 的值

> ID：13518233
> 
> 赞同：1
> 
> 时间：2012-11-22T18:22:33.477
> 
> 标签：c++

```
#include <iostream>
using namespace std;

void fn(const void *l) {
    // How to print the value of l. The below line is giving error
    cout << "***" << *l;
}

int main() {
    cout << "Hello World!";
    int d = 5;

    fn((char *) &d);
    return 0;
} 
```

错误：

在函数“void fn(const void*)”中：第 8 行：错误：“const void*”不是指向对象的指针类型编译由于 -Wfatal-errors 而终止。

如下所示尝试铸造。它没有帮助。请提供建议。

```
#include <iostream>
using namespace std;

void fn(const void *l) {
    // How to print the value of l. The below line is giving error
    int *pInt = static_cast<char*>(l);
    cout << *pInt;
}

int main() {
    cout << "Hello World!";
    int d = 5;

    fn((char *) &d);
    return 0;
} 
```

在函数 'void fn(const void*)' 中：第 9 行：错误：从类型 'const void*' 到类型 'char*' 的 static_cast 丢弃了由于 -Wfatal-errors 而终止的 constness 编译

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T18:28:33.177

您想显示**指针**本身的值，还是它所指向的值？在第一种情况下，简单

```
 cout << p; 
```

足够了。如果你想实现第二件事——这是不可能的——指针指向**void**，它不能被取消引用，因为编译器不知道它背后“隐藏”的值的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T18:24:15.760

你不能。`void`除非您将指针解释为某种东西，否则不会。

设身处地为函数着想：我给你一个指向“某事”的指针。你不知道那是什么东西。我告诉你打印那个东西。你做什么工作？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T18:25:56.567

该标准在取消引用 void 指针时需要显式强制转换。

不仅编译器本身而且标准都不允许这样做。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-11-22T18:31:36.900

```
cout << "***" << *(int*)l ; 
```

# postgresql - PostgreSQL：函数说明

> ID：13518235
> 
> 赞同：0
> 
> 时间：2012-11-22T18:22:43.017
> 
> 标签：postgresql

使用：

```
SELECT  * FROM information_schema.routines 
```

或者

```
SELECT  * FROM pg_catalog.pg_proc 
```

我可以得到系统功能列表。是否存在获取功能描述甚至更好分类的方法？喜欢[这里](http://www.leadum.com/downloads/dbscribe/samples/postgresql/web_modern/schema/main/414003199.html)或[这里](http://www.postgresql.org/docs/9.1/static/functions-info.html)。

我不相信有人用手打字:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:31:08.117

在`psql`外壳中，您可以获得类似的信息

```
\daS

                                                                                 List of aggregate functions
   Schema   |      Name      |      Result data type       |        Argument data types         |                      
------------+----------------+-----------------------------+------------------------------------+----------------------
 pg_catalog | array_agg      | anyarray                    | anyelement                         | concatenate aggregate
 pg_catalog | avg            | numeric                     | bigint                             | the average (arithmet
 pg_catalog | avg            | double precision            | double precision                   | the average (arithmet
.... 
```

您可以通过使用参数启动 shell 来查看`psql`shell 为获取此信息所做的工作`-E`：

```
********* QUERY **********
SELECT n.nspname as "Schema",
  p.proname AS "Name",
  pg_catalog.format_type(p.prorettype, NULL) AS "Result data type",
  CASE WHEN p.pronargs = 0
    THEN CAST('*' AS pg_catalog.text)
    ELSE
    pg_catalog.array_to_string(ARRAY(
      SELECT
        pg_catalog.format_type(p.proargtypes[s.i], NULL)
      FROM
        pg_catalog.generate_series(0, pg_catalog.array_upper(p.proargtypes, 1)) AS s(i)
    ), ', ')
  END AS "Argument data types",
  pg_catalog.obj_description(p.oid, 'pg_proc') as "Description"
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
WHERE p.proisagg
  AND pg_catalog.pg_function_is_visible(p.oid)
ORDER BY 1, 2, 4;
************************** 
```

# python - 在python中转发属性查找

> ID：13518237
> 
> 赞同：1
> 
> 时间：2012-11-22T18:22:54.357
> 
> 标签：python, numpy

来自 h5py 的 HDF 数据集实现了 numpy 数组功能的子集，但具有只有您实际访问的数据才会被读入内存的优点。因此，我想尽可能长时间地使用数据集，并且仅在需要它们缺少的某些功能时才将它们转换为数组。为此，我尝试定义一个包装类，它最初包含一个数据集并将所有内容转发给该类，但它会捕获名称错误并将其数据集转换为数组。我目前的实现是：

```
class DArr:
    def __init__(self, dset):
        self.arr = dset
    def __getitem__(self, args):
        try:
            return self.arr.__getitem__(args)
        except:
            self.arr = np.array(self.arr)
            return self.arr.__getitem__(args)
    def __getattr__(self, name):
        try:
            return self.arr.__getattr__(name)
        except:
            self.arr = np.array(self.arr)
            return self.arr.__getattr__(name) 
```

`self.arr`但是，当已成为时，这会失败`numpy.array`，因为这些显然没有`__getattr__`我可以转发的。进行这种转发的正确方法是什么？目标是从用户的角度来看， a 的`DArr`行为应该与 a 一样。`numpy.array`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:40:20.650

使用`getattr`内置函数：

```
def __getattr__(self, name):
    try:
        return getattr(self.arr, name)
    except:
        self.arr = np.array(self.arr)
        return getattr(self.arr, name) 
```

使用索引运算符`__getitem__`：`[]`

```
def __getitem__(self, args):
    try:
        return self.arr[args]
    except:
        self.arr = np.array(self.arr)
        return self.arr[args] 
```

# php - 注意：未定义的偏移量：1

> ID：13518238
> 
> 赞同：-1
> 
> 时间：2012-11-22T18:22:55.887
> 
> 标签：php, parsing

试图从网站解析价格。我已经可以从源中检索标题，但是当我尝试抓取价格时会收到通知。注意：未定义的偏移量：1 这是代码：

```
<?php

$file_string = file_get_contents('http://finance.google.com');

preg_match('/<title>(.*)<\/title>/i', $file_string, $title); 
$title_out = $title[1];

preg_match('~<span id="ref_658274_l">(.*)</span>~', $file_string, $price);
//error on the line below 
$price_out = $price[1];

?>

<?php echo "$title_out"; ?>
<?php echo "$price_out"; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:37:27.440

[使用DOMDocument](http://www.php.net/manual/en/class.domdocument.php)解析 HTML 可能会更成功

```
$doc = new DOMDocument();
$doc->loadHTML(file_get_contents('http://finance.google.com'));

$titleElems = $doc->getElementsByTagName('title');
if ($titleElems->length) {
  $title = $titleElems->item(0)->nodeValue;
}

$priceElem = $doc->getElementById('ref_658274_l');
if ($priceElem != null) {
  $price = $priceElem->nodeValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:40:27.953

您的正则表达式不匹配。使用结果时，您应该始终验证您正在使用的索引（在这种情况下`1`）是否在您的`array`.

# string - JavaFx - 如何在 TableView 中显示 SimpleStringProperty 值

> ID：13518239
> 
> 赞同：4
> 
> 时间：2012-11-22T18:23:01.877
> 
> 标签：string, tableview, javafx-2

我正忙于完成一个教程并且被困在一个点上。

基本上启动新场景并在表视图中显示来自 Person 类型的 ObservableList 的值。

person 类由 3 个 SimpleStringProperty 的 firsName、lastName 和 email 组成。

但是当我运行应用程序时，它似乎在表中显示 SimpleStringProperty [StringProperty [value:actualvalue]] 的值，而不是 SimpleStringProperty 的值。如果我将 Person 类的 getFirstName 方法更改为返回 String firstName.get()，那么它会在表中正确显示该值。

我应该使用 SimpleStringProperty 还是像 String 这样的普通对象？ ![在此处输入图像描述](../Images/1cda65880d34af0f20b02e41e99d070e.png)

人物类

```
package co.za.chrispie.addressBook;

import javafx.beans.property.SimpleStringProperty;

public class Person {

private SimpleStringProperty firstName;
private SimpleStringProperty lastName;
private SimpleStringProperty email;

public Person(final String firstName, final String lastName, final String email) {
    this.firstName = new SimpleStringProperty(firstName);
    this.lastName = new SimpleStringProperty(lastName);
    this.email = new SimpleStringProperty(email);
}

public String getFirstName() {
    return firstName.get(); //Changes this method to return a String
}

public SimpleStringProperty getLastName() {
    return lastName;
}

public SimpleStringProperty getEmail() {
    return email;
}

} 
```

控制器类

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package co.za.chrispie.addressBook;

import java.net.URL;
import java.util.ResourceBundle;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;

public class OracleAddressBookController implements Initializable {

@FXML
TableView<Person> table;
@FXML
TableColumn<Person, String> colFirstName;
@FXML
TableColumn<Person, String> colLastName;
@FXML
TableColumn<Person, String> colEmail;

final ObservableList<Person> data = FXCollections.observableArrayList(
    new Person("Jaco", "Pieters", "jp@me.co.za"),
    new Person("Chrispie", "Pieters", "chrispie@me.co.za")
);

@Override
public void initialize(URL url, ResourceBundle rb) {
    assert colFirstName != null : "fx:id=\"colFirstName\" was not injected: check your FXML file 'OracleAddressBook.fxml'.";
    assert colLastName != null : "fx:id=\"colLastName\" was not injected: check your FXML file 'OracleAddressBook.fxml'.";
    assert colEmail != null : "fx:id=\"colEmail\" was not injected: check your FXML file 'OracleAddressBook.fxml'.";
    configureTable();
}    

private void configureTable() {
    colFirstName.setCellValueFactory(new PropertyValueFactory<Person, String>("firstName"));
    colLastName.setCellValueFactory(new PropertyValueFactory<Person, String>("lastName"));
    colEmail.setCellValueFactory(new PropertyValueFactory<Person, String>("email"));

    table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);

    table.setItems(data);
    assert table.getItems() == data;
}
} 
```

和前端 FXML

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane id="AnchorPane" prefHeight="500.0" prefWidth="600.0"    styleClass="mainFxmlClass" xmlns:fx="http://javafx.com/fxml"  fx:controller="co.za.chrispie.addressBook.OracleAddressBookController">
<children>
  <Label layoutX="14.0" layoutY="11.0" text="Address Book" />
  <TableView fx:id="table" layoutX="14.0" layoutY="35.0" prefHeight="451.0" prefWidth="572.0">
  <columns>
    <TableColumn prefWidth="75.0" text="First Name" fx:id="colFirstName" />
    <TableColumn prefWidth="75.0" text="Last Name" fx:id="colLastName" />
    <TableColumn prefWidth="75.0" text="Email" fx:id="colEmail" />
  </columns>
</TableView>
 </children>
  <stylesheets>
   <URL value="@oracleaddressbook.css" />
 </stylesheets>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T20:24:37.730

您需要将属性获取器的名称更改为*nameProperty()*，其中*name*是您的属性。所以你会有 firstNameProperty() 和 emailProperty()。

*getName()* **有效**，但表不会观察到属性的变化。

PropertyValueFactory 的文档解释了这个主题：

> 在此示例中，“firstName”字符串用作对 Person 类类型（这是 TableView 项目列表的类类型）中假定的 firstNameProperty() 方法的引用。此外，此方法必须返回一个 Property 实例。如果找到满足这些要求的方法，则使用此 ObservableValue 填充 TableCell。此外，TableView 会自动为返回的值添加一个观察者，这样任何触发的更改都会被 TableView 观察到，从而导致单元格立即更新。
> 
> 如果不存在与此模式匹配的方法，则支持尝试调用 get() 或 is()（即上面示例中的 getFirstName() 或 isFirstName()）。如果存在与此模式匹配的方法，则从此方法返回的值包装在 ReadOnlyObjectWrapper 中并返回给 TableCell。但是，在这种情况下，这意味着 TableCell 将无法观察 ObservableValue 的变化（就像上面第一种方法中的情况一样）。

# java - 客户端、服务器和 rmi 不起作用

> ID：13518241
> 
> 赞同：-1
> 
> 时间：2012-11-22T18:23:12.007
> 
> 标签：java, client, rmi, rmiregistry

此代码不起作用。好吧，它有效，但客户端不打印。难道我做错了什么？我正在使用 W7 和 NetBeans。有没有办法查看 rmiregistry 是否正常？如果我删除这些捕获，我无法编译它。我很确定问题来自重新绑定和查找。

ServerNew.java：

```
 interface C extends Remote
    {
        public String now() throws RemoteException ;
    }

    class Server extends UnicastRemoteObject implements C
    {    
        public String now() throws RemoteException 
        {
            return "99:99";
        }

        Server() throws RemoteException 
        {

        }

    }

    public class ServerNew
{
    public static void main(String[] args) throws Exception
    {
        Server server=new Server();
        System.setSecurityManager(new java.rmi.RMISecurityManager());
        LocateRegistry.createRegistry(1099);
        Naming.rebind("rmi://localhost:1099/time", server);
    }
} 
```

ClientNew.java：

```
 interface C extends Remote
    {
        public String now() throws RemoteException ;
    }

    public class ClientNew
{
    public static void main(String[] args) throws Exception
    {
        C server=(C) Naming.lookup("rmi://localhost:1099/time");
        String text=server.now();
        System.out.println(text);
    }
} 
```

服务器的输出（`ServerNew.java:38`是`Naming.rebind`）：

```
 Exception in thread "main" java.security.AccessControlException: access denied ("java.net.SocketPermission" "127.0.0.1:1099" "connect,resolve")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.SecurityManager.checkConnect(SecurityManager.java:1051)
    at java.net.Socket.connect(Socket.java:574)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:340)
    at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
    at java.rmi.Naming.rebind(Naming.java:177)
    at servernew.ServerNew.main(ServerNew.java:38)
Exception in thread "RMI TCP Connection(idle)" java.security.AccessControlException: access denied ("java.net.SocketPermission" "127.0.0.1:61881" "accept,resolve")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.SecurityManager.checkAccept(SecurityManager.java:1174)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.checkAcceptPermission(TCPTransport.java:654)
    at sun.rmi.transport.tcp.TCPTransport.checkAcceptPermission(TCPTransport.java:293)
    at sun.rmi.transport.Transport$1.run(Transport.java:176)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:19:05.770

通过这种异常处理，任何人都无法回答您的问题。我建议您修复它并提供正在引发的异常。到目前为止，您发布的内容完全没有意义，也不应该被写出来。

# ios - 我的应用程序的旧版本从 App Store 下载时运行正常，使用 Xcode 运行时失败

> ID：13518244
> 
> 赞同：0
> 
> 时间：2012-11-22T18:23:22.980
> 
> 标签：ios, xcode, ios6, app-store

所以我对我们的一个应用程序有这个奇怪的问题。**我们的应用程序于2012 年 2 月**在 App Store 上架，使用**Xcode 4.2**编译和提交。

*   从 App Store 下载应用程序时，**它可以在 iOS 6 上完美运行**。

*   当使用 Xcode 4.5 和 iOS 6*调试*与 2012 年 2 月提交的完全相同的代码时，应用程序启动如下：![在 Xcode 4.5 和 iOS 6 中运行](../Images/aec66bd64aca1b9c51a0b9dcad6122f9.png)

*通过将 rootViewController 设置为主 UIWindow 解决了图像问题。*

我的问题是：

**为什么从 App Store 下载的应用程序在 iOS 6 中可以正常运行，但在使用 Xcode 调试时却不行？**

谢谢！

尼古拉斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:27:22.260

因为您的应用程序现在将基于 iOS 6.0 SDK 编译，其中方向 API 已更改。您必须使用 Xcode 4.2（或 iOS 5.1 SDK）编译您的应用程序才能获得相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:02:10.480

设备上的 iOS 6 可以检测应用程序是使用哪个 SDK 编译的，并根据使用的 Xcode SDK 调用不同的旋转 API。因此，当您使用比提交的应用程序更新的 SDK 调试应用程序时，在 iOS 6 下运行时结果会有所不同。

# sql - 违反 - 未找到父键错误

> ID：13518246
> 
> 赞同：3
> 
> 时间：2012-11-22T18:23:34.873
> 
> 标签：sql, database, oracle

我出现以下错误：

```
INSERT INTO GroupMembers VALUES ('Goldfrat', 'Simon Palm')
*
ERROR at line 1:
ORA-02291: integrity constraint (SHAHA1.IAM_IS_GROUP_FK) violated - parent key 
not found 
```

表中的约束`GroupMembers`为：

```
CONSTRAINT  iam_is_group_fk FOREIGN KEY(is_group) REFERENCES Members(group_name) 
```

成员表如下所示：

```
CREATE TABLE Members (
  group_name  VARCHAR2(40),
  CONSTRAINT  g_id_pk PRIMARY KEY(group_name),
  CONSTRAINT  m_group_name_fk FOREIGN KEY(group_name) REFERENCES Artist(artistic_name)); 
```

在创建表之前，所有表都可以正常创建`GroupMembers`。有人有想法么？我已经挠了好一阵子了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T18:41:28.823

问题是

`CONSTRAINT iam_is_group_fk FOREIGN KEY(is_group) REFERENCES Members(group_name); references the table Members on the group_name field.`

这意味着表上的字段is_group必须在表和字段`GroupMembers`上具有相同的值。`Members``group_name`

在我看来，这是不好的做法。首先，您应该在 GroupMembers 表上有一个主键字段。您不应将组成员的名称存储在 GroupMembers 表中，而应将它们对应的 ID 存储在表成员中。

成员表也应如下所示：

```
 CREATE TABLE Members (
    member_id   NUMBER PRIMARY KEY
    member_name  VARCHAR2(40),
    CONSTRAINT  g_id_pk PRIMARY KEY(member_id),
    CONSTRAINT  m_group_name_fk FOREIGN KEY(group_name) REFERENCES Artist(artistic_name)); 
```

然后在 table 上`GroupMembers`，我想您想将一些成员关联到他们的组集并返回，所以您应该执行以下操作：

```
 CREATE TABLE GroupMembers (
        member_id   NUMBER,
        group_id    NUMBER
    )
    CONSTRAINT  iam_is_member_fk FOREIGN KEY(member_id) REFERENCES Members(member_id);
    CONSTRAINT  iam_is_member_fk FOREIGN KEY(group_id) REFERENCES Groups(group_id); 
```

假设您有一个`Groups`包含所有组详细信息的表，`primary key`存储为`number`和 name `group_id`。

永远记住，每张桌子都必须有一个`primary key`. 将此键设置为数字是一种很好的做法。

因此，通过将 member_id 设置为in `Members`，您可以在 in 中创建多对多关系。此外，在此表上放置一个唯一索引，这样您就没有重复项（同一个成员多次关联到同一个 id）。`group_id``Groups``GroupMembers`

查看这个将用户链接到角色的示例。这是相同的情况： ![在此处输入图像描述](../Images/9f06073b0f9af3bcec16afca4af7978e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:27:50.850

您插入的顺序是错误的原因。

`Members(group_name)`不包含`Goldfrat`。如果这不是真的，那么它就不存在于表中`Artists`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T12:41:27.423

错误是您必须使用参考表中定义的相同列名

IE

`CONSTRAINT m_group_name_fk FOREIGN KEY(group_name) REFERENCES Artist(group_name)`

这`group_name`应该`primary key`在`Artist`表中定义。

# drupal - Google 中的节点别名问题？

> ID：13518248
> 
> 赞同：1
> 
> 时间：2012-11-22T18:23:44.217
> 
> 标签：drupal, pathauto, drupal-path-aliases

我的网站页面在 Google 搜索结果中都显示为*** .com/node/#### 而不是别名。

我需要帮助修复命名约定以通过别名显示在 Google 中，因为它们也列在 sitemap.xml 中。我不确定这是否需要从 Drupal 或通过 NGINX 修复。

请注意，我在 Bing 中没有这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:37:58.733

造成这种情况的原因可能是 Google 机器人已使用`node/nid`格式为您的网址编制索引。

但奇怪的是你在 Bing 中没有这个问题。我能想到的唯一原因是 Bing 偶然抓取了正确的网址，或者 Bing 有一条规则，即当有别名时使用更有意义的别名（这对于 Bing 来说不是真的：P）

无论如何，继续安装[http://drupal.org/project/globalredirect](http://drupal.org/project/globalredirect)模块。这应该可以解决您的问题，因为它会为您的所有别名路径创建 301 重定向，这对 SEO 非常友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:25:28.020

可能是 google 在您禁用别名时找到了您的页面，而 Bing 稍后在启用别名时找到了它。

如果你想删除它们，你可以去谷歌网站管理员工具。[http://webmaster.google.com](http://webmaster.google.com) 在那里，您可以上传新的站点地图并删除不再使用的 URL。

# ruby - 用 Ruby 合并 JSON 中的记录

> ID：13518257
> 
> 赞同：2
> 
> 时间：2012-11-22T18:24:19.963
> 
> 标签：ruby, jruby

我有两个要合并的 json 文件。JSON 具有不同的格式（见下文）。我想合并记录，因此文件一中的 [0] 和文件二中的 [0] 将成为新合并文件中的一条记录 [0]。

第一个 JSON (file_a.json) 如下所示：

```
{

    "query": {
        "count": 4,
        "created": "2012-11-21T23:07:00Z",
        "lang": "en-US",
        "results": {
            "quote": [
                {
                    "Name": "Bill",
                    "Age": "46",
                    "Number": "3.55"
                },
                {
                    "Name": "Jane",
                    "Age": "33",
                    "Number": nil
                },
                {
                    "Name": "Jack",
                    "Age": "55",
                    "Number": nil
                },
                {
                    "Name": "Xavier",
                    "Age": nil,
                    "Number": "153353535"
                }
            ]
        }
    }

} 
```

第二个 JSON (file_b.json) 如下所示：

```
[

    {
        "Number2": 25253,
        "Number3": 435574,
        "NAME": "Bill"
    },
    {
        "Number2": 345353,
        "Number3": 5566,
        "NAME": "Jane"
    },
    {
        "Number2": 56756,
        "Number3": 232435,
        "NAME": "Jack"
    },
    {
        "Number2": 7457,
        "Number3": 45425,
        "NAME": "Xavier"
    }
] 
```

两个 JSON 中的所有键都不相同（嗯，实际上“名称”是两者中的一个键，但第一个键是“名称”，第二个键是“名称” - 这样我就可以检查合并工作正常 - 所以我想要最终 JSON 中的“名称”和“名称”），第一个文件中的第一条记录与第二个文件中的第一条记录匹配，依此类推。

到目前为止，我尝试像这样合并：

```
merged = %w[a b].inject([]) { |m,f| m << JSON.parse(File.read("file_#{f}.json")) }.flatten 
```

但这当然合并了它们，但不是我希望它们合并的方式（它们连续合并，并且由于格式不同，它变得非常丑陋）。

我也尝试过这样的合并：

```
a = JSON.parse(File.read("file_a.json"))
b = JSON.parse(File.read("file_b.json"))

merged = a.zip(b) 
```

走近了，但仍然不正确，格式仍然很可怕。

最后，我想要的是这个（第二个 JSON 的格式 - 来自第一个 JSON 的标头可以被垃圾）：

```
[

    {
        "Name": "Bill",
        "Age": 46,
        "Number": 3.55,
        "Number2": 25253,
        "Number3": 435574,
        "NAME": "Bill"
    },
    {
        "Name": "Jane",
        "Age": 33,
        "Number": nil,
        "Number2": 345353,
        "Number3": 5566,
        "NAME": "Jane"
    },
    {
        "Name": "Jack",
        "Age": 55,
        "Number": nil,
        "Number2": 56756,
        "Number3": 232435,
        "NAME": "Jack"
    },
    {
        "Name": "Xavier",
        "Age": nil,
        "Number": 153353535,
        "Number2": 7457,
        "Number3": 45425,
        "NAME": "Xavier"
    }
] 
```

任何帮助表示赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:41:25.793

你好，格式似乎比上次改变了:)

更新：更易读的版本，也将相应的值转换为整数/浮点数：

```
require 'json'
require 'ap'

a = JSON.parse(File.read('./a.json'))['query']['results']['quote'] rescue []
b = JSON.parse(File.read('./b.json'))

final = []
a.each_with_index do |ah,i|
  unless bh = b[i]
    bh = {}
    puts "seems b has no #{i} key, merging skipped"
  end

  final << ah.merge(bh).inject({}) do |f, (k,v)|
    if v.is_a?(String)
      if v =~ /\A\d+\.\d+\Z/
        v = v.to_f
      elsif v =~ /\A\d+\Z/
        v = v.to_i
      end
    end
    f.update k => v
  end
end
ap final 
```

将显示：

```
[
  [0] {
       "Name" => "Bill",
      "Age" => 46,
     "Number" => 3.55,
    "Number2" => 25253,
    "Number3" => 435574,
       "NAME" => "Bill"
  },
  [1] {
       "Name" => "Jane",
      "Age" => 33,
     "Number" => nil,
    "Number2" => 345353,
    "Number3" => 5566,
       "NAME" => "Jane"
  },
  [2] {
       "Name" => "Jack",
      "Age" => 55,
     "Number" => nil,
    "Number2" => 56756,
    "Number3" => 232435,
       "NAME" => "Jack"
  },
  [3] {
       "Name" => "Xavier",
      "Age" => nil,
     "Number" => 153353535,
    "Number2" => 7457,
    "Number3" => 45425,
       "NAME" => "Xavier"
  }
] 
```

### [这](http://cibox.org/slivu/stackoverflow?path=merging-records-in-json-with-ruby&lang=ruby&file=merge.rb&run=true)是一个工作演示

顺便说一句，您的 json 在两个文件中都有点错误。

[在此处](http://cibox.org/slivu/stackoverflow?path=merging-records-in-json-with-ruby&lang=ruby&file=a.json)和[此处](http://cibox.org/slivu/stackoverflow?path=merging-records-in-json-with-ruby&lang=ruby&file=b.json)查看固定版本

# php - 你能比较 PHP 中的字符串数组吗？如果有两个相同，它只会返回一次？

> ID：13518258
> 
> 赞同：0
> 
> 时间：2012-11-22T18:24:19.700
> 
> 标签：php

这是我正在运行的脚本，我想如果有 2 个相同的字符串只显示一个字符串而不是两者。我不知道在哪里添加 array_unique() 我已将它添加到我的脚本中，但它似乎无法正常工作，而是取出所有具有相同值的字符串 这是我正在运行的脚本，我想如果有是 2 个相同的字符串，只显示一个字符串而不是两个

```
//Get slider data from theme options
$company1 = $data['md_media_company_img1'];
$company2 = $data['md_media_company_img2'];
$company3 = $data['md_media_company_img3'];
$company4 = $data['md_media_company_img4'];
$company5 = $data['md_media_company_img5'];
$company6 = $data['md_media_company_img6'];
$company7 = $data['md_media_company_img7'];
$company8 = $data['md_media_company_img8'];
$company9 = $data['md_media_company_img9'];
$company10 = $data['md_media_company_img10'];
$company11 = $data['md_media_company_img11'];
$company12 = $data['md_media_company_img12'];

/*Slides Array*/
$company_name = array( 
    'company1' => array(
        'name' => $company1,
    ),
    'company2' => array(
        'name' => $company2,
    ),
    'company3' => array(
        'name' => $company3,
    ),
    'company4' => array(
        'name' => $company4,
    ),
    'company5' => array(
        'name' => $company5,
    ),
    'company6' => array(
        'name' => $company6,
    ),
    'company7' => array(
        'name' => $company7,
    ),
    'company8' => array(
        'name' => $company8,
    ),
    'company9' => array(
        'name' => $company9,
    ),
    'company10' => array(
        'name' => $company10,
    ),
    'company11' => array(
        'name' => $company11,
    ),
    'company12' => array(
        'name' => $company12,
    )

);

/*check if exist slide*/
$check_exist_company = 0;
$result = array_unique($company_name);
foreach($result as $company => $value) {
    if (!empty ($value['name'])){
        $check_exist_company = 1;
    }
} 
```

?>

```
 <?php if($check_exist_company == 1) {// check if any slide image added in theme option, return custom slide?>
                <?php $i = 1; ?>
                    <?php foreach($company_name as $company => $value) {

                        if (!empty ($value['name'])) {?>

                            <li><a class="nivoLink4" rel="<?php echo $i;?>" href="#"><?php echo $value['name'];?></a></li>
                             <?php ++$i ?>

                            <?php } ?>
                      <?php }?>

            <?php } ?>

<!--/slider--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:25:26.470

您可以在源数组上运行 array_unique() 并迭代结果。

# java - 将消息和签名转换为 BouncyCastle CMSSignedData 对象

> ID：13518264
> 
> 赞同：5
> 
> 时间：2012-11-22T18:24:40.597
> 
> 标签：java, rsa, digital-signature, bouncycastle, pkcs#7

我有一个 X509CertificateObject，一个匹配的 RSAPublicKey 并设法创建一个字节数组，其中包含一些消息对象的有效数字证书，也作为一个字节数组。

不幸的是，我正在构建的系统只接受`CMSSignedData`对象作为输入。如何将我的基本构建块转换为这样一个有效的`CMSSignedData`对象？

背景：我正在根据[此示例](http://java2s.com/Open-Source/Java/Security/Bouncy-Castle/org/bouncycastle/crypto/test/PSSBlindTest.java.htm)（摘要为 SHA512）试验 Java Bouncy Castle RSA 盲签名，并且需要将结果输入标准签名处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:05:59.830

首先，您可能希望使用私钥对数据进行签名。这个想法是签名应该是只有你可以创建的东西。你得到一个，其余的应该如下：

```
 X509Certificate signingCertificate = getSigningCertificate();
//The chain of certificates that issued your signing certificate and so on
Collection<X509Certificate> certificateChain = getCertificateChain();
PrivateKey pk = getPrivateKey();
byte[] message = "SomeMessage".getBytes();

CMSSignedDataGenerator generator = new CMSSignedDataGenerator();
certificateChain.add(signingCertificate);
generator.addCertificates(new CollectionStore(certificateChain));

JcaDigestCalculatorProviderBuilder jcaDigestProvider = new JcaDigestCalculatorProviderBuilder();
jcaDigestProvider.setProvider(new BouncyCastleProvider());
JcaSignerInfoGeneratorBuilder singerInfoGenerator = new JcaSignerInfoGeneratorBuilder(jcaDigestProvider.build());

AlgorithmIdentifier sigAlgId = new DefaultSignatureAlgorithmIdentifierFinder().find("SHA1withRSA");
AlgorithmIdentifier digAlgId = new DefaultDigestAlgorithmIdentifierFinder().find(sigAlgId);
AsymmetricKeyParameter privateKeyParam = PrivateKeyFactory.createKey(pk.getEncoded());
ContentSigner cs = new BcRSAContentSignerBuilder(sigAlgId, digAlgId).build(privateKeyParam);

SignerInfoGenerator sig = singerInfoGenerator.build(cs, signingCertificate);
generator.addSignerInfoGenerator(sig);

CMSSignedData data = generator.generate(new CMSProcessableByteArray(message), true); 
```

# java - 打印数字的二进制数字

> ID：13518265
> 
> 赞同：0
> 
> 时间：2012-11-22T18:24:43.653
> 
> 标签：java, loops

需要从伪代码编写一个 java 程序，我写了一些代码，它不工作，我不确定我是否做对了，因为我只是试图遵循伪代码 -

*   读我
*   当我 > 0
*   打印余数 i % 2
*   将 i 设置为 i / 2

    ```
    import java.util.Scanner;

    import java.util.Scanner;

    public class InputLoop
    {
        public static void main(String[] args)
        {
            int i = 0;
            Scanner scan = new Scanner(System.in);
            System.out.println("Enter an integer");
            while (!scan.hasNextInt()) // while non-integers are present
            {
                scan.next();
                System.out.println ("Bad input. Enter an integer.");
            }
            while (i>0) // while greater than 0
            {
                int input = scan.nextInt();
                System.out.println (i%2);
                i = (i/2);
            }

        }
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:27:21.947

怎么样：

```
System.out.println(Integer.toBinaryString(i)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T18:29:08.580

坦率地说，你`didn't`（啊，之前错过了）完全遵循了伪代码。伪代码告诉你`read i`，而你正在阅读`input`。这是一个问题。

第二个问题是，您应该在使用输入`while`进行处理的循环之外读取输入。这是你没有遵循的第二件事。

目前你的while循环是： -

```
 while (i>0) // while greater than 0
    {
        int input = scan.nextInt();
        System.out.println (i%2);
        i = (i/2);
    } 
```

这是`input`在您不想要的每次迭代中从用户那里读取的。

因此，您需要稍微修改一下代码：-

```
int i = scan.nextInt();  // Read input outside the while loop

while (i>0) // while greater than 0
{      
    System.out.println (i%2);
    i = i/2;   // You don't need a bracket here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:27:33.457

伪代码首先读取（循环外），但在您的代码中您读取第二次（循环内）

# android - MultiAutoComplete Android的水平列表项目（单词建议）？

> ID：13518267
> 
> 赞同：1
> 
> 时间：2012-11-22T18:24:58.203
> 
> 标签：android, autocomplete, orientation, adapter, android-arrayadapter

如何在 my 中实施水平单词建议`MultiAutoComplete`？
我的阵列适配器：

```
ArrayAdapter<String> adapterkata = new ArrayAdapter<String>(this,
            R.layout.list_item, kata);
txtMessage.setAdapter(adapterkata); 
```

我的`list_item.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp"
    android:textColor="#000">
</TextView> 
```

如果我在and`LinearLayout`之前添加，我会强制关闭。`TextView``orientation = horizontal`

# database-design - 你可以有2个外键而没有主键吗？

> ID：13518269
> 
> 赞同：5
> 
> 时间：2012-11-22T18:25:12.907
> 
> 标签：database-design, relational-database

我有一个简单的数据库，我正在两个表之间建立关系。所以我有第三张表，它们是链接的。第三张表是否需要主键？因为我需要的只是将两个表链接在一起，并为其他内容添加一个额外的列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:28:21.463

您描述的那种表有时称为[连接表](http://en.wikipedia.org/wiki/Junction_table)。您将在要连接的列中创建一个主键，这既是为了唯一性，也是因为它更有可能被索引以获得更好的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T18:28:57.640

你所描述的是一个连接表。是的，您可以在没有主键的情况下创建一个（或者，另一种选择是复合主键 - 使两个引用成为唯一对，并将其用作唯一标识键 - 但即使这也不是必需的（注意：只是因为它“没有必要”并不意味着它不是“好的做法”；通常有几行具有完全相同的内容不是一个好主意））。

使用这些术语，您应该能够找到实施所需的答案。

# c++ - 多项式运算

> ID：13518275
> 
> 赞同：0
> 
> 时间：2012-11-22T18:25:47.537
> 
> 标签：c++, class

我正在尝试编写一个从输入文件构造多项式的程序。它读入多项式并将值存储到类属性“系数”和“指数”中。例如系数 = 2，指数 = 3 将导致 2x^3。在读取多项式并输出时，必须处理许多烦人的极端情况。（`operator<<`和`operator>>`函数）我的主要函数彻底测试了我的 polynomial.cpp。我相信我的问题之一来自于构造多项式，正如您可能注意到的，我在为派生函数编写代码时也遇到了麻烦。这是我所拥有的：

```
#ifndef _POLYNOMIAL_H
#define _POLYNOMIAL_H

#include <iostream>
#include <vector>
#include <sstream>

using namespace std;

class Polynomial {

 public:

  Polynomial();
  Polynomial(vector<double> iCoefficients, vector<int> iExponents);

  int Degree() const;
  double Evaluate(double x) const;
  Polynomial Derivative() const;

  friend Polynomial operator+(const Polynomial & p, const Polynomial & p2);
  friend Polynomial operator*(const Polynomial & p, const Polynomial & p2);
  friend ostream& operator<<(ostream& out, const Polynomial & p);
  friend istream& operator>>(istream& in, Polynomial & p);

 private:

  vector<double> coefficients;

};
#endif

#include "polynomial.h"
#include <stdexcept>
#include <vector>
#include <cmath>

using namespace std;

// Default Constructor
Polynomial::Polynomial() { 
  coefficients.push_back(0);
}

// Constructor for a Polynomial
Polynomial::Polynomial(vector<double> iCoefficients, vector<int> iExponents) { 

  for (int i = 0; i < iExponents[0]; i++) {
    coefficients.push_back(0);
  }

  for (size_t i = 0; i < iExponents.size(); i++) {
    coefficients[(Degree() - iExponents[i])] = iCoefficients[i];
   }
 }

// Returns highest exponent of the polynomial
int Polynomial::Degree() const { 

  return coefficients.size();
}

// Evaluates the polynomial at a particular point
double Polynomial::Evaluate(double x) const { 

  double result;

  for(int i = 0; i <= Degree(); i++) {
    result += pow(x, Degree() - i) * coefficients[i];
  }
  return result;
}

// Returns first derivative of the polynomial
Polynomial Polynomial::Derivative() const { //----------------------???

//   Polynomial result;

//   for(int i = 0; i <= Degree(); i++) {
//     result.coefficients[i] = coefficients[i] * (Degree() - i);
//   }
//   return result;
}         

// Returns polynomial object that is the sum of parameters
Polynomial operator+(const Polynomial & p, const Polynomial & p2) { 

  int d = p.Degree();
  int d2 = p2.Degree();
  Polynomial sum;

  for (int j = 0; j < d; j++) {
    for (int i = 0; i < d2; i ++) {
      sum.coefficients.push_back(p.coefficients[j] + p2.coefficients[i]);
    }
  }
  return sum;
}

// Returns polynomial object that is the product of parameters
Polynomial operator*(const Polynomial & p, const Polynomial & p2) {

  int d = p.Degree();
  int d2 = p2.Degree();
  Polynomial product;

  for (int j = 0; j < d; j++) {
    for (int i = 0; i < d2; i ++) {
      product.coefficients.push_back(p.coefficients[j] * p2.coefficients[i]);
    }
  }
  return product;
}

// Output operator
ostream& operator<<(ostream& out, const Polynomial & p) {

  for (int i = 0; i <= p.Degree(); i++) {

    if(i == 0 && p.Degree() <= 1) {
      out << 0;
    }

    if (p.coefficients[i] != 0 && i != 0) {
      out << '+';
    }

    if (p.coefficients[i] != 0) {
      out << p.coefficients[i];
      if(i < (p.Degree() - 1)) {
    out << "x^";
    out << (i - p.Degree()) * (-1);
      }
    }
  }
  return out;
}

// Input operator
istream& operator>>(istream& in, Polynomial & p) {

  char ch;
  int exponent;
  double coefficient;
  vector<double> coefficients;
  vector<int> exponents;

  while(isspace(ch) == false) {

    ch = in.peek();
    if(ch == '+') {
      in.ignore();
      in >> coefficient;
    }
    else if(ch == '-') {
      in.ignore();
      in >> coefficient;
      coefficient = coefficient * (-1);
    }
    else {
      in >> coefficient;
    }
      ch = in.peek();
      if((ch <= 'z') && (ch >= 'a')) {
    in >> ch;
    ch = in.peek();
      if(ch == '^') {
        in.ignore();
        in >> exponent;
      }
      else 
        exponent = 1;
      }
      else
    exponent = 0;

      coefficients.push_back(coefficient);
      exponents.push_back(exponent);
  } 

  p = Polynomial(coefficients, exponents);

  return in;
}

#include <iostream>
#include <sstream>
#include <string>
#include <cmath>
#include "polynomial.h"

using namespace std;

bool testPolynomial(const Polynomial& p, string expected);
bool testOperations(const Polynomial& p, int degree, double expected);
bool testInput(string s);

int main() {
  int errors = 0;

  cerr << "Note: Nearly all of the tests expect a working output operator. If a test fails, check that first" << endl;
  cerr << "Testing default constructor" << endl;
  Polynomial p1;   // test default constructor
  errors += testPolynomial(p1, "0");

  cerr << "Testing explicit value constructor" << endl;
  double c_arr[] =  {1.1, 2, 4, 7};
  int e_arr[] = {6, 3, 2, 0};
  vector<double> c(c_arr, c_arr+4);
  vector<int> e(e_arr, e_arr+4);
  Polynomial p2(c, e);
  errors += testPolynomial(p2, "1.1x^6+2x^3+4x^2+7");
  c.clear(); e.clear();
  cout << '1' << endl;
  Polynomial p3(c, e);
  errors += testPolynomial(p3, "0");
  cout << '2' << endl;

  cerr << "Testing operations" << endl;
  double c2_arr[] =  {-1.1, 2, -4, 7};
  int e2_arr[] = {4, 3, 2, 0};
  vector<double> c2(c2_arr, c2_arr+4);
  vector<int> e2(e2_arr, e2_arr+4);
  Polynomial p4(c2,e2);
  errors += testOperations(p1, 0, 0);
  errors += testOperations(p2, 6, 109.4);
  errors += testOperations(p4, 4, -10.6);

  errors += testPolynomial(p1.Derivative(), "0");
  errors += testPolynomial(p2.Derivative(), "6.6x^5+6x^2+8x");
  errors += testPolynomial(p4.Derivative(), "-4.4x^3+6x^2-8x");

  errors += testPolynomial(p1+p2, "1.1x^6+2x^3+4x^2+7");
  errors += testPolynomial(p2+p4, "1.1x^6-1.1x^4+4x^3+14");

  errors += testPolynomial(p1*p2, "0");
  errors += testPolynomial(p2*p2, "1.21x^12+4.4x^9+8.8x^8+19.4x^6+16x^5+16x^4+28x^3+56x^2+49");
  double c_arr3[] = {-1};
  int e_arr3[] = {0};
  vector<double> c3 = vector<double>(c_arr3, c_arr3+1);
  vector<int> e3 = vector<int>(e_arr3, e_arr3+1);
  Polynomial p5(c3, e3);

  errors += testPolynomial(p2 * p5 + p2, "0");
  errors += testPolynomial(p5, "-1");

  cerr << "Testing input operator." << endl;
  testInput("0");
  testInput("51");
  testInput("-1.1");
  testInput("3x^2");
  testInput("-5x^3-5");
  testInput("x^5+x-1");
  testInput("-x^4+2");

  return errors;
}

bool testPolynomial(const Polynomial& p, string expected) {
  ostringstream out;
  out << p;
  if (out.str() != expected) {
    cerr << "Test failed: expected " << expected << " got " << out.str() << endl;
    return true;
  } else {
    return false;
  }
}

bool testOperations(const Polynomial& p, int degree, double expected) {
  if(p.Degree() != degree) {
    cerr << "Failed Degree operation" << endl;
    return true;
  }
  double result = p.Evaluate(2.0);
  if (fabs(result - expected) > 1e-5) {
    cerr << "Failed Evaluation operation" << endl;
  }
  return false;
}

bool testInput(string s) {
  Polynomial p;
  istringstream in(s+" ");
  in >> p;
  ostringstream out;
  out << p;
  if (out.str() != s) {
    cerr << "Failed input test. Expected: " << s << " got " << out.str() << endl;
    return true;
  }
  return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:21:07.770

该`Polynomial::Degree()`函数有一个错误；它应该返回`size()-1`

* * *

为了转换系数和指数列表，首先找到最大指数；这将是多项式的次数：

```
int degree = *std::max_element(iExponents.begin(), iExponents.end()); 
```

然后，用这个数量的零初始化系数（加一，见上文）：

```
coefficients.assign(degree + 1, 0); 
```

然后，设置每个系数，就像你做的那样。

* * *

但是，最好使用幂/指数的升序！这样，你就不需要一直计算`Degree()-i`，你可以用它`i`来代替。

```
for (size_t i = 0; i < iExponents.size(); i++) {
    coefficients[iExponents[i]] += iCoefficients[i];
} 
```

注意`+=`上面的代码；它处理多项式，例如`3x+4x+5x`，使其等价于`12x`.

* * *

您的加法和乘法算法完全错误。您应该首先设置输出多项式的次数，就像在构造函数中所做的那样：

```
Polynomial operator+(const Polynomial & p, const Polynomial & p2)
{
    int d = p.Degree();
    int d2 = p2.Degree();
    Polynomial sum;

    sum.coefficients.assign(std::max(d, d2) + 1, 0);
    ...
} 
```

其余的应该更容易，一旦您尝试考虑它。

* * *

执行加法后，您可能需要检查零最高度系数；例如，当您添加`2x^2+x+1`and时`-2x^2+x+1`，您会得到`0x^2+2x+2`，您可能希望将其转换为`2x+2`：

```
while (coefficients.back() == 0)
    coefficients.resize(coefficients.size() - 1);
if (coefficients.empty())
    coefficients.push_back(0); 
```

* * *

导数应该很容易，一旦你得到`operator+`并`operator*`正确。

# algorithm - 大量可能性的最佳搜索技术

> ID：13518279
> 
> 赞同：0
> 
> 时间：2012-11-22T18:26:09.147
> 
> 标签：algorithm, search, set

我正在尝试在文本文件中搜索大量可能性。

例如，我想搜索一个包含唯一名称的文本文件。现在，如果我找到名称 X，那么我想将 X 存储在另一个文件中。

这里的问题是我有超过 1000 个唯一名称，我不想为每个唯一名称执行 1000 个搜索调用和 if 语句。

在 java/javascript/php 中有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:31:23.677

您有一组名称，并且您想查找哪些名称与另一组名称匹配。

```
Set<String> namesFromFile = readFile(filename);
Set<String> namesToMatch = readFile(matchingNames);
namesToMatch.retainAll(namedFromFile); 
```

这`retainAll`是一个 O(n) 操作，其中`n`是较小集合的大小。在 Java`retainAll`中，一组 1000 个值可能需要几毫秒。

[Set.retainAll()](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#retainAll%28java.util.Collection%29)执行以下操作

> 仅保留此集合中包含在指定集合中的元素（可选操作）。换句话说，从这个集合中移除所有不包含在指定集合中的元素。如果指定的集合也是一个集合，则此操作有效地修改此集合，使其值是两个集合的交集。

* * *

1000 个元素的集合太小了，很难准确测试，所以在这个测试中，我测试一个大 10 倍的元素，即 10,000 个元素与 100,000 个元素的集合。

```
public static void main(String... args) {
    Set<String> names1 = generateStrings(100000, 2);
    Set<String> names2 = generateStrings(10000, 3);
    for (int i = 0; i < 10; i++) {
        long start = System.nanoTime();
        Set<String> intersect= new HashSet<String>(names2);
        intersect.retainAll(names1);
        long time = System.nanoTime() - start;
        System.out.printf("The intersect of %,d and %,d elements has %,d and took %.3f ms%n",
                names1.size(), names2.size(), intersect.size(), time / 1e6);
    }
}

private static Set<String> generateStrings(int number, int multiple) {
    Set<String> set = new HashSet<String>();
    for (int i = 0; i < number; i++)
        set.add(Integer.toBinaryString(i * multiple));
    return set;
} 
```

印刷

```
The intersect of 100,000 and 10,000 elements has 5,000 and took 21.173 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 10.785 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 9.597 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 3.414 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 2.791 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 2.629 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 2.689 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 2.753 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 2.704 ms
The intersect of 100,000 and 10,000 elements has 5,000 and took 2.645 ms 
```

# groovy - 在 Groovy 代码中的功能方面，Groovy 对象和 Java 对象有什么区别？

> ID：13518280
> 
> 赞同：2
> 
> 时间：2012-11-22T18:26:15.070
> 
> 标签：groovy

首先，如果我说一些明显的话，请原谅我，因为我没有研究这个问题的答案，这只是我想到的东西，无法通过快速谷歌搜索找到答案（我也不知道 Groovy出色地）。

我正在阅读 Groovy in action（第 1 版），在第 7.6 节中它指出“如果您希望将普通的 Java 类识别为 Groovy 类，您只需实现 GroovyObject 接口。为方便起见，您还可以子类化抽象类 GroovyObjectSupport，它提供默认实现。”

所以我正在尝试一些 Java/Groovy（试图找到使 Java 编码更快/更容易的方法），并且我正在实例化这个对象 Person，它是一个 Java 对象，而 Person 类与它没有任何关系Groovy（即不实现 GroovyObject 或任何东西）。Person 有一个受保护的字段，名称，带有 getter/setter。我可以在一个 groovy 测试用例（扩展 GroovyTestCase）中像这样访问它，顺便说一句，它在不同的包中，不应该像这样访问：

```
Person person = new Person('joe')
println "Name: ${person.name}" 
```

这不是使用Groovy 对象具有的元信息，即Groovy 会拦截、获取“person.name”的“name”部分并调用getName() 方法或类似的东西吗？但是 person 是一个 Java 对象……也就是说，它不应该有可用的逻辑。

我还没有实现 GroovyObject 或扩展 GroovyObjectSupport，但似乎这个 Java 对象具有我可以使用的 Groovy 特性。

我的问题是，我可以从 Groovy 中使用的 Java 对象中假设什么？显然在幕后做了一些事情来用一些 Groovy 特性来扩充 Java 定义的类......但是，哪些特性呢？

所以，我想我的问题可以归结为：“在 Groovy 上下文中使用 Java 类时做了什么？”

任何有关该主题的信息将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:36:18.793

Groovy 确实增强了您的 Java 类。问题是当您想从 Java 中使用这些增强的 Java 类时。然后，您需要采用`GroovyObject`and`GroovyObjectSupport`策略。

关于您可以期待什么，您可以查看 groovy 文档：

*   [groovy-jdk](http://groovy.codehaus.org/groovy-jdk/)展示了对 JDK 的 Groovy 增强
*   [groovy-api](http://groovy.codehaus.org/gapi)显示了 Groovy 库中的特定内容

eclipse 插件也非常适合从 Groovy 自动完成 Java 类。

* * *

Java 对象通过 Groovy 的元对象协议 (MOP) 得到了增强，该协议拦截并自己调度方法和属性。这就是你可以拦截东西的原因，这就是如何将新方法添加到 Java 的最终类中的原因。

Groovy 的 MOP 使用缓存策略和反射器类来实现良好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T16:24:48.867

您还可以通过覆盖 resolveClass 方法并更改类加载器来通过 ObjectInputStream 读取 Groovy 对象。见[http://www.feiteira.org/2013/04/reading-groovy-objects-from-java.html](http://www.feiteira.org/2013/04/reading-groovy-objects-from-java.html)

# javascript - Textarea 对 .change() 没有反应？

> ID：13518285
> 
> 赞同：0
> 
> 时间：2012-11-22T18:26:36.450
> 
> 标签：javascript, asp.net, jquery-ui

```
$(document).ready(function(){
    var keyUpTime = 0;                  
    var t = 0;
    var executeAfterOneSecond = false;
    $('#source').keyup(function(){
        if(executeAfterOneSecond == false){
            executeAfterOneSecond = true;
            t = setTimeout(function(){
                executeAfterOneSecond = false;
                sendValue($('#source').val());                          
                }, 600);
            }                                   
        keyUpTime = $.now();
        setTimeout(function(){
            if($.now() - keyUpTime >= 200) {
                clearTimeout(t);
                executeAfterOneSecond = false;
                sendValue($('#source').val());          
                }           
            },200);
    });
});

<textarea id="source" name="text" wrap="soft" tabindex="0" dir="ltr" spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" style="box-sizing: border-box; overflow-y: hidden; overflow-x: auto; padding-right: 20px; " class="oggy-textarea">
                                </textarea> 
```

好吧，我希望我的代码适用于 change(); [$('#source').change(function(){---});]，不在 keyup() 上，但它没有。我尝试使用 bind() 但没有。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:32:36.213

Change 事件仅在`input`控件丢失时发生`focus`- 因此它没有触发。

请参阅此处的注释：[http ://www.w3schools.com/jquery/event_change.asp](http://www.w3schools.com/jquery/event_change.asp)

您必须使用`keyUp`,`keyPress`或`keyDown`

你也可以真正清理你的方法。像下面这样的东西可能更稳定。

这将`sendValue()`在最后一次按键后 1 秒后调用。将您的 22 行减少到 6 行：)

[**如果jsFiddle**](http://jsfiddle.net/QvZz7/)以下面的代码为例[](http://jsfiddle.net/QvZz7/)

 **```
 $(document).ready(function(){

      $("#source").keyup(function(){
         clearTimeout(this.timer);
         this.timer = setTimeout(function() {sendValue($("#source").val());}, 1000);
      });

   }); 
```**

# c++ - 关于可能在 Valgrind 中丢失

> ID：13518293
> 
> 赞同：0
> 
> 时间：2012-11-22T18:27:10.900
> 
> 标签：c++, vector, valgrind

如果我们像这样将字符串推入向量中会出现什么问题：

```
globalstructures->schema.columnnames.push_back("id"); 
```

当我在我的代码上应用 valgrind 时，它显示

> 可能在 1 个块中丢失 27 个字节可能在 19 个丢失记录 7 中丢失。

就像在很多地方一样，它可能会丢失......因此分配和释放不匹配......这会导致一些奇怪的错误，比如

> malloc.c:没有这样的文件或目录

尽管我在代码中的任何地方都使用 calloc 分配内存，但我收到了类似的警告

> 系统调用参数 write(buf) 指向未初始化的字节

导致该错误的代码是

```
 datapage *dataPage=(datapage *)calloc(1,PAGE_SIZE);               
  writePage(dataPage,dataPageNumber); 

  int writePage(void *buffer,long pagenumber)                 
  {
    int fd;
    fd=open(path,O_WRONLY, 0644);

     if (fd < 0)
        return -1;

    lseek(fd,pagenumber*PAGE_SIZE,SEEK_SET);

     if(write(fd,buffer,PAGE_SIZE)==-1)
    return false;

      close(fd);
      return true;
  } 
```

当我通过 gdb 运行时，我得到的确切错误是......

> 断点 1，getInfoFromSysColumns (tid=3, numColumns=@0x7fffffffdf24: 1, typesVector=..., constraintsVector=..., lengthsVector=..., columnNamesVector=..., offsetsVector=...) 在 dbheader.cpp :1080
> 
> 程序收到信号 SIGSEGV，分段错误。
> 
> _int_malloc (av=0x7ffff78bd720, bytes=8) at malloc.c:3498 3498 malloc.c: 没有这样的文件或目录。

当我通过 valgrind 运行它时，它工作正常......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:12:33.113

好，

```
malloc.c:No such file or directory 
```

当您使用 gdb 进行调试并且在 malloc 附近使用命令“s”而不是“n”时，可能会发生这种情况，这实际上意味着您正在尝试进入 malloc，其源代码在您的 Linux 机器上可能不可用。

这也许就是为什么它可以与 valgrind 一起正常工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:28:41.437

为什么错误在malloc中：

> 问题是您覆盖了一些内存缓冲区并损坏了内存管理器使用的结构之一。[（C）](https://stackoverflow.com/questions/6725164/segmentation-fault-in-malloc-consolidate-malloc-c-that-valgrind-doesnt-detect)

尝试使用 --track-origins=yes 运行 valgrind 并查看未初始化访问的来源。如果你认为它应该被初始化而它不是，也许数据来自一个错误的指针，valgrind 会告诉你这些值是在哪里创建的。可能那些未初始化的值会覆盖您的缓冲区，包括内存管理器特殊字节。

此外，请在崩溃*前*查看所有 valgrind 警告。

# java - 如何在静态上下文中获取类的记录器？

> ID：13518296
> 
> 赞同：6
> 
> 时间：2012-11-22T18:27:20.400
> 
> 标签：java, logging

我正在尝试为我的班级接收记录器：

```
public static final java.util.logging.Logger log = java.util.logging.Logger.getLogger(this); 
```

但是在那里使用“this”会导致“Cannot use this in a static context”错误。

有人知道怎么修这个东西吗？

编辑：我必须能够从我的程序中的所有类访问记录器，所以它*必须*是公共的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T18:28:36.873

请注意，我将修饰符从更改`public`为`private`：

```
public class FooBar {

    private static final Logger log = Logger.getLogger(FooBar.class);

    //or (if you are using java.util.logging):

    private static final Logger log = Logger.getLogger(FooBar.class.getName());

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T18:28:18.360

对于 org.appache.log4j：

```
private static final Logger LOG = Logger.getLogger(MyClass.class); 
```

对于 java.util.Logging

```
private static final Logger LOG = Logger.getLogger(MyClass.class.getName()); 
```

# android - 在android中实现一个带有部分分隔符的列表

> ID：13518303
> 
> 赞同：13
> 
> 时间：2012-11-22T18:27:34.413
> 
> 标签：android, android-listview

嗨，我怎样才能实现一个带有部分分隔符的列表，就像 android 的[积木列表中的那个一样](http://developer.android.com/design/building-blocks/lists.html)

![在此处输入图像描述](../Images/f1aa2306f7d376d5b47c6f814876e0dd.png)

你能指出任何文章或教程来实现这一点吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T22:53:18.373

我在这里实现了一个可能的版本：

[http://steprobe.wordpress.com/2013/03/29/google-building-blocks-style-listview-for-android/](http://steprobe.wordpress.com/2013/03/29/google-building-blocks-style-listview-for-android/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T19:43:43.400

有很多教程可以获取分组列表。诀窍是寻找[“适配器”](https://www.google.es/search?q=developers%20blog%20android%20listview&oq=developers%20blog%20android%20listview&sugexp=chrome,mod=3&sourceid=chrome&ie=UTF-8#hl=es&safe=off&tbo=d&sclient=psy-ab&q=android%20header%20adapter&oq=android%20header%20adapter&gs_l=serp.3..0i8i30l2j0i8i10i30j0i8i30.72309.75269.0.75394.22.22.0.0.0.1.385.2474.12j7j1j1.21.0...0.0...1c.1.d4wFVyGhY-8&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=87805ab6cf109624&bpcl=38897761&biw=1366&bih=617)而不是“列表”。例如，这个：[http ://android.cyrilmottier.com/?p=440](http://android.cyrilmottier.com/?p=440)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T19:47:14.930

列表中的每一行都可以在布局方面与其他行完全分开。因此，如果您的列表中有 3 行，您可以让每一行看起来完全不同。您需要编写自己的适配器（即扩展 ArrayAdapter）、`getView()`覆盖`getViewTypeCount()`和`getItemViewType()`. 然后对于每一行，您`getView()`应该执行您想要的任何逻辑，膨胀您想要的任何布局并将该视图返回到列表。

# ruby-on-rails-3 - 在rails中的常见div标签中包装表单元素

> ID：13518305
> 
> 赞同：0
> 
> 时间：2012-11-22T18:27:49.810
> 
> 标签：ruby-on-rails-3, forms

有没有更好的方法来做我正在做的事情，一种比我正在尝试的更符合 Rails 标准的方法？：

```
<%= form_for @project, :html => {:class => 'form-horizontal'} do |f| %>
    <div class="control-group">
        <%= f.label :project_title %>
    </div>
    <div class="control-group">
        <%= f.text_field :project_title %>
    </div>
    <div class='control-group'>
        <%= f.submit %>
    </div>
<% end %> 
```

我的某些部分认为这是错误的。所以我想知道标准是什么？我一直在阅读[rails form helpers](http://guides.rubyonrails.org/form_helpers.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:32:36.760

是的。查看带有[twitter 引导程序](https://github.com/plataformatec/simple_form#twitter-bootstrap)支持的[simple_form 。](https://github.com/plataformatec/simple_form)

# sql - SQL 列上的二进制“或”操作

> ID：13518309
> 
> 赞同：1
> 
> 时间：2012-11-22T18:27:59.903
> 
> 标签：sql, sql-server, tsql

我有一个返回工作日的查询

```
Select PERSON_NAME, PERSON_DAY from PERSON_DAYS WHERE PERSON_ID = @myId 
```

说我得到

```
John 1 (mo)
John 3 (mo tu)
John 8 (th) 
```

我需要整天忙着为约翰争取。如何在此查询中对 PERSON_DAY 列进行逻辑或？

结果应该是 11 (mo tu th)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:38:01.543

到目前为止我最好的

```
;with PowersOf2
as
(
    select 1 as Number
    union all
    select A.Number * 2 from PowersOf2 as A where A.Number < 64
)
select P.PERSON_NAME, sum(distinct P.PERSON_DAY & PowersOf2.Number)
from PERSON_DAYS as P
    left outer join PowersOf2 on PowersOf2.Number <= P.PERSON_DAY
where P.PERSON_ID = @myId
group by P.PERSON_NAME 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!6/0e3bd/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:53:38.743

如果我理解正确，您可以结合使用[按位运算符](http://msdn.microsoft.com/en-us/library/ms176122.aspx) `and`和聚合函数`sum`来做您想做的事情。

例子：

```
with person_days as (
      select 'John' as person_name, 1 as weekday --mo
union select 'John',  3  -- mo, tu
union select 'John',  8  -- th
union select 'Jane',  1  -- mo
union select 'Jane',  9  -- mo, th
union select 'Jane', 40  -- th, sa
),
Bits AS ( 
          SELECT   1 AS BitMask --mo
UNION ALL SELECT   2            --tu
UNION ALL SELECT   4            --we
UNION ALL SELECT   8            --th
UNION ALL SELECT  16            --fr
UNION ALL SELECT  32            --sa
UNION ALL SELECT  64            --su
UNION ALL SELECT 128
)
, person_single_days as (
select distinct person_name, weekday & bits.BitMask single_weekday
  from person_days 
       inner join bits on person_days.weekday & bits.BitMask > 0
)
select person_name, sum(single_weekday) weekdays
  from person_single_days
 group by person_name; 
```

结果：

```
person_name weekdays
----------- -----------
Jane        41
John        11 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T19:15:38.013

受到 Roman 的 CTE 的“启发”：（请注意，第一个 CTE 只是生成演示数据）

```
with p as 
(
    select 'John' as PERSON_NAME, 1 as PERSON_DAY
    union
    select 'John', 3 
    union
    select 'John', 8
    union
    select 'Jane', 2
    union
    select 'Jane', 4
),
cte as
(
    select PERSON_NAME, PERSON_DAY from p
    union all
    select cte2.PERSON_NAME, p.PERSON_DAY | cte2.PERSON_DAY 
        from p 
        inner join cte as cte2 on p.PERSON_NAME = cte2.PERSON_NAME 
        where p.PERSON_DAY & cte2.PERSON_DAY = 0
)   
select PERSON_NAME, MAX(PERSON_DAY) from cte
group by PERSON_NAME 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T18:46:42.607

我认为您正在寻找的是执行 OR 的自定义聚合。您可以在 .NET 中使用 SQL CLR 编写它。这可能是最干净的解决方案。它也可以重复使用。

或者，您可以使用基于游标的循环来计算结果。

您也可以（误）使用 CTE 来达到此目的。

# mysql - str_to_date 的mysql顺序不起作用

> ID：13518310
> 
> 赞同：1
> 
> 时间：2012-11-22T18:28:02.663
> 
> 标签：mysql

我有一个带有日期的表（实际上它们是这种格式的字符串时间：2004-Mar）。我想根据这个日期对记录进行排名，所以我有以下查询：

```
SELECT *,STR_TO_DATE(detail,'%Y-%b') 
FROM table2 JOIN user_table 
ON table2.user_id = user_table.id 
ORDER BY STR_TO_DATE(detail,'%Y-%b') DESC 
WHERE table2_col = 11; 
```

但是这个查询不起作用，它要求我在第 5 行检查 'WHERE table2_col = 11' 附近的语法错误

如果我删除 ORDER BY STR_TO_DATE(detail,'%Y-%b') DESC ，那么一切正常。所以我认为错误来自str_to_date？我的代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:28:50.087

order by 应该在 where 子句之后

试试这个：：

```
SELECT *,STR_TO_DATE(detail,'%Y-%b') 
FROM table2 JOIN user_table 
ON table2.user_id = user_table.id 

WHERE table2_col = 11
ORDER BY STR_TO_DATE(detail,'%Y-%b') DESC 
; 
```

# php - 使用 Wordpress，我如何链接到图像以在我的 style.css 文件中用作背景？

> ID：13518328
> 
> 赞同：1
> 
> 时间：2012-11-22T18:29:09.920
> 
> 标签：php, css, wordpress

我知道在 HTML/PHP 文件中我可以做类似的事情

```
<img src="<?php bloginfo('template_url'); ?>/path/to/image.png" /> 
```

但是在 CSS 中，如果我想这样做，显然我不能这样做

```
background: url('<?php bloginfo('template_url') ?>/images/linen.png'); 
```

即使我想。

我将如何实现类似的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:14:36.260

您不应该`<?php bloginfo('template_url'); ?>`在 CSS 文件中使用。CSS 文件中的 URL 是相对于当前 CSS 文件的。

所以，如果你有以下目录结构

```
theme/
    images/
        linen.png
    css/
        styles.css 
```

你的 CSS 规则看起来像

```
background: url('../images/linen.png'); 
```

# c - 用更少的代码添加（或做任何其他数学运算）两个相同结构的每个成员

> ID：13518329
> 
> 赞同：4
> 
> 时间：2012-11-22T18:29:27.927
> 
> 标签：c, struct

因此，基本上，我想将第一个**struct**的每个成员与第二个**struct**的每个成员相加，并且这些**结构**的类型相同。像这样：

```
struct Foo
{
    int bar1;
    int bar2;
    int bar3;
    int bar4;
    int bar5;
}

Foo AddFoos(Foo foo1, Foo foo2)
{
    Foo foo3;
    foo3.bar1 = foo1.bar1 + foo2.bar1;
    foo3.bar2 = foo1.bar2 + foo2.bar2;
    foo3.bar3 = foo1.bar3 + foo2.bar3;
    foo3.bar4 = foo1.bar4 + foo2.bar4;
    foo3.bar5 = foo1.bar5 + foo2.bar5;
    return foo3;
} 
```

然而，当**结构**不断变大时，这种方式就很奇怪了。有什么办法可以用更少的代码来做到这一点？最好没有高级指针魔法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:32:25.983

改为使用数组和 for 循环来添加数字：

```
struct Foo
{
    int bars[100];
};

for (i=0;i<100;i++)
{
foo3.bars[i]=foo1.bars[i]+foo2.bars[i];
} 
```

如果在编译时数组大小未知，则可以`malloc`将结构更改为此，然后对所有三个`Foo`变量进行 malloc。

```
struct Foo
    {
        int *bars;
    }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T18:46:18.907

根据您所说的“高级指针魔术”，您可以使用以下中等魔术代码：

```
Foo AddFoos(Foo foo1, Foo foo2)
{
    Foo foo3;
    int *pointer1 = &foo1.bar1; // first field here
    int *pointer2 = &foo2.bar1; // first field here
    int *pointer3 = &foo3.bar1; // first field here
    while (pointer3 <= &foo3.bar5) // last field here
    {
        *pointer3++ = *pointer1++ + *pointer2++;
    }
    return foo3;
} 
```

当您更改 的定义时`Foo`，只需更新第一个和最后一个字段的名称。这仅在所有字段都属于同一类型时才有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T19:09:29.153

您需要命名字段 ( `bar1`.. `barN`) 的舒适性以及可以循环以自动执行操作的数组之类的东西。首先我们定义结构（内存中字段的密集表示）：

```
struct VectorFields {
    int a;
    int b;
    int c;
}; 
```

然后我们需要了解该结构中使用的字段数：

```
#define VECTOR_FIELDS_LEN (sizeof(struct VectorFields) / sizeof(int)) 
```

（在 C++ 中你可以使用一些模板魔法 foo，这里我们只是使用预处理器作为一个更简单的变体）。接下来，我们将`struct VectorFields`与一个大小都匹配的数组结合起来`int`，也称为`union`：

```
union Vector {
    struct VectorFields fields;
    int raw[VECTOR_FIELD_LEN];
}; 
```

（注意：`VECTOR_FIELD_LEN`必须是编译器已知的常量值，因此之前的预处理器。）您现在可以通过数据的名称 ( `.fields.a`) 或索引 ( `.raw[0]`) 访问数据。因此，让我们编写将它们相加的函数`Vector`：

```
void vector_add(union Vector* result, union Vector* a, union Vector* b) {
    int i;
    for (i = 0; i < TUPLE_LEN; i++) {
        result->raw[i] = a->raw[i] + b->raw[i];
    }
} 
```

你可以这样使用它：

```
#include <stdio.h>
int main() {
    union Vector a = { .fields = { 1, 2, 3 } };
    union Vector b = { .fields = { 4, 5, 6 } };
    union Vector sum;

    vector_add(&sum, &a, &b);

    printf("%d %d %d\n", sum.fields.a, sum.fields.b, sum.fields.c);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T18:34:51.233

如果你只有`int`s 你可以使用一个数组

```
struct Foo {
    int bar[5];
};

Foo AddFoos(Foo f1, Foo f2)
{
    Foo f3;
    int i;
    for (i = 0; i < 5; ++i)
        f3.bar[i] = f1.bar[i] + f2.bar[i];

    return f3;
} 
```

# browser - User-Agent 字段中的 Mozilla/5.0 是否表示浏览器支持 HTML5？

> ID：13518335
> 
> 赞同：2
> 
> 时间：2012-11-22T18:29:52.100
> 
> 标签：browser, cross-browser, user-agent, mozilla

是否可以假定一个浏览器显示`Mozilla/5.0 (compatible...)`支持 HTML5？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T18:38:15.790

不，您应该使用[Modernizr 之](http://modernizr.com/)类的东西来检测功能并在必要时回退。

HTML5 是不同功能的集合，因此您应该检查您想要的浏览器功能。User-Agent 字段不应该用于确定兼容性，因为客户端程序可能会对此撒谎。用户代理嗅探不是确定兼容性的推荐方法——它太容易出错，并且有多个浏览器可以更改用户代理字段以显示为其他浏览器。

Mozilla/5.0 或 Mozilla/4.0 出现在这么多浏览器的 User-Agent 中的原因是为了表明它们与 Netscape 的某些版本向后兼容（4.0 = Netscape 4.0 -- 5.0 与原始套件兼容（又名海猴子））。基本上每个浏览器都会声称这种兼容性，所以它不是一个非常有用的指标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:37:59.547

我通常不使用标题来检查 HTML5 兼容性，只是让浏览器去做：同时发送 HTML5 和 HTML<5 内容，并做一些技巧以在适当的情况下显示它们。例如：

```
<audio>Username:</audio><input type="text" placeholder="Username"> 
```

在这种情况下，如果可能，请使用`placeholder`，否则显示标签。中的内容`<audio>...</audio>`会被非 HTML5 浏览器显示，而 HTML5 浏览器会忽略它；反之亦然，非 HTML5 浏览器不会解析`placeholder="Username"`，而 HTML5 浏览器会。

# c# - WPF 多重绑定 .Net Framework 4.0

> ID：13518336
> 
> 赞同：4
> 
> 时间：2012-11-22T18:29:53.707
> 
> 标签：c#, xaml, binding, converter

我有以下 DataGridTemplate 列：

```
<DataGridTemplateColumn x:Name="specialtiesColumn" Header="Specialties" MinWidth="170">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ComboBox ItemsSource="{Binding Path=DataContext.Specialties, Mode=OneWay, RelativeSource={RelativeSource FindAncestor, AncestorType=DataGrid}}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Height="17" VerticalAlignment="Center" Orientation="Horizontal">
                            <CheckBox Width="20">
                                <CheckBox.IsChecked>
                                    <MultiBinding Converter="{StaticResource ProviderSpecialtyIsInSpecialtiesConverter}">
                                        <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType=ComboBox}" Path="DataContext.Specialties" />
                                        <Binding Path="Name" />
                                    </MultiBinding>
                                </CheckBox.IsChecked>
                            </CheckBox>
                            <TextBlock Text="{Binding Name}" Width="130" />
                        </StackPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

我想要做的是在数据网格中有一列组合框，每个组合框都有几个复选框。数据网格的每一行代表医院。组合框将显示医院有哪些专业，用户还应该能够修改这些选择。

这是转换器的代码：

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
{
    try
    {
        HashSet<Specialty> specialties = (HashSet<Specialty>)values[0];
        string specialty = (string)values[1];

        foreach (Specialty s in specialties)
        {
            if (s.Name == specialty)
                return true;
        }

        return false;
    }
    catch (Exception)
    {
        return false;
    }
} 
```

这适用于使用 .Net Framework 4.5 的计算机，但在尝试仅使用 .Net Framework 4.0 加载时会崩溃。该项目针对.Net Framework 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:33:26.240

我想原因是 MultiBinding 使用的是 RelativeSource 而 DataGridColumn 不是可视树的一部分。他们必须在 4.5 中修复了列绑定行为。我的代码看起来像这样，我遇到了同样的问题：

```
<DataGridTextColumn.Binding>
    <MultiBinding Converter="{StaticResource directionConverter}">
        <MultiBinding.Bindings>
            <Binding ElementName="clientPerspective" Path="IsChecked"/>
            <Binding Path="Direction"/>
        </MultiBinding.Bindings>
    </MultiBinding>
</DataGridTextColumn.Binding>` 
```

# box-api - Box iOS SDK：previewWithCallbacks 没有 on.progress 回调

> ID：13518337
> 
> 赞同：2
> 
> 时间：2012-11-22T18:30:02.507
> 
> 标签：box-api

下载文件时，我没有收到 on.progress 回调，因此无法显示进度条。适用于文件上传。

我究竟做错了什么？

谢谢，皮特

```
BoxFile *boxFile = (BoxFile *)boxObject;

[boxFile previewWithCallbacks:^(id<BoxOperationCallbacks> on)
{
    on.progress(^(NSNumber *ratio)
    {
        // update progress bar
    });

    on.after(^(BoxCallbackResponse response)
    {
         if (response == BoxCallbackResponseSuccessful)
         { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:52:31.503

我们有同样的问题，但我们设法得到了答案，尽管我们还没有尝试实现它。

> “目前，获得文件下载进度的预期方法是将您的对象注册为下载队列的观察者（[Box registerObserverForDownloadQueue:self];），然后扩展 BoxObserver 协议并实现您所使用的任何这些回调方法有兴趣：

```
- (void)downloadDidBeginForItem:(BoxID *)itemID;
- (void)downloadDidProgressForItem:(BoxID *)itemID bytesDownloaded:(NSUInteger)bytes;
- (void)downloadDidCompleteForItem:(BoxID *)itemID withResponse:(BoxCallbackResponse)response;
- (void)downloadDidCompleteForAllItems; 
```

> 请记住在您期望您的对象被释放之前从观察者中删除您的对象，因为观察者当前被保留。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T00:18:41.827

这个问题没有实际意义，因为 Box 有一个全新的 iOS SDK (v2.0)，它确实有适当的进度回调。

# unit-testing - CakePHP 使用映射方法测试行为

> ID：13518340
> 
> 赞同：2
> 
> 时间：2012-11-22T18:30:17.390
> 
> 标签：unit-testing, cakephp, cakephp-2.1

在创建一个时，`OwnableBehavior`我决定使用`$mapMethods`可用的属性。它是将任何调用的方法映射`isOwnedByXXX()`到`isOwnedBy()`（有关此文档的链接在[这里](http://book.cakephp.org/2.0/en/models/behaviors.html#mapped-methods)）

这是我的`OwnableBehavior`代码：

```
class OwnableBehavior extends Model Behavior {

    public $mapMethods = array('/isOwnedBy(\w+)/' => 'isOwnedBy');

    public function isOwnedBy(Model $model, $type, $id, Model $userModel, $userId) {
         // Method is currently empty
    }
} 
```

这是测试用例代码：

```
class OwnableBehaviorTest extends CakeTestCase {

    public function testIsOwned() {
        $TestModel = new Avatar();
        $TestModel->Behaviors->attach('Ownable');
        $result = $TestModel->Behaviors->Ownable->isOwnedByUser(
            $TestModel, 1, new User(), 1);
        $this->assertTrue($result);
    }
} 
```

当我运行测试时，我收到此错误：

```
 Call to undefined method OwnableBehavior::isOwnedByUser() 
```

如果我将方法调用更改`isOwnedBy($TestModel, 'user', 1, new User(), 1);`为此工作，那么看起来由于某种原因映射的方法在单元测试期间不起作用。我已经在控制器中测试了映射方法，并且没有收到任何错误。

我想知道这是否取决于我如何将行为加载到模型中。我在食谱中找不到任何关于如何正确测试行为的文档，例如组件、助手等...所以我只是使用了与核心行为测试相同的技术（在 中找到`Cake/Test/Case/Model/Behavior/`）。

我确实认为这可能是因为我正在覆盖该`ModelBehavior::setup()`方法，但我尝试`parent::setup($model, $settings)`在设置方法的开头添加，但我仍然得到相同的错误。我没有覆盖任何其他`ModelBehavior`方法。

我想我可以只使用该`OwnableBehavior::isOwnedBy()`方法，但我很想知道我是否可以让映射的方法在单元测试期间工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:47:19.890

我找到的解决方案是替换这一行：

```
$result = $TestModel->Behaviors->Ownable->isOwnedByUser(...); 
```

和：

```
$result = $TestModel->isOwnedByUser(...); 
```

所以这只是一个更像你在应用程序中使用它的情况，直接从模型中调用行为方法。我不知道这是否会破坏单元测试的想法并使其更多地融入集成测试。

# java - Java 编程：main(String[] args) 中预期的编译器错误、类接口或枚举

> ID：13518341
> 
> 赞同：-3
> 
> 时间：2012-11-22T18:30:19.813
> 
> 标签：java, class, bluej, main-method

我正在创建一个五子棋游戏。首先，我只是尝试输入一个 main 方法，以便我可以输入一些准备好变成真实的伪代码。但是，每当我尝试编译我当前的代码时，我都会在主字符串中的 'void' 之前得到一个编译器错误，指出：“class, interface or enum expected”。

我是 Java 编程新手，但在这方面已有数周的经验。我的一些朋友也在创建一个，他们也遇到了同样的问题。

我目前使用 BlueJ 作为我的开发环境。代码如下。

```
/**
 * This is my Director class for my Backgammon game.
 * 
 * @author ######
 * @version 1.0
 */
public static final void main(String[] args)
public class Director
{
    // instance variables - replace the example below with your own

    /**
     * Constructor for objects of class Director
     */
    public Director()
    {
        // initialise instance variables

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T18:31:44.580

主要方法应该*在*类体内：

```
public class Director
{
    public static void main(String[] args) {
      ...
    } 
```

# c - 为什么从库中调用我的函数时会导致段错误？

> ID：13518342
> 
> 赞同：5
> 
> 时间：2012-11-22T18:30:21.367
> 
> 标签：c

此代码将向量（argv）转换为字符串，并打印出来。但是，如果从库 (my_vect2str) 调用 vect2str，则会发出警告：

```
warning: passing argument 1 of ‘puts’ makes pointer from integer without a cast 
```

运行时出现段错误。这里的函数 vect2str 与库中的函数 (my_vect2str) 完全相同。该库是在同一台计算机上编译的。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#include "../lib/my.h"

char *vect2str(char **str) {

if (str == NULL)
    return NULL;
if (*str == NULL)
    return NULL;

int num = 0;
char * a;

int i;
for(i = 0; str[i] != '\0'; )
    num += strlen(str[i++]);

num += i;
a = (char *) xmalloc(num * sizeof(char));

//Make new string
char space = ' ';
char *end = "";

int j;
for(j = 0; str[j] != NULL; j++) {
    strcat(a, str[j]);
    strcat(a, &space);
    }
strcat(a, end);
return a;
}

int main(int argc, char **argv) {

puts(vect2str(argv));

//This does not work
//puts(my_vect2str(argv));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:39:11.057

它在 cygwin 上编译得很好，并且`puts`可以接收一个 char 指针。
我看到的问题是您正在`strcat`使用指向单个字符的指针进行操作。

```
strcat(a, &space); 
```

工作方式`strcat`是从一个字符串复制到另一个字符串，直到找到一个终止空字符（'\0'），如果你不提供一个字符串，可能会发生奇怪的事情，为此更改它：

```
strcat(a, " "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:36:35.477

1) 首先

```
for(i = 0; str[i] != '\0'; ) 
```

这是错误的，因为 str[i] 是地址而不是字符，因此您必须与 NULL 地址而不是空字符进行比较。在这里之后怎么做

```
for(i = 0; str[i] != NULL; ) 
```

2）第二次定义空间如下

```
char space = " "; 
```

接着

```
 strcat(a, space); 
```

并不是

```
strcat(a, &space); 
```

3）我不知道是否`xmalloc()`将分配的内存设置为 0。如果没有，则必须将`a`数组中的第一个元素设置为`'\0'`.

```
a = (char *) xmalloc(num * sizeof(char));
a[0] = '\0'; 
```

# javascript - 基于另一个数组对包含对象的数组进行排序

> ID：13518343
> 
> 赞同：6
> 
> 时间：2012-11-22T18:30:21.680
> 
> 标签：javascript, arrays, sorting

> **可能重复：**
> [JavaScript - 基于另一个整数数组对数组进行](https://stackoverflow.com/questions/4046967/javascript-sort-an-array-based-on-another-array-of-integers)
> [排序 Javascript - 基于另一个数组对数组进行排序](https://stackoverflow.com/questions/13304543/javascript-sort-array-based-on-another-array)

如果我有这样的数组：

```
['one','four','two'] 
```

另一个像这样的数组：

```
[{
  key: 'one'
},{
  key: 'two'
},{
  key: 'four'
}] 
```

我将如何对第二个数组进行排序，使其`key`属性遵循第一个数组的顺序？在这种情况下，我想要：

```
[{
  key: 'one'
},{
  key: 'four'
},{
  key: 'two'
}] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:02:55.533

我们可以使用 sort() 函数来执行此操作，方法是向它传递一个进行比较的自定义函数。此函数必须返回给定的 3 个可能值`a`或`b`进行比较：

`return -1`如果`a`索引低于`b`

`return 0`如果`a`被认为等于`b`

`return 1`如果`a`索引大于`b`

考虑到这一点，我们可以定义如下函数：

```
function sortFunction(a,b){
    var indexA = arr.indexOf(a['key']);
    var indexB = arr.indexOf(b['key']);
    if(indexA < indexB) {
        return -1;
    }else if(indexA > indexB) {
        return 1;
    }else{
        return 0;       
    }
} 
```

此函数将接收您在数组中定义的对象，并找到该值在`arr`数组中的位置，即您要比较的数组。然后它比较索引，并根据需要返回值。

我们通过将函数传递给函数来使用这个函数`sort()`：

`testArray.sort(sortFunction)`

`testArray`您要排序的数组在哪里。

你可以看看这里，我在哪里做这个例子，你可以看到你的数组中的第二个对象在调用排序函数之前和之后被“警告”给你。 [http://jsfiddle.net/Sqys7/](http://jsfiddle.net/Sqys7/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T19:16:20.450

这是我的看法：

```
function orderArray(array_with_order, array_to_order) {
    var ordered_array = [], 
        len = array_to_order.length,
        len_copy = len,
        index, current;

    for (; len--;) {
        current = array_to_order[len];
        index = array_with_order.indexOf(current.key);
        ordered_array[index] = current;
    }

    //change the array
    Array.prototype.splice.apply(array_to_order, [0, len_copy].concat(ordered_array));
} 
```

示例实现：

```
var array_with_order = ['one', 'four', 'two'],

    array_to_order = [
        {key: 'one'},
        {key: 'two'},
        {key: 'four'}
    ];

orderArray(array_with_order, array_to_order);

console.log(array_to_order); //logs [{key: 'one'}, {key: 'four'}, {key: 'two'}]; 
```

通常的小提琴：http: [//jsfiddle.net/joplomacedo/haqFH/](http://jsfiddle.net/joplomacedo/haqFH/)

# ios5 - 在视图控制器类型的对象上找不到导航委托错误属性委托的弧

> ID：13518344
> 
> 赞同：0
> 
> 时间：2012-11-22T18:30:22.667
> 
> 标签：ios5, delegates, uinavigationcontroller, automatic-ref-counting, syntax-error

我希望有人可以在下面阐明我的问题。

当我在父视图中声明委托时，我在 viewcontroller 类型的对象上找不到属性委托：

![委托错误](../Images/ea82da3ee74749e5fffb1f1cb2ad7c3c.png)

这是父 .h 文件中的相关代码：

```
@protocol ModalViewDelegate 
- (void)didReceiveFrequencyMessage:(NSString *)message;
@end

@interface jhsManageRemindersViewController : UIViewController<UIAlertViewDelegate, UINavigationControllerDelegate, ModalViewDelegate> 
```

这就是我称之为子视图的地方：

```
 jhsScheduleViewController *jhsScheduleController = [[jhsScheduleViewController alloc]
                                              initWithNibName:@"jhsScheduleViewControllerr" bundle:nil];

jhsScheduleController.delegate = self;
// Create the navigation controller and present it modally.
UINavigationController *navigationController = [[UINavigationController alloc]
                                                initWithRootViewController:jhsScheduleController];
navigationController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:navigationController animated:YES]; 
```

这是我孩子 .h 文件的一部分

```
@protocol ModalViewDelegate ;

@interface jhsScheduleViewController : UIViewController {
    //id<ModalViewDelegate> delegate;
//       __unsafe_unretained id <ModalViewDelegate> _delegate;
    __weak id <ModalViewDelegate> delegate;
    NSMutableString *message;    
}

@property ( weak) id<ModalViewDelegate> delegate;
//@property (nonatomic, weak) id<ModalViewDelegate> delegate;

@property (nonatomic, retain) NSMutableString *message; 
```

最后，这是我的 .m 用法

```
@synthesize delegate;
//@synthesize delegate = _delegate; 
```

我已经查看并尝试了基于 Stackoverflow 问题和此推荐博客文章的各种解决[方案](http://vinceyuan.blogspot.com/2011/06/wwdc2011-session-323-introducing.html)。我已经在注释掉的代码中包含了一些我尝试过的解决方案，仅供参考。

我从 iOS4 应用程序中的代码开始，但这会产生错误。作为脚注，这是一个带有 TabBarController 和 NavigationController 的应用程序

有人可以告诉我如何解决这个问题，以便解决委托错误吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:55:43.187

好吧，我不确定问题是什么。但作为最后的手段，我保存了每个文件，然后尝试构建它，Xcode 仍然报告错误，这很有效。

实际上， initWithNibName 中有一个错误，但它运行良好，直到它到达那个点，并纠正错字修复了这个问题。同样，我不确定问题出在哪里，但我似乎正在路上。

# javascript - 用 Javascript 对象替换窗口或文档对象

> ID：13518347
> 
> 赞同：3
> 
> 时间：2012-11-22T18:30:54.653
> 
> 标签：javascript, dom

有没有办法替换“窗口”或“文档”对象？我基本上想要的是提供某种 JavaScript 代理，我想防止用户在页面上获得“一些”（只有一些！这很重要）DOM 元素。“用户”是指任何第三个 patty 脚本。

我可以做这个：

```
document.getElementsByTagName("a")
//NodeList[129]
document.getElementsByTagName = function(){}
//function (){}
document.getElementsByTagName("a")
//undefined 
```

但是我可以做些什么`document.all`来替换 DOM 对象字段以使其仅返回 DOM 元素的“某些”？

**UPD**：如果有办法用一些 JavaScript 对象替换“文档”对象，这会更好

**UPD2**：我不在乎您的方法是否不适用于“旧”浏览器。所以我对任何适用于“A”分级机的解决方案都很满意

**UPD3**：我知道 JavaScript 中不存在 100% 的安全性，我不想阻止黑客“HACKING”，我知道这是不可能的，我想阻止开发人员为我的“自制”编写“插件”框架，做愚蠢的事情..

**UPD4**：好的，我无法替换 Document 或 Window，但我至少可以替换所有可用于返回“DOM”元素的“字段”或“函数”吗？像“document.getElementById”或“document.all”？

**UPD5**：用户`@pebbl`建议的东西“接近”我想要的东西

```
function a(window, document){
   /// in here window and document should be numerics
   alert(window);
   alert(document);
}

a(123,456); 
```

但他的解决方案有一个大问题[http://jsfiddle.net/kRLax/](http://jsfiddle.net/kRLax/)

**UPD6-7**：这是“完美”的一个（至少对我来说）

[http://jsfiddle.net/kRLax/12/](http://jsfiddle.net/kRLax/12/)

```
function Fx(){return function(){}}
function SafeThis(that){ 
    if (that == window) {
        return fakeWindow;
    } else if (that = document) {
        return fakeDocument;                    
    } else {
        return that;
    }
}
var fakeDocument = {
    write: function(a){ document.write(a) }
}
var fakeWindow = {
    document: fakeDocument
}

var moduleA = function(Function, window, document, eval){
    document.write(window + "<br>");
    var f = new Function("return this");
    document.write(f() + "<br>");
    var win = (function(){return this;})();
    document.write(win + "<br>");
    var e = eval("this"); 
    document.write(e + "<br>");
    document.write(this + "<br>");
    document.write(window + "<br>");
    document.write(document + "<br>");
    this.a = 1;
    document.write(JSON.stringify(this));
};

var moduleA_Fx = '!' + 
    moduleA.toString().replace(/\bthis\b/g,"SafeThis(this)") + 
    '(Fx,fakeWindow,fakeDocument,Fx)';

document.write(moduleA_Fx + "<br><br>");

eval(moduleA_Fx);
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:44:31.430

您只能重新分配可写属性，因此`document`和`window`不在讨论范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:45:51.377

全局属性是不可写的`"document"`，不可配置的，所以不，你不能。

```
// try this in global code
Object.getOwnPropertyDescriptor( this, 'document' ).writable // false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T18:49:22.837

您可以执行以下操作，但您必须在函数范围内评估外部脚本：

```
function a(window, document){
  /// in here window and document should be numerics
  alert(window);
  alert(document);
}

a(123,456); 
```

或者，如果您有一个服务器端代理，您可以使用包装的匿名函数重写他们的代码，然后在您的代理文档和窗口对象中调用该函数。

```
;(function(window, document){

  /// the unknown external code here.

})(windowProxy, documentProxy); 
```

然而，仍然有解决这个问题的方法，因为他们可能能够根据 JS 环境使用以下内容：

```
var win = (function(){return this;})(); 
```

您可能还必须包含其他集合以确保它们不可访问：

```
;(function(window, document, all, images, ...){ ... } 
```

但是，他们也可以`document`通过您允许他们访问的任何 dom 元素访问原始文件......

### 关于 UPD6

以防万一它有用，您可能还想堵住以下孔：

*   设置超时
*   设置间隔

以上都可以用来评估代码。

```
setTimeout('(function(){alert('+'th'+'is'+');})()'); 
```

另外，当您公开时`document.write`，这也是可行的：

```
document.write(
  '<img src="data:image/gif;base64,ERROR" '+
     'onerror="alert(th'+'is.ownerDocument);" />'
); 
```

并且您应该阻止访问`SafeThis`并重写目标代码中提及它的任何内容，否则它可以被覆盖：

```
SafeThis = function(that){return that;} 
```

除此之外，虽然它看起来很安全。我相信还有其他方法可以绕过它——如果你足够努力的话——但这真的取决于你认为可能的攻击者有多坚定；）

# arrays - Rails Actionmailer 根据包含在数组中的用户属性向特定的用户组发送电子邮件

> ID：13518352
> 
> 赞同：0
> 
> 时间：2012-11-22T18:31:42.940
> 
> 标签：arrays, ruby-on-rails-3.2, actionmailer

我有一个带有字符串列**访问权限的****Document**模型和一个带有字符串列**team的****User**模型。在**文档**中，我可以输入一系列项目以供**访问**，例如“员工、销售人员、经理”。同时，一个**用户**在**team**下只有**一项**。

 ******我正在尝试根据每个**user.team**是否包含在**Document.access**的数组中来向特定用户发送电子邮件。

**例如**，如果`Document.access = "sales, management"`，只有具有`team = "sales" or team = "management"`的用户会收到电子邮件。其他用户，例如 team = "accounting" 不会。

* * *

### 更新：

从我在这个[问题](https://stackoverflow.com/questions/5296687/rails-3-action-mailer-cannot-loop-to-send-emails)上收集到的信息来看，ActionMailer 似乎无法循环，所以我修改了我的 document_observer。现在我将循环部分移出邮件程序，**user.email 出错**了

`undefined method 'user' for`

如果我坚持使用像**'joe@net.com'**这样的字符串，正确数量的电子邮件就会发出，所以这部分似乎有效。现在只需将正确的电子邮件地址传递给消息。

下面是我的 document_observer 中的相关代码：

```
 def after_save(model)
   @users = User.all
   @users.each do |user|
     if model.access.include? user.team
       MultiMailer.doc_notification(model).deliver
     end
   end  
 end 
```

来自邮件程序的相关代码。如何为每封电子邮件传递**user.email ？**

```
def doc_notification(document)
  mail(:to => 'joe@net.com')
end 
```

* * *

### 最近更新：

好的，我刚刚切换了几行

```
MultiMailer.doc_notification(user).deliver 
```

和

```
def doc_notification(user) 
```

所以现在电子邮件会发送给每个正确的用户，但似乎我只是在扭转上述问题并将未知用户交易为未知文档。电子邮件需要引用刚刚更新的文档的 URL。

**我还应该提到 Document 和 User 之间没有关联。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:07:32.630

* * *

## 答案

来自**document_observer**

```
def after_save(model)
  @users = User.all
  @users.each do |user|
    if model.access.include? user.team
      MultiMailer.doc_notification(model, user).deliver
    end
  end
end 
```

来自**邮递员**

```
def doc_notification(document, user)
  @document = document
  mail(:to => user.email)
end 
```

**归功于 Triangle Ruby Brigade非常友善的[Nathaniel Talbott](http://www.meetup.com/raleighrb/members/259885/)，他亲自回答了我的问题。**我想有时走出家门会有所帮助。******

# facebook - 服务器端的 Facebook 访问令牌

> ID：13518354
> 
> 赞同：3
> 
> 时间：2012-11-22T18:31:49.653
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, facebook-ios-sdk, facebook-android-sdk

我正在尝试创建对用户 Facebook 资源（照片/相册/等）的**服务器端访问。**我希望用户使用其**本机移动应用程序进行身份验证****一次**，并且服务器将能够在没有用户交互的情况下访问用户的数据。

 **我试图了解我需要采取哪些步骤才能使其正常工作。

我读过 Facebook 的：[Login for Server-side Apps](https://developers.facebook.com/docs/howtos/login/server-side-login/)，但我不明白如何使用其中提出的方案——因为我的服务器**与用户交互无关**（我无法将用户重定向到某个登录对话框）——无论用户是否使用其移动应用程序，服务器都在后台执行自己的操作。例如，令牌到期时我应该怎么做？

更重要的是，我希望用户能够在移动设备本身上执行直接的 Facebook 操作，而无需服务器干预。

正如我所看到的，这是我期望的流程：

1.  用户启动本机移动应用程序。
2.  用户在本机移动应用程序上使用 Facebook 的 SDK 进行身份验证。
3.  用户收到一个**特殊的 token**，可以在服务器端转换为**access-token**。
4.  令牌将被发送到服务器并存储在那里。
5.  如果服务器需要访问用户的 Facebook 数据，它会使用这个特殊的令牌并将其转换为访问令牌。
6.  当令牌过期时 - 服务器可以使用特殊令牌扩展它，无需任何用户交互。

*身份验证后应从移动应用程序向服务器发送哪些数据。服务器应该如何使用这些数据随时访问用户的 Facebook 资源？*

我正在为服务器使用 C# Facebook SDK。但我认为这并不重要，我需要了解机制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T06:23:26.110

如果用户不继续使用应用程序，令牌就会过期。这是设计使然——如果用户停止使用应用程序，应用程序不应继续访问用户的帐户。

当用户登录您的应用程序时，会为您的应用程序提供一个令牌，以及该令牌的到期日期。您可以从您的客户端或服务器使用该令牌，直到它过期。但是，如果用户不继续使用您的应用程序，您的服务器将无法扩展令牌。

如果用户继续使用您的应用程序，您将有机会更新您的服务器令牌。例如，在 Android 和 iOS SDK 中，如果用户使用您的应用程序发出 facebook 请求，令牌会自动刷新。届时，您可以将刷新的令牌传输到您的服务器。**

# string - PHP - T_STRING 的含义

> ID：13518359
> 
> 赞同：2
> 
> 时间：2012-11-22T18:32:14.703
> 
> 标签：string, php

有人可以解释 php 中的 T_STRING 错误是什么吗？

它在许多 php 错误消息中都可以找到，但 T_STRING 到底是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:34:46.730

`T_STRING`引用脚本源代码中的文字字符串对象。就像语言结构（print、if、...）一样，它们在句法层面上具有特殊的含义。

因此，提及“意外的 T_STRING”之类的错误通常指向语法错误，编译器在该字符串中发现了它预期的其他内容，通常是右括号或其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:35:07.577

T_STRING 正是您所期望的，一个字符串标记......通常是一个函数的名称（如果您在一行中遗漏了一个分号，您可能会看到它，而下一行代码包含一个函数调用）或变量（您忘记了 $ 变量指示符）

# php - 表格中的第一个表格未提交

> ID：13518360
> 
> 赞同：0
> 
> 时间：2012-11-22T18:32:15.437
> 
> 标签：php, forms

我有一个 while 循环生成的表，如下所示：

```
<table>
<tr>
    <th>Date</th>
    <th>Pushups</th>
    <th>Delete</th>
</tr>
<tr>
    <td>11-01-2012</td>
    <td>28</td>
    <td>
        <form action="../workout_tracker/delete_pushups.php" method="get" id="Delete1">
            <input type="hidden" value="253" name="pushups_id" />
            <input type="hidden" value="/workout_tracker/pushups-tracker/" name="current_page" />
            <input type="submit" value="Delete" form="Delete1" />
        </form>
    </td>
</tr>
<tr>
    <td>11-02-2012</td>
    <td>33</td>
    <td>
        <form action="../workout_tracker/delete_pushups.php" method="get" id="Delete2">
            <input type="hidden" value="246" name="pushups_id" />
            <input type="hidden" value="/workout_tracker/pushups-tracker/" name="current_page" />
            <input type="submit" value="Delete" form="Delete2" />
        </form>
    </td>
</tr>
<tr>
    <td>11-03-2012</td>
    <td>43</td>
    <td>
        <form action="../workout_tracker/delete_pushups.php" method="get" id="Delete3">
            <input type="hidden" value="39" name="pushups_id" />
            <input type="hidden" value="/workout_tracker/pushups-tracker/" name="current_page" />
            <input type="submit" value="Delete" form="Delete3" />
        </form>
    </td>
</tr>
</table> 
```

问题是表格第一行中的第一个“删除”表单没有提交。当我点击时，它什么也没做。

页面上方有一个表单，但它已关闭并已验证。我在 Chrome、Firefox 和 IE 中得到相同的响应。

**更新：** 在标记中更高的不同形式（未显示）中，表单标签尚未关闭。我有`</for>`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:41:15.370

其他任何删除表单是否有效，或者它只是第一个？

打开浏览器控制台/调试器并查找页面加载或单击按钮时的任何错误。

唯一看起来可能存在问题的是提交输入元素的表单属性。下面的链接显示它是 HTML5 中的新功能，唯一不支持它的浏览器是 IE。可能是您需要更新到最新版本的浏览器。

[http://www.w3schools.com/tags/att_input_form.asp](http://www.w3schools.com/tags/att_input_form.asp)

# python - 动态迭代子列表并存储其值

> ID：13518367
> 
> 赞同：0
> 
> 时间：2012-11-22T18:32:48.557
> 
> 标签：python, arrays

> **可能重复：**
> [在 Python 中展平（不规则）列表列表](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

有没有一种方法可以存储结果而不必编写每个子列表名称？每个数组中的数字只是我想要做的例子。先感谢您。

```
 _store = []

        _arr4 = [1, 2, 3, 4, 5, 6, 7, 8, 9]
        _arr3 = [1, 2, 3, _arr4, 5, 6, 7, 8, 9]
        _arr2 = [1, 2, 3, 4, 5, 6, _arr3, 8, 9]
        _arr = [1, 2, 3, _arr2, 5, 6, 7, 8, 9]

        for _value in _arr:

            #If value is a list get it, go over that list and so on
            if isinstance( _value, list ):

                _store.append(_value)
                _sub_list = _value

                if isinstance( _sub_list, list ):

                    _store.append( _sub_list)
                    _sub_sub_list = _sub_list

                    if isinstance( _sub_sub_list, list ):

                        _store.append( _sub_list)
                        _sub_sub_sub_list = _sub_list

                        #and so on...

        print _store 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:37:13.050

使用递归：

```
a = [1,2,3]
b = [4,a,5]
c = [6,b,7]

def add_to(input, output):
    for x in input:
        if isinstance(x, list):
            add_to(x, output)
        else:
            output.append(x)

result = []

add_to(c, result) # now result = [6, 4, 1, 2, 3, 5, 7] 
```

可以通过使用生成器来消除通过递归传递输出 ref 的非 Python 性：

```
def flatten(input):
    for x in input:
        if isinstance(x, list):
            for y in flatten(x):
                yield y
        else:
            yield x

result = list(flatten(c)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:42:15.240

您可以尝试使用递归：

```
arr4 = [1, 2, 3, 4, 5, 6, 7, 8, 9]
arr3 = [1, 2, 3, arr4, 5, 6, 7, 8, 9]
arr2 = [1, 2, 3, 4, 5, 6, arr3, 8, 9]
arr = [1, 2, 3, arr2, 5, 6, 7, 8, 9]

def get_store(array):
    store = []
    for item in array:
        if isinstance(item, list):
            store.extend(get_store(item))
        else:
            store.append(item)
    return store

print get_store(arr) 
```

...输出：

```
[1, 2, 3, 1, 2, 3, 4, 5, 6, 1, 2, 3, 1, 2, 3, 4, 5, 6, 7, 8, 9, 5, 6, 7, 8, 9, 8, 9, 5, 6, 7, 8, 9] 
```

基本上，每当您注意到您正在执行某些操作并不断地嵌套或重复它，但难以将其转换为 for 循环时，这是您可以尝试递归的好兆头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T18:38:20.783

为什么不直接将列表序列化为 JSON？

```
import json
json.dumps(arr) 
```

# jquery-ui - jquery ui拖动元素而不按住鼠标按钮（跟随光标）

> ID：13518371
> 
> 赞同：1
> 
> 时间：2012-11-22T18:33:35.470
> 
> 标签：jquery-ui, mouse, jquery-ui-draggable

我试图在不按住鼠标按钮的情况下拖动元素。

我想要的行为是：

1.  我点击一个可拖动的项目
2.  在不按住鼠标左键的情况下拖动我的项目：只需将鼠标作为光标
3.  我单击一个可放置的容器以确认并附加我的项目

如果我`alert`在开始事件期间添加一个框，我可以模拟这种行为。

```
 start : function(){
        alert('test')
    }, 
```

这是小提琴：http: [//jsfiddle.net/QvRjL/103/](http://jsfiddle.net/QvRjL/103/)

如果没有警告框，如何编码这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:24:56.627

这是关于这个问题的一个很好的解决方案：[Trigger Click-and-Hold Event](https://stackoverflow.com/questions/14445375/trigger-click-and-hold-event)

[http://jsfiddle.net/VXbpu/1/](http://jsfiddle.net/VXbpu/1/)

[http://jsfiddle.net/vPruR/70/](http://jsfiddle.net/vPruR/70/)

```
var click = false;

$(document).bind('mousemove', function (e) {
    if (click == true) {
        $('#your_div_id').css({
            left: e.pageX,
            top: e.pageY
        });
    }
});

$('#your_div_id').click(function() {
    click = !click;
    return false;
});

$('html').click(function() {
    click = false;
}); 
```

# javascript - 在 Javascript 中使用哪种模式来启用用户覆盖/自定义核心框架？

> ID：13518378
> 
> 赞同：2
> 
> 时间：2012-11-22T18:34:18.460
> 
> 标签：javascript, paradigms

我们开发了一种移动应用程序套件，最初设计为无需任何用户代码即可运行。它是移动应用工作室的一部分，现在我们想通过 Javascript 启用“用户覆盖”。

现在我们正在尝试 3 个想法：

1.  事件模式
2.  钩子图案
3.  “猴子补丁”（现有功能的原型覆盖）

任何方式都有其优点和缺点。例如，

**当前使用 dojo 的订阅和发布实现**的事件模式****

 **优点很好：核心代码中的附加代码干净且最少。问题：代码执行已经发生，用户只收到核心发生的通知。为了应用他的定制，他需要反转更改并推出自己的代码。这有点混乱且不可靠，因为核心可能依赖于以后不再存在的东西。

**钩子图案**。可以说它的实现类似于“代表”

即，默认情况下，核心代码确实确定内容的和平是否可共享：

```
xapp.utils.getModuleViewCreationParameters = function (content, viewManager, selected,type,heading)
{
    var isShareable = false;

    if(type!=null)
    {
       isShareable=xapp.utils.isSharable(type);
    } 
```

为了使用户能够覆盖此行为但保持默认不变，我需要像这样扩展它：

```
xapp.utils.getModuleViewCreationParameters = function (content, viewManager, selected,type,heading)
{
    var isShareable = false;

    if(type!=null)
    {
       isShareable=xapp.utils.isSharable(type);
    }

    if(ctx && ctx.getShareDelegate && ctx.getShareDelegate() && ctx.getShareDelegate().isSharable){
        isShareable=ctx.getShareDelegate().isSharable(type);
    } 
```

现在，“ctx.getShareDelegate()”返回用户的实际类，可以用来覆盖默认行为。

优点：它仍然干净并且更直接地修改了核心的流程。缺点：它可能会导致某种意大利面条代码，但我不确定这一点。

我的最后一个想法：**原型修改又名猴子补丁**

优点：它当然允许任何核心覆盖，但是：缺点：用户代码依赖于太多假设，例如核心代码的函数签名保持不变。

好吧，毕竟我最喜欢的仍然是“钩子或委托模式”。

你能推荐任何替代方案或建议来解决这个问题吗？或者设计一个用户可定制的 JS API ？**

# c# - 在继承的抽象类中重写抽象方法

> ID：13518381
> 
> 赞同：9
> 
> 时间：2012-11-22T18:34:34.620
> 
> 标签：c#, inheritance, abstract-class, multi-level, abstract-methods

好的，所以基本上我有以下问题：我试图让一个抽象类继承另一个具有抽象方法的抽象类，但我不想在它们中的任何一个中实现抽象方法，因为第三个类继承自两者其中：

```
public abstract class Command
{
      public abstract object execute();
}

public abstract class Binary : Command
{
     public abstract object execute(); //the issue is here
}

public class Multiply : Binary
{
     public override object execute()
     {
           //do stuff
     }
} 
```

我正在尝试将二进制命令与一元命令分开，但不想/不能在其中实现执行方法。我想过让 Binary 覆盖抽象方法（因为它必须），然后抛出一个未实现的异常。如果我让它覆盖，那么我必须声明一个主体，但如果我让它抽象，那么我“隐藏”了继承的方法。

有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T18:37:24.843

您不需要`execute()`在 Binary 类中声明，因为它已经从 Command 继承。抽象方法不需要由其他抽象类来实现——需求被传递给最终的具体类。

```
public abstract class Command
{
    public abstract object execute();
}

public abstract class Binary : Command
{
    //the execute object is inherited from the command class.
}

public class Multiply : Binary
{
    public override object execute()
    {
        //do stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T18:37:13.493

完全省略`execute()`in的声明`Binary`。由于`Binary`也是抽象的，因此您*不必*实现其祖先的任何抽象方法。

# dictionary - 我怎样才能在groovy中做一个有条件的collectEntries

> ID：13518386
> 
> 赞同：12
> 
> 时间：2012-11-22T18:34:55.810
> 
> 标签：dictionary, collections, groovy

是否可以像 collect 这样有条件的 collectEntries ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T18:45:24.120

```
[ a:1, b:2, c:3, d:4 ].findAll { it.value > 2 } 
```

应该这样做

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-27T14:20:37.130

它不像[蒂姆耶茨使用 findAll 的回答](https://stackoverflow.com/a/13518507/217324)那样简洁；但只是为了记录，您*可以*使用它`collectEntries`来执行此操作：

```
[ a:1, b:2, c:3, d:4 ].collectEntries { 
    it.value > 2 ? [(it.key) : it.value] : [:] } 
```

评估为

```
[c:3, d:4] 
```

[在这个答案中使用“${it.key}”](https://stackoverflow.com/a/13518570/217324)是一个错误，密钥最终将成为 GStringImpl 类的实例，而不是字符串。答案本身在 REPL 中看起来没问题，但如果你检查它是什么类，你会发现它是错误的：

```
groovy:000> m = [ a:1, b:2, c:3, d:4 ]
===> [a:1, b:2, c:3, d:4]
groovy:000> m.collectEntries { ["${it.key}" : it.value ] }
===> [a:1, b:2, c:3, d:4]
groovy:000> _.keySet().each { println(it.class) }
class org.codehaus.groovy.runtime.GStringImpl
class org.codehaus.groovy.runtime.GStringImpl
class org.codehaus.groovy.runtime.GStringImpl
class org.codehaus.groovy.runtime.GStringImpl
===> [a, b, c, d] 
```

即使字符串看起来相同，试图将 GroovyStrings 等同于普通字符串的代码也会评估为 false，从而导致难以弄清楚的错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T18:50:50.387

这应该有效：

```
[a:1, b:2, c:3, d:4].collectEntries {
    if (it.value > 2)
        ["${it.key}": it.value]
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-08-07T13:11:07.833

添加其他内容后，它现在可以工作了。谢谢

```
[a:1, b:2, c:3, d:4].collectEntries {
    if (it.value > 2){
        ["${it.key}": it.value]
    }else{
      [:]
    }
} 
```

# jquery - jQuery Graph（节点）可视化热图

> ID：13518387
> 
> 赞同：1
> 
> 时间：2012-11-22T18:34:57.987
> 
> 标签：jquery, graph, graph-visualization

有谁知道一个 jQuery 库，它可以进行图形可视化，但允许您设置节点的大小。我想用它来表示在不同系统集合中显示的错误数量。

示例数据（其中右/下 = 孩子）：

```
(25) -> (100) -> (1)
              -> (500) 
```

图表：

![在此处输入图像描述](../Images/84e88313f7178586d38bb3eaffa54320.png)

谢谢你的时间，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-30T17:50:46.197

根据我最近对类似需求的研究，我有三个很好的线索，但没有一个是 JQuery 插件（尽管可以将它们变成一个插件）。它们都与 JQuery 并排兼容...

1.  [美人鱼](https://github.com/knsv/mermaid)
2.  [细胞景观.js](http://js.cytoscape.org)
3.  [vis.js](http://visjs.org)

Mermaid 很简单，您可能喜欢图形描述语法（如旧的 ATT/Bell Labs 'dot' 语言），但它可能不会（准确地）将节点放置在您想要的位置。

Cytoscape.js 和 Vis.js 都很棒，易于使用且功能强大。它们之间的一个区别是，Cytoscape.js 渲染到画布，而 vis.s 渲染到 SVG。有一个[解释点语言的 vis.js 的快速演示。](http://visjs.org/examples/network/15_dot_language_playground.html)

# javascript - microsoft jscript 运行时错误：在 asp mvc 应用程序中重新声明 const 属性

> ID：13518390
> 
> 赞同：0
> 
> 时间：2012-11-22T18:35:04.727
> 
> 标签：javascript, asp.net-mvc-3

我刚刚打开了之前正在运行和编译的项目，没有任何问题，现在当我运行它时，我得到了

```
microsoft jscript runtime error: redeclaration of const property 
```

经过仔细检查，我在 Includes 部分的两个页面上声明和定义了相同的变量

```
@section Includes {  
      <script type="text/javascript">  

        var detailsPath = "testpathValue";
      </script>     
} 
```

我在一个只在一个地方定义的变量上也遇到了同样的错误。

我如何摆脱这个 JS 错误，正如我之前提到的，这不是问题。

# javascript - 带有原型函数 name.argument 的 JavaScript 函数调用如何工作？

> ID：13518392
> 
> 赞同：1
> 
> 时间：2012-11-22T18:35:07.420
> 
> 标签：javascript

带有原型函数 name.argument 的 JavaScript 函数调用如何在以下程序中工作？

```
 function getLAdd() {
     // this sets all the variables containing positions of ball and bar with their respective ids.
     var ladd = 0;
     var pball = $("#ball");
     var pbar = $("#bar");
     var bar_position = pbar.position();
     var ball_position = pball.position();
     if (ball_position.top >= window.innerHeight - 100) {
         if (ball_position.left - 10 >= bar_position.left && ball_position.left - 10 <= bar_position.left + 100) {
             ladd = -2;
         }
         if (ball_position.left + 10 <= bar_position.left + 200 && ball_position.left + 10 >= bar_position.left + 100) {
             ladd = 2;
         }
     }
// how does getLAdd.ladd work ? Is this a type of dynamic call ?
     if (ladd == 0) {
         ladd = getLAdd.ladd;
     }
     if (ball_position.left <= 15 || ball_position.left >= window.innerWidth - 40) 
         ladd = -ladd;

     getLAdd.ladd = ladd;
     return ladd;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:42:33.733

JavaScript 中的函数是对象，因此您可以向它们添加属性。

在这段代码中，一个名为的属性`ladd`已添加到`getLAdd`函数中，并且正在此行中检索：

```
ladd = getLAdd.ladd; 
```

并且正在这条线上更新：

```
getLAdd.ladd = ladd; 
```

* * *

你可以对任何函数做同样的事情。

```
function f() {
       // get the property
    console.log(f.foo); // bar
}

   // add a property to the function object
f.foo = "bar";

   // get the property
console.log(f.foo); // bar

   // call the function
f(); 
```

# umbraco - 文件夹媒体类型重复删除允许的子节点类型

> ID：13518395
> 
> 赞同：0
> 
> 时间：2012-11-22T18:35:14.657
> 
> 标签：umbraco, media-type

我用 3 层系统设置了 Umbraco 4.7.2：

质量检查 -> 阶段 -> 产品

我有一个网站编辑器，他在 STAGE 环境中工作，然后随意发布到 PROD。我们现在有一个关于文件夹媒体类型的零星问题，它会删除允许的子节点的设置（选中的复选框）。

这是 Umbraco 安装附带的文件夹媒体类型，在我创建它们时添加了媒体类型。

我正在考虑删除媒体类型并重新创建它，但我发现了 Umbraco 不太聪明的困难方式。

# java - SoundPool 流

> ID：13518399
> 
> 赞同：0
> 
> 时间：2012-11-22T18:35:32.317
> 
> 标签：java, android, soundpool

所以我有 soundpool OnLoadCompleteListener ，它有这个代码 mStreamId = soundPool.play(sampleId, 1, 1, 1, 0, 1f); 我有 2 个按钮可以播放不同的声音池。我使用 mStreamId 来停止声音池。我的问题是，当我单击第一个按钮并播放声音并且单击第二个按钮时，它将停止第一个按钮的声音。这是我的代码：

```
 public class MainActivity extends Settings {
        SoundPool mSoundPool;
        int mSoundId;
        int mStreamId = 0;
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
    mSoundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
            mSoundPool
                    .setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {
                        public void onLoadComplete(SoundPool soundPool,
                                int sampleId, int status) {
                            mStreamId = soundPool.play(sampleId, 1, 1, 1, 0, 1f);
}
                });

    }
//OnClick
public void button1(View view) {
        if (mStreamId != 0) {
            mSoundPool.stop(mStreamId);
        }

        String path = getFullFilePath(getApplicationContext(), et1.getText()
                .toString());
        mSoundId = mSoundPool.load(path, 1);
    }
public void button2(View view) {
        if (mStreamId != 0) {
            mSoundPool.stop(mStreamId);
        }

        String path = getFullFilePath(getApplicationContext(), et2.getText()
                .toString());
        mSoundId = mSoundPool.load(path, 1);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T04:15:19.420

因为你告诉它。如果您希望声音播放完成，请删除 stop 方法调用。Soundpool 将在播放声音时从池中返回下一个可用流。

# android - 获取实际角度 postRotate

> ID：13518400
> 
> 赞同：0
> 
> 时间：2012-11-22T18:35:43.137
> 
> 标签：android

也许我在问一些明显的问题，但我找不到解决方案，所以我有一个图像视图，它是一把弩，我希望它射击到我在屏幕上触摸的位置，我使用 postRotate 来旋转它在哪里你触摸，问题是每次你触摸它都会给旧的角度增加一个新的角度，依此类推。有没有办法获得 ImageView 的实际角度？

```
 int scrWidth  = getWindowManager().getDefaultDisplay().getWidth();
        int scrHeight = getWindowManager().getDefaultDisplay().getHeight();

        float x=event.getX();//capturamos x e y
        float y=event.getY();
        float i=0;

        if(y<(scrHeight/2)){
            float yf=(scrHeight/2)-y;//obtenemos la y respecto a la mitad de la pantalla 
            double alfa=Math.toDegrees(Math.atan2(yf, x));//encontramos el angulo para las x e y encontradas
            float beta= (float) alfa; //convertimos a float para rotar
            beta=beta+i;                
            matrix.postRotate(-beta, ballesta.getWidth()/2,ballesta.getHeight()/2); //primer valor angulo, segundo y tercero punto de ancla de la imagen
            ballesta.setImageMatrix(matrix);                
        }
        if(y>(scrHeight/2)){
            float yf=y-(scrHeight/2);//obtenemos la y respecto a la mitad de la pantalla
            double alfa=Math.toDegrees(Math.atan2(yf, x));//encontramos el angulo para las x e y encontradas
            float beta= (float) alfa; //convertimos a float para rotar
            beta=beta+i;
            matrix.postRotate(beta, ballesta.getWidth()/2,ballesta.getHeight()/2);
            ballesta.setImageMatrix(matrix);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:37:12.887

没关系，我已经找到了解决方案，而且我错过了问题中的信息（所有代码都在 ontouch 事件中）。解决方案是在 ontouch 事件之外声明一个静态变量，然后我将每次旋转的角度保留在该变量中，并在事件开始时旋转减去静态变量。不确定我是否很清楚（我很困：P）。

# algorithm - 覆盖目标的传感器的最低成本子集

> ID：13518402
> 
> 赞同：1
> 
> 时间：2012-11-22T18:35:45.797
> 
> 标签：algorithm, dynamic-programming

我在动态编程中有一个问题，如果我有一组覆盖目标的传感器（一个目标可能被多个传感器覆盖），如果知道每个传感器都有自己的成本，我如何才能找到传感器的最小成本子集？我对此想了很多，但我无法到达递归论坛来编写我的程序？贪心算法有时会给我错误的最小成本子集，我的问题是传感器在覆盖目标时重叠，有什么帮助吗？

例如：我有一组成本/重量 = {s1:1,s2:2.5,s3:2} 的传感器，我有三个目标 = {t1,t2,t3}。传感器覆盖范围如下：={s1:t1 t2,s2:t1 t2 t3,s3:t2 t3} 我需要通过动态编程获得最小成本子集，对于上面的示例，如果我使用贪心算法我会得到 s1,s3 但是正确答案只有 s2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:09:16.677

检查第 3 节，它标记了 MWCDC 的动态编程算法

[https://docs.google.com/viewer?a=v&q=cache:5vPrmVg7jDMJ:www.cs.iit.edu/~wan/Journal/tcs10.pdf+&hl=en&gl=us&pid=bl&srcid=ADGEESglfvp6XtFIkqDZZ-E-Tun4AWPTZV_V7z32pTvJ05K6tdkCoefpsLAxPxdK44jYwYD -PMlLGthsaV8-ow63utalgWPnyLrUUBKhoTTVuYwUiKSHlCXU-HXKHVeHvh4&sig=AHIEtbQGka8F39MaT8yAy4G9Kvv8TPsvJA](https://docs.google.com/viewer?a=v&q=cache:5vPrmVg7jDMJ:www.cs.iit.edu/~wan/Journal/tcs10.pdf+&hl=en&gl=us&pid=bl&srcid=ADGEESglfvp6XtFIkqDZZ-E-Tun4AWPTZV_V7z32pTvJ05K6tdkCoefpsAxPxdK44jYDvPNLDEwYI8uK-PMlLGthsaV8-ow63utalgWPnyLrUUBKhoTTVuYwUiKSHlCXU-HXKHVeHvh4&sig=AHIEtbQGka8F39MaT8yAy4G9Kvv8TPsvJA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:30:12.403

我想到了一些东西，但我对它不是 100% 有信心，它是这样的：

```
S = {s1 : 1, s2 : 2.5, s3 : 2}
M = {s1 : t1t2, s2 : t1t2t3, s3 : t2t3} 
```

现在，我们构建一个表示`target x sensor`地图的矩阵：

```
[1, 1, 0]
[1, 1, 1]
[0, 1, 1] 
```

所以行是目标`(t1 -> R0, t2 -> R1 etc.)`，列表示覆盖它们的传感器。

接下来，我们逐行处理，同时收集将覆盖当前目标集的传感器列表。例如：

```
Row - 0:
{t1} -> [s1 : 1], [s2 : 2.5] 
```

请注意，我们正在构建一个答案列表。然后我们继续到下一行，我们需要添加`t2`到我们的目标集，同时计算这样做所需的最小传感器重量。

```
Row - 1:
{t1, t2} -> [s1 : 1], [s2 : 2.5] 
```

请注意，RHS 上没有任何变化，因为两者都`s1`覆盖`s2`了`t2`。接下来是最后一行：

```
Row - 2:
{t1, t2, t3} -> [s1, s3 : 3], [s2 : 2.5] 
```

请注意，我必须添加`s3`到第一个答案，因为它具有最小的权重覆盖`t3`。

最后浏览答案列表会发现这`[s2 : 2.5]`是最好的候选人。

现在，我对动态编程没有那么自信，所以不确定我在这里所做的是否正确。如果有人可以确认/质疑我在这里所做的事情，那就太好了。

**编辑：**根据传感器的重量对列进行排序可能是有意义的。这样就可以轻松选择覆盖给定目标的重量最小的传感器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:46:01.790

这是我的建议，它不是动态编程，而是我能想到的最好的，这个问题很有趣，值得讨论。

* * *

将“部分解决方案”定义为包含目标、包含传感器、未决目标集合、成本的`(T,S,P,C)`元组。`T``S``P``C`

`W`是部分解决方案的当前工作集，最初仅包含`({}, {}, X, 0)`，即成本为零，非空只是未决目标的集合。`W`可以作为堆维护。

```
W = { ({}, {}, X, 0) }
repeat
  p = select and remove from W the partial solution with the minimum cost
  if p.P is empty
     return p
  t = select from p.P the target, covered by the minimum number of sensors
  for each sensor s, covering t, which is not in p'.S
     p' = new partial solution, copy of p;
     p'.S += {s};
     p'.C += cost(s);
     for each target t' covered by s
       p'.T += {t};
       p'.P -= {t};
     end for
     W += {p'}
  end for
end repeat 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T13:49:30.460

这是我解决这个问题的算法。它是解决问题的递归方法。

伪代码：

```
MinimizeCost(int cost , List targetsReached, List sensorsUsed, int current_sensor) {

if(targetsReached.count == no_of_targets ) {
    if(cost < mincost ) {
          mincost = cost;
          minList = sensorsUsed;
            }       
    return;
    }

   if(current_sensor > maxsensors)
         return;
   else {
         // Current Sensor is to be ignored 
     MinimizeCost(cost , targetsReached, sensorsUsed, current_sensor +1 );

         // Current Sensor is Considered 
     int newcost = cost + sensor_cost[current_sensor];  
     sensorsUsed.Add(current_sensor);
     AddIfNotExists(targetsReached, targets[current_sensor]);
     MinimizeCost(newcost, targetsReached, sensorsUsed, current_sensor+1);
  }
} 
```

如果不需要这些详细信息，可以避免使用 Sensors_Used 列表。

如果可以将 TargetsReached 列表映射到 int，则可以对此进行进一步的记忆。然后可以保存 [Current_Sensor, TargetsReached] 值并在需要时使用以避免重复。希望这可以帮助。不过可能有更好的方法。

# linux-device-driver - add_disk() 挂在 insmod 上

> ID：13518404
> 
> 赞同：6
> 
> 时间：2012-11-22T18:35:48.670
> 
> 标签：linux-device-driver, insmod

我正在编写一个 Linux 块设备驱动程序，并且我有很多初始化工作。但是，当我最终调用时`add_disk()`，模块在`insmod`.

有问题的片段在这里：

```
set_capacity(gendisk, dev->nsectors);
add_disk(gendisk);

//this line is never reached 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T18:35:48.670

这似乎是由于在添加磁盘`set_capacity()` *之前设置了容量造成的。*根据[这个邮件列表](http://osdir.com/ml/linux.enbd.general/2002-10/msg00177.html)，`add_disk`应该在 gendisk 上调用`gendisk->capacity = 0`，否则它会挂起`check_partition()`。

以下似乎有效：

```
set_capacity(gendisk, 0)
add_disk(gendisk);
set_capacity(gendisk, dev->nsectors); 
```

# powershell - 返回类型之谜

> ID：13518407
> 
> 赞同：1
> 
> 时间：2012-11-22T18:35:55.593
> 
> 标签：powershell, return-type

我在 PowerShell 中有如下内容

```
function x { 
    $result = New-Object 'System.Object[,,]' 1,1,1 
    'Type in function is: ' + $result.getType()
    $result[0,0,0] = 'dummy-value'
    return $result    
}

$result = x
$result.GetType() 
```

奇怪的是，结果类型在方法中是Object[,,]，但在外面突然变成了Object[]。对于我正在使用的一些 .Net 库，我基本上需要一些 Object[,,] 类型的参数。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:43:20.870

要了解发生了什么，只需尝试输入：

```
PS C:\temp> $result[0]
Type in function is: System.Object[,,]
PS C:\temp> $result[1]
dummy-value 
```

解释是将函数输出的所有内容放入数组中。

要做你想做的事，你必须写这个（不要忘记 $result 之前的 , ）：

```
function x { 
    $result = New-Object 'System.Object[,,]' 1,1,1 
    $result[0,0,0] = 'dummy-value'
    return ,$result    
} 
```

然后 ：

```
PS C:\temp> $a = x
PS C:\temp> $a.gettype()

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     True     Object[,,]                               System.Array 
```

# windows - 查找脚本或批处理文件，根据部分文件名将主目录中的图片分类到各自的子目录中

> ID：13518408
> 
> 赞同：2
> 
> 时间：2012-11-22T18:36:00.673
> 
> 标签：windows, batch-file, rename

我有这样命名的文件，这些文件分为三个部分，用连字符分隔。

```
Motorcycle-001-01.jpg
Motorcycle-001-02.jpg
Motorcycle-001-03.jpg

Motorcycle-002-01.jpg
Motorcycle-002-02.jpg
Motorcycle-002-03.jpg 
```

文件名的第一部分表示内容，即摩托车的图片。第二部分是系列，而第三部分是系列中的个别图片。

我有一个名为 Motorcycles 的完整目录，其中包含大约 6,000 张以这种方式命名的图片，一直到 Motorcycle-238-150.jpg

我的问题是是否有一个批处理文件或脚本可用于使用序列号或文件的第二部分对这些文件进行排序。我希望将我的摩托车目录中的所有文件移动到摩托车目录中的子目录中。例如，我希望将 Motorcycle-001-01.jpg 到 Motorcycle-001-150.jpg 移动到目录 001。然后将 Motorcycle-002-01.jpg 到 Motorcycle-002-135.jpg 移动到目录 002 和等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:16:27.273

```
@Echo OFF

   :: By Elektro H@cker

REM Series:
REM If you type "1"   it's equals to serie "001"
REM If you type "10"  it's equals to serie "010"
REM If you type "100" it's equals to serie "100"
REM You can change that at the pattern multi-comparisions

:: Introduces a number of serie...
:SELECT
Set /P "Serie=Select the serie to move >>"

:: Basic error handling
Echo "%SERIE%" | FINDSTR /I "[a-z]" 1>NUL && (
    Echo [-] Type only nums...
    Set "Serie="
    GOTO:SELECT
)

:: Set the correct pattern for selected serie
IF %SERIE% LEQ 999 IF %SERIE% GTR 99 (Set "PATTERN=%SERIE%")
IF %SERIE% LEQ 99  IF %SERIE% GTR 9  (Set "PATTERN=0%SERIE%")
IF %SERIE% LSS 999 IF %SERIE% LSS 99 IF %SERIE% LEQ 9 (Set "PATTERN=00%SERIE%")

:: Makes the serie directory
MKDIR ".\%PATTERN%\" 2>NUL

:: Move all the files of the serie to the folder
For /F "Tokens=*" %%@ in ('DIR /B "Motorcycle-%PATTERN%*"') do (
    Move "%%@" ".\%PATTERN%\" >NUL
    Echo [+] Moved: %%@
)

Pause&Exit 
```

# android - 单击列表视图后未选中复选框

> ID：13518409
> 
> 赞同：0
> 
> 时间：2012-11-22T18:36:01.753
> 
> 标签：android, android-listview, android-checkbox

我有一个活动，其中有一个列表视图，其中包含文本视图和右侧的复选框。我希望在单击列表视图项时选中复选框。（不在复选框上）。就像android用来一一检查要删除的消息一样。

谁能帮我解决这个问题？我关掉了

```
android:focusable="false 
```

和

```
android:focusableInTouchMode="false" 
```

在复选框上。

下面是我的列表视图项 xml。

```
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="1."
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@android:color/white" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="18dp"
    android:layout_toRightOf="@+id/textView2"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView1"
    android:layout_marginRight="22dp"
    android:layout_marginTop="-15dp" 
    android:focusable="false"
    android:focusableInTouchMode="false"/> 
```

这是我的代码：

```
list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
        // TODO Auto-generated method stub
        if(checkbox.isChecked())
            checkbox.setChecked(false);

        else
            checkbox.setChecked(true);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-13T06:04:57.290

我的回答为时已晚，但效果很好。

```
list.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
            CheckBox cb = (CheckBox) arg1.findViewById(R.id.checkBox1);
              TextView tv = (TextView) arg1.findViewById(R.id.textView1);
              cb.performClick(); //this will trigger the checkbox
              //do here 
              if(checkbox.isChecked())
                  checkbox.setChecked(false);
              else
                  checkbox.setChecked(true);
        }
}); 
```

如果您想从 BaseAdapter 获取变量值以获取检查位置或值等，请检查[此](https://stackoverflow.com/questions/7845587/pass-a-variable-value-from-base-adapter-to-activity?answertab=active#tab-top)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:25:30.227

添加`android:clickable="false"`到复选框。

在您的情况下，最好使用 CheckedTextView`ListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE)`来启用多选。

`AbsoluteSizeSpan/RelativeSizeSpan + SpannableStringBuilder`可以帮助您在一个 TextView 中实现不同的文本大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:20:11.100

下面是我修改以添加 CheckedtextView 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <CheckedTextView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/checkedTextView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:checkMark="?android:attr/listChoiceIndicatorMultiple"
            android:gravity="center_vertical"
            android:paddingLeft="6dip"
            android:paddingRight="6dip"
            android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

下面是在listAdapter的getView里面写的onClick方法

```
CheckedTextView chkBox = (CheckedTextView) findViewById(R.id.CheckedTextView01);
        chkBox.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v)
            {
                ((CheckedTextView) v).toggle();
            }
        }); 
```

# javascript - 单击时更改按钮图像并在 iframe 中显示结果，单击下一个按钮时，将原始按钮返回到第一个按钮

> ID：13518410
> 
> 赞同：1
> 
> 时间：2012-11-22T18:36:05.367
> 
> 标签：javascript, html, button, iframe

我有多个按钮（作为菜单）作为索引页面上的图像。我在所有按钮上都有翻转图像。点击后，结果显示在页面中间的 iframe 上。但我也希望该按钮更改并保持更改，直到单击下一个菜单按钮。

一键示例：

`<a href="faq.html" target="show" onmouseover="MM_swapImage('faq','','images/faq_y.jpg',1)" onmouseout="MM_swapImgRestore()"><img src="images/faq_b.jpg" alt="faq" name="faq" width="70" height="70" id="faq" /></a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:23:32.390

有更好的方法来实现你想要做的事情。我认为您正在使用 Dreamweaver。通常，Dreamweaver 附带的脚本非常糟糕且过时。

例如，不使用 Dreamweaver 附带的“翻转”图像更改功能。您可以只使用计划旧 css。

例如，如果您创建了一个两倍于按钮宽度的图像，并并排添加了按钮的两种状态。通过这样做，您现在可以使用 css 简单地将按钮的可见区域从一侧移动到另一侧，或者它将从“正常状态”显示为“悬停状态”

示例 CSS：

 `````
// button normally. Because we specify a width and height that is all that
// will be shown of our background. e.g. Our "normal state"
a.myButton {
    display:block;
    width:200px;
    height:80px;
    padding:10px;
    cursor:pointer;
    background:url(images/my-button-sprite.png) no-repeat top left;
}

// This will switch the button to our right side (or our "over state")
a:hover.myButton, a.myButton.active  {
    background:url(images/my-button-sprite.png) no-repeat top right;
} 
````  `关于您保持悬停状态直到单击另一个菜单项。

为“jQuery”做一个谷歌。它是一组使用 Javascript 的工具和插件。JavaScript 目前正在为您交换图像。

有 1,000 篇关于如何使用 css 和 jQuery 获得所需结果的教程。

查看这些资源：

[http://www.w3schools.com/css/](http://www.w3schools.com/css/) << CSS 是你的朋友.. 学习它..

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/) << 这将允许您（使用我提供的代码）做您想做的事情。

但我不会告诉你具体怎么做。因为那会破坏一半的乐趣！``

# c++ - 如何在opengl中更改对象的位置wrt相机？

> ID：13518412
> 
> 赞同：2
> 
> 时间：2012-11-22T18:36:15.437
> 
> 标签：c++, opengl

我需要更改对象相对于相机位置的位置。我的意思是，我的对象应该总是在镜头前。它应该跟随相机移动。我需要添加我的对象绘制功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:01:04.877

如果您使用的是旧式固定函数矩阵，则相对于相机定位对象的最简单方法是在从堆栈中*删除相机矩阵之后执行此操作。*例如，您可能有这样的矩阵设置：

```
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt(...); //Or other camera functions.
for(/*each object*/)
{
  glPushMatrix();
   //Setup object matrices.
  glTranslatef();
  glRotatef();

  //Setup object rendering.
  glDrawElements(); //Draw the object

  glPopMatrix();
} 
```

然后把它换成这样：

```
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glPushMatrix();
gluLookAt(...); //Or other camera functions.
for(/*each object*/)
{
  glPushMatrix();
   //Setup object matrices.
  glTranslatef();
  glRotatef();

  //Setup object rendering.
  glDrawElements(); //Draw the object

  glPopMatrix();
}
glPopMatrix(); //Remove camera matrix. MODELVIEW is now identity.
for(/*each camera-relative object*/)
{
  glPushMatrix();
   //Setup object matrices.
  glTranslatef();
  glRotatef();

  //Setup object rendering.
  glDrawElements(); //Draw the object

  glPopMatrix();
} 
```

如果您使用着色器，这会更容易。如果您有一个矩阵堆栈，只需执行与您在此处看到的相同的基于堆栈的操作。如果您正在做其他事情来构建矩阵，请不要将相机矩阵考虑到变换中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:42:12.630

您的对象位置应始终位于：

```
desiredPosition = cameraPosition + cameraDirection * offset; 
```

# android - Android布局树，人类可读的解释？

> ID：13518414
> 
> 赞同：1
> 
> 时间：2012-11-22T18:36:22.773
> 
> 标签：android, layout, size, screen

如果我今天写一条消息是为了获取有关 android 中文件夹树布局的详细信息。

我现在想警告你，我已经阅读了有关支持不同屏幕尺寸的官方文档的所有页面，它非常完整，但在我看来并不是真正的人类可读性。所以请不要只复制文档的链接。

我的问题很简单：

什么是布局文件夹的最佳组合，以确保最大程度地支持不同的屏幕尺寸？

在 Honeycomb 之前，我们有 layout、layout-large、layout-xlarge 等……没关系，但现在我们有 sw600dp、sw360dp、sw……Arggh stooop ！

就我而言，我必须为 android 制作一个应用程序，并且我需要确保获得最大的支持。

我手头有一些设备：

Galaxy Note 10.1 Galaxy Nexus Nexus S Nexus 7 和...三星 Galaxy Spica (GT-5700)

现在这是我的布局文件夹：

```
layout
layout-sw360dp (for Galaxy Nexus)
layout-sw600dp (for Nexus 7)
layout-sw720dp (for Galaxy Note 10.1)
layout-480x320 (for GT-5700) 
```

（和布局-*-土地）

我真的不确定做对了，我以为 Nexus S 会选择布局文件夹，但它需要 layout-480x320，为什么？

所以我有一些问题：

```
1\. Am I in the right direction?

2\. Is it always necessary to create folders layout-large, layout-xlarge ... ? If so what should I put inside?

3\. I do think the folder layout-480x320 is not a good solution, but I try to do things well and not make this folder is not enough. 
```

有人可以清楚地告诉我如何正确地做事吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:17:03.303

> 什么是布局文件夹的最佳组合，以确保最大程度地支持不同的屏幕尺寸？

这是不可能抽象地回答的。

> 我在正确的方向吗？

`-layout-WxH`已经被弃用了几年。

> 是否总是需要创建文件夹 layout-large, layout-xlarge ... ？

不。如果您不关心 Android 2.x`-large`或`-xlarge`设备（例如 Kindle Fire、NOOK）或 Android 3.1 设备（截至 2012 年 11 月的市场份额为 0.4%），那么跳过`-large`并`-xlarge`完全没问题。

但是，`-small`对于屏幕尺寸非常小的设备（对角线以下 3 英寸），如果您支持此类设备，则可能仍然与您相关。

> 我确实认为文件夹 layout-480x320 不是一个好的解决方案

正确的。

> 我尽量把事情做好，不做这个文件夹是不够的。

然后为`-layout`.

# c# - 如何在使用 VS2012 创建的 Blend 4 中编辑 ac# 项目？

> ID：13518417
> 
> 赞同：5
> 
> 时间：2012-11-22T18:36:44.717
> 
> 标签：c#, wpf, xaml, expression-blend

它总是说“解决方案“foo.sln”的格式不受支持，可能无法正确打开。您仍然要打开解决方案吗？” 如果我点击是，它会显示解决方案树，但是当我打开一个 xaml 文件时，它只显示它的 xaml 文本，而不是 UI 的渲染。

根据这个[http://blendinsider.com/technical/available-now-blend-for-visual-studio-2012-2012-08-15/](http://blendinsider.com/technical/available-now-blend-for-visual-studio-2012-2012-08-15/) Blend 4 是它的工作方式。所以我猜有些不对劲。

我有使用 vs2010 和 Blend 4 创建的旧项目。我仍然可以在 Blend 4 中打开并使用它们，同时在 vs2012 中处理它们。只有用 vs2012 创建的新项目对我来说似乎有这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T19:15:42.473

在 blend 4 中打开 VS2012 项目时，会显示如下消息：

![混合消息说它是一种不受支持的格式](../Images/eaeeca76cf86efa57efb9eb60f756c65.png)

问题是，如果您单击“是”按钮，它将打开项目，但如果项目的目标框架是 4.5，则混合只会显示 Xaml 代码，而不会显示其他代码。但是如果您的项目的目标框架是 4.0 或更低，那么您可以像以前一样编辑项目。

希望这可以帮助你...

# bash - 映射两个不同文件中的两个字符串，它们在 bash 的行首共享相同的数字

> ID：13518420
> 
> 赞同：0
> 
> 时间：2012-11-22T18:36:56.147
> 
> 标签：bash

我有两个文件。一个包含动物名称：

```
martin@potato:~$ cat animals.txt 
98 white elefant
103 brown dog
111 yellow cat
138 blue whale
987 pink pig
martin@potato:~$ 
```

..and other 包含他们居住的地方：

```
martin@potato:~$ cat places.txt 
98 safari
99
103 home
105
109
111 flat
138 ocean
500
987 farm
989
martin@potato:~$ 
```

动物.txt 中动物名称前的数字指向正确的位置。输出应该是这样的：

```
martin@potato:~$ ./animals.sh
safari  white elefant
home    brown dog
flat    yellow cat
ocean   blue whale
farm    pink pig
martin@potato:~$ 
```

bash 中将动物名称与位置映射的最优雅的解决方案是什么？

我是这样做的：

```
#!/usr/bin/env bash

#content of animals.txt file is stored into "$animals" variable using command substitution
animals=$(<animals.txt)

#content of places.txt file is stored into "$places" variable using command substitution
places=$(<places.txt)

#read(bash builtin) reads "$animals" variable line by line
while read line; do

    #"$animals_number" variable contains number in the beginning of the line; for example "98" in case of first line
    animals_number=$(echo "$line" | sed 's/ .*$//')
    #"$animals_name" variable contains string after number; for example "white elefant" in case of first line
    animals_name=$(echo "$line" | sed 's/[0-9]* //')
    #"$animals_place" variable contains the string after line which starts with "$animals_number" integer in places.txt file;
    #for example "safari" in case of first line
    animals_place=$(echo "$places" | grep -Ew "^$animals_number" | sed 's/.* //')
    #printf is used to map two strings which share the same integer in the beginning of the line
    printf '%s\t%s\n' "$animals_place" "$animals_name"

#process substitution is used to redirect content of "$animals" variable into sdtin of while loop
done < <(echo "$animals") 
```

但是，我不确定这是解决此问题的最优雅/最有效的方法。任何额外的方法/技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:46:06.320

```
while read id place;  do places[$id]=$place;                           done < places.txt
while read id animal; do printf '%s\t%s\n' "${places[$id]}" "$animal"; done < animals.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:34:36.310

```
join <(sort animals.txt) <(sort places.txt) | sort -n 
```

不幸的是，`join`没有“数字排序”选项，afaik；否则，您可以只`join`对两个文件进行排序，而不是对所有内容进行两次排序。（如果您将前导零放入文件中，它也可以在没有`sort`s 的情况下工作。）

最近的 ubuntus，可能还有其他 Linux 发行版，设置`LANG`为您假定的语言环境。这对于 是致命的`sort`，它是区域感知的，不像`join`; 上述工作，`join`并且`sort`必须同意分拣顺序。如果您收到如下错误：

```
join: /dev/fd/63:5: is not sorted: 98 white elefant 
```

然后试试这个：

```
( export LC_ALL=C;  join <(sort animals.txt) <(sort places.txt) | sort -n ) 
```

# tomcat - Tomcat 7 管理器脚本停止/启动应用程序

> ID：13518431
> 
> 赞同：0
> 
> 时间：2012-11-22T18:37:35.547
> 
> 标签：tomcat, deployment, tomcat7

我正在使用来自 7.0.32 的 Tomcat 7 和 Manager。

```
curl -X PUT http://user:password@server:port/manager/text/deploy?path=/app
OK - it works

curl -X PUT http://user:password@server:port/manager/text/list
FAIL - Unknown command /list
Same with stop : 
FAIL - Unknown command /stop 
```

但在官方文档中：http: [//tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Stop_an_Existing_Application](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Stop_an_Existing_Application) 明确指出该命令存在。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T09:58:16.047

好的...非常简单的答案：这不是 PUT，而是 GET。

```
curl -X GET http://user:password@server:port/manager/text/list 
```

使用tomcat+ant时，我使用wireshark在我的机器上监听。( [http://paulgrenyer.blogspot.in/2011/11/catalina-ant-for-tomcat-7.html](http://paulgrenyer.blogspot.in/2011/11/catalina-ant-for-tomcat-7.html) )

# c# - 在 C++ 中托管 CLR 运行时

> ID：13518434
> 
> 赞同：2
> 
> 时间：2012-11-22T18:37:43.777
> 
> 标签：c#, plugins, clr, clr-hosting

我正在为一个项目进行扩展，该项目将允许在核心应用程序中托管 CLR。有了这个，我计划允许这个扩展管理它在自身内部加载/卸载的托管扩展。话虽如此，我需要使用单独的 AppDomain 来确保可以卸载。

目前，我能够设置域并加载插件文件，但此时我被卡住了。我不确定如何随意调用域加载程序集内的函数等等。

到目前为止，这是我的加载设置，减去错误检查等：

```
ICorRuntimeHost* lpRuntimeHost = NULL;
CorBindToRuntimeEx( L"v4.0.30319", L"wks", 0, CLSID_CorRuntimeHost, IID_PPV_ARGS( &lpRuntimeHost ) );

lpRuntimeHost->Start();

// File data read from disk. 
// Dll file just CreateFile/ReadFile and insert into pluginFileData.
CComSafeArray<BYTE> pluginFileData;

IUnknown* lpUnknown = NULL;
lpRuntimeHost->CreateDomain( wstrPlugin.c_str(), NULL, &lpUnknown );

CComPtr<_AppDomain> appDomain = NULL;
lpUnknown->QueryInterface( &appDomain.p );

CComPtr<_Assembly> appAssembly = NULL;
hResult = appDomain->Load_3( pluginFileData, &appAssembly ); 
```

我有一个类库，所有插件都必须引用和使用它才能被视为插件。到目前为止，它只不过是一个要继承的基类：

```
namespace FrameworkAPI
{
    public class IFrameworkPlugin
    {
        public override bool Initialize(IntPtr interfaceObj)
        {
            return false;
        }
    }
} 
```

然后扩展将引用该类库并将其用作其基础：

```
namespace ClassLibrary1
{
    public class Main : IFrameworkPlugin
    {
        public override bool Initialize(IntPtr interfaceObj)
        {
            // Return true to stay loaded.
            return true;
        }
    }
} 
```

我坚持的是如何做几件事：

*   我怎样才能获得主类，但作为基础来调用允许主类仍然处理的基础中的方法？
*   如何确保主类继承基类，以便确保它是有效的插件文件？
*   如何从 C++ 端自由调用方法来触发 C# 插件中的事件。

对于触发事件，C++插件一旦加载就会调用C#插件中更多的东西，比如渲染事件、命令处理等。

我在网上找到的大多数示例都特定于要求整个 C# 端都是静态的，这是我不想要的。此外，大多数不使用单独的 AppDomain，而是默认执行。我不想要这个，因为它限制了卸载特定插件的能力。

如果缺少任何其他信息并且需要，请随时告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:27:53.520

我通过使用 C# 方面的 COM 公开接口解决了这个问题。

我已将 FrameworkAPI 放在一个单独的 DLL 中，并将它的主接口暴露给 COM，然后在将使用它的插件中引用它。

启用 COM 编译后，我可以导入 .tlb 生成的文件以轻松使用 C++ 中的接口。

# asp.net-mvc - 模型属性的验证状态

> ID：13518435
> 
> 赞同：3
> 
> 时间：2012-11-22T18:37:44.910
> 
> 标签：asp.net-mvc

我想知道我是否可以在以下代码中获取“ **model.Email ”的属性状态。**我可以验证整个模型状态，但不知道如何验证每个属性状态。

```
 [HttpPost]
    public JsonResult RegisterFromLogin(LoginModel model, string returnUrl)
    {            
        if (!ModelState.IsValid)
            return Json(new { success = false, message = "Validation failed!" });

        if (!model.Email.Isvalid)                                          
         {
                //  I am trying to do something like this
                //This if statement code is not valid!
         }

    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:39:39.597

ModelState 有一个索引器，它接受您感兴趣的属性的名称。在这种情况下，我假设您的属性名为`Errors`. 尝试以下操作：

```
if (ModelState["Email"].Errors.Any()) ... 
```

# asp.net-mvc - 即使使用 CTRL+F5（即使清除浏览器缓存 CTRL+R），缓存页面也不会刷新

> ID：13518440
> 
> 赞同：2
> 
> 时间：2012-11-22T18:38:14.400
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我在我的 Visual Studio ASP.NET MVC4 项目上激活缓存。

这是我管理缓存的代码部分：

```
filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(1));
filterContext.HttpContext.Response.Cache.SetValidUntilExpires(true);
filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.Public); 
```

为了测试，我在动作编辑页面中放置了一个断点。当我运行我的应用程序并导航到特定页面（编辑页面）时，我可以很容易地看到操作页面已被缓存，因为从未到达断点。接下来，我使用 CTRL+F5 清除了缓存并导航到相同的编辑页面。我希望在我的操作编辑页面中达到断点，但事实并非如此。我从来没有点击过编辑操作页面，从来没有！？

![在此处输入图像描述](../Images/103aefb7c64bcaffe19692a00f06f880.png)

![在此处输入图像描述](../Images/efe4c2fb633f3c379a582c979a0b7cff.png)

知道为什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:34:06.917

您是否尝试过使用 OutputCache 属性？它更容易控制（通过配置完成）并且更容易使用写入响应。

示例基本用法：

```
[OutputCache(Duration=10, VaryByParam="none")]
public ActionResult Index()
{
    return View();
} 
```

或者，您可以在 web.config 中创建自己的命名设置。示例配置：

```
<caching>
    <outputCacheSettings>
        <outputCacheProfiles>
            <add name="Cache1Hour" duration="3600" varyByParam="none"/>
        </outputCacheProfiles>
    </outputCacheSettings>
</caching> 
```

...并像这样使用：

```
Example usage:

[OutputCache(CacheProfile="Cache1Hour")]
public ActionResult Index()
{
    return View();
} 
```

[从这里](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)复制的示例

# c# - DoubleAnimationUsingKeyFrames 动画不能用于动画属性 RenderTransform '因为它是不兼容的类型 Transform

> ID：13518441
> 
> 赞同：1
> 
> 时间：2012-11-22T18:38:14.807
> 
> 标签：c#, .net, wpf, mahapps.metro

使用. `MetroContentControl`_`MahApps.Metro`

```
'System.Windows.Media.Animation.DoubleAnimationUsingKeyFrames' animation object cannot be used to animate property 'RenderTransform' because it is of incompatible type 'System.Windows.Media.Transform'. 
```

我的视图未在设计模式下呈现。但在 Build 上效果很好。

谁能建议我，这个例外的可能解决方案是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:55:57.290

似乎您不能仅仅因为`RenderTransform`不是 type而使用双重动画`double`。改为查看`PropertyAnimation`并为其提供一个新的整个`Transform`对象。

# windows-phone-8 - 如何在不拍照的情况下打开相机闪光灯？

> ID：13518444
> 
> 赞同：2
> 
> 时间：2012-11-22T18:38:20.500
> 
> 标签：windows-phone-8

> **可能重复：**
> [wp8 - 反射 API 问题 - 请检查](https://stackoverflow.com/questions/13454422/wp8-reflection-api-issue-please-check)

我知道您可以[控制相机闪光灯](http://msdn.microsoft.com/en-us/library/hh202949%28v=vs.92%29.aspx)，但这似乎只是在您拍照或录制视频时才真正打开闪光灯。我还找到了另一种通过对焦相机来打开它的方法。

有没有办法在没有这些电池密集型黑客的情况下打开 LED 闪光灯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:12:34.017

是的，可以使用公共 API 在 WP8 上执行此操作，请参阅我的回答[@Reflection failure when trying to access Microsoft.Phone.Media.Extended](https://stackoverflow.com/questions/13454422/wp8-reflection-api-issue-please-check/13473773#13473773)

WP7 还有一种方法可以做到这一点，请参阅@ [http://www.locked.nl/wp7-flashlight-getting-started](http://www.locked.nl/wp7-flashlight-getting-started)

# java - 创建随机数组方法

> ID：13518448
> 
> 赞同：1
> 
> 时间：2012-11-22T18:38:50.440
> 
> 标签：java, random, multidimensional-array

我有以下代码：

```
import java.util.*;

public class Lab7 {

/**
 * @param args
 */

public static void main(String[] args) {
    // TODO Auto-generated method stub

    double[][] g = { { 0, 1, 2 }, { 1, 0, 3 }, { 2, 3, 0 } };
    double mst[][] = MST.PrimsMST(g);
    PrintArray(g);                                                                      
    PrintMST(mst);
}

public static void PrintArray(double[][] g) {

    System.out.println(Arrays.deepToString(g));

}

public static void PrintMST(double[][] mst) {

    System.out.println(Arrays.deepToString(mst));

}

} 
```

我真的需要帮助来添加一个 RandomArray 方法，该方法将为我 (g) 创建一个随机数组，而不是我必须自己输入多维数组的值。

这是我之前用来创建随机数组的一段代码：

我似乎无法修改它以在上面的代码中使用，有人可以帮我吗？

```
public static ArrayList<Integer> RandomArray(int n)   {                 // Method called RandomArray which takes a     parameter as an integer  
    ArrayList<Integer> randomArray = new ArrayList<Integer>(n);         // Creates an ArrayList called randomArray, of size 'n'
    Random randNumGenerator = new Random();                             // Creates a random object
    for (int i = 0; i < n; i++){                                        // Creates a for loop which goes from i=0 to 'n'
        randomArray.add(new Integer(randNumGenerator.nextInt(256)));    // Will add a random int from 0 to 255, in the array 'randomArray'
    }
    return randomArray;                                                 // Returns randomArray
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:44:10.480

更改您的方法以满足您的需求：

```
public static double[] randomArray(int n) {
    double[] randomArray = new double[n];
    Random randNumGenerator = new Random();
    for (int i = 0; i < n; i++) {
        randomArray[i] = randNumGenerator.nextDouble() * 256;
    }
    return randomArray;
} 
```

现在你可以这样称呼它

```
double[][] g = {randomArray(3), randomArray(3), randomArray(3)}; 
```

# objective-c - 针对磁盘查找的核心数据提取性能

> ID：13518449
> 
> 赞同：0
> 
> 时间：2012-11-22T18:39:04.240
> 
> 标签：objective-c, ios, core-data, nsfilemanager

我想知道是否有人对性能更好的方法有所了解：进行核心数据提取或在磁盘上查找文件。

我现在的情况是下载记录，每条记录都有一个与之相关的图像。但是不同的记录可以有相同的图像，所以我不想下载图像两次。我将图像保存到磁盘并使用 NSManagedObject 保存 Web url 和本地文件路径。

为了避免拨打另一个网络电话，我可以

A: 执行核心数据获取，看看我是否已经有基于 web url 的图像

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:NSStringFromClass([Image class])];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"web_url == %@", myRecord.image_url]; 
```

B：从本地文件路径查找磁盘上的图像数据

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSData *photoData = [fileManager contentsAtPath:myRecord.photo_path]; 
```

此外，仪器中有什么东西可以让我计时吗？这将是一个方便的工具，知道如何在未来使用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:40:51.690

[在这篇 NSHipster 文章http://nshipster.com/reader-submissions-new-years-2013/](http://nshipster.com/reader-submissions-new-years-2013/)中，我终于在用户提交的用于测量执行时间的宏的帮助下进行了测试。

正在测试的代码如下

```
__block NSData *photoData;
const char *caller = "filemanager";
MVComputeTimeWithNameAndBlock(caller, ^{
NSFileManager *fileManager = [NSFileManager defaultManager];
photoData = [fileManager contentsAtPath:[self createLocalFilePath:myRecord.photo_path]];
});

caller = "coredata";
MVComputeTimeWithNameAndBlock(caller, ^{
    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:NSStringFromClass([Image class])];
    fetchRequest.predicate = [NSPredicate predicateWithFormat:@"web_url == %@", myRecord.image_url];
    NSError *error;
    NSArray *arr = [[self managedObjectContext] executeFetchRequest:fetchRequest error:&error];
    if([arr count]){
        Image *photo = arr[0];
    }
}); 
```

2013-01-25 14:31:06.359 FormulaOne[26554:12b03] 文件管理器 - 运行时间为：0.000325 2013-01-25 14:31:06.359 FormulaOne[26554:12b03] coredata - 运行时间为：0.000491 2013-01- 25 14:31:11.958 FormulaOne[26554:12b03] 文件管理器 - 运行时间为：0.000178 2013-01-25 14:31:11.959 FormulaOne[26554:12b03] coredata - 运行时间为：0.000417 2013-01-25 14:31 ：14.840 FormulaOne[26554:12b03] 文件管理器 - 运行时间为：0.000187 2013-01-25 14:31:14.841 FormulaOne[26554:12b03] coredata - 运行时间为：0.000421 2013-01-25 14:33:10.869 FormulaOne[ 26554:12b03] 文件管理器 - 运行时间为：0.000193 2013-01-25 14:33:10.870 FormulaOne[26554:12b03] coredata - 运行时间为：0.000540 2013-01-25 14:33:13.087 FormulaOne[26554:12b03]文件管理器 - 运行时间为：0.000170 2013-01-25 14:33:13.088 FormulaOne [26554:12b03] coredata - 运行时间为：0。000392

我把它切换到

```
int count = [[self managedObjectContext] countForFetchRequest:fetchRequest error:&error]; 
```

因为我实际上并不需要这个对象，我只需要知道它的存在。时机实际上更糟。

2013-01-25 14:36:27.760 FormulaOne[28209:12b03] 文件管理器 - 运行时间是：0.000346 2013-01-25 14:36:27.761 FormulaOne[28209:12b03] coredata - 运行时间是：0.000601 2013-01- 25 14:36:29.978 FormulaOne[28209:12b03] 文件管理器 - 运行时间为：0.000182 2013-01-25 14:36:29.979 FormulaOne[28209:12b03] coredata - 运行时间为：0.000479 2013-01-25 14:36 ：31.585 FormulaOne[28209:12b03] 文件管理器 - 运行时间为：0.000265 2013-01-25 14:36:31.586 FormulaOne[28209:12b03] coredata - 运行时间为：0.000400 2013-01-25 14:36:34.923 FormulaOne[ 28209:12b03] 文件管理器 - 运行时间为：0.000307 2013-01-25 14:36:34.924 FormulaOne[28209:12b03] coredata - 运行时间为：0.001055 2013-01-25 14:36:36.038 FormulaOne[28209:12b03]文件管理器 - 运行时间为：0.000318 2013-01-25 14:36:36.040 FormulaOne [28209:12b03] coredata - 运行时间为：0。000740

# android - 正确使用 TextUtils.commaEllipsize

> ID：13518450
> 
> 赞同：4
> 
> 时间：2012-11-22T18:39:08.577
> 
> 标签：android, android-layout, textutils

我正在寻找一些关于如何正确使用它的示例代码`TextView`。

我在 Google 搜索中发现的唯一东西是[TextUtils 类的这个测试单元](http://gitorious.org/freebroid/cts/blobs/7745fc6a9ead88802ca58160c66a43b3ea062927/tests/tests/text/src/android/text/cts/TextUtilsTest.java)。

一些指导将不胜感激。

***编辑：***

我查看了我在这里得到的答案，并尝试在我的代码中实现它。我使用了这个代码片段：

```
 TextView title = (TextView) view.findViewById(R.id.listitemThreadsTitle);
    title.setVisibility(View.VISIBLE);

    TextPaint p = title.getPaint();
    String strTitle = "Moe, Joe, Isaac, Bethany, Cornelius, Charlie";
    title.setText(strTitle);
    float avail = p.measureText(strTitle);
    CharSequence ch = TextUtils.commaEllipsize(strTitle, p, avail, "one more", "%d more");
    title.setText(ch); 
```

但结果绝对不是它应该的样子。

更像是：萌、乔、艾萨克、贝莎……

而不是：Moe、Joe、Isaac + 3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:00:48.293

```
public static CharSequence commaEllipsize (CharSequence text, TextPaint p, 
                                       float avail, String oneMore, String more) 
```

## 参数：

**text -****要** 截断的文本 p **-**
**用来** 测量 文本的
**Paint**当前语言环境

 ****## 示例用法：

```
String text = "Apple, Orange, Mango, Banana";
TextView tv = new TextView(context);
float textWidth = tv.getPaint().measureText(text );
String tempStr = TextUtils.commaEllipsize(text, tv.getPaint(), textWidth, 
                                           "1 more", "%d more");
tv.setText(tempStr); 
```

更新：

```
TextView title = (TextView) view.findViewById(R.id.listitemThreadsTitle);
title.setVisibility(View.VISIBLE);

TextPaint p = title.getPaint();
String strTitle = "Moe, Joe, Isaac, Bethany, Cornelius, Charlie";
title.setText(strTitle);
float avail = title.getMeasuredWidth();
CharSequence ch = TextUtils.commaEllipsize(strTitle, p, avail, "one more", "%d more");
title.setText(ch); 
```****

# python - pygtk 和多处理 - 从另一个运行无限循环的进程中不断更新 textview

> ID：13518452
> 
> 赞同：5
> 
> 时间：2012-11-22T18:39:17.757
> 
> 标签：python, gtk, pygtk, multiprocessing

我正在用 pygtk 构建一个 python 应用程序。它由一些激活/停用一些无限循环进程的按钮和一个应该继续显示每个进程内部发生的事情的文本视图组成。像冗长的东西。

这些过程还没有结束。它们仅在用户点击相应的按钮（或关闭应用程序）时才会停止。

出了什么问题：我无法通过这些进程在 textview 中打印内容。也许是因为他们没有结束...

实际上，该应用程序太大而无法在此处显示整个代码。所以我做了一个简单的小例子来说明我在做什么。

```
import pygtk
pygtk.require("2.0")
import gtk
import time
import glib
from multiprocessing import Process
gtk.threads_init()

class Test(gtk.Window):
    def delete_event(self, widget, event, data=None):
        if isinstance(self.my_process, Process):
            if self.my_process.is_alive():
                self.my_process.terminate()
        gtk.main_quit()
        return False

    def __init__(self):

        gtk.Window.__init__(self)
        self.set_default_size(500, 400)
        self.set_title(u"Test")
        self.connect("delete_event", self.delete_event)

        self.mainBox = gtk.VBox(False, 5)

        self.text = gtk.TextView()
        self.text.set_wrap_mode(gtk.WRAP_WORD)
        self.button = gtk.Button("Start")

        self.add(self.mainBox)
        self.mainBox.pack_start(self.text, True, True, 0)
        self.mainBox.pack_start(self.button, False, True, 0)

        self.button.connect("clicked", self.start_clicked)

        self.show_all()

    def start_clicked(self, widget):
        self.register_data("Starting...")
        self.my_process = Process(target=self.do_something)
        self.my_process.start()

    def do_something(self):
        while True:
            time.sleep(0.5)
            #get a list of a lot of things
            #Do stuff with each item in the list
            #show me on the gui whats going on
            glib.idle_add(self.register_data, "Yo! Here I'm")
            print "Hello, boy."

    def register_data(self, data):
        data = data + "\r\n"
        #gtk.gdk.threads_enter()
        buff = self.text.get_buffer()
        biter = buff.get_start_iter()
        buff.insert(biter, data)
        #gtk.gdk.threads_leave()

if __name__ == "__main__":
    mnc = Test()
    mnc.set_position(gtk.WIN_POS_CENTER)
    gtk.threads_enter()
    gtk.main()
    gtk.threads_leave() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:43:00.400

删除所有`.threads_init()`, `.threads_enter()`, `.threads_leave()`. `multiprocessing`不是`threading`。

将您想要显示的数据放入`multiprocessing.Queue()`您的子进程中：

```
def do_something(self):
    while True:
        #get a list of a lot of things
        #Do stuff with each item in the list
        #show me on the gui whats going on
        self.data_queue.put("Yo! Here I'm") 
```

并在 GUI 循环中轮询它：

```
def __init__(self, ...):
    # ...
    self.data_queue = Queue()
    gobject.timeout_add(100, self.update_text) 
```

在哪里：

```
def update_text(self):
    # receive updates from the child process here
    try:
        data = self.data_queue.get_nowait()
    except Empty:
        pass # nothing at this time
    else:
        self.register_data(data)
    return True 
```

`multiprocessing.Pipe`为避免轮询，您可以在子进程中写入并使用`gobject.io_add_watch()`. 这是一个完整的代码示例：

```
#!/usr/bin/python3
from multiprocessing import Pipe, Process
import gi
gi.require_version('Gtk', '3.0')
from gi.repository import GObject, Gtk

# create GUI to show multiprocessing output
win = Gtk.Window()
win.set_default_size(640, 480)
label = Gtk.Label('process output')
win.add(label)

# start dummy infinite loop in a child process
def loop(conn):
    import itertools, sys, time
    for i in itertools.count():
        conn.send(i)
        time.sleep(0.1 - time.monotonic() % 0.1)

parent_conn, child_conn = Pipe(duplex=False)
Process(target=loop, args=[child_conn], daemon=True).start()
child_conn.close()

# read values from the child
def read_data(source, condition):
    assert parent_conn.poll()
    try:
        i = parent_conn.recv()
    except EOFError:
        return False # stop reading
    # update text
    label.set_text('Result from the child: %03d' % (i,))
    return True # continue reading
# . configure the callback
GObject.io_add_watch(parent_conn.fileno(), GObject.IO_IN, read_data)

win.connect('delete-event', Gtk.main_quit)
win.show_all()
Gtk.main() 
```

您也可以[使用任意子进程（不仅仅是 python 子进程）](https://gist.github.com/zed/8a255e81eb87431c0e63#file-show-subprocess-output-io-watch-py)来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:47:36.633

这是一个[线程示例](http://faq.pygtk.org/index.py?req=show&file=faq14.023.htp)。但是非线程、非轮询方法会更好，因为在 GTK 3 中，threads_enter/threads_leave 已被弃用，因此您的程序将更难移植到 GTK 3 + PyGObject。

在 C 语言中，可能会使用[g_spawn_async_with_pipes](http://developer.gnome.org/glib/stable/glib-Spawning-Processes.html#g-spawn-async-with-pipes)。我猜python中的等价物是[glib.spawn_async](http://www.pygtk.org/docs/pygobject/glib-functions.html#function-glib--spawn-async) ，当标准输出中有要读取的数据时，你会使用[glib.io_add_watch](http://www.pygtk.org/docs/pygobject/glib-functions.html#function-glib--io-add-watch)得到通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:18:54.057

当您在线程内时，您应该使用 gtk.threads_enter() 来每次调用 gtk 并在调用他后使用 gtk.threads_leave() 关闭。就像是：

```
def do_something(self):
        while True:
            time.sleep(0.5)
            gtk.threads_enter()
            #get a list of a lot of things
            #Do stuff with each item in the list
            #show me on the gui whats going on
            glib.idle_add(self.register_data, "Yo! Here I'm")
            gtk.threads_leave()
            print "Hello, boy." 
```

有时您需要使用：

```
gtk.gdk.threads_init()
gtk.gdk.threads_enter()
#code section
gtk.gdk.threads_leave() 
```

# android - Android - 如果未安装应用程序，则重定向到商店（从网站启动）

> ID：13518453
> 
> 赞同：22
> 
> 时间：2012-11-22T18:39:34.630
> 
> 标签：android

我们有一个 android 应用程序，当用户被重定向到自定义协议时启动。如果应用程序未安装在他们的设备上，我们希望用户重定向到该应用程序的 google/play 商店。

对于 iOS，我们使用类似这样的方法：[是否可以为 iPhone 应用程序（如 YouTube 和 Maps）注册基于 http+域的 URL 方案？](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like/1109200#1109200)...但是这在android上不起作用。

这是基本的工作流程：

1.  用户点击我们网站上的链接
2.  用户被重定向到`customProtocol://site.com?some=params`
3.  如果安装了应用程序，则设备知道在访问 customProtocol:// url 并且应用程序启动时要做什么......但是，如果未安装应用程序，android 只会给出一个页面不可用的错误页面；上面针对 iOS 的解决方案似乎不起作用。

关于我们如何在android上实现这一点有什么想法吗？在android上是不可能的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-22T19:10:05.417

> 关于我们如何在android上实现这一点有什么想法吗？

不使用“自定义协议”（或更准确地说，是“自定义方案”）。Android 上的模式是让您使用您控制的 URL。

例如，条形码扫描仪应用程序[为其主要扫描活动定义了以下内容](http://code.google.com/p/zxing/source/browse/trunk/android/AndroidManifest.xml)：

```
 <!-- Allow web apps to launch Barcode Scanner by linking to http://zxing.appspot.com/scan. -->
  <intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="http" android:host="zxing.appspot.com" android:path="/scan"/>
  </intent-filter> 
```

然后，任何指向[http://zxing.appspot.com/scan](http://zxing.appspot.com/scan)的链接都会做以下两件事之一：

1.  如果从 Android 设备上的浏览器单击链接，并且安装了条形码扫描仪，则用户可以选择显示应用程序或显示与链接关联的网页

2.  如果在其他任何地方（没有应用程序的 Android 设备、其他移动设备、台式机、笔记本电脑等）单击该链接，浏览器会显示该 URL 的网页，您可以在其中做任何您想做的事情，包括选择性地重定向到Play 商店

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T19:13:58.120

您可以定义一个简单地重定向到 Google Play 中的应用程序页面的服务器端 URL，并在[意图过滤器](http://developer.android.com/guide/components/intents-filters.html#ifs)中使用该 URL以被您的应用程序捕获：

*   如果您的应用程序已安装，您为其定义意图过滤器的活动将被打开。
*   如果您的应用程序未安装，则不会找到意图过滤器，并且将打开浏览器并将用户重定向到 Google Play（提示他们是否要打开 Play 商店或在浏览器中继续）。

# python - Python属性不起作用

> ID：13518458
> 
> 赞同：0
> 
> 时间：2012-11-22T18:40:02.390
> 
> 标签：python, google-app-engine

我有一个继承自 ndb.Model 的对象（一个 Google App Engine 事物）。此对象有一个名为 commentid 的属性：

```
class Comment(ndb.Model):
   commentid = ndb.StringProperty() 
```

看了一堆文章，都说这是实现一个属性的方式：

```
@property
def commentid(self):
   if not self._commentid:
       self._commentid = "1"
   return self._commentid 
```

但我收到一条错误消息`Comment object has no attribute _commentid`。我究竟做错了什么？

编辑：好的，显然我在这里有点困惑。我来自 Objective-C，如果你有一个属性被调用，`x`那么你会自动获得一个`_x`在你的 getter 和 setter 中调用的变量。所以我认为这也是 Python 中发生的事情。但显然我需要手动为带有下划线前缀的变量设置一个值。

我想要的只是实现一个getter，我在返回之前对值进行一些检查。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T18:57:43.513

实现这样的属性需要您为对象定义属性。您在那里所做的是定义一个名为 Comment 的类，但您没有为它的对象定义任何属性，而是为类本身定义它们。

让我用一个小例子来演示：

```
class ExampleClass:
    name = "Example Object"

a = ExampleClass() # Init new instance of ExampleClass
print(a.name) # a doesn't own an attribute called "name"
print(ExampleClass.name) # --> "Example Object" 
```

在上面的例子中，我定义了 class`ExampleClass`并给它一个`name`带有 value的变量`Example Object`。之后，我创建了一个 object `a = ExampleClass()`，但是它没有获得 name 属性，因为该属性是为类本身定义的，而不是为它的对象定义的。

要解决此问题，您在`__init__`-method 中定义名称，每当创建该类的对象时都会调用该名称。

```
class ExampleClass:
    def __init__(self):
        self.name = "Example Class"

a = ExampleClass() # Init new instance of ExampleClass
print(a.name) # --> "Example Class"
print(ExampleClass.name) # --> ERROR: Exampleclass.name doesn't exist 
```

在那里我`ExampleClass`再次定义了，但我也`__init__`为它定义了方法。Init 方法只接受一个参数，`self`，该参数将自动传递给函数。它是正在创建的对象。然后我设置`self.name = "Example Class"`，因为 self 是对象本身，我们设置对象的属性`name`。

# 创建属性

要为您的属性实现 setter 和 getter，请添加以下内容：

```
class ExampleClass:
    def __init__(self):
        self.name = "Example Class"

    @property
    def name(self):
        if not self._name:
            pass #blabla code here
        return self._name

    @name.setter
    def name(self, value):
        #blabla more code
        self._name = value 
```

此外，您还应该编辑`__init__`方法以`name`作为参数。

```
def __init__(self, name="Example Object"):
    self.name = name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:51:45.987

如果您`self._commentid`直接访问，则需要对其进行定义，否则会引发异常。由于您改为检查是否`_commentid`已定义（给它一个默认值），我会使用`hasattr`：

```
@property
def commentid(self):
   if not hasattr(self, "_commentid"):
       self._commentid = "1"
   return self._commentid 
```

# c# - NLog 异常：集合被修改；枚举操作可能无法执行

> ID：13518465
> 
> 赞同：1
> 
> 时间：2012-11-22T18:41:18.087
> 
> 标签：c#, nlog

我正在使用 NLog。当我尝试像这样初始化我的记录器对象时：

```
private static Logger _logger = LogManager.GetCurrentClassLogger(); 
```

我得到：

```
 2012-11-22 10:15:33.8479|Error|MyClass(6468:13)|MyNamespace.BaseThreadLoop|Exception processing event in RequestLoop: System.TypeInitializationException: The type initializer for 'MyClass' threw an exception. ---> System.InvalidOperationException: Collection was modified; enumeration operation may not execute.
   at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)
   at System.Collections.Generic.List`1.Enumerator.MoveNextRare()
   at System.Collections.Generic.List`1.Enumerator.MoveNext()
   at NLog.Internal.EnumerableHelpers.<OfType>d__0`1.MoveNext() in c:\NLogBuild\src\NLog\Internal\EnumerableHelpers.cs:line 60
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at NLog.Internal.EnumerableHelpers.ToList[T](IEnumerable`1 enumerable) in c:\NLogBuild\src\NLog\Internal\EnumerableHelpers.cs:line 118
   at NLog.Internal.ObjectGraphScanner.ScanProperties[T](List`1 result, Object o, Int32 level, Dictionary`2 visitedObjects) in c:\NLogBuild\src\NLog\Internal\ObjectGraphScanner.cs:line 118
   at NLog.Internal.ObjectGraphScanner.ScanProperties[T](List`1 result, Object o, Int32 level, Dictionary`2 visitedObjects) in c:\NLogBuild\src\NLog\Internal\ObjectGraphScanner.cs:line 125
   at NLog.Internal.ObjectGraphScanner.ScanProperties[T](List`1 result, Object o, Int32 level, Dictionary`2 visitedObjects) in c:\NLogBuild\src\NLog\Internal\ObjectGraphScanner.cs:line 125
   at NLog.Internal.ObjectGraphScanner.ScanProperties[T](List`1 result, Object o, Int32 level, Dictionary`2 visitedObjects) in c:\NLogBuild\src\NLog\Internal\ObjectGraphScanner.cs:line 125
   at NLog.Internal.ObjectGraphScanner.FindReachableObjects[T](Object[] rootObjects) in c:\NLogBuild\src\NLog\Internal\ObjectGraphScanner.cs:line 65
   at NLog.Internal.TargetWithFilterChain.PrecalculateStackTraceUsage() in c:\NLogBuild\src\NLog\Internal\TargetWithFilterChain.cs:line 95
   at NLog.LogFactory.GetTargetsByLevelForLogger(String name, IList`1 rules, TargetWithFilterChain[] targetsByLevel, TargetWithFilterChain[] lastTargetsByLevel) in c:\NLogBuild\src\NLog\LogFactory.cs:
line 587
   at NLog.LogFactory.GetTargetsByLevelForLogger(String name, IList`1 rules, TargetWithFilterChain[] targetsByLevel, TargetWithFilterChain[] lastTargetsByLevel) in c:\NLogBuild\src\NLog\LogFactory.cs:
line 574
   at NLog.LogFactory.GetConfigurationForLogger(String name, LoggingConfiguration configuration) in c:\NLogBuild\src\NLog\LogFactory.cs:line 599
   at NLog.LogFactory.GetLogger(LoggerCacheKey cacheKey) in c:\NLogBuild\src\NLog\LogFactory.cs:line 717
   at NLog.LogFactory.GetLogger(String name) in c:\NLogBuild\src\NLog\LogFactory.cs:line 330
   at NLog.LogManager.GetCurrentClassLogger() in c:\NLogBuild\src\NLog\LogManager.cs:line 143
   at MyNamespace.MyOtherClass..cctor() in C:\....cs:line 25
   --- End of inner exception stack trace ---
   at MyNamespace.MyClass.get_Instance()
   ... 
```

我按照[http://nlog-forum.1685105.n2.nabble.com/InvalidOperationException-when-accessing-the-configuration-from-multiple-threads-td6723806.html](http://nlog-forum.1685105.n2.nabble.com/InvalidOperationException-when-accessing-the-configuration-from-multiple-threads-td6723806.html)的建议将我的内存目标移动到一个单独的类，但是仍然有问题。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:41:32.080

# actionscript-3 - 带 FLVPlayback 的 AS3 视频播放

> ID：13518468
> 
> 赞同：0
> 
> 时间：2012-11-22T18:41:31.870
> 
> 标签：actionscript-3

我正在使用下面的代码从 .xml 文件中加载一些数据。我正在预加载所有数据（音频路径、视频路径，包括来自 xml 的视频。

当一切都加载完成后，我正在使用以下代码在 FLVPlayback 2.5 上的第 2 帧中加载视频：

```
videoPlayer.source = videofile; 
```

问题是视频显示白屏 3-4 秒，然后开始播放。在其他一些电脑上，加载结束时它可以正常播放。

我的代码：

```
import flash.net.URLLoader;
import flash.net.URLRequest;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.media.Sound;
import flash.media.SoundChannel;

stop();
//******************************************************
// XML Loader
//******************************************************
var myLoader:URLLoader = new URLLoader();
//myLoader.load(new URLRequest("myxml.php"));
myLoader.load(new URLRequest("myxml.xml"));
myLoader.addEventListener(Event.COMPLETE, processXML);

function processXML(e:Event):void{

    var myXml:XML = new XML(e.target.data);
    parseXML(myXml); 
}

//******************************************************
// Extract XML value and fill up variables
//******************************************************
var thename:XML;
var soundpath:XML;
var theage:XML;
var theplace:XML;
var everyday:XML;
var youwill:XML;
var pic1:XML;
var pic2:XML;
var pic3:XML;
var videofile:XML;

var assetsList:Array;
//-----------------------------
var sound:Sound;
var soundChannel:SoundChannel;

//-----------------------------

function parseXML(xml:XML):void{

    thename = xml.paths.thename[0];
    soundpath = xml.paths.soundpath[0];
    theage = xml.paths.theage[0];
    theplace = xml.paths.theplace[0];
    everyday = xml.paths.everyday[0];
    youwill = xml.paths.youwill[0];
    pic1 = xml.paths.pic1[0];
    pic2 = xml.paths.pic2[0];
    pic3 = xml.paths.pic3[0];
    videofile = xml.paths.videofile[0];

    txtThename.text = thename;
    txtSoundpath.text = soundpath;
    txtTheage.text = theage;
    txtTheplace.text = theplace;
    txtEveryday.text = everyday;
    txtYouwill.text = youwill;
    txtPic1.text = pic1;
    txtPic2.text = pic2;
    txtPic3.text = pic3;
    txtVideofile.text = videofile;

    assetsList = [soundpath,theage,theplace,everyday,youwill,pic1,pic2,pic3,videofile];
    preloadAssets();
}
//******************************************************
// preloaded assets
//******************************************************
var assetsLoader:URLLoader 
var assetsCtr:Number=0;

function preloadAssets():void{

    assetsLoader = new URLLoader ();
    var urlRequest:URLRequest = new URLRequest(assetsList[assetsCtr]); 
    assetsLoader.load(urlRequest);

    assetsLoader.addEventListener(Event.COMPLETE, assetLoadedHanlder);
    assetsLoader.addEventListener(ProgressEvent.PROGRESS, assetProgressHandler);

}

function assetProgressHandler(evt:ProgressEvent):void{
    var bl:uint = evt.bytesLoaded;
    var bt:uint = evt.bytesTotal;
    var perEachAssets = 1/assetsList.length;

    var assetsBlLoaded = ((bl / bt)*perEachAssets)+((assetsCtr)/assetsList.length*100)/100;
    var _percentLoaded = Math.floor(assetsBlLoaded*100);

    progBar.setProgress(_percentLoaded,100)
    //trace("_percentLoaded:",_percentLoaded)

}
function assetLoadedHanlder(evt:Event):void{

    assetsCtr+=1;
    if(assetsCtr<assetsList.length){
        //trace("preloading:"+assetsList[assetsCtr])
        var urlRequest:URLRequest = new URLRequest(assetsList[assetsCtr]); 
        assetsLoader.load(urlRequest);

    }else{
        //trace("done!")
        assetsLoader.removeEventListener(Event.COMPLETE, assetLoadedHanlder);
        assetsLoader.removeEventListener(ProgressEvent.PROGRESS, assetProgressHandler);
        gotoAndStop(2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:34:45.423

与其将组件直接添加到舞台，不如尝试使用 ActionScript 创建和添加它。

通过这样做，您可以在需要显示 FLVPlayback 实例之前对其进行实例化，而不必等到您点击时间轴上的第 2 帧。

我不能保证它会解决您的问题，但值得一试。

```
var _videoFLV:FLVPlayback;
_videoFLV = new FLVPlayback();
_videoFLV.fullScreenTakeOver = false;
_videoFLV.autoPlay = false;
_videoFLV.autoRewind = true;
_videoFLV.isLive = false;
_videoFLV.skin = null;      
_videoFLV.bufferTime = .1;
_videoFLV.width = 320;
_videoFLV.height = 240;
_videoFLV.source = videofile;
_videoFLV.stop();
_videoFLV.x = 240;
_videoFLV.y = 240;
addChild(_videoFLV); 
```

# unix - 如何在vi编辑器中删除每行中间的^M字符

> ID：13518481
> 
> 赞同：2
> 
> 时间：2012-11-22T18:42:23.917
> 
> 标签：unix, replace, vi

我正在尝试从文件中的每一行中间删除控制字符。下面是我的数据。我使用了以下命令，但它似乎不起作用。

```
Command:
:%s/^M//g

Data:
53,v42,p11,51097,310780,ok^M,fraud
56,v45,p11,260,1925,ok^M,fraud
68,v42,p11,51282,278770,ok^M,fraud
96,v49,p14,212,1545,ok^M,fraud
163,v50,p20,373819,1006375,ok^M,fraud
204,v50,p26,36917,117195,ok^M,fraud
241,v70,p33,21777,91360,ok^M,fraud

Output Warning:
E486: Pattern not found: ^M 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:46:54.417

看看这篇文章：[http ://www.tech-recipes.com/rx/150/remove-m-characters-at-end-of-lines-in-vi/](http://www.tech-recipes.com/rx/150/remove-m-characters-at-end-of-lines-in-vi/)

```
To remove the ^M characters at the end of all lines in vi, use:

:%s/^V^M//g

The ^v is a CONTROL-V character and ^m is a CONTROL-M. When you type this, it will look like this:

:%s/^M//g 
```

基本推理是键入 ^M 搜索字面解释，两个字符 ^ 和 M ，而不是您想从输入中构造实际的控制字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T07:30:56.490

是的，你按住“Ctrl”和“v”键，然后按住“Ctrl”和“m”键，而不是按字面意思输入“^v”和“^m”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-31T08:07:07.190

如何使用 VI 编辑器从 unix 文件中删除 ^M 使用此命令。

:%s(Ctrl+V)(Ctrl+M)/

重要的！！– 按 (Ctrl-v) (Ctrl-m) 组合输入 ^M 字符，不要使用“^”和 M。

# php - 用于插入的mysql列和用于更新的不同列

> ID：13518484
> 
> 赞同：0
> 
> 时间：2012-11-22T18:42:35.657
> 
> 标签：php, mysql, sql

我正在尝试创建一个包含两个时间戳列的表，一个用于创建行时，另一个用于更新行时。这是我到目前为止所尝试的：

```
CREATE TABLE `tmp` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `data` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
   `created` timestamp NOT NULL ,
   `modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

但我收到了这个错误：

> 表定义不正确；在 DEFAULT 或 ON UPDATE 子句中只能有一个带有 CURRENT_TIMESTAMP 的 TIMESTAMP 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:43:54.300

这是一个 MYSQL 约束，您只能拥有一个默认值为 systime 的列。

这个问题也可以参考 [How to add "ON update current timestamp" to existing table column](https://stackoverflow.com/questions/9517630/how-to-add-on-update-current-timestamp-to-existing-table-column)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:06:19.220

您可以在 MySQL 5.6 中执行此操作（在撰写本文时作为[候选发布版](http://dev.mysql.com/downloads/mysql/5.6.html)可用，但尚未准备好生产）。

> 从 MySQL 5.6.5 开始，TIMESTAMP 和 DATETIME 列可以自动初始化并更新为当前日期和时间（即当前时间戳）。在 5.6.5 之前，这仅适用于 TIMESTAMP，并且对于每个表最多一个 TIMESTAMP 列......对于表中的任何 TIMESTAMP 或 DATETIME 列，您可以将当前时间戳分配为默认值，自动更新价值，或两者兼而有之

*   取自[https://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html](https://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:57:42.377

您可以编写一个触发器来`created`分别在插入时添加时间戳

```
delimiter |
CREATE TRIGGER add_created_ts BEFORE INSERT on `tmp`
FOR EACH ROW
BEGIN
   SET NEW.created = current_timestamp;
END
|
delimiter ; 
```

# c# - 从数据表更新数据库中的表

> ID：13518486
> 
> 赞同：0
> 
> 时间：2012-11-22T18:42:50.977
> 
> 标签：c#, ado.net

我像这样从数据库表中加载数据...

```
using (view_adapter = new SqlDataAdapter("select * from TVServiceProvider", connection_string))
        {
            using (dt = new DataTable())
            {
                view_adapter.Fill(dt);
                for (int i = 0; i < dt.Columns.Count; i++)
                {
                    if (dt.Columns[i].ColumnName.Substring(0, 2).Equals("id"))
                        dt.Columns[i].ReadOnly = false;
                }
                bs.DataSource = dt;
            }
        } 
```

哪里`SqlDataAdapter view_adapter`和`DataTable dt`。要将更改应用于我创建的方法的数据库

```
 void View_Adapter_Click(object sender, EventArgs e)
    {
        try
        {
            view_adapter.Update(dt);
            dt.AcceptChanges();
        }
        catch (Exception exc)
        {
            this.radLabelElement1.Text = exc.Message;
        }
    } 
```

但是当我单击按钮时，我遇到了异常。它需要更新命令。我应该在哪里使用什么命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:47:18.427

你必须为你创造`UpdateCommand`和。`DeleteCommand``view_adapter`

**编辑：**

代码必须如下所示：

```
SqlDataAdapter view_adapter = new SqlDataAdapter();
view_adapter .SelectCommand = new SqlCommand(queryString, connection);
view_adapter .UpdateCommand = new SqlCommand(updateCommadString, connection);
view_adapter .DeleteCommand = new SqlCommand(deleteCommadString, connection);

using (SqlConnection connection = new SqlConnection(connectionString))
    {
        view_adapter.Fill(dt);
        return dt;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:10:22.787

好吧，您的代码中有问题或不清楚。
view_adapter变量在**using**块语句中初始化。
因此，当从 using 块中退出时，view_adatpter 将被框架释放，并且在 click 事件中不可用。（就像您从未调用过 new 来初始化它一样）。
我怀疑你这里还有另一个问题。[使用语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

其中的一部分，要自动创建使用 DataAdapter 执行 CRUD 操作所需的 UpdateCommand、InsertCommand 和 DeleteCommand，您可以使用**[SqlCommandBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)**。
（仅当您在 select 语句中使用一个表并且该表定义了主键时才有可能）

所以总结一下：

```
string queryString = "select * from TVServiceProvider";
view_adapter = new SqlDataAdapter(queryString, connection_string);
SqlCommandBuilder builder = new SqlCommandBuilder(view_adapter)
builder.GetUpdateCommand(); // Force the building of commands
view_adapter.Fill(dt); 
```

那么你的点击事件应该像现在一样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:54:22.713

此代码与您的代码无关，但如果您看一下，可能会对您有所帮助。我从[MSDN得到它](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx)

```
public static SqlDataAdapter CreateCustomerAdapter(
    SqlConnection connection)
{
    SqlDataAdapter adapter = new SqlDataAdapter();

    // Create the SelectCommand.
    SqlCommand command = new SqlCommand("SELECT * FROM Customers " +
        "WHERE Country = @Country AND City = @City", connection);

    // Add the parameters for the SelectCommand.
    command.Parameters.Add("@Country", SqlDbType.NVarChar, 15);
    command.Parameters.Add("@City", SqlDbType.NVarChar, 15);

    adapter.SelectCommand = command;

    // Create the InsertCommand.
    command = new SqlCommand(
        "INSERT INTO Customers (CustomerID, CompanyName) " +
        "VALUES (@CustomerID, @CompanyName)", connection);

    // Add the parameters for the InsertCommand.
    command.Parameters.Add("@CustomerID", SqlDbType.NChar, 5, "CustomerID");
    command.Parameters.Add("@CompanyName", SqlDbType.NVarChar, 40, "CompanyName");

    adapter.InsertCommand = command;

    // Create the UpdateCommand.
    command = new SqlCommand(
        "UPDATE Customers SET CustomerID = @CustomerID, CompanyName = @CompanyName " +
        "WHERE CustomerID = @oldCustomerID", connection);

    // Add the parameters for the UpdateCommand.
    command.Parameters.Add("@CustomerID", SqlDbType.NChar, 5, "CustomerID");
    command.Parameters.Add("@CompanyName", SqlDbType.NVarChar, 40, "CompanyName");
    SqlParameter parameter = command.Parameters.Add(
        "@oldCustomerID", SqlDbType.NChar, 5, "CustomerID");
    parameter.SourceVersion = DataRowVersion.Original;

    adapter.UpdateCommand = command;

    // Create the DeleteCommand.
    command = new SqlCommand(
        "DELETE FROM Customers WHERE CustomerID = @CustomerID", connection);

    // Add the parameters for the DeleteCommand.
    parameter = command.Parameters.Add(
        "@CustomerID", SqlDbType.NChar, 5, "CustomerID");
    parameter.SourceVersion = DataRowVersion.Original;

    adapter.DeleteCommand = command;

    return adapter;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-29T20:15:18.233

史蒂夫和哈姆雷特的建议对我真正有用的是以下内容。我遇到了一个小问题，因为我在更新视图适配器之前尝试对我的行和表进行接受更改。接受更改只需要在重新使用数据表以在网格视图中显示或其他操作之前保存对数据表的更改。

```
SqlDataAdapter viewAdapter = new SqlDataAdapter("Select * From Users", DBConn);
SqlCommandBuilder builder = new SqlCommandBuilder(viewAdapter);
viewAdapter.UpdateCommand = builder.GetUpdateCommand();

DataTable Users = new DataTable();
viewAdapter.Fill(Users);
foreach (DataRow user in Users.Rows)
{
    foreach (DataColumn c in Users.Columns)
    {
        Console.WriteLine(c.ColumnName);
        if (c.DataType != typeof(DateTime))
        {
            // Clean up empty space around field entries
            user[c.ColumnName] = user[c.ColumnName].ToString().Trim();
        }

    }
   // user.AcceptChanges(); 
   // Do not do an accept changes for either the table or the row before your ViewAdapter Update. 
   // It will appear as though you do not have changes to push.
}

// Users.AcceptChanges();
viewAdapter.Update(Users); 
```

# svn - 如何在SVN中创建项目

> ID：13518490
> 
> 赞同：8
> 
> 时间：2012-11-22T18:43:11.023
> 
> 标签：svn, tortoisesvn

我可以访问 SVN 服务器，我需要添加新文件夹 project1，其中必须包含该项目的主干、分支、标签等文件夹。假设项目为空并且我只想创建文件夹结构，您能否指导我如何使用乌龟 SVN 做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T18:49:31.483

右键单击任何文件夹并选择*TortoiseSVN - Repo Brower* ...。输入存储库的 URL。然后右击左侧空树的根节点，选择*Create folder...*。

# c - 循环回用户输入验证 C

> ID：13518495
> 
> 赞同：1
> 
> 时间：2012-11-22T18:44:08.997
> 
> 标签：c, visual-studio-2010, user-input, validation

我有以下方法来生成一个必须满足要求的字符串，但是如果不满足验证要求，我需要某种子句来循环回用户输入。我知道在 Java 中有一个后续读取但我没有确定 C 中所需的代码是什么，如果有人能发现错误，我也不认为我的 else if 语句语法正确。一些提示或建议会有所帮助，谢谢。

```
void validatePass()
{
    FILE *fptr;
    char password[MAX+1];
    int iChar,iUpper,iLower,iSymbol,iNumber,iTotal,iResult,iCount;

    //shows user password guidelines
    printf("\n\n\t\tPassword rules: ");
    printf("\n\n\t\t 1\. Passwords must be at least 9 characters long and less than 15 characters. ");
    printf("\n\n\t\t 2\. Passwords must have at least 2 numbers in them.");
    printf("\n\n\t\t 3\. Passwords must have at least 2 uppercase letters and 2 lowercase letters in them.");
    printf("\n\n\t\t 4\. Passwords must have at least 1 symbol in them (eg ?, $, £, %).");
    printf("\n\n\t\t 5\. Passwords may not have small, common words in them eg hat, pow or ate.");

    //gets user password input
    printf("\n\n\t\tEnter your password following password rules: ");
    scanf("%s", &password);

    iChar = countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);

    if(iUpper < 2)
    {
        printf("Not enough uppercase letters!!!\n");

    }
    else if(iLower < 2)
    {
        printf("Not enough lowercase letters!!!\n");

    }
    else if(iSymbol < 1)
    {
        printf("Not enough symbols!!!\n");

    }
    else if(iNumber < 2)
    {
        printf("Not enough numbers!!!\n");

    }
    else if(iTotal < 9 && iTotal > 15)
    {
        printf("Not enough characters!!!\n");

    }

    iResult = checkWordInFile("dictionary.txt",password);

    if( iResult == gC_FOUND )
    {
        printf("\nFound your word in the dictionary");
    }
    else if
    {
        printf("\nCould not find your word in the dictionary");
    }

    iResult = checkWordInFile("passHistory.txt",password);
    else if( iResult == gC_FOUND )
    {
        printf("\nPassword used");
    }
    else if
    {
        printf("\nOk to use!");
    }
    else
    {
    printf("\n\n\n Your new password is verified ");
    printf(password);
    }
    //writing password to passHistroy file.

    fptr = fopen("passHistory.txt", "w");   // create or open the file
    for( iCount = 0; iCount < 8; iCount++)
    {
        fprintf(fptr, "%s\n", password[iCount]);
    }

    fclose(fptr);

    printf("\n\n\n");
    system("pause");

}//end validatePass method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:14:43.040

使用 goto。这是少数几个有理由的情况之一。

这是一个例子。如您所见，它比 a 干净得多`while(0)`，并且也会使编译器对 的抱怨更少`-Wall`！

```
// Returns whether or not the condition failed, printing the
// given error if it did.
static bool verifyThat(bool condition, const char* error) {
    if(!condition) printf("%s", error);
    return !condition;
}

void validatePass()
{
    FILE *fptr;
    char password[MAX+1];
    int iChar,iUpper,iLower,iSymbol,iNumber,iTotal,iResult,iCount;

    //shows user password guidelines
    printf("\n\n\t\tPassword rules: ");
    printf("\n\n\t\t 1\. Passwords must be at least 9 characters long and less than 15 characters. ");
    printf("\n\n\t\t 2\. Passwords must have at least 2 numbers in them.");
    printf("\n\n\t\t 3\. Passwords must have at least 2 uppercase letters and 2 lowercase letters in them.");
    printf("\n\n\t\t 4\. Passwords must have at least 1 symbol in them (eg ?, $, £, %).");
    printf("\n\n\t\t 5\. Passwords may not have small, common words in them eg hat, pow or ate.");

    get_user_password:

    printf("\n\n\t\tEnter your password following password rules: ");
    scanf("%s", &password);

    iChar = countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);
    iUpper = ...
    iLower = ...
    iSymbol = ...
    iNumber = ...
    iTotal = ...

    if(verifyThat(iUpper >= 2, "Not enough uppercase letters!!!\n")
          || verifyThat(iLower >= 2, "Not enough lowercase letters!!!\n")
          || verifyThat(iSymbol >= 1, "Not enough symbols!!!\n")
          || verifyThat(iNumber >= 2, "Not enough numbers!!!\n")
          || verifyThat(iTotal >= 9, "Not enough characters!!!\n")
          || verifyThat(iTotal <= 15, "Too many characters!!!\n"))
        goto get_user_password;

    iResult = checkWordInFile("dictionary.txt", password);

    if(verifyThat(iResult != gC_FOUND, "Password used."))
        goto get_user_password;

        printf("Your new password is verified.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:49:22.897

看起来像 do {...} while(...) 循环的情况。您正在寻找的“其他”就在字典查找之后。

编辑：它会像这样工作：

```
do {
  /* read password here */
  ...
  if (condition not met) {
    printf("condition not met!\n");
    continue;
  }
  if (another condition not met) {
    printf("another condition not met!\n");
    continue;
  }
  ...
} while(0); 
```

Edit2：在另一个函数中进行测试可能是个好主意，如下所示：

```
bool password_is_safe(char *password)
{
  ...
  if (condition not met) {
    printf("condition not met!\n");
    return false;
  }
  if (another condition not met) {
    printf("another condition not met!\n");
    return false;
  }
  ...
  return true;      
}

  /* in another function */
  ...
  do {
    ...
    /* read password here */
    ...
  } while(!password_is_safe(password)); 
```

无需上下滚动，就可以更轻松地理解程序的逻辑。

编辑3：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>

#define STRINGIFY(x) #x
#define STRINGIFY_VALUE(x) STRINGIFY(x)

#define MAX 80

static bool test_and_complain(const bool test, const char *complain)
{
    if (test) {
        printf("%s\n", complain);
    }
    return test;
}

static void write_history(const char *password)
{
    FILE *f = fopen("passHistory.txt", "w");
    // always check if fopen() was successful
    if (!f) {
        fprintf(stderr, "can't write password history\n");
        exit(EXIT_FAILURE);
    }
    fprintf(f, "%s\n", password);
    fclose(f);
}

void validatePass()
{
    char password[MAX+1];
    int iUpper,iLower,iSymbol,iNumber,iTotal;

    //shows user password guidelines
    printf("\n\n\t\tPassword rules: ");
    printf("1\. Passwords must be at least 9 characters long and less than 15 characters.");
    printf("2\. Passwords must have at least 2 numbers in them.");
    printf("3\. Passwords must have at least 2 uppercase letters and 2 lowercase letters in them.");
    printf("4\. Passwords must have at least 1 symbol in them (eg ?, $, £, %%).");
    printf("5\. Passwords may not have small, common words in them eg hat, pow or ate.");

    // loop until we got a good password
    bool pw_invalid;
    do {
        //gets user password input
        printf("Enter your password following password rules: ");
        // Security risc:
        // Never ever use "%s" without specifying a length!
        // scanf("%s", password);
        scanf("%" STRINGIFY_VALUE(MAX) "s", password);

        countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);

        // Notice that you could eliminate the boolean variable and
        // wrap all the tests in a single expression and put
        // that inside the loop condition of the loop.
        // I think it looks nicer this way though.
        // Notice that the || operator does not evaluate the right hand
        // expression if the left hand expression evaluates to true.
        // I.e. after the first test fails, no other tests are performed.
        // This is equivalent to the if-else cascade from before.
        pw_invalid = false;
        pw_invalid = pw_invalid || test_and_complain(
                      (iUpper < 2),
                      "Not enough uppercase letters!!!");
        pw_invalid = pw_invalid || test_and_complain(
                      (iLower < 2),
                      "Not enough lowercase letters!!!");
        pw_invalid = pw_invalid || test_and_complain(
                      (iSymbol < 1),
                      "Not enough symbols!!!");
        pw_invalid = pw_invalid || test_and_complain(
                      (iNumber < 2),
                      "Not enough numbers!!!") ;
        pw_invalid = pw_invalid || test_and_complain(
                      (iTotal < 9),
                      "Not enough characters!!!");
        pw_invalid = pw_invalid || test_and_complain(
                      (checkWordInFile("dictionary.txt",password)==gC_FOUND),
                      "Found your word in the dictionary");
        pw_invalid = pw_invalid || test_and_complain(
                      (checkWordInFile("passHistory.txt",password)==gC_FOUND),
                      "You already used this password recently");
    } while(pw_invalid);

    printf("\nYour new password is verified\n");
    // Security risc:
    // Never ever use a user supplied string as a format string!
    // printf(password);
    printf("%s\n", password);

    //writing password to passHistroy file.
    write_history(password);

    printf("\n\n\n");
    system("pause");
} //end validatePass method 
```

如果这是家庭作业，请回来查看您的成绩。;-)

# scala - 如何在 Eclipse 中添加 sbt 和 Play 2.0 可以看到的依赖项

> ID：13518504
> 
> 赞同：3
> 
> 时间：2012-11-22T18:44:58.957
> 
> 标签：scala, playframework, sbt

我正在使用 Eclipse (proj1) 中的 Scala 库。

我想在 Play 2.0 Scala 网络应用程序中测试这个库。所以我已经从 cmd 行运行 eclipse 命令并将项目导入 Eclipse (proj2)。

所以我有两个并排的eclipse项目。我可以将第一个项目（proj1）添加到 Eclipse 中 proj2 的构建路径中。这样我就可以导入库并编写代码。

但是当 Play 编译时，它看不到我添加到构建路径中的库。如果我再次运行 eclipse 命令，则该库将从构建路径中删除。

有什么办法可以参考这个项目吗？我宁愿不构建一个 jar 并通过 sbt 导入它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T04:01:40.160

我只是通过 sbt 添加它们并从 Play 控制台重新生成 Eclipse 项目。

# sql - Oracle - 文字与格式字符串不匹配错误

> ID：13518506
> 
> 赞同：8
> 
> 时间：2012-11-22T18:45:16.447
> 
> 标签：sql, database, oracle, date-format, ora-01861

> **可能重复：**
> [简单的​​ Oracle 查询：文字与格式字符串不匹配](https://stackoverflow.com/questions/4884071/simple-oracle-query-literal-does-not-match-format-string)

我收到以下错误：

```
INSERT INTO CatalogueEntry VALUES('2001-12-10', 2, 14.99, 1, 0)

ERROR at line 1: ORA-01861: literal does not match format string ` 
```

第一个字段是`DATE`格式。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T18:50:42.597

当您将字符串值插入日期列时，您需要在`INSERT`使用该[`to_date()`](http://www.techonthenet.com/oracle/functions/to_date.php)函数期间将其转换为日期。使用此函数时，您将提供字符串的格式。

`to_date()`函数格式：

```
to_date( string1, [ format_mask ], [ nls_language ] ) 
```

所以你的查询将是这样的：

```
insert into CatalogueEntry
values
(
  to_date('2001-12-10', 'yyyy-mm-dd'),
  2,
  14.99,
  1,
  0); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/cb00e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:48:37.997

试试这个 SQL：

```
INSERT INTO CatalogueEntry 
              VALUES(to_date('2001-12-10','yyyy-mm-dd'), 2, 14.99, 1, 0); 
```

# php - 与zend框架2相关的数据库表

> ID：13518508
> 
> 赞同：0
> 
> 时间：2012-11-22T18:45:33.763
> 
> 标签：php, mysql, sql, zend-framework2

使用 zf2 的表网关组件从表中获取结果并获得相关子结果的最佳方法是什么？

mysql表（指向父级的箭头）：

文章<-评论

文章<-xref->作者

是加入唯一/最好的方法来做到这一点，还是你们有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:25:15.143

ZF2 从提供完整的 ORM 功能（如 ZF1s`findDependentRowset()`或类似功能）倒退了一步。iirc 这主要是由于 Zend\Db 模块的高度复杂性和臃肿。

您仍然有办法实现这一点，使用您自己命名的方法`join`、编写本机查询，或者依赖自定义 ORM 的功能，例如如今在 ZF2 中具有相当出色实现的 Doctrine 2。

您可能需要考虑[学说/DoctrineORMModule](https://github.com/doctrine/DoctrineORMModule)

# c++ - 从空格分隔的输入创建链表

> ID：13518510
> 
> 赞同：0
> 
> 时间：2012-11-22T18:45:34.427
> 
> 标签：c++

我正在尝试从空格分隔的整数输入中创建一个链表。

输入：

1.  节点数
2.  空格分隔输入

```
int main()
{
    int n;
    cout<<"Enter number of nodes";
    cin>>n;
    cout<<"\nEnter data"<<endl;
    int temp;
    lNode *head = NULL;
    while(cin>>temp)
    {
        CreateLinkedList(&head,temp);
    }
    PrintLinkedList(head);

    return 0;
} 
```

在这里，我不知道如何将用户输入限制为他作为第一个输入给出的节点数。有没有其他方法可以获取用户输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:54:31.403

您可以将输入作为字符串询问：

```
string line;
getline(cin, line); 
```

然后，您可以使用 stringstream 分隔行中输入的数字，因此您应该包含 sstream 库（例如。`#include <sstream>`）：

```
stringstream ss(line);
int number;

while(ss >> number) {
    ... do whatever you want to do with the number here ...
} 
```

# javascript - 我有一个 contentEditable="true" 的 div，需要为输入的数字着色

> ID：13518512
> 
> 赞同：-3
> 
> 时间：2012-11-22T18:45:40.050
> 
> 标签：javascript, jquery

这是我的代码，可以很好地为可编辑 div 中的数字着色，但光标将移到 div 的开头，当我按下键盘箭头按钮遍历字符串时，它应该可以正常工作，当我点击“home”和“结束”按钮，光标应该按预期移动

```
jQuery(document).ready(function(){

       $("#richTextField").keyup(function() {

          var divContent = $(this).text();

          var pattern = /(\d)/g;

          var replaceWith = '<span class="numberClass"'+ '>$1</span>';

          var highlighted = divContent.replace(pattern,replaceWith);

          $(this).html(highlighted);

       });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:36:21.733

消除您不想运行该功能的键，类似这样（即应该正常运行）

```
$("#richTextField").keyup(function(e) {
    var excludeKeyCodes = [8, 9, 13, 46, 35 ,36 ,37, 38, 39, 40];
    if( !$.inArray(e.which, excludeKeyCodes ))
    {
        var divContent = $(this).text();
        var pattern = /(\d)/g;
        var replaceWith = '<span class="numberClass"'+ '>$1</span>';
        var highlighted = divContent.replace(pattern,replaceWith);        
        $(this).html(highlighted);
    }
}); 
```

供参考[javascript 键码](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

快速总结

8 - Backspace, 9 - Tab, 13 - Enter, 46 - delete, 35 - end, 36 - home, 37,38,39,40 - 箭头（左、上、右、下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:07:44.377

以下是您想要的：

```
jQuery(document).ready(function () {

    $("#richTextField").keyup(function () {

        var divContent = $(this).text().split('');
        var pattern = /(\d)/;
        var replaceWith = '<span class="numberClass"' + '>$1</span>';
        var highlighted = divContent.map(function (u) {
            if (pattern.test(u)) return $(u.replace(pattern, replaceWith));
            else return document.createTextNode(u);
        });

        var caretPos = getCaretCharacterOffsetWithin(this);

        $(this).empty().append(highlighted);

        setCursor(this, caretPos);
    });
});

function getCaretCharacterOffsetWithin(element) {
    var caretOffset = 0;
    if (typeof window.getSelection != "undefined") {
        var range = window.getSelection().getRangeAt(0);
        var preCaretRange = range.cloneRange();
        preCaretRange.selectNodeContents(element);
        preCaretRange.setEnd(range.endContainer, range.endOffset);
        caretOffset = preCaretRange.toString().length;
    } else if (typeof document.selection != "undefined" && document.selection.type != "Control") {
        var textRange = document.selection.createRange();
        var preCaretTextRange = document.body.createTextRange();
        preCaretTextRange.moveToElementText(element);
        preCaretTextRange.setEndPoint("EndToEnd", textRange);
        caretOffset = preCaretTextRange.text.length;
    }
    return caretOffset;
}

function setCursor(node, pos) {
    if (!node) {
        return false;
    } else if (document.createRange) {
        range = document.createRange();
        range.selectNodeContents(node);
        range.setStart(node, pos);
        range.setEnd(node, pos);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
    } else if (node.createTextRange) {
        var textRange = node.createTextRange();
        textRange.collapse(true);
        textRange.moveEnd(pos);
        textRange.moveStart(pos);
        textRange.select();
        return true;
    } else if (node.setSelectionRange) {
        node.setSelectionRange(pos, pos);
        return true;
    }
    return false;
} 
```

这个 JS Fiddle 提供了一个工作演示：http: [//jsfiddle.net/B3PgU/](http://jsfiddle.net/B3PgU/)

* * *

代码片段取自：

[https://stackoverflow.com/a/4812022/1662998](https://stackoverflow.com/a/4812022/1662998)

[https://stackoverflow.com/a/2920149/1662998](https://stackoverflow.com/a/2920149/1662998)

# android - 在具有组 ID 的组内添加联系人

> ID：13518514
> 
> 赞同：0
> 
> 时间：2012-11-22T18:45:49.450
> 
> 标签：android, add, contact, contactscontract

我需要在组内插入联系人。我有组的ID。但我不能。不知道为什么。

谁能帮我？

这是我的代码。

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
Account[] accounts = AccountManager.get(getActivity()).getAccounts();
String accountName = null;
String accountType = null;
String account = "mail@gmail.com";
    for(Account account2 : accounts)
        if(account2.name.equals(account)){
            accountName = account2.name;
            accountType = account2.type;
        }
ops.add(ContentProviderOperation
        .newInsert(ContactsContract.RawContacts.CONTENT_URI)
        .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, accountType)
        .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, accountName)
        .build());

ops.add(ContentProviderOperation
        .newAssertQuery(ContactsContract.Groups.CONTENT_URI)
        .withSelection(ContactsContract.Groups._ID + "=?", new String[]{Long.toString(idGroup)})
        .withExpectedCount(1)
        .build());

ops.add(ContentProviderOperation
        .newInsert(ContactsContract.Data.CONTENT_URI)
        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
        .withValue(ContactsContract.CommonDataKinds.StructuredName.MIMETYPE, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
        .withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, "RICARDO")
        .build());

try{
    getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
}catch(Exception e){
    Log.e("ERROR", e.toString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T09:50:36.957

这通过引用其 id 将联系人插入组：

```
Builder builder = ContentProviderOperation.newInsert(Data.CONTENT_URI);
builder.withValueBackReference(Data.RAW_CONTACT_ID, 0);
builder.withValue(Data.MIMETYPE, GroupMembership.CONTENT_ITEM_TYPE);
builder.withValue(GroupMembership.GROUP_ROW_ID, groupId); 

ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
ops.add(builder.build());

try {
  getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
} catch (Exception e) {
  Log.e("ContactsManager", "Failed to apply batch: "+e);
} 
```

# jquery - ajax调用后Rails重定向

> ID：13518523
> 
> 赞同：1
> 
> 时间：2012-11-22T18:46:38.243
> 
> 标签：jquery, ruby-on-rails, ajax, redirect

所以在我的应用程序主页上，可以通过 ajax 请求调用各种动作。当用户登录时，可以进行这些调用。当用户未登录时，如果他们单击任何转到 ajax 调用的链接，我想将用户重定向到登录页面。

在我的 session_helper 中，我有一个方法在控制器中用作这些操作的 before_filter。

```
 def signed_in_user
    unless signed_in?
      store_location
      redirect_to signin_url, notice: "Please sign in."
    end
  end 
```

但是重定向不适用于这些调用，因为调用是通过 ajax 进行的。（作为记录，它确实适用于非 ajax 调用）例如：

```
<%= link_to new_picture_path, remote: true  do %>
  Add New
<% end %> 
```

有没有办法让这个重定向通过 ajax 工作？我正在使用 rails v3.2.8 和 jquery。正如其他一些帖子所建议的那样，我尝试将以下方法添加到我的应用程序控制器中：

```
def redirect_to(options = {}, response_status = {})
  if request.xhr?
    render(:update) {|page| page.redirect_to(options)}
  else
    super(options, response_status)
  end
end 
```

但我收到一个错误：“MissingTemplate 图片/更新”。而且我认为其他一些帖子表明这是因为我使用的是 jquery 而不是原型。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:28:27.957

您可以创建隐藏段落并从控制器传递值，并通过 js 检查该 p 是否包含指定的单词，是否重定向到您想要的任何地方

```
def signed_in_user
    unless signed_in?
      store_location
      @redirect = 'redirect'
    end
  end 
```

在你的 html.erb

```
<p class='hide'><%= @redirect %> </p> 
```

并在 js 文件中

```
if ($('.hide').text() == 'redirect'){
//do the thing
} 
```

可能有点混乱但有效的重定向方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:26:23.387

这将不起作用，因为 ajax 调用将被重定向，但您的页面已经加载并且重定向不会影响它。

删除自定义redirect_to，这对您没有帮助。

您必须检查您的 ajax 调用是否返回 302，然后您可以使用带有 window.location 的 javascript 重定向用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:19:20.930

您可以在 JavaScript 代码中指定 document.location.href

document.location.href = '什么/你/想要';

# google-app-engine - 有没有办法阻止 Google App Engine 数据存储查看器截断文本对象？

> ID：13518526
> 
> 赞同：0
> 
> 时间：2012-11-22T18:47:13.417
> 
> 标签：google-app-engine, google-cloud-datastore

我正在运行 Java GAE SDK 1.7.2。这是 localhost 上的数据存储查看器。

此外，是否可以不从文本中删除返回 (\n)，以便我可以在数据存储查看器中看到它们？

查看第二行输入 - 这是文本被截断的地方。 ![](../Images/84a05f5216c81c3bd8d283079fde8e66.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:10:42.350

实际上，Paul C 的小费并不是很好。与其创建自己的界面，不如尝试使用 Greasemonkey 或其他东西来更改页面。

# vim - 如何在 VIM 上保存文件标记？

> ID：13518529
> 
> 赞同：1
> 
> 时间：2012-11-22T18:47:28.220
> 
> 标签：vim

> **可能重复：**
> [在 vim 中，有没有办法在会话之间保存书签？](https://stackoverflow.com/questions/8958047/in-vim-is-there-a-way-to-save-bookmarks-between-sessions)

如何配置 VIM 以在下次打开 VIM 时记住文件本地小写标记？

# iphone - 如何将现有的 iphone 应用程序也迁移到 iphone 5 屏幕分辨率？

> ID：13518530
> 
> 赞同：0
> 
> 时间：2012-11-22T18:47:32.483
> 
> 标签：iphone, ios6, iphone-5

我有我现有的应用程序，我也想将这些应用程序迁移到 iPhone 5 分辨率，我尝试了很多关于这些问题的链接，我还不清楚实际迁移应用程序，请给出想法，关于这些问题. 我也参考了以下链接，但对这些问题还没有清楚的了解.... [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution) 从上面的链接我完成了启动画面，但是剩余的笔尖 ui 高度不合适，在某些屏幕上，上方会获得更多空间，而在某些下方空间会更多，所以如何解决这些问题，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:09:10.230

您要支持 iOS 5 或更早版本吗？如果没有，我建议学习 Autolayout。使用此功能，您可以设置约束以确保设备之间的布局看起来相似（为您的视图留出更多空间）。

首先，阅读本文以了解针对不同设备的推荐可用性建议（向下滚动到“在 iPhone 5 上运行”部分）：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig /TranslateApp/TranslateApp.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/TranslateApp/TranslateApp.html)

然后，对于自动布局，请查看这个 WWDC 视频： [iOS 和 OS X 的自动布局简介](https://developer.apple.com/videos/wwdc/2012/?id=202)

# shell - 使用 Jenkins 运行 ios-sim

> ID：13518532
> 
> 赞同：2
> 
> 时间：2012-11-22T18:47:46.077
> 
> 标签：shell, permissions, jenkins

[我正在尝试使用ios-sim](https://github.com/downloads/pegli/ios-sim/ios-sim-xcode4.3.tar.gz)从命令行启动我的应用程序，但这就是我得到的：

```
Started by user User
Building in workspace /Users/Shared/Jenkins/Home/jobs/UI Testing/workspace
[workspace] $ /bin/sh -xe /var/folders/h4/ws64t3bx2nnds4pg3345xrr000009c/T/hudson6341279754557259451.sh
+ /Users/myUser/Desktop/ios-sim launch /Users/Shared/Jenkins/Home/jobs/Project_Monkey_Build/workspace/build/Debug-iphonesimulator/ProjectMonkey.app

    [DEBUG] Could not start simulator session: Error Domain=DTiPhoneSimulatorErrorDomain Code=5
 "Operation failed with underlying error 4294956486." UserInfo=0x1001b1760 
{NSLocalizedDescription=Operation failed with underlying error 4294956486., 
NSUnderlyingError=0x1001a3390 "The operation couldn‚Äôt be completed. (OSStatus error -10810.)"} 
```

它看起来像一个权限问题，因为我可以从终端运行相同的命令并且它工作正常。我也尝试为 ios-sim 和 MonkeyTalk 目录提供完整的 777 权限，但仍然没有。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-17T02:27:18.600

这可能与没有“显示”的 Jenkins 进程有关。尝试以登录桌面的用户身份运行 Jenkins，然后再次运行 ios-sim。

从 launchd 卸载 Jenkins：

```
sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist 
```

然后从终端运行 Jenkins：

```
sudo su jenkins -c "JENKINS_HOME=/Users/Shared/Jenkins/Home /Library/Application\ Support/Jenkins/jenkins-runner.sh" 
```

如果这可行，您可以通过将launchd作业配置文件从移动`/Library/LaunchDaemons/org.jenkins-ci.plist`到`~/Library/LaunchAgents/org.jenkins-ci.plist`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T16:12:34.563

我知道这篇文章是不久前的，不确定是否有人在检查它，但我最近也遇到了这个问题，结果发现 iphone 模拟器中已经有一个重复的应用程序创建了一个问题，而不是让新的应用程序运行。

我重置了模拟器，然后它就可以工作了。然后我在每次运行 ios-sim 之前添加了 applescript 来重置模拟器。这个脚本可以在这里找到...

[如何从命令行重置 iOS 模拟器？](https://stackoverflow.com/questions/5125243/how-can-i-reset-the-ios-simulator-from-the-command-line)

向下滚动旁边有 13 票赞成的答案，而不是选中标记的答案。

希望这对将来的人有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:01:23.900

看起来唯一的解决方法是以超级用户身份运行命令：

```
sudo /Users/myUser/Desktop/ios-sim launch /Users/Shared/Jenkins/Home/jobs/Project_Monkey_Build/workspace/build/Debug-iphonesimulator/ProjectMonkey.app 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-11T13:54:48.850

我也遇到了同样的问题，发现 jenkins 用户没有正确设置为在模拟器上运行测试用例。按照以下网站上的说明进行操作：

[http://pivotallabs.com/ios-ci-jenkins/](http://pivotallabs.com/ios-ci-jenkins/)

请参阅“设置 JENKINS 用户”部分。

希望它也对你有用。

# android-intent - 在 android 中精确定位多个谷歌地图布局的持久性

> ID：13518536
> 
> 赞同：2
> 
> 时间：2012-11-22T18:48:18.567
> 
> 标签：android-intent

我在android中的谷歌地图布局上放置了一个精确点，当我导航到第二个布局并返回时，精确点消失了

这是我的 customPinpount 类。

```
public class CustomPinpoint extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
    private Context c;

    public CustomPinpoint(Drawable arg0) {
        super(boundCenter(arg0));

    }

    public CustomPinpoint(Drawable m, Context context ) {
        this(m);
        c = context; 

    }

    @Override
    protected OverlayItem createItem(int arg0) {
        // TODO Auto-generated method stub
        return pinpoints.get(arg0);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return pinpoints.size();
    }

    public void insertPinpoint(OverlayItem item){
        pinpoints.add(item);
        this.populate();
    }

} 
```

这是我的主要活动。

```
public class Main extends MapActivity {
    private static final int REQUEST_CHOOSE_ADDRESS = 0;
    private MapView map;
    private Touchy t;
    private List<Overlay> overlayList;
    private long start;
    private long stop;
    private MyLocationOverlay compass;
    private MapController controller;
    private int x;
    private int y;
    private GeoPoint touchedPoint;
    private Drawable d;
    private Button pinPoint;
    private EditText lat;
    private EditText lon;
    private boolean touched;
    private Button dataInter;
    private Calculate myRadius; 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setUpView();

    }

    public void calculateRadiusClicked(View view){
        Intent intent = new Intent(getBaseContext(), CalculateRadius.class);
        startActivityForResult(intent, REQUEST_CHOOSE_ADDRESS);
    }

    private void setUpView() {
        touched = false;
        map = (MapView) findViewById(R.id.themap);
        map.setBuiltInZoomControls(true);
        t = new Touchy();
        overlayList = map.getOverlays();
        overlayList.add(t);
        compass = new MyLocationOverlay(Main.this, map);
        //overlayList.add(compass);
        pinPoint = (Button) findViewById(R.id.button2);
        dataInter = (Button) findViewById(R.id.button1);
        lat = (EditText) findViewById(R.id.editlatitude);
        lon = (EditText) findViewById(R.id.editLongitude);
        d = getResources().getDrawable(R.drawable.ic_pinpoint);
        myRadius = new Calculate();

        pinPoint.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                drawPinPoint();

            }
        });

    }

    public void drawPinPoint() {

        String a = lat.getText().toString();
        String b = lon.getText().toString();

        if (!a.equals("") && !b.equals("") && touched == true) {

            AlertDialog.Builder builder = new AlertDialog.Builder(Main.this);
            builder.setMessage("Either click on the map or enter the latitude and longitude \nNot both at the same time");
            builder.setCancelable(false);
            builder.setNegativeButton("OK",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();

                        }
                    });

            AlertDialog alert = builder.create();
            alert.show();
        } else {

            if (a.equals("") && b.equals("") && touched == false) {

                AlertDialog.Builder builder = new AlertDialog.Builder(Main.this);
                builder.setMessage("Enter latitude and longitude or click on the map");
                builder.setCancelable(false);
                builder.setNegativeButton("OK",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.cancel();

                            }
                        });

                AlertDialog alert = builder.create();
                alert.show();
            }

            else if ((!a.equals("") || !b.equals("")) && touched == false) {

                int xx = Integer.parseInt(a);
                int yy = Integer.parseInt(b);
                touchedPoint = new GeoPoint(xx, yy);
                OverlayItem overlayItem = new OverlayItem(touchedPoint,
                        "What's up", "2nd String");

                CustomPinpoint custom = new CustomPinpoint(d, Main.this);
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);
                controller = map.getController();

                controller.animateTo(touchedPoint);
                map.invalidate();
                //controller.setZoom(6);

            } else if ((a.equals("") || b.equals("")) && touched == true) {

                OverlayItem overlayItem = new OverlayItem(touchedPoint,
                        "What's up", "2nd String");
                CustomPinpoint custom = new CustomPinpoint(d, Main.this);
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);
                controller = map.getController();
                controller.animateTo(touchedPoint);
                //controller.setZoom(6);

            }
            if (!a.equals("") && !b.equals("") && touched == true) {
                touched = false;
            }
        }
        touched = false;
    }

    @Override
    protected void onPause() {
        compass.disableCompass();
        super.onPause();
    }

    @Override
    protected void onResume() {
        compass.enableCompass();
        super.onResume();
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    class Touchy extends Overlay {

        public boolean onTouchEvent(MotionEvent e, MapView m) {

            if (e.getAction() == MotionEvent.ACTION_DOWN) {
                start = e.getEventTime();
                touched = true;
                x = (int) e.getX();
                y = (int) e.getY();
                touchedPoint = map.getProjection().fromPixels(x, y);

            }
            if (e.getAction() == MotionEvent.ACTION_UP) {
                stop = e.getEventTime();
            }

            return false;
        }       
    }
} 
```

这是我的第二个活动 public class CalculateRadius extends Activity { private Button calculateButton; 私人EditText transmit_power_dbm; 私人 EditText 敏感性编辑；私人EditText TXEdit；私人EditText RXEdit；私人EditText频率编辑；私人 RadioGroup radioGroup；公共计算 cal = new Calculate(); 私有 EditText cellRadius；私有静态最终 int REQUEST_CHOOSE_ADDRESS = 0; 私人主主；

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calculate_radius);
        setUpView();

    }

    private void setUpView() {
        calculateButton = (Button) findViewById(R.id.button1);
        //main = new Main();

        transmit_power_dbm = (EditText)findViewById(R.id.editTxPower);
        sencitivityEdit = (EditText) findViewById(R.id.editRxSensitivity);
        TXEdit = (EditText) findViewById(R.id.edittxHeight);
        RXEdit = (EditText) findViewById(R.id.editRxHeight);

        frequencyEdit = (EditText) findViewById(R.id.editFrequency);
        radioGroup = (RadioGroup) findViewById(R.id.radioGroup1);

        cellRadius = (EditText) findViewById(R.id.EditResult);

        calculateButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                pathLoss();

            }

        });
    }

    public void plotTheRadius(View view){

        Intent intent = new Intent(this, Main.class);
        startActivityForResult(intent, REQUEST_CHOOSE_ADDRESS);
        this.finish();
    }
} 
```

# ios - 为什么我在 Xcode 4.5 中没有收到任何编译器警告？

> ID：13518538
> 
> 赞同：0
> 
> 时间：2012-11-22T18:48:24.213
> 
> 标签：ios, xcode4.5, compiler-warnings

我最近切换到 Xcode 4.5 并且不再收到实时编译器警告。我只在构建项目后收到警告。我可以从字面上输入“laskjflskdjf”并且在编译之前不会出错。

此外，在构建项目、收到警告并解决问题后，在我再次构建项目之前，不会删除黄色或红色警告图标。

是否有我必须手动调整以更正此问题的构建设置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:45:21.047

在 Xcode 4.5.2 中，该选项位于 Preferences > General > Show live issues。通过取消选中此选项，我能够重现您所描述的内容。

# javascript - 如何将 JavaScript 项添加到 Visual Studio 解决方案

> ID：13518541
> 
> 赞同：3
> 
> 时间：2012-11-22T18:48:39.017
> 
> 标签：javascript, visual-studio

在解决方案资源管理器中的 VS 2012 中，我右键单击解决方案 -> 添加 -> 新项目。在列表中，我看到了不同的项目，例如文本文件、网页、样式表，但没有 .js 项目。到目前为止，对我来说唯一的方法是在 notepad++ 中创建它，保存它，然后将其添加为现有项目。有更快的方法吗？

谢谢你。

![在此处输入图像描述](../Images/8e71134a737000b61c8b93075a18c763.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T18:50:51.523

单击“Visual C# 项目”下窗口左侧栏上的“Web”标题。您将看到“JavaScript 文件”出现。但是，您可以轻松地添加任何类型的文件并将扩展名更改为 .js。

# python - 二叉树的边列表

> ID：13518543
> 
> 赞同：0
> 
> 时间：2012-11-22T18:48:54.253
> 
> 标签：python, binary-tree, networkx

我想为我的二叉树画一个漂亮的图。

这是我的自定义 BinaryTree 类：

```
class BinaryTree():

   def __init__(self, data):
      self.data = data
      self.right = None
      self.left = None 
```

现在，为了绘制此图，我将使用 networkx 库，因此我需要将我的图转换为 networkx 对象，然后使用 graphviz 绘制它。问题是**边缘列表**：为了构建我的新对象，我需要边缘。

例如给定一个二叉树，如下图所示。 ![在此处输入图像描述](../Images/25017d8340787c931217f7e6ba63c107.png)

我需要检索边缘列表。会是这样的：

```
[(0,1),(0,2),(2,3),(2,4)] 
```

请注意，在我的情况下，我在节点上没有 id。那么我该怎么做呢？我相信这可能是一些考虑到深度的递归函数，但我遇到了一些困难，因此感谢您的帮助。;)

编辑

感谢您的回答。但是我自己找到了一个效果很好的解决方案..：P 这里是：

```
def edgelist(node, output, id=0):

    if node is None or isinstance(node, bt.Leaf):
         return output

    if node.left:
         output.append((id, id*2+1))

    if node.right:
         output.append((id, id*2+2))

    edgelist(node.left, output, id*2+1)
    edgelist(node.right, output, id*2+2)

    return output 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:32:11.103

这是您可以修改`BinaryTree`类以转储边缘列表的一种方法：

```
import networkx as nx
import itertools as IT
import matplotlib.pyplot as plt

class BinaryTree(object):
   def __init__(self, data):
      self.data = data
      self.right = None
      self.left = None
      self.name = None
   def edgelist(self, counter = IT.count().next):
       self.name = counter() if self.name is None else self.name
       for node in (self.left, self.right):       
           if node:
               node.name = counter() if node.name is None else node.name
               yield (self.name, node.name)
       for node in (self.left, self.right):
           if node:
               for n in node.edgelist(counter):
                   yield n

tree = [BinaryTree(i) for i in range(5)]        
tree[0].left = tree[1]
tree[0].right = tree[2]
tree[2].left = tree[3]
tree[2].right = tree[4]

edgelist = list(tree[0].edgelist())
print(edgelist)   

G = nx.Graph(edgelist)
nx.draw_spectral(G)
plt.show() 
```

产量

```
[(0, 1), (0, 2), (2, 3), (2, 4)] 
```

![在此处输入图像描述](../Images/5c103479c7c476eef6fa5324b4a0c901.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:05:41.783

您可以使用 a[`collections.dequeue`](http://docs.python.org/dev/library/collections.html#collections.deque)来避免递归：

```
import collections
def edges_breadth(tree):
    history = collections.deque([tree])
    while history:
        parent = history.popleft()
        for c in (parent.left, parent.right):
            if c:
                yield((parent.data, c.data))
                history.append(c) 
```

请注意，这是广度优先遍历。您可能需要另一个[遍历顺序](http://en.wikipedia.org/wiki/Tree_traversal)，即深度优先的顺序，就像在这个前序递归实现中一样：

```
def edges_depth(tree):
    results = []
    def visit(parent, child):
        if child:
            results.append((parent, child))
            visit(child.left)
            visit(child.right)
    return results 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-07T15:00:22.857

```
 def edgelist(T):
    results = []
    def visit(parent,child):
        if child:
            if parent != None:results.append((parent.key, child.key))
            visit(child,child.left)
            visit(child,child.right)
        return results
  return visit(None,T.root) 
```

# jquery - 使用 JQuery AJAX 在 MVC4 Web API 中表单身份验证失败

> ID：13518544
> 
> 赞同：1
> 
> 时间：2012-11-22T18:48:57.450
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api

为 n00b 问题道歉，但我发现关于这个问题的信息零星。我一直在使用 MVC Web API 制作 API，并且一直在使用表单身份验证，如此处选择的答案所述： [ASP.Net MVC 4 WebAPI Authentication](https://stackoverflow.com/questions/11014953/asp-net-mvc-4-webapi-authentication)

正如预期的那样，auth cookie 在登录时在响应标头中发送。但是，当我在此之后尝试使用 [Authorize] 修饰的方法时，请求确实似乎在标头中包含了 auth cookie，但我每次都得到一个 HTTP 401。

我读过的资料表明它应该非常简单，所以我实际上不确定如何调试这个。如何确保 auth 方法确实有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:00:47.037

I had the same problem. I eventually realised I had forgotten to enable Forms Authentication in the `Web.Config` file. Changing the mode from "None" to "Forms" fixed the problem:

```
<system.web>
    <authentication mode="Forms" />
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:55:31.597

所以最后，我忽略了表单身份验证，转而使用 HTTP 基本身份验证。

这有几个原因 - 客户端（通过安全网络通过 SSL 连接）更容易实现它。对于像我这样刚接触 Web API 和 MVC4 的人来说，它也有更好的文档记录。

可以在这里找到一个很好的教程：
[http ://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)

# python - 数组中数组的 Python/Numpy 索引

> ID：13518549
> 
> 赞同：4
> 
> 时间：2012-11-22T18:49:18.663
> 
> 标签：python, numpy

我只是在玩粒子模拟器，我想将 matplotlib 与 python 和 numpy 一起使用，以尽可能高效地制作尽可能逼真的模拟器（这纯粹是用 python 进行的一个有趣的练习），我在尝试计算时遇到了问题距离的倒数。

我有一个包含粒子（x，y）位置的数组，如下所示：

```
x = random.randint(0,3,10).reshape(5,2)
>>> x
array([[1, 1],
   [2, 1],
   [2, 2],
   [1, 2],
   [0, 1]]) 
```

这是 5 个粒子，位置 (x,y) 在 [0,3] 中。现在，如果我想计算一个粒子（比如位置为（0,1）的粒子）与其余粒子之间的距离，我会做类似的事情

```
>>>x - [0,1]
array([[1, 0],
   [2, 0],
   [2, 1],
   [1, 1],
   [0, 0]]) 
```

问题是我不想将粒子与自身的距离：（0,0）。它的长度为 0，倒数是无限的，并且没有为重力或 coloumb 力定义。

所以我尝试了： where(x==[0,1])

```
>>>where(x==[0,1])
(array([0, 1, 4, 4]), array([1, 1, 0, 1])) 
```

这不是 (0,1) 粒子在 x 数组中的位置。那么如何从像 x 这样的数组中挑选出 [0,1] 的位置呢？上面的 where() 检查 x 等于 0 或 1 的位置，而不是 x 等于 [0,1] 的位置。如何在不循环的情况下执行此“numpylike”？

Ps：你如何将代码复制粘贴到stackoverflow中？我的意思是糟糕的论坛有一个 [code]..[/code] 选项，而在这里我花了 15 分钟正确缩进代码（因为 ubuntu 上的 chromium 选项卡只是跳出窗口而不是缩进 4 个空格....）这个很烦人。

**编辑：**看到我尝试的**第一个答案：**

```
x
array([[0, 2],
       [2, 2],
       [1, 0],
       [2, 2],
       [1, 1]])
>>> all(x==[1,1],axis=1)
array([False, False, False, False,  True], dtype=bool)
>>> all(x!=[1,1], axis=1)
array([ True,  True, False,  True, False], dtype=bool) 
```

这不是我所希望的，!= 应该返回没有 [1,1] 的数组。但很可惜，它错过了一个 (1,0)：

```
>>>x[all(x!=[1,1], axis=1)]
array([[0, 2],
       [2, 2],
       [2, 2]]) 
```

**Edit2**：任何成功的伎俩，它比我想象的更合乎逻辑，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:10:04.100

```
>>> import numpy as np
>>> x=np.array([[1, 1],
...    [2, 1],
...    [2, 2],
...    [1, 2],
...    [0, 1]])
>>> np.all(x==[0,1], axis=1)
array([False, False, False, False,  True], dtype=bool)
>>> np.where(np.all(x==[0,1], axis=1))
(array([4]),)
>>> np.where(np.any(x!=[0,1], axis=1))
(array([0, 1, 2, 3]),) 
```

# java - 在 Glassfish 3.1 中使用标记库时出现异常

> ID：13518557
> 
> 赞同：0
> 
> 时间：2012-11-22T18:49:48.867
> 
> 标签：java, spring, jakarta-ee, spring-mvc

尝试在 Glasfish 3.1 中部署我的应用程序时出现以下错误

```
org.apache.jasper.JasperException: PWC6033: Error in Javac compilation for JSP

PWC6197: An error occurred at line: 16 in the jsp file: /WEB-INF/jsp/signup/signup.jsp
PWC6199: Generated servlet error:
string:///signup_jsp.java:233: package org.springframework.web.servlet.tags.form does not exist 
```

spring jar 位于我的 web 应用程序的 lib 目录中。

我正在使用：Spring 3.1.3 Glassfish 3.1.1（开始使用 Maven 嵌入式插件）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:29:11.953

[我在这里](http://javaevangelist.blogspot.com/2013/01/glassfish-3-tip-of-day-using-jdk-7-with.html)偶然发现了答案

基本上你在 glassfish-web.xml 中需要这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
    <property name="compilerSourceVM" value="7"/>
    <property name="compilerTargetVM" value="7"/>
  </jsp-config>
</glassfish-web-app> 
```

# javascript - Knockout.js - mouseover 和 mouseout 无法正常工作

> ID：13518560
> 
> 赞同：2
> 
> 时间：2012-11-22T18:50:00.133
> 
> 标签：javascript, knockout.js

我正在尝试使用 knockout.js - mouseover 和 mouseout。我对淘汰赛有点陌生。我在下面做了什么：

```
 <h2 id="popup" data-bind="event: { mouseover: PK.showdiv, mouseout: PK.hidediv }">
                Search
 </h2> 
```

我的脚本块如下所示：

```
@section Javascript
{
<script type="text/javascript">
    $(function () {
        PK.showdiv = function () {
            alert("Showed");
        };
        PK.hidedivOver = function () {
            alert("Hidden");
        };
    }) 
```

如果我使用带有“onmouseover”或“onmouseout”的普通JavaScript调用，这很好用。但是像 data-bind 这样的 knockout.js 调用不起作用。

我正在使用带有 Razor 视图的 MVC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:44:37.143

我在 jsFiddle 中创建了一些示例[单击此处查看示例](http://jsfiddle.net/pkysylevych/bxeBZ/)

所以，一般来说，我在我的 ViewModel 上创建了两个函数，名称为“showdiv”和“hidediv”

**Javascript 代码：**
*注意：我们应该在我们的 js 代码底部为我们的 viewModel 应用绑定（调用 ko.applyBindings(new viewModel( ));)*

```
var viewModel = function(data) {
    var self = this;
    self.action = ko.observable("Hidden");
    self.showdiv = function () {
        //alert('Showed');
        self.action("Showed");
        $('#mySpan').addClass('redColor');
    };

    self.hidediv = function () {
        //alert('Hidden');
        self.action("Hidden");
        $('#mySpan').removeClass('redColor');           
    };

};

ko.applyBindings(new viewModel()); 
```

**HTML 代码：**

```
<div data-bind="event: { mouseover: showdiv, mouseout: hidediv }">Search</div>
<span id="mySpan" data-bind="text: action"></span> 
```

**CSS 代码**

```
div{
  width: 100px;
  height: 100px;
  border: 1px solid #222;
}
span{
  margin: 20px;
}
.redColor{
  color: red;
} 
```

**START EDIT**
抱歉，忘记提及您的错误：
**1.**您没有将 PK 初始化为

```
var PK = this; 
```

**2.**在 HTML 代码中，您不需要使用 PK 调用函数，只需输入函数的名称：

```
<h2 id="popup" data-bind="event: { mouseover: showdiv, mouseout: hidediv }">
            Search
</h2> 
```

**3.**在 javasript 代码中，你的函数名称不正确，例如 'hidedivOver'，所以你应该将此函数重命名为 'hidediv' 或者你可以将 HTML 代码中的函数 'hidediv' 重命名为 'hidedivOver'

**4.**你没有创建视图模型和未将其应用于淘汰赛

**END EDIT**

***是否回答了您的问题？***
谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:21:41.767

在我看来，您没有调用`applyBindings`函数：

```
ko.applyBindings(PK); 
```

另外我看不到您如何初始化`PK`对象。

确保`applyBindings`在页面准备好时调用。为此，您可以将其放在页面底部或内部`$(document).ready`。

# c# - INotifyPropertyChanged 不通知数据触发器

> ID：13518562
> 
> 赞同：1
> 
> 时间：2012-11-22T18:50:08.290
> 
> 标签：c#, wpf

我在 windowA 中有一个按钮，它打开一个 windowB 并更改样式以显示 windowB 已打开。当我关闭 windowB 时，我想将按钮样式改回来。两个窗口使用相同的视图模型。

在视图模型中，我使用 INotifyPropertyChanged 来检测属性 IsWindowBOpen 并使用它来更改按钮样式，如下所示：

```
<ei:DataTrigger Binding="{Binding IsWindowBOpen}" Value="True">
    <ei:GoToStateAction TargetName="myButton" StateName="IsOpen"/>
</ei:DataTrigger>
<ei:DataTrigger Binding="{Binding IsWindowBOpen}" Value="False">
    <ei:GoToStateAction TargetName="myButton" StateName="IsClose"/>
</ei:DataTrigger> 
```

打开 WindowB 时，我在视图模型中将属性 IsWindowBOpen 更改为 true。属性更改事件触发显示为 true 并且数据触发器适用。

当我关闭 WindowB 时，我在视图模型中将属性 IsWindowBOpen 更改为 false。属性更改事件触发显示为 false，但数据触发器从不应用。

我已经阅读了相当广泛的内容，但似乎找不到这种方法的逻辑错误？

@术士

在视图模型中：

```
private bool _isWindowBOpen;

    public bool IsWindowBOpen
    {
        get { return _isWindowBOpen}
        set
        {
            _isWindowBOpen = value;
            OnPropertyChanged("IsWindowBOpen");
        }
    }

private void DoClose(object param)
    {

        switch (type)
        {
            case "WindowB":
                IsWindowBOpen = false;
                break;

        }

        main.Items.Remove(windowB);
    }

protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            var test = IsWindowBOpen; //Gets set to True/False accordingly
            handler(this, new PropertyChangedEventArgs(name));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:24:28.510

准备行刑队:(

在创建 windowB 并将其绑定到“相同”视图模型时，我正在实例化一个新实例。

```
public WindowBView()
    {
        InitializeComponent();
        DataContext = new WindowABViewModel();
    } 
```

而不是使用现有的。

我为浪费大家的时间而道歉。请单枪击中心脏。

# java - 为什么我的多线程应用程序被暂停？

> ID：13518567
> 
> 赞同：1
> 
> 时间：2012-11-22T18:50:37.370
> 
> 标签：java, multithreading, wait, notify, thread-synchronization

我的多线程应用程序有一个创建多个线程的主类。主类在启动一些线程后将等待。我创建的可运行类将通过调用 Web 服务获取文件列表、获取文件和删除文件。线程完成后，它将通知主类再次运行。我的问题是它可以工作一段时间，但可能在一个小时左右后它会从我在日志中看到的输出中到达 run 方法的底部，就是这样。Java 进程仍在运行，但根据我在日志中查看的内容，它没有做任何事情。

主要类方法：

主要方法

```
while (true) {

    // Removed the code here, it was just calling a web service to get a list of companies

    // Removed code here was creating the threads and calling the start method for threads

    mainClassInstance.waitMainClass();
}

public final synchronized void waitMainClass() throws Exception {
//        synchronized (this) {
           this.wait();
//        }  
}

public final synchronized void notifyMainClass() throws Exception {
//        synchronized (this) {
           this.notify();
//        }  
} 
```

我最初对实例进行了同步，但将其更改为方法。Web 服务日志或客户端日志中也没有记录错误。我的假设是我等待并通知错误，或者我错过了一些信息。

可运行线程代码：

在运行方法结束时

```
// This is a class member variable in the runnable thread class
mainClassInstance.notifyMainClass(); 
```

我之所以进行等待和通知过程是因为我不希望主类运行，除非需要创建另一个线程。

主类的目的是产生线程。该类有一个无限循环来永远运行创建和完成线程。

**无限循环的目的是不断更新公司列表。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:03:34.690

我建议从棘手的等待/通知转移到 Java 平台中更高级别的并发工具之一。[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)可能提供了您需要的开箱即用的功能。（也可以使用[CountDownLatch ，但它更管道）让我们尝试使用您的代码作为模板来绘制一个示例：](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)

```
ExecutorService execSvc = Executors.newFixedThreadPool(THREAD_COUNT);

while (true) {

    // Removed the code here, it was just calling a web service to get a list of companies
    List<FileProcessingTask> tasks = new ArrayList<FileProcessingTask>();
    for (Company comp:companyList) {
        tasks.add(new FileProcessingTask(comp));
    }
    List<Future<FileProcessingTask>> results = execSvc.invokeAll(tasks); // This call will block until all tasks are executed.
    //foreach Future<FileProcessingTask> in results: check result
}

class FileProcessingTask implements Callable<FileResult> {  // just like runnable but you can return a value -> very useful to gather results after the multi-threaded execution
    FileResult call() {...}
} 
```

-------- 评论后编辑 ------

如果您的`getCompanies()`呼叫可以同时给您所有公司，并且不需要在处理时连续检查该列表，您可以通过首先创建所有工作项并将它们一次性提交给执行器服务来简化流程。

```
List<FileProcessingTask> tasks = new ArrayList<FileProcessingTask>();
    for (Company comp:companyList) {
        tasks.add(new FileProcessingTask(comp));
    } 
```

要理解的重要一点是 executorService 将使用提供的集合作为要执行的任务的内部队列。它接受第一个任务，将其交给池中的一个线程，收集结果，将结果放入结果集合中，然后接受队列中的下一个任务。

如果您没有生产者/消费者场景（cfr 注释），即在执行（消费）任务的同时产生新工作，那么这种方法应该足以在多个线程之间并行处理工作以一种简单的方式。

如果您有额外的要求，为什么要在处理工作时交错查找新工作，您应该在问题中明确说明。

# wordpress - Wordpress 自定义帖子 URL 重写数字

> ID：13518573
> 
> 赞同：0
> 
> 时间：2012-11-22T18:51:09.177
> 
> 标签：wordpress

所以我有几个自定义帖子类型，每个帖子名称都相同：

```
Post Type: Service (http://www.example.com/service/skincare)

Post Type: Price (http://www.example.com/price/skincare-2)

Post Type: FAQ (http://www.example.com/faq/skincare-3) 
```

我想重写 URL 以消除数字，所以它最终会是这样的：

```
Post Type: Service (http://www.example.com/service/skincare)

Post Type: Price (http://www.example.com/price/skincare)

Post Type: FAQ (http://www.example.com/faq/skincare) 
```

有谁知道我该怎么做？

这是我所有的自定义邮政编码：

```
/*
* ========================================================================
* Custom Post Types
* ========================================================================
*/

// Create 1 Custom Post type for a Demo, called HTML5-Blank
add_action('init', 'create_post_type_html5'); // Add our HTML5 Blank Custom Post Type
function create_post_type_html5()
{
register_taxonomy_for_object_type('category', 'html5-blank'); // Register Taxonomies for   Category
register_taxonomy_for_object_type('post_tag', 'html5-blank');
register_post_type('html5-blank', // Register Custom Post Type
    array(
    'labels' => array(
        'name' => __('Services', 'html5blank'), // Rename these to suit
        'singular_name' => __('Services', 'html5blank'),
        'add_new' => __('Add New', 'html5blank'),
        'add_new_item' => __('Add New Services', 'html5blank'),
        'edit' => __('Edit', 'html5blank'),
        'edit_item' => __('Edit Services', 'html5blank'),
        'new_item' => __('New Services', 'html5blank'),
        'view' => __('View Services', 'html5blank'),
        'view_item' => __('View Services', 'html5blank'),
        'search_items' => __('Search Services', 'html5blank'),
        'not_found' => __('No Servicess found', 'html5blank'),
        'not_found_in_trash' => __('No Service\'s found in Trash', 'html5blank')
      ),
    'rewrite' => array('slug' => 'service','with_front' => false),
    'public' => true,
    'hierarchical' => true, // Allows your posts to behave like Hierarchy Pages
    'has_archive' => true,
    'supports' => array(
        'title',
        'editor',
        'excerpt',
        'thumbnail'
    ), // Go to Dashboard Custom HTML5 Blank post for supports
    'can_export' => true, // Allows export in Tools > Export
    'taxonomies' => array(
        'post_tag',
        'category'
    ) // Add Category and Post Tags support
   ));

    }

    add_action('init', 'create_post_type_html5_2'); // Add our HTML5 Blank Custom Post Type
    function create_post_type_html5_2()
    {
register_taxonomy_for_object_type('category', 'html5-blank2'); // Register Taxonomies for Category
register_taxonomy_for_object_type('post_tag', 'html5-blank2');
register_post_type('html5-blank2', // Register Custom Post Type
    array(
    'labels' => array(
        'name' => __('Prices', 'html5blank2'), // Rename these to suit
        'singular_name' => __('Prices', 'html5blank2'),
        'add_new' => __('Add New', 'html5blank2'),
        'add_new_item' => __('Add New Prices', 'html5blank2'),
        'edit' => __('Edit', 'html5blank2'),
        'edit_item' => __('Edit Prices', 'html5blank2'),
        'new_item' => __('New Prices', 'html5blank2'),
        'view' => __('View Prices', 'html5blank2'),
        'view_item' => __('View Prices', 'html5blank2'),
        'search_items' => __('Search Prices', 'html5blank2'),
        'not_found' => __('No Prices found', 'html5blank2'),
        'not_found_in_trash' => __('No Price\'s found in Trash', 'html5blank2')
    ),
    'rewrite' => array('slug' => 'prices','with_front' => false),
    'public' => true,
    'hierarchical' => true, // Allows your posts to behave like Hierarchy Pages
    'has_archive' => true,
    'supports' => array(
        'title',
        'editor',
        'excerpt',
        'thumbnail'
    ), // Go to Dashboard Custom HTML5 Blank post for supports
    'can_export' => true, // Allows export in Tools > Export
    'taxonomies' => array(
        'post_tag',
        'category'
    ) // Add Category and Post Tags support
   ));

   }

   add_action('init', 'create_post_type_html5_3'); // Add our HTML5 Blank Custom Post Type
   function create_post_type_html5_3()
    {
    register_taxonomy_for_object_type('category', 'html5-blank3'); // Register Taxonomies for Category
    register_taxonomy_for_object_type('post_tag', 'html5-blank3');
    register_post_type('html5-blank3', // Register Custom Post Type
    array(
    'labels' => array(
        'name' => __('FAQ', 'html5blank3'), // Rename these to suit
        'singular_name' => __('FAQ', 'html5blank3'),
        'add_new' => __('Add New', 'html5blank3'),
        'add_new_item' => __('Add New FAQ', 'html5blank3'),
        'edit' => __('Edit', 'html5blank3'),
        'edit_item' => __('Edit FAQ', 'html5blank3'),
        'new_item' => __('New FAQ', 'html5blank3'),
        'view' => __('View FAQ', 'html5blank3'),
        'view_item' => __('View FAQ', 'html5blank3'),
        'search_items' => __('Search FAQ', 'html5blank3'),
        'not_found' => __('No Prices found', 'html5blank3'),
        'not_found_in_trash' => __('No FAQ\'s found in Trash', 'html5blank3')
    ),
    'rewrite' => array('slug' => 'faq','with_front' => false),
    'public' => true,
    'hierarchical' => true, // Allows your posts to behave like Hierarchy Pages
    'has_archive' => true,
    'supports' => array(
        'title',
        'editor',
        'excerpt',
        'thumbnail'
    ), // Go to Dashboard Custom HTML5 Blank post for supports
    'can_export' => true, // Allows export in Tools > Export
    'taxonomies' => array(
        'post_tag',
        'category'
    ) // Add Category and Post Tags support
    ));

    }

    add_action('init', 'create_post_type_html5_4'); // Add our HTML5 Blank Custom Post Type
    function create_post_type_html5_4()
    {
register_taxonomy_for_object_type('category', 'html5-blank4'); // Register Taxonomies for Category
register_taxonomy_for_object_type('post_tag', 'html5-blank4');
register_post_type('html5-blank4', // Register Custom Post Type
    array(
    'labels' => array(
        'name' => __('Before and After', 'html5blank4'), // Rename these to suit
        'singular_name' => __('Before and After', 'html5blank4'),
        'add_new' => __('Add New', 'html5blank4'),
        'add_new_item' => __('Add New Before and After', 'html5blank4'),
        'edit' => __('Edit', 'html5blank4'),
        'edit_item' => __('Edit Before and After', 'html5blank4'),
        'new_item' => __('New Before and After', 'html5blank4'),
        'view' => __('View Before and After', 'html5blank4'),
        'view_item' => __('View Before and After', 'html5blank4'),
        'search_items' => __('Search Before and After', 'html5blank4'),
        'not_found' => __('No Before and After found', 'html5blank4'),
        'not_found_in_trash' => __('No Before and After\'s found in Trash', 'html5blank4')
        ),
    'rewrite' => array('slug' => 'before-and-after','with_front' => false),
    'public' => true,
    'hierarchical' => true, // Allows your posts to behave like Hierarchy Pages
    'has_archive' => true,
    'supports' => array(
        'title',
        'editor',
        'excerpt',
        'thumbnail'
    ), // Go to Dashboard Custom HTML5 Blank post for supports
    'can_export' => true, // Allows export in Tools > Export
    'taxonomies' => array(
        'post_tag',
        'category'
    ) // Add Category and Post Tags support
));

 } 
```

# php - JpGraph 线性图

> ID：13518575
> 
> 赞同：1
> 
> 时间：2012-11-22T18:51:42.573
> 
> 标签：php, jpgraph

我有下一个线性图： http: [//fsy.xtrweb.com/nixi/info_equipo/linea_graph.php](http://fsy.xtrweb.com/nixi/info_equipo/linea_graph.php) 但我想要这样的东西（用油漆修改的图像）： http: [//fsy.xtrweb.com/nixi/info_equipo /migrafica2.jpg](http://fsy.xtrweb.com/nixi/info_equipo/migrafica2.jpg) 基本上，反向的 y 轴从 11 开始，以 1 结束 al top，x 轴从 1 到 22（这里的值是限制）。它唯一知道白天一支足球队的位置。我有以下代码：

```
<?php
include("jpgraph/jpgraph.php");
include("jpgraph/jpgraph_line.php");
include("conexion.php");

$id=$_GET['id'];

$query2="SELECT nombre FROM equipos WHERE id='".$id."'"; 
$result2=mysql_query($query2) or die("Error: ".mysql_error());
$Rs2=mysql_fetch_array($result2);
    $nombre_equipo=$Rs2[0];

        $sSQL="SELECT puesto,jornada FROM clasificaciones WHERE equipo='".$nombre_equipo."'"; 
        $result=mysql_query($sSQL);

         while ($row=mysql_fetch_array($result)){
            $puesto[]=$row[puesto];
        }

//$datos1 = array(9, 5, 12, 11, 6, 10, 9, 11, 10, 4, 7, 3, 24);
//$datos2 = array(5, 7, 1, 11, 13, 4, 9, 6, 12, 7, 1, 4, 21);

$datos1 = $puesto;

$grafico = new Graph(400, 300, "auto");
$grafico->SetScale("textlin");

$grafico->SetBackgroundGradient('#FDFDFD','#FDFDFD');
$grafico->xgrid->Show(); 

$grafico->xaxis->title->Set("Jornada");
$grafico->yaxis->title->Set("Puesto");

$grafico->yaxis->scale->SetAutoMin(1);
$grafico->yaxis->scale->SetAutoMax(11);

$lineplot1 = new LinePlot($datos1);
$lineplot1->SetColor("red");
$lineplot1->SetLegend("Equipo"); 
$lineplot1->SetWeight(2); 
$grafico->legend->SetFillColor('#FDFDFD');

$grafico->Add($lineplot1);

$grafico->Stroke();

?> 
```

谢谢 ！

# java - Hibernate 会杀死我的 Java 架构吗？

> ID：13518578
> 
> 赞同：0
> 
> 时间：2012-11-22T18:51:47.430
> 
> 标签：java, hibernate, database-design, architecture, entity-relationship

我已经阅读了 Mkyong 撰写的这篇关于**Hibernate 中一对多关系的精彩**[文章](http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example/)，但我有很大的疑问。Mkyong 在他的示例中使用了两个类：**`Stock.java and StockDailyRecord.java`**

 **我认为**类图**必须是：*“A stock has many stockdialyrecords”*，因此作为**数据库实体图**必须是：*“stock one-to-many stockdialyrecords”*。

但是Mkyong走得更远，这就是我的怀疑所在。他设置了一个名为`Stock stock on the StockDialyRecords class`. 也就是说，他创建了**双向关系**。这是对的？我理解这种方式对于 ORM，我们可以双向行走。但从**图表类**的角度来看，就像它说的：*“一个股票有很多 StockDialyRecords，一个 StockDialyRecords 有一个股票”*

我是从建筑概念的角度说的。就像它是一个循环或自相矛盾的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:54:22.813

它是双向的，因为它代表两种不同的关系：

*   stock*有很多*记录（一对多）

*   记录*参考*库存（多对多）

从商业角度来看，这两种关系都有意义。后者似乎更重要——每条记录都*必须*引用它所描述的股票。

从技术角度来看，双向关系有一些优势，例如它允许您从双方构建查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:56:38.803

是的，你绝对应该有一个多对一，作为一对多链接回来，因为 Hibernate 将为你管理关系并避免任何问题。如果您不想，则不需要，但这意味着您可能需要一些额外的编码。**

# opencl - OpenCL - 工作组之间的通信

> ID：13518584
> 
> 赞同：2
> 
> 时间：2012-11-22T18:52:32.680
> 
> 标签：opencl, gpgpu

我可以在不使用全局内存的情况下让一个工作组与另一个工作组通信吗？如果是，如何？

使用本地内存至少快 10 倍，使用寄存器甚至比全局内存快 50 倍。但我猜这些记忆不会到达工作组之外。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T22:50:39.203

你不能交流工作组，每个工作组都是一个独立的计算部分，与所有其他部分并行运行。

通信工作组的唯一方法是将内核分成两个内核，并将内核 1 的输出保存在全局内存中。之后，将其用作内核 2 的输入以继续处理。

# jquery - 应用 -webkit-transform 时 div 元素闪烁（仅转换后的元素）

> ID：13518585
> 
> 赞同：1
> 
> 时间：2012-11-22T18:52:42.213
> 
> 标签：jquery, css, webkit, webkit-transform

我有一个非常奇怪的问题：

我有一个像这样的 DIV 结构来在网站上显示一些产品：

```
<div class="visible_frame"> //THIS FRAME HAS A FIXED SIZE AND OVERFLOW:HIDDEN
    <div class="wide_container>  //THIS CONTAINER IS AS WIDE AS ALL PAGES TOGETHER
        <div class="page">  //EACH PAGE IS FLOATED AND HIDDEN BEHIND THE FRAME
            <div class="product"> //EACH PRODUCT IS FLOATED INSIDE THE PAGE
                <div class="product_overlay"></div>
            </div>
            <div class="product">
                <div class="product_overlay"></div>
               //EACH OVERLAY IS HIDDEN INSIDE PRODUCT AND MOVES UP ON HOVER
            </div>
            <div class="product">
                <div class="product_overlay"></div>
            </div>
        </div>
        <div class="page">
            <div class="product">
                <div class="product_overlay"></div>
            </div>
            <div class="product">
                <div class="product_overlay"></div>
            </div>
            <div class="product">
                <div class="product_overlay"></div>
            </div>
        </div>
    </div>
</div> 
```

好吧，你可以看到一个aprox。我的代码的副本。我使用 webkit-transform 为 PRODUCT_OVERLAY 设置动画，因此它在悬停时完全覆盖了产品。发生的情况是，就在启动运动和终止运动时，悬停后​​的所有产品都会闪烁（消失和出现）几毫秒。

更奇怪的是，只有当我有 3 个或更多页面时才会发生这种情况（我水平移动 WIDE_CONTAINER 以切换页面，就像在轮播中一样）。

我想这可能是由于很多事情造成的，因为它的结构有点复杂，但事实上它只发生在产品被悬停之后并且从来没有当有 1 或 2 页时让我觉得有些东西我没有看...

这是 3 页案例的 JSFIDDLE（发生问题的地方）：

[http://jsfiddle.net/BVV24/1/](http://jsfiddle.net/BVV24/1/)

这里是 2 页 cas（我只更改了 HTML，删除了一页）：

[http://jsfiddle.net/BVV24/2/](http://jsfiddle.net/BVV24/2/)

顺便说一句，我只是注意到这只发生在 Safari（webkit）中而不是谷歌浏览器（也是 webkit）中......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:23:05.903

这解决了我的问题

```
-webkit-backface-visibility: hidden; 
```

也解决了

```
http://stackoverflow.com/questions/6332485/transformscale-causing-blinking-when-hovering 
```

# php - ajax 在 FALSE 时返回 true

> ID：13518587
> 
> 赞同：0
> 
> 时间：2012-11-22T18:53:05.957
> 
> 标签：php, jquery, ajax, codeigniter, function

我正在使用codeigniter，我编写了一个函数来检查用户密码是否存在。这是我的模型

1.  型号：用户

    公共函数 get_some_password($username,$password) {

    ```
     $this->db->where('user_password', $password);
        $this->db->where('user_username',$username);
        $query=$this->db->get('some_users_table');
        if($query->num_rows()==1){
            return true;
        }else{
            return false;
        } 
    ```

2.  控制器

    公共函数 check_password() {
    $username=$this->uri->segment(3); $temp_pass= $this->input->post('current_password'); $password=md5($temp_pass); $this->user->get_some_password($username,$password);

    ```
    } 
    ```

    1.  视图上的ajax

    //页面加载完成

    var 成功1 = $(".success"); //成功时出现的视图上的div var error1 = $(".error"); //如果错误成功1.hide（）出现在视图上的div；error1.hide();

    ```
     $('#change_password').click(function() {
            var username = $('#username').val();
            dataString2 = $('#changpassword').serialize();
            $.ajax({
                type: "POST",
                url: '<?php echo base_url(); ?>controller_name/check_password/' + username,
                data: dataString2,
                success: function() {
                    $('.success').html('password successfully updated!'),
                            success1.slideDown('slow');

                },
                error: function() {
                    $('.error').html('Wrong current password!'),
                            error1.slideDown('slow');
                }

            }); 
    ```

问题：即使返回的用户名或密码为假，Ajax 也会加载成功 div，我在哪里遗漏了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:00:29.967

这是正确的行为，因为当响应代码不是 200 时会执行 jquery 错误：

1）您可以在成功方法中解析返回值。

例如

```
success: function(data) {
    if (data == 'true') {
        // Success
    } else {
        // Error
    }
} 
```

2）您可以从服务器404、500、503...返回错误代码来触发错误函数的执行。

例如

```
header("Status: 404 Not Found"); 
```

注意：标题应在任何输出完成之前执行。

在您的控制器中尝试：

```
public function check_password() {
    $username=$this->uri->segment(3); 
    $temp_pass= $this->input->post('current_password'); 
    $password=md5($temp_pass); 
    if(!$this->user->get_some_password($username,$password)) {
        $this->output->set_status_header('500');
        return;
    }
    ...
} 
```

# c++ - 从文件 c++ 中读取包括空格和排除换行符的字符

> ID：13518593
> 
> 赞同：1
> 
> 时间：2012-11-22T18:53:54.290
> 
> 标签：c++, file, map, char

正如标题所示，我想从文件中读取每个字符，包括空格和不包括新行。

文件外观的示例。

```
 .       
##         . :
   #___-     
##
--------------
______________ 
```

然后我使用地图将每个字符转换为整数。

地图`std::map<char, int> map_converter;`

```
std::ifstream map("level_1.map");

for( int t = 0; t < TOTAL_TILES; t++ ) {
    int tileType = -1;
    char load_type = ' ';

    map >> load_type;
    tileType = map_converter.find(load_type)->second;
    tiles[t] = new Tile(x, y, tileType);
} 
```

当我编译它时，我只得到一个`分段错误（核心转储）

我该怎么办？`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:23:51.003

如果[std::map::find](http://www.cplusplus.com/reference/stl/map/find/)找不到它将返回的值`std::map::end`。这个问题是分配`tileType = std::map::end()->second`无效。

```
std::ifstream map("level_1.map");

for( int t = 0; t < TOTAL_TILES; t++ ) {
    int tileType = -1;
    char load_type = ' ';

    map >> std::noskipws >> load_type;

    if (map_converter.find(load_type) == map_converter.end()) {
        continue;
    }
    tileType = map_converter.find(load_type)->second; //this is now safe to do.
    tiles[t] = new Tile(x, y, tileType);
} 
```

# bash - 在 CShell 脚本中忽略用户的 ~/.cshrc，相当于 bash

> ID：13518594
> 
> 赞同：1
> 
> 时间：2012-11-22T18:54:21.590
> 
> 标签：bash

我有一个`cshell`带有参数的脚本`-f`来忽略用户的`~/.cshrc`文件。

有 bash 等价物吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:04:11.467

从`bash`手册页：

*   `--norc`：如果shell是交互式的，不要读取和执行系统范围的初始化文件/etc/bash.bashrc和个人初始化文件~/.bashrc。如果 shell 作为 sh 调用，则默认情况下此选项处于启用状态。
*   `--noprofile`: 不要读取系统范围的启动文件 /etc/profile 或任何个人初始化文件 ~/.bash_profile、~/.bash_login 或 ~/.profile。默认情况下，bash 在作为登录 shell 调用时会读取这些文件。

如果您想继续使用系统范围的 rc 文件，而不是个人的，我想您可以使用以下内容并只命名系统范围的文件：

*   `--rcfile file`：如果 shell 是交互式的，则从文件而不是系统范围的初始化文件 /etc/bash.bashrc 和标准的个人初始化文件 ~/.bashrc 执行命令。

# jquery - Div 滚动同步：滚动顶部在 Android 上返回错误值

> ID：13518597
> 
> 赞同：1
> 
> 时间：2012-11-22T18:54:28.127
> 
> 标签：jquery, synchronization, scroll

通常我使用此代码来同步 2 个 div。

```
$('#right').on('scroll', function () {
    $('#left').scrollTop($(this).scrollTop());
});​ 
```

它在 PC 上运行良好，但在我的三星 Galaxy 选项卡上却不行？？！！

**编辑**

经过一些测试，我发现该`scrolltop`值不正确：它没有考虑平滑滚动结束动画或类似的东西。因此，无法同步 2 个 div。

这是一个解释问题的新小提琴：http: [//jsfiddle.net/sgcer/156/](http://jsfiddle.net/sgcer/156/)

有人可以解释为什么以及如何解决问题吗？欢迎对其他平板电脑上的测试发表任何评论。

我已经尝试过类似的事件`touchmove`，`touchend`...，但不是运气[http://jsfiddle.net/sgcer/146/](http://jsfiddle.net/sgcer/146/)

我的平板电脑上发生了无休止的滚动事件：http: [//jsfiddle.net/sgcer/157/](http://jsfiddle.net/sgcer/157/)

我在这里发现了一个潜在的问题：http: //code.google.com/p/android/issues/detail?id= [19625](http://code.google.com/p/android/issues/detail?id=19625)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:15:20.630

事实上，它适用于 Chrome 浏览器应用程序，但不是默认浏览器。

# python - 在嵌套字典中使用递归？

> ID：13518599
> 
> 赞同：0
> 
> 时间：2012-11-22T18:54:31.233
> 
> 标签：python

> **可能重复：**
> [如何在 python 2.7x 中展平嵌套字典](https://stackoverflow.com/questions/13490963/how-to-flatten-a-nested-dictionary-in-python-2-7x)

如果我有字典：

```
dictionaryname= { 'key1' : 'value1',
                     'key2' : 'value2',
                     'key3' : { 'key3a': 'value3a' },
                     'key4' : { 'key4a': { 'key4aa': 'value4aa',
                                           'key4ab': 'value4ab',
                                           'key4ac': 'value4ac'},
                                'key4b': 'value4b'}
                   } 
```

我该怎么做才能使结果如下：

```
key1
value1
key2
value2
key3
key3a
value3a
... 
```

我只需要打印整个字典，不一定按正确的顺序。

如果我使用：

```
def print_all(dictionaryname):
    for i in dictionaryname:
        print i 
```

我只得到：

```
key1
key2
key3
... 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:59:07.057

我想出了：

```
def printdict(d):
    for key, value in sorted(d.items()):
        print key
        if isinstance(value, dict):
            printdict(value)
        else:
            print value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:56:57.797

您必须使用函数来展平结构：

```
def flatten(d):
    for k, v in d.iteritems():
        yield k
        if isinstance(v, dict):
            for subitem in flatten(v):
                yield subitem
        else:
            yield v 
```

然后用它来循环你的结构：

```
for item in flatten(dictionaryname):
    print item 
```

Python 字典没有排序，因此输出不会按照您声明结构的顺序进行排序或匹配。

没有的版本`yield`：

```
def flatten(d, res=None):
    if res is None:
        res = []
    for k, v in d.iteritems():
        res.append(k)
        if isinstance(v, dict):
            flatten(v, res)
        else:
            res.append(v)
    return res 
```

两个版本都打印：

```
>>> for item in flatten(dictionaryname):
...     print item
... 
key3
key3a
value3a
key2
value2
key1
value1
key4
key4a
key4ab
value4ab
key4ac
value4ac
key4aa
value4aa
key4b
value4b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T18:58:50.967

```
def print_all(d):
    if isintance(d, dict):
        for k,v in sorted(d.items()):
            print k
            print_all(v)
    else:
        print d 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T19:11:53.297

一种有趣但不是很“正确”的方法是将字典转换为 json 字符串并进行拆分。

# php - CakePHP 缓存 i18n 翻译

> ID：13518603
> 
> 赞同：8
> 
> 时间：2012-11-22T18:54:55.247
> 
> 标签：php, cakephp, caching, internationalization

当我忘记在 Project VIEW 某处翻译某些内容时，我更改文件**/app/Locale/por/LC_MESSAGES/default.po**并将其发送回服务器。

但大多数情况下，这个*“新翻译”*需要几个小时才能被查看，简而言之：我只是发送文件，清理缓存和浏览器 CakePHP，按 F5，然后……什么**都没有发生**。

是什么原因？

**[编辑]**

```
<?php echo $this->Form->input('Item.0.description', array('label' => false, 
'class' => 'span12', 'div' => array('class' => 'span7'), 'rows' => 3,
'placeholder' => __('Type the description'))); ?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T19:57:11.987

要强制更新语言，您可以清除目录中的`persistent`和目录。如果启用了视图缓存，您也必须进行清理。`models``/tmp/cache``views`

`debug`当设置为`2`（这是在开发期间使用框架的值）时禁用缓存，并且`persistent`目录中填充了新的缓存文件，每次加载视图时都会覆盖旧的缓存文件。因此，`debug`切换和随后的浏览器刷新可能会为您清除旧语言文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:27:26.450

我找到了一个奇怪的解决方案：

我设置（app/Config/core.php）...

```
Configure::write('debug', 2); // It was 0 
```

按，F5 ......等等......然后工作。后来，我回...

```
 Configure::write('debug', 0); 
```

再次按F5，就可以了。

为什么？我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-28T00:21:50.783

即使`Configure::write('debug', 2);`我建议删除包含翻译的远程文件夹，使用浏览器刷新（以声明不再翻译任何内容）然后重新上传翻译文件夹。

对我来说完美地工作。

# c - 为什么不能定义大于 300*300 的二维数组？

> ID：13518605
> 
> 赞同：1
> 
> 时间：2012-11-22T18:55:00.943
> 
> 标签：c, arrays

> **可能重复：**
> [C 中的最大数组大小](https://stackoverflow.com/questions/13504807/max-array-size-in-c)

这是我的代码。我从两个文本文件中读取两个字符串并存储它们。然后我定义了两个二维数组，但问题是，大小非常有限。例如，如果我将 size 定义为 400，则在编译时会遇到堆栈溢出。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <windows.h>
#include <time.h>

#define BUFSIZE 2000
#define size 400

int main()
{
    int a = 0, len1 = 0, len2 = 0;
    char string1[BUFSIZE];
    char string2[BUFSIZE];
    char *suc;

    FILE *fp1 = fopen("input1.txt", "r");
    FILE *fp2 = fopen("input2.txt", "r");
    if ((fp1 == 0)||(fp2 == 0))
    {
        fprintf(stderr, "Error while opening");
        return 0;
    }

    suc = fgets(string1, BUFSIZE, fp1);
    if (!suc) {
        // fgets failed, what now? exit?
        return EXIT_FAILURE;
    }

    suc = fgets(string2, BUFSIZE, fp2);
    if (!suc) {
        // see above
        return EXIT_FAILURE;
    }

    len1=strlen(string1);
    len2=strlen(string2);

    int LCSLength[size][size];
    for(int i=0;i<size;i++)
    {
        for(int j=0;j<size;j++)
        {
            LCSLength[i][j]=0;
        }
    }

    int index[size][size];
    for(int i=0;i<size;i++)
    {
        for(int j=0;j<size;j++)
        {
            index[i][j]=0;
        }

    }

    printf("The two strings are: \n\n");
    printf("%s\n", string1);
    printf("The length is %d\n\n", len1);
    printf("%s\n", string2);
    printf("The length is %d\n\n", len2);

    int x=0;
    scanf("%d", &x);
    fclose(fp1);
    fclose(fp2);
    return 0;

} 
```

它与我的编译器有关吗？它是 MS Visual C++ 2010 Express。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:10:48.970

```
int LCSLength[size][size];
int index[size][size]; 
```

这是占主导地位的两大巨头。2 x 4 x 400 x 400 = 1,280,000 字节。进程主线程的默认堆栈大小是 1 兆字节，它们不适合。在 main() 入口点探测堆栈的 __alloca_probe() 调试函数会生成此站点命名的异常。

线程的堆栈大小在 CreateThread() 中指定，但进程的主线程由 Windows 启动。它从 EXE 标头 IMAGE_OPTIONAL_HEADER.SizeOfStackReserve 字段中检索请求的大小。它是在您构建程序时由链接器编写的。您使用 /STACK 链接器选项覆盖默认值，在 IDE 中，它由 Project + Properties、Linker、System、Stack Reserve Size 选项设置。

# javascript - 用jquery验证后正常提交表单

> ID：13518606
> 
> 赞同：0
> 
> 时间：2012-11-22T18:55:09.827
> 
> 标签：javascript, jquery, html, forms

我从这里使用 jquery.form.js：http: [//www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)。我想在提交之前验证表单中文本输入的文本。验证转到“search_validate.php”。这部分工作正常。如果验证通过，则更改表单操作。这也有效。

更改操作属性后无法正常提交表单。浏览器永远不会进入“/videos/search/”页面。它保持在同一页面上。我一遍又一遍地看到在 Firebug 中加载“/videos/search/”页面。

```
<form id="search" method="post" action="">
<input type="text" id="query" />
<input type="image" id="searchmag" src="blah.jpg" ?>
</form>

<script>
$(function(){
  $('#searchmag').click(function(){
    $('#search').attr('action','/search_validate.php');

    $('#search').ajaxForm(function(data, textStatus){
      if ((data.indexOf('letters & numbers only')>-1)) {
      $('#query').css('color','#FF0000').val(data); 

      $("#query").unbind("click").click(function(){
        $('#query').css('color','#848484').val('');
      });
    } else {
      $('#search').attr('action','/videos/search/' + $('#query').val());
      $('#search').submit();
    }
    });
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T21:45:37.553

这总是对我有用：

```
$("#myForm").on("submit", function(event) {
    event.preventDefault();

    // Validate form, returning on failure.

    $(this).off("submit");

    this.submit();
}); 
```

我希望这有帮助！

# c++ - 具有最佳提示、自动完成或自动填充功能的 C++ IDE

> ID：13518608
> 
> 赞同：0
> 
> 时间：2012-11-22T18:55:17.060
> 
> 标签：c++, xcode, windows, autocomplete, ide

我正在从 MAC/XCode C++ 开发转向 Windows 平台（请不要再问为什么了？）

我已经在 XCode 中编程了一段时间，我注意到它有一个惊人的提示和自动完成助手。

现在在 Windows 中……我感觉我回到了 80 年代，我已经尝试过 NetBeans、Visual Studio 2012、Dev++、Eclipse……至少可以说都是垃圾。

他们甚至无法提示或自动填充本地 var 或本地类方法，我需要再次输入每个单词，我错过了 XCode 中的很多实时解析……嗅探。

有什么“提示”吗？或插入我可以检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:08:36.473

我也更喜欢 QtCreator 而不是 Visual Studio，但是如果你将[Wholetomato Visual Assist](http://www.wholetomato.com/)插件添加到 Visual Studio 中，它会变得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:01:14.097

我对 QtCreator 很满意，但它提供了最好的开发 Qt 特定代码。

说实话，我在 Visual Studio 中工作了很多，直到 2010 年，自动完成等工作，有点慢。如果你认为它很垃圾，也许你也会不喜欢 QtCreator。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:10:18.433

我认为您需要检查更多 Eclipse、Netbeans 和 Visual Studio 的**重构**功能，或者您可以编辑新类型的**模板**。

# java - 用 JFrame 调用 JComboBox

> ID：13518610
> 
> 赞同：0
> 
> 时间：2012-11-22T18:55:30.373
> 
> 标签：java, user-interface, jframe, jcombobox

我是在 Java 中创建 GUI 的新手，我想在另一个类中的 JFrame 中实现 JComboBox（它使用 GlazedLists）。是否可以在我的 JFrame 中调用此 JComboBox？我问是因为我使用 NetBeans（禁止编辑某些部分代码）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:05:28.367

您可以访问对`JComboBox`任何其他变量的引用。组合框变量的名称将取决于您是否扩孔对象（您可以从表单检查器中执行此操作，通常在设计模式下在项目窗口下找到）

虽然您无法修改受保护块中的代码，但您仍然可以正常影响代码中的组合框（或任何其他组件），只需确保`initComponents`已首先调用

# http - URL 应该使用什么字符编码？

> ID：13518617
> 
> 赞同：1
> 
> 时间：2012-11-22T18:56:04.373
> 
> 标签：http, url, character-encoding

我见过一些浏览器（例如）将 é 编码为 %E9 (ISO-8859-1) 或 %C3%A9 (UTF-8)，但我不确定哪个是正确的。有没有办法查看请求被解释为什么编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:21:18.573

不，完全由服务器决定如何编码非 ASCII 字符。很遗憾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:47:48.963

URI 方案决定如何对 URI 进行编码。

对于*新的*URI 方案，[建议使用](https://www.rfc-editor.org/rfc/rfc2718#section-2.2.5)UTF-8 ：

> 除非有一些令人信服的理由让特定方案不这样做，否则建议将字符序列转换为 UTF-8 (RFC 2279)，然后随后`%HH`对不安全的八位字节使用编码。

`http`并且`https`不指定应该如何编码 URI。

对于 IRI，相应的 URI[必须以](https://www.rfc-editor.org/rfc/rfc3987#section-1.2)UTF-8 编码：

> 对应于所讨论的 IRI 的 URI 必须使用 UTF-8 将原始字符编码为八位字节。

# c# - 我必须怎么做才能让我的方法可以等待？

> ID：13518619
> 
> 赞同：45
> 
> 时间：2012-11-22T18:56:35.063
> 
> 标签：c#, windows-8, async-await, windows-store-apps

如何滚动我自己的异步等待方法？

我看到在某些情况下编写异步方法很容易：

```
private async Task TestGeo()
{
    Geolocator geo = new Geolocator();
    Geoposition pos = await geo.GetGeopositionAsync();
    double dLat = pos.Coordinate.Latitude;
    double dLong = pos.Coordinate.Latitude;
} 
```

...但遗憾的是，尽管如此，也不是任何方法都可以随意异步化；也就是说：这不起作用：

```
private async Task TestAsyncAwait()
{
    int i = await TaSLs_Classes.TASLsUtils.GetZoomSettingForDistance(5);
} 
```

...它阻止了我的编译错误，“无法等待 int”；设计时的提示同样告诉我，“类型'int'不可等待”

我也试过这个，结果相同：

```
 Task<int> i = await TaSLs_Classes.TASLsUtils.GetZoomSettingForDistance(5); 
```

我必须怎么做才能让我的方法可以等待？

## 更新

正如 Linebacker 和 S. Cleary 所指出的（与曾经在 KNBR 上的那只猫有任何关系吗？），这很有效：

```
int i = await Task.Run(() => TaSLs_Classes.TASLsUtils.GetZoomSettingForDistance(5)); 
```

...也就是说，它可以*编译*——但它从不“移动”。

在运行时，它告诉我应该“等待”对 TestAsyncAwait() 的 CALL，但如果我这样做，它根本不会编译......

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-22T19:53:20.460

您只*需要*返回一个可等待的。`Task`/`Task<TResult>`是常见的选择；`Task`可以使用`Task.Run`（在后台线程上执行代码）或`TaskCompletionSource<T>`（包装异步事件）来创建 s。

阅读[基于任务的异步模式](http://msdn.microsoft.com/en-us/library/hh873175.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-04T17:24:08.770

你的方法

```
private async Task TestAsyncAwait()
{
    int i = await TaSLs_Classes.TASLsUtils.GetZoomSettingForDistance(5);
} 
```

应该这样写

```
private async Task TestAsyncAwait()
{
    Task<int> t = new Task<int>(() =>
    {
        return TaSLs_Classes.TASLsUtils.GetZoomSettingForDistance(5);
    });
    t.Start();
    await t;
} 
```

如果需要返回int，替换Task类型：

```
private async Task<int> TestAsyncAwait()
{
    Task<int> t = new Task<int>(() =>
    {
        return TaSLs_Classes.TASLsUtils.GetZoomSettingForDistance(5);
    });
    t.Start();
    return await t;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-11T21:43:36.060

```
var something = Task<int>.Factory.StartNew(() => 0);
something.Wait();
int number = something.Result; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T20:42:00.507

您需要消耗等待的回报或回报`Task<Type of await call>`

1.  ```
    private async Task<Geoposition> TestGeo()
    {
        Geolocator geo = new Geolocator();
        return await geo.GetGeopositionAsync();
    } 
    ```

2.  ```
    private async Task<int> TestAsyncAwait()
    {
        return await TaSLs_Classes.TASLsUtils.GetZoomSettingForDistance(5);
    } 
    ```

# c - 如何知道数组是否已排序？

> ID：13518620
> 
> 赞同：0
> 
> 时间：2012-11-22T18:56:35.743
> 
> 标签：c, arrays, algorithm, sorting, statistics

我已经阅读了这篇文章，但答案并不满意[Check if Array is sorted in Log(N)](https://stackoverflow.com/questions/12752241/check-if-array-is-sorted-in-logn)。

想象一下，我有一个超过 1,000,000 个**`double`**数字（正数和/或负数）的大型数组，我想知道数组是否已“排序”，试图避免最大比较次数，因为比较双精度数和浮点数需要太多时间。是否可以对它使用统计信息？如果它是：

1.  真正的程序员很容易看到它吗？
2.  我应该取样吗？
3.  我应该取多少个样本
4.  它们应该是随机的还是按顺序排列的？
5.  %error 允许说*`"the array sorted"`*多少？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:00:03.580

这取决于您的要求。如果您可以说如果 1.000.000 中的 100 个随机样本就足够了，那么假设它已排序 - 那么就是这样。但可以肯定的是，您将始终必须检查每一个条目。只有您可以回答这个问题，因为只有您知道您需要对它进行排序有多确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:46:07.400

这是高中教授的经典概率问题。考虑[这个问题](http://answers.yahoo.com/question/index?qid=20081119152814AAdCP5X)：

> 批次被拒绝的概率是多少？在 8,000 个批次中，有 7% 的时钟有缺陷。从 8,000 个中随机抽取 10 个（无替换）样本并进行测试。如果至少有一个有缺陷，则整个批次将被拒绝。

所以你可以从你的大数组中随机抽取一些样本，看看它是否排序，但你必须注意，你需要知道**样本乱序的概率**。由于您没有该信息，因此概率方法在这里不会有效。

（但是，您可以检查 50% 的数组并天真地得出结论，它有 50% 的机会正确排序。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T19:54:32.303

决定数组是否排序的最大比较次数是N-1，因为有N-1个相邻的数对要比较。但为简单起见，我们会说 N，因为我们看 N 或 N+1 个数字并不重要。

此外，从哪里开始并不重要，所以让我们从头开始。比较#1（A[0] 与 A[1]）。如果失败，则数组未排序。如果成功了，很好。

正如我们只比较，我们可以将其减少到邻居以及左侧是否小于或等于（1）或不（0）。所以我们可以把数组看成一个0和1的序列，表示两个相邻的数字是否有序。

计算错误率或概率（正确拼写？）我们将不得不查看 0/1 序列的所有组合。我会这样看：我们有一个数组的 2^n 个组合（即对的顺序，其中只有一个被排序（所有元素都是 1，表示每个 A[i] 小于或等于 A[我+1]）。

现在这似乎很简单：最初的错误是 1/2^N。在第一次比较之后，可能的组合（所有未排序）的一半被淘汰。所以错误率应该是1/2^n + 1/2^(n-1)。

我不是数学家，但计算达到错误率需要多少元素应该很容易（找到 x 使得 ERROR >= sum of 1/2^n + 1/2^(n-1) ... 1/^(2-x) )

对不起，令人困惑的英语。我来自德国。。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T19:03:37.747

如果您使用多处理运行分治算法（真正的并行性，因此仅适用于多核 CPU），您可以检查数组是否在 Log(N) 中排序。

如果你有 GPU 多处理，你可以很容易地实现 Log(N)，因为现代显卡能够并行运行数千个进程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T19:27:39.800

您的问题 5 是您需要回答以确定其他答案的问题。为确保数组完美排序，您必须遍历每个元素，因为其中任何一个元素都可能不合适。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T19:48:33.963

作为示例，您可能不应该使用但演示了采样大小：

统计上有效的样本量可以为您提供合理的排序估计。如果您想 95% 确定 eerything 已排序，您可以通过创建一个真正随机的采样点列表来做到这一点，可能约为 1500。

从本质上讲，如果在一个地方出现乱序的值列表会破坏后续算法或数据要求，那么这完全没有意义。

如果这是一个问题，请在代码运行之前对列表进行预处理，或者在代码中使用非常快速的排序包。大多数排序包也有一个验证模式，它只是告诉你是，列表符合你的排序标准 - 或不。其他建议，例如使用线程并行化检查是个好主意。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T19:03:29.123

由于每一个元素都可能是一个不合规的元素，因此您必须遍历所有元素，因此您的算法的运行时间为 O(n)。

如果您对“排序”的理解不那么严格，则需要指定“排序”的含义。通常，“排序”意味着相邻元素满足更少或更少或相等的条件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-22T19:34:00.307

就像其他人所说的那样，100% 确定它已排序的唯一方法是遍历每个元素，即 O(N)。

但是，在我看来，如果您非常担心它会被排序，那么也许从一开始就对其进行排序比将数组元素存储在内存中的连续部分中更重要？

我要说的是，您可以使用一个[地图](http://www.cplusplus.com/reference/stl/map/)，其元素根据定义遵循[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)。换句话说，地图中的元素总是被排序的。您也可以使用一[组](http://www.cplusplus.com/reference/stl/set/)来达到相同的效果。

例如：`std::map<int,double> collectoin;`将允许您几乎像数组一样使用它：`collection[0]=3.0; std::cout<<collection[0]<<std:;endl;`。当然存在差异，但如果排序如此重要，那么数组是存储数据的错误选择。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-22T19:39:03.793

老式的方式。打印出来看看是否有顺序。真的，如果你的排序是错误的，你可能很快就会看到它。如果您对 100 多件物品进行分类，则不太可能只看到一些错误。每当我处理它时，我的整个事情都完全关闭或者它起作用了。

# sql - 0 附近的存储过程出错

> ID：13518621
> 
> 赞同：0
> 
> 时间：2012-11-22T18:56:37.740
> 
> 标签：sql, sql-server-2005, stored-procedures, sql-server-2008-r2

我在 SQL Server 中有以下存储过程：

```
DECLARE @SQL_DtsAcumGPSDataZeros NVARCHAR(MAX);
SET @SQL_DtsAcumGPSDataZeros= N'SELECT [counter]
      ,[iID]
      ,[iVehicleID]
      ,[fTripDistance]
      ,[dtDateTime]
      ,[fLongitude]
      ,[fLatitude]
      ,[bLatLongValid]
      ,[fSpeed]
      ,[bIgnition]
      ,[bStopFlag]
      ,[fTripTime]
      ,[bWorkHours]
      ,[iLogReason]
      ,[bLatLongValidGuess]
      ,[bAux1]
      ,[bAux2]
      ,[bAux3]
      ,[bAux4]
      ,[bAux5]
      ,[bAux6]
      ,[bAux7]
      ,[bAux8]
  INTO ' + @DtsAcumGPSDataZeros + N' 
  FROM ' + @DtsAcumGPSData +
  N' WHERE fTripDistance= 0'
  EXECUTE sp_executesql @SQL_DtsAcumGPSDataZeros
  PRINT @SQL_DtsAcumGPSDataZeros
  GO 
```

并得到错误

> *消息 102，级别 15，状态 1，第 2 行
> “0”附近的语法不正确。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:24:59.647

尝试使用 0 作为参数

```
DECLARE @SQL_DtsAcumGPSDataZeros NVARCHAR(MAX),
        @id int = 0
SET @SQL_DtsAcumGPSDataZeros= N'SELECT [counter]
      ,[iID]
      ,[iVehicleID]
      ,[fTripDistance]
      ,[dtDateTime]
      ,[fLongitude]
      ,[fLatitude]
      ,[bLatLongValid]
      ,[fSpeed]
      ,[bIgnition]
      ,[bStopFlag]
      ,[fTripTime]
      ,[bWorkHours]
      ,[iLogReason]
      ,[bLatLongValidGuess]
      ,[bAux1]
      ,[bAux2]
      ,[bAux3]
      ,[bAux4]
      ,[bAux5]
      ,[bAux6]
      ,[bAux7]
      ,[bAux8]
  INTO ' + @DtsAcumGPSDataZeros + N'
  FROM ' + @DtsAcumGPSData +
  N' WHERE id = @id'
  EXEC sp_executesql @SQL_DtsAcumGPSDataZeros, N'@id nvarchar(100)', @id
  PRINT @SQL_DtsAcumGPSDataZeros 
```

# matlab - 如何在 MATLAB 中创建浮点数组？

> ID：13518624
> 
> 赞同：1
> 
> 时间：2012-11-22T18:56:42.333
> 
> 标签：matlab, floating-point

我正在尝试在 MATLAB 中创建一个 10 x 8 数组，其中填充了浮点值。

想法？

更新：
我实际上是在尝试创建一个空的 10 x 8 浮点型数组。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T12:08:40.347

你可能想看看这个[`zeros`](http://www.mathworks.de/de/help/matlab/ref/zeros.html)函数。要创建一个包含全零的 10 x 8 矩阵，请使用

```
matrix = zeros(10, 8); 
```

要强制元素为某种类型（例如单精度），请使用附加`class`参数，例如

```
matrix = zeros(10, 8, 'single'); 
```

（我认为，默认是双精度）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:59:26.987

更新：OP的澄清使这个答案过时了。

* * *

如果您只想创建具有特定值的矩阵，这是一种单行方法：

数据 = [0。0.1 0.2 3\. 4\. 5\. 6\. 7\. 8\. 0.9;0\. 0.1 0.2 3\. 4\. 5\. 6\. 7\. 8\. 0.9; ...; 0\. 0.1 0.2 3\. 4\. 5\. 6\. 7\. 8\. 0.9]

多线方法（如果您要复制粘贴数据）：

数据 = [
0\. 0.1 0.2 3\. 4\. 5\. 6\. 7\. 8\. 0.9
0\. 0.1 0.2 3\. 4\. 5\. 6\. 7\. 8\. 0.9
0\. 0.1 0.2 3\. 4\. 5\. 6\. 7 . 8\. 0.9
0\. 0.1 0.2 3\. 4\. 5\. 6\. 7\. 8\. 0.9
...
0\. 0.1 0.2 3\. 4\. 5\. 6\. 7\. 8\. 0.9
]

但是，正如许多人`rand(10,8)`在床上写的那样，您可以看到，通常的做法是不使用某种函数来创建 (10,8) 矩阵。说：`rand`, `ones`, `zeros`, 或其他一些技巧说`reshape((1:1:80), 10, 8)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T19:06:50.120

```
matrix = single(rand(10,8)); 
```

float 是 Matlab 中的单曲

`rand(10,8);`返回一个尺寸为 10x8 的矩阵，格式为双精度...您可以将返回值转换`single(rand(10,8))`为获取浮点值...如果由于某种原因您需要浮点精度而不是双浮点精度

# c++ - 从基类 C++ 调用虚方法

> ID：13518631
> 
> 赞同：3
> 
> 时间：2012-11-22T18:57:28.803
> 
> 标签：c++, function, virtual

我是 C++ 新手，我很难弄清楚我的虚函数出了什么问题。所以，这就是我所拥有的：

**GEntity.h**

```
class GEntity
{
public:
    //...
    virtual void tick(void);
    virtual void render(void);
    //...
}; 
```

**GEntity.cpp**

```
//...
void GEntity::tick(void){}
void GEntity::render(void){}
//... 
```

**GLiving.h**

```
class GLiving : public GEntity
{
public:
    //...
    virtual void tick(void);
    virtual void render(void);
    //...
}; 
```

**GLiving.cpp**

```
//...
void GEntity::tick(void){}
void GEntity::render(void){}
//... 
```

然后我有其他派生自 GLiving (Player, Enemy) 的类，它们实现了这两种方法的自己的版本： **Player.h**

```
class Player : public GLiving
{
public:
    //...
    void tick(void);
    void render(void);
    //...
}; 
```

**播放器.cpp**

```
//...
void GEntity::tick(void)
{
    //Here there's some actual code that updates the player
}
void GEntity::render(void)
{
    //Here there's some actual code that renders the player
}
//... 
```

现在，如果我声明一个 Player 类的对象，并调用 render/tick 方法，一切都很顺利，但我处于将我的播放器添加到 GEntity 的数组列表（我创建的结构）的情况，然后，当我取回它时，我将它作为 GEntity 获取，并且我需要在不知道它的派生类的情况下调用渲染/滴答方法...我已经尝试使用上面的代码，但我在其中的行中遇到访问冲突我在提取的 GEntity 上调用 render 或 tick 方法...
...是我想要实现的吗？
（对不起，如果我的英语不太好，但我是意大利人）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:07:53.917

如果您有一个 then 数组，`GEntity`则每次“添加”派生类型时，都会发生等效情况：

```
GEntity g;
Player p;
g = p; // object slicing, you assigned a Player to a GEntity object.
g.render(); // GEntity::render() gets called 
```

另一方面，您可以使用指向基类的指针来访问派生方法：

```
GEntity* g;
Player p;
g = &p;
g->render(); // calls Player::render() 
```

因此，处理容器中的多态性的一种方法是拥有指向基类的（最好是智能的）指针的数组/容器。为简单起见，此示例使用原始指针，但您应该在实际代码中使用[智能指针：](http://en.wikipedia.org/wiki/Smart_pointer)

```
std::vector<CEntity*> entities;
entities.push_back(new Player);
entities.push_back(new GLiving);

// some c++11
for ( auto e : entities) {
  e->render();
} 
```

# internet-explorer - Dynamics CRM 2011 Outlook 客户端和浏览器呈现

> ID：13518636
> 
> 赞同：6
> 
> 时间：2012-11-22T18:57:55.523
> 
> 标签：internet-explorer, outlook, dynamics-crm-2011

因此，借助 Dynamics CRM 2011，您可以使用[浏览器客户端或 Outlook 客户端](http://blogs.c5insight.com/Home/tabid/40/entryid/218/CRM-and-Outlook-6-Reasons-to-Use-CRM-for-Outlook.aspx)。

它们看起来非常相似，这让我认为 Outlook 客户端必须使用 Internet Explorer（或其组件）来呈现大部分页面。我一直试图找出是否是这种情况，但没有太大成功。所以我的问题是：

Dynamics CRM 2011 的 Outlook 客户端是否以某种方式将页面呈现外包给 Internet Explorer？
如果是这样，它是否受 PC 上安装的 Internet Explorer 版本（7、8、9 等）的影响，或者它是否使用 Outlook 内置的单独 Trident 渲染引擎（因此，如果您升级它会保持不变PC 上的 IE）。

编辑：如果有什么不同，我特别关注 Outlook 2007

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:25:23.147

Outlook 中的整页表单由 IE 呈现。所有当前版本的 CRM 都使用 IE7 或 IE8 兼容模式下的 IE。

UR11 包含大量针对 IE10 兼容性问题的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T14:30:17.957

我知道这是个老问题，但如果有人想知道 - 这是 Outlook 2010 中“window.navigator.userAgent”返回的消息：

Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.1；WOW64；Trident/6.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；.NET4。 0C；.NET4.0E)

# javascript - 加载 JSON-P 时可以避免使用全局回调函数吗？

> ID：13518637
> 
> 赞同：2
> 
> 时间：2012-11-22T18:58:04.337
> 
> 标签：javascript, jsonp

我想使用 JSON-P 在我的网页上加载我的 Google 日历提要。为了使页面上的主要内容加载更快，我仅在页面加载后将 JSON-P 的脚本标签注入到 head 标签中。Google Calendar API 返回一个带有回调函数的脚本，请参见[此处](https://developers.google.com/gdata/samples/cal_sample)的示例。

是否可以避免使用全局函数作为回调函数？我想将注入标签和解析结果的所有必要代码封装在一个封装函数中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:15:29.527

您可以做的是使用应用程序所在的全局方法。

```
MYAPP.method({...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:30:40.233

不，当您使用 JSON-P 调用时，服务器会返回如下内容：

```
callback({...}) 
```

在您使用`<script>`element 引用此 JSON-P 调用 URL 后，浏览器将下载 JavaScript 代码并执行它，这意味着`callback`使用服务器提供的数据执行您的函数。

如果您不希望回调函数污染您的全局命名空间，只需在回调函数中添加一些命名空间，例如`com.mycode.callback`.

使用 JSON-P 的最大优势是它可以在浏览器中绕过[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，并且您可以轻松地使用来自其他域的数据。

# android - 为什么我不能以编程方式设置 LinearLayout 的宽度？

> ID：13518641
> 
> 赞同：0
> 
> 时间：2012-11-22T18:58:43.517
> 
> 标签：android, android-linearlayout, layoutparams

这段代码要了我的命。我正在尝试以`LinearLayout`编程方式设置（包含子项）的宽度和高度，并且应用程序正在中断。这是代码：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.right_t);
ll.setLayoutParams(new android.widget.LinearLayout.LayoutParams(200, 200)); 
```

如您所见，我 100% 确定我可以使用正确的布局参数。然而，该应用程序因错误而中断

```
1-22 19:54:13.135: ERROR/AndroidRuntime(4560): FATAL EXCEPTION: main
    java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams cannot be cast to android.widget.RelativeLayout$LayoutParams
    at android.widget.RelativeLayout$DependencyGraph.findRoots(RelativeLayout.java:1317)
    at android.widget.RelativeLayout$DependencyGraph.getSortedViews(RelativeLayout.java:1264)
    at android.widget.RelativeLayout.sortChildren(RelativeLayout.java:292)
    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:314)
    at android.view.View.measure(View.java:12863)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
    at android.view.View.measure(View.java:12863)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
    at android.view.View.measure(View.java:12863)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2256)
    at android.view.View.measure(View.java:12863)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1197)
    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2585)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4507)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
    at dalvik.system.NativeStart.main(Native Method) 
```

这`LinearLayout`与孩子一起设置在它自己的 XML 文件中，并通过`<include>`标记加载到主 XML 中。

有任何想法吗？为什么当**我不这样做**时它会说我正在`LinearLayout`尝试？`RelativeLayout`

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:02:33.947

LayoutParams 的类型对应于要在其中添加`LinearLayout`. 所以我猜在这种情况下父布局是 a`RelativeLayout`并且你应该创建 a`RelativeLayout.LayoutParams`而不是`LinearLayout.LayoutParams`.**

# django - 来自广播选择的 django 模型

> ID：13518644
> 
> 赞同：0
> 
> 时间：2012-11-22T18:58:58.310
> 
> 标签：django, django-forms

我有一个简单的模型形式：

```
 class ProductSelectionForm(ModelForm):
     class Meta:
         model = Product 
```

和模型：

```
class Product(models.Model):
     name = models.CharField(max_length=155)

     def __unicode__(self):
         return self.name 
```

但是，如果我使用 `{{ form.as_p }}`标签呈现表单，它只会将表单呈现为单个文本输入。如何让表单呈现为单选选项，`name`作为选项标签和`pk`作为值？我试过使用`widget`但没有快乐。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T19:03:44.297

你不想要一个模型形式。它们用于创建和编辑模型实例。相反，您似乎想要的是一个选择现有实例的表单：为此，请使用带有 ModelChoiceField 的普通表单：

```
class ProductSelectionForm(forms.Form):
    choice = forms.ModelChoiceField(queryset=Product.objects.all(), 
                                    widget=forms.RadioSelect) 
```

# business-catalyst - Business Catalyst 是否会通过 API 接受类别、标签

> ID：13518645
> 
> 赞同：1
> 
> 时间：2012-11-22T18:59:00.043
> 
> 标签：business-catalyst

我正在尝试使用 MetaWeblogAPI 将博客文章提交到 Adob​​e Business Catalyst。他们似乎只是勉强支持这一点，但我正在设法创建帖子，但它似乎丢弃了服务调用中提供的任何类别，并且没有明显的方法来提供标签。

我正在使用 PHP 和 Zend 框架，示例提交：

```
$endpoint = "https://mydomain.businesscatalyst.com/MetaWeblogAPI.ashx";
$client = new Zend_XmlRpc_Client($endpoint);

$post = new stdClass();
$post->dateCreated = new DateTime();
$post->title       = "A test post";
$post->description = "Test content";
$post->categories  = array('Solutions');

$params = array(
    'blogid'        => "my-blog-id",
    'username'      => "me@mydomain.com",
    'password'      => "password",
    'post'          => $post,
    'publish'       => true
);

$postId = $client->call('metaWeblog.newPost',$params); 
```

这有效，返回一个帖子 ID 并出现在网站上的博客中。但是，即使提供的“解决方案”类别已在博客中预先存在，该帖子也未链接到任何类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:24:51.980

因此，通过反复试验，我接受答案是简单的“不”——BC API 中不支持类别或标签。

# sql - SQL 连接 3 个表（基于 2 个条件？）

> ID：13518647
> 
> 赞同：2
> 
> 时间：2012-11-22T18:59:05.753
> 
> 标签：sql, ms-access, join

我有 3 个这样的表设置（有点简化）：

time_tracking: id, tr_proj_id, tr_min, tr_type
time_projects: id, project_name
time_tasks: id, task_name

基本上，我想根据**tr_type检索****project_name**或**task_name** ，它可以是“项目”或“任务”的值

 **一个例子

**时间跟踪**

```
+----+------------+--------+---------+
| id | tr_proj_id | tr_min | tr_type |
+----+------------+--------+---------+
|  1 |          3 |     60 | project |
|  2 |          3 |    360 | task    |
|  3 |          1 |    120 | project |
|  4 |          2 |     30 | project |
|  5 |          2 |     30 | task    |
|  6 |          1 |     90 | task    |
+----+------------+--------+---------+ 
```

**time_projects**

```
+----+------------------------+
| id |      project_name      |
+----+------------------------+
|  1 | Make someone happy     |
|  2 | Start a project        |
|  3 | Jump out of the window |
+----+------------------------+ 
```

**时间任务**

```
+----+---------------------+
| id |      task_name      |
+----+---------------------+
|  1 | drink a beer        |
|  2 | drink a second beer |
|  3 | drink more          |
+----+---------------------+ 
```

**期望的输出**

```
+----+------------------------+------------+--------+---------+
| id |          name          | tr_proj_id | tr_min | tr_type |
+----+------------------------+------------+--------+---------+
|  1 | Jump out of the window |          3 |     60 | project |
|  2 | drink more             |          3 |    360 | task    |
|  3 | Make someone happy     |          1 |    120 | project |
|  4 | Start a project        |          2 |     30 | project |
|  5 | drink a second beer    |          2 |     30 | task    |
|  6 | drink a beer           |          1 |     90 | task    |
+----+------------------------+------------+--------+---------+ 
```

并且在整个 JOIN 事情上真的很糟糕，这是我迄今为止唯一想到的（这不起作用..）：

```
SELECT tt.tr_proj_id, tt.tr_type, tt.tr_min, pp.project_name, pp.id, ta.task_name, ta.id
FROM time_tracking as tt, time_projects as pp, time_tasks as ta 
WHERE ((tt.tr_type = 'project' AND pp.id = tt.tr_proj_id) OR (tt.tr_type = 'task' AND ta.id = tt.tr_proj_id)) 
AND tt.tr_min > 0
ORDER BY tt.tr_proj_id DESC 
```

如果有人对如何做到这一点有任何想法，请随时分享！

* * *

更新：看起来我忘了指定我正在使用**access database**。这显然不接受像`CASE`or `coalesce`.. 之类的东西。显然有，`IIF()`但我不太确定在这种情况下如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:02:08.747

使用`join`子句并将连接条件从 where 子句移到`on`子句中：

```
SELECT
    tt.tr_proj_id,
    tt.tr_type,
    tt.tr_min,
    pp.project_name,
    pp.id,
    ta.task_name,
    ta.id
FROM time_tracking as tt
left join time_projects as pp on tt.tr_type = 'project' AND pp.id = tt.tr_proj_id
left join time_tasks as ta on tt.tr_type = 'task' AND ta.id = tt.tr_proj_id
WHERE tt.tr_min > 0
ORDER BY tt.tr_proj_id DESC,tt.tr_day ASC 
```

我使用过`left join`，即使连接不存在，它也会从主表中为您提供一行（如果没有连接，您会从连接表中的列中获得空值）

* * *

许多 SQL 程序员没有意识到这里的一个关键点是该`ON`子句可能包含任何条件，甚至是不是来自连接表的条件（如本例所示）。许多程序员假定条件必须只是那些与正式外键关系有关的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:15:51.550

尝试这个：

```
SELECT
    tt.id,
    CASE WHEN tt.tr_type = 'project' THEN pp.project_name
         WHEN tt.tr_type = 'task' THEN ta.task_name END as name,
    tt.tr_proj_id,
    tt.tr_type,
    tt.tr_min,
FROM time_tracking as tt
   left join time_projects as pp on pp.id = tt.tr_proj_id
   left join time_tasks as ta on ta.id = tt.tr_proj_id
WHERE tt.tr_min > 0
ORDER BY tt.tr_proj_id DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:05:00.440

对两个连接执行联合：

```
select tt.id, tp.project_name name, tt.tr_proj_id, tt.tr_min, tt.tr_type
  from time_tracking tt
       inner join time_projects tp on tp.id = tt.tr_proj_id
 where tt.tr_type = 'project'
union all
select tt.id, tp.project_name name, tt.tr_proj_id, tt.tr_min, tt.tr_type
  from time_tracking tt
       inner join time_tasks tk on tk.id = tt.tr_proj_id
 where tt.tr_type = 'task' 
```

这将为您提供所需的确切表格结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T19:07:11.810

```
SELECT
    time_tracking.id,
    time_tracking.tr_min,
    time_tracking.tr_type,
    coalesce(time_projects.project_name, time_tasks.task_name) as name
FROM time_tracking
LEFT OUTER JOIN time_projects on time_projects.id = time_tracking.tr_proj_id AND time_tracking.tr_type = 'project'
LEFT OUTER JOIN time_tasks on time_tasks.id = time_tracking.tr_proj_id AND time_tracking.tr_type = 'task'
WHERE time_tracking.tr_min > 0
ORDER BY time_tracking.id DESC -- ... 
```

`coalesce`是 MSSQL，`ISNULL`在其他数据库技术中有等价物等

这个想法是你加入表，如果加入失败，你会得到`NULL`加入失败的地方。然后你`COALESCE`用来挑选出成功的连接值。**

# permissions - 如何保存 StorageFile 以供以后使用？

> ID：13518649
> 
> 赞同：2
> 
> 时间：2012-11-22T18:59:05.800
> 
> 标签：permissions, windows-8, windows-runtime, storage

我在 WinRT 工作，我有点卡住了：

我正在编写具有媒体库功能的音乐播放器。我将有关音乐的信息（例如艺术家等）保存在 SQLite 数据库中。我想让用户将他的音乐保存在他想要的任何地方，而不是 Windows 方式，它必须在“音乐”库中。

用户可以使用文件夹选择器在文件夹中添加音乐。我遇到的问题是：我以后如何访问这些文件，例如在应用程序重新启动后？

保持路径不起作用，因为我总是收到“拒绝访问”错误。我唯一可以访问这些文件的时间是使用从浏览文件夹中获得的 StorageFile 对象。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:34:55.370

正如已经给出的评论一样，Windows.Storage.AccessCache (http://msdn.microsoft.com/en-us/library/windows/apps/br230566.aspx) 是您需要使用的 API。但是，不是保存对每个单独的 StorageFile 的访问，而是使用文件夹选择器并保存 StorageFolder 对象的权限（API 适用于两者）。您不太可能达到文件夹的 1000 项限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:07:33.723

Windows 运行时应用是沙盒化的。如果要访问任意文件夹位置，*则必须*使用文件选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-07T12:47:28.717

to access files in future

```
 string key = Windows.Storage.AccessCache.StorageApplicationPermissions.FutureAccessList.Add(storageFile);
        //save this key for access file later

        //Access file from saved key
        StorageFile file = await StorageApplicationPermissions.FutureAccessList.GetFolderAsync(key); 
```

if you have too much file you can add StorageFolder of files

```
 string key = Windows.Storage.AccessCache.StorageApplicationPermissions.FutureAccessList.Add(storageFolder);
        StorageFolder folder = await StorageApplicationPermissions.FutureAccessList.GetFolderAsync(key); 
```

then get StorageFiles from the parent StorageFolder

```
StorageFile childFile = await folder.GetFileAsync("filename"); 
```

# c++ - 绘制彼此靠近的对象

> ID：13518651
> 
> 赞同：3
> 
> 时间：2012-11-22T18:59:14.537
> 
> 标签：c++, c, opengl, graphics

我想在屏幕上绘制下图：

```
 |----|    sphere
             |----|
             / /
            / /
           / /         cylinder
          / /
         / / angle = 45
         | |
         | |
         | |           cylinder
         | |
         | |
         | |
 -----------           cylinder
 ----------- 
```

我的输出：

```
 / /
            / /
           / /         cylinder
          / /                        |-----|  sphere
         / / angle = 45              |-----| 
```

我将画出顶部，即带有圆柱体的球体。我的代码如下，请查看并说出问题所在。

我试图找出为什么我的基元不靠近彼此的错误。但是，我找不到。我试图改变翻译的参数，但它不起作用。请帮忙

```
void object(void) {
    GLUquadraticObj *t = gluNewQuadratic();

    glTranslatef(-2.0f, -1.0f, 0.0f);
    gluCylinder(t, 0.1f, 0.1f, 0.3f, 32,32);
    gluSphere(t, 0.2f, 26, 13);

}

void display(void) {
    glLoadIdentity();
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();
    object();
    glPopMAtrix();
    glPopMatrix();
    glutSwapBuffers();
    glFlush();        
}

void reshape(int w, int h) {
    glViewport(0, 0, w, h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(60.0f, w/h, 1.0, 500.0f);
    glLoadIdentity();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:10:54.807

您需要在对 gluCylinder 和 gluSphere 的调用之间进行转换。在当前代码中，它们都将具有相同的转换，即它们将处于相同的位置/方向。尝试：

```
gluCylinder ( t, 0.1f, 0.1f, 0.3f, 32,32);
glTranslatef ( -2.0f, -1.0f, 0.0f );
gluSphere ( t, 0.2f, 26, 13 ) ; 
```

您调用 PopMatrix() 的次数也比调用 PushMatrix() 的次数多。

# visual-studio-2008 - OpenCV 与 cuda MS Visual Studio 2008

> ID：13518652
> 
> 赞同：0
> 
> 时间：2012-11-22T18:59:17.997
> 
> 标签：visual-studio-2008, opencv, cuda

我正在研究 GPU 上的计算机视觉问题，我正在尝试使用 openCV 来解决。我使用 Cmake 完成安装，然后使用 Visual Studio 2008 构建项目。然后我在 Visual Studio 2008 中编写了一个小程序来测试 openCV 安装，然后构建项目。该项目构建得非常好，但是当我尝试运行程序（ctrl+F5）时，屏幕上出现一条消息，提示

“程序无法启动，因为您的计算机中缺少 cudart32_42_9.dll。请尝试重新安装程序以解决问题。”

这个错误是关于什么的，如何正确运行带有 cuda 程序的 openCV 而不会出现任何错误？我有一个项目的最后期限，我无法在最后 4 天内完成这项工作。这太令人沮丧了。现在一切都已正确安装，但最终这件事让我发疯了。如果有人能帮助我解决这个问题并指导我正确运行带有 cuda 的 openCV，我将非常高兴和感激。感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:28:16.517

该问题可以通过找到 cudard32_42_9.dll 文件来解决（cudart32 和 cudart64 文件都将包含在 SDK 或示例中，但是 cuda 工具包中只有一个文件，具体取决于您加载的是 32 位还是 64 位工具包）和然后将该文件复制到与您尝试运行的程序相同的位置。我相信这个困难的原因是使用 64 位 Windows，并安装 64 位 takeit，只有 64 位 cudart 版本被安装到 Windows 的适当 dll 加载路径。如果您构建应用程序并将其链接到 32 位 cudart 库，则相应的 32 位 cudart dll 将不会自动位于正确的加载路径上。但是可执行文件的位置始终在该可执行文件的 dll 加载路径上，因此可以将 cudart dll 文件放置在那里作为解决方法。

# javascript - 缩略图库的布局理论

> ID：13518653
> 
> 赞同：4
> 
> 时间：2012-11-22T18:59:24.923
> 
> 标签：javascript, jquery, image, layout, gallery

我正在创建一个完全像这样的缩略图库（[http://tmv.proto.jp/#!/destroyftw](http://tmv.proto.jp/#!/destroyftw)）。目前我正在尝试制定脚本的理论。网页的实际脚本在这里 ( [http://tmv.proto.jp/tmv_v3.js](http://tmv.proto.jp/tmv_v3.js) )。由于我对 javascript 比较陌生，这让我有些沮丧。

我已经尝试过使用 masonry 和 isotope 等插件，但它们无法处理大量图像。更不用说无限滚动不适用于我需要的过滤。所以我决定尝试自己编写一个代码。

这个想法是用户提交的图像将被调整为具有设定宽度的缩略图（高度当然会被缩放以保持纵横比）。然后这些缩略图将用于创建画廊。我遇到的问题是我发现布局有点棘手。

看起来页面首先被分成列以形成第一个“行”。之后，缩略图被放置在最左边的最短列中（具体来说，我想知道这种特定图像定位技术背后的理论。）。 **例如**：数字也可以理解为图片的id。**(id="i_1",id="i_2"等...)**

![布局示例](../Images/fa3def78f9489e074ef1bd4e9e58a1ea.png)

这也会导致页面加载时的级联淡入效果以及添加新图像时（它们只是根据其 ID 淡入）。我曾尝试使用上述脚本页面作为参考，但无济于事。但是，如果有人想自己检查，我认为负责缩略图定位的功能在“ViewManager”下。

重申一下，我不是在找人为我做我的工作。我只需要帮助制定理论，这样我就有地方开始了。

```
**Note**(In the script): cellSize= 100; cellMargin=1; doubleSize=201 (cellSize*2+cellMargin); totalCellSize=101 (cellSize+cellMargin); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T23:48:40.317

看一下

```
var fixedwidth = 50 + 1, //the +1 is for 1px horizontal margin
    gallery = $('#gallery'), // cache a reference to our container
    imagelist = gallery.children(); // cache a reference to our image list

function layoutImages(){
    var columncount = parseInt(gallery.width()/fixedwidth,10),  // find how many columns fit in container
        columns = [];

    for (var i =0;i<columncount;i++){ // initialize columns (0 height for each)
        columns.push(0);
    }

    imagelist.each(function(i,image){
         var min = Math.min.apply(null, columns), // find height of shortest column
             index = columns.indexOf(min), // find column number with the min height
             x = index*fixedwidth; // calculate horizontal position of current image based on column it belongs

        columns[index] += image.height +1; //calculate new height of column (+1 for 1px vertical margin)
        $(image).css({left:x, top:min}).delay(i*200).animate({opacity:1},100); // assign new position to image and show it
    });
}

$(window).resize(layoutImages).trigger('resize'); 
```

演示在[http://jsfiddle.net/gaby/DL8Vr/6/](http://jsfiddle.net/gaby/DL8Vr/6/)

* * *

假设

*   每张图像 50 像素固定宽度（*由`fixedwidth`变量*参数化）
*   所有图像都在一个公共容器中（*在这种情况下**带有 id`gallery`*）

该演示有一些 CSS 动画，并在调整窗口大小时重新定位图像。

演示 html

```
<div id="gallery">
    <img src="http://dummyimage.com/50x42/7c6c4c/000000.gif&amp;text=img0">
    <img src="http://dummyimage.com/50x89/2c6c2c/000000.gif&amp;text=img1">
    ....
    <img src="http://dummyimage.com/50x62/2c5c6c/000000.gif&amp;text=img29">
    <img src="http://dummyimage.com/50x58/2c3c9c/000000.gif&amp;text=img30">
</div> 
```

演示 css

```
#gallery{
    position:relative;
    width:100%;
}
#gallery img{
    position:absolute;
    -ms-transition:all 1s;
    -o-transition:all 1s;
    -webkit-transition:all 1s;
    -moz-transition:all 1s;
    transition:all 1s;
    opacity:0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T20:39:03.763

该技术完全按照您的描述工作：

```
fill the first (from the left or right, doesn't matter) shortest column 
```

如果有多个相同长度的列并且所有列都是最短的，那么找到第一个最短的部分是必要的。

首先填充最短的部分很明显：否则会导致空白区域随机堆积。

要了解为什么需要这些列，您必须首先了解`<img>`标签在 HTML 中的工作方式：

## `<img>`标签_

从最早的日子开始，HTML 就被认为是一种格式化文本的方式。因此，当图像被引入时，它被设计为与文本内联放置，没有任何花哨的布局（css 后来允许你做花哨的布局）。图像的高度始终占据一行文本。所以例如这个：

```
<pre>
  text text text
  text <img> text
  text text text
</pre> 
```

最终看起来像这样：

```
text text text
     .------.
     | img  |
     |      |
text '______' text
text text text 
```

请注意，第二行的高度会自动增加以适合图像。

## 图片库布局问题及解决方案

所以，一系列不同高度的图像标签是这样的：

```
<pre>
    <img> <img> <img>
    <img> <img> <img>
    <img> <img> <img>
</pre> 
```

可能最终看起来像这样：

```
 ______
|      |           ______
|      |  ______  |      |
|      | |      | |      |
'______' '______' '______'
          ______
 ______  |      |  ______
|      | |      | |      |
|      | |      | |      |
'______' '______' '______'
                   ______
 ______           |      |
|      |  ______  |      |
|      | |      | |      |
'______' '______' '______' 
```

..带有丑陋的空白间隙。

一种解决方案是使用 CSS 浮动。但是有经验的开发人员会认出我一起输入“float”和“css”这两个词，并回忆起试图让多个浮点数相互配合的噩梦。

另一种解决方案（我经常使用）是固定图像的高度而不是宽度，让图像正常流动。这通常会导致布局看起来像这样：

```
 _______   _______   ______
|       | |       | |      |
|       | |       | |      |
'_______' '_______' '______'
 ______   ____   ________
|      | |    | |        |
|      | |    | |        |
'______' '____' '________'
 _____   ______   ___________
|     | |      | |           |
|     | |      | |           |
'_____' '______' '___________' 
```

这要好得多，因为它消除了很多空白。但问题是画廊的右边缘不平整，有些人不喜欢。

## 色谱柱解决方案

这使我们找到了您遇到的解决方案。使用`<div>`s 或`<table>`s 之类的 HTML 元素将图像分组到列中，并使用上述算法将图像放入列中。你仍然会得到一个不平坦的边缘，但至少它位于画廊的底部，这对某些人来说更可取。

# ruby - 无法调用在父作用域中分配的局部变量

> ID：13518659
> 
> 赞同：0
> 
> 时间：2012-11-22T19:00:04.693
> 
> 标签：ruby, scope, local-variables

```
blah = 10
def what?
  "#{blah}"
end
puts what?
# =>
# NameError: undefined local variable or method `blah' for main:Object
#     from (irb):3:in `what?'
#     from (irb):5
#     from E:/RailsInstaller/Ruby1.9.3/bin/irb:12:in `<main>` 
```

为什么？写这个的正确方法是什么？我应该在本地范围内复制一个变量还是有更好的变体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:02:39.027

您需要在此处定义实例变量或方法：

```
@blah = 10
def what?
  "#{@blah}"
end 
```

或像这样：

```
def blah
  10
end

def what?
  "#{blah}"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:06:09.997

当 Ruby 看到一个`def`关键字时，它会改变作用域。该`blah`变量在方法之外具有局部范围，因此如果您想使用该值，则需要将其传入。

您可以将`blah`变量更改为实例变量，并且在编写时它将在方法的范围内。

传入局部变量可能比更改变量的范围更好。

方法名称有一个问号，通常表示“布尔”值。尽管没有严格规定，但这将是`true`or的返回`false`，尽管您会看到它在返回`nil`或*真实*返回时使用它。

你的代码最好这样写：

```
def what(blah)
  blah
end 
```

希望有帮助。

编辑：要解决父变量，我们需要引入父关系。

```
# encoding: utf-8

class ParentBlah
  def initialize
    @blah = "Blah"
  end
end

class ChildBlah < ParentBlah
  def use_parent_variable_sorta
   "@blah = #{@blah}"
  end
end

childblah = ChildBlah.new
puts childblah.use_parent_variable_sorta 
```

现在我们可以谈谈为什么不能使用局部变量了，这完全是一个范围问题。为了做我们在这里所做的事情，我们需要在相同的范围内创建变量。

为什么这样做？因为对象之外的逻辑不需要对象本身就知道。当确实需要知道它时，只需通过参数引入值，或者需要更改范围。我们倾向于认为，如果需要为此目的更改范围，则可能会发生其他事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T04:01:05.840

blah 是你的局部变量；您可以做什么来制作实例变量或制作全局变量，您可以在变量前使用“$”符号，如下所述

首先，您可以检查变量的范围，如下所示

```
blah = 10
defined? blah 
```

**结果=>“局部变量”**

要将 blah 作为全局变量，您可以这样做

```
$blah = 10
defined? $blah 
```

**结果=>“全局变量”**

```
def what?
  puts "#{$blah}"
end 
```

然后调用方法

```
puts what? 
```

**结果将是 10**

# php - 未捕获的 SyntaxError Unexpected Token 带有 txt 文件的非法 javascript

> ID：13518663
> 
> 赞同：0
> 
> 时间：2012-11-22T19:00:40.900
> 
> 标签：php, javascript

我正在测试一个脚本来自动从 txt 文件中读取广告）我想使用它，因为它是我已经拥有并且正在工作并且只需要进行一些更改的脚本，但是，有些东西停止了工作，我不知道出了什么问题，我正在检查输出，javascript 上的一切似乎都很好，但由于某种原因它不起作用，它带有意外的非法令牌，并且下面的未捕获语法错误是代码。任何帮助表示赞赏

PHP/javascript组合代码

```
<?php 
    $adsf = "test.txt";
    $count = 0;
    $frd = fopen ($adsf,'r');
    $artest = array();
    $artest2 = array();
    $artest3 = array();
      while(!feof($frd))
       {

         $artest[$count] = fgets($frd);
         $count++;
        }
      fclose($frd);

      $t = 0;
      while($t < $count)
        {
        $artest2[$t] = str_replace("\n" ,'', $artest[$t]);
          $artest3[$t] ="\"".$artest2[$t]."\", ";

          $t++;
        }    

          unset($artest3[$t - 1]);
          shuffle($artest3);
          $t = 0;
         while ($t < $count)
           {

            $jsr = $jsr.$artest3[$t - 1];
            $t++;

            }

               //$jsr. = "\"test 1 test 2 test 3\", ";
            $jsr = $jsr." \"Advertise Here come to Lot 28 or Click <a href=\\\"pub.php\\\" target=\\\"_blank\\\">HERE</a> For More Information\" ";
       ?>

             var avs = new Array ( <?echo $jsr; ?>);

             //var cron = 60;
              var sub = 0;
             function show5(){
                if (!document.layers&&!document.all&&!document.getElementById)
                return

               //change font size here to your desire
               myclock="<font size='2' face='Arial' ><b>"+avs[sub]+"</b></font>"
              if (document.layers){
                  document.layers.liveclock.document.write(myclock)
                  document.layers.liveclock.document.close()
                  }
                 else if (document.all)
                   liveclock.innerHTML=myclock             
                   else if (document.getElementById)
                    document.getElementById("liveclock").innerHTML=myclock

                    ;
                  sub++;

                  if(sub > <? echo $count - 1; ?>)
                   {
                      sub = 0;

                       }
                   setTimeout("show5()",5000)
                 }

             window.onload=show5 
```

问题出现在数组上，如果我在 txt 文件上什么都没放，一切正常，但如果我尝试提示任何东西，以前可以工作，但现在出现“未捕获的语法错误意外令牌非法”，我检查了引号和没事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:03:48.753

这是一个坏坏坏坏坏坏主意：

```
 var avs = new Array ( <?echo $jsr; ?>); 
```

`$jsr`查看在PHP 代码中构建时必须执行的所有转义操作。然而，如果您正确地执行此操作，使用 json_encode()，您只需在 PHP 中构建一个值数组，例如

```
$jsr = array();
$jsr[] = "Look ma, a single quote '!!!!"
$jsr[] = 'Hey pa, double quote here "!!!'; 
```

进而

```
var avs = <?php echo json_encode($jsr) ?>; 
```

# ios - 文档目录在设备上表现得好像是空的，但在模拟器上却不是

> ID：13518666
> 
> 赞同：0
> 
> 时间：2012-11-22T19:00:49.697
> 
> 标签：ios, xcode, directory, document

我的应用程序的文档目录包含子文件夹和文件，如下所示：

![应用程序的 Document 文件夹截图](../Images/1098fe6ce39c82fab1ee84ff5f38f77c.png)

我正在尝试使用以下代码检索要显示的文档：

```
NSMutableArray *documentData = [[NSMutableArray alloc] initWithCapacity:0];
NSArray *directoryPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [directoryPaths objectAtIndex:0];

NSError *error = nil;
NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:&error];

NSString *myFolder = [documentsDirectory stringByAppendingPathComponent:@"Downloads/Diagrams"];
NSLog(@"rostering at: %@", myFolder);

NSArray *folderContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:myFolder error:&error];
NSLog(@"contetns of diagrams folder: %@", folderContents); 
```

当我在 iPad 上运行它时，没有获取任何文档进行显示，控制台的输出是：

```
contetns of diagrams folder: (null) 
```

当我在模拟器上运行它时，文档显示正常，输出为：

```
contetns of diagrams folder: (
"6901-6905.doc",
"7100-71101.doc",
"1234-5678.doc" 
```

)

对于可能导致这种情况的原因，是否有任何明显的解释？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:06:18.453

您应该知道 Simulator 不区分大小写，而 Device 是。

# c++ - c++ 编译错误 - 架构 x86_64 的未定义符号

> ID：13518672
> 
> 赞同：0
> 
> 时间：2012-11-22T19:01:10.387
> 
> 标签：c++

> **可能重复：**
> [架构 i386 的未定义符号：](https://stackoverflow.com/questions/5818270/undefined-symbols-for-architecture-i386)

```
using namespace std;
#include <iostream>
#include <fstream>
#include <string>
#include "CorpusExp.h"

int main(int argc, char* argv[]){
ifstream infile("../DATA.txt");
string train_dir;   // The training data directory
infile>>train_dir;
train_dir=train_dir.substr(6,train_dir.length());

if (argc>1){
    if (strcmp(argv[1],"-s")){ // enter into CorpusExploration mode
        CorpusExp ce(train_dir,"all");   //<<=======LINE X!!!!!!!!
        //ce.calculate();
        if (argc>=3 && strcmp(argv[2],"-u")){ // check user stats
            cout<<"shit";
        }
        else if (argc>=3 && strcmp(argv[2],"-m")){ // check movie stats

        }else{ // check the all (default) stats

        }
    }else if(strcmp(argv[1],"-m")) {// enter into Recommendation mode

    }
}

return 0;
} 
```

**如果我包含 LINE X，main.cpp 将无法编译，错误消息是：**

```
 Undefined symbols for architecture x86_64:
   "CorpusExp::CorpusExp(std::basic_string<char, std::char_traits<char>,     std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [recommend] Error 1 
```

**这是我的 CorpusExp.cpp 和 CorpusExp.h：**

/* CorpusExorater 头文件 用于统计目的

*/

```
using namespace std;
#include <iostream>
#include <fstream>
#include <string>
#include <dirent.h>  // the Linux library to read the directories

class CorpusExp{
public:
    CorpusExp(const string&,const string&); // (dir_name, mode)
    void calculate();
    void display(ostream &out, const int&);    // print out the id's stat information

private:
    string _dir_name;
    int _movie_count;
    int _user_count;
    int _movie_rated_count[5]; // times of movie rated as 1,2,3,4,5
    float _movie_avg;   // total moview average rates
    string _mode; // the mode of current task
    int _id; // the id of current task

};

/*CorpusExporater cpp file
   Used for statistical purpose

*/
#include "CorpusExp.h"

CorpusExp::CorpusExp(const string &dir_name, const string &mode):
    _dir_name(dir_name),
    _mode(mode),
    _movie_count(0),
    _user_count(0)
{

}

void CorpusExp::calculate(){
    DIR *dpdf;
    struct dirent *epdf;

    dpdf = opendir(strdup(_dir_name.c_str()));
    if (dpdf!=NULL){
        while(epdf = readdir(dpdf)){
            cout<<epdf->d_name<<endl;
        }
    }
}
void CorpusExp::display(ostream &out, const int &id){

} 
```

**我对c ++几乎不熟悉，所以我很困惑，不知道是哪个部分导致了这个问题。如果我删除LINE X，一切都会好起来的，但是如果我在主函数中声明CorpusExp类，那么它就没有编译......**

这是编译文件：

```
# Makefile for Movie Recommendation--- HW5 of Search Engine 11-641
#   Yitong Zhou
#   Nov 19, 2012

#source code directory:
src=src
#obj code directory:
obj=obj

recommend: $(obj)/main.o $(obj)/CorpusExp.o
    g++ -o $@ $<
$(obj)/main.o: src/main.cpp src/CorpusExp.cpp
    g++ -c $< -o $@
$(obj)/CorpusExp.o: $(src)/CorpusExp.cpp $(src)/CorpusExp.h
    g++ -c $< -o $@

clean:
    rm -rf obj/*.o recommend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:48:19.943

尝试在没有 makefile 的情况下进行简单的命令行编译，以确保 makefile 本身没有问题。

```
cd src; g++ main.cpp CorpusExp.cpp -o recommend 
```

# php - 保存后、保存前等的 laravel 模型回调

> ID：13518674
> 
> 赞同：29
> 
> 时间：2012-11-22T19:01:17.000
> 
> 标签：php, laravel

Laravel 中是否有回调，例如：

```
afterSave()
beforeSave()
etc 
```

我搜索但一无所获。如果没有这样的事情 - 实现它的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-22T19:05:48.737

最好的实现方法是在保存回调之前和之后扩展**`save()`**函数。

这是一个简单的例子

```
class Page extends Eloquent {

   public function save(array $options = [])
   {
      // before save code 
      parent::save($options);
      // after save code
   }
} 
```

因此，现在当您保存 Page 对象时，它的**`save()`**函数会被调用，其中包含该**`parent::save()`**函数；

```
$page = new Page;
$page->title = 'My Title';
$page->save(); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-08-08T10:06:14.473

为 Laravel 4 添加一个示例：

```
class Page extends Eloquent {

    public static function boot()
    {
        parent::boot();

        static::creating(function($page)
        {
            // do stuff
        });

        static::updating(function($page)
        {
            // do stuff
        });
    }

} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-09T12:38:43.827

实际上，Laravel 在保存|更新|创建一些模型之前|之后有真正的回调。检查这个：

[https://github.com/laravel/laravel/blob/3.0/laravel/database/eloquent/model.php#L362](https://github.com/laravel/laravel/blob/3.0/laravel/database/eloquent/model.php#L362)

像保存和保存这样的 EventListener 是真正的回调

```
$this->fire_event('saving'); 

$this->fire_event('saved'); 
```

我们该如何处理呢？只需将其分配给此 eventListener 示例：

```
 \Laravel\Event::listen('eloquent.saving: User', function($user){
  $user->saving();//your event or model function
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-14T14:14:05.427

即使这个问题已经被标记为“已接受”——我正在为 Laravel 4 添加一个新的更新答案。

[Laravel 4 的 Beta 4 刚刚为 Eloquent 保存事件引入了钩子事件](https://github.com/laravel/framework)- 所以你不需要再扩展核心：

> 添加了 Model::creating(Closure) 和 Model::updating(Closure) 方法，用于挂钩 Eloquent 保存事件。感谢 Phil Sturgeon 最终迫使我这样做...... :)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-05T18:37:08.130

在 Laravel 5.7 中，您可以像这样从命令行创建模型观察者：

```
php artisan make:observer ClientObserver --model=Client 
```

然后在您的 app\AppServiceProvider 中告诉引导方法要观察的模型和观察者的类名。

```
use App\Client;
use App\Observers\ClientObserver;

class AppServiceProvider extends ServiceProvider
{
    public function boot()
   {
        Client::observe(ClientObserver::class);
   }
   ...
} 
```

然后在您的 app\Observers\ 中，您应该会找到您在上面创建的观察者，在本例中为 ClientObserver，已经填充了 created/updated/deleted 事件挂钩，供您填写逻辑。我的客户观察者：

```
namespace App\Observers;

use App\Client;

class ClientObserver
{

    public function created(Client $client)
    {
        // do your after-model-creation logic here
    }
    ...
} 
```

我真的很喜欢这种方式的简单性。参考[https://laravel.com/docs/5.7/eloquent#events](https://laravel.com/docs/5.7/eloquent#events)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-24T15:31:30.937

使用 afarazit 解决方案可能会破坏您的应用程序* 这是固定的工作版本：

注意：`saving`或者当您在 laravel 之外使用 eloquent 时，任何其他事件都不起作用，除非您需要事件包并启动事件。此解决方案将始终有效。

```
class Page extends Eloquent {

   public function save(array $options = [])
   {
      // before save code 
      $result = parent::save($options); // returns boolean
      // after save code
      return $result; // do not ignore it eloquent calculates this value and returns this, not just to ignore

   }
} 
```

因此，现在当您保存 Page 对象时，它的**`save()`**函数会被调用，其中包含该**`parent::save()`**函数；

```
$page = new Page;
$page->title = 'My Title';
if($page->save()){
  echo 'Page saved';
} 
```

afarazit* 我试图编辑他的答案，但没有奏效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T19:07:13.137

如果您想控制模型本身，您可以覆盖保存功能并将您的代码放在之前或之后`__parent::save()`。

否则，每个 Eloquent 模型都会在保存自己之前触发一个事件。

当 Eloquent 保存模型时，还会触发两个事件。

“eloquent.saving：model_name”或“eloquent.saved：model_name”。

[http://laravel.com/docs/events#listening-to-events](http://laravel.com/docs/events#listening-to-events)

# c# - 如何使用包含其他模型列表的模型来做下拉列表？

> ID：13518675
> 
> 赞同：2
> 
> 时间：2012-11-22T19:01:22.147
> 
> 标签：c#, asp.net-mvc, entity-framework

我需要在我的视图中创建一个 DropDownList ，它使用一个名为`Projects`.

```
public class ProjectModel
{
    public string ProjectName { get; set; }
    public List<Company> Companies { get; set; }
} 
```

我有一个`Company`存储库，我需要在使用`ProjectModel`该类的视图中列出这些公司作为`@model`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:10:20.160

首先，您`CompanyID`的项目模型中需要一个（我假设它是一个 int）。其次，您需要一个`List<SelectListItem>`可用于下拉列表的，因此您的模型将如下所示：

```
public ProjectModel
{
    public string ProjectName { get; set; }
    public int CompanyID { get; set; }
    public List<Company> Companies { get; set; }
    public List<SelectListItem> CompaniesSelectList
    {
        get
        {
            return Companies
                .Select(c => new SelectListItem
                    {
                        Text = c.CompanyName,
                        Value = c.CompanyID.ToString(),
                        Selected = c.CompanyID == CompanyID
                    })
                .ToList();
        }
    }
} 
```

然后在您看来，您可以执行以下操作：

```
@Html.DropdownListFor(m => m.CompanyID, Model.CompaniesSelectList, "Please Select") 
```

# scala - Scala 中的部分应用函数

> ID：13518677
> 
> 赞同：1
> 
> 时间：2012-11-22T19:01:36.220
> 
> 标签：scala, functional-programming, partial-application

想知道您是否可以评论为什么以下两种情况的行为不同：

以下作品：

```
var la= List(12, 13 , 14 ,15);
var func = (x:Int) => println(x)
la.foreach(func)                   // 1
la.foreach(func(_))                // 2 
```

但以下没有：

```
var la= List(12, 13 , 14 ,15);
var func1 = (x:Int) => {
    for (i <- 0 to x) yield i*2
 } mkString
la.foreach(println(func1))         // similar to 1 above
la.foreach(println(func1(_)))      // similar to 2 above 
```

错误：类型不匹配；发现：所需单位：Int =>？la.foreach(println(func1(_)))

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:08:40.907

此案已脱糖

```
la.foreach(println(func1(_))) 
```

至

```
la.foreach(println(x => func1(x))) 
```

所以你将函数传递给`println`，打印返回类型是 Unit 并且 foreach 需要一些`Int => ?`函数。

相比之下，在这两种情况下您都喂食的第一个样本，而在两种情况下您都喂食`foreach`的`Int => Unit`第二个`foreach`样本`Unit`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T19:07:54.197

在第二个代码片段中，您`println`使用一个函数作为其参数进行调用，然后尝试将该调用的结果作为参数传递给`foreach`. 由于`println`不返回一个函数，但`foreach`想要一个，那是行不通的。

# jquery - 如何使用 jquery 或 javascript 将 img 对象数据设置为二进制变量？

> ID：13518679
> 
> 赞同：0
> 
> 时间：2012-11-22T19:01:44.207
> 
> 标签：jquery, image, image-uploading

我写了一个小书签，可以在当前显示的网页上查找图像。该脚本旨在将图像二进制数据（不是 img src）上传到与小书签位于同一域中的 Web 服务器，以进行进一步处理。

这是一段代码：

```
$("#img").load(function(data){
    alert(this.src);
}) 
```

我得到的是 img src => http:// ...我不知道变量“数据”中有什么。我需要将“this”对象转换为二进制，最终转换为我可以放在 textarea 对象中的 base64 编码字符串，然后将表单提交给 surver。

我可以将对象转换为二进制数据吗？

# java - JSF：PanelGrid 不会渲染

> ID：13518680
> 
> 赞同：1
> 
> 时间：2012-11-22T19:01:49.150
> 
> 标签：java, ajax, jsf, jsf-2, rendering

我有一个带有 ajax 事件的复选框，在更改值后，复选框将更改我的 bean 中的布尔值。这个 ajax 事件还应该呈现一个具有属性的 panelGrid `rendered="#{!*the bean's boolean*}"`。这意味着 panelGrid 应该在未选中时可见，并且在选中时可见。默认情况下，布尔值将设置为 false（通过@PostConstruct）。

这是相应的代码片段：

```
<h:selectBooleanCheckbox id="useAddress" value="#{handleOrder.useAddress}">
    <f:ajax event="change" execute="useAddress" render="outputAddress" />
</h:selectBooleanCheckbox>

<h:panelGrid id="outputAddress" rendered="#{!handleOrder.useAddress}" columns="2" width="468px">
(...) 
```

这个片段被一个`<h:form />`标签包围。我的`getUseAddress()`and`setUseAddress()`将在 valuechange 时执行。

我的问题是，**为什么我的 panelGrid 总是可见的**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:02:13.840

不要指向具有属性的`f:ajax`元素`rendered`，因为当这些元素不会被渲染时，就不可能`f:ajax`找到它们。

`f:ajax`必须指向生成的 HTML DOM 树中存在的元素，并且当`rendered`某些 JSF 元素的属性等于`false`该元素时，该元素甚至不会出现在 HTML DOM 树中

将您的代码更改为此

```
<h:selectBooleanCheckbox id="useAddress" value="#{handleOrder.useAddress}">
    <f:ajax event="change" render="outputAddressWrapper" />
</h:selectBooleanCheckbox> 
```

不需要`execute="useAddress"` 原因，默认`execute`是`@this`反正

```
<h:panelGroup id="outputAddressWrapper">
    <h:panelGrid id="outputAddress" rendered="#{!handleOrder.useAddress} columns="2" width="468px">
        ... 
```

你说你的*panelGrid总是可见*的，你bean的范围是什么？至少做到`@ViewScoped`

# c++ - SFML2 应用程序找不到共享对象

> ID：13518689
> 
> 赞同：0
> 
> 时间：2012-11-22T19:02:46.897
> 
> 标签：c++, sfml

我从 git 下载并编译了 SFML2（调试、发布、静态和动态），并使用以下方法成功编译了他们教程中的一些示例代码：

```
g++ main.cpp -lsfml-graphics -lsfml-window -lsfml-system 
```

当我尝试运行二进制文件时出现问题，它找不到任何共享对象（libsfml-graphics.so.2、libsfml-window.so.2 等）

我检查了一下，它们存在于 /usr/local/lib 中。

我错过了什么吗？

如果相关，使用 Fedora 17 x64 和 g++ 4.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:09:34.610

`/usr/local/lib`动态链接器通常不搜索。将其添加到`LD_LIBRARY_PATH`.

或者，将动态链接器配置为始终搜索`/usr/local/lib`，也许 `/usr/local/lib64`. 这通常是通过添加`/etc/ld.so.conf`文件的路径并运行`ldconfig`.

有时也存在 32/64 位问题，即尝试运行 32 位可执行文件但仅存在 64 位库，反之亦然。运行`file <somtething>.so`并`file <your-executable>`确定它们的架构。一般来说，32 位库`<whatever>/lib`和 64 位库到 . `<whatever>/lib64`，但有时它们最终会出现在错误的位置。

# data-mining - 如何在字符串数据上实现 k-means 算法

> ID：13518701
> 
> 赞同：2
> 
> 时间：2012-11-22T19:03:40.463
> 
> 标签：data-mining, cluster-analysis, distance, k-means

我正在尝试在下面的数据集上实现 K-means 算法。计算任何两个数字属性之间的距离是非常简单的，但是我如何计算两个字符串之间的距离以及如何总结所有距离（即字符串属性之间的距离和数字属性之间的距离。）请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T08:43:32.447

K-means 是**为欧几里得距离设计的**。您不能只插入任意其他距离函数。这可能会导致 k-means 不再收敛。

所需的属性是**均值必须最小化方差**。如果你不能保证这个属性（无论如何字符串的意思是什么？），那么你就失去了保证的收敛性。

从技术上讲，k-means 甚至不是基于欧几里得距离，而是最小化方差，这恰好与平方欧几里得距离相同；如果你最小化这些平方，你也会最小化欧几里得距离。但该算法真正旨在最小化的是`Var(Attribute 1, Cluster 1) + Var(Attribute 2, Cluster 1) + ... + Var(Attribute n, Cluster k)`.

您可能想研究 k 中位数，它通过使用中心点而不是均值，避免了计算均值的需要，并且据我所知可以为任意距离提供收敛保证。

但是，您可能想要研究真正基于距离的算法，包括各种**基于密度的聚类**算法，这些算法通常也是基于距离的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:16:55.297

要计算字符串之间的距离，您可以使用[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)（又名编辑距离）。

为了规范字符串和数字属性之间的值，您可以尝试将属性表示为百分比：找到每种类型属性的最小值和最大值，然后对于给定的数据实例，计算其在相应范围内的百分比。

# excel - 如何创建新的 Excel 2011 电子表格并使用 Applescript 将其保存到特定目录/文件名

> ID：13518706
> 
> 赞同：0
> 
> 时间：2012-11-22T19:04:09.237
> 
> 标签：excel, macos, applescript

我正在尝试编写一个 Applescript 程序来创建电子表格，向其中添加数据，并将电子表格保存在特定文件夹中。我有创建、填写和保存电子表格的代码，但我无法指定要保存新文件的文件夹。

该文件保存在我保存电子表格的最后一个文件夹中。如果我包含要保存的文件夹的完整路径（“/Users/david/Documents/test/foo.xls”），Excel 2011 会创建一个名为“:Users:david:Documents:test:foo.xls”的文件" 在我之前手动保存电子表格的文件夹中。例如，如果我手动打开 Excel 并创建一个电子表格并将其保存在`Documents`名为的文件夹的子文件夹中`important`，然后运行以下脚本，则文件将在`important`文件夹中创建，而不是在`test`文件夹中。

```
tell application "Microsoft Excel"
    set wb to make new workbook
    tell active sheet
        -- Lots of code to fill in the data
    end tell
    set fn to "/Users/david/Documents/test/foo.xls"
    save workbook as wb filename fn file format Excel98to2004 file format overwrite yes
    close active workbook saving no
end tell 
```

从我读过的各种帖子来看，似乎应该能够指定完整路径，但这些问题通常涉及 Excel 的早期版本。另外，如果这有所作为，我正在经营山狮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:50:36.460

路径类型必须是**HFS**而不是**posix path**。

用这个：

`set fn to (posix file "/Users/david/Documents/test/foo.xls") as string`

或者：

`set fn to "diskName:Users:david:Documents:test:foo.xls"`

# image - 如何使用批处理文件将随机图像从文件夹复制到其他文件夹？

> ID：13518708
> 
> 赞同：2
> 
> 时间：2012-11-22T19:04:18.940
> 
> 标签：image, random, batch-file, copy, overwrite

我有2个文件夹：

```
D:\Folder 1\
D:\Folder 2\ 
```

`Folder 1`有一些JPG图像。`Folder 2`有档案`1.jpg`

我想使用批处理文件从中选择一个随机图像，`Folder 1`然后复制到`Folder 2`名称中`1.jpg`（文件`1.jpg`已存在于 中`Folder 2`）。

我该怎么做？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:38:39.523

```
@Echo OFF

REM By Elektro H@cker

:: Generate random numbers before filenames
FOR %%# in ("D:\Folder 1\*") Do (CALL Echo %%RANDOM:~5,1%%%%RANDOM:~4,1%%%%RANDOM:~3,1%%%%RANDOM:~2,1%%%%RANDOM:~1,1%%;%%# >> "%TEMP%\TempFile.txt")

:: Sorts the generated random numbers and choose a random file.
For /F "TOKENS=*" %%# in ('Type "%TEMP%\TempFile.txt" ^| SORT ^| MORE +%RANDOM:~1,1%') DO (

:: Copy the file to a folder
    For /F "TOKENS=2 Delims=;" %%@ in ('Echo %%#') do (
        Echo  [+] File choosed: "%%~f@"
        Copy /Y "%%~f@" "D:\folder 2\1.jpg" 1>NUL
        GOTO:EXIT
    )
)

:EXIT
:: Delete the temp file
DEL /Q "%TEMP%\Tempfile.txt"
Pause&Exit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:57:37.630

```
@echo off
setlocal

:: Initialization
set "ext=jpg"
set "source=folder 1"
set "target=folder 2"

:: Get count of images and select random image
for /f %%N in ('dir /b "%source%\*.%ext%"^|find /c /v ""') do (
  set /a "imageNum=%random% %% %%N"
)

:: Copy the image
if %imageNum% gtr 0 (set "skip=skip=%imageNum%") else set "skip="
for /f "%skip% eol=: delims=" %%F in ('dir /b "%source%\*.%ext%"') do (
  echo copy /y "%source%\%%F" "%target%\1.%ext%"
  exit /b
) 
```

# mysql - 计算多个表

> ID：13518709
> 
> 赞同：1
> 
> 时间：2012-11-22T19:04:21.000
> 
> 标签：mysql

我有几个这样的mysql表：

博客

*   entry_id
*   成员_d

文章

*   entry_id
*   成员_d

帖子

*   entry_id
*   成员_d

我想计算特定成员的总条目。我目前有这个（虽然这个例子只使用了 3 个表，但实际上大约有 10 - 20 个表的结构都相同）：

```
SELECT COUNT('member_id') FROM blogs WHERE member_id=3 LIMIT 1;
SELECT COUNT('member_id') FROM articles WHERE member_id=3 LIMIT 1;
SELECT COUNT('member_id') FROM posts WHERE member_id=3 LIMIT 1; 
```

你看到重复了吗？有什么方法可以将其压缩为 1 个查询，例如（怀疑这是否有效）：

```
SELECT COUNT(blogs.'member_id') as total_blogs, 
COUNT(articles.'member_id') as total_articles, 
COUNT(posts.'member_id') as total_posts  
FROM blogs,articles,posts WHERE member_id=3 LIMIT 1; 
```

PS 尝试搜索 stackoverflow 和 google，但不断获取有关使用 COUNT(*) 或使用组等的信息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:09:33.527

这个作品，

```
SELECT  
(SELECT COUNT('member_id') FROM blogs WHERE member_id=3) as total_blogs,
(SELECT COUNT('member_id') FROM articles WHERE member_id=3) as total_articles,
(SELECT COUNT('member_id') FROM posts WHERE member_id=3) as total_posts 
```

并在一条记录中为您提供所有信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:10:06.990

```
SELECT COUNT(*) FROM(
    SELECT member_id FROM blogs
    UNION ALL
    SELECT member_id FROM articles
    UNION ALL
    SELECT member_id FROM posts
) AS activity
WHERE member_id=3
GROUP BY member_id 
```

Sqlfiddle 演示：[http ://sqlfiddle.com/#!2/366bd/2](http://sqlfiddle.com/#!2/366bd/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:18:05.577

只是为了记录，我在这里添加第二个解决方案，它允许在单个查询中选择多个 ID

```
SELECT m.member_id, 
       COALESCE(blogs.total_blogs,0)       as total_blogs, 
       COALESCE(articles.total_articles,0) as total_articles, 
       COALESCE(posts.total_posts,0)       as total_posts
FROM   members  m     -- I guess this table exists 
LEFT JOIN (SELECT member_id, COUNT('member_id') as total_blogs    FROM blogs    GROUP BY member_id) as blogs     on m.member_id = blogs.member_id
LEFT JOIN (SELECT member_id, COUNT('member_id') as total_articles FROM articles GROUP BY member_id) as articles  on m.member_id = articles.member_id
LEFT JOIN (SELECT member_id, COUNT('member_id') as total_posts    FROM posts    GROUP BY member_id) as posts     on m.member_id = posts.member_id
where m.member_id in (3,4,5) 
```

[在这里](http://sqlfiddle.com/#!2/55c0b/1)摆弄

# bash - 多次将文件传递给shell脚本

> ID：13518716
> 
> 赞同：1
> 
> 时间：2012-11-22T19:04:48.490
> 
> 标签：bash, sh

我有一个 shell 脚本，我将一个 txt 文件传递​​给脚本，如下所示：

```
./run.sh < list.txt 
```

在脚本中，我正在做一个“ `while read LIST do ... end`”

一切正常，脚本使用列表执行。

但是，现在我想`while read LIST do ... end`在同一个 shell 脚本中有第二个。我希望它从原始列表中再次读取我在执行时传递它，但它不起作用。它为第一个循环读取 list.txt 文件，但不是第二个循环。

每次我要求它时，我该怎么做才能让脚本读取 list.txt？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:07:01.127

你不能读两次标准输入。尝试在命令行上传递 list.txt 而不是重定向它。

```
./run.sh list.txt 
```

然后在你的脚本中：

```
while read LINE; do
    ...
done < "$1"

while read LINE; do
    ...
done < "$1" 
```

或者，在您第一次阅读时将 stdin 的内容保存下来。例如：

```
# First loop, save stdin in an array.
LINES=()

while read LINE; do
    LINES+=("$LINE")
    ...
done

# Second loop, iterate over the array.
for LINE in "${LINES[@]}"; do
    ...
done 
```

# xaml - 无法获取 ItemClicked 事件

> ID：13518720
> 
> 赞同：0
> 
> 时间：2012-11-22T19:05:14.747
> 
> 标签：xaml, windows-8

我是 XAML 的新手，请帮助我为什么无法获得点击事件。

我可以通过需要单击项目的确切 ID 在 DataTemplate/Grid 上获取 Tapped 事件。这是我的网格：

```
 <GridView                            
          x:Name="newsGridView"
          SelectionMode="None"
          IsSwipeEnabled="false"
          ItemsSource="{Binding Source={StaticResource newsViewSource}}"
          ItemClick="newsGridView_ItemClick">
          <GridView.ItemTemplate>
          <DataTemplate>
          <Grid HorizontalAlignment="Left" Width="160" Height="160">
          <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
          <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Text}"/>
          </Border>
          <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
          <TextBlock Text="{Binding Text}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,15,0"/>
          <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
          </StackPanel>
          </Grid>
          </DataTemplate>
          </GridView.ItemTemplate>
          </GridView> 
```

我的事件处理程序

```
 private void newsGridView_ItemClick(object sender, ItemClickEventArgs e)
 {
    var s = sender as NewsObject;           
 } 
```

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:49:23.503

你必须分配`IsItemClickEnabled`财产

```
<GridView                            
          x:Name="newsGridView"
          SelectionMode="None"
          IsSwipeEnabled="false"
          ItemsSource="{Binding Source={StaticResource newsViewSource}}"
          IsItemClickEnabled="true"
          ItemClick="newsGridView_ItemClick">
               <GridView.ItemTemplate>
                    <DataTemplate>
                    <Grid HorizontalAlignment="Left" Width="160" Height="160">
                    <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                         <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Text}"/>
                    </Border>
               <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                    <TextBlock Text="{Binding Text}" 
                    Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" 
                    Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,15,0"/>
                    <TextBlock Text="{Binding Subtitle}" 
                    Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" 
                    Style="{StaticResource CaptionTextStyle}" 
                    TextWrapping="NoWrap" Margin="15,0,15,10"/>
               </StackPanel>
          </Grid>
     </DataTemplate>
     </GridView.ItemTemplate>
</GridView> 
```

# php - 我应该如何在同一张表或不同的 sql 中存储帖子视图

> ID：13518722
> 
> 赞同：0
> 
> 时间：2012-11-22T19:05:26.833
> 
> 标签：php, mysql

我正在开发一个文章网站。我应该将文章视图存储在同一张桌子上吗

例如：我应该在 site_ARTICLES 表中创建一个视图字段，还是应该为此创建一个新表 (site_articles_views)..

哪一个是最优化的？

哪一种方法会在 sql 数据库上创建低负载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:21:34.513

`site_articles`如果您只需要一个简单的文章视图，则可以将文章视图存储在表`count(*)`中。然后，您可以`article_views`在查看特定文章时增加一个新列：

```
UPDATE site_ARTICLES SET article_views = article_views + 1 
WHERE ... 
```

但是，如果您想做更多事情，例如：

*   显示唯一身份查看者列表
*   统计单个观众
*   呈现或分析视图的统计数据
*   为用户提供观看历史记录
*   ETC...

然后你应该使用一个单独的表 - 可能有以下作为潜在的列：

```
id
user_id
date_stamp
article_id 
```

这完全取决于您想要实现的目标。只是一个新`article_views`列将是“最优化的”，但前提是这是所需功能的限制。

# sorting - 二次排序脚本算法

> ID：13518724
> 
> 赞同：0
> 
> 时间：2012-11-22T19:05:32.370
> 
> 标签：sorting

首先，我不知道标题是否适合我想做的事情。也许它有另一个名字。

因此，假设我有一个按如下顺序排列的列表：

```
dog1
dog2
dog3
cat1
cat2
cat3
hen1
hen2
hen3 
```

我想要的是

```
dog1
cat1
hen1
dog2
cat2
hen2
dog3
cat3
hen3 
```

是否有一个标准的算法，或者是用户的选择？我在想的是先给它们编号，然后把索引放在前面。

```
11dog1
22dog2
33dog3
14cat1
25cat2
36cat3
17hen1
28hen2
39hen3 
```

从那里我会对它们进行排序，然后删除索引。有没有更优雅的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:47:39.163

一种方法可能是重载您的“<”运算符，例如： dog1 < dog2 , dog1 < cat1 ...

含义 AB < CD = 仅当 (B < D) 或 (B==D 且 A < C) 时为真

其中 A 是字符部分，B 是 AB 的数字部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:15:25.483

我的想法是你将每一行分隔在单独的数组中。

```
array1 -> dog1, dog2, dog3
array2 -> hen1, hen2, hen3
array3 -> cat1, cat2, cat3 
```

然后创建另一个数组来存储结果并执行以下操作：

```
string result[array1.length + array2.length + array3.length];
int counter = 0;
for(int i = 0; i < array1.length; i++) {
    result[counter] = array1[i];
    result[counter + 1] = array2[i];
    result[counter + 2] = array3[i];

    counter += 3;
} 
```

# sql - 根据姓名推荐电子邮件

> ID：13518737
> 
> 赞同：1
> 
> 时间：2012-11-22T19:06:51.047
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试在 SQL Server 2008 上进行查询，以获取基于表`FullName`列的电子邮件建议`Person`。

例如：对于`Person`命名`Rodrigo David Waltenberg`的查询应该返回`rodrigo.waltenberg@company.com`

但我不知道如何将全名拆分并全部小写。全名也可能有中间名，但我只需要名字和姓氏。任何人都知道如何使用 SQL 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:18:00.620

利用 Google 的*魔力*通常会大有帮助

[“MS SQL 小写字符串”，第一次命中](http://msdn.microsoft.com/en-us/library/ms174400.aspx)：

```
LOWER ( character_expression ) 
```

将字符串转为小写。

[“MS SQL 替换字符串”，第一次命中](http://msdn.microsoft.com/en-us/library/ms186862.aspx)：

```
 REPLACE ( string_expression , string_pattern , string_replacement ) 
```

用您在给定字符串中指定的其他字符串替换您想要的任何内容...

所以只需将两者结合起来，然后这样做：

## 小写输入，并将空格替换为点：

```
 REPLACE(LOWER(Fullname), ' ','.') 
```

如果这还不够，只需要第一个和最后一个部分，那么省略中间部分又是小菜一碟。

第 1 步： [“字符串中字符的 MS SQL 索引”，首先点击](http://msdn.microsoft.com/en-us/library/ms186323.aspx)：

```
CHARINDEX ( expressionToFind ,expressionToSearch [ , start_location ] ) 
```

第2步：

[“MS SQL 最左边的字符串字符”，第一次命中](http://msdn.microsoft.com/en-us/library/ms177601.aspx)：

```
LEFT ( character_expression , integer_expression ) 
```

第 3 步：

[“MS SQL 字符串最右边的字符”，首先点击](http://msdn.microsoft.com/en-us/library/ms177532.aspx)：

```
RIGHT ( character_expression , integer_expression ) 
```

第4步：

[“MS SQL 反向字符串”，第一次命中](http://msdn.microsoft.com/en-us/library/ms180040.aspx)：

```
REVERSE ( string_expression ) 
```

如果它总是正确的，那么名称至少有两个部分由至少一个空格字符分隔，只需将这些部分连接在一起：

## 获取输入的第一部分和最后一部分，至少包含两部分，小写，用点连接它们：

```
LOWER(
    LEFT(Fullname, CHARINDEX(' ',Fullname)-1) + 
    '.' +
    RIGHT(Fullname, CHARINDEX(' ', REVERSE(Fullname))-1)
 ) + '@whatever.com' as suggestion 
```

此外，如果 Fullname 列可以包含前导和尾随空格，请使用 TRIM 删除它们...这会使它变得混乱...

## 输入字符串任意数量部分的完整解决方案：

```
CASE 
 --when there are at least two spaces ( optimally 3 names, or double spaces between names)
    WHEN LEN(Fullname)-LEN(REPLACE(Fullname, ' ','')) >1 
    THEN 
        LOWER(
            LEFT(Fullname, CHARINDEX(' ',Fullname)-1) + 
            '.' +
            RIGHT(Fullname, CHARINDEX(' ', REVERSE(Fullname))-1)
         )
    ELSE
    --at most one space in name
        REPLACE(LOWER(Fullname), ' ','.')
END + '@whatever.com' as suggestion 
```

并且请**仍然**记得在发布问题之前*进行研究*并**尝试一些事情。**

# erlang - Erlang - 使用 ETS 进行环基准测试

> ID：13518741
> 
> 赞同：0
> 
> 时间：2012-11-22T19:07:03.810
> 
> 标签：erlang, ets

我正在尝试编写一个环形基准测试，其中我有 N 个进程，并通过它们发送消息 M 次。我想将进程的 pid 存储在 ETS 表中。

```
-module(ringmets).

-compile(export_all).

start_m(N, M, Msg) ->
    ets:new(pid, [ordered_set, named_table]),
    List = start_proc(N, M),
    %tv:start(),
    [ets:insert(pid, {Pid, X}) || {Pid,X} <- lists:zip(lists:seq(1,N), List)],
    hd(List) ! {Msg, 1}.

start_proc(0, _M) ->
    [];
start_proc(N, M) ->
    [spawn(ring_m, loop, [M, N]) | start_proc(N-1, M)].

loop(-1, _N) ->
    ok;
loop(M, N) ->
    receive
        {Msg, CurrPid} ->
        case CurrPid == N of
            true -> Next = 1;
            false -> Next = CurrPid + 1
        end,
        LU = ets:lookup(pid, Next),
        NextPid = element(2, hd(LU)),
        NextPid ! {Msg, Next},
        loop(M-1, N)
    end. 
```

称呼：

```
2> ringmets:start_m(5,5,ok).
{ok,1}
3>
=ERROR REPORT==== 22-Nov-2012::19:51:43 ===
Error in process <0.38.0> with exit value: {undef,[{ring_m,loop,[5,5]}]}

=ERROR REPORT==== 22-Nov-2012::19:51:43 ===
Error in process <0.42.0> with exit value: {undef,[{ring_m,loop,[5,1]}]}

=ERROR REPORT==== 22-Nov-2012::19:51:43 ===
Error in process <0.39.0> with exit value: {undef,[{ring_m,loop,[5,4]}]}

=ERROR REPORT==== 22-Nov-2012::19:51:43 ===
Error in process <0.41.0> with exit value: {undef,[{ring_m,loop,[5,2]}]}

=ERROR REPORT==== 22-Nov-2012::19:51:43 ===
Error in process <0.40.0> with exit value: {undef,[{ring_m,loop,[5,3]}]} 
```

loop/2 已导出，所以我不明白为什么会出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:25:54.480

您的模块是 ringmets，而不是 ring_m

# css - 你如何创建白色插入文本？

> ID：13518748
> 
> 赞同：1
> 
> 时间：2012-11-22T19:07:49.550
> 
> 标签：css, typography

创建深色插入文本很简单。您只需将同一个单词写两次（在本例中使用 text-shadow），但第二次写时将其向下并向右稍微放下，并以较浅的颜色书写，并带有一些不透明度。弄清楚后就容易了。

我遇到的问题是白色插入文本。没有比白色更白的颜色了，因此无法在插图字符内部创造出顶部光线多于下方光线的错觉。我能想到的最好的方法是白色的开头文本，但我想要白色的插入文本。

```
.dark {
    color:rgba(0, 0, 0, .6);
    text-shadow:2px 2px rgba(255, 255, 255, .1);
}
.light {
    color:rgba(200, 200, 200, 1);
    text-shadow:2px 2px rgba(0, 0, 0, .2);
} 
```

​</p>

[小提琴](http://jsfiddle.net/TcmAy/4/)

![在此处输入图像描述](../Images/8188d17a209a19a9e1c08ca1ae627f7e.png)

在 IRC [fiddle](http://jsfiddle.net/TcmAy/7/)上找到了答案， 光线从左上角照射，因此 tl z 轴所在的位置看起来更暗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:33:35.090

你只需要尝试不同的组合。我还使用了多个文本阴影来制作插入文本样式。

我更喜欢为您的灯光风格这样做：

```
text-shadow:1px -1px rgba(0, 0, 0, .2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:12:07.990

将深色文本阴影定位在浅色文本阴影的另一侧：

```
text-shadow: -2px -2px rgba(0, 0, 0, .2); 
```

# pdf - docx4j：帮助将 docx 转换为 PDF

> ID：13518749
> 
> 赞同：1
> 
> 时间：2012-11-22T19:07:52.293
> 
> 标签：pdf, docx, docx4j

我的目标是获取现有的 .docx 文件并使用 docx4j ( [http://www.docx4java.org](http://www.docx4java.org) http://www.docx4java.org) 从 Linux 命令行将其转换为 PDF。“入门”指南 ( [http://www.docx4java.org/svn/docx4j/trunk/docx4j/docs/Docx4j_GettingStarted.html](http://www.docx4java.org/svn/docx4j/trunk/docx4j/docs/Docx4j_GettingStarted.html) ) 指的是实际未包含在最新版本 (2.8.1) 中的示例目录包裹。无论如何，我在他们的 SVN 浏览器中找到了示例目录，在包含所有 .jar 文件的 docx4j 文件夹中创建了一个“samples/”子目录，并将 CreatePdf.java 文件下载到示例目录中。然后我尝试运行：

```
java -cp docx4j-2.8.1.jar:log4j-1.2.15.jar org.docx4j.samples.CreatePdf my-file.docx 
```

我得到了错误：

```
Error: Could not find or load main class samples.org.docx4j.samples.CreatePdf 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:36:53.440

样本包含在 2.8.1 中。那里什么都没有改变，除了样本的名称，现在是**ConvertOutPDF**

请改为尝试。

顺便说一句，SVN 存储库自 5 月以来已被取代。请参阅[docx4j-from-github-in-eclipse](http://www.docx4java.org/blog/2012/05/docx4j-from-github-in-eclipse/)

# dos - 在批处理程序中从字符串中查找文件名

> ID：13518755
> 
> 赞同：1
> 
> 时间：2012-11-22T19:08:12.350
> 
> 标签：dos, batch-file

我是批处理编程的新手。我想从字符串中查找文件名及其扩展名。我看到了变量路径所在的答案，例如

```
 for /f %%a in ('dir /B') do (
    file_name= %%~nxa
    ) 
```

但是下面的代码不起作用。

```
 stringvar="c:/folder1/folder2/abc.txt"
    file_name=%%~nxstringvar 
```

我在表达式中尝试了许多与 stringvar 和 %% 和 ~nx 的排列和组合。但我没有得到文件名。

请考虑以下代码以了解需求。

```
 stringvar="c:/folder1/folder2/abc.txt"
    filename=getFileName(stringvar) 
```

任何答案或建议都是最受欢迎的。提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:22:02.040

特殊 var 参数仅适用于特殊变量（%0、%1 等）和“FOR”变量，所以首先你需要调用任何传递变量的东西，比如参数，或者做一个 FOR：

```
@Echo OFF
SET "stringvar=c:\folder1\folder2\abc.txt"
Call :sub "%stringvar%"
Pause&Exit

:sub
Echo FILENAME: "%~nx1"
GOTO:EOF 
```

**编辑**：不要使用“/”斜杠，你在 Windows 上，不要像你一样把 var 括起来，看我的例子。

# javascript - javascript将图像加载到div onclick

> ID：13518757
> 
> 赞同：1
> 
> 时间：2012-11-22T19:08:13.610
> 
> 标签：javascript

我想显示图像用户从 for 循环中的图像链接到 div 的点击。

我的 for 循环如下。

```
<a href='' name=my_image[i]

onclick='disp_image('link_image_url')'id=my_image[i]  class='popup-open'><img src=my_image[i] width='80' height='65'></a>; 
```

和我的 javascript 函数

```
<script language=\"javascript\">

function disp_image(url){

document.getElementById('image').innerHTML ="<img src=url width='100' height='105'>";

;}

</script>

</script> 
```

但是它没有加载到我的 div 内容中

```
<div id="image"></div> 
```

有人可以知道如何在 div 内容中动态显示选定的图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:41:55.600

用这个：

```
var _leng = my_image.length
  , td = "<td><a href='#url#' onclick='displaying(/image#url#)' id='/image#url#'><img src='#url#' width='80' height='65' /></a></td></tr><tr>"
  , i; 

for (i=0; i < _leng; i++) {
  str += td.replace(/#url#/g, my_image[i])
} 
```

检查这个例子：http: [//jsfiddle.net/hMfRG/](http://jsfiddle.net/hMfRG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:16:57.370

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:17:26.233

Look at the syntax highlighting of your post. You can clearly see that your quotes are all over the place. For instance, you have `src='"+url+'"`, which is wrong. You also have "smart quotes" in places. Fix the quotes and it should stop throwing syntax errors.

But most importantly, your `onclick` function calls `displaying()`, whereas the function is called `displayImage` and takes an argument.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T19:19:58.563

我是这样做的：

```
<div id="result" style="width:450px;height:296px;">
<img name="main" src="/images/image.jpg" alt="">
</div>

function change_pic(img_name,img_src) 
{
  document[img_name].src=img_src;
} 
```

# java - 在二十一点游戏中，如何决定 Ace 何时应计为 1 或 11？

> ID：13518758
> 
> 赞同：0
> 
> 时间：2012-11-22T19:08:30.543
> 
> 标签：java, logic, blackjack

我正在尝试计算简单的二十一点游戏的分数。我希望计算机能够根据牌的情况选择何时将 Ace 牌计为 1 或 11，但我不想硬编码这种情况。

我该怎么做？

这就是我在经销商/玩家手牌类别中计算分数的方式：

```
public int calcScore()
{
    int score = 0;
    Link current = first;

    while(current != null)
    {
        score = score + current.card.getValue();
        current = current.next;
    }

    return score;
} 
```

这就是我在 Card 类中指定卡片值的方式：

```
public int getValue()
{
    int value = 0;

    if (rank == 1)
        value = 11;
    else if (rank == 11 || rank == 12 || rank == 13)
        value = 10;
    else
        value = rank;

    return value;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:16:41.947

问题是计算需要知道当前的总数是多少，所以这样编码：

```
public int getValue(int currentTotal) {
    int value = 0;

    if (rank == 1 && currentTotal < 11)
        value = 11;
    else if (rank == 1)
        value = 1;
    else if (rank == 11 || rank == 12 || rank == 13)
        value = 10;
    else
        value = rank;

    return value;
} 
```

我还没有彻底考虑*清楚*，但我很确定你不需要检查多个后续的 A，因为破坏的唯一方法是击中 21，没有人会这样做。如果这不起作用，您可能必须传递已计数的 A 的累积总数，并使用更复杂的逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:25:55.843

我不认为您可以将确定卡片价值的所有逻辑都放在卡片对象中，因为在计算完所有卡片的价值之前，您不知道 ace=11 是否会导致手牌爆牌 -在这种情况下，ace 神奇地变成了 1。

我会修改设计，使卡片具有`getMinValue()`和`getMaxValue()`. 它们的工作方式与您的完全相同，`getValue()`只是如果卡片是 ace，则 getMinValue 返回 1，而 getMaxValue 返回 11。

现在您重新设计 calcScore 以首先使用 getMaxValue 计算分数。如果牌出局，您需要对 getMaxValue 和 getMinValue 进行更复杂的计算。

这样，您的纸牌类就不必封装`business logic`二十一点，但它仍然提供了足够的信息，您可以在游戏级别处理规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T17:34:07.183

我知道已经有了答案，但问题是一个通用的方法，一切都在 java 中。这是答案的伪代码逻辑。

**计算 ace 等于 1 的分数**

1.  设置可变分数
2.  穿过手
3.  设置一个等于卡值的变量数
4.  如果数字大于 10 设置等于 10
5.  将新数字添加到总分

**检查一个王牌**

1.  将 isThereAnAce 的变量设置为 false
2.  如果至少有一组 isThereAnAce 设置为 true，则遍历牌组并检查是否有任何牌是 A

**执行逻辑**

1.  如果 isThereAnAce 等于 true 并且当前分数小于 12，则分数加 10

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T19:47:43.920

您还可以做的一件事是在您的卡片对象或您所称的对象中，您可以根据您当前的总数返回值。因此，您只需将您拥有的总数输入卡中的获取值，如果您有一张王牌，它将决定是否给您 1 或 11

另一种可能也是最简单的方法就是检查 get value 函数中的总数。

```
public int getValue(int currentVal)
{
    int value = 0;

    if (rank == 1 && currentVal < 11)
        value = 11;
    else if(rank == 1)
        value = 1;
    else if (rank == 11 || rank == 12 || rank == 13)
        value = 10;
    else
        value = rank;

    return value;
} 
```

两者都会起作用，这取决于你想用什么方式来做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T21:05:02.440

正如我记得你们给我的提示以及 fgb 建议的另一篇[关于](https://stackoverflow.com/questions/837951/is-there-an-elegant-way-to-deal-with-the-ace-in-blackjack?rq=1)SO 的帖子中的一些提示，我想出了这个。

与其在需要时算牌一次，不如算牌，因为它们属于我的 Hand 类的插入方法。

这让我可以数牌并决定是用 1 还是 11 作为 A。

```
public void insert(Card card)
{
    Link newLink = new Link(card);
    newLink.next = first;

    if (card.rank == 1 && cardTotal + card.getValue() > 21)
        cardTotal = cardTotal + (card.getValue() - 10);
    else
        cardTotal = cardTotal + card.getValue();

    first = newLink;
} 
```

问题是我是否应该让玩家决定何时使用 1 或 11，但我稍后会担心。

感谢帮助。

# c - 数字的安全 gcc 优化选项

> ID：13518759
> 
> 赞同：3
> 
> 时间：2012-11-22T19:08:34.243
> 
> 标签：c, optimization, gcc, compiler-construction, numeric

## 哪些 gcc 编译器选项可以安全地用于数值编程？

打开 gcc 优化的简单方法是添加`-0#`到编译器选项。很有诱惑力的说`-O3`。但是，我知道这`-O3`包括非保存的优化，因为一旦包含此选项，数值计算的结果可能会有所不同。如果算法稳定，结果的微小变化可能是微不足道的。另一方面，精度可能是某些数学运算的问题，因此数学优化可能会产生重大影响。

我发现在调试过程中考虑编译器相关问题很不方便。即我不想怀疑代码中的微小变化是否会导致截然不同的行为，因为编译器在内部改变了它的优化。

如果我希望代码中的行为具有确定性，因此可以安全地添加哪些选项？哪些几乎是安全的，也就是说，与性能收益相比，哪些选项只引起很小的不确定性？

我想到了这样的选项：`-finline -finline-limit=2000`即使它们很长，也可以内联函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T22:28:39.810

`-O3`包含数值上不安全的优化是不正确的。根据[手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Optimize-Options.html#Optimize-Options)，`-O3`与以下相比，包括以下优化过程`-O2`：

> `-finline-functions`, `-funswitch-loops`, `-fpredictive-commoning`, `-fgcse-after-reload`,`-ftree-vectorize`和`-fipa-cp-clone`

您可能指的是`-ffast-math`，默认情况下打开`-Ofast`，但不是`-O3`：

> `-ffast-math`集`-fno-math-errno`, `-funsafe-math-optimizations`, `-ffinite-math-only`, `-fno-rounding-math`,`-fno-signaling-nans`和`-fcx-limited-range`. 此选项导致`__FAST_MATH__`定义预处理器宏。
> 
> 此选项**不会被任何`-O`选项`-Ofast`**打开，因为它可能导致依赖于数学函数的 IEEE 或 ISO 规则/规范的精确实现的程序的错误输出。但是，对于不需要这些规范保证的程序，它可能会产生更快的代码。

换句话说，所有`-O`、`-O2`和`-O3`对数值编程都是安全的。

# javascript - 更改嵌套 JSON 结构中的键名

> ID：13518762
> 
> 赞同：7
> 
> 时间：2012-11-22T19:08:36.287
> 
> 标签：javascript, json

我有一个 JSON 数据结构，如下所示：

```
{
    "name": "World",
    "children": [
      { "name": "US",
          "children": [
           { "name": "CA" },
           { "name": "NJ" }
         ]
      },
      { "name": "INDIA",
          "children": [
          { "name": "OR" },
          { "name": "TN" },
          { "name": "AP" }
         ]
      }
 ]
}; 
```

我需要将键名从“name”和“children”更改为“key”和“value”。关于如何为这个嵌套结构中的每个键名执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T19:27:26.120

我不知道为什么您的 JSON 标记末尾有分号*（假设这是您在问题中表示的内容）*，但如果将其删除，那么您可以在解析数据时使用*reviver 函数*进行修改。

```
var parsed = JSON.parse(myJSONData, function(k, v) {
    if (k === "name") 
        this.key = v;
    else if (k === "children")
        this.value = v;
    else
        return v;
}); 
```

***演示：http:*** [//jsfiddle.net/BeSad/](http://jsfiddle.net/BeSad/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:12:03.990

你可以使用这样的函数：

```
function clonerename(source) {
    if (Object.prototype.toString.call(source) === '[object Array]') {
        var clone = [];
        for (var i=0; i<source.length; i++) {
            clone[i] = goclone(source[i]);
        }
        return clone;
    } else if (typeof(source)=="object") {
        var clone = {};
        for (var prop in source) {
            if (source.hasOwnProperty(prop)) {
                var newPropName = prop;
                if (prop=='name') newPropName='key';
                else if (prop=='children') newPropName='value';
                clone[newPropName] = clonerename(source[prop]);
            }
        }
        return clone;
    } else {
        return source;
    }
}

var B = clonerename(A); 
```

请注意，您拥有的不是 JSON 数据结构（这不存在，因为[JSON 是一种数据交换格式](http://json.org/)），但可能是您从 JSON 字符串中获得的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:17:19.037

试试这个：

```
function convert(data){
  return {
    key: data.name,
    value: data.children.map(convert);
  };
} 
```

或者，如果您需要支持没有地图的旧版浏览器：

```
function convert(data){
  var children = [];
  for (var i = 0, len = data.children.length; i < len; i++){
    children.push(convert(data.children[i]));
  }

  return {
    key: data.name,
    value: children
  };
} 
```

# amazon-ec2 - 已激活负载平衡的 EC2 实例之间的 Amazon RDS 主从关系

> ID：13518764
> 
> 赞同：1
> 
> 时间：2012-11-22T19:08:42.257
> 
> 标签：amazon-ec2, load-balancing, amazon-elastic-beanstalk, rds

我们计划将我们的`Tomcat/MySQL`应用程序移动到亚马逊云上，使用 2 个 EC2 实例（inst_1 和 inst_2）在不同的可用区运行，其中 inst_1 将包含主 RDS 数据库，而 inst_2 将包含从 RDS 数据库。

如果我们使用弹性负载平衡来平衡两个实例之间的流量，那么指向 inst_2 的流量（包括`insert/update/delete`db 事务）是否会首先更新 inst_1 中的主 RDS db，然后同步更新 inst_2 中的从属；从而确保两个 RDS 实例始终保持同步？

亚马逊发布的信息（白皮书）暗示了这一点，但没有明确说明。如果不是，如何确保两个 RDS 实例保持同步？

**附加说明：**我们计划使用 Amazon 的 Elastic Beanstalk。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:56:46.997

你必须考虑一些事情

*   AWS RDS 实例是运行 MySQL 服务器的简单托管 EC2 实例。
*   如果您添加一个从属设备（我认为亚马逊称它们为只读副本），这是一个只读从属设备
*   Amazon 不会自动管理向主服务器分配写入查询。
*   复制将确保您的读取从属设备始终自动更新（具有最小延迟，随着主设备上的写入负载而增加）
*   此行为是特定于 MySQL 的

这意味着您必须将操作查询专门委托给主服务器。

这可以由您的应用程序或运行在额外机器上的 MySQL 代理来完成。

然后，代理是您的应用程序服务器将与之通信的唯一接口。它能够管理 RDS 实例之间的平衡以及对主实例的任何操作查询的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:46:24.137

在多可用区模式下使用 RDS 时，您无法访问辅助实例。只有一个实例对您可见，所以如果您的问题不适用，大多数情况下。在故障转移的情况下，您获得的 DNS 地址将开始解析为不同的 IP。亚马逊没有透露这两个实例是如何保持同步的。

如果您使用单 az 实例 + 副本而不是使用多 az 实例，那么您可以适当地指导查询 - 任何更改副本上数据的尝试都将失败。由于这只是标准 MySQL 复制，因此副本可能落后于主副本（特别是在当前版本的 MySQL 中，副本仅运行单个线程）

# war - 在聚合多个 Maven 项目的战争中使用 XCore 生成的类

> ID：13518765
> 
> 赞同：0
> 
> 时间：2012-11-22T19:09:00.173
> 
> 标签：war, emf

我有一个名为`myproject.app`. 我还有另一个使用 vaadin 和 gwt`myproject.ui`的项目和另一个项目，它是一个转换为 Maven 的 Xcore-Project，称为`myproject.model`.

我想在一场战争中将它们全部聚合起来。为此，我有一个`myproject.war`带有 pom 的声明依赖项。

对于 Vaadin 和 GWT，一切都运行良好，因为这些项目是纯 maven 项目。Xcore 项目让我很头疼，因为我无法`Plugin Dependencies`在战争中提供这个项目中的声明。

我试图在 pom 中添加所需的库，但我只能从 Central 获取旧版本（2.2.3）——XCore 项目使用 2.8。*/3.8。*.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:02:46.947

答案是使用 Maven Tools 4 Eclipse 将 Eclipse 依赖项（EMF、XCore ...）转换为 Maven 工件。

[http://wiki.eclipse.org/MT4E_FAQ](http://wiki.eclipse.org/MT4E_FAQ)

对于专业用途，有必要设置一个 Maven 存储库，我成功地使用了 Nexus（如果您是在本地单独开发，那么在本地存储库中安装工件就足够了）。

[http://www.sonatype.org/nexus/](http://www.sonatype.org/nexus/)

您可以通过使用转换后的 Eclipse 工件（在 mt4e 参考中记录）设置托管存储库并创建一个存储库组来聚合预配置的 maven 中央代理和托管存储库与 eclipse 工件来使其工作。

您需要设置您的本地 settings.xml 以使用 nexus，然后您就可以开始使用了。Eclipse 的工件可通过 maven 坐标使用。

牢记轨道工件并仔细设计补丁文件。

# jquery - jQuery 幻灯片 - 图像转换问题

> ID：13518766
> 
> 赞同：0
> 
> 时间：2012-11-22T19:09:00.627
> 
> 标签：jquery, slideshow

我正在制作这个幻灯片，但是当图像动画时，我会得到一个白色的闪光，然后是下一个图像。解释起来有点困难，所以我创建了这个[http://jsfiddle.net/2SJ8B/](http://jsfiddle.net/2SJ8B/) 我想它与我的 css 有关吗？

```
#slideshow {
    width: 700px;
    height: 400px;
    padding: 0;
    position: relative;
    overflow: hidden;
    border: 1px solid;
}

#slideshow img {
    position: absolute;
    height: 500px;
    width: 700px;
}​ 
```

你会注意到它不是一个流畅的动画，但有一些事情正在发生。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:16:17.230

我认为你的问题是在淡入淡出的一半，两张照片的透明度都是 50%，所以你看到了 25% 的白色背景。这可以被视为“闪光”。考虑不要淡出传出的图像，而是在淡入完成后将其隐藏（使用`setTimeout()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:26:23.567

试试这个更新的小提琴......

[http://jsfiddle.net/2SJ8B/5/](http://jsfiddle.net/2SJ8B/5/)

关键是在`fadeIn()`淡入淡出完成后运行的命令中的函数...

```
$('#slideshow img:first').appendTo('#slideshow').fadeIn(1000, function() {
    $(this).siblings().hide();
}); 
```

这意味着它会拍摄第一张图像，将其放在最后一张图像之后（在它前面），然后淡入。一旦完成，它就会隐藏所有其他图像。一秒钟后，它重复。现在双重褪色消失了，白色的“闪光”消失了。

# c++ - Qt findChild 返回 0

> ID：13518767
> 
> 赞同：5
> 
> 时间：2012-11-22T19:09:03.543
> 
> 标签：c++, qt, user-interface

我目前正在研究一种在运行时使用 GUI 修改对象内容的好方法，项目使用 Qt。

所以我想到了将 a 传递`QLayout`给对象，让他们创建自己的 GUI。作为 POC，我创建了这个（“display”是`QVBoxLayout*`参数的名称）：

```
QPushButton* button = new QPushButton();
button->setText("foo");
button->setObjectName("bar");
display->addWidget(button); 
```

效果和预期的一样好。但是我需要阅读用户在 GUI 中输入的内容，所以这就是我接下来要做的：

```
QPushButton *button2 = display->findChild<QPushButton *>();
if(button2)
    std::cout << button2->objectName().toStdString() << std::endl; 
```

这里什么都没有输出 - if() 语句是错误的！

```
QList<QWidget *> widgets = display->findChildren<QWidget *>();
foreach (QWidget* b, widgets) {
    std::cout << b->objectName().toStdString() << std::endl;
} 
```

同样，`widgets`列表是空的。

我尝试在以下位置查看完整的成员列表：[http](http://doc.qt.digia.com/qt/qvboxlayout-members.html) : //doc.qt.digia.com/qt/qvboxlayout-members.html，但 findChild/findChildren 似乎最适合我的需求......

***下面的解决方案***

这就是我现在的处理方式：

与其将 a 传递`QVBoxLayout`给 GUI 创建，不如将 a 传递给`QWidget`上面命名为“display”的名称。

```
QVBoxLayout* layout = new QVBoxLayout();
display->setLayout(layout);

QPushButton* button = new QPushButton();
button->setText("foo");
button->setObjectName("bar");

layout->addWidget(button); 
```

现在到`findChild`/ `findChildren`：

```
QPushButton *button2 = display->findChild<QPushButton *>("bar");
if(button2)
    std::cout << button2->objectName().toStdString() << std::endl;

QList<QWidget *> widgets = display->findChildren<QWidget *>();
foreach (QWidget* b, widgets) {
    std::cout << b->objectName().toStdString() << std::endl;
} 
```

两种方法都按预期对我有用！（另外，现在可以通过 GUI 创建自由选择布局！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:30:59.530

a 的父级`QWidget`必须是 a `QWidget`。`QLayout`不是一个`QWidget`。

存在布局以移动和调整`QWidget`. 尽管您可以通过调用布局来添加子小部件，但最终，它们的父小部件将是`QWidget`布局所在的。

为了显示：

```
QWidget* widget = new QWidget;
qDebug("Widget: %p", widget);

QHBoxLayout* layout = new QHBoxLayout;
qDebug("Layout: %p", layout);

QWidget* child = new QWidget;
layout->addWidget(child);

qDebug("Child's parent before setLayout: %p", child->parent());
widget->setLayout(layout);
qDebug("Child's parent after setLayout: %p", child->parent()); 
```

输出：

```
Widget: 0x8e1c1e0
Layout: 0x8e1c3f0
Child's parent before setLayout: 0x0
Child's parent after setLayout: 0x8e1c1e0 
```

# c++ - 线程安全地关闭正在同步使用的 boost::asio::ip::tcp::socket

> ID：13518768
> 
> 赞同：3
> 
> 时间：2012-11-22T19:09:08.390
> 
> 标签：c++, boost, boost-asio

鉴于`boost::asio::ip::tcp::acceptor`和`boost::asio::ip::tcp::socket`都被标记为 Boost 1.52.0 的非线程安全，是否可以从单独的线程关闭`tcp::acceptor`当前阻塞？`accept()`

我看过调用`boost::asio::io_service::stop()`，这看起来可能 `io_service`是线程安全的。这会让`io_service`事件循环一直运行到套接字上的任何处理完成吗？

我正在同步操作，因为这是作为更大程序的一部分的简单事件循环，并且不想在没有充分理由的情况下创建额外的线程，我理解 async 会这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:36:09.623

如果您的接受者在 中`async_accept`，您可以调用`ip::tcp::acceptor::cancel()`以取消对其进行的任何异步操作。`boost::asio::error::operation_aborted`请注意，这可能会使用错误代码触发此接受器中的处理程序。

如果您使用的是 synchronous `accept`，这似乎是不可能的，因为我认为它根本不相关`io_service`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T11:11:12.683

花了一些时间研究这一点，只有一种线程安全的方式可以实现这一点：通过向套接字发送消息（在不等待的线程上`accept()`）告诉线程关闭套接字和接受器。通过这样做，套接字和接受器可以完全由单个线程拥有。

如单独指出的，`io_service`仅用于异步操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T09:59:22.063

我觉得你有点想多了。在条件循环中使用非阻塞接受或具有超时的本机接受。添加一个互斥锁，它是线程安全的。您还可以在新连接到达时使用本机选择和接受。为选择设置超时和条件循环。

# vim - Vim：我如何 chdir 到变量中的路径

> ID：13518771
> 
> 赞同：2
> 
> 时间：2012-11-22T19:09:18.327
> 
> 标签：vim

我有一个存储在变量中的路径（比如 l:s），并且想在 vim 脚本中执行 lcd l:s，但它告诉我路径“l:s”不存在。这里有什么问题，因为 vim 可以很好地解析其他 ex 命令中的变量名（echo 等）。我不明白其中的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T23:10:53.267

您可以使用`exe`和构造命令：

```
let s:some_dir_name = "foo"
exe "lcd " . s:some_dir_name 
```

这将评估变量`s:some_dir_name`并执行命令`lcd foo`。

（我没有`l:s`从你的问题中使用，因为这不是合法的变量名，但我认为你明白了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:10:48.767

Vim 允许您在脚本中设置环境变量，这些变量与 :cd 和 :lcd 一起使用。例如：

```
function foo()
    let $SOME_PATH = '/some/path'
    lcd $SOME_PATH
endfunction 
```

# php - Codeigniter 路由和功能混淆

> ID：13518777
> 
> 赞同：0
> 
> 时间：2012-11-22T19:09:56.690
> 
> 标签：php, codeigniter, routes

下面我有一个函数，它为找到的每个listingId 提供一个url。

是否可以通过路线做到这一点？

在这个阶段，我想为每个加载一个视图，`$subCat`但将其`$mainCat`用作主导航项，并将其`$subCat`用作加载特定视图的子下拉选项。

```
 $detailsFunction = $this->createCategoryDetails();

  $ld = array();
  $url = array();

  foreach ($detailsFunction as $main) 
  {
   $ld = array('listingId' => $main['listingId']);

   foreach($ld as $id)
   {
    $mainlisting = $main['listingId'];
    $mainCat     = strtolower($main['mainCat']);
    $subCatO     = strtolower($main['subCat']);
    $subCat      = str_replace(" ", "-", $subCatO);

    $structure = base_url().'listings/'.$mainCat.'/'.$subCat;

    var_dump($structure);

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:27:23.273

好吧，这就是路由的用途。

你可以做这样的事情（不确定语法，玩弄它）：

```
$routes['listings/(:any)/(:any)'] = 'listings/$1/$2'; 
```

你的列表应该是：

```
function listings($mainCat,$subCat) 
```

**编辑：** 现在我又读了一遍，不确定你的问题，你可能需要的是（如果 mainCat 和 subCat 之间存在差异，只需将 1 段传递给列表并采取相应的行动

# sql - CREATE VIEW 之前的 USE 语句

> ID：13518778
> 
> 赞同：2
> 
> 时间：2012-11-22T19:10:00.840
> 
> 标签：sql, sql-server-2008

真相：我不擅长 SQL，经过一番研究，我无法弄清楚这一点。我正在阅读有关利用视图的一章，但无法使此查询起作用：

```
USE [jm0235242]
CREATE VIEW InvoiceBasic 
AS
SELECT VendorName, InvoiceNumber, InvoiceTotal
FROM Vendors JOIN Invoices ON Vendors.VendorID = Invoices.VendorID 
```

我的 USE 语句有问题：

> *'CREATE VIEW' 必须是查询批处理中的第一条语句”。*

我的问题是，如果我不能使用我的 USE 语句，我应该如何指定它应该查看的数据库。感谢您的帮助，感恩节快乐！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:11:13.820

您需要确保这`CREATE VIEW`是 SQL 批处理中的第一条语句 - 正如错误清楚地解释的那样。所以使用这个：

```
USE [jm0235242]
GO      --  put that "GO" separator here! 

CREATE VIEW InvoiceBasic 
AS
SELECT VendorName, InvoiceNumber, InvoiceTotal
FROM Vendors JOIN Invoices ON Vendors.VendorID = Invoices.VendorID 
```

当您在 SQL Server Management Studio 中运行它时，`GO`关键字会结束一个批处理并执行它 -`CREATE VIEW`现在是第二个批处理中的第一条语句，它也很开心并且有效

**更新：**为什么（以及**，**就此而言）必须是批次的第一个语句的问题使我难以理解-我从未听到过任何令人信服的解释。也许 Microsoftie 或与团队关系密切的人知道这一点并且可以为我们所有人解释？:-)`CREATE VIEW``ALTER VIEW`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:13:38.427

需要一个“GO”.....回答了我自己的问题！谁能告诉我为什么我需要这个，因为我想理解我为什么需要它。

# programming-languages - 学习新编程语言的理想方式

> ID：13518790
> 
> 赞同：0
> 
> 时间：2012-11-22T19:11:04.747
> 
> 标签：programming-languages

我已经在 php 上尝试了很长一段时间，但我认为我没有达到我想要的专业水平。我开始阅读一本电子书并自己写下那里的所有代码示例，我认为这是低效的。
我的问题是针对任何编程语言专家的人。我只是想知道你们是如何做得这么好的，正如我在标题中提到的，什么是最有效的方法来处理一种新的编程语言所以为了从中获得最大收益，使其成为一种丰富的体验。我喜欢编码，已经学习了很多语言，但在学习了基础知识和一些高级部分后，它们都处于中级水平。
想在 php 方面表现出色，因此网站上任何高技能程序员的任何提示都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:14:31.447

我发现尝试学习编程时最有用的事情就是努力学习。仅仅查看和复制别人的代码不会让你走得太远，通过尝试尝试某事你会学得更快，而且你可能暂时不会成功，但继续努力，修复错误你走了，它会开始坚持。

php.net 文档也非常棒，所以请随时保持打开状态。

在 php 中，尝试创建一个基本的动态站点，然后按自己的方式进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:14:46.557

将您从中级到专家的事情是：练习、阅读其他人的代码以及理解语言规范和库的组合。

一旦您处于中级水平，您的主要参考应该是语言定义和库文档，以及第三方库、它们的文档和它们的代码，如果需要的话。

您还可以查阅高级第三方材料，并尝试在该语言中实现相对高级或基本的编程概念（例如延续），以推动您的理解。

# ruby-on-rails - 加载视图时如何在rails控制器上调用ruby？

> ID：13518793
> 
> 赞同：0
> 
> 时间：2012-11-22T19:11:21.697
> 
> 标签：ruby-on-rails, ruby, view, controller

我对 Rails 很陌生，基本上我想做的事情很简单，当视图被加载时，我希望它调用一个控制器来执行 ruby​​ 脚本并在我的视图上渲染这个脚本生成的图像，这可能吗？或者我应该在加载视图之前调用脚本并检索生成的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:48:37.063

首先，我建议你去这里学习一个链接，以获得帮助 [ruby​​ on rails 教程](http://guides.rubyonrails.org)

回答您的问题首先加载 rails 控制器，每个视图都与某些控制器操作相关联，例如，如果您有用户控制器（app/controllers/users_controller.rb），并且在显示您希望将用户图像显示为个人资料图片，你能做的是

```
def show
  @user = User.find(params[:id])
end 
```

并在其相应的视图中（app/views/show.html.erb）

```
<img src = <%= @user.image_path %> /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:09:25.773

在 RoR 中，控制器操作正在渲染视图，因此您可以在初始加载时自行设置它。

例如，您有用户控制器，您需要在索引视图中显示所有用户图像。

控制器/users_controller.rb

```
def index
  @users = User.all
end 
```

意见/用户/index.hrml.erb

```
<% @users.each do |user| %>
  <img src=<%= user.image_path %>> </img>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:13:27.163

我会在页面加载时检索图像，用 css 隐藏它，并随时使用 javascript 加载它。我没有看到在页面加载时不调用它的重要原因。

# c++ - Malloc 或 Calloc 以及何时

> ID：13518796
> 
> 赞同：0
> 
> 时间：2012-11-22T19:11:40.577
> 
> 标签：c++, c

> **可能重复：**
> [c malloc 和 calloc 之间的区别](https://stackoverflow.com/questions/1538420/c-difference-between-malloc-and-calloc)

calloc 与带有 memset 的 malloc 相同吗？还是有什么区别

> 字符 *ptr;
> ptr=(char *)calloc(1,100)

```
 or 
```

> 字符 *ptr;
> ptr=(char *) malloc(100);
> memset(ptr,0,100);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:22:44.107

这是`calloc`gcc定义的：

```
PTR
calloc (size_t nelem, size_t elsize)
{
  register PTR ptr;

  if (nelem == 0 || elsize == 0)
    nelem = elsize = 1;

  ptr = malloc (nelem * elsize);

  if (ptr) bzero (ptr, nelem * elsize);

  return ptr;
} 
```

[http://gcc.gnu.org/viewcvs/trunk/libiberty/calloc.c?view=markup](http://gcc.gnu.org/viewcvs/trunk/libiberty/calloc.c?view=markup)

和

```
void
bzero (void *to, size_t count)
{
  memset (to, 0, count);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:15:52.283

结果是一样的。

两者都在分配内存，然后将其设置为 0

# objective-c - 用多个分隔符拆分 NSString？

> ID：13518802
> 
> 赞同：7
> 
> 时间：2012-11-22T19:12:22.780
> 
> 标签：objective-c, cocoa, nsstring

对于文本`bozo__foo!!bar.baz`，如何将包含此内容的 NSString 拆分为`(bozo, foo, bar, baz)`？

也就是说，用字符串（分隔符）和 . 将其分隔在`__`组件`!!`中`.`。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-23T07:51:19.590

您可以使用 NSCharacterSet 拆分字符串。试试这个

```
NSString *test=@"bozo__foo!!bar.baz";
NSString *sep = @"_!.";
NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString:sep];
NSArray *temp=[test componentsSeparatedByCharactersInSet:set];
NSLog(@"temp=%@",temp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-18T00:39:56.610

我知道这个问题已经得到解答，但这是一种使用多个字符串分隔字符串的方法。这是NSString的一个*类别。*

```
- (NSArray<NSString *> *)componentsSeparatedByStrings:(NSArray<NSString *> *)separators
{
    NSMutableArray<NSString *> *components = [[NSMutableArray alloc] init];
    unichar buffer[self.length + 1];
    NSInteger currentOrigin = 0;
    NSInteger currentLength = 0;

    [self getCharacters:buffer];

    for(NSInteger i = 0; i < self.length; i++)
    {
        unichar currentChar = buffer[i];

        currentLength++;

        for(NSInteger n = 0; n < separators.count; n++)
        {
            NSString *currentDivider = [separators objectAtIndex:n];

            if(currentDivider.length == 0)
            {
                return @[self];
            }
            else if(currentDivider.length > 1)
            {
                BOOL goodMatch = NO;

                for(NSInteger x = 0; x < currentDivider.length; x++)
                {
                    unichar charInDivider = [currentDivider characterAtIndex:x];

                    if(charInDivider == currentChar)
                    {
                        goodMatch = YES;
                    }
                    else
                    {
                        goodMatch = NO;
                        break;
                    }

                    if(goodMatch == YES && ((x + 1) != currentDivider.length))
                    {
                        i++;
                        currentLength++;

                        currentChar = buffer[i];
                    }
                }

                if(goodMatch == YES)
                {
                    NSRange newComponentRange = NSMakeRange(currentOrigin, (currentLength - currentDivider.length));
                    NSString *newComponent = [self substringWithRange:newComponentRange];
                    currentOrigin = (i + 1);
                    currentLength = 0;

                    [components addObject:newComponent];
                    NSLog(@"%@", components);
                }
            }
            else // If current divider is only one character long.
            {
                if([currentDivider characterAtIndex:0] == currentChar)
                {
                    NSRange newComponentRange = NSMakeRange(currentOrigin, (currentLength - 1));
                    NSString *newComponent = [self substringWithRange:newComponentRange];
                    currentOrigin = (i + 1);
                    currentLength = 0;

                    [components addObject:newComponent];
                    break;
                }
            }
        }

        // Handle the end of the string.
        if((i + 1) == self.length)
        {
            NSRange newComponentRange = NSMakeRange(currentOrigin, currentLength);
            NSString *newComponent = [self substringWithRange:newComponentRange];
            currentOrigin = 0;
            currentLength = 0;

            [components addObject:newComponent];
        }
    }

    return components;
} 
```

**示例：** “ABCD__EFGHI__JKLMNOP-QRST.UV_WXYZ”

```
NSLog(@"%@", [test componentsSeparatedByStrings:@[@"__", @"-", @"."]]); 
```

**日志结果：** “ `(ABCD, EFGHI, JKLMNOP, QRST, "UV_WXYZ")`”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:28:19.420

```
NSString *text = @"bozo__foo!!bar.baz";

NSArray *split1 = [text componentsSeparatedByString:@"__"];
NSArray *split2 = [[split1 lastObject] componentsSeparatedByString:@"!!"];
NSArray *split3 = [[split2 lastObject] componentsSeparatedByString:@"."];

NSLog(@"%@, %@, %@, %@", split1[0], split2[0], split3[0], split3[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-12T11:22:49.917

更多功能的解决方案是`-componentsSeparatedByString:`递归地应用每个组件，这是在之前的分隔符应用程序中派生的：

**NSString 类别**

```
- (NSMutableArray<NSString *> *)gvr_componentsSeparatedByStrings:(NSArray<NSString *> *)separators {
    if (separators.count == 0) {
        return [NSMutableArray arrayWithObject:self];
    }

    NSString *separator = [separators firstObject];

    NSArray *reducedSeparators = [separators gvr_arrayByRemovingFirstObject];

    NSArray *components = [self componentsSeparatedByString:separator];

    NSMutableArray *result = [NSMutableArray new];

    for (NSString *component in components) {
        NSMutableArray *subResult = [component gvr_componentsSeparatedByStrings:reducedSeparators];

        [result addObjectsFromArray:subResult];
    }

    return result;
} 
```

**NSArray 类别**

```
- (NSArray *)gvr_arrayByRemovingFirstObject {
    NSMutableArray *result = [NSMutableArray new];
    for (NSInteger i = 1; i < self.count; i++) {
        [result addObject:self[i]];
    }

    return [result copy];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-26T08:35:33.153

我通过寻找最长的分隔符为我的项目解决了这个问题，用这个分隔符替换其他分隔符，然后在唯一剩下的分隔符上进行分隔。试试这个：

```
 NSString *test = @"bozo__foo!!bar.baz";
  test = [test stringByReplacingOccurrencesOfString:@"!!" withString:@"__"];
  test = [test stringByReplacingOccurrencesOfString:@"." withString:@"__"];
  NSArray<NSString *> *parts = [test componentsSeparatedByString:@"__"]; 
```

# php - PHP中自己的错误报告系统

> ID：13518803
> 
> 赞同：1
> 
> 时间：2012-11-22T19:12:33.473
> 
> 标签：php

好吧，我已经编写了一个应用程序，现在我想编写一些自定义的东西来处理错误报告，而不是显示内置的 PHP 错误报告。

我希望这个软件能够捕获 PHP 错误，并在定制框中显示消息，就像在 kohana 框架中完成的那样......

我怎样才能做到这一点？我真的不想用 try-catch 填充我的代码。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:14:32.927

您可以使用该[`set_error_handler()`](http://ca1.php.net/manual/en/function.set-error-handler.php)功能执行此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T19:15:46.637

[http://ca1.php.net/manual/en/function.set-error-handler.php](http://ca1.php.net/manual/en/function.set-error-handler.php)

[http://ca1.php.net/manual/en/function.set-exception-handler.php](http://ca1.php.net/manual/en/function.set-exception-handler.php)

但正确的做法是`try catch`;)

# codeigniter - Codeigniter 限制不起作用

> ID：13518807
> 
> 赞同：0
> 
> 时间：2012-11-22T19:12:48.387
> 
> 标签：codeigniter, model, limit

我快到暴怒模式了！

谁能帮我这个？？

我对 CodeIgniter 模型设置了限制，所以我只能获得那组结果。为什么它不起作用？记录在函数调用时正确显示，但我得到的超出预期

```
 $this->CI->dbClient->select('id,title,description,url,date,id_first_image')
                                   ->from('posts')
                                   ->where('deleted',"0")
                                   ->where('date >',$date)
                                   //Neither does work here!
                                   ->order_by('date','asc')
                                   ->limit(5);

       $query =     $this->CI->dbClient->get();       
       return $query->result(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:39:16.843

## 1.使用`db`

用于`db`Active Record 类。

```
$this->db->select('id, title, description, url, date, id_first_image')
                               ->from('posts')
                               ->where('deleted', "0")
                               ->where('date >', $date)
                               ->order_by('date', 'asc')
                               ->limit(5);

$query = $this->db->get();       
return $query->result(); 
```

## 2.`$data`有效

确保这`$data`是一个有效的 MySQL 日期（或任何你的底层数据库技术）。

# sql - 页面项目的布尔评估不正确

> ID：13518809
> 
> 赞同：0
> 
> 时间：2012-11-22T19:13:19.453
> 
> 标签：sql, oracle, oracle-apex, boolean-logic

我在 APEX 页面中有一个报告，它有多个列，其中包含 10,000 到 1,000,000 (1M) 条记录之间的任何结果（行数）。

我有一个条件 where 子句，它使用页面项目的值来确定或限制显示的结果......它看起来像这样：

```
SELECT
  ...
FROM ...
WHERE ...
AND (:P2_STARTDATE IS NULL OR TO_DATE(:P2_STARTDATE, 'DD-MON-YYYY HH24:MI:SS') < creation_date) 
```

我相信在任何时候我确实为`P2_STARTDATE`页面项目输入了一个值，然后进行比较，但是当我没有为页面项目输入任何值时，它应该是`NULL`并且布尔运算应该只返回 TRUE 进行`P2_STARTDATE IS NULL`评估.. .

在搜索 0.5M 行时，该查询使执行时间长达 45+ 秒，这是不可接受的。我写了以下更改来测试我的理论：

```
SELECT
  ...
FROM ...
WHERE deleted_flag = 'N'
AND (:P2_STARTDATE IS NULL) -- comment the rest of the evaluation.... 
```

它立即评估为 NULL 并在大约 1 秒内返回相同的结果集 0.5M+ ......现在，如果我确实设置了一个值，那么结果集显然是空的。

所以问题是，如何让 Oracle APEX 快速评估为 TRUE 该表达式？感谢您提供的任何提示、解决方法或解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T00:57:17.513

我不确定假设 SQL 引擎在您的 OR 上使用短路评估是否安全。

尝试这个：

```
AND (:P2_STARTDATE IS NULL 
     OR 
      (:P2_STARTDATE IS NOT NULL 
       AND TO_DATE(:P2_STARTDATE, 'DD-MON-YYYY HH24:MI:SS') < creation_date)
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:27:35.090

我不相信您查询的第二部分是 sargeable - 它不能使用索引。另外，您的示例与搜索实际结果集无关。

一种方法是将（此查询的外部）绑定变量转换为正确的数据类型，以便查询能够使用 creation_date 上的索引（creation_date 上有一个索引，对吗？）

```
SELECT
  ...
FROM ...
WHERE ...
AND :P2_STARTDATE IS NULL OR creation_date > :newdatevariable; 
```

无论如何，从那里获取函数 to_date 并传入一个常量。

# c# - 在 foreach 循环外访问变量

> ID：13518811
> 
> 赞同：0
> 
> 时间：2012-11-22T19:13:21.673
> 
> 标签：c#, asp.net, sql, sql-server, razor

如何访问循环外的变量？下面的代码似乎不起作用，变量为空。

```
var userID;
foreach(var row in db.Query("SELECT ProviderUserId FROM webpages_OAuthMembership WHERE UserID = @0", currentUserId))
{
    userID = row.ProviderUserId;

}  
var userID1 = userID; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:31:11.580

您想要哪个迭代的值？首先？最后？如果没有结果应该怎么办？

LINQ 在这里可能是一种更简单的方法：

```
string sql = "SELECT ProviderUserId FROM webpages_OAuthMembership WHERE UserID = @0";
var userId = db.Query(sql, currentUserId)
               .Select(x => x.ProviderUserId)
               .SingleOrDefault();
if (userId != null)
{
    ...
} 
```

（当然，如果`ProviderUserId`不是某种可以为空的类型，那将不会按原样工作，但我们目前并没有太多信息......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:18:44.317

你的 foreach 循环返回`IEnumerable`集合

```
var userID;
foreach(var row in db.Query("SELECT ProviderUserId FROM webpages_OAuthMembership WHERE UserID = @0", currentUserId))
{
    userID = row.ProviderUserId;

}  
var userID1 = userID; 
```

持有`userID`你可以这样做

```
List<string> userIDs = new List<string>();
foreach(var row in db.Query("SELECT ProviderUserId FROM webpages_OAuthMembership WHERE UserID = @0", currentUserId))
{
    userIDs.Add( row.ProviderUserId);

}  
//Now You have items in userIDs List 
```

# hibernate - Hibernate - 一个链接表中的多个关联（外键）

> ID：13518812
> 
> 赞同：2
> 
> 时间：2012-11-22T19:13:24.247
> 
> 标签：hibernate, linktable

我的问题：

我想用hibernate在一个链接表中映射3个不同表的主键。

一张照片应该是什么样子：

[http://postimage.org/image/uoqv1p7mz/](http://postimage.org/image/uoqv1p7mz/)

我管理它来保存对象，但我无法通过选择加载它。

首先我的课：

**SysTenant.java：**

```
 @Entity
        @Table(name = "SYSTENANT")
        public class SysTenant {

    private long sysTenantId;
    private String name;

    private Set<SysTenantSysUserSysRoleAssociation> tenantUserRoleAssociation = new HashSet<SysTenantSysUserSysRoleAssociation>();

    @Id
    @GeneratedValue(generator = "generator")
    @GenericGenerator(name = "generator", strategy = "increment")
    @Column(name = "SYSTENANTID", nullable = false)
    public long getSysTenantId() {
        return sysTenantId;
    }

    public void setSysTenantId(long sysTenantId) {
        this.sysTenantId = sysTenantId;
    }

    @Column(name = "NAME")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @OneToMany(mappedBy = "pk.sysTenant")
    public Set<SysTenantSysUserSysRoleAssociation> getTenantUserRoleAssociation() {
        return tenantUserRoleAssociation;
    }

        public void setTenantUserRoleAssociation(
            Set<SysTenantSysUserSysRoleAssociation> tenantUserRoleAssociation) {
        this.tenantUserRoleAssociation = tenantUserRoleAssociation;
    }
} 
```

**系统用户.java：**

```
@Entity
@Table(name = "SYSUSER")
public class SysUser {
    //----------------------
    // Constants
    //----------------------

    //----------------------
    // Properties
    //----------------------

    private long sysUserId;
    private String firstname;

    private long tenantId;

    private Set<SysTenantSysUserSysRoleAssociation> tenantUserRoleAssociation = new HashSet<SysTenantSysUserSysRoleAssociation>();

    //----------------------
    // Getter/Setter
    //----------------------

    @Id
    @GeneratedValue(generator = "generator")
    @GenericGenerator(name = "generator", strategy = "increment")
    @Column(name = "SYSUSERID", nullable = false)
    public long getSysUserId() {
        return sysUserId;
    }

    public void setSysUserId(long sysUserId) {
        this.sysUserId = sysUserId;
    }

    @Column(name = "FIRSTNAME")
    public String getFirstname() {
        return firstname;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    @Column(name="TENANTID")
    public long getTenantId() {
        return tenantId;
    }

    public void setTenantId(long tenantId) {
        this.tenantId = tenantId;
    }

    @OneToMany(fetch = FetchType.EAGER, mappedBy = "pk.sysUser")
    public Set<SysTenantSysUserSysRoleAssociation> getTenantUserRoleAssociation() {
        return tenantUserRoleAssociation;
    }

    public void setTenantUserRoleAssociation(
            Set<SysTenantSysUserSysRoleAssociation> tenantUserRoleAssociation) {
        this.tenantUserRoleAssociation = tenantUserRoleAssociation;
    }

} 
```

**SysRole.java：**

```
@Entity
    @Table(name = "SYSROLE")
    public class SysRole {

        private long sysRoleId;
        private String name;

private Set<SysTenantSysUserSysRoleAssociation> tenantUserRoleAssociation = new HashSet<SysTenantSysUserSysRoleAssociation>();

private Set<SysRoleSysTaskAssociation> roleTaskAssociation = new HashSet<SysRoleSysTaskAssociation>();

        // ----------------------
        // Getter/Setter
        // ----------------------

        @Id
        @GeneratedValue(generator = "generator")
        @GenericGenerator(name = "generator", strategy = "increment")
        @Column(name = "SYSROLEID", nullable = false)
        public long getSysRoleId() {
            return sysRoleId;
        }

        public void setSysRoleId(long sysRoleId) {
            this.sysRoleId = sysRoleId;
        }

        @Column(name = "NAME")
        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        @OneToMany(fetch = FetchType.EAGER, mappedBy = "pk.sysRole")
        public Set<SysRoleSysTaskAssociation> getRoleTaskAssociation() {
            return roleTaskAssociation;
        }

        public void setRoleTaskAssociation(Set<SysRoleSysTaskAssociation> roleTaskAssociation) {
            this.roleTaskAssociation = roleTaskAssociation;
        }

        @OneToMany(mappedBy = "pk.sysRole")
        public Set<SysTenantSysUserSysRoleAssociation> getTenantUserRoleAssociation() {
            return tenantUserRoleAssociation;
        }

        public void setTenantUserRoleAssociation(
                Set<SysTenantSysUserSysRoleAssociation> tenantUserRoleAssociation) {
            this.tenantUserRoleAssociation = tenantUserRoleAssociation;
        }

    } 
```

**SysTenantSysUserSysRoleAssociation：**

```
@Entity
@Table(name = "SYSTENANT_SYSUSER_SYSROLE")
@AssociationOverrides({
        @AssociationOverride(name = "pk.sysTenant", joinColumns = @JoinColumn(name = "SYSTENANTID")),
        @AssociationOverride(name = "pk.sysUser", joinColumns = @JoinColumn(name = "SYSUSERID")),
        @AssociationOverride(name = "pk.sysRole", joinColumns = @JoinColumn(name = "SYSROLEID")) })
public class SysTenantSysUserSysRoleAssociation {

    private TenantUserRolePK pk = new TenantUserRolePK();

    //----------------------
    // Getter/Setter
    //----------------------

    @EmbeddedId
    public TenantUserRolePK getPk() {
        return pk;
    }

    public void setPk(TenantUserRolePK pk) {
        this.pk = pk;
    }

    @Transient
    public SysTenant getSysTenant() {
        return pk.getSysTenant();
    }

    public void setSysTenant(SysTenant sysTenant) {
        pk.setSysTenant(sysTenant);
    }

    @Transient
    public SysUser getSysUser() {
        return pk.getSysUser();
    }

    public void setSysUser(SysUser sysUser) {
        pk.setSysUser(sysUser);
    }

    @Transient
    public SysRole getSysRole() {
        return pk.getSysRole();
    }

    public void setSysRole(SysRole sysRole) {
        pk.setSysRole(sysRole);
    }

    //----------------------
    // Classes
    //----------------------

    @SuppressWarnings("serial")
    @Embeddable
    private class TenantUserRolePK implements Serializable {

        private SysTenant sysTenant;
        private SysUser sysUser;
        private SysRole sysRole;

        @ManyToOne
        public SysTenant getSysTenant() {
            return sysTenant;
        }

        public void setSysTenant(SysTenant sysTenant) {
            this.sysTenant = sysTenant;
        }

        @ManyToOne
        public SysUser getSysUser() {
            return sysUser;
        }

        public void setSysUser(SysUser sysUser) {
            this.sysUser = sysUser;
        }

        @ManyToOne
        public SysRole getSysRole() {
            return sysRole;
        }

        public void setSysRole(SysRole sysRole) {
            this.sysRole = sysRole;
        }
    }
} 
```

**为了测试对象是否被保存，我使用以下方法：**

```
public void sysTenantSysUserSysRoleAssociationTest(){
        SysTenantSysUserSysRoleAssociation association = new SysTenantSysUserSysRoleAssociation();

        SysUser sysUser = new SysUser();
        sysUser.setFirstname("Steve");

        association.setSysUser(sysUser);

        SysRole sysRole = new SysRole();
        sysRole.setName("User");

        association.setSysRole(sysRole);

        SysTenant sysTenant = new SysTenant();
        sysTenant.setName("Tenant1");

        association.setSysTenant(sysTenant);

        new SysUserDAO().createUser(sysUser);
        new SysDataDAO().saveSysObject(sysRole);
        new SysDataDAO().saveSysObject(sysTenant);

        new SysDataDAO().saveSysObject(association);
    } 
```

**执行后，正确的对象 ID 被保存到数据库和链接表中。**

**这是我的问题：**

如果我想选择持久的 sysUser 并接收角色和 Tennant HashSet，由 sysTennantSysUserSysRoleAssocion 表中的 ID 引用，代码如下：

```
public void getSysUser(){
        SysDataDAO sysDataDato = new SysDataDAO();
        List<?> result = sysDataDato.executeSysSelect("From SysUser");
    } 
```

列表保持为空。

**选择是正确的还是我的模型中有任何其他错误？**

如果有人可以帮助我，我将不胜感激。

谢谢，

娄

# python - 就地修改列表中的字符串？

> ID：13518815
> 
> 赞同：2
> 
> 时间：2012-11-22T19:13:35.323
> 
> 标签：python, list, loops

我正在尝试根据以前的属性更改列表的某些元素。因为我需要分配一个中间变量，所以我认为这不能作为列表理解来完成。以下带有注释的代码是我想要实现的：

```
for H in header:
    if "lower" in H.lower():
        pref="lower"
    elif "higher" in H.lower():
        pref="higher"
    if header.count(H) > 1:
        # change H inplace
        H = pref+H 
```

我想出的最佳解决方案是：

```
for ii,H in enumerate(header):
    if "lower" in H.lower():
        pref="lower"
    elif "higher" in H.lower():
        pref="higher"
    if header.count(H) > 1:
        header[ii] = pref+H 
```

它不太好用，而且由于索引，我觉得它不像 Python。有一个更好的方法吗？

具体例子：

```
header = ['LowerLevel','Term','J','UpperLevel','Term','J'] 
```

所需的输出：

```
header = ['LowerLevel','LowerTerm','LowerJ','UpperLevel','UpperTerm','UpperJ'] 
```

请注意，我的解决方案都不起作用：前者根本不修改`header`，后者只返回
`header = ['LowerLevel','LowerTerm','LowerJ','UpperLevel','Term','J']`
，因为`count`修改后是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:17:36.663

```
header   = ['LowerLevel','Term','J','UpperLevel','Term','J']
prefixes = ['lower', 'upper']

def prefixed(header):
    prefix = ''

    for h in header:
        for p in prefixes:
            if h.lower().startswith(p):
                prefix, h = h[:len(p)], h[len(p):]
        yield prefix + h

print list(prefixed(header)) 
```

我真的不知道这比你拥有的更好。是*不一样*的...

```
$ ./lower.py
['LowerLevel', 'LowerTerm', 'LowerJ', 'UpperLevel', 'UpperTerm', 'UpperJ'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:38:22.263

像这样，使用生成器函数：

```
In [62]: def func(lis):
    pref=""
    for x in lis:
        if "lower" in x.lower():
            pref="Lower"
        elif "upper" in x.lower():    
            pref="Upper"
        if header.count(x)>1:    
            yield pref+x
        else:      
            yield x
   ....:             

In [63]: list(func(header))
Out[63]: ['LowerLevel', 'LowerTerm', 'LowerJ', 'UpperLevel', 'UpperTerm', 'UpperJ'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T19:53:05.053

这应该适用于您提供的数据。

```
from collections import defaultdict

def find_dups(seq):
    '''Finds duplicates in a sequence and returns a dict
            of value:occurences'''
    seen = defaultdict(int)
    for curr in seq:
        seen[curr] += 1
    d = dict([(i, seen[i]) for i in seen if seen[i] > 1])
    return d

if __name__ == '__main__':
    header = ['LowerLevel','Term','J','UpperLevel','Term','J']
    d = find_dups(header)
    for i, s in enumerate(header):
        if s in d:
            if d[s] % 2:
                pref = 'Upper'
            else:
                pref = 'Lower'
            header[i] = pref + s
            d[s] -= 1 
```

但它让我毛骨悚然地提出任何建议，对你将使用的整个数据集一无所知。

祝你好运，

麦克风

# c# - 如何在 Crystal Reports 中使用两个数据表

> ID：13518818
> 
> 赞同：1
> 
> 时间：2012-11-22T19:13:59.253
> 
> 标签：c#, sql-server-2008, crystal-reports, dataset

我在 Crystal Reports 中有一个问题：我需要打印一个值来自三个表的报表

1.  预订详情
2.  av_details
3.  booking_food_details

因此，为此我使用了具有所有必要字段的数据表。Crystal Report header 部分有`Booking_detail`'s 值，detail 部分`av_details`和`booking_food_details`并排在两列中，并且在报表页脚部分中`Booking_detail`再次有数据，为此我有查询：

```
select 
    b.Booking_id, booked_by, Datetime, FP_no, Name, co_name,
    Booking_type, occupation, Nationality, Address, email_id,
    Pan_no, sitting_arrang, state, city, pin_code, 
    Booking_from, Booking_to, Venue_type, Type_of_function, 
    Food_Pickup_hour, Food_Pickup_min, Min_people, Cost_per_plate,
    Total, Av_item_total, Grant_amount, Advance, Due, Payment_mode,
    card_type, Card_no, av.av_item, av.av_rate, food.Food_menu 
from 
    Booking_details b, av_details av, booking_food_details food 
where 
    b.Booking_id = @Booking_id 
    and b.Booking_id = av.Booking_id 
    and b.Booking_id = food.Booking_id 
```

现在这里的问题是 av_details 和 booking_food_details 有不同的行数。认为：

*   `booking_food_details`有 a,b,c 和
*   `av_details`有 d,e,f,g,h

因此，当我使用数据运行它时，它会显示 5 行条目，并且 av_details 行会重复 5 次，例如：

```
booking_food_details                   av_details
       d                                    a
       e                                    b
       f                                    c
       g                                    a
       h                                    b 
```

相反，它应该显示：

```
booking_food_details                   av_details
       d                                    a
       e                                    b
       f                                    c
       g                                    
       h 
```

所以请帮忙，并且请尽量减少技术，因为在 C# 上还不是很有效。

**编辑：**

我也使用了子报表，但没有用，我使用了两个子报表，一个用于食物菜单和其他 AVdetails，但是食物菜单显示数据但主报表没有数据，甚至 avdetails 只显示标题没有别的

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:59:52.910

如果您有不同的数据集/表，请使用子报表来显示每组数据。

# python - 避免在 PyYAML 中引用

> ID：13518819
> 
> 赞同：16
> 
> 时间：2012-11-22T19:14:11.923
> 
> 标签：python, yaml

我将 YAML 与 PyYAML 一起使用。有没有办法在转储嵌套结构后避免 *id002 引用？为了便于阅读，我想在那里查看实际的（元组）值。

在尝试制作一个迷你示例时，我注意到它仅在我使用相同的 id 对象时才会发生：

```
import yaml

t = ("b", "c")
x = {(1, t):1, (2, t):2, }
print(yaml.dump(x)) 
```

所以我认为`copy.copy()`会解决这个问题，但是对于元组它似乎不起作用:(我可以创建一个具有不同 id 的新元组吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-06-06T12:02:41.253

PyYAML 转储程序使用一种`ignore_aliases`方法来防止原始类型以这种方式“锚定”和“引用”。您可以覆盖该方法以始终忽略传入的任何对象而忽略别名。默认情况下，`yaml.Loader`该类用于`yaml.load`¹：

```
t = ("b", "c")
x = {(1, t):1, (2, t):2, }

yaml.Dumper.ignore_aliases = lambda *args : True

yaml.dump(x, sys.stdout) 
```

会给你：

```
? !!python/tuple
- 1
- !!python/tuple [b, c]
: 1
? !!python/tuple
- 2
- !!python/tuple [b, c]
: 2 
```

这样您就不必尽最大努力让具有相同哈希的元组看起来不同。您可能希望将`default_flow_style`参数提供`yaml.load`给`False`或`True`获取不同的输出布局。

你不能让它工作的原因是表示器匹配的结果`id()`和对于单独生成的两个元组来说是相同的，只要元素是相同的。

* * *

¹[我只用我是作者的[ruamel.yaml](https://pypi.python.org/pypi/ruamel.yaml)尝试了这个，它是 PyYAML 的增强版本，但是对于这个来说，两者应该是一样的。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-29T11:11:46.220

[此方法](https://ttl255.com/yaml-anchors-and-aliases-and-how-to-disable-them/)适用于 Python 2 和 Python 3，并且不需要猴子补丁：

```
import yaml

class NoAliasDumper(yaml.SafeDumper):
    def ignore_aliases(self, data):
        return True

t = ("b", "c")
x = {(1, t):1, (2, t):2, }
print(yaml.dump(x, Dumper=NoAliasDumper)) 
```

产生

```
? - 1
  - [b, c]
: 1
? - 2
  - [b, c]
: 2 
```

# mysql - MySQL 5.5.24 - UPDATE 上的重复条目，当没有真正的重复时

> ID：13518820
> 
> 赞同：16
> 
> 时间：2012-11-22T19:14:19.603
> 
> 标签：mysql, sql-update, duplicates

我必须更新具有以下结构的表：

```
CREATE TABLE `eav_entity_attribute` (
  `entity_attribute_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Entity Attribute Id',
  `entity_type_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT 'Entity Type Id',
  `attribute_set_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT 'Attribute Set Id',
  `attribute_group_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT 'Attribute Group Id',
  `attribute_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT 'Attribute Id',
  `sort_order` smallint(6) NOT NULL DEFAULT '0' COMMENT 'Sort Order',
  PRIMARY KEY (`entity_attribute_id`),
  UNIQUE KEY `UNQ_EAV_ENTITY_ATTRIBUTE_ATTRIBUTE_SET_ID_ATTRIBUTE_ID` (`attribute_set_id`,`attribute_id`),
  UNIQUE KEY `UNQ_EAV_ENTITY_ATTRIBUTE_ATTRIBUTE_GROUP_ID_ATTRIBUTE_ID` (`attribute_group_id`,`attribute_id`),
  KEY `IDX_EAV_ENTITY_ATTRIBUTE_ATTRIBUTE_SET_ID_SORT_ORDER` (`attribute_set_id`,`sort_order`),
  KEY `IDX_EAV_ENTITY_ATTRIBUTE_ATTRIBUTE_ID` (`attribute_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Eav Entity Attributes' 
```

上表包含一行：

```
INSERT INTO `eav_entity_attribute`
(`entity_attribute_id`, `entity_type_id`, `attribute_set_id`, `attribute_group_id`, `attribute_id`, `sort_order`)
VALUES
(32758, 4, 224, 3423, 5171, 12) 
```

我正在运行一个自动导入程序，它将读取外部数据源并写入此表。

此导入运行多次，因此有时会多次导入相同的数据。在这种情况下，该过程只是简单地用新数据覆盖旧数据，即使新数据与旧数据相同。使用 ON DUPLICATE KEY UPDATE 子句处理存在相同数据的情况。除了在这张特定的桌子上之外，这几乎可以完美地工作。

在此表上，当过程尝试更新时，我收到“重复键”消息，我无法解释。我调试了代码，这是失败的查询（从 INSERT..ON DUPLICATE KEY 中提取）：

```
UPDATE eav_entity_attribute
SET 
  `attribute_group_id` = 3423
  ,`attribute_id` = 5171
  ,`attribute_set_id` = 223
  ,`entity_type_id` = 4
  ,`sort_order` = 320
WHERE 
  (`attribute_group_id` = 3423) AND
  (`attribute_id` = 5171) 
```

错误如下：

```
Error Code: 1062\. Duplicate entry '3423-5171' for key 'UNQ_EAV_ENTITY_ATTRIBUTE_ATTRIBUTE_GROUP_ID_ATTRIBUTE_ID' 
```

我知道这对 3423-5171 已经存在，但是 UPDATE 会用它们自己替换这些值，而不是创建一个新条目。我对这个问题的原因感到很困惑，任何建议都会非常受欢迎。谢谢。

**更新 - 新发现**

我得到了某种“灵感”，我做了一个实验。我删除了涉及*( `attribute_set_id`, `attribute_id`)*的唯一约束（注意，这不是错误中的那个），然后我运行了 INSERT..ON DUPLICATE 查询。它工作得很好。

我的是一个猜想，但这就是我的想法：我试图写入表的数据与两个约束冲突：

*   唯一的( `attribute_set_id`, `attribute_id`)
*   唯一的( `attribute_group_id`, `attribute_id`)

**INSERT 失败，大概是因为第一个**约束引发的重复错误。这会触发 UPDATE，它使用第一个约束作为隐式 WHERE 子句。我的猜测是，在这种情况下，第一个约束以某种方式被忽略了，但是 UPDATE 超过了第二个，而第二个约束并没有更早涉及。

对我来说，这似乎仍然不是 UPDATE 的正当理由，它用自身替换某些内容以引发重复输入错误，但它可能会阐明其背后的逻辑。

**第二次更新**

我发现我正在测试的表实际上包含很多行（我忘记禁用过滤视图），这是由于成功导入其他数据而产生的。但是，“重复的候选者”在集合中仍然是唯一的。

我确认评论中发布的内容，当表仅包含该行时，INSERT..ON DUPLICATE 以及单独的 UPDATE 都有效。现在我想知道为什么当表中有更多数据时表会变得混乱，因为我们仍在讨论使用相同数据更新单个唯一行。

**第三次更新 - 找到根本原因**

我终于找到了 UPDATE 失败的原因，现在我必须弄清楚我是如何进入这种状态的。

线索是我在第一次更新时的猜想。简单地说，我有两个非常相似的行（请注意，当我从一个干净的数据库开始时，我使用了不同的值）。

```
row,entity_attribute_id,entity_type_id,attribute_set_id,attribute_group_id,attribute_id,sort_order
1,16919, 4, 120, 1746, 80, 1
2,16649, 4, 119, 1744, 80, 210 
```

这是发生的事情：

*   INSERT 尝试插入具有以下值的行：`120, 4, 1744, 80, 54`.
*   这会触发“重复键”，因为`120, 80`字段的值是重复的`attribute_set_id, attribute_id`（第 1 行）。
*   MySQL 然后尝试 UPDATE，它变成如下：

    更新表 `entity_type_id`= 4 , `attribute_group_id`= 1744 , `sort_order`= 54 WHERE ( `attribute_set_id`= 120) AND ( `attribute_id`= 80)

*   这一次，UPDATE 失败，因为值`1744,80`违反了 pair 的约束`attribute_group_id, attribute_id`，在第 2 行中找到。

**总之**

*   INSERT 失败，因为第 1 行的 key 值相同`attribute_set_id, attribute_id`。
*   UPDATE 失败，因为第 2 行的 key 值相同`attribute_group_id, attribute_id`。

**解决方案**

我将不得不审查整个导入程序，因为理论上不会出现此类重复。MySQL 做得很好，它是复杂的数据库。

感谢所有的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:52:18.830

`UPDATE`尽量不要更新子句中的键值`INSERT ... ON DUPLICATE KEY UPDATE`。如果具有这些键值的记录已经存在，那么要求 MySQL 更改键值是很奇怪的，因此，MySQL 的意外行为也就不足为奇了。

# image - 通过css将所有照片变成正方形

> ID：13518833
> 
> 赞同：19
> 
> 时间：2012-11-22T19:15:26.017
> 
> 标签：image, css, shape

我正在尝试将一系列照片制作成方形照片。它们可能是水平的（即 600x400）或垂直的（400x600）矩形，但我想让它们成为 175x175。我的想法是在较小的一侧设置最大高度或最大宽度，并且不允许在较大的一侧溢出超过 175 像素……但是，我遇到了问题。

这可以用css吗？

下面是我的尝试，但它仍然给出矩形：

```
<div style="min-height:175px; overflow:hidden; max-height:175px;">
<img style="min-width:175px; overflow:hidden; max-height:175px;" src="/photo.png">
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-22T19:35:11.040

您可以设置父 div 的宽度/高度，然后将子 img 标签设置为 width:100%; 高度：自动；

这将缩小图像以尝试适应父母的纵横比。

您还可以将图像设置为 div 上的背景图像然后，如果您可以使用 css3，则可以弄乱背景大小属性。它的属性是：包含、覆盖或指定高度（50%、50%）（175px、175px）您也可以尝试使用 background-position 使图片居中

```
<div style="background-image:url(some.png); background-size: cover; background-position: 50%"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T17:45:56.237

好的，我明白了。

不知道是不是太晚了还是怎么了，但我想出了一个 100% 纯 CSS 方法来创建方形缩略图。这是我长期以来一直试图找到解决方案但没有运气的东西。通过一些实验，我得到了它的工作。要使用的主要两个属性是 OVERFLOW:HIDDEN 和 WIDTH/HEIGHT:AUTO。

好的，这是要做的：

假设您有一批不同形状和大小的图像，一些是风景的，一些是肖像的，但当然都是矩形的。首先要做的是使用类选择器按纵向或横向对图像链接（缩略图）进行分类。好的，假设您只想创建两个缩略图，以使其更简单。你有：

img1.jpg（纵向）和 img2.jpg（横向）

对于 HTML，它看起来像这样：

```
<a class="portrait" href="yoursite/yourimages/img1.jpg"><img src="yoursite/yourimages/img1.jpg /></a>
<a class="landscape" href="yoursite/yourimages/img2.jpg"><img src="yoursite/yourimages/img2.jpg /></a> 
```

因此，此时由于还没有 css，上面的代码将为您提供全尺寸图像作为缩略图，该缩略图将链接到相同的全尺寸图像。对，所以这是纵向和横向的 css。每个都有两个声明（链接和链接的图像）：

```
.landscape {
        float:left;
        width:175px;     
        height:175px;    
        overflow:hidden;    
    }

.landscape  img{
        width:auto;
        height: 175px;   
    }

.portrait {
        float:left;
        width:175px;
        height:175px;
        overflow:hidden;    
    }

.portrait img {
        width:175px;    <-- notice these
        height: auto;   <-- have switched
    } 
```

最重要的是宽度和高度以及溢出：隐藏。向左浮动不是此工作所必需的。

在横向缩略图声明 (.landscape) 中，边界框设置为 175 x 175，溢出设置为隐藏。这意味着任何大于包含 175px 正方形的视觉信息都将从视图中隐藏。

对于横向图像声明（.landscape img），高度固定为175px，调整原始高度，宽度设置为auto，调整原始宽度，但仅与边界正方形相关，即在这种情况下是 175px。因此，与其将宽度向下涂抹到正方形中，它只是简单地填充正方形，然后宽度中的任何额外视觉信息（即溢出）被溢出隐藏起来：隐藏。

它对纵向的工作方式相同，只是切换了宽度和高度，其中高度为自动，宽度为 175px。基本上在每种情况下，任何超过另一个的尺寸都设置为自动，因为自然较大的尺寸会溢出设置的缩略图尺寸（175px x 175x）之外。

如果你想在拇指之间添加边距，例如5px的白色边距，你可以使用border属性，否则信息溢出的地方将没有边距。

希望这是有道理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2022-01-30T18:13:53.360

这是一个**最新**的（2022 年）和**简单的**答案。

例如，如果您想要一个容器内的**方形图像。**假设您希望图像占据容器高度的 100% 并具有等于高度的动态宽度：

```
.container {
  height: 100px; // any value
}

.img {
  width: auto;
  height: 100%;
  aspect-ratio: 1; // will make width equal to height (100px container)
  object-fit: cover; // use the one you need
} 
```

如果您希望 100% 基于容器的宽度并且计算的高度等于宽度，您可以切换宽度和高度值（容器和图像）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-13T13:26:12.233

您可以使用[`object-fit`](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit)，它在所有主要浏览器中都[得到广泛支持。](https://caniuse.com/#feat=object-fit)当设置为时，浏览器将在您设置和属性`cover`时裁剪图像，而不是拉伸它。`width``height`

```
<img src="whatever.jpg"> 
```

```
img {
  width: 175px;
  height: 175px;
  object-fit: cover;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T21:21:32.747

确定图像的宽度和高度，然后激活图像的纵向或横向类。如果肖像做`{height:175px; width:auto}`。如果是横向，则反转高度和宽度。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-01-12T23:48:05.780

我强烈建议任何想要这样做的人使用 NailThumb jquery 插件。它允许您创建方形缩略图而不会失真。 [http://www.garralab.com/nailthumb.php](http://www.garralab.com/nailthumb.php)

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2012-11-24T11:50:42.487

这可能会有所帮助。

CSS：

```
.image{
-moz-border-radius: 30px; /* FF1+ */
-webkit-border-radius: 30px; /* Saf3-4 */
border-radius: 30px; /* Opera 10.5, IE 9, Saf5, Chrome */
} 
```

HTML：

```
<div class="image"></div> 
```

这对我有用。只需将图像的 URL 放在 div 中即可。

# iphone - iPhone 中的 UIIMAGE 旋转而不旋转 UIIMAGEVIEW On Button 单击顺时针或逆时针方向

> ID：13518835
> 
> 赞同：1
> 
> 时间：2012-11-22T19:15:30.537
> 
> 标签：iphone, ipad, rotation

在我将 UIImage 分配给 UIImageView 后，我有一个 UIImageView，其中充满了由相机拍摄或从 Liabray 中挑选的图像在 superview UIImageView 然后在我想要将图像保存在最终位置后，用户保存了该图像......

如果有任何方法或程序，请分享为我在过去很多天搜索此查询，但没有得到任何具有适当细节和工作的准确解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:34:50.283

轮换例程（在另一篇文章中找到了这个例程，但我忘记了在哪里）：

```
-(UIImage *)rotateImage:(UIImage *)image angleInRadians:(float)angleInRadians {

    UIGraphicsBeginImageContext(image.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextRotateCTM(ctx, angleInRadians);
    CGContextDrawImage(ctx, (CGRect){{}, image.size}, image);

    UIImage *imageOut = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return imageOut;
} 
```

弧度角可以是 M_PI/2 或 -M_PI/2 以将横向更改为纵向，反之亦然

# django - 如何在 django 中构建完整的 URL

> ID：13518844
> 
> 赞同：1
> 
> 时间：2012-11-22T19:15:53.333
> 
> 标签：django, url, satchmo

我需要让 django 发送一封电子邮件，其中包含这样的 URL

```
http://www.mysite.org/history/ 
```

像这样获得“历史”的地方：

```
history_url = urlresolvers.reverse('satchmo_order_history') 
```

history_url 是我传递给发送电子邮件的函数的参数，它正确地生成“/history/”。但是我如何获得第一部分？(http://www.mysite.org)

**编辑 1**

*这样做有什么不对或不可移植的吗？*：

```
history = urlresolvers.reverse('satchmo_order_history')
domain = Site.objects.get_current().domain
history_url = 'http://' + domain + history 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:56:00.023

如果您有权访问[`HttpRequest`](https://docs.djangoproject.com/en/1.4/ref/request-response/#httprequest-objects)实例，则可以使用[`HttpRequest.build_absolute_uri(location)`](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.build_absolute_uri)：

```
absolute_uri = request.build_absolute_uri(relative_uri) 
```

或者，您可以使用[站点框架](https://docs.djangoproject.com/en/1.4/ref/contrib/sites/#module-django.contrib.sites)获取它：

```
import urlparse
from django.contrib.sites.models import Site

domain = Site.objects.get_current().domain
absolute_uri = urlparse.urljoin('http://{}'.format(domain), relative_uri) 
```

* * *

**回复：编辑1**

我倾向于使用[`urlparse.join`](http://docs.python.org/2/library/urlparse.html#urlparse.urljoin)，因为它在标准库中，并且从技术上讲，它是组合 URI 的最 Pythonic 方式，但我认为您的方法也很好。

# php - 检查二进制图像数据

> ID：13518852
> 
> 赞同：2
> 
> 时间：2012-11-22T19:16:30.053
> 
> 标签：php, binaryfiles

我需要通过检查二进制数据来找到用户上传了什么样的文件，我找到了完美的解决方案，在[这里](https://stackoverflow.com/questions/3312607/php-binary-image-data-checking-the-image-type)

具体来说，这是我正在使用的功能：

```
function getImgType($filename) {
    $handle = @fopen($filename, 'r');
    if (!$handle)
        throw new Exception('File Open Error');

    $types = array('jpeg' => "\xFF\xD8\xFF", 'gif' => 'GIF', 'png' => "\x89\x50\x4e\x47\x0d\x0a", 'bmp' => 'BM', 'psd' => '8BPS', 'swf' => 'FWS');
    $bytes = fgets($handle, 8);
    $found = 'other';

    foreach ($types as $type => $header) {
        if (strpos($bytes, $header) === 0) {
            $found = $type;
            break;
        }
    }
    fclose($handle);
    return $found;
} 
```

现在我的问题是，我怎样才能获得其他文件类型的位，比如`.zip, .exe, mp3, mp4`等...如果那里有某种列表，那就太好了，尽管我想自己提取它并了解所有这些作品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:29:14.107

您要查找的内容称为[文件幻数](http://en.wikipedia.org/wiki/File_format#Magic_number)。

幻数*是一种*文件签名——因为有时它**需要比幻数更多的时间**来识别文件。

可以在[此处](http://en.wikipedia.org/wiki/List_of_file_signatures)找到此类数字的（非常​​）简短列表。可以在[此处](http://www.filesignatures.net/)找到更大的列表。

文件识别网站也经常提到文件幻数。

在linux中，该[`file`](http://en.wikipedia.org/wiki/File_%28command%29)命令可用于识别文件。在 PHP 中，您可以使用[FileInfo](http://php.net/manual/en/book.fileinfo.php)函数集来识别文件。

* * *

顺便说一句，您没有指定要识别的文件类型。有时，识别可能是错误的解决方案。例如，人们过去希望在将文件传递给 GD 或将它们作为图像保存在服务器上之前对其进行识别。在这种情况下，识别并不是你真正的工作。相反，请使用以下代码：

```
$data = file_get_contents('data.dat'); // File might eventcontain a JPG...it is
                                       // still loaded without problems!
$image = imagecreatefromstring($data); // ... since this function just needs the
                                       // file's data, nothing more. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T19:29:10.877

您要查找的内容称为“*文件签名*”、“*魔术字节*”或“*魔术数字*”。

[**此页面**](http://www.garykessler.net/library/file_sigs.html)列出了许多文件格式的许多文件

但是，我不会依赖它们来识别文件格式。**请改用[PHP 的 finfo_file](http://www.php.net/manual/en/function.finfo-file.php)**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T19:25:11.817

大多数文件都有一个特定的*标题*或*文件签名*或（显然）*幻数*，它们是同一事物的不同名称：文件开头的一组固定字节。

例如，[.exe 以 'MZ' 开头](http://www.fileformat.info/format/exe/corion-mz.htm)，[.zip 具有固定的 4 字节序列](http://en.wikipedia.org/wiki/Zip_%28file_format%29#File_headers)

该网页包含大量文件签名： [http ://www.garykessler.net/library/file_sigs.html](http://www.garykessler.net/library/file_sigs.html)

如果您搜索`.extension file format`or `.extension file header`，您通常会找到文件格式的描述。

# javascript - 自动调整网页上的图像大小

> ID：13518853
> 
> 赞同：3
> 
> 时间：2012-11-22T19:16:37.760
> 
> 标签：javascript, css

我有一个按钮类型的按钮，我想在上面放置一个图像。我的代码看起来像这样

```
<button id="button" type="button" onclick="bus()">
  <img src="DestinationH-Bus-Driver-Login.png">
</button> 
```

这样做的问题是我得到一个灰色空间，使整个图像变大，如果我使用更大的图像它工作正常。但是，如果我突然用电话呼叫该站点，那么大按钮就会变得很小。任何建议将不胜感激。

我知道图像类型，但我不能使用它，因为它给了我一个提交类型的按钮，我想要一个按钮类型的按钮，但是如果我使用图像类型而不是上述方法，图片确实可以很好地工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:18:33.023

Why not just put the `onclick` event on the image?

```
<img src="DestinationH-Bus-Driver-Login.png" onClick="bus()" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:15:17.767

如有必要，您可以使用`input`image 类型的标签并通过返回来取消事件处理程序中的默认表单提交`false`：

```
<input type="image" src="DestinationH-Bus-Driver-Login.png" onclick="bus(); return false;"/> 
```

这应该为您提供与标签相同的功能`button`，但具有更好的跨浏览器支持以使用图像对其进行样式设置。

# ruby-on-rails - 无法让 save_and_open_page 在 rspec 中为错字项目工作

> ID：13518855
> 
> 赞同：2
> 
> 时间：2012-11-22T19:16:43.163
> 
> 标签：ruby-on-rails, capybara

所以我正在处理 EdX 第 2 部分作业 1，我似乎无法让 save_and_open_page 工作。

这是 rspec 块：

```
 describe 'merge action' do

  before do
    @article_for_merging = Factory(:article)
    @article_for_merging.body = 'something we will merge'
  end

  it 'should merge articles' do
    get :merge, 'id' => @article.id, 'merge_with' =>  @article_for_merging.id
    response.should render_template('new')
    assigns(:article).should_not be_nil
    assigns(:article).should be_valid
    response.should contain(/body/)
    response.should contain(/extended content/)
    save_and_open_page
    debugger
    response.should have_field('article[body]',:with => @article.body + @article_for_merging.body)
    response.should have_selector('form#merge input#merge_with')
    response.should have_selector('form#merge input#merge')
  end
end 
```

其他堆栈溢出帖子提出了解决方案：

[RSpec2 和水豚](https://stackoverflow.com/questions/7260720/rspec2-and-capybara)

[http://paikialog.wordpress.com/2012/02/11/webrat-no-such-file-to-load-action_controllerintegration/](http://paikialog.wordpress.com/2012/02/11/webrat-no-such-file-to-load-action_controllerintegration/)

[save_and_open_page (capybara / launchy) 在项目中停止工作 - 错误](https://stackoverflow.com/questions/12608976/save-and-open-page-capybara-launchy-stopped-working-in-a-project-error)

我相信我已经尝试了所有方法，但我无法让它发挥作用。这很令人沮丧，因为我可以查看原始 HTML，但是对于大页面来说，找出我需要的 html 细节真是太痛苦了——在浏览器中使用 chrome 的“检查元素”之类的东西要容易得多。

无论我尝试过哪种建议的解决方案组合，我都会不断地回到这个错误的一些变化：

 ( 4 级）在 '

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:33:55.947

啊，我想这可能已经解决了：

[http://paikialog.wordpress.com/2012/02/11/webrat-no-such-file-to-load-action_controllerintegration/](http://paikialog.wordpress.com/2012/02/11/webrat-no-such-file-to-load-action_controllerintegration/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T17:17:12.460

[根据评论中Sam Joseph](https://stackoverflow.com/users/316729/sam-joseph)的黑客解决方案，我编写了这个方法并将其放在 spec/support/helpers.rb 中：

```
def save_and_open_rspec_page
  File.open('/tmp/test.html','w'){|file| file.write(rendered)}; `open '/tmp/test.html'`
end 
```

`response.body`对我不起作用，大概是因为我在视图规范中？

`firefox`也不适合我。因为我在Mac上，所以我`open`改用了。

另外，我`render`之前打电话`save_and_open_rspec_page`给我的视图规范。

# three.js - 带有骨骼动画（搅拌机导出）的模型在三个.js 中动画不正确

> ID：13518856
> 
> 赞同：9
> 
> 时间：2012-11-22T19:16:52.307
> 
> 标签：three.js, blender, skeletal-animation

我目前正在三个.js 中进行骨骼动画测试。我有一个简单的模型，可以在搅拌机中很好地制作动画。基本上它由三个堆叠的弯曲立方体组成。

当我使用 Blender V2.64 的 Blender 导出插件将 Blender 文件导出到 Three.js 时，webGl 上下文中的动画看起来不同，就好像皮肤权重错误一样。

![](../Images/89bef5a249ac18ade7e3a023d0541dea.png)

WebGL 演示： [http ://rainbowrangers.de/threejs/animation_test01/](http://rainbowrangers.de/threejs/animation_test01/)

搅拌机文件： [http ://rainbowrangers.de/threejs/animation_test01/model/animation_test01.blend](http://rainbowrangers.de/threejs/animation_test01/model/animation_test01.blend)

我该怎么做才能在 three.js 中得到正确的结果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T06:58:23.347

我是你在 github 讨论中引用的那个人。我最近一直在试验这个管道，（即 Blender 骨骼动画到threejs，）并且发现找到一个每次都能工作的可靠过程非常困难。

在我的博客上，我整理了一份“秘诀”列表，这些秘诀让我在某些情况下取得了成功：

[http://dev.mothteeth.com/2012/10/threejs-blender-exporting-skeletal-animations/](http://dev.mothteeth.com/2012/10/threejs-blender-exporting-skeletal-animations/)

总而言之，我发现的最重要的事情是：

导出前删除Armature Modifier，否则动画会一团糟。

检查您的顶点组是否正确分配给骨骼。（在 Blender 中，您可以使用自动骨骼权重。）

在动画的第一帧和最后一帧中键入所有骨骼。（正如您所发现的，如果您只有已更改骨骼的键，ThreeJS 不会推断出其他骨骼的任何内容，并且事情会被破坏。）

即使遵循这些指导方针，我也无法让事情始终如一地工作，并且一直在考虑使用变形目标，直到库更加成熟为止。变形目标的文件大小要大得多，但根据我的经验，目前它们似乎是一个更可靠的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T14:25:17.080

经过大量挖掘，我终于在三个.js github讨论之一中找到了答案：

> “在动画的开头和结尾为所有骨骼插入一个完整的关键帧。我发现如果没有第一个关键帧，动画会轻微变形，如果没有最后的关键帧，我会在接近结尾时丢失部分动画。”

来源：[https ://github.com/mrdoob/three.js/issues/2106](https://github.com/mrdoob/three.js/issues/2106)

这正是我们的渲染发生的事情。我们只为正在变化的骨骼设置关键帧，而不为静态骨骼设置关键帧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T20:32:30.507

I've also found that to get the exported model working right the export should be done at frame 0 in Blender.

Another thing that solved a problem I've encountered was not to scale model after exporting it. This means that the model can't be scaled in the JSON file and probably in the code directly.

Using three.js r56

# javascript - 使用 JavaScript 为图像创建彩色半色调效果

> ID：13518857
> 
> 赞同：3
> 
> 时间：2012-11-22T19:16:52.750
> 
> 标签：javascript, css, html5-canvas

谁能告诉我是否有一种方法可以在不使用 WebGL 的情况下使用 JavaScript 将彩色半色调效果应用于图像。我需要创建它，以便它可以跨多个设备和浏览器使用。我发现了这个，但它使用 WebGL：[http ://evanw.github.com/webgl-filter/](http://evanw.github.com/webgl-filter/)

我可以使用 three.js 或 processing.js 来实现它吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:48:43.777

1.  为自己创建一个画布元素并将图像放入其中（参见@Diodeus 的链接）。

2.  从画布中获取图像数据 - 现在您可以遍历所有像素。

3.  对图像数据应用半色调滤镜。请参阅：[制作半色调图像的算法？](https://stackoverflow.com/questions/1258047/algorithm-to-make-halftone-images)

4.  更新图像数据

顺便说一句：我不建议在客户端计算机上执行此操作。图像处理需要一些在客户端（例如智能手机）上可能不可用的处理能力。最好使用 ImageMagick 在服务器上执行一次。

# unit-testing - nunit-agent 似乎无法从测试配置中加载探测 privatePath

> ID：13518858
> 
> 赞同：3
> 
> 时间：2012-11-22T19:16:53.750
> 
> 标签：unit-testing, visual-studio-2012, nunit, probing

以前，当我只有 Visual Studio 2010 时，我的单元测试执行得很好。

基本上，我的测试由两个文件组成：UnitTests.dll 和 UnitTests.dll.config。UniTests.dll.config 有一个自定义探测 privatePath（例如，Public;Extensions;Lib）

为了执行，我曾经遵循以下工作流程： 1\. 我将两个文件（即 UnitTests.dll 和 .config）复制到我的测试应用程序所在的文件夹中。2\. 打开 NUnit 界面。3\. 在禁用 ShadowCopy 的情况下执行测试，因为我的测试需要从我正在测试的应用程序中加载 dll。

这工作正常！

安装 Visual Studio 2012 后，测试不再运行。后来，我想出了一个解决方法，但我不想在我的解决方案中使用它。

现在，我必须按照这个工作流程来运行测试：

1.  我将这两个文件（即 UnitTests.dll 和 .config）复制到我正在测试的应用程序所在的文件夹中。
2.  我将所有 NUnit 安装文件（即 nunit-agent、nunit-console 等）复制到我正在测试的应用程序所在的文件夹中。
3.  我从 nunit-agent.dll.config 更改了探测 privatePath，以便包含来自我的 UnitTests.dll.config 的相同路径。
4.  打开位于我的应用程序测试文件夹下的 NUnit gui。
5.  在禁用 ShadowCopy 的情况下执行测试。

请注意，我必须包含第 2 步和第 3 步才能运行我的单元测试。不知何故，我认为 nunit-agent.dll 没有从我的测试程序集的配置文件中加载探测 privatePath。

有谁知道为什么会这样？有没有人有一种解决方法，我不需要更改 nunit-agent.dll.config 并复制 nunit 安装文件？

提前致谢。

# c# - Unity IOC 和工厂模式，以及存储库模式

> ID：13518866
> 
> 赞同：2
> 
> 时间：2012-11-22T19:17:35.360
> 
> 标签：c#, unity-container, enterprise-library, factory-pattern

我正在尝试在我正在编写的程序中使用企业库的 Unity Block。

但我认为我使用依赖注入错误。我想知道是否有人可以指出我正确的方向。

```
 static void Main(string[] args)
        {
                using (IUnityContainer container = new UnityContainer())
                {
                    InitialiseContainer(container);
                    DataCopierFactory dcFactory = new DataCopierFactory();

                    ERunOptions dataCopierType = ExtractParams(args);

                    IDataCopier dataCopier = dcFactory.CreateDataCopier((int)dataCopierType, container);
                    dataCopier.DetectChanges();
                    dataCopier.ParseData();
                    dataCopier.CopyData();
                }
            }
         }
 //use the ioc container to register the EF context type to the repository interfaces..
        private static void InitialiseContainer(IUnityContainer container)
        {

            //add Extensions:
            container.AddNewExtension<Interception>();

            //Licence Schedule
            container.RegisterType<IEFContext, LTE_DownFromWeb_EFContext>("DataCopier.ScheduleDataCopier.Source");
            container.RegisterType<IEFContext, LTE_Licensing_EFContext>("DataCopier.ScheduleDataCopier.Destination");

            container.RegisterType<IRepositorySession>("Schedule_Source",new InjectionConstructor(container.Resolve<IEFContext>("DataCopier.ScheduleDataCopier.Source")));
            container.RegisterType<IRepositorySession>("Schedule_Destination",new InjectionConstructor(container.Resolve<IEFContext>("DataCopier.ScheduleDataCopier.Destination")));

        } 
```

所以基本上 DataCopier Factory 会创建一个 DataCopier 的实例，如下所示：

数据复印机工厂：

```
 //return a data copier that will transfer data from any DB to any other DB
        public IDataCopier CreateDataCopier(int i, IUnityContainer container)
        {
            switch(i)
            {
                case 1:
                    return new ScheduleDataCopier(container);

                default:
                    throw new InvalidOperationException("Parameter " + i + " does not exist");
            }
        } 
```

数据复印机如下所示：

```
 class ScheduleDataCopier : IDataCopier
    {
        private List<Site> _sites;
        private List<SitesAndApparatuses> _scheduleList;
        private IUnityContainer _container;
        public ScheduleDataCopier(IUnityContainer container)
        {
            _container = container;
            _scheduleList = new List<SitesAndApparatuses>();
        }

        //check if new sites registration has arrived in tblSites on down from web db.
        public bool DetectChanges()
        {
            using (var db = _container.Resolve<IRepositorySession>("Schedule_Source"))
            { 
                SiteAudit lastSite = new SitesAuditRepository().GetLatest();
                var sitesRepo = new SitesRepository();
                var sites = sitesRepo.Where(x => x.SID > lastSite.SALatestSID);

                if (sites.Count() < 1)
                {
                    return false;
                }
                _sites = sites.ToList();
                db.Dispose();
            }
            return true;
        }
        //parse the data into a list of object SitesAndApparatuses
        public bool ParseData()
        {
            try
            {
                foreach (Site s in _sites)
                {
                    var schedule = (SitesAndApparatuses)XmlObjectBuilder.Deserialize(typeof(SitesAndApparatuses), s.XMLFile);
                    schedule.acCode = s.Registration.RAcCode;
                    _scheduleList.Add(schedule);
                }
            }
            catch (Exception ex)
            {
                throw new NotImplementedException("HANDLE THIS SHIT!", ex);
            }
            return true;
        }

        public bool CopyData()
        {
            try
            {
               using (var db = _container.Resolve<IRepositorySession>("Schedule_Destination"))
                {
                        var licensingScheduleRepo = new LicensingScheduleRepository();
                       //some logic
                    db.Commit();
                }
            }
            catch (Exception ex)
            {
            }
                return true;
        }
} 
```

第二个问题，我使用我传递的统一容器解决了 Datacopier 类中名为 RepositorySession 的工作单元对象...这是错误的方法吗？为什么，我很难在网上找到任何信息？

这可能是太多人阅读的代码..但我希望得到一个答案！

提前感谢尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:34:17.427

我会做类似的事情：

```
container.RegisterType<IEFContext, LTE_DownFromWeb_EFContext>("Source");
container.RegisterType<IEFContext, LTE_Licensing_EFContext>("Destination");
container.RegisterType<IRepositorySession>("Source",new InjectionConstructor(new ResolvedParameter<IEFContext>("Source"));
container.RegisterType<IRepositorySession>("Destination",new InjectionConstructor(new ResolvedParameter<IEFContext>("Destination")));
container.RegisterType<IDataCopier,ScheduleDataCopier>("0",new InjectionConstructor(new[] {new ResolvedParameter<IRepositorySession("Source"),new ResolvedParameter<IRepositorySesison>("Destination")}));
//Now resolve

ERunOptions dataCopierType = ExtractParams(args);
IDataCopier dataCopier = container.Resolve<IDataCopier(dataCopierType.ToString());
dataCopier.DetectChanges();
dataCopier.ParseData();
dataCopier.CopyData(); 
```

数据复印机类

```
class ScheduleDataCopier : IDataCopier
{
    private List<Site> _sites;
    private List<SitesAndApparatuses> _scheduleList;
    private IRepositorySession _source;
    private (IRepositorySession _destination;

    public ScheduleDataCopier(IRepositorySession source, (IRepositorySession destination)
    {
        _source=source;
        _destination=destination;
        _scheduleList = new List<SitesAndApparatuses>();
    }

    //check if new sites registration has arrived in tblSites on down from web db.
    public bool DetectChanges()
    {
        SiteAudit lastSite = new SitesAuditRepository().GetLatest();
        var sitesRepo = new SitesRepository();
        var sites = sitesRepo.Where(x => x.SID > lastSite.SALatestSID);

        if (sites.Count() < 1)
        {
            return false;
        }
        _sites = sites.ToList();
        _source.DoSomething();
        _source.CommitAndReleaseResources();//clean up but leave object reusable
        return true;
    }

    //parse the data into a list of object SitesAndApparatuses
    public bool ParseData()
    {
        try
        {
            foreach (Site s in _sites)
            {
                var schedule = (SitesAndApparatuses)XmlObjectBuilder.Deserialize(typeof(SitesAndApparatuses), s.XMLFile);
                schedule.acCode = s.Registration.RAcCode;
                _scheduleList.Add(schedule);
            }
        }
        catch (Exception ex)
        {
            throw new NotImplementedException("HANDLE THIS SHIT!", ex);
        }
        return true;
    }

    public bool CopyData()
    {
        try
        {
            var licensingScheduleRepo = new LicensingScheduleRepository();
            //some logic
            _desitnation.Commit();
        }
        catch (Exception ex)
        {
            //handle exception
        }
        return true;
    }
} 
```

您正在做的事情与上面的两个主要区别是我使用[注入参数](http://msdn.microsoft.com/en-us/library/ff660882%28v=pandp.20%29.aspx)（ResolvedParameter 类）在需要时动态解析对象实例。

这让我可以让 Unity 为我完成整个 DI 流程，包括解析我的 DataCopier。如果我添加另一个 DataCopier，我只需将新的 DataCopier 类型添加到 Unity，其名称与相应的 ERunOptions 类型匹配，我就可以在不更改代码的情况下解析新的 DataCopier：

```
container.RegisterType<IDataCopier,RandomDataCopier>("0",new InjectionConstructor(new[] {new ResolvedParameter<IRepositorySession("RandomSource"),new ResolvedParameter<IRepositorySesison>("RandomDestination")})); 
```

和：

```
ERunOptions dataCopierType = ExtractParams(args);
IDataCopier dataCopier = container.Resolve<IDataCopier(dataCopierType.ToString());
dataCopier.DetectChanges();
dataCopier.ParseData();
dataCopier.CopyData(); 
```

保持不变，但可以处理 ScheduledDataCopier 或 RandomDataCopier

# java - ProGuard：使用混淆 JAR 的问题

> ID：13518872
> 
> 赞同：1
> 
> 时间：2012-11-22T19:18:00.950
> 
> 标签：java, maven, maven-2, obfuscation, proguard

我有一个`myapp-logic`带有类的 JAR，其中一些是混淆的，一些是非混淆的。

我想`myapp-logic`在一个名为`myapp-web`. 当我将混淆版本添加`myapp-logic`到 的依赖项时`myapp-web`，我收到以下错误消息（当我运行时`mvn clean compile`）：

```
EntryPageController.java:[55,41] incompatible types
found   : java.lang.Object
required: ru.altruix.ccp.logic.api.simfacade.SimulationFacade 
```

出现错误的代码如下所示：

```
final SimulationFacadeFactory factory = this.injector.getInstance(SimulationFacadeFactory.class);
simulationFacade = factory.create(); // The error occurs here (line 55) 
```

`myapp-logic`当我用 Jad打开混淆的JAR 时，`SimulationFacadeFactory`界面没有被混淆（或者看起来它没有被混淆）：

![在此处输入图像描述](../Images/e1b20190b9b995537b5b3d6179082136.png)

原始代码：

```
package ru.altruix.ccp.logic.api.simfacade;

import ru.altruix.commons.api.conventions.Factory;

public interface SimulationFacadeFactory extends Factory<SimulationFacade> {
} 
```

Eclipse 没有显示该错误（它只出现在 Maven 中）。

我该怎么做才能修复错误（`myapp-web`参考 obfuscated 编译代码`myapp-logic`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:22:36.073

试试看是否有帮助：在您的 Proguard 规则中，尤其是保留签名可能会有所帮助。

```
<keepattribute name="*Annotation*" />
<keepattribute name="Signature" />
<keepattribute name="Exceptions" /> 
```

# python - python regex：从字符串中获取结束数字

> ID：13518874
> 
> 赞同：28
> 
> 时间：2012-11-22T19:18:08.207
> 
> 标签：python, regex

我对 python 和正则表达式很陌生（这里是正则表达式新手），我有以下简单的字符串：

```
s=r"""99-my-name-is-John-Smith-6376827-%^-1-2-767980716""" 
```

我想只提取上面字符串中的最后一个数字，即 767980716，我想知道如何使用 python 正则表达式来实现这一点。

我想做类似的事情：

```
re.compile(r"""-(.*?)""").search(str(s)).group(1) 
```

表示我想在 (.*?) 之间找到以“-”开头并以字符串结尾结束的东西 - 但这什么也不返回。

我想知道是否有人能指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-22T19:21:20.340

您可以使用[`re.match`](http://docs.python.org/3/library/re.html#re.match)仅查找字符：

```
>>> import re
>>> s=r"""99-my-name-is-John-Smith-6376827-%^-1-2-767980716"""
>>> re.match('.*?([0-9]+)$', s).group(1)
'767980716' 
```

或者，[`re.finditer`](http://docs.python.org/3/library/re.html#re.finditer)也可以：

```
>>> next(re.finditer(r'\d+$', s)).group(0)
'767980716' 
```

所有正则表达式组件的解释：

*   `.*?`是[一个非贪婪匹配](http://www.roseindia.net/java/example/java/util/GreedyAndNonGreedyMatching.shtml)，并且只消耗尽可能多的东西（贪婪匹配会消耗除最后一位之外的所有内容）。
*   `[0-9]`并且`\d`是捕获数字的两种不同方式。请注意，后者也[匹配其他书写方案中的数字](http://www.fileformat.info/info/unicode/category/Nd/list.htm)，例如 ୪ 或 ൨。
*   括号 ( `()`) 使表达式的内容成为一个组，可以使用[`group(1)`](http://docs.python.org/3/library/re.html#re.match.group)（或 2 表示第二组，0 表示整个匹配）检索该组。
*   `+`表示多个条目（最后至少有一个数字）。
*   `$`仅匹配输入的结尾。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-22T19:21:58.030

很好很简单`findall`：

```
import re

s=r"""99-my-name-is-John-Smith-6376827-%^-1-2-767980716"""

print re.findall('^.*-([0-9]+)$',s)

>>> ['767980716'] 
```

正则表达式解释：

```
^         # Match the start of the string
.*        # Followed by anthing
-         # Upto the last hyphen
([0-9]+)  # Capture the digits after the hyphen
$         # Upto the end of the string 
```

*或者更简单地匹配字符串末尾的数字* `'([0-9]+)$'`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-22T19:20:42.887

你`Regex`应该是`(\d+)$`。

*   `\d+`用于匹配数字（一个或多个）
*   `$`用于匹配字符串的末尾。

所以，你的代码应该是： -

```
>>> s = "99-my-name-is-John-Smith-6376827-%^-1-2-767980716"
>>> import re
>>> re.compile(r'(\d+)$').search(s).group(1)
'767980716' 
```

而且你不需要`str`在这里使用函数，因为`s`它已经是一个字符串。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T19:20:35.133

使用下面的正则表达式

```
\d+$ 
```

`$`描绘了字符串的结尾..

`\d`是一个数字

`+`匹配前面的字符 1 到多次

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-22T21:39:11.313

将正则表达式保存为需要更繁重的工作。

```
>>> def parse_last_digits(line): return line.split('-')[-1]
>>> s = parse_last_digits(r"99-my-name-is-John-Smith-6376827-%^-1-2-767980716")
>>> s
'767980716' 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-25T03:59:52.573

我一直在玩这些解决方案中的几个，但如果字符串末尾没有数字，很多似乎都失败了。以下代码应该可以工作。

```
import re

W = input("Enter a string:")
if re.match('.*?([0-9]+)$', W)== None:
    last_digits = "None"
else:
    last_digits = re.match('.*?([0-9]+)$', W).group(1)
print("Last digits of "+W+" are "+last_digits) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-22T19:20:58.140

尝试`\d+$`改用。匹配一个或多个数字字符，后跟字符串的结尾。

# actionscript-3 - SoundCloud POST Comment Not Authorized

> ID：13518875
> 
> 赞同：4
> 
> 时间：2012-11-22T19:18:08.780
> 
> 标签：actionscript-3, post, soundcloud, urlloader, urlrequest

**[UPDATE]** Problem fixed. Working code and method updated below!

So, I am trying to post a comment to a SoundCloud track using the SoundCloud api in AS3. The documentation can be found here:

[http://developers.soundcloud.com/docs/#comments](http://developers.soundcloud.com/docs/#comments)

And my code is as follows:

```
 var urlLoader:URLLoader = new URLLoader();
            var urlString:String = "https://api.soundcloud.com/tracks/" + soundModel.currentlyPlayingItem.id + "/comments.json" + "?comment[body]=" + commentString + "&comment[timestamp]=" + trackPositionComment;  
            var urlRequest:URLRequest = new URLRequest(urlString);

            urlRequest.method = URLRequestMethod.POST;

            var variables:URLVariables = new URLVariables();
            variables.oauth_token = soundModel.userToken; //here is the filler variable to make POST, not GET.
            urlRequest.data = variables;

            urlRequest.contentType = "application/x-www-form-urlencoded";

            var header2:URLRequestHeader=new URLRequestHeader("oauth_token",soundModel.userToken);
            var header3:URLRequestHeader=new URLRequestHeader("client_id", "sdjhb4jhbkjbe4gkjbh4random");
            urlRequest.requestHeaders.push(header2);
            urlRequest.requestHeaders.push(header3);

            urlLoader.addEventListener(HTTPStatusEvent.HTTP_RESPONSE_STATUS, commentPosted);
            urlLoader.load(urlRequest); 
```

Originally I was consistently getting a 401 - unauthorized error.

After playing around with the SoundCloud API console, I saw that there was a 'content-length' of 0, meaning no body. So all the authentication stuff had to be going in headers, not variables. However, with POST method in AS3 UrlLoader, it will automatically send as a GET if there is no body (variables) included. So for that reason I left an arbitrary variable value.

Also the two parameters, 'body' and 'timestamp' indeed have to be sent as 'comment[body]' and 'comment[timestamp]' even though this isn't quite made clear in the documentation. Also both of these parameters have to be included in the URL, and not as variables or headers.

Finally, to get a authorized return, you must provide both your 'client_id' and 'oauth_token' as headers.

It was this magic combination that did it for me. I hope this helps some other people, ready to rip their hair out like I was.

Thx, Theo M.

# powershell - Get ADFS Token in Powershell

> ID：13518877
> 
> 赞同：15
> 
> 时间：2012-11-22T19:18:22.837
> 
> 标签：powershell, adfs2.0, office365

We have an ADFS 2.0 Environment that is used to federate our Active Directory domain with Office 365\.

Recently we had an issue where the cluster stopped responding which in turn broke email/calendar access for all of our users. As we don't have any monitoring for ADFS currently I am trying to write a PowerShell script that will periodically attempt to authenticate to our ADFS cluster and get a valid token similar to the SSO test at testexchangeconnectivity.com works.

It appears that the token is actually issued by

> /adfs/services/trust/2005/usernamemixed

but whenever I try to run invoke-webrequest or new-Webservice proxy against this URI and provide local AD credentials I get a 400 Bad Request error.

**What do I have to do in order to properly request a token from this endpoint?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:42:53.870

这个脚本应该让你 [上路 http://gallery.technet.microsoft.com/scriptcenter/Invoke-ADFSSecurityTokenReq-09e9c90c](http://gallery.technet.microsoft.com/scriptcenter/Invoke-ADFSSecurityTokenReq-09e9c90c) 你需要.Net Framework 4.5

您还可以使用 Connect-MSOL cmdlet 模拟 ADFS 登录到 Office 365 以连接到 powershell 会话 - 如果您使用 ADFS 帐户，则会发生 ADFS 登录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-03T07:28:01.927

我正在开发一个使用 WS-Federation 和 WS-Trust 进行联合身份验证的产品。我相信您的案例是我们工作流程的一部分。

多年来，我针对我们基于 SOAP 的 API 开发了 PowerShell 自动化，并且在某个时候，我将这些知识整合到图库中提供的[WcfPS](https://www.powershellgallery.com/packages/WcfPS)模块中。

该模块的[代码](https://github.com/Sarafian/WcfPS)是开源的，尽管它在脚本中，但它在很大程度上依赖于 .net 框架类和来自`System.ServiceModel`和程序集的`System.IdentityModel`程序集。我提到这一点是因为这些程序集中的大多数 api 在 .NET 标准 2 中不可用，因此该模块很遗憾无法在非 Windows 操作系统中运行。[您还可以在我的文章WCFPS-PowerShell 模块](https://sarafian.github.io/sdl/knowledge-center/2016/06/07/wcfps.html)中阅读有关它的更多信息，以使用 SOAP 端点。

这是一个示例，您可以根据您的服务提供商要求和依赖方配置发布对称和不记名令牌。该代码需要对联合安全流程、设置和术语有基本的了解。

```
# Define the ADFS MEX uri 
$adfsMexUri="https://adfs.example.com/adfs/services/trust/mex"

#region Define authentication endpoints. One for windows and one with username/password
$windowsMixed13AuthenticationEndpoint="https://adfs.example.com/adfs/services/trust/13/windowsmixed"
$usernamePasswordMixed13AuthenticationEndpoint="https://adfs.example.com/adfs/services/trust/13/usernamemixed"
#endregion

#region Define service providers for which we want to issue a symmetric and a bearer token respectively
# Symmatric is for SOAP, WS-Trust
# Bearer is for Web, WS-Federation
$soapServiceProviderAppliesTo="https://myserviceprovider/Soap/"
$webServiceProviderAppliesTo="https://myserviceprovider/Web/"
#endregion

# Parse the MEX and locate the service endpoint
$issuerImporter=New-WcfWsdlImporter -Endpoint $adfsMexUri

#region Issue tokens with windows authentications
$issuerEndpoint=$issuerImporter | New-WcfServiceEndpoint -Endpoint $windowsMixed13AuthenticationEndpoint
$soapToken=New-SecurityToken -Endpoint $issuerEndpoint -AppliesTo $soapServiceProviderAppliesTo -Symmetric
$webToken=New-SecurityToken -Endpoint $issuerEndpoint -AppliesTo $webServiceProviderAppliesTo -Bearer  
#endregion

#region Issue tokens with username/password credentials
$credential=Get-Credential
$issuerEndpoint=$issuerImporter | New-WcfServiceEndpoint -Endpoint $usernamePasswordMixed13AuthenticationEndpoint
$soapToken=New-SecurityToken -Endpoint $issuerEndpoint -Credential $credential -AppliesTo $soapServiceProviderAppliesTo -Symmetric
$webToken=New-SecurityToken -Endpoint $issuerEndpoint -Credential $credential -AppliesTo $webServiceProviderAppliesTo -Bearer    
#endregion 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T22:59:24.817

本质上，您使用 WSTrustChannelFactory，创建一个通道，并向其传递一个 RequestSecurityToken。

Leandro 有一个简洁的[示例](http://leandrob.com/2012/04/requesting-a-token-from-adfs-2-0-using-ws-trust-with-username-and-password/)

如果您不使用 .NET 4.5，则需要安装 Windows Identity Foundation (WIF)。

# c# - 虚拟路径 XX 映射到另一个应用程序，这是不允许的。

> ID：13518880
> 
> 赞同：7
> 
> 时间：2012-11-22T19:18:33.197
> 
> 标签：c#, asp.net, iis

我已将一个网站复制到另一个文件夹并尝试使用 IIS 在 Visual Studio 中运行它，但由于某种原因，它在 web.config 文件的以下几行中给了我一个编译错误：

```
 <add tagPrefix="QuickBuck" tagName="RecentlyModified" src="/Controls/RecentlyModified.ascx" />
    <add tagPrefix="QuickBuck" tagName="Sitemap" src="/Controls/Sitemap.ascx" /> 
```

在它们下面还有另一条线不会出错，这让这更奇怪：

```
 <add tagPrefix="QuickBuck" tagName="Menu" src="/Controls/Menu.ascx" /> 
```

控制在那里，为什么会发生这种情况？确切的错误是这样的：

```
The virtual path '/Controls/RecentlyModified.ascx' maps to another application, which is not allowed.       

The virtual path '/Controls/Menu.ascx' maps to another application, which is not allowed. 
```

错误旁边实际上没有行号，所以我假设它来自 web.config。请帮助这让我发疯！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T19:23:53.657

我不知道发生了什么，但我能够通过将其放在`~`路径前面来使其工作。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T05:35:21.670

Ts 是因为您可能在解决方案的其他位置有两个 .aspx 文件副本。所以它也可能提到，所以尝试从解决方案中删除重复文件并尝试它（注意：可能是该文件未包含在项目中，但驻留在解决方案中，所以找到并删除它）

# java - 在 Android 上围绕现有 PHP 系统实施 AES 加密/解密

> ID：13518881
> 
> 赞同：3
> 
> 时间：2012-11-22T19:18:33.833
> 
> 标签：java, php, android, encryption, aes

我正在将 iOS 项目扩展到 Android。我现有的应用程序使用 AES 加密系统通过 PHP 与服务器通信。

以下是我在 PHP 端使用的函数：

**加密**

```
function cryptAESEncrypt($string,$key) {
    $key = md5($key);
    $iv = "1234567890123436"; //IV isn't needed if MCRYPT_MODE is ECB (What we are using)
    $data = $data = base64_encode($string);
    $algorythm = MCRYPT_RIJNDAEL_128;
    $mode = MCRYPT_MODE_ECB;

    $encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_128,$key,$data,MCRYPT_MODE_ECB,$iv);

    return base64_encode($encrypted);
} 
```

**解密**

```
function cryptAESDecrypt($string,$key) {
    $key = md5($key);
    $iv = "1234567890123436"; //IV isn't needed if MCRYPT_MODE is ECB (What we are using)
    $data = base64_decode($string);
    $algorythm = MCRYPT_RIJNDAEL_128;
    $mode = MCRYPT_MODE_ECB;

    $decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_128,$key,$data,MCRYPT_MODE_ECB,$iv);

    return base64_decode($decrypted);
} 
```

该过程的一般流程是：

*   md5 散列`$key`（无论如何将其减少到 16 个字符）
*   Base64 编码`$string`
*   在 ECB 模式下使用 128 位 AES/RIJNDAEL 加密 Base64（无 IV）
*   Base64 加密数据并将其作为字符串返回。

解密工作相同但相反。

现在我只是在玩样品，但似乎运气不佳。我已经`"test"`使用该函数加密了 PHP 中的字符串（`"test"`也是密钥 - MD5'ed to `098f6bcd4621d373cade4e832627b4f6`），我得到了`"ijzLe/2WgbaP+n3YScQSgQ=="`.

现在我在 Java 中尝试的方法不起作用，因为我得到了一个不正确的密钥长度错误，但我之前的代码片段更幸运。无论如何，这就是我所拥有的：

```
String key = "test";
String in = "ijzLe/2WgbaP+n3YScQSgQ==";

SecretKeySpec skeySpec = new SecretKeySpec(md5(key).getBytes(), "AES");

Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");
cipher.init(Cipher.DECRYPT_MODE, skeySpec);

byte[] encryptedByteArray = Base64.decode(in.getBytes(),0);
byte[] decryptedByteArray = cipher.doFinal(encryptedByteArray);
String decryptedData = new String(Base64.decode(decryptedByteArray, 0));

Log.v("NOTE","Data: "+decryptedData); 
```

就像我说的那样，那是行不通的。现在我的问题是，有没有人可以帮助我使我的 Java 代码与提供的 PHP 代码一起工作，因为我无法改变它（其他代码使用不同的 PHP 片段工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:22:52.130

感谢评论中的 Duncan，我发现问题出在我的 MD5 哈希函数上。

找到一个工作版本供参考：

```
public String md5(String s) {
    if (s != null)
    {
        try { // Create MD5 Hash
            MessageDigest digest = java.security.MessageDigest .getInstance("MD5");
            digest.update(s.getBytes());
            byte messageDigest[] = digest.digest();

            // Create Hex String
            StringBuffer hexString = new StringBuffer();
            for (int i = 0; i < messageDigest.length; i++) {
                String h = Integer.toHexString(0xFF & messageDigest[i]);
                while (h.length() < 2)
                    h = "0" + h;
                hexString.append(h);
            }
            return hexString.toString();

        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        }
        return "";
    }
    return "";
} 
```

# r - 如何使用每列的先前值填充缺失的信息？

> ID：13518882
> 
> 赞同：1
> 
> 时间：2012-11-22T19:18:33.240
> 
> 标签：r

> **可能重复：**
> [用最新的非 NA 值替换 NA](https://stackoverflow.com/questions/7735647/replacing-nas-with-latest-non-na-value)

如何使用每列的先前值填充缺失的信息？

```
Date.end   Date.beg   Pollster Serra.PSDB
2012-06-26 2012-06-25  Datafolha       31.0
2012-06-27       <NA>       <NA>         NA
2012-06-28       <NA>       <NA>         NA
2012-06-29       <NA>       <NA>         NA 
2012-06-30       <NA>       <NA>         NA
2012-07-01       <NA>       <NA>         NA
2012-07-02       <NA>       <NA>         NA
2012-07-03       <NA>       <NA>         NA
2012-07-04       <NA>       Ibope        22
2012-07-05       <NA>       <NA>         NA
2012-07-06       <NA>       <NA>         NA
2012-07-07       <NA>       <NA>         NA
2012-07-08       <NA>       <NA>         NA
2012-07-09       <NA>       <NA>         NA
2012-07-10       <NA>       <NA>         NA
2012-07-11       <NA>       <NA>         NA
2012-07-12 2012-07-09     Veritá       31.4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:43:03.867

我不确定这是否是最好的方法。可能有一些具有该功能的软件包。以下方法可能不是性能最好的方法，但它确实有效，并且对于中小型数据集应该没问题。我会谨慎地将它应用于非常大的数据集（超过一百万行或类似的东西）

```
fillNAByPreviousData <- function(column) {
    # At first we find out which columns contain NAs
    navals <- which(is.na(column))
    # and which columns are filled with data.
    filledvals <- which(! is.na(column))

    # If there would be no NAs following each other, navals-1 would give the
    # entries we need. In our case, however, we have to find the last column filled for
    # each value of NA. We may do this using the following sapply trick:
    fillup <- sapply(navals, function(x) max(filledvals[filledvals < x]))

    # And finally replace the NAs with our data.
    column[navals] <- column[fillup]
    column
} 
```

这是使用测试数据集的一些示例：

```
set.seed(123)
test <- 1:20
test[floor(runif(5,1, 20))] <- NA

> test
 [1]  1  2  3  4  5 NA  7 NA  9 10 11 12 13 14 NA 16 NA NA 19 20

> fillNAByPreviousData(test)
 [1]  1  2  3  4  5  5  7  7  9 10 11 12 13 14 14 16 16 16 19 20 
```

# python - 使用cookielib模拟浏览器在python中获取url

> ID：13518883
> 
> 赞同：2
> 
> 时间：2012-11-22T19:18:38.860
> 
> 标签：python, cookies, urllib2, cookielib

我正在使用 cookielib，有时在浏览器中打开一个 url 会通过浏览器发出许多其他请求来下载许多其他文件。我可以使用 cookie lib 或任何其他 python 库复制相同的行为吗？

例如：从页面[https://applicant.keybank.com/psp/hrsappl/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?Page=HRS_CE_HM_PRE&Action=A&SiteId=1获取所有必需的信息](https://applicant.keybank.com/psp/hrsappl/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?Page=HRS_CE_HM_PRE&Action=A&SiteId=1)

我必须从我的 python 脚本发出超过 1 个 GET 请求。通过分析打开页面时的网络请求，我得到了浏览器发出的所有请求的请求 url。

我正在查看是否有任何方法可以只发出 1 个请求，它会像浏览器一样自行获取所有相关请求。

我对 js 或 css 不是很感兴趣，但主要是 html。

我尝试使用以下代码，但无法下载整个页面

```
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))

response = opener.open('https://applicant.keybank.com/psp/hrsappl/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?Page=HRS_CE_HM_PRE&Action=A&SiteId=1')
html = response.read() 
```

但是当我按顺序获取 3 个其他 GET url 时，它能够在第三个 GET 响应中为我提供所需的 html。我通过检查浏览器的网络选项卡获得了这些网址

```
'https://applicant.keybank.com/psc/hrsappl/EMPLOYEE/EMPL/s/WEBLIB_PT_NAV.ISCRIPT1.FieldFormula.IScript_UniHeader_Frame?c=NNTCgkqGs001AcPaisqGbYpTu%2fbGx4jx&Page=HRS_CE_HM_PRE&Action=A&SiteId=1&PortalActualURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentProvider=HRMS&PortalRegistryName=EMPLOYEE&PortalServletURI=https%3a%2f%2fapplicant.keybank.com%2fpsp%2fhrsappl%2f&PortalURI=https%3a%2f%2fapplicant.keybank.com%2fpsc%2fhrsappl%2f&PortalHostNode=EMPL&PortalIsPagelet=true&NoCrumbs=yes')

'https://applicant.keybank.com/psc/hrsappl/EMPLOYEE/EMPL/s/WEBLIB_PTPPB.ISCRIPT2.FieldFormula.IScript_TemplatePageletBuilder?PTPPB_PAGELET_ID=KC_LNAV_APPLICANT&target=KCNV_KC_LNAV_APPLICANT_TMPL&Page=HRS_CE_HM_PRE&Action=A&SiteId=1&PortalActualURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentProvider=HRMS&PortalRegistryName=EMPLOYEE&PortalServletURI=https%3a%2f%2fapplicant.keybank.com%2fpsp%2fhrsappl%2f&PortalURI=https%3a%2f%2fapplicant.keybank.com%2fpsc%2fhrsappl%2f&PortalHostNode=EMPL&PortalIsPagelet=true&NoCrumbs=yes&PortalTargetFrame=TargetContent'

'https://hronline.keybank.com/psc/hrshrm/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?Page=HRS_CE_HM_PRE&Action=A&SiteId=1&PortalActualURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentProvider=HRMS&PortalCRefLabel=Careers&PortalRegistryName=EMPLOYEE&PortalServletURI=https%3a%2f%2fapplicant.keybank.com%2fpsp%2fhrsappl%2f&PortalURI=https%3a%2f%2fapplicant.keybank.com%2fpsc%2fhrsappl%2f&PortalHostNode=EMPL&NoCrumbs=yes&PortalKeyStruct=yes' 
```

以下是我正在制作的其他提取的完整代码

```
response = opener.open('https://applicant.keybank.com/psc/hrsappl/EMPLOYEE/EMPL/s/WEBLIB_PT_NAV.ISCRIPT1.FieldFormula.IScript_UniHeader_Frame?c=NNTCgkqGs001AcPaisqGbYpTu%2fbGx4jx&Page=HRS_CE_HM_PRE&Action=A&SiteId=1&PortalActualURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentProvider=HRMS&PortalRegistryName=EMPLOYEE&PortalServletURI=https%3a%2f%2fapplicant.keybank.com%2fpsp%2fhrsappl%2f&PortalURI=https%3a%2f%2fapplicant.keybank.com%2fpsc%2fhrsappl%2f&PortalHostNode=EMPL&PortalIsPagelet=true&NoCrumbs=yes')
response.read()

response = opener.open('https://applicant.keybank.com/psc/hrsappl/EMPLOYEE/EMPL/s/WEBLIB_PTPPB.ISCRIPT2.FieldFormula.IScript_TemplatePageletBuilder?PTPPB_PAGELET_ID=KC_LNAV_APPLICANT&target=KCNV_KC_LNAV_APPLICANT_TMPL&Page=HRS_CE_HM_PRE&Action=A&SiteId=1&PortalActualURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentProvider=HRMS&PortalRegistryName=EMPLOYEE&PortalServletURI=https%3a%2f%2fapplicant.keybank.com%2fpsp%2fhrsappl%2f&PortalURI=https%3a%2f%2fapplicant.keybank.com%2fpsc%2fhrsappl%2f&PortalHostNode=EMPL&PortalIsPagelet=true&NoCrumbs=yes&PortalTargetFrame=TargetContent')
response.read()

response = opener.open('https://hronline.keybank.com/psc/hrshrm/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?Page=HRS_CE_HM_PRE&Action=A&SiteId=1&PortalActualURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentURL=https%3a%2f%2fhronline.keybank.com%2fpsc%2fhrshrm%2fEMPLOYEE%2fHRMS%2fc%2fHRS_HRAM.HRS_CE.GBL%3fPage%3dHRS_CE_HM_PRE%26Action%3dA%26SiteId%3d1&PortalContentProvider=HRMS&PortalCRefLabel=Careers&PortalRegistryName=EMPLOYEE&PortalServletURI=https%3a%2f%2fapplicant.keybank.com%2fpsp%2fhrsappl%2f&PortalURI=https%3a%2f%2fapplicant.keybank.com%2fpsc%2fhrsappl%2f&PortalHostNode=EMPL&NoCrumbs=yes&PortalKeyStruct=yes')
required_html = response.read() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:57:39.943

[requests可以处理 cookie，如您](http://docs.python-requests.org)[在此处](http://docs.python-requests.org/en/latest/user/quickstart/#cookies)所见。这是一个很棒的库，比 urllib2 强大得多，而且看起来更简单。

```
>>> import requests
>>> r = requests.get('https://applicant.keybank.com/psp/hrsappl/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?Page=HRS_CE_HM_PRE&Action=A&SiteId=1')
>>> r.cookies 
```

编辑：这个答案并没有真正解决问题，我读得太快了。对于那个很抱歉。正如@JFSebastian 所建议的那样，我正在添加一个指向 python webkit 客户端[Ghost.py](http://jeanphix.me/Ghost.py/)的链接，它可以根据您的要求模拟浏览器。

# algorithm - 贪心算法优化

> ID：13518889
> 
> 赞同：2
> 
> 时间：2012-11-22T19:19:30.323
> 
> 标签：algorithm, dynamic-programming, greedy

我有以下问题：

*   假设有 n 个项目。
*   让 Fi(x) 等于如果您在项目 i 上花费 x 单位时间将获得的点数。
*   你有 T 个单位的时间来使用和处理你想要的任何项目。

目标是最大化您将获得的积分数量，并且 F 函数不递减。

F 函数的边际收益递减，换句话说，在一个特定项目上花费 x+1 单位时间所获得的总积分增加少于在该项目上花费 x 单位时间所获得的总积分增加。

我想出了以下 O(nlogn + Tlogn) 算法，但我应该找到一个在 O(n + Tlogn) 中运行的算法：

```
sum = 0
schedule[]
gain[] = sort(fi(1))

for sum < T
    getMax(gain) // assume that the max gain corresponds to project "P"
    schedule[P]++
    sum++
    gain.sortedInsert(Fp(schedule[P] + 1) - gain[P])
    gain[P].sortedDelete()

return schedule 
```

也就是说，对初始增益数组进行排序需要 O(nlogn) 并且需要 O(Tlogn) 才能运行循环。我对这个问题的思考比我愿意承认的要多，并且无法提出可以在 O(n + Tlogn) 中运行的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:31:32.923

对于第一种情况，使用堆，构建堆需要 O(n) 时间，每个 ExtractMin 和 DecreaseKey 函数调用需要 O(logN) 时间。

对于第二种情况，构造一个 nXT 表，其中第 i 列表示情况 T=i 的解决方案。第 i+1 列应仅取决于第 i 列和函数 F 上的值，因此可在 O(nT) 时间内计算。我没有彻底考虑所有案例，但这应该给你一个好的开始。

# mysql - 使用联接或顺序哪个更新更快？

> ID：13518890
> 
> 赞同：0
> 
> 时间：2012-11-22T19:19:51.093
> 
> 标签：mysql, query-optimization, mysql-5.0

这个问题是我[之前的**问题**](https://stackoverflow.com/questions/13487010/how-to-update-same-table-on-deletion-in-mysql)的顺序，要求在删除一行时更新同一张表。

**我可以使用存储过程**而不是触发器或嵌套查询 来编写两个解决方案。

两者都使用辅助函数[my_signal(msg)](https://stackoverflow.com/questions/13487010/how-to-update-same-table-on-deletion-in-mysql)。

从`Employee`表中删除员工的存储过程。

*   **拳头解决方案**：使用`UPDATE`表中的行，**无需连接操作**：

> ```
> CREATE PROCEDURE delete_employee(IN dssn varchar(64))
> BEGIN
>     DECLARE empDesignation varchar(128);
>     DECLARE empSsn         varchar(64);
>     DECLARE empMssn        varchar(64);
>      SELECT SSN, designation, MSSN  INTO empSsn, empDesignation, empMssn 
>      FROM Employee 
>      WHERE SSN = dssn;
> 
>    IF (empSsn IS NOT NULL) THEN
>     CASE       
>            WHEN empDesignation = 'OWNER' THEN 
>                CALL my_signal('Error: OWNER can not deleted!');
> 
>            WHEN empDesignation = 'WORKER' THEN 
>             DELETE FROM Employee WHERE SSN = empSsn;               
> 
>            WHEN empDesignation = 'BOSS' THEN 
>                BEGIN 
>                    UPDATE Employee
>                    SET MSSN = empMssn
>                    WHERE MSSN = empSsn;
> 
>                 DELETE FROM Employee WHERE SSN = empSsn;                   
> 
>                END;
>     END CASE;
>    ELSE 
>                CALL my_signal('Error: Not a valid row!');
>    END IF;
> END// 
> ```

*   **第二种解决方案：**正如我在上一个问题中建议的那样，使用`INNER JOIN`

> ```
> CREATE PROCEDURE delete_employee(IN dssn varchar(64))
> BEGIN
>     DECLARE empDesignation varchar(128);
>     DECLARE empSsn         varchar(64);
>     DECLARE empMssn        varchar(64);
>       SELECT SSN, designation, MSSN  INTO empSsn, empDesignation, empMssn 
>       FROM Employee 
>       WHERE SSN = dssn;
> 
>    IF (empSsn IS NOT NULL) THEN
>        IF (empDesignation = 'OWNER') THEN 
>         CALL my_signal('Error: OWNER can not deleted!');
>        END IF;
> 
>        UPDATE `Employee` A INNER JOIN `Employee` B ON A.SSN= B.MSSN
>        SET B.MSSN = A.MSSN WHERE A.SSN = empSsn;
> 
>        DELETE FROM `Employee` WHERE SSN = empSsn;
>    ELSE 
>        CALL my_signal('Error: Not a valid row!');
>    END IF;    
> END// 
> ```

[我在这里](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/c0005283.htm)读到，使用 join 对于 Efficient SELECT 是有效的。但是我的问题只包括一个表，我觉得我的解决方案（第一个）比第二个更有效，因为 join 会比较消耗内存。

`Employee table`如果足够大，请建议我哪个更好，更有效。**哪个更适合我？原因**

**编辑：** 我检查了只包含 7 行的小表，两种解决方案都需要相同的时间。

```
mysql> CALL delete_employee(4);
Query OK, 1 row affected (0.09 sec) 
```

我知道 SQL 函数的行为是不确定的，因为表启发式。哪个选择更好？如果您有一些想法，可以进一步优化查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:16:51.183

经过一段时间的思考，我几乎可以肯定它没有什么不同，第一个解决方案可能会稍微慢一些，但在一个不可测量的维度上。

第一个意图是，第一个解决方案更快，因为您首先通过 id 获取数据并仅在必要时更新。

但是 MySQL 在内部没有在`UPDATE .. JOIN`语句中做任何其他事情，只是在内部，因此可能也更有效。

您的第一个解决方案没有捕获默认情况 - 如果我既没有得到，又会发生`WORKER`什么`BOSS`？

此外，您的执行时间（0.09 秒）非常高，这无法用我目前对您的数据库的了解来解释。

你有没有设置任何索引？

**编辑：**

查看[您在此处发布的表结构](https://stackoverflow.com/questions/13487010/how-to-update-same-table-on-deletion-in-mysql)后， 我对结构本身提出了一些改进建议。

**1.**`int`存储时使用类型`integer values`。数据库可以更高效地处理整数方式

**2.**为什么要`SSN`自己生成？在添加新员工时，使用`auto_increment`on the`PRIMARY KEY`更容易处理并为您节省大量工作

```
ALTER TABLE `Employee`
    CHANGE `SSN` `SSN` int(11) NOT NULL AUTO_INCREMENT ,
    CHANGE `MSSN` `MSSN` int(11) DEFAULT NULL,
    ADD KEY `KEY_Employee_MSSN` ( `MSSN` ); 
```

**3.**您是否使用名称进行查找？如果是这样，它也需要是唯一的

```
ALTER TABLE `Employee`
    ADD UNIQUE KEY `UNI_KEY_Employee` ( `name` ); 
```

**4.**你们有固定的指定范围吗？enum 强制输入为定义的值之一

```
ALTER TABLE `Employee`
    CHANGE `designation` `designation` ENUM( 'BOSS', 'WORKER' ) NOT NULL DEFAULT 'WORKER',
    ADD KEY `KEY_Employee_designation` ( `designation` ); 
```

**最终结构**

```
mysql> EXPLAIN `Employee`;

+-------------+-----------------------+------+-----+---------+----------------+
| Field       | Type                  | Null | Key | Default | Extra          |
+-------------+-----------------------+------+-----+---------+----------------+
| SSN         | int(11)               | NO   | PRI | NULL    | auto_increment |
| name        | varchar(64)           | YES  | UNI | NULL    |                |
| designation | enum('BOSS','WORKER') | NO   | MUL | WORKER  |                |
| MSSN        | int(11)               | YES  | MUL | NULL    |                |
+-------------+-----------------------+------+-----+---------+----------------+
4 rows in set (0.00 sec) 
```

# netlogo - netlogo 计算从选定点到所有方向的距离

> ID：13518899
> 
> 赞同：1
> 
> 时间：2012-11-22T19:20:56.647
> 
> 标签：netlogo

我看过这里：[示例代码](http://backspaces.net/temp/NetLogoTutGIS.zip) [说明](http://backspaces.net/wiki/NetLogo_Bag_of_Tricks)

[带有矢量地图数据的 NetLogo 项目](https://docs.google.com/open?id=0BzICS8oAzXWQSkl6elBlcUQ1Nms)

我正在使用矢量地图，道路在哪里。然后我在道路所在的地方绘制链接。在起点所在的图像中，那是拉脱维亚的首都（里加）。左侧是文茨皮尔斯市，女巫距离里加约200公里。到顶部是拉脱维亚/爱沙尼亚边境，也大约 200 公里。到底部约100公里。

我想要的是计算我需要在哪里放置汽车充电站。普通的*绿色*汽车可以在充满电的情况下行驶 50 公里。所以。我知道到文茨皮尔斯大约有 200 公里。在那条路上我们需要 4 个充电站。

Idea No 1 是从起点到各个方向的充电站每隔 50 公里。（图片上的树符号）。此时充电站（树）我放置在随机位置：

```
to setup-stacijas
  set-default-shape boats "tree"
  create-boats num-boats [
    set speed 0 ; min-speed + random-float (max-speed - min-speed)
    let l one-of links
    set size 18
    set-next-stacija-link l [end1] of l
  ]
end 

to set-next-stacija-link [l n] ;; boat proc
  set cur-link l
  move-to n
  ifelse n = [end1] of l [set to-node [end2] of l] [set to-node [end1] of l]
  face to-node
end 
```

问题：

我如何计算到各个方向的距离 xx 公里？

![带有链接和随机充电站的矢量图](../Images/45ac61eb5de1b46a597f8fb97ecaa0b2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:26:31.193

代理（补丁或海龟）可以使用 DISTANCE 原语和 MOD 运算符来查找其他 50“英里”以外的代理。

我假设在我们的模拟中 1 个补丁 = 1 英里。
我假设“链接”连接到品种“节点”的海龟。
我假设 START 是一个包含“节点”的变量。

```
;; get all nodes that are multiples of 50 miles from start
let stations no-turtles
ask start [ set stations nodes with [ (floor distance myself) MOD 50 = 0 ] 
```

由于许多原因，这并不完美。

*   它假定所有链接的长度为 1 个单位或更短。
*   跨越或沿 50 英里的弧线的道路都将包括在内，因此它们都将有车站。
*   其他我没有想到的奇怪的东西。

其他一些迭代方法建议自己：

1.  在道路上设置“旅行者”，每 50 英里（左右）“放下”充电站。

    *   在十字路口，旅行者分成新的旅行者前往每个分支
    *   当旅行者遇到旅行者时，如果每个旅行者到其最后一个“车站”的总距离超过 50 英里，则创建一个车站。无论如何，两个旅行者都会死。
    *   当一个旅行者发现一个现有的车站时，它就死了。

    这样，所有的道路都将设置车站。

2.  用六角网格填充补丁，半径为 25 英里或几英里。让他们迁移。

    *   使不在道路上的车站向最近的道路移动。
    *   一个所有车站都找到了一条道路，使车站远离<50英里外的车站，沿着道路移动（通过远离地图中心来打破平局）。
    *   撞到边缘的车站将“脱落”（死亡）
    *   所以，车站会自己间隔开，额外的车站会从地图的边缘掉下来。

    这可能真的有效。

3.  站满，然后销毁，直到只有足够的空间

    *   在每英里的道路上创建一个车站。
    *   选一站
    *   ## 要求 49 英里半径内的所有其他站点死亡 - 标记它
    *   选择 50 英里外的车站之一。
    *   从 ## 开始重复，直到所有电台都被标记。

    那一个可能不是最佳的。

4.  在您的道路上模拟汽车——在它们死亡的地方创建车站。

    *   将汽车随机上路（从城市开始）。汽车在需要充电之前可以行驶大约 50 英里（死亡）
    *   没有车站
    *   模拟汽车在道路上随机行驶。
    *   当汽车撞到车站时，它会充满电
    *   如果汽车没电了，它就会死掉，并且该补丁/节点/位置的计数器会增加
    *   重复
    *   当补丁中的计数器超过某个值时，在此处放置一个站点。
    *   创建站点时，半径 50 英里内的所有补丁的计数器都会减少 - 最接近站点的值为 0，最远的值为 0，以渐变的方式。

    最终，站点将在需要的地方弹出。这个会很有趣。

~~詹姆斯

# eclipse - Eclipse 自定义插件中的触发器格式化程序

> ID：13518906
> 
> 赞同：1
> 
> 时间：2012-11-22T19:21:41.400
> 
> 标签：eclipse, eclipse-plugin, formatter

我为 Eclipse 编写了自己的文本编辑器插件。我现在正在开发自己的格式化程序。实际上，按照该链接[http://wiki.eclipse.org/FAQ_How_do_I_support_formatting_in_my_editor%3F](http://wiki.eclipse.org/FAQ_How_do_I_support_formatting_in_my_editor%3F)。我已经编写了我的策略，我已经在我的 SourceViewerConfiguration 中覆盖了 getContentFormatter..

当我运行我的插件并按 Ctrl+Shift+F - 并没有任何反应。

我认为我在这里错过了一步。我应该创建一个处理程序还是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:43:30.933

可能是您跳过了链接页面的最后一部分吗？

> 最后，您需要创建一个调用格式化程序的操作。文本基础结构没有定义通用的格式化操作，但很容易创建自己的格式化操作。该操作的 run 方法可以简单地在源查看器上调用以下命令来调用格式化程序：

```
sourceViewer.doOperation(ISourceViewer.FORMAT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:53:04.043

对我有什么帮助。我创建了一个具有以下执行者主体的处理程序：

```
//get the editorPart    
if (editorPart != null) {
                ITextOperationTarget target = (ITextOperationTarget) editorPart
                        .getAdapter(ITextOperationTarget.class);
                if (target instanceof ISourceViewer) {
                    ISourceViewer textViewer = (ISourceViewer) target;
                    ((ITextOperationTarget) textViewer)
                            .doOperation(ISourceViewer.FORMAT);
                }
            } 
```

然后只需创建菜单项并将它们绑定到处理程序。

# html - 背景位置右上角具有特定的图像坐标

> ID：13518910
> 
> 赞同：0
> 
> 时间：2012-11-22T19:22:02.400
> 
> 标签：html, css

我有一个下拉列表，其中父节点将在标题左侧有一个图标。此图标位于图标图像中，其中有十几个其他图标。我尝试使用的图标位于此图像中的像素坐标（0px，100px）处。

`ul.list > li`我想知道如何定位位于元素右上角 (0px, 100px) 的图像的一部分？

`ul.list > li { background: url('images/icons.png') top right 0px 100px no-repeat; } //does not work`

```
<ul class="list">
  <li>Title
    <ul>
      <li>Subs</li>
      </li>Subs</li>
    </ul>
  </li>
  <li>Fruits
    <ul>
      <li>Apples</li>
      <li>Bananas</li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:23:19.223

注意：您编辑了您的问题，只需删除`top right`

给出你的`li`高度和宽度并`top right`像这样定义

```
ul.list > li { background: url('images/icons.png') 0 100px no-repeat; } 
```

# android - 几个异步任务

> ID：13518913
> 
> 赞同：1
> 
> 时间：2012-11-22T19:22:34.740
> 
> 标签：android, android-asynctask

哪个是最好的方法，或者一次启动多个 AsyncTask 的正确方法？

目前执行如下形式：

```
new VoyAir().execute("http://"+objAcceso.IpPc+"/voya ir.php");
new Voy().execute("http://"+objAcceso.IpPc+"/voy.php");
new Vome().execute("http://"+objAcceso.IpPc+"/vome.php");
new gus().execute("http://"+objAcceso.IpPc+"/gus.php"); 
```

但我在 android 4.0.3 中编程，但它不能正常工作。你能举一个最好的例子吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:41:37.643

无论操作系统版本如何，我都使用这样的代码来做到这一点：

```
public class WebnetMobileTools {
    public static <P, T extends AsyncTask<P, ?, ?>> void executeAsyncTask(T task, P... params) {
       if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
           task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
       } else {
           task.execute(params);
       }
    }
} 
```

使用它，而不是

```
new VoyAir().execute("http://"+objAcceso.IpPc+"/voya ir.php"); 
```

你做

```
WebnetMobileTools.executeAsyncTask( new VoyAir(), 
                     "http://"+objAcceso.IpPc+"/voya ir.php"); 
```

这将始终并行运行所有已启动的异步任务，因为它曾经适用于引入更改的 Android 3.0。

# c# - 在 C# windows 窗体中，如何实现用于电子邮件地址的 MaskedTextBox

> ID：13518916
> 
> 赞同：2
> 
> 时间：2012-11-22T19:22:58.070
> 
> 标签：c#, regex, winforms, email-validation, maskedtextbox

```
 public void Form1_Load(Object sender, EventArgs e) 
    {
          // Other initialization code
         mtxtEmailID.Mask = ".........."; 
```

什么应该是掩码类型代替点

```
 mtxtEmailID.MaskInputRejected += new MaskInputRejectedEventHandler(mtxtEmailID_MaskInputRejected)
    }

   void mtxtEmailID_MaskInputRejected(object sender, MaskInputRejectedEventArgs e)
   {
      if(!Regex.IsMatch(txtEmailID.Text, "^[a-zA-Z][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$")) 
```

这里的正则表达式给了我错误，让我知道什么是正确的电子邮件验证。

```
 {
         toolTip1.ToolTipTitle = "Invalid Input";
         toolTip1.Show("Enter valid email address", mtxtEMailID);
         }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:29:33.307

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)找到有关 MaskedTextBox 的信息

* * *

如果您想验证电子邮件地址正则**表达式**不是正确的选择。有许多极端情况`regex`不会涵盖...

使用[邮件地址](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)

```
try 
{
   address = new MailAddress(address).Address;
   //email address is valid since the above line has not thrown an exception
} 
catch(FormatException) 
{
   //address is invalid
} 
```

* * *

但是如果你需要正则表达式，它应该是：

```
.+@.+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:28:33.487

我的项目中的这种方法使电子邮件验证变得简单，只考虑了电子邮件中重要的几个因素，如“@”和“。” . 我觉得不要让它变得复杂，因为每个人的电子邮件地址不是强制性的。

```
 private void txtEmailID_Validating(object sender, System.ComponentModel.CancelEventArgs e)
    {
        string errorMsg;
        if (!ValidEmailAddress(txtEmailID.Text, out errorMsg))
        {
            // Cancel the event and select the text to be corrected by the user.
            e.Cancel = true;
            txtEmailID.Select(0, txtEmailID.Text.Length);

            // Set the ErrorProvider error with the text to display.  
            this.errorProvider1.SetError(txtEmailID, errorMsg);
        }
    }

    public bool ValidEmailAddress(string txtEmailID, out string errorMsg)
    {
        // Confirm that the e-mail address string is not empty. 
        if (txtEmailID.Length == 0)
        {
            errorMsg = "e-mail address is required.";
            return false;
        }

        // Confirm that there is an "@" and a "." in the e-mail address, and in the correct order.
        if (txtEmailID.IndexOf("@") > -1)
        {
            if (txtEmailID.IndexOf(".", txtEmailID.IndexOf("@")) > txtEmailID.IndexOf("@"))
            {
                errorMsg = "";
                return true;
            }
        }

        errorMsg = "e-mail address must be valid e-mail address format.\n" +
           "For example 'someone@example.com' ";
        return false;
    }

    private void txtEmailID_Validated(object sender, EventArgs e)
    {
        // If all conditions have been met, clear the ErrorProvider of errors.
        errorProvider1.SetError(txtEmailID, "");
    } 
```

# android - 以编程方式部分隐藏布局？

> ID：13518919
> 
> 赞同：3
> 
> 时间：2012-11-22T19:23:15.060
> 
> 标签：android

我应该怎么做才能部分隐藏代码中的一些布局？我应该玩`setMargins`吗？

基本上，我想检测屏幕的大小，然后我希望元素 X 仅在其宽度的 10% 处可见？除了**如何使其部分隐藏或屏幕外，**我知道该怎么做？

查看这些图像以了解我想要实现的目标。图 1 - UI 元素位于中心。图 2 - 我在代码中设置它已移至屏幕外顶部，因此仅部分可见。

![](../Images/54a43959dd26ff3621cc82464165c7c3.png)

![](../Images/33e7ccd0fbdb1e8afb717c9fa8d2e1c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:27:02.447

我发现这里最好的解决方案是使用`Animation`( `TranslateAnimation`)，方法是在第一个屏幕加载时设置它并将其速度设置为 1 毫秒的最小值。现实中的转变对人眼来说是不明显的。

也**不要使用边距**，因为它们只是从一侧“推动”元素而不会使其偏移。如果您想要偏移布局中的任何子级，则当您增加边距值时，它们都会被挤压。

**注意：**如果您想在之前偏移的元素上使用该屏幕上的动画，**请考虑**偏移的负值。否则你的动画不会好看。为避免碰撞效应，请特别注意`fromXDelta`值。

# php - 使用 jQuery 滑动一个 div 打开和一个关闭

> ID：13518923
> 
> 赞同：1
> 
> 时间：2012-11-22T19:23:44.223
> 
> 标签：php, javascript, jquery, html

我正在尝试使用按钮将一个 div 关闭，同时将另一个打开。这是我的 div 代码：

```
<div class='toggle_parent'>
    <div class='toggleHolder'>
        <p>Content here</p>
        <span class='toggler'><button class="toggler" type="submit">Send Error Report</button></span>
    </div>
    <div class='toggled_content' style='display:none;'>
        <p>Hidden Content</p>
    </div>
</div>​ 
```

然后jQuery如下：

```
$(document).ready(function(){

        $('.toggler').click(function() {
            $('.toggleHolder').slideUp().css('display', 'none')
            $('.toggled_conent').slideDown().css('display', '')
      });

    });​ 
```

我已经尝试了很多，以至于我的大脑不再起作用，我知道答案将是“很容易我应该想通了”，但我被卡住了。当您按下切换器时，我希望显示切换的内容并且 toggleHolder 消失。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:30:44.547

通过 javascript 而不是 隐藏您的隐藏内容`style`，并摆脱`.css`调用：

```
$(document).ready(function(){

    $('.toggled_content').hide();

    $('.toggler').click(function() {
        $('.toggleHolder').slideUp();
        $('.toggled_content').slideDown();
    });

});​ 
```

此外，您的`.toggled_content`选择器中有错字。

[这是一个有效的 JSFiddle](http://jsfiddle.net/AmLUd/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:02:02.017

请在 div 和 jquery 中将 class name = "toggled_content" 更改为其他内容，这样看起来像

**jQuery**

```
<script type="text/javascript">
$(document).ready(function(){

        $('.toggler').click(function() {
            $('.toggleHolder').slideUp().css('display', 'none');
            $('.haveOther').slideDown();
      });

    });
</script> 
```

**HTML**

```
<div class='toggle_parent' style="background-color:#999;">
    <div class='toggleHolder'>
        <p>Content here</p>
        <span class='toggler'><button class="toggler" type="submit">Send Error Report</button></span>
    </div>
    <div class='haveOther' style='display:none;'>
        <p>Hidden Content</p>
    </div>
</div> 
```

这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:28:06.057

你试过这个吗？

```
$('.toggler').click(function() {
        $('.toggleHolder').slideUp().hide();
        $('.toggled_conent').slideDown().show();
  }); 
```

# .net - 如何设置测试 SAS 数据库的环境？

> ID：13518927
> 
> 赞同：3
> 
> 时间：2012-11-22T19:23:55.280
> 
> 标签：.net, nhibernate, sas

我需要测试从 .NET 应用程序调用 SAS 数据库，最好使用 NHibernate 作为 ORM。如何设置 SAS 的试用版以在我的机器上进行测试，甚至可能吗？在我看来，有很多组件要安装，我找不到任何试用版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:49:23.790

获得 SAS 试用版的唯一方法是直接联系 SAS。没有许可证是不能下载或安装的。SAS 确实提供了 30 天的试用版（并且由于软件在到期后 90 天“死亡”，你真的有四个月的时间来测试）。

如果您选择获取试用版，请务必讨论您的目标应用程序要求。从 .NET 打开 SAS 数据需要一个称为 IOM 服务器的组件，它是软件`SAS Enterprise BI Server`或`SAS Integration Technologies`软件的一部分。但是，如果您的应用程序只需要**读取**SAS 数据集，您可能会考虑其他解决方案。如果您想走那条路，请提出一个新问题。

[这是一个链接](http://support.sas.com/kb/=?ct=58043&s1=3&qt=&la=en&qm=3&rf=4)，其中包含有关使用 SAS 进行 .NET 编程的几个 SAS 注释。

# java - GWT - 文本区域 - getText() - 如何保存一些格式？

> ID：13518929
> 
> 赞同：0
> 
> 时间：2012-11-22T19:24:01.787
> 
> 标签：java, gwt2

我只是想知道......是否有一种最佳方法可以在 TextArea 中保持“换行”格式？我的意思是，例如：

用户界面类似于：

```
 ------------
|Hello world | line A (\\n)
|Hello world | line B (\\n)
|...         | line i (\\n)
 ------------

String t=ta.getText(); 
```

...所以 t 缺少所有 ta "new line(s)" ；结果 t 值为

> 你好世界你好世界...

所以我的问题是...

如何为 getText() 方法保留“新行”格式？或者也许有一些更优化的方法？

*我不太确定 GWT 的 TextArea 是否支持`\\n`行分隔符。但是有没有办法在用户按下“Enter”按钮时即时捕捉新线路？如果我按下“Enter”上的文本，则不会保留任何格式。我唯一得到的是一个直字符串，但我想以某种方式保留行分隔标记或其他东西来恢复文本，因为它最初在 TextArea 组件中*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:00:51.207

如果在 teh textarea 中输入的文本以 \n 结尾，那么您可以使用

```
 String[] lines = yourTextArea.getText().split("\\n");// split according to new line
     for(int i=0;i<lines.length;i++)
              {
                System.out.println("lines are"+lines[i].toString());// display using toString()
              } 
```

这是你想要的？？。如果您使用的是 java swing，这将有效。

# struts2 - 将变量添加到我的 struts 配置结果重定向

> ID：13518931
> 
> 赞同：0
> 
> 时间：2012-11-22T19:24:34.913
> 
> 标签：struts2, struts-config

我有一个页面，我正在“查看会话信息”（在这种情况下，会话是一个业务元素。将会话想象成培训课程）。此会话信息的一部分是文件列表。（会话文件的一个示例是所有参加会话的人的登录表。）单击文件列表末尾的链接将通过名为 `inativeateSe 的方法从会话中删除文件

在我的 struts 配置中`inactivateSessionMaterial`，我有以下结果

```
<result name="success">
    /secure/courses/sessions/view_session_info.jsp
</result> 
```

但这还不够。它真的需要`view_session_info.jsp?sessionId=1234`。如何将该变量（会话 ID）添加到此末尾？就像是

```
<result name="success">
    /secure/courses/sessions/view_session_info.jsp?sessionId=$sessionId
</result> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:35:54.350

只需`<param>`在您的操作中使用标签即可获得此操作中的所有结果

```
<action>
   <param name="sessionId">${sessionId}</param>
   <result>...</result>
</action> 
```

或针对具体的行动结果。

```
<action>
   <result>
      <param name="location">...</param>
      <param name="sessionId">${sessionId}</param>
   </result>
</action> 
```

# ftp - 将ftps导入aptana

> ID：13518932
> 
> 赞同：2
> 
> 时间：2012-11-22T19:24:35.123
> 
> 标签：ftp, aptana

有没有办法将 FTP 帐户列表（用 xls 制作）导入 Aptana 的连接管理器？大约有 1500 种不同的 ftps，恐怕我得手动重新输入：/

我将不胜感激！

# api - Google URL Shortener 的 API 能否为一个长 URL 提供多个短 URL？

> ID：13518933
> 
> 赞同：1
> 
> 时间：2012-11-22T19:24:34.497
> 
> 标签：api, url-shortener, google-url-shortener

Google URL Shortener 的 API 能否为一个长 URL 提供多个短 URL？

我发现如果我这样做：

```
curl https://www.googleapis.com/urlshortener/v1/url \
  -H 'Content-Type: application/json' \
  -d '{"longUrl": "http://www.google.com"}' 
```

它总是输出相同的短网址：

```
{
 "kind": "urlshortener#url",
 "id": "http://goo.gl/fbsS",
 "longUrl": "http://www.google.com/"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:47:06.980

1.  如果您使用 Google 帐户登录 goo.gl，则每次缩短长 URL 时都会生成一个唯一的短 URL。
2.  如果您未登录 goo.gl，则每次缩短长 URL 时都会在多个用户之间重复使用相同的短 URL。

[http://support.google.com/websearch/bin/answer.py?hl=en&answer=190768](http://support.google.com/websearch/bin/answer.py?hl=en&answer=190768)

# .net - .NET 3.5 和 4.0 之间的 HttpWebRequest.Timeout 属性行为变化？

> ID：13518934
> 
> 赞同：0
> 
> 时间：2012-11-22T19:24:35.077
> 
> 标签：.net, .net-4.0, httpwebrequest

.NET 3.5 和 4.0 之间的 HttpWebRequest.Timeout 属性行为是否发生了变化？该文档似乎暗示这样：

来自[.NET 3.5 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout%28v=vs.90%29.aspx)：

> 超时是使用 GetResponse 方法发出的后续同步请求等待响应和 GetRequestStream 方法等待流的毫秒数。如果在超时期限内未返回资源，则请求将引发 WebException，并将 Status 属性设置为 WebExceptionStatus.Timeout。

[.NET 4.0 文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout%28v=vs.100%29.aspx)在中间添加了这句话：

> Timeout 适用于整个请求和响应，而不是单独适用于 GetRequestStream 和 GetResponse 方法调用。

这似乎是一个相当大的变化。“整个请求和响应”可能意味着发送请求和接收响应所花费的全部时间。这似乎与前一句相矛盾，因为等待响应流准备好可能很快——基本上只是服务器检索/准备响应的时间——但是通过流接收*整个*响应可能需要很长时间.

有没有人比较过 3.5 和 4.0 之间的这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:16:16.037

如果您查看 .net 代码（您引用的 msdn 文档页面）上的代码示例，请求和响应是两个独立的操作，因此请求的超时操作被复制到响应中。因此，如果默认值为 100 毫秒，则请求为 100 毫秒，响应为 100 毫秒，而不是两者的经过时间均为 100。

请注意，如果您预计需要长时间运行的请求或响应，请考虑使用异步操作。

# c - 在 Unix Shell 中运行 Hello World（并行）

> ID：13518935
> 
> 赞同：2
> 
> 时间：2012-11-22T19:24:48.713
> 
> 标签：c, mpi

我正在尝试运行此代码：

```
#include <stdio.h>
#include <mpi.h>

int main (int argc, char *argv[])
{
int id, np;
char processor_name[MPI_MAX_PROCESSOR_NAME];
nt processor_name_len;

MPI_Init(&argc, &argv);

MPI_Comm_size(MPI_COMM_WORLD, &np);
MPI_Comm_rank(MPI_COMM_WORLD, &id);
MPI_Get_processor_name(processor_name, &processor_name_len);

printf("Hello world from process %03d out of %03d, processor name %s\n", 
id, np, processor_name);

MPI_Finalize();
return 0;
} 
```

编译适用于：

mpicc hello_parallel.c -o hello_parallel

但我不能用 ./hello_parallel 运行它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:29:01.170

如果你想执行一个 MPI 应用程序，你可能想用 mpirun 运行它：

```
mpirun -np 2 ./hello_parallel 
```

在这种情况下，2 是要运行的进程数。通常还有其他步骤来设置 MPI 集群，然后才能正常工作（`lamboot`对于 LAM MPI），但这些步骤取决于 MPI 实现。

# android - Soundpool 不同的流

> ID：13518938
> 
> 赞同：1
> 
> 时间：2012-11-22T19:25:07.683
> 
> 标签：android, soundpool

我有 soundpool 将从 sd 卡加载文件，我使用 mstreamID 来停止它，我在 OnLoadCompleteListener 中使用 mstreamID 以便可以加载文件。我使用 2 个按钮来播放 soundpool 不同的声音。但是，当我单击第一个按钮并播放 1 个声音时，我单击第二个按钮，它会停止第一个按钮的声音。

这是我的代码：

```
public class MainActivity extends Settings {
        SoundPool mSoundPool;
        int mSoundId;
        int mStreamId = 0;
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
    mSoundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
            mSoundPool
                    .setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {
                        public void onLoadComplete(SoundPool soundPool,
                                int sampleId, int status) {
                            mStreamId = soundPool.play(sampleId, 1, 1, 1, 0, 1f);
}
                });

    }
//OnClick
public void button1(View view) {
        if (mStreamId != 0) {
            mSoundPool.stop(mStreamId);
        }
// et1 is extended from Settings.java
        String path = getFullFilePath(getApplicationContext(), et1.getText()
                .toString());
        mSoundId = mSoundPool.load(path, 1);
    }
public void button2(View view) {
        if (mStreamId != 0) {
            mSoundPool.stop(mStreamId);
        }

        String path = getFullFilePath(getApplicationContext(), et2.getText()
                .toString());
        mSoundId = mSoundPool.load(path, 1);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:33:19.880

请阅读文档，您想说什么？

1.  如果您不卸载同一个文件，请不要多次加载它。
2.  使用 SoundPool 时在开始时加载所有声音。
3.  streamId 一直在增加，你永远不会得到相同的 streamId。

# asp.net - nancyfx 和 aspx

> ID：13518942
> 
> 赞同：0
> 
> 时间：2012-11-22T19:25:17.683
> 
> 标签：asp.net, nancy

将 NancyFX 与 asp.net 一起使用——在 nancy 方面没有问题，但我有一些旧代码最容易使用客户控件留在 aspx 中。所以我需要能够运行 .aspx 页面？我宁愿不把它放在不同的网站上。我可以通过免除路径或使用 aspx 表单引擎或其他方式在 nancyfx 项目中的 iis 中运行 .aspx 页面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:16:24.877

最简洁的答案是不。Nancy 不支持 WebFormsViewEngine，因为坦率地说，它带来的包袱与我们在创建 Nancy 时想要留下的包袱相同。

但是，您可以在现有的 ASP.NET Webforms/MVC 应用程序中运行 Nancy，如我们的 wiki [https://github.com/NancyFx/Nancy/wiki/Hosting-nancy-with-asp.net中所述](https://github.com/NancyFx/Nancy/wiki/Hosting-nancy-with-asp.net)

# rest - 地图 API 和 REST

> ID：13518945
> 
> 赞同：2
> 
> 时间：2012-11-22T19:25:43.817
> 
> 标签：rest, google-maps-api-3, bing-maps, here-api

我目前正在调查 API 与移动和 Web 应用程序的使用情况，最近我偶然发现了一种叫做 Representational State Transfer (REST) 的东西。

似乎 MSDN Bing API 很好地记录了这一点，但 Google Maps API 没有。

有谁知道这个接口是否仅由 Bing 使用，或者是否也可以使用 Google Maps API 来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:31:09.290

您可以在此链接中找到 Google Maps API 文档，但它仅描述了如何与 API 交互以使用 Maps 服务； [https://developers.google.com/maps/documentation/webservices/](https://developers.google.com/maps/documentation/webservices/)

# php - 调用 PHP 函数时如何防止显示错误

> ID：13518947
> 
> 赞同：1
> 
> 时间：2012-11-22T19:25:48.217
> 
> 标签：php, function, error-handling

我正在开发一个 WordPress 插件，它返回特定 Forrest 用户的关注者数量。

如果与 API 服务器通信时出现错误或任何其他问题，希望函数优雅地返回 0。

这是功能：

```
/**
 * Get Forrst followers.
 *
 * @param string $forrstID The username of the Forrst member
 * @return int. Number of Forrst Followers
 */
function ass_get_forrst($forrstID) {
    $json = wp_remote_get("http://forrst.com/api/v2/users/info?username=".$forrstID);

    if(is_wp_error($json))
        return false;

    $forrstData = json_decode($json['body'], true);

    return intval($forrstData['resp']['followers']);
} 
```

如果出现错误，我在函数中有一个块来返回 false 但是似乎必须跳过这一部分，因为有时我仍然会遇到“致命错误” IE 超出最大执行时间。

如果出现错误，是否有更好的方法可以重写此函数以返回“0”。也许是 Try/Catch 块？

我是否`if(is_wp_error($json)) return false;`在功能的错误部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:43:35.397

注册一个关闭函数：

```
function returnzero() {
        $error = error_get_last();
        if($error &&  ['type'] == E_ERROR){
            echo 0;
        }
    }
register_shutdown_function('returnzero'); 
```

请注意，您可能希望关闭此页面上的错误报告，使用类似：

```
error_reporting(E_ALL & ~ E_ERROR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:48:34.057

我不了解 wordpress 模型，但听起来您正在使用的两个函数之一正在引发异常。在这种情况下，只有 Try/Catch 块可以根据需要顺利返回 cero

正在`if(is_wp_error($json))`检查的（我猜）是针对一些以前由 wordpress 检测到的“已知”错误。

您使用“通用” try/catch 块运行：

```
function ass_get_forrst($forrstID) {
    try {
        $json = wp_remote_get("http://forrst.com/api/v2/users/info?username=".$forrstID);

        if(is_wp_error($json))
            return false;

        $forrstData = json_decode($json['body'], true);

        return intval($forrstData['resp']['followers']);
    } catch (Exception $e) {
            return false;      // as above

    }
} 
```

# javascript - 获取动态添加的 div 的 html

> ID：13518948
> 
> 赞同：1
> 
> 时间：2012-11-22T19:25:49.617
> 
> 标签：javascript, jquery, dom

我有一个页面，其中插件以随机时间间隔将子 div 添加到父 div。基本结构是：

```
<div id="parent">
<div class="child" someattr="abc">content1</div>
<div class="child" someattr="xyz">content2</div>
</div> 
```

我尝试了以下方法来检测元素的添加并且它有效

```
var c = document.getElementById('parent');
c.__appendChild = c.appendChild;
c.appendChild = function(){
     alert("Added");
     c.__appendChild.apply(c, arguments);     
} 
```

我从stackoverflow本身的答案中得到了上述信息。我还想做的是获取子 div 的内容。也就是它们的属性和里面的内容。什么是最简单/最好的方法。我不介意解决方案是 jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:28:29.280

不需要 jQuery：

```
document.getElementById('parent').innerHTML; 
```

当然，您也可以使用 jQuery，因为它可能会帮助您获得单个孩子：

```
$('#parent .child').each(
    function(){ 
         // In this context, 'this' points to the current child element in the itertion
    } 
```

# c# - 正则表达式：如何提取子字符串

> ID：13518952
> 
> 赞同：0
> 
> 时间：2012-11-22T19:25:54.993
> 
> 标签：c#, regex

我有两个字符串：`"word1|word2"`,`"word2|word1"`

如果它包含正则表达式，有什么方法可以`word2`从这些字符串中提取`word1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:38:16.410

我相信这样的事情会做到这一点：

```
 var input = new String[] { "word1|word2", "word2|word1" };
  var regexp = @"word1\|(?<GROUP>.*)|(?<GROUP>.*)\|word1";
  foreach (var word in input)
  {
    var match = Regex.Match(word, regexp, RegexOptions.IgnoreCase);
    Console.WriteLine(match.Groups["GROUP"].Value);
  } 
```

但是你的要求对我来说很不清楚，所以请随时详细说明:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:31:32.357

`split`将字符串`|`放入数组，然后`find`是您想要查找的任何字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:35:22.867

我会采用更灵活的方法，例如在“|”上拆分 并检查每个部分，如果找到匹配项，则保存另一个。

如果您确实需要使用正则表达式，则`(word1\|(.*)|(.*)\|word1)`可以将 word2 放入反向引用 1 中。

您可能需要调整该`(.*)`部分，具体取决于此字符串是单独存在还是嵌入在不应匹配的其他文本中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T01:22:25.763

或使用环顾四周...

```
 (?<=^word1\|).*|.*(?=\|word1$) 
```

这样你就可以使用

```
 match.Value 
```

并完全忽略组和捕获。

# actionscript-3 - 错误 #1009 闪退，想不通

> ID：13518955
> 
> 赞同：0
> 
> 时间：2012-11-22T19:26:20.150
> 
> 标签：actionscript-3, error-handling

我正忙于编写游戏，但我遇到了一些问题。

我以前可以让游戏完美运行，但突然间它停止运行了。

这是给出错误的脚本部分：

```
var colorTransform:ColorTransform;
        var player:MovieClip;
        var kaas:MovieClip;
        var ground:MovieClip;
        var speed:Number;
        var right:Boolean = false;
        var left:Boolean = false;
        var up:Boolean = false;
        var down:Boolean = false;
        var isWalking:Boolean = false;
        var isJumping:Boolean = false;
        var jumpSpeedLimit:int = 14;
        var jumpSpeed:Number = jumpSpeedLimit;
        // END

        public function main() 
        {
            speed = 5;
            kaas = new Kaas();
            kaas.y = 300;
            kaas.x = 300;
            addChild(kaas);
            ground = new Ground();
            ground.y = stage.stageHeight;
            ground.x = stage.stageWidth / 2;
            addChild(ground);
            player = new Player();
            player.x = stage.stageWidth / 2 - player.width;
            player.y = stage.stageHeight - 45;
            player.width = 50;
            player.height = 50;
            addChild(player);
            player.gotoAndStop("idle");
            //event listeners.
            stage.addEventListener(KeyboardEvent.KEY_UP, keyupCheck);
            stage.addEventListener(KeyboardEvent.KEY_DOWN, keydownCheck);
            player.addEventListener(Event.ENTER_FRAME, movePlayer);
        } 
```

我希望有人可以帮助我。

这是我收到的错误消息：

```
typeerror error #1009 cannot access a property or method of a null object reference.at main() 
```

在此先感谢，雷米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:36:56.497

该错误意味着您正在尝试访问属性，但该对象尚未实例化/不存在/当前为空。

我不能 100% 确定您在 main() 中使用的哪些类可能还没有准备好，但一个非常常见的类是舞台，它是显示对象已添加到舞台的空对象。在这种情况下，在 main() 的最后部分尝试这样的事情：

```
 //event listeners.
this.addEventListener(Event.ADDED_TO_STAGE,stageReady);
}
private function stageReady(event:Event):void{
            stage.addEventListener(KeyboardEvent.KEY_UP, keyupCheck);
            stage.addEventListener(KeyboardEvent.KEY_DOWN, keydownCheck);
            player.addEventListener(Event.ENTER_FRAME, movePlayer);
} 
```

# java - java字节到位的密码学

> ID：13518961
> 
> 赞同：0
> 
> 时间：2012-11-22T19:26:57.587
> 
> 标签：java

我写了服务器和客户端，我想发送一些将被加密的文件。所以我必须对位进行操作，而不是字节，因为我的加密方法是这样的：我以大约 8 位的部分发送我的文件，并向它们添加一些特定的 MAC。（其：风选和火柴方法）

在我的程序中，我将文件读入字节数组。但我需要字节到位才能将 MAC 地址添加到文件的每个部分并分部分发送。

我的问题是：是否有可能对 Java 中的位进行操作，或者如果没有，您将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:36:36.953

我真的不认为您的问题可以通过将字节转换为位来解决，但是您可以这样做。

```
static boolean[] byteToBits(byte b) {
  boolean[] bits = new boolean[8];
  for (int idx = 0; idx < 8; ++idx) 
    bits[idx] = ((b >> idx) & 1) == 1;
  return bits;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:28:45.350

为什么不只使用 SSL 或 TLS？或任何其他内置的安全协议。在这里重新发明轮子似乎很奇怪。

通常，专有加密系统的安全性不如众所周知的系统，因为它们没有受到公众监督。

没有人知道它的事实并没有使它更安全。“默默无闻的安全”从来都不是最佳实践。

# dotnetnuke - Asp.net / Dot Net Nuke 重写 url

> ID：13518962
> 
> 赞同：2
> 
> 时间：2012-11-22T19:26:58.073
> 
> 标签：dotnetnuke

我正在使用 dot net nuke，我需要重写我的网站网址，例如：从**products.aspx**到**products-computers/home.aspx**

我尝试使用此规则修改 siteurls.config

`<LookFor>.*/products.aspx</LookFor> <SendTo>~/products-computers/home.aspx</SendTo>` 它不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:19:58.847

If you are trying to change the URLs of your website, you will need to use a tool like URLMaster from Ifinity to get the ultimate flexibility

What you are doing with the siteurls.config appears to be is define that if someone requests /products.aspx that instead of loading a page called products.aspx, they load a page with a path (defined in DNN) as /products-computers/home.aspx

That means that you need to have a parent page called Products-Computers and a child page under there called Home.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T11:32:59.317

我曾经编辑过siteurls.config，它对我有用——不过你应该小心语法。我不喜欢重新 siteurls.config 是您最终在正确的页面上，但在浏览器的地址栏中地址错误。所以我更喜欢这个解决方案，我亲自调查和测试过，stackoverflow 社区成员也证实了这一点：

[将旧网站页面重定向到 dnn 门户上的单个页面](https://stackoverflow.com/questions/22706427/redirecting-old-site-pages-to-single-page-on-dnn-portal/22730414#22730414)

# macos - 需要 Chrome 远程桌面键盘快捷键

> ID：13518963
> 
> 赞同：33
> 
> 时间：2012-11-22T19:27:14.107
> 
> 标签：macos, keyboard-shortcuts, chrome-remote-desktop

我在 Windows 桌面上使用 Chrome 远程桌面来访问 Apple iMac。我不知道如何从我的 Windows 键盘调用 Apple Command 键功能。我认为 Windows 键会起作用，但它不会。有没有办法将 Windows 键映射到 Apple Command 键？我真的希望能够从键盘调用复制和粘贴，它们是 iMac 上的 Command-C 和 Command-V，所以我被卡住了，因为我没有“Command”键。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2019-07-23T08:54:56.753

我对这个问题的解决方案是利用最新版本的 Chrome 远程桌面（在撰写本文时为 77.0）提供的方便的“配置键映射”命令。该选项在边栏中可用，如下所示。

[![在此处输入图像描述](../Images/14753db6f02279d7d64fa66671743c39.png)](https://i.stack.imgur.com/dPmR3.png)

单击该链接将打开“配置键映射”对话框，您可以从中创建自己的映射。需要注意的重要一点是，Chrome 远程桌面支持的键码不是每个开发人员习惯使用的通常的“ASCII”码（我自己第一次犯了这个错误）；相反，这些代码应该取自“ [UI Events KeyboardEvent code Values](https://www.w3.org/TR/DOM-Level-3-Events-code/) ”W3C 标准。如果您仔细阅读该标准，您会发现有用的“字母数字部分中功能键的代码值列表”表，我也在下面复制了该表。

[![在此处输入图像描述](../Images/7e362ccaeeb6fcee22f2e01ca10d82aa.png)](https://i.stack.imgur.com/r3bYJ.png)

具体来说，假设您要将本地 (Windows) **Ctrl**键映射到远程 (Mac) **Cmd**键。从上表中我们看到（左）Ctrl 键的代码是“ControlLeft”，而 Cmd 键的代码是“MetaLeft”，所以从“配置键映射”对话框中：

1.  点击“新建映射”
2.  在“来自”字段中输入“ControlLeft”
3.  在“to”字段中输入“MetaLeft”
4.  如果需要，单击 [New Mapping] 输入更多键映射
5.  配置现在应该如下图所示。单击 [完成] 关闭对话窗口。

[![在此处输入图像描述](../Images/2301dc77cfb960a529a35e4368ea6b01.png)](https://i.stack.imgur.com/CWGfu.png)

此时您应该可以在本地 PC 上使用 Ctrl-C、Ctrl-V 等来触发远程 Mac 中相应的 Cmd-C、Cmd-V 等命令。该解决方案对我来说效果很好，它解决了如何在 Windows PC 上使用 Cmd 按钮而无需依赖外部应用程序或插件的长期问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-07-09T21:41:27.073

我在远程连接到 El Capitan Mac 的 Windows 10 机器上（是的，它是一个旧操作系统，但它是 2009 年的型号，无法再升级）。如果其他解决方案不适合您（它们不适合我），您可以尝试在键盘设置中添加 Mac 键盘快捷键。我将这台 mac 用作家庭服务器，并且*只*通过 Chrome 远程桌面使用它，所以我不担心直接使用计算机键盘时会弄乱键盘快捷键。

转到`Settings > Keyboard > Shortcuts > App Shortcuts`并将复制和粘贴的新快捷方式映射添加到`Ctrl`键。

[![在设置中重新映射复制和粘贴](../Images/0538c3de2fa123d91896029d9588675e.png)](https://i.stack.imgur.com/3Wqfb.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T21:23:28.293

在 Acer C7 上，右控制键映射到命令。事实上，搜索键也映射到命令，这更有帮助，但在更少的键盘上可用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-28T23:08:20.883

在 Windows 10 上

`Alt`+ `Window`+`C`

`Alt`+ `Window`+`V`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-05T22:14:09.143

好吧，看来我可以使用 Windows 键将 CMD 键直接发送到 Mac 机器。我努力了：

```
Windows + C: copy
Windows + V: paste
Windows + X: Cut
Windows + W: close window
Windows + Q: close application 
```

一切都很好！但是你不能使用这个：

```
Windows + Tab:  switch between applications, 
                it is already used by Windows for the same function. 
```

但是您仍然可以使用“按住鼠标中轮并向上移动鼠标”来查看所有打开的应用程序。这有点痛苦，但可以完成大多数工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-25T23:53:21.937

如果事情不起作用 - 尝试将 Meta **Right**映射到 ControlLeft

我有连接到地图册的 Windows 键盘。我不得不交换修饰键：Command <-> Control。

问题是当用 Chrome 远程桌面连接到 Linux 机器时，将 MetaLeft 重新映射到 ControlLeft 不起作用。原来这是因为 macbook 将左键重新映射到 Meta **Right**是什么原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-02T19:01:42.263

我已经确认，使用 chrome 远程桌面，当通过家庭 WiFi 远程连接到我的 mac-book pro 时，search+another_key 与 CMD+another_key 的作用相同。我还注意到，如果我想按顺序输入两次 search+another_key 按下，我必须在每个实例之后释放并重新按下搜索键

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-15T16:22:11.107

您可以映射键绑定，而不是在 Mac 上远程连接到 Windows PC（带有 Windows 键盘），我注意到 MetaRight 是 Windows 键（与 Meta 左键相反）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-31T07:22:15.517

如果您想在 mac 上使用 eg`WIN-key + C`表示`Cmd + C`，除了“配置键映射”（默认情况下`WIN-key`似乎`Cmd`在 mac 上意味着什么？），您需要转到右侧蓝色滑动条旁的全屏复选框（F11 没有不适合我）。

只有在那个全屏模式下，`WIN-key + something`才不会被Windows OS占用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-03T06:48:15.693

## 先全屏

为了使用所有快捷键，您需要从访问 Mac 的 Windows PC 进入全屏模式。此选项可在右侧的侧边菜单中找到。

[![在此处输入图像描述](../Images/d54924a193b8bd440a76ee8c97a04546.png)](https://i.stack.imgur.com/Lx5Ia.png)

然后使用Mac 上`⊞ Win`所有`⌘ Cmd`快捷键的键

# c# - C# 创建一个在特定值处更改标签的计时器

> ID：13518972
> 
> 赞同：1
> 
> 时间：2012-11-22T19:27:45.917
> 
> 标签：c#, time, timer, counter, elapsed

我是 C# 新手，我已经搜索过但没有找到解决问题的简单方法。我正在创建一个 Windows 窗体应用程序。单击开始按钮后，它会每毫秒计数一次，当它从数组中达到特定值时会更改标签。毫秒是如何计算的？

## -------------------------

AlekZanDer 代码：

```
 namespace timer_simple3
    {
        public partial class Form1 : Form
{
    long result = 0;
    public Form1()
    {
        InitializeComponent();
        this.timer1 = new System.Windows.Forms.Timer(this.components);
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.timer1.Tick += new System.EventHandler(this.timer1_Tick);
    }

    private void timer1_Tick(object sender, EventArgs e)
    {

         result = result + 1;
        label1.Text = Convert.ToString(result);

    }

    private void btstart_Click(object sender, EventArgs e)
    {
        timer1.Interval = 1; //you can also set this in the
        //properties tab
        timer1.Enabled = true;
        timer1.Start();
       // label1.Text = Convert.ToString(timer1);
    }

    private void btstop_Click(object sender, EventArgs e)
    {
        timer1.Stop();
    }
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:38:40.570

首先，您必须创建一个方法，告诉计时器每隔 [将所需的数字放在这里] 毫秒做什么。

```
private void randomTimer_Tick(object sender, EventArgs e)
{
    if (conditions)
    {
        ... //stuff to do
        ... //more stuff to do
        ... //even more stuff to do
    } 
} 
```

然后你设置定时器来调用这个方法：你可以通过使用定时器属性的事件选项卡来做到这一点，或者写：

```
this.randomTimer1.Tick += new System.EventHandler(this.randomTimer1_Tick); 
```

在 ProjectName.Designer.cs 文件中的`private void InitializeComponent(){}`方法行之后`this.randomTimer = new System.Windows.Forms.Timer(this.components);`。

最后，您启用计时器：

```
private void startButton (object sender, EventArgs e)
{
    randomTimer.Interval = timeInMilliseconds; //you can also set this in the
                                               //properties tab
    randomTimer.Enabled = true;
} 
```

当然，您也必须设置按钮来调用此方法。

如果您不知道“属性”窗口在哪里（我假设您使用的是 Visual C#）：它通常是位于窗口右侧的选项卡。为了在选项卡中显示某些内容，您必须在设计视图中选择要编辑的表单。如果编译器窗口的任何地方都没有这样的选项卡，请转到“查看”->“其他窗口”并选择“属性窗口”。

如果你找到的答案又长又复杂，那主要是因为他们用细节和例子来解释整个过程。如果您使用 Visual C# 的“拖放”选项，表单的声明代码将自动发生，然后由您编写方法的代码。还有其他一些不言自明的功能，使编程更愉快。使用它们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:27:55.237

> 毫秒是如何计算的？

您不能这样做，因为[Windows 窗体计时器组件](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)是单线程的，并且*精度限制为**55**毫秒*。如果您需要更准确的多线程计时器，请使用 System.Timers 命名空间中的 Timer 类。

此外，任何其他计时器都不会为您提供超过***16****毫秒*的精度（实际上是 15.625 毫秒，或 64Hz）。所以，你不能增加一些计数器来计算经过的毫秒数。

您的选项 - 而不是`long result`计数器使用当前时间和计时器开始时间之间的差异：

```
label1.Text = (DateTime.Now - startDateTime).Milliseconds.ToString(); 
```

# c# - SignalR 跨域和 IIS 7.5 到集线器的路径只能在服务器本地工作，如何在外部访问它？

> ID：13518973
> 
> 赞同：1
> 
> 时间：2012-11-22T19:27:46.403
> 
> 标签：c#, asp.net, iis, signalr

我在我的 C# WinForms 应用程序中自行托管 SignalR Hubs 服务器：

```
 string url = "http://localhost:8081/";

        m_signalrServer = new Microsoft.AspNet.SignalR.Hosting.Self.Server(url);

        // Map the default hub url (/signalr)
        m_signalrServer.MapHubs();

        // Start the SignalRserver
        m_signalrServer.Start(); 
```

我的 ASP.NET Web 应用程序充当 SignalR Hubs JavaScript 客户端：

```
<script type="text/javascript" src="/Scripts/jquery.signalR-1.0.0-alpha2.min.js"></script>
<script type="text/javascript" src="http://localhost:8081/signalr/hubs"></script>
<script type="text/javascript" language="javascript">
    $(document).ready(function() {
        $.connection.hub.url = 'http://localhost:8081/signalr'

        var myHub = $.connection.myHub;

        $.connection.hub.error(function () {
            console.log("Error!");
        });

        $.connection.hub.start()
        .done(function () {
            console.log("Connected!");
        })
        .fail(function () { console.log("Could not connect!"); });           
    });   
</script> 
```

当我使用服务器的网络浏览器时，此代码可以正常工作，因为它可以访问`http://localhost:8081/signalr/hubs`.

但是，当您通过 外部浏览站点时`http://serverip`，SignalR 会失败，因为 JQuery 脚本正在寻找一个`http://localhost:8081/signalr`（我相信它会在您的本地计算机上寻找）。

我改变了：

```
$.connection.hub.url = 'http://serverip:8081/signalr' 
```

我在 8081 上启用了网站浏览功能，可以通过`http://serverip:8081`. 但是，浏览到`http://serverip:8081/SignalR/Hubs`无法找到可从`http://localhost:8081/siganlr/hubs`.

此外，作为测试，我通过 App_Start 文件夹 -> RegisterHubs.cs 文件在 ASP.NET Web 应用程序中启用了 SignalR：`RouteTable.Routes.MapHubs();`

这样做可以让我浏览到`http://serverip:8081/signalr/hubs`or`http://serverip/signalr/hubs`并且我可以看到由 ASP.NET 网站生成的集线器。这不是我想要的，因为这不是我从 C# WinForms 应用程序托管的集线器。

再一次，浏览到`http://serverip:8081/signalr/hubs`没有找到 signalr 或存在于`http://localhost:8081/signalr/hubs`. 有谁知道我如何使这个文件可用于我的 ASP.NET Web 应用程序，以便我可以让 SignalR 在外部工作？

编辑：我忘了提到 8081 在服务器防火墙上是打开的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:51:37.850

将其更改为：

```
string url = "http://*:8081/";

m_signalrServer = new Microsoft.AspNet.SignalR.Hosting.Self.Server(url); 
```

# java - 来自 Java 计时器的回调/事件

> ID：13518979
> 
> 赞同：0
> 
> 时间：2012-11-22T19:28:03.890
> 
> 标签：java, events, timer, callback

我正在编写一个基本的文件监视器来检查目录中的新文件。我对Java没有太多经验，所以我不知道推荐的方法是什么，但这是我的想法：

1.  创建 Timer 和 TimerTask 子类以检查目录路径中的更改
2.  如果目录更改/添加了新文件，则从 TimerTask 子类调度事件/通知

我没有在 Java 中进行任何事件调度，但在 Google 上搜索了一下，发现很多结果都围绕着我目前不感兴趣的 swing/gui 组件。我也在查看 Observable 类，但问题是我需要从 TimerTask 子类通知我不能这样做，因为我不能扩展两个类。该项目应该足够简单，一个基本的回调（从 TimerTask 子类外部传递对函数的引用，以便在满足条件时从 TimerTask 内部调用）就可以了。

你有什么建议吗 ？什么是最简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:50:20.037

基本上，您可以编写一个包装类，将`Timer`and封装`TimerTask`到一个自我管理的容器中。

此类可以具有添加/删除侦听器并向相关方触发事件的方法。

例如;

```
 public class FileWatcher {

      private Timer timer;

      public FileWatcher(File path) {

           timer = new Timer("FileWather", true);
           // Schedule task to start immeditaly and re-fire every second...
           timer.scheduleAtFixedRate(new FileWatcherTask(), 0, 1000);

      }

      public void addFileWatcherListener(FileWatcherListener listener) {
           //...
      }

      public void removeFileWatcherListener(FileWatcherListener listener) {
           //...
      }

      protected void fireFileRemoved(File... files) {
           //...
      }

      protected void fireFileAdded(File... files) {
           //...
      }

      protected void fireFileChanged(File... files) {
           //...
      }

      public class FileWatcherTask extends TimerTask {

           @Override
           public void run() {
                // Look ma, no hands!
           }

      }

 } 
```

现在，显然，您需要定义`FileWatcherListener`自己，但这是一个基本概念。

现在，如果您使用的是 Java 7，则可以改用[Watch Service](http://docs.oracle.com/javase/tutorial/essential/io/notification.html) API

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:35:08.560

这应该解决目的

```
ActionListener al = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {

                // Check Your Directory for changes
            }
        };

Timer t = new Timer(1000,al); // Timer(TimeInMilliSeconds, ActionListener) 1000ms = 1s 
t.start(); 
```

# python - 为什么 QFileSystemWatcher 适用于目录而不适用于 Python 中的文件？

> ID：13518985
> 
> 赞同：1
> 
> 时间：2012-11-22T19:28:29.460
> 
> 标签：python, qt, pyqt, qfilesystemwatcher

[我从另一个 StackOverflow 答案](https://stackoverflow.com/questions/182197/how-do-i-watch-a-file-for-changes-using-python)中借用了这段代码：

```
from PyQt4 import QtCore

@QtCore.pyqtSlot(str)
def directory_changed(path):
    print('Directory Changed!!!')

@QtCore.pyqtSlot(str)
def file_changed(path):
    print('File Changed!!!')

fs_watcher = QtCore.QFileSystemWatcher(['/path/to/files_1', '/path/to/files_2', '/path/to/files_3'])

fs_watcher.connect(fs_watcher, QtCore.SIGNAL('directoryChanged(QString)'), directory_changed)
fs_watcher.connect(fs_watcher, QtCore.SIGNAL('fileChanged(QString)'), file_changed) 
```

问题是，`file_changed`无论如何，永远不会被调用。`directory_changed`例如，在添加文件时会可靠地调用，但更改文件内容不会导致调用 file_changed。

我调用了 的一些变体`QtCore.SIGNAL('fileChanged(QString)')`，例如 ，`QtCore.SIGNAL('fileChanged(const QString &)')`但无济于事。没有警告或错误——它根本不会触发该功能。

建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T21:02:19.447

很难确定出了什么问题，因为示例代码不完整，因此根本无法正常工作。

但是，假设您正在运行的*真实**代码*或多或少是健全/完整的，您的问题可能是由于未将目录本身添加到路径列表中引起的。

 *一个基本的脚本应该是这样的：

```
import sys
from PyQt4 import QtCore

def directory_changed(path):
    print('Directory Changed: %s' % path)

def file_changed(path):
    print('File Changed: %s' % path)

app = QtCore.QCoreApplication(sys.argv)

paths = [
    '/path/to',
    '/path/to/files_1',
    '/path/to/files_2',
    '/path/to/files_3',
    ]

fs_watcher = QtCore.QFileSystemWatcher(paths)
fs_watcher.directoryChanged.connect(directory_changed)
fs_watcher.fileChanged.connect(file_changed)

sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-04T14:12:40.797

```
import argparse
import configparser
import os
import sys

from PyQt5 import QtCore
from PyQt5.QtGui import QIcon
from PyQt5.QtWidgets import QApplication, QDesktopWidget, QMessageBox
from PyQt5.QtWidgets import QMainWindow

from ProgressBar_ui import Ui_Form

class ProgressBarWindow(QMainWindow, Ui_Form):
    def __init__(self):
        super().__init__()
        self.ui = Ui_Form()
        self.ui.setupUi(self)
        self.ui.progressBar.setMinimum(0)
        self.ui.progressBar.setMaximum(0)
        self.ui.progressBar.setValue(0)
        self.setWindowTitle("Progress Bar")
        self.MSversion = ""
        self.LOADING_LOG_PATH = ""
        mainIco = ("Icons\myIcon.ico")
        self.setWindowIcon(QIcon(mainIco))
        self.ui.label.setText("")
        self.ui.label.setWordWrap(True)

    def location_on_the_screen(self):
        ag = QDesktopWidget().availableGeometry()
        sg = QDesktopWidget().screenGeometry()

        widget = self.geometry()
        x = ag.width() - widget.width()
        y = 2 * ag.height() - sg.height() - widget.height()
        self.move(x, y)

    def file_changed(self, pathPassed):
        if os.path.exists(pathPassed):
            f = open(pathPassed, "r")
            for x in f:
                #print(x)
                label =x
                self.ui.label.setText(label)
                if x == "CloseLoading":
                    self.close()

def main():
    app = QApplication(sys.argv)
    w = ProgressBarWindow()
    w.setWindowFlags(w.windowFlags() & ~QtCore.Qt.WindowMaximizeButtonHint)

    parser = argparse.ArgumentParser()
    parser = argparse.ArgumentParser(description='ProgressBar Arguments')

    parser.add_argument('version', action="store", type=str)

    args = vars(parser.parse_args())

    if len(sys.argv) < 1:
        msg = QMessageBox()
        msg.setIcon(QMessageBox.Critical)
        errorMsg = "There are less than 2 command line arguments provided.\nLauncher can not be run."
        msg.setText(errorMsg)
        msg.setWindowTitle("Save paths..")
        msg.exec_()
        sys.exit()

    p= '/path/toFile/'
    paths = [ p ]

    fs_watcher = QtCore.QFileSystemWatcher(paths)
    #fs_watcher.directoryChanged.connect(w.directory_changed)
    fs_watcher.fileChanged.connect(w.file_changed)
    w.location_on_the_screen()
    w.show()
    app.exec_()

if __name__ == "__main__":
    sys.exit(main()) 
```*

# javascript - 将 HTML div 内容转换为 json 对象

> ID：13518988
> 
> 赞同：4
> 
> 时间：2012-11-22T19:28:36.620
> 
> 标签：javascript, jquery, html, json

我目前有以下 HTML ...

```
<div id="tabs-1" class="tabs-1 ui-tabs-panel ui-widget-content ui-corner-bottom ui-droppable" aria-labelledby="layoutName" role="tabpanel" aria-expanded="true" aria-hidden="false" style="z-index: auto;">

    <div id="mosami1" class="mosami ui-draggable ui-draggable-dragging inside-drop-zone highlight "  style="position: absolute; left: 38.4735%; top: 78.1949%; width: 19.3344%; z-index: 100;">
        <div class="ui-resizable-handle ui-resizable-n" style="z-index: auto; margin-left: 119.583px;"></div>
        <div class="ui-resizable-handle ui-resizable-s" style="z-index: auto; margin-left: 119.583px;"></div>
        <div class="ui-resizable-handle ui-resizable-ne" style="z-index: auto;"></div>
        <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: auto;"></div>
        <div class="ui-resizable-handle ui-resizable-nw" style="z-index: auto;"></div>
        <div class="ui-resizable-handle ui-resizable-sw" style="z-index: auto;"></div>
    </div>
</div> 
```

...我想变成 JSON 如下：

```
{
    "divID": {
        "options": {
            "id": "tabs-1",
            "class": "tabs-1 ui-tabs-panel ....",
            "z-index": "auto",
        }
        "div": {
            "options": {
                "id":"mosami1",
                "class": "mosami ui-draggable ui-draggable-dragging"
                "z-index": "100",
                "left": "38.47"
            },
        },
        "div1": {
            "class": "ui-resizable-handle ui-resizable-n"
            "z-index": "auto"
        }
    }
    //...
} 
```

我正在尝试使用 JQuery 来做到这一点，但是嵌套使事情变得复杂。

请帮忙？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:04:09.193

最简单的方法是使用一个递归函数，该函数接受一个 jQuery 节点并返回一个表示该节点数据的 javascript 对象。解析传入节点的选项，然后遍历调用递归函数的 jQuery 节点的子节点。像这样的东西：

```
var parse = function($el) {
  var result = {};

  result.options = {
    // parse $el for properties
  };

  $el.children().each(function(i, e) {
    result[$(this).prop('tagName') + i] = parse($(this));
  })

  return result;
} 
```

# vba - Outlook 脚本 VBA 不起作用

> ID：13518991
> 
> 赞同：0
> 
> 时间：2012-11-22T19:29:00.817
> 
> 标签：vba, outlook, outlook-2010

我已经复制了这个脚本，用于从邮件到文件夹的单独附件。

```
 Public Sub ProcessarAnexo(Email As MailItem)
       Dim diretorioAnex As String
       diretorioAnex = "C:\Separados"

       Dim MailID As String
       Dim mailx As Outlook.MailItem

       MailID = Email.EntryID
       Set Mail = Application.Session.GetItemFromID(MailID)

       For Each anexo In mailx.Attachments
           If Rigth(anexo.FileName, 3) = "xml" Then
           MsgBox (anexo.FileName)
           anexo.SaveAsFile directorioanex & "\" & anexo.FileName
       End If
       Next
       Set mailx = Nothing

        End Sub 
```

我尝试从“立即执行规则”执行脚本，但它没有在“Separados”文件夹中保存任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:38:44.247

该脚本有效，Outlook 2010 已阻止宏和代码，我已启用 OutLook 以运行 VBA 和宏并且一切运行良好。

谢谢

# objective-c - 使用 GestureRecognizers 操作 UIImage - 不是 UIImageView

> ID：13518992
> 
> 赞同：0
> 
> 时间：2012-11-22T19:29:04.553
> 
> 标签：objective-c, ios, uiimageview, uiimage

使用诸如平移、捏合和旋转等手势识别器，是否可以在 UIImageView 中操作 UIImage？

每当我尝试为 UIImage 定义手势识别器时，都会收到一条错误消息

> 没有可见的 UIImage 支持 'addGestureRecognizer:'

使用此代码：

```
UIRotationGestureRecognizer *rotateGesture = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotateImage:)];
[imageStrip addGestureRecognizer:rotateGesture]; 
```

无论如何在不转换 UIImageView 的情况下转换 UIImageView 内的 UIImage 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:41:12.637

您可以将手势识别器添加到任何类型，`UIView`并且在您的事件处理方法中，您可以重绘`UIImage`到新创建的`CGContextRef`. 这个上下文必须用`CGContextRotateCTM`,进行转换`CGContextScaleCTM`，`CGContextTranslateCTM`使用与您从手势识别器接收到的参数匹配的参数调用该上下文。这是艰难的道路。

或者，您可以使用图像创建一个划痕`UIImageView`，使用手势识别器对其进行转换，然后将其渲染为 a`CGContextRef`并从该上下文中获取转换后的图像。

当然可行，但并非微不足道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:33:03.607

`UIGestureRecognizer`只能附加到一个`UIView`-`UIImage`不是 的后代`UIView`。

这是因为一个`UIView`（或它的后代）可以接收触摸 -`UIImage`不能。

请参阅[手势识别器附加到视图](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html#//apple_ref/doc/uid/TP40009541-CH6-SW10)。

您可以在用户完成操作后重新计算/重新渲染`UIImage`基于参数。关于如何做到这一点：这实际上取决于您想要实现的目标。

# css - CSS选择一个id下的几种类型

> ID：13518996
> 
> 赞同：0
> 
> 时间：2012-11-22T19:29:19.367
> 
> 标签：css

我想选择 div 下的所有 th 和 td 。写类似：

```
#div_id th,td {
   ...
} 
```

不好，因为它选择了所有的 td-s。

我在[这里](http://reference.sitepoint.com/css/selectorgrouping)看到了解决方案来写

```
#div_id th,#div_id td { 
   ... 
} 
```

还有其他方法，所以我不应该重复#div_id？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:38:37.927

纯 CSS 明智，没有比您自己更好的答案了。但是你可以研究[SASS](http://sass-lang.com/)或类似的技术，这将允许这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:42:16.773

假设您的代码如下所示：

```
<div id="div_id">
    <table border="1">
        <tr>
            <th>
                Header 1
            </th>
            <th>
                Header 2
            </th>
        </tr>
        <tr>
            <td>
                row 1,
                <p>
                    cell 1
                </p>
            </td>
            <td>
                row 1,
                <p>
                    cell 2
                </p>
            </td>
        </tr>
        <tr>
            <td>
                row 2,
                <p>
                    cell 1
                </p>
            </td>
            <td>
                row 2, 
                <p>
                    cell 2
                </p>
            </td>
        </tr>
    </table>
</div>​​​​​​​​​​​​​​​​​​​​​​ 
```

您可以应用如下规则：

```
#div_id tr > * {
    border: 1px dotted #CCC;
}​ 
```

它选择 a 内的第一个元素（并且只有第一个元素）`tr`，它只能是 a`th`或`td`。

请注意，如果我将规则定义为：

```
#div_id tr * {
    border: 1px dotted #CCC;
}​ 
```

标签也将`p`有一个虚线边框。

但是，简单地键入额外的 8 个字符通常更有意义，因为它更容易理解您稍后做了什么。

# java - 当使用多个 TestNG 组时，Infinitest 不运行 @Before{Method,Class} 方法

> ID：13518997
> 
> 赞同：2
> 
> 时间：2012-11-22T19:29:20.200
> 
> 标签：java, unit-testing, tdd, testng, infinitest

我创建了一个示例 Eclipse 项目，该项目演示[Infinitest](https://github.com/infinitest/infinitest)跳过了使用 Before{Method,Class} 注释的设置方法，请参阅[https://github.com/jaeckel/InfinitestSampleProject](https://github.com/jaeckel/InfinitestSampleProject)。因此，当 Infinitest 执行它们时，我的测试失败，尽管它们在由 Eclipse 的 TestNG 插件执行时工作。[此测试用例](https://github.com/jaeckel/InfinitestSampleProject/blob/master/test/MultipleGroupsDontWorkTest.java)可以重现该行为。

这是一个错误吗？如果是，如何解决？我快速浏览了最无限的来源，但这并没有透露任何关于如何修复它的信息。我[为此创建了一个问题](https://github.com/infinitest/infinitest/issues/99)并与该项目的所有者进行了交谈。但到目前为止，没有人回到我身边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-04T19:59:33.597

Infinitest github repo 的所有者已回复您的[问题](https://github.com/infinitest/infinitest/issues/99)并解释说这不是产品中的错误。他写了：

> 如果排除了某个组，则不会运行带有该组注释的测试/设置/拆卸。如果您只想运行“自动化”测试。包括“自动化”组，但不排除“集成”组。

正如您在 github 问题中指出的那样，此建议确实解决了您的问题。结束这个问题可能是个好主意:)

# java - 有什么方法可以让依赖 Java7 和 JavaFX2 的程序“可移植”地运行？

> ID：13518998
> 
> 赞同：1
> 
> 时间：2012-11-22T19:29:28.337
> 
> 标签：java, javafx-2, portability

我正在用 Java7 和 JavaFX2 编写一个程序，但我需要向那些只能访问安装了 Java 6（没有 JavaFX）的机器的人展示它。

除了要求他们安装 Java7 和 JavaFX2 之外，我有什么办法可以找到解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:43:08.700

也许您可以通过将您的程序与 Java 7 和 JavaFX 2“捆绑”来创建一个自包含的应用程序包。这样您就不必担心用户机器上有什么或没有什么。[您可以在http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm)阅读有关自包含应用程序打包的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:48:35.187

理论上是的，但是您必须检查这是否符合 JavaFX 所有者 Sun/Oracle 的许可条件：

您可以使用[http://one-jar.sourceforge.net/](http://one-jar.sourceforge.net/)之类的工具， 它们将所有 java 打包到一个 jar 中。

您可以混淆您的应用程序并包含 JavaFX 的另一种可能性。但这也可能违反许可条件。

这两种解决方案可能比将 JavaFX 安装到（一个）客户端计算机上的工作量更大。

为 JavaSE6 尝试 JavaFX2

在页面上：[http](http://www.oracle.com/technetwork/java/javafx/downloads/index.html) ://www.oracle.com/technetwork/java/javafx/downloads/index.html 下载 下载适用于 Java SE 6 的 JavaFX 2.2.3 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:01:05.020

如果您使用的是 Eclipse JDT，您可以通过“启用项目特定设置”将项目“Java 编译器”配置为“编译器合规性级别”值 1.6。这应该会生成适合 Java 1.6 VM 的版本的字节码。我想但不确定，如果您使用 1.6 库版本中不存在的库元素，Eclipse 也会警告您；尽管您可以在有或没有警告的情况下小心谨慎。与之前的解决方案一样，如果许可协议允许，您可以将 JavaFX 打包到应用程序的 JAR 中。