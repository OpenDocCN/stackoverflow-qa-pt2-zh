# StackOverflow 问答 14371000-14371999

# php - 目标正确的表单输入值 Ajax 和 PHP

> ID：14371001
> 
> 赞同：1
> 
> 时间：2013-01-17T01:51:10.003
> 
> 标签：php, jquery, mysql, ajax

我有一个这样的脚本：

```
 $(function() {
     $(".btn_bookmark").click(function() {

   var name = $("input.???").val(); 
   base_url = '<?php echo base_url() ?>';

    $.ajax({
            url: base_url+"bookmark/bookmark_item/"+name,
            success: function() {
                    // do something on success
            }
         });
    return false;
    });
}); 
```

我的表单在 PHP 循环中，如下所示：

```
foreach($page->result() as $row){
   echo '<form name="" method="post" action="">';
   echo '<input type="hidden" name="'$row->name'" id="'.$row->id.'" size="30" value="'.$row->val.'" />';
   echo '<input type="submit" name="submit" class="btn_bookmark" id="submit_btn" value="Bookmark" />';
   echo '</form>';
} 
```

问题是每个表单隐藏的输入名称、id 和值都与 MySQL 数据库不同/动态。那么如何为输入选择正确的值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:59:15.693

```
$(".btn_bookmark").click(function() {
    var name = $(this).prev().val();
    base_url = '<?php echo base_url() ?>';

    $.ajax({
            url: base_url+"bookmark/bookmark_item/"+name,
            success: function() {
                    // do something on success
            }
         });
    return false;
    });
}); 
```

这样，您将获得前一个元素，即隐藏的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T02:01:34.607

而不是抢`var name = $("input.???").val();`

您可以像这样获取隐藏的输入：

```
$(this).parent().find('input[type=hidden]').val(); 
```

这将获取触发事件的元素的父级（在本例中为表单），然后获取该父级的隐藏输入子级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:58:58.760

实现与您的不同，但它应该可以工作。

尝试这个：

```
foreach($page->result() as $row){
   echo '<form name="" method="post" action="">';
   echo '<input type="hidden" name="'$row->name'" id="bkmark'.$row->id.'" size="30" value="'.$row->val.'" />';
   echo '<input type="submit" name="submit" class="btn_bookmark" id="submit_btn" value="Bookmark" onClick="bookmarkThis(\'#bkmark' . $row->id . '\');" />';
   echo '</form>';
} 
```

你的 js 将是：

```
$(function() {
     boomarkThis = function(someId) {
         var name = $(someId).val();
         base_url = '<?php echo base_url() ?>';

          $.ajax({
                url: base_url+"bookmark/bookmark_item/"+name,
                success: function() {
                        // do something on success
                }
             });
        return false;
        });
     } 
```

# java - 线程“主”java.lang.NumberFormatException 中的异常：Infinite 或 NaN

> ID：14371003
> 
> 赞同：2
> 
> 时间：2013-01-17T01:51:14.057
> 
> 标签：java, cosine-similarity

你能帮我解决这个问题吗.. 我正在尝试获取一个大十进制 (BigDecimal) 的日志，但我在下面收到一条异常错误消息：

```
Exception in thread "main" java.lang.NumberFormatException: Infinite or NaN 
```

这就是我所拥有的：

```
BigDecimal num = new BigDecimal(totalDocuments/hitDocuments);
BigDecimal idf = new BigDecimal(Math.log(num.doubleValue()));
BigDecimal termF = new BigDecimal(terms.get(j).getTermFreq());
BigDecimal tfIdf = new BigDecimal(termF.doubleValue() * idf.doubleValue());
terms.get(j).setTfIdf(tfIdf.doubleValue()); 
```

我在第二行得到了异常；我该如何解决这个问题？非常感谢你的好意。哦，顺便说一句，我正在尝试计算文本文件的“tf-idf”。

这是完整的代码

`File[] corpus = new File("files//").listFiles();` `int totalDocuments = (corpus.length) - 1; //-1 for the suspect document.`

```
 int hitDocuments = 1;
    for (int i = 0; i < corpus.length; i++) {
        ArrayList<String> corpusWords = getWords(corpus[i].getAbsolutePath());
        for (int j = 0; j < terms.size(); j++) {
            for (int k = 0; k < corpusWords.size(); k++) {
                if (terms.get(j).getTerm().equals(corpusWords.get(k))) {
                    hitDocuments++;
                }
            }
            //Update the tf-idf
            BigDecimal num = new BigDecimal(totalDocuments/hitDocuments);
            BigDecimal idf = new BigDecimal(Math.log(num.doubleValue()));
            BigDecimal termF = new BigDecimal(terms.get(j).getTermFreq());
            BigDecimal tfIdf = new BigDecimal(termF.doubleValue() * idf.doubleValue());
            terms.get(j).setTfIdf(tfIdf.doubleValue());
        }
    } 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:55:18.417

看起来 hitDocuments 或 totalDocuments（或两者）是 Double，而 hitDocuments 是 0.0。任何东西 / 0.0 = Double.Infinity（如果 totalDocuments 为 0.0，则为 NaN）。也不能取日志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:54:19.867

如果`num`是，`0`那么[Math.log()](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#log%28double%29)将返回`Infinite`

> 如果参数是正**零**或负**零**，则结果为负**无穷大**。

# c# - “MyProject.Repository.EF.AccountRepository' 没有实现接口成员”的真正含义是什么？

> ID：14371008
> 
> 赞同：0
> 
> 时间：2013-01-17T01:51:43.907
> 
> 标签：c#, .net, interface, visual-studio-2012

我正在尝试使用抽象类为大多数方法实现一个子接口，并使用这个抽象类的一个子类来实现缺少的方法。但是编译器不断抛出这些错误：“Foo.Bar'没有实现接口成员”。经过长时间盯着代码并在 StackOverflow 上阅读大量类似问题后，我一直看不到问题出在哪里。:S

**这些是我的代码中的一些“无数”错误，我并没有真正看到发生了什么。**

```
Error 2   
'MyProject.Repository.EF.AccountRepository' does not implement interface member 'MyProject.Entities.IRepository<MyProject.Entities.Account,int>.FindAll()'. 
'MyProject.Repository.EF.RepositoryBase<MyProject.Repository.EF.Account,int>.FindAll()' cannot implement 'MyProject.Entities.IRepository<MyProject.Entities.Account,int>.FindAll()' because it does not have the matching return type of 'System.Collections.Generic.IEnumerable<MyProject.Entities.Account>'.  
D:\Projects\WebProjects\MyProject\MyProject.Repository.EF\AccountRepository.cs  5   18  MyProject.Repository.EF 
```

//

**这是代码**

//

**// 仓库接口**

```
using System;
using System.Collections.Generic;
using System.Linq.Expressions;

namespace MyProject.Entities 
{
    public interface IRepository<T, EntityKey> {
        void Save();
        void Add(T entity);
        void Remove(T entity);

        T FindBy(EntityKey id);
        IEnumerable<T> FindBy(Expression<Func<T, bool>> query);
        IEnumerable<T> FindBy(Expression<Func<T, bool>> query, int index, int count);
        IEnumerable<T> FindAll();
    }
} 
```

//

**// “孩子”接口**

```
namespace MyProject.Entities 
{
    public interface IAccountRepository : IRepository<Account, int> {
    }
} 
```

//

**// 实现接口中几乎所有方法的抽象类，并声明其中两个抽象由子类实现**

```
using MyProject.Entities;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;

namespace MyProject.Repository.EF 
{
    public abstract class RepositoryBase<T, EntityKey> : IRepository<T, EntityKey> where T : class {

        private IQueryable<T> objectSet;
        protected MyProjectEntitiesContext Context;

        public abstract string GetEntitySetName();
        public abstract T FindBy(EntityKey id);

        public IQueryable<T> ObjectSet
        {
            get { return objectSet; }
            set { objectSet = value; }
        }

        public void Save()
        {
            this.Context.SaveChanges();
        }

        public void Add(T entity)
        {
            this.Context.AddObject(this.GetEntitySetName(), entity);
        }

        public void Remove(T entity)
        {
            this.Context.DeleteObject(entity);
        }

        public IEnumerable<T> FindAll()
        {
            return this.ObjectSet;
        }

        public IEnumerable<T> FindBy(Expression<Func<T, bool>> query)
        {
            return this.ObjectSet.Where(query);
        }

        public IEnumerable<T> FindBy(Expression<Func<T, bool>> query, int index, int count)
        {
            return this.FindBy(query).Skip(index).Take(count);
        }
    }
} 
```

//

**// 这里正在实现两个缺失的方法**

```
using System.Linq;
using MyProject.Entities;

namespace MyProject.Repository.EF {
    public class AccountRepository : RepositoryBase<Account, int>, IAccountRepository {
        public AccountRepository()
        {
            this.Context = MyProjectEntitiesFactory.GetDatacontext();
            this.ObjectSet = this.Context.Accounts;
        }

        public override string GetEntitySetName()
        {
            return this.Context.Accounts.EntitySet.Name;
        }

        public override Account FindBy(int id)
        {
            return this.ObjectSet.FirstOrDefault(i => i.Id == id);
        }
    }
} 
```

# android - 可以为 Android Canvas 上的 Drawable 禁用抗锯齿吗？

> ID：14371009
> 
> 赞同：2
> 
> 时间：2013-01-17T01:51:59.987
> 
> 标签：android, graphics

在我的程序中，我试图绘制像素艺术并且不希望出现抗锯齿。[我找到了为Bitmaps](http://www.41post.com/4241/programming/android-disabling-anti-aliasing-for-pixel-art)和[DrawableBitmaps](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html)禁用抗锯齿的方法，但不是为[Drawables](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)禁用抗锯齿的方法。是否无法禁用 Drawables 的抗锯齿功能？

我尝试了以下方法：

```
drawable.setDither(false);
drawable.setFilterBitmap(false); 
```

正如 vmironov 所建议的那样，我尝试像这样删除画布上的任何过滤：

```
DrawFilter filter = new PaintFlagsDrawFilter(Paint.ANTI_ALIAS_FLAG | Paint.FILTER_BITMAP_FLAG | Paint.DITHER_FLAG, 0);

Canvas canvas = surfaceHolder.lockCanvas();

canvas.setDrawFilter(filter); 
```

这在我的 Toshiba Thrive 上消除了抗锯齿效果，但在我的 Galaxy Nexus 上却没有。

[截图](http://imgur.com/a/xWgxM)

任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T07:48:07.547

[`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html)您可以使用[`PaintFlagsDrawFilter`](http://developer.android.com/reference/android/graphics/PaintFlagsDrawFilter.html)和禁用整个抗锯齿[`Canvas.setDrawFilter(DrawFilter filter)`](http://developer.android.com/reference/android/graphics/Canvas.html#setDrawFilter(android.graphics.DrawFilter))：

```
final DrawFilter filter = new PaintFlagsDrawFilter(Paint.ANTI_ALIAS_FLAG, 0);
final Canvas canvas = ...;

canvas.setDrawFilter(filter); 
```

**更新：**

我查看了屏幕截图，我可以肯定地说这不是抗锯齿问题。您看到的是结果，[`bilinear filtration`](http://en.wikipedia.org/wiki/Bilinear_interpolation)不幸的是，它不能为硬件加速视图禁用。作为一种解决方法，您可以只为您的视图使用软件光栅化：

```
view.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

# python - 如何理解 Peter Norvig 编写的 Python 函数式代码？

> ID：14371010
> 
> 赞同：8
> 
> 时间：2013-01-17T01:52:11.497
> 
> 标签：python, lambda

在阅读 Peter Norvig 的 Python IAQ 时，我遇到了以下代码片段：

```
def _if(test):
    return lambda alternative: \
               lambda result: \
                   [delay(result), delay(alternative)][not not test]()
def delay(f):
    if callable(f): return f
    else: return lambda: f
fact = lambda n: _if (n <= 1) (1) (lambda: n * fact(n-1))
fact(100) 
```

我在互联网上搜索了这个代码，这个代码出现在几个论坛上，但似乎评论它的人都明白它是如何工作的。

我对函数式编程概念很陌生。我知道如果 test 被评估为`True`,`delay(alternative)`将被选中。但实际上，如果 test 为真，则返回结果。这对我来说似乎违反直觉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T02:03:15.387

让我们来看看：

*   `_if(True)`被调用，并立即返回一个带有`alternative`参数的 lambda
*   返回的 lambda 用`alternative`set to调用`1`并返回`result`lambda
*   lambda被`result`调用并`result`设置为`lambda: n * fact(n-1)`
*   `not not True`计算结果为 1（此示例来自 python 2.4 时代！），它索引第二个列表项，即`delay(alternative)`
*   `alternative`被设置为`1`较早
*   `delay(1)`被调用，它返回`lambda: 1`
*   `lambda: 1`被调用，它返回`1`.

TL/DR：`1`是`alternative`.

命名函数版本：

```
def _if(test):
    def then_closure(expr_if_true):
        def else_closure(expr_if_false):
            if test:
                delayed = delay(expr_if_true)
            else:
                delayed = delay(expr_if_false)
            return delayed()
        return else_closure
    return then_closure 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:12:03.647

反过来走过去。

```
fact = lambda n: _if (n <= 1) (1) (lambda: n * fact(n-1))
fact(100) 
```

第一个函数简化为 [ _if( 100 <= 1) ] 并在两个函数 [ (1) ] 和 [ (lambda : n * fact(n-1)) ] 之间进行选择。如前所述，True 函数调用第二个函数，False 调用第一个函数。因此调用第二个函数并将 lambda 评估为：

```
lambda: 100 * fact(99) 
```

请注意，延迟函数有效对于这种情况没有任何作用。整个过程从 fact(99) 重新开始：

```
fact(99) =  lambda n: _if (99 <= 1) (1) (lambda: 99 * fact(98)) 
```

_if 函数调用再次为 True，它触发第二个函数调用，然后调用另一个 fact(98)，依此类推。

堆栈慢慢建立起来：

```
100 * fact(99) 
100 * 99 * fact(98)
100 * 99 * 98 * fact(97) 
```

特例是事实（1）：

```
fact(1) = lambda n: _if (1 <= 1) (1) (lambda: 1 * fact(0)) 
```

因为 _if 现在是 False ，所以第一个函数被传递给 delay ，延迟将其转换为函数并调用它，返回 1 并允许堆栈解析。发生乘法并给出结果（100！）。

# javascript - 如何处理生产中不常见的（看似）随机 JavaScript 错误？

> ID：14371012
> 
> 赞同：4
> 
> 时间：2013-01-17T01:52:20.400
> 
> 标签：javascript, debugging, production-environment

我要坦白承认，出于纯粹的无知，我一直对我的网站视而不见，直到最近我用[Elmah](http://code.google.com/p/elmah/)（ASP.NET 的错误记录工具）和服务器上的控制器部署了一个站点以发送所有未捕获的 JavaScript 异常。至少可以说，这是一次令人大开眼界的经历。

我的一个网站每天有大约 150-200 名访问者。大约每天一次，我得到一个类似于这个的 Elmah JavaScript 堆栈跟踪：

```
CCS.Exceptions.JavaScriptException: Unspecified error.: at document path
    'http://www.*******.com/*****'. at anonymous('Unspecified error.',
    'http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.min.js', '5')
    at anonymous() 
```

一般来说，我对 JavaScript 和 Web 开发比较陌生，所以我很感激一些建议：

*   我应该如何着手解决此类问题的根本原因？对于调试生产中的问题（特别是 JavaScript）有什么建议吗？

*   你会在重要性等级上把它排在哪里？我意识到如果不知道我盘子里的一切，这个问题几乎是不可能回答的。但我希望的是优先考虑这类事情的建议。我的头发着火了吗？或者，“嗯，这真的很常见，考虑到现在所有的浏览器和操作系统，这种事情肯定会发生。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:58:11.723

这些异常中的每一个都是一个没有按设计工作的网页的可能性很大。为了理解该优先级，您需要了解以下内容：

1.  有多少百分比的页面浏览量受到影响？
2.  具体有哪些异常，会造成什么麻烦？
3.  麻烦对您的业务有多重要。
4.  识别和修复这些需要多长时间？与您的其他项目相比，它的商业重要性如何？

一般来说，如果没有进一步的研究，您将不会知道任何这些问题的答案，因此您要么必须决定所有未完全理解的异常都是一件坏事，至少应该被理解。

或者，您必须决定启动一个调查项目以获取与这些问题相关的更多信息，然后决定是否修复它。

或者，您必须确定您只是没有听到足够多的关于您的网站问题的报告以保证任何进一步的调查（我个人不喜欢这个选项，因为您猜测这并不重要）。

在不了解您的业务的详细信息的情况下，我的建议是预算并计划一个调查项目，以了解这些错误的来源并了解它们对网站可用性的影响。掌握一些数据做出决定比猜测要好得多。

* * *

至于调试，最终需要找出是哪一行代码触发了异常。您可能还想记录导致错误的浏览器配置（以防与浏览器版本相关的问题）。您可以首先了解堆栈跟踪报告中的每条信息的含义以及它告诉您的内容，然后了解是否可以更详细地跟踪 Elmah 系统中的异常。如果没有，您可以大致确定错误的来源，您可以实现自己的异常日志记录，该日志记录可能能够捕获其他信息。

您还可以浏览站点上的任何故障单报告，因为可能存在与这些异常相关的站点问题的一些内部或外部报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:03:04.433

JavaScript 错误可能很难查明真相。你能做的最好的事情是确保你的 JavaScript 写得很干净，并将所有东西都放在命名空间中，以保持你的窗口对象尽可能干净，并避免变量提升，这是 JavaScript 库变得不规则时的常见问题。以下是我全面使用的首选命名空间模式 -

```
/* Namespace pattern */
var myAppNamespace = myAppNamespace || {};
(function(ns) {
    ns.doSomething = function() {
        // enter code here
    };
}(myAppNamespace));

/* Usage */
myAppNamespace.doSomething(); 
```

# c# - 正则表达式——文本、文本、数字

> ID：14371015
> 
> 赞同：0
> 
> 时间：2013-01-17T01:52:41.837
> 
> 标签：c#, regex, expression

您如何表达字符串与以下内容匹配的正则表达式。

```
text, text, number 
```

笔记：

text = 可以是任意数量的单词或空格。

number = 大多数是 4 位数字。

逗号 (,) 也必须匹配。

例如，以下字符串是有效的：

```
'Arnold Zend, Red House, 2551' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:11:36.667

正则表达式模式将是（括号是捕获组，以防您要访问各个项目：

```
([a-zA-Z\s]{3,}), ([a-zA-Z\s]*{3,}), ([0-9]{4}) 
```

它匹配 2 个名称和一个用逗号分隔的 4 位数字，名称长度至少为 3 个字符。如果您愿意，您可以更改名称字符的最小值。这是检查字符串是否与此模式匹配的方法：

```
// 'Regex' is in the System.Text.RegularExpressions namespace.

Regex MyPattern = new Regex(@"([a-zA-Z\s]*), ([a-zA-Z\s]*), ([0-9]{4})");

if (MyPattern.IsMatch("Arnold Zend, Red House, 2551")) {
    Console.WriteLine("String matched.");
} 
```

我已经用[RegexTester](http://www.regextester.com/ "正则表达式测试器")测试了表达式，它工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T02:40:22.207

我会使用正则表达式：

`(?<Field1>[\w\s]+)\s*,\s*(?<Field2>[\w\s]+)\s*,\s*(?<Number>\d{4})`

`\w`= 所有字母（大写和小写）和下划线。`+`表示**一个或多个**。

`\s`= 空白字符。`*`表示**零个或多个**。

`\d`= 数字 0 到 9。`{4}`表示它必须是**4**。

`(?<Name>)`= 捕获要匹配的组名和模式。

您可以将其与命名空间`Regex`中的对象一起使用`System.Text.RegularExpressions`，如下所示：

```
 static readonly Regex lineRegex = new Regex(@"(?<Field1>[\w\s]+)\s*,\s*(?<Field2>[\w\s]+)\s*,\s*(?<Number>\d{4})");

  // You should define your own class which has these fields and out
  // that as a single object instead of these three separate fields.

  public static bool TryParse(string line, out string field1,
                                           out string field2, 
                                           out int number)
  {
    field1 = null;
    field2 = null;
    number = 0;

    var match = lineRegex.Match(line);

    // Does not match the pattern, cannot parse.
    if (!match.Success) return false;

    field1 = match.Groups["Field1"].Value;
    field2 = match.Groups["Field2"].Value;

    // Try to parse the integer value.
    if (!int.TryParse(match.Groups["Number"].Value, out number))
      return false;

    return true;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:03:34.850

要与 Unicode 兼容：

```
^[\pL\s]+,[\pL\s]+,\pN+$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T02:26:31.357

尝试这个 -

```
[\w ]+, [\w ]+, \d{4} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T02:28:57.530

([a-zA-Z\s]+), ([a-zA-Z\s]+), ([0-9]{4})

# java - Libgdx在android上调整窗口大小以填满屏幕

> ID：14371017
> 
> 赞同：0
> 
> 时间：2013-01-17T01:52:58.840
> 
> 标签：java, android, libgdx

我正在尝试填充 Libgdx 附带的调整大小功能以适应所有 android 屏幕。

到目前为止我看到的最好的解决方案是这个教程：[http](http://www.java-gaming.org/index.php?topic=25685.0) ://www.java-gaming.org/index.php?topic=25685.0但是当我在我的 Galaxy S3 上运行它时，按钮真的很小而且整体游戏很小，而在桌面版本上它很大，并且是我想要的方式。我现在的调整大小代码是：

```
@Override
public void resize(int width, int height) {
    float aspectRatio = (float)width/(float)height;
    float scale = 2f;
    Vector2 crop = new Vector2(0f, 0f); 
    if(aspectRatio > ASPECT_RATIO)
    {
        scale = (float)height/(float)VIRTUAL_HEIGHT;
        crop.x = (width - VIRTUAL_WIDTH*scale)/2f;
    }
    else if(aspectRatio < ASPECT_RATIO)
    {
        scale = (float)width/(float)VIRTUAL_WIDTH;
        crop.y = (height - VIRTUAL_HEIGHT*scale)/2f;
    }
    else
    {
        scale = (float)width/(float)VIRTUAL_WIDTH;
    }

    float w = (float)VIRTUAL_WIDTH*scale;
    float h = (float)VIRTUAL_HEIGHT*scale;
    viewport = new Rectangle(crop.x, crop.y, w, h);
} 
```

我的渲染代码是：

```
@Override
public void render() {
    // update camera
    camera.update();

    // set viewport
    Gdx.gl.glViewport((int) viewport.x, (int) viewport.y,
                      (int) viewport.width, (int) viewport.height);

    // clear previous frame
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    ScreenManager.updateScreen();

    sb.begin();
    ScreenManager.renderScreen(sb);
    sb.end();
} 
```

我的变量是：

```
private static final int VIRTUAL_WIDTH = 600;
private static final int VIRTUAL_HEIGHT = 800;
private static final float ASPECT_RATIO = (float)VIRTUAL_WIDTH/(float)VIRTUAL_HEIGHT;

public static BitmapFont FONT;

private OrthographicCamera camera;
private Rectangle viewport;
private SpriteBatch sb; 
```

就像我说的，当我运行桌面版本时它运行良好，但是当我在我的 Galaxy S3（屏幕暗淡：1,280 x 720）上运行它时，游戏被缩小了很多，并且它会裁剪出游戏的顶部和侧面这根本不是我想要的。

# vb.net - 使用 AccessDB 运行 MAKETABLE 查询的 vb.NET 应用程序无法在其他机器上运行。错误没有意义。可能是访问版本差异问题？

> ID：14371022
> 
> 赞同：1
> 
> 时间：2013-01-17T01:53:35.060
> 
> 标签：vb.net

我知道我的标题没有多大意义，但我对正在发生的事情感到非常迷茫！

我有以下代码：

```
Sub UpdateStatusReport()

    Try
        Dim oAccess As Access.Application
        oAccess = New Access.Application()

        oAccess.OpenCurrentDatabase("I:\GPS_Conversion\XY_Convert2.mdb", True)
        oAccess.DoCmd.SetWarnings(WarningsOn:=False)
        oAccess.DoCmd.OpenQuery("A1qryMt_FindMaxStatusReportID")
        oAccess.DoCmd.OpenQuery("A2qryUpd_ReduceMaxStatusReportID")
        oAccess.DoCmd.OpenQuery("A3qryMt_StatusReport")
        oAccess.DoCmd.SetWarnings(WarningsOn:=True)
        System.Runtime.InteropServices.Marshal.ReleaseComObject(oAccess)
        oAccess = Nothing
        Console.WriteLine("updated table with live info")
    Catch ex As Exception
        Dim ex1 = ex.ToString
        My.Computer.FileSystem.WriteAllText("C:\logfile.txt", ex1, True)

    End Try

End Sub 
```

我导入以下内容：

```
Imports System
Imports System.Data
Imports System.Data.OleDb
Imports System.Data.DataRowExtensions
Imports System.Data.SqlClient
Imports System.ComponentModel
Imports Microsoft.Office.Interop
Imports ADODB 
```

我从上面得到的错误是：

```
 System.Runtime.InteropServices.COMException (0x800A09C5): The OpenQuery action was canceled.
       at Microsoft.Office.Interop.Access.DoCmd.OpenQuery(Object QueryName, AcView View, AcOpenDataMode DataMode)
       at CurrentPositionHTMLCreate.Module1.UpdateStatusReport() in C:\IT3_New\Michael\CurrentPositionHTMLCreate\CurrentPositionHTMLCreate\Module1.vb:line 30
System.Runtime.InteropServices.COMException (0x800A09C5): The OpenQuery action was canceled.
       at Microsoft.Office.Interop.Access.DoCmd.OpenQuery(Object QueryName, AcView View, AcOpenDataMode DataMode)
       at CurrentPositionHTMLCreate.Module1.UpdateStatusReport() in C:\IT3_New\Michael\CurrentPositionHTMLCreate\CurrentPositionHTMLCreate\Module1.vb:line 30 
```

这是第 30 行：

```
 oAccess.DoCmd.OpenQuery("A1qryMt_FindMaxStatusReportID") 
```

它是一个在访问中调用一系列 MAKETABLE 查询的小子。

在我编写程序的计算机上工作正常，但是当我使用任何其他计算机时，我会遇到各种各样的问题。我通过慢慢分解代码来缩小范围，直到我从整个应用程序中发现什么不起作用。

基本上这会从 slq 服务器上的 DBO 更新数据库中的表。我无法直接访问该服务器，我只能通过带有这些查询的 accessDB 访问它。

基本上，我得出的结论是它的版本问题？看起来我在这台机器上安装了 office 2007，而我尝试过的大多数其他机器都有 2000 或 2003。但我在那些机器上安装了“Microsoft Access Database Engine 2010 Redistributable”，认为这可能是问题所在，但还没有解决我的问题。

我还有其他方法可以做到这一点吗？是否有一些我可以编写的向后兼容代码可以使其在旧版本的访问中可用？我不确定我在这里寻找什么，但我需要一种能够从 DBO 获取实时数据并将其更新到我用于此应用程序的数据库中的方法。

* * *

********更新****** *****

 *** * *

因此，在尝试解决此问题的大量工作后，我无法这样做，我最终将更新移动到访问表单中，并让数据库在网络中用作时钟的机器上在后台运行。

似乎某处发生了版本冲突，但我似乎无法确定在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:42:29.203

数据库没有打开可能是因为不同计算机上的连接字符串不正确。例如，文件`I:\GPS_Conversion\XY_Convert2.mdb`可能映射到驱动器 q: 或根本不映射。打开语句后，检查状态，看看数据库是否真的打开了。如果打开失败，它可能不会产生错误。**

# ios - 在 ios 应用程序的生命周期内存储变量

> ID：14371024
> 
> 赞同：1
> 
> 时间：2013-01-17T01:53:49.800
> 
> 标签：ios, global-variables, application-restart

当应用程序从多任务托盘中被终止/终止时会发生什么情况（即双击主页按钮并从那里将其删除）？我通过单击它再次重新启动该应用程序？考虑这种情况。我保存了一些变量（全局变量），并为它们保存了一些值。我从多任务托盘中杀死/删除了该应用程序并重新启动它。我不再有变量值。我如何在应用程序生命周期的整个过程中存储它们，并且当有人在应用程序生命周期内更改时可以更改它们。如果您需要更多信息，请询问。我一直在将值保存到 plist 文件中。我创建了一个设置包并将值作为全局变量保存到它们中。这是要走的路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:58:13.223

即使在应用程序被终止/终止后也要保存数据，您必须使用持久存储。有许多不同的方法可以做到这一点。其中一些方法是使用 NSUserDefaults、plist 或 CoreData。

查看这些链接，并尝试找出最适合您尝试做的事情。

[iOS 持久化存储策略](https://stackoverflow.com/questions/8727508/ios-persistent-storage-strategy)

[使用 SQLite、plist 或其他东西？](https://stackoverflow.com/questions/5135232/use-sqlite-plist-or-something-else/5135327#5135327)

您还应该查看 iOS 开发讲座，有两部分，第一部分非常详细地介绍了持久性存储。它被称为有效的 iPhone 应用程序开发。我建议两者都看，但第一部分的第一部分会回答你的问题。

[https://developer.apple.com/videos/ios/](https://developer.apple.com/videos/ios/)

# java - 广播接收器没有响应

> ID：14371029
> 
> 赞同：0
> 
> 时间：2013-01-17T01:54:23.247
> 
> 标签：java, android, sms, broadcastreceiver

我有一个接收器，每当收到短信时都会调用它

```
public class SMSReceiver extends BroadcastReceiver {

    private SharedPreferences prefs;
    private String prefName = "MyPref";
    private static final String NUMBER_KEY = "number";

    @Override
    public void onReceive(Context context, Intent intent) {
        // ---get the SMS message passed in---
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        String Sender = null;
        if (bundle != null) {
            // ---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                Sender = msgs[i].getOriginatingAddress();
            }
            prefs = context
                    .getSharedPreferences(prefName, Context.MODE_PRIVATE);
            String phoneNumber = (String) prefs.getString(NUMBER_KEY, "");
            // If the sender of the SMS just received is the same as one chosen
            // earlier
            if (Sender.equals(phoneNumber)) {
                Toast.makeText(context, "text message received",
                        Toast.LENGTH_LONG).show();
                // ---Launch the minderActivity even when the app is not in the
                // foreground---
                Intent minderActivityIntent = new Intent(context, Minder.class);
                minderActivityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(minderActivityIntent);
                // ---send a broadcast intent to update the SMS received in the
                // activity---
                Intent broadcastIntent = new Intent();
                broadcastIntent.setAction("SMS_RECEIVED_ACTION");
                broadcastIntent.putExtra("Sender", Sender);
                context.sendBroadcast(broadcastIntent);
            }
        }
    }
} 
```

我使用按钮在名为“minder”的活动中注册接收器

```
registerReceiver(intentReceiver, intentFilter); 
```

在这个“看护人”活动中，我还有一个`BroadcastReceiver`

```
private BroadcastReceiver intentReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        // ---gather up all the necessary user input---
        prefs = getSharedPreferences(prefName, MODE_PRIVATE);
        final Button btn2 = (Button) findViewById(R.id.btnContacts);
        String phoneNumber = (String) prefs.getString(NUMBER_KEY, "");
        String messageChosen = (String) prefs.getString(MESSAGE_KEY, "");
        String delay = (String) prefs.getString(DELAY_KEY, "");
        String Sender = (String) intent.getExtras().getString("Sender");
        if (Sender.equals(phoneNumber)) {
            sendSMS(phoneNumber, messageChosen, delay);
        }
    }
}; 
```

所有的`permissions`都在`manifest`.

不幸的是，当我测试接收器（即在接收器注册后，从定义为“phoneNumber”的号码向手机发送短信）时，应用程序不执行任何操作。我上面的代码中缺少什么想法？

# gem - 在 ruby mine 中运行 annotate gem

> ID：14371037
> 
> 赞同：6
> 
> 时间：2013-01-17T01:55:05.417
> 
> 标签：gem, rubymine

Rails 新手 - 我错过了什么？通过 Hartl 的 Rails 教程，已经能够找到从 RubyMine 内部运行所有以前的“bundle exec”命令的方法。但现在我已经安装了注释 gem（第 6 章）；本教程的说明是运行“bundle exec annotate”。是否有可以从 Rails 内部运行的等价物？

（我发现了如何从 Rubymine 内部运行 RSpec、git push 等，但我找不到如何执行此操作。）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T23:12:32.200

（红宝石矿 5.0）

1.  运行 > 编辑配置...
2.  “添加新配置”（左上角绿色“+”）>“宝石命令”
3.  Name = "注释宝石"
4.  配置选项卡 > Gem 名称 = 注释，可执行文件名称 = 注释
5.  Bundler 选项卡 > 启用“在包的上下文中运行脚本（bundle exec）”
6.  OK按钮保存配置
7.  Toolbar > Configuration selector = "Annotate Gem"，点击 Run 按钮
8.  运行面板中显示的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:24:37.480

我在虚拟 ubuntu 机器上远程运行它时遇到问题，从 windows 发送的路径是这样的，找不到它。

```
 \usr\local\bin\annotate 
```

我刚刚在 Ruby 参数输入中添加了正确的路径：

```
 -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /usr/local/bin/annotate 
```

我刚开始使用红宝石，我怀疑这是正确的方法。

# javascript - 如何在 VML 中访问 Raphael 填充图像

> ID：14371038
> 
> 赞同：1
> 
> 时间：2013-01-17T01:55:06.753
> 
> 标签：javascript, internet-explorer-8, internet-explorer-7, raphael, vml

我想访问在 VML 中存储填充图像的 VML 元素。我在下面粘贴了我的演示代码。请注意，它仅在包含[raphael.js](https://raw.github.com/DmitryBaranovskiy/raphael/master/raphael-min.js)和[jquery.js](http://code.jquery.com/jquery-1.9.0.min.js)时才有效。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Raphael Test</title>

        <script type="text/javascript" src="js/libs/jquery.js"></script>
        <script type="text/javascript" src="js/libs/raphael.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {

                var raphael, path, pattern;

                raphael = Raphael(document.getElementById('raphael'), 500, 500);

                path = raphael.circle(100, 100, 80);
                path.attr('stroke-width', 3);
                path.attr('fill', 'url(http://3.bp.blogspot.com/_M4WdA9j-b-g/TLMF9JJJwcI/AAAAAAAAAV4/p0Y_Wo3S3sQ/s1600/Landscape1.jpg)');
                pattern = $(path.node).attr('fill');
                if(pattern) {
                    pattern = pattern.replace('url(', '').replace(')', '');
                    pattern = $(pattern);
                }

                // Shape element documentation: http://msdn.microsoft.com/en-us/library/hh846327(v=vs.85).aspx#shape_element
                // Fill element documentation: http://msdn.microsoft.com/en-us/library/bb229596(v=vs.85).aspx

                if(Raphael.vml) { // SVG not supported (IE7 & IE8) and it doesn't work :/
                    console.log($(path.node).find('fill').attr('href'));
                }
                else { // SVG supported and it prints correct URL
                    console.log($(pattern).find('image').attr('href'));
                }
            });
        </script>

    </head>
    <body>
        <div id="raphael"></div>
    </body>
</html> 
```

在 SVG 中，填充图像是使用模式元素提供的。这就是我获取这个元素的原因，我可以轻松访问它的 href 属性。

VML 完全不同。路径是用 shape 元素创建的，里面有 fill 元素。但不幸的是，填充元素没有任何属性：/

有人可以帮我访问 VML 填充图像元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:27:10.907

我找到了解决方案。我编辑了上面的部分代码：

```
if(Raphael.vml) { // SVG not supported (IE7 & IE8) and it doesn't work :/

    var html = $(path.node).html();
    html = html.replace(/rvml:/g, ''); // remove prefix
    html = html.replace(/ = /g, '=');
    html = html.substr(html.indexOf('/>') + 2); // remove xml element

    var src = '';
    $(html).each(function() {
        if($(this).prop("tagName") == 'FILL') {
            src = $(this).attr('src');
        }
    });

    if(src != '') {
        var html = $(path.node).html();
        html = html.replace(src, src + '" size="50,50');
        $(path.node).html(html);
    }
}
else { // SVG supported and it prints correct URL
    console.log($(pattern).find('image').attr('href'));
} 
```

首先`$(path.node).html()`返回 XML ......所以你需要解析它。

另一个问题是它`$.parseXML`不适用于这个 XML...（IE7 和 IE8）所以我不得不自己解析它（这只是一个快速的解决方案——我相信你可以更好地解析它以用于生产）。

最后一件事是`$(html)`返回 6 个元素（不是 3 个！）的数组，因为出于某种原因，它会分别处理结束标签。这就是为什么我要遍历`$(html)`一组元素并寻找填充标签的原因。

这种方法的最大问题是我的解决方案是只读的。您无法更改图像的来源并轻松将其保存回来......您也无法轻松更改其大小。您必须在 XML 中更改它并将其保存回路径元素，因为它位于示例的末尾。

# file - 将文件名中具有特定字符串的目录中的所有文件复制到 Bash 中的不同目录

> ID：14371039
> 
> 赞同：11
> 
> 时间：2013-01-17T01:55:12.213
> 
> 标签：file, bash, copy, filenames, directory

例如，一个目录可能包含文件

```
12_foo9.dat
34foo32.txt
24foobar.png
997_bar.txt 
```

我想将文件名中带有“foo”的文件复制到一个单独的目录中，以便它包含前三个文件但不包含第四个文件。

我环顾四周，但还没有想出办法做到这一点。该目录有非常多的文件，但只有 1% 左右我需要复制。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T02:43:08.770

```
$ mkdir NEWDIR

$ touch foo_file file_foo file_foo_file

$ ls
NEWDIR      file_foo    file_foo_file   foo_file

$ cp -v *foo NEWDIR/
file_foo -> NEWDIR/file_foo

$ cp -v foo* NEWDIR/
foo_file -> NEWDIR/foo_file

$ cp -v *foo* NEWDIR/
file_foo -> NEWDIR/file_foo
file_foo_file -> NEWDIR/file_foo_file
foo_file -> NEWDIR/foo_file

$ ls NEWDIR/
file_foo    file_foo_file   foo_file 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-17T01:58:37.747

试试这个说法：`cp *foo* /newdir`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T01:57:45.797

```
cp *foo* /path/to/separate_directory 
```

如果要验证将首先包含的文件，请使用：

```
ls *foo* 
```

这将确认要匹配的文件，然后您可以使用 cp 命令重新使用相同的模式来执行复制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T02:31:27.397

如果您真的关心文件的数量（例如运行数百万），您可以使用：

```
find . -type f -depth 1 -name "*foo*" -exec cp {} /otherdir \; -print 
```

这不使用 shell 扩展，因此您不会尝试运行带有一百万个参数的命令。给你一些进展的`-print`迹象，可以省略。简单地列出要复制的文件：

```
find . -type f -depth 1 -name "*foo*" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T01:57:28.967

使用[**通配符**](http://tldp.org/LDP/abs/html/globbingref.html)：

```
shopt -s failglob
echo cp *foo* /path/to/separate 
```

这将输出复制命令（或失败`bash: no match: *foo*`）。

`echo`当您验证输出以实际*复制*目录条目时，请删除。

# xcode - XCode 4.5.2：编辑 xib 文件时，Menu->Editor->Add Horizo ntal|Vertical Guide 显示为灰色。为什么？

> ID：14371045
> 
> 赞同：3
> 
> 时间：2013-01-17T01:55:46.450
> 
> 标签：xcode, xcode4, interface-builder, xib

当我编辑 xib 文件时，偶尔会发生这种情况。在某些情况下，只需单击关联的视图控制器文件，然后再单击 xib 文件，就会重新启用菜单选项。然而不是今天。自 XCode 3 以来，这种行为/缺陷一直很时髦，但我仍然无法在谷歌上搜索任何发布有关此问题或收到答案的人。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:43:11.973

尝试单击控件（不是视图），并查看菜单项是否已启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T13:44:12.410

正如@amergin 所说，您必须在画布上选择视图，而不是在侧边栏中。

# android - Android - 下载的repo - 如何确定代码版本

> ID：14371051
> 
> 赞同：1
> 
> 时间：2013-01-17T01:56:33.503
> 
> 标签：android, eclipse

我正在学习安卓。在 Windows 上使用 Eclipse。我希望能够进入 Android 代码。所以：我下载了 Cygwin，从 Google 下载了 repo 工具，按照指示拉下存储库以降低最新版本：

> ```
> repo init -u https://android.googlesource.com/platform/manifest 
> ```

一切正常。我去了*Project->Properties->Libraries->Android 4.2->android.jar->Source* attachment 并从下载的 repo 中附加了一个外部文件夹。没有问题。但是，当我进入 Android 代码时，调试器并没有与代码同步（即调试模式下的高亮条正在逐步穿过源代码中的空白。）所以我认为 Android SDK 管理器附带的 4.2 jar与我从 repo 获得的最新库的版本不同。

所以-长话短说-我怎么知道**a）** Android SDK管理器中包含的框架类的版本和**b）** repo工具拉下的框架类的版本？

最后 - 我认为我最好的选择可能是从下载的 repo 构建一个 jar 并在我的 Eclipse 项目中引用它，而不是 Eclipse 提供的 jar。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:39:47.790

除非您另有说明，否则 repo 将拉下最新的分支。相反，您可以告诉 repo 指定某个标签。相比之下，该`./android`工具可以根据需要提取尽可能多的框架代码版本。您可以通过查看 Android 清单来判断您的应用程序与哪个链接。我建议只使用 android 工具来拉取源代码，而不是从 repo 中获取它们：这通常是您真正想要*构建*Android 时所做的（另外，它可能与 android.jar 中包含的代码不同步对于那个版本。我不确定这是否真的发生在实践中）。

# hadoop - hadoop作业状态的含义

> ID：14371055
> 
> 赞同：1
> 
> 时间：2013-01-17T01:56:48.913
> 
> 标签：hadoop

我运行命令`hadoop job -list all`以显示所有提交的作业，它显示状态含义为：正在运行：1 成功：2 失败：3 准备：4。

但是现在我有一个状态为 5 的作业。`list`命令输出如下：`job_201209101415_429766 5 1358332807055 user NORMAL NA`

有人知道是什么意思吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:02:00.410

作业状态 5 表示已杀死。请检查此网页链接

[http://hadoop.apache.org/docs/r0.20.2/api/constant-values.html#org.apache.hadoop.mapred.JobStatus.KILLED](http://hadoop.apache.org/docs/r0.20.2/api/constant-values.html#org.apache.hadoop.mapred.JobStatus.KILLED)

# asp.net - 如何在 Visual Studio 2012 中重命名 IIS Express 网站

> ID：14371066
> 
> 赞同：19
> 
> 时间：2013-01-17T01:57:55.050
> 
> 标签：asp.net, visual-studio, iis, webmatrix-2

我最初在 Webmatrix 2 中创建了一个站点。我只是将其命名为 website1。我现在一直在 Visual Studio 2012 中处理该站点，我想重命名它。看来您不能直接重命名它，但在 .sln 文件中有一个项目条目，其中包含字符串“website1”。我重命名它并重新启动VS。新名称会短暂显示，但随后会被原始名称覆盖。所以现在我有了带有新名称的 .sln 文件，并且在文件夹中没有任何地方引用旧名称 - 我已经搜索了每个文件。但是 VS 坚持称该站点为 website1。所以我完全糊涂了。

VS存储网站名称的任何想法？我唯一能想到的是 VS 如何与 IIS Express 集成。也许它取自 IIS 的名称？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-10T08:56:04.243

我刚刚在使用VS 2013时遇到了同样的问题，原来是IIS Express引起的，最后我通过以下步骤解决了：

1.  找到你的 IIS Express 的 applicationhost.cofig，通常它应该在文件夹*C:\Users{username}\Documents\IISExpress\config中列出*
2.  在 cofig 文件中找到项目的相应*站点部分*
3.  删除所有具有类似站点名称的站点部分，例如*ProjectNameABC*和*ProjectNameABC(1)*
4.  在 vs 中关闭并重新打开您的解决方案，您会发现您的 Web 项目的特定名称又回来了

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-24T08:51:22.967

我遇到了完全相同的问题，经过大量拉扯后意识到 IIS Express（如您所说）不知何故是罪魁祸首。但是，我找不到站点名称的存储位置。

这就是我最终要做的事情（除了重命名目录并用解决方案文件中的新项目名称替换旧项目名称）：

*   打开`.sln`文件
*   找到`Project`要重命名的网站的条目
*   更改 URL 的端口。这将强制 IIS Express 将其视为新站点。

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-01T09:09:03.180

我对**HTTPS**和**Visual Studio 2015**有同样的问题。

IIS Express 配置文件“C:\Users{username}\Documents\IISExpress\config\applicationhost.config”**没有**我的站点的参考。

我在隐藏目录**的解决方案目录中找到了引用**

**“{解决方案}\.vs\config\applicationhost.config”**

我删除了旧副本站点的条目，关闭并重新打开项目，一切正常。

# android - 无法从绿色运行图标启动 Android 项目

> ID：14371071
> 
> 赞同：0
> 
> 时间：2013-01-17T01:58:55.960
> 
> 标签：android, eclipse

这一直有效，但从昨天开始，小绿色箭头（绿色背景，白色右指向三角形）不起作用。什么都没有发生，除了可能二十次尝试一次。我必须将黑色的小三角形向右推，然后从弹出菜单中启动项目。

我还有一个绑定到相同“运行”命令的键盘快捷键。这个快捷方式也有同样的问题。这是自昨天以来罕见的作品。大多数时候，什么都没有发生。控制台没有输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:10:29.273

试试这个：

1.  清理项目 -> 关闭所有文件
2.  重启 Eclipse
3.  右键单击项目-> 运行方式-> Android 应用程序
4.  再次尝试运行按钮。
    让我们知道结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:18:57.327

不确定是否是这种情况。当您处理 XML 或 Manifest 并启动应用程序时，它不会真正起作用。它将启动您的 xml 文件，并可能在您的项目中创建一个额外的文件。尝试在活动（Java）页面中启动您的应用程序。

# javascript - 作为 Javascript 中查找表的键，整数比字符串快吗？

> ID：14371077
> 
> 赞同：2
> 
> 时间：2013-01-17T01:59:18.197
> 
> 标签：javascript, performance, hash, lookup-tables

我从后端返回的数据包含大量参考数据，我需要有效地访问它，所以我正在考虑创建（对象的 id）=>（对象本身）类型查找。对象的 ID 作为字符串返回，我想知道整数作为哈希键是否比字符串快？

```
playerLookup = {};
for (var i = 0; i < players.length; i++) {
  var player = players[i];
  playerLookup[player.id] = player;
  // vs.
  playerLookup[parseInt(player.id)] = player;
} 
```

根据 jsperf 测试[http://jsperf.com/testasdfa](http://jsperf.com/testasdfa)，在 Chrome 上的整数查找要快得多（~25%）。不确定测试场景是否正确。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:01:58.363

我的观点是找到元素的最快方法是通过模块化哈希表。

使 playerLookup 成为一个包含 n 个元素的数组，数组的每个元素都设置为 -1（或某个值，让您知道该位尚未设置）。

当您存储 playerId 时，将其存储在`playerLookup[parseInt(player.id) % n]`

以这种方式从哈希表中查找项目的工作复杂度为 1，但您上面列出的方法的工作复杂度为 x 其中 x = playerLookup.length （无论您使用字符串还是数字作为键） .

要使哈希表更小，请选择更小的 n。n 越小，我们就越有可能发生冲突。

### 冲突

要处理冲突，请将 playerLookup 的每个元素设为数组。如果您在已经包含另一个玩家的位置将 playerId 添加到 playerLookup 中，请在该位置旁边列出新的（即现在两者都在同一个位置）。如果您查找一个玩家并在哈希表中找到一个包含多个玩家的位置，只需遍历此数组直到找到该玩家。此迭代将与您想到的第一个实现具有相同的工作复杂性，但有两个优点：

1.  由于模块化哈希表，它甚至不太可能发生

2.  当它确实发生时，我们正在迭代的数组平均比您实现的原始数组小 n 倍（其中 n 是我们的模变量）。

出于数学原因（使用模数），我建议为 n 选择一个素数。

# android - 何时调用 OnUpgrade 以及如何获取 oldVersion 参数？

> ID：14371084
> 
> 赞同：15
> 
> 时间：2013-01-17T02:01:20.177
> 
> 标签：android, android-sqlite

我正在为我当前的应用程序进行更新。我的应用程序使用 SQLite DB，到目前为止我处于版本 1。我需要在我的第二个版本中更改/引入新表。我做了我的研究，我发现要做到这一点，最好的方法是使用`switch`( `case`) 语句，在其中我以失败的方式对 db 进行更新。

我的问题是，**android如何知道旧版本是`onUpgrade()`什么？**. 事实上，**它什么时候被调用？**.

所以对于第一次下载我更新的应用程序的用户，我认为`onUpgrade()`不会被调用！**android怎么知道什么时候不打电话`onUpgrade()`？**

请为我澄清这一点。我想提交我的第一个更新，我不想失去来之不易的用户 :)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-17T02:12:45.387

实现时`SQLiteOpenHelper`，将版本参数传递给超类构造函数。这应该是一个静态值，您可以在应用程序的未来版本中更改（通常您希望这是您的`SQLiteOpenHelper`实现的静态最终属性，以及您传递给超类构造函数的数据库名称）。

然后，当您想要更新数据库时，增加将在您的`SQLiteOpenHelper`实现中使用的版本参数，并以编程方式在方法内部执行您打算执行的 SQL 修改`onUpgrade()`。

假设您的数据库从版本 1 中的表 A 开始，然后您在版本 2 中添加了表 B，在版本 3 中添加了表 C，您的 onUpgrade 方法如下所示：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion < 2) { // do stuff for migrating to version 2
        db.execSQL( ...create table B... );
    }
    if (oldVersion < 3) { // do stuff for migrating to version 3
        db.execSQL( ...create table C... );
    }
} 
```

当超类构造函数运行时，它将存储的 SQLite .db 文件的版本与您作为参数传递的版本进行比较。如果它们不同，`onUpgrade()`则被调用。

我应该检查实现，但如果需要创建数据库，我假设`onUpgrade()`也会在之后调用，并且有一种方法可以确保执行所有升级（例如，通过强制所有版本号为正整数并初始化一个新的`onCreate()`使用版本 0 创建的数据库）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-03T18:04:29.410

`onUpgrade()`不是从构造函数调用的。第一次`getWritableDatabase()`被调用，数据库将被打开`onCreate()`，`onUpgrade()`和/或`onOpen()`将被调用。这就是构造函数位于主线程上的原因，但从`getWritableDatabase()`工作线程调用是一种更好的性能实践。

# c# - 在图上绘制一条线 (y = 2x + 7)

> ID：14371085
> 
> 赞同：1
> 
> 时间：2013-01-17T02:01:21.087
> 
> 标签：c#, visual-studio-2010, charts, graphing

我正在用 C# 开发一个科学计算器。我有解析引擎等，现在我想添加一个图表，以便用户可以绘制一条线。是否有任何类型的控件可以让我输入一个函数并在图表中绘制一条线？顺便说一句，我不是在谈论绘制单个点。

以斜率截距形式的这个线性方程为例：

```
f(x) = 2x + 7 
```

主要目标是允许用户`2x + 7`在文本框中书写，然后它会绘制线条。如果可以使用自定义函数而不只是线性函数，那将是更可取的，例如：

```
((x - 8) * 4^2)/(7.136 + x) 
```

但这不是一个要求。是否有第三方控制？如果没有，我怎么能创建这样的控件？

我下载了一个程序，它可以像这样绘制函数：

![桌面图形计算器](../Images/dac8600439d301905135ac7e789b7465.png)

如何在我的 Visual C# 2010 WinForms 应用程序中实现此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:23:43.723

我搜索`mathematical function plot library for windows`并发现了这个：

*   [FPlot](http://www.codeproject.com/Articles/11608/FPlot-a-NET-library-for-plotting-functions-and-mea)一个“用于绘制函数和测量数据的 .NET 库”（CodeProject 上的一个项目）

您可以尝试使用以下源代码：

*   [数学GV](http://www.mathgv.com/index.html)
*   [图形](http://sourceforge.net/projects/graph/files/Graph/)

您必须检查许可证。顺便说一句，我没有尝试任何这些。

# excel - 如何在输入范围内的值之前使自动总和为空白？Excel

> ID：14371086
> 
> 赞同：0
> 
> 时间：2013-01-17T02:01:29.007
> 
> 标签：excel

我正在尝试在excel中进行自动求和。使用 =SUM(C5:F5) 很容易。（我在单元格 G5 执行此操作）。在我在 C5:F5 中输入任何内容之前，它在 G5 中显示为 0。

我想要的是在 C5:F5 中输入任何值之前将 G5 设为空白。如果在 C5:F5 的任一单元格中输入了任何值，则只有 G5 显示结果。

我已经尝试了公式 =IF(ISBLANK(C5:F5), "", SUM(C5:F5))，但结果与 =SUM(C5:F5) 相同，那里是 0。

任何人都可以提出解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:33:42.440

```
=IF(COUNTBLANK(C5:F5)=COLUMNS(C5:F5),"",SUM(C5:F5)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T13:54:11.583

另一种简单的方法是：

IF(SUM(C5:F5)="";"";SUM(C5:F5))

请注意，如果在 C5:F5 列中输入任何 0，将显示 0。

# android - 如何在 TextView BOLD 上制作特定文本

> ID：14371092
> 
> 赞同：333
> 
> 时间：2013-01-17T02:02:21.123
> 
> 标签：android, textview, android-textattributes

我不知道如何使 TextView 上的特定文本变为 BOLD。

就像这样

```
txtResult.setText(id+" "+name); 
```

我希望输出是这样的：

> **第1111**章

`id`并且`name`是我从数据库中检索值的变量，我想将其`id`设为粗体，但只有`id`这样`name`不会受到影响，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：441
> 
> 时间：2013-01-17T02:04:24.600

只需在 HTML 中构建您的字符串并设置它：

```
String sourceString = "<b>" + id + "</b> " + name; 
mytextview.setText(Html.fromHtml(sourceString)); 
```

* * *

## 回答 #2

> 赞同：434
> 
> 时间：2013-01-17T02:09:25.743

虽然您可以使用[Html.fromHtml()](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)，但您可以使用更原生的方法[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)，这篇[文章](https://stackoverflow.com/questions/11479560/custom-textview-in-android-with-different-color-words)可能会有所帮助。

```
SpannableStringBuilder str = new SpannableStringBuilder("Your awesome text");
str.setSpan(new android.text.style.StyleSpan(android.graphics.Typeface.BOLD), INT_START, INT_END, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
TextView tv=new TextView(context);
tv.setText(str); 
```

* * *

## 回答 #3

> 赞同：156
> 
> 时间：2018-05-09T00:17:44.383

第一：您不必担心使用[Raghav Sood 答案](https://stackoverflow.com/a/14371107/4744263)中性能缓慢的代码。

第二：使用 Kotlin 时不需要编写[w3bshark 的回答提供的扩展函数。](https://stackoverflow.com/a/48252635/4744263)

Finnaly：您需要做的就是使用来自 Google的 Kotlin [android-ktx 库（请参阅](https://github.com/android/android-ktx)[此处](https://developer.android.com/kotlin/ktx)以查找更多信息以及如何将其包含在您的项目中）：

```
// Suppose id = 1111 and name = neil (just what you want). 
val s = SpannableStringBuilder()
          .bold { append(id) } 
          .append(name)
txtResult.setText(s) 
```

> 产量：**1111**尼尔

* * *

**更新：**

因为我认为它可以帮助其他人，也可以证明你可以在这里走多远，所以有更多的用例。

*   当您需要以蓝色和斜体显示某些部分的文本时：

    ```
    val myCustomizedString = SpannableStringBuilder()
        .color(blueColor, { append("A blue text ") })
        .append("showing that ")
        .italic{ append("it is painless") } 
    ```

*   当您需要以粗体和斜体显示文本时：

    ```
     bold { italic { append("Bold and italic") } } 
    ```

简而言之，、`bold`和是的扩展函数。[您可以在官方文档](https://android.github.io/android-ktx/core-ktx/androidx.text/android.text.-spannable-string-builder/index.html)中看到另一个扩展功能，从中您可以考虑其他可能性。`append``color``italic``SpannableStringBuilder`

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2014-07-15T09:08:57.047

我认为选择的答案没有提供令人满意的结果。我编写了自己的函数，它需要 2 个字符串；全文和要加粗的部分文本。

它返回一个 SpannableStringBuilder，其中 'text' 中的 'textToBold' 加粗。

我发现将子字符串设置为粗体而不将其包装在标签中的能力很有用。

```
 /**
     * Makes a substring of a string bold.
     * @param text          Full text
     * @param textToBold    Text you want to make bold
     * @return              String with bold substring
     */

    public static SpannableStringBuilder makeSectionOfTextBold(String text, String textToBold){

        SpannableStringBuilder builder=new SpannableStringBuilder();

        if(textToBold.length() > 0 && !textToBold.trim().equals("")){

            //for counting start/end indexes
            String testText = text.toLowerCase(Locale.US);
            String testTextToBold = textToBold.toLowerCase(Locale.US);
            int startingIndex = testText.indexOf(testTextToBold);
            int endingIndex = startingIndex + testTextToBold.length();
            //for counting start/end indexes

            if(startingIndex < 0 || endingIndex <0){
                return builder.append(text);
            }
            else if(startingIndex >= 0 && endingIndex >=0){

                builder.append(text);
                builder.setSpan(new StyleSpan(Typeface.BOLD), startingIndex, endingIndex, 0);
            }
        }else{
            return builder.append(text);
        }

        return builder;
  } 
```

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2017-01-04T09:31:12.477

正如 wtsang02 所说，使用 HTML 是一项昂贵的开销。只需使用本机解决方案。如果您不必修改字符串，只需使用 SpannableString，而不是 SpannableStringBuilder。

```
String boldText = "id";
String normalText = "name";
SpannableString str = new SpannableString(boldText + normalText);
str.setSpan(new StyleSpan(Typeface.BOLD), 0, boldText.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(str); 
```

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2017-02-01T10:04:48.843

如果您想使用 XML 中的字符串，您可以执行以下操作：

**strings.xml**（“CDATA”部分很重要，否则不起作用）

```
<string name="test">
     <![CDATA[
 <b>bold!</b> normal
    ]]>
</string> 
```

**布局文件**

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent" android:layout_height="match_parent" tools:context=".MainActivity">

    <TextView
        android:id="@+id/textView" android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_gravity="center" />

</FrameLayout> 
```

**代码**

```
textView.text = HtmlCompat.fromHtml(getString(R.string.test), HtmlCompat.FROM_HTML_MODE_LEGACY) 
```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2017-08-04T14:28:29.980

它很简单，例如像这样关闭指定的文本`<b>"your text here:"</b>`

```
<string name="headquarters">"<b>"Headquarters:"</b>" Mooresville, North Carolina, U.S.</string> 
```

结果： **总部：**美国北卡罗来纳州穆尔斯维尔

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2019-06-27T00:46:34.723

如果您使用的是 Kotlin，使用 会变得更容易`core-ktx`，因为它提供了一种[领域特定语言 (DSL)](https://developer.android.com/reference/kotlin/androidx/core/text/package-summary#buildspannedstring "https://developer.android.com/reference/kotlin/androidx/core/text/package-summary#buildspannedstring")来执行此操作：

```
val string: SpannedString = buildSpannedString {
    bold {
        append("foo")
    }
    append("bar")     
} 
```

它提供的更多选项是：

```
append("Hello There")
bold {
    append("bold")
    italic {
        append("bold and italic")
        underline {
            append("then some text with underline")
        }
    }
} 
```

最后，您可以：

```
textView.text = string 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2017-07-17T23:19:46.570

根据@mladj0ni 的回答，我得到了下面的代码。问题是，如果您使用**String.format**，它会去除 html 标记，因此您必须转义 strings.xml 中的括号符号：

**字符串.xml：**

`<string name="welcome_messages">Hello, %1$s! You have &lt;b>%2$d new messages&lt;/b>.</string>`

**代码.java：**

```
String unspanned = String.format(Locale.US, "%s%s", getResources().getString(R.string. welcome_messages), 99);

Spanned spanned;
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.N) {
    spanned = Html.fromHtml(unspanned, Html.FROM_HTML_MODE_LEGACY);
} else {
    spanned = Html.fromHtml(unspanned);
}

textView.setText(spanned); 
```

它比 SpannableStringBuilder 更简单。至于性能，如果您只显示一个字符串，那么用户将不会注意到额外的毫秒来解析它。

[请参阅此处](https://developer.android.com/guide/topics/resources/string-resource.html)的文档。

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2016-08-23T06:45:12.580

如果您想让多个文本变为粗体，这里是更好的解决方案。我改进了 Eitan 的代码。谢谢艾坦。

```
public static SpannableStringBuilder makeSectionOfTextBold(String text, String... textToBold) {
    SpannableStringBuilder builder = new SpannableStringBuilder(text);

    for (String textItem :
            textToBold) {
        if (textItem.length() > 0 && !textItem.trim().equals("")) {
            //for counting start/end indexes
            String testText = text.toLowerCase(Locale.US);
            String testTextToBold = textItem.toLowerCase(Locale.US);
            int startingIndex = testText.indexOf(testTextToBold);
            int endingIndex = startingIndex + testTextToBold.length();

            if (startingIndex >= 0 && endingIndex >= 0) {
                builder.setSpan(new StyleSpan(Typeface.BOLD), startingIndex, endingIndex, 0);
            }
        }
    }

    return builder;
} 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2018-08-24T19:07:56.433

您可以使用此代码将部分文本设置为粗体。对于粗体 html 标记之间的任何内容，它都会使其变为粗体。

```
String myText = "make this <b>bold</b> and <b>this</b> too";
textView.setText(makeSpannable(myText, "<b>(.+?)</b>", "<b>", "</b>"));

public SpannableStringBuilder makeSpannable(String text, String regex, String startTag, String endTag) {

            StringBuffer sb = new StringBuffer();
            SpannableStringBuilder spannable = new SpannableStringBuilder();

            Pattern pattern = Pattern.compile(regex);
            Matcher matcher = pattern.matcher(text);
            while (matcher.find()) {
                sb.setLength(0);
                String group = matcher.group();
                String spanText = group.substring(startTag.length(), group.length() - endTag.length());
                matcher.appendReplacement(sb, spanText);

                spannable.append(sb.toString());
                int start = spannable.length() - spanText.length();

                spannable.setSpan(new android.text.style.StyleSpan(android.graphics.Typeface.BOLD), start, spannable.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            }
            sb.setLength(0);
            matcher.appendTail(sb);
            spannable.append(sb.toString());
            return spannable;
        } 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2018-11-13T03:02:02.947

**wtsang02**答案是最好的解决方法，因为 Html.fromHtml("") 现在已弃用。在这里，无论句子的大小如何，对于在动态使第一个单词加粗时遇到问题的人，我都会对其进行一点增强。

首先让我们创建一个方法来获取第一个单词：

```
 private String getFirstWord(String input){

    for(int i = 0; i < input.length(); i++){

        if(input.charAt(i) == ' '){

            return input.substring(0, i);
        }
    }

    return input;
} 
```

现在假设你有一个像这样的长字符串：

```
String sentence = "friendsAwesomeName@gmail.com want's to be your friend!" 
```

你希望你的句子像**yourAwesomeName@gmail.com**一样成为你的朋友！您所要做的就是 - 获取 firstWord 并获取它的长度以使 firstWord 加粗，如下所示：

```
String myFirstWord = getFirstWord(sentence);
int start = 0; // bold will start at index 0
int end = myFirstWord.length(); // and will finish at whatever the length of your first word 
```

现在只需按照**wtsang02 的**步骤进行操作，如下所示：

```
SpannableStringBuilder fancySentence = new SpannableStringBuilder(sentence);
fancySentence.setSpan(new android.text.style.StyleSpan(Typeface.BOLD), start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(fancySentence); 
```

就是这样！现在您应该能够将长/短句中任意大小的单词加粗。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-08-21T16:16:27.860

```
public static Spanned getBoldString(String textNotBoldFirst, String textToBold, String textNotBoldLast) {
    String resultant = null;

    resultant = textNotBoldFirst + " " + "<b>" + textToBold + "</b>" + " " + textNotBoldLast;

    return Html.fromHtml(resultant);

} 
```

试试这个。绝对有帮助

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-11-30T10:54:45.003

在列表/回收器中搜索 char 时，使字符串的第一个 char 可跨越，例如

> r **a** vi 和 ajay

以前像这样突出显示，但我想像下面这样

> 拉维**和**杰伊 **或** 拉维**和**杰伊

为此，我搜索了单词长度（如果它等于 1），我将主字符串分成单词并计算单词起始位置，然后我搜索以 char 开头的单词。

```
 public static SpannableString colorString(int color, String text, String... wordsToColor) {
    SpannableString coloredString = new SpannableString(text);

    for (String word : wordsToColor) {

        Log.e("tokentoken", "-wrd len-" + word.length());
        if (word.length() !=1) {
            int startColorIndex = text.toLowerCase().indexOf(word.toLowerCase());
            int endColorIndex = startColorIndex + word.length();
            try {
                coloredString.setSpan(new ForegroundColorSpan(color), startColorIndex, endColorIndex,
                        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

            } catch (Exception e) {
                e.getMessage();
            }
        } else {
            int start = 0;

            for (String token : text.split("[\u00A0 \n]")) {
                if (token.length() > 0) {
                    start = text.indexOf(token, start);
                   // Log.e("tokentoken", "-token-" + token + "   --start--" + start);
                    char x = token.toLowerCase().charAt(0);
                    char w = word.toLowerCase().charAt(0);
                   // Log.e("tokentoken", "-w-" + w + "   --x--" + x);

                    if (x == w) {
                        // int startColorIndex = text.toLowerCase().indexOf(word.toLowerCase());
                        int endColorIndex = start + word.length();
                        try {
                            coloredString.setSpan(new ForegroundColorSpan(color), start, endColorIndex,
                                    Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

                        } catch (Exception e) {
                            e.getMessage();
                        }
                    }
                }
            }

        }

    }

    return coloredString;
} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-01-14T18:12:53.240

我来这里是为了提供一个更新的解决方案，因为我对现有的答案并不满意。我需要一些适用于翻译文本并且不会影响使用`Html.fromHtml()`. 如果您使用的是 Kotlin，这里有一个扩展功能，可以轻松地将文本的多个部分设置为**粗体**。这就像 Markdown 一样工作，如果需要，可以扩展以支持其他 Markdown 标签。

```
val yourString = "**This** is your **string**.".makePartialTextsBold()
val anotherString = getString(R.string.something).makePartialTextsBold()

/**
 * This function requires that the parts of the string that need
 * to be bolded are wrapped in ** and ** tags
 */
fun String.makePartialTextsBold(): SpannableStringBuilder {
    var copy = this
    return SpannableStringBuilder().apply {
        var setSpan = true
        var next: String
        do {
            setSpan = !setSpan
            next = if (length == 0) copy.substringBefore("**", "") else copy.substringBefore("**")
            val start = length
            append(next)
            if (setSpan) {
                setSpan(StyleSpan(Typeface.BOLD), start, length,
                        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)
            }
            copy = copy.removePrefix(next).removePrefix("**")
        } while (copy.isNotEmpty())
    }
} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-05-10T08:52:54.517

您可以在builder中分别添加两个字符串，其中一个是spannedString，另一个是常规字符串。这样您就不必计算索引了。

```
val instructionPress = resources?.getString(R.string.settings_press)

val okText = resources?.getString(R.string.ok)
val spannableString = SpannableString(okText)

val spannableBuilder = SpannableStringBuilder()
spannableBuilder.append(instructionPress)
spannableBuilder.append(spannableString, StyleSpan(Typeface.BOLD), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)

instructionText.setText(spannableBuilder,TextView.BufferType.SPANNABLE) 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-05-24T15:07:48.573

这是我为此使用的 Kotlin 扩展功能

```
/**
 * Sets the specified Typeface Style on the first instance of the specified substring(s)
 * @param one or more [Pair] of [String] and [Typeface] style (e.g. BOLD, ITALIC, etc.)
 */
fun TextView.setSubstringTypeface(vararg textsToStyle: Pair<String, Int>) {
    val spannableString = SpannableString(this.text)
    for (textToStyle in textsToStyle) {
        val startIndex = this.text.toString().indexOf(textToStyle.first)
        val endIndex = startIndex + textToStyle.first.length

        if (startIndex >= 0) {
            spannableString.setSpan(
                StyleSpan(textToStyle.second),
                startIndex,
                endIndex,
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE
            )
        }
    }
    this.setText(spannableString, TextView.BufferType.SPANNABLE)
} 
```

用法：

```
text_view.text="something bold"
text_view.setSubstringTypeface(
    Pair(
        "something bold",
        Typeface.BOLD
    )
) 
```

.

```
text_view.text="something bold something italic"
text_view.setSubstringTypeface(
    Pair(
        "something bold ",
        Typeface.BOLD
    ),
    Pair(
        "something italic",
        Typeface.ITALIC
    )
) 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-06-16T09:40:04.547

如果粗体文本的位置是固定的（例如：如果在 textView 的开头），则使用两个具有相同背景的不同 textView。然后您可以将其他 textView 的 textStyle 设置为粗体。

与单个 textView 相比，这将需要两倍的内存，但速度会提高。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-04-27T17:34:58.613

找到了一种方法，以防您想处理多种语言的本地化，这很无聊，但它确实有效，假设我们想要这个：

用英语：

> 没有注册的**付款**

在西班牙语中：

> 没有干草**pagos** registrados

您必须创建 3 个字符串

英语：

```
<string name="start_string">There are no</string>
<string name="middle_string">payments</string>
<string name="end_string">registered.</string>
<string name="string_format" translatable="false">%1$s %2$s %3$s</string> 
```

西班牙语：

```
<string name="start_string">No hay</string>
<string name="middle_string">pagos</string>
<string name="end_string">registrados</string> 
```

现在你可以这样做：

```
val startSpanPosition = getString(R.string.start_string).length
val endSpanPosition = startSpanPosition + getString(R.string.middle_string).length
val mySpannableString = SpannableStringBuilder(String.format(getString(R.string.string_format),
        getString(R.string.start_string), getString(R.string.middle_string))), getString(R.string.end_string)))

mySpannableString.setSpan(StyleSpan(Typeface.BOLD), spanStartPosition, endSpanPosition, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE) 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2020-04-29T13:59:27.537

您的字符串资源

```
<resources>
   <string name="your_string_resource_name">This is normal text<![CDATA[<b> but this is bold </b>]]> and <![CDATA[<u> but this is underline text</u>]]></string>
</resources> 
```

你的java类

```
yourtextView.setText(getString(R.string.your_string_resource_name)); 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-05-30T07:14:50.953

> 我创建了一个静态方法来为 TextView 和 EditText**设置部分文本 Bold**

```
public static void boldPartOfText(View mView, String contentData, int startIndex, int endIndex){
        if(!contentData.isEmpty() && contentData.length() > endIndex) {
            final SpannableStringBuilder sb = new SpannableStringBuilder(contentData);

            final StyleSpan bss = new StyleSpan(Typeface.BOLD); // Span to make text bold
            final StyleSpan iss = new StyleSpan(Typeface.NORMAL); //Span to make text normal
            sb.setSpan(iss, 0, startIndex, Spanned.SPAN_INCLUSIVE_INCLUSIVE);
            sb.setSpan(bss, startIndex, endIndex, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold
            sb.setSpan(iss,endIndex, contentData.length()-1, Spanned.SPAN_INCLUSIVE_INCLUSIVE);

            if(mView instanceof TextView)
               ((TextView) mView).setText(sb);
            else if(mView instanceof EditText)
               ((EditText) mView).setText(sb);

        }
    } 
```

另一个更定制的代码

```
 /*typeFaceStyle can be passed as 

    Typeface.NORMAL = 0;
    Typeface.BOLD = 1;
    Typeface.ITALIC = 2;
    Typeface.BOLD_ITALIC = 3;*/

    public static void boldPartOfText(View mView, String contentData, int startIndex, int endIndex,int typeFaceStyle){
        if(!contentData.isEmpty() && contentData.length() > endIndex) {
            final SpannableStringBuilder sb = new SpannableStringBuilder(contentData);

            final StyleSpan bss = new StyleSpan(typeFaceStyle); // Span to make text bold
            final StyleSpan iss = new StyleSpan(Typeface.NORMAL); //Span to make text italic
            sb.setSpan(iss, 0, startIndex, Spanned.SPAN_INCLUSIVE_INCLUSIVE);
            sb.setSpan(bss, startIndex, endIndex, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold
            sb.setSpan(iss,endIndex,contentData.length()-1,Spanned.SPAN_INCLUSIVE_INCLUSIVE);

            if(mView instanceof TextView)
                ((TextView) mView).setText(sb);
            else if(mView instanceof EditText)
                ((EditText) mView).setText(sb);
        }
    } 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-06-13T06:03:42.023

这是我对带有大小写检查的动态字符串值的完整解决方案。

```
/**
 * Makes a portion of String formatted in BOLD.
 *
 * @param completeString       String from which a portion needs to be extracted and formatted.<br> eg. I am BOLD.
 * @param targetStringToFormat Target String value to format. <br>eg. BOLD
 * @param matchCase Match by target character case or not. If true, BOLD != bold
 * @return A string with a portion formatted in BOLD. <br> I am <b>BOLD</b>.
 */
public static SpannableStringBuilder formatAStringPortionInBold(String completeString, String targetStringToFormat, boolean matchCase) {
    //Null complete string return empty
    if (TextUtils.isEmpty(completeString)) {
        return new SpannableStringBuilder("");
    }

    SpannableStringBuilder str = new SpannableStringBuilder(completeString);
    int start_index = 0;

    //if matchCase is true, match exact string
    if (matchCase) {
        if (TextUtils.isEmpty(targetStringToFormat) || !completeString.contains(targetStringToFormat)) {
            return str;
        }

        start_index = str.toString().indexOf(targetStringToFormat);
    } else {
        //else find in lower cases
        if (TextUtils.isEmpty(targetStringToFormat) || !completeString.toLowerCase().contains(targetStringToFormat.toLowerCase())) {
            return str;
        }

        start_index = str.toString().toLowerCase().indexOf(targetStringToFormat.toLowerCase());
    }

    int end_index = start_index + targetStringToFormat.length();
    str.setSpan(new StyleSpan(BOLD), start_index, end_index, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    return str;
} 
```

例如。*completeString* = "我很大胆"

**案例 I** 如果`*targetStringToFormat* = "bold"`并且`*matchCase* = true`

> 返回“我是 BOLD”（因为粗体！= BOLD）

**案例二** 如果`*targetStringToFormat* = "bold"`并且`*matchCase* = false`

> 返回“我很**大胆**”

**申请：**

```
myTextView.setText(formatAStringPortionInBold("I am BOLD", "bold", false)) 
```

希望有帮助！

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2019-10-11T10:11:34.240

如果有人正在使用数据绑定。我们可以像这样定义绑定适配器

```
@BindingAdapter("html")
fun setHtml(view: TextView, html: String) {
    view.setText(HtmlCompat.fromHtml(html, HtmlCompat.FROM_HTML_MODE_LEGACY))
} 
```

然后我们可以在 TextView 上使用它

```
app:html="@{@string/bold_text}" 
```

粗体字在哪里

```
<string name="bold_text"><![CDATA[Part of text is <b>bold</b>]]></string> 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-10-08T08:58:44.037

简单示例

在你的 strings.xml

```
<string name="str_privacy_policy">This is our Privacy Policy.</string> 
```

如果您想特别将“隐私政策”设为粗体，请将字符串放在粗体标签之间。

像这样

```
<string name="str_privacy_policy">This is our <b>Privacy Policy.</b></string> 
```

结果将是

这是我们的**隐私政策**

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2020-11-09T04:04:51.647

我用这段代码加粗了特定的词......

```
 Spanned string = Html.fromHtml("Normal string <b>BOLD STRING</b>");
    textView.setText(string); 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-07-21T11:41:19.553

这是我使用正则表达式和 Kotlin 的方法

```
val BOLD_SPAN = StyleSpan(Typeface.BOLD)

    fun TextView.boldMatches(regexString: String) {
        this.applyStyleSpanToMatches(regexString, BOLD_SPAN)
    }

fun TextView.applyStyleSpanToMatches(regexString: String, span: StyleSpan){
        this.text = this.text.toString().applyStyleSpanToMatches(regexString, span)
        }

        fun String.applyStyleSpanToMatches(regexString: String, span: StyleSpan): Spannable {
            val result = SpannableString.valueOf(this)
            if(regexString.isEmpty()) return result
            val pattern = try{
                Pattern.compile(regexString)
            } catch (e: PatternSyntaxException){
                return result
            }
            val matcher = pattern.matcher(result)
            while (matcher.find()) {
                val start = matcher.start()
                val end = matcher.end()
                result.setSpan(span, start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)
            }
            return result
        } 
```

使用问题可以这样应用：

```
txtResult.boldMatches(id) 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2022-02-21T03:43:53.453

*这段代码不是最简单的解决方案吗？*

```
<string name="string">Please provide your <b>Name</b> properly</string> 
```

*随心所欲地使用这个字符串:)*

结果将是这样的：

> 请正确提供您的**姓名**

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2021-07-14T05:23:37.137

只需将其添加到您的标签中

```
dangerouslySetInnerHTML={{__html: "<p>Your html text here.<p>"}} 
```

# java - Guice 是否在持续进步和完善，足以满足企业应用的需要？

> ID：14371097
> 
> 赞同：1
> 
> 时间：2013-01-17T02:02:38.133
> 
> 标签：java, guice, guice-3

Guice 项目很久没有活跃了，是不是，Guice 是什么情况？Guice3适合企业应用吗？谁能告诉我？

# java - 将图像添加到 jframe

> ID：14371098
> 
> 赞同：-5
> 
> 时间：2013-01-17T02:02:48.477
> 
> 标签：java, image, swing, jframe, jlabel

我一直在尝试所有这些示例代码，但都不起作用，它总是希望我有一个 try/catch，这意味着我必须初始化。无论如何，变量，我正在把头发撕掉，我有一个与图像精确大小的jframe，我想要的只是填充整个jframe，另外，如果图像是透明的，你能做到吗？你可以看到整个jframe。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:04:43.030

```
frame.add(new JLabel(new ImageIcon("path/to/image.png")); 
```

Swing 中有一个类`ImageIcon`可以用于图像。[Javadocs 用于`ImageIcon`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html)

[还有很多其他的使用方法`ImageIcon`。](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:24:39.770

根据您的说法，您的示例代码希望您使用`try / catch`块，我猜您正在使用`ImageIO`该类。它会返回一个`BufferedImage`无法添加到框架中的内容。[`ImageIcon`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html)在此处查看可与 JLabel 一起使用的类

```
frame.add(new JLabel(new ImageIcon("my_image.png")); 
```

如果您的图像在 jar 之外，这应该可以工作。如果它包含在 jar 中，请使用类加载器为您获取资源。

```
URL url = getClass().getClassLoader().getResource("my_image.png");
ImageIcon icon = new ImageIcon(url);
frame.add(new JLabel(icon)); 
```

希望这有效。

# ios - ios6 - numberOfRowsInSection 不针对自定义 tableviewcell、委托/数据源集运行

> ID：14371110
> 
> 赞同：0
> 
> 时间：2013-01-17T02:04:47.750
> 
> 标签：ios, ios6, uitableview

我有一个自定义视图 EMViewController，其中一个表视图作为子视图。我希望 EMViewController 兼作子视图的控制器，因此我将其设置为委托和数据源。

```
// EMViewController.h
@interface EMViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
...
// EMViewController.m
- (void)viewDidLoad {
    [super viewDidLoad];
    self.eTableView.delegate = self;
    self.eTableView.dataSource = self;
} 
```

我正在使用来自 Facebook 的异步数组/字典填充数据，所以一旦我有了数据，我就运行

```
[self.eTableView reloadData] 
```

对于 UITableViewDataSource 协议方法，我实现了以下内容：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSLog(@"returns sections 0"); // This appears in my log
    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSLog(@"returning count %d", [self.eList count]); // never shows up
    return [self.eList count];
}

- (EMTableViewCell *)tableView:(EMTableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // configure the cell
    NSLog(@"index: %d", indexPath); // never shows up
    ...
} 
```

到目前为止，我已经尝试过：

*   确保我的故事板已连接
*   检查/重新检查在 viewDidLoad 中设置的委托/数据源
*   完全重新启动/清理构建我的应用程序以防万一
*   创建一个占位符 UIView 子类（虽然我没有太大变化）
*   为我的自定义布局（图像，3 个标签）创建一个带有插座的 customUITableViewCell 类
*   测试对 tableView 出口的强/弱引用

任何意见，将不胜感激。我认为我的问题类似于[这个问题](https://stackoverflow.com/questions/12032555/uitableviewcontroller-not-loading-data)，除了我试图将 tableview 添加为子视图。我的最终目标是使用包含图像和三个标签的自定义格式填充单元格。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:09:02.077

返回 1 个部分而不是返回 0 个部分

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
} 
```

# visual-studio-2012 - Visual Studio 2012 - 在文件之间切换时保持搜索框打开

> ID：14371116
> 
> 赞同：0
> 
> 时间：2013-01-17T02:05:04.457
> 
> 标签：visual-studio-2012

不喜欢 VS 2012 中的“更新”搜索框。当我执行搜索时，我希望在单击文件选项卡时保持该搜索框可见。现在，搜索框似乎一次只能对一个文件可见。

例如，我打开了 2 个文件。我在当前文件中搜索单词“eyepatch”。接下来我想对下一个文件执行相同的搜索。但是当点击下一个文件时，搜索框消失了，我必须`ctrl + f`再次输入“eyepatch”。

任何人都知道如何使这更容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:36:17.793

按 F3（查找下一个）。它在下次调用时保留先前搜索的搜索文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T16:13:41.160

从搜索框底部的下拉菜单中选择[所有打开的文档]

# jface - 使用 Jface 在文本字段中切换电话号码

> ID：14371117
> 
> 赞同：0
> 
> 时间：2013-01-17T02:05:16.827
> 
> 标签：jface

我陷入了其中一个问题。假设我有一个电话号码字段`010-9999-9999`，这个号码应该分成 3 个文本字段。我试图这样做，但我在所有三个文本字段中只得到前缀编号，即 010。我正在使用 jface 数据绑定。

我创建模型为

```
class A{
    String phoneNo;
} 
```

Jface 数据绑定：

```
IObservableValue ssn1TextTextObserveWidget = SWTObservables.observeText(text_ph11, SWT.Modify);
IObservableValue ssn2TextTextObserveWidget = SWTObservables.observeText(text_ph2, SWT.Modify);
IObservableValue ssn2TextTextObserveWidget1 = SWTObservables.observeText(text_ph3, SWT.Modify);

IObservableValue simpleTableViewerSSN1ObserveDetailValue = BeansObservables.observeDetailValue(simpleTableViewerSelectionObserveSelection_employee, "phoneNo", String.class);
IObservableValue simpleTableViewerSSN2ObserveDetailValue = BeansObservables.observeDetailValue(simpleTableViewerSelectionObserveSelection_employee, "phoneNo", String.class);

IObservableValue simpleTableViewerSSN2ObserveDetailValue = BeansObservables.observeDetailValue(simpleTableViewerSelectionObserveSelection_employee, "phoneNo", String.class); 
```

数据绑定

```
bindingContext.bindValue(simpleTableViewerSSN1ObserveDetailValue, ssn1TextTextObserveWidget, null, null);
bindingContext.bindValue(simpleTableViewerSSN2ObserveDetailValue, ssn2TextTextObserveWidget, null, null);
bindingContext.bindValue(simpleTableViewerSSN2ObserveDetailValue, ssn2TextTextObserveWidget1, null, null); 
```

当我尝试执行此值时，只会在所有三个字段中填充前缀，即 010-010-010。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:59:41.073

如果您希望将您的电话号码分成三个不同的小部件，您可能需要将电话号码保存在三个不同的属性中，每个属性都分配了电话号码的不同部分。

可能有某种方法可以将字符串值的“部分”绑定到小部件，可能是通过 getter 方法，但请等待，让在这方面更有知识的人为您提供答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:52:40.167

这是可以修改以适用于您的案例的示例代码。`IConverter`用于`UpdateValueStrategy`修改将设置/获取模型到/从目标文本字段的值。

```
//GUI class

    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(3, false));

    Label lbl = new Label(shell, SWT.NONE);
    lbl.setText("Name");
    final Text firstName = new Text(shell, SWT.BORDER);
    final Text lastName = new Text(shell, SWT.BORDER);
    final Name name = new Name();
    SWTObservables.getRealm(display).exec(new Runnable() {

      @Override
      public void run() {

        // TODO Auto-generated method stub
        Realm realm = SWTObservables.getRealm(display);
        DataBindingContext cxt = new DataBindingContext(realm);

        ISWTObservableValue firstNameObservable = SWTObservables.observeText(firstName, new int[] { SWT.Modify });
        ISWTObservableValue lastNameObservable = SWTObservables.observeText(lastName, new int[] { SWT.Modify });

        final IObservableValue nameObservable = BeansObservables.observeValue(realm, name, "name");

        UpdateValueStrategy firstNameTxtToName = new UpdateValueStrategy();

        firstNameTxtToName.setConverter(new IConverter() {

          @Override
          public Object getToType() {

            // TODO Auto-generated method stub
            return String.class;
          }

          @Override
          public Object getFromType() {

            // TODO Auto-generated method stub
            return String.class;
          }

          @Override
          public Object convert(Object fromObject) {

            String val = fromObject.toString();
            Object beanVal = nameObservable.getValue();
            if (beanVal != null) {
              String beanString = beanVal.toString();
              int i = beanString.indexOf(',');
              if (i != -1) {
                return val + beanString.substring(i);
              }
            }
            return val;
          }
        });

        UpdateValueStrategy nameToFirstName = new UpdateValueStrategy();

        nameToFirstName.setConverter(new IConverter() {

          @Override
          public Object getToType() {

            // TODO Auto-generated method stub
            return String.class;
          }

          @Override
          public Object getFromType() {

            // TODO Auto-generated method stub
            return String.class;
          }

          @Override
          public Object convert(Object fromObject) {

            if (fromObject != null) {
              Object objVal = nameObservable.getValue();
              if (objVal != null) {
                String val = objVal.toString();
                int i = val.indexOf(',');
                if (i != -1) {
                  return val.substring(0, i);
                } else {
                  return val;
                }
              }
            }
            return "";
          }
        });

        UpdateValueStrategy lastNameTxtToName = new UpdateValueStrategy();

        lastNameTxtToName.setConverter(new IConverter() {

          @Override
          public Object getToType() {

            // TODO Auto-generated method stub
            return String.class;
          }

          @Override
          public Object getFromType() {

            // TODO Auto-generated method stub
            return String.class;
          }

          @Override
          public Object convert(Object fromObject) {

            String val = fromObject.toString();
            Object beanVal = nameObservable.getValue();
            if (beanVal != null) {
              String beanString = beanVal.toString();
              int i = beanString.indexOf(',');
              String fName = beanString;
              if (i != -1) {
                fName = beanString.substring(0, i + 1);
              } else {
                fName = fName + ",";
              }
              val = fName + val;
            }
            return val;
          }
        });

        UpdateValueStrategy nameToLastName = new UpdateValueStrategy();

        nameToLastName.setConverter(new IConverter() {

          @Override
          public Object getToType() {

            // TODO Auto-generated method stub
            return String.class;
          }

          @Override
          public Object getFromType() {

            // TODO Auto-generated method stub
            return String.class;
          }

          @Override
          public Object convert(Object fromObject) {

            if (fromObject != null) {
              String val = fromObject.toString();
              int i = val.indexOf(',');
              if (i != -1) {
                return val.substring(i + 1);
              }
            }
            return "";
          }
        });
        cxt.bindValue(firstNameObservable, nameObservable, firstNameTxtToName, nameToFirstName);

        cxt.bindValue(lastNameObservable, nameObservable, lastNameTxtToName, nameToLastName);
      }
    });

    shell.open();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        display.sleep();
      }
    }
    display.dispose();

//POJO

public class Name {

  private PropertyChangeSupport changeSupport = new PropertyChangeSupport(this);

  public void addPropertyChangeListener(String propertyName, PropertyChangeListener listener) {

    changeSupport.addPropertyChangeListener(propertyName, listener);
  }

  public void removePropertyChangeListener(String propertyName, PropertyChangeListener listener) {

    changeSupport.removePropertyChangeListener(propertyName, listener);
  }

  public void addPropertyChangeListener(PropertyChangeListener listener) {

    changeSupport.addPropertyChangeListener(listener);
  }

  public void removePropertyChangeListener(PropertyChangeListener listener) {

    changeSupport.removePropertyChangeListener(listener);
  }

  public void firePropertyChangeEvent(PropertyChangeEvent evt) {

    changeSupport.firePropertyChange(evt);
  }

    String name;

    /**
     * @return the name
     */
    public String getName() {

      return name;
    }

    /**
     * @param name the name to set
     */
    public void setName(String name) {

      this.name = name;

      System.out.println(name);
    }

  } 
```

# amazon-s3 - 调用 create_application_version 时，什么会导致“BotoServerError: 400 Bad Request”？

> ID：14371118
> 
> 赞同：1
> 
> 时间：2013-01-17T02:05:20.633
> 
> 标签：amazon-s3, boto, amazon-elastic-beanstalk

我已经包含了一些将战争文件上传到 s3 存储桶中的代码（如果存储桶不存在，则首先创建它）。然后，它使用刚刚上传的 war 文件创建一个弹性 beanstalk 应用程序版本。

假设`/tmp/server_war`存在并且是一个有效的war文件。以下代码将失败`boto.exception.BotoServerError: BotoServerError: 400 Bad Request`：

```
#!/usr/bin/env python

import time

import boto

BUCKET_NAME = 'foo_bar23498'

s3 = boto.connect_s3()
bucket = s3.lookup(BUCKET_NAME)
if not bucket:
  bucket = s3.create_bucket(BUCKET_NAME, location='')

version_label = 'server%s' % int(time.time())

# uplaod the war file
key_name = '%s.war' % version_label
s3key = bucket.new_key(key_name)
print 'uploading war file...'
s3key.set_contents_from_filename('/tmp/server.war',
                                 headers={'Content-Type' : 'application/x-zip'})

# uses us-east-1 by default
eb = boto.connect_beanstalk()

eb.create_application_version(
  application_name='TheApp', 
  version_label=version_label, 
  s3_bucket=BUCKET_NAME, 
  s3_key=key_name, 
  auto_create_application=True) 
```

什么会导致这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T02:05:20.633

此错误的一个可能原因是存储桶名称。显然，您可以拥有包含下划线的 s3 存储桶名称，但您不能使用这些存储桶中的键创建应用程序版本。

如果将上面的第四行更改为

BUCKET_NAME = 'foo-bar23498'

它应该工作。

是的，回答我自己的问题感觉很奇怪......显然这是针对堆栈溢出这种情况的推荐方法。我希望我可以为其他人节省大量的调试时间。

# python-2.7 - python 2.7试图将字符串切片分配给字符串

> ID：14371124
> 
> 赞同：0
> 
> 时间：2013-01-17T02:06:41.507
> 
> 标签：python-2.7

我只是想将 a 的一部分分配`string`给另一个`string`，以便在脚本中轻松操作。我可以打印切片： `print full_path[startIndex:endIndex+5];`

但是将其分配给另一个字符串会在 eclipse 中呈现此异常：模块不在 pythonpath 中

```
modulePath=full_path[startIndex:endIndex+5]; 
```

我以为`full_path[startIndex:endIndex+5]`返回字符串，但我不确定。

我没有正确声明字符串，不是返回的字符串吗？

请帮忙。谢谢你。薇琪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:43:04.827

这里的问题不在于你如何分割字符串，这看起来很好。抛出的异常表明 python 找不到您尝试导入的模块。为避免此类问题，请尝试将所有脚本存储在特定位置并将此位置添加到环境变量“PYTHONPATH”中。

如果您在 Windows 上，请查看此线程：

[如何在 Windows 7 中添加到 pythonpath？](https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7)

# php - Yii中如何访问Controller中的表单元素

> ID：14371125
> 
> 赞同：0
> 
> 时间：2013-01-17T02:06:43.097
> 
> 标签：php, yii

如何访问控制器中视图的元素。让我在表单字段中有一个字段名称“类型”，我想在我的控制器类中访问该字段的值。我怎样才能做到这一点。我看到我们在哪里获取所有属性

```
$model->attributes=$_POST['Alerts']; 
```

如何从 $model->attributes 获取特定属性提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:24:04.837

Yii 模型属性被命名为类的对象。一个 activeRecord 类，您可以通过名称找到模型属性。

考虑到您使用了与帖子中的模型属性匹配的正确名称，您只需使用即可访问它们

```
$model->attname 
```

例如，模型“学生”在帖子中发送了属性名称和班级，您可以访问

```
$class = $model->class;
$name = $model->name; 
```

如果您有一些不属于模型的 post 值（通常不应该发生），您可以像往常一样使用 $_POST 指令访问它，或者在调试时使用 print_r 查找所有参数。

```
print_r($_POST); 
```

# asp.net-mvc-4 - DropDownListFor 没有过滤预期的项目

> ID：14371126
> 
> 赞同：0
> 
> 时间：2013-01-17T02:06:43.343
> 
> 标签：asp.net-mvc-4, selectedvalue, dropdownlistfor

组合加载正常，但未选择项目“3”。我怎样才能选择这个项目？

这是我用于列表和选择的代码。

```
@Code

    Dim Items As New Collections.Generic.List(Of SelectListItem)
    Items.Add(New SelectListItem With {.Value = "1", .Text = "Usuario registrado"})
    Items.Add(New SelectListItem With {.Value = "2", .Text = "Administrador"})
    Items.Add(New SelectListItem With {.Value = "3", .Text = "Supervisor"})
    Items.Add(New SelectListItem With {.Value = "4", .Text = "Usuario de pulmón"})
    Items.Add(New SelectListItem With {.Value = "5", .Text = "Usuario de picking"})

End Code

@Html.LabelFor(Function(m) m.Profile)
@Html.DropDownListFor(Function(m) m.Profile, New SelectList(Items, "Value", "Text", "3")) 
```

控制器。在本节中，我将初始化配置文件属性。

```
 Public Function Edit() As ActionResult
    Dim Model As New EditModel

    Dim User = Membership.FindUsersByName(Request("UserName"))(Request("UserName"))
    Model.UserName = User.UserName

    If Roles.IsUserInRole(User.UserName, Models.AppRoles.Administrador.ToString) Then
        Model.Profile = Models.AppRoles.Administrador

    ElseIf Roles.IsUserInRole(User.UserName, Models.AppRoles.Supervisor.ToString) Then
        Model.Profile = Models.AppRoles.Supervisor

    ElseIf Roles.IsUserInRole(User.UserName, Models.AppRoles.UsuarioPulmon.ToString) Then
        Model.Profile = Models.AppRoles.UsuarioPulmon

    ElseIf Roles.IsUserInRole(User.UserName, Models.AppRoles.UsuarioPicking.ToString) Then
        Model.Profile = Models.AppRoles.UsuarioPicking

    ElseIf Roles.IsUserInRole(User.UserName, Models.AppRoles.UsuarioRegistrado.ToString) Then
        Model.Profile = Models.AppRoles.UsuarioRegistrado

    End If

    Model.Email = User.Email

    Return View(Model)
End Function

Public Class EditModel

<Required()>
<Display(Name:="Perfil")>
Public Property Profile() As Models.AppRoles

<Required()> _
<Display(Name:="Nombre de usuario")> _
Public Property UserName() As String

<Required()> _
<DataType(DataType.EmailAddress)> _
<Display(Name:="E-mail")> _
Public Property Email() As String 
```

结束类

```
Namespace Models
Public Enum AppRoles
    UsuarioRegistrado = 1
    Administrador = 2
    Supervisor = 3
    UsuarioPulmon = 4
    UsuarioPicking = 5
End Enum 
```

结束命名空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:31:29.373

`Profile`您应该使用要在列表中选择的值来初始化属性。如果`Profile`不是`int`，则创建一个属性`SelectedProfileId`并使用此属性

```
@Html.DropDownListFor(Function(m) m.SelectedProfileId, New SelectList(Items, "Value", "Text")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:13:26.590

试试这个，我将它绑定到模型的属性上，它可以工作。

```
@Html.DropDownListFor(Function(m) m.Profile, New SelectList(Items, "Value", "Text", Model.Profile)) 
```

# google-app-engine - 文件无法访问，无法在谷歌应用引擎上导入库

> ID：14371127
> 
> 赞同：0
> 
> 时间：2013-01-17T02:07:07.230
> 
> 标签：google-app-engine

好吧，我放弃了。当我在谷歌应用引擎上运行我的 web2py 应用程序时，我无法修复错误消息。我有下一个输出：

```
WARNING  2013-01-17 01:59:14,379 py_zipimport.py:139] Can't open zipfile 
/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg: 
IOError: [Errno 13] file not accessible: '/usr/local/lib/python2.7/dist-
packages/setuptools-0.6c11-py2.7.egg'

WARNING  2013-01-17 01:59:14,380 py_zipimport.py:139] Can't open zipfile 
/usr/local/lib/python2.7/dist-packages/utils-0.1-py2.7.egg: IOError: [Errno 
13] file not accessible: '/usr/local/lib/python2.7/dist-packages/utils-
0.1-py2.7.egg'

ERROR    2013-01-17 01:59:14,490 dev_appserver_import_hook.py:1251] Third 
party package Crypto must be included in the "libraries:" clause of your 
app.yaml file in order to be imported.

WARNING  2013-01-17 01:59:14,727 dev_appserver_import_hook.py:557] Blocking 
access to skipped file "/home/michael/webdev/web2py/gluon/rocket.py" 
```

我厌倦了将 Crypto 库添加到 app.yaml 但 GAE 不支持它。另外，我不明白为什么“文件不可访问”。有什么想法吗？

编辑我的 app.yaml 文件是：

```
application: wormsapp
version: 1
api_version: 1

# use this line for Python 2.5
#
#runtime: python

# use these lines for Python 2.7
# upload app with: appcfg.py update web2py (where 'web2py' is web2py's root     directory)
#
runtime: python27
threadsafe: true    # true for WSGI & concurrent requests (Python 2.7 only)

default_expiration: "24h"   # for static files

handlers:

- url: /(?P<a>.+?)/static/(?P<b>.+)
  static_files: applications/\1/static/\2
  upload: applications/(.+?)/static/(.+)
  secure: optional

#- url: /favicon.ico
#  static_files: applications/welcome/static/favicon.ico
#  upload: applications/welcome/static/favicon.ico

- url: /favicon.ico
  static_files: applications/crowdrandk/static/favicon.ico
  upload: applications/crowdrank/static/favicon.ico

- url: /robots.txt
  static_files: applications/welcome/static/robots.txt
  upload: applications/welcome/static/robots.txt

- url: .*
#  script: gaehandler.py         # CGI
  script: gaehandler.wsgiapp    # WSGI (Python 2.7 only)
  secure: optional

admin_console:
  pages:
  - name: Appstats
    url: /_ah/stats

skip_files: |
 ^(.*/)?(
 (app\.yaml)|
 (app\.yml)|
 (index\.yaml)|
 (index\.yml)|
 (#.*#)|
 (.*~)|
 (.*\.py[co])|
 (.*/RCS/.*)|
 (\..*)|
 (applications/(admin|examples)/.*)|
 ((admin|examples|welcome)\.(w2p|tar))|
 (applications/.*?/(cron|databases|errors|cache|sessions)/.*)|
 ((logs|scripts)/.*)|
 (anyserver\.py)|
 (web2py\.py)|
 ((cgi|fcgi|modpython|wsgi)handler\.py)|
 (epydoc\.(conf|css))|
 (httpserver\.log)|
 (logging\.example\.conf)|
 (route[rs]\.example\.py)|
 (setup_(app|exe)\.py)|
 (splashlogo\.gif)|
 (parameters_\d+\.py)|
 (options_std.py)|
 (gluon/tests/.*)|
 (gluon/(rocket|winservice)\.py)|
 (contrib/(gateways|markdown|memcache|pymysql)/.*)|
 (contrib/(populate|taskbar_widget)\.py)|
 (google_appengine/.*)|
 (.*\.(bak|orig))|
 )$

builtins:
- remote_api: on
- appstats: on
- admin_redirect: on
- deferred: on

libraries:
- name: numpy
  version: "latest"
- name: setuptools
  version: "latest" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:26:49.050

将此添加到库中：

```
- name: pycrypto
  version: "2.6" 
```

或者

```
 - name: pycrypto
   version: latest 
```

它应该工作。

# css - 自动边距不起作用

> ID：14371128
> 
> 赞同：0
> 
> 时间：2013-01-17T02:07:15.670
> 
> 标签：css, centering

我的 li 中的文本似乎没有居中我正在使用 margin: 10px auto; 它不工作，我也尝试使用 margin: 0 auto 将整个 ul 居中，但这也不起作用这里是 css

```
ul.mainpackages {margin: 0 auto; height: 40px; width: 100%; }
ul.mainpackages li {
    border-top-width: 4px;
    border-bottom-width: 4px;
    border-top-style: double;
    border-bottom-style: double;
    border-top-color: #FDFECD;
    border-bottom-color: #FDFECD;
    height: 40px;
    width: 300px;
    background-color: #DDEFEF;
    display: inline-block;
    margin: 0px 60px;
}
ul.mainpackages li p{
    margin: 10px auto;
    font-size: 16px;
} 
```

和html

```
<ul class="mainpackages">
<li class="first1"><p>Pick a package that suits you!</p></li>
<li class="last1"><p>Special deals &amp; offers!</p></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T03:24:27.737

您的段落是 100% 宽的，所以当您尝试将其居中时...

您应该在段落内设置宽度或 text-align: center

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T02:14:00.607

您需要`<p>`在使用前明确指定宽度`margin: 0 auto;`

```
ul.mainpackages li p{
margin: 10px auto;
font-size: 16px;
width: 180px;
} 
```

[jsfiddle](http://jsfiddle.net/bWN9V/)

# ios - UITabBar 元素之间的空白？

> ID：14371129
> 
> 赞同：3
> 
> 时间：2013-01-17T02:07:47.383
> 
> 标签：ios, cocoa-touch, uitabbar

我的 UITabBar 有问题：

这是它在不同状态下的样子：

![在此处输入图像描述](../Images/4f4499921ad1a78254d3a9f807cf3ee8.png)

如您所见，我的元素之间和侧面几乎没有空白区域：

![在此处输入图像描述](../Images/53ce5f20134bc0e2776caabce6d70711.png)

我的问题是为什么不像在 App Store 应用程序中那样，您没有侧面或元素之间的间隙？

![在此处输入图像描述](../Images/1be692997b187ee9d7321e83fff70f32.png) ![在此处输入图像描述](../Images/9986065564264c65e8ba9c5dc6827b15.png)

这就是我改变标签栏外观的方式，背景图像没有任何分隔符：

```
[[UITabBar appearance] setBackgroundImage:[UIImage imageNamed:@"UITabBarBG"]]; 
```

由于我的差距，按照这里解释的方法不起作用： [http ://blog.erikvdwal.nl/blog/2012/09/25/customizing-the-uitabbar-in-ios-5-and-ios -6/](http://blog.erikvdwal.nl/blog/2012/09/25/customizing-the-uitabbar-in-ios-5-and-ios-6/)

任何帮助都会有所帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:11:25.383

如果你让你的图像更大，你就不会遇到这个问题，如果你想要与 AppStore 应用程序中相同的分隔符，它们甚至可以重叠。

请参阅[如何将自定义分隔线图像添加到 UITabBar？](https://stackoverflow.com/questions/12572165/how-can-i-add-a-custom-divider-image-to-the-uitabbar)

# android - Android 简单动画 - 绕 X 轴旋转 90 度

> ID：14371135
> 
> 赞同：0
> 
> 时间：2013-01-17T02:09:03.483
> 
> 标签：android, animation, 3d, rotation, scale

我将视图围绕 X 轴旋转 90 度。（即，看起来视图正朝着用户的方向从屏幕上掉下来）。

1.  我扩展了动画，在 applyTransformation() 中，我做了

    ```
    protected void applyTransformation(float interpolatedTime, Transformation t) {
    final float fromDegrees = mFromDegrees;
    float degrees = fromDegrees + ((mToDegrees - fromDegrees) * interpolatedTime);

    final float centerX = mCenterX;
    final float centerY = mCenterY;
    final Camera camera = mCamera;

    final Matrix matrix = t.getMatrix();

    camera.save();
    camera.rotateX(degrees);
    camera.getMatrix(matrix);
    camera.restore();

    matrix.preTranslate(-centerX, -centerY);

    matrix.setScale(0.75f, 0.75f);  // doesn't do anything

    matrix.postTranslate(centerX, centerY); 
    ```

    }

效果很好，我得到了我想要的动画。

我还想在动画时稍微减小视图的大小。

我认为这会做到（在上面代码中显示的位置）。

```
 matrix.setScale(0.75f, 0.75f);  // doesn't do anything 
```

但这似乎没有任何效果。

如何在动画期间缩小视图的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:26:51.887

尝试使用 matrix.preScale(x,x,x,x);

# ruby-on-rails-3 - 导轨 使用 Kaminari 在每一页重置数字

> ID：14371136
> 
> 赞同：0
> 
> 时间：2013-01-17T02:09:08.333
> 
> 标签：ruby-on-rails-3, pagination, will-paginate, kaminari

有一个类似于 HackerNews 的新闻报道显示，它使用`<ol>`标签进行编号和投票排名。当尝试使用 Kaminari gem 进行分页时`<li>`，每篇文章的编号会在每页上重置为 1-20。

我试过使用 CSS 计数器重置和计数器增量，但我还不能让它工作。我还尝试为每个页面手动添加计数器重置，但如果网站以某种方式看到超过 5 个页面，我将不得不手动编码增量，这是不可能的。

我想知道是否有一个js解决方案。

**这是我的stories_controller**的 index 方法：

```
def index
    if params[:sort] && params[:sort].to_sym == :newest
      @stories = Story.order("created_at DESC").page(params[:page]).per(20)
    else
      @stories = Story.order('karma DESC').page(params[:page]).per(20)
    end
end 
```

这是我的故事**index.html.haml**：

```
%ol
  - @stories.each do |story|
    = render partial: 'story', locals: { story: story, tag_type: :li }
= paginate @stories 
```

和上面的**_story.html.haml**部分：

```
= content_tag defined?(tag_type) ? tag_type : :div, class: 'story' do
  = link_to "⇧", upvote_story_url(story), class: 'upvote', method: :post
  %div
    .title
      = link_to story.title.titlecase, story.url
      %span.link-domain (#{story.url_domain})
    .metadata
      = statusline story
      |
      = link_to 'comments', story, class: 'comments-link'
      = "(#{story.comments.all.count})" 
```

最后是我的相关 CSS：

```
ul, ol {
    margin: 0 1.5em 1.5em 0;
    padding-left: 2.0em;
    counter-reset: section;
    li {
      margin: 10px;
    }
  }

  li {
    float: top;
    counter-increment: section;
  } 
```

提前感谢您的任何帮助或新想法！

**编辑：**

通过取出有序列表标签并切换到列表样式类型设置为无以删除项目符号的无序列表来修复此问题。

这是我在haml视图中使用的代码：

```
- if params[:page].nil? || params[:page] == "0" || params[:page] == "1"
    - x = 0
  - else
    - page = params[:page].to_i - 1
    - x = page * 15

  - @stories.each_with_index do |story, index|
    = content_tag defined?(tag_type) ? tag_type : :div, class: 'story' do
      %li
        .title
          .story_number
            = index + x + 1
          = etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:00:52.527

修复了上面编辑中的问题..

# spotify - 使用 Spotify 的自定义模块 require()

> ID：14371140
> 
> 赞同：0
> 
> 时间：2013-01-17T02:09:25.353
> 
> 标签：spotify

[Spotify 文档](https://developer.spotify.com/technologies/apps/docs/preview/api/global.html#require)声明您可以定义自定义模块，但我找不到任何有关如何编写它们的文档。我假设它是 manifest.json 文件中的更改和编写 AMD 模块（如[RequireJS](http://requirejs.org/)）的某种组合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:40:18.833

您可以使用以下方法创建自己的模块。

创建一个模块，导出您想要访问的某些变量或函数。例如，您可以有一个`js/myModule.js`导出`init`函数的文件：

```
exports.init = function() { ... }; 
```

然后，在另一个文件中，您可以使用`require`通常用于包含来自 Spotify API 的模块的函数来要求它：

```
var sp = getSpotifyApi(),
    models = sp.require("$api/models"),
    views = sp.require("$api/views"),
    myModule = sp.require("/js/myModule");

myModule.init(); 
```

# css - 为什么无样式输入文本的边框宽度为 2px？

> ID：14371145
> 
> 赞同：2
> 
> 时间：2013-01-17T02:09:54.853
> 
> 标签：css, browser, border, default, textinput

我有以下 HTML 标记，导致文本类型的输入表单元素。

```
<!DOCTYPE html>
<html>
    <body>
        <input type="text" />
    </body>
</html> 
```

在一个像样的浏览器中，它呈现如下屏幕截图（在右侧的缩放图像）：

![样本](../Images/9d1b6cd8d85433de9bd8ae2713d8cc50.png)

那么，为什么在检查`<input>`元素时浏览器显示的边框宽度为**2px**？我们可以*直观地*看出输入元素有**1 个像素**。即使使用 jQuery，当我做类似的事情时`jQuery('input').css('border-width')`它也会吐出**2px**。

当然，这只发生*在无样式的表单输入元素*中。

我还创建了一个 JsFiddle 演示：http: [//jsfiddle.net/HBDUZ/](http://jsfiddle.net/HBDUZ/)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T02:14:00.390

每个浏览器都有一个内置样式表（称为“用户代理样式表”），其中包含某些元素的默认样式。

在这种情况下（Chrome 25 beta-m，Windows），样式为：

```
border: 2px inset; 
```

的结果在此[JSFiddle](http://jsfiddle.net/c5UQM/)`inset`中确实可见，具有对比鲜明的背景颜色。

# ruby-on-rails - 如何跨路由、控制器和视图设置 Rails 动态段？

> ID：14371147
> 
> 赞同：1
> 
> 时间：2013-01-17T02:10:16.370
> 
> 标签：ruby-on-rails

我有两个模型叫做`Album`and `Photo`。我希望将照片编辑为以下格式的 url：

```
/photos/:album_id/:photo_id/edit/

/photos/5/2/edit/ 
```

在哪里：

```
album_id = 5
photo_id = 2 
```

如何在路由、控制器和视图中设置上述内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:54:07.693

除非您以指定的格式特别需要它，否则 Rails 约定使用以下 URL 格式：

```
/albums/:album_id/photos/:id 
```

在您的路线中，您将拥有：

```
resources :albums do
   resources :photos
end 
```

然后你可以在你的照片控制器中使用

```
def show
   album = Album.find(params[:album_id])
   @photo = album.photos.find(params[:id])
end 
```

# php - 提交按钮不起作用？

> ID：14371151
> 
> 赞同：0
> 
> 时间：2013-01-17T02:10:38.173
> 
> 标签：php, html, forms, button

我有这个小测试页面试图弄乱并找出PHP代码，据我所知，在填写表格并点击提交后，应该会发生一些事情。取决于你输入的内容。

```
<!DOCTYPE html>
<html>
<head>
    <title>PHP Testing Page</title>
</head>
<body>
    <?php
        echo "Testing Page, working great!\n";
        $theDate = date("M-d-Y ");
        echo "Today is " . $theDate;
        $email1 = $_POST['email1'];
        $email2 = $_POST['email2'];
        function checkEmail()
        {
            $email1 = $_POST['email1'];
            $email2 = $_POST['email2'];
            echo $email1;
            echo $email2;
                if($email1==$email2)
                {
                    echo "\nE-Mail Addresses match.";
                }
                else
                {
                    echo "\nCheck to make sure your E-Mails match";
                }
            }
        ?>
        <form name="checkingEmail" action="." method="post">
            E-Mail: <input type="text" name="email1" value="E-Mail Here" />
            <br />
            Retype E-Mail: <input type="text" name="email2" value="Confirm E-Mail" />
            <br />
            <input type="button" value="Submit" onClick="checkEmail()">
        </form>
    </body>
</html> 
```

填写表格（通过访问页面）并单击提交按钮后，没有任何反应。有人可以解释一下吗？

****** *** ** *** *****编辑****** ** *** **已***修复******* 找到解决方法！没有功能，就像一个魅力。**

 **```
<!DOCTYPE html>
<html>
<head>
    <title>PHP Testing Page</title>
</head>
<body>
    <?php
        echo "Testing Page, working great!\n";
        $theDate = date("M-d-Y ");
        echo "Today is " . $theDate;
    ?>
    <form name="checkingEmail" action="test.php" method="post">
        E-Mail: <input type="text" name="email1" value="E-Mail Here" />
        <br />
        Retype E-Mail: <input type="text" name="email2" value="Confirm E-Mail" />
        <br />
        <input type="submit" value="Submit">
    </form>
    <?php 
    $email1 = $_POST["email1"];
    $email2 = $_POST["email2"];
    if($email2==null)
    {
/*I believe this just stops it from checking the rest of the conditions, that
        way it won't echo anything until someones enters valid (non-null) input*/
        $email2 = "notnull";
    }
    else if($email1==$email2)
    {
        echo "Good Job.";
    }
    else
    {
        echo "Failure to comply.";
    }
    ?>
</body> 
```

我有一个函数之外的检查，所以我不必调用它或类似的东西。此外，对于第一个 if 语句，如果 $email2 为空（当他们第一次加载它时），它只会将 $email2 更改为“notnull”并停止检查语句，因为它找到了一个有效的语句。（不是 100%）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T02:12:02.157

你的提交按钮在哪里？

```
<input type="button" value="Submit" onClick="checkEmail()">
               ^ 
```

类型应该是`submit`

正如此答案评论中所述，您不能从 javascript 调用 php 函数。

当您这样做时，您将从`checkEmail`未定义的 javascript 调用。
因此，您将收到以下错误：

```
Uncaught ReferenceError: checkEmail is not defined 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:13:14.917

类型应提交；

如果你把它改成提交，然后运行它，应该没问题。您应该将提交类型与表单元素一起使用。**

# objective-c - [__NSArrayI replaceObjectAtIndex:withObject:]: 无法识别的选择器发送到实例

> ID：14371152
> 
> 赞同：4
> 
> 时间：2013-01-17T02:10:43.497
> 
> 标签：objective-c, cocoa, nsmutablearray

我有一个 NSMutableArray，我需要尝试它的值，但是我有这个错误：
**[__NSArrayI replaceObjectAtIndex:withObject:]: unrecognized selector sent to instance 0x5291db0**
这是我的 NSMutableArray 的声明：

```
NSMutableArray *selectedOptions = [NSArray arrayWithObjects:[NSNumber numberWithInteger:0], nil]; 
```

然后，我使用 replaceObjectAtIndex 方法，这样：

```
[self.selectedOptions replaceObjectAtIndex:0 withObject:[NSNumber numberWithInteger:1]]; 
```

但我得到了那个错误，我正在使用 NSMutableArray。
谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T02:12:14.897

您正在创建一个常规的 non-mutable `NSArray`。你的代码应该是

```
NSMutableArray *selectedOptions = [NSMutableArray arrayWithObjects:[NSNumber numberWithInteger:0], nil]; 
```

Objective C 是非常动态的，所以它不会在编译时发现这个错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T02:11:50.453

你需要`NSMutableArray`通过做初始化你的

```
NSMutableArray *selectedOptions = [NSMutableArray alloc] init]; 
```

通过使用 初始化它`NSArray`，您将无法再使用该`repalceObjectAtIndex:withObject:`方法，这就是您的问题的原因。

用上面的行初始化你之后`NSMutableArray`，只需使用`addObject`方法向它添加对象。

# ruby-on-rails - Redis 在控制台上工作，但在应用程序中失败

> ID：14371154
> 
> 赞同：0
> 
> 时间：2013-01-17T02:11:07.957
> 
> 标签：ruby-on-rails, heroku, redis, redistogo

我`split`在 Heroku 上托管的 RoR 应用程序中使用 Redis 和 gem。

我已经使用以下代码使用 RedisToGo 对其进行了配置：

**/config/initializers/redis.rb**

```
uri = URI.parse(ENV["REDISTOGO_URL"] || "redis://localhost:6379/" )
REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password) 
```

**/config/application.rb**

```
config.gem 'redis' 
```

当我尝试

```
REDIS.set("foo","bar") 
```

在 Heroku 控制台上，它工作正常。它显示 Redis ToGo 地址。

但是，当我尝试加载应用程序时，出现以下错误：

```
Errno::ECONNREFUSED: Connection refused - Unable to connect to Redis on localhost:6379 
```

如何`REDIS`正确响应，在 Heroku 控制台中使用正确的地址，但在应用程序调用它时显示 localhost 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:28:32.663

我能够修复它，我会让解决方案注册：

我没有初始化`Split.redis`，因此它试图创建一个默认的`Redis`，它以 localhost 作为主机。

所以我创建了以下初始化程序

**/config/initializers/split.rb**

```
Split.redis = REDIS 
```

然后Split可以找到它！

# python - Pytest 和 Python 3

> ID：14371156
> 
> 赞同：61
> 
> 时间：2013-01-17T02:11:28.927
> 
> 标签：python, python-3.x, pytest

我已经在 Debian Linux 下安装了 pytest 2.3.4。默认情况下它在 Python 2.7 下运行，但有时我想在 Python 3.x 下运行它，它也已安装。我似乎找不到任何关于如何做到这一点的说明。

PyPI Trove 分类器显示 Python :: 3 所以推测它一定是可能的。除了`py.test somedir/sometest.py`, 我 可以 使用`python -m pytest ...`, 甚至`python2.7 -m pytest ...`, 但 如果 我 尝试`python3 -m pytest ...`我 得到

`/usr/bin/python3: No module named pytest`

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-17T03:36:24.717

我找到了解决方法：

1.  `python3-pip`使用 aptitude安装，它创建了`/usr/bin/pip-3.2`.
2.  接下来`pip-3.2 install pytest`重新安装pytest，但在python3.2路径下。
3.  然后我就可以使用了`python3 -m pytest somedir/sometest.py`。

不如直接运行 py.test 方便，但可行。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-17T03:09:57.487

python3 没有安装模块 py.test 。如果可以，请安装该`python3-pytest`软件包。

如果你不能这样做，试试这个：

1.  安装虚拟环境
2.  为python3创建一个virtualenv
    *   `virtualenv --python=python3 env_name`
3.  激活虚拟环境
    *   `source ./env_name/bin/activate`
4.  安装 py.test
    *   `pip install py.test`
5.  现在使用这个 virtualenv 尝试运行你的测试

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-02-20T14:48:28.257

这对我有用：

```
python3 $(which py.test) ... 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-22T08:39:43.590

除了上述之外`python3 -m pytest`，这也可能有效：

```
env pytest 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-01-29T13:32:04.560

使用 pip3 安装它： `pip3 install -U pytest`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-28T23:54:30.890

Debian Linux 有 python3-pytest 包，如果安装了，你可以简单地运行：

```
/usr/bin/pytest-3 
```

# c# - 为什么我的 NHibernate 会话有时只能在 Windows 服务中使用？

> ID：14371160
> 
> 赞同：1
> 
> 时间：2013-01-17T02:11:53.947
> 
> 标签：c#, nhibernate, session, threadpool, structuremap

这是使用流利的 StructureMap 的 NH 的相关配置

```
ISessionFactory sessionFactory = fluentConfig.BuildSessionFactory();

For<Configuration>().LifecycleIs(new HybridLifecycle()).Singleton().Use(configuration);

For<ISessionFactory>().LifecycleIs(new HybridLifecycle()).Singleton().Use(sessionFactory);

For<ISession>().LifecycleIs(new ThreadLocalStorageLifecycle())
            .Use(x => x.GetInstance<ISessionFactory>().OpenSession());

For<IUnitOfWork>().LifecycleIs(new ThreadLocalStorageLifecycle())
            .Use<UnitOfWork>(); 
```

NH 会话被封装在一个 UnitOfWork 对象中。

在我的 Windows 服务中，每次我访问会话时，它都在一个线程池线程中，它像这样调用会话：

```
unitOfWork = ObjectFactory.GetInstance<IUnitOfWork>();
  ...
  //Init repositories with the unitOfWork
  //Have repos do their thing
  ...
unitOfWork.Commit();
unitOfWork.Dispose(); 
```

当我测试上述功能时，它总是在我第一次启动应用程序时工作，但在任何其他时间随机工作。它不起作用的时间，是因为会话为空。我发现如果我在上一次通话结束后等待大约 30 秒，下一次通话就会成功。

为什么会这样做？我正在尝试配置每个线程的会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:16:26.933

我会做两件事，

1.  连接 Nlog 并在 Windows 服务方法中输出一些跟踪代码
2.  连接 NHProf 并确保会话在您的 UOW 周围正确打开和关闭。

当我遇到会话问题时，​​我发现 NHProf 非常宝贵，它从未让我失望。

可以试用[NHProf](http://www.hibernatingrhinos.com/products/nhprof) 30天，[Nlog](http://nlog-project.org/)是OSS

# .net - 将 TaskContinuationOptions 应用于“步骤”而不是整个链

> ID：14371166
> 
> 赞同：3
> 
> 时间：2013-01-17T02:12:14.553
> 
> 标签：.net, task-parallel-library

给定以下代码：

```
// TCO = TaskContinuationOptions
FirstAsyncMethod()
    .ContinueWith(t => SecondAsyncMethod(t.Result), TCO.OnlyOnRanToCompletion)
    .ContinueWith(t => HandleErrors(t)); 
```

如果我按原样执行它并`FirstAsyncMethod`引发异常，`HandleErrors`则永远不会调用它，因为`TaskContinuationOptions`on`SecondAsyncMethod`会停止整个链。

另一方面，如果我删除`TaskContinuationOptions`on `SecondAsyncMethod`，访问`Task.Result`会导致一个*作为原始 AggregateException 的 InnerException*`AggregateException`被抛出。在我的实际代码中，这会产生一个需要展开的荒谬层次结构。

 *我没有捕获（即链） , 的结果`ContinueWith`，在这`HandleErrors`之前被调用，`SecondAsyncMethod`这显然是一个问题。

有没有办法应用`TaskContinuationOptions`到 a`ContinueWith`以便它只可能跳过该步骤，而不是任何后续步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:53:58.910

我通过将我的 HandleErrors 添加到链中的所有任务来解决这个问题，但使它们以父任务故障为条件。

```
Task task1 = new Task(FirstAsyncMethod());
Task task2 = task1.ContinueWith(t => SecondAsyncMethod(t.Result), TCO.OnlyOnRanToCompletion);

task1.ContinueWith(t => HandleErrors(t), TCO.OnlyOnFaulted);
task2.ContinueWith(t => HandleErrors(t), TCO.OnlyOnFaulted); 
```*

# javascript - location.href 没有在 jquery 事件中重定向

> ID：14371170
> 
> 赞同：1
> 
> 时间：2013-01-17T02:12:57.170
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 javascript、jquery 和 jquery mobile。我有这个：

```
$(document).ready(function() {
    $("#routes").change(function(){
        var newValue = $("#routes").val();
        if(newValue != -1){
            newLocation="http://localhost:8080/map.jsp?route="+newValue ;
            window.location.href=newLocation;
        }
    });
}); 
```

但是 location.href 并没有重定向我。

有任何想法吗？

编辑：

我得到了这个并且它现在可以工作了，我现在的问题是 map.jsp 不会执行 .ready 事件：

```
 $.mobile.changePage('/map.jsp', {
            reloadPage: true,
            type: "get",
            data: 'route='+newValue
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:12:50.363

根据霍根的回答，他是对的，只需使用

`window.location = newLocation; return false;` 因为我遇到了同样的问题并且只使用**window.location**解决了我的问题。

您可能需要寻找的另一件事是 # 在我不知道的 url 末尾，但在 url 末尾有 # 在您使用时不会重定向`window.location`。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:15:07.407

只用

```
window.location=newLocation; 
```

# node.js - 加快 Heroku 上的部署

> ID：14371174
> 
> 赞同：12
> 
> 时间：2013-01-17T02:13:51.303
> 
> 标签：node.js, heroku, express, npm

Heroku很棒。但是每次我部署时，Heroku 似乎都喜欢重新下载并重建所有包。这`socket.io`大约`mailparser`需要 3 分钟。

有没有办法加快部署过程？有没有办法告诉 Heroku 它可以缓存这些项目？或者我可以上传预建的`node_modules`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-02T19:43:38.420

从今天开始，Heroku 似乎终于缓存了该`node_modules`文件夹！

> -----> 删除 6 个匹配 .slugignore 模式的文件。
> 
> -----> 检测到 Node.js 应用程序
> 
> -----> 请求的节点范围：0.10.x
> 
> -----> 已解决节点版本：0.10.22
> 
> -----> 下载安装节点
> 
> **-----> 从缓存中恢复 node_modules**
> 
> -----> 安装依赖
> 
> -----> 修剪未使用的依赖项
> 
> **-----> 为将来的构建缓存 node_modules 目录**
> 
> -----> 清理 node-gyp 和 npm 工件

构建时间对我来说现在是 3 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:02:31.127

我为加快进程所做的一件事是将 .slugignore 文件添加到主文件夹并添加我不想运行应用程序的所有文件和文件夹。

.slugignore 文件的示例内容：
工作
模型
*.psd
*.pdf

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-11T11:11:24.753

我遇到了同样的问题。

这里有一些关于缓存`node_modules`文件夹的讨论：[https ://github.com/heroku/heroku-buildpack-nodejs/pull/37](https://github.com/heroku/heroku-buildpack-nodejs/pull/37)

另一个想法：[https ://github.com/heroku/heroku-buildpack-nodejs/issues/25](https://github.com/heroku/heroku-buildpack-nodejs/issues/25)

* * *

我现在正在考虑一些解决方案。

1.  **签入`node_modules`一个单独的分支**：核心 Node.js 维护人员实际上建议将该`node_modules`文件夹签入源代码控制（对于应用程序，而不是库）。我不喜欢这个。解决它的一种方法可能是有一个单独的`production`分支，其中包含一个`.gitignore`不忽略的不同文件`node_modules`。当你想部署时，只需从你的主分支做一个 rebase 并且`node_modules`将被签入。至少这可以让你的主分支免受依赖。

2.  **添加`preinstall`脚本以`package.json`下载压缩的依赖项 zip**：您还可以添加一个 pre-push git 挂钩来捆绑您的依赖项并将它们上传到 S3。不过，这可能太慢了。

3.  **修改`heroku-buildpack-nodejs`**：将未完成的拉取请求与`node_modules`缓存集成：

    `heroku config:set BUILDPACK_URL=https://github.com/opdemand/buildpack-nodejs.git`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-03T14:27:24.517

我有同样的问题（请参阅[在 Heroku 上每次部署后避免 npm 刷新](https://stackoverflow.com/questions/10698652/avoid-npm-refresh-after-every-deployment-on-heroku)）。

Heroku 强制下载/构建/等。顺序，因为他们需要以“空白板”启动应用程序：清理以前未删除的文件，当他们将您的应用程序移动到另一台服务器时，当您分配新的网络测功机时，等等。

问题显然在于本机包和重新编译。对于所有仅 js 的包，我将它们与我的项目一起提交，并将它们从 package.json 中删除。它增加了几秒钟，但不是那么多。

如果您可以访问具有相同配置的 Linux 机器（或 VM），我绝对应该可以预编译和提交本机模块（例如，我在 Heroku 上成功运行 wkhtml2pdf，使用为 linux-amd64 编译的二进制文件） - 从今天开始，`Linux [...] 2.6.32-350-ec2 #57-Ubuntu SMP [...] x86_64 GNU/Linux`.

尽管我不建议将其作为最终解决方案，因为它可能有一天会中断 - 在我看来，heroku 并不保证应用程序运行的平台。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-30T14:43:01.147

似乎[heroku-buildpack-nodejs](https://github.com/heroku/heroku-buildpack-nodejs/pull/43)最近取得了进展。

合并拉取请求后，您可以添加

`heroku config:set BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-nodejs`

到你的[heroku 环境变量](https://devcenter.heroku.com/articles/config-vars)。

目前，David Dollar 的分叉存储库可在

`https://github.com/ddollar/heroku-buildpack-nodejs`

有了它，`BUILDPACK_URL`它应该缓存 npm 模块。我尝试使用 node.js 0.10.5a，npm 版本：1.3.5 和`.gitignore`. 到目前为止，Tt 似乎工作正常！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-14T18:21:00.713

查看新 Heroku Node.js buildpack 的这个分支，现在处于 beta 阶段，它支持构建之间的 node_modules 缓存：

[https://github.com/heroku/heroku-buildpack-nodejs/tree/diet](https://github.com/heroku/heroku-buildpack-nodejs/tree/diet)

要使用它：

```
heroku config:set BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-nodejs#diet -a my-node-app
git commit -am "fakeout" --allow-empty
git push heroku 
```

# php - 如何将激活链接发送给注册用户？

> ID：14371175
> 
> 赞同：5
> 
> 时间：2013-01-17T02:13:52.583
> 
> 标签：php

我之前已经问过这个问题，但我似乎从未了解它是如何工作的（我尝试了很多但根本没有成功）有人可以告诉我如何在注册时向用户电子邮件地址发送激活链接并且不允许用户，直到他们通过点击电子邮件地址中的链接激活他们的帐户？我该怎么办？完全看不懂。。。求大神帮忙。。。

**我`users`在数据库表中的内容：**

```
1   id          int(11)       AUTO_INCREMENT    
2   username    varchar(255)        
3   password    char(64)    
4   salt        char(16)    
5   email       varchar(255) 
```

**注册.php**

```
// First we execute our common code to connection to the database and start the session 
 require("common.php"); 

// This if statement checks to determine whether the registration form has been submitted 
// If it has, then the registration code is run, otherwise the form is displayed 
if(!empty($_POST))
{ 
// Ensure that the user has entered a non-empty username 
if(empty($_POST['username']))
{ 
    echo "Please enter a username."; 
}

// Ensure that the user has entered a non-empty password 
if(empty($_POST['password']))
{ 
    die("Please enter a password."); 
} 

// Make sure the user entered a valid E-Mail address 
// filter_var is a useful PHP function for validating form input, see:
if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) 
{ 
    die("Invalid E-Mail Address"); 
} 

$query = " 
    SELECT 
        1 
    FROM users 
    WHERE 
        username = :username 
"; 

$query_params = array( 
    ':username' => $_POST['username'] 
); 

try 
{ 
    // These two statements run the query against your database table. 
    $stmt = $db->prepare($query); 
    $result = $stmt->execute($query_params); 
} 
catch(PDOException $ex) 
{ 
    // Note: On a production website, you should not output $ex->getMessage(). 
    // It may provide an attacker with helpful information about your code.  
    die("Failed to run query: " . $ex->getMessage()); 
} 

$row = $stmt->fetch(); 

if($row) 
{ 
    die("This username is already in use"); 
} 

// Now we perform the same type of check for the email address, in order 
// to ensure that it is unique. 
$query = " 
    SELECT 
        1 
    FROM users 
    WHERE 
        email = :email 
"; 

$query_params = array( 
    ':email' => $_POST['email'] 
); 

try 
{ 
    $stmt = $db->prepare($query); 
    $result = $stmt->execute($query_params); 
} 
catch(PDOException $ex) 
{ 
    die("Failed to run query: " . $ex->getMessage()); 
} 

$row = $stmt->fetch(); 

if($row) 
{ 
    die("This email address is already registered"); 
} 

// An INSERT query is used to add new rows to a database table. 
// Again, we are using special tokens (technically called parameters) to 
// protect against SQL injection attacks. 
$query = " 
    INSERT INTO users ( 
        username, 
        password, 
        salt, 
        email 
    ) VALUES ( 
        :username, 
        :password, 
        :salt, 
        :email 
    ) 
"; 

$to = "email";
$subject = "Your Account Information!";
$body = <<<EMAIL
Hello {'email'}, here is your account information!

Username:{'username'}
Password:{'password'}

Please activate your account by clicking the following activation link:
http://www.mywebsite.com/activate.php?aid={$aid}

EMAIL;

$headers = 'From: noreply@yourdomain.com' . "\r\n" .
'Reply-To: noreply@yourdomain.com' . "\r\n" .
'X-Mailer: PHP/' . phpversion();

if(mail($to, $subject, $body, $headers)){
echo("<p>Your account information was successfully sent to your email - ('email')! <br><br>Please open your    email and click the activation link to activate your account.</p><br><p>If you do not see your account information in your inbox within 60 seconds please check your spam/junk folder.</p>");
} else {
   echo("<p> Unfortunately, your account information was <u>unsuccessfully</u> sent to  your email - ('email'). </p>");
}

$salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647)); 

$password = hash('sha256', $_POST['password'] . $salt); 

for($round = 0; $round < 65536; $round++) 
{
    $password = hash('sha256', $password . $salt); 
}

$query_params = array( 
    ':username' => $_POST['username'], 
    ':password' => $password, 
    ':salt' => $salt, 
    ':email' => $_POST['email'] 
); 

try
{ 
    // Execute the query to create the user 
    $stmt = $db->prepare($query); 
    $result = $stmt->execute($query_params); 
}
catch(PDOException $ex)
{ 

}
header("Location: login.php"); 
die("Redirecting to login.php"); 
}
?> 
<h1>Register</h1> 
<form action="" method="post"> 
Username:<br /> 
<input type="text" name="username"  required value="" /> 
<br /><br /> 
E-Mail:<br /> 
<input type="text" name="email" required value="" /> 
<br /><br /> 
Password:<br /> 
<input type="password" required  name="password" value="" /> 
<br /><br /> 
<input type="submit"  value="Register" /> 
</form> 
```

**登录.php**

```
<?php 

// First we execute our common code to connection to the database and start the session 
require("common.php"); 

$submitted_username = '';
if(!empty($_POST)) 
{ 
$query = " 
    SELECT 
        id, 
        username, 
        password, 
        salt, 
        email 
    FROM users 
    WHERE 
        username = :username 
"; 

// The parameter values 
$query_params = array( 
    ':username' => $_POST['username'] 
); 

try 
{ 
    // Execute the query against the database 
    $stmt = $db->prepare($query); 
    $result = $stmt->execute($query_params); 
} 
catch(PDOException $ex) 
{ 
    die("Failed to run query: " . $ex->getMessage()); 
} 

$login_ok = false; 

$row = $stmt->fetch(); 
if($row) 
{ 

    $check_password = hash('sha256', $_POST['password'] . $row['salt']); 
    for($round = 0; $round < 65536; $round++) 
    { 
        $check_password = hash('sha256', $check_password . $row['salt']); 
    } 

    if($check_password === $row['password']) 
    { 
        $login_ok = true; 
    } 
} 

if($login_ok) 
{ 

    unset($row['salt']); 
    unset($row['password']); 

    $_SESSION['user'] = $row; 

    // Redirect the user to the private members-only page. 
    header("Location: private.php"); 
    die("Redirecting to: private.php"); 
} 
else 
{ 
    // Tell the user they failed 
    print("The Username/Password is invalid."); 

    $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8'); 
} 
} 

    ?> 
    <h1>Login</h1> 
    <form action="login.php" method="post"> 
Username:<br /> 
<input type="text" name="username" required value="<?php echo $submitted_username; ?>" /> 
<br /><br /> 
Password:<br /> 
<input type="password" name="password" value="" required /> 
<br /><br /> 
<input type="submit" value="Login" /> 
</form> 
<a href="register.php">Register</a> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T02:27:51.580

一方面，您没有通过电子邮件向用户发送此脚本中的任何内容。您应该做的是创建一个注册表并将值与令牌和日期时间一起存储在那里。一些基于 URL 的标识符。电子邮件和时间戳 concat 的简单 md5 可以正常工作。

```
$token = md5($_POST['email'].time()); 
```

然后通过电子邮件向用户发送链接 - 例如： [http ://www.yoursite.com/register/confirm?token=yourmd5token](http://www.yoursite.com/register/confirm?token=yourmd5token)

该脚本将从该令牌中获取存储的用户信息，确保日期时间在一个小时左右，然后仅在确认后将数据推送到用户表中，这样您就不会不必要地填充表。

根据您提供的代码，您并不是真正的 PHP 初学者。所以你应该没有问题谷歌搜索提到的事情的例子。因为通常 SO 用于快速帮助和基本 QA，所以这太复杂了，无法为您全部写出来。你的更像是一个完整的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:30:29.757

这是进行电子邮件验证的一种方法的概念性概述。这个问题仍然太高，无法在答案中添加任何实际代码。另外，请考虑这可能不是进行验证的最佳方式，只是一种简单的方式。

向数据库添加 2 列：

*   is_verified
*   验证令牌

在 login.php 中：

1.  创建用户时设置is_verified=0，并随机创建一个verification_token。
2.  创建用户后，使用令牌作为查询字符串参数构建到 verify.php 的链接。
3.  向包含链接的电子邮件地址发送电子邮件以进行验证
4.  将用户重定向到名为verificationWaiting.php 的页面，该页面会提醒他们检查电子邮件并单击链接。

创建一个名为 verify.php 的页面：

1.  检查数据库中查询字符串中的令牌，如果找到具有令牌的用户，则将 is_verified 标志设置为 true。
2.  将用户重定向到登录页面

修改 login.php 以确保用户已将 is_verified 设置为身份验证条件。

这只是对一种方法的广泛概述。您可以添加许多其他功能。希望这有助于您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:28:37.607

您有一些选择，您可以添加一个名为“活动”的新列，并将其默认为 0，直到用户单击生成的链接（例如，yoursite.com/activate.php?key=）

拥有密钥 = 类似于用户的电子邮件地址。

用户单击链接并输入他们之前注册时存档的密码后，您可以将活动列设置为 1。

第二个选项是生成一个随机密码，并要求用户从他/她的电子邮件中获取密码。因此需要一个有效的电子邮件地址。

# windows - windows驱动开发

> ID：14371177
> 
> 赞同：2
> 
> 时间：2013-01-17T02:13:57.053
> 
> 标签：windows, driver, device-driver, msdn, ndis

我是 Windows 驱动程序开发的新手，所以如果我的问题太愚蠢，请多多包涵。好吧，我不知道为什么，正如 MSDN 所建议的那样，以及我认为的方式，主机（例如开发驱动程序）和目标计算机（例如调试驱动程序）需要是两个独立的计算机。为什么要这样分离？我确实尝试通过在主机上部署和调试驱动程序来合并这两者，我正在其中开发一个驱动程序，并且它似乎在 Windows 没有反对意见的情况下工作。谢谢。

PS。像这样的来源[http://msdn.microsoft.com/en-us/library/windows/hardware/hh698272(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh698272(v=vs.85).aspx)让我这么想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:19:46.247

实际上，当您开发和测试驱动程序时，在许多情况下您会遇到系统崩溃 (BSOD) 并且您的系统可能无法启动。在这种情况下，您的开发 + 调试器环境也将消失/无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:38:31.950

内核调试需要两台独立的机器。由于明显的原因，您无法调试自我（调试器和被调试者在同一个内核中，并且出现死锁）。当然，目标机器可以是虚拟机器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-27T06:33:48.120

当我们开发驱动程序并对其进行测试时，系统会崩溃并出现蓝屏（称为 BSOD - 蓝屏死机）。这与开发用户模式应用程序不同，它由于内存错误而崩溃。您的驱动程序将作为内核模式应用程序运行，如果由于任何非法内存操作而崩溃，则整个系统都消失了。这不是一个简单的问题要解决，您需要登录到安全模式并从系统中删除驱动程序才能恢复它。

因此，最好使用目标机器，主要是安装驱动程序的 VM 和主机，我们将使用调试器来调试驱动程序。

# android - 检查Android MediaPlayer是否已经初始化

> ID：14371180
> 
> 赞同：2
> 
> 时间：2013-01-17T02:14:23.650
> 
> 标签：android, initialization, android-mediaplayer

如何检查`MediaPlayer`对象是否已初始化？有没有类似的东西：

```
MediaPlayer mp;
if(mp.isInitialized())
    Log.v("Test", "mp has been initialized. :D ");
else
    Log.v("Test", "mp is NOT yet initialized. :( "); 
```

当然，我查看了 API 文档并没有这样的方法，但是有类似的方法吗？

我正在考虑只是通过我的代码并在`Exception`它触发时捕获抛出的东西，但我觉得这不雅。:P

**编辑：**

我的代码打算这样处理：

```
MediaPlayer mp;

// Lorem ipsum dolor sit amet consectetur adipisicing...

if(mp.isInitialized)
{
    mp.stop();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T02:44:57.927

当一个方法声明它抛出一个异常时，当您使用该方法时，您有两个选择。`throws`使用关键字或异常声明您的方法也抛出异常（可以说是推卸责任）`catch`。你必须做其中一件事。

即使文档包含一个`isInitialized()`方法，如果这些方法仍在 throwing `IllegalStateException`，您仍然必须通过这两种方法之一来处理它们。

此外，捕捉*很*优雅，它可以让您的应用程序不会崩溃（崩溃并不优雅）并让您知道有问题。如果您有很多媒体播放器调用（例如在同一方法中一个接一个），您可以将它们全部放在一个`try/catch`块下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-07T00:04:24.433

在 mediaPlayer 方法调用周围使用 try and catch ，如果抛出 IllegalStateException 则未初始化

```
try {
   mediaPlayer.isPlaying();
} catch(IllegalStateException e) {
   // media player is not initialized
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:32:50.397

两种可能的想法：

1.  根据您的“预期”代码，为什么不能使用该`isPlaying()`方法代替所需的`isInitialized()`？`mp.stop()`如果它实际上正在播放某些东西，您不是只想打电话吗？

2.  将 mp.stop() 或任何内容放在[OnPreparedListener](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnPreparedListener%28android.media.MediaPlayer.OnPreparedListener%29)中怎么样？

# android - Android 字体识别 API

> ID：14371181
> 
> 赞同：0
> 
> 时间：2013-01-17T02:14:30.047
> 
> 标签：android

我计划为我最后一年的项目开发一个 android 字体识别应用程序。是否有任何免费的 API 可用于此图像识别过程。（寻找一个将图像作为输入并输出字体名称或类似名称的 API）请建议我一个解决方案，我是 android 平台的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:18:26.267

[我会尝试 OpenCV，它有非常有用的库和示例](http://opencv.willowgarage.com/wiki/)

# graphics - 使用插件安装openscenegraph

> ID：14371185
> 
> 赞同：1
> 
> 时间：2013-01-17T02:15:00.630
> 
> 标签：graphics, openscenegraph, scenegraph

我在使用 vrml 插件安装 openscenegraph 时遇到问题 谁能提供一些建议？

我正在研究 Snow Leopard，我下载了最新的 OpenVRML 0.18 和 OpenSceneGraph 3.0.1

我可以让 OpenSceneGraph 工作，但是，我需要加载 VRML 文件，当我使用 osg 读取文件时，它说它找不到任何插件。

我尝试通过从源代码编译来安装 OpenVRML，但它无法配置，因为它似乎无法精细 libboost_thread-mt 库文件，即使我已经安装了它，并且链接到它也有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:43:09.790

OSG 通过它尝试加载的文件的扩展名来选择插件 - 如果您的文件以 .vrml 结尾，请尝试更改为 .wrl 并查看它是否加载 - 也许您的安装下载有 VRML 插件，但没有找到它。

如果您只有几个文件，则使用以下内容会更容易：

[http://www.cs.princeton.edu/~min/meshconv/](http://www.cs.princeton.edu/~min/meshconv/)

将它们转换为 stl 或 obj 文件，而不是构建插件。否则，您需要查阅 OSG 邮件列表/论坛。现在就加入论坛吧，反正新用户的消息通常不会马上被发布。

# algorithm - 重组文本和 mathjax 中的排版算法

> ID：14371193
> 
> 赞同：5
> 
> 时间：2013-01-17T02:15:51.900
> 
> 标签：algorithm, mathjax, typesetting

我正在使用重组文本为 Pelican 网站编写页面，并且可以使用 MathJax 显示数学符号和方程式。

我也想排版类似于LaTeX的`algpseudocode`包的算法，有没有类似的工具或方法用于重组文本或mathjax？

我还需要在算法中使用数学符号。

# java - 如何将东西添加到系统托盘并添加 mouseOver() 功能？

> ID：14371194
> 
> 赞同：3
> 
> 时间：2013-01-17T02:16:12.360
> 
> 标签：java, swing, mouseevent, mouseover, system-tray

![在此处输入图像描述](../Images/5a088927f578ffe60d7486e914f558d4.png)

对不起，如果标题含糊不清，但这是我想要实现的。
这是`Battery Care`软件图标化/最小化。当您将鼠标悬停在图标上时，您会看到在图片中看到的窗口。
这怎么能用Java实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T02:38:19.140

![在此处输入图像描述](../Images/8fec859c37f837a5d4f0d2cc12d07bfc.png)

这使用 a`JPopupMenu`在点击时显示信息，不是最推荐的方法，因为很难布局其他组件......但您可以轻松地使用 a`JWindow`代替......

```
public class SystemTrayTest {

  public static void main(String[] args) {
    if (SystemTray.isSupported()) {

      EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
          try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
          } catch (Exception ex) {
          }
          try {
            final JPopupMenu popup = new JPopupMenu();
            popup.add(new JLabel("Charging (45%)", JLabel.CENTER));

            popup.add(new JLabel("Charging", new ImageIcon(ImageIO.read(SystemTrayTest.class.getResource("/battery_connection.png"))), JLabel.LEFT));
            popup.add(new JLabel("Power Saver", new ImageIcon(ImageIO.read(SystemTrayTest.class.getResource("/flash_yellow.png"))), JLabel.LEFT));

            popup.add(new JSeparator());

            JMenuItem exitMI = new JMenuItem("Exit");
            exitMI.addActionListener(new ActionListener() {
              @Override
              public void actionPerformed(ActionEvent e) {
                System.exit(0);
              }
            });
            popup.add(exitMI);

            TrayIcon trayIcon = new TrayIcon(ImageIO.read(SystemTrayTest.class.getResource("/battery_green.png")), "Feel the power");
            trayIcon.addMouseListener(new MouseAdapter() {
              @Override
              public void mouseClicked(MouseEvent e) {
                popup.setLocation(e.getX(), e.getY());
                popup.setInvoker(popup);
                popup.setVisible(true);
              }
            });
            SystemTray.getSystemTray().add(trayIcon);
          } catch (Exception ex) {
            ex.printStackTrace();
            System.exit(0);
          }

        }
      });
    }

  }
} 
```

**更新了鼠标悬停支持**

因为实在忍不住要玩...

![在此处输入图像描述](../Images/3b3de5f5f3bd02347394bf78f4e8f95d.png)

```
public class SystemTrayTest {

  public static void main(String[] args) {
    new SystemTrayTest();
  }

  public SystemTrayTest() {
    if (SystemTray.isSupported()) {

      EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
          try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
          } catch (Exception ex) {
          }
          try {
            TrayIcon trayIcon = new TrayIcon(ImageIO.read(SystemTrayTest.class.getResource("/battery_green.png")), "Feel the power");
            MouseHandler mouseHandler = new MouseHandler();
            trayIcon.addMouseMotionListener(mouseHandler);
            trayIcon.addMouseListener(mouseHandler);
            SystemTray.getSystemTray().add(trayIcon);
          } catch (Exception ex) {
            ex.printStackTrace();
            System.exit(0);
          }
        }
      });
    }
  }

  public class MouseHandler extends MouseAdapter {

    private Timer popupTimer;
    private JWindow popup;
    private Point point;

    public MouseHandler() {
      popup = new JWindow();
      ((JComponent)popup.getContentPane()).setBorder(new LineBorder(Color.LIGHT_GRAY));
      popup.setLayout(new GridLayout(0, 1));
      popup.add(new JLabel("Charging (45%)", JLabel.CENTER));

      try {
        popup.add(new JLabel("Charging", new ImageIcon(ImageIO.read(getClass().getResource("/battery_connection.png"))), JLabel.LEFT));
        popup.add(new JLabel("Power Saver", new ImageIcon(ImageIO.read(getClass().getResource("/flash_yellow.png"))), JLabel.LEFT));
      } catch (IOException exp) {
        exp.printStackTrace();
      }
      popup.pack();

      popupTimer = new Timer(250, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
          if (point != null) {
            System.out.println(point);
            Rectangle bounds = getScreenViewableBounds(point);
            int x = point.x;
            int y = point.y;
            if (y < bounds.y) {
              y = bounds.y;
            } else if (y > bounds.y + bounds.height) {
              y = bounds.y + bounds.height;
            }
            if (x < bounds.x) {
              x = bounds.x;
            } else if (x > bounds.x + bounds.width) {
              x = bounds.x + bounds.width;
            }

            if (x + popup.getWidth() > bounds.x + bounds.width) {
              x = (bounds.x + bounds.width) - popup.getWidth();
            }
            if (y + popup.getWidth() > bounds.y + bounds.height) {
              y = (bounds.y + bounds.height) - popup.getHeight();
            }
            popup.setLocation(x, y);
            popup.setVisible(true);
          }
        }
      });
      popupTimer.setRepeats(false);

    }

    @Override
    public void mouseExited(MouseEvent e) {
      System.out.println("Stop");
      point = null;
      popupTimer.stop();
      popup.setVisible(false);
    }

    @Override
    public void mouseMoved(MouseEvent e) {
      popupTimer.restart();
      point = e.getPoint();
    }

    @Override
    public void mouseClicked(MouseEvent e) {
      System.exit(0);
    }
  }

  public static GraphicsDevice getGraphicsDeviceAt(Point pos) {

    GraphicsDevice device = null;

    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice lstGDs[] = ge.getScreenDevices();

    ArrayList<GraphicsDevice> lstDevices = new ArrayList<GraphicsDevice>(lstGDs.length);

    for (GraphicsDevice gd : lstGDs) {

      GraphicsConfiguration gc = gd.getDefaultConfiguration();
      Rectangle screenBounds = gc.getBounds();

      if (screenBounds.contains(pos)) {

        lstDevices.add(gd);

      }

    }

    if (lstDevices.size() == 1) {

      device = lstDevices.get(0);

    }

    return device;

  }

  public static Rectangle getScreenViewableBounds(Point p) {

    return getScreenViewableBounds(getGraphicsDeviceAt(p));

  }

  public static Rectangle getScreenViewableBounds(GraphicsDevice gd) {

    Rectangle bounds = new Rectangle(0, 0, 0, 0);

    if (gd != null) {

      GraphicsConfiguration gc = gd.getDefaultConfiguration();
      bounds = gc.getBounds();

      Insets insets = Toolkit.getDefaultToolkit().getScreenInsets(gc);

      bounds.x += insets.left;
      bounds.y += insets.top;
      bounds.width -= (insets.left + insets.right);
      bounds.height -= (insets.top + insets.bottom);

    }

    return bounds;

  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T03:15:47.070

起初，我认为这相当简单 - 使用 addMouseListener() 将鼠标侦听器添加到 TrayIcon 并使用 mouseEntered() 和 mouseExitedEvents()：

```
icon.addMouseListener(new MouseAdapter()
{
    @Override
    public void mouseEntered(MouseEvent e)
    {
        System.out.println("Mouse over icon");
    }

    @Override
    public void mouseExited(MouseEvent e)
    {
        System.out.println("Mouse leaving icon");
    }
}); 
```

但是，至少在我测试过的平台上（Windows 上的 Java 7u10）这不起作用——当我将鼠标光标悬停在托盘图标上时，没有生成任何事件。起作用的是a`MouseMotionListener`和`addMouseMotionListener`方法：

```
icon.addMouseMotionListener(new MouseMotionAdapter()
{
    @Override
    public void mouseMoved(MouseEvent e)
    {
        System.out.println("Moving...");
    }
}); 
```

`mouseMoved()`仅当鼠标悬停在图标上时才会生成事件。通过一些工作，这可以用于在`JWindow`接收到第一个事件后的一定延迟后显示 a 以模拟工具提示时间（您可以通过类似`ToolTipManager.sharedInstance().getInitialDelay()`.

# iphone - 带有 NSAttributedString 的 UITextView - 不应用属性

> ID：14371195
> 
> 赞同：1
> 
> 时间：2013-01-17T02:16:16.993
> 
> 标签：iphone, ios, objective-c, ipad

这就是我正在做的事情：

```
UITextView * myTextView = [[UITextView alloc] initWithFrame:defaultFrame];
myTextView.attributedText = [[NSAttributedString alloc] initWithString:@"" attributes:defaultAttributeDictionary]; 
```

没有应用任何属性，当用户点击它进行编辑时可以看到。

## 然而：

如果我使用非空白字符串将其更改为init，例如@“Hi”，则应用属性，并在用户编辑文本视图后粘贴。事实上，即使在文本视图为空白之前按下退格键，键盘也会关闭，然后重新激活键盘 - 这仍然会导致应用属性文本样式。

## 所以：

我该如何解决这个问题 - 我不确定将 @"" 设置为字符串和退格直到字符串为 @"" 然后重新编辑之间的文本字段有什么不同。无论是它发生的原因和解决方案，还是解决方法对我来说都很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:28:47.747

不要将`attributedText`属性设置为空字符串，而是尝试`typingAttributes`使用您的`defaultAttributeDictionary`.

```
UITextView * myTextView = [[UITextView alloc] initWithFrame:defaultFrame];
myTextView.typingAttributes = defaultAttributeDictionary; 
```

# c# - XCopy 在构建期间失败但不是从命令行失败？

> ID：14371203
> 
> 赞同：2
> 
> 时间：2013-01-17T02:17:41.327
> 
> 标签：c#, visual-studio-2012, build-process, xcopy

我有一个控制台程序，将其 exe 和 dll 输出到指定目录。

作为构建后事件，我试图将该目录中的所有内容复制到另一个目录。

我的 xcopy 命令在命令提示符下工作，但在 VS2010 中失败？怎么会这样？

我正在通过转到项目文件夹并在命令提示符下执行以下命令来对其进行测试。（这是VS2010的输出）

在我的构建后活动中：

```
xcopy "$(OutDir)*.*" "$(TargetDir)..\..\Foo\Bar\" /s /y /i 
```

从命令提示符我正在执行以下工作。

```
xcopy "..\..\..\..\MyDir\baz\zip\*.*" "c:\1\2\3\MyDir\baz\zip\..\..\Foo\Bar\" /s /y /i 
```

对不起目录名称。

最终结果应该是两个目录，其中包含相同的文件：

```
c:\1\2\3\MyDir\baz\zip
c:\1\2\3\MyDir\foo\bar 
```

目标路径是相对于输出目录的。

当它作为构建的一部分执行时，它会给出退出代码 4

> 发生初始化错误。没有足够的内存或磁盘空间，或者您在命令行中输入了无效的驱动器名称或无效的语法。

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:44:19.777

知道了，

我将构建后事件中的 xcopy 命令更改为：

```
xcopy "$(TargetDir)*.*" "$(TargetDir)..\..\Foo\Bar\" /s /y /i 
```

执行结果为：

```
xcopy "c:\1\2\3\MyDir\baz\zip\*.*" "c:\1\2\3\MyDir\baz\zip\..\..\Foo\Bar\" /s /y /i 
```

哪个VS2010更受欢迎，我猜你不能使用没有基本路径的相对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:23:48.880

为什么你不调用批处理文件，它将为所需文件源运行 xcopy 到目标？

```
call "$(SolutionDir)scripts\copyifnewer.bat" 
```

copyifnewer.bat 看起来像这样：

```
IF NOT EXIST <destination> md <destination>
XCOPY /Y <file> <destination> 
```

# c++ - 在另一个类中创建线程

> ID：14371204
> 
> 赞同：0
> 
> 时间：2013-01-17T02:17:59.680
> 
> 标签：c++, multithreading, concurrency

我正在尝试在主函数中为 ThreadMe 类中名为 thefunction() 的函数创建一个线程。棘手的部分是我需要在另一个类 TYIA -Roland 中启动一个线程

```
#include <iostream>
#include <process.h>
#include <windows.h>

int main()  {

    char cincatcher[24];

        std::cout << "I want to run a thread using a function on another class\n";

//      Here is a good place to start the thread

        while( true )   {

        std::cin >> cincatcher
    }
}

class ThreadMe  {

    void thefunction();
};

void ThreadMe::thefunction()    {

    while( true )   {

        std::cout << "working!\n"
        Sleep(800);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:23:10.957

您不能使用类方法直接启动线程。您必须将类方法包装到普通函数中，然后使用该函数启动线程。如下所示：

```
void threadBody(void *p) {
     ThreadME tm;
     tm.thefunction();
} 
```

# python - 是否可以将 if else 语句放在 if else 语句中？

> ID：14371206
> 
> 赞同：0
> 
> 时间：2013-01-17T02:18:45.417
> 
> 标签：python, python-2.7, if-statement

所以基本上，我想做的是使用“if / else”作为程序选择路径的开关。

如果我的 elif 语句是错误的，我想要更多缩进 if / else NOT 工作。是否可以？

代码：

```
aStr = "abcdef"
char = "e"
if aStr == '':
    return False
elif len(aStr) == 1:
    if char == aStr:
        return True
    else:
        print "Python is stupid"
        return False
else: 
```

它返回“Python 很愚蠢”，我不是故意的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:22:01.810

如果您希望它在不正确时运行，则需要在以下内容中反转您的逻辑`elif`：

```
aStr = "abcdef"
char = "e"
if aStr == '':
    return False
elif len(aStr) != 1:
    if char == aStr:
        return True
    else:
        print "Python is stupid"
        return False 
```

如果给定的表达式为真，则`if`（并且通过扩展， ）语句运行块。`elif`如果您想检查某事*是否不*正确，请反转逻辑（将 a`not`放在它前面，或使用逆运算符）。

Note that the Pythonic way to check for an empty string is to do `if not aStr:`, rather than check for equality vs an empty string.

# java - 有没有办法从一个 Netty 通道读取数据的速度与写入另一个通道的速度一样快？

> ID：14371207
> 
> 赞同：1
> 
> 时间：2013-01-17T02:18:45.443
> 
> 标签：java, netty

我们在 LittleProxy 中遇到了一个问题，当从快速服务器读取时，会弹出 OutOfMemoryErrors，LittleProxy 正在代理访问和写入配置为使用代理的慢速客户端。问题是从服务器传入的数据在内存中的缓冲速度比我们将其写入客户端的速度要快。LittleProxy 只是一个建立在 Netty 之上的简单 HTTP 代理。

是否有任何简单的方法可以将远程服务器的读取限制为与客户端能够读取的速度完全相同？

看：

[https://github.com/adamfisk/LittleProxy/issues/53](https://github.com/adamfisk/LittleProxy/issues/53)

和

[https://github.com/adamfisk/LittleProxy](https://github.com/adamfisk/LittleProxy)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:37:05.157

您可以查看源代码： org.jboss.netty.example.proxy.HexDumpProxyInboundHandler 它根据出站通道的状态设置入站通道可读标志。希望这会有所帮助。

# ios - 格式字符串未使用数据参数？

> ID：14371208
> 
> 赞同：0
> 
> 时间：2013-01-17T02:18:50.780
> 
> 标签：ios, objective-c, xcode, facebook, nsstring

我试图让用户在 facebook 上发布状态，但在此代码中出现错误：“格式字符串未使用数据参数”：

> [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"这很一般。",mySLComposerSheet.serviceType]];

有人看到有什么问题吗？

最好的问候，Øyvind Larsen Runestad。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:20:33.023

问题是，通过使用 stringWithFormat，它期望您使用 %，它是格式的说明符。如果您的字符串很简单，“这是相当平均的”。然后执行以下行。

```
[mySLComposerSheet setInitialText:@"This is quite average."] 
```

如果您尝试附加“这是相当平均的”。到 mySLComposerSheet.serviceType，然后执行以下操作

```
NSString* text = [mySLComposerSheet.serviceType stringByAppendingString:@"This is quite average."]; 
```

然后做

```
[mySLComposerSheet setInitialText:text]; 
```

# jquery - 选择框显示隐藏

> ID：14371212
> 
> 赞同：0
> 
> 时间：2013-01-17T02:19:16.083
> 
> 标签：jquery

我对选择框 div 显示隐藏有疑问...首先，这是我的来源

**HTML**：

```
<Select id="colorselector">
   <option value="red">Red</option>
   <option value="yellow">Yellow</option>
   <option value="blue">Blue</option>
</Select>
<a href="#"><span>Go</span></a>
<div id="red" class="colors" style="display:none"> red... </div>
<div id="yellow" class="colors" style="display:none"> yellow.. </div>
<div id="blue" class="colors" style="display:none"> blue.. </div> 
```

**JS**：

```
$(function() {
    $('#colorselector').change(function(){
        $('.colors').hide();
        $('#' + $(this).val()).show();
    });
}); 
```

**演示：http: [//jsfiddle.net/FvMYz/1345/](http://jsfiddle.net/FvMYz/1345/)**

当我选择红色时，红色 Div 显示...但我想更改为...添加 Go 按钮。但很难做到……有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:27:22.797

这是你的想法吗？

```
 $(function() {
        $('a').click(function(){
            $('.colors').hide();
            $('#' + $('#colorselector').val()).show();
        });
    }); 
```

[JSFIDDLE](http://jsfiddle.net/FvMYz/1346/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:58:42.200

我的答案与上面几乎相同，但是我会在触发事件的 href 以及 .on() 方法上放置一个类或 id，因为现在不推荐使用 .click 。.click() 只是通过 .on() 运行一个函数，所以基本上你通过 .click() 调用 .on()，你可以直接调用 .on()。.on() 的另一个好处是您可以通过执行以下操作轻松地将多个事件侦听器类型绑定到一个选择器：

```
$(something).on('click, mouseover', function() { // whatever });

$(function() {

     $('a[href="#"]').on('click', function() {
          $('.colors').hide();
          $('#'+ $('#colorselector').val()).show();
     });
}); 
```

# html - 如何使 html5 画布形状可调整大小

> ID：14371216
> 
> 赞同：1
> 
> 时间：2013-01-17T02:19:56.790
> 
> 标签：html, function, resize, kineticjs, mousedown

退房：http: [//jsfiddle.net/aqaP7/4/](http://jsfiddle.net/aqaP7/4/)，

和

[http://shedlimited.debrucellc.com/test3/canvaskinclip.html](http://shedlimited.debrucellc.com/test3/canvaskinclip.html) ,

我想让 html5 图像可调整大小，它需要基于 html5 等，因为我的剪辑区域在 html5 中

我认为这与 mousedown 事件有关，但例如我如何判断鼠标是否在形状的角落？我可以将代码添加到我的圈子 - mousedown 函数吗？

```
 circle.on("mousedown", function(){
            draggingShape = this;
            var mousePos = stage.getMousePosition();
            draggingRectOffsetX = mousePos.x - circle._x;
            draggingRectOffsetY = mousePos.y - circle._y;
        });
        circle.on("mouseover", function(){
            document.body.style.cursor = "pointer";
        });
        circle.on("mouseout", function(){
            document.body.style.cursor = "default";
        });

        layer.add(circle);

        stage.on("mouseout", function(){
            draggingShape = undefined;
        }, false);

        stage.on("mousemove", function(){
            var mousePos = stage.getMousePosition();
            if (draggingShape) {
                draggingShape._x = mousePos.x - draggingRectOffsetX;
                draggingShape._y = mousePos.y - draggingRectOffsetY;

                layer.draw();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:36:59.367

看看这个画布教程：

[看看这个教程](http://www.html5canvastutorials.com/labs/html5-canvas-modify-curves-with-anchor-points-using-kineticjs/)

这里有一些简单的代码可以帮助您入门：

```
var anchor;

function addAnchor(group, x, y, name) {
  var stage = group.getStage();
  var layer = group.getLayer();

  anchor = new Kinetic.Circle({
    x: x,
    y: y,
    stroke: "#666",
    fill: "#ddd",
    strokeWidth: 2,
    radius: 8,
    name: name,
    draggable: true
  });

  anchor.on("dragmove", function() {
    update(group, this);
    layer.draw();
  });
  anchor.on("mousedown touchstart", function() {
    group.setDraggable(false);
    this.moveToTop();
  });
  anchor.on("dragend", function() {
    group.setDraggable(true);
    layer.draw();
  });
  // add hover styling
  anchor.on("mouseover", function() {
    var layer = this.getLayer();
    document.body.style.cursor = "pointer";
    this.setStrokeWidth(4);
    layer.draw();
  });
  anchor.on("mouseout", function() {
    var layer = this.getLayer();
    document.body.style.cursor = "default";
    this.setStrokeWidth(2);
    layer.draw();
  });

  group.add(anchor);
} 
```

本质上，您希望在单击时向形状添加锚点，然后使用这些锚点调整大小。

# drupal-7 - Drupal 7 EntityFieldQuery OR 条件

> ID：14371220
> 
> 赞同：1
> 
> 时间：2013-01-17T02:21:14.457
> 
> 标签：drupal-7, field

我有一个使用 EntityFieldQuery 的查询。我有两个名为 field_tags 和 field_categories 的字段，我在每个字段中查看的列名都是 tid。我想检查每个字段是否有匹配的 tid。每个人都在检查一个单独的 tid 数组。

通常我会使用类似的东西：

```
$query->fieldCondition('field_tags', 'tid', $my_tags, 'IN'); 
```

但是现在，由于我正在检查 field_tags 的 tags 数组或 field_categories 的类别数组中是否有任何匹配项，所以我不知道该怎么做。这个想法是返回的每一行必须匹配至少一个标签或一个类别。

我知道那里一定有一个 OR 条件......

谢谢，豪伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:28:12.940

找到这个：[http](http://treehouseagency.com/blog/fredric-mitchell/2012/02/21/or-queries-entityfieldquery) ://treehouseagency.com/blog/fredric-mitchell/2012/02/21/or-queries-entityfieldquery ，它解释了如何使用标签来稍后查询并合并 OR 子句。

# apache - 静默 url 重写

> ID：14371221
> 
> 赞同：0
> 
> 时间：2013-01-17T02:21:29.330
> 
> 标签：apache, mod-rewrite, url-rewriting

我对 url 重写很陌生，我需要有关以下方面的帮助：我想将所有请求从 重定向`www.mydomain.com/fakefolder/Fake_Content`到 ，`www.mydomain.com/realpage.php?parameter=Fake_Content`而浏览器不会在栏中显示真实地址。使用您可以在下面找到的规则，我设法完成了重定向任务，但我无法让浏览器隐藏真实的 URL

```
 RewriteEngine on  
 RewriteRule ^fakefolder/([A-Z]{1}[a-z]*\_[A-Z]{1}[a-z]*)$ http://www.mydomain.com/realpage.php?parameter=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:32:21.423

如果您不希望浏览器显示真实的 URL，那么您不是在重写或重定向，而是在代理，这`mod_rewrite`将通过高度不鼓励的官方文档来实现，所以不要-使用它的`[P]`标志。通过精彩的[When Not To Use Rewrite](http://wiki.apache.org/httpd/WhenNotToUseRewrite) wiki 页面，我建议您改用`mod_proxy`：

```
RewriteRule ^/(.*) http://other.example.com/$1 [P]

# is better expressed as..
ProxyPass / http://other.example.com/ 
```

# asp.net-mvc - ASP.NET MVC 检查控制器或动作中的自定义属性

> ID：14371223
> 
> 赞同：6
> 
> 时间：2013-01-17T02:22:12.930
> 
> 标签：asp.net-mvc, custom-attributes

考虑以下代码：

```
public class MyAttribute : Attribute {  }

[MyAttribute]
public class MyControlller : Controller
{
      //...
} 
```

现在我有了`Global Action Filter`一个`ActionExecutingContext`对象。

我的问题是，在这里，我如何检查请求`Controller`是否已用我的 custom 装饰`Attribute`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T20:51:41.277

尝试

```
actionExecutingContextInstance.Controller.GetType().GetCustomAttributes(typeof(MyAttribute), false).Length > 0) 
```

或者

```
actionExecutingContextInstance.ActionDescriptor.GetCustomAttributes(typeof(MyAttribute), false).Length > 0) 
```

# c - 将 NaN 定义为 0

> ID：14371232
> 
> 赞同：1
> 
> 时间：2013-01-17T02:24:35.507
> 
> 标签：c, nan

每当返回 NaN 时，我希望返回的值改为 0。实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T02:26:37.737

你可以使用这个功能

```
float zero_nan(float n)
{
  return n == n ? n : 0;
} 
```

您可以内联该函数并包装您认为可能是 nans 的任何返回值。

# mongodb - 为什么 mongodb 的成员不断恢复？

> ID：14371239
> 
> 赞同：4
> 
> 时间：2013-01-17T02:26:23.197
> 
> 标签：mongodb, database

我设置了一个包含三个成员的副本集，其中一个是仲裁者。

有一次我重新启动一个成员，这个成员保持了很长一段时间的RECOVERING，并没有再次成为SECONDARY，即使数据库并不大。

副本集的状态是这样的：

```
rs:PRIMARY> rs.status()
{
        "set" : "rs",
        "date" : ISODate("2013-01-17T02:08:57Z"),
        "myState" : 1,
        "members" : [
                {
                        "_id" : 1,
                        "name" : "192.168.1.52:27017",
                        "health" : 1,
                        "state" : 1,
                        "stateStr" : "PRIMARY",
                        "uptime" : 67968,
                        "optime" : Timestamp(1358388479000, 1),
                        "optimeDate" : ISODate("2013-01-17T02:07:59Z"),
                        "self" : true
                },
                {
                        "_id" : 2,
                        "name" : "192.168.1.50:29017",
                        "health" : 1,
                        "state" : 7,
                        "stateStr" : "ARBITER",
                        "uptime" : 107,
                        "lastHeartbeat" : ISODate("2013-01-17T02:08:56Z"),
                        "pingMs" : 0
                },
                {
                        "_id" : 3,
                        "name" : "192.168.1.50:27017",
                        "health" : 1,
                        "state" : 3,
                        "stateStr" : "RECOVERING",
                        "uptime" : 58,
                        "optime" : Timestamp(1358246732000, 100),
                        "optimeDate" : ISODate("2013-01-15T10:45:32Z"),
                        "lastHeartbeat" : ISODate("2013-01-17T02:08:55Z"),
                        "pingMs" : 0,
                        "errmsg" : "still syncing, not yet to minValid optime 50f6472f:5d"
                }
        ],
        "ok" : 1
} 
```

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-11T11:21:24.180

我有完全相同的问题：副本的次要成员陷入恢复模式。这里如何解决这个问题：

1.  停止辅助 mongo db
2.  删除所有辅助数据库数据文件
3.  启动二级mongo

它将以 startup2 模式启动，并将复制来自 Primary 的所有数据

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-17T11:20:47.453

我已经按照以下步骤解决了这个问题。

# 步骤1：

登录到不同的节点并从 mongodb 副本集中删除问题节点。例如。

`rs.remove("10.x.x.x:27017")`

# 第2步：

在问题节点上停止 mongodb 服务器 `systemctl stop mongodb.service`

# 第 3 步：

在 dbpath 上创建一个新文件夹 `mkdir /opt/mongodb/data/db1` 注意：现有路径是 /opt/mongodb/data/db

# 第4步：

修改 /etc/mongod.conf 或 mongdb yaml 文件上的 dbpath `dbPath: /opt/mongodb/data/db1`

# 第 5 步：

启动mongodb服务 `systemctl start mongodb.service`

# 第 6 步：

备份现有文件夹并将其删除

`mkdir /opt/mongodb/data/backup mv /opt/mongodb/data/db/* /opt/mongodb/data/backup tar -cvf /opt/mongodb/data/backup.tar.gz /opt/mongodb/data/backup rm -rf /opt/mongodb/data/db/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-15T21:10:30.087

如果复制已中断一段时间并且在从属设备上没有足够的数据来恢复复制，则会发生这种情况。

您必须通过从头开始复制数据或从另一台服务器复制数据然后恢复它来[重新同步从属服务器。](https://docs.mongodb.org/manual/tutorial/resync-replica-set-member/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-31T16:00:56.487

检查 mongodb 文档以了解此问题[https://docs.mongodb.com/manual/tutorial/resync-replica-set-member/#replica-set-auto-resync-stale-member](https://docs.mongodb.com/manual/tutorial/resync-replica-set-member/#replica-set-auto-resync-stale-member)

# jqplot - JQplot 显示不正确

> ID：14371250
> 
> 赞同：0
> 
> 时间：2013-01-17T02:27:17.987
> 
> 标签：jqplot, bar-chart

我可以帮助在 JQPlot 的条形图上正确显示数据吗？图表上的数据在 x 轴上不正确。请参考我在这篇文章底部的图片。

这是我的代码：

```
 var RepeatVisitRatesGraph = $.jqplot('CustomerRepeatVisitRatesGraph', [[10, 20, 30, 45], [23, 14, 34, 8], [32, 12, 45, 76]], {
    // The "seriesDefaults" option is an options object that will
    // be applied to all series in the chart.
    seriesDefaults:{
        renderer:$.jqplot.BarRenderer,
        rendererOptions: {fillToZero: true}
    },
    // Custom labels for the series are specified with the "label"
    // option on the series option.  Here a series option object
    // is specified for each series.
    series:[
        {label:'Hotel'},
        {label:'Event Regristration'},
        {label:'Airfare'}
    ],
    // Show the legend and put it outside the grid, but inside the
    // plot container, shrinking the grid to accomodate the legend.
    // A value of "outside" would not shrink the grid and allow
    // the legend to overflow the container.
    legend: {
        show: true,
        placement: 'outsideGrid'
    },
    axes: {
        // Use a category axis on the x axis and use our custom ticks.
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: ['May', 'June', 'July', 'August']
        },
        // Pad the y axis just a little so bars can get close to, but
        // not touch, the grid boundaries.  1.2 is the default padding.
        yaxis: {
            pad: 1.05,
            tickOptions: {formatString: '$%d'}
        }
    }
}); 
```

这就是它当前的显示方式：

![在此处输入图像描述](../Images/1d4bef6a60fe167acac374072d57519e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:05:12.183

看到这个，现在它工作正常。我认为问题是由于缺少包含脚本文件

[http://jsfiddle.net/JWhmQ/1371/](http://jsfiddle.net/JWhmQ/1371/)

HTML

```
<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/b5a7796a9ebf/src/plugins/jqplot.canvasTextRenderer.js"></script>
<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/b5a7796a9ebf/src/plugins/jqplot.canvasAxisLabelRenderer.js"></script>

<div id="CustomerRepeatVisitRatesGraph"></div> 
```

条形图代码

```
var RepeatVisitRatesGraph = $.jqplot('CustomerRepeatVisitRatesGraph', [[10, 20, 30, 45], [23, 14, 34, 8], [32, 12, 45, 76]], {
    // The "seriesDefaults" option is an options object that will
    // be applied to all series in the chart.
    seriesDefaults:{
        renderer:$.jqplot.BarRenderer,
        rendererOptions: {fillToZero: true}
    },
    // Custom labels for the series are specified with the "label"
    // option on the series option.  Here a series option object
    // is specified for each series.
    series:[
        {label:'Hotel'},
        {label:'Event Regristration'},
        {label:'Airfare'}
    ],
    // Show the legend and put it outside the grid, but inside the
    // plot container, shrinking the grid to accomodate the legend.
    // A value of "outside" would not shrink the grid and allow
    // the legend to overflow the container.
    legend: {
        show: true,
        placement: 'outsideGrid'
    },
    axes: {
        // Use a category axis on the x axis and use our custom ticks.
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: ['May', 'June', 'July', 'August']
        },
        // Pad the y axis just a little so bars can get close to, but
        // not touch, the grid boundaries.  1.2 is the default padding.
        yaxis: {
            pad: 1.05,
            tickOptions: {formatString: '$%d'}
        }
    }
}); 
```

# java - Java SlotMachine 类

> ID：14371252
> 
> 赞同：0
> 
> 时间：2013-01-17T02:27:28.803
> 
> 标签：java, arrays, boolean

我正在编写一个老虎机类，它生成 3 个由 3 个随机数组成的数组，并检查所有数字是否匹配，如果匹配，则它们被宣布为赢家。我编写了另一个程序来运行 1000 台老虎机并计算获胜者。我面临的问题是它总是给我 0 个赢家。有什么帮助吗？这是每个的代码：

老虎机类

```
import java.util.*;

public class SlotMachine{

    private int[] row1 = new int[3];
    private int[] row2 = new int[3];
    private int[] row3 = new int[3];

    public SlotMachine() {
        playMachine();
    }

    public void playMachine() {

        Random rand = new Random();

        for (int counter = 0; counter < 3; counter++) {
            row1[counter] = rand.nextInt(10);
        }

        for (int counter = 0; counter < 3; counter++) {
            row2[counter] = rand.nextInt(10);
        }

        for (int counter = 0; counter < 3; counter++) {
            row3[counter] = rand.nextInt(10);
        }
    }

    public boolean isWinner() {

        if (row1[0] == row1[1]) {
            if (row1[0] == row1[2]) {
                return true;
            }
        }

        if (row2[0] == row2[1]) {
            if (row2[0] == row2[2]) {
                return true;
            }
        }

        if (row3[0] == row3[1]) {
            if (row3[0] == row3[2]) {
                return true;
            }
        }

        return false;
     }
} 
```

获胜计数器：

```
import java.util.*;

public class Play1000SlotMachines {

    public static void main(String[] args) {
        SlotMachine slotMachine = new SlotMachine();
        int count = 0;

        for (int i = 0; i < 1000; i++) {
            if (slotMachine.isWinner() == true) {
                count = count + 1;
            }
        }

        System.out.println("From 1000 slot machines, " + count + " were winners.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:31:11.097

您永远不会重新滚动老虎机。我还更改了方法的名称，以反映此实现。如果您想玩 1000 台不同的老虎机，请将新老虎机的声明移到 for 循环中。这将创建 1000 个不同的老虎机类实例，而不是下面的实现，其中创建了老虎机的单个实例，然后播放 1000 次。一个重要的区别。

```
public class PlaySlotMachine1000Times {
  public static void main(String[] args) {

    SlotMachine slotMachine = new SlotMachine();
    int count = 0;

    for (int i = 0; i < 1000; i++) {
      slotMachine.playMachine();
      if (slotMachine.isWinner())
         count++;
    }
    System.out.println("From 1000 slot machines, " + count + " were winners.");
  }
} 
```

# php - 在 MySQL 数据库中存储调整大小的图像

> ID：14371255
> 
> 赞同：-2
> 
> 时间：2013-01-17T02:27:55.067
> 
> 标签：php, mysql

我一直想知道如何调整图像大小并将其存储到数据库中。

到目前为止，我可以将图像存储到数据库中。现在，我想创建相关图像的缩略图并将其存储在与我的实际图像不同的位置。

假设，从 image.jpg 中，我想将实际图像存储到 file_data (LONGBLOB) 中，并将其缩略图存储到 thumbnail_data (BLOB) 中。

但是，我不知道如何调整图像大小。我已经尝试了几个教程，但对我没有任何帮助。

请帮忙？很抱歉给大家添麻烦了。

========================（新增部分）

我正在考虑将图像存储到数据库中，因为我需要存储在每一行中的数据中的关系。

我的数据库表中有这个

**image_id** | 标识符 | 文件名 | 哑剧类型 | 文件大小 | 文件数据 | 缩略图数据

标识符用于在上传图像时对图像进行分类。

假设我有这个：

1 | 纽约 | ny1 | ... 2 | 纽约 | 纽约 | ... 3 | 纽约 | 纽约 | ... 1 | 台湾 | tw1 | ...

图像将显示为：

纽约：

ny1.jpg ny3.jpg ny2.jpg

台湾：

tw.jpg

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:31:15.270

嗯...您*不想*将二进制数据存储在数据库中。您（和其他所有人）应该做的是将文件存储在文件系统上并将指向数据库中文件的指针。

```
image_id | identifier | file_location         | mime_type | file_size | thumbnail_location
1        | foo        | /images/hd1/first.png | image/png | 10240     | /images/thumbnails/hd1/first.png 
```

# c++ - 让程序运行缓慢

> ID：14371257
> 
> 赞同：104
> 
> 时间：2013-01-17T02:28:13.873
> 
> 标签：c++, c, linux, unix, ubuntu

有没有办法通过更改 Linux 中的任何操作系统参数来降低 C++ 程序的运行速度？通过这种方式，我想模拟如果该特定程序碰巧在一台真正速度较慢的机器上运行会发生什么。

换句话说，对于该特定程序，较快的机器应该表现为较慢的机器。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-01-17T02:51:46.083

*   [`nice`](http://en.wikipedia.org/wiki/Nice_%28Unix%29)使用（和/或）降低优先级[`renice`](http://www.manpagez.com/man/8/renice/)。您也可以使用[`nice()`](http://www.kernel.org/doc/man-pages/online/pages/man2/nice.2.html)系统调用以编程方式执行此操作。这本身不会减慢执行速度，但会使 Linux 调度程序分配更少（并且可能更短）的执行时间帧，更频繁地抢占等。有关调度的更多详细信息，请参阅[了解 Linux 内核的进程调度（第 10 章）](http://oreilly.com/catalog/linuxkernel/chapter/ch10.html) .
*   你可能想[*增加定时器中断频率*](http://www.advenage.com/topics/linux-timer-interrupt-frequency.php)来增加内核的负载，这反过来会减慢一切。这需要内核重建。
*   您可以使用[*CPU 频率缩放*](https://wiki.archlinux.org/index.php/CPU_Frequency_Scaling)机制（需要内核模块）并使用命令控制（减慢、加快）CPU [`cpufreq-set`](http://www.thinkwiki.org/wiki/How_to_use_cpufrequtils#cpufreq-set)。
*   另一种可能性是在程序的性能关键部分（需要更改代码）中调用[`sched_yield()`](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_yield.2.html)，这将为其他进程产生量子。
*   您可以使用[LD_PRELOAD](http://en.wikipedia.org/wiki/Dynamic_linker)`malloc()`挂钩诸如,等常用函数，并做一些愚蠢的事情`free()`，例如使用 烧毁几百万个 CPU 周期、插入内存屏障等。这肯定会减慢程序的速度。（有关如何做这些事情的示例，请参阅[此答案）。](https://stackoverflow.com/a/6083624/405725)`clock_gettime()``rep; hop;`
*   正如@Bill 所提到的，您始终可以在虚拟化软件中运行 Linux，该软件允许您限制分配的 CPU 资源、内存等的数量。
*   如果你真的想让你的程序变慢，可以在[Valgrind](http://valgrind.org)下运行它（也可以帮助你发现应用程序中的一些问题，比如内存泄漏、错误的内存引用等）。
*   `-O0`通过禁用优化（即启用断言（即）重新编译二进制文件）可以实现一些缓慢`-DDEBUG`。
*   您总是可以购买一台旧 PC 或便宜的上网本（例如[每个孩子一台笔记本电脑](http://one.laptop.org)，完成测试后不要忘记将其捐赠给孩子）并运行您的程序。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-17T02:46:53.670

[**QEMU**](http://en.wikipedia.org/wiki/QEMU) 是 Linux 的 CPU 模拟器。Debian 有它的软件包（我想大多数*发行版*都会）。您可以在模拟器中运行程序，其中大多数应该支持减慢速度。例如， [Miroslav Novak](http://www.miroslavnovak.com/qemu-brake_en.php)有补丁可以减慢 QEMU。

或者，您可以交叉编译到另一个 CPU-linux（arm-none-gnueabi-linux 等），然后让 QEMU 翻译该代码以运行。

*好的*建议很简单，如果你将它与另一个会消耗 cpu 的进程结合起来，它可能会起作用。

```
nice -19 test &
while [ 1 ] ; do sha1sum /boot/vmlinuz*; done; 
```

您没有说您是否需要图形、文件和/或网络 I/O？您对您要查找的错误*类别有所了解吗？*这是竞争条件，还是代码在客户站点上表现不佳？

**编辑：** 您还可以使用**STOP**和**CONT**等信号来启动和停止程序。调试器也可以做到这一点。问题是代码*全速运行*然后停止。大多数使用 Linux 调度程序的解决方案都会有这个问题。 ~~有某种来自英特尔的线程分析器。我看到[了 Vtune 发行说明](http://software.intel.com/sites/products/documentation/hpc/vtune/linux/release_notes.htm)。这是 Vtune，但我很确定还有另一个工具可以分析线程竞争。~~ 请参阅：[英特尔线程检查器](http://software.intel.com/en-us/articles/intel-thread-checker-documentation)，它可以检查某些线程竞争条件。但是我们不知道应用程序是否是多线程的？

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-01-17T14:49:39.410

使用[`cpulimit`](https://github.com/opsengine/cpulimit)：

> **Cpulimit 是一种限制进程 CPU 使用率的工具**（以百分比表示，而不是 CPU 时间）。当您不希望它们占用太多 CPU 周期时，控制批处理作业很有用。目标是防止进程运行超过指定的时间比率。它不会改变 nice 值或其他调度优先级设置，而是**改变真正的 CPU 使用率**。此外，它能够动态快速地**适应整个系统负载。**
> 
> 使用 cpu 数量的控制是通过向进程发送 SIGSTOP 和 SIGCONT POSIX 信号来完成的。
> 
> 指定进程的所有子进程和线程将共享相同百分比的 CPU。

它在 Ubuntu 存储库中。只是

```
apt-get install cpulimit 
```

下面是一些关于如何在已经运行的程序上使用它的示例：

> 通过可执行名称将进程“bigloop”限制为 40% CPU：
> 
> ```
> cpulimit --exe bigloop --limit 40
> cpulimit --exe /usr/local/bin/bigloop --limit 40 
> ```
> 
> 通过 PID 将进程限制为 55% CPU：
> 
> ```
> cpulimit --pid 2960 --limit 55 
> ```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-17T03:06:59.697

1.  买一台旧电脑
2.  VPS 托管软件包往往运行缓慢，有很多中断，并且延迟差异很大。你买的越便宜，硬件就越差。与真正的旧硬件不同，它们很有可能包含旧硬件上通常找不到的指令集 (SSE4)。尽管如此，如果您想要一个运行缓慢且经常关闭的系统，廉价的 VPS 主机将是最快的开始。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-24T03:29:42.200

如果您只是想模拟您的程序以分析它在非常慢的机器上的行为，您可以尝试**让您的整个程序作为`thread`其他一些主程序**运行。

通过这种方式，您可以一次在几个线程中对具有不同优先级的相同代码进行优先级排序，并收集分析数据。我在游戏开发中使用它来进行帧处理分析。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-17T03:54:22.023

在代码中使用睡眠或等待。它不是最聪明的方法，但在各种速度不同的计算机中都是可以接受的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-10T06:03:07.323

最简单的方法是将您的主要可运行代码包装在一个 while 循环中，并在其末尾休眠。

例如：

```
void main()
{
    while 1
    {
        // Logic
        // ...
        usleep(microseconds_to_sleep)
    }
} 
```

正如人们会提到的，这不是最准确的方法，因为您的逻辑代码仍会以正常速度运行，但运行之间会有延迟。此外，它假定您的逻辑代码是循环运行的。

但它既简单又可配置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-26T10:28:14.373

您可以通过启动工具来增加 CPU 的负载，`stress`例如`stress-ng`

# data-structures - 代谢途径的理想数据结构

> ID：14371259
> 
> 赞同：0
> 
> 时间：2013-01-17T02:28:22.837
> 
> 标签：data-structures, bioinformatics

所以我有一个生物体内的大量化学物质清单，包括它们的前体化学物质和它们创造的化学物质的数据。

我在想某种树结构是合适的；每个化学品都是一个节点，每个父节点都是前驱体，每个子节点都是产物。

每个节点可能有多个父节点或多个子节点，因此我很困惑！

然而，这个结构的主要功能是找到所有的化学途径来制造它，我不确定一棵树在这种搜索中是否是最有效的。

我的问题是：对于这种类型的数据和操作，是否有更合适的数据结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:33:08.700

我认为您的数据结构是有向图。

寻找从 A 到 B 的所有路径的蛮力方法是从 A 开始进行广度优先搜索，并尽可能多地覆盖图形。

这保证了您将找到的路径的长度从最短到最长排序。

每当您点击 B 时，您应该将该路径中的所有节点标记为“通向 B”。通过这种方式，您可以解释收敛路径，而无需多次遍历图表。

请记住，除非您对其进行约束，否则图形可能包含循环。从 A 到 B 的路径中的循环为您提供了无限的路径，因此您可以自行决定如何处理这种情况。

# java - 如何在 android 中读取和写入有关加速度计的数据？

> ID：14371261
> 
> 赞同：2
> 
> 时间：2013-01-17T02:28:36.393
> 
> 标签：java, android

我正在尝试为android编写一个计步器。它目前在一个活动中包含四个按钮：一个用于开始记录加速度计数据的按钮，该数据存储在数组列表中。arraylist 采用 Trace 类型，这是我创建的一个类，用于保存一个传感器更改的数据。我还有一个停止按钮，以及从文本文件读取或写入数据的按钮。

该程序不断在 arraylist 上给我一个 NullPointerException ，我不知道为什么。任何帮助将不胜感激！

编辑：抱歉，如果缩进关闭或代码不清楚，这是一项学校作业，我的截止日期很严格，所以我必须急于使代码可用，然后才能担心可读性或效率。

编辑 2：我不再有任何异常，但是我仍然无法正确读/写。我能够成功写入文件，然后以某种方式停止运行。

```
package com.myApp.playpool;

    //imports

public class MainActivityBAK extends Activity implements SensorEventListener{

    //global fields (traces is instantiated here as new arraylist)

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        acceleration=(TextView)findViewById(R.id.acceleration);
        startButton = (Button) findViewById(R.id.startButton);
        stopButton = (Button) findViewById(R.id.stopButton);
        readButton = (Button) findViewById(R.id.readButton);
        writeButton = (Button) findViewById(R.id.writeButton);

        sm = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        accelerometer = sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        sm.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);

        dataFilePath = getString(R.string.data_file_path);
        acceleration.setText("Current file: " + dataFilePath);

        lastCheck = System.currentTimeMillis();

        defineButtons();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    @Override
    public void onSensorChanged(SensorEvent event1) {

        if (running && ((System.currentTimeMillis() - lastCheck) > 1000)) { 
            acceleration.setText("X: "+event1.values[0]+"\nY: "+event1.values[1]+"\nZ: "+event1.values[2]);
            traces.add(new Trace(System.currentTimeMillis(), event1.values[0], event1.values[1], event1.values[2]));
            lastCheck = System.currentTimeMillis();
        }

    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

    public void defineButtons() { //defines onClick methods for the buttons

        startButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                traces = new ArrayList<Trace>();
                running = true;
            }
        });

        stopButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                traces = new ArrayList<Trace>();
                running = false;
            }
        });

        readButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                try {
                    scan = new Scanner(new File(dataFilePath));
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }
                while (scan.hasNext()) {
                    String str = scan.nextLine();
                    String [] strings = str.split(";");
                    double time = Double.parseDouble(strings[0]);
                    float x = Float.parseFloat(strings[0]), y = Float.parseFloat(strings[1]), z = Float.parseFloat(strings [2]);
                    traces.add(new Trace(time, x, y, z));
                }

                Toast.makeText(getBaseContext(),
                        ("Done reading to SD file: '" + dataFilePath + "'"),
                        Toast.LENGTH_SHORT).show();
                scan.close();
            }
        });

        writeButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                try {
                    File file = new File(dataFilePath);
                    print = new PrintWriter(file);
                    file.createNewFile();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                for (int i = 0; i < traces.size(); i++) {
                    double time = traces.get(i).time;
                    float x = traces.get(i).x, y = traces.get(i).y, z = traces.get(i).z;
                    print.println(time + ";" + x + ";" + y + ";" + z + ";");
                }
                print.close();
                Toast.makeText(getBaseContext(),
                        ("Done writing to SD file: '" + dataFilePath + "'"),
                        Toast.LENGTH_SHORT).show();
            }
        });

    }

} 
```

它似乎在 write 方法的 for 循环中崩溃：

```
for (int i = 0; i < traces.size(); i++) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:37:19.390

`traces`如果您的按钮开始或停止被单击，您只是在初始化变量。

如果在此之前单击“写入”按钮，则引用仍然为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:38:07.400

尽管没有完整的源代码或堆栈跟踪很难判断，但它看起来可能`traces`尚未在任何一个`onSensorChanged()`或您的 中初始化。`readButton.setOnClickListener`如果`traces`是“//全局字段”，那么您可能应该在声明它的地方对其进行初始化，例如：

```
protected ArrayList<Trace> traces = new ArrayList<Trace>(); 
```

**编辑第二个问题**

我的猜测是，`File.createNewFile()`如果文件已经存在，则使用该方法将不起作用。也许尝试不同的方法，比如这个示例：

```
Writer writer = null;
try {
    OutputStream out = mContext.openFileOutput(dataFileName, Context.MODE_PRIVATE);
    writer = new OutputStreamWriter(out);

    for (int i = 0; i < traces.size(); i++) {
        double time = traces.get(i).time;
        float x = traces.get(i).x, y = traces.get(i).y, z = traces.get(i).z;
        writer.write(time + ";" + x + ";" + y + ";" + z + ";");
    }
}
finally {
    if (writer != null) {
        writer.close();
    }
} 
```

# c++ - 在其他计算机中导入 RSA 密钥的问题

> ID：14371263
> 
> 赞同：0
> 
> 时间：2013-01-17T02:28:39.467
> 
> 标签：c++, c, winapi, cryptoapi, rsacryptoserviceprovider

我正在创建一个使用一对密钥（公钥和私钥）进行加密和解密的小工具。我在我的计算机上导出公钥和私钥，我可以毫无问题地加密和解密文件。当我尝试使用相同的公钥解密其他机器中的文件时遇到问题。

```
// initializing CSP HCRYPTPROV hProv; HCRYPTKEY hKey;

if(!CryptAcquireContext(hProv, NULL, NULL, PROV_RSA_FULL, 0)){  if(GetLastError() == NTE_BAD_KEYSET){       if (!CryptAcquireContext(&hProv, NULL, NULL, PROV_RSA_FULL, CRYPT_NEWKEYSET)){          return FALSE;       }   } }

// create a pair keys if (!CryptGenKey(hProv, AT_KEYEXCHANGE,  CRYPT_ARCHIVABLE, &hKey))    return FALSE;

// public key if (!CryptExportKey(hKey, 0, PUBLICKEYBLOB, 0, NULL, sizePublicKey))  return FALSE;

*publicKey = (BYTE *) LocalAlloc(LPTR, *sizePublicKey * sizeof(DWORD)); if(*publicKey == NULL)  return FALSE;

if (!CryptExportKey(hKey, 0, PUBLICKEYBLOB, 0, *publicKey, sizePublicKey))  return FALSE; // save public key on file

// private key if (!CryptExportKey(hKey, 0, PRIVATEKEYBLOB, 0, NULL, sizePrivateKey))   return FALSE;

*privateKey = (BYTE *) LocalAlloc(LPTR, *sizePrivateKey * sizeof(DWORD)); if(*publicKey == NULL)    return FALSE;

if (!CryptExportKey(hKey, 0, PRIVATEKEYBLOB, 0, *privateKey, sizePrivateKey))   return FALSE;

PrivateKey.key = (BYTE *) LocalAlloc(LPTR, *sizePrivateKey * sizeof(DWORD)); if(*publicKey == NULL)     return FALSE; // save private key on file

//I encrypt file using  if(!CryptEncrypt(hKey, 0, TRUE, 0, cache, &sizeCache, BLOCK_SIZE_ENCRYPT)){
                free(cache);
                return FALSE;           }

//To decrypt file //First import public key

CryptImportKey(hProv, publicKey, sizePublicKey, 0, 0, &hKey)

//To decrypt:           if (!CryptDecrypt(hKey, 0, TRUE, 0, cache, &sizeCache)){
                free(cache);
                return FALSE;           } 
```

在密钥软件创建应用程序的同一台计算机上正确加密和解​​密，但如果我尝试在其他计算机上解密文件，CryptDecrypt() 失败并出现错误 80090003（GetLastError() 得到的错误）知道吗？我究竟做错了什么...？如何将公钥导出到其他计算机？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:25:55.523

可能您没有导出密钥，只是使用包含密钥的 CSP，当您在同一台计算机上时，密钥存储在您使用 cryptoapi“链接”的容器中。转到其他计算机后，容器不存在，因此您无法使用密钥。

确保私钥是可导出的。

# php - PHP MySQL将来自不同行的单元格合并为相同的值

> ID：14371264
> 
> 赞同：4
> 
> 时间：2013-01-17T02:28:46.203
> 
> 标签：php, mysql, sql, select

我有一个包含身份证号码、姓名、上课时间和教师姓名的数据库。每行包括学生的 id、姓名、期间和教师，这意味着每个学生有多行。那不是我的问题。我的问题是，有些班级列出了两名教师……这意味着 1 个班级有两行单独的行，每个教师一个。不幸的是，我无法控制数据的格式，因为它是从没有很多格式选项的系统中导出的。

这是一个示例，请注意第 23 行和第 24 行是针对同一班级和学生的，但唯一不同的是教师姓名。

```
pk  id      last    first   period  teacher
14  12345   Smith   John    3       HARRIS
15  12345   Smith   John    8       LEAL
17  12345   Smith   John    1       HOUSTON
23  56789   Doe     Jane    8       MERCER
24  56789   Doe     Jane    8       RUIZ
25  56789   Doe     Jane    3       BECK
26  56789   Doe     Jane    1       STEED 
```

我想将具有相同时期编号和学生姓名的两行合并为一行。所有信息都将保持不变，只是将两个不同的老师的名字组合成“Mercer & Ruiz”之类的东西。理想情况下，最终结果看起来像，

```
24  56789   Doe Jane    8   MERCER & RUIZ 
```

这可能使用 PHP 和/或 MySQL 吗？我不是在寻找任何人来编写整个代码或任何东西。我似乎想不出一种方法来完成它。我会对解决此问题的任何方向/指示感到满意。

一如既往，感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T02:31:16.930

```
SELECT  MAX(pk), 
        ID,
        `last`, 
        `first`,
        GROUP_CONCAT(teacher SEPARATOR ' & ') teachers
FROM    tableName
// WHERE clause here...
GROUP BY `last`, `first`, `Period`
// ORDER BY clause here.... 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ffb1f/2)

来源

*   [GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:31:45.323

```
SELECT pk,id,last,first,period GROUP_CONCAT(teacher) 
FROM table 
GROUP BY id, first,last,period 
```

应该做你需要的。

# symfony - 具有数据库连接依赖关系的自定义约束验证器 Symfony2

> ID：14371267
> 
> 赞同：12
> 
> 时间：2013-01-17T02:29:05.687
> 
> 标签：symfony

我正在向 Symfony2 项目添加自定义验证查询。

[文档](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)缺少完整的示例，我不确定如何将数据库连接实际注入到验证器类中。我在我的配置中创建了服务，在我的约束类中添加了验证的别名方法，并在我的验证器类中进行了设置：

```
use Doctrine\DBAL\Connection;

class ZipDatabaseValidator extends ConstraintValidator
{

    /**
     *
     * @var Connection
     */
    private $connection;

   public function __construct(Connection $dbalConnection)  {

        $this->connection = $dbalConnection;
    }

    public function validate($zipcode, Constraint $constraint)
    {

        $sql = 'SELECT * FROM zip_table WHERE zip_code = ?';
        $stmt = $this->connection->prepare($sql); 
         ... 
```

这是我的服务配置：

```
validator.node.zip_in_database:
        class: Acme\Bundle\Validator\Constraints\ZipDatabaseValidator
        arguments: [@database_connection]
        tags:
            - { name: validator.constraint_validator, alias: zip_in_database } 
```

我不断收到错误，在这种情况下：

> 可捕获的致命错误：传递给 Acme\Bundle\Validator\Constraints\ZipDatabaseValidator::__construct() 的参数 1 必须是 Doctrine\DBAL\Connection 的实例，没有给出，

我如何将其设置为服务或以其他方式注入数据库连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:16:01.363

```
validator.node.zip_in_database:
    class: Acme\Bundle\Validator\Constraint\ZipDatabaseValidator
    arguments: [@database_connection]
    tags:
        - { name: validator.constraint_validator, alias: zip_in_database } 
```

您必须将教义作为参数传递给您的[Service](http://symfony.com/doc/current/book/service_container.html)。

## 编辑

确保别名与 validBy 方法返回的别名相同！
在你的情况下：

```
//Acme\Bundle\Validator\Constraint\ZipDatabase class
public function validatedBy()
{
    return 'zip_in_database';
} 
```

# c# - windows phone 7 wifi，蓝牙

> ID：14371272
> 
> 赞同：0
> 
> 时间：2013-01-17T02:29:34.610
> 
> 标签：c#, windows-phone-7, bluetooth, wifi, windows-phone-8

我对 Windows Phone 上的应用程序开发的网络统计信息很少有疑问。

1）有什么办法（APIS），我们可以在windows中扫描wifi AP吗？如果连接到 AP，如何获取 SSID、BSSID 和 MAC 地址？

2）如何获取CELL ID和本地信息？

3) 应用层（TCP、UDP 和 ICP 吞吐量、延迟等）？

4) 用于连接设备和设备的蓝牙 API？

我从 msdn 中找到了很多信息。例如蓝牙连接和发现可用设备。 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207007(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207007(v=vs.105).aspx)

来到（wifi，蜂窝，以太网）他们提到普通类网络信息会有帮助吗？ [http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202867(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202867(v=vs.105).aspx) http://msdn.microsoft.com/en-us/library/windowsphone/develop/ microsoft.phone.net.networkinformation(v=vs.105).aspx

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:27:07.330

对大问题的简短回答：

1.  您无法直接从 WP8 SDK 中找到 WiFi SSID 和 Mac 地址。

2.  您无法直接从 WP8 SDK 获得有关蜂窝网络物理布局的信息。

3.  您无法直接从 WP8 SDK 获取网络传输统计信息。

4.  您可以使用蓝牙 API 枚举配对设备并打开 BT-SPP 套接字。

# android - 其他类静态（android）？

> ID：14371273
> 
> 赞同：0
> 
> 时间：2013-01-17T02:29:52.577
> 
> 标签：android, class, static

我在访问 android 中的其他类时遇到问题...我有类 databasex（非静态）和类 CountingFragment（静态）....在 CountingFragment 我想访问 databasex 类..但我得到的结果为空....这是我的一段代码...

类数据库x

```
 public class DataBasex {
     public static final String KEY_ROWID="_id";
     public static final String KEY_NAME="namaLokasi";
     public static final String KEY_JENIS="jenis";
     public static final String KEY_KETERANGAN="ket";
     public static final String tanda="DataBasex";

     private static final String DATABASE_NAME="DbPeta";
     private static final String DATABASE_TABLE="lokasi";
     private static final int DATABASE_VERSION=1;

     private DbHelper ourHelper;
     private final Context ourContext;
     private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        Log.i(tanda,"dbHelper-> "+context);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        Log.i(tanda,"onCreate-> "+db);
        /*db.execSQL("CREATE TABLE " + DATABASE_TABLE + "("+
                KEY_ROWID +" INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME +" TEXT NOT NULL, " + KEY_JENIS +" TEXT NOT NULL, " +
                KEY_KETERANGAN +" TEXT NOT NULL);");
                */
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        Log.i(tanda,"onUpgrade-> "+db);
        //db.execSQL("DROP TABLE IF EXISTS"+DATABASE_TABLE);
        //onCreate(db);
    }
}   
public DataBasex(Context c){
    ourContext =c;
    Log.i(tanda,"DataBasex-> "+ourContext);     
}

public DataBasex open() throws SQLException{
    Log.i(tanda,"DataBasex open awal ");
    ourHelper = new DbHelper(ourContext);
    ourDatabase=ourHelper.getWritableDatabase();
    Log.i(tanda,"DataBasex open-> "+ourDatabase);
    return this;
}
public void close(){
    Log.i(tanda,"[close]");
    ourHelper.close();
}
  } 
```

这是 CountingFragment 类...

```
 public static class CountingFragment extends SherlockFragment {
    //here myproblem...
    DataBasex con=new DataBasex(getSherlockActivity());

     /**
     *other method
     */
  } 
```

我认为下面的代码是我的问题

```
 DataBase con=new DataBase(getSherlockActivity()); 
```

如果在非静态类中我使用下面的代码并且一切正常……但在静态类中我不能……为什么？

```
 DataBase con=new DataBase(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:36:43.857

这是因为`Fragment`s 需要**先**附加到一个 Activity 上（查看[`Fragment`](http://developer.android.com/guide/components/fragments.html)s 上的文档才能返回一个 Activity。特别是[生命周期](http://developer.android.com/images/fragment_lifecycle.png)。首先将 Fragment 附加到一个 Activity 上（并被`onAttach()`调用。然后 Fragment 可以获取一个 Activity 实例。

```
DataBasex con=new DataBasex(getSherlockActivity()); 
```

位于 Class 的根目录中，它将返回 null - Fragment 立即没有 Activity。

改变

```
DataBasex con=new DataBasex(getSherlockActivity()); 
```

所以它是：

```
DataBasex con; 
```

并添加此方法：

```
@Override
public void onCreate (Bundle b)
{
  super.onCreate (b);
  con = new DataBasex(getSherlockActivity());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:36:31.890

原因是在静态类中没有对象，方法的访问将是类级别的访问，但在非静态类中会有该类的对象，那么你应该没有空值在非静态类中

# c# - 如何获取我的 Windows 应用商店应用的标题和版本信息？

> ID：14371275
> 
> 赞同：8
> 
> 时间：2013-01-17T02:30:05.553
> 
> 标签：c#, exception-handling, xml-parsing, windows-phone-8, windows-store-apps

此代码在我的 WP8 应用程序中运行良好：

```
void App_UnhandledException(object sender, UnhandledExceptionEventArgs args)
{
    string appName;
    string appVersion;
    var xmlReaderSettings = new XmlReaderSettings
    {
        XmlResolver = new XmlXapResolver()
    };

    using (var xmlReader = XmlReader.Create("WMAppManifest.xml", xmlReaderSettings))
    {
        xmlReader.ReadToDescendant("App");

        appName = xmlReader.GetAttribute("Title");
        appVersion = xmlReader.GetAttribute("Version");
    }

    WAMS_EXCEPTIONLOG wamsel = new WAMS_EXCEPTIONLOG
    {
        appNameAndVersion =
            string.Format("{0} {1}", appName,
                          appVersion),
        ExceptionMsg =
            args.ExceptionObject.Message,
        InnerException =
            args.ExceptionObject
                .InnerException.ToString(),
        ExceptionToStr =
            args.ExceptionObject.ToString(),
        dateTimeOffsetStamp =
            DateTimeOffset.UtcNow
    };
    await MobileService.GetTable<TASLS_WAMS_EXCEPTIONLOG>().InsertAsync(wamsel);
} 
```

...但在我的补充 Windows 商店应用程序中，几个班级和班级成员无法识别，即：

```
XmlResolver
XmlXapResolver
args.ExceptionObject 
```

（更不用说不允许等待的事实，并且将“异步”添加到事件处理程序会导致事件处理程序的分配“变红”）......

那么，回到重点：如何通过 Windows Store 应用程序实现与 WP8 应用程序相同的功能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T05:55:34.743

我先解决你的问题：

*   无需直接从 XML 读取包信息，您可以使用[PackageId 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.packageid.aspx)代替。
*   异常信息存储在`args.Exception`.
*   您可以通过输入方法签名从事件处理程序调用异步方法，`async void`但您必须记住，该方法将在“即发即弃”模式下调用，即应用程序不会等待异步方法完成。这如果您设置`args.Handled = true`并因此阻止应用程序关闭，则应该不是问题。

您的固定事件处理程序应如下所示：

```
private async void App_UnhandledException(object sender, UnhandledExceptionEventArgs args)
{
    string appName = Package.Current.Id.Name;
    var version = Package.Current.Id.Version;
    string appVersion = String.Format("{0}.{1}.{2}.{3}", 
        version.Major, version.Minor, version.Build, version.Revision);

    WAMS_EXCEPTIONLOG wamsel = new WAMS_EXCEPTIONLOG
    {
        appNameAndVersion = string.Format("{0} {1}", appName, appVersion),
        ExceptionMsg = args.Exception.Message,
        InnerException = args.Exception.InnerException.ToString(),
        ExceptionToStr = args.Exception.ToString(),
        dateTimeOffsetStamp = DateTimeOffset.UtcNow
    };
    args.Handled = true;
    await MobileService.GetTable<TASLS_WAMS_EXCEPTIONLOG>().InsertAsync(wamsel);
} 
```

在调用它之前，您还应该检查是否`args.Exception.InnerException`为空`ToString()`。

# c# - 具有泛型的 FileHelpers 主/详细记录

> ID：14371277
> 
> 赞同：2
> 
> 时间：2013-01-17T02:30:27.830
> 
> 标签：c#, generics, filehelpers

我在让主详细信息记录与泛型一起使用时遇到问题。我的代码如下

```
// Setup file engine with Master/Detail types
MasterDetailEngine<PurchaseOrderHeader, PurchaseOrderLine> engine = new MasterDetailEngine<PurchaseOrderHeader, PurchaseOrderLine>(CommonSelector.MasterIfBegins, "H");

// Init the Master/Detail
MasterDetails<PurchaseOrderHeader, PurchaseOrderLine> poRecs = new MasterDetails<PurchaseOrderHeader, PurchaseOrderLine>();

// Setup list for detail lines & populate with test data
List<PurchaseOrderLine> poLines = new List<PurchaseOrderLine>();

for (int i = 1; i <= 5; i++)
{
    poLines.Add(new PurchaseOrderLine() { LineMarker = "L", LineNumber = i, ItemCode = "TestCode", Price = 12.34M, Quantity = i * 2, UOM = "EA" });
}

// Attach records to Master/Detail
poRecs.Master = new PurchaseOrderHeader() { LineMarker = "H", PayloadID = "3223232@ariba.acme.com", CustomerPO = "DO1234", ShipToAddressCode = "ShipToAddressCode", BillToAddressCode = "BillToAddressCode" };
poRecs.Details = poLines.ToArray();

// Write file
engine.WriteFile("SampleFile.txt", poRecs); 
```

我收到以下编译错误：

> CS1502：最好的重载方法匹配 `FileHelpers.MasterDetail.MasterDetailEngine<ImportExport.PurchaseOrderHeader,ImportExport.PurchaseOrderLine>.WriteFile(string,System.Collections.Generic.IEnumerable<FileHelpers.MasterDetail.MasterDetails<ImportExport.PurchaseOrderHeader,ImportExport.PurchaseOrderLine>>)`
> 
> 有一些无效的论点。

我尝试过投射`poRecs`，`IEnumerable`但仍然无法正常工作。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:06:35.027

看起来对`WriteFile`期望的调用是 a `IEnumerable<MasterDetails<PurchaseOrderHeader, PurchaseOrderLine>>`，而您只是传入 a `MasterDetails<PurchaseOrderHeader, PurchaseOrderLine>`。

当然，您不能将 a转换`MasterDetails`为 an，`IEnumerable`因为它们不可转换。您需要做的是`poRecs`用`IEnumerable`. 尝试以下操作：

```
engine.WriteFile("SampleFile.txt", new[] { poRecs }); 
```

# javascript - 如何从一个 HTML 文件中打开多个选项卡

> ID：14371285
> 
> 赞同：3
> 
> 时间：2013-01-17T02:31:19.763
> 
> 标签：javascript, html, browser, tabs

我在许多计算机上工作，**这意味着它们使用默认浏览器设置**（更改浏览器设置没有意义，因为我每次都必须这样做）。我需要制作一个 HTML 文件，该文件将打开所需页面的特定列表（将其视为打开我所有的书签）。例如，我访问 facebook、yahoo 和 stackoverflow。我想单击那个 HTML 文件，它会在同一个窗口（不同的选项卡）上打开这 3 个站点。

此外，在所有站点上自动登录等功能是否易于实施？

**注意**：专注于“便携式”解决方案。假设您只有默认浏览器设置。无需设置服务器、更改浏览器设置等。想象一下，你有 200 台电脑，你可以坐在其中的任何一台上。您只有一个带有一些文件的闪存驱动器。我想单击一个 HTML 文件或一些脚本或其他任何内容，以便这些页面在我的浏览器中打开，而不会触发弹出窗口阻止程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T03:19:55.680

使用批处理文件怎么样？我刚刚在带有 Chrome 的 Windows 7 中尝试过，它在同一个窗口中打开了所有 3 个 URL。

使用记事本制作一个名为`file-name.bat`. 然后添加此代码：

```
start chrome.exe http://www.google.com
start chrome.exe http://www.yahoo.com
start chrome.exe http://www.microsoft.com 
```

您所要做的就是双击它来运行它。您可能会收到安全警告（我没有）。

您也可以检查一下：[用于打开 URL 列表之一的批处理文件](https://stackoverflow.com/questions/1350225/batch-file-for-opening-one-of-a-list-of-urls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:41:20.740

```
<script type='text/javascript'>
(function(){
  //add this line for each website you want to open
  window.open("http://www.facebook.com/",'');
})()
</script> 
```

这个问题有更多的答案在[这里工作](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T02:56:26.960

试试这个例子。我希望这样的事情是你想要的。关于弹出窗口被阻止，您必须配置浏览器以允许从此页面打开弹出窗口。我知道绕过弹出窗口阻止程序的最简单方法是将此页面放在本地服务器（如 apache）中，并将浏览器设置为允许从本地主机弹出。

```
<html>
<script>
function openLinks(){
links = document.getElementsByTagName('a');

 for (i = 0; i < links.length;i++){ 
   window.open(links[i].getAttribute('href'),'_blank');
   window.focus();
 }
}
</script>

<body onload="openLinks()">

<a href="http://google.com">google</a>
<a href="http://stackoverflow.com">stackoverflow</a>
<a href="http://facebook.com">facebook</a>
<!-- add other link -->

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T02:55:11.767

此功能内置在 Chrome 中。如果您不必使用 HTML 文件，请尝试在 Chrome 的设置中设置您的启动页面。您可以根据需要添加任意数量的页面。

[http://support.google.com/chrome/bin/answer.py?hl=en&answer=95421](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95421)

![在此处输入图像描述](../Images/9b553313069c411e78211567b1566e80.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-17T02:55:09.597

您可以为要打开的每个页面添加 window.open(adress) ，或者如果您想打开一个页面特定次数，则可以使用 for 循环。

# php - responseText 没有显示任何内容

> ID：14371290
> 
> 赞同：0
> 
> 时间：2013-01-17T02:31:44.527
> 
> 标签：php, javascript, ajax, httpresponse

我正在玩一些 Ajax，我正在使用以下代码。

```
var r = new XMLHttpRequest();
r.open("POST", "pythonTesting.php", true);
r.onreadystatechange = function () {
    if (r.readyState === 4 && r.status === 200) {
        alert("Success: " + r.responseText);
    }
};
r.send("text=yellow"); 
```

它是成功的，但警报没有显示实际的`responseText`.

pythonTesting.php（不要被名称混淆）只是：

```
 <?php
   echo $_POST['text'];
 ?> 
```

我期待它`responseText`是，`yellow`因为这就是我发送它的方式，但它不是。不过，我并没有真正看到问题所在。它一定是容易修复的错误之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:57:09.137

由于这是一篇文章，我相信您需要设置长度：

```
r.setRequestHeader("Content-length", "text=yellow".length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:06:00.787

来自[http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)：

```
xmlhttp.open("POST","ajax_test.asp",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("fname=Henry&lname=Ford"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T22:34:14.883

通过地址发送变量：

```
r.open("POST", "pythonTesting.php?text=yellow", true); 
```

然后通过以下方式检索php中的变量

```
$text = $_REQUEST['text']; 
```

# ios - 使用 TouchDown 事件防止 TouchUpInside 事件触发

> ID：14371293
> 
> 赞同：0
> 
> 时间：2013-01-17T02:31:48.240
> 
> 标签：ios, events, uibutton

我有一些 UIButtons 都有 TouchUpInside 事件。其中一些也有 TouchDown 事件。在某些情况下，我希望 TouchDown 事件中的代码可以防止触发 TouchUpInside 事件。

如何使该事件系列短路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:38:35.657

您可以在 touch down 方法中设置一个标志，并在 touch up inside 方法中检查该标志的状态，以决定是否执行其正常操作。

# jquery - 如何删除 div 的所有子元素上的 JQM 样式

> ID：14371295
> 
> 赞同：1
> 
> 时间：2013-01-17T02:32:19.473
> 
> 标签：jquery, jquery-mobile, jquery-selectors

所以我有一个使用 JQM 和 twitter 引导程序的移动应用程序，基本上我将 JQM 用于导航栏、导航等，但我不希望内容样式低于某个名为 .content 的元素

```
<div data-role="page" id="home">

    <div class="content clearfix">

     //bunch of dom stuff here

    </div>
</div> 
```

我尝试过的一些策略都失败了

1.  以某种方式用 :not(.content) 选择器包装整个 Jquery 移动 CSS 样式表
2.  尝试选择具有任何 ui-* 属性的元素并删除该类
3.  将 data-role="none" 添加到 .content 下面的所有 elemnets

我觉得第一个会是最快的，但不太确定如何做到这一点这是我对方法 #3 所拥有的方法 在事件 pagebeforecreate 中添加 data=role="none" 到所有元素

```
 $(document).on('pagebeforecreate', "[data-role=page]", function() {

   $('.content *',$(this)).each(function(index, value) {
         $(this).attr('data-role','none');
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:07:59.387

你可以设置`data-enhance="false"`你的`container`元素。您还需要启用以`Global Configuration`标记 -`ignoreContentEnabled`

请注意，设置`ignoreContentEnabled`会导致页面增强过程中的性能下降。

阅读[数据属性文档](http://jquerymobile.com/test/docs/api/data-attributes.html)`Enhancement`部分

# css - Twitter Bootstrap form-inline Not Lining Controls Up

> ID：14371298
> 
> 赞同：1
> 
> 时间：2013-01-17T02:33:04.363
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我在 Rails 应用程序中使用 Twitter Bootstrap。我正在尝试将搜索字段与“搜索”按钮和“帮助”按钮对齐，该按钮将使用 Accordion Javascript 控件用帮助内容扩展下面的区域。

我一切正常，但是“帮助”按钮与其他控件不在同一行。手风琴控件需要一个 DIV，所以我不确定这是否会导致问题。帮助按钮不会停留在同一行，而是显示在左对齐的搜索字段下方。

这是我的代码：

```
<p><strong>Enter Search Criteria</strong></p>
        <form class="form-inline">

          <input type="text" class="input-large" placeholder="Name, Phone, Conf Rm" autofocus >
          <button type="submit" class="btn">Search</button> 
            <div class="details">

                        <!-- accordian button -->

                <div class="accordion">
                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseHelp"> <button type="link" class="btn btn-info btn-small">
                      <i class="icon-question-sign"></i>
                    </button></a>
                </div>
        </form>
    </div>

    <!-- Accordian area -->

        <div id="collapseHelp" class="accordion-body collapse style="height: 0px; ">
          <div class="accordion-inner">
            <p><strong>Person Search:</strong> Last Name, First Name (e.g. Smith, John)</p>
                <p><strong>Conference Room Search:</strong> Plaza-Building, Suite-Name (e.g South-I2W-20E-1)</p>
                <p><strong>Phone Number Search:</strong> Please provide at least the last 4 digits of the phone number (e.g. 8686)</p>
          </div>
        </div>

    <!-- End accordian area --> 
```

非常感谢所有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:53:56.473

您的手风琴按钮不需要驻留在容器中才能正常工作，因此只需删除`.details`和`.accordion`容器，您的按钮应该与其余的控制按钮对齐就好了。

**HTML**

```
<p><strong>Enter Search Criteria</strong></p>
        <form class="form-inline">

          <input type="text" class="input-large" placeholder="Name, Phone, Conf Rm" autofocus >
          <button type="submit" class="btn">Search</button> 
                        <!-- accordian button -->

          <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseHelp"> <button type="link" class="btn btn-info btn-small">
              <i class="icon-question-sign"></i>
            </button></a>

        </form>

    <!-- Accordian area -->

        <div id="collapseHelp" class="accordion-body collapse" style="height: 0px; ">
          <div class="accordion-inner">
            <p><strong>Person Search:</strong> Last Name, First Name (e.g. Smith, John)</p>
                <p><strong>Conference Room Search:</strong> Plaza-Building, Suite-Name (e.g South-I2W-20E-1)</p>
                <p><strong>Phone Number Search:</strong> Please provide at least the last 4 digits of the phone number (e.g. 8686)</p>
          </div>
        </div>

    <!-- End accordian area --> 
```

演示：http: [//jsbin.com/eyajig/1](http://jsbin.com/eyajig/1)

# three.js - 在 THREE.js 中，如何使纹理独立于分辨率并呈现不模糊？

> ID：14371299
> 
> 赞同：1
> 
> 时间：2013-01-17T02:33:07.547
> 
> 标签：three.js

我正在尝试将纹理应用于 THREE.js 中的网格，但为了获得可接受的清晰度，我不得不使用比期望大得多的 PNG，大小最多为数百像素平方。例如，如果我要使用一些简单的东西，例如八乘八方格图案，那么最小的分辨率可能看起来像一堆点。

用于纹理的代码是`THREE.ImageUtils.loadTexture("sprites/land1.png");`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T12:02:58.547

如[本例](http://mrdoob.github.com/three.js/examples/webgl_geometry_minecraft.html)所示，您需要设置纹理的过滤。

```
var texture = THREE.ImageUtils.loadTexture( 'texture.png' );
texture.magFilter = THREE.NearestFilter;
texture.minFilter = THREE.LinearMipMapLinearFilter; 
```

# jquery - 我应该将我的 jQuery 代码放在我的 Ruby on Rails 应用程序中的什么位置？

> ID：14371303
> 
> 赞同：5
> 
> 时间：2013-01-17T02:33:25.710
> 
> 标签：jquery, ruby-on-rails

我对 RoR 和 jQuery 相当陌生。目前，我有一个可用的 RoR 站点作为学习平台。我想包含一些 jQuery 基本功能来扩展我的学习（.mouseenter()、.hover()、.fadeIn() 等）。

让我用一些代码来设置场景（我已经剪掉了一些部分以保持简短）：

```
$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux]
$ rails -v
Rails 3.2.8 
```

宝石文件：

```
gem 'jquery-rails' 
```

配置/路由.rb：

```
root to: 'static_pages#home' 
```

应用程序/控制器/static_pages_controller.rb：

```
def home
    @Presents = Present.all.reverse.take(20)
end 
```

应用程序/视图/布局/application.html.erb：

```
<!DOCTYPE html>
    <html>
        <head>
            <title>List</title>
            <%= stylesheet_link_tag    "application", :media => "all" %>
            <%= javascript_include_tag "application" %>
            <%= csrf_meta_tags %>
            <%= render 'layouts/shim' %>
        </head>
        <body>
            <div class="container-narrow">
                <%= render 'layouts/header' %>
                <%= yield %>
            </div>
        </body>
    </html> 
```

应用程序/资产/javascripts/application.js：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

应用程序/views/static_pages/home.html.erb：

```
<div class="jumbotron">
    <h1>Heading</h1>
</div>
<%= render 'shared/list' %> 
```

应用程序/视图/共享/_list.html.erb：

```
<% if @Presents.any? %>
    <%= render partial: 'shared/list_item', collection: @Presents %>
<% end %> 
```

应用程序/视图/共享/_list_item.html.erb：

```
<div id="present">
    <ul id="<%= list_item.id %>">
        <span class="content">
            Some content here
        </span>
</div> 
```

理想情况下，我希望我的 jQuery 能够影响`<div>`with `id="present"`。这是我的测试 jQuery：

```
$(document).ready(function(){
    $('#present').mouseenter(function(){
        $(this).fadeIn('fast',1);
    }
    $('#present').mouseleave(function(){
        $(this).fadeIn('fast',0.5);
    }
}); 
```

目前，我已经存储了上述`app/views/static_pages/home.js.erb`内容，没有任何反应。这是一个合适的位置吗？或者我应该把它转移到`app/views/shared/`目录？

从我呈现的网站页面 - 有没有办法检查我的 jQuery 是否被包含和执行？我觉得我当前的阻塞点是我 home.js.erb 的位置。

**编辑：在我的 jQuery 中检测到错误 - 更正如下：**

jQuery：

```
$(document).ready(function(){
    $('#present').mouseenter(function(){
        $(this).fadeTo('fast',1);
    });
    $('#present').mouseleave(function(){
        $(this).fadeTo('fast',0.5);
    });
}); 
```

并正确使用`fadeTo`. `fadeIn`正如我尝试的那样，不接受关于不透明度的第二个论点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T02:42:28.843

您应该在`app/assets/javascripts/`与视图关联的控制器之后的名称中创建一个文件，例如对于名为`home`它的控制器：`app/assets/javascripts/home.js`然后在您的`application.js`文件中将其包含到资产管道中，如下所示：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require home 
```

但是由于您已经进行`//=require tree .`了上述修改，`application.js`因此应该没有必要，但我建议您按照上述方式进行操作，并单独包含所有文件，以便您可以更好地控制何时包含您的 JS。

编辑：另外，我建议将您使用的绑定从 ID 更改为 Class，以防您想重用此功能。

出于测试目的查看 JS 是否正在执行，您可以添加如下内容：

```
$(document).ready(function(){
    $('#present').mouseenter(function(){
        alert("MouseEnter!"); // This will create an alert box
        console.log("MouseEnter!"); // This will log to the JS console on your browser which is a bit nicer to read than alerts, you do not need both, just preference
        $(this).fadeIn('fast',1);
    }
    $('#present').mouseleave(function(){
        alert("MouseLeave!"); // This will create an alert box
        console.log("MouseLeave!");
        $(this).fadeIn('fast',0.5);
    }
}); 
```

这只是为了快速测试 JS，当然你不应该把这些留在你的代码中。

此外，在再次查看 JS 之后，您可能想尝试这样的事情：

```
$(document).ready(function(){
    $('#present').mouseenter(function(){
        $(this).fadeIn('fast',1);
    }).mouseleave(function(){
        $(this).fadeIn('fast',0.5);
    });
}); 
```

注意关闭`);`

# sql - LDAP-SQL 查询 LDAP 管理员 - 搜索 ObjectGUID

> ID：14371306
> 
> 赞同：0
> 
> 时间：2013-01-17T02:34:20.970
> 
> 标签：sql, active-directory

我正在使用 LDAP Administrator 2013.1，并且正在寻找对象 GUID。

`ObjectGUID`是`{824582FD-5728-4C54-B699-D701D9D48196}`

有一个执行 LDAP SQL 查询的选项

看起来很简单，但我无法让它工作。

我的查询是：

```
SELECT $name 
FROM "OU=Workstations,OU=Vista,DC=lab,DC=local" 
WHERE $currentValue = '{824582FD-5728-4C54-B699-D701D9D48196}' PAGESIZE 2 
```

我正在尝试输出的名称`ObjectGUID` `{824582FD-5728-4C54-B699-D701D9D48196}`

我知道它在那里，因为我手动查找了它......

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:20:47.840

ObjectGUID 是一种特殊的二进制类型，因此无法在您尝试时直接使用字符串表示进行查询。

这是Joe Kaplan 在另一个论坛上的[帖子](http://www.winvistatips.com/objectguid-search-t702451.html)，描述了如何执行此操作：

> ...过滤器字符串如下所示：
> 
> (objectGUID=\BA\EF\9F\88\DD\E8\5E\46\9B\F8\0E\0C\4 1\12\9D\40)
> 
> 对于此 GUID：
> 
> 889FEFBA-E8DD-465E-9BF8-0E0C41129D40
> 
> 本质上，您需要获取您拥有的 COM 字符串 GUID，将其转换为二进制 GUID，然后将该二进制数据转换为八位字节字符串，每个二进制字节都以 \ 为前缀，如上所示。
> 
> 如果您需要帮助，可以在 www.directoryprogramming.net 的文件部分发布一个名为 GUIDConverter 的小型 .NET 实用程序，它可以为您完成这些转换。

因此，您唯一缺少的部分是将 GUID 的字符串表示形式转换为二进制并正确格式化查询。字节数组序列为：

> [3] [2] [ [1](http://www.winvistatips.com/objectguid-search-t702451.html) ] [0] - [5] [4] - [7] [6] - [8] [9] - [10] [11] [12] [13] [14] [ 15]

# qt - 在 QLineEdit 中更改 QCompleter 结果

> ID：14371307
> 
> 赞同：0
> 
> 时间：2013-01-17T02:34:30.733
> 
> 标签：qt

`QLineEdit`用于输入邮政编码。用户也可以输入城市名称，同时`QCompleter`会显示一个名称列表供用户选择。问题是，在完成者中选择名称时，如何将邮政编码放入`QLineEdit`？我尝试将`QCompleter::activated`( ) 连接到将文本更改为邮政编码`QModelIndex`的插槽。`QLineEdit`但后来文本再次被设置为城市名称`QLineEdit`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:14:01.760

对不起，我之前的答案不正确，所以我已经编辑了它。

正如文档所说：

> QString QCompleter::pathFromIndex ( const QModelIndex & index ) const [虚拟]
> 
> 返回给定索引的路径。完成者对象使用它从底层模型中获取完成文本。默认实现返回列表模型的项目的编辑角色。如果模型是 QDirModel，它返回绝对文件路径。

`QCompleter`通过子类化和重新实现，我得到了你需要的东西`pathFromIndex`：

```
class CodeCompleter : public QCompleter
{
    Q_OBJECT
public:
    explicit CodeCompleter(QObject *parent = 0);

    static const int CompleteRole;

    QString pathFromIndex(const QModelIndex &index) const;
};

const int CodeCompleter::CompleteRole = Qt::UserRole + 1;

CodeCompleter::CodeCompleter(QObject *parent) :
    QCompleter(parent)
{

}

QString
CodeCompleter::pathFromIndex(const QModelIndex &index) const
{
    QMap<int, QVariant> data = model()->itemData(index);
    QString code = data.value(CompleteRole).toString();
    return code;
} 
```

你可以像这样使用它：

```
QStringList cities;
    cities << "Moscow" << "London" << "Las Vegas" << "New York";

    QStandardItemModel *model = new QStandardItemModel;
    for (int i = 0; i < cities.count(); ++i)
    {
        QString city = cities.at(i);
        QString code = city.at(0) + QString::number(city.length());///< just an example

        QStandardItem *item = new QStandardItem;
        item->setText(city);
        item->setData(code, CodeCompleter::CompleteRole);

        model->appendRow(item);
    }

    QLineEdit *lineEdit = new QLineEdit(this);

    CodeCompleter *completer = new CodeCompleter(this);
    completer->setModel(model);
    completer->setCaseSensitivity(Qt::CaseInsensitive);
    lineEdit->setCompleter(completer); 
```

# cloud-foundry - 开发回显服务时出现 NATS 错误

> ID：14371308
> 
> 赞同：1
> 
> 时间：2013-01-17T02:34:47.830
> 
> 标签：cloud-foundry, gateway

我正在尝试开发系统服务，所以我使用回显服务作为测试。我按照 CF 文档上的说明开发了该服务。现在 echo 节点可以运行，但 echo 网关失败，错误为“echo_gateway - pid=15040 tid=9321 fid=290e 错误 - 由于 NATS 错误而退出：无法连接到 nats://localhost:4222 上的服务器/"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:53:55.723

我陷入了这个问题并罢工了将近一个星期，终于有人帮我解决了这个问题。潜在的问题是别的东西，由于错误没有被正确捕获，它会给出错误的信息。您需要转到 github 并获取最新的代码库。此问题的修复方法是[http://reviews.cloudfoundry.org/#/c/8891](http://reviews.cloudfoundry.org/#/c/8891)。解决此问题后，您很可能会遇到超时字段问题。解决方案是定义超时字段 gateway.yml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:01:22.813

echo_gateway.yml.erb 文件中需要一些其他属性 - 具体来说，最新的是**default_plan**和**timeout**，位于**服务**组下。这些属性已添加到vcap-services-sample-release存储库中的[相应文件中。](https://github.com/cloudfoundry/vcap-services-sample-release/blob/master/jobs/echo_gateway/templates/echo_gateway.yml.erb#L24)

看起来[误导性错误的修复](http://reviews.cloudfoundry.org/#/c/8891/)已合并到 github。我自己还没有更新和验证这一点，但 gerrit 评论表明解决方案与节点库已有一段时间的解决方案相同。我之前确实遇到过这种错误处理，它更有帮助。

# python - 如何使变量等于一个字符串以上 - Python

> ID：14371310
> 
> 赞同：1
> 
> 时间：2013-01-17T02:34:58.227
> 
> 标签：python, string, variables, python-3.3

我正在做一个问答游戏，当我被问到任何问题时，我输入正确的答案，我在 a 变量中定义了正确的答案，但如果它不是第一个单词，它会说这是错误的变量（在本例中为 Metallica）。这是我的代码的样子。

```
q1answer = "Metallica" or "metallica" or "Slayer" or "slayer" or "Anthrax" or "anthrax" or "Megadeth" or "megadeth"

answerinput = str(input("name one of the 'Big Four' metal bands'"))

if answerinput == q1answer:
    print ("You got the right answer!")
else:
    print ("That is the wrong answer...") 
```

现在，如果我要输入“Metallica”，那将是正确的，因为它是 q1answer 变量的第一个单词。但是，如果我输入 metalica、Slayer、slayer、Anthrax、anthrax、megadeth 或 Megadeth，我会得到错误的答案文本。如果我要输入除该变量中的第一个单词以外的任何内容，是否有办法让所有这些字符串都适用于这个变量？我是python的新手，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:37:48.270

将它们放入一组并使用以下方法测试正确答案`in`：

```
q1answer = {"Metallica", "metallica", "Slayer", "slayer", "Anthrax", "anthrax", "Megadeth", "megadeth"}
...
if answerinput in q1answer: 
```

现在，您的`or`s 系列只是导致第一个 - `"Metallica"`。您还可以停止重复每个名称以不区分大小写，而是使用`lower`：

```
if answerinput.lower() in q1answer: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:37:49.457

像这样更改您的代码：

```
q1answer = ("metallica", "slayer", "anthrax", "megadeth")
...

if answerinput.lower() in q1answer:
    ... 
```

# java - 哪些读卡器支持 Java Card？

> ID：14371311
> 
> 赞同：1
> 
> 时间：2013-01-17T02:35:12.650
> 
> 标签：java, smartcard, javacard

我正在研究 Java Card 3.0 技术。基本上，要求是通过使用 Java 卡的 Java 小程序从 Web 浏览器读取智能卡详细信息。我的问题是 Java Card 是支持所有智能卡读卡器还是只支持特定型号的设备？只想购买支持 Java Card 技术的合适设备

我在谷歌上搜索找不到答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:31:39.037

您可以在具有 PC/SC（Winscard、PCSC-Lite..）的工作实现和工作支持智能卡使用的接口的 PC/SC 读卡器（ISO 7816-3、ISO 14443、它们的变体）。

几乎所有的智能卡读卡器都与 PC/SC 兼容（少数例外是古董或非常专业的，例如测试工具）。没有专门支持 Java Card Smart Cards 的东西。

与智能卡通信的程序可以是构建在 PC/SC 之上的本地程序，也可以是使用自 JRE 版本 (1.)6 以来内置于 Java中的[包的 Java 程序。`javax.smartcardio`](http://docs.oracle.com/javase/6/docs/jre/api/security/smartcardio/spec/javax/smartcardio/package-summary.html)阅读器端开发不需要 Java Card（尽管它可能包含我不知道的有用的附加层）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:26:29.533

这是初学者的非最终列表：

[http://pcsclite.alioth.debian.org/ccid/section.html](http://pcsclite.alioth.debian.org/ccid/section.html)

JavaCard 与其他任何智能卡一样是 ISO7816 智能卡，因此所有标准智能卡读卡器都可以工作。CCID 是通用 USB 标准，表示支持跨平台。

只需从上面的列表中选择一个旁边没有任何“红色”标记的东西。

# javascript - ExtJS 4 组件未找到数据存储

> ID：14371312
> 
> 赞同：2
> 
> 时间：2013-01-17T02:35:19.167
> 
> 标签：javascript, model-view-controller, extjs

使用 Sencha MVC 示例作为指南，我创建了以下数据存储：

```
Ext.define('CART.store.CartStore', {
extend: 'Ext.data.Store',
model: 'CART.model.CartModel',
autoLoad: true,
storeId: 'thecart',

proxy: {
    type: 'ajax',
    api: {
        read: 'app/testdata/items.json'
    },
    reader: {
        type: 'json',
        root: 'Items',
        successProperty: 'success'
    }
}
}); 
```

我定义了一个引用数据存储的网格面板，如以下片段所示：

> Ext.define('CART.view.CartContents',{
> 
> 扩展：'Ext.grid.Panel'，
> 
> 别名：'widget.CartList',
> 
> title: '购物车内容',
> 
> 商店：“购物车”，
> 
> ...其他的东西...
> 
> });

当我在没有 CartContents 的“商店”属性的情况下运行我的应用程序时，网格播放没有问题。不幸的是，将“store”设置为数据存储区的 ID，当我在 Firebug 中运行应用程序时，我看到以下失败：

> 时间戳：2013 年 1 月 16 日晚上 9:19:08
> 
> 错误：TypeError：me.store 未定义
> 
> 源文件：<my-url-to>/ext-all-debug.js
> 
> 线路：94926

注意我必须输入 <my-url-to> 因为这个发布应用程序不允许我使用确切的 URL 发布这个。

显然，该应用程序没有找到 CartStore，尽管根据文档和示例中的信息，它应该找到。

有人能告诉我我是否遗漏了什么吗？如何让我的 Grid 找到数据存储？

有人请指教。

2013 年 1 月 17 日更新：我接受了以下两个答案中提供的建议（感谢您的快速回复）。新的视图对象片段如下所示：

> Ext.define('CART.view.CartContents',{
> 
> 扩展：'Ext.grid.Panel'，
> 
> 别名：'widget.CartList',
> 
> 需要：['CART.store.CartStore']，
> 
> title: '购物车内容',
> 
> 商店：'CartStore'，
> 
> ...其他的东西...
> 
> });

不幸的是，我仍然遇到同样的错误。我确实尝试过刷新缓存，以防浏览器没有获取更新的页面。这也没有任何效果。me.store 仍然显示为未定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:48:38.037

将以下内容添加到您的自定义购物车组件中：

```
requires: ['CART.store.CartStore'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:04:23.593

ID 属性不用于设置视图存储

尝试替换它：

```
store: 'thecart', 
```

对此：

```
store: 'CartStore', 
```

并添加要求

```
requires: ['CART.store.CartStore'] 
```

在视图类

# zeromq - 如何设置 zeromq 发送消息块？

> ID：14371314
> 
> 赞同：-2
> 
> 时间：2013-01-17T02:35:30.137
> 
> 标签：zeromq, pyzmq

如何配置`zeromq`可以发送块消息的参数，</p>

当一个进程向另一个进程发送消息时，</p>

如果另一个进程没有收到消息，则发送消息的进程将在`send`函数上阻塞`return`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:33:24.670

这是最简单的 REQ-REP 套接字模式；检查 ZeroMQ 指南“Hello World”示例。

# sql - SQL Server 删除记录

> ID：14371315
> 
> 赞同：1
> 
> 时间：2013-01-17T02:35:37.477
> 
> 标签：sql, sql-server, tsql, sql-delete

我有两张桌子`computers`，和`softwareinstalls`。

Computers 的主键是 computerid，softwareinstalls 有三个字段（installid、computerid 和 lastmodifieddate）。

软件安装computerid 加入computers.computerid。

我正在尝试删除计算机上的所有软件安装，这些软件安装的最后修改日期比该计算机的最大值早 1 天多，所以...

软件安装表

```
install  computerid  lastmodifieddate
1        1           01-16-13
2        1           01-16-13
3        1           01-14-13
4        2           01-12-13
5        2           01-10-13 
```

将删除记录 3 和 5。sql server 中的查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:38:22.653

您可以加入删除语句。用于`LEFT JOIN`此。

```
DELETE  a
FROM    softwareinstalls a
        LEFT JOIN
        (
            SELECT computerID, max(lastmodifieddate) max_date
            FROM softwareinstalls
            GROUP BY computerID
        ) b ON a.computerID = b.computerID AND
                a.lastmodifieddate = b.max_date
WHERE   b.computerID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/df16b/2)

为了获得更好的性能，请在列`computerID`和`lastmodifieddate`.

# java - Java 中的 SocketException：通过 TCP/IP 传输文件

> ID：14371316
> 
> 赞同：-1
> 
> 时间：2013-01-17T02:35:37.220
> 
> 标签：java, sockets, tcp, socketexception

我正在尝试使用 TCP/IP 将文件从一台计算机传输到另一台计算机。我已经用java编写了代码，如下所示。但是，代码不起作用，在使用多个 catch 块后，我发现这是由于“SocketException”引起的。谁能告诉我如何解决这个问题？这是我的代码-

**TCP客户端**

```
 import java.net.*; 
```

导入 java.io。*; 导入 java.util。*;

公共类 TCPClient {

```
 public static void main (String args[])
  {
     try
     {
        Socket sock = new Socket("localhost", 6839);
        InputStream is = null;
        FileOutputStream out = null;
        boolean doesntexist=false;
        String filename = "D:\\"+"Test"+".pdf";
        System.out.println("Here!");
        File newplaylist = new File(filename);
        doesntexist = newplaylist.createNewFile();

        if(!doesntexist)
        {
           newplaylist.delete();
           newplaylist.createNewFile();
        }

        byte[] mybytearray = new byte[1024];

        is = sock.getInputStream();
                                // Create a new file output stream.
        out = new FileOutputStream(newplaylist);

        int count;
        while ((count = is.read(mybytearray)) >= 0) {
           out.write(mybytearray, 0, count);
        }
        out.close();
        is.close();
        sock.close();
     }      
        catch(SocketException e)
       {
        System.out.println("Socket exception");
       }
        catch(ProtocolException e)
        {
           System.out.println("Protocol exception");
        }
        catch(IOException ds)
        {
           ;
        }
  } 
```

}

**TCP服务器**

```
 import java.util.*;
 import java.io.*;
 import java.net.*;
 import java.nio.channels.*;

 class Fileserver
 {
    public static void main(String args[]) throws IOException
   {
     ServerSocket server = new ServerSocket(6839);
     File myFile = new File("E:\\file1.pdf");
     FileInputStream file = null;
     OutputStream os = null;
     Socket sock=null;

     sock = server.accept();

     try
     {

        byte[] mybytearray = new byte[1024];
        file = new FileInputStream(myFile);
        os = sock.getOutputStream();

        int count;
        while ((count = file.read(mybytearray)) >= 0) {
           os.write(mybytearray, 0, count);

        }

        os.flush();
     }

        catch(IOException e)
        {
           System.out.println("No file");
        }
        catch(IllegalBlockingModeException ea)
        {
           System.out.println("blah!");
        }

     finally
     {
        System.out.println("hello");
        file.close();
        os.close();
        sock.close();

        System.out.println("Socket closed");
     }

  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:28:31.857

您的代码正在丢弃所有有用的诊断信息，这将使找出实际问题几乎是不可能的。（并且完全无视`IOException`这样的行为近乎犯罪！）

解决此问题的方法如下：

*   修改程序以在发生意外异常时输出异常消息和堆栈跟踪。
*   运行程序。
*   如果/当它们失败时，请检查诊断并确定它们的含义……或将它们添加到问题中，以便我们为您提供帮助。

* * *

连接超时通常表示网络级别存在某种问题。例如，您尝试连接的机器已死机（或不存在）、数据包未正确路由或被防火墙丢弃。

但在这种情况下，问题在于您（显然）试图使用`"localhost"`与另一台机器进行通信。那根本行不通。该`"localhost"`名称通常会解析为环回子网上的地址；例如`127.0.0.1`。环回流量永远不会离开发送它的机器......所以你只能`"localhost"`用来连接到*这*台机器上的东西。

（可能发生的情况是，由于没有任何东西监听到*这*台机器上指定端口的连接，因此打开连接的 TCP 数据包被丢弃。最终，客户端 TCP-IP 堆栈超时连接尝试，Java套接字库抛出您看到的异常。）

解决方案是替换`"localhost"`为您尝试与之通信的计算机的 DNS 名称或 IP 地址。

# java - java检索开始日期和结束日期之间的间隔30分钟

> ID：14371318
> 
> 赞同：-3
> 
> 时间：2013-01-17T02:36:01.003
> 
> 标签：java

我需要每 30 分钟检索一次开始日期、结束日期之间的间隔。

例如：如果我的开始日期是 2011-12-10-10:00:00，结束日期是 2011-12-11-10:00:00

我需要在数组中填充这两个日期之间的间隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:56:55.337

在 JavaScript 中：

```
var dates = [],
    start = new Date("2011-12-10T10:00:00Z"),
    end = new Date("2011-12-11T10:00:00Z"); // make sure the format is parsed by all browsers - or use epoch timestamps
for (var i = new Date(start); i < end; i.setMinutes(i.getMinutes()+30))
    dates.push(new Date(i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:50:08.583

您可以使用[JODA](http://joda-time.sourceforge.net/)轻松完成此操作。使用[Interval.withDurationAfterStart()](http://joda-time.sourceforge.net/apidocs/org/joda/time/Interval.html#withDurationAfterStart%28org.joda.time.ReadableDuration%29)会给你一个开始时间之后的间隔。现在创建一个循环，将间隔添加到数组中，然后使用前一个间隔的结束时间获取下一个间隔（直到您 >= 结束时刻）。

结果数组将保存您的间隔列表。

# sql - 如何获取插入的行自动增量 ID？

> ID：14371323
> 
> 赞同：1
> 
> 时间：2013-01-17T02:36:43.460
> 
> 标签：sql, sql-server-2000

在[C# + SQL Server ExecuteScalar() 不返回最后插入的 id](https://stackoverflow.com/questions/8375231/c-sharp-sql-server-executescalar-not-returning-last-inserted-id)中，我找到了一个很好的解决方案来获取插入的行自动增量 id。所以现在我的查询看起来就像：

```
INSERT INTO dbo.YourTable(Col1, Col2, ..., ColN)   
OUTPUT Inserted.ID
VALUES(Val1, Val2, ..., ValN); 
```

但不幸的是，我在 SQL Server 2000 上，这种语法不可用。

我可以在那里使用什么来达到相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:51:57.243

您可以在 Sql Server 2000 中使用@@IDENTITY

但是，您需要了解限制（已被 SCOPE_IDENTITY 克服）。有关解释，请参阅本文 [http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

编辑

MSDN [http://msdn.microsoft.com/en-us/library/aa259185%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa259185%28v=sql.80%29.aspx)说 SCOPE_IDENTITY**在**SS2000 中可用，所以我建议您改用它。

您可以通过执行获取值`SET @<var> = SCOPE_IDENTITY()`

这个链接[http://www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record](http://www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record)有一些如何使用的例子`SCOPE_IDENTITY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:21:19.057

我工作的答案是通过存储过程插入行，因为`OUTPUT`关键字在 ms sql server 2000 中不可用。我也不得不出于`inserted`同样的原因放弃并使用`scope_identity`.

好吧，它看起来有点像这样：

```
CREATE PROCEDURE [dbo].[InsertRow]      
    @pDate datetime,
    @pId int OUTPUT
AS  
BEGIN   
    SET NOCOUNT ON;

    INSERT INTO nl$RegisterRace ([Date],...)
    VALUES (@pDate,...);

    SET @pId = scope_identity();
END 
```

# titanium - 如何让 appcelerator Titan Studio 在控制台日志中显示未捕获的运行时错误？

> ID：14371325
> 
> 赞同：6
> 
> 时间：2013-01-17T02:36:43.563
> 
> 标签：titanium, appcelerator, appcelerator-mobile

似乎在运行时 appcelerator 中所有未捕获的错误都被钛 IDE 吞没，并且永远不会出现在控制台日志中。你怎样才能摆脱这种行为并确保错误出现在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-13T22:45:50.373

确保您设置了正确的日志级别。在 appcelerator 的[博客上阅读更多内容 - 更改 TiStudio 中的日志级别](http://www.appcelerator.com/blog/2011/08/changing-the-log-level-in-tistudio/)

如文章所述，`Trace`将为您提供更多详细信息。

# bash - ksh 变量接受的最大字符数是多少？

> ID：14371326
> 
> 赞同：3
> 
> 时间：2013-01-17T02:36:45.860
> 
> 标签：bash, shell, unix, ksh

我正在尝试加载和解析一个非常大的文本文件。虽然加载不是问题，但有些特定的行在一行上有 2908778 个字符。

这导致我的脚本出错。

在下面的脚本中，我删除了所有逻辑并直接阅读行。我还删除了所有有效行，只是将很长的行留在了一个文本文件中。运行时出现以下错误：

```
$ dowhiledebug.sh dump.txt
dowhiledebug.sh[6]: no space
Script Ended dump.txt 
```

实际脚本：

```
 #!/bin/sh
 filename=$1
 count=1
 if [ -f ${filename} ]; then
    echo "after then"
    while read line;
            do
            echo "$count"
            count=$((count+1))
            done < $filename
 else
    echo "Could not open file $filename"
 fi
 echo "Script Ended $filename" 
```

更新（2013-01-17）

后续问题：[是否可以增加 ksh 变量接受的最大字符数？](https://stackoverflow.com/questions/14387344/is-it-possible-to-increase-the-maximum-number-of-characters-that-ksh-variable-ac)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T04:23:47.923

什么操作系统和 ksh 版本？你能`echo ${.sh.version}`得到一个值吗？如果是这样，请在上面的问题中包括。或者这可能是pdksh？

假设现代 ksh 支持`(( i++ ))`数学评估，这里有一个测试可以帮助您了解情况：

```
#100 char var
var=1234578901234456789012345678901234567890123456789012345789012344567890123456789012345678901234567890

$ while (( i++ < 10000 )) ;do  var="$var$var" ; print "i=$i\t" ${#var} ; done
i=1      200
i=2      400
i=3      800
i=4      1600
i=5      3200
i=6      6400
i=7      12800
i=8      25600
i=9      51200
i=10     102400
i=11     204800
i=12     409600
i=13     819200
i=14     1638400
i=15     3276800
i=16     6553600
i=17     13107200
i=18     26214400
i=19     52428800
i=20     104857600
i=21     209715200
i=22     419430400
-ksh: out of memory

$ print -- ${.sh.version}
Version JM 93t+ 2010-05-24 
```

这只是可以支持的环境的整体规模。在处理命令行环境和程序名称后的“字”时，字数是有限制的，无论整体大小如何。

一些 shell 手册页会有一个 LIMITS 部分，可能会显示类似`max-bytes 200MB, max-args 2048`. 这些信息可能在不同的部分，肯定会有不同的标签和不同的值，或者它可能根本不存在，因此上面的代码循环，所以仔细看看，如果你找到了这个信息的来源，或者添加这个 Q 的答案，或者更新这个。

`bash 4.4`标准手册页似乎没有这些信息，而且一直很难找到文档`ksh`。检查您的`man ksh`并希望您能找到记录在案的限制。

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:07:48.803

任何 shell 的限制是 C 命令行最大值的限制。这是一个为您提取信息的小程序`/usr/include/limits.h`：

```
cpp <<HERE | tail -1
#include <limits.h>
ARG_MAX
HERE 
```

我的给了我 (256 * 1024) 或 262144 个字符。

如果未安装 C 编译器，则不起作用，但它可能是类似的限制。

# python - 将一行零添加到数组而不是我想要的行

> ID：14371331
> 
> 赞同：0
> 
> 时间：2013-01-17T02:37:15.813
> 
> 标签：python, arrays

我有一个数组，我正在对其进行一些计算。数组开始为

```
e = array([[1,2,1,3],
           [3,-1,-3,-1],
           [2,3,1,4]]) 
```

我对其进行了一些修改以将其转换为：

```
array([[  1,   2,   1,   3],
      [  0,  -7,  -6, -10],
      [  0,  -1,  -1,  -2]]) 
```

然后我在上面运行这段代码：

```
import numpy as np
from fractions import Fraction

def ref(x):
    dimension = x.shape
    row_counter = 1
    first_values = [x[i][row_counter] for i in range(dimension[0])]                               #gets a list of elements of the column
    first_values = [number != 0 for number in first_values]                                       #0 is a pivot element?
    if False in first_values:                                                                     
        true_index =  first_values.index(True); false_index =   first_values.index(False)
        if true_index > false_index:                                                               #not any more
            x[[false_index, true_index]] = x[[true_index, false_index]]

    for i in range(row_counter+1,dimension[0]):
        multiplier = Fraction(x[row_counter][row_counter], x[i][row_counter])**-1
        row1 = multiplier*x[row_counter]
        row1 = x[i]-row1
        print row1
        x[i] = row1   

return x 
```

运行此返回：

```
[0 0 -1/7 -4/7]
array([[  1,   2,   1,   3],
         [  0,  -7,  -6, -10],
         [  0,   0,   0,   0]]) 
```

所以结果应该是

```
array([[  1,   2,   1,   3],
         [  0,  -7,  -6, -10],
         [  0, 0, -1/7, -4/7]]) 
```

它打印正确的行条目，但不会添加到数组中，而是添加一行零。有人可以告诉我为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:52:05.680

通常，`numpy`数组与特定类型是同构的。例如：

```
>>> a = np.array([1,2,3])
>>> a
array([1, 2, 3])
>>> a.dtype
dtype('int64') 
```

当您专门设置元素或切片时，您添加的内容会被强制转换为 current `dtype`，因此：

```
>>> a[0] = 5
>>> a
array([5, 2, 3]) 
```

但

```
>>> a[0] = 4.3
>>> a
array([4, 2, 3]) 
```

当你没有就地行动时，你可以向上转型，因此`numpy`无论如何都必须制作一个副本（即一个新对象）：

```
>>> a = np.array([1,2,3])
>>> a + 4.3
array([ 5.3,  6.3,  7.3])
>>> (a + 4.3).dtype
dtype('float64') 
```

`numpy`在您的情况下，如果您从dtype 数组开始，您可以获得所需的行为`object`：

```
>>> e = np.array([[  1,   2,   1,   3],
...               [  0,  -7,  -6, -10],
...               [  0,  -1,  -1,  -2]], dtype=object)
>>> 
>>> ref(e)
array([[1, 2, 1, 3],
       [0, -7, -6, -10],
       [0, 0, -1/7, -4/7]], dtype=object) 
```

# c# - 定位 HTML 标签

> ID：14371332
> 
> 赞同：0
> 
> 时间：2013-01-17T02:37:15.250
> 
> 标签：c#, selenium

我正在尝试自动化 Web 表单的测试。为此，我需要知道如何使用 C# 在 HTML 页面中动态定位输入标记，然后为它们分配值。我不想使用 XPath，因为每次我都会使用不同的 Web 表单。我想将 Web 表单的 URL 传递给 Selenium，然后自动填充字段。我听说过 HTMLAgilityPack。这对我有帮助吗？如果是这样，我该如何使用它？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:39:10.340

我可能错过了您问题的关键部分，但是，您看过[Selenium WebDriver](http://seleniumhq.org/docs/03_webdriver.jsp)吗？

如果您编写一个处理通用 Web 表单的测试，您可以通过动态数据支持您的测试。因此，您可以使用数据驱动测试来满足页面中的更改。我已经为许多页面编写了测试，并且总是有共同的操作，但是我以不同的方式满足每个页面，尽管该页面上有不同的东西！

[编辑]
根据您的评论，我认为研究 Selenium 是一个好主意。处理不同页面的方法是在每个页面的“定义”类中准备好这些元素定义。这样，一旦您知道页面是什么，您只需使用正确的类进行定义。最好在测试运行**之前**知道您将在测试中与哪些元素进行交互。自动化 UI 测试的重点是要执行一组已知的操作并获得正确的结果。

我建议您查看一些诸如此类的教程[，](http://www.theautomatedtester.co.uk/tutorials/selenium/selenium_csharp_nunit.htm)您可以查看我的[博客](http://nashibukasan.blogspot.com.au/) ，尽管我在最初学习 WatiN 时写了这篇文章，然后用 Selenium 替换了它（我更喜欢它：P）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:44:35.983

[Html 敏捷包](http://htmlagilitypack.codeplex.com/)

> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

```
HtmlDocument doc = new HtmlDocument();
doc.Load(path);

foreach (HtmlNode input in doc.DocumentNode.SelectNodes("//input"))
    // Your Code... 
```

# javascript - 子级溢出时 JScrollPane 显示空白：隐藏

> ID：14371334
> 
> 赞同：0
> 
> 时间：2013-01-17T02:37:25.277
> 
> 标签：javascript, jquery-jscrollpane

我正在尝试使用 JScrollPane ( [http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/) ) 来呈现带有溢出的子元素的 div:hidden。执行此操作时，JScrollPane 呈现但水平滚动时会出现一个大的空白区域，溢出的文本会出现。下面是显示问题的图像以及相关代码和显示问题的 JS fiddle，如果您向右滚动，您会注意到有一大块区域显示我要删除的内容。任何想法如何做到这一点？

```
<div id="test" style="width:200px;overflow:auto;">
  <div style="background-color:red;white-space:nowrap;overflow:hidden;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in ligula id sem tristique ultrices eget id neque. Duis enim turpis, tempus at accumsan vitae, lobortis id sapien. Pellentesque nec orci</div>
  <div style="background-color:red;white-space:nowrap;overflow:hidden;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in ligula id sem tristique ultrices eget id neque. Duis enim turpis, tempus at accumsan vitae, lobortis id sapien. Pellentesque nec orci</div>
  <div style="background-color:red;white-space:nowrap;overflow:hidden;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in ligula id sem tristique ultrices eget id neque. Duis enim turpis, tempus at accumsan vitae, lobortis id sapien. Pellentesque nec orci</div>
  <div style="background-color:red;white-space:nowrap;overflow:hidden;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in ligula id sem tristique ultrices eget id neque. Duis enim turpis, tempus at accumsan vitae, lobortis id sapien. Pellentesque nec orci</div>
</div>

$(document).ready(function(){
    $('#test').jScrollPane({});
}); 
```

![示例图像](../Images/24ad0e68d4523ed48d8d65fd3a489bd4.png)

[http://jsfiddle.net/yTaAS/1/](http://jsfiddle.net/yTaAS/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:06:19.230

这是因为内部 div 采用父 div #test 的宽度。我将您的 html 替换为以下内容，它现在正在工作。

```
<div id="test" style="width:200px;overflow:auto;">
  <div style="display:inline-block;">
  <div style="background-color:red;white-space:nowrap;overflow:hidden;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in ligula id sem tristique ultrices eget id neque. Duis enim turpis, tempus at accumsan vitae, lobortis id sapien. Pellentesque nec orci</div>
  <div style="background-color:red;white-space:nowrap;overflow:hidden;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in ligula id sem tristique ultrices eget id neque. Duis enim turpis, tempus at accumsan vitae, lobortis id sapien. Pellentesque nec orci</div>
  <div style="background-color:red;white-space:nowrap;overflow:hidden;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in ligula id sem tristique ultrices eget id neque. Duis enim turpis, tempus at accumsan vitae, lobortis id sapien. Pellentesque nec orci</div>
  <div style="background-color:red;white-space:nowrap;overflow:hidden;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in ligula id sem tristique ultrices eget id neque. Duis enim turpis, tempus at accumsan vitae, lobortis id sapien. Pellentesque nec orci</div>
  </div>
</div> 
```

# java - 弹簧作用域代理bean

> ID：14371335
> 
> 赞同：100
> 
> 时间：2013-01-17T02:37:29.197
> 
> 标签：java, spring, proxy

有人能解释一下spring`@ScopedProxy`注解的用法吗？我*认为*这与会话范围的 bean 有关，但我不太确定是什么。

在我使用范围时，我使用了没有`@ScopedProxy`注释（或没有 aop 范围代理）的会话范围 bean，所以我非常确定如何正确使用它。

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2013-01-17T04:18:28.000

[spring 文档的第 3.4.4.5 节很好](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-factory-scopes-other-injection)地解释了它：

（请注意，下面的“userPreferences”bean 定义是不完整的）：

```
<!-- an HTTP Session-scoped bean -->
<bean id="userPreferences" class="com.foo.UserPreferences" scope="session"/>

<!-- a singleton-scoped bean -->
<bean id="userManager" class="com.foo.UserManager">
    <property name="userPreferences" ref="userPreferences"/>
</bean> 
```

从上面的配置中可以明显看出，单例 bean 'userManager' 被注入了对 HTTP 会话范围 bean 'userPreferences' 的引用。这里的重点是***'userManager' bean 是一个单例......******每个容器***将只实例化一次，***并且它的依赖***项（在这种情况下只有一个，'userPreferences' bean）***也只会被注入（一次！ )*** .

这意味着“userManager”将（概念上）只对完全相同的“userPreferences”对象进行操作，即最初注入的对象。

当您将 HTTP 会话范围的 bean 作为依赖项注入协作对象（通常）时，这不是您想要的。相反，***我们想要的是每个容器有一个单独的 'userManager' 对象***，然后，***在 HTTP Session 的生命周期内，我们希望查看和使用特定于所述 HTTP Session 的 'userPreferences' 对象***。

相反，您需要的是注入某种对象，该对象公开与 UserPreferences 类完全相同的公共接口（理想情况下是一个 UserPreferences 实例的对象），并且足够聪明，能够启动并获取真正的 UserPreferences 对象来自我们选择的任何底层范围机制（HTTP 请求、会话等）。然后我们可以安全地将这个代理对象注入到 'userManager' bean 中，这将很高兴地不知道它所持有的 UserPreferences 引用是一个***代理***。

在我们的例子中，***当一个 UserManager 实例调用依赖注入的 UserPreferences 对象上的一个方法时，它实际上是在调用代理上的一个方法***......然后代理将关闭并从中获取真正的 UserPreferences 对象（在这种情况下） HTTP Session，并将方法调用委托给检索到的真实 UserPreferences 对象。

这就是为什么在将请求范围、会话范围和全局会话范围的 bean 注入协作对象时需要以下正确且完整的配置：

```
<bean id="userPreferences" class="com.foo.UserPreferences" scope="session">
    <aop:scoped-proxy/>
</bean>

<bean id="userManager" class="com.foo.UserManager">
    <property name="userPreferences" ref="userPreferences"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-10T20:39:23.177

在尝试了此处指定的各种不同选项和 spring 文档之后，由于某种原因，我发现 Spring MVC 在您使用 @Controller 注释并且您的 web 应用程序中有多个这样的控制器时会奇怪地自动装配控制器。将注解修改为@RestController (value="UniqueControllerv1")，问题解决。

# orchardcms - Orchard cms 带有 url 的自定义选择列表字段 Alternate

> ID：14371340
> 
> 赞同：1
> 
> 时间：2013-01-17T02:37:57.893
> 
> 标签：orchardcms, alternate

我正在使用`Choice List Field`果园画廊。到目前为止，一切都很好..

接下来我对代码做了一些改动 `Modules.Contrib.ChoiceList.views.EditorTemplate.Flieds.Contrib.ChoiceList.cshtml`。目标是在单选按钮周围放置一个表格，它正在工作 - 没问题。

使用以下代码：

```
 @model Contrib.ChoiceList.ViewModels.ChoiceListFieldViewModel
    @using Orchard.Utility.Extensions;
    @{ var i = 0; }

    <fieldset class="FieldSoubedenos">
    <legend>@Model.Name</legend>
    <table class="data-table-Soubedenos">
        <tbody>
        <tr >    
            @if( Model.ListMode == "radio" )
            {
                foreach (var option in Model.Options.Split(';'))
                {

                    if( string.IsNullOrWhiteSpace(option) )
                    {

                        <td>
                            <label>@Html.RadioButton("SelectedValue", "",     string.IsNullOrWhiteSpace(Model.SelectedValue))<i>unset</i></label>
                        </td>

                    }
                    else
                    {
                        <td>
                            <label>@Html.RadioButton("SelectedValue", option, (option == Model.SelectedValue))@option</label>
                        </td>
                    }  

                    ++i;
                        if (i % 2 == 0)
                        {  

                         @:</tr><tr>                                            
                        }               
                }         
            }

    else
    {
        @Html.DropDownListFor(m=>m.SelectedValue, new SelectList(Model.Options.Split(';'), Model.SelectedValue))
        @Html.ValidationMessageFor(m=>m.SelectedValue)
    }     
        <tr >
        <tbody>      
    </table>
</fieldset> 
```

下一阶段是使用替代网址，我确实创建了一个 - `~/Themes/XXXXXXXXX/Views/EditorTemplate-Dform-url-homepage.cshtml`

并将上述代码复制到备用文件中。

刷新浏览器给我以下错误：

* * *

```
Server Error in '/' Application.
        The model item passed into the dictionary is of type
         'IShapeProxy82be9d7cba51459e888e92b32898011b', but this dictionary requires a model item  of type 'Contrib.ChoiceList.ViewModels.ChoiceListFieldViewModel'.
Description: An unhandled exception occurred during the execution of the current web  request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.InvalidOperationException: The model item passed into the dictionary is of type 'IShapeProxy82be9d7cba51459e888e92b32898011b', but this dictionary requires a model item of type 'Contrib.ChoiceList.ViewModels.ChoiceListFieldViewModel'.

Source Error:

 Line 3:          @if (Model.Content != null) {
Line 4:              <div class="edit-item-content">
Line 5:                  @Display(Model.Content)
Line 6:              </div>
Line 7:          }

Source File: c:\00\01 projectos\xxxx\yyyyyyyy\NewWebSite.Orchard.Web\0\Orchard.Web.1.6\Orchard 0\Core\Contents\Views\Content.Edit.cshtml    Line: 5 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:07:34.130

您可以尝试删除视图顶部的 @model 声明，因为它是分配给模型的动态形状模板，而不是您期望的 ViewModel - 请参阅[http://orchard.codeplex.com/workitem/18195](http://orchard.codeplex.com/workitem/18195)

您可以通过 Model.Model 访问视图模型，例如

```
@{
    var myViewModel = 
        (Contrib.ChoiceList.ViewModels.ChoiceListFieldViewModel)Model.Model;
} 
```

或直接访问动态字段

```
@Model.Model.Name 
```

# iphone - iOS UITabBar：删除顶部阴影渐变线

> ID：14371343
> 
> 赞同：43
> 
> 时间：2013-01-17T02:38:07.757
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar

我实现了一个自定义的 UITabBar，我仍然在它上面有这个渐变/阴影。我添加了

`[self.tabBar setBackgroundImage:[UIImage imageNamed:@"navBarBottom.png"]];`

这只是改变背景但保持阴影渐变。

我究竟做错了什么 ？有什么可以指定摆脱它吗？

我有的 ：

![顶阴影](../Images/effedd08b5a3b956094f804f770ec896.png)

我想要的是 ：

![没有影子](../Images/de961b9d57ec5bb66b072a01e1ca1235.png)

谢谢你。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-05-02T09:28:40.057

类似地回答[这个问题](https://stackoverflow.com/questions/11084331/how-do-i-disable-the-navigation-bar-shadow-in-ios-6-for-navigation-bars-with-cus)......如果你不想弄乱任何类型的 1x1 透明图像，这项工作也是：

```
[[UITabBar appearance] setBackgroundImage:[[UIImage alloc] init]]; 
[[UITabBar appearance] setShadowImage:[[UIImage alloc] init]]; 
```

迅速：

```
UITabBar.appearance().shadowImage = UIImage()
UITabBar.appearance().backgroundImage = UIImage() 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-01-17T02:48:36.653

尝试为 UITabBar 设置一个 1x1 像素的透明阴影图像：

```
[[UITabBar appearance] setShadowImage:[UIImage imageNamed:@"transparentShadow.png"]]; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-10-27T11:19:58.200

**迅速**

为您的自定义标签栏试试这个。它将隐藏水平阴影线。

```
self.tabBar.setValue(true, forKey: "_hidesShadow") 
```

**目标 C**

```
[self.tabBar setValue:@(YES) forKeyPath:@"_hidesShadow"]; 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-03-31T06:38:45.820

**斯威夫特 4**

```
UITabBar.appearance().layer.borderWidth = 0.0
UITabBar.appearance().clipsToBounds = true 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-09-23T11:11:41.340

此代码适用于 iOS 13 及更低版本

```
if #available(iOS 13, *) {
    let appearance = self.tabBar.standardAppearance.copy()
    appearance.backgroundImage = UIImage()
    appearance.shadowImage = UIImage()
    appearance.shadowColor = .clear
    self.tabBar.standardAppearance = appearance
} else {
    self.tabBar.backgroundImage = UIImage()
    self.tabBar.shadowImage = UIImage()
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-24T15:01:40.670

调用`[[UITabBar appearance] setShadowImage:]`将自定义`UITabBar`您应用中的所有实例。

如果你只想自定义一个`UITTabBar`，你可以这样做：

```
[self.tabBarController.navigationController.navigationBar setShadowImage:[UIImage new]]; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-22T19:00:52.357

这是另一个易于实施的答案：

```
[self.tabBar setValue:@(YES) forKeyPath:@"_hidesShadow"]; 
```

为我工作。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-23T12:28:11.230

只是设置图像它不会删除你必须将它的borderWidth设置为0的阴影线。这是代码

[[UITabBar 外观] setShadowImage:[UIImage new]];

[UITabBar 外观].layer.borderWidth = 0.0f;

[UITabBar 外观].clipsToBounds = true;

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-25T11:12:06.317

将其放在您的**AppDelegate中的****didFinishLaunchingWithOptions**下：

```
[[UITabBar appearance] setShadowImage:[[UIImage alloc] init]];
[[UITabBar appearance] setBackgroundImage:[[UIImage alloc] init]]; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-09-08T13:10:10.313

试试这个，** Objective-C **

```
//Remove shadow image by assigning nil value.
[[UITabBar appearance] setShadowImage: nil];

// or 

// Assing UIImage instance without image reference
[[UITabBar appearance] setShadowImage: [[UIImage alloc] init]]; 
```

** 斯威夫特 **

```
//Remove shadow image by assigning nil value.
UITabBar.appearance().shadowImage = nil

// or 

// Assing UIImage instance without image reference
UITabBar.appearance().shadowImage = UIImage() 
```

这是[shadowImage](https://developer.apple.com/documentation/uikit/uitabbar/1623452-shadowimage)的苹果指南。

```
@available(iOS 6.0, *)
open var shadowImage: UIImage? 
```

> 默认为零。当非零时，显示自定义阴影图像而不是默认阴影图像。要显示自定义阴影，还必须使用 -setBackgroundImage 设置自定义背景图像：（如果使用默认背景图像，将使用默认阴影图像）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-28T08:51:22.693

如果您需要从具有自定义字体的标签栏中删除 iOS 13 上的阴影线，则必须以这种方式应用它：

```
if #available(iOS 13.0, *) {
   let appearance = UITabBarAppearance()
   appearance.stackedLayoutAppearance.normal.titleTextAttributes = ...
   appearance.stackedLayoutAppearance.selected.titleTextAttributes = ...
   appearance.shadowColor = .clear
   tabBar.standardAppearance = appearance
 } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-04-23T07:11:40.150

我通过以下方法实现了相同的外观。
1\. 将背景栏色调设置为与主父视图背景颜色相同。
2.

```
this.TabBar.BarStyle = UIBarStyle.BlackOpaque; 
```

我在 Xamarin 中使用它，请验证 Swift 语法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-01T14:57:50.333

在大多数视图控制器在 viewDidLoad 中继承的视图控制器或视图控制器或 BasicViewController 中，只需放置以下两行：

```
[[UITabBar appearance] setBackgroundImage:[UIImage imageNamed:@"tab_bar_background"]];
[[UITabBar appearance] setShadowImage:[UIImage imageNamed:@"transparent_shadow"]]; 
```

确保 transparent_shadow@2x.png 是 1x1 或 2x2 透明的图像，而 tab_bar_background@2x.png 是 640x100 的图像，因为底栏的高度为 50px。

适用于 iOS 9.3

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-31T08:44:52.303

在 viewDidload 上试试这个。

```
override func viewDidLoad() {
        super.viewDidLoad()

        self.tabBar.setValue(true, forKey: "_hidesShadow")
} 
```

它对我有用

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-11-20T17:00:22.580

在 iOS 7 - 这有效：

```
[self.actionToolbar setShadowImage:[[UIImage alloc] init] forToolbarPosition:UIBarPositionAny];
[self.actionToolbar setBackgroundImage:[[UIImage alloc] init] forToolbarPosition:UIBarPositionAny barMetrics:UIBarMetricsDefault]; 
```

希望对某人有所帮助。

# python - 获取 Flask-MongoAlchemy 文档中的字段值

> ID：14371345
> 
> 赞同：1
> 
> 时间：2013-01-17T02:38:21.663
> 
> 标签：python, mongodb, flask, mongoalchemy

我查看了文档，并广泛搜索了谷歌，但没有找到解决我的问题的方法。
这是我的`readRSS`函数（注意“get”是 Kenneth Reitz 的 requests 模块的一个方法）：

```
def readRSS(name, loc):
    linkList = []
    linkTitles = list(ElementTree.fromstring(get(loc).content).iter('title'))
    linkLocs = list(ElementTree.fromstring(get(loc).content).iter('link'))
    for title, loc in zip(linkTitles, linkLocs):
        linkList.append((title.text, loc.text))
    return {name: linkList} 
```

这是我的 MongoAlchemy 课程之一：

```
class Feed(db.Document):
    feedname = db.StringField(max_length=80)
    location = db.StringField(max_length=240)
    lastupdated = datetime.utcnow()

    def __dict__(self):
        return readRSS(self.feedname, self.location) 
```

如您所见，我必须`readRSS`在类的函数中调用该函数，所以我可以通过`self`，因为它依赖于字段`feedname`和`location`.
我想知道是否有其他方法可以做到这一点，所以我可以将`readRSS`返回值保存到`Feed`文档中的一个字段中。我尝试将`readRSS`函数的返回值分配给函数内的变量`__dict__`——这也不起作用。

我的应用程序中有该功能，但我想将结果保存到文档中以减轻服务器上的负载（我从中获取 RSS 提要的服务器）。

有没有办法做我打算做的事情，还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:21:06.377

我找到了答案。我需要使用`computed_field`装饰器，其中第一个参数是我的返回值的结构，并且`deps`是一个包含该字段所依赖的字段的集合。然后我将依赖字段传递给函数的参数，然后就可以了。

```
@fields.computed_field(db.KVField(db.StringField(), db.ListField(db.TupleField(db.StringField()))), deps=[feedname, location])
def getFeedContent(a=[feedname, location]):
    return readRSS(a['feedname'], a['location']) 
```

无论如何，谢谢大家。

# rubygems - Rails gems 是如何安装的？

> ID：14371348
> 
> 赞同：0
> 
> 时间：2013-01-17T02:39:23.607
> 
> 标签：rubygems

例如，我在 GitHub 上看到一个 gem，让我们这样说： [https ://github.com/michaeldv/awesome_print](https://github.com/michaeldv/awesome_print)

安装就像说 gem install awesome_print 一样简单

那么它们是如何安装的呢？我的意思是使用该命令它如何“知道”在哪里可以找到具有该名称的宝石？以及将它安装到“哪里”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:49:22.187

观看此：[带有捆绑器的新宝石](http://railscasts.com/episodes/245-new-gem-with-bundler)

回答您的问题的最简单方法是制作您自己的宝石。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:52:58.400

gem 和操作它的命令是 ruby​​gems 软件的一部分。

# java - Android - 运算符和 TextView 值的问题

> ID：14371354
> 
> 赞同：1
> 
> 时间：2013-01-17T02:40:02.483
> 
> 标签：java, android, textview, operators

当所有 3 个文本字段仍包含“输入日期”、“开始时间”和“结束时间”时，为什么代码会执行？

```
CharSequence x = startDateDisplay.getText();
CharSequence y = startTimeDisplay.getText();
CharSequence z = endTimeDisplay.getText();

Log.d(TAG, "validate on save: "+ x + " " + y + " " + z );

if(startDateDisplay.getText() != "Enter Date" && 
    startTimeDisplay.getText() != "Start Time" && 
    endTimeDisplay.getText() != "End Time" ) 
{
    //excecute code    
}
else
{
   Toast.makeText(this, "Please fill in all fields", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:53:33.673

对于字符串比较，使用`String.equals()`方法：

```
if(!StartDateDisplay.getText().toString().equals("Enter Date") &&
!StartTimeDisplay.getText().toString().equals("Start Time") &&
!endTimeDisplay.getText().toString().equals("End Time")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:52:38.650

尝试这样做：

```
if(!startDateDisplay.getText().toString().equals("Enter Date") && 
    !startTimeDisplay.getText().toString().equals("Start Time") && 
    !endTimeDisplay.getText().toString().equals("End Time") ) {
} 
```

它应该可以工作，因为您现在得到的是一个对象，而您真正想要的是该对象的 CharSequence 值，即`'Enter Date'`、`'Start Time'`和`'End Time'`。

# java - 如何在 Java 代码中使用 shell 脚本获取 root 访问权限？

> ID：14371355
> 
> 赞同：1
> 
> 时间：2013-01-17T02:40:05.973
> 
> 标签：java, android

我可以在我的 PC 中使用“adb root”获取手机的 root 访问权限，然后更改 /data 文件夹下的文件内容。现在我想在 apk 中使用 Java 代码来实现。我尝试了打击代码：

```
Runtime.getRuntime().exec(new String[]{"sh", "/sdcard/my.sh"}); 
```

当 shell 命令不需要 root 权限时，此功能效果很好。现在我将 my.sh 更改为

```
su root
chmod 777 /data/filetochange.xml
rm -r /data/filetochange.xml 
```

但它没有用。我可以在 Java 代码中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:08:04.703

我认为您的应用程序需要具有 root 权限。您可以尝试在AndroidManifest.xml中添加一行'android:sharedUserId="android.uid.system"'，该属性可以获得系统权限。但这还不够，你还需要做其他的步骤，你可以google一下，网上有很多详细的教程。

# performance - Git filter-branch --index-filter 重新应用“干净”过滤器

> ID：14371358
> 
> 赞同：0
> 
> 时间：2013-01-17T02:40:35.380
> 
> 标签：performance, git

Git`clean`和`smudge`过滤器可用于在存储库中存储与工作树中不同的表示。要追溯应用干净的过滤器，我可以运行

```
git filter-branch --tree-filter /the/script.sh -- --all 
```

脚本触及那些需要重读的文件的地方`clean`。不幸的是，这相当慢，因为它会为每次提交更新整个工作树。有没有办法在一个内重新应用干净的过滤器`--index-filter`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:20:52.280

是的：在您的索引过滤器中，做`git checkout -- path/to/file`，随心所欲，然后`git add`再做一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:39:20.950

为了在不接触文件系统的情况下有效地重新清理，我过滤了输出`git ls-files -s`以匹配我想要重新清理的那些文件，然后

```
git cat-file blob BLOB_TO_RECLEAN | my-clean-filter | git hash-object -w 
```

为清理后的表示创建一个新对象。我将所有这些新对象（重新格式化以匹配 的输出`git ls-files -s`）提供给`git update-index --index-info`. 我的过滤器对缓存从旧 blob 到新（已清理） blob 的翻译进行了额外优化，以便任何给定 blob 只清理一次。查看[`git fat index-filter`](https://github.com/jedbrown/git-fat)完整的实现。

# ios - Apple Mach-O 链接器错误 Xcode 4.5.2

> ID：14371360
> 
> 赞同：2
> 
> 时间：2013-01-17T02:40:43.753
> 
> 标签：ios, xcode, xcode4.5

我正在考虑从头开始重建我想避免的项目，所以我正在寻求帮助。

尝试在发布时构建项目时，出现以下链接错误：

> ld /Users/MAS/Library/Developer/Xcode/DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/Build/Products/Release-iphoneos/MyStreamPlayer.app/MyStreamPlayer normal armv7 cd /Users/MAS/iphoneApps/AlfsreamPlayer/MyStreamPlayer setenv IPHONEOS_DEPLOYMENT_TARGET 6.0 setenvPATH /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin :/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/ SDKs/iPhoneOS6.0。sdk -L/Users/MAS/Library/Developer/Xcode/DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/Build/Products/Release-iphoneos -L/Users/MAS/iphoneApps/AlfsreamPlayer/MyStreamPlayer -L/Users/MAS/iphoneApps/AlfsreamPlayer/ MyStreamPlayer/../build -F/Users/MAS/Library/Developer/Xcode/DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/Build/Products/Release-iphoneos -filelist /Users/MAS/Library/Developer/Xcode/DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl /Build/Intermediates/MyStreamPlayer.build/Release-iphoneos/MyStreamPlayer.build/Objects-normal/armv7/MyStreamPlayer.LinkFileList -Xlinker -map -Xlinker /Users/MAS/Library/Developer/Xcode/DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/Build /Intermediates/MyStreamPlayer.build/Release-iphoneos/MyStreamPlayer.build/MyStreamPlayer-LinkMap-normal-armv7。txt -dead_strip -finalize -prefinalized-library libViewRightWebiOS.a -finalized-product /Users/MAS/Library/Developer/Xcode/DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/Build/Products/Release-iphoneos/MyStreamPlayer.app/MyStreamPlayer -libVideoWebiOS -fobjc -link-runtime -miphoneos-version-min=6.0 -framework Foundation -framework UIKit -framework CoreGraphics -framework MediaPlayer -framework CFNetwork -libVideoWebiOS_debug -libVideoWebiOS -o /Users/MAS/Library/Developer/Xcode/DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/ Build/Products/Release-iphoneos/MyStreamPlayer.app/MyStreamPlayerapp/MyStreamPlayer -libVideoWebiOS -fobjc-link-runtime -miphoneos-version-min=6.0 -framework Foundation -framework UIKit -framework CoreGraphics -framework MediaPlayer -framework CFNetwork -libVideoWebiOS_debug -libVideoWebiOS -o /Users/MAS/Library/Developer/Xcode /DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/Build/Products/Release-iphoneos/MyStreamPlayer.app/MyStreamPlayerapp/MyStreamPlayer -libVideoWebiOS -fobjc-link-runtime -miphoneos-version-min=6.0 -framework Foundation -framework UIKit -framework CoreGraphics -framework MediaPlayer -framework CFNetwork -libVideoWebiOS_debug -libVideoWebiOS -o /Users/MAS/Library/Developer/Xcode /DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/Build/Products/Release-iphoneos/MyStreamPlayer.app/MyStreamPlayer
> 
> clang：错误：没有这样的文件或目录：'/Users/MAS/Library/Developer/Xcode/DerivedData/MyStreamPlayer-auylvnjdlrkfpvaxnulcaadbfhwl/Build/Products/Release-iphoneos/MyStreamPlayer.app/MyStreamPlayer'

调试模式没有问题。该项目在 xcode 4.5.1 上的另一台计算机上运行良好。我认为 xcode 版本可能是问题，但是当我在另一台使用 xcode 4.5.1 的计算机上尝试它时，我遇到了同样的问题。

该项目使用一个库`libVideoWebiOS`。我在 Build Phases -> Link Binary With Libraries 上有它。知道这个问题会产生什么吗？这是构建设置 -> 架构的屏幕截图。

![架构](../Images/843d5e079e8ed89b55c3070ba820b395.png)

有很多建议，`Change "Build Active Architecure Only" to Yes`但不幸的是，这对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T22:59:14.220

Ron 是正确的，您必须先使用 Finalizer，然后才能创建发布版本。确保您已关闭 Xcode 以使终结器工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:02:24.933

从您的评论看来`multiple targets`，您的`project`. 如果您使用任何`third party libraries`or `wrapper classes`，请不要导入`project`. 仅添加所需的`files and folders`内容。我不知道如何在`release`具有`multiple targets`. 但是用一个来制作你的项目`target`可能会解决你的问题。

删除`references`您的`third party project.xcodeproj`并添加`source files`您需要的所有内容`project`。希望能帮助到你。

# asp.net - 一个 href 错误直接默认 aspx

> ID：14371361
> 
> 赞同：0
> 
> 时间：2013-01-17T02:40:44.813
> 
> 标签：asp.net, custom-errors

我有一个类似的网址：120.xxx.xxx.xxx/myfile.pdf，但它不存在

它不直接指向我的error.aspx

谁能告诉我发生了什么事

和我的 web.config 代码

```
<customErrors mode="On" defaultRedirect="~/error.aspx">
      <error statusCode="404" redirect="~/error404.aspx"/>
</customErrors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:13:39.310

这是因为这是一个静态文件，默认情况下会绕过 ASP.Net 并由 IIS 提供服务。尝试将此添加到您`<system.webServer>`的 web.config 部分：

```
<handlers>
      <add name="PDFHandler-Integrated" path="*.pdf" verb="GET"
        type="System.Web.StaticFileHandler" modules="ManagedPipelineHandler"
        requireAccess="Script" preCondition="integratedMode" />
</handlers> 
```

这样做会使其通过 ASP.Net 管道，因此您可以应用其他功能，例如身份验证/角色限制。

# javascript - 没有页眉和页脚的 Google 电子表格

> ID：14371366
> 
> 赞同：1
> 
> 时间：2013-01-17T02:41:22.310
> 
> 标签：javascript, html, google-sheets

我想嵌入一个没有页眉和页脚的谷歌电子表格。[这篇文章](https://stackoverflow.com/questions/2123764/remove-header-footer-from-published-google-docs-spreadsheet)展示了诀窍，但没有说明如何应用它。我试过这个，但它不起作用：

```
<iframe id="embeddedthing" width='500' height='300' frameborder='0' src='https://docs.google.com/spreadsheet/pub?key=<DocId>&single=true&gid=12&output=html&widget=false&gridlines=false'></iframe>
<script type="text/javascript">
  var f = function(id) {document.getElementById(id).style.display = "none";};
  f("header");
  f("footer");
</script> 
```

然后我想我应该将它应用到 iframe 中加载的文档，所以我尝试使用 访问它`document.getElementById('FrameId').contentWindow.document`，但是浏览器显示“不安全的 JavaScript 尝试访问框架”并且不允许我继续。

运行该 JavaScript 函数的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T20:00:20.510

从 iframe 中的共享 Google 工作表中删除页眉和页脚的最简单方法是指定工作表和要显示的范围。
使用以下语法，工作表看起来干净整洁，除了顶部和左侧边缘的灰色细边框：

`src="https://docs.google.com/spreadsheet/pub?key=<DocID>&gid=<SheetID>&gridlines=false&range=A1:Z100"`

如果没有该`range`参数，行为会受到`widget=true`在顶部显示标题行或`widget=false`显示页眉、页脚和指向其他工作表的链接的影响。
如果指定`range`大于实际工作表尺寸，则使用整个工作表。所以`range=A1:Z100`将涵盖大多数小桌子的情况。

创建两个相邻的 iframe 允许执行类似于冻结的列或行标题的操作。
下面是一个页面示例，该页面使用此技术显示 2 个固定列，其中标题位于左侧，可滚动区域位于右侧：

```
<table border='1'>
  <tr>
    <td>
      <iframe width="103" height="187" frameborder="0" src="https://docs.google.com/spreadsheet/pub?key=0AqEyi7du69LQdHRJXzViMlhEdHVYY2E4X1hnZ21EQ2c&gid=29&gridlines=false&range=A1:B999"></iframe>
    </td>
    <td>
      <iframe width="600" height="187" frameborder="0" src="https://docs.google.com/spreadsheet/pub?key=0AqEyi7du69LQdHRJXzViMlhEdHVYY2E4X1hnZ21EQ2c&gid=29&gridlines=false&range=C1:CC999"></iframe>
    </td>
  </tr>
</table> 
```

[这](http://stefanomenci.com/pool/index.php?pageId=3)是使用这种技术的网站。

**编辑**

谷歌改变了一些东西，我的网站突然坏了。

[这里](https://wp-glogin.com/2014/08/embedding-google-spreadsheets-with-more-control-over-appearance/)建议的解决方案是添加`&widget=false&chrome=false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:13:57.977

因为 JS 限制了对框架的访问，所以您需要以某种方式获取电子表格的 HTML 并从页面中删除页眉和页脚。

您可以使用隐藏的`iframe`( `display: none;`) 来容纳电子表格，然后再`iframe`加载一个页面，该页面使用[此方法获取电子表格的 HTML（需要 jQuery）](https://stackoverflow.com/a/8814538/1979005)，然后删除页眉和页脚。为此，您可以获取 HTML，将[其解析为 DOM 结构](https://stackoverflow.com/a/3104237/1979005)，使用 f() 代码添加`script`元素，然后使用`data:`URL 拉出页面。

您可以使用`base`元素来保留文件的链接；将电子表格的原始路径（但不是文件名）添加到`base`'s（`href`如果存在）；否则`<base href="www.google.com/path/to/spreadsheet/without/filename/" />`在`head`. 您可以在 hidden 上使用正则表达式获取`iframe`路径`src`。

可能有点笨拙，当然可以使用改进......但它（希望）有效！

请注意，这是未经测试且基于研究的。

# r - R：找到产生 S4 插槽输出的源代码？

> ID：14371367
> 
> 赞同：1
> 
> 时间：2013-01-17T02:41:43.827
> 
> 标签：r, s4, slot, lme4, lmer

大家好，

当“lme4”中的“lmer”函数运行时，它会生成一个带有很多插槽的 S4 对象。我对这些插槽之一感兴趣，即模型@X，以及如何产生这个“X”插槽输出。我想尝试为我正在使用的不同模型函数（glmmPQL）重现这个输出，它不会自动产生这个'X'输出（仅供参考'lmer'产生一个'mer'类的对象，插槽'X'是一个模型固定效应的矩阵）。**下面的代码显示了我在说什么。**

我想弄清楚这个'X'数据是如何产生的？我通过在没有'()'的终端中编写'lmer'的代码来查看它，但我在那里找不到任何东西。我也试过 showMethod('lmer') 但它说 function 'lmer': 。

只是想知道是否有办法获取“X”插槽具体在做什么（或 S4 对象中的任何插槽）的源代码？或者有谁知道如何重现这个？非常感谢您的帮助和时间。

```
 library(lme4)
    # here is a quick example of what I am looking at using the cake dataset in the 'lme4' package
    m <- lmer(cakeglmm<- lmer(angle ~ temp + recipe + (1| replicate), family = gaussian, data = cake)

    slotNames(m)
    head(m@X) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T03:56:02.533

你一开始就打印好了`lmer`。这不会告诉你在哪里`m@X`设置，但你可以看到哪些方法被`lmer`.

`lmer`可以使用 访问其中的方法`lme4:::methodName`。

如果你往里看`lme4:::lmer_finalize`，你会看到（释义）：

```
ans <- new(Class = "mer", ..., X = fr$X, ...) 
```

这就是`@X`插槽被填充的地方。备份`lmer`你会看到它`fr`来自`lme4:::lmerFrames`，具体`fr$X`计算如下：

```
X <- if (!is.empty.model(mt)) 
    model.matrix(mt, mf, contrasts)
else matrix(, NROW(Y), 0) 
```

# android - 如何在 Android 上设置意图标志

> ID：14371368
> 
> 赞同：0
> 
> 时间：2013-01-17T02:41:56.977
> 
> 标签：android, android-intent

我用AActivity调用BActivity，而BActivity调用CActivity。
如下代码：
在 AActivity 中：

```
Intent intent = new Intent();
intent.setClass(AActivity.this, BActivity.class);
startActivity(intent); 
```

在 BActivity 中：

```
Intent intent = new Intent();
intent.setClass(BActivity.this, CActivity.class);
startActivity(intent); 
```

如果在 CActivity 中我按下后退按钮，我想直接启动 AActiviy。
但不能调用 BActivity。
我该如何修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:44:52.910

您可以覆盖`CActivity`to中的后退按钮

```
@Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
           Intent intent = new Intent();
           intent.setClass(CActivity.this, AActivity.class);
           startActivity(intent);
        }
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:47:07.190

在 BActivity 中：

```
Intent intent = new Intent();
intent.setClass(BActivity.this, CActivity.class);
this.finish();  //***** Add this
startActivity(intent); 
```

这会将 B 从返回堆栈中弹出，这样当您从 CActivity 按下返回按钮时，堆栈中的下一个，AActivity 将显示。

**注意**- 这与上面的答案不同。在这种方法中，您返回到 AActivity 之前的状态（大部分情况下）。在上面的第一个答案中，您将启动一个新的 AActivity 实例，从而向后台堆栈添加一个更多的活动。您需要选择哪种方法更适合您的需求。

# iphone - 数据源中的 KVO 问题

> ID：14371370
> 
> 赞同：0
> 
> 时间：2013-01-17T02:42:05.603
> 
> 标签：iphone, ios, objective-c, ipad, key-value-observing

我有一个 UITableView，其中包含存储在数组中的 NewsItem 对象的数据源。在我的 NewsItem 对象中，我有一个名为“imageState”的 BOOL，我想对其进行跟踪。我想使用 KVO，这样当这个 imageState 的值发生变化时，就会通知具有 NewsItem 数组的 UIViewController，然后它会做一些事情（即：重新加载单元格或其他事情）。我该怎么做这样的事情？首先可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:52:26.823

你可以在 TableViewController 添加观察者，像这样

```
[self addObserver:newsItemObject  forKeyPath:@"imageState" options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld) context:nil]; 
```

它会观察对象，当它改变时会调用这个方法，你应该在下面实现这个方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
 NSLog(@"%@ \n %@ \n %@ \n ",keyPath,object,change);
 // do your things
} 
```

如果类 NewsItem 是你的类，我认为最好使用 Delegate 或 Notification 。KVO 不是更好的方法。

# linux - 如何从核心文件中获取共享对象构建 ID？

> ID：14371372
> 
> 赞同：1
> 
> 时间：2013-01-17T02:42:25.433
> 
> 标签：linux, coredump

gcc 通常将构建 ID 嵌入到共享对象中，以允许自动检索符号（以及共享对象本身）。该方案记录在这里：

[http://fedoraproject.org/wiki/Releases/FeatureBuildId](http://fedoraproject.org/wiki/Releases/FeatureBuildId)

我有一个想要分析的用户模式核心转储，根据上面的文章，我知道它很可能包含我关心的所有共享对象的构建 ID（总共几十个）。如果我可以从核心转储中提取构建 ID，那么我可以在我们的档案中找到正确的版本，并能够调试这个核心转储（以及未来的核心转储）。

核心转储来自另一台我无权访问的机器，我不能相信那台机器上的用户会给我关于那台机器上有哪些模块的额外信息。

所以......知道什么 gdb 命令或 read-elf 魔法会找到我这些构建 ID 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T05:31:53.607

您可以使用 提取构建 ID `eu-unstrip`，这是[elfutils](https://fedorahosted.org/elfutils/)的一部分：

```
$ eu-unstrip -n --core core-file
0x8048000+0x25d000 b7fada8ba917de74a6055647f3ac205dee1615c8@0x8048178 - - [exe]
0xb7790000+0x1000 da7bd9bbfe599f7e9b644d684db983c4b34d8f31@0xb77901ec . - linux-gate.so.1
0xb7771000+0x19000 242ae1f2965ed161f3715858d7792019963b57fd@0xb7771164 /lib/i686/cmov/libpthread.so.0 - libpthread.so.0
0xb7768000+0x9000 06a49519b1ede0f79596e4b0cd07d2beba43b2dc@0xb7768164 /lib/i686/cmov/librt.so.1 - librt.so.1
0xb7672000+0xf5000 9daf5aac9ccc9281f2805639c3f87731beae5548@0xb7672144 /usr/lib/libstdc++.so.6 - libstdc++.so.6
0xb764c000+0x26000 696d5fb148fe51609203903d470a8f85d458cd17@0xb764c164 /lib/i686/cmov/libm.so.6 - libm.so.6
0xb762e000+0x1e000 d2a7edbd5dafabb7bb90198eeb58013342c589f0@0xb762e104 /lib/libgcc_s.so.1 - libgcc_s.so.1
0xb74e7000+0x147000 2124040143ac9f7478cc16b474b1cfdfe2c45353@0xb74e7184 /lib/i686/cmov/libc.so.6 - libc.so.6
0xb7791000+0x1d000 5a6fc3cf12f68887cbf22da3a9785d00f7d91c41@0xb7791124 /lib/ld-linux.so.2 - ld-linux.so.2 
```

# facebook-fql - fql //facebook其他用户的评论内容

> ID：14371375
> 
> 赞同：1
> 
> 时间：2013-01-17T02:42:31.293
> 
> 标签：facebook-fql

英语说得不好。了解你的

想搜索任何人评论的内容。你想如何使用 fql 查询语句？

前任）

```
SELECT commentsFROM stream
WHERE filter_key IN

(SELECT filter_key FROM stream_filter WHERE uid = me ())

AND actor_id IN

(SELECT uid2 FROM friend WHERE uid1 = me ()) 
```

不是关于我，我想看看其他用户的评论。求助~谢谢~

# cloud - 如何在 Google Cloud Storage 中公开许多文件？

> ID：14371376
> 
> 赞同：94
> 
> 时间：2013-01-17T02:42:45.607
> 
> 标签：cloud, google-cloud-storage

我在 Google Cloud Storage 中有 1000 个文件要公开，或者通常是一个目录层次结构。

在 Web UI 中，我似乎只能一次公开一个。

有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-26T02:03:48.617

跑`gsutil -m acl set -R -a public-read gs://bucket`

*   同时`-m`发出多个请求。
*   对存储桶中的每个对象的`-R`问题请求。
*   `-a`问题要求每个对象的每个版本。

有关[`gsutil help acl`](https://cloud.google.com/storage/docs/gsutil/commands/acl)更多信息，请参阅。

在 API 层[gsutil](https://developers.google.com/storage/docs/gsutil)发出以下 HTTP 请求：

```
PUT /bucket/obj?acl HTTP/1.1
Host: storage.googleapis.com
x-goog-acl: public-read 
```

您可以通过使用以下`-D`标志来查看`gsutil`：

```
gsutil -D setacl public-read gs://bucket/obj 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2017-08-24T19:56:11.867

您可以将存储桶中的所有对象设为公开。这是[链接](https://cloud.google.com/storage/docs/access-control/making-data-public)。

> 1.  在 Google Cloud Platform Console 中打开 Cloud Storage 浏览器。
> 2.  在存储桶列表中，单击要公开的存储桶的名称。
> 3.  选择页面顶部附近的权限选项卡。
> 4.  单击添加成员按钮。
>     出现添加成员对话框。
> 5.  在成员字段中，输入 allUsers。
> 6.  在 Roles 下拉列表中，选择 Storage 子菜单，然后单击 Storage Object Viewer 选项。
> 7.  单击添加。
> 
> 公开共享后，公共访问 > 列中的每个对象都会出现一个链接图标。您可以单击此图标以获取对象的 URL。

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2015-01-29T23:08:23.500

运行时：`gsutil -m acl set -R -a public-read gs://bucket`您为当前存储桶中的所有对象定义公开读取，但是当您上传新文件时，默认情况下它们不会公开。

我发现值得将存储桶默认 acl 定义为 public-read`gsutil defacl set public-read gs://bucket`

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-07-23T11:53:28.150

最简单的方法是使用控制台。

点击“编辑存储桶权限”

[![在此处输入图像描述](../Images/d044cd503c68bcf9dd535fd272caad16.png)](https://i.stack.imgur.com/XBkSG.png)

输入`allUsers`添加成员。那么`Select Role`>> `Storage`_`Storage Object Viewer`

注意力！这将为 Internet 上的所有人授予对该选定存储桶中所有对象的读取权限。

[![在此处输入图像描述](../Images/9dde2a722711fb8e9f0ea3f8c6da58e0.png)](https://i.stack.imgur.com/SUL5U.png)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-10-05T16:24:16.980

[在此处](https://cloud.google.com/storage/docs/hosting-static-website)找到的有关托管静态网站的当前（2017 年 10 月）文档指向：

`gsutil acl ch -r -u AllUsers:R gs://bucket-name`

递归技巧在哪里`-r`并`-u AllUsers:R`提供公共读取访问权限。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-25T00:42:11.430

您可以在公共范围内制作所有对象，此链接有更多信息：[https ://cloud.google.com/storage/docs/access-control/making-data-public](https://cloud.google.com/storage/docs/access-control/making-data-public)

如果您不能，请在控制台中登录您的存储桶并单击“编辑存储桶权限” - 在添加成员中输入 allUsers。然后选择角色 > 存储 > 存储对象查看器

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-27T04:32:55.920

为了代表 Erik 复制和粘贴，这对我来说始终如一：

> 使对象组公开可读
> 
> 要使存储桶中的所有对象公开可读：
> 
> CONSOLEGSUTILREST APIS 使用 gsutil iam ch 命令，将 [VALUES_IN_BRACKETS] 替换为适当的值：

```
 gsutil iam ch allUsers:objectViewer gs://[BUCKET_NAME] 
```

# c++ - 测试对象在谷歌测试中被构造函数传递后不保留值

> ID：14371377
> 
> 赞同：0
> 
> 时间：2013-01-17T02:42:45.323
> 
> 标签：c++

我正在使用谷歌测试/模拟框架进行单元测试。我在我的 SetUp 函数中调用我正在测试的基类的构造函数。我使用 SetUp 中生成的对象设置了类的某些私有成员，以修改我的测试行为。当我的测试函数调用我正在测试的基函数时，私有成员变量的地址会发生变化，因此测试段错误。我需要找出这种行为的原因，因为我正在测试的另一个类似文件不会发生这种情况。

```
//Class to test
//base code

//header file
class To_Test
{

friend My_test_class;

private:
TestStruct* sptr;  //pointer to a structure, set by some random function elsewhere

public:
To_Test();
~To_Test();
boolean Function_1();

}

//cpp file

To_Test::To_Test()
{
sptr = NULL;
}

boolean To_Test::Function_1()
{
boolean variable;
variable = sptr->bool;
if (variable)
            {
            do something
            return TRUE;
            }
return FALSE;
}

//Test framework

//test class header file
#include "To_Test.h"

class My_test_class : public :: testing :: Test
{
public:

To_Test *ToTestObj;
virtual void SetUp();

void Test_Function_1();

}

//gtest.cpp file
My_test_class::SetUp()
{
ToTestObj = New To_test;
}

My_test_class::Test_Function_1()
{
ToTestObject->sptr = (RandomStruct*) malloc (sizeof(RandomStruct));
sptr->bool = TRUE;
ASSERT_TRUE(TRUE = ToTestObject->Function_1());
} 
```

SetUp中ToTestObject的地址，Test_Function_1和Function_1中的地址是一样的。但是SetUp和Test_Function_1中sptr的地址与Function_1的地址不同。因此，当我在执行测试时单步执行 Function_1 时，sptr 没有内存，因为它指向 NULL，并且当它尝试访问 sptr->bool 处的内存时执行失败。

我不确定是什么导致了这个问题。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:30:26.030

看来，您正在使用 C++，为什么不通过使用智能指针来避免不必要`malloc`的`NULL`,`TRUE`和内存泄漏呢？

除此之外，它似乎`sptr`是 type `TestStruct*`，而您将 a 分配`RandomStruct*`给它并期望该成员`sptr->bool`位于同一内存位置。这不是关于 googletest 的问题，而是关于 C++ 编程的问题。

此外，`bool`是一个保留关键字，不应以此处显示的方式使用，而`TestStruct`. 该关键字`new`也以大“N”开头拼写错误，除非您有宏，否则无法编译。

# opencl - OpenCL 中的 write_image 请求如何被限制？

> ID：14371379
> 
> 赞同：1
> 
> 时间：2013-01-17T02:43:03.267
> 
> 标签：opencl

在 OpenCL 中，您需要定义一个在进行图像读取 (read_image*) 时反对的采样器，并且在该采样器中您指定如何限制地址（例如，您可以执行 CLK_ADDRESS_CLAMP_TO_EDGE）。但是没有用于图像写入的采样器 (write_image*)。所以没有指定钳位。那么退出图像边界的像素地址应该发生什么？这只是没有指定并留给供应商吗？在网上看，似乎大多数具有 write_images 的 OpenCL 代码要么不使用任何钳位，要么人们使用自己的钳位函数。我不明白为什么没有为写入指定钳位，而是为读取指定了钳位。我在这里错过了什么吗？我已经用谷歌搜索并仔细阅读了规范，没有任何解释如何限制写入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:02:02.097

从 OpenCL 1.2 规范 6.12.14.4：

> 对于使用上述描述中未指定的 image_channel_data_type 值或使用不在范围 (0 ... 图像宽度 – 1, 0 ...图像高度 – 1) 分别是未定义的。

没有写钳位，它留给用户内核代码来确保坐标有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T19:40:21.180

不仅没有图像写入限制，在某些设备（例如，较旧的 NVIDIA 硬件）上，写入图像边界之外的内容通常*会*以难以调试的方式崩溃（因为这是 GPU 崩溃）。避免这样做。

# android - android需要谷歌用户ID作为解锁功能的方法的一部分

> ID：14371381
> 
> 赞同：0
> 
> 时间：2013-01-17T02:43:09.140
> 
> 标签：android, in-app-purchase, userid

我的应用是免费的，并且通过应用内购买，我想启用其他功能。为此，我设想生成一个取决于当前用户和当前应用程序版本的解锁代码。我需要第一个，这样相同的密钥就不能用于其他人的安装（但可以用于同一用户拥有的多个设备）。我可能不需要第二个，但它会给未来更多的灵活性。

为此，我需要某种 google 用户 ID。有这样的事吗？如果是这样，我该如何得到它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:14:56.720

Google 会为您解决其中的一些问题。它将为用户提供一个设备相关密钥到每个设备。你的工作是

1）在您的服务器上正确验证密钥

2) 确保从服务器返回特定于设备的授权值，这样用户就不能只是复制数据文件。

3）在设备上，使用授权值来启用事物。

验证密钥很容易，但请确保您在服务器上进行。问题在于识别设备。谷歌和它的合作伙伴在这方面有点失落。Tim Bray 在[http://android-developers.blogspot.ca/2011/03/identifying-app-installations.html](http://android-developers.blogspot.ca/2011/03/identifying-app-installations.html)有一篇博客文章讨论了这个问题。尽管他有所保留，我还是建议使用 ANDROID_ID。我对他的另一个提案的安全性表示怀疑，但尚未进行全面分析。绝对远离任何与网络相关的东西（IMSI、IMEI、ESN……）。我还缓存了使用的设备标识符并确保它不会改变。

就个人而言，我对解锁应用程序功能所需的数据进行了加扰。当我得到一个有效的交易时，我计算一个可以与设备 ID 结合来解锁数据的密钥。它远非完美，但似乎有效。我接受我会被黑——我只是不想让它变得明显。

如果您想要每个版本的密钥，那么您需要在版本更改时执行 RESTORE_TRANSACTIONS 并在服务器上重新验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:12:27.607

我想建议另一种方法 - 没有更好，只是不同。使用标志来指示是否允许运行升级功能。定期使用应用内计费 API 验证用户是否购买了升级。如果没有，请重置标志。

用户可以破解该标志，但迟早会被重置，从而阻止使用这些功能。

要真正打破这种方法，用户必须对代码进行逆向工程并绕过检查标志。我怀疑大多数人会为此烦恼，但我知道什么？

# c# - 如果您不知道与 xmlns 属性关联的 URI 的名称，那么查询 XML 文档的最佳方法是什么？

> ID：14371382
> 
> 赞同：0
> 
> 时间：2013-01-17T02:43:12.483
> 
> 标签：c#, .net, xml, xsd, xml-namespaces

我不想对 URI 进行硬编码，然后必须先分配前缀，然后才能使用 XPath 表达式从 XML 文档中选择节点。是否可以通过编程方式检索此信息？

这是唯一的方法吗？

```
string uri = xml.SelectSingleNode("*").Attributes["xmlns"].Value? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:49:08.193

我可以建议的唯一好的选择（假设您想按名称专门选择节点）是使用`local-name()`：

```
XmlNode foundNode = xml.SelectSingleNode("/*[local-name() = 'a']/*[local-name() = 'b']/*[local-name() = 'c']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:33:46.530

您可以查询文档以找出它使用的命名空间。例如，XPath 表达式 namespace-uri(/*) 将找到用于最外层元素名称的命名空间。

# draggable - Dynamic.js 中具有可拖动图像的复杂剪切边界

> ID：14371383
> 
> 赞同：2
> 
> 时间：2013-01-17T02:43:44.497
> 
> 标签：draggable, mask, kineticjs, clipping

查看我的基于 html5 的裁剪约束

[http://shedlimited.debrucellc.com/test3/canvaskinclip.html](http://shedlimited.debrucellc.com/test3/canvaskinclip.html)

[（在http://jsfiddle.net/aqaP7/4/](http://jsfiddle.net/aqaP7/4/)上弄乱 jsfiddle ）

因此，在 html5 中，我可以轻松绘制如下形状的边界：

```
 context.beginPath();
  context.moveTo(5, 5);
  context.lineTo(34, 202);

  context.lineTo(2, 405);
  context.lineTo(212, 385);
  context.lineTo(425, 405);
  context.lineTo(400, 202);
  context.lineTo(415, 10);
  context.lineTo(212, 25);
                context.clip(); 
```

不过，在 kinetic.js 中，我看到的所有裁剪选项都是：高度、宽度和 x、y、

我遇到了以下问题：[在 KineticJS 中使用多边形蒙版/剪辑图像](https://stackoverflow.com/questions/14014600/mask-clip-an-image-using-a-polygon-in-kineticjs)，但内部/填充图像无法设置为可拖动

请有任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:19:04.997

在新的 kineticJS 版本中，很多工作都是在后台为您完成的。

看看这个[教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/)：

这个[小提琴](http://jsfiddle.net/5hrjE/2/)让你非常接近，这里是代码：

```
 <body>
    <div id="container"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
    <script>
      function loadImages(sources, callback) {
        var images = {};
        var loadedImages = 0;
        var numImages = 0;
        // get num of sources
        for(var src in sources) {
          numImages++;
        }
        for(var src in sources) {
          images[src] = new Image();
          images[src].onload = function() {
            if(++loadedImages >= numImages) {
              callback(images);
            }
          };
          images[src].src = sources[src];
        }
      }
      function draw(images) {
        var stage = new Kinetic.Stage({
          container: 'container',
          width: 600,
          height: 700
        });
        var layer = new Kinetic.Layer();

        var patternPentagon = new Kinetic.RegularPolygon({
          x: 220,
          y: stage.getHeight() / 4,
          sides: 5,
          radius: 70,
          fillPatternImage: images.yoda,
          fillPatternOffset: [-220, 70],
          stroke: 'black',
          strokeWidth: 4,
          draggable: true
        });

        patternPentagon.on('dragmove', function() {
        //this.setFillPatternImage(images.yoda);
          //this.setFillPatternOffset(-100, 70);
          var userPos = stage.getUserPosition();
          this.setFillPatternOffset(-userPos.x,-userPos.y);
          layer.draw();
            this.setX(220);
            this.setY(stage.getHeight() / 4);
        });

        layer.add(patternPentagon);

        stage.add(layer);
      }
      var sources = {
        darthVader: 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg',
        yoda: 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg'
      };

      loadImages(sources, function(images) {
        draw(images);
      });

    </script>
  </body> 
```

有一种更复杂/更准确的方法可以在不使其成为背景图案的情况下执行此操作，例如将对象组合在一起

# io - 等待互斥体、条件变量或 I/O 是否会自动 yield() 线程？

> ID：14371384
> 
> 赞同：1
> 
> 时间：2013-01-17T02:43:49.600
> 
> 标签：io, mutex, scheduling, condition-variable

这似乎很容易，但只是想检查这是否得到保证（在 Linux 上）。在满足等待条件之前，线程是否被排除在调度之外？或者线程会被调度，发现它仍在等待并再次 yield()，浪费资源？

我要问的原因是，如果我有 X 个线程正在运行，并且某些线程由于某种原因被阻塞，被阻塞的线程是否会妨碍可运行线程（假设它们具有相同的优先级）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:45:53.557

是的，它们在不消耗任何 CPU 资源的情况下等待。只有自旋锁会忙着等待。

# javascript - three.js 材质可以为凹凸贴图和纹理贴图提供单独的重复值吗？

> ID：14371385
> 
> 赞同：3
> 
> 时间：2013-01-17T02:43:51.893
> 
> 标签：javascript, three.js, textures

我试图通过应用重复频率低得多的凹凸贴图来分解纹理中的重复。不幸的是，它似乎采用了 (64) 以下的“landTexture”的重复值，而不是我将其设置为 (1) 的值。

```
landTexture.wrapS = landTexture.wrapT = THREE.RepeatWrapping;
landTexture.repeat.set(64, 64);
bumpTexture.wrapS = bumpTexture.wrapT = THREE.RepeatWrapping;
bumpTexture.repeat.set(1, 1);
var m = new THREE.MeshPhongMaterial({map:landTexture, 
                                     ambient: 0x552811, 
                                     specular: 0x333333, 
                                     shininess: 25, 
                                     bumpMap: bumpTexture, 
                                     bumpScale: 1, 
                                     metal: false }); 
```

如果我注释掉`map:landTexture`，那么凹凸贴图比例为 1。我可以以某种方式混合这两个重复值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T04:30:43.093

不，偏移量和重复值默认为其中之一：

```
// uv repeat and offset setting priorities
//  1\. color map
//  2\. specular map
//  3\. displacement map
//  4\. normal map
//  5\. bump map
//  5\. roughness map
//  5\. metalness map
//  6\. alpha map
//  7\. emissive map 
```

在您的情况下，这将是`landTexture`设置。

解决方法是修改纹理，或创建自定义`ShaderMaterial`.

编辑：例外是光照贴图和环境遮挡贴图，它们都使用第二组 UV。这允许其他纹理比光照/AO 贴图具有更高的细节。

三.js r.84

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-12T01:16:21.687

是的。在最近的版本中，three.js`r90^`有一个 API，可用于通过 GLSL 更改内置材质的行为。

这并不容易，但已经做了一个例子：

[https://github.com/pailhead/three.js/blob/aa72250835b82f7dde2e8375775a4b039cb719c6/examples/webgl_materials_extended_multiple_uvs.html](https://github.com/pailhead/three.js/blob/aa72250835b82f7dde2e8375775a4b039cb719c6/examples/webgl_materials_extended_multiple_uvs.html)

[https://github.com/mrdoob/three.js/pull/14174](https://github.com/mrdoob/three.js/pull/14174)

基本上，内置材质基于着色器模板，它只是一个有序的`#include <some_chunk>`语句列表。

其中一些“块”包含一些看起来像这样的代码

```
/*...*/ texture2D( foo, vUv ) /*...*/ 
```

在哪里`foo`,`alphaMap`等`map`。`specularMap`这意味着在该采样器上的插值 uv 属性处进行纹理查找。您并不真正关心这段代码之前的内容或之后的内容（它可能只是一个分号`;`或一些掩码`.xy`）。

所以你想要做的是应用一些偏移量，或者按照 three.js 的方式，应用 mat3 变换。

因此，GLSL 需要看起来像这样

```
texture2D( foo, foo_transform * vUv ) 
```

那么问题就变成了为着色器提供这个制服。该示例通过首先编译着色器，然后搜索整个事物（否则您必须知道要在哪些块中查找此纹理查找）来执行一些蛮力操作。

这是一个比修改纹理更好的解决方案，实际上应该比编写自定义`ShaderMaterial`.

免责声明 - 三个并不是真的要像这样使用，但可以。例如，虽然每个地图都有前缀`somethingMap`，但反照率地图没有前缀，它只是被称为`map`，如果它是`albedoMap`这个例子中的正则表达式会更简单。

# php - Php，用插入符号（^）计算指数失败

> ID：14371386
> 
> 赞同：6
> 
> 时间：2013-01-17T02:44:03.823
> 
> 标签：php, exponent

Wolfram Alpha 说将给出以下公式的正确结果：

```
((0.0004954*($current^2))-((0.935*$current)+378.486))-
((0.0004954*($desired^2))-((0.935*$desired)+378.486)); 
```

但是当我在 PHP 中运行它时，它没有给出正确的答案，为什么不呢？

```
$current = mysql_escape_string($_POST['current']);
$desired = mysql_escape_string($_POST['desired']);
$username = mysql_escape_string($_POST['username']);
$password = mysql_escape_string($_POST['password']);
$email = mysql_escape_string($_POST['email']);
$ip = $_SERVER["REMOTE_ADDR"];
$time = time();
$elo = $desired - $current;
if($current < 1200) {
  $price = ($elo/100)*30;
} elseif($current < 1400) {
  $price = ($elo/100)*35;
} elseif($current < 1901) {
  $price = ((0.0004954*($current^2))-((0.935*$current)+378.486))-((0.0004954*($desired^2))-((0.935*$desired)+378.486));
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T02:46:28.150

`^`运算符是位[运算](http://php.net/manual/en/language.operators.bitwise.php)符。

您需要使用[pow](http://php.net/manual/en/function.pow.php)。

如果您只想对一个值进行平方，那么您可以将它本身相乘，`$current * $current`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T02:49:13.680

您需要使用该`pow($number, $exponent)`功能。

在 PHP 中，`^` [并不意味着指数](https://stackoverflow.com/questions/2724936/what-does-mean-in-php)。

`$price = ((0.0004954*(pow($current, 2)))-((0.935*$current)+378.486))-((0.0004954* (pow($desired, 2)))-((0.935*$desired)+378.486));`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-03T14:22:55.293

^ 是 XOR 位运算符

您可以使用 Supericy 提到的 pow，但您也可以只使用 ** 运算符作为简写。

# function - 如何在 Main 中使用函数？

> ID：14371391
> 
> 赞同：3
> 
> 时间：2013-01-17T02:44:23.607
> 
> 标签：function, if-statement, char

我被困在我的程序中。我需要帮助在 main 方法中使用函数。到目前为止，我有这个：

```
 double x, y;
    char op;

    System.out.print("X: ");
    x = keyboard.nextDouble();
    System.out.print("Y: ");
    y = keyboard.nextDouble();

    System.out.print("Enter Operation: ");
    op = keyboard.next().charAt(0);

    do
    {   
        if (op == '+');
            System.out.print("..");

    }
    while (op != 'q');

    System.out.print("Bye!");
}

public static double sum (double x, double y)
{
    double sum = 0;
    sum = (x + y);

    return sum;
}
public static double minus (double x, double y)
{
    double minus = 0;
    minus = (x - y);

    return minus;
}
public static double multiply (double x, double y)
{
    double multiply = 0;
    multiply = (x * y);

    return multiply;
}
public static double divide (double x, double y)
{
    double divide = 0;
    divide = (x/y);

    return divide;
} 
```

对于“if 语句”，我想使用这些函数。如果运算是“+”，那么它将使用 sum 函数来添加 x 和 y。但是如何在“if 语句”中键入它？对不起。这是我的第二节编程课，所以我还在学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:46:20.767

你调用另一个函数是这样的：

```
double output = sum(1,3); 
```

更一般地说，它是这样的：

```
OutputType VariableToHoldOutput = MethodName(Parameter1, Parameter2, etc); 
```

输出可选存储。如果输出类型为 void，您甚至无法存储它。这会导致这样的事情

```
MethodName(Parameter1, Parameter2, etc); 
```

此外，`if`语句后面没有分号。你拥有它的方式相当于：

```
if (op == '+')
{
    ;
}
System.out.print("..") 
```

您可能想要更多类似的东西：

```
if(op == '+')
{
    double output = sum(X,Y);
    System.out.print("Output = " + output);
} 
```

# iphone - iPhone - 在 NSURLConnection 完成之前使 UITableViewCells 出现在视图加载中

> ID：14371395
> 
> 赞同：0
> 
> 时间：2013-01-17T02:44:43.683
> 
> 标签：iphone, uitableview, nsurlconnection

我正在尝试使用情节提要和 JSON 创建一个松散版本的 LazyTabelImages。在我的主 TableViewController 上的 ViewDidLoad 中，我启动了一个 NSURLConnection 来获取 JSON 数据，但我的单元格直到连接完成后才会加载。我想要与 LazyTableImages 相同的行为，其中单元格加载为空白，然后填充信息（重新加载表数据）。如果我不使用情节提要，我可以复制它，因为 LazyTables 不使用情节提要，但这不是一个选项。

我查看了 LazyTableImages 试图找到解决方案，但故事板有很大的不同（无论如何对我来说）。

有没有一种简单的方法可以让单元格加载为空白？例如，如果设备没有互联网，我仍然希望我的 TableView 显示，我会在单元格中放置一条自定义消息。

代码：

我在 viewDidLoad 中初始化连接的部分......

```
NSURLRequest *urlrequest = [NSURLRequest requestWithURL:[NSURL URLWithString:serverURL]];
    self.dataConnection = [[NSURLConnection alloc] initWithRequest:urlrequest delegate:self];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES; 
```

connectionDidFinnishLoading...

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    //ListData below is an array that my data received (JSON) is loaded into. It is then passed to getTableData.
    self.dataConnection = nil;
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self performSelectorOnMainThread:@selector(getTableData:) withObject:ListData waitUntilDone:YES];
    });
} 
```

获取表数据...

```
-(void)getTableData:(NSData *)jsonData
{
    NSError *error = nil;
    arrayEntries = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableLeaves error:&error];
    for (int x = 0; x < arrayEntries.count; x++)
    {
        NSMutableDictionary *dic = [arrayEntries objectAtIndex:x];

        //ARecord is a class just like in LazyTableImages that creates objects to keep the icons/data together. The ARecords are loaded into the TableView
        ARecord *arecord = [[ARecord alloc] init];

        NSString *title = [dic objectForKey:@"title"];
        NSString *subt = [dic objectForKey:@"subtitle"];
        NSString *url = [dic objectForKey:@"image_URL"];
        arecord.Icon = nil;
        arecord.URL = url;
        arecord.Name = title;
        arecord.title = subt;

        //this is where I load an array full of the arecord objects.
        [array addObject:arecord];
    }
    [self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:51:13.100

我用两个对象做这个。首先，我有一个图像获取器类，它异步下载数据并在完成时通知委托。然后我有一个实现 fetcher 的委托方法的图像视图类。所以像：

```
@implementation AsyncImageFetcher
-(id)initWithURL:(NSURL *)aURL andDelegate:(id<SomeProtocol>)aDelegate{

  //...

  NSURLRequest *req = [NSURLRequest requestWithURL:aURL];
  //Note that NSURLConnection retains its delegate until the connection
  //terminates! See comments in MyImageView below.
  [NSURLConnection connectionWithRequest:req delegate:self];

  //...
}

//Implement standard connection delegates here. The important part is:
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{

  // ...

  UIImage *anImage = [self decodeDownloadedDataIntoAnImage];
  if([[self delegate] respondsToSelector:@selector(imageFetcher:didFetchImage:)]){
    [[self delegate] imageFetcher:self didFetchImage:anImage];
  }

  //...
}

@end 
```

然后我继承`UIImageView`or`UIView`或其他东西（取决于你需要多么灵活）来实现委托协议并触发 fetcher：

```
@implementation MyImageView

-(id)initWithURL:(NSURL *)aURL andPlaceHolderImage:(UIImage *)aPlaceHolder{

  //...

  [self setImage:aPlaceHolder];

  //Note we don't assign this to an ivar or retain it or anything. 
  //That's ok because the NSURLConnection inside the fetcher actually 
  //retains the fetcher itself. So it will live until the connection 
  //terminates -- which is exactly what we want. Thus we disable 
  //CLANG's noisy warnings.
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wunused-value"
  [[AsyncImageFetcher alloc] initWithURL:aURL andDelegate:self];
  #pragma clang diagnostic pop

  return self;
}

-(void)imageFetcher:(MCMAsyncImageFetcher *)anImageFetcher didFetchImage:(UIImage *)anImage{
  [self setImage:anImage];
}

@end 
```

在您的特定情况下，您只需将 a 设置`MyImageView`为您的单元格`imageView`in `-tableView:cellForRowAtIndexPath:`，当然，为其占位符和 URL 传递合理的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:23:11.007

我做过类似的事情。在 viewDidLoad 中：我将表数据的数组设置为 [NSNull null] 的几个对象，但我想在数据下载时显示许多空白行。在 cellForRowAtIndexPath: 我检查 [self.arrayOfTableData objectAtIndex:indexPath.row] = [NSNull null]。如果是，则返回一个“空白”单元格，否则使用 ARRecrod 数据加载该单元格。然后，当 URL 完成时，将 NSNulls 数组替换为您的 ARRecords 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:14:08.850

由于我没有看到你的代码，我只是在这里给出我的建议：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    dispatch_queue_t queue = dispatch_queue_create(NULL, NULL);
    dispatch_async(queue, ^{

        //add your connection code here
        //parse the json and store the data
        //

        dispatch_async(dispatch_get_main_queue(), ^{

            //here to reload your table view again, 
            //since UI related method should run on main thread.

            [YOUR_TABLEVIEW reloadData];

        });

    });

    [YOUR_TABLEVIEW reloadData];
} 
```

注意：确保故事板中的表格视图已连接到代码中的表格视图！希望能帮助到你！

# javascript - 如果 id 基于函数参数之一，我如何访问 jquery 中的元素？

> ID：14371398
> 
> 赞同：0
> 
> 时间：2013-01-17T02:44:59.007
> 
> 标签：javascript, jquery, element

我正在尝试使用函数输入访问 jquery 中的元素。为了澄清，这是我尝试过的不起作用的示例：

```
function openReceivedMessage(messageid)
{
    // ajax post query that is executing fine

    // set row to not be highlighted
    var rowid = 'receivedrow' + messageid.toString();
    document.getElementById(rowid).style.background-color = "#ffffff";

    // other code that is executing fine
} 
```

本质上，这是用于消息收件箱页面。我已经在表格中显示了消息，并且随着每个用户的消息数量发生变化，我使用了一个循环来填充它。为了打开一条消息，我希望使用一个 jquery 函数（上面的标题），所以当循环填充表时，我设置它以便每个不同的主题行在点击时执行上述函数作为参数传入的唯一 messageid。打开后，我想更改表中的其他内容（我命名的，类似于消息函数，例如'receivedrow#'，其中 # 是 messageid。

非常感谢这里的任何帮助，我觉得必须有一种简单的方法来创建一个字符串（就像我在上面对 rowid 所做的那样）并使用该 id 访问元素（在表中有一行 id="receivedrow#"我想调整css）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:47:32.237

```
function openReceivedMessage(messageid)
{

   var rowid = 'receivedrow' + messageid.toString();
   var $el = $('#'+rowid);
   $el.css({'background-color':'#FFFFFF'});

// other code that is executing fine
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:51:42.423

我推荐使用 jQuery 来查找元素

```
var rowid = 'receivedrow' + messageid.toString();
var $el = $("#" + rowid); 
```

然后简单地对 $el 进行操作

```
$el.css({'background-color':'#FFFFFF'}); 
```

如果您仍然遇到问题，我建议您检查 rowid 是否正确以及 jQuery 是否会为您返回正确的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:56:12.403

如果您真正需要的是一种简单的方法来获取 id onclick，那么只需在行标记中使用*this*关键字。

```
onclick="openReceivedMessage(this);" 
```

然后像这样访问您的函数：

```
function openReceivedMessage(row)
{    
    // set row to not be highlighted
    var rowid = 'receivedrow' + row.id;
    $('#' + rowid).css({'background-color':'#ffffff'});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T02:53:49.600

似乎您发布的内容根本不是 jQuery：D

尝试获取具有 id 的 DOM 元素是简单的 JavaScript `rowid`。它不起作用可能是因为以下两个原因：

1.  没有`rowid`可以轻松验证的带有 id 的元素。
2.  `background-color`不是它的属性`backgroundColor`。

尝试使用这个：

```
document.getElementById(rowid).style.backgroundColor = "#ffffff"; 
```

# objective-c - 我收到错误消息，“从不兼容的类型“gameViewController”分配给“id avaudioplayerdelegate””

> ID：14371400
> 
> 赞同：-1
> 
> 时间：2013-01-17T02:45:00.693
> 
> 标签：objective-c, audio

```
 -(void)playSound: (NSString*)sound 

{
NSString *path = [[NSBundle mainBundle] pathForResource:sound ofType:@"mp3"];

    AVAudioPlayer* theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
theAudio.delegate = self; 
    [theAudio play];
    [AVAudioPlayer release];
} 
```

一切仍然有效，只是一个恼人的错误可能会导致延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:17:36.483

确保`gameViewController`符合`AVAudioPlayerDelegate`协议：

```
@interface gameViewController : NSObject <AVAudioPlayerDelegate>
.
.
.
@end 
```

假设那是你班级的名字。

# php - 是否有具有用于解析新电子邮件的 API 的电子邮件服务？

> ID：14371402
> 
> 赞同：-1
> 
> 时间：2013-01-17T02:45:10.063
> 
> 标签：php, javascript, api, email

我正在寻找一种使用 Javascript/PHP 自动检查电子邮件帐户是否有新电子邮件的方法。如果有，那么我希望它打开它，获取消息内容，并在访问者正在查看的网页上显示这些内容。

这可能吗？哪些电子邮件服务提供此功能。它不必是 gmail 或 hotmail，它可以是任何电子邮件地址。只要有一个API可以做到这一点。

只需要抓取 1 封电子邮件，并且只会存储一封。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:55:11.517

每个电子邮件服务都将附带您必须使用的自己的 API。或多或少所有电子邮件服务都为您提供此功能。我不认为所有电子邮件服务都有通用 API，如果您需要 google 邮件，则需要 google API，提取 yahoo 邮件将需要 yahoo API。
对于 gmail，我们有[https://developers.google.com/google-apps/gmail/](https://developers.google.com/google-apps/gmail/)，
对于 Yahoo，我们有[http://developer.yahoo.com/mail/](http://developer.yahoo.com/mail/)
您可以在线搜索有关这些 API 许可的更多详细信息.

# javascript - AngularJS 多次定义 angular.module()

> ID：14371410
> 
> 赞同：30
> 
> 时间：2013-01-17T02:46:06.153
> 
> 标签：javascript, angularjs

`angular.module('myModule')`多次调用是什么行为？

例如，我希望在单独的 .js 文件中定义我的路由和指令。

这安全吗？

例如：

```
//routes.js
angular.module('app',['$strap'])
   .config(function($routeProvider, $locationProvider) {
     ...
   });

//directives.js
angular.module('app')
    .directive('formInput', function() {
... 
```

另外，多次定义依赖关系有什么影响？这是添加剂，还是最后的胜利？

例如：

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-17T03:41:58.543

> angular.module（名称[，需要]，configFn）；
> ...
> 需要（可选） - {Array.=} - 如果指定，则正在创建新模块。如果未指定，则正在检索模块以进行进一步配置。-- [angular.module 文档](http://docs.angularjs.org/api/angular.module)

我将其解释如下：您只能定义一次依赖关系——第一次为特定模块调用 angular.module 时。之后您可以多次调用 angular.module()，但`requires`不能指定该选项。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-23T21:29:12.057

您应该只**创建**一次模块。根据[文档](https://docs.angularjs.org/guide/module)，如果您创建一个名称已存在的模块，它将覆盖前一个。（所以最后获胜。）

```
angular.module('app', []); 
```

您可以根据需要在单独的文件中多次**检索**您的模块。您通常会多次检索您的模块以声明服务、控制器、指令等。

```
angular.module('app').service('myService', ...);
angular.module('app').controller('myController', ...);
angular.module('app').directive('myDirective', ...); 
```

在[有关模块的 AngularJS 文档中](https://docs.angularjs.org/guide/module)，请参阅名为*Creation 与 Retrieval*的部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T00:13:25.927

我是 Angular 的新手，但这是我的理解：您在每个文件中创建一个具有命名空间模块名称的模块，并且在您的主模块中您需要这些模块。

```
// in main app.js file
var app = angular.module('myapp', 
          ['myapp.routers', 'myapp.directives', 'myapp.filters']);

// in filters.js
angular.module('myapp.filters', []).filter(....)

// in routers.js
angular.module('myapp.routers', []).router(....)

// in directives.js
angular.module('myapp.directives', []).directive(....) 
```

# wordpress - Wordpress 搜索查询结果

> ID：14371413
> 
> 赞同：1
> 
> 时间：2013-01-17T02:46:29.023
> 
> 标签：wordpress

我的网站有问题，我确信它与 Wordpress 上主要搜索功能的 PHP 代码有关。这是网站 - [http://romanceanimefans.com/blog/](http://romanceanimefans.com/blog/)

每当我进行具有多页结果的搜索并单击第二页时，当结果中显示更多帖子时，我都会收到错误消息。

这是执行搜索的示例 - http://romanceanimefans.com/blog/?s=search&tags[]=27&any=any

这是下一页结果的链接 - [http://romanceanimefans.com/blog/page/2/?s=search](http://romanceanimefans.com/blog/page/2/?s=search)

好像有两种不同的搜索功能。我需要做什么来解决这个问题？

# facebook - 如何使用 Graph API 在一篇文章中获取所有照片？

> ID：14371424
> 
> 赞同：13
> 
> 时间：2013-01-17T02:47:25.620
> 
> 标签：facebook, facebook-graph-api, post, facebook-fql

```
 {
    "id": "11882030_4952296803730", 
    "from": {
      "name": "xxx", 
      "id": "11882030"
    }, 
    "message": "test", 
    "picture": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/408410_4952294483672_298434229_s.jpg", 
    "link": "https://www.facebook.com/photo.php?fbid=4952294483672&set=pcb.4952296803730&type=1&relevant_count=2", 
    "icon": "https://fbstatic-a.akamaihd.net/rsrc.php/v2/yx/r/og8V99JVf8G.gif", 
    "actions": [
      {
        "name": "Comment", 
        "link": "https://www.facebook.com/11882030/posts/4952296803730"
      }, 
      {
        "name": "Like", 
        "link": "https://www.facebook.com/11882030/posts/4952296803730"
      }
    ], 
    "privacy": {
      "description": "Friends", 
      "value": "ALL_FRIENDS", 
      "friends": "", 
      "networks": "", 
      "allow": "", 
      "deny": ""
    }, 
    "place": {
      "id": "471607792876974", 
      "name": "TTT", 
      "location": {
        "street": "", 
        "zip": "", 
        "latitude": x, 
        "longitude": x
      }
    }, 
    "type": "photo", 
    "status_type": "mobile_status_update", 
    "object_id": "4952294483672",
    "application": {
      "name": "Facebook for iPhone", 
      "namespace": "fbiphone", 
      "id": "6628568379"
    }, 
    "created_time": "2013-01-17T01:29:59+0000", 
    "updated_time": "2013-01-17T01:29:59+0000", 
    "comments": {
      "count": 0
    }
  } 
```

如上所述，我发布了带有两张照片的状态。我可以在 中获取第一张照片的拇指 URL，`picture`并在 中获取相关链接和计数信息`link`。

但是如何获取每张照片的特定 URL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T09:42:56.317

FQL 通常提供比 Graph API 更多的信息。您必须使用**FQL**`attachment`表的参数来获取所有附加的照片。`stream`

 **```
SELECT attachment FROM stream 
 WHERE source_id = me() 
   AND post_id="11882030_4952296803730" 
```

结果：

```
{
  "data": [
    {
      "attachment": {
        "media": [
          {
            "href": "https://www.facebook.com/photo.php?fbid=471082296...", 
            "alt": "", 
            "type": "photo", 
            "src": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash3/5826...", 
            "photo": {
              "aid": "4391039135", 
              "pid": "439104482145", 
              "fbid": 471507, 
              "owner": 102832, 
              "index": 1, 
              "width": 485, 
              "height": 172, 
              "images": [
                {
                  "src": "https://fbcdn-photos-a.akamaihd.net/hph...", 
                  "width": 130, 
                  "height": 46
                }
              ]
            }
          }
        ], 
        "name": "", 
        "caption": "", 
        "description": "", 
        "properties": [
        ], 
        "icon": "https://fbstatic-a.akamaihd.net/rsrc.phpjk.gif", 
        "fb_object_type": "album", 
        "fb_object_id": "4391044992857139135"
      },
      { 
        ... //Photo 2
      }
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-27T01:13:02.600

基于 Stéphane Bruckerts 的回答；你在追求`attachments`。因此，我建议`attachments`您在图表请求中简单地请求该字段。**

# macos - 如何自定义默认“关于”窗口中的文本？

> ID：14371427
> 
> 赞同：2
> 
> 时间：2013-01-17T02:47:41.797
> 
> 标签：macos, cocoa, about-box

我有一个 Cocoa 应用程序，我想使用默认的 About 窗口，如下所示：

![在此处输入图像描述](../Images/e20a87d53d707274af42d241e97de1d2.png)

如何更改文本？前任：

> 工程：
>     有些人（我想把这个文字改成真正的开发者）

可以在 info.plist 文件中的某处进行配置吗？阅读有关 info.plist 的 Apple 文档后，我找不到任何相关密钥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T03:12:09.217

在`en.lproj`文件夹中查找名为“Credits.rtf”的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T06:25:32.183

您可以在大多数编辑器中编辑 Credits.rtf 文件。与 TextEdit 相比，Xcode 有点受限。

# javascript - 使用 javascript 正则表达式检查 HTML 表单文本

> ID：14371429
> 
> 赞同：0
> 
> 时间：2013-01-17T02:47:53.943
> 
> 标签：javascript, html, regex, forms

我在一个 html 表单上工作，我需要用 javascript 正则表达式检查它，但它只有在我输入静态文本时才有效。我需要对照正则表达式检查 html 表单文本（输入数据）。

我已经搜索过这个，但我只能找到显示静态文本示例的人。

更进一步的解释：我不需要帮助来理解正则表达式。我需要了解如何将用户输入的数据传递到对正则表达式的检查中。

```
 <script>
    function fn() {
    var x=document.getElementById("fname");
    xv=x.value.toUpperCase();

    var re = new RegExp("s", "g"); //Here is the expression i am searching for - This i do understand// 
    var result = re.test( ?? ); //Here should go the user input from ((("fname" - var x)))

    if (result == true) {
    var result = $("#result").empty();
    $.post('../search.php',{xv : xv},
    function(data){
    result.append(data);
    }

    if (result == false) {  
    var result = $("#result").empty();
    result.append("try again");
    }
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:13:32.957

你的意思是：

```
 var re = new RegExp("s", "g");
  **var result = re.test(xv);**
    if (result == true) {

    }

    if (result == false) {  

    } 
```

# javascript - 根据值更改颜色

> ID：14371439
> 
> 赞同：3
> 
> 时间：2013-01-17T02:48:48.153
> 
> 标签：javascript, jquery

我不知道为什么这不起作用。有人可以告诉我这有什么问题吗？

```
var x = $('#clicked_info').val();

if(x == 1) {

    $('#companyname_ph').css({'color':'yellow'});

}

else if(x == 2) {

    $('#companyname_ph').css({'color':'red'});

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:50:50.517

您需要使用`parseInt`将字符串转换为整数。

```
var x = $('#clicked_info').val();

if(parseInt(x) == 1){

   $('#companyname_ph').css({'color':'yellow'});

} else if(parseInt(x) == 2){

    $('#companyname_ph').css({'color':'red'});

} 
```

**或**使用字符串比较

```
if(x == '1'){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:51:36.477

`val`返回一个`string`

`x == 1`应该是`x == '1'`

`x == 2`应该`x == '2'`

或者您可以`x`使用以下命令转换为 int。

```
var x = $('#clicked_info').val();
x = parseInt(x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:00:32.507

就像这里的其他人所指出的那样，`parseInt`当您想要将整数的字符串表示形式转换为数字类型时，您应该使用。我要补充一点，你应该提供一个基数，`parseInt`因为如果你不这样做，如果你的字符串意外地以“0x”开头，你可能会得到意想不到的结果:)

尝试做：

```
var x = parseInt($('#clicked_info').val(), 10) 
```

# .net - 为什么.net 项目没有designer.cs？

> ID：14371443
> 
> 赞同：0
> 
> 时间：2013-01-17T02:49:20.390
> 
> 标签：.net

我打开了我同事的一个 .net 项目。但是这个项目很奇怪，没有任何 .aspx.designer.cs 文件，而只有 .aspx.cs 文件。我想右键单击 aspx 文件并选择“转换为应用程序”按钮。但是没有这样的按钮，为什么会这样呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:51:09.153

该项目是作为“网站”而不是“Web 应用程序”创建的吗？网站不获取设计器文件。

# visual-c++ - 从 COM 接口编组 unsigned char *

> ID：14371445
> 
> 赞同：0
> 
> 时间：2013-01-17T02:49:36.327
> 
> 标签：visual-c++, com, c#-2.0, idl

我在文件 IPlan.idl 中定义了一个 COM 接口，它为 unsigned char* 缓冲区定义了一个属性。

```
[
    object,
    uuid(...),
    dual,
    helpstring("..."),
    pointer_default(unique)
]
interface IPlan : IDispatch
{
    ...
    [id(28), helpstring("method SetByte")
    HRESULT SetByte([in] long index, [in] unsigned char buffer);

    [id(29), helpstring("method GetByte")
    HRESULT GetByte([in] long index, [out, retval] unsigned char * pBuffer);

    [id(30), propget, helpstring("property Buffer")]
    HRESULT Buffer([out, retval] unsigned char** pBuffer);
    [id(30), propput, helpstring("property Buffer")]
    HRESULT Buffer([in] unsigned char* newBuffer);
    ...
} 
```

我的实现类 MyPlan 是用 C# 定义的。此类与 C++ COM 类 CProcessor 对话。CProcessor 将一些数据计算到一个 unsigned char* 缓冲区中。一旦 CProcessor 中的所有数据都存储在其缓冲区中，此数据就会加载到 MyPlan 对象中。

IPlan 的元数据定义了以下函数签名：

```
public interface IPlan
{
    ...
    byte GetByte(int index);
    void SetByte(int index, byte buffer);   
    IntPtr get_Buffer();
    void set_Buffer(ref byte pBuffer);
    ...
} 
```

我可以使用 CProcessor 中的 GetByte 和 SetByte 来访问和修改 MyPlan 中的 byte[] 变量。我还可以通过编组 byte[] 变量来使用 get_Buffer() 。

我的问题是如何利用

```
set_Buffer(ref byte pBuffer) 
```

功能？当我在 CProcessor 中调用它时，pBuffer 只包含缓冲区的第一个字节（如对 SetByte(0, data) 的调用）。我假设我需要像在 getter 中那样编组 setter，但我的搜索结果是空的。我试过了

```
set_Buffer([MarshalAs(UnmanagedType.LPStr)] ref byte pBuffer); 
```

但这似乎对传递整个数组没有任何作用。

[MarshalAs(UnmanagedType.LPStr) - 这如何将 utf-8 字符串转换为 char*](https://stackoverflow.com/questions/13289171/marshalasunmanagedtype-lpstr-how-does-this-convert-utf-8-strings-to-char)

[在c#中使用dll的问题](https://stackoverflow.com/questions/3114503/problem-using-dll-in-c-sharp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T17:30:28.713

我能够使用

```
[id(1), propget, helpstring("Buffer")]
HRESULT Buffer([out, retval] VARIANT* pBuffer);
[id(1), propput, helpstring("Buffer")]
HRESULT Buffer([in] VARIANT pBuffer); 
```

将无符号字符数组从 C++ 传递到 C#。C# 只需要转换为 byte[]

```
this.buffer = (byte[])myPlan.Buffer; 
```

# unix - 使用 Maven 在远程服务器上执行菜单驱动的命令

> ID：14371454
> 
> 赞同：1
> 
> 时间：2013-01-17T02:50:54.490
> 
> 标签：unix, maven, ssh

我对使用 Maven 使用一些 ssh exec 插件在远程服务器上执行命令进行了一些研究。

让我感到震惊的是我需要运行一个命令来启动一些菜单驱动的程序来停止服务器然后重新启动它。

我基本上必须按顺序执行以下任务：

1.  使用 SSH 连接到远程服务器
2.  使用用户名/密码登录
3.  将目录更改为特定位置
4.  在该位置运行命令以启动命令行菜单驱动程序（即“ `./control`”）
5.  向该菜单驱动程序输入两个命令
6.  断开

这两个命令只是代表它在控制台上打印的菜单中的选择的数字，例如：

```
Enter the number of the server you wish to stop:
[1] server1
[2] server2
[3] server3 
```

例如，我会输入“2”。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:21:40.773

一种可能的解决方案是在接受服务器编号作为参数的远程服务器上编写 Perl 脚本。

然后，您可以使用 Perl 的[Expect.pm](http://search.cpan.org/~rgiersig/Expect-1.15/Expect.pod)库在`control`程序提示输入时将此参数提供给您的程序。

然后，这将您的 Maven 任务简化为在远程服务器上执行脚本，由于您的研究，您现在可能对此感到满意。

[（如果您以前没有使用过它，Perl 的 Expect 库正是为这个用例而设计的——自动为交互式命令行程序提供输入。）]

# macos - 将 isw*() ctype 函数引入 Mac OS X

> ID：14371456
> 
> 赞同：1
> 
> 时间：2013-01-17T02:51:11.890
> 
> 标签：macos, postgresql, ctype

在我的 Mac OS X (10.8.2) 上，我的 Postgres 数据库中的 tsvector 字段没有被阿拉伯文本填充。它与英文文本完美配合。

我问过 IRC，有人告诉我，我使用的平台可能没有 isw*() ctype 函数，这些函数可以与这些编码和 ctype 设置一起使用。

所以我尝试了 Debian 6（32 位）并且 tsvector 字段被正常填充。

我该怎么做才能将此功能带到 OS X？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:07:56.493

OS X 上的 Unix 风格的语言环境支持非常糟糕。即使您设置了 UTF-8 语言环境，它也不会做任何有用的事情。所以 OS X 可能不会成为运行应用程序的好平台。

# android - Android - 异常崩溃

> ID：14371468
> 
> 赞同：0
> 
> 时间：2013-01-17T02:52:29.353
> 
> 标签：android, flurry

我最近从我的应用程序上看起来像乱七八糟的库崩溃中得到了这个崩溃报告：

```
java.lang.StackOverflowError
        at com.flurry.android.FlurryAgent.a(SourceFile:87)
        at com.flurry.android.d.run(SourceFile:1152)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:130)
        at android.os.HandlerThread.run(HandlerThread.java:60) 
```

有没有人见过或熟悉它？我什至不知道是什么原因造成的，因为它没有说明是什么文件导致了问题。

关于如何防止这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:46:59.733

我建议您更新到 SDK v3.0.5，其中包含一个防止 AndroidSDK 2.2 中坏手机 ID 崩溃的修复程序。

（全面披露：我在 Flurry 的支持团队工作）

# google-maps-api-3 - Google Maps APi，当用户在地图内移动时如何插入多个动态标记？

> ID：14371473
> 
> 赞同：0
> 
> 时间：2013-01-17T02:53:39.920
> 
> 标签：google-maps-api-3, google-maps-markers

我们需要在谷歌地图上显示多个大头针标记。当用户进行搜索时，引脚标记将基于从数据库中获取的一些地址。我知道如何在谷歌地图上显示多个别针制造商，这很简单。在搜索时，我们将有几个地址，将获得这些地址的纬度，并将创建一个地图对象列表以显示在地图上。

但重要的部分是，我们还希望当用户在地图内移动时，我们动态地搜索数据库并根据用户焦点找到新地址，并在地图上显示这些地址的图钉标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:08:15.567

您可能希望在地图对象上的`bounds_changed`、`center_changed`或事件上有一个事件侦听器。`dragend`然后，这会向服务器上的页面发出 AJAX 请求，将地图中心的新坐标传递给它（例如）。此页面返回有关标记的数据，然后您可以重新绘制这些数据。

# grails - 按照约定在 GGTS 中引用外部依赖项

> ID：14371474
> 
> 赞同：2
> 
> 时间：2013-01-17T02:53:42.270
> 
> 标签：grails, dependency-management

如何在我的项目构建路径中按约定引用依赖项？请允许我详细说明...

我正在使用 Groovy/Grails Tool Suite (GGTS 3.0)。我在我的 BuildConfig.groovy 中引用了依赖项：

```
dependencies {
    compile 'tgt:jaxb-utils:1.0'
} 
```

引用的 jar 文件已从 Artifactory 存储库中成功拉下 - 我可以在 Ivy 缓存中的本地文件系统上找到该 jar 文件。当我运行任何 grails 目标 ( `grails compile`, `grails run-app`, `grails run-tests`) 时，它工作正常 - 这意味着我从 jar 导入类的代码没有问题。当我运行`grails war`时，引用的 jar 文件被打包到构造的战争中。

然而，这里是这篇文章的症结所在——项目构建路径默认或约定不引用这个 jar 文件，所以我从 jar 文件中导入类的 java 或 groovy 代码会报告`unable to resolve class ...`错误。

一种解决方案是简单地将 jar 文件添加到 lib 文件夹并相应地更新构建路径，或者修改构建路径以引用 Ivy 缓存文件夹中的 jar 文件。但是，我必须对以这种方式拉下的任何/所有依赖项执行此操作。lib 文件夹中的任何 jar 都将保存到团队源代码存储库中，这似乎浪费了空间，因为 grails 命令仅使用 BuildConfig.groovy 中的依赖项引用即可正常工作。

我只是在这里过于理想主义（即 - 困难），还是有更好的方法来清理`unable to resolve class ...`我的 IDE 中的错误，而无需手动将依赖的 jar 文件添加到我的 lib 文件夹并更新我的构建路径？想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T07:30:54.353

Eclipse / STS / GGTS ：如果您安装了 Grails 插件，您可以执行以下操作：

右键单击您的项目 -> Grails 工具 -> 刷新依赖项（或快捷键“Alt+G, R”）

# python - Pandas：在 GMT 中从 CSV 读取时间戳，然后重新采样

> ID：14371476
> 
> 赞同：0
> 
> 时间：2013-01-17T02:53:45.210
> 
> 标签：python, csv, timezone, timestamp, pandas

我有一个 CSV 与纪元 GMT 时间戳，不规则间隔与一个值配对。我尝试从 CSV 读取它，但所有时区都转移到我的本地时区。我怎样才能让它按原样（格林威治标准时间）阅读？然后我希望以一分钟的间隔重新采样，但是，我想跳过大于用户指定值的间隙。如果这是不可能的，有没有办法重新采样到一分钟，但是在间隙中，输入一个像 0.0 这样的任意值？

```
 Data:
 Time,Data
 1354979750250,0.2343
 1354979755250,2.3433
 1354979710250,1.2343

 def date_utc(s):
     return parse(s, tzinfos=tzutc)

 x = read_csv("time2.csv", date_parser=date_utc, converters={'Time': lambda x:datetime.fromtimestamp(int(x)/1000.)}).set_index('Time') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:01:48.890

将本地日期时间转换为 GMT 日期时间，如下所示：

```
gmtDatetime = localdatetime - datetime.timedelta(hours=8) 
```

时区是+08（中国）。

或使用'datetime.utcfromtimestamp'：

```
classmethod datetime.utcfromtimestamp(timestamp)
classmethod datetime.fromtimestamp(timestamp, tz=None) 
```

> 返回与 POSIX 时间戳对应的 UTC 日期时间，使用 tzinfo None。如果时间戳超出平台 C gmtime() 函数支持的值范围，这可能会引发 OverflowError，并且在 gmtime() 失败时出现 OSError。这通常被限制在 1970 年到 2038 年的年份。另请参见 fromtimestamp()。

# .net - .NET 网站中缺少 System.Data.Objects

> ID：14371478
> 
> 赞同：2
> 
> 时间：2013-01-17T02:53:52.580
> 
> 标签：.net, entity-framework

我不幸地将 EntityFramework 代码从 .NET **WebProject**迁移到 .NET **WebSite**。我已将引用的站点与项目匹配，并确认引用在 web.config 中，但我仍然缺少对**System.Data.Objects**和**System.Data.Objects.DataClasses的引用**

**错误：**

```
Error   203 The type or namespace name 'Objects' does not exist in the namespace 'System.Data' (are you missing an assembly reference?) 
```

**网络配置：**

```
<compilation debug="true">
        <assemblies>
            <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Security, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="Microsoft.ReportViewer.Common, Version=9.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="Microsoft.ReportViewer.WinForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>              
            <add assembly="System.ComponentModel.Composition, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.Services.Client, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.Services.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.SqlXml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  </assemblies>
    </compilation> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:07:40.617

我不认为这是一个修复，而是一个有效的黑客。

**- 进行项目并将目标框架从 4 应用到 3.5 - 进行了更改，然后恢复到目标框架 4**

```
using System.Data.Objects
using System.Data.Objects.DataClasses 
```

工作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T07:08:38.647

有一个类似的问题，在添加正确的实体框架后消失了`web.config/App.config`

```
<configuration>
  <configSections>
      <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections> 
```

# java - 这种 Swing 行为是错误吗？神秘的BoxLayout对齐

> ID：14371482
> 
> 赞同：1
> 
> 时间：2013-01-17T02:54:32.317
> 
> 标签：java, swing, user-interface, layout-manager, boxlayout

我一直在使用[WindowBuilder Pro](https://developers.google.com/java-dev-tools/wbpro/) for Java Swing 布局，遇到了一些奇怪的行为，我最终能够将其简化为 SSCCE。考虑下面的源代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class WBPTest2 {
    private JFrame frame;
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    WBPTest2 window = new WBPTest2();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
    public WBPTest2() {
        initialize();
    }
    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel();
        panel.setBackground(Color.RED);
        frame.getContentPane().add(panel, BorderLayout.CENTER);
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));

        JPanel panel_1 = new JPanel();
        panel_1.setBackground(Color.GREEN);
        panel_1.setMaximumSize(new Dimension(32767, 100));
        panel.add(panel_1);
        panel_1.setLayout(new BoxLayout(panel_1, BoxLayout.Y_AXIS));

        JPanel panel_2 = new JPanel();
        panel_2.setBackground(Color.BLUE);
        panel_2.setMaximumSize(new Dimension(32767, 100));
        panel.add(panel_2);
        panel_2.setLayout(new FlowLayout(FlowLayout.CENTER, 5, 5));
    }
} 
```

它提供了以下布局：

![在此处输入图像描述](../Images/94bf62487e7cb52650a13fa0cb4d3ace.png)

无论出于何种原因，`panel_1`绿色的 ，都会向右浮动。玩弄了代码中的一些参数，我只能找到两种方法彻底杀死绿色面板左侧的缝隙：

*   将构造函数中的`hgap`and更改为 0。`vgap``panel_2`

或者

*   `minimumSize`将of更改`panel_2`为 (0,0)。

做其中任何一个，我们得到这个：

![在此处输入图像描述](../Images/d174fa2e2659784bb48384cdb804e778.png)

现在，问题是，到底为什么in`minimumSize`或in与阻止填充到其父对象的左侧`hgap`有任何关系？如果我碰巧想要一个大于零和大于零的我的 in怎么办？那么我将如何消除in左侧的间隙？`FlowLayout``panel_2``panel_1``minimumSize``hgap``FlowLayout``panel_2``BoxLayout``panel_1`

无论我做**什么**`panel_1`，我都不能让它填满其父容器的整个宽度（除非我`panel_2`按照上面的描述进行编辑）。具有讽刺意味的是，如果我将 for 设置`alignmentX`为`panel_1`，`RIGHT_ALIGNMENT`它实际上会向左浮动。但差距仍然存在（就在右边）。当我填充`panel_1`内容并增加它的大小时，它右侧的间隙变得越来越小，但从未完全消失，令人沮丧。

这不仅仅发生在`panel_2`is a `FlowLayout`... 它还发生在`JScrollPane`和许多其他类型... 通常没有`hgap`参数的类型，这意味着修复左侧间隙的唯一方法`panel_1`是更改新容器`minimumSize`为 0，这又显得愚蠢且不相关，最重要的是可能不是我的设计意图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:47:10.017

在面板 1 和 2 上设置 alignmentX 并填充屏幕。

似乎两个不同的布局管理器导致面板设置不同的对齐默认值。

# magento-1.7 - 从购物车中删除运费计算

> ID：14371484
> 
> 赞同：3
> 
> 时间：2013-01-17T02:55:08.350
> 
> 标签：magento-1.7

如何从商店的购物车中删除运费计算？这是网站：tintinportintin.com.br

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T21:51:11.070

在 app/design/frontend/base/default/checkout.xml 的第 89 行，您会发现：

```
<block type="checkout/cart_shipping" name="checkout.cart.shipping" as="shipping" template="checkout/cart/shipping.phtml"/> 
```

此行负责显示该块。您可以将此 XML 文件复制到您自己的主题中并删除此行。

但是您也可以使用`<checkout_cart_index>`手柄并将其移除。例如，这可以在 local.xml 中完成。

```
<checkout_cart_index>
    <remove name="checkout.cart.shipping" />
</checkout_cart_index> 
```

希望能帮助到你 ！

# php - PHP“联系”表格，电子邮件地址免受垃圾邮件？

> ID：14371488
> 
> 赞同：1
> 
> 时间：2013-01-17T02:55:27.243
> 
> 标签：php, forms, email, spam

所以我在网上得到了这个“联系我们”表单的 PHP 代码（我自己没有编写 PHP 代码），但它包含了我的完整电子邮件地址。以下表格是否使我的电子邮件免受垃圾邮件发送者的侵害？

contact.php 文件（真实邮箱已被 MYEMAIL@COMPANY.COM 取代）：

```
<?php
// Contact Form 

// Get posted data into local variables
$EmailFrom = Trim(stripslashes($_POST['EmailFrom'])); 
$EmailTo = "MYEMAIL@COMPANY.COM";
$Subject = "A User Has Contacted You";
$Name = Trim(stripslashes($_POST['Name'])); 
$Message = Trim(stripslashes($_POST['Message'])); 

// Validation
$validationOK=true;
if (Trim($EmailFrom)=="") $validationOK=false;
if (Trim($Name)=="") $validationOK=false;
if (Trim($Message)=="") $validationOK=false;
if (!$validationOK) {
  print "<meta http-equiv=\"refresh\" content=\"0;URL=error.htm\">";
  exit;
}

// Prepare email body text
$Body = "";
$Body .= "Name: ";
$Body .= $Name;
$Body .= "\n";
$Body .= "Message: ";
$Body .= $Message;
$Body .= "\n";

// Send E-Mail 
$success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");

// Redirect to Success page 
if ($success){
  print "<meta http-equiv=\"refresh\" content=\"0;URL=success.htm\">";
}
else{
  print "<meta http-equiv=\"refresh\" content=\"0;URL=error.htm\">";
}
?> 
```

html片段：

```
<form method="POST" action="contact.php">

...

</form> 
```

我读过 PHP 中包含的电子邮件地址对于爬虫来说是完全安全的，因为它都是服务器端的（假设您的服务器/站点是安全的）。不知道这是否属实，网上搜了这么多信息，我找不到确切的答案。如果有人可以确认此代码是否可以安全使用，那就太好了，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:58:22.807

除非他们有权访问该文件并阅读它，否则你很好。他们无法做到。就像你说的，这都是服务器端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:04:46.130

该地址是安全的，除非文件以纯文本形式提供并且是可读的（如肖恩所说），但您应该阅读[电子邮件注入攻击](https://stackoverflow.com/questions/823914/whats-current-best-practice-to-prevent-email-injection-attacks-in-php)，因为您很容易受到这些攻击。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T03:13:46.750

您的电子邮件受到保护，因为它都是服务器端的，除非他可以通过 fpt 访问您的网站，或者您有某种类型的漏洞。

此外，您可能需要考虑这样的事情来防止洪水泛滥。

```
 session_start()

    define('TIME_INTERVAL', 120);

    if(isset($_SESSION['ip']) && (time() - $_SESSION['last_post']) < TIME_INTERVAL) 
    }
       die('stop spamming !');
    {

    $_SESSION['last_post'] = time();
    $_SESSION['ip'] = $_SERVER['REMOTE_ADDR']; 
```

另外关于您的电子邮件验证，您可能想看看这个，它还验证电子邮件的域以查看它是否是现有的电子邮件服务器。

```
function validate_mail($email)
{
 if (filter_var($email, FILTER_VALIDATE_EMAIL)) 
 {
    list($username,$domain)=split('@',$email);
    if(checkdnsrr($domain,'MX')) 
    {
      return true;
    } 
 }
 return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T04:25:35.350

简单的回答，你是安全的。因为 PHP 元素只会在服务器上处理，因此任何人都无法看到您的电子邮件地址。

# linux - 为什么 64 位 Linux 进程的 VSIZE 这么大？

> ID：14371490
> 
> 赞同：8
> 
> 时间：2013-01-17T02:55:29.637
> 
> 标签：linux, memory-management

我的基本问题是为什么 64 位进程的 VSIZE 比为 32 位编译的完全相同的程序大得多？

以下是 32 位进程的 /proc/<pid>/maps 文件的输出。

```
00148000-00149000 r-xp 00000000 00:00 0               [vdso]
00149000-002d2000 r-xp 00000000 fd:02 8914142         /lib/libc-2.12.so
002d2000-002d3000 ---p 00189000 fd:02 8914142         /lib/libc-2.12.so
002d3000-002d5000 r--p 00189000 fd:02 8914142         /lib/libc-2.12.so
002d5000-002d6000 rw-p 0018b000 fd:02 8914142         /lib/libc-2.12.so
002d6000-002d9000 rw-p 00000000 00:00 0 
005c9000-005da000 r-xp 00000000 fd:02 17059392        /tmp/vsizetest/lib/libtesting.so
005da000-005db000 rw-p 00010000 fd:02 17059392        /tmp/vsizetest/lib/libtesting.so
005db000-0061b000 rw-p 00000000 00:00 0 
00661000-00689000 r-xp 00000000 fd:02 8917713         /lib/libm-2.12.so
00689000-0068a000 r--p 00027000 fd:02 8917713         /lib/libm-2.12.so
0068a000-0068b000 rw-p 00028000 fd:02 8917713         /lib/libm-2.12.so
00694000-006ab000 r-xp 00000000 fd:02 8917680         /lib/libpthread-2.12.so
006ab000-006ac000 r--p 00016000 fd:02 8917680         /lib/libpthread-2.12.so
006ac000-006ad000 rw-p 00017000 fd:02 8917680         /lib/libpthread-2.12.so
006ad000-006af000 rw-p 00000000 00:00 0 
006e5000-00703000 r-xp 00000000 fd:00 3150403         /lib/ld-2.12.so
00703000-00704000 r--p 0001d000 fd:00 3150403         /lib/ld-2.12.so
00704000-00705000 rw-p 0001e000 fd:00 3150403         /lib/ld-2.12.so
00983000-009a0000 r-xp 00000000 fd:02 8914997         /lib/libgcc_s-4.4.5-20110214.so.1
009a0000-009a1000 rw-p 0001d000 fd:02 8914997         /lib/libgcc_s-4.4.5-20110214.so.1
00ca5000-00d86000 r-xp 00000000 fd:02 6300601         /usr/lib/libstdc++.so.6.0.13
00d86000-00d8a000 r--p 000e0000 fd:02 6300601         /usr/lib/libstdc++.so.6.0.13
00d8a000-00d8c000 rw-p 000e4000 fd:02 6300601         /usr/lib/libstdc++.so.6.0.13
00d8c000-00d92000 rw-p 00000000 00:00 0 
08048000-08049000 r-xp 00000000 fd:02 21134666        /tmp/vsizetest/bin/testvsz
08049000-0804a000 rw-p 00000000 fd:02 21134666        /tmp/vsizetest/bin/testvsz
09b8d000-09bae000 rw-p 00000000 00:00 0               [heap]
f7796000-f779c000 rw-p 00000000 00:00 0 
ff998000-ff9ae000 rw-p 00000000 00:00 0               [stack] 
```

这导致总 VSIZE 为 3656。

以下是 64 位进程的 /proc/<pid>/maps 文件的输出。

```
00400000-00401000 r-xp 00000000 fd:02 21134667              /tmp/vsizetest/bin64/testvsz
00600000-00601000 rw-p 00000000 fd:02 21134667              /tmp/vsizetest/bin64/testvsz
02301000-02322000 rw-p 00000000 00:00 0                     [heap]
3b7c800000-3b7c820000 r-xp 00000000 fd:00 661349            /lib64/ld-2.12.so
3b7ca1f000-3b7ca20000 r--p 0001f000 fd:00 661349            /lib64/ld-2.12.so
3b7ca20000-3b7ca21000 rw-p 00020000 fd:00 661349            /lib64/ld-2.12.so
3b7ca21000-3b7ca22000 rw-p 00000000 00:00 0 
3b7cc00000-3b7cd86000 r-xp 00000000 fd:00 661350            /lib64/libc-2.12.so
3b7cd86000-3b7cf86000 ---p 00186000 fd:00 661350            /lib64/libc-2.12.so
3b7cf86000-3b7cf8a000 r--p 00186000 fd:00 661350            /lib64/libc-2.12.so
3b7cf8a000-3b7cf8b000 rw-p 0018a000 fd:00 661350            /lib64/libc-2.12.so
3b7cf8b000-3b7cf90000 rw-p 00000000 00:00 0 
3b7d000000-3b7d083000 r-xp 00000000 fd:00 661365            /lib64/libm-2.12.so
3b7d083000-3b7d282000 ---p 00083000 fd:00 661365            /lib64/libm-2.12.so
3b7d282000-3b7d283000 r--p 00082000 fd:00 661365            /lib64/libm-2.12.so
3b7d283000-3b7d284000 rw-p 00083000 fd:00 661365            /lib64/libm-2.12.so
3b7d800000-3b7d817000 r-xp 00000000 fd:00 661352            /lib64/libpthread-2.12.so
3b7d817000-3b7da16000 ---p 00017000 fd:00 661352            /lib64/libpthread-2.12.so
3b7da16000-3b7da17000 r--p 00016000 fd:00 661352            /lib64/libpthread-2.12.so
3b7da17000-3b7da18000 rw-p 00017000 fd:00 661352            /lib64/libpthread-2.12.so
3b7da18000-3b7da1c000 rw-p 00000000 00:00 0 
3b7e000000-3b7e007000 r-xp 00000000 fd:00 661361            /lib64/librt-2.12.so
3b7e007000-3b7e206000 ---p 00007000 fd:00 661361            /lib64/librt-2.12.so
3b7e206000-3b7e207000 r--p 00006000 fd:00 661361            /lib64/librt-2.12.so
3b7e207000-3b7e208000 rw-p 00007000 fd:00 661361            /lib64/librt-2.12.so
3b87000000-3b87016000 r-xp 00000000 fd:00 664219            /lib64/libgcc_s-4.4.6-20110824.so.1
3b87016000-3b87215000 ---p 00016000 fd:00 664219            /lib64/libgcc_s-4.4.6-20110824.so.1
3b87215000-3b87216000 rw-p 00015000 fd:00 664219            /lib64/libgcc_s-4.4.6-20110824.so.1
3d44c00000-3d44ce8000 r-xp 00000000 fd:00 3019214           /usr/lib64/libstdc++.so.6.0.13
3d44ce8000-3d44ee8000 ---p 000e8000 fd:00 3019214           /usr/lib64/libstdc++.so.6.0.13
3d44ee8000-3d44eef000 r--p 000e8000 fd:00 3019214           /usr/lib64/libstdc++.so.6.0.13
3d44eef000-3d44ef1000 rw-p 000ef000 fd:00 3019214           /usr/lib64/libstdc++.so.6.0.13
3d44ef1000-3d44f06000 rw-p 00000000 00:00 0 
7f30ab397000-7f30ab39c000 rw-p 00000000 00:00 0 
7f30ab39c000-7f30ab3ad000 r-xp 00000000 fd:02 21127804      /tmp/vsizetest/lib64/libtesting.so
7f30ab3ad000-7f30ab5ac000 ---p 00011000 fd:02 21127804      /tmp/vsizetest/lib64/libtesting.so
7f30ab5ac000-7f30ab5ad000 rw-p 00010000 fd:02 21127804      /tmp/vsizetest/lib64/libtesting.so
7f30ab5ad000-7f30ab5ee000 rw-p 00000000 00:00 0 
7f30ab606000-7f30ab609000 rw-p 00000000 00:00 0 
7fff69512000-7fff69528000 rw-p 00000000 00:00 0             [stack]
7fff695ff000-7fff69600000 r-xp 00000000 00:00 0             [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0     [vsyscall] 
```

这导致 VSIZE 为 18480。

两个映射之间的主要区别是来自 64 位数据的以下条目：

```
3b7cd86000-3b7cf86000 ---p 00186000 fd:00 661350             /lib64/libc-2.12.so
3b7d083000-3b7d282000 ---p 00083000 fd:00 661365             /lib64/libm-2.12.so
3b7d817000-3b7da16000 ---p 00017000 fd:00 661352             /lib64/libpthread-2.12.so
3b7e007000-3b7e206000 ---p 00007000 fd:00 661361             /lib64/librt-2.12.so
3b87016000-3b87215000 ---p 00016000 fd:00 664219             /lib64/libgcc_s-4.4.6-20110824.so.1
3d44ce8000-3d44ee8000 ---p 000e8000 fd:00 3019214            /usr/lib64/libstdc++.so.6.0.13
7f30ab3ad000-7f30ab5ac000 ---p 00011000 fd:02 21127804       /tmp/vsizetest/lib64/libtesting.so 
```

其中占 18480 VSIZE 的 14316。

其他程序的其他实验似乎表明，在 64 位中，您似乎为进程使用的每个共享库获得了这些私有、不可读、不可写、不可执行的内存块之一，而在 32 位几乎没有这些块。

有谁知道这些内存块是什么？

注意：基于对类似问题的一些回答，[这些内存区域用于什么，来自 Linux 进程？](https://stackoverflow.com/questions/6568043/what-these-memory-regions-for-from-a-linux-process)，这不是一个多线程的进程，它已经编译了-fPIC。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-10T16:33:42.520

VSIZE 的主要区别在于共享库的 PROT_NONE 映射（模式“---p”）在 32 位和 64 位版本的情况下是如何完成的。

这些正是您发现的产生差异的映射。

一般来说，对于每个加载的共享库，我们将有四个映射：

```
3b7cc00000-3b7cd86000 r-xp 00000000 fd:00 661350            /lib64/libc-2.12.so
3b7cd86000-3b7cf86000 ---p 00186000 fd:00 661350            /lib64/libc-2.12.so
3b7cf86000-3b7cf8a000 r--p 00186000 fd:00 661350            /lib64/libc-2.12.so
3b7cf8a000-3b7cf8b000 rw-p 0018a000 fd:00 661350            /lib64/libc-2.12.so 
```

第一个是可执行权限的代码段，第二个是PROT_NONE（模式---）映射（页面可能无法访问），最后两个是数据段（只读部分和读写）。

PROT_NONE 的大小为 MAXPAGESIZE，因此它在 32 位和 64 位版本中的创建方式不同。对于 32 位版本，它有 4KB 大小（对于 i386 为 MAXPAGESIZE），对于 64 位版本，它有 2MB（对于 x86_64 系统的标准 MAXPAGESIZE）。

应该注意的是，这个内存实际上并没有被消耗（它只是消耗地址空间的地址），如下所述：

[http://www.greenend.org.uk/rjk/tech/dataseg.html](http://www.greenend.org.uk/rjk/tech/dataseg.html)

“这个额外的东西不会花费你任何 RAM 或交换空间，只需要每个进程中的地址空间，这在 64 位平台上供应充足。根本原因是为了保持库的有效共享，但实现有点小奇怪的。”

最后一个技巧，我发现使用 pmap 实用程序检查内存映射比解析映射文件更容易，并产生更易于阅读的输出：

基本信息：

```
pmap <PID> 
```

有关扩展信息：

```
pmap -x <PID> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T13:21:39.860

回答为什么以及什么构成了 64 位共享库有额外的内存块，是通过加载示例`libc.so`并从加载器如何加载动态库来查看这一点。下面是`strace`32 位和 64 位可执行文件的输出，告诉我们有对`mmap`&的调用`mprotect`。

```
esunboj@L9AGC12:~/32_64bit$ strace ./crash-x86-64
...
open("/lib/x86_64-linux-gnu/libc.so.6", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\200\30\2\0\0\0\0\0"...,
832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1811128, ...}) = 0
mmap(NULL, 3925208, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) =    
0x7fa354f8a000
mprotect(0x7fa35513f000, 2093056, PROT_NONE) = 0
mmap(0x7fa35533e000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE,
3, 0x1b4000) = 0x7fa35533e000
mmap(0x7fa355344000, 17624, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS,
-1, 0) = 0x7fa355344000
close(3)                                = 0
... 
```

> ```
> esunboj@L9AGC12:~/32_64bit$ strace ./crash
> ...
> open("/lib/i386-linux-gnu/libc.so.6", O_RDONLY|O_CLOEXEC) = 3
> read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0000\226\1\0004\0\0\0"...,
> 512) = 512
> fstat64(3, {st_mode=S_IFREG|0755, st_size=1730024, ...}) = 0
> mmap2(NULL, 1743580, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 
> 0xfffffffff7546000
> mprotect(0xf76e9000, 4096, PROT_NONE)   = 0
> mmap2(0xf76ea000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE,  
> 3, 0x1a3) = 0xfffffffff76ea000
> mmap2(0xf76ed000, 10972, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, 
> -1, 0) = 0xfffffffff76ed000
> close(3)                                = 0
> ... 
> ```

密切观察 strace 的两件事是需要调查的，

**1\. 他们每个人都映射内存 3 次和 1 次调用`mprotect`正好在 first 之后`mmap`。**

**2\. 比较`mprotect`64 位和 32 位的呼叫分别有 `2093056B`&`4096B`的区域保护。**

在[dl-load.c 中](https://github.com/ahmadia/collfs/blob/master/glibc-2.4-bgp-patches/elf/dl-load.c)，子例程[_dl_map_object_from_fd](https://github.com/ahmadia/collfs/blob/master/glibc-2.4-bgp-patches/elf/dl-load.c#L878) () 通过设置所需的权限和库的零填充`.bss`部分将动态库内存段映射到虚拟空间并更新链接映射结构。让我们在这里获取一些代码以进行更多分析，

```
struct link_map *
 _dl_map_object_from_fd ( )
{
 ...
  /* Scan the program header table, collecting its load commands. */
  struct loadcmd
   {
     ElfW(Addr) mapstart, mapend, dataend, allocend;
     off_t mapoff;
     int prot;
   } loadcmds[l->l_phnum], *c; // l is link_map struct described for each object 
                                  of dynamic linker 
  size_t nloadcmds = 0;
  bool has_holes = false;
  ...
  for (ph = phdr; ph < &phdr[l->l_phnum]; ++ph)
  switch (ph->p_type)
  {
  ...
  case PT_LOAD:
  ...
    c = &loadcmds[nloadcmds++];
    c->mapstart = ph->p_vaddr & ~(GLRO(dl_pagesize) - 1);
    c->mapend = ((ph->p_vaddr + ph->p_filesz + GLRO(dl_pagesize) - 1)
                     & ~(GLRO(dl_pagesize) - 1));
  ...
    if (nloadcmds > 1 && c[-1].mapend != c->mapstart)
        has_holes = true;
  ...
  }
  ...
    if (has_holes)
       __mprotect ((caddr_t) (l->l_addr + c->mapend),
          loadcmds[nloadcmds - 1].mapstart - c->mapend, PROT_NONE);
  ...
} 
```

在上面的代码`l_phnum`中，`for`语句中使用了 ELF 程序头中的条目数。理想情况下，每次迭代都会映射每个条目段。当`PT_LOAD`段案例第一次出现时，它基本上是一个`.text`或`.rodata`部分，它被映射（ `mmap`strace 中的第一个），第二个`PT_LOAD`段表示`.data`部分被映射（`mmap`strace 中的第二个）。在`PT_LOAD`第二段被映射之前，`mapstart`并被`mapend`保留，它指的是文本部分的开始和结束。在下`PT_LOAD`一次迭代中，如果前一个段`mapend`不等于当前（.data）段`mapstart`，那么它们是两个`PT_LOAD`段之间的一个洞（意味着`.text`和`.data`部分）。因此，如果它们是具有空权限的内存区域之间的一个洞，加载程序将保护（`mprotect`在 strace 中调用）它或使其不可访问。64 位和 32 位进程的受保护区域分别为**511** Vs 和**1**页，分别添加到 64 位库的巨大内存块。

**64 位不可访问区域的证明**：下面的 Objdump 为`libc.so`我们提供了一些虚拟地址（VA）统计信息，这些统计信息适当地四舍五入如下，

```
 PT_LOAD(1)              PT_LOAD(2)                    
mapstart VA   0x0000000000000000     0x00000000003b4000   
mapend   VA   0x00000000001b5000     0x00000000003A0000 
```

这里`PT_LOAD(1) mapend`(0x00000000001b5000) 不等于`PT_LOAD(2) mapstart`(0x00000000003b4000) 导致 0x00000000001FF000 的内存孔（十进制`2093056B`）。

> ```
> esunboj@L9AGC12:~/32_64bit$objdump -x -s -d -D /lib/x86_64-linux-gnu/libc.so.6 
> Program Header: 
> ...
>   LOAD off    0x0000000000000000 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**21
>        filesz 0x00000000001b411c memsz 0x00000000001b411c flags r-x
>   LOAD off    0x00000000001b4700 vaddr 0x00000000003b4700 paddr 0x00000000003b4700 align 2**21
>        filesz 0x0000000000005160 memsz 0x0000000000009dd8 flags rw- 
> ... 
> ```

与 32 位相比，64 位文本对指令字节的表示形式更高。类似地，64 位上的指针大小正在`8B`增加`4`更多字节。数据结构对齐也是`8B`64 位对齐的，使得映射区域更大。

简单的`size`命令可以显示 32/64 位程序内存区域之间的差异，如下所示，

```
esunboj@L9AGC12:~/32_64bit$ ls -lrt
total 10368
-rwxrwxrwx 1 esunboj ei 5758776 Oct 10 11:35 crash-x86-64
-rwxrwxrwx 1 esunboj ei 4855676 Oct 10 11:36 crash
esunboj@L9AGC12:~/32_64bit$ size crash
   text    data     bss     dec     hex filename
4771286   82468  308704 5162458  4ec5da crash
esunboj@L9AGC12:~/32_64bit$ size crash-x86-64 
   text    data     bss     dec     hex filename
5634861  121164 1623728 7379753  709b29 crash-x86-64 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:50:28.603

[不是一个真正的答案......超出我的知识范围]

如果内存段真的是“私有的、不可读的、不可写的、不可执行的”，那么它们永远不应该被引用，即使它们存在于虚拟内存空间中，它们也永远不会占用任何真实内存，因此没什么好担心的。（？）

这一定是某种簿记或碎片问题。由于这些是共享库 (*.so) 的一部分，这就是这些库的构建方式。除了链接到那些库之外，它实际上与您的程序无关。除非你想重建这些库，或者不使用它们，否则没有什么可做的（反正也没有什么收获，因为它们无论如何都不应该使用真正的内存）。

也许相关？在[什么这些内存区域，来自 Linux 进程？](https://stackoverflow.com/questions/6568043/what-these-memory-regions-for-from-a-linux-process?rq=1)

@caf 说一些“---p”的内存段是“保护页”。

这表明它们的存在只是为了捕获一个杂散的指针或堆栈增长到远错误...一种内存中的硬分隔符，因此系统可以捕获一个常见错误并停止处理，而不是让这些常见错误溜走（这是一个致命错误完全引用它们，它们真的永远不会使用任何真实的内存）。

# substring - xquery 子字符串，然后 concat

> ID：14371492
> 
> 赞同：-3
> 
> 时间：2013-01-17T02:55:43.303
> 
> 标签：substring, xquery, concat

我正在尝试在 XQuery 语句中一起使用`substring`和`concat`函数。

这是我所拥有的：

```
fn:concat(fn:substring({data($x/DueDate)},1,4),fn:substring({data($x/DueDate)},6,2),fn:substring({data($x/(DueDate))},9,2)) 
```

我的 xml 中 DueDate 的值是：`2013-06-27`。

我希望上面的函数返回：`20130704`.

相反，这就是我得到的：

```
fn:concat(fn:substring(2013-06-27,1,4),fn:substring(2013-06-27,6,2),fn:substring(2013-06-27,9,2)) 
```

我很困惑为什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:03:10.847

如果在元素中使用它，则需要用大括号将表达式括起来，例如：

```
{ 
 fn:concat(
   fn:substring(data($x/DueDate), 1, 4),
   fn:substring(data($x/DueDate), 6, 2),
   fn:substring(data($x/DueDate), 9, 2)
 )
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:36:26.450

清理你的格式和括号（删除不必要的大括号，删除一些括号），你会得到一些有效的代码：

```
fn:concat(
  fn:substring(data($x/DueDate), 1, 4),
  fn:substring(data($x/DueDate), 6, 2),
  fn:substring(data($x/DueDate), 9, 2)
) 
```

还有一个更短、更易读的版本：

```
fn:string-join(fn:tokenize($x/DueDate, '-')) 
```

甚至使用正则表达式替换：

```
fn:replace($x/DueDate, '-', '') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:14:06.333

你确定你的 DueDate 值实际上是`2013-06-27`？以下是每个人对子字符串的调用等于：

```
substring('2013-06-27',1,4) 
```

=>`2013`

```
fn:substring('2013-06-27',6,2) 
```

=>`06`

```
fn:substring('2013-06-27',9,2) 
```

=> `27`

`substring()`从第二个参数中传递的 1 索引字符数开始，并复制第三个参数中传递的字符数。

# model-view-controller - 在 Sencha Touch 2 中填充视图

> ID：14371503
> 
> 赞同：1
> 
> 时间：2013-01-17T02:56:27.177
> 
> 标签：model-view-controller, extjs, sencha-touch

我想做的是弄清楚如何将变量从控制器传递给视图。

例如，假设我有一个登录屏幕，我想在其中显示应用程序版本和其他一些自定义设备信息。我将如何将该信息传递到视图中？

```
Ext.define('MyApp.view.Login', {
    extend: 'Ext.form.Panel',
    xtype: 'loginform',
    config: {
        items: [
             { 
                 xtype: 'label', 
                 cls: 'appVersion', 
                 html: 'Version #:' + versionNumber 
             }
        ]
    }
}); 
```

另外，如果我使用 tpl 而不是 html 会有多大不同？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:59:25.587

您始终可以在创建视图期间传递数据，如下所示：

```
var loginPanel = Ext.create('MyApp.view.Login', {
    ver : versionNumber    // any value or data you want to pass
}); 
```

为此，您可能必须`ver`在视图的配置中定义

```
Ext.define('MyApp.view.Login', {
  extend: 'Ext.form.Panel',
  xtype: 'loginform',
  config: {
    ver : '',  // Initialize with empty string
    items: [
         { 
             xtype: 'label', 
             cls: 'appVersion', 
             html: 'Version #:' + versionNumber 
         }
    ]
  }
}); 
```

使用所需值创建后，您可以将其添加到您想要的任何位置

```
Ext.Viewport.add(loginPanel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:03:04.753

为此，您始终可以使用 PhoneGap (Cordova)：[http ://docs.phonegap.com/en/2.3.0/cordova_device_device.md.html#Device](http://docs.phonegap.com/en/2.3.0/cordova_device_device.md.html#Device)

此外，使用 html 或 tpl 也可以。

# asp.net - 如何：通过在 ASP.NET 中直接输入 webservice url 来获取 webservice 响应

> ID：14371505
> 
> 赞同：1
> 
> 时间：2013-01-17T02:56:34.160
> 
> 标签：asp.net

在我遇到问题的那一刻，我无法通过直接将整个 webservice url 和方法名称粘贴到浏览器地址栏中来直接调用 webservice 方法。

好像首先浏览网络服务“.asmx”并单击“Webservice_1”图像中的“调用”按钮，我为特定的网络服务方法附加了从浏览网络服务时显示的网络服务列表中的点击“。 asmx”页面，响应会像“webservice_2”图像一样显示。

但是，如果尝试从“webservice_2”图像中复制并粘贴 url 并将其粘贴到浏览器地址栏中，则 Web 请求以错误“请求格式无法识别，因为 URL 意外以 '/GetEmployeeLogins' 结尾。” 如图像“webservice_3”

我认为应该可以通过简单地粘贴 url 来直接调用 webservice 方法。如果我错了，希望你们能纠正我。

如果我可以通过在浏览器中复制粘贴完整的 url 来进行一些更正以使 webservice 方法可以访问，请建议我。快速帮助将非常可观！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:05:02.563

对于其他可能面临类似问题的人来说，这一发现可能真的很有希望。“请求格式错误”的发生基本上是因为 url 请求通常显示 GET 操作要在“web.config”中启用，并带有以下标记元素：

```
<System.Web>
<webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
        <add name="HttpSoap"/>
      </protocols>
</webServices>
</System.Web> 
```

这对我很有帮助，我也希望对其他人最好。如果它真的对你有帮助，请标记答案。谢谢。

# c++ - 面对面为 vtk 非结构化网格着色

> ID：14371512
> 
> 赞同：2
> 
> 时间：2013-01-17T02:57:28.870
> 
> 标签：c++, visualization, vtk

我想根据给定的面标量将颜色添加到 vtk 非结构化网格。如何提取非结构化网格的面以分配标量？请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:30:46.927

好的。所以我就是这样做的。vtk 非结构化网格不支持人脸数据。因此，您必须将每个面创建为一个单元格并添加颜色标量作为单元格数据。vtkUnstructuredGridGeometryFilter 只给出外表面的面。

谢谢。

# linux-kernel - 对于共享中断线，我如何找到要使用的中断处理程序？

> ID：14371513
> 
> 赞同：8
> 
> 时间：2013-01-17T02:57:37.650
> 
> 标签：linux-kernel, linux-device-driver, device-driver, irq

对于共享中断线，我可以有多个中断处理程序。内核将依次调用该特定共享行的所有处理程序。据我所知，每个处理程序在调用时都会通知内核它是否是要调用的正确处理程序。

我的问题是这是如何确定的，有没有办法检查内存映射寄存器，告诉特定设备的状态，或者是否有其他硬件机制？处理程序如何知道相应的设备确实是发出中断的设备？

此信息是否通过设备和处理器中断线之间的中断控制器中继？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T05:45:44.877

**内核将依次调用该特定共享行的所有处理程序。**

确切地。假设 Dev1 和 Dev2 共享 IRQ10。当 IRQ10 产生中断时，**所有**注册到该线的 ISR 都会被一一调用。

在我们的场景中，假设 Dev2 是产生中断的那个。如果Dev1 的ISR 被先注册，那么它的ISR（即Dev1 的ISR）只会先被调用。在该 ISR 中，将验证中断状态寄存器是否存在中断。如果没有设置中断位（在这种情况下，导致 Dev2 引发了中断），那么我们可以确认Dev1**没有**生成中断 - 所以 Dev1 的 ISR 应该返回到内核`IRQ_NONE`- 这意味着：“我没有处理那个中断” , 所以内核继续到下一个 ISR（即 Dev2 的 ISR），反过来，它**确实**会验证其相应的设备是否产生了中断，因此，这个处理程序应该处理它并最终返回`IRQ_HANDLED`——这意味着：“我处理了这个”。

有关详细信息，请参阅返回值[IRQ_NONE/IRQ_HANDLED](https://stackoverflow.com/questions/4732570/return-value-of-interrupt-handlers-in-linux-kernel)。

**处理程序如何知道相应的设备是否发出了中断？**

仅通过读取中断状态寄存器。

**此信息是否通过设备和处理器中断线之间的中断控制器中继？**

我不确定。但是操作系统会根据 ISR 的返回值来处理调用 ISR。

# java - 查询 FileSystems.getPath(URI)

> ID：14371516
> 
> 赞同：0
> 
> 时间：2013-01-17T02:58:23.680
> 
> 标签：java, filesystems, uri, nio, nio2

在 Java 7 源代码中，[Paths](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/nio/file/Paths.java#Paths.get%28java.net.URI%29)类有一个方法[——get(URI)。](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/nio/file/Paths.java#Paths.get%28java.net.URI%29)

在 get(URI) 中存在：

```
 return FileSystems.getDefault().provider().getPath(uri); 
```

`FileSystems.getDefault()`返回对默认文件系统的引用。但是，根据文档，`.provider()`关闭文件系统然后`.getPath(uri)`被调用。有人可以向我解释发生了什么吗？为什么文件系统似乎关闭然后返回？

如果有人能给我详细介绍该返回声明中发生的事情，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:03:57.223

我认为这是您所指的行：

> 关闭此提供程序创建的文件系统后

这并不意味着提供商关闭系统。它正在谈论当系统关闭时提供者如何处理事情。这将在以后发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:01:25.080

从 - [`FileSystem.provider()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html#provider%28%29)。

> **provider**
> `public abstract FileSystemProvider provider()`
> 返回创建此文件系统的提供者。

我没有看到任何说 close 的东西。

# java - “缺少方法主体”错误

> ID：14371518
> 
> 赞同：-2
> 
> 时间：2013-01-17T02:58:43.217
> 
> 标签：java

```
import java.util.Scanner;

public class Rpn_calculator
{
    public static void main(String[] args)
    {
        Scanner keyboard = new Scanner(System.in);

        double ans = 0;
        double n = 0;
        double r = 0;
        String j;

        System.out.println();
        System.out.println();   
        System.out.print("Please enter a value for n  ");
        n = keyboard.nextDouble();  
        System.out.print("Please enter a value for r  ");
        r = keyboard.nextDouble();  
        System.out.println("Please choose one of these operands:+,-,*,nCr,/ to     continue, or q to quit ");
        j = keyboard.nextLine();    
        while (j != "q")
        {
            if(j == "+")
                ans = n + r;
            if(j == "-")
                ans = n - r;
            if(j == "*")
                ans = n * r;
            if(j == "/")
                ans = n / r;
            if(j == "nCr")
                ans = factorial(n + r -1) / (factorial(r)*factorial(n - 1));
            System.out.print(ans);

            System.out.print("Please enter a value for n  ");
            n = keyboard.nextDouble();  
            System.out.print("Please enter a value for r  ");
            r = keyboard.nextDouble();  
            System.out.print("Please choose one of these operands:+,-,*,nCr,/ to continue or q to quit ");
            j = keyboard.nextLine();    
        }   
    }
    public static double factorial(double x);
    {   
        double sum = 1;
        int i; 
        for (i = 0; i<= x; i++);
        sum = sum * i;

        return sum;
    }
} 
```

我正在尝试为此作业创建一个 RPN 计算器，我相信我拥有使它起作用所需的东西，但是我的阶乘函数存在语法错误。它说“缺少方法体”。

另外，我不明白为什么，当我编译它时，我的字符串输入请求被完全忽略 - 将程序锁定在`while`循环中。我希望我没有遗漏一些非常明显的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T03:00:39.797

有几个分号不应该有：

```
public static double factorial(double x); // <-- This one
{   
    double sum = 1;
    int i; 
    for (i = 0; i<= x; i++); // <-- This one
    sum = sum * i;

    return sum;
} 
```

当您将分号放在签名之后时，您没有方法主体，因此会出现错误。该`for`循环不会是编译器错误，但它将是一个空循环。

另外，我认为您需要使用`String.equals`比较 Java 中的字符串，而不是`==`运算符。

# java - 成功登录 Facebook android 后如何进入新屏幕（意图）

> ID：14371519
> 
> 赞同：1
> 
> 时间：2013-01-17T02:58:56.863
> 
> 标签：java, android, facebook-android-sdk

我正在开发一个 android 应用程序，我需要在其中打开一个`Facebook login window`，然后在成功登录后，`I need to move to another intent (or new screen)`.

因此，一旦用户成功登录，它应该会转到我的应用程序中的另一个屏幕。我很难让这件事发挥作用。我从 Facebook SDK 获得了示例示例，因此我在这些示例上对其进行了测试，我创建了另一个名为`Screen2.java(new xml file)`只有一个按钮的屏幕来测试它。

因此，在我的情况下，它应该做的是，一旦您成功登录，它就应该转到 . `Screen2 intent`. [因此，我对本教程](http://w2davids.wordpress.com/android-facebook-integration/)`Main.java class`中提到的此处进行了一些更改，但这对我不起作用。这意味着只要我登录 Facebook，它就不会转到`.Screen2 intent`我创建的那个。有谁可以帮我离开这里吗？

我只通过添加方法进行了`Main.java class`如下更改-`new Intent``onAuthSucceed()`

```
public class SampleAuthListener implements AuthListener {

    @Override
    public void onAuthSucceed() {
        mText.setText("You have logged in! ");
        // mRequestButton.setVisibility(View.VISIBLE);
        // mUploadButton.setVisibility(View.VISIBLE);
        // mPostButton.setVisibility(View.VISIBLE);

        Intent i = new Intent(Main.this, Screen2.class);
        startActivity(i);
    }

    @Override
    public void onAuthFail(String error) {
        mText.setText("Login Failed: " + error);
    }
} 
```

注意：- 我可以登录 Facebook，但登录成功后，它不会进入我的新 Intent。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:09:27.517

我的印象是你需要这样的东西

```
private Session.StatusCallback callback = new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        onSessionStateChange(session, state, exception);
    }
};

private void onSessionStateChange(Session session, SessionState state, Exception exception) {
    if (state.isOpened()) {
        Log.d(TAG, "Logged in...");
        //fire intent
    } else if (state.isClosed()) {
        Log.d(TAG, "Logged out...");
    }
} 
```

# c++ - 使用 Sleep() 阻止我写入文件

> ID：14371520
> 
> 赞同：1
> 
> 时间：2013-01-17T02:59:01.523
> 
> 标签：c++, sleep

我有一些将系统时间写入文件的代码：

```
std::ofstream file("time.txt");

    char *date;
    time_t timer;
    timer=time(NULL);
    date = asctime(localtime(&timer));

while ( true ) {
      std::cout << date << ", " << randomNumber  << std::endl;

      if (file.is_open())
      {
        file << date;
        file << ", ";
        file << randomNumber;
        file << "\n";
      }
}

file.close() 
```

当我让我的程序运行并在中间停止它（它是一个无限的while循环）时，我能够将数据写入我的文件。

但是，如果我只是更改代码以添加 Sleep() 计时器。没有数据写入我的文件。但我确实在屏幕上看到了输出。这是预期的行为吗？如何确保即使中途结束程序执行，值也会写入文件？

```
 std::ofstream file("time.txt");

        char *date;
        time_t timer;
        timer=time(NULL);
        date = asctime(localtime(&timer));

    while ( true ) {

        **Sleep(100); // wait for 100 milli-seconds**
          std::cout << date << ", " << randomNumber  << std::endl;

          if (file.is_open())
          {
            file << date;
            file << ", ";
            file << randomNumber;
            file << "\n";
          }
    }

    file.close() 
```

如果我在睡眠定时器之后立即关闭我的文件，它会写出数据。但我添加计时器的主要原因是，我想减慢我的文件被写入的频率......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:13:00.260

您需要刷新缓冲区，以便将内容写入文件。调用`std::flush`或更改`file << "\n";`为`file << std::endl;`刷新流。当您不调用`Sleep`程序时，缓冲区的内容会在缓冲区变满后立即写入，但是，`Sleep`由于存在延迟，缓冲区不会立即变满，因此您看不到写入文件的内容。

# python - 如何在 Windows 上找到当前的系统缓存大小？

> ID：14371521
> 
> 赞同：3
> 
> 时间：2013-01-17T02:59:25.673
> 
> 标签：python, c, windows, winapi, ctypes

高低搜索，但未能找到 API 调用来检索 Windows 上（文件）系统缓存的当前大小。

[GlobalMemoryStatusEx](https://stackoverflow.com/a/2017659/450917) - 检索 Total、Free、Used 和 Swap 统计信息。

[GetSystemFileCacheSize](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965224%28v=vs.85%29.aspx) - 返回它可能的最小值和最大值，不是很有帮助。

我还尝试了 Windows 扩展，它返回了以下无用的数字。看起来它可能是从 1mb 到 2gb 的任何地方？

```
>>> import win32api
>>> win32api.GetSystemFileCacheSize()
(1048576L, 2143289344L, 0L) 
```

获取此信息的正确 API 调用是什么？我在任务管理器中看到它可用，所以它必须在某个地方？这是屏幕截图和我正在寻找的数字：

![在此处输入图像描述](../Images/ec433d1cd2297b0d8d14fdee15ca086b.png)

更喜欢 python 解决方案，但 C/C++ 会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:11:17.847

我终于弄明白了：

```
import ctypes
psapi = ctypes.WinDLL('psapi')

class PERFORMANCE_INFORMATION(ctypes.Structure):
    ''' Struct for Windows .GetPerformanceInfo().
        http://msdn.microsoft.com/en-us/library/ms683210
    '''

    _DWORD = ctypes.c_ulong
    _SIZE_T = ctypes.c_size_t

    _fields_ = [
        ('cb', _DWORD),
        ('CommitTotal', _SIZE_T),
        ('CommitLimit', _SIZE_T),
        ('CommitPeak', _SIZE_T),
        ('PhysicalTotal', _SIZE_T),
        ('PhysicalAvailable', _SIZE_T),
        ('SystemCache', _SIZE_T),
        ('KernelTotal', _SIZE_T),
        ('KernelPaged', _SIZE_T),
        ('KernelNonpaged', _SIZE_T),
        ('PageSize', _SIZE_T),
        ('HandleCount', _DWORD),
        ('ProcessCount', _DWORD),
        ('ThreadCount', _DWORD),
    ]

    def __init__(self, getinfo=True, *args, **kwds):
        super(PERFORMANCE_INFORMATION, self).__init__(
              ctypes.sizeof(self), *args, **kwds)
        if (getinfo and not
            psapi.GetPerformanceInfo(ctypes.byref(self), 
                                     self.cb)):
            raise WinError()

    @property
    def cache_info(self):
        return self.SystemCache * self.PageSize

def get_cache_info():
    return PERFORMANCE_INFORMATION().cache_info

if __name__ == '__main__':
    print(get_cache_info()) 
```

# javascript - 在 JavaScript 或 Razor 中验证电话号码的代码在哪里？

> ID：14371522
> 
> 赞同：0
> 
> 时间：2013-01-17T02:59:27.717
> 
> 标签：javascript, razor

这是我的第一个网页，我在其中提示用户输入电话号码以添加到“请勿呼叫列表”数据库。到目前为止一切正常，但我需要添加以下内容，我可以按照[此答案中的建议进行操作](https://stackoverflow.com/questions/2386054/javascript-phone-number-validation)

*   去除除数字以外的所有字符的输入
*   验证结果字符串的长度为 10 位

然后，当告诉用户该号码已添加到列表中时，我想以 (999) 999-9999 格式显示它。

我应该在哪里添加所有这些代码？在`@{ }`街区之外？在 JavaScript 中？剃刀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:06:59.077

检查电话号码

```
function IsNumber(s) {
    var i, currentCharacter;
    for (i = 0; i < s.length; i++) {
        // Check that current character is number.
        currentCharacter = s.charAt(i);
        if (((currentCharacter < "0") || (currentCharacter > "9"))) {
            return false;
        }
    }
    // All characters are numbers.
    return true;
}

function TestInternationalPhone(strPhone) {
    var bracket = 3,
    openBracket,
    phoneNumberOnly,
    phoneNumberDelimiters = "()- ",
    validWorldPhoneChars = phoneNumberDelimiters + "+",
    minDigitsInIPhoneNumber = 10;

    strPhone = SOS.StringHelper.Trim(strPhone);
    if (strPhone.length === 0) {
        return false;
    }
    if (strPhone.indexOf("+") > 1) {
        return false;
    }
    if (strPhone.indexOf("-") != -1) {
        bracket = bracket + 1;
    }
    if (strPhone.indexOf("(") != -1 && strPhone.indexOf("(") > bracket) {
        return false;
    }
    openBracket = strPhone.indexOf("(");
    if (strPhone.indexOf("(") != -1 && strPhone.charAt(openBracket + 2) != ")") {
        return false;
    }
    if (strPhone.indexOf("(") == -1 && strPhone.indexOf(")") != -1) {
        return false;
    }
    phoneNumberOnly = SOS.StringHelper.StripCharsInBag(strPhone, validWorldPhoneChars);
    return (IsNumber(phoneNumberOnly) && phoneNumberOnly.length >= minDigitsInIPhoneNumber);
} 
```

# codeigniter - 我得到未定义的变量而不是显示错误消息

> ID：14371523
> 
> 赞同：0
> 
> 时间：2013-01-17T02:59:27.780
> 
> 标签：codeigniter, email, tankauth

我使用 tank auth 在 codeigniter 中创建了一个用于电子邮件验证的回调函数。这是我的代码：

```
$this->form_validation->set_rules('email', 'Email', 'trim|required|xss_clean|valid_email|callback_is_email_domain[gmail.com,yahoo.com]');

function is_email_domain($input, $domain='') 
{
    $email_domain=explode("@", $input);
    $domain = explode(",", $domain);
    if(in_array($email_domain[1],$domain))
    {
      $result=1;
    }

    else
    {
       $this->form_validation->set_message('is_email_domain', 'The %s field must be a %s email address');
    }

   return $result;
} 
```

我希望 tank auth 只允许“gmail.com”和“yahoo.com”电子邮件在我的网站上注册。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:04:24.907

```
$email_domain is not an array but you have use it as an array `$email_domain[1]` 
```

# java - 使用 JDT 获取方法调用的 startPosition 和长度

> ID：14371526
> 
> 赞同：2
> 
> 时间：2013-01-17T02:59:41.507
> 
> 标签：java, eclipse, eclipse-jdt

假设我有这个 Java 源代码。如何获取“extractedMethod(amount)”调用的 startPosition 和长度？

```
package smcho;

public class Extract {
String _name = "";

public int extractedMethod(int amount)
{
    ....
}

public int getValue(int amount) {
    if (amount > 10) {
    int z = extractedMethod(amount);
    return z;
    }
    ....
} 
```

![在此处输入图像描述](../Images/4ed69d79061f238307c3a53655a5cb78.png)

我可以使用六角查看器来查找起始位置为 0x1FA，长度为 len("extracted(method)") == 17，但我想使用 JDT 以编程方式进行。

一旦我可以获得 CompilationUnit，但我需要知道如何在该 CompilationUnit 中获取调用引用。

```
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
IProject orig = root.getProject(this.projectName);
orig.open(pm);
javaProject = JavaCore.create(orig);
IType type = this.javaProject.findType(this.className);
ICompilationUnit unit = type.getCompilationUnit();
ASTParser parser = ASTParser.newParser(AST.JLS3);
parser.setSource(unit);
parser.setResolveBindings(true);
CompilationUnit cunit = (CompilationUnit) parser.createAST(null);

ASTNode root = parser.createAST(null);

root.accept(new ASTVisitor() {
    public bool visit(...)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:58:44.057

您可以获得 ASTNode 的起始行号和长度，如下所示

```
int startLineNumber = compilationUnit.getLineNumber(node.getStartPosition()) - 1;
int nodeLength = node.getLength();
int endLineNumber = compilationUnit.getLineNumber(node.getStartPosition() + nodeLength) - 1; 
```

有关更多信息，请参阅以下帖子

*   [eclipse ASTNode 到源代码行号](https://stackoverflow.com/questions/11126857/eclipse-astnode-to-source-code-line-number/11131452#11131452)

*   [如何从生成的 java 编译器树 api 访问注释？](https://stackoverflow.com/questions/3019729/how-to-access-comments-from-the-java-compiler-tree-api-generated-ast/9884987#9884987)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:59:19.893

这是对我有用的代码。-[如何在 JDT/ASTVisitor() 中存储值？](https://stackoverflow.com/questions/14372095/how-can-i-store-values-inside-jdt-astvisitor)

```
public void setPositionFinder(String methodName) throws JavaModelException
{
    //findMethod(methodName);
    IType type = this.javaProject.findType(this.className);
    ICompilationUnit unit = type.getCompilationUnit();
    ASTParser parser = ASTParser.newParser(AST.JLS3);
    parser.setSource(unit);
    parser.setResolveBindings(true);
    CompilationUnit cunit = (CompilationUnit) parser.createAST(null);
    //ASTNode root = parser.createAST(null);

    final String name = this.newMethodName;

    cunit.accept(new ASTVisitor() {
        public boolean visit(MethodInvocation methodInvocation)
        {
            String methodName = methodInvocation.getName().toString();
            System.out.println(methodName);
            if (methodName.equals(name))
            {
                startPosition = methodInvocation.getStartPosition();
                length = methodInvocation.getLength();
                System.out.printf("startPosition %d - Length %d", startPosition, length);       
            }
            return false;
        }
    });
} 
```

# php - 总结 PHP 中的两个 Pervsive SQL 语句

> ID：14371530
> 
> 赞同：0
> 
> 时间：2013-01-17T03:00:04.527
> 
> 标签：php, pervasive, sql

我正在运行一个可以做很多事情的脚本，但我试图让 Pervasive 语句在我的 php 中工作，该语句在我正在查询的数据库中工作。我已经尝试了所有的技巧，但没有成功让它在应该显示的表格中工作。

```
$pom = $dbx->getOne('SELECT (SELECT SUM(wrt_sls) FROM wrt 
        WHERE wrt_cat = \'POM\' 
        AND wrt_cng_dat_4 >= '.$start.' 
        AND wrt_cng_dat_4 <= '.$end.' 
        AND wrt_pft_ctr in '.$pcs.') +
        (SELECT SUM(wrt_sls) FROM wrt 
        WHERE wrt_cat in (\'BED\',\'MP\')
        AND wrt_vend_id = \'PROTECTABED\' 
        AND wrt_cng_dat_4 >= '.$start.' 
        AND wrt_cng_dat_4 <= '.$end.' 
        AND wrt_pft_ctr in '.$pcs); 
```

同样，我在 Pervasive 中得到了正确的结果，但在实际应用程序中却一无所获。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:50:53.790

不，这似乎也不起作用，但我采取了不同的方法，这就是最终的工作......

```
$pom = $dbx->getOne('
    SELECT SUM(wrt_sls) FROM wrt 
        WHERE wrt_cat = \'POM\' 
        AND wrt_cng_dat_4 >= '.$start.' 
        AND wrt_cng_dat_4 <= '.$end.' 
        AND wrt_pft_ctr in '.$pcs);

$pab = $dbx->getOne('
    SELECT SUM(wrt_sls) FROM wrt 
        WHERE  wrt_cat = \'BED\'
        AND wrt_vend_id = \'PROTECTABED\' 
        AND wrt_cng_dat_4 >= '.$start.' 
        AND wrt_cng_dat_4 <= '.$end.' 
        AND wrt_pft_ctr in '.$pcs);

$protect = $pom + $pab;

$tpom += $protect; 
```

非常感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:21:29.670

我要检查的第一件事是 $start、$end 和 $pcs 的值。例如，您使用它们的方式它们似乎是 INT 值。但是，如果表中的列不是 INT 类型，那么它们在您的查询中没有被正确引用。我也没有看到您的查询中需要的结尾 ) 才能正常工作。您可能需要重写您的查询，例如：

```
$pom = $dbx->getOne("SELECT (SELECT SUM(wrt_sls) FROM wrt 
        WHERE wrt_cat = 'POM' 
        AND wrt_cng_dat_4 >= '" . $start . "' 
        AND wrt_cng_dat_4 <= '" . $end . "' 
        AND wrt_pft_ctr in '" . $pcs . "') +
        (SELECT SUM(wrt_sls) FROM wrt 
        WHERE wrt_cat in ('BED','MP')
        AND wrt_vend_id = 'PROTECTABED' 
        AND wrt_cng_dat_4 >= '" . $start . "' 
        AND wrt_cng_dat_4 <= '" . $end . "' 
        AND wrt_pft_ctr in '" . $pcs ."')"); 
```

# c# - 突然加载错误的 Interop.Shell32.dll

> ID：14371538
> 
> 赞同：0
> 
> 时间：2013-01-17T03:01:25.710
> 
> 标签：c#

我有一个运行良好的程序，但是当我对程序从其 ini 加载的方式进行小幅更改时，压缩功能停止工作。我逐步浏览了该程序，发现错误发生在以下行：

```
 var fs = File.Create(zipPath);
    fs.Write(emptyZip, 0, emptyZip.Length);
    fs.Flush();
    fs.Close();
    var sc = new Shell32.ShellClass();
    var srcFlder = sc.NameSpace(program.Path); //THIS LINE
    var destFlder = sc.NameSpace(zipPath);
    var items = srcFlder.Items();
    destFlder.CopyHere(items, 20);
    System.Threading.Thread.Sleep(500);
    ZippedPrograms.Add(zipPath); 
```

我仔细检查了`program.Path`发送到的变量和其他变量`ShellClass()`，它们不为空或为空。这是程序到达这一行时弹出的实际错误：

![在此处输入图像描述](../Images/0e97ad4e615c79bb5566115a38f291fb.png)

做一些谷歌搜索我发现`Shell32.dll`我在我的程序中引用的显然不适用于 7（或服务器 2008，目标环境），我需要引用 XP 版本（52kb 对 48kb dll 大小）。我在其中找到此信息的链接之一：[单击我](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/835800d1-7bd0-4bed-baa0-88212226c16b)。

因此，我创建了一个虚拟机并在其上安装了 WinXP Professional，然后导航到该虚拟机并将其`C:\WINDOWS\system32\`复制`Shell32.dll`到我的主机上。奇怪的是，DLL 的大小约为 8mb，而不是我预期的 52kb。当我将它作为 VS2012 的资源添加时，我浏览到复制的文件并添加它（使用本地复制），但由于某种原因，它最终大小为 48kb，并且程序继续在上述行崩溃。

我曾尝试使用 DotNetZip 和其他 C# 库进行 zip 管理，但由于某种原因，它们无法正常工作（创建损坏的 ZIP 文件，根本不创建它们，拒绝将随机文件/文件夹添加到存档等）。在这个问题之前，该程序运行完美，所以最让我困惑的是为什么它突然不起作用以及为什么`Shell32.dll`不是 A）我引用的 8mb 版本，以及 B）“精简”到 48kb。最重要的是，我检查了该程序的当前部署，其中缺少当前版本的某些功能等，并且那里的 DLL 大小为 48kb，并且此特定部署没有问题。

我还应该提到我目前正在运行 Windows 8 Pro，并在 VS2012 中进行开发。部署环境为 Windows Server 2008 R2。我最初在 Windows 8 Ultimate 上的 VS2010 中编写了这个程序。VS2012第一次打开项目时，**没有**升级对话框。列出的所有操作系统（WinXP Pro 除外）都是 x64。

有没有人对这些问题/事件有任何经验？任何见解/提示/解决方案将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:29:34.967

将过时的系统 dll 拖到较新版本的 Windows 是必然会失败的，尤其是如果它（如本例中）是 COM 互操作 DLL。如果 Windows 8 正在运行 COM 服务，它将使用其“自己的”版本的 DLL 来运行它。如果您随后尝试使用不同版本的接口 DLL 与其交互，您将得到接口不匹配。如你所见，`E_NOINTERFACE`.

您正在尝试使用版本 6 DLL 与版本 8 服务进行通信。难免会遇到问题。

大小的差异*可能*与 Visual Studio 将部署 DLL 剥离为仅接口而不是包括所有实现有关。

# jquery - div到指定的div克隆

> ID：14371540
> 
> 赞同：0
> 
> 时间：2013-01-17T03:01:28.987
> 
> 标签：jquery

这是一个小提琴：http: [//jsfiddle.net/TQdrH/15/](http://jsfiddle.net/TQdrH/15/)

目前，该小提琴设置为基本上执行 .each() - 而不是 .each()，我想指定重复项，这是一个示例：

```
HTML

<div id="title">Book Title</div>
<div id="price">$20</div>
<div id="description">A book about something</div>

CSS

#title, #price, #description {display: none;}  // These would not be displayed on the page. 
```

现在的目标是随机将 div 放在不同区域的页面上，并指定要克隆的部分和位置。例如：

```
HTML

<div id="duplicate-title"></div>

<div id="duplicate-price"></div>

<div id="duplicate-description"></div> 
```

所以现在，根据我在页面中放置上述 div 的位置，原始 div 中的数据将被克隆到标有“duplicate-”的数据，后跟原始 div 的名称。

我在这方面遇到了麻烦，希望能得到任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:38:17.457

好的，然后我们将获取所有以 id 开头的 div `duplicate-`，然后克隆原始

如果它是正确的，[试试这个](http://jsfiddle.net/arunpjohny/TQdrH/20/)。

```
$('[id^="duplicate-"]').each(function () {
    var $this = $(this).empty();
    var id = $this.attr('id');
    var idToCopy = id.substring(10);
    var $newDiv = $this.replaceWith($('#' + idToCopy).clone().attr('id', id))
}); 
```

# javascript - 禁用复选框不完全工作

> ID：14371541
> 
> 赞同：0
> 
> 时间：2013-01-17T03:01:31.063
> 
> 标签：javascript, jquery, html, checkbox

[所以我最近在我发布的另一个问题](https://stackoverflow.com/questions/14370119/disable-all-but-one-checkbox/14370746#14370746)上问了一个关于如何做到这一点的问题，我问如何更改一些 javascript 以使其只有在选中特定复选框时所有复选框都将被禁用。

好吧，我写了这个：

```
$(function () {
    $("#disable").change(function () {
        $(this).siblings().attr("disabled", $(this).is(":checked"));
    });
}); 
```

在[jsfiddle 上，](http://jsfiddle.net/83w8s/)您会发现它不起作用。这个想法是，如果您选中第一个复选框，则其余所有复选框都应该被禁用。怎么还没……

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:06:21.050

没有类型是复选框的兄弟姐妹。

```
$("#disable").change(function () {
    $('.sidebar').not(this).attr("disabled", this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:06:32.663

你在 DOM 上出错了。在这里查看：http: [//jsfiddle.net/83w8s/1/](http://jsfiddle.net/83w8s/1/)

```
$(function () {
  $("#disable").change(function () {
    $(this).closest('.control-group').siblings('.control-group').find('input').attr("disabled", $(this).is(":checked"));
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T04:10:00.190

您必须选择所有复选框而不选择选中的复选框，然后您可以禁用所有其他复选框，留下第一个选中的复选框，如下所示，

```
$(document).ready(function(){
    $("#disable").change(function () {
            if($("#disable").is(':checked')){                          
                $("input[type='checkbox']:not(#disable)").attr("disabled", "disabled");                   
            }else{
                $("input[type='checkbox']:not(#disable)").removeAttr("disabled");   
            }
        });
}); 
```

[JSFiddle](http://jsfiddle.net/swarne27/e98zK/)

# asp.net-mvc - 带有可选参数的附加 MVC 路由

> ID：14371546
> 
> 赞同：1
> 
> 时间：2013-01-17T03:01:50.873
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我想添加一个自定义路线，但我无法让它工作。我想使用普通路由，除非它遇到特定的控制器，否则使用不同的可选参数而不是 id。

在我所在的地区，这是存在的：

```
context.MapRoute(
     "Admin_default",
     "Admin/{controller}/{action}/{id}",
     new { action = "Index", id = UrlParameter.Optional }
     ); 
```

在此之上，我尝试添加：

```
context.MapRoute(
           "Admin_Users",
           "Admin/Users/{action}/{username}",
           new { action = "Index", username = UrlParameter.Optional }
       ); 
```

在代码中，我调用页面：

```
@Html.ActionLink("Edit", "Edit", new { username=user.UserName }) 
```

它可以工作，但链接显示为**/Admin/Users/Edit/?username**

我想要：**/Admin/Users/Edit/username**

但是，我想为所有其他页面保持相同的路线，即：

```
/Admin/Shop/Products/Edit/1 
```

它使用默认路由

**编辑**

我通过在我的路线中添加控制器 =“用户”来让它工作。

```
context.MapRoute(
       "Admin_Users",
       "Admin/Users/{action}/{username}",
       new { controller="Users", action = "Index", username = UrlParameter.Optional }
   ); 
```

我以为这就是URL部分（上面那行）的重点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:31:28.200

您的代码是正确的，但您的订单不正确。

ASP.NET MVC 使用第**一个**适用的路由。在您的情况下，通用路线将适用。更改顺序，您的“管理员/用户/...”路线将具有更高的优先级。

# julia - 为什么在 Julia 中重命名了这些对集合的常见操作？

> ID：14371548
> 
> 赞同：6
> 
> 时间：2013-01-17T03:01:56.193
> 
> 标签：julia

Julia 中对集合的许多常见操作（例如从 Set 中删除项目）最近被重命名，旧函数已弃用。

例如，

```
del(IntSet(1,2,3), 1) 
```

现在弹出警告

```
WARNING: del is deprecated, use delete! instead. 
```

一些重命名的函数：

```
@deprecate  push        push!
@deprecate  pop         pop!
@deprecate  grow        grow!
@deprecate  enqueue     unshift!
@deprecate  unshift     unshift!
@deprecate  shift       shift!
@deprecate  insert      insert!
@deprecate  del         delete!
@deprecate  del_all     empty! 
```

为什么这些被重命名？正在附加一个！改变集合状态的函数现在是一种约定吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T03:17:25.723

你可以在[这里](https://groups.google.com/forum/#!topic/julia-dev/wKIlMaSj0YE)`julia-dev`阅读主题。基本上，它只是为了尊重 [数组](https://github.com/JuliaLang/julia/blob/master/doc/manual/arrays.rst)文档中描述的规则而改变：

> 最后一个函数 fill! 的不同之处在于它修改现有数组而不是构造新数组。按照惯例，具有此属性的函数的名称以感叹号结尾。这些函数有时称为“变异”函数或“就地”函数。

FWIW 我认为这是一个好主意，至少对于`Base`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T20:38:35.610

的使用`!`始终是表示突变的明确约定，只是直到最近才正确执行。因为`push`，人们很容易争辩说这不是必需的。但是使用`push!`而不是`push`清楚地表明，在这种情况下发生突变的方式与使用时发生突变的方式完全相同`sort!`，这与 非常不同`sort`。

这种感叹号约定存在于 Scheme 和 Ruby 以及可能的其他几种语言中。它不存在于像 R 这样的语言中，它不允许人们在不求助于语言的底层内容的情况下执行突变。

# javascript - 使用 javascript 更改文档可滚动区域

> ID：14371550
> 
> 赞同：0
> 
> 时间：2013-01-17T03:01:58.540
> 
> 标签：javascript, jquery, twitter, scroll

我想实现一个系统，其中打开和覆盖会更改浏览器窗口的可滚动区域以适应该覆盖。

我想做 Twitter 做过的事情。当我滚动浏览推文时，有一个大的可滚动文档区域。但是，当我单击用户时，它会打开一个“个人资料摘要”，并且可滚动区域会缩小以适应该摘要。我不知道从哪里开始。最好使用 jQuery 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:48:17.293

有一个非常简单的解决方案，基本上你这样做：

```
$("body").css({overflow: "hidden"}) 
```

将其设置为溢出：完成后可见。

[http://jsfiddle.net/BoringCode/7xHMf/1/](http://jsfiddle.net/BoringCode/7xHMf/1/)

# python - TypeError：不支持的操作数类型/：'str'和'int'

> ID：14371555
> 
> 赞同：4
> 
> 时间：2013-01-17T03:02:38.307
> 
> 标签：python, string, types, int, typeerror

在 Python 2.7 中：

```
a=80
b=100

def status(hp, maxhp):
    print "You are at %r percent health." % hp*100/maxhp

status(a,b) 
```

回报：

> TypeError：不支持的操作数类型/：'str'和'int'

我已经尝试将 int() 放在每个变量和每个变量组合周围。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T03:04:04.437

`%`运算符的优先级高于`*`or `/`。

你的意思是：

```
"You are at %r percent health." % (hp * 100 / maxhp) 
```

你得到的是：

```
("You are at %r percent health." % hp) * 100 / maxhp 
```

编辑：实际上，我错了。它们具有相同的优先级，因此从左到右应用。

[文档：运算符优先级](http://docs.python.org/2/reference/expressions.html#operator-precedence)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:05:06.120

您需要将括号包裹在表达式周围，因此在尝试将结果替换为字符串之前对其进行全面评估。

就像是：

```
print "my string with this '%d' value" % (hp * 100 / maxhp) 
```

# python - 如何使用 GitPython 指定 Commit 的 commit_date？

> ID：14371556
> 
> 赞同：2
> 
> 时间：2013-01-17T03:02:39.960
> 
> 标签：python, gitpython

我想提交一个带有自定义日期的文件。

到目前为止，我已经创建了一个 Commit 对象，但我不明白如何将它绑定到一个 repo。

```
from git import *
repo = Repo('path/to/repo')
comm = Commit(repo=repo, binsha=repo.head.commit.binsha, tree=repo.index.write_tree(), message='Test Message', committed_date=1357020000) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:31:31.257

好吧，我找到了解决方案。

我不知道，但我必须提供**所有**参数，否则 Commit 对象在尝试序列化时会抛出 BadObject 异常。

```
from git import *
from time import (time, altzone)
import datetime
from cStringIO import StringIO
from gitdb import IStream

repo = Repo('path/to/repo')

message = 'Commit message'

tree = repo.index.write_tree()
parents = [ repo.head.commit ]

# Committer and Author
cr = repo.config_reader()
committer = Actor.committer(cr)
author = Actor.author(cr)

# Custom Date
time = int(datetime.date(2013, 1, 1).strftime('%s'))
offset = altzone
author_time, author_offset = time, offset
committer_time, committer_offset = time, offset

# UTF-8 Default
conf_encoding = 'UTF-8'

comm = Commit(repo, Commit.NULL_BIN_SHA, tree, 
      author, author_time, author_offset, 
      committer, committer_time, committer_offset,
      message, parents, conf_encoding) 
```

创建提交对象后，必须放置适当的 SHA，我不知道这是如何完成的，但对 GitPython 源代码的一些研究让我得到了答案。

```
stream = StringIO()
new_commit._serialize(stream)
streamlen = stream.tell()
stream.seek(0)

istream = repo.odb.store(IStream(Commit.type, streamlen, stream))
new_commit.binsha = istream.binsha 
```

然后将提交设置为 HEAD 提交

```
repo.head.set_commit(new_commit, logmsg="commit: %s" % message) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-17T13:34:43.050

一个更简单的解决方案，它避免了手动创建提交对象（如果您也想添加文件，还可以手动创建新索引）：

```
from git import Repo, Actor # GitPython
import git.exc as GitExceptions # GitPython
import os # Python Core

# Example values
respository_directory = "."
new_file_path = "MyNewFile"
action_date = str(datetime.date(2013, 1, 1))
message = "I am a commit log! See commit log run. Run! Commit log! Run!"
actor = Actor("Bob", "Bob@McTesterson.dev" )

# Open repository
try:
    repo = Repo(respository_directory)
except GitExceptions.InvalidGitRepositoryError:
    print "Error: %s isn't a git repo" % respository_directory
    sys.exit(5)

# Set some environment variables, the repo.index commit function
# pays attention to these.
os.environ["GIT_AUTHOR_DATE"] = action_date
os.environ["GIT_COMMITTER_DATE"] = action_date

# Add your new file/s
repo.index.add([new_file_path])

# Do the commit thing.
repo.index.commit(message, author=actor, committer=actor) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-21T07:46:51.117

您可以`commit_date`在提交时设置。

```
r.index.commit(
    "Initial Commit",
    commit_date=datetime.date(2020, 7, 21).strftime('%Y-%m-%d %H:%M:%S')
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-18T08:56:50.620

我还将指定的日期/时间用于提交目的。在我的情况下，经过长时间的研究，我发现，你必须`datetime`按照 GitPython 建议的方式提供非 ISO 格式，也不是`timestamp`格式。它实际上是在制造错觉，因为它自己的“解析”应该是标准的python格式。

没有。您必须以 git 本身可以理解的格式提供它。

例如：

```
# commit_date is your specified date in datetime format
commit_date_as_text = commit_date.strftime('%Y-%m-%d %H:%M:%S %z')
git_repository.index.commit(commit_message, author=commit_author, commit_date=commit_date_as_text) 
```

[例如，您可以在 StackOverflow 上的另一个主题](https://stackoverflow.com/a/19742762/1960514)中找到接受的格式列表。

# html - HTML CSS h3 iframe 定位

> ID：14371558
> 
> 赞同：0
> 
> 时间：2013-01-17T03:02:47.957
> 
> 标签：html, css, iframe, position, title

我有一个 h3 标签、一个段落和 facebook iframe Like 按钮。

```
 <h3>Spread out the word</h3>

<iframe src="//www.facebook.com/plugins/like.php?;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:21px;" allowTransparency="true"></iframe>

<p class="txtlike">Like us on Facebook</p> 
```

我将如何设置 CSS，以便类似按钮位于 h3 标签旁边（在同一行中）并且可能具有全宽，以便按钮可以展开（一些不同的语言扩展了按钮）。我发现它起作用的唯一方法是将 iframe 放入 h3 中，我知道这是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:06:43.630

这可能会有所帮助：

```
h3{
  display: inline-block;
  /*or...*/
  display: inline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:18:46.403

在您的 CSS 中使用以下内容。希望能帮助到你

```
h3
{
    width:25%;  
    float:left; 
}
iframe 
{
  width:75%;
} 
```

相应地改变宽度。

# iphone - 使用 CGAffineTransformRotate，如何将旋转设置为 0

> ID：14371559
> 
> 赞同：2
> 
> 时间：2013-01-17T03:02:55.033
> 
> 标签：iphone, ios, cocoa-touch, uiview, cgaffinetransform

给出以下代码：

```
self.transform = CGAffineTransformRotate(self.transform, ?); 
```

有没有办法在不知道当前旋转角度的情况下将旋转设置回 0？我有其他想要维护的转换，因此我使用`CGAffineTransformRotate`而不是`CGAffineTransformMakeRotation`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:13:08.240

如果只是缩放和旋转，那么您的选择实际上是（i）仅确定比例并制作该比例的全新缩放矩阵；或（ii）按照您的建议，确定旋转并将您的变换调整相反的量。

您可以通过查看变换矩阵的组件来实现。如果您考虑矩阵乘法的工作原理，您会得到输出 x 轴`(transform.a, transform.b)`和输出 y 轴`(transform.c, transform.d)`。

因此，对于 (i)：

```
// use the Pythagorean theorem to get the length of either axis;
// that's the scale, e.g.
CGFloat scale = sqrtf(
          self.transform.a*self.transform.a + 
          self.transform.b*self.transform.b);

self.transform = CGAffineTransformMakeScale(scale, scale); 
```

对于 (ii)：

```
// use arctan to get the rotation of the x axis
CGFloat angle = atan2f(
          self.transform.b*self.transform.b, self.transform.b*self.transform.a);

self.transform = CGAffineTransformRotate(self.transform, -angle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:09:27.710

你也可以反转变换

```
CGAffineTransform CGAffineTransformInvert (
   CGAffineTransform t
); 
```

例如

```
self.transform = CGAffineTransformInvert(CGAffineTransformRotate(self.transform, -angle)); 
```

# c# - 如何避免使用 C# 在 windows mobile 6.5 设备中将零大小文件写入存储卡？

> ID：14371561
> 
> 赞同：0
> 
> 时间：2013-01-17T03:03:06.580
> 
> 标签：c#, streamwriter, windows-mobile-6.5

我正在使用 C# 在带有 .NET CF 3.5 的 windows mobile 6.5 中开发智能设备应用程序。用户将使用此应用程序将 xml 文件写入存储卡，每天大约有 5000 个 xml 文件要写入存储卡。但是有一个问题我找不到根本原因，那就是有时写入的文件是零大小的，也无法打开这些零大小的文件。

```
using (StreamWriter sw = System.IO.File.CreateText(@"\Storage Card\temp\filename01.xml"))
{
     xmldocData.Save(sw);
     sw.Flush();
     sw.Close();
} 
```

如果有人可以提供帮助，我将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:35:21.087

您尝试写入的某些数据是否可能为空？

```
using (StreamWriter sw = System.IO.File.CreateText(@"\Storage Card\temp\filename01.xml"))
{
    if ( sw.BaseStream.Length > 0)
    {
       xmldocData.Save(sw);
    }
    sw.Flush();
    sw.Close();
} 
```

有点难说，你能在你保存的数据周围显示更多代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:51:03.043

可能是 SD 卡或驱动程序有问题。

请检查 SD 卡。使用其他厂商的不同卡进行测试。

不要在 SD 卡上保存和更改太多，它们不是作为硬盘设计的。请参阅磨损均衡等。大多数消费卡都是为日常使用而设计的，但不适用于工业用途。

有更好的工业用途 SD 卡，例如 ATP 具有更好的磨损均衡等，允许您更频繁地更改“内存”字节。

请咨询您设备的供应商并索取新的存储卡驱动程序或设备固件或推荐的 SD 卡。

# windows - 如何阻止 MATLAB 使用 Cygwin 打开新窗口？

> ID：14371566
> 
> 赞同：1
> 
> 时间：2013-01-17T03:03:51.957
> 
> 标签：windows, matlab, cygwin

过去，我在工作的 Linux 机器上很少使用 MATLAB，而且我非常喜欢使用“-nodesktop”选项。在我使用过的所有类 Unix 机器上，此选项允许我相对轻松地控制 STDIN 和 STOUT，但在 Windows（使用 Cygwin）上，此选项会生成一个新窗口，并将控制返回给调用 shell！

基本上，我想知道是否有任何方法可以强制 MATLAB 像在类 Unix 机器上一样运行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:22:24.433

简短的回答：你不能。

更长的答案可以在他们的[网站](http://blogs.mathworks.com/community/2010/02/22/launching-matlab-without-the-desktop/)上找到。

> -nodesktop 的行为会有所不同，具体取决于您使用的是 Windows、Linux 还是 Mac。在 Windows 上，我们提供了一个乏味的仅命令行窗口界面，缺少常规命令行窗口或完整桌面的“花里胡哨”。

所以你可以使用-nodesktop，但它会弹出那个烦人的命令行窗口。

# c# - 在 .NET 程序集或可执行文件中嵌入文本文件

> ID：14371567
> 
> 赞同：7
> 
> 时间：2013-01-17T03:03:55.860
> 
> 标签：c#, winforms, visual-studio-2010

> **可能重复：**
> [如何在 .NET 程序集中嵌入文本文件？](https://stackoverflow.com/questions/433171/how-to-embed-a-text-file-in-a-net-assembly)

我有使用多个文本文件的 ac# winforms 应用程序。

我想以某种方式将这些文件嵌入到 exe 或 dll 中，以便在部署应用程序时用户看不到它们。

视觉工作室可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-17T03:12:53.040

使用文本文件，您还可以进行以下操作：

1.  双击您的`Properties`->`Resources.resx`文件以打开资源设计器。
2.  从顶部的第一个小下拉菜单中，选择“文件”作为资源类型。
3.  单击`Add Resource`->`Add Existing File...`并选择您的文本文件。

假设您添加的 TXT 被称为`Foo.txt`...您可以像这样访问它的内容：

```
String foo = Properties.Resources.Foo; 
```

然后您还可以在资源设计器中更改文件名，它们将在您的代码中自动重构。从`Resources`它们现在位于项目中的目录中，您还可以编辑它们。我只是建议您将其访问级别保持为`internal`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T03:12:14.103

这是我的做法：

1.  在解决方案资源管理器中，右键单击 Properies/Resources.resx。
2.  选择“视图设计器”。
3.  您*可以*使用“添加资源”按钮，但我通常只是将文件直接拖到设计器窗口上。
4.  Visual Studio 将执行代码生成，以便您可以使用`Properties.Resources.YourFileName`.

请注意：Visual Studio 会将您选择的文件*复制到项目的 Resources 文件夹中。*它不会创建指向文件最初存储位置的链接。

# php - 缓存 PHP MySQL 结果

> ID：14371570
> 
> 赞同：1
> 
> 时间：2013-01-17T03:04:06.100
> 
> 标签：php, mysql, caching

我想知道是否值得缓存一个每隔几个小时才会更改一次但会显示在网站每个页面上的结果。对我来说这样做很有意义，但只是想要第二或第三意见。

情况是，每页有 2 个前 5 个列表。这些确实会发生变化，但例如只需要每小时更新一次。前 5 名的结果是通过 MySQL 查询找到的。缓存这些结果会是一个聪明的主意吗？缓存它们的最佳方法是什么？（使用 PHP）。

我已经浏览了这里提出的一些问题，但它们之间的联系不够好，所以认为最好再问一次。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:09:44.900

您的用例正是开发缓存的原因！最常见的模式是使用缓存服务，例如 memcached。（请参阅[使用 PHP 进行缓存以减轻 MySQL 的压力](https://stackoverflow.com/questions/1599597/caching-with-php-to-take-stress-away-from-mysql?rq=1)）

但是，我鼓励您考虑这是否是过早的优化。您的数据库是否无法处理请求？所有页面的加载速度都比您需要的慢吗？此外，这些数据库查询是否由于某种原因变慢了？您是否正确使用索引？

我鼓励您考虑仅在需要时添加缓存，并确保在此之前尽可能优化。

结帐[https://stackoverflow.com/a/1600252/1058853](https://stackoverflow.com/a/1600252/1058853)以获得良好的评论。

# java - 在 Java Play 上运行 JSP

> ID：14371575
> 
> 赞同：0
> 
> 时间：2013-01-17T03:04:36.327
> 
> 标签：java, jsp, playframework

我刚开始使用`Java Play framework`，我有几个问题...

我开发了一个 Web 应用程序，该应用程序使用`Maven 3.0`、托管`Tomcat 7.0`并包含一大堆`JSP`文件进行管理。我们的团队最近决定使用 Play 框架运行所有内容，我只是想知道是否有一种快速的方法可以将我的原始项目导入 Play 中？另外，play 是如何识别 JSP 文件的？把它们放在哪里？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:55:08.387

不幸的是，播放框架视图模板使用 groovy (1.x) 或 scala (2.x) 来呈现数据。因此，没有办法在新系统中使用或替换旧的 jsp 文件。您必须将旧的批量 jsp 文件转换为新视图

# php - 用于 Cron 作业的 .sh 脚本中的好命令

> ID：14371576
> 
> 赞同：7
> 
> 时间：2013-01-17T03:04:39.197
> 
> 标签：php, apache, bash, cron, nice

我有这个需要在共享虚拟主机上运行的 php 脚本。我创建了一个执行 sh 脚本的 cron 作业。cron 的命令是：

`/bin/sh /home/user/script.sh`

所以我假设它是 Bourne Shell（或兼容的东西）。脚本本身是：

```
#!/bin/sh
cd /home/user/public_html/folder/
#updating DB
php -q ./run_interactive_job.php batch_control_files/updateDB
echo Updated DB results 
```

**我的问题是**：
我可以在 php 命令中添加**Nice优先级吗？**还是我需要将它添加到 cron 命令的脚本中。哪一个更有可能起作用？

`nice 10 php -q ./run_interactive_job.php batch_control_files/updateDB`

**以较低的优先级运行会成功吗？**

**PS：**基本上，这个脚本在我通过浏览器运行它之前已经使服务器超载，它影响了该服务器上的 apache，导致我的主机阻止了文件。我一再要求他们解锁以使用不同的参数对其进行测试。现在我试图通过 cron 以较低的优先级运行它，希望它不会影响 apache。但我不希望它再次产生问题，因此我正在尝试使用**NICE**

如果有人有任何其他建议可以提供类似的运行 php 脚本而不影响 apache 或网络服务器的解决方案，那也很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T03:17:45.800

跳过 shell 脚本并使用

```
* * * * * /usr/bin/nice -n 10 /path/php -q /path/script.php 
```

nice 和\或 php 路径可能需要也可能不需要

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:32:46.390

很抱歉，我在两个地方问了这个问题，因为我以为我没有得到回应。我向超级用户询问，我收到了适合我需要的答案。

@Dagon - 来自 Dagon 的答案似乎也很有效，当我用任一解决方案解决了这个问题时，我会提供更新。

[超级用户提出了同样的问题 - https://superuser.com/questions/537509 ...](https://superuser.com/questions/537509/nice-commands-in-a-sh-script-for-cron-jobs)

更新：我使用了如图所示的批处理文件。我在批处理文件中的 php 之前使用了 nice 命令。唯一的区别是：

`nice -n 10 php -q ./run_interactive_job.php batch_control_files/updateDB`

我添加了更多命令来运行具有相同良好属性的其他 php 脚本。他们都工作得很好。

感谢大家的投入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:43:56.537

无论哪种方式都很好。如果把 放在`nice`Cron 作业本身，会影响整个作业的优先级；但由于脚本仅包含一个命令，其优先级设置确实有意义，因此在脚本中执行此操作在实践中同样有效。

# cobol - 如何在 COBOL 中的 PIC X 子句上重新定义和执行算术运算

> ID：14371578
> 
> 赞同：3
> 
> 时间：2013-01-17T03:04:51.523
> 
> 标签：cobol

我需要将具有 2 位小数的数字的 PIC X 定义字段移动到数字字段，以执行涉及 comp-3 字段的算术函数。做这个的最好方式是什么？

我确实使用以下内容从 PIC X 重新定义为 PIC 9：EX。图 X(10) 至图 9(7).99。

但是现在我如何使用重新定义的字段执行计算？我是否重新定义了重新定义的字段？

计算 FIELD-RESULT 定义为 S9(9)v99 = FIELD-1（定义为 S9(9)V99）- FIELD-2（我重新定义的字段 PIC 9(7).99。

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:56:10.077

您可以查看内在的 FUNCTION NUMVAL。

无论如何，如果给定无效数据（文本不是有效的“已编辑”数字），您需要在大型机上拥有“好”数据，因为 NUMVAL 会失败。

```
COMPUTE X-TO-NUMERIC = FUNCTION NUMVAL ( text-data ) 
```

你可以这样定义：

```
01  TEXT-NUMBER PIC X(10).
01  EDITED-NUMBER REDEFINES TEXT-NUMBER PIC 9(7).99  (or Z(6)9.99 or Z(7)9.99 or whatever)
01  X-TO-NUMERIC PIC 9(7)V99.

MOVE EDITED-NUMBER TO X-TO-NUMERIC 
```

无效数据仍然可能失败，或者只是错误。

或者，我的首选方法：

```
01  CONVERTED-NUMBER PIC 9(7)V99.
01  FILLER REDEFINES CONVERTED-NUMBER.
    05  CN-INTEGER-PART PIC X(7).
    05  CN-DECIMAL-PART PIC XX.

01  TEXT-NUMBER PIC X(10).
01  FILLER REDEFINES TEXT-NUMBER.
    05  TN-INTEGER-PART  PIC X(7).
    05  TN-DECIMAL-POINT PIC X.
        88  TN-DECIMAL-POINT VALID VALUE ".".
    05  TN-DECIMAL-PART  PIC XX.

IF ( TN-INTEGER-PART NUMERIC )
AND ( TN-DECIMAL-PART NUMERIC )
AND ( TN-DECIMAL-POINT )
    MOVE TN-INTEGER-PART TO CN-INTEGER-PART
    MOVE TN-DECIMAL-PART TO CN-DECIMAL-PART
ELSE
    deal with invalid
END-IF 
```

不会失败，不会得到错误的结果。

编辑：为什么我没有建议参考修改？如果仅使用文字，如果使用数据名称，则人类“阅读”的难度要小得多，仍然不如数据定义方法清晰和慢，所以我改变了它们。

编辑。再次被另一个问题吸引到这里，我注意到：*在这个例子*中。无需将 CN-INTEGER-PART、CN-DECIMAL-PART、TN-INTEGER-PART 或 TN-DECIMAL-PART 定义为数字字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:11:45.880

在 COBOL 的世界中，您要做的是“删除”数字数据类型。

给定一个`PIC X(10)`包含“数字”的字段，将其转换为数字数据类型。如果始终保证此“数字”具有相同的格式：7 位数字、一个小数点和小数点后 2 位数字，那么在 COBOL 中执行此操作的经典方法是：

```
01.
   02 NUM-AS-PIC         PIC X(10).
   03 NUM-EDITED  REDEFINES NUM-AS-PIC PIC 9(7).99.

01 NUM-DEEDITED            PIC 9(7)V99.

MOVE '1234567.89' TO NUM-AS-PIC      <- alpha-numeric move
MOVE NUM-EDITED   TO NUM-DEEDITED    <- deediting numeric move

ADD 1 TO NUM-DEEDITED                <- numeric computation

MOVE NUM-DEEDITED  TO NUM-EDITED     <- recover explicit decimal (editing)
DISPLAY NUM-AS-PIC                   <- alpha-numeric display 
```

主要缺点是它不是很灵活。您将始终需要确保`NUM-AS-PIC`包含完全正确的格式。例如

```
MOVE '123.45'  TO NUM-AS-PIC 
```

将导致运行时错误，因为小数点位置错误（`MOVE`从左侧填充而不是从右侧填充）并且尾随空格在构成剩余 4 个字节后填充（并且空格不是有效的数值）。

另一种常见的方法是使用`NUMVAL`函数。此函数采用任何有效的编辑数字格式并将其转换为浮点数字表示。数值可能附加了前导或尾随空格。的结果`NUMVAL`可以分配给任何有效的数字数据类型。例如：

```
 MOVE '1234567.89' TO NUM-AS-PIC         <- alpha-numeric move
  COMPUTE NUM-DEEDITED = FUNCTION NUMVAL(NUM-AS-PIC) 
```

现在

```
 MOVE '123.45' TO NUM-AS-PIC 
  COMPUTE NUM-DEEDITED = FUNCTION NUMVAL(NUM-AS-PIC) 
```

也会导致有效的移动。`NUM-AS-PIC`但是，如果其中包含的值无法转换为有效的浮点数，仍会发生运行时错误。例如：

```
 MOVE '12A.23' TO NUM-AS-PIC
  COMPUTE NUM-DEEDITED = FUNCTION NUMVAL(NUM-AS-PIC) 
```

仍然会导致运行时错误。

可悲的是，在 COBOL 中没有普遍简单或万无一失的方法来执行此操作。

# jqplot - jqplot水平线

> ID：14371583
> 
> 赞同：4
> 
> 时间：2013-01-17T03:05:25.377
> 
> 标签：jqplot

似乎无法显示水平线，我看过以前的帖子，但没有任何效果......也许我错过了导入？图表本身显示得很好。

```
 $(document).ready(function(){
    var line1 = [['January', 1], ['February', 2], ['March', 3],
    ['April', 4], ['May', 5], ['June', 6], ['July', 7], ['August', 8],
    ['September', 9], ['October', 10], ['November', 11], ['December', 12]];
    //alert(<?=$graph[1]['st']?>);
    var plot1 = $.jqplot('settle_graph', [line1], {
        title: 'Monthly Settlements',
        grid:{drawBorder: false, shadow:false},
        canvasOverlay: {
          show: true,
          objects: [
            {horizontalLine: {
              name: '# Settlements from Budget',
              y: 6,
              lineWidth: 3,
              color: '#444444',
              shadow: true,
              show:true,                  
              lineCap: 'butt',
              xOffset: 0
            }}
          ]
        },     
        series:[{renderer:$.jqplot.BarRenderer}],
        seriesDefaults: {
            rendererOptions: {
                varyBarColor : true,
                barPadding: 2,      // number of pixels between adjacent bars in the same
                                    // group (same category or bin).
                barMargin: 3,      // number of pixels between adjacent groups of bars.
                barDirection: 'vertical', // vertical or horizontal.
                barWidth: null//,     // width of the bars.  null to calculate automatically.
                //shadowOffset: 2,    // offset from the bar edge to stroke the shadow.
                //shadowDepth: 5,     // nuber of strokes to make for the shadow.
                //shadowAlpha: 0.8,   // transparency of the shadow.
            }
        },
        axesDefaults: {
            tickRenderer: $.jqplot.CanvasAxisTickRenderer ,         
            tickOptions: {
              angle: -30,
              fontSize: '10pt'            
            },rendererOptions: {
                baselineWidth: 1,
                baselineColor: '#444444',
                drawBaseline: true
            }
        },
        axes: {         
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                tickOptions:{
                    showGridline: false             
                }                           
            },
            yaxis: {            
                tickOptions:{
                    showGridline: false
                }               
            }           
        },
    seriesColors: ["#4FCBEA", "#4FCBEA", "#4FCBEA", "#4FCBEA", 
    "#4FCBEA", "#4FCBEA", "#4FCBEA", "#4FCBEA", 
    "#4FCBEA", "#4FCBEA", "#4FCBEA", "#4FCBEA"],        
  });     
}); 
```

有人做过简单的水平线吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T09:54:25.577

您需要包含`jqplot.canvasOverlay.js`插件以显示叠加层

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T21:31:55.210

感谢 SDESPONT，今天早上通过查看插件文件夹中的内容发现它丢失了 :)

```
 <script type="text/javascript" 
  src="jqplot/plugins/jqplot.canvasOverlay.min.js"></script> 
```

我希望通过电子邮件将您的回复发给我:)

# javascript - 关于在单个函数中组织 jQuery 函数的问题

> ID：14371584
> 
> 赞同：1
> 
> 时间：2013-01-17T03:05:27.013
> 
> 标签：javascript, jquery

我注意到有时人们会在他们的`$(function() { ...here... });`块中放置一堆可调用函数。我想知道为什么，但后来注意到一个可能的原因：如果两个对象位于不同的 jQuery 代码块中，命名冲突似乎不是问题。

我的想法正确吗？这似乎是一个很大的优势。

但是现在我已经采用了这种方法，我需要使我的一个函数可以从其他 jQuery 代码块中调用。所以我可以把函数移到代码块外，但它需要调用代码块内的其他函数。

那么我是否需要将所有函数移到代码块之外，或者有没有办法保持这种分离但仍然能够从另一个代码块调用我的一个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:15:13.613

您应该阅读模块模式。这是给你的一个小例子：

```
window.Namespace = window.Namespace || {}; //defining our namespace

Namespace.Module = (function(){
   var api = {};

   var func = function() { //private function, accessible only inside this module

   };

   api.publicfunc = function() { // public function

   };

   return api; //all api functions will be available globally
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:16:20.507

他们使用 jQuery 的 document.ready 快捷方式这一事实对于定义变量来说并不是一个真正的问题，就像变量（或函数）位于由匿名函数创建的闭包内一样

```
`function(){}` 
```

所以是的，这主要是为了避免污染全局命名空间。它还希望一旦超出范围，垃圾收集器*可能*能够收集其中的一些内容（因为它超出了范围）。

如果你想拥有一个全局变量，这并没有什么问题，只要尽量限制它们就可以了。如果您需要来自就绪块内部的一个，那么只需在外部定义它并在内部引用它。

```
var MyGlobalObj_guid52z = {};
$(function(){
 MyGlobalObj_guid52z.MyFunction = function(){
  //do what you want in here
 };
});
//and later you can do this
MyGlobalObj_guid52z.MyFunction(); 
```

# css - Firefox 18 中的过渡有什么问题

> ID：14371585
> 
> 赞同：0
> 
> 时间：2013-01-17T03:05:33.550
> 
> 标签：css, firefox, css-transitions

我有这个代码

```
nav {
   background-color:#600;
   padding:3px 0;
}
#menu {
   list-style: none;
   position: relative;
   text-align: center;
   z-index: 50;
}
#menu li {
   position: relative;
   display: inline-block;
   height: 40px;
   width:100px;
   max-width: 100%;
}
#menu li a {
   color: #000;
   text-decoration: none;
   display: block;
   position: relative;
   height: 40px;
   padding: 10px 15px 0;
   font-family: Berlin Sans FB;
   -webkit-transition: all 0.2s ease-in;
   -moz-transition: all 0.2s ease-in;
   -o-transition: all 0.2s ease-in;
   -ms-transition: all 0.2s ease-in;
}
#menu li span {
   width: 6px;
   z-index: -1;
   position: absolute;
   left: 0;
   top: 0;
   height: 100%;
   -webkit-transition: all 0.4s ease-in;
   -moz-transition: all 0.4s ease-in;
   -o-transition: all 0.4s ease-in;
   -ms-transition: all 0.4s ease-in;
   transition: all 0.4s ease-in;
}
#menu li:nth-of-type(1) span {background: green;}
#menu li:nth-of-type(2) span {background: red;}
#menu li:nth-of-type(3) span {background: #ff8400;}
#menu li:nth-of-type(4) span {background: purple;}
#menu li:nth-of-type(5) span {background: #49a7f3;}
#menu li:nth-of-type(6) span {background: yellow;}
#menu li:hover > span {min-width: 100%;}
#menu li a:hover {color: #fff;}
#menu li:hover {box-shadow: inset 0px 0px 20px 5px rgba(255,255,255,0.3);} 
```

[小提琴](http://jsfiddle.net/burn123/2SjHN/)

它在 Chrome、Safari 和 Firefox<18 中运行良好。它在 Internet Explorer 或 Firefox 18 中不起作用。在这个版本的 Firefox 中是否有一些改变改变了转换的工作方式？

我查看了这个问题和接受的答案，但没有意义
[为什么我的 CSS3 转换在 Firefox 中不起作用？](https://stackoverflow.com/questions/6084268/why-is-my-css3-transition-not-working-in-firefox)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:34:34.527

似乎将宽度更改为一个值，而不是`min-width`使其在 Firefox 18/Mac 中正常工作......

```
 #menu li:hover > span {
  width: 100%;
 } 
```

[小提琴更新](http://jsfiddle.net/2SjHN/6/)

正如本在您链接的问题中指出的那样，FF 似乎想要声明性值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:27:13.433

我现在没有可供我测试的 Firefox 18 版本，但是在查看了您的代码之后，我相信您缺少该`transition`属性的无前缀版本

[小提琴](http://jsfiddle.net/2SjHN/5/)

```
transition:all 0.2s ease-in; 
```

根据[我可以使用吗？](http://caniuse.com/#feat=css-transitions), Firefox 已经支持无前缀版本。

# iphone - xcode，表格边缘被编程创建的元素剪裁

> ID：14371590
> 
> 赞同：1
> 
> 时间：2013-01-17T03:06:12.083
> 
> 标签：iphone, xcode, layout, tableview

我有一张通过情节提要创建的表格，其边缘被一些以编程方式创建的图像和标签剪裁。如何使表格 Z 轴位于其他 UI 项的顶部？设置`Editor->Arrange->Send to front`不起作用，因为其他项目是以编程方式创建的并且发生在“之后”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:06:29.753

UIView 的 subviews 数组属性定义了它的子视图的 Z-index 排序。底部视图位于数组索引 0 处，顶部视图是 [subviews lastObject]。当您创建新对象时，它们会自动放置在此数组的末尾（因此在顶部）。

因此，您要确保该表在数组中比您以编程方式创建的对象晚。一种简单的组织方法是在情节提要中创建一个子视图作为图像和标签的容器，作为 tableview 的兄弟，并确保 tableview 在前面。

# css - 悬停时如何更改CSS中子菜单的颜色而不是父菜单的颜色？

> ID：14371595
> 
> 赞同：1
> 
> 时间：2013-01-17T03:06:25.663
> 
> 标签：css

我有一个使用脚本进行下拉的菜单。问题是我想设置菜单，这样当我将鼠标悬停在父级上时，它会改变我已经成功完成的颜色，但是当我将鼠标悬停在子菜单上时，我不希望父级更改颜色，只是子菜单独自的。因为每当我尝试将鼠标悬停在子菜单上时，父菜单也会自动悬停在我悬停的子菜单上。我认为因为子菜单是父菜单的一部分。

是否可以将它们的悬停效果分开，以便父菜单在单独悬停时改变颜色，但在其子菜单悬停时不改变？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:19:56.257

你可以做的是：

```
parent:hover child{
  background: ???
} 
```

当您将鼠标悬停在父母身上时，只需给孩子您选择的颜色

例如：http: [//jsfiddle.net/WL3LY/](http://jsfiddle.net/WL3LY/)

# c# - 将文件从 Android 上传到 Azure 中的 WCF

> ID：14371596
> 
> 赞同：0
> 
> 时间：2013-01-17T03:06:26.713
> 
> 标签：c#, java, android, wcf, azure

我正在尝试将文件从 android 上传到 azure，这让我发疯。我认为它在设置中有些东西，因为我已经确认了在 IIS 中使用 android 运行的代码。现在我可以在 c# 中访问该方法，但我的流在服务器上是空的。在 android 中，我收到 415 错误“类型不匹配”。非常感谢任何帮助！

这是我的 C# 测试客户端：

```
 ServiceReference1.PostImage2Request r = new ServiceReference1.PostImage2Request();
            MemoryStream memStream = new MemoryStream();                 
            using (FileStream fileStream = File.OpenRead("C:\\crap.png"))
            {
                memStream.SetLength(fileStream.Length);
                fileStream.Read(memStream.GetBuffer(), 0, (int)fileStream.Length);
            }
            r.image = memStream;
            ServiceReference1.RestServiceImplClient c = new ServiceReference1.RestServiceImplClient();
            ServiceReference1.PostImage2Response p = c.PostImage2(r); 
```

这是我的客户端配置：

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IRestServiceImpl" />
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://testapp.cloudapp.net/Service1.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IRestServiceImpl"
    contract="ServiceReference1.IRestServiceImpl" name="BasicHttpBinding_IRestServiceImpl" />
</client> 
```

这是我的安卓代码：

```
 String url = "https://testapp.cloudapp.net/Service1.svc/postimage2"; 

        String filepath = String.format(Environment.getExternalStorageDirectory() + "/ImageStorage/1.jpg");

        File f = new File(filepath);

        if (f.exists())
        {
            DefaultHttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(url);
            ResponseHandler<String> responseHandler = new BasicResponseHandler();

            //This is the new shit to deal with MIME
            MultipartEntity entity = new MultipartEntity();
            entity.addPart("image", new FileBody(f, "multipart/form-data"));

            httppost.setEntity(entity);

            try {
                String responseString = httpclient.execute(httppost, responseHandler); 
```

这是我的服务器代码：

```
 [OperationContract]
    [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "PostImage2")]
    string PostImage2(Stream image);

     public string PostImage2(Stream image)
    {
        MultipartParser parser = new MultipartParser(image);

        string content = "testing123";
        try
        {

            if (image == null)
                return "Image stream is null";

            // Read the stream into a byte array
            byte[] data = parser.ToByteArray(image);

            // Copy to a string for header parsing
            content = Encoding.UTF8.GetString(data);

            if (content == "")
                content = "There is no content";

            return content + " - dataLength: " + data.Length.ToString();
        }
        catch (Exception ex)
        {
            return "ERROR" + ex.Message + ex.InnerException + ex.StackTrace;
        }

    } 
```

这是我的服务器配置：

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="WCFServiceWebRole2.Service1Behavior">
      <!-- To avoid disclosing metadata information, set the value below to false before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_WCFServiceWebRole2" transferMode="Streamed" maxBufferSize="10485760" maxReceivedMessageSize="67108864">
      <readerQuotas maxDepth="64" maxStringContentLength="214748364" maxArrayLength="214748364"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service name="WCFServiceWebRole2.Service1" behaviorConfiguration="WCFServiceWebRole2.Service1Behavior">        
    <endpoint address="" binding="basicHttpBinding" contract="WCFServiceWebRole2.IRestServiceImpl"/>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:17:54.097

您使用多部分格式是否有某些特殊原因？通常这样做是因为您想在一个请求中发送多个内容。例如，一个文件和一些相关数据，或几个文件等。您似乎没有这样做，所以多部分格式只是混淆了这个问题。除非您有充分的理由进行多部分格式化，否则我会完全放弃它。让您的客户端发送原始字节，并让服务器代码直接从流中读取，而不使用`MultipartParser`.

另外，我注意到，一旦您获得图像数据，您将尝试将其读取为 UTF8 数据。我有理由确定这行不通，而且可能不是

# php - 如何在 localhost 和 Web 服务器上实现绝对 URL？

> ID：14371599
> 
> 赞同：5
> 
> 时间：2013-01-17T03:06:37.907
> 
> 标签：php, url, webserver, localhost, hyperlink

[对于具有绝对 URL 路径](https://stackoverflow.com/a/904066/1779823)的相对 URL，我通常使用以下链接做法：

```
<a href="/relative/path/to/document.html"> 
```

但我将实现**绝对 URL**：

```
<a href="http://example.com/relative/path/to/document.html"> 
```

更改它们对我来说不是问题（在 HTML 文档中自动查找和替换）。

但是，确保它可以**在我的本地主机**（支持 PHP）以及**网络上运行****的最佳实践是什么**？为什么？

 ****例如，这里是我如何做 PHP 包括：

```
<?php include($_SERVER['DOCUMENT_ROOT']."/relative/path/to/document.html"); ?> 
```

`href`对URL采用相同的方法？不同的 PHP 技术更好吗？很想知道为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T03:10:55.500

在本地和 Web 主机上保持相同的目录结构，并尽可能使用相对 URI 和路径。如果必须使用绝对 URI，请在某处定义一次，并在需要输出 URI 时使用常量，以避免使用查找和替换进行更改。

```
<?php
    define('ROOT_URI', 'http://example.com/subdirectory');
?>

<a href='<?php echo ROOT_URI; ?>/relative/path/to/document.html'> document </a> 
```

如果您有一个配置文件或其他一些只定义一次的包含文件，那就更容易了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T03:18:17.757

您可以只在 HTML href 中包含一个预定义的常量或变量。

例如

```
<?php
define("LOCAL", "http://localhost");
define("WEB", "http://foo.bar");
$environment = LOCAL; //change to WEB if you're live
?>
<a href="<?php echo $environment; ?>/relative/path/to/document.html"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T03:25:12.127

这一切都取决于您计划如何托管内容。PHP 不是一个糟糕的选择，因为有大量的托管公司支持 PHP。如果没有像 PHP 这样的脚本语言，您最好的选择是 javascript，但取决于您尝试使 URL 成为绝对的原因，这可能会破坏您的目的。

我建议的一件事是制作一个配置文件，因为您可能依赖也可能不依赖 $_SERVER['DOCUMENT_ROOT']。

说：config.php

```
<?php
define("HOST", "http://example.com");
// Whatever else you might need on all files. 
```

然后每个需要它的文件，把它放在顶部

```
<?php
include_once(dirname(__FILE__)."/config.php");

// Keep in mind this path is relative to current file, so if you are 3 sub-folder keep
// include_once(dirname(__FILE__)."/../../../config.php")
?>

...

<a href=<?php echo HOST;?>/relative/path/to/document.html">... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-12T20:57:01.703

您可以在 head 标签中添加以下行，而不是这样做。现在您可以提供与您的根目录相关的所有网址。现在，当您上传到服务器或在 localhost 上工作时。只需在此处更改网址。

```
<base href="http://mydomin.com/" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-01T10:10:00.383

这是一个适用于远程和本地服务器的解决方案，不需要更改域名：

```
$protocol = isset($_SERVER["HTTPS"]) ? 'https://' : 'http://';
$url_base = $protocol . $_SERVER['HTTP_HOST']; 
```

使用这两行代码，如果您更改域名，则无需更改代码，如果您在 HTTP 和 HTTPS 之间切换，也无需更改代码。随意更改您喜欢的变量名称。

因此，您的链接代码将如下所示：

```
<a href="<?php echo $url_base; ?>/relative/path/to/document.html">link</a> 
```

## 关于安全的重要更新：

但是，此解决方案存在安全风险。这是[一篇关于它](https://expressionengine.com/blog/http-host-and-server-name-security-issues)的文章。

> `$_SERVER['HTTP_HOST']`和`$_SERVER['SERVER_NAME']`变量可以通过在访问站点时发送不同的 Host 标头来更改：
> 
> `curl -H "Host: notyourdomain.com" http://yoursite.com/`
> 
> 这样做，任何使用`$_SERVER['HTTP_HOST']`或`$_SERVER['SERVER_NAME']`将使用 notyourdomain.com 的 URL。
> 
> 更进一步，假设攻击者使用您的电子邮件填写密码重置表单并更改主机标头。然后，密码重置电子邮件会将您定向到他们的网站。如果您关注域，那很好，但普通用户不会，这就是网络钓鱼攻击起作用的原因。

所以谨慎使用或最好避免使用它。

以下是链接文章中处理多种环境的方法：

> 在处理多个环境时，您可以使用 `$_SERVER['HTTP_HOST']`and `$_SERVER['SERVER_NAME']`，但只能检查您所在的域，然后手动设置正确的 URL。您可以使用一组有效域保持简单：
> 
> ```
> $domains = array('domain.com', 'dev.domain.com', 'staging.domain.com', 'localhost');
> if (in_array($_SERVER['HTTP_HOST'], $domains)) {
>     $domain = $_SERVER['HTTP_HOST'];
> }else {
>     $domain = 'localhost';
> } 
> ```

你也可以让它更短一点：

```
$domains = array('domain.com', 'dev.domain.com', 'staging.domain.com', 'localhost');
$domain = in_array($_SERVER['HTTP_HOST'], $domains) ? $_SERVER['HTTP_HOST'] : 'localhost'; 
```****

# mysql - 替换 wordpress WP_POSTS 表中 post_date 字段的年份（4 位）

> ID：14371603
> 
> 赞同：2
> 
> 时间：2013-01-17T03:07:22.007
> 
> 标签：mysql, sql, wordpress, sql-update

我想批量替换 wp_posts 表中字段 post_date 内的 4 位数年份。

有人可以显示应该执行的 SQL 语句吗？

我想从 更改`2011-02-06 17:05:07`为`2012-02-06 17:05:07`，所以只有从 2011 年更改为 2012 年的年份。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:08:41.107

```
UPDATE wp_posts 
SET post_date = DATE_ADD(post_date , INTERVAL 1 YEAR)
-- WHERE condition here 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/79c35/1)

资源

*   [DATE_ADD](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

# java - Android Visualizer 立体捕捉

> ID：14371608
> 
> 赞同：0
> 
> 时间：2013-01-17T03:07:56.140
> 
> 标签：java, android, audio, visualizer

我想使用 Visualizer 类以特定格式捕获系统范围的音频。（44.1khz，16 位，立体声）

我不知道如何请求将某种格式返回给我。我可以在姜饼和更早的时候使用 hack 来返回 16 位格式的音频，但仍然没有立体声。任何想法StackOverflow？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:20:20.067

正如[Visualizer 文档](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)所说：

> 它不是录音接口，只返回部分和低质量的音频内容。

和

> 可以捕获两种类型的音频内容表示：
> 
> *   波形数据：使用 getWaveForm(byte[]) 方法的 连续**8 位（无符号）单声道样本**
> *   频率数据：使用 getFft(byte[]) 方法的 8 位幅度 FFT

在不修改 Android 本身以便您可以获取例如 Visualizer 的输入缓冲区的情况下，我看不到您如何获得具有更高采样率/更多通道数的数据。

# ruby-on-rails - 在 ruby on rails 中创建后是否需要保存？

> ID：14371614
> 
> 赞同：1
> 
> 时间：2013-01-17T03:08:51.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3

创建后是否需要显式保存？如果是这样，新建和创建之间有什么区别？我注意到在以前的应用程序中我保存了错误的集合，但创建的集合仍然保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:12:48.987

不，您不需要在创建后保存。Create 为您“新建”和“保存”。

# ruby-on-rails-3 - 您如何在 AWS Elastic Beanstalk 应用程序上调用 db:seed？

> ID：14371615
> 
> 赞同：14
> 
> 时间：2013-01-17T03:08:56.683
> 
> 标签：ruby-on-rails-3, amazon-web-services, amazon-elastic-beanstalk

我知道您可以将任务作为每次部署的一部分运行，但我只想引导数据库一次。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-31T18:08:02.747

克里斯蒂安的答案很接近，但您还应该补充：

```
container_commands:
  seeddb:
    command: 'export HOME=/root; rake db:seed'
    leader_only: true 
```

这样数据库只能从 1 个 EC2 实例中播种，而不是同时从所有这些实例中播种。根据您的 EB 部署/版本，`export HOME`可能需要也可能不需要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-18T16:23:09.787

我使用此地址提供的信息创建了一个脚本，该脚本将在迁移后和每次部署后运行：[http ://www.emind.co/how-to/how-to-run-rake-dbseed-in-amazon-弹力豆茎](http://www.emind.co/how-to/how-to-run-rake-dbseed-in-amazon-elastic-beanstalk)

我更喜欢这种方法，以便我可以跟踪 EC2 实例上的文件。当我最初在我的旧服务器（运行 Linux <1.0.9）上部署它时，我没有任何问题。但是，我最近不得不将服务器机器升级到运行 Ruby 2.0 (Puma) 的 64 位 Amazon Linux 2014.03 v1.0.9 并且脚本开始失败。如果您使用不同的 Linux 版本，它可能会失败。

这里的关键是您的 rake 命令的**/usr/local/bin/**以使用正确的 rake。我直接从 /opt/elasticbeanstalk/hooks/appdeploy/pre/ 中找到的其他脚本中获取了这个：

```
#.ebextensions/db_seed.config
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/13_db_seed.sh":
    mode: "00755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      . /opt/elasticbeanstalk/containerfiles/envvars
      cd $EB_CONFIG_APP_ONDECK
      su -c "leader_only /usr/local/bin/rake db:seed" $EB_CONFIG_APP_USER ||
      echo "Rake task failed to run, skipping seeding."
      true 
```

应该注意的是，这个脚本仍然不正确，因为我没有运行“bundle exec rake”，如果您计划运行任何 rake 命令（这是 AWS 当前对其他脚本的功能请求），强烈建议您这样做。如果您希望所有脚本在“rake”之前运行 bundle exec，请查看此处发布的 .config 文件：[https ://github.com/alienfast/elastic-beanstalk](https://github.com/alienfast/elastic-beanstalk)

如果这仍然对您不起作用，我建议您使用 ssh 连接到正在运行您的应用程序的 EC2 实例之一，或者部署一个运行相同 Linux/Ruby 版本的新实例并导航到“/opt/elasticbeanstalk/hooks/appdeploy /pre/" 以查看其他脚本在做什么。

我希望其他人觉得这很有用！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-11T19:32:27.437

要在弹性 beanstalk 实例上执行命令，您可以设置自定义命令配置，这些配置将在您更新应用程序时运行。（[事实上​​，有一个完整的文档页面专门介绍您可以执行的不同类型的容器命令](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html)）。

1.  `.ebextensions`如果您的应用程序的根目录中还没有目录，请创建一个。
2.  您在此处输入的任何文件都将运行。只要它以“ `.config`”结尾就可以随意命名 - 我随意命名我的`seed.config`
3.  借用***hfogel***写的东西，你可以像这样在里面放一些东西：

    ```
    container_commands:
      01seed:
        command: rake db:seed 
    ```

4.  将此新代码添加到您的存储库中：`git add .`然后`git commit -m 'added seed config script'``git push`

5.  然后将此新代码推送到您的 aws eb 实例：`git aws.push`

要验证您的命令是否实际运行，请进入弹性 beanstalk 控制台并展开您的环境的详细信息，然后导航到`logs`选项卡，然后刷新日志并查看它们。在那里，只需执行一个`ctrl + f`for "seed"，直到您看到您的种子命令已运行。如果你没有在某个地方看到它，那么它就没有运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T01:38:21.000

我发现的唯一方法是通过 ssh 进入 ec2 实例并从 /var/app/current 手动运行“rake db:seed RAILS_ENV=production”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T15:02:27.993

这个问题被问到已经有一段时间了，所以也许你已经弄清楚了。无论如何，您可以在 .beanstalk 文件夹中添加一个名为（例如）seed.config 的文件。输入类似这样的内容，您的种子将运行：

```
container_commands:
  01seed:
    command: rake db:seed 
```

# c - SetWindowLongPtr() 如何传递消息？

> ID：14371616
> 
> 赞同：0
> 
> 时间：2013-01-17T03:09:13.470
> 
> 标签：c, windows, winapi, messages

我一直在尝试学习如何使用`SetWindowLongPtr()`和理解它，如下所示：

1.  您可以使用以下函数来获取当前消息并将其发送到自定义协议： `LONG_PTR Some_Ptr = SetWindowLongPtr(Some_Hwnd, GWLP_WNDPROC, (LONG_PTR)Custom_Proc);`

2.  创建自定义协议，示例如下：

    ```
    static LRESULT CALLBACK Custom_Proc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
    {
        switch (msg)
        {
            case WM_COMMAND:
                MessageBox(hwnd,"This is a window","OKAY",NULL);
                break;
            default:
                return CallWindowProc((WNDPROC)Some_Ptr, hwnd, msg, wParam, lParam);
                break;  
        }
        return CallWindowProc((WNDPROC)Some_Ptr, hwnd, msg, wParam, lParam);
    } 
    ```

我的问题如下：

1.  我在这里错过了什么吗？它是否正确？
2.  你在哪里打电话`SetWindowLongPtr()`？如果您需要特定情况，请想象`Some_Hwnd`在 WM_CREATE 中创建了一个按钮句柄。但我宁愿它对其他情况开放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:33:14.377

这称为“对窗口进行子分类”。这是一种标准的 Windows 编程技术，允许修改您无法修改其代码的窗口的行为。就像您案例中的内置 Button 类一样。

有几个细节，例如对窗口的特定实例进行子类化与全局子类化。还有超类，一种确保在创建窗口之前对其进行自定义的技术。[这在SDK 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633569%28v=vs.85%29.aspx#winproc_subclassing)和任何有关本机 winapi 编程的书籍中都有很好的描述。就像 Petzold 的“Programming Windows”一样，如果你想破解 winapi 代码，需要阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:58:45.913

我想你很困惑。根据文档，GWLP_WNDPROC 更改指定窗口的窗口过程，因此发送到该窗口的任何未来消息都将转到新过程。在我所知道的任何意义上，它都不会“获取当前消息”。

# octopus-deploy - 在八达通部署中隐藏密码

> ID：14371620
> 
> 赞同：4
> 
> 时间：2013-01-17T03:09:44.060
> 
> 标签：octopus-deploy

我正在将 Web 应用程序部署到 DEV、TEST 和 PROD 环境中。Octopus 服务器上的变量之一保存 appPool 用户和密码。

开发人员在 DEV 中编辑此值是有意义的，但他们应该无法看到 TEST 或 PROD 等的值。

看起来 Octopus 中定义的权限允许将“变量 - 视图”范围限定为项目，但不允许环境......

有没有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T00:50:06.430

This is a supported feature in recent versions of Octopus - please see this blog post for details:

[http://octopusdeploy.com/blog/environment-specific-variable-permission](http://octopusdeploy.com/blog/environment-specific-variable-permission)

Using this, you can set up a rule like "Developers cannot view or edit variables in the *Production* environment".

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T19:02:00.673

我认为您可以加密您的密码版本并在 octopus 变量中使用它，然后在您创建应用程序池时在 deploy.ps1 脚本中对其进行加密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T15:41:56.457

您可以为每个变量赋予其各自的环境相同的名称和范围，以获得您想要的内容。[http://docs.octopusdeploy.com/display/OD/Variables](http://docs.octopusdeploy.com/display/OD/Variables)

退后一步，您还可以重新访问针对 ACL、NTFS 权限、数据库访问等的 Windows Authentication\NTLM 集成安全性。例如，如果这是一个 IIS 应用程序池，您可以考虑授予 Windows 域计算机帐户访问权限（如果它正在使用网络服务）。请参阅本页底部[https://www.iis.net/learn/manage/configuring-security/application-pool-identities](https://www.iis.net/learn/manage/configuring-security/application-pool-identities)

# python - 如何将文件上传表单放入我的 Pyramid 应用程序？

> ID：14371627
> 
> 赞同：1
> 
> 时间：2013-01-17T03:10:35.770
> 
> 标签：python, file-upload, pyramid

我正在阅读[本教程](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/forms/file_uploads.html)，但这对我来说非常困惑。首先，在`store_mp3_view`函数中，声明`file`and`filename`时都引用了`filename`and `input_file`（前两行）。从上面的表格来看，似乎只有`file`一个输入（`filename`从未提及）。是`filename`自动输入吗？

另外，最后的循环是否需要将数据写入输出文件？对于我的应用程序，我希望在上传过程中启动一个单独的脚本来解析文件中的数据。我是否必须首先将数据放入输出文件然后解析它，还是仅用于示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:26:38.593

> 从上面的表格看来，只有文件是输入（从未提及文件名）。文件名是自动输入的吗？

正确，“文件名”属性应该在您从表单上传文件的任何时候都可用。

> 我是否必须首先将数据放入输出文件然后解析它，还是仅用于示例？

input_data 是一个文件对象，但您不需要在解析之前将 input_data 写入磁盘，这个例子恰好是在将它写入磁盘。

# ruby-on-rails - 路线存在，但出现错误

> ID：14371629
> 
> 赞同：0
> 
> 时间：2013-01-17T03:10:49.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, routes, cancan

我正在我的应用程序布局中尝试此代码。它是屏幕顶部的“用户导航”栏。

```
<%= link_to "My Profile", edit_profile_path, :class => "user_nav_button" %> 
```

我正进入（状态

> 没有路由匹配 {:action=>"edit", :controller=>"profiles"}

但是，rake 路线显示：

> edit_profile GET /profiles/:id/edit(.:format) 配置文件#edit

如果我直接转到**/profiles/1/edit**我的视图有效，并且 link_to 显示............

我认为这与没有正确获取参数有关......我正在使用 devise/cancan/rolify 并且 current_user.id 是我的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:15:06.977

该路径方法调用需要对象的实例。否则，Rails 不知道您要编辑哪个用户配置文件并且它不会猜测。

```
edit_profile_path(@user) # Where @user is an instance of a User model from your controller 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:19:00.077

如果您不希望 id 显示在地址栏上，您应该添加一个新路由到 /profile/edit 之类的东西，而不需要 id，并在控制器上获取 current_user 的 id

否则使用 edit_profile_path(@user) 就像上面所说的 patrickmcgraw

# ruby-on-rails - 向现有模型添加更多字段

> ID：14371633
> 
> 赞同：8
> 
> 时间：2013-01-17T03:11:09.003
> 
> 标签：ruby-on-rails

假设我已经这样做了：

```
rails generate model User name:string   email: string 
```

并且也这样做了：

```
bundle exec rake db:migrate 
```

现在我决定在 User 模型中添加第三个字段，例如地址。我该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T03:20:32.917

你可以这样做：

```
 rails g migration AddAddressToUser address:string
  rake db:migrate 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T03:20:25.297

您应该创建一个新的迁移：

```
rails generate migration AddAddressToUser 
```

然后在迁移中：

```
class AddAddressToUser < ActiveRecord::Migration
    def change
        add_column :users, :address, :string
    end
end 
```

然后`rake db:migrate`再次运行。我建议阅读[Rails 迁移](http://guides.rubyonrails.org/migrations.html)以及为什么它们对使用随时间变化的模型进行开发如此有益。

# c# - SQL Server Ce：数据集插入和刷新

> ID：14371638
> 
> 赞同：0
> 
> 时间：2013-01-17T03:12:25.693
> 
> 标签：c#, insert, dataset, sql-server-ce, refresh

我有这个查询用于将数据插入我的数据集中，但是在插入后什么都没有添加到数据库中！

我不确定它如何使它工作......

这是我的查询：

```
MyDataSet Rs = new MyDataSet();
MyDataSetTableAdapters.StudentTableAdapter da = new MyDataSetTableAdapters.StudentTableAdapter ();
MyLDataSet.StudentTable dt = newMyDataSet.StudentTable();

da.InsertData("Name", "TT", "C1222", DateTime.Now); 
```

期待听到一些建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:31:54.973

您应该调用 Update 方法来保存您的更改。

```
tableAdapter.Update(dataSet.TableName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:32:35.247

看起来您正在使用自定义类来插入数据（我不熟悉 InsertData），因此您需要发布额外的代码。话虽如此，下面是在 SQL Server CE 中插入数据的基本方法：

```
using(SqlCeConnection con = new SqlCeConnection(connStr)
{ 
    con.Open(); 
    SqlCeCommand qry = new SqlCeCommand("INSERT INTO TableName (ColName) VALUES (@ColName)", con);

    qry.Parameters.AddWithValue("@ColName", "ColName Value");
    qry.ExecuteNonQuery(); 
} 
```

祝你好运。

# visual-studio-2010 - 为什么有时我在 Visual Studio 中构建库时目标名称中有“d”？

> ID：14371641
> 
> 赞同：0
> 
> 时间：2013-01-17T03:12:38.480
> 
> 标签：visual-studio-2010, configuration, build, static-libraries

**当我使用目标名称构建某些库时，`X``Xd.lib``X.lib`**我想了解 Visual Studio (2010) 的这种行为**，结果变为****Debug build &** **for Release build**。我正在建造`CPPUnit`，如果这很重要的话

我检查了调试设置，但找不到“d”的来源。

*   （`TargetName`在配置属性 - 常规）是**`$(ProjectName)`**

*   （`TargetExtension`同一个地方）是**`.lib`**

从这里，我真的不知道从哪里来`d`。

我会很高兴解释/被指向正确的文档。

# xcode - PDF 查看器插件，Phonegap

> ID：14371642
> 
> 赞同：1
> 
> 时间：2013-01-17T03:12:46.213
> 
> 标签：xcode, pdf, cordova, phonegap-plugins

我正在为 phonegap 寻找一个好的 PDF 查看器（甚至可以是 $$），带有缩略图操作等。

到目前为止，我使用的是缺少功能的 childbrowser 插件。

有人知道一些插件/工具包/示例吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T17:23:43.907

我认为第二个不适合Phonegap。

一个有趣的替代方案是[PDF.js](https://github.com/mozilla/pdf.js)项目[demo](http://mozilla.github.io/pdf.js/web/viewer.html)。

是一个支持 HTML5 的 Javascript 查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T17:14:32.090

我找到了两个选择：

*   [http://pspdfkit.com/](http://pspdfkit.com/) （您必须为许可证付费）
*   [https://github.com/vfr/Reader](https://github.com/vfr/Reader)（免费）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T08:48:25.510

n Android，您可以使用 Android Intents 查看 pdf。这将向您显示手机中可用的所有 pdf 查看器。您可以选择任何并查看pdf

例如：

```
private void showPdfAndroid(String url) throws IOException {
    Intent intent = new Intent();
    intent.setAction(android.content.Intent.ACTION_VIEW);
    File file = new File(url);

    String extension = url.substring(url.lastIndexOf(".")+1);
    String type = "";

    if (extension.toLowerCase().equals("pdf")) {
        type = "application/pdf";
        Log.d("application/pdf", "application/pdf");
    } 

    intent.setDataAndType(Uri.fromFile(file), type);
    cordova.getActivity().startActivity(intent);

    Log.d("FileViewerPlugin", "View complete in" + url);

} 
```

# ajax - 我很难让 jquery 触发事件触发。我有一个网页使用 jquery ajax 调用来调用另一个 php 文件上的表单

> ID：14371643
> 
> 赞同：0
> 
> 时间：2013-01-17T03:12:46.537
> 
> 标签：ajax, events, dynamic, triggers

当通过 ajax 加载页面时，我很难让 jquery 触发事件触发。我有一个网页使用 jquery ajax 调用来调用另一个 php 文件上的表单

```
$('#orderFormPlace').load('orderForm.php'); 
```

在这个 PHP 页面上，有一个 change 事件附加到带有“checkMe”类的表单对象

这些表单对象是动态填充的，所以这就是我为此设置的

```
$( "table" ).delegate( ".checkMe", "change", function( e ) 
```

我需要开始工作的是以下代码来触发事件：

```
$("[id=vendor1]";).val($("[id=vendor1]").val()).focus().trigger("change"); 
```

谜团是......当我在同一个脚本上使用它时，它也可以完全按照我的意愿工作，但是当它被 AJAX 调用（jquery .load 函数）调用时，它不想工作。

为什么当我通过 AJAX 加载它时它不起作用？

我发现了这个，它声称有一种解决方法，但没有它声称拥有的演示或示例。关于使用 javascript document.getElementByID 和使用 jquery .index() 的一些事情。我试着摆弄它，但我不知道如何将 .index() 用作带有 javascript getElementByID 的选择器。

现在我想知道的是……这是什么魔法！？！？

非常感谢您的宝贵时间。

* * *

编辑：我通过硬编码代码解决了我的问题，而不是尝试触发更改来做同样的事情。但问题仍然存在，为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:35:26.143

我假设您正在生成 javascript 代码`orderForm.php`，您希望在执行 Ajax 请求时执行该代码。

我发现分离标记和脚本要容易得多 - 所以让文件`orderForm.php`只提供必要的标记，然后从您的主脚本中，将事件处理程序附加到（新加载的）元素。

如果您使用 Ajax 加载更多元素，您最终可能会遇到旧元素附加了事件处理程序而新元素没有附加的情况。要么清除所有它们并将它们重新分配给每个元素，要么使用[jQuery 的 live() 函数](http://api.jquery.com/live/)，或者最好考虑将事件处理程序仅分配给父元素并通过 event.target 检查最初寻址的元素，减少事件处理程序的总数很大（“事件委托”）。

另外，我对提供的代码片段有疑问：

```
$("[id=vendor1]";).val($("[id=vendor1]").val()).focus().trigger("change"); 
```

让我们摆脱`;`并替换`id=`为`#`：

```
$("#vendor1").val( $("#vendor1").val() ).focus().trigger("change"); 
```

为什么将值设置为`val`值`val`？

# ios - BLE4.0更改外设名称

> ID：14371644
> 
> 赞同：0
> 
> 时间：2013-01-17T03:12:47.940
> 
> 标签：ios

我正在为 iOS 开发 BLE4.0 应用程序，连接到外围设备。然后我想更改外围设备的名称，所以我使用 writeValue:forCharacteristic:type 方法，出现错误，描述：“此操作不允许指定的 UUID。 " characteristicUUID 是“0x2A00”，代表“http://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.gap.device_name.xml”。加密狗可以更改外围设备的名称。我不知道为什么会发生？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:38:20.610

我理解您的问题表明您正在尝试写入特征“0x2A00”，这是通用访问服务“0x1800”中的只读特征。如果是这种情况，则“不允许操作”消息似乎是正确的。

# python - 分数在这里不起作用？- Python

> ID：14371648
> 
> 赞同：0
> 
> 时间：2013-01-17T03:13:04.657
> 
> 标签：python, variables, python-3.3

我试图在这个游戏中保持分数，所以我设置了一个分数变量，每次正确回答答案时，它会增加 + 1 分，如果你得到不正确的答案，它会扣除一分。当我最后打印分数时，它仍然等于 0。

```
score = 0
q1answer = ("metallica", "slayer", "megadeth", "anthrax")

answerinput = str(input("name one of the 'Big Four' metal bands'"))

if answerinput.lower() in q1answer:
    print ("You got the right answer!")
    score + 1

else:
    print ("That is the wrong answer...")
    score - 1
print (score) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:52:11.540

你`score + 1`只是一个表达式，不会改变`score`变量的实际值。这与说的基本相同`0 + 1`，因为python只会获取`score`并添加`1`到它收到的值，而不是变量本身。

要解决此问题，您需要重新分配`score`以匹配它的当前值加一：`score = score + 1`或更简单的版本：`score += 1`。而要删除分数，只需使用减号：`score = score - 1`或更简单`score -= 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:14:01.357

`score + 1`并且`score - 1`只是表达式；他们实际上什么都不做。要实际更改`score`，请使用`score += 1`and `score -= 1`。

（另外，使用一套！花括号！如前所述`;)`）

# c# - MouseDoubleClick 事件在后台打开新窗口

> ID：14371649
> 
> 赞同：0
> 
> 时间：2013-01-17T03:13:32.533
> 
> 标签：c#, wpf

我在`MouseDoubleClick`定义中定义了一个事件处理程序`ListView.ItemContainerStyle`，如下所示：

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <EventSetter Event="MouseDoubleClick" Handler="MyClass_MouseDoubleClick" />
    </Style>
</ListView.ItemContainerStyle> 
```

事件处理程序定义为：

```
private void MyClass_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    ListViewItem listViewItem = (ListViewItem)sender;
    MyClass senderItem = (MyClass)(listViewItem.Content);
    EditFile editFileWindow = new EditFile(senderItem);
    editFileWindow.Show();
} 
```

这可以按预期工作，但新窗口在弹出时会显示在我的主应用程序窗口后面。加载后如何将焦点设置到新窗口？

我尝试`this.Focus()`在窗口的类构造函数的末尾添加，但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:20:56.343

试试这个：

```
editFileWindow.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T13:18:23.573

通过调用 ShowDialog() 您正在阻塞主 UI 线程。

尝试通过 Dispatcher.BeginInvoke 调用它，如下所示：

```
 this.Dispatcher.BeginInvoke( new Action( () => editFileWindow.Show())); 
```

# node.js - 如何在本地测试在 Heroku 中运行的 node.js + mongodb 应用程序？

> ID：14371656
> 
> 赞同：4
> 
> 时间：2013-01-17T03:14:06.893
> 
> 标签：node.js, mongodb, heroku

我知道如何使用 本地运行常规 node.js 应用程序`foreman`，但是当我的应用程序链接到 Heroku 中的 MongoHQ 数据库时，连接是 heroku 环境的一部分。

有没有办法可以在本地机器上测试应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:45:30.897

Foreman 将加载`.env`应用程序文件中指定的环境变量。它位于[配置和配置变量](https://devcenter.heroku.com/articles/config-vars)开发中心文章的[本地设置](https://devcenter.heroku.com/articles/config-vars#local-setup)部分。Heroku toolbelt有一个[插件](https://github.com/ddollar/heroku-config)，可以让你从正在运行的应用程序中提取配置，如果这是你想要使用的（你可能还想考虑在本地运行 MongoDB 服务器）：

```
$ heroku plugins:install git://github.com/ddollar/heroku-config.git
$ heroku config:pull --overwrite --interactive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:38:35.400

您是否尝试`foreman`在本地计算机上安装？查看`Procfile`并查看它管理哪些进程。Heroku 机器与 MongoHQ 的连接可能没有什么特别之处。只需在项目中查找 mongohq 即可，您可能会找到一些用于数据库连接的配置。

# python - 方法 __setitem__ 上的 AttributeError

> ID：14371659
> 
> 赞同：1
> 
> 时间：2013-01-17T03:14:22.757
> 
> 标签：python, attributeerror

我有以下代码：

```
class VectorN(object):
    def __init__(self, param):
        if isinstance(param, int):
            self.dim = param
            self.data = [0.0] * param

        elif isinstance(param, tuple):
            self.dim = 3
            self.data = param
        #else:
            #raise TypeError("You must pass an int or sequence!")

    def __str__(self):
        return "<Vector" + str(self.dim) + ": " + str(self.data) + ">"

    def __len__(self):
        return len(self.data)

    def __setitem__(self, key, item): 
        self.data[key] = item 
```

现在，当我尝试`__setitem__`使用以下代码调用该方法时，

```
w = VectorN((1.2, "3", 5))
w.setitem(0, 9.9)
print(z) 
print(w) 
print(z[0])
print(len(v)) 
```

它给了我：

> AttributeError：“VectorN”对象没有属性“setitem”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:38:52.847

那是因为[`__setitem__`](http://docs.python.org/2/reference/datamodel.html#object.__setitem__)是一种[神奇的方法](https://duckduckgo.com/?q=)。这是一个允许您创建[容器对象](http://docs.python.org/2/reference/datamodel.html#emulating-container-types)的特殊功能。

因为它是一种神奇的方法，所以您不需要直接通过它的名称来调用它——而是 Python 语言的内置方面控制它的行为。请注意，它仍然只是一种普通方法；您*可以*按名称调用它，但语法将是`w.__setitem__(0, 9.9)`.

通过定义`__setitem__`，您可以改为设置一个值，如下所示`w[0] = 9.9`：

* * *

`__setitem__`，来自[Python 魔术方法指南](https://duckduckgo.com/?q=)：

> 使用符号 self[nkey] = value 定义分配项目时的行为。

# c# - 是否有一种流畅的 NHibernate 方法来索引所有外键而不对其进行编码？

> ID：14371660
> 
> 赞同：2
> 
> 时间：2013-01-17T03:14:28.523
> 
> 标签：c#, nhibernate, fluent-nhibernate, conventions

这可能吗，也许有一个约定？我有数百个表和无数的关系，我希望所有外键都被索引，我不想不得不编码。

**更新**

在@Vadim 的帮助下，我能够做到这一点：

```
var fkIndexConvention = ConventionBuilder.Reference.Always(x =>
    x.Index(string.Format("ix{0}_{1}_{2}", x.Class.Name, x.Property.Name,
    Guid.NewGuid().ToString().Replace("-", string.Empty)))); 
```

...然后将其添加到我的流利配置中：

```
var fluent = Fluently.Configure(config)
    .Mappings(m => m.FluentMappings.Conventions.Add(fkIndexConvention)); 
```

......世界变得更美好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:26:38.603

我假设您正在谈论使用 hbm2ddl 工具和 SchemaExport。

您需要做的就是设置一个参考约定。由于`IManyToOneInstance`隐藏了外键，您应该能够将实例转换为`IManyToOneInspector`.

```
ConventionBuilder.Reference.Always(x => x.Index(((IManyToOneInspector)x).ForeignKey + "Index")); 
```

# excel - VB/A：将数据从 Excel 流式传输到 PowerPoint

> ID：14371661
> 
> 赞同：2
> 
> 时间：2013-01-17T03:14:28.923
> 
> 标签：excel, vba, powerpoint

此图显示了最终产品的外观： [![图片](../Images/2062e40b7f0d597863614456d54cb916.png)](https://i.stack.imgur.com/XVjBw.png)

1.  有一个带有行和列的 Excel 电子表格。行是国家。列是数据。但是，我只对 excel 电子表格的一列感兴趣。

2.  如图所示，一个箭头指向国家，然后用“1”创建该表（1 只是一个测试，但显然它们是不同的数字或 Excel 电子表格中的任何数字）。

3.  我遇到以下问题：

    一种。我想创建一个比例：如果列中的整数> 80，它将是绿色背景。如果它在 65-79 之间，那么它将是橙色的。如果低于 65，则为红色。正如你在我展示的图片中看到的那样，桌子的所有背景都是绿色的。我什至不知道它为什么是绿色的，也不知道它是如何变绿的。所以这是一个问题。

4.  某些国家工作不正常。没有形成箭头，表格只是随机出现在地图上的随机位置。

这是我的代码：

```
Option Explicit

Public Const wkWhite            As Long = 16777215
Public Const wkBlack            As Long = 0
Public Const wkRed              As Long = 255
Public Const wkYellow           As Long = 65535
Public Const wkBlue             As Long = 13382451

Public Const wkColor_SCI        As Long = 10027161
Public Const wkColor_SCO        As Long = 16737792
Public Const wkColor_FIN        As Long = 65280
Public Const wkColor_BUY        As Long = 39270
Public Const wkColor_SPM        As Long = 39423
Public Const wkColor_QFS        As Long = 16776960

Public Const wkColor_DMD        As Long = 10027161
Public Const wkColor_SUP        As Long = 16737792
Public Const wkColor_SEQ        As Long = 65280
Public Const wkColor_IPO        As Long = 39270
Public Const wkColor_SOP        As Long = 39423
Public Const wkColor_OTH        As Long = 16776960

Public Const wkDeployedCol      As Long = 16737792
Public Const wkPartialCol       As Long = 39423
Public Const wkMatureCol        As Long = 65280

Public Const wkColor_EU         As Long = 13382451
Public Const wkColor_AM         As Long = 8421504
Public Const wkColor_AP         As Long = 153

Public Const wkLarg             As Single = 16
Public Const wkHaut             As Single = 12

Public Const wkSheet            As String = "Live Sites"
    '

Sub GenerateMap()

    DrawMap "Y"

End Sub

Sub UpdateMap()

    DrawMap "N"

End Sub

Sub DrawMap(ByVal parMode As String)

    Dim wkCnx               As ADODB.Connection
    Dim wkRS                As ADODB.Recordset
    Dim wkSQL               As String
    Dim wkFile              As String
    Dim wkActif             As String
    Dim wkSite              As String
    Dim i                   As Integer
    Dim j                   As Integer

    Dim wkColumn_Site       As Integer
    Dim wkColumn_Region     As Integer
    Dim wkColumn_Slide      As Integer
    Dim wkColumn_Left       As Integer
    Dim wkColumn_Top        As Integer
    Dim wkColumn_XBoard     As Integer
    Dim wkColumn_YBoard     As Integer
    Dim wkColumn_XSite      As Integer
    Dim wkColumn_YSite      As Integer
    Dim wkColumn_Activity   As Integer

    Dim wkColumn_SCI        As Integer
    Dim wkColumn_SCO        As Integer
    Dim wkColumn_FIN        As Integer
    Dim wkColumn_BUY        As Integer
    Dim wkColumn_SPM        As Integer
    Dim wkColumn_QFS        As Integer

    Dim wkColumn_DMD        As Integer
    Dim wkColumn_SUP        As Integer
    Dim wkColumn_SEQ        As Integer
    Dim wkColumn_IPO        As Integer
    Dim wkColumn_SOP        As Integer
    Dim wkColumn_OTH        As Integer

    Dim wkColumn_SOP_Plus   As Integer

    ScreenUpdating = False

    If parMode = "Y" Then CleanMap

    With Application.ActivePresentation
        wkFile = Replace(.Path & "\" & .Name, ".pptm", ".xlsx")
    End With
    Set wkCnx = New ADODB.Connection
    With wkCnx
        .Provider = "Microsoft.ACE.OLEDB.12.0"
        .ConnectionString = "Data Source=" & wkFile & ";"
        .Properties("Extended Properties") = "Excel 12.0 Xml;HDR=NO;IMEX=1;"
        .Open
    End With

    Set wkRS = New ADODB.Recordset
    wkSQL = "SELECT * FROM [" & wkSheet & "$] WHERE F1<>'TITLE';"
    Set wkRS = wkCnx.Execute(wkSQL)

    For i = 0 To wkRS.Fields.Count - 1
        Select Case wkRS.Fields(i)
            Case "Site"
                wkColumn_Site = i
            Case "Region"
                wkColumn_Region = i
            Case "Slide"
                wkColumn_Slide = i
            Case "Top"
                wkColumn_Top = i
            Case "Left"
                wkColumn_Left = i
            Case "X_Board"
                wkColumn_XBoard = i
            Case "Y_Board"
                wkColumn_YBoard = i
            Case "X_Site"
                wkColumn_XSite = i
            Case "Y_Site"
                wkColumn_YSite = i
            Case "Activity"
                wkColumn_Activity = i
            Case "D-SCI"
                wkColumn_SCI = i
            Case "D-SCO"
                wkColumn_SCO = i
            Case "D-FIN"
                wkColumn_FIN = i
            Case "D-BUY"
                wkColumn_BUY = i
            Case "D-SPM"
                wkColumn_SPM = i
            Case "D-QFS"
                wkColumn_QFS = i
            Case "D-DMD"
                wkColumn_DMD = i
            Case "D-SUP"
                wkColumn_SUP = i
            Case "D-SEQ"
                wkColumn_SEQ = i
            Case "D-IPO"
                wkColumn_IPO = i
            Case "D-SOP"
                wkColumn_SOP = i
            Case "D-OTH"
                wkColumn_OTH = i
            Case "Self-Assessment Score (%)"
                wkColumn_SOP_Plus = i
            Case "External Audit Score (%)"
                wkColumn_SOP_Plus = i
        End Select
    Next i
    wkRS.MoveNext

    Progress.Show vbModeless

    Do While Not wkRS.EOF

        If IsNull(wkRS.Fields(wkColumn_Site)) Then
            wkSite = "site code unknown"
        Else
            wkSite = wkRS.Fields(wkColumn_Site)
        End If
        Progress.SiteTxt.Caption = wkSite

        wkActif = "Y"
        If wkRS.Fields(wkColumn_Slide) = 0 Then
            wkActif = "N"
        Else
            If parMode <> "Y" Then
                If UCase(wkRS.Fields(wkColumn_Activity)) <> "Y" Then
                    wkActif = "N"
                Else
                    For j = ActivePresentation.Slides.Count To 1 Step -1
                        For i = ActivePresentation.Slides(j).Shapes.Count To 1 Step -1
                            If (ActivePresentation.Slides(j).Shapes(i).Name Like wkRS.Fields(wkColumn_Site) & "_*") Then
                                ActivePresentation.Slides(j).Shapes(i).Delete
                            End If
                         Next i
                    Next j
                End If
            End If
        End If
        If wkActif = "Y" Then
'S&OP+ board
            DrawBoard "Self-Assessment Score (%)", _
                      wkRS.Fields(wkColumn_Slide), wkRS.Fields(wkColumn_Left), wkRS.Fields(wkColumn_Top), _
                      wkRS.Fields(wkColumn_Region), wkRS.Fields(wkColumn_Site), _
                      "Self-Assessment Score (%)", "", "", "", "", "", _
                      wkRS.Fields(wkColumn_SOP_Plus), "", "", "", "", "", _
                      wkRS.Fields(wkColumn_XBoard), wkRS.Fields(wkColumn_YBoard), wkRS.Fields(wkColumn_XSite), wkRS.Fields(wkColumn_YSite)
        End If
        wkRS.MoveNext
    Loop
    Unload Progress

    wkRS.Close
    Set wkRS = Nothing

    wkCnx.Close
    Set wkCnx = Nothing

    ScreenUpdating = True

End Sub

Sub DrawBoard(ByVal parProgram As String, _
              ByVal parSlide As Integer, _
              ByVal parLeft As Single, _
              ByVal parTop As Single, _
              ByVal parRegion As String, _
              ByVal parSite As String, _
              ByVal parAreaLogo1 As String, _
              ByVal parAreaLogo2 As String, _
              ByVal parAreaLogo3 As String, _
              ByVal parAreaLogo4 As String, _
              ByVal parAreaLogo5 As String, _
              ByVal parAreaLogo6 As String, _
              ByVal parAreaStatus1 As String, _
              ByVal parAreaStatus2 As String, _
              ByVal parAreaStatus3 As String, _
              ByVal parAreaStatus4 As String, _
              ByVal parAreaStatus5 As String, _
              ByVal parAreaStatus6 As String, _
              ByVal parXBoard As Single, _
              ByVal parYBoard As Single, _
              ByVal parXSite As Single, _
              ByVal parYSite As Single)

'draws the scoreboard of the site

    Dim wkColRegion As Long

'functional area frame
    If parProgram = "Self-Assessment Score (%)" Then
        DrawBoardArea parSlide, parLeft, parTop, parSite, parAreaLogo1, parAreaStatus1
    Else
        DrawBoardArea parSlide, parLeft, parTop, parSite, parAreaLogo1, parAreaStatus1
        DrawBoardArea parSlide, parLeft, parTop, parSite, parAreaLogo2, parAreaStatus2
        DrawBoardArea parSlide, parLeft, parTop, parSite, parAreaLogo3, parAreaStatus3
        DrawBoardArea parSlide, parLeft, parTop, parSite, parAreaLogo4, parAreaStatus4
        DrawBoardArea parSlide, parLeft, parTop, parSite, parAreaLogo5, parAreaStatus5
        DrawBoardArea parSlide, parLeft, parTop, parSite, parAreaLogo6, parAreaStatus6
    End If

'site frame
    wkColRegion = wkRed
    If "External Audit Score (%)" < 60 Then

    Select Case UCase(parRegion)
        Case "EU"
            wkColRegion = wkColor_EU
        Case "AM", "NA", "LA"
             wkColRegion = wkColor_AM
        Case "AP"
             wkColRegion = wkColor_AP
    End Select

    ActiveWindow.View.GotoSlide Index:=parSlide
    ActiveWindow.Selection.SlideRange.Shapes.AddShape(msoShapeRectangle, parLeft, parTop + 2 * wkHaut, 3 * wkLarg, wkHaut).Select
    With ActiveWindow.Selection.ShapeRange
        .Name = parSite & "_" & parProgram & "_Site"
        .Fill.ForeColor.RGB = wkColRegion
        .Fill.BackColor.RGB = wkWhite
        .Fill.TwoColorGradient msoGradientVertical, 3
    End With

    ActiveWindow.Selection.ShapeRange.TextFrame.TextRange.Characters(Start:=1, Length:=0).Select
    With ActiveWindow.Selection.ShapeRange.TextFrame
        .MarginBottom = 0
        .MarginTop = 0
        .MarginLeft = 0
        .MarginRight = 0
        .HorizontalAnchor = msoAnchorCenter
        .VerticalAnchor = msoAnchorMiddle
    End With
    With ActiveWindow.Selection.TextRange
        .Text = parSite
        With .Font
            .Name = "Times New Roman"
            .Size = 8
            .Bold = msoTrue
        End With
    End With

'group area frames & site frame
    If parProgram = "Self-Assessment Score (%)" Then
        ActiveWindow.Selection.SlideRange.Shapes.Range(Array(parSite & "_" & parAreaLogo1, _
                                                             parSite & "_" & parProgram & "_Site")).Select
    Else
        ActiveWindow.Selection.SlideRange.Shapes.Range(Array(parSite & "_" & parAreaLogo1, _
                                                             parSite & "_" & parAreaLogo2, _
                                                             parSite & "_" & parAreaLogo3, _
                                                             parSite & "_" & parAreaLogo4, _
                                                             parSite & "_" & parAreaLogo5, _
                                                             parSite & "_" & parAreaLogo6, _
                                                             parSite & "_" & parProgram & "_Site")).Select
    End If
    ActiveWindow.Selection.ShapeRange.Group.Select
    ActiveWindow.Selection.ShapeRange.Select
    ActiveWindow.Selection.ShapeRange.Name = parSite & "_" & parProgram & "_Board"

'line
    If (parXSite <> 0) And (parYSite <> 0) Then
        ActiveWindow.Selection.SlideRange.Shapes.AddLine(parLeft + parXBoard, parTop + parYBoard, parXSite, parYSite).Select
        With ActiveWindow.Selection.ShapeRange
            .Line.ForeColor.RGB = wkBlue
            .Line.Weight = 1.5
            .ZOrder msoSendBackward
            .Select
            .Name = parSite & "_" & parProgram & "_Line"
        End With
    End If

    DoEvents

End Sub

Sub DrawBoardArea(ByVal parSlide As Integer, _
                  ByVal parLeft As Single, _
                  ByVal parTop As Single, _
                  ByVal parSite As String, _
                  ByVal parAreaLogo As String, _
                  ByVal parAreaStatus As String)

'draws the functional area status (text and color)

    Dim wkAreaLeft  As Single
    Dim wkAreaTop   As Single
    Dim wkCol       As Long
    Dim wkTxt       As String
    Dim wkColTxt    As Long
    Dim wkMonth     As String
     Dim x As Integer

    ActiveWindow.View.GotoSlide Index:=parSlide

    Select Case parAreaLogo
        Case "SCI", "BUY", "DMD", "IPO", "Self-Assessment Score (%)"
            wkAreaLeft = parLeft
        Case "SCO", "SPM", "SUP", "SOP"
             wkAreaLeft = parLeft + wkLarg
        Case "FIN", "QFS", "SEQ", "OTH"
             wkAreaLeft = parLeft + 2 * wkLarg
    End Select

    Select Case parAreaLogo
        Case "SCI", "SCO", "FIN", "DMD", "SUP", "SEQ", "Self-Assessment Score (%)"
            wkAreaTop = parTop
        Case "BUY", "SPM", "QFS", "IPO", "SOP", "OTH"
             wkAreaTop = parTop + wkHaut
    End Select

    If parAreaLogo = "Self-Assessment Score (%)" Then
        ActiveWindow.Selection.SlideRange.Shapes.AddShape(msoShapeRectangle, wkAreaLeft, wkAreaTop, 3 * wkLarg, 2 * wkHaut).Select
    Else
        ActiveWindow.Selection.SlideRange.Shapes.AddShape(msoShapeRectangle, wkAreaLeft, wkAreaTop, wkLarg, wkHaut).Select
    End If
    ActiveWindow.Selection.ShapeRange.Name = parSite & "_" & parAreaLogo
    ActiveWindow.Selection.ShapeRange.TextFrame.TextRange.Characters(Start:=1, Length:=0).Select
    With ActiveWindow.Selection.ShapeRange.TextFrame
        .MarginBottom = 0
        .MarginTop = 0
        .MarginLeft = 0
        .MarginRight = 0
        .HorizontalAnchor = msoAnchorCenter
        .VerticalAnchor = msoAnchorMiddle
    End With

    wkTxt = parAreaStatus
    wkCol = wkWhite
    wkColTxt = wkBlack

    If parAreaLogo = "Self-Assessment Score (%)" Then
        Select Case UCase(parAreaStatus)

            Case "x"
                wkCol = wkWhite
            Case "TBC"
                wkCol = wkRed
                wkColTxt = wkWhite
            Case "PLANNED"
                wkCol = wkYellow
            Case "DEPLOYED"
                wkCol = wkDeployedCol
                wkColTxt = wkWhite
            Case "PARTIAL"
                wkCol = wkPartialCol
            Case "MATURE"
                wkCol = wkMatureCol
            Case Else
                wkCol = wkMatureCol
        End Select
        wkTxt = UCase(parAreaStatus)
    Else
        Select Case UCase(parAreaStatus)
            Case "N/A"
                wkCol = wkWhite
                wkTxt = UCase(parAreaStatus)
            Case "TBC"
                wkCol = wkRed
                wkTxt = parAreaLogo
                wkColTxt = wkWhite
            Case "PLANNED"
                wkCol = wkYellow
                wkTxt = parAreaLogo
            Case Else
                If UCase(Left(wkTxt, 1)) = "P" Then
                    wkCol = wkYellow
                    wkTxt = LTrim(Mid(wkTxt, 2))
                Else
                    Select Case parAreaLogo
                        Case "SCI"
                            wkCol = wkColor_SCI
                            wkColTxt = wkWhite
                        Case "SCO"
                            wkCol = wkColor_SCO
                            wkColTxt = wkWhite
                        Case "FIN"
                            wkCol = wkColor_FIN
                        Case "BUY"
                            wkCol = wkColor_BUY
                            wkColTxt = wkWhite
                        Case "SPM"
                            wkCol = wkColor_SPM
                        Case "QFS"
                            wkCol = wkColor_QFS
                        Case "DMD"
                            wkCol = wkColor_DMD
                            wkColTxt = wkWhite
                        Case "SUP"
                            wkCol = wkColor_SUP
                            wkColTxt = wkWhite
                        Case "SEQ"
                            wkCol = wkColor_SEQ
                        Case "IPO"
                            wkCol = wkColor_IPO
                            wkColTxt = wkWhite
                        Case "SOP"
                            wkCol = wkColor_SOP
                        Case "OTH"
                            wkCol = wkColor_OTH
                    End Select
                End If
                wkMonth = Mid(wkTxt, 7, 2)
                If wkMonth = "00" Then
                    wkTxt = Mid(wkTxt, 1, 4)
                Else
                    wkTxt = Mid(wkTxt, 3, 2) & "/" & Mid(wkTxt, 7, 2)
                End If
        End Select
    End If

    ActiveWindow.Selection.ShapeRange.Fill.ForeColor.RGB = wkColTxt
    With ActiveWindow.Selection.TextRange
        .Text = wkTxt
        With .Font
            .Name = "Times New Roman"
            .Size = 12
            .Color = wkColTxt
        End With
    End With

End Sub

Sub CleanMap()

    Dim i As Integer
    Dim j As Integer

    For j = ActivePresentation.Slides.Count To 1 Step -1
        For i = ActivePresentation.Slides(j).Shapes.Count To 1 Step -1
            If (ActivePresentation.Slides(j).Shapes(i).Name Like "*_Board") _
                        Or (ActivePresentation.Slides(j).Shapes(i).Name Like "*_Line") Then
                ActivePresentation.Slides(j).Shapes(i).Delete
            End If
        Next i
    Next j

End Sub

Sub LocateIt()

    If ActiveWindow.Selection.Type = 0 Then
        MsgBox "No shape selected"
        Exit Sub
    End If

    With ActiveWindow.Selection.ShapeRange(1)
        MsgBox Int(.Left) & " - " & Int(.Top), vbInformation + vbOKOnly, .Name
    End With

End Sub

Sub NameIt()

    Dim sResponse As String

    If ActiveWindow.Selection.Type = 0 Then
        MsgBox "No shape selected"
        Exit Sub
    End If

    With ActiveWindow.Selection.ShapeRange(1)
        sResponse = InputBox("Rename this shape to ...", "Rename Shape", .Name)
        Select Case sResponse
            ' blank names not allowed
            Case Is = ""
                Exit Sub
            ' no change?
            Case Is = .Name
                Exit Sub
            Case Else
                On Error Resume Next
                .Name = sResponse
                If Err.Number <> 0 Then
                    MsgBox "Unable to rename this shape"
                End If
        End Select
    End With

End Sub

Sub SetToolBar()

    Dim wkToolBar As CommandBar
    Dim wkButton As CommandBarButton

    Set wkToolBar = CommandBars.Add(Name:="Map", Temporary:=True)
    With CommandBars("Map")
        .Visible = True
        .Left = 100
        .Top = 150
    End With

    Set wkButton = wkToolBar.Controls.Add(Type:=msoControlButton, Temporary:=True)
    With wkButton
        .Caption = "GenerateMap"
        .OnAction = "GenerateMap"
        .Style = msoButtonCaption
    End With

    Set wkButton = wkToolBar.Controls.Add(Type:=msoControlButton, Temporary:=True)
    With wkButton
        .Caption = "UpdateMap"
        .OnAction = "UpdateMap"
        .Style = msoButtonCaption
    End With

    Set wkButton = wkToolBar.Controls.Add(Type:=msoControlButton, Temporary:=True)
    With wkButton
        .Caption = "CleanMap"
        .OnAction = "CleanMap"
        .Style = msoButtonCaption
    End With

    Set wkButton = wkToolBar.Controls.Add(Type:=msoControlButton, Temporary:=True)
    With wkButton
        .Caption = "LocateIt"
        .OnAction = "LocateIt"
        .Style = msoButtonCaption
    End With

    Set wkButton = wkToolBar.Controls.Add(Type:=msoControlButton, Temporary:=True)
    With wkButton
        .Caption = "NameIt"
        .OnAction = "NameIt"
        .Style = msoButtonCaption
    End With

    SlideShowWindows(Index:=1).View.Exit
    ActiveWindow.View.GotoSlide Index:=1

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:35:26.043

我已经想通了。更重要的是重命名一些变量等。老话题；也不再从事这个项目。谢谢大家。

另外，很抱歉在开始时错误地发布它。这是我的第一个话题。

# android - 如何使用phonegap在SD卡中创建文件

> ID：14371664
> 
> 赞同：5
> 
> 时间：2013-01-17T03:15:01.500
> 
> 标签：android, cordova

如何使用 phonegap 在 Android Sdcard 中创建文件和保存文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T06:03:36.703

```
// create a file writer object
function CreateFileWriter()
{
    // request the file system object
window.requestFileSystem( LocalFileSystem.PERSISTENT, 0, OnFileSystemSuccess,fail);
}

function OnFileSystemSuccess( pFileSystemObj )
{
    console.log( pFileSystemObj.name );
    console.log( pFileSystemObj.root.name );

    pFileSystemObj.root.getFile( "file_name.txt", {create: true, exclusive: false}, OnFileGetSuccess, fail);
}

function OnFileGetSuccess( pFileEntryObj )
{
pFileEntryObj.createWriter( function(pWriterObj){ 
    gWriterObj  = pWriterObj; 
    }, fail );
}

function fail(evt)
{
    console.log(evt.target.error.code);
} 
```

这里 create file writer 方法提供了文件系统的句柄。在成功函数中，我们得到名为“file_name.txt”的文件，如果存在则打开，否则创建。

# c# - .net 命名空间问题

> ID：14371667
> 
> 赞同：-1
> 
> 时间：2013-01-17T03:15:13.243
> 
> 标签：c#, .net

很抱歉我没有把问题说得很清楚。我提供了一些代码以便于理解。

我想调用该函数的 project.aspx `getConnectionString()`：

`_conn = new OdbcConnection(FirstFunction.getConnectionString());`

我自己创建的 FirstFunction.class 的编码：

```
namespace myownfunction
{
     public string getConnectionString(){

     return "Database1";}
} 
```

但是 project.aspx 无法解析`getConnectionString()`使用我在 FirstFunction.class 中创建的命名空间。它只知道如何使用 dll 中的命名空间进行解析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:56:24.870

您不能将函数直接放在命名空间内。他们必须在一个班级内：

```
namespace myownfunction
{
   public class MyUtilities
   {
     public static string getConnectionString()
     {
         return "Database1";
     }
   }
} 
```

然后你应该能够访问这个方法`myownfunction.MyUtilities.getConnectionString()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:21:48.993

您是否在项目中添加了对您创建的程序集的引用？没有它，resolve 函数将无法找到您的实现。

我确实有一个问题-在您的示例中，您使用的是“Hello”，您将只能看到属于该类的方法。

您可以使用扩展方法向您没有源代码访问权限的类添加新方法。[http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:19:12.390

请参阅[本指南](http://msdn.microsoft.com/en-us/library/dfb3cx8s.aspx)以了解命名空间。有很多例子可以让你更清楚地使用它们。

# database - 关系发现误会

> ID：14371670
> 
> 赞同：1
> 
> 时间：2013-01-17T03:15:41.600
> 
> 标签：database, ruby-on-rails-3, methods

也许我忽略了一些明显的东西，但我正在尝试将一个实际场景应用到这个僵尸教程的轨道上。

--------问题------------ 假设模型和关系定义正确，找到所有属于僵尸'Ash'的武器。

```
class Zombie < ActiveRecord::Base
  has_many :weapons
end

class Weapon < ActiveRecord::Base
  belongs_to :zombie
end 
```

本教程接受以下答案 -

```
z = Zombie.find(1)
[#<Zombie ­id: 1, nam­e: "Ash", ­graveyard:­ "Glen Hav­en Memoria­l Cemetery­">]

z.weapons
[#<Weapon ­id: 1, nam­e: "Hammer­", strengt­h: 1, zomb­ie_id: 1>] 
```

但对我来说，这不是那么实际，就好像我正在做这个项目并且出现了那种类型的问题，我会这样做。

```
ash = Zombie.where(:name => "Ash")
[#<Zombie ­id: 1, nam­e: "Ash", ­graveyard:­ "Glen Hav­en Memoria­l Cemetery­">] 
```

但

```
ash.weapons 
```

给出输出

```
#<NoMetho­dError: un­defined me­thod `weap­ons' for #­<ActiveR­ecord::Rel­ation:0x00­0000163347­38>> 
```

当寻找僵尸的输出完全相同并且考虑到问题的框架方式（即使它们提供数据库表）时，我发现僵尸的方式更加实用，这怎么可能。这可能是 codeschool 交互式控制台的细微差别，还是我遗漏了什么？

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:10:49.117

正如您的结果所示：

```
[#<Zombie ­id: 1, nam­e: "Ash", ­graveyard:­ "Glen Hav­en Memoria­l Cemetery­">] 
```

这是某种增强型阵列。所以如果你愿意：

```
ash = Zombie.where(:name => "Ash").first
ash.weapons 
```

将归还所有武器。

# asp.net - 打印票的代码

> ID：14371673
> 
> 赞同：-1
> 
> 时间：2013-01-17T03:16:06.123
> 
> 标签：asp.net, vb.net

我正在修改我朋友在 vb.net 中的铁路预订项目。我是 vb.net 的新手。有一页**railwayreservation.aspx**用于登记乘客。单击注册按钮后，数据会从 vb 页面添加到数据库文件中。

我想在一个简单的 html 文件中输出这些数据。我创建了新的 html 文件。数据添加到数据库后，如何在 html 文件中显示数据？aspx.vb 页面上有许多数据变量暗淡名称、日期等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:34:41.840

您可以将文本从关联的 aspx.vb 文件动态添加到 .aspx 文件。在 html 中，添加类似 a`div`的内容，`id`其中包含您希望显示预订的位置：

```
<div id="reservationDiv"></div> 
```

在 .aspx.vb 中，您可以使用以下内容来更新 aspx 文件：

```
reservationDiv.InnerHtml = Name & "<br>" ... 
```

这将导致文本神奇地插入到 id 为“reservationDiv”的 div（或其他容器）中。

（还有其他几种方法可以实现这一点。）

# eclipse - 从 Eclipse 中的启动委托选项卡更新 LaunchConfigurationDialog

> ID：14371674
> 
> 赞同：0
> 
> 时间：2013-01-17T03:16:19.687
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

在我的 eclipse 插件中，我创建了一个启动委托，它作为其 LaunchConfiguration 对话框中的一个新选项卡附加到 LocalJavaApplication 启动器。

新的 LaunchConfigurationTab 中有一个复选框，单击后，我想用一些额外的 VM 参数更新对话框的 ArgumentsLaunchConfigurationTab 中的 VMArguments 文本。

我已设法更新和保存与 LaunchConfigurationDialog 关联的配置的数据。但是只有在我关闭配置对话框并重新打开它之后，对 VM Arguments 文本的更新才会变得可见。

一旦更新了关联的文本，我就无法找到一种方法来刷新给定选项卡的视图。谁能告诉我这是否可能，怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:00:25.583

我终于找到了解决方案。

似乎在**LaunchConfigurationsDialog**中，**performApply**允许将更改从 GUI 传播到配置，**initializeForm**则相反，并根据配置信息更新 GUI。

这个参考很好地描述了细节： http: [//www.eclipse.org/articles/Article-Launch-Framework/launch.html](http://www.eclipse.org/articles/Article-Launch-Framework/launch.html)

# php - preg_match 允许使用反斜杠的问题

> ID：14371675
> 
> 赞同：3
> 
> 时间：2013-01-17T03:16:19.790
> 
> 标签：php, regex

我遇到了一个关于 preg_match() 和反斜杠的奇怪问题。我正在尝试检查用户名中是否存在非法字符。它几乎适用于所有东西，但显然像“BobDobbs”这样的用户名正在通过。

我已经设法使用 strpos() 轻松解决了这个问题，但我仍然不确定我的语法有什么问题。运行 PHP 5.3.10。

```
$displayname = 'BobDobbs\\\\';
if(preg_match("/[^A-z0-9_.-]/", $displayname)) {
    $errors[] = 'Name contains illegal characters';
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T03:18:48.440

范围`A-z`包含`\`字符。我想你正在寻找`a-zA-Z`。

（`A`是 65，`z`是 122，`\`是 92。）

# c# - Entity Framework 5 SqlQuery 缓慢物化

> ID：14371678
> 
> 赞同：1
> 
> 时间：2013-01-17T03:16:38.283
> 
> 标签：c#, entity-framework-5

我正在使用 EF 5、POCO 对象和 SqlQuery。对象的物化非常慢，大约 20 秒。如果我使用 sql management studio 运行 SQL 查询，查询将在大约 2 秒内运行。（例如 this.context.mytable.SqlQuery(query).AsNoTracking.ToList()）

我以前在 EF 4、Generated Entities 和 ExecuteStoreQuery 中使用了这个完全相同的 SQL 查询。对象的物化并没有那么慢大约 10 秒。

为什么使用 POCO 的性能差异？我已经尝试使用来自 DbContext 的 ExecuteStoreQuery 使用 POCO 并获得相同的慢速（20 秒）结果。

有任何想法吗？

先谢谢了！

**更新：**

1.  实体类：
    两个实体类，一个是基类。两者之间大约有 27 个列/属性，其中大多数位于基类上。

2.  选择结果中的对象数：
    约 75K。

3.  正在执行
    的存储查询：查询是从视图中选择（列），其中 (1=1)

4.  正在使用的 API（DbContext 或 ObjectContext）
    在 EF 5/POCO 场景中，我使用的是 DbContext。
    在 EF 4/生成的实体场景中，我使用了 ObjectContext。

    **当使用 EF 5/DbContext 时，我还尝试访问（较低级别的）ObjectContext 和 ExecuteStoreQuery 方法，结果与使用 DbContext SqlQuery 时一样慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:12:36.923

误报......最终成为 poco 中的少量反射，在物化许多物体时会降低性能。

# c# - 如何远程验证电子邮件或检查电子邮件是否存在

> ID：14371683
> 
> 赞同：5
> 
> 时间：2013-01-17T03:16:54.347
> 
> 标签：c#, asp.net-mvc-4, email-validation, asp.net-4.5, remote-validation

我正在尝试检查注册时是否存在电子邮件，以便数据库中没有重复的电子邮件。我正在使用 MVC4 默认 Internet 应用程序执行此操作，但我已向 RegisterviewModel 添加了一个电子邮件字段。我还注意到，用户名字段做得很好，但我不知道他们是怎么做到的。我试图关注下面的这个博客，但没有运气，因为当我点击创建时没有响应。[拖船伯克](http://www.tugberkugurlu.com/archive/check-instantly-if-username-exists-asp-net-mvc-remote-validation)。当我使用萤火虫时，我得到`Status: 302 Found`了`Json action excutes`

这就是我所拥有的：

**用户资料**

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
} 
```

**注册视图模型**

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email")]
    [Remote("DoesUserEmailExist", "Account", HttpMethod = "POST", ErrorMessage = "Email address already exists. Please enter a different Email address.")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.",      MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [System.ComponentModel.DataAnnotations.Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

**注册动作**

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            try //CreateUserAndAccount
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { model.Email });
                WebSecurity.Login(model.UserName, model.Password);
                return RedirectToAction("Index", "Home");

            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

**json动作**

```
[HttpPost]
    public JsonResult DoesUserEmailExist(string email)
    {

        var user = Membership.GetUserNameByEmail(email);

        return Json(user == null);
    } 
```

**编辑：添加了注册视图**

```
 @model Soccer.Models.RegisterModel

     @{
     ViewBag.Title = "Register";
     }

     <hgroup class="title">
     <h1>@ViewBag.Title.</h1>
     <h2>Create a new account.</h2>
     </hgroup>

 @using (Html.BeginForm()) {
 @Html.AntiForgeryToken()
 @Html.ValidationSummary()

 <fieldset>
    <legend>Registration Form</legend>
    <ol>
        <li>
            @Html.LabelFor(m => m.UserName)
            @Html.TextBoxFor(m => m.UserName)
        </li>
        <li>
            @Html.LabelFor(m => m.Email)
            @Html.TextBoxFor(m => m.Email)
        </li>
        <li>
            @Html.LabelFor(m => m.Password)
            @Html.PasswordFor(m => m.Password)
        </li>
        <li>
            @Html.LabelFor(m => m.ConfirmPassword)
            @Html.PasswordFor(m => m.ConfirmPassword)
        </li>
    </ol>
    <input type="submit" value="Register" />
</fieldset>
 }

 @section Scripts {
 @Scripts.Render("~/bundles/jqueryval")
 } 
```

有什么我不应该做的事情，还是我可以在这里采取另一个更简单的选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T23:52:45.417

首先，我要感谢[JOBG](https://stackoverflow.com/users/118447/jobg)通过这个吸引我。如果您使用，我在上面的问题中显示的内容应该仍然有效，`Database First`因为它要求您`UNIQUE`在数据库中设置电子邮件列，但是为了使其与`EF Code First`我必须对注册操作执行以下操作，还请注意，使用此解决方案，您不需要`Remote Annotation in the model`：

**注册动作**

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Insert a new user into the database
            using (UsersContext db = new UsersContext())
            {
                UserProfile email = db.UserProfiles.FirstOrDefault(u => u.Email.ToLower() == model.Email.ToLower());
                try
                {
                    // Check if email already exists
                    if (email == null)
                    {
                        WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { Email = model.Email });
                        WebSecurity.Login(model.UserName, model.Password);
                        return RedirectToAction("Index", "Home");
                    }
                    else
                    {
                        ModelState.AddModelError("Email", "Email address already exists. Please enter a different email address.");
                    }
                }
                catch (MembershipCreateUserException e)
                {

                    ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
                }
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

**注意：**请注意，此操作会在 UserName 之前验证电子邮件，并且它要求您在创建对象之前至少访问数据库一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:03:16.373

没有 View 代码很难判断，但我的第一个嫌疑人是 js，确保您已设置 jQuery 验证插件，它应该使用`.blur()`事件触发验证，使用 firebug（或类似）检查页面并查找 ajax POST 在字段失去焦点时触发`DoesUserEmailExist`，如果没有发生这种情况，则客户端缺少某些属性作为`Remote`属性，并且服务 `DoesUserEmailExist`看起来还可以。

***旁注***：确保您`UNIQUE`在数据库中具有电子邮件字段的约束，这是确保您没有重复电子邮件的唯一真正方法，即使通过`DoesUserEmailExist`验证，因为并发性。

# google-apps-script - 根据值使电子表格列中的单元格变为粗体的脚本。（条件格式？）

> ID：14371684
> 
> 赞同：6
> 
> 时间：2013-01-17T03:16:55.640
> 
> 标签：google-apps-script, google-sheets, formatting

我需要一个脚本来格式化 A 列中的单元格，但只有包含单词“Hello”的单元格。此外，还有一个类似的脚本，它使包含“hello”的单元格居中对齐，一个也带有下划线的格式。您不能有条件地在 Google 表格中设置粗体或对齐或下划线格式，因此我需要一个脚本。

我认为它是这样的，但我不知道最后一行会是什么。

```
function formatBold() {

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Sheet1');
  var values = s.getDataRange().getValues();

  for( var row = values.length -1; row >= 0; --row )
    if (values[row][0] == 'Hello')

}; 
```

有谁知道如何完成这个脚本或者是否有更好的脚本来完成这项工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T06:56:43.317

这在文档中有很好[的记录](https://developers.google.com/apps-script/class_range?hl=en-US#setFontWeight)，您可以简单地使用

```
// row+1 because array are 0 indexed while range is 1 indexed
s.getRange(row+1,1).setFontWeight("bold"); 
```

其他“样式”在相同的文档中可用，并以相同的方式应用。

编辑：根据您的评论，如果您想将指定范围的所有单元格重置为“普通字体”，只需在循环中设置为“普通”即可。请查看[此示例表（复印）](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dF9ENVFhU3FzQkFWV3FfYU9CTGZCUmc)

# iphone - 使用 NSString 一次确定输入一个字符？

> ID：14371685
> 
> 赞同：0
> 
> 时间：2013-01-17T03:17:11.170
> 
> 标签：iphone, objective-c, xcode

我正在使用 Xcode 为 iPhone 制作一个应用程序，我认为 Xcode 把我弄乱了......
我在`ViewController.h`：

```
 @property (weak, nonatomic) IBOutlet UITextField *passwordField;

 @property (weak, nonatomic) IBOutlet UILabel *passwordResult;

 - (IBAction)go:(id)sender; 
```

并在`ViewController.m`：

```
- (void)viewDidLoad {

    A = @"A";

}

- (IBAction)go:(id)sender {

    password = [NSString stringWithFormat:@"%@", _passwordField.text];

    if (password == A) {
         _passwordResult.text = [NSString stringWithFormat:@"%@", A];
         }
   } 
```

如果输入是大写“A”，这应该在我的标签上打印大写字母“A”，对吗？如果没有，我该怎么做？

注意：我不想只是复制输入的短语并打印它，我想制作一个密码破解应用程序只是为了看看它是否有效......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:31:17.853

代替：

```
if (password == A) 
```

采用

```
if ([password isEqualToString:A]) 
```

否则，您只是在比较指针，而不是字符串本身的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:31:36.023

对于字符串比较，使用`[someString isEqualToString:anotherString]`

Using`==`将比较两个指针是否指向同一个对象，而不是它们是否指向具有相同内容的对象。即使两个指针都包含相同的字符串，但这并不意味着它们指向同一个对象。

如果两个人都拥有同一辆车，因此用相同的钥匙开锁，则两把钥匙不相等，不会同时打开两辆车；每个人只会打开制造它的汽车。如果一个人有一辆车，但有一把额外的钥匙，他们是平等的，因为他们打开的是同一辆车（物体）。你可以这样想指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:53:42.693

`isEqualToString`正如 Rickay 和 trudyscousin 所指出的，你的平等测试不应该是`==`.

而且 - 正如 CodaFi 和 dreamlax 所暗示的那样，这条线：

```
 _passwordResult.text = [NSString stringWithFormat:@"%@", A]; 
```

包含一些冗余，因为 A 和 _passwordResult.text 都是 NSString，因此您不需要创建中间 NSString：

```
_passwordResult.text = A; 
```

就足够了。

其他一些风格上的观察...

您大概已经在某处声明了您的 iVar “A”。我建议您像为 IBOutlets 所做的那样使用属性声明，并给它一个更好的名称。

`@property (nonatomic, strong) NSString* aBetterNamedA`

即使在对象内部，您也应该使用访问器语法：

`self.aBetterNamedA`
`self.passwordResult.txt`

（唯一的例外应该是你的`init`and`dealloc`方法，它应该直接针对 iVar）。

# gem - 构建 Rails 3 引擎抛出 Gem::Package::TooLongFileName 错误

> ID：14371686
> 
> 赞同：4
> 
> 时间：2013-01-17T03:17:14.533
> 
> 标签：gem, ruby-on-rails-3.2, rails-engines

我正在尝试使用构建我的引擎，`gem build myengine`但我不断收到以下错误：

```
ERROR:  While executing gem ... (Gem::Package::TooLongFileName)
    Gem::Package::TooLongFileName 
```

我不希望`myengine`名字不会太长。知道这里可能会发生什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T21:55:28.527

我通过找到导致问题的确切文件解决了这个问题——它是一个名称很长的迁移文件。

对于那些感兴趣的人，错误是从源代码的类的`split_name`方法中抛出的。如果出现以下情况，将引发此错误：`TarWriter``rubygems`

1.  文件的相对路径，包括文件名本身，大于 256 个字符
2.  文件名大于 100 个字符
3.  文件前缀大于 155 个字符

我希望这有帮助。我已附上以下`split_name`方法的源代码以供审核。

```
def split_name(name) # :nodoc:
  raise Gem::Package::TooLongFileName if name.size > 256

  if name.size <= 100 then
    prefix = ""
  else
    parts = name.split(/\//)
    newname = parts.pop
    nxt = ""

    loop do
      nxt = parts.pop
      break if newname.size + 1 + nxt.size > 100
      newname = nxt + "/" + newname
    end

    prefix = (parts + [nxt]).join "/"
    name = newname

    if name.size > 100 or prefix.size > 155 then
      raise Gem::Package::TooLongFileName
    end
  end

  return name, prefix
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T09:45:28.920

我通过将 ruby​​gems 更新到 1.8.25 (gem update --system) 解决了这个问题

-编辑-

检查您的 project.gemspec 文件：注释掉

```
s.files = ... or s.test_files = ... 
```

如果您的项目中有任何文件名称太长

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:38:58.163

我遇到了同样的问题并通过删除 test/dummy/tmp 文件夹和 .sass_cache 文件夹来解决它，因为它们包含长文件名

# ios - Objective C - 单击按钮后用随机字符串填充 UIlabel

> ID：14371690
> 
> 赞同：-2
> 
> 时间：2013-01-17T03:17:28.230
> 
> 标签：ios, objective-c, string, random, uibutton

> **可能重复：**
> [在可可中生成一个随机的字母数字字符串](https://stackoverflow.com/questions/2633801/generate-a-random-alphanumeric-string-in-cocoa)

我是 Objective c 的新手，我想在我的应用程序中添加以下功能：

我有一个标签，该标签在应用程序启动后具有默认文本。每次用户单击按钮时，我希望该标签更改为随机字符串。字符串最终是否重复并不重要，只要它是随机的。

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:40:22.240

您可以使用以下代码：

```
[[NSProcessInfo processInfo] globallyUniqueString]; 
```

用于生成随机字符串。

或者

您可以创建包含多个字符串的数组。假设您创建了 10 个字符串并将它们放入一个数组中：

```
int rand= arc4random()%10 
NSString *str=[array objectAtIndex:rand]; 
```

# android - 如何在单击时突出显示 ListView 多个视图？

> ID：14371694
> 
> 赞同：0
> 
> 时间：2013-01-17T03:17:56.360
> 
> 标签：android, listview, view

好吧，我想突出显示视图，以便用户可以看到它选择了哪个项目。我试过这样：

```
View.setBackground(COLOR.RED); 
```

在项目单击侦听器上的 listView 内部，它可以工作，但是如果列表滚动，随机视图开始改变背景。如何突出显示它们并且不会丢失 listView 滚动上突出显示的项目？

注意：我正在使用一个自定义适配器，每行一个 imageView 和 3 个 textView。

谢谢

编辑：抱歉忘了说我希望能够选择多个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:32:20.107

设置项目布局的背景颜色？看这里[https://github.com/cplain/custom-list](https://github.com/cplain/custom-list)概念应该是相同的 - 只是忽略我的可运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:36:59.990

一个快速的方法是创建几个自定义样式；在 drawable 文件夹中，您可以为正常和悬停或按下状态创建样式：

因此，`../drawable/`您想要制作几个元素：

**1）`list_bg.xml`文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
  <gradient
      android:startColor="#db0000"
      android:centerColor="#c50300"
      android:endColor="#b30500"
      android:angle="270" />
</shape> 
```

**2）`list_bg_hover.xml`文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
  <gradient
      android:startColor="#db0000"
      android:centerColor="#c50300"
      android:endColor="#b30500"
      android:angle="270" />
</shape> 
```

**3）`list_selector.xml`文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/list_bg" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@drawable/list_bg_hover" android:state_pressed="true"/>
    <item android:drawable="@drawable/list_bg_hover" android:state_pressed="false" android:state_selected="true"/>

</selector> 
```

现在，为了使用它，您所要做的就是将样式附加到这样的`ListView`行项目的布局中，`android:listSelector="@drawable/list_selector"`这应该可以解决问题。

# c++ - 2个线程如何共享同一个缓存行

> ID：14371695
> 
> 赞同：12
> 
> 时间：2013-01-17T03:18:07.613
> 
> 标签：c++, c, linux, multithreading

我正在使用自定义网络协议库。这个库建立在 TCP/IP 之上，应该用于高频消息传递。它是一个非阻塞库，并使用回调作为与调用者集成的接口。

我不是性能专家，这就是为什么我决定在这里问这个问题。自定义库带有一个特定的约束，概述如下：

> “被调用者不应在回调线程的上下文中调用任何库的 API。如果他们尝试这样做，线程将挂起”

克服 API 限制的唯一方法是我启动另一个线程来处理消息并调用库以发送响应。库线程和进程线程将共享一个公共队列，该队列受互斥体保护并使用`wait_notify()`调用来指示消息的存在。

如果我每秒接收 80k 条消息，那么我会让线程进入睡眠状态并经常唤醒它们，每秒执行约 80k 次线程上下文切换。

另外，由于有两个线程，它们不会共享 L1 缓存中的消息缓冲区。包含消息的缓存行将首先由库的线程填充，然后被驱逐并拉入进程线程的核心的 L1 缓存。我是否遗漏了什么，或者库的设计是否可能不适用于高性能用例？

**我的问题是：**

1.  我已经看到诸如“不要在回调的上下文中使用此 API，因为它可能导致锁定”之类的警告。跨越许多图书馆。导致此类设计约束的常见设计选择是什么？如果这是同一个线程多次调用锁的简单问题，他们可以使用递归锁。这是一个可重入问题吗？哪些挑战可能会导致 API 所有者制作不可重入 API？

2.  在上述设计模型中，库线程和进程线程是否可以共享同一个内核，从而共享一个缓存线？

3.  `sig_atomic_t`volatile作为在两个线程之间共享数据的机制有多贵？

4.  给定高频场景，在两个线程之间共享信息的轻量级方法是什么？

该库和我的应用程序是基于 C++ 和 Linux 构建的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T04:39:25.467

> 2个线程如何共享同一个缓存行？

线程与缓存行无关。至少不是明确的。可能出问题的是上下文切换和 TLB 失效时的缓存刷新，但是给定线程的相同虚拟地址映射，缓存通常应该忽略这些事情。

> 导致此类设计约束的常见设计选择是什么？

库的实现者不想处理：

1.  复杂的锁定方案。
2.  重入逻辑（即你调用'send()'，库用 回调`on_error()`你，你再次调用`send()`- 这需要他们特别注意）。

我个人认为，当涉及到高性能，尤其是与网络相关的事情时，围绕回调设计 API 是一件非常糟糕的事情。尽管有时它使用户和开发人员的生活变得更加简单（仅就编写代码而言）。唯一的例外可能是 CPU 中断处理，但那是另一回事，您很难将其称为 API。

> 如果这是同一个线程多次调用锁的简单问题，他们可以使用递归锁。

递归互斥锁相对来说非常昂贵。关心运行时效率的人倾向于尽可能避免使用它们。

> 在上述设计模型中，库线程和进程线程是否可以共享同一个内核，从而共享一个缓存线？

是的。您必须将两个线程固定到同一个 CPU 内核。例如，通过使用[`sched_setaffinity()`](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setaffinity.2.html). 但这也超出了单个程序的范围——必须正确配置整个环境。例如，您可能要考虑不允许操作系统在该内核上运行任何东西，但您的两个线程（包括中断），并且不允许这两个线程迁移到不同的 CPU。

> volatile sig_atomic_t 作为在两个线程之间共享数据的机制有多昂贵？

它本身并不昂贵。然而，在多核环境中，您可能会出现一些缓存失效、停顿、MESI 流量增加等问题。鉴于两个线程都在同一个核心上并且没有任何干扰——唯一的惩罚是无法缓存变量，这是可以的，因为它不应该被缓存（即编译器总是从内存中获取它，无论是缓存还是主内存）。

> 给定高频场景，在两个线程之间共享信息的轻量级方法是什么？

从/向同一内存读取和写入。可能没有任何系统调用、阻塞调用等。例如，至少对于英特尔架构，可以通过使用内存屏障来实现两个并发线程的环形缓冲区，仅此而已。为了做到这一点，你必须非常注重细节。然而，如果某些东西必须显式同步，那么原子指令是下一个层次。Haswell 还带有可用于低开销同步的事务内存。在那之后没有什么是快速的。

另外，请查看[英特尔架构开发人员手册第 11 章](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-1-2a-2b-3a-3b-manual.html?wapkw=architecture%20developer%20manuals)，关于内存缓存和控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:20:16.160

An important thing to keep in mind here is that when working on network applications, the more important performance metric is "latency-per-task" and not the raw cpu cycle throughput of the entire application. To that end, thread message queues tend to be a very good method for responding to activity in the quickest possible fashion.

80k messages per second on today's server infrastructure (or even my Core i3 laptop) is bordering on being insignificant territory -- especially insofar as L1 cache performance is concerned. If the threads are doing a significant amount of work, then its not unreasonable at all to expect the CPU to flush through the L1 cache every time a message is processed, and if the messages are not doing very much work at all, then it just doesn't matter because its probably going to be less than 1% of the CPU load regardless of L1 policy.

At that rate of messaging I would recommend a passive threading model, eg. one where threads are woken up to handle messages and then fall back asleep. That will give you the best latency-vs-performance model. Eg, its not the most performance-efficient method but it will be the best at responding quickly to network requests (which is usually what you want to favor when doing network programming).

On today's architectures (2.8ghz, 4+ cores), I wouldn't even begin to worry about raw performance unless I expected to be handling maybe 1 million queued messages per second. And even then, it'd depend a bit on exactly how much Real Work the messages are expected to perform. It it isn't expected to do much more than prep and send some packets, then 1 mil is definitely conservative.

> Is there a way in the above design model, where the library thread and process thread can share the same core, and consequently share a cache line?

No. I mean, sure there is if you want to roll your own Operating System. But if you want to run in a multitasking environment with the expectation of sharing the CPU with other tasks, then "No." And locking threads to cores is something that is very likely to hurt your threads' avg response times, without providing much in the way of better performance. (and any performance gain would be subject to the system being used exclusively for your software and would probably evaporate on a system running multiple tasks)

> Given a high frequency scenario, what is a light-weight way to share information between two threads?

Message queues. :) Seriously. I don't mean to sound silly, but that's what message queues are. They share information between two threads and they're typically light-weight about it. If you want to reduce context switches, only signal the worker to drain the queue after some number of messages have accumulated (or some timeout period, in case of low activity) -- but be weary that will increase your program's response time/latency.

# java - 如何从不同的时区获取年月日？

> ID：14371697
> 
> 赞同：0
> 
> 时间：2013-01-17T03:18:17.843
> 
> 标签：java, android

我现在在香港。如何从美国获得年月日？
我努力了：

```
Calendar calendar = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy hh:mm:ss z");
sdf.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles"));
sdf.format(calendar.getTime()); 
```

但我不知道如何得到年，月。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:55:34.427

以下代码产生三个所需的变量：

```
Calendar calendar = Calendar.getInstance();
Calendar LATime = new GregorianCalendar(TimeZone.getTimeZone("America/Los_Angeles"));
LATime.setTimeInMillis(calendar.getTimeInMillis());
int year = LATime.get(Calendar.YEAR);
int month = LATime.get(Calendar.MONTH);
int date = LATime.get(Calendar.DATE); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:30:08.733

您还可以使用有用的库进行日期时间操作，例如[Joda](http://joda-time.sourceforge.net/) lib

我确实尝试在将UTC时间转换为本地时间时使用它，您可以尝试在不同时区之间转换。祝你好运 ！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:20:31.023

您需要执行以下操作（假设 dateObj 是香港时间的日期实例）：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy hh:mm:ss z");
sdf.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles"));
String usaDateStr= sdf.format(dateObj); 
```

请参阅此[示例](http://www.kodejava.org/examples/200.html)。

# c# - 无依赖服务的 DI 服务

> ID：14371700
> 
> 赞同：2
> 
> 时间：2013-01-17T03:18:29.960
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject, ninject-2

我一直在与 Ninject 合作使用依赖注入来实现应用程序。我觉得我对这些概念有相当透彻的理解，并且非常喜欢应用程序使用 DI 实现的松散耦合和可测试架构。但是，我正在为一种特定类型的服务而苦苦挣扎，并且正在寻找了解我是否做错了什么或者其他人是否遇到了同样的事情。

基本上，我最终得到了一些没有其他服务依赖于它们的服务/类（数量非常少）。正因为如此，该类永远不会被实例化，即使它是必需的，因为它在应用程序中扮演着有用的角色。例如，假设我有一个`IMonkeyRepository`服务和一个`IMonkeyPopulator`服务。假设该`IMonkeyPopulator`服务确实没有公共 API，它的唯一职责（遵循单一职责原则）是发现网络上的猴子并`IMonkeyRepository`用它们填充。该服务依赖于`IMonkeyRepository`可能还有其他一些服务来处理它与网络的交互（例如，端口和地址的配置数据）。但是，`IMonkeyPopulator`它没有公共 API，它只是一个空接口。

这是一个糟糕的设计还是我错过了某种代码味道？我显然可以将此功能移动到存储库本身，但这对我来说似乎违反了 SRP（存储库具有有用的访问功能等，并且实际上可以由多个服务填充）。我考虑过或尝试过但不满意的一些方法是：

1.  使服务具有一个公共方法，例如 Start，必须调用它才能开始工作。这样做的缺点是需要在系统中确定一个有点随意的位置来进行调用。
2.  将服务绑定到我在创建 Ninject 内核时实例化的常量。这要求我明白没有人依赖这个服务，所以必须特别处理，这似乎是错误的。
3.  将一些成员添加到服务中，并在我的应用程序中的某处创建一个 GUI，以读取这些值（例如服务的状态等）。显然，必须为我的应用程序添加一个仅出于这个原因才存在的 GUI 是非常愚蠢的（尽管有时对调试等很有用）。

有什么想法或指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:22:21.173

您说`IMonkeyPopulator`取决于`IMonkeyRepository`，但似乎应该反过来？听起来您`IMonkeyRepository`依赖于，因此可能需要注入一个`IMonkeyPopulator`. 如果您还可以注入一些其他服务，但在内部，`IMonkeyRepository`可以告诉`IMonkeyPopulator`“启动”以便存储库中实际上有一些东西？不过我可能误解了这个问题......也许我不应该这么胡闹：/

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:32:37.557

因此，您`IMonkeyPopulator`是某种`ActiveObject`在后台侦听 tcp 连接并将该数据写入存储库的类型。我会从应用程序的角度说，必须启动和停止活动对象，因为您不想在构造函数中启动 tcp 连接。因此，您可以使用绑定上的`OnActivation`和`OnDeactivation`方法来启动和停止服务，如下所示：

```
 This.Bind<IPopulatorService>().To<>().OnActivation((c, i) => i.Start()).OnDeactivation((c, i) => i.Stop()) 
```

但是您的应用程序中仍然有人必须获取/获取`IPopulatorService`它才能在您的应用程序中实例化它。我通常在这里使用引导程序模式[http://www.appccelerate.com/bootstrapper.html](http://www.appccelerate.com/bootstrapper.html)来实现这一点。

# python - ImportError：在将 Pyramid 和 Mako 与 Google App Engine 一起使用时，无法重新初始化内部模块 __main__

> ID：14371704
> 
> 赞同：1
> 
> 时间：2013-01-17T03:18:59.637
> 
> 标签：python, google-app-engine, pylons, pyramid

我的 Pyramid 应用程序在粘贴 httpserver 中运行时运行良好，但在 google 应用程序引擎中引发异常。

/hello/{name} url 在粘贴服务器和应用引擎中都可以正常工作

/test url 在粘贴服务器中工作正常，但在应用程序引擎中我得到了下面的 Traceback。

有任何想法吗？

```
from pyramid.config import Configurator
from pyramid.response import Response

def hello_world(request):
    return Response('Hello %(name)s!' % request.matchdict)

def test(request):
    return dict()

settings = {'mako.directories':'mako_templates'}
config = Configurator(settings=settings)
config.add_route('hello', '/hello/{name}')
config.add_route('test', '/test', view=test, renderer='test.mako')
config.add_view(hello_world, route_name='hello')

wsgi_app = config.make_wsgi_app() 
```

来自谷歌应用引擎的追溯：

```
ERROR    2013-01-17 02:48:08,893 wsgi.py:235] 
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 223, in Handle
    result = handler(dict(self._environ), self._StartResponse)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/router.py", line 251, in __call__
    response = self.invoke_subrequest(request, use_tweens=True)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/router.py", line 227, in invoke_subrequest
    response = handle_request(request)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/tweens.py", line 21, in excview_tween
    response = handler(request)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/router.py", line 161, in handle_request
    response = view_callable(context, request)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/config/views.py", line 367, in rendered_view
    context)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/renderers.py", line 531, in render_view
    return self.render_to_response(response, system, request=request)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/renderers.py", line 561, in render_to_response
    result = self.render(value, system_values, request=request)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/renderers.py", line 534, in render
    renderer = self.renderer
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/decorator.py", line 39, in __get__
    val = self.wrapped(inst)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/renderers.py", line 518, in renderer
    return factory(self)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/mako_templating.py", line 129, in __call__
    directories = [ abspath_from_asset_spec(d) for d in directories ]
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pyramid/asset.py", line 43, in abspath_from_asset_spec
    return pkg_resources.resource_filename(pname, filename)
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pkg_resources.py", line 840, in resource_filename
    return get_provider(package_or_requirement).get_resource_filename(
  File "/Users/mnaber/Documents/workspace/UnifiedClassified/site-packages/pkg_resources.py", line 160, in get_provider
    __import__(moduleOrReq)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 692, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1766, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 692, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1630, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 692, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1577, in LoadModuleRestricted
    description)
ImportError: Cannot re-init internal module __main__
INFO     2013-01-17 02:48:08,909 dev_appserver.py:3103] "GET /test HTTP/1.1" 500 - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:08:17.013

我在这方面的背景很浅，所以这可能是错误的。

这是我的看法：要将 mako 与金字塔一起使用，您需要为配置器提供一个设置字典，其中包含一个名为“mako.directories”的键，该键指向您的 mako 模板目录。该键可以是相对路径或绝对路径。

pyramid/mako_templating.py 文件在这一行中将相对路径转换为绝对路径：

```
directories = [ abspath_from_asset_spec(d) for d in directories ] 
```

此转换在 gae 中不起作用（请参阅堆栈跟踪）。为了解决这个问题，我使用了 Pyramid AssetResolver，如下所示：

```
from pyramid.path import AssetResolver
r = AssetResolver('appname')
full_mako_path = r.resolve('http/mako_templates').abspath() 
```

然后，当您创建 Pyramid 配置器时，您可以：

```
settings = {'mako.directories':full_mako_path}
config = Configurator(settings=settings) 
```

在这种情况下，我的目录结构是：

```
/serve.py (contains wsgi app)
/app.yaml
/appname
/appname/http/mako_templates
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:52:53.220

尝试这个：

将**Pyramid**和**Mako**`framework`文件夹放在app 目录中命名的目录中。然后将这些代码行添加到`.py`导入下的主文件中：

```
import sys, os
framework_dir = "framework"
framework_dir_path = os.path.join(os.path.dirname(__file__), framework_dir)
sys.path.insert(0, framework_dir_path) 
```

# android - Android - Crittografy Cipher 解密不起作用

> ID：14371709
> 
> 赞同：2
> 
> 时间：2013-01-17T03:19:48.177
> 
> 标签：android, encryption

我需要加密一个字符串然后解密。加密函数运行良好，但是当我将加密值传递给解密函数时，我收到一个空指针异常。如果我在 Java 应用程序中使用相同的代码，则一切正常。

```
public class Cripthografy {
private static String TAG="freeliberomail";

 public static String encrypt(String seed, String cleartext){
   byte[] rawKey;
   byte[] result=null;
 try {
rawKey = getRawKey(seed.getBytes());

     result = encrypt(rawKey, cleartext.getBytes());
  } catch (Exception e) {
// TODO Auto-generated catch block
e.printStackTrace();
  }
   return toHex(result);
  }

  public static String decrypt(String seed, String encrypted) {
    byte[] rawKey;
    byte[] result=null;
   try {
rawKey = getRawKey(seed.getBytes());

    byte[] enc = toByte(encrypted);
    result = decrypt(rawKey, enc);
    } catch (Exception e) {
// TODO Auto-generated catch block
e.printStackTrace();
   }
    return new String(result);
   }

   private static byte[] getRawKey(byte[] seed) throws Exception {
      KeyGenerator kgen = KeyGenerator.getInstance("AES");
      SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
      sr.setSeed(seed);
      kgen.init(128, sr); // 192 and 256 bits may not be available
      SecretKey skey = kgen.generateKey();
      byte[] raw = skey.getEncoded();
      return raw;
    }
    private static byte[] encrypt(byte[] raw, byte[] clear){
 byte[] encrypted=null;
      SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
      Cipher cipher;
     try {
 cipher = Cipher.getInstance("AES");
     cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
     encrypted = cipher.doFinal(clear);
     } catch (NoSuchAlgorithmException e) {
// TODO Auto-generated catch block
e.printStackTrace();
    } catch (NoSuchPaddingException e) {
// TODO Auto-generated catch block
e.printStackTrace();
    } catch (InvalidKeyException e) {
// TODO Auto-generated catch block
e.printStackTrace();
    } catch (IllegalBlockSizeException e) {
// TODO Auto-generated catch block
e.printStackTrace();
    } catch (BadPaddingException e) {
// TODO Auto-generated catch block
e.printStackTrace();
    }
     return encrypted;
    }

     private static byte[] decrypt(byte[] raw, byte[] encrypted) {
 byte[] decrypted = null;
     SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
     Cipher cipher;
     try {
 cipher = Cipher.getInstance("AES");
     cipher.init(Cipher.DECRYPT_MODE, skeySpec);
     decrypted = cipher.doFinal(encrypted);
     }catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      } catch (NoSuchPaddingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      } catch (InvalidKeyException e) {
// TODO Auto-generated catch block
e.printStackTrace(); 
     } catch (IllegalBlockSizeException e) {
// TODO Auto-generated catch block
e.printStackTrace();
   } catch (BadPaddingException e) {
// TODO Auto-generated catch block
e.printStackTrace();
   }

    return decrypted;
   }

  public static String toHex(String txt) {
  return toHex(txt.getBytes());
  }

 public static String fromHex(String hex) {
 return new String(toByte(hex));
 }

 public static byte[] toByte(String hexString) {
  int len = hexString.length()/2;
  byte[] result = new byte[len];
  for (int i = 0; i < len; i++)
  result[i] = Integer.valueOf(hexString.substring(2*i, 2*i+2), 16).byteValue();
  return result;
 }

  public static String toHex(byte[] buf) {
    if (buf == null)
    return "";
    StringBuffer result = new StringBuffer(2*buf.length);
      for (int i = 0; i < buf.length; i++) {
        appendHex(result, buf[i]);
    }
     return result.toString();
   }
  private final static String HEX = "0123456789ABCDEF";
  private static void appendHex(StringBuffer sb, byte b) {
  sb.append(HEX.charAt((b>>4)&0x0f)).append(HEX.charAt(b&0x0f));
  }

} 
```

然后我打电话：

```
 String encValue=Cripthografy.encrypt("MY_KEY", "helloworld");
      String decValue=Cripthografy.decrypt("MY_KEY",  encValue);
      Log.d(TAG,"encript:"+encValue+" "+"decript:"+decValue); 
```

例外是：

```
 01-17 03:57:23.986: W/System.err(29846): javax.crypto.BadPaddingException: pad      block corrupted
       01-17 03:57:23.991: W/System.err(29846):     at      com.android.org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher.engineDoFinal(B           aseBlockCipher.java:709)
       01-17 03:57:23.991: W/System.err(29846):     at       javax.crypto.Cipher.doFinal(Cipher.java:1111)
        01-17 03:57:23.991: W/System.err(29846):    at    marvellous.freeliberomail.Cripthografy.decrypt(Cripthografy.java:111)
        01-17 03:57:23.991: W/System.err(29846):    at   marvellous.freeliberomail.Cripthografy.decrypt(Cripthografy.java:55)
         01-17 03:57:23.991: W/System.err(29846):   at   marvellous.freeliberomail.Auth.writeCookieTofile(Auth.java:307)
        01-17 03:57:23.991: W/System.err(29846):    at marvellous.freeliberomail.Auth.createSessionCookie(Auth.java:287)
        01-17 03:57:23.991: W/System.err(29846):    at marvellous.freeliberomail.Auth.scenario(Auth.java:196)
        01-17 03:57:23.991: W/System.err(29846):    at marvellous.freeliberomail.Auth.accessMail(Auth.java:117)
        01-17 03:57:23.991: W/System.err(29846):    at marvellous.freeliberomail.Auth.run(Auth.java:96)
       01-17 03:57:23.991: W/System.err(29846):     at java.lang.Thread.run(Thread.java:856)
        01-17 03:57:23.996: W/dalvikvm(29846): threadid=11: thread exiting with uncaught exception (group=0x41584930)
            01-17 03:57:23.996: E/AndroidRuntime(29846): FATAL EXCEPTION: Thread-32785
            01-17 03:57:23.996: E/AndroidRuntime(29846): java.lang.NullPointerException
            01-17 03:57:23.996: E/AndroidRuntime(29846):    at java.lang.String.<init>(String.java:141)
            01-17 03:57:23.996: E/AndroidRuntime(29846):    at marvellous.freeliberomail.Cripthografy.decrypt(Cripthografy.java:60)
            01-17 03:57:23.996: E/AndroidRuntime(29846):    at marvellous.freeliberomail.Auth.writeCookieTofile(Auth.java:307)
             01-17 03:57:23.996: E/AndroidRuntime(29846):   at marvellous.freeliberomail.Auth.createSessionCookie(Auth.java:287)
            01-17 03:57:23.996: E/AndroidRuntime(29846):    at marvellous.freeliberomail.Auth.scenario(Auth.java:196)
            01-17 03:57:23.996: E/AndroidRuntime(29846):    at marvellous.freeliberomail.Auth.accessMail(Auth.java:117)
             01-17 03:57:23.996: E/AndroidRuntime(29846):   at marvellous.freeliberomail.Auth.run(Auth.java:96)
            01-17 03:57:23.996: E/AndroidRuntime(29846):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:27:42.060

yes, android Cipher does have some issues. One is that the byte[] in cipher.doFinal(encrypted) sometimes has to have the correct length. Try feeding it with an encrypted array of 128 bit (fill up with 0's?)

after many painful hours this example finally works:

```
private static byte[] key = "12345678".getBytes();// 64 bit 
private static byte[] iv = "12345678".getBytes();

public static String encrypt(String in) {
    String cypert = in;
    try {
        IvParameterSpec ivSpec = new IvParameterSpec(iv);
        SecretKeySpec k = new SecretKeySpec(key, "DES");
        Cipher c = Cipher.getInstance("DES/CBC/PKCS7Padding");
        c.init(Cipher.ENCRYPT_MODE, k, ivSpec);
        byte[] encryptedData = c.doFinal(in.getBytes());
        cypert = Base64.encodeLines(encryptedData);
    } catch (Exception e) {
        Debugger.error(e);
    }
    return cypert;
}

public static String decrypt(String in) throws Exception {
    String plain=in;
    try {
        IvParameterSpec ivSpec = new IvParameterSpec(iv);
        SecretKeySpec keys = new SecretKeySpec(key, "DES");
        Cipher cipher = Cipher.getInstance("DES/CBC/PKCS7Padding");
        cipher.init(Cipher.DECRYPT_MODE, keys, ivSpec);
        // decryption pass
        byte[] cipherText = Base64.decodeLines(in);
        int ctLength = cipherText.length;
        byte[] plainText = new byte[cipher.getOutputSize(ctLength)];
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bos.write(cipher.doFinal(cipherText));
        plainText = bos.toByteArray();
        bos.close();
        plain = new String(plainText, "UTF8");
    } catch (Exception e) {
        Debugger.error(e);
    }
    return plain;
} 
```

# javascript - Jquery when keypress in input need autocomplete English letter on number

> ID：14371720
> 
> 赞同：0
> 
> 时间：2013-01-17T03:20:49.203
> 
> 标签：javascript, jquery, autocomplete, replace

I would like to replace letters into numbers as they're typed inside an `<input type="text">` box.

Currently I use this code:

```
function Auto(str) 
{
  var search = new Array(
    "q","w","e","r","t","y","u","i","o","p"
  );
  var replace = new Array(
    "1","2","3","4","5","6","7","8","9","0"
  );
  return str.replace(search, replace);
} 
```

// me need make find in find_str but i dont know how...

```
$("#find").on('keypress',function(){
  find_str = $("#find").val();
  alert (Auto(find_str));
}); 
```

Tell me please how make find letter in find_str and how to write this code?

P.S.: alert() only for test.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:24:57.767

`replace` doesn't do arrays. There are a couple of alternatives, like multiple replacements, but transliteration seems good:

```
var map = {q: '1', w: '2', e: '3', r: '4', t: '5', y: '6', u: '7', i: '8', o: '9', p: '0'};
var r = '';

for(var i = 0; i < str.length; i++) {
    r += map[str.charAt(i)] || str.charAt(i);
}

return r; 
```

Also note that you're probably going to run into some focus problems, which are really annoying for users, so avoid things like this if at all possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:25:41.020

[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace) takes a regular expression (or a string that will be converted to a regex) as the first argument and a string to replace matches or a function to compute replacements.

Therefore, you'd use this:

```
var map = {q:'1', w:'2', e:'3', r:'4', t:'5', y:'6', u:'7', i:'8', o:'9', p:'0'};
var keys = "[";
for (var key in map)
    keys += key.replace(/[\]-]/, "\\$&");
keys += "]";
var regex = new RegExp(keys, "g") // /[qwertyuiop]/g

function auto(str) {
    return str.replace(regex, function(match) {
         return map[match]; // the respective number
    });
}
$("#find").on('keyup', function(){
    alert( auto( this.value ));
}); 
```

* * *

If you really need to use arrays, of course you can do that, too.

```
var search =  ["q","w","e","r","t","y","u","i","o","p"],
    replace = ["1","2","3","4","5","6","7","8","9","0"];
var map = {};
for (var i=0; i<search.length && i<replace.length; i++)
    map[ search[i] ] = replace[i];
var regex = new RegExp("["+search.join("").replace(/[\]-]/g, "\\$&")+"]", "g"); 
```

# jsf - 仅当验证失败时，输入字段才会保留以前的值

> ID：14371723
> 
> 赞同：14
> 
> 时间：2013-01-17T03:20:56.677
> 
> 标签：jsf, popup, richfaces, jsf-1.2, ajax4jsf

我想出了一个奇怪的问题。我试图隔离问题，所以以下是我的简化代码。

```
public class MyBean {

  private List<Data> dataList;
  Data selectedData;

  public MyBean() {
    dataList = new ArrayList<Data>();
    dataList.add(new Data("John", 16));
    dataList.add(new Data("William", 25));
  }

  public List<Data> getDataList() {
    return dataList;
  }

  public void edit(Data data) {
    selectedData = data;
  }
  public void newData() {
    selectedData = new Data(null, null);
  }

  public Data getSelectedData() {
    return selectedData;
  }

  public class Data {
    String name;
    Integer age;
    Data(String name, Integer age) {
      this.name = name;
      this.age = age;
    }
    public String getName() {
      return name;
    }
    public void setName(String name) {
      this.name = name;
    }
    public Integer getAge() {
      return age;
    }
    public void setAge(Integer age) {
      this.age = age;
    }
  }
} 
```

**xhtml:**

```
<rich:modalPanel id="pop">
  <h:form>
    Name: <h:inputText value="#{myBean.selectedData.name}" required="true" id="txtName"/><br/>
    Age : <h:inputText value="#{myBean.selectedData.age}" required="true" id="txtAge"/>
    <a4j:commandButton value="Save"/>
    <a4j:commandButton value="Close" onclick="Richfaces.hideModalPanel('pop');return false;"/>
    <br/>
    <rich:message for="txtName"/><br/>
    <rich:message for="txtAge"/>
  </h:form>     
</rich:modalPanel>

<h:form>
  <rich:dataTable value="#{myBean.dataList}" var="data">
    <rich:column>#{data.name}</rich:column>
    <rich:column>
      <a4j:commandLink value="Edit" action="#{myBean.edit(data)}" reRender="pop" oncomplete="Richfaces.showModalPanel('pop')"/>
    </rich:column>
  </rich:dataTable>
  <a4j:commandButton value="New" action="#{myBean.newData()}" reRender="pop" oncomplete="Richfaces.showModalPanel('pop')"/>
</h:form> 
```

这是错误的路径：

1.  加载页面
2.  单击第一行中的“编辑”链接（弹出显示）
3.  在弹出窗口中，清除“年龄”字段并单击“保存”。（显示必填信息）
4.  点击取消（不填写“年龄”字段）
5.  点击第二个链接。
6.  现在它显示不相关的数据（以前的数据）。- 这就是问题
7.  即使我单击“新建”按钮，它也会显示不正确的数据。

仅当弹出窗口中的验证失败时才会发生这种情况。
有解决方案吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-17T13:34:02.817

这个问题在 JSF 2 中也得到了认可，并在以下答案中进行了详细解释：[How can I populate a text field using PrimeFaces AJAX after validation errors?](https://stackoverflow.com/questions/6642242/how-can-i-populate-a-text-field-using-primefaces-ajax-after-validation-errors-oc/6845800#6845800) 如果您使用的是 JSF 2，您可以使用 OmniFaces'[`ResetInputAjaxActionListener`](http://showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener)或 PrimeFaces'[`<p:resetInput>`或`resetValues="true"`](https://www.primefaces.org/showcase/ui/misc/resetInput.xhtml)为此。

至此，您需要在将[`EditableValueHolder`](http://docs.oracle.com/javaee/5/api/javax/faces/component/EditableValueHolder.html)要进行 ajax 渲染时清除组件的状态，但这不包括在 ajax-execute 中。要清除状态，在 JSF 2 中您可以使用便捷方法[`resetValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/EditableValueHolder.html#resetValue%28%29)，但在 JSF 1.2 中不可用，您需要调用 4 个单独的方法`setValue(null)`, `setSubmittedValue(null)`,`setLocalValueSet(false)`来`setValid(true)`清除状态。

要确定哪些组件要进行 ajax 渲染，但不进行 ajax 执行，在 JSF 2 中您可能会`PartialViewContext`为此使用方法，但在尚未标准化 ajax 的 JSF 1.2 中不可用。您需要摆弄 RichFaces 特定的 ajax API 才能弄清楚这一点。我无法从头顶上看出这一点，所以这是一个启动示例，假设您已经知道需要清除的组件。想象一下弹出窗口中的表单`id="popForm"`和名称输入字段有`id="nameInput"`，这是在方法中清除它的`newData()`方法：

```
UIInput nameInput = (UIInput) context.getViewRoot().findComponent("popForm:nameInput");
nameInput.setValue(null);
nameInput.setSubmittedValue(null);
nameInput.setLocalValueSet(false);
nameInput.setValid(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:57:20.360

在取消操作上做一件事将所有弹出值设置为空。现在在您的下一次单击中将所有值设置为默认值。

或单击将所有以前的值设置为空。并在此之后设置所有相应的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-23T00:11:02.523

我有同样的问题。如果您使用的是 Primefaces，则解决方案很简单，只需`resetValues="true"`在您的 p:commandLink 或 p:commandButton 上加载所选项目即可。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-03-29T14:29:16.173

验证失败后，如果您希望与作为提交参数传递的输入数据保持相同，则将**value 属性**设置为您的表单 bean 名称，如下所述，即

```
<input type="text" id="fname" path="fname" value="${myFormBean.fname}"/> 
```

# android - 将 Google Play 服务添加到 Eclipse 项目

> ID：14371725
> 
> 赞同：39
> 
> 时间：2013-01-17T03:21:13.540
> 
> 标签：android, google-play-services

我已经红色了一些[帖子](https://stackoverflow.com/questions/14230808/google-map-android-api-v2-crashed)和文章，但它对我不起作用。我无法在我的项目中添加/使用 Google Play 服务。

我的步骤：

1.  我开始了一个使用 Google Api 2.2 的项目
2.  我已经使用 SDK 下载了 Google Play 服务
3.  我将 Google Play 服务导入我的 Eclipse 工作区
4.  在我的项目中添加 Google Play 服务作为依赖项：项目 -> 属性 -> Android -> 库，添加 -> google-play-services_lib

第 1 步到第 3 步很好，但我认为问题出在第 4 步。执行第 4 步后没有任何反应，我的项目结构没有看到任何变化：没有添加库。这些步骤也在[这里](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)描述。

我知道它不起作用的原因是因为从 Google Play 服务导入的任何内容都会出现未解决的错误。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-18T14:05:44.283

我发现必须将播放服务 libproject 导入到与您的项目相同的物理驱动器上。（导入时选中“将项目复制到工作区”复选框）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-31T20:21:24.093

我花了整整 2 天的时间来解决问题所在，但现在已经解决了。

问题在于 64 位版本的 ADT 和 Java。Eclipse 无法正确导入 64 位版本的库。

所以我重新安装了 Java 6 v 37 jdk（32 位），然后下载了 32 位版本的 ADT 来配合它。即使我有 64 位系统，我也这样做了

无论如何，然后我遵循了与 64 位版本完全相同的程序。它运行良好 - 第一次。

所以这是我的建议 - 你必须使用 32 位版本的 JAVA 和 ADT，因为 64 位包含与 eclipse 的不兼容问题，用于导入 Google Play 服务库，可能还有其他库。

PS。我按照 developer.android.com 上概述的 Google Play 服务安装步骤进行操作

我应该补充一点，develop.android 网站忽略了一个重要事实——地图 xml 应该在线性或相对布局内。除非它位于容器布局中，否则它不起作用

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T17:40:30.473

问题是您还必须修改 manifest.xml 文件。导入（带副本）到工作区后，eclipse 将引发有关目标 SDK 平台的错误。默认情况下，清单文件仅包含 minimum-sdk-version 为 8。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-13T09:52:43.293

我遇到了同样的问题，另外两个额外的步骤 5-6 在 Eclipse Juno 4.2.2 上解决了这个问题：
1\. 将 google-play-services_lib 作为现有的 Android 项目导入（选中“将项目复制到工作区”）
2\. 清理新添加的 google -play-services_lib 项目
3\. 编辑您的项目属性并将库项目添加到其中
4\. 清理您的项目
5\. 重新启动 Eclipse，现在已经成功添加了 google-play-services.jar
6\. 我什至不得不手动添加“导入com.google.android.gms.common.GooglePlayServicesUtil" 在我的 Java 类中，以便使用 GooglePlayServicesUtil.isGooglePlayServicesAvailable(context); 因为 Eclipse 没有提供自动添加导入

# python - 区分文件名和文件路径

> ID：14371726
> 
> 赞同：1
> 
> 时间：2013-01-17T03:21:17.627
> 
> 标签：python

如果我们传递文件名和文件路径，我需要调用不同的功能

前任

```
python test.py  test1 (invoke different function)         
python test.py  /home/sai/test1 (invoke different function) 
```

我可以从 sys.argv[1] 得到参数。但我无法区分文件和文件路径。（即它是文件还是文件路径）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-19T04:56:45.760

这有点棘手，因为文件名也是有效的相对路径，对吧？你无法区分它。

另一方面，假设您想区分绝对路径或以斜杠\反斜杠开头的相对路径，您可以使用**[os.path.isabs(path)](https://docs.python.org/2/library/os.path.html#os.path.isabs "os.path.isabs")**。Doc 说它检查路径是否以 Unix 上的斜杠开头，在切掉潜在的驱动器号后 Win 上的反斜杠：

```
>>> import os
>>> os.path.isabs('C:\\folder\\name.txt')
True
>>> os.path.isabs('\\folder\\name.txt')
True
>>> os.path.isabs('name.txt')
False 
```

但是，这将失败，因为相对路径不是以斜线开头：

```
>>> os.path.isabs('folder\\name.txt')
False 
```

**[适用于上述所有情况的解决方案，对带有或不带有斜杠的相对路径不敏感，将使用os.path.basename(path)](https://docs.python.org/2/library/os.path.html#os.path.basename "os.path.basename")**将路径尾部与路径本身进行比较。如果它们相等，则只是一个名称：

```
>>> os.path.basename('C:\\folder\\name.txt') == 'C:\\folder\\name.txt'
False
>>> os.path.basename('\\folder\\name.txt') == '\\folder\\name.txt'
False
>>> os.path.basename('folder\\name.txt') == 'folder\\name.txt'
False
>>> os.path.basename('name.txt') == 'name.txt'
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:29:21.837

你试过了吗

```
os.path.basename 
```

或者

```
os.path.dirname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:23:51.497

您可以使用[`isdir()`](http://docs.python.org/2/library/os.path.html#os.path.isdir)和[`isfile()`](http://docs.python.org/2/library/os.path.html#os.path.isfile)：

文件：

```
>>> os.path.isdir('a.txt')
False
>>> os.path.isfile('a.txt')
True 
```

目录：

```
>>> os.path.isfile('Doc')
False
>>> os.path.isdir('Doc')
True 
```

# php - 通过第三方 Web 应用程序的用户帐户配置文件实现安全的社交媒体访问

> ID：14371731
> 
> 赞同：0
> 
> 时间：2013-01-17T03:21:53.413
> 
> 标签：php, javascript, html, web-applications, web

我正在一个 Web 应用程序中工作，其中有用户帐户及其相关的个人资料页面。我想在用户的个人资料页面上添加三个链接，通过他们的个人资料页面将他们链接到相关的 Facebook、Twitter 和 LinkedIn 帐户。我还想实现一种安全的方式将用户凭据存储在本地，这样他们每次在我的 Web 应用程序中输入他们的个人资料时就不必手动登录这些服务（Facebook、Twitter、LinkedIn）。你认为最好的方法是，

1- 在流水账配置文件上实施社交媒体内容。2- 在本地安全地存储用户的凭据，以便在他们登录到我网站上的个人资料帐户后自动登录到任何社交媒体。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:32:48.197

您不能在第三方网站上为用户登录。您不能存储他们的第三方凭据并“帮助”他们登录，除非第三方通过某些 API/身份验证机制**明确支持这一点。**否则，用户将始终必须自己登录第三方站点。

反过来，Facebook/Twitter 等提供了一个 API，*您*可以支持该 API 来帮助用户使用第三方凭据登录*您的站点。*这不会自动反其道而行之。*您*必须提供 Facebook/Twitter 必须明确支持的 API，以帮助用户使用存储在*您*服务器上的凭据登录到他们的站点。

# mysql - MySQL：从一张表中插入/更新多行

> ID：14371732
> 
> 赞同：0
> 
> 时间：2013-01-17T03:22:05.533
> 
> 标签：mysql

我有一个设备系统，用户可以在其中选择一个设备并在他们的帐户中存储多达 10 个设备。任何时候都只能有一台设备处于活动状态。

我正在尝试提出正确的 MySQL 查询，以根据用户选择的设备插入/更新以下 userdevice 表；添加任何新设备（如果它尚未在他们的帐户中），并使其帐户上的任何其他设备处于非活动状态（0）。

$userId、$newDeviceId 和 $oldActiveDeviceId 可用于构造查询。

```
CREATE TABLE IF NOT EXISTS `userdevice` (
  `userid` int(11) NOT NULL,
  `deviceid` int(11) NOT NULL,
  `dateadded` datetime NOT NULL,
  `datelastactive` datetime NOT NULL,
  `active` tinyint(4) NOT NULL,
  PRIMARY KEY (`userid`,`deviceid`),
  KEY `active` (`active`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

一些样本数据：

```
INSERT INTO `userdevice` (`userid`, `deviceid`, `dateadded`, `datelastactive`, `active`)         VALUES
(1, 1294, '2013-01-17 02:46:09', '2013-01-17 02:48:00', 1),
(1, 1307, '2013-01-17 02:45:24', '2013-01-17 02:45:00', 0),
(1, 1760, '2013-01-17 02:40:45', '2013-01-17 02:42:00', 0); 
```

我想出了以下查询，但当然它会在更新 oldActiveDeviceId 时重置“datelastactive”字段：

```
INSERT INTO userdevice
(userid, deviceid, dateadded, datelastactive, active
VALUES
($userId,$newestDeviceId,NOW(),NOW(),1), 
($userId,$oldActiveDeviceId,'','',0)
ON DUPLICATE KEY
UPDATE datelastactive = VALUES(datelastactive), active = VALUES(active) 
```

另一个问题是它允许两个设备处于活动状态。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:34:30.523

要修复 datelastactive，请将 datelastactive 更改为 NOW()。

```
INSERT INTO userdevice
    (userid, deviceid, dateadded, datelastactive, active
VALUES
    ($userId,$newestDeviceId,NOW(),NOW(),1), 
    ($userId,$oldActiveDeviceId,'','',0)
ON DUPLICATE KEY UPDATE datelastactive = NOW(), active = VALUES(active) 
```

单个活动记录：

确保单个活动记录的最佳建议是将其保存在单独的[子记录表中](https://stackoverflow.com/questions/3228161/could-i-make-a-column-in-a-table-only-allows-one-true-value-and-all-other-rows)。这可能需要您稍微更新一下您的表格。例如，您可能需要添加一个 ID 作为 PK，然后将 userid / deviceid 设置为 UNIQUE。

# python - 使用 sqlalchemy 时如何进行提前连接？

> ID：14371735
> 
> 赞同：1
> 
> 时间：2013-01-17T03:22:41.310
> 
> 标签：python, sql, sqlalchemy

有人可以告诉我如何在 sqlalchemy 中完成此任务吗？

```
SELECT
  *
FROM animals a
INNER JOIN species s
  ON (s.species_id=a.id AND s.type='mammals')
LIMIT 1; 
```

我尝试了很多不同的东西，但我不断得到奇怪的结果。如果有人请帮助我，我将不胜感激。

我做过的一些代码：

```
result = session.query(Animal).\
    join((Species, (Species.species_id==Animal.id)), (Species, (Species.type=='mammals')))
    .all() 
```

这当然给了我：

```
SELECT
      *
    FROM animals
    INNER JOIN species
      ON (species.species_id=animals.id)
    INNER JOIN species
      ON (AND species.type='mammals')
    LIMIT 1; 
```

但这并不是我想要的。

提前致谢。

-e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:10:36.400

你只需要`and_`：

```
from sqlalchemy.sql import and_

result = session.query(Animal).join(Species, and_(
    Species.species_id == Animal.id,
    Species.type == 'mammals',
)).all() 
```

`join`编辑：这是使用SQLAlchemy 0.7 及更高版本中可用的“双参数调用形式” 。

# c# - 客户端的响应时间比tomcat中的QTime长得多

> ID：14371745
> 
> 赞同：0
> 
> 时间：2013-01-17T03:23:43.543
> 
> 标签：c#, solr

我有一个 solr 网站，其中包含大约 500 个文档（架构中定义了 30 个文件），以及**在同一台机器上的**ac# 客户端，它将向该 solr 网站发送 http get 请求。这些日志是由我的 c# 客户端记录的：

```
01-16 23:54:49,301 [107] INFO LogHelper - requst time too long: 1054, solr time: 1003
01-16 23:54:49,847 [63] INFO LogHelper - requst time too long: 1068, solr time: 1021
01-16 23:57:17,813 [108] INFO LogHelper - requst time too long: 1051, solr time: 1027
01-16 23:57:18,313 [111] INFO LogHelper - requst time too long: 1031, solr time: 1007
and so on… 
```

您可以看到，来自 solr 的查询时间非常长，而且每次都相似（在 1000 毫秒到 1050 毫秒之间）。同时在tomcat中对应的日志：

```
2013-1-16 23:54:49 org.apache.solr.core.SolrCore execute
Info: [suit1] webapp=/vanclsearchV2 path=/select/ params={fl=id,typeid,createtime,vprice,sprice,price,totalassesscount,totalsalescount,productcode,productname,stylecode,tag,vpricesku,spricesku,pricesku,userrate,assesscount,lstphotos,mainphotos,salesflag,isduanma,detailsalescount,productplusstyleinfo&sort=createtime+desc&start=0&q=*:*&wt=json&fq=ancestorsid:(28976+OR+28978)&fq=typeid:(1)&rows=30} hits=43 status=0 QTime=0 
2013-1-16 23:54:49 org.apache.solr.core.SolrCore execute
Info: [suit1] webapp=/vanclsearchV2 path=/select/ params={fl=id,typeid,createtime,vprice,sprice,price,totalassesscount,totalsalescount,productcode,productname,stylecode,tag,vpricesku,spricesku,pricesku,userrate,assesscount,lstphotos,mainphotos,salesflag,isduanma,detailsalescount,productplusstyleinfo&sort=createtime+desc&start=0&q=*:*&wt=json&fq=ancestorsid:(28976+OR+28978)&fq=typeid:(1)&rows=30} hits=43 status=0 QTime=0
2013-1-16 23:57:17 org.apache.solr.core.SolrCore execute
Info: [suit1] webapp=/vanclsearchV2 path=/select/ params={fl=id,typeid,createtime,vprice,sprice,price,totalassesscount,totalsalescount,productcode,productname,stylecode,tag,vpricesku,spricesku,pricesku,userrate,assesscount,lstphotos,mainphotos,salesflag,isduanma,detailsalescount,productplusstyleinfo&sort=createtime+desc&start=0&q=*:*&wt=json&fq=ancestorsid:(27547+OR+27614)&rows=30} hits=9 status=0 QTime=0 
2013-1-16 23:57:18 org.apache.solr.core.SolrCore execute
Info: [suit1] webapp=/vanclsearchV2 path=/select/ params={fl=id,typeid,createtime,vprice,sprice,price,totalassesscount,totalsalescount,productcode,productname,stylecode,tag,vpricesku,spricesku,pricesku,userrate,assesscount,lstphotos,mainphotos,salesflag,isduanma,detailsalescount,productplusstyleinfo&sort=createtime+desc&start=0&q=*:*&wt=json&fq=ancestorsid:(27547+OR+27614)&rows=30} hits=9 status=0 QTime=0 
```

每一次奇怪，所有的 QTime 都为零！谁能解释这种情况，以及如何解决这个问题？

```
string QUERY_TEMPLATE = ConfigurationManager.AppSettings["solr-select-url"] + "/select/?fl={0}&q={1}{2}&start={3}&rows={4}&sort={5}&wt=json";

WebRequest request = HttpWebRequest.Create(string.Format(QUERY_TEMPLATE,
                                                requestInfo.BrowserType==BrowserTypeEnum.Style?STYLE_FIELDS:COLOR_FIELDS,
                                                string.IsNullOrWhiteSpace(requestInfo.KeyWord) ? "*:*" : requestInfo.KeyWord,
                                                filterQuery,
                                                (requestInfo.Page - 1) * requestInfo.RowsCount,
                                                requestInfo.RowsCount,
                                                sortFiled)
                                            );
request.Method="GET";

string resultString=null;

Stopwatch solrWatch = new Stopwatch();
solrWatch.Start();
using (WebResponse response = request.GetResponse())
{
    using (Stream stream = response.GetResponseStream())
    {
        using (StreamReader reader = new StreamReader(stream))
        {
            resultString = reader.ReadToEnd();
        }
    }
}
solrWatch.Stop();
solrTime = solrWatch.ElapsedMilliseconds; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:25:07.583

QTime 是 Solr 进行搜索的时间。其余时间用于生成响应，包括从磁盘获取字段的存储内容并将它们生成为 JSON 格式。

我会研究以下几件事：

*   使用[SolrNet](http://code.google.com/p/solrnet/)库访问 Solr 而不是自己进行查询和解析响应
*   检查您是否正在发送调试信息并将其关闭；只需查看返回的 JSON 并在 solrconfig.xml 中进行配置
*   检查您是否真的需要所有这些字段作为响应
*   检查任何特定字段是否真的很大，以及您是否受到磁盘而不是 CPU 的瓶颈；如果是这样，您可以（在 Solr 4 中）将该字段声明为压缩存储 - 这可以加快从磁盘获取该字段的速度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:16:58.880

感谢您添加用于访问 Solr 服务器的代码。从您的 tomcat 日志可以看出，对 Solr 的请求发生得非常快。（Solr 正在缓存查询，因此 QTime 为 0，如您所述）。您的 1000+ 毫秒时间不是 Solr 服务器响应您的时间。这段时间用于将 Solr 响应传输回您的客户端（在这种情况下很简单，因为它位于同一服务器上）并读取响应流。

此外，您可能需要考虑使用[SolrNet](http://code.google.com/p/solrnet)客户端从 C# 访问 Solr。它为查询 Solr 提供了更丰富的接口，并将查询结果映射到 POCO 对象。

# charts - highcharts - 是否可以缩放饼图

> ID：14371747
> 
> 赞同：1
> 
> 时间：2013-01-17T03:23:54.080
> 
> 标签：charts, highcharts, zooming, slice, pie-chart

我想知道是否可以放大饼图中的切片。

我的图表是根据这个示例[jsfiddle 示例建模的](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/pie-donut/)

```
chart: {
            renderTo: 'container',
            type: 'area',
            zoomType: 'x',
        } 
```

但它似乎不适用于饼图。我在这里错过了什么吗？理想情况下，我会有一个有 2 层的饼图，其中外层作为内层的子层。When selecting a child slice, I could then have an entire pie chart showing that slice alone, along with its own children, etc.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:13:58.010

不幸的是，饼图不允许缩放，因为它的属性向您显示

x: 放大 x 轴 y: 放大 y 轴 xy: 放大两个轴

但是您可以使用`size`JavaScript 的属性来显示缩放。 [大小属性演示](http://jsfiddle.net/zaheerahmed/74T6h/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:31:51.357

我想我找到了我真正想要的东西。它不是缩放，而是在切片上捕获点击事件的选项。

为了做到这一点，必须使用`allowPointSelect`属性，它可以像这样添加到饼图中（只是几种不同方式中的一种）：

```
plotOptions: {
    pie: {
        shadow: false,
        allowPointSelect: true,
    },
} 
```

然后，为了捕获点击，必须声明正在使用的`events`属性`series`：

```
series: [{
    name: 'Example',
    data: [
        {
            name: 'Firefox',   
            value: 45.0
        },
        {
            name: 'IE',
            value: 26.8
        },
        {
            name: 'Chrome',
            value: 12.8,
        },
    ],
    size: '100%',
    point: {
        events: {
           click: function() {
               // some code to execute when clicking a slice
               alert('Slice name: ' + this.name + ' and value: ' + this.value);
           }
        }
    }
}] 
```

然后在那个click函数中，可以执行任何javascript代码，也可以访问数据中声明的字段。因此，理论上可以即时创建第二个饼图。

# java - 如何从 URLConnection 中删除标头

> ID：14371748
> 
> 赞同：11
> 
> 时间：2013-01-17T03:23:54.860
> 
> 标签：java, post, content-type, httpurlconnection, urlconnection

我正在与接受发布数据而不是表单数据的文件上传服务交谈。默认情况下，java`HttpURLConnection`将`Content-Type`标头设置为`application/x-www-form-urlencoded`. 如果我发布纯数据，这显然是错误的。

我（客户）不知道内容类型。我根本不想设置`Content-Type`标题。该服务有一个功能，它会猜测内容类型（基于文件名，从文件中读取一些数据等）。

如何取消设置标题？没有删除标头，将其设置为`null`不会更改值并将其设置为空字符串会导致标头设置为没有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:05:25.797

我还没有测试过这种方法，但你可以试试这个：

扩展 HttpURLConnection 并尝试覆盖其 getContentHandler() 和 setContentHandler(...) 方法。这很可能应该起作用，您将查看 getContentHandler() 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:04:12.973

使用 Apache [HttpClient](http://hc.apache.org/httpcomponents-client-ga/quickstart.html)而不是 URLConnection

使用 fluent [Request](http://hc.apache.org/httpcomponents-client-ga/fluent-hc/apidocs/org/apache/http/client/fluent/Request.html)生成你的请求

使用 removeHeader()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:27:16.420

您是什么意思“我根本不希望设置 Content-Type 标头”？

浏览器（或其他 http 客户端）将您的 post 请求发送到服务器，因此它必须通知服务器它对参数进行编码的方式。

如果未设置 Content-Type 标头，则在服务器端，您（=您的服务器）将无法理解如何解析接收到的数据。

如果您没有设置 Content-Type，将使用默认值。

您的浏览器（或其他 http 客户端）必须做两件事：

1.  发送键/值对。
2.  通知服务器键/值对是如何编码的。

所以，完全摆脱这个头是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-14T16:40:37.520

我刚刚通过将标头设置为空来完成此操作。

```
connection.setRequestProperty(MY_HEADER, null); 
```

# javascript - 无法在 FireFox 中输入任何内容

> ID：14371750
> 
> 赞同：2
> 
> 时间：2013-01-17T03:24:14.827
> 
> 标签：javascript, css, asp.net-mvc, jquery-ui, cross-browser

除了所有其他问题外，我还遇到了奇怪的问题。我正在创建 ASP.NET MVC 应用程序。我正在使用 flexigrid 并尝试使用模态对话框。在 IE、Google Chrome 和 Opera 中，我只能在 Client No control 中输入数字，但在 FireFox 中我无法输入任何内容。

这是控件的呈现方式：

```
<div id="add-edit-dialog" class="ui-dialog-content ui-widget-content" style="width: auto; min-height: 0px; height: 622px;" scrolltop="0" scrollleft="0">
<form id="add-edit-form" novalidate="novalidate">
<fieldset>
<legend>Client Info</legend>
<input id="fntype" type="hidden" name="fntype" value="">
<input id="ClientId" type="hidden" value="" name="ClientId" data-val-number="The field ClientId must be a number." data-val="true">
<div class="editor-label" style="background-color: rgb(255, 255, 255);">
<div class="editor-field" style="background-color: rgb(255, 255, 255);">
<input id="ClientNumber" class="numericOnly input-validation-error" type="number" value="" name="ClientNumber" data-val-required="The Client No field is required." data-val-remote-url="/Client/doesClientNoExist" data-val-remote-type="POST" data-val-remote-additionalfields="*.ClientNumber,*.ClientId" data-val-remote="Client Number already exists. Please enter a different Client Number." data-val-number="The field Client No must be a number." data-val="true">
<span class="field-validation-error" data-valmsg-replace="true" data-valmsg-for="ClientNumber"> 
```

我正在使用我自己的类 numericOnly 并输入数字（在 Google Chrome 中显示为微调器）。

我有 CardNumbers.js 文件，我以这种方式定义 numericOnly 类：

```
$(".numericOnly").keypress(function (e) {
    if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) return false;
}); 
```

上面的代码是我不久前在 StackOverflow 的一个问题中找到的，它在其他浏览器中运行良好。

那么，您是否看到这里可能出了什么问题以及为什么我只能在 FireFox 中输入任何内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:13:13.757

试试这个解决方案。我希望这就是你要找的。

只是改变

**从**

```
if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) 
```

**到**

```
if(String.fromCharCode(e.which).match(/[^0-9]/g)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T04:39:16.077

试试这个：

```
$(document).ready(function() {
        $(".numericOnly").keydown(function(event) {
            // Allow: backspace, delete, tab, escape, and enter
            if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
                 // Allow: Ctrl+A
                (event.keyCode == 65 && event.ctrlKey === true) || 
                 // Allow: home, end, left, right
                (event.keyCode >= 35 && event.keyCode <= 39)) {
                     // let it happen, don't do anything
                     return;
            }
            else {
                // Ensure that it is a number and stop the keypress
                if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                    event.preventDefault(); 
                }   
            }
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T03:54:44.360

这听起来更像是一个浏览器问题。如果您的 Firefox 已过期，请尝试通过帮助 > 关于或访问[http://getfirefox.com/](http://getfirefox.com/)进行更新。我刚刚将它带到了 Firefox v18（发布频道的最新版本）中的 HTML 测试平台，它运行良好。

# javascript - javascript (x, y, z) + a 表示什么

> ID：14371752
> 
> 赞同：1
> 
> 时间：2013-01-17T03:24:43.120
> 
> 标签：javascript

我刚刚从 JavaScript 示例中看到了一个表达式，如下所示：

```
 var some = (x, y, z) + a; 
```

这是什么意思？结果是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T03:28:42.283

这是 JavaScript 的[**逗号运算符**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)

```
x, y, z; // is the same as
x;
y;
z; // this is the last thing returned, so
(x, y, z) === z; 
```

因此，`var some = (x, y, z) + a;`与 相同`var some = z + a;`，除了`x`和`y`也被评估。

如果您想将内容缩短为一行或需要在第二个内容可用之前评估某些内容，这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:44:41.860

下面的示例显示了您的解决方案，您看到它仅显示最后一个赋值意味着 (x,y,z) 它只需要 z 并将其添加到“a”并显示它。

```
<script>
    x=1;
    y=2;
    z=0;
    a=0;
    var some = (x, y, z) + a;
    alert(some)
</script> 
```

# air - flex air 打开新的 nativewindow 空对象

> ID：14371753
> 
> 赞同：0
> 
> 时间：2013-01-17T03:24:45.910
> 
> 标签：air, null, nativewindow

我在windowapplication中添加了一个新窗口，我是通过nativeWindow完成的，但是当我调试它时，新窗口的内容总是没有完全加载。以下是错误类型错误：错误 #1009：无法访问空对象引用的属性或方法。

我确实添加了 creation_complete 事件，但它仍然无法正常工作。为什么？有人可以帮忙吗？

```
opts = new NativeWindowInitOptions();
opts.resizable=false;
opts.maximizable=false;
win = new NativeWindow(opts);
win.alwaysInFront=true;

var newWindow:TestWindow=new TestWindow();
newWindow.addEventListener(FlexEvent.CREATION_COMPLETE,performWindowComplete);
win.activate();

public function performWindowComplete(e:FlexEvent):void
{
     win.stage.addChild(e.currentTarget as TestWindow);
} 
```

在TestWindow中，我只添加了一个textArea，当我打开这个新窗口时，我点击了textarea，它抛出了null object.我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:47:58.897

CREATION_COMPLETE 事件永远不会触发，因为您的组件未添加到显示列表/阶段。首先您需要添加到显示列表。

```
opts = new NativeWindowInitOptions();
opts.resizable=false;
opts.maximizable=false;
win = new NativeWindow(opts);
win.alwaysInFront=true;

var newWindow:TestWindow=new TestWindow();
newWindow.addEventListener(FlexEvent.CREATION_COMPLETE,performWindowComplete);
win.addElement(newWindow); //Todo
win.activate(); //or Set visible = true 
```

# jquery - jQuery 仅将类应用于有问题的 div

> ID：14371756
> 
> 赞同：1
> 
> 时间：2013-01-17T03:25:03.977
> 
> 标签：jquery

我有一排div，都有相同的类。他们在页面上显示用户评论。

如果少于 4，我写了一个 if 语句来改变评论的宽度。

有没有一种方法可以只针对这一行中的那些 div，即使它们共享相同的类名

**JS**

```
// if statements to sort out widths if there are < 4 comments
if(commentLength === 1){
    $('.comment').css('min-width','1453px');
}
else if(commentLength === 2){
    $('.comment').css('min-width','700px');
}
else if(commentLength === 3){
    $('.comment').css('min-width','470px');
} 
```

**HTML**

```
<div class="commentary">
    <div class="comment">Sample commnent</div>
    <div class="comment">Sample commnent</div>
    <div class="comment">Sample commnent</div>
    <div class="comment">Sample commnent</div>
</div>
<div class="commentary">
    <div class="comment">Sample commnent</div>
    <div class="comment">Sample commnent</div>
</div>
<div class="commentary">
    <div class="comment">Sample commnent</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:32:51.623

```
$(".commentary").each(function () {
   var $comments = $(this).find('.comment');
   var commentLength = $comments.length;

   //your JS code goes here, but replace $('.comment') with $comments
}); 
```

小提琴：http: [//jsfiddle.net/jG6FB/](http://jsfiddle.net/jG6FB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:32:55.887

```
$('.commentary').each(function(){
    var $myComments = $(this).find('.comment');
    var commentLength = $myComments.length;

    if(commentLength === 1){
        $myComments.css('min-width','1453px');
    }
    else if(commentLength === 2){
        $myComments.css('min-width','700px');
    }
    else if(commentLength === 3){
        $myComments.css('min-width','470px');
    }        
}); 
```

# python - 可以从 C 或其他语言空间调用采用 *args/**kwargs 的 Python 函数吗？

> ID：14371758
> 
> 赞同：7
> 
> 时间：2013-01-17T03:25:28.000
> 
> 标签：python, c

采用如下定义的规范 Python 函数：

```
def foo(*args, **kwargs):
  print("args:", len(args))
  for i in args:
    print(i)

  print("kwargs:", len(kwargs))
  for k in kwargs:
    print(k, kwargs[k]) 
```

从 Python 调用此函数可能如下所示：

```
some_list = ['one', 'two', 'three']
some_kwords = { "name1" : "alice", "name2" : "bob", "name3" : "carol" }

foo(*some_list, **some_kwords) 
```

Python C API 是否提供了某种从 C 空间调用此函数的方法？如何将以上三行转换为 C 等效项？

请注意，[在一个类似的问题](https://stackoverflow.com/questions/6500755/how-do-you-pass-kwargs-to-a-boost-python-wrapped-function)中，使用`boost::python`C++ 调用这个关键字参数函数，其语法与 Python 几乎相同，这真是一个技巧！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T03:49:39.660

要在 Python/C 中调用具有任意位置和关键字参数的函数，等效于`function(*args, **kwds)`语法，请使用`PyObject_Call`：

```
/* error checking omitted for brevity */
PyObject *some_list = PyObject_BuildValue("(sss)", "one", "two", "three");
PyObject *some_kwords = PyObject_BuildValue("{s:s,s:s,s:s}",
                          "name1", "alice", "name2", "bob", "name3", "carol");
PyObject *ret = PyObject_Call(foo, some_list, some_kwords);
Py_DECREF(some_list);
Py_DECREF(some_kwords); 
```

# c++ - 字符串布尔比较 - 为什么？

> ID：14371760
> 
> 赞同：2
> 
> 时间：2013-01-17T03:25:43.230
> 
> 标签：c++, boost-variant

`boost::variant<int,std::string,bool>`当我遇到意外行为时，我正在与它的访问者一起工作：字符串和布尔值是可比较的。我不知道，为什么它会这样工作，但我发现它很有趣。我唯一的想法是带有布尔值的变体被解释为字符？有人可以给我解释一下吗？比较访客：

```
#include <iostream>
#include <algorithm>
#include <vector>
#include <boost/variant.hpp>
#include <boost/function.hpp>

struct my_less : boost::static_visitor<bool*>
{
   template<typename T>
   bool* operator()(T a, T b) const
   {
       return a<b ? new bool(true) : new bool(false);
   }

   template<typename T, typename U>
   bool* operator()(T a, U b) const
   {
       return NULL;
   }
};

int main()
{
typedef boost::variant<int,bool,std::string> datatype;
datatype *a = new datatype(false);
datatype *b = new datatype("abc");

my_less cmp;

bool* val = boost::apply_visitor(cmp,*a,*b);

if(val)
{
    std::cout << *val;
}
else
{
    std::cout << "NULL";
}

} 
```

编辑这是带有一些测试用例的扩展主要功能：

```
void show_result(bool* val)
{
if(val)
{
    std::cout << *val << std::endl;
}
else
{
    std::cout << "NULL" << std::endl;
}
}

int main()
{
//std::string a = "bbb";
//bool b = true;
//std::cout << b<a;      //compilation error

typedef boost::variant<int,bool,std::string> datatype;
datatype int_value_1(4);
datatype int_value_2(3);
datatype string_value("abc");
datatype bool_value(true);
my_less cmp;

std::cout<<"First result, compare ints 4 and 3:"<<std::endl;
bool* val = boost::apply_visitor(cmp,int_value_1,int_value_2);
show_result(val);

std::cout<<"Second result, compare int to string 4 to abc " << std::endl;
val = boost::apply_visitor(cmp,int_value_1,string_value);
show_result(val);

std::cout <<"Third result, int 4 to bool true:" << std::endl;
val = boost::apply_visitor(cmp,int_value_1,bool_value);
show_result(val);

std::cout<<"Fourth result, string abc to bool true" << std::endl;
val = boost::apply_visitor(cmp,string_value,bool_value);
show_result(val);

} 
```

输出：

```
First result, compare ints 4 and 3:
0
Second result, compare int to string 4 to abc
NULL
Third result, int 4 to bool true:
NULL
Fourth result, string abc to bool true
0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T04:04:23.683

好的，既然你已经完全改变了你的程序，让我再试一次。

问题是：

```
datatype *b = new datatype("abc"); 
```

`"abc"`是一个`const char*`，不是一个`std::string`。如果你想创建一个`std::string`变体，你需要明确地这样做。否则，您最终将创建一个`bool`变体，因为所有指针都可以转换为`bool`，包括`const char*`指针。

试试这个

```
datatype *b = new datatype(std::string("abc")); 
```

* * *

`bool`和之间的这种相互作用`std::string`显然是众所周知的，而且有些令人恼火。`boost::variant`提供了一个模板化的构造函数，但解析规则更喜欢内置转换，`bool`并且在 C++ 中无法在构造函数上指定模板特化。可以明确专门化分配，因此您可以编写：

```
datatype b;
b.operator=<std::string>("abc"); 
```

这可能比

```
datatype b;
b = std::string("abc"); 
```

如果您不包含`bool`作为变体，则字符串文字会自动转换为`std::string`. 也许可以使用某种代理伪布尔类。我从来没有试过。

# c# - CreateCompatibleBitmap 返回重叠的 I/O 操作正在进行中

> ID：14371761
> 
> 赞同：0
> 
> 时间：2013-01-17T03:25:49.577
> 
> 标签：c#, winapi, screen-capture

这是一个使用 BitBlt 的相当标准的屏幕截图功能，可以在网上找到：

主功能：

```
while(true)
{
    printscreen = GetDesktopImage(X, Y, secMonitorSize.Width, secMonitorSize.Height);
    Thread.Sleep(1000);
} 
```

捕获桌面功能：

```
public Bitmap GetDesktopImage(int X, int Y, int width, int height)
{
    IntPtr hDC = WIN32_API.GetDC(WIN32_API.GetDesktopWindow());
    IntPtr hMemDC = WIN32_API.CreateCompatibleDC(hDC);
    IntPtr m_HBitmap = WIN32_API.CreateCompatibleBitmap(hDC, width, height);

    if (m_HBitmap != IntPtr.Zero)
    {
        IntPtr hOld = (IntPtr)WIN32_API.SelectObject(hMemDC, m_HBitmap);
        WIN32_API.BitBlt(hMemDC, 0, 0, width, height, hDC, X, Y, WIN32_API.SRCCOPY | WIN32_API.CAPTURE_BLT);

        WIN32_API.SelectObject(hMemDC, hOld);
        WIN32_API.DeleteDC(hMemDC);
        WIN32_API.ReleaseDC(WIN32_API.GetDesktopWindow(), hDC);

        Bitmap printscreen = System.Drawing.Image.FromHbitmap(m_HBitmap);
        WIN32_API.DeleteObject(m_HBitmap);

        return printscreen;
    }

    return null;
} 
```

问题是代码可以正常运行大约 20 分钟，然后 CreateCompatibleBitmap 将继续返回 0。在 CreateCompatibleBitmap 上使用 setlasterror=true，它会显示错误代码 997（Overlapped I/O Operation Is In Progress）。

只有赛门铁克在后台运行。任何人都知道如何开始故障排除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:20:29.680

GDI 函数不使用`GetLastError()`，因此 using`setlasterror=true`将报告早期 API 调用的错误。

尝试这个：

```
public Bitmap GetDesktopImage(int X, int Y, int width, int height)
{
    Bitmap printscreen = null;

    IntPtr hWnd = WIN32_API.GetDesktopWindow();
    IntPtr hDC = WIN32_API.GetDC(hWnd);
    if (hDC != IntPtr.Zero)
    { 
        IntPtr hMemDC = WIN32_API.CreateCompatibleDC(hDC);
        if (hMemDC != IntPtr.Zero)
        {
            IntPtr m_HBitmap = WIN32_API.CreateCompatibleBitmap(hDC, width, height);
            if (m_HBitmap != IntPtr.Zero)
            {
                IntPtr hOld = (IntPtr)WIN32_API.SelectObject(hMemDC, m_HBitmap);
                WIN32_API.BitBlt(hMemDC, 0, 0, width, height, hDC, X, Y, WIN32_API.SRCCOPY | WIN32_API.CAPTURE_BLT);
                WIN32_API.SelectObject(hMemDC, hOld);

                printscreen = System.Drawing.Image.FromHbitmap(m_HBitmap);
                WIN32_API.DeleteObject(m_HBitmap);
            }

            WIN32_API.DeleteDC(hMemDC);
        }

        WIN32_API.ReleaseDC(hWnd, hDC);
    }

    return printscreen;
} 
```

# r - 这是因为浮点错误吗？

> ID：14371763
> 
> 赞同：1
> 
> 时间：2013-01-17T03:25:59.083
> 
> 标签：r, debugging, floating-point, statistics, probability

我不明白如何解决这个问题。`G`是一组值，我知道其范围是`[0, 1e+12]`.

```
> G = c(500,10000, 5001, 103, 10, 10000)
> H = density(G)
> sum(diff(H$x)*H$y) # Area under the curve should be 1

[1] 0.999989 
```

但是，为了能够比较两个数据集，我想提供`from`和`to`到`density`函数，以便比较这些分布是有意义的。因此，我这样做了：

```
> H = density(G, from=0, to=1e+12)
> sum(diff(H$x)*H$y)

[1] 2576.354

Warning message:
In diff(H$x) * H$y :
  longer object length is not a multiple of shorter object length 
```

当我打印出估计的密度时，原因就很明显了：

```
[1] 1.315415e-04 1.102126e-07 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 9.471181e-26
  [8] 1.565915e-22 2.563577e-26 4.272754e-23 0.000000e+00 0.000000e+00 8.951887e-26 1.516549e-22
 [15] 3.870985e-25 6.612221e-22 0.000000e+00 0.000000e+00 1.275922e-25 2.216194e-22 0.000000e+00
 [22] 0.000000e+00 5.567175e-26 9.835567e-23 0.000000e+00 0.000000e+00 1.866999e-25 3.355962e-22
 [29] 1.544394e-25 2.800493e-22 6.026824e-26 1.102559e-22 0.000000e+00 0.000000e+00 0.000000e+00
....
....
[484] 2.430850e-22 1.346442e-25 0.000000e+00 0.000000e+00 1.135491e-22 6.399622e-26 0.000000e+00
[491] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[498] 8.914726e-23 5.240562e-26 2.189813e-22 1.297914e-25 4.773404e-22 2.852380e-25 3.289275e-22
[505] 1.981486e-25 1.382136e-23 8.393153e-27 8.090789e-24 4.952458e-27 3.042214e-24 1.876931e-27
[512] 1.809917e-22 
```

虽然 R 正确估计极端点的密度为 0，但有些非零。这是我面临的浮点错误还是我做错了什么？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:07:58.560

来吧。您未能重现警告消息。我怀疑这是差异的关键。该`diff(x)`函数为您提供一个比 y 短一个元素的向量。

R 操作包括参数回收，因此第一个密度差异元素将乘以最大的 y 元素。

# linux - 为什么linux内核的Makefile中的变量不起作用？

> ID：14371764
> 
> 赞同：1
> 
> 时间：2013-01-17T03:26:01.167
> 
> 标签：linux, makefile, kernel

内核 Makefile 像`KBUILD_OUTPUT`在任何目标的 make 过程之外一样初始化变量。代码是这样的：

```
ifeq ("$(origin O)", "command line")
  KBUILD_OUTPUT := $(O)
endif 
```

但是当我尝试`KBUILD_OUTPUT`在目标的制作过程中输出时，例如目标`help`，我发现它没有定义。我修改的代码是这样的：

```
help:
    @echo 'KBUILD_OUTPUT: ${KBUILD_OUTPUT}' 
```

当我执行`make O=../build help`时，`KBUILD_OUTPUT`变量为空。我想知道什么时候启动？

非常感谢。

**更新**

但是，当我用这个写一个 Makefile 时：

```
ifeq ("$(origin O)", "command line")
  KBUILD_OUTPUT := $(O)
endif

help:
    @echo 'KBUILD_OUTPUT: ${KBUILD_OUTPUT}' 
```

那我跑`make O=../build help`，我看看`KBUILD_OUTPUT: ../build`。

内核的 Makefile 有什么特别之处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:59:47.570

内核制作过程比大多数制作过程要复杂一些。主内核 makefile 将递归调用自己（即，它调用 make 将自己指定为 makefile，但给出不同的目标集）。正因为如此，主内核 Makefile 的大部分都有围绕它们的条件，一些部分是在 Make 首次调用时执行的，而其他部分是在 makefile 作为其自身的子项调用时执行的。您引用的代码实际上是：

```
ifeq ($(KBUILD_SRC),)

# OK, Make called in directory where kernel src resides
# Do we want to locate output files in a separate directory?
ifeq ("$(origin O)", "command line")
  KBUILD_OUTPUT := $(O)
endif 
```

当您创建帮助目标时，Makefile 将只运行该规则，因此不会递归调用自身，因此不会设置 KBUILD_SRC，因此 KBUILD_OUTPUT 将保持未设置。

约翰

# ember.js - Ember.js 路由器 v2 动态 slug

> ID：14371767
> 
> 赞同：0
> 
> 时间：2013-01-17T03:26:42.440
> 
> 标签：ember.js, ember-data

在以下示例中，使用新的 Router v2 API，ember 应用程序的行为与预期相同，但有一个异常。当悬停在动态创建的链接上时，使用注册的#linkTo Handlebars url 显示未定义。

我如何在 URL 中有一个 slug 字段？

这是模型

```
App.Todo = DS.Model.extend({
  slug: DS.attr('string'),
  date: DS.attr('date'),
  updated: DS.attr('date'),
  task: DS.attr('string'),
  description: DS.attr('string')
}); 
```

我的路由器

```
App.Router.map(function(match){
  this.route('index', {path: '/'});
  this.resource('todos', {path: '/todos'}, function(){
    this.resource('create', {path: '/create'});
    this.resource('todo', {path: '/:slug'}, function(){
      this.resource('edit', {path: 'edit'});
    });
  });
}); 
```

我知道这确实显示“未定义”，但这会很好（车把）

```
{{#each todo in tasks}}
  <div class="user">
    {{#linkTo todo todo.slug}}<h4><i class="icon-list"></i>{{todo.task}}</h4>{{/linkTo}}
     <p>{{todo.description}}</p>
  </div>
{{/each}} 
```

感谢您的任何指点！我也在使用 Ember 数据

这是一个示例小提琴 [http://jsfiddle.net/R2SPs/6/](http://jsfiddle.net/R2SPs/6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T02:46:47.047

这适用于 ember 路由 v2.1 (01.16.13)

感谢 IRC 上 #emberjs 上的 rakl，这是一个解决问题的 mixin

```
 App.SlugRouter = Ember.Mixin.create({
        serialize: function(model, params) {
            var name, object;
            object = {};
            name = params[0];
            object[name] = model.get('slug');
            return object;
        }
    }); 
```

现在只要把它放在你的路由器和你的金色

```
App.TodoRoute = Ember.Route.extend(App.SlugRouter,{
    //insert your code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:49:08.550

路由的路径是“todo.index”，资源定义为：

```
this.resource('todo', {path: '/:slug'}, ... 
```

所以为它创建路由和控制器。

# php - 使用 Aptana Studio 3.3 和 MAMP 调试 PHP

> ID：14371768
> 
> 赞同：3
> 
> 时间：2013-01-17T03:26:48.140
> 
> 标签：php, debugging, mamp, aptana3

我正在尝试在 Aptana Studio 3.3 中设置 PHP 调试器以使用 MAMP。我有一个与 MAMP/htdocs 文件夹分开的本地项目文件夹；我通过将文件从本地项目文件夹复制到 htdocs 来“部署”到 MAMP。

我已经设置了 Aptana Studio->Editors->PHP->PHP Interpreters，方法是添加一个 XDebug 调试器类型的新解释器，可执行路径和 PHP ini 文件指向我的 MAMP 安装的适当位置和文件（/Applications/ MAMP/bin/php5.4.4[/bin/php || /conf/php.ini]）。PHP 调试器设置为 XDebug。Aptana 似乎很喜欢这样。

但是，当我在我的 htdocs 文件夹中打开一个 PHP 文件并尝试设置断点时，我收到错误消息“您尝试在其上放置断点的文件是外部（非工作区）文件。PHP 文件支持断点位于项目内部。”

而且，如果我尝试设置断点并在同一个 PHP 文件中启动调试器（但在我的本地项目文件夹/工作区而不是 htdocs 中），则不会发生任何事情。这是有道理的，因为该文件不在 htdocs 下，所以 MAMP 不知道它。

这意味着我的本地项目文件夹和我的 MAMP/htdocs 项目文件夹必须相同才能进行调试。我宁愿将我的项目文件与 htdocs 分开。

我非常感谢您提供以下建议：1) 如何在 MAMP 中设置 PHP 调试器以使其正常工作（我做错了什么？），以及 2) 是否可以设置调试器以使其正常工作将我的本地项目文件夹与 MAMP/htdocs 文件夹分开吗？

还有其他 StackOverflow 答案，但它们都描述了如何为不包含 PHP 调试器的早期版本的 Aptana Studio 进行设置。

谢谢。

# hadoop - Apache Hive regexp_extract UDF

> ID：14371769
> 
> 赞同：4
> 
> 时间：2013-01-17T03:26:53.413
> 
> 标签：hadoop, hive

我在 Apache Hive 中遇到了一段代码，例如 regexp_extract(input, '[0-9]*', 0)，有人可以向我解释一下这段代码的作用吗？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T03:41:59.917

从[Hive 手册 DDL](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF)中，它返回使用模式提取的字符串。例如`regexp_extract('foothebar', 'foo(.*?)(bar)', 2)`返回`bar`。

`index`参数是捕获组，它是一个整数，可以取以下值：

*   0：整个比赛，在我的例子中是`foothebar`
*   1：第一组，在我的例子中是`the`
*   2：第二组 在我的例子中是`bar`
*   n：第n组。如果 n 大于您的正则表达式中定义的实际组数，您的 Hive 查询将失败。

在您的示例中`regexp_extract(input, '[0-9]*', 0)`，您正在寻找由数值标识`input`并以数值开头的列的整个匹配项。

这里有一些例子：

*   `regexp_extract('9eleven', '[0-9]*', 0)`-> 返回`9`
*   `regexp_extract('9eleven', '[0-9]*', 1)`-> 查询失败
*   `regexp_extract('911test', '[0-9]*', 0)`-> 返回`911`
*   `regexp_extract('911test', '[0-9]*', 1)`-> 查询失败
*   `regexp_extract('eleven', '[0-9]*', 0)`-> 返回空字符串
*   `regexp_extract('test911', '[0-9]*', 0)`-> 返回空字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-01T18:02:06.067

上面的答案部分不正确。`regexp_extract('test911', '[0-9]*', 0)`肯定会返回 911。我们之前从未指定字符串的开头`[0-9]*`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-24T06:27:29.380

正则表达式`regexp_extract(input, '[0-9]*', 0)`将给出输入字符串中的所有起始数字。

例如，

```
select regexp_extract('442323test41234', '[0-9]*', 0) ==> 442323
select regexp_extract('44test41234', '[0-9]*', 0) ==> 44
select regexp_extract('test41234', '[0-9]*', 0) ==> 1 
```

但这不是提取起始数字的最佳方法。以下是更易读的格式：

```
select regexp_extract(input, '^([0-9]+).*?$', 1) 
```

上面的正则表达式说，列出字符串中开始的所有数字并忽略其余数字。

# php - 有效期及会员查询

> ID：14371771
> 
> 赞同：0
> 
> 时间：2013-01-17T03:27:00.203
> 
> 标签：php, sql

此更新到期和会员资格有什么问题？

```
 $unit = "Days";
      $length = "1";
      $newExpire = strtotime("+{$length} {$unit}");
      $sqlz  = "UPDATE users SET expire ='$newExpire' WHERE username ='{$_POST['custom']}'";
      $sql  = "UPDATE users SET membership ='14' WHERE username ='{$_POST['custom']}'";
      $retval = mysql_query( $sqlz, $sql, $conn ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:30:59.860

您的[mysql_query](http://php.net/manual/en/function.mysql-query.php) 参数错误，因此不支持多个查询，请更改

```
$retval = mysql_query( $sqlz, $sql, $conn ); 
```

至

```
$retval = mysql_query($sql, $conn ); 
```

您需要`mysql_query`单独为每个查询运行

# jsf-2 - p:dataTable 中的 p:commandLink 在第一次单击时不会调用操作，而只会在第二次单击时调用

> ID：14371772
> 
> 赞同：0
> 
> 时间：2013-01-17T03:27:04.683
> 
> 标签：jsf-2, primefaces, datatable, commandlink

我在 p:datatable 和用户点击链接时使用 primefaces commandLink。它应该导航到另一个页面，包括从表中选择的对象的特定信息。我不使用任何 ajax 标签。问题是当第一次点击链接时它没有调用操作实际上什么都没有发生，第二次点击它就可以工作。这是我的代码：

带有数据表的 JSF

```
<h:form>
        <h:outputText value="Nothing is found" rendered="#{searchView.citizenSearchList.rowCount==0}"/>

        <p:dataTable var="cust" value="#{searchView.citizenSearchList}" dynamic ="true" paginator="true" rows="5" paginatorAlwaysVisible="false" style="width: 700">
            <p:column>
                <f:facet name ="header">
                    <h:outputText value="name "/>
                </f:facet>
                <h:outputText value="#{cust.name}"/>
            </p:column>
            <p:column>
                <f:facet name ="header">
                    <h:outputText value="lastname "/>
                </f:facet>
                <h:outputText value="#{cust.citizenList.get(0).lastname}"/>
            </p:column>
            <p:column>
                <f:facet name ="header">
                    <h:outputText value="Id "/>
                </f:facet>
                <h:outputText value="#{cust.registernumber}"/>
            </p:column>
            <p:column>
                <f:facet name ="header">

                </f:facet>
                <p:commandLink value="See" action="#{customerView.prepareCitizenView()}"/>
            </p:column>
        </p:dataTable>

    </h:form> 
```

ManagedBean：customerView的action方法

```
@ManagedProperty(...)  
SearchView searchview;
public String prepareCitizenView(){
    this.customer = (Customer) searchview.citizenSearchResultList.getRowData();
    if(this.customer != null)
        return "citizeninfo";
    else
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "no data.", "no data"));
        return null;

} 
```

ManagedBean：搜索视图

```
DataModel citizenSearchResultList;

public DataModel getCitizenSearchResultList() {
    return citizenSearchResultList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:54:13.093

正如 mehmet cinar 所说，解决方案是在导航结果中使用重定向。我自己也遇到过这个问题。

返回“citizeninfo.jsf?faces-redirect=true”；

根据我的推断，原因是 ajax 提交将不包含新页面的 ViewState 请求参数。如果第一次没有 ViewState，事情就会破裂。

执行重定向后，重定向将正确地在请求中附加一个 Viewstate 参数，并且可以在第一次单击按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:09:46.450

您可以将重定向返回到同一页面。customerView.prepareCitizenView 可以通过重定向重新运行同一页面。喜欢

```
return "citizeninfo.jsf?faces-redirect=true"; 
```

这个“jsf”会根据您使用的内容而变化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T08:48:16.913

如果 p:commandLink 包含在两个 h:form 中，则将在第二次调用时调用操作。检查 p:commandLink 的外部标签

# java - 帕斯卡三角形正确格式化java

> ID：14371775
> 
> 赞同：0
> 
> 时间：2013-01-17T03:27:25.520
> 
> 标签：java, formatting, pascals-triangle

所以我目前正在做一个我似乎无法完成的任务。好吧，我已经完成了一切，但想要额外的功劳。我一直在网上四处寻找，似乎无法真正找到我正在寻找的东西。

```
public class PascalTester
{
  public static void main(String[] args)
  {
    Scanner kb = new Scanner(System.in);

    System.out.println("Welcome to the Pascal's Triangle program!");
    System.out.println("Please enter the size of the triangle you want");

    int size = kb.nextInt();

    int[][] myArray = new int[size][size];

    myArray = fillArray(myArray); 

    //myArray = calculateArray(myArray);

    printArray(myArray); //prints the array

}

private static int[][] fillArray(int[][] array)
{
    array[0][1] = 1;

    for (int i = 1; i < array.length; i++)
    {
        for (int j = 1; j < array[i].length; j++)
        {
            array[i][j] = array[i-1][j-1] + array[i-1][j];
        }
    }

    return array;
}

private static void printArray(int[][] array)
{
    for (int i = 0; i < array.length; i++)
    {
        for (int j = 0; j < array[i].length; j++)
        {
            if(array[i][j] != 0)
            System.out.print(array[i][j] + " ");
        }
        System.out.println();
    }

}

} 
```

我现在唯一遇到的问题是正确格式化输出，使其看起来像一个实际的三角形。此时任何建议都会非常有帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:10:10.187

解决此问题的一种方法是，假设您将所有数字格式化为相同的宽度，将问题视为使线条居中的问题。

Java 编码作为练习留给读者，但本质上是：

```
for lineText : triange lines 
   leadingSpacesCount = (80/2) - lineText.length(); 
   print " " x leadingSpacesCount + lineText 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:39:43.170

尝试使用[http://www.kodejava.org/examples/16.html](http://www.kodejava.org/examples/16.html)上的技术制作一个带空格的数组`array.length - i - 1`（需要在数字之间添加数字空格..和 2 个 2 位数字（如果有的话）。） .

在外部 for 循环的开头打印此数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T04:10:21.317

这里的挑战是您想从三角形的顶部开始打印，但是在到达三角形的最后（也是最宽的）行之前，您不知道将每行居中的位置。诀窍是在您知道最后一行有多宽之前不打印任何内容。一种方法是将所有行生成为`String`（或`StringBuilder`）对象并计算最大宽度。然后，从顶部开始，通过首先打印适当数量的空格来使每行居中。正确的空格数是

```
(maxLineLength - currentLine.length()) / 2 
```

或者，您可以简单地假设最大线长度并将所有线居中在该宽度中。如果较长的线超过最大宽度，则三角形将在某一行下方扭曲。（请确保不要尝试打印负数的空格！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-30T04:58:33.217

如果有人正在寻找执行此操作的实际代码，请查看我在 Java 中的实现，它类似于 Craig Taylor 提到的（格式化为相同宽度的数字）加上它使用算法来计算没有内存（或阶乘）的元素.

该代码有解释每个步骤（计算和打印）的注释：

```
/**
 * This method will print the first # levels of the Pascal's triangle. It
 * uses the method described in:
 * 
 * https://en.wikipedia.org/wiki/Pascal%27s_triangle#Calculating_a_row_or_diagonal_by_itself
 * 
 * It basically computes the Combinations of the current row and col
 * multiplied by the previous one (which will always be 1 at the beginning
 * of each pascal triangle row). It will print each tree element to the output
 * stream, aligning the numbers with spaces to form a perfect triangle.
 * 
 * @param num
 *            # of levels to print
 */
public static void printPascalTriangle(int num) {
    // Create a pad (# of spaces) to display between numbers to keep things
    // in order. This should be bigger than the # of digits of the highest
    // expected number and it should be an odd number (to have the same
    // number of spaces to the left and to the right between numbers)
    int pad = 7;

    // Calculate the # of spaces to the left of each number plus itself
    // (this is the width of the steps of the triangle)
    int stepsWidth = pad / 2 + 1;

    // Now calculate the maximum # of spaces from the left side of the
    // screen to the first triangle's level (we will have num-1 steps in the
    // triangle)
    int spaces = (num - 1) * stepsWidth;

    for (int n = 0; n < num; n++) {
        // Print the left spaces of the current level, deduct the size of a
        // number in each row
        if (spaces > 0) {
            System.out.printf("%" + spaces + "s", "");
            spaces -= stepsWidth;
        }
        // This will represent the previous combination C(n k-1)
        int prevCombination = 1;
        for (int k = 1; k <= n + 1; k++) {
            System.out.print(prevCombination);

            // Calculate how many digits this number has and deduct that to
            // the pad between numbers to keep everything aligned
            int digits = (int) Math.log10(prevCombination);
            if (digits < pad) {
                System.out.printf("%" + (pad - digits) + "s", "");
            }

            // Formula from Wikipedia (we can remove that "+1" if we start
            // the row loop at n=1)
            prevCombination = prevCombination * (n + 1 - k) / k;

        }
        // Row separator
        System.out.println();
    }
} 
```

希望它可以帮助某人！

# java - 无法理解自定义登录页面请求中的 Shiro 行为

> ID：14371777
> 
> 赞同：0
> 
> 时间：2013-01-17T03:27:40.153
> 
> 标签：java, spring-mvc, servlet-filters, shiro

我正在使用 Apache Shiro 来保护我的 Spring MVC 应用程序。这是我的配置：

```
<!-- Shiro -->
<bean id = "hibernateRealm" class = "com.bidapp.presentation.shiro.HibernateRealm" />

<bean id = "securityManager" class = "org.apache.shiro.web.mgt.DefaultWebSecurityManager">
    <property name = "realm" ref = "hibernateRealm" />
</bean>

<bean id = "lifecycleBeanPostProcessor" class = "org.apache.shiro.spring.LifecycleBeanPostProcessor" />

<bean id = "shiroFilter" class = "org.apache.shiro.spring.web.ShiroFilterFactoryBean">
    <property name = "securityManager" ref = "securityManager" />
</bean>
<!-- Shiro --> 
```

在 web.xml 中（除其他外）

```
<filter>
    <filter-name>shiroFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
        <param-name>targetFilterLifecycle</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>shiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我的登录页面位于`context/account/login`。当我尝试提交表单时，我收到带有消息的 400 HTTP 错误代码，`The request sent by the client was syntactically incorrect ().`Shiro 记录了以下内容

```
365348 [http-bio-8080-exec-5] TRACE o.a.s.w.s.OncePerRequestFilter - Filter 'shiroFilter' not yet executed.  Executing now. 
365349 [http-bio-8080-exec-5] TRACE o.a.s.mgt.DefaultSecurityManager - Context already contains a SecurityManager instance.  Returning. 
365349 [http-bio-8080-exec-5] TRACE o.a.s.mgt.DefaultSecurityManager - No identity (PrincipalCollection) found in the context.  Looking for a remembered identity. 
365349 [http-bio-8080-exec-5] TRACE o.a.shiro.web.servlet.SimpleCookie - No 'rememberMe' cookie value 
365349 [http-bio-8080-exec-5] TRACE o.a.s.mgt.DefaultSecurityManager - No remembered identity found.  Returning original context. 
365349 [http-bio-8080-exec-5] TRACE o.a.s.s.support.DelegatingSubject - attempting to get session; create = false; session is null = true; session has id = false 
365349 [http-bio-8080-exec-5] TRACE o.a.s.s.support.DelegatingSubject - attempting to get session; create = false; session is null = true; session has id = false 
365349 [http-bio-8080-exec-5] TRACE o.a.s.s.support.DelegatingSubject - attempting to get session; create = false; session is null = true; session has id = false 
365349 [http-bio-8080-exec-5] TRACE o.a.s.s.support.DelegatingSubject - attempting to get session; create = false; session is null = true; session has id = false 
365349 [http-bio-8080-exec-5] TRACE org.apache.shiro.util.ThreadContext - Bound value of type [org.apache.shiro.web.subject.support.WebDelegatingSubject] for key [org.apache.shiro.util.ThreadContext_SUBJECT_KEY] to thread [http-bio-8080-exec-5] 
365349 [http-bio-8080-exec-5] TRACE org.apache.shiro.util.ThreadContext - Bound value of type [org.apache.shiro.web.mgt.DefaultWebSecurityManager] for key [org.apache.shiro.util.ThreadContext_SECURITY_MANAGER_KEY] to thread [http-bio-8080-exec-5] 
365349 [http-bio-8080-exec-5] TRACE o.a.s.w.servlet.AbstractShiroFilter - No FilterChain configured for the current request.  Using the default. 
365351 [http-bio-8080-exec-5] TRACE org.apache.shiro.util.ThreadContext - get() - in thread [http-bio-8080-exec-5] 
365351 [http-bio-8080-exec-5] TRACE org.apache.shiro.util.ThreadContext - Retrieved value of type [org.apache.shiro.web.subject.support.WebDelegatingSubject] for key [org.apache.shiro.util.ThreadContext_SUBJECT_KEY] bound to thread [http-bio-8080-exec-5] 
365351 [http-bio-8080-exec-5] TRACE o.a.s.s.support.DelegatingSubject - attempting to get session; create = false; session is null = true; session has id = false 
```

真正奇怪的是，我可以在浏览器上单击`back`，然后`forward`它会将我带到正确的经过**身份验证**的网页。我尝试调试，我`Controller`什至从未被调用过。但是，如果单击`back`并将`forward`我带到正确的页面，那又如何呢？

我的 web.xml 中没有任何其他过滤器，也没有使用 Shiro 的任何默认过滤器，无论如何都不知道。

到底是怎么回事？

并不是说我在 Eclipse Indigo 上开发有什么不同。这是应该调用但不是（在调试模式下）的代码。

```
 @RequestMapping(value = "/account/login", method = RequestMethod.POST, params = "login")
    public String login(@RequestParam("username") String username, 
            @RequestParam("password") String password,
            @RequestParam("remember") boolean rememberMe,
            Model model) {
        Subject currentUser = SecurityUtils.getSubject();

        if (!currentUser.isAuthenticated()) {

            UsernamePasswordToken token = new UsernamePasswordToken(username, password);
            token.setRememberMe(rememberMe);
            currentUser.login(token);

            return "redirect:/account/profile";
        }

        return "home";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:12:27.720

如果您没有在 Shiro 的配置中定义任何过滤器，Shiro 将允许任何请求通过。换句话说，仅仅因为您有一个经过身份验证的页面，Shiro 不知道是否对其进行保护。您必须告诉 Shiro 确保该页面的安全。例如：

```
[main]
#tell Shiro where to redirect to if login is required:
authc.loginUrl = /account/login

[urls]
# ensure the following pages require authentication (the loginUrl will be 
# allowed however):
/account/** = authc 
```

至于 400 错误，Shiro 不会发出这样的错误响应 - 可能是您的容器或 Spring 发出该错误。

此外，如果您使用 Shiro 1.2 或更高版本，请不要忘记将相关`<dispatcher>`元素添加到`<filter-mapping>`：

[http://shiro.apache.org/web.html#Web-Shiro1.2andlater](http://shiro.apache.org/web.html#Web-Shiro1.2andlater)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T00:52:51.723

所以我仍然无法解释前进和后退按钮的行为，但这不是 Shiro 问题。问题在于我拥有的记住我复选框。在登录的处理程序方法中，我有`@RequestParam("remember") boolean rememberMe`，但应该是`@RequestParam(value = "remember", required = false) boolean rememberMe`. 这`required`意味着您在那里不需要它。默认情况下，Spring 使其为真，因此它会说这是正确的调用方法，但它不能调用它，因为它没有所需的信息，因此是 400。

# oracle - ORACLE：INSERT SELECT FROM 2 个视图和参数值

> ID：14371778
> 
> 赞同：1
> 
> 时间：2013-01-17T03:27:41.333
> 
> 标签：oracle, insert, case-statement, insert-select

我正在尝试从视图 MYVIEW1 和 MYVIEW2 将一些字段插入到 MYTABLE 中，然后从参数（这是存储过程的一部分）为 UPDATED_BY 添加一个值，为 UPDATED_ON 添加一个值。如何使用 INSERT SELECT 或其他方式正确地做到这一点？

```
MYVIEW1    
+------+----+-----+-----------+---------+
|   YR | MO | QTR | USER_CODE | MO_PERF |
+------+----+-----+-----------+---------+
| 2012 |  1 |   1 |      1099 |      89 | 
| 2012 |  2 |   1 |      1099 |      86 |
| 2012 |  3 |   1 |      1099 |      95 |
+------+----+-----+-----------+---------+
MYVIEW2    
+------+-----+-----------+----------+
|   YR | QTR | USER_CODE | QTR_PERF |
+------+-----+-----------+----------+
| 2012 |   1 |      1099 |       90 | 
+------+-----+-----------+----------+

MYTABLE
+------+-----+-----------+---------+---------+---------+---------+-------------+------------+
|   YR | QTR | USER_CODE | MO1_PCT | MO2_PCT | MO3_PCT |     INC |  UPDATED_BY | UPDATED_ON |
+------+-----+-----------+---------+---------+---------+---------+-------------+------------+
| 2012 |   1 |      1099 |      89 |      86 |      95 |    7000 | SAMPLE NAME | 01/16/2013 |
+------+-----+-----------+---------+---------+---------+---------+-------------+------------+

INSERT INTO MYTABLE
 (YR,QTR,USER_CODE,MO1_PCT,MO2_PCT,MO3_PCT,INC,UPDATED_BY,UPDATED_ON)
    SELECT b.YR,b.QTR,b.USER_CODE,b.MO1_PCT,b.MO2_PCT,b.MO3_PCT,c.INC
    FROM MYVIEW1 b,
         MYVIEW2 c 
```

如何插入（QTR 的 MO_PERF 的第一个月）作为 MO1_PCT 和（QTR 的 MO_PERF 的第二个月）作为 MO2_PCT 和（QTR 的 MO_PERF 的最后一个月）作为 MO3_PCT，确保我在正确的季度内插入了正确的月份和年。然后检查每个月的 MO_PERF 值是否至少达到 85，否则将 INC 设置为 NULL。

```
,CASE WHEN MO1_PCT>=85 AND MO2_PCT>=85 AND MO3_PCT>=85 THEN 7000
ELSE NULL 
END INC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:41:15.577

如果您使用的是 oracle 11g，那么您可以像这样使用[PIVOT](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10002.htm#CHDFAFIE)：

```
select YR, QTR, USER_CODE, "1_MO_PCT" MO1_PCT, "2_MO_PCT" MO2_PCT, "3_MO_PCT" MO3_PCT ,
case when "1_MO_PCT" >= 85 and "2_MO_PCT" >= 85 and "2_MO_PCT" >= 85 then 7000 end INC,
user updated_by, sysdate  updated_on
from (
select m1.yr, m1.mo, m1.qtr, m1.user_code, m1.mo_perf, m2.qtr_perf
from myview1 m1 join myview2 m2 on m1.yr=m2.yr 
and m1.qtr = m2.qtr and m1.user_code = m2.user_code )t
pivot(
  max(mo_perf) MO_PCT  for mo in (1,2,3)
  ) 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/9be8b/9)

# mysql - MySQL JOIN + 最大值

> ID：14371790
> 
> 赞同：0
> 
> 时间：2013-01-17T03:29:28.733
> 
> 标签：mysql, sql, join, greatest-n-per-group

我需要帮助编写 MySQL 查询。到目前为止，似乎没有一个问题符合我的需求。

我有一张`order`桌子和一张`order_log`桌子。在 order_log 表中，我会在每次更改订单状态时进行记录。我需要显示 order_log 表中最新状态更改的列表。我当前使用的查询在两个表上执行 JOIN 并获取 order.status = order_log.status 的所有内容。

这样做的问题是，有时一个订单会多次通过相同的状态。发生这种情况时，我的查询会获取 order_log 表中该订单和该状态的每个条目，但我只想要最近的日志。

我尝试编写一个新的 JOIN 查询来获取 order_log 日期条目的最大值，但它只返回 1 个条目。这就是我所拥有的。

```
SELECT *
FROM order_status_log AS l
JOIN orders AS o ON ( l.order_id = o.id )
WHERE l.status = o.status
AND l.date = (
    SELECT MAX( date )
    FROM order_status_log l2
   JOIN orders AS o2 ON ( l2.order_id = o2.id )
) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:32:12.430

有很多方法可以做到这一点，一种是有一个单独的子查询来获取每条记录的最新条目：`order_ID`.

子查询的结果然后与原始表连接回来，但有多个条件：它匹配 the`order_ID`和 latest `date`。

```
SELECT  a.*, b.*
FROM    `order` a
        INNER JOIN order_log b
            ON  a.id = b.order_ID
        INNER JOIN
        (
            SELECT order_ID, MAX(date) max_date
            FROM order_log
            GROUP BY order_ID
        ) c on b.order_ID = c.order_ID AND
                b.date = c.max_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:34:29.713

这可能会有所帮助；

```
select olg.column1,o.column2,max(olg.date) from --You can add other columns as well
order_status_log olg
join orders o
on olg.id = o.order_id
group by olg.column1,o.column2 
```

# android - 如何在 Android 的列表视图中显示应用程序图标？

> ID：14371792
> 
> 赞同：1
> 
> 时间：2013-01-17T03:29:37.640
> 
> 标签：android, android-intent, android-widget, android-listview

我做了一个过滤用户应用程序和系统应用程序的程序，将其显示到列表视图中，代码是好的，但我想在每个应用程序的名称前添加应用程序图标，这是我的代码，请大家帮助我！

```
public class MainActivity extends Activity implements OnClickListener {

    @SuppressWarnings("rawtypes")
    private ArrayList results_user_app = new ArrayList();
    private ArrayList results_sys_app = new ArrayList();
    ListView lv;
    Button userApp, sysApp;

    @SuppressWarnings("unchecked")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lv = (ListView)findViewById(R.id.lv);
        userApp = (Button)findViewById(R.id.b_user_app);
        sysApp = (Button)findViewById(R.id.b_sys_app);

        userApp.setOnClickListener(this);
        sysApp.setOnClickListener(this);
    }

    @SuppressWarnings("unchecked")
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()) {
            case R.id.b_user_app:
                // dung de load installed user app
                PackageManager pm1 = (PackageManager)this.getPackageManager();
                List<ApplicationInfo> list_user_app = getPackageManager().getInstalledApplications(PackageManager.GET_UNINSTALLED_PACKAGES);
                for (int n=0;n<list_user_app.size();n++) {
                    if((list_user_app.get(n).flags & ApplicationInfo.FLAG_SYSTEM)!=1) { 
                        results_user_app.add(list_user_app.get(n).loadLabel(pm1).toString());
                        //Log.w("Installed Applications", list.get(n).loadLabel(pm).toString());

                        lv.setAdapter(new ArrayAdapter<ApplicationInfo>(this, android.R.layout.simple_list_item_1,results_user_app));
                    }
                }
            break;

            case R.id.b_sys_app:
                // dung de load installed sys app
                PackageManager pm2 = (PackageManager)this.getPackageManager();
                List<ApplicationInfo> list_sys_app = getPackageManager().getInstalledApplications(PackageManager.GET_UNINSTALLED_PACKAGES);
                for (int n=0;n<list_sys_app.size();n++) {
                    if((list_sys_app.get(n).flags & ApplicationInfo.FLAG_SYSTEM)==1) {
                        results_sys_app.add(list_sys_app.get(n).loadLabel(pm2).toString());
                    //Log.w("Installed Applications", list.get(n).loadLabel(pm).toString());

                    lv.setAdapter(new ArrayAdapter<ApplicationInfo>(this, android.R.layout.simple_list_item_1,results_sys_app));
                    }
                }
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:41:42.300

您不是在尝试获取应用程序图标。试试这个代码

```
 private PackageManager pk;
  pk = getPackageManager();
  ....
  pk.getApplicationIcon(process.get(i).processName) 
```

这对我有用

# java - java eclipse加载失败

> ID：14371797
> 
> 赞同：0
> 
> 时间：2013-01-17T03:31:07.157
> 
> 标签：java, eclipse

我刚刚安装了eclipse，当我尝试打开它时它失败了。

如果有人能帮助我解决问题/如何解决它，我将不胜感激。

这是日志：

```
!SESSION 2013-01-17 16:18:49.511 -----------------------------------------------
eclipse.buildId=I20110613-1736
java.version=1.7.0_11
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_NZ
Command-line arguments:  -os linux -ws gtk -arch x86_64

!ENTRY org.eclipse.osgi 4 0 2013-01-17 16:18:50.613
!MESSAGE Application error
!STACK 1
java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: 
    no swt-gtk-3740 in java.library.path
    no swt-gtk in java.library.path
    Can't load library: /home/calum/.swt/lib/linux/x86_64/libswt-gtk-3740.so
    Can't load library: /home/calum/.swt/lib/linux/x86_64/libswt-gtk.so

    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:285)
    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:194)
    at org.eclipse.swt.internal.C.<clinit>(C.java:21)
    at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:63)
    at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:54)
    at org.eclipse.swt.widgets.Display.<clinit>(Display.java:132)
    at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:695)
    at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)
    at org.eclipse.ui.internal.ide.application.IDEApplication.createDisplay(IDEApplication.java:153)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:95)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:>79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T08:31:47.183

尝试这个：

ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:57:13.633

试试这些步骤。

如果您使用的是`debian`基于操作系统，请使用

```
sudo apt-get install eclipse-platform 
```

它被维护了。[否则从这里](http://www.eclipse.org/downloads/?osType=linux)下载适用于 linux 的 IDE 。安装 OpenJDK 而不是 oracle java 7。

```
sudo apt-get install openjdk-7-jdk 
```

如果您需要使用 oracle jdk，请参阅此[`article`](http://www.webupd8.org/2012/01/install-oracle-java-jdk-7-in-ubuntu-via.html). 它在 Ubuntu 12.10 中为我工作

# java - 如何通过java验证字符串中是否有省略号（...）？

> ID：14371805
> 
> 赞同：-2
> 
> 时间：2013-01-17T03:32:10.883
> 
> 标签：java, ellipsis

我的一个 java 方法返回一个段落字符串。如何验证字符串中是否包含省略号 (...)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T03:33:17.360

```
myString.contains ("..."); 
```

它在[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T03:34:47.390

尝试：

```
if ( myString.indexOf("...") != -1 )
{
    // string contains ellipsis
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T03:51:08.653

# android - A_app 独立于 Android 启动 B_app

> ID：14371810
> 
> 赞同：0
> 
> 时间：2013-01-17T03:32:33.097
> 
> 标签：android, android-intent, manifest

在 B 的清单中如下：

```
<activity android:name="BActivity" >
    <intent-filter>
        <action android:name="ACTION_TEST" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

并且有一个全局变量。

在 A 的启动代码中如下：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setComponent(new ComponentName("package name","package name.BActivity"));
startActivity(intent); 
```

它可以成功启动B_app。
但是，当我从 A 启动 B 并通过单击 B 的图标直接启动 B 时，它们之间的全局变量是相同的。
我想从 A 启动并直接启动的 B 是 2 个独立的应用程序。
我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:46:45.723

当您从 A 启动您的活动 B 时，您可以将一些布尔值传递给 B，说明它已从 A 启动。例如，从 B 启动您的活动 A，如下所示：

```
Bundle b = new Bundle();
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setComponent(new ComponentName("package name", "package name.BActivity"));
b.putBoolean("fromA", true);
intent.putExtras(b);
startActivity(intent); 
```

然后在您的活动 B 中检查您是否有任何捆绑包，`onCreate()`如下所示

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Bundle extras = getIntent().getExtras();
    if (extras != null)
    {
        // Activity launched from Activity A
    } else
    {
        // Actitivity launched from launcher  
            // clear the global variables
    }
} 
```

如果它是从启动器启动的，那么您可以清除全局变量。

# image - ObjectStateEntry GetModifiedProperties() 错误地检测到对 byte[] 属性的更改

> ID：14371812
> 
> 赞同：0
> 
> 时间：2013-01-17T03:32:44.267
> 
> 标签：image, binding, bytearray, entity-framework-5, picturebox

Entity Framework 是否错误地检测到图像的更改？

我有一个“人”实体类定义如下；

```
public class Person
{
 public int Id { get; set; }
 public byte[] Photo { get; set; }
} 
```

我已使用数据源将 Photo 绑定到表单上的 PictureBox 控件。那里的表单还使用了一个动态创建的 bindingNavigator。

我还编写了一个审核日志来填充捕获的更改该过程调用 ObjectContext DetectChanges() 然后

```
var entries = ObjectContext.ObjectStateManager.GetObjectStateEntries() 
```

其中包含显示照片已被修改的条目。
entry.OriginalValues[name] 匹配 entry.CurrentValues[name]

SQL Server中的Column是varbinary（MAX），我加载的图片文件大小在1Mb以下

如果我将所有列设置为空，则不再发生错误

我用来获取文件的代码是

```
private void LoadPhotoButton_Click(object sender, EventArgs e)
{
   using (var dlg = new OpenFileDialog())
  {
      dlg.Filter = "JPEG files |*.jpg";
      if (dlg.ShowDialog() == DialogResult.OK)
      {
          PhotoPictureBox.Image = Image.FromFile(dlg.FileName);
      }
   }
 } 
```

我[在这里](http://technet.microsoft.com/en-us/library/ms188362.aspx)注意到，当这些字段涉及字符串转换时，可以将十六进制零作为填充字符插入......绑定可以以某种方式做到这一点吗？

如果我从表单中删除图片框，甚至将控件绑定为文本框而不是图片框，那么行为是正确的（不是绑定到文本框的图片有任何用处）

我可以通过不直接绑定到图片框来解决这个问题。相反，我只是将它加载到 BindingSource_CurrentChanged 事件中使用

```
private void BindingSource_CurrentChanged(object sender, EventArgs e)
    {
        var obj = (Person) BindingSource.Current;
        this.PictureBox.Image = byteArrayToImage( obj.Photo);
    }

public Image byteArrayToImage(byte[] byteArrayIn)
    {
        MemoryStream ms = new MemoryStream(byteArrayIn);
        Image returnImage = Image.FromStream(ms);
        return returnImage;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:02:34.157

我正在使用我的工作 - 在问题的末尾记录为一个可行的答案。

# c# - C#中变量之间的歧义

> ID：14371817
> 
> 赞同：13
> 
> 时间：2013-01-17T03:33:06.670
> 
> 标签：c#

我想首先说我先搜索过，在其他各种事情上发现了很多类似的问题，但不完全是这个问题。

我有这个代码：

```
namespace New_Game.GameClasses
{
    /// <summary>
    /// This is a game component that implements IUpdateable.
    /// </summary>
    public class Error : Microsoft.Xna.Framework.GameComponent
    {
        bool gameOver = false;
        List<Enemy> enemies = new List<Enemy>();

        public bool gameOver {
            get { return gameOver; }
            set { gameOver = value; }
        }

        public override void Update(GameTime gameTime, Vector2 target)
        {
            // TODO: Add your update code here
            Rectangle playerRect = new Rectangle((int)target.X, (int)target.Y, 64, 64);

            foreach (Enemy e in enemies)
            {
                e.Target = target;
                e.Update(gameTime);
                Rectangle enemyRect = new Rectangle((int)e.Position.X + 7, (int)e.Position.Y + 7, 32 - 7, 32 - 7);

                if (playerRect.Intersects(enemyRect))
                {
                    gameOver = true;
                }
            }
        }
    }
} 
```

我的问题出现在一个错误中：“New_Game.GameClasses.Error.gameOver”和“New_Game.GameClasses.Error.gameOver”之间的歧义

如果我删除 get/set 方法，当我尝试从我的 Game1.cs 访问 gameOver 时会遇到不同的错误。如果我将其更改为以下内容，则会出现相同的错误：

```
public bool gameOver { get; set; } 
```

我的问题是如何解决歧义错误？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-17T03:35:46.040

您需要重命名您的私有 gameOver 变量。改变这个：

```
bool gameOver = false;
public bool GameOver {
        get { return gameOver; }
        set { gameOver = value; }
    } 
```

到

```
bool _gameOver = false;
public bool GameOver {
        get { return _gameOver; }
        set { _gameOver = value; }
    } 
```

您不能在单个类中使用相同的变量名。

或者，假设您使用的是最新版本的 .Net，您可以删除您的私有变量并只拥有：

```
public bool GameOver { get; set; } 
```

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:36:26.650

以不同于公共变量的方式命名您的私有变量。

```
bool _gameOver = false;

public bool gameOver {
    get { return _gameOver; }
    set { _gameOver = value; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-07T18:07:04.683

在我的情况下，通过 agregarPropiedad2**重命名类** agregarPropiedad 已解决。

**。CS**

```
public partial class agregarPropiedad2 
```

**设计师.CS**

```
public partial class agregarPropiedad2 
```

**ASPX**

```
Inherits="ProjectName.agregarPropiedad2" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T03:35:36.833

你不能让你的类的两个组件使用相同的名称。所以改变这个：

```
bool gameOver = false;

public bool gameOver
{
    get { return gameOver; }
    set { gameOver = value; }
} 
```

对此：

```
private Boolean m_GameOver = false;

public Boolean GameOver
{
    get { return m_GameOver; }
    set { m_GameOver = value; }
} 
```

# javascript - 使用 RequireJS 未找到 Backbone Marionette 依赖项

> ID：14371818
> 
> 赞同：0
> 
> 时间：2013-01-17T03:33:09.997
> 
> 标签：javascript, backbone.js, requirejs, marionette, amd

我正在使用 require.js 和 AMD 编写 Marionette 应用程序。我以 Jsoverson 的 Addy Osmany 的[ToDoMVC](https://github.com/addyosmani/todomvc/tree/gh-pages/labs/dependency-examples/backbone_marionette_require)版本作为代码示例。我正在根据我的需要调整它，即使关于这个版本的文档不多。

每当我加载我的页面时，我都会在浏览器控制台中收到此 404 错误：

```
GET http://127.0.0.1:8000/static/js/backbone.wreqr.js 404 (NOT FOUND) require.js:1836
Uncaught Error: Script error
http://requirejs.org/docs/errors.html#scripterror require.js:160
GET http://127.0.0.1:8000/static/js/backbone.eventbinder.js 404 (NOT FOUND) require.js:1836
GET http://127.0.0.1:8000/static/js/backbone.babysitter.js 404 (NOT FOUND) require.js:1836  
Uncaught Error: Script error
http://requirejs.org/docs/errors.html#scripterror 
```

现在，我看到了由Marionette的[作者编写的“](https://github.com/derickbailey) [backbone.wreqr](https://github.com/marionettejs/backbone.wreqr)是用于分离 Backbone 和 Backbone.Marionette 应用程序模块和组件的基础设施” 。另外[backbone.eventbinder](https://github.com/marionettejs/backbone.eventbinder)和[backbone.babysitter](https://github.com/marionettejs/backbone.babysitter)都是作者写的项目。

1）我不明白为什么我应该包含这些文件，因为我遵循的代码示例没有使用它们中的任何一个并且它工作得很好。
2）无论如何，这些文件都需要在错误的路径中。我的应用程序是这样组织的：

```
Staticfiles/ 
|__js/
|    app.js
|    main.js
|    models/
|    ectr.
|__lib/
     backbone/
        Backbone.js
        Marionette.js (AMD version)
        Underscore.js
        ectr. 
```

那么它为什么要在文件夹下寻找那些文件`js/`呢？
3) 是 Require.js 问题还是只是我的 js 应用程序中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:17:49.780

Marionette 需要这些文件才能正常工作，但作者将它们与 Marionette 分离，因此它们也可以用于其他项目。

我建议您下载 Marionette 的捆绑版本，其中包含所有需要的依赖文件：

[http://marionettejs.com/#download](http://marionettejs.com/#download)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:04:19.583

如果你想坚持使用 Marionette 的依赖版本（例如，你像我一样使用 JamJS），你可以将它们包含在你的 main.js 配置中。例如，这是我的：

```
require.config({
    paths: {
            marionette: 'lib/Backbone.Marionette/lib/core/amd/backbone.marionette',
            'backbone.babysitter': 'lib/Backbone.BabySitter/lib/amd/backbone.babysitter',
            'backbone.wreqr': 'lib/Backbone.Wreqr/lib/amd/backbone.wreqr'
    }
}); 
```

这发生在您的应用程序的主要 require() 调用之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T04:01:43.977

RequireJS 假设你所有的脚本都与你的`main.js`文件位于同一个基目录中。

如果要指定不同的基目录，请使用`baseUrl`配置选项：

```
<!-- In main.js -->
require.config({
    baseUrl: "/another/path"
}); 
```

# wordpress - 我可以在 WordPress 中使用 NoSQL 数据库吗？

> ID：14371819
> 
> 赞同：12
> 
> 时间：2013-01-17T03:33:11.013
> 
> 标签：wordpress, nosql

我正在尝试在 WordPress 中使用 NoSQL 数据库而不是 MySQL 等关系数据库，但我不确定它是否可能。

任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T03:59:07.573

Wordpress 仅支持 MySQL，所以不，您不能使用 NoSQL DB。请参阅[https://codex.wordpress.org/Using_Alternative_Databases](https://codex.wordpress.org/Using_Alternative_Databases)

> 目前，官方的 WordPress 发行版只支持 MySQL 数据库引擎。许多人要求支持其他数据库引擎，尤其是开源 PostgreSQL
> ……当前的代码库非常以 MySQL 为中心。虽然 WordPress 确实使用 ezSQL 类来实现数据库调用，但这不能正确地称为抽象层。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-06T09:46:01.660

已经有人在[这里工作了。](http://mongopress.org/)

Mongopress 看起来很有趣.. 还发现一些 wordpress 开发人员也在研究这个......现在正在等待他们中的一些人提出解决方案......

# sql-server - 需要帮助对我的结果进行分组

> ID：14371821
> 
> 赞同：0
> 
> 时间：2013-01-17T03:33:27.193
> 
> 标签：sql-server, sql-server-2008, group-by

我正在使用 sql server 2008 r2。这是我的查询。

```
 SELECT  TOP 25 A.*, U.Displayname AS UserName,
            SU.Displayname AS SmoothieAuthorName, 
            S.Name AS SmoothieName, S.Id AS SmoothieId
    FROM    dbo.Activity AS A 
            LEFT JOIN dbo.[User] AS U ON A.UserId = U.Id
            LEFT JOIN dbo.[User] AS SU ON A.SmoothieAuthorId = SU.Id
            LEFT JOIN dbo.Smoothie AS S ON A.SmoothieId = S.Id

    WHERE   A.UserId = 2 --@UserId
            AND A.UserId <> A.SmoothieAuthorId
    ORDER BY CreatedDate DESC 
```

以下是我的结果。现在，我需要按 SmoothieId 和 CreatedDate 对它们进行分组（仅分组日期部分，忽略时间）。前两个应该只返回一个，3到5应该只返回一个。不知道怎么做，请帮忙。

```
Id  ActionType  UserId  SmoothieId  SmoothieAuthorId    CreatedDate             UserName    SmoothieAuthorName  SmoothieName    SmoothieId
1   view        2       128         1                   2013-01-15 20:05:03.403 mike        test1234            new testing 2d  128
2   view        2       128         1                   2013-01-15 20:16:24.733 mike        test1234            new testing 2d  128
12  view        2       128         1                   2013-01-16 21:45:56.167 mike        test1234            new testing 2d  128
13  view        2       128         1                   2013-01-16 22:12:51.217 mike        test1234            new testing 2d  128
14  view        2       128         1                   2013-01-16 22:12:54.407 mike        test1234            new testing 2d  128
15  view        2       69          1                   2013-01-16 22:19:54.783 mike        test1234            sdfsdfwww       69 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:57:39.997

如果您需要 A 中的所有列，包括 Id，我认为您将很难包括 Id。我认为您需要明确列出您所追求的 A 中的列。我还假设您想要对要分组的记录进行计数，因此需要 Count(TheDate) 元素。

除此之外，请查看仅获取日期时间和组[的日期部分。](https://stackoverflow.com/a/113055/685760)

就像是;

```
SELECT ActionType, UserId, SmoothieId, SmoothieAuthorId,
       TheDate, Count(TheDate) AS Occurances, UserName, SmoothieAuthorName, 
       SmoothieName, SmoothieId
  FROM (
    SELECT  TOP 25 A.ActionType, A.UserId, A.SmoothieId,  
            A.SmoothieAuthorId, 
            DATEADD(dd, 0, DATEDIFF(dd, 0, CreatedDate)) AS TheDate, 
            U.Displayname AS UserName,
            SU.Displayname AS SmoothieAuthorName, 
            S.Name AS SmoothieName, S.Id AS SmoothieId
    FROM    dbo.Activity AS A 
            LEFT JOIN dbo.[User] AS U ON A.UserId = U.Id
            LEFT JOIN dbo.[User] AS SU ON A.SmoothieAuthorId = SU.Id
            LEFT JOIN dbo.Smoothie AS S ON A.SmoothieId = S.Id
    WHERE   A.UserId = 2 --@UserId
            AND A.UserId <> A.SmoothieAuthorId
    -- ORDER BY CreatedDate DESC
) x GROUP BY ActionType, UserId, SmoothieId, SmoothieAuthorId, UserName, 
             TheDate, SmoothieAuthorName, SmoothieName, SmoothieId
    ORDER BY The Date DESC 
```

**注意**这未经测试，只是我尝试的快速建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:34:04.287

我不确定我是否完全理解这个问题。假设您想要这些列的不同值，那么只需使用`DISTINCT`：

```
SELECT DISTINCT 
    CAST(CreatedDate to Date) as DateWanted, 
    SmoothieId  
FROM 
(    
    SELECT  TOP 25 A.*, U.Displayname AS UserName,
            SU.Displayname AS SmoothieAuthorName, 
            S.Name AS SmoothieName, S.Id AS SmoothieId
    FROM    dbo.Activity AS A 
            LEFT JOIN dbo.[User] AS U ON A.UserId = U.Id
            LEFT JOIN dbo.[User] AS SU ON A.SmoothieAuthorId = SU.Id
            LEFT JOIN dbo.Smoothie AS S ON A.SmoothieId = S.Id
    WHERE   A.UserId = 2 --@UserId
            AND A.UserId <> A.SmoothieAuthorId
) t 
```

查看您的评论，您说您需要活动表中的所有字段。对于前 2 条记录（1 或 2），您希望在 Id 列中收到什么？其他列中的所有其他值是否相同？要仅获取一条记录，您将需要选择一行而不是另一行，或者对具有相同信息的列进行分组。

祝你好运。

# filepicker.io - 通过 fpURL 的 HEAD 请求确定文件名

> ID：14371825
> 
> 赞同：0
> 
> 时间：2013-01-17T03:33:43.503
> 
> 标签：filepicker.io

我想确认检索上传项目的文件名的“正确”方法是在 fpURL 上执行 HEAD 时抓住“x-file-name”标头。这就是我发现的，但在任何地方都没有看到这一点。只是想确保这是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:25:17.877

是的，我们设置了这个标头，以便您可以从 fpURL 的标头中获取文件名。更简洁的方法是使用 /metadata 端点，即[https://www.filepicker.io/api/file/5qYoopVTsixCJJiqSWSE/metadata](https://www.filepicker.io/api/file/5qYoopVTsixCJJiqSWSE/metadata)

# git - 如何将 git-svn 与磁盘上已有的 SVN 存储库一起使用？

> ID：14371839
> 
> 赞同：1
> 
> 时间：2013-01-17T03:35:43.260
> 
> 标签：git, svn, git-svn, wget, git-clone

我想使用 git-svn 使用远程 SVN 存储库。我一直在尝试下载它，`git svn clone -s REPO_URL`但是因为我的网络连接不是很好而且 repo 很大，所以它超时了。

因此，相反，我计划使用 SVN 客户端检查整个 repo，然后在事后让 git-svn 使用它。但这可能吗？`git svn clone -s`负责所有这些事情（即设置远程 URL、导入历史记录、识别远程分支等），但由于我以另一种方式下载 repo，我不知道我需要运行哪些命令来设置它向上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:49:07.927

啊，看起来不需要SVN客户端。`git svn clone`可以使用 恢复中断`git svn fetch`，详见[此处](https://stackoverflow.com/a/2677228/963396)。:)

或者，如果您不关心获取存储库的整个历史记录，则可以通过这样做`git svn clone -s -rN:HEAD repo_url local_dir`来加快下载速度，这只会将存储库从特定修订号 ( `N`) 克隆到最新提交 ( `HEAD`)。这大大减少了您必须从 SVN 服务器下载的数据量。

这样就解决了处理大型存储库的问题。但只是为了回答我关于如何让 git-svn 使用已下载到磁盘的 repo 的问题，您可以使用该`file://`协议进行克隆。示例：`git svn clone file:///path/to/repo/`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:04:44.250

git-svn 的神奇之处在于在每次修订时下载 Subversion 存储库，这意味着您可以在本地计算机上获得完整的存储库历史记录，就像使用常规 Git 存储库一样。它还提取了有关每个提交的一大堆元数据，例如修订号和提交日志文本。

如果您只是使用`wget`（或者，更明显的是，`svn export`）下载 Subversion 存储库，您将没有所有这些信息，也没有获得它的好方法。

如果您不需要本地存储库中的完整历史记录，您可以克隆最新的修订。运行`git svn init`而不是`git svn clone`（指定相同的布局参数，例如`-s`）。然后运行`git svn fetch -r HEAD`。这只会下载远程 Subversion 存储库的最新版本，并在此基础上构建您的历史记录。

# javascript - 查找一个点是否在一条线上

> ID：14371841
> 
> 赞同：4
> 
> 时间：2013-01-17T03:35:46.980
> 
> 标签：javascript, html, html5-canvas

假设我在 HTML5 Canvas 中画了一条线：

```
...
ctx.beginPath();
ctx.moveTo(x,y);
ctx.lineTo(x1,y1);
ctx.closePath();
... 
```

我想知道鼠标按下事件是否发生在这一行，我有这样的代码：

```
var handleMouseDown = function(e) {
  var coords = translateCoords(e.x,e.y);
  ...
  if (ctx.isPointInPath(coords.x, coords.y) {
    ... 
```

现在，此代码在圆形和矩形的情况下工作正常，但不适用于线条。我有两个问题：

1.  我的想法是，也许在一行本身上调用 closePath() 是不正确的。问题 - 我如何检查鼠标按下事件是否发生在这条线上？

2.  如何扩展它以查找鼠标按下事件是否发生在线*附近*？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T04:14:07.767

第一步是找到点在直线上的法线投影。这其实很简单：取点 1 到目标的距离，以及点 2 到目标的距离，分别称它们为 D1 和 D2。然后计算`D1+(D2-D1)/2`。这是从点 1 到直线上投影点的距离。

您现在可以找到该点，并获得从该点到目标的距离。如果距离为零，则目标正好在线上。如果距离小于 5，则目标距离小于 5px，以此类推。

编辑：一张照片值一千字。这是一个图表：

[![图表](../Images/63ed52bb1f1b7098f8474a4a6b6c0918.png)](https://i.stack.imgur.com/rubeQ.png)
[（来源：[adamhaskell.net](http://adamhaskell.net/img/schematic.png)）]

（事后看来，可能应该让这些圆圈变成不同的颜色......另外，紫色线应该垂直于线 AB。用蓝色线怪我的糟糕目标！）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-30T20:45:06.763

这是取自维基百科文章[Distance from a point to a line (Line defined by two points) 的方法](http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line#Line_defined_by_two_points)

```
 var Dx = x2 - x1;
        var Dy = y2 - y1;
        var d = Math.abs(Dy*x0 - Dx*y0 - x1*y2+x2*y1)/Math.sqrt(Math.pow(Dx, 2) + Math.pow(Dy, 2)); 
```

其中 (x0,y0) 是您的 Point 坐标，您的 Line 是 ((x1,y1),(x2,y2)) 但是，这不会检查线的边界，所以我不得不为它添加另一个检查。

```
 function inBox(x0, y0, rect) {
        var x1 = Math.min(rect.startX, rect.startX + rect.w);
        var x2 = Math.max(rect.startX, rect.startX + rect.w);
        var y1 = Math.min(rect.startY, rect.startY + rect.h);
        var y2 = Math.max(rect.startY, rect.startY + rect.h);
        return (x1 <= x0 && x0 <= x2 && y1 <= y0 && y0 <= y2);
    } 
```

你的线定义为矩形。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T04:14:56.940

您有两种选择。您的“简单”选项是使用画布来执行此操作——无论鼠标在哪里，都可以读取像素数据，如果它与您的线条颜色相同，则用户点击该线条。但是，这会产生很多假设，例如画布上的所有内容都以不同的纯色呈现。然而，这是可能的，因为一个常见的技巧是以不同的纯色将所有内容渲染到屏幕外的画布上。然后，当用户单击某物时，您可以通过读取该像素的颜色并将其映射回原始对象来确切地知道它是什么。

但这不完全是你要求的:)

你不想知道用户是否点击了一行，因为他们几乎永远不会。一条线无限细，所以除非它完全水平或完全垂直，否则他们永远不会点击它。相反，您想要的是查看鼠标与线的距离。Kolink 刚刚回答了那部分，所以我会停在这里:)

# css - 将单个背景渐变应用到表格行

> ID：14371846
> 
> 赞同：28
> 
> 时间：2013-01-17T03:36:07.347
> 
> 标签：css

是否可以有一个跨越整个表格行的背景渐变？我只能将背景应用于单个表格单元格，即使我特别试图阻止这种情况。这是一个针对 jsfiddle 上的 Webkit 的简化示例：

[http://jsfiddle.net/cGV47/2/](http://jsfiddle.net/cGV47/2/)

正如你所看到的，我正在使用`border-collapse:collapse`并且我正在`background:transparent`为`<tr>`和`<th>`子元素指定，但是左侧的红色渐变对于每个表格单元格都是重复的。我也尝试将背景应用到`<tr>`，但结果与您现在看到的相同。

要查看代码而不去 jsfiddle，这里是：

**html**

```
<table>
    <thead>
        <tr>
            <th>One</th>
            <th>Two</th>
            <th>Three</th>
            <th>Four</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>un</td>
            <td>deux</td>
            <td>trois</td>
            <td>quatre</td>
        </tr>
    </tbody>
</table> 
```

**css**

```
* {margin:0;padding:0;border:0;border-collapse:collapse;}
table { width:100%; }
thead { background: -webkit-linear-gradient(left, rgba(222,22,22,1) 0%, rgba(222,222,222,0) 20%, rgba(222,222,222,0) 80%, rgba(222,222,222,1) 100%); }
thead tr, thead th { background:transparent; } 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-08-14T13:33:17.183

设置`background-attachment:fixed;`在tad上，它会正常工作

[http://jsfiddle.net/cGV47/64/](http://jsfiddle.net/cGV47/64/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-31T10:58:55.240

我认为有更好的解决方案：

*   将渐变背景应用于整个表格。
*   然后为 thead 和 tfooter 应用纯色背景。

 `````
table { border:0; border-collapse:collapse;
    background: -moz-linear-gradient(left,  rgba(255,255,255,1) 0%, rgba(108,211,229,0.2) 40%, rgba(108,211,229,0.2) 60%, rgba(255,255,255,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,1)), color-stop(40%,rgba(108,211,229,0.2)), color-stop(60%,rgba(108,211,229,0.2)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  rgba(255,255,255,1) 0%,rgba(108,211,229,0.2) 40%,rgba(108,211,229,0.2) 60%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  rgba(255,255,255,1) 0%,rgba(108,211,229,0.2) 40%,rgba(108,211,229,0.2) 60%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  rgba(255,255,255,1) 0%,rgba(108,211,229,0.2) 40%,rgba(108,211,229,0.2) 60%,rgba(255,255,255,1) 100%); /* IE10+ */
    background: linear-gradient(to right,  rgba(255,255,255,1) 0%,rgba(108,211,229,0.2) 40%,rgba(108,211,229,0.2) 60%,rgba(255,255,255,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */            
}

table thead, tfoot {
    background: #fff;
} 
````  `看看：http: [//jsfiddle.net/5brPL/](http://jsfiddle.net/5brPL/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-14T10:24:50.417

我发现自己正在测试全新的`repeating-linear-gradient`，这显然适用于`<tr>`元素（虽然我只在 Google Chrome 中测试过）。

诀窍是提供最广泛的重复模式，以便......它不会重复。

试试这个：

```
tr {
    background: repeating-linear-gradient(
        45deg,
        red 0%,
        blue 100%
    );
} 
```

[http://jsfiddle.net/slyy/2pzwws0d/](http://jsfiddle.net/slyy/2pzwws0d/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T04:15:20.253

不是最漂亮的解决方案，但确实可以解决问题。您只需将每个设置`th`为具有 25% 的颜色范围。下面的示例使用从 0 到 255 的颜色范围。

[http://jsfiddle.net/cGV47/3/](http://jsfiddle.net/cGV47/3/)

您已经拥有的相同 HTML。这是CSS：

```
table { width:100%; }

th {
    background: -webkit-linear-gradient(left, rgba(255,255,255,1) 0%, 
                                              rgba(191,191,191,1) 100%);
}
th + th {
    background: -webkit-linear-gradient(left, rgba(191,191,191,1) 0%, 
                                              rgba(128,128,128,1) 100%);
}
th + th + th {
    background: -webkit-linear-gradient(left, rgba(128,128,128,1) 0%, 
                                              rgba(64,64,64,1) 100%);
}
th + th + th + th {
    background: -webkit-linear-gradient(left, rgba(64,64,64,1) 0%, 
                                              rgba(0,0,0,1) 100%);
} 
```

我在 Google 上发现了这个问题：[http](http://code.google.com/p/chromium/issues/detail?id=122988) ://code.google.com/p/chromium/issues/detail?id=122988但没有解决方案。

Firefox 没有这个问题（没有检查任何其他浏览器）：http:
[//jsfiddle.net/cGV47/4/](http://jsfiddle.net/cGV47/4/)``

# javascript - 不断刷新文本字段的Javascript值

> ID：14371847
> 
> 赞同：0
> 
> 时间：2013-01-17T03:36:18.477
> 
> 标签：javascript, html

我正在处理输入表单，并且我有一个 Javascript 函数，当您按下按钮时，它可以获取所有字段值。我正在寻找一种*自动*刷新 Javascript 值的方法（例如，我可以在他们键入时检查注册页面上的用户名是否太短，并检查用户名是否可用）。这可能吗？

澄清一下，我有一个 HTML 输入字段（用于文本），并且当用户输入结果时，会自动更新。

如果不能单独使用 Javascript，我也愿意使用 PHP 或 jQuery，但如果可能的话，我更喜欢 Javascript。另外，对不起，如果这是一个相当基本的问题，但我已经搜索和搜索，但找不到任何内容。我知道这是可能的，因为我在网站上看到过（事实上，即使在这个网站上，当您输入问题时，它也会更新底部的预览）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:42:15.650

您应该使用 JQuery Validation Plugin 来减少繁重的检查。[在http://jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)查看这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:49:12.187

不需要 jQuery

```
<input type="text" onKeyUp="validate(this.value);">

function validate(value){
    //validate code on value
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T03:39:24.887

您应该监控 onkeyup 事件

```
<input type="text" id="test">

$('#test').on('keyup', function() { //this function is triggered every time the user releases a key while typing inside the text field above
    //do whatever you want here
}); 
```

# php - $_SESSION 存储在哪里？

> ID：14371850
> 
> 赞同：0
> 
> 时间：2013-01-17T03:36:24.657
> 
> 标签：php, mysql, session

从 iphone 应用程序登录时，我调用了一个 php 脚本登录函数，该函数存储了用户 ID 的会话。此 ID 是否存储在服务器或 iPhone 上？

```
 $_SESSION['IdUser'] = $result['result'][0]['IdUser']; 
```

我问的原因是 b/c 当我退出模拟器并重新启动它时会话显然没有被存储，所以我相信它被存储在服务器上。如果我希望多个用户同时在我的应用程序上，或者在客户端上会更好，我是否希望将会话存储在服务器上？服务器如何知道/从客户端获取会话 ID？谢谢。

此外，我希望我的用户保持登录状态。显然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:40:19.710

[Sessions 上的 PHP 文档](http://us3.php.net/manual/en/intro.session.php)对此非常清楚，但我将总结一下：

1.  `$_SESSION`存储在服务器上。它实际上位于具有会话名称的临时文件中（通常）。
2.  服务器通过 cookie 识别用户的会话

如果您很容易让设备随每个请求发送相应的会话 cookie（就像网站一样），那么服务器存储对您来说就很好。否则，您可能需要使用本地存储。无需担心多个用户的会话会相互覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:40:26.233

默认情况下，会话数据存储在服务器上。在 linux 中，通常在目录 /var/lib/php/ 中的文件中，但也可以存储在 db 或内存中。

cookie 存储在客户端上，其会话 ID 充当标识服务器端数据的令牌。在 /var/lib/php/ 中的会话数据示例中，存储在客户端 cookie 中的会话 ID 映射到该目录中的文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T03:45:06.980

在 PHP 的默认配置中，会话数据存储在服务器上，而标识符作为 cookie 存储在客户端上。

此 cookie 是否在您的应用程序的会话中持续存在取决于调用您的脚本的代码；您可以通过对同一脚本进行几次调用来轻松测试这一点，并查看会话是否保持“活动”状态。退出应用程序可能会或可能不会破坏您使用过的任何 cookie，但这正是会话的含义，即它们不是持久的。

如果您想要登录持久性，您可以将登录凭据存储在手机本身（确保使用密钥链），以便您可以重新建立与服务器的会话，以防它被中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T04:22:16.333

会话或 $_SESSION[] 变量存储在服务器上。它与 Cookie 非常相似，只是它存储在服务器上。

所以总结一下，

$_SESSION[] = (服务器端)

$_COOKIE[] = (客户端)

# excel - 在excel中展开一组数字

> ID：14371854
> 
> 赞同：-1
> 
> 时间：2013-01-17T03:37:10.520
> 
> 标签：excel, datapoint

我有一个excel电子表格

```
x    y
0   -1.5
100  1.6
200  0
300  -6.8
400  -19.8
500  -39.9 
```

我想找到 x = 600 到 1500 的值。我尝试制作图表并使用趋势线并获得多项式 2，然后它返回

```
y = -2.8857x2 + 12.686x - 11.7
R² = 0.999 
```

所以我将它插入到我的计算中

```
=-2.8857*A110*A110+12686*A110-11.7 
```

其中 A110 是值 600，但它回答

```
6572736.3 
```

我不是数学专业的，但在-6.8，-19.8，-39.9的趋势下，下一个数字不是6572736.3

有人可以告诉我如何计算方程式，以便我可以完成一系列数字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:01:01.397

我同意@mkingston（见下面的输出**）。

我要补充两点：

1）我发现在对方程做任何事情之前绘制原始数据和回归方程总是一个好主意。在这种情况下，绘制@mkingston 的结果给出： ![二次拟合图](../Images/84b65b9f0e95fabec8224ddb217979b5.png)

...这表明@mkingston 的拟合结果（由线条显示）实际上非常适合原始数据。

2) 外推总是危险的。如果您已经有充分的理由相信基础函数是我们在此处拟合的形式的二次方，那么下面的拟合结果表明参数的不确定性，因此可用于估计预测中的不确定性（一旦推断到 x = 1500，这可能会相当大）。另一方面，如果我们拟合的二次方程只是一个方便的形状，适合我们可用的数据范围，那么有许多替代函数可以大致与这个二次方程一样拟合可用数据，但会预测 x = 600 到 1500 范围内的完全不同的值。在后一种情况下，我认为 x = 600 处的任何预测都是非常不确定的，而超出该点的任何预测充其量都是高度推测性的。

**我从数据中得到的输出 | 数据分析 | Excel 2007 的回归函数是（为了清楚起见，在我编辑将“X 变量”更改为“X”和“X 变量 2”更改为“X^2”之后）：

```
SUMMARY OUTPUT                              

Regression Statistics                               
Multiple R  0.999516468                         
R Square    0.99903317                          
Adjusted R Square   0.998388617                         
Standard Error  0.647338875                         
Observations    6                           

ANOVA                               
            df  SS          MS          F           Significance F          
Regression  2   1299.01619  649.5080952 1549.9625   3.00625E-05         
Residual    3   1.257142857 0.419047619                 
Total       5   1300.273333                     

        Coefficients    Standard Error  t Stat          P-value     Lower 95%   Upper 95%   Lower 95.0% Upper 95.0%
Intercep   -1.9         0.586700679 -3.238448611    0.047907326 -3.767143409    -0.032856591    -3.767143409    -0.032856591
X       0.069142857     0.005518676 12.52888554     0.00109613  0.051579968 0.086705   746  0.051579968 0.086705746
X^2     -0.000288571    1.05946E-05 -27.23767444    0.000108607 -0.000322288    -0.000254855    -0.000322288    -0.000254855 
```

# amazon-s3 - Is there a benefit to using multiple buckets on Amazon S3 versus consolidating into a single bucket?

> ID：14371855
> 
> 赞同：14
> 
> 时间：2013-01-17T03:37:12.190
> 
> 标签：amazon-s3

We currently serve up downloadable content (mp3, pdf, mp4, zip files, etc) in a single S3 bucket called *media.domainname.com*.

We have a separate bucket that stores all the various video encodings for our iOS app: *app.domainname.com*.

We're investigating moving all of our images to S3 as well in order to ease the server load and prep us for moving to a load balanced server setup.

That said, is it better/more efficient to move our images to a separate bucket i.e., *images.domainname.com*? Or is it a better practice to create an images subfolder in the media bucket, like *media.domainname.com/images*?

What are the pros/cons of either method?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T04:25:50.633

The primary benefits of using separate buckets are that you can assign separate policies to each:

*   Reduced redundancy to save on costs.
*   Versioning of changed contents.
*   Automatic archival to Glacier
*   Separate permissions

The only downside that I can think of is that it means you'd have to manage all these things separately across multiple buckets.

# mysql - 多个表之间的MySQL Multiple LIKE

> ID：14371857
> 
> 赞同：3
> 
> 时间：2013-01-17T03:37:33.903
> 
> 标签：mysql, sql-like

我已经搜索了解决方案，但到目前为止我还没有找到它。

所以这里的问题，假设我有 2 个表：

表格1

```
name | code
-------------------
a    | [a][b][c]
b    | [a][c][d]
c    | [a][e] 
```

表2

```
code | name
-------------------
a    | aaaa
b    | bbbb
c    | cccc
d    | dddd
e    | eeee 
```

我想做多项选择`Table1.name`和`Table2.name`在哪里`Table1.code LIKE '%b%'`或`Table1.code LIKE '%e%'`

所以它应该是这样的结果：

```
name | name
------------------
a    | aaaa
c    | cccc 
```

我确实尝试过：

```
SELECT Table1.name, Table2.name 
FROM Table1, Table2 
WHERE Table1.code LIKE '%b%' OR Table1.code LIKE '%e%' 
```

但它没有用。我是这方面的新手，任何帮助深表感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:59:27.457

```
SELECT t1.name, t2.name FROM 
Table1 t1 INNER JOIN Table2 t2 ON (t1.name = t2.code)
WHERE t1.code LIKE '%b%' OR t1.code LIKE '%e%' 
```

由于这是一个内部连接，如果第二个表中有匹配的代码，它将只返回第一个表中的行。如果您想显示 Table1 中的任何匹配行，请使用 LEFT JOIN

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T05:13:53.370

**为了使用like** 函数或**instr**函数加入 2 个表，将

使用**“喜欢”**

```
 **column_name1 like '%'column_name2'%'** 
```

使用**“instr”**

```
 **instr(column_name1,column_name2)>0** 
```

其中**column_name1 是引用列** ，而**column_name2 是您正在搜索的模式**

在你的例子中试试这个

**使用喜欢**

```
SELECT Table1_name, Table2_name FROM 
( SELECT Table1.name table1_name
        ,Table1.code table1_code
        ,Table2.name table2_name
        ,Table2.code table2_code
FROM Table1 JOIN Table2 ON  
(Table2.name LIKE '%'||Table1.name||'%') OR (Table1.code LIKE '%'||Table2.code||'%')
WHERE Table1.name=Table2.code
)  new1
 WHERE Table1_code LIKE '%b%' OR Table1_code LIKE '%e%' 
```

**使用指令**

```
 SELECT Table1_name, Table2_name FROM 
( SELECT Table1.name table1_name
        ,Table1.code table1_code
        ,Table2.name table2_name
        ,Table2.code table2_code
FROM Table1 JOIN Table2 ON
INSTR(Table2.name,Table1.name)>0   OR INSTR(Table1.code,Table2.code)>0 
WHERE Table1.name=Table2.code
)  new1
 WHERE Table1_code LIKE '%b%' OR Table1_code LIKE '%e%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:40:13.267

如果我是对的，这样的事情应该适合你：

```
SELECT * FROM table1 AND table2 WHERE table1code LIKE '%e%' 
```

# javascript - 在对象字面量的值内访问用户输入

> ID：14371862
> 
> 赞同：0
> 
> 时间：2013-01-17T03:38:22.670
> 
> 标签：javascript, object, object-literal

这些论坛很棒，我得到帮助的贡献者非常有才华。因此，每当我无法解决自己的问题或不理解编程概念时，我都会不断回来。这肯定是后者之一！

在我目前收到的帮助下，我设法开发了一个复杂的表单，最终用户将主要在其中单击一系列复选框并将一些数据输入到几个文本字段中。根据上述操作，这些操作的结果将使用各种文本填充一些文本框。

每个复选框在几个对象字面量中引用填充文本区域的文本。这工作得很好，该网站非常有用。

在我的对象文字中，我有名称：值对，其中“值”是一串文本。我一直试图在某些名称：值对中包含一个变量，但没有成功。这总是会破坏脚本，因为该变量从未定义/在页面加载时具有“空”值。

例如，

代替

```
 var example = {
var1:'some string',
var2:'some other string'
  } 
```

我试过，

```
var somevariable = document.getElementById('someId');
var example = {
var1: 'some string' + somevariable + 'some other bit',
var2: 'some other string'
} 
```

**我的问题是是否可以将脚本中其他地方引用的变量包含在对象文字中的名称：值对中？**

作为参考（因为它是一个相当长的脚本），我的网站是：[http](http://www.hematogones.com/bmbiopsies.html) ://www.hematogones.com/bmbiopsies.html 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:47:53.467

简短的回答是肯定的。这是一个工作示例：

```
var myStr = "world";
var obj = { var1: "hello " + myStr };
console.log(obj.var1); // Outputs: hello world 
```

正如我在评论中提到的，您的具体示例有几个语法错误，所以也许只是修复这些错误会纠正您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:49:44.990

对象字面量的诀窍在于它会立即被求值。没有“简单”的方法可以延迟您获得的价值。

```
var x = "Alice";
var obj = { greeting: "Hello, " + x + "." };
console.log(obj.greeting);  // "Hello, Alice."
x = "Bob";
console.log(obj.greeting);  // "Hello, Alice."
obj = { greeting: "Hello, " + x + "." };
console.log(obj.greeting);  // "Hello, Bob." 
```

**稍后再谈：**

如果您确实*确实*需要将变量放入稍后定义的字符串文字中，则可以创建一个内联函数。这样，它不是`obj.greeting`一个简单的字符串，而是一个您调用的函数（看起来像`obj.greeting()`）。这意味着不是在您声明对象时计算字符串值，而是在调用函数时声明它。这是 Javascript 的一个非常强大的功能，称为“闭包”，您可以花一整天的时间了解您使用它们获得的预期和意外行为。

```
var x = "Alice";
var obj = { greeting: function() { return "Hello, " + x + "." }};
console.log(obj.greeting());  // "Hello, Alice."
x = "Bob";
console.log(obj.greeting());  // "Hello, Bob." 
```

# linux - 用于从单行输出中获取变量计数的 Shell 脚本

> ID：14371863
> 
> 赞同：0
> 
> 时间：2013-01-17T03:38:26.127
> 
> 标签：linux, bash, shell

如何从以下输出中获取 @ 字符的计数。我使用了`tr`命令并提取了？我很想知道最好的方法是什么？我的意思是做同样事情的其他方法。

```
{running_device,[test@01,test@02]}, 
```

我的解决方案是：

```
echo '{running_device,[test@01,test@02]},' | tr ',' '\n' | grep '@' | wc -l 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:09:50.430

我认为使用起来更简单：

```
echo '{running_device,[test@01,test@02]},' | tr -cd @ | wc -c 
```

这为我产生了 2 个（在 Mac OS X 10.7.5 上测试）。`-c`选项表示“`tr`补充”（指定字符集）并`-d`表示“删除”，以便删除每个非`@`字符，并`wc`计算提供的内容（没有换行符，因此行数为 0，但字符数为 2 ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:28:46.947

### 使用 GNU Grep 避免字符翻译

这是另一种我个人觉得更直观的方法：使用 grep 仅提取匹配的字符，然后计算 grep 的输出行数。例如：

```
echo '{running_device,[test@01,test@02]},'   |
     fgrep --fixed-strings --only-matching @ |
     wc -l 
```

结果`2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T04:05:25.140

你的方法没有错。以下是其他几种方法：

```
echo $(echo {running_device,[test@01,test@02]}, |awk -F"@" '{print NF - 1}') 
```

或者

```
echo $((`echo {running_device,[test@01,test@02]} | sed 's+[^@]++g' | wc -c` - 1 )) 
```

我唯一担心的是，如果您在循环中运行此命令（例如，大文件中的每一行运行一次）。如果是这种情况，那么执行时间可能是一个问题，因为将 shell 实用程序串在一起会导致启动进程的开销，这可能会很慢。如果是这种情况，那么我建议编写一个纯 awk 版本来处理整个文件。

# jquery - mCustomScrollbar 不起作用（垂直滚动），我的列是鼠标滚轮非常非常慢

> ID：14371866
> 
> 赞同：6
> 
> 时间：2013-01-17T03:38:39.043
> 
> 标签：jquery

3天以来我非常沮丧。没有人能解决这个问题，我明天有一个演示文稿......水平滚动，firefox chrome，平板电脑一切都很好......但是任何内容的垂直滚动都很奇怪，运行一点点然后停止。而且我必须等待 3/4 秒才能再次滚动……而且，鼠标滚轮非常慢。我把我的代码，希望有人能看到它并帮助我：

html:

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />

    <title></title>

    <link href="player/video-js.css" rel="stylesheet"/>
    <link href="css/reset.css" rel="stylesheet" type="text/css" />
    <link href="css/estilosyfnext.css" rel="stylesheet" type="text/css" />

    <script src="js/customScrollBarMobile.js" type="text/javascript"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.mousewheel.min.js"></script>
    <script src="js/jquery.form.js"></script>
    <script src="js/jquery.validate.js"></script>
    <script src="player/video.js"></script>
    <script src="js/jquery.mCustomScrollbar.js"></script>
    <link href="css/jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css" />

    <script>

        $(function(){
        $('#contact').validate({
        submitHandler: function(form) {
        $(form).ajaxSubmit({
        url: 'process.php',
        success: function() {
        $('#contact').hide();
        $('#contact-form').append("<p class='thanks'>¡Gracias! Su formulario ha sido enviado.</p>")
        }
        });
        }
        });
        });

    </script>

    <script>
        $(function(){
            $("#contenedorP").wrapInner("<table cellspacing='0'><tr>");
            $(".post").wrap("<td></td>");
            $("body").mousewheel(function(event, delta) {
                this.scrollLeft -= (delta * 30);
                event.preventDefault();
            });   
        });

    </script>

    <script>

        $(document).ready(function () {

            $(".post").fadeTo(1, 0.8);
            $( "#contenedorP" ).draggable({ axis: 'x' });
            $(".post").hover(
                function () {
            $(this).find("#scroll_column").fadeTo("normal", 1);
            $(this).fadeTo("fast",     1);
                },
            function () {
            $(this).find("#scroll_column").fadeTo("normal", 0); 
            $(this).fadeTo("normal", 0.8);
            }
            ); 

            //Moveme//
            // CALCULO HASTA DONDE SE TIENE QUE DESPLAZAR LA CAPA//
            $('#flekdek').click(function() {  
                if ($(':animated').length) {
                    return false;
                }

                if($('#wrapper').width() - $(window).width() + $('#wrapper').position().left >= 0) {
                    $('#wrapper').animate({left: '-=780'}, 1500, "easeOutQuad", function() {

                        console.debug("position " + $('#wrapper').position().left + "ancho total " + $('#wrapper').width() + 
                                        "ancho ventana " + $(window).width());

                    });
                }

            });

            $('#flekizq').click(function(e) {  

                // console.debug("offset " + $('#wrapper').offset().left + " position " + $('#wrapper').position().left + 
                //                              "ancho total de la capa" + $('#wrapper').width() + "ancho ventana " + $(window).width());

                if ($('#wrapper').position().left!=0)
                { 
                    if ($(':animated').length) {
                        return false;
                    }

                    $('#wrapper').animate({left: '+=780'}, 1500, "easeOutQuad", function() {

                    }); 
                 }
            });

        });

        //fade in//
        $(function() {
            $("#contenedorP").fadeIn(1000);

            $('div').on('click', function(){
                 $('#flekdek').click();
                 return false;
            });
        });

        //scroll everywhere//
        (function($){
            $(document).ready(function(){
                $(".content").mCustomScrollbar({mouseWheel:true});
            });
        })(jQuery);

</script>

<script>

//MY fix div para izquierda derecha//
    $('#fixed').bind('mousewheel', function(e){
        var scrollTo= (e.wheelDelta*-1) + $('#wrapper').scrollTop();
        $("#wrapper").scrollTop(scrollTo);
    });

// ir al div elegido no funciona //

        jQuery(document).ready(function($) {

        $(".scroll").click(function(event){     
            event.preventDefault();
            $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
        });
    });

</script>

<script type="text/javascript">
$("#wrapper").mCustomScrollbar(
"vertical",200,"easeOutCirc",1.05,"auto","yes","yes",10
);
if (jQuery.browser.mobile == true) {
$("#wrapper").mCustomScrollbarMobile("vertical",200,5); 
}

</script>

</head>

<body>
<!--flechas-->
    <div id="flekizq" class="left_button"><img src="img/flecha_left.png" alt=""></DIV>
       <div id="flekdek" class="right_button"><img src="img/flecha_right.png" alt=""></DIV>

    <div id="top">
    <h1 id="topmenu">menu</h1>
    <div id="menutop">      
            <ul>
            <li><a href="#div00" class="scroll">00</a></li>
            <li><a href="#div04" class="scroll">01</a></li>
            <li><a href="#div05" class="scroll">02</a></li>
            <li><a href="#div06" class="scroll">03</a></li>
            <li><a href="#div07" class="scroll">04</a></li>
            <li><a href="#div08b" class="scroll">05</a></li>
            <li><a href="#div08" class="scroll">06</a></li>
            <li><a href="#div09" class="scroll">07</a></li>
            <li><a href="#div10" class="scroll">08</a></li>
            <li><a href="#div11" class="scroll">09</a></li>
            <li><a href="#div12" class="scroll">10</a></li>
            <li><a href="#div13" class="scroll">11</a></li>
            </ul>
    </div>

    <div id="nextcopy">ENVIAR UN EMAIL</a></div>

    </div>

<div id="contenedorP" class="fadeOnLoad">

    <div id="wrapper">

        <div class="post">
        <div id="div00" class="content"></div>
        <div id="div01" class="content">
        <p><img src="img/C01.png" alt=""/></p>
            </div>
        </div>

        <div class="post">
            <div id="div02"class="content">

        <p><img src="img/C02a.jpg" alt="" ></p>
        <p><img src="img/C02c.jpg" alt="" ></p>
        <p><img src="img/C02d.jpg" alt="" ></p>
        <p><img src="img/C02formuoff.jpg" alt="" ></p>
        <!--temp formulario-- ponerlo al final -->

        <div id="contact-form">    

        <form id="contact" method="post" action="">
        <fieldset>    

        <label for="name">Nombre</label>
        <input type="text" name="name">

        <label for="email">E-mail</label>
        <input type="email" name="email">

        <label for="phone">Tlf.</label>
        <input type="text" name="phone">

        <label for="website">Web Site</label>
        <input type="url" name="url">

        <label for="message">Su pregunta/Commentario</label>
        <textarea name="message"></textarea>

        <input type="submit" name="submit" id="submit" value="Send Message" />

        </fieldset>
        </form>

        </div><!-- /end #contact-form -->       

        <p><img src="img/C02e.jpg" alt="" ></p>
            </br>
            </br>
            </br>
            </br>
            </br>
            </br>
            </div>
        </div> 

        <div class="post">

            <div id="div03"class="content">

            <p><img class="menuHover" src="img/menu/menuT.png" alt=""></p>
            <p><a href="#div00" class="scroll"><img class="menuHover" src="img/menu/menu01.png" alt=""></a></p>
            <p><a href="#div04" class="scroll"><img class="menuHover" src="img/menu/menu02.png" alt=""></a></p>
            <p><a href="#div05" class="scroll"><img class="menuHover" src="img/menu/menu03.png" alt=""></a></p>
            <p><a href="#div06" class="scroll"><img class="menuHover" src="img/menu/menu04.png" alt=""></a></p>
            <p><a href="#div07" class="scroll"><img class="menuHover" src="img/menu/menu05.png" alt=""></a></p>
            <p><a href="#div08b" class="scroll"><img class="menuHover" src="img/menu/menu06.png" alt=""></a></p>
            <p><a href="#div08" class="scroll"><img class="menuHover" src="img/menu/menu07.png" alt=""></a></p>
            <p><a href="#div09" class="scroll"><img class="menuHover" src="img/menu/menu08.png" alt=""></a></p>
            <p><a href="#div10" class="scroll"><img class="menuHover" src="img/menu/menu09.png" alt=""></a></p>
            <p><a href="#div11" class="scroll"><img class="menuHover" src="img/menu/menu10.png" alt=""></a></p>
            <p><a href="#div12" class="scroll"><img class="menuHover" src="img/menu/menu11.png" alt=""></a></p>
            <p><img class="menuHover" src="img/menu/menupie.png"alt=""></a></p>

            </div>
        </div>

        <div class="post">
            <div id="div04" class="content">
            <p><img src="img/C04.jpg" alt="" ></p>
            </div>
        </div>

        <div class="post">
            <div id="div05" class="content">
            <p><img src="img/C05.jpg" alt="" ></p>
            </div>
        </div>

        <div class="post">
            <div id="div06"class="content">
            <p><img src="img/C06.jpg" alt="" ></p>  
            </div>
        </div>

        <div class="post">
            <div id="div07"class="content">
            <p><img src="img/C07.jpg" alt="" ></p>
            </div>
        </div>

        <div class="post">
            <div id="div08b"class="content">
            <p><img src="img/equipo.png" alt=""></p>
            <p class="E1rollover">xxxx</p>
            <p class="E2rollover">xxxx</p>
            <p class="E3rollover">xxx</p>
            <p class="E4rollover">xxxxx</p>
            <p class="E5rollover">xxxxx</p>
            <p class="E6rollover">xxxx</p>
            <p class="E7rollover">xxxx</p>
            <p class="E8rollover">xxxxx</p>
            <p class="E9rollover">xxxxx</p>
            <p class="E10rollover">xxxxx</p>
            </div>
        </div>

        <div class="post">
            <div id="div03"class="content">
            <p><img class="menuHover" src="img/menu/menuT.png" alt=""></p>
            <p><a href="#div00" class="scroll"><img class="menuHover" src="img/menu/menu01.png" alt=""></a></p>
            <p><a href="#div04" class="scroll"><img class="menuHover" src="img/menu/menu02.png" alt=""></a></p>
            <p><a href="#div05" class="scroll"><img class="menuHover" src="img/menu/menu03.png" alt=""></a></p>
            <p><a href="#div06" class="scroll"><img class="menuHover" src="img/menu/menu04.png" alt=""></a></p>
            <p><a href="#div07" class="scroll"><img class="menuHover" src="img/menu/menu05.png" alt=""></a></p>
            <p><a href="#div08b" class="scroll"><img class="menuHover" src="img/menu/menu06.png" alt=""></a></p>
            <p><a href="#div08" class="scroll"><img class="menuHover" src="img/menu/menu07.png" alt=""></a></p>
            <p><a href="#div09" class="scroll"><img class="menuHover" src="img/menu/menu08.png" alt=""></a></p>
            <p><a href="#div10" class="scroll"><img class="menuHover" src="img/menu/menu09.png" alt=""></a></p>
            <p><a href="#div11" class="scroll"><img class="menuHover" src="img/menu/menu10.png" alt=""></a></p>
            <p><a href="#div12" class="scroll"><img class="menuHover" src="img/menu/menu11.png" alt=""></a></p>
            <p><img class="menuHover" src="img/menu/menupie.png"alt=""></a></p>

            </div>
        </div>

        <div class="post">
            <div id="div08"class="content">
            <p><img src="img/C08.jpg" alt="" ></p>
            </div>
        </div>

        <div class="post">
            <div id="div09"class="content">
            <p><img src="img/C09.jpg" alt=""></p>
            </div>
        </div>

        <div class="post">
            <div id="div10"class="content">
            <p><img src="img/C10.jpg" alt=""></p>
            </div>
        </div>

        <div class="post">
            <div id="div11"class="content" style="background:white">

            <p><img src="img/videocab.jpg" alt=""></p>

            <video id="example_video_1" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_corona.jpg" preload="auto" data-setup="{}" style="background:white">
            <source type="video/mp4" src="videos/coronas.mp4"/>
            <source type='video/webm' src="videos/coronas.webm"/>
            </video>

            <video id="example_video_2" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_real.jpg" preload="auto" data-setup="{}" style="background:white">
            <source type="video/mp4" src="videos/real.mp4"/>
            <source type='video/webm' src="videos/real.webm"/>
            </video>

            <video id="example_video_3" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_oriflame.jpg" preload="auto" data-setup="{}" style="background:white">
            <source type="video/mp4" src="videos/globaldream.mp4"/>
            <source type='video/webm' src="videos/globaldream.webm"/>
            </video>

            <video id="example_video_4" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_carnaval.jpg" preload="auto" data-setup="{}" style="background:white">
            <source type="video/mp4" src="videos/carnaval.mp4"/>
            <source type='video/webm' src="videos/carnaval.webm"/>
            </video>

            <video id="example_video_5" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_india.jpg" preload="auto" data-setup="{}" style="background:white">
            <source type="video/mp4" src="videos/india.mp4"/>
            <source type='video/webm' src="videos/india.webm"/>
            </video>

            <p><img src="img/cortina_video.png" alt=""></p>

            <video id="example_video_6" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_traditions.jpg" preload="auto" data-setup="{}"style="background:white">
            <source type="video/mp4" src="videos/tradition.mp4"/>
            <source type='video/webm' src="videos/tradition.webm"/>
            </video>

            <video id="example_video_7" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_coronas2.jpg" preload="auto" data-setup="{}"style="background:white">
            <source type="video/mp4" src="videos/coronas2.mp4"/>
            <source type='video/webm' src="videos/coronas2.webm"/>
            </video>

            <video id="example_video_8" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_venecia.jpg" preload="auto" data-setup="{}"style="background:white">
            <source type="video/mp4" src="videos/venecia.mp4"/>
            <source type='video/webm' src="videos/venecia.webm"/>
            </video>

            <video id="example_video_9" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_suntory.jpg" preload="auto" data-setup="{}"style="background:white">
            <source type="video/mp4" src="videos/suntory.mp4"/>
            <source type='video/webm' src="videos/suntory.webm"/>
            </video>

            <video id="example_video_10" class="video-js vjs-default-skin" controls width="376" height="264" poster="img/video_previo_orangina.jpg" preload="auto" data-setup="{}"style="background:white">
            <source type="video/mp4" src="videos/origina.mp4"/>
            <source type='video/webm' src="videos/origina.webm"/>
            </video>

            </br>
            </br>

            </div>
        </div>

        <div class="post">
            <div id="div12"class="content">
            <p><img src="img/C12.jpg" alt=""></p>
            </div>
        </div>

        <div class="post">
            <div id="div13"class="content">
            <p><img src="img/C13.jpg" alt=""></p>
            </div>
        </div>

    </div>

</div>

    <div id="footer" style="clear:both">

                <!--Control wrapper DEKIZQ-->
            <ul>
            <!--li id="flekizq" align="center"><img src="img/flecha_left.png" alt=""></li>-->
            <li id="fleknext"align="center"><img src="img/logopeke.png" alt=""></li>
            <!--li id="flekdek" align="center"><img src="img/flecha_right.png" alt=""></li>-->
            </ul>
            <!--Control wrapper DEKIZQ-->

    </div>  

</body>
<script>
$(window).load(function() {
$(".content").mCustomScrollbar("vertical",400,"easeOutCirc",1.05,"auto","yes");
});
</script>
</html> 
```

我的CSS：

```
html {
            overflow: hidden;
        }

body { 
    font-size: 62.5%; 
    font-family: 'Lucida Grande', Helvetica, sans-serif;
    background: white;
    color: #999; 
    overflow-x: hidden;
    background: url(../img/BG2.jpg) repeat;

    }

#contenedorP{
    display:none; 
    position:absolute;

    left:0px;

}

#wrapper{
    height:555px;
    max-height:555px;
    position: absolute;  
    left:0px;
    -moz-box-shadow: 0px 6px 5px #888;
    -webkit-box-shadow: 0px 6px 5px #888;
    box-shadow: 0px 6px 5px #888;
    margin-top:22px;
    margin-bottom: 20px;
    padding-top: 2px;
    width: 4442px;
    overflow:hidden;
    background: white!important;

}

.left_button{

       POSITION:fixed;
       left:0px;
       top:300px;
       font-size:50px;
       margin-left: 5px;
       z-index:100;
       opacity: 0.4;
}
.right_button{

       POSITION:fixed;
       right:0px;
       top:300px;
       font-size:50px;
       margin-right:5px;
       z-index:100;
       opacity: 0.4;

}

.left_button:hover{

       POSITION:fixed;
       left:0px;
       top:300px;
       font-size:50px;
       z-index:100;
       opacity: 1;
}
.right_button:hover{

       POSITION:fixed;
       right:0px;
       top:300px;
       font-size:50px;
       z-index:100;
       opacity: 1;

}

#scroll_column{
   display:none;
}

#div03{
    background: #888888;
    margin-right:5px;
}

.menuHover{
    opacity: 1;
}

.menuHover:hover{
    opacity: 0.4;
}

#fixed { 
    position: fixed; 
    right: 50%;
    }

#menutop li{
    color: grey;
    text-align: center;
    cursor: pointer;
    display: inline-block;
    margin-top: 6px;
    margin-left:5px;

}

#menutop li a{
    color: grey;
    text-decoration: none;

}

#menutop li a:hover{
    color: white;

}

#nextcopy{
    font-size: 14px;
    color: #C4C4C4;
    padding-right:85px;
    margin-right:5px;
    margin-top: -10px;
    float: right;
    background: url(../img/top_mail.jpg) center right no-repeat;
}

#nextcopy a{
    color: grey;
    text-decoration: none;

}

#nextcopy a:hover{
    color: white;

}

#footer{
    left:0px;
    margin-top: 5px;
    width: 100%;
    position: absolute;
    top: 590px;

}

#footer li#fleknext{
    text-align: center;
    margin-top:4px;
}

li#flekdek, li#flekizq{
    color: grey;
    text-align: center;
    cursor: pointer;
    display: inline-block;
    margin-top: 3px;

}

.mCustomScrollBox a img{
    margin-right:-5px;
    margin-top:15px;

}

img:hover{
    cursor:pointer;
}

#top{
     z-index:99;
    background: black;
    height:25px;
    width: 100%;
    position:fixed;
    top:0px;
    -moz-box-shadow: 3px #888;
    -webkit-box-shadow:3px #888;
    box-shadow: 3px #888;

}

h1#topmenu{
    font-size: 14px;
    color: #C4C4C4;
    margin-left:25px;
    padding-top: 3px;
    float: left;
}

/*def*/
* {
    margin: 0; 
    padding: 0; 
}

tr { 
    vertical-align: top;
}
.post { 

}
p { 
    font-size: 1.2em; 
    margin: 0 0 05px 0; 
}

h2 { 
    font-family: Sans-serif; 
    font-size: 3.0em;
    letter-spacing: -1px; 
    color: #ccc; 
}

table, table td {
    padding: 0; border-spacing: 1px}
/*Init Scrolll*/
    {
        margin: 0;
        padding: 0;
    }

    .bsa_it_ad {
        padding: 8px 4px 8px 12px !important;
        position: relative;
        border: 0 !important;
        background: #D6D5D5 !important;
        border-top: 0 !important;
        box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.1);
        font: 11px "Lucida Grande", Sans-Serif !important;
    }
    .bsa_it_ad:before, .bsa_it_ad:after {
        content: "";
        position: absolute;
        top: 0;
        left: 6px;
        width: 100%;
        height: 100%;
        background: #989898;
        border-bottom: 6px solid #989898;
        z-index: -1;
        box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.1);
    }
    .content{
        margin:0px;
        margin-top: 2px; 
        height:610px;
        max-height:610px; 
        padding:0px; 
        overflow:auto; 
        float:left; 
        /*background:#282828;
        background:#121212;*/
        }

    .bsa_it_ad:before {
        top: 0;
        left: 12px;
        z-index: -2;
        background: #6C6666;
        border-bottom: 12px solid #6C6666;
    }

    .bsa_it_ad a {
      margin: 0 !important;
        padding: 0 !important;
    }
    .bsa_it_ad a img {
      border: 0 !important;
        position: static !important;
    }
    .bsa_it_ad a:hover img {
        margin: 0 !important;
    }
    .bsa_it_ad a:hover {
      background: none !important;
    }
    .bsa_it_i {
        margin: 0 15px 0 0 !important;
    }
    .bsa_it_t {
        font-size: 14px !important;
        margin: 12px 0 0 0 !important;
    }
    .bsa_it_d {
        padding-right: 10px;
    }
    .bsa_it_p{
        display: none !important;
    }
    #demo-bar-ad {
        width: 416px;
        position: absolute;
        right: 0;
        top: -20px;
        font: 11px "Lucida Grande", Sans-Serif !important;
    }
    #bsap_aplink {
        position: absolute;
        color: #999;
        text-decoration: none;
        bottom: 8px !important;
        right: 8px !important;
        padding: 0 !important;
    }
    .bsa_it_p a:hover {
        background:none !important;
    }
    #demo-top-bar {
        text-align: left;
        background: #e18728;
        position: relative;
        zoom: 1;
        width: 100% !important;
        z-index: 6000;
        box-shadow: 0 0 10px black;
        padding: 20px 0 15px;
    }
    #demo-bar-inside {
        width: 960px;
        margin: 0 auto;
        position: relative;
    }
    #demo-top-bar:before, #demo-top-bar:after {
        content: "";
        position: absolute;
        top: 0;
        left: 6px;
        width: 100%;
        height: 100%;
        background: #e18728;
        border-bottom: 6px solid #8F5314;
        z-index: -1;
        box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.1);
    }
    #demo-top-bar:before {
        top: 0;
        left: 12px;
        background: #6C6666;
        border-bottom: 12px solid #62390E;
    }

    #demo-bar-buttons {
        display: inline-block;
        width: 236px;
        text-align: center;
        vertical-align: top;
        font-size: 0;
    }
    #demo-bar-buttons a {
        font-size: 12px;
        color: white;
        display: block;
        margin: 2px 0;
        text-decoration: none;
        font: 14px "Lucida Grande", Sans-Serif !important;
    }
    #demo-bar-buttons a:hover,
    #demo-bar-buttons a:focus {
        color: #333;
    }

    #demo-bar-badge {
        display: inline-block;
        width: 302px;
        padding: 0 !important;
        margin: 0 !important;
        background-color: transparent !important;
    }
    #demo-bar-badge a {
        display: block;
        width: 100%;
        height: 38px;
        border-radius: 0;
        bottom: auto;
        margin: 0;
        background: url(/images/examples-logo.png) no-repeat;
        background-size: 100%;
        overflow: hidden;
        text-indent: -9999px;
    }
    #demo-bar-badge:before, #demo-bar-badge:after {
        display: none !important;
    }

 /*Formulario*/

 /*-------------------------------------
FORM CORE
------------------------------------------*/

form#contact fieldset {
    padding: 10px 20px 20px 20px;
    margin: 0 auto;
    border: 0;
    background-color: #fff;
    width: 290px;
    text-align: left;
    border-radius: 8px;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    -moz-box-shadow: 0px 0px 10px #d3d3d3; 
    -webkit-box-shadow: 0px 2px 10px #d3d3d3; 
    box-shadow: 0px 0px 10px #d3d3d3; 
}

form#contact input[type="text"], input[type="url"], 
input[type="email"], input[type="tel"], textarea {
    margin: 3px 0 0 0;
    padding: 6px; 
    width: 260px; 
    font-family: arial, sans-serif; 
    font-size: 12px; 
    border: 1px solid #ccc;
    background: -webkit-gradient(linear, left top, left 15, from(#FFFFFF), color-stop(4%, #f4f4f4), to(#FFFFFF));
    background: -moz-linear-gradient(top, #FFFFFF, #f4f4f4 1px, #FFFFFF 15px);
}

form#contact textarea {
    width: 275px; 
    height: 150px;
}

form#contact label {
    display: block;
    font-size: 13px;
    color: #666;
    margin-top: 10px;
    font-weight: bold;
}

form#contact label.error { 
    width: 270px;
    margin: 3px 0 0 0;
    display: block;
    color: #cf0101;                              
    font-size: 11px; 
    text-align: right;
}

form#contact .placeholder {
    color: #aaa;
}

form#contact .button {
    display: inline-block;
    margin: 15px 0 0 90px;
    padding: 5px 15px 5px 15px;
    background-color: #ff9e00;
    border: none;
    color: #fff;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
}

form#contact .button:hover {
    background-color: #fc8500;
    cursor: pointer;
}

form#contact .button:active {
    margin-top: 16px;
    background-color: #f08004;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-29T11:27:04.803

称呼

`$(".content").mCustomScrollbar()`

一次，之后，只更新它。还有，一定要在生成表格后调用这个函数……代码混乱，多准备……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T00:35:47.810

看起来 OP 多次实例化元素：

*第 127 行：*

```
(function($){
        $(document).ready(function(){
            $(".content").mCustomScrollbar({mouseWheel:true});
        });
    })(jQuery); 
```

*第 466 行：*

```
$(window).load(function() {
    $(".content").mCustomScrollbar("vertical",400,"easeOutCirc",1.05,"auto","yes");
}); 
```

2个选项：

1.  **不要那样**做，正如 tostasqb 所说，只打**一次电话**
2.  用作CYA `.not()`，对更大的代码库非常有帮助：

`$('.content').not('.mCustomScrollbar').(<your options here>);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T15:59:50.550

我用过的最好的滚动条是 jquery slimscrollbar（例如，用于联系人聊天列表的 facebook 滚动条），它反应灵敏，非常容易实现。

[http://rocha.la/jQuery-slimScroll](http://rocha.la/jQuery-slimScroll)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T06:39:44.057

你可以试试这个

```
 $(".content").mCustomScrollbar({
        theme: "minimal"
        //,horizontal:400
    }); 
```

# objective-c - -1 < 4 返回否？太奇怪了

> ID：14371867
> 
> 赞同：2
> 
> 时间：2013-01-17T03:38:39.933
> 
> 标签：objective-c, arrays

```
int counter=-1;
NSArray *pointArray=[[NSArray alloc]initWithObjects:@"1",@"2",@"3",@"1",@"2", nil];
NSString *result=[NSString stringWithFormat:@"%d",counter<pointArray.count-1]; 
```

信不信由你，结果是0！！！试试看谁能告诉我为什么？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:44:50.397

您正在将有符号数 (-1) 与无符号数 (pointArray.count - 1) 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:01:20.590

请注意，以下代码重现了此问题：

```
#include <Foundation/Foundation.h>
int main(int argc, char *argv[]) {
    NSUInteger uns = 4;
    int sig = -1;
    BOOL cmp = (sig < uns);
    NSLog(@"(%d<%zu)=%d", sig, uns, cmp);
} 
```

这个的输出是

```
 (-1<4)=0 
```

* * *

正如已经指出的那样，问题在于您将 an`int`与 an进行比较`NSUInteger`。但请记住，在 64 位系统上，`NSUInteger`是[`typedef`.`unsigned long`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html)

我们看到的行为是[通常算术转换](http://msdn.microsoft.com/en-us/library/3t4w2bkb%28v=vs.80%29.aspx)的结果：

> 1.  如果任一操作数是 long double 类型，则另一个操作数将转换为 long double 类型。
> 2.  如果不满足上述条件且任一操作数为 double 类型，则将另一个操作数转换为 double 类型。
> 3.  如果不满足上述两个条件，并且其中一个操作数是 float 类型，则将另一个操作数转换为 float 类型。
> 4.  如果不满足以上三个条件（操作数都不是浮点类型），则对操作数进行整数转换，如下所示：
>     *   如果任一操作数是 unsigned long 类型，则另一个操作数将转换为 unsigned long 类型。
>     *   如果不满足上述条件，并且其中一个操作数是 long 类型，而另一个是 unsigned int 类型，则两个操作数都将转换为 unsigned long 类型。
>     *   如果不满足以上两个条件，并且其中一个操作数是 long 类型，则将另一个操作数转换为 long 类型。
>     *   如果不满足上述三个条件，并且其中一个操作数是 unsigned int 类型，则将另一个操作数转换为 unsigned int 类型。
>     *   如果以上条件都不满足，则两个操作数都转换为 int 类型。

由于两个操作数都不是浮点类型，我们得到`4.`. 由于第二个操作数( `pointArray.count-1`)是类型`NSUInteger`，即是类型`unsigned long`，所以另一个操作数( `counter`)被转换为类型`unsigned long`，取值`18446744073709551615`确实大于`4`。

# php - Laravel Put Route Giving 404 错误

> ID：14371873
> 
> 赞同：2
> 
> 时间：2013-01-17T03:39:27.470
> 
> 标签：php, frameworks, routes, http-status-code-404, laravel

所以我一直在尝试在路由中使用“put”方法，我直接从“routes.php”文件中遵循了这个示例：

```
Route::put('hello/(:any)', function($name)
{
      return "Welcome, $name.";
}); 
```

这会返回 404 错误，我真的希望我的代码如下所示。我希望能够从 url 中获取参数并使用它们进行验证，稍后我计划使用编码方法，但现在我只想让路由正常工作，然后再尝试对它们进行编码。任何帮助将不胜感激！！！

```
Route::put('admin/activate/(:any?)/(:any?)', function($r, $e) {
     return "Random value: $r <br/> Email: $e";
}); 
```

您可以在此处找到该页面：`http://diverseevolution.com/admin/activate/randomstring/test@gmail.com`

这是我的整体“routes.php”文件：

```
Route::get('/', function() {
     return View::make('homepage.index');
});

///////////////////////////////////////////////////////////////////////////////////////////
///////////////        Administration Account Creation & Login        /////////////////////
///////////////////////////////////////////////////////////////////////////////////////////

// Create account
Route::get('admin/createform', function() {
     return View::make('admin.createform');
});

// action for actual admin creation
Route::post('admin/create', array('before' => 'csrf', function() {
     $rules = array(
          'fname' => 'required|min:3',
          'lname' => 'required|min:3',
          'email' => 'required|email|unique:users',
          'pword' => 'required'
     );

     $validated = Validator::make(Input::all(), $rules);

     if($validated -> fails()) {
          return Redirect::to('admin/createform')->with_input();
     } else {
          $r = Hash::make(time() .'ReAl19dk4-^4$'. $_POST['pword']);

          $user = new User;

          $user -> fname = $_POST['fname'];
          $user -> lname = $_POST['lname'];
          $user -> email = $_POST['email'];
          $user -> pword = Hash::make($_POST['pword']);
          $user -> status = 'unactivated';
          $user -> random = $r;

          if($user -> save()) {

               //////////////////////// Email /////////////////////////////////
               // We still need to make this functionality

               $msg = '
               <h1>Your admin account has been created!</h1>
               <p>Congratulations on creating your new account, there is one last step before your account can be activated. Below is a link, simply follow the link to activate your account, once you have your account will be active and you will be able to login!</p>
               <p><a href="http://diverseevolution.com/admin/activate/'. $r .'/'. $_POST['email'] .'">http://diverseevolution.com/admin/activate/'. $r .'/'. $_POST['email'] .'</a></p>
               <p>Thanks, Diverse Evolution</p>
               ';

                    // Mail headers
                    $headers  = "Reply-To: Diverse Evolution <info@diverseevolution.com>\r\n"; 
                    $headers .= "Return-Path: Diverse Evolution <info@diverseevolution.com>\r\n"; 
                    $headers .= "From: Diverse Evolution <info@diverseevolution.com>\r\n"; 
                    $headers .= "Organization: Diverse Evolution\r\n";
                    $headers .= 'MIME-Version: 1.0' . "\r\n";
                    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
                    $headers .= "X-Priority: 3\r\n";
                    $headers .= "X-Mailer: PHP". phpversion() ."\r\n";
                    define('_headers', $headers);

               if(mail($_POST['email'], 'Diverse Evolution Account Created', $msg, _headers)) {
                    return Redirect::to('admin/thanks');
               } else {

               }
          } else {
               return Redirect::to('admin/createform')->with_input();
          }

     }
}));

// creates the thank you page for the admin account creation
Route::get('admin/thanks', function() {
     return View::make('admin/thanks');
});

// account activation email, this is still not working 011613
Route::put('admin/activate/(:any?)/(:any?)', function($r, $e) {
     return "Random value: $r <br/> Email: $e";
});

// Login form
Route::get('admin/loginform', function() {
     return View::make('admin/loginform');
});

// Login action
Route::post('admin/login', array('before' => 'csrf', function() {
     $rules = array(
          'email' => 'required|email',
          'pword' => 'required'
     );

     $validated = Validator::make(Input::all(), $rules);

     if($validated -> fails()) {
          return Redirect::to('admin/loginform')->with_input();
     } else {
          $credentials = array('username' => $_POST['email'], 'password' => $_POST['pword']);

          if (Auth::attempt($credentials)) {
               return Redirect::to('admin/dash');
          } else {
               return Redirect::to('admin/loginform')->with_input();
          }
     }
}));

Route::get('admin/logout', function() {
     Auth::logout();
     return Redirect::to('admin/loginform');
});

///////////////////////////////////////////////////////////////////////////////////////////
///////////////////////        Administration Pages        ////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////
Route::group(array('before' => 'auth'), function() {
    Route::get('admin/dash', function() {
        return 'Dashboard';
    });
});

/*
|--------------------------------------------------------------------------
| Application 404 & 500 Error Handlers
|--------------------------------------------------------------------------
|
| To centralize and simplify 404 handling, Laravel uses an awesome event
| system to retrieve the response. Feel free to modify this function to
| your tastes and the needs of your application.
|
| Similarly, we use an event to handle the display of 500 level errors
| within the application. These errors are fired when there is an
| uncaught exception thrown in the application.
|
*/

Event::listen('404', function()
{
    return Response::error('404');
});

Event::listen('500', function()
{
    return Response::error('500');
});

/*
|--------------------------------------------------------------------------
| Route Filters
|--------------------------------------------------------------------------
|
| Filters provide a convenient method for attaching functionality to your
| routes. The built-in before and after filters are called before and
| after every request to your application, and you may even create
| other filters that can be attached to individual routes.
|
| Let's walk through an example...
|
| First, define a filter:
|
|       Route::filter('filter', function()
|       {
|           return 'Filtered!';
|       });
|
| Next, attach the filter to a route:
|
|       Route::get('/', array('before' => 'filter', function()
|       {
|           return 'Hello World!';
|       }));
|
*/

Route::filter('before', function()
{
    // Do stuff before every request to your application...
});

Route::filter('after', function($response)
{
    // Do stuff after every request to your application...
});

Route::filter('csrf', function()
{
    if (Request::forged()) return Response::error('500');
});

Route::filter('auth', function()
{
    if (Auth::guest()) return Redirect::to('admin/loginform');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:37:09.780

你没有包括你的表格 - 但我猜你没有在表格中包括“PUT”。

```
echo Form::open('user/profile', 'PUT'); 
```

[您可以在此处查看有关表单和 PUT 的更多信息](http://laravel.com/docs/views/forms)。但一般来说，您需要在表单中专门包含 PUT，否则它将只是 POST（浏览器默认）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:47:15.917

使用 GET 有效吗？

或者

```
Route::put('hello/(:all)', function($name)
{
      return "Welcome, $name.";
}); 
```

都是因为@

# magento - 如何使用模块更改 magento 设计

> ID：14371875
> 
> 赞同：1
> 
> 时间：2013-01-17T03:39:35.383
> 
> 标签：magento, module

我是magento新手，想改产品列表和产品视图页面的设计，但是不知道怎么可能，不想改主题核心文件，有什么办法可以改设计通过一个模块。任何人请帮助我

# magento - Firefox 和 IE 上的 Magento 1.5 重定向问题

> ID：14371882
> 
> 赞同：0
> 
> 时间：2013-01-17T03:40:29.230
> 
> 标签：magento, redirect, url-rewriting, http-status-code-301

我最近更改了其中一个类别的名称并为其创建了一个永久重定向 URL。但问题是当我尝试导航到该类别时，它会在 Firefox 和 IE 上出现重定向错误。

如果我使用 Safari 或 Chrome，它可以正常工作。但是当我使用 IE 时它只是刷新页面，当我使用 Firefox 时，我收到此错误“页面未正确重定向 Firefox 检测到服务器正在以永远不会完成的方式重定向此地址的请求。我启用了 cookie。可能是什么问题

以前有没有人遇到过同样的问题，是否有人找到了解决方案

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T01:22:47.560

您是否尝试过删除所有 cookie 然后重新启动浏览器？

这发生在我身上，查看我目前正在工作的网站，然后弹出错误。我尝试在我的 chrome 上查看它，它很好。因此，我尝试删除所有 cookie 并重新启动浏览器，一切都很好。

# python - python导入csv列表

> ID：14371883
> 
> 赞同：4
> 
> 时间：2013-01-17T03:41:01.960
> 
> 标签：python, csv, dictionary, import

我想将 CSV 导入 python 中的多个字典

```
queryInclude,yahoo,value1
queryInclude,yahoo,value2
queryInclude,yahoo,value3
queryExclude,yahoo,value4
queryExclude,yahoo,value5
queryInclude,google,value6
queryExclude,google,value7 
```

我的理想结果是 row[0]=dictionary、row[1]=key 和 row[2]=value 或值列表

```
queryInclude = {
        "yahoo": ["value1", "value2", "value3"],
        "google": ["value6"] }
queryExclude = {
        "yahoo": ["value4", "value5"],
        "google": ["value7"] } 
```

这是我的代码：

```
import csv
queryList=[]
queryDict={}
with open('dictionary.csv') as csvfile:
    reader = csv.reader(csvfile, delimiter=',', quotechar='|')
    for row in reader:
        queryDict[row[1]] = queryList.append(row[2])
        print queryDict

{'yahoo': None}
{'yahoo': None}
{'yahoo': None}
{'yahoo': None}
{'yahoo': None}
{'google': None, 'yahoo': None}
{'google': None, 'yahoo': None} 
```

如果需要，我可以灵活地更改 CSV 格式。我上面发布的理想结果是我已经硬编码到我的应用程序中的结果。我正在努力让未来添加更多价值变得更容易。我已经花了很多时间研究这个，如果我取得更多进展，我会继续更新。我的思维过程看起来像这样......不确定在迭代 CSV 行时如何构造我的循环和组合类似的值有多接近......

```
for row in reader:
    where row[0] = queryInclude:
        create a dictionary combining keys into a list of values
    where row[0] = queryExclude:
        create a dictionary combining keys into a list of values 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T04:03:42.437

使用`defaultdict`可以防止必须考虑添加到字典中的第一个元素。它在键不存在时声明默认类型，并且必须是创建默认对象的可调用对象：

```
#! python3
import csv
from io import StringIO
from collections import defaultdict
from pprint import pprint

data = StringIO('''\
queryInclude,yahoo,value1
queryInclude,yahoo,value2
queryInclude,yahoo,value3
queryExclude,yahoo,value4
queryExclude,yahoo,value5
queryInclude,google,value6
queryExclude,google,value7
''')

D = defaultdict(lambda: defaultdict(list))
for d,k,v in csv.reader(data):
    D[d][k].append(v)
pprint(D) 
```

输出：

```
{'queryExclude': {'google': ['value7'],
                  'yahoo': ['value4', 'value5']},
 'queryInclude': {'google': ['value6'],
                  'yahoo': ['value1', 'value2', 'value3']}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:57:46.830

这有帮助吗？

```
import StringIO
import csv

csvfile = StringIO.StringIO("""queryInclude,yahoo,value1
queryInclude,yahoo,value2
queryInclude,yahoo,value3
queryExclude,yahoo,value4
queryExclude,yahoo,value5
queryInclude,google,value6
queryExclude,google,value7""")

reader = csv.reader(csvfile, delimiter=',', quotechar='|')

dict1={}
for row in reader:
    key1, provider, value1 = row
    if not dict1.has_key(key1):
        dict1[key1] = {}
    if not dict1[key1].has_key(provider):
        dict1[key1][provider] = []
    dict1[key1][provider].append(value1) 
```

# list - 如何在 Erlang 中使用闭包？

> ID：14371884
> 
> 赞同：5
> 
> 时间：2013-01-17T03:41:28.140
> 
> 标签：list, functional-programming, erlang, closures, anonymous-function

我有两个列表：L 和 E。我尝试编写一个函数，该函数返回另一个列表，其中包含 L 中 E 中元素的出现次数。

```
-module(mymodule).
-export([count/2]).
-export([numberOfOccurences/2]).

count([Head|Tail], Counter) ->
  fun(Element) -> if
    [Head|Tail] == [] -> Counter;
    Element == Head -> count(Tail, Counter + 1);
    Element /= Head -> count(Tail, Counter)
  end
end.

numberOfOccurences(L, E) -> 
    lists:map(count(L, 0), E). 
```

`mymodule:numberOfOccurences[1,2,"abc",2,1,"abc",4,1,1], [1,2,3,"abc"])`应该返回`[4,2,0,2]`。但它返回一个包含 4 个函数的列表。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T04:30:47.910

这里发生的事情是，如果我们展开这张地图，`count(L, 0)`首先会调用它，然后将产生的乐趣传递给`lists:map`. 当结果 fun 与 的每个成员进行映射`E`并传递给匿名函数时，大多数元素的返回值是调用的结果`count(Tail,Counter)`，它返回一个函数。

这是您的函数的重写版本。最重要的是

1.  我修复了基本情况，否则，当将空集传递给时，您可能会遇到匹配错误`count()`，更重要的是，
2.  在您的闭包中，为了确保正确的递归，您需要*调用*的返回值`count()`，因此我将`count()`调用的结果存储到中`F`，然后使用传递的元素调用该函数。

所以这里是更新的模块：

```
-module(mymodule).
-export([count/2]).
-export([numberOfOccurences/2]).

count([],Counter) ->
    fun(_) -> Counter end;
count([Head|Tail], Counter) ->
    fun(Element) ->
        if
            Element == Head ->
                F = count(Tail, Counter + 1),
                F(Element);
            Element /= Head ->
                F = count(Tail, Counter),
                F(Element)
        end
    end.

numberOfOccurences(L, E) ->
        lists:map(count(L, 0), E). 
```

结果：

```
> mymodule:numberOfOccurences([1,2,"abc",2,1,"abc",4,1,1], [1,2,3,"abc"]).
[4,2,0,2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-23T05:46:50.477

让我们看看你的函数 count/2。

```
count([Head|Tail], Counter) ->
  fun(Element) -> if
    [Head|Tail] == [] -> Counter;
    Element == Head -> count(Tail, Counter + 1);
    Element /= Head -> count(Tail, Counter)
  end
end. 
```

此函数包含作为函数定义的语句。这是最后一条语句，它成为返回值。所以调用：

```
 lists:map(count(L, 0), E). 
```

确实返回了一个函数列表。查看 count 函数的定义，它确实对 count 进行了递归调用，并且如果它曾经被调用过，它实际上可能会起作用，但事实并非如此。

我们可以在程序末尾添加一条语句来调用 的所有元素，方法是这样更改调用：

```
numberOfOccurences(L, E) ->
        [F(E) || F <- lists:map(count(L, 0), E)]. 
```

或者，如果您对 map 功能有偏好：

```
numberOfOccurences(L, E) ->
    lists:map(fun(F) -> F(E) end, lists:map(count(L, 0), E)). 
```

但是，这些不运行。

> mymodule:numberOfOccurences([1,2,"abc",2,1,"abc",4,1,1], [1,2,3,"abc"])。**异常错误：函数mymodule中的错误函数4：'-numberOfOccurences/2-lc$^0/1-0-'/2（/home/tony/Projects/temp/src/mymodule.erl，第20行）

3>

作为风格问题，如果传递计数参数而不是以这种方式使用闭包，代码将更容易推理。有时闭包是必不可少的，例如在使用 spawn/1 时，但这不是其中一种情况。

分析问题我同意第一阶段是地图，但是我建议最好通过折叠来计算匹配元素。但是，我通常会用列表推导代替地图调用。我只是觉得它看起来更整洁。

所以这是我的解决方案：

```
-module occurances.
-export [count/2].

count(Data,KeyList) ->
    [ lists:foldl(
       fun(X,Count) when X =:= Key -> Count+1;
          (_,Count) -> Count
       end,
    0,Data) 
     || Key <- KeyList]. 
```

注意与 foldl 函数内的值 Key 匹配的模式将导致影子变量警告。X =:= Key 被使用。

> 发生次数：计数（[1,2,"abc",2,1,"abc",4,1,1], [1,2,3,"abc"]）。[4,2,0,2]

因此，在使代码实际工作之后，如何放入一个闭包以便例如可以调用 spawn/1 。让我们编辑我们的工作代码模块来制作这样一个闭包，并让闭包将结果写入标准 io 以便我们可以看到结果。

```
make_closure(Data,KeyList) ->
fun() ->
    io:format("~p~n",[count(Data,KeyList)])
end.

8> F=occurances:make_closure([1,2,"abc",2,1,"abc",4,1,1], [1,2,3,"abc"]).
F=occurances:make_closure([1,2,"abc",2,1,"abc",4,1,1], [1,2,3,"abc"]).
#Fun<occurances.0.132489632>
9> spawn(F).
spawn(F).
[4,2,0,2]
<0.107.0>
10> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-11T19:38:22.387

作为记录，您不需要闭包来定义`count`.

在我的书中，有一个明确的`count`功能并适当地插入它会更清楚。

**编辑**：我将列表参数放在第二位，以匹配`lists`模块 API。

```
count(X, [],    Acc) -> Acc;
count(X, [X|T], Acc) -> count(T, X, Acc+1);
count(X, [_|T], Acc) -> count(T, X, Acc).

numberOfOccurences(L, E) -> 
    [count(X, L, 0) || X <- E]. 
```

# java - 遍历 Guava LoadingCache 的地图视图条目集是否会重置用于过期的访问时间？

> ID：14371888
> 
> 赞同：17
> 
> 时间：2013-01-17T03:41:52.793
> 
> 标签：java, guava

我有一个[`LoadingCache<K,V>`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/cache/LoadingCache.html)使用[`CacheBuilder`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/cache/CacheBuilder.html)：

```
LoadingCache<K,V> myCache = CacheBuilder.newBuilder()
    .expireAfterAccess(1, TimeUnit.MINUTES)
    .maximumSize(500)
    .build(someCacheLoader); 
```

我需要定期迭代缓存中的所有条目（键和值）。我知道我可以使用[`LoadingCache#asMap()`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/cache/LoadingCache.html#asMap--), 或者：

*   遍历该地图视图[`Map#entrySet()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#entrySet%28%29)，或
*   仅迭代[`Map#keySet()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29), 并显式地迭代[`Map#get(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#get%28java.lang.Object%29)这些值。

在前一种情况下：

```
for (Map.Entry<K, V> entry : myCache.asMap().entrySet()) {
    K key = entry.getKey();
    V value = entry.getValue();

    doSomeWorkOn(key, value);
} 
```

这会更新缓存中每个条目的访问时间吗？我已经[`CacheBuilder#expireAfterAccess(long, TimeUnit)`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/cache/CacheBuilder.html#expireAfterAccess-long-java.util.concurrent.TimeUnit-)非常仔细地阅读了 JavaDoc，但发现在这种情况下它是模棱两可/不清楚的：

> 指定在条目创建、最近一次替换其值或最后一次访问后经过固定持续时间后，应自动从缓存中删除每个条目。访问时间由所有缓存读取和写入操作（包括`Cache.asMap().get(Object)`and `Cache.asMap().put(K, V)`）重置，但不是由对 的集合视图的操作重置`Cache.asMap`。

显然，我提到的第二种迭代方式*确实会*重置访问时间，但我想知道第一种方式的行为是什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T04:15:26.400

我会这样解释：

> (...) 但不是通过对 Cache.asMap 的集合视图的操作

指`entrySet`, `keySet`, 和`values`. 这些是 a 的三个集合视图`Map`。因此，使用它们不应导致访问。

以下是 JUnit (+Mockito) 测试，它们显示了每种情况下的行为。通过`entrySet`or读取值`values`不会阻止条目被删除（也**不会**从`entrySet`or读取键`keySet`）。正如文档指定的那样，阅读使用`asMap().get()`确实算作访问。

## 设置

```
private Ticker ticker = Mockito.mock(Ticker.class);

@SuppressWarnings({"unchecked"})
private RemovalListener<String, String> removalListener = Mockito.mock(RemovalListener.class);

private Cache<String, String> cache = CacheBuilder.newBuilder()
            .expireAfterAccess(5, TimeUnit.SECONDS)
            .removalListener(removalListener)
            .ticker(ticker)
            .build(); 
```

## `entrySet`

```
@Test
public void testEntrySetAccessDoesNotCountAsAccess() {
    //write
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(0));
    cache.put("foo", "bar");

    //read
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(4));
    cache.asMap().entrySet().iterator().next().getValue();
    cache.asMap().entrySet().iterator().next().getKey();

    //maintenance
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(6));
    cache.cleanUp();

    verify(removalListener).onRemoval(Mockito.<RemovalNotification<String,String>>any());
} 
```

## `keySet`

```
@Test
public void testKeySetAccessDoesNotCountAsAccess() {
    //write
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(0));
    cache.put("foo", "bar");

    //read
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(4));
    cache.asMap().keySet().iterator().next();

    //maintenance
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(6));
    cache.cleanUp();

    verify(removalListener).onRemoval(Mockito.<RemovalNotification<String,String>>any());
} 
```

## `values`

```
@Test
public void testValuesAccessDoesNotCountAsAccess() {
    //write
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(0));
    cache.put("foo", "bar");

    //read
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(4));
    cache.asMap().values().iterator().next();

    //maintenance
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(6));
    cache.cleanUp();

    verify(removalListener).onRemoval(Mockito.<RemovalNotification<String,String>>any());
} 
```

## `asMap().get()`

```
@Test
public void testMapGetAccessCountsAsAccess() {
    //write
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(0));
    cache.put("foo", "bar");

    //read
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(4));
    cache.asMap().get("foo");

    //maintenance
    when(ticker.read()).thenReturn(TimeUnit.SECONDS.toNanos(6));
    cache.cleanUp();

    verify(removalListener, never()).onRemoval(Mockito.<RemovalNotification<String,String>>any());
} 
```

# jqgrid - jqgrid - 如何为一对多关系创建列？

> ID：14371892
> 
> 赞同：2
> 
> 时间：2013-01-17T03:42:14.470
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-php, jqgrid-formatter

我正在尝试在 jqgrid （最新版本）中创建一个列，该列是一对多的关系。例如，在视图模式下它应该显示 State.Name，然后在编辑模式下应该显示一个带有 State.Name 的下拉列表，并将 State.Id 的值作为 id。

来自后端的信息是：

```
{
    "page":1,
    "records":4,
    "rows":[{"Id":5,"Description":"City 1","State":{"Id":1,"Name":"California"}}],
    "total":1.0
} 
```

我试过这个没有成功：

```
{
name: 'State.Name', index: 'State.Id', editable: true, sortable: true, hidden: false, align: 'left', formatter: 'select',
edittype: "select", editrules: { required: true }, 
editoptions: {
        dataUrl: $("#ServiceUrlState").val(),
        buildSelect: function (data) {
            var response = jQuery.parseJSON(data);
            var html = '<select>';
            if (response && response.length) {
                for (var i = 0, l = response.length; i < l ; i++) {
                    var item = response[i];
                    html += '<option value="' + item.Id + '">' + item.Nombre + '</option>';
                }
            }
            return html + "</select>";
        }
    }
} 
```

ServiceUrlState 的值在 Index.cshtml 中设置（以 html 页面结尾）并分配有：

```
@Html.Hidden("ServiceUrlState", Url.RouteUrl("ApiControllerOnly", new { httproute = "", controller = "States" })) 
```

我正在使用 ASPNET MVC 4，但问题不应该与此相关。

我需要类似...在查看模式下...使用“State.Name”字段来显示，但在发布时发送 Id（并使用 StateId 作为发布时的名称）

怎么了？

提前致谢！吉列尔莫

# sql - 如何在保留大多数列值但动态更改某些值的同时插入新数据？

> ID：14371896
> 
> 赞同：1
> 
> 时间：2013-01-17T03:42:43.093
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在使用 Sql Server 2005。我有这个 tableA 有 70 列和大约 5000 行。我想为模拟目的创建新数据（大约 200 条新记录）。在 70 列中，我只想更改 3 列（TERMID、OUTLET、SNUM）的值，其余的仍然存在。例如

```
 TABLEA  
    SNO  COMPANY.......TERMID........OUTLET........SNUM.....  
     1     ABC           PP2          P1-P5         P5  
     1     ABC           PP2          P1-P5         P4  
     2     ABC           PP2          P1-P5         P4  
     1     ABC           PP2          P1-P5         P3  
     3     ABC           PP2          P1-P5         P3 
```

所以我想保留新记录的所有值，除了将所有 TERMID 从 PP2 更改为 PP3 并将所有出口从 P1-P5 更改为 P6-P8。至于 SNUM，所有 P5 将变为 P8，P4 将变为 P7，P3 将变为 P6。意思是在我插入后 TABLEA 将如下所示：

```
 TABLEA  
    SNO  COMPANY.......TERMID........OUTLET........SNUM.....  
     1     ABC           PP2          P1-P5         P5  
     1     ABC           PP2          P1-P5         P4  
     2     ABC           PP2          P1-P5         P4  
     1     ABC           PP2          P1-P5         P3  
     3     ABC           PP2          P1-P5         P3  
     1     ABC           PP3          P6-P8         P8  
     1     ABC           PP3          P6-P8         P7  
     2     ABC           PP3          P6-P8         P7  
     1     ABC           PP3          P6-P8         P6  
     3     ABC           PP3          P6-P8         P6 
```

我不想手动执行此操作，因为 200 行将非常乏味。这可能使用 SQL 语句吗？

我必须使用子查询编写普通的插入语句，但我想编写 INSERT INTO TABLEA ( COL1, COL2,.......COL70) VALUE (.....)

有什么聪明的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:50:30.780

我只是重读了您的回复，并意识到您正在尝试在当前表中插入记录，而不是创建新表。

怎么样：

```
SELECT * 
INTO #NewTable 
FROM TABLEA;

UPDATE #NewTable 
SET TERMID = 'PP3', 
    OUTLET= 'P6-P8', 
    SNUM = CASE 
               WHEN SNUM = 'P5' THEN 'P8'
               WHEN SNUM = 'P4' THEN 'P7'
               WHEN SNUM = 'P3' THEN 'P6'
           END;

INSERT INTO TABLEA 
SELECT * 
FROM #NewTable 
```

对困惑感到抱歉。

# android - 当我单击它时，SMS 菜单不起作用

> ID：14371897
> 
> 赞同：1
> 
> 时间：2013-01-17T03:42:52.063
> 
> 标签：android, eclipse

我尝试使用菜单中的 sms_mail 布局启动 sms 应用程序，但它不起作用。我的意图是否缺少某些东西，还是我使用了错误的编码？

**菜单：details_option.xml**

```
 <item
    android:id="@+id/sms"
    android:icon="@drawable/ic_menu_sms"
    android:title="Sms"/> 
```

* * *

**源：DetailForm.java**

```
 } else if (item.getItemId() == R.id.sms) {

            Intent smsIntent = new Intent(Intent.ACTION_SENDTO);
            smsIntent.addCategory(Intent.CATEGORY_DEFAULT);
            smsIntent.setType("vnd.android-dir/mms-sms");
            smsIntent.setData(Uri.parse("sms:" + telephone.getText()));
            }
    return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:50:37.713

您的代码完全正确。只是你没有启动意图。它可以做为

```
 Intent smsIntent = new Intent(Intent.ACTION_SENDTO);
    smsIntent.addCategory(Intent.CATEGORY_DEFAULT);
    smsIntent.setType("vnd.android-dir/mms-sms");
    smsIntent.setData(Uri.parse("sms:" + telephone.getText()));
   **startActivity(smsIntent);** 
```

并确保您在清单中具有以下权限

```
<uses-permission android:name="android.permission.SEND_SMS"/> 
```

# c# - 全文查询不返回结果

> ID：14371900
> 
> 赞同：1
> 
> 时间：2013-01-17T03:43:39.917
> 
> 标签：c#, .net, sql-server, full-text-search

每个人！如果有人可以帮助我，我会非常高兴。

我开发了一个全文搜索引擎，使用 C# 和 Sql Server 2008 作为数据库。下面的查询在我在 SSMS 中运行时返回结果，但当我从 C# 代码及其参数化形式运行它时它什么也不返回：

```
SqlCommand cmd = new SqlCommand("SELECT distinct occurrence "+
                                "FROM sys.dm_fts_parser('FORMSOF(INFLECTIONAL, @doc)', 1033, 0, 0) "+
                                "where display_term in "+
                                "( "+
                                  "SELECT display_term "+
                                  "FROM sys.dm_fts_parser('FORMSOF(INFLECTIONAL, @searchterm)', 1033, 0, 0) "+
                                 ")",conn);

            cmd.Parameters.Add("@searchterm",SqlDbType.VarChar);
            cmd.Parameters["@searchterm"].Value = "distributed property";
            cmd.Parameters.Add("@doc", SqlDbType.VarChar);
            cmd.Parameters["@doc"].Value = "in the search of distributed ways that are provided by properties";
            SqlDataReader dr = cmd.ExecuteReader(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T17:34:24.133

使用此帮助进行清理是否会指出您的 VS 代码与 SQL 代码之间的任何差异？另外，请在创建查询时使用 USING 和 ADDWITHVALUE。我不知道这是否只是我，但在我看来这是必须的。

```
using (SqlConnection con = new SqlConnection(conString))
{
    string command = string.Format({0}{1}{2}{3}{4}{5},  
    "SELECT distinct occurrence ",
    "FROM sys.dm_fts_parser('FORMSOF(INFLECTIONAL, @doc)', 1033, 0, 0) ",
    "where display_term in "
    "( ",
    "SELECT display_term ",
    "FROM sys.dm_fts_parser('FORMSOF(INFLECTIONAL, @searchterm)', 1033, 0, 0) ",
    ")")
    using (SqlCommand cmd = new SqlCommand(command,conn))
    {
        cmd.Parameters.AddWithValue("@searchterm", "distributed property");
        cmd.Parameters.AddWithValue("@doc", "in the search of distributed ways that are provided by properties");

        if (con.State != ConnectionState.Open)
        {
            con.Open();
        }
        using (SqlDataReader dr = new SqlDataReader(cmd))
        {
            if(dr.HasRows)
            {
                While(dr.Read())
                {
                    // Do stuff here...
                }
            }
        }
    }
} 
```

# c# - 尝试在脚本中将孩子设置为我的游戏对象时发生错误

> ID：14371903
> 
> 赞同：4
> 
> 时间：2013-01-17T03:44:41.403
> 
> 标签：c#, error-handling, unity3d, monodevelop, gameobject

```
GameObject enemy = Instantiate(spawnObject,spawnPosition,spawnObject.transform.rotation) as GameObject;
enemy.transform.parent = transform; 
```

当我在游戏模式下测试我的游戏时，上面的代码生成了预期的结果，但是我收到了这个错误消息：

“设置驻留在预制件中的转换的父级被禁用以防止数据损坏。”

是的，spawnObject 变量包含一个预制件，但是我认为创建一个新的 GameObject 应该可以解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:57:40.247

检查您的“转换”变量是否实际上来自游戏对象而不是来自预制件。

```
var transform = somePrefab.transform;
enemy.transform.parent = transform; // this won't work

var transform = someOtherGameObject.transform;
enemy.transform.parent = transform; // this will 
```

也许您可以提供更多有关您的转换变量来自何处的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T20:16:06.747

我也看到了这个问题——一个实例化的游戏对象（不是预制件）给出了这个错误消息。我的游戏对象 (A) 已成为另一个不同类型的实例化游戏对象 (B) 的父级。我想将 A 重新设置为 B 的另一部分 - 这将因给定错误而失败。我唯一的解决方案是首先将 A 重新设置为 null，然后再次重新设置为 B。

# xcode - 将 NSString 转换为 NSDecimalNumber

> ID：14371907
> 
> 赞同：1
> 
> 时间：2013-01-17T03:45:22.913
> 
> 标签：xcode, core-data, nsstring, nsdecimalnumber

在我的核心数据模型中，“数量”是实体“跟踪”中的一个属性。如何在整个代码中将金额转换为 NSDecimalNumber？我确信有更多经验的人可以在 3 分钟内完成此操作，而我已经看了好几天了。

```
- (IBAction)save {
if (![amount.text isEqualToString:@""]) {
Tracking *tracking = [NSEntityDescription insertNewObjectForEntityForName:@"Tracking"
                                               inManagedObjectContext:self.managedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *weightEntity = [NSEntityDescription entityForName:@"Tracking" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:weightEntity];
    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"timestamp" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];

    NSError *error = nil;
    NSArray *result = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

    Tracking *person = [result objectAtIndex:0];

    NSLog(@"%@",person.date);

        NSDate *date = [NSDate date];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];
    [dateFormat setDateFormat:@"MMM dd, yyyy"];

    NSString *dateString = [dateFormat stringFromDate:date];
    //NSString *dateString = @"Jan 13 2013";
    //Tracking *track = [self.fetchedResultsController objectAtIndexPath:nil];

tracking.note = note.text;
tracking.amount = amount.text;
tracking.title = [segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex];
tracking.date = dateString;
tracking.timestamp = date;

        if (![person.date isEqualToString:dateString]) {

        if ([[segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex] isEqualToString:@"Food/Drink"]) {
            tracking.pic = @"Drink";
            tracking.total = [NSString stringWithFormat:@"%.2f", 0.00 - [amount.text floatValue]];
            NSLog(@"%f",[person.total floatValue]);
            NSLog(@"%f", [amount.text floatValue]);
            //tracking.total = @"1000.00";
        }
        else if ([[segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex] isEqualToString:@"Other"]) {
            tracking.total = [NSString stringWithFormat:@"%.2f",0.00 - [amount.text floatValue]];
            tracking.pic = [segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex];

        }

        else {
            tracking.pic = [segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex];
            tracking.total = [NSString stringWithFormat:@"%.2f",0.00 + [amount.text floatValue]];
        }

    }

    else {

        if ([[segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex] isEqualToString:@"Food/Drink"]) {
            tracking.pic = @"Drink";
            tracking.total = [NSString stringWithFormat:@"%.2f",[person.total floatValue] - [amount.text floatValue]];
            NSLog(@"%f",[person.total floatValue]);
            NSLog(@"%f", [amount.text floatValue]);
    //tracking.total = @"1000.00";
            }
        else if ([[segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex] isEqualToString:@"Other"]) {
            tracking.total = [NSString stringWithFormat:@"%.2f",[person.total floatValue] - [amount.text floatValue]];
            tracking.pic = [segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex];

        }

        else {
            tracking.pic = [segmentedChoice titleForSegmentAtIndex:segmentedChoice.selectedSegmentIndex];
            tracking.total = [NSString stringWithFormat:@"%.2f",[person.total floatValue] + [amount.text floatValue]];

        }
    }

NSLog(@"\n Title: %@ \n Amount: %@ \n Note: %@ \n Date: %@ \n Picture: %@.png \n Total: %@ \n TimeStamp: %@", tracking.title, tracking.amount, tracking.note,tracking.date,tracking.pic, tracking.total, tracking.timestamp);

   [self.managedObjectContext save:nil];

   /* UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"%@ Saved",tracking.title] message:[NSString stringWithFormat:@"Amount: %@ \n Note: %@",tracking.amount,tracking.note] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];*/

    [amount resignFirstResponder];
    [note resignFirstResponder];
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T03:48:41.913

NSDecimalNumber 具有以下方法，可用于将 NSString 转换为它：

```
+ (NSDecimalNumber *)decimalNumberWithString:(NSString *)numericString 
```

例如：

```
NSString *foo = @"1.0";
NSDecimalNumber *cow = [NSDecimalNumber decimalNumberWithString:foo]; 
```

此处提供该类的完整参考：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html#//apple_ref/occ/cl/ NSDecimalNumber](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDecimalNumber)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:49:16.223

干得好：

```
NSString *order; 
NSDecimalNumber *decimal = [NSDecimalNumber decimalNumberWithString:order]; 
```

# iphone - iOS 的云存储选项

> ID：14371909
> 
> 赞同：5
> 
> 时间：2013-01-17T03:45:56.370
> 
> 标签：iphone, ios, node.js, core-data, amazon-web-services

我正在尝试创建一个后端，在该后端中，我可以让许多用户在我正在创建的 iPhone 应用程序中相互通信。我尝试过使用 Core Data、Google App Engine、Google Cloud Storage 和 Amazon Web Services（RDS 和 Elastic Beanstalk）。不幸的是，经过数周的努力让这些工作正常进行后，没有一个会！

我一直在尝试与了解 Instagram、Path 和 Pinterest 等初创公司（在他们小的时候）如何做到这一点的人取得联系。但是外面的每个人似乎都鄙视这些东西，就像我成长的那样......

我希望有人能够准确地规划出我需要如何创建一个后端数据库，我可以保存和查询许多用户可以看到的数据。这意味着仅 SQLite、Core Data 或 Parse 本身不会在这里工作！

某种教程将是不可思议的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T04:02:08.657

首先，CoreData 和 sqlite 等技术通常是本地设备存储。本地设备存储不会让您共享云存储。

Parse.com 是设备访问云存储和快速运行的一种快速方式。对于游戏和其他移动应用程序通过应用程序 ID 和应用程序密钥访问云数据特别有用。如果它满足您的所有需求和要求，它是避免创建您自己的后端的简单存储。

当您到达一个多租户云后端时，您可以在其中推出自己的服务和多个设备访问您的云应用程序，您需要考虑公开您的 Web API。通过 http 公开 RESTful API 非常适合设备和 Web 客户端。将数据公开为 JSON 对 Web 来说特别方便，并且很容易被设备使用。

云中的那些 Web 服务端点访问某种后端存储，该存储针对多个客户端的并发访问进行了优化。这通常是一个 SQL 后端，如 MySQL、SQLServer 等……或[NoSQL](http://en.wikipedia.org/wiki/NoSQL)解决方案，如[mongodb](http://en.wikipedia.org/wiki/MongoDB)、[couchDB](http://en.wikipedia.org/wiki/CouchDB)等……

需要研究的一些前端 Web api 技术：

*   ASP.net[网络 API](http://www.asp.net/web-api)
*   [Ruby on Rails](http://rubyonrails.org/)
*   [节点.js](http://nodejs.org/)
*   ETC...

需要研究的一些后端存储技术：

*   SQL: [MySQL](http://www.mysql.com/) , [SQLServer/Azure SQL](http://msdn.microsoft.com/en-us/library/windowsazure/ee336279.aspx) , Oracle
*   NoSQL：MongoDb、CouchDb、Amazon S3 简单存储等...

如果数据被许多多租户客户端使用，则后端可以扩展（越来越大）或分片。分片是将多个用户的数据拆分为许多数据库或数据存储，并使用某种查找算法来请求查找用户数据的存储位置。前端 Web api 服务器抽象了后端存储。

最后，您最终将需要某种缓存/快速查找技术（如果您成功了 :)：

*   [Redis](http://redis.io/)：通过套接字快速存储内存
*   [memcached](http://memcached.org/)：facebook 使用 - 跨许多前端服务器的内存缓存中的简单键值。

您的问题是一个开放式的广泛问题，因此请从谷歌搜索其中许多术语和技术开始。

这些链接中的每一个都将包含资源和教程。获取一个云虚拟机，使用每个虚拟机并确定最适合您需求的虚拟机。没有一种适合所有解决方案的尺寸。

# php - foreach() 跳过数组中的第一个元素

> ID：14371914
> 
> 赞同：4
> 
> 时间：2013-01-17T03:46:38.167
> 
> 标签：php, html

尝试创建 GPA 计算器。我有一个提交到 php 文件的表单，然后将表单中的所有数据存储在 php array() 中。计算器运行良好，直到我输入相同的值。在我展示一些图片之前，我认为这没有意义：

这是图像中的问题：

![错误场景](../Images/b3ae2dbfa5406d8b97a23f2ae1e38127.png)

![正确的场景](../Images/0ba5881ec025559e912e57f58d71f203.png)

因此，在第一张图片中，我输入了一个 A，然后是另一个 A，它在使用 var_dump() 时输出 array(1) { [0]=> float(4.5) }

在第二张图片中， var_dump() 是 array(2) { [0]=> float(4) [1](https://i.stack.imgur.com/id7kF.png) => float(3.5) }

它正在跳过第一张图像中的第一行……以防万一A在REG中等于4.0，在HONORS中等于4.5。它可能是 array_combine()

这是我的php代码：

```
//$_POST['grades'] for the grades <option> and $_POST['types'] for the type (REG, HONORS)
foreach(array_combine($_POST['grades'], $_POST['types']) as $code => $count)
{

    if ($code == "A")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 4.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = 4.5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 5.0;
        }
    }
    else if ($code == "B")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 3.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = 3.5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 4.0;
        }
    }
    else if ($code == "C")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 2.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = 2.5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 3.0;
        }
    }
    else if ($code == "D")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 1.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = 1.5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 2.0;
        }
    }
    else if ($code == "F")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 0.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = .5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 1.0;
        }
    }

} 
```

可能需要修改整个 foreach() 语句...如果有人这么说，我将再次编写逻辑...

我不想用代码堵塞问题，所以如果您绝对需要 html，只需询问，我将添加编辑。

编辑：我也在想我需要重写逻辑......我以前从未使用过array_combine（）......我只需要确保与相关的对应

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:01:54.470

如果您想遍历两个数组（或更多），您可以考虑使用[`MultipleIterator`](http://www.php.net/multipleiterator); 它不会像这样破坏数组键`array_combine()`。

您还可以通过使用数组来定义每个等级/类型组合的分数来简化逻辑：

```
$gradesToScores = array(
  'REGULAR' => array(
    'A' => 4.0, 'B' => 3.0, 'C' => 2.0, 'D' => 1.0, 'F' => 0.0,
  ),
  'HONORS' => array(
    'A' => 4.5, 'B' => 3.5, 'C' => 2.5, 'D' => 1.5, 'F' => 0.5,
  ),
  'COLLEGE' => array(
    'A' => 5.0, 'B' => 4.0, 'C' => 3.0, 'D' => 2.0, 'F' => 1.0,
  ),
);

$gradeItemIterator = new MultipleIterator(MultipleIterator::MIT_KEYS_ASSOC);
$gradeItemIterator->attachIterator(new ArrayIterator($_POST['grades']), 'grade');
$gradeItemIterator->attachIterator(new ArrayIterator($_POST['types']), 'type');

$gradeScores = array();

foreach ($gradeItemIterator as $gradeItem) {
  $gradeScores[] = $gradesToScores[$gradeItem['type']][$gradeItem['grade']];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:55:46.530

查看此数组并输出查看 VALUES “a”，它成为结果数组的键，因此如果您希望将整个数组与第一个数组的键组合，那么第一个数组必须具有唯一值。

```
 <?php
    print_r(array_combine(Array('a','a','b'), Array(1,2,3)));
    ?>
    Returns:
    Array
    (
        [a] => 2
        [b] => 3
    ) 
```

解决方案（可能不是最好的）

```
foreach($_POST['grades'] as $KEY=>$code)
{
   $count  = $_POST['types'][$KEY];
   if ($code == "A")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 4.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = 4.5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 5.0;
        }
    }
    else if ($code == "B")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 3.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = 3.5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 4.0;
        }
    }
    else if ($code == "C")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 2.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = 2.5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 3.0;
        }
    }
    else if ($code == "D")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 1.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = 1.5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 2.0;
        }
    }
    else if ($code == "F")
    {
        if ($count == "REGULAR")
        {
            $GradeArray[] = 0.0;
        }
        else if ($count == "HONORS")
        {
            $GradeArray[] = .5;
        }
        else if ($count == "COLLEGE")
        {
            $GradeArray[] = 1.0;
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T04:13:00.070

我同意 Arun 关于这种行为的原因。一个可能的解决方案是：

```
$lookup = Array("A"=>4, "B"=>3, "C"=>2, "D"=>1, "F"=>0);

for ( $i=0; $i<count($_POST['grades']); $i++ ) {
    $temp = $lookup[ $_POST['grades'][$i] ];
    if ( $_POST['types'][$i] == "HONORS" ) {
        $temp += .5;
    }
    elseif ( $_POST['types'][$i] == "COLLEGE" ) {
        $temp += 1;
    }
    $GradeArray[] = $temp;
} 
```

`$_POST['grades']`这假设和的计数`$_POST['types']`相等 - 否则它将导致`undefined offset`通知或不处理每个值。

* * *

~~关于 Arun 的代码：嵌套两个循环将创建 N*M 内部循环迭代 - 每个等级/类型组合一个，在这种情况下显然是错误的！我们需要*并行*遍历数组，因为它们用于保存对值。~~

* * *

~~@Jack：如果我没记错的话，你需要在你的数组定义中交换`HONORS`和。`COLLEGE`~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-11T07:27:32.270

这个解决方案对我很有效

```
$array = array('ab', 'bc', 'cd', 'de');
$array = array_combine(range(1, count($array)), array_values($array));
print_r($array); 
```

# python - Google App Engine 实例不断快速关闭

> ID：14371920
> 
> 赞同：8
> 
> 时间：2013-01-17T03:47:26.620
> 
> 标签：python, google-app-engine, python-2.7

所以我已经使用应用引擎很长一段时间了，没有任何问题。我知道，如果应用程序有一段时间没有被访问者点击，那么实例将关闭，第一个访问该站点的访问者将有几秒钟的延迟，而新实例会启动。

但是，最近似乎这些实例只能在很短的时间内保持活动状态（有时不到一分钟），如果我有 1 个实例已经启动并运行，并且我刷新了一个应用程序网页，它仍然会启动另一个实例（它开始的页面是最小的主页 HTML，不应该需要太多的 CPU/内存）。查看我的日志，它不断启动新实例，这是以前从未有过的。

关于我应该看什么的任何提示，或者关于为什么会发生这种情况的任何想法？

另外，我正在使用 Python 2.7、线程安全、python_precompiled、预热入站服务、NDB。

**更新：**

所以我将我的应用程序更改为至少有 1 个空闲实例，希望这能解决问题，但即使一个常驻实例已经在运行，它仍在启动新实例。因此，当只有 1 个常驻实例（除了我之外我没有获得任何流量），并且我转到我的应用程序的另一个页面时，它仍在启动一个新实例。

此外，正如 koma 指出的那样，我将 Pending Latency 更改为 1.5s，但这似乎没有帮助。

实例的内存使用量总是在 53MB 左右，当被调用的页面没有做太多事情时，这是令人惊讶的。我正在使用 F1 前端实例类，它的限制为 128，但无论哪种方式，53MB 似乎都很高。首次启动时，这是可以接受的尺寸吗？

**更新 2：**我刚刚在仪表板中注意到，在过去 14 小时内，请求 /_ah/warmup 以 24 404 个错误响应。这可能有关系吗？为什么他们会以 404 响应状态响应？

**主要问题：**为什么它会不断启动新实例（即使没有流量）？特别是在已经存在实例的情况下，为什么它们会这么快关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T11:09:57.327

我对此的解决方案是增加**Pending Latency**时间。

如果网页一次触发 3 个 ajax 请求，则 AppEngine 正在为其他请求启动新实例。配置**最小挂起延迟**时间 - 将其设置为 2.5 秒后，同一个实例正在处理所有三个请求并且吞吐量是可以接受的。

我的项目仍然很少有负载/流量......所以除了提高 Pending Latency 之外，我在 Pingdom 开设了一个帐户并将其配置为每分钟 ping 我的 Appengine 项目。

两者的结合使我有一个实例保持活动状态并且大部分时间都在为所有请求提供服务。它会在真正需要时扩展到新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T16:29:50.240

1 个空闲实例意味着 app-engine 将始终为下一个出现的用户启动一个额外的实例 - 这就是为什么您会看到一个额外的实例被该设置启动。

如果您删除空闲实例设置（或使用默认设置）并且只是增加挂起延迟，它应该在触发额外实例之前“等待”。

关于**主要问题**，我认为@koma 可能会说使用默认设置，即使请求来自同一个会话，应用程序引擎也会倾向于触发额外的实例。

以我的经验，应用引擎在交通繁忙的情况下非常出色，但在交通流量低的情况下很难（有时甚至令人沮丧）。特别是很难弄清楚启动新实例的标准的细微差别实际上是什么。

就个人而言，我有一个“唤醒” cron-job 每隔几分钟就会启动一个实例，以确保如果有人访问该站点，则该实例已准备好服务。这并不理想，因为它会吃掉我的报价，但它大部分时间都有效，因为我的应用程序上的流量相当高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:06:25.450

我在美国东部标准时间 2 月 4 日星期一晚上 10 点左右才开始遇到此类问题，并且一直持续到现在。我首先开始注意到实例不断启动和关闭，并且延迟显着增加。似乎实例调度程序关闭空闲实例的速度过快，并导致随后的颠簸。

我将最小空闲实例设置为 1 以稳定延迟，这很有效。但是，仍然存在新实例的颠簸。我尝试了此线程中的建议以仅设置最小挂起延迟，但这无济于事。最终，空闲实例被关闭得太快了。然后，当需要它们时，延迟会在尝试启动新实例时迅速增加。

我不知道你为什么在几周前看到了这个，而且它只是在我几天前才开始的。也许他们逐渐将新的实例调度程序分阶段提供给客户？**您还没有看到实例快速关闭吗？**

# mongodb - Meteor 是如何安装 MongoDb 的？

> ID：14371926
> 
> 赞同：11
> 
> 时间：2013-01-17T03:48:27.970
> 
> 标签：mongodb, meteor, razorsql

我是[Meteor.js](http://docs.meteor.com/#top)和[MongoDB的新手，在以](http://www.mongodb.org/)[官方描述的方式](http://docs.meteor.com/#quickstart)安装 Meteor 后，我想知道如何连接到我的 MongoDB。

MongoDB 在安装过程中由 Meteor 安装，一切正常，但现在我想用另一个工具（如[RazorSQL](http://www.razorsql.com/)）查看它，看看里面有什么。

但是标准连接参数（localhost:27017）不起作用，我该怎么办？登录？密码？

![RazorSQL 中与 MongoDB 的连接参数](../Images/40bf1690396a6803e2173fa399798204.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T06:46:00.227

**更新：2014 年 2 月 - Meteor 0.7.1 - 流星端口已转移到 3001 而不是 3002。**因此，不要在端口上添加 2，而是添加 1。

MongoDB 的数据库安装在 meteor 包中，该包包含您的文件，位于一个名为`.meteor`. 要从远程工具访问它，只需*在流星运行时*`2`添加到您的 Web 服务器端口。它将存储在*流星*数据库中

 **例如 `http://localhost:3000`，`mongodb://localhost:3002/meteor`如果您使用`meteor`或`meteor run`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-09T09:26:53.247

要获取 Meteor Mongo url 和端口，首先使用运行 Meteor 应用程序，`meteor run`然后`meteor mongo`在不同的终端选项卡中运行。你应该看到这样的输出

```
[meteor-app] meteor mongo
MongoDB shell version: 2.6.7
connecting to: 127.0.0.1:3001/meteor 
```

这意味着您的 Meteor Mongo 正在运行`127.0.0.1:3001`。

如果您正在运行 Meteor 应用程序，`meteor run`那么您既不需要用户名/密码也不需要身份验证配置，只需确保将默认数据库名称设置为`meteor`**

# jquery - $.goMap 插件：我可以根据标记纬度和经度创建指向“路线”的链接吗？

> ID：14371928
> 
> 赞同：0
> 
> 时间：2013-01-17T03:48:55.907
> 
> 标签：jquery, google-maps, google-maps-api-3

我正在加载基于 lat & long 的标记（存储在每个位置的数据库中）。

在每个标记的弹出信息窗口中，在完整的谷歌地图网站上有一个指向方向的链接会很整洁。我可以仅根据纬度和经度生成链接吗？

（我也有街道、subrub 等用于标记信息窗口）

编辑：链接到插件[http://www.pittss.lv/jquery/gomap/](http://www.pittss.lv/jquery/gomap/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T04:23:36.607

答案是否定的，至少这个插件不是自动的。

# java - 查找等轴测实体的足迹

> ID：14371939
> 
> 赞同：3
> 
> 时间：2013-01-17T03:50:43.703
> 
> 标签：java, math, collision-detection, game-physics, isometric

我想用 Java 制作一个 2D 等距引擎是因为我喜欢受苦。无论如何，我正在进入碰撞检测，我遇到了一些问题。

游戏中的角色并不仅限于在瓷砖之间移动 - 他们可以自由移动。我的问题是我不确定如何阻止玩家与板条箱相撞，同时又不拒绝他们访问瓷砖。

例如，假设板条箱在 0.5 块瓷砖上，然后箱子的其余部分不在瓷砖上，我希望玩家能够继续移动到 0.5 块瓷砖而不是整个瓷砖被阻塞。

我遇到的问题是我不确定如何估计对象足迹的大小。使用图像的尺寸效果不是很好，因为对象在游戏空间中的“高度”会转化为图像占用的额外空间。

我应该如何估计物体的大小？请注意，我不需要像素完美的检测。菱形会很好用。

我很乐意提供您可能需要的任何代码，但这似乎是一个数学问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:49:11.330

从精灵的边界矩形中，您可以推断出适合其内部的菱形的高度，但您无法精确确定地板上的两个维度，因为每个维度对精灵的宽度和高度的贡献相同。但是，如果您假设菱形正方形的底边，那么您也可以确定其边长。

如果精灵是`W`像素宽和`H`像素高，菱形的正方形底边的边为`W / sqrt(3)`，菱形的高为`H - (W / sqrt(3))`。[等轴测投影中某些形状的图像](https://en.wikipedia.org/wiki/File:3D_shapes_in_isometric_projection.svg)有助于理解这些公式为何起作用。

# mysql - 从所有表中具有相同主键的多个表中获取数据

> ID：14371940
> 
> 赞同：5
> 
> 时间：2013-01-17T03:50:48.503
> 
> 标签：mysql, sql, select, join

我有 4 个表，它们都具有相同的主键，其结构如下：

```
table_1 : u_id | col1 | col2    

table_2 : u_id | col3 | col4     

table_3 : u_id | col5 | col6    

table_4 : u_id | col7 |  col8 
```

我想`"col1", "col4", "col6" and "col7"`根据 的值获取 的数据`u_id`。

每个表中的值`u_id`都相同。

例如。如果`u_id='8'`，则获取所有指定的列值 where `u_id='8'`。

我猜我没有正确使用连接。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T03:53:11.850

这应该很简单。采用`INNER JOIN`

```
SELECT  a.col1, b.col4, c.col6, d.col7
FROM    table1 a
        INNER JOIN table2 b
            ON a.u_id = b.uid
        INNER JOIN table3 c
            ON a.u_id = c.uid
        INNER JOIN table4 d
            ON a.u_id = d.uid
WHERE   a.u_ID = 8 
```

要了解有关联接的更多信息，请参阅下面的文章。

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:00:09.523

```
SELECT 
table_1.col1, 
table_2.col4, 
table_3.col6, 
table_4.col7 
FROM
table_1,
table_2,
table_3,
table_4
WHERE
table_1.u_id = '8' AND
table_1.u_id = table_2.u_id AND
table_1.u_id = table_3.u_id AND
table_1.u_id = table_4.u_id 
```

# python - 加载 netCDF 时出错

> ID：14371941
> 
> 赞同：0
> 
> 时间：2013-01-17T03:51:00.087
> 
> 标签：python

我打算在 Ubuntu 11.10 中使用需要 python-scientific 的 python 脚本。在脚本的开头有一行，例如：

```
from Scientific.IO.NetCDF import NetCDFFile as Dataset
import itertools as itx
.
.
. 
```

我安装了 python-scientific 使用

```
sudo apt-get install python-scientific 
```

所有的安装都很顺利。但是当我尝试运行脚本时，我收到如下错误消息

```
from: can't read /var/mail/Scientific.IO.NetCDF 
```

我发现 NetCDF.py 代码位于以下路径：

```
/usr/lib/python2.7/dist-packages/Scientific/IO 
```

我确信我使用的脚本没有问题，因为它可以在另一台机器上运行。只是想知道为什么会发生此错误以及如何解决此问题。

感谢任何帮助。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:55:55.760

您是直接从 bash 运行脚本，不是吗？

尝试放在`#!/usr/bin/env python`脚本的顶部。

如果没有该行（称为 hashbang 或 shebang），shell 不知道它应该使用 Python 来执行脚本，因此它会尝试自己执行脚本。 `from`是一个命令，它打印出谁向指定的用户发送了邮件——因此 shell 正在执行`from Scientific.IO.NetCDF import NetCDFFile as Dataset`，并`from`试图读取谁向名为“Scientific.IO.NetCDF”的用户发送了邮件。不出所料，该用户不存在，因此您的错误消息。

# ssh-keys - 推送到 Gitlab 返回致命

> ID：14371947
> 
> 赞同：1
> 
> 时间：2013-01-17T03:51:44.733
> 
> 标签：ssh-keys, gitlab

使用全新的 Gitlab 安装，生成 SSH 密钥并将其添加到用户帐户，创建了一个新项目。

从本地计算机创建一 (1) 个文件夹，添加自述文件并从终端执行以下操作：

```
git init
git add README
git commit -m '1_16_2013' 
git remote add origin git@192.168.1.55:root/test.git 
git push -v origin master 
```

推送请求 git@192.168.1.55 的密码并返回：

```
Connection closed by 192.168.1.55
fatal: The remote end hung up unexpectedly 
```

我需要在本地机器上添加一个 shh 密钥吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:52:46.090

您需要将公钥和私钥（`id_rsa`和`id_rda.pub`）存储在`~/.ssh`本地计算机的目录中。
否则，任何到 gitlab 服务器的 ssh 都会要求输入密码。

您还需要使用正确的 ssh 地址：

```
git@192.168.1.55:test.git 
```

您不应该在 git repo 的名称前面有任何路径：gitolite（由 GitLab 使用）将检测 repo 的名称并使用正确的 repo 路径。

我更喜欢将这些信息（服务器名称、ssh 用户、私钥......）存储在`~/.ssh/config`文件中：参见“ [gitolite: can connect via ssh, can't clone](https://stackoverflow.com/questions/9339272/gitolite-can-connect-via-ssh-cant-clone) ”作为示例（或“[`git clone git@myserver:gitolite-admin`失败](https://stackoverflow.com/questions/12617672/git-clone-gitmyservergitolite-admin-fails)”）。

# c# - 从句子中获取文本

> ID：14371948
> 
> 赞同：0
> 
> 时间：2013-01-17T03:51:47.763
> 
> 标签：c#, asp.net, trim

在asp.net C#中

假设我只想将以下句子中的“Batu Pahat”一词存储到数据库中

```
Conditions for Batu Pahat, MY at 11:00 am MYT 
```

还是以下句子中的“ Mersing”？

```
Conditions for Mersing, MY at 12:00 pm MYT 
```

有人知道获取此文本的任何算法吗？请帮忙 ：）

**更新**

例句

> 马来西亚加央的情况 马来西亚时间上午 10:00
> 马来西亚峇株巴辖的情况 马来西亚时间 11:00 马来西亚时间 马来西亚
> 丰盛港的情况 马来西亚时间 11:30 马来西亚时间 马来西亚昔加末的情况 马来西亚
> 时间下午 12:00
> 马来西亚时间 柔佛州新山市的情况, MY at 11:00 am MYT
> 麻坡的条件, MY at 03:00 am MYT

**额外信息**

“11:00 am”的时间不固定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T04:02:26.033

或者不使用正则表达式（作为其他答案的替代方法），并且仅在结构固定的情况下。

```
string startIgnorePart = "Conditions for ";
string findBefore = ",";
string original = "Conditions for Mersing, MY at 11:00 am MYT";
string extracted = original.Substring(startIgnorePart.Length, original.IndexOf(findBefore) - startIgnorePart.Length);
Console.WriteLine(extracted); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T04:01:04.587

正则表达式应该能够帮助你。我还没有测试过这个，但是这样的东西应该可以工作。

```
Regex regex = new Regex("Conditions for (.*),");
var v = regex.Match("Conditions for Kangar, MY at 11:00 am MYT"); 
```

# facebook - Facebook API - 通过 FQL 的评论计数

> ID：14371949
> 
> 赞同：1
> 
> 时间：2013-01-17T03:51:57.447
> 
> 标签：facebook, facebook-fql, facebook-comments

我正在尝试显示 Facebook 评论计数`<div id="comments">`

它必须通过 Facebook 查询语言 (FQL)。这篇文章几乎正是我所需要的： [Facebook Graph Api url comments and share count doesn't work again](https://stackoverflow.com/questions/14061877/facebook-graph-api-url-comments-and-shares-count-doesnt-work-anymore)

但是如何将`comment_count`（来自查询的）显示为`div`？即我如何处理这些数据？到目前为止，我有：

* * *

```
$(function(){
 $.ajax({
  url: 'https://graph.facebook.com/fql?q=SELECT%20comment_count%20FROM%20link_stat%20WHERE%20url=%27e',
  dataType: 'jsonp',
  success: function(data) {
   if(data.comment_count)
   {
    $('body').find('#comments').html('Comments ('+jsonp.data.comment_count+')');
   }else{
    $('body').find('#comments').html('Comments (0)');
   }
  }
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:36:11.840

对我来说，

我使用 php 代码通过 fql 获取评论计数。首先，您需要下载 facebook php sdk 并将其加载到页面顶部：

```
require_once("src/facebook.php");

  $config = array(
    'appId' => 'YOUR_APP_ID',
    'secret' => 'YOUR_SECRET_KEY',
  );

  $facebook = new Facebook($config); 
```

然后，fql 查询：

```
$url  = 'http://www.yoururl.com/;

$fquery = 'SELECT comment_count, share_count, like_count FROM link_stat WHERE url = "'.$url.'"';
$fparam = array( 'method' => 'fql.query', 'query' => $fquery );
$fql = $facebook->api($fparam);

$cmcount = $fql[0]['comment_count']; 
```

所以，$cmcount 现在是你的评论计数，直接把它放在你的 html 代码中：

```
<div id="comments">
<?php echo $cmcount; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:13:11.777

我这样做是为了用这样的点数更新我的 div

```
$fql  = "SELECT url, normalized_url, share_count, like_count, comment_count, ";
    $fql .= "total_count, commentsbox_count, comments_fbid, click_count FROM ";
    $fql .= "link_stat WHERE url = '".$url."'";

$j.ajax({
            url: 'https://api.facebook.com/method/fql.query?format=json&query=<?php echo urlencode($fql);?>',
            dataType: 'jsonp',
            success: function(data) 
            {
$j(".comment_count").html(data.comment_count);
}
}); 
```

像魅力一样为我工作。

# iphone - 在 iOS 6 中启用自动布局，在 < iOS6 中禁用自动布局

> ID：14371951
> 
> 赞同：2
> 
> 时间：2013-01-17T03:52:02.427
> 
> 标签：iphone, ios, autolayout

如果我的项目支持 iOS 4.3 及更高版本，如何**仅**在 iOS6 中启用自动布局，但在较低版本中禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:10:07.183

如果您使用故事板，请创建两个故事板，一个打开自动布局，另一个关闭自动布局。然后一种检查方法是根据操作系统版本加载任何一个。

我用了这个小宏

```
#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v) ([[[UIDevice currentDevice] systemVersion] compare:(v) options:NSNumericSearch] != NSOrderedAscending) 
```

这也应该起作用（在某些情况下可能比上面更好）：

```
if ([NSLayoutConstraint class]) {
    //   >= 6.0
} else {
    //   < 6.0
} 
```

然后在我的 appDelegate 中：

```
UIStoryboard *mainStoryboard = nil;

if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) 
{
     mainStoryboard = [UIStoryboard storyboardWithName:@"AutoLayoutStoryboard" bundle:nil];
} 
else 
{
     mainStoryboard = [UIStoryboard storyboardWithName:@"NoAutoLayoutStoryboard" bundle:nil];
}

//load initial view controller
UIViewController *rootView = [mainStoryboard instantiateInitialViewController];
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.window.rootViewController = rootView;
[self.window makeKeyAndVisible]; 
```

添加：如果您使用的是 nib，并且只想为 iOS6 启用自动布局，您可以创建一个启用自动布局的故事板（或 nib），并使用上述版本检查加载它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:53:37.170

要么你应该使用两个 xib 文件，要么你应该在编写自动布局和约束代码之前以编程方式检查它。

# jquery - jquery mobile导航到页面内的ID

> ID：14371952
> 
> 赞同：0
> 
> 时间：2013-01-17T03:52:10.883
> 
> 标签：jquery, ajax, mobile

所以我想知道是否有办法在页面转换后导航到“页面”内的特定 id。

基本上，我想存储一个变量（我当前在页面上的元素的 ID），以便我可以返回到我来自的多页模板的“页面”上的同一位置。我不能只更改锚的 href，因为要发生页面转换，它必须链接到与 data-type="page" 关联的 ID，而且我不能只是将我的 id 附加到末尾这要么是因为它仍然不会触发页面转换。

任何输入将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:00:23.270

您始终可以将变量存储在会话变量或 cookie 中，检查页面加载的长度并触发函数返回 id。

看看[sessvars](http://www.thomasfrank.se/sessionvars.html)

# c++ - Windows 在 WM_WINDOWPOSCHANGED 中挂起

> ID：14371954
> 
> 赞同：2
> 
> 时间：2013-01-17T03:52:54.570
> 
> 标签：c++, windows, directx-9

我有一个 DirectX9 应用程序，它偶尔会在 WM_WINDOWPOSCHANGED 中挂起。当 alt+tab 进入和退出全屏独占模式时，挂起很少发生。

应用程序挂起，因为主窗口消息处理线程卡在 DefWindowProc 处理程序中的 WaitForSingleObject()。我们创建的其他线程运行正常。

在卡住的主线程上调用堆栈：

```
 ntdll.dll!_NtWaitForSingleObject@12()  + 0x15 bytes    
 ntdll.dll!_NtWaitForSingleObject@12()  + 0x15 bytes    
 kernel32.dll!_WaitForSingleObjectExImplementation@12()  + 0x43 bytes   
 kernel32.dll!_WaitForSingleObject@8()  + 0x12 bytes    
 d3d9.dll!WindowProc()  + 0x27e95 bytes 
 user32.dll!_InternalCallWinProc@20()  + 0x23 bytes 
 user32.dll!_UserCallWinProcCheckWow@32()  + 0xb7 bytes 
 user32.dll!_DispatchClientMessage@24()  + 0x51 bytes   
 user32.dll!___fnDWORD@4()  + 0x2b bytes    
 ntdll.dll!_KiUserCallbackDispatcher@12()  + 0x2e bytes 
 user32.dll!_NtUserMessageCall@28()  + 0x15 bytes   
 user32.dll!_RealDefWindowProcWorker@24()  + 0x26afe bytes  
 user32.dll!_RealDefWindowProcW@16()  + 0x2a bytes  
 uxtheme.dll!_ThemeDefWindowProc()  + 0x152 bytes   
 uxtheme.dll!_ThemeDefWindowProcW@16()  + 0x18 bytes    
 user32.dll!_DefWindowProcW@16()  + 0x805 bytes 
> Player.exe!cnWindowProc(HWND__ * hWnd=0x006507f4, unsigned int message=0x00000047, unsigned int wParam=0x00000000, long lParam=0x0034eea8)  Line 502 + 0x18 bytes C++ 
```

我想知道 Windows 在这里等什么。DirectX 由一个单独的线程创建和拥有，但该线程并未卡住。我们似乎正确地处理了丢失设备的事情（释放视频内存资源并调用 Reset()）。

如果有人对窗户为什么挂在这里有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:56:33.637

通常当我看到这个问题时，是因为在使用 SetWindowLong() 函数设置窗口样式后需要调用 SetWindowPos()。在调用 SetWindowPos() 之前，不会更新更改，详见此处：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633591%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633591%28v=vs.85%29.aspx)

如果不调用 SetWindowPos()，它似乎并不总是崩溃，但有时会崩溃。我不确定为什么结果通常如此零星。无论哪种方式，如果没有该调用，结果都不会更新。

# javascript - 下划线 javascript _.each 循环用于属性嵌套数组

> ID：14371955
> 
> 赞同：4
> 
> 时间：2013-01-17T03:53:02.737
> 
> 标签：javascript, json, underscore.js

嗨 Javascript/下划线大师..

假设我从服务器接收到一个 json 对象，该对象有一个嵌套的匿名数组作为其属性之一......我将如何在下划线 _.each 方法中循环遍历该数组？

这是我的 json 对象：

```
 "onlineUsers": [
    {
      "Id": "users/2",
      "Name": "Hamish",
      "LatestActivity": "2013-01-17T04:02:14.2113433Z",
      "LatestHeartbeat": "2013-01-17T04:02:14.2113433Z"
    },
    {
      "Id": "users/3",
      "Name": "Ken",
      "LatestActivity": "2013-01-17T03:45:20.066Z",
      "LatestHeartbeat": "2013-01-17T04:04:34.711Z"
    }
  ] 
```

我将如何修改此功能以打印出名称？

```
_.each(onlineUsers, function(user){log(user.name);}); 
```

这是打印出嵌套对象的实际集合，显然是因为它们是 onlineUsers 嵌套数组中的元素......如果匿名传入，不确定如何进入该数组进行循环......

谢谢，哈米什。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T03:58:40.223

您从服务器接收的 JSON 是无效的 JSON。该数组需要一个属性名称，例如：

```
onlineUsers = { names: [{name : "Joe"}, {name : "bloggs"}]} 
```

然后你可以这样做：

```
_.each(onlineUsers.names, function(user){log(user.name);}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:55:53.410

对象内的匿名数组不是有效的 json，因此您将无法解析它。

要么给数组一个名字，要么移除外部对象。

# .net-4.0 - 当项目从 .NET 3.5 升级到 4.0 时，VB.NET WinForm Web 连接停止工作

> ID：14371958
> 
> 赞同：0
> 
> 时间：2013-01-17T03:53:14.530
> 
> 标签：.net-4.0, vb.net-2010, webclient, system.net.webexception

在过去的几个小时里，我有一个奇怪的问题让我在谷歌上搜索，但我还没有找到任何接近这个的东西。

我有一个 VB.NET Winforms 项目，其中包含一个为远程托管的图表 API 动态生成图像 URL 的类，并将 URL 作为源返回到 PictureBox ( `pbCallChart.ImageLocation = MyURL`)。多年来，这已经到位并且运行良好。但是，我最近不得不将项目从 .NET 3.5 升级到 .NET 4.0（我在 VS 2010 中使用 64 位版本，显然不允许您在 .NET 3.5 中进行主动调试）。一旦我这样做了，我的图像就不再出现了。

当我在我正在使用的同一台机器上的网络浏览器中提取 URL 时，我验证了该图像是否有效。起初我想也许这个属性在 4.0 中被删除了，所以我尝试切换到 Load() 函数。没有骰子。然后我更进一步，写了这个小函数：

```
Public Function ChartImage() As Bitmap
        Dim ChartURL As String = "http://www.anyURL.com/img.jpg" 'Chart()
        Return New System.Drawing.Bitmap(New IO.MemoryStream(New System.Net.WebClient().DownloadData(ChartURL)))
End Function 
```

当我运行它时（并且我已经确认传递它的 URL 无关紧要），我总是会收到错误消息：

```
An unhandled exception of type 'System.Net.WebException' occurred in System.dll

Additional information: Unable to connect to the remote server 
```

我知道这不是代理问题，因为它在 .NET 3.5 下的同一台计算机上运行良好。而且我已经确认这不仅仅是一个调试怪癖，因为我编译了可执行文件并将它们提供给用户 - 他们确认 .NET 3.5 版本有效，而 .NET 4.0 版本无效。

我只能假设两个版本之间肯定存在一些我不知道的安全配置差异，但似乎*有人*会在某处提到它。有没有其他人经历过这样的事情？我几乎没有想法 - 你有吗？

# nuget - Nuget 命令行安装未启动安装/初始化脚本

> ID：14371965
> 
> 赞同：7
> 
> 时间：2013-01-17T03:54:06.003
> 
> 标签：nuget, web-deployment, nuget-package, package-managers

我试图将**Nuget**用作软件部署系统（存储库、版本控制和交付）——来自 Octopus 的想法。以前，我将 ASP.NET 站点打包到一个自解压 RAR 档案中，并嵌入了 .CMD 启动脚本。现在我正在尝试在自动构建期间使用 Nuget 创建 puckages。问题是如果使用命令行安装包，则包安装脚本（tools\Install.ps1 或 tools\Init.ps1）不会执行：

```
nuget.exe install <package_id> -OutputDirectory <install_folder> -source <local_repo> 
```

从 Visual Studio 包管理器或控制台安装包时，可以执行相同的脚本。

**鉴于PowerShell**无处不在，我不明白为什么这是不可能的。

 **我是否遗漏了什么或者这是设计行为？将感谢您的帮助。

是的，我们确实考虑过**MSDeploy**，但我们已经安装了执行相同操作并提供更多控制的脚本，我们需要一些强大的包管理和存储库来构建工件（Java 人员使用 Maven 做的事情）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:10:04.487

As of today, the powershell scripts are not invoked from doing installations from command line. One reason for this is that, in general, most of the install/init actions are tied to dte and the visual studio project and doesn't add much value to be able to run it from outside VS.

We have a backlog item for enabling support for exe based scripts too in addition to powershell.**

# asp.net - 实际值与用户在 vb.net 中输入的值之间的比较

> ID：14371967
> 
> 赞同：0
> 
> 时间：2013-01-17T03:54:32.130
> 
> 标签：asp.net, vb.net

我编写了这段代码来比较实际值和用户输入的值。我在名为 Spec 的表中设置了实际值

```
sampleID Category WheatType Silo M_Min   M_Max  WG_Min  WG_Max
1001       1BK      AGP      1   25.00   27.00
1002       1BK      AGP      21                  25.00   28.00 
```

这是比较值的代码

```
sql = "SELECT * FROM Spec WHERE WheatType= '" & ddlType.SelectedValue & "' AND Category='1BK' AND Silo='" & txtSilo.Text & "'"
cmd = New OleDbCommand(sql, cnnOLEDB)
cnnOLEDB.Open()
Dim dr As OleDbDataReader
dr = cmd.ExecuteReader()
While dr.Read()

    Try

        If txtHB43S.Text >= dr("M_Min").ToString() And txtHB43S.Text <= dr("M_Max").ToString() Then
            stsHB43S.Text = "Pass"

        ElseIf txtHB43S.Text <= dr("M_Min").ToString() And txtHB43S.Text >= dr("M_Max").ToString() Then
            stsHB43S.Text = "Failed"
            stsHB43S.ForeColor = System.Drawing.Color.Red

        ElseIf txtHB43S.Text <> dr("M_Min").ToString() And txtHB43S.Text <> dr("M_Max").ToString() Then
            stsHB43S.Text = ""

        Else
            stsHB43S.Text = ""

        End If

        If txtGlutematic.Text >= dr("WG_Min").ToString() And txtGlutematic.Text <= dr("WG_Max").ToString() Then
            stsGluten.Text = "Pass"

        ElseIf txtGlutematic.Text <= dr("WG_Min").ToString() And txtGlutematic.Text >= dr("WG_Max").ToString() Then
            stsGluten.Text = "Failed"
            stsGluten.ForeColor = System.Drawing.Color.Red

        ElseIf txtGlutematic.Text <> dr("WG_Min").ToString() And txtGlutematic.Text <> dr("WG_Max").ToString() Then
            stsGluten.Text = ""

        Else
            stsGluten.Text = ""

        End If 
```

问题是如果我只输入 的值`txtHB43S.Text = 25.00, Silo=1 and WheatType='AGP'`，状态将显示`'Pass'`在`stsHB43S`但它在 stsGluten 中也会显示`'pass'`。

输出

```
HB43s = 25.00 stsHB43S=Pass
Gluten =  -    stsGluten =Pass 
```

谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:24:57.290

您的陈述中的逻辑`if`不正确。第一个`else`永远不可能是真的，因为`and`.

我猜你想要这样的东西：

```
If txtHB43S.Text >= dr("M_Min").ToString() And txtHB43S.Text <= dr("M_Max").ToString() Then
  stsHB43S.Text = "Pass"
else
  stsGluten.Text = "Failed"
  stsGluten.ForeColor = System.Drawing.Color.Red
  end if 
```

（我不确定您何时或是否要为 stsGlutenText 分配“”值。）

Brian P 有很好的建议。例如，“25aslduihhaljsdlsdaf”的输入值将通过，除非您将两个值都转换为数值，例如`double`在比较之前（查找`ctype`和`isnumeric`）。数据库建议好的安全策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:11:55.173

你在这里有几个不同的问题。首先，您正在对字符串进行算术比较。在比较它们之前，您应该将它们解析为适当的数字类型。其次，您应该验证所有输入，以确保它们在处理之前符合预期。有人可以传入直接传递给您的 SQL 查询的值这一事实意味着他们可以直接访问您的 SQL 数据库。查找 SQL 注入。验证您的输入将使您能够捕捉到某人何时传入空值以及何时有人传入非数字值。

# android - 用什么代替 TabsHost Android？

> ID：14371968
> 
> 赞同：0
> 
> 时间：2013-01-17T03:54:33.663
> 
> 标签：android, android-widget

我需要使用选项卡之类的东西而不是碎片，因为它是针对移动应用程序的，并且控件不满足要求，是否有类似选项卡的东西但有支持，因此不会被弃用。任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:04:35.047

尝试使用`ActionbarSherlock`. 您需要将其作为库或项目

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

# javascript - 如何将某人的 Facebook 名称编辑为 google chrome 插件

> ID：14371970
> 
> 赞同：0
> 
> 时间：2013-01-17T03:54:45.817
> 
> 标签：javascript, html, facebook, google-chrome

我正在尝试从 Facebook 页面中删除图像，并能够编辑每个“状态更新”名称。我可以删除图像，但不能更改状态更新名称。我已经尝试了几个小时来做​​到这一点，而我能够做到的唯一方法就是更改特定的单词。我想通过每一个

*   并更改显示“更改此文本”的位置 我在我的 facebook 页面上附加了状态更新的片段。有人可以帮我吗？我试过使用`javascript`as well as `jquery`，但都无法弄清楚。如果我需要进一步解释，请告诉我。谢谢！

    `manifest.json`

    ```
    {
      "name": "A browser action with no icon that makes the page red",
      "version": "1.0",
      "background": { "scripts": ["background.js"] },
      "permissions": [
        "tabs", "http://*/*"
      ],
      "browser_action": {
        "name": "Make this page red",
        "icons": ["icon.png"]
      },
      "manifest_version": 2
    } 
    ```

    `changecolor.js`

    ```
    document.body.style.background='red';
    //document.body.innerHTML = document.body.innerHTML.replace(new RegExp("the", "g"), "*the");

    for (var i= document.images.length; i-->0;)
        document.images[i].parentNode.removeChild(document.images[i]);

    //element = document.getElementById("pagelet_home_stream");
    //element.parentNode.removeChild(element); 
    ```

    `background.js`

    ```
    chrome.browserAction.onClicked.addListener(function(tab) {
      chrome.tabs.executeScript(
          null, {file: "changecolor.js"});
    });

    chrome.browserAction.setBadgeBackgroundColor({color:[0, 200, 0, 100]}); 
    ```

    脸书 HTML

    ```
    <li class="uiUnifiedStory uiStreamStory genericStreamStory aid_100000145255153 aid_6628568379 uiListItem" data-ft="&#123;&quot;qid&quot;:&quot;5834254800544145408&quot;,&quot;mf_story_key&quot;:&quot;-6715439354839335346&quot;,&quot;has_expanded_ufi&quot;:&quot;1&quot;&#125;" id="stream_story_50f76fd55fe2e1065042322" aria-haspopup="true"><div class="clearfix storyContent"><a class="actorPhoto lfloat" href="http://www.facebook.com/person" tabindex="-1" aria-hidden="true" data-ft="&#123;&quot;type&quot;:60,&quot;tn&quot;:&quot;\\u003C&quot;&#125;" data-hovercard="/ajax/hovercard/hovercard.php?id=100000145255153"><img class="_s0 profilePic _rw img" src="http://profile.ak.fbcdn.net/hprofile-ak-ash4/371888_100000145255153_2142279014_q.jpg" alt="" /></a><div class="storyInnerContent"><div class="mainWrapper"><div role="article"><h5 class="uiStreamMessage uiStreamHeadline" data-ft="&#123;&quot;tn&quot;:&quot;:&quot;&#125;"><div class="actorDescription actorName" data-ft="&#123;&quot;type&quot;:2,&quot;tn&quot;:&quot;:&quot;&#125;"><a href="http://www.facebook.com/person" data-ft="&#123;&quot;tn&quot;:&quot;;&quot;&#125;" data-hovercard="/ajax/hovercard/user.php?id=100000145255153">CHANGE THIS TEXT</a></div></h5><h5 class="uiStreamMessage userContentWrapper" data-ft="&#123;&quot;type&quot;:1,&quot;tn&quot;:&quot;K&quot;&#125;"> <span class="messageBody" data-ft="&#123;&quot;type&quot;:3&#125;"><div><span class="userContent">Thanks everyone. In all honesty I actually forgot it was my birthday. I can&#039;t decide if it&#039;s a sign of getting old, working too much, or just being sick.</span></div></span></h5><form rel="async" class="live_582871368394366_316526391751760 commentable_item autoexpand_mode" method="post" action="/ajax/ufi/modify.php" data-live="&#123;&quot;seq&quot;:&quot;582871368394366_103294307&quot;&#125;" onsubmit="return window.Event &amp;&amp; Event.__inlineSubmit &amp;&amp; Event.__inlineSubmit(this,event)" id="u_ps_0_0_1a"><input type="hidden" name="charset_test" value="&euro;,&acute;,€,´,?,?,?" /><input type="hidden" name="fb_dtsg" value="AQDaIiR2" autocomplete="off" /><input type="hidden" autocomplete="off" name="feedback_params" value="&#123;&quot;actor&quot;:&quot;100000145255153&quot;,&quot;target_fbid&quot;:&quot;582871368394366&quot;,&quot;target_profile_id&quot;:&quot;100000145255153&quot;,&quot;type_id&quot;:&quot;22&quot;,&quot;assoc_obj_id&quot;:&quot;&quot;,&quot;source_app_id&quot;:&quot;0&quot;,&quot;extra_story_params&quot;:[],&quot;content_timestamp&quot;:&quot;1358390354&quot;,&quot;check_hash&quot;:&quot;AQBKO-0F2rj_Yd6W&quot;,&quot;source&quot;:&quot;13&quot;&#125;" /><input type="hidden" autocomplete="off" name="data_only_response" value="1" /><span class="uiStreamFooter"><span class="UIActionLinks UIActionLinks_bottom" data-ft="&#123;&quot;tn&quot;:&quot;=&quot;,&quot;type&quot;:20&#125;"><button title="Like this item" type="submit" name="like" onclick="fc_click(this, false); return true;" class="like_link stat_elem as_link" data-ft="&#123;&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22&#125;"><span class="default_message">Like</span><span class="saving_message">Unlike</span></button> &#183; <label class="uiLinkButton comment_link" title="Leave a comment"><input data-ft="&#123;&quot;type&quot;:24,&quot;tn&quot;:&quot;S&quot;&#125;" type="button" value="Comment" onclick="return fc_click(this);" /></label> &#183; </span><span class="uiStreamSource" data-ft="&#123;&quot;type&quot;:26,&quot;tn&quot;:&quot;N&quot;&#125;"><a href="/person/posts/582871368394366"><abbr title="Wednesday, January 16, 2013 at 9:39pm" data-utime="1358390354" class="timestamp livetimestamp">49 minutes ago</abbr></a> via <a href="/mobile/?v=6628568379">mobile</a></span> · <a data-hover="tooltip" class="uiStreamPrivacy inlineBlock fbStreamPrivacy fbPrivacyAudienceIndicator" href="#" id="u_ps_0_0_1b"><i class="lock img sp_bij1np sx_085ce0"></i></a></span><div><div class="uiUfi UFIContainer" id="u_ps_0_0_10"></div></div></form></div></div><div class="_6a  mlm uiPopover highlightSelector uiStreamHide" data-ft="&#123;&quot;type&quot;:55,&quot;tn&quot;:&quot;V&quot;&#125;" id="u_ps_0_0_f"><a class="highlightSelectorButton uiStreamContextButton _p" href="#" aria-haspopup="true" aria-expanded="false" rel="toggle" id="u_ps_0_0_g">Options</a></div></div></div></li> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T19:44:44.640

您需要的是一个 DOM 元素，该元素对于状态更新中的人名是唯一的。看起来您想要带有 actorDescription 和 actorName 类的 div。使用`jQuery`：

```
var nameSelector = "div.actorDescription.actorName";
$(nameSelector).each(function() {
    $(this).text(replacementText);
}); 
```

当然，这实际上可能会改变太多东西；如果不看整个网页，很难说后果会是什么。如果这不起作用，您也可以尝试将 nameSelector 设置为`a[href='http://www.facebook.com/person']`or `h5.uiStreamMessage.uiStreamHeadline`。

# asp-classic - 经典 ASP 给出内部服务器错误 500

> ID：14371971
> 
> 赞同：0
> 
> 时间：2013-01-17T03:55:01.027
> 
> 标签：asp-classic, internal-server-error

在 IIS 7 上挂起的旧 ASP 应用程序需要您的帮助。该应用程序连接到 oracle 10 并获取数据。如果行数超过 500，则浏览器中会显示内部服务器 500 错误。如何克服这一点？是否有任何日志可以检查以解决此错误。我需要对超时参数做些什么吗？

任何指针都会有很大帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:01:59.153

如果您已尝试上述方法来查看您遇到的错误类型并且与缓冲区相关，那么您需要增加响应缓冲区限制。在 IIS 7 中，单击网站，单击 ASP，单击限制属性，同时增加响应缓冲区限制和脚本超​​时限制。希望这可以帮助。

# java - 将 JMenuItem 传递给控制器 类

> ID：14371972
> 
> 赞同：1
> 
> 时间：2013-01-17T03:55:01.713
> 
> 标签：java, sql, swing, oop, design-patterns

我`JMenuItem`在 MVC 框架的 View 类上有 3 组。我想在控件类中引用它们`EventController`。有人可以告诉我这是实现的吗？下面是事件控制器。EventView 类由`JMenuItem`addEvent、editEvent、deleteEvent 组成，如何在 Controller 类中为它们做监听器。有人可以在我的 Controller 类上演示使用示例代码吗？

```
public class EventController implements ActionLister {
private EventModel model;
private EventView view;
private ActionListener actionListener;

public EventController(EventModel model, EventView view){
    this.model = model;
    this.view = view;
} 
```

第二个问题，我只能`JTable`从`View`类本身更新 a ，所以

```
public void updateEventTable() {
    try {
        String sql = "SELECT date as 'Date',eventName as 'Name', time as 'Time' FROM Event";
         pst = conn.prepareStatement(sql); 
         rs = pst.executeQuery();
         tableEvent.setModel(DbUtils.resultSetToTableModel(rs));
         tableEvent.getColumnModel().getColumn(0).setPreferredWidth(80);
         tableEvent.getColumnModel().getColumn(1).setPreferredWidth(170);
         tableEvent.getColumnModel().getColumn(2).setPreferredWidth(110);  
    }
    catch (Exception e ) {
        JOptionPane.showMessageDialog(null, e);
    } finally {
        try {
            rs.close(); pst.close();conn.close();;
        } catch(SQLException e){}
    }
} 
```

这是在视图类中有代码的不好的做法，理想情况下应该在模型中，但是你可以告诉我如何做到这一点。这些概念对我来说是新的并且想学习。因为`JTable`我觉得很难

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:26:38.373

让您的模型导出实例[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)可以根据需要添加到菜单和按钮中。因为数据库访问本质上是异步的，所以让每个这样的操作都使用一个[工作线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)在后台查询数据库，同时更新 EDT 上的表模式。另请参阅有关 Swing 组件和模型之间关系[*的 Swing 架构概述。*](http://www.oracle.com/technetwork/java/architecture-142923.html)

附录：*你能给我看一个代码示例吗？*

*   [`FileMenu`](https://stackoverflow.com/a/4039359/230513)是一个非常基本的使用`Action`来封装功能的例子。

*   [此处](https://stackoverflow.com/a/11944233/230513)引用的示例`Action`在`JToolBar`.

*   [`JHotDraw`](http://www.jhotdraw.org/)[此处](https://stackoverflow.com/a/13997870/230513)引用的 是一个非常复杂的示例，它`Action`根据上下文更改可用实例，如此[处](https://stackoverflow.com/q/13312223/230513)所述。

*   此[示例](https://stackoverflow.com/a/3072979/230513)提供了对 Swing 中 MVC 的一般检查。

# objective-c - 如何更改 NSMenuItem 标题（登录到注销）

> ID：14371987
> 
> 赞同：8
> 
> 时间：2013-01-17T03:56:43.133
> 
> 标签：objective-c, cocoa, nsmenuitem

我很惊讶这还没有被问到：

但是如何更改菜单`NSMenuItem`中的标题。`NSStatusBar`当用户登录时，我希望菜单项说注销。我曾尝试创建一个出口来修改我`NSMenuItem`的标签或其他东西。

`AppDelegate.h`

`@property (retain) IBOutlet NSMenuItem *loginItem;`

`AppDelegate.m`

`[loginItem setTitle:@"Logout"];`

但这没有用。

我唯一能做的就是删除旧的`NSMenuItem`，然后添加一个新的，但它只会将它添加到底部。这样做是删除每个菜单项然后重新添加它们的唯一方法吗？这似乎非常低效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T04:51:26.593

您描述的方法应该可以工作，但是，一般来说，`IBOutlet`为所有菜单项保留 s 可能很乏味。（如果您的解决方案不起作用，请确保`IBOutlet`在 nib 文件中实际连接，**并**确保您在适当的时间设置标题。如果您尝试在控制器的`init`方法中设置它，例如，现在还为时过早，并且插座尚未连接：将方法移至`awakeFromNib`或类似。

从长远来看，更好的方法是使用[`<NSMenuDelegate>`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMenuDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40008605)协议和[`NSMenuValidation`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Protocols/NSMenuValidation_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40004173)（非正式）协议来动态（和懒惰地）更新菜单项。

例如，定义您的控制器类，如下所示：

```
@interface MDAppDelegate : NSObject <NSApplicationDelegate, NSMenuDelegate>

@property (strong) NSStatusItem *statusItem;

@property (weak) IBOutlet NSWindow *window;

@property (weak) IBOutlet NSMenu *statusItemMenu;
@property (weak) IBOutlet NSMenuItem *toggleLoginLogoutMenuItem;

@property (weak) IBOutlet NSTextField *statusField;
@property (weak) IBOutlet NSTextField *progressField;
@property (weak) IBOutlet NSProgressIndicator *progressIndicator;

@property (assign) BOOL loggedIn;

- (IBAction)toggleLoginLogout:(id)sender;

@end 
```

在 nib 文件中，`delegate`outlet`statusItemMenu`设置为`MDAppDelegate`控制器类。这确保了`MDAppDelegate`类在响应者链中并允许它与[验证菜单项](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html#//apple_ref/doc/uid/20000261-74653-BAJBGJHB)一起工作。

然后你可以像下面这样实现你的 .m ：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    _statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
    _statusItem.menu = _statusItemMenu;
    _statusItem.title = NSLocalizedString(@"NSStatusItem", @"");
    [self updateLoggedInStatus];
}
- (void)updateLoggedInStatus {
    [self.statusField setStringValue:(self.loggedIn ? @"Logged in" : @"Logged out")];
}
- (IBAction)toggleLoginLogout:(id)sender {
    [self performSelector:@selector(finishFakeLoginLogout:)
                         withObject:nil afterDelay:2.0];
}
- (void)finishFakeLoginLogout:(id)sender {
    self.loggedIn = !self.loggedIn;
    [self updateLoggedInStatus];
}
- (void)menuNeedsUpdate:(NSMenu *)menu {
#if MD_DEBUG
    NSLog(@"[%@ %@]", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
#endif
}
- (BOOL)validateMenuItem:(NSMenuItem *)menuItem {
#if MD_DEBUG
    NSLog(@"[%@ %@]", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
#endif
    SEL action = menuItem.action;
    if (action == @selector(toggleLoginLogout:)) {
        [menuItem setTitle:(self.loggedIn ? @"Logout" :@"Login")];
    }
    return YES;
} 
```

示例项目：http: [//github.com/NSGod/NSStatusBarFiagler](http://github.com/NSGod/NSStatusBarFinagler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T04:35:00.553

你不需要连接你的菜单项，试试这个..

```
NSMenuItem *menuItem = (NSMenuItem*) sender;
    NSString *menuString = menuItem.title;

    if ([menuString isEqualToString:@"Login"]) 
{

            [menuItem setTitle:@"LogOut"];
} 
```

NSMenuItem *menuItem = (NSMenuItem* ) 发送者；

```
 this line automatically collect the menu items in your app. 
```

# javascript - 滚动顶部 = 滚动高度在 Chrome 中不起作用

> ID：14371990
> 
> 赞同：0
> 
> 时间：2013-01-17T03:56:54.403
> 
> 标签：javascript, jquery, ajax

这是我的 js 文件中的 js

```
function refreshChat()
    {
        //speed up by selecting the div only once
        var shoutbox = $("#shoutbox");

        //get the height of the scroll (if any)
        var oldScrollH = shoutbox.attr("scrollHeight") - 20;

        //the ajax request
        $.ajax({
        url: 'shoutbox/update.php',
        //disable cache
        cache: false,
        success: function(html) {
            //update the shoutbox
            shoutbox.html(html);
            //get the heigth of the scroll after the update
            var newScrollH = shoutbox.attr("scrollHeight") - 20;
            if(newScrollH > oldScrollH)
            {
                //*move* the scroll down using an animation :)
                shoutbox.animate({scrollTop: newScrollH}, 1);
            }
        }   
        });
    }
    //set the refreshChat function to run every *refreshSeconds*
    setInterval(refreshChat, refreshSeconds);

}); 
```

它在 Firefox 和 IE 中运行良好，但在 Google Chrome 中它不断闪烁。它会在页面加载时滚动到底部，但是当它调用该函数时，`refreshChat`它会向上移动到 div 的一半左右。

我的也有这个`<head>`

```
$(document).ready(function(){
        //speed up by selecting the div only once
        var shoutbox = $("#shoutbox");

        //get the height of the scroll (if any)
        var oldScrollH = shoutbox.attr("scrollHeight");

        //the ajax request
        $.ajax({
        url: 'shoutbox/update.php',
        //disable cache
        cache: false,
        success: function(html) {
            //update the shoutbox
            shoutbox.html(html);
            //get the heigth of the scroll after the update
            var newScrollH = shoutbox.attr("scrollHeight");
            if(newScrollH > oldScrollH)
            {
                //*move* the scroll down using an animation :)
                shoutbox.animate({scrollTop: newScrollH}, 1);
            }
        }   
        })
        }); 
```

这样它会在页面加载时自动加载喊话框，这可能与它冲突吗？这似乎是合乎逻辑的，但我不希望用户必须等待 3 秒才能让喊话框最初加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:24:01.807

您需要将字符串转换为 int。

**scrollHeight**是自定义属性，我猜它是动态添加的，所以它必须是字符串，这就是你需要将它转换为 int 的原因。

```
parseInt(shoutbox.attr("scrollHeight"));
```

试试这个，希望这能解决它。