# StackOverflow 问答 12999000-12999999

# java - 如何删除依赖：maven 子模块创建对父模块的隐式依赖

> ID：12999000
> 
> 赞同：1
> 
> 时间：2012-10-21T15:02:39.270
> 
> 标签：java, maven, module

我有一个 Maven 项目

*   父项目（带有以下模块）（包类型 pom）
    *   API项目（包类型jar）
    *   打包项目（对API项目有依赖）（包类型自定义）

我希望能够将 API 项目部署到 Nexus 存储库，以便其他人可以利用该代码。Packaging Project 更像是一个支持实用程序的项目，适用于较小的部署用例集。父项目为我将所有内容包装在一起。

当我将 API 项目部署到 nexus 存储库时，它部署得很好。如果我尝试创建一个依赖 API 的全新项目，它会在 nexus 中找到 API 依赖项，但也需要 Parent 项目。有什么办法可以绕过发布父项目，因为当通过 nexus 存储库使用 API 库时，它真的不需要使用？

关于如何组织我的 Maven 项目以支持这一点的任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:04:01.673

当您添加`<parent>`对 Maven 项目的引用时，您正在做的是：“从该父项获取所有配置并将其注入我的模型，然后用以下内容覆盖”

因此，为了让 Maven 构建您的项目的模型，Maven 必须自己检索父级。换句话说，添加`<parent>`标签会在父子节点之间创建一个明确的硬依赖关系。

好消息是*Inheritance 不必遵循 Aggregation*。这到底是什么意思？

聚合是当你`<modules>`在你的 pom.xml 中列出的时候。它告诉 Maven 反应器（即 Maven 构建的项目集）还应该包括以下（子）项目。

继承是当您设置项目的`<parent>`.

Maven 没有强制要求项目`<parent>`必须将其子项列为`<modules>`，而且 Maven 也没有强制要求项目`<modules>`必须将项目列为`<parent>`.

有些人会这样设置他们的项目

```
ROOT/
 +- pom.xml
 +- parent/
 |   \- pom.xml
 +- api/
 |   \- pom.xml
 \- packaging/
     \- pom.xml 
```

其中 , 的父级`ROOT`实际上`api`是`packaging`的子级`ROOT`。或者有时`ROOT`会是一个没有父级的独立项目[事实上这是我自己经常使用的模式。当我在处理几个相关项目时，我会在我的本地磁盘上汇总`pom.xml`并用我的 IDE 打开它，这样所有相关代码都可以作为一个“项目”使用，即使实际模块可能来自不同的来源]

因此，在您的情况下，解决方案是从“API”模块中删除`<parent>`标签。

现在！有一个缺点。当您`<parent>`从“API”模块中删除标签时，您已经删除了父项目提供的所有默认值，因此您需要复制与“API”项目相关的那些默认值，否则您可能会发现行为的细微变化. 例如，您应该明确复制插件版本的固定以及`<dependencyManagement>`与“API”依赖项相关的任何内容。您可能需要复制其他位，但您应该`mvn help:effective-pom`在删除`<parent>`标记之前和之后使用 Maven 命令，以帮助查看有效差异

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T12:18:57.663

对于我的开发，[我使用 uber-pom maven 插件，它合并 maven 项目层次结构中的信息](https://github.com/raydac/uber-pom)并提供独立的 pom 作为结果，我在 maven Central 中发布工件，没有任何额外的父链接

# c++ - 模板中奇怪的类型名和构造函数

> ID：12999001
> 
> 赞同：0
> 
> 时间：2012-10-21T15:02:42.717
> 
> 标签：c++, class, templates, explicit, typename

我正在尝试理解 C++ 中的模板类。首先，我想了解这条线的含义：

```
template <typename T, typename Ord = columns, typename All = abc::allocator<T,16> >
class matrix 
```

其中 columns 和 allocator 分别是在其他地方定义的结构和类（命名空间 abc 中的第二个）。令我困扰的是它似乎有一个已经初始化的类型名。这是什么意思？当我想使用这个模板时，我是否也应该初始化 Ord 和 All 的类型名？

此外，还有这个唯一的构造函数：

```
explicit matrix(unsigned int rows = 0, unsigned int cols = 0, T init = T()) 
```

但它似乎已经被初始化了。init 应该是什么意思？

我向您保证，我查看了所有代码，但没有什么可以帮助您更好地理解。感谢您的关注。

编辑：谢谢大家的回答。只是一点保证（我是 C++ 的菜鸟）：

```
int const& operator() operator()(unsigned int i, unsigned int j) const 
```

这个方法意味着，当我们初始化类 foo 时，我们可以通过 foo()(1,2) 调用它，其中 i=1 和 j=2。我对吗？这两个“const”指的是什么？

再次感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:06:08.963

这意味着该类的用户已经设置了一个合理的默认值——例如，您*可以*提供一个，但您不必*提供*。构造函数参数也是如此。至于论点是什么意思，只有你能回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:10:38.347

```
template <typename T, typename Ord = columns, typename All = abc::allocator<T,16> >
class matrix
{ 
    //...
}; 
```

这些是默认模板参数，它们就像默认函数参数一样工作 - 您可以指定它们，但如果您不指定它们，它们就是默认值。

你可以看到一个使用函数默认参数的例子。

* * *

底线 - 以下所有行都是正确的：

```
matrix<int> a; // matrix<int, columns, abc::allocator<int, 16> >
matrix<int, rows> b; // matrix<int, rows, abc::allocator<int, 16> >
matrix<int, columns, abc::other_allocator<int, 32> > c; // obvious

matrix<int> a = matrix<int>(); // constructor called with 0, 0 and 
// int() - default constructed T - in this case, int -  as arguments
matrix<int> a(1, 2); // constructor called with 1, 2 and int() as arguments
matrix<int> a(1, 2, 100); // obvious 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:08:16.067

这是一个默认值。如果没有指定模板参数，它将采用默认值。
就像您在函数中有默认值一样：

```
void blah(int a = 0) { } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T15:10:17.163

如您所知，C++ 函数参数可以具有默认值，如果用户不提供该参数，则 C++ 编译器会为它们使用该默认值。现在在构造函数`init`中有一个默认值，`T()`它的意思是使用其默认构造函数的类型值，例如，如果`T=int`然后`T()`意味着`0`，如果它是一个`std::string`它是一个空字符串。您甚至可以将此语法用于其他参数：

```
explicit matrix(
    unsigned int rows = unsigned int(),
    unsigned int cols = unsigned int(),
    T init = T()); 
```

# opengl - 在一个简单的立方体上不正确的 UV 纹理映射

> ID：12999012
> 
> 赞同：3
> 
> 时间：2012-10-21T15:04:01.193
> 
> 标签：opengl, export, textures, blender, uv-mapping

我的程序的目标是显示一个从 Blender 导出的简单立方体 UV 映射。但是我的 openGL 程序中的纹理映射不正确。我想准确地说我的 UV 贴图立方体的显示在 Blender 上是完美的。我的纹理由每个面的简单颜色（红色、绿色、蓝色、紫色、黄色和橙色）组成。我选择使用四边形将网格导出到 .obj 和 .mtl 文件中。这是我的 .obj 文件的内容（我添加了一些评论）：

```
# Blender v2.63 (sub 0) OBJ File: ''
# www.blender.org
mtllib Box.mtl
o Cube
v 1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 1.000000
v -1.000000 -1.000000 1.000000
v -1.000000 -1.000000 -1.000000
v 1.000000 1.000000 -0.999999
v 0.999999 1.000000 1.000001
v -1.000000 1.000000 1.000000
v -1.000000 1.000000 -1.000000
vt 0.500000 1.000000 //1
vt 0.250000 1.000000 //2
vt 0.250000 0.750000 //3
vt 0.500000 0.750000 //4
vt 0.500000 0.250000 //5
vt 0.500000 0.500000 //6
vt 0.250000 0.500000 //7
vt 0.250000 0.250000 //8
vt 0.500000 0.000000 //9
vt 0.250000 0.000000 //10
vt 0.000000 0.750000 //11
vt 0.000000 0.500000 //12
vt 0.750000 0.500000 //13
vt 0.750000 0.750000 //14
usemtl Material_Box.bmp
s off
f 1/1/1 2/2/1 3/3/1 4/4/1 //Orange OK
f 5/5/2 8/6/2 7/7/2 6/8/2 //Green OK
f 1/9/3 5/5/3 6/8/3 2/10/3 //Red OK
f 2/11/4 6/12/4 7/7/4 3/3/4 //White (should be purple) NOT OK
f 3/3/5 7/7/5 8/6/5 4/4/5 //Yellow 5 OK
f 5/13/6 1/14/6 4/4/6 8/6/6 //White (should be blue) NOT OK 
```

我打开的立方体看起来像一个十字架。这是我的 UV 纹理（我想明确指出 '3bis' 和 '4bis' 对应的 .obj 文件坐标错误。只有 1、2、5 和 6 面坐标是正确的）：

![在此处输入图像描述](../Images/762b8ccfcfd413631f83cf44135f5e95.png)

这是我的 openGL 渲染示例：

![在此处输入图像描述](../Images/8ae1ba5fe8313ec12c811e699ae7f582.png)

您可以在 uv 纹理上看到“4bis”白脸。

因此，搅拌机生成的某些坐标似乎是错误的。为什么？问题是否来自蓝色四边形不接触图片的右侧，从而创建特定坐标的平移？也许我必须在 Blender 中导出之前精确一个特殊参数......有人可以帮助我吗？

# asp.net - 使用 Google Map 动态添加 ASP.Net userControl

> ID：12999028
> 
> 赞同：0
> 
> 时间：2012-10-21T15:06:25.823
> 
> 标签：asp.net, google-maps, user-controls

我下载了 gMap.dll 并创建了一个包含 Map 的 userControl。当我直接在 aspx 页面中使用这个 userControl 时没有问题。但是当我动态地将这个 usercontrol 插入到页面时它只给出一个灰色框。这是我的动态添加代码

`Control userControl = LoadControl("kcfinder/upload/userControl/googleMap.ascx"); userControlDiv.Controls.Add(userControl);`

那么，是不是有些组件没有用这种方法加载？有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:22:38.093

在 Pre-Init 方法中添加它。然后在页面生命周期中尽可能晚的引用它，例如：Pre-Prender(...)

# java - 在 Java 程序中不调用 repaint()

> ID：12999030
> 
> 赞同：1
> 
> 时间：2012-10-21T15:06:29.440
> 
> 标签：java, swing, awt, repaint, paintcomponent

我有一个简单的程序（其中大部分将用于其他用途），当用户单击 drawPanel JPanel 并显示椭圆时，它只绘制椭圆。问题是repaint() 方法没有调用paintComponent()。为什么是这样？

这是代码：

```
// Imports Used:
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
import javax.swing.*;
import java.awt.geom.*;
// Class DrawPolygon
public class DrawPolygon extends JPanel implements MouseListener
{
// Variables used in GUI
static JFrame frame;
static JPanel drawPanel;
static JPanel labelPanel;
static JPanel primaryPanel;
static JButton loadButton;
static JButton saveButton;
static JButton clearButton;
static JButton addButton;
static JButton moveButton;
static JButton exitButton;
// Variables used for GUI interaction
static final int SIZE = 6;
static int numVertices;
ArrayList<Point> vertices;
static Color outlineColor = Color.RED;
static int lineWidth = 10;
static Color fillColor = Color.BLACK;
// Constructor for new Polygon Drawing Application
public DrawPolygon()
{
    // Create Frame
    frame = new JFrame("Vector Painter");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    // Set Location of GUI on screen
    frame.setLocation(225,100);
    // Primary Panel to store Draw Panel and Lable/Button Panel
    primaryPanel = new JPanel();
    // Create Label Panel
    createLabelPanel();
    // Create Draw Panel
    createDrawPanel();
    // Add panels to Primary
    primaryPanel.add(labelPanel);
    primaryPanel.add(drawPanel);
    // Add to frame
    frame.getContentPane().add(primaryPanel);
    frame.pack();
    frame.setVisible(true);
}
// Add Buttons to left side
public void createLabelPanel()
{
    // Label Panel to add Buttons
    labelPanel = new JPanel();
    labelPanel.setBackground(Color.BLACK);
    labelPanel.setPreferredSize(new Dimension(200,600));
    // Create JButtons
    loadButton = new JButton("LOAD");
    loadButton.setPreferredSize(new Dimension(180,75));
    loadButton.setBackground(Color.BLACK);
    loadButton.setForeground(Color.WHITE);
    loadButton.addMouseListener(this);
    saveButton = new JButton("SAVE");
    saveButton.setPreferredSize(new Dimension(180,75));
    saveButton.setBackground(Color.BLACK);
    saveButton.setForeground(Color.WHITE);
    saveButton.addMouseListener(this);
    clearButton = new JButton("CLEAR");
    clearButton.setPreferredSize(new Dimension(180,75));
    clearButton.setBackground(Color.BLACK);
    clearButton.setForeground(Color.WHITE);
    clearButton.addMouseListener(this);
    addButton = new JButton("ADD");
    addButton.setPreferredSize(new Dimension(180,75));
    addButton.setBackground(Color.BLACK);
    addButton.setForeground(Color.WHITE);
    addButton.addMouseListener(this);
    moveButton = new JButton("MOVE");
    moveButton.setPreferredSize(new Dimension(180,75));
    moveButton.setBackground(Color.BLACK);
    moveButton.setForeground(Color.WHITE);
    moveButton.addMouseListener(this);
    exitButton = new JButton("EXIT");
    exitButton.setPreferredSize(new Dimension(180,75));
    exitButton.setBackground(Color.BLACK);
    exitButton.setForeground(Color.WHITE);
    exitButton.addMouseListener(this);
    // Add Buttons to Label Panel
    labelPanel.add(loadButton);
    labelPanel.add(saveButton);
    labelPanel.add(clearButton);
    labelPanel.add(addButton);
    labelPanel.add(moveButton);
    labelPanel.add(exitButton);
}
// Creates Draw Panel
public void createDrawPanel()
{
    // Draw Panel to Draw Polygons
    drawPanel = new JPanel();
    drawPanel.setBackground(Color.BLACK);
    drawPanel.setPreferredSize(new Dimension(600,600));
    drawPanel.addMouseListener(this);
    vertices = new ArrayList<>();
}

@Override
public void paintComponent(Graphics g)
{
    super.paintComponent(g);

    g.setColor(Color.ORANGE);

    for (Point spot : vertices)
    {
        g.fillOval(spot.x-SIZE, spot.y-SIZE, SIZE*2, SIZE*2);
    }

    g.drawString("Count: " + vertices.size(), 5, 15);

    System.out.println("repaint is working?");
}

// Execute when Load button is clicked
public void loadButton()
{
    System.out.println("Load Button CLICKED!!");
}
// Execute when Save button is clicked
public void saveButton()
{
    System.out.println("Save Button CLICKED!!");
}
// Execute when Clear button is clicked
public void clearButton()
{
    System.out.println("Clear Button CLICKED!!");
}
// Execute when Add button is clicked
public void addButton()
{
    System.out.println("Add Button CLICKED!!");
}
// Execute when Move button is clicked
public void moveButton()
{
    System.out.println("Move Button CLICKED!!");
}
public void mouseClicked(MouseEvent e)
{
    if (e.getSource() == loadButton)
    {
        loadButton();
    }
    else if (e.getSource() == saveButton)
    {
        saveButton();
    }
    else if (e.getSource() == clearButton)
    {
        clearButton();
    }
    else if (e.getSource() == addButton)
    {
        addButton();
    }
    else if (e.getSource() == moveButton)
    {
        moveButton();
    }
    else if (e.getSource() == exitButton)
    {
        System.exit(0);
    }
    else if (e.getSource() == drawPanel)
    {
        System.out.println("TEST");
        vertices.add(e.getPoint());
        repaint();
    }
}
// These are here because program wouldn't compile without them
public void mousePressed(MouseEvent e){}
public void mouseReleased(MouseEvent e){}
public void mouseExited(MouseEvent e){}
public void mouseEntered(MouseEvent e){}
// Main Function
public static void main(String[] args) 
{
    // Create Frame
    new DrawPolygon();        
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T15:12:40.857

实际上正在调用 repaint ，但是在当前的 DrawPolygon 对象上，但是由于您似乎没有显示其中之一，因此`paintComponent(...)`永远不会被调用。澄清一下，您当前的类 DrawPolygon 扩展了 JPanel，但它似乎没有被添加到任何属于您的 GUI 层次结构的容器中。也许您想将您当前的对象，您的`this`，添加到 GUI 的某个地方？事实上，您可能应该考虑使用您当前的对象来代替您的 drawPanel JPanel 对象。我会考虑完全删除该变量。

同样与您的问题无关，您几乎不想在应该使用 ActionListeners 的 JButtons 上使用 MouseListeners。

# android - 如何使用数据库中的双打列表计算平均值

> ID：12999032
> 
> 赞同：0
> 
> 时间：2012-10-21T15:06:35.040
> 
> 标签：android, database, list, average

我正在尝试使用本文中解释的方法从我的数据库中获得的双精度列表中计算平均值，[但](https://stackoverflow.com/a/10466020/1617602)它不起作用。应用程序崩溃可能是因为溢出。

```
private double getAverage() {
        Cursor cursor = db.getMarks(subject);
        List<Double> list = new ArrayList<Double>();
        cursor.moveToFirst();
        while(!cursor.isAfterLast()) {
            list.add(cursor.getDouble(cursor.getColumnIndex(DBAdapter.KEY_VALUE)));
        }
        if (list.isEmpty())
            return 0.0;

        long sum = 0;
        int n = list.size();
        for (int i = 0; i < n; i++)
            sum += list.get(i);
        return ((double) sum) / n;
    } 
```

有没有一种方法可以获得计算平均值的工作代码？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:25:01.310

你得到什么异常？如果确实溢出，请这样尝试：

```
private double getAverage() {

    Cursor cursor = db.getMarks(subject);

    int count = cursor.getCount();
    double sum = 0.0;
    if(count == 0){
        cursor.close();
        return sum;
    }

    cursor.moveToFirst();
    while(!cursor.isAfterLast()) {
        sum += cursor.getDouble(cursor.getColumnIndex(DBAdapter.KEY_VALUE));
        cursor.moveToNext();
    }

    cursor.close();
    return sum / count;
} 
```

# c - 编译错误：请求不是结构或联合错误

> ID：12999033
> 
> 赞同：2
> 
> 时间：2012-10-21T15:06:41.783
> 
> 标签：c

在这个程序中，我试图创建一个结构，然后使用该结构类型初始化一个数组，将名称和年龄放入数组中，然后打印出结果。但是，当我编译文件时，它说“名称”和年龄“不是结构或联合。谁能发现我的错误。谢谢

```
#include <stdio.h>
#include <stdlib.h>

/* these arrays are just used to give the parameters to 'insert',
   to create the 'people' array */
char *names[7]= {"Simon", "Suzie", "Alfred", "Chip", "John", "Tim",
          "Harriet"};
int ages[7]= {22, 24, 106, 6, 18, 32, 24};

/* declare your struct for a person here */
typedef struct{
  char *names;
  int ages; 
}  person;

static void insert (person **p, char *s, int n) {

   *p = malloc(sizeof(person));

  static int nextfreeplace = 0;

  /* put name and age into the next free place in the array parameter here */
    (*p)->names=s;
    (*p)->ages=n;

  /* modify nextfreeplace here */
  nextfreeplace++;
  }

int main(int argc, char **argv) {

  /* declare the people array here */
   person *p[7];

   //insert the members and age into the unusage array. 
  for (int i=0; i < 7; i++) {
    insert (&p[i], names[i], ages[i]);
    p[i]= p[i+1];
  }

  /* print the people array here*/
  for (int i=0; i < 7; i++) {
    printf("name: %s, age:%i\n", p[i].names, p[i].ages);
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:10:33.713

you declare `p` as an array of pointer to structure. On printf line, you dereference once `p` with `p[i]`, but p is still a pointer to a structure, you want to access its fields with `->`

```
for (int i=0; i < 7; i++) {
  printf("name: %s, age:%i\n", p[i]->names, p[i]->ages);
} 
```

And as you increment `i` in your for loop, you dont need to move your p[i] pointer, remove, `p[i] = p[i + 1]`

```
for (int i=0; i < 7; i++) {
  insert (&p[i], names[i], ages[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:11:04.653

`person *p[7]` declare an array of seven pointers to `person`, so `p[i]` is a pointer to structure. Therefore, you need to dereference this pointer to access to its members.

```
printf("name: %s, age:%i\n", (*p[i]).names, (*p[i]).ages); 
```

To improve readability, you can use the postfix operator `->`.

```
printf("name: %s, age:%i\n", p[i]->names, p[i]->ages); 
```

> **C11 (1570), § 6.5.2.3 Structure and union members**
> A postfix expression followed by the `->` operator and an identifier designates a member of a structure or union object. The value is that of the named member of the object to which the first expression points, and is an lvalue) If the first expression is a pointer to a qualified type, the result has the so-qualified version of the type of the designated member.

# android - Android：如何使用 onDraw 方法模糊圆的边缘？

> ID：12999037
> 
> 赞同：2
> 
> 时间：2012-10-21T15:07:00.500
> 
> 标签：android, image-processing, graphics

我有以下方法：

```
protected void onDraw(Canvas i_Canvas) {            
        int x = (int) m_X;
        int y = (int) m_Y;

        Path path = new Path();
        path.addCircle(
            m_Cx,
            m_Cy,
            m_Radius,
            Path.Direction.CCW);
        i_Canvas.clipPath(path);

        Rect rect = new Rect(x, y, x + 240, y + 240);

        i_Canvas.drawBitmap(m_FullImageBitmap, rect, rect, m_Paint);
    } 
```

使用这个我试图在圆形中创建一些位图的裁剪区域。

我还想模糊那个圆形区域的边缘。例如：从边缘到形状中心的 5px 将被模糊。我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:12:02.883

I think you would have to apply a BlurMaskFilter when drawing the image:

```
m_Paint = new Paint(0);
m_Paint.setColor(0xffffffff);
m_Paint.setMaskFilter(new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL)); 
```

# c# - 从 Windows 8 应用程序中的 sqlite 表中检索数据

> ID：12999041
> 
> 赞同：1
> 
> 时间：2012-10-21T15:07:47.730
> 
> 标签：c#, sqlite, xaml, windows-8

我有一个现成的 sqlite 文件形式的数据库，我想根据我的应用程序的要求将数据与各种控件（如组合框、文本框等）绑定。

我已经引用了这个链接：[http](http://wp.qmatteoq.com/using-sqlite-in-your-windows-8-metro-style-applications/) ://wp.qmatteoq.com/using-sqlite-in-your-windows-8-metro-style-applications/并根据我的数据库表创建了一个类。

我有一个表 auto_fares，所以我创建了一个类 auto_fare。正如上面链接中提到的，我已经按照上面提到的步骤进行操作，但我仍然收到以下错误：“没有这样的表：auto_fares”，尽管我的数据库中确实存在这个名称的表。

请指导我。欢迎任何帮助。等待回复。

以下代码块：

```
StorageFile seedFile = await StorageFile.GetFileFromPathAsync(
    Path.Combine(
       Windows.ApplicationModel.Package.Current.InstalledLocation.Path,
       "fare.sqlite"));
SQLiteAsyncConnection conn = new SQLiteAsyncConnection("fare.sqlite");
var query = conn.Table<auto_fares>();
var result = await query.ToListAsync();
foreach (var item in result)
{
   auto_fares obj = new auto_fares();
   cbCity.Items.Add(item.city);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:09:47.873

默认路径是`Windows.Storage.ApplicationData.Current.LocalFolder.Path`（并且您的代码永远不会使用`seedFile`）。

请参阅[使用 SQLite 数据库播种 Metro 风格应用程序](http://timheuer.com/blog/archive/2012/06/28/seeding-your-metro-style-app-with-sqlite-database.aspx)。

# ruby-on-rails - Rails rspec 测试用户向他/她自己发送消息

> ID：12999051
> 
> 赞同：0
> 
> 时间：2012-10-21T15:09:23.913
> 
> 标签：ruby-on-rails, rspec

我正在尝试测试，因此用户无法向自己发送消息。目前在我的新消息视图中，我有一个选择框，可以选择系统中除 current_user 之外的所有用户。目前我只有一个不允许用户从选择框中选择自己作为收件人的测试：

```
it { should_not have_select(:receiver_id, :options => [user.name]) } 
```

然而，这样的考验就够了吗？我是否需要测试创建一条新消息，将 :receiver_id 设置为 current_user 的 id 并检查它？如果是这样，我会将这个规范放在哪里，在模型或请求中？

**编辑（在消息模型中添加了一个验证方法，但即使我注释掉了验证行，我的 rspec 也会通过）：**

**编辑 2（错误哈希的测试未通过）：**

消息.rb：

```
validate :validate_sender_receiver

def validate_sender_receiver
    if self.receiver_id == self.sender_id
        errors.add(:receiver_id, "Cannot send message to self")
    end
end 
```

messages_spec.rb

```
describe "sending message to yourself" do
    before do
        @message = user.sent_messages.new(:receiver_id => user.id)
    end

    it "should not be valid" do
        @message.should_not be_valid
    end

    it "should set the error hash" do
        @message.errors.should include("Cannot send message to self")
    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:01:27.687

如果用户破解了您的选择并将自己添加到可能的值中，您最终可能会收到一条您不想要的消息。我不知道您的控制器的操作是什么样的，但您应该在模型中进行测试，如果接收者与发送者相同，您的模型应该拒绝该消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:35:29.610

我变了：

```
it "should set the error hash" do
    @message.errors.should include("Cannot send message to self")
end 
```

到：

```
it "should set the error hash" do
    @message.errors.should have_key(:receiver_id)
end 
```

现在效果很好，还是不明白为什么第一种方法行不通？have_key 是否只是检查是否有密钥，而不是是否为空？

# jquery - 生成的 div 的数字和换行？

> ID：12999052
> 
> 赞同：0
> 
> 时间：2012-10-21T15:09:31.277
> 
> 标签：jquery, css, drupal

我有一个 drupal 生成的帖子表：

```
<div id="row1">text content</div>
<div id="row2">text content</div>
<div id="row3">video content</div>
<div id="row4">video content</div>
<div id="row5">video content</div> 
```

行发生变化，但我需要修改 1 中的 3 个视频行，这意味着我需要定位这些没有其 id 的行，在行中添加每个特定数字的分类包装器，然后我将通过 css 设置它们的外观（我需要删除 video2 和 video3 中的标题，以便在 1 个包含 3 个视频的视频帖子中手动合并它们，我们的 drupal 引擎不能这样做）

这是我需要的：

```
<div id="row1">text content</div>
<div id="row2">text content</div>
<div id="row3"><div class="video1">video content</div></div>
<div id="row4"><div class="video2">video content</div></div>
<div id="row5"><div class="video3">video content</div></div> 
```

（“视频内容”是 3 个不同的命名 div，例如日期容器、文章内容和帖子页脚，我需要在它们周围放置一个包装器）

我试图在 jquery 中解决这个问题，但我无法管理，有人有解决方案吗？

编辑：

好的，我会告诉你整个事情。:)

第 1 页：

```
<div id="row1">
<div class="date_container">(date divs)</div>
<div class="article_content">(article post's text, image, whatever)</div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>

<div id="row2">
<div class="date_container">(date divs)</div>
<div class="article_content">(article post's text, image, whatever)</div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>

<div id="row3"> (video1)
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>

<div id="row4"> (video2)
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>

<div id="row5"> (video3)
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div> 
```

第2页：

```
<div id="row1">
<div class="date_container">(date divs)</div>
<div class="article_content">(article post's text, image, whatever)</div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>

<div id="row2"> (video1)
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>

<div id="row3"> (video2)
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>

<div id="row4"> (video3)
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>

<div id="row5">
<div class="date_container">(date divs)</div>
<div class="article_content">(article post's text, image, whatever)</div>
<div class="post_nid">(article footer, with author, etc)</div>
</div> 
```

所以，问题：

1：每个视频的视频容器具有相同的类，例如“article_content”和“video_image”。

2：每页换行，所以第一页的“row3”是视频，第二页是文字文章。基本上，我们在每个页面上固定了 5 行，并且内容动态进入其中。

我认为jquery有一种方法可以定位“video_image”类，这是唯一指向页面行中的视频内容的方法，并设法将“video_image”上方的所有内容包装到一个名为“video1”的div中。另一个步骤是在 1、2 和 3 视频块上添加计数。

编辑2：

目标是：

```
<div id="row2"> (video1)
<div class="video1">
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>
</div>

<div id="row3"> (video2)
<div class="video2">
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>
</div>

<div id="row4"> (video3)
<div class="video3">
<div class="date_container">(date divs)</div>
<div class="article_content"><div class="video_image"></div></div>
<div class="post_nid">(article footer, with author, etc)</div>
</div>
</div> 
```

或者，如果 videoX 类进入该行，例如

```
<div id="row4" class="video3">...</div> 
```

这对我也有好处，但正如我之前提到的，第 4 行可以是网站第二页上的第 1 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:11:15.637

鉴于更新的信息，我建议：

```
$('.video_image').each(function(i,el){
    $(el).wrap('<div />').parent().attr('class','video' + i);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jkCR2/)。

```
$('.video_image').parent().html(
    function(i,h){
        return '<div class="video' + i + '">' + h + '</div>';
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jkCR2/1/)。

以下版本使用 an 上升到第一个元素，`id`然后将其所有内部 html 包装在另一个`div`中`videoN`（其中 N 显然是一个数字）：

```
$('.video_image').closest('div[id]').html(function(i,h){
    return '<div class="video' + i + '">' + h + '</div>';
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jkCR2/3/)。

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`html()`](http://api.jquery.com/html/).
*   [`parent()`](http://api.jquery.com/parent/).
*   [`wrap()`](http://api.jquery.com/wrap/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:12:57.790

`$('#row3').html($('<div class="video3">').html($('#row3').html()));`

Something like that, but I should check for some weak points

EDIT:

if you need to skip first 2 rows:

```
 $('div').each ( function(count) {
     if (count > 1) {
       $(this).html($('<div class="video3">').html($(this).html()));
     }
  }); 
```

Or may be you need to check if it is a video row or not? Not very clear by the question.

# c# - .NET 使 C# 程序在后台和启动时像 Anti Virus 一样运行

> ID：12999055
> 
> 赞同：5
> 
> 时间：2012-10-21T15:09:55.147
> 
> 标签：c#, .net, windows, startup

对于一个大型项目，我将制作一个 C# 程序，它可以执行用户指定的各种操作，有一个用户界面，可以从系统图标访问，并且在屏幕上始终显示徽标。

我希望程序在启动时运行并一直在后台运行，直到关闭，例如当今许多常见的防病毒/恶意软件程序。

我还希望安装程序以便运行。

我知道这里有很多。我知道如何让程序在启动时运行（启动文件夹），但就像 AntiVirus 一样，我希望它始终存在，而不仅仅是在启动文件夹中......

我最初认为这是一项服务，但现在我不太确定，而且我正在做一场噩梦。做这个的最好方式是什么 ？GUI 是必须的。

将不胜感激任何和所有的答案、提示和建议。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T15:17:27.287

防病毒程序和类似的系统托盘应用程序有时或经常有 2 个组件。有一个随系统启动的服务，启动文件夹中有一个单独的系统托盘应用程序，它与服务器交互以在用户登录到桌面时为用户提供对服务功能的访问。您必须回答的问题之一是您是否希望在无人登录时运行任何东西。如果是这样，您将需要一个服务组件。如果没有，您可以将所有内容放在一个创建系统托盘图标的应用程序中。要从 .NET 应用程序将图标放入系统托盘，请参阅[http://www.developer.com/net/net/article.php/3336751/C-Tip-Placing-Your-C-Application-in-系统托盘.htm](http://www.developer.com/net/net/article.php/3336751/C-Tip-Placing-Your-C-Application-in-the-System-Tray.htm)

如果我理解/回忆正确，有一个 .NET 组件设计用于将图标放入系统托盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:41:34.387

这是我上面提到的示例。

此代码位于 TaskbarUtility 中，整个应用程序中的所有事件都通过这里创建新的表单。

我不确定这是否是执行此类操作的“正确”方式，并且我不打算进行线程劫持，但我想我不妨分享一下。:)

```
 List<CommonFormBase> activeWindows = new List<CommonFormBase>();

    public void LaunchApplication(ApplicationWindowType formTypeToLaunch)
    {
        CommonFormBase tempForm;
        switch (formTypeToLaunch)
        {
            //implement code to create a new form here
        }

        activeWindows.Add(tempForm);
        tempForm.Name = "UniqueName:" + System.DateTime.Now;
        tempForm.FormClosed += new FormClosedEventHandler(tempForm_FormClosed);
        tempForm.Show();
    }

    void tempForm_FormClosed(object sender, FormClosedEventArgs e)
    {
        if (sender is CommonFormBase)
        {
            //Get the index of the selected form
            int index = -1;
            for (int i = 0; i <= this.activeWindows.Count - 1; i++)
            {
                if (this.activeWindows[i].Name == ((Form)sender).Name)
                    index = i;
            }

            //Remove the selected form from the list
            if (index >= 0)
                activeWindows.RemoveAt(index);

            //Close the TaskbarUtility if no remaining windows
            //  and user choose to exit when none remain
            if (this.activeWindows.Count == 0 && CloseWhenNoWindowsRemain)
            {
                this.Close();
            }
        }
    } 
```

希望这是有道理的。

假设并非所有用户都希望应用程序一直运行，因此当他们启用该选项时，这将关闭整个程序。

# ios - how to return the correct number of objects from array in IOS

> ID：12999059
> 
> 赞同：0
> 
> 时间：2012-10-21T15:10:28.327
> 
> 标签：ios, uitableview, nsarray, tableview

I am trying to return the number of objects from myArray and depending on the value, change the headerView in my tableView. The app is functioning in the following way, the user searches for an object, if the object exists the object will appear in the tableView. If the user searches for an object that doesn't exist, nothing will appear in the tableView. Pretty easy..

Eventhough the user searches for an object that doesn't exist it seems like the array stores a value in some-way and the tableView/array is not nil anymore? But nothing is displayed in the tableView. What am I doing wrong? searchResults is the array in my tableView.

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [self.searchResults count];
}

 - (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
static NSString *CellIdentifier = @"SearchCell";
UITableViewCell *cell = [pTableView dequeueReusableCellWithIdentifier:CellIdentifier];

 if (cell == nil)
 {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
Task *task = [self.searchResults objectAtIndex:indexPath.row];

UILabel *nameLabel = (UILabel *)[cell viewWithTag:1];
UILabel *bookLabel = (UILabel *)[cell viewWithTag:2];
UILabel *chapterLabel = (UILabel *)[cell viewWithTag:3];

[nameLabel setText:task.name];
[bookLabel setText:task.book.name];
[chapterLabel setText:task.chapter.name];

return cell;
}

- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)] autorelease];

if (self.searchResults == nil){

    headerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lista2.png"]];

    UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(5, 3, tableView.bounds.size.width - 5, 18)] autorelease];
    label.text = @"Information";
    label.textColor = [UIColor whiteColor];
    label.backgroundColor = [UIColor clearColor];
    [headerView addSubview:label];
  }

  else if (self.searchResults != nil){

    headerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lista2.png"]];

    UILabel *label2 = [[[UILabel alloc] initWithFrame:CGRectMake(5, 3, tableView.bounds.size.width - 5, 18)] autorelease];
    label2.text = @"Search results";
    label2.textColor = [UIColor whiteColor];
    label2.backgroundColor = [UIColor clearColor];
    [headerView addSubview:label2];
}
return headerView;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:30:06.870

所以，听起来`self.searchResults`总是 non `nil`。

代替

```
if (self.searchResults == nil){ 
```

和

```
if ([self.searchResults count] == 0){ 
```

并更换

```
else if (self.searchResults != nil){ 
```

和

```
else { 
```

# android - HoloEverywhere 未运行：R 无法解析为变量

> ID：12999062
> 
> 赞同：1
> 
> 时间：2012-10-21T15:10:34.933
> 
> 标签：android

嗨，我对 HoloEverywhere 有疑问，我总是收到错误消息：

```
R cannot be resolved to a variable 
```

我做了以下事情：我导入了 holoeverywhere 和 action bar 库。然后我在清单文件中将主题设置为全息。最后我把我改成`extends Activity`了`extends com.WazaBe.HoloEverywhere.sherlock.SActivity`

我也清理了我的项目但没有成功

可能是什么问题呢？在全息项目中我没有错误

编辑：我还有另外两个错误

```
The hierarchy of the type MainActivity is inconsistent 
```

&

```
Jar mismatch! Fix your dependencies 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:13:20.817

1.  如果使用 Eclipse，请尝试使用组织导入功能 (CTRL+SHIFT+O) 以确保将所有需要的类导入到 Java 文件中。
2.  尝试清理和重建您的项目。
3.  检查您的资源文件（尤其是布局文件）中是否没有错误，因为这将阻止 R.java 文件的生成。在 Eclipse 中执行此操作的一种简单方法是打开问题视图：窗口 -> 显示视图 -> 其他 -> 问题

# php - 包含绝对/相对定位的 2 列布局的 CSS

> ID：12999064
> 
> 赞同：0
> 
> 时间：2012-10-21T15:10:46.500
> 
> 标签：php, html, css, stylesheet

我对 CSS 毫无用处，我正在尝试创建两列等宽效果。唯一的问题是我有一些现有的 html 必须放在左侧框中，并且需要将元素添加到右侧框中。

这是左侧的源代码（我已经包含了 CSS 内联）：

```
<div id="photoContainer" style="position:relative; width:400px; height: 400px;background:#845454;margin-left:20px;overflow: hidden;" >
   <img id="imgPhoto" style="z-index:1000; position:absolute; left:60px; top:23px; width:280px; height:354px" alt="photo" src="images/model.png" class="resize" />
   <img id="imgFrame" style="z-index:1005; position:absolute; left:0px; top:0px; width:400px; height:400px" alt="frame" src="images/wigs/Wig1.png" />
</div> 
```

尽我所能，我无法让 CSS 正确地在左侧显示上述内容，并在右侧显示更多控件。

希望你能帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:40:34.180

不是很清楚你必须做什么，但总的来说：

```
<div id="container">
<div id="column1">...</div>
<div id="column2">...</div>
</div> 
```

CSS：

```
#container {
  float: left;
  width: 100%;
}
#column1, #column2 {
  width: 50%;
  float: left; 
} 
```

# php - How to filter a specifc id and then apply jquery

> ID：12999065
> 
> 赞同：0
> 
> 时间：2012-10-21T15:10:59.597
> 
> 标签：php, jquery

1.  I am passing all ids to the jQuery function. Now i want to apply jQuery only to the certain ids. Plz help me

    Suppose this function where the id parameter is passed from php onmouseover, its value is ranged from 0 to 100

    ```
    function un(id){   //this id has the ids from 0 to 100 and I only want to apply css effects to the id=33
       //alert(id);
       $('#33').css('text-decoration', 'underline');
    } 
    ```

2.  If the ids are in an array how can I pass these ids to the above jQuery function and then how can i use then in selector. Suppose,

    ```
    <?php 
      $children = $this->get_child_nodes2($id);
      echo  implode("", $children);      
    ?> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:13:31.547

Create the string which jQuery uses to search with dynamic:

```
function un(id){   //this id has the ids from 0 to 100 and I only want to apply css effects to the id=33
  //alert(id);
  $('#' + id).css('text-decoration', 'underline');
} 
```

# c++ - How do I deliver templates arguments to templated sub-class via inheritance?

> ID：12999073
> 
> 赞同：0
> 
> 时间：2012-10-21T15:11:30.690
> 
> 标签：c++

I have this code that uses a template parent class `A` that has one templated sub-class `C`. `A` takes a type (`T`) and `C` takes an object of that type (`T t`) in their template parameters. What I'm trying to do is, in the inheritance of the class `B`, give `C` its template arguments, make a `b` object, and call `C`'s `.h` member function. But I'm getting the following errors:

> prog.cpp:10:44: error: too many template-parameter-lists
> prog.cpp: In function `'int main()'`:
> prog.cpp:14:5: error: `'B'` was not declared in this scope
> prog.cpp:14:7: error: expected `';'` before `'b'`

```
template <typename T> struct A {
    protected:
        template <T> struct C { 
            T h( T t ) { return t * t; }
        };
};

template <typename T = int> template <T t = 5> struct B : public A<T>::C<t> {};

int main() {

    B b;
    b.h();

} 
```

The error is called when I instantiate a `B` object. I've tried changing a lot of things around but it didn't help the situation. For example, I changed:

```
template <typename T = int> template <T t = 5> struct B... 
```

to

```
template <typename T = int> struct B... 
```

and changed

```
: public A<T>::C<t> {}; 
```

to

```
: public A<T>::C<T t = 5> {}; 
```

But I received even more errors:

> prog.cpp:10:53: error: non-template `'C'` used as template
> prog.cpp:10:53: note: use `'A<T>::template C'` to indicate that it is a template
> prog.cpp:10:66: error: expected `'{'` before `';'` token
> prog.cpp: In function `'int main()`:
> prog.cpp:14:7: error: missing template arguments before `'b'`
> prog.cpp:14:7: error: expected `';'` before `'b'`

I'm also curious about the first set of errors in which I got `B was not declared in this scope`. How could it not be? Is it the way I'm defining `B`? What could I be doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:18:10.180

您必须对代码进行 2 处更改：

```
// First you don't need and should not use 2 templates
template <typename T = int, T t = 5> struct B
    // C++ doesn't know that A<T>::C is a template so you should say it here
    : public A<T>::template C<t> {}; 
```

# ios - invalid deployment target for -stdlib=libc++

> ID：12999078
> 
> 赞同：1
> 
> 时间：2012-10-21T15:12:11.317
> 
> 标签：ios, xcode4, ios6

I have updated a very old project of mine(XCODE 4.5.1 baseSDK iOS6) and for some reason i get the error above.

it compiles only for iOS5+ but not with iOS 4.3

?

any idea ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:43:42.033

您必须在目标构建设置中将 C++ 标准库设置为 libstdc++（GNU C++ 标准），如此[处](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/_index.html)所述。

# java - 均衡java中的两个复杂对象（由另一个对象组成的两个对象）

> ID：12999085
> 
> 赞同：3
> 
> 时间：2012-10-21T15:13:00.210
> 
> 标签：java, object, memory, point

假设您在 java 中有这段代码：联系人由姓名和号码组成，电话簿来自联系人数组。

//set -> 这个方法是真的复制并创建新的内存位置还是只是指向内存？

```
public void setContact(Contact[] contact)
{
    this.contact =  contact; // <----this
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:15:44.467

数组是对象，而对象引用在 Java 中是按值传递的。因此，调用此方法`this.contact`会生成对作为参数传递的联系人数组的引用的副本。不复制数组元素。不制作数组的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:24:47.433

通过使用它，您正在设置对堆栈中堆中的对象的引用，即您的对象在堆中并且您的引用在堆栈中

只有通过使用 new 关键字，您才能获得在堆中获取空间的新对象

# google-app-engine - In the GAE channel API, how high can duration_minutes be set?

> ID：12999091
> 
> 赞同：1
> 
> 时间：2012-10-21T15:13:48.727
> 
> 标签：google-app-engine, channel-api

I am implementing a Google App Engine app for which I need to create channels at a high rate. To avoid incurring excessive costs owing to the relatively stingy quota for channels, I am going to use the approach of [channel pooling](https://stackoverflow.com/questions/8147221/best-method-of-channel-pooling-in-google-app-engine)

Since in this model, channels will be reused by future clients, I would like them to be as long lived as possible - up to 24 hours, which is the time after which quotas reset and extending a channel is no longer profitable. This seems straightforward:

```
 token = create_channel(clid, duration_minutes=1440) 
```

...but I would like to know if the duration_minutes argument has an upper limit. Does anyone know what it is?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-26T11:50:33.160

参数 duration_minutes 必须小于 1441

# user-interface - Eclipse SWT：从左列到右列的多选小部件

> ID：12999092
> 
> 赞同：1
> 
> 时间：2012-10-21T15:13:53.493
> 
> 标签：user-interface, swt

![在此处输入图像描述](../Images/b56b4cd2e97492618b2857b1a7a404ed.png)

我正在开发一个使用 SWT 的插件。在插件的一个窗口中，我需要添加看起来像上面那个的小部件。我找不到合适的名称，所以，图像。

它的作用是使用中间的按钮从左列到右列选择项目，反之亦然。移动项目后，它们将从左列中删除并添加到右列，反之亦然。

**问题 1：**此设置的确切名称是什么？
**问题 2：**是否有任何现有的 swt 类实现了我可以重用的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:07:21.460

看看[`DualList`](http://code.google.com/a/eclipselabs.org/p/opal/wiki/DualList)蛋白石项目。这应该正是您想要的。

![在此处输入图像描述](../Images/8fdffab5d4aba3ee0d9cd3596b2b2926.png)

如果你想自己做，可以使用两个`Table`s，每个只有一列，或者两个`List`s。

布局将是：

```
Composite(GridLayout, 3 columns)
|
|- First List/Table
|
|- Composite(GridLayout, 1 column)
|  |- Button add
|  |- Button addAll
|  |- Button delete
|  |- Button deleteAll
|
|- Second List/Table 
```

**编辑**：

事实上，设计的东西非常相似，作为对不同问题的回答。看看我的回答[here](https://stackoverflow.com/a/12743043/1449199)。

# safari - Why is this search form input using Twitter Bootstrap rendering oddly?

> ID：12999094
> 
> 赞同：1
> 
> 时间：2012-10-21T15:14:22.027
> 
> 标签：safari, twitter-bootstrap

I'm using Twitter Bootstrap as my HTML/CSS framework for a Rails site.

Here's my simple search form:

```
<form class="form-search" id="new_search" method="post">
  <div style="margin:0;padding:0;display:inline">
  <input class="search-query" size="30" type="text">
  <button class="btn" name="button" type="submit">Search</button>
</form> 
```

The rendered input box has strange artifacts on the right side (see image below) when rendered in Safari. The problem is not there in Chrome.

![Search Input Rendering Bug](../Images/b5020ebb9d7c4b0fff35c52586887373.png)

Any idea why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:43:14.080

其他人抱怨在 Mountain Lion 上的 Safari 6.0 中存在类似的渲染问题（请参阅[Bootstrap 问题 #4217](https://github.com/twitter/bootstrap/issues/4217)）。由于在不同的网站上都可以看到它，因此它被标记为 Safari 问题，建议尝试向 Apple 提交错误报告。

# java - Sharing java objects in Rhino Javascript

> ID：12999095
> 
> 赞同：3
> 
> 时间：2012-10-21T15:14:32.717
> 
> 标签：java, javascript, rhino

Let me first start with admitting that I am a noob in JavaScript. So the question might not be very sound at the basics and might lack enough information to help me.

## Background

My organisation has an internal Eclipse based IDE for JavaScript. All we have to do is write scripts in JavaScript and directly execute them. My guess is it uses Rhino since I have seen it in the stack trace of some exceptions.

My code runs across 3 ".js" files.

Script-1: Declare global variables and instantiate them as Java objects

```
importClass(java.util.HashMap);
var hmTCResult = new HashMap(); 
```

Script-2: Perform some actions using the global variables from Script-1

```
Script-2.prototype.run = function() {
hmTCResult.put("Result", "Fail");
};

changeStatus = function(strStatus){
hmTCResult.put("Result", strStatus);
}; 
```

Script-3: Call function in Script-2 which uses the global variables

```
changeStatus("Pass") 
```

## Problem Definition

When from Script-3 I call the function in Script-2 it doesn't seem pick the instance variables and my function fails i.e. I get an exception "hmTCResult not set to the instance of an object." Please note that the the same variable hmTCResult works well in Script 1\.

I have done some reading of the Scope and the Context in JavaScript but haven't been able to break through it, since I don't see it explicitly in the IDE.

I will be happy to provide more information if needed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:59:58.563

这很好用，只需调整您的范围并设置原型搜索：

```
Context cx = Context.enter();
try {
    // Cache and reuse:
    ScriptableObject sealedSharedScope = cx.initStandardObjects(null,
            true);
    // Force the LiveConnect stuff to be loaded.
    String loadMe = "RegExp; getClass; java; Packages; JavaAdapter;";
    cx.evaluateString(sealedSharedScope, loadMe, "preLoadLazyLoad", 0,
            null);

    cx.evaluateString(sealedSharedScope, "varInRoot = 'blah';",
            "setVarInRoot", 0, null);

    // here you can put more cx.evaluateString calls to set up your
    // environment (eg. hmTCResult)

    // now connect a throw-away new scope into the hierarchy, with local
    // vars:
    Scriptable scope = cx.newObject(sealedSharedScope);
    // ensure that definitions in the root scope are found
    scope.setPrototype(sealedSharedScope);
    // ensure that new global variables are created in this scope (don't
    // use
    // var for them!)
    scope.setParentScope(null);

    cx.evaluateString(scope, "localVar = varInRoot;", "mySource", 0,
            null);
    assertEquals("blah", scope.get("localVar", scope).toString());
    // new var not in root:
    assertEquals(ScriptableObject.NOT_FOUND,
            sealedSharedScope.get("localVar", scope));
} finally {
    Context.exit();
} 
```

注意 scope.get 不会搜索原型链——必须自己做！

范围独立于 Context 并且在 Context.exit() 中存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:41:42.690

要在 Java 中评估 js 脚本，可以执行以下操作

```
ScriptEngine engine = new ScriptEngineManager().getEngineByMimeType( "text/javascript" );
Bindings bindings = engine.getBindings( ScriptContext.GLOBAL_SCOPE );
bindings.put( "varname", ... );
bindings.put( ... );
engine.put( ScriptEngine.FILENAME, script.toString());
engine.eval( new FileReader( script )); 
```

如果在同一个引擎/绑定中加载了 3 个脚本，则可以，但如果新分配了引擎以执行 script3，则上下文已被清除。

这篇文章并不是真正的答案，但太长了，无法发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T22:18:33.233

My guess, without more information, and assuming your modified transcripts are absolutely correct, is that your scripts are being run in separate scopes, all with the global scope as a parent.

As such, my guess is that the reason `changeStatus` works in the third script is because there is no `var` declaration for it. Thus, absent other configuration, this will be defined as a variable in the top-level, or global, scope, that is shared across the three scripts.

My guess is that the reason `hmTCResult` does *not* work is that it is declared with the keyword `var`, indicating a local variable. If all scripts were running in the top-level scope, this would define a variable on the global object. But if each script runs in its own scope, this would define a variable only in the scope of script 1\. You wouldn't see the problem in the scope of script 2, because no one is executing the code in script 2 until script 3 executes.

# three.js - 三.js 射线相交不正确

> ID：12999098
> 
> 赞同：1
> 
> 时间：2012-10-21T15:15:01.167
> 
> 标签：three.js

我正在尝试使用three.js 构建一个星系视图，除了一个部分外，它工作得非常好。当我单击一个球体时，该点并不总是正确的。这是我用于射线的代码：

```
mouseX = 2 * (c.pageX / SCREEN_WIDTH) - 1;
mouseY = 2 * -(c.pageY / SCREEN_HEIGHT) + 1;
c = new THREE.Vector3(mouseX, mouseY, 0.5);
c = projector.unprojectVector(c, camera);
ray = new THREE.Ray(camera.position, c.subSelf(camera.position).normalize());
c = ray.intersectObjects(scene.children);
0 < c.length && (sphere.id == c[0].object.id ? 1 < c.length && (i(c[1].object), debug(c[1].object.id), sphere.position = c[1].point) : (i(c[0].object), sphere.position = c[0].point)) 
```

如果对象距离场景中心不远，这会起作用，
但是我不会让每个行星都靠近中心，这就是我遇到问题的地方。我离中心越远，错误似乎就越大。

这是代码
[http://jsfiddle.net/PHKTL/的简单工作版本](http://jsfiddle.net/PHKTL/)

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:19:44.070

问题是因为您使用了如此大的数字，而交集代码使用的是从 0 到 1 的数字，这会在计算中产生如此大的错误。

# javascript - How to create a dynamic width column in Twitter Bootstrap

> ID：12999100
> 
> 赞同：32
> 
> 时间：2012-10-21T15:15:07.633
> 
> 标签：javascript, html, css, twitter-bootstrap, stylesheet

How do you use Twitter Bootstrap to create a table-like list structure, where some columns take as much space, as required to accommodate the widest element of that column, and a single column takes the remaining space?

For example:

```
Id    |Name     |Email address                
100001|Joe      |MamiePVillalobos@teleworm.us
100   |Christine|ChristineJWilliams@dayrep.com
1001  |John     |JohnLMiley@dayrep.com 
```

the **Id column** takes just enough space to accommodate the 100001 id, which is the longest id.

The **Name column** takes just enough space to accommodate the name Christine.

The **Email column** takes the remaining space.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-21T20:08:59.187

## 使用旧表格标签的表格结构

开个玩笑——或者我不是。

```
<table class="table">
  <tr><th>Id</th>     <th>Name</th>      <th>Email address</th></tr>
  <tr><td>100001</td> <td>Joe</td>       <td>MamiePVillalobos@teleworm.us</td></tr>
  <tr><td>100</td>    <td>Christine</td> <td>ChristineJWilliams@dayrep.com</td></tr>
  <tr><td>1001</td>   <td>John</td>      <td>JohnLMiley@dayrep.com</td></tr>
</table> 
```

## 使用网格系统

在有关[引导网格系统](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)的文档中，我找不到任何自动宽度构建块。所有开箱即用的东西都有一定的宽度和固定的列数：

```
 <div class="row">
      <div class="span2">ID</div>
      <div class="span2">Name</div>
      <div class="span8">E-Mail</div>
    </div>
    <div class="row">
      <div class="span2">100001</div>
      <div class="span2">Joe</div>
      <div class="span8">MamiePVillalobos@teleworm.us</div>
    </div>
        <div class="row">
      <div class="span2">100</div>
      <div class="span2">Christine</div>
      <div class="span8">ChristineJWilliams@dayrep.com</div>
    </div> 
```

因此，我假设您必须为具有自动大小的 3 列表构建自己的版本。

在我的[演示](http://jsfiddle.net/CG6CT/7/)中，如果空间变窄，或者如果空间太宽，列会被拉伸，则网格列会换行。

## 使用创意标记进行更新

我用自定义类更新了我的[演示。](http://jsfiddle.net/CG6CT/7/)创意标记接近您正在寻找的内容

```
 <div class="row">
      <div class="spanFl">100000001 <br />
        100
      </div>
      <div class="spanFl">Joe <br/>
          Christine
      </div>
      <div class="spanFl">MamiePVillalobos@teleworm.us <br />
        ChristineJWilliams@dayrep.com
      </div>
  </div> 
```

### 使用css-3显示表格

在[tutsplus 上，](http://net.tutsplus.com/tutorials/html-css-techniques/html-5-and-css-3-the-techniques-youll-soon-be-using/)我找到了一篇使用 css-3`display:table`设置表格布局的文章。除非您为每一行使用三个 div，否则它不能解决行换行问题。

```
#content {  
    display: table;  
}  
#mainContent {  
    display: table-cell;  
    width: 620px;  
    padding-right: 22px;  
}  
aside {  
    display: table-cell;  
    width: 300px;  
} 
```

## 引导响应式设计

据我了解[引导文档](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)没有内置的灵魂，用于具有自动和剩余宽度的 3 列布局。引用引导程序上的响应式设计页面：“负责任地使用媒体查询，并且仅作为移动受众的开始。对于较大的项目，请考虑专用代码库而不是媒体查询层。”

您能否详细说明为什么不能使用桌子？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-14T17:53:11.607

正如其他人所说，您应该在有意义的地方使用常规表格。此外，CSS3 display:table 也是一个很好的解决方案。

根据用例，您可以考虑使用不同的解决方案：
[https](https://github.com/donquixote/bootstrap-autocolumns/blob/master/bootstrap-autocolumns.css)
://github.com/donquixote/bootstrap-autocolumns/blob/master/bootstrap-autocolumns.css 这是一段添加“col-sm”的 CSS -auto” 除了“col-sm-1”、“col-sm-5”等。

（ATM，我建议将其复制到自定义 css 文件并根据您的需要进行调整。）

### 例子

```
<div class="row">
  <div class="col-xs-auto">Left</div>
  <div class="col-xs-auto-right">Right</div>
  <div class="col-middle">Middle</div>
</div> 
```

这是一个小提琴：http: [//jsfiddle.net/9wzqz/](http://jsfiddle.net/9wzqz/)

### 主意

*   .col-*-auto 向左浮动，具有典型的填充，但没有任何明确的宽度设置。
*   .col-*-auto-right 改为向右浮动。
*   .col-middle 有 display:table，可以防止它在其他元素周围浮动。
*   使用“xs”、“sm”、“md”、“lg”来定位特定的屏幕宽度。

### 限制

如果您用长文本填充左/右列，它们将扩展为全宽。最好将它们用于图像等固定宽度的东西。

中间列只有在它有足够的内容时才会占用完整的可用宽度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-15T11:51:34.153

如果您不需要*限制*列大小，则可以禁用宽度。

```
<span class="col-xs-1" style="width: inherit !important; ">unknown ...</span> 
```

我需要其他列的属性（填充、高度等）的引导定义，所以我添加了一个 col 定义，但是一个小单元（col-xs-1）。

笔记：

*   “！important”子句可能会被删除（我不确定）
*   在我的项目中，已知文本无论如何都很小。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-30T00:24:38.790

好吧，根据[引导文档](http://getbootstrap.com/css/#tables-responsive) ，您可以将`table-responsive`css 类应用于表格元素并使其具有响应性。我观察到的是它实际上可以滚动。

# html - 如何在同一包含元素中以不同的方式对齐文本块？

> ID：12999101
> 
> 赞同：1
> 
> 时间：2012-10-21T15:15:09.787
> 
> 标签：html, css

我有一个`<div>`包含两个文本块的元素。一个块在元素的中心对齐，我想将第二个块向右对齐。

我正在尝试执行此操作的页面可以在[这里](http://perso.citi-lab.fr/mselva/)看到。

我尝试`<div>`在页脚中创建一个内部元素，浮动第二个文本块并应用于`float: right`它。此解决方案的问题在于，文本第一个（居中）文本元素现在在剩余空间的中心对齐，减去浮动的宽度`<div>`，而不是在包含元素中居中。

这是我尝试过的代码：

```
<div id="footer">
      <div id="Valid">
          Valid <a href="http://validator.w3.org/check/referer">HTML</a>
          and <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a>
      </div>
  <div id="modified">
         Last modified ...
      </div>
</div> 
```

如何让两个文本块显示在我想要的位置？

编辑：我正在设置一个[http://jsfiddle.net/](http://jsfiddle.net/)示例（建议的 SSCCE 目前似乎已关闭）

这是示例[http://jsfiddle.net/vjmVc/](http://jsfiddle.net/vjmVc/)我也尝试使用两个嵌套的 div 元素但没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:58:37.737

If you want to prevent the right part of taking up the space you can position it `absolute`. The only thing you would have to keep in mind in that case is set the positioning of the container element (footer) to `relative`: [http://jsfiddle.net/vjmVc/1/](http://jsfiddle.net/vjmVc/1/)

Also keep in mind that when people have a small screen the two element may overlap at some point using this solution.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:21:38.147

显示：内联；浮动：对；n div 内的元素，但这样你就需要颠倒文本的顺序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T15:22:45.737

首先，添加适当的 DOCTYPE。您的页面正在以怪癖模式加载。

```
<!DOCTYPE html> 
```

或者

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

对于文本

```
#footer
{
text-align: right;
} 
```

对于对齐

```
#all
{
margin: 0 auto;
} 
```

编辑

```
#footer
{
position: relative;
}

#modified
{
position: absolute;
top: 0;
right: 0;
} 
```

# regex - 用于获取匹配的正则表达式的一部分的 awk 语法

> ID：12999103
> 
> 赞同：7
> 
> 时间：2012-10-21T15:15:34.100
> 
> 标签：regex, perl, awk, match

我相信这很容易，所以很抱歉。在 Perl 我可能会做类似的事情

```
my $str = "foo=23";
$str ~= m/foo=([0-9]+)/
print "foo value is " . $1 
```

即在正则表达式中使用括号可以稍后将匹配的部分引用为$1、$2 等。awk 中的等价物是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T18:12:39.733

同样使用 GNU awk，使用该[`match()`函数](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html#String-Functions)并将括号组捕获到一个数组中。

```
str = "foo=23"
match(str, /foo=([0-9]+)/, ary)
print "foo value is " ary[1] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T16:04:11.573

在 GNU awk 中是：

```
$ cat tst.awk
BEGIN {
   str = "foo=23"
   val = gensub(/foo=([0-9]+)/,"\\1","",str)
   print "foo value is " val
}
$
$ gawk -f tst.awk
foo value is 23 
```

在其他 awk 中，您需要使用 [g]sub() 和/或 match() 和/或 substr() ，具体取决于您要/不想匹配的其他内容。例如：

```
$ cat tst.awk
BEGIN {
   str = "foo=23"
   val = substr(str,match(str,/foo=[0-9]+/)+length("foo="))
   print "foo value is " val
}
$ awk -f tst.awk
foo value is 23 
```

如果目标模式不在行尾，则在 substr() 调用中需要第三个参数 ',RLENGTH-length("foo=")'。如果您愿意，可以将“foo=”设置为变量，并且如果它本身可以包含 RE，则需要执行更多步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T15:26:13.637

为什么不直接使用`sed`？

```
echo 'foo=23' | sed 's/foo=\([0-9]\+\)/foo value is \1/' 
```

**编辑：**如果你真的需要使用`awk`，你必须使用`sub`or `gsub`。[看这里。](https://stackoverflow.com/questions/4931034/awk-stumper-regex-substitution-within-a-field)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-07T11:47:38.500

聚会可能有点晚了，但是将“=”视为字段分隔符怎么样？对我来说是一种享受！

```
echo foo=23 | awk -F= '{ print $1 " value is " $2 }' 
```

# sql-server - 如何使用 N 在 SQL Server 中插入多语言数据？

> ID：12999108
> 
> 赞同：4
> 
> 时间：2012-10-21T15:15:50.550
> 
> 标签：sql-server, sql-server-2008, insert, updates, multilingual

我知道通过使用`N'...'`我们可以将多语言数据插入 SQL Server。但我不知道如何将它与参数一起使用。请帮我..

我的代码是：

```
Alter proc proc_T_NewsAddUpdate
(  
    @Id bigint,  
    @Title nvarchar(500),
    @Description nvarchar(1000),  
    @image nvarchar(200),  
    @DateOfNews datetime,  
    @CreatedBy bigint,  
    @ModifiedBy bigint,  
    @IsVisible int,  
    @IsDeleted int  
)  
as  
    if exists(select 1 from T_LatestNews where ID=@Id)  
    begin  
        Update t_LatestNews 
        set Titlle = N@Title, 
            DesCription = N@Description,
            Image = N@image,
            dateOfnews = @DateOfNews,
            modifiedDate = GETDATE(),
            ModifiedBy = @ModifiedBy,
            Isvisible = @IsVisible,
            isdeleted = @IsDeleted 
         where 
            ID=@Id  

        select 1  
    end  
    else  
    begin  
        insert into t_latestnews (Titlle, Description, Image, dateofnews, CreatedDate, ModifiedDate, CreatedBy, ModifiedBy, isvisible, isdeleted) 
        values(@Title, @Description, @image, @DateOfNews, GETDATE(), GETDATE(), @CreatedBy, @ModifiedBy, @IsVisible, @IsDeleted)  

        select 1  
    end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-02T10:34:32.293

最简单的解决方案是将数据作为 NVARCHAR 数据类型插入表中，如下所示。

--创建表

```
CREATE TABLE TBL_LANG

(

LNAME VARCHAR(50),

LTXT NVARCHAR(100)

) 
```

**– 插入不同语言的“Hello World”**

```
INSERT INTO TBL_LANG

VALUES ('English',N'Hello World')

INSERT INTO TBL_LANG

VALUES ('Hindi',N'हैलो दुनिया')

INSERT INTO TBL_LANG

VALUES ('Chines',N'你好世界')

INSERT INTO TBL_LANG

VALUES ('Urdu',N'ہیلو دنیا') 
```

--查看表数据

```
SELECT * FROM TBL_LANG 
```

[![在此处输入图像描述](../Images/7ba8a4dc41560e4aff9d40ea905a22de.png)](https://i.stack.imgur.com/CuMPE.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:53:39.153

修改您的存储过程，如下所示：

```
Alter proc proc_T_NewsAddUpdate
(  
    @Id bigint,  
    @Title nvarchar(500),
    @Description nvarchar(1000),  
    @image nvarchar(200),  
    @DateOfNews datetime,  
    @CreatedBy bigint,  
    @ModifiedBy bigint,  
    @IsVisible int,  
    @IsDeleted int  
)  
as  
    if exists(select 1 from T_LatestNews where ID=@Id)  
    begin  
        Update t_LatestNews set Titlle=@Title,DesCription=@Description,Image=@image,dateOfnews=@DateOfNews,modifiedDate=GETDATE(),ModifiedBy=@ModifiedBy,Isvisible=@IsVisible,isdeleted=@IsDeleted where ID=@Id  
        select 1  
    end  
    else  
    begin  
        insert into t_latestnews (Titlle,Description,Image,dateofnews,CreatedDate,ModifiedDate,CreatedBy,ModifiedBy,isvisible,isdeleted) values(@Title,@Description,  
        @image,@DateOfNews,GETDATE(),GETDATE(),@CreatedBy,@ModifiedBy,@IsVisible,@IsDeleted)  
        select 1  
    end 
```

然后像这样调用它：

```
exec proc_T_NewsAddUpdate
    @Id = 1, 
    @Title = N'Sample Title',
    @Description =  N'Sample Description',
    @image =  N'Sample Image',
    @DateOfNews = '1/1/2000',
    @CreatedBy = 1,
    @ModifiedBy = 1,
    @IsVisible = 1,
    @IsDeleted = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T15:24:44.970

使用 nvarchar 代替 varchar 类型。

# python - Python函数调用作为返回值范围

> ID：12999110
> 
> 赞同：0
> 
> 时间：2012-10-21T15:15:59.310
> 
> 标签：python

```
def biggest(aDict):
    if aDict.values() == []  :
        return None

    lengths =[]
    for e in aDict:
        lengths.append(len(aDict[e]))

    return max(lenghts) 
```

`biggest({'U': []})`或其他任何东西都会产生错误：

```
NameError: global name 'lenghts' is not defined 
```

长度是在我的函数中定义的，所以你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:07:13.490

Python解释器在封闭范围内寻找一个变量 - 当它没有找到本地时 - 直到它到达全局范围。

未能找到**长度**- 由于拼写错误，它应该是**长度**- 它开始在全局范围内寻找它。如果找不到它，它会报告在全局范围内未找到它 - 这意味着它也未能在本地范围内找到它。

这里更紧凑 - 更不容易出错（更少的变量拼写错误） - 你的函数变体：

```
def biggest(aDict):
    if not aDict:
        return None
    return max(len(val) for val in aDict.values()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:17:31.547

因为你有`return max(lenghts)`并且你的变量被调用`lengths`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T15:18:26.783

这只是一个拼写错误。

`lengths`并且`lenghts`是不同的。

# html - 用于 css 布局的流畅和响应式站点计算

> ID：12999111
> 
> 赞同：1
> 
> 时间：2012-10-21T15:16:11.270
> 
> 标签：html, css, responsive-design, fluid-layout

如果我正在创建一个响应式网站，大多数文本都会给出初始像素大小。IE：

```
Width = 940px
Target = 200px
target / Context = Result : 200 / 940 = etc etc 
```

一切都很好。

问题是，如果我也想要一个流畅的网站（增加非基于矢量的文本大小），我不确定人们是如何从初始宽度计算的。

我的工作是基于我已将正文中的字体大小重置为`1em`HTML 标记中的各种其他修复等。我可以猜测页面宽度`940px`可能类似于`60em`，但这看起来确实很模糊。

是否还有其他计算，或者我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:39:58.527

在这些情况下可以使用百分比。

例如：200/940 ~= 21%；

并将其用作：

```
.a-class {
    width: 21%;
} 
```

或者您可以参考@media 查询。您可以为不同的文档尺寸定义不同的宽度。[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# javascript - html中的多个javascript

> ID：12999117
> 
> 赞同：0
> 
> 时间：2012-10-21T15:16:47.867
> 
> 标签：javascript, jquery, html

我在 HTML 页面中加载多个 javascript 时遇到问题。这是 txtlzr 和旋转效果的代码。. 微调器函数名称为“rotation”，txtlzr 函数名称为“rr”

```
 <html>
 <head>
   <title></title>
   <script src="http://code.jquery.com/jquery.min.js"></script>
   <script src="http://raw.github.com/krisk/textualizer/master/textualizer.min.js"></script>
   <style type="text/css">
     #txtlzr { font-size: 150px; width: 960px; height:250px; }
    </style>
 </head>
 <body onload: "rr(); rotation()";><div id="txtlzr"> </div> </body>

    <script>
    $(function rr() {
             var list = ['Text 1', 'Hello World', 'Screencasts'];
        var options = {
            duration: 1000,          // Time (ms) each blurb will remain on screen
            rearrangeDuration: 1000, // Time (ms) a character takes to reach its position
            effect: 'random',        // Animation effect the characters use to appear
            //centered: true           // Centers the text relative to its container
        }
        var txt = $('#txtlzr');
        txt.textualizer(list, options); // textualize it!
        txt.textualizer('start'); // start
    });

    </script>
    <img src="https://www.google.com/images/srpr/logo3w.png" id="image">​
    <script  type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
    </script>
    <script type="text/javascript"        src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
    <script type="text/javascript">
    function rotation() {
        $("#image").rotate({
            angle: 0,
            animateTo: 360,
            callback: rotation,
            easing: function (x, t, b, c, d) { // t: current time, b: begInnIng value, c:      change In value, d: duration
                return c * (t / d) + b;
            }
        });
    };
    $(document).ready(function () {
        rotation();
    })
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:26:49.330

巨大的混乱

1.  把脚本放在头上
2.  加载 jQuery 一次
3.  rr 不是一个函数，而是 jQuery 和纯 JS 的混合体
4.  HTML 永远不会验证
5.  当你有 document.ready 时不要使用 body onload （如果你没有 jQuery，甚至使用 window.onload 代替

试试这个[演示](http://jsfiddle.net/mplungjan/gTRVB/)

```
<html>
  <head>
    <title></title>
      <script src="http://code.jquery.com/jquery.min.js"></script>
      <script src="http://raw.github.com/krisk/textualizer/master/textualizer.min.js"></script>
      <script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
      <script>
        function rotation() {
          $("#image").rotate({
            angle: 0,
            animateTo: 360,
            callback: rotation,
            easing: function (x, t, b, c, d) { // t: current time, b: begInnIng value, c:      change In value, d: duration
                return c * (t / d) + b;
            }
          });
        };

        function rr() {
          var list = ['Text 1', 'Hello World', 'Screencasts'];
          var options = {
            duration: 1000,          // Time (ms) each blurb will remain on screen
            rearrangeDuration: 1000, // Time (ms) a character takes to reach its position
            effect: 'random',        // Animation effect the characters use to appear
            //centered: true           // Centers the text relative to its container
          }
          var txt = $('#txtlzr');
          txt.textualizer(list, options); // textualize it!
          txt.textualizer('start'); // start
        };
        $(document).ready(function () {
          rr();
          rotation();
        });

      </script>
      <style type="text/css">
       #txtlzr { font-size: 150px; width: 960px; height:250px; }
      </style>
    </head>
    <body>
      <div id="txtlzr"> </div> 
      <img src="https://www.google.com/images/srpr/logo3w.png" id="image">​
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:27:04.263

如果您使用的是 jquery，最好使用 this 而不是`onload`属性：

```
$(document).ready(function(){
    //your code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:29:50.407

您过早结束正文元素，因此脚本不在正文中。我不确定所有不同的浏览器对此有何反应，但它们可能会忽略脚本，或者在加载脚本之前运行 load 事件。

无论哪种方式，移动 body 元素内的所有内容，它应该可以工作。

# java - Java：for循环不能正常工作

> ID：12999118
> 
> 赞同：3
> 
> 时间：2012-10-21T15:16:53.067
> 
> 标签：java, for-loop

大家好，我是Java的初学者，我的英语不好，希望你能理解我的问题：

```
public static void main(String[] args) {

    int i, a, b, c, d, yil = 1999, rt = 0;

    do{
            //loop searching for 1976
            for( i = 1900; i < 2000; i++){
            //separate "i" to the digits
            a = i / 1000;
            b = i % 1000 / 100;
            c = i % 1000 % 100 / 10;
            d = i % 1000 % 100 % 10;
            rt = a + b + c + d;
            }}
            //while rt=23 and i=1976 equation will be correct then exit the loop and print the 1976.
            while( rt == yil - i );
        System.out.println("Yıl = " + i );

} 
```

但是当我运行程序时，它总是显示 2000 而不是 1976。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:20:20.340

您混乱的增量可能会隐藏它，但您无法摆脱`for`循环。它总是走到最后，那就是`i=2000`。

```
for( i = 1900; i < 2000; i++){
   ... // no break in there
}
...
System.out.println("Yıl = " + i ); 
```

在您的情况下没有理由有两个循环。看来你想要的是

```
 int i, a, b, c, d, yil = 1999, rt = 0;
        //loop searching for 1976
        for( i = 1900; i < 2000; i++){
            //separate "i" to the digits
            a = i / 1000;
            b = i % 1000 / 100;
            c = i % 1000 % 100 / 10;
            d = i % 1000 % 100 % 10;
            rt = a + b + c + d;
            if (rt==yil-i) break;
        }
        System.out.println("Yıl = " + i );  } 
```

这输出

```
Yıl = 1976 
```

# iphone - Box2d 身体失去了所有的动力/惯性？

> ID：12999120
> 
> 赞同：0
> 
> 时间：2012-10-21T15:17:18.183
> 
> 标签：iphone, ios, cocos2d-iphone, box2d

我正在 iOS 上开发一个横向卷轴，如果角色跳跃，我会对 box2d 身体施加一个冲动，然后让 interia 完成其余的工作（这是一款低重力游戏，所以有时角色会在空中待一会儿）。我的问题是，如果在 ios 设备上收到任何类型的通知，即短信或邮件警报，如果它在空中，身体就会像石头一样停下来。它失去了所有的动量/惯性，就像它从来没有移动过一样。谁能帮帮我。非常感谢任何想法或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:30:33.630

我有一个类似的问题。我假设您正在暂停/恢复使用 CCDirector。暂停后恢复时检查更新方法的 dt。对我来说，我在暂停，然后回来，dt 很大，比如 30 秒，所以它把这个值提供给物理引擎，当然物体到那时已经滚动停止了。

我解决的方法是 hack-ish，我只是设置了一个 if 语句，如果 dt 大于一秒则返回。然后下次调用 update 时，它​​是一个正常的值，例如 1/30 秒，一切都恢复正常。

# ruby-on-rails - 评估 nil 时发生错误

> ID：12999128
> 
> 赞同：-1
> 
> 时间：2012-10-21T15:17:52.497
> 
> 标签：ruby-on-rails

这是代码

```
if !params[:ratings].nil? 
    params[:ratings].each_key do |r|
        @selected_ratings << r
        @movies << Movie.where('rating = :rating', :rating => r)
        @sort = params[:sort]
      end 
elsif
    @selected_ratings = @all_ratings
    @movies = Movie.order(@sort)
    @sort = params[:sort]
end 
```

这是错误

```
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.<< 
```

编辑：问题是我想连接我的实例变量电影中的值，为此我试图使用“<<”。当我使用“=”而不是“<<”时，它只根据最后的评分值考虑电影。

编辑 2（说明）：

也许我应该更多地解释一下这个问题。所以问题是我在数据库中有一个电影表，其中包含标题、评级等属性。现在我有一个评级复选框，如 ['G'、'PG'、'R']。当用户选择一个或多个这些复选框时，我的参数[评级]中有这些复选框。例如，如果他选择“R”和“G”，那么我的参数 [rating] 将是 ['G', 'R']。现在，我想做的就是在我的@movies 中只包含那些具有以下评级的电影，为此我正在尝试使用

```
 @movies << Movie.where('rating = :rating', :rating => r) 
```

但它失败了我试图使用

```
 @movies = Movie.where('rating = :rating', :rating => r) 
```

但在这种情况下，我选择了相对于一个特定评级的电影，例如只显示“R”评级的电影。

我也不能做@movies = []，因为我有带有标题等属性的电影......

还要添加一件事，我是网络和数据库相关内容的新手 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:41:30.207

也许你必须在添加一些东西之前初始化每个数组。

# android - 创建滑动菜单

> ID：12999131
> 
> 赞同：0
> 
> 时间：2012-10-21T15:18:31.447
> 
> 标签：android, android-layout

我正在尝试为我的 android 应用程序创建一个滑动菜单。好吧，在这一刻我不太成功。

我正在尝试做这样的事情：

![在此处输入图像描述](../Images/69f2eb328d71d6a6f216ed219d2199c6.png)

如果我按下按钮 A，在选项视图中将出现 A 的选项，如果我按下 B，同样的事情会发生，C...

你能帮助我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:30:42.503

![在此处输入图像描述](../Images/5633602f045ee66c2d69988bb72d1df8.png)

看到这个：如何在 Android 中创建 QuickAction 对话框：[http ://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:20:49.107

简单的滑动菜单：

```
<HorizontalScrollView
    android:id="@+id/horizontalScrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="25"
            android:adjustViewBounds="true"
            android:text="A" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="25"
            android:adjustViewBounds="true"
            android:text="B" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="25"
            android:adjustViewBounds="true"
            android:text="C" />

        <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="25"
            android:adjustViewBounds="true"
            android:text="D" />

    </LinearLayout>
</HorizontalScrollView> 
```

现在在您的 java 代码中设置这些按钮的 onclick 侦听器。如果要显示弹出窗口，请参阅[如何在 android 中创建弹出窗口？](https://stackoverflow.com/questions/7498605/how-to-create-a-popup-window-in-android)

# ios - 如何让 UIPickerview 自动更新 UILabel

> ID：12999137
> 
> 赞同：4
> 
> 时间：2012-10-21T15:19:40.673
> 
> 标签：ios, xcode, uitextfield, uilabel, uipickerview

我有一个转换器应用程序，我希望它在我将数字（应该转换的）输入到文本字段时更新标签。我希望它自动更新，所以我不需要再次选择轮子上的单元来更新它。

![在此处输入图像描述](../Images/da572745ec29ba66d7bbd45261fd945b.png)

![在此处输入图像描述](../Images/d0db3b1b9fe618275fd3be7c746140a7.png)

这是我的代码：

```
- (void)viewDidLoad
{
   [super viewDidLoad];
  {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    _convertFrom = @[@"MTPA", @"MMcf/day",
    @"Mill.Sm3/day", @"MMBTU", @"Boe/day"];

    _convertRates = @[ @1.0f, @133.4246575f, @3.780821918f,
    @142465.7534f, @23780.8f];

    _convertTo = @[@"MTPA", @"MMcf/day",
    @"Mill.Sm3/day", @"MMBTU", @"Boe/day"];

    _convertRates = @[ @1.0f, @133.4246575f, @3.780821918f,
    @142465.7534f, @23780.8f];
}
} 
```

我应该在这里做点什么吗？

```
- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning]; 
```

}

```
-(IBAction)textFieldReturn:(id)sender
{
    [sender resignFirstResponder];
}
-(IBAction)backgroundTouched:(id)sender
{
    [inputText resignFirstResponder];
}

#pragma mark -
#pragma mark PickerView DataSource

 - (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
return 2;
}

 - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:      (NSInteger)component
  {
 if (component == 0)  {
    return [_convertFrom count];
}
return [_convertTo count];
}

 - (NSString *) pickerView: (UIPickerView *)pickerView
          titleForRow:(NSInteger)row
         forComponent:(NSInteger)component
{
if (component == 0) {
    return [_convertFrom objectAtIndex:row];
}
return [_convertTo objectAtIndex:row];
}

 #pragma mark -
 #pragma mark PickerView Delegate
 -(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
   inComponent:(NSInteger)component

 {
 float convertFrom = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0]]     floatValue];
 float convertTo = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1]] floatValue];

float input = [inputText.text floatValue];
float to = convertTo;
float from = convertFrom;
float convertValue = input;
float relative = to / from;
float result = relative * convertValue;
NSString *convertFromName = [_convertFrom objectAtIndex:[pickerView selectedRowInComponent:0]];
NSString *convertToName = [_convertFrom objectAtIndex:[pickerView selectedRowInComponent:1]];

NSString *resultString = [[NSString alloc]initWithFormat:
                          @" %.4f %@ = %.4f %@",convertValue, convertFromName, result, convertToName];
resultLabel.text = resultString; 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:06:13.170

您的问题与选择器视图无关。您想监听文本字段的更改，并根据输入文本字段的最新文本更新转换和标签。

1.  设置一个在文本字段值更改时调用的方法。
2.  选择器视图委托方法中计算转换和更新标签的所有代码都需要放在另一个可以从两个地方调用的方法中。
3.  在对文本字段中的更改做出反应的新方法中，调用您刚刚创建的方法来执行转换并更新标签。

所以此时你的选择器视图委托方法和你的文本字段更改方法都调用从选择器和文本字段中获取转换的方法，然后进行转换，最后更新标签。

编辑：更多细节

重构当前的选取器视图委托方法，如下所示：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    [self updateConversionLabel];
}

- (void)updateConversionLabel {
    float convertFrom = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0]] floatValue];
    float convertTo = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1]] floatValue];

    float input = [inputText.text floatValue];
    float to = convertTo;
    float from = convertFrom;
    float convertValue = input;
    float relative = to / from;
    float result = relative * convertValue;
    NSString *convertFromName = [_convertFrom objectAtIndex:[pickerView selectedRowInComponent:0]];
    NSString *convertToName = [_convertFrom objectAtIndex:[pickerView selectedRowInComponent:1]];

    NSString *resultString = [[NSString alloc]initWithFormat:
        @" %.4f %@ = %.4f %@",convertValue, convertFromName, result, convertToName];
    resultLabel.text = resultString; 
} 
```

然后，您需要创建一个方法来处理对文本字段的更改：

```
- (void)textFieldChanged:(UITextField *)textField {
    [self updateConversionLabel];
} 
```

现在在 IB 中，将该方法连接到文本字段`textFieldChanged:`的“值更改”事件。`inputText`我不使用 IB，所以我不知道这样做的确切术语。

# ios - 如何删除我通过代码创建的 UIImageView？

> ID：12999145
> 
> 赞同：0
> 
> 时间：2012-10-21T15:20:36.400
> 
> 标签：ios, ipad, uiimageview, uiimage

我正在为 iPad 开发 iOs 应用程序。我想删除由代码创建的两个对象（UIImage 和 UIImageView）。

```
UIImage *imatgetemporal = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
[popover dismissPopoverAnimated:YES];

UIImageView *img = [[UIImageView alloc] initWithImage:imatgetemporal]; 
```

我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:47:37.697

删除内容的一种简单方法是将它们设置为`nil`. 所以你可能有

```
img = nil; 
```

您可以保持 UIImageView 处于活动状态，但只需通过`image`使用新图像更新 UIImageView 的属性来更改它显示的图像。

当您从超级视图中删除一个项目时，您只是将其从屏幕上取下。它仍在记忆中。

从您的代码中我不清楚的是您如何持久化对象。我假设您正在`UIImageView`某处设置属性。如果是这种情况，我希望您上面的代码看起来像（例如，我使用了一个名为 mainImageView 的属性）

```
UIImageView *img = [[UIImageView alloc] initWithImage:imatgetemporal];
[self setMainImageView:img]; 
```

或者您甚至可以重用`UIImageView`您每次拥有的属性（假设您一次只想显示一个图像），然后用新图像替换该图像。

```
UIImage *imatgetemporal = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
[popover dismissPopoverAnimated:YES];

[[self mainImageView] setImage:imatgetemporal]; 
```

# android - 根据字符串数组选择数据库中的特定行

> ID：12999146
> 
> 赞同：0
> 
> 时间：2012-10-21T15:20:43.520
> 
> 标签：android, android-sqlite, android-cursor

我的应用程序是一个琐事应用程序，我从数据库中获取问题。这个应用程序中也有一些主题，我想通过在数据库中设置一个专门用于保存与问题所属类别相对应的值的列来实现这一点。我试图导入布尔值数组列表的静态数组列表。然后我想遍历它们以根据值是否为真来创建数组（我的应用程序允许选择多个类别）。问题是将它（创建的包含主题的数组列表）合并到我的查询语句中。我想目标是这样的——如果第二列包含这些值，然后将它们添加到查询中——我认为这可能是直接 SQL 原始查询语句的孩子游戏，但它看起来令人生畏，所以我

```
 public Cursor getQuestions() {

    List<String> topicsList = new ArrayList<String>(39);
    for(int i = 0; i < child_check_states.size(); i++) {
        for(int j = 0; j < child_check_states.get(i).size(); j++) {
            if (child_check_states.get(i).get(j) == true) {
                topicsList.add(i+""+j+"");
            }
        }
    }
    Log.d("test", topicsList.toString());

    SQLiteDatabase db = getReadableDatabase();
    Cursor cursor = db.query(DB_NAME, null, null, null, null, null, "random()");
    return cursor;
} 
```

这是题外话，不需要回答，但是这样随机化行可能存在性能问题吗？我相信我读过一次更好地实现一个使用两个游标来实现这一点的方法。我的应用程序只有 4 行用于测试，所以我没有注意到任何东西，但最终我希望有数千行。也许成千上万。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:41:58.713

只需使用“IN”关键字，例如

```
SELECT * from my_table where category IN (category_1, category_3, category_4) 
```

或者，在您的示例中

```
public Cursor getQuestions() {

List<String> topicsList = new ArrayList<String>(39);
for(int i = 0; i < child_check_states.size(); i++) {
    for(int j = 0; j < child_check_states.get(i).size(); j++) {
        if (child_check_states.get(i).get(j) == true) {
            topicsList.add(i+""+j+"");
        }
    }
}
Log.d("test", topicsList.toString());

String replacementString = "(?";
for(int i = 1 ; i < topicsList.size(); i++){
    replacementString += ", ?";
}

replacementString += ")";

SQLiteDatabase db = getReadableDatabase();
Cursor cursor = db.query(DB_NAME, <your_columns>, <category_column> IN + replacementString, topicsList.toArray(new String[topicsList.size()]), null, null, "random()");
return cursor; 
```

# button - Metro 应用程序的按钮图像幻灯片

> ID：12999147
> 
> 赞同：0
> 
> 时间：2012-10-21T15:20:53.250
> 
> 标签：button, windows-8, microsoft-metro, slideshow, photos

我正在尝试创建一个按钮，该按钮具有多个可以滚动的图像，就像在 Windows 8 照片应用程序中一样。（编辑）表示单个按钮。就像每个按钮如何滚动浏览它链接到的相册中的图像一样。（编辑）但我的运气为零。任何帮助将不胜感激，因为我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:39:06.557

我认为您指的是翻转视图

这是有关如何为 javascript 和 html 制作翻转视图的官方文档

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465425.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465425.aspx)

这是 VB 的 [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh781233(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh781233(v=win.10).aspx)

如果您有更多问题，请发表评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:06:06.803

我知道如何在不编写代码的情况下做到这一点。我不熟悉代码。但我做了一个像你说的那样：按钮是一个幻灯片，每张图片都链接到不同的页面。如果你不介意花一些时间，你可以试试 Photo Flash Maker。这是我使用的程序。我相信它可以帮助你。如果您对此有任何疑问，您甚至可以给我发电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:48:09.087

尝试从这个开始，然后随心所欲地进行更改..

```
<ScrollViewer>
    <StackPanel>
        <Image   />
        <Image   />
        <Image   />
        <Image   />
    </StackPanel>
</ScrollViewer> 
```

有关与它们相关的详细属性和事件，请参阅 MSDN 站点上的 Scrollviewer、StackPanel 和 Image 标签。

# iphone - 如何从个人详细信息返回 ABPeoplePicker 中的联系人列表？

> ID：12999153
> 
> 赞同：0
> 
> 时间：2012-10-21T15:21:40.680
> 
> 标签：iphone, objective-c, abpeoplepickerview

我有一个**ABPeoplePickerNavigationController**，我想从联系人页面（看图片）添加一个返回按钮到联系人列表。

![在此处输入图像描述](../Images/f6f39b29e73d3ea1fdee7583baca6498.png)

我找到并修复了它 - 任何需要的人的答案都在我的答案中的代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:15:43.513

```
- (void)inviteFromAddresBook{

    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;

    // Display only a person's phone, email, and birthdate
    NSArray *displayedItems = [NSArray arrayWithObjects:[NSNumber numberWithInt:kABPersonPhoneProperty],
                               [NSNumber numberWithInt:kABPersonEmailProperty], nil];

    picker.displayedProperties = displayedItems;
    // Show the picker
    [self presentModalViewController:picker animated:YES];

}

#pragma mark ABPeoplePickerNavigationControllerDelegate methods
// Displays the information of a selected person
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person{

    return YES;
}

// Does not allow users to perform default actions such as dialing a phone number, when they select a person property.
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
                                property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{
    if (property == kABPersonPhoneProperty) {
        ABMultiValueRef phone = ABRecordCopyValue(person, property);
        CFStringRef selectedNumber = ABMultiValueCopyValueAtIndex(phone, identifier);

        //NSLog(@"selected Number: %@",selectedNumber);

        smsPicker = [[MFMessageComposeViewController alloc] init];
        smsPicker.messageComposeDelegate = self;
        smsPicker.recipients = [NSArray arrayWithObjects:[NSString stringWithFormat:@"%@",selectedNumber], nil];
        smsPicker.body = globalParams.inviteSMS;
        [[smsPicker navigationBar]setBackgroundImage:[UIImage imageNamed:@"Nav_clean"] forBarMetrics:UIBarMetricsDefault];

        [smsPicker.navigationController setDelegate:self];
    }
    else if(property == kABPersonEmailProperty){
        ABMultiValueRef email = ABRecordCopyValue(person, property);
        CFStringRef emailAddress = ABMultiValueCopyValueAtIndex(email, identifier);

        NSString *urlString = mailto:a@a.com?subject=New&body=TestNew;
        NSURL *mailURL = [NSURL URLWithString: urlString];
        [[UIApplication sharedApplication] openURL: mailURL];
    }

    [self dismissModalViewControllerAnimated:YES];
    return NO;
}

// Dismisses the people picker and shows the application when users tap Cancel.
- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker;{
    [self dismissModalViewControllerAnimated:YES];
} 
```

# java - 在java中检查文本文件格式

> ID：12999158
> 
> 赞同：3
> 
> 时间：2012-10-21T15:22:19.020
> 
> 标签：java

我有代码可以逐行检查文本文件，但我不确定如何检查特定格式。如果文本文件采用以下格式，则打印出内容，否则显示一条消息，提示“文件不正确”。

的第一行应该以 S 开头，每一行由任何大写字母组成，后跟一个冒号，而不是任何字母、数字或 e。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:27:27.410

您可以使用[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)轻松验证格式：

```
//first line validator:
String reg1 = "S:[A-Z01e]";
//next lines validator:
String reg2 = "V:[A-Z01e]?[A-Z01e]?[A-Z01e]";

//examples/test cases:
System.out.println("S:1".matches(reg1));
System.out.println("S:3".matches(reg1));
System.out.println("S:11".matches(reg1));

System.out.println("V:1e0".matches(reg2));
System.out.println("V:1e01".matches(reg2));
System.out.println("V:1e3".matches(reg2)); 
```

正则表达式是：首先`S`或`V`分别，然后`:`，然后是 AZ ot 0 或 1 或 e 之间的任何字符。 表示 0 或 1 重复，因此
表示1-3 个字符，每个 AZ 或 0 或 1 或 e。`?``[A-Z01e]?[A-Z01e]?[A-Z01e]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:27:16.687

我会`charAt(1)`在每一行上使用。

```
scan.nextLine();
String line = scanner.next();
if(line.charAt(0).equals("S")) {

} else {

} 
```

我很确定这就是它的工作原理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:27:38.147

您可以使用正则表达式来实现这一点：[Regex Trails](http://docs.oracle.com/javase/tutorial/essential/regex)

例如，要检查`V:xxx`，您可以使用：

```
V:[A-Z01e]{3} 
```

花括号中的数字是你想要多少个x。

# python - Python中的随机数

> ID：12999161
> 
> 赞同：0
> 
> 时间：2012-10-21T15:22:41.970
> 
> 标签：python, random

> **可能重复：**
> [字符串和整数连接](https://stackoverflow.com/questions/2847386/string-and-integer-concatenation)

我创建了范围从 -90 到 90 的列表。现在我需要让这个列表中的随机数出现在我的问题中。任何人都可以帮助我吗？这是我到目前为止的地方：

```
latitude = [n for n in range(-90,90)]
record = latitude[random.randrange(-90,90)]
question =['lati','country']
questions = random.choice(question)

if questions == 'lati':
    resp = raw_input('Is Wroclaw north of ' + record) 
```

当我尝试运行它时，我收到一条错误消息，说我无法连接“str”和“int”对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:26:52.970

您不能连接字符串和数字。显示它的最佳方式是使用格式字符串，如下所示：

```
resp = raw_input('Is Wroclaw north of %d' % record) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:24:03.740

你需要在`str()`这里使用，因为`record`是一个整数，所以你应该在连接之前先将它转换为字符串：

```
resp = raw_input('Is Wroclaw north of ' + str(record)) 
```

或使用字符串格式：

```
raw_input('Is Wroclaw north of {0}'.format(record)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:28:24.130

使用`record = random.randrange(-90,90)`没有列表。如果你真的需要一个列表，或者下一个 contrustion。

```
random.choice([1,2,3]) 
```

# android - Eclipse 无法识别三星 s5660

> ID：12999163
> 
> 赞同：1
> 
> 时间：2012-10-21T15:22:45.837
> 
> 标签：android, linux, eclipse, adb

我在 Eclipse 中使用 Android 设备选择器，但选择器不是我的三星 s5660 设备。这是手机、linux 还是 Eclipse 的问题？我正在使用 Ubuntu，如果这很重要的话。

![在此处输入图像描述](../Images/e9da518742d9a646d95c635038f82ae1.png)

解决了。

我在 /etc/udev/rules.d 中为 udev 创建规则。在规则中，我写了 "SUBSYSTEM=="usb", SYSFS{idVendor}=="04e8:689e", MODE="0666"" 其中 SYSFS{idVendor} 是您的 id 设备（参见 lsusb）。

然后在控制台

sudo adb kill-server, sudo adb start-server, adb devices

# ruby-on-rails - 未定义的方法

> ID：12999166
> 
> 赞同：0
> 
> 时间：2012-10-21T15:23:27.343
> 
> 标签：ruby-on-rails, activeadmin

我有这门课。

用户：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name
  has_many :berichten
end 
```

类别：

```
class Category < ActiveRecord::Base
  attr_accessible :name
  has_many :berichten
end 
```

贝里希滕：

```
class Berichten < ActiveRecord::Base
  attr_accessible :bericht, :user
  belongs_to :user
  belongs_to :category
end 
```

之后我创建了项目。

但是当我去

```
http://localhost:3000/admin/berichtens 
```

我看到这条消息出现：

```
undefined method `user_id_contains' for #<MetaSearch::Searches::Berichten:0x007f72300bc8f0> 
```

那可能是因为 berichten 是一个嵌套路由，看起来像这样：

```
Tamara::Application.routes.draw do
  ActiveAdmin.routes(self)

  devise_for :admin_users, ActiveAdmin::Devise.config

  resources  :users

  resources :category do 
     resources :berichten
  end 
 end 
```

如何解决这个问题？

罗洛夫

编辑 1：您可以在这里找到整个源代码树：[https ://github.com/roelof1967/tamara_site/tree/admin_section](https://github.com/roelof1967/tamara_site/tree/admin_section)

编辑 2：这里是开发日志：[https ://gist.github.com/3933601](https://gist.github.com/3933601)

编辑 3：这里是控制器：[https ://gist.github.com/3937461](https://gist.github.com/3937461)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:39:29.687

由于我是 1 级用户，所以我无法对上述问题发表评论。请也分享您的相关控制器代码。问题出在控制器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:06:19.767

您的 berichtens 表没有 user_id 和 category_id 字段： [https ://github.com/roelof1967/tamara_site/blob/admin_section/db/schema.rb#L49-54](https://github.com/roelof1967/tamara_site/blob/admin_section/db/schema.rb#L49-54)

创建一个迁移文件

```
add_column :berichtens, :user_id, :integer
add_column :berichtens, :category_id, :integer 
```

# java - 在 Itext 中获取 pdf 文件内容

> ID：12999167
> 
> 赞同：0
> 
> 时间：2012-10-21T15:23:32.030
> 
> 标签：java, itext

有没有办法可以将 pdf 文件（“example.pdf”）的内容转换为 IText 对象，如 Paragraph 或 Chunk？

我需要在我正在生成的新 pdf 中使用内容（以及其他文本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:15:04.163

不，至少不容易。

当iText将Chunks和Paragraphs以及所有此类对象放入PDF（或其他PDF创建程序各自的对象）时，“从这里到那里的单词形成一个段落”或“这些单词形成一个章节”的信息通常会丢失。相反，所有剩下的都是多个定位的字母组。（好吧，可以有更多信息，但大多数情况下没有。）

但是，您可以做的是使用例如 iText 解析器包中的类来解析 PDF 的内容，以检索那些定位的字母组并对它们应用一些启发式方法来猜测它们中的哪些构成段落、章节或其他.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:58:56.353

它的 C# 代码，但也应该在 java 上工作。java上的命名空间`iTextSharp.text.pdf.parser;`看起来有点不同，但它必须是`.parse`

```
Rectangle rect = new Rectangle(48.031496063f, 643.307086614f, 198.42519685f + 68.031496063f, 70.866141732f + 663.307086614f);
RenderFilter f = new RegionTextRenderFilter(rect);
List<RenderFilter> fi = new List<RenderFilter>();
fi.Add(f); 
ITextExtractionStrategy strategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(), fi.ToArray()); 
//on java it should be:  ITextExtractionStrategy strategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(), f); 
sw.WriteLine(PdfTextExtractor.GetTextFromPage(reader, 1, strategy)); 
```

对象`rect`是您想要进行 OCR 的区域。所有文本都应放入 txt 文件中，与我在 pdf 上显示的非常相似。有关 iText 上 OCR 的更多信息，您应该查看 Bruno Lowagie 的“iText in action. 2nd edition”中的第 15.3 章。

免责声明。我与布鲁诺无关，只是读他的书。它回答了我很多关于如何使用 iText(Sharp) 的问题。

# c++ - MultiByteToWideChar 用垃圾终止输出缓冲区，但没有报告错误。为什么？

> ID：12999168
> 
> 赞同：1
> 
> 时间：2012-10-21T15:23:57.327
> 
> 标签：c++, c, winapi, unicode, visual-studio-2012

前几天在开发程序时，我不得不将 ASCII 字符串转换为 Unicode 字符串。顺便说一句，我正在使用 Visual Studio 2012 在 Windows 上工作。我注意到 Win32 函数有一些我无法解决的奇怪行为`MultiByteToWideChar`。我写了一些测试代码，如下：

```
int main()
{
    /* Create const test string */
    char str[] = "test string";

    /* Create empty wchar_t buffer to hold Unicode form of above string, and initialize (zero) it */
    wchar_t *buffer = (wchar_t*) LocalAlloc(LMEM_ZEROINIT, sizeof(wchar_t) * strlen(str));

    /* Convert str to Unicode and store in buffer */
    int result = MultiByteToWideChar(CP_UTF8, NULL, str, strlen(str), buffer, strlen(str));
    if (result == 0)
        printf("GetLastError result: %d\n", GetLastError());

    /* Print MultiByteToWideChar result, str's length, and buffer's length */
    printf_s(
        "MultiByteToWideChar result: %d\n"
        "'str' length: %d\n"
        "'buffer' length: %d\n",
        result, strlen(str), wcslen(buffer));

    /* Create a message box to display the Unicode string */
    MessageBoxW(NULL, buffer, L"'buffer' contents", MB_OK);

    /* Also write buffer to file, raw */
    FILE *stream = NULL;
    fopen_s(&stream, "c:\\test.dat", "wb");
    fwrite(buffer, sizeof(wchar_t), wcslen(buffer), stream);
    fclose(stream);

    return 0;
} 
```

正如你所看到的，它只需要一个普通的字符串，创建一个缓冲区来存储 Unicode 字符串，将转换后的 Unicode 字符串放入缓冲区，并显示一些结果，还将缓冲区写入文件。

输出：

```
MultiByteToWideChar result: 11
'str' length: 11
'buffer' length: 16 
```

已经很奇怪了。该函数正在处理 C 字符串中正确数量的字符，但`wcslen`报告输出缓冲区比 C 字符串长！我很确定我也正确分配了缓冲区。

我尝试过使用不同大小的字符串长度，但最后总是有垃圾，并且`wcslen`总是报告缓冲区的长度是 4 的倍数。

最后，对于这个特定的字符串 ( `"test string"`)，这是打印到文件的原始缓冲区：

```
74 00 65 00 73 00 74 00 20 00 73 00 74 00 72 00   t.e.s.t. .s.t.r.
69 00 6E 00 67 00 AB AB AB AB AB AB AB AB EE FE   i.n.g........... 
```

（即 32 个字节或 16 个 Unicode 字符。）

末尾的 10 个字节为 5 个字符；四个[U+ABAB](http://www.fileformat.info/info/unicode/char/abab/index.htm)和一个[U+FEEE](http://www.fileformat.info/info/unicode/char/feee/index.htm)，这对我来说毫无意义。

**每次**我尝试转换字符串时，它们都会以不同的数量出现。

我有点没主意了。任何人？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T15:46:05.803

```
/* Create empty wchar_t buffer to hold Unicode form of above string, and initialize (zero) it */
wchar_t *buffer = (wchar_t*) LocalAlloc(LMEM_ZEROINIT, sizeof(wchar_t) * strlen(str)); 
```

这确实是问题开始的地方。strlen(str) 的值没有意义，尤其是当输入字符串以 utf-8 编码时。你往往会意外地逃脱它，因为它*通常*会创建一个太长的缓冲区，而不是计算一个错误的错误。

但是您也可以通过正确的方式轻松避免该错误。您必须调用该函数*两次*。第一次，为最后一个参数 (cchWideChar) 传递 0。该函数返回所需的缓冲区大小（字符，而不是字节）。现在足以分配缓冲区*并*在您第二次调用该函数时传递正确的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T15:33:31.860

（将评论转换为答案）

您需要在长度中包含尾随空字符（通过`strlen(str) + 1`而不是`strlen(str)`）。另外，你`buffer`的元素太短了——它还需要为结尾的空字符留出空间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T20:28:35.037

正如其他人所评论的那样，您基本上是在滥用`MultiByteToWideChar()`并且`wcslen()`没有正确处理空终止符。如果调用时不包含空终止符`MultiByteToWideChar()`，则不会输出空终止符。

试试这个：

```
int main() 
{ 
    /* Create const test string */ 
    char str[] = "test string"; 
    int strLen = strlen(str);

    WCHAR *buffer = NULL;
    int bufLen = 0;

    /* Calculate buffer size */ 
    int result = MultiByteToWideChar(CP_UTF8, NULL, str, strLen, NULL, 0); 
    if (result > 0)
    {
        /* Create buffer to hold Unicode form of above string */ 
        buffer = (WCHAR*) LocalAlloc(LPTR, sizeof(WCHAR) * (result+1)); 
        if (buffer != NULL)
        { 
            /* Convert str to Unicode and store in buffer */ 
            bufLen = result; 
            result = MultiByteToWideChar(CP_UTF8, NULL, str, strLen+1, buffer, bufLen); 
        }
    }

    if ((!buffer) || (result == 0))
        printf("GetLastError result: %d\n", GetLastError());          

    /* Print MultiByteToWideChar result, str's length, and buffer's length */ 
    printf_s( 
        "MultiByteToWideChar result: %d\n" 
        "'str' length: %d\n" 
        "'buffer' length: %d\n", 
        result, strLen, bufLen); 

    /* Create a message box to display the Unicode string */ 
    MessageBoxW(NULL, buffer, L"'buffer' contents", MB_OK); 

    /* Also write buffer to file, raw */ 
    FILE *stream = NULL; 
    errno_t err = fopen_s(&stream, "c:\\test.dat", "wb");
    if (err == 0)
    { 
        fwrite(buffer, sizeof(WCHAR), bufLen, stream); 
        fclose(stream); 
    }
    else
        printf("Errno result: %d\n", err);

    if (buffer)
        LocalFree(buffer);

    return 0; 
} 
```

由于您使用的是 C++，因此您可以使用`std::string`and`std:wstring`来简化内存管理

```
int main() 
{ 
    /* Create const test string */ 
    std::string str = "test string"; 
    std::wstring buffer;

    /* Calculate buffer size */ 
    int result = MultiByteToWideChar(CP_UTF8, NULL, str.c_str(), str.length(), NULL, 0); 
    if (result > 0)
    {
        /* Allocate buffer to hold Unicode form of above string */ 
        buffer.resize(result); 

        /* Convert str to Unicode and store in buffer */ 
        result = MultiByteToWideChar(CP_UTF8, NULL, str.c_str(), str.length(), &buffer[0], result); 
    }

    if (result == 0)
        printf("GetLastError result: %d\n", GetLastError());          

    /* Print MultiByteToWideChar result, str's length, and buffer's length */ 
    printf_s( 
        "MultiByteToWideChar result: %d\n" 
        "'str' length: %d\n" 
        "'buffer' length: %d\n", 
        result, str.length(), buffer.length()); 

    /* Create a message box to display the Unicode string */ 
    MessageBoxW(NULL, buffer.c_str(), L"'buffer' contents", MB_OK); 

    /* Also write buffer to file, raw */ 
    FILE *stream = NULL; 
    errno_t err = fopen_s(&stream, "c:\\test.dat", "wb");
    if (err == 0)
    { 
        fwrite(buffer.data(), sizeof(std::wstring::value_type), buffer.length(), stream); 
        fclose(stream); 
    }
    else
        printf("Errno result: %d\n", err);

    return 0; 
} 
```

# coldfusion - CFSCRIPT 是否有 CFHTMLHEAD 等效项？

> ID：12999169
> 
> 赞同：4
> 
> 时间：2012-10-21T15:24:03.583
> 
> 标签：coldfusion, coldfusion-10

这个问题是一年多前提出并回答的。从那时起，ColdFusion 10 发布了，但文档很差。这个问题完全是关于 ColdFusion 10 和 CFSCRIPT 的。

我有兴趣仅在 CFSCRIPT 中编写此代码，并且**绝对**不使用 CFHTMLHEAD 标记。

```
<cffunction name="HTMLHead" output="false" returnType="void">
    <cfargument name="text" type="string" required="yes">
    <cfhtmlhead text="#text#">
</cffunction> 
```

这就是我认为它**应该**如何工作

```
// CREATE PAGE TITLE 
function createPageTitle(Content) {
    LOCAL.Content = ARGUMENTS.Content;
    LOCAL.Content = "<title>#LOCAL.Content#</title>";
    LOCAL.Content = htmlhead(LOCAL.Content);
} 
```

我找不到有关如何完成此操作的任何文档，但它似乎是 CFSCRIPT 中首先包含的内容之一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T15:41:12.560

我不认为有。但是你看过 GitHub 上的[CFScript 社区组件](https://github.com/CFCommunity/CFScript-Community-Components)项目吗？那里有一个[cfhtmlhead](https://github.com/CFCommunity/CFScript-Community-Components/blob/master/htmlhead.cfc)的实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T16:02:05.453

CFScript 社区项目的东西会*起作用*，但看看他们是如何实现`<cfhtmlhead>`的，我有点畏缩。

但是我会本着他们正在做的事情的精神去编写一个 UDF，但我会尽可能地模拟如何`<cfhtmlhead>`实现：

```
<cffunction name="cfHtmlHead">
    <cfhtmlhead attributecollection="arguments">
</cffunction> 
```

（我也会用返回类型/访问/输出/`<cfargument>`标签等来处理它）。

我确实为我的编码维护了一个 CFML.cfc，它填补了我运行的旧版本 ColdFusion 的空白，它没有那么多 CFScript 准备就绪，但它只是一个函数库，充满了类似的 UDF。我没有实现需要实例化的单个 CFC，并且调用标记的等效函数的方式与调用标记的方式无关。这让 IMO 感到困惑且设计不佳。

显然，里程各不相同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T17:03:04.487

如果不想回退到使用包含基于标签的功能的 UDF，那么可以`<head>`通过查看输出缓冲区，在请求末尾插入需要进入块的内容，找到结束`</head>`标记，然后将 [stuff] 插入到它之前的缓冲区中。

我*认为*输出缓冲区位于`getPageContext().getOut()`. 那里有一些方法可以对付它。幸运的是，Elliott Sprehn 已经完成了这项工作，Ben Nadel 的博客上有一条关于如何做的评论：[http](http://www.bennadel.com/blog/758-ColdFusion-GetPageContext-Massive-Exploration.htm) ://www.bennadel.com/blog/758-ColdFusion-GetPageContext-Massive-Exploration.htm （向下滚动到[Elliott 的第三条评论](http://www.bennadel.com/blog/758-ColdFusion-GetPageContext-Massive-Exploration.htm#comments_4578)）。

That said... I recommend this for the sake of "proof of concept", and I'd still go with the tag-based UDF wrapper approach.

# php - 在 Symfony 中：如何从过滤器链中排除模块

> ID：12999171
> 
> 赞同：5
> 
> 时间：2012-10-21T15:24:10.370
> 
> 标签：php, symfony1, symfony-1.4, filtering

我有一个自定义过滤器做一些事情。

而且我希望特定模块不包含在过滤器链中。换句话说，对于这个模块，我希望我的自定义过滤器不在这个模块上执行并为其他模块执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:07:15.050

我也使用自定义过滤器，在此过滤器中您可以检索当前模块：

```
<?php

class customFilter extends sfFilter
{
  public function execute ($filterChain)
  {
    $context = $this->getContext();

    if ('moduleName' == $context->getModuleName())
    {
      // jump to the next filter
      return $filterChain->execute();
    }

    // other stuff
  }
} 
```

否则，您还可以在`filters.yml`文件中给出排除模块：

```
customFilter:
  class: customFilter
  param:
    module_excluded: moduleName 
```

在课堂上：

```
<?php

class customFilter extends sfFilter
{
  public function execute ($filterChain)
  {
    $context = $this->getContext();

    if ($this->getParameter('module_excluded') == $context->getModuleName())
    {
      // jump to the next filter
      return $filterChain->execute();
    }

    // other stuff
  }
} 
```

# tsql - TSQL 选择最后日期不重复的记录

> ID：12999172
> 
> 赞同：2
> 
> 时间：2012-10-21T15:24:28.653
> 
> 标签：tsql

我有几张桌子：

```
1 table: Measure with column:[id], [idTEST], [Position], [idPARENT] ,[Pos_X],[Pos_Y],[Pos_Z], [Error_Comment], [Repair_Date]

2 table: Test with coulmns: [idTEST], [idKARD], [Panel_Time],[idTFILE]

3 table: Kard with columns: [idKARD], [Kard_Code], [idPANEL],[Kard_Nr]  
4\. table tstFile: [idTFILE],[Name],[Side],[Descr]
5\. table Parent: [idPARENT], [Parent] ,[idMODL]
6\. table Panel: idPANEL, PanelCode 
```

我需要从 Measure 表中选择数据，这些数据将是：

```
1\. with most old Repair_Date for each Kard_Code 
2\. and with most recent Panel_Time for each card : 
```

使用这样的列：c.Kard_Code,m.Position,m.Pos_X, m.Pos_Y, m.Pos_Z,s.Name, pn.Parent, m.Repair_Date

我试过这样的事情：

```
SELECT c.KardCode,
        m.Position,
        m.Pos_X,
        m.Pos_Y,
        m.Pos_Z,
        s.NAME,
        pn.Parent,
        max(m.Repair_Date) AS Repair_Date,
        max(m.id),
        PanelCode
FROM dbo.measure m
INNER JOIN dbo.TEST AS t
        ON m.id_TEST = t.id_TEST
INNER JOIN dbo.tstFILE AS s
        ON t.idTFILE = s.idTFILE
INNER JOIN dbo.KARD AS c
        ON t.idKard = c.idKadr
INNER JOIN dbo.PANELS AS p
        ON c.id_PANELS = p.id_PANELS
INNER JOIN dbo.PARENT AS pn
        ON m.idPARENT = pn.idPARENT
WHERE m.Repair_Date = (
                SELECT DISTINCT min(Repair_Date)
                FROM Measure AS m2
                WHERE m2.idTEST = m.idTEST
                )
        AND (
                t.Panel_Time IN (
                        SELECT DISTINCT MAX(Panel_Time) AS Panel_Time
                        FROM TEST
                        GROUP BY id_CARDS
                        )
                )
GROUP BY c.KardCode,
        m.Position,
        m.Pos_X,
        m.Pos_Y,
        m.Pos_Z,
        s.NAME,
        pn.Parent
ORDER BY m.idTEST,
        c.KardCode 
```

结果：我以重复 IN Repair_Date 结束，其中日期类似于 EG：

```
KardCode Position Pos_X Pos_Y Pos_Z Name Parent PanelCode Repair_Date              id
a        CX       0     0     0     Blue_Card   SKY       2012-10-03 00:06:41.000  1514
a        CY       0     0     0     Blue_Card   SKY       2012-10-03 00:06:41.000  1515
... 
```

我怎样才能在没有这种重复的情况下检索数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:15:22.537

try something like this..Hope its helps..

```
with tbl as(
    SELECT c.KardCode,
            m.Position,
            m.Pos_X,
            m.Pos_Y,
            m.Pos_Z,
            s.NAME,
            pn.Parent,
            max(m.Repair_Date) AS Repair_Date,
            max(m.id),
            PanelCode,
            RANK() over(partition by c.KardCode,
            m.Position,
            m.Pos_X,
            m.Pos_Y,
            m.Pos_Z,
            s.NAME,
            pn.Parent order by m.idTEST,
            c.KardCode) as r
    FROM dbo.measure m
    INNER JOIN dbo.TEST AS t
            ON m.id_TEST = t.id_TEST
    INNER JOIN dbo.tstFILE AS s
            ON t.idTFILE = s.idTFILE
    INNER JOIN dbo.KARD AS c
            ON t.idKard = c.idKadr
    INNER JOIN dbo.PANELS AS p
            ON c.id_PANELS = p.id_PANELS
    INNER JOIN dbo.PARENT AS pn
            ON m.idPARENT = pn.idPARENT
    WHERE m.Repair_Date = (
                    SELECT DISTINCT min(Repair_Date)
                    FROM Measure AS m2
                    WHERE m2.idTEST = m.idTEST
                    )
            AND (
                    t.Panel_Time IN (
                            SELECT DISTINCT MAX(Panel_Time) AS Panel_Time
                            FROM TEST
                            GROUP BY id_CARDS
                            )
                    )
)select KardCode,
        Position,
        Pos_X,
        Pos_Y,
        Pos_Z,
        NAME,
        Parent,
        Repair_Date,
        id,
        PanelCode 
    from tbl
    where r=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:21:55.297

谢谢大家我解决了这个问题，因为你喜欢这样：

```
 SELECT m.[Repair_Date],c.idKArd,m.[Position],m.[error_table],m.[Pos_X],m.[Pos_Y]
  ,m.[Pos_Z],s.name, pn.Parent
 FROM dbo.MEASURE m      inner join dbo.TEST t on m.id_TEST=t.id_TEST

 inner JOIN    dbo.Kard AS c ON t.idKard = c.idKard 
   inner join dbo.tstfile AS s ON t.idTFILE = s.idTFILE INNER JOIN
           dbo.PANEL AS p ON c.idPANEL = p.idPANEL INNER JOIN
    dbo.PARENT AS pn ON m.idPARENT = pn.idPARENT INNER JOIN
 WHERE m.id = (SELECT TOP 1 m2.id FROM dbo.MEASURE m2 WHERE m2.idTEST = m.idTEST)  
 and  Error_Comment in (200,300)
 AND (t.Panel_Time IN (SELECT     MAX(Panel_Time) AS Panel_Time FROM dbo.TEST  GROUP BY
   idKARD))
 and t.idTest = (SELECT TOP 1 t2.idTest FROM dbo.test t2 WHERE t2.idKARD = c.idKARD)
 order by repair_Date, c.idKARD 
```

# javascript - 带有复选框和收音机的 JQuery 验证插件问题

> ID：12999176
> 
> 赞同：1
> 
> 时间：2012-10-21T15:24:49.573
> 
> 标签：javascript, jquery, jquery-validate

当输入或选择字段发生验证错误时，插件会将错误类添加到其中，因此在 css 中我可以有类似的内容：

```
.error { border: 2px solid red; } 
```

但这不适用于复选框和收音机，因为某些浏览器不允许对这些类型的元素进行样式设置。因此，对于这两种类型的元素，我希望包含它们的类的 div`block`被赋予错误类。所以它看起来像这样的错误：

```
<div class="block error">
    <input type="checkbox" name="something" class="error" /> Something
</div> 
```

如何扩展插件来实现这一点？

伪代码：

```
$.validator.addClassRules('checkboxOrRadioError', {
   onError: function() {
       $(this).parents('.block').addClass('error');
   }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:47:29.837

您可以使用`errorPlacement`回调来覆盖错误的默认位置或将`highlight`回调与`unhighlight`. 您现在可以控制发生的事情，但必须编写所有条件

例子：

```
$('form').validate(function() {

    highlight: function(element, errorClass) {
        var $el = $(element);
        if ($el.is(':radio') || $el.is(':checkbox')) {
            $el.closest('.block').addClass(errorClass)

        } else { 
                /* add code for default*/
        }

    },

    unhighlight: function(element, errorClass) { 
                /* code to reverse the above*/
    }
})​ 
```

# shell - 如何重新启动流星

> ID：12999181
> 
> 赞同：5
> 
> 时间：2012-10-21T15:25:39.243
> 
> 标签：shell, meteor

如果我关闭浏览器选项卡并按`Ctrl`+`Z`退出当前正在运行的流星进程，如何再次启动流星以重新启动之前的项目？

我收到以下错误：

> $ ~/current/meteor/project 流星
> 
> 流星无法监听 3000 端口。也许另一个流星正在运行？
> 
> 在同一个应用程序目录中运行两个 Meteor 副本将不起作用。如果其他东西正在使用端口 3000，您可以使用 --port 指定替代端口。

但指定另一个端口不会更改错误消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T23:41:52.923

在 Linux `CTRL`+中`Z`暂停程序并`bg`命令将其发送到后台。您可以键入`fg`命令返回程序。

回到程序后，您可以通过`CTRL`+关闭它`C`，然后只需通过`meteor`命令再次启动它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-13T13:05:49.373

您还可以使用该`sudo killall -9 node`命令停止所有流星项目，然后`meteor`在您选择的文件夹中启动您想要的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:01:16.773

如果流星进程不正确退出（例如空电池），您也可能会收到此错误。

在这种情况下运行

```
meteor reset 
```

会有所帮助。

这也将在执行此命令时删除您所在项目的数据库

因此，如果您的数据库中充满了有价值的数据，请不要这样做。

玩得开心 ：）

*我知道您的问题已得到解答，但我想人们在搜索我描述的错误时也会找到这篇文章，因为错误消息是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T10:33:41.687

如果您使用的是  Mac，则适用相同的过程：

`ctrl`+`z`暂停 Meteor 服务器，然后您可以：

`bg`让它在后台运行

`fg`将后台运行的进程带到前台

`ctrl`+`c`关闭它。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-06T02:24:42.243

根据您的权限，这可能是您的盒子上的权限问题。

是否运行：

```
sudo meteor 
```

从相应的目录修复问题？

# functional-programming - 如何使这种操作功能风格？

> ID：12999186
> 
> 赞同：0
> 
> 时间：2012-10-21T15:26:25.273
> 
> 标签：functional-programming

例如，我们需要实现`function Set addToSet(Stack, Object)`：它接受一个`Stack`和一些可以压入堆栈的对象；输入对象应该被推入输入堆栈；我们需要它返回 a `Set`，其中包含输入堆栈的所有元素以及新对象。如果我们将新对象压入堆栈，就违反了[**函数式编程**](http://en.wikipedia.org/wiki/Functional_programming)的原则。出于某种原因，我们不能在调用此函数之前或之后将新对象压入堆栈（即在函数外进行压入）。我们应该怎么做？

我猜测的解决方案是先将输入堆栈复制到一个新堆栈，然后修改新堆栈，最后将结果`Set`与新堆栈一起返回。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:34:38.783

怎么样：

```
function Stack pushToStack(Stack, Object)
function Set stackToSet(Stack)
stackToSet(pushToStack(Stack,Object)) 
```

没有更多的副作用。

# svn - 在浏览器中查看站点的 SVN 版本

> ID：12999189
> 
> 赞同：1
> 
> 时间：2012-10-21T15:26:37.997
> 
> 标签：svn

示例场景：

我有一个 Web 项目和一个关联的 SVN 存储库。我有 1 个文件*index.html*和该文件的 3 个提交的修订版：

修订版 3：

```
<p>This is revision 3</p> 
```

修订版 2：

```
<p>This is revision 2</p> 
```

修订版 1：

```
<p>This is revision 1</p> 
```

这位于 http:127.0.0.1/svnhistoryviewer/index.html 的 repo 根目录中

当我在浏览器中查看时，我得到

这是修订版 3

（正如预期的那样，因为这是最新的）。

有没有办法可以在前端查看以前的修订？另外，我可以用项目的标签来做到这一点吗？

一直在寻找没有运气。我确实读过一些关于附加`/!svn/bc/REVISION_NUMBER`到 URL 的内容，但是当我尝试这样做时它只是 404ing。

**编辑：**

这个问题的进一步答案表明 ?p=REVISIONNUMBER 应该提取该文件的版本，但是我没有运气。

我显然在这里缺少关于 svn 的一些基本知识。工作副本是否必须在某种“svn 服务器”上运行，还是应该使用基本的 Apache HTTP 服务器？我的设置基本上是一个运行在 Ubunutu VM 上的 Apache 服务器，其 Web 根目录恰好包含一个 svn 存储库，其中包含一个从 SourceForge 签出的站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:05:25.583

有一些工具允许您通过 Web 浏览器浏览您的 Subversion 存储库。例如，[斯文顿](http://sventon.org)是我的最爱。但是，这些工具可让您将文件视为 .... 文件。他们故意从文件中删除所有特殊实体，以便向您显示您的文件。这允许您将 Subversion 存储库与[Jenkins](http://jenkins-ci.org)和[Jira](http://atlassian.com)等工具集成。这些工具将通过 Sventon 链接到您的 Subversion 存储库的特定修订，然后您可以单击该链接，查看文件信息，执行差异等。这听起来不像您想要做的。

但是，您提到了**附加** *`/!svn/bc/REVISION_NUMBER`到 URL*。这不是它的工作原理。你把它放在*URL*根目录和你的存储库目录结构之间：

```
http://svn.vegicorp/svn/repo_name/trunk/foo/bar   #This shows you the latest revision

http://svn.vegicorp/svn/repo_name/!svn/bc/1000/trunk/foo/bar #Revision 1000 
```

看看这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:50:34.533

*   如果您的存储库是 http-repository
*   如果您在干净的 Apache 之上没有任何特殊的“存储库浏览器”

您可以使用 URL 中的特殊后缀查看**任何**存储库**对象**的**任何**历史**修订**

 ****`http://URL-in-REPO?p=REV`, 其中 REV 是修订号****

# c# - 图像大小总是返回 0

> ID：12999201
> 
> 赞同：0
> 
> 时间：2012-10-21T15:27:09.663
> 
> 标签：c#, image, windows-phone-7, silverlight-4.0, image-size

我正在尝试将图像从嵌入式资源加载到`Image`实例。问题是图像的大小始终为0。

这是代码片段：

```
Image image = new Image();
ImageSource img = new System.Windows.Media.Imaging.BitmapImage(new Uri("/Images/marker.png", UriKind.Relative));
image.SetValue(Image.SourceProperty, img);

System.Diagnostics.Debug.WriteLine("output 1 = " + image.DesiredSize.Width); // return 0
System.Diagnostics.Debug.WriteLine("output 2 = " + image.ActualWidth); // return 0 
```

在将图像呈现在屏幕上之前，我必须知道图像的大小，因为我需要根据图像的大小来偏移图像。

谢谢

更新：感谢 Silvermind

我用示例代码回答了我自己的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:48:49.413

查看[BitmapImage.DownloadProgress 事件](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.downloadprogress(v=vs.95).aspx)；

> 通过 URI 构造 BitmapImage 本质上是异步的。本次活动报告建设进度。

换句话说，在必须下载/构建`ActualWidth`之前运行很可能会返回 0 作为.`BitmapImage``ActualWidth`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:29:34.033

“/Images/marker.png” - 你确定这是文件吗？

也许是因为该文件夹被命名为 images 没有大写 I？

还有什么返回：

```
image.getValue(); // here what null? after setting it 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:00:57.107

谢谢银心。他建议使用 CreateOptions。

最后，我找到了解决方案：

```
Image image = new Image();

Uri uri = new Uri("/Images/marker_stop.png", UriKind.Relative);
BitmapImage bi = new BitmapImage(uri);
bi.CreateOptions = BitmapCreateOptions.IgnoreImageCache;

image.Source = bi;
System.Diagnostics.Debug.WriteLine("************************************* in image.ActualWidth " + ", " + bi.PixelWidth); // return 30 
```

# javascript - Node.JS - 将 UNIX 时间戳转换为时间 - 时区偏移

> ID：12999202
> 
> 赞同：0
> 
> 时间：2012-10-21T15:27:10.123
> 
> 标签：javascript, node.js, date, time, timestamp

我有一个函数，将时间戳转换为时间：

```
function convertUnixTimeToTime(UNIX_timestamp) {
    var a = new Date(UNIX_timestamp);
    var fin_hour = String(a.getHours())
    if (fin_hour.length == 1) {
        fin_hour = '0' + fin_hour;
    }
    var fin_minutes = String(a.getMinutes())
    if (fin_minutes.length == 1) {
        fin_minutes = '0' + fin_minutes;
    }
    var time = fin_hour + ':' + fin_minutes;
    return time;
} 
```

我正在本地测试我的应用程序，我的计算机的时移是 +4。当我尝试从节点应用程序获取当前时间时：

```
console.log('Current time is: ' + convertUnixTimeToTime(new Date().getTime())); 
```

我得到了我**现在的当地时间**。正如我所料， Date().getTime() 应该以毫秒为单位返回绝对 UNIX 时间。我的函数 convertUnixTimeToTime() 没有指定任何时间偏移，这就是为什么我应该在没有任何偏移的情况下获得清晰的时间。为什么我会移动 +4 次？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:36:37.100

`getHours`and`getMinutes`函数总是返回本地时间。这`new Date(new Date().getTime())`比其他任何事情都更令人困惑 - 它与`new Date()`- 它不会改变任何关于时区的内容。

要获得您要查找的内容，请使用`getUTCHours`和`getUTCMinutes`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:33:12.730

因为[`Date.getHours()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getHours)并且[`Date.getMinutes()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMinutes)根据定义返回本地时间？

# android - jpct-ae，变形形状

> ID：12999205
> 
> 赞同：1
> 
> 时间：2012-10-21T15:27:18.870
> 
> 标签：android, shape, jpct

我使用 jpct wiki 的代码形式来显示形状。有没有办法在触摸屏幕时使这种形状变形，而不使用搅拌器或类似的应用程序？怎么做？

[http://www.jpct.net/wiki/index.php/Hello_World](http://www.jpct.net/wiki/index.php/Hello_World)

# php - MySQL 使用 Substring 和 Like 仅连接部分字段

> ID：12999206
> 
> 赞同：1
> 
> 时间：2012-10-21T15:27:24.950
> 
> 标签：php, mysql, join

我有两个看起来像这样的表：

```
node:
NID    Name
1      Chicago
2      New York
3      LA

url_alias:
src    dst
user/1    user/Bob
user/2    user/Mike
node/1    node/chicago
node/2    node/new-york
node/3    node/LA 
```

ETC

基本上， url_alias 表有我的网络服务器重定向到的别名 url。如 url 中所示，节点和用户都有“id”。我正在尝试将我的节点表连接到 url_alias 表并匹配“/”（节点 ID）之后的内容。到目前为止，我有这段代码，但它只使用子字符串而不是像这样它也匹配任何以正确数字结尾的用户：

```
select `node`.`nid` AS `nid`,`node`.`name` AS `name`,`url_alias`.`src` AS `srcurl`,`url_alias`.`dst` AS `dsturl`
from ((`node` join `url_alias` on ((`node`.`nid` = substring(`url_alias`.`src`,6)))))
order by `node`.`nid` desc 
```

（实际上查询有点长，因为它还加入了另一个正在工作的表，但为简单起见，我对其进行了编辑）

此查询返回如下结果：

```
nid    name      srcurl    dsturl

1      chicago   node/1    node/chicago
1      chicago   user/1    user/Bob
2      new-york   node/1    node/new-york
2      new-york   user/1    user/Mike 
```

有没有办法在我的查询中使用“LIKE 'node/%'”，或者类似于在子字符串运行匹配之前只抓取“节点”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:31:56.630

连接的`on`部分本质上只是一个`where`子句。您可以在 a 中指定的任何内容都`where`将在 ON 中起作用，所以...

```
JOIN x ON somefield LIKE 'node%' AND node.nid = SUBSTRING(src, 6) 
```

完全可以接受。请注意，由于您使用的是子字符串操作，因此无法使用索引 - 索引不适用于派生数据。规范化数据并将“id”部分拆分到自己的字段中会好得多。

# java - 快速写入：内存映射文件与 BufferedWriter

> ID：12999210
> 
> 赞同：3
> 
> 时间：2012-10-21T15:27:34.437
> 
> 标签：java, file-io, io, real-time, nio

有没有人对此进行基准测试？我想尽可能快地写入磁盘，最大限度地减少写入调用的延迟。我想知道写入内存映射缓冲区（通过 buffer.put()）是否比仅在 Java 端缓冲内容并在缓冲区已满后仅刷新到 fileChannel 更快。这样，一旦缓冲区已满，我将只进行系统调用（FileChannel.write）。我不确定当我将一些字节写入 MappedByteBuffer 时会发生什么，换句话说，是否完成了系统调用。

使用缓冲方法，我将能够以 16,32 或 64k 的块写入磁盘，我认为这是最佳的。缓冲的缺点是，如果应用程序崩溃，您必须有一个关闭挂钩来刷新内容。还有一层额外的复制到缓冲区，而不是直接写入文件通道。如果你拖尾文件，你可能看不到你想要的，因为内容被缓冲了。如果您跟踪内存映射文件，我也不知道会发生什么。

任何有经验的灵魂可以在这里提供帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:20:56.713

If you are trying to minimise latency, I have found writing to MemoryMappedFiles to be faster because it *avoids* the need to make a system call. This assumes you don't need to force the data to disk and are happy for the OS to do this on a best effort basis.

The typical latency for writing to a MemoryMappedFile is the same as writing to memory, so i don't believe you will get faster. As the file grows you need to perform an additional memory mapped regions and this can take 50 to 100 micro-seconds which is significant but should be rare enough that it doesn't matter.

Writing to IO via a system call takes in the order of 5 to 10 micro-seconds which is fast enough for more applications, but relatively much slower if it matters.

If you have a need to see the data as it is written with a low latency, I suggest you look at my library [Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle) which supports reading data with a typical latency of 100 ns from the time it is written.

Note: While memory mapped files can reduce latency of individual writes it doesn't increase the write throughput of your disk subsystem. This means that if you have a slow disk sub-system, your memory will soon become exhausted (even if you have many GBs) and this will be the performance bottleneck regardless of which approach you take.

For example if you have SATA or fibre, you might have a limit of 500 MB/s which is easy to exceed in which case once you hit you memory limit, this will slow you down regardless of what you chose.

# java - 给定分层路径，获取字段的值

> ID：12999214
> 
> 赞同：11
> 
> 时间：2012-10-21T15:27:57.513
> 
> 标签：java, recursion

我有一个包含子属性的对象，它也有子属性等等。

我基本上需要找到检索对象上特定字段的值的最佳方法，因为它是作为字符串的完整层次路径。

例如，如果对象具有字段 company (Object)，字段 client (Object) 具有字段 id (String)，则此路径将表示为`company.client.id`。因此，给定我试图获取对象值的字段的路径，我将如何去做呢？

干杯。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-02-03T07:30:52.137

您可以使用[Apache Commons BeanUtils](http://commons.apache.org/proper/commons-beanutils/javadocs/v1.9.3/apidocs/org/apache/commons/beanutils/PropertyUtilsBean.html) `PropertyUtilsBean`。

使用示例：

```
PropertyUtilsBean pub = new PropertyUtilsBean();
Object property = pub.getProperty(yourObject, "company.client.id"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T15:38:19.413

请在下面找到`Fieldhelper`带有`getFieldValue`方法的类。它应该允许您通过拆分字符串然后`getFieldValue`递归应用，将结果对象作为下一步的输入来快速解决您的问题。

```
package com.bitplan.resthelper;
import java.lang.reflect.Field;

/**
 * Reflection help
 * @author wf
 *
 */
public class FieldHelper {

    /**
     * get a Field including superclasses
     * 
     * @param c
     * @param fieldName
     * @return
     */
    public Field getField(Class<?> c, String fieldName) {
        Field result = null;
        try {
            result = c.getDeclaredField(fieldName);
        } catch (NoSuchFieldException nsfe) {
            Class<?> sc = c.getSuperclass();
            result = getField(sc, fieldName);
        }
        return result;
    }

    /**
     * set a field Value by name
     * 
     * @param fieldName
     * @param Value
     * @throws Exception
     */
    public void setFieldValue(Object target,String fieldName, Object value) throws Exception {
        Class<? extends Object> c = target.getClass();
        Field field = getField(c, fieldName);
        field.setAccessible(true);
        // beware of ...
        // http://docs.oracle.com/javase/tutorial/reflect/member/fieldTrouble.html
        field.set(this, value);
    }

    /**
     * get a field Value by name
     * 
     * @param fieldName
     * @return
     * @throws Exception
     */
    public Object getFieldValue(Object target,String fieldName) throws Exception {
        Class<? extends Object> c = target.getClass();
        Field field = getField(c, fieldName);
        field.setAccessible(true);
        Object result = field.get(target);
        return result;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T15:57:20.490

您需要先拆分您的字符串以获取单个`fieldNames`. 然后对于每个字段名称，获取所需的信息。您将不得不遍历您的 fieldNames 数组。

你可以试试下面的代码。虽然我没有使用过`Recursion`，但它会工作： -

```
public static void main(String[] args) throws Exception {

    String str = "company.client.id";
    String[] fieldNames = str.split("\\.");

    Field field;

    // Demo I have taken as first class that contains `company`
    Class<?> targetClass = Demo.class;  
    Object obj = new Demo();

    for (String fieldName: fieldNames) {

        field =  getFieldByName(targetClass, fieldName);    
        targetClass = field.getType();

        obj = getFieldValue(obj, field);            
        System.out.println(field + " : " + obj);

    }

}

public static Object getFieldValue(Object obj, Field field) throws Exception {
    field.setAccessible(true);
    return field.get(obj);
}

public static Field getFieldByName(Class<?> targetClass, String fieldName) 
                                                        throws Exception {
    return targetClass.getDeclaredField(fieldName);
} 
```

# iphone - ViewController 层次结构

> ID：12999220
> 
> 赞同：2
> 
> 时间：2012-10-21T15:28:52.757
> 
> 标签：iphone, objective-c, ios

我有一个这样的场景：我有一个`MovieViewController`它作为我的应用程序的介绍（它是我故事板中的初始视图控制器）。它转到另一个名为`MenuViewController`的视图控制器：

*   电影结束
*   检测到的触摸

所以现在的顺序是这样的： `MovieViewController`-----> `MenuViewController` --->（然后三个按钮对应不同的Views）

根据我在这里的旧问题：[关于窗口层次结构的警告](https://stackoverflow.com/questions/12704984/warning-about-window-hierarchy)

我对应答案并编辑我的代码，但我的调试器中仍然出现错误。

> 警告：尝试呈现不在窗口层次结构中的视图！

它仍然出现几次，有没有办法让`MenuViewController` 主视图显示后`MovieViewController`？或在电影结束/放映后将其关闭/删除。

感谢您的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:47:08.123

为了尝试回答这个问题，我将假设当你说

> 主视图

你的意思是根视图。

一个简单的解决方案是，当您启动应用程序时，会创建一个导航控制器来管理视图控制器的堆栈。此导航控制器有一个根控制器，您应该将其设置为您的`MenuViewController`（这应该是第一个加载的视图控制器），因为这是您要返回的控制器。您可以将您的视图呈现在您`MovieViewController`的视图之上，`MenuViewController`当`MovieViewController`您被解雇时，您将看到`MenuViewController`.

附带说明一下，在 iOS 编程中呈现闪屏通常不是一个好的做法，其中闪屏是一个没有任何功能价值的屏幕，除了在加载和呈现有关应用程序的信息时延迟主视图的呈现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T15:36:13.363

您可以制作`MenuViewController`初始视图控制器，并在加载后立即调用：

```
[self presentModalViewController:MovieViewController animated:NO]; 
```

然后，当您想`MovieViewController`从屏幕上删除时，只需调用：

```
[self dismissModalViewControllerAnimated:YES]; 
```

在`MovieViewController`.

# symfony - Symfony2 中的修复需求

> ID：12999221
> 
> 赞同：10
> 
> 时间：2012-10-21T15:28:54.433
> 
> 标签：symfony, apache2, php, symfony-2.1

我已经在我的机器上安装了 Symfony2。

当我检查本地网址中的要求时：

```
localhost/Symfony2/web/config.php 
```

它说：

> 主要问题
> 
> 在 php.ini* 中设置“date.timezone”设置（如欧洲/巴黎）。
> 
> 建议
> 
> 在 php.ini* 中将 short_open_tag 设置为关闭。
> 
> 在 php.ini* 中将 magic_quotes_gpc 设置为关闭。
> 
> *   必须在“/etc/php5/apache2/php.ini”中更改 php.ini 文件。

我已经在`/etc/php5/apache2/php.ini`和 中进行了必要的更改`/etc/php5/cli/php.ini`：

> date.timezone = "欧洲/马德里"
> 
> short_open_tag = 关闭
> 
> magic_quotes_gpc = 关闭

当我检查 php.ini 文件时，两者`short_open_tag`和`magic_quotes_gpc`位置都已设置为关闭。

之后我重新启动了apache2：

```
sudo service apache2 restart 
```

但是我仍然收到相同的错误消息。

我使用 Symfony 2.1.2、Ubuntu 12.04 和 PHP 5.3.6

**更新**：

如果我从浏览器运行 phpinfo()，它会显示它位于的 Loaded Configuration File：

```
/etc/php5/apache2/php.ini 
```

如果我运行`php -i | grep php.ini`它说它位于的加载配置文件：

```
/etc/php5/cli/php.ini 
```

这是我已经进行更改的两个文件。

我已确保更改已保存在文件中。我还在一个 php 文件中使用了 phpinfo() 并在浏览器中执行了它。它表示 date.timezone 的值未设置，magic_quotes_gc 和 short_open_tag 设置为 On。

如果我执行`php app/check.php`，则要求得到解决，所以我认为`/etc/php5/cli/php.ini`它工作正常并且只有一个问题`/etc/php5/apache2/php.ini`，即与浏览器一起工作的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-07T06:36:21.953

请务必从 /etc/php5/cli/php.ini 中删除字符串开头的注释分号

从 ：

```
;date.timezone = "America/Vancouver" 
```

到：

```
date.timezone = "America/Vancouver" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T06:30:52.043

如果正确完成，您所做的更改应该可以解决您的问题；仔细检查。确保实际保存更改。很多时候，当我在 Ubuntu 中编辑 php.ini 文件时，我忘记使用正确的权限（root）运行编辑器，并且错过了无法保存文件的警告。此外，通过从脚本调用 phpinfo() 来验证更改。

当您从终端运行位于 app/check.php 中的脚本时，您是否得到相同的结果。从项目根目录：

```
php app/check.php 
```

如果仍然有问题，我只能建议清除缓存；使用 symfony2 可以解决很多问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T10:45:33.423

我也必须设置 date.timezone 变量以响应相同的错误消息。错误消息最终通过运行以下命令清除缓存来解决：

```
php app/console cache:clear 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-26T20:43:51.197

你编辑正确的ini文件吗？我正在编辑 /etc/php5/cli/php.ini 并为我解决问题

# java - 使用 BuildDesk 构建 Java 应用程序 - 添加初始屏幕路径

> ID：12999224
> 
> 赞同：2
> 
> 时间：2012-10-21T15:29:14.853
> 
> 标签：java, swing, netbeans, awt, splash-screen

我在 netbeans 上开发了应用程序，该应用程序具有使用 java 启动屏幕 API 实现的启动屏幕。我可以在 netbeans 中完美运行它（通过将 vm 选项设置为 -splash:image/splash.png）。我也可以通过运行 jar 来运行它。问题是我的合作伙伴使用[BuildDesk](http://www.productiveme.com)来捆绑应用程序。使用它构建应用程序后，它将无法正常工作。我也设置了额外的虚拟机选项。但随后它给出了以下错误。

```
Unrecognized Java VM option ignored: -splash:image/splash.png 
```

有人在我之前遇到过这个问题吗？我在[这里](https://stackoverflow.com/questions/4964397/mac-os-java-splash)看到有人用 JarBundler 遇到了这个问题。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:09:51.157

> 看来他们在2009年之后还没有发布新版本，你能建议如何找到builddesk是否支持闪屏吗？

*   尽`>JDK 1.4`你所能创造不加装饰`JDialog`的，更好的`JWindow`

*   放在那里所需的内容，`JComponents`或`image`和/或与`text`例如

*   在应用程序的开始显示`Old_schools SplashScreen`，

*   如果所有必需的代码都结束了，那么调用`JDialog / JWindow#setVisible(false);`然后显示 App 的窗口

*   如果`SplashScreen`仅用于`whatever reason`(s)，则使用`Swing Timer`( `Timer#repeats(false);`)

# javascript - Highstocks 多个 x 轴或仅删除日期并使用编号

> ID：12999226
> 
> 赞同：1
> 
> 时间：2012-10-21T15:29:31.407
> 
> 标签：javascript, highcharts, highstock

我想`multiple x axis`使用 HighStocks。

我想比较不同日期期间的值。

如果我不能使用多个 x 轴，我想使用编号，例如将所有日期转换为点并使用`1,2,3,4,...`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:34:25.700

要删除 hishstock x 轴中的日期时间格式，请使用[xAxis.labels.formatter](http://api.highcharts.com/highstock#xAxis.labels.formatter)

```
xAxis: {
        labels: {
            formatter: function() {
                return this.value;
            }
        }
    } 
```

如果我不得不猜测，我假设您的数据跨越不同的时间范围，因此您正在寻找多个 x 轴，否则您拥有的另一种选择是显示自开始对两个系列进行适当比较以来经过的时间，在在这种情况下，您想显示您提到的原始值。在这里，您可能还想偏移您的数据，以便值落在单个 x 范围内，如下所示

```
function offsetData(data,offset){
    //Use the given time offset or use first timestamp
    offset=offset || data[0][0];
    var newData=[];
    for(var i=0;i<data.length;i++){
        newData.push([data[i][0]-offset,data[i][2]]);
    }
    return newData;
} 
```

[在不同的时间范围内对齐时间序列数据 | Highcharts & Highstock @ jsFiddle](http://jsfiddle.net/jugal/VBHks/)

综上所述，在 highstock 中可以选择多个 x 轴

```
 series: [
        {
        name: 'series1',
        data: data1,
        xAxis: 0},

    {
        name: 'series2',
        data: data2,
        xAxis: 1}

    ],
    xAxis: [{
        min: data1[0][0]},
    {
        min: data2[0][0]}] 
```

可能需要重新格式化工具提示和 x-labels 以修复多个 x 轴情况，我把它留给你作为练习；）

[多X轴| Highcharts & Highstock @ jsFiddle](http://jsfiddle.net/jugal/ESdmH/)

# c# - 查询 Linq to Sql 排序

> ID：12999233
> 
> 赞同：1
> 
> 时间：2012-10-21T15:30:13.157
> 
> 标签：c#, linq

我试图找出一种更好的方式来排序我的 sql 查询的结果。

到目前为止我有

```
List<ArticlePost> articlePosts = new List<ArticlePost>();
        IQueryable<ArticlePost> query = from ArticlePost in ArticlePostTable select ArticlePost;
        foreach (ArticlePost ArticlePost in query)
            articlePosts.Add(ArticlePost);
        articlePosts = articlePosts.OrderByDescending(ArticlePost => ArticlePost.atclID).ToList(); 
```

这是使用 linq 对列表进行排序的好方法，还是有什么方法可以改进它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T15:35:16.233

以下有什么问题？

```
var articlePosts = ArticlePostTable.OrderByDescending(ap => ap.actlId).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:37:44.057

```
var articlePosts = (
    from post in ArticlePostTable
    orderby post.atclID descending
    select post)
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:38:09.867

试试这个：

```
List<ArticlePost> articlePosts = 
    ArticlePostTable
    .OrderByDescending(ArticlePost => ArticlePost.atclID)
    .ToList(); 
```

# algorithm - 探索一种算法来找到包含某些项目的最小链

> ID：12999235
> 
> 赞同：5
> 
> 时间：2012-10-21T15:30:23.853
> 
> 标签：algorithm, tuples, bag

抱歉，我无法为以下算法提出算法或问题的名称。我会陈述问题，然后我已经尝试过，也许有人可以指出我正确的方向。

想象一下，您有一袋物品（无序，允许重复）。在实践中，袋子可能包含 2-20 件物品，以防这种放松有帮助。

目标是找到以任意顺序包含包中所有物品的最小长度链（如果我们有不同的链概念，则为有序链表）。

一条链由一个开始令牌（不在包中）和任意数量的项目和一个结束令牌（也不在包中）组成。

链是通过将 n 个元组拼凑在一起形成的（顺序很重要），作为进一步的放松，让我们说所有元组的 n 值都是相同的。在实践中，我使用 n = 3。如果它们具有重叠元素，则链可能是“混合”而不是连接。例如，考虑 (a,b,c) 和 (c,d,e)。可以连接为 (a,b,c,d,e)。同样，(a,b,c) 和 (b,c,d) 可以连接为 (a,b,c,d)。一些元组可能在第一个位置有一个开始标记，而一些标记在最后一个位置有一个结束标记，这当然可以解决问题。

因此，在我看来，该问题的确切解决方案通常是难以处理的。为了获得问题的“好”解决方案，需要某种优化算法。我可以接受的“好”解决方案。

我开始使用的是一种贪婪的方法，在第一次通过时，您会发现包中包含最多元素的元组，任意打破平局。创建一个数据结构来保存我们迄今为止构建的链，并将选择的元组粘贴到这个数据结构中。将问题拆分为 2 个子问题，即开始令牌端和结束令牌端。直到子问题 1 的数据结构的第一个令牌是开始令牌，子问题 2 的最后一个令牌是结束令牌，增长链使得我们试图尽快找到停止条件（开始或结束令牌取决于关于子问题），同时也试图尽快用尽袋子里的东西。

有人在任何地方看到过这个问题吗？关于如何改进（或正常工作）这个算法的任何想法？这是我正在解决的一个真正的问题，它是一个更大系统的智能部分，而不是玩具问题或家庭作业问题。

**编辑**

对不起，我今天远离电脑。我将尝试发布一个不太简单但又不太复杂的示例解决方案。

鉴于：

1.  `Bag = {A, B, C, D}` （为了举例，我把它设为一个集合，但每个项目都可以出现不止一次）
2.  `/ = Start Token`
3.  `\ = End Token`
4.  3-Tuples（三元组）：为了命名简单，我将它们标记为 ag。小写字母在问题中没有实际作用。

    ```
    (/,A, E) a
    (/,C, D) b
    (/,G, H) c
    (D,B, A) d
    (C,G, H) e
    (B,A, \) f
    (G,H, \) g 
    ```

解决方案：如果我们将 b、d 和 f 链接在一起，我们得到`(/,C,D,B,A,\)`.
如果同时计算开始和结束标记，这是包含包中所有元素的最短链，长度为 6。一般来说，最短路径的长度为 |BAG|。+ 2，如果它确实存在。我希望我的问题陈述现在更有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:54:06.787

由于您最多只有 20 个项目，我认为您可以在合理的时间内（例如不到一分钟）计算出精确的解决方案。

一种方法是使用动态编程，其中状态由下式给出：

```
A) a 20 bit number m (which will represent which items have been visited so far)
B) a number b in the range 1..20 
C) a number c in the range 1..20 
```

此状态对应于看起来像 Start 的链，?,?,?,...,?,b,cie b 和 c 是 2 个最近的元素。

数字 m 是一个位域，表示链中已访问了哪些其他元素。换句话说，当且仅当链包含包中的第 i 个元素时，m 的位 i 为 1。

找到最短链的算法将是：

1.  令 S = 由所有具有起始标记的元组组成的状态集。（所有这些状态都将具有相同的链长 2）
2.  对于从 3 向上的每个链长度 y，遍历 S 中的所有状态，并尝试通过使用适当的元组将状态扩展为具有长度 y。如果可能，将扩展状态添加到集合 S。
3.  如果位域 m 最终将设置所有位，则仅允许添加带有结束标记的元组。

如果您曾经设法添加一个包含结束状态的元组，那么您已经找到了包含所有元素的最短链。

对于袋子中的 N 个项目，大约有 2^NNN 个状态，它们应该是可以管理的。

# python - 如何使用 itertools 模块构建“矢量化”构建块？

> ID：12999237
> 
> 赞同：5
> 
> 时间：2012-10-21T15:30:34.317
> 
> 标签：python, vectorization, itertools

文档的[配方部分](http://docs.python.org/library/itertools.html#recipes)以`itertools`以下文本开头：

> 扩展工具提供与底层工具集相同的高性能。卓越的内存性能是通过一次处理一个元素来保持的，而不是一次将整个可迭代对象全部放入内存。通过以有助于消除临时变量的功能样式将工具链接在一起，可以保持较小的代码量。**通过更喜欢“矢量化”构建块而不是使用导致解释器开销的 for 循环和生成器来保持高速。**

问题是，应该如何构造生成器来避免开销？您能否提供一些具有这种开销的构造不良的块的示例？

我决定问我什么时候回答[这个问题](https://stackoverflow.com/questions/12998849/generator-expression-that-resembles-the-behavior-of-append/12998890#12998849)，我不能确切地说是否`chain(sequence, [obj])`有开销`chain(sequence, repeat(obj,1))`，我应该更喜欢后者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T22:13:24.157

文档文本不是关于如何构造生成器以避免开销。它解释了正确编写`itertools`的代码，例如示例中提供的代码，完全避开了 for 循环和生成器，将其留给 itertools 或内置收集器（例如`list`）来使用迭代器。

举个`tabulate`例子：

```
def tabulate(function, start=0):
    "Return function(0), function(1), ..."
    return imap(function, count(start)) 
```

写这个的非向量化方式是：

```
def tabulate(function, start=0):
    i = start
    while True:
        yield function(i)
        i += 1 
```

这个版本“产生解释器开销”，因为循环和函数调用是在 Python 中完成的。

关于链接单个元素，可以安全地假设这`chain(sequence, [obj])`会（微不足道）更快，因为固定长度的列表构造在 Python 中使用专门的语法和操作码得到了很好的优化。同样，`chain(sequence, (obj,))`它会更快，因为元组共享列表的优化，并且启动时更小。`python -m timeit`与基准测试一样，衡量比猜测要好得多。

文档引用不**关心**迭代器创建的差异，例如通过选择`repeat(foo, 1)`和之一表现出来的差异`[foo]`。由于迭代器只产生一个元素，因此它的使用方式没有区别。在处理可以产生数百万个元素的迭代器时，文档谈到了处理器和内存效率。与此相比，选择*创建*速度更快的迭代器是微不足道的，因为创建策略可以随时更改。另一方面，一旦代码设计为使用不矢量化的显式循环，以后如果不完全重写就很难更改。

# sql - 查询当前光标行 - 不选择变量

> ID：12999239
> 
> 赞同：2
> 
> 时间：2012-10-21T15:30:54.097
> 
> 标签：sql, sql-server, tsql, sql-server-2005, cursor

我正在使用游标遍历动态 SQL 查询结果集。我完全清楚游标和动态 SQL 都是最好避免的可疑方法。请不要讨论这个话题。

我在每次迭代中获取整行（而不是将几列放入相应的变量中）。为什么？因为稍后我需要解决动态变化的列名。但同样 - 这不是手头的问题。

有没有办法查询当前行？到目前为止，我没有这样做。例如，这个伪代码“应该”完成这项工作（返回`ABCD`当前行的列值）。

```
SELECT [ABCD] FROM Rows_CURSOR 
```

我将不胜感激任何有用的建议[只是说“不要使用游标”不是有用的评论；）]。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:41:15.587

不。

您可以使用`update`或`delete`光标的当前行`where current of`，但不能`select`

# c# - 使用带有 Unity3D 的 AniMate 的动画不与物理对象交互

> ID：12999240
> 
> 赞同：1
> 
> 时间：2012-10-21T15:30:59.097
> 
> 标签：c#, unity3d

我正在用 Unity3D 设计一个迷宫。迷宫有许多分岔，玩家将在每个分岔前停下来，只需选择左或右。然后一个自动动画将移动玩家通过下一个分叉，直到迷宫的尽头（或直到死胡同）。

为了让我在 Unity 项目中使用[AniMate](http://wiki.unity3d.com/index.php/AniMate)和 C# 为播放器设置动画。使用 AniMate 我只是为每个分叉创建一个点对点动画（例如下面的法师：从开始/红色箭头到点 5）![在 Unity 中使用 AniMate 制作迷宫和动画](../Images/f43825c5ee6d7c499ecfdb002dc3fe8e.png)

我的问题是我的动画脚本（与“第一人称控制器”相关联）无法正常工作，因为不尊重物理（玩家穿过墙壁）。如果在同一个项目中我启用了 Unity 中的标准角色控件，那么我可以在迷宫中使用墙壁等物理约束来导航......（即我有碰撞器）。

这是我在按左键从起点、谷点 1 到点 2 时使用的代码示例：

```
 void FixedUpdate () {
if (Input.GetKey(KeyCode.LeftArrow)) {
//To point 1
    Hashtable props = new Hashtable();
    props.Add("position", new Vector3(756f,112f,1124f));
    props.Add("physics", true);
    Ani.Mate.To(transform, 2, props);

//To point 2            
    Hashtable props2 = new Hashtable();
    props2.Add("position", new Vector3(731f,112f,1124f));
    props2.Add("physics", true);
    Ani.Mate.To(transform, 2, props2);
}
} 
```

当我按下左箭头按钮时，实际上发生的情况是玩家使用穿过墙壁的直线直接移动到点 2。我试图将“Physics = true”传递给 AniMate，但它似乎没有帮助。

关于如何解决这个问题的任何想法？

或者......关于如何获得更优化代码的任何提示，只需使用一系列 vector3 坐标（每个点一个）来获得我想要的简单动画，而无需声明 new Hashtable(); 等等……每次？我选择 AniMate 只是因为 1\. 我是 Unity 的初学者 2\. 我不需要复杂的动画（例如我不需要使用 iTween），只需沿直线固定动画，我需要一些非常简单快速的东西在脚本中实现。但是，如果有人有同样简单的解决方案，它将受到欢迎。

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:57:28.047

使用像 AniMate 这样的补间引擎，您始终可以直接为对象的位置设置动画，而忽略可能发生的任何物理碰撞。如果你想让一个物体正确地碰撞或与关节一起工作，你必须用力来移动它，而不能直接改变它的位置。

您可以补间影响物理的对象，但补间对象不受其他物理对象的影响。您还应该使您正在补间运动的刚体。

AniMate 中的物理选项并不意味着对象通过物理受到其他对象的影响，它只是更改补间的应用方式（在 FixedUpdate 中而不是 Update 中）以确保补间对象正确影响其他物理对象。

在您的示例中，两个补间同时启动，第二个补间覆盖第一个（这就是对象直接转到第二个点的原因）。在开始第二个补间之前，您必须等待第一个补间完成。

最简单的方法是使用协程：

```
void FixedUpdate () {
    if (Input.GetKey(KeyCode.LeftArrow)) {
        StartCoroutine(TweenCoroutine());
    }
}

IEnumerator TweenCoroutine() {
    // To point 1
    Hashtable props = new Hashtable();
    props.Add("position", new Vector3(756f,112f,1124f));
    props.Add("physics", true);
    // Start first tween and wait for it to finish
    yield return Ani.Mate.To(transform, 2, props);  

    // To point 2
    Hashtable props2 = new Hashtable();
    props2.Add("position", new Vector3(731f,112f,1124f));
    props2.Add("physics", true);
    // Start second tween and wait for it to finish
    yield return Ani.Mate.To(transform, 2, props2);

    // etc...
} 
```

AniMate 不支持运动路径。[HOTween](http://www.holoville.com/hotween/)允许并允许您将补间对象随后通过的点列表传递给它。

还有一个[新版本](https://github.com/sttz/Animate/)的 AniMate（现在是 Animate）可用，它有一个更易于在 C# 中使用的流畅界面。

# html - 使用模板时的工作流程

> ID：12999254
> 
> 赞同：0
> 
> 时间：2012-10-21T15:32:44.643
> 
> 标签：html, css, dreamweaver

我已经制作了我的索引页面，然后将其作为我的模板。我使用该模板创建更多外观相似的 HTML 页面，但中间的内容不同。我应该让我的索引页面基于模板，所以当我在模板中编辑时，它也会更新索引吗？

如果我不这样做，我必须做两次。我的问题是；像这样在 Dreamweaver 中使用模板时，最好的工作流程是什么？

# javascript - javascript克隆节点重新附加事件侦听器

> ID：12999255
> 
> 赞同：0
> 
> 时间：2012-10-21T15:32:48.360
> 
> 标签：javascript, clone

我使用了一个 cloneNode 来保存和恢复一个数独表。但是，当我克隆它然后恢复表时，恢复的版本不再可编辑。

```
//Create Save Function and store in a cloneNode
function Save(){
var table = document.getElementById("sudoku");
clone = table.cloneNode(true);  
}
//Create Restore Function and restore saved state from the cloneNode and delete parent table
function Restore(){
var table = document.getElementById("sudoku"),
parent = table.parentNode;
parent.removeChild(table);
parent.appendChild(clone);
} 
```

这是我的事件处理程序

```
function selectCell() {
if (current_cell !== null) {
    current_cell.className = 'tofill';
}
current_cell = this;
current_cell.className = 'selected';
 }

// Capture keyboard key presses. If the key pressed is a digit
// then add it to the current cell. If it is a space then empty
// the current cell.
function keyPress(evt) {
if (current_cell == null)
    return;
var key;
if (evt)
    // firefox or chrome
    key = String.fromCharCode(evt.charCode);
else
    // IE
    key = String.fromCharCode(event.keyCode);
if (key == ' ')
    current_cell.innerHTML = '';
else if (key >= '1' && key <= '9')
    current_cell.innerHTML = key;
  } 
```

如何重新附加事件侦听器，以便表格在保存后恢复时保持可编辑状态。

编辑

```
 var current_cell = null; // the currently selected cell
 var saved = {};        // Object for saving the current game
 function initialize() {
var col, row;
// Work through all the cells in the table and set
// onclick event handlers and classNames for the empty
// ones.
for (row = 0; row <=8; row++) {
    for (col=0; col <= 8; col++) {
        var cell = document.getElementById('cell_' + col + '_' + row);
        if (!parseInt(cell.innerHTML)) {
            // cell is empty
            cell.onclick = selectCell;
            cell.className = 'tofill';
        }
    }
}
document.onkeypress = keyPress;
save();
    } 
```

这就是我附加事件处理程序的方式，但是当我以同样的方式重新附加时，我仍然遇到同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:16:04.320

```
var current_cell = null; // the currently selected cell
var saved = {};        // Object for saving the current game
function initialize() {
var col, row;
// Work through all the cells in the table and set
// onclick event handlers and classNames for the empty
// ones.
for (row = 0; row <=8; row++) {
for (col=0; col <= 8; col++) {
    var cell = document.getElementById('cell_' + col + '_' + row);
    if (!parseInt(cell.innerHTML)) {
        // cell is empty
        cell.onclick = selectCell;
        cell.className = 'tofill';
    }
  }
}
document.onkeypress = keyPress;
save();
} 
```

只需将此代码重新插入 resotre 函数以重新附加事件侦听器

# c# - asp gridview 打印

> ID：12999256
> 
> 赞同：0
> 
> 时间：2012-10-21T15:33:03.010
> 
> 标签：c#, javascript, jquery, asp.net

我有一个 javascript 函数，如下所示，它正在工作。注意 - 我确实改变了行（来自互联网示例）

```
WinPrint.document.write(printContent.innerHTML); 
```

到

```
WinPrint.document.write(printContent.outerHTML); 
```

我不认为我应该这样做，但使用 innerhtml 网格根本没有格式化，但使用值 outerhtml 很好......

所以总结一下

1.  为什么我不能像所有示例一样使用innerhtml - 一定是我的代码中的某个错误

谢谢，达摩

**Javascript**

```
 <script type="text/javascript">
    function PrintGridData(GridToPrint) {

        var printContent = document.getElementById(GridToPrint);
        var windowUrl = 'about:blank';
        var UserLoggedIn = $("#lblUser").text()

        var now = new Date();
        var strDateTime = [[AddZero(now.getDate()), AddZero(now.getMonth() + 1), now.getFullYear()].join("/"), [AddZero(now.getHours()), AddZero(now.getMinutes())].join(":"), now.getHours() >= 12 ? "PM" : "AM"].join(" ");

        var windowName = 'Report';
        var AuditPrintDetail = 'Report ' + UserLoggedIn + " "  + strDateTime;

        var WinPrint = window.open(windowUrl, windowName, 'left=300,top=300,right=500,bottom=500,width=1000,height=500');
        WinPrint.document.write('<' + 'html' + '><head><link href="cssreference" rel="stylesheet" type="text/css" /><link href="assets/css/Main.css" rel="stylesheet" type="text/css" />    <title>' + AuditPrintDetail + '</title> </head><' + 'body  style="background:none !important"' + '>');
        WinPrint.document.write(printContent.outerHTML);
        WinPrint.document.write('<' + '/body' + '><' + '/html' + '>');
        WinPrint.document.close();
        WinPrint.focus();
        WinPrint.print();
        WinPrint.close();

    }

    function AddZero(num) {
        return (num >= 0 && num < 10) ? "0" + num : num + "";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:43:46.750

```
function printItn() {
        //you can put your contentID which is you want to print.

        var printContent = document.getElementById('<%= pnlForm.ClientID %>');
        var windowUrl = 'about:blank';
        var uniqueName = new Date();
        var windowName = 'Print' + uniqueName.getTime();

        //  you should add all css refrence for your Gridview. something like.

        var WinPrint= window.open(windowUrl,windowName,'left=300,top=300,right=500,bottom=500,width=1000,height=500');WinPrint.document.write('<'+'html'+'><head><link href="cssreference" rel="stylesheet" type="text/css" /><link href="gridviewcssrefrence" rel="stylesheet" type="text/css" /></head><'+'body style="background:none !important"'+'>');

        WinPrint.document.write(printContent.innerHTML); 
        WinPrint.document.write('<'+'/body'+'><'+'/html'+'>');
        WinPrint.document.close();
        WinPrint.focus();
        WinPrint.print();
        WinPrint.close();
        } 
```

从这里引用它...[点击查看讨论](https://stackoverflow.com/questions/9713890/how-to-print-the-gridview-of-page-in-require-format)。

还可以查看完整的示例，其中包含示例代码[javascript 以从客户端打印 gridview 数据](http://www.aspneto.com/how-to-print-asp-net-gridview-data-on-button-click-using-javascript.html)。

# ruby-on-rails - 如何使实例变量可用于模型进行计算，然后返回结果以查看？

> ID：12999261
> 
> 赞同：0
> 
> 时间：2012-10-21T15:33:20.517
> 
> 标签：ruby-on-rails, ruby

我是新来的轨道。我了解控制器中的实例变量从模型中获取数据并显示到视图中。我怎样才能将实例变量发送到模型？我想对变量运行计算并将其发送回模型更新的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:50:54.007

您应该将控制器实例变量作为方法参数传递给模型。这是一个例子：

```
# model
class MyModel < ActiveRecord::Base
  def run_computations var1, var2
    # perform complex computations
    [var1 * 2, var2 * 3]
  end
end

# controller
class MyController < ApplicationController
  def my_action
    @var1 = 10
    @var2 = 20

    @var1, @var2 = MyModel.run_computations @var1, @var2
    # MyModel.run_computations returns an array. The line above is a shortcut for
    #   picking the array apart. It is equivalent to this
    # arr = MyModel.run_computations @var1, @var2
    # @var1 = arr[0]
    # @var2 = arr[1]
  end
end 
```

# python - Boto 的 DynamoDB API 在使用 item_count 时返回错误值

> ID：12999262
> 
> 赞同：3
> 
> 时间：2012-10-21T15:33:20.940
> 
> 标签：python, amazon-web-services, boto, amazon-dynamodb

我正在使用 python 框架 Boto 与 AWS DynamoDB 进行交互。但是当我使用“item_count”时，它会返回错误的值。检索表中项目数的最佳方法是什么？我知道可以使用 Scan 操作，但这在资源上非常昂贵，如果表很大，可能需要很长时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T00:06:59.043

item_count 值仅每六个小时左右更新一次。所以，我认为 boto 正在向您返回服务返回的值，但该值可能不是最新的。

# java - 在 Android 中无法 http 连接

> ID：12999265
> 
> 赞同：1
> 
> 时间：2012-10-21T15:33:50.187
> 
> 标签：java, android, emulation, httpconnection

好吧，这段代码在 java 中运行良好，但是当我开始在 Android 4.0 模拟器上运行它时它崩溃了。在调试时我注意到它在 httpConn.connect(); 上崩溃了。线

```
 public class GetStringFromUrl {
public static String getString(String urlPageAdress) throws Exception
{

    URL url = new URL(urlPageAdress);
     HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
      urlConn.setRequestProperty("Accept-Encoding", "UTF-8");
     HttpURLConnection httpConn = (HttpURLConnection) urlConn;
      httpConn.setAllowUserInteraction(false);
     httpConn.connect(); //crashes on this line dunno know why

     InputStream in = null;

     if (httpConn.getContentEncoding() != null && httpConn.getContentEncoding().toString().contains("gzip")) {
     in = new GZIPInputStream(httpConn.getInputStream());
      } else {
      in = httpConn.getInputStream();
    }
     BufferedInputStream bis = new BufferedInputStream(in);
     ByteArrayBuffer baf = new ByteArrayBuffer(1000);
     int read = 0;
      int bufSize = 1024;
      byte[] buffer = new byte[bufSize];
     while (true) {
      read = bis.read(buffer);
      if (read == -1) {
    break;
      }
     baf.append(buffer, 0, read);

     }
      String body = new String(baf.toByteArray());
    return body;
} } 
```

方法用于 Main Activity

公共类 MainActivity 扩展 Activity{

```
ToggleButton  toogleButton;
 public final static String EXTRA_MESSAGE = "ru.kazartsevaa.table.MESSAGE";
int upDown;
int SpinnerCount;
  @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    upDown=0;

    setContentView(R.layout.activity_main);
} 
```

public void onClick(View v) 抛出异常 { System.out.print(SpinnerCount); // if(upDown==0) //0 - вылет 1 прилет //{ switch (v.getId()) { case R.id.UpDownButton: { //toogleButton = (ToggleButton) findViewById(R.id.UpDownButton ); // toogleButton.setOnCheckedChangeListener(this); } case R.id.SheremetievoButton: { Spinner SherSpinner = (Spinner) findViewById(R.id.SheremetievoSpinner);

```
 String SpinnerCount= SherSpinner.getItemAtPosition(SherSpinner.getSelectedItemPosition()).toString();
                    System.out.print(SpinnerCount);
                    new Thread(){ public void run() { 
                        try {
                            String body = GetStringFromUrl.getString("www.xyz.com");
                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        } }.start();

                        int crowd;

                }

        } 
```

注意：更改为新线程后，它停止崩溃但仍然写入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:42:25.127

您是在主线程中执行此操作吗？如果您在单独的线程中执行此操作，应该可以工作。

```
 public void onClick(View v) {
    try{
            new Thread(){
                    public void run() {
                        GetStringFromUrl.getString("www.xyz.com");                      
                    }
            }.start();
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

# php - 比较php中的IP地址不起作用

> ID：12999266
> 
> 赞同：-2
> 
> 时间：2012-10-21T15:34:20.447
> 
> 标签：php, ip

我正在尝试将用户的 IP 与允许的 IP 进行比较。就是说我的IP在回显时是不允许的*`97.103.49.59You do not have permission to do that.`*

我试图像这样比较它们：

```
$ip_address = $_SERVER['REMOTE_ADDR']; 
echo "$ip_address";
if(ip_adress=="97.103.49.59") { 
header('Location: Blog.php');
} else {
echo "You do not have permission to do that.";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:37:30.640

```
if(ip_adress=="97.103.49.59") { 
```

应该读

```
if($ip_address=="97.103.49.59") { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T15:39:25.317

它应该是

```
 if($ip_address=="97.103.49.59") 
```

您还可以允许或拒绝特定范围

```
$start = ip2long("97.103.49.1");
$end = ip2long("97.103.49.255");
$ip = ip2long($_SERVER['REMOTE_ADDR']);

if ($ip >= $start && $ip <= $end) {
    // In range
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T15:36:47.680

您忘记了 ip_adress 前面的 $。

```
if($ip_address=="97.103.49.59") 
```

应该做的伎俩。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T15:36:51.110

```
if($ip_adress=="97.103.49.59") { 
```

你忘了`$`那里..

# twitter-bootstrap - 为什么 Twitter Bootstrap 使用像素作为字体大小？

> ID：12999267
> 
> 赞同：104
> 
> 时间：2012-10-21T15:34:22.983
> 
> 标签：twitter-bootstrap, mobile, fonts, responsive-design, font-size

鉴于 Twitter Bootstrap 被设计为响应式/设备友好型，为什么它不使用相对字体大小？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-10-30T10:42:29.883

好吧，他们似乎是[躲在浏览器缩放的借口后面](https://github.com/twitter/bootstrap/issues/1943#issuecomment-9818302)。看到如此大量使用和有影响力的框架完全忽略了可访问性问题和响应式设计的基本基石，真的很难过。他们负有重大责任，不幸的是，他们似乎无意采取相应的行动。

[更新] 所以今天马克奥托回复了我上面引用的线程。可以预见的是，没有提及“像素完美”一词的可访问性和使用：

> 好的，这里有一些关于过去的决定和前进计划的背景。
> 
> 像素在每个浏览器中提供绝对控制和一致的渲染。
> 
> 设计师仍然主要以像素为单位进行思考和操作。
> 
> 如今，浏览器会放大整个页面，因此类型缩放或其他任何东西都不是问题。
> 
> 从历史上看，嵌套 em 一直很痛苦，并且可能需要额外的数学运算来计算图形/预期像素值。
> 
> 混合测量单位是丑陋的，我内心的强迫症讨厌它。通常不鼓励在 line-height 上使用单位，但可以立即了解计算的值是什么。我们将来可能会尝试避开这种情况。将来，我们可能会使用 ems 来确定字体大小，甚至可能使用 rems，但不会用于其他任何东西。这对于输入等的字体大小也是有争议的。这不是人们建立像素完美网站的方式。
> 
> 这有点结束了，希望足够连贯。随着这些变化的出现，我将尝试在博客中介绍这些变化，但我不确定 3.0 有多接近以及这一切将带来什么。

我会建议任何对此有强烈感受的人并[为此线程](https://github.com/twitter/bootstrap/issues/1943#issuecomment-9818302)+1 。

[[更新] V2.3 发布](http://blog.getbootstrap.com/2013/02/07/bootstrap-2-3-released/)博文中的 V3 路线图没有提及添加对 ems 的支持。

[[更新]此处](https://github.com/twitter/bootstrap/pull/6342)的拉取请求中提供了有关 Bootstrap V3 的更多信息，包括来自 Mark Otto 的以下内容：

> 我们探索了在像素上使用 rem 单位，但发现抵消使用它们的影响几乎没有什么好处。IE8 仍然需要一个像素回退，这是很多重复的代码行。此外，在任何地方都使用 rems 而不是像素会加剧这个问题。混合 rems 和像素现在似乎也没有意义。但是，我们可以并且将在未来的版本中继续对此进行评估。

然后最近（在其评论中）：

> 我非常怀疑此时我们是否会使用 rems 发货。改变一切——除了字体大小——是一项艰巨的任务，而且几乎没有什么好处可以抵消这一点。除了将字体大小的代码行加倍之外，以任何其他方式支持 rems 似乎充其量是乏味的。也就是说，我们总是可以在未来的版本中重新访问。目前，我们坚持使用像素。

由于对 Bootstrap 的大量功能感到不满意，尤其是它缺乏对 em 的支持，我强烈建议如果您只想要网格，请查看[Susy](http://susy.oddbird.net/guides/) ，或者对于整个 enchilada 使用[Zurb Foundation 4 。](http://foundation.zurb.com/)不要让 Bootstrap 的流行影响你的判断。任何人都可以使用 Bootstrap 构建一些东西，这正是它的问题——~~它是为网络经验最少的人设计的。仅仅因为世界上有很多麦当劳并不意味着它是一个健康的饮食场所。~~

[编辑] 好的。说这话很傻。自从我写了这篇文章后，我就使用了 BS3，它大大提升了它的游戏性。我不应该发表这样的一次性评论，但我仍然认为它在使用像素来调整字体大小方面做出了错误的决定。除了可访问性问题外，em 在其他方面也很有用。

*[更新] V4 中似乎将*支持rems （Mdo 引用自[此处](https://github.com/twbs/bootstrap/issues/1943#issuecomment-21700130)）：

> 对于那些后续，当我们放弃 IE8 支持时，我们将能够在 v4 中从像素更改为 REM。在那之前不能做太多事情。

[2017 年 2 月更新] Bootstrap 4 仍处于 Alpha 阶段，但在其[Typography docs](https://v4-alpha.getbootstrap.com/content/typography/)中显示了 rems 的使用，但在其[layout docs](https://v4-alpha.getbootstrap.com/layout/overview/)*中没有*显示 rems 的使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-01T14:05:24.363

> 不要让 Bootstrap 的流行影响你的判断。任何人都可以使用 Bootstrap 构建一些东西，这正是它的问题——它是为网络经验最少的人设计的。仅仅因为世界上有很多麦当劳并不意味着它是一个健康的饮食场所。

你可以争辩说不要让它以消极的方式影响你的判断。这是一个可靠的框架，如果您花时间在如何有效地使用它上，那么您的大部分论点都落在了它的头上。

虽然它经常被经验最少的人使用——这并没有错——但它也被经验丰富的人*使用*。

至少，它是一个非常宝贵的原型设计工具。充其量，它是完全可定制的。你可以挑选、修改、添加——这就是它被称为“框架”的原因。

两年多来，我一直在我的一些项目中有效地使用它——它就像你想要的那样精简。我只使用了表单框架、网格、整个代码库并对其进行了定制以满足我的需求。在很多方面，它“提升”了我的游戏水平，让我更深入地进行预处理、使用变量、磨练我构建项目的方式。

是的，有一些问题。`px`字体大小和使用[Less](http://lesscss.org/)是两个。但是，由于它是完全开源的，您可以轻松找到解决这两个问题的选项。

我调查了[Foundation](http://foundation.zurb.com/)并喜欢我所看到的内容，但不幸的是，我不得不支持 IE8，就像许多开发人员一样。Foundation 已经放弃了对 IE8 的支持，这对我来说是“不行”。尽管如此，我并不打算放弃整个框架，尤其是仅基于几个问题就可以*免费*使用和*自由修改的框架！*

哎呀，在一个项目中，我提升了 Foundation 的一部分和 Bootstrap 的一部分，并添加了我自己的自定义代码——这就是开源的美妙之处。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-08T12:26:08.173

如果您仍然更喜欢带有 em 和 rem 支持的 Bootstrap，您可以看看这个 - [https://github.com/ivayloc/twbs-rem-em](https://github.com/ivayloc/twbs-rem-em)无需进行任何计算来转换以 rem 或 em 为单位的像素，有内置的`@mixins`-`@include rem(property, values)`也可以使用 px 和 em 转换`em(value)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-15T19:32:56.813

虽然我广泛使用 Bootstrap，但在某些领域，可访问性并不重要。我想对于一个使用如此广泛的平台，不可避免地要进行权衡。

我完全明白为什么他们选择为字体大小保留像素。框架字体的 em 继承问题简直就是一场噩梦。

rems 是另一种选择，但浏览器支持仍然存在问题。

您可以创建自己的 rems mixin 并替换使用基本字体大小变量的每一行 less。

这就是引导程序的美妙之处——以及类似的框架——它是工作的坚实基础。

是的，我已经提到 twitter bootstrap 的一些元素不是那么容易访问的 - 一个小例子，使用“display：none”而不是使用剪辑。我很确定这是有正当理由的——而且，如果你愿意，你可以很容易地修改它。

Bootstrap 并非完美无缺，但是，我怀疑它是否曾经打算成为您所有要求的最终答案。它是一个基础 - 一个“引导程序” - 学习并正确使用它，添加它，混合它 - 至少，它是一个很棒的框架，可以用来制作原型，或者拼凑一个快速网站。更进一步，其中有一些非常坚实的基础可以应用于*任何*网站。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T16:29:06.807

我认为，这是因为桌面优先方法。Twitter Bootstrap 是响应友好的，但“优雅降级”的方法。

# ios - UIScrollview中的IOS-Fixed内容

> ID：12999269
> 
> 赞同：0
> 
> 时间：2012-10-21T15:34:36.657
> 
> 标签：ios, uiscrollview, uilabel

我有一个问题`UIScrollView`和`UILabel`。我正在添加`UILabel`using `addSubview`inside `UIScrollView`，一个`UILabel`在顶部

设置宽度：3000 - 高度：20；

`UILabel`左侧其他：设置高度：1000 - 宽度：50；

中间`UISCrollView`是[这里](http://mocku.ps/20zxhb)

我想

*   水平滚动`UILabel`时，顶部向左或向右移动（不向上或向下移动）

*   垂直滚动`UILabel`时，左侧向上或向下移动（不向右或向左移动）

# c# - 取得文件c#的所有权

> ID：12999272
> 
> 赞同：8
> 
> 时间：2012-10-21T15:34:53.170
> 
> 标签：c#, file, io, file-security

我正在尝试获取文件的所有权并通过 C# 将其删除。该文件是 iexplorer.exe，默认为当前所有者 - TrustedInstaller。FileSecurity.SetOwner 方法似乎设置了指定的所有权，但实际上并没有改变初始所有者并且没有抛出异常。显然，下一次删除文件的尝试会引发异常。应该在代码中进行哪些更改以获取文件的所有权并将其删除？

```
var fileS = File.GetAccessControl(@"C:\Program Files (x86)\Internet Explorer\iexplore.exe");
fileS.SetOwner(new System.Security.Principal.NTAccount(Environment.UserDomainName, Environment.UserName));
File.Delete(@"C:\Program Files (x86)\Internet Explorer\iexplore.exe"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T16:06:40.737

您必须明确启用[`SeTakeOwnershipPrivilege`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb530716%28v=vs.85%29.aspx#SE_TAKE_OWNERSHIP_NAME)：

> 需要获得对象的所有权而不被授予任意访问权限。此特权允许所有者值仅设置为持有者可以合法分配为对象所有者的那些值。用户权利：取得文件或其他对象的所有权。

我建议您阅读 Mark Novak 撰写的精彩文章：[在托管代码中可靠、安全和高效地操纵权限](http://msdn.microsoft.com/en-us/magazine/cc163823.aspx)。

和/或看看他的[样本](http://msdn.microsoft.com/en-us/magazine/cc164701.aspx?code=true&level=root%2cPrivilege11)。

**更新**

示例用法：

```
var fileS = File.GetAccessControl(@"C:\Program Files (x86)\Internet Explorer\iexplore.exe");

Privilege p;
bool ownerChanged = false;
try
{
    p = new Privilege(Privilege.TakeOwnership);
    p.Enable();

    fileS.SetOwner(new System.Security.Principal.NTAccount(
        Environment.UserDomainName, Environment.UserName));

    ownerChanged = true;
}
catch(PrivilegeNotHeldException e)
{
   // privilege not held
   // TODO: show an error message, write logs, etc.
}
finally
{
    p.Revert();
}

if (ownerChanged)
    File.Delete(@"C:\Program Files (x86)\Internet Explorer\iexplore.exe"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-06T16:12:53.967

```
 string filepath = @"C:\Program Files (x86)\Internet Explorer\iexplore.exe";

        //Get Currently Applied Access Control
        FileSecurity fileS = File.GetAccessControl(filepath);

        //Update it, Grant Current User Full Control
        SecurityIdentifier cu = WindowsIdentity.GetCurrent().User;
        fileS.SetOwner(cu);
        fileS.SetAccessRule(new FileSystemAccessRule(cu, FileSystemRights.FullControl, AccessControlType.Allow));

        //Update the Access Control on the File
        File.SetAccessControl(filepath, fileS);

        //Delete the file
        File.Delete(filepath); 
```

添加以下导入

```
 using System.IO;
        using System.Security.AccessControl;
        using System.Security.Principal; 
```

在提升模式下运行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T05:33:02.007

使用示例中的类权限在 Windows 8.1 中提供支持： [可靠、安全和高效地操作托管代码中的权限](https://msdn.microsoft.com/en-us/magazine/cc163823.aspx)

```
 private bool TryDeleteFile(string fileName)
    {
        string filePath = Path.GetFullPath(fileName);
        var fi = new FileInfo(filePath);

        bool ownerChanged = false;
        bool accessChanged = false;
        bool isDelete = false;

        FileSecurity fs = fi.GetAccessControl();
        Privilege p = new Privilege(Privilege.TakeOwnership);

        try
        {
            p.Enable();
            fs.SetOwner(WindowsIdentity.GetCurrent().User);
            File.SetAccessControl(filePath, fs); //Update the Access Control on the File
            ownerChanged = true;
        }
        catch (PrivilegeNotHeldException ex) { }
        finally { p.Revert(); }

        try
        {
            fs.SetAccessRule(new FileSystemAccessRule(WindowsIdentity.GetCurrent().User, FileSystemRights.FullControl, AccessControlType.Allow));
            File.SetAccessControl(filePath, fs);
            accessChanged = true;
        }
        catch (UnauthorizedAccessException  ex) { }

        if (ownerChanged && accessChanged)
        {
            try
            {
                fi.Delete();
                isDelete = true;
            }
            catch (Exception ex) {  }
        }

        return isDelete;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-15T13:44:12.770

请参阅这些注册表项以添加上下文菜单。我能够在 Windows 7 上重命名文件夹以及 iexplorer_OFF.exe。您可能可以从您的代码中外壳/执行相同的内容。

[https://www.howtogeek.com/howto/windows-vista/add-take-ownership-to-explorer-right-click-menu-in-vista/](https://www.howtogeek.com/howto/windows-vista/add-take-ownership-to-explorer-right-click-menu-in-vista/)

# postgresql - 仅允许 postgres 用户列表角色

> ID：12999274
> 
> 赞同：1
> 
> 时间：2012-10-21T15:35:08.433
> 
> 标签：postgresql, postgresql-9.1

如何禁止非超级用户查看 postgresql 服务器中的其他用户？

前任。如果当前登录的用户不是超级用户，则结果来自

> 从 pg_roles 中选择 *；

或者

> \du

应该只有行与他的角色

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:51:35.097

您可以撤销对系统目录中身份验证 ID 表的访问权限：

```
REVOKE SELECT ON pg_catalog.pg_authid FROM public;
REVOKE SELECT ON pg_catalog.pg_auth_members FROM public; 
```

请注意，撤销访问权限`pg_roles`是不够的，因为`pg_roles`这只是一个视图，`pg_authid`手动运行视图查询或使用相同查询定义新视图很简单。`information_schema`视图也可以直接使用，`pg_authid`并且不受撤销对`pg_roles`. `pg_roles`如果您已撤销对`pg_authid`.

请注意，撤销对全局表的访问仍然是针对每个数据库的操作。

撤销对系统目录的访问可能会产生副作用，包括：

*   某些系统功能无法按预期工作
*   JDBC 驱动程序等工具中的一些元数据操作失败
*   ... ETC

并且通常不被认为是支持的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:14:00.183

```
revoke select on pg_roles from public; 
```

# javascript - 在 ASPX 页面中嵌入 Javascript 调用的运行时错误

> ID：12999280
> 
> 赞同：-1
> 
> 时间：2012-10-21T15:35:46.037
> 
> 标签：javascript, asp.net

我正在尝试启动并运行一个基本网页，该网页显示我使用 SauceLabs 创建的测试视频。为此，他们提供了将视频嵌入 Javascript 的服务。

我在 Visual Studio 2010 中的 ASP 中创建网页。但是，当我导航到我的页面时出现错误。

我的 ASP 页面如下所示，它只接受一个 jobID (jID) 和一个访问代码 (code)，它们被馈送到 JavaScript 调用中。

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Show Video.aspx.cs" Inherits="ResultsDisplay.Show_Video" %>

   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

   <html xmlns="http://www.w3.org/1999/xhtml">
   <head runat="server">
       <title>Test Video</title>
       <script language="javascript" type="text/javascript" src="http://saucelabs.com/video-embed/<%=jID%>.js?auth=<%=code%>">
       </script>
   </head>
   <body>
       <form id="form1" runat="server">
       <div>
           <div id="flowerrorbox"></div>
           <a
                href="."
                style="display:block;height:450px"
                id="player">
           </a>
       </div>
       </form>
   </body>
   </html> 
```

但是，当我访问该页面时，Visual Studio 会引发错误（在动态脚本块中），如下所示：

> Microsoft JScript 运行时错误：“flowplayer”未定义

虽然我可以忽略该错误，但我的网页上没有显示任何内容。

有任何想法吗？

谢谢，

戈登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:50:04.320

有一些 JavaScript 代码试图使用在`flowplayer`某处命名的变量，但该变量尚未定义。您可以将标签中呈现的源代码粘贴到`script`浏览器的地址栏中并取回代码吗？您是否尝试过重新加载页面`Ctrl-F5`？脚本是否假设`flowplayer`在页面加载时已经定义了一个名为的变量？这些是您可能想要研究的一些调试问题。

# heroku - ActiveRecord::StatementInvalid 错误

> ID：12999281
> 
> 赞同：1
> 
> 时间：2012-10-21T15:35:46.337
> 
> 标签：heroku, ruby-on-rails-3.1

这个问题已经被问了很多，但仍然，似乎没有任何工作。我的应用程序在测试中运行完美，但在 heroku 上运行时，我收到错误 500，说“我们很抱歉，但出了点问题”。我检查了服务器的日志文件，我的错误似乎在某处：

 `````
2012-10-21T15:29:40+00:00 app[web.1]: 
2012-10-21T15:29:40+00:00 app[web.1]: Started GET "/" for 117.192.23.223 at 2012-10-21 15:29:40 +0000
2012-10-21T15:29:40+00:00 app[web.1]: cache: [GET /] miss
2012-10-21T15:29:40+00:00 app[web.1]: 
2012-10-21T15:29:40+00:00 heroku[router]: GET whispering-coast-7415.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=5ms status=301 bytes=115
2012-10-21T15:29:40+00:00 app[web.1]: 
2012-10-21T15:29:40+00:00 app[web.1]: Started GET "/movies" for 117.192.23.223 at 2012-10-21 15:29:40 +0000
2012-10-21T15:29:40+00:00 app[web.1]: 
2012-10-21T15:29:40+00:00 app[web.1]:   Processing by MoviesController#index as HTML
2012-10-21T15:29:40+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-10-21T15:29:40+00:00 heroku[router]: GET whispering-coast-7415.herokuapp.com/movies dyno=web.1 queue=0 wait=0ms service=17ms status=500 bytes=728
2012-10-21T15:29:40+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::Error: ERROR:  column "movies.id" must appear in the GROUP BY clause or be used in an aggregate function
2012-10-21T15:29:40+00:00 app[web.1]: LINE 1: SELECT "movies".* FROM "movies"  GROUP BY rating
2012-10-21T15:29:40+00:00 app[web.1]: 
2012-10-21T15:29:40+00:00 app[web.1]:                ^
2012-10-21T15:29:40+00:00 app[web.1]: 
2012-10-21T15:29:40+00:00 app[web.1]: cache: [GET /movies] miss
2012-10-21T15:29:40+00:00 app[web.1]: : SELECT "movies".* FROM "mo
vies"  GROUP BY rating):
2012-10-21T15:29:40+00:00 app[web.1]:   app/controllers/movies_controller.rb:11:in `index'
2012-10-21T15:29:40+00:00 app[web.1]:   app/models/movie.rb:4:in `get_ratings'
2012-10-21T15:29:40+00:00 app[web.1]: 
2012-10-21T15:29:41+00:00 heroku[router]: GET whispering-coast-7415.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=8ms status=200 bytes=0
2012-10-21T15:29:41+00:00 app[web.1]: cache: [GET /favicon.ico] stale, invalid, store 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:26:28.600

*PostgreSQL（在 Heroku 上）要求您对 SELECT 列表中的所有*列进行 GROUP BY ，因此在这种情况下，而不是：

```
SELECT "movies".* FROM "movies"  GROUP BY rating 
```

您可能想要执行以下操作：

```
SELECT rating FROM "movies" GROUP BY rating 
```

或在 Rails 中：

```
Movie.select(:rating).group(:rating) 
`````

# php - PHP PDO 问题与净化的 ORDER BY 字段

> ID：12999287
> 
> 赞同：0
> 
> 时间：2012-10-21T15:36:18.933
> 
> 标签：php, jqgrid, pdo

我有一个“ajax 脚本/处理程序”，它将一堆产品类别返回到我的 jqGrid。sql最终看起来像这样：

```
$sql = 'SELECT * FROM product_categories ORDER BY :sidx :sord LIMIT :start , :limit';
$sth = $dbh->prepare($sql);
$sth->bindParam(':sidx', $sidx);
$sth->bindParam(':sord', $sord);
$sth->bindParam(':start', $start, PDO::PARAM_INT);
$sth->bindParam(':limit', $limit, PDO::PARAM_INT);
$sth->execute(); 
```

现在，我已经遇到了 '$start' 的问题，因为 PDO 显然有 LIMIT 的问题，所以我必须明确地将它设置为 (int) 以便上述方法可以工作。我的下一个问题是 ORDER BY 字段被引用。如何停止报价？我可以直接传递 '$sidx' 和 '$sord' 值而不对其进行清理，但这会很危险。现在，上面的 SQL 生成为：

```
SELECT * FROM product_categories ORDER BY 'product_category' 'asc' LIMIT 0 , 10 
```

当我真正需要它看起来像：

```
SELECT * FROM product_categories ORDER BY product_category asc LIMIT 0 , 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:38:02.520

也许最好的解决方案是直接传递`$sidx`and`$sord`值而不对其进行清理，但之前进行验证。像：

```
$sidx = (!in_array($sidx,array('name','slug','description'))) ? 'name' : $sidx;
$sord = (!in_array($sord,array('asc','desc'))) ? 'asc' : $sord;
$sql = 'SELECT * FROM product_categories ORDER BY '.$sidx.' '.$sord.' LIMIT :start , :limit';
$sth = $dbh->prepare($sql);
$sth->bindParam(':start', $start, PDO::PARAM_INT);
$sth->bindParam(':limit', $limit, PDO::PARAM_INT);
$sth->execute(); 
```

# haskell - 如何在 hsparql 中指定语言文字？

> ID：12999294
> 
> 赞同：4
> 
> 时间：2012-10-21T15:36:51.047
> 
> 标签：haskell, rdf, sparql

如果原始 SPARQL 是`rdfs:label "D (programming language)"@en`，那么 hsparql 语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:51:23.347

我是您遇到问题的 hsparql DSL 的维护者。添加了一个“simpleSelectWithLiteral”函数作为示例： [https ://github.com/robstewart57/hsparql/blob/master/tests/DBPedia.hs#L51](https://github.com/robstewart57/hsparql/blob/master/tests/DBPedia.hs#L51)

这能解决你的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:08:37.250

查看[HSparql Github 页面上的](https://github.com/robstewart57/hsparql)[DSL 定义](https://github.com/robstewart57/hsparql/blob/master/Database/HSparql/QueryGenerator.hs)（第 251 行），看起来适用以下 DSL 规则：

```
instance TermLike ([Char], [Char]) where
  varOrTerm (s, lang') = Term . RDFLiteralTerm $ RDFLiteralLang s lang' 
```

自从我写任何 Haskell 以来已经太久了，所以我不能 100% 确定这会转化为一个术语，但我认为这意味着使用两个字符串的元组：

```
("value", "en") 
```

# boost - boost jam：避免构建路径中的工具集和变体

> ID：12999298
> 
> 赞同：1
> 
> 时间：2012-10-21T15:37:13.387
> 
> 标签：boost, bjam

当使用 boost jam 构建 c++ 项目时，可执行文件/库位于类似的路径中

```
BUILD-DIR/SUBDIR/gcc-4.7.2/debug/EXEC_NAME 
```

配置文件中有没有办法摆脱可执行文件的 gcc-4.7.2/debug 路径？

谢谢！

# mfc - 在记事本中创建超链接(textEdit)[MFC]

> ID：12999309
> 
> 赞同：0
> 
> 时间：2012-10-21T15:38:35.143
> 
> 标签：mfc

我正在使用 MFC 构建一个 textEdit 应用程序。有没有办法在用户写网址时自动创建超链接？这就像当你写一个网址“www.google.com”时，应用程序会检测到网址并立即创建一个超链接。我搜索了解释这个的文档，但找不到它..我做不到..我已经制作了记事本，但我无法在记事本上添加超链接功能。

以下句子是超链接的功能。

1.  单击文本需要打开浏览器窗口到文本指定的位置。

2.  光标在控件上移动时需要从标准箭头光标变为指向的食指。

3.  当光标移到控件上时，控件中的文本需要加下划线。

4.  超链接控件需要以不同的颜色显示文本——黑色是不行的。我添加的功能是：

5.超链接控件一旦访问需要改变颜色。

6.超链接控件应该可以从键盘访问。

7.它应该安装一些钩子，以允许程序员在控件具有焦点或光标悬停在控件上时执行某些操作。

在功能中，我最想完成的是第一个。如果我单击超链接文本，它应该链接到 Internet 上的浏览​​器窗口。

请回答并帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:24:38.803

只需使用[CRichEditCtrl](http://msdn.microsoft.com/en-us/library/76a787xf%28v=vs.100%29.aspx)控件（请记住在您的中调用[AfxInitRichEdit2](http://msdn.microsoft.com/en-us/library/h6hweatz%28v=vs.100%29.aspx)`InitInstance`）。调用[SetAutoURLDetect](http://msdn.microsoft.com/en-us/library/sa4shy4a%28v=vs.100%29.aspx)。完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:56:48.013

不幸的是，这还不足以让它发挥作用。它会将类似于 URL 的文本显示为带蓝色下划线的文本，但不会调用链接。

这将不得不通过额外的代码来处理。这将设置所需的事件掩码：

```
long lMask = m_RichEditCtrl.GetEventMask();
m_RichEditCtrl.SetEventMask(lMask | ENM_LINK);

m_RichEditCtrl.SetAutoURLDetect(); 
```

还必须处理反映的 EN_LINK 以跟随链接。例如：

```
void CHyperLinkInEditView::OnEnLink(NMHDR *pNMHDR, LRESULT *pResult)
{
    ENLINK *p_Link = reinterpret_cast<ENLINK *>(pNMHDR);
    if(p_Link && p_Link->msg == WM_LBUTTONDOWN)
    {
        //int iRange = m_RichEditCtrl.GetTextRange(p_enLinkInfo->chrg.cpMin, p_enLinkInfo->chrg.cpMax);
        m_RichEditCtrl.SetSel(p_Link->chrg);

        CString szLinkString = m_RichEditCtrl.GetSelText ();
        ShellExecute(m_hWnd, L"Open", szLinkString, NULL, NULL, SW_MAXIMIZE);
    }
    *pResult = 0;
} 
```

以上所有将解决要求1、2、3（部分-文本总是下划线）和4。我不太明白5、6和7。

你能详细说明一下吗？

# c++ - 试图将静态方法从一个类转换为另一个类

> ID：12999312
> 
> 赞同：0
> 
> 时间：2012-10-21T15:38:51.197
> 
> 标签：c++, class, static

我有 3 个类 LocationData、PointTwoD 和 MissionPlan。类 MissionPlan 是我的驱动程序类，它将运行我的所有程序。在我的 LocationData 中，有一个静态方法接收来自用户的 5 个输入，它将计算为浮点数并返回值。如前所述，MissionPlan 是我的驱动程序类，所有输入都将链接到我的 MissionPLan 类中，我尝试在 MissionPlan 中调用静态方法来计算值 LocationData::computeCivIndex(s,i,j,k, l); 但它返回给我一个很长的错误。

**/tmp/ccK8Rwha.o: 在函数`MissionPlan::MissionPlan()': test.cpp:(.text+0x9f1): undefined reference to`LocationData::computeCivIndex(std::basic_string, std::allocator >, int, int, float, float)' /tmp/ccK8Rwha.o: 在函数‘MissionPlan::MissionPlan() '：**

**test.cpp:(.text+0xfb7): undefined reference to `LocationData::computeCivIndex(std::basic_string, std::allocator >, int, int, float, float)' collect2: ld 返回 1 个退出状态**

```
class LocationData
{   
    private:
        //codes for initilization
    public:
    LocationData();
    LocationData(string,int,int,float,float);
    //getter and setter methods..
    static float computeCivIndex(string,int,int,float,float);
};

class MissionPlan
{
    public:
    MissionPlan();
};

static float computeCivIndex(string sunType, int noOfEarthLikePlanets,int     noOfEarthLikemoons, float aveParticulateDensity, float avePlasmaDensity)
{
    LocationData data; //not sure if i need this
        //methods to caculate...
    float ci = 0.0;
        return ci;
}

MissionPlan::MissionPlan()
{
        int choice; // to capture what user inputs into menu
        int count=0; 
            //codes to get user inputs
        cin>>choice;
        for(;;)
        {
        if(choice == 1)
        {       
            int i,j,x,y;
        float k,l;
         string s;
       //codes to get user inputs
        LocationData::computeCivIndex(s,i,j,k,l); //the part where error occurs
         count++;
     }
    else if(choice == 2)
    {
        cout<<"Computation completed!"<<endl;
        break;
    }
    else if(choice==3);
    else if(choice==4);
    else
        cout<<"Please enter number 1 to 4 only!"<<endl;
    }//end of do loop
}//end of MissionPlan()
int main()
{
    MissionPlan plan;
    MissionPlan();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:18:10.310

Two errors from what you've posted:

```
static float computeCivIndex(string sunType, int noOfEarthLikePlanets,int     noOfEarthLikemoons, float aveParticulateDensity, float avePlasmaDensity)
{
    LocationData data; //not sure if i need this
        //methods to caculate...
    float ci = 0.0;
        return ci;
} 
```

This function should be:

```
float LocationData::computeCivIndex(string sunType, int noOfEarthLikePlanets,int     noOfEarthLikemoons, float aveParticulateDensity, float avePlasmaDensity)
{
    LocationData data; //not sure if i need this
        //methods to caculate...
    float ci = 0.0;
        return ci;
} 
```

Secondly, I don't know how much this is correct:

in your `main` function: you defined something that doesn't seem right

`MissionPlan();`

You're calling a constructor without an object? Although its valid syntax, and the constructor will be called.. why do it twice?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:45:00.957

你还没有实现静态方法——你已经创建了另一个。

试试这个：

```
float LocationData::computeCivIndex... 
```

在您实施它的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:47:15.730

您声明了 LocationData 类的静态方法，但从未定义它。

改变

```
static float computeCivIndex(string sunType, int noOfEarthLikePlanets,int     noOfEarthLikemoons, float aveParticulateDensity, float avePlasmaDensity) 
```

至

```
float LocationData::computeCivIndex(string sunType, int noOfEarthLikePlanets,int     noOfEarthLikemoons, float aveParticulateDensity, float avePlasmaDensity) 
```

# javascript - 使用 Javascript-Header 问题更改属性

> ID：12999314
> 
> 赞同：1
> 
> 时间：2012-10-21T15:38:56.130
> 
> 标签：javascript, html, css

下面的 HTML 在我的网站上显示了一种花哨的字体，因为我做了一些改动`<h2>`

```
<section id="content">
    <article>
        <h2 id="titletext">Welcome to <span>Pomona High School!</span></h2>
        <p id="infotext" style="width: 773px; height: 28px;" >Welcome to the new Pomona High School site! Please give us feedback!</p>
        <br />
    </article>
</section>​ 
```

这在网站上显示得很好。

![Fancy Header 2 字体](../Images/c651ee19152bd6bd78cbbf4a55e1376e.png)

当用户现在转到任务栏并选择其中一个子菜单项时，`<h2>`文本将更改为指定的字符串值。我进入 Javascript 编辑器并生成以下内容。

```
window.onhashchange = function() { //when the hash changes (the '#' part)
    var loc = window.location + ""; //get the current location (from the address bar)
    var curHash = loc.substr(loc.lastIndexOf("#")); //get what's after the '#'
    if (curHash == "#mission") { //else if it's #mission
        document.getElementById('titletext').innerHTML = 'Mission Statement';
    }

    else {
        document.getElementById('titletext').innerHTML = 'Welcome to Pomona High School';

    }
};​ 
```

将其中一个菜单项链接到#mission，我成功地更改了文本。但是字体更改为默认`<h2>`字体。

我需要有关如何将我的自定义字体带入 Javascript 中的字符串的帮助。提前致谢！

CSS 样式表用于`<h2>`：

```
h2 {
    font-size: 30px;
    line-height: 1.2em;
    font-weight: normal;
    color: #212222;
    margin-bottom: 22px;
}

h2 span {
    color: #8a8a8a;
} 
```

这是两个自定义字体文件（太大而无法复制并粘贴到 Stack Overflow）：-

*   [常规字体](http://www.2shared.com/document/ei1M_wuV/Humanst521_Lt_BT_400font.html)
*   [浅色字体](http://www.2shared.com/document/iZmz54Wn/Humanst521_BT_400font.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:45:03.650

您的代码实际上正在替换

```
Welcome to <span>Pomona High School!</span> 
```

和

```
Welcome to Pomona High School! 
```

注意，没有元素。只需使用 span 标签设置它，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:45:16.000

> **来源：** [MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)

以下是 MDN 对此的看法：

> hashchange 事件在窗口的哈希值发生变化时触发（参见 location.hash）。
> 
> **句法：-**
> 
> *   `window.onhashchange = funcRef;`
> *   `<body onhashchange="funcRef();">`
> *   `window.addEventListener("hashchange", funcRef, false);`

我*认为*传递`function() { ... }`是一个函数引用，但你可以尝试先定义函数然后传递一个命名引用吗？代码会：

```
function hashChange() { //when the hash changes (the '#' part)
    var loc = window.location + ""; //get the current location (from the address bar)
    var curHash = loc.substr(loc.lastIndexOf("#")); //get what's after the '#'
    if (curHash == "#mission") { //else if it's #mission
        document.getElementById('titletext').innerHTML = 'Mission Statement';
    }

    else {
        document.getElementById('titletext').innerHTML = 'Welcome to Pomona High School';

    }
};

window.onhashchange = hashChange; 
```

​</p>

* * *

好吧，我很困惑。[在这个 JSFiddle](http://jsfiddle.net/YatharthROCK/KfAFE/)中它对我有用时，一定还有其他事情发生......

* * *

您的代码删除了可能提供样式`<span>`的on hash 更改中的。`<h2>`所以它真的应该是：

```
window.onhashchange = function() { //when the hash changes (the '#' part)
    var loc = window.location + ""; //get the current location (from the address bar)
    var curHash = loc.substr(loc.lastIndexOf("#")); //get what's after the '#'

    if (curHash == "#mission") { //else if it's #mission
        document.getElementById('titletext').innerHTML = '<span>Mission Statement</span>';
    }

    else {
        document.getElementById('titletext').innerHTML = 'Welcome to <span>Pomona High School</span>';
    }​
} 
```

* * *

另外，我认为您混淆了`if`and`else`语句。这：

```
else if(curHash == "#mission") {
    ...
}

else {
    ...
} 
```

真的应该是：

```
if(curHash == "#mission") {
    ...
}

else if {
    ...
} 
```

# jsf - 如何在jsf中启用浏览器缓存

> ID：12999323
> 
> 赞同：3
> 
> 时间：2012-10-21T15:39:27.747
> 
> 标签：jsf, web-applications, jsf-2, browser-cache

我已经使用 JSF 2.0 创建了一个 Web 应用程序。我从朋友那里得到反馈说我应该做“浏览器缓存”，因为我有很多图像。

但是我不知道如何在 JSF 中做同样的事情。任何想法/提示将不胜感激。

关于要做什么的概念也将起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T15:44:40.250

只需使用`<h:graphicImage name="...">`而不是`<img src="...">`. 这样，默认的 JSF 资源处理程序将指示浏览器默认将它们缓存 1 周，这可以使用依赖于实现的上下文参数进行配置，在 Mojarra 的情况下如下：

```
<context-param>
    <param-name>com.sun.faces.defaultResourceMaxAge</param-name>
    <param-value>3628800000</param-value> <!-- 6 weeks -->  
</context-param> 
```

请注意，使用`<h:outputScript>`and`<h:outputStylesheet>`代替`<script>`and时同样适用`<link rel="stylesheet">`。

# assembly - 程序集将 2 个十六进制值合二为一

> ID：12999324
> 
> 赞同：0
> 
> 时间：2012-10-21T15:39:38.653
> 
> 标签：assembly, hex, bit-shift

我目前正在学习组装，但遇到了一个问题。我需要将 0x006B 转换为 0xF06B。视频内存中字符的“模板”是 0xTextcolor(white)-bgColor(black)-charactercode(6B)。我认为我最好的选择是移位？虽然我一点也不熟悉。昨天刚开始学习组装。

编辑：

首先感谢各位的回复，我明白了。我正在使用 0x10c 开发套件，如果我没记错的话，它会模拟 DCPU-16 cpu。我需要做的是（这段代码是循环的一部分）

```
 set a, [text+i]
    set b, 0xf000
    bor a, b
    set [0x8000+i], a ;Put the data in the video memory 
```

其中“a”是以 0x00XX 格式读取的当前字符。'bor' 是 '|' Tobias 指出的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:47:30.747

我不知道你使用什么汇编器，但你必须或 0x06B 和 0xF00：

```
0x06B | 0xF00 
```

如何做到这一点取决于您的装配..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T11:29:17.720

```
set a, [text+i]
and a, 0x00FF
bor a, 0xf000
set [0x8000+i], a ;Put the data in the video memory 
```

为什么 ？`set a, [xxxx]`将读取**WORD**，而不是 BYTE，因此如果您的文本未解压缩或包含颜色属性，您将在定义颜色属性的 MSB 上得到垃圾。另外，您可以直接添加 OR 您想要的属性。你不需要浪费一个寄存器来做到这一点。

即使你可以避免使用任何寄存器（除了我）：

```
set [0x8000+i], [text+i]
and [0x8000+i], 0x00FF
bor [0x8000+i], 0xf000 
```

但是，此代码可能会在 RAM 上使用更多空间，并且可能会慢几个周期。

# emacs - Speedbar如何添加对自定义源文件的支持？

> ID：12999328
> 
> 赞同：4
> 
> 时间：2012-10-21T15:40:56.370
> 
> 标签：emacs, emacs-speedbar

我希望 Speedbar 显示轮廓（变量、函数和其他“有趣”对象的列表”）我在它不理解的源文件中。我有代码为有问题的源生成标签，我应该在哪里寻找钩子/配置来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:37:28.377

您可以使用`speedbar-add-supported-extension`函数添加默认情况下speedbar不理解的新文件。

来自`speedbar.el`：

> 您应该使用功能“speedbar-add-supported-extension”在运行时添加新扩展，或使用配置对话框在 .emacs 文件中设置它。如果您向此列表添加扩展名，但它没有出现，您可能还需要修改“completion-ignored-extension”，这也有助于文件完成。

除此之外，您可能还想教 speedbar 如何使用`speedbar-fetch-etags-parse-list`. 对于带有文件扩展名的 C/C++ 风格的语言，`.foo`您可能想要做这样的事情。

```
(speedbar-add-supported-extension ".foo")
(add-to-list 'speedbar-fetch-etags-parse-list
    '("\\.foo" . speedbar-parse-c-or-c++tag)) 
```

# knockout.js - knockoutJS foreach 绑定循环中的单个特定项目

> ID：12999332
> 
> 赞同：2
> 
> 时间：2012-10-21T15:41:21.763
> 
> 标签：knockout.js

选择中的以下 KnockoutJS `foreach`：

```
<select "foreach: ControllersAndActions">
   <optgroup data-bind="attr: {label: $data.ControllerName}, foreach: Actions">
       <option data-bind="text: $data"></option>
   </optgroup>
</select> 
```

以下列方式呈现选项树样式：

```
<optgroup label="NFC EAST">
     <option>Dallas Cowboys</option>
<optgroup>
<optgroup label="NFC NORTH">
     <option>Chicago Bears</option>
</optgroup> 
```

我需要这样做，除了在组开始之前插入一个初始的空选项，如下所示：

```
<option value=""></option>
<optgroup label="NFC EAST">
     <option>Dallas Cowboys</option>
<optgroup> 
```

每次 foreach 循环迭代时，如何注入一个未“重新渲染”的单个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:55:44.330

不要将`foreach`绑定放在`select`元素上，而不是添加“foreach 更深一层”（例如，使用无[容器控制流语法](http://knockoutjs.com/documentation/foreach-binding.html)）并手动添加空元素：

```
<select>
   <option value=""></option>
   <!-- ko foreach: ControllersAndActions -->
   <optgroup data-bind="attr: {label: ControllerName}, foreach: Actions">
       <option data-bind="text: $data"></option>
   </optgroup>
   <!-- /ko -->
</select> ​​​​​​​​​​​​​​​​ 
```

[您可以在这个JSFiddle](http://jsfiddle.net/nKkAn/1/)中看到它的实际效果。

# java - 如何优化我的 java 代码？

> ID：12999335
> 
> 赞同：2
> 
> 时间：2012-10-21T15:41:29.337
> 
> 标签：java, file, sorting

我是 JAVA 的新手。我已经完成了一些教程，我正在下一步检查我现在的表现。请随时批评下面的代码块。任何反馈表示赞赏。谢谢！

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Collections;
import java.util.Date;
import java.util.Vector;

import org.apache.log4j.helpers.FileWatchdog;

/**
* 
* Simple class that reads in a file - sorts its lines in natural order,  
* writes it back out to the given filename and adds a timestamp of when it was sorted
* 
* Program will be called with:
* 
* java TestClass <input_filename> <output_filename>
*
*/

public class TestClass {

public static void main(String [] args) throws RuntimeException{
    boolean OVERWRITE_FILE = true;
    //get filename from args
    String inputFilename = args[0];
    String outputFilename = args[1];

    //check usage
    if(args.length != 2){
        System.out.println("Incorrect number of args");
        System.out.println("Correct usage is:");
        System.out.println(" java TestClass <input_filename> <output_filename> ");
        System.exit(-1);
    }

    //read in file into collection
    try {
        BufferedReader in = new BufferedReader(new FileReader(inputFilename));
        Vector fileContents = new Vector<Object>();
        while(in.ready()){
            fileContents.add(in.readLine());
        }

        //sort the collection in natural order
        Collections.sort(fileContents);

        //add timestamp
        fileContents.add("File Sorted on: ");
        fileContents.add(new Date());

        //write outputFile
        BufferedWriter out = new BufferedWriter(new FileWriter(outputFilename, OVERWRITE_FILE));
        for(int i = 0; i < fileContents.size(); i++){
            out.write((String)fileContents.get(i) + "\n");
        }
        //close output file
        out.close();

    } catch (IOException e) {
        System.out.println("Error while performing IO");
    }

}
} 
```

有没有更好的方法来做到这一点？

# javascript - 带有json的jquery ajax函数

> ID：12999337
> 
> 赞同：1
> 
> 时间：2012-10-21T15:41:39.220
> 
> 标签：javascript, ajax, jquery

嗨，我正在使用此代码从 json 文件中获取内容，但我无法显示结果

我的代码是

```
$(document).ready(function(){

$.ajax({
    url: 'http://50.116.19.49/rest/user.json',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 50000,
    success: function(data, status){
    alert(data);    
    },
    error: function(){
        output.text('There was an error loading the data.');
    }
});
}); 
```

在谷歌浏览器中，我可以看到请求状态为 200 并且数据已加载。这是我从中复制代码[的链接链接](http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/)....任何帮助！！！！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:24:40.673

Your code doesn't work because the `http://50.116.19.49/rest/user.json` resource return a JSON response instead of JSONP ([difference](http://en.wikipedia.org/wiki/JSONP)).

So you can't make cross-domain calls via ajax BUT you can create a some proxy script ON YOUR SERVER which will make it for you. Example:

cross-domain-call.php

```
<?php echo file_get_contents('http://50.116.19.49/rest/user.json');?> 
```

And change your script to

```
$(document).ready(function(){

$.ajax({
    url: 'http://127.0.0.1/cross-domain-call.php',
    dataType: 'json',
    timeout: 50000,
    success: function(data, status){
        console.log(data);    
    },
    error: function(jqXHR, textStatus, errorThrown){
        console.log(jqXHR);    
        console.log(textStatus);    
        console.log(errorThrown);    
    }
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:51:53.723

由于您似乎无法访问远程 Web 服务来将其转换为 JSONP，因此这里有一个使用 Yahoo 的 YQL 作为代理的解决方案。YQL 将从任何远程站点检索文件内容并以 xml 或 jsonp 形式返回。

工作演示 [http://jsfiddle.net/Uh8cz/2/](http://jsfiddle.net/Uh8cz/2/)

您会注意到响应对象具有由 YQL 创建的其他属性

```
var yqlBaseUrl = 'http://query.yahooapis.com/v1/public/yql?q=';

var restUrl = 'http://50.116.19.49/rest/user.json';
var yqlQuery = 'select * from json where url="' + restUrl + '" ';
var yqlFormat = 'format=json'
var jQueryCallback = '?'
var fullQueryUrl = yqlBaseUrl + yqlQuery + '&' + yqlFormat + '&' + jQueryCallback;

$.getJSON(fullQueryUrl, function(json) {
    var jsonString = JSON.stringify(json.query.results.json.json, null, ' ')
    $('body').append('<h1>Response</h1><pre>' + jsonString)
})  ​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:45:18.480

如果您可以控制“user.json”的内容，请将其包装在一个函数中：

**user.json 内容：**

```
execute_jsonp({you_json) 
```

**你的JavaScript：**

```
$(document).ready(function(){

    $.ajax({
        url: 'http://50.116.19.49/rest/user.json',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 50000,
        success: function(data, status){
            data(); //execute the function that is sent
        },
        error: function(){
            output.text('There was an error loading the data.');
        }
    });

    function execute_jsonp(json){ //recreate the function so you may access the json as a parameter
        alert(json);
    }
}); 
```

希望这可以帮助 ;）

# c# - 使用 LINQ to SQL 对来自 WCF 服务请求的结果进行分组和求和时，“值不能为空”

> ID：12999338
> 
> 赞同：0
> 
> 时间：2012-10-21T15:41:42.677
> 
> 标签：c#, wcf, linq, linq-to-sql

我正在尝试使用 LINQ to SQL 对从 WCF 服务返回的结果集中的一行求和。我可以将 LINQ 用于基本选择、排序、过滤等。到目前为止一切都很好。

但是，当我尝试 Group By / Sum 时，我在尝试从下面的查询中获取（5）时收到错误消息“值不能为空”。(`results`是非空的并且有 1000+s 的项目，但是`query`当我们尝试返回它时它是空的:)

**编辑：**我已经删除了下面答案中提到的无效演员表，而是将聚合结果选择到按订单编写的自定义类中。现在页面运行没有错误——但是 group by / sum 不起作用....我只得到结果中的前五个最高值，而不是按组求和。为什么？

```
var query = (from h in results
            group h by h.Order into hh                     
            select new TopOrders()
            {
                Order = hh.Key,
                Total= hh.Sum(r => r.Price)
            }).OrderByDescending(i => i.Total);

return query.Take(5).ToList(); 
```

我可以指出的唯一可能的皱纹是 Order 本身就是一个集合（OrderID、OrderName 等），所以我尝试在 hh.Key.Order.OrderID 等上明确分组，但没有效果。

你能看到我遗漏了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:50:19.227

可能`r.Price`有几个订单是空的，所以使用`Sum(r => r.Price ?? 0)`. 但在不知道您的数据的情况下，这有点猜测。

**编辑** 很明显，我忽略了它：您尝试将匿名类型的 IEnumerable 强制转换为`List<TopOrders>`，这是不可能的。但是，如果演员表无效，则`as`运算符会产生。`null`所以`query`本身就是`null`！要么删除强制转换，要么创建`TopOrder`s 而不是匿名类型。

# centos - RhodeCode - 是什么阻止了我的连接？

> ID：12999339
> 
> 赞同：3
> 
> 时间：2012-10-21T15:41:45.913
> 
> 标签：centos, rhodecode

CentOS 6.3 上 RhodeCode 上的所有连接尝试都被拒绝，除了来自 localhost。

请注意，`iptables`它没有运行，我只是想访问 Web 界面。

我已经在下面搜索了确切的错误消息并环顾四周。我还没有找到解决方案。

`abort: error: No connection could be made because the target machine actively refused it`

如果防火墙关闭，并且我没有尝试修改任何存储库，还有什么阻止我连接？**编辑：**见下面的#5。不知道如何解决它。

**尝试过的事情和其他信息**

1.  使用 localhost、127.0.0.1 和主机名`production.ini`
2.  `service iptables stop`
3.  通过 HTTP 成功连接。换句话说，在 RhodeCode 之外接受连接。
4.  确保没有启用或配置身份验证方法`production.ini`
5.  尽管服务器接受 localhost 上的连接，`netstat -l`但并未显示端口 5000 正在侦听。设置端口 5000`production.ini`并`ps uax | grep paster`确认服务器正在运行。没有其他软件试图抢占 5000 端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:26:53.180

好的，显然我误解了`host`配置。我的运行假设`host`应该设置为`127.0.0.1`或`localhost`在 production.ini 中，以便 RhodeCode 知道要寻找另一个服务的主机。这是我的错误假设，因为我习惯于将 Web 应用程序指向本地系统以查找数据库。

事实证明，`host`将应用程序绑定到特定地址以进行访问，这意味着 RhodeCode 应该只响应本地请求，而不管其他系统策略怎么说。[设置文档没有说明这一点](http://packages.python.org/RhodeCode/setup.html)，因为它没有指定外部连接将被拒绝。它只说：

> 这个命令 [paster serve] 运行 RhodeCode 服务器。Web 应用程序应在 127.0.0.1:5000 可用。此 ip 和端口可通过上一步中创建的 production.ini 文件进行配置

该问题已通过将 RhodeCode 绑定到 来解决`0.0.0.0`，这会将其打开到外部连接。感谢 Łukasz Balcerzak在 RC 支持 google 小组中[指出这一点。](https://groups.google.com/forum/#!msg/rhodecode/_EyNX2jzAZg/6lQTvTsdqJcJ)

# facebook - 将照片远程发布到 Facebook 的 cURL 示例？

> ID：12999340
> 
> 赞同：0
> 
> 时间：2012-10-21T15:41:47.537
> 
> 标签：facebook, curl, photos

我目前遇到问题，我尝试将图片发布到 Facebook 并收到“错误”响应：

```
"Requires upload file", with OAuth exception #324. 
```

我在那里有访问令牌很好，我可以`cURL`相对容易地从一个示例中调整我的代码。我能找到的所有示例都显示了如何在 PHP（我不知道）或类似的东西中做到这一点。任何有关如何仅`cURL`从命令行工具上传照片的示例的帮助将不胜感激。

我只是无法在我的生活中找到我正在寻找的任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:08:22.083

你在追加`@`角色吗？

```
curl -F 'access_token=xxx' \ 
     -F 'source=@img.jpg' \
     -F 'message=Test' 
     'https://graph.facebook.com/me/photos' 
```

# asp.net - Web.config 中运行时部分的用途

> ID：12999349
> 
> 赞同：6
> 
> 时间：2012-10-21T15:42:47.897
> 
> 标签：asp.net, wcf

当仔细观察 Web.config 时，所有可能的子元素`<configuration>`也都存在于`configuration/runtime`.

我从来没有遇到过需要在`configuration/runtime`节中指定值。你遇到过这种情况吗？

在运行时部分指定值的目的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T16:59:45.760

[此处](http://msdn.microsoft.com/en-us/library/0kk0kk35.aspx)`<configuration><Runtime>`msdn 中描述的设置的目的 是

> “运行时设置指定公共语言运行时如何处理垃圾收集以及在配置文件中使用的程序集版本。”

这些是您可以为应用程序配置的 CLR 设置。直接下的可能设置`<configuration>`与 不同`<configuration><Runtime>`。[您可以在此处](http://msdn.microsoft.com/en-us/library/5x77e536.aspx)参考`<configuration>`架构

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-17T07:10:30.867

要添加到上述回复，我确实面临实时情况，使用“运行时”元素来配置程序集绑定。我使用的是 Ninject，它指的是 System.Web.MVC 3.0.0.0，而我的 System.Web.MVC 版本为 5.0.0.0

这导致 IOFileNotFound 异常

通过添加“运行时”绑定，我可以将 System.Web.MVC 的任何绑定重定向到 5.0.0.0 版本。

# jquery - 如何计算对象指定的元素内的元素？

> ID：12999350
> 
> 赞同：1
> 
> 时间：2012-10-21T15:42:53.217
> 
> 标签：jquery

我敢打赌，这有一个简单的答案。

我想计算一行中 TD 元素的数量，但我似乎找不到正确的语法。

```
var row = $('#album_cell'+currentCell).parent();
var n = $("td",row).length(); 
```

这显然会返回一个错误，因为我不知道如何指定它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:44:50.450

您可以使用以下语法：

```
$( "#table > td" ).size() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:45:01.280

```
var row = $('#album_cell'+currentCell).parent();
var childrenCount = row.children('td').length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:45:19.000

试试这个

```
var row = $('#album_cell'+currentCell).parent().find("td").length; 
```

或交替

```
var row = $('#album_cell'+currentCell).parent().find("td").size(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T15:48:02.387

只需简单地使用：

```
$('#yourtableid td').length 
```

**演示：http:** [//jsfiddle.net/LU7Hh/1](http://jsfiddle.net/LU7Hh/1)

# php - MVC 框架中的缓存策略？

> ID：12999351
> 
> 赞同：3
> 
> 时间：2012-10-21T15:42:56.613
> 
> 标签：php, model-view-controller, caching, memcached, apc

我编写了自己的小 PHP MVC 框架，现在我正在探索 PHP MVC 框架中的缓存策略。我正在考虑可以缓存什么，在哪里以及如何缓存。

我拥有的框架是简单的 MVC 框架。我有前端控制器，它启动应用程序，注册类自动加载，设置 php 运行时指令......最后分析 URL 并将请求发送到适当的控制器、方法、动作控制器，无论你想如何调用它。从控制器，我可以访问域对象和可以将域对象持久保存到某些存储的数据映射器，大多数情况下是关系数据库。从控制器我可以访问域对象和数据映射器。

因此，就缓存而言，这些是我目前可以做的事情。使用 PHP，我可以使用作为操作码缓存的 APC 缓存，但我也可以使用它将变量保存到 RAM 中。然后我可以使用 Memcache 和 Memcahed 作为 APC 缓存，但如果我必须扩展，我可以从不同的服务器访问存储的缓存。这两个不是操作码缓存。

据我所知，我可以做这些事情：

1.  在控制器中，我可以将域对象保存到缓存中，因此如果我已经在缓存中拥有该域对象，我不必每次都打开与数据库的连接。

2.  我可以构建我的缓存系统，它将在引导时分析 URL，然后如果存在具有该页面 URL 的缓存，则获取该 URL 的已解释页面，如果不存在，它将处理请求，然后将该页面保存到缓存中并将其与当前 URL 关联

所以，正如你所看到的，我真的不知道如何在我的 MVC 中实现缓存，以及我应该在哪里缓存东西、如何缓存以及存在哪些可能性。

那么有人可以更好地解释这一点，或者将我重定向到一些我可以了解缓存的好文章吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T01:28:51.270

> [操作码缓存可以抵消为每个请求解释 PHP 代码的成本。它与服务器基础架构有关。有点像负载均衡。将其留给您的管理员。或者使用过 *NIX 发行版的人，那不是 ubuntu。]

在 MVC 应用程序中，有 3 个点可以缓存内容：

*   **周边：**

    与 MVC 模式本身并不真正相关但涉及到 MVC 的应用程序部分：路由机制和（如果您使用它）DIC。

    您可以为路由机制缓存的内容取决于实现。如果您正在使用更易读的模式生成一些正则表达式，那么您可以缓存到生成的表达式。并且还可以缓存通常由路由产生的部分参数。这两者在中/大型站点中都是合理的，而*对于小型站点则完全没有意义*。

    如果您决定使用 DIC（我个人认为这是一种反模式，但所有酷孩子都不同意），那么缓存几乎是强制性的，因为正确编写的 DIC 将利用反射。而且反射很慢。

*   **回复**

    有时应用程序的某些部分需要大量资源来创建。如果您的 MVC 解释具有完全实现的视图，则可以缓存一些用于生成输出的模板。

    例如，以 StackOverflow 之类的网站为例。如果您决定在侧边栏上创建“过去 24 小时内的热门标签”块，则不可能为每个页面视图重新生成该块。解决此限制的一种方法是每隔一小时左右重新计算标签，并将生成的结果存储在 HTML 片段中。然后可以重复使用此片段。如果缓存的片段是 XHR 使用的一些 JSON，您甚至可以添加客户端过期标头以进一步降低服务器负载。

    您可以仅缓存页面的片段或整个内容。这基本上是在具有 MVC 架构的站点中处理具有静态内容的部分的方式。

*   **模型层**

    这是棘手的一点。

    首先你要明白缓存只是另一种形式的存储，这意味着缓存是由特殊的映射器处理的。

    ```
    $user = new User;
    $cache = new UserCacheMapper;

    $user->setId( 42 );
    if ( ! $cache->fetch( $user ) )
    {
        $storage = new UserDbMapper( $pdo );
        $storage->fetch( $user );

        $cache->store( $user );
    }

    // the $user object has been initialized 
    ```

    缓存映射器也是缓存失效发生的地方，这样您就可以在项目的任何阶段添加缓存机制。

    不过，我建议停止使用控制器来处理域对象和存储之间的交互。您基本上是在表示层中泄漏域业务逻辑。我建议创建包含这部分应用程序的服务，并让您将控制器与域逻辑隔离开来。

# java - 如果图像尺寸很大，则不会加载

> ID：12999353
> 
> 赞同：0
> 
> 时间：2012-10-21T15:43:14.817
> 
> 标签：java, mysql, image, jsf, servlets

我正在使用 MEDIUMBLOB 将图像存储在数据库中。当我尝试通过 servlet 加载图像时，我能够看到这些图像。但是，如果图像尺寸很大（1 MB 或更大），我可以在浏览器上看到一半或 3/4 的图像。

当我下载相同的图像并将其放入公共网络内容时，它可以完美运行。知道如何克服这个问题吗？我需要在 servlet 或 MySQL 中设置任何变量吗？

（JSF 生成的）HTML 代码如下：

```
<img src="DisplayImage?mainID=drawing" /> 
```

图像 servlet 执行以下操作：

```
String imgLen = rs1.getString(1);
int len = imgLen.length();
byte[] rb = new byte[len];
InputStream readImg = rs1.getBinaryStream(1);
InputStream inputStream = readImg;
int index = readImg.read(rb, 0, len);
response.reset();
response.setHeader("Content-Length", String.valueOf(len));
response.setHeader("Content-disposition", "inline;filename=/file.png");
response.setContentType("image/png");
response.getOutputStream().write(rb, 0, len);
response.getOutputStream().flush(); 
```

## 编辑 1

当我使用下面的代码并将文件保存到本地磁盘时，我看到了完整的图像。

```
String imgLen = rs1.getString(1);
int len = imgLen.length();
rb = new byte[len];
inputStream = rs1.getBinaryStream(1);
while ((read = inputStream.read(rb)) != -1) {
    out.write(rb, 0, read);
}
out.flush();
out.close(); 
```

## 编辑 2

当我保存一半查看的图像时，我注意到这些**图像的大小是 100KB**。我的 1 MB 图像显示大小为 100KB。所有图像都发生这种情况:(

我认为这是最大的提示出了什么问题。但我没有得到什么是错的。

## 编辑 3

如果我从我的 中删除以下内容`web.xml`，我就可以查看这些图像。

```
<filter>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

我可以删除那些吗？我不重新收集为什么我添加了那些......

## 编辑 4

我的 web.xml 文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            60
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <filter>
        <filter-name>restrict</filter-name>
        <filter-class>com.sac.filter.MyFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>restrict</filter-name>
        <url-pattern>*.xhtml</url-pattern>
    </filter-mapping>
    <filter>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>

    <servlet>
        <servlet-name>DisplayImage</servlet-name>
        <servlet-class>com.sac.databean.DisplayImage</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>DisplayImage</servlet-name>
        <url-pattern>/DisplayImage</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>SaveMyImage</servlet-name>
        <servlet-class>com.sac.databean.SaveMyImage</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>SaveMyImage</servlet-name>
        <url-pattern>/SaveMyImage</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:57:23.970

您测量图像长度的方式是错误的。您基本上是将图像字节转换为人类可读的字符（以难以理解的顺序，但除此之外），然后计算字符的数量。这个不对。您需要计算原始和未转换字节的数量。一个字符不一定只用一个字节表示，但可以用多个字节表示。

有两种方法可以解决您的问题：

1.  改为使用`ResultSet#getBytes()`。

    ```
    byte[] content = resultSet.getBytes("content");
    // ...
    response.setContentLength(content.length);
    response.getOutputStream().write(content); 
    ```

    请注意，这是内存占用，因为每个`byte`a`byte[]`基本上都会累积一个字节的 Java 内存。

2.  还要在查询中选择 BLOB 长度。如何做到这一点取决于使用的数据库。在 MySQL 中，您可以使用该`LENGTH()`功能。

    ```
    SELECT content, LENGTH(content) AS contentLength FROM image WHERE id = ? 
    ```

    然后您按如下方式处理：

    ```
    InputStream content = resultSet.getBinaryStream("content");
    int contentLength = resultSet.getInt("contentLength");
    // ...
    response.setContentLength(contentLength);
    SomeUtil.streamByBuffer(content, response.getOutputStream()); 
    ```

    *（其中该过程不是通过`byte[]`完整图像的长度进行的）*

* * *

**更新**：毕竟，图像上的请求似乎已经调用了`MyFacesExtensionsFilter`显然过度缓冲响应而没有在`chain.doFilter()`返回时正确刷新它。此过滤器根据仅在调用时调用的映射规则`FacesServlet`。但这不应该发生。图像请求应该只调用图像 servlet，而不应该调用 faces servlet。

根据映射规则，当您的图像 servlet 映射到时`FacesServlet`调用。正如您所拥有的那样，它与当前请求 URL 相关，因此最终会成为首先调用servlet然后调用servlet。这是错误的。`/faces/*``/DisplayImage``<img src>``/faces/DisplayImage``FacesServlet``DisplayImage`

您应该相应地更改 JSF 代码，以便`<img src>`最终成为域相关的，以便它只调用`/DisplayImage`servlet。

```
<img src="/contextpath/DisplayImage?mainID=drawing" /> 
```

您可以通过在`<h:graphicImage>`. 它将自动添加上下文路径。

```
<h:graphicImage value="/DisplayImage?mainID=drawing" /> 
```

# php - 如何从数组中选择特定的 id

> ID：12999354
> 
> 赞同：0
> 
> 时间：2012-10-21T15:43:14.400
> 
> 标签：php, css

如何在不使用 SQL 查询的情况下将 CSS 下划线应用于 id=34,40 的以下 $name 结果。请帮忙。

```
foreach($index[$parent_id] as $id) {
  $name=$data[$id]["name"];
  echo str_repeat('&nbsp', $level) . "$name.$id  <br>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:55:31.273

PHP 擅长创建 HTML，HTML 可以不假思索地引用 CSS。

如果您有一个名为 underline 的 CSS 类...

```
.underline {
    text-decoration:underline;
} 
```

...那么您需要做的就是将输出包装在这样的标签中：

```
echo  '<div class="underline">'.$name.$id.'</div>'; 
```

也就是说，我不太确定你想用 str_repeat 函数做什么，所以你需要修改它才能使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T15:49:29.040

您可以在输出周围应用跨度

```
echo str_repeat('&nbsp', $level) . "<span class="underline">$name.$id  </span><br>"; 
```

然后为班级设置样式

```
.underline{text-decoration:underline;} 
```

或者...

您可以直接对其进行样式设置

```
echo str_repeat('&nbsp', $level) . "<span style=\"text-decoration:underline;\">$name.$id  </span><br>"; 
```

希望这可以帮助

# spring - 如何从 JSR 330 Spring 应用程序中删除 NullPointerException

> ID：12999355
> 
> 赞同：0
> 
> 时间：2012-10-21T15:43:20.077
> 
> 标签：spring, jsf, tomcat, jsr330

我正在按照[http://www.mkyong.com/jsf2/jsf-2-0-spring-integration-example/](http://www.mkyong.com/jsf2/jsf-2-0-spring-integration-example/)的指导方针实施 Spring+JSF 应用程序，但我使用的是最新的 Spring 版本（即 3.x，它根据文档，已经包含 JSR 330 实现，所以这应该不是问题）和我自己的类，这就是与上述示例的区别。

我坚持`NullPointerException`认为 bean（充当 JSF 管理的）bean 没有收到 Spring bean 实例的注入。`@Named`所有 bean 在适当的位置 ( , )使用 JSR 330 注释，`@Inject`并且 bean 的接口和变量（在`@Inject`注释下）遵循通常的命名模式......

那么 - 如何调试这种情况。例如，有没有办法查看 Spring 应用程序上下文中的所有 bean。例如，我们可以确定 Spring 上下文未正确初始化。也许还有其他方法可以查看应用程序中发生的事情（调试注入）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:41:39.740

如果您的类路径中有相关的 jar，Spring 支持依赖注入的 JSR 330 注释。

您需要将以下 jar 添加到您的应用程序中。

```
<dependency>
  <groupId>javax.inject</groupId>
  <artifactId>javax.inject</artifactId>
  <version>1</version>
</dependency> 
```

通过为 org.springframework 启用日志记录，您可能会获得很好的信息

只需添加 log4j jar 并将此 log4j.properties 文件放入类路径的根目录中。

Log4j.properties：

```
log4j.rootCategory=INFO, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ISO8601} %-5p %c %M - %m\n

log4j.category.org.springframework=DEBUG 
```

也可以看看：

文档

*   [bean-标准注释](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-standard-annotations)

*   [概述-日志记录-log4j](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/overview.html#overview-logging-log4j)

# java - 以“cat file.txt | ”格式处理 Java 命令行参数 java YourMainClass”

> ID：12999357
> 
> 赞同：0
> 
> 时间：2012-10-21T15:43:29.450
> 
> 标签：java, terminal

我以前从未在终端上使用过 java，当然我也从未为它编写过代码。我的问题很简单：当调用格式为

```
cat  file.txt  |  java  YourMainClass 
```

我已经启动并运行了其余的代码，我只需要将给定的文件名放入我的 main 方法中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T15:54:30.587

由于 cat 命令显示文件的内容，因此您需要使用 System.in 缓冲区来捕获来自该命令的数据。您可以使用指向 System.in 的 BufferedReader 循环遍历数据并对其进行处理。

看这个[例子](https://stackoverflow.com/questions/5918525/piping-input-using-java-using-command-line)

```
public class ReadInput {
    public static void main(String[] args) throws IOException {
    BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
        String x = null;  
        while( (x = input.readLine()) != null ) {    
            System.out.println(x); 
        }    
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:50:38.837

当您希望从`System.in`的输出中读取时`cat`，您可以执行以下操作：

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

String line;
while ((line = br.readLine()) != null) {
   // use line...
} 
```

# html - CSS类问题

> ID：12999360
> 
> 赞同：0
> 
> 时间：2012-10-21T15:43:42.263
> 
> 标签：html, css

我目前在思考类和 id 选择器的想法时遇到了麻烦。下面发布的是我当前的导航标记。我想在我的 css 样式表中实现的是水平菜单。

为什么我不能针对`.navigation-menu`此类 ( `.navigation-main`) 中的所有内容设置样式？

```
<nav class="navigation-main">
    <ul class="menu">
        <li class"home"><a href="index.html">Home</a></li>
        <li class"submit"><a href="submit.html">Submit a Pic</a></li>
        <li class"advertise"><a href="advertise.html">Advertise</a></li>
        <li class"contact"><a href="contact.hml">Contact</a></li>
    </ul>
</nav>​ 
```

* * *

CSS

```
.navigation {
display:inline; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:05:35.987

您没有针对以下元素：

```
.navigation-main li{
   display:inline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:29:40.930

您似乎对 CSS 选择器的工作方式感到困惑。一个类需要与它的定义相同的名称才能实际匹配。

HTML

```
<div class="my-class"></div> 
```

CSS

```
.my-class
{
  ...
} 
```

因此，要回答您的问题（目前是这样），为什么您不能`.navigation-menu`针对`.navigation-main`. 这是因为您的 CSS 类`.navigation`与当前 HTML 中的任何类都不匹配

使用以下方式设置您的资产净值`class="navigation-main"`：

CSS

```
.navigation-main 
{
  ...
} 
```

`class="menu"`仅使用位于 NAV 内的 UL 设置样式`class="navigation-main"`：

CSS

```
.navigation-main .menu 
{
  ...
} 
```

为NAV 中的**所有**元素设置样式`class="navigation-main"`

CSS

```
.navigation-main *
{
  display:inline;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:03:53.193

根据问题，因为您将css应用于`navigation`未使用的类，您需要包含此类以应用css

尝试

```
 .navigation-main li {
    display:inline;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T16:05:49.353

你正在寻找这个：

```
.menu li {display:inline;} 
```

# python - 在 Python 中管道 SoX - 子流程替代方案？

> ID：12999361
> 
> 赞同：4
> 
> 时间：2012-10-21T15:43:48.860
> 
> 标签：python, audio, subprocess, sox, inter-process-communicat

我在应用程序中使用[SoX 。](http://manpages.ubuntu.com/manpages/oneiric/man1/sox.1.html)该应用程序使用它对音频文件应用各种操作，例如修剪。

这工作正常：

```
from subprocess import Popen, PIPE

kwargs = {'stdin': PIPE, 'stdout': PIPE, 'stderr': PIPE}

pipe = Popen(['sox','-t','mp3','-', 'test.mp3','trim','0','15'], **kwargs)
output, errors = pipe.communicate(input=open('test.mp3','rb').read())
if errors:
    raise RuntimeError(errors) 
```

但是，这将导致大文件出现问题，因为`read()`将完整的文件加载到内存中；这很慢并且可能导致管道的缓冲区溢出。存在一种解决方法：

```
from subprocess import Popen, PIPE
import tempfile
import uuid
import shutil
import os

kwargs = {'stdin': PIPE, 'stdout': PIPE, 'stderr': PIPE}
tmp = os.path.join(tempfile.gettempdir(), uuid.uuid1().hex + '.mp3')

pipe = Popen(['sox','test.mp3', tmp,'trim','0','15'], **kwargs)
output, errors = pipe.communicate()

if errors:
    raise RuntimeError(errors)

shutil.copy2(tmp, 'test.mp3')
os.remove(tmp) 
```

所以问题如下：**除了为 Sox C API 编写 Python 扩展之外，还有其他方法可以替代这种方法吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T16:56:03.287

SoX 的 Python 包装器已经存在：[sox](https://github.com/rabitt/pysox)。也许最简单的解决方案是切换到使用它，而不是通过`subprocess`.

以下使用包实现了您在示例中想要的内容`sox`（请参阅[文档](http://packages.python.org/pysox/intro.html#process-audio-with-a-simple-effect)），并且应该在**Python 2.7、3.4****和**3.5**上**的**Linux**和**macOS**上工作（它也可能在 Windows 上工作，但我无法测试，因为我没有'无权访问 Windows 框）：

 ******```
>>> import sox
>>> transformer = sox.Transformer()  # create transformer 
>>> transformer.trim(0, 15)  # trim the audio between 0 and 15 seconds 
>>> transformer.build('test.mp3', 'out.mp3')  # create the output file 
```

*注意：这个答案曾经提到不再维护的[`pysox`](http://packages.python.org/pysox/)包。感谢@erik 的提示。*******

# jquery - 尝试使用 JQuery 删除表中的第一个 tr

> ID：12999362
> 
> 赞同：0
> 
> 时间：2012-10-21T15:43:50.803
> 
> 标签：jquery, html-table

我有一张这样的桌子：

```
<div id="evttbldiv">
      <table id="eventtbl">
          <tr class="headers">
            <th>Evento</th>
            <th>Artista(s)</th>
            <th>Local</th>
            <th>Data</th>
            <th></th>
          </tr>
        <tr class="rowdata">
          <td class="lfm_event"></td>
          <td class="lfm_artists"></td>
          <td class="lfm_venue"></td>
          <td class="lfm_date"></td>
          <td><div class="arrow"></div></td>
        </tr>
        <tr class="rowinfo">
            <td colspan="5">
              hello
            </td>
        </tr>
      </table>
    </div> 
```

我的查询：

```
container = $('#evttbldiv').html();
    console.log(container);
    $('.headers', container).remove();
    console.log(container); 
```

我想要做的是删除标题行并放置其余部分（中间的所有内容和变量中`<tr class="rowdata">`的最后一个。但是，即使使用那行代码，它也不会删除我的 JQuery 中的标题。`tr``container`

`console.log(container)`在两种情况下都显示相同的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:51:08.860

问题是您在将项目转换为 HTML 后尝试使用 jQuery 来影响项目的 DOM。相反，`clone()`它，然后*将*`remove()`其转换为 HTML：`.header`

 *```
container = $('#evttbldiv').clone();
$('.headers', container).remove();
console.log(container);

// And if you need the HTML...
container_html = container.html();
console.log(container_html); 
```

小提琴：http: [//jsfiddle.net/mstauffer/98XMj/1/](http://jsfiddle.net/mstauffer/98XMj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:54:39.327

尝试：

```
var $tds = $("#eventtbl .header th");

$("#eventtbl .header").remove()

// now append what is stored in $tds to whatever you want
$(".whateverYouWant").append($tds); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:30:21.877

使用 jQuery 方法的链接，您可以在一行中创建完全修改的表对象，并且不需要使用`html()`方法，因为您可以附加 jQuery 对象本身。

```
var $modifiedTable = $('#evttbldiv').clone().find('.headers').remove().end()

$('#someElement').append( $modifiedTable ) 
```

或转换为 html 字符串

```
console.log( $modifiedTable.html()) 
```*

# playframework - 在 playframework 中获取 url 和应用程序状态

> ID：12999364
> 
> 赞同：0
> 
> 时间：2012-10-21T15:44:17.597
> 
> 标签：playframework

有没有办法给我的链接一个对象中的所有变量？这样做的目的是使链接成为书签。重新构建屏幕的重要信息都将在 URL 中。

我的解决方法引入了会话和 url 重写。这是一个链接，将在我的对象中添加或更改行业变量`s`：

```
<a href="@{Stocks.index()}?s.industry=${roeBean.industry?.urlEncode()}"> 
```

单击链接时，将调用 Stocks.index 并接受对象`s`作为其参数。接收 s.industry 数据并且所有其他值`s`都为空。因此，我可以将参数与会话中保存的`s`另一个副本合并。`s`然后更新缓存并重写 URL。

它工作得很好，但如果播放框架有一些东西来简单地扩展状态对象并更改一个变量（仅用于链接），它会更优雅。有没有一种干净的方法可以做到这一点？我想象这将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:38:22.217

只是为了更新行业工作而创建一个新的控制器方法（不是索引）吗？当传递 s.id 和要添加的 s.industry 时，以下操作将起作用（或者如果您要这样做，则替换存在）。

在您看来：（将视图发送到 s 对象，但您现在似乎这样做了）（另外，我正在使用 groovy 模板助手，如果您愿意，可以使用 html，结果相同）

```
#{a @Stocks.index(s.id, s.industry=roeBean.industry) } Add This Industry {/a} 
```

在您的控制器中：（将字符串替换为任何行业）

```
public static void addIndustry(Long id, String industry) {
    Stock s = Search.findById(id);
    String i = industry;
    //Do your stuff
    s.save();
} 
```

在此处传递静态字符串（或其他内容）也可以。所以 s.industry='test' 在这个例子中会得到 id=1 和行业=test。

如果您希望您的链接具有对象的所有属性，您不能只发送整个对象吗？如果您只想要整个对象，则传递对象中每个属性的整个键/值位似乎需要做很多工作？所以在这个例子中：

当您从控制器渲染视图时

```
render(s); 
```

链接？

```
#{a @Stocks.index(s, s.industry=roeBean.industry) } Add This Industry {/a} 
```

在您的控制器中保存：

```
public static void addIndustry(Stock s, String industry) {
    //Do your stuff
    s.save();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:23:41.597

我了解您在数据库中有实体 S 并且您只想更改该实体中的 s.industry 值。

如果与**s.industry**一起添加**s.id**参数，则播放！将从数据库中获取具有此 ID 的 S 实体，并将合并到您在 URL 中传递的参数中。所以，对于这样的链接：

```
<a href="@{Stocks.index()}?s.industry=${roeBean.industry?.urlEncode()}&s.id=1"> 
```

会发生以下情况。Play 将获取 id=1 的 S 对象，然后它将设置您作为 URL 参数传递的**行业**值，然后*Stocks.index*方法将获取合并的 S 对象。

# ruby-on-rails - Mongoid OR 查询语法

> ID：12999368
> 
> 赞同：45
> 
> 时间：2012-10-21T15:44:49.337
> 
> 标签：ruby-on-rails, mongoid

这必须被问到很多，但它的记录很差。[在http://mongoid.org/en/mongoid/docs/querying.html](http://mongoid.org/en/mongoid/docs/querying.html)没有提及

我正在尝试检查用户是否存在（以下是 AND 查询），如何将其更改为`OR`类型查询

```
Username.where(:username=>@username, :email=>@email) 
```

（电子邮件或用户名必须匹配）。

我在网上找到了一些非常复杂的方法，包括发送直接 javascript（来自）： http: [//omarqureshi.net/articles/2010-6-17-using-or-in-mongoid](http://omarqureshi.net/articles/2010-6-17-using-or-in-mongoid)

当然必须有一个简单明了的语法才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-07-19T13:43:36.320

为了最终访问此页面的其他人，更新的语法现在是

```
Username.or({username: @username}, {email: @email}) 
```

请参阅[更新的文档](https://www.rubydoc.info/github/mongoid/origin/Origin/Selectable#or-instance_method)或[相关的 impl](https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L433-L446)。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-10-21T15:56:58.213

是的，这曾经被更好地记录下来。尝试这个：

```
Username.any_of({:username => @username},
                {:email => @email}) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-28T02:15:22.940

@miguel-savignano 的回复中有一个错字。根据 Stackoverflow 的“编辑队列已满”，这就是我没有提交编辑的原因。

正确的语法：

```
Username.or({username: @username}).or({email: @email}) 
```

更简洁的解决方案：

```
Username.or({username: @username}, {email: @email}) 
```

Mongo 选择器将解析为：

```
{"$or"=>[{"username"=>@username}, {"email"=>@email}]} 
```

* * *

我在尝试解决创建“或”查询时发现了这个问题。

如果您要匹配一个字符串或任何一个元素数组，那么您需要使用 Mongo '$in' 选择器编写一个 Mongoid 查询。

例如，您有一个特定的用户名和一组电子邮件。您希望返回至少有一个字段与数组中的用户名或电子邮件之一匹配的所有结果。

```
@username = "jess"
@emails = ["hi@mail.com", "test@mail.com", "foo@mail.com"]
User.or({username: ""}, {email: {'$in': @emails}}) 
```

Mongo 选择器将解析为：

```
{"$or"=>[{"first_name"=>""}, {"email"=>{:$in=>["hi@mail.com", "test@mail.com", "foo@mail.com"]}}]} 
```

*   如果您`Users`的数据库中有 3 封电子邮件中有 2 封，则选择器将返回计数 2。
*   如果您有一个`User`带有`username`“jess”的邮件，另外还有 3`Users`个带有给定电子邮件的邮件，那么选择器将返回 4 个计数。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-08-22T00:50:09.743

另外，在 Mongoid 5.0 中，如果还想使用该`where`方法，请使用以下

```
Username.where('$or' => [ { username: @username }, { email: @email } ]) 
```

当您以动态方式构建一种查询哈希并且您需要保留该`where`方法时，这非常有用

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-14T09:36:37.537

在 Mongoid 5.0 中，这对我有用

```
Username.or({username: @username}).or({email: @email}) 
```

# php - 如何让自定义帖子类型不查询所有帖子

> ID：12999371
> 
> 赞同：1
> 
> 时间：2012-10-21T15:44:57.270
> 
> 标签：php, wordpress

我有一个自定义帖子类型，现在有超过 10 万个帖子。当我尝试在管理面板中转到帖子类型的主页时，出现错误：

致命错误：第 506 行 /home/spottercharts/spottercharts.com/wp-includes/cache.php 中允许的内存大小为 94371840 字节已用尽（尝试分配 84 个字节）

主页通常会列出该类型的所有帖子。由于有这么多，它正在吃掉所有的 PHP 内存。

如果现在不能选择增加 php.ini 中的 PHP 内存，是否有另一种方法可以让 Wordpress 不查询该类型的所有帖子？我只需要搜索帖子的能力，而不是全部列出。如果没有，有没有办法优化这种帖子类型，使其不消耗太多内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:06:22.027

我要问的第一件事是您如何获得超过 100k 的帖子？在您的数据库中作为单独的帖子有很多东西，我怀疑它们并非都是实际的帖子，而是被用于其他目的？

你有几个选择：

**短期 - 内存限制**

可以通过多种方式在服务器上修改内存限制，具体取决于您的服务器配置或主机允许的内容。如果您没有 root 访问权限，则可以将`php.ini`文件放入网站的主目录。

或者，`.htaccess`通过添加以下内容来修改您的文件：

```
php_value memory_limit 256M 
```

当您使用 Wordpress 时，您还可以将以下行添加到您的`wp-config.php`文件中：

```
define('WP_MEMORY_LIMIT', '256M'); 
```

**更好的方法**

显然，以上是至少让网站快速运行的好方法，但实际上这是非常高的使用率。

关于如何提高内存使用率的一些建议：

1.  减小数据库的大小。您是否可以使用其他方法来减少您拥有的个人帖子的数量？
2.  确保您在使用`query_posts`. 这将确保它停止从数据库中提取太多数据，从而使服务器处理的更少。

您可以做很多其他事情，但实际上您需要考虑为什么数据库中有如此多的数据，以及如何最大限度地减少 Wordpress 返回数据所需的查询和工作量。

# java - 将文本框宽度设置为剩余宽度

> ID：12999372
> 
> 赞同：0
> 
> 时间：2012-10-21T15:44:59.173
> 
> 标签：java, android, textbox

请看下面的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
     >

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >

    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/firstNumber"
        />

    <EditText 
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        />

    </LinearLayout>

</LinearLayout> 
```

在这里，文本框的大小（宽度）非常小。我正在尝试将其设置为适合剩余宽度，但如您所见，它失败了。我也用过`android:weight=1`。请帮忙，如何将文本框的宽度设置为剩余宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:57:37.077

Maybe you need to change the horizontal LinearLayout like below. Change width to `match_parent`

```
<LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        > 
```

and add `android:weight=1` to the textview

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:24:08.043

尝试这个

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="#FFFFFF"
 >
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    >

<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/firstNumber"
    android:layout_weight="0"
    />

<EditText 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T18:12:45.600

尝试将内部 LinearLayout 的 layout_width 设置为 match_parent

`android:layout_width="match_parent"`

# blackberry - 使 ActivityIndi cator 在 Blackberry 中消失

> ID：12999379
> 
> 赞同：1
> 
> 时间：2012-10-21T15:45:20.577
> 
> 标签：blackberry, java-me

我有一些流程和[活动指标](http://docs.blackberry.com/en/developers/deliverables/18125/Activity_indicator_1214556_11.jsp)。当这些过程完成后，我希望这些活动字段消失，但不知道该怎么做。我所能做的就是取消它们，但这并不会让它们消失。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:50:48.497

从父管理器中删除活动指示器字段。

```
public static void removeField(Field f) {
    Manager m = f.getManager();
    if(m != null) {
        m.delete(f);
    }
} 
```

# haskell - 为什么 GHC 使修复如此混乱？

> ID：12999385
> 
> 赞同：15
> 
> 时间：2012-10-21T15:46:14.943
> 
> 标签：haskell, recursion, fixpoint-combinators

查看 GHC 源代码，我可以看到**修复**的定义是：

```
fix :: (a -> a) -> a
fix f = let x = f x in x 
```

在一个示例中，**修复**是这样使用的：

```
fix (\f x -> let x' = x+1 in x:f x') 
```

这基本上会产生一个以 1 增加到无穷大的数字序列。为了发生这种情况，**修复**必须将它接收到的函数作为第一个参数返回到该函数。我不清楚上面列出的**修复**定义如何做到这一点。

这个定义是我理解**修复**如何工作的方式：

```
fix :: (a -> a) -> a
fix f = f (fix f) 
```

所以现在我有两个问题：

1.  在第一个定义中，**x**是如何表示**修复 x的？**
2.  使用第一个定义比使用第二个定义有什么优势吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T16:01:59.990

通过应用等式推理，很容易看出这个定义是如何工作的。

```
fix :: (a -> a) -> a
fix f = let x = f x in x 
```

`x`当我们尝试评估时会评估`fix f`什么？它定义为`f x`，所以`fix f = f x`。但是`x`这里有什么？是的`f x`，和以前一样。所以你得到`fix f = f x = f (f x)`. `f`以这种方式推理，您将获得: `fix f`=的无限应用链`f (f (f (f ...)))`。

现在，代替`(\f x -> let x' = x+1 in x:f x')`你`f`得到

```
fix (\f x -> let x' = x+1 in x:f x')
    = (\f x -> let x' = x+1 in x:f x') (f ...)
    = (\x -> let x' = x+1 in x:((f ...) x'))
    = (\x -> x:((f ...) x + 1))
    = (\x -> x:((\x -> let x' = x+1 in x:(f ...) x') x + 1))
    = (\x -> x:((\x -> x:(f ...) x + 1) x + 1))
    = (\x -> x:(x + 1):((f ...) x + 1))
    = ... 
```

**编辑**：关于你的第二个问题，@is7s 在评论中指出第一个定义更可取，因为它更有效。

要找出原因，让我们看看核心`fix1 (:1) !! 10^8`：

```
a_r1Ko :: Type.Integer    
a_r1Ko = __integer 1

main_x :: [Type.Integer]   
main_x =
  : @ Type.Integer a_r1Ko main_x

main3 :: Type.Integer
main3 =
  !!_sub @ Type.Integer main_x 100000000 
```

如您所见，转换后`fix1 (1:)`基本上变成了`main_x = 1 : main_x`. 请注意这个定义是如何指代自己的——这就是“打结”的意思。这种自引用在运行时表示为简单的指针间接：

![修复1](../Images/95aa4c9664dc3c5f5af56e5061a9f550.png)

现在让我们看看`fix2 (1:) !! 100000000`：

```
main6 :: Type.Integer
main6 = __integer 1

main5
  :: [Type.Integer] -> [Type.Integer]
main5 = : @ Type.Integer main6

main4 :: [Type.Integer]
main4 = fix2 @ [Type.Integer] main5

main3 :: Type.Integer
main3 =
  !!_sub @ Type.Integer main4 100000000 
```

这里`fix2`实际上保留了应用程序：

![修复2](../Images/56af50bff419952b2870dab990d40c04.png)

结果是第二个程序需要为列表的每个元素进行分配（但由于列表立即被消耗，程序仍然有效地在恒定空间中运行）：

```
$ ./Test2 +RTS -s
   2,400,047,200 bytes allocated in the heap
         133,012 bytes copied during GC
          27,040 bytes maximum residency (1 sample(s))
          17,688 bytes maximum slop
               1 MB total memory in use (0 MB lost due to fragmentation)
 [...] 
```

将其与第一个程序的行为进行比较：

```
$ ./Test1 +RTS -s          
          47,168 bytes allocated in the heap
           1,756 bytes copied during GC
          42,632 bytes maximum residency (1 sample(s))
          18,808 bytes maximum slop
               1 MB total memory in use (0 MB lost due to fragmentation)
[...] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T04:36:33.687

> 在第一个定义中，x 是如何表示修复 x 的？

```
fix f = let x = f x in x 
```

**让 Haskell 中的绑定是递归的**

首先，意识到 Haskell 允许递归 let 绑定。Haskell 称之为“let”，其他一些语言称之为“letrec”。这对于函数定义来说感觉很正常。例如：

```
ghci> let fac n = if n == 0 then 1 else n * fac (n - 1) in fac 5
120 
```

但是对于值定义来说，这似乎很奇怪。尽管如此，由于 Haskell 的非严格性，值可以递归定义。

```
ghci> take 5 (let ones = 1 : ones in ones)
[1,1,1,1,1] 
```

有关 Haskell 惰性的更多详细信息，请参阅第 3.3 和 3.4 节对 Haskell 的简要[介绍。](http://www.haskell.org/tutorial/functions.html)

**GHC 中的重击**

在 GHC 中，一个尚未计算的表达式被包裹在一个“thunk”中：一个执行计算的承诺。*只有在绝对必要*时才会评估 Thunks 。假设我们想要`fix someFunction`。根据 的定义`fix`，即

```
let x = someFunction x in x 
```

现在，GHC 看到的是这样的东西。

```
let x = MAKE A THUNK in x 
```

所以它很高兴地为你发出一声砰的一声，然后继续前进，直到你要求知道`x`实际上是什么。

**样品评估**

thunk 的表达式恰好指的是它自己。让我们`ones`举个例子并重写它以使用`fix`.

```
ghci> take 5 (let ones recur = 1 : recur in fix ones)
[1,1,1,1,1] 
```

那么这个thunk会是什么样子呢？
我们可以将内联`ones`作为匿名函数`\recur -> 1 : recur`进行更清晰的演示。

```
take 5 (fix (\recur -> 1 : recur))

-- expand definition of fix
take 5 (let x = (\recur -> 1 : recur) x in x) 
```

那么，什么*是* `x`？好吧，即使我们不太确定是什么`x`，我们仍然可以使用函数应用程序：

```
take 5 (let x = 1 : x in x) 
```

嘿，看，我们又回到了之前的定义。

```
take 5 (let ones = 1 : ones in ones) 
```

因此，如果您相信自己了解*它的*工作原理，那么您就会很好地了解它的`fix`工作原理。

* * *

> 使用第一个定义比使用第二个定义有什么优势吗？

是的。问题是第二个版本可能会导致**空间泄漏**，即使进行了优化。有关. [_](http://hackage.haskell.org/trac/ghc/ticket/5205) _ `forever`这就是我提到 thunk 的原因：因为`let x = f x in x`只分配一个 thunk：`x`thunk。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-23T11:33:52.837

区别在于共享与复制。^(*1*)

```
fix1 f = x where x = f x    -- more visually apparent way to write the same thing

fix2 f = f (fix2 f) 
```

如果我们将定义代入其自身，则两者都被简化为相同的无限应用链 `f (f (f (f (f ...))))`。但是第一个定义使用显式命名；在 Haskell 中（就像在大多数其他语言中一样），共享是通过命名事物的能力实现的：一个名称或多或少地保证引用一个“实体”（此处为`x`）。第二个定义不保证任何共享——调用的结果`fix2 f`被替换到表达式中，所以它也可以被替换为一个值。

但是理论上，给定的编译器可能对此很聪明，并且在第二种情况下也可以使用共享。

相关问题是“ **Y**组合器”。*在没有命名*构造（因此没有*自*引用）的无类型 lambda 演算中， **Y**组合器通过安排要复制的定义来模拟自引用，因此引用 self 的*副本*成为可能。但是在使用环境模型允许语言中的命名实体的实现中，通过名称直接引用成为可能。

要查看两个定义之间更显着的差异，请比较

```
fibs1 = fix1 ( (0:) . (1:) . g ) where g (a:t@(b:_)) = (a+b):g t
fibs2 = fix2 ( (0:) . (1:) . g ) where g (a:t@(b:_)) = (a+b):g t 
```

也可以看看：

*   [在 Scheme 中，如何使用 lambda 创建递归函数？](https://stackoverflow.com/questions/7719004/in-scheme-how-do-you-use-lambda-to-create-a-recursive-function/11833038#11833038)
*   [“The Little Schemer”中的 Y 组合器讨论](https://stackoverflow.com/questions/10499514/y-combinator-discussion-in-the-little-schemer/11864862#11864862)
*   [fold 可以用来创建无限列表吗？](https://stackoverflow.com/questions/12298169/can-fold-be-used-to-create-infinite-lists/12299223#12299223)

（特别是尝试找出上面最后一个链接中的最后两个定义）。

* * *

^(*1*)根据定义工作，对于您的示例，`fix (\g x -> let x2 = x+1 in x : g x2)`我们得到

```
fix1 (\g x -> let x2 = x+1 in x : g x2)
 = fix1 (\g x -> x : g (x+1))
 = fix1 f where {f = \g x -> x : g (x+1)}
 = fix1 f where {f g x = x : g (x+1)}
 = x      where {x = f x ; f g x = x : g (x+1)}
 = g      where {g = f g ; f g x = x : g (x+1)}   -- both g in {g = f g} are the same g
 = g      where {g = \x -> x : g (x+1)}           -- and so, here as well
 = g      where {g x = x : g (x+1)} 
```

因此`g`实际上创建了一个适当的递归定义。（在上面，我们写`....x.... where {x = ...}`为`let {x = ...} in ....x....`, 是为了便于阅读）。

但是第二个推导进行了一个关键的区别，即用一个值代替一个*值*，而不是一个*名称*，因为

```
fix2 (\g x -> x : g (x+1))
 = fix2 f             where {f g x = x : g (x+1)}
 = f (fix2 f)         where {f g x = x : g (x+1)}
 = (\x-> x : g (x+1)) where {g = fix2 f ; f g x = x : g (x+1)}
 = h                  where {h   x = x : g (x+1) ; g = fix2 f   ; f g x = x : g (x+1)} 
```

所以实际的通话将继续进行，例如

```
take 3 $ fix2 (\g x -> x : g (x+1)) 10
 = take 3 (h 10)      where {h   x = x : g (x+1) ; g = fix2 f   ; f g x = x : g (x+1)}
 = take 3 (x:g (x+1)) where {x = 10 ;              g = fix2 f   ; f g x = x : g (x+1)}
 = x:take 2 (g x2)    where {x2 = x+1 ; x = 10 ;   g = fix2 f   ; f g x = x : g (x+1)}
 = x:take 2 (g x2)    where {x2 = x+1 ; x = 10 ; g = f (fix2 f) ; f g x = x : g (x+1)}
 = x:take 2 (x2 : g2 (x2+1))   where {             g2 = fix2 f  ;
                             x2 = x+1 ; x = 10 ;                  f g x = x : g (x+1)}
 = ...... 
```

我们看到这里建立了一个*新*的绑定（for `g2`），而不是像定义`g`一样重用之前的绑定（for）。`fix1`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-28T06:32:39.990

我可能有一些来自[内联](http://www.haskell.org/ghc/docs/latest/html/users_guide/pragmas.html#inline-pragma)优化的简化解释。如果我们有

```
fix :: (a -> a) -> a
fix f = f (fix f) 
```

then`fix`是一个递归函数，这意味着它不能在使用它的地方内联（`INLINE`如果给出，编译指示将被忽略）。

然而

```
fix' f = let x = f x in x 
```

不是递归函数 - 它从不调用自身*。*只有`x`内部是递归的。所以打电话的时候

```
fix' (\r x -> let x' = x+1 in x:r x') 
```

编译器可以将其内联到

```
(\f -> (let y = f y in y)) (\r x -> let x' = x+1 in x:r x') 
```

然后继续简化它，例如

```
let y = (\r x -> let x' = x+1 in x:r x') y in y 
let y = (\  x -> let x' = x+1 in x:y x')   in y 
```

这就像函数是使用标准递归表示法定义的，但没有`fix`：

```
 y       x =  let x' = x+1 in x:y x' 
```

# android - 使用在 if 语句中已更改的变量

> ID：12999388
> 
> 赞同：0
> 
> 时间：2012-10-21T15:46:35.323
> 
> 标签：android, if-statement

我建立了两个活动，MainActivity 将一些变量传递给活动“计算”。这按预期工作，并且变量已正确提交和接收。我现在想根据意图“size”的值创建整数“size_int”。问题出现在这一行：

```
 debug1.setText(size_int); 
```

Eclipse 告诉我应该创建一个名为“size_int”的局部变量。我不明白为什么不能在这一行中使用“size_int”，因为它之前已经在 if 语句中定义过。你对此有什么想法吗？我假设在 if 语句中定义了变量“size_int”，但我不确定。

这是完整的代码：

```
package com.example.eggtimer;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class Calculation extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.calculation);

        // get Intents (Size, Temperature and yolk from Main Activity)
        String size = getIntent().getExtras().getString("size");
        String temperature = getIntent().getExtras().getString("temperature");
        String yolk = getIntent().getExtras().getString("yolk");

        if (size.equals("Small")) {
            int size_int = 30;
        }

        // Debug Variables
        TextView debug1 = (TextView) findViewById(R.id.textViewDebug1);

        debug1.setText(size_int);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:50:27.890

改变如下。这是因为如果你在大括号内声明，范围是有限的，所以你需要通过在外面声明来增加范围

```
int size_int = 0; 
if (size.equals("Small")) {
            size_int = 30;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:54:41.220

您需要阅读称为“可变范围”的概念。通常，在代码块中**声明的变量是该代码块的****本地**变量，并且在外部不可见。因此，您应该在您的外部`size_int` **声明**`if()`：

```
 int size_int = 0;
    if (size.equals("Small")) {
        size_int = 30;
    } 
```

通常，在代码块外声明的变量在代码块中是可见的，而在代码块内声明的变量是该代码块的本地变量。

# jquery - 使用 JSP 文件作为源的 jQuery 自动完成问题

> ID：12999390
> 
> 赞同：0
> 
> 时间：2012-10-21T15:46:39.640
> 
> 标签：jquery, jsp, autocomplete, twitter-bootstrap

我正在尝试在我的搜索字段上实现自动完成。当我使用的源代码是一个简单的 JavaScript 数组（请参阅 var data = [ ... ]）时，一切正常，如下所示：

```
<%@ page language="java"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Basic Search</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-    ui.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.catcomplete.css" />

    <script type="text/javascript" src="js/bootstrap.js"></script>    
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js">    </script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>

</head>
<body>

<script>
$.widget( "custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var that = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            that._renderItemData( ul, item );
        });
    }
}); 
```

```
$(function() {

    var data = [
                { label: "Eric Cartman", category: "Users" },
                { label: "John Lennon", category: "Users" }, 
                { label: "Elvis Presley", category: "Users" },
                { label: "Steven Gerrard", category: "Users" },
                { label: "Java", category: "Programming" },
                { label: "C#", category: "Programming" },
                { label: "C++", category: "Programming" }, 
                { label: "Python", category: "Programming" },
                { label: "Ruby on Rails", category: "Programming" }
            ];
    $( "#search" ).catcomplete({
        delay: 0,
        minLength: 3,
        source: data
    });
});
</script>

<p />

<div class="container well">
    <div class="row-fluid">
        <form action="search" method="get">
            <div class="input-append">
                <input type="text" name="query" id="search" placeholder="Search.."/>
                <button class="btn" type="submit">Search</button>
            </div>

        </form>
    </div>
</div>    

</body>
</html> 
```

但是，当我尝试使用 JSP 文件作为这样的源来实现完全相同的事情时：

```
<%@ page language="java"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Basic Search</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.catcomplete.css" />

    <script type="text/javascript" src="js/bootstrap.js"></script>    
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>

</head>
<body>

<script>
    $.widget( "custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var that = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            that._renderItemData( ul, item );
        });
    }
});
</script>

<script type="text/javascript">
    $(function() {
    $( "#search" ).catcomplete({
        delay: 0,
        minLength: 3,
        source: 'getsearchjson.jsp'
    });
});
</script>

<p />

<div class="container well">
    <div class="row-fluid">
        <form action="search" method="get">
            <div class="input-append">
                <input type="text" name="query" id="search" placeholder="Search.."/>
                <button class="btn" type="submit">Search</button>
            </div>

        </form>
    </div>
</div>

</body>
</html> 
```

getsearchjson.jsp：

```
<% 
    response.setContentType("application/json");
%>
[
    { label: "Eric Cartman", category: "Users" },
    { label: "John Lennon", category: "Users" }, 
    { label: "Elvis Presley", category: "Users" },
    { label: "Steven Gerrard", category: "Users" },
    { label: "Java", category: "Programming" },
    { label: "C#", category: "Programming" },
    { label: "C++", category: "Programming" }, 
    { label: "Python", category: "Programming" },
    { label: "Ruby on Rails", category: "Programming" }
]; 
```

它停止工作，也就是说，我的搜索字段中不再存在自动完成功能。

澄清一下：第一个实现和第二个实现之间的唯一区别是数据的来源。在第一个实现中它是一个 JavaScript 数组，在第二个实现中它是一个 JSP 文件。

感谢您的任何回复。供您参考，我的 JavaScript 知识非常有限，因为它不是我大学课程的一部分。但是，我想用它来使 Web 应用程序看起来更专业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:28:40.367

# ios - 如何在 ios6 下重现 MapView 中切换 setUserTrackingMode 的按钮？

> ID：12999394
> 
> 赞同：4
> 
> 时间：2012-10-21T15:47:10.057
> 
> 标签：ios, ios6, maps, mkmapview, mapkit

使用以下代码，可以设置一个按钮以在导航栏中切换 setUserTrackingMode。

```
// set MKUserTrackingBarButton
// source: http://stackoverflow.com/questions/9876157/is-the-current-location-compass-  heading-button-available-in-the-ios-sdk

MKUserTrackingBarButtonItem *buttonItem = [[MKUserTrackingBarButtonItem alloc]   initWithMapView:self.mapView];
self.navigationItem.rightBarButtonItem = buttonItem;

// set tracking mode
[self.mapView setShowsUserLocation:YES];
[self.mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading animated:YES]; 
```

如何做到这一点（地图内的按钮左下角） Apple 在地图中这样做？（对不起，我不允许张贴图片来澄清它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T21:26:43.780

您可以将 a 添加`MKUserTrackingBarButton`到位于`UIToolbar`屏幕底部的 a （并且可能具有自定义背景）。这应该允许重现 Maps.app 行为。

# javascript - 通过 onclick 替换滚动动作

> ID：12999395
> 
> 赞同：0
> 
> 时间：2012-10-21T15:47:12.963
> 
> 标签：javascript, jquery, ajax

我使用这段代码（必须对其进行调整）在滚动时在我的页面上自动加载（想想 Twitter）新帖子。

由于当用户快速滚动时这对我的服务器来说资源很重，所以我希望在单击按钮时激活它，可以说`<button id="load_more">Load more</button>`

谁能帮我转换我的？我无法让它工作......（加上最终删除繁忙的指标）

这是我用于自动滚动的代码：

```
<?php
 $maxPage = $this->Paginator->counter('%pages%');
 ?>
 <script type="text/javascript">
 var lastX = 0;
 var currentX = 0;
 var page = 1;

 $(window).scroll(function () {
 if (page < <?php echo $maxPage;?>) {
  currentX = $(window).scrollTop();
 if (currentX - lastX > 150 * page) {
  lastX = currentX - 150;
  page++;
  $("#busy-indicator").fadeIn();
  $.get('<?php echo $this->Html->url('/users/getmore_timeline/'.$this->Session->read('Auth.User.id')); ?>/page:' + page, function(data) {
  setTimeout(function(){
  $('#postList').append(data);
  var bi =  $("#busy-indicator");
       bi.stop(true, true);
       bi.fadeOut();
  }, 500);
 });
 }
 }
 });
 </script> 
```

编辑 ：

我试过（从记忆中）

```
<button onlick"LoadMore()">Load More</button>

<?php  
 $maxPage = $this->Paginator->counter('%pages%');  
 ?>  
 <script type="text/javascript">  

function LoadMore () {  
 if (page < <?php echo $maxPage;?>) {  
  page++;  
  $("#busy-indicator").fadeIn();  
  $.get('<?php echo $this->Html-  >url('/users/getmore_timeline/'.$this->Session->read('Auth.User.id')); ?>/page:' + page, function(data) {
  setTimeout(function(){  
  $('#postList').append(data);  
  var bi =  $("#busy-indicator");  
       bi.stop(true, true);  
       bi.fadeOut();
  }, 500);
 });
 }
 };
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:44:34.210

我不确定我是否在这里遗漏了什么，但如果你想要的只是一个调用函数的按钮`LoadMore()`：

**HTML**

```
<button id="load_more">Load more</button> 
```

**JS**

```
$('#load_more').on('click', function() {
    Loadmore()
}) 
```

*PS：关于你的`<button onlick"LoadMore()">Load More</button>`，你有一个错字（非常有趣的一个：D），忘记了一个等号，你应该避免使用内联事件处理程序。*

# mysql - 用于随时间存储用户分数的 MySQL 数据库设计

> ID：12999401
> 
> 赞同：4
> 
> 时间：2012-10-21T15:47:42.633
> 
> 标签：mysql, database-design, database-schema, ranking

我正在创建一个网站，所有用户都有一个每天更新的分数。我可以根据这个分数轻松创建排名，但是我希望能够创建一周或一个月的“热门”列表等。

我的蛮力设计是每天为每个用户计算他们的分数并将其放入“分数”表中。因此，每天有多少用户，Scores 表都会增加。我可以根据用户在任何时间段内的得分差异对用户进行排名。

虽然我相信这在技术上会起作用，但我觉得必须有一种更复杂的方法来做到这一点，对吧？或不？我觉得分数表每天都会增加多少用户，这不可能是其他网站的做法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T23:09:31.700

通过根本不存储任何分数快照，您可以获得最大的灵活性。相反，**记录增量分数，因为它们发生。**

如果你有这样的表：

**用户**

*   用户身份
*   姓名
*   个人高分
*   *{您为每个用户存储一次的任何其他内容}*

**SCORE_LOG**

*   score_log_id
*   user_id（FK 到 USER）
*   约会时间
*   得分点

现在，您可以通过以下简单查询获得用户在任何时间点的累积分数：

```
select sum(scored_points)
from SCORE_LOG
where user_id = @UserID
  and date_time <= @PointInTime 
```

您还可以通过以下方式轻松获得一段时间内的最高得分手：

```
select
  user_id
, sum(scored_points)
from SCORE_LOG
group by
  user_id
where date_time >= @StartOfPeriod
  and date_time <= @EndOfPeriod
order by
  sum(scored_points) desc
limit 5 
```

如果您开始生产并发现您*在实践*中遇到性能问题，那么您可以考虑对任何有意义的统计数据的快照进行非规范化。这些快照统计信息的问题是它们可能与您的源数据不同步，因此您需要一种定期重新计算快照的策略。

如果你有两个真理来源，你最终会得到两个“真理”，这几乎是不言而喻的（认为它是墨菲定律的推论）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T16:35:44.380

Barranka 的评论是正确的，您需要确保尽可能不复制任何数据。

但是，如果您希望能够恢复到一些旧用户的分数，或者可能能够挑选出一天并查看谁在某个时间点上排名靠前，即动态报告，那么您将需要在旁边分别记录每条记录一个约会。有一个单独的表会很有用，因为您可以通过 SQL 从现有用户数据中推断出每日得分，并在需要时将其输入到表中。

您的决定是您希望在历史记录中保留多少用户记录以及保留多长时间。我写了下面的想法，“热门列表”将是前 5 名用户，您可以每天/每月运行一个 CRON 作业或计划任务来运行插入并清除非常旧的数据。

**用户**

*   ID
*   用户名
*   分数

**score_ranking**

*   ID
*   user_id（我们使用 id 而不是所有用户信息进行标准化）
*   score_at_the_time
*   排名日期

因此，要生成单个数据排名，您可以将其插入到该表中。就像是：

```
INSERT INTO
  `score_ranking` (`user_id`, `score_at_the_time`, `date_of_ranking`)
SELECT
  `id`, `score`, CURDATE()
FROM
  `users`
ORDER BY
  `score` DESC
LIMIT
 5 
```

要读取特定日期（或日期范围）的数据，您可以执行以下操作：

```
SELECT * FROM score_ranking 
WHERE date_of_ranking = 'somedate' 
ORDER BY score_at_the_time DESC 
```

# php - Mediawiki 扩展在页眉中添加 Javascript

> ID：12999403
> 
> 赞同：2
> 
> 时间：2012-10-21T15:47:55.417
> 
> 标签：php, javascript, mediawiki

嗨，我的问题是我无法在我的特殊页面扩展名中加载一些 javascript 文件。我使用 addscript 和其他一些方法进行了尝试，但唯一发生的事情是 javascript 被取消导致 mediawiki 软件的 no-js。

在我的扩展文件夹中有一个 new.js 文件，我只想在我的特殊页面上访问它。

这是一些代码（大部分是特殊页面的示例）。

我的Extentions.php

```
<?php
if (!defined('MEDIAWIKI')) {
    echo <<<EOT
To install my extension, put the following line in LocalSettings.php:
require_once( "$IP/extensions/MyExtension/MyExtension.php" );
EOT;
    exit( 1 );
}

$wgExtensionCredits['specialpage'][] = array(
    'path' => __FILE__,
    'name' => '-',
    'author' => 'Thomas Döring',
    'descriptionmsg' => '-',
    'version' => '0.0.1',
);

$dir = dirname(__FILE__) . '/';
$wgAutoloadClasses['SpecialMyExtension'] = $dir . 'SpecialMyExtension.php'; 
$wgExtensionMessagesFiles['MyExtension'] = $dir . 'MyExtension.i18n.php';
$wgExtensionMessagesFiles['MyExtensionAlias'] = $dir . 'MyExtension.alias.php'; 
$wgSpecialPages['MyExtension'] = 'SpecialMyExtension'; 
```

SpecialMyExtension.php

```
 <?php
 class SpecialMyExtension extends SpecialPage {
    function __construct() {
            parent::__construct( 'MyExtension' );
    }

    function execute( $par ) {
            $request = $this->getRequest();
            $output = $this->getOutput();
            $this->setHeaders();

            # Get request data from, e.g.
            $param = $request->getText('param');

            # Do stuff
            # ...

            if(file_exists("extensions/TimeLine/TimeLine/data.xml"))
            {
                    $data = simplexml_load_file("extensions/TimeLine/TimeLine/data.xml");

                    foreach($data->event as $event)
                    {
                        $html.="<tr><td>".$event['title']."</td><td>".$event['start']."</td></tr>";
                    }
                    $html.="</table>";

                    $html.="<a href=\"javascript:hello()\">klick</a>";

                    $output->addHTML($html);

                 }
                 else
                 {
                    $wikitext = 'Datei nicht gefunden!';
                    $output->addWikiText( $wikitext );
                 }

    }

 }
 ?> 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:58:28.153

addScript 适用于 1.16 及之前的版本。在 1.17 及更高版本中，您应该使用 addHeadItem：

```
$wgHooks['ParserBeforeTidy'][] = 'wgAddJquery';

function wgAddJquery(&$parser, &$text) {

  global $addJqueryScripts;
  if ($addJqueryScripts === true) return true;

  $parser->mOutput->addHeadItem(
    '<script language="JavaScript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>'
  );

  $addJqueryScripts = true;

  return true;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:00:15.667

我在皮肤文件中添加了它，在函数函数 setupSkinUserCss $out->addHeadItem('maketree.js',"

```
<script type='text/javascript' src='/js/mktree.js'></script>"); 
```

# jquery - 如何使用 Jquery 选择具有事件属性的元素？

> ID：12999406
> 
> 赞同：9
> 
> 时间：2012-10-21T15:48:10.983
> 
> 标签：jquery, events

希望有一个简单的解决方法。我想选择所有具有事件属性的 html 元素。例如：onclick、onkeypress 等。有没有一种最简单的方法可以使用 Jquery 来执行此操作，而无需单独选择每个属性？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T15:54:46.733

我相信您的问题的简短回答是*否定*的。

不同的 HTML 标记支持不同的事件，因此它们应该在 jQuery 代码中的某个位置进行硬编码。例如，通过阅读 jQuery 代码，我找不到对 onkeypress 事件的任何引用。

所以，我认为你可以只依赖[Has Attribute Selector](http://api.jquery.com/has-attribute-selector/) `[attribute]`：

```
$('[onclick], [onkeypress], [etc]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:55:19.683

如果值不具体，可以试试[这种方法](http://api.jquery.com/has-attribute-selector/)。

下面的演示基于选择器打印*"hey you people"*`$([attr1],[attr2],...,[attrN])`：

```
<div class="container">
    <div>no id</div>
    <div id="a">hey</div>
    <span name="b">you</span>
    <p id="c">guys</p>
</div>​

$('[id],[name]').each(function(){
    console.log($(this).text());
});​ 
```

基于该结构，可以编写简单的包装器：

```
$.fn.hasAttrib = function() {   
    var attributes = [];
    $.each(arguments, function(index, value){
        attributes.push('[' + value + ']');
    });
    return $(this).find(attributes.join());
}; 
```

在下面的语句中使用此类插件也会打印*“嘿，你们”*：

```
$('.container').hasAttrib('id','name').each(function(){
    console.log($(this).text());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T16:25:34.887

**您可以创建一个自定义过滤器函数来查找具有以on**开头的属性的元素，如下所示：

```
$.fn.filterOn = function() {
   this.each(function(ind,el) {
       var attrs = el.attributes;
       for (var i = 0; i < attrs.length; i++) {
           if (attrs[i].nodeName.indexOf('on') === 0) return true;       
       }
       return false;
   });
}; 
```

并像这样使用它：

```
//elems will contain all input fields with an attribute starting with 'on'
elems = $(':input').filterOn(); 
```

这将为您提供页面中具有以**on**开头的属性的所有元素（使用*****选择器时要注意性能）：

```
$("*").filterOn().each(function() {
   console.log('Element '+this.tagName + ' has an on... attribute');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T15:54:38.193

您可以解析所有元素并检查。效率不高，但应该可以。

检查[获取所有带有 onclick 的元素？](https://stackoverflow.com/questions/2878445/get-all-elements-with-onclick-in-them)

```
var allElements = document.getElementsByTagName('*');
for ( var i = 0; i<allElements.length; i++ ) {
    if ( allElements[i].className !== 'theClassNameYoureLookingFor' ) {
        continue;
    }
    if ( typeof allElements[i].onclick === 'function' ) {
        // do something with the element here
        console.log( allElements[i] );
    }
} 
```

# mysql - 在 MySQL 上使用存储过程的参数

> ID：12999415
> 
> 赞同：0
> 
> 时间：2012-10-21T15:50:05.600
> 
> 标签：mysql, stored-procedures, parameters

我正在尝试为以下示例编写 PL/SQL 或 T-SQL：

编写一个 PL/SQL 或 T-SQL 程序来检索并输出每个长度等于存储在`I_LENGTH`.

**到目前为止，我想出了这个：**

> '创建过程 Boat_Info (I_Length IN Marina_Slip.Length%Type) AS I_Marina_Num Marina_Slip.Marina_Num%Type I_Slip_Num
> Marina_Slip.Slip_Num%Type I_Rental_Fee Marina_Slip.Rental_Fee%Type I_Boat_Name Marina_Slip.Boat_Name%Type I_Owner_Num
> Marina_Slip.Owner_Num%Type;
> 
> 开始从 Marina_Slip 中选择 Marina_Num、Slip_Num、Rental_Fee、Boat_Name、Owner_Num 到 I_Marina_Num、I_Slip_Num、I_Rental_Fee、I_Boat_Name、I_Owner_Num 其中 Length = ??

我仍然缺少最后一部分，因为我没有特定的 Length 值来限制我的输出。也无法提供 DBMS 输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:02:20.560

括号中的变量是参数。你可以在你的 where 子句中使用它。例如 ：

```
(myLenght INT)

where length = myLength 
```

您可以定义多个参数，以逗号分隔`,`

另见：[Mysql 存储过程参数](http://www.mysqltutorial.org/stored-procedures-parameters.aspx)

# python - 第一次运行 Python 脚本。使用终端查看输出？

> ID：12999417
> 
> 赞同：1
> 
> 时间：2012-10-21T15:50:11.823
> 
> 标签：python, parsing, terminal, beautifulsoup

我正在关注有关使用 python 创建 chlerograph 地图的教程。

教程在这里： http: [//flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/](http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/)

按照说明，我创建了一个目录：

1.  一个 svg xml 地图
2.  带有数据的 csv 文件
3.  带有教程中剪切和粘贴代码的 python 脚本“colorize_svg.py”。
4.  一个下载的脚本库文件夹名为“beautifulsoup”（实际文件夹名称为“beautifulsoup4-4.1.3”）

一切似乎都很简单，即使我没有多少编码经验并且没有使用 Python。除了第 14 步“现在我们要做的就是运行我们的脚本并保存输出”作者指的是 Mac 上的终端。在我之前完成的任何编码中，总是打开一个文件，比如一个 html 文件，用浏览器查看输出。

这让我失望了。如何使用终端查看我的输出？从未使用过终端机？我必须以某种方式将终端“链接”到“colorize.py”文件吗？如何？我尝试将文件路径输入终端并按回车键，但得到了附加图像![在此处输入图像描述](../Images/8fdc123f01b3101488df70060dddca3c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:53:12.227

您可以使用 python 命令运行它：

`python /users/gcameron/Desktop/map/colorize_svg.py`

如果您只是运行`python`它将打开 python 控制台，您可以在其中运行 python 代码。这对于测试小东西、功能和类似的东西很有用。大多数情况下，我将它用作计算器。

在您的 python 脚本中，您还可以通过（在文档顶部） type 来定义它是一个 python 脚本`#! /bin/python`。或者，如果您在其他地方安装了 python，只需键入`#! /path/to/python`. 如果你这样做，你只需要输入脚本的路径：`/users/gcameron/Desktop/map/colorize_svg.py`它就会使用 python 解释器执行 python 脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:57:31.840

Before pointing you in the right direction I must advocate you to take 30 minutes to learn the basics of python, [Dive Into Python](http://www.diveintopython.net/index.html) is a great resource (first chapters). Once you get familiar with the ways you can run Python programs and the Python Interpreter itself, it will make sense running your script with the command:

```
python /users/gcameron/Desktop/map/colorize_svg.py 
```

Additionally, the interpreter gave you (a not very nice, ok) hint, that something went wrong with the command you tried to execute: it had an invalid syntax.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T16:34:31.910

您实际上可以从交互式解释器内部运行您的脚本（这是您在运行`python`而不是从终端运行脚本时得到的`python scriptname.py`）。

首先，`cd`到包含您的脚本的目录，然后在交互式 python 环境中`execfile("scriptname.py")`的提示符处键入。`>>>`（注意引号！）

另一种在执行后查看和进一步操作脚本内容的方法是使用 IDLE，这是一个基本的 Python IDE，它可能不随 Mac OS X 默认包含的 Python 版本提供。如果您安装了自己的 python 版本（例如从 python.org 安装，以便更新），那么您可以在 IDLE 中运行您的脚本，之后所有变量等都将在控制台窗口中可用。

# python - Python re.findall() 没有按预期工作

> ID：12999419
> 
> 赞同：14
> 
> 时间：2012-10-21T15:50:25.483
> 
> 标签：python, regex

我有代码：

```
import re
sequence="aabbaa"
rexp=re.compile("(aa|bb)+")
rexp.findall(sequence) 
```

这返回`['aa']`

如果我们有

```
import re
sequence="aabbaa"
rexp=re.compile("(aa|cc)+")
rexp.findall(sequence) 
```

我们得到`['aa','aa']`

为什么有区别，为什么（对于第一个）我们没有得到`['aa','bb','aa']`？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T16:12:44.873

不需要的行为归结为您制定正则表达式的方式：

```
rexp=re.compile("(aa|bb)+") 
```

括号`(aa|bb)`形成一个组。

如果我们查看[findall 的文档，](http://docs.python.org/library/re.html#re.findall)我们会看到：

> 返回字符串中模式的所有非重叠匹配，作为字符串列表。从左到右扫描字符串，并按找到的顺序返回匹配项。**如果****模式中存在**一个或多个组， 则**返回组列表**；如果模式有多个组，这将是一个元组列表。空匹配包含在结果中，除非它们触及另一匹配的开头。**

当你组成一个组时，它首先计算`aa`，然后`bb`，然后`aa`再计算（因为`+`量词）。所以这个组`aa`最终成立。并`findall`在列表中返回此值（由于整个表达式`['aa']`只有一个匹配项，因此列表仅包含一个保存在组中的元素）。`aabbaa``aa`

从您提供的代码中，您似乎想要这样做：

```
>>> rexp=re.compile("(?:aa|bb)+")
>>> rexp.findall(sequence)
['aabbaa'] 
```

`(?: ...)`不创建任何组，因此`findall`返回整个表达式的匹配项。

在您的问题结束时，您会显示所需的输出。这是通过寻找`aa`or来实现的`bb`。不需要量词 (`+`或`*`)。按照 Inbar Rose 的回答中的方式进行操作：

```
>>> rexp=re.compile("aa|bb")
>>> rexp.findall(sequence)
['aa', 'bb', 'aa'] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-21T16:12:21.210

让我解释一下你在做什么：

```
regex = re.compile("(aa|bb)+") 
```

您正在创建一个正则表达式，它将查找`aa`or`bb`然后将尝试查找是否有更多`aa`or`bb`之后，它将继续查找`aa`or`bb`直到找不到。因为你希望你的捕获组只返回`aa`or`bb`然后你只得到最后一个捕获/找到的组。

但是，如果你有一个这样的字符串：`aaxaabbxaa`你会得到`aa,bb,aa`，因为你首先查看字符串并找到`aa`，然后你寻找更多，并且只找到一个`x`，所以你有 1 个组。然后你找到另一个`aa`，然后你找到一个`bb`，然后一个，`x`所以你停下来，你有你的第二组，它是`bb`。然后你找到另一个`aa`。所以你的最终结果是`aa,bb,aa`

我希望这能解释你在做什么。正如预期的那样。要获得任何组，`aa`或者`bb`您需要删除`+`告诉正则表达式在返回匹配之前寻找多个组的组。并且只需让正则表达式返回`aa`or `bb`...

所以你的正则表达式应该是：

```
regex = re.compile("(aa|bb)") 
```

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:35:46.763

你的模式

```
rexp=re.compile("(aa|bb)+") 
```

匹配整个字符串 aabbaa。澄清一下看看这个

```
>>> re.match(re.compile("(aa|bb)+"),"aabbaa").group(0)
'aabbaa' 
```

也没有其他子字符串可以匹配

```
>>> re.match(re.compile("(aa|bb)+"),"aabbaa").group(1)
'aa' 
```

所以 findall 将只返回一个子字符串

```
>>> re.findall(re.compile("(aa|bb)+"),"aabbaa")
['aa']
>>> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-21T15:58:42.100

I do not understand why you use **+** - it means 0 or 1 occurrence, and is usually used when you want find string with optional inclusion of substring.

```
>>> re.findall(r'(aa|bb)', 'aabbaa')
['aa', 'bb', 'aa'] 
```

work as expected

# c# - 导出 EventLog 时出现异常

> ID：12999421
> 
> 赞同：5
> 
> 时间：2012-10-21T15:50:31.380
> 
> 标签：c#, .net, event-log

我使用以下代码导出 Windows 事件日志：

```
var els = new EventLogSession();
els.ExportLogAndMessages("Application", 
                            PathType.LogName, 
                            "*[System[Provider[@Name='Prayon.Client']]]", 
                            tempEventLogPath, 
                            false, 
                            CultureInfo.CurrentCulture); 
```

这通常是有效的。但是在一台机器上，我得到了休闲异常：

```
System.Diagnostics.Eventing.Reader.EventLogException: Der Verzeichnisname ist ungültig
bei System.Diagnostics.Eventing.Reader.EventLogException.Throw(Int32 errorCode)
bei System.Diagnostics.Eventing.Reader.NativeWrapper.EvtArchiveExportedLog(EventLogHandle session, String logFilePath, Int32 locale, Int32 flags)
bei System.Diagnostics.Eventing.Reader.EventLogSession.ExportLogAndMessages(String path, PathType pathType, String query, String targetFilePath, Boolean tolerateQueryErrors, CultureInfo targetCultureInfo) 
```

`"Der Verzeichnisname ist ungültig"`英文的意思：`"The pathname is invalid"`

Application-EventLog 是存在的并且`tempEventLogPath`也是有效的。

有人知道，有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T17:23:13.020

请参阅中的可能答案： [EvtArchiveExportedLog 失败并出现 ERROR_DIRECTORY](https://stackoverflow.com/questions/3301271/evtarchiveexportedlog-fails-with-error-directory)

问题是，即使您有权访问答案中提到的目录，您也可能因 UAC 通知而失败（您可以禁用 UAC，它应该可以工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T14:01:33.517

尝试删除目标目录中的 LocalMetaData 目录。

我有同样的问题。第一次调用有效，但随后的每个调用都会出现上述异常。使用 Processmonitor 进行的调查显示，除了 evtx 文件之外，还访问了 LocalMetaData 目录。删除此目录后，导出再次起作用。

# c# - 使用正则表达式解析 CIL 代码

> ID：12999422
> 
> 赞同：1
> 
> 时间：2012-10-21T15:50:33.307
> 
> 标签：c#, regex, cil

我有一个 *.il 文件。我想在其中找到所有非空方法（.method）。例如：

```
.class private auto ansi beforefieldinit MyApp.Program
       extends [mscorlib]System.Object
{
   //catch its body
  .method private hidebysig static void  Main(string[] args) cil managed
  {
    .entrypoint
    // 
    .maxstack  8
    IL_0000:  nop
    IL_0001:  ret
  }  

  //catch its body
  .method public hidebysig specialname rtspecialname 
          instance void  .ctor() cil managed
  {
    // 
    .maxstack  8
    IL_0000:  ldarg.0
    IL_0001:  call       instance void [mscorlib]System.Object::.ctor()
    IL_0006:  ret
  }  

   //don't touch, it's empty
   .method public hidebysig newslot virtual 
          instance string  Invoke(string a) runtime managed
  {
  }  
 //......................................
} 
```

现在我正在使用类字符串来做到这一点。这很不合理。我尝试使用`Regex`，但我不知道如何创建一个 reg 表达式来仅捕获

*   方法（而不是类）
*   仅具有非空主体的方法

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:02:15.333

### Using regex for parsing structure code is not recommended and it is bad practice

Try to use regex pattern

```
(\.method\s[^{]+?)(?=\s*{)(?!\s*{\s*}) 
```

Test it [**here**](http://regexpal.com/?flags=g&regex=%28%5C.method%5Cs%5B%5E%7B%5D%2b?%29%28?=%5Cs%2a%7B%29%28?!%5Cs%2a%7B%5Cs%2a%7D%29&input=.class%20private%20auto%20ansi%20beforefieldinit%20MyApp.Program%0A%20%20%20%20%20%20%20extends%20%5Bmscorlib%5DSystem.Object%0A%7B%0A%20%20%20//catch%20its%20body%0A%20%20.method%20private%20hidebysig%20static%20void%20%20Main%28string%5B%5D%20args%29%20cil%20managed%0A%20%20%7B%0A%20%20%20%20.entrypoint%0A%20%20%20%20//%20%0A%20%20%20%20.maxstack%20%208%0A%20%20%20%20IL_0000%3a%20%20nop%0A%20%20%20%20IL_0001%3a%20%20ret%0A%20%20%7D%20%20%0A%0A%20%20//catch%20its%20body%0A%20%20.method%20public%20hidebysig%20specialname%20rtspecialname%20%0A%20%20%20%20%20%20%20%20%20%20instance%20void%20%20.ctor%28%29%20cil%20managed%0A%20%20%7B%0A%20%20%20%20//%20%0A%20%20%20%20.maxstack%20%208%0A%20%20%20%20IL_0000%3a%20%20ldarg.0%0A%20%20%20%20IL_0001%3a%20%20call%20%20%20%20%20%20%20instance%20void%20%5Bmscorlib%5DSystem.Object%3a%3a.ctor%28%29%0A%20%20%20%20IL_0006%3a%20%20ret%0A%20%20%7D%20%20%0A%0A%20%20%20//don%27t%20touch,%20it%27s%20empty%0A%20%20%20.method%20public%20hidebysig%20newslot%20virtual%20%0A%20%20%20%20%20%20%20%20%20%20instance%20string%20%20Invoke%28string%20a%29%20runtime%20managed%0A%20%20%7B%0A%20%20%7D%20%20%0A%20//......................................%0A%7D).

To catch also the body `{...}` of each method, use regex pattern

```
(\.method\s[^{]+{(?!\s*}).*?}) 
```

Test it **[here](http://regexpal.com/?flags=gs&regex=%28%5C.method%5Cs%5B%5E%7B%5D%2b%7B%28?!%5Cs%2a%7D%29.%2a?%7D%29&input=.class%20private%20auto%20ansi%20beforefieldinit%20MyApp.Program%0A%20%20%20%20%20%20%20extends%20%5Bmscorlib%5DSystem.Object%0A%7B%0A%20%20%20//catch%20its%20body%0A%20%20.method%20private%20hidebysig%20static%20void%20%20Main%28string%5B%5D%20args%29%20cil%20managed%0A%20%20%7B%0A%20%20%20%20.entrypoint%0A%20%20%20%20//%20%0A%20%20%20%20.maxstack%20%208%0A%20%20%20%20IL_0000%3a%20%20nop%0A%20%20%20%20IL_0001%3a%20%20ret%0A%20%20%7D%20%20%0A%0A%20%20//catch%20its%20body%0A%20%20.method%20public%20hidebysig%20specialname%20rtspecialname%20%0A%20%20%20%20%20%20%20%20%20%20instance%20void%20%20.ctor%28%29%20cil%20managed%0A%20%20%7B%0A%20%20%20%20//%20%0A%20%20%20%20.maxstack%20%208%0A%20%20%20%20IL_0000%3a%20%20ldarg.0%0A%20%20%20%20IL_0001%3a%20%20call%20%20%20%20%20%20%20instance%20void%20%5Bmscorlib%5DSystem.Object%3a%3a.ctor%28%29%0A%20%20%20%20IL_0006%3a%20%20ret%0A%20%20%7D%20%20%0A%0A%20%20%20//don%27t%20touch,%20it%27s%20empty%0A%20%20%20.method%20public%20hidebysig%20newslot%20virtual%20%0A%20%20%20%20%20%20%20%20%20%20instance%20string%20%20Invoke%28string%20a%29%20runtime%20managed%0A%20%20%7B%0A%20%20%7D%20%20%0A%20//......................................%0A%7D)**.

* * *

To learn more about regular expressions visit [**regular-expressions.info**](http://www.regular-expressions.info/)

# objective-c - 目标 C：HTTPRequest 请求图像响应是找不到页面错误

> ID：12999424
> 
> 赞同：0
> 
> 时间：2012-10-21T15:50:39.527
> 
> 标签：objective-c, asihttprequest

我的项目看起来像社交网络，我必须向用户显示带有评论、喜欢等的上传图像，以便我发出 HTTPRequest 来下载图像。有时响应是 404 错误。这意味着在服务器中找不到请求的图像。那么如何处理 404 错误。它可能会导致线程停止，因此不会下载更多图像。一旦收到 404 错误，它就会停止服务。如何跳过 404 错误并继续服务以从服务器下载更多图像。

```
if (_request.responseStatusCode != 200){
            DLog(@"404 error");
            //return; 
         }
        else 
        {
            UIApplication* app = [UIApplication sharedApplication]; 
            app.networkActivityIndicatorVisible = NO;
            // passing the response data to the corresponding function
        } 
```

# java - 不同机器上的简单UDP广播客户端和服务器

> ID：12999425
> 
> 赞同：12
> 
> 时间：2012-10-21T15:50:46.050
> 
> 标签：java, networking, udp

当两者都在同一台 PC 上时，以下客户端和服务器 UDP 广播代码可以正常工作。但是，当我将它们放在同一个 WIFI LAN 中的不同 PC 上时，什么也没有发生。我已经设法让多播版本在两台单独的 PC 上正常工作，但不是这样 :(。我已经关闭了两台 PC 上的防火墙并成功地从两台 PC 上 ping 通。

这个测试背后的想法是，我可以使用这种方法，这样客户端就可以通过发送数据报包（对等发现）在 LAN 上找到服务器。我认为我在主机名或其他方面做错了，但经过一周的谷歌搜索和测试新想法后，我正式摆脱了它们:(。

```
public class Client
{
    private String hostname= "localhost";
    private int port=1234;
    private InetAddress host;
    private DatagramSocket socket;
    DatagramPacket packet;

    public void run()
    {
        try
        {
            host = InetAddress.getByName(hostname);
            socket = new DatagramSocket (null);
            packet=new DatagramPacket (new byte[100], 0,host, port);
            socket.send (packet);
            packet.setLength(100);
            socket.receive (packet);
            socket.close ();
            byte[] data = packet.getData ();
            String time=new String(data);  // convert byte array data into string
            System.out.println(time);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
}

public class Server
{
    public static final int DEFAULT_PORT = 1234;
    private DatagramSocket socket;
    private DatagramPacket packet;

    public void run()
    {
        try
        {
            socket = new DatagramSocket(DEFAULT_PORT);
        }
        catch( Exception ex )
        {
            System.out.println("Problem creating socket on port: " + DEFAULT_PORT );
        }

        packet = new DatagramPacket (new byte[1], 1);

        while (true)
        {
            try
            {
                socket.receive (packet);
                System.out.println("Received from: " + packet.getAddress () + ":" +
                                   packet.getPort ());
                byte[] outBuffer = new java.util.Date ().toString ().getBytes ();
                packet.setData (outBuffer);
                packet.setLength (outBuffer.length);
                socket.send (packet);
            }
            catch (IOException ie)
            {
                ie.printStackTrace();
            }
        }
    }
} 
```

只是想知道是否有人可以提供帮助？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T18:59:54.197

要实际广播，您必须将数据包发送到 LAN 上的所有 IP。可能的 IP 范围是从 0.0.0.0 到 254.254.254.254，但要选择所有 IP，您可以写：255.255.255.255。但是大多数路由器都会阻止这一点。他们将允许像 192.168.1.255 女巫广播到从 192.168.1.0 到 192.168.1.254 的所有 255 ip，我认为这是你需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T16:08:15.577

主机名是本地主机吗？如果是这样，您将无法访问其他电脑。您必须将其更改为目标 IP 地址。

# matlab - Matlab，interp1

> ID：12999426
> 
> 赞同：0
> 
> 时间：2012-10-21T15:50:51.550
> 
> 标签：matlab

嗨，我在让两个向量大小相同时遇到了一些麻烦。本质上，我有一个包含大量元素的向量和另一个包含较少元素的向量，这些元素对应于较大向量中的元素。例如，如果我的短向量有两个元素，它们将对应于较大向量中的第一个和最后一个元素，如果三个在小向量中，它们将对应于较大向量的第一个中间元素和最后一个元素。我需要为较小的向量生成插值，以便它和较大的向量大小相同。我正在尝试使用 interp1 函数，但看不到让它工作的方法。谢谢

简化的例子，我希望这更清楚，新的 C_L 应该仍然以 0.0 结束，仍然以 1.4 开始，那么必须对第一批新数字进行插值，使其在 1.4 和 1.6 之间，下一组在 1.6 和 1.7 之间， 等等。

```
% For finding the lift curve slope across a wing
semispan = 8; % User inputs
C_L = [1.4,1.6,1.7,1.4,1.1,0.0]; % from a user input at stations which equally subdivide the wing.
x = 0:0.2:semispan

% C_L needs to be the same length as x
c_L = interp1(C_L,x,'linear','extrap') % Don't know how to do this part correctly.

plot(x,C_L) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:32:26.870

解决方案是组成一个坐标向量，给出用户给出的测量位置，然后使用`interp1`.

例如，假设您在点 0、0.5 和 1 处进行了三个测量，那么坐标向量将为`[0, 0.5, 1]`。看起来您的测量值被定义为在`0`和之间等距`semispan`，在这种情况下，您可以使用在（并包括）这些值之间创建 N 个等距坐标的向量`linspace(0, semispan, N)`。

一旦你有了测量的坐标和测量本身，你就可以`interp1`在实际测量之间插入值。

这应该有效：

```
% For finding the lift curve slope across a wing
semispan = 8; % User inputs
C_L = [1.4,1.6,1.7,1.4,1.1,0.0]; % from a user input at stations which equally subdivide the wing.
C_L_coord = linspace(0, semispan, length(C_L));

x = 0:0.2:semispan

% C_L needs to be the same length as x
C_L_interpolated = interp1(C_L_coord, C_L, x);

plot(C_L_coord, C_L, x, C_L_interpolated); 
```

# objective-c - 以编程方式执行键盘快捷键 - Objective-C

> ID：12999427
> 
> 赞同：0
> 
> 时间：2012-10-21T15:50:52.987
> 
> 标签：objective-c, cocoa, keyboard-shortcuts

我正在寻找一种以编程方式执行键盘快捷键的方法，就像用户自己点击了这些键一样。[但是，该快捷方式是由用户使用名为ShortcutRecorder](http://wafflesoftware.net/shortcut/)的自定义控件选择的。

有什么方法可以获取 ShortcutRecorder 提供的信息（我认为基本上是键码和标志）并执行该快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:45:22.420

您可以使用[`CGEventPost()`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/doc/uid/TP40003550-CH202-BBCEDCEA)在系统范围内发布键盘事件，但用户必须在 Universal Access System Preferences 窗格中启用对辅助设备的访问。

# java - 如何在 ajax 请求中传递的 servlet 中使用 json 对象

> ID：12999429
> 
> 赞同：0
> 
> 时间：2012-10-21T15:51:05.373
> 
> 标签：java, javascript, ajax, jquery, servlets

我有以下对 servlet 的 ajax 调用。

```
$.ajax({ 
type: "post",
url: registersubmit.RegisterServlet.json,
dataType: "json",   
data:$('#registrationForm').serialize(),          
success: function(msg) {  
           //   alert(msg.data);
           alert('success'+msg.message2);     
},
error: function (xhr, ajaxOptions, thrownError){
         alert('HAI');
         alert('BYE');
}  
}); 
```

我可以知道我们如何使用 servlet 中的 json 对象吗

谢谢，巴拉吉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:56:33.340

您可以使用[GSON 库](http://code.google.com/p/google-gson/)一个 Java 库，可用于将 JSON 表示转换为 Java 对象，反之亦然

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:47:47.113

这里有一个很大的误解。您发送 ajax 请求的方式根本不会出现在服务器端的 JSON 对象中。所有数据都可以通过`request.getParameter()`通常的方式获得。只是将表单的[`$.serialize()`](http://api.jquery.com/serialize/)所有输入值收集到一个 JSON 对象中，该对象又在幕后以`$.ajax`通常的方式编码为 HTTP 查询字符串。JSON 对象只是一种中间格式，它允许*您*使用`$.ajax`.

所以，数据

```
<form id="registrationForm" ...>
    <input name="foo" ... />
    <input name="bar" ... />
    <input name="baz" ... />
</form> 
```

可以在 servlet 中以与同步（常规）提交完全相同的方式收集

```
String foo = request.getParameter("foo");
String bar = request.getParameter("bar");
String baz = request.getParameter("baz");
// ... 
```

请注意，该`dataType`选项指示 jQuery应将**响应**`$.ajax()`视为哪种数据类型。它与请求如何发送数据完全没有关系。它只*是以通常的方式*作为 HTTP 请求参数发送。另请参阅[文档](http://api.jquery.com/jQuery.ajax/)。***[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)***

 ***### 也可以看看：

*   [带有 JSP/Servlet 和 Ajax 的简单计算器](https://stackoverflow.com/questions/4114742/simple-calculator-in-jsp)
*   [java中的Ajax程序表单用户名验证](https://stackoverflow.com/questions/9500184/ajax-program-form-username-validation-in-java)
*   [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)***

# algorithm - 霍夫曼树：猜牌游戏

> ID：12999431
> 
> 赞同：0
> 
> 时间：2012-10-21T15:51:24.833
> 
> 标签：algorithm, tree, huffman-code

> “设计一个策略，尽量减少在以下游戏 [Gar94]，#52 中提出的预期问题数量。你有一副牌，其中包括一张黑桃 A、两张黑桃 2、三个三，以及最多九个九，总共制作 45 张牌。有人从洗牌牌中抽出一张牌，你必须通过询问可以回答是或否的问题来识别它。

这是算法设计和分析的练习。

我想到的是两种解决方法：

1.  是9吗？不：是 8 吗？不：是 7 吗？... 等等。

2.  卡 > 5？否：卡 > 2？... 等等。

哪个是正确的方法？

欢迎任何帮助。

编辑：我应该使用贪婪的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T16:00:54.567

Neither of those is the best approach. You can generalize the questions you ask further, to be something like: "Is the chosen card one of 1, 4, 7, or 8?".

To decide which question to ask, you'd build a Huffman tree containing the numbers. Then you'd ask: "Is the chosen card one of the numbers in the left subtree?" If it is, move down to the left subtree and repeat. Otherwise, move to the right subtree and repeat.

# ruby - 是否有用于 websockets 的 ruby 的稳定、生产就绪库？

> ID：12999432
> 
> 赞同：4
> 
> 时间：2012-10-21T15:51:25.550
> 
> 标签：ruby, websocket, em-websocket, cramp

我已经将 Socket.io 与 node.js 一起使用了一段时间，但我真的很想在 Ruby 中做到这一点。似乎有一些项目可用，但大多数都已经死了，即：

*   [danthes](http://phenomena.github.com/danthes/) - Ryan Bates 的叉子`private_pub`
*   [抽筋](https://github.com/lifo/cramp)- 过去 9 个月没有活动
*   [socket.io-ruby](https://github.com/dkastner/socket.io-ruby) - 过去 11 个月没有活动

我能找到的唯一项目是[em-websocket](https://github.com/igrigorik/em-websocket)，但是它非常低级并且没有任何客户端库。

我是否错过了一些项目或图书馆，或者真的没有办法用 Ruby 做 WebSockets？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:32:47.700

在[Pusher](http://pusher.com)，我们使用并为[em-websocket](https://github.com/igrigorik/em-websocket)做出贡献。

在客户端上，我们拥有自己的 Pusher JavaScript 库，它使用[web-socket-js](https://github.com/gimite/web-socket-js)进行 Flash 回退。

更多选项，包括 Pusher 的开源自安装版本（不是 Pusher）可通过[实时网络技术指南获得](http://www.leggetter.co.uk/real-time-web-technologies-guide)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T15:55:56.623

也许[faye-websocket](http://faye.jcoglan.com/ruby/websockets.html)？我从来没有用过它，但我*相信*作者。

# spring - 如何在spring-batch中创建过滤项目的报告？

> ID：12999435
> 
> 赞同：4
> 
> 时间：2012-10-21T15:51:49.370
> 
> 标签：spring, spring-batch

我基本上想创建一个报告，其中包含在我的批次的每个步骤中被过滤掉的项目。目前我可以看到有多少被 spring-batch-admin 过滤（和跳过），但我想要项目列表，以便我可以手动处理它们。

我的步骤遍历客户列表，并从第三方来源获取有关他们的数据。我用于获取数据的每个帐户都有用户名+密码。客户端可能没有凭据。我在运行处理器之前过滤它们。但是客户可能有错误的凭据（他输错了），然后我也想过滤它，但“不同”。我不想跳过这些项目，因为我不想设置一个限制，之后我的工作就会失败。即使它们都是空值或不正确的，我也想继续下一个阶段。

我的块目前包括一个数据库读取器、数据库写入器和一个`CompositeItemProcessor`：

*   验证客户端是否有凭据并过滤掉那些没有的。
*   运行数据增强器（另一个`ItemProcessor`）来获取数据。万一这一个因凭据错误而出错，它也会过滤该项目（返回 null）。

我想做的是：

*   区分发生的两种“类型”过滤（在同一步骤）。`filterCount`目前，我在 spring-batch-admin的字段中看到所有这些都汇总在一起。
*   发送包含针对每个案例过滤的客户端的报告，以便以后手动处理。我还想从几个步骤聚合过滤的项目，并在最后将它们一起发送。

最好的方法是什么？我可以知道是什么`ItemProcessor`导致该项目被过滤吗？我知道在`ItemListeners`处理项目后会收到通知，我应该以某种方式使用这些吗？我如何将结果（过滤的项目）存储到工作结束？

我试图寻找这个的最佳实践，因为我不认为我是唯一一个在他的工作运行后试图创建报告的人，但找不到任何有用的东西..

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T12:23:58.587

解决此问题的最佳方法是从您的 ItemProcessor(s) 中引发异常并将其过滤为跳过异常。然后使用 SkipListener 将它们写入另一个输出。将您的详细消息放在异常消息中，以便您可以将其包含在输出中。将跳过限制设置为极高的值（例如 999999）将防止您的作业因跳过次数而失败。

我已经在相当多的 spring-batch 工作中非常成功地做到了这一点，这并不是一种罕见的模式。

如果您还有其他问题，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T14:55:17.710

我面临着类似的情况，我决定使用的方法受到空对象模式的启发。我像往常一样通过返回 null 过滤不需要的项目。如果我发现一个我仍然想写的项目，但不同的是，我返回一个非空值，但它具有在正常执行期间无法进入的特定状态。当我的作家看到这一点时，它知道以不同的方式处理它。如果需要，可以设计空状态以向作者提供有关如何解释它的信息。

这有一些非常明显的缺点，但我认为最大的好处是它允许您将使用 Spring 框架的复杂性降至最低。

此外，您可以访问听起来像纯文本用户名和密码的事实让我担心。

# python - python settrace一个for循环

> ID：12999437
> 
> 赞同：1
> 
> 时间：2012-10-21T15:52:05.263
> 
> 标签：python, debugging, for-loop

我有兴趣跟踪 for 循环的执行。具体来说，我想在 for 循环退出时在屏幕上打印一条消息。问题是我无法控制 for 循环，也就是说，其他人会将我的代码传递给 for 循环以进行跟踪。这是一些示例代码：

```
import sys
import linecache           

def trace_calls(frame, event, arg): 
    if event != 'call':    
        return             
    co = frame.f_code      
    func_name = co.co_name 
    if func_name == 'write':
        return             
    return trace_lines

def trace_lines(frame, event, arg): 
    if event != 'line':
        return
    co = frame.f_code
    line_no = frame.f_lineno
    filename = co.co_filename
    print("%d %s"%(line_no, linecache.getline(filename, line_no)[:-1]))

def some_elses_code():
    j = 0
    for i in xrange(0,5):
       j = j + i
    return j

if __name__ == "__main__":
    sys.settrace(trace_calls)
    some_elses_code() 
```

以及代码的输出：

```
22     j = 0
23     for i in xrange(0,5):
24         j = j + i
23     for i in xrange(0,5):
24         j = j + i
23     for i in xrange(0,5):
24         j = j + i
23     for i in xrange(0,5):
24         j = j + i
23     for i in xrange(0,5):
24         j = j + i
23     for i in xrange(0,5):
25     return j 
```

我知道我可以只看行号，看到已经执行的行不是下一行，但感觉不对。我想检查传递给 trace_lines 方法的框架对象，并查看 for 循环中使用的迭代器没有更多项目。 [这个链接](http://effbot.org/zone/python-for-statement.htm%20This%20link)说for循环捕获了一个异常，然后它知道迭代器都用完了，但是我看不到框架对象上填充的任何异常对象（即frame.f_exc_value总是无）。此外，我在本地范围内没有看到 var 是 for 循环中使用的迭代器。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:38:21.860

循环创建的迭代器对`for`循环是私有的，并保存在 Python 堆栈中，每次执行时都会保留[并](http://hg.python.org/cpython/file/e647229c422b/Python/ceval.c#l2485)`GET_ITER`拾取[-](http://hg.python.org/cpython/file/e647229c422b/Python/ceval.c#l2495)`FOR_ITER`这就是为什么您在本地人中看不到它的原因。

`FOR_ITER`确实通过捕获迭代器引发的循环来终止循环`StopIteration`，但这是通过[直接检查是否`tp_iternext`返回`NULL`](http://hg.python.org/cpython/file/e647229c422b/Python/ceval.c#l2497)来测试的，因此异常在有机会传播到 Python 帧之前被捕获并清除。但是即使您可以访问迭代器，也几乎无法使用它，因为 Python 迭代器不支持窥视。

由于 Python 的跟踪机制在进入或离开块时不会调用跟踪回调`for`，因此您似乎需要借助诸如处理`line`事件之类的技巧来发现循环已退出。

# ruby - 如果散列中存在键，则更改散列值

> ID：12999440
> 
> 赞同：4
> 
> 时间：2012-10-21T15:52:45.313
> 
> 标签：ruby

如果密钥存在于散列中，我正在尝试更改散列的值。我有我的算法将其更改为正确的值，唯一的问题是它会更改哈希中的所有值，而不仅仅是我想要的值。如何仅更改哈希中的某些值？

我已经尝试了 hash.has_key?(key) 方法，它仍然改变了我所有的值

```
if @hash.has_key?(k)
  @hash.select {|k,v| v.price = (v.price/100)}
else 
  print "Key not found"
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T16:07:12.170

`has_key?`不是你的问题...`Hash#select`遍历所有值。

这里有两个选项：

```
@hash.select{|k,v| v.price /= 100 if k == key} 
```

或者

```
if @hash.has_key?(key)
  @hash[key].price /= 100
else 
  print "Key not found"
end 
```

# c# - WindowsIdentitiy.IsGuest 在 .net 3.5 上不起作用

> ID：12999442
> 
> 赞同：0
> 
> 时间：2012-10-21T15:53:03.113
> 
> 标签：c#, .net-3.5, user-accounts

我正在尝试使用 c# 和 .NET 3.5 发现用户是否是 windows7/windows8 中的来宾。

我已经按照[这里](https://stackoverflow.com/questions/3140002/how-to-know-if-a-guest-user-is-running-the-application-c)的答案并尝试调用[WindowsIdentity.GetCurrent().IsGuest](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.isguest%28v=vs.110%29.aspx)但它不起作用在来宾帐户（在 windows7 和 windows8 上）上也返回 false。

我打印了 WindowsIdentity.GetCurrent().User.Value 和 WindowsIdentity.GetCurrent().Name，两者都是正确的：

WindowsIdentity.GetCurrent().Name = ComputerName\Guest

WindowsIdentity.GetCurrent().User.Value = S-1-5-21/Domain/501

将可执行文件编译为 .NET 4.5 时，WindowsIdentity.GetCurrent().IsGuest 在来宾帐户上返回 true（否则返回 false）。

根据 msdn 文档，IsGuest 应该适用于 .net 3.5 和 4.5。有什么我想念的吗？

有没有其他方法可以知道用户是否是客人？

**更新：**

以下代码有效：

```
 public static bool IsGuest
    {
        get
        {
            try
            {
                var identity = WindowsIdentity.GetCurrent();
                if (identity == null)
                {
                    return false;
                }

                var pricipal = new WindowsPrincipal(identity);
                return pricipal.IsInRole(WindowsBuiltInRole.Guest);
            }
            catch
            {
                return false;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:08:27.903

好吧，他们确实做得不同。4.5 检查账户是否是Guest 组的成员， 3.5 检查账户是否是Guest 用户账户。这是我用完汽油的地方，你的信息说是。除了出现在 User.Value 中的“域”奇怪之外。确保该帐户是计算机帐户而不是域帐户。来宾帐户的正确 SID 是 S-1-5-21-32-501。

一种可能的解决方法是按照 4.5 的方式执行此操作，检查帐户是否在来宾组中。

# c++ - 异常对象生命周期

> ID：12999448
> 
> 赞同：8
> 
> 时间：2012-10-21T15:53:32.303
> 
> 标签：c++, exception, object, lifetime

我想知道异常对象是如何创建的？为什么处理函数参数可以是非常量引用？

**例如：**

```
class E{
    public:
    const  char * error;
    E(const char* arg):error(arg){
    cout << "Constructor of E(): ";}

    E(const E& m){
        cout << "Copy constructor E(E& m): " ;
       error=m.error;
    }
};

int main(){
try{
    throw E("Out of memory");

}
catch(E& e){cout << e.error;}

} 
```

**输出：** E() 的构造函数：内存不足

所以我拥有`throw E("out of memory")`并且`E("out of memory")`只是一个临时对象，并且没有创建任何对象，除非`E("out of memory")`因为没有调用复制构造函数。因此，即使这`E("out of memory")`只是一个临时对象，我也有一个接受非常量引用的处理程序。

你能向我解释为什么这是可能的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T16:18:34.590

> 想知道异常对象是如何创建的？

当你这样做时：

```
throw E("Out of memory"); 
```

您在本地创建一个对象（E 类型）。抛出过程将此对象复制到标准未定义的某个私有内存位置。因此，被抛出的对象必须是可复制的。

注意：允许编译器优化副本并直接在私有位置创建它。所以它没有被复制的事实是因为编译器优化了副本（所以它不再是本地的）。尝试将复制构造函数设为私有，现在它将无法编译。

> 为什么处理函数参数可以是非常量引用？

当你抓住物体时：

```
catch(E& e) 
```

您将在它被复制到的私有位置获得对该对象的引用。它不是 const（或临时）值，因此您可以正常引用它。

# jquery - 需要包含来自另一个函数的结果的函数构建 html 字符串

> ID：12999451
> 
> 赞同：0
> 
> 时间：2012-10-21T15:54:09.650
> 
> 标签：jquery

我有一个构建 HTML 字符串 (outStr) 的 jQuery 函数，如下所示：

```
 function ShowUserInfo()
    {
        var userId = $("#users").val();
        if (userId == -1)
        {
            $("#userInfo").hide();
        }
        else
        {
            $.getJSON('Services/foobar.svc/GetUserById?userId=' + userId,
                function (data) {
                    var outStr = "";
                    $.each(data, function (index, elem) {
                        //var d = new Date(elem.DateOfBirth);
                        outStr += "<div class=\"user\">" +
                                "   <h3>" + elem.Forename + " " + elem.Surname + "</h3>" +
                                "   <p>Date of birth: " + elem.DateOfBirth + "</p>"
                    });
                    outStr += "<h4>Associated items</h4>"
                    outStr += [*** To do: add results from function ShowUserItemInfo ***];
                    outStr += "</div>"
                    $("#userInfo").show().html(outStr);
                }
            );
        }
    } 
```

请注意***To do ***部分：这是我遇到麻烦的地方。我还有另一个函数 (ShowUserItemInfo)，它也以类似的方式构建 HTML 字符串。我想要的是能够简单地调用该函数并将其生成的 HTML 字符串附加到 outStr。

但我就是无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:00:37.060

如果`ShowUserItemInfo`只是返回一个字符串，您可以像这样调用该方法。

```
outStr += ShowUserItemInfo(); 
```

我假设该函数看起来像这样：

```
function ShowUserItemInfo(){
    return "<div>Hello world</div>"
} 
```

# php - 带有两个子目录的 url 时的 mod_rewrite 奇怪行为

> ID：12999452
> 
> 赞同：0
> 
> 时间：2012-10-21T15:54:13.347
> 
> 标签：php, javascript, ajax, .htaccess, mod-rewrite

我正在使用 php、html5 和 javascript 开发一个 web 项目。现在我正在使用 php 在用户刷新页面时处理 URL，以便捕获子目录并重新计算页面的内容（因为我使用的是 ajax，所以需要它）。

好的，一切都以这种方式运行良好，但要实现这一点，我需要将每个请求重定向到我的页面到 index.php，该 index.php 调用另一个名为 controller.php 的文件。为此，我使用以下 .htaccess 代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/index\.php -f
RewriteRule ^(.*)$  /MySubDirectory/index.php [QSA] 
```

我正在本地主机上对其进行测试，因此对于以下模式：

```
localhost/MySubDirectory/
localhost/MySubDirectory/something 
```

它可以工作，但是当我添加一个新文件夹时：

```
localhost/MySubDirectory/something/somethingelse 
```

我在 css 和 javascript 导入时遇到奇怪的错误

```
Uncaught SyntaxError: Unexpected token < jquery-1.8.2.min.js:1
Uncaught SyntaxError: Unexpected token < jquery-ui-1.9.0.min.js:1
Uncaught SyntaxError: Unexpected token < SpriteAnimation.js:1
Uncaught SyntaxError: Unexpected token < Bile.js:1 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:06:46.550

问题不在 mod_rewrite 上，而是在引用资源的链接上。它们被视为从重定向的子目录开始的相对路径，这使得这些资源不会被加载。我通过用斜杠开始每个资源（javascript、css 和图像）来解决它，使它们成为绝对路径，而不是像以前那样相对。

# linq - 如何在 EF Code First 中检索复合类，并在多层应用程序上指定了关系？

> ID：12999457
> 
> 赞同：1
> 
> 时间：2012-10-21T15:54:35.797
> 
> 标签：linq, entity-framework, ef-code-first

我有一个有趣的问题：我创建了一个名为“Container”的类，它有一个“Contained”类型的成员它看起来像：

`public class Container { public Contained cnt{ get; set; } }`

该模型包含两个表，我的数据库看起来像： Containers(PK:id FK:Contained_ContainedId) Contained(PK:ContainedId)

EF Code first 正确地将此属性映射为 Contined 表中的外键。当我想使用 LINQ 检索这些对象时，问题就来了：

`Container Con=(from Object in PersistentManager.Containers.OfType<Container> select Object).SingleOrDefault();`

这样（或强制转换匿名类型），我得到一个容器。问题是，对 Contained 对象的引用始终为空。我认为这是为了性能而故意这样做的，但是，这一次，我需要它来恢复完整的对象。Intellitrace 显示它甚至没有加入表格，所以我想应该指定其他东西有什么想法吗？

Allrigth，感谢 Basic，我已经使用 include 子句解决了这个问题。我认为应该有一种在上下文封闭环境中使用延迟加载的方法（多层模式总是建议处理这些对象）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:20:21.933

行...

你需要`Include`相关的表。例如

```
(from PersistentManager.Containers.Include("Contained").OfType... 
```

每次可以包含多个表

```
(from PersistentManager.Containers.Include("Contained").
Include("OtherContained").
Include("Contained.SomeOtherLinkedType").
OfType... 
```

等等等等

n-Tier 上的延迟加载取决于您要如何处理数据。我个人更喜欢在 DAL/BL 中启用延迟加载，但将非 EF DTO（实际上与您的实体相同但未映射）传递给 UI。这样，BL 可以轻松获取它想要的数据，而 UI 可以获取“惰性”对象。

# asp.net-mvc - 如何在 MVC 4 API 中漂亮地打印 JSON 脚本

> ID：12999467
> 
> 赞同：10
> 
> 时间：2012-10-21T15:55:57.270
> 
> 标签：asp.net-mvc, json, asp.net-mvc-4

如何使用 MVC 4 API 获得以下 JSON 响应以使其看起来更清晰。这是一个示例 JSON

```
{"Name":"Apple","Expiry":"2008-12-28T00:00:00","Price":3.99} 
```

漂亮的 JSON

```
{
  "Name":"Apple",
  "Expiry":"2008-12-28T00:00:00",
  "Price":3.99
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-07T10:27:50.963

如果您使用的是 Web Api。您可以设置：

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.SerializerSettings.Formatting = Newtonsoft.Json.Formatting.Indented; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T17:49:55.463

您可以使用[Json.net](http://nuget.org/packages/Newtonsoft.Json) NuGet 包执行此操作：

```
JObject.Parse(json).ToString(Formatting.Indented) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-21T15:11:22.973

**动机：**如果查询字符串包含单词`prettyprint`or ，则漂亮打印，如果查询字符串中没有单词 or `prettyprint=true`，则不要漂亮打印。`prettyprint``prettyprint=false`

**注意：**此过滤器检查每个请求中的漂亮打印。默认关闭漂亮打印功能很重要，仅在请求时启用。

**第 1 步：**定义自定义操作过滤器属性，如下所示。

```
public class PrettyPrintFilterAttribute : ActionFilterAttribute
{
    /// <summary>
    /// Constant for the query string key word
    /// </summary>
    const string prettyPrintConstant = "prettyprint";

    /// <summary>
    /// Interceptor that parses the query string and pretty prints 
    /// </summary>
    /// <param name="actionExecutedContext"></param>
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {            
        JsonMediaTypeFormatter jsonFormatter = actionExecutedContext.ActionContext.RequestContext.Configuration.Formatters.JsonFormatter;
        jsonFormatter.SerializerSettings.Formatting = Newtonsoft.Json.Formatting.None;

        var queryString = actionExecutedContext.ActionContext.Request.RequestUri.Query;
        if (!String.IsNullOrWhiteSpace(queryString))
        {
            string prettyPrint = HttpUtility.ParseQueryString(queryString.ToLower().Substring(1))[prettyPrintConstant];
            bool canPrettyPrint;
            if ((string.IsNullOrEmpty(prettyPrint) && queryString.ToLower().Contains(prettyPrintConstant)) ||
                Boolean.TryParse(prettyPrint, out canPrettyPrint) && canPrettyPrint)
            {                    
                jsonFormatter.SerializerSettings.Formatting = Newtonsoft.Json.Formatting.Indented;
            }
        }
        base.OnActionExecuted(actionExecutedContext);
    }
} 
```

**第 2 步：**全局配置此过滤器。

```
public static void Register(HttpConfiguration config)
    {            
        config.Filters.Add(new PrettyPrintFilterAttribute());       
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-28T09:45:17.973

如果它是您要序列化为 JSON 的对象，您只需添加一个参数来“美化”它。

```
JsonConvert.SerializeObject(object, Formatting.Indented); 
```

# ruby-on-rails - 在带有 twitter bootstrap 的 rails 3.2 中使用波旁威士忌时的盒子阴影问题

> ID：12999472
> 
> 赞同：0
> 
> 时间：2012-10-21T15:56:29.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, bourbon

我的应用程序有一个名为`bootstrap_and_overides.css.scss`contains 样式的文件。现在我安装了 bourbon gem 来使用 sass mixin。但是当我使用附加按钮时，网站出现错误：

```
Mixin box-shadow takes 1 argument but 2 were passed.  
(in   /home/hkthanh89/rails_apps/online_test_app/app/assets/stylesheets/application.css.scss) 
```

这是我的`application.css.scss`：

```
@import "bourbon";  
@import "bootstrap_and_overrides"; 
```

我在我的视图文件中定义了一个链接：

```
<p>
  <%= link_to "Add new course", new_course_path, class: "new_resource" %>
</p> 
```

我的引导样式文件没有任何框阴影。我在我的引导样式中定义了 new_resource 类：

```
/* Buttons */  
.new_resource {
@include button(pill, #3FB344)
} 
```

我不知道为什么 mixin box-shadow 会出错。有人可以帮忙吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:27:03.333

您如何将 Bootstrap 添加到您的应用程序中？也许这与 Bootstrap 自己的按钮 mixin 有冲突？

我在我的 rails 3.2 应用程序中通过这个 gem 使用引导程序：

[https://github.com/yabawock/bootstrap-sass-rails](https://github.com/yabawock/bootstrap-sass-rails)

所以我只能使用我关心的引导程序中的特定东西。例如，我正在使用 Neat（Bourbon 的恭维响应式网格），所以我不想引入 Bootstrap 的布局或网格混合。

如果您需要一些关于我如何配置事物的示例，请告诉我。我能够毫无错误地使用波旁威士忌的按钮混合。

# c++ - 对象指针的 C++ 内存分配

> ID：12999474
> 
> 赞同：3
> 
> 时间：2012-10-21T15:56:40.323
> 
> 标签：c++, object, memory, pointers, allocation

```
#include <iostream>
using namespace std;

class test
{
public:
    int a,b[100];
    test() {
        cout << "Constructor called" << " \n " ;
        a=10;
    }
};

int main()
{
    test a1;    
    test *b2;      
    test *pointer = new test; 

    cout << a1.a << endl;
    cout << pointer->a << " \n ";
    cout << b2->a << " \n ";

    return 0;
} 
```

我想知道上面的代码是否只创建了两个对象，分别是'a1'对象和'pointer'对象指针。我假设指针'b2'没有为它分配内存。在这种情况下，最后一个“ cout << b2->a ”应该会造成分段错误。我正在访问一个尚未分配内存的位置。但我没有得到分段错误。编译器只是打印一个随机值。

我的问题是“这里是三个对象分配内存还是只有两个”？为什么没有分段错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:02:46.747

`a1`在自动内存中分配。

`b2`不是一个对象（嗯，不是你定义的类型的对象），而是一个指针，它没有指向一个有效的位置。这是一个悬空指针，取消引用它会导致**未定义的行为**。任何事情都有可能发生。

`pointer`是指向动态内存中对象的指针。它本身不是一个对象，而是指向由`new test`.

> 这里是三个对象分配内存还是只有两个

只有两个。

> 为什么没有分段错误？

因为未定义的行为意味着任何事情都可能发生。任何行为都是符合标准的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-28T06:49:54.070

我假设指针`b2`没有为它分配内存？

*   通常在创建对象时会自动创建内存。

*   始终`NULL`在创建指向对象的指针时分配，避免访问冲突。

例子：

```
 test *b2; //not safe

       test *b2 = NULL; // SAFE 
```

希望能帮助到你。

# grails - 将关联添加到 SpringSecurity User 类

> ID：12999479
> 
> 赞同：1
> 
> 时间：2012-10-21T15:57:16.013
> 
> 标签：grails, spring-security, grails-orm

我正在尝试将默认 Spring Security 用户域类的引用添加到另一个应该包含其他用户信息的类。

```
class User {
    transient springSecurityService

    String username
    String password
    boolean enabled
    boolean accountExpired
    boolean accountLocked
    boolean passwordExpired

    Profile profile
      ... 
```

...和...

```
class Profile {
    static constraints = {
    }

    static belongsTo = [user : User]

    String firstName
    String lastName     
} 
```

从我读到的应该是它的工作方式，但我收到以下错误：

```
ERROR context.GrailsContextLoader  - Error executing bootstraps: null
Message: null
   Line | Method
->>  32 | create                           in com.app.UserRole
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    15 | doCall                           in BootStrap$_closure1
|   301 | evaluateEnvironmentSpecificBlock in grails.util.Environment
|   294 | executeForEnvironment            in     ''
|   270 | executeForCurrentEnvironment . . in     ''
|   303 | innerRun                         in java.util.concurrent.FutureTask$Sync
|   138 | run . . . . . . . . . . . . . .  in java.util.concurrent.FutureTask
|   886 | runTask                          in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . . . . . . . . . . . . .  in     ''
^   662 | run                              in java.lang.Thread 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:46:20.783

我们需要见到你`BootStrap`才能确定，但​​我怀疑这是因为你正在做类似的事情

```
def user = new User(....).save()
def role = new Role(....).save()
UserRole.create(user, role) 
```

并且您的 new`User`验证失败（导致`save`返回`null`）。

如果你使用`save(failOnError:true)`你应该得到一个不同的异常，更好地表明真正的问题是什么。检查您`constraints`在您的`User`类中是否具有权限，特别注意 GORM 属性默认情况下不可为空，因此如果您希望能够保存`User`没有 a 的 a `Profile`，则需要添加`profile(nullable:true)`.

# php - PHP中具有数据库连接的动态复选框

> ID：12999480
> 
> 赞同：0
> 
> 时间：2012-10-21T15:57:16.110
> 
> 标签：php

这是我试图做的。请仔细阅读，因为我在这里有点新，所以我会尽力解释我的问题。

(1) 我动态创建了复选框，并尝试分配与 SQL 数据库中的数据记录之一相同的复选框名称。即有一个名为“sbstart”的表格列，我尝试将此表格行的值分配给复选框作为复选框名称。例如，sbstart 有 3 行，其中包含 1,2,3，所以我尝试将 1,2,3 分配为复选框值。这是代码。

```
echo "<table cellpadding='2' class='tablet' cellspacing='0'>";
echo 
"<tr>
<th class='tbldecor8'></th>"
."<th class='tbldecor2'>"."Starting Cheque No"."</th>"
."<th class='tbldecor3'>"."Ending Cheque No"."</th>"
."<th class='tbldecor4'>"."Total No of Cheques remaining"."</th>"
."<th class='tbldecor5'>"."Cheque Type"."</th>"
."</tr>";

    while ($reca = mysqli_fetch_array($result))
    {
    if($reca['sbstart'] != "" && $reca['sbend'] !="") {
    $cxVal = $reca['sbstart'];
        echo "<tr>";
        echo "<td class='tbldecor1'><input type='checkbox' name='$cxVal'>$cxVal</td>";
        echo "<td class='tbldecor2' style='text-align:center'>".trim($reca["sbstart"])."</td>";
        echo "<td class='tbldecor3' style='text-align:center'>".trim($reca["sbend"])."</td>";
        echo "<td class='tbldecor4' style='text-align:center'>".trim($reca["totsb"])."</td>";
        echo "<td class='tbldecor5' >SmithKline Beecham (Consumer)</td>";
        echo "</tr>";
        }
}
        echo "<tr class='tbldecor6'></tr>"; 
        echo "</table>"; 
```

(2) 请阅读。我来解决我的问题。其次，我想检查用户何时提交表单，通过复选框选择了哪些值，获取它们并删除它们。为了做到这一点，以了解用户检查了哪些选项，我使用了以下内容，它总是给出“否”作为输出。

```
if(isset($_POST['submit']))
{
    if(isset($_POST['$cxVal'])){echo 'Yes';}else{ echo 'No';}
} 
```

好吧，如果您有更好的想法/正确的方法，请分享。谢谢。

编辑：

```
<html>
<form with PHP SELF......>
<div><?php
echo "<table cellpadding='2' class='tablet' cellspacing='0'>";
echo 
"<tr>
<th class='tbldecor8'></th>"
."<th class='tbldecor2'>"."Starting Cheque No"."</th>"
."<th class='tbldecor3'>"."Ending Cheque No"."</th>"
."<th class='tbldecor4'>"."Total No of Cheques remaining"."</th>"
."<th class='tbldecor5'>"."Cheque Type"."</th>"
."</tr>";

    while ($reca = mysqli_fetch_array($result))
    {
    if($reca['sbstart'] != "" && $reca['sbend'] !="") {
    $cxVal = $reca['sbstart'];
        echo "<tr>";
        echo "<td class='tbldecor1'><input type='checkbox' name='$cxVal'>$cxVal</td>";
        echo "<td class='tbldecor2' style='text-align:center'>".trim($reca["sbstart"])."</td>";
        echo "<td class='tbldecor3' style='text-align:center'>".trim($reca["sbend"])."</td>";
        echo "<td class='tbldecor4' style='text-align:center'>".trim($reca["totsb"])."</td>";
        echo "<td class='tbldecor5' >SmithKline Beecham (Consumer)</td>";
        echo "</tr>";
        }
}
        echo "<tr class='tbldecor6'></tr>"; 
        echo "</table>";

?>
<input type="submit" name="del" id="del" value="Delete">
</div>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:05:28.327

改变

```
echo "<td class='tbldecor1'><input type='checkbox' name='$cxVal'>$cxVal</td>"; 
```

至

```
//input field array
echo "<td class='tbldecor1'><input type='checkbox' name='del[]' value='$cxVal'>$cxVal</td>"; 
```

在 PHP 中，

```
echo "<pre>";
print_r ($_POST['del']); // array of all checked values 
```

# c++ - free.c 抛出异常“这个程序已经停止工作”

> ID：12999481
> 
> 赞同：4
> 
> 时间：2012-10-21T15:57:16.780
> 
> 标签：c++, visual-c++, stack, visual-c++-2010-express

当我使用 Visual C++ 2010 Express 的调试器运行程序 (server.exe) 时，它运行良好，但是当我将它作为 exe 运行时，它却没有；它因“Server.exe 已停止工作”对话框而崩溃。

接下来，我将 exe 重命名为“ServerInstaller.exe”并且它可以工作，所以我认为这是一个权限错误，但它不适用于管理员模式下的“Server.exe”。

然后，我将 VC++ 中的调试器附加到“Server.exe”程序，它在“free.c”中出现异常。

这个文件中的代码是

```
void __cdecl _free_base (void * pBlock)
{

        int retval = 0;

        if (pBlock == NULL)
            return;

        RTCCALLBACK(_RTC_Free_hook, (pBlock, 0));

        retval = HeapFree(_crtheap, 0, pBlock);   // Exception thrown in this function
       if (retval == 0)
        {
            errno = _get_errno_from_oserr(GetLastError());
        }
} 
```

例外是

> Server.exe 中 0x770ae3be 处的未处理异常：0xC0000005：访问冲突读取位置 0x3765f8c7。

我检查了 pBlock 的值，它是 0x007f82c0。

我的程序。

我的程序是一个RakNet服务器，刚刚成功删除了一个播放器。服务器此时正在检查来自 RakNet 的消息

堆栈回溯

```
 ntdll.dll!770ae3be()    
    [Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] 
    ntdll.dll!770ae023()    
    kernel32.dll!75e814dd()     
>   msvcr100d.dll!_free_base(void * pBlock)  Line 50 + 0x13 bytes   C
    msvcr100d.dll!_free_dbg_nolock(void * pUserData, int nBlockUse)  Line 1431 + 0x9 bytes  C++
    msvcr100d.dll!_free_dbg(void * pUserData, int nBlockUse)  Line 1265 + 0xd bytes C++
    msvcr100d.dll!free(void * pUserData)  Line 49 + 0xb bytes   C++
    RakNetDebug.dll!RakNet::_RakFree_Ex(void * p, const char * file, unsigned int line)  Line 165 + 0xc bytes   C++
    RakNetDebug.dll!RakNet::ReliabilityLayer::FreeInternalPacketData(RakNet::InternalPacket * internalPacket, const char * file, unsigned int line)  Line 3766 + 0x17 bytes C++
    RakNetDebug.dll!RakNet::ReliabilityLayer::RemovePacketFromResendListAndDeleteOlderReliableSequenced(RakNet::uint24_t messageNumber, unsigned __int64 time, DataStructures::List<RakNet::PluginInterface2 *> & messageHandlerList, const RakNet::SystemAddress & systemAddress)  Line 2391   C++
    RakNetDebug.dll!RakNet::ReliabilityLayer::HandleSocketReceiveFromConnectedPlayer(const char * buffer, unsigned int length, RakNet::SystemAddress & systemAddress, DataStructures::List<RakNet::PluginInterface2 *> & messageHandlerList, int MTUSize, unsigned int s, RakNet::RakNetRandom * rnr, unsigned short remotePortRakNetWasStartedOn_PS3, unsigned int extraSocketOptions, unsigned __int64 timeRead, RakNet::BitStream & updateBitStream)  Line 776   C++
    RakNetDebug.dll!RakNet::ProcessNetworkPacket(RakNet::SystemAddress systemAddress, const char * data, const int length, RakNet::RakPeer * rakPeer, RakNet::RakNetSmartPtr<RakNet::RakNetSocket> rakNetSocket, unsigned __int64 timeRead, RakNet::BitStream & updateBitStream)  Line 5012 C++
    RakNetDebug.dll!RakNet::RakPeer::RunUpdateCycle(unsigned __int64 timeNS, unsigned __int64 timeMS, RakNet::BitStream & updateBitStream)  Line 5099 + 0x81 bytes  C++
    RakNetDebug.dll!RakNet::UpdateNetworkLoop(void * arguments)  Line 5868  C++
    msvcr100d.dll!_callthreadstartex()  Line 314 + 0xf bytes    C
    msvcr100d.dll!_threadstartex(void * ptd)  Line 297  C
    kernel32.dll!75e833aa()     
    ntdll.dll!770b9ef2()    
    ntdll.dll!770b9ec5() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T16:05:49.557

如果您的指针有一个值，并且您收到这样的错误，则很可能意味着您正在尝试多次释放内存。检查代码，并尝试找出您释放了多少次。阻止这种情况的一种方法是在释放它指向的块后立即将指针设置为零。

另一种可能性是，您没有使用 msvcrt，并且您正在加载一个也不使用 msvcrt 的 DLL，并且分配发生在可执行文件或 DLL 中，并在另一个中释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T08:57:38.737

我遇到了这个问题，不是多次删除，而是编译上的问题（使用VisualStudio2012）我重新编译程序，问题解决了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T12:57:30.057

重建项目可能会对你有所帮助。它对我有用

# c - C如何处理符号扩展？

> ID：12999484
> 
> 赞同：0
> 
> 时间：2012-10-21T15:57:24.140
> 
> 标签：c, unsigned, signed

我有一个指向字节缓冲区的指针，我从中将每个偶数索引字节复制到一个 int（由于数据存储到缓冲区中的协议，我知道奇数周期用于读取）。现在当我这样做时

```
signed int a;
...
//inside a loop
a = buffer[2*i]; //buffer is unsigned 
```

它给了我一个无符号数。但是，当我这样做时

```
a = (int8_t)buffer[2*i] 
```

该号码以签名形式显示。这迫使我重新思考 c 中的符号扩展是如何工作的，尤其是在上述情况下。我的理解是，因为我声明了一个已签名的，编译器会自动进行符号扩展。任何人都可以花一些时间来解释为什么不是这样。我只是在这个陷阱里呆了一个小时，不想以后再落入同样的陷阱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:09:35.297

`buffer`是一个无符号八位整数数组（或充当一个）。所以 的值`buffer[2*i]`在 0 到 255（含）的范围内，并且该范围内的所有值都可以表示为`int`s，因此分配

```
a = buffer[2*i]; 
```

保留值，提升到更广泛的类型`int`是通过用零填充来完成的。

`int8_t`如果你在分配之前投到，

```
a = (int8_t)buffer[2*i] 
```

缓冲区中大于 127 的值以实现定义的方式转换为 type `int8_t`，很可能只是将位模式重新解释为带符号的 8 位整数，这会导致从 -128 到 -1 的负值。这些值可以表示为`int`s，因此它们保留在赋值中，`int`然后通过符号扩展完成对更广泛类型的保留值提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:15:27.017

int_8 只有 8 位，如果最高位为 1，则它具有负值： 1xxxxxxx ，如果将这样的值分配给带符号的 int（32 或 64 位），当然会得到负值。更长的 int 在赋值后看起来像`11111111 11111111 11111111 1xxxxxxx`，只需一个简单的 xor 就可以达到 00000000 ^ 1001 => 11111001 的效果。

# javascript - JSP not displaying correctly

> ID：12999489
> 
> 赞同：0
> 
> 时间：2012-10-21T15:57:49.103
> 
> 标签：javascript, jquery, spring, jsp, spring-mvc

I have a JSP form that is retrieved using a RequestMapping during GET. JSP page structure for the page looks like this:

```
<div id="myDiv">
     <script>
        function update() {
           update_fn(formId, ... more parameters);  // this is a function defined in a .js file, this submits the form
        }
     </script>

     <form:form ... >
        <button id="myButtonUniqueIDWithCurrentTime" onclick="update()">OK</button>
     </form:form>
</div> 
```

Now when the button is clicked, udpate_fn() is called which sends a POST request using $.ajax. The RequestMapping contains the form annotated with `@ModelAttribute` and `@Valid`.

If BindResult is error free then I push the data to the database otherwise I send back the same form to the client. This is what it looks like.

```
@RequestMapping(value = "/formSubmit", method = RequestMethod.POST)
public ModelAndView addData(
  @ModelAttribute("editForm") @Valid BackingForm form,
  BindingResult result, Model model) {

boolean success = false;
String message = "";
Map<String, Object> m = new HashMap<String, Object>();
if (form == null) {
  form = new BackingForm();
} else {
  if (result.hasErrors()) {
    success = false;
    message = "Please fix the errrors noted above";
  } else {
    try {
      MyEntity entity = form.getWrappedEntity();
      entityRepository.addData(entity);
      form = new BackingForm();    // why is empty form not visible in JSP
      success = true;
      message = "Data Successfully Added";
    } catch (EntityExistsException ex) {
      ex.printStackTrace();
      success = false;
      message = "Entity Already exists.";
    } catch (Exception ex) {
      ex.printStackTrace();
      success = false;
      message = "Internal Error. Please try again or report a Problem.";
    }
  }
}

m.put("editForm", form);
m.put("success", success);
m.put("message", message);

ModelAndView mv = new ModelAndView("editForm");
mv.addObject("model", m);

return mv; 
```

}

This is the Javascript for the post request.

```
function updateGeneric(form, resultDivId, url) {
   var data = $("#" + form.getAttribute("id")).serialize();
   $.ajax({
    type : "POST",
    url : url,
    data : data,
    success : function(response) {
      console.log(response);
      $("#" + resultDivId).replaceWith(response);
    }
   });
} 
```

As shown in the code above When the data is successfully added I do the following:

```
 form = new BackingForm();    // why is empty form not visible in JSP
      success = true;
      message = "Data Successfully Added"; 
```

Now when I putting this form in the ModelAndView and then replacing the rendered view with the ModelAndView returned'editForm.jsp', why is the correct form not showing up in the page? I am getting the correct values for message, success in the jsp page. But the form contains the values from the old submission even when it is set to a new form.

Note I am not redirecting after the POST. I am just replacing an HTML fragment using jquery.

Can you point out what is wrong with my code and what could be a neat way to do the same thing?

Thanks in Advance!

# java - 如何使用 em.merge() 更新实体引用的列表

> ID：12999491
> 
> 赞同：0
> 
> 时间：2012-10-21T15:58:02.220
> 
> 标签：java, google-app-engine, jpa-2.0

我正在尝试更新指向列表的实体 (EntityObjectContainigList)。我从数据库中获取实体，分离它，从实体指向的列表中删除一些元素，然后尝试将更新的实体与驻留在数据库中的实体合并。

现在的问题是，当我运行 em.merge(EntityObjectContainigList) 时，列表引用的对象/实体（我删除的那些）仍然留在数据库中。

```
@Entity
public class EntityObjectContainigList {

    @Id
//    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Long id;

    @OneToMany(mappedBy = "eocl", cascade = CascadeType.ALL, fetch = FetchType.EAGER, orphanRemoval = true)
    List<ContainerObject> list = new ArrayList<ContainerObject>();

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public List<ContainerObject> getList() {
        return list;
    }

    public void setList(List<ContainerObject> list) {
        this.list = new ArrayList<ContainerObject>(list);
    }

} 
```

ContainerObject 看起来像这样：

```
@Entity
public class ContainerObject {

     @Id
     @GeneratedValue(strategy=GenerationType.IDENTITY)
     @JsonIgnore
     private Key id;

    @ManyToOne(fetch = FetchType.LAZY)
    EntityObjectContainigList eocl;

    private String s;

    private int i;

    public String getS() {
            return s;
    }

    public void setS(String s) {
        this.s = s;
    }

    public int getI() {
        return i;
    }

    public void setI(int i) {
        this.i = i;
    }

} 
```

servlet 看起来像这样：

```
@Path("/db")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class MyResourcse {

    private static final EntityManagerFactory emf = Persistence.createEntityManagerFactory("transactions-optional");

    @PUT
    public Response putInDb(EntityObjectContainigList d) {
        EntityManager em = null;
        try {
            em = emf.createEntityManager();
/*          Gson g = new Gson();
            System.out.println(g.toJson(d));*/
            em.persist(d);
            return Response.ok().build();
        } finally {
            if (em != null && em.isOpen()) em.close();
        }
    }

    @GET
    public Response getFromDb(@QueryParam("id")Long id) {
        EntityManager em = null;
        try {
            em = emf.createEntityManager();
/*          Gson g = new Gson();*/
            EntityObjectContainigList o = em.find(EntityObjectContainigList.class, id);
/*          System.out.println(g.toJson(o));*/
            return Response.ok(o).build();
        } finally {
            if (em != null && em.isOpen()) em.close();
        }
    }

    @POST
    public Response updateDb(EntityObjectContainigList d) {
        EntityManager em = null;
        try {
            em = emf.createEntityManager();
            Gson g = new Gson();
            d =  em.merge(d);
            System.out.println(g.toJson(d));
            return Response.ok().build();
        } finally {
            if (em != null && em.isOpen()) em.close();
        }
    }
} 
```

客户端看起来像这样：

```
public class UpdateClient {

    public static void main(String[] args) {
        ClientConfig cc = new DefaultClientConfig();
        cc.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);

        Client client = Client.create(cc);

        WebResource res = client.resource("http://localhost:8888/rest/db");

        EntityObjectContainigList o = new EntityObjectContainigList();
        o.setId(12L);
        o.setName("hello");

        for (int i = 0; i < 5; i++) {
            ContainerObject c = new ContainerObject();
            c.setI(i);
            c.setS("foo" + i );
            o.getList().add(c);
        }

        res.type(MediaType.APPLICATION_JSON).put(ClientResponse.class, o);

        System.out.println("Object inserted");

        o = res.queryParam("id", "12")
                .type(MediaType.APPLICATION_JSON)
                .accept(MediaType.APPLICATION_JSON)
                .get(ClientResponse.class)
                .getEntity(EntityObjectContainigList.class);

        System.out.println("Object fetched");

        o.getList().remove(1);
        o.getList().remove(0);
        o.setName("world");

        res.type(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).post(ClientResponse.class, o);
        System.out.println("Object updated");

        System.out.println("Done.");
    }

} 
```

我将 GAE 1.7.2 与 JPA 2.0 一起使用。

任何帮助深表感谢。维塔利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:22:20.827

**怎么修：**

为要从中删除的每个元素设置`eocl`为`null``list`

**实际上是什么错误：**

双向关系的两侧，

1.  拥有方（由 指向的一方`mappedBy`）和
2.  反面（一个带有`mappedBy`）。

不相等，因为仅根据拥有方的值修改数据库。`eocl`在您的情况下，字段`ContainerObject`拥有关系。因为您只修改了反面 ( `list`)，所以没有什么可以坚持的。要持久化更改，`eocl`应进行修改。建议两边都修改，否则内存中的对象图不一致。

在 JPA 2.0 规范中，这是用以下词语来说明的：

> 关系可以是双向的或单向的。双向关系既有拥有方，也有反向（非拥有）方。单向关系只有拥有方。关系的拥有方决定数据库中关系的更新，如 3.2.4 节所述。
> ...
> 托管实体之间的双向关系将根据关系拥有方持有的引用保持不变。开发人员有责任在内存引用发生变化时保持拥有侧的内存引用和反向侧的引用保持一致。

# c# - C#, default parameter value for an IntPtr

> ID：12999495
> 
> 赞同：17
> 
> 时间：2012-10-21T15:58:38.577
> 
> 标签：c#, intptr, default-parameters

I'd like to use a default parameter value of [`IntPtr.Zero`](https://msdn.microsoft.com/en-us/library/system.intptr.zero(v=vs.110).aspx) in a function that takes an `IntPtr` as an argument. This is not possible as `IntPtr.Zero` is not a compile time constant.

Is there any way I can do what I want?

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-21T16:24:51.947

说得委婉些，有点不直观，你可以通过使用*new*运算符来获得它：

```
 void Foo(IntPtr arg = new IntPtr()) { 
    } 
```

那是为了好玩，你可能更喜欢这个：

```
 void Foo(IntPtr arg = default(IntPtr)) { 
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T16:08:59.843

既然`IntPtr`是一个结构，你可以使用 Nullable-of-T 吗？

```
static void SomeMethod(IntPtr? ptr = null) {
    var actualPtr = ptr ?? IntPtr.Zero;
    //...
 } 
```

# r - Substitute values (for specific dates) from a second data frame to the first data frame

> ID：12999498
> 
> 赞同：2
> 
> 时间：2012-10-21T15:58:41.837
> 
> 标签：r

I have two time series data frames:

The first one:

```
head(df1) :

            MSCI ACWI    DJGlbl Russell 1000 Russell Dev S&P GSCI Industrial  S&P GSCI Precious
1999-03-01 -0.7000000 0.2000000   -0.1000000  -1.5000000           -1.0000000        -0.4000000
1999-03-02 -0.5035247 0.0998004   -0.7007007  -0.2030457            0.4040404        -0.3012048
1999-03-03 -0.2024291 0.2991027    0.0000000  -0.6103764            0.1006036        -0.1007049
1999-03-04  0.7099391 0.2982107    1.5120968  -0.1023541            0.5025126         0.4032258
1999-03-05  2.4169184 0.8919722    2.1847071   2.7663934           -1.2000000         0.0000000
1999-03-08  0.3933137 0.3929273    0.5830904  -0.0997009           -0.2024291         1.1044177

tail(df1) : 

             MSCI ACWI      DJGlbl Russell 1000 Russell Dev S&P GSCI Industrial  S&P GSCI Precious
2011-12-23  0.68241470  0.84790673    0.9441385   0.6116208            0.5822862        -0.2345300
2011-12-26 -0.05213764  0.00000000    0.0000000   0.0000000            0.0000000         0.0000000
2011-12-27  0.20865936  0.05254861    0.3117693   0.2431611            0.0000000        -0.7233273
2011-12-28 -0.62467465 -1.20798319   -1.1655012  -0.9702850           -2.0414381        -2.4043716
2011-12-29  0.52383447  0.47846890    0.8647799   0.5511329           -0.0933126        -1.2504666
2011-12-30  0.26055237  1.03174603   -0.4676539   1.2180268            1.9613948         1.7388017 
```

The second one:

```
 head(df2) :
                 MSCI.ACWI     DJGlbl Russell.1000 Russell.Dev S.P.GSCI.Industrial S.P.GSCI.Precious
     1999-06-01  0.00000000 0.24438520    0.0000000           0         -0.88465521       0.008522842
     1999-07-01  0.12630441 0.06755621    0.0000000           0          0.29394697       0.000000000
     1999-08-02  0.07441812 0.18922829    0.0000000           0          0.02697299      -0.107155063
     1999-09-01 -0.36952701 0.08684107    0.1117509           0          0.24520976       0.000000000
     1999-10-01  0.00000000 0.00000000    0.0000000           0          0.00000000       1.941266205
     1999-11-01  0.41879925 0.00000000    0.0000000           0          0.00000000      -0.197897901

    tail(df2) :
                 MSCI.ACWI    DJGlbl  Russell.1000 Russell.Dev S.P.GSCI.Industrial S.P.GSCI.Precious
     2011-07-01  0.00000000 0.0000000    0.0000000   0.0000000          0.00000000        -0.1141162
     2011-08-01  0.00000000 0.0000000    0.0000000   0.0000000          0.02627347         0.0000000
     2011-09-01 -0.02470873 0.2977585   -0.0911891   0.6367605          0.00000000         0.2830977
     2011-10-03  0.42495188 0.0000000    0.4200743  -0.4420027         -0.41012646         0.0000000
     2011-11-01  0.00000000 0.0000000    0.0000000  -0.6597739          0.00000000         0.0000000
     2011-12-01  0.50273034 0.0000000    0.0000000   0.6476393          0.00000000         0.0000000 
```

The first df cointains daily observations. The second df contains **only** the "first day of each month" forecasted values. I would like to substitute the values from the second df into the first one. In other words, the "first day of each month" values in the first df will be substituted for the "first day of each month" values from the second df. I tried to write an lapply loop that substitutes the values and was only trying to use match function. But I failed. I could not find the similar question at StackOverflow either...

Greatful for any suggestions!

P.S.

The thing is that the above df's are time series. Namely I convert the df's to time series :

```
library(fPortfolio)
charvec=dfnottimeseries[,1]
df1=as.timeSeries(dfnottimeseries,charvec) 
```

and the same for the second df (df2). For example:

```
dput(head(df1)) :
new("timeSeries"
    , .Data = structure(c(-0.700000000000003, -0.503524672708963, -0.202429149797574, 
0.709939148073025, 2.41691842900303, 0.393313667649942, 0.200000000000003, 
0.0998003992015911, 0.299102691924224, 0.298210735586492, 0.891972249752221, 
0.392927308447943, -0.0999999999999943, -0.700700700700703, 0, 
1.51209677419355, 2.18470705064548, 0.583090379008741, -1.5, 
-0.203045685279191, -0.610376398779241, -0.102354145342895, 2.76639344262295, 
-0.0997008973080701, -1, 0.40404040404041, 0.100603621730377, 
0.50251256281407, -1.2, -0.202429149797574, -0.400000000000006, 
-0.301204819277106, -0.100704934541787, 0.403225806451604, 0, 
1.10441767068274, 0.0999999999999943, 1.59840159840161, 2.94985250737463, 
3.15186246418338, 0.55555555555555, 2.30202578268877, -0.0999999999999943, 
0.800800800800798, 0.496524329692155, 0.691699604743086, 0.196270853778203, 
0.685602350636634, -0.0999999999999943, 0, -0.100100100100109, 
-0.100200400801598, 0.100300902708119, 0.300601202404807, -0.799999999999997, 
0, -0.302419354838707, 0, 0.707785642062678, -0.200803212851394, 
-0.200000000000003, -0.200400801603209, -0.100401606425697, -0.201005025125631, 
0.201409869083588, 0.100502512562808, -0.200000000000003, -0.200400801603209, 
-0.100401606425697, -0.201005025125631, 0.201409869083588, 0.100502512562808, 
0, -0.299999999999997, -1.00300902708124, -0.303951367781152, 
0.711382113821127, 0.40363269424824, -0.00938085999999316, 0.00938174008789637, 
-0.196998120000003, -0.0751950428206875, 0.0470322689501711, 
0.047010148983195, -0.00938085999999316, 0.00938174008789637, 
-0.196998120000003, -0.0751950428206875, 0.0470322689501711, 
0.047010148983195), .Dim = c(6L, 15L), .Dimnames = list(c("1999-03-01", 
"1999-03-02", "1999-03-03", "1999-03-04", "1999-03-05", "1999-03-08"
), c("MSCI ACWI", "DJGlbl", "Russell 1000", "Russell Dev", "S&P GSCI Industrial ", 
"S&P GSCI Precious", "S&P GSCI Energy", "UBS Bloomberg", "iBoxx $ Liquid", 
"IBOXX ??? LQD", "iBoxx $ Liquid High Yield", "Markit IBOXX", 
"DBIQ Emerging", "Barclays US", "iBoxx Sov Euro IL")))
    , units = c("MSCI ACWI", "DJGlbl", "Russell 1000", "Russell Dev", "S&P GSCI Industrial ", 
"S&P GSCI Precious", "S&P GSCI Energy", "UBS Bloomberg", "iBoxx $ Liquid", 
"IBOXX ??? LQD", "iBoxx $ Liquid High Yield", "Markit IBOXX", 
"DBIQ Emerging", "Barclays US", "iBoxx Sov Euro IL")
    , positions = c(920246400, 920332800, 920419200, 920505600, 920592000, 920851200
)
    , format = "%Y-%m-%d"
    , FinCenter = "GMT"
    , recordIDs = structure(list(), .Names = character(0), row.names = integer(0), class = "data.frame")
    , title = "Time Series Object"
    , documentation = "Sun Oct 21 16:13:25 2012"
) 
```

and

```
dput(head(df2))
new("timeSeries"
    , .Data = structure(c(0, 0.126304409, 0.074418121, -0.369527006, 0, 0.41879925, 
0.244385197, 0.067556211, 0.189228292, 0.086841066, 0, 0, 0, 
0, 0, 0.111750885, 0, 0, 0, 0, 0, 0, 0, 0, -0.88465521, 0.293946971, 
0.026972992, 0.245209764, 0, 0, 0.008522842, 0, -0.107155063, 
0, 1.941266205, -0.197897901, -0.013096887, 0, 0, 0.388013092, 
0.372488895, 0, -0.19041112, 0.136631233, 0, 0.183846748, 0.197612269, 
0, -0.002248848, 0.274449827, -0.143453619, -0.128428882, 0, 
0.144213551, -0.044105244, 0, -0.137138837, -0.074970085, 0, 
0, -0.128433675, 0.141883192, -0.052900591, -0.062071483, 0.062037765, 
0, -0.128433675, 0.141883192, -0.052900591, -0.062071483, 0.062037765, 
0, -0.133904169, 0.360826639, -0.040831396, -0.060762388, 0, 
0.129691732, 0.050392981, 0.020081642, 0.01978185, 0.030688482, 
0, 0.012962734, 0.050392981, 0.020081642, 0.01978185, 0.030688482, 
0, 0.012962734), .Dim = c(6L, 15L), .Dimnames = list(NULL, c("MSCI ACWI", 
"DJGlbl", "Russell 1000", "Russell Dev", "S&P GSCI Industrial ", 
"S&P GSCI Precious", "S&P GSCI Energy", "UBS Bloomberg", "iBoxx $ Liquid", 
"IBOXX ??? LQD", "iBoxx $ Liquid High Yield", "Markit IBOXX", 
"DBIQ Emerging", "Barclays US", "iBoxx Sov Euro IL")))
    , units = c("MSCI ACWI", "DJGlbl", "Russell 1000", "Russell Dev", "S&P GSCI Industrial ", 
"S&P GSCI Precious", "S&P GSCI Energy", "UBS Bloomberg", "iBoxx $ Liquid", 
"IBOXX ??? LQD", "iBoxx $ Liquid High Yield", "Markit IBOXX", 
"DBIQ Emerging", "Barclays US", "iBoxx Sov Euro IL")
    , positions = c(928195200, 930787200, 933552000, 936144000, 938736000, 941414400
)
    , format = "%Y-%m-%d"
    , FinCenter = "GMT"
    , recordIDs = structure(list(), .Names = character(0), row.names = integer(0), class = "data.frame")
    , title = "Time Series Object"
    , documentation = "Sun Oct 21 19:10:08 2012"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:55:37.343

我认为这应该适用于您的 timeSeries：

```
df1[rownames(df2), ] <- df2 
```

这假设`df2`时间戳是`df1`. 如果不是这种情况，请使用交集：

```
replace.months <- intersect(rownames(df1), rownames(df2))
df1[replace.months, ] <- df2[replace.months, ] 
```

# iphone - Print out the error message from [error description]

> ID：12999501
> 
> 赞同：1
> 
> 时间：2012-10-21T15:59:17.000
> 
> 标签：iphone, objective-c, ios

NSError *error ...

This is the result of `[error description]`:

![enter image description here](../Images/4f5fc0c2492264b27f7628120bb978b3.png)

I want to have just this message : `Another user is Already linked to this facebook id.` Is there any way?

`[error localizeddescription]` is also print something else.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:01:16.360

Try this:

```
NSString *description = [[error userInfo] objectForKey:@"error"]; 
```

# javascript - Export pie chart form html to excel file

> ID：12999502
> 
> 赞同：-1
> 
> 时间：2012-10-21T15:59:24.143
> 
> 标签：javascript, export, pie-chart

I want to export pie chart from html to excel file by javascript. But i can't find a library do it. Please, see me how can do it ?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:16:10.200

I googled it and found another [stackoverflow thread](https://stackoverflow.com/questions/2742422/generate-office-open-xml-excel-file-from-javascript) about this exact problem. Obviously it seems possible that you actually may create an excel file from javascript. This is probably much harder then just creating it from the backend. But anyways, if you want to try and and do it here is the link to github-page by Ed Spencer: [https://github.com/edspencer/Ext.ux.Exporter](https://github.com/edspencer/Ext.ux.Exporter)

# python - Python脚本显示不同的pythonpath

> ID：12999507
> 
> 赞同：3
> 
> 时间：2012-10-21T15:59:55.540
> 
> 标签：python, path, wxpython, pythonpath

尝试运行[runnake](http://www.vrplumber.com/programming/runsnakerun/)会给

```
ImportError: No module named wx 
```

打开 ipython 或 python 会话似乎工作正常：

```
>>> import wx
>>> import sys
>>> print [p for p in sys.path if 'wx' in p]    
['/usr/local/lib/wxPython-2.9.4.0/lib/python2.7/site-packages', '/usr/local/lib/wxPython-2.9.4.0/lib/python2.7/site-packages/wx-2.9.4-osx_cocoa', '/usr/local/lib/wxPython-2.9.4.0/lib/python2.7/site-packages/wx-2.9.1-osx_cocoa/tools'] 
```

将该代码放入脚本中并调用`python script.py`. 但是将该代码放在开头会`runsnake.py`打印一个空列表（打印整个`sys.path`打印路径与我的 $PYTHONPATH 完全不同）。

为什么会有所不同，以及如何让它识别 wxPython？

编辑：`pip freeze`输出包含

```
SquareMap==1.0.1
RunSnakeRun==2.0.2b1
wxPython==2.9.4.0
wxPython-common==2.9.4.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:17:36.310

*   你`runsnake.py`和python解释器在同一个运行`virtualenv`吗？如果没有，您将不会拥有相同的软件包。
*   如果您`runsnake.py`在使用 构建的虚拟环境中运行`--no-site-packages`，您将无法访问系统范围的包。运行`pip freeze`会告诉您是否可以访问`wxPython`. 如果你不这样做，那就是问题所在。您可以正确创建一个新的`virtualenv`。
*   你是在运行`virtualenv`命令之前还是之后安装了 wxPython？
*   检查shebang，看它是否运行相同的python`#!/usr/bin/python`或`#!/usr/bin/env python`
*   您也可以尝试强制使用哪个解释器`python runsnake.py`

对于 OSX 上的 Python 框架构建，[请参阅此问题](https://stackoverflow.com/questions/1444543/differences-between-framework-and-non-framework-builds-of-python-on-mac-os-x)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T23:50:14.780

尝试在 virtualenv 之外运行 runnake。

在此处查看详细原因： [http ://wiki.wxpython.org/wxPythonVirtualenvOnMac](http://wiki.wxpython.org/wxPythonVirtualenvOnMac)

# ios - UICollectionView : 动画自定义布局

> ID：12999510
> 
> 赞同：6
> 
> 时间：2012-10-21T16:00:20.197
> 
> 标签：ios, animation, layout, uicollectionview

我在 UICollectionView 中显示了很多图像单元格。通过一个按钮，我希望能够将我的所有单元格分组到第一个单元格上。

这运行良好，但是当我尝试向我的重组动作添加动画过渡时，什么也没有发生。

这是我在自定义布局中使用的方法：

```
- (NSArray*)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray* allAttributesInRect = [super layoutAttributesForElementsInRect:rect];

    if([allAttributesInRect count] > 0 && _isRegroup)
    {
        UICollectionViewLayoutAttributes *firstAttribute = [allAttributesInRect objectAtIndex:0];
        CGRect frame = firstAttribute.frame;

        for(UICollectionViewLayoutAttributes *attribute in allAttributesInRect)
            [UIView animateWithDuration:0.3f animations:^{attribute.frame = frame;}];
    }
    return allAttributesInRect;
}

- (void)regroupCells:(BOOL)isRegroup // This method is called from my collection controller when my button is pressed
{
    _isRegroup = isRegroup;
    [self invalidateLayout];
} 
```

任何的想法 ？谢谢 ！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-21T16:12:20.413

动画在您调用它们的方法中不起作用。

要更改布局和动画到一个新的，最简单的方法是调用`performBatchUpdates`你的集合视图，`nil`每个块参数。这会使您的布局无效并为您设置新布局。

在执行此操作之前，您将告诉布局对象您希望新布局发生。此外，在内部`layoutAttributesForElementsInRect`，只需检查您的布尔变量并将分组帧（可能中心会更好）应用到您现在所做的所有属性，但没有动画。您还需要在`layoutAttributesForElementAtIndexPath`.

所以，总结一下：

1.  从它所在的位置删除您的无效布局调用
2.  从所在位置移除动画调用，只需修改布局属性
3.  也添加 ..forElementAtIndexPath 代码
4.  在您的视图控制器中，调用布局对象的重组方法，然后调用集合视图的 performBatchupdates。

# macos - Sniff HTTP packets using NKE

> ID：12999511
> 
> 赞同：2
> 
> 时间：2012-10-21T16:00:24.593
> 
> 标签：macos, network-programming, packet-sniffers, kernel-extension

I'm trying to read http requests and responses by making a KEXT using NKE. I registered a socket filter, whenever I'm getting data I'm printing mbuf using a code like this:

```
unsigned char *dataString = mbuf_data(*data);
for (size_t i = 0; i < mbuf_len(*data); i++)
{
    printf("%c", dataString[i]);
}
printf("\n-------------\n"); 
```

I can read http requests and some responses data from logs but can't see any **HTML** content. I was wondering if I'm not correctly reading mbuf or is it some other problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:39:42.057

`mbuf`s 实际上是内存缓冲区的链接列表，因此如果您只检查列表的头部，这可能就是您看不到所有数据的原因。你想做这样的事情：

```
for (mbuf_t mb = *data; mb; mb = mbuf_next(mb))
{
  unsigned char* dataString = mbuf_data(mb);
  size_t len = mbuf_len(mb);
  for (size_t i = 0; i < len; i++)
  {
    printf("%c", dataString[i]);
  }
}
printf("\n-------------\n"); 
```

# c# - What control (if any) can be used to loop a .gif in xaml?

> ID：12999521
> 
> 赞同：0
> 
> 时间：2012-10-21T16:01:35.903
> 
> 标签：c#, windows, xaml, windows-8, microsoft-metro

I'm creating a Win 8 app in which I need to display loops of gifs to the user. The interesting thing is, I'm using this same datatemplate to display all sorts of image types, including png and jpg.

Is there a control that would do this? If not, what is the recommended way to go about achieving this functionality?

Thanks for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:22:37.657

在动画 gif 中查看动画的一种方法是在 WebView 元素中呈现 gif。

将 gif 添加到项目并标记为内容。然后将WebView的源设置为gif

```
<Grid >
  <WebView Source='ms-appx-web:///Assets/spiral.gif'>
 </WebView>

</Grid> 
```

注意：Webview 通过 IE 10 呈现内容，它不像其他元素那样具有交互性。有关更多详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx)。

**编辑**：

这是绑定到集合的一种方法。

```
class GifCollection : ObservableCollection<Uri> {
}

// in the view
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    var gifs = new GifCollection();

    gifs.Add(new Uri("http://i.imgur.com/eoNiq.gif"));
    gifs.Add(new Uri("ms-appx-web:///Assets/spiral.gif"));

    this.DataContext = gifs;

} 
```

以及 XAML 中的数据模板

```
<ListBox ItemsSource='{Binding}'>
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel>

             <!-- set the width, height, otherwise the WebView 
                  is not visible in the datatemplate -->
            <WebView Source='{Binding }'
                     Width='450'
                     Height='450'>

            </WebView>
          </StackPanel>

        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox> 
```

# matlab - 3d matrix by column vector multiplication

> ID：12999524
> 
> 赞同：5
> 
> 时间：2012-10-21T16:01:52.223
> 
> 标签：matlab, multiplication

I have a 3d (or in general n-dimensional) matrix `A` with dimensions

```
size(A) = [d1 d2 d3 ... dn]. 
```

Now I want to do a vector multiplication with a column vector `v` over one of the dimensions (as I would do in 2 dimensions, where I get a vector returned - for instance for `d1 = 2`, `d3 = 4` and `size(v) = d2`), so that

```
(A*d)_i = sum(a_ij*v_j). 
```

Hence I want to reduce by one dimension.

Is there a Matlab function(other than looping) that returns for a `d3`-dimensional column vector v

```
(A*v)_ij = sum(A_ijk*v_k). 
```

I hope this was clear.

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:50:53.743

你可以做得更顺畅一些。对于矩阵`reshape`只需要 1 个参数，如果没有指定，另一个参数会自动计算出来，这在这种情况下非常有用。

因此，Oli 提出的解决方案可以更简单地写为

```
A = rand(2,3,4);
v = rand(4,1);

A2 = reshape(A, [], numel(v));      % flatten first two dimensions
B2 = A2*v;
B  = reshape(B2, size(A, 1), []); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T16:11:16.283

你可以用几个`reshape`'s 做到这一点：

```
A=rand(2,3,4);
v=rand(1,4);
reshape(reshape(A,[size(A,1)*size(A,2),size(A,3)])*v,[size(A,1) size(A,2)]) 
```

基本上，您将 A 重塑为 2D 矩阵 A2((ij),(k))=A((i),(j),(k))：

```
A2=reshape(A,[size(A,1)*size(A,2),size(A,3)]) 
```

然后你做通常的乘法：

对于所有 (ij) B2((ij))=sum_k A2((ij),(k))*v((k))：

```
B2=A2*v 
```

你重塑回来：

B((i),(j))=B((ij))

```
B=reshape(B2,[size(A,1) size(A,2)]) 
```

我希望这很清楚

# elisp - 是否有将字符串连接成分隔字符串的函数？

> ID：12999530
> 
> 赞同：32
> 
> 时间：2012-10-21T16:02:27.573
> 
> 标签：elisp

Emacs Lisp 中是否有与 相反的功能，即将`split-string`列表的元素连接到由给定分隔符分隔的字符串中？换句话说，是否有一个函数给定一个列表，例如`("foo" "bar" "baz")`，和一个定界符，例如`", "`，返回该列表作为由该定界符定界的字符串，例如`"foo, bar, baz"`。

[Common Lisp 似乎有这样的功能](https://stackoverflow.com/questions/8830888/whats-the-canonical-way-to-join-strings-in-a-list)，但在 Emacs Lisp 中同名的功能[`format`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Formatting-Strings.html)，是一个完全不同的功能。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-21T16:37:17.593

我认为您正在寻找[mapconcat](http://www.gnu.org/software/emacs/manual/html_node/elisp/Mapping-Functions.html)：

> `mapconcat`将函数应用于序列的每个元素：将结果（必须是字符串）连接起来。在每对结果字符串之间，`mapconcat`插入字符串分隔符。通常分隔符包含空格或逗号或其他合适的标点符号。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-11-16T13:29:08.237

自 24.4 以来， Emacs 已`string-join`成为`subr-x.el`：

```
(eval-when-compile (require 'subr-x))
(string-join '("one" "two" "three") ", ") ; ==> "one, two, three" 
```

`subr-x.el`还包含其他有用的（字符串操作）函数 - 来自 24.4 发行说明：

```
New library subr-x.el for misc helper functions

hash-table-keys
hash-table-values
string-blank-p
string-empty-p
string-join
string-reverse
string-trim-left
string-trim-right
string-trim
string-remove-prefix
string-remove-suffix 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-04-22T10:50:47.273

如果你在 Elisp 中大量使用字符串操作，我建议你安装一个库[`s.el`](https://github.com/magnars/s.el)，它有一个庞大且一致的字符串 API。对于您的任务，它具有以下功能[`s-join`](https://github.com/magnars/s.el#s-join-separator-strings)：

```
(s-join "+" '("abc" "def" "ghi")) ;; => "abc+def+ghi"
(s-join "\n" '("abc" "def" "ghi")) ;; => "abc\ndef\nghi" 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-03-30T18:00:28.370

根据您所做的工作，可能会有更好的功能，例如，如果您正在构建命令行参数，请使用`combine-and-quote-strings`which 为您工作。

```
(combine-and-quote-strings '("foo" "bar" "baz") ", ")
"foo, bar, baz" 
```

# android - 使用切换活动来启动一个活动或另一个 -> 后退按钮

> ID：12999536
> 
> 赞同：0
> 
> 时间：2012-10-21T16:03:14.253
> 
> 标签：android

根据某些设置，我决定开始哪个活动。这个决定是在某种切换活动中完成的，其唯一的任务是启动相应的活动（它也没有在 android 清单中定义的 UI）。

这个结构工作得很好，但是当我点击后退按钮时，应用程序不再响应，因为它试图打开 switch 活动但它没有 ui。当我将开关活动返回其 ui 时，我可以关闭应用程序，但我总是看到空的开关活动，这有点难看；-)

当在 switch 活动的一个继任者中点击返回但没有成功时，我还尝试终止该应用程序。

任何帮助都会很棒。

再见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:16:44.710

As soon as you launch the next activity , call `finish` and remove the Ui less activity

# c - 从 PCap 文件中读取并在 c 中打印出 IP 地址和端口号，但我的结果似乎错误

> ID：12999538
> 
> 赞同：4
> 
> 时间：2012-10-21T16:03:25.060
> 
> 标签：c, pcap

我正在读取一个 pcap 文件，我想打印出每个数据包的 IP 地址和端口号。我正在使用来自[http://www.tcpdump.org/pcap.htm](http://www.tcpdump.org/pcap.htm)和[http://www.rhyous.com/2011/11/13/how-to-read-a-pcap-file-from-wireshark的代码-with-c/](http://www.rhyous.com/2011/11/13/how-to-read-a-pcap-file-from-wireshark-with-c/)。

这是我的代码：

```
#define SIZE_ETHERNET 14
#define ETHER_ADDR_LEN  6

/* Ethernet header */
    struct sniff_ethernet {
        u_char ether_dhost[ETHER_ADDR_LEN]; /* Destination host address */
        u_char ether_shost[ETHER_ADDR_LEN]; /* Source host address */
        u_short ether_type; /* IP? ARP? RARP? etc */
    };

    /* IP header */
    struct sniff_ip {
        u_char ip_vhl;      /* version << 4 | header length >> 2 */
        u_char ip_tos;      /* type of service */
        u_short ip_len;     /* total length */
        u_short ip_id;      /* identification */
        u_short ip_off;     /* fragment offset field */
    #define IP_RF 0x8000        /* reserved fragment flag */
    #define IP_DF 0x4000        /* dont fragment flag */
    #define IP_MF 0x2000        /* more fragments flag */
    #define IP_OFFMASK 0x1fff   /* mask for fragmenting bits */
        u_char ip_ttl;      /* time to live */
        u_char ip_p;        /* protocol */
        u_short ip_sum;     /* checksum */
        struct in_addr ip_src;
        struct in_addr ip_dst; /* source and dest address */
    };
    #define IP_HL(ip)       (((ip)->ip_vhl) & 0x0f)
    #define IP_V(ip)        (((ip)->ip_vhl) >> 4)

    /* TCP header */
    struct sniff_tcp {
        u_short th_sport;   /* source port */
        u_short th_dport;   /* destination port */
        u_int32_t th_seq;       /* sequence number */
        u_int32_t th_ack;       /* acknowledgement number */

        u_char th_offx2;    /* data offset, rsvd */
    #define TH_OFF(th)  (((th)->th_offx2 & 0xf0) >> 4)
        u_char th_flags;
    #define TH_FIN 0x01
    #define TH_SYN 0x02
    #define TH_RST 0x04
    #define TH_PUSH 0x08
    #define TH_ACK 0x10
    #define TH_URG 0x20
    #define TH_ECE 0x40
    #define TH_CWR 0x80
    #define TH_FLAGS (TH_FIN|TH_SYN|TH_RST|TH_ACK|TH_URG|TH_ECE|TH_CWR)
        u_short th_win;     /* window */
        u_short th_sum;     /* checksum */
        u_short th_urp;     /* urgent pointer */
};

int main(int argc, char *argv[])
{

    //get file
     char *filename = argv[1];

     //error buffer
     char errbuff[PCAP_ERRBUF_SIZE];

     //open file and create pcap handler
     pcap_t * handler = pcap_open_offline(filename, errbuff);

     //The header that pcap gives us
    struct pcap_pkthdr *header;

    //The actual packet 
    const u_char *packet;   

      int packetCount = 0;
      int i;

      //write to file 
      FILE *fp = fopen ( "result.txt", "w" ) ;

      //tcp info
    const struct sniff_ethernet *ethernet; /* The ethernet header */
    const struct sniff_ip *ip; /* The IP header */
    const struct sniff_tcp *tcp; /* The TCP header */
    u_int size_ip;
    u_int size_tcp;

    while (pcap_next_ex(handler, &header, &packet) >= 0)
    {
        // Show the packet number
        printf("Packet # %i\n", ++packetCount);
        fprintf(fp,"Packet # %i\n", packetCount);

        // Show the size in bytes of the packet
        printf("Packet size: %d bytes\n", header->len);
        fprintf(fp,"Packet size: %d bytes\n", header->len);

        // Show a warning if the length captured is different
        if (header->len != header->caplen)
            printf("Warning! Capture size different than packet size: %ld bytes\n", header->len);

        // Show Epoch Time
        printf("Epoch Time: %d:%d seconds\n", header->ts.tv_sec, header->ts.tv_usec);
        fprintf(fp,"Epoch Time: %d:%d seconds\n", header->ts.tv_sec, header->ts.tv_usec);

        ethernet = (struct sniff_ethernet*)(packet);
        ip = (struct sniff_ip*)(packet + SIZE_ETHERNET);
        size_ip = IP_HL(ip)*4;
        if (size_ip < 20) {
            printf("   * Invalid IP header length: %u bytes\n", size_ip);
            return;
        }
        tcp = (struct sniff_tcp*)(packet + SIZE_ETHERNET + size_ip);

        printf("src port: %d dest port: %d \n", tcp->th_sport, tcp->th_dport);
        fprintf(fp,"src port: %d dest port: %d \n", tcp->th_sport, tcp->th_dport);

        printf("src address: %s dest address: %s \n",  inet_ntoa(ip->ip_src),  inet_ntoa(ip->ip_dst));
        fprintf(fp,"src address: %s dest address: %s \n",  inet_ntoa(ip->ip_src),  inet_ntoa(ip->ip_dst));

        printf("seq number: %u ack number: %u \n", (unsigned int)tcp-> th_seq, (unsigned int)tcp->th_ack);
        fprintf(fp,"seq number: %u ack number: %u \n", (unsigned int)tcp-> th_seq, (unsigned int)tcp->th_ack);

        // Add two lines between packets
        printf("\n");
        fprintf(fp,"\n");
    }
    fclose (fp);
     return(0);
} 
```

这是我的结果的一部分：

```
Packet # 1
Packet size: 74 bytes
Epoch Time: 1348895319:643493 seconds
src port: 20480 dest port: 15578
src address: 128.8.126.92 dest address: 128.8.126.92
seq number: 3071009507 ack number: 2490081174

Packet # 2
Packet size: 66 bytes
Epoch Time: 1348895319:643566 seconds
src port: 15578 dest port: 20480
src address: 192.168.5.162 dest address: 192.168.5.162
seq number: 2490081174 ack number: 3087786723

Packet # 3
Packet size: 207 bytes
Epoch Time: 1348895319:643720 seconds
src port: 15578 dest port: 20480
src address: 192.168.5.162 dest address: 192.168.5.162
seq number: 2490081174 ack number: 3087786723

Packet # 4
Packet size: 66 bytes
Epoch Time: 1348895320:127547 seconds
src port: 20480 dest port: 15578
src address: 128.8.126.92 dest address: 128.8.126.92
seq number: 3087786723 ack number: 560766870

Packet # 5
Packet size: 1514 bytes
Epoch Time: 1348895320:129417 seconds
src port: 20480 dest port: 15578
src address: 128.8.126.92 dest address: 128.8.126.92
seq number: 3087786723 ack number: 560766870 
```

即使我使用了 src 和 dst ip 地址，ip 地址也是相同的。seq number 和 ack number 似乎太大了。任何人都可以看到导致我的问题的原因以及如何解决它。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T16:14:12.987

1.  你确定你的转储里只有IP数据包吗？
2.  这些值按网络字节顺序排列。您需要使用`ntohl`并`ntohs`转换它们。
3.  `inet_ntoa`to 使用静态缓冲区，因此后续调用会覆盖该值（因此匹配的源地址和目标地址）。

# asp.net-mvc - 在模型验证开始之前在模型上设置审计值

> ID：12999540
> 
> 赞同：1
> 
> 时间：2012-10-21T16:03:42.860
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model-validation

我已经定义了一个具有一些属性的基类，例如：

```
public string CreatedByName { get; set; }
public DateTime CreatedOn { get; set; }

public string UpdatedByName { get; set; }
public DateTime UpdatedOn { get; set; } 
```

如果我在我的控制器中创建一个继承自这个基类的模型对象，如下所示：

```
[HttpPost]
public ActionResult Create(Person person)
{
    if (ModelState.IsValid)
    {
        person.Id = Guid.NewGuid();

        //audit information
        person.UpdatedByName = User.Identity.Name;
        person.UpdatedOn = DateTime.Now;
        person.CreatedByName = User.Identity.Name;
        person.CreatedOn = DateTime.Now;            

        UoW.Persons.Add(person);
        UoW.Commit();
        return RedirectToAction("Index");
    }
    return View(person);
} 
```

它永远不会像`ModelState.IsValid`往常一样返回`false`，因为在此阶段尚未设置审计属性。

有没有办法在某个常见的地方设置这种值（我试图编写帮助类，但如何获得`User`？）并且在模型验证开始之前？

或者唯一的选择是使审计属性为 nullabe [不需要]？

**编辑：-**

尝试[了@archil](https://stackoverflow.com/a/12999622/13198#13198)的建议：

哈哈哈............在`Get`行动中做到这一点

```
public ActionResult Create()
{
    var person=new Person();
    person.UpdatedByName = User.Identity.Name;
    person.UpdatedOn = DateTime.Now;
    person.CreatedByName = User.Identity.Name;
    person.CreatedOn = DateTime.Now;

    return View(person); 
```

~~仍然得到：~~

~~*   CreatedOn 字段是必需的。~~
*   ~~UpdatedOn 字段是必需的。~~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:13:40.203

这就是为什么您应该在控制器操作中使用 ViewModel，而不是域模型。Viewmodel 将仅包含创建人员所需的属性，您可以稍后在已验证的模型上设置审核和所有其他值。

```
[HttpPost]
public ActionResult Create(CreatePersonViewModel createPerson)
{
    if (ModelState.IsValid)
    {
        Peron person = MapViewModel(createPerson);

        //audit information
        person.UpdatedByName = User.Identity.Name;
        person.UpdatedOn = DateTime.Now;
        person.CreatedByName = User.Identity.Name;
        person.CreatedOn = DateTime.Now;            

        UoW.Persons.Add(person);
        UoW.Commit();
        return RedirectToAction("Index");
    }
    return View(createPerson);
} 
```

对于映射，您可以使用广泛使用的[AutoMapper](http://automapper.org/)或类似的

**更新**

您可以使用[Controller.UpdateModel](http://msdn.microsoft.com/en-us/library/dd470933%28v=vs.98%29.aspx)或[Controller.TryUpdateModel](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.tryupdatemodel%28v=vs.108%29.aspx)手动调用模型绑定和验证

像这样的东西

```
[HttpPost]
public ActionResult Create()
{
    Person person = new Person();
    person.UpdatedByName = User.Identity.Name;
    person.UpdatedOn = DateTime.Now;
    person.CreatedByName = User.Identity.Name;
    person.CreatedOn = DateTime.Now;    

    if (TryUpdateModel(person))
    {
        UoW.Persons.Add(person);
        UoW.Commit();
        return RedirectToAction("Index");
    }
    return View(person );
} 
```

# bash - 将主机名添加到 ssh 别名

> ID：12999544
> 
> 赞同：0
> 
> 时间：2012-10-21T16:04:16.317
> 
> 标签：bash, alias, hostname

我在我的 bashrc 中设置了一个别名，这样我就可以在家中访问工作中的集群。但是，要在其上运行程序，我想登录到我的工作计算机。如何添加该主机名以便使用一个别名？

我尝试通过 alias WORK="ssh user@work; user@hostname" 扩展别名，但我仍然只能访问我的文件并且无法运行任何东西。如果我在登录后再次运行第二部分，它就会起作用。如果在我尝试添加另一个密钥时有所不同，那么两者的 home 是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:22:19.350

`ssh -A -t user@work ssh -A user@hostname`

该`-A`选项启用代理转发。`-t`选项是强制分配一个伪 tty 。通常，当您的 ssh 命令指定要在目标主机上运行的命令时，不会分配伪 tty。如果您希望命令运行然后退出，则不需要使用该`-t`选项，但如果您需要交互式 shell 会话，则需要一个伪 tty。

# java - 如何使用标题链表按降序添加项目

> ID：12999545
> 
> 赞同：0
> 
> 时间：2012-10-21T16:04:22.003
> 
> 标签：java, linked-list, priority-queue, comparator

如果我有一个应该按降序创建的标题链表，我如何使用比较器通过比较当前节点和新节点来添加？

我会使用 priorityComparator.compare(e, temp.next.value) 吗？

```
public boolean add (E e) {
  //front always points to the header.
  final ListNode<E> front = highest;
  ListNode<E> temp = front;

  ListNode<E> newNode = new ListNode<E>(e, null);

  //Insert to front if header points to null.
  if (temp.next == null){
      temp.next = newNode;
  }
  //how to add in sorted order?

return true;
} 
```

# c - 如何在内核空间中使用 netfilter 钩子路由拆分的数据包

> ID：12999548
> 
> 赞同：3
> 
> 时间：2012-10-21T16:05:09.880
> 
> 标签：c, linux, linux-kernel

我必须在 PRE_ROUTING 挂钩中将大数据包拆分为较小的数据包。我已经完成了将数据包拆分成更小的数据包、创建 skb、设置 ip 和 udp 标头等的必要步骤。但我不明白的是如何路由数据包？我现在可以在数据包中附加数据（可以在我之前的问题中看到：[如何从内核空间在数据包上附加数据？](https://stackoverflow.com/questions/12529497/how-to-append-data-on-a-packet-from-kernel-space)）。但是现在我被路由拆分的数据包所困扰。提前致谢。

我在下面给出我的代码（到目前为止我可以写）。让我们想象模块在服务器机器上运行。服务器在端口 6000 上运行。然后客户端发送一条消息“ThisIsUsedForTesting”。根据代码，服务器应该得到“ThisI”：一个较小的数据包。我现在不关心第二个数据包。我可以轻松地破坏数据包大小。但是现在可以有两个或更多的数据包。

运行此模块后，服务器会收到消息：“ThisI”。但是当回显它时，数据包不会开箱即用。我为 PRE_ROUTING 编写模块，然后机器应该马上 oops，但服务器进程收到消息，然后机器 oops。我不明白这些情况。欢迎任何帮助/建议。如果我可以管理第一个拆分的数据包，我认为其余的可以自动处理，因此这里不给出它们的代码：

```
 #include <linux/kernel.h>
    #include <linux/module.h>
    #include <linux/skbuff.h>
    #include <linux/netfilter.h>
    #include <linux/netdevice.h>
    #include <linux/ip.h>
    #include <linux/udp.h>
    #include <linux/mm.h>
    #include <linux/err.h>
    #include <linux/crypto.h>
    #include <linux/init.h>
    #include <linux/crypto.h>
    #include <linux/scatterlist.h>
    #include <net/ip.h>
    #include <net/udp.h>
    #include <net/route.h>
    #include <linux/netfilter_ipv4.h>

    #define IP_HDR_LEN 20
    #define UDP_HDR_LEN 8
    #define TOT_HDR_LEN 28

    static unsigned int pkt_split_begin(unsigned int hooknum,
                            struct sk_buff *skb,
                            const struct net_device *in,    
                            const struct net_device *out,
                            int (*okfn)(struct sk_buff *));

    static void skb_print_info(const struct sk_buff *skb);
    static void ip_print_info(struct iphdr *iph);
    static void udp_print_info(struct udphdr *udph);
    static void data_print_info(unsigned char *data, int len);

    static struct nf_hook_ops pkt_split_ops __read_mostly = {
        .pf = NFPROTO_IPV4,
        .priority = 1,
        .hooknum = NF_INET_PRE_ROUTING,
        .hook = pkt_split_begin,
    }; 

static int __init pkt_split_init(void)
{
    printk(KERN_ALERT "\npkt_split module started ...");
    return nf_register_hook(&pkt_split_ops);
}

static void __exit pkt_split_exit(void)
{
    nf_unregister_hook(&pkt_split_ops);
    printk(KERN_ALERT "pkt_split module stopped ...");
}

static unsigned int pkt_split_begin (unsigned int hooknum,
                        struct sk_buff *skb,
                        const struct net_device *in,
                        const struct net_device *out,
                        int (*okfn)(struct sk_buff *))
{
    struct iphdr *iph;
    struct udphdr *udph;
    unsigned char *data;

    unsigned int data_len;

    unsigned int i;

    unsigned char *temp;
    unsigned char *temp1, *temp2;
    unsigned char *ptr;

    __u16 dst_port, src_port;

    if (skb) {
        iph = (struct iphdr *) skb_header_pointer (skb, 0, 0, NULL);

        if (iph && iph->protocol &&(iph->protocol == IPPROTO_UDP)) {
            udph = (struct udphdr *) skb_header_pointer (skb, IP_HDR_LEN, 0, NULL);
            src_port = ntohs (udph->source);
            dst_port = ntohs (udph->dest);

            if (dst_port == 6000) {
                printk(KERN_ALERT "\nUDP packet goes in");
                data = (unsigned char *) skb_header_pointer (skb, IP_HDR_LEN+UDP_HDR_LEN, 0, NULL);
                data_len = skb->len - TOT_HDR_LEN;

                temp = kmalloc(50 * sizeof(char), GFP_ATOMIC);
                memcpy(temp, data, data_len);

                temp1 = kmalloc(50 * sizeof(char), GFP_ATOMIC);
                temp2 = kmalloc(50 * sizeof(char), GFP_ATOMIC);

                unsigned int len1, len2;

                len1 = 5;
                len2 = data_len - len1;

                memcpy(temp1, temp, len1);
                temp1[len1] = '\0';
                printk(KERN_ALERT "temp1: %s", temp1);

                ptr = temp + len1;
                memcpy(temp2, ptr, len2);
                printk(KERN_ALERT "temp2: %s", temp2);

                struct sk_buff *skb1, *skb2;
                struct iphdr *iph1, *iph2;
                struct udphdr *udph1, *udph2;
                unsigned char *data1, *data2;
                int data_len1, data_len2;

                skb1 = skb_copy(skb, GFP_ATOMIC);
                skb2 = skb_copy(skb, GFP_ATOMIC);

                iph1 = (struct iphdr *) skb_header_pointer(skb1, 0, 0, NULL);
                udph1 = (struct udphdr *) skb_header_pointer(skb1, IP_HDR_LEN, 0, NULL);
                data1 = (unsigned char *) skb_header_pointer(skb1, TOT_HDR_LEN, 0, NULL);
                data_len1 = skb1->len - len2 - TOT_HDR_LEN + 1;

                memset(data1, 0, data_len);
                memcpy(data1, temp1, data_len1);
                skb1->len = data_len1 + TOT_HDR_LEN;
                iph1->tot_len = htons(data_len1 + TOT_HDR_LEN);
                udph1->len = htons(data_len1 + UDP_HDR_LEN);
                skb1->tail = skb1->tail - data_len2 + 1;

                /* Calculation of IP header checksum */
                iph1->check = 0;
                ip_send_check (iph1);

                /* Calculation of UDP checksum */
                udph1->check = 0;
                int offset = skb_transport_offset(skb1);
                int len = skb1->len - offset;
                udph1->check = ~csum_tcpudp_magic((iph1->saddr), (iph1->daddr), len, IPPROTO_UDP, 0);

                struct sk_buff *tempskb;

                tempskb = skb_copy(skb, GFP_ATOMIC);

                *tempskb = *skb;
                *skb = *skb1;
                *skb1 = *tempskb;

                (*okfn)(skb);

                skb_print_info(skb1);
                ip_print_info(iph1);
                udp_print_info(udph1);
                data_print_info(data1, data_len1);

                kfree_skb(skb1);

            }
        }
    }
    return NF_DROP;
}

static void skb_print_info (const struct sk_buff *skb)
{
    printk(KERN_ALERT "\nPrinting SKB info: ");

    printk(KERN_ALERT "len: %d", skb->len);
    printk(KERN_ALERT "tail: %d", skb->tail);
    printk(KERN_ALERT "end: %d", skb->end);
    printk(KERN_ALERT "head: %x", skb->head);
    printk(KERN_ALERT "data: %x", skb->data);

    printk(KERN_ALERT "\ntail pointer = %x", skb_tail_pointer(skb));
    printk(KERN_ALERT "end pointer = %x", skb_end_pointer(skb));
    printk(KERN_ALERT "\nheadroom = %d", skb_headroom(skb));
    printk(KERN_ALERT "\ntailroom = %d", skb_tailroom(skb));

}

void ip_print_info (struct iphdr *iph)
{
    printk(KERN_ALERT "\nPrinting IP header info:");

    printk(KERN_ALERT "ihl = %d", iph->ihl);
    printk(KERN_ALERT "version = %d", iph->version);
    printk(KERN_ALERT "tos = %d", iph->tos);
    printk(KERN_ALERT "tot_len = %d", ntohs(iph->tot_len));
    printk(KERN_ALERT "id = %d", ntohs(iph->id));
    printk(KERN_ALERT "frag_off = %d", ntohs(iph->frag_off));
    printk(KERN_ALERT "ttl = %d", iph->ttl);
    printk(KERN_ALERT "protocol = %d", iph->protocol);
    printk(KERN_ALERT "check = %x", ntohs(iph->check));
    printk(KERN_ALERT "saddr = %x", ntohl(iph->saddr));
    printk(KERN_ALERT "daddr = %x", ntohl(iph->daddr));
}

void udp_print_info (struct udphdr *udph)
{
    printk(KERN_ALERT "\nPrinting UDP header info: ");

    printk(KERN_ALERT "source = %d", ntohs(udph->source));
    printk(KERN_ALERT "dest = %d", ntohs(udph->dest));
    printk(KERN_ALERT "len = %d", ntohs(udph->len));
    printk(KERN_ALERT "check = %x", ntohs(udph->check));
}

void data_print_info (unsigned char *data, int len)
{
    printk(KERN_ALERT "\nPrinting data info: ");

    printk(KERN_ALERT "Data: %s", data);
    printk(KERN_ALERT "data_len: %d", len);
}

module_init(pkt_split_init);
module_exit(pkt_split_exit);

MODULE_AUTHOR("Rifat Rahman Ovi: <rifatrahmanovi@gmail.com>");
MODULE_DESCRIPTION("Outward Packet Mangling and Decryption in Kernel Space");
MODULE_LICENSE("GPL"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T14:11:19.030

这次我找到了解决方案。这也是一个与前一个类似的简单案例（http://stackoverflow.com/questions/12529497/how-to-append-data-on-a-packet-from-kernel-space）。我正在展示代码。但有一点我需要解释。

```
okfn 
```

必须被称为

```
okfn(skb); 
```

它会释放 skb 本身。我的问题是关于双重释放 skb。查看以下代码，您将了解完成它需要什么。该代码仅用于测试目的。前 5 个字节（加上一个 '\0'）将用于构建一个新数据包，其余数据用于创建第二个数据包。所以，我们开始吧。为了方便起见，提供了用于打印 skb 信息、ip 标头信息等的必要辅助函数（我用它来了解正在发生的事情）。

```
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/skbuff.h>
#include <linux/netfilter.h>
#include <linux/netdevice.h>
#include <linux/ip.h>
#include <linux/udp.h>
#include <linux/mm.h>
#include <linux/err.h>
#include <linux/crypto.h>
#include <linux/init.h>
#include <linux/crypto.h>
#include <linux/scatterlist.h>
#include <net/ip.h>
#include <net/udp.h>
#include <net/route.h>
#include <linux/netfilter_ipv4.h>

#define IP_HDR_LEN 20
#define UDP_HDR_LEN 8
#define TOT_HDR_LEN 28

static unsigned int pkt_split_begin(unsigned int hooknum,
                        struct sk_buff *skb,
                        const struct net_device *in,
                        const struct net_device *out,
                        int (*okfn)(struct sk_buff *));

static void skb_print_info(const struct sk_buff *skb);
static void ip_print_info(struct iphdr *iph);
static void udp_print_info(struct udphdr *udph);
static void data_print_info(unsigned char *data, int len);

static struct nf_hook_ops pkt_split_ops __read_mostly = {
    .pf = NFPROTO_IPV4,
    .priority = 1,
    .hooknum = NF_INET_PRE_ROUTING,
    .hook = pkt_split_begin,
};

static int __init pkt_split_init(void)
{
    printk(KERN_ALERT "\npkt_split module started ...");
    return nf_register_hook(&pkt_split_ops);
}

static void __exit pkt_split_exit(void)
{
    nf_unregister_hook(&pkt_split_ops);
    printk(KERN_ALERT "pkt_split module stopped ...");
}

static unsigned int pkt_split_begin (unsigned int hooknum,
                        struct sk_buff *skb,
                        const struct net_device *in,
                        const struct net_device *out,
                        int (*okfn)(struct sk_buff *))
{
    struct iphdr *iph;
    struct udphdr *udph;
    unsigned char *data;

    unsigned int data_len;

    unsigned int i;

    unsigned char *temp;
    unsigned char *temp1, *temp2;
    unsigned char *ptr;

    __u16 dst_port, src_port;

    if (skb) {
        iph = (struct iphdr *) skb_header_pointer (skb, 0, 0, NULL);

        if (iph && iph->protocol &&(iph->protocol == IPPROTO_UDP)) {
            udph = (struct udphdr *) skb_header_pointer (skb, IP_HDR_LEN, 0, NULL);
            src_port = ntohs (udph->source);
            dst_port = ntohs (udph->dest);

            if (dst_port == 6000) {
                printk(KERN_ALERT "\nUDP packet goes in");
                data = (unsigned char *) skb_header_pointer (skb, IP_HDR_LEN+UDP_HDR_LEN, 0, NULL);
                data_len = skb->len - TOT_HDR_LEN;

                temp = kmalloc(50 * sizeof(char), GFP_ATOMIC);
                memcpy(temp, data, data_len);

                temp1 = kmalloc(50 * sizeof(char), GFP_ATOMIC);
                temp2 = kmalloc(50 * sizeof(char), GFP_ATOMIC);

                unsigned int len1, len2;

                len1 = 5;
                len2 = data_len - len1;

                memcpy(temp1, temp, len1);
                temp1[len1] = '\0';
                printk(KERN_ALERT "temp1: %s", temp1);

                ptr = temp + len1;
                memcpy(temp2, ptr, len2);
                printk(KERN_ALERT "temp2: %s", temp2);

                struct sk_buff *skb1, *skb2;
                struct iphdr *iph1, *iph2;
                struct udphdr *udph1, *udph2;
                unsigned char *data1, *data2;
                int data_len1, data_len2;

                skb1 = skb_copy(skb, GFP_ATOMIC);
                skb2 = skb_copy(skb, GFP_ATOMIC);

                iph1 = (struct iphdr *) skb_header_pointer(skb1, 0, 0, NULL);
                udph1 = (struct udphdr *) skb_header_pointer(skb1, IP_HDR_LEN, 0, NULL);
                data1 = (unsigned char *) skb_header_pointer(skb1, TOT_HDR_LEN, 0, NULL);
                data_len1 = skb1->len - len2 -TOT_HDR_LEN + 1;

                memset(data1, 0, data_len);
                memcpy(data1, temp1, data_len1);
                skb1->len = data_len1 + TOT_HDR_LEN;
                iph1->tot_len = htons(data_len1 + TOT_HDR_LEN);
                udph1->len = htons(data_len1 + UDP_HDR_LEN);
                skb1->tail = skb1->tail - data_len2 + 1;

                /* Calculation of IP header checksum */
                iph1->check = 0;
                ip_send_check (iph1);

                /* Calculation of UDP checksum */
                udph1->check = 0;
                int offset = skb_transport_offset(skb1);
                int len = skb1->len - offset;
                udph1->check = ~csum_tcpudp_magic((iph1->saddr), (iph1->daddr), len, IPPROTO_UDP, 0);

                /* Dealing with the second packet */
                iph2 = (struct iphdr *) skb_header_pointer(skb2, 0, 0, NULL);
                udph2 = (struct udphdr *) skb_header_pointer(skb2, IP_HDR_LEN, 0, NULL);
                data2 = (unsigned char *) skb_header_pointer(skb2, TOT_HDR_LEN, 0, NULL);
                data_len2 = skb2->len - len1 - TOT_HDR_LEN;

                memset(data2, 0, data_len);
                memcpy(data2, temp2, data_len2);
                skb2->len = data_len2 + TOT_HDR_LEN;
                iph2->tot_len = htons(data_len2 + TOT_HDR_LEN);
                udph2->len = htons(data_len2 + UDP_HDR_LEN);
                skb2->tail = skb2->tail - data_len1;

                /* Calculation of IP header checksum */
                iph2->check = 0;
                ip_send_check (iph2);

                /* Calculation of UDP checksum */
                udph2->check = 0;
                offset = skb_transport_offset(skb1);
                len = skb2->len - offset;
                udph2->check = ~csum_tcpudp_magic((iph2->saddr), (iph2->daddr), len, IPPROTO_UDP, 0);

                okfn(skb1);
                okfn(skb2);
            }
        }
    }
    return NF_DROP;
}

static void skb_print_info (const struct sk_buff *skb)
{
    printk(KERN_ALERT "\nPrinting SKB info: ");

    printk(KERN_ALERT "len: %d", skb->len);
    printk(KERN_ALERT "tail: %d", skb->tail);
    printk(KERN_ALERT "end: %d", skb->end);
    printk(KERN_ALERT "head: %x", skb->head);
    printk(KERN_ALERT "data: %x", skb->data);

    printk(KERN_ALERT "\ntail pointer = %x", skb_tail_pointer(skb));
    printk(KERN_ALERT "end pointer = %x", skb_end_pointer(skb));
    printk(KERN_ALERT "\nheadroom = %d", skb_headroom(skb));
    printk(KERN_ALERT "\ntailroom = %d", skb_tailroom(skb));

}

void ip_print_info (struct iphdr *iph)
{
    printk(KERN_ALERT "\nPrinting IP header info:");

    printk(KERN_ALERT "ihl = %d", iph->ihl);
    printk(KERN_ALERT "version = %d", iph->version);
    printk(KERN_ALERT "tos = %d", iph->tos);
    printk(KERN_ALERT "tot_len = %d", ntohs(iph->tot_len));
    printk(KERN_ALERT "id = %d", ntohs(iph->id));
    printk(KERN_ALERT "frag_off = %d", ntohs(iph->frag_off));
    printk(KERN_ALERT "ttl = %d", iph->ttl);
    printk(KERN_ALERT "protocol = %d", iph->protocol);
    printk(KERN_ALERT "check = %x", ntohs(iph->check));
    printk(KERN_ALERT "saddr = %x", ntohl(iph->saddr));
    printk(KERN_ALERT "daddr = %x", ntohl(iph->daddr));
}

void udp_print_info (struct udphdr *udph)
{
    printk(KERN_ALERT "\nPrinting UDP header info: ");

    printk(KERN_ALERT "source = %d", ntohs(udph->source));
    printk(KERN_ALERT "dest = %d", ntohs(udph->dest));
    printk(KERN_ALERT "len = %d", ntohs(udph->len));
    printk(KERN_ALERT "check = %x", ntohs(udph->check));
}

void data_print_info (unsigned char *data, int len)
{
    printk(KERN_ALERT "\nPrinting data info: ");

    printk(KERN_ALERT "Data: %s", data);
    printk(KERN_ALERT "data_len: %d", len);
}

module_init(pkt_split_init);
module_exit(pkt_split_exit);

MODULE_AUTHOR("Rifat Rahman Ovi: <rifatrahmanovi@gmail.com>");
MODULE_DESCRIPTION("Inward Packet Splitting in kernel space");
MODULE_LICENSE("GPL"); 
```

所以...由于我是内核空间编程的新手，欢迎提出任何改进建议。

# python - 在 Google App Engine 上使用 Mandrill/MailChimp 发送确认电子邮件

> ID：12999558
> 
> 赞同：7
> 
> 时间：2012-10-21T16:05:37.187
> 
> 标签：python, google-app-engine, email, python-2.7, mailchimp

在过去的几天里，我一直在尝试从我的 GAE 应用程序发送确认电子邮件，但我的 GAE 电子邮件配额已达到其限制，虽然我启用了计费，但我的电子邮件配额不会重置，因为我刚刚启用了计费.

我已经研究过使用 Mandrill/MailChimp（通过包装 API）并让他们从我的桌面发送电子邮件。但是，当我在 GAE 应用程序中使用我的代码并在本地开发服务器或在线服务器上运行它时，它们不会发送电子邮件，因为 mailsnake、chimpy 等都需要“请求”python 模块。因此，我下载了该模块并将其正确放置在我的应用程序引擎项目中的位置。

然后我又遇到了一个错误...

```
 File "/home/ahmad/Dropbox/milsal/requests/packages/urllib3/connectionpool.py", line 83, in set_cert
    'CERT_NONE': ssl.CERT_NONE,
AttributeError: 'module' object has no attribute 'CERT_NONE' 
```

然后我意识到请求模块依赖于ssl.py，ssl.py是_ssl的python包装器（应用引擎python（2.7）不支持ac库）。

所以我尝试将 ssl.c 放在那个位置，但它没有用......所以现在我被卡住了......

我在想自己，即使我把 ssl.c 放在 python ssl 包装器模块可以使用它，可能会出现另一个错误，我将永远无法跟上所有依赖项 mailchimp/mandrill python api包装器需要在我的桌面 python 上自动存在的 GAE 版本的 python 上运行。

因此，虽然我可以使用我的 ubuntu python 发送电子邮件，但我无法从 GAE 发送它们。

我的第一个问题是，我想知道是否有人收到了来自 GAE 的 mailchimp/mandrill 电子邮件。

第二个问题是：如果没有其他替代方法可以让我使用 mandrill/mailchimp 从 GAE 发送电子邮件，我该如何在 GAE 项目中安装 python 模块并自动安装它的所有依赖项..？

感谢您提前提供任何帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T05:10:10.367

您可以直接使用[Mandrills REST API 发送消息](http://mandrillapp.com/api/docs/messages.html)。

您可以使用[URL Fetch API](https://developers.google.com/appengine/docs/python/urlfetch/overview)发出 REST 请求并使用[JSON](https://stackoverflow.com/questions/1171584/how-can-i-parse-json-in-google-app-engine)序列化/反序列化有效负载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-09T16:13:26.070

根据@PeterKnego 的回答发布对我有用的代码：

```
from google.appengine.api import urlfetch

def sendMandrillEmail():
    json_mandrill = {
        "key": "YOUR_API_KEY",
        "message": {
            "html": "<p>Example HTML content</p>",
            "subject": "Test subject",
            "from_email": "example@email.com",
            "from_name": "Example Name",
            "to": [
                {
                    "email": "example.to@email.com"
                }
            ]
        }
    }
    url = "https://mandrillapp.com/api/1.0/messages/send.json"
    result = urlfetch.fetch(url=url,
        payload=json.dumps(json_mandrill),
        method=urlfetch.POST,
        headers={'Content-Type': 'application/x-www-form-urlencoded'}) 
```

# android - 管理 ListView 的列表项

> ID：12999560
> 
> 赞同：0
> 
> 时间：2012-10-21T16:05:45.643
> 
> 标签：android, listview, view, viewgroup

我创建了一个自定义 ListView。列表中的每一项都有一个 imageView 和两个 TextView。

代码是：

```
public class PersonalList extends ListActivity{

 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String[] name= new String[] { "Mary", "Frank",
            "John" };
    String[] surname = new String[] { "Ballak", "Doe",
            "Strip"" };
    setContentView(R.layout.member_list);

    MySimpleArrayAdapter adapter = new MySimpleArrayAdapter(this, name, surname);
    setListAdapter(adapter);
}

 protected void onListItemClick(ListView l, View v, int position, long id) {
    String name = (String) getListAdapter().getItem(position);
    Toast.makeText(this, "selected item: "+name, Toast.LENGTH_LONG).show();     
  }

 } 
```

其中 MySimpleArrayAdapter 是：

```
public class MySimpleArrayAdapter extends ArrayAdapter<String> {
      private final Context context;
      private final String[] name;
      private final String[] surname;

      public MySimpleArrayAdapter(Context context, String[] name, String[] surname)
      {
          super(context, R.layout.list_row, name);
          this.context = context;
          this.name= name;
          this.surname = surname;
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.rowlayout, parent, false);
        TextView nameView= (TextView) rowView.findViewById(R.id.label);
        TextView surnameView= (TextView) rowView.findViewById(R.id.label1);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);
        nameView.setText(name[position]);
        surnameView.setText(surname[position]);

        return rowView;
      }
  } 
```

从以下代码调用`onListItemClick`：

```
 Toast.makeText(this, "selected item: "+name, Toast.LENGTH_LONG).show(); 
```

我为第一项获得了这样的敬酒消息：

```
 "selected item: Mary" 
```

我该怎么做才能获得以下结果？

```
 "selected item: Mary Ballak" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:10:15.927

这将为您提供名字和姓氏：

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
    String name = (String) getListAdapter().getItem(position);
    Toast.makeText(this, "selected item: " + ((TextView) v.findViewById(R.id.label)).getText().toString() + " " + ((TextView) v.findViewById(R.id.label1)).getText().toString(), Toast.LENGTH_LONG).show();     
  } 
```

此外-您可以从数组中获取索引`onItemClick`并从数组（姓名/姓氏）中获取字符串-如果您将数组保存为您的成员`Activity`

就像是：`String text = mName[position] + " " + msurName[position];`

# ios - 具有百分比机会的两个数字之间的随机浮动？

> ID：12999568
> 
> 赞同：0
> 
> 时间：2012-10-21T16:06:50.180
> 
> 标签：ios, random, floating-point, percentage

我知道标题对我想要实现的目标不是很清楚，所以我将更深入地解释我想要实现的目标。

我几乎有一个方法可以返回两个数字之间的浮点数，如下所示：

```
- (float)randomFloatBetween:(float)num1 andLargerFloat:(float)num2 {
    return ((float)arc4random() / ARC4RANDOM_MAX) * (num2-num1) + num1;
} 
```

现在我想给它增加一个百分比的机会。例如，我需要一个介于 3 和 5 之间的浮点数，但该数字有 85% 的机会介于 3 和 4 之间，但仍有 15% 的机会介于 4 和 5 之间。

这可能吗？我曾尝试查看其他 SO 帖子，但似乎没有人想要完成此操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:01:59.837

如果你缩放它，你可以用一个随机数来做到这一点：

```
r = random();
if (r <= 0.85)
    n = 3 + (r / 0.85);
else
    n = 4 + ((r - 0.85) / 0.15); 
```

这可以概括。如果您的随机数介于 n1 和 n3 之间，并且有 p1 的机会介于 n1 和 n2 之间，并且有 p2 的机会介于 n2 和 n3 之间（其中 n1 < n2 < n3，并且 p1 + p2 = 1）那么

```
r = random();
if (r < p1)
    n = n1 + (r / p1)*(n2 - n1)
else
    n = n2 + ((r - p1) / p2)*(n3 - n2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:13:57.740

首先获取一个介于 0 和 1 之间的随机数。如果是 0-0.85，则计算所需范围内的第二个随机数。如果它是 0.86-1.0，则计算另一个所需范围内的第二个随机数。

顺便说一句 - **arc4random**是矫枉过正的，用于密码学。只需使用**随机（首先使用****随机**种子）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T16:14:11.973

如果您只需要每个区间的均匀分布，您可以分两个阶段生成您的数字。第一阶段选择间隔，第二阶段使用您必须获得实际数字的方法。

例如，如果第一阶段随机，百分比范围为 0 到 84，则使用 3 和 4 调用您的方法；如果是 4 和 5 的 85 到 99 通话。

# java - 将原生类型转换为 jni 类型

> ID：12999570
> 
> 赞同：1
> 
> 时间：2012-10-21T16:06:55.610
> 
> 标签：java, c++, c, java-native-interface, native

看问题[参数传入native a method](https://stackoverflow.com/questions/12990929/parameter-passing-in-native-a-method)。如果我想写一个返回值的原生方法 Traverser (String path) 怎么办？如何在 Java 类型中转换 C 中的 long int 类型，返回本机方法 Traverser（字符串路径）？例如如何将 long int 转换为 jlong​​？如果我想写一个方法

```
public native long Traverser (String path), 
```

这段代码是否正确

```
JNIEXPORT jlong JNICALL Java_ParallelIndexation_Traverser(JNIEnv* env, jobject obj, jstring path) 
{ 
    long int result;
    const jbyte* path2 = env->GetStringUTFChars(path, nullptr); 
    if (path2 == nullptr) 
        return; 

    result=Traverser(path2); 

    env->ReleaseStringUTFChars(path, path2); 
    return result;
} 
```

?

或者是否需要转换

```
long int result 
```

至

```
jlong? 
```

以及是否可以使用 Java_ParallelIndexation_Traverser 而不是

```
long int result; 
```

声明

```
jlong result; 
```

?

# google-drive-api - 与谷歌驱动器集成

> ID：12999571
> 
> 赞同：5
> 
> 时间：2012-10-21T16:06:57.920
> 
> 标签：google-drive-api

我正在尝试与谷歌驱动器集成，以便我的应用程序可以通过“打开方式...”从谷歌驱动器启动。我相信我已经遵循了文档。我已经发布了我的应用程序来测试用户.. 在某些时候谷歌驱动器要求允许将我的应用程序添加到谷歌驱动器。

但我的应用程序未显示在“打开方式...”或“创建新...”中

我在我的应用程序和其他正常工作的应用程序之间看到的一个区别是在此页面上：

[https://accounts.google.com/IssuedAuthSubTokens?hl=en](https://accounts.google.com/IssuedAuthSubTokens?hl=en)

有效的应用程序有：旁边的“按文件驱动 API”

我的应用程序显示“磁盘 API”

这是我的清单

```
{
    "name": [hidden],
    "description": [hidden],
    "version": "0.0.0.2",
    "manifest_version": 2,
    "container":  "GOOGLE_DRIVE",
    "api_console_project_id" : [hidden],

    "icons": {
    "128": "icon_128.png"
    },

    "app": {
    "urls": [
      "http://www.trainyourvision.org/"
    ],

    "launch": {
        "web_url": "http://www.trainyourvision.org/painter/"
        }
    },

    "gdrive_mime_types": {
        "http://drive.google.com/intents/opendrivedoc": [
        { 
            "type": ["image/png", "image/jpeg", "image/gif", "application/vnd.google.drive.ext-type.png",
            "application/vnd.google.drive.ext-type.jpg","application/vnd.google.drive.ext-type.gif",
            "application/vnd.google.drive.ext-type.psd"
            ],
            "href": "http://www.trainyourvision.org/painter/",
            "title" : "Open",
            "disposition" : "window"
            }
        ]
    },

    "requirements": {
        "3D": {
        "features": ["webgl"]
        }
    }
} 
```

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:14:42.587

您需要安装您的应用程序才能在“创建”和“打开方式”菜单中看到它。看到[这个](https://stackoverflow.com/questions/10474588/reason-for-installation-through-chrome-web-store)。你可以通过两种方式做到这一点：

1.  从 Chrome 网上应用店安装
2.  将安装范围添加到授权码请求

我更喜欢第二种方法。这样，当提示用户授予对您应用的访问权限时，他们也会自动安装该应用，而无需前往 Chrome 网上应用店。

有关范围，请参见[this](https://developers.google.com/drive/scopes)。

# r - 动态加载函数

> ID：12999576
> 
> 赞同：2
> 
> 时间：2012-10-21T16:07:18.480
> 
> 标签：r

如果我在外部文件中定义一个函数，我必须使用`source`它来加载它。所以如果我正在修改一个函数，我的过程如下所示：

1.  在文件中进行更改
2.  来源
3.  测试更改
4.  返回 1

有什么办法可以去掉#2？例如，在 Octave 中，它只是在您每次调用函数时动态搜索您的路径以找到适当的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T16:37:24.330

不，

如果您对函数进行更改，您总是需要重新加载它。但是，正如评论者所提到的，使用 RStudio 时还有其他选项，即：

1.  来源保存，和；
2.  `fix()`

根据功能的复杂性，我个人喜欢它，`fix()`因为它会立即重新加载功能，并且非常适合进行快速调整 - 但需要注意的是您必须记住手动保存更改。

当我进行故障排除时，我通常使用`fix`然后复制粘贴到我的函数文件中。

该`devtools`软件包为软件包开发提供了一系列简化和精简。虽然它对于重新加载也很有用，但似乎超出了您的问题范围。

# html - Meteor 内置有任何转义功能吗？

> ID：12999578
> 
> 赞同：0
> 
> 时间：2012-10-21T16:07:34.027
> 
> 标签：html, handlebars.js

Meteor 是否提供任何转义快捷方式，例如某些编程语言中使用的反斜杠？（顺便说一句，我确实搜索了文档）

```
<template name="hello">
  <h1>H1 text of &lt;template&gt; "hello"</h1>
</template> 
```

例如，是否有任何方法可以转义上述示例中的 <> 标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:27:52.880

如果您想转义 以`<`使其实际上不显示`<`but `&lt;`，则应编写`&amp;lt;`.

# javascript - 来自有效 JavaScript 的 TypeScript 错误

> ID：12999581
> 
> 赞同：1
> 
> 时间：2012-10-21T16:08:08.773
> 
> 标签：javascript, typescript

下面的代码是有效的 JavaScript，但在 typescript 中它会引发以下错误。知道为什么吗？

> 错误 7 当前范围内不存在名称“gameloop”

```
(function gameloop() {
    window.requestAnimationFrame(gameloop);
})(); 
```

编辑：第一次回答后注意到与实际问题无关的复制和粘贴错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:01:45.087

知道了。错误与函数的范围有关。所以我需要这个

```
(function gameloop() {
window.requestAnimationFrame(this.gameloop);
})(); 
```

即使它在Javascript中符合这一点。

```
(function gameloop() {
window.requestAnimationFrame(gameloop);
})(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T16:11:20.460

这只是一个缺少的分号，阻止它在 Javascript 和 Typescript 中都是正确的。

这应该工作：

```
 var game = new Game(); // <== don't forget ';' here
   (function gameloop() {

       // stats.update();
        game.step();
        game.update();
        game.draw();

        window.requestAnimationFrame(gameloop);
    })(); 
```

不要依赖自动分号插入：规则太复杂了。

在您的情况下，编译器看到

```
... new Game()(something) ... 
```

并且没有足够的信息不认为这`something`是传递给函数的参数`new Game()`。因此错误...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T22:50:34.693

我也遇到过这个问题，但它需要不同的修复。就我而言，我使用的是 TypeScript 中的 window.requestAnimationFrame，然后在 Chrome 上运行代码。但是，我得到一个运行时错误，“窗口没有 requestAnimationFrame”。这是因为 requestAnimationFrame 在 Chrome 中仍然是前缀。您要么需要在 TypeScript 声明中添加前缀声明，要么只需将 JavaScript 文件添加到您的项目中，以标准方式 plolyfills window.requestAnimationFrame；

```
// requestAnimFrame shim  with setTimeout fallback
window.requestAnimationFrame = (function () {
    return window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            window.msRequestAnimationFrame ||
            function (callback) {
                window.setTimeout(callback, 1000 / 60);
            };
})(); 
```

我使用 polyfill 方法使 requestAnimationFrame 在 chrome 上工作，因为它是如此常见的修复。polyfill 本身可以用纯 TypeScript 编写，并带有一堆强制转换，但是 Javascript 干净且简单，当 Chrome 删除前缀时您可以将其删除，而不会影响您的 TypeScript。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T21:14:11.513

Note also that there is an issue currently with calling a named function expression within said function expression, which may bite you in code similar to the above. Namely the below code will give you the error shown in the comments even though valid:

```
function a() {
    var x = function b() {
        b(); // <-- "**The name 'b' does not exist in the current scope**"
    }
} 
```

This is valid as per [section 13](http://es5.github.com/#x13) of the ECMAScript spec, but fails currently.

# javascript - Javascript自定义变量和自定义数组变量类型

> ID：12999584
> 
> 赞同：6
> 
> 时间：2012-10-21T16:08:23.253
> 
> 标签：javascript, html, webgl

我正在尝试在 JavaScript 中创建一系列 vector3，我正在尝试为 openGL 立方体创建顶点、边缘、面结构，现在我对 JavaScript 很陌生，但由于 HTML5 支持它，我觉得 JS 应该是我理解的语言，现在:),

现在我不知道如何在 JS 中声明一个结构，然后我将如何将它实现为数组类型？

我有类似的东西，但我不确定这是否正确。

```
var vector3 = (x=0,y=0,z=0); 
```

但是那我将如何将它用于数组？

为帮助喝彩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:29:07.783

我会写一个构造函数

```
function Vector(x,y,z){
    this.dimension = 0;
    if( undefined !== x ) this.dimension = 1, this.x = x || 0;
    else this.x = 0;
    if( undefined !== y ) this.dimension = 2, this.y = y || 0;
    else this.y = 0;
    if( undefined !== z ) this.dimension = 3, this.z = z || 0;
    else this.z = 0;
}
Vector.prototype = Object.create(null, {
    length: {
        get: function(){
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
        }
    },
    add : {
        value: function(v){
            var d = Math.max(this.dimension, v.dimension), x, y, z;
            if( d > 0 ) x = (this.x || 0) + (v.x || 0);
            if( d > 1 ) y = (this.y || 0) + (v.y || 0);
            if( d > 2 ) z = (this.z || 0) + (v.z || 0);
            return new Vector(x, y, z);
        }
    }
});

var vector3 = new Vector(0,0,0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:11:34.473

我会创建一个对象：

```
var vector3 = {
    x:0,
    y:0,
    z:0
}; 
```

您可以使用以下代码访问各个字段：

```
var tmp = vector3.x; 
```

在向量中放置点

```
var myPolygon = [
    {x: 3, y: 8, z: -8},
    {x: 3, y: 4, z: 10},
    {x: 9, y: 8, z: -8},
]; 
```

你也可以用它写一个向量类型，这样你就不必每次都写`x`, `y`, 和：`z`

```
var vec3 = {x:0,y:0,z:0};

var demoVec = vec3;
var demo2Vec = vec3;
demoVec.x+=demo2Vec.y; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T16:14:13.487

使用 javascript 对象：

```
var vector1 = {x:0,y:0,z:0};
var vector2 = {x:10,y:0,z:0};

//example function to find scalar distance between two points
function distance(v1,v2){
    return Math.sqrt(Math.pow((v1.x-v2.x),2) + Math.pow((v1.y-v2.y),2) + Math.pow((v1.z-v2.z),2));
}
var d = distance(vector1,vector2); //returns 10
console.log(d); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T16:18:23.800

我喜欢 Tobias Springer 的解决方案，但您也可以使用实用方法创建矢量对象：

```
Vector = function(x, y, z) {
  this._init(x, y, z);
};

Vector.prototype = {

  /**
   * Fixed Constructor.
   */
  constructor: Vector,

  x: null,

  y: null,

  z: null,

  /**
   * Add documentation!
   */
  _init: function(x, y, z) {
    this.x = x;
    this.y = y;
    this.z = z;
  },

  /**
   * Add documentation!
   */
  add: function(otherVector) {
    return new Vector(this.x + otherVector.x,
        this.y + otherVector.y, this.z + otherVector.z);
  },

  /**
   * Add documentation!
   */
  scalarProduct: function(otherVector) {
    return this.x * otherVector.x + this.y * otherVector.y
        + this.z * otherVector.z;
  },

  /**
   * From Asad's answer. Returns the distance between this vector
   * and <code>otherVector</code>.
   * @param otherVector {Vector}
   * @returns {Number}
   */
  distance: function(otherVector) {
    return Math.sqrt(Math.pow((this.x-otherVector.x),2)
        + Math.pow((this.y-otherVector.y),2)
        + Math.pow((this.z-otherVector.z),2));
  }
  // and so on....
}; 
```

所以，你会像这样使用它：

```
var vector1 = new Vector (1, 1, 1);
var vector2 = new Vector (1, 0, 1);

var addedVector = vector1.add(vector2); // --> = (2, 1, 2)
var scalarProduct = vector1.scalarProduct(vector2); // --> = 2 
```

# php - 同时停止和返回输出缓冲

> ID：12999585
> 
> 赞同：2
> 
> 时间：2012-10-21T16:08:33.927
> 
> 标签：php, buffer

一旦我开始使用 输出缓冲`ob_start()`，我想在一个命令中停止输出缓冲并获取其内容（而不将其发送到输出）。[我回顾了可用的功能](http://www.php.net/manual/en/ref.outcontrol.php)，我对每个功能的理解如下：

```
 clear  return  send    stop
ob_clean          x         
ob_end_clean      x                      x
ob_end_flush                      x      x
ob_flush                          x 
ob_get_clean      x        x             x  // should be called ob_get_end_clean
ob_get_contents            x        
ob_get_flush               x      x 
```

据我所知，没有一个函数可以在停止缓冲后返回输出，所以当我想捕获一个函数的输出时，我必须分 3 步完成：

```
$output = ob_get_contents();
ob_end_clean();
return $output; 
```

**我是否遗漏了什么，或者是否有命令停止并一次性返回输出缓冲区？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:12:55.867

用[手册](http://php.net/ob_get_clean)说：

> **`ob_get_clean()`**本质上同时执行`ob_get_contents()`和`ob_end_clean()`。

（由我突出显示）。与您的代码比较：

```
$output = ob_get_contents();
ob_end_clean(); 
```

您的商家信息一定遗漏了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:12:35.187

这应该是一个，它甚至在描述中提到它:)

[http://www.php.net/manual/en/function.ob-get-clean.php](http://www.php.net/manual/en/function.ob-get-clean.php)

# ruby-on-rails - 大礼包删除帐单地址

> ID：12999588
> 
> 赞同：4
> 
> 时间：2012-10-21T16:09:10.810
> 
> 标签：ruby-on-rails, spree

如何在 Spree 结账程序中删除帐单（或送货）地址？我正在使用狂欢 1.3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T03:08:40.460

您可以通过将此代码放在您的应用程序中的以下位置从定义中删除交付步骤来删除*送货*地址：`checkout_flow``app/models/spree/order_decorator.rb`

```
Spree::Order.class_eval do
  checkout_flow do
    go_to_state :address
    go_to_state :payment, :if => lambda { |order| order.payment_required? }
    go_to_state :confirm, :if => lambda { |order| order.confirmation_required? }
    go_to_state :complete
    remove_transition :from => :delivery, :to => :confirm
  end
end 
```

由于没有送货步骤，Spree 不会要求订单的送货地址或送货信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:16:39.357

如果您使用的是 spree-core，我有一个替代品

在您的 view/spree/checkout/edit 文件中，有一个 render 语句涉及 error_messages.html.erb = render :partial => 'spree/shared/error_messages', :locals => { :target => @order }

所以现在，您必须从 _error_messages.html.erb 中删除“ship”名称，然后它就不会显示这种错误。

在您的 spree/shared/_error_message 文件中进行以下更改：

-target.errors.full_messages.each 做 |msg|
    -unless (msg.include?("Ship"))
        = msg

请记住，在此处使用循环相应地更改错误计数。目前我没有使用它，所以发表评论

//= t(:errors_prohibited_this_record_from_being_saved, :count => target.errors.count)

* * *

我还在 github 和 stackoverflow 上对同样的问题发表了评论- [https://github.com/spree/spree/issues/2571#issuecomment-13769093](https://github.com/spree/spree/issues/2571#issuecomment-13769093)

[https://stackoverflow.com/questions/14891781/how-to-remove-the-shipping-address-validation-in-spree-checkout-process/14957973#comment20997203_14957973](https://stackoverflow.com/questions/14891781/how-to-remove-the-shipping-address-validation-in-spree-checkout-process/14957973#comment20997203_14957973)

# c# - 使用实体框架调用存储过程并从 WCF 平稳返回的更好方法？

> ID：12999591
> 
> 赞同：5
> 
> 时间：2012-10-21T16:09:38.447
> 
> 标签：c#, sql-server, wcf, entity-framework, stored-procedures

我想创建一个 WCF 服务，它使用实体框架调用 SQL Server 中的存储过程并将结果集返回给浏览器。

我使用 EF 中的函数 import 导入了存储过程，并构建了一个复杂类型。

似乎 EF 中的复杂类型无法被序列化并安静地返回。我完成这项工作的唯一方法是创建一个具体类并从 EF 返回的复杂类型构建它。这可行，但这意味着如果我有 30 个存储过程，我需要创建 30 个具体的类，这有点痛苦。

有一个更好的方法吗？

WCF 合同：

```
[ServiceContract]
public interface IService1
{
    [OperationContract,WebGet,XmlSerializerFormat]
    List<People> usp_GetPeople();    
} 
```

需要为每个过程创建具体类：

```
public class People
{
    public int person_id;
    public string last_name;
    public string first_name;
    public string street_addr;
    public string state_code;
    public string postal_code;

    public People(int person_id, string last_name, string first_name, string street_addr, string state_code, string postal_code)
    {
        this.person_id = person_id;
        this.last_name = last_name;
        this.street_addr = street_addr;
        this.state_code = state_code;
        this.postal_code = postal_code;
    }

    public People() { }
} 
```

WCF 服务：

```
public class Service1 : IService1
{
/// <summary>
/// Call stored proc and return resultset.
/// </summary>
/// <returns>List of resultset as concrete class People.</returns>
public List<People> usp_GetPeople()
{
    try
    {
        using (var db = new demoEntities())
        {
            var res = db.usp_GetPeople();

            List<People> lst = new List<People>();

            foreach (usp_GetPeople_Result r in res)
            {
                People p = new People(r.person_id, r.last_name, r.first_name, r.street_addr, r.state_code, r.postal_code);
                lst.Add(p);
            }

            return lst;
        }
    }
    catch (Exception e)
    {
        Utility.Log("Error in usp_GetPeople. " + e.ToString());
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:11:30.590

答案是返回一个 EF 复杂类型的列表。

```
 public List<usp_GetPeople_Result> usp_GetPeople2()
    {
        using (var db = new demoEntities())
        {
            return db.usp_GetPeople().ToList();
        }
    } 
```

这将不起作用：

```
 public ObjectResult<usp_GetPeople_Result> usp_GetPeople3()
    {
        using (var db = new demoEntities())
        {
            return db.usp_GetPeople();
        }
    } 
```

# linux - 更改 linux 发行版的 jar 文件图标

> ID：12999596
> 
> 赞同：0
> 
> 时间：2012-10-21T16:10:30.647
> 
> 标签：linux, jar, executable

我有一个应用程序 .jar，我想更改图标（而不是默认的 java 图标）。

对于 Windows 发行版，我将 jar 文件转换为 exe（我使用了 exe4j）。它有效。但现在我想为 linux 发行版做类似的事情......

我怎样才能做到这一点？我应该使用哪个扩展？（我使用的是 Windows 7）

PS：不是我要更改的框架图标，因为我已经通过代码更改了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:45:29.117

Linux 文件管理器从不查看文件以查看要使用的图标。如果你想为你的应用程序提供一个特定的图像，那么将它作为一个单独的文件提供并创建一个[.desktop 文件](http://standards.freedesktop.org/desktop-entry-spec/latest/)来将你的图像连接到你的可执行文件。

![/usr/share/applications 的内容](../Images/e6807fd7bd494e496cbb3f85315908b1.png)

# c - stat 函数在多次调用时不会改变它的值

> ID：12999597
> 
> 赞同：0
> 
> 时间：2012-10-21T16:10:30.943
> 
> 标签：c

我正在尝试查找某个路径是否是目录。

我正在使用`<sys/stat.h>`以下代码中的 stat 函数：

```
int  isDir(char *path){
    printf("%s\n", path);
    struct stat file;
    stat(path, &file);
    printf("%i\n", file.st_mode);
    int x; 
    x = S_ISDIR(file.st_mode);
    return x;
}
// I tried this function with the following code.
    printf("%i\n",  isDir("/home/aladdin"));
    printf("%i\n",  isDir("/home/aladdn")); 
```

我在 PC 上的用户名是`aladdin`这样的，第一个应该 work 并且 equal `1`，第二个应该打印 a `0`，因为没有名为 的用户`aladdn`。

所以运行前面的代码给出

```
/home/aladdin
16832
1
/home/aladdn
16832
1 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:13:32.147

您必须检查统计返回码。如果 stat 失败，它不会修改你的文件结构内容，在这种情况下它 IS_DIR 似乎返回 true。

所以，而不是你的当前行`stat(path, &file);`，有行：

`if (stat(path, &file) == -1) return 0;`

...当然，您可能应该以某种方式报告错误，具体取决于您的要求，但是这个简单的更改将修复您的功能。

至于为什么会得到相同的结果，我认为 C 会留下未初始化的结构，除非您明确初始化它们，并且使用这种用法，结构将在第二次调用时位于堆栈中完全相同的位置，因此它仍然具有值从第一次通话开始。但这只是偶然，更改代码和行为会发生不可预测的变化。C 那样很有趣 :)

要将 buf 归零，请在使用 &file 调用 stat 之前执行此操作：

`memset(&file, 0, sizeof file);`

# ruby - 在 Ruby Regex 中使用超过 9 个未命名的捕获

> ID：12999606
> 
> 赞同：4
> 
> 时间：2012-10-21T16:11:22.257
> 
> 标签：ruby, regex

我有一个像日志条目一样格式化的长字符串，我希望从中获取几个捕获并将它们存储在不同的变量中。

我知道 Ruby 将前 9 个捕获存储到变量 $1...$9 中，它是否还将其他捕获存储在 $10...$99 中？

如果不是，那么做这件事的简单方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T16:19:10.790

`String#match`返回[`MatchData`](http://www.ruby-doc.org/core-1.9.3/MatchData.html)包含捕获数组的对象。

```
m = Regexp.new('(.)' * 20).match('The quick brown fox jumps over the lazy dog')
m[12]
# => "r" 
```

虽然 12 美元也可以：

```
> $12
# => "r" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T16:19:39.180

是的，它确实。

```
"a2c4d7l4l0j4h9h7".gsub(/(\w)(\d)(\w)(\d)(\w)(\d)(\w)(\d)(\w)(\d)(\w)(\d)(\w)(\d)(\w)(\d)/) do
  $12
end
#=> "4" 
```

# shell - 在make文件中使用$$？

> ID：12999608
> 
> 赞同：0
> 
> 时间：2012-10-21T16:11:38.577
> 
> 标签：shell, makefile

我有以下结构

```
home
|-- Makefile
|-- H1
|   |-- Makefile
|   `-- h1.c
|-- H2
|   |-- Makefile
|   `-- h2.c
|-- main.c 
```

**H1/生成文件**

```
h1.o:h1.c
        gcc -c h1.c 
```

**H2/Makefile**

```
h2.o:h2.c
        gcc -c h2.c 
```

**主页/Makefile**

```
DIR = h1 h2
main.out:main.o
        for i in $(DIR);\
        do (cd $$i; make);\ //1.why () used here to encolose 2 commands and $$ before the i
        done
        gcc -o main.out main.o ./h1/h1.o ./h1/h1.o

main.o:main.c
        gcc -c main.c 
```

以上工作正常并给我输出文件，但我怀疑这是进行此编译的有效方式或任何其他方式来执行此操作。

我的问题在代码的评论中被提及，并且也随之而来

```
I have tried like 
do(cd $i;make;)//this showing error
also do(cd $$i;)make;//this also sowing error 
```

，请给我一些想法。这里发生了什么。我翻阅了一些书籍，发现 $$ 表示当前进程 ID ，但是在 i 之前这里有什么用。

还有什么是使用`()`, 来包含两个命令 [`cd`和`make`]。

请给我一些答案以解决我的疑问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:00:26.873

**1：**正如@BasileStarynkevitch 所说，Make 扩展了这个：

```
for i in $(DIR); do (cd $$i; make); done 
```

进入这个：

```
for i in h1 h2; do (cd $i; make); done 
```

并将其传递给外壳。

~~**2：**括号不是必需的。这同样有效：~~

 ~~```
for i in $(DIR); do cd $$i; make; done 
```~~ 

~~[正如 Virgile 指出的那样，我在这一点上是错误的。]~~

 ~~**3：**正如@BasileStarynkevitch 所说，`$(MAKE) -C $$i`比`cd $$i; make`.

**4：**您可以完全不使用循环（从而正确处理依赖关系）：

```
h1/h1.o: h1/h1.c
    $(MAKE) -C h1

h2/h2.o: h2/h2.c
    $(MAKE) -C h2

main.out:main.o h1/h2.o h1/h2.o
    gcc -o main.out main.o ./h1/h1.o ./h2/h2.o 
```

**5：**您可以完全不使用递归：

```
h1/h1.o: h1/h1.c
    gcc -c h1/h1.c -o h1/h1.o

h2/h2.o: h2/h2.c
    gcc -c h2/h2.c -o h2/h2.o 
```

**5：**您可以使用[自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)来使您的规则更清晰：

```
h1/h1.o: h1/h1.c
    gcc -c $< -o $@

h2/h2.o: h2/h2.c
    gcc -c $< -o $@

main.out:main.o h1/h2.o h1/h2.o
    gcc -o $@ $^ 
```

您可以进一步简化，但对于这样一个简单的 makefile，它是不值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:14:58.947

`make`扩展规则操作中的所有*生成变量*（如`$(CFLAGS)`or `$@`），然后使用 shell 执行它。并`$$`展开为`$`。所以外壳会看到`$i`它的`for`循环内部。如果您只写`$i`在规则中，它会在调用 shell 之前（因为*make*没有任何绑定*make-variable*`$(i)` ）被扩展（原样）为空。`make`*`i`*

 **使用[GNU remake](http://bashdb.sourceforge.net/remake/)，`remake -x`以了解正在发生的事情。

顺便说一句，我相信你`Makefile`错了：`(cd $$i; make)`应该是`$(MAKE) -C $$i` （因为 GNU*使*进程非常特别`$(MAKE)`，例如当你启动 a 时`make -j 2`）**~~

# android - 可点击的布局背景

> ID：12999611
> 
> 赞同：1
> 
> 时间：2012-10-21T16:12:13.807
> 
> 标签：android, android-layout, layout

我有一个可点击的布局，定义如下：

```
<RelativeLayout
    android:id="@+id/Test"
    android:layout_width="match_parent"
    android:layout_height="45dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:clickable="true"
    android:orientation="vertical" 
    android:background="@drawable/test_bg"
    > 
```

如果单击它，则有一个用于更改背景的选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:drawable="@drawable/testclicked"
      android:state_selected="true" />

<item android:drawable="@drawable/test" />

</selector> 
```

问题是它不起作用..对于工作正常的按钮。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:33:09.230

您应该使用`state_pressed`而不是`state_selected`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:drawable="@drawable/testclicked"
        android:state_pressed="true" />
    <item
        android:drawable="@drawable/test" />
</selector> 
```

# xslt - xml到xml转换使用基于父子关系的xslt

> ID：12999620
> 
> 赞同：2
> 
> 时间：2012-10-21T16:13:33.413
> 
> 标签：xslt, xslt-2.0

我需要根据父子关系将我的 xml 转换为另一个 xml。

下面是我的源xml

```
<FIXML>
    <Header>
        <RequestID>ReqID8942</RequestID>
    </Header>
    <Body>
     <Data>
      <LimitDetails>
        <LimitRefNo>L1</LimitRefNo>
        <LimitClassification>ROOT</LimitClassification>
        <ParentLimitRefNo></ParentLimitRefNo>
        <ApprovedLimit>100.0</ApprovedLimit>
      </LimitDetails>
      <LimitDetails>
        <LimitRefNo>L2</LimitRefNo>
        <LimitClassification>ClASSIFICATION1</LimitClassification>
        <ParentLimitRefNo>L1</ParentLimitRefNo>
        <ApprovedLimit>200.0</ApprovedLimit>
      </LimitDetails>
      <LimitDetails>
        <LimitRefNo>L3</LimitRefNo>
        <LimitClassification>CLASSIFICATION2</LimitClassification>
        <ParentLimitRefNo>L2</ParentLimitRefNo>
        <ApprovedLimit>300.0</ApprovedLimit>
      </LimitDetails>
      <LimitDetails>
        <LimitRefNo>L4</LimitRefNo>
        <LimitClassification>CLASSIFICATION3</LimitClassification>
        <ParentLimitRefNo>L3</ParentLimitRefNo>
        <ApprovedLimit>400.0</ApprovedLimit>
      </LimitDetails>
      </Data>
   </Body>
</FIXML> 
```

这里，子限制是指基于 ParentLimitRefNo 的父限制。父限制是 ParentLimitRefNo 为空的限制。

下面是我需要基于源 xml 生成的 xml。

```
<FIXML>
    <Header>
        <RequestID>ReqID8942</RequestID>
    </Header>
    <Body>
     <Data>
      <LimitDetails>
        <Limit>
           <LimitRefNo>L1</LimitRefNo>
           <LimitClassification>ROOT</LimitClassification>
           <ParentLimitRefNo></ParentLimitRefNo>
           <ApprovedLimit>100.0</ApprovedLimit>
           <SubLimit>
             <LimitRefNo>L2</LimitRefNo>
             <LimitClassification>ClASSIFICATION1</LimitClassification>
             <ParentLimitRefNo>L1</ParentLimitRefNo>
             <ApprovedLimit>200.0</ApprovedLimit>
         <SubLimit>
           <LimitRefNo>L3</LimitRefNo>
               <LimitClassification>CLASSIFICATION2</LimitClassification>
               <ParentLimitRefNo>L2</ParentLimitRefNo>
               <ApprovedLimit>300.0</ApprovedLimit>
           <SubLimit>
              <LimitRefNo>L4</LimitRefNo>
              <LimitClassification>CLASSIFICATION3</LimitClassification>
                  <ParentLimitRefNo>L3</ParentLimitRefNo>
                  <ApprovedLimit>400.0</ApprovedLimit> 
           </SubLimit>
        </SubLimit>
       </SubLimit>
      </Limit>
    </LimitDetails>
  </Data>
</Body> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:41:05.707

键的使用肯定更优雅（参见 Dimitre Novatchevs 解决方案），但是这个考虑了结构中所需的更改（例如重命名`<LimitDetails />`和`<SubLimit />`放置`<Limit />`标签。）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
</xsl:template>

<xsl:template match="Data">
    <xsl:copy>
        <LimitDetails>
            <Limit>
                <xsl:apply-templates select=".//LimitDetails[./ParentLimitRefNo='']" />
            </Limit>
        </LimitDetails>
    </xsl:copy>
</xsl:template>

<xsl:template match="LimitDetails">
    <xsl:variable name="LimitRefNo" select="./LimitRefNo" />
    <xsl:apply-templates select="@*|node()" />
    <xsl:if test="../LimitDetails[./ParentLimitRefNo = $LimitRefNo]">
    <SubLimit>
        <xsl:apply-templates select="../LimitDetails[./ParentLimitRefNo = $LimitRefNo]" />
    </SubLimit>
    </xsl:if>
</xsl:template>
</xsl:transform> 
```

或者作为使用密钥对 Dimitre 解决方案的修改：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kLD" match="LimitDetails" use="ParentLimitRefNo"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Data">
  <Data>
    <LimitDetails>
      <Limit>
      <xsl:apply-templates select="LimitDetails[not(ParentLimitRefNo/node())]"/>
      </Limit>
    </LimitDetails>
  </Data>
 </xsl:template>

 <xsl:template match="LimitDetails">
  <xsl:apply-templates />
  <xsl:if test="key('kLD', LimitRefNo)">
  <SubLimit>
    <xsl:apply-templates select="key('kLD', LimitRefNo)"/>
  </SubLimit>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:30:48.253

**此 XSLT 2.0 转换（易于转换为 XSLT 1.0）**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kLD" match="LimitDetails" use="ParentLimitRefNo"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Data">
  <Data>
    <LimitDetails>
        <xsl:apply-templates
        select="LimitDetails[not(ParentLimitRefNo/node())]"/>
    </LimitDetails>
  </Data>
 </xsl:template>

 <xsl:template match="LimitDetails">
  <xsl:variable name="vSuf" select=
    "if(ParentLimitRefNo/text())
       then 'Sub'
       else ()
    "/>

  <xsl:element name="{$vSuf}Limit">
    <xsl:apply-templates select="node()|key('kLD', LimitRefNo)"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<FIXML>
    <Header>
        <RequestID>ReqID8942</RequestID>
    </Header>
    <Body>
        <Data>
            <LimitDetails>
                <LimitRefNo>L1</LimitRefNo>
                <LimitClassification>ROOT</LimitClassification>
                <ParentLimitRefNo></ParentLimitRefNo>
                <ApprovedLimit>100.0</ApprovedLimit>
            </LimitDetails>
            <LimitDetails>
                <LimitRefNo>L2</LimitRefNo>
                <LimitClassification>ClASSIFICATION1</LimitClassification>
                <ParentLimitRefNo>L1</ParentLimitRefNo>
                <ApprovedLimit>200.0</ApprovedLimit>
            </LimitDetails>
            <LimitDetails>
                <LimitRefNo>L3</LimitRefNo>
                <LimitClassification>CLASSIFICATION2</LimitClassification>
                <ParentLimitRefNo>L2</ParentLimitRefNo>
                <ApprovedLimit>300.0</ApprovedLimit>
            </LimitDetails>
            <LimitDetails>
                <LimitRefNo>L4</LimitRefNo>
                <LimitClassification>CLASSIFICATION3</LimitClassification>
                <ParentLimitRefNo>L3</ParentLimitRefNo>
                <ApprovedLimit>400.0</ApprovedLimit>
            </LimitDetails>
        </Data>
    </Body>
</FIXML> 
```

**产生想要的正确结果**：

```
<FIXML>
   <Header>
      <RequestID>ReqID8942</RequestID>
   </Header>
   <Body>
      <Data>
         <LimitDetails>
            <Limit>
               <LimitRefNo>L1</LimitRefNo>
               <LimitClassification>ROOT</LimitClassification>
               <ParentLimitRefNo/>
               <ApprovedLimit>100.0</ApprovedLimit>
               <SubLimit>
                  <LimitRefNo>L2</LimitRefNo>
                  <LimitClassification>ClASSIFICATION1</LimitClassification>
                  <ParentLimitRefNo>L1</ParentLimitRefNo>
                  <ApprovedLimit>200.0</ApprovedLimit>
                  <SubLimit>
                     <LimitRefNo>L3</LimitRefNo>
                     <LimitClassification>CLASSIFICATION2</LimitClassification>
                     <ParentLimitRefNo>L2</ParentLimitRefNo>
                     <ApprovedLimit>300.0</ApprovedLimit>
                     <SubLimit>
                        <LimitRefNo>L4</LimitRefNo>
                        <LimitClassification>CLASSIFICATION3</LimitClassification>
                        <ParentLimitRefNo>L3</ParentLimitRefNo>
                        <ApprovedLimit>400.0</ApprovedLimit>
                     </SubLimit>
                  </SubLimit>
               </SubLimit>
            </Limit>
         </LimitDetails>
      </Data>
   </Body>
</FIXML> 
```

**说明**：

1.  使用和修改**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

2.  使用**[键](http://www.w3.org/TR/xslt#key)**`LimitDetails`指定 a的所有逻辑子级`LimitRefNo`。

* * *

**二、XSLT 1.0 解决方案**：

这几乎是对上述转换到 XSLT 1.0 的机械翻译——只是变量的定义`$vSuf`不同：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kLD" match="LimitDetails" use="ParentLimitRefNo"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Data">
  <Data>
    <LimitDetails>
        <xsl:apply-templates
        select="LimitDetails[not(ParentLimitRefNo/node())]"/>
    </LimitDetails>
  </Data>
 </xsl:template>

 <xsl:template match="LimitDetails">
  <xsl:variable name="vSuf" select=
  "concat('',
          substring('Sub',1 div boolean(ParentLimitRefNo/text()))
         )"/>

  <xsl:element name="{$vSuf}Limit">
    <xsl:apply-templates select="node()|key('kLD', LimitRefNo)"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于相同的 XML 文档（上图）时，会产生相同的正确结果。**

# uitableview - UITableView addsubview 崩溃

> ID：12999621
> 
> 赞同：1
> 
> 时间：2012-10-21T16:13:38.180
> 
> 标签：uitableview, subview, caanimation

我想将包含 CABasicAnimation 的自定义 UIView 添加到 UITableViewCell。我这样做是通过以下方式

```
if( self.pie_chart_view == nil )
    self.pie_chart_view = [[PieChartView alloc] initWithFrame:CGRectMake( 0.f, 0.f, 30.f, 30.f )];
[pie_chart_view animate_progress_from:0.0 to:1.0 with_duration:5.0];
[cell.contentView addSubview:pie_chart_view]; 
```

但是代码崩溃了，如下图所示：

![在此处输入图像描述](../Images/e3aa2566e29bb5fdcb0f5e0750389971.png)

崩溃显然是由以下代码引起的

```
- (void)drawInContext:(CGContextRef)context {
CGRect circleRect = CGRectInset(self.bounds, 1, 1);

CGColorRef borderColor = [[UIColor whiteColor] CGColor];
CGColorRef backgroundColor = [[UIColor colorWithWhite:0 alpha: 0.75] CGColor];

CGContextSetFillColorWithColor(context, backgroundColor); <--- CRASHES ON THIS LINE WITH EXC_BAD_ACCESS
CGContextSetStrokeColorWithColor(context, borderColor);
CGContextSetLineWidth(context, 2.0f);

CGContextFillEllipseInRect(context, circleRect);
CGContextStrokeEllipseInRect(context, circleRect);

CGFloat radius = MIN(CGRectGetMidX(circleRect), CGRectGetMidY(circleRect));
CGPoint center = CGPointMake(radius, CGRectGetMidY(circleRect));
CGFloat startAngle = -M_PI / 2;
CGFloat endAngle = self.progress * 2 * M_PI + startAngle;
CGContextSetFillColorWithColor(context, borderColor);
CGContextMoveToPoint(context, center.x, center.y);
CGContextAddArc(context, center.x, center.y, radius, startAngle, endAngle, 0);
CGContextClosePath(context);
CGContextFillPath(context);

[super drawInContext:context];
} 
```

但我不明白为什么它应该崩溃。我的项目使用 ARC。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:25:37.440

好的，我解决了这个问题。使用 ARC 时，UIColor 会立即被删除。可以通过执行以下操作来修复此问题：

```
UIColor * __autoreleasing borderColor = [UIColor whiteColor];
UIColor * __autoreleasing backgroundColor = [UIColor colorWithWhite:0 alpha: 0.75];

CGContextSetFillColorWithColor(context, backgroundColor.CGColor );
CGContextSetStrokeColorWithColor(context, borderColor.CGColor ); 
```

之后代码不再崩溃。

# javascript - javascript返回，不起作用

> ID：12999630
> 
> 赞同：-2
> 
> 时间：2012-10-21T16:14:13.367
> 
> 标签：javascript, function, return

我有这个代码：

```
replaceAny('this','that',string);
if(val!="") 
```

replaceAny 函数如下所示：

```
function replaceAny(first,second,ele) {
  var val = ele.replace(first,second);
  alert(val);
  return val;
} 
```

但是在运行 replaceAny 函数之后（并且警报显示正确的值，if 条件告诉我变量 val 没有设置，为什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:15:40.070

我认为您没有将函数返回的值分配给您的变量`val`。

像这样试试

```
 val = replaceAny('this','that',string);
 if(val!="") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:17:51.027

您没有正确使用函数的返回值。这就像你想要的

```
function replaceAny(first,second,ele) {
  return ele.replace(first,second);
}

var val = replaceAny('this','that',string);
if(val!=""){
  //something, something darkside
} 
```

# sql - 在 SQL Server 2008 中用逗号分割字符串

> ID：12999631
> 
> 赞同：8
> 
> 时间：2012-10-21T16:14:33.113
> 
> 标签：sql, sql-server, sql-server-2008

有两个字符串`a`和`b`

该`a`字符串包含逗号。我想用逗号分割字符串，然后遍历每个元素。

如果`b`字符串包含任何以逗号分隔的元素将返回 0

（例如：a = `"4,6,8"`; b =`"R3799514"`因为`b`字符串包含 4 所以返回 0）

如何使用存储过程来实现这一点？提前致谢！

我见过一个拆分功能：

```
CREATE FUNCTION dbo.Split(@String varchar(8000), @Delimiter char(1))     
returns @temptable TABLE (items varchar(8000))     
as     
begin     
declare @idx int     
declare @slice varchar(8000)     

select @idx = 1     
    if len(@String)<1 or @String is null  return     

while @idx!= 0     
begin     
    set @idx = charindex(@Delimiter,@String)     
    if @idx!=0     
        set @slice = left(@String,@idx - 1)     
    else     
        set @slice = @String     

    if(len(@slice)>0)
        insert into @temptable(Items) values(@slice)     

    set @String = right(@String,len(@String) - @idx)     
    if len(@String) = 0 break     
end 
return     
end

select top 10 * from dbo.split('Chennai,Bangalore,Mumbai',',') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T16:32:40.787

以下将起作用 -

```
DECLARE @A VARCHAR (100)= '4,5,6'
DECLARE @B VARCHAR (100)= 'RXXXXXX'
DECLARE @RETURN_VALUE BIT = 1 --DEFAULT 1

SELECT items
INTO #STRINGS 
FROM dbo.split(@A,',')

IF EXISTS(SELECT 1 FROM #STRINGS S WHERE CHARINDEX(items, @B) > 0)
SET @RETURN_VALUE = 0

PRINT @RETURN_VALUE

DROP TABLE #STRINGS 
```

您也可以使用[CONTAINS](http://msdn.microsoft.com/en-us/library/ms187787.aspx)代替[CHARINDEX](http://msdn.microsoft.com/en-us/library/ms186323.aspx) -

```
IF EXISTS(SELECT 1 FROM #STRINGS S WHERE CONTAINS(items, @B))
SET @RETURN_VALUE = 0 
```

# html - 为什么 Verdana 字体会根据字体在文本之前产生不同的空间大小？

> ID：12999636
> 
> 赞同：1
> 
> 时间：2012-10-21T16:15:23.113
> 
> 标签：html, css

在以下 HTML/CSS 示例中

[http://jsfiddle.net/Hmwvv/](http://jsfiddle.net/Hmwvv/)

我们可以注意到前导空格的大小与字体大小成正比。如何消除这种效果，以便在不同`div`元素中对齐不同大小的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:24:26.187

每个字形周围都有少量空白，这是故意的，这样字母就不会重叠。您可以通过选择一个字母来看到这一点。

为了解决你的问题，引入一个小的负数`text-indent`。

```
#big {
    text-indent: -5px;
} 
```

[演示](http://jsfiddle.net/Hmwvv/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:33:26.687

前导空格是字符渲染的一部分，例如通过设置 `div:first-letter { background: green } 可以看到。调整它会违反正常的印刷规则。

但是，如果您真的想在标题和其后段落的第一行中对齐不同大小的字母“M”最左边的笔划，那么`margin-left: 0.3em`在段落上设置似乎是最好的选择。这适用于 Verdana，并且使用了那些特定的字符。（例如，如果标题的第一个字母是“J”，情况就大不相同了。）

# android - Android intent filter not working to launch activity from browser

> ID：12999637
> 
> 赞同：0
> 
> 时间：2012-10-21T16:15:23.410
> 
> 标签：android, eclipse, android-intent

I've read a tutorial on how to launch an app from a link on the browser. I've created an activity 'TestLaunch'.

```
 <activity
        android:name=".TestMe"
        android:label="Test">
        <intent-filter>
            <data android:scheme="testme.com" />
            <action android:name="android.intent.action.VIEW" />
        </intent-filter>

</activity> 
```

Then I connected my android phone and clicked 'debug' on Eclipse. The app launched as usual. I openned the browser and typed 'testme.com'. The activity was not started as expected. Is this because the app is not fully installed on the phone or because I am understanding wrongly how the intent filter works?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:33:54.610

尝试这个：

```
 <activity
    android:name=".TestMe"
    android:label="Test">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT"></category>
        <category android:name="android.intent.category.BROWSABLE"></category>
        <data android:host="www.testme.com" android:scheme="http"></data>
    </intent-filter>
 </activity> 
```

# wordpress - 在手机中查看时如何在Wordpress中强制桌面模式？

> ID：12999641
> 
> 赞同：0
> 
> 时间：2012-10-21T16:16:00.247
> 
> 标签：wordpress, mobile, user-agent

我想问一下如何用手机强制wordpress中的桌面行为？

我尝试了一些插件（http://wordpress.org/extend/plugins/wordpress-mobile-pack/、http://wordpress.org/extend/plugins/mobile-smart/[等](http://wordpress.org/extend/plugins/mobile-smart/)）但没有成功。

我在手机上切换到桌面模式用户代理，但没有成功。

Wordpress 网站仍以某些移动模式显示。布局不同，甚至缺少一些元素。

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:34:57.750

看，这完全取决于两件事，首先是您选择的主题，然后是移动浏览器。

让我们先讨论一下主题，如果它是响应式主题，那么它肯定会改变网站的布局，甚至可能会错过一些 div 块。

现在大多数主题都是响应式的，它们会自动适应移动浏览器，甚至 wordpress 默认主题 21 和 12 都是响应式的。

其次，大多数高端移动浏览器都是为了改变网站的外观，只是为了方便用户和刺激开发人员（笑）

好吧，我建议，请检查这个主题是否响应，如果是，请将其设为静态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T00:13:36.870

我只是想出了如何做到这一点。我无意中发现，当您在 GoDaddy 中设置域转发（并使用屏蔽）时，当您在手机上访问域时，它总是会显示该站点的桌面版本。现在，您不想为想要成为“非移动”的每个网站购买不同的域。因此，只需设置一个子域并将其转发到您的网站（使用屏蔽）。当您在手机上访问该子域时，它将显示完整的桌面版本。希望这对您有帮助，就像对我有帮助一样:)

# php - CSS: Positioning of individual images

> ID：12999644
> 
> 赞同：1
> 
> 时间：2012-10-21T16:16:22.117
> 
> 标签：php, css

I am building a comics website, but am having trouble aligning the images the way I want.

I'm going for this:

*   I'm trying to get the comics in a row like this (blue)

![enter image description here](../Images/7bb967a7f327fea4cff40b30a0408338.png)

But all the images are coming out on top of each other:

![enter image description here](../Images/c4cf3492eb1ba58ef26db420247ece97.png)

I thought my CSS was correct...

```
*{
 margin: 0;
 padding: 0;
 }

 body {
background: gray;
text-align: center;
 }

 #wrapper {
width: 960px;
margin: 0 auto;
text-align: left;
background: white;
 }

 #comics {
/*top, right, bottom, left*/
margin: 50px 100px 50px 100px;
 }

 .comicBG {
position: absolute;
border: 1px dotted black;
background: #99FF33;
padding: 25px;
  } 
```

**PHP:**

```
 echo   '<td>';
 echo   '<span class="comicBG"><a href="./templates/viewcomic.php?id=' . $row['imgid'] .  '">
 <img src="' . $thumbpath.$row['imgthumb'] . '"/></a>' . 
 '<br /><a href="./templates/viewcomic.php?id=' . $row['imgid'] .  '">' .     $row['imgtitle'] . '</a></span>';
 echo   '</td>'; 
```

Does anyone know the best way to position individual data elements (like the images)? Should I be using a table, or a list?

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:20:33.910

我会使用无序列表。您会在同一个位置看到所有图像，因为您已将它们的位置设置为绝对位置并且您没有设置任何坐标。

您可以删除 position:absolute 并且图像应该成行。如果您使用无序列表，您可以将 li 浮动到左侧。

# sql - SQL: Why this error when trying to create a table in SQL?

> ID：12999646
> 
> 赞同：1
> 
> 时间：2012-10-21T16:16:36.093
> 
> 标签：sql, oracle

I am new to SQL and was trying to create a basic emp table to learn a bit. When I write the query and try to execute it, I keep getting the message "ORA-00907: missing right parenthesis". However I feel that I have included a pair of braces for each function. Could anyone please help me to figure out the issue and if possible could correct me if I am wrong??

Below is the sample

```
SQL> create table emp
  2  (emp id number(4),
  3  first name varchar2(25),
  4  last name varchar2(25),
  5  phone number number (10),
  6  department id number (4),
  7  job id number (4),
  8  salary number (6,2),
  9  commission_pct number (4,2),
 10  manager id number (4);
(emp id number (4),
        *
ERROR at line 2:
ORA-00907: missing right parenthesis 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T16:19:21.803

您在第 2 行有一个开始括号；

```
(emp id number(4),
^ 
```

没有在第 10 行关闭；

```
manager id number (4);
                     ^missing 
```

此外，您的列名中不能有空格而不引用它们。我建议用`_`不必在任何地方引用它们来替换空格。

```
SQL> create table emp
  2  (emp_id number(4),
  3  first_name varchar2(25),
  4  last_name varchar2(25),
  5  phone_number number (10),
  6  department_id number (4),
  7  job_id number (4),
  8  salary number (6,2),
  9  commission_pct number (4,2),
 10  manager_id number (4)); 
```

[SQLfiddle 测试](http://sqlfiddle.com/#!4/d58e2/1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T16:28:50.307

我在这里发现了3个错误。

1.  在 SQL 中，您必须使用`numeric`而不是数字。
2.  你不能在字段中保留空格。
3.  您需要关闭查询的大括号端，

代码：

```
 create table emp
       (emp_id numeric(4),
        first_name varchar(25),
        lastname varchar(25),
        phone_number numeric (10),
        department_id numeric (4),
        job_id numeric (4),
        salary numeric (6,2),
        commission_pct numeric (4,2),
        manager_id numeric (4)) 
```

这是[SQL Fiddle 演示](http://sqlfiddle.com/#!2/1aff3)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T16:19:31.777

你的列上有空格，如果你想在桌子上留下空格，用双引号括起来`"`

```
create table emp
(
   "emp id" number(4), 
   "first name" varchar2(25),
   .....
); 
```

但最好的方法是创建列名而不在其上添加空格。

```
create table emp
(
   empID number(4), 
   firstName varchar2(25),
   .....
); 
```

# html - Change Color of Fonts in DIV (CSS)

> ID：12999649
> 
> 赞同：30
> 
> 时间：2012-10-21T16:16:47.940
> 
> 标签：html, css

I am trying to change the color and size of H2 font and H2 link fonts based on the div they are in but have not been successful. What am I doing wrong?

```
 <style>
h2 {
color:fff;
font-size: 20px;
}
social.h2 {
color:pink;
font-size: 14px;
}
social.h2.h2color {
color:purple;
font-size: 10px;
}
tv.h2 {
color:green;
font-size: 14px;
}
tv.h2.h2color {
color:orange;
font-size: 10px;
}
 </style>

 <h2>List of Companies </h2>
 <div class="social">

 <h2>     <A href="http://www.facebook.com">Facebook     </a>
 <span class="h2color">Found in 2004     </span>     </h2> 
 blah blah blah 

 <h2>     <A href="http://www.twitter.com">Twitter     </a>
 <span class="h2color">Found in 2007     </span>     </h2>
 blah blah blah 

 </div>

 <div class="tv">

 <h2>     <A href="http://www.fox.com">Fox     </a>
 <span class="h2color">Found in 2004     </span>     </h2> 
 blah blah blah 

 <h2>     <A href="http://www.nbc.com">NBC     </a>
 <span class="h2color">Found in 2007     </span>     </h2>
 blah blah blah 
 </div> 
```

I am trying to make it look like this:

![enter image description here](../Images/eb8a2b9fff6a72ab2440a65e6618e3e8.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-21T16:22:15.327

您的第一个 CSS 选择器——<code>social.h2——正在“h2”类中寻找“social”元素，例如：

```
<social class="h2"> 
```

类选择器以点 ( `.`) 开头。此外，使用空格 ( `) 表示一个元素在另一个元素之内。要在类中查找`<h2>`元素的后代`social`，请尝试以下操作：`

 ````
.social h2 {
  color: pink;
  font-size: 14px;
} 
```

为了更好地理解 CSS 选择器以及它们如何用于引用您的 HTML，我建议[阅读 CodeAcademy 中的交互式 HTML 和 CSS 教程](http://www.codecademy.com/tracks/htmlcss)。我希望这有助于为您指明正确的方向。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T16:54:21.920

做链接，你可以做

```
.social h2 a:link {
  color: pink;
  font-size: 14px;   
} 
```

您也可以更改悬停、已访问和活动链接样式。只需将“链接”替换为您想要的样式即可。您可以在 w3schools 页面[CSS 链接](http://www.w3schools.com/css/css_link.asp)了解更多信息。`

# linux - How to remove non UTF-8 characters from text file

> ID：12999651
> 
> 赞同：93
> 
> 时间：2012-10-21T16:16:55.300
> 
> 标签：linux, bash, text, utf-8, character-encoding

I have a bunch of Arabic, English, Russian files which are encoded in utf-8\. Trying to process these files using a Perl script, I get this error:

```
Malformed UTF-8 character (fatal) 
```

Manually checking the content of these files, I found some strange characters in them. Now I'm looking for a way to automatically remove these characters from the files.

Is there anyway to do it?

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-06-11T15:51:45.607

这个命令：

```
iconv -f utf-8 -t utf-8 -c file.txt 
```

将清理您的 UTF-8 文件，跳过所有无效字符。

```
-f is the source format
-t the target format
-c skips any invalid sequence 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:50:33.283

[`iconv`](http://linux.die.net/man/1/iconv) 可以做到

```
iconv -f cp1252 foo.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:15:20.150

您的方法必须逐字节阅读，并完全理解和欣赏字符的字节构造。最简单的方法是使用一个可以读取任何内容但只输出 UTF-8 字符的编辑器。文本板是一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-14T00:22:59.223

这里或任何其他类似问题的方法都不适合我。最后，只需在 Sublime Text 2 中打开文件。转到文件 > 使用编码重新打开 > UTF-8。将文件的全部内容复制到一个新文件中并保存。

可能不是预期的解决方案，但把它放在这里以防它帮助任何人，因为我已经为此苦苦挣扎了几个小时。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-10-29T15:32:06.533

```
cat foo.txt | strings -n 8 > bar.txt 
```

将完成这项工作。

# iphone - Contentoffset for Tapped imageview in scrollview

> ID：12999652
> 
> 赞同：0
> 
> 时间：2012-10-21T16:17:08.570
> 
> 标签：iphone, imageview, ios6, scrollview, contentoffset

I am trying to save the tapped image to a photo album, using contentOffset to detect which image object is tapped to save, but it always saves the last imageObject instead.

Here is how I try to calculate contentOffset for tapped image view in scrollView:

```
(void)viewDidLoad

{
UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
imageScrollView.delegate = self;
imageScrollView.pagingEnabled = YES;
for (int i = 0; i < 61; i++) {

    CGFloat xOrigin = i * 320;

    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];

    [myButton addTarget:self action:@selector(dismissView:) forControlEvents:UIControlEventTouchUpInside];

    myButton.frame = CGRectMake(xOrigin, 10, 60, 35);

    [myButton.layer setMasksToBounds:YES];

    [myButton.layer setCornerRadius:10.0f];

    myButton.layer.borderWidth = 2;

    myButton.layer.borderColor = [[UIColor whiteColor] CGColor];

    [myButton setTitle:@"Done" forState:UIControlStateNormal];

    myButton.backgroundColor = [UIColor clearColor];

    NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];

UIImage *image = [UIImage imageNamed:imageName];

    _imageView = [[[UIImageView alloc] initWithImage:image]autorelease]; 
     _imageView.frame = CGRectMake(xOrigin, 0, 320, 480);

    _imageView.tag = i;

    [_imageScrollView viewWithTag:i+1];

    UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc]
                                                       initWithTarget:self
                                                       action:@selector(handleLongPress:)];

    imageScrollView.userInteractionEnabled = YES;

    [imageScrollView addGestureRecognizer:gestureRecognizer];
    gestureRecognizer.delegate = self;
    [gestureRecognizer release];

    [imageScrollView addSubview:_imageView];

    [imageScrollView addSubview:myButton];

}

imageScrollView.contentSize = CGSizeMake(320 * 61 , 480);

[self.view addSubview:imageScrollView];

  }

 - (void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

if (gestureRecognizer.state == UIGestureRecognizerStateBegan){
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Save Photo", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
   [actionSheet showInView:self.view];
    [actionSheet release];

}}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

switch (buttonIndex) {
    case 0:

        [self performSelector:@selector(LongPress:) withObject:nil];

       break;

    default:
        break;

}}

- (void)LongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

CGPoint offset = _imageScrollView.contentOffset;

int imageView = floor((Offset.x - imageView / 320) / imageView) + 1;
UIImage* image = [(UIImageView*)[_imageScrollView viewWithTag:imageView] image];

UIImageWriteToSavedPhotosAlbum(image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);
 } 
```

I expected this code to save the tapped image, but it saves the last image view from the scrollview instead.

Please let me know if I am doing it incorrectly, and if I am still missing something. Thanks for the help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:48:08.273

原因在于`viewDidLoad`您正在使用

```
_image = [UIImage imageNamed:imageName]; 
```

我认为这是类中的全局变量，您正在使用此对象将图像保存到相册。由于它是循环图像的最后计数中的全局变量，因此将指向它，因此您始终会保存最后一张图像。

`_image`您可以通过在 for 循环中进行本地化来修复它。在设置标签时，使用标签可以从 scrollView 获取 imageView/image。你可以有这样的

```
//your imageView in longPress function has the selected imageView's tag
UIImage* selImage = [(UIImageView*)[imageScrollView viewWithTag:imageView] image]; 
```

这应该适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:16:57.510

```
 int imageView = floor((Offset.x - imageView / 320) / imageView) + 1; 
```

通过这条线

```
 int imageView = (int)(scrollView.contentOffset.x / scrollView.frame.size.width); 
```

# php - 如何在 mysql 中操作数组值（串联的反向）

> ID：12999654
> 
> 赞同：0
> 
> 时间：2012-10-21T16:17:28.267
> 
> 标签：php, mysql, reverse, concat-ws

在 MySQL 中，我使用函数 CONCAT_WS 向文本字段添加值。

```
 UPDATE table SET `textfield`= >>CONCAT_WS('textfield',$randomnumber)<< 
```

现在我在文本字段（随机数）中有以下条目，例如：

> 18、20、30、20、10

现在我想使用函数 CONCAT_WS 的反向版本。例如，当我得到 20 号（带有随机 PHP 函数）时，我只想删除行中的最后 20 个。

> 18, 20, 30, 20, 10 => 18, 20, 30, 10

当我有一个 MySQL 表，每个数组值都有一行而不是 MySQL 文本字段数组时，我可以这样做：

```
DELETE FROM table WHERE `textfield`='20' >>LIMIT 1<< 
```

我怎么能做同样的事情，但是使用我直接在数据库中操作的 mySQL 数组。例如像这样：

```
UPDATE table SET `textfield`= >>DECONCAT_WS('textfield',20)<< 
```

但太糟糕了，这不是一个有效的代码。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:45:00.857

我所知：

*   MySQL中没有这样的功能
*   MySQL中没有像*数组这样的数据类型*
*   有一些[与集合相关的字符串函数](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html)，这可能会有所帮助，但这些函数只能使用逗号作为分隔符，并没有专门针对这个问题。

# data-dump - User behaviors analysis, stackoverflow public data dump

> ID：12999655
> 
> 赞同：2
> 
> 时间：2012-10-20T21:41:05.097
> 
> 标签：data-dump

I have a question - what would be the best way to figure out in which timezone particular user is situated based on the `location` field data? It seems like considerable amount of users have this field populated with some data, the form, however, is far from being normalized.

While I am figuring out ways to normalize users locations and infer timezones, I wonder, if someone did it before and could share some experience, or maybe (ideally) there is some magic webservice which I can ask for timezones by a given location?

So far I am running through fairly simple process - tokenizing the field, sorting, grouping by frequencies and assigning timezones manually based on my best knowledge.

# php - Check if a file was included or loaded

> ID：12999658
> 
> 赞同：56
> 
> 时间：2012-10-21T16:17:51.813
> 
> 标签：php

Is there any elegant way to check if a file was included by using `include`/`include_once`/`require`/`require_once` or if the page was actually loaded directly? I'm trying to set up a testing file inside class files while I'm creating them.

I'm looking for something similar to Python's `if __name__ == "__main__":` technique. Without setting globals or constants.

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-21T16:29:14.523

引用自：[如何知道是否通过 require_once() 调用了 php 脚本？](https://stackoverflow.com/questions/4545878/how-to-know-if-php-script-is-called-via-require-once)

> 我正在寻找一种方法来确定文件是否已被包含或直接调用，所有这些都来自文件中。在我的探索中的某个时刻，我通过了这个线程。从 PHP 手册中检查此站点和其他站点和页面上的各种其他线程，我得到启发并想出了这段代码：

```
if (basename(__FILE__) == basename($_SERVER["SCRIPT_FILENAME"])) {
  echo "called directly";
} else {
  echo "included/required";
} 
```

> 本质上，它比较当前文件的名称（可能包含的文件）是否与正在执行的文件相同。

信用：@Interwebs 牛仔

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-21T16:19:54.627

您可以通过[get_included_files](http://php.net/manual/en/function.get-included-files.php)执行此操作— 返回一个包含包含或所需文件名称的数组并验证`__FILE__`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-21T17:26:30.823

I appreciate all the answers, but I didn't want to use any one's solution here, so I combined your ideas and got this:

```
<?php
    // place this at the top of the file
    if (count(get_included_files()) == 1) define ('TEST_SUITE', __FILE__);

    // now I can even include bootstrap which will include other
    // files with similar setups
    require_once '../bootstrap.php'

    // code ...
    class Bar {
        ...
    }
    // code ...

    if (defined('TEST_SUITE') && TEST_SUITE == __FILE__) {
        // run test suite here  
    }
?> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-01-05T17:44:23.847

```
if (defined('FLAG_FROM_A_PARENT'))
// Works in all scenarios but I personally dislike this

if (__FILE__ == get_included_files()[0])
// Doesn't work with PHP prepend unless calling [1] instead.

if (__FILE__ == $_SERVER['SCRIPT_FILENAME'])
// May break on Windows due to mixed DIRECTORY_SEPARATOR

if (basename(__FILE__) == basename($_SERVER['SCRIPT_FILENAME']))
// Doesn't work with files with the same basename but different paths

if (realpath(__FILE__) == realpath($_SERVER['SCRIPT_FILENAME']))
// Seems to do the trick as long as document root is properly configured 
```

注意：在 WAMP 服务器上，虚拟主机有时会继承默认的文档根设置，从而导致`$_SERVER['DOCUMENT_ROOT']`显示错误的路径。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-01-06T12:34:03.073

```
<?php
    if (__FILE__ == $_SERVER['SCRIPT_FILENAME'])
    {
        //file was navigated to directly
    }
?> 
```

取自 mgutt 对[此处](https://stackoverflow.com/questions/2397004/php-check-if-a-file-is-loaded-directly-instead-of-including?newreg=86b536715ee341f1a3d1bebed6993ca0)略有不同的问题的回答。重要的是要注意，如果脚本是从命令行运行的，这不起作用，但除此之外它的功能与 python 的完全一样

```
if __name__ == '__main__': 
```

据我所知

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-10-21T16:23:16.837

它们无法将它们分开，`include/include_once/require/require_once`但是 php 具有`get_included_files`并且`get_required_files`是相同的，并且只返回所有包含文件的数组。`required`如果它的或，它不会将它分开`included`。

例子`a.php`

```
include 'b.php';
include_once 'c.php';
require 'd.php';
var_dump(get_required_files()); 
```

输出

```
array
  0 => string '..\lab\stockoverflow\a.php' (length=46) <---- Returns current file
  1 => string '..\lab\stockoverflow\b.php' (length=46)
  2 => string '..\lab\stockoverflow\c.php' (length=46)
  3 => string '..\lab\stockoverflow\d.php' (length=46) 
```

但是你可以做类似的事情

```
$inc = new IncludeManager($file);
var_dump($inc->find("b.php")); // Check if a file is included
var_dump($inc->getFiles("require_once")); // Get All  Required Once 
```

使用的类

```
class IncludeManager {
    private $list = array();
    private $tokens = array();
    private $find;
    private $file;
    private $type = array(262 => "include",261 => "include_once",259 => "reguire",258 => "require_once");

    function __construct($file) {
        $this->file = $file;
        $this->_parse();
    }

    private function _parse() {
        $tokens = token_get_all(file_get_contents($this->file));
        for($i = 0; $i < count($tokens); $i ++) {
            if (count($tokens[$i]) == 3) {
                if (array_key_exists($tokens[$i][0], $this->type)) {
                    $f = $tokens[$i + 1][0] == 371 ? $tokens[$i + 2][1] : $tokens[$i + 1][1];
                    $this->list[] = array("pos" => $i,"type" => $this->type[$tokens[$i][0]],"file" => trim($f, "\"\'"));
                }
            }
        }
    }

    public function find($find) {
        $finds = array_filter($this->list, function ($v) use($find) {
            return $v['file'] == $find;
        });

        return empty($finds) ? false : $finds;
    }

    public function getList() {
        return $this->list;
    }

    public function getFiles($type = null) {
        $finds = array_filter($this->list, function ($v) use($type) {
            return is_null($type) ? true : $type == $v['type'];
        });
        return empty($finds) ? false : $finds;
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-09-09T12:39:46.063

`get_included_files()`返回数组，其中 0 索引表示第一个“包含”文件。因为直接运行在这个术语中意味着“包含”，所以您可以简单地检查第一个索引是否相等`__FILE__`：

```
if(get_included_files()[0] == __FILE__){
    do_stuff();
} 
```

这不能在 PHP 4 上工作，因为 PHP 4 没有在这个数组中添加运行文件。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-23T14:58:24.677

# 工作解决方案：

```
$target_file = '/home/path/folder/file.php'; // or use __FILE__

if ($x=function($e){return str_replace(array('\\'), '/', $e);}) if(in_array( $x($target_file), array_map( $x ,  get_included_files() ) ) )
{
    exit("Hello, already included !");
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-08-19T04:17:17.923

这是一个不同的想法。只需在需要时包含该文件。在包含文件中，您可以决定是否需要包含内容：

```
<?php
if (defined("SOME_UNIQUE_IDENTIFIER_FOR_THIS_FILE"))
    return;
define("SOME_UNIQUE_IDENTIFIER_FOR_THIS_FILE", 1);

// Rest of code goes here 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-02T02:59:25.023

我认为这不是`get_included_files`完美的解决方案，如果您的主脚本在检查之前包含其他一些脚本怎么办？我的建议是检查是否`__FILE__`等于`realpath($argv[1])`：

```
<?php
require('phpunit/Autoload.php');

class MyTests extends PHPUnit_Framework_TestCase
{
    // blabla...
}

if (__FILE__ == realpath($argv[0])) {
    // run tests.
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-30T17:10:11.727

当我遇到这个问题时，我采取了类似的方法。我找到的解决方案是在 include_once 方法中根据需要加载每个文件。希望这可以帮助。

```
$FILES = get_included_files();  // Retrieves files included as array($FILE)
$FILE = __FILE__;               // Set value of current file with absolute path
if(!in_array($FILE, $FILES)){   // Checks if file $FILE is in $FILES
  include_once "PATH_TO_FILE";  // Includes file with include_once if $FILE is not found.
} 
```

我建立了以下功能来检查加载的文件：

```
ARRAY_DUMP($FILES);

function ARRAY_DUMP($array){
  echo "
    <span style='font-size:12px;'>".date('h:i:s').":</span>
    <pre style='font-size:12px;'>", print_r($array, 1), "</pre>
  ";
} 
```

输出：

```
currentArray
(
  [0] => /home/MY_DOMAIN/hardeen/index.php
  [1] => /home/MY_DOMAIN/hardeen/core/construct.php
  [2] => /home/MY_DOMAIN/hardeen/core/template.php
  [3] => /home/MY_DOMAIN/hardeen/bin/tags.php
  [4] => /home/MY_DOMAIN/hardeen/bin/systemFunction.php
) 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2016-03-13T23:29:51.610

太简单了..我做了这样的事情：

```
//code for file.php
if (!isset($file_included)){
   echo "It was loaded!";
} else {
  echo "It was included!";
}

//code for loader.php
//proves that atleast loader.php has loaded,
//not the file we targeted first..
$file_included = true;
include("../file.php"); 
```

就是这样......就像在python中一样简单。

# facebook - Facebook app, how to have a online version with a local version?

> ID：12999660
> 
> 赞同：-1
> 
> 时间：2012-10-21T16:17:56.480
> 
> 标签：facebook

Hi so i recently uploaded my facebook app. so i can only input 1 url for Website with Facebook Login. So how do i keep working on my local version while still serving the online version??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:30:48.597

从

`www.facebook.com/developers`

# eclipse - Delete next camelcase word segment?

> ID：12999661
> 
> 赞同：0
> 
> 时间：2012-10-21T16:18:00.663
> 
> 标签：eclipse, camelcasing

I frequently use the `Ctrl``Delete` command to delete the next word.

I was wondering, is there an equivalent keyboard combination in Eclipse to delete the next word in a camelcase word?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:02:41.510

实际上`Ctrl``Delete`删除到下一个驼峰式单词边框，而不是空白单词边框（在 Java 编辑器中）。

因此，对于删除下一个驼峰式单词部分，您可以使用序列`Ctrl``Right/Left`（当前或下一个驼峰式单词部分之前的位置）`Ctrl``Delete`，.

# jquery - Simple jQuery lightbox is not working on Rails app. Help please?

> ID：12999664
> 
> 赞同：0
> 
> 时间：2012-10-21T16:18:05.690
> 
> 标签：jquery, ruby-on-rails, erb, sass

I wanted to ask why my Lightbox isn't working. In my .html.erb file, I have:

```
<a href="http://cdn.geekwire.com/wp-content/uploads/2011/10/patel-neil1-300x200.jpg?7794fe" class="thumbnail lightbox">
<img src="http://cdn.geekwire.com/wp-content/uploads/2011/10/patel-neil1-300x200.jpg?7794fe" alt="">
</a> 
```

And in my .css.scss file I have:

```
#overlay {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: black url(loader.gif) no-repeat scroll center center;
}

#lightbox {
    position: fixed;
} 
```

Finally, for my jQuery:

```
$(document).ready(function(){

    $('#toggleButton').click(function() {
        if ($('#experiment').is(':visible')) {
            $('#experiment').hide();
        } else {
            $('#experiment').show();
        }
    });

    alert('working!');

    $('a.lightbox').click(function(e) {
        // hide scrollbars!
        $('body').css('overflow-y', 'hidden');

        $('<div id="overlay"></div>')
            .css('top', $(document).scrollTop())
            .css('opacity', '0')
            .animate({'opacity': '0.5'}, 'slow')
            .appendTo('body');

        $('<div id="lightbox"></div>')
            .hide()
            .appendTo('body');

        $('<img>')
            .attr('src', $(this).attr('href'))
            .load(function() {
                positionLightboxImage();
            })
            .click(function() {
                removeLightbox();
            })
            .appendto('#lightbox');

        return false;
    });

    function positionLightboxImage() {
        var top = ($(window).height() - $('#lightbox').height()) / 2;
        var left = ($(window).width() - $('#lightbox').width()) / 2;
    $('#lightbox')
        .css({
            'top': top + $(document).scrollTop(),
            'left': left
        })
        .fadeIn();  
    }

    function removeLightbox() {
        $('#overlay, #lightbox')
            .fadeOut('slow', function() {
                $(this).remove();
                $('body').css('overflow-y', 'auto'); // show scrollbars!
            });
    }

}); 
```

I am using the Chrome web inspector to debug errors in the Javascript, and now I'm not throwing any at all, so I don't see what's wrong here? Especially since the jQuery alert I put in DOES actually pop up, and the hide functionality works... I'm stumped as to what the corrective path for my lightbox would be. :\ Any help is greatly appreciated, thank you!

![enter image description here](../Images/468cb140376d3c04d4794dee5c4695d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:01:30.633

看起来你的 jquery 有点弱

例如，你在哪里写这个：

```
$('<div id="overlay"></div>') 
```

正确的方法可能是

```
$('#overlay') 
```

尝试像上面那样重做，看看会发生什么

# asp.net - 如何获取/跟踪 asp.net 传出响应文本

> ID：12999665
> 
> 赞同：1
> 
> 时间：2012-10-21T16:18:08.760
> 
> 标签：asp.net, stream, response

我的服务器似乎有时会向 webclients 返回错误的 html

我在 VS 2012 中使用 asp.net 4。在 IIS Express 上进行调试。

为了调试这个问题，我想跟踪 asp.net 发送的 html

在`Global_asax_PreRequestHandlerExecute`我可以访问响应代码和状态，但似乎无法找到正文 html

我试着读`OutputStream`这样的：

```
Dim ms = New MemoryStream
CurContext.Response.OutputStream.CopyTo(ms)
Dim sr = New StreamReader(ms)
Dim rtext = sr.ReadToEnd 
```

但这会引发`NotSupportedException` `Stream does not support reading.`

有任何想法吗？

多谢

**编辑**

我现在确定测试了

我在页面上有一个带有以下属性的标签

```
<asp:label id="l" runat="server" Font-Bold="true" Font-Size="X-Large" BackColor="Pink"/> 
```

当在浏览器中显示时，它显示得很好，如下所示：

```
<span id="C1_FormView1_l" style="background-color:Pink;font-size:X-Large;font-weight:bold;">Processed</span> 
```

但是当我用 webclient 下载时，我得到了

```
<span id="C1_FormView1_l"><b><font size="6">Processed</font></b></span> 
```

为什么背景色会丢失？顺便说一句，为什么不使用更现代的`style`属性而不是添加`b`和`font`

如果我可以阅读 ResponseStream，我至少会知道它在哪里丢失，即使我现在不知道。

非常感谢你

PS如果.net 4.5对此更好，那么我可能会考虑更改目标框架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:49:16.287

您可以通过在页面/站点主文件上覆盖 Render 来获取 HTML（并对其进行修改）。

```
 protected override void Render(System.Web.UI.HtmlTextWriter writer)
        {
            using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
            {
                using (System.IO.StreamWriter sw = new System.IO.StreamWriter(ms))
                {
                    HtmlTextWriter tw = new HtmlTextWriter(sw);
                    base.Render(tw);
                    tw.Flush();
                    ms.Position = 0;
                    using (System.IO.StreamReader sr = new System.IO.StreamReader(ms))
                    {
                        string yourHTML = sr.ReadToEnd();
                        // do stuff with yourHTML
                        Response.Write(yourHTML);
                        sr.Close();
                        tw.Dispose();
                    }
                }
            }
        } 
```

在VB中

```
Protected Overrides Sub Render(ByVal writer As System.Web.UI.HtmlTextWriter)
        Using ms As New System.IO.MemoryStream()
            Using sw As New System.IO.StreamWriter(ms)
                Dim tw As HtmlTextWriter = New HtmlTextWriter(sw)
                MyBase.Render(tw)
                tw.Flush()
                ms.Position = 0
                Using sr As New System.IO.StreamReader(ms)
                    Dim yourHTML As String = sr.ReadToEnd()
                    'do stuff with yourHTML'
                    Response.Write(yourHTML)
                    sr.Close()
                    tw.Dispose()

                End Using
            End Using
        End Using
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:25:59.713

这在技术上并不能回答我原来的问题，但它确实解决了我遇到的问题

问题是html没有正确呈现

我现在记得 aspx 具有自适应渲染，所以我认为请求中使用的用户代理可能是罪魁祸首

我将代码更改为：

```
 Dim myReq As HttpWebRequest = WebRequest.Create(MailUrl)
 myReq.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1"
 Dim resp As HttpWebResponse = myReq.GetResponse
 Dim stream = resp.GetResponseStream
 Dim rdr = New StreamReader(stream)
 Dim BodyText = rdr.ReadToEnd 
```

现在 html 以正确的现代 Html5/Css3 标记呈现

感谢您的帮助和指导。

# file - ffmpeg：哪些文件格式支持标准输入？

> ID：12999674
> 
> 赞同：20
> 
> 时间：2012-10-21T16:18:47.460
> 
> 标签：file, stream, ffmpeg, stdout, stdin

我知道 ffmpeg 能够`stdin`从磁盘读取数据，而不是使用`ffmpeg -i -`. 是否支持所有文件格式？如果不是，是否有支持哪些文件格式的列表？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-21T17:16:27.117

您需要运行`ffmpeg -protocols`以确定`pipe`您的 ffmpeg 版本是否支持协议（从标准输入和标准输出读取和写入），然后`ffmpeg -formats`查看支持的格式列表。在下面的摘录中，您将看到输出管道上的注释，它必须可用于某些协议。对于输入协议，它没有这样的限制。

来自`man ffmpeg-protocols`：

> **协议**
> 
> 协议是 FFmpeg 中的配置元素，允许访问需要使用特定协议的资源。
> 
> 当您配置您的 FFmpeg 构建时，所有支持的协议都默认启用。您可以使用配置选项列出所有可用的选项`--list-protocols`。
> 
> 您可以使用配置选项禁用所有协议 `--disable-protocols`，并使用该选项选择性地启用协议`--enable-protocol=PROTOCOL`，或者您可以使用该选项禁用特定协议`--disable-protocol=PROTOCOL`。
> 
> ff* 工具的选项`-protocols`将显示支持的协议列表。
> 
> 以下是对当前可用协议的描述。... 管道
> UNIX 管道访问协议。
> 
> 允许从 UNIX 管道读取和写入。
> 
> 接受的语法是：
> 
> ```
>  pipe:[<number>] 
> ```
> 
> number 是与管道的文件描述符对应的数字（例如，0 表示标准输入，1 表示标准输出，2 表示标准错误）。如果未指定 number，默认情况下，stdout 文件描述符将用于写入，stdin 用于读取。
> 
> 请注意，某些格式（通常是 MOV）要求输出协议是可搜索的，因此它们会因管道输出协议而失败。

# java - 将 txt 文件读入数组，然后找到最小值最大值和平均工资

> ID：12999675
> 
> 赞同：0
> 
> 时间：2012-10-21T16:18:48.553
> 
> 标签：java, arrays

看起来这是这类问题的一周。在阅读了所有新的和几个旧的之后，我同样感到困惑！

我有一个包含 5 名员工的文本文件，每个员工的姓名下方都列出了 10 个薪水值。我要阅读这个文件，找到并显示每个人的员工姓名、最低工资、最高工资和平均工资。我必须有 3 个循环：一个用于控制读取文件，一个用于将数据加载到数组中，一个用于计算。我必须在一行上打印每个人的信息，而且我必须允许小数点四舍五入到小数点后 2 位，这显然`Math.round`是我从未听说过的！

我很尴尬地向您展示我拥有的乱七八糟的代码，因为它并不多，但是在阅读完所有内容后，我什至不知道我是否开始正确。我不知道我是否对如何进行有正确的想法。感谢您的帮助。

**更新代码：**再次！

```
 import javax.swing.*;
import java.io.*;
public class MinMaxSalary3
{
    public static void main(String args[])throws Exception
    {
        // Declare input file to be opened.
        FileReader fr = new FileReader ("salary.dat");
        BufferedReader br = new BufferedReader (fr);
        //General Declarations
        final String TITLE = "Employee's Salary Report";
        String employeeName, salaryString;
        double avgSalary=0.0;
        double totalSalary = 0.0;
        double sum = 0.0; 
        // Declare Named Constant for Array.
        final int MAX_SAL = 10;     
        // Declare array here.
        int salary[] = new int[MAX_SAL];

         System.out.println (TITLE);
            while ((employeeName = br.readLine()) != null)
            {
               System.out.print ("" + employeeName);

        // Use this integer variable as your loop index.
                int loopIndex;                  
        // Assign the first element in the array to be the minimum and the maximum.
                double minSalary = salary[1];
               double maxSalary = salary[1]; 
        // Start out your total with the value of the first element in the array.
                sum = salary[1]; 
            // Write a loop here to access array values starting with number[1]
                for (loopIndex = 1; loopIndex < MAX_SAL ;loopIndex++)
        // Within the loop test for minimum and maximum salaries.
                {
                    if  (salary[loopIndex] < minSalary)
                    {
                        minSalary = salary[loopIndex];

                   if (salary[loopIndex] > maxSalary)

                    maxSalary = salary[loopIndex];

                    }   

                        {
            // Also accumulate a total of all salaries.
                       sum += sum; 
          // Calculate the average of the 10 salaries.
                            avgSalary = sum/MAX_SAL;
                        }
            //  I know I need to close the files, and end the while loop and any other loops. I just can't think that far right now. 
            }
            {
        // Print the maximum salary, minimum salary, and average salary.
            System.out.println ("Max Salary" + maxSalary);  
            System.out.println ("Min Salary" + minSalary); 
            System.out.println ("Avg Salary" + avgSalary); 
            }

        System.exit(0);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:26:57.253

> 我必须有 3 个循环：一个用于控制读取文件，一个用于将数据加载到数组中，一个用于计算。

我在下面写的内容现在对你来说可能只是更花哨的东西，但如果你通过这门课，知道它可能会很有用。

另一种看待这个问题的方法是更加面向对象和更好的分解：您需要一个对象来保存数据、执行计算和渲染输出。你如何获得这些数据并不重要。今天是文件；下次可能是 HTTP 请求。

从 Employee 对象开始。我故意遗漏了许多您必须填写并弄清楚的细节：

```
package model;

public class Employee {
    private String name;
    private double [] salaries;

    public Employee(String name, int numSalaries) { 
        this.name = name;
        this.salaries = new double[numSalaries];
    }

    public double getMinSalary() {
        double minSalary = Double.MAX_VALUE;
        // you fill this in.
        return minSalary;
    };

    public double getMaxSalary() {
        double maxSalary = Double.MIN_VALUE;
        // you fill this in.
        return maxSalary;
    }

    public double getAveSalary() {
        public aveSalary = 0.0;
        if (this.salaries.length > 0) {
            // you fill this in.
        }
        return aveSalary;
    }
} 
```

这种方法的美妙之处在于您可以单独对其进行测试，而不必担心有关文件 I/O 的所有废话。把这个对象弄好，把它放在一边，然后处理下一块。最终，当您将所有这些较小的部分组装在一起时，您将获得一个干净的解决方案。

使用 JUnit 在没有文件 I/O 的情况下对其进行测试：

```
package model;

public class EmployeeTest {
    @Test
    public void testGetters() {
        double [] salaries = { 10000.0, 20000.0, 30000.0, 40000.0 };
        Employee testEmployee = new Employee("John Q. Test", salaries);
        Assert.assertEquals("John Q. Test", testEmployee.getName());
        Assert.assertEquals(10000.0, testEmployee.getMinSalary(), 1.0e-3);
        Assert.assertEquals(40000.0, testEmployee.getMaxSalary(), 1.0e-3);
        Assert.assertEquals(25000.0, testEmployee.getMinSalary(), 1.0e-3);     
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:18:28.750

在这种情况下，您要支持的方法是面向对象的方法。请记住，对象是相关数据的表示。考虑一个`Employee`可能有关于他们的薪水、姓名和他们工作的部门的信息（例如）。

但这只是*一个* `Employee`。您可能有*数百个*.

考虑创建一个员工模型。定义与其中之一最相关的内容。例如，他们都必须有名字，并且必须有薪水。

然后将选择处理查找有关Employees 集合的信息的逻辑——包括最低、最高和平均工资——*超出*通用Employee 对象的范围。

这个想法是这样的：

*   安`Employee`知道自己的一切。
*   开发人员有责任将多个员工联系在一起。

可能我对您的问题具体要查找的内容知之甚少-我什至不确定您是否可以使用对象，这确实很糟糕-但这绝对是一个开始。

* * *

至于你的编译错误：

*   `salary`是一个`double[]`。数组在其中包含许多不同的类型值`double`，但 a`double[]`不是直接 a `double`。从技术立场和语义立场来看，将非数组类型分配给数组类型是行不通的 - 您正在获取可以保存许多值的东西并尝试将其分配给可以保存一个值的容器。

    从您的代码示例中，您希望使用循环（带有循环变量`i`）来遍历 中的所有元素`salary`，并为它们分配一些值。使用 just`salary[0]`只修改第一个元素。

# android - 获取短信和电话号码并将其转移到另一个活动

> ID：12999676
> 
> 赞同：-1
> 
> 时间：2012-10-21T16:18:59.107
> 
> 标签：android, android-intent, sms, broadcastreceiver

我创建了监听短信并回复位置（纬度，经度）传入手机号码的应用程序。我`SMSReceiver`通过扩展创建类`BroadCastReceiver`.. 由于它不是一个`Activity`，我不能`intent`用来将消息传输到其他活动以读取位置。

`Intents`任何人都可以通过使用将 Sms(string) 发送给另一个来帮助我接收短信`Activity`。希望你能解决我的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:26:23.483

您可以从 SMSReceiver 启动服务 -

```
intent.setClass(context, SmsReceiverService.class);
intent.putExtra("latitude", latitude);
intent.putExtra("longitude", longitude);
SmsReceiverService.beginStartingService(context, intent); 
```

# java - Game App Client-Server：MySQL 记录“连接过多”，Linux 记录“100% CPU”

> ID：12999678
> 
> 赞同：2
> 
> 时间：2012-10-21T16:19:14.470
> 
> 标签：java, mysql, linux, jdbc, client-server

我正在开发一个带有客户端-服务器的游戏，这个游戏的客户端可以来自 Flash Web、J2ME 或 Android Mobile。每天有 300-400 名用户玩这个游戏。我面临头痛的问题，我花了很多天来解决它，但没有希望......当我在服务器 Linux（8 核处理器）上运行这个应用程序时：一天后这个应用程序消耗 CPU 大约 100%（使用一个核心100%），第二天它消耗CPU 300%，第二天500%......大约4-5天，我必须重新启动这个应用程序以防止它崩溃。在我的项目中，每个玩家我使用一个线程来传输数据（在客户端和服务器之间）并使用数据库进行操作，除此之外，我还使用许多线程来管理玩家的游戏或日志信息，这些线程在必要时还使用数据库进行操作. 每当玩家或线程想要获取一些信息或将一些东西保存到数据库中时，

```
getSomething(int id) {
    ...
    String sql = "SELECT * FROM mail WHERE id = ?";
    connection = ConnectionManager.getDbConnection();
    pstmt = connection.prepareStatement(sql);
    ....
    while (rs.next()) {
    ...
    }
    connection.close();
} 
```

这意味着如果有 400 个用户同时登录或保存内容，将创建 400 个连接来为每个用户获取或保存数据，并在完成查询后释放 400 个连接。我不确定这个策略是否好......或者它可能是我的问题的原因......

在我的日志中，有时会出现“连接太多...”的日志，这让我怀疑在我的应用程序中关闭连接，这可能导致 CPU 消耗超过 100%，未释放更多连接，更多 CPU 消耗...

现在我想我应该使用 JDBC 连接池来管理来自客户端的连接，并希望它可以解决我的问题......但我不确定，它不能工作......

所以，如果你有任何想法，请给我建议，非常感谢！

# arrays - Scala 中 Array.map(f: A => B) 的性能不佳

> ID：12999680
> 
> 赞同：7
> 
> 时间：2012-10-21T16:19:23.033
> 
> 标签：arrays, performance, scala, map, for-loop

请有人向我解释一下，为什么 Array.map(f: A=> B) 方法的实现方式比这段代码慢 5 倍以上：

```
val list = Array(1, 2, 3, 4, 5, 6, 7, 8, 9)
val newList = new Array[Int](size)

var j = 0  
while (j < size) {
  newList(j) = list(j)
  j += 1
} 
```

TraversableLike trait 提供的 Array 类中的方法 map(f: A=> B) 使用 Scala 'for loop' 来迭代输入 Array 对象的元素，当然这比使用 'while 循环要慢得多'。

Scala 版本：2.9.2 Java：jdk1.6.0_23 64bit windows

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T16:34:48.930

`map`是一个通用操作（还没有专门化）。因此，您必须在进出功能的过程中对操作进行装箱/拆箱。不出所料，它要慢得多。这是罪魁祸首，而不是使用的循环样式。

这样做的原因是为了代码的一致性和易于维护。由于有无数人无限细心地编写代码，每种方法都是手工制作的，以实现最佳速度，同时仍然是通用的。通用实用程序比速度更受青睐，因为您总是可以通过手动编写 while 循环来恢复速度，但如果它不是通用的并且您需要它，那么您就会陷入困境。

通过对原始集合进行操作来提高 Scala 的性能是一个目标，但可能不是 Scala 团队的首要目标。现在，如果您需要速度，请使用 while 循环。

# ios - 通过 AvPlayerItem 和 AvPlayer 流式传输时监控下载的字节数 - iOS

> ID：12999682
> 
> 赞同：0
> 
> 时间：2012-10-21T16:19:31.787
> 
> 标签：ios, stream, mp3, radio

我想在从 URL 流式传输 mp3 并将其打印到 IULabel 时监视下载的字节。我找不到任何简单的方法来做到这一点。

“AVPlayerItemAccessLog”呢，它有信息吗？我不知道如何使用它？有人知道如何获取此类信息吗？

以下是我播放流的代码：

```
-(void)play
{
    /*Allow radio to run in background*/
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
    [[AVAudioSession sharedInstance] setActive: YES error: nil]; 

    /*Gets the url fra sender*/
    NSString *urlString=  self.radioStation.url;
    NSURL *url = [NSURL URLWithString:urlString];

    /*Stop the radio if its play or have info*/
    if(self.avPlayerItem)
    {
        [self stop];

    }

    /*Sets the Avplayeritem*/
    self.avPlayerItem = [AVPlayerItem playerItemWithURL:url];

    /*Listen for changes in the avPlayerItem*/    
    [self.avPlayerItem addObserver:self forKeyPath:@"status" options:0 context:nil];   

    /*Sets the avplayer with avplayeritem*/
    self.avPlayer = [AVPlayer playerWithPlayerItem:self.avPlayerItem];

    /*Sends loading info to the nortification*/
    [[NSNotificationCenter defaultCenter] postNotificationName:@"Loading" object:self];

    /*Plays the radio*/
    [self.avPlayer play];
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T22:58:04.510

您需要在 AVPlayerItem 上使用 KVO 来获取此信息。像这样的东西：

```
[self.player.currentItem addObserver:self
                          forKeyPath:@"loadedTimeRanges"
                             options:NSKeyValueObservingOptionNew
                             context:NULL]; 
```

然后是标准的观察者方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    // Get the player item's loadedTimeRanges value here.
} 
```

不要忘记在释放播放器项目之前移除观察者。

# haskell - 在 Haskell 中使用分数

> ID：12999683
> 
> 赞同：0
> 
> 时间：2012-10-21T16:19:34.833
> 
> 标签：haskell, fractions, rational-numbers

继续上一个问题：

[Haskell 中的幂级数](https://stackoverflow.com/questions/12998635/power-series-in-haskell/12998779#12998779)

我正在尝试用 Haskell 编写幂级数，

```
e^x = 1 + x + x^2/2! + x^3/3! + ... 
```

这样它将输出

```
[1,1,1/2,1/6,...] 
```

我已经有一个没有'/（阶乘y）'的函数

```
factorial :: (Integral a) => a -> a
factorial 0 = 1 
factorial n = n * factorial (n - 1)

powerSrs x = 1 : powerSrsFunc[1..] where
        powerSrsFunc ( p: xs ) = 
            p : powerSrsFunc[  (x^y)%(factorial y)   | y <-xs ] 
```

但是，当我运行时出现错误

```
>take 5 (powerSrs 1)

<interactive>:34:9:
    Ambiguous type variable `a0' in the constraints:
      (Fractional a0)
        arising from a use of `powerSrs' at <interactive>:34:9-16
      (Integral a0)
        arising from a use of `powerSrs' at <interactive>:34:9-16
      (Num a0) arising from the literal `1' at <interactive>:34:18
    Probable fix: add a type signature that fixes these type variable(s)
    In the second argument of `take', namely `(powerSrs 1)'
    In the expression: take 5 (powerSrs 1)
    In an equation for `it': it = take 5 (powerSrs 1) 
```

再说一次，这是一个类型错误，我不明白。

@eakron 告诉我使用 Data.Ratio 包，但 (%) 将打印一个比率，如下所示：

```
2%3 
```

但我想要

```
2/3 
```

有人可以解释类型错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:00:14.123

在 的第一轮生成器之后`powerSrsFunc`， 的输入`powerSrsFunc`不再是 [2, 3..]。相反，输入将变为 [1%2, 1%6, ..]。显然它不能是 的输入`factorial`。

为什么不重写`powerSrc`更简单的呢？

```
powerSrs x = [ (x^y) % (factorial y) | y <- [0..] ] 
```

没有嵌套的无穷大生成器。更容易理解。

# sml - 在 sml 中将整数写入文件

> ID：12999688
> 
> 赞同：0
> 
> 时间：2012-10-21T16:19:54.357
> 
> 标签：sml, smlnj

textIO 签名中是否有输出以将整数写入文件？output 只写向量，outputsstring 写子字符串，而 output1 只写字符。我不使用向量的问题是我必须将每个整数写入输出文件中的一行。

我在 SML 上遇到了困难。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:51:04.943

要将 int 作为字符串写入文件，只需使用将其转换为字符串`Int.toString`，然后将字符串写入文件。

要将数字作为字节写入文件，请使用 BinIO 而不是 TextIO。顾名思义，TextIO 用于处理文本，而不是二进制数据。

# common-lisp - 放松保护 - 它是如何工作的

> ID：12999691
> 
> 赞同：4
> 
> 时间：2012-10-21T16:20:49.327
> 
> 标签：common-lisp, sbcl

我正在使用 sbcl 1.0.57.0 并想启动一个程序，通过`--eval`该程序应该生成一些输出，但如果出现未捕获的错误，它将退出。

我认为最简单的方法是使用 unwind-protect：

```
(unwind-protect (error 'simple-error) 
  (progn (FORMAT t "IAMREACHED~%") (sb-ext:exit))) 
```

`(sb-ext:exit)`应该执行，以防有未捕获的错误。

但事实并非如此！

```
* (unwind-protect (error 'simple-error) 

       (progn (FORMAT t "IAMREACHED~%") (sb-ext:exit)))

    debugger invoked on a SIMPLE-ERROR in thread
    #<THREAD "main thread" RUNNING {1002979193}>:
    (A SIMPLE-ERROR was caught when trying to print *DEBUG-CONDITION* when entering
    the debugger. Printing was aborted and the SIMPLE-ERROR was stored in
    SB-DEBUG::*NESTED-DEBUG-CONDITION*.)

    Type HELP for debugger help, or (SB-EXT:QUIT) to exit from SBCL.

    restarts (invokable by number or by possibly-abbreviated name):
      0: [ABORT] Exit debugger, returning to top level.

    (#:EVAL-THUNK)
    0] 0
    IAMREACHED 
```

我对 unwind-protect 的工作原理有什么误解？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T16:44:02.350

`UNWIND-PROTECT`是 Java 或 Python 中的子句的类似物`finally`，因此它不是一个包罗万象的子句，它将拦截任何未处理的条件。为此，您需要一个`HANDLER-CASE`带有处理程序子句的 type `CONDITION`。

`UNWIND-PROTECT`实际上适用于您的情况。唯一的“意外”行为是在执行主体**之前**调用了调试器`UNWIND-PROTECT`。这样做的原因是为了不丢失当前上下文并能够重新开始执行。它（可能）通过`HANDLER-BIND`. 您可以在 PCL 章节[“条件和重启”](http://www.gigamonkeys.com/book/beyond-exception-handling-conditions-and-restarts.html)中了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:31:47.400

也许您想禁用调试器，请参阅[SBCL Toplevel Options](http://www.sbcl.org/manual/Toplevel-Options.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T08:05:00.060

您可以使用 (ignore-errors) 来默默地忽略错误。或者您可以提前调用 sb-ext:disable-debugger 以仅在不启动调试器的情况下看到错误消息。

# php - Mod重写模式问题

> ID：12999692
> 
> 赞同：0
> 
> 时间：2012-10-21T16:21:00.447
> 
> 标签：php, mysql, regex, .htaccess

> **可能重复：**
> [在正则表达式中应该转义哪些文字字符？](https://stackoverflow.com/questions/5484084/what-literal-characters-should-be-escaped-in-a-regex)

```
RewriteRule ^profile/[A-Za-z_-\d\^\.]/*$ ./index.php?page=showuser&username=$1 
```

我是mod重写的新手。有人可以告诉我我的模式有什么问题吗？我试图只让传入的名称包含字符、数字、-、^、_ 和 . 符号，但当我使用该语法时它会给我一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:43:14.277

4件事：

*   开头缺少斜线
*   你在你的角色课之后忘记了一个`+`:)
*   您还忘记捕获用户名：p
*   你应该总是把`-`角色放在角色类的开头

`]`（此外，除了字符类之外，您不需要转义任何其他内容）

```
RewriteRule ^/profile/([-A-Za-z_\d^.]+)/*$ ./index.php?page=showuser&username=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:41:01.657

尝试

```
RewriteRule ^profile/([\w\d\.^_-]+)/?$ ./index.php?page=showuser&username=$1 
```

使用可能会更好

```
RewriteRule ^profile/([\w\d\.^_-]+)/?$ /index.php?page=showuser&username=$1 
```

如果您的 index.php 文件位于公用文件夹的顶部（根）。

# c# - 如何获取以空格分隔的输入

> ID：12999693
> 
> 赞同：4
> 
> 时间：2012-10-21T16:21:02.197
> 
> 标签：c#

我想尝试获取一行数字并计算它们并将它们存储在一个数组中。我希望用户输入的数字最多为 100，并且我希望程序能够用空格分隔它们并在 C# 中计算它们

示例：98 92 86 92 100 92 93

空格将是唯一的分隔符，它会计算 7 个等级并将它们存储在一个数组中，但我不确定如何真正做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:28:00.430

在 2 个空格的情况下不获取空条目

```
var ints = input.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)
                     .Select(i => int.Parse(i))
                     .ToList(); //or ToArray() whichever you want 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:22:45.643

既然你想要一个`Array`，使用`Split`函数。

```
string x = "98 92 86 92 100 92 93";
string[] val = x.Split(' ');
int totalCount = val.Length; 
```

或者更好的方法是使用`LINQ`which 自动转换为整数数组

```
string x = "98 92 86 92 100 92 93";
int[] y = x.Split(' ').Select(n => Convert.ToInt32(n)).ToArray();
int totalCount = y.Length; 
```

# jquery - jQuery如何在类之间交换ID

> ID：12999695
> 
> 赞同：0
> 
> 时间：2012-10-21T16:21:14.397
> 
> 标签：jquery, html, css

[jsfiddle](http://jsfiddle.net/mvNCz/11/)

我正在尝试设置我的“当前”导航选项卡的样式。我在 jQuery 中也有一个悬停脚本，这导致了这样做的困难：

```
<ul class="nav">
    <li class="nav1" id="current"><a href="#">Images</a></li>
    <li><span>.</span></li>
    <li class="nav2"><a href="#">Articles</a></li>
    <li><span>.</span></li>
    <li class="nav3"><a href="#">Links</a></li>
    <li><span>.</span></li>
    <li class="nav4"><a href="#">Contact</a></li>
</ul>

//This bit does not work as expected. -->
$(".nav li a").click(function(){

    $("li#current").removeAttr('id');
    $(this).parent().attr("id","current");

}); 
```

基本上我需要将 id 从第一个 li 锚点移动到单击的任何其他 li 锚点，并让悬停脚本识别这个新放置的 id。

例如，当您单击“文章”时，“图像”会以蓝色消失，而“文章”会以蓝色显示并在鼠标移动后保持可见。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:31:40.833

更好的方法是`current`在选定项目上添加额外的类——`class="nav1 current"`

```
$(".nav li a").click(function(){
    $(this).parent().parent().find('li').removeClass('current');
    $(this).parent().addClass('current');
}); 
```

应该是这样的……得检查一下。

编辑：是的，它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:24:30.503

您不交换 html 中的 ID 或名称，只交换类和其他临时属性。否则，当代码期望 Id 出现在特定项目上时，您会产生副作用。可以将其视为更改您的社会安全号码，因为您周末穿了一件蓝色衬衫。

将当前类添加到您的 CSS 并根据所选内容在元素上打开和关闭它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:35:31.637

更新了你的小提琴： http: [//jsfiddle.net/mvNCz/17/](http://jsfiddle.net/mvNCz/17/) 基本上你颠倒了逻辑 - 你应该交换类而不是 id。

```
$(".nav li a").hover(function(){
    var other = $("#" + $(this).parent().attr('id') + "x");
    other.addClass("hovered");
    $(this).mouseout(function(){
        other.removeClass("hovered");
    });
});
$(".nav li a").click(function(){
    $("li.current").removeClass('current');
    $("#" + $(this).parent().attr('id') + "x").addClass("current");
}); 
```

# java - Java中调用超类的equals方法

> ID：12999697
> 
> 赞同：0
> 
> 时间：2012-10-21T16:21:36.317
> 
> 标签：java, netbeans, subclass, equals, superclass

我有一个问题，我试图使用`equals`子类的对象来测试超类的方法：

我的超类是：

```
public class Excluded_DateTime implements Serializable {

private Date fromDate;   
private Time fromTime;
private Date toDate;   
private Time toTime;
private Valid active; 
```

子类的不同之处在于将标识符作为键：

```
public class Classifier_Excluded_DateTime implements Serializable {

private Integer classifierExcludedDateTimeNo;    
private Excluded_DateTime classifierExcludedDateTime; 
```

所以我想在`Classifier_Excluded_DateTime`不使用字段的情况下测试对象的相等性`classifierExcludedDateTimeNo`。

但我发现`equals`超类的方法永远不会被调用。

超类生成的NetBeans`equals`和`hashCode`方法如下：

```
@Override
    public int hashCode() {        
        int hash = 7;
        hash = 23 * hash + (this.fromDate != null ? this.fromDate.hashCode() : 0);
        hash = 23 * hash + (this.fromTime != null ? this.fromTime.hashCode() : 0);
        hash = 23 * hash + (this.toDate != null ? this.toDate.hashCode() : 0);
        hash = 23 * hash + (this.toTime != null ? this.toTime.hashCode() : 0);
        hash = 23 * hash + (this.active != null ? this.active.hashCode() : 0);
        return hash;
    }

@Override
public boolean equals(Object obj) {        
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    final Excluded_DateTime other = (Excluded_DateTime) obj;
    if (this.fromDate != other.fromDate && (this.fromDate == null || !this.fromDate.equals(other.fromDate))) {
        return false;
    }
    if (this.fromTime != other.fromTime && (this.fromTime == null || !this.fromTime.equals(other.fromTime))) {
        return false;
    }
    if (this.toDate != other.toDate && (this.toDate == null || !this.toDate.equals(other.toDate))) {
        return false;
    }
    if (this.toTime != other.toTime && (this.toTime == null || !this.toTime.equals(other.toTime))) {
        return false;
    }
    if (this.active != other.active) {
        return false;
    }
    return true;
} 
```

而那些子类如下：

```
@Override
public int hashCode() {                
    int hash = 7;
    hash = 79 * hash + (this.getClassifierExcludedDateTimeNo() != null ? this.getClassifierExcludedDateTimeNo().hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object obj) {        
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    if (! super.equals(obj)) {            
        return false;
    }
    final Classifier_Excluded_DateTime other = (Classifier_Excluded_DateTime) obj;   

    if (this.getClassifierExcludedDateTimeNo() != other.getClassifierExcludedDateTimeNo() && (this.getClassifierExcludedDateTimeNo() == null || !this.classifierExcludedDateTimeNo.equals(other.ClassifierExcludedDateTimeNo))) {            
        return false;
    } 
    return true;
} 
```

我可以通过修改任一类的这些方法来做我想做的事情吗？

我正在尝试测试两个实例是否`Classifier_Excluded_DateTime`相同，而不包括`classifierExcludedDateTimeNo`比较中的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:27:52.600

您没有声明`Classifier_Excluded_DateTime`为`Excluded_DateTime`. 为此，您需要说：

```
public class Classifier_Excluded_DateTime extends Excluded_DateTime { 
```

现在，您似乎更像是在将`Excluded_DateTime`其视为一种委托`Classifier_Excluded_DateTime`，因为您在其中有一个成员实例变量`Classifier_Excluded_DateTime`是类型`Excluded_DateTime`的（您所说的地方`private Excluded_DateTime classifierExcludedDateTime;`）。我认为这不是您的意图，因为您在帖子中谈论子类和超类。

（更新：删除了我认为没有明确`super.equals()`调用的错误）。

# php - 使用 htaccess 删除查询字符串表单 url

> ID：12999700
> 
> 赞同：0
> 
> 时间：2012-10-21T16:22:05.187
> 
> 标签：php, string, .htaccess, url

> **可能重复：**
> [清除搜索查询的 URL？](https://stackoverflow.com/questions/5464481/clean-urls-for-search-query)

我做了一个用于检查颜色代码的php网页，这是前四行

```
if(isset($_GET['c']))
$hex = $_GET['c'];
elseif(!isset($_GET['c']))
$hex = $_POST['c']; 
```

我的 htaccess 有：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9]{6})$ index.php?c=$1 [L] 
```

如果我输入 site.com/ffcdee 它成功显示颜色 #ffcdee 但如果我使用输入框：

```
<form action="">
<input type="text" name="c" >
<input type="submit" value="Search" id="search-submit">
</form> 
```

它显示 site.com/?c=ffcdee，我尝试将输入名称更改为其他单词，但脚本不再起作用.. 如何从 url 中删除 ?c=？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:30:52.987

只需使用 http post 方法而不是 http get：

```
<form action="" method="post">
<input type="text" name="c" >
<input type="submit" value="Search" id="search-submit">
</form> 
```

当使用 http post 请求时，查询参数不会在 url 内编码传递，而是作为请求的单独“主体”传递。该主体的内容是您最终在 php 中作为 $_POST 超全局变量呈现的内容。

如果您想了解它是如何工作的，请使用网络嗅探器`wireshark`来转储 http 流量。您将看到并理解 get 和 post 之间的区别。

# list - 在 Haskell 中将分层数据结构转换为平面结构

> ID：12999703
> 
> 赞同：4
> 
> 时间：2012-10-21T16:22:18.413
> 
> 标签：list, haskell, tree

我正在从这样组织的文本文档中提取一些数据：

```
- "day 1"
    - "Person 1"
        - "Bill 1"
    - "Person 2"
        - "Bill 2" 
```

我可以将其读入如下所示的元组列表：

```
[(0,["day 1"]),(1,["Person 1"]),(2,["Bill 1"]),(1,["Person 2"]),(2,["Bill 2"])] 
```

其中每个元组的第一项表示标题级别，第二项表示与每个标题相关的信息。

我的问题是，如何获得如下所示的项目列表：

```
[["day 1","Person 1","Bill 1"],["day 1","Person 2","Bill 2"]] 
```

即每个最深的嵌套项目一个列表，包含来自其上方标题的所有信息。我得到的最接近的是：

```
f [] = []
f (x:xs) = row:f rest where
leaves = takeWhile (\i -> fst i > fst x) xs
rest = dropWhile (\i -> fst i > fst x) xs
row = concat $ map (\i -> (snd x):[snd i]) leaves 
```

这给了我这个：

```
[[["day 1"],["Intro 1"],["day 1"],["Bill 1"],["day 1"],["Intro 2"],["day 1"],["Bill 2"]]] 
```

我希望该解决方案适用于任意数量的级别。

PS我是Haskell的新手。我有一种感觉，我可以/应该使用一棵树来存储数据，但我无法绕过它。我也想不出更好的标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T19:51:26.877

## 树木

你是对的，你应该使用树来存储数据。我将复制`Data.Tree`它是如何做到的：

```
data Tree a = Node a (Forest a) deriving (Show)

type Forest a = [Tree a] 
```

## 构建树

现在我们想要获取您的弱类型元组列表并将其转换为（稍微）更强`Tree`的`String`s。任何时候您需要在转换为强类型之前转换弱类型值并对其进行验证，您都可以使用`Parser`：

```
type YourData = [(Int, [String])]

type Parser a = YourData -> Maybe (a, YourData) 
```

`YourData`类型同义词表示您正在解析的弱类型。`a`类型变量是您从解析中检索的值。我们的`Parser`类型返回 a`Maybe`因为`Parser`可能会失败。要了解原因，以下输入与有效的 不对应`Tree`，因为它缺少树的第 1 级：

```
[(0, ["val1"]), (2, ["val2"])] 
```

如果`Parser` **确实**成功，它还会返回未使用的输入，以便后续解析阶段可以使用它。

现在，奇怪的是，上面的`Parser`类型完全匹配一个众所周知的 monad 转换器堆栈：

```
StateT s Maybe a 
```

如果您扩展以下的[底层实现，`StateT`](http://hackage.haskell.org/packages/archive/transformers/0.3.0.0/doc/html/Control-Monad-Trans-State-Strict.html#t%3aStateT)您可以看到这一点：

```
StateT s Maybe a ~ s -> Maybe (a, s) 
```

这意味着我们可以定义：

```
import Control.Monad.Trans.State.Strict

type Parser a = StateT [(Int, [String])] Maybe a 
```

如果我们这样做，我们将免费获得我们类型的`Monad`,`Applicative`和`Alternative`实例。`Parser`这使得定义解析器变得非常容易！

首先，我们必须定义一个使用树的单个节点的原始解析器：

```
parseElement :: Int -> Parser String
parseElement level = StateT $ \list -> case list of
    []                  -> Nothing
    (level', strs):rest -> case strs of
        [str] ->
            if (level' == level)
            then Just (str, rest)
            else Nothing
        _     -> Nothing 
```

这是我们必须编写的唯一一段重要的代码，因为它是完整的，它可以处理以下所有极端情况：

*   列表为空
*   您的节点中有多个值
*   元组中的数字与预期深度不匹配

下一部分是事情变得非常优雅的地方。然后我们可以定义两个相互递归的解析器，一个用于解析 a `Tree`，另一个用于解析 a `Forest`：

```
import Control.Applicative

parseTree :: Int -> Parser (Tree String)
parseTree level = Node <$> parseElement level <*> parseForest (level + 1)

parseForest :: Int -> Parser (Forest String)
parseForest level = many (parseTree level) 
```

第一个解析器使用`Applicative`样式，因为它免费`StateT`给了我们一个`Applicative`实例。但是，我也可以使用`StateT`'`Monad`实例来为命令式程序员提供更具可读性的代码：

```
parseTree :: Int -> Parser (Tree String)
parseTree level = do
    str    <- parseElement level
    forest <- parseForest (level + 1)
    return $ Node str forest 
```

但是`many`功能呢？那是在做什么？我们来看看它的类型：

```
many :: (Alternative f) => f a -> f [a] 
```

它接受任何返回值并实现的东西，`Applicative`而是重复调用它以返回值列表。当我们用 定义我们的`Parser`类型时`State`，我们免费获得了一个`Alternative`实例，因此我们可以使用该`many`函数将解析单个`Tree`(ie `parseTree`) 的内容转换为解析 a `Forest`(ie `parseForest`) 的内容。

要使用我们的`Parser`，我们只需重命名现有`StateT`函数以明确其用途：

runParser :: Parser a -> [(Int, [String])] -> 也许一个 runParser = evalStateT

然后我们就运行它！

```
>>> runParser (parseForest 0) [(0,["day 1"]),(1,["Person 1"]),(2,["Bill 1"]),(1,["Person 2"]),(2,["Bill 2"])]
Just [Node "day 1" [Node "Person 1" [Node "Bill 1" []],Node "Person 2" [Node "Bill 2" []]]] 
```

这简直就是魔法！让我们看看如果我们给它一个无效的输入会发生什么：

```
>>> runParser (parseForest 0) [(0, ["val1"]), (2, ["val2"])]
Just [Node "val1" []] 
```

它在输入的一部分上成功！我们实际上可以通过定义一个匹配输入结尾的解析器来指定它必须消耗整个输入：

```
eof :: Parser ()
eof = StateT $ \list -> case list of
    [] -> Just ((), [])
    _  -> Nothing 
```

现在让我们尝试一下：

```
>>> runParser (parseForest 0 >> eof) [(0, ["val1"]), (2, ["val2"])]
Nothing 
```

完美的！

## 压平树

为了回答您的第二个问题，我们再次使用相互递归函数解决问题：

```
flattenForest :: Forest a -> [[a]]
flattenForest forest = concatMap flattenTree forest

flattenTree :: Tree a -> [[a]]
flattenTree (Node a forest) = case forest of
    [] -> [[a]]
    _ -> map (a:) (flattenForest forest) 
```

让我们试试吧！

```
>>> flattenForest [Node "day 1" [Node "Person 1" [Node "Bill 1" []],Node "Person 2" [Node "Bill 2" []]]]
[["day 1","Person 1","Bill 1"],["day 1","Person 2","Bill 2"]] 
```

现在，从技术上讲，我不必使用相互递归函数。我本可以完成一个递归函数。我只是按照`Tree`.`Data.Tree`

## 结论

因此，理论上我可以通过跳过中间类型并直接解析展平结果来进一步缩短代码`Tree`，但我认为您可能希望将`Tree`基于 - 的表示用于其他目的。

从中获得的关键要点是：

*   学习 Haskell 抽象来简化你的代码
*   总是写总函数
*   学习有效地使用递归

如果您这样做，您将编写与问题完全匹配的健壮和优雅的代码。

## 附录

这是包含我所说的所有内容的最终代码：

```
import Control.Applicative
import Control.Monad.Trans.State.Strict
import Data.Tree

type YourType = [(Int, [String])]

type Parser a = StateT [(Int, [String])] Maybe a

runParser :: Parser a -> [(Int, [String])] -> Maybe a
runParser = evalStateT

parseElement :: Int -> Parser String
parseElement level = StateT $ \list -> case list of
    []                  -> Nothing
    (level', strs):rest -> case strs of
        [str] ->
            if (level' == level)
            then Just (str, rest)
            else Nothing
        _     -> Nothing

parseTree :: Int -> Parser (Tree String)
parseTree level = Node <$> parseElement level <*> parseForest (level + 1)

parseForest :: Int -> Parser (Forest String)
parseForest level = many (parseTree level)

eof :: Parser ()
eof = StateT $ \list -> case list of
    [] -> Just ((), [])
    _  -> Nothing

flattenForest :: Forest a -> [[a]]
flattenForest forest = concatMap flattenTree forest

flattenTree :: Tree a -> [[a]]
flattenTree (Node a forest) = case forest of
    [] -> [[a]]
    _  -> map (a:) (flattenForest forest) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T17:15:11.890

我似乎已经解决了。

```
group :: [(Integer, [String])] -> [[String]]
group ((n, str):ls) = let
      (children, rest) = span (\(m, _) -> m > n) ls
      subgroups = map (str ++) $ group children
   in if null children then [str] ++ group rest
      else subgroups ++ group rest
group [] = [] 
```

虽然我没有测试太多。

这个想法是要注意递归模式。此函数获取列表的第一个元素 (N, S)，然后将更高级别的所有条目收集到级别 N 的另一个元素，到列表“子项”中。如果没有孩子，我们就在顶层，S 形成输出。如果有一些，则将 S 附加到所有这些。

至于为什么你的算法不起作用，问题主要在`row`. 请注意，您不是递归下降。

* * *

树也可以用。

```
data Tree a = Node a [Tree a] deriving Show

listToTree :: [(Integer, [String])] -> [Tree [String]]
listToTree ((n, str):ls) = let
      (children, rest) = span (\(m, _) -> m > n) ls
      subtrees = listToTree children
   in Node str subtrees : listToTree rest
listToTree [] = []

treeToList :: [Tree [String]] -> [[String]]
treeToList (Node s ns:ts) = children ++ treeToList ts where
   children = if null ns then [s] else map (s++) (treeToList ns)
treeToList [] = [] 
```

算法本质上是一样的。前半部分用于第一个功能，后半部分用于第二个功能。

# php - 对大数据执行 AJAX 搜索的更好方法

> ID：12999705
> 
> 赞同：1
> 
> 时间：2012-10-21T16:22:26.597
> 
> 标签：php, javascript, ajax, web

我是 AJAX 新手，正在寻找更好的方法来做到这一点。我有一个搜索框，可以在大约 10,000 个字符串的数组中搜索字符串。代码如下，但太慢了。当然还有更好的方法。它是什么 ？？这是HTML和javascript

```
 <script>
    function showHint(str)
    {
    var xmlhttp;
    if (str.length==0)
      { 
      document.getElementById("txtHint").innerHTML="";
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","gethint.php?q="+str,true);
    xmlhttp.send();
    }
    </script>

    <body>
    <h3>Start typing a name in the input field </h3>
    <form action=""> 
    First name: <input type="text" id="txt1" onkeyup="showHint(this.value)" />
    </form>
    <p>Suggestions: <span id="txtHint"></span></p> 
    </body> 
```

这是php代码：

```
 include_once("array.php");    //array.php contains array of 10,000 strings

 //get the q parameter from URL
 $q=$_GET["q"];

 //lookup all hints from array if length of q>0
 if (strlen($q) > 0)
   {
   $hint="";
   for($i=0; $i<count($a); $i++)
     {
     if (strtolower($q)==strtolower(substr($a[$i],0,strlen($q))))
       {
       if ($hint=="")
         {
         $hint=$a[$i];
         }
       else
         {
         $hint=$hint." , ".$a[$i];
         }
       }
     }
   }

 // Set output to "no suggestion" if no hint were found
 // or to the correct values
 if ($hint == "")
   {
   $response="no suggestion";
   }
 else
   {
   $response=$hint;
   }

 //output the response
 echo $response; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-21T16:59:27.760

在 IRC 上聊了半个小时后，有人说服我，最好的方法是使用类似的搜索引擎

*   [狮身人面像搜索](http://sphinxsearch.com/ "狮身人面像搜索")
*   [弹性搜索](http://www.elasticsearch.org/ "弹性搜索")

# python - 卡在 python 中的 Project Euler #3

> ID：12999706
> 
> 赞同：0
> 
> 时间：2012-10-21T16:22:43.943
> 
> 标签：python, math, primes

> 13195 的质因数是 5、7、13 和 29。数字 600851475143 的最大质因数是多少？

好的，所以我正在研究 python 中的项目 euler 问题 3。我有点困惑。我不知道我从这个程序中得到的答案是否正确。如果有人能告诉我我做错了什么，那就太好了！

```
#import pdb

odd_list=[]
prime_list=[2] #Begin with zero so that we can pop later without errors.

#Define a function that finds all the odd numbers in the range of a number
def oddNumbers(x):

  x+=1 #add one to the number because range does not include it
  for i in range(x):
     if i%2!=0: #If it cannot be evenly divided by two it is eliminated
        odd_list.append(i) #Add it too the list

  return odd_list 

def findPrimes(number_to_test, list_of_odd_numbers_in_tested_number): # Pass in the prime number to test
   for i in list_of_odd_numbers_in_tested_number:
     if number_to_test % i==0:
       prime_list.append(i)
       number_to_test=number_to_test / i

       #prime_list.append(i)
       #prime_list.pop(-2) #remove the old number so that we only have the biggest

       if prime_list==[1]:
           print "This has no prime factors other than 1"
       else:
           print prime_list
       return prime_list

    #pdb.set_trace()

    number_to_test=raw_input("What number would you like to find the greatest prime of?\n:")

    #Convert the input to an integer
    number_to_test=int(number_to_test)

    #Pass the number to the oddnumbers function
    odds=oddNumbers(number_to_test)

#Pass the return of the oddnumbers function to the findPrimes function
findPrimes(number_to_test , odds) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T02:07:12.313

简单的解决方案是试用除法。让我们处理 13195 的因式分解，然后您可以将该方法应用于您感兴趣的更大数字。

从 2 的试除数开始；13195 除以 2 余数为 1，所以 2 不能除以 13195，我们可以继续下一个试除数。接下来我们尝试 3，但余数为 1；然后我们尝试 4，但余数为 3。下一个试验除数是 5，它确实除以 13195，所以我们输出 5 作为 13195 的因数，将原始数字减少到 2639 = 13195 / 5，然后尝试 5再次。现在 2639 除以 5 余数为 4，所以我们前进到 6，余数为 5，然后我们前进到 7，它确实除以 2639，所以我们输出 7 作为 2639 的因数（也是13195) 并再次将原始数字减少到 377 = 2639 / 7。现在我们再次尝试 7，但它不能除以 377，就像 8、9、10、11 和 12 一样，但是 13 可以除以 2639。所以我们输出 13 作为 377（以及 2639 和 13195）的除数，然后再次将原始数字减少到 29 = 377 / 13。至此我们完成了，因为仍然是 13 的试验除数的平方是大于剩下的数 29，证明 29 是素数；之所以如此，是因为如果*n=pq*，那么*p*或*q*必须小于或等于 n 的平方根，并且由于我们已经尝试了所有这些除数，因此剩余的数字 29 必须是素数。因此，13195 = 5 * 7 * 13 * 29。

这是算法的伪代码描述：

```
function factors(n)
    f = 2
    while f * f <= n
        if f divides n
            output f
            n = n / f
        else
            f = f + 1
    output n 
```

有更好的方法来分解整数。但是这种方法对于 Project Euler #3 以及许多其他分解项目来说已经足够了。如果你想了解更多关于素数和因式分解的知识，我建议在我的博客上写一篇[*用素数编程*](http://programmingpraxis.com/essays)的文章，其中包括上述算法的 python 实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T16:52:20.717

*   这个数字`600851475143`很大，不鼓励你使用蛮力。
*   `oddNumbers`将`600851475143 / 2`数字放入的功能`odd_list`，这**是很多**内存。
*   检查一个数字可以被奇数整除并不意味着奇数是质数。您提供的算法是错误的。
*   有很多关于素数的数学/算法技巧，你应该在网上搜索它们，然后*筛选*答案。您也可能会找到问题*的根源*，以确保您已经解决*了*一些问题。

您可以使用生成器来获取赔率列表（不是说它会帮助您）：

```
odd_list = xrange(1, number+1, 2) 
```

以下是处理素数所需的概念：

*   [http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)
*   [http://en.wikipedia.org/wiki/Primality_test](http://en.wikipedia.org/wiki/Primality_test)

如果你**真的**被卡住了，那么已经有解决方案了：

*   [Project Euler #3，因式分解的无限循环](https://stackoverflow.com/questions/8350694/project-euler-3-infinite-loop-on-factorization)
*   [Project Euler 3 - 为什么这种方法有效？](https://stackoverflow.com/questions/12605320/project-euler-3-why-does-this-method-work)
*   [Project Euler 问题 3 帮助](https://stackoverflow.com/questions/201374/project-euler-question-3-help)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-18T12:49:43.213

这是我的 Python 代码：

```
num=600851475143
i=2 # Smallest prime factor
for k in range(0,num):
    if i >= num: # Prime factor of the number should not be greater than the number
        break
    elif num % i == 0: # Check if the number is evenly divisible by i
        num = num / i
    else:
        i= i + 1
print ("biggest prime number is: "+str(num)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-22T10:26:58.630

这是我的python代码：

```
import math
ma = 600851475143
mn = 2
s = []
while mn < math.sqrt(ma):
    rez = ma / mn
    mn += 1
    if ma % mn == 0:
        s.append(mn)
print(max(s)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-01T08:03:14.677

```
def prime_max(x):
a = x
i = 2
while i in range(2,int(a+1)):
    if a%i == 0:
        a = a/i

        if a == 1:
             print(i)
        i = i-1
    i = i+1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-30T15:18:22.670

使用 Python 解决此问题的另一种方法。

```
def lpf(x):
lpf=2
while (x>lpf):
    if (x%lpf==0):
        x=x/lpf

    else:
        lpf+=1
return x
print(lpf(600851475143)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-06T03:02:03.587

```
'''
The prime factors of 13195 are 5, 7, 13 and 29.

What is the largest prime factor of the number 600851475143 ?
'''
import math

def isPrime(x):
    if x<2:
        return False
    for i in range(2,int(math.sqrt(x))):
        if not x%i:
           return False
    return True

def largest_factor(number):
    for i in range (2, int(math.sqrt(number))):
        if number%i == 0:
            number = number/i
            if isPrime(number) is True:
                max_val = number
                break
                print max_val
        else:
            i += 1
    return max_val

largest_factor(600851475143) 
```

这实际上编译得非常快。它检查形成的数字是否为质数。谢谢

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-07T00:21:13.887

```
i = 3
factor = []
number = 600851475143
while i * i <= number:
    if number % i != 0:
        i += 2
    else:
        number /= i
        factor.append(i)
while number >= i:
    if number % i != 0:
        i += 2
    else:
        number /= i
        factor.append(i)
print(max(factor)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-13T07:30:54.597

这是我的python代码

```
a=2
list1=[]
while a<=13195:                     #replace 13195 with your input number
    if 13195 %a ==0:                #replace 13195 with your input number
        x , count = 2, 0
        while x <=a:
            if a%x ==0:
                count+=1
            x+=1
        if count <2:
            list1.append(a)
    a+=1

print (max(list1)) 
```

# android - Android 上固定大小的图像

> ID：12999711
> 
> 赞同：0
> 
> 时间：2012-10-21T16:23:27.097
> 
> 标签：android, xml, android-layout, layout

我有一堆不同大小的图像。它们中的每一个都应显示在屏幕的顶部，并且必须占用等于屏幕高度 60% 的高度空间。图像的宽度将取决于它的高度以保存初始比例。我试图`weightsum`在 layout 和`weight`property in 中使用属性`ImageView`，但我不知道在`height`我的图像视图的属性中放置什么。如果它是“wrap_content”，则每个图像都会调整我的 ImageView 的大小并且所有标记都会被粉碎。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:55:21.320

如果需要，您可以通过代码设置图像的尺寸。只需使用 weight_sum 方法设置宽度，然后执行以下操作：

```
 WindowManager manager = (WindowManager) context.getSystemService(Activity.WINDOW_SERVICE);
 int screenHeight = manager.getDefaultDisplay().getHeight();
 YOUR_VIEW.getLayoutParams().height = (int) (screenWidth * 0.6); 
```

请注意，只有在您的 ImageView 已在屏幕上绘制之后才能执行此操作 - 因此在 onCreate() 方法中调用它将不起作用。您可以将其称为延迟（postDelayed）或将布局侦听器设置为您的视图之一。

希望这可以帮助。

# javascript - 在 Javascript 中处理长按键

> ID：12999713
> 
> 赞同：1
> 
> 时间：2012-10-21T16:23:59.823
> 
> 标签：javascript, dom-events

我正在尝试使用 Javascript 从用户那里获取密钥并将其存储在 Javascript 对象中。

即当我按下 时`A`，应该将 1 添加到 myJSON[65]。
以下代码完美运行，但如果用户长时间按下一个键，它会将其检测为多次按键。我不想那样。有一个更好的方法吗？

```
var myJSON={65:[],83:[],68:[],70:[],71:[]};
window.onkeydown=function(e){
    console.log(myJSON);
    myJSON[parseInt(e.keyCode)].push(1);
} 
```

[http://jsfiddle.net/mp2v7/](http://jsfiddle.net/mp2v7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:32:11.320

试试这个：

```
var keyStopper = false;

window.onkeydown = function(e) {
    if (keyStopper) {
        return e.keyCode;
    }
    keyStopper = true;
    console.log(myJSON);
    myJSON[parseInt(e.keyCode)].push(1);
};

window.onkeyup = function(e) {
    keyStopper = false;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:25:32.740

试试keyup：

```
var myJSON={65:[],83:[],68:[],70:[],71:[]};
window.onkeyup=function(e){
    console.log(myJSON);
    myJSON[parseInt(e.keyCode)].push(1);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T16:46:28.580

仅使用 keydown 和 keyup 事件。顾名思义，它们的工作原理是 keydown ：按下某个键时的单个事件。keyup - 释放键时的单个事件。

# c++ - 我如何向只使用 Fortran 77 编码的人解释面向对象编程？

> ID：12999714
> 
> 赞同：3
> 
> 时间：2012-10-21T16:24:05.487
> 
> 标签：c++, fortran, fortran90

我母亲在 Fortran 上完成了她的大学论文，现在（十多年后）需要学习 c++ 进行流体模拟。她能够理解所有的程序化编程，但无论我多么努力地向她解释对象，它都无法坚持。（我用 Java 做了很多工作，所以我知道对象是如何工作的）我想我可能用太高级的方式来解释它，所以对于从未使用过它们并成长的人来说，这真的没有意义在纯函数式编程时代。

有什么简单的方法可以向她解释以帮助她理解吗？我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:30:46.297

告诉她把物体想象成现实世界中的物体。例如，整个世界可以是面向对象编程（在 C++ 中）与某种函数式编程（可能用上帝的语言 Lisp 完成）的混合。

拿一个物体来说，比如割草机，它有一定的属性，可以做一定的事情。（对象和类）

然后告诉她一个更好的割草机，它是你已有的割草机的延伸。告诉她它更好，但仍然建立在相同的机制（继承）之上。

然后告诉她你自己。告诉她你有时可以成为一名割草专家，但你实际上是一名程序员并以此为生。这就像你同时扮演两个不同的实体一样。这就是多态性。

当她得到这个时，告诉她如何用她必须学习的语言（C++）来实现这些东西。

然后告诉她，如果她必须在计算机世界中编写这个世界的模拟，她将不得不学习如何去做。

当她知道如何将她对现实世界的想法转化为程序代码时。她将学会如何使用面向对象的编程语言进行编程。

# maven - Maven 构建：如何在不将它们安装到 repo 且不使用 m2eclipse 的情况下解决工作区工件

> ID：12999716
> 
> 赞同：6
> 
> 时间：2012-10-21T16:24:15.230
> 
> 标签：maven, dependencies, resolution

我在 Eclipse Indigo 中使用了一些 m2eclipse，现在我尝试在没有 Eclipse 和没有 m2eclipse 插件的情况下从命令行使用 Maven。m2eclipse 有能力解决工作区中的工件而无需将它们安装到存储库，并且此功能允许我在 Eclipse 中运行我的构建而不会出现问题，但在 CMD 中我得到了缺少 jar 的错误。

[警告] AAA_7.1.1:ConfigurationView:jar:0.0.1-SNAPSHOT 的 POM 丢失，没有可用的依赖信息 [警告] AAA_7.1.1:Beans:jar:0.0.1-SNAPSHOT 的 POM 丢失，没有依赖关系可用信息 [INFO] --------------------------------------------- --------------------------------------- [INFO] BUILD FAILURE [ERROR] 无法在项目客户端上执行目标：无法解析项目 AAA_7 的依赖项.1.1:客户端:pom:0.0.1-SNAPSHOT:.......

我们的目标是尽可能保持 repo 干净，这就是为什么我想让它以这种方式工作的原因。所以我的问题是如何解决依赖关系而不将它们安装到 repo 以及是否有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:14:48.510

基本上你想要一个 Maven 构建，其中反应器包含所有 97 个模块。为此：
创建一个父级，其中包含所有这 97 个模块作为子级（如果您已经是多模块，则只需将现有的父级配置为这个新父级的子级）。比在那个新的父母那里开始你的构建。约定通常是将父级放在上层目录中。但是您也可以使用包含`..`模块位置规范的相对路径。也不需要从现有父母中的新父母继承。因此，您不需要更改任何现有的 pom。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:45:40.133

IMO，使用 Maven 的标准方法是`mvn clean install`.
但是，如果我很好地理解了您的问题，您想保持**本地**存储库尽可能干净吗？
一种方法是使用**多个**本地存储库，但我认为目前不可能（Maven 3.0）。

但是，您可以使用备用本地存储库`-Dmaven.repo.local`或备用设置`mvn --settings`（请参阅[答案](https://stackoverflow.com/a/2019915/1677594)）。

也可以看看 ：

*   上一个问题：[maven 工作区本地存储库](https://stackoverflow.com/questions/2018965/maven-workspace-local-repository)
*   JIRA：[允许多个本地存储库](http://jira.codehaus.org/browse/MNG-3655)（未解决）
*   [本地存储库分离](http://docs.codehaus.org/display/MAVEN/Local+repository+separation)-> 工作区目前似乎没有实现......

# hibernate - 休眠关系

> ID：12999719
> 
> 赞同：-1
> 
> 时间：2012-10-21T16:24:44.110
> 
> 标签：hibernate

我想在加载时查询子对象，

这是我正在使用的查询：

```
SELECT app FROM ApplicantPerson app left join app.gpaList gpa , DesignatedSchool ds
WHERE
    app.applicantPersonId.applPersonId = ds.applPersonId 
    AND app.appStatusCd = 'P'  and gpa.verifiedInd= 1
    AND ds.designateStatusCd = 'A' 
    AND ds.medInstId = ?  
    AND app.applicantPersonId.applYear = ?
    AND ds.applYear = ? 
```

但是申请者有 24 条记录，而子 gpalist 有 2 条记录，其中一条已验证 = 1，第二条已验证 = 0

注意：ApplicantPerson 和 Gpa 之间存在一对多关系

但是上述查询的输出是 30 条记录，而 gpalist 得到了 2 条记录。

我需要在父子 gpalist 中输出 24 条记录，其中一条记录已验证 =1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:38:13.303

where 子句用于选择查询返回*的*实体，但它不修改查询返回的*内容*。如果查询返回 的实例`ApplicantPerson`，并且您要求返回的人员的孩子，您将始终获得所有孩子，无论查询用于获取这些人。

您的查询执行 和 之间的笛卡尔积`app`，`ds`因此您获得的行数超出预期也就不足为奇了。使用 distinct 关键字获取不同的实例：

```
select distinct app from ... 
```

# c# - 如何使用 C# Regex 匹配文本块

> ID：12999722
> 
> 赞同：2
> 
> 时间：2012-10-21T16:25:19.913
> 
> 标签：c#, .net, regex

我有一个包含数百行遵循此模式的文本文件：

```
[Part 1.SubPart 2.A 1]
Variable=value
(...)
LastVariable1=value
[Part 1.SubPart 2.B 2]
Variable=value
(...)
LastVariable2=value
[Part 1.SubPart 2.C 3]
Variable=value
(...)
LastVariable3=value
[Part 1.SubPart 3.A 1]
(...) 
```

我需要提取以**[Part...A *]**开头并在下一个“A”块开始之前结束的每个块。

最后一个变量“LastVariable3”在所有部分中都有一个常量名称，出于我的目的可以忽略。

我已经尝试根据此处的其他帖子使用以下表达式，但它们不起作用。

```
var pattern = new Regex(@"\[Part.*A..\])(.*)(^LastVariable3)",RegexOptions.Singleline);

var pattern = new Regex(@"\[Part.*A..\])(.|\n)*(^LastVariable3)",RegexOptions.Singleline); 
```

...它们总是一次匹配整个文件中的所有部分块，而不是一次匹配一个。

我也尝试过 `(\[Part.*A..\]\n)(.*(\n)){"number of lines"}`，但变量的数量不是恒定的，所以这不起作用。

希望这是有道理的！关于我做错了什么的任何想法？我是正则表达式的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:39:28.887

您的第二次尝试非常接近。您只是忘记了一个额外的括号 ( `)`)。此外，您需要使用`RegexOptions.Multiline`而不是`RegexOptions.Singleline`.

我已经尝试过这种模式并且它有效：

```
\[Part.*A..\](.|\n)*(^LastVariable3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:41:16.640

使用`RegexOptions.Singleline`正则表达式模式

```
(\[Part\s[^\]]+\s\d+\.A\s\d+\].*?)(?=(?:[\n\r]\[Part\s[^\]]+\s\d+\.A\s\d+\]|\Z)) 
```

# javascript - 如何使用 JavaScript 访问 HTML 子笔记

> ID：12999727
> 
> 赞同：0
> 
> 时间：2012-10-21T16:25:35.440
> 
> 标签：javascript, nodes

我有这样的布局，我需要到达 AreaForMaps`n`节点并隐藏它们

这是我的 HTML：

```
<div id="layout1" class="layout1_wrapper">

    <div class="grid">
        <div class="block">
            <div id="AreaForMaps1" name="AreaForMaps1">
                <div id="googlemaps1">
                </div>
            </div>
        </div>
    </div>

    <div class="grid">
        <div class="block">
            <div id="AreaForMaps2" name="AreaForMaps2">
                <div id="googlemaps2">
                </div>
            </div>
        </div>
    </div>

    <div class="grid">
        <div class="block">
            <div id="AreaForMaps3" name="AreaForMaps3">
                <div id="googlemaps3">
                </div>
            </div>
        </div>
    </div>

</div> 
```

JavaScript：

```
<script>
document.getElementById("Button").onclick = function(){  
//need to reach all AreaForMapsXXX divs and hide them  
var myDiv = document.getElementById( "layout1" );
var children = document.getElementById(layout1).childNodes;

  for(i=0; i<children.length; i+=3) { 
    document.getElementById(children[i].id).style.display = "none";
  }  
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:29:37.500

一种可能的方法是向所有这些添加一个类，比如“AreaForMaps”，然后简单地使用`document.getElementsByClassName`（或 jQuery 或您正在使用的任何东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:28:59.180

有几种方法可以解决它。这是一种方法。

```
document.getElementById("Button").onclick = function(){  
    var myDiv = document.getElementById( "layout1" );
    var divs = myDiv.getElementsByTagName("div");

    for(i=0; i<divs.length; i++) { 
      if (divs[i].id.indexOf("AreaForMaps") === 0)
          divs[i].style.display = "none";
    }  
} 
```

您的代码仅针对 的直接子节点`"layout1"`，并且包括文本节点*（制表符和换行符在 DOM 中表示为节点）*。

此代码获取所有`div`从 下降的元素，并在隐藏之前`"layout1"`验证其 ID 的第一部分是否以开头。`"AreaForMaps"`

* * *

如果您支持的浏览器列表仅包括 IE8 及更高版本，您可以改为：

```
document.getElementById("Button").onclick = function(){  
    var divs = document.querySelectorAll( "#layout1 div[id^=AreaForMaps]" );

    for(i=0; i<divs.length; i++)
        divs[i].style.display = "none";
} 
```

# javascript - 输入类型文件设置值

> ID：12999728
> 
> 赞同：1
> 
> 时间：2012-10-21T16:25:46.393
> 
> 标签：javascript, jquery, html

> **笔记：**
> 
> 下面的答案和评论反映了 2009 年旧版浏览器的状态。现在，您实际上可以在 2017 年使用 JavaScript 动态/编程地设置文件输入元素的值。
> 
> 有关详细信息以及演示，请参阅此问题中的答案：
> [如何以编程方式设置文件输入值（即：拖放文件时）？](https://stackoverflow.com/q/47515232/584192)

大家好，有没有办法从我的 url 设置输入类型文件的值？当我将图像文件目标添加到值时，它无法显示

这是我的看法：

```
<div class="editor-label">
    <input type="file" name="file" id="file" value="../../banner_image/test.jpg" required="required" />

        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:40:31.113

一般来说——没办法！该文件受到保护，在某些情况下，您可以获得文件名（不是整个路径），但在某些浏览器中...... 无法通过 html value 属性或使用 JS 来设置它。

# php - 这是我的 PHP 会话的问题吗？

> ID：12999729
> 
> 赞同：0
> 
> 时间：2012-10-21T16:25:49.107
> 
> 标签：php, session, session-variables, sessionid

我正在使用会话将用户登录到我的网站。

登录表单将输入发送到 login-exec 文件，该文件然后查询 db 并验证登录信息。我放置`session_start();`在 login-exec 文件的开头，然后使用以下代码段将数据写入会话：

```
session_regenerate_id();
$member = mysql_fetch_assoc($result);
$_SESSION['SESS_MEMBER_ID'] = $member['id'];
$_SESSION['Username'] = $member['username'];
$_SESSION['key'] = $member['Serial'];
session_write_close();
header('Location: account.php'); 
```

在 account.php 文件的开头，我需要 auth.php 来验证会话。

帐户.php：`require_once('auth.php');`

auth.php：

```
<?php
//Start session
session_start();

//Check whether the session variable SESS_MEMBER_ID is present or not
if(!isset($_SESSION['SESS_MEMBER_ID']) || (trim($_SESSION['SESS_MEMBER_ID']) == '')) {
    header("Refresh: 5; url=login.php");
    //echo $_SESSION['SESS_MEMBER_ID'];
    die("Access Denied!");
    exit();
}
?> 
```

总是第一次登录它返回访问被拒绝。当脚本重定向回登录页面并且我再次尝试时，它总是可以工作......我已经将我的 php 文件保存在没有 BOM 的 UTF-8 中，因为我最初认为在会话开始之前有前导空白。那并没有解决问题，我真的无法弄清楚。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:49:13.900

我相信问题是我的 login-exec.php 脚本中的重定向 url。例如：

如果我通过访问[http://www.mydomain.com/mysubdirectory/login.php](http://www.mydomain.com/mysubdirectory/login.php)加载 login.php 脚本，并且 login-exec.php 中的标头重定向指向[http://subdomain.mydomain.com/account .php](http://subdomain.mydomain.com/account.php) PHPSESSID 正在重新生成，因为域已更改。

因此，我将标头重定向更改为 account.php 而不是完整的 url，这解决了问题。

我本可以使用 subdomain.mydomain.com 或 mydomain.com/subdirectory/ 的完整 URL，但这样做会限制用户和脚本的可移植性。如此简单的答案..确保域保持不变。如果不是，您可以设置会话名称，我很确定这也可以解决此问题。然而，在我的情况下`header('Location: script.php');`，成功了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T16:38:09.947

摆脱 session_write_close();

如果这不能解决问题，则可能是您丢失了 account.php 文件中的会话。

`session_start();`在需要 auth.php 页面之前进行调用。

# android - 将 DatePickerDialog 按钮顺序与 Android 上的设备区域设置匹配

> ID：12999733
> 
> 赞同：0
> 
> 时间：2012-10-21T16:26:13.897
> 
> 标签：android, button, locale, datepickerdialog

我的应用程序中所有 DatePickerDialog 上的按钮顺序不受设备语言环境的影响。例如，如果我将语言环境更改为从右到左对齐的语言，例如希伯来语或阿拉伯语，我设备上所有其他应用程序上的按钮顺序会自动更改，但在我自己的应用程序上保持不变！这是为什么？以及如何告诉我的应用程序“适应”新选择的语言环境并相应地更改按钮顺序？这真让我抓狂。您可以提供的任何帮助或提示将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:43:18.583

您可以使用 getDefault() 为您正在运行的设备的用户获取适当的语言环境。然后尝试将语言环境应用于配置。

```
Locale locale = Locale.getDefault();
Configuration config = new Configuration();
config.locale = locale;
getBaseContext().getResources().updateConfiguration(config,getBaseContext().getResources().getDisplayMetrics()); 
```

我不知道上面的代码片段是否适用于您的情况。但你可以试一试。

# c# - 如何以编程方式对 WebBrowser 控制安全警报回答“是”

> ID：12999735
> 
> 赞同：3
> 
> 时间：2012-10-21T16:26:37.513
> 
> 标签：c#, winforms, webbrowser-control

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T04:05:24.503

ScriptErrorsSuppressed = True 没有帮助：安全对话框没有出现，但效果就像按“否”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T16:31:04.770

最好的办法是整理损坏的证书。浏览器保护这些警告是有原因的。您正在做的是试图规避用户的安全。

如果您必须使用 webbrowser 控件执行此操作，则将 ScriptErrorsSuppressed 设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-03T16:48:22.660

我通过在根受信任的证书颁发机构中导入损坏的证书来解决这个问题。

[![在此处输入图像描述](../Images/b74592d876f5f9fd31582f25185caae7.png)](https://i.stack.imgur.com/FaXus.jpg)

# node.js - NodeJS 套接字 FIN_WAIT2

> ID：12999740
> 
> 赞同：5
> 
> 时间：2012-10-21T16:27:22.720
> 
> 标签：node.js, sockets

我有一个正在运行的 nodejs 服务器，用于与客户端进行套接字通信。一段时间（几天）后，nodejs 的 CPU 使用率达到 100%。查看节点端口的 netstat，我发现有超过 1k 个处于 FIN_WAIT2 状态的连接（应该只有大约 50 个活动连接）。我正在使用超时功能进行连接，在特定超时后调用 end() 。但它似乎并没有关闭连接。那么 end() 是关闭套接字连接的有效方法还是应该使用其他方法？

# java - 我们可以从 img 标签 src 调用 servlet 的 doPost 方法吗？

> ID：12999746
> 
> 赞同：0
> 
> 时间：2012-10-21T16:28:04.483
> 
> 标签：java, html, servlets

我知道从 img 标签 src 调用 servlet 的 doPost 方法没有任何意义：

```
 <img src='/ServletName' alt=''/>// i know it will call doGet or service method but i can't use these. 
```

那么有没有办法从html的img标签调用doPost方法并在img标签中显示图像？

实际上我的 doPost 方法响应类型是：

```
 response.setContentType("image/jpeg"); 
```

我也无法将图像存储在服务器的磁盘上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T19:21:04.817

> *那么有没有办法从html的img标签调用doPost方法并在img标签中显示图像？*

不，这只是 HTML`<img>`元素的合同。`src`网络浏览器必须通过属性中指定的 URL 上的 GET 请求下载图像。

只需在`doGet()`方法中执行图像服务工作即可。更重要的是，您可以重命名`doPost`为`doGet`. 根本不需要改变逻辑。

# jquery - jQuery Checkbox 在 IE8 中不起作用

> ID：12999747
> 
> 赞同：2
> 
> 时间：2012-10-21T16:28:24.863
> 
> 标签：jquery, checkbox, internet-explorer-8

我在 IE8 中遇到 jQuery 问题（Firefox、Chrome 和 IE 9 都很完美）。我在 IE 9 以下时使用 jQuery 1.7.1 和 JS html5shiv

这段代码的问题是一个复选框。在 IE 8 中什么都不做，没有标记或取消选中选项。

```
 <div class="easy-select-box checklist category">
                    <a href="#">All Categories</a>
                    <ul>
                                <li><label><input type="checkbox" onchange="filter();" id="all" value="00"/> All Categories</label></li>
                                <li><label><input type="checkbox" name="cat[]" value="1" id="1" onchange="filter();"/> 1 category</label></li>
                                <li><label><input type="checkbox" name="cat[]" value="2" id="2" onchange="filter();"/> 2 Category</label></li>
                                <li><label><input type="checkbox" name="cat[]" value="3" id="3" onchange="filter();"/> 3 Category</label></li>
                                <li><label><input type="checkbox" name="cat[]" value="4" id="4" onchange="filter();"/> 4 Category</label></li>
                    </ul>
                </div>

jQuery('.checklist li label').click(function(){

if(jQuery(this).parent().is(':first-child')){

        if(jQuery(this).children('input').is(':checked')){

            jQuery('.checklist li').addClass('check');
            jQuery('.checklist > a').text(jQuery(this).text());
            jQuery('.checklist input').attr('checked', true);
        } else {
            jQuery('.checklist > a').text("Select Categories");
            jQuery('.checklist li').removeClass('check');
            //jQuery('.checklist input').attr('checked', false);
            jQuery('.checklist input').removeAttr('checked');
        }

    }else{      

        if(jQuery(this).children('input').is(':checked')){

            jQuery(this).parent().addClass('check');
        } else {
            jQuery('.checklist > a').append("a");
            jQuery(this).parent().removeClass('check');
            jQuery('.checklist li:first-child').removeClass('check');
            //jQuery('.checklist li:first-child input').attr('checked', false);
            jQuery('.checklist li:first-child input').removeAttr('checked');
        }   
    }
}); 
```

# perl - Perl：如何从 MusicBrainz 中检索专辑元数据？

> ID：12999750
> 
> 赞同：3
> 
> 时间：2012-10-21T16:28:46.497
> 
> 标签：perl, musicbrainz

我正在创建一个 Perl 脚本，它将一个 mp3 文件以格式移动到我的音乐文件夹中`artist/album/mp3file`。现在可能我的一些 mp3 文件没有，`album tag`所以我想查询[MusicBrainz](http://musicbrainz.org/)数据库以检索给定的专辑元数据`track title & artist`。

我正在为此任务使用[WebService::MusicBrainz](http://search.cpan.org/~bfaist/WebService-MusicBrainz-0.93/lib/WebService/MusicBrainz.pm) Perl 模块，但我看不到任何提供专辑元数据信息的方法。我目前的代码是：

```
use WebService::MusicBrainz::Track;

my $ws = WebService::MusicBrainz::Track->new();
my $response = $ws->search({ ARTIST => 'Ryan Adams', TITLE => 'when the stars go blue'  }); 

my $track = $response->track();
print $track->title(), " - ", $track->artist()->name(), "\n";

say $track->id(); 
```

那么，如何使用 MusicBrainz 获取给定曲目的专辑信息，如果不可能，我的替代选择是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T00:42:11.597

首先，您想要的是将元数据添加到 mp3 中，这是人们最常见的使用场景。“正常”的方式是使用 Musicbrainz 标记器，在那里打开这些文件并使用界面附加正确的元数据。建议的（gui）工具是[Musicbrain Picard](http://musicbrainz.org/doc/MusicBrainz_Picard)

我还想声明 Perl 模块正在使用现已弃用的 MusicBrainz [Web 服务版本 1](http://musicbrainz.org/doc/XML_Web_Service/Version_1)。该 Web 服务有几个问题，因为它是为另一种数据库方案而不是 MusicBrainz 现在使用的数据库方案而设计的。

但是，当前的[Web 服务版本 2](http://musicbrainz.org/doc/XML_Web_Service/Version_2)只有一个可用的 python 库：[python-musicbrainzngs](http://python-musicbrainzngs.readthedocs.org/)。

您仍然可以使用 Perl 模块，但是如果您遇到“奇怪”的问题，这可能就是原因。

* * *

这就是 Web 服务的一般工作方式（以及它应该如何直接应用于 Perl 模块作为该 Web 服务的包装器）：您的搜索结果如下：

[http://musicbrainz.org/ws/1/track/?artist=%22Ryan%20Adams%22&title=%22when%20the%20stars%20go%20blue%22](http://musicbrainz.org/ws/1/track/?artist=%22Ryan%20Adams%22&title=%22when%20the%20stars%20go%20blue%22)

在那里，您可以获得该曲目的录音列表。这些重新编码发生在多个版本 (ReleaseList) 上。您可以忽略其中的许多，因为它们属于“编译”类型。您可能想要“专辑”版本。

您可能会问自己，为什么列表中有多个同名专辑。这是因为 MusicBrainz 上的“发布”是发布事件和几种媒体的组合。你可能有一个美国版本和一个德国豪华版等等。所有这些版本都在一个“版本组”中。

您可能想要这个“发布组”的名称，这通常也是该组中每个发布的名称。

您可能想了解一下[MusicBrainz 数据库](http://musicbrainz.org/doc/MusicBrainz_Database)的结构。

* * *

当然，这只是基本用例。您可能会遇到艺术家/标题拼写错误、多个或缺少专辑发行组和其他问题。但是，总的来说它应该可以工作，您可以将“问题”案例放在一个特殊的目录中，然后在 Picard 中使用它们。Picard 还有其他方法来识别每个“音乐分析”（PUID、Acoustids）的文件

* * *

编辑：

```
my @tracklist = $response->track_list();
foreach my $track ( @tracklist ) {
  print $track->title(), " - ", $track->artist()->name(), "\n";
  my @releaselist = $track->release_list();
  foreach my $release ( @releaselist ) {
    print "  ", $release->title(), " - ", $release->type();
  }
} 
```

一般应该可以工作，但事实并非如此。它为您提供响应的所有跟踪，但不知何故，它无法从 release_list() 中提取版本。可能是因为架构更改或因为 perl 模块已损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:18:02.313

查看我们的 perl 模块以访问封面艺术档案：

[http://metacpan.org/pod/Net::CoverArtArchive](http://metacpan.org/pod/Net%3a%3aCoverArtArchive)

有关我们档案的更多信息在这里，包括规格：

[http://coverartarchive.org/](http://coverartarchive.org/)

祝你好运！

# asp.net - ASP.NET Web API 未从远程服务获取 json 数据

> ID：12999757
> 
> 赞同：0
> 
> 时间：2012-10-21T16:29:08.557
> 
> 标签：asp.net, asp.net-ajax, asp.net-web-api

我正在按照[本教程](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/using-web-api-with-aspnet-web-forms)在 Web 表单网站中构建我的第一个 Asp.net Web API，但我遇到了一个问题。我创建了两个项目：

1.  **用于定义 Web 服务的 **宿主项目****
***   **使用 Web 服务的**客户端项目。******

 ****现在我的问题是，如果我使用 web 浏览器导航到我的 web api URL，`http://localhost:39930/api/products/`那么这将完美运行，并且根据浏览器返回 XML 或 Json 数据。

但是，如果我在客户端网站中使用 Web 服务 URL，则不会返回任何内容！

以下是我从客户端网站调用 Web 服务的方式：

```
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody id="products">
    </tbody>
</table>

 <script type="text/javascript">
     function getProducts() {
         $.getJSON("http://localhost:39930/api/products",
             function (data) {
                 $('#products').empty(); // Clear the table body.

                 // Loop through the list of products.
                 $.each(data, function (key, val) {
                     // Add a table row for the product.
                     var row = '<td>' + val.Name + '</td><td>' + val.Price + '</td>';
                     $('<tr/>', { text: row })  // Append the name.
                         .appendTo($('#products'));
                 });
             });
     }

     $(document).ready(getProducts);
</script> 
```

这是萤火虫中请求的快照：

![在此处输入图像描述](../Images/3feef76f94b57a92a9e5db937741ece7.png)

请注意，响应为空。

那么，我在这里做错了吗？是否应该添加一些配置以允许远程调用服务？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:36:58.573

这是因为您的宿主项目和客户端项目在不同的端口上运行，这违反了同源策略并被禁止。在此处查看详细信息[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

如果你想让它工作，你可以使用 jsonp 而不是 json。看看这篇文章[http://www.jquery4u.com/json/jsonp-examples/#.UISVao3iYsc](http://www.jquery4u.com/json/jsonp-examples/#.UISVAo3iYsc)****

# java - 在 Java Socket .readLine() 中处理一个或多个单词

> ID：12999763
> 
> 赞同：0
> 
> 时间：2012-10-21T16:30:06.673
> 
> 标签：java, arrays, sockets, eol

我正在构建一个应用程序，其中我有一个服务器和一个相互通信的客户端 -~~通过远程登录~~. （通过插座）。服务器程序正在监视一罐气体，并通过套接字将温度水平和压力水平发送到接受的客户端。

当我在 telnet 中写东西时，我已经设法让客户端和服务器相互通信，但是...... **我需要一些帮助来处理我发送的数据**。

我制作了一个登录脚本来确定用户是否是有效用户。所以我可以写两个词，如“myname”“space”“mypassword”，我得到一个绿灯并返回一个有效的用户。但是当我只写一个字，然后按回车键时，它给了我： *Exeption in thread... java.lang.Array.IndexOutOfBoundsExeption* EXEPT for when I write exit or logout！

（所有用户都在脚本中硬编码，以便于测试。（登录脚本本身工作正常，当我写错时返回有效用户=假。）这是我的代码。添加了一些伪代码，因为我我不是 100% 确定要做什么……；）

```
String telNetCommand = dataIn.readLine();
            System.out.println(telNetCommand);

            String dataInArray[] = telNetCommand.split(" ");

            user.isValid(dataInArray[0], dataInArray[1]);

            if (dataInArray[1] == "\n") {
            //Ignore login request and continue telnet-logging?
            } 
```

客户端应用程序对每个命令都有一个按钮，例如：

“每隔 n 秒向我发送一次数据”，或“每隔 n 秒向我发送一批数据。如果命令等于退出，或注销 -> 中断操作....

```
// --------------// USER INPUT FROM CLIENT APP //--------------------------//

            // --------------// CONTINUE ? //----------------------------//
            if (command.equals("CONTINUE")) {
                continueSession();
                else  {    //..Kill session
                }   
            }

            // --------------// SKIP <N> //----------------------------//
            if (command.equals("SKIP_N")) {
                skipEveryNthData();
            }

            // --------------// BATCH <N> //---------------------------//
            if (command.equals("BATCH_N")) {
                batchEveryNthData();
            }

            // --------------// LOGG OUT #1 //-------------------------//
            if (command.equals("logout") || command.equals("exit")) {
                break;
            } 
```

也许我现在有点困惑，但我认为我需要将所有数据放入一个数组中，并检查

```
if
dataInArray[0] == "CONTINUE"
dataInArray[0] == "SKIP_N", or
dataInArray[0] == "BATCH_N" 
(then send some data back)... 
```

和...

```
if dataInArray[1] == "enter" ("\n") execute the single word commands ...??
if dataInArray[0] == "LOG_IN" or "PASSWORD" check if valid user is true.. 
```

感谢您的帮助和/或提示！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:40:53.253

很可能是由以下`IndexOutOfBoundsExeption`原因引起的：

```
user.isValid(dataInArray[0], dataInArray[1]); 
```

确保传入`String` `telNetCommand`的内容至少包含一个空格，以便您在`Strings`数组中有 2 个空格。你可以这样做检查数组的大小：

```
if (dataInArray.length < 2) {
   throw new IllegalArgumentException(telNetCommand + " only contains " + dataInArray.length + " elements");
} 
```

另外，在另一个注意事项上，请确保`String.equals`在检查字符串内容时使用：

```
if ("\n".equals(dataInArray[1])) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:41:24.317

在这部分代码中：

```
String dataInArray[] = telNetCommand.split(" ");
user.isValid(dataInArray[0], dataInArray[1]); 
```

您假设该`telNetCommand`字符串包含一个空格。如果没有，`dataInArray`将只包含一个元素并`dataInArray[1]`抛出一个`IndexOutOfBoundsExeption`.

您应该检查数组的大小：

```
if (dataInArray.length < 2) {
    //no space in the command - do what you need to do
    //for example an error message
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:14:51.103

多谢你们。我现在没有收到任何错误......这就是我最终做的事情。我必须设置它 == 2 以免出现任何错误。

```
while (true) {
            String telnetCommand = dataIn.readLine();

            System.out.println(telnetCommand);

            String dataInArray[] = telnetCommand.split(" ");

            if (dataInArray.length == 2) {
                user.isValid(dataInArray[0], dataInArray[1]);
            }

            if (dataInArray.length < 2) {
                if (telnetCommand.equals("CONTINUE")) {
                    continueThisSession();
                    System.out.println("Running method continueThisSession");
                }

                if (telnetCommand.equals("SKIP_N")) {
                    skipEveryNthData();
                    System.out.println("Running method skipEveryNthData");
                }

                if (telnetCommand.equals("BATCH_N")) {
                    batchEveryNthData();
                    System.out.println("Running method batchEveryNthData");
                }

                if (telnetCommand.equals("logout")  || telnetCommand.equals("exit")) {
                    break;
                }
            }
        } 
```

和平 ：）

# php - PHP（以及扩展的 Apache）如何像客户端一样管理会话

> ID：12999765
> 
> 赞同：0
> 
> 时间：2012-10-21T16:30:21.010
> 
> 标签：php, python, session, rest

我有一个完整的 REST 设置，其中 PHP 服务器通过 XML 将 REST 请求发送到另一个 python 服务器。我想在 python 服务器上实现会话，以便在身份验证后，后续请求不必发送身份验证信息。

我已经实现了 python 位并使用网络浏览器进行了测试。它工作正常。但是，自从打印出 SESSION_ID 以来，从 php 脚本向所述 python 服务器执行请求似乎每次都会创建一个新会话，我为每个请求获取新值。

所以我的问题是，如何让 PHP(Apache) 服务器像普通浏览器一样保留会话状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:28:50.417

从另一个具有类似问题的问题中阅读，

> 无状态意味着 Web 服务器不存储有关客户端的任何状态。这并不排除 Web 服务器与之交谈的其他服务维护有关业务对象的状态，而不是有关客户端连接状态的状态。客户端状态不应该存储在服务器上，而是传递给需要它的每个人。这就是 REST 中的 ST 的来源，State Transfer。您转移状态而不是让服务器存储它。这是扩展到数百万用户的唯一方法。

会话管理的负载在所有客户端上分摊，客户端存储它们的会话状态，服务器可以以无状态方式为一个数量级或更多的客户端提供服务。

[这里的另一个问题](https://stackoverflow.com/questions/3105296/if-rest-applications-are-supposed-to-be-stateless-how-do-you-manage-sessions/3105337#3105337)

所以 ALL in ALL，尽管这个问题可能存在“hacks”和“workarounds”，但似乎从根本上说，在 REST-full 请求之间维护状态服务器端否定了原始架构设计。

# arrays - 无法让 CCPointArray 在 Cocos2D-x 中工作

> ID：12999771
> 
> 赞同：0
> 
> 时间：2012-10-21T16:30:58.590
> 
> 标签：arrays, point, cocos2d-x

我想创建一个点数组（_grid）。但是，除了创建它的函数之外，我似乎无法在任何地方使用此 CCPointArray。我尝试在我的类中将其公开并在我的标题中声明它，但都失败了。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:33:49.400

后

```
CCPointArray* p = CCPointArray::create(8); 
```

你打电话了吗

```
p->retain(); 
```

?

并记得在你的析构函数或 onExit() 中释放它；

在您的 YOUR_CLASS.h 文件中

```
class YOUR_CLASS : public cocos2d::CCLayer {
    CCPointArray* p;
public:
    CREATE_FUNC(YOUR_CLASS);
    bool init();
    void onExit();
} 
```

在您的 YOUR_CLASS.cpp 文件中

```
bool YOUR_CLASS::init(){
    if(CCLayer::init()){
         p = CCPointArray::create(8);
         p->retain();
         return true;
    }
    return false;
}

void YOUR_CLASS::onExit(){
    CCLayer::onExit();
    p->release();
    p = NULL;
} 
```

# r - 通过名称的模糊匹配创建唯一 ID（通过使用 R 的 agrep）

> ID：12999772
> 
> 赞同：8
> 
> 时间：2012-10-21T16:31:00.293
> 
> 标签：r, string-matching, fuzzy, agrep

使用 R，我正在尝试匹配按年份和城市构建的数据集中的人名。由于一些拼写错误，完全匹配是不可能的，所以我尝试使用 agrep() 来模糊匹配名称。

数据集的一个样本块的结构如下：

```
df <- data.frame(matrix( c("1200013","1200013","1200013","1200013","1200013","1200013","1200013","1200013",                             "1996","1996","1996","1996","2000","2000","2004","2004","AGUSTINHO FORTUNATO FILHO","ANTONIO PEREIRA NETO","FERNANDO JOSE DA COSTA","PAULO CEZAR FERREIRA DE ARAUJO","PAULO CESAR FERREIRA DE ARAUJO","SEBASTIAO BOCALOM RODRIGUES","JOAO DE ALMEIDA","PAULO CESAR FERREIRA DE ARAUJO"), ncol=3,dimnames=list(seq(1:8),c("citycode","year","candidate")) )) 
```

整洁的版本：

```
 citycode year                      candidate
1  1200013 1996      AGUSTINHO FORTUNATO FILHO
2  1200013 1996           ANTONIO PEREIRA NETO
3  1200013 1996         FERNANDO JOSE DA COSTA
4  1200013 1996 PAULO CEZAR FERREIRA DE ARAUJO
5  1200013 2000 PAULO CESAR FERREIRA DE ARAUJO
6  1200013 2000    SEBASTIAO BOCALOM RODRIGUES
7  1200013 2004                JOAO DE ALMEIDA
8  1200013 2004 PAULO CESAR FERREIRA DE ARAUJO 
```

我想分别在每个城市查一下，几年后是否有候选人出现。例如在示例中，

> 保罗·塞扎尔·费雷拉·德·阿劳霍
> 
> 保罗·塞萨尔·费雷拉·德·阿劳霍

出现两次（有拼写错误）。应为整个数据集中的每个候选人分配一个唯一的数字候选人 ID。数据集相当大（5500 个城市，大约 100K 条目），因此稍微有效的编码会有所帮助。关于如何实现这一点的任何建议？

编辑：这是我的尝试（在迄今为止的评论的帮助下）完成手头的任务非常缓慢（效率低下）。对此有何改进建议？

```
f <- function(x) {matches <- lapply(levels(x), agrep, x=levels(x),fixed=TRUE, value=FALSE)
                  levels(x) <- levels(x)[unlist(lapply(matches, function(x) x[1]))]
                  x
                }

temp <- tapply(df$candidate, df$citycode, f, simplify=TRUE)
df$candidatenew <- unlist(temp)
df$spellerror <- ifelse(as.character(df$candidate)==as.character(df$candidatenew), 0, 1) 
```

编辑2：现在以良好的速度运行。问题是在每一步都与许多因素进行比较（感谢蓝魔导师指出这一点）。将比较减少到仅一组（即一个城市）中的候选人在 5 秒内运行 80,000 行命令 - 这是我可以忍受的速度。

```
df$candidate <- as.character(df$candidate)

f <- function(x) {x <- as.factor(x)
                  matches <- lapply(levels(x), agrep, x=levels(x),fixed=TRUE, value=FALSE)
                  levels(x) <- levels(x)[unlist(lapply(matches, function(x) x[1]))]
                  as.character(x)
                }

temp <- tapply(df$candidate, df$citycode, f, simplify=TRUE)
df$candidatenew <- unlist(temp)
df$spellerror <- ifelse(as.character(df$candidate)==as.character(df$candidatenew), 0, 1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:55:51.977

这是我的镜头。它可能不是很有效，但我认为它会完成工作。我认为这`df$candidates`是阶级因素。

```
#fuzzy matches candidate names to other candidate names
#compares each pair of names only once
##by looking at names that have a greater index
matches <- unlist(lapply(1:(length(levels(df[["candidate"]]))-1),
    function(x) {max(x,x + agrep(
        pattern=levels(df[["candidate"]])[x], 
        x=levels(df[["candidate"]])[-seq_len(x)]
    ))}
))
#assigns new levels (omits the last level because that doesn't change)
levels(df[["candidate"]])[-length(levels(df[["candidate"]]))] <- 
    levels(df[["candidate"]])[matches] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T17:12:15.450

好的，鉴于重点是效率，我建议以下。

首先，请注意，按照第一原则的效率顺序，我们可以预测精确匹配将比 grep 快得多，而 grep 将比模糊 grep 快。所以完全匹配，然后对剩余的观察结果进行模糊 grep。

其次，矢量化并避免循环。这些`apply`命令不一定更快，所以如果可以的话，请坚持使用本机矢量化。所有`grep`命令都是本机矢量化的，但是很难避免使用`*ply`or 循环将每个元素与要匹配的其他元素的向量进行比较。

第三，利用外部信息缩小问题范围。仅对每个城市或州内的名称进行模糊匹配，例如，这将大大减少必须进行的比较次数。

您可以结合第一个和第三个原则：您甚至可以尝试对每个字符串的第一个字符进行精确匹配，然后在其中进行模糊匹配。

# python - 为 sshfs 设置环境

> ID：12999774
> 
> 赞同：1
> 
> 时间：2012-10-21T16:31:18.277
> 
> 标签：python, environment-variables, sshfs

`sshfs`如果远程主机不支持本地语言环境 (LC_ALL)，则挂载失败。Goolge 搜索将我指向[www.knoppixforum.de](http://www.knoppixforum.de/knoppix-forum-deutsch/netzwerk/thread4766/knoppix-6-4-ssh-funktioniert-sshfs-nicht.html)，了解如何在 bash 上处理此问题。

但我需要`sshfs`从`python`. （失败的）命令如下所示：

```
import subprocess
subprocess.check_call(['sshfs', 'HOST:~/SRC', '~/DST']) 
```

另一个搜索将我指向['Set locale encoding in python'](https://stackoverflow.com/a/11205786)。所以我认为它应该看起来像：

```
import os, subprocess
env = os.environ.copy()
env['LC_ALL'] = 'en_US.UTF-8'
subprocess.check_call(['sshfs', 'HOST:~/SRC', '~/DST'], env = env) 
```

但这也行不通。我认为它失败是因为 sshfs 为 ssh 派生了一个新进程，它不擅长我的环境变量？

错误信息总是：`remote host has disconnected`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:37:47.240

哈哈，我自欺欺人了！我的上述方法确实有效。除了“en_US.UTF-8”在我用于测试的机器上不可用。在 bash 测试期间，我之前使用过 'de_DE.UTF-8'。

使用 LC_ALL='C' 一切都按预期工作。所以正确的解决方案是：

```
import os, subprocess
env = os.environ.copy()
env['LC_ALL'] = 'C'
subprocess.check_call(['sshfs', 'HOST:~/SRC', '~/DST'], env = env) 
```

# android - 系统服务不可用 需要设计故障帮助

> ID：12999775
> 
> 赞同：0
> 
> 时间：2012-10-21T16:31:29.367
> 
> 标签：android, listactivity

我浏览了其他帖子，发现我正在通过 new 运算符初始化活动来做我不应该做的事情。

基本上我有两个活动类 PlayListActivity（扩展 ListActivity）和 MainActivity。我在 PlayListActivity 中有一个公共函数，我需要在 MainActivity 中调用它。我应该如何做到这一点？我需要遵循什么模式吗？我还有一个问题，我想在没有通过意图的情况下在我的 Activity 布局中单击按钮时启动此功能（定义驻留在 ListActivity 中）。有办法吗？如果是的话，请给我举个例子。

一个新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:44:28.963

2种常见的方法来做到这一点：

第一个选项：扩展应用程序并公开两个活动之间的接口：

`public class MyApplication extends Application {`

```
private static MyApplication singleton;
public ListAcvitiy2MainActivityItf ltm;
public MainActivity2ListActivityItf mtl;

@Override
public void onCreate() {
    super.onCreate();
    singleton = this;
}

public MyApplicatoin getInstance(){
    return singleton;
} 
```

`}`

在每个接口中，声明要公开的方法：

```
public interface ListAcvitiy2MainActivityItf {
    public void someMethod();
} 
```

并在清单中声明 MyApplication：

```
<application
    android:icon="@drawable/launch_icon"
    android:label="@string/app_name"
    android:launchMode="singleTask"
    android:name="MyApplication"> 
```

第二种选择：在每个活动中定义一个 Handler 并使用 Handler.sendMessage 在活动之间发送消息：

private Handler mHandler = new Handler() { @Override public void handleMessage(Message msg) {...

# objective-c - 核心数据、iVar 和类别

> ID：12999778
> 
> 赞同：1
> 
> 时间：2012-10-21T16:31:39.540
> 
> 标签：objective-c, ios, cocoa, core-data, categories

我的一个核心数据子类有一个`NSSet`. `items`取而代之的是（但并非总是，所以没有`NSOrderedSet`）有用的是，而不是检索一个有序的`NSArray`，所以我添加`orderedItems`到类中，对它们进行排序。

然后我遇到了性能问题，所以决定尝试缓存`orderedItems`. 我的计划是在课堂上使用 iVar，`_cachedOrderedItems`如果它不为空，我将返回它。

障碍来自我对类别的使用。我阅读了一些关于将所有自定义代码放在一个类别中的好建议，这样我就可以在必要时重新生成核心数据类，而不会丢失所有自定义。这些定制之一是`orderedItems`方法。

似乎我无法在类别本身中声明 iVar。如果我尝试将其放在核心数据类中，则无法在类别中访问它。

我是否需要将自定义代码移回核心数据类？还是我错过了什么？

我也听说过 Mogenerator，如果有帮助，我会考虑学习使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:28:48.157

您拥有该类，因此您可以使用类延续（在[此处](https://stackoverflow.com/questions/10301661/what-is-an-objective-c-class-continuation)讨论）而不是类别。这允许您添加实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:41:43.283

只要您无法修改原始类（包括类别），就可以使用[关联引用将 ivars 添加到类中。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/ocAssociativeReferences.html)有关详细示例，请参阅[使用关联引用在 Objective-C 类别中伪造实例变量](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T20:54:18.673

你绝对应该使用 mogenerator。参见例如[http://importantshock.wordpress.com/2006/12/19/mogenerator-or-how-i-nearly-abandoned-core-data/](http://importantshock.wordpress.com/2006/12/19/mogenerator-or-how-i-nearly-abandoned-core-data/)。

您可以在 XCode 中创建一个聚合目标，添加一个运行脚本，其中包含以下内容：

```
mogenerator -m path/to/your/datamodel.xcdatamodeld/version.xcdatamodel --template-var arc=true -M /CoreData/Generated -H /CoreData 
```

对于每一个`NSManagedObject`你得到一个类和一个子类。更新数据模型时，再次运行脚本，基类将被更新，保留您对托管对象子类所做的所有更改。删除`--template-var arc=true`无弧。

# android - 模拟器启动期间的 Android OpenGL 错误

> ID：12999782
> 
> 赞同：2
> 
> 时间：2012-10-21T16:32:17.380
> 
> 标签：android, opengl-es

我已经更新了所有 SDK 并安装了所有必要的组件。我的*代码没有任何错误*，但是每当我在模拟器中启动任何 Android 应用程序时，我都会在控制台中收到以下错误。***之后模拟器正常工作，应用程序运行完美。***

**`Error :`**

```
[2012-10-21 21:50:57 - MushTouch] ------------------------------
[2012-10-21 21:50:57 - MushTouch] Android Launch!
[2012-10-21 21:50:57 - MushTouch] adb is running normally.
[2012-10-21 21:50:57 - MushTouch] Performing swayam.dev.mushtouch.MushTouchActivity activity launch
[2012-10-21 21:50:57 - MushTouch] Automatic Target Mode: Preferred AVD 'Tablet_4.1' is not available. Launching new emulator.
[2012-10-21 21:50:57 - MushTouch] Launching a new emulator with Virtual Device 'Tablet_4.1'
[2012-10-21 21:50:58 - Emulator] Failed to create Context 0x3005
[2012-10-21 21:50:58 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2012-10-21 21:50:58 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-21 21:50:58 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-21 21:50:58 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-21 21:50:58 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-21 21:50:58 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-21 21:50:58 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-21 21:50:58 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-21 21:50:58 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-21 21:50:58 - MushTouch] New emulator found: emulator-5554
[2012-10-21 21:50:58 - MushTouch] Waiting for HOME ('android.process.acore') to be launched... 
```

在此之后，一切正常。我知道这对应用程序开发并没有太大的障碍，因为此后一切正常，但我仍然想知道这个错误背后的原因。我是否缺少任何组件？我的系统不支持任何东西吗？错误的可能原因是什么？

**我的开发环境：** Windows 7 Ultimate 32 Bit、Eclispe Juno、JDK 1.6 和 1.7

谢谢！

# html - CSS标头定位

> ID：12999787
> 
> 赞同：0
> 
> 时间：2012-10-21T16:32:45.447
> 
> 标签：html, css

只是一个简单的问题：

我有这个html：

```
<div class="container">
  <div id="header">
   <div id="navbar">
   </div>
  </div>
</div> 
```

和 CSS：

```
.container {
    position: relative;
    text-align: left;
    width: 100%;
    background-color: yellow;
}

#header {
    position: relative;
    background-color: red;
    height: 120px;
    width: 960px;
    margin: auto;
} 
```

我的标题（红色容器从左到右拉伸 100%）但我希望它在给定宽度的中间宽度；请帮帮我=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:34:05.310

试试css

```
 #header{ margin:0 auto;} 
```

[**jsFiddle**](http://jsfiddle.net/cHKF4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T16:45:35.693

你可能想做

```
#header {
margin-left:auto;
margin-right:auto;
} 
```

这将使 div 水平居中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T16:39:41.190

你可以做

```
#header{margin:0 auto;} 
```

或者

```
#header{position: absolute; left:50%; margin-left: -480px;} 
```

# linq - 实体框架、LINQ 和模式

> ID：12999789
> 
> 赞同：0
> 
> 时间：2012-10-21T16:32:58.043
> 
> 标签：linq, entity-framework, design-patterns

我已经开始在一个项目中使用 EF 和 LINQ，我正在尝试确定要使用的最佳方法/模式。到目前为止，我一直在使用基于 DataSet 和 XML 配置的自定义持久性框架。基本上，它是一个 VS 自定义工具，可以读取 XML 配置文件和数据集，并生成具有所有必要属性/关联/方法的面向对象类。然后从 UI 中使用这个自动生成的类，我可以灵活地只公开 UI 需要的内容。

现在有了 EF 和 LINQ，我对 UI 可以直接使用自动生成的类和所有 LINQ 东西的想法感到不舒服。似乎这种方法将在 UI 和数据库之间进行非常紧密的集成。

所以我正在寻找一些能够“隐藏”所有 EF 和 LINQ 好东西并基本上限制 UI 可以做什么的模式。有没有标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:12:39.080

您正在寻找的是一个 n 层应用程序。它与其说是一种模式，不如说是一种架构。你将你的应用程序分成 2 个或更多部分，通常由 UI、业务和数据组成的 3 个部分。您可以通过其他模式（例如 Facade 或 Repository 模式）来实现这一点，以保持关注点的强分离。

您还可以使用服务层，它可以通过外观或 Web 服务来实现。

理想情况下，您将通过称为 DTO 或数据传输对象的对象传递数据，并且您可以通过在 UI 中使用视图模型来调整这些 DTO（不要与另一张海报错误提到的 MVVM 混淆。）

除此之外，很大程度上取决于您正在构建的应用程序的类型。桌面应用程序、服务器应用程序、Web 应用程序等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:27:18.130

您正在寻找的模式通常是模型-视图-视图模型或 MVVM。

这是一个似乎触及设计模式高点的教程：http: [//cshaperimage.jeremylikness.com/2010/04/model-view-viewmodel-mvvm-explained.html](http://csharperimage.jeremylikness.com/2010/04/model-view-viewmodel-mvvm-explained.html)

# interface - 如何在没有 gedit 的情况下修改 /etc/network/interfaces？

> ID：12999791
> 
> 赞同：0
> 
> 时间：2012-10-21T16:33:19.080
> 
> 标签：interface, permissions, gedit

我正在做一个脚本，我想添加以下行

```
pre-up iptables-restore < /etc/iptables.rules 
```

到位于*/etc/network/interfaces*的文件接口，但是虽然我已经启用了在这个文件中写入的权限（我在 Ubuntu 中工作），但我无法做到......我正在尝试在我的 bash 脚本中使用以下命令

```
sudo echo "pre-up iptables-restore < /etc/iptables.rules" >> /etc/network/interfaces 
```

关于如何在不使用 gedit o vi 的情况下执行此操作的任何建议？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:46:02.783

您需要告诉 bash 在启动 sudo 之前不要使用重定向：

```
sudo bash -c 'echo "pre-up iptables-restore < /etc/iptables.rules" >> /etc/network/interfaces' 
```

这样，完整的命令将以 root 访问权限执行，而不仅仅是`echo "pre-up iptables-restore < /etc/iptables.rules"`部分

# c++ - 当html代码存储在QString中时，如何在默认浏览器中打开html页面

> ID：12999792
> 
> 赞同：1
> 
> 时间：2012-10-21T16:33:21.617
> 
> 标签：c++, qt, temporary-files

我的 Qt 应用程序应该打开一个**html 页面**（使用默认浏览器，例如 IE）。此 html 代码存储在`QString`.

打开这个“文件”的最佳方式是什么，我只有其中的内容？

这`QTemporaryFile`是答案吗？或者这可以更容易完成吗？

```
QString content = "<html>...</html>";
?
QDesktopServices::openUrl(QUrl("...")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:27:48.143

QTemporaryFile 方法是迄今为止最容易完成任务的方法。

除了用 ActiveQt 做一些“伏都教”之外，我没有看到任何其他方式，如果这有效的话。

最好的祝福。

编辑：一个例子

```
QString htmlData; // your HTML data here

// The six Xs are actually required.
QTemporaryFile tmpFile( QLatin1String( "thefileXXXXXX.html" ) );
tmpFile.open();
QTextStream out( &tmpFile )
out << htmlData;
tmpFile.close();
QDesktopServives::openUrl( QUrl::fromLocalFile( tmpFile.fileName() ) ); 
```

# css - 项目多行时如何在同一行显示字段标签和字段项？

> ID：12999794
> 
> 赞同：0
> 
> 时间：2012-10-21T16:33:28.467
> 
> 标签：css

我想显示一个国家列表：

**国家：**安哥拉、博茨瓦纳、布隆迪、科摩罗、刚果民主共和国、吉布提、埃及、厄立特里亚、埃塞俄比亚、肯尼亚、莱索托、利比亚、马达加斯加、马拉维、毛里求斯、莫桑比克、纳米比亚、卢旺达、塞舌尔、南非、苏丹、斯威士兰、坦桑尼亚、乌干达、赞比亚、津巴布韦。

但是当我尝试这样做时，我得到以下结果

**国家：**

安哥拉、博茨瓦纳、布隆迪、科摩罗、刚果民主共和国、吉布提、埃及、厄立特里亚、埃塞俄比亚、肯尼亚、莱索托、利比亚、马达加斯加、马拉维、毛里求斯、莫桑比克、纳米比亚、卢旺达、塞舌尔、南非、苏丹、斯威士兰、坦桑尼亚、乌干达、赞比亚、津巴布韦。

但是，如果国家/地区列表适合一行，则可以正常工作：

**国家：**安哥拉、博茨瓦纳、布隆迪

我该如何解决？这是代码

```
<div class="field field-type-list-text field-label-inline clearfix">
  <div class="field-label">Country:</div>
<div class="field-items">
      <div class="field-item even"><div class="textformatter-list">Algeria, Angola, Benin, Botswana, Burkina Faso, Burundi, Cameroon, Cape Verde, Central African Rep, Chad, Comoros, Congo, Congo {Democratic Rep}, Djibouti, Egypt, Equatorial Guinea, Eritrea, Ethiopia, Gabon, The Gambia, Ghana, Guinea Conakry, Guinea-Bissau, Ivory Coast, Kenya, Lesotho, Liberia, Libya, Madagascar, Malawi, Mali, Mauritania, Mauritius, Mozambique, Namibia, Niger, Nigeria, Rwanda, Sahrawi Arab Dem. Rep., Sao Tome &amp; Principe, Senegal, Seychelles, Sierra Leone, Somalia, South Africa, Sudan, Swaziland, Tanzania, Togo, Tunisia, Uganda, Zambia and Zimbabwe</div></div>
  </div> 
```

```
.field-label, .field-label-inline .field-items {
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:37:44.603

```
.field-label, .field-items, .field-item, .textformatter-list {
    display: inline;
}​ 
```

这行得通。

[演示](http://jsfiddle.net/KkyTw/)

# mysql - 如何在 Windows 上的 MySQL 上运行 innodb_force_recovery

> ID：12999795
> 
> 赞同：4
> 
> 时间：2012-10-21T16:33:32.743
> 
> 标签：mysql, innodb

我需要以强制恢复模式启动 MySQL。我在[这里](http://dev.mysql.com/doc/refman/5.0/en/forcing-innodb-recovery.html)看到了关于 innodb_force_recovery 的文档：但它建议在我的“选项文件”中添加一行。

我不知道选项文件是什么，也不知道它在 Windows 中的位置。我基本上是[在这里](http://www.nerdydork.com/restoring-mysql-innodb-files-on-windows.html)尝试按照这篇文章进行操作，但没有使用`XAMPP`并且一直停留在关于在恢复模式下启动 MySQL 的部分。

谁能告诉我如何在 Windows 7 上使用“innodb_force_recovery = 6”启动 MySQL？

非常感谢任何指针的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T18:25:07.887

我找到了。我能够将其作为规则添加到此文件中：

```
C:\Program Files\MySQL\MySQL Server 5.1\my.ini 
```

我必须在记事本中使用管理员权限进行编辑。

# c++ - 如何利用核心文件查找 C/C++ 中的应用程序问题？

> ID：12999797
> 
> 赞同：1
> 
> 时间：2012-10-21T16:33:42.770
> 
> 标签：c++, file, debugging, core

我不知道如何使用核心文件找到 C/C++ linux 应用程序问题的根本原因。我了解当应用程序发生意外情况时会生成核心文件。但我不知道从哪里开始。谁能给我一个快速的开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:53:25.953

“gdb”是您可以用来分析 Linux 核心转储的主要工具。这里有几个很好的教程：

*   [RMS 的 GDB 教程](http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html)

*   [http://www.gentoo.org/proj/en/qa/backtraces.xml](http://www.gentoo.org/proj/en/qa/backtraces.xml)

*   [Howto：像专业人士一样调试崩溃的 Linux 应用程序](http://www.cyberciti.biz/tips/linux-core-dumps.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:54:23.847

[从这里](http://www.unix.com/unix-advanced-expert-users/19128-how-do-core-dump-analysis.html)学习分析核心转储。这是我学习的地方。是的，它使用 GDB。

而[这](http://www.unknownroad.com/rtfm/gdbtut/gdbuse.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T10:26:03.600

一些通用帮助：

使用以下命令安装 gdb：

百胜安装gdb

**gdb**启动 GDB，没有调试文件

**gdb program**开始调试程序

**gdb program core** debug 程序产生的 coredump core

**gdb --help**描述命令行选项

1-首先找到生成核心文件的目录。2-然后在目录中使用“ls -ltr”命令查找最新生成的corefile。3-加载核心文件使用

**核心文件的 gdb 二进制路径**

这将加载核心文件。

4-然后您可以使用“bt”命令获取信息。对于详细的回溯，请使用“bt full”。

5- 要打印变量，请使用“print varibale-name”或“p varibale-name”

6- 要获得有关 gdb 的任何帮助，请使用“帮助”选项或使用“apropos search-topic”

7-使用“帧帧号”转到所需的帧号。

8- 使用“up n”和“down n”命令分别选择向上 n 帧和向下选择 n 帧。

9- 要停止 gdb，请使用“quit”或“q”。

# php - 使用 PHP 和 MySQL 进行多重搜索分页

> ID：12999799
> 
> 赞同：1
> 
> 时间：2012-10-21T16:33:53.360
> 
> 标签：php, mysql, sql, select

我在下面有以下查询，它使用 的`GET`值`fname`并将`lname`其与数据库表进行比较：

```
$query = mysql_query("SELECT * FROM pages
                      WHERE `fname` = '$fname' OR `lname` = '$lname'
                      LIMIT $start, $perpage")
         or die(mysqli_error()); 
```

当我运行代码时，它只考虑`'lname' = '$lname'`语句。

我想要它做的是搜索`fname`or`lname`变量，或者如果它们都设置了，则搜索两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:15:09.840

查询`LIKE`

```
$query = mysql_query("SELECT * FROM pages
                        WHERE `fname` LIKE '%$fname%' AND `lname` LIKE '%$lname%'
                        LIMIT $start, $perpage
                    "); 
```

# c# - 在创建 XDocument 之前检查 XML

> ID：12999802
> 
> 赞同：1
> 
> 时间：2012-10-21T16:34:06.623
> 
> 标签：c#, xml, linq-to-xml

我通过 Xdocument 加载 xml：

```
XDocument document = new XDocument();
                document = XDocument.Load(filepath);
                var list = document.Element("Items").Elements("Item").Select(Items.FromXElement).ToList(); 
```

如果 Xml 文件不包含元素“Item”或“Items”，程序会发生 NullReference 异常。在此异常之前，我如何检查我的 xml 文件中的元素内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:51:13.447

做这件事有很多种方法：

**选项 1：XPath**

```
using System.Xml.XPath;

var list = document.XPathSelectElements("/Items/Item").Select(Items.FromXElement).ToList(); 
```

**选项 2：辅助方法**

```
static class XExtensions
{
    public static XElement ElementOrEmpty(this XContainer container, XName name)
    {
        return container.Element(name) ?? new XElement(name);
    }
}

var list = document.ElementOrEmpty("Items").Elements("Item").Select(Items.FromXElement).ToList(); 
```

**选项 3：[根据模式验证 XML 文档](http://msdn.microsoft.com/en-us/library/bb354954.aspx)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:51:43.127

尝试使用 XPath。通过 LinqPad 运行：

```
XDocument doc = XDocument.Parse("<?xml version=\"1.0\" encoding=\"UTF-8\"?>" +
"<Items>" +
  "<Item>" +
  "</Item>" +
"</Items>");

var items = doc.Root.XPathSelectElements(@"//Items/Item");

items.Dump(); 
```

如果不`Items`存在，将返回一个空的 IEnumerable。

# python - Python 语法的新手 - 错误 - 怀疑使用单/双引号

> ID：12999806
> 
> 赞同：0
> 
> 时间：2012-10-21T16:34:34.470
> 
> 标签：python

这是我第一次使用 Python，并且在尝试运行脚本时收到了附加消息。

这是代码（第 32 行是从“font-size:...”开始的行：

```
# County style
'font-size:12px;fill-rule:nonzero;stroke:#FFFFFF;stroke-opacity:1;
stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;
marker-start:none;stroke-linejoin:bevel;fill:' 
```

任何有帮助的人可以告诉我这里发生了什么吗？![在此处输入图像描述](../Images/7e3d59e3095c44bf26f4ea973e1b1289.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:41:20.347

您正在使用多行字符串，您需要三引号（`'''`或`"""`）。例子：

```
'''font-size:12px;fill-rule:nonzero;stroke:#FFFFFF;stroke-opacity:1;
stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;
marker-start:none;stroke-linejoin:bevel;fill:''' 
```

# php - 在php中找到一个4个目录的文件

> ID：12999809
> 
> 赞同：0
> 
> 时间：2012-10-21T16:34:53.087
> 
> 标签：php, include, directory, root

即使使用多个查找文件，我也无法找到`../`该文件：

```
root -> public -> secure -> lock  -> login / "data.php"
                            panel -> data -> list / "list.php" 
```

我想包含`data.php`我的`list.php`并尝试执行以下操作来包含数据：

```
include("../../../../lock/login/data.php");
include("../../../lock/login/data.php");
and also
include("../../lock/login/data.php"); 
```

但是，这似乎不起作用，但是如果我将它放在旁边`list.php`并执行以下操作，它会很好地读取数据：

```
include("data.php"); 
```

我的代码做错了什么，执行此操作的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:19:13.587

**学习使用**：

```
__FILE__; // for your current file path
dirname(__FILE__) or __DIR__; // for your current file parent folder
$_SERVER['DOCUMENT_ROOT']; // for your sites inception folder, your pivotal point 
```

这应该让你上路。**然后你可以**：

```
include __DIR__.'/../file-REALLY-relative-to-directory-of-edit-file.php';
include $_SERVER['DOCUMENT_ROOT'].'/absolute-path-reliable-for-your-site.php'; 
```

**永远不要做 RELATIVE INCLUDES LIKE** *（当前目录可以改变和破坏你的世界）*：

```
include 'an-unreliable-NOT-REALLY-relative-file.php'; 
```

*希望能帮助到你！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:39:25.887

请改用 phps`include_path`功能并指定那些包含要包含的 php 脚本的目录。更轻松、更安全。

# c++ - 容器超出范围和内存管理

> ID：12999810
> 
> 赞同：1
> 
> 时间：2012-10-21T16:35:14.967
> 
> 标签：c++, stdlist

> **可能重复：**
> [std::list::remove 方法是否调用每个已删除元素的析构函数？](https://stackoverflow.com/questions/4260464/does-stdlistremove-method-call-destructor-of-each-removed-element)

假设我有这个：

```
void f(...)
{
    .
    .
    std::list<X*> xList;
    . 
    // Then i fill the list
    std::list<X*>::iterator iter;
    for (iter = xList.begin(); iter != xList.end(); ++iter)
    {
         *iter = new X();
    }

} 
```

当 xList 超出范围时，我知道容器应该调用列表中包含的对象的析构函数吗？首先，这是真的吗？

如果是这样，那么由于列表包含指向类 X 的指针，当 xList 超出范围时，不应该调用 X 的析构函数吗？从而释放 X 持有的任何内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:40:29.260

是和不是。每个元素的析构函数都会被调用。但是，这不会产生您想要的效果。元素是 type `X*`，因此`X*`将调用 of 的析构函数（对指针类型没有任何作用），而不是您需要的 X 的析构函数。您需要明确删除您的元素。一般来说，如果你`new`的代码中有，应该有一个对应的`delete`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:46:00.627

在 C++ 标准库设计中，容器是所包含元素的唯一所有者，因此当容器被销毁时，所有元素都将被销毁。

但是请注意，在 C++ 中“销毁”裸指针是无操作的，因此不会删除指向的元素（裸指针可能指向静态分配的数据或其他容器拥有的数据）。

你可以做的是创建一个`std::list`元素（而不是指向元素的指针）或者（如果你需要一个指针，例如，多态性）你可以使用智能指针来处理指向的元素，如果你喜欢这样。

# sql - 当 SQL Developer 空闲时，我失去了连接

> ID：12999811
> 
> 赞同：17
> 
> 时间：2012-10-21T16:35:21.263
> 
> 标签：sql, oracle-sqldeveloper

我的问题是：我在我的台式计算机上使用 VMWare 在虚拟机上的 Windows 98 上运行 Oracle 10G。我可以使用 SQL Developer（在我的桌面上而不是在虚拟机上）连接到多个用户（SYS、HR、OE、...），但是如果短时间内不运行任何 SQL 语句，比如说 2分钟后，我失去了连接并收到连接关闭或 IO-fault:connection reset by peer 之类的错误。

这可能与 sp_reset_connection 有关吗？

当我在我的虚拟机上打开 SQL Plus 时，我根本不会失去连接，即使它已经空闲了 30 分钟或更长时间。所以现在我认为虚拟机和我的台式计算机之间可能存在问题。在此之前一切正常。

我尝试关闭最近安装的反恶意软件应用程序，但没有任何结果。有人知道我能做些什么来解决这个问题吗？

亲切的问候，维克

* * *

我偶然发现了 Keep-ALive Extension 并尝试了它，但没有成功。标准设置为 2 分钟间隔。我已将此值更改为 1 和 60 分钟，但是一旦我停止运行语句一小段时间，我就会失去连接。一定有别的东西。我已经安装了最新的 SQL Developer 版本，但它仍然是一样的。（我确实从早期版本中导入了设置，也许我必须尝试不导入它们。）也许还有其他建议？

亲切的问候，

维克

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-11-20T08:10:49.120

此扩展适用于 SQL Developer 4：

[https://github.com/scristalli/SQL-Developer-4-keepalive](https://github.com/scristalli/SQL-Developer-4-keepalive)

**免责声明**：我是扩展程序的开发人员。我希望答案不被认为是广告，因为这个扩展是开源的（并且之前的非开源扩展被接受为答案）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T18:48:47.410

MinChen Chai 为您的情况创建了 Keep-Alive 扩展： [https ://sites.google.com/site/keepaliveext](https://sites.google.com/site/keepaliveext)

它将不断发送 TCP 保持活动数据包并防止服务器因不活动超时而断开连接。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-09T02:43:40.287

When used with the latest SQL Developer Version 4.0.0.13:
- MinChen's extension ([http://sites.google.com/site/keepaliveext](http://sites.google.com/site/keepaliveext)) doesn't work.
- The keepconnext extension ([http://sites.google.com/site/keepconnext](http://sites.google.com/site/keepconnext)) too doesn't work anymore.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-11-20T14:05:40.787

在 SQL Developer 上，转到工具 > 首选项 > 数据库 > 实例查看器。并且选项流量持续时间将其更改为最大值，这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-13T11:15:28.120

转到工具 > 监控会话...并选择您的连接。将刷新值设置为 60（秒）。

监控时，您的连接不会丢失。

*Oracle SQL 开发者版本 4.1.3.20*

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-12-18T14:40:48.937

由于此线程中建议的扩展在 SQL Developer 的最新版本中存在问题，我尝试了自己的方法，并让 scristalli 的代码在基于他的代码和 oracle 示例 repo的[新项目中工作。](https://github.com/alfabravoteam/SQLDeveloper-keepalive)

需要做很多工作，但是哦，好吧，至少我可以在 SQLDev v19.2 上安装新版本并且它可以按预期工作。

*免责声明：我是链接 repo 的所有者，尽管它是以前版本的 MIT。随意 fork 它，pullrequest-it 或随心所欲*

# ios - UITableView 索引在第 14 个字母后重复

> ID：12999812
> 
> 赞同：1
> 
> 时间：2012-10-21T16:35:25.607
> 
> 标签：ios, uitableview

我正在尝试制作一个带有索引的字母表，当我单击前 14 个字母时，它会显示正确的字母，但之后它会不断重复并只显示第 14 个字母。请帮助..这是我的代码：（字母不是英文:)）

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _arr=[NSArray arrayWithObjects:@"א",@"ב",@"ג",@"ד",@"ה",@"ו",@"ז",@"ח",@"ט",@"י",@"כ",@"ל",@"מ",@"נ",@"ס",@"ע",@"פ",@"צ",@"ק",@"ר",@"ש",@"ת",nil];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [_arr count];
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return self.arr;
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString*)title atIndex:(NSInteger)index {
    int position;
    switch (index) {
        case 0:
            position=0;
            break;
        case 1:
            position=1;
            break;
        case 2:
            position=2;
            break;
        case 3:
            position=3;
            break;
        case 4:
            position=4;
            break;
        case 5:
            position=5;
            break;
        case 6:
            position=6;
            break;
        case 7:
            position=7;
            break;
        case 8:
            position=8;
            break;
        case 9:
            position=9;
            break;
        case 10:
            position=10;
            break;
        case 11:
            position=11;
            break;
        case 12:
            position=12;
            break;
        case 13:
            position=13;
            break;
        case 14:
            position=14;
            break;
        case 15:
            position=15;
            break;
        case 16:
            position=16;
            break;
        case 17:
            position=17;
            break;
        case 18:
            position=18;
            break;
        case 19:
            position=19;
            break;
        case 20:
            position=20;
            break;
        case 21:
            position=21;
            break;
        case 22:
            position=22;
            break;

        default:
            position=1;
            break;
    }
    NSLog(@"scrolling to %d",position);
    [tableView reloadInputViews];
    [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:NO];
    [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:position inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];

     return index;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [self.arr objectAtIndex:section];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

       cell.textLabel.font = [UIFont boldSystemFontOfSize:32];
       cell.textLabel.text=[_arr objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:08:55.713

这里的一切看起来都正确，除了你的`tableView:sectionForSectionIndexTitle:atIndex`.

```
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString*)title atIndex:(NSInteger)index {
    // First of all, we can greatly simplify it by removing your case statement
    // and replacing it with this:
    int position = 1;

    if (index < 23) {  // Or even better, use [_arr count]
        position = index;
    }

    NSLog(@"scrolling to %d",position);

    // Then, the following three lines should be deleted, as the tableview
    // automatically scrolls for you when an index is tapped:

    // [tableView reloadInputViews];
    // [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:NO];
    // [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:position inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];

    // Also, you should be returning position, and not index
    return position;
} 
```

当你使用索引时，tableview 会自动处理滚动，所以你不应该自己做。只需删除`[tableView ...]`此例程中的所有方法，它应该对您有用。

所以现在，简短的版本将是：

```
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString*)title atIndex:(NSInteger)index {
    if (index < [_arr count]) {
        return index;
    }

    // Default
    return 1;
} 
```

# c# - 正则表达式替换多个字符

> ID：12999814
> 
> 赞同：0
> 
> 时间：2012-10-21T16:35:33.860
> 
> 标签：c#, regex, string, replace

我所拥有的是一个程序，它从文本框中获取用户的输入并在其末尾添加一个句点。我要解决的问题是，如果用户在他们输入的内容的末尾加上一个句点，那么我希望能够删除那个句点。我尝试使用字符串替换方法，但这只允许您对单个字符执行此操作。接下来我想到的是正则表达式。

我试过这个：

```
finalString = Regex.Replace(finalString, "..", "."); 
```

但它所做的只是用句点替换每个字符。是否有一个正则表达式可以让我替换两个相邻的句点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:36:44.140

`.`具有特殊含义，因此您需要使用`\`

```
finalString = Regex.Replace(finalString, "\\.\\.$", "."); 
```

或简单地使用逐字符号

```
finalString = Regex.Replace(finalString, @"\.\.$", "."); 
```

`$`如果句点的位置在字符串的最后一部分，则在正则表达式的末尾添加断言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:42:14.610

如果您想将这些字符中的任何一个用作正则表达式中的文字，则需要使用反斜杠对其进行转义。

左方括号`[`、反斜杠`\`、插入符号`^`、美元符号`$`、句点或点`.`、竖线或竖线符号`|`、问号`?`、星号或星号`*`、加号`+`、左圆括号`(`和右圆括号`)`。

[**好读**](http://www.regular-expressions.info/tutorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T16:44:47.650

`.`在正则表达式中表示匹配任何字符..在您的情况下`..`表示匹配任何两个字符并将其替换为`.`

你应该像这样逃避它`\.`

它应该是

`finalString = Regex.Replace(finalString, @"\.\.", ".");`

# java - 类型 Apps 的方法 getString(int) 未定义

> ID：12999819
> 
> 赞同：6
> 
> 时间：2012-10-21T16:35:49.413
> 
> 标签：java, android, eclipse, android-activity, getstring

我该如何解决这个错误。底部的所有三个字符串都会出现以下错误“方法 getString(int) 未定义类型 Apps”。请帮忙，我是个菜鸟。

```
package com.actionbarsherlock.sample.fragments;

import android.content.Context;
import android.content.res.Resources;

public final class Apps {
/**
 * Our data, part 1.
 */
public static final String[] TITLES =
{
        "title1",
        "title2",
        "title3"
};

/**
 * Our data, part 2.
 */
public static final String[] DIALOGUE = { 

    getString(R.string.text1),

    getString(R.string.string2),

    getString(R.string.string3)

};
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-21T16:40:44.897

传递一个实例`Context context`

然后使用

```
context.getResources().getString(R.string.text1) 
```

这里`context`属于您当前的活动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T16:38:12.537

First`getString`不是静态方法，您在静态上下文中调用它，这是无法完成的。

其次，该`getString`方法是类的一部分`Resources`，您的类没有扩展`Resources`该类，因此找不到该方法。

我认为使用其构造函数将类的实例解析`Resources`为您的类将是您的最佳选择。`Apps`

像这样的东西：

```
public final class Apps {

    public Apps(Resources r){
     DIALOGUE = new String[]{
        r.getString(R.string.text1),
        r.getString(R.string.string2),
        r.getString(R.string.string3)};
    }

/**
 * Our data, part 1.
 */
public static final String[] TITLES =
{
        "title1",
        "title2",
        "title3"
};

/**
 * Our data, part 2.
 */
public static String[] DIALOGUE;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-10T08:35:55.390

你可以试试

```
getResources().getString(R.string.somestrid); 
```

或者

```
getApplicationContext().getResources().getString(R.string.somestrid); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-05T08:46:52.290

创建 Application 的子类，例如 public class App extends Application { 在 AndroidManifest.xml 中设置标签的 android:name 属性以指向您的新类，例如 android:name=".App" 在 onCreate() 方法中在您的应用实例中，将您的上下文（例如 this）保存到名为 mContext 的静态字段并创建一个返回该字段的静态方法，例如 getContext()：

它应该是这样的：

```
public class App extends Application{

    private static Context mContext;

    @Override
    public void onCreate() {
        super.onCreate();
        mContext = this;
    }

    public static Context getContext(){
        return mContext;
    }
} 
```

现在您可以使用： App.getContext().getString()

# javascript - 如何创建没有导航功能的选项卡

> ID：12999820
> 
> 赞同：0
> 
> 时间：2012-10-21T16:36:29.053
> 
> 标签：javascript, xul, firefox-addon-sdk

我正在开发一个插件，其中大部分内容/用户界面都托管在一个选项卡中，我使用“选项卡”API 打开该选项卡。我真的希望我的标签没有书签或地址栏，并禁止导航离开我在那里指定的内容。有没有办法在没有这些元素的情况下生成“裸”标签，或者将它们从现有标签中剥离？在 Firefox 本身中托管加载项管理器的选项卡就是我正在寻找的一个很好的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:59:22.397

您应该查看 addon-page 模块：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/addon-page.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/addon-page.html)

这是一个相对较新的模块，因此如果您遇到问题或对附加功能有要求，该项目将不胜感激。

随意发布到 google 组 ( [https://groups.google.com/forum/#!forum/mozilla-labs-jetpack](https://groups.google.com/forum/#!forum/mozilla-labs-jetpack) ) 或 irc.mozilla.org 上的#jetpack 频道。

# php - 带有外部 URL 的 pdftotext (PHP)

> ID：12999825
> 
> 赞同：0
> 
> 时间：2012-10-21T16:37:00.227
> 
> 标签：php, shell-exec, pdftotext

我想使来自外部 URL 的 PDF 可搜索。我正在使用来自 XPDF 的 pdftotext。它适用于我的网络空间中已有的 PDF，但在尝试使用外部 PDF 时，我不断收到错误消息。具体来说，我得到：

“错误：无法打开文件'https://www.vericoa.com/sandbox/test2.pdf'”

这是我的代码

```
$path = 'https://www.vericoa.com/sandbox/test2.pdf'; 

echo shell_exec('pdftotext -enc UTF-8 '.$path.' pdf.txt 2>&1');  

$file = file_get_contents('pdf.txt');

echo $file; 
```

甚至可以从外部 PDF 源中提取文本吗？有没有其他选择（我花了最后几个小时搜索，但一无所获）。

提前感谢马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:19:42.067

您也许可以尝试在 php 中下载外部 URL，将其保存到文件中并将其传递给 pdftotext 脚本？

# r - 在 R 中导入 M3U 流

> ID：12999827
> 
> 赞同：1
> 
> 时间：2012-10-21T16:37:06.360
> 
> 标签：r, signal-processing, http-live-streaming

这是来自 VLF 接收器的实时音频流的链接

```
http://67.207.143.181/vlf19.m3u 
```

我需要知道导入此直播流的方法。如果 R 不适合这种信号处理，请提出处理和可视化实时数据的替代方案。

# bash - 在另一个脚本中获取最后一个 shell 命令的退出代码

> ID：12999830
> 
> 赞同：44
> 
> 时间：2012-10-21T16:37:23.797
> 
> 标签：bash, shell, zsh, exit-code

我正在尝试加强我的通知脚本。脚本的工作方式是我将它放在一个长时间运行的 shell 命令后面，然后在长时间运行的脚本完成后调用各种通知。

例如：

```
sleep 100; my_notify 
```

获得长时间运行脚本的退出代码会很好。问题是调用`my_notify`会创建一个无法访问该`$?`变量的新进程。

相比：

```
~ $: ls nonexisting_file; echo "exit code: $?"; echo "PPID: $PPID"
ls: nonexisting_file: No such file or directory
exit code: 1
PPID: 6203 
```

对比

```
~ $: ls nonexisting_file; my_notify
ls: nonexisting_file: No such file or directory
exit code: 0
PPID: 6205 
```

该`my_notify`脚本包含以下内容：

```
#!/bin/sh
echo "exit code: $?"
echo "PPID: $PPID" 
```

我正在寻找一种方法来获取上一个命令的退出代码，而不会过多地改变命令的结构。我知道如果我将其更改为更像`time`，例如`my_notify longrunning_command...`我的问题将得到解决，但我实际上喜欢我可以在命令结束时解决它，并且我担心第二种解决方案的复杂性。

可以做到这一点，还是从根本上与 shell 的工作方式不兼容？

我的 shell 是 Z shell ( `zsh`)，但我希望它也可以与 Bash 一起使用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-24T23:23:28.793

你真的需要使用一个shell函数来完成它。对于像这样的简单脚本，让它在 zsh 和 bash 中运行应该很容易。只需将以下内容放入文件中：

```
my_notify() {
  echo "exit code: $?"
  echo "PPID: $PPID"
} 
```

然后从您的 shell 启动文件中获取该文件。尽管这将在您的交互式 shell 中运行，但您可能希望使用 $$ 而不是 $PPID。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T16:39:41.707

这是不兼容的。`$?` *仅存*在于当前 shell 中；如果您希望它在子流程中可用，则必须将其复制到环境变量中。

另一种方法是编写一个以某种方式使用它的 shell 函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T19:00:53.930

实现这一点的一种方法是使用 EOF 标记和一个主脚本，它将创建您的 my_notify 脚本。

* * *

```
#!/bin/bash

if [ -f my_notify ] ; then
rm -rf my_notify
fi

if [ -f my_temp ] ; then
rm -rf my_temp
fi

retval=`ls non_existent_file &> /dev/null  ; echo $?`
ppid=$PPID
echo "retval=$retval" 
echo "ppid=$ppid" 
cat >> my_notify << 'EOF'
#!/bin/bash

echo "exit code: $retval"
echo " PPID =$ppid"
EOF

sh my_notify 
```

* * *

您可以根据您的目的优化此脚本。

# c# - 获取样式列表

> ID：12999833
> 
> 赞同：0
> 
> 时间：2012-10-21T16:37:43.843
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试使用 xdoc 和 LINQ 在以下 xml 文件中获取样式列表。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml>
  <Document>
    <Style id="style62">
      <IconStyle>
        <Icon>
          <href>http://maps.gstatic.com/mapfiles/ms2/micons/yellow-dot.png</href>
        </Icon>
      </IconStyle>
    </Style>
  </Document>
</kml> 
```

为了在同一个 LINQ 选择中获取 ID="style62" 以及 href 中的值，我无法正确使用语法，有人可以帮忙吗？

```
var styles = xdoc.Descendants(ns + "Style")
                .Select(s => new
                {
                    //HELP!?!
                    //E.G
                    //
                    //id = s.something  (style62)
                    //href = s.something (url)
                }).ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:43:59.100

如果您正在谈论像这里[https://developers.google.com/kml/documentation/KML_Samples.kml](https://developers.google.com/kml/documentation/KML_Samples.kml)这样的 kml 文件， 那么下面的代码应该可以工作。这里的问题是每个“样式”都不包含“href”标签。

```
var xDoc = XDocument.Parse(xml);
XNamespace ns = "http://www.opengis.net/kml/2.2";
var items = xDoc.Descendants(ns + "Style")
                .Select(d => 
                {
                   var h = d.Descendants(ns + "href").FirstOrDefault();
                   return new
                   {
                       Id = d.Attribute("id").Value,
                       Href = h == null ? null : h.Value
                   };
                })
                .ToList(); 
```

使用简单的扩展方法，可以简化查询

```
XNamespace ns = "http://www.opengis.net/kml/2.2";
var items = xDoc.Descendants(ns + "Style")
                .Select(d => new
                {
                   Id = d.Attribute("id").Value,
                   HRef = d.Descendants(ns + "href").FirstOrDefault()
                                                    .IfNotNull(h=>h.Value)
                })
                .ToList();

public static class S_O_Extensions
{
    public static S IfNotNull<T, S>(this T obj,Func<T,S> selector)
    {
        if (obj == null) return default(S);
        return selector(obj);
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:45:07.370

通过 LinqPad 运行：

```
XDocument doc = XDocument.Parse("<?xml version=\"1.0\" encoding=\"UTF-8\"?>" +
"<kml>" +
  "<Document>" +
    "<Style id=\"style62\">" +
      "<IconStyle>" +
        "<Icon>" +
          "<href>http://maps.gstatic.com/mapfiles/ms2/micons/yellow-dot.png</href>" +
        "</Icon>" +
      "</IconStyle>" +
    "</Style>" +
  "</Document>" +
"</kml>");

var styles = from document in doc.Root.Elements("Document")
            from style in document.Elements("Style")
            where style.Attribute("id").Value == "style62"
            select new 
            {
                StyleElement = style,
                Href = style.Element("IconStyle").Element("Icon").Element("href").Value
            };

styles.Dump(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:49:20.833

你可以像使用 linq

```
var items = doc.Descendants("field")
           .Where(node => (string)node.Attribute("name") == "Name")
           .Select(node => node.Value.ToString())
           .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T16:41:47.917

像这样的东西应该工作：

```
xdoc.Descendants(ns + "Style")
    .Select(s => new
                 {
                     id = s.Attribute("id").Value,
                     href = s.Element("IconStyle")
                             .Element("Icon")
                             .Element("href")
                             .Value
                 }); 
```

# joomla - 将 joomla 博客链接到内页（或实际的博客滚动帖子）

> ID：12999836
> 
> 赞同：1
> 
> 时间：2012-10-21T16:38:08.853
> 
> 标签：joomla, joomla1.5

所以我被告知要在 Joomla 中为客户创建一个博客，而我对 Joomla 的内部工作原理知之甚少。我制作的博客如此处所示

[http://www.assurancepower.com/about-us/blog.html](http://www.assurancepower.com/about-us/blog.html)

但问题是，无法单击该博客卷中每个故事的标题/标题。我想知道有没有办法让我做到这一点？本质上，这个页面是故事的集合，我希望能够点击一个特定的（其中任何一个）并被带到它的内页/故事的完整版本。

不完全确定我应该做什么/搜索。我不确定joomla是否有像functions.php这样的wordpress，或者例如，有没有我可以插入的地方......也许就像wordpress如何使用永久链接一样：

```
<?php permalink(); ?> //title link here to the actual story. 
```

或类似的东西

```
<?php bloginfo('url');?>// this relative link for WP. 
```

等等，**我**想要的只是能够让这个故事中的这些标题成为与其完整对应物的有效链接。不知道要寻找什么/如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:57:08.913

您是否检查了启用可链接标题的菜单项？

> 菜单->（您的菜单）->（单击菜单项）-> 参数（组件）-> 标题可链接

如果上面的设置没问题，你也可以试试这个：

[http://www.2020media.com/content/view/240/38/](http://www.2020media.com/content/view/240/38/)

如果没有工作，则检查模板是否允许，否则您必须覆盖它或修改模板。

# ruby-on-rails - 在查找条件中使用变量字符串

> ID：12999842
> 
> 赞同：-2
> 
> 时间：2012-10-21T16:38:24.907
> 
> 标签：ruby-on-rails, string, conditional-statements

我有一个字符串变量如下：

```
the_style = @house.style   # this is a string variable and contains the value "modern" 
```

如果我在数据库中搜索如下：

```
Building.find(:last, :conditions => [" style = ?", "#{the_style}" ]) 
```

我收到上述错误，但是如果我在字符串值中硬编码它可以工作：

```
Building.find(:last, :conditions => [" style = ?", "modern" ]) 
```

将字符串变量放入查找条件的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:46:32.550

为什么要使用引号来逃避它们？

```
Building.find(:last, :conditions => [" style = ?", the_style ]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:44:30.870

不能确切地说是什么导致了错误，但我会为这类事情创建一个命名范围

```
class Building < ActiveRecord::Base
  scope :by_style, lambda { |style| where("style = ?", style) }
  # ...
end 
```

在你的控制器中，你可以做

```
Building.by_style(@house.style).last 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:47:06.850

您将使用以下`where`方法：

```
Building.where(style: @house.style).first 
```

# c# - 使用 system.io 读取文件？

> ID：12999845
> 
> 赞同：0
> 
> 时间：2012-10-21T16:38:49.930
> 
> 标签：c#, file, command-line, directory, .net

可以在这个问题上提供一些帮助。我正在使用 system.io，我必须做一些需要移动、分组、重命名文件的事情。.

到目前为止，使用 c# 在命令行应用程序中工作我已经将一些文件从一个目录移动到另一个目录，我现在需要像这样对一些 pdf 文件进行分组 - B-12345 1.pdf、B-12345 2.pdf、B-12345 3。 pdf, B-12345 4.pdf。有人告诉我，我不需要为了确保每个项目参考 (b-1234) 只创建一个工作而将它们物理组合在一起。

为了给你一些关于这些文件分组后我在做什么的背景信息，我需要在作业表 sql 数据库中创建一条记录。但那是另一天的另一个问题，只是想我会给你一些更多信息。

**主要是我只需要有关如何读取文件目录中的文件和分组文件的信息，这对我非常有益。？**

为了让问题更清楚一点，这是应该在命令行应用程序中完成的任务顺序。

1.  读取目录中的文件（我已经移动了它们，所以不确定吗？）
2.  按项目分组编号（不确定）
3.  在 sql db 中创建作业记录
4.  将文件移动并重命名到正确的位置

提前致谢

我的代码如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;

public class MoveForProcessing
{
    static void Main()
    {
        // move cad jobs to processing directory and delete former folder, use the System.IO.Path class.
        System.IO.Directory.Move(@"C:\Users\Ben\My Documents\Temp\", @"C:\Users\Ben\My Documents\Processing\");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:03:45.783

您可以首先声明相关目录的 DirectoryInfo 类

```
private System.IO.DirectoryInfo dir = System.IO.DirectoryInfo.Open(@"path"); 
```

然后为目录中的每个文件获取一个 FileInfo 对象数组

```
private FileInfo[] files = dir.GetFiles(); 
```

如果您只需要某些文件类型，您也可以将通配符字符串放入 GetFiles()

```
private FileInfo[] files = dir.GetFiles("*.pdf"); 
```

然后，您可以通过数组对每个 FileInfo 对象执行任何您需要的操作

```
foreach(FileInfo f in files)
{
   f.Move(); // or whatever you need to do
} 
```

# android - Android，mdpi密度但屏幕不同

> ID：12999849
> 
> 赞同：4
> 
> 时间：2012-10-21T16:39:08.570
> 
> 标签：android, image, screen, mdpi

我正在开发一个将在多个设备上运行的应用程序。我有三个测试设备。

> **HTC Desire S** -- 480 x 800 像素，3.7 英寸（~252 ppi 像素密度）
> 
> **三星 P6200 Galaxy Tab 7.0 Plus** -- 600 x 1024 像素，7.0 英寸（~170 ppi 像素密度）
> 
> **三星 Galaxy Tab 2 10.1 P5100** -- 800 x 1280 像素，10.1 英寸（~149 ppi 像素密度）

根据我的理解，如果我为上述三个正确开发了我的应用程序，则将处理大多数其他设备。或许？

我的问题是我应该从哪里开始设计我的图像？由于这两款平板电脑的`mdpi`密度不同，但屏幕尺寸不同，我为 TAB2 设计了图像并将图像放在`drawable-mdpi`目录中，这些图像在 TAB2 上完美显示，但在 TAB7 上，事情变得一团糟，图像相互重叠。

因此，平板电脑都应该放置图像，`mdpi`但我应该为哪种平板电脑尺寸设计图像？`mdpi``drawable-mdpi`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:20:45.263

应用程序 UI 通常不是完全位图的。你有一些元素，比如固定大小的图标，但另一方面，你的按钮应该可以毫无问题地缩放。因此，假设您想要针对所有设备，您应该按照适合**最小**支持屏幕的方式设计您的 UI（在这种情况下，600 x 1024 像素是您的最大值） - 这意味着如果您在所述屏幕上预览所有 UI 元素都完全适合在屏幕上。在更高的屏幕上，您的 UI 必须缩放，但这通常不需要任何特殊方法（除非您在位图游戏中工作），因为列表、按钮、布局等元素会自动拉伸。如果您的设计假设任何位图涉及所述可缩放元素，请使用[9-patch PNG](http://developer.android.com/tools/help/draw9patch.html)文件使其正确缩放。

有关该主题的更多信息，请阅读“[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:40:22.180

我建议您为 xhdpi 设计，您可以随时调整大小以降低 dpi。

考虑到 dpi 与屏幕尺寸无关，另一方面，大屏幕平板电脑的 dpi 低于大多数“现代”手机。

为目标屏幕尺寸（即 10 英寸和 7 英寸平板电脑）进行布局，系统将为您的设备 dpi 获取最佳位图（或重新缩放最接近的位图！）。

使用最新的（测试版）Android SDK 和 Eclipse 插件，您将更好地查看不同的设备屏幕：dpi + 像素分辨率 + 屏幕尺寸。例如，它们现在显示，例如

```
7" WSXVG (Tablet) (1024x600: mdpi) 
```

在布局编辑器中。

# unix - 程序、可执行文件和进程之间有什么区别？

> ID：12999850
> 
> 赞同：7
> 
> 时间：2012-10-21T16:39:15.890
> 
> 标签：unix, operating-system

程序、可执行文件和进程之间有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T16:49:42.163

简单来说——

**程序：**程序是一组人类可读格式的指令。（HelloWorld.c）

**Executable：** Executable 是程序的编译形式（HelloWorld.exe 文件）

**进程：**进程是操作系统正在运行的可执行文件。您在任务管理器或任务列表中看到的那个（双击它时的HelloWord.exe进程。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T17:03:49.190

程序或**计算机程序**本质上为操作系统或计算机提供序列指令（或算法，如果您愿意的话）。这些计算机程序以操作系统识别并可用于直接执行指令的可执行形式出现。

本质上，**可执行文件**是计算机可以直接执行的格式的文件，而不是无法直接执行且必须首先编译的源文件。可执行文件是编译的结果。我提到操作系统可以识别可执行文件，它是通过扩展来识别的。用于 Windows 可执行文件的常见扩展名是 .exe。

一旦一个可执行文件被执行，一个**进程**就开始了。进程只是计算机程序的一个实例。您可以将进程视为计算机程序中包含的指令的执行。当您在 Windows 计算机上查看任务管理器时，您可以看到所有当前进程。进程拥有资源，例如虚拟内存、操作系统描述（句柄、数据源、接收器等）、安全属性和有效处理所需的各种其他元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T23:38:25.727

进程基本上是正在执行的程序。与每个进程相关的是它的地址空间，一个从 0 到某个最大值的内存位置列表，进程可以读取和写入。地址空间包含**可执行**程序、程序的数据及其堆栈。与每个进程相关联的还有一组资源，通常包括寄存器（包括程序计数器和堆栈指针）、打开文件列表、未完成警报、相关进程列表以及运行程序所需的所有其他信息. 进程基本上是一个容器，它包含运行**程序所需的所有信息，这是一组由用户/开发人员定义的指令**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-05T16:38:33.790

程序是一组指令和一个被动实体。程序是进程的一部分，而进程处于程序的运行状态，它是系统中的一个工作单元。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-09T03:03:50.777

**程序：**它是一个被动实体，就像存储在硬盘上的文件的内容一样。换句话说，它就像您磁盘上的另一个文本文件。大多数情况下，它将采用人类可读的格式（例如：.java 文件）。

**可执行文件：**它又是一个被动实体。它只是磁盘上的另一个文件，它是通过编译程序导出的。因此，它是程序文件的机器可读版本（例如：.class 文件。）。请注意，它仍然在磁盘上，当前没有执行。

**进程：**它是程序/可执行文件的活动部分。加载到内存（RAM）并执行的程序/可执行文件称为进程。一个进程由一组指令组成。CPU 会一一执行这些指令。（例如：JVM 加载您的 .class 文件并向 CPU 发出指令）。
您也可以让两个进程执行相同的程序/可执行文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T16:44:30.133

程序是您编写的用于执行某些功能的某些高级语言的源文件的集合，例如，实现排序列表的 C++ 文件。可执行文件是编译器从这些源文件创建的文件，其中包含可以在 CPU 上执行的机器指令。进程是可执行文件在 CPU 和内存中的主动执行。包括内存管理信息、当前PC、SP、HP、寄存器等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-17T04:15:40.587

进程是程序的一部分。进程是该特定程序的逻辑存在的部分。程序作为一组过程给出。在某些情况下，我们可能会将问题分成若干部分。在这些时候，我们为每个称为流程的部分编写单独的逻辑。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-05T17:16:40.970

像这样考虑它。

程序是蓝图。就像建筑的蓝图。没有建筑物，而是建筑物外观的抽象。

过程是根据蓝图建造的建筑物的实际建造。

在建造建筑物时，会同时发生许多事情。您正在准备混凝土，同时建造多个房间，铺设电缆等。这些将是线程。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2012-10-21T16:45:13.620

没有不同。记住，没有勺子。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2014-09-07T02:14:25.667

1.  程序是静态实体，而进程是动态实体。

2.  程序只不过是包含在文件中。其中进程是正在执行的程序。

3.程序不使用CPU寄存器组，而进程使用CPU寄存器组来存储中间结果和最终结果。

# java - Java - 创建 JPanel 数组会导致空指针异常

> ID：12999858
> 
> 赞同：0
> 
> 时间：2012-10-21T16:39:46.873
> 
> 标签：java, arrays, nullpointerexception, jpanel

我正在尝试制作一个数组，`jpanels`但我得到了一些`null pointer exception`.

这是代码的一部分。这里`cartP`是一个`panel`.

```
JPanel[] p2 = new JPanel[10];
    p2[0].setPreferredSize(new Dimension(700, 40));
    p2[0].setMaximumSize(p2[0].getPreferredSize());
    p2[0].setLayout(new GridLayout(1,5,1,1));
    p2[0].add(new JLabel("text"));
    p2[0].add(new JLabel("text"));
    p2[0].add(new JLabel("text"));
    p2[0].add(new JLabel("text"));
    p2[0].setBackground(Color.CYAN);

    cartP.add(p2[0]); 
```

就像在购物网站上一样，我将使用它来制作视图购物车。

这是例外..

```
Exception in thread "main" java.lang.NullPointerException
at storeapp.Cart.gui(Cart.java:59)
at storeapp.Cart.<init>(Cart.java:29)
at storeapp.Cart.main(Cart.java:157) 
```

Java 结果：1

知道为什么我会得到那个例外吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:40:41.833

因为

```
JPanel[] p2 = new JPanel[10]; 
```

创建一个指针数组`null` `JPanel`。您需要在使用它之前初始化数组的每个元素。

```
for (int i=0; i<p2.length; i++) {
    p2[i] = new JPanel(/* snip */);
} 
```

*这与任何*数组初始化的行为一致。除非另有分配，否则数组元素具有数组类型的默认值；[对于*任何*对象类型，默认值为`null`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html#h1).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:42:00.680

您必须使用以下内容初始化每个 JPanel::

```
for(int i = 0; i < 10; i++){
   p2[i] = new JPanel();
} 
```

对象数组和原始类型数组的行为方式不同。

虽然数组类型的元素`int`不需要`float`在堆上创建 和`new`，但您必须初始化对象数组。

`JPanel[] panels = new JPanel[10]`为 JPanel 创建 10 个 UNINITIALIZED 对象（或者只是初始化数组）。由于它们没有被初始化，你必须调用`new`每个 JPanel 来分别初始化它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T16:42:25.247

```
JPanel[] p2 = new JPanel[10];

for (int i = 0; i < p2.length; i++){
    p2[i] = new JPanel();
} 
```

……

你的代码

# iphone - 应用程序可在 iPhone 上运行，但在 iPad 模拟器上崩溃时卡住了 ipad 上的启动图像

> ID：12999859
> 
> 赞同：0
> 
> 时间：2012-10-21T16:39:51.733
> 
> 标签：iphone, ios, ipad, interface-builder

我对此很陌生，希望我能提出正确的问题。

我的应用程序已经在 AppStore 上架了几个星期，而且一直只在 iPhone 上运行。它被拒绝了，因为该应用程序无法在 iPad 上运行。它被拒绝的确切原因是：

> 拒绝原因： 2.10：iPhone 应用程序也必须在 iPad 上运行，无需修改，以 iPhone 分辨率和 2X iPhone 3GS 分辨率运行

在 iPad 5 模拟器上运行时，出现以下错误：

Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: ' *** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' *** First throw call stack: (0x1ba5022 0xf60cd6 0x1b9233e 0x1b931f0 0x18bc04 0x19724f 0x3c3c 0x18a99b 0x418e 0xfd9d4 0xfdbe0 0x4155 0x15159 0x1433f 0x3b18 0x2b0d 0xc1386 0xc2274 0xd1183 0xd1c38 0xc5634 0x14d0ef5 0x1b79195 0x1addff2 0x1adc8da 0x1adbd84 0x1adbc9b 0xc1c65 0xc3626 0x2a60 0x9)

终止称为抛出异常

我需要在 Xcode 4.5.1 中做什么才能让我的应用程序在 iPad 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:10:23.937

不要将 a 插入`nil`到数组中。如果您想表达有一个“空”对象，请使用单例`NSNull`: `[myArray insertObject: [NSNull null] atIndex: myIndex];`。

*** 编辑 ***

如果您**不是**有意使用此类代码，则应寻找自动平台相关代码。热门候选人是指缺失或错误连接的出口或动作、特定于平台的捆绑包，或者 NIB/故事板中缺失或错误（即 ID 不正确）的元素。然而，没有看到你的代码，一切都是猜测。尝试通过识别代码跟踪中属于**您的**代码（不是库/框架代码）的最后一个位置来检测故障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T22:33:45.557

对于 Cordova 开发人员，如果您在常规项目设置的“主界面”下拉列表中提供任何内容，您将收到此错误。如果您想使用 Cordova 应用程序针对所有平台，请始终将此留空。

如果您愿意，也可以单击所有四个方向。还要确保在设备下拉列表中选择了“通用”。

# oracle - 将外部数据从 MongoDB 加载到 Oracle

> ID：12999861
> 
> 赞同：0
> 
> 时间：2012-10-21T16:40:16.640
> 
> 标签：oracle, mongodb, wrapper

有一种方法可以通过外部表（外部数据包装器）将外部数据加载到 PostgreSQL 中。通过这种方法，我们可以将数据从 oracle、mysql 等加载到 PostgreSQL 中。问题是：

将外部数据从 MongoDB 加载到 Oracle 或 mysql 的方法是否相同？

重要提示：我想加载外部数据的子集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T02:34:23.847

我有同样的想法，找到了这个 Hive，试试[https://blogs.oracle.com/dataintegration/entry/odi_hive_and_mongodb](https://blogs.oracle.com/dataintegration/entry/odi_hive_and_mongodb)

# c# - 两个列表的 linq 并集

> ID：12999878
> 
> 赞同：17
> 
> 时间：2012-10-21T16:41:44.847
> 
> 标签：c#, linq

我有一个包含 long 列表的对象模型。我想获得两个不同实例的 long 的组合列表。当我写这个时：

```
var MyCombinedList = TheObject1.ListOfLongs.Union(TheObject2.ListOfLongs); 
```

我得到一个空列表。请注意，有时`TheObject2`可以有一个空列表。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-21T16:43:11.097

使用**[Concat()](http://msdn.microsoft.com/en-us/library/bb302894.aspx)**这将连接两个序列。所以试试这个：

```
var MyCombinedList = TheObject1.ListOfLongs.Concat(TheObject2.ListOfLongs); 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T16:45:14.760

如何使用`Concat`

```
var list = TheObject1.ListOfLongs.Concat(TheObject2.ListOfLongs).ToList(); 
```

或者

```
var list = TheObject1.ListOfLongs.Union(TheObject2.ListOfLongs).ToList(); 
```

# python - 我不明白我通过 Homebrew 安装 Python

> ID：12999879
> 
> 赞同：4
> 
> 时间：2012-10-21T16:41:47.140
> 
> 标签：python, homebrew

我刚刚使用 Homebrew 安装了 Python。我使用了命令`brew install python`（在安装 XQuartz 之后，这是一个先决条件）。

这个页面 - [https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python) - 告诉我以下内容：

> **问题**
> 
> 假设一个标准的 Homebrew 安装，前缀是 `/usr/local`，酒窖是`/usr/local/Cellar`.
> 
> Homebrew 使用标准的`./configure --prefix=#{prefix}`.
> 
> 这设置：
> 
> *   “站点包”文件夹为 `/usr/local/Cellar/python/2.7.3/lib/python2.7/site-packages`.
> *   “安装脚本”文件夹为`/usr/local/Cellar/python/2.7.3/bin`.
> 
> 如果 site-packages 存在于 Python 的 Cellar 中，那么用户安装的包将在 Python 更新之间被擦除。install-scripts 也一样，另外一个问题是用户必须手动将 Python 的地窖 bin 文件夹添加到路径中。
> 
> **解决方案**
> 
> Homebrew 在安装时执行两个操作来解决这些问题。
> 
> *   `/usr/local/lib/python2.7/site-packages`首先，删除 Cellar site-packages 文件夹，并在前缀中创建符号链接 。这将允许站点包在 Python 更新之间持续存在，因为 Homebrew 对某些使用 lib 作为用户可安装库的语言进行了特殊处理。
>     
>     
> *   其次，`distutils.cfg`编写一个文件以将 install-scripts 文件夹设置为`/usr/local/share/python`. 用户可以添加 `/usr/local/share/python`到`PATH`以获取已安装的脚本。

***我不明白的是“删除了地窖站点包文件夹，并 `/usr/local/lib/python2.7/site-packages`创建了指向前缀中的符号链接”的行。当我查看“前缀”时——我理解为“/usr/local”——我没有看到符号链接。这个符号链接在哪里被引用？***

我感到困惑的原因之一是，当我运行时，`pip install virtualenvwrapper`我得到的输出告诉我：“要求已经满足：/Library/Python/2.7/site-packages 中的 virtualenv-clone（来自 virtualenvwrapper）”。我不明白这个`/Library/Python/2.7/site-packages`目录是从哪里来的，为什么会被引用。

话虽如此，`pip install virtualenvwrapper`似乎完成没有问题并且不需要 sudo，我认为这应该是使用 Homebrew 安装的优势之一。的整个输出`pip install virtualenvwrapper`是：

```
下载/解压 virtualenvwrapper
  为包 virtualenvwrapper 运行 setup.py egg_info

下载/解压 virtualenv（来自 virtualenvwrapper）
  下载 virtualenv-1.8.2.tar.gz (2.2MB)：下载了 2.2MB
  将下载存储在 ./Library/Caches/pip-downloads/http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Fv%2Fvirtualenv%2Fvirtualenv-1.8.2.tar.gz 的缓存中
  为包 virtualenv 运行 setup.py egg_info

    警告：在目录“docs/_templates”下找不到与“*”匹配的先前包含的文件
    警告：在目录“docs/_build”下找不到与“*”匹配的先前包含的文件
已满足要求（使用 --upgrade 升级）：/Library/Python/2.7/site-packages 中的 virtualenv-clone（来自 virtualenvwrapper）
已满足要求（使用 --upgrade 升级）：/Library/Python/2.7/site-packages 中的 stevedore（来自 virtualenvwrapper）
已满足要求（使用 --upgrade 升级）：分发在 /usr/local/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg （来自 stevedore->virtualenvwrapper）
安装收集的包：virtualenvwrapper、virtualenv
  为 virtualenvwrapper 运行 setup.py install

    跳过/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/virtualenvwrapper/__init__.py（命名空间包）的安装
    安装 /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/virtualenvwrapper-3.6-py2.7-nspkg.pth
    将 /usr/local/share/python/virtualenvwrapper.sh 的模式更改为 755
    将 /usr/local/share/python/virtualenvwrapper_lazy.sh 的模式更改为 755
  为 virtualenv 运行 setup.py install

    警告：在目录“docs/_templates”下找不到与“*”匹配的先前包含的文件
    警告：在目录“docs/_build”下找不到与“*”匹配的先前包含的文件
    将 virtualenv 脚本安装到 /usr/local/share/python
    将 virtualenv-2.7 脚本安装到 /usr/local/share/python
成功安装 virtualenvwrapper virtualenv
打扫干净...

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-09T06:52:31.233

[从更新的文档中：](https://github.com/Homebrew/brew/blob/master/docs/Homebrew-and-Python.md)

> 对于 Python 2.7.x，您可以在 /usr/local/lib/python2.7/site-packages 中找到它。
> 
> Python 2.7 还在以下位置搜索模块：
> 
> /Library/Python/2.7/site-packages
> 
> ~/Library/Python/2.7/lib/python/site-packages

因此，您可能会在 /Library/Python2:7/site-packages 中找到以前安装的包的回声

Homebrew 最近发布了 1.0，自从您提出这个问题以来，发生了很多变化。

# python - 使用 Python 减少对列表

> ID：12999886
> 
> 赞同：6
> 
> 时间：2012-10-21T16:42:22.927
> 
> 标签：python, map, functional-programming, reduce, accumulator

我试图将列表中的一堆元素配对在一起以创建最终对象，其方式类似于制作对象的总和。我正在尝试使用一个简单的变体来`reduce`考虑您考虑对列表而不是平面列表的位置来执行此操作。我想做一些类似的事情：

```
nums = [1, 2, 3]
reduce(lambda x, y: x + y, nums) 
```

除了我想在数字列表中每个元素特定的总和中添加其他信息`nums`。例如，对于列表中的每一对 (a,b)，将总和运行为 (a+b)：

```
nums = [(1, 0), (2, 5), (3, 10)]
reduce(lambda x, y: (x[0]+x[1]) + (y[0]+y[1]), nums) 
```

这不起作用：

```
>>> reduce(lambda x, y: (x[0]+x[1]) + (y[0]+y[1]), nums)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 1, in <lambda>
TypeError: 'int' object is unsubscriptable 
```

为什么它不起作用？我知道我可以编码`nums`为一个平面列表——这不是重点——我只是希望能够创建一个 reduce 操作，它可以迭代一个对列表，或者同时迭代两个相同长度的列表，并从两者中汇集信息列表。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T16:47:52.610

查看您传递给的 lambda `reduce`：

```
f = lambda x, y: (x[0]+x[1]) + (y[0]+y[1]) 
```

返回的值`f`将作为参数传递给`f`. 但是虽然`f`期望它的参数是对的，但它返回的值是一个`int`. 您还需要使此函数返回一对。例如，这将分别总结左侧和右侧：

```
>>> nums = [(1, 0), (2, 5), (3, 10)]
>>> reduce(lambda x, y: (x[0] + y[0], x[1] + y[1]), nums)
(6, 15) 
```

您可以做的另一件事是将累积值与列表元素区别对待：您可以将累积值设为 an `int`，而列表元素是对的。如果这样做，则必须将`initializer`参数传递给`reduce`，以便将累加器正确初始化为`int`：

```
>>> nums = [(1, 0), (2, 5), (3, 10)]
>>> reduce(lambda acc, y: acc + y[0] + y[1], nums, 0)
21 
```

# java - 小程序 + Netty 4.0 ExceptionInInitializerError

> ID：12999888
> 
> 赞同：1
> 
> 时间：2012-10-21T16:43:07.603
> 
> 标签：java, applet, netty

我使用了 Netty 3.8.5 库，它运行良好。但是当我在 4.0.0 版本中更改库时，小程序已经停止工作。错误日志：

```
network: Cache entry not found [url: file:/D:/java/Сlient/dist/lib/netty-common-4.0.0.Alpha5.jar, version: null]
network: Cache entry not found [url: file:/D:/java/Сlient/dist/lib/netty-common-4.0.0.Alpha5.jar, version: null]
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
network: Cache entry not found [url: file:/D:/java/Сlient/dist/lib/netty-common-4.0.0.Alpha5.jar, version: null]
basic: Plugin2ClassLoader.getPermissions CeilingPolicy allPerms
network: Cache entry not found [url: file:/D:/java/Сlient/dist/lib/netty-buffer-4.0.0.Alpha5.jar, version: null]
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
network: Cache entry not found [url: file:/D:/java/Сlient/dist/lib/netty-buffer-4.0.0.Alpha5.jar, version: null]
basic: Plugin2ClassLoader.getPermissions CeilingPolicy allPerms
java.lang.ExceptionInInitializerError
    at io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:457)
    at io.netty.channel.DefaultChannelPipeline$HeadHandler.bind(DefaultChannelPipeline.java:1538)
    at io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:1126)
    at io.netty.channel.DefaultChannelPipeline$10.run(DefaultChannelPipeline.java:1134)
    at io.netty.channel.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:186)
    at io.netty.channel.socket.nio.NioEventLoop.run(NioEventLoop.java:210)
    at io.netty.channel.SingleThreadEventExecutor$1.run(SingleThreadEventExecutor.java:80)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at io.netty.util.internal.DetectionUtil.<clinit>(DetectionUtil.java:43)
    ... 8 more
Ignored exception: java.lang.ExceptionInInitializerError
окт 21, 2012 8:09:56 PM io.netty.channel.DefaultChannelPipeline
WARNING: An exceptionCaught() event was fired, and it reached at the end of the pipeline.  It usually means the last inbound handler in the pipeline did not handle the exception.
java.lang.ExceptionInInitializerError
    at io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:457)
    at io.netty.channel.DefaultChannelPipeline$HeadHandler.bind(DefaultChannelPipeline.java:1538)
    at io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:1126)
    at io.netty.channel.DefaultChannelPipeline$10.run(DefaultChannelPipeline.java:1134)
    at io.netty.channel.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:186)
    at io.netty.channel.socket.nio.NioEventLoop.run(NioEventLoop.java:210)
    at io.netty.channel.SingleThreadEventExecutor$1.run(SingleThreadEventExecutor.java:80)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at io.netty.util.internal.DetectionUtil.<clinit>(DetectionUtil.java:43)
    ... 8 more

basic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@147c327
security: Reset deny session certificate store 
```

我使用 DiscardServer [https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/discard](https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/discard)的示例， 没有任何更改。

此行导致错误：

```
ChannelFuture f = b.bind().sync(); 
```

所有文件均已签名。当我单独运行 DiscardServer（不在小程序中）时，一切正常

我的代码：

```
public class Applet extends JApplet
{
        @Override
    public void init()
    {   
            try {
                new DiscardServer(1020).run();
            } catch (Exception ex) {
                Logger.getLogger(Applet.class.getName()).log(Level.SEVERE, null, ex);
            }
    }
} 
```

DiscardServer：[https ://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/discard](https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/discard)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:20:21.933

我认为这是我刚刚修复的错误...您能否尝试使用快照 [1] 并告诉我它是否有效。这是问题[2]。

[1] [https://oss.sonatype.org/content/repositories/snapshots/io/netty/netty/4.0.0.Alpha6-SNAPSHOT/](https://oss.sonatype.org/content/repositories/snapshots/io/netty/netty/4.0.0.Alpha6-SNAPSHOT/)

[2] [https://github.com/netty/netty/issues/669](https://github.com/netty/netty/issues/669)

# javascript - 限制 Web Worker CPU 利用率？

> ID：12999891
> 
> 赞同：7
> 
> 时间：2012-10-21T16:43:17.537
> 
> 标签：javascript, multithreading, html, web-worker

我正在考虑使用 Web Workers 编写一个长时间运行的 CPU 密集型操作，并且似乎可以使用这些将客户端的 CPU 推到 100%。（请参阅[Web Workers 能否利用 100% 的多核 CPU？](https://stackoverflow.com/questions/11871452/can-web-workers-utilize-100-of-a-multi-core-cpu)）

有谁知道任何有效的方法来限制网络工作者的 CPU 利用率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:23:14.667

Indeed there is a way.

Structure your computations so they can be done by repeatedly calling a function which performs a part of the work before exiting. Just before exiting, use setTimeout to schedule a new call on the worker function in a few milliseconds. The wait time can be adjusted to use nore or less CPU time.

```
function doWork () {
  var timer = new Date ();

 // do n cyles of work here

 timer = new Date () - timer; // time spent working 
 setTimeout (doWork, timer);  // wait an equivalent time for 50% processor load
} 
```

# c# - 访问位图的字节数组

> ID：12999893
> 
> 赞同：0
> 
> 时间：2012-10-21T16:43:25.673
> 
> 标签：c#, c++, c, bitmap

1- 在 Windows CE 中，我在 C# 中有一个位图对象。

2- 我在 extern dll 中有一个 C 函数，它期望作为参数的指针指向表示 RGB565 格式、宽度和高度的图像的字节数组。该函数将利用这个字节数组。

所以我需要传递Bitmap对象的字节数组指针，但是我可以找到一种实用的方法来获取这个指针。一种方法是使用内存流或其他方式将此 Bitmap 转换为字节数组，但它会创建一个新的字节数组，因此我会将对象、位图和字节数组都保存在内存中，但我不想要它因为可用内存很少，这就是为什么我需要访问位图对象的字节数组，而不是创建一个新的字节数组。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:02:38.847

你可以做这样的事情，其中​​图像是你的位图：

```
Rectangle area = (new Rectangle(0, 0, image.width, image.height));
BtimapData bitmapData = image.LockBits(area, ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);
stride = bitmapData.Stride;
IntPtr ptr = bitmapData.Scan0; 
```

我知道您不想将位图的 RGB 值复制到另一个数组，但这是最好的解决方案。该数组仅在使用 C 代码绘制时才会在内存中。我在 Windows Professional 6 中使用了类似的方法，它并没有引入很多开销。有许多 FastBitmap 实现可用。[您可以在stackoverflow](https://stackoverflow.com/questions/1790678/why-doesnt-fastbitmap-get-garbage-collected)或此[实现](http://code.google.com/p/subtitleedit/source/browse/trunk/src/Logic/FastBitmap.cs?spec=svn1396&r=1396)上检查此问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:56:12.890

您可以使用不安全代码来获取位图数据指针。

使用以下代码：

```
var rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
var bmpData =
    bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite,
    bmp.PixelFormat);

IntPtr ptr = bmpData.Scan0;

byte* bmpBytes = (byte*)ptr.ToPointer(); 
```

`bmp`你的`Bitmap`对象在哪里。

然后你也可以做相反的事情：

```
ptr = new IntPtr(b);

bmpData.Scan0 = ptr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:31:22.110

感谢“NikolaD”和“oxilumin”的回应，我可以解决我的问题。

当我使用 RGB565 时，代码是：

```
imgMap.Image = new Bitmap(imgMap.Width, imgMap.Height, PixelFormat.Format16bppRgb565);
Rectangle area = (new Rectangle(0, 0, imgMap.Width, imgMap.Height));
BitmapData bitmapData = ((Bitmap)imgMap.Image).LockBits(area, ImageLockMode.ReadWrite, PixelFormat.Format16bppRgb565);
IntPtr ptrImg = bitmapData.Scan0; 
```

其中：imgMap 是一个 PictureBox

再次感谢

# java - 使用扫描仪获取用户输入

> ID：12999899
> 
> 赞同：7
> 
> 时间：2012-10-21T16:44:03.303
> 
> 标签：java, java.util.scanner

我正在尝试让扫描仪循环输入。一旦用户想要完成，他可以退出这个循环。我尝试了许多不同的方法来做到这一点，但总是有一些问题。这是代码：

```
private void inputEntries() {
    Scanner sc = new Scanner(System.in);
    System.out.println("Continue?[Y/N]");
    while (sc.hasNext() && (sc.nextLine().equalsIgnoreCase("y"))) {//change here
        System.out.println("Enter first name");
        String name = sc.nextLine();
        System.out.println("Enter surname");
        String surname = sc.nextLine();
        System.out.println("Enter number");
        int number = sc.nextInt();
        Student student = new Student(name, surname, number);
        students.add(student);
        try {
            addToFile(student);
        } catch (Exception ex) {
            Logger.getLogger(TextReader.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("Continue?[Y/N]");
    }
} 
```

上面代码的问题，也发生在我尝试的不同方法上，是当用户键入*Y*时，`Scanner`将跳过第一个输入的名字，并跳转到姓氏。如果用户键入*N*，则循环正确停止。有人可以解释发生这种情况的原因，以及如何使用`Scanner`类来克服？

ps：执行类似`while(sc.nextLine().equals("Y"))`, 的操作将导致循环在第一次运行循环后从用户获取输入之前终止。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T16:57:36.273

这是因为您正在使用[`Scanner#next`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)方法。如果您查看该方法的文档，它会返回下一个读取的令牌。

因此，当您使用`next`方法读取用户输入时，它不会`newline`在最后读取。然后由循环`nextLine()`内部读取。`while`因此，你`firstName`包含一个`newline`你不知道的东西。

所以，你应该`nextLine()`在你的 while 中使用而不是`next()`.

方法的情况也类似[`nextInt`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29)。它也不会读取换行符。因此，您可以`read`使用`readLine`并将其转换为`int`使用`Integer.parseInt`. `NumberFormatException`如果输入值无法转换为`int`. 所以你需要相应地处理它。

您可以尝试以下代码：-

```
Scanner sc = new Scanner(System.in);
System.out.println("Continue?[Y/N]");
while (sc.hasNext() && (sc.nextLine().equalsIgnoreCase("y"))) {//change here
    System.out.println("Enter first name");
    String name = sc.nextLine();
    System.out.println("Enter surname");
    String surname = sc.nextLine();
    System.out.println("Enter number");
    int number = 0;
    try {
        number = Integer.parseInt(sc.nextLine());
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    }
    System.out.println("Continue?[Y/N]");
} 
```

但是，请注意一件事，如果您输入一个无法传递给您的值，`Integer.parseInt`您将得到一个异常，并且该输入将被跳过。对于这种情况，您需要使用`while`循环来处理它。

**或者，如果您不想进行异常处理**：-

您可以添加一个`empty sc.nextLine()`after `sc.nextInt()`，这将消耗`newline`剩下的，如下所示： -

```
 // Left over part of your while loop

    String surname = sc.nextLine();
    System.out.println("Enter number");
    int number = sc.nextInt();
    sc.nextLine(); // To consume the left over newline;
    System.out.println("Continue?[Y/N]"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T16:53:55.277

*   用于`equalsIgnoreCase(..)`防止*Y*或*N*的大小写为小写，反之亦然。
*   不要使用`sc.next()`rather`sc.nextLine()`来实现你想要的，因为`next()`只读取到下一个空格，而`nextLine()`读取到下一个中`\n`​​断。
*   不要使用`nextInt()`read all data as`String`然后转换，因为`nextInt()`就像`next()`这样不会读到下一个*\n*。

试试这样：

```
Scanner sc = new Scanner(System.in);
System.out.println("Continue?[Y/N]");

while (sc.hasNext() && (sc.nextLine().equalsIgnoreCase("y"))) {//change here

    System.out.println("Enter first name");
    String name = sc.nextLine();

    System.out.println("Enter surname");
    String surname = sc.nextLine();

    System.out.println("Enter number");

    int number=0;

    try {
    number = Integer.parseInt(sc.nextLine());//read int as string using nextLine() and parse
    }catch(NumberFormatException nfe) {
        nfe.printStackTrace();
    }

    System.out.println("Continue?[Y/N]");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T17:33:14.577

你可以使用

```
String abc = "abc";
String answer = "null";
while (abc.equals("abc")
{
if (answer.equals("n")
{
break;
}
while (answer.equals("y"))
{
//Put your other code here
System.out.print("Continue? [y/n]")
answer = input.nextLine();
if (answer.equals("n")
{
break;
}
}
} 
```

当输入为

```
"n" 
```

您还必须像这样导入和创建扫描仪：

```
//This is how you import the Scanner
import java.util.Scanner;
//This is how you create the Scanner
Scanner input = new Scanner(System.in);
/**
*The name
*/
"input"
/**
*is used because of
*/
input.nextLine 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-27T12:38:32.193

```
public void display() {
    int i, j;
    for (i = 1; i <= 5; i++) {
        for (j = i; j < 5; j++) {
            System.out.print(" ");
        }
        for (j = 1; j < (2 * i); j++) {
            System.out.print(i % 2);
        }
        for (j = 1; j < ((5 * 2) - (i * 2)); j++) {
            System.out.print(" ");
        }
        for (j = 1; j < (2 * i); j++) {
            System.out.print(j);
        }
        System.out.println();
    }
    for (i = 4; i >= 1; i--) {
        for (j = i; j < 5; j++) {
            System.out.print(" ");
        }
        for (j = 1; j <= i; j++) {
            System.out.print(j);
        }
        for (j = i - 1; j >= 1; j--) {
            System.out.print(j);
        }
        for (j = 1; j < ((5 * 2) - (i * 2)); j++) {
            System.out.print(" ");
        }
        for (j = 1; j < (2 * i); j++) {
            System.out.print(j);
        }
        System.out.println();
    }
} 
```

# php - PHP套接字监听循环

> ID：12999900
> 
> 赞同：8
> 
> 时间：2012-10-21T16:44:05.110
> 
> 标签：php, sockets, networking, tcp

使用以下代码，我可以收到 1 个请求并编写它：

```
function listen()
{
    // Set time limit to indefinite execution
    set_time_limit (0);

    // Set the ip and port we will listen on
    $address = 'XX.XX.XX.XXX';
    $port = XXXX;

    // Create a TCP Stream socket
    $sock = socket_create(AF_INET, SOCK_STREAM, 0);

    // Bind the socket to an address/port
    $bind = socket_bind($sock, $address, $port);

    // Start listening for connections
    socket_listen($sock);

    /* Accept incoming requests and handle them as child processes */
    $client = socket_accept($sock);

    // Read the input from the client &#8211; 1024 bytes
    $input = socket_read($client, 2024);

    // Strip all white spaces from input
    echo $input;

    // Close the master sockets
    $close = socket_close($sock);

    var_dump($close);
}

listen(); 
```

但是一旦收到 1 个数据包，它就会自动关闭侦听。我需要继续接收数据包，直到收到退出或任何关闭命令。

我应该如何更改上面的代码以使此函数成为循环？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T17:18:27.027

```
set_time_limit (0);

$address = '46.49.41.188';

$port = 7777;
$con = 1;
$word = "";

$sock = socket_create(AF_INET, SOCK_STREAM, 0);
$bind = socket_bind($sock, $address, $port);

socket_listen($sock);

while ($con == 1)
{
    $client = socket_accept($sock);
    $input = socket_read($client, 2024);

    if ($input == 'exit') 
    {
        $close = socket_close($sock);
        $con = 0;
    }

    if($con == 1)
    {
        $word .= $input;
    }
}

echo $word; 
```

如果请求将退出侦听将关闭。该方法已经过测试:)并且有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:04:32.397

怎么样：

```
function listen(){
// Set the ip and port we will listen on
$address = 'XX.XX.XX.XXX';
$port = XXXX;
// Create a TCP Stream socket
$sock = socket_create(AF_INET, SOCK_STREAM, 0);
// Bind the socket to an address/port
$bind = socket_bind($sock, $address, $port);
// Start listening for connections
socket_listen($sock);
/* Accept incoming requests and handle them as child processes */
$client = socket_accept($sock);
// Read the input from the client &#8211; 1024 bytes
$input = socket_read($client, 2024);
// Strip all white spaces from input
echo $input;
// Close the master sockets
$close = socket_close($sock);
var_dump($close);
listen();
}
set_time_limit (0);
listen(); 
```

# jframe - JFrame 保持在屏幕上而不是关闭

> ID：12999902
> 
> 赞同：0
> 
> 时间：2012-10-21T16:44:23.473
> 
> 标签：jframe

您好，我正在开发一个小软件，但我的 JFrame 遇到了问题。当我按下“返回”按钮时，它应该关闭并打开另一个窗口。新窗口确实出现了，但 JFrame 没有关闭。请帮忙。这是下面的代码

```
 public class classallocation extends JFrame{

public JTextField txt_mcode,txt_day,txt_start,txt_end,txt_expstd,txt_resources,    txt_classno;
public JLabel label1, label2, label3, label4, label5, label6, label7,label8,label9;
public JButton Confirm, Reset, Back,disp,adeq,avail;

JTable tt = null;

public classallocation(){
//coding of interface   
    label1 = new javax.swing.JLabel();
    label1.setFont(new java.awt.Font("Verdana", 3, 14)); // NOI18N
    label1.setForeground(Color.BLACK);
    label1.setText("Manage Classroom Allocation");

    label2 = new javax.swing.JLabel("Enter Module Code:");
    txt_mcode = new javax.swing.JTextField(8);

    label3 = new javax.swing.JLabel("Day:");
    txt_day = new javax.swing.JTextField(10);

    label4 = new javax.swing.JLabel("Start Time:");
    txt_start = new javax.swing.JTextField(8);

    label5 = new javax.swing.JLabel("End Time:");
    txt_end = new javax.swing.JTextField(5);

    label6 = new javax.swing.JLabel("Expected Number of Students:");
    txt_expstd = new javax.swing.JTextField(5);

    label7 = new javax.swing.JLabel("Required Resources:");
    txt_resources = new javax.swing.JTextField(20);

    label9 = new javax.swing.JLabel("Enter Classroom No to be allocated:");
    txt_classno = new javax.swing.JTextField(5);

    disp = new javax.swing.JButton();
    disp.setText("Display Details");
    adeq = new javax.swing.JButton();
    adeq.setText("View Adequate Rooms");

    avail = new javax.swing.JButton();
    avail.setText("View Rooms' Availability");

    Confirm = new javax.swing.JButton();
    Confirm.setText("Confirm Allocation");

    Reset = new javax.swing.JButton();
    Reset.setText("Reset");

    Back = new javax.swing.JButton();
    Back.setText("Back");

    label1.setBounds(90, 25, 400, 50);

    label2.setBounds(50, 100, 200, 50);
    txt_mcode.setBounds(275, 105, 75, 30);

    label3.setBounds(50, 150, 100, 50);
    txt_day.setBounds(275, 155, 75, 30);
    disp.setBounds(375, 150, 190, 30);

    label4.setBounds(50, 200, 100, 50);
    txt_start.setBounds(275, 205, 75, 30);
    adeq.setBounds(375, 200, 190, 30);

    label5.setBounds(50, 250, 100, 50);
    txt_end.setBounds(275, 255, 75, 30);
    avail.setBounds(375, 250, 190, 30);

    label6.setBounds(50, 300, 200, 50);
    txt_expstd.setBounds(275, 305, 75, 30);

    label7.setBounds(50, 350, 200, 50);
    txt_resources.setBounds(275, 355, 200, 30);

    label9.setBounds(50, 400, 250, 50);
    txt_classno.setBounds(275, 405, 75, 30);

    Confirm.setBounds(100, 525, 150, 30);
    Reset.setBounds(275, 525, 100, 30);
    Back.setBounds(400,525,100,30);

    JFrame caFrame = new JFrame("Classroom Allocation Form");

    caFrame.add(label1);
    caFrame.add(label2);
    caFrame.add(txt_mcode);
    caFrame.add(label3);
    caFrame.add(txt_day);
    caFrame.add(label4);

    caFrame.add(txt_start);
    caFrame.add(label5);
    caFrame.add(txt_end);
    caFrame.add(label6);
    caFrame.add(txt_expstd);
    caFrame.add(label7);
    caFrame.add(txt_resources);
    caFrame.add(label9);
    caFrame.add(txt_classno);

    caFrame.add(disp);
    caFrame.add(adeq);
    caFrame.add(avail);
    caFrame.add(Confirm);
    caFrame.add(Reset);
    caFrame.add(Back);

    caFrame.setLayout(null);
    caFrame.setVisible(true);
    caFrame.setSize(650, 650);
    caFrame.setResizable(true);
    caFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 

    Confirm.setMnemonic('C');
    Confirm.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e)
        {
            Confirm.setEnabled(true);
            }
    });

    Reset.setMnemonic('R');
    Back.setMnemonic('B');

    Handleraddlecturer h = new Handleraddlecturer();
    disp.addActionListener(h);
    adeq.addActionListener(h);
    avail.addActionListener(h);
    Confirm.addActionListener(h);
    Reset.addActionListener(h);
    Back.addActionListener(h);

}

public class Handleraddlecturer implements ActionListener{

     public void actionPerformed(ActionEvent event){

        String name = ((JButton)event.getSource()).getText();
        String sz = null;
        sz = txt_expstd.getText();
        String rsc = null;
        rsc = txt_resources.getText();

        if (name.equals("Back")){

            dispose();
            Mainmenuadmin cmn = new Mainmenuadmin();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T03:24:28.110

更改以下代码：

```
if (name.equals("Back")){
    dispose();
    Mainmenuadmin cmn = new Mainmenuadmin();
} 
```

至：

```
if (name.equals("Back")){
    Mainmenuadmin cmn = new Mainmenuadmin();
    setVisible(false);
    cmn.setVisible(true);
} 
```

# apache - 使用 htaccess 将 Https 重定向到 http

> ID：12999910
> 
> 赞同：76
> 
> 时间：2012-10-21T16:44:57.130
> 
> 标签：apache, .htaccess, http, https

我正在尝试将[https://www.example.com](https://www.example.com)重定向到[http://www.example.com](http://www.example.com)。我在 .htaccess 文件中尝试了以下代码

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

此代码成功地将[https://example.com](https://example.com)重定向到[http://www.example.com](http://www.example.com)。但是，当我输入[https://www.example.com](https://www.example.com)时，它会在浏览器中显示“网页不可用”错误。

我也尝试了以下2个代码但没有成功

尝试 1

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^/(.*):NOSSL$ http://www.example.com/$1 [R=301,L] 
```

尝试 2

```
RewriteEngine On
RewriteCond %{HTTPS} on
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} 
```

上述两次尝试都失败了。有什么建议么？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-10-21T17:02:48.620

尝试 2 接近完美。稍微修改一下：

```
RewriteEngine On
RewriteCond %{HTTPS} on
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

更新：

从技术角度来看，上述解决方案有效。*但是*：

几年后，用户将收到一个巨大的警告，表明连接不是私有的。这是意料之中的：今天的浏览器都不会默默地从加密连接切换到未加密连接，原因很明显......你无法绕过标准浏览器的这种行为。然而，这与重定向本身无关。这就是当今网络的运作方式，保护用户免受犯罪意图侵害的方式。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-07-29T17:45:50.070

但是，如果您的网站没有安全证书，它位于共享托管环境中，并且您不想在通过 https 请求您的网站时收到“警告”，则无法使用 htaccess 重定向它。原因是警告消息在请求到达 htaccess 文件之前就被触发了，所以你必须在服务器上修复它。转到 /etc/httpd/conf.d/ssl.conf 并注释掉有关虚拟服务器 443 的部分。但很可能您的托管服务提供商不会给您太多控制权。因此，您必须移动到不同的主机或购买 SSL，以便在您的 htaccess 有机会重定向之前不会触发警告。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-01-08T10:15:48.137

您可以使用以下规则从**https**重定向到**http**：

```
 RewriteEngine On

RewriteCond %{HTTPS} ^on$
RewriteRule ^(.*)$ http://example.com/$1 [NC,L,R] 
```

解释 ：

```
RewriteCond %{HTTPS} ^on$ 
```

检查 HTTPS 是否**打开**（使用 https 发出请求）

**然后**

```
RewriteRule ^(.*)$ http://example.com/$1 [NC,L,R] 
```

[将任何请求 ( https://example.com/foo](https://example.com/foo) ) 重定向**到** [http://example.com/foo](http://example.com/foo)。

*   $1 是 RewriteRule 模式中正则表达式的一部分，它包含在**(.+)**中捕获的任何值，在这种情况下，它捕获域名之后的完整 request_uri 一切。

*   [NC,L,R] 是标志，NC 使 uri 区分大小写，您可以在请求中使用大写或小写字母。

如果当前规则匹配，L 标志告诉服务器停止处理其他规则，当您在块中有更多规则时，使用 L 标志避免规则冲突很重要。

R 标志用于进行外部重定向。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-07-20T11:18:51.907

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 443
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-23T07:10:30.583

http 和 https 的区别在于 https 请求是通过 ssl 加密的连接发送的。在浏览器发送http请求之前，浏览器和服务器之间必须建立ssl加密连接。

Https 请求实际上是通过 ssl 加密连接发送的 http 请求。如果服务器拒绝建立 ssl 加密连接，则浏览器将没有连接来发送请求。浏览器和服务器将无法相互交谈。浏览器将无法发送它想要访问的 url，服务器将无法响应重定向到另一个 url。

所以这是不可能的。如果你想响应 https 链接，那么你需要一个 ssl 证书。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-10T16:47:56.720

```
RewriteCond %{HTTP:X-Forwarded-Proto} =https 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-18T12:11:59.520

你的代码是正确的。只需将它们放入`<VirtualHost *:443>`

例子：

```
<VirtualHost *:443>
  SSLEnable

  RewriteEngine On
  RewriteCond %{HTTPS} on
  RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI}

</VirtualHost> 
```

# solr - Solr 4.0 默认距离单位

> ID：12999915
> 
> 赞同：0
> 
> 时间：2012-10-21T16:45:20.947
> 
> 标签：solr, distance

从 solr wiki 看来，“d”查询参数中指定的默认距离单位是“km”（公里）

但是根据我的测试，它似乎默认为“度”

```
start:0
rows:100
wt:json
indent:true    
fq:{!geofilt sfield=location}    
pt:-32.058333,122.050000
d:0.01 
```

如何确保距离单位确实是度（或公里）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:24:14.083

要将公里用作距离单位，请使用 solr.LatLonType

我之前使用的是 solr.PointType，它的距离单位是度数（我假设）。

# c# - C#：非静态字段、方法或属性需要对象引用

> ID：12999919
> 
> 赞同：3
> 
> 时间：2012-10-21T16:45:59.477
> 
> 标签：c#, object, methods, reference

当有这么多相关的问题但我无法找到/理解我正在寻找的答案时，我觉得问这个很糟糕。

// 2\. 开发一个程序将货币 X 转换为货币 Y，反之亦然。

```
using System;

class Problem2
{
    static void Main (string[] args)
    {
        while (true) {
            Console.WriteLine ("1\. Currency Conversion from CAD to Won");
            Console.WriteLine ("2\. Currency Conversion from Won to Cad");
            Console.Write ("Choose from the Following: (1 or 2)? ");
            int option = int.Parse( Console.ReadLine() );
            //double x;
            if (option == 1) {
                Console.WriteLine ("Type in the amount you would like to Convert CAD to Won: ");
                //double y =double.Parse( Console.ReadLine());
                //Console.WriteLine( cadToWon( y ) );
                Console.WriteLine( cadToWon( double.Parse( Console.ReadLine() ) ));
            }
            if (option == 2) {
                Console.WriteLine ("Type in the amount you would like to Convert Won to CAD: ");
                Console.WriteLine( wonToCad (double.Parse( Console.ReadLine())));
            }
        }
    }

    double cadToWon( double x )
    {
        return x * 1113.26;
    }

    double wonToCad( double x)
    {
        return x / 1113.26;
    }
} 
```

这给了我错误消息“非静态字段，方法或属性'问题2需要对象引用......”我知道如果我在方法前面添加静态，我将能够运行程序但是我想知道为什么我需要它（我认为这是因为 Main 是静态的？）为了使用这些方法而不向它们添加静态，我需要更改什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T16:47:37.827

由于您的 Main 方法是静态的，因此如果您想从 Main 调用cadToWon 和 wonToCad*也必须是静态的。*

```
static double cadToWon(double x) //...

static double wonToCad(double x) //... 
```

另一种选择是将 Main、cadToWon 和 wonToCad 方法的所有逻辑分解为一个*新类*，然后让 Main 方法简单地设置并运行该新类。但我怀疑这可能超出了你的任务范围。

* * *

要回答您**为什么**添加静态可以使这项工作的问题：

`static`方法在类的所有实例之间**共享。**因此，无论`Problem2`您在哪个类实例中，都只有**一种** `Main`方法可以在所有实例中共享。

`cadToWon`但是，是一个**实例**方法。它属于类的**特定**实例`Problem2`。

结果，您不能调用`cadToWon`from `Main`，因为`Main`不知道要 调用哪个*实例*。不知道要调用什么实例，因为不调用任何实例。`Problem2``cadToWon``Main``cadToWon``Main``belong`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:49:11.727

这是因为 Main 是静态的，没有分配给 Problem2 的任何实例。不知道在问题 2 的哪个实例发送变量，它无法调用正确的方法。

现在，您的方法不会修改任何 Problem2 的任何字段。但他们可以，这就是整个问题。他们应该修改 Problem2 的哪个实例？静态方法无法知道这一点。

因此，如果您已经初始化了 Problem2 的一个实例，您可以从静态 Main 调用它自己的方法版本。

```
Problem2 problem = new Problem2();

problem.cadToWon(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:50:19.570

制定你的方法`static`将解决这个问题。您不能`static`从静态方法（例如）调用实例成员（不以 开头`static void main(..)`）。它要么必须声明它们，要么`static`创建方法所在的类的实例并通过实例访问它们。我认为你在这里不需要

```
static double cadToWon( double x )
{
    return x * 1113.26;
}

static double wonToCad( double x)
{
    return x / 1113.26;
} 
```

通过实例访问

```
Program2 p2 = new Program2();
double x = p2.wonToCad(10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-30T08:54:39.587

这个解决方案正是这里所寻求的。试图将静态 Main 中的对象传递给 Class: Program 中的方法，如果没有：

```
 `Program ProgramInstance = new Program();
 ProgramInstance.ProcessObject(MyObject);` 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-02T14:50:08.050

如果您不想将它们更改为静态，则只需将它们移动到另一个类，然后在 Main 创建一个对象并使用这些函数。

# java - <%@page session="false" %> 时访问 JSTL 中的会话范围变量

> ID：12999921
> 
> 赞同：2
> 
> 时间：2012-10-21T16:45:59.797
> 
> 标签：java, session, servlets, jstl

我有两个问题，

1.  当 JSP 具有`<%@page session="false" %>`. 在我的 Web 应用程序中，我在登录时从 servlet 创建一个新会话，`request.getSession()`之后使用和设置属性。但是我的 JSP 页面不包含`<%@ page session="false" %>`，我使用 JSTL 标记来显示存储在会话和请求中的数据。调试后，我可以看到新会话是随机创建的。如果我添加`<%@ page session="false" %>`到 JSP 页面以确保不会创建新会话，会不会有任何影响？

2.  另外，我在 web.xml 中设置了 15 分钟的超时时间。通常，如果超过 15 分钟不活动，我的应用程序就会超时。但偶尔，它会在 1 或 2 分钟内超时。我不理解这种奇怪的行为。这是否与正在创建的新会话有关。当它超时时，我看到创建了一个具有不同会话 ID 的新会话。在我的代码中，我检测到超时如下，

    ```
    if (request.getRequestedSessionId() != null
        && !request.isRequestedSessionIdValid()) {
        // redirect to a login page with a message
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:58:52.780

1.  当您`<%@page session="false" %>`在 JSP 中编写指令时，这会 `HttpSession session = request.getSession();`从其自动生成的 servlet 的 java 源代码中删除该行。所以不，如果你一开始不抓住它，你就不能访问页面中的会话信息。

2.  如果它在比 web.xml 中设置的时间更长的时间后超时就可以了，但如果它更早地超时就不行了。你的应用程序中一定有一些你没有想到的东西，比如对`session.invalidate()`某个地方的调用。

# android - 从edittext将数据添加到listview另一个活动android

> ID：12999928
> 
> 赞同：1
> 
> 时间：2012-10-21T16:46:45.943
> 
> 标签：android, listview

我想问一下..

我有 2 个活动，只说 form1 和 form2，我在 form1 上有一个列表视图。我想用一个按钮将表单2中的edittext中的数据添加到表单1中的列表视图中。我该怎么做？

如果我使用 onResume() 用户必须将活动更改为 form1 以刷新列表视图..

我尝试使用此代码，但它似乎没有工作..

```
if(form1.listviewname != null)
{
        ((ArrayAdapter)form1.listviewname.getAdapter()).notifyDataSetInvalidated();
} 
```

谢谢你！！

-------------------------------------------------- ----------已编辑----------

刚才我尝试在 form2 上使用此代码

```
list_list.add(myitem);
form1.listview.setAdapter(adapter1);                        
adapter1.notifyDataSetChanged(); 
```

*myitem 是字符串，它从表单 2 的文本框中获取值*

它似乎有效，但现在的问题是每次我将数据添加到 form1 中的 listview 时，它总是会覆盖 listview 中的现有数据。

我怎样才能解决这个问题？

谢谢你！！

解决 - - - - - - - - - - - - - - - - - - - - - - - - - -- 通过在 form2 上声明来解决

```
public static ArrayList<String> list_list = new ArrayList<String>(); 

public static ArrayAdapter<String> adapter1; 
```

我添加了公共静态。

谢谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:29:24.407

**-**假设`Activity` **A**有`ListView`并且`Activity` **B**有`EditText`with `Button`。

**在活动 B 中：**

```
Button mbutt = (Button)findViewById(R.id.button_mSubmit);
EditText mtext = (EditText)findViewById(R.id.editText_mData);

mbutt.setOnClickListener(new OnClickListener(){

   public void onClick(View v) {

                      Intent i = new Intent(B.this, A.class);

                      i.putExtra("text_key",mtext.getText().toString());

                      startActivity(i);
        }

}); 
```

**在活动 A 中：**

**-**在 onResume() 中，执行此操作

```
 Intent i = getIntent();

 String mdata = i.getExtras().getString("text_key"); 
```

**-**现在您已经获得了`mdata`变量中的数据，我希望您`static ArrayList`在活动 A 中使用了 a 来保存数据，而这些数据又必须输入到`ArrayAdater`.

**例如：**

```
public static ArrayList<String> aList = new ArrayList<String>(); 
```

**-**现在最后在 中`onResume()`，您必须将此`mdata`变量的**值**添加到`ArrayList`中，然后将其输入到中`ArrayAdpater`，然后**再次**`ListView`使用 this设置`Adapter`。

# c - 如何计算 C 中的大 nPr？

> ID：12999929
> 
> 赞同：3
> 
> 时间：2012-10-21T16:46:48.877
> 
> 标签：c

我写了一个函数来计算 C 中两个数字的 nPr，你能帮我调整它来处理大数字吗？

我需要能够计算出高达 1x10^12 的值 - 我尝试了许多不同的数据类型并且非常卡住！

```
#include<stdio.h>
    #include<math.h>

int main()
    {
        long int n=49,k=6;
            printf("%li nPr %li = %li\n\n",n,k,nPr(n,k));

        return 0;

    }      

long nPr(long int n, long int k);
     long nPr(long int n, long int k){

        if (n < 0 ){
            printf("\nERROR - n is less than 0\n\n");
            return -1;
        }

        if (k > n ){
            printf("\nERROR - k is greater than n\n\n");
            return -1;
        }

        else {
            long int i,result = 1,c=n+1-k;

            for(i=c; i<=n; i++)
            {
                result = result * i;
            }
            return result;
        }
     } 
```

谢谢

Ĵ

**更新：**这些是没有重复的排列，

我也试过

```
long long nPr(long long int n, long long int k);
long long nPr(long long int n, long long int k){

    if (n < 0 ){
        printf("\nERROR - n is less than 0\n\n");
        return -1;
    }

    if (k > n ){
        printf("\nERROR - k is greater than n\n\n");
        return -1;
    }

    else {
        long long int i,result = 1,c=n+1-k;

        for(i=c; i<=n; i++)
        {
            result = result * i;
        }
        return result;
    }
 } 
```

但是它似乎没有任何区别

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:06:45.710

您可能想使用[bignums](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)进行计算，也许使用[GMP](http://gmplib.org/)库。如果你切换到 C++，你`a+b`甚至可以使用熟悉的符号，使用[C++ 类接口到 GMP](http://gmplib.org/manual/C_002b_002b-Class-Interface.html)。如果您停留在纯 C 语言中，则需要小心使用特定的例程，例如[mpz_add](http://gmplib.org/manual/Integer-Arithmetic.html)进行加法。

顺便说一句，某些语言（例如[Common Lisp](http://en.wikipedia.org/wiki/Common_Lisp)）本机支持 bignums（无需修改处理普通数字的源代码）。您可能想尝试使用[SBCL](http://sbcl.org/)（至少在 Linux 上）。

当然，bignum 算术（一门非常复杂的学科）比原生算术要慢。

C 本身不支持 Bignums，你需要使用一个库（或者实现你自己的库，这是无意义的：bignums 的好的算法很难理解和实现，所以最好使用现有的库）。

PS。`long long`不会有什么帮助，因为它仍然是 64 位。一些 GCC 编译器和目标处理器可能支持[__int128](http://gcc.gnu.org/onlinedocs/gcc/_005f_005fint128.html)即 128 位整数，但您确实需要 bignums。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T13:31:12.497

除法时不需要完全评估阶乘，这降低了整数溢出的风险（以及更有效）：

```
long factorialDivision(int topFactorial, int divisorFactorial)
{
    long result = 1;
    int i;
    for (i = topFactorial; i > divisorFactorial; i--)
        result *= i;
    return result;
}

long factorial(int i)
{
    if (i <= 1)
        return 1;
    return i * factorial(i - 1);
}

long nPr(int n, int r)
{
    // naive: return factorial(n) / factorial(n - r);
    return factorialDivision(n, n - r);
}

long nCr(int n, int r)
{
    // naive: return factorial(n) / factorial(r) * factorial(n - r);
    return nPr(n, r) / factorial(r);
} 
```

# python - 字符串包含列表的所有元素

> ID：12999930
> 
> 赞同：7
> 
> 时间：2012-10-21T16:46:49.673
> 
> 标签：python, regex, list

我正在转向 Python，并且对 Pythonic 方法还比较陌生。我想编写一个函数，它接受一个字符串和一个列表，如果列表中的所有元素都出现在字符串中，则返回 true。

* * *

这看起来相当简单。但是，我面临一些困难。代码是这样的：

* * *

```
def myfun(str,list):
   for a in list:
      if not a in str:
         return False
      return True 
```

* * *

```
Example : myfun('tomato',['t','o','m','a']) should return true
          myfun('potato',['t','o','m','a']) should return false
          myfun('tomato',['t','o','m']) should return true 
```

* * *

另外，我希望有人可以在这里提出一种可能的正则表达式方法。我也在尝试他们。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-21T16:49:34.203

```
>>> all(x in 'tomato' for x in ['t','o','m','a'])
True
>>> all(x in 'potato' for x in ['t','o','m','a'])
False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T16:49:37.337

```
def myfun(str,list):
   for a in list:
      if not a in str:
         return False
   return True 
```

return true 必须在 for 循环之外，而不是在 if 语句之后，否则它会在检查完第一个字母之后返回 true。这解决了您的代码的问题:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T16:52:46.003

对于每个字母，您都会浏览列表。因此，如果列表很长`n`并且您有`m`字母，那么复杂度是`O(n*m)`. `O(m)`如果你预处理这个词，你可能会实现。

```
def myfun(word,L):
    word_letters = set(word) #This makes the lookup `O(1)` instead of `O(n)`
    return all(letter in word_letters for letter in L) 
```

此外，将变量命名为不是一个好习惯，`str`就`list`好像您稍后需要创建`list`或使用`str`一样，它们将被您的变量遮蔽。

一些相关信息：

*   [`all`](http://docs.python.org/library/functions.html#all)功能

*   [`set`复杂](http://wiki.python.org/moin/TimeComplexity#set)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T16:58:26.133

如果您不担心重复字符，那么：

```
def myfunc(string, seq):
    return set(seq).issubset(string) 
```

而且，未经测试，如果您确实关心重复的字符，那么也许（未经测试）：

```
from collections import Counter
def myfunc(string, seq):
    c1 = Counter(string)
    c2 = Counter(seq)
    return not (c2 - c1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T17:54:05.117

为了好玩，我想我会用迭代器和地图来做：

```
from operator import contains
from itertools import imap, repeat

def myfun(str, list):
    return all(imap(contains, repeat(str), list)) 
```

然后我意识到这与接受的答案基本上做同样的事情，但可能有更多的方法调用。

```
def myfun(str, list):
    return all(letter in str for letter in list) 
```

# php - 使用 Composer 安装的 Doctrine 1 不起作用

> ID：12999934
> 
> 赞同：1
> 
> 时间：2012-10-21T16:47:42.657
> 
> 标签：php, doctrine, composer-php

我正在尝试将 Composer 集成到在仅支持 5.2 的服务器上运行的旧 PHP 应用程序中。该应用程序是使用 Zend Framework 1 和 Doctrine 1 编写的。在执行相关集成并尝试 composer 上可用的各种包后，我在运行应用程序时遇到错误：

```
PHP Warning:  include(Doctrine.php): failed to open stream: No such file or directory in [...]/www/dispatcher.php on line 11
[Sun Oct 21 12:33:31 2012] [error] [client ::1] PHP Warning:  include(): Failed opening 'Doctrine.php' for inclusion (include_path='[...]/application/library:[...]/vendor/digital-canvas/zend-framework/library:.:/usr/share/php5:/usr/share/php:[...]/app/application/../library:[...]/application/../ext') in [...]/www/dispatcher.php on line 11 
```

显然，问题在于 include_path 没有被修改为包含 Doctrine 的位置。`include_paths.php`Composer 目录中的文件只显示：

```
return array(
    $vendorDir . '/digital-canvas/zend-framework/library',
); 
```

而且我注意到`composer.json`Doctrine 1 包中的所有文件都没有包含一个`include-path`指令，我假设该指令将修改该文件。我错过了什么吗？这些包是否稍微损坏并需要明确的包含才能开始滚动？

将正确的目录添加到上面的数组*中确实可以*解决问题。但我不想接触生成的文件，我希望我遗漏的问题有一些微妙之处，而不是需要实施解决方法或弄清楚如何修复已发布的包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:04:29.593

这种情况下的问题是 Doctrine 本身似乎不依赖于 include_path，但 ZF1 依赖于，所以我建议您只需在项目的包含路径中添加该路径，如下所示：

```
{
    "include-path": ["vendor/doctrine/doctrine1/lib"]
} 
```

然后用于`composer dump-autoload`重新生成自动装载机。

# input - 多个用户在同一台 电脑的不同屏幕上同时使用不同的虚拟机 - 如何？

> ID：12999935
> 
> 赞同：2
> 
> 时间：2012-10-21T16:47:47.727
> 
> 标签：input, virtual, hyper-v, multi-user, multiscreen

使用虚拟化的单个台式计算机充当同一房间内多个同时用户的工作站 - 可以做到吗？！

购买了一台新电脑，很快就会安装带有 Hyper-V 的 Windows 8，理论上我将拥有驱动 4 个独立显示器的计算能力和端口。建立了这个虚拟网络后，3 个朋友可以访问一些 4 人游戏，控制台风格，每个用户的输入针对不同的 VM 并因此监控。输入可能是游戏控制器或键盘和鼠标组合，可能两者同时（？！）

通过搜索网络，我还没有找到 Windows 8 的示例（或以这种方式使用的其他操作系统）。这个计划有不可逾越的缺陷吗？是否需要任何第三方工具？想法？评论？例子？

期待您的回复，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:13:03.420

通常，VM 将通过父分区中的驱动程序与硬件进行交互。在 HyperV 中，父分区是可以直接访问硬件的 VM。相反，子分区访问虚拟化硬件。I/O 消息通过总线发送出去，并由父分区处理。其他管理程序遵循此模型，但对父分区和子分区使用不同的名称。例如，Xen 将父分区称为“Dom0”，将子分区称为“DomU”。

在您的情况下，您希望将专用硬件的访问权传递给您的朋友将使用的每个子分区 VM。查看VM配置中是否有这样的设置。请注意，您可能会遇到性能问题，因为您将在四个虚拟机上分配您的计算机硬件。

您在网上看不到很多示例，因为行业惯例是从单独的设备访问 VM。设备将通过远程协议访问 VM。一个简单的例子是 RDP（微软的远程桌面协议）。工作级版本是 ICA（Citrix 的协议）。与 RDP 相比，ICA 对于图形密集型远程会话很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:43:00.043

ICA 不支持多头 RemoteFX，这是您使之可行所需要的。但是，您不可能在一台带有 4 个键盘的机器上运行 4 个人。他们每个人仍然必须与专用 GPU 进行远程连接。这意味着您将需要至少 4 个 GPU。您还需要为 5 台机器（4 个虚拟机加上主机）提供足够的内存和足够的处理能力来运行您的游戏。因此，除非您找到连接 4 个键盘和 4 个鼠标以及 4 个显示器的方法，否则您仍然拥有 5 台机器。您可以使用瘦客户端来实现效果，但我认为您会发现它们并不适合游戏玩家市场。

如果您确实做到了这一点，您应该发布规格，因为将 VDI 带入游戏领域将是一个非常有趣的想法。

# javascript - 实现摇动动画的更好方法？

> ID：12999937
> 
> 赞同：2
> 
> 时间：2012-10-21T16:48:01.383
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 实现“摇动动画”。这个想法是，您可以使元素摇晃以引起人们的注意。以下是我想出的：

```
 function DrawAttention(item, count)
    {
        $(item).animate({top: '+=5'}, 50,
            function(){
                $(item).animate({top: '-=10'}, 100,
                    function(){
                       $(item).animate({top: '+=5'}, 50,
                            function(){
                                if(count>0)
                                {
                                    DrawAttention(item,count-1);
                                }
                            }); 
                    });
            });

    } 
```

我认为这有点冗长，并且想知道是否有人可以看到一种更优雅的方式来实现我想要的。

[在这里](http://jsfiddle.net/uaWkj/)拉小提琴。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T16:53:58.883

```
function DrawAttention(item, count)
{
    $(item)
        .animate({top: '+=5'}, 50)
        .animate({top: '-=10'}, 100)
        .animate({top: '+=5'}, 50, function(){
            if(count > 0){
              DrawAttention(item,count-1);
            }
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:52:45.250

据我所知，jQuery Ui (jqueryui.com) 对此有影响。尝试这将是另一种选择。

如果您想自己执行此操作，我会使用指数函数（如 2^-x）来计算抖动偏移。

# java - 在数组列表中搜索特定对象并打印数组列表中的所有对象

> ID：12999938
> 
> 赞同：1
> 
> 时间：2012-10-21T16:48:05.053
> 
> 标签：java, search, printing, arraylist

我必须实现一个 java 应用程序来演示对象数组列表的使用。我正在使用学生，并且我有一个 StudentTest 课程。我应该能够输入详细信息（我已经完成了）。我只是不确定如何按学生编号在数组列表中搜索特定对象以及如何打印数组列表。任何提示都会非常感谢。

到目前为止的代码：

```
package student;

public class Student {

    private String studentName;
    private String studentNo;
    private String email;
    private int year;

    public Student() {
        this.studentName = null;
        this.studentNo = null;
        this.email = null;
        this.year = -1;
    }

    public Student(String nName, String nNum, String nEmail, int nYr) {
        this.studentName = nName;
        this.studentNo = nNum;
        this.email = nEmail;
        this.year = nYr;
    }

    public void setStudentName(String newStudentName) {
        this.studentName = newStudentName;
    }

    public void setStudentNo(String newStudentNo) {
        this.studentNo = newStudentNo;
    }

    public void setEmail(String newEmail) {
        this.email = newEmail;
    }

    public void setYear(int newYear) {
        this.year = newYear;
    }

    public String getStudentName() {
        return studentName;
    }

    public String getStudentNo() {
        return studentNo;
    }

    public String getEmail() {
        return email;
    }

    public int getYear() {
        return year;
    }

}
package student;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class studentTest {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        List<Student> Students = new ArrayList();

        System.out.println("Enter number of students");
        int countStudents = input.nextInt();

        for (int i = 0; i < countStudents; i++) {
            Student student1 = new Student();
            System.out.println("Enter details for student: " + (i + 1));

            System.out.println("Enter name: ");
            student1.setStudentName(input.next());

            System.out.println("Enter Number: ");
            student1.setStudentNo(input.next());

            System.out.println("Enter email: ");
            student1.setEmail(input.next());

            System.out.println("Enter year: ");
            student1.setYear(input.nextInt());
            Students.add(student1);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:52:41.480

您需要`equals()`在您的班级中实现一个方法，`Student`如果 2 名学生相同，则该方法将返回 true `studentNo`，否则返回`false`。

```
@Override
public boolean equals(Object ob) {

    if (!(ob instanceof Student)) { 
        return false;
    }

    return ob.getStudentNo().equals(this.getStudentNo());
} 
```

现在，您可以使用`contains`方法来检查 a`student`是否在中`List`。

**更新**： -

`hashcode`此外，无论何时，您都需要重写方法`overriding` `equals`，以维护它们之间的一般合​​同。因此，覆盖`hashcode`将仅根据您正在比较的字段计算您`hashcode`的`instances``objects`

因此，您需要`hashcode`使用`studentNo`.

```
@Override
public int hashcode() {
    return this.getStudentNo().hashCode(); 
} 
```

*   HashCode 计算`algorithm`应该是这样的，如果两个实例相等，它们的 hashcode 也应该相等
*   它应该每次都为同一个实例返回相同的值，当然当实例没有被修改时。
*   两个不同的实例可以有相同的哈希码

**正如@hyde 在评论中所建议的那样**： -

如果这对您来说工作量太大，那么您可以使用一个不同的方法，它与方法执行相同的任务`equals`，例如`checkEquals()`，和`ignore`覆盖`equals()`方法。但在这种情况下，您必须`iteration`对您的`List`和对每个列表元素执行此操作`method`，并使用`student`进行比较。

```
for(Student student: studentList) {
    if (student.checkEquals(myStudent)) {
        System.out.println("True");
    }
} 
```

# mysql - Grails Spring Security UI MySQL所有用户禁用？

> ID：12999944
> 
> 赞同：2
> 
> 时间：2012-10-21T16:48:36.163
> 
> 标签：mysql, grails, spring-security

我将 Grails 2.1.1 与 Spring Security 1.2.7.1 和 Spring Security UI 0.2 一起使用。

当我使用内存数据库在 BootStrap.groovy 中创建一些测试用户时，我能够登录和管理用户——一切正常。但是，当我将数据源切换到 MySQL 数据库时，该服务指出，当我尝试登录时，该用户帐户已被禁用。我已检查并且密码似乎正确散列（即，它与数据库中的内容匹配） . 我对用户所做的唯一修改是包含一个研究 ID。在尝试调试代码时，我发现 org.codehaus.groovy.grails.plugins.springsecurity.GrailsUser 指示启用 = false。

任何帮助是极大的赞赏！

我的数据源：

```
 dataSource {
        driverClassName = "com.mysql.jdbc.Driver"
        dialect = org.hibernate.dialect.MySQL5InnoDBDialect
        url = "jdbc:mysql://localhost/users"
        username = "root"
        password = ""
        dbCreate = "create-drop" 
    } 
```

我的 BootStrap.groovy 代码：

```
 def adminRole = new Role(authority: 'ROLE_ADMIN').save(flush: true)
    def userRole = new Role(authority: 'ROLE_USER').save(flush: true)

    def testAdmin = new User(username: 'me', enabled: true, password: 'password', studyID: '0')
    testAdmin.save(flush: true)
    UserRole.create testAdmin, adminRole, true

    def testUser = new User(username: '100', enabled: true, password: 'test', studyID: '101')
    testUser.save(flush: true)
    UserRole.create testUser, userRole, true

    assert User.count() == 2
    assert Role.count() == 2
    assert UserRole.count() == 2 
```

启动应用程序后，我的 User.user 表中的一行。无论我如何更改这些值，登录尝试都会表明用户已被禁用：

```
id  version account_expired account_locked  enabled password    password_expired    studyid username
        1   0   1   1   1   5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a...   1   0   me 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:25:21.977

如果直接对数据库进行更改也会产生错误，并且它适用于“内存数据库”，我认为 MySQL 可能是问题所在。

可能是 MySQL 使用 Hibernate 无法正确使用的类型存储值作为`boolean`

您可以通过从数据库中检索用户并手动检查来测试：

```
if( ! user.enabled ) println "not enabled"  // or something like that 
```

[此邮件列表](http://grails.1312388.n4.nabble.com/Boolean-not-saving-correctly-BIT-1-saves-any-boolean-as-b-td1328443.html)上的最后 3 篇文章提供了`boolean`在 MySQL中正确映射 a 的解决方案：

您可以使用自定义方言将 BIT(1) 更改为布尔值：

```
 import org.hibernate.dialect.MySQL5InnoDBDialect 
   import java.sql.Types 

   class MyCustomMySQL5InnoDBDialect extends MySQL5InnoDBDialect { 
      MyCustomMySQL5InnoDBDialect() { 
         registerColumnType(Types.BIT, 'boolean') 
      } 
   } 
```

并使用它在 DataSource.groovy 中指定类：

```
 dataSource { 
      pooled = true 
      driverClassName = 'com.mysql.jdbc.Driver' 
      username = ... 
      password = ... 
      dialect = com.foo.bar.MyCustomMySQL5InnoDBDialect 
   } 
```

# wpf - XAML 中的条件块

> ID：12999954
> 
> 赞同：0
> 
> 时间：2012-10-21T16:49:59.377
> 
> 标签：wpf, xaml, controls, conditional

我想写一个条件控制如下：

```
<local:ConditionalBlock Condition={Binding CertainBoolValue}>
    <ConditionalBlock.Match>
        <!-- Any content here -->
    </ConditionalBlock.Match>
    <ConditionalBlock.Else>
        <!-- Any content here -->
    </ConditionalBlock.Else>
</local:ConditionalBlock> 
```

目前我不知道这应该如何实施。所以请帮忙。谢谢

# **编辑**

在等待响应时，我使用自定义控件和控件模板实现了自己的解决方案，如下所示：

```
using System.Windows;
using System.Windows.Controls;

namespace Sample
{
    public class ConditionalControl : ContentControl
    {
        static ConditionalControl()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(ConditionalControl), new FrameworkPropertyMetadata(typeof(ConditionalControl)));
        }

        public object Alternative
        {
            get { return (object)GetValue(AlternativeProperty); }
            set { SetValue(AlternativeProperty, value); }
        }

        public static readonly DependencyProperty AlternativeProperty =
            DependencyProperty.Register("Alternative", typeof(object), typeof(ConditionalControl), new UIPropertyMetadata(null));

        public bool Condition {
            get { return (bool)GetValue(ConditionProperty); }
            set { SetValue(ConditionProperty, value); }
        }

        public static readonly DependencyProperty ConditionProperty =
            DependencyProperty.Register("Condition", typeof(bool), typeof(ConditionalControl), new UIPropertyMetadata(null));
    }
} 
```

条件控制.xaml

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Sample">

    <Style TargetType="{x:Type local:ConditionalControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ConditionalControl}">
                    <Grid>
                        <ContentPresenter Name="match"/>
                        <ContentPresenter Name="alternative" ContentSource="Alternative" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Condition" Value="True">
                            <Setter TargetName="match" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="alternative" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="Condition" Value="False">
                            <Setter TargetName="match" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="alternative" Property="Visibility" Value="Visible"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

示例用法：

```
<Grid>
    <local:ConditionalControl Condition="{Binding CertainBoolValue}">
        <Label>Match case</Label>
        <local:ConditionalControl.Alternative>
            <Label>Alternative case</Label>
        </local:ConditionalControl.Alternative>
    </local:ConditionalControl>
</Grid> 
```

无论如何，感谢卢克伍德沃德的及时回复。我会将您的答案标记为已接受

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:38:22.037

一种方法是使用以下 XAML 创建一个 UserControl：

```
<ContentControl x:Class="WpfApplication1.ConditionalBlock"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" /> 
```

以及以下代码隐藏：

```
using System.Windows;
using System.Windows.Controls;

namespace WpfApplication1
{
    public partial class ConditionalBlock : ContentControl
    {
        public static readonly DependencyProperty ConditionProperty =
            DependencyProperty.Register("Condition", typeof(bool), typeof(ConditionalBlock),
                                        new FrameworkPropertyMetadata(Condition_Changed));

        public ConditionalBlock()
        {
            InitializeComponent();
            Loaded += ((s, e) => UpdateContent());
        }

        public bool Condition
        {
            get { return (bool)GetValue(ConditionProperty); }
            set { SetValue(ConditionProperty, value); }
        }

        public object Match { get; set; }

        public object Else { get; set; }

        private static void Condition_Changed(DependencyObject obj, DependencyPropertyChangedEventArgs e)
        {
            var conditionalBlock = obj as ConditionalBlock;
            if (conditionalBlock != null)
            {
                conditionalBlock.UpdateContent();
            }
        }

        private void UpdateContent()
        {
            Content = (Condition) ? Match : Else;
        }
    }
} 
```

请注意，我们已将超类从 更改`UserControl`为`ContentControl`。

这使用了条件的依赖属性，以便我们在绑定值更改时得到通知。当条件改变时，我们通过分配给`Content`我们继承自的依赖属性来更新哪些内容是可见的`ContentControl`。最后，为了确保在第一次显示控件时出现一个或其他内容，我们更新`Loaded`事件处理程序中的内容。（从构造函数中调用它不起作用，因为此时尚未设置`Match`and属性。）`Else`

我假设`Match`and`Else`属性的内容不会改变，所以我没有费心将它们实现为依赖属性。

# c - 递增指针时的模棱两可的行为

> ID：12999957
> 
> 赞同：1
> 
> 时间：2012-10-21T16:50:26.340
> 
> 标签：c, pointers

```
#include<stdio.h>
main()
{

        char c = 'R';
        printf("%c\n",c);
        c++;
        printf("%c\n",c);
        char *ptr ="Ramco Systems";
        printf("%c\n",(*ptr));
        (*ptr)++;
        printf("%d\n",(*ptr));

} 
```

第一个、第二个、第三个 printf 的输出是“R”、“S”和“R”（如预期的那样）。但是“(*ptr)++;”这一行 给出运行时错误。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T16:54:37.050

原因是因为指向的内存`ptr`是在编译时设置的并且是不可修改的。

因此通过访问第一个字符`*ptr`很好并返回`R`，但尝试增加第一个字符会产生运行时错误，因为不允许修改在编译时提供的字符串。

要在下面扩展 Seg Fault 的评论，编写代码的更好方法是：

```
const char *ptr ="Ramco Systems"; //pointer to const char
(*ptr)++; // yields compiletime error because *ptr is a const char 
```

请注意，在这个新代码中，声明的指针类型更准确，因此编译器能够在第二行给出编译时错误（比运行时错误好得多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:04:29.510

char *ptr = "Ramco 系统"

上面的语句变成了指向常量的指针，你试图修改它的无效内容，但是如果你希望编译器在编译时抛出错误，你可以使用/编写如下： const char * ptr = "Ramco System"

上述语句的行为方式相同。唯一的区别是当你写 (*ptr)++ 时，你会得到一个编译时错误，比如“修改只读位置”。在手上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:04:54.980

`(*ptr)++`应该`*(ptr++)`

`ptr`指向第一个字符

`(*ptr)`返回实际值

`(*ptr)++`是一个错误原因`(*ptr)`将返回一个无法分配或递增的**右值**（在您的情况下）。.还指向一个无法更改的常量（不是 C++ 的常量）字符！`R``ptr`

你应该首先增加`ptr`然后`dereference`它即`*(ptr++)`

**误解**

**像这样的**字符串文字**`"xyz"`总是被视为`char`在**C**中，但不能是`modified`。它们**没有**被声明为`const`或像其他人声称的那样是常量。只是不允许更改或**未定义****

 **在**C++中，** **字符串文字**表示为`const`无法更改的 char

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T17:46:04.457

也许你正在尝试做这样的事情？

```
 #include<stdio.h>
  main()
  {

    char c = 'R';
    printf("%c\n",c);
    c++;
    printf("%c\n",c);
    char aux[] = "Ramco Systems";
    char *p = aux;
    printf("%c\n",(*ptr));
    (*ptr)++;
    printf("%d\n",(*ptr)); 
```

}

但请记住，您取消引用的以下行然后递增：

```
 (*ptr)++; 
```

所以它的行为如下：“我指向哪个字母？好的，将这个字母更改为下一个字母（ascii 代码高 1 个单位的字母）”在这种情况下，将 'R' 更改为 'S'。

如果你想要指向'a'，你应该这样做：

```
 ptr++; 
```

通过这样做，您将 ptr 指向的地址加一，传递指向下一个字符。**

# d3.js - 条形图宽度上的 D3 鱼眼

> ID：12999958
> 
> 赞同：3
> 
> 时间：2012-10-21T16:50:31.057
> 
> 标签：d3.js, bar-chart, fisheye

我一直在尝试创建一个带有 d3 鱼眼笛卡尔失真的垂直条形图，只有 x 轴被扭曲。

我已使用以下代码成功扭曲了鼠标悬停时垂直条的 x 位置：

```
var maxMag = d3.max(dataset, function(d) { return d.value[10]; });
var yScale = d3.scale.linear().domain([0, maxMag]).range([0, h]);
var xScale = d3.fisheye.scale(d3.scale.linear).domain([0, dataset.length]).range([0, w]).focus(w/2);

var bar = svg.append("g")
        .attr("class", "bars")
    .selectAll(".bar")
        .data(dataset)
    .enter().append("rect")
        .attr("class", "bar")
        .attr("y", function(d) {
            return h - yScale(d.value[10]);
        })
        .attr("width", w/dataset.length)
        .attr("height", function(d) {
            return yScale(d.value[10]);
        })
        .attr("fill", function(d) {
            return (d.value[10] <= 6? "yellow" : "orange" );
        })
        .call(position);

// Positions the bars based on data.
function position(bar) {
    bar.attr("x", function(d, i) {
        return xScale(i);
    });
}

svg.on("mousemove", function() {
    var mouse = d3.mouse(this);
    xScale.distortion(2.5).focus(mouse[0]);

    bar.call(position);
}); 
```

然而在这一点上，在宽度上应用鱼眼对我来说仍然是一个谜。我尝试了几种方法，例如使用鱼眼刻度来表示宽度，但它没有按预期工作。

我想要做的是在鼠标悬停时扩大条形的宽度，就像在鼠标悬停时用笛卡尔失真挑出单个垂直条一样。

任何线索或帮助将不胜感激！

编辑：将计算 x 位置的方法更改为使用索引而不是时间，以防止图表中柱之间出现较大的差距

解决方案：感谢Superboggly，我将位置函数编辑如下：

```
// Positions the bars based on data.
function position(bar) {
    bar.attr("x", function(d, i) {
        return xScale(i);
    });
    bar.attr("width", function(d, i) {
        return xScale(i+1) - xScale(i);
    })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:35:59.253

目前，您的条形宽度是基于您的全宽除以您的数据集大小对吗？相反，如果您根据时间计算宽度，例如您的全部时间跨度除以数据集大小，该怎么办？然后每个条对应一个时间跨度，您可以使用“位置”函数与条的开始和结束来计算宽度。

# php - 如何在 ZF2 中编写满足 GET 参数的路由？

> ID：12999959
> 
> 赞同：3
> 
> 时间：2012-10-21T16:50:43.327
> 
> 标签：php, parameters, routes, zend-framework2

如何在 zf2 中编写允许类似`/:controller/:action/*`zf1 的路由的路由？

这样它就可以满足*`controller/action/id/1/page/2`*和*`controller/action?id=1&page=2`*？

满足诸如*`controller/action?id=1&page=2`*world 之类的参数的路由对于 ajax 请求很有用。

所以我当前的代码在我的**module.config.php中看起来像这样**

```
return array(
'controllers' => array(
    'invokables' => array(
        'Support\Controller\Support' => 'Support\Controller\SupportController',
    ),
),

'router' => array(
    'routes' => array(
        'support' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/support[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Support\Controller\Support',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
),
'view_manager' => array(
    'template_path_stack' => array(
        'support' => __DIR__ . '/../view',
    ),
), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:49:31.650

看看下面的问题和答案：

[如何在 ZF2 url 视图助手中添加查询参数](https://stackoverflow.com/questions/12785190/how-can-you-add-query-parameters-in-the-zf2-url-view-helper)

我会尝试设置一条路线，然后添加一条使用`Zend\Mvc\Router\Http\Query`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:04:38.643

查看[Zend\Mvc\Router](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.intro.html)的文档并快速查看[Zend Skeleton Application中的 Application 模块的](https://github.com/zendframework/ZendSkeletonApplication)[module.config.php](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php)文件，告诉我您需要设置一个与 url 匹配的[路由段](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html#zend-mvc-router-http-segment)路由器你想创建。

除了 Zend Framework 文档，还有这张幻灯片[介绍 Zend Framework 中的路由](http://evan.pro/zf2-router-talk.html#slide1)，您可能会发现它很有用。它有你想要实现的代码示例。

# html - 中心 div 左右对齐 div

> ID：12999960
> 
> 赞同：0
> 
> 时间：2012-10-21T16:50:44.393
> 
> 标签：html, css

我总共有 7 个 div，其中 1 个指定用于中间。

它应该看起来像这样： ![表示](../Images/f2bf9d5f2053b97793fb67f12eb0b515.png)

我得到了前两张图片并且刀正确对齐，但另一张没有按照我想要的方式显示。

这是CSS：

```
.vegetablewrapper {
    width: 100%;
    overflow: hidden;
    background-color: white;
}
.vegetableleft {
    float: left;
    width: 350px;
    padding: 5px;
    margin-left: 5px
}
.vegetableright {
    float: right;
    width: 345px;
    padding: 5px;
    margin-right: 8px;
}
.vegetablemiddle {
    float: left;
    width: 200px;
    padding: 5px;
} 
```

和 HTML：

```
 <div class="vegetableleft">
        <img src="bilder/leek.jpg" alt="leek"/>
    </div>

    <div class="vegetablemiddle">
        <img src="bilder/knife.jpg" alt="knife"/>
    </div>  

    <div class="vegetableright">
        <img src="bilder/leekcut.jpg" alt="leek cut"/>
    </div>

    <div class="vegetableleft">
        <img src="bilder/onion.jpg" alt="onion"/>
    </div>

    <div class="vegetableright">
        <img src="bilder/onioncut.jpg" alt="onion cut"/>
    </div>

    <div class="vegetableleft">
        <img src="bilder/carrot.jpg" alt="carrot"/>
    </div>

    <div class="vegetableright">
        <img src="bilder/carrotcut.jpg" alt="carrot cut"/>
    </div>

</div> 
```

使用给定的代码，我的网站如下所示： ![在此处输入图像描述](../Images/02ad9e38612beb1dc9fd2b04092a6142.png)

如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T17:01:05.150

你有错误的结构。

从您的代码中，您有 7 个 div：

*   左侧 - 3
*   中间 - 1
*   对 - 3

但是你只需要3个：

*   左 - 1（向左浮动）
*   中间 - 1（向左浮动）
*   right - 1（向左或向右浮动）

这 3 个部分可以包含任意数量的没有“浮动”的图像，这将导致您的示例如下所示：

```
<div class="vegetableleft">
    <img src="bilder/leek.jpg" alt="leek"/>
    <img src="bilder/onion.jpg" alt="onion"/>
    <img src="bilder/carrot.jpg" alt="carrot"/>
</div>  

<div class="vegetablemiddle">
    <img src="bilder/knife.jpg" alt="knife"/>
</div>  

<div class="vegetableright">
    <img src="bilder/leekcut.jpg" alt="leek cut"/>
    <img src="bilder/onioncut.jpg" alt="onion cut"/>
    <img src="bilder/carrotcut.jpg" alt="carrot cut"/>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T16:54:41.080

你怎么了 ？向左浮动意味着 div 将尝试堆叠在前一个的左侧，如果它水平适合的话。请记住，元素将按照它们在 HTML 中出现的顺序堆叠。

使用您的代码：

*   leek.jpg 放在左上角
*   Knife.jpg 堆叠在韭菜的左边
*   leekcut.jpg 堆叠在刀的左侧。
*   onion.jpg 堆叠在刀的左侧（不可能，因此它会尝试下一个可用位置，即 leekcut 正下方。）从那里开始看到问题。
*   等等

可能的解决方案：

**html**

```
<div class="conainer">
  <div class="left">
      <div class="photo1"></div>
      <div class="photo1"></div>
      <div class="photo1"></div>
  </div>

  <div class="middle">
      <div class="photo2"></div>
  </div>

  <div class="right">
      <div class="photo1"></div>
      <div class="photo1"></div>
      <div class="photo1"></div>
  </div>
</div>​ 
```

**CSS**

```
.left, .right {
    width: 200px;
    float: left;
}
.middle {
    width: 100px;
    float: left;
    padding: 0px 5px 5px 5px;
}

.photo1 {
    width: 200px;
    height: 100px;
    background-color: red;
    margin: 5px;
}

.photo2 {
    width: 100px;
    height: 300px;
    background-color: yellow;
    margin: 5px;
}
​ 
```

在这里小提琴：http: [//jsfiddle.net/BfEu5/1/](http://jsfiddle.net/BfEu5/1/)

# sql - SQL Server 2012 Express 中的探查器

> ID：12999965
> 
> 赞同：12
> 
> 时间：2012-10-21T16:51:07.737
> 
> 标签：sql, sql-server, profiling

我使用 SQL Server 2012 Express。此版本没有分析器（对 db 的预览查询），它可以在非免费的 Standard 版本中访问。

你现在有任何免费工具，它有可能类似于分析器吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T17:43:14.903

可以在 SQL Server Express 上运行 SQL Trace。有关更多信息，请参阅此链接：http: [//www.codeproject.com/Tips/332293/How-to-trace-SQL-Server-Express-without-using-SQL](http://www.codeproject.com/Tips/332293/How-to-trace-SQL-Server-Express-without-using-SQL)

Profiler 是标准版。它也在开发者版中，大约 50 英镑，但你当然不能在生产中使用它。

# python - 获取键盘输入以导致 SIGUSR1/2 类似于 ctrl-C / SIGINT 来触发 signal_handler

> ID：12999970
> 
> 赞同：4
> 
> 时间：2012-10-21T16:51:32.677
> 
> 标签：python, keyboard, signals

我的 Python 2.7 脚本（在 Raspberry Pi Debian 上）通过 GPIO 端口同步运行几个步进电机。我目前有一个信号处理程序，用于 Ctrl-C 在退出前整齐地清理。我现在想扩展该方法，以便键盘输入也可以生成 SIGUSR1 或类似的异步控制机制。我知道这可以通过线程来实现，但我正在采用 KISS 方法。

塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-19T11:19:53.607

有一个监控键盘输入的父进程，如果发生，则将信号转发给子进程。

# ios - 当前位置注释默认外观？

> ID：12999972
> 
> 赞同：2
> 
> 时间：2012-10-21T16:52:00.747
> 
> 标签：ios, mapkit, mkannotation, mkannotationview

我有以下代码：

```
- (MKAnnotationView *) mapView:(MKMapView *) mapView viewForAnnotation:(id ) annotation {

    MKPinAnnotationView *customAnnotationView=[[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:nil] autorelease];

    customAnnotationView.pinColor = MKPinAnnotationColorRed;
    customAnnotationView.animatesDrop = NO;
    customAnnotationView.canShowCallout = YES;

    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton addTarget:self action:@selector(annotationViewClick:) forControlEvents:UIControlEventTouchUpInside];

    customAnnotationView.rightCalloutAccessoryView = rightButton;

    return customAnnotationView;
} 
```

此方法更改地图视图上的每个注释，包括当前位置的蓝色圆圈注释。我只想更改我的自定义注释并单独保留当前位置注释。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T16:59:09.023

如果注解是 userLocation 注解，则返回 nil

```
if(annotation == mapView.userLocation){
    return nil;
} 
```

# c++ - Microsoft 如何保护例如 Sql Server 二进制文件免受逆向工程？

> ID：12999978
> 
> 赞同：1
> 
> 时间：2012-10-21T16:52:32.083
> 
> 标签：c++, sql-server, visual-c++, sql-server-2008-r2, reverse-engineering

我对 Microsoft 如何保护 Sql Server 二进制文件免受逆向工程感兴趣？例如，我也有一些 C++ dll，我想保护它免受逆向工程的影响。将 dll 编译为机器码是合乎逻辑的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:08:52.157

没有针对逆向工程的技术防御。为了充分观察和理解其功能，始终可以在在线仿真器中运行代码。这是一项非常耗时的工作，但如果回报值得，则可以完成。1990 年代的一个著名例子是[Andrew Schulman 的工作](https://rads.stackoverflow.com/amzn/click/com/0201608340)，他发现了 Windows 95 API 的隐藏功能。

虽然这种分析没有技术障碍，但该过程的实用性肯定存在法律和实际限制。如果有足够的时间与合格的工程师合作，您可以对任何大型软件包进行完全逆向工程，包括 Microsoft Windows、Office 或 Oracle 数据库二进制文件。您对这项工作的回报将是生产未经许可的非法软件副本的能力。这将没有商业或实用价值。

用于 .NET 或 Java 应用程序的混淆实用程序解决了这些语言的一个特定问题：由于它们支持检查方法和属性名称，因此不仅可以对代码的功能进行逆向工程，还可以对原始代码中使用的公共标识符进行逆向工程。源代码。尽管 C++ 使用符号名进行链接，但它没有同样丰富的可用命名信息，因此不需要混淆。应该注意的是，即使使用公共标识符对代码进行逆向工程，同样的实际和法律限制也适用于该过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:01:13.830

混淆您的程序集将为您的 DLL 提供合理的保护。周围有许多令人困惑的软件。您可以更多地了解它们并决定哪一个最适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:02:19.007

dll是机器代码。任何东西都可以逆向工程。他们依靠两件事。所涉及的努力和混淆。

**编辑**

忘了提到，使用 MS$，您可以获得诸如升级、兼容性之类的东西（为什么您认为它们偶尔会更改 Word 文档的格式等）

# php - 如何使用 DOMElement 替换属性值

> ID：12999979
> 
> 赞同：-2
> 
> 时间：2012-10-21T16:52:34.010
> 
> 标签：php, dom

> **可能重复：**
> [使用 PHP DOMDocument 更改标签属性值](https://stackoverflow.com/questions/11387748/change-tag-attribute-value-with-php-domdocument)

如何使用 PHP DOMElement 类将 HTML 字符串的 href 值替换为新值？

使用 jQuery 我会做这样的事情

```
$('a[myattr~="myval"]').attr('href','http://www.google.se'); 
```

认为这是解释它的最简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:57:22.060

PHP 在许多非常重要的方面与 jQuery 不同，但要回答您的问题：

```
$domelement->setAttribute("href", "http://www.google.se"); 
```

您可能需要查阅[文档](http://www.php.net/manual/en/domelement.setattribute.php)。

# jquery - 将鼠标悬停在相应的 div 元素上时控制列表项

> ID：12999981
> 
> 赞同：0
> 
> 时间：2012-10-21T16:52:43.290
> 
> 标签：jquery

我在[这里](https://stackoverflow.com/questions/9245182/how-can-i-show-a-div-only-when-hovering-a-menu-item-or-the-div)使用解决方案的组合。我在悬停时为每个链接应用背景颜色。我希望每个链接在悬停在悬停时显示的相应 div 上时保持其背景颜色。除了 getValue 和 appliHover 变量之外的所有内容。我不知道我错过了什么。这是我正在使用的代码：

```
<style type="text/css">
<!--
ul.main-nav-list li { display: inline; }
ul.main-nav-list a { background: #red; }
ul.main-nav-list a.hover, ul.main-nav-list a:hover { background: #ccc }
div.mega-container { display: none; width: 600px; background: #ccc; }
-->
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>$(document).ready(function () {

       var timeout
       var counter = 1
       var widgetCounter = 1

        $('ul.main-nav-list a').each(function(){
            $(this).attr('rel', 'mega-menu');
            this.rel+= counter++
        });

        $('div.mega-container').each(function(){
            $(this).attr('id', 'mega-menu');
            this.id+= widgetCounter++
        });

        $('ul.main-nav-list a.mega-list').hover(function(){
            clearTimeout(timeout);
            $('.mega-container').hide().eq($(this).parent().index()).show();
            },
            function(){
            timeout = setTimeout(function(){
                $('.mega-container').hide();
            }, 1000);
        });

        $('div.mega-container').hover(function(){
            clearTimeout(timeout);
            $('.mega-container').hide();
            $(this).show();
            var getValue = $(this).attr('rel');
            var $appliHover = $('ul.main-nav-list a[class=' + getValue + ']');
        alert($appliHover);
            },
            function(){
            timeout = setTimeout(function(){
                $('.mega-container').hide();
            }, 1000);
        });

    });
</script>
</head>

<body>

<div id="main-nav">
 <ul class="main-nav-list">
  <li><a class="mega-list" href="mysite/index.html">Mega Nav 1</a></li>
  <li><a class="mega-list" href="mysite/index.html">Mega Nav 2</a></li>
  <li><a href="mysite/index.html">Mega Nav 3</a></li>
  <li><a href="mysite/index.html">Mega Nav 4</a></li>
  <li><a href="mysite/index.html">Mega Nav 5</a></li>
 </ul>
</div>

<div class="mega-container">
 <h1>Mega Container 1</h1>
 <ul>
<li><a href="mysite/index.html">Mega Container Nav</a></li>
<li><a href="mysite/index.html">Mega Container Nav</a></li>
 </ul>
</div>

<div class="mega-container">
 <h1>Mega Container 2</h1>
 <ul>
<li><a href="mysite/index.html">Mega Container Nav</a></li>
<li><a href="mysite/index.html">Mega Container Nav</a></li>
 </ul>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:55:07.623

我能够弄清楚这一点。这是羊驼嘴唇和乔提供[的解决方案的组合。](https://stackoverflow.com/questions/9245182/how-can-i-show-a-div-only-when-hovering-a-menu-item-or-the-div)以下是其他人可以使用的更改：

```
<script>$(document).ready(function () {

       var timeout
       var counter = 1
       var widgetCounter = 1

        $('ul.main-nav-list a').each(function(){
            $(this).attr('rel', 'mega-menu');
            this.rel+= counter++
        });

        $('div.mega-container').each(function(){
            $(this).attr('id', 'mega-menu');
            this.id+= widgetCounter++
        });

        $('ul.main-nav-list a.mega-list').hover(function(){
            clearTimeout(timeout);
            $('.mega-container').hide().eq($(this).parent().index()).show();
            if(!$(this).hasClass('hover')){
                $(this).addClass('hover');
            }
            },
            function(){
            timeout = setTimeout(function(){
                $('.mega-container').hide();
            }, 1000);
        });

        $('div.mega-container').hover(function(){
            clearTimeout(timeout);
            $('.mega-container').hide();
            $(this).show();
            },
            function(){
            timeout = setTimeout(function(){
                $('.mega-container').hide();
                $('ul.main-nav-list a.mega-list').removeClass('hover');
            }, 1000);
        });
    });
</script> 
```

# android - android安全内存限制...通过资产读取文本文件

> ID：12999984
> 
> 赞同：1
> 
> 时间：2012-10-21T16:52:48.400
> 
> 标签：android, file, memory, text, assets

我正在制作一个正在阅读和解析文本文件的应用程序。

到目前为止，它运行得很好而且很快，但我唯一的问题是我正在测试我的个人 S3，它（在我看来）有丰富的记忆。

我想知道通过缓冲区（通过资产）读取字符串会占用多少活动 RAM，以及多少被认为是低的？即使人们会使用非常旧的手机，我也想联系（也许 100mb 总内存？）

无论如何，即使手机有 100mb，我也不想占用其中的很大一部分。

这是我用来在我的文本文件中读取的示例代码..

```
 InputStream ip = getActivity().getAssets().open(s.toLowerCase() + ".txt");      
    int size = ip.available();
  byte[] buffer = new byte[size];
   ip.read(buffer);
    ip.close();
    // byte buffer into a string
    Scanner scan = new Scanner(new String(buffer)); 
```

请让我知道一个适用于旧手机的阈值。我查了一些 Java 内存管理，但我似乎无法找到 .txt --> 字符串 --> 扫描仪的确切数字

# android - 在java代码中配置TextView

> ID：12999985
> 
> 赞同：1
> 
> 时间：2012-10-21T16:53:17.073
> 
> 标签：android, android-layout, android-widget

以前，我有文件 res\layout\main.xml：

```
 <ScrollView
    android:id="@+id/SCROLLER_ID"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.98"
    android:fillViewport="true"
    android:scrollbars="vertical" >

<TextView
    android:id="@+id/showmsg"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:scrollbarStyle="insideOverlay"
    android:scrollbars="vertical"
    android:textColor="@color/textshowmsgcolor"
    android:textSize="10dp" />
</ScrollView> 
```

我需要动态创建一个TextView，所以现在我有了res\layout\main.xml：

```
 <ScrollView
    android:id="@+id/SCROLLER_ID"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.98"
    android:fillViewport="true"
    android:scrollbars="vertical" >

<LinearLayout
    android:id="@+id/linearLayout2"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
</LinearLayout>

</ScrollView> 
```

这是我的 MainActivity.java：

```
 TextView tv = new TextView(this);
    tv.setBackgroundColor(Color.parseColor("#112222"));
    tv.setId(windows.size()+100);
    tv.setTextSize(10);
    tv.setTextColor(Color.parseColor("#FFFFFF"));
    tv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    ((LinearLayout) linearLayout2).addView(tv); 
```

窗口是动态创建的。不幸的是，当窗口完全填满文本时，滚动不会移动。请告诉我如何将我的旧设置写入java代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:11:39.820

你打算让你的 LinearLayout 水平吗？您可能想使用垂直线性布局。

```
<LinearLayout
android:id="@+id/linearLayout2"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:12:13.250

```
 tv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
((LinearLayout) linearLayout2).addView(tv); 
```

它看起来像您将文本视图添加到线性布局，当它满时不会滚动。您需要将文本视图添加到滚动视图中才能滚动工作。

这是我会怎么做

```
<ScrollView
android:id="@+id/SCROLLER_ID"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight="0.98"
android:fillViewport="true"
android:scrollbars="vertical" ></ScrollView> 
```

然后在一个Java类中。

```
// First declare the scrollview
scrollview = (ScrollView) findViewById(R.id.YOURSCROLLVIEWSID);
TextView tv = new TextView(this);
// Set textsize, color, etc here.
scrollview.addView(tv); 
```

测试一下。:)

# mysql - Cronjob 数据库替换未执行

> ID：12999988
> 
> 赞同：0
> 
> 时间：2012-10-21T16:53:58.203
> 
> 标签：mysql, database, cron, crontab

我正在尝试设置 cronjob 以每隔一段时间替换演示站点上的数据库（测试 10 分钟）在 CentOS 上使用 Centmin Nginx 运行 VPS

Crontab 被创建并保存得很好，*`crontab -e`*但它没有执行。即使在 Shell 中运行 cron 命令也不会这样做。

有时我会在手动输入命令时收到此错误消息：

> “第 43 行的错误 1062 (23000)：键 'PRIMARY' 的重复条目 '3'”

这是cron：

```
*/10 * * * * mysql -uroot -pMYPASSWORD DBNAME < /home/nginx/domains/mysite.com/private/db/DBNAME.sql 
```

我通过 PhpMyAdmin 导出数据库并上传到*`/home/nginx/domains/mysite.com/private/db/`*文件夹 是否需要以某种方式保存数据库？

谢谢你的帮助。

编辑：通过mysqldump在Shell中创建数据库解决了现在它正在工作。

# c# - 拦截按键删除

> ID：12999994
> 
> 赞同：3
> 
> 时间：2012-10-21T16:54:43.983
> 
> 标签：c#, winforms, listview

我的用户组件中有一个列表视图。在 listview 属性上，LabelEdit 为 true。在listview上，我有contextmenustrip，带有快捷键Del的项目Delete。如果编辑了单元格，我如何捕捉按键Del - 删除单元格中的文本，如果不可编辑 - 删除Listview上的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T17:31:20.293

您可以从简单的绑定到`KeyDown`(or `KeyUp`) 事件开始`ListView`：

```
listView1.KeyDown += listView1_KeyDown; 
```

然后在事件中：

```
void listView1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Delete)
    {
        // Check if selected item is editable and act accordingly...

        // Bypass the control's default handling; 
        // otherwise, remove to pass the event to the default control handler.
        e.Handled = true;
    }
} 
```

# c - 读取 bmp 文件并在 C 中反转它

> ID：12999995
> 
> 赞同：2
> 
> 时间：2012-10-21T16:54:55.227
> 
> 标签：c, binaryfiles

我有一个任务是处理将 bmp 文件读入内存，反转像素，然后将反转后的图像保存到新文件中。从这个描述来看，这似乎相当容易，但我认为我的教授在解释这样做的必要步骤方面做得并不好。他教了我们关于 fread 和 fwrite 的知识，但还有更多。任何人都可以解释解决这个问题的过程（我不是在寻找一个直接的答案，只是一个解释）。

这是问题描述的链接：[https ://engineering.purdue.edu/OOSD/F2012/Exercises/ex5.html](https://engineering.purdue.edu/OOSD/F2012/Exercises/ex5.html/ "例 5")

提前感谢您的任何帮助。注意：我实际上已经研究过这个问题，但由于我对这个信息没有很好的立场，所以它不是很“点击”。

我想我现在坚持的部分是：

```
 /* The input argument is the source file pointer. The function will first construct a BMP_Image image by allocating memory to it.
 * Then the function read the header from source image to the image's header.
 * Compute data size, width, height, and bytes_per_pixel of the image and stores them as image's attributes.
 * Finally, allocate menory for image's data according to the image size.
 * Return image;
*/
BMP_Image* CreateBMPImage(FILE* fptr)
{

  //Allocate memory for BMP_Image*;

  //Read the first 54 bytes of the source into the header

  //Compute data size, width, height, and bytes per pixel;

  //Allocate memory for image data
} 
```

BMP_Image 结构如下所示：

```
typedef struct {
    BMP_Header header;
    int data_size;
    int width;
    int height;
    int bytes_per_pixel; // This amount should be equals to number of bits/8
    char *data;
} BMP_Image; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:27:15.847

阅读 BMP 文件格式 (http://en.wikipedia.org/wiki/BMP_file_format)，特别是像素存储详细信息。它们存储在行中。以字节为单位读取它们并使用位运算符，可能是 uint8_t :) 因为它是一个赋值，所以您应该自己编写代码。至少尝试一下。

# java - 您的 Application 类如何知道应用程序何时完成？

> ID：12999996
> 
> 赞同：1
> 
> 时间：2012-10-21T16:54:57.580
> 
> 标签：java, android

我有一个数据库单例，我想在应用程序完成时调用 .close() 。

我可以在 Application 类的 onCreate() 中调用数据库上的 .open()，但是在哪里调用 .close()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:24:24.560

是的，我所做的是寻找前台活动。在每个前台活动结束后，我可以递减。一旦我达到零并在那里停留一段合理的时间，我知道我可以安全地关闭这些资源。最终以这种方式在我的应用程序中进行了虚拟生命周期回调。因此，无论您有多少任务或事情从哪里开始，这种方式都有效。如果你只能从一个地方运行和启动你的应用程序并且一切都只以单一的线性方式进行，那么是的，根活动方法也可以。

具体像这样：

**基本活动**

```
public class BaseActivity extends Activity {

   public void onResume() {
      MyBaseApplicationType app = (MyBaseApplicationType)getApplicationContext();
      app.incrementForegroundActivity();
   }

   public void onPause() {
      MyBaseApplicationType app = (MyBaseApplicationType)getApplicationContext();
      app.decrementForegroundActivity();
   }

} 
```

**MyBaseApplication**

```
public class MyBaseApplication extends Application {

   private int mForegroundActivities;
   private Handler mHandler;

   public void onCreate() {
      mHandler = new Handler();
   }

   public void decrementForegroundActivity() {
      mForegroundActivities--;
      if (mForegroundActivities == 0) {
         mHandler.postDelayed(mRunnable, 1000 /*about a second*/);
      }
   }

   public void incrementForegroundActivities() {
      mForegroundActivities++;
   }

   private Runnable mRunnable = new Runnable() {
      public void run() {
         if (mForegroundActivities == 0) {
            // Listeners of this broadcast can then clean up anything
            // as needed.
            Intent intent = new Intent("com.my.package.ACTION_BACKGROUNDED");
            sendBroadcast(intent);
         }
      }
   };

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:25:55.290

通常，您应该在`onDestroy()`或中关闭数据库连接`onStop()`。`onDestroy()`在活动从内存中删除并销毁之前调用。`onStop()`当您转到不同的应用程序时调用。任何一个都可以，但`onDestroy()`通常会更好，因为`onStop()`会减慢应用程序的切换速度。

更多信息：http: [//developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

# c# - 逐行加密/解密文件？

> ID：12999999
> 
> 赞同：4
> 
> 时间：2012-10-21T16:55:28.837
> 
> 标签：c#, encryption, rijndaelmanaged

我对加密相当陌生，我正在尝试让逐行加密器工作；在应用程序运行期间，我需要能够将加密的行附加到文件中，而不仅仅是一个大型的加密所有内容并保存。不过，我玩得很开心。这是我的加密器，在我自己的几次失败尝试后无耻地被盗：

```
 class Encryption
    {
        private static readonly byte[] SALT = new byte[] { 0x26, 0xdc, 0xff, 0x00, 0xad, 0xed, 0x7a, 0xee, 0xc5, 0xfe, 0x07, 0xaf, 0x4d, 0x08, 0x22, 0x3c };

        public static byte[] Encrypt(byte[] plain, string password)
        {
            MemoryStream memoryStream;
            CryptoStream cryptoStream;
            Rijndael rijndael = Rijndael.Create();
            Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, SALT);
            rijndael.Key = pdb.GetBytes(32);
            rijndael.IV = pdb.GetBytes(16);
            memoryStream = new MemoryStream();
            cryptoStream = new CryptoStream(memoryStream, rijndael.CreateEncryptor(), CryptoStreamMode.Write);
            cryptoStream.Write(plain, 0, plain.Length);
            cryptoStream.FlushFinalBlock();
            cryptoStream.Close();
            return memoryStream.ToArray();
        }

        public static byte[] Decrypt(byte[] cipher, string password)
        {
            MemoryStream memoryStream;
            CryptoStream cryptoStream;
            Rijndael rijndael = Rijndael.Create();
            Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, SALT);
            rijndael.Key = pdb.GetBytes(32);
            rijndael.IV = pdb.GetBytes(16);
            memoryStream = new MemoryStream();
            cryptoStream = new CryptoStream(memoryStream, rijndael.CreateDecryptor(), CryptoStreamMode.Write);
            cryptoStream.Write(cipher, 0, cipher.Length);
            cryptoStream.FlushFinalBlock();
            cryptoStream.Close();
            return memoryStream.ToArray();
        }
    } 
```

这是一个虚拟函数，显示了我如何尝试它：

```
       private void EncryptFile(string filepath, string outputPath, string password)
        {
            FileInfo fileInfo = new FileInfo(filepath);
            字符串文件名 = fileInfo.Name;

            字符串完整路径 = 输出路径 + "\\" + 文件名；

            BinaryWriter writer = new BinaryWriter(File.OpenWrite(fullpath), Encoding.ASCII);

            /// 我在这里尝试过的两种方法：
            /// 1.所需的方法：逐行加密 - 我假设我能够生成
            /// 多个数据块，稍后解密。这不起作用

            //string[] 行 = File.ReadAllLines(filepath);

            /// 2\. 只需阅读整个内容，然后一举加密并写入。

            字符串行 = File.ReadAllText(filepath);

            //foreach（行中的字符串行）
            {
                byte[] bytes = Encoding.ASCII.GetBytes(line);
                byte[] 编码 = Encryption.Encrypt(bytes, password);

                writer.Write（编码）；
                writer.Flush();
            }

            writer.Close();
        }

        private void DecryptFile(string filepath, string outputPath, string password)
        {
            FileInfo fileInfo = new FileInfo(filepath);
            字符串文件名 = fileInfo.Name;
            字符串完整路径 = 输出路径 + "\\" + 文件名；

            StreamWriter writer = new StreamWriter(fullpath, false, Encoding.UTF8);

            byte[] bytes = File.ReadAllBytes(filepath);

            /// 这是目前解密的方法；只是
            /// 抓取所有数据并一举解密。

            byte[] 解密 = Encryption.Decrypt(bytes, password);

            string s = Encoding.ASCII.GetString(decrypted);

            writer.Write(s);
            writer.Flush();

            /// 我在这里尝试了很多东西来逐行解密，
            /// 这些都不起作用。这会因有关填充的问题而崩溃
            /// 无效。  

            /*
            整数索引 = 0；
            整数计数 = 32；

            而（索引
```

我不完全确定我应该做什么了。我一直在四处寻找东西并阅读在线示例，但它们似乎都是如何加密整个文件或只是加密一段数据并且除了立即再次解密之外什么都不做。我应该如何处理逐行写作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:05:59.993

我不会为你编程，而是给你一个你可以实现的方案。

如果您有每行加密，我想您也希望能够解密每行。请注意，“线”对于计算机来说是一个相当不方便的术语。它只是一堆以某种行终止符结尾的字符。字符本身使用特定的[字符编码进行编码](/questions/tagged/character-encoding "显示标记为“字符编码”的问题")。

此外，我将做出以下假设：

*   加密文本应以行显示，这意味着字节需要从二进制转换为字符（使用[编码](/questions/tagged/encoding "显示标记为“编码”的问题")）；
*   您希望使用单个密钥，同时保持安全；
*   您不需要密文的完整性保护或身份验证，只需要机密性。

现在这个想法很简单：

1.  使用基于密码的密钥派生函数创建单个密钥；
2.  打开文本文件进行阅读（使用正确的[字符编码](/questions/tagged/character-encoding "显示标记为“字符编码”的问题")）；
3.  读取一行并将该行再次转换为字节（例如使用 UTF-8）；
4.  创建一个输出流，在下面创建一个字节数组；
5.  创建一个随机 IV 并将其写入字节数组（IV 始终是单个块大小）；
6.  创建一个加密流并将其连接到相同的输出流；
7.  加密编码线；
8.  base 64 对加密字节进行编码，并确保它保持在一行中；
9.  将编码的加密行写入新的文本文件。

相反，逆向过程，尽管 IV 应该从 base 64 解码后的字节中检索，并且密钥当然应该使用与加密期间使用的相同方法来计算。