# StackOverflow 问答 13229000-13229999

# sql-server-2008 - 使用 ADO 将 VBA 连接到 SQL 服务器 - 对象已关闭

> ID：13229003
> 
> 赞同：3
> 
> 时间：2012-11-05T09:13:05.113
> 
> 标签：sql-server-2008, excel, vba

我已经创建了对象，我可以从中得知我刚刚对它进行了查询，谁能告诉我我的错误在哪里？

错误声明是

```
“Run time error ‘3704’ operation is not allowed when the object is closed” 
```

它发生在这条线上

```
ActiveWorkbook.Worksheets("SQL").Range("A1").CopyFromRecordset rspubs 
```

我的代码是

```
Sub sqlTest()

Dim Sqlquery As String
Dim cnpubs As ADODB.Connection
Dim rspubs As ADODB.Recordset

' Create a connection object.
Set cnpubs = New ADODB.Connection
' Create a recordset object.
Set rspubs = New ADODB.Recordset
' Provide the connection string.
Dim strConn As String

'Construct query
Sqlquery = " sql query;”

'Use the SQL Server OLE DB Provider.

strConn = "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=True;Data Source=XXXX;Use Procedure for Prepare=1;Auto Translate=True;Packet Size=4096;Workstation ID=XXXX;Use Encryption for Data=False;Tag with column collation when possible=False;Initial Catalog=Prospects" 

'Now open the connection.
cnpubs.Open strConn

With rspubs
' Assign the Connection object.
.ActiveConnection = cnpubs
' Extract the required records.
'.Source = Sqlquery
.Open Sqlquery
' Copy the records into cell A1 on Required Sheet
ActiveWorkbook.Worksheets("SQL").Range("A1").CopyFromRecordset rspubs
End With

' Tidy Up
cnpubs.Close
rspubs.Close

Set cnpubs = Nothing

Set rspubs = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:45:33.220

您需要指定要运行的查询。Sqlquery 所拥有的只是“sql query;” 不返回记录集。尝试将字符串更改`Select 1 as testvalue`为测试某些内容。

# c++ - 如何使用合并来合并两个地图/多地图（C++ 11 STL）

> ID：13229008
> 
> 赞同：2
> 
> 时间：2012-11-05T09:13:32.500
> 
> 标签：c++, stl, merge, multimap

我的项目处理将现有算法并行化的分而治之策略。该算法返回一个`std::multimap<int, std::pair<int, int>>`. 以上是初步（单线程）版本的草图。

```
typedef std::multimap<int, std::pair<int, int>> Map ;
struct Box
{
  std::pair<int, int> top_left, bottom_right ;
}
Map my_algo(Box, a_box)
{
  Map final_m ;
  if (not is_small(a_box))
  {
    box b1, b2 ;
    split_box(a_box, &b1, &b2) ; // this function divides the box in two halves
    Map m1 = my_algo(b1) ;
    Map m2 = my_algo(b2) ;

    // this line will not compile. final_m.begin() is not accepted.
    std::merge (m1.begin(), m1.end(), m2.begin(), m2.end(), final_m.begin()) ; 
  }
 return final_m ;
} 
```

我知道我可以使用 insert 或 merge 来进行合并（如此[处](https://stackoverflow.com/questions/3639741/merge-stl-maps)所述）。但是插入在 O(N.Log(n)) 中，而合并在 O((N)) 中。由于算法中涉及的合并操作的数量，时间复杂度很重要。

感谢您的帮助，奥利维尔

编辑：

感谢 jogojapan（请参阅下面的答案），这是更正代码的工作演示：

```
#include <iostream>
#include <map>
#include <iterator>
#include <algorithm>

typedef std::pair<int, int> Cell ;
typedef std::multimap<int, Cell> Border_map ;

void test_merge_maps_1()
{
Border_map a, b, c ;
std::cout << std::endl << "a" << std::endl ;
for (int i=1; i<10; i+=2)
{
    a.insert(std::pair<int, Cell>(i, Cell(i,i))) ;
    std::cout << i << " " ;
}

std::cout << std::endl << "b" << std::endl ;
for (int i=2; i<11; i+=2)
{
    b.insert(std::pair<int, Cell>(i, Cell(i,i))) ;
    std::cout << i << " " ;
}

std::cout << std::endl << "merge" << std::endl ;
std::merge(a.begin(), a.end(), b.begin(), b.end(), inserter(c,end(c))) ;

std::cout << "result" << std::endl ;
for(auto x: c)
    std::cout << x.first << " " ;
std::cout << std::endl ;
}

int main(void)
{
    test_merge_maps_1() ;
    return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T09:25:04.147

是的，`multimap<T>::begin()`返回一个普通（双向）迭代器，但您需要一个能够进行插入的迭代器。您可以使用标题中的`std::inserter`模板获取一个：`iterator`

```
#include <iterator>

/* ... */

std::merge(begin(m1),end(m1),begin(m2),end(m2),inserter(final_m,end(final_m))); 
```

如您所见，`std::inserter`它有两个参数：您需要一个用于 (ie `final_m`) 的插入迭代器的容器，以及一个用于同一容器的普通迭代器，它用作插入的起点。由于合并操作的性质，为插入指定的起点应该是正在创建的多映射的*结尾。*因此，我使用`end(final_m)`（与 相同`final_m.end()`）作为第二个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-11T11:58:54.667

**C++[插入](http://en.cppreference.com/w/cpp/container/map/insert)**

```
#include <map>
#include <string>

using std::map;
using std::string;

map< string, string > lhs;
map< string, string > rhs;

lhs.insert( rhs.begin( ), rhs.end( ) ); 
```

**C++17[合并](http://en.cppreference.com/w/cpp/container/map/merge)**

```
#include <map>
#include <string>

using std::map;
using std::string;

map< string, string > lhs;
map< string, string > rhs;

lhs.merge( rhs ); 
```

# c# - 如何一起使用 httpRequest 和 HtmlAgilityPack？

> ID：13229010
> 
> 赞同：1
> 
> 时间：2012-11-05T09:13:35.760
> 
> 标签：c#, vb.net, login, html-agility-pack

所以我试图登录一个页面并从该页面中获取一些数据，但我的问题是填写这些登录信息。

**我尝试了什么？**在 url 中发布数据。通过简单地添加 postname en 值，如下所示：`http://stackoverflow.com?postLogin=myUsername&postPassword=myPassword`。我用这个网址发送了一个请求。它给了我一个错误。我在浏览器上查看了网址。似乎它确实填写了用户名，但没有填写密码文本框（我写了正确的邮件名）。

我还看到有人建议使用 HtmlAgilityPack 填写数据（标记为答案）。但经过更多搜索后，似乎无法单独使用 HtmlAgilityPack。HtmlAgilityPack 非常适合解析 html 而不是填充它。所以我得出一个结论，我可能必须使用 httpRequest 和 HtmlAgilityPack 的组合。

我可能是错的，所以如果你有更好的建议可以帮助我自由地指出正确的方向。

但如果我想这样做，我不知道如何一起使用它们。我首先将我的 webrequest 发送到登录页面以获取 htmlpage。我从我的 httpWebRequest 获得响应，但是如何让我的 Webbrowser 类解析该响应，然后让我的 webrequest 使用用户名、密码发送帖子数据，当然尝试提交它？

如果你想用 c# 给出答案，我想我可以自己阅读和翻译。

编辑：我刚刚使用了提琴手并收到了 8 个正在发送的帖子。这是否意味着我已经将所有 8 个都发送到了 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:31:45.657

无需使用 WebBrowser 来解析 HTML。您可以在 HTML 中以字符串形式查找所需的信息，也可以使用[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)之类的库进行解析。

此外，您会发现[http://www.fiddler2.com/](http://www.fiddler2.com/)对于确定浏览器向网页发送的确切信息非常有用，因此您可以使用 HttpWebRequest（标头、GET/POST 值等）重现该行为。

您也可以尝试[http://www.chadsowald.com/software/fiddler-extension-request-to-code](http://www.chadsowald.com/software/fiddler-extension-request-to-code) - Fiddler 的扩展，它会自动生成模仿浏览器请求的 .NET 代码。

# javascript - 如何在 CakePHP 中实现 JavaScript onmouseover？

> ID：13229011
> 
> 赞同：0
> 
> 时间：2012-11-05T09:13:41.970
> 
> 标签：javascript, php, cakephp, dom-events, cakephp-2.1

我想要做的是将以下内容转换为与 CakePHP 一起使用：

```
<a href="URL ADDRESS"><img src="URL OF THE FIRST IMAGE GOES HERE" onmouseover="this.src='URL OF THE SECOND IMAGE GOES HERE'" onmouseout="this.src='URL OF THE FIRST IMAGE GOES HERE'" /></a> 
```

到目前为止，我有以下内容：

```
<?php echo $this->Html->image("animalhealth.png", array(
    "alt" => "Animal Health",
    "onmouseover" => "this.src='animalhealthhover.png'",
    "onmouseout" => "this.src='animalhealth.png'",
    'url' => array('controller' => 'records', 'action' => 'index'
    )
)); ?> 
```

问题是`onmouseover`&`onmouseout`事件行。我需要告诉 cake 以某种方式使用辅助方法，否则它只会选择没有图像。我不想输入整个地址，因为它是一个导航菜单，并且在不同位置会有多个应用程序实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:02:54.737

我已经设法使用 CSS 构建了一个工作。

为按钮图标制作了自定义图像。

这是视图/布局页面中的内容：

```
<ul class="menu">
<li>
                        <div id="button_name"><?php
                    echo $this->Html->image("name_of_img.png", array(
                        "alt" => "Animal Health",
                        'url' => array('controller' => 'controllerName', 'action' => 'index')));
                    ?>
<?php echo $this->Html->link(__('Link Text'), array('controller' => 'controllerName', 'action' => 'index')); ?> 
                        </div>
                    </li> 
</ul> 
```

如果你不使用 cakePHP，你可以在普通的 HTML 页面中这样做：

```
<ul class="menu">
<li>
                        <div id="button_name"><a href="/path/to/page.html"><img src="/path/to/img/imagename.png" alt="Animal Health" /></a><a href="/path/to/page.html">Animal Health</a> 
                        </div>
                    </li>
<ul> 
```

这使得文本和图标都可以点击。

然后是CSS：

```
.menu li {padding:0px; border: 0px; margin: 0px; list-style: none;
          float: left; margin-left: 0px; display: block; height: 36px;} //remove any stlying and set up for the menu.

#button_name{background-color: darkorange;
               float: left;
              margin-right: 5px;
               margin-top: 1px;
               margin-bottom: 0px;
               padding: 1px 3px 1px 3px;
               -webkit-border-radius: 5px 5px 0px 0px;
               border-radius: 5px 5px 0px 0px;
               border: 1px black;
               text-align: right;
               color: #6495ED;
               font-weight: bold;
               -webkit-transition: all 1000ms;
               -moz-transition: all 1000ms;
               -o-transition: all 1000ms;
               -ms-transition: all 1000ms;
               transition: all 1000ms;}
#button_name a {
    -webkit-transition: all 1000ms;
    -moz-transition: all 1000ms;
    -o-transition: all 1000ms;
    -ms-transition: all 1000ms;
    transition: all 1000ms;
    font-weight: bold;
    color: #6495ED; 
}
    #button_name:hover
 {background-color: #6495ED;}
    #button_name:hover a // VERY IMPORTANT see note
{
        font-weight: bold;
        color: darkorange;} 
```

这是一个带有 2 个圆角顶角的漂亮按钮。当您将鼠标悬停在按钮上时，背景和文本颜色会相互转换。即：文本从蓝色变为橙色，背景从橙色变为蓝色。

关于#button_name:hover a 的注意事项：如果将其设置为“button_name a:hover”，则必须按指定设置它，文本将保持与背景相同的颜色。

希望这会对其他人有所帮助。

仍然渴望听到有关使用 JS 进行此操作的任何想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:17:46.890

这篇文章可能会帮助您解决问题。

[在 CakePHP 中添加“onmouseover”事件时，如何防止 $html-link() 删除单引号？](https://stackoverflow.com/questions/815721/html-link-using-onmouseover)

例子 ：

echo $html->link("Dashboard", "/dashboard/index", array("onmouseover" => "Tip('Test');"), array('escape' => false));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:04:02.653

```
echo $html->link($this->Html->image("animalhealth.png", array("alt" => "Animal Health")), array('controller' => 'records', 'action' => 'index'),array("onmouseover" => "Tip('Test');"), null, false); 
```

您可以指定带有图像的链接并使用该链接提供 onmouseover

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-18T13:30:05.497

Html->image('edit.png',['url'=> ['action' => 'edit', $playerEventRegistration->id]],array("onmouseover" => "Tip('Test'); ") ?>

# xml - 使用 JAXB 使用 XmlElement 和 XmlAttributes 解析和 XML

> ID：13229013
> 
> 赞同：3
> 
> 时间：2012-11-05T09:13:49.260
> 
> 标签：xml, jaxb, xml-attribute

我无法使用 JAXB 解组以下 xml。请帮我解决这个问题。

我的 xml 看起来像这样：

```
 <powerchanges>
     <initialState creationTime="14.08.2012 16:24:01" status="poweredOff" /> 
     <powerchange changeTime="14.08.2012 16:24:49" status="Powered On" /> 
     <powerchange changeTime="27.09.2012 02:17:23" status="Powered Off" /> 
     <powerchange changeTime="27.09.2012 02:51:13" status="Powered On" /> 
     <powerchange changeTime="29.09.2012 05:06:48" status="Powered Off" /> 
     <powerchange changeTime="29.09.2012 07:40:24" status="Powered On" />   
   </powerchanges> 
```

我正在尝试使用 JAXB 解组上述 xml。下面是我的java类：

PowerChanges.java

```
@XmlRootElement(name="powerchanges")
public class PowerChanges {
@XmlElement(name = "initialState")
private InitialState initialState;

@XmlElement(name = "powerchange")
private ArrayList<PowerChange> powerChangeList;

public InitialState getInitialState() {
    return initialState;
}
public void setInitialState(InitialState initialState) {
    this.initialState = initialState;
}

public ArrayList<PowerChange> getPowerChangeList() {
    return powerChangeList;
}
public void setPowerChangeList(ArrayList<PowerChange> powerChangeList) {
    this.powerChangeList = powerChangeList;
} 
```

}

PowerChange.java：

```
public class PowerChange {

  private String changeTime;
  private String status;

  @XmlAttribute
public String getChangeTime() {
    return changeTime;
}
public void setChangeTime(String changeTime) {
this.changeTime = changeTime;
}
@XmlAttribute
public String getStatus() {
return status;
}
public void setStatus(String status) {
    this.status = status;
}

} 
```

初始状态.java

```
public class InitialState {

  private String creationTime;
  private String status;

  @XmlAttribute
public String getCreationTime() {
    return creationTime;
}
public void setCreationTime(String creationTime) {
    this.creationTime = creationTime;
}
@XmlAttribute
public String getStatus() {
    return status;
}
public void setStatus(String status) {
    this.status = status;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:59:43.367

默认情况下[**，JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现在属性（get/set 方法）上查找元数据。由于您已经注释了`PowerChanges`类上的字段，因此您需要使用`@XmlAccessorType(XmlAccessType.FIELD)`. 我对您的课程进行了此更改，`PowerChanges`并且能够完美地从您的帖子中读取 XML。

**解决方案 - 更改`PowerChanges`为使用字段访问**

```
import java.util.ArrayList;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "powerchanges")
@XmlAccessorType(XmlAccessType.FIELD)
public class PowerChanges {
    @XmlElement(name = "initialState")
    private InitialState initialState;

    @XmlElement(name = "powerchange")
    private ArrayList<PowerChange> powerChangeList;

    public InitialState getInitialState() {
        return initialState;
    }

    public void setInitialState(InitialState initialState) {
        this.initialState = initialState;
    }

    public ArrayList<PowerChange> getPowerChangeList() {
        return powerChangeList;
    }

    public void setPowerChangeList(ArrayList<PowerChange> powerChangeList) {
        this.powerChangeList = powerChangeList;
    }
} 
```

**替代解决方案 - 注释属性`PowerChanges`**

或者，您可以将注释移至`get`方法。

```
import java.util.ArrayList;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "powerchanges")
public class PowerChanges {
    private InitialState initialState;

    private ArrayList<PowerChange> powerChangeList;

    @XmlElement(name = "initialState")
    public InitialState getInitialState() {
        return initialState;
    }

    public void setInitialState(InitialState initialState) {
        this.initialState = initialState;
    }

    @XmlElement(name = "powerchange")
    public ArrayList<PowerChange> getPowerChangeList() {
        return powerChangeList;
    }

    public void setPowerChangeList(ArrayList<PowerChange> powerChangeList) {
        this.powerChangeList = powerChangeList;
    }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

您当前的模型可能会遇到如下异常。将来发布您看到的任何异常消息将帮助人们为您提供更好的答案。

```
Exception in thread "main" com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
Class has two properties of the same name "initialState"
    this problem is related to the following location:
        at public forum13229013.InitialState forum13229013.PowerChanges.getInitialState()
        at forum13229013.PowerChanges
    this problem is related to the following location:
        at private forum13229013.InitialState forum13229013.PowerChanges.initialState
        at forum13229013.PowerChanges
Class has two properties of the same name "powerChangeList"
    this problem is related to the following location:
        at public java.util.ArrayList forum13229013.PowerChanges.getPowerChangeList()
        at forum13229013.PowerChanges
    this problem is related to the following location:
        at private java.util.ArrayList forum13229013.PowerChanges.powerChangeList
        at forum13229013.PowerChanges

    at com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:91)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:451)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:283)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:126)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1148)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:248)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:235)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:445)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:637)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)
    at forum13229013.Demo.main(Demo.java:12) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T14:02:13.927

您还可以设置`XmlAccessType.NONE`和注释要序列化的每个属性，编组器仅考虑那些已注释的属性。

该属性`powerChangeList`应在 getter 或声明中进行注释。每个元素也应该用自己的注释`@XmlRootElement(name="element")`。

# asp.net - 需要正则表达式来防止 '<' 字符和 '&#' 组合

> ID：13229014
> 
> 赞同：-2
> 
> 时间：2012-11-05T09:13:56.917
> 
> 标签：asp.net, regex, validation

我需要一个正则表达式模式来防止以下字符。输入字符串没有任何 '<' 字符和 '&#' 组合。请提供正则表达式来限制上述字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:25:29.847

您可以为此使用[否定的前瞻断言](http://www.regular-expressions.info/lookaround.html)：

```
^(?!.*(?:<|&#)) 
```

当它在输入字符串中找到“<”或“&#”时，此正则表达式将失败。

`^`一个[锚点](http://www.regular-expressions.info/anchors.html)，匹配字符串的开头

`(?!...)`负[前瞻](http://www.regular-expressions.info/lookaround.html)

`(?:...)`非[捕获组](http://www.regular-expressions.info/brackets.html)

`<|&#`[交替](http://www.regular-expressions.info/alternation.html),匹配`<`或`&#`

**注意：**如果输入字符串包含换行符，这将失败，因为`.`默认情况下不匹配它们。

如果这是一个问题，请更改点的匹配行为：

```
^(?s)(?!.*(?:<|&#)) 
```

`(?s)`inline[修饰符](http://www.regular-expressions.info/modifiers.html)，用于`.`匹配换行符。

# android - android - 操作栏不可见

> ID：13229025
> 
> 赞同：0
> 
> 时间：2012-11-05T09:14:49.800
> 
> 标签：android, android-actionbar

我想将操作栏添加到具有此主题的应用程序（@android:style/Theme.Black.NoTitleBar）。如果您按住最近的应用程序按钮，这些菜单项在手机中可见，但如果是平板电脑则无法正常工作。我试过但我没有。请任何人都可以帮助我。

```
code

/**
 * The purpose of this Activity is to manage the activities in a tab.
 * Note: Child Activities can handle Key Presses before they are seen here.
 * @author Eric Harlow
 */
public class TabGroupActivity extends ActivityGroup {

   ..................
   ..............

  public boolean onCreateOptionsMenu(Menu menu){
    // TODO Auto-generated method stub      
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.app_menu, menu);
    return true;
}

  public boolean onOptionsItemSelected(MenuItem item){      
    // TODO Auto-generated method stub
    switch (item.getItemId()) {             
        case R.id.AppExit:  
            showDialog(DIALOG_exitbtnalert);
            break; 
        case R.id.AppLogout:    
            showDialog(DIALOG_logoutbtnalert);
            break; 
    }
    return super.onOptionsItemSelected(item);
} 

  //Alert dialog for Exit and Logout
  protected Dialog onCreateDialog(int id) 
  {
      switch (id)
  { 
  case DIALOG_exitbtnalert:
      return new AlertDialog.Builder(getParent())            
      .setTitle("MyMedPix247 Alert")
      .setMessage("Are you sure you want to Exit from the App?")
      .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton)
          {
              DH_Constant.blnAppExit = true;
              finish();
          }
      })
      .setNegativeButton("No", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton)
          {               
              dialog.dismiss();
          }
      })
      .create(); 

  case DIALOG_logoutbtnalert:
      return new AlertDialog.Builder(getParent())            
      .setTitle("MyMedPix247 Alert")
      .setMessage("Are you sure you want to Logout?")
      .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton)
          {
              DH_Constant.blnApplogout = true;
              finish();
          }
      })
      .setNegativeButton("No", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) 
          {               
              dialog.dismiss();
          }
      })
      .create();                      
  }
  return null;
  }
 ................
 .................
} 
```

**显现**

```
< ?xml version="1.0" encoding="utf-8"?>
< manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.ibkr.dicomhub"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="11"/>

<application 
    android:icon="@drawable/dhapp_icon" 
    android:label="@string/app_name"
    android:debuggable="true"
    android:name="MyApplication"
    android:theme="@android:style/Theme.Black.NoTitleBar">
    <activity android:name=".DH_Home" android:windowSoftInputMode="stateHidden"
              android:label="@string/app_name" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>        
</application>
< /manifest> 
```

**菜单**

```
 < ?xml version="1.0" encoding="utf-8"?>
    < menu  xmlns:android="http://schemas.android.com/apk/res/android">

  < item android:id="@+id/AppExit"
    android:title="Exit"  
    android:showAsAction="ifRoom|withText"
    android:icon="@drawable/exit_icon" />

  < item android:id="@+id/AppLogout"
    android:title="Logout"
    android:showAsAction="ifRoom|withText"
    android:icon="@drawable/logout_icon" />
< /menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:48:25.550

> 我想将操作栏添加到具有此主题的应用程序（@android:style/Theme.Black.NoTitleBar）。

根据定义，这是不可能的。请切换到`Theme.Black`而不是`Theme.Black.NoTitleBar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T12:24:42.980

操作栏仅适用于 .holo 主题。所以考虑使用@android:style/Theme.Holo.Light.DarkActionBar

# wordpress - Card66 插件：添加产品时，ShortCode 对话框为空白

> ID：13229026
> 
> 赞同：0
> 
> 时间：2012-11-05T09:14:53.113
> 
> 标签：wordpress

我正在使用 Cart66 Lite 版本 1.5.0.2，wordpress 3.4.2。当我尝试添加新产品时，我想在我的编辑器中插入一个短代码。我单击顶部编辑器上的 Cart66 短代码链接。显示空白对话框，没有配置。

以下文章中的相同问题：http: [//docs.cart66.com/knowledgebase/custom-post-types/](http://docs.cart66.com/knowledgebase/custom-post-types/)

但在我的情况下，我不使用 Post Type 插件。

谁能帮助我？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:45:00.250

我有自己的答案。Post Type 插件目前存在于 Wordpress 3.0 中。所以，参考文章是正确的。但是，在这种情况下， add_filter() 是未知的。要修复它，我们应该在 wp-setting.xml 中将 required /plugin.php 移到 required /function.php 之前。

# php - 通过 PHP 文件测试服务器的 sqlite 的最快方法是什么？

> ID：13229031
> 
> 赞同：4
> 
> 时间：2012-11-05T09:15:12.910
> 
> 标签：php, sqlite

我不确定我的服务器上是否有 sqlite，所以我想使用 PDO 对象来测试并查看服务器是否支持 sqlite。我试过：

```
<?php
echo `sqlite3 -v`; 
```

收到以下错误：`Warning: shell_exec() has been disabled for security reasons`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T09:19:14.997

您可以只使用[function_exists()](http://php.net/manual/en/function.function-exists.php)来检查 sqlite 函数是否存在，如下所示：

```
if (function_exists('sqlite_open')) {
   echo 'Sqlite PHP extension loaded';
} 
```

因为`SQLite3`前者不起作用，所以请改用它^(（由 Prid 的评论提供）)：

```
if (class_exists('SQLite3')) {
   echo 'SQLite3 extension loaded';
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-09T19:05:28.487

或者您可以简单地使用：

```
if (extension_loaded('sqlite3')) {
    // Do things
} 
```

[http://php.net/manual/en/function.extension-loaded.php](http://php.net/manual/en/function.extension-loaded.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:17:01.413

如果您想直接运行 shell-commands，您需要在其中查找`php.ini`
shell_exec **。**

可能低于

```
disable_functions = ..., shell_exec, ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-24T19:29:52.630

您的提供商是否支持 sqlite3，那么您可以通过以下方式对其进行测试：

```
<?php

print_r(SQLite3::version());

?> 
```

另请参阅手册：[https ://www.php.net/manual/en/book.sqlite3.php](https://www.php.net/manual/en/book.sqlite3.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:16:19.150

我实际上已经找到了一种测试方法，现在：

```
<?php
echo sqlite_libversion();
echo "<br>";
echo phpversion(); 
```

返回如下内容：

```
2.8.17
5.2.17 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-17T02:21:33.640

对于**PHP 5.4.0 及更高版本**，接受的答案将不起作用，因为旧的 SQLite 扩展[已被删除](https://stackoverflow.com/a/10620674/3705191)。

试试这个作为替代方案：

```
if (class_exists('SQLite3')) {
   echo 'Sqlite PHP extension loaded';
} 
```

或使用[extension_loaded('sqlite3')](https://stackoverflow.com/a/28949863/3705191)代替。

# c# - 如何通过禁用父窗口上的关闭按钮来在子窗口出现时禁用父窗口

> ID：13229032
> 
> 赞同：0
> 
> 时间：2012-11-05T09:15:19.053
> 
> 标签：c#, wpf

我在 C#(wpf) 中设计了一个窗口，其中三个按钮分别是“文件上传”、“新建”和“关于”。当用户单击“文件上传”按钮时，会出现一个新窗口，其中提供有关应用程序的信息。但是此时我希望禁用我的父窗口关闭按钮，以便当用户尝试在父窗口上执行任何操作时，它不应该允许，直到“上传”过程完成。上传过程完成后，关闭按钮将正常启用。在上传过程中，按钮必须禁用吗？

如果有人知道如何做到这一点，请告诉我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:27:24.583

通过使用该方法以模态方式显示您的上传窗口[`ShowDialog()`](http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog.aspx)。这将有效地使您的主窗口不可用。

# java - 奇怪的java异常

> ID：13229040
> 
> 赞同：0
> 
> 时间：2012-11-05T09:16:05.323
> 
> 标签：java

我曾尝试将此类作为 java 应用程序执行，但出现以下错误。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (classFileParser.cpp:3494), pid=4804, tid=5860
#  Error: ShouldNotReachHere()
#
# JRE version: 6.0_35-b10
# Java VM: Java HotSpot(TM) Client VM (20.10-b01 mixed mode windows-x86 )
# An error report file with more information is saved as:
# D:\HussainEclipse\GT_GoogleAPI_Android_Sept28\hs_err_pid4804.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# 
```

[你可以在这里](http://www.sourcepod.com/tbbyzi61-11821)找到我的课程文件

任何建议，出了什么问题，

我还没有写过这门课，只是试图理解，它应该会给我带来一些想要的输出

同样在结束时，这个类正在导入 edu.uci.ics.crawler4j.crawler.Configurations 但我找不到任何 jar，但我找到了一个类定义，所以我在我的项目中创建了这个类，可以在[这里找到](http://www.massapi.com/source/crawler4j-read-only/crawler4j/src/edu/uci/ics/crawler4j/crawler/Configurations.java.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:21:22.603

这似乎是一个JVM错误

看一下： [Java运行时环境检测到致命错误：内部错误；错误：ShouldNotReachHere()](https://stackoverflow.com/questions/6017431/a-fatal-error-has-been-detected-by-the-java-runtime-environment-internal-error)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:23:18.197

看起来您正试图在 Oracle JVM 上执行 Dalvik 字节码。尽管两者都使用相同的语法编写，但字节码完全不同。您需要为 Java 重新编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:21:43.577

这是 JVM 本身的问题。

JVM 只是另一个程序，因为它可能有自己的错误/故障/安装问题。这种错误并不意味着您的 Java 程序有错误或您做错了什么（与 MS Word 中的内部错误相同的方式并不意味着您的文档有误）。

您应该检查日志文件以获取更多信息，但如果可能的话，我只会将 java/update 重新安装到更新的版本作为第一步。

# typescript - TypeScript 中的简单扩展方法

> ID：13229044
> 
> 赞同：5
> 
> 时间：2012-11-05T09:16:09.653
> 
> 标签：typescript

我正在尝试为类创建一个扩展方法，但似乎出了点问题。下面是代码，输出的 JS 文件是正确的，但编译器两次显示错误**“test.ts(10,16): The property 'close' doesn't exist on value of type 'Test'”** 应该纠正什么?

```
class Test {
} 

interface Test
{
    close():any;
}

Test.prototype.close  = function() {}

var t = new Test();

t.close(); 
```

**更新**：上面的代码可以使用内置类型编译。我需要扩展我自己的课程。

**更新 2**：旧的编译器版本问题。目前一切正常！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:15:13.500

此示例使用继承来扩展原始对象。命名只是为了说明。

```
class Test {
    baseMethod() {

    }
} 

class TestWithClose extends Test {
    close() {

    }
}

var t = new TestWithClose();

t.close();
t.baseMethod(); 
```

**更新**

您在评论中提到您可以以您想要的方式为内置函数编写扩展方法，我可以看到您想为自己的代码做同样的事情，但这是不可能的。

我希望这能解释原因。

在 TypeScript 中创建声明时，可以通过添加来扩展该声明。您可以使用 declare 关键字或将文件放在`.d.ts`文件中：

例如，如果您在一个文件中有此声明：

```
declare interface ExampleInterface {
    methodOne();
} 
```

您可以在另一个文件中扩展声明：

```
declare interface ExampleInterface {
    methodTwo();
} 
```

因此，当您使用它时，您可以使用这两个功能：

```
function example(example: ExampleInterface) {
    example.methodOne();
    example.methodTwo();
} 
```

这些并不是真正的扩展方法——这只是不止一次地告诉编译器一个实现。这对 jQuery 特别有用，因为它允许每个插件都有一个添加到`JQuery`接口的定义。

您不能为自己的 TypeScript 代码执行此操作，因为添加到接口会导致所有实现都需要更新以匹配接口定义。

这里的思想转变是 TypeScript 为您提供静态类型，而您正在寻找动态行为 - 所以您必须选择其中一个。例如，您可以只在真正需要的地方使用动态行为，而将其余的保持静态类型：

```
class Test {
} 

// statically typed

var stTest = new Test();

// dynamically typed

var testExtender: any = Test;
testExtender.prototype.close = function() {
    alert('Close');
};

var t: any = new Test();
t.close(); 
```

这并不是说将来不会在语言中添加一些东西来支持扩展方法。

# cxf - 请求 xml 中的 xsi:schemaLocation 在使用 cxf + jax-rs 将 xml 编组到对象时导致 handleJAXBException

> ID：13229046
> 
> 赞同：1
> 
> 时间：2012-11-05T09:16:12.260
> 
> 标签：cxf, jax-rs, xml-namespaces, xsi

```
cxf version - 2.2.3
spring version - 2.5.5

input xml -

<OTA_HotelAvailRQ EchoToken="ABC123" TimeStamp="2012-01-01T19:00:00" PrimaryLangID="en-us"
        xsi:schemaLocation="http://www.opentravel.org/OTA/2003/05 ../Schemas/OTA_HotelAvailRQ.xsd" 
        Version="6.000" xmlns="http://www.opentravel.org/OTA/2003/05" 
        xmlxsi="http://www.w3.org/2001/XMLSchema-instance">
    .<br>
    . . <br>
    . . .<br>
    . .<br>
    .<br>
</OTA_HotelAvailRQ> 
```

观察 - 当`xsi:schemaLocation`被移除时，解组会无缝进行；但是没有选择删除`xsi:schemaLocation`

错误跟踪是 -

```
Nov 5, 2012 2:26:50 PM org.apache.cxf.jaxrs.provider.AbstractJAXBProvider handleJAXBException
WARNING: javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException: The prefix "xsi" for attribute "xsi:schemaLocation" associated with an element type "OTA_HotelAvailRQ" is not bound.]
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.createUnmarshalException(AbstractUnmarshallerImpl.java:315)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.createUnmarshalException(UnmarshallerImpl.java:514)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:215)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:184)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:184)
    at org.apache.cxf.jaxrs.provider.JAXBElementProvider.unmarshalFromInputStream(JAXBElementProvider.java:193)
    at org.apache.cxf.jaxrs.provider.JAXBElementProvider.doUnmarshal(JAXBElementProvider.java:176)
    at org.apache.cxf.jaxrs.provider.JAXBElementProvider.readFrom(JAXBElementProvider.java:150)
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBody(JAXRSUtils.java:861)
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:494)
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:459)
    at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:204)
    at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:65)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:104)
    at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:99)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:452)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:159)
    at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:220)
    at org.apache.cxf.transport.servlet.AbstractCXFServlet.doPost(AbstractCXFServlet.java:153)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at org.apache.cxf.transport.servlet.AbstractCXFServlet.service(AbstractCXFServlet.java:211)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.xml.sax.SAXParseException: The prefix "xsi" for attribute "xsi:schemaLocation" associated with an element type "OTA_HotelAvailRQ" is not bound.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:174)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:388)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:334)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3104)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:921)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:211)
    ... 32 more

Nov 5, 2012 2:26:50 PM org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper toResponse
WARNING: WebApplicationException has been caught : The prefix "xsi" for attribute "xsi:schemaLocation" associated with an element type "OTA_HotelAvailRQ" is not bound. 
```

xsi:schemaLocation="opentravel.org/OTA/2003/05 ../Schemas/OTA_HotelAvailRQ.xsd" 行导致解组期望。有没有办法忽略或绕过这个 xsi:schemaLocation？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:31:01.163

线

xmlxsi="http://www.w3.org/2001/XMLSchema-instance"

是错的。这可能应该是 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 来正确定义 xsi 前缀。

# .net - 交叉类型 LINQ

> ID：13229048
> 
> 赞同：3
> 
> 时间：2012-11-05T09:16:24.370
> 
> 标签：.net, linq

我有以下代码

```
 [Microsoft.VisualStudio.TestTools.UnitTesting.TestMethod]
    public void TestEnumOfMaybe()
    {
        List<Maybe<int>> l = new List<Maybe<int>>();
        l.Add(1.ToMaybe());
        l.Add(Maybe.None<int>());
        l.Add(3.ToMaybe());

        var y = from x in l
                from y in x
                select y;

    } 
```

我的 Maybe 类型接受所有 Select 和 SelectMany 方法以使其与 Linq 兼容，我有测试来证明这一点。但是，我似乎无法像上面的测试用例那样找到一种方法来进行交叉类型的 LINQ 组合。我得到的错误是

```
expression of type 'FunctionalExtensions.Maybe<int>' is not allowed in
a subsequent from clause in a query expression with source type
'System.Collections.Generic.List<FunctionalExtensions.Maybe<int>>'.  

Type inference failed in the call to 'SelectMany'.
FunctionalExtensions* 
```

有没有办法将这两种 LINQ 类型结合起来，还是我在这里不走运？完整的 Maybe.cs 实现位于

[https://gist.github.com/4016243](https://gist.github.com/4016243)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T09:27:36.813

这个的翻译：

```
// Changed variable from y to query for clarity
var query = from x in l
            from y in x
            select y; 
```

很简单：

```
var query = l.SelectMany(x => x, (x, y) => y); 
```

请注意，这里*没有*调用任何内容`y`。

现在`l`是 a `List<Maybe<int>>`，因此您需要尝试找到一个`SelectMany`在此处有效的适当方法。除非您再添加，否则它将查找 in [`Enumerable.SelectMany`](http://msdn.microsoft.com/en-us/library/bb345618.aspx)，并且那里的*每个*重载都需要第一个委托返回一个`IEnumerable<T>`for some `T`。

所以这就是它不起作用的原因。您可以通过制作`Maybe<T>`实现来使其工作`IEnumerable<T>`（可能产生单个结果或没有结果）。很难确定这是否是你的目标，但你基本上必须让扩展工作。

或者，您可以为 target 编写一个新的重载`SelectMany`，`IEnumerable<T>`用于结果是 a`Maybe<T>`而不是 a 的情况`IEnumerable<T>`。不过，这将是非常不直观的，IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:29:19.470

您的`SelectMany`方法将 a`Maybe<TSource>`作为参数，但您在 a 上使用它`List<Maybe<TSource>>`，因此它实际上使用了`SelectMany`from 的方法`Enumerable`。从您的示例中不清楚您期望的类型是什么`y`，但因为它是代码并没有真正意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:59:51.513

正如 Jon 所说，`from`, `from`to的 LINQ 翻译`SelectMany`是：

```
var query = l.SelectMany(x => x, (x, y) => y); 
```

首先要注意的是 your`SelectMany`是针对一个 individual 定义的`Maybe<T>`，所以为了有意义，`l`必须是一个`Maybe<T>`（对于 some `T`），而不是一个列表。接下来要注意的是签名必须匹配。例如：

```
public static Maybe<TResult> SelectMany<TSource, TMaybe, TResult>(
    this Maybe<TSource> m, Func<Maybe<TSource>, Maybe<TMaybe>> f,
    Func<Maybe<TSource>, Maybe<TMaybe>, TResult> g)
{
    throw new NotImplementedException();
    // return m.Bind(x => f(x).Bind(y => g(x, y).ToMaybe()));
} 
```

和：

```
var obj = l[0]; 
```

现在这有效（显式泛型）：

```
var q = obj.SelectMany<int, int, Maybe<int>>((x => x), (x, y) => y); 
```

这等同于：

```
var r = obj.SelectMany((x => x), (x, y) => y); 
```

这等同于：

```
var query = from x in obj
            from y in x
            select y; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:21:51.583

对于我的具体问题，事实证明，让 Maybe 实现 IEnumerable 是可行的方法，它也使支持 IOBservable 变得微不足道。我的两个测试用例现在通过了。

```
 [Microsoft.VisualStudio.TestTools.UnitTesting.TestMethod]
    public void TestEnumOfMaybe()
    {
        List<Maybe<int>> l = new List<Maybe<int>>();
        l.Add(1.ToMaybe());
        l.Add(Maybe.None<int>());
        l.Add(3.ToMaybe());

        var k = from q in l
                from y in q
                select y;

        k.Should().BeEquivalentTo(new[] { 1, 3 });

    }

    [Microsoft.VisualStudio.TestTools.UnitTesting.TestMethod]
    public void TestObservableOfMaybe()
    {
        List<Maybe<int>> l = new List<Maybe<int>>();
        l.Add(1.ToMaybe());
        l.Add(Maybe.None<int>());
        l.Add(3.ToMaybe());

        var o = l.ToObservable();

        var k = from q in o
                from y in q
                select y;

        var m = k.ToEnumerable();

        m.Should().BeEquivalentTo(new[] { 1, 3 });

    } 
```

一般来说，我认为 LINQ 系统禁止将不同类型链接在一起，即使 SelectMany 签名会排列。我还没有被说服。

# mysql - Mysql：组合 Group by ， order ， max。获取分组集的最大值并应用条件

> ID：13229052
> 
> 赞同：0
> 
> 时间：2012-11-05T09:16:32.483
> 
> 标签：mysql, cakephp, cakephp-2.0

mysql 数据库中有一个表格保留，格式如下。

```
id | customer_id | user_id | date_booked
1  | 1           | 1       | 2012-11-5 
```

我想获取特定用户的客户数量。所以我写了查询

```
select count(*), user_id, customer_id,date_booked from reservations where user_id=1 group by customer_id 
```

这以所需的方式获取结果。但是 date_booked ，我得到了记录的第一个值。即，如果 id 为 2 的客户有 4 条记录，它将获取第一条记录的 date_booked 值。我想要最新的值，所以我改进了如下查询

```
select count(*), user_id, customer_id,max(date_booked) from reservations where user_id=1 group by customer_id 
```

这将获取记录的最高日期。这仍然不是我想要获取的结果集。我想要最新的日期，但应该小于当前日期（今天）。

有没有办法像这样写条件

```
max(date_booked)<date(now()) 
```

我想获取最大日期但少于今天。我想在 CakePHP 中实现这一点。如果有人可以帮助查询，我可以编写 cakePHP 格式。

*如有必要，请改进问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:20:13.700

试试这个：

```
select count(*), user_id, customer_id,max(date_booked) 
from reservations 
where user_id=1 
and date_booked<date(now())
group by customer_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:27:33.010

```
select count(*), 
       rs.user_id, 
       rs.customer_id,
       CASE WHEN max(rs.date_booked)<date(now()) then max(rs.date_booked) 
           else (select max(r.date_booked) from reservations r where r.user_id=rs.user_id 
                  and r.date_booked<date(now()) and r.customer_id=rs.customer_id
                  ) end as latestdate
from reservations rs 
where rs.user_id=1 
group by rs.customer_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:37:28.840

```
select  count(*),a.user_id,a.customer_id,
   IF(max(a.date_booked)>now(), b.date_booked, max(a.date_booked)) as date_booked
from reservations a left join 
   (select max(date_booked) as date_booked,customer_id 
        from reservations where date_booked < now() group by customer_id) b
on a.customer_id=b.customer_id
where a.user_id=1 
group by customer_id 
```

# caching - 可编程CPU缓存？

> ID：13229053
> 
> 赞同：2
> 
> 时间：2012-11-05T09:16:45.083
> 
> 标签：caching, cpu

是否可以像使用主内存一样使用 CPU 的缓存？例如在那里保存变量？

我实验室的 CPU 有很多 L3 缓存（Xeon E5），nvidia 的 GPU 有可管理的共享内存/缓存，并且这种可编程缓存有很多提高性能的技巧，有没有办法对 CPU 做同样的事情大量缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T02:15:24.563

在 MIPS 等一些体系结构中，可以使用特权指令来“锁定”高速缓存行。这样缓存就可以读/写，并且不会在 LRU 期间被刷新。它类似于处理器中的暂存器内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:54:52.303

我认为您正在寻找具有“暂存器内存”的处理器，GPU / 矢量处理器通常使用它来代替更复杂的缓存协议。这是您在 Nvidia GPU 上提到的“可编程缓存”。

据我所知，没有 x86 CPU 具有此功能，但是很常见的是 ARM 处理器具有可用作暂存器 RAM 的“核心耦合”低延迟 SRAM 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:18:03.767

我怀疑一个体面的编译器将能够比您自己不费力气更有效地使用缓存。

# hadoop - 如何平衡剩余百分比？

> ID：13229054
> 
> 赞同：0
> 
> 时间：2012-11-05T09:16:47.833
> 
> 标签：hadoop, hdfs

Hadoop HDFS 平衡器可以平衡节点之间的使用百分比。但是，我找不到平衡剩余 %（即空白空间 %）的方法。

例如，假设我有 3 个节点，其中 2 个专用于 HDFS，1 个用于其他共享磁盘。平衡器将平衡 3 个节点之间的使用百分比。因此，共享节点总是先用完磁盘空间，因为它在磁盘上有其他文件。

我想要的是平衡剩余磁盘空间%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:21:33.373

这个 wiki 页面解释了如何为每个数据节点保留非 DFS 使用。 [http://wiki.apache.org/hadoop/DiskSetup](http://wiki.apache.org/hadoop/DiskSetup)

# sharepoint - 使用 SPMetal 和 ContentType 生成 Sharepoint LINQ 类

> ID：13229055
> 
> 赞同：1
> 
> 时间：2012-11-05T09:16:51.213
> 
> 标签：sharepoint, sharepoint-2010, linq-to-sharepoint, spmetal

我有一个`MyList`基于`MyContentType`Sharepoint 中 ContentType 的列表。

现在我尝试使用 SPMetal 生成 LINQ 类，但 ContentType 的类基本上创建了两次。

**SPMetal 的 XML 配置**

```
<?xml version="1.0" encoding="utf-8"?>
<Web AccessModifier="Internal" xmlns="http://schemas.microsoft.com/SharePoint/2009/spmetal">
   <List Name="MyList">
       <ContentType Name="MyContentType"></ContentType>
   </List>
  <ExcludeOtherLists/>
  <ExcludeOtherContentTypes/>
</Web> 
```

**部分输出cs文件**

```
[Microsoft.SharePoint.Linq.ListAttribute(Name="MyList")]
public Microsoft.SharePoint.Linq.EntityList<MyContentTypeMyContentType> MyList {
    get {
        return this.GetList<MyContentTypeMyContentType>("MyList");
    }
}

[...]

[Microsoft.SharePoint.Linq.ContentTypeAttribute(Name="MyContentType", Id="0x01003D132021D84A48E9A16011B7648CBD98")]
[Microsoft.SharePoint.Linq.DerivedEntityClassAttribute(Type=typeof(MyContentTypeMyContentType))]
internal partial class MyContentType : Element {
    [...]
}

[...]

[Microsoft.SharePoint.Linq.ContentTypeAttribute(Name="MyContentType", Id="0x01003D132021D84A48E9A16011B7648CBD98", List="MyList")]
internal partial class MyContentTypeMyContentType : MyContentType {
    public MyContentTypeMyContentType() {
        this.OnCreated();
    }
} 
```

如您所见，它生成一个`MyContentTypeMyContentType`派生自`MyContentType`. 但为什么？没用的。我怎样才能避免这种行为？

如果`MyList`只是一个 EntityList`MyContentType`而不是`MyContentTypeMyContentType`.

* * *

**附言**

如果我在 XML 配置中为 ContentType 添加一个类名，如下所示：

```
<ContentType Name="MyContentType" class="MyContentType"></ContentType> 
```

它仍然会生成第二个类并将其命名，`MyContentType0`这也是错误的。

# c# - Win7文件名的最大长度

> ID：13229065
> 
> 赞同：1
> 
> 时间：2012-11-05T09:17:33.677
> 
> 标签：c#, asp.net

我有一个允许用户下载文件的网络应用程序。在这样做时，它要求用户在文本框中为其提供名称。此文本框的上限为 200 个字符。当我在访问此应用程序时尝试在我的 Win7 系统上下载文件时，我没有得到全部 200 个字符，而是只得到 158 个字符。我浏览了一些文章，建议 Win7 文件名的最大字符长度为 256 个字符并且下载的位置（整个路径）也被考虑在内。这 158 个字符还包括在浏览器中选择保存此文件的位置。

请建议..

# powershell - 如何在 PowerShell 中结束多行命令

> ID：13229066
> 
> 赞同：21
> 
> 时间：2012-11-05T09:17:33.713
> 
> 标签：powershell, multiline

这应该很容易，但无法弄清楚。如何在 PowerShell 中结束多行命令？例如，如果我输入`Get-ChildItem |`并按回车键，那么我会收到一个`>>`提示，我假设它是继续该命令。但是，如果我然后输入`foreach{Write-Host $_.name}`并按 Enter，我仍然会收到`>>`提示。

怎么说，*我完成了，现在运行这个*？我认为当我编写一个完整的命令（不以管道或未闭合的括号结尾）时会发生这种情况，但似乎没有。还尝试以分号结尾，但这并没有太大帮助。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-05T09:19:12.480

在我问完之后，我想通了......`Enter` *两次*击球使它发生了:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-10-08T22:41:13.043

**如果您在按两次Enter**后继续得到**>>**提示，请检查您的脚本是否有未终止的字符串，即未配对的引号。

# facebook - 自定义facebook注册插件

> ID：13229067
> 
> 赞同：0
> 
> 时间：2012-11-05T09:17:42.233
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

是否有可能我们可以将 facebook 注册表的布局或设计更改为您想要的设计？我有一个 facebook 注册表单，我想更改该表单的设计并将其变成与我的网站表单相同的设计。

是否可以自定义 facebook 注册表插件的设计？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:21:58.083

不可能在视觉上做太多的改变，因为社交插件上允许的自定义级别是有意限制的，因此它们在整个网络上具有相对一致的外观和感觉。

您可以通过该`border_color`属性传入一个十六进制值，但这就是它的范围。

# vsto - 任务窗格中面板内的滚动条

> ID：13229070
> 
> 赞同：0
> 
> 时间：2012-11-05T09:17:53.090
> 
> 标签：vsto

我正在尝试激活面板内的滚动条，该滚动条比我的任务窗格大，但以下代码不起作用...

> ```
>  Panel pane = new Panel();
>         pane.AutoScroll = true;
>         taskPane = Globals.ThisAddIn.CustomTaskPanes.Add(pane, "try", inspector); 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:05:04.173

您不能将面板直接添加到自定义任务窗格。为此，您必须在应用程序中创建用户控件。

**将用户控件的AutoScroll**属性更改为true**设置**用户控件 的高度。在 中写入以下代码`ThisAddIn.cs`：

```
 private UserControl1 myUserControl1;
        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
            myUserControl1 = new UserControl1();
            Microsoft.Office.Tools.CustomTaskPane myCustomTaskPane =
                this.CustomTaskPanes.Add(myUserControl1, "My Task Pane");
            myCustomTaskPane.Visible = true;
        } 
```

希望，这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:34:10.850

我设法通过将我的用户控件控件放在一个

`<ScrollViewer VerticalScrollBarVisibility="Auto"></ScrollViewer>`

# shell - 从makefile传递shell脚本中的参数并取回结果？

> ID：13229071
> 
> 赞同：3
> 
> 时间：2012-11-05T09:17:59.907
> 
> 标签：shell, makefile, gnu-make

我有一个makefile，我想从那里调用一个shell脚本，它会做一些事情并将结果返回给makefile。

详细说明 ：-

从我的make-file中，我调用shell脚本如下：-

```
source = $(PWD)
target = $(ROOT)
SCRIPT:= /home/........./temp.sh
FUNCTION:=$(shell $(SCRIPT $source $target))` 
```

外壳脚本“temp.sh”：-

```
source=$1
target=$2

echo There are $# arguments to $0: $*
common_part=$source # for now
result="" # for now

while [[ "${target#$common_part}" == "${target}" ]]; do
    common_part="$(dirname $common_part)"

    if [[ -z $result ]]; then
        result=".."
    else
        result="../$result"
    fi
done

if [[ $common_part == "/" ]]; then
    result="$result/"
fi

forward_part="${target#$common_part}"

if [[ -n $result ]] && [[ -n $forward_part ]]; then
    result="$result$forward_part"
elif [[ -n $forward_part ]]; then
    result="${forward_part:1}"
fi

echo "Result=$result" 
```

*   我没有看到 Shell-Script 的“回声语句”，这可能是什么原因？
*   如何将结果返回到 makefile？
*   这是从make-file调用脚本的正确方法吗？

我是这个领域的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:01:19.563

您的调用语法错误；你要

```
FUNCTION:=$(shell $(SCRIPT) $(source) $(target)) 
```

插值的 Makefile 变量需要在其名称周围加上括号，除非它们是单字母。

# c# - 如何将 IRepository 注册到 Repository 到 Unity 中的所有对象

> ID：13229076
> 
> 赞同：0
> 
> 时间：2012-11-05T09:18:47.550
> 
> 标签：c#, unity-container

我有`IRepository`很多类`IRepository<User>`，`IRepository<Customer>`等等。是否可以像这样在单元中注册，但对于所有对象，或者我必须手动编写 100 个注册。

```
container.RegisterType<IRepository<User>, Repository<User>>() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:28:45.940

不，你没有。您也可以注册开放的泛型。

```
container.RegisterType(typeof(IRepository<>), typeof(Repository<>)); 
```

Unity 将为您关闭泛型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:27:55.540

我从未使用过 Unity，但在 Ninject 世界中，您只需注册一次依赖项。

# c++ - 生成文件不工作

> ID：13229078
> 
> 赞同：0
> 
> 时间：2012-11-05T09:18:53.733
> 
> 标签：c++, makefile

我正在尝试让我的 makefile 工作，但它给了我一些错误，我无法让它工作。

```
 OBJS = Kmeans.o cluster.o data.o 
    CC = g++
    DEBUG = -g
    CFLAGS = -Wall -c $(DEBUG)
    LFLAGS = -Wall $(DEBUG)

    clustering : $(OBJS)
        $(CC) $(LFLAGS) $(OBJS) -o clustering

    Kmeans.o : Kmeans.h Kmeans.cpp cluster.h data.h
        $(CC) $(CFLAGS) Kmeans.cpp

cluster.o : cluster.h cluster.cpp data.h 
    $(CC) $(CFLAGS) cluster.cpp

data.o : data.h data.cpp 
    $(CC) $(CFLAGS) data.cpp

clean:
    \rm *.o *~ clustering 
```

文件是：

```
clustering.cpp -> #include "Kmeans.h"
Kmeans.cpp     -> #include "Kmeans.h"
Kmeans.h       -> #include "cluster.h"
cluster.cpp    -> #include "cluster.h"
cluster.h      -> #include "data.h"
data.cpp       -> #include "data.h" 
```

我究竟做错了什么？

编辑：对不起，我忘了包括错误：

```
Kmeans.o: In function `Kmeans::read(char*)':
Kmeans.cpp:(.text+0x53c): undefined reference to `Data::~Data()'
cluster.o: In function `Cluster::Cluster(int, int, int)':
cluster.cpp:(.text+0x45): undefined reference to `Data::~Data()'
cluster.cpp:(.text+0x80): undefined reference to `Data::~Data()'
cluster.o: In function `Cluster::Cluster()':
cluster.cpp:(.text+0xca): undefined reference to `Data::~Data()'
cluster.cpp:(.text+0x110): undefined reference to `Data::~Data()'
cluster.o: In function `Cluster::setData(int, int, int)':
cluster.cpp:(.text+0x158): undefined reference to `Data::~Data()'
collect2: ld devolvió el estado de salida 1
make: *** [clustering] Error 1 
```

谢谢！

我编译每个文件，问题出在最后一行：

```
g++    -c -o clustering.o clustering.cpp
g++    -c -o data.o data.cpp
g++    -c -o Kmeans.o Kmeans.cpp
g++    -c -o cluster.o cluster.cpp
g++    -o clustering clustering.o data.o Kmeans.o cluster.o    <---- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:44:48.617

似乎您有`Data::~Data`声明，`data.h`但您在任何地方都没有定义。

只需从标题中删除声明或添加空定义，它是一个虚拟析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:34:12.180

该错误似乎不在您的 makefile 中，而是在您的 CPP 文件中。尝试手动编译它，然后使用 makefile 来自动化它。

可能是你忘记写 in 的定义`Data::~Data()`了`data.cpp`

示例 MAKEFILE 应该是这样的：

```
#list of pseudo variables here

executable: object1.o object2.o object3.o
         ld -r object1.o object2.o object3.o -o executable

object1.o : object1.cpp
         $(CC) object.cpp -o object1.o

object2.o : object2.cpp
         $(CC) object2.cpp -o object2.o

object3.o : object3.cpp
         $(CC) object3.cpp -o object3.o 
```

# javascript - jQuery（1.8.1/1.8.2）、Internet Explorer 8：如何去除css属性透明？

> ID：13229079
> 
> 赞同：1
> 
> 时间：2012-11-05T09:19:01.187
> 
> 标签：javascript, jquery, css, internet-explorer-8, background

我有一个要设置透明的输入字段，然后删除透明度。

步骤1：

```
<div class="container" style="background: grey">
    <input id="firstName" type="text" value="Hello">
</div>​ 
```

脚本：

```
$("#firstName").css("background", "transparent"); 
```

现在输入元素的背景颜色为灰色（容器背景颜色）。到目前为止，在 IE + Chrome 中都很好。

第 2 步：我想删除“透明”css 属性，所以我尝试这样做：

```
$("#firstName").css("background", ""); 
```

这适用于 Chrome，因为背景设置为白色。然而，在 IE8 中，输入元素的背景颜色仍为灰色。上面的行在 IE8 中根本没有任何效果。有谁知道如何实现我想要做的事情？

JSFiddle 这里有完整的代码：http: [//jsfiddle.net/R24Ym/5/](http://jsfiddle.net/R24Ym/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:28:04.743

如果这是您应用的唯一样式，您可以简单地删除样式属性：

```
$('#firstName').removeAttribute('style'); 
```

否则，您可以创建一个名为 transparent 的类并添加和删除它：

```
$('#firstName').addClass('transparent');
$('#firstName').removeClass('transparent'); 
```

CSS：

```
.transparent{
    background:none transparent;
} 
```

[http://jsfiddle.net/R24Ym/7/](http://jsfiddle.net/R24Ym/7/)

# ruby-on-rails - 为当前 Rails 项目添加 PJAX 支持

> ID：13229083
> 
> 赞同：0
> 
> 时间：2012-11-05T09:19:24.140
> 
> 标签：ruby-on-rails, layout, pjax

我有一个使用标准 Rails 布局的现有网站。单击网站中的每个链接当前会加载并呈现相关视图。

不过最近，我听说了 PJAX，我想将整个站点转换为使用它，我需要更改什么 - 布局明智，以便能够使用它？

有没有我可能错过的指南来完成这个过程？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:01:18.673

Railscast 的教程很棒：[http ://railscasts.com/episodes/294-playing-with-pjax?autoplay=true](http://railscasts.com/episodes/294-playing-with-pjax?autoplay=true)

# objective-c - 通过 Xcode 工作区将静态库与演示应用程序链接

> ID：13229084
> 
> 赞同：0
> 
> 时间：2012-11-05T09:19:30.750
> 
> 标签：objective-c, ios, xcode

我用这个静态库创建了名为“abc.framework”的静态库和名为“DemoApp”的演示应用程序。现在我想增强 abc.framework，同时我也希望 DemoApp 中的这些更改也包含框架。为此，我创建了一个工作区并将上述两个项目都添加到其中。现在由于 DemoApp 链接到旧的 abc.framework 文件，我想更改该链接。我做了以下事情，

```
 Demo app project:

•   set USER_HEADER_SEARCH_PATHS to $(TARGET_BUILD_DIR)/usr/local/include $(DSTROOT)/usr/local/include;

    the static library project:
•   add some header files to target's Build Phases > Copy Headers > Public;
•   set SKIP_INSTALL to YES. 
```

仍然无法正常工作。有人试过这个吗？我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:54:14.110

我们可以通过三种方式进行这种链接......

1）如上所述，使用“用户标题搜索路径”。这将直接链接到将要构建的新头文件。（以前我上面提到过它对我不起作用。可能是我没有正确清理构建。）

2) 我们可以从 Build Phase => Link binary with Libraries 添加 .a 文件。在此它将显示您工作场所中可用的 .a 文件。

3）我们可以从默认创建实际产品的派生数据路径中直接引用框架。这样一旦用户在工作空间中对框架代码进行了更改并构建它，演示应用程序就可以直接引用新的构建。

# java - Apache Camel JMS - 异常未通过请求/回复返回给调用者

> ID：13229088
> 
> 赞同：6
> 
> 时间：2012-11-05T09:19:40.140
> 
> 标签：java, spring, jboss, jms, apache-camel

我使用 Apache Camel 和 JMS 创建了一个简单的请求/回复设置。一切正常 - 调用被分派到服务器端服务，结果返回给客户端。只有当服务器端出现异常时，该异常才不会返回给调用者。服务器上出现异常，客户端收到超时。我想在客户端收到异常。

据我了解可用的文档，我想要的应该是默认行为。我还使用了 onException 子句或为反向传输设置了另一条路线，但所有这些都没有帮助。所以我的问题是我在设置中缺少什么以将异常返回给调用者？

以下是详细信息（代码简化）：

*   用于通信的 JMS 队列部署在独立的 JBoss (7.1.1.FINAL) 中
*   JNDI 用于查找工厂以创建与队列的连接
*   客户端当前是在 Jetty 中运行的 Spring Web 应用程序
*   服务器目前是一个简单的独立 Java 应用程序，配置了 Spring
*   春季版 3.1.2.RELEASE
*   阿帕奇骆驼 2.10.2

客户端和服务器之间交换的 DTO/异常：

```
public class RequestDTO implements Serializable {
    String payload;
    ...
}

public class ResponseDTO implements Serializable {
    String payload;
    ...
}

public class RmtServiceException extends Exception implements Serializable {
    public RmtServiceException() {
        super("Exception in service.");
    }
} 
```

通过 JMS 调用的服务接口：

```
public interface RmtService {
    ResponseDTO doSomething(RequestDTO request) throws RmtServiceException;
} 
```

服务的实施：

```
@Component("rmtService")
public class RmtServiceImpl implements RmtService {
    public ResponseDTO doSomething(RequestDTO request) throws RmtServiceException {
        // Return a ResponseDTO if processing is successful,
        // otherwise throw an RmtServiceException
    }
} 
```

客户端配置：

```
<bean id="remoteJndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">org.jboss.naming.remote.client.InitialContextFactory</prop>
            <prop key="java.naming.provider.url">remote://localhost:4447</prop>
            <prop key="java.naming.security.principal">JNDI_USER</prop>
            <prop key="java.naming.security.credentials">JNDI_PASSWORD</prop>
        </props>
    </property>
</bean>

<bean id="remoteJmsConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="remoteJndiTemplate"/>
    <property name="jndiName" value="jms/RemoteConnectionFactory"/>
</bean>

<bean id="authenticatedJmsConnectionFactory" class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
    <property name="targetConnectionFactory" ref="remoteJmsConnectionFactory"/>
    <property name="username" value="JMS_USER"/>
    <property name="password" value="JMS_PASSWORD"/>
</bean>

<bean name="hq" class="org.apache.camel.component.jms.JmsComponent">
    <property name="connectionFactory" ref="authenticatedJmsConnectionFactory"/>
</bean>

<camel:camelContext id="APIContext" autoStartup="true">
    <camel:endpoint id="queue" uri="hq:queue:test.queue"/>
</camel:camelContext>

<camel:proxy
        id="rmtServiceProxy"
        serviceInterface="RmtService"
        serviceUrl="hq:queue:test.queue"/> 
```

服务器配置：

```
<bean id="remoteJndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">org.jboss.naming.remote.client.InitialContextFactory</prop>
            <prop key="java.naming.provider.url">remote://localhost:4447</prop>
            <prop key="java.naming.security.principal">JNDI_USER</prop>
            <prop key="java.naming.security.credentials">JNDI_PASSWORD</prop>
        </props>
    </property>
</bean>

<bean id="remoteJmsConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="remoteJndiTemplate"/>
    <property name="jndiName" value="jms/RemoteConnectionFactory"/>
</bean>

<bean id="authenticatedJmsConnectionFactory" class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
    <property name="targetConnectionFactory" ref="remoteJmsConnectionFactory"/>
    <property name="username" value="JMS_USER"/>
    <property name="password" value="JMS_PASSWORD"/>
</bean>

<bean name="hq" class="org.apache.camel.component.jms.JmsComponent">
    <property name="connectionFactory" ref="authenticatedJmsConnectionFactory"/>
</bean>

<camel:camelContext id="APIContext" autoStartup="true">
    <camel:endpoint id="queue" uri="hq:queue:test.queue"/>
    <camel:route>
        <camel:from ref="queue"/>
        <camel:to uri="bean:rmtService"/>
    </camel:route>
</camel:camelContext> 
```

服务器端出现异常时观察到的行为：

在服务器日志中出现以下输出：

```
ERROR: org.apache.camel.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-XXX-49296-1352104153517-0-8 on ExchangeId: ID-XXX-49296-1352104153517-0-7). Exhausted after delivery attempt: 1 caught: org.apache.camel.RuntimeCamelException: RmtServiceException: Exception in service.
org.apache.camel.RuntimeCamelException: RmtServiceException: Exception in service.
at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1270)
at org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:87)
at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:130)
at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)
at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:73)
at org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:101)
at org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)
at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)
at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:122)
at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:298)
at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:117)
at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)
at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91)
at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:334)
at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:220)
at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)
at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:303)
at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)
at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)
at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)
at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48)
at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)
at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)
at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86)
at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:104)
at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:562)
at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:500)
at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:468)
at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:326)
at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:264)
at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1071)
at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1063)
at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:960)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: RmtServiceException: Exception in service.
at RmtServiceImpl.doSomething(...)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:83)
... 48 more
WARN : org.apache.camel.component.jms.EndpointMessageListener - Execution of JMS message listener failed. Caused by: [org.apache.camel.RuntimeCamelException - RmtServiceException: Exception in service.]
... (Same stacktrace again) 
```

客户端收到超时：

```
WARN : org.apache.camel.component.jms.reply.TemporaryQueueReplyManager - Timeout occurred after 20000 millis waiting for reply message with correlationID [ID-XXX-49307-1352104250851-0-13]. Setting ExchangeTimedOutException on (MessageId: ID-XXX-49307-1352104250851-0-15 on ExchangeId: ID-XXX-49307-1352104250851-0-14) and continue routing.
2012-11-05 10:03:11.964:WARN:oejs.ServletHandler:/app/some/action
java.lang.reflect.UndeclaredThrowableException
at $Proxy45.doSomething(Unknown Source)
at ...
Caused by: 
org.apache.camel.ExchangeTimedOutException: The OUT message was not received within: 20000 millis due reply message with correlationID: ID-XXX-49307-1352104250851-0-13 not received. Exchange[Message: BeanInvocation public abstract ResponseDTO RmtService.doSomething(RequestDTO) throws RmtServiceException with [RequestDTO@...]]]
at org.apache.camel.component.jms.reply.ReplyManagerSupport.processReply(ReplyManagerSupport.java:133)
at org.apache.camel.component.jms.reply.TemporaryQueueReplyHandler.onTimeout(TemporaryQueueReplyHandler.java:61)
at org.apache.camel.component.jms.reply.CorrelationTimeoutMap.onEviction(CorrelationTimeoutMap.java:53)
at org.apache.camel.component.jms.reply.CorrelationTimeoutMap.onEviction(CorrelationTimeoutMap.java:30)
at org.apache.camel.support.DefaultTimeoutMap.purge(DefaultTimeoutMap.java:203)
at org.apache.camel.support.DefaultTimeoutMap.run(DefaultTimeoutMap.java:159)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

所以再一次：其他一切都按预期工作，只有异常不会返回给调用者。非常感谢您对此的任何帮助！提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T10:05:05.890

请参阅您需要启用的选项 transferException 以序列化异常并作为响应返回。该选项记录在 JMS 文档页面上：[http ://camel.apache.org/jms](http://camel.apache.org/jms)

# regex - 清理 Excel 中的域列表 - 正则表达式/宏？

> ID：13229089
> 
> 赞同：0
> 
> 时间：2012-11-05T09:19:49.377
> 
> 标签：regexp, vba, regex, excel, vba, dns

我有一个巨大的域电子表格，我需要清理如下：

1.  删除所有`http://`（简单替换所有 - “http://” 与 “”）
2.  删除任何`www.`（简单替换所有 - “www。”与“”）
3.  删除任何子域（完全删除实际行，而不仅仅是 url 中的子域）
4.  删除域扩展后的任何内容（即`website.com/blah/blahbah/`变为just `website.com`（简单替换全部 - `"/*"`，`""`然后全部替换`"/"`为`""`）

所以我剩下的只是一个干净域的电子表格，比如`"website.com"`.

我想我已经对 1、2 和 4 进行了排序（如上所述），**但我真的很挣扎 3**。

有任何想法吗？我可以使用[regexp](/questions/tagged/regexp "显示标记为“正则表达式”的问题") / [vba](/questions/tagged/vba "显示标记为“vba”的问题")执行此操作，并且实际上完全删除该行吗？

**样本数据：**

[http://www.scholastic.com/kids/stacks/games/](http://www.scholastic.com/kids/stacks/games/)
[http://imgworld.teamworkonline.com/](http://imgworld.teamworkonline.com/)
[http://topfreegraphics.com/](http://topfreegraphics.com/)
[http://www.workcircle.co.uk/](http://www.workcircle.co.uk/)
[http:// www.healthycanadians.gc.ca/index-eng.php](http://www.healthycanadians.gc.ca/index-eng.php)
[http://gsociology.icaap.org/methods/soft.html](http://gsociology.icaap.org/methods/soft.html)

**帖子 1、2 和 4 会给我留下：**

scholastic.com
imgworld.teamworkonline.com
topfreegraphics.com
workcircle.co.uk
healthcanadians.gc.ca
gsociology.icaap.org

这是我需要完全删除的那些讨厌的子域，只需删除该行。我已经意识到我不能只搜索 2 x "."，因为显然很多域扩展名（即`.co.uk`）都包含它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:08:42.880

如果您*可以确定*在第三步中使用哪个正则[表达式](/questions/tagged/regexp "显示标记为“正则表达式”的问题")，那么一旦您适当地调整了范围，以下代码将完成您需要它做的事情。

```
Private Sub xlRegexp()

Dim c As Integer
Dim n As Integer
Dim strOldText As String
Dim RegExFindThis As String
Dim RegEx
Set RegEx = CreateObject("vbscript.regexp")

c = 1

WhichCase:

 Select Case c
    Case 1    
        RegExFindThis = "http://"    
    Case 2    
        RegExFindThis = "www."    
    Case 3    
        RegExFindThis = "/.*"    
    Case Else    
        GoTo Subdomains    
End Select

With RegEx
    .Pattern = RegExFindThis
    .Global = True
End With

For n = [X] To [Y]
    Range("A" & n).Activate 'assumes your list is in column A
    strOldText = ActiveCell.Text
    ActiveCell.Value = RegEx.Replace(strOldText, "")
Next

c = c + 1

GoTo WhichCase
Subdomains:

RegExFindThis = "[STEP 3 RegExp]"

With RegEx
    .Pattern = RegExFindThis
    .Global = True
End With

n = 1

For n = [X] To [Y]
    Range("A" & n).Activate 'assumes your list is in column A
    If RegEx.Test(ActiveCell.Text) Then
        Rows(ActiveCell.Row).Select
        Selection.Delete Shift:=xlUp
    End If
Next

Set RegEx = Nothing
MsgBox ("Macro complete.")
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:47:33.590

快速而肮脏的解决方案。

```
=IF(ISERROR(FIND(".",A1,FIND(".",A1,1)+1)),"",IF(ISERROR(MATCH(RIGHT(A1,LEN(A1)-FIND(".",A1)),$D:$D,0)),"Subdomain","")) 
```

A 列：域列表。
D 列：接受的子域记录列表（gov.uk 等），由用户编制。

也适用于具有 3 个或更多点的域。

之后可以过滤掉子域单元格并删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:49:37.647

作为一个非常简单的方法：

```
for i = worksheet.rows.count to 1 step -1
Dim counter as Integer
Dim Value as String
Dim splitter as String()
Value = worksheet.cells(i,1).value
Dim splitter() As String
splitter=split(Value,".")

if ubound(splitter)>1 then
workseet.rows.removeat(i)
end if
next 
```

可能不会开箱即用，因为没有数据可以测试它，但它应该可以正常工作......

# android - 使用 ksoap2 发送复杂对象

> ID：13229090
> 
> 赞同：0
> 
> 时间：2012-11-05T09:19:56.167
> 
> 标签：android

我正在构建一个移动 Web 应用程序。我有一个 Web 服务 (WCF) 和一个 android 客户端。我使用 KSOAP2 发送和接收消息。到目前为止，我只需要发送简单的字符串和整数，但响应是一系列复杂的对象，所以我需要使用这个有用的[链接](http://seesharpgears.blogspot.gr/2010/10/ksoap-android-web-service-tutorial-with.html)正确解析它。我现在需要做的是相反的，我需要发送一个像这样的复杂对象：

```
public Class OutterObject{
       int a;
       String b;
       InnerObject c;
} 
```

现在 InnerObject 也有两个对象作为字段。所以它有点复杂。我不知道我应该做什么，我遇到了一些关于编组的文章，但我仍然不知道它是否是正确的方法，因为我看过其他没有使用编组的文章。你能指出正确的方向吗？或者分享如何使用 ksoap2 发送复杂对象的指南。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:44:10.563

[http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives) 上面的链接告诉你如何发送一个复杂的对象。我还为 ksoap2 或其他客户端找到了一些存根生成器。但是没有人可以翻译复杂的对象，除了 wsclient++。但是 wsclient++ 不是免费的。

# javascript - 在android中使用javascript渲染svg

> ID：13229091
> 
> 赞同：0
> 
> 时间：2012-11-05T09:19:58.667
> 
> 标签：javascript, android, webview, svg

我有一些 svg 文件和一些 .js 文件。我想使用 .js 文件呈现 svg 文件。

我现在所做的是： 1\. 将所有 svg 和 js 文件放入 assets 2\. 并编写以下代码：

```
 final String mimeType = "text/html"; 
    final String encoding = "utf-8"; 
    final String html = "<p><img height=\"600px\" width=\"600px \"src=\"file:///android_asset/drawing2.svg\" /></p>";

    WebView wv = (WebView) findViewById(R.id.webView1); 
    wv.getSettings().setJavaScriptEnabled(true); 
    wv.loadDataWithBaseURL("", html, mimeType, encoding, ""); 
```

显示了 svg。但是 .js 文件根本没有效果。我如何让它们一起工作？任何指针/帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:52:50.413

出于安全和隐私原因，javascript 不会在任何浏览器的图像中运行。您必须使用`<object>`,`<embed>`或`<iframe>`标记才能使脚本工作。

# uitableview - iOS - 哪个控件最适合选择值 - 从 UITableView 启动

> ID：13229092
> 
> 赞同：-1
> 
> 时间：2012-11-05T09:20:03.280
> 
> 标签：uitableview, uipickerview

我有一个对话要求。我需要一小部分用户必须选择的静态值，然后丢弃对话框。

现在，必须从 UITableView 启动此对话框 - 在选择特定单元格时。从不同的单元格启动，此对话框的内容会有所不同 - 静态值会有所不同。该列表不会更大，也不太可能改变，所以最好是静态的。

我从模态视图开始 - 使用带有 UITableViewController 参数的 presentModalViewController。这带来了整个表格视图 - 我不想要的东西。我只需要屏幕的一小部分被这个对话框遮住——就像 iPhone 的内置日期选择器一样。

我看到 UIPickerView 可以解决我的问题，但找不到足够的示例来满足我的需求——我不仅需要它，还需要来自特定 UITableViewCell 的它。我还需要丢弃按钮。我不知道我是否可以在 IB 中做到这一点，或者我的 UITableView 代码将是最好的地方。

有什么教程可以满足我的要求吗？（如果有什么比选择器更好，那也很好 - 只需要更小，模式化并且可用于 iOS 5,6 - iPhone 和 iPad）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:37:35.210

在此处查看 iOS 6 Essentials 书：[http ://www.techotopia.com/index.php/IPhone_iOS_6_Development_Essentials](http://www.techotopia.com/index.php/IPhone_iOS_6_Development_Essentials)

那里有很多关于 UIPickerView 和 tableView 的有用提示和技巧，如果你决定购买它，值得花钱（IMO）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:01:00.267

我发现[UIActionSheet](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://developer.apple.com/library/ios/documentation/uikit/reference/UIActionSheet_Class/&ei=lZmYULiEFoOurAeJ9IDgCA&usg=AFQjCNEgmE9yiZkHqT763HKBsTwOWEYUHw)可以满足我的要求。

# mysql - mysql 自定义排序

> ID：13229095
> 
> 赞同：3
> 
> 时间：2012-11-05T09:20:10.627
> 
> 标签：mysql, sql-order-by

我在数据库表中有四行。我希望他们按以下顺序订购

```
id
5
8
6
7 
```

我该怎么做？

我不能在另一列中设置顺序，因为 DB 表不是我的自定义表，它是由 CMS 插件提供的。所以改变表的结构并不是一个好主意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T09:21:24.407

试试这个，

```
SELECT..
FROM...
WHERE...
Order By Field(ID,5,8,6,7) 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/11f48b/3)

# java - Java&JFreeChart - 如何使用它的容器（比如 JPanel）设置 JFreeChart 的 ChartPanel 调整大小？

> ID：13229097
> 
> 赞同：0
> 
> 时间：2012-11-05T09:20:16.163
> 
> 标签：java, swing, user-interface, jfreechart

我刚刚发现，当我将 ChartPanel 添加到 JFrame 时，ChartPanel 将调整大小以适应框架，因为 JFrame 被拖得更大或更小。但是，当我将 ChartPanel 添加到 JPanel 时，JPanel 的大小（宽度和高度）会随着 JFrame 调整大小而更改以适应 JFrame。但是 ChartPanel 只是保持它的尺寸，给放大的 JPanel 留下很多空白空间。如何在 GUI 中使用它的容器调整 ChartPanel 的大小？

这是我的示例代码：

1.  这种情况下图表使用 JFrame 调整大小

> ```
> ChartPanel chartPanel = new ChartPanel(createWhateverChart());
> JFrame frame = new JFrame();
> frame.add(chartPanel); 
> ```

1.  在这种情况下，我首先将 ChartPanel 添加到 JPanel，以便于管理和更新图表，但 ChartPanel 不会使用 JPanel/JFrame 调整大小。

> ```
> ChartPanel chartPanel = new ChartPanel(createWhateverChart());
> JPanel panel = new JPanel("Who cares");
> panel.add(chartPanel, BorderLayout.CENTER);
> JFrame frame = new JFrame();
> frame.add(panel); 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-17T09:12:40.443

试试我的代码，它工作正常。

注意 ：

我有一个包含 panelMain 的框架，一个 panelMain 包含一个 subPanel，一个 subPanel 包含 ChartPanel。

```
frame.setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.Y_AXIS));                      
JPanel panelMain = new JPanel(new GridLayout(0,2));            
ChartPanel chartPanel = createChart();        
JPanel subPanel = new JPanel(new BorderLayout());   
subPanel.setBorder(BorderFactory.createTitledBorder("Consommation"));
subPanel.setPreferredSize(new Dimension(400, 200));    
subPanel.add(chartPanel);   

panelMain.add(subPanel);        
frame.add(panelMain);        
frame.pack();
frame.setLocationRelativeTo(null);
frame.setVisible(true); 
```

现在，当您调整窗口应用程序的大小时。您的 chartPanel 将自动调整大小。希望这可以帮助。

# javascript - 为什么我的必应翻译代码在除 Google Chrome 之外的所有浏览器中都能完美运行？

> ID：13229098
> 
> 赞同：3
> 
> 时间：2012-11-05T09:20:27.600
> 
> 标签：javascript, api, bing

我有一个简单的必应翻译示例，但它不适用于谷歌浏览器。

我不明白是 bing 问题还是我的代码错误。

这是我的示例的代码

```
<!doctype html>
<html> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">  
   function translate() {
   document.getElementById('trans').innerHTML="";
   var text= document.getElementById('ori').value;
   window.mycallback = function(response) {
   document.getElementById('trans').innerHTML=response;
   }

   var languageFrom = document.getElementById("langpairFROM").value;
   var languageTo = document.getElementById("langpairTO").value;
   var s = document.createElement("script");
   s.src = "http://api.microsofttranslator.com/V2/Ajax.svc/Translate?oncomplete=mycallback&appId=68D088969D79A8B23AF8585CC83EBA2A05A97651&from=" + languageFrom + "&to=" + languageTo + "&text=" + text;
document.getElementsByTagName("head")[0].appendChild(s);
   }
</script>
</head>

<body>
<center>

<select id="langpairFROM" STYLE=" font-size : 11pt">
  <option value="de">German</option>
  <option value="en">English</option>
  <option value="ru">Russian</option>                                         
</select>

<select id="langpairTO" STYLE=" font-size : 11pt">
  <option value="ru">Russian</option>
  <option value="de">German</option>
  <option value="en">English</option>  
</select>

<button type="input" onclick="translate()" >Translate</button> 

<div >
  <textarea id="ori" name="translate" ></textarea> 
</div>

<div id="translationField">
  <textarea id="trans" >Translated Text</textarea> 
</div
</center>
</body> 

</html> 
```

[这是 jsfiddle 示例](http://jsfiddle.net/n9YLp/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:58:34.233

因为你也有一个`<textarea>`名为`translate`.

更改函数名称或`<textarea>`名称：

[JSFidde](http://jsfiddle.net/n9YLp/1/)

PS。我假设您`encodeURIComponent`在生产代码中使用类似“清理”您的网址的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T23:13:22.497

我已经修改了你的代码。它现在也适用于 Chrome

```
<!doctype html>
<html> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">  
  function translate() {
  document.getElementById('translate_to').innerHTML="";
  var text= document.getElementById('translate_from').value;
  window.mycallback = function(response) {
  document.getElementById('translate_to').innerHTML=response;
}

var languageFrom = document.getElementById("langpairFROM").value;
var languageTo = document.getElementById("langpairTO").value;
var s = document.createElement("script");
s.src = "http://api.microsofttranslator.com/V2/Ajax.svc/Translate?oncomplete=mycallback&appId=68D088969D79A8B23AF8585CC83EBA2A05A97651&from=" + languageFrom + "&to=" + languageTo + "&text=" + text;
document.getElementsByTagName("head")[0].appendChild(s);
}
</script>
</head>
<body>
<form action="javascript:translate()">
<center>
<select id="langpairFROM" STYLE=" font-size : 11pt">
  <option value="de">German</option>
  <option value="en" selected>English</option>
  <option value="ru">Russian</option>                                         
</select>
<select id="langpairTO" STYLE=" font-size : 11pt">
  <option value="ru">Russian</option>
  <option value="de" selected>German</option>
  <option value="en">English</option>  
</select>
<button type="submit">Translate</button> 
<div >
  <textarea id="translate_from" name="translate_from" ></textarea> 
</div>
<div id="translationField">
  <textarea id="translate_to" >Translated Text</textarea> 
</div
</center>
</form>
</body> 
</html> 
```

# boost - 如何避免 boost::program_options 中不存在的参数导致的错误？

> ID：13229101
> 
> 赞同：1
> 
> 时间：2012-11-05T09:20:42.187
> 
> 标签：boost, command-line

我有麻烦`boost::program_options`。我有一个由几个子组件组成的软件，每个子组件都可以声明一些要在命令行上传递的选项。我想坚持以下流程：

1.  使用一些选项配置 boost::program_options
2.  匹配选项
3.  使用匹配的选项来初始化子组件
4.  子组件构造函数声明更多选项
5.  再次匹配选项以配置组件

所以，在执行的某个时刻（2），我只声明了一些选项，但程序实际上是用它们的全部集合（包括将在 3 中声明的那些）调用的，导致了一些`unrecognised option '...'`错误. 我可以抓住那些，但解析无论如何都会停止。我尝试使用多个`options_description`组来处理这个问题，我还研究了命令行样式 ( `style_t`) 以查看其中一个是否允许忽略不匹配的参数。你有更多的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:26:28.817

问题已解决，很抱歉打扰您，但这对某人来说可能会派上用场。而不是使用`parse_command_line`

```
auto parsed = parse_command_line(argc, argv, opts); 
```

调用后显式调用`command_line_parser`的方法`run``allow_unregistered`

```
auto parsed = command_line_parser(argc, argv).options(opts).allow_unregistered().run(); 
```

# amazon-web-services - 是否可以使用 saml 为 http://aws.amazon.com 执行 sso？

> ID：13229102
> 
> 赞同：5
> 
> 时间：2012-11-05T09:20:44.860
> 
> 标签：amazon-web-services, single-sign-on, saml

`http://aws.amazon.com`使用 saml可以做 sso吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:04:43.357

这是不可能的。他们不支持 SAML 或 OAuth。供你参考

[http://aws.amazon.com/iam/faqs/#Do_you_support_SAML_or_OAuth](http://aws.amazon.com/iam/faqs/#Do_you_support_SAML_or_OAuth)

> 2014 年 9 月 3 日更新
> 
> 目前它支持...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-12T16:18:57.760

自 2013 年 11 月起， AWS 现在[支持 SAML](http://aws.amazon.com/about-aws/whats-new/2013/11/11/aws-identity-and-access-management-iam-adds-support-for-saml-security-assertion-markup-language-2-0/)。

> 我们很高兴地宣布，我们已经扩展了我们的身份联合，以包括对安全断言标记语言 (SAML) 2.0 的支持，这是许多身份提供者使用的开放标准。这项新功能支持联合单点登录 (SSO)，使用户能够通过使用来自符合 SAML 的身份提供商（例如 Shibboleth 和 Windows Active Directory 联合服务）的断言登录到 AWS 管理控制台或对 AWS API 进行编程调用.

此博文中的更多详细信息：[使用 SAML 的 AWS 身份和访问管理](http://aws.typepad.com/aws/2013/11/aws-identity-and-access-management-using-saml.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T00:24:32.227

如果您只需要 SSO 而无需考虑协议，那么 AWS 为管理控制台身份验证提供了一个滚动您自己的 SSO“解决方案”； [http://aws.typepad.com/aws/2012/01/identity-federation-to-aws-management-console.html](http://aws.typepad.com/aws/2012/01/identity-federation-to-aws-management-console.html)

# android-ndk - 如何将新的包含文件添加到 NDK 环境？

> ID：13229107
> 
> 赞同：0
> 
> 时间：2012-11-05T09:21:08.027
> 
> 标签：android-ndk

我想用 NDK 构建一个 android 库，我的代码使用了一个新的包含文件。包含文件是在内核版本 3.1.0 的内核中添加的。但是我的 NDK 环境不包含包含文件（NDK 包含路径：NDK/platforms/android-14/arch-arm/usr/include/linux），所以当我编译我的源代码时，我得到的错误消息是“错误：linux/nfc.h：没有这样的文件或目录”。

我不知道如何为 NDK 环境添加新的包含文件。并且 NDK 包含文件说“ ***此标头是从 Linux 内核标头自动生成的** **同名，使用户空间所需的信息* ****调用 libc 可用的内核。它只包含常量，** **结构和从原始标题生成的宏，因此， ** * 不包含受版权保护的信息。”。****

 ****我可以根据我的 linux 内核编译一个新的 NDK 环境吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:56:39.520

不久前我尝试做同样的事情。虽然我现在无法测试它，但我会尽力回忆并帮助你。默认情况下，在我的构建中我没有libnfc.so（启动后你可以看到logcat。它给出了与libnfc相关的错误消息）。我在三星galaxy nexus S上做了。然后我不得不手动复制库（当然首先使用NDK构建它）和相应的头文件。我认为那里只有 2 或 3 个头文件。你应该这样做。这可能需要一些时间，但应该很容易完成。****

# axapta - 是否可以进行从多个表中获取数据的查找？

> ID：13229108
> 
> 赞同：0
> 
> 时间：2012-11-05T09:21:15.603
> 
> 标签：axapta, dynamics-ax-2009

在 Dynamics Ax 中，我可以使用`sysTableLookup`多列网格来显示组合查找吗？

如何从多个表中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:38:27.610

您可以在查询中加入其他表，请参见下面来自[Axaptapedia的示例](http://www.axaptapedia.com/index.php?title=SysTableLookup_class)

```
public void lookup()
{
  Query                   query = new Query();
  QueryBuildDataSource    dsCustTable;
  QueryBuildDataSource    dsCustTrans;

  // Instantiate sysTableLookup object using table which will provide the visible fields 
  SysTableLookup  sysTableLookup = sysTableLookup::newParameters(tableNum(CustTable), this);
  ;

  // Create the query.  Only select customers where blocked != All and one more more transactions
  // exist with no closed date
  dsCustTable = query.addDataSource(tableNum(CustTable));
  dsCustTable.addRange(fieldNum(CustTable, Blocked)).value(queryNotValue(CustVendorBlocked::All));

  dsCustTrans = dsCustTable.addDataSource(tableNum(CustTrans));
  dsCustTrans.relations(true);
  dsCustTrans.joinMode(JoinMode::ExistsJoin);
  dsCustTrans.addRange(fieldNum(CustTrans, Closed)).value(queryValue(dateNull()));

  // Set the query to be used by the lookup form
  sysTableLookup.parmQuery(query);

  // Specify the fields to show in the form.  In this case we have chosen
  // Account number, name, and dimension one.
  sysTableLookup.addLookupfield(fieldNum(CustTable, AccountNum));
  sysTableLookup.addLookupfield(fieldId2Ext(fieldNum(CustTable, Dimension), 1));

  // Perform the lookup
  sysTableLookup.performFormLookup();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:39:24.900

您可以在查找中使用显示方法从其他表中提取数据。

或者你可以使用这个扩展： http: [//kashperuk.blogspot.co.uk/2008/09/sysmultitableloookup-dynamic-lookups.html](http://kashperuk.blogspot.co.uk/2008/09/sysmultitableloookup-dynamic-lookups.html)

# c - C char 数组连接

> ID：13229111
> 
> 赞同：11
> 
> 时间：2012-11-05T09:21:20.297
> 
> 标签：c, arrays, char, concatenation

我有的：

```
char cmd[50] = "some text here";
char v[] = {'a','s','d','c','b'}; 
```

所以我想`cmd`通过添加一个来自`v`.

明显地：

```
strcat(cmd, v[3]); 
```

不起作用，因为`strcat`不接受`v[n]`参数`n = int`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T09:26:31.603

唔。据我了解，您想从第二个数组中添加一个字符？所以你必须使用

```
 strncat (cmd, &v[3], 1); 
```

:-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-05T09:26:14.057

你的方法有问题。

*   C 字符串必须以 0 字节结尾，即`'\0'`字符。Using`""`会自动添加它，否则您必须自己添加它，并且所有字符串函数都依赖于 0 的存在。

*   您的 v 数组包含字符，而不是字符串，并`strcat`接受字符串。

一种解决方案：

```
char cmd[50] = "some text here";
char *v[] = {"a","s","d","c","b"};
strcat(cmd,v[3]); 
```

这会将您的 char 数组转换为指向 C 字符串的指针数组。

此外，您有责任注意，`cmd[]`包含足够的空间来容纳您使用 strcat 添加到其中的任何内容（在这里它确实如此）。通常最好使用`snprintf`字符串连接，因为它需要目标数组的总大小，*包括*终止 null，并且总是在那里添加 null，所以更难搞砸。原始 char 数组的示例：

```
char cmd[50] = "some text here";
char buf[50];
char v[] = {'a','s','d','c','b'};
snprintf(buf, sizeof buf, "%s%c", cmd, v[3]); 
```

注意：像这样的 sizeof 只有在`buf`真的是一个数组时才有效，`[]`在这里用 like 声明。同样对于 snprintf，使用相同的缓冲区作为目标和格式参数可能会产生意想不到的结果，所以我添加了一个新的目标缓冲区变量。

还有一个 snprintf 示例，仅使用原始的两个数组，附加到 cmd 的当前内容的末尾：

```
snprintf(cmd + strlen(cmd), (sizeof cmd) - strlen(cmd), "%c", v[3]); 
```

很明显，在这种特殊情况下，`strncat(cmd, &v[3], 1)`在其他答案中建议添加 1 个字符要好得多，但 snprintf 的好处是，您可以添加 printf 支持的所有数据类型，而不是字符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T09:28:48.387

不要***使用***这个：

```
strcat(cmd,&v[3]); 
```

`&v[3]`不是指向空终止字符串的指针！改为使用

```
strncat(cmd, &v[3], 1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T09:23:56.107

首先，确保变量“cmd”分配了足够的内存。

其次，对“v[3]”的提及是有符号字节的值。您必须使用以下调用 strncat（不是 strcat）：

```
strncat(cmd,&v[3],1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T09:29:19.997

```
char buf[2];

sprintf(buf,"%c", V[3]);
strcat(cmd, buf); 
```

或者

```
strncat (cmd, &v[3],1); 
```

你不能这样做

```
strcat(cmd,&v[3]); 
```

这会将 V 数组从单元格 3 复制到数组末尾，而不是仅复制 V[3]

我可以建议另一种解决方案

```
int len = strlen(cmd);
cmd[len]=v[3];
cmd[len+1] = '\0'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T09:22:43.850

怎么样

```
strcat(cmd,&v[3]); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-05T09:28:23.650

问题是您也不使用 strcat ：

```
char *strcat (char *dest, const char *src); 
```

因为你这样做

```
char *strcat (char *dest, char src); 
```

所以你必须声明一个 char * 作为你的 char。

# asp.net - 有没有办法在不显示页面过期的情况下抑制浏览器中的历史记录？

> ID：13229114
> 
> 赞同：0
> 
> 时间：2012-11-05T09:21:34.803
> 
> 标签：asp.net, browser, browser-cache

我目前正在建立一个网站 .net/c#。

我正在寻找是否有解决方案来阻止浏览器缓存回发。

我的大部分表单都封装在更新面板中，所以当启用 javascript 时一切正常，然后返回到上一页。

但是，当未启用 javascript，并且我尝试使用下面的代码停止缓存时，我会收到可怕的“页面已过期”消息。我想要的是完全忽略回发。

这是代码：

```
response.Cache.SetCacheability(HttpCacheability.ServerAndNoCache)
response.Cache.SetNoStore() 
```

有什么方法可以实现这一点还是浏览器的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:50:09.627

简而言之 - 没有跨浏览器的方式来阻止页面出现在历史记录中。

执行此操作的经典方法是使用重定向 ( ) 响应 POST 请求`response.Redirect("YourPage.aspx?success=1")`。

另一种选择是使用 UpdatePanel-s（这是您正在做的）或另一种发出 AJAX 请求的机制，而不是经典的浏览器 POST-s。

# r - 在 1 个图中绘制多个 BeanPlot

> ID：13229118
> 
> 赞同：1
> 
> 时间：2012-11-05T09:21:50.140
> 
> 标签：r

我想在一个图表中并排显示 n 个 beanplots。我从 for 循环接收各个值的向量。在每次迭代中，应该生成一个新的 bean 图，并放置在以前的 bean 图旁边。我尝试了几种方法。

1.  将值作为列表传递：

    ```
    allValues <- list()
    pdf("Values")
    for(f in files)
    {
      ...    
      ...
      values = getValues(f)
      allValues <- append(allValues, values)
    }
    beanplot(allvalues, what=c(1,1,1,0))
    dev.off() 
    ```

这给了我奇怪的结果。

我还尝试了一个 data.frame 我尝试将参数“add = T”添加到`beanplot()`命令并放入`beanplot()`for 循环中。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:26:25.857

对添加所有元素的`append`向量进行操作。看来您想将新列表添加到`allValues`. 尝试这个：

```
for(f in files)
{
  ...    
  ...
  values = getValues(f)
  allValues <- append(allValues, list(values))
} 
```

# ios - 如何将 safari 中的数据保存到应用程序文档目录中

> ID：13229119
> 
> 赞同：0
> 
> 时间：2012-11-05T09:21:55.263
> 
> 标签：ios, safari, directory, share, document

我想实现如下功能：

在 safari 中打开一个页面并选择特定内容，如图像并保存，在我的应用程序文档目录中共享。这就像`pocket app`安卓。

# jquery - SVG 动画和 JavaScript

> ID：13229125
> 
> 赞同：2
> 
> 时间：2012-11-05T09:22:22.400
> 
> 标签：jquery, animation, svg

我使用路径和 animateMotion。在我尝试使用 JavaScipt 动态生成它之前，它运行良好。我使用[jQuery SVG](http://keith-wood.name/svgRef.html)

我尝试使用本机方法附加动画代码：

```
 $("#scheme_wrapper").svg();
    var svg=box.svg('get');
    svg.add('<rect x="10" y="10" width="20" height="20" fill="red"><animateMotion id="KKK" path="M300,200 a100,100 0 1,0 -100,100 a100,100 0 0,0 100,-100" dur="20s" rotate="auto" repeatCount="indefinite" /></rect>'); 
```

我看到小的红色矩形，但动画没有开始。但是如果我用这个动画代码创建 svg 文件 - 矩形成功移动。为什么？如何使用 JavaScript 动态创建动画动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:22:09.763

我找到了解决方案：

```
var svg=box.svg('get');
svg.rect(0,0,80,50,{fill:"red",id:"rectObj"});
var motion=document.createElementNS("http://www.w3.org/2000/svg","animateMotion");
motion.setAttribute("dur", "20s");
motion.setAttribute("repeatCount", "indefinite");
motion.setAttribute("path", "M300,200 a100,100 0 1,0 -100,100 a100,100 0 0,0 100,-100");
document.getElementById("rectObj").appendChild(motion); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:36:00.097

您使用的是 Safari 还是 Chrome 对吧？恐怕[动态添加的动画](https://bugs.webkit.org/show_bug.cgi?id=82647)在那里不起作用。请尝试使用 Firefox 或 Opera。

# nhibernate - nHibernate.Search 和 Lucene.Net 3

> ID：13229130
> 
> 赞同：3
> 
> 时间：2012-11-05T09:22:55.147
> 
> 标签：nhibernate, lucene.net, nhibernate-search

nHibernate.Search 最后一次更新是在 2011 年。这个项目还活跃吗？最近，Lucene.Net 3 发布，这是一个主要版本，不向后兼容 v2。我尝试下载 nHibernate.Search 的源代码并将其链接到最新的 Lucene.Net 源代码，但由于它似乎不向后兼容，因此无法编译。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-03T12:17:41.190

几天前 ， **Ryan Barrett**在他的 fork 上更新了 nHibernate Search 。[https://github.com/ryanbnl/NHibernate-Search/tree/lucen3.3](https://github.com/ryanbnl/NHibernate-Search/tree/lucen3.3)

Lucene 3.0.3 和 nHibernate 3.3.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T15:40:07.973

看起来 NHibernate 搜索已移至[GitHub.com](https://github.com/NHibernate-Contrib/NHibernate-Search)，而 darioquintana 是[贡献](https://github.com/NHibernate-Contrib/NHibernate-Search/commits/master)成员之一，并且它是[活跃](https://github.com/NHibernate-Contrib/NHibernate-Search/commits/master)的。

# c++ - 如何使用 C++ win32 API 在登录对话框中显示上次登录用户名？

> ID：13229132
> 
> 赞同：-1
> 
> 时间：2012-11-05T09:23:06.083
> 
> 标签：c++, windows, winapi, dialog, gina

我正在使用 C++ win32 API。

我有一个吉娜登录对话框。

它包含一个用户名文本框。

我想在该文本框中显示上次登录的用户名，当系统重新启动后。

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:09:47.657

如果您使用的是系统登录对话框 (gina)，您可以使用组策略对其进行配置：

[http://support.microsoft.com/kb/324740](http://support.microsoft.com/kb/324740)

将其设置为 false 以防止隐藏用户名。

# eclipse - PMD Eclipse 插件 --> 错误是：无法设置属性

> ID：13229133
> 
> 赞同：1
> 
> 时间：2012-11-05T09:23:08.937
> 
> 标签：eclipse, eclipse-plugin, rad, pmd

我在泡菜。我为 Eclipse 安装了 PMD 插件。但是当我尝试用它检查代码时，我会弹出这个错误：

```
 org.eclipse.core.internal.resources.ResourceException: Could not set property: net.sourceforge.pmd.eclipse.persprops active_rulset. Value is too long. 
```

现在我该怎么做才能摆脱这个错误？

# jquery - jQuery：如何切换圆形 div，并从中心开始切换？（从中心展开）

> ID：13229134
> 
> 赞同：0
> 
> 时间：2012-11-05T09:23:11.427
> 
> 标签：jquery, toggle, effect, pageload

语言：**Javascript** | **jQuery** | **PHP** | **HTML5**

我要问的是类似于[**这个问题**](https://stackoverflow.com/questions/6675491/animate-a-div-and-expand-from-center)。

我需要在第一页加载时**从中心（而不是从左上角）长出一个“气泡”（圆形的东西）。**

我可以使用**负边距**来实现这一点，**[这是我迄今为止所拥有的演示](http://likebam.com/test/test.php)**。

下面的代码：

```
$(document).ready(function(){   
$('.bubble').animate({
opacity: 1,
width: ['toggle', 'swing'],
height: ['toggle', 'swing'],
margin: '-25%'
  }, 800, function() { 
```

但问题是，我将它与“悬停”效果一起使用，（悬停时）应该将气泡从中间扩大到 10%。JS 在**[这里](https://stackoverflow.com/a/13208118/1399030)**找到。

现在，初始页面加载的负边距设置为 -25%，因为这是使其居中的唯一方法，但悬停效果使用 div 的 CSS 的边距，这与最初加载的 -25% 边距不相一致.

我想要完成的正是它在此页面上的完成方式：[https ://www.vizify.com/rand-fishkin](https://www.vizify.com/rand-fishkin)

*   气泡最初在页面加载时加载（从中心展开）
*   悬停时气泡会增长（从中心扩大当前大小的 10%）

我现在一无所知，我该怎么做？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:10:59.883

我通过将第二段代码作为回调（在加载气泡后）放入其中找到了**答案**。

```
$(document).ready(function(){

// LOAD BUBBLES

    $('.bubble').animate({
    opacity: 1,
    width: ['toggle', 'swing'],
    height: ['toggle', 'swing'],
    margin: '-25%'
  }, 400, function() {

// NOW, LOAD HOVER EFFECTS

        $(".bubble").on('scale', function(e, s) {
            var data = $.data(this, 'size'),
                w = data.width,
                h = data.height;
            $(this).stop().animate({
                width: w * s,
                height: h * s,
                marginLeft: data.marginLeft - w * (s-1) / 2,
                marginTop: data.marginTop - h * (s-1) / 2
            });
        }).each(function() {
            var $this = $(this);
            $.data(this, 'size', {
                width: $this.width(),
                height: $this.height(),
                marginLeft: parseInt($this.css('margin-left')),
                marginTop: parseInt($this.css('margin-top'))
            });
        }).hover(function() {
            $(this).trigger('scale', [1.2])
        }, function() {
            $(this).trigger('scale', [1.0])

        });

    });
}); 
```

# mysql - 在 MySQL 中获取一年中的最后 4 个月？

> ID：13229138
> 
> 赞同：1
> 
> 时间：2012-11-05T09:23:29.017
> 
> 标签：mysql, sql

我是mysql的新手。我想从 sql 中了解最近 4 个月的名称。

喜欢

```
 SELECT TO_CHAR(ADD_MONTHS(SYSDATE, -level), 'Month') AS month
    FROM dual
    CONNECT BY LEVEL < 4 
```

但是如何用mysql做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:35:18.797

也许你可以这样做：

```
SELECT monthname(date_add(now(), INTERVAL -1 MONTH))  union all
SELECT monthname(date_add(now(), INTERVAL -2 MONTH)) union all
SELECT monthname(date_add(now(), INTERVAL -3 MONTH)) union all
SELECT monthname(date_add(now(), INTERVAL -4 MONTH)) 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!2/d41d8/3401)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T10:00:17.767

@JoeGJoseph 的答案是我想要的，但这是一个基于过程的示例。这允许您将可变数量的月份传递给过程并返回前一个月的名称。它不漂亮，可能无法正常工作并且充满错误，但我想这很有趣？[你可以在这里](http://sqlfiddle.com/#!2/61ee1/1)看到小提琴，这里是过程代码（请注意，这可能需要调整以在 SQLFiddle 之外工作，但我现在无法在其他任何地方测试它:)）：

```
DROP TABLE IF EXISTS my_months;
CREATE TABLE my_months (month_name VARCHAR(200));

CREATE PROCEDURE LAST_MONTHS(IN num_months INT(10))
BEGIN
      DECLARE a INT Default -1 ;
      simple_loop: LOOP
         SET a=a+1;
         INSERT INTO my_months VALUES 
             (MONTHNAME(DATE_ADD(CURRENT_DATE, INTERVAL-a MONTH)));
         IF a=num_months - 1 THEN
            LEAVE simple_loop;
         END IF;
   END LOOP simple_loop;
END// 
```

然后您可以从主查询中调用它，例如：

```
CALL LAST_MONTHS();
SELECT * FROM my_months; 
```

不过，我会选择@JoeGJoseph，因为这可能有点矫枉过正，而且他更优雅:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:34:43.260

```
SELECT DATE_FORMAT(curdate(), '%M') month_name
union
SELECT DATE_FORMAT(date_add(curdate(),interval -1 month), '%M') month_name
union
SELECT DATE_FORMAT(date_add(curdate(),interval -2 month), '%M') month_name 
```

# jquery - 在 jQuery UI 1.9 中获取选项卡选定的 ID

> ID：13229139
> 
> 赞同：0
> 
> 时间：2012-11-05T09:23:33.550
> 
> 标签：jquery, jquery-ui-tabs

如何在 jQuery UI 1.9 中获取选项卡选择的 ID？

我在 jQuery UI 1.8 中使用了这个方法：

```
var key = $('#chart-report-tabs .ui-tabs-panel:not(.ui-tabs-hide)').prop('id'); 
```

但它在 1.9 版本中不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:29:00.233

尝试这个：

```
$('#chart-report-tabs .ui-tabs-panel[aria-hidden="false"]').prop('id'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:43:43.193

试试这个：

```
$("#<id of tabs>").tabs("option","active") 
```

返回活动选项卡的从零开始的索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:55:34.647

尝试这个：

```
var $tabs = $('#chart-report-tabs');
var index = $tabs.tabs('option', 'selected');
var key = $tabs.tabs("option", "panel").find('.ui-tabs-panel').eq(index).prop('id'); 
```

来源：[jQuery UI Tabs 选择索引](http://webcache.googleusercontent.com/search?q=cache%3a-twb186m9jsJ%3astackoverflow.com/questions/5016541/jquery-ui-tabs-selected-index%20&cd=1&hl=en&ct=clnk&gl=by)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T11:59:37.100

使用`activate`or`beforeActivate`事件`ui.newPanel`：

```
$('#chart-report-tabs').tabs({
  activate: function(e, ui) {
    var key = $(ui.newPanel).prop('id');
  }
}); 
```

### [检查文档](http://api.jqueryui.com/tabs/#event-activate)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-03-11T05:39:21.640

```
$('#divName .ui-tabs-panel[aria-hidden="false"]').prop('id'); 
```

# xml - 什么是 xpath 语法来获取一个元素在另一个元素中的第 1 次、第 2 次和第 3 次出现

> ID：13229140
> 
> 赞同：0
> 
> 时间：2012-11-05T09:23:45.770
> 
> 标签：xml, xpath, asp-classic, jscript

我有以下 xml 文档（我已经清除了不相关的数据）：

```
<?xml version="1.0"?>
<NewOrderNotification xmlns="http://payments.amazon.com/checkout/2008-11-30/">
  <ProcessedOrder>
    <ShippingServiceLevel>blah</ShippingServiceLevel>
    <ProcessedOrderItems>
      <ProcessedOrderItem>
        <AmazonOrderItemCode>blah</AmazonOrderItemCode>
        <Price>
          <Amount>0.2</Amount>
          <CurrencyCode>GBP</CurrencyCode>
        </Price>
        <ItemCharges>
          <Component>
            <Type>Principal</Type>
            <Charge>
              <Amount>0.2</Amount>
              <CurrencyCode>GBP</CurrencyCode>
            </Charge>
          </Component>
          <Component>
            <Type>Shipping</Type>
            <Charge>
              <Amount>0.95</Amount>
              <CurrencyCode>GBP</CurrencyCode>
            </Charge>
          </Component>
          <Component>
            <Type>PrincipalPromo</Type>
            <Charge>
              <Amount>0.0</Amount>
              <CurrencyCode>GBP</CurrencyCode>
            </Charge>
          </Component>
          <Component>
            <Type>ShippingPromo</Type>
            <Charge>
              <Amount>0.0</Amount>
              <CurrencyCode>GBP</CurrencyCode>
            </Charge>
          </Component>
        </ItemCharges>
        <ShippingCustomData>null</ShippingCustomData>
      </ProcessedOrderItem>
    </ProcessedOrderItems>
  </ProcessedOrder>
</NewOrderNotification> 
```

我想知道用于获取 5 个不同`<Amount>`元素中的每个值的 xpath 语法：

即我如何提取以下各项：

*   NewOrderNotification - ProcessedOrder - ProcessedOrderItems - ProcessedOrderItem - 价格 - 金额

*   NewOrderNotification - ProcessedOrder - ProcessedOrderItems - ProcessedOrderItem - ItemCharges - 组件（类型=原则） - 费用 - 金额

*   NewOrderNotification - ProcessedOrder - ProcessedOrderItems - ProcessedOrderItem - ItemCharges - 组件（类型=Shipping） - 费用 - 金额

*   NewOrderNotification - ProcessedOrder - ProcessedOrderItems - ProcessedOrderItem - ItemCharges - 组件（类型=PrincipalPromo） - 费用 - 金额

*   NewOrderNotification - ProcessedOrder - ProcessedOrderItems - ProcessedOrderItem - ItemCharges - 组件（类型=ShippingPromo） - 费用 - 金额

**请注意**根元素中的 xmlns。

这是我用来提取元素的 JScript 代码：

```
var xmlDoc = Server.CreateObject("Msxml2.DOMDocument.6.0");
xmlDoc.setProperty("SelectionNamespaces", "xmlns:a='http://payments.amazon.com/checkout/2008-11-30/'");
xmlDoc.loadXML(xml);
var node = xmlDoc.documentElement.selectSingleNode("XPATH_IN_HERE");
return node.text; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:33:05.033

您可以获得的第一笔金额：

```
//Price/Amount/text()
#=> "0.2" 
```

对于其他四个，您可以使用前面的兄弟`Type`元素的文本来获取它们的值：

```
//Charge[preceding-sibling::Type="Principal"]/Amount/text()
#=> "0.2"

//Charge[preceding-sibling::Type="Shipping"]/Amount/text()
#=> "0.95"

//Charge[preceding-sibling::Type="PrincipalPromo"]/Amount/text()
#=> "0.0"

//Charge[preceding-sibling::Type="ShippingPromo"]/Amount/text()
#=> "0.0" 
```

我认为这样做。（如果我误解了你的问题，请告诉我。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:43:00.783

或者，如果您喜欢缩写的绝对路径

```
'/NewOrderNotification/ProcessedOrder/ProcessedOrderItems/ProcessedOrderItem/ItemCharges/Component[Type="Shipping"]/Charge/Amount/text()' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:44:14.953

我将我快速而肮脏的 xpaths 放在下面的 xslt 脚本中。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:test="http://payments.amazon.com/checkout/2008-11-30/">
    <xsl:output indent="yes"/>

    <!-- Standard if you can define namespaces -->
    <xsl:variable name="amount1" select="//test:Price/test:Amount"/>
    <!-- for cases with namespace problems -->
    <xsl:variable name="amount2" select="//*[local-name() = 'Component'][1]/*[local-name() = 'Charge']/*[local-name() = 'Amount']"/>
    <!-- you can add the other in the same way -->

    <xsl:template match="/">
        <test>
        <variable1><xsl:value-of select="$amount1"/></variable1>    
        <variable2><xsl:value-of select="$amount2"/></variable2>
        </test> 
    </xsl:template>
</xsl:stylesheet> 
```

# ios - 如何在iphone中比较当前日期和上一个日期？

> ID：13229142
> 
> 赞同：9
> 
> 时间：2012-11-05T09:24:06.753
> 
> 标签：ios, iphone, xcode, nsdate

我想将当前日期与另一个日期进行比较，如果该日期早于当前日期，那么我应该停止下一步操作。我怎样才能做到这一点？

我有今天的日期`yyyy-MM-dd`格式。我需要检查这种情况

```
if([displaydate text]<currentdate)
{
    //stop next action 
} 
```

如果`displaydate`小于今天的日期，则必须输入该条件。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-05T09:27:59.387

```
NSDate *today = [NSDate date]; // it will give you current date
NSDate *newDate = [dateFormatter dateWithString:@"xxxxxx"]; // your date 

NSComparisonResult result; 
//has three possible values: NSOrderedSame,NSOrderedDescending, NSOrderedAscending

result = [today compare:newDate]; // comparing two dates

if(result==NSOrderedAscending)
    NSLog(@"today is less");
else if(result==NSOrderedDescending)
    NSLog(@"newDate is less");
else
    NSLog(@"Both dates are same"); 
```

从这个答案中得到了你的解决方案[How to compare two dates in Objective-C](https://stackoverflow.com/questions/949416/how-to-compare-two-dates-in-objective-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:31:34.957

**替代**`@NNitin Gohel's`答案。

使用`NSTimeInterval`ie进行比较`NSDate` `timeIntervalSince1970`：

```
NSTimeInterval *todayTimeInterval = [[NSDate date] timeIntervalSince1970];
NSTimeInterval *previousTimeInterval = [previousdate timeIntervalSince1970];

if(previousTimeInterval < todayTimeInterval)
   //prevous date is less than today
else if (previousTimeInterval == todayTimeInterval)
   //both date are equal
else 
   //prevous date is greater than today 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:29:12.687

你可以仔细看看这个[关于 NSDateFormatter 的教程](http://mobiledevelopertips.com/cocoa/date-formatter-examples.html)，当你有你的 NSDate 对象时，你可以将它与另一个 NSDate 进行比较并得到一个 NSTimeInterval ，它是以秒为单位的差异。

```
NSDate *nowDate = [NSDate date];
NSTimeInterval interval = [nowDate timeIntervalSinceDate:pastDate]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T09:32:09.923

类的一些方法`NSDate`是：

1.  `isEarlierThanDate`. // 使用这个方法你可以找出日期是不是以前的..
2.  `isLaterThanDate`
3.  `minutesAfterDate`.
4.  `minutesBeforeDate`. ETC..

还可以在 iPhone SDK 中使用 NSDate 的许多方法查看此链接。

[如何使用 iphone-sdk 与现实世界约会](http://arstechnica.com/apple/2010/03/how-to-real-world-dates-with-the-iphone-sdk/2/)

**更新**

```
//Current Date
    NSDate *date = [NSDate date];
    NSDateFormatter *formatter = nil;
    formatter=[[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd"]; 
```

使用此波纹管方法将 NSString 日期转换为 NSDate 格式只需将此方法粘贴到 your.m 文件中

```
- (NSDate *)convertStringToDate:(NSString *) date {
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
NSDate *nowDate = [[[NSDate alloc] init] autorelease];
[formatter setDateFormat:@"yyyy-MM-dd"];
// NSLog(@"date============================>>>>>>>>>>>>>>> : %@", date);
date = [date stringByReplacingOccurrencesOfString:@"+0000" withString:@""];
nowDate = [formatter dateFromString:date];
// NSLog(@"date============================>>>>>>>>>>>>>>> : %@", nowDate);
return nowDate;
} 
```

之后，当您想使用它时，只需像下面这样使用..

```
NSDate *tempDate2 = [self convertStringToDate:yourStringDate]; 
```

然后尝试像这样比较..

```
if (tempDate2 > nowDate) 
```

# javascript - 在服务器、客户端（JS、Ajax？）上读取文本文件

> ID：13229145
> 
> 赞同：0
> 
> 时间：2012-11-05T09:24:17.337
> 
> 标签：javascript, jquery, ajax, text-files, client-side

我想读取文本文件中的特定字符，所以我基本上想要一个函数，如果我写`function getLetter(3)`，它将返回第三个字母，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:28:47.683

通常，您至少应该展示您在问题中尝试过的内容，以便在 StackOverflow 上获得答案，但今天早上我感觉很慷慨。

试试这个：

```
function getLetter(index) {
    $.ajax({
        url: 'my_text_file.txt',
        dataType: 'text',
        success: function(text) {
            var letter = text.substring(index, 1);
            // do something with letter here...
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:28:03.773

[使用XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)获取文件，然后使用[`substring`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring).

# java - 删除字符串中的某些字符，Java

> ID：13229157
> 
> 赞同：0
> 
> 时间：2012-11-05T09:25:08.390
> 
> 标签：java, android, regex, string

我的问题是我想在字符串的某些部分删除字符，但我不知道如何限制删除。

例子：

```
A computer is a general purpose device that can be\n
programmed to carry out a finite set of\n 
millions to billions of times more capable.\n
\n
In this era mechanical analog computers were used\n
for military applications.\n
1.1 Limited-function early computers\n
1.2 First general-purpose computers\n
1.3 Stored-program architecture\n
1.4 Semiconductors and\n 
```

这个这里的例子是我的字符串的内容，我想要发生的是删除`\n`上面的第 1 行和第 2 行，而不是从`\n`第 5 行开始删除。**我如何删除`\n`而不删除另一个`\n`？**. 我的目标是使字符串成为没有`\n`后行的段落。像示例一样，前 3 行可以是一个段落，下一行是项目符号形式（示例）。我的意思是我不想删除`\n`项目符号字符。

字符串的真实内容是动态的。

我已经尝试`String.replaceAll("\n", " ")`清楚地使用它不会起作用它会删除所有`\n`我想`Regex`用来确定什么是 Alphanumberic 但它会在之后删除一些字母`\n`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T09:46:24.733

尝试使用这个正则表达式： -

```
str = str.replaceAll("(.+)(?<!\\.)\n(?!\\d)", "$1 ");
System.out.println(str); 
```

这将替换您的`\n`if 它是`not preceded`a `dot - termination of a paragraph`，它是`not followed`a `digit`，因为它后面是一个项目符号点。（例如，您`\n`的第一个项目符号后跟一个`1.2`. 因此，它不会被替换。）。

*   `(.+)`一开始，确保您没有替换`blank line`.

这将适用于您显示的字符串。

**解释： -**

*   `(.+)`-> 一个捕获组，捕获任何东西，至少发生一次。

*   `(?<!\\.)`-> 这叫做`negative-look-behind`. 它匹配`string`后面的它，仅当该字符串前面没有模式`dot(.)`中的给定值时`negative-look-behind`。
    **例如： -**您不需要`\n`在以下行之后替换： - `millions to billions of times more capable.\n`。

*   `(?!\\d)`-> 这叫做`negative -look-ahead`. 它匹配它后面的字符串，只有当该字符串后面没有跟随模式`digit (\\d)`中的给定值时`negative-look-ahead`。
    **例如： -**在您的项目符号中，`computers\n`后跟`1.2`. 哪里`1`是数字。所以，你不想替换那个`\n`.

*   现在，`$1`并`$2`表示在模式匹配中捕获的组。由于您只想替换`"\n"`. 因此，我们将剩余的模式匹配原样采用，同时替换`"\n"`为`space`.

所以，`$1`是代表`1st group`-`(.+)`

注意，正`look-ahead`则`look-behind`表达式是`non-capturing`组。

**有关更多详细信息，请点击以下链接：-**

*   [http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)

*   [http://docs.oracle.com/javase/tutorial/essential/regex/quant.html](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:41:07.247

我怀疑您的要求是删除第 1 行和第 2 行的 \n 。
你可以做的如下：

*   把你的字符串分成几段，

*   String[] 数组 = yourString.split("\n");

*   通过添加 \n 标记连接每个段，第 1,2 行除外

*   数组[1] + 数组[2] + 数组[3] + '\n' + 数组[4] + '\n' ...// 以此类推

# php - 用于匹配分隔符和后缀的正则表达式，都是可选的

> ID：13229159
> 
> 赞同：0
> 
> 时间：2012-11-05T09:25:19.203
> 
> 标签：php, regex

我有一个可能包含分隔符的字符串。这可能意味着我有三种情况：

```
First and only paragraph 
```

* * *

```
First and only paragraph with redundant separator
<!-- separator --> 
```

* * *

```
First paragraph
<!-- separator -->
Second paragraph 
```

我需要一个正则表达式，分别返回第一段和第二段（如果存在）。这是我到目前为止所尝试的：

```
(.*)(<!-- separator -->.*)  // fails case 1
(.*)(<!-- separator -->.*)? // fails case 2 and 3 (surprise) 
```

我只需要模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:33:20.090

问题可能是，`.`默认情况下不匹配换行符。您可以使用修饰符来更改它`s`。

```
/(.*)(<!-- separator -->.*)?/s 
```

`s`是单行修饰符，它使正则表达式将输入字符串视为“单行”，这意味着`.`也将匹配换行符。

但是你应该使量词不贪婪，否则第一个`.*`将匹配到`<!-- separator -->`字符串中的最后一个。

```
/(.*?)(<!-- separator -->.*)?/s 
```

# jquery - 将值从 jQuery 下拉列表传递到 simplecart.js

> ID：13229162
> 
> 赞同：1
> 
> 时间：2012-11-05T09:25:29.577
> 
> 标签：jquery, dropdownbox

我已经失去了至少两天的生命，试图将一些信息从我的下拉列表传递到 simplecart js 购物车，所以任何帮助都将不胜感激。

我正在尝试将“make”下拉列表中的值以及“model”下拉列表中的值传递给 simplecartjs，但我不确定如何执行此操作。我的第二个下拉列表是根据第一个下拉列表的选择填充的。如何创建读取这些值的添加到购物车按钮？这是下拉代码：

```
<script>
$(function() {

    $("#json-one").change(function() {

        var $dropdown = $(this);

        $.getJSON("compatibility.json", function(data) {

            var key = $dropdown.val();
            var vals = [];

            switch(key) {
                case 'Canon':
                    vals = data.Canon.split(",");
                    break;
                case 'Nikon':
                    vals = data.Nikon.split(",");
                    break;
                case 'base':
                    vals = ['Please choose from above'];
            }

            var $jsontwo = $("#json-two");
            $jsontwo.empty();
            $.each(vals, function(index, value) {
                $jsontwo.append("<option>" + value + "</option>");
            });

        });
    });

});
</script> 
```

这是下拉html：

```
<select id="json-one">
    <option selected value="base">Camera Model</option>
    <option value="Canon">Canon</option>
    <option value="Nikon">Nikon</option>
</select>

<br />

<select id="json-two">
    <option>Please choose from above</option>
</select> 
```

对于我的生活，我无法弄清楚如何阅读这些选择并将它们传递给添加到购物车按钮。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:34:51.883

这行不通吗？（几乎取自 simplecartjs.org 文档）

如果不满足要求，则返回 false。

```
<script>
    $(function(){
        /* current stuff */
    })();

    simpleCart.bind( 'beforeAdd' , function( item ){
        if( item.get( 'make' ) === '' || item.get( 'model' ) === ''){
            // If the dropdowns are empty or it you set them to none etc
            alert('Please remember to select a make and model');
            return false; // prevents item from being added to cart
        }
    });
</script> 
```

然后将您的下拉菜单放入货架项目..

```
<div class="simpleCart_shelfItem">
    <h2 class="item_name"> Awesome T-shirt </h2>
    <p>
        <select class="item_make" id="json-one">
            <option selected value="base">Camera Model</option>
            <option value="Canon">Canon</option>
            <option value="Nikon">Nikon</option>
        </select>

        <br />

        <select class="item_model" id="json-two">
            <option>Please choose from above</option>
        </select>

        <br />

        <input type="text" value="1" class="item_Quantity"><br>
        <span class="item_price">$xx.xx</span><br>
        <a class="item_add" href="javascript:;"> Add to Cart </a>
    </p>
</div> 
```

# mono.cecil - Mono.Cecil 修改方法的 RVA

> ID：13229165
> 
> 赞同：0
> 
> 时间：2012-11-05T09:25:39.473
> 
> 标签：mono.cecil

我想使用 Mono.Cecil 修改方法的 RVA。我注意到 2007 年有人问过类似的问题，但这在 0.95 中可行吗？

例如：methodA.RVA = 0x1234;

我了解 Mono.Cecil 在编译期间计算和编写 RVA，但无论如何要修改 RVA？不过，它可以使用 CFF 资源管理器来完成。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:28:56.610

不，这是不可能的：这根本不是 Mono.Cecil 的目标。

Cecil 允许您读取、修改和编写托管代码和元数据，但是当涉及到 PE 文件组织时，这被认为是实现细节。

# ios - 在界面构建器中设计的自定义视图未显示

> ID：13229170
> 
> 赞同：0
> 
> 时间：2012-11-05T09:26:11.767
> 
> 标签：ios, uiview, interface-builder

我创建了一个 nib 文件“tableHeaderView”，在其中添加了一些标签和图像。然后，我创建了一个新类“tableHeaderViewClass”作为 UIView 的子类，并将 nib 文件中的不同元素连接到该类。然后在界面生成器中，我将 nib 文件的自定义类属性设置为：tableHeaderViewClass

在我的表视图控制器中，我希望我能做到以下几点：

```
tableHeaderViewClass *headerview = [[tableHeaderViewClass alloc] initWithFrame:frame];
headerview.titlelabel.text = @"Something";
[self.tableView setTableHeaderView:headerview]; 
```

但什么也没有发生。除了框架定义的空间外，没有任何视图元素。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:33:46.240

如果您创建了一个 nib，则从 NSBundle loadNibName 为您的自定义视图获取一个实例

```
tableHeaderViewClass *headerview = [[[NSBundle mainBundle] loadNibNamed:@"tableHeaderViewClass" owner:self options:nil] lastObject];
headerview.titlelabel.text = @"Something";
[self.tableView setTableHeaderView:headerview]; 
```

我假设您的笔尖名称是“tableHeaderViewClass”

# jquery - jquery动态修改html页面的参数

> ID：13229174
> 
> 赞同：0
> 
> 时间：2012-11-05T09:26:21.780
> 
> 标签：jquery, solrj

我有一个从 Solr 索引获取结果的函数。代码如下：

```
AjaxSolr.theme.prototype.result = function (doc, snippet) {
 var figrhtmlocation=doc.imagelocation;
 var pdfl=doc.filelocation;
 var output = '<div> <h2>' + doc.caption+'</h2>';
 var figlink='<a href="" onclick="show_figure_html\('+'\''+figrl+'\''+'\)"> <p> See Figure </a>';
 var pdlink='<A href="'+pdfl+'"> \t See pdf </p> </A>';
 output+=figlink;
 output+=pdlink;
 output += '<p>' + snippet + '</p></div>';
 return output;
}; 
```

如您所见，我正在为每个结果创建一个链接，称为“见图”。现在，当我单击该链接时，在我的 show_figure_html 函数中，我想做以下事情：

1.  在新窗口或现有窗口中打开一个 html 页面（比如 figuredescription.html）。

2.  figuredescription.html 页面有一个 div 元素 figuredisplay，我想在其中动态附加 figrlocation 作为图像文件的源。类似于在 figuredescription.html div 元素中附加图像位置。

我怎么能用jquery做到这一点？我对此很陌生，所以如果这个问题显得幼稚，请原谅我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:50:53.797

要在新窗口中打开，请将您的代码更改为此

```
 var figlink='<a href="" target="_blank" onclick="show_figure_html\('+'\''+figrl+'\''+'\)"> <p> See Figure </a>'; 
```

在您的 figuredescription.html 上，只需添加

```
$(function(){
  $(figuredisplay).html('your source for image ie figrlocation ')
}) 
```

这里 figuredisplay 可以是您元素的类或元素的 id。如果类则使用（'.figuredisplay'）和id使用（'#figuredisplay'）

# c# - 在两个 IEnumerable 上编译具有多个输入参数的 lambda 表达式

> ID：13229179
> 
> 赞同：1
> 
> 时间：2012-11-05T09:26:42.183
> 
> 标签：c#, .net, join, ienumerable, expression

我有两个`IEnumerables`调用`IEnumerable<TBL_Country>`，`IEnumberable<TBL_City>`它们的表定义来自我的 ORM，我想执行以下表达式函数以加入 IEnumerables，但这是不可能的。任何想法！

```
IEnumerable<TBL_COUNTRY> country = new IEnumerable<TBL_Country>();
IEnumerable<TBL_COUNTRY> city = new IEnumerable<TBL_CITY>();
Expression<Func<TBL_COUNTRY,TBL_CITY,bool>> func =
    (p,q) => p.fk_city_id = q.pk_city_id & p.name = "SomeName"; 
```

# php - 使用php webservice中的nusoap将数据作为xml从客户端发送到服务器

> ID：13229180
> 
> 赞同：1
> 
> 时间：2012-11-05T09:26:52.073
> 
> 标签：php, xml, nusoap

我想在 php webservice 中使用 nusoap 将数据作为 xml 从客户端发送到服务器。我可以将它作为数组发送。这是我的代码。

客户

```
 <?php
$name='admin';
$pass='admin';
if(isset($_POST['submit'])){
require_once('lib/nusoap.php');
$client = new nusoap_client('http://localhost/web_service/server.php?wsdl', true);
$err = $client->getError();
if ($err) {
echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
  }
  $result = $client->call('login', array('name' => $name,'pass'=>$pass));
 if ($client->fault) {
echo '<h2>Fault</h2><pre>';
print_r($result);
echo '</pre>';
  } else {
$err = $client->getError();
if ($err) {
    echo '<h2>Error</h2><pre>' . $err . '</pre>';
} else {
    echo '<h2>Result</h2><pre>';
    print_r($result);
echo '</pre>';
}
   }
   }
   ?> 
```

服务器

```
 <?php
require_once('lib/nusoap.php');
$server = new soap_server();
$server->configureWSDL('server', 'urn:server');
$server->register('login',
array('name' => 'xsd:string','pass'=>'xsd:string'),     
array('return' => 'xsd:string'),    
'urn:server',                   
'urn:server#login',             
'rpc',                              
'encoded',                          
'Login Authentication'
    );

    function login($name,$pass) {
   if($name && $pass == 'admin'){
   return 'Welcome, ' . $name;
   }
   else{
   return '<h2>Oops,</h2> looks like something went wrong. Please try again';
    }
      }
  $HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '';
    $server->service($HTTP_RAW_POST_DATA);
     ?> 
```

我希望将变量 $name 和 $pass 作为 xml 发送到服务器，并且需要服务器解析 xml 并获取值。这可能吗。

# java - 从java中的调用方法中断

> ID：13229185
> 
> 赞同：0
> 
> 时间：2012-11-05T09:27:17.260
> 
> 标签：java

我有两种方法：

```
public void test() {
    for (int i = 0; i <= 10; i++) {
        a();
    }
}

public void a() {
    // ...
} 
```

假设`test`方法是固定的，我不能修改它。

如何打破`a`方法中的 for 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:29:17.157

您可以抛出未经检查的异常。

另一种解决方案是对具有第一个方法的类进行子类化并对其进行修复，以便它可以提前停止，例如如果 a() 返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:59:07.973

您可以抛出异常，或者您可以简单地使用`break;`. 这是少一点的工作，因为您根本不需要处理异常。
例子：

```
public class Test
{

    public static void main(String[] args)
    {
        foo();
    }

    public static void foo()
    {
        int i = 0;

        for(i = 0; i <= 10; i++)
        {
            System.out.println("in loop: " + i);
            if(i == 5) break;
        }
        System.out.println("end value: " + i);
        System.out.flush();
    }
} 
```

的最终值为`i`5。

# ruby-on-rails-3 - Ruby on Rails 方法

> ID：13229191
> 
> 赞同：0
> 
> 时间：2012-11-05T09:27:44.763
> 
> 标签：ruby-on-rails-3

我希望更深入地研究 Ruby On Rails，并且有兴趣在方法方面寻求更多知识。我知道 rails api 文档，但不熟悉很多术语或可以使用特定方法的地方，在这个阶段很有用（希望这是有道理的）。

我要找的是有什么特别的方法我也应该注意，更像是最常用的，只是为了我现在可以练习一下，等我掌握了更好的理解之后，我可以多看一些。

任何对任何人都有帮助的资源或文档，请随时告诉我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:13:23.833

老实说，您可能应该在 Reddit 或 RoR 讨论组中问这个问题。原因是可能没有一个正确的答案。看看这个页面：

[http://www.reddit.com/r/rails/comments/ys318/what_to_read_after_hartls_rails_tutorial/](http://www.reddit.com/r/rails/comments/ys318/what_to_read_after_hartls_rails_tutorial/)

正如 URI 中的标题所暗示的，您绝对应该从 Michael Hartl 的 Rails 教程开始。

另见：

[https://groups.google.com/forum/?hl=en&fromgroups#!forum/rubyonrails-talk](https://groups.google.com/forum/?hl=en&fromgroups#!forum/rubyonrails-talk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:46:15.343

一些资源可能会帮助您：

*   [Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)
*   [Rails 指南](http://guides.rubyonrails.org/index.html)和关于[API](http://api.rubyonrails.org/)
*   一些视频[Rails Cast](http://railscasts.com/)
*   阅读书籍[Rails 3 方式](https://rads.stackoverflow.com/amzn/click/com/0321601661)
*   [轨道上的对象](http://objectsonrails.com/#sec-12_1)

# mongodb - Mongoid：检索 _id 存在于另一个集合中的文档

> ID：13229196
> 
> 赞同：2
> 
> 时间：2012-11-05T09:28:03.973
> 
> 标签：mongodb, mongoid, mongodb-ruby

我正在尝试根据对另一个集合中这些文档的引用的存在从集合中获取文档。

假设我有两个系列`Users`，`Courses`模型如下所示：

*   用户：`{_id, name}`
*   课程：`{_id, name, user_id}`

注意：这只是一个假设的例子，而不是实际的用例。所以让我们假设在`Course`. 让我们瘦`Course as CourseRegistrations`。

在这里，我在`User`中`Course`保持`user_id`对`_Id`的引用`User`。请注意，它存储为字符串。

现在我想检索注册到一组特定课程的所有用户。

我知道可以通过两个查询来完成。那是首先运行一个查询并从该组课程的集合中获取该`users_id`字段。`Course`然后通过使用和上一个查询中检索到的用户 id来查询`User`集合。`$in`但是如果文档的数量在数万或更多，这可能并不好。

有没有更好的方法在一个查询中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:41:05.090

你说的是典型的`sql join`。但这在 mongodb 中是不可能的。正如您已经建议的那样，您可以在 2 个不同的查询中执行此操作。

还有另一种处理方法。它不完全是一个解决方案，而是 NonSql 数据库中的有效解决方法。那就是将最常访问的字段存储在同一个集合中。

您可以将某些`user`集合字段存储在集合内`course`作为嵌入字段。

```
Course : {
   _id : 'xx',
   name: 'yy'
   user:{
       fname : 'r',
       lname :'v',
       pic: 's'
   }  
} 
```

如果您打算从用户集合中检索的字段子集较少，这是一个很好的方法。您可能想知道`course`集合中存储的冗余用户数据，但这正是 mongodb 强大的原因。它是一次性插入，但您的查询会快得多。

# c++ - CalcOpticalFlowLK 相机运动 c++

> ID：13229198
> 
> 赞同：1
> 
> 时间：2012-11-05T09:28:11.120
> 
> 标签：c++, opencv, flow

这次我会知道如何根据 x 和 y 像素坐标计算每一帧的相机运动，我用谷歌搜索过，我发现 CalcOpticalFlowLK 可以做到这一点。我不是opencv方面的专家，我正在寻求您的帮助！谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:33:47.183

是的，OpenCV 可以做到这一点。您应该按照以下站点上的教程开始，然后自己尝试 CalcOpticalFlowLK 实现。如果您在此处卡住您的具体问题（带有代码示例），我很乐意提供帮助。

[http://opencv-srf.blogspot.ie/2010/09/opencv-basics.html](http://opencv-srf.blogspot.ie/2010/09/opencv-basics.html)

然后看

[使用光流的 OpenCV 跟踪](https://stackoverflow.com/questions/9701276/opencv-tracking-using-optical-flow)

# joomla - Joomla 忘记密码问题

> ID：13229205
> 
> 赞同：2
> 
> 时间：2012-11-05T09:28:32.647
> 
> 标签：joomla

我正在为基于 joomla 1.5.26 的应用程序使用 jv_excali 模板。我正在使用默认登录模块。

但是每当我尝试重置密码时，我都没有得到预期的结果。每当我通过邮件复制并粘贴令牌 ID 时，我都会收到“您的密码重置确认失败，因为令牌无效..”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:06:17.467

试试这个方法

**导航**到这个：`template_name/html/com_user/reset/confirm.php`

只需根据链接中的描述添加此代码：

```
<tr> 
  <td height="40">
     <label for="username" class="hasTip" title="<?php echo JText::_('RESET_PASSWORD_USERNAME_TIP_TITLE'); ?>::<?php echo JText::_('RESET_PASSWORD_USERNAME_TIP_TEXT'); ?>"><?php echo JText::_('User Name'); ?>:   </label>
  </td>
  <td> 
       <input id="username" name="username" type="text" class="required" size="36" />
  </td>
</tr> 
```

如需更多信息，请查看此内容[为什么在确认密码重置时会出现令牌错误？](http://docs.joomla.org/Confirm_password_in_1.5.16)

# c# - 原点左/基线的拉绳

> ID：13229206
> 
> 赞同：2
> 
> 时间：2012-11-05T09:28:35.393
> 
> 标签：c#, winapi, gdi

当我使用`Graphics.DrawString(... myPoint)` 字符串的第一个字母的左侧/顶部时，位于 myPoint。

我可以将 DrawString 与 win32 SetTextAlign 结合使用来设置文本原点 `TA_LEFT|TA_BASELINE`还是有一些 .NET 等价物？

如果我在 (100,100) 处绘制一个 Rectangle 并在 (100, 100) 处绘制一个字符串，我希望字符串位于矩形上方（而不是在左上角内部）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:12:23.840

似乎没有内置的方法来执行此操作（即使调用采用[StringFormat](http://msdn.microsoft.com/en-us/library/system.drawing.stringformat.aspx)并在其[LineAlignment属性中指定的](http://msdn.microsoft.com/en-us/library/system.drawing.stringformat.linealignment.aspx)[DrawString()](http://msdn.microsoft.com/en-us/library/d3thd43b.aspx)的重载，如果您提供的矩形足够高，只会导致文本底部对齐）。`StringAlignment.Far`

但是，您可以自己执行计算并相应地修改`Y`您的坐标`PointF`。例如，您可以使用[Font](http://msdn.microsoft.com/en-us/library/system.drawing.font.aspx)类的[Height](http://msdn.microsoft.com/en-us/library/system.drawing.font.height.aspx)属性：

```
yourPoint.Y -= yourFont.Height;
yourGraphics.DrawString(yourText, yourFont, yourBrush, yourPoint); 
```

请注意，上面的代码实际上并没有实现基线对齐（整个字形将位于 中的原始坐标之上`yourPoint.Y`）。真正的基线对齐需要字母的“尾部”部分，如`p`或`y`位于该点下方。它可以用更复杂的东西来实现，比如：

```
FontFamily fontFamily = yourFont.FontFamily;
FontStyle fontStyle = yourFont.Style;
yourPoint.Y -= fontFamily.GetCellAscent(fontStyle) * yourFont.Size
               / fontFamily.GetEmHeight(fontStyle); 
```

# c# - 执行用户身份验证后如何加载 word 应用程序然后加载加载项？

> ID：13229207
> 
> 赞同：0
> 
> 时间：2012-11-05T09:28:39.440
> 
> 标签：c#, windows, c#-4.0, add-in

我有一个包含 3 个项目的解决方案——类库、windows 窗体项目和 Word 插件。Word 插件是启动项目。我想对用户进行身份验证，然后使用加载项加载 Word 应用程序我可以使用 Windows 窗体对用户进行身份验证，但在身份验证之前我不希望加载 Word 应用程序。是否可以延迟 Word 应用程序加载直到执行身份验证？或建议我任何其他解决方法。我以这种方式验证了用户-

```
 private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {  WinProj.Forms.Login loginObj = new WinProj.Forms.Login();
        loginObj.Show();
        loginObj.Focus();
        if (loginObj.UserValidated != null)
            if (loginObj.UserValidated != "")
            {
                EnableDisableAddIn(Application, true);//enable add-in
            }
            else
            {
                EnableDisableAddIn(Application, false);//disable add-in
            }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:56:06.323

我得到了答案。这很简单。登录前我设置

```
 WinProj.Forms.Login loginObj = new WinProj.Forms.Login();
    loginObj.Show();
    loginObj.Focus(); 
    loginObj.Activate();
    Application.Visible = false;; 
```

在登录表单的登录按钮单击事件中，我验证了用户并使应用程序可见。

# javascript - 以编程方式添加 onclick 事件

> ID：13229208
> 
> 赞同：25
> 
> 时间：2012-11-05T09:28:44.723
> 
> 标签：javascript, events, dom-events

如何`onclick`以编程方式将事件添加到 HTML 中的标记？

我希望能够单击一个链接，并使`onclick`附加到 Javascript 函数的事件在另一个标签上生效。

这是我到目前为止所拥有的：

```
var table = document.getElementById(tableID);
var rowCount = table.rows.length;
var row = table.insertRow(rowCount); 
var cell1 = row.insertCell(0); 
var element1 = document.createElement("input");
element1.type = "text";
element1.id="List["+num+"].id";
element1.name="List["+num+"].id";
element1.onclick="javascript:CalCal()";
cell1.appendChild(element1); 
```

我想`CalCal()`在`onClick`事件上调用 Javascript 函数。这可能吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-05T09:37:16.880

但请记住，`addEventListener`IE 仅从版本 9 开始支持。要支持旧版本的 IE，您可以使用类似的东西：

```
if (element1.addEventListener) {  // all browsers except IE before version 9
  element1.addEventListener("click", CalCal, false);
} else {
  if (element1.attachEvent) {   // IE before version 9
    element1.attachEvent("click", CalCal);
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-05T09:30:02.920

**是的，您可以像这样在 javascript 中以编程方式添加 onclick 事件：**

```
element1 = document.getElementById("your_tag_id");
element1.addEventListener("click", CalCal) 
```

这会将 onClick 事件附加到 id="your_tag_id" 的标签。

您还可以像这样删除 onclick 事件：

```
element1.removeAttribute("click"); 
```

更多在[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T09:32:54.257

尝试

```
element1.onclick=CalCal; 
```

反而：

```
element1.onclick="javascript:CalCal()"; 
```

# nsis - 如何使用 NSIS 脚本检测 Windows 32 位或 64 位？

> ID：13229212
> 
> 赞同：35
> 
> 时间：2012-11-05T09:28:50.213
> 
> 标签：nsis

我已经为 java 项目编写了 nsis 脚本。我的项目中有批处理文件。我已经为常见的 windows 32 位和 64 位编写了批处理文件。安装后我已经使用**Exec**命令自动启动批处理文件。它在 32 位 windows 中很好用。但是同时这在 64 位中效果不佳。所以我怀疑在安装之前我应该​​检查 Windows 是 32 位还是 64 位版本。请分享您的看法如何检查？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-03-03T13:23:45.890

对于未来懒惰的谷歌用户 - 一小段：

包括这个：

```
!include x64.nsh 
```

并在以下情况下使用它：

```
${If} ${RunningX64}
    # 64 bit code
${Else}
    # 32 bit code
${EndIf} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-05T09:59:19.647

[在x64.nsh](https://sourceforge.net/p/nsis/code/HEAD/tree/NSIS/trunk/Include/x64.nsh)头文件中使用 RunningX64 宏：

```
!include LogicLib.nsh
!include x64.nsh

Section
${If} ${RunningX64}
    DetailPrint "64-bit Windows"
${Else}
    DetailPrint "32-bit Windows"
${EndIf}  
SectionEnd 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-05T21:59:37.523

这是我大部分时间使用的，不需要 x64.nsh

```
Var Bit
System::Call "kernel32::GetCurrentProcess()i.s"
System::Call "kernel32::IsWow64Process(is,*i.r0)"
StrCmpS $0 0 +3
StrCpy $Bit 64
Goto +2
StrCpy $Bit 32 
```

现在 $Bit 持有 64 或 32 可以这样使用：

```
${If} $Bit == 64
     ...64-bit code..
${Else}
     ..32-bit code...
${EndIf} 
```

或者

```
StrCmpS $Bit 64 SixtyFour ThirtyTwo

SixtyFour:
    ...
    Goto End
ThirtyTwo:
    ...
End: 
```

我用过`StrCmpS`，因为我相信它的头发更快。哈哈。希望这可以帮助！=)

# c# - 未在 POST 中设置 Httpwebrequst cookie

> ID：13229216
> 
> 赞同：1
> 
> 时间：2012-11-05T09:28:58.270
> 
> 标签：c#, httpwebrequest

我试图发布一个表单，但是当我查看返回的 html 代码时我一直收到错误消息

> 必须启用 Cookie 才能提交表单

我使用以下代码提交表单：

```
 string postData = "submit_hidden=submit_hidden&captcha_item_key=" + captcha_item_key + "&security_code=" + lastCaptcha + "&submit=Submit";
            byte[] _data = _enc.GetBytes(postData);
            _wReq = (HttpWebRequest)WebRequest.Create(urlen);
            _wReq.Referer = urlen;
            _wReq.CookieContainer = myContainer;
            _wReq.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            _wReq.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3");
            _wReq.Headers.Add("Accept-Language", "sv-SE,sv;q=0.8,en-US;q=0.6,en;q=0.4");
            _wReq.KeepAlive = true;
            _wReq.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";

            _wReq.Method = "POST";
            _wReq.ContentType = "application/x-www-form-urlencoded";
            _wReq.ContentLength = _data.Length;

            System.IO.Stream _outStream = _wReq.GetRequestStream();
            _outStream.Write(_data, 0, _data.Length);
            _outStream.Close();
            _wResp = (HttpWebResponse)_wReq.GetResponse();
            _sr = new System.IO.StreamReader(_wResp.GetResponseStream());
            _respStr = _sr.ReadToEnd();
            _sr.Close();
            _wResp.Close(); 
```

我将 cookie 保存到 cookie 容器中，所以我不确定它为什么不起作用？

Javascript 不是问题，因为我试图在没有激活 Javascript 的情况下从浏览器提交表单。

还检查了 Fiddler 的提交，唯一与使用我的方法的浏览器不同的是 cookie 出于某种原因没有正确设置。

有任何想法吗？

# php - 在 Mysql-PHP 中过滤值的最佳方法

> ID：13229217
> 
> 赞同：0
> 
> 时间：2012-11-05T09:28:59.513
> 
> 标签：php, mysql

我的 PHP 和 mysql 代码中有一个选择框。

```
<select id="addressbook_user" name ="addressbook_user">
<option value="hi">hi</option>
<option value="hello">hello</option>
<option value="newa">newa</option>

<select> 
```

我将选定的值存储在 jQuery 列表中，并将该列表传递给 php 代码以过滤除列表项之外的其他选项。

```
$list = $_GET['list'];

print $list;
print_r($list);
$query = "SELECT *  from demo_addressbook WHERE user_created_id IN(SELECT id FROM demo_user WHERE user_name = '$get_user_name') AND type = 1 AND guest_name NOT IN '$list' ";                               
$sresult    = mysql_query($query) or die (mysql_error()); 
```

并根据结果，我试图创建没有列表选定值的最新选择框。

但不幸的是，我的上述查询不起作用

```
hiYou have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'hi' at line 1 is the error . 
```

请建议我从 mysql 表中过滤数组数据的最佳方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:30:03.247

用`parenthesis`

```
NOT IN ('$list') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:35:58.363

请更改下面的 sql ，因为找不到变量的值并且需要 In 语句 lile " columnName in('','')"：

```
$query = "SELECT *  from demo_addressbook WHERE
 user_created_id IN(SELECT id FROM demo_user 
 WHERE user_name = '" . $get_user_name . "')
 AND (type = 1) AND guest_name NOT IN(". $list .") "; 
```

# gettext - 管理与多种语言、命令行源的 poedit 同步

> ID：13229221
> 
> 赞同：2
> 
> 时间：2012-11-05T09:29:05.283
> 
> 标签：gettext, poedit

我正在使用 poedit 来管理 php 项目中的 gettext 翻译。有很多人为该项目做出了贡献，每次添加一些新的语言字符串时，我都需要运行 poedit 并与每种可用语言的源同步，以便翻译人员可以翻译语言文件。我的问题是：

a) 我是否必须为每种语言每次都这样做，还是有更简单的方法？

b）有没有办法从命令行执行此操作（例如，我可以将其添加到 cron 作业中）？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T10:01:50.143

如果这是一个纯 Gettext 项目，即不依赖 poedit 提供的自定义提取，那么：

*   是的，您确实需要为每种语言每次都这样做。但是您可以选择使用 xgettext 并创建一个 POT 文件。将 POT 文件提供给翻译人员，然后他们可以自己进行更新。我认为 poedit 可以从 UI 中的模板进行更新。
*   您可以使用 xgettext 在命令行上自己执行此操作来更新您的 POT 文件。然后 msgmerge 更新每个单独的语言文件。但是您需要与您的翻译人员沟通，因为他们可能一直在翻译您刚刚为他们更新的文件。

从翻译人员的角度来看，您应该尝试限制您的字符串流失并创建一个字符串冻结的概念。对于翻译人员来说，必须重新翻译内容非常耗时，正如您自己发现的那样。

# javascript - 如何防止用户使用 jQuery 在文本框中输入特定字符？

> ID：13229224
> 
> 赞同：6
> 
> 时间：2012-11-05T09:29:14.387
> 
> 标签：javascript, jquery, jquery-events

我有一个正则表达式，它将与用户的按键匹配。我很坚持。

这是我当前的代码：

```
<script type="text/javascript">
    $('input.alpha[$id=tb1]').keydown(function (e) {
        //var k = e.which;
        //var g = e.KeyCode;
        var k = $(this).val();
        //var c = String.fromCharCode(e.which);
        if (k.value.match(/[^a-zA-Z0-9 ]/g)) {
            e.preventDefault();
        }
    });
</script> 
```

这里的目标是防止用户输入正则表达式中的字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T09:52:17.800

尝试使用[fromCharCode](http://www.w3schools.com/jsref/jsref_fromcharcode.asp)方法：

```
$(document).ready(function () {
  $('#tb1').keydown(function (e) {

    var k = String.fromCharCode(e.which);

    if (k.match(/[^a-zA-Z0-9]/g))
      e.preventDefault();
  });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T09:33:22.170

您使用`keypress`而不是`keydown`阻止默认操作。

例如，这可以防止`w`在文本输入中输入 a：

```
$("#target").keypress(function(e) {
  if (e.which === 119) { // 'w'
    e.preventDefault();
  }
}); 
```

[实时复制](http://jsbin.com/ohaxud/1)| [资源](http://jsbin.com/ohaxud/1/edit)

**更新**：如果它正在应用给你带来麻烦的正则表达式：

```
$("#target").keypress(function(e) {
  if (String.fromCharCode(e.which).match(/[^A-Za-z0-9 ]/)) {
    e.preventDefault();
  }
}); 
```

[实时复制](http://jsbin.com/ufukaj/1)| [资源](http://jsbin.com/ufukaj/1/edit)

# c++ - 为什么插入排序最好的情况是大 O 复杂度 O(n)？

> ID：13229229
> 
> 赞同：3
> 
> 时间：2012-11-05T09:29:33.357
> 
> 标签：c++, sorting, complexity-theory, big-o, insertion-sort

以下是我的插入排序代码：

```
void InsertionSort(vector<int> & ioList)
{
  int n = ioList.size();
  for (int i = 1 ; i < n ; ++i)
  {
    for (int j = 0 ; j <= i ; ++j)
    {
      //Shift elements if needed(insert at correct loc)
      if (ioList[j] > ioList[i]) 
      {
        int temp = ioList[j];
        ioList[j] = ioList[i];
        ioList[i] = temp;
      }
    }
  }
} 
```

该算法的平均复杂度为 O(n^2)。

根据我对大 O 表示法的理解，这是因为在这种情况下我们运行了两个循环（外部一个 n-1 次，内部一个 1,2,...n-1 = n(n-1)/2 次，因此算法的无症状复杂度为 O(n^2)。

现在我已经读过最好的情况是输入数组已经排序的情况。在这种情况下，算法的大 O 复杂度是 O(n)。但我不明白这是怎么可能的，因为在这两种情况下（平均情况和最佳情况）我们都必须运行相同次数的循环并且必须比较元素。唯一避免的是元素的移动。

那么复杂度计算是否也涉及到这个交换操作的一个组件呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T09:34:15.360

是的，这是因为您的实现不正确。内部循环应该从`i-1`下到倒数`0`，一旦发现一个`ioList[j]`已经小于的元素就应该终止`ioList[i]`。

正是由于该终止标准，算法在最佳情况下在 O(n) 时间内执行：

如果输入列表已经排序，则内循环将立即终止 any `i`，即执行的计算步骤数最终与执行外循环的次数成正比，即 O(n)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T09:35:21.193

您对“插入排序”的实现很差。

在您的内部循环中，您不应该一直扫描到`i-1`交换每个大于`ioList[i]`. 相反，您应该向后扫描，`i-1`直到找到插入新元素的正确位置（即，直到找到小于或等于新元素的元素），然后将其插入那里。如果输入已经排序，那么总是会立即找到正确的插入点，因此内部循环不会执行`i-1`次数，它只会执行一次。

Your sort is also worse than insertion sort on average, since you *always* do `i+1` operations for each iteration of the outer loop -- some of those ops are just a comparison, and some are a comparison followed by a swap. An insertion sort only needs to do on average half that, since for random/average input, the correct insertion point is half way through the initial sorted segment. It's also possible to avoid swaps, so that each operation is a comparison plus a copy.

# android - SharedPreferences 线程安全

> ID：13229231
> 
> 赞同：2
> 
> 时间：2012-11-05T09:29:34.790
> 
> 标签：android, android-preferences

我知道这个问题已经被讨论过（例如[在这里](https://stackoverflow.com/questions/4693387/sharedpreferences-and-thread-safety/4695567#4695567)），但是我仍然不清楚拥有一个更新 SharedPreferences 和同时读取它的后台线程的 Preference 活动是否安全？

在我的具体示例中，我有一个 PreferenceActivity 和 PreferenceFragments 用户与之交互以更改首选项，以及一个读取这些首选项并对其进行操作的后台服务。

我不想让它碰运气，只是想确定是否应该在每次读取 SharedPreference 对象时锁定它（因为写入它是通过 PreferencesActivity 自动完成的）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:00:53.883

正如您链接的帖子中所讨论的那样。除非您在清单中明确告诉 Android 在另一个进程中运行您的服务，否则同时写入和读取应该是安全的。
所以你的情况可能没问题。

# webstorm - WebStorm 中的文件编码，带有 BOM 的 utf-8

> ID：13229232
> 
> 赞同：3
> 
> 时间：2012-11-05T09:29:34.657
> 
> 标签：webstorm

默认情况下，WebStorm 以 utf-8 编码创建文件，但没有 BOM。如何在我的文件中添加 BOM 标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:55:05.647

根据 Unicode 规范：

> UTF-8 既不需要也不推荐使用 BOM（[第 2.6 章](http://www.unicode.org/versions/Unicode5.0.0/ch02.pdf)）

有一个[相关的请求](http://youtrack.jetbrains.com/issue/IDEA-63850)和[论坛讨论](http://devnet.jetbrains.net/thread/290334)，随时在那里发表评论。

# objective-c - NSWorkspace launchApplication：第一次使用 root 用户失败

> ID：13229234
> 
> 赞同：4
> 
> 时间：2012-11-05T09:29:54.253
> 
> 标签：objective-c, macos

我正在尝试从我的 Mac OS X **10.7.4**上的另一个应用程序（例如 app1）启动我的一个应用程序（例如 app2） 。我正在使用以下代码：

```
[ [ NSWorkspace sharedWorkspace ] launchApplicationAtURL:[NSURL fileURLWithPath:appPath] options:NSWorkspaceLaunchDefault configuration:[NSDictionary dictionaryWithObject:[NSArray arrayWithObject: @"mode"] forKey:NSWorkspaceLaunchConfigurationArguments] error:&err]; 
```

这工作正常，除了第一次，即如果我们有一台新机器，那么当以 root 用户身份首次尝试从 app1 启动 app2 时第一次尝试失败，但随后工作正常。

以下是我在转储 NSError 时遇到的错误：

> 2012-11-05 07:47:48 +0000：应用程序“App2”无法启动，因为发生了其他错误（OSStatus -10810）。

此外，我在控制台的“**所有消息**”中收到以下消息：

> 11/4/12 11:47:48.329 PM com.apple.launchd[1]：系统：错误：12B19：launchd + 79534 [AEF41441-17BC-36E6-B1F8-57BADBDFEBCF]：0x0
> 
> 11/4/12 11:47:48.329 PM com.apple.launchd[1]：系统：此 API 只能由在 Aqua 会话中运行的进程使用。
> 
> 11/4/12 11:47:48.329 PM App1[2405]：spawn_via_launchd() 失败，errno=5 标签=[0x0-0x57057].com.ak.app1 路径=/var/root/Library/Caches/com。 ak.app2/app2.app/Contents/MacOS/app2 flags=0

奇怪的想法是它只在 root 用户的第一次尝试中失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:01:28.997

您似乎正在尝试从非 UI 进程启动应用程序。这不再受支持，因为它在`LSOpenApplication`内部使用，自 Lion 以来不支持非 UI 进程。请参阅此[讨论](http://lists.apple.com/archives/cocoa-dev/2011/Aug/msg00196.html)以获取更多信息

# django - Django 管理页面删除“组”

> ID：13229235
> 
> 赞同：31
> 
> 时间：2012-11-05T09:29:57.737
> 
> 标签：django

如何删除模型组管理页面？我想默认显示组模型。非常感谢您提前。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-05T09:31:13.073

使用`unregister`方法：

添加到 admin.py 文件：

```
from django.contrib import admin
from django.contrib.auth.models import Group

admin.site.unregister(Group) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-12-11T10:34:31.527

您需要**检查**`INSTALLED_APPS`in的顺序`settings.py`。基本上，您的应用程序应该列*在*`django.contrib.auth`.

将以下代码用于应用程序`unregister`的 Group inside文件：`admin.py`

```
from django.contrib.auth.models import User

admin.site.unregister(Group) 
```

# applescript - 如何使用 Aplescript 检查 Adob e Installer 的复选框？

> ID：13229239
> 
> 赞同：2
> 
> 时间：2012-11-05T09:30:11.180
> 
> 标签：applescript

我正在尝试安装 Adob​​e Flash Player，我想检查复选框并需要单击安装按钮，我试图通过 UIElementInspector 获取窗口的全部内容，我无法获取复选框和安装按钮的内容..

我刚刚尝试使用以下脚本单击复选框，但没有成功，错误提示无法获取复选框..请建议如何检查..

```
tell application "System Events"
    tell process "Adobe Flash Player Install Manager"
        set frontmost to true

        click the checkbox "I have read and agree to the terms of the Flash Player License Agreement" of window "Adobe Flash Player 11.5 Installer."

    end tell
end tell 
```

请检查以下链接以查看 Adob​​e Flash Player 安装程序的图像。

[https://docs.google.com/document/d/1yzyBTrvi94QxjlEAlcbudOBpXiTGPEI2LA3D1iEo8Gw/](https://docs.google.com/document/d/1yzyBTrvi94QxjlEAlcbudOBpXiTGPEI2LA3D1iEo8Gw/)编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:38:32.400

下载此软件：

[http://pfiddlesoft.com/uibrowser/downloads/UIBrowser222.dmg](http://pfiddlesoft.com/uibrowser/downloads/UIBrowser222.dmg)

安装它。

您可以简单地使用此工具来读取复选框的名称和所有内容。

例如：如果您附加一个包含一个窗口和一个复选框的应用程序，您可以通过以下脚本简单地检查该复选框：

```
tell aplication "system events"
   click checkbox 1 of window 1
end tell 
```

只要记住将窗户放在其他窗户的最前面。

您可以通过单击 UI 浏览器应用程序中的目标弹出按钮来附加您的进程。

然后点击切换到屏幕阅读器选项。

现在您可以看到按钮、控件、复选框的名称

# sql - 如何使用相同的 WHERE 列创建过程

> ID：13229241
> 
> 赞同：0
> 
> 时间：2012-11-05T09:30:14.770
> 
> 标签：sql, sql-server, tsql

如何创建一个程序并且`WHERE`列是相同的？

该`WHERE`列是`QuotationNo`

这是程序签名：

```
create procedure (QUO1 int, QUO2 int, QUO3 int, QUO4 int) 
```

输出：

```
Quote     price     quantity
---------------------------------
1234       2000        1000
5678       2500        4000
9012        3000        4500 
3456        1000        1000 
```

谢谢，

船长16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:33:15.080

```
CREATE PROCEDURE NameMyProc
    @QUO1 int, @QUO2 int, @QUO3 int, @QUO4 int
AS
    select quote, price, quantity
     from tbl
    where quotationno in (@qu01, @qu02, @qu03, @qu04)
GO 
```

您还可以创建一个更灵活的表值函数，例如

```
CREATE FUNCTION dbo.NameMyFunction (
    @QUO1 int, @QUO2 int, @QUO3 int, @QUO4 int
) RETURNS TABLE AS RETURN
    select quote, price, quantity
     from tbl
    where quotationno in (@qu01, @qu02, @qu03, @qu04)
GO

-- Example usage:
SELECT * FROM dbo.NameMyFunction(1234, 5678, 9012, 3456) T 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:35:04.720

如果您在运行时给予 quo 价值

```
create proc [test]
 (QUO int(11))
as 
begin
select quote,price,quantity from table where quote=@QUO 
end 
```

# jquery - 如何使用内联编辑更新对 jqgrid 所做的更改？

> ID：13229244
> 
> 赞同：0
> 
> 时间：2012-11-05T09:30:21.843
> 
> 标签：jquery, asp.net-mvc, jqgrid

我们如何更新对 jqgrid 中特定行的单元格所做的更改....我想将其更新到数据库...我使用内联编辑进行编辑..我想将该特定行更新到数据库中用户做出的改变

这是我的jQuery代码

```
 <script type="text/javascript">
    $(function () {
        var lastsel;
        jQuery("#list").jqGrid({
            url: '/Home/GetStudents/',
            datatype: 'json',
            mtype: 'POST',
            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],
            colModel: [
      { name: 'StudentID',sortable: false,key:true },
      { name: 'FirstName' },
      { name: 'LastName', sortable: false},
      { name: 'Email', width: 200,  sortable: false}],
      cmTemplate: {align: 'center', editable: true},
            pager: '#pager',
            width: 750,
            rowNum: 15,
            rowList: [5, 10, 20, 50],
            sortname: 'StudentID',
            sortorder: "asc",
            viewrecords: true,
            caption: ' My First JQgrid',
            onSelectRow: function (StudentID) {

                if (StudentID != lastsel) {

                    jQuery('#list').jqGrid('restoreRow', lastsel);
                    jQuery('#list').jqGrid('editRow', StudentID, true);

                    lastsel = StudentID;   
                }

            },

            editurl: '/Home/About/',
            caption: "Using events example"

        });
        jQuery("#list").jqGrid('navGrid', "#pager", { edit: false, add: false, del: false });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:04:19.223

请检查以下示例项目：

*   [ASP.NET MVC 3 和 Razor 中的 jqGrid](http://tpeczek.codeplex.com/releases/view/61796)

它包含（以及许多其他）用于内联编辑场景的示例。

# android - 设置在 Android MediaPlayer 中播放的歌曲的音高

> ID：13229245
> 
> 赞同：1
> 
> 时间：2012-11-05T09:30:22.283
> 
> 标签：android, media-player, pitch

我需要设置在媒体播放器中播放的歌曲的音高。我知道 Sound Pool 有助于设置音高，但我使用 MediaPlayer（因为我也需要混响效果）来播放曲目，我需要设置音高现在正在播放的曲目。任何人有任何线索吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-23T23:22:05.843

Android 6.0 增加`PlaybackParams`了`MediaPlayer`. 我刚刚在模拟器中测试了这个：

```
String recordingPath = recordingDirectory + File.separator + "music.mp3";
MediaPlayer audioPlayer = MediaPlayer.create(getApplicationContext(), Uri.parse(recordingPath));
audioPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
PlaybackParams params = new PlaybackParams();
params.setPitch(0.75f);
audioPlayer.setPlaybackParams(params);
audioPlayer.start(); 
```

# iphone - shouldAutorotateToInterfaceOrientation 无法正常工作

> ID：13229246
> 
> 赞同：0
> 
> 时间：2012-11-05T09:30:28.880
> 
> 标签：iphone, locking, orientation, mode, portrait

如果设备是 iPhone，我想将方向锁定为纵向，如果设备是 iPad，我想允许所有方向。

我有这个代码，但它不会将 iPhone 锁定为纵向模式：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
    {
        return NO;

    }
    else
    {
    if (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown || interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight)
        return YES;
    }
    return NO;

} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:35:05.110

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
    {
        return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);

    }
    else{
        return YES;
    }

} 
```

试试这个。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:36:45.583

```
if you will navigate the view then force orientation will not work but if you will     present your view then it will work very well and it works for me. In my project all screens are in portrait mode only but only one screen is in landscape mode.   
- (IBAction)startButtonClicked:(id)sender {

CTFailure_RemedyGameViewController *remedyGameController = [[CTFailure_RemedyGameViewController alloc]initWithNibName:@"CTFailure_RemedyGameViewController" bundle:nil];
[self presentModalViewController:remedyGameController animated:NO];
[remedyGameController release];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

@end 
```

# c++ - 使用 wXwidget C++ 将菜单和子菜单选项添加到 MAC 中的窗口菜单

> ID：13229248
> 
> 赞同：0
> 
> 时间：2012-11-05T09:30:35.650
> 
> 标签：c++, macos, wxwidgets

嗨，我是使用 wxWidget 的 Mac 新手。我需要在 MAC 的窗口菜单下添加一个子菜单和一些菜单项。我可以对 PC 上的 Window 菜单执行相同操作，但不能在 MAC 上执行此操作。

此外，我没有收到点击窗口菜单到 EVT_MENU_OPEN 事件附加的函数的事件。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:00:05.340

我不太清楚这个问题。但是，您可能必须为 mac 上的菜单执行类似的操作。

```
 m_menuBar = new wxMenuBar();
#if defined(__WXMAC__)  
    m_menuBar->SetAppleMenuItemLabel(wxApp::s_macAboutMenuItemId, wxT("About"));
    m_menuBar->SetAppleMenuItemLabel(wxApp::s_macWindowMenuItemId, wxT("Window"));
    m_menuBar->SetAppleMenuItemLabel(wxApp::s_macExitMenuItemId, wxT("Quit"));
#endif 
```

其中 s_macAboutMenuItemId、s_macWindowMenuItemId、s_macExitMenuItemId 是您定义的各自的菜单 ID。

并且关于没有获得事件以单击窗口菜单到附加 EVT_MENU_OPEN 事件的函数，请检查声明的事件表中是否有正确的条目（菜单 ID，相应的函数名称）。

# php - 发布用户正在使用我的应用程序的通知

> ID：13229251
> 
> 赞同：1
> 
> 时间：2012-11-05T09:30:38.673
> 
> 标签：php, facebook-graph-api

如果我有一个名为“abc”的 facebook 应用程序，当用户使用我的应用程序时，我们如何将“user_name 正在使用 ABC”发布到 facbook 代码。

我使用图形 api 发布照片。但是如果我像上面的句子一样向用户墙发布与状态相同的消息，Facebook 会将其视为垃圾邮件。正确的 ？

那么如何告诉用户的朋友该用户正在使用“abc”？我看到有些人玩游戏时类似的通知显示在股票行情中。

它是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:53:24.390

这不是垃圾邮件，除非您实际上是在向每个人的墙发送垃圾邮件。只要您每天只发布一两次状态“user_name 正在使用 ABC”，就可以了。

这是来自 facebook 开发者文档的链接，用于发布状态消息。

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

此外，始终建议您在实施任何 api 之前自己阅读策略。 [https://developers.facebook.com/policy/](https://developers.facebook.com/policy/)

# javascript - 未调用 Cordova/phonegap JS 回调

> ID：13229255
> 
> 赞同：4
> 
> 时间：2012-11-05T09:30:59.917
> 
> 标签：javascript, plugins, callback, cordova

我通过创建脚本制作了一个cordova项目并创建了一个插件。但是，由于某种原因，每当我发送插件结果时，都不会调用 JS 回调。

我检查了callbackID。它充满了（看似）有效的回调。我的插件映射没问题，本机代码被执行并且没有错误。

我不知道为什么没有触发回调..

我的 javascript ：

```
(function(cordova) {

    function Plugin() {}

        Plugin.prototype.FBAuthorize = function(config) {
            cordova.exec(null, null, "Plugin", "FBAuthorize", []);
        };

        Plugin.prototype.FBGetLoginStatus = function(cb, fail) {
            cordova.exec(function(){alert('test')}, function(){alert('test')}, "Plugin", "FBGetLoginStatus", []);
        }

        Plugin.prototype.FBPostToUserTimeline = function(textToShare, imageUrl, linkUrl) {
            cordova.exec(null, null, "Plugin", "FBPostToUserTimeline", [textToShare, imageUrl, linkUrl]);
        }

        if(!window.plugins) window.plugins = {};
        window.plugins.Plugin = new Plugin();

})(window.cordova || window.Cordova || window.PhoneGap); 
```

我的ios

```
(void) FBGetLoginStatus:(CDVInvokedUrlCommand*)command {
    CDVPluginResult* result = nil;
    NSString* javascript = nil;
    if([[FBSession activeSession] isOpen]) {
        result = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:@"Logged in"];
        javascript = [result toSuccessCallbackString:command.callbackId];
    } else {
        result = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR messageAsString:@"Not logged in"];
        javascript = [result toErrorCallbackString:command.callbackId];
    }
    [self writeJavascript:javascript];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T18:20:10.427

我不是phonegap方面的专家，但这对我有用，你可以试试（iOS代码）

```
[self.commandDelegate sendPluginResult:result callbackId:command.callbackId]; 
```

反而

```
[self writeJavascript:javascript]; 
```

我希望这有帮助

# android - 单击特定组时，如何始终选择可扩展列表视图中的第一个子项？

> ID：13229256
> 
> 赞同：1
> 
> 时间：2012-11-05T09:31:02.460
> 
> 标签：android, android-listview, listener, expandablelistview

```
TaxiListAdapter list_adapter = new TaxiListAdapter(
                TaxiListActivity.this, groupHeader, hashMap);
        list_view.setAdapter(list_adapter);
        list_view.setOnGroupExpandListener(onGroupExpandListener);

private OnGroupExpandListener onGroupExpandListener = new OnGroupExpandListener() {

        public void onGroupExpand(int groupPosition) {
            list_view.setSelectedChild(groupPosition, 0, true);
        }
    }; 
```

在上面的部分中，list_adapter 是一组 Header 列表及其子列表，我将此列表放在可扩展列表视图中，并且列表正确显示。当我单击列表的任何父（标题）时，它正在打开，但它向下滚动并显示最后一个子数据，我希望它从布局开始显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:46:09.853

尝试这个

```
TaxiListAdapter list_adapter = new TaxiListAdapter(
            TaxiListActivity.this, groupHeader, hashMap);
    list_view.setAdapter(list_adapter);
    list_view.setOnGroupExpandListener(onGroupExpandListener);

private OnGroupExpandListener onGroupExpandListener = new OnGroupExpandListener() {

    public void onGroupExpand(int groupPosition) {

    }
}; 
```

# ios - 在 PassSlot.com 服务器上获取创建的 PKPass 的序列号

> ID：13229257
> 
> 赞同：0
> 
> 时间：2012-11-05T09:31:04.667
> 
> 标签：passslot, ios, passbook, passslot

如何从[passslot](/questions/tagged/passslot "显示标记为“passslot”的问题")检索通行证的序列号？我使用以下代码生成了通行证：

```
[PassSlot createPassFromTemplateWithName:@"Membership Card" withValues:values andRequestInstallation:self completion:^{
    NSLog(@"Pass!");
}]; 
```

或者我如何在我的上显示一个通行证，`UIViewController`或者`PKAddPassesViewController`如果我有通行证的序列号，因为我可以从以下 API 生成通行证：

```
https://api.passslot.com/v1/templates/names/templatename/pass 
```

我正在为 Passbook Passes 使用 Passslot.com API，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:11:44.273

以下是获取通行证序列号的方法：

```
[PassSlot passFromTemplateWithName:@"PassSlot Demo" withValues:values pass:^(PSPass *pass) {
    NSLog(@"Serial Number: %@",pass.serialNumber);
    [PassSlot requestPassInstallation:pass inViewController:self completion:^{
        NSLog(@"Done");
    }];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:16:57.007

[休息 API 文档](http://www.passslot.com/developer/api/resources)

这是所有 Passlot API 的 REST API 链接，如果您获得身份验证，请告诉我？

通过此网址，您将获得序列号

[https://www.passslot.com/account/passes](https://www.passslot.com/account/passes)

# vba - Access 2000 中缺少操作员错误？

> ID：13229263
> 
> 赞同：1
> 
> 时间：2012-11-05T09:31:29.187
> 
> 标签：vba, ms-access, ms-access-2000

我在组合字段的 onchange 事件中使用 vba 代码。代码如下

```
Dim db As Database
Dim rs As DAO.Recordset
Dim qrystr As String
Dim cond As String
Dim qrystr_CID As String

'cond = [Forms]![PharmDrug].[Commercial drugs subform2].Form.DrugCompanyName & vbNullString
cond = Me.DrugCompany & vbNullString

'MsgBox cond

Set db = CurrentDb

If cond = vbNullString Then
  ' do nothing
Else
  qrystr = "SELECT DrugCompanyID FROM [Drug Company] WHERE Name ='" & cond & "';"

Set rs = db.openrecordset(qrystr)

qrystr_CID = rs!DrugCompanyID

Me.DrugCompanyID = qrystr_CID

rs.Close
Set rs = Nothing
End If 
```

这工作正常，但它在查询表达式'Name = 'Dr.中给出错误3075语法错误（缺少运算符）。雷迪的实验室。';'

那是如果名称字段中的值包含撇号等特殊字符。我怎样才能摆脱这个错误？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:43:05.017

使用 QueryDef 进行参数查询。

```
Dim qdf As DAO.QueryDef
qrystr = "PARAMETERS which_name TEXT(255);" & vbCrLf & _
    "SELECT DrugCompanyID FROM [Drug Company] WHERE [Name] = [which_name];"
Set qdf = db.CreateQueryDef(vbNullString, qrystr)
qdf.Parameters("which_name") = cond
Set rs = qdf.OpenRecordset 
```

您无需在 SELECT 语句中的参数周围包含引号，也不必担心您为参数值提供的文本中包含的任何引号。db 引擎希望接收文本并将其视为这样。

我还使用了方括号，`[Name]`因为它是保留字。在这种情况下，这似乎不是问题。作为预防措施，我经常将这些名称括起来。

# c# - c# 将整数添加到列表中

> ID：13229265
> 
> 赞同：3
> 
> 时间：2012-11-05T09:31:41.203
> 
> 标签：c#, .net

当我检查文本框是否等于 1 时，我想检查列表是否已经包含特定值。当我运行它时，它总是转到 else 代码。我究竟做错了什么？

```
List<int> list = new List<int>();

if (Convert.ToInt32(DobbelWaarde.Text) == 1)
{
    if (list.Contains(1))
    {
        Console.WriteLine("1 is allready been chosen");
    }
    else
    {
        list.Add(1);
        Console.WriteLine();
        foreach (int li in list)
        {
            Console.WriteLine(li);
            Console.WriteLine("We add 1");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T09:36:17.533

第一行[初始化](http://msdn.microsoft.com/en-us/library/bb384062.aspx)一个空列表：

```
List<int> list = new List<int>(); 
```

该列表为空，因此[Contains()](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)将返回 false，无论您检查的值是什么。

要初始化列表，您可以使用：

```
List<int> list = new List<int> { 1 }; 
```

更多细节在这里： [对象和集合初始化器（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T09:35:02.957

> 当我运行它时，它总是转到 else 代码。

您不会在任何地方的列表中添加整数。您从**一个空列表**开始，然后检查它是否包含`1`这就是它转到 else 部分的原因。

您可以像这样初始化列表：

```
List<int> list = new List<int>() {1}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T09:36:55.193

我没有得到你的代码！

首先你的列表没有元素

你的代码，可能是这样的：

```
 List<int> list = new List<int>();
    list.Add(1);
    list.Add(2);
    list.Add(3);
    list.Add(4);

 int number = Convert.ToInt32(DobbelWaarde.Text);

        if ( number == 1)
        {
            if (list.Contains(1))
            {
                Console.WriteLine(number + " is allready been chosen");
            }
            else
            {
                list.Add(number );
                Console.WriteLine();
                foreach (int li in list)
                {
                    Console.WriteLine(li);
                    Console.WriteLine("We add " + number);
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T09:39:11.830

您始终在检查列表是否包含该数字之前对其进行初始化。这将清除列表。因此，您应该将初始化例如移动到类的构造函数中：

```
class MyClass
{
    List<int> list;
    public MyClass()
    {
        list  = new List<int>();
    }

    private void Validate()
    {
        if (Convert.ToInt32(DobbelWaarde.Text) == 1)
        {
            if (list.Contains(1))
            {
                Console.WriteLine("1 is allready been chosen");
            }
            else
            {
                list.Add(1);
                // ...
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:38:17.280

if 语句中的条件总是被评估为 false 即 list 没有 1 所以它返回 false 因此 else 部分被执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T09:39:04.273

定义您的`list`外部 checkTextBox 方法：

```
List<int> list = new List<int>();

void CheckTextBox()
{
    if (Convert.ToInt32(DobbelWaarde.Text) == 1)
    {
        if (list.Contains(1))
        {
            Console.WriteLine("1 is allready been chosen");
        }
        else
        {
            list.Add(1);
            Console.WriteLine();
            foreach (int li in list)
            {
                Console.WriteLine(li);
                Console.WriteLine("We add 1");
            }
        }
    }
} 
```

# python - wxPython：在 ScrolledPanel 中放置滚动条

> ID：13229281
> 
> 赞同：0
> 
> 时间：2012-11-05T09:32:41.963
> 
> 标签：python, wxpython

我想知道是否有任何方法可以从滚动面板控制滚动条的位置？更具体地说：我使用水平滚动面板，如果滚动条位于面板顶部（而不是底部）并且仅跨越水平距离的 80%，那就太好了。

这样的事情可能吗？

谢谢...

# android - 错误：701：错误/CursorWindow（2707）：对字段插槽的错误请求？

> ID：13229282
> 
> 赞同：-1
> 
> 时间：2012-11-05T09:32:42.873
> 
> 标签：android, sqlite

我的数据库中有一些表。我可以将我的数据上传到我的数据库表中。当我尝试检索数据时，我得到了这样的错误。

```
 11-05 12:34:09.538: INFO/System.out(1805): div value <0
  11-05 12:34:09.548: INFO/System.out(1805): values going to inserted------------------>
  11-05 12:34:09.560: INFO/System.out(1805): values updatred------------------>
  11-05 12:34:09.568: INFO/System.out(1805): values selected after updated------------>
  11-05 12:34:09.568: INFO/System.out(1805): count after updated------>12
  11-05 12:34:09.578: INFO/System.out(1805): new title---->RevenuePredictionData
  11-05 12:34:09.578: INFO/System.out(1805): new month---->Oct
  11-05 12:34:09.578: INFO/System.out(1805): new actual---->5006000.0
  11-05 12:34:09.578: INFO/System.out(1805): new plan---->6405750.0
  11-05 12:34:09.578: INFO/System.out(1805): new year_over---->-1399750.0
  11-05 12:34:09.588: INFO/System.out(1805): new year_var---->-27.96
  11-05 12:34:09.588: INFO/System.out(1805): database value-----0
  11-05 12:34:09.588: INFO/System.out(1805): RevenuePredictionData
  11-05 12:34:09.588: INFO/System.out(1805): database value-----0
  11-05 12:34:09.588: INFO/System.out(1805): Oct
  11-05 12:34:09.588: ERROR/CursorWindow(1805): Bad request for field slot 0,9\. numRows = 12, numColumns = 6
  11-05 12:34:09.598: DEBUG/AndroidRuntime(1805): Shutting down VM
  11-05 12:34:09.598: WARN/dalvikvm(1805): threadid=1: thread exiting with uncaught exception (group=0x40015560)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805): FATAL EXCEPTION: main
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805): java.lang.IllegalStateException: get field slot from row 0 col 9 failed
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.database.CursorWindow.getDouble_native(Native Method)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.database.CursorWindow.getDouble(CursorWindow.java:399)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.database.AbstractWindowedCursor.getDouble(AbstractWindowedCursor.java:138)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at com.exale.newfinace.Income$4.onProgressChanged(Income.java:1026)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.widget.SeekBar.onProgressRefresh(SeekBar.java:89)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.widget.ProgressBar.doRefreshProgress(ProgressBar.java:507)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.widget.ProgressBar.refreshProgress(ProgressBar.java:516)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.widget.ProgressBar.setProgress(ProgressBar.java:565)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.widget.AbsSeekBar.trackTouchEvent(AbsSeekBar.java:337)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.widget.AbsSeekBar.onTouchEvent(AbsSeekBar.java:292)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.View.dispatchTouchEvent(View.java:3885)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.os.Handler.dispatchMessage(Handler.java:99)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at  android.os.Looper.loop(Looper.java:123)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at android.app.ActivityThread.main(ActivityThread.java:3683)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at java.lang.reflect.Method.invokeNative(Native Method)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at java.lang.reflect.Method.invoke(Method.java:507)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  11-05 12:34:09.618: ERROR/AndroidRuntime(1805):     at dalvik.system.NativeStart.main(Native Method)
  11-05 12:34:11.528: ERROR/InputDispatcher(61): channel '406bdc58 com.exale.newfinace/com.exale.newfinace.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
  11-05 12:34:11.528: ERROR/InputDispatcher(61): channel '406bdc58 com.exale.newfinace/com.exale.newfinace.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
  11-05 12:34:11.608: ERROR/InputDispatcher(61): Received spurious receive callback for unknown input channel.  fd=154, events=0x8
  11-05 12:34:11.608: ERROR/InputDispatcher(61): Received spurious receive callback for unknown input channel.  fd=166, events=0x8 
```

我该如何解决这个问题？有没有机构可以告诉我？提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:42:49.320

此错误会在您的数据库值选择过程中引发一些愚蠢的错误，您将像这样分配列索引

```
 // Do some process

     int Column2 = c.getColumnIndex("Month");
     if (c.moveToFirst())
     {                       
        for (int i = 0; i < columncount; i++)
    { 
           Log.i("data count", ""+i);
       my_title[i] = c.getString(Column2);
           Log.i("month.....",""+my_month[i]);
           c.moveToNext();
        }
     } 
```

而不是这个，当你这样给出时，它会引发对字段槽错误的错误请求。

```
 // Do some process

      int Column2 = c.getColumnIndex("Month");
      if (c.moveToFirst())
      {                       
         for (int i = 0; i < columncount; i++)
          { 
             Log.i("data count", ""+i);
             my_title[i] = c.getString(2);
             Log.i("momth.....",""+my_month[i]);
             c.moveToNext();
          }
      } 
```

# java - 如何使用服务帐户创建 Google 电子表格并在 java 中共享给其他 google 用户？

> ID：13229294
> 
> 赞同：17
> 
> 时间：2012-11-05T09:33:28.403
> 
> 标签：java, google-api, google-spreadsheet-api

我有一个应用程序，我使用**Google 服务帐户**从 Analytics API 收集有关我的网站的大量信息。我的下一步是使用服务帐户创建一个电子表格，并与几个用户共享该文档。

[我在https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)上查看了文档，但我在那里找不到任何关于服务帐户和共享文档的信息。

所以我的第一个问题这可能吗？如果不需要，我是否需要按照文档中的示例实施“使用我的个人帐户”？如果是的话，你能给我举个例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T22:38:02.587

这是可能的，请参见下面的示例（该示例确实需要一些调整）：

创建驱动服务：

```
 GoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT).setJsonFactory(JSON_FACTORY)
            .setServiceAccountId(confBean.getServiceAccountId()).setServiceAccountScopes("https://www.googleapis.com/auth/drive")
            .setServiceAccountPrivateKeyFromP12File(new File("path to the P12File"))
            .setServiceAccountUser("user@domain.com")
            .build();

    Drive drive = new Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).build(); 
```

创建电子表格：

```
 com.google.api.services.drive.model.File  file = new com.google.api.services.drive.model.File();
  file.setTitle("test");       
  file.setMimeType("application/vnd.google-apps.spreadsheet");
  Insert insert = this.drive.files().insert(file);
  file = insert.execute(); 
```

创建电子表格服务：

```
GoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT).setJsonFactory(JSON_FACTORY)
        .setServiceAccountId(confBean.getServiceAccountId()).setServiceAccountScopes("https://spreadsheets.google.com/feeds")
        .setServiceAccountPrivateKeyFromP12File(new File("path to the P12File"))
        .setServiceAccountUser("user@domain.com")
        .build();
SpreadsheetService service = new SpreadsheetService("MySpreadsheetIntegration-v1");
service.setOAuth2Credentials(credential); 
```

检索工作表：

```
SpreadsheetService s = googleConn.getSpreadSheetService();
String spreadsheetURL = "https://spreadsheets.google.com/feeds/spreadsheets/" + file.getId();
SpreadsheetEntry spreadsheet = s.getEntry(new URL(spreadsheetURL), SpreadsheetEntry.class); 
```

添加数据：

```
WorksheetFeed worksheetFeed = s.getFeed(spreadsheet.getWorksheetFeedUrl(), WorksheetFeed.class);
List<WorksheetEntry> worksheets = worksheetFeed.getEntries();
WorksheetEntry worksheet = worksheets.get(0);

URL cellFeedUrl= worksheet.getCellFeedUrl ();
CellFeed cellFeed= s.getFeed (cellFeedUrl, CellFeed.class);

CellEntry cellEntry= new CellEntry (1, 1, "aa");
cellFeed.insert (cellEntry); 
```

另外，请参阅此相关[问题](https://stackoverflow.com/questions/13253955/invalid-grant-when-calling-java-google-drive-api-with-service-account/13259738)

# iphone - 有没有办法通过 openURL：在 iPhone 版 Google+ 应用上从另一个应用发起视频群聊？

> ID：13229303
> 
> 赞同：0
> 
> 时间：2012-11-05T09:34:03.477
> 
> 标签：iphone, google-plus, openurl

我正在构建一个需要从 iPhone 开始视频会议的应用程序。他们实现它的方式是首先检查是否安装了 Skype，如果是，我开始使用 Skype 进行视频会议。如果没有，我正在检查是否安装了 Google+ 应用程序。如果是，我想用 Google+ 用户名打开该应用程序以开始与用户的视频群聊。

一个例子是：

```
[[UIApplication sharedApplication] openURL:"googleplus://username@gmail.com"] 
```

您知道这是否可能，以及要调用的正确标识符是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:03:15.140

目前，仅通过 API 调用无法启动 Google+ 环聊。但是，有一个 Google+ 环聊按钮可以启动一个。

[https://developers.google.com/+/hangouts/button](https://developers.google.com/+/hangouts/button)

# css - 有没有办法使用css和清除空间来隐藏文本？

> ID：13229304
> 
> 赞同：0
> 
> 时间：2012-11-05T09:34:06.903
> 
> 标签：css

我正在尝试为这个问题想出一个解决方案。

我有一个控件，背景是图像。

我想在表单上的文本包含在 bg 图像中，但是为了便于访问，我想将它包含在 H3 标记中。

我所拥有的解决方案遇到的问题是空间仍然被分配，我需要它被抑制。它也需要对 Google 友好。

这是我有的2个解决方案：

```
text-indent:-999px;

text-indent:100%;  
white-space:nowrap;  
overflow:hidden; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:37:33.360

隐藏元素的常规方法是使用以下方法之一：

`visibility:hidden;`它隐藏了元素但仍然占用空间。

`display:none;`它隐藏了元素并且不占用空间。

我相信第二个是你在这种情况下想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:44:43.903

嗯，首先

```
display: none; 
```

但是，如果您愿意，可能还有其他解决方案来设置标题标签的样式

```
/* on its container */
overflow: hidden;

/* on h3 tag */
float: left;
margin-left: -100%; 
```

或者

```
font-size: 0;
line-height: 0;
height: 0;
overflow: hidden; 
```

您可能还需要设置/重置一些其他属性，以清除标题周围的任何其他空间，例如

```
margin, padding, white-space, text-indent, border, etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:46:58.150

您可以给`font-size:0;`您的**h3**标签 HEADING 将在您的代码中与您的背景。这也将帮助您进行**SEO** .. **[演示](http://tinkerbin.com/Vz96CodY)**

**HTML**

```
<div id="wrap">    
  <h3>heading</h3>
</div> 
```

**CSS**

```
#wrap {
   height: 230px;
   width:660px;
   background:url("http://www.eldercarefunding.org/Portals/18/Skins/s_eldercare_green/images/header.bgL.png") no-repeat 0 0;

}
#wrap h3 {
  font-size:0;
} 
```

# c++ - QProgresdialog：函数正在执行时，忙等待栏没有移动

> ID：13229308
> 
> 赞同：0
> 
> 时间：2012-11-05T09:34:31.903
> 
> 标签：c++, qt, thread-safety, progress-bar

我试图在一个函数执行时显示一个繁忙的等待栏，我的问题是一旦函数启动它就停止移动。

```
MyProgressDialog *progBar= new MyProgressDialog();
    QProgressBar* bar = new QProgressBar(progBar);
    bar->setRange(0, 0);
    bar->setValue(0);

    progBar->setBar(bar);
    QString labeltext=QString("<qt> <center><big><b>%1</b></big></center> <br><b>%2</b><br> %3 <br><b>%4</b><br> %5</qt>")
                         .arg(progBar->labeltext)
                         .arg("File in :")
                         .arg(FileI)
                         .arg("File out :")
                         .arg(FileO);
    progBar->label->setText(labeltext);    
    progBar->setValue(10);
    progBar->show();
    progBar->setValue(20);
    Sleep(500);
    progBar->setValue(50);
    Sleep(500);
    MyFunction(FileI,FileO,mode,key);
    Sleep(500);
    progBar->setValue(80);
    Sleep(500);
    progBar->setValue(100);
    progBar->close();
    delete bar;
    delete progBar; 
```

我用睡眠扭曲了我的函数并设置了值以让它移动但徒劳无功，当我删除它们时 MyProgressdialog 没有显示它的内容，我需要在单独的线程中午餐我的函数吗？我尝试使用 QFutureWatcher：

```
 QFutureWatcher<void> futureWatcher;
                       QFuture<void> f1 = run(
                                              MyFunction,
                                              filePath,
                                              file.absolutePath()+"/OUT_"+fileN,
                                              1,
                                              key
                                              );
                       QObject::connect(&futureWatcher, SIGNAL(finished()), progBar, SLOT(reset()));
                       QObject::connect(progBar, SIGNAL(canceled()), &futureWatcher, SLOT(cancel()));
                       QObject::connect(&futureWatcher, SIGNAL(progressRangeChanged(int,int)), progBar, SLOT(setRange(int,int)));
                       QObject::connect(&futureWatcher, SIGNAL(progressValueChanged(int)), progBar, SLOT(setValue(int)));

                       // Start the computation.
                       futureWatcher.setFuture(f1);
                       // Display the dialog and start the event loop.
                       progBar->exec();
                       futureWatcher.waitForFinished();
                       delete progBar; 
```

它工作正常，当我只调用一次 MyFunction （对于一个文件）时，我的栏正在移动，但是当我多次调用 MyFunction 时出现问题（对于许多文件连续）：它可以工作，但我得到所有文件的相同 OUT_file处理，我认为这是多线程问题。

**编辑：** `class MyProgressDialog`

```
class MyProgressDialog: public QProgressDialog
{
  Q_OBJECT

  public:

    MyProgressDialog()
      {

      qDebug()<<"MyProgressDialog constructor";

      label=new QLabel(this);

      QPalette* palette = new QPalette();
      palette->setColor(QPalette::Window,"#F8F8FF");
      setPalette(*palette);

      QFont* font = new QFont("Courier New");
          font->setItalic(true);
          font->setPixelSize(15);
      setFont(*font);
      adjustSize();

     setWindowIcon(QIcon(QApplication::applicationDirPath()+"/icons/icon1.png"));
     setWindowFlags(Qt::WindowStaysOnTopHint);
     setMinimumWidth(500);
     setMinimumHeight(200);
     labeltext=QString("Please wait until Encryption/Decryption was done");
     label->setText(labeltext);
     label->adjustSize();
     label->setWordWrap (true);
     setLabel(label);

     setRange(0,100);
     setWindowTitle("MyFunction progress");        
     setModal(true);    

    }
    ~MyProgressDialog()
    {
        qDebug()<<"MyProgressDialog destructor";
        delete label;
    }

public:

  int value;     
  QString labeltext;
  QLabel* label;

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:23:30.643

Qt 中的 UI 是事件驱动的。因此，在与 ui 相同的线程中执行您的代码将阻塞每个 ui 事件，直到您的函数完成。有两种方法可以显示进步。

1.  使用线程进行计算并将更新事件发送到 UI
2.  更简单的方法：在每次调用`setValue`后`show`调用`QApplication::processEvents();`静态方法。调用`QApplication::processEvents()`将调度当前在事件循环中排队的事件。这些事件包括所有与 ui 相关的事件

这是 gcc/mingw gcc 的代码示例

```
#include <QApplication>
#include <QProgressBar>

int main(int argc, char * argv[])
{
    QApplication app(argc, argv);

    QProgressBar bar;
    bar.setRange(0, 100);
    bar.show();
    app.processEvents();
    usleep(250000);

    for(int i = 1; i <= 10; ++i)
    {
            bar.setValue(i * 10);
            app.processEvents();
            usleep(250000);
    }

    return 0;
} 
```

它显示进度条并每 0.25 秒步进 10

您的代码应如下所示：

```
MyProgressDialog *progBar= new MyProgressDialog();
QProgressBar* bar = new QProgressBar(progBar);
bar->setRange(0, 100); // note your "busy state won't be shown as you're changing value right after show
bar->setValue(0);

progBar->setBar(bar);
QString labeltext=QString("<qt> <center><big><b>%1</b></big></center> <br><b>%2</b><br> %3 <br><b>%4</b><br> %5</qt>")
                     .arg(progBar->labeltext)
                     .arg("File in :")
                     .arg(FileI)
                     .arg("File out :")
                     .arg(FileO);
progBar->label->setText(labeltext);    
progBar->setValue(10);
progBar->show();
QApplication::processEvents(); // HERE
progBar->setValue(20);
QApplication::processEvents(); // HERE
Sleep(500);
progBar->setValue(50);
QApplication::processEvents(); // HERE
Sleep(500);
MyFunction(FileI,FileO,mode,key);
Sleep(500);
progBar->setValue(80);
QApplication::processEvents(); // HERE
Sleep(500);
progBar->setValue(100);
progBar->close();
QApplication::processEvents(); // HERE
delete bar;
delete progBar; 
```

# iphone - twitter.framework 问题

> ID：13229309
> 
> 赞同：1
> 
> 时间：2012-11-05T09:34:31.857
> 
> 标签：iphone, objective-c, twitter, ios5.1

我正在尝试在 iOS 5 上使用 twitter 实现单点登录，一切正常，除非 settings.app 中没有帐户，应用程序陷入似乎无限循环的状态，并且此消息出现在控制台上**“twitterd会话中断，正在重新启动。”**

应用程序冻结在这行代码上

```
if ([TWTweetComposeViewController canSendTweet]) 
```

非常感谢任何帮助。

**//////EDIT////////** 这是我的代码 if ([TWTweetComposeViewController canSendTweet]) { ACAccountStore *accountStore = [[ACAccountStore alloc] init];

```
// Create an account type that ensures Twitter accounts are retrieved.
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

// Request access from the user to use their Twitter accounts.
[accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
    if(granted) {
        // Get the list of Twitter accounts.
        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

        // For the sake of brevity, we'll assume there is only one Twitter account present.
        // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
        if ([accountsArray count] > 0)
        {
            // Grab the initial Twitter account to tweet from.
            ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

            NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/account/verify_credentials.json"];
            TWRequest *req = [[TWRequest alloc] initWithURL:url
                                                 parameters:nil
                                              requestMethod:TWRequestMethodGET];

            // Important: attach the user's Twitter ACAccount object to the request
            req.account = twitterAccount;

            [req performRequestWithHandler:^(NSData *responseData,
                                             NSHTTPURLResponse *urlResponse,
                                             NSError *error) {

                // If there was an error making the request, display a message to the user
                if(error != nil) {

                }

                // Parse the JSON response
                NSError *jsonError = nil;
                id resp = [NSJSONSerialization JSONObjectWithData:responseData
                                                          options:0
                                                            error:&jsonError];

                // If there was an error decoding the JSON, display a message to the user
                if(jsonError != nil) {

                    return;
                }

            }];

        }
    }
}];
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T09:38:16.793

使用此代码检查 Twitter 帐户是否存在：-

```
if ([TWRequest class])
            {
            ACAccountStore *as = [[ACAccountStore alloc] init];
            ACAccountType *accountType = [as accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
            NSArray *twitterAccounts = [as accountsWithAccountType:accountType];
            if (!twitterAccounts.count)
            {
                NSLog(@"No Twitter Account configured");

            }
            } 
```

希望对你有帮助！

# c++ - 用于服务网络连接的英特尔 TBB 任务 - 好模型？

> ID：13229311
> 
> 赞同：0
> 
> 时间：2012-11-05T09:34:43.540
> 
> 标签：c++, multithreading, network-programming, tbb, lock-free

我正在为一个网络产品开发一个后端，它服务于十几个客户（`N`= 10-100）。每个连接需要 2 个周期性任务，即心跳和通过 SSH 下载遥测数据，每个任务的频率为`H`Hz。还有来自前端的不同类型的额外事件。根据每个任务的性质，每个连接的套接字上都有一个等待调用的可靠部分`select`，这允许操作系统在等待响应时经常在线程之间切换以服务其他客户端。

在我的初始实现中，我为每个连接创建 3 个线程（心跳、遥测、额外），每个线程等待一个条件变量，每次在工作队列中有事情要做时都会被戳。工作队列使用计时器和来自前端的命令填充上述周期性事件。

我在这里有几个问题。

1.  将工作线程池方法切换到英特尔 TBB 任务是否是个好主意？如果是这样，我需要初始化哪个线程值`tbb::task_scheduler_init`？

2.  在当前有 300 个线程等待条件变量（每秒`signal`ed次）的方法中，它很可能成为可伸缩性的瓶颈（尤其是在调用 的一侧）。有没有更好的方法让每个任务只唤醒一个工人？`N * H * 3``signal`

3.  如何在 TBB 中实现工作线程的唤醒？

感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:59:41.043

很难说切换到 TBB 是否是一个好方法。您的性能要求是什么，当前实施的性能数字是多少？如果当前的解决方案足够好，那么它可能不值得切换。

如果您想比较两者（当前 impl 与 TBB）以了解哪个提供更好的性能，那么您可以为每个实现执行所谓的“Tracer bullet”（来自[The Pragmatic Programmer书）并比较结果。](https://rads.stackoverflow.com/amzn/click/com/020161622X)简单来说，做一个简化的原型并比较结果。

正如[这个答案](https://stackoverflow.com/a/10800412/1158895)中提到的，在没有具体证据表明您将要更改的内容会有所改进的情况下，尝试进行性能改进通常不是一个好主意。

除此之外，您可以考虑创建一个线程池，其线程数是 CPU 内核数的函数（可能是每个内核 1 或 1.5 个线程的因子）线程将从公共工作队列中取出任务. 将有 3 种类型的任务：心跳、遥测、额外。这应该可以减少使用大量线程时上下文切换造成的负面影响。

# c# - request.timeout 不会抛出异常

> ID：13229315
> 
> 赞同：0
> 
> 时间：2012-11-05T09:34:48.877
> 
> 标签：c#, httpwebrequest, timeout, httpwebresponse, timeoutexception

```
 Uri URL2 = new Uri(@"http://www......com");                      
 HttpWebRequest request2 = (HttpWebRequest)WebRequest.Create(URL2);
 request2.Timeout = 10000;  
 HttpWebResponse response2 = (HttpWebResponse)request2.GetResponse(); 
```

我正在使用上面的代码进行网络请求。当我写一个愚蠢的网址时，例如 www.oiasjdilasod.com 它会抛出异常；但是，当现有页面在几个小时内不可用时，我无法获得此异常。它不会抛出任何异常并停止运行。当此页面不可用时，我在 Internet Explorer 上尝试过，它显示页面找不到 http 400 错误请求。您对如何捕获此异常有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:40:50.753

您从服务器收到响应的事实意味着它可用，只是无法正常工作 - 因此请求已发出并且不会因为服务器已响应而超时。

这*不是你想要的回应*。

相反，您应该检查[StatusCode](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.statuscode%28v=vs.80%29.aspx)属性。

```
 if(response2.StatusCode != HttpStatusCode.OK)
 {
      throw new Exception("Site is responding incorrectly!");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:43:45.013

我以前也遇到过同样的问题

```
catch(WebException e) 
{
 Console.WriteLine(e.toString()); 
} 
```

会解决的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:44:14.703

> 这段代码对我有用

```
try
            {
                Uri URL2 = new Uri(@"http://www.*****.com");
                HttpWebRequest request2 = (HttpWebRequest)WebRequest.Create(URL2);
                request2.Timeout = 100;
                HttpWebResponse response2 = (HttpWebResponse)request2.GetResponse();
            }
            catch (WebException e)
            {
                MessageBox.Show(e.Message.ToString());
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T09:42:02.923

你抛出什么异常？常规异常不行，它必须是 WebException。

```
...
catch(WebException e) 
{
 Console.WriteLine("Error: "+ e.Status); 
} 
```

编辑：

超时异常（连同 WebException）怎么样？

```
catch (TimeoutException e)
{
 Console.WriteLine(e);
}
catch(WebException e) 
{
 Console.WriteLine("Error: "+ e.Status); 
} 
```

# iphone - 是否可以在不使用保存在 ACAccount 中的凭据的情况下进行 TWRequest？

> ID：13229318
> 
> 赞同：1
> 
> 时间：2012-11-05T09:34:59.603
> 
> 标签：iphone, ios5, twitter

我想使用他们的新链接直接将图像上传到 Twitter `upload_with_media.json`。让我知道是否有人正在使用 OAuth（目前我正在使用`DMTwitterOauth`）执行此操作。或者是否有`TWRequest`不使用保存在中的凭据的解决方案`ACAccount`？我的应用程序带有密钥、密钥等，但我不想将凭据保存在 Settings.app 下的 Twitter 帐户中。

# ios - MPMoviePlayerController 不加载电影

> ID：13229320
> 
> 赞同：3
> 
> 时间：2012-11-05T09:35:02.893
> 
> 标签：ios, mpmovieplayercontroller, quicktime

我正在使用以下代码：

```
NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"MovieName" ofType:@"mov"];
        NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath isDirectory:NO];
        MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
        [self.view addSubview:moviePlayerController.view];
        moviePlayerController.movieSourceType = MPMovieSourceTypeFile;
        moviePlayerController.contentURL = fileURL;
        moviePlayerController.fullscreen = YES;
        [moviePlayerController prepareToPlay];
        [moviePlayerController play]; 
```

但是，当执行代码时，会出现电影播放器​​，但永远不会加载电影。

为了我自己的理智，我添加了以下行：

```
NSData *thedata = [[NSData alloc]initWithContentsOfFile:filepath]; 
```

而且我可以验证电影确实存在，因为它已加载到 NSData 对象中。

我要去哪里工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:38:59.373

试试这个 ：

```
NSString *filepath = [[NSBundle mainBundle] pathForResource:@"MovieName" ofType:@"mov"];
NSURL *fileURL = [NSURL fileURLWithPath:filepath isDirectory:NO];

MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc]    initWithContentURL:fileURL];
moviePlayerController.view.frame = self.view.bounds;
moviePlayerController.movieSourceType = MPMovieSourceTypeFile;
moviePlayerController.fullscreen = YES;

[self.view addSubview:moviePlayerController.view];
[moviePlayerController prepareToPlay];
[moviePlayerController play]; 
```

# report - 导出为文本时如何删除“stimulsoft 报表查看器”中的单位分隔符？

> ID：13229323
> 
> 赞同：0
> 
> 时间：2012-11-05T09:35:04.843
> 
> 标签：report, reporting, reportviewer, stimulsoft, reportgenerator

当我在“报告查看器”中另存为文本 stimulsoft 报告时，有单位分隔符。如果我以 psf、word 等其他格式保存报告，一切正常，但是当我保存为文本时，每个新页面都有单位分隔符，但我不想看到它，我希望结果连续显示没有任何分离。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:43:12.473

尝试导出为 CSV。导出设置中有一个“跳过列标题”选项。

# android - 已弃用的方法，但替换方法需要更高的 api

> ID：13229328
> 
> 赞同：23
> 
> 时间：2012-11-05T09:35:49.610
> 
> 标签：android, deprecated

我想使用`view.setBackgroundDrawable(Drawable)`，但这种方法已被[弃用](http://developer.android.com/reference/android/view/View.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29)。它被替换为`.setBackground(Drawable)`。但我的最低 API 8 无法处理。它告诉我将最小值设置为 API 16。

**有没有办法根据设备的 API 使用不同的方法？**

就像是

```
if(API<16)
{
  view.setBackgroundDrawable(Drawable)
}
else
{
  view.setBackground(Drawable)
} 
```

还是我真的必须更改最低 API 才能做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-05T09:41:57.417

`setBackgroundDrawable`已弃用，但它仍然有效，因此您可以使用它。但是如果你想完全正确，你应该使用这样的东西

```
int sdk = android.os.Build.VERSION.SDK_INT;
if(sdk < android.os.Build.VERSION_CODES.JELLY_BEAN) {
    setBackgroundDrawable()
} else {
    setBackground();
} 
```

为此，您需要将 buildTarget api 16 和 min build 设置为 7 或类似的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T09:43:13.070

像这样的东西：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN){
   view.setBackgroundDrawable(Drawable)
} else {
   view.setBackground(Drawable)
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T09:41:41.953

您可以根据 API 版本使用不同的方法。

例如：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.FROYO) {
        //Methods for version <8 (FROYO)
} else {
        // Methods for version >=8
} 
```

在这里将您设置`targetSDkversion`为任何更高版本（例如此处为 16）并将您设置`minsdkversion`为较低版本（API 7）。

# jquery - JSF 2.0 命令按钮使用 jQuery 防止多次提交

> ID：13229329
> 
> 赞同：1
> 
> 时间：2012-11-05T09:35:50.617
> 
> 标签：jquery, jsf-2

我正在使用 JSF 2.0 并在双击提交按钮时处理多次提交。

单击时我使用 jQuery 禁用命令按钮，这是我的代码：

```
$("input[name='form:submitButton']").click(function() {
    $(this).attr("disabled", true);
    return true;
}); 
```

当我单击按钮时，提交按钮成功禁用，但提交根本没有触发。

任何人都可以给我一些提示吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:16:07.337

尝试

```
$("input[name='form:submitButton']").click(function() {
    setTimeout("$(this).attr('disabled', true);", 50);
    return true;
}); 
```

或者

```
<h:commandButton value="Go"
   onclick="setTimeout('this.disabled = true;', 50);" 
   action="#{bean.go()}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:49:29.413

尝试这样的事情

```
<h:commandButton value="Submit" onclick="document.getElementById(\'' + this.id + '\').disabled=true;">
  <f:ajax execute="@form" listener="#{bean.listener}"/> 
</h:commandButton> 
```

您可以添加`f:ajax oncomplete="....disabled=false"`或更新整个视图以重新启用该按钮。

# scripting - vbScript Arrat 错误

> ID：13229332
> 
> 赞同：0
> 
> 时间：2012-11-05T09:36:04.487
> 
> 标签：scripting, vbscript

我有以下 CoreAPP.txt 日志文件：

> [10/31/2012 19:53:41:889 SWAP INF] {hap=CB2:app=Internet Explorer_b1 6.0.3790.3959:tid=22C0:usr=B9D327} 上传经过的时间：0.718 秒
> 
> [10/31/2012 19:53:42:639 SWAP INF] {hap=CB2:app=Internet Explorer_b1 6.0.3790.3959:tid=22C0:usr=V9V327} 启动已用时间：3.250 秒
> 
> [10/31/2012 19:56:37:815 ???? INF] {tid=4004:usr=V47235} 打开虚拟注册表时发生错误（部分：9），rc：07B01F0C-0000004A
> 
> [10/31/2012 19:56:37:846 ???? INF] {tid=4004} 打开虚拟注册表时出错（第 9 节），rc: 07B01F0C-0000004A
> 
> [10/31/2012 10:45:00:576 ???? INF] {tid=1650} 打开虚拟注册表时发生错误（第 9 节），rc：07B01F0C-0000004A ElapR Application Virtualization Client 无法连接到流 URL 'RTSP://SRVW23E:554/V1321_BDP_V1_R1_SB/V1321_BDP_C1_P2PM_SS。 sft'（rc 1690900A-00002002，原始 rc 1690900A-00002002）。
> 
> [10/31/2012 00:29:59:843 OSDF ERR] {tid=1464} Application Virtualization Client 无法解析 OSD 文件 'C:\SoftCache\SoftGrid Client\OSD Cache\edCc4305-3f6C-4dcc-3d70 -404eb8bd97d8.osd'。原因：XML解析失败（rc 00000A25-00000002）
> 
> [10/31/2012 08:24:35:869 ???? ERR] {tid=336C:usr=t405230} 检测到损坏的 cp 文件（'V:\V1321_BDP\osguard.cp'）。osguard cp 文件，未采取更正措施
> 
> [10/31/2012 22:16:39:240 JGSW ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58} Application Virtualization Client 无法连接到流 URL 'RTSP://PSWQAPP1: 554/V14678993_BDP_C15_E2AM_SS/V14678993_BDP_C15_E2AM_SS.sft'（rc 1690900A-00002002，原始 rc 1690900A-00002002）。
> 
> [10/31/2012 22:16:39:240 SWAP ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58} 客户端无法连接到 Application Virtualization Server (rc 1690900A-00002002)
> 
> [10/31/2012 22:17:09:163 AMGR ERR] {tid=4F54} 指定的应用程序名称（应用程序集成）不明确。一些潜在的匹配项：应用程序集成 7.0.1756.1756 应用程序集成 9.2.2373.2373
> 
> [10/31/2012 22:17:09:163 AMGR ERR] {tid=4F54} 应用程序虚拟化客户端无法打开应用程序集成
> 
> [10/31/2012 00:03:14:313 SWAP WRN] {tid=507C:usr=N28712} 无法加载 OSD 文件 \PSWQAPP1\Content\D1311_bDP_Adobe_Reader_9.3.3\D1311_bDP_Adobe_Reader 9.3.3.osd
> 
> [10/31/2012 00:03:14:313 AMGR INF] {tid=507C:usr=i435145} 应用程序管理器无法从 '\PSWQAPP1\Content\D1311_bDP_Adob_dobe_Reader_9.3.3\D1311_bDP_Adob_b_Adobe Reader 9.3.3 创建应用程序。 osd'（rc 0C405664-00000002）。
> 
> ==== [10/31/2012 13:35:16:987 JGSW ERR] {hap=1:app=Abaculus 1.0.0.1:tid=14C8:usr=R3R7DF42} Application Virtualization Client 无法连接到流 URL 'RTSP:%SFT_SRV%:554/D1311_bDP_Adob_b_Adobe_Abaculus_15_01/D1311_bDP_Adob_b_Adobe_Abaculus_15_01.sft'（rc 19D02E0A-10000002，原始 rc 19D02E0A-10000002）。
> 
> [10/31/2012 13:35:47:998 SWAP ERR] {hap=2:app=AboutPI-SDK 1.3.0.26:tid=1568:usr=I337721} 无法加载应用程序
> 
> [10/31/2012 19:56:37:862 SWAP INF] {hap=CB3:app=Adobe Reader X 10.0.1.434:tid=4004:usr=V47235} 上传经过的时间：0.609 秒
> 
> [10/31/2012 19:56:38:393 SWAP INF] {hap=CB3:app=Adobe Reader X 10.0.1.434:tid=4004:usr=V47236} 启动已用时间：1.187 秒
> 
> [10/31/2012 19:56:57:487 SWAP INF] {hap=CB3:app=Adobe Reader X 10.0.1.434:tid=4004:usr=V47234} 应用程序关闭
> 
> [2012 年 10 月 31 日 20:01:40:745 ???? INF] {tid=327C:usr=V42235} 打开虚拟注册表时出错（第 9 节），rc: 07B01F0C-0000004A
> 
> [2012 年 10 月 31 日 20:01:40:776 ???? INF] {tid=327C} 打开虚拟注册表时发生错误（部分：9），rc：07B01F0C-0000004A
> 
> [10/31/2012 20:01:40:776 SWAP INF] {hap=CB4:app=Adobe Reader X 10.0.1.434:tid=327C:usr=V422357235} 上传耗时：0.609 秒
> 
> [11/01/2012 16:48:44:157 SWAP INF] {hap=11A4:app=Lotus Notes_b1 6.5.40.5086:tid=361C:usr=A422353001} 启动已用时间：5.219 秒
> 
> [11/01/2012 16:50:21:003 ???? INF] {tid=32D8:usr=W8WS83} 打开虚拟注册表时发生错误（部分：9），rc：07B01F0C-0000004A
> 
> [11/01/2012 16:50:21:066 ???? INF] {tid=32D8} 打开虚拟注册表时发生错误（第 9 节），rc: 07B01F0C-0000004A
> 
> [11/01/2012 16:50:21:082 SWAP INF] {hap=11A5:app=Adobe Reader X 10.0.1.434:tid=32D8:usr=W8WS83} 上传经过的时间：0.703 秒
> 
> [11/01/2012 16:50:22:503 SWAP INF] {hap=11A5:app=Adobe Reader X 10.0.1.434:tid=32D8:usr=W8WS83} 启动已用时间：2.218 秒
> 
> [11/01/2012 16:50:50:395 SWAP INF] {hap=11A5:app=Adobe Reader X 10.0.1.434:tid=32D8:usr=A422353001} 应用程序关闭
> 
> [11/01/2012 16:53:24:367 ???? INF] {tid=1F80:usr=t405230} 打开虚拟注册表时发生错误（部分：9），rc：07B01F0C-0000004A
> 
> [11/01/2012 16:53:24:383 ???? INF] {tid=1F80} 打开虚拟注册表时出错（第 9 节），rc: 07B01F0C-0000004A
> 
> [11/01/2012 16:53:24:383 SWAP INF] {hap=11A6:app=Show Desktop 1.0:tid=1F80:usr=A422353001} 上传已用时间：0.531 秒
> 
> [11/01/2012 16:53:24:727 SWAP INF] {hap=11A7:app=Microsoft Office Excel 2003_b1 11.0.8324.1:tid=251C:usr=V422357235} 上传经过的时间：0.0 秒
> 
> [11/01/2012 16:53:24:758 SWAP INF] {hap=11A6:app=Show Desktop 1.0:tid=1F80:usr=V47234} 启动已用时间：1.78 秒
> 
> [11/01/2012 16:53:25:117 SWAP INF] {hap=11A6:app=Show Desktop 1.0:tid=1F80:usr=V422357235} 应用程序关闭
> 
> [11/01/2012 10:45:00:576 ???? INF] {tid=1650} 打开虚拟注册表时发生错误（第 9 节），rc：07B01F0C-0000004A ElapR Application Virtualization Client 无法连接到流 URL 'RTSP://SRVW23E:554/V1321_BDP_V1_R1_SB/V1321_BDP_C1_P2PM_SS。 sft'（rc 1690900A-00002002，原始 rc 1690900A-00002002）。
> 
> [11/01/2012 00:29:59:843 OSDF ERR] {tid=1464} Application Virtualization Client 无法解析 OSD 文件 'C:\SoftCache\SoftGrid Client\OSD Cache\edCc4305-3f6C-4dcc-3d70 -404eb8bd97d8.osd'。原因：XML解析失败（rc 00000A25-00000002）
> 
> [11/01/2012 08:24:35:869 ???? ERR] {tid=336C:usr=t405230} 检测到损坏的 cp 文件（'V:\V1321_BDP\osguard.cp'）。osguard cp 文件，未采取更正措施
> 
> [11/01/2012 22:16:39:240 JGSW ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58} Application Virtualization Client 无法连接到流 URL 'RTSP://PSWQAPP1: 554/V14678993_BDP_C15_E2AM_SS/V14678993_BDP_C15_E2AM_SS.sft'（rc 1690900A-00002002，原始 rc 1690900A-00002002）。
> 
> [11/01/2012 22:16:39:240 SWAP ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58} 客户端无法连接到 Application Virtualization Server (rc 1690900A-00002002)
> 
> [11/01/2012 22:17:09:163 AMGR ERR] {tid=4F54} 指定的应用程序名称（应用程序集成）不明确。一些潜在的匹配项：应用程序集成 7.0.1756.1756 应用程序集成 9.2.2373.2373
> 
> [11/01/2012 22:17:09:163 AMGR ERR] {tid=4F54} 应用程序虚拟化客户端无法打开应用程序集成
> 
> [11/01/2012 00:03:14:313 SWAP WRN] {tid=507C:usr=N28712} 无法加载 OSD 文件 \PSWQAPP1\Content\D1311_bDP_Adobe_Reader_9.3.3\D1311_bDP_Adobe_Reader 9.3.3.osd
> 
> [11/01/2012 00:03:14:313 AMGR INF] {tid=507C:usr=i435145} 应用程序管理器无法从 '\PSWQAPP1\Content\D1311_bDP_Adob_dobe_Reader_9.3.3\D1311_bDP_Adob_b_Adobe Reader 9.3.3 创建应用程序。 osd'（rc 0C405664-00000002）。
> 
> ====
> 
> [11/01/2012 13:35:16:987 JGSW ERR] {hap=1:app=Abaculus 1.0.0.1:tid=14C8:usr=R3R7DF42} Application Virtualization Client 无法连接到流 URL 'RTSP:% SFT_SRV%:554/D1311_bDP_Adob_b_Adobe_Abaculus_15_01/D1311_bDP_Adob_b_Adobe_Abaculus_15_01.sft'（rc 19D02E0A-10000002，原始 rc 19D02E0A-10000002）。
> 
> [11/01/2012 13:35:47:998 SWAP ERR] {hap=2:app=AboutPI-SDK 1.3.0.26:tid=1568:usr=I337721} 无法加载应用程序 [11/01/2012 16: 53:25:399 SWAP INF] {hap=11A7:app=Microsoft Office Excel 2003_b1 11.0.8324.1:tid=251C:usr=V47234} 启动已用时间：0.891 秒
> 
> [11/05/2012 10:43:37:527 SWAP INF] {hap=1510:app=Adobe Reader X 10.0.1.434:tid=2AE8:usr=V47234} 应用程序关闭
> 
> [11/05/2012 10:44:00:793 SWAP INF] {hap=1511:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=1D80:usr=V422357235} 上传经过的时间：0.0 秒
> 
> [11/05/2012 10:44:03:809 SWAP INF] {hap=1511:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=1D80:usr=V422357235} 启动已用时间：3.172 秒
> 
> [11/05/2012 10:44:15:965 SWAP INF] {hap=1511:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=1D80:usr=V422357235} 应用程序关闭
> 
> [11/05/2012 10:44:20:637 SWAP INF] {hap=1512:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=3B9C:usr=V47234} 上传经过的时间：0.0 秒
> 
> [11/05/2012 10:44:23:606 SWAP INF] {hap=1512:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=3B9C:usr=V47234} 启动已用时间：3.125 秒
> 
> [11/05/2012 10:44:32:481 SWAP INF] {hap=150B:app=Microsoft Office Excel 2003_b1 11.0.8324.1:tid=19C:usr=V47234} 应用程序关闭
> 
> [11/05/2012 10:44:38:575 SWAP INF] {hap=1512:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=3B9C:usr=E831415} 应用程序关闭
> 
> [11/05/2012 10:45:00:560 ???? INF] {tid=1650:usr=V47234} 打开虚拟注册表时出错（第 9 节），rc: 07B01F0C-0000004A
> 
> [11/05/2012 10:45:00:576 ???? INF] {tid=1650} 打开虚拟注册表时发生错误（第 9 节），rc：07B01F0C-0000004A ElapR Application Virtualization Client 无法连接到流 URL 'RTSP://SRVW23E:554/V1321_BDP_V1_R1_SB/V1321_BDP_C1_P2PM_SS。 sft'（rc 1690900A-00002002，原始 rc 1690900A-00002002）。
> 
> [11/05/2012 00:29:59:843 OSDF ERR] {tid=1464} Application Virtualization Client 无法解析 OSD 文件 'C:\SoftCache\SoftGrid Client\OSD Cache\edCc4305-3f6C-4dcc-3d70 -404eb8bd97d8.osd'。原因：XML解析失败（rc 00000A25-00000002）
> 
> [11/05/2012 08:24:35:869 ???? ERR] {tid=336C:usr=t405230} 检测到损坏的 cp 文件（'V:\V1321_BDP\osguard.cp'）。osguard cp 文件，未采取更正措施
> 
> [11/05/2012 22:16:39:240 JGSW ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58} Application Virtualization Client 无法连接到流 URL 'RTSP://PSWQAPP1: 554/V14678993_BDP_C15_E2AM_SS/V14678993_BDP_C15_E2AM_SS.sft'（rc 1690900A-00002002，原始 rc 1690900A-00002002）。
> 
> [11/05/2012 22:16:39:240 SWAP ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58} 客户端无法连接到 Application Virtualization Server (rc 1690900A-00002002)
> 
> [11/05/2012 22:17:09:163 AMGR ERR] {tid=4F54} 指定的应用程序名称（应用程序集成）不明确。一些潜在的匹配项：应用程序集成 7.0.1756.1756 应用程序集成 9.2.2373.2373
> 
> [11/05/2012 22:17:09:163 AMGR ERR] {tid=4F54} 应用程序虚拟化客户端无法打开应用程序集成
> 
> [11/05/2012 00:03:14:313 SWAP WRN] {tid=507C:usr=N28712} 无法加载 OSD 文件 \PSWQAPP1\Content\D1311_bDP_Adobe_Reader_9.3.3\D1311_bDP_Adobe_Reader 9.3.3.osd
> 
> [11/05/2012 00:03:14:313 AMGR INF] {tid=507C:usr=i435145} 应用程序管理器无法从 '\PSWQAPP1\Content\D1311_bDP_Adob_dobe_Reader_9.3.3\D1311_bDP_Adob_b_Adobe Reader 9.3.3 创建应用程序。 osd'（rc 0C405664-00000002）。
> 
> ==== [11/05/2012 13:35:16:987 JGSW ERR] {hap=1:app=Abaculus 1.0.0.1:tid=14C8:usr=R3R7DF42} Application Virtualization Client 无法连接到流 URL 'RTSP:%SFT_SRV%:554/D1311_bDP_Adob_b_Adobe_Abaculus_15_01/D1311_bDP_Adob_b_Adobe_Abaculus_15_01.sft'（rc 19D02E0A-10000002，原始 rc 19D02E0A-10000002）。
> 
> [11/05/2012 13:35:47:998 SWAP ERR] {hap=2:app=AboutPI-SDK 1.3.0.26:tid=1568:usr=I337721} 无法加载应用程序

我的脚本总是从当前日期读取上述日志......并捕获错误数组......

```
option Explicit

const ForReading = 1, ForWriting = 2, ForAppending = 3
const TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0

dim arrErrors(5)
dim objFSO, objServerList, objErrorLog, strErrorLine, strError
dim strComputer, strToday, strFilePath, objCoreApp, strLine, today, i 

set objFSO = CreateObject("Scripting.FileSystemObject")
set objServerList = objFSO.OpenTextFile("list.txt", ForReading, false, TriStateTrue)
set objErrorLog = objFSO.CreateTextFile("error.log")

strToday = Date()

arrErrors(0) = "The Application Virtualization Client could not connect to stream"
arrErrors(1) = "XML parsing failure"
arrErrors(2) = "corrupt cp file detected"
arrErrors(3) = "The client was unable to connect"
arrErrors(4) = "Virtualization Client cannot open Application Integration"
arrErrors(5) = "Could not load OSD file"

Do while not (objServerList.AtEndOfStream)
  strComputer = objServerList.ReadLine

  strFilePath = "\\" & strComputer & "\d$\LOGFILES\"

  set objCoreApp = objFSO.OpenTextFile(strFilePath & "CoreAPP.txt", ForReading, False, TriStateTrue)

  objErrorLog.WriteLine strComputer & vbTab & "," & vbTab & "Checking"

  do while not (objCoreApp.AtEndOfStream)
    strLine = objCoreApp.ReadLine

    'If InStr (strLine, today) = 0 Then

    if (left(strLine, len(strToday) + 1) = "[" & strToday) then
      strErrorLine = objCoreApp.ReadLine

      for i = 0 to ubound(arrErrors)
        strError = arrErrors(i)

        if (left(lcase(strErrorLine), len(strError)) = lcase(strError)) then
          objErrorLog.WriteLine strErrorLine & vbTab & strComputer
          exit for
        end If
      next
    end If
  loop
  objCoreApp.close
loop
objErrorLog.WriteLine "Completed Checking all the servers"

objErrorLog.Close
objServerList.Close
MsgBox "Script Completed" 
```

上述脚本的问题是......脚本只能捕获“检测到损坏的 cp 文件”......只有......事实上，上述所有数组情况都是正确的，但没有捕获并写入日志文件......不是确定为什么它没有捕捉到剩余的错误......寻求帮助......

当我用上面的日志文件编译上面的脚本时......得到下面的输出......

```
MYserver1   ,   Checking
corrupt cp file detected adsa   MYserver1   
Completed Checking all the servers 
```

# php - PHP 使用带有谷歌分析事件跟踪的 echo

> ID：13229333
> 
> 赞同：-1
> 
> 时间：2012-11-05T09:36:14.267
> 
> 标签：php, events, echo, tracking

我需要有关此 PHP 脚本的帮助，该脚本由于某种原因无法正常工作，如下所示

```
<?php
.
.
.
echo "<li><a href='#' onclick='print(); return false; _gaq.push(['_trackEvent', 'check', 'test1', 'Print01']); '>";
echo "</a></li>";
.
.                                       
.
?> 
```

如果我删除谷歌跟踪事件代码 onclick print() 将毫无问题地工作，有人知道问题出在哪里还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:22:08.713

看来您混淆了 PHP 和 Javascript 代码。onclick 处理程序中的“print()”是 Javascript，除非您定义了名为 的 Javascript 函数，否则`print`它将失败并加载链接。*在返回 false后*进行分析调用也没有用，因为它永远不会运行。

编辑：我有点误会了。您在代码中使用 ' ，以及使用 ' 来分隔包含的文本。通过创建一个单独的函数来处理单击事件，您可能会更好，或者您必须转义单引号。

```
onclick='print(); return false; _gaq.push([\'_trackEvent\', \'check\', \'test1\', \'Print01\']);' 
```

.. 但请记住，PHP 也有转义码，您可能也必须转义 \。我宁愿把它移到一个单独的函数中：

```
<script type="text/javascript">
    function handleClick()
    {
        print();
        _gaq.push(['_trackEvent', 'check', 'test1', 'Print01']);
        return false;
    }
</script> 
```

允许将 'check'、'test1'、'Print01' 作为参数提供给 handleClick 也会使重用变得更容易。

# xcode - Xcode 需要有关照片库管理器发明草案的指南

> ID：13229335
> 
> 赞同：1
> 
> 时间：2012-11-05T09:36:21.957
> 
> 标签：xcode, core-animation, photo-gallery

对于这个问题，我不需要对所有代码进行完整的解释，但帮助我深入了解实现此结果的过程将非常有帮助！一些信息源将引导我到达我想去的地方。
如果您有更好的想法，请随时发表您的意见或建议如何使其变得更好 - 我们只是想跳出常规的相册系统。
在添加的屏幕截图中，我添加了一个绘制的图像，使目的清晰。

1.  通过点击“+”号创建相册。（这显示了一个弹出窗口，用户可以在其中标记图片适用的酒吧/活动；酒吧/活动个人资料图片将出现在专辑封面上）。
2.  新拍摄的照片应出现在屏幕上的单独区域中。它们将漂浮在那里，直到用户将它们拖放到相册中。请注意，图片也是从应用程序中拍摄的（使用智能手机的本机相机）。
3.  当用户将它们添加到被标记的相册时，它们也将自动显示在标记的酒吧/事件配置文件的画廊中。（当然，在应用程序中，个人资料也将可用）。

您会建议我哪些技术/工作流程？
我现在需要创建的只是一个演示可视化工作流的应用程序的空壳（此时数据流并不重要）。
我已经阅读了一些库，例如three20 或 UIImagePicker，我不知道它们是否易于根据我们的需要进行定制。

谢谢！

![相册草稿](../Images/21de3877a4d69c71246802afeae6720f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:46:37.090

我无法评论 Three20 之类的东西，因为我从未真正使用过它们。

我可以建议的一种方法是使用多个滚动视图。根据您的示例，您将需要 2 个单独的滚动视图。（为方便起见，我们称它们为 AlbumsSV 和 PicturesSV）。

AlbumsSV 将根据您的后备存储动态加载内容。我过去使用的一种方法是将自定义视图加载到滚动视图中，因为这样可以实现最大程度的控制，您可以将任何要求指定为视图的属性（即主键等），也可以加载“预览”图像”基于您的数据存储中保存的数据。假设您总是希望将新项目添加为添加到 AlbumsSV 的最后一个元素，那么您可以在处理完所有其他项目后简单地向 AlbumsSV 添加另一个自定义视图。

PicturesSV 将简单地根据用户相机胶卷中的内容加载内容。我再次建议使用自定义视图，因为您可以在自定义视图上设置 FileURL 等属性，这将有助于将项目拖到特定相册中。

希望这可以帮助 ：）

# asp.net - 错误“没有打开相应的起始元素。” 调用网络服务时：从哪里开始？

> ID：13229336
> 
> 赞同：0
> 
> 时间：2012-11-05T09:36:27.073
> 
> 标签：asp.net, web-services

我正在使用一个网络服务，它突然失败并出现以下错误：

```
System.InvalidOperationException was caught
  Message="No corresponding start element is open."
  Source="mscorlib" 
```

正确调用 Web 服务并返回带有有效 xml 的正常响应（与 fiddler 一起检查）。

我有一个巨大的问题，我在生成的soap客户端的某个地方丢失了一个数据元素，但不知道从哪里开始，因为我无法进入自动生成的soap客户端代码。

浪费了几个小时后，我希望有人能帮助我解决如何开始解决这个问题。**有没有办法可以进入自动生成的肥皂客户端代码？** *我可以采取任何替代方法来确定问题所在？*

我正在开发 VS2008 SP1。自动生成的代码具有运行时版本：2.0.50727.3634

生成的代码位于类库中，并从控制台应用程序调用。对于服务绑定，以下内容已从控制台应用程序添加到 app.config：

```
 <system.serviceModel>
   <bindings>
    <basicHttpBinding>
      <binding name="OrderServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        <security mode="None">
          <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
          <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
      </binding>
    </basicHttpBinding>
  </bindings>
  <client>
    <endpoint address="http://www.acdc.com/services/order.asmx"
        binding="basicHttpBinding" bindingConfiguration="OrderServiceSoap"
        contract="MLOrderServiceReference.OrderServiceSoap" name="OrderServiceSoap" />
  </client>
  </system.serviceModel> 
```

这是我的错误堆栈跟踪：

```
 System.InvalidOperationException was caught
  Message="No corresponding start element is open."
  Source="mscorlib"
  StackTrace:
 Server stack trace: 
  at System.Xml.XmlBaseReader.ReadEndElement()
   at System.ServiceModel.Channels.Message.ReadFromBodyContentsToEnd(XmlDictionaryReader reader, EnvelopeVersion envelopeVersion)
   at System.ServiceModel.Channels.Message.ReadFromBodyContentsToEnd(XmlDictionaryReader reader)
   at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest)
   at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(Message message, Object[] parameters)
   at System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\r\n\r\nException rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at DS.ACDC.AppService.MLOrderServiceReference.OrderServiceSoap.GetOrderDetail(Int32 ClientId, Int32 OrderId)
   at DS.ACDC.AppService.MLOrderServiceReference.OrderServiceSoapClient.GetOrderDetail(Int32 ClientId, Int32 OrderId) in C:\\localdata\\ML\\ACDC\\DS.ACDC.AppService\\Service References\\MLOrderServiceReference\\Reference.cs:line 4151
   at DS.ACDC.AppService.OrderService.getOrder(CISmapping CISdetails) in C:\\localdata\\ML\\ACDC\\DS.ACDC.AppService\\OrderService.cs:line 123 
```

**编辑：** 似乎它与使用 WCF 服务参考而不是旧的 Web 参考有关。不知何故 DataContractSerializer 在 XmlSerializer 工作时搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:57:58.073

好的，以防其他人面临同样的问题，我在这里回答我自己的问题..

“在哪里/如何开始调试外部 Web 服务”问题的答案是将以下内容添加到您的配置文件中：

```
 <system.diagnostics>
     <switches>
       <add name="XmlSerialization.Compilation" value="1" />
     </switches>
   </system.diagnostics> 
```

# sql - sql查询连接？

> ID：13229350
> 
> 赞同：0
> 
> 时间：2012-11-05T09:37:54.070
> 
> 标签：sql

我有一张包含汽车库存的表格。这有两列，一列是 car_id，另一列是 car_info，例如 bmw 320

另一个表还包含一个具有两列的表。一个是 sales_ids，另一个是他们已售出的 car_id。

我想创建一个 sql 查询，输出将是 sales_id 和由该 sales_id 出售的汽车名称。

我曾尝试使用连接查询，但到目前为止还没有成功。谁能提供一些帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:39:14.093

```
select s.sales_id, i.car_info
  from inventory i
  join sales s on s.car_id = i.car_id; 
```

要查找针对某个特定 sales_id 售出的汽车：

```
select i.car_info
  from inventory i
  join sales s on s.car_id = i.car_id
 where s.sales_id = 'some id'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:40:20.683

```
select c.car_id,c.car_info,s.sales_id from
     car_table_name c,
     sales_table_name s
where c.car_id = s.car_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:41:55.623

假设表一名为**car_inventory**和表二**car_sales**查询应该是这样的。

但是，为了获得更好的答案，您应该提供您尝试解决问题的代码。

```
select car_sales.sales_ids, car_inventory.car_info 
from car_sales join car_inventory 
on car_sales.car_id = car_inventory.car_id 
```

# windows-phone-7.1 - 在 xna 中点击的精灵

> ID：13229351
> 
> 赞同：0
> 
> 时间：2012-11-05T09:38:09.450
> 
> 标签：windows-phone-7.1, windows-phone, xna-4.0

如何在 xna 中为 WP7 获取精灵？如何检测点击了哪个精灵？我想获得精灵 id 或任何给我点击的特定精灵的参考的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:35:09.803

使用 XNA 没有开箱即用的方法可以做到这一点。您必须获取点击坐标，然后手动检查这些坐标中是否有精灵。

# java - 服务器启动客户端？

> ID：13229352
> 
> 赞同：1
> 
> 时间：2012-11-05T09:38:11.630
> 
> 标签：java, sockets, socketserver

我刚刚在我的计算机科学课上得到了一个项目。我们得到了使用老师提供的密码解密解决方案的任务，并将其调整为在我们的网络中以主/从关系的形式使用。

这意味着主（服务器）必须联系“休眠”从属（客户端）。我们在这里有点困惑，因为我们想使用多个从服务器来解密我们得到的加密密码，但是我们不能设计一个系统，其中服务器是启动与客户端的连接而不是客户端启动连接的系统服务器。

我们必须向奴隶发送加密密码列表，并通过将它们与字典的加密版本进行比较，让他们发回结果。

我们讨论了将主服务器视为客户端，将从服务器视为服务器，但这将是一个问题，因为您无法通过同一端口流式传输到不同的服务器。您将不得不更改端口。如果这是唯一的解决方案，那就这样吧。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:51:48.213

在 JMS（Java 消息传递服务）中，您将在这里调用主题，您将拥有消息生产者和多个消费者。

我准备使用[ActiveMq](http://activemq.apache.org/) 作为消息代理

你也可以检查[一下](https://stackoverflow.com/questions/9015882/activemq-publisher-subscriber-hello-world-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:00:09.283

听起来有点像黑客所说的“僵尸网络”。

基本上，轻量级守护进程安装到每个“从属”中，等待来自主控的指令消息，主控向其整个从属列表发送命令。收到此消息后，从机根据收到的指令执行黑客安装的一些其他代码。

从这个意义上说，就好像从属服务器是“服务器”……主服务器是具有许多服务器的客户端。

为什么要直播？为什么不是数据报？

# matlab - 将流体从一个气缸转移到另一个气缸

> ID：13229360
> 
> 赞同：0
> 
> 时间：2012-11-05T09:38:32.143
> 
> 标签：matlab

我试图模拟通过许多辊系统的墨水流动，但没有成功。当每个滚筒转动时，墨水会根据给定的比率（例如 0.5）分开。我已经设法通过获取一些用户数据来绘制系统中的滚轮，但我现在完全不知道如何继续！这些滚筒中的一些将与多个滚筒接触，因此墨水将被均分，然后在到达生产线中的下一个滚筒时再次减半。

任何人都可以建议一个函数来声明这些连接位置并在一定数量的系统旋转后跟踪墨水分裂吗？......我已经使用字典在 python 中尝试过这个，尽管我似乎无法将它特别翻译成 matlab好。

到目前为止，我所拥有的是 Python：

```
for i in range(num_rollers): 
    roller_data() 

for i in range(0,num_rollers): 
    for j in range(Rollers[i]['segments']): 
        Rollers[i]['ink'].append(0) 

# Initialise nips 
Nips = [{} for i in range(num_nips)] 
Nips[0] = {'rollers': [0, 1], 'locations': []} 
Nips[1] = {'rollers': [1, 2], 'locations': []} 
Nips[2] = {'rollers': [2, 3], 'locations': []} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:06:28.173

由于您没有指定滚轮的确切型号，我将以极坐标表示它们，*即*具有中心点和半径。每个滚筒上的墨水将由一个附加值表示，例如：

```
% # Initial state
C = [0, 0; -0.8, -0.6; 1, 0];  % # Roller centers (x, y)
R = [0.5, 0.5, 0.5];           % # Roller radii (r)
ink = [1, 0, 0];               % # Amount of ink on each roller
N = numel(R);                  % # Amount of rollers 
```

此处仅在 #1 辊上有墨水（我随意选择了这些值，因此当然可以更改它们）。为了您的方便，您可以像这样绘制滚轮：

```
% # Draw the rollers
figure, hold on
ang = 0:0.1:(2 * pi);
for i = 1:N
    plot(C(i, 2) + R(i) * cos(ang), C(i, 1) + R(i) * sin(ang))
    text(C(i, 2), C(i, 1), num2str(i))
end
title('Ink rollers'), axis image 
```

这应该会产生以下图像：

![滚筒](../Images/07fb8d592e30c9f4a361fb5877dca132.png)
我会让你在每个滚筒上画墨水：P

**现在开始做生意：**

1）首先我们找到所有连接的滚子：

```
% # Find connected rollers
isconn = @(m, n)(sum(([1, -1] * C([m, n], :)) .^ 2) - sum(R([m, n])) .^ 2 < eps);
[Y, X] = meshgrid(1:N, 1:N);
conn = reshape(arrayfun(isconn, X(:), Y(:)), N, N) - eye(N); 
```

这将产生一个矩阵，如果辊*i*和辊*j*连接，则位置 ( *i* , *j* )中的每个元素为 1，否则为 0。在这个例子中，我们得到：

 **```
conn =

     0     1     1
     1     0     0
     1     0     0 
```

2) 下一步是通过运行预定数量的迭代来模拟墨水流动。在每次迭代中，我们模拟每个辊子的一转，*即*我们遍历每个辊子并在其自身和相邻辊子之间平均分配墨水。

```
% # Simulate ink flow for a number of revolutions
disp([sprintf('Initial state:\t\t'), '[', num2str(ink), ']'])
revolutions = 3;
for ii = 1:revolutions
    new_ink = zeros(size(ink));

    % # Iterate over each roller
    for jj = 1:N
        if (ink(jj) > 0)
            delta_ink = ink(jj) / (sum(conn(jj, :)) + 1);
            idx = [jj, find(conn(jj, :))]; % # roller jj and its neighbors
            new_ink(idx) = new_ink(idx) + delta_ink;
        end
    end
    ink = new_ink;
    disp([sprintf('Revolution #%d:\t\t', ii), '[', num2str(ink), ']'])
end 
```

很抱歉，我没有花太多精力通过矢量化来优化这些循环。无论如何，这些是每转中每个辊上的墨水量：

> `Initial state: [1 0 0]
> Revolution #1: [0.33333 0.33333 0.33333]
> Revolution #2: [0.44444 0.27778 0.27778]
> Revolution #3: [0.42593 0.28704 0.28704]`

显然，您可以轻松地将这段代码放入一个函数中，该函数返回滚轮的最后状态，或您选择的任何其他输出。此外，您还可以修改算法以根据辊子的半径处理不同的分流比。祝你好运！**

# c# - 如何从 ac# 程序填充 html 应用程序的 html 输入标记（文本类型）值

> ID：13229363
> 
> 赞同：0
> 
> 时间：2012-11-05T09:38:52.223
> 
> 标签：c#, javascript, html

我有一个可以正常工作的 html 应用程序我必须从 ac# 程序运行这个程序并从我的 c# 程序填充它的 html 输入文本标签，然后按 html 按钮我不知道该怎么做你能不能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:46:41.990

如果我理解正确，您需要使用 WebBrowser 控件并导航到您的站点（使用`WebBrowser.Navigate()`方法）。然后（导航完成后）使用代码填充输入并单击按钮。

```
var document = yourWebBrowser.Document;

var searchField = document.GetElementById("IdOfTheInputField");
searchField.SetAttribute("value", "TextToWrite");

document.GetElementById("IdOfSubmitButton").InvokeMember("click"); 
```

# jakarta-ee - Maven 处理资源/替换 Maven 变量

> ID：13229364
> 
> 赞同：0
> 
> 时间：2012-11-05T09:38:56.887
> 
> 标签：jakarta-ee, maven, web-applications, jboss7.x

我有一个用于构建 JBoss Web 应用程序的 Java/Maven 项目。我正在使用 Maven 功能来过滤资源以构建实时版本和测试版本。

为了得到这个想法：我使用 maven 变量，这些变量将在构建过程中被替换，例如 pom.xml 中的 WAR 名称或数据库的 JDBC 路径，部署应该使用这些变量（不同的 DB 用于生产和测试）。

我遇到的问题如下：在 jboss-web.xml 中我需要为部署设置上下文路径（实时版本有上下文路径'/'，测试版本应该有上下文路径'/测试'）。对于 maven 目标“process-resources”，变量将被正确替换，但对于“包”目标，使用源文件（带有变量声明），这会导致错误。我该如何配置，maven 使用已处理的资源文件？

最好的问候，谢谢你，克里斯蒂安

# json - 如果 JSON 中没有要显示的记录，JQgrid 分页是否显示 1 of 0？

> ID：13229366
> 
> 赞同：0
> 
> 时间：2012-11-05T09:38:58.360
> 
> 标签：json, jqgrid, pagination

我正在使用 jqGrid 4.3.1 为 JSON 实现 JQgrid。如果没有记录，json 对象看起来像这样。

```
{"partabtxt":{" detA":[],"detA1":[],"detB":[]},"partctxt":{"detC":[]},"partdtxt":{"detC":[]},"partetxt":{"detC":[]}} 
```

但是分页显示 Page 1 0f 0 右侧按钮突出显示。

我的问题是 1) 如果没有记录，JQgrid 中的这个开箱即用功能是否显示第 1 页，共 0 页？2）如果没有记录，有什么方法可以获取第 0 页，共 0 页？

我已尝试提供以下解决方案之一

```
beforeRequest: function() {
  if (mydata.length === 0) {
                  grid[0].p.page = 0;     
              } 
```

},

但是这个解决方案不适用于 json 对象，因为它有时会抛出空指针异常，有时会选择前一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:48:05.087

您可以在 json 响应中指定页面和记录计数

```
{"total":1.0,"page":1,"records":1,"rows":[{"id":001,"cell":[001,"record1"}]} 
```

# c# - ASP.Net 菜单栏未显示

> ID：13229371
> 
> 赞同：1
> 
> 时间：2012-11-05T09:39:13.417
> 
> 标签：c#, asp.net, menubar

我在 ASP.net 中为我的站点主站构建了一个菜单栏：

```
<div class="MenuBar">
        <asp:ContentPlaceHolder ID="MainContent" runat="server">
            <asp:Menu ID="menuBar" runat="server" Orientation="Vertical" Width="100%">
                <DynamicHoverStyle CssClass="DynamicHover" />
                <DynamicMenuItemStyle CssClass="DynamicMenuItem" />
                <DynamicSelectedStyle CssClass="DynamicHover" />
                <StaticHoverStyle CssClass="staticHover" />
                <StaticMenuItemStyle CssClass="StaticMenuItem" ItemSpacing="1px" />
                <StaticSelectedStyle CssClass="staticHover" />
            </asp:Menu>
        </asp:ContentPlaceHolder>
    </div> 
```

后面的代码：

```
public partial class SiteMaster : System.Web.UI.MasterPage
{

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        getMenu();
    }
}

private void getMenu()
{
    Menu menuBar = new Menu();
    SqlConnection con = new SqlConnection();
    con.ConnectionString = "server=(local);database=PhilipsMaterials;Integrated Security=SSPI;";
    con.Open();
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    string sql = "Select [Material Name] from Materials";
    SqlDataAdapter da = new SqlDataAdapter(sql, con);
    da.Fill(ds);
    dt = ds.Tables[0];
    DataRow[] drowpar = dt.Select();
    String s = "sss";
    foreach (DataRow dr in drowpar)
    {
        menuBar.Items.Add(new MenuItem(dr["Material Name"].ToString()));
    }

    con.Close();

} 
```

}

由于某种原因，当我在浏览器上查看该站点时，菜单未显示。有人知道为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:09:39.197

您从菜单实例化一个新对象，然后不要将其添加到现有菜单，您不需要实例化一个新对象，只需将您的功能替换为以下内容：

```
 private void getMenu()
{
   // Menu menuBar = new Menu();
    SqlConnection con = new SqlConnection();
    con.ConnectionString = "server=(local);database=PhilipsMaterials;Integrated Security=SSPI;";
    con.Open();
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    string sql = "Select [Material Name] from Materials";
    SqlDataAdapter da = new SqlDataAdapter(sql, con);
    da.Fill(ds);
    dt = ds.Tables[0];
    DataRow[] drowpar = dt.Select();
    String s = "sss";
    foreach (DataRow dr in drowpar)
    {
        menuBar.Items.Add(new MenuItem(dr["Material Name"].ToString()));
    }

    con.Close();

}
} 
```

**并从Page_PreRender**而不是从 Page_Load调用它。

# c# - Fluent Nhibernate，添加排序规则作为约定的一部分

> ID：13229374
> 
> 赞同：2
> 
> 时间：2012-11-05T09:39:23.493
> 
> 标签：c#, sql-server, fluent-nhibernate, collation

是否可以控制 Nhibernate 为所有 nvarchar 类型的列生成的排序规则？根据安装软件的文化，从安装程序中控制它可能会很好，安装程序将从配置文件中读取此选项。

我找到了将排序规则添加到具体查询结果的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T12:50:16.813

是的，这是可能的。您可以使用 CustomSqlType 来指定列的排序规则（以 NOCASE 排序规则为例）：

```
public class CaseInsensitiveStringConvention : IPropertyConventionAcceptance, IPropertyConvention
{
    public void Accept(IAcceptanceCriteria<IPropertyInspector> criteria)
    {
        // More work could be done here to ensure you get nvarchars only
        criteria.Expect(c => c.Property.PropertyType == typeof(string));
    }

    public void Apply(IPropertyInstance instance)
    {
        instance.CustomSqlType("text COLLATE NOCASE");
    }
} 
```

# clojure - 如何获得调用 Java 方法的 Fn？

> ID：13229375
> 
> 赞同：3
> 
> 时间：2012-11-05T09:39:23.923
> 
> 标签：clojure

我正在学习 Clojure。我编写了这段代码来递归地遍历一个目录。

```
(tree-seq #(.isDirectory %1) #(.listFiles %1) (File. "/my-directory")) 
```

为什么我不能`.isDirectory`在 Clojure 中用作一等函数？有没有更好的方法来重写这段代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T11:24:49.610

Joost 指出 Java 方法不是一流的函数。

作为处理这个问题的一种方法，我通常喜欢将 Java 函数包装在 Clojure 函数中（或者找到一个已经这样做的库），然后很容易以惯用的一流方式使用它们：

```
(defn directory? [^java.io.File file]
  (.isDirectory file))

(defn list-files [^java.io.File file]
  (.listFiles %1))

(tree-seq directory? list-files (File. "/my-directory")) 
```

这是几行代码，但具有以下优点：

*   您可以在函数中添加类型提示以避免反射（如上）
*   最终的代码更干净，更惯用
*   您已经从底层 Java 互操作中抽象出来

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T09:58:27.563

Java 方法不是 clojure 函数，因为您不能单独调用方法；您必须在对象上调用方法，并且它必须是该方法期望的类型的对象。换句话说，在java中，一个方法不能与其定义的类完全分离（至少不是有效的）。

#(.foo %) 的替代方案是 (memfn foo)，在引入 #(...) 之后几乎没有人再使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:51:25.703

您可以查看[file-seq 的源代码](https://github.com/clojure/clojure/blob/d0c380d9809fd242bec688c7134e900f0bbedcac/src/clj/clojure/core.clj#L4378)（它使用 tree-seq）来了解它是如何工作的。

顺便说一句：你的代码对我来说效果很好。我只需要在 REPL 中使用 java.io.File 而不是 File，这样它就知道 Java 类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T20:56:59.407

你已经得到了正确的答案，但只是为了添加更多的 Clojure 惯用代码，我也会使用

```
#(.foo %) 
```

正如 Joost Diepenmaat 所做的那样（但我相信它可能被忽视了）。

我还建议阅读[Clojure 目录中的列表文件](https://stackoverflow.com/questions/8566531/listing-files-in-a-directory-in-clojure)。

# wcf - 底层连接被关闭：连接被意外关闭

> ID：13229376
> 
> 赞同：0
> 
> 时间：2012-11-05T09:39:26.143
> 
> 标签：wcf, sql-server-2008-r2, sql-server-ce, microsoft-sync-framework

我正在使用 Visual Studio 2010 和 SQL Server 2008 R2。我创建了一个项目来`*.sdf`使用 WCF 服务将 SQL Server CE ( ) 文件同步到 SQL Server。

当我有小型 SQL Server CE 文件 (18 MB) 时它工作正常，但是当我尝试使用大型 SQL Server CE 文件 (38 MB) 进行同步时，会发生错误。

`web.config`我在 WCF 服务和`app.config`我的应用程序中增加了许多参数的大小。

但是错误不断发生......

> *基础连接已关闭：连接意外关闭。*
> 
> *堆栈跟踪 ：*
> 
> 在 System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
> 在 System.RuntimeMethodHandle.InvokeMethodFast(Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
> 在 System .Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo 文化, Boolean skipVisibilityChecks)
> 在 System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo 文化)
> 在 System.Reflection.MethodBase.Invoke(Object obj, Object[] 参数)
> 在 Microsoft.Synchronization.Data.ServerSyncProviderProxy.GetChanges(SyncGroupMetadata groupMetadata, SyncSession syncSession)
> 在 Microsoft.Synchronization.SyncAgent.DownloadChanges(SyncGroupMetadata groupMetadata)
> 在 Microsoft.Synchronization.SyncAgent.DataSynchronize()
> 在 Microsoft.Synchronization.SyncAgent.Synchronize()
> 在SyncSample.AccountsListing.btnSync_Click（对象发送者，EventArgs e）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:04:04.027

当我没有正确配置它以处理足够的数据时，我最近从 Web 服务中收到类似的错误，例如：maxBufferPoolSize、maxReceivedMessageSize 等。

此外，如果您要发送大型数组，这些文件的服务行为和端点行为部分可能需要：

```
<dataContractSerializer maxItemsInObjectGraph="array size here"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:33:43.030

上述异常意味着由于关闭了连接而发生了意外情况，并且大多数情况下是由于服务端的一些异常导致拒绝请求。您可以为服务启用 WCF 跟踪并检查日志以确认异常。大多数情况下，异常消息会提示您出了什么问题；-)

HTH，阿米特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:00:07.163

正如 Amit 建议的那样，您应该尝试启用 WCF 跟踪。您遇到的错误可能意味着服务器端发生了许多事情。

除非您正在构建 Windows Mobile 应用程序，否则我建议您使用较新的 SqlSyncProvider/SqlCeSyncProvider/SyncOrchestrator 组合，而不是较旧的 SqlCeClientSyncProvider/DBServerSyncProvider/SyncAgent（与本地数据库缓存项目项使用的相同）

如果数据大小确实是您的问题，那么较新的提供程序具有批处理功能。

# java - 检查字符串是否包含 Velocity 中的特定子字符串

> ID：13229377
> 
> 赞同：17
> 
> 时间：2012-11-05T09:39:34.363
> 
> 标签：java, string, substring, velocity

在 Velocity 中，我有一个名为 $url 的变量，其中包含以下字符串：[ContentId(2.7507), ContentId(2.7508), ContentId(1.44551)]

我想检查该字符串是否包含子字符串 1.44551。

这是我到目前为止编写的代码，但由于某种原因它返回 False：

```
#if($url.contains("1.44551"))
<p>The article content id is 1.44551</p>
#else
<p>The article content id isn't 1.44551</p>
#end 
```

我希望这将返回 True，因为 1.44551 子字符串存在于 $url 变量中。请问有人能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-10-15T15:07:52.580

Velocity 将值作为**对象**保存在上下文映射中。

如果要执行 String 方法，请添加`toString`以确保在 String 上执行该`contains`方法：

```
 #if($url.toString().contains("1.44551"))
<p>The article content id is 1.44551</p>
#else
<p>The article content id isn't 1.44551</p>
#end 
```

# autohotkey - 有什么方法可以加快 WinWaitNotActive？

> ID：13229380
> 
> 赞同：2
> 
> 时间：2012-11-05T09:39:42.210
> 
> 标签：autohotkey

我有一个自动发送脚本，它分两步工作：

1.  它运行一个目标程序，并在程序中启动一个数据库更新命令。
2.  在 WinWaitNotActive（即数据库更新完成）之后，它会在目标程序中运行第二个“搜索”命令

这工作正常，但速度太慢 - 数据库更新后最多 10-15 秒。有没有办法加快 WinWaitNotActive？我尝试使用 Sleep 8 秒而不是 WinWait，但有时第二个命令在数据库更新完成之前运行。

是否可以监视进程活动，并在第二个命令降至某个级别以下时运行它？

这是代码：

```
send !w::
Run "Target"
/'Update Command'
WinWaitNotActive, Target, , ,
Run "Target"
/'Search Command' "Search Term"
return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:48:37.620

您可以使用`SetTimer`所需的时间间隔来检查窗口状态。

```
Run "Target"
; /'Update Command'
SetTimer, CheckWindow, -200  ; this check the window every 200 milliseconds
return

CheckWindow:
    if WinActive, Target
        return
    Run "Target"
    ; /'Search Command' "Search Term"
    SetTimer, % A_ThisLabel, Off      ; stop the timer
Return 
```

# asp.net-mvc-3 - 我应该对所有我没有编辑的数据实体属性使用 HiddenFor 吗？

> ID：13229384
> 
> 赞同：1
> 
> 时间：2012-11-05T09:40:05.403
> 
> 标签：asp.net-mvc-3

我遇到了一个问题，即修改日期在我的编辑帖子中被重置为某个默认值。似乎模型绑定器忽略了不属于视图的属性。一旦我添加了 @Html.HiddenFor(m => m.ModifiedDate) ，原始值就会包含在传递给 post 操作的对象中。

我原以为所有属性值都会在此过程中持续存在，但事实并非如此。我正在为我的模型使用 sql 数据库，在当前上下文中，某些字段不可用于编辑。这是否意味着我应该对所有不可编辑的属性使用 HiddenFor 以确保原始数据的完整性？

如果是这样，有没有办法确保自动包含添加的新字段？

post方法的一个例子

```
 [HttpPost]
    public ActionResult Edit(Customer customer)
    {
        //Some code here
    } 
```

和视图

```
@model MyApp.Models.Customer
@{
  ViewBag.Title = "Edit";
}
<h2>
    Edit</h2>
@using (Html.BeginForm())
{
 <fieldset>
    @Html.HiddenFor(m => m.ModifiedData)
    @*Some other fields*@
 </fieldset>
    <p>
        <input type="submit" value="Save" />
    </p>
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:48:22.413

MVC 仅在表单中发布元素。它使用标准的 HTTP post 方法，不像 ASP.Net 在 ViewState 中保存值（这在表单中也有效地保存为隐藏元素，但您从未真正看到它）。所以是的，如果你想让一个值保持不变，你必须将它存储在表单中。

与 ASP.Net 相比，它的优势在于您可以完全控制在 HTTP 中来回传递的内容，因此不会再到处传递巨大的 ViewState，其中 90% 您可能从未使用过。通过这种方式，您可以调整通过网络发送的数据，这是在 ASP.Net 中无法做到的。

不，没有办法确保隐藏元素被填充。你需要自己做这件事。同样，这是因为表单是无状态的，就像一个适当的网站一样！

您可以使用会话，但我不推荐它。

# c# - 如何使更新的datagridview可自由滚动

> ID：13229386
> 
> 赞同：0
> 
> 时间：2012-11-05T09:40:11.210
> 
> 标签：c#, .net, winforms, datagridview

我`databound datagridiew`已经实施了一个定期更新的方法。问题是，当`datagridviews`内容更新时，会`datagridview`自动跳转到显示最后选择的项目。

我已经实现了以下代码，因此始终显示第一行：

```
dataGridView1.ClearSelection();
dataGridView1.CurrentCell = null;
dataGridView1.FirstDisplayedScrollingRowIndex = 0; 
```

但是如果在`datagridview`添加新条目的同时可以自由滚动条目中的条目会更好。

注意，如果我删除该行：

```
dataGridView1.FirstDisplayedScrollingRowIndex = 0; 
```

仍然会`datagridview`跳转以显示最后选择的行，所以我猜我需要设置另一个属性，但找不到它！

# android - 如何转换大的 Double 号。以人类可读的形式

> ID：13229387
> 
> 赞同：2
> 
> 时间：2012-11-05T09:40:14.477
> 
> 标签：android, double

我想在 TextView 中打印一个双编号，像这种格式 10699657.6，目前像 1.06996576E7 。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T09:42:25.770

```
DecimalFormat dform = new DecimalFormat("0.###E0"); 
```

在这里找到类似的问题： [将科学记数法转换为十进制记数法](https://stackoverflow.com/questions/2448573/convert-scientific-notation-to-decimal-notation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:45:54.667

有[DecimalFormat](http://developer.android.com/reference/java/text/DecimalFormat.html)类，它完全符合您的要求。

# google-maps - 使用谷歌地图 API 设计航点

> ID：13229391
> 
> 赞同：4
> 
> 时间：2012-11-05T09:40:39.013
> 
> 标签：google-maps

我创建了一个将航点绘制到谷歌地图上的应用程序，然后使用 API 显示每个航点的根和导航。

但我想为每个航路点设置样式……特别是给每个航路点一个独特的标题。您可以在添加标记时执行此操作，但我无法看到对航路点执行此操作。

有什么解决方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:57:58.597

看来您无法为它们设置样式。我的解决方案是通过设置禁用航点的路线`supressMarkers: true`标记`google.maps.DirectionsRenderer`：

```
var directionsDisplay = new google.maps.DirectionsRenderer({
    suppressInfoWindows: true,
    suppressMarkers: true,
    map: map
}); 
```

然后，循环遍历您的航点并为每个航点设置一个标记，根据您的喜好设置样式。

# php - php内存不足错误

> ID：13229395
> 
> 赞同：3
> 
> 时间：2012-11-05T09:41:02.290
> 
> 标签：php, mysql, zend-framework, memory, fetchall

我在 php 5.2.5 上并从命令行执行脚本。在这个脚本中，我正在处理从 db 获取的数据。要从 db 获取数据，我使用 Zend Adapter。我注意到调用 **“fetchAll($sql,$data,Zend_Db::FETCH_ASSOC)”后****内存增加了（262144 字节）**

 **因此最终导致内存不足。为了测试，我只是执行了“fetchAll”，甚至没有将它返回的数据存储在任何变量中。但是我仍然看到没有回收的内存增加。

*   Zend FetchAll 方法是否存在内存泄漏问题？
*   为什么内存会增加 262144 或 262144 的倍数？
*   内存增加是随机发生的，而不是在所有 fetchAll 调用中，为什么会这样？

我曾尝试使用 memory_get_usage() 来确定内存泄漏的原因，但是由于代码很大，因此需要很长时间，有什么方法可以获取内存中所有对象的详细信息，以便我可以调试问题更好？

sql是： -

```
select b.Id as Id,b.Lang 
from groups g 
left join table1 b on b.Group_Id = g.Id 
left join table2 bs on bs.Id = b.Id 
where g.Id = ? and b.Lang = ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:58:52.890

要一次返回所有结果，它们必须存储在内存中的数组中。即使您没有将该结果分配给任何变量，`fetchAll`内部仍然必须构建该数组。如果有太多的结果一次存储在内存中，你就会耗尽内存；很简单。

至于为什么不总是回收内存：*可能*存在内存泄漏，但更有可能是 PHP 的垃圾收集器根本没有立即启动以回收内存。您可以尝试使用强制 gc 循环[`gc_collect_cycles`](http://php.net/gc_collect_cycles)来确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:56:08.540

> 为了测试我只是执行了“fetchAll”，甚至没有存储数据

但是您已经存储了 2 个数据副本。大多数数据库客户端将维护服务器返回的数据缓冲区（在 mysql 的情况下，它具有完整的数据集）。当您调用 fetchAll() 时，会将整个数据集检索到缓冲区（如果它不存在）*，*然后将其映射到 PHP 数组。

你有明确的 closeCursor 调用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-05T01:09:16.860

您可以逐行获取结果而不将其加载到内存中：

```
 /**
    * @var $select \Zend_Db_Select
    **/
    if ($stmt = $select->query()) {
        while ($row = $stmt->fetch()) { //... }
    } 
```**

# c++ - 带有选项卡式窗口和分隔线的 Source Insight 类型编辑器？

> ID：13229405
> 
> 赞同：3
> 
> 时间：2012-11-05T09:41:59.397
> 
> 标签：c++, c, source-insight, tabbed-interface, tabbed-view

我真的很喜欢 Source Insight 的设置，它有一个用于一键了解函数调用和变量的上下文窗口，以及一个用于在项目中调用函数和在项目中使用变量的位置的关系窗口。

它非常适合在项目中跳来跳去并理解变量的使用，但缺少的一件事是选项卡式窗口和分隔线。在选项卡和垂直/水平分隔符流行之前，它停留在一个源文件，IDE 开发的一个窗口阶段。

它也非常擅长查找变量和函数的引用，比代码块、codewright 和 eclipse（真的都试过了）要好得多。

有谁知道或有类似于 Source Insight 但带有标签和分隔符的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:59:05.260

查看这个非常好的 CodeProject： http: [//www.codeproject.com/Articles/32209/a-File-Switch-Tabbar-for-Source-Insight](http://www.codeproject.com/Articles/32209/a-File-Switch-Tabbar-for-Source-Insight)。不需要任何努力，只需运行可执行文件，让它发挥它的魔力。

请记住，这是一个**非常**不成熟的项目，如果你惹恼它，它甚至可能会导致 SI 崩溃（即，如果你双击一个选项卡来关闭它，它可能会崩溃）。另一方面，它完成了这项工作。我已经使用它超过 6 个月了，我已经学会了如何避免它的敏感部分，并且对它非常满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T12:49:33.450

Source Insight 4 包含您提到的功能

# php - 如何检查文件是 UTF-8 格式？

> ID：13229407
> 
> 赞同：1
> 
> 时间：2012-11-05T09:42:05.590
> 
> 标签：php

我将 1 个文件 csv 从客户端导入到服务器。现在我想检查这个文件的编码是 utf-8。如何在 php 中检查文件的格式为 UTF-8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:44:08.153

用这个：

```
string mb_detect_encoding ( string $str [, mixed $encoding_list = mb_detect_order() [, bool $strict = false ]] ) 
```

查看[文档](http://www.php.net/manual/en/function.mb-detect-encoding.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:44:52.350

在这里寻找在 PHP [http://www.php.net/manual/en/function.mb-detect-encoding.php中检测文件编码](http://www.php.net/manual/en/function.mb-detect-encoding.php)

# android - 服务器上的 Android 应用程序数据库（sqlite）备份

> ID：13229411
> 
> 赞同：2
> 
> 时间：2012-11-05T09:42:12.483
> 
> 标签：android, sqlite

我使用 sqlite 创建数据库。现在我想在我的服务器上备份一个数据库文件。

那么如何将我的sqlite数据库文件从我在android中的应用程序上传到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:47:02.070

用于`getDatabasePath()`获取`File`指向数据库的对象。然后，在您关闭所有打开`SQLiteOpenHelper`的对象后，您可以使用、等`SQLiteDatabase`上传您的数据库。`HttpUrlConnection``HttpClient`

# wpf - 在 WPFDataGrid 中创建所有列之后的事件？

> ID：13229414
> 
> 赞同：0
> 
> 时间：2012-11-05T09:42:25.730
> 
> 标签：wpf, wpfdatagrid

在 . 中生成所有列之后，我想做一些事情，`WPFDataGrid`我需要`DisplayIndex`那里，所以我使用了`EndInit`of `DataGrid`，但似乎`DisplayIndex`尚未设置该值。

```
public class AdvancedDatagridControl:DataGrid
{
.
.
.
  public override void EndInit()
  {
     foreach (var column in this.Columns)
     {
        var colIndex=column.DisplayIndex; //DisplayIndex is -1
     }
  }
} 
```

我可以使用什么活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:58:51.977

也许你可以使用[ColumnDisplayIndexChanged](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.columndisplayindexchanged%28v=vs.95%29.aspx)？它应该为每一列提出一次。

# xml - 如何使用 bash 或 perl 更改 XML 中的参数值？

> ID：13229416
> 
> 赞同：-6
> 
> 时间：2012-11-05T09:42:40.750
> 
> 标签：xml, perl

我在下面有一个xml，需要修改一些参数值

```
<test name="MyRawExample" preserve-order="true">
    <parameter name="example-parameter" value="11111" />
    <classes>
        <class name="com.ericol.nco.blocktests.example.ExampleTestcase" />
    </classes>
</test> 
```

我需要查找特定的参数名称，然后用新的输入值替换相应的值并更新 xml 文件。

我想知道是否有人可以帮助我如何更改它或为我提供一个严格的文档，以便我可以找到最有效的脚本来完成此操作。

问候，贝扎德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T09:45:31.180

正如 Mortiz 所说，您应该首先努力解决问题。

考虑到这一点，看看[XML::Twig](http://search.cpan.org/perldoc?XML%3a%3aTwig) Perl 模块。它将使您能够轻松地做您想做的事。

更新：由于您已经完成了一些工作并提出了一些代码，因此这是一个可行的解决方案：

```
#!/usr/bin/perl -w
use strict;
use XML::Twig;

my $twig=XML::Twig->new(   
    twig_handlers => { 
        parameter  => sub {
            if ($_->att('name') eq 'example-parameter') {
                $_->set_att('value' => '22222') 
            }
        }
    },
    pretty_print => 'indented',
);

$twig->parsefile('src/main/resources/exampleSuite.xml');
$twig->flush; 
```

我会留给你做文件替换。

# macos - mac下的vim表现不如预期

> ID：13229417
> 
> 赞同：2
> 
> 时间：2012-11-05T09:42:45.323
> 
> 标签：macos, vim, console, terminal, macvim

我最近有一个mac。我以前在使用 ubuntu 的笔记本电脑上工作，我使用的是 vim。

我现在将讨论控制台中的 vim（iTerm2 或默认终端）和 macvim。

问题是某些绑定在mac下不起作用。例如，我有 CTRL 左/右用于在拆分之间导航，CTRL 上/下用于上下移动代码行或代码块等。它们不再起作用了。

我有一堆现在看起来很奇怪的插件（nerdtree、powerline 等）。电力线在 macvim 中不显示特殊字符，在终端中它们是问号。

在控制台中，nerdtree 看起来很奇怪，并且不显示特殊的三角形字符。如果我按回车键打开从 nerdtree 中选择的文件，它不会做任何事情。在 macvim 中，它工作正常。

有没有关于如何在 mac 上使用 vim 的指南？或者推荐的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:58:11.637

书呆子树：`let g:NERDTreeDirArrows=0`

Powerline ：查看`strange characters`文档中的部分[https://github.com/Lokaltog/vim-powerline](https://github.com/Lokaltog/vim-powerline)

在我的工作中导航`Ctrl + arrows`。你可以发布你的vimrc，或者尝试在没有任何配置的情况下运行vim。

`Ctrl+arrows`移动线和块对我的不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:45:51.383

您是否检查过您的终端向 vim 发送了哪个密钥？您是否尝试手动设置它？我在使用 emacs 时遇到了类似的问题，包括一个我仍然无法重现的键绑定:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:52:59.773

我的Mac 和工作中的 Windows 机器、家里的 Ubuntu 机器和几个 VPS 上都有[完全相同的配置。](https://github.com/romainl/dotvim)它在 GVim/MacVim 或普通 Vim 中的每个平台上的工作方式*完全相同。*

不幸的是，我既不使用 NERDTree 也不使用 Powerline，但 Vdt 的回答似乎包含了所有需要的信息。

您描述的一些行为是自定义映射。您应该向我们展示您的`~/.vimrc`（Linux 上的旧版本和 Mac 上的新版本，如果有差异），以便我们帮助您使其更便携。

此外，“看起来很奇怪”没有任何意义：请添加一两个屏幕截图。

# jquery-mobile - 如何降低文本框的高度

> ID：13229418
> 
> 赞同：0
> 
> 时间：2012-11-05T09:42:44.763
> 
> 标签：jquery-mobile

嗨如何减少文本框的高度...

```
HTML CODE:
<textarea id="" name="" placeholder=""></textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:21:23.140

```
#pageID div textarea.ui-input-text {height: 20px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:44:20.550

使用`rows`属性，您可以更改 textarea 中的行数，而不是完全的 height 属性（以像素为单位指定），但我认为`rows`这是您想要的。高度为 20 行的示例：

```
<textarea id="" rows="20" name="" placeholder=""></textarea> 
```

以同样的方式，有一个`cols`属性可以指定文本区域的宽度（以字符为单位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:46:59.627

对于 textarea 使用`rows`“或 and”`cols`并设置您想要的值，对于普通文本框，您可以为其设置样式`style="height:20px;"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T09:47:03.377

通过使用CSS，您可以调整高度`<textarea>`

首先，在你的名字上加上一些名字`id`

```
<textarea id="box" name="" placeholder=""></textarea> 
```

然后，你想要的高度`px`

```
#box {
    height:10px; /* example */
}​ 
```

见[这里](http://jsfiddle.net/Bt24N/)。

# javascript - 替换最后 7 个字符的字符串？

> ID：13229428
> 
> 赞同：0
> 
> 时间：2012-11-05T09:43:35.357
> 
> 标签：javascript, regex, replace

这是我的代码：

```
​var myStr = "/private_images/last-edit/image-work-med.png";​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我想将最后 7 个字符 ( `med.png`)替换为`big.png`. 或者，如您所见，`-`拆分后的最后一次出现。

我该怎么做？我想到了正则表达式，但我不是他们的拥护者。试过：

```
myStr = myStr .replace(/-([^-]*)$/, "big" + '$1'); 
```

但它取代了最后一次`-`，而不是最后一次。所以结果是`/private_images/last-edit/image-workbigmed.png`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:52:41.093

我要坦白：我对正则表达式也不是很好。

怎么分开使用`split`？不太简洁，但更容易理解。

```
var myStr = "/private_images/last-edit/image-work-med.png";​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
var strs = myStr.split('-');

// Change the last element.
strs[strs.length - 1] = "big.png";

// And put back the right string.
myStr = strs.join('-'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:49:14.667

您可以使用正则表达式，或者您可以使用一些字符串方法并明确您的意图。

```
var idx = myStr.lastIndexOf("-");
var newStr = myStr.substring(0, idx) + "big.png"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:59:50.480

不使用`RegExp`你可以使用：

```
var str = "/private_images/last-edit/image-work-med.png"
   ,replace = 'big.png'
   ,nwstr = str.slice(0,str.lastIndexOf('-')+1)+replace;
//=> nwstr now "/private_images/last-edit/image-work-big.png" 
```

更多“功能”：

```
var nwstr = function(s){
              return s.replace(s.substr(-7),'');}(
               '/private_images/last-edit/image-work-med.png'
           )+'big.png' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T11:17:35.123

```
var url = "/private_images/last-edit/image-work-med.png"; 
var index = url.lastIndexOf('-');
url = url.substring(0, index+1);
var url2 = "big.png";
var output = url.concat(url2); alert(output); 
```

检查这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:50:21.680

只需将“-”添加到您的正则表达式和替换字符串：

```
myStr = myStr .replace(/-([^-]*)\.png$/, "-big.png"); 
```

或者，如果您希望文件扩展名可变：

```
myStr = myStr .replace(/-([^-]*)\.([a-z]+)$/, "-big.$2"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T09:59:18.523

为什么不直接使用替换：

```
var myStr = "/private_images/last-edit/image-work-med.png";​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

var newStr = myStr.replace("med.png", "big.png"); 
```

根据您的问题中指定的要求，这就足够了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T10:01:23.680

如果你想使用字符串函数 -

```
var myStr = "/private_images/last-edit/image-work-med.png";
var cleanedupStr = myStr.slice(0, myStr.lastIndexOf("-")); 
```

[字符串切片](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/slice)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-05T10:03:29.560

如果您知道它将是一个 .png 文件：

```
var ex = new Regex(@"-\w*.png$");
var myStr = "/private_images/last-edit/image-work-med.png";​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
myStr = ex.Replace(myStr, "-big.png"); 
```

它可以工作，但如果它是 jpg 它不会...

# c# - 如果没有调用。C＃

> ID：13229429
> 
> 赞同：-2
> 
> 时间：2012-11-05T09:43:42.343
> 
> 标签：c#, if-statement

> **可能重复：**
> [错误地检查响应 c#](https://stackoverflow.com/questions/13223602/incorrectly-checks-the-response-c-sharp)

我有一个代码：

```
Match match = regex.Match(responseFromServer);
if (match.Success)
{
    var input = responseFromServer;
    var split = input.Split(':');
    var final = split[3];
    ProcessStartInfo mcStartInfo = new Shitocode;
    Process.Start(mcStartInfo);
    this.Close();
}
else if (responseFromServer == " Bad Login")
{
    MessageBox.Show("Uncorrect login/password!");
}
else if (responseFromServer == " Old version")
{
    MessageBox.Show("Launcher is old!");
} 
```

为什么最后两次检查没有显示消息框？

我试图以不同的方式做事：

```
if (match.Success)
{
    var input = responseFromServer;
    var split = input.Split(':');
    var final = split[3];
    ProcessStartInfo mcStartInfo = new Shitocode;
    Process.Start(mcStartInfo);
    this.Close();
}
else if (responseFromServer.Equals("Bad Login"))
{
    MessageBox.Show("Uncorrect login/password!");
}
else if (responseFromServer.Equals("Old Version"))
{
    MessageBox.Show("Launcher is old!");
} 
```

我输入了错误的密码，但没有打开消息框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:01:19.767

```
string s = instxtbox.Text;
        string[] s1 = new string[3];
        s1[0] = " ";
        s1[1] = " ";
        s1[2] = " ";

        string[] portion = s.Split(s1, StringSplitOptions.RemoveEmptyEntries);
        int val = Convert.ToInt32(portion[2]);

        string reg = portion[1];

        if (reg == "ax")
            axtxtbox.Text = portion[2];

        else if (reg == "bx")
            bxtxtbox.Text = portion[2];
        else if (reg == "cx")
            cxtxtbox.Text = portion[2];
        else if (reg == "dx")
            dxtxtbox.Text = portion[2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:48:56.760

只需设置一个断点，检查代码并`responseFromServer`在两种情况下检查 Copy this 的值并在您的代码中进行比较，我注意到您在“Bad Login”之前的第一个代码部分中有空格，但我不确定它的原因反正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:49:56.397

可能您的**responseFromServer**与您检查的值不匹配（登录错误和旧版本）。
尝试在***if***序列的末尾添加另一个***else*** ，看看你有什么。

 *```
if (match.Success)
{
   //your code
}
else if (responseFromServer.Equals("Bad Login"))
{
    MessageBox.Show("Uncorrect login/password!");
}
else if (responseFromServer.Equals("Old Version"))
{
    MessageBox.Show("Launcher is old!");
}
else
{
    MessageBox.Show("Cannot login, unknown response: " + responseFromServer)
} 
```

**评论后**编辑****

 **如果您没有确切的消息，但您知道它必须包含一些确切的字符串，您可以将两者更改`responseFromServer.Equals()`为`responseFromServer.Contains()`***

# sharepoint - 如何验证和比较共享点日期时间控制的小时数部分？

> ID：13229431
> 
> 赞同：0
> 
> 时间：2012-11-05T09:43:43.353
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我有两个共享点日期时间控件，其中 timeOnly=true。我需要验证为必填字段并验证为一个控件小时值必须大于和等于另一个。我想在客户端做。

**注意**：使用 timeOnly="true" 意味着只需要验证小时和分钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:18:05.850

创建了一个 asp.net 自定义验证器来比较两个日期时间控件的小时和分钟部分。**并从asp.net 自定义验证器**的属性中
调用 javascript 函数。 功能在这里：`ClientValidationFunction`

 **```
 function ValidateHour&Minute(sender, args){
            var startDateHour = document.getElementById("<%=DateTimeControlStartDate.Controls[1].ClientID %>").value;// gets value from hours dropdown list for 1st datetime control
            var startDateMinute = document.getElementById("<%=DateTimeControlStartDate.Controls[2].ClientID %>").value;// gets value from minutes dropdown list for 1st datetime control
            var timeStart = new Date();
            var timeEnd = new Date();
            var strStartHour;
            var hourType;
            hourType = startDateHour.split(' '); 
            if (hourType[1] == "AM") {
                startDateHour=startDateHour.split(' ');
                strStartHour = startDateHour[0];
            }
            else {
                startDateHour=startDateHour.split(' '); 
                strStartHour = startDateHour[0]; 
                strStartHour = parseInt(strStartHour) + 12; 
            }
            timeStart.setHours(strStartHour, startDateMinute, 0, 0); 
            var strEndHour;
            var endDateHour = document.getElementById("<%=DateTimeControlEndDate.Controls[1].ClientID %>").value;// gets value from hours dropdown list for 2nd datetime control
            var endDateMinute = document.getElementById("<%=DateTimeControlEndDate.Controls[2].ClientID %>").value;// gets value from minutes dropdown list for 2nd datetime control
            hourType = endDateHour.split(' ');
            if (hourType[1] == "AM") {
                endDateHour=endDateHour.split(' ');
                strEndHour = endDateHour[0]; 
            }
            else {
                endDateHour= endDateHour.split(' ');
                strEndHour = endDateHour[0]; 
                strEndHour = parseInt(strEndHour) + 12; 
            }
            timeEnd.setHours(strEndHour, endDateMinute, 0, 0);
            if (timeStart < timeEnd) {
                args.IsValid = true;

            }
            else {
                args.IsValid = false;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:39:42.740

通过在 Google 上搜索短语 - sharepoint datetimecontrol validation - 不使用引号，您会找到几个很好的解决方案**

# ios - iOS 在本地应用程序中将日历与谷歌日历同步

> ID：13229435
> 
> 赞同：1
> 
> 时间：2012-11-05T09:43:50.633
> 
> 标签：ios, calendar, sync, google-calendar-api

我正在编写一个应用程序以使用事件工具包与内置的 calendar.app 同步。打开时内置的 calendar.app 将与谷歌日历同步。但是，我的应用在打开时不会与 Google 日历同步。

有没有什么方法可以通过代码中内置的 calendar.app 与谷歌日历同步（打开我的应用，它会在没有任何设置的情况下与谷歌日历同步）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:59:34.507

在 iOS5 EKEventStore 中有 refreshSourcesIfNecessary 方法。

# php - magento - 在产品集合中隐藏可定制的产品偏角

> ID：13229436
> 
> 赞同：0
> 
> 时间：2012-11-05T09:43:53.670
> 
> 标签：php, magento

我在我的 magento 商店中创建了一些可定制的产品。出现在类别页面上的集合很好，但我在主页上制作了一个自定义产品列表块。他得到了产品清单

```
Mage::getModel('catalog/category')->load(3)->getProductCollection() 
```

在此列表中，出现可自定义的产品偏角（例如：如果我将尺寸属性设置为可配置，则为 Tshirt-M 和 Tshirt-L）。

有人知道 magento 过滤类别页面列表的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:43:11.087

试试这个代码，你会得到你的类别中的所有产品。

```
$category = Mage::getModel('catalog/category')->load(3);
Mage::getModel('catalog/product')->getCollection()->    
->addAttributeToSelect('*')
->addCategoryFilter($category)
->addAttributeToFilter('status', 1)
->addAttributeToFilter('visibility', 4)
->groupByAttribute('name'); 
```

# emacs - Emacs - 每 5 秒自动保存缓冲区

> ID：13229437
> 
> 赞同：6
> 
> 时间：2012-11-05T09:43:59.070
> 
> 标签：emacs, buffer, dot-emacs, emacs24

我们如何将 emacs 配置为每 5 秒自动保存未保存的更改？我想要保存缓冲区而不是生成的临时文件 ~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T09:47:12.530

在 ~/.emacs 文件中进行以下更改。

```
(require 'auto-save-buffers)
(run-with-idle-timer 5 t 'auto-save-buffers) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:44:55.863

更改自动保存超时的值会影响自动保存之前的空闲时间秒数。

使用 (setq auto-save-timeout 5) 可以解决您的问题

# c# - 即使定义了 ID 也无法获取文本框

> ID：13229438
> 
> 赞同：1
> 
> 时间：2012-11-05T09:44:00.973
> 
> 标签：c#, asp.net

我目前正在创建一个页面，用户将能够输入信息并在提交时应将此信息保存到文本文件中，但是我似乎无法获取文本框，因为即使设置了 ID，它似乎也未定义关于它，有人可以解释我做错了什么吗？因为它似乎与我的 btnSave 方法正常工作。

后端 C#：

```
 public partial class Green_FreeShipping : System.Web.UI.Page
{
    private static readonly string FILE_PATH = "~/TextFiles/Notes.txt";

    private void GetNote()
    {
        using (TextReader tr = new StreamReader(MapPath(FILE_PATH)))
        {
            txtNote.Text = tr.ReadToEnd();
        }
    }

    private void SaveNote()
    {
        using (TextWriter tw = new StreamWriter(MapPath(FILE_PATH)))
        {
            tw.Write(txtNote.Text);
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.GetNote();
        }
    }

    protected void btnSave_Click(object sender, EventArgs e)
    {
        this.SaveNote();
        this.GetNote();
    }
} 
```

ASP.NET 代码：

```
<%@ Page Language="C#" MasterPageFile="~/admin/masters/admin.master" autoeventwireup="true" inherits="TextBox_ReadWriteToTextFile" Title="Green & Free shipping amounts" codefile="~/admin/bespoke/Green-FreeShipping.aspx.cs"%>

<%@ Register TagPrefix="web" Assembly="website.Web" Namespace="website.Web" %>
<%@ Register TagPrefix="sales" Assembly="website.site.Web" Namespace="website.site.Web.Sales" %>
<%@ Register TagPrefix="ecom" Namespace="website.site.Web" Assembly="website.site.Web" %>
<asp:Content ID="TitleContent" ContentPlaceHolderID="TitlePlaceHolder" runat="Server">
    <title>Shopfront - Green and Free shipping amounts</title>
</asp:Content>

<asp:content id="Content1" contentplaceholderid="ContentPlaceHolder1" runat="Server">
    <div style="margin-bottom: 20px;">
    <asp:textbox id="txtNote" runat="server" rows="5" textmode="MultiLine" width="200px" />
    </div>
    <asp:button id="btnSave" runat="server" onclick="btnSave_Click" text="Save" />
</asp:content> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:01:26.473

您的 asp 应该继承“Green_FreeShipping”，以便 c# 可以访问其中包含的控件。

# java - jsp JSTI foreach：来自 request.setAttribute 的数组

> ID：13229448
> 
> 赞同：1
> 
> 时间：2012-11-05T09:44:38.510
> 
> 标签：java, jsp, servlets, foreach, jstl

我想知道如何遍历 jsp 页面中的列表数组，其中列表是在自定义 java servlet 中定义的。

这就是我在 servlet 中的内容：

```
request.setAttribute("TITLE", STRINGVALUE); 
```

我可以使用以下行显示上面的代码片段：

`${dashboard}`

现在我正在尝试使用 foreach 循环：

```
<c:forEach var="VARIABLE" items="??????"> 
```

该问题由两个子问题组成：

1.  如何在 foreach 语句中使用数组而不使用 scriptlet？
2.  如何打印数组元素的值？例如，${person.name} 会导致错误，因为程序只能看到一个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:57:04.980

基本上，您需要在会话中拥有对象列表。

前任。

```
List <Persons> myList = new ArrayList<Persons>();
myList.add(p1);
myList.add(p2);
session.setAttribute("persons", myList ); 
```

然后在你的jsp中你像这样使用它：

```
<c:forEach items="${persons}" var="personBean">  
  ${personBean.lastName}, ${personBean.firstName} <br />  
</c:forEach> 
```

您还可以在[使用 JSTL <c:forEach> 标记迭代 List 和 Map 的元素中](https://stackoverflow.com/questions/2148658/java-list-use-through-use-of-jstl-cforeach)查看 BalusC 帖子以获取更多信息

# javascript - Javascript 和模块模式

> ID：13229450
> 
> 赞同：0
> 
> 时间：2012-11-05T09:44:42.657
> 
> 标签：javascript

我想我不明白 javascript 模块模式。

我只是创建这个模块：

```
var mycompany = {};
mycompany.mymodule = (function() {
    var my = {};
    var count = 0;

    my.init = function(value) {
        _setCount(value);
    }

    // private functions
    var _setCount = function(newValue) {
        count = newValue;
    }
    var _getCount = function() {
        return count;
    }

    my.incrementCount = function() {
        _setCount(_getCount() + 1);
    }
    my.degreeseCount = function() {
        _setCount(_getCount() - 1);
    }

    my.status = function() {
        return count;
    }

    return my;
})();

var a = mycompany.mymodule;
var b = mycompany.mymodule;
console.debug(a, 'A at beginning');
console.debug(a, 'B at beginning');
a.init(5);
b.init(2);
console.log('A: ' + a.status()); // return 2 (wtf!)
console.log('B: ' + b.status()); // return 2` 
```

错误在哪里？我以为我的代码返回给我的不是 2 值，而是 5。

什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:51:54.623

`a`并且`b`是完全相同的对象。

```
var a = mycompany.mymodule;
var b = mycompany.mymodule; 
```

您要做的是创建两个具有相同原型的不同对象。与此类似的东西：

```
mycompany.mymodule = (function () { 
  var my = function () {};
  my.prototype.init = function (value) {
    _setCount(value);
  };
  my.prototype.incrementCount = ...
  // ...

  return my;
}());

a = new mycompany.mymodule();
b = new mycompany.mymodule();
a.init(5);
b.init(2); 
```

有关更多信息，请研究“javascript 原型继承”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:53:06.380

在 JavaScript 中，对象是通过引用传递的，而不是复制的。

为了进一步解释，这里是您的代码的简化版本：

```
var pkg = (function () {
  var x = {};
  return x;
}());

var a = pkg;
var b = pkg; 
```

您不创建两个单独的对象，而仅从 和 引用指向`pkg`的`a`对象`b`。`a`并且`b`完全一样。

```
a === b // true 
```

这意味着在`a`你身上调用一个方法最终会做同样的事情`b`（它指向同一个对象——<code>x。）

您不想为此使用模块模式。你想要通常的构造函数+原型。

```
function Pkg() {
  this.count = 0;
};
Pkg.prototype.init = function (count) { this.count = count; };

var a = new Pkg();
var b = new Pkg();

a === b // false

a.init(2);
a.count === 2 // true
b.count === 2 // false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:57:39.037

[这](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)是关于模块模式的好读物。

# objective-c - UIButton 滑动而不是单击

> ID：13229452
> 
> 赞同：1
> 
> 时间：2012-11-05T09:44:43.570
> 
> 标签：objective-c, ios, xcode

在运行我的应用程序时，按钮的行为很奇怪。他们只在滑动时做出反应，而不是点击。单击时它们确实会变蓝，但不会发生任何操作，如果我滑动它们，它们会按应有的方式进行操作。在模拟器上，一切都按点击预测的那样工作。我还没有实现任何滑动按钮等的方法。可能是什么问题？

更新 ：

```
 forControlEvents:UIControlEventTouchUpInside];
[save addTarget:self action:@selector(saveInfo)

forControlEvents:UIControlEventTouchUpInside];
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                               initWithTarget:self
                               action:@selector(dismissKeyboard)];
[TableControll.view addGestureRecognizer:tap];

-(void)dismissKeyboard {
    [[_textFields objectAtIndex:0] resignFirstResponder];
    [[_textFields objectAtIndex:1] resignFirstResponder];
    [[_textFields objectAtIndex:2] resignFirstResponder];
    [[_textFields objectAtIndex:3] resignFirstResponder];
} 
```

如果没有关闭键盘，按钮可以正常工作，那么我应该如何让它们一起工作而不会出现问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:59:12.103

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
       shouldReceiveTouch:(UITouch *)touch {

    if ([touch.view isKindOfClass:[UIButton class]]) {
        return NO;
    }
    return YES;
} 
```

使用此方法区分点击事件和按钮事件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T14:33:40.137

我有一个类似的问题，这是我的解决方案：

```
tapRecognizer.cancelsTouchesInView = false 
```

# module - Coffeescript 公共文件模块

> ID：13229456
> 
> 赞同：0
> 
> 时间：2012-11-05T09:44:53.393
> 
> 标签：module, coffeescript

我有一些常用文件，如记录器、秒表、指标等。现在，我想将它们全部添加到 1 common.coffee 中，并将这些文件放在 lib 下的公共文件夹中。

```
lib/common/logger.coffee
lib/common/metrics.coffee
lib/common/stopwatch.coffee
lib/common.coffee 
```

现在，当我必须使用这些文件时。我只是做一个

```
require( 'lib/common' ) 
```

并且应该能够调用记录器类

lib 文件中的like`logger.info`等。

怎么做呢？下面是 common.coffee，但每当我必须使用它时，它要求我说“​​Common.logger”。我不想要通用前缀

```
nconf = require('nconf')

environment = process.env.NODE_ENV || 'development'

nconf.file 'environment', "config/#{environment}.json"
nconf.file 'default', 'config/default.json'

module.exports = {
  logger: require('lib/common/logger')
  metrics: require('lib/common/metrics') nconf
  stopwatch: require('lib/common/stop_watch')
} 
```

另外，如何制作 common 文件夹的模块，以便我可以使用 npm 安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:26:47.753

您可以在 require 调用中使用解构分配。

```
{logger, metrics, stopwatch} = require("lib/common") 
```

另一种方法是使用像 grunt.js 这样的构建工具并在构建最终部署工件之前调用连接任务。

# c# - C#在不同格式之间更改日期

> ID：13229461
> 
> 赞同：1
> 
> 时间：2012-11-05T09:45:15.420
> 
> 标签：c#, sql, sql-server

我想知道是否有办法根据用户本地日期格式设置更改日期格式。我将存储在数据库中的日期，`YYYY-MM-DD`但用户有不同的格式，比如`DD-MM-YYYY`or `DD.MM.YYYY`。什么是一种干净、优雅的方式来确保我的应用程序始终以本地日期格式检索日期，并且 SQL 服务器始终接收`YYYY-MM-DD`要存储的日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T09:47:11.940

> 在数据库中`YYYY-MM-DD`

不。如果你做对了，数据库中的存储就没有格式。例如，它被存储为一个数字。

> 什么是确保我的应用程序始终以本地日期格式检索日期的干净、优雅的方式

您的应用程序也将其作为二进制值接收。每次变成字符串时，您都必须考虑格式。

> 本地日期格式

为此，您可以依赖机器配置： `datevalue.ToString()`.

但通常你想控制： `datevalue.ToString(specificCultureInfo)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:48:18.910

您应该始终将日期保存在 datetime 对象中。要解析日期，您可以在知道日期格式时使用 DateTime.TryParseExcact，在想要使用用户偏好时使用 TryParse。但是，使用专用日期控件从用户那里获取日期会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:49:46.650

对象没有`DateTime`格式。您可能正在谈论日期的字符串表示形式。

您可以通过调用使用用户各自的文化设置将日期作为字符串返回[**`DateTime.ToShortDateString()`**](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)

```
DateTime date = new DateTime(2012, 01, 01);
string dateStringInCurrentCultureFormat = date.ToShortDateString(); 
```

# css - zindex 和子元素

> ID：13229462
> 
> 赞同：0
> 
> 时间：2012-11-05T09:45:24.160
> 
> 标签：css, hover

[http://jsfiddle.net/cxwQF/12/](http://jsfiddle.net/cxwQF/12/)。

注意：红色和绿色框应该相交。绿框是图像或视频。悬停时变成黄色。但不是在红色框开始的底部。红框是控件（例如，下一个图像）。

问题。如何将父 div 放在图像后面，将子 div 放在顶部。

标记：

```
<div id='image'></div>
<div id='parent'>
    <div id='child'></div>
</div>​ 
```

CSS：

```
#image {
    position: relative;
    width: 100%;
    height: 500px;
    background: green;
    z-index: 2;
}

#image:hover {
    background: yellow;
}

#parent {
    position: fixed;
    bottom: 0;
    width: 100%;
    z-index: 1;
}

/*#parent:hover {
    background: blue;
} */  

#child {
    position: relative;
    margin: 0 auto;
    width: 100px;
    height: 100px;
    background: red;
    z-index: 3;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:34:13.207

这怎么适合你？如果不知道您要达到的目标，就很难知道如何构建它。

[http://jsfiddle.net/cxwQF/21/](http://jsfiddle.net/cxwQF/21/)

我`div`为你的“孩子”创造了另一个，但原来的（脚）仍然在同一个地方。

```
<div id='image'></div>
<div id='foot'>

</div>
<div id='parent'>
<div id='child'></div>
</div> 
```

抱歉，边框样式纯粹是出于测试目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:01:00.360

我找到了纯 CSS 解决方案。标记保持不变。

CSS：

```
#image {
    width: 100%;
    height: 500px;
    background: green;
}

#image:hover {
    background: yellow;
}

#parent {
    position: fixed;
    bottom: 0;
    width: 100%;
    z-index: 1;
    visibility: hidden;
}

#child:hover {
    background: pink;
}

#child {
    margin: 0 auto;
    visibility: visible;
    width: 100px;
    height: 100px;
    background: red;
}​ 
```

Solution: #parent's "visibility" should be set to "hidden", #child's "visibility" should be set to "visible"

Fiddle is here: [http://jsfiddle.net/cxwQF/22/](http://jsfiddle.net/cxwQF/22/)

# c# - 如何从 url 获取文件名

> ID：13229467
> 
> 赞同：0
> 
> 时间：2012-11-05T09:45:38.857
> 
> 标签：c#, asp.net

我有类似的网址，`http://xxx.xxx.xxx/mls/pmmls/12/-8/53/6/12-8536_2.jpg/t1349940727/100x100/` 并且只需要从网址中获取文件名，例如“`12-8536_2.jpg"`

```
url format is dynamic. Filename with extension must be in url. but it filename with extension  may not be in last position of url 
```

我已经尝试过 Path.GetFileName() 但它给出了“”。

有谁知道如何为这种类型的 url 提取文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:49:34.290

无法保证 URL 的任何部分都映射到文件，因此尝试在 URL中获取*FileName*是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:14:03.140

如果您*知道*文件名后面总是会跟着另外两个段（在您的示例中，`t1349940727`和`100x100`），您可以这样做

```
var input =
    "http://xxx.xxx.xxx/mls/pmmls/12/-8/53/6/12-8536_2.jpg/t1349940727/100x100/";
var uri = new Uri(input);
var fileName = uri.Segments[uri.Segments.Length - 3]; 
```

如果您不知道，那么正如其他人所说，没有简单的方法可以判断哪个部分是文件名。你可以试试

```
var fileName = url.Segments.Last(seg => seg.Contains(".")); 
```

得到最后一个带点的段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:17:08.163

12-8536_2.jpg 似乎不是该 URL 中的文件。在任何情况下，如果 URL 中的“文件名”始终为 .jpg，您可以将 URL 输出为字符串（或*AS*字符串）并为其输出正则表达式：

```
string filename = Regex.Match(URL,@"\/([A-Za-z0-9\-._~:?#\[\]@!$%&'()*+,;=]*).jpg").Groups[1].Value 
```

编辑：我认为这是针对特定文件具有不同预览大小的站点。您还可以按如下方式指定不同的可能扩展名（例如）：

```
string filename = Regex.Match(URL,@"\/([A-Za-z0-9\-._~:?#\[\]@!$%&'()*+,;=]*)(.jpg|.JPG|.jpeg|.JPEG)").Groups[1].Value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:18:27.370

您应该定义一个扩展名列表，例如 .jpg、.png .gif（您期望的所有文件类型）。

将您的 url 转换为字符串（如果还没有）并尝试查找扩展的索引。您现在确实知道文件名的位置以及是否有文件名。删除文件名后面的所有内容。

现在找到一个“/”标记，并删除“/”之前（包括）之前的部分，重复此操作，直到您不再找到“/”（例如使用 while 函数）。

有关如何执行此操作的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/7wtc81z6.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-28T22:25:59.533

```
static string getFileName(string url) {
    string[] arr = url.Split('/');
    return arr[arr.Length - 1];
} 
```

# c# - 在 Windows 应用商店应用中放大图像

> ID：13229468
> 
> 赞同：5
> 
> 时间：2012-11-05T09:45:42.287
> 
> 标签：c#, windows-8, scrollviewer, windows-store-apps

我有一个带有图像控件的 ScrollViewer。它显示一个相当大的图像。我希望我的用户能够使用手势放大图像。因此，我在 Scrollviewer 上启用了 ZoomMode。但是，只要用户松开手指，Scrollviewer 就会自动滚动回图像的左“边缘”，从而无法有效地放大和缩小图像。

这是我正在使用的模板：

```
<DataTemplate x:Key="SingleItemTemplate">
    <ScrollViewer ZoomMode="Enabled">
        <Grid Margin="5,0,5,0">
            <Image Source="{Binding ImageUrlHighRes}">
            </Image>
        </Grid>
    </ScrollViewer>
</DataTemplate> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T10:31:48.360

您还需要启用水平滚动（默认关闭）

```
HorizontalScrollBarVisibility = "Auto" 
```

# java - Vaadin 多会话问题

> ID：13229469
> 
> 赞同：0
> 
> 时间：2012-11-05T09:45:43.897
> 
> 标签：java, vaadin

我有一个非常奇怪的问题：我有一个基于 Vaadin 的网络应用程序。当一个用户登录并执行一些操作时，一切正常。当第二个用户登录时，第一个用户开始使用第二个用户的会话和上下文......我有这样的上下文加载：

```
 private Context getContextFromSession() {
    WebApplicationContext context = (WebApplicationContext) this.getContext();
    Context c = (Context) context.getHttpSession().getAttribute("context");
    if (c == null) {
        c = new Context();
        context.getHttpSession().setAttribute("context", c);
    }
    System.out.println("Current session: " + context.getHttpSession().toString() + " , context: " + c.toString());
    return c;
} 
```

Vaadin 真的支持多会话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:29:34.087

是的，Vaadin 支持多个并发用户。

但是 - 与大多数 Web 应用程序/Java 应用程序服务器组合一样 - 您一次只能在浏览器实例中打开一个 HTTP 会话。例如，您不能在一个浏览器实例中拥有两个单独的选项卡，一个用于用户 A，一个用于用户 B。

它比这要复杂一些，但这是开始的好地方。您使用的是同一个浏览器实例，还是两个独立的“客户端”机器/进程？

# php - Jquery UI date-picker 设置默认日期

> ID：13229473
> 
> 赞同：2
> 
> 时间：2012-11-05T09:45:56.233
> 
> 标签：php, jquery, jquery-ui

我将 jQuery UI 用于 datepicker 我想在字段中显示当前日期作为默认值以下是我的代码请帮助

```
 <script>
        $(function() {
         $( "#datepicker" ).datepicker({
        dateFormat: 'dd-mm-yy',
        currentText: "Now"
         });

        $( "#datepicker2" ).datepicker({
        dateFormat: 'dd-mm-yy',
        currentText: "Now"
        });

    });
        </script>

From Date: <input type='text' id='datepicker' name='date_from' />
To Date:   <input type='text' id='datepicker2' name='date_to' /> 
```

但我无法设置默认日期

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T09:49:05.103

试试这个代码。

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker({
            dateFormat: 'dd-mm-yy'
        }).val(getTodaysDate(0)); // For current date

        $( "#datepicker2" ).datepicker({
            dateFormat: 'dd-mm-yy',
            }).val(getTodaysDate(1));  // For previous month's date
    });

  function getTodaysDate (val) {
    var t = new Date, day, month, year = t.getFullYear();
    if (t.getDate() < 10) {
        day = "0" + t.getDate();
    }
    else {
        day = t.getDate();
    }
    if ((t.getMonth() + 1) < 10) {
        month = "0" + (t.getMonth() + 1 - val);
    }
    else {
        month = t.getMonth() + 1 - val;
    }

    return (day + '/' + month + '/' + year);
   }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:53:38.647

你可以使用[setDate](http://api.jqueryui.com/datepicker/#method-setDate)

```
$("#datepicker").datepicker("setDate", (new Date())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T01:58:08.257

另一种方法是：

```
$( "#datepicker" ).datepicker({
    dateFormat: 'dd-mm-yy',
    defaultDate: new Date()
    }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T09:48:42.000

您可以像这样设置值。

```
$("#datepicker").val() = 'some value'; 
```

如果上面没有使用值，则写一个条件或使用它的值。

# .net - vb.net中的日期转换

> ID：13229481
> 
> 赞同：0
> 
> 时间：2012-11-05T09:46:37.467
> 
> 标签：.net, vb.net, date, type-conversion

我使用以下命令在字符串中转换日期时间值：这里 dtpdatum 是 DateTimePicker

```
ProjektText1 = VB6.Format(dtpDatum.Value, "dd,MM,yyyy") 
```

现在我想从此字符串/文本对象中检索日期时间值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:53:05.087

你应该更好地使用 .NET 函数，然后你可以使用`DateTime.ToString`你[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)的格式：

```
Dim format = "dd,MM,yyyy"
Dim dateString As String = dtpDatum.Value.ToString(format)
Dim dateValue As Date = Date.ParseExact(dateString, format, Nothing) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:52:54.110

使用`CDate`函数将对象转换为日期

```
Dim d as Date
Dim s as String

s="2012-Nov-04"

If IsDate(s) Then
   d=CDate(s)
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:41:58.543

如果您使用的是 DateTimePicker 控件，则最好只使用返回的值（不需要转换）：

```
Dim MyDate as Date = dtpDatum.Value.Date 
```

如果您想要一个字符串表示，请使用 ToString：

```
Dim MyDateString as string = dtpDatum.Value.Date.ToString("dd/MM/yyyy") 
```

# android - 为速度较慢的手机优化粒子效果

> ID：13229482
> 
> 赞同：6
> 
> 时间：2012-11-05T09:46:43.100
> 
> 标签：android, libgdx

我正在制作一个使用粒子效果进行爆炸的 libGDX 游戏。这在新手机上运行得很好，但在旧手机（在 HTC Desire 上测试）上，当屏幕上出现多次爆炸时，fps 明显滞后。

我目前正在考虑两种选择：

1.  每个效果有很多粒子，因此减少该数量可能是一种选择，但出于一致性和美学原因，我宁愿不这样做。

2.  使用运行粒子效果生成的动画并保存每一帧。这看起来不错并且是一致的。图像大小可能存在问题。我也看不出如何使用 libGDX 粒子实现来完成此操作。

有任何想法吗？

**编辑：** 一些代码片段：在 Assets 类中加载效果后：

```
particleFire.load(Gdx.files.internal("explosion.p"),Gdx.files.internal("")); 
```

我在弹丸对象的构造函数中加载粒子效果。我正在主渲染循环中创建这个对象，我知道这是优化的候选对象。

```
 explosion = new ParticleEffect(Assets.particleFire); 
```

在渲染线程中调用此方法来绘制效果。

```
 private void drawBlasts(float delta){

    for(Missile projectile : world.missiles){
    if (projectile.missileState == State.EXPLODING){

        if(projectile.stateTime==0.0f) {
            projectile.explosion.start();
            continue;
        }

        projectile.explosion.setPosition(projectile.position.x, projectile.position.y);
        projectile.explosion.draw(spriteBatcher, delta);

    }
    }

} 
```

一段爆炸.p

```
- Delay -
active: false
- Duration - 
lowMin: 1000.0
lowMax: 1000.0
- Count - 
min: 0
max: 100
- Emission - 
lowMin: 0.0
lowMax: 0.0
highMin: 250.0
highMax: 250.0
relative: false
scalingCount: 1
scaling0: 1.0
timelineCount: 1
timeline0: 0.0
- Life - 
lowMin: 800.0
lowMax: 800.0
highMin: 1000.0
highMax: 1000.0
relative: false
scalingCount: 3
scaling0: 1.0
scaling1: 1.0
scaling2: 1.0
timelineCount: 3
timeline0: 0.0
timeline1: 0.66
timeline2: 0.9931507 
```

编辑2：这些效果是相加的，所以也有很好的混合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:28:57.627

看看你的两个想法，它们都会起作用。第一个可以通过使粒子稍大并使用更少的粒子来解决。手机必须处理的粒子越少越好，因为每个粒子都是动态移动的，因此每帧滴答声会进行很多计算。

我觉得你的第二个选项会更好，因为没有/很少的处理时间（只需计算它的“爆炸”有多远并选择合适的框架。但是也有一个权衡，你所有的爆炸看起来都非常相似.如果您可以发布一些代码（您正在使用多少粒子，爆炸发生的频率，大致同时发生多少爆炸），那将会很有帮助。我有一个类似的问题，但更简单粒子效果，我通过渲染一个粒子效果并将其移动到每帧显示的任何地方来解决它

**编辑 1：** 好的，所以我认为您正在寻找的是粒子效果池。您基本上事先分配了一定数量的粒子效果，而不是像我相信的那样根据需要创建它们。通过重用固定池中的对象而不是单独分配和释放它们，您可以节省大量内存和处理。我尝试了我相信您在我的 Desire HD 上所做的事情，并且一次在屏幕上获得了大约 22 fps 和 12、1 秒 100 个奇怪的粒子效果。然后将它们汇集在一起​​，我得到了大约 25 个。这并不是非常好，但每一点都有帮助。甚至将粒子数减少到大约 75% 也不是很明显，并且可以为您节省很多帧！

[粒子效果池 Libgdx JavaDoc](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/ParticleEffectPool.html)

对不起，我无法提供更多帮助！

# iphone - 如何在情节提要中创建 UIScrollView？

> ID：13229484
> 
> 赞同：0
> 
> 时间：2012-11-05T09:46:49.247
> 
> 标签：iphone, xcode, uiscrollview, uibutton

使用`storyboard`我创建了一个`UIScrollView`并添加了一个`UIImage`，`UIScrollview`我想在`storyboard`.

我试过了，但它不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:51:46.780

显示您的代码，然后只有我们可以说任何内容，但可能不需要设置滚动视图的内容大小，然后滚动将起作用。

# android - ActionBarSherlock 自定义主题被忽略

> ID：13229486
> 
> 赞同：3
> 
> 时间：2012-11-05T09:46:54.223
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock 并应用了自定义它们来改变操作栏的外观：

```
<style name="Theme.MyTheme" parent="@style/Theme.Sherlock">
    <item name="android:actionBarStyle">@style/MyTheme.ActionBarStyle</item>
</style>

<style name="MyTheme.ActionBarStyle" parent="@style/Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/background_action_bar</item>
    <item name="android:icon">@drawable/image_action_bar_logo</item>
</style> 
```

这在运行果冻豆的设备上完美运行，但是当我将它部署在运行 2.2 或 2.3 的模拟器上时，自定义操作栏样式被忽略并使用默认样式。

有任何想法吗？

谢谢大卫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T09:52:16.677

你必须调整主题和一点：

```
<style name="Theme.MyTheme" parent="@style/Theme.Sherlock">
    <!-- define the style for ActionBarSherlock -->
    <item name="actionBarStyle">@style/MyTheme.ActionBarStyle</item>

    <!-- define the style for native ActionBar for Android 4 and higher -->
    <item name="android:actionBarStyle">@style/MyTheme.ActionBarStyle</item>
</style> 
```

编辑：

并适当调整样式：

```
<style name="MyTheme.ActionBarStyle" parent="@style/Widget.Sherlock.ActionBar">
    <!-- for ActionBarSherlock -->
    <item name="background">@drawable/background_action_bar</item>
    <item name="icon">@drawable/image_action_bar_logo</item>

    <!-- for native ActionBar for Android 4 and higher -->
    <item name="android:background">@drawable/background_action_bar</item>
    <item name="android:icon">@drawable/image_action_bar_logo</item>
</style> 
```

# iphone - 通过 sendAsynchronousRequest 从 webservice 获取数据。

> ID：13229498
> 
> 赞同：0
> 
> 时间：2012-11-05T09:47:22.880
> 
> 标签：iphone, database, xcode, asynchronous

```
+ (NSData *) sendGETRequest:(NSString *) url
{
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]
                                                           cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                                       timeoutInterval:10];
    [request setHTTPMethod: @"GET"];
    [NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) 
        {
        [Common alertStatus:@"N/A PTZ" :@"System error!"];
        }];
} 
```

我想从 Web 服务中获取数据并且我已经使用过`sendAsynchronousRequest`，但它没有运行！也许我做错了什么。请帮忙 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:10:49.177

使用异步时，您应该只在 NSURLConnection 对象上调用 start 并处理委托中的回调。否则，使用 sendSynchronousRequest：

# mule - 如何从 Mule TcpConnector 获取 Socket 对象

> ID：13229499
> 
> 赞同：1
> 
> 时间：2012-11-05T09:47:29.550
> 
> 标签：mule

`SendSocketOpen`一旦在持久 tcp 连接期间出现异常（设置为 true），我想关闭套接字。目前我相信 Mule 不会为我做清理工作，它只是释放套接字，这意味着它将它返回到池中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:33:26.807

作为记录，除非您`keepSendSocketOpen`（不是`SendSocketOpen`您发布的那样）在连接器或端点上设置为 true，否则 Mule 将在将套接字返回套接字池时关闭套接字。如果您强制关闭套接字，Mule 应该会恢复，因为它会在从池中获取套接字时验证套接字。所以 Mule 应该检测到它已被关闭并重新创建它。

问题确实是要控制套接字：AFAICS 唯一的选择是使用子元素扩展`org.mule.transport.tcp.TcpMessageDispatcher`和配置连接器，该`service-overrides`子元素提供`TcpMessageDispatcherFactory`构建您自己风格的调度程序。

# yii - yii 自定义 url 重写

> ID：13229501
> 
> 赞同：0
> 
> 时间：2012-11-05T09:47:35.977
> 
> 标签：yii

我开发了一个 webapp，现在想在 yii 中重写 url，我正在使用 yii。重写模式已打开并正在处理我的其他 php 项目，除了 yii。我当前的网址是/myhost/servers_cms/index.php?r=users/admin 但我想要这个/myhost/servers_cms/users/admin。

这是我的 main.php 代码

```
'urlManager'=>array(
'urlFormat'=>'path',
'showScriptName'=>false,
'caseSensitive'=>false,
), 
```

# .ht 访问代码

```
RewriteEngine On
RewriteBase /servers_cms
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\?*$ index.php/$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:03:57.347

我将它用于我的 .htaccess：

```
# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# otherwise forward it to index.php
RewriteRule . index.php 
```

要检查它是否有效，请尝试为您的用户/管理员控制器/操作创建自定义规则，看看是否有效，例如：

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'showScriptName' => false,
    'rules'=>array(                    
        'test'=>'users/admin',
        ... 
```

然后您应该能够转到 */myhost/servers_cms/test* 并访问 users/admin controller/action

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T09:06:55.337

在 main.php 中添加以下内容

```
'urlManager' => array(
'class' => 'UrlManager',
'urlSuffix' => '/',
'urlFormat' => 'path',
'showScriptName' => true,
'caseSensitive'=>false,
'rules' => array(
'<controller:\w+>' => '<controller>/index',
'<controller:\w+>/<action:\w+>' => '<controller>/<action>',
)
) 
```

以下几行定义

```
 '<controller:\w+>' => '<controller>/index',
'<controller:\w+>/<action:\w+>' => '<controller>/<action>', 
```

如果控制器名称是“user”，那么它将重定向到“example.com/user/index”

如果控制器是“用户”并且操作是“管理员”，那么它将重定向到“example.com/user/admin”

'urlFormat' => 'path' 定义 - url 应该是“漂亮的 url”。

示例：我的主机/用户/管理员

# xpages - 添加几个罐子后，XPages 在 DDE 中的速度很慢……这是标准行为吗？

> ID：13229503
> 
> 赞同：4
> 
> 时间：2012-11-05T09:47:46.807
> 
> 标签：xpages

我有一个相当大的 xpages 项目，现在我在项目中添加了一些 jars（通过项目资源管理器添加了 9 个 jars）。将这些 jars 添加到类路径后，在 DDE 中保存每个 xpage 或自定义控件需要 25 秒，这太疯狂了（我有一台速度非常快的 iCore7 计算机，8GB RAM 并在我的笔记本电脑上运行的本地 Domino 服务器上工作......所有最新8.5.3)。

当我从类路径中删除这些 jar 时，保存时间又回到了 1 秒以下。将这些 jars 添加到类路径会增加最多 25 秒的保存时间。这是正常行为吗？如何在仍然使用罐子的同时避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:35:38.357

当您将 Jars 存储在 NSF 文件中时，Notes/Domino 必须在编译代码之前将它们分离以将它们添加到类路径中。每次调用它们时都会这样做，如果它们在服务器上，则必须在分离之前将它们传输到客户端。

在几个小罐子上，这不是问题（取决于使用频率）。但是，如果您经常调用大量 jar，则应该将它们放入“lib/ext”文件夹（例如 c:\notes\jvm\lib\ext）。

这样，它们只会在客户端/服务器启动时加载到内存中一次。

让我知道这是否正在发生，我会看看是否存在 SPR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:22:41.767

与这里的人交谈，开发一个有类似问题的应用程序。他们说一个特定的 jar 导致整个站点减慢它的速度。也许您可以尝试单独添加它们，看看是哪一个导致应用程序变慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T09:22:43.867

如果延迟是由于将 JAR 从服务器传输到客户端引起的（如 Simon O'Doherty 所述），您可能会考虑在应用程序的本地副本中进行开发。

对于较大的应用程序，我总是以这种方式工作：在本地副本中开发，构建或清理该本地副本，然后在（本地或远程）Domino 服务器上刷新应用程序。

另一个提示：如果你以这种方式开发，如果你用 SSD 替换你的 HDD，你也可以获得很大的性能提升。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:33:08.173

我在这里做了有趣的观察。根据 Simon D'Oherty 的建议，我将所有 jar 文件移至 lib/ext，突然在保存 xpage 或控件时没有延迟。当我将一个罐子放回数据库时，“构建工作区”消息会出现延迟。将所有内容移至 lib/ext 时，不再出现“Bulding workspace”消息和延迟。但是以这种方式工作相当糟糕，因为所有运行应用程序的开发人员和服务器都必须保留所有这些几乎无法维护的 jar。IBM 应该在数据库中解决这个问题！！

# dynamics-crm - 如何从网站查询CRM 2011系统

> ID：13229504
> 
> 赞同：-1
> 
> 时间：2012-11-05T09:47:47.850
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm

我正在做一个需要我从 CRM 系统中获取数据的项目。我一直在做很多研究，我正在考虑使用 XrmServiceToolkit 来执行 fetchxml 查询。CRM 系统由一家外部公司运营，我将很快与他们会面，现在我想知道他们需要做什么才能让我能够使用 XrmServiceToolkit 进行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:39:04.903

您只需要确认您设置了一个服务用户，您可以使用其凭据来查询数据。您只需要指定获取数据所需的实体，CRM 管理员将负责其余的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:05:27.690

听起来您正试图从外部正确访问 CRM 数据？

如果是这样，您将遇到使用 JavaScript 访问 CRM 的跨站点脚本问题，*除非*您在 CRM 网站下具有相同的网站设置。我相信这在技术上不受支持。

如果您需要从外部站点访问 CRM 数据，您将需要从托管代码进行调用。无论这是您可以从外部站点调用的代理服务，还是您从头开始构建的成熟的 ASP.NET 网站，您都需要这样做以避免跨站点脚本问题。

托管代码也必须处理身份验证。您在这里有两个选择：

*   如果需要，您可以通过 windows/网络凭据，但您需要确保访问系统的每个用户都是 CRM 中具有正确权限的用户。
*   您可以将代理/服务/自定义网站设置为使用 CRM 中的特定用户，但您需要注意，无论该用户在 CRM 中可以看到什么，点击自定义代理/服务/站点的用户都可以见（理论上）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T13:30:53.413

XrmServiceToolkit 只是 javascript 帮助函数和包装器的集合。我不确定必须执行哪些操作才能授予您访问权限，但我可以告诉您，只要您的用户有权访问您正在查询的实体，并且您可以在设置 --> 自定义下点击开发人员资源，你应该很好![开发者资源](../Images/1897863c1aafb6bda77f84b3899fd275.png)。

# google-sheets - 检查单元格中的特定字母或一组字母

> ID：13229507
> 
> 赞同：125
> 
> 时间：2012-11-05T09:47:54.527
> 
> 标签：google-sheets

在 Google 电子表格中，如果某个单元格包含某些字母，我想使用一个公式来输出某个文本或数字。

例如，如果我输入`=IF(A1="Black";"YES";"NO")`并且 A1 等于“Black” - 它会正确输出“YES”。然而，当我把`=IF(A1="Bla";"YES";"NO")`它输出“否”。有没有我可以使用的公式，我可以这样说，`=IF(A1 CONTAINS "Bla";"YES";"NO")`所以它输出“是”。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-11-28T13:22:16.030

您可以使用`RegExMatch`：

```
=IF(RegExMatch(A1;"Bla");"YES";"NO") 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2015-04-23T19:58:32.563

一些没有 的选项`REGEXMATCH`，因为您可能希望不区分大小写并且不想说`blast`或`ablative`触发`YES`. 使用逗号作为分隔符，就像在 OP 中一样，暂时忽略 IF 条件：

首先非常类似于@user1598086 的回答：

```
=FIND("bla",A1) 
```

区分大小写，但返回 #VALUE！而不是`NO`和一个数字而不是`YES`（但是两者都可以分别更改为NO / YES）。

```
=SEARCH("bla",A1) 
```

不区分大小写，因此`Black`一视同仁`black`。返回如上。

前者（对于后者等价物）表示是否`bla`出现*在*A1 中的前三个字符之后：

```
=FIND("bla",A1,4) 
```

为`blazer, black`但返回一个数字。 `#VALUE!``blazer, blue`

仅当一个完整的单词单独出现时（即在`Bla`空格之间 - 不在“句子”的开头或结尾）：

```
=SEARCH(" Bla ",A1) 
```

由于上述所有情况下的返回值要么是一个数字（“找到”，所以`YES`首选），或者`#VALUE!`我们可以使用 ISERROR`#VALUE!`在 IF 公式中进行测试，例如上面的第一个示例：

```
 =if(iserror(FIND("bla",A1)),"NO","YES") 
```

比 长，`regexmatch`但组件很容易调节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-02T10:49:15.863

您可以使用以下公式，

```
=IF(ISTEXT(REGEXEXTRACT(A1; "Bla")); "Yes";"No") 
```

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2015-05-28T00:44:16.150

只需使用 = `IF(A1="Bla*","YES","NO")`。插入星号时，它充当指定文本后任意数量字符的通配符。

# ajax - 从另一个页面加载的经过验证的 AJAX 表单对话框的 MVC 助手？

> ID：13229509
> 
> 赞同：0
> 
> 时间：2012-11-05T09:48:02.147
> 
> 标签：ajax, asp.net-mvc, jquery-ui, unobtrusive-validation

我有一个简单的编辑表格。对于特定字段，如果用户没有看到他们想要的内容，他们可以单击一个链接，然后会在新窗口中弹出一个请求表单。（仅供参考，我们支持移动浏览器。）

如果 jQueryUI 可用，则渐进增强会拦截单击，打开一个 jQuery 对话框，填写、验证和提交表单，并在其中显示结果并允许关闭对话框。

**问题**：是否有“OEM”或“Nugettable”MVC 帮助程序以向下兼容的方式实现这种简单的“辅助 AJAX 表单”交互？

据我所知，我必须从头开始构建大量这些并手动将它们全部连接起来，并且 ASP.NET MVC 在这种情况下甚至不支持不显眼的验证。[如何使用 ajax 提交的 jquery 对话框使用 asp.net mvc 3 jquery validate？](https://stackoverflow.com/questions/5146419/how-to-use-asp-net-mvc-3-jquery-validate-with-a-jquery-dialog-that-does-an-ajax)这是一个从头开始为 PHP 构建它的示例：[http://www.experts-exchange.com/Programming/Languages/Scripting/JavaScript/Jquery/A_2099-jQuery-AJAX-Enabled-Forms-in-Modal-Dialog。 html](http://www.experts-exchange.com/Programming/Languages/Scripting/JavaScript/Jquery/A_2099-jQuery-AJAX-Enabled-Forms-in-Modal-Dialog.html)

例如，目前我认为我需要做这些事情，它们看起来非常“可封装”：

*   添加带有 { target = new } 的 ActionLink
*   为链接连接一个 javascript 事件处理程序
*   读取链接目标以将其设置为 jQuery 对话框源
*   重新初始化页面验证以克服不显眼的限制
*   将表单提交到验证
*   阅读表单发布目标以将其设置为 jQuery AJAX 目标
*   将表单提交到 jQuery 的 AJAX post 方法
*   在服务器端，为 AJAX 表单帖子返回特殊响应
*   将提交成功连接到 OK 对话框
*   将提交失败连接到对话框重绘

似乎需要付出很多努力才能满足日常需求。任何提示表示赞赏。

香农

# objective-c - 查找 UIView 对象的颜色并更改颜色

> ID：13229514
> 
> 赞同：1
> 
> 时间：2012-11-05T09:48:20.360
> 
> 标签：objective-c, ios, xcode, xcode4.5, ios5

![在此处输入图像描述](../Images/d1623fdf00bf1a0b9b25093b30a14ab0.png)大家好，实际上我有很多 UIView 自定义类对象作为 UIScrollView 内的 UIViewController 类视图的子视图。我想检查 UIView 自定义类对象的颜色。我使用的代码如下： -

```
 - (void) RectColorCheck:(id)sender
{
    NSArray *subViews = [[NSArray alloc] init];
    subViews = [self.scrollView subviews];
    NSLog(@"array----%@",subViews);

        for (viewCG in subViews) 
        {
            if ([viewCG.backgroundColor isEqual: [UIColor darkGrayColor]])
            {
                [viewCG setBackgroundColor:[UIColor orangeColor]];
            }
        }
} 
```

但它不起作用 viewCG 的子视图数组为空。下面的代码在 viewCG 子视图中添加了自定义类（UIView）对象：-

```
for (int i=0; i<[mapDataArr count]; i++)
    {
        X = [[[mapDataArr objectAtIndex:i] valueForKey:@"X"] intValue];
        Y = [[[mapDataArr objectAtIndex:i] valueForKey:@"Y"] intValue];
        W = [[[mapDataArr objectAtIndex:i] valueForKey:@"W"] intValue];
        H = [[[mapDataArr objectAtIndex:i] valueForKey:@"H"] intValue];

        circleVwObj = [[CircleView alloc] init];
        circleVwObj.frame = CGRectMake(X,Y, W, H);
        circleVwObj.tag = i;

        circleVwObj.lbl.frame = CGRectMake(2,2, circleVwObj.frame.size.width, circleVwObj.frame.size.height/2);
        circleVwObj.lbl.text = [[mapDataArr objectAtIndex:i] valueForKey:@"standId"];
        NSLog(@"lbl text---%@", circleVwObj.lbl.text);
        circleVwObj.lbl.font = [UIFont boldSystemFontOfSize:11];
        circleVwObj.lbl.backgroundColor = [UIColor clearColor];
        circleVwObj.lbl.textColor = [UIColor whiteColor];
        circleVwObj.lbl.textAlignment = UITextAlignmentCenter;
        circleVwObj.lbl.minimumFontSize = 11;
        circleVwObj.lbl.adjustsFontSizeToFitWidth = YES;
        circleVwObj.lbl.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

        [self.viewCG addSubview:circleVwObj];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:54:03.947

如果`subviews`数组是`nil`，则很可能`self.viewCG`也是`nil`如此并且尚未初始化。

此外，您应该使用`isEqual:`来比较颜色。运算符只是比较指针标识（在这种`==`特殊情况下，这实际上可能会给您预期的结果，但它可能会中断）。

# memory-management - Monodroid 内存分析工具

> ID：13229517
> 
> 赞同：0
> 
> 时间：2012-11-05T09:48:24.103
> 
> 标签：memory-management, memory-leaks, xamarin.android

是否有可以与 monodroid 一起使用的内存分析器工具？（有些相当于 MAT for android [http://android-developers.blogspot.ro/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.ro/2011/03/memory-analysis-for-android.html)）

或者有没有办法使用 MAT（来自 eclipse）来检查 monodroid 应用程序的内存使用/泄漏？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:03:43.570

找到了一个方法：

1.  使用以下命令获取***dump.hprof***文件：

    ```
    Debug.DumpHprofData("/sdcard/dump.hprof"); 
    ```

2.  使用***android-sdk\tools中的******hprof-conv***转换文件，以便 MAT 可以读取它

     *```
    hprof-conv dump.hprof mat.hprof 
    ```* 
**   在 MAT 中打开***mat.hprof***文件* 

 *希望这可以帮助某人:)*

# scrollbar - 改变滚动条的颜色

> ID：13229518
> 
> 赞同：4
> 
> 时间：2012-11-05T09:48:24.713
> 
> 标签：scrollbar

我想改变滚动条的样式，为此我在css下面使用，但我想将它用于页面上的特定div而不是整个页面。如何使用 div 类或 id 自定义它

```
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    -webkit-border-radius: 10px;
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    -webkit-border-radius: 10px;
    border-radius: 10px;
    background: #A8A8A8; 
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
}
::-webkit-scrollbar-thumb:window-inactive {
    background: rgba(255,0,0,0.4); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:21:34.250

是的，我们可以使用元素 id 来实现这一点，

尝试这个，

```
#div1::-webkit-scrollbar {
   width: 12px;
}

#div1::-webkit-scrollbar-track  {
   -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
   -webkit-border-radius: 10px;
   border-radius: 10px;
}

 #div1::-webkit-scrollbar-thumb  {
   -webkit-border-radius: 10px;
    border-radius: 10px;
    background: #A8A8A8; 
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
 }

#div1::-webkit-scrollbar-thumb:window-inactive {
    background: rgba(255,0,0,0.4); 
}​ 
```

希望它会工作...

[现场演示](http://jsfiddle.net/smanimani/Uvng8/2/)

注意：我认为，它在 chrome 中运行良好。但是 ff & ie 它不工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T22:39:54.017

如果您真的想要一些自定义滚动条，那么您可以在 Javascript 和 CSS 中使用一些技巧 - 关于[CSS-tricks 的](http://css-tricks.com/custom-scrollbars-in-webkit/)好文章。

那里也有很多 jQuery 插件。我使用过的一种叫做[Lazybars](http://lazybars.suiji.co.uk/) - 实现起来非常简单。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T08:23:51.763

目前仅 webkit 浏览器（Safari、Google Chrome 和 Opera）支持 CSS 自定义。IE 和 Firefox 不支持滚动条的 CSS 样式。要使跨浏览器 CSS 可自定义滚动条，您必须使用模拟滚动行为或用自定义元素替换本机滚动条的 javascript 解决方案（本机滚动条位于这些自定义滚动条下方或被包装器隐藏`overflow:hidden`）。

有很多免费的 jQuery 插件。滚动条模拟器*（例如[jScrollPane](http://jscrollpane.kelvinluck.com/)、[Malihu Custom Scrollbar](http://manos.malihu.gr/jquery-custom-content-scroller/)、[perfect-scrollbar](http://noraesae.github.com/perfect-scrollbar/)等）*提供对滚动内容的完全控制，但有更多的 js（模拟和处理所有事件）并且滚动行为不同于原生滚动行为。此外，同一页面上的大量滚动条可能会减慢速度。

使用本机滚动的滚动条（如[jQuery Scrollbar](http://github.com/gromo/jquery.scrollbar/)、[Scroller](http://formstone.it/scroller/)、[Baron](https://github.com/Diokuz/baron/)等）的代码更少，并保证滚动始终有效（即使插件因任何错误而无法工作）+ 更少的代码（因为有无需模拟滚动）+自动支持所有滚动功能，如滚动到焦点元素、滚动文本选择、滚动到锚元素、触摸滚动等...

[您可以在此处](https://docs.google.com/spreadsheet/ccc?key=0Ao4HbHsCLP0YdEhnZVh1WGZSbXloekZiNWlaNElnTnc&usp=drive_web)比较自定义滚动条插件

# c# - Visual Studio 2010、2012 中自动导入库的快捷方式是什么（如果有的话，比如 Netbeans 中的 Alt+Enter）？

> ID：13229519
> 
> 赞同：16
> 
> 时间：2012-11-05T09:48:30.027
> 
> 标签：c#, winforms, visual-studio-2010

我不知道在 C# winform/window store... 应用程序中自动生成命名空间导入的快捷按钮在哪里，例如NetBean IDE 中的`Alt`+快捷方式。`Enter`我和我的一些朋友在 Visual Studio 中编程了几年，但是当我们需要导入库时，我们必须将光标移动到 Class 代码之后并单击以显示命名空间，如下所示：

![缺少参考错误](../Images/faaf52660957450c35e200b085a94138.png)

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-05T09:51:51.047

尝试`CTRL`+`.`打开快速修复，它将为您提供不同的选项来修复此类错误，包括为正确的命名空间添加使用 - 如果 VS 在引用中找到有效类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-07T13:54:08.143

**Ctrl+R 和 Ctrl+G** ... 或**Ctrl + R + G**

[![在此处输入图像描述](../Images/481f3f153d8d2b3bed17f9d24b9a67e3.png)](https://i.stack.imgur.com/7o4hL.png)

通过工具栏的另一个小选项。

[![通过工具栏的一个选项](../Images/a7f9154909359c1d921191e44ace282b.png)](https://i.stack.imgur.com/LFLNv.png)

# css - 手机绝对位置优化

> ID：13229521
> 
> 赞同：0
> 
> 时间：2012-11-05T09:48:32.053
> 
> 标签：css, optimization, web, css-position, smartphone

我的页面上一张图片的 CSS 位置有问题。我需要它来始终保持该图像在右上角，所以我选择使用这种样式的图像：HTML：

```
 <div class="head">
    <div class="content nm">
        <div class="menu_inline"><a href="Homepage">Home</a></div>
        <div class="menu_inline"><a href="Help">Help Center</a></div>
        <div class="corner">
            <img src="{$basePath}/images/corner.png" alt="GOOGLE PLAY" id="corner">
        </div>
      </div>
    </div> 
```

CSS：

```
.#corner { display:inline; position: absolute; top:0px; right: 0px;} 
```

在桌面浏览器中一切正常，但问题是，当我在任何智能手机（经过测试的 Android 和 iPhone）上加载我的页面时，当我加载一个页面时，页面被缩放并且图片覆盖了我的菜单和页面的其他内容。您可以在下图中看到问题。

你有什么建议，如何纠正这张照片。我了解浏览器可能会计算用户宽度然后放置

[链接到有问题的图片](http://nahraj-obrazek.cz/?di=11135210886013)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:07:29.077

请尝试将此添加到您的页面中的 head 标签内。

# c# - 来自 DataGridView 中 XML 字符串的 C# HTML 实体

> ID：13229525
> 
> 赞同：0
> 
> 时间：2012-11-05T09:48:41.663
> 
> 标签：c#, html, wpf, xml, datagridview

我正在使用返回 XML 字符串的 Web 服务。我需要在 DataGridView 中向用户显示 XML 字符串的内容。

XML 字符串类似于以下内容：

```
 <Field id="13598" type="1">&lt;p&gt;&lt;strong&gt;This &lt;/strong&gt;is our &lt;em&gt;response&lt;/em&gt;&lt;/p&gt;</Field> 
```

到目前为止，我已经成功地格式化了在我的 DataGridView 中显示的类似这样的输出：

例如

```
<p><strong>This </strong>is our <em>statement</em></p> 
```

使用*System.Net.WebUtility.HtmlDecode*

有没有办法让我在 DataGridView 中显示格式化文本？

例如

**这**是我们的*声明*

我希望实现可用性，因为该程序的预期用户可能不熟悉 HTML。

我本来只是删除了这些实体，但我需要保留它们，因为稍后由于任何编辑，它们也需要写入 XML 字符串。

例如

```
<p><strong>This</strong> is our updated <em>statement</em></p> 
```

我一直在玩弄使用带有 TextBox 的新表单来启用编辑的想法，因为其中一些字符串可能比这长得多，并且可能包含其他形式的格式，例如项目符号等。我不太确定该怎么做。我不完全确定我希望实现的目标是否可行。如果没有，我是否有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:06:50.777

您可以使用[WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx)控件，并使用[NavigateToString](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.navigatetostring.aspx)方法设置其内容

# facebook - facebook 粉丝专页 geotaggi 地图

> ID：13229528
> 
> 赞同：0
> 
> 时间：2012-11-05T09:48:52.153
> 
> 标签：facebook, map, geotagging

有没有办法在我的 Facebook 粉丝页面上制作一张地图，其中包含来自我的照片的地理标记，类似于 instagram 地图？我有很多照片，我已经把每个人的位置都放在了，所以如果能找到一种方法在地图上显示我的路线会很好。

10倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:53:49.993

我不会为您提供完整的代码来执行此操作，但如果您准备将一些代码放在一起，这应该很简单：

1.  从您的主页获取照片列表。您可以通过带有[/pageid/photos](https://developers.facebook.com/docs/reference/api/page/#photos)或[/pageid/tagged/](https://developers.facebook.com/docs/reference/api/page/#connections)连接的 Graph API 来执行此操作。您当然需要[访问令牌](https://developers.facebook.com/docs/howtos/login/getting-started/)才能请求此信息。

2.  这将为您提供照片 ID 列表，因此您现在应该逐个遍历这些 ID（或使用 Batch Graph API 请求）并[为每个照片 ID 请求 Graph API 对象](https://developers.facebook.com/docs/reference/api/photo/)。每个对象中都有一个`place`字段（如果位置已被标记，并且您使用其访问令牌的用户是否能够查看照片），其中包含一个地点 ID。

3.  对于这些地方 ID 中的每一个，可能有（有些地方没有这个）一个`location`包含纬度和经度的字段。

4.  将这些地理点与用于 Google、Bing 或其他一些地图软件的 API 一起使用，以创建一个 HTML 页面，其中的地图填充了突出显示每张照片的标记。

5.  [将此 HTML 页面用作](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)Facebook 应用程序的页面选项卡 URL，然后按照[这些说明](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)将其作为选项卡添加到您的 Facebook 页面。

完毕。

# android - 在三星 Galaxy s2 上使用 URLConnection

> ID：13229531
> 
> 赞同：1
> 
> 时间：2012-11-05T09:48:58.947
> 
> 标签：android, http

我正在使用 的实例`URLConnection`从 Web 服务器下载图片。这适用于大多数手机。

我使用[http://mindtherobot.com/blog/159/android-guts-intro-to-loopers-and-handlers/](http://mindtherobot.com/blog/159/android-guts-intro-to-loopers-and-handlers/)作为并行下载的灵感。

我同时调用两者`setConnectTimeout(timeout)`，`setReadTimeout(timeout)`以便在启动多个并行获取图像的线程时从超时中恢复。

在三星 Galaxy s2 手机上，超时被忽略，一些线程下载挂起几分钟，然后抛出异常并重试下载 - 下载第二次成功。

抛出的异常如下所示：

```
DownloadTask, network timeout (attempt #0)
java.net.SocketTimeoutException: failed to connect to host (port 80) after 1000ms
at libcore.io.IoBridge.connectErrno(IoBridge.java:150)
libcore.io.IoBridge.connect(IoBridge.java:112)
java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
java.net.Socket.connect(Socket.java:842)
libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
.. 
```

这是三星 Galaxy s2 上已知的损坏行为吗？

安卓版本：4.0.4。

# java - 为每个值获取单独的记录

> ID：13229536
> 
> 赞同：0
> 
> 时间：2012-11-05T09:49:16.430
> 
> 标签：java, android

我有一个列表，`List<String> myList=new ArrayList<String>();`此列表包含我正在处理的国家/地区列表。

我正在处理几条记录。我需要以这样一种方式计算，即按国家/地区对记录的单独条目进行排序。我使用以下逻辑

```
for(int zTmp = 0; zTmp<myList.size(); zTmp++)
{
    System.out.println("COUNTRY IS"+myList.get(zTmp));
    if((record).contains(myList.get(zTmp)))
    {  
        // my next step
    }
} 
```

我如何发现每条记录都在 if 条件之后输入。记录按国家字母顺序排序，每个国家的记录都放在一起。请纠正我。

这是我的字符串

```
RECORD 1@India$
RECORD 2@India$
RECORD 3@United Arab Emirates$
RECORD 4@United Arab Emirates$
RECORD 5@United Kingdom$ 
```

按国名排序。我需要给出一个条件，使其进入每个国家/地区的循环，即说记录 1，记录 2 计算必须中断；记录 3 ,4 破; 像这样记录5。希望我现在更清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:23:27.050

也许你是这个意思？

```
String currentCountry = "";
for (String record : myList) {
    // Regex for entire string "^....$"
    // Country between '@' and '$' (the latter escaped)
    String country = record.replaceFirst("^.*@(.*)\\$$", "$1");
    if (!country.equals(currentCountry)) {
        currentCountry = country;
        ... // Deal with next country
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:23:40.450

```
for(int zTmp = 0; zTmp<myList.size(); zTmp++)
{
    System.out.println("COUNTRY IS"+myList.get(zTmp));
    if((record).contains(myList.get(zTmp)))
    {  
        // my next step
    }
} 
```

只有 if不包含不存在于 complete 的国家/地区，您的`if`条件才会导致，否则**它将****至少在一次迭代中出现。**`false``record``myList`**`true`**

在你写的评论中：

> 您要计算 3 条记录

与其使用`myList`，不如创建一个单独的列表（例如`myChoosenCountriesList`），仅在您希望`if`条件为真时才拥有这些国家/地区。

然后用以下代码替换您的代码：（请注意其他改进）

```
int countryCount = myChoosenCountriesList.size();
for(int zTmp = 0; zTmp<countryCount; zTmp++)
{
    String countryName = myChoosenCountriesList.get(zTmp);
    System.out.println("COUNTRY IS"+countryName);
    if(record.contains(countryName))
    {  
        // my next step
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:15:45.333

通过使用 do while 循环实现了所需的输出，这是代码段

```
 int zTmp=0;
                 do  
            {
                String country=myList.get(zTmp);
                if(inputCountry.equals(country))
                {

                    CalcDays(tmpTokens[iTmp]);
                    myDateList.clear();
                }zTmp++;
            }while(zTmp<myList.size()); 
```

# tinymce - 将表格 html 标记粘贴到 tinymce 文本框

> ID：13229541
> 
> 赞同：2
> 
> 时间：2012-11-05T09:49:38.643
> 
> 标签：tinymce

下面是我当前的 Tinymce 配置，它将删除所有样式/格式/html 标签并粘贴为纯文本，但我的客户希望将表格粘贴到其中。所以我想改进我的tinymce，以便在我们从ms word复制和粘贴时能够（仅）粘贴表格。

```
tinyMCE.init({
            theme: "advanced",
            mode: "exact",
            elements: "txtTextbox1",
            plugins : "paste,table,directionality,preview,iespell,wordcount,style",        
            theme_advanced_buttons1: "bold,italic,underline,|,cut,copy,paste,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,undo,redo,|,preview,iespell",
            theme_advanced_buttons2: "tablecontrols,|,link,unlink",
            //theme_advanced_buttons3: "tablecontrols,|,link,unlink",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_statusbar_location: "bottom",
            force_p_newlines: false,
            force_br_newlines: true,
            forced_root_block: '',
            paste_convert_middot_lists: false,
            paste_text_sticky: true,
            paste_strip_class_attributes: "all",
            paste_remove_styles: true,
            paste_remove_spans: true,
            paste_block_drop: true,
            paste_text_sticky_default: true,

            setup: function (ed) {
                ed.onInit.add(function (ed) {
                    ed.pasteAsPlainText = true;
                    ed.controlManager.setActive("pastetext", true);
                });
            }
        }); 
```

**下面编辑** 的是我的最终代码

```
tinyMCE.init
        ({
            theme: "advanced",
            mode: "exact",
            elements: "txtTextbox1",
            plugins : "paste,table,directionality,preview,iespell,wordcount,style",        
            theme_advanced_buttons1: "bold,italic,underline,|,cut,copy,paste,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,undo,redo,|,preview,iespell",
            theme_advanced_buttons2: "tablecontrols,|,link,unlink",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_statusbar_location: "bottom",
            force_p_newlines: false,
            force_br_newlines: true,
            forced_root_block: '',
            paste_convert_middot_lists: false,            

            paste_preprocess : function(pl, o) 
            {  
                o.content = strip_tags( o.content,'<table><tr><td>' );
            },            
        });

function strip_tags (str, allowed_tags)
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:09:01.080

解决方案是使用 paste_preprocess。在[这个 SO-thread 中](https://stackoverflow.com/questions/4122451/tinymce-paste-as-plain-text)，您将找到一种粘贴为纯文本的方法，但要保持表格定义、、、、`table`在粘贴时不被剥离`tbody``td``tr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T11:11:36.900

我找到了复制的解决方案 - 粘贴 tinyMCE 4.0

如果您使用此基本示例源

```
<script type="text/javascript">
tinymce.init({
    selector: "textarea",
    plugins: [
        "advlist autolink lists link image charmap print preview anchor",
        "searchreplace visualblocks code fullscreen",
        "insertdatetime media table contextmenu paste moxiemanager"
    ],
    toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"
});
</script> 
```

从插件部分删除“粘贴”选项；

像这样;

```
 plugins: [
        "advlist autolink lists link image charmap print preview anchor",
        "searchreplace visualblocks code fullscreen",
        "insertdatetime media table contextmenu moxiemanager"
    ], 
```

现在您可以将（所有 ms 字、html 页面等）粘贴到 tinyMCE 编辑器

也许，可能会有所帮助

# python - 带有列表的数组列表的python最大值

> ID：13229542
> 
> 赞同：-2
> 
> 时间：2012-11-05T09:49:39.240
> 
> 标签：python, arrays, list, max

> **可能重复：**
> [数组列表的python max](https://stackoverflow.com/questions/13227578/python-max-of-list-of-arrays)

我有一个数组列表，例如：

```
a = [array([ [6,2] , [6,2] ]),array([ [8,3],[8,3] ]),array([ [4,2],[4,2] ])] 
```

我试过`max(a)`返回以下错误：

```
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

我希望它返回一个列表或数组，如：

```
In: max(a)
Out: [[8,3],[8,3]] 
```

我不想将内部数组转换为列表，因为列表的大小非常大。我也有目的地创建这样来执行数组操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:58:08.697

在您的示例中，您可以执行以下操作：

```
max(a, key=lambda i: i[0][0]) 
```

取决于您想要什么结果（用于排序的键），您可能必须“玩”索引。

[http://docs.python.org/2/library/functions.html#max](http://docs.python.org/2/library/functions.html#max)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:57:03.570

无论如何，不​​知道你以前的答案是如何不够的，但是如果你正在处理 numpy 数组，那么为什么不是**整个**数组，而不是数组列表......然后只需使用适当的 numpy 函数：

```
from numpy import array

a = array(
    [
    array([ [6,2], [6,2] ]),
    array([ [8,3], [8,3] ]),
    array([ [4,2], [4,2] ])
    ]
)

print a.max(axis=0)
#[[8 3]
# [8 3]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:01:17.147

关于什么：

```
max(a, key=lambda x:np.max(x))
# array ([[8, 3], [8, 3]]) 
```

请注意：第一个最大值是“正常最大值”，第二个是 np 的最大值......这里的逻辑是 max 使用 np.max 作为比较的关键，np.max 返回数组中的最高数字。

那是你要的吗？

# ios - 重用滤镜导致GPUImage黑屏

> ID：13229544
> 
> 赞同：3
> 
> 时间：2012-11-05T09:49:47.100
> 
> 标签：ios, cocoa-touch, gpuimage

我创建了一组`GPUImageToneCurveFilter`并存储在一个数组中。

首先，我在选择任何过滤器后使用 GPUImageVideoCamera 为所有过滤器创建预览视频视图，我试图添加该过滤器详细视图（GPUImageStillCamera）。但是我为此遇到了黑屏。

如果我重新创建新过滤器而不是重用然后添加到 GPUImageStillCamera 它工作正常。对此的任何解决方案。

预览视图创建代码：

```
 -(void)setUpUI{

    self.videoView.fillMode = kGPUImageFillModePreserveAspectRatioAndFill;
    }

-(void)addFilter:(id)filter
        {
        // For thumbnails smaller than the input video size, we currently need to make them render at a smaller size.
        // This is to avoid wasting processing time on larger frames than will be displayed.
        // You'll need to use -forceProcessingAtSize: with a zero size to re-enable full frame processing of video.
        self.filter = filter;
        [filter forceProcessingAtSize:self.videoView.sizeInPixels];
        [[CameraProvider sharedProvider] addTarget:filter];
        [filter addTarget:self.videoView];

        [[CameraProvider sharedProvider] startCameraCapture];
        self.titleLabel.text = [filter fliterName];
        }

 -(void)stopCamera
        {
        [self.filter removeAllTargets];
        [[CameraProvider sharedProvider] removeTarget:self.filter];
        [[CameraProvider sharedProvider] stopCameraCapture];

        }

-(IBAction)selectionDone:(id)sender { 

            [[CameraProvider sharedProvider] removeInputsAndOutputs]; 
             self.selectedFilter(self.filter);

     }

 // Adding to detail view (GPUImageStillCamera0:

  - (void)didSelectFilter:(id)newfilter;
        {
        NSLog(@"fliter");
        // newfilter = [[GPUImageToneCurveFilter alloc] initWithACV:@"california-gold-rush.acv"];
        [newfilter prepareForImageCapture];
        [stillCamera addTarget:newfilter];
        [newfilter addTarget:self.imageView];

        [stillCamera startCameraCapture];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:47:13.097

> 如果我重新创建新过滤器而不是重用然后添加到 GPUImageStillCamera 它工作正常。

我不想说显而易见的，但解决方案是在需要时重新创建过滤器，而不是尝试重用它。

您从该数组中想要的是“一种在给定索引的情况下获取过滤器对象的方法”。有很多方法可以获取该过滤器对象。其中之一是预先分配一个数组并索引到数组中。另一种方法是编写一个函数，给定一个索引，返回一个新创建的对象，该对象的类型与您从数组中检索到的类型相同。不要使用过滤器数组，而是使用过滤器的工厂数组。

# r - 如何在此散点图中标记点？

> ID：13229546
> 
> 赞同：56
> 
> 时间：2012-11-05T09:49:59.747
> 
> 标签：r, label, point, scatter-plot

你能帮我在下图上贴标签吗？

![http://img849.imageshack.us/img849/7594/snap1034.png](../Images/cb571a3c36add3fd7f37a6442e87e175.png)

我使用的代码是：

```
valbanks<-scan("banks.txt", what=list(0,0,""), sep="", skip=1, comment.char="#")
valbanks

valj2007<-valbanks[[1]]
valj2009<-valbanks[[2]]
namebank<-valbanks[[3]]

percent_losses<-(valj2009-valj2007)/valj2007
percent_losses

abs_losses<-(valj2007-valj2009)
abs_losses

plot(abs_losses, percent_losses,main="Absolute Losses vs. Relative Losses(in%)",xlab="Losses (absolute, in miles of millions)",ylab="Losses relative (in % of January´2007 value",col="blue", pch = 19, cex = 1, lty = "solid", lwd = 2,text(percet_losses, abs_losses,namebank))

text(percet_losses, abs_losses,labels=namebank, cex= 0.7, offset = 10) 
```

数据是：

```
Value_Jan_2007  Value_Jan_2009  Bank    #
49  16  Morgan_Stanley
120 4.6 RBS
76  10.3    Deutsche_Bank
67  17  Credit_Agricole
80  26  Societé_Generale
91  7.4 Barclays
108 32.5    BNP-Paribas
93  26  Unicredit
116 35  UBS
75 27   Credit_Suise
100 35  Goldman_Sachs
116 64  Santander
255 19  Citigroup
165 85  JP_Morgan
215 97  HSBC 
```

非常感谢你

将标签放在底部，右侧，向上，左侧，......的选项是什么？

总结：我想要一个类似于[这篇文章](https://stackoverflow.com/questions/7611169/intelligent-point-label-placement-in-r)的第二条消息中的图表， 但那里没有代码。

我必须输入什么代码？

* * *

如果我放`text(percet_losses, abs_losses,namebank)`，我什么也得不到：图表继续没有变化。

你能告诉我我需要输入的代码吗？

谢谢

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-05T10:38:40.127

您的调用`text()`不会输出任何内容，因为您反转了 x 和 y：

```
plot(abs_losses, percent_losses, 
     main= "Absolute Losses vs. Relative Losses(in%)",
     xlab= "Losses (absolute, in miles of millions)",
     ylab= "Losses relative (in % of January´2007 value)",
     col= "blue", pch = 19, cex = 1, lty = "solid", lwd = 2)

text(abs_losses, percent_losses, labels=namebank, cex= 0.7) 
```

现在，如果您想将标签向下、向左、向上或向右移动，您可以`pos=`分别添加值为 1、2、3 或 4 的参数。例如，将标签向上放置：

```
 text(abs_losses, percent_losses, labels=namebank, cex= 0.7, pos=3) 
```

![在此处输入图像描述](../Images/ce9aab115867912474b621014fd35ced.png)

`pos`如果您想要其他方向的某些标签（例如 Goldman_Sachs、UBS 和 Société_Generale，因为它们与其他标签重叠），您当然可以给出一个值向量：

```
 pos_vector <- rep(3, length(namebank))
 pos_vector[namebank %in% c("Goldman_Sachs", "Societé_Generale", "UBS")] <- 4
 text(abs_losses, percent_losses, labels=namebank, cex= 0.7, pos=pos_vector) 
```

![在此处输入图像描述](../Images/361935aba78a1f721c577686076e3333.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-24T15:59:37.313

对于仅绘制矢量，您应该使用以下命令：

```
text(your.vector, labels=your.labels, cex= labels.size, pos=labels.position) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:47:42.443

我已经尝试过`directlabels`放置文本标签的包。在散点图的情况下，它仍然不是完美的，但比手动调整位置要好得多，特别是在您准备草稿图而不是最终图的情况下 - 所以您需要一次又一次地更改和制作图 -。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:03:53.103

您应该在绘图函数中使用标签属性，并且该属性的值应该是包含您希望每个点具有的值的向量。

# c# - 类文件有问题

> ID：13229547
> 
> 赞同：0
> 
> 时间：2012-11-05T09:50:03.007
> 
> 标签：c#, wpf

我使用 C# 和 WPF 来构建我的应用程序。所以继承人的问题....我得到了我的 mainWindow.xaml 文件及其 mainWindow.cs 文件。我还创建了另一个类文件 Setting.cs。我尝试将复选框从 mainWindow.xaml 带到 setting.cs 并处理它，然后发送回 mainWindow.cs。但是当我打开它时，它无法关闭，并且我在 setting.cs 中添加的过程不起作用。这与“公共静态无效”有关吗？

这是我的 Setting.cs：

```
public class Setting
{

public static void loadSetting()
    {
       MainWindow win = new MainWindow();
       XDocument document = XDocument.Load("UserSetting.xml");

        var query = from p in document.Descendants("user_Setting")
                    where p.Element("id").Value == "1"
                    select p;

        XElement element = query.First();
        element.SetElementValue("Keep_Login",saveCheckBox(win.MyCheckBox);
    }

public static void saveCheckBox(System.windows.Controls.CheckBox checkBox)
   {
        string status = "";
        if (checkBox.IsChecked == true)
            status = "true";
        else if (checkBox.IsChecked == false)
            status = "false";

        return status;
    }
} 
```

我的 MainWindow.cs：

```
public MainWindow()
    {
        InitializeComponent();
        Setting.loadSetting(); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:57:11.650

您的代码无法编译：

```
public static **string** saveCheckBox(System.windows.Controls.CheckBox checkBox)
{
    string status = "";
    if (checkBox.IsChecked == true)
        status = "true";
    else if (checkBox.IsChecked == false)
        status = "false";

    return status;
} 
```

这样你就可以对你的代码结果做一些事情。我建议使用 bool 作为结果而不是字符串并更改方法的名称，因为您没有保存任何内容。

# python - 如何将 python 连接到 SQL Azure？

> ID：13229551
> 
> 赞同：3
> 
> 时间：2012-11-05T09:50:13.143
> 
> 标签：python, azure

我想使用 python/webapp2 开发一个应用程序，这是托管在 Azure Cloud 中的 SQL Azure 数据库所必需的。如何将 python 连接到 SQL Azure？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:39:38.073

尝试使用 FreeTDS 的[pyodbc并](https://github.com/mkleehammer/pyodbc)[按照此答案中的说明](https://stackoverflow.com/questions/11721403/read-from-the-server-failed-when-trying-to-connect-to-sql-azure-from-tsql)格式化连接字符串：

```
TDSVER=8.0 tsql -H XXXXXXXX.database.windows.net -U Username -D DatabaseName -p 1433 -P Password 
```

还要确保正确配置 SQL Azure 以允许您的 IP 访问数据库。

# node.js - NodeJS：使用 Express EJS 模板输出字符串

> ID：13229556
> 
> 赞同：1
> 
> 时间：2012-11-05T09:50:42.723
> 
> 标签：node.js, express

我有一个代码，在出现错误时我会返回带有错误消息的状态：

```
if (err){
        res.render('page1', {status:2, msg:'Server Error : Probable unable to connect'});
        return;
} 
```

在我的 page1.ejs 中，我编写了以下方式：

```
 var status = <%= status %>;
    alert ( 'The status = ' + status);
    if( status == 2)
    {
            var msg = "'" + <%= msg %> + "'";
            alert(msg);
    } 
```

或者

```
 if( status == 2)
    {
            alert('"' + <%= msg %> + "'");
    } 
```

我正在尝试获取 status 和 msg 的值 - 但由于 'msg' 作为多个单词存在，我无法找到一种方法来捕获从 NodeJS 传递的完整字符串。Firebug 显示错误为：

SyntaxError: missing ) 在参数列表之后

```
alert('"' + Server Error : Probable unable to connect+ "'");
-------------------| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:57:47.260

我不是 EJS 的专家，但也许这可行`var msg = <%= msg %>; alert(msg);`？还是干脆`alert(<%= msg %>)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:03:02.490

试试这个：

```
alert('<%= msg %>'); 
```

# sql - 在预期条件的上下文中指定的非布尔类型的表达式，靠近“，”

> ID：13229558
> 
> 赞同：1
> 
> 时间：2012-11-05T09:50:48.350
> 
> 标签：sql, sql-server-2008

我已经查看了其他类似的问题，但是我的查询中没有一个`Where`子句，这让我对如何解决它有点困惑。

```
INSERT INTO #tmpCombined  
SELECT A.Region  
    , 'MyLocation' AS 'Location'  
    , c.Id AS 'CompID'  
    , c.Name AS 'CompName'  
    , 'Cash' AS 'Context'  
    , isnull( sum( CASE WHEN T.TranAge >= 0 and CASE WHEN T.TranAge < 1 THEN 1 ELSE 0 END,0 )) AS 'ZeroDays0'  
    , isnull( sum( CASE WHEN T.TranAge >= 1 and CASE WHEN T.TranAge < 8 THEN 1 ELSE 0 END ), 0 ) AS '1to7Days'  
    , isnull( sum( CASE WHEN T.TranAge >=  8 and CASE WHEN T.TranAge < 16 THEN 1 ELSE 0 END ), 0 ) AS '8to15Days'  
    , isnull( sum( CASE WHEN T.TranAge >=  16 and CASE WHEN T.TranAge < 20 THEN 1 ELSE 0 END ), 0 ) AS '16to20Days'  
    , isnull( sum( CASE WHEN T.TranAge >=  20 THEN 1 ELSE 0 END ), 0 ) AS '20DaysPlus'  
    , COUNT(1) AS 'Total'  
    , A.Level as 'Level'  
    , sum(T.USDDifference) AS 'USDRevaluation'  
    from MyLocation.dbo.Company C  
    inner join #tmpCashTBResults T on T.CompanyId = C.Id  
    inner join #tmpCashAccounts A on T.CompanyId = A.CompanyId  
    group by A.Region, C.Id, C.Name, A.Level 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:54:04.370

> CASE WHEN T.TranAge >= 0 和 CASE WHEN T.TranAge < 1 THEN 1

这应该是

```
 CASE 
    WHEN T.TranAge >= 0 and T.TranAge < 1 THEN 1
 ... 
```

这是使用 CASE ... WHEN 构造指定复合条件的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:53:48.740

这一点在这里：

```
THEN 1 ELSE 0 END,0 )) AS 'ZeroDays0' 
```

应该

```
THEN 1 ELSE 0 END) ,0 ) AS 'ZeroDays0' 
```

也许？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:54:05.617

你`,0`在这里错误的地方，改变这个：

```
isnull( sum( CASE WHEN T.TranAge >= 0 and CASE WHEN T.TranAge < 1 THEN 1 ELSE 0 END,0 )) 
```

到：

```
isnull( sum( CASE WHEN T.TranAge >= 0 and CASE WHEN T.TranAge < 1 THEN 1 ELSE 0 END), 0) 
```

另外，您的`case`陈述是错误的，条件中不应有其他陈述`case`。改变那些看起来像这样的；

```
CASE WHEN T.TranAge >= 0 and CASE WHEN T.TranAge < 1 THEN 1 ELSE 0 END 
```

到：

```
CASE WHEN T.TranAge >= 0 and T.TranAge < 1 THEN 1 ELSE 0 END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T09:54:46.550

请更改您的案例条件：

```
, isnull( sum( CASE WHEN T.TranAge >= 0 and T.TranAge < 1 THEN 1 ELSE 0 END ),0) AS 'ZeroDays0' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:54:51.793

对于 ZeroDays0 列，您将`,0`作为 SUM 函数的参数传递，而不是 ISNULL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T10:17:30.520

查询中要修复的问题

1.  不推荐使用单引号别名。习惯使用方括号，或者当别名很好时离开它们
2.  当您已经在使用`SUM(CASE.. WHEN.. THEN 1 ELSE 0 END)`时，CASE 语句的性质是它永远不会为 NULL，因此用 ISNULL 包装它是多余的。
3.  的基本结构`CASE`是`CASE WHEN <condition> THEN <value>`。这里`<condition>`可以是任何表达式，甚至是多重比较。

更正和重新格式化的查询：

```
 INSERT INTO #tmpCombined  
  SELECT A.Region  
       , 'MyLocation' AS Location  
       , c.Id AS CompID  
       , c.Name AS CompName  
       , 'Cash' AS Context  
       , sum( CASE WHEN T.TranAge >= 0 and T.TranAge < 1 THEN 1 ELSE 0 END) AS ZeroDays0  
       , sum( CASE WHEN T.TranAge >= 1 and T.TranAge < 8 THEN 1 ELSE 0 END) AS [1to7Days]  
       , sum( CASE WHEN T.TranAge >= 8 and T.TranAge < 16 THEN 1 ELSE 0 END) AS [8to15Days]  
       , sum( CASE WHEN T.TranAge >= 16 and T.TranAge < 20 THEN 1 ELSE 0 END) AS [16to20Days]  
       , sum( CASE WHEN T.TranAge >= 20 THEN 1 ELSE 0 END) AS [20DaysPlus]  
       , COUNT(1) AS Total  
       , A.Level as Level  
       , sum(T.USDDifference) AS USDRevaluation  
    from MyLocation.dbo.Company C  
    join #tmpCashTBResults T on T.CompanyId = C.Id  
    join #tmpCashAccounts A on T.CompanyId = A.CompanyId  
group by A.Region, C.Id, C.Name, A.Level; 
```

# php - 如何更改php服务器时区？

> ID：13229564
> 
> 赞同：1
> 
> 时间：2012-11-05T09:51:15.640
> 
> 标签：php, timezone

我们可以使用任何简单的代码仅显示系统时间，但我需要一些代码来查找服务器（PHP）时区以及如何更改服务器时区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:57:00.233

```
date_default_timezone_set('America/Los_Angeles'); 
```

**更改 America/Los_Angeles') 的值；**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:55:32.650

将此添加到 PHP 文件的顶部，或包含的文件的顶部（如果您无法访问 PHP.ini）...

```
date_default_timezone_set('America/Los_Angeles'); 
```

来自[php.net](http://php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:55:33.993

这是功能： http: [//php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

以下是时区：[http ://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

这就是你使用它的方式：

```
date_default_timezone_set('Europe/Vilnius'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T09:56:01.313

对于服务器：在`php.ini`更改`date.timezone`变量中

脚本：参考API： http: [//php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:57:15.233

在 PHP 文件中使用函数[date_default_timezone_set() 。](http://nl1.php.net/manual/en/function.date-default-timezone-set.php)

# jquery - jQuery 手风琴（不是 ui）中视频的 Safari 问题

> ID：13229565
> 
> 赞同：3
> 
> 时间：2012-11-05T09:51:18.320
> 
> 标签：jquery, video, safari, accordion

嘿，论坛成员。我在自己开发的 jQuery-tab-accordion（没有 jQuery-ui）中嵌入（通过对象标签）视频有一个已知问题。由于问题不取决于我的代码，因为我使用 jQueries *slideUp()*和*slideDown()*，所以我暂时不发布代码。

当我向下或向上滑动面板时，其中一个面板中显示的视频会延迟消失。换句话说，只要您单击相应的选项卡以将带有 vid 的面板向下滑动，它就会出现，您可以看到它向上滑动，反之亦然。#*编辑*# 我的意思是在面板之外 # *endedit* #

我牺牲了我最喜欢的搜索引擎很长一段时间都没有结果。有人提示使用 youTube API 来解决这个问题，但我真的不知道这会有什么帮助。

有谁知道如何解决这个烦人的问题？

所有其他浏览器（甚至 IE9 ;-)）显示一切都非常正确（webkit（Safari 除外）、gecko、presto）。

干杯，没有谜语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:43:57.933

对于那些感兴趣的人：通过使用有效的 XHTML 嵌入视频解决了这个问题，然而，这本身并没有帮助。尽管添加 wmode 透明和 Eureka 有帮助，但问题已经消失了。

只是想知道为什么我说它是一个已知问题：http: [//forum.jquery.com/topic/safari-issue-with-embedded-video-in-accordion](http://forum.jquery.com/topic/safari-issue-with-embedded-video-in-accordion)

无谜

# php - 测试 Gearman 守护进程是否正在运行

> ID：13229566
> 
> 赞同：4
> 
> 时间：2012-11-05T09:51:20.233
> 
> 标签：php, daemon, gearman, worker

我想检查一下 Gearman 守护进程是否正在运行。然后才运行任务，这样我的应用程序就不会崩溃。

**这是我的代码：**

```
$daemonRunning = true;

while( true )
{
    try
    {
        Yii::app()->gearman->client->ping( true );

        if ( $daemonRunning === false )
        {
            echo "Daemon back online. Starting signature process...\n";
        }

        Yii::app()->gearman->client->runTasks();
    }
    catch( GearmanException $e )
    {
        echo "Daemon appears to be down. Waiting for it to come back up...\n";
        $daemonRunning = false;
    }
    sleep(1);
} 
```

但问题是它`ping`不会抛出异常，它会抛出一个致命错误：

```
PHP Error[2]: GearmanClient::ping(): flush(GEARMAN_COULD_NOT_CONNECT) 127.0.0.1:4730 -> libgearman/connection.cc:673 
```

虽然奇怪的是，如果我删除`ping`, and use only `runTasks`，则会引发异常。

**有关的：**

当进程运行时 Gearman 守护进程关闭时，我该如何处理错误？当我关闭 Gearman 守护程序时，我从 PHP 收到以下错误：

```
php: libgearman/universal.cc:481: gearman_return_t connection_loop(gearman_universal_st&, const gearman_packet_st&, Check&): Assertion `&con->_packet == universal.packet_list' failed.
Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T10:37:59.880

最基本的，检查 Gearman 服务器的状态可以通过命令行使用：

`(echo status ; sleep 0.1) | nc 127.0.0.1 4730 -w 1`

但是，如[本问题所述](https://stackoverflow.com/questions/2752431/any-way-to-access-gearman-administration)，您可以使用它`fsocketopen`来获取 gearman 服务器的状态。

```
 // Taken from https://stackoverflow.com/questions/2752431/any-way-to-access-gearman-administration
class Waps_Gearman_Server {

    /**
     * @var string
     */
    protected $host = "127.0.0.1";
    /**
     * @var int
     */
    protected $port = 4730;

    /**
     * @param string $host
     * @param int $port
     */
    public function __construct($host=null,$port=null){
        if( !is_null($host) ){
            $this->host = $host;
        }
        if( !is_null($port) ){
            $this->port = $port;
        }
    }

    /**
     * @return array | null
     */
    public function getStatus(){
        $status = null;
        $handle = fsockopen($this->host,$this->port,$errorNumber,$errorString,30);
        if($handle!=null){
            fwrite($handle,"status\n");
            while (!feof($handle)) {
                $line = fgets($handle, 4096);
                if( $line==".\n"){
                    break;
                }
                if( preg_match("~^(.*)[ \t](\d+)[ \t](\d+)[ \t](\d+)~",$line,$matches) ){
                    $function = $matches[1];
                    $status['operations'][$function] = array(
                        'function' => $function,
                        'total' => $matches[2],
                        'running' => $matches[3],
                        'connectedWorkers' => $matches[4],
                    );
                }
            }
            fwrite($handle,"workers\n");
            while (!feof($handle)) {
                $line = fgets($handle, 4096);
                if( $line==".\n"){
                    break;
                }
                // FD IP-ADDRESS CLIENT-ID : FUNCTION
                if( preg_match("~^(\d+)[ \t](.*?)[ \t](.*?) : ?(.*)~",$line,$matches) ){
                    $fd = $matches[1];
                    $status['connections'][$fd] = array(
                        'fd' => $fd,
                        'ip' => $matches[2],
                        'id' => $matches[3],
                        'function' => $matches[4],
                    );
                }
            }
            fclose($handle);
        }

        return $status;
    }

} 
```

关于您的第二个问题，当连接丢失在工作中时，我永远无法恢复齿轮工。您基本上必须杀死运行客户端工作人员的整个进程，并让主管接管并重新启动另一个工作进程。Gearman 客户端工作人员应该是非常短暂的。您应该定期监视它们的内存使用情况并自动杀死它们。所以，如果你遇到了段错误/核心转储，杀死工人是完全正常的。

如前所述，您可以使用 Supervisor 自动启动备份您的工作人员。还要检查一下，它解释了如何让[Gearman 客户与主管合作](https://github.com/tripsta/gearman-php-prototype)

# python - 动态类导入和对象构建

> ID：13229572
> 
> 赞同：0
> 
> 时间：2012-11-05T09:51:41.333
> 
> 标签：python

我有一个收集多个模块的 python 包。在这些模块中，我有多个继承自 Component 类的类。我想让这些类的负载动态化并动态构建一些对象。

```
ex: 
package/module1.py
       /module2.py 
```

在 中`module1.py`，有多个类继承自类 Component，与 相同`module2.py`，当然类和包的数量是未知的。最终用户定义必须在配置文件中构建的对象。为了遍历模块，我使用了正在工作的 pkgutil.iter_modules。从我负责构建组件的职能来看，我确实喜欢这样：

```
[...]
myPckge = __import__('package.module1', globals(), locals(), ['class1'], -1)
cmpt_object = locals()[component_name](self, component_prefix, *args)
[...] 
```

但是，这不起作用，因为无法识别该类，以下工作但不是动态的：

```
cmpt_object = myPckge.class1(self, component_prefix, *args) 
```

感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:55:44.333

您可以使用`execfile()`动态加载模块，然后使用`exec()`它们创建新对象。但我不明白你为什么要这样做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:09:12.457

要在指定模块中查找类的子类，您可以执行以下操作：

```
import inspect
def find_subclasses(module, parent_cls):
    return [clazz for name, clazz in inspect.getmembers(module)
        if inspect.isclass(clazz) and
        issubclass(clazz, parent_cls) and
        clazz.__module__ == module.__name__ and  # do not keep imported classes
        clazz is not parent_cls] 
```

请注意，`parent_cls`不必是要返回的类的直接父级。

然后你可以从模块中动态加载类，知道模块的名称和目录，以及你想要的类的父类。

```
import imp
def load_classes(module_name, module_dir, parent_cls):
    fle, path, descr = imp.find_module(module_name, [module_dir])
    if fle:
        module = imp.load_module(module_name, fle, path, descr)
        classes = find_subclasses(module, parent_cls)
        return classes
    return []  # module not found 
```

# c++ - 删除此架构和未定义行为

> ID：13229579
> 
> 赞同：0
> 
> 时间：2012-11-05T09:52:09.617
> 
> 标签：c++, shared-ptr, delete-operator

```
#include <memory>

struct B;    

struct A
{
     std::shared_ptr<B> field1_;
     A():field1_ (std::make_shared<B>()){}
};

template<class A>
struct B: std::enable_shared_from_this<B<A>>
{
     A *field1_; 

     void stop()
     {
        delete field1_; //~= delete this
     }

     A* start()
     {
         field1_ = new A(shared_from_this());
         return field1_;
     }
};

int main()
{
    A * reftoA = nullptr;

    {
        std::shared_ptr<B<A>> b = std::make_shared<B<A>>();
        reftoA = b->start();
    }

    reftoAa->field1_->stop();
} 
```

我在生产中有一个错误，我想知道上面的代码是否会破坏 HEAP 或导致未定义的行为。

编辑：我已将上面的代码更改为更接近我的真实代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:54:33.917

该代码甚至不应该编译，因为

```
void setA(A* a):field1_(a){} 
```

这是无效的。

另外，既然您已经在使用智能指针，为什么还要继续`A *field1_;`使用`B`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T10:01:10.823

从它自己的方法中删除一个对象是一种非常常见的技术，如果这样做是故意和小心的。许多较旧的引用计数设计都以这种方式工作，例如 COM 和 Mozilla 代码库等衍生产品。请参阅： http: [//www.parashift.com/c++-faq-lite/delete-this.html](http://www.parashift.com/c++-faq-lite/delete-this.html)获取建议。

但在这种情况下，它看起来像是一种意外混叠。Struct`B`似乎部分地像 中的对象的“所有者” `field1_`，因此赋予它删除它的权利，然后你对它玩了一个邪恶的把戏。

这是 C++，实际上不可能在不查看完整程序的源代码的情况下判断这是否会导致未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:30:01.497

**像这样的生产**代码应该被判处死刑。

你调用`B::func`which 会破坏`A`它持有指向的指针，然后在你再次`main`删除`A`。你期待什么？

# spring - 带有 Spring+REST Web 服务的 @RequestBody 或 @ModelAttribute

> ID：13229584
> 
> 赞同：10
> 
> 时间：2012-11-05T09:52:21.860
> 
> 标签：spring, rest, spring-mvc

我正在使用**Spring 3.1**为 iPhone 和 android 应用程序创建一个 Restful 网站和 Web 服务。在我的应用程序中，我使用 Spring Message Converters ( `org.springframework.http.converter.json.MappingJacksonHttpMessageConverter`) 将 JSON 转换为 Java 对象，反之亦然。

> 我的目标是 JSP 页面、Iphone/Andois 应用程序应该只使用一个控制器方法（相同的 URL）。

在下面的帮助下，我正在使用**Spring 表单标记**从 JSP 到控制器的对象绑定`@ModelAttribute`。

```
@RequestMapping(value = "reset-password", method = RequestMethod.POST)
public ModelAndView resetPassword(@ModelAttributeForgot forgotPassword,
     HttpServletRequest request) { 

     System.out.println("data recived=="+forgotPassword.getNewPassword());
 } 
```

但是，如果从 iPhone/Android 应用程序发布数据并且结果是：

> 收到的数据==空；

所以为了克服这个问题，我`@RequestBody`在`@ModelAttribute`.

所以我的控制器如下所示：

```
@RequestMapping(value = "reset-password", method = RequestMethod.POST)
public ModelAndView resetPassword(@RequestBody Forgot forgotPassword,
    HttpServletRequest request) { 

    System.out.println("data recived=="+forgotPassword.getNewPassword());
} 
```

然后它起作用了，我得到的结果是：

> 收到的数据==一些数据；

但是 @RequestBody 然后不适用于 JSP 页面上的 spring 表单，并且数据不会转换为对象并且我得到了`null`值。

1.  我不能使用`@RequestBody`注释从 JSP 页面中使用带有 spring 表单标签的 JSON 形式发布数据吗？
2.  有什么方法可以通过仅使用单个控制器方法（@ModelAttribute 或 @RequestBody）从我的 JSP 表单以及我的电话应用程序中发布数据。

**编辑：**

在代替 Bean 类编写`String`时，我能够以纯文本形式获取内容，如下所示：

```
@RequestMapping(value = "reset-password", method = RequestMethod.POST)
public ModelAndView resetPassword(@RequestBody String string,
     HttpServletRequest request) { } 
```

**网页调用结果：**

> uid=11&confirmPassword=somepassword&newPassword=somepassword

**iPhone 使用 Web 服务调用的结果（在 **JSON 中**）**

```
{"newPassword":"somepassword","confirmPassword":"somepassword","uid":"11"} 
```

但问题是使用这种方法我必须手动将 JSON 字符串解析为 Java 对象。在网页内容中，我必须手动找到我不想要的值。

请帮忙。

问候，

阿伦·库马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:30:10.150

抱歉，但我不相信有办法，因为 @ModelAttribute 是从表单发布参数绑定的，而 @RequestBody 将正文直接传递给 Json 转换器。您可以用一个简单的 json 帖子替换 spring 表单标签，但这可能不如拥有两个 @RequestMapping 方法方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:22:22.780

它的@RequestBody。我觉得最好使用@RequestMapping 指定您期望和产生的mime 类型作为输出，

```
 @RequestMapping(value="/authenticate",produces="application/json",   
consumes="application/json",method=RequestMethod.POST) 
```

[然后使用AnnotationMethodHandlerAdapter](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerAdapter.html#setMessageConverters%28org.springframework.http.converter.HttpMessageConverter%5b%5d%29)注册适当的消息转换器

此消息转换器负责根据生产和消费属性对您的请求和响应实体进行编组和解组。

```
<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" >
     <property name="order" value="1" />
         <property name="messageConverters">
         <list>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" >

                 <property name="supportedMediaTypes" value="application/json"/>
            </bean>
            <bean class = "org.springframework.http.converter.StringHttpMessageConverter">
                <property name="supportedMediaTypes" value = "text/plain;charset=UTF-8" />
            </bean>
         </list>
    </property>
</bean> 
```

# c# - 如何修改 app.manifest 以发布需要数据库权限的应用程序？

> ID：13229586
> 
> 赞同：0
> 
> 时间：2012-11-05T09:52:31.237
> 
> 标签：c#, iis, permissions, clickonce

我想发布一个 xbap 应用程序，但由于 ClickOnce 的问题，我无法获得它。我的应用需要使用 oracle 数据库。如果我使用启用的 ClickOnce 发布它并且“这是一个部分信任的应用程序”，则发布是可以的，但是对数据库的访问不起作用。

如果我选择“这是一个完全信任的应用程序”，我将无法发布。

我曾尝试禁用 ClickOnce，但向导再次启用它。

此外，我还尝试自定义和编辑权限 XML 及其读取位置：

```
 <requestedExecutionLevel  level="asInvoker" uiAccess="false" /> 
```

我写过：但是出现异常：ClickOnce 不支持请求执行级别'requireAdministrator'

任何帮助对我都有用。

错误是：

> 确定置信度时发生异常。我们检测到以下错误消息：用户拒绝授予应用程序所需的权限。
> 
> 下载应用程序时发生异常。我们检测到以下错误消息： AssertApplicationRequirements 方法失败。申请无法确认。

但我不知道 AssertApplicationRequirements 是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:47:02.960

根据[Connect 上的这篇文章，](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/035c5b25-b209-45e3-ba1c-e667a765bb31)您必须使用[caspol.exe](http://msdn.microsoft.com/en-us/library/cb6t8dtz.aspx)来解决此问题：

```
From the computer that you are trying to run the XBAP application on, 
can you run the following command (you can run it from the Run Dialog,
or a command prompt):

C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\caspol -m -ag 1 -url 
          "http://localhost/xbaptest/clickonce*" FullTrust -exclusive on 
```

# c# - 使用一个滚动条控制两个DataGridView

> ID：13229589
> 
> 赞同：0
> 
> 时间：2012-11-05T09:52:34.437
> 
> 标签：c#, winforms, datagridview, scrollbar

我试图控制两个 DataGridView，只有一个 DataGridView 垂直滚动条可见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T09:58:36.833

```
protected void grid1_Scroll(object sender, ScrollEventArgs e)
{
    grid2.VerticallScrollBar.Value = e.NewValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-21T18:30:59.817

如果两个 DataGridView 控件的行数相同，则可以执行以下操作。我正在使用它来并排比较两个 SQL 结果集。

在两个控件上设置滚动事件处理程序。

```
private void DataGridView1_Scroll(object sender, ScrollEventArgs e)
{
    DataGridView2.FirstDisplayedScrollingRowIndex =
        DataGridView1.FirstDisplayedScrollingRowIndex;
}

private void DataGridView2_Scroll(object sender, ScrollEventArgs e)
{
    DataGridView1.FirstDisplayedScrollingRowIndex =
        DataGridView2.FirstDisplayedScrollingRowIndex;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:14:31.167

在 Form.Load() 中：

```
Grid1.Scroll += (s, ev) => Grid2.VerticalScrollBar.Value = Grid1.VerticalScrollBar.Value; 
```

**编辑：**我们不能像我最初建议的那样分配 Grid2.VerticalScrollingOffset，因为它是 ReadOnly 属性。

# flash - SWISHmax 中此 XML 中每个负载的随机报价

> ID：13229591
> 
> 赞同：0
> 
> 时间：2012-11-05T09:52:37.947
> 
> 标签：flash, actionscript

我的 randommessages.xml 中有这些东西：

```
<?xml version="1.0" encoding="UTF-8" ?>
<messages> 
    <message name="First message is great" url="http://www.google.com/" /> 
    <message name="Second message is better. I hope so." url="http://www.yahoo.com/" /> 
    <message name="Third is the bomb. Dwonload now! Ok!" url="http://www.facebook.com/" /> 
</messages> 
```

以及我用于在舞台上展示的这段代码：

```
onSelfEvent(load) 
{ 
    messageXml = new XML(); 
    messageXml.ignoreWhite = true; 
    messageXml.load("randommessages.xml"); 
    messageXml.onLoad = function(success) { 
    if (success) { 
        // some code here
        // ???? 
    } 
} 

} 
else { 
// failed loading
} 
}; 
dynamicmessageoutput._visible = false; 
} 
```

实际上，没有显示。

我需要帮助如何获取一条随机消息并将其显示在名为 dynamicmessageoutput 的动态文本字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:13:49.067

我不太确定您要对`onSelfEvent`处理程序做什么，但以下内容应该为您尝试做的事情提供一个很好的起点：

```
var messageXml = new XML(); 
messageXml.ignoreWhite = true; 
messageXml.load("randommessages.xml"); 
messageXml.onLoad = function(success) { 
    if (success) { 
        // Get all the message nodes in an Array
        var messages = this.firstChild.childNodes;
        // Choose a random node from the Array
        var randomNode = messages[Math.round(Math.random() * (messages.length - 1))];
        // Grab the value of the 'name' attribute from the randomly selected node
        var randomMessage = randomNode.attributes['name'];

        trace(randomMessage);
    } else {
        trace("loading failed");
    }
} 
```

# java - 为原始布尔类型实现比较器？

> ID：13229592
> 
> 赞同：21
> 
> 时间：2012-11-05T09:52:38.897
> 
> 标签：java, comparator, primitive-types

我需要一些类`implements Comparator`，其中一个我想比较原始`boolean`（非`Boolean`）值。

如果它是一个**布尔**值，我只会`return boolA.compareTo(boolB);`返回 0、-1 或 1。但是如何使用原语来做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-05T09:54:22.183

您可以查看它是如何实现的[`java.lang.Boolean`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Boolean.java#257)，因为该类自然也使用原始布尔值：

```
public int compareTo(Boolean b) {
    return (b.value == value ? 0 : (value ? 1 : -1));
} 
```

从 Java 7 开始，您可以简单地使用内置的静态方法[`Boolean.compare(a, b)`](https://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html#compare(boolean,%20boolean))。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-04T23:44:03.840

自 Java 7 以来，[Marko Topolnik 在他的回答](https://stackoverflow.com/a/13229624/627727)中展示的逻辑已经转移到另一种方法中，以公开一种比较原始的方法`boolean`。

[Javadoc 用于`Boolean.compare(boolean x, boolean y)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html#compare%28boolean,%20boolean%29)：

```
public static int compare(boolean x, boolean y)

Compares two boolean values. The value returned is identical to 
what would be returned by:

    Boolean.valueOf(x).compareTo(Boolean.valueOf(y)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-11T08:38:15.657

更好的方法和正确使用 Boolean-Adapter 类

```
public int compare(boolean lhs, boolean rhs) {
    return Boolean.compare(lhs, rhs);
} 
```

**编辑：**

提示：这首先对“假”值进行排序。如果要反转排序，请使用：

```
(-1 * Boolean.compare(lhs, rhs)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T10:04:13.447

您可以使用 java 的自动装箱功能来缓解此问题。您可以在此处阅读有关自动装箱的信息：[Java 自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-07T11:55:10.827

您可以通过以下方式比较两个原始布尔值 b1 和 b2。

(Boolean.valueOf(b1).equals(Boolean.valueOf(b2))

# javascript - JQuery UI Ajax 加载标签无法切换到其他选项卡

> ID：13229596
> 
> 赞同：0
> 
> 时间：2012-11-05T09:52:55.247
> 
> 标签：javascript, jquery-ui, jquery, jquery-ui-tabs

我正在使用 jQuery UI 选项卡。第二个选项卡是根据第一个选项卡中存在的文本字段的值动态加载的。这也有效。但是当我尝试切换回第一个选项卡时，我收到了这个错误

> 对象不支持此属性或方法

我的代码在这里

```
$('#tabs').tabs({
    select: function() {
        $(this).tabs("option", { 
            ajaxOptions: {
                cache:false,
                data: { emp_id: $('#emp_id').val() } 
            } 
        });
    }
}); 
```

HTML

```
<div id="tabs" style="overflow: scroll">
    <ul>
        <li><a href="#tabs-1">Add/Remove</a></li>
        <li><a href="#tabs-2">Update</a></li>
        <li><a id="tab_upd" href="<%=path%>/development/hr_upd.jsp"><span>Test</span></a></li>
    </ul>
    <div id="tabs-1">
        <fieldset>
            <legend style="margin-left:35%"><b><h3>HR</h3></b></legend><br/>
            <form name="hr" id="hr" method="post">
                <table border="0" align="center" width="300" bgcolor=white>
                    <tr>
                        <td>Employee ID </td>
                        <td><input type="text"  name="emp_id" id="emp_id"/></td>
                    </tr>
                    </tr>
                </table><br/>
            </form>
        </fieldset>
    </div>
    <div id="tabs-2">TAB 2</div>
</div> 
```

所以第三个选项卡是 ajax 加载的，服务器端文件是`hr_upd.jsp`. 一切都很好，文件已通过传递的参数加载到选项卡 2 中。唯一的问题是，在单击 ajax 选项卡一次后，我无法在选项卡之间切换。

谢谢并恭祝安康

K guyz 我做了一些编辑，比如仅在选择选项卡 2 时才实现 ajax 选项，所以我给出了一个 if 条件，然后我可以退出该选项卡（2-ajax 加载），这是我以前无法做到的，现在是新的问题是，我无法再次回到 tab2 了。我希望你们有问题吗？？:)。脚本如下

```
$("#tabs").tabs({
        select: function(event, ui) {
       //    alert(ui.index);
           if(ui.index==2)
               {
                   $( "#tabs" ).tabs( "option", "ajaxOptions", { data: { emp_id: $('#emp_id').val() }} );
                   return true;
               }    
        }
    }); 
```

# c - 循环展开及其对流水线和CPE的影响（有解决方案，但不明白）

> ID：13229599
> 
> 赞同：1
> 
> 时间：2012-11-05T09:53:03.900
> 
> 标签：c, optimization, cpu-architecture, loop-unrolling, cpu-cycles

下面是一个关于练习测试的问题。该表实际上已填写了所有解决方案。但是，我需要澄清为什么这些解决方案是这样的。（阅读水平线下方的问题）。

例如，我真的很想了解 A2 和 A3 的解决方案行。

正如我所看到的，您在 A2 中遇到以下情况：

1.  x * y
2.  xy * r
3.  xyr * z

现在，让我们看看它是如何进行的：

```
|1|2|3|4|5|6|7|8 |9|10|11|12|13|14|15|16|17|18|19|20|21|
| | | | | | | |  | |  |  |  |  |  |  |  |  |  |  |  |  |
{ x * y } | | |  | |  |  |  |  |  |  |  |  |  |  |  |  |
        { xy * r } |  |  |  |  |  |  |  |  |  |  |  |  |
                 { xyr * z  }  |  |  |  |  |  |  |  |  |
//next iteration, which means different x, y and z's|  |
                   {x2 * y2    }  |  |  |  |  |  |  |  |
                               {x2y2 * r   } // this is dependent on both previous r and x2y2
                                           {x2y2r * z  } 
```

所以我们能够重叠 xyr * z 和 x2 * y2，因为没有依赖冲突。但是，这只是摆脱了 3 个周期，对吗？

所以它仍然是 (12 - 3) / 3 = 9 / 3 = 3 Cycles Per Element（三个元素）。**那么他们如何获得 A2 的 8/3 CPE 呢？**

任何帮助理解这个概念将不胜感激！不急，因为考试要到下周。如果您需要任何其他信息，请告诉我！

* * *

（以下是完整的测试题文本，以及完整填写解决方案的表格）

考虑以下用于计算 n 个整数数组的乘积的函数。

我们将循环展开了 3 倍。

```
int prod(int a[], int n) {

int i, x, y, z;
int r = 1;

for(i = 0; i < n-2; i += 3) {
    x = a[i]; y = a[i+1]; z = a[i+2];
    r = r * x * y * z; // Product computation
}
for (; i < n; i++)
    r *= a[i];

return r;
} 
```

对于标记为 Product 计算的行，我们可以使用括号来创建五个不同的计算关联，如下所示：

```
r = ((r * x) * y) * z; // A1
r = (r * (x * y)) * z; // A2
r = r * ((x * y) * z); // A3
r = r * (x * (y * z)); // A4
r = (r * x) * (y * z); // A5 
```

我们用每个元素的周期数 (CPE) 来表示函数的性能。如书中所述，此度量假设运行时间（以时钟周期为单位），长度为 n 的数组是 Cn + K 形式的函数，其中 C 是 CPE。

我们在 Intel Pentium III 上测量了该功能的五个版本。回想一下，这台机器上的整数乘法运算有 4 个周期的延迟和 1 个周期的发出时间。

下表显示了 CPE 的一些值，以及缺少的其他值。测量的 CPE 值是实际观察到的值。“理论 CPE”意味着如果唯一的限制因素是整数乘法器的延迟和发布时间，则可以实现的性能。

![在此处输入图像描述](../Images/6583179fe478202cb7de09b9c4253375.png)

填写缺少的条目。对于测量的 CPE 的缺失值，您可以使用具有相同计算行为的其他版本的值。对于理论 CPE 的值，您可以仅考虑乘法器的延迟和发布时间来确定迭代所需的周期数，然后除以 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:34:56.133

在不了解 CPU 架构的情况下，我们只能猜测。

我的解释是时序图只显示了从收集操作数到写入结果的流水线的一部分，因为这与依赖解析相关。

现在，大的*if*：如果在依赖解析器和执行单元之间有一个缓冲阶段，则可以开始第一组 ( *3* ) 的第三次乘法和第二组 ( *4* )的第一次乘法偏移量 8。

由于*3*依赖于*2*，因此在这里使用不同的单元没有意义，因此*3在**2*之后立即排队到单元 1 。下面的指令，*4*不依赖于先前的结果，因此可以排队到单元 2，并并行启动。

从理论上讲，这可能最早发生在第 6 周期，CPE 为 6/3。实际上，这取决于 CPU 设计。

# c# - 在 C# 中使用 Smo - 在开始时跳过约束生成指令

> ID：13229602
> 
> 赞同：1
> 
> 时间：2012-11-05T09:53:09.147
> 
> 标签：c#, .net, sql-server, smo

我必须创建远程数据库的完整副本。我只有一种有用且简单的方法来做到这一点：生成脚本。我知道其他方式（例如创建备份），但由于某种原因我不能使用它们。

由于一个表可能依赖于另一个表（具有外键等），因此很难确定创建表的有效顺序，我决定在最后生成这些“可靠”的脚本指令.

好吧，我知道如何在（接近）表创建中生成“可靠”的脚本指令。但是我应该怎么做才能先跳过它们才最终生成它们呢？

例如：

```
--How I do NOT want
--.........................
CREATE TABLE Table1(....)
ALTER TABLE Table1 ADD CONSTRAINT ...

CREATE TABLE Table2(....)
ALTER TABLE Table2 ADD CONSTRAINT ...

--How I would like
--.........................
CREATE TABLE Table1(....)
CREATE TABLE Table2(....)
--.........................
CREATE TABLE TableN(....)
--.........................
--the end of a script
ALTER TABLE Table1 ADD CONSTRAINT ..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:26:08.647

大概，您的代码已经循环遍历表并`Script()`在每个表上调用方法。您要做的是创建一个[ScriptingOptions](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.scriptingoptions_properties.aspx)对象，将其 DriForeignKeys 属性设置为 false，然后`Script()`使用该 ScriptingOptions 对象作为参数调用该方法。然后，一旦你遍历了所有的表，你将需要再做一次，这次是拿起外键。

# android - 调用 startInstrumentation 后如何优雅地等待测试用例完成

> ID：13229606
> 
> 赞同：3
> 
> 时间：2012-11-05T09:53:23.207
> 
> 标签：android, testing, robotium

我有一组应用程序，每个应用程序都有相关的测试用例工具。我正在从另一个“启动器”应用程序（作为服务实现）以编程方式启动检测，使用`startInstrumentation()`如下示例：[https ://stackoverflow.com/a/9815087/1536475](https://stackoverflow.com/a/9815087/1536475)

这适用于启动一个测试用例。

我想要的是启动器运行测试用例 1，等待测试完成，然后运行测试用例 2。让我退缩的是`startInstrumentation()`立即返回，我不知道如何等待测试用例 1 完成在开始测试用例 2 之前。

我希望找到一个比修改测试用例更优雅的解决方案，以某种方式将它的完成传送回启动器（例如，测试用例广播一条消息）。

我只想让启动器看到测试用例已经完成，并且知道继续下一个测试用例是安全的。

谢谢！

# android - 如何在android中指定的一段时间后触发sqlite查询

> ID：13229611
> 
> 赞同：0
> 
> 时间：2012-11-05T09:53:34.993
> 
> 标签：android

我只是想触发一个 sql 查询以从我的应用程序中的 db 中删除一些数据。关键是 sql 查询将在某个指定的持续时间（如某些天 1 或 2 天）后触发，那时我的应用程序可能处于空闲状态......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:00:48.657

你必须使用 android [AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。

安排一个接收器，将在您需要的特定时间触发，并在 onReceive 中编写代码以从数据库中删除

像这样设置闹钟

```
Intent intent = new Intent(context, AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
                0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarmManager = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, triggerTime, pendingIntent 
```

);

并在接收器中编写删除代码

```
public class AlarmReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent intent) {
        // code to delete from db
            }

    } 
```

# android - 启动画面未在应用程序中加载

> ID：13229613
> 
> 赞同：1
> 
> 时间：2012-11-05T09:53:41.823
> 
> 标签：android, splash-screen

我已经为android应用程序中的加载页面添加了启动屏幕的代码，但没有任何改变，任何人都可以解决这个问题吗？

这是我的代码：

```
Thread splashThread = new Thread() {
        @Override
        public void run() {
           try {
              int waited = 0;
              while (waited < 1000) {
                 sleep(100);
                 waited += 100;
              }
           } catch (InterruptedException e) {
              // do nothing
           } finally {

              Intent i = new Intent(Splash.this,Activity1.class);

              startActivity(i);
              finish();
           }
        }
     };
     splashThread.start();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:57:14.750

使用 [runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)从单独的线程启动活动：

```
 Splash.this.runOnUiThread(new Runnable() {
                public void run() {
                  // some code #3 (that needs to be ran in UI thread)
                  Intent i = new Intent(Splash.this,Activity1.class);

                 startActivity(i);
                 finish();
                }
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:58:21.993

使用下面的代码：

```
Handler handler = new Handler();

        // run a thread after 2 seconds to start the home screen
        handler.postDelayed(new Runnable() {

            @Override
            public void run() {

                // make sure we close the splash screen so the user won't come back when it presses back key

                finish();
                // start the home screen

                Intent intent = new Intent(SplashScreen.this, Home.class);
                SplashScreen.this.startActivity(intent);

            }

        }, 2000); // time in milliseconds (1 second = 1000 milliseconds) until the run() method will be called

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:59:57.317

通常，当您创建启动画面时，它是一个完全成熟`Activity`的负责显示某些 UI 的屏幕。

您可能应该做的是创建一个新类，该类`Activity`从其`onCreate`方法中扩展和运行您的 con。

在此之后，您应该更改清单文件以将活动定义为启动器，如下所示：

```
 <activity
        android:name=".SplashActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# java - Java平台中的线程是否依赖？

> ID：13229621
> 
> 赞同：5
> 
> 时间：2012-11-05T09:54:05.600
> 
> 标签：java, multithreading, jakarta-ee

很明显，操作系统调度/线程算法对 Java 线程有影响，但是

我们可以安全地说线程依赖于操作系统/机器吗？

如果是这种情况，那么它不会使 Java 平台依赖吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T09:57:09.503

是的，Java 中线程调度的细节取决于 JVM 实现和（通常）操作系统实现。

**但是**该调度的细节也没有在 Java SE 规范中指定，只指定了一些选定的基本规则。

这意味着只要操作系统特定的调度符合这些基本规则，它也符合 JVM 规范。

如果您的代码依赖于 JVM 规范中*未*指定的调度细节，那么它取决于实现细节并且不能期望在任何地方都能工作。

这与文件 I/O 的情况几乎相同：如果您对路径进行硬编码并使用固定的目录分隔符，那么您的工作超出了规范，并且不能期望您的代码能够跨平台工作。

*编辑：*当然，JVM*实现*本身（即 JRE）**是**平台相关的。它提供了允许纯 Java 程序不关心平台细节的层。为了实现这一点，JRE*必须是*特定于平台的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T09:56:56.447

> ... Java 通常会使用本机线程，但在某些操作系统上，它使用所谓的“绿色线程”，JVM 自行处理并由单个本机线程执行。
> 
> 你不应该担心这个。它全部由 JVM 处理，对程序员是不可见的。我能想到的唯一真正区别是，在使用绿色线程的实现中，多线程分治算法不会带来性能提升。但是，对于使用本机线程但在具有单核的机器上运行的实现来说，同样缺乏性能增益。

摘自[JVM 和 Java 线程调度](http://www.coderanch.com/t/522285/threads/java/JVM-Java-Threads-Scheduling)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T10:16:03.700

即使在同一个平台上，如果您编写不安全的多线程代码，行为可能取决于完整的配置细节、机器负载的其余部分以及很多运气，以及硬件和操作系统。一个不安全的程序可以在某一天明显正确地工作，而下一次在相同的硬件上以或多或少相同的工作量失败。

如果您编写安全的多线程代码，即仅依赖于 Java 语言规范和库 API 中承诺的代码，那么平台的选择当然会影响性能，但不会影响其功能是否正常工作。

# visual-studio-2010 - 如何在 VS2010 的紧凑型数据库中添加外键？

> ID：13229622
> 
> 赞同：4
> 
> 时间：2012-11-05T09:54:16.867
> 
> 标签：visual-studio-2010, sql-server-ce

如果我通过 VS2010 创建 SQL Express 数据库，我可以创建图表并通过这种方式设置外键关系。紧凑型数据库中的情况是什么？对于这种类型的数据库，服务器资源管理器中没有这样的选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:09:31.647

Yes there is. In **Server Explorer**, right click the table, select **Table Properties**, and use **Add Relations** view. Remember to press the "Add Relation" button to actually add the releation

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T04:49:11.023

[演练：创建 SQL Server Compact 3.5 数据库](http://msdn.microsoft.com/en-us/library/vstudio/bb546200%28v=vs.100%29.aspx)

在上一个过程中创建的表之间创建关系

1.  在服务器资源管理器/数据库资源管理器中，展开表。
2.  右键单击订单表，然后单击表属性。
3.  单击添加关系。
4.  在关系名称框中键入 FK_Orders_Customers。
5.  在外键表列列表中选择 CustomerID。
6.  单击添加列。
7.  单击添加关系。
8.  单击确定以完成该过程并在数据库中创建关系。
9.  再次单击“确定”关闭“表属性”对话框。

# php - PHP CURL 提供 HTTP 404 但它在浏览器中工作正常

> ID：13229623
> 
> 赞同：1
> 
> 时间：2012-11-05T09:54:18.453
> 
> 标签：php, curl

我正在编写一些代码来连接到 Neteller API。他们的 API 使用 POST 请求来接受参数并以 XML 形式返回。我想通过 PHP 连接到 API，所以我认为 CURL 请求应该能够发布参数并解析响应。不幸的是，当我尝试请求时，我得到了一个 HTTP 404，但如果我使用一个简单的 html 表单，它就可以了。

## HTML 表单

```
<form method="post" runat="server" Action="https://test.api.neteller.com/instantpayout">
     <input type="text" name="version" value="4.0" />
     <input type="text" name="amount" size="10" maxlength="10" />
     <input type="hidden" name="merchant_id" value="1234567890" />
     <input type="hidden" name="merch_pass" value="mypass" />
     <input type="hidden" name="merch_account" value="john123" />
     <input type="hidden" name="merch_key" value="Your Merchant Key" />          
     <input type="text" name="net_account" size="20" maxlength="12">    
     <input type="hidden" name="custom_1" value="test123" maxlength="50">
     <input type="hidden" name="custom_2" value="test123" maxlength="50">
     <input type="hidden" name="custom_3" value="test123" maxlength="50">      
     <input type="hidden" name="merch_transid" value="91919191" maxlength="50">        
     <input type="hidden" name="currency" size="10" value='EUR' maxlength="3">                               
     <input type="submit" name=”button” value="Make Transfer">
</form> 
```

## PHP 代码

```
if ($this->isSandbox()) {
    $url = 'https://test.api.neteller.com/instantpayout';
} else {
    $url = 'https://api.neteller.com/instantpayout';
}   

$fields = array(
    'version' => $version,
    'amount' => urlencode($amount),
    'merchant_id' => urlencode($merchant_id),
    'merch_pass' => urlencode($merchant_password),
    'merch_account' => urlencode($merchant_account),
    'merch_key' => urlencode($merchant_key),
    'net_account' => urlencode($net_account),
    'custom_1' => urlencode($custom_1),
    'custom_2' => urlencode($custom_2),
    'custom_3' => urlencode($custom_3),
    'merch_transid' => urlencode($merchant_transid),
    'currency' => $currency,
    'button' => 'Make Transfer'
);

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9) Gecko/2008052906 Firefox/3.0");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4);
curl_setopt($ch, CURLOPT_CAINFO, APP . "Lib" . DS . "curl" . DS . "cacert.pem");

if($this->isSandbox()){
    curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
}

$output = curl_exec($ch);
$info = curl_getinfo($ch);

if($output === false){
    $error = curl_error($ch);
    pr($error);
} else {
    $response = simplexml_load_string($output);
    pr($response);
} 
```

## 卷曲信息

```
Array
(
    [url] => https://test.api.neteller.com/instantpayout
    [content_type] => text/plain; charset=UTF-8
    [http_code] => 404
    [header_size] => 192
    [request_size] => 299
    [filetime] => -1
    [ssl_verify_result] => 18
    [redirect_count] => 0
    [total_time] => 1.076
    [namelookup_time] => 0
    [connect_time] => 0.187
    [pretransfer_time] => 0.686
    [size_upload] => 1386
    [size_download] => 0
    [speed_download] => 0
    [speed_upload] => 1288
    [download_content_length] => -1
    [upload_content_length] => 1386
    [starttransfer_time] => 0.889
    [redirect_time] => 0
    [certinfo] => Array
        (
        )

    [redirect_url] => 
) 
```

我尝试了几种 CURL 选项，但似乎没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:06:48.640

当您使用数组 curl设置[CURLOPT_POSTFIELDS发送 multipart/form-data 请求时，您需要将其设置为字符串以发送 application/x-www-form-urlencoded 请求。](http://lt1.php.net/manual/en/function.curl-setopt.php)将该行更改为：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($fields)); 
```

# c++ - 如何将 mib 转换为 mb 我想测试 ram

> ID：13229625
> 
> 赞同：1
> 
> 时间：2012-11-05T09:54:23.183
> 
> 标签：c++, c, testing, memory-management

我正在尝试测试 32 位操作系统支持多少 RAM。

**嗨，我正在将应用程序从 32 位操作系统转换为 64 位操作系统只需检查一下 4gb 内存就足够了，这就是我要检查的**

什么都占用了更多内存我知道指针会加倍请帮助我下面的程序**这样程序适用于 MB 而不是 MIB**

我试过这个程序，但我缺少一些将 MiB 转换为 MB 的方法。

我怎样才能让下面的程序工作？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc,char* argv[]){
        size_t oneHundredMiB=100*1048576;
        size_t maxMemMiB=0;
        void *memPointer = NULL;
        while((memPointer = malloc(maxMemMiB += oneHundredMiB)) != NULL) {
                printf("Max Tested Memory = %zi\n",maxMemMiB);
                memset(memPointer,0,maxMemMiB);
                free(memPointer);
        }
        printf("Max Usable Memory aprox = %zi\n",maxMemMiB-oneHundredMiB);
        return 0;
} 
```

# nhibernate - NServicebus Nhibernate 发送消息时出现异常

> ID：13229627
> 
> 赞同：0
> 
> 时间：2012-11-05T09:54:26.613
> 
> 标签：nhibernate, nservicebus

当我们通过 NServiceBus 发送包含完整异常堆栈跟踪的消息时，我们会得到以下 NHibernate 异常：

```
 Z Error dehydrating property value for 
NServiceBus.TimeoutPersisters.NHibernate.TimeoutEntity.Headers NHibernate.PropertyValueException NHibernate.HibernateException NServiceBus.Core 
at NServiceBus.Unicast.Transport.Transactional.TransactionalTransport.ProcessMessage(TransportMessage m) 
at NServiceBus.Unicast.Transport.Transactional.TransactionalTransport.ReceiveMessage() 
at NServiceBus.Utils.TransactionWrapper.RunInTransaction(Action callback, IsolationLevel isolationLevel, TimeSpan transactionTimeout) 
at NServiceBus.Unicast.Transport.Transactional.TransactionalTransport.Process() 
```

它与消息字段的长度有关，但似乎是内部 NServiceBus 问题。我们使用 NServiceBus v3.2.4

消息类如下所示：

```
public class ExceptionOccuredCommand : ICommand
    {
        public string Message { get; set; }
        public string Details { get; set; }
        public DateTime ExceptionDate { get; set; }
        public string UserName { get; set; }
        public string MachineName { get; set; }
        public string ApplicationName { get; set; }

        public string ErrorQueue { get; set; }
        //public string SourceQueue { get; set; }
        public string MessageId { get; set; }
    } 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:48:02.187

标题有 4000 个字符的硬性限制，您似乎已经达到了这个限制。我在我们的问题列表中为此打开了一个问题：[https ://github.com/NServiceBus/NServiceBus/issues/737](https://github.com/NServiceBus/NServiceBus/issues/737)

# c# - 无法循环C#中的所有控件

> ID：13229637
> 
> 赞同：3
> 
> 时间：2012-11-05T09:54:59.363
> 
> 标签：c#, winforms

我有一个带有某些类型控件的 C# 表单，我通过此代码循环所有`Labels`并重新父：

```
private void MakeAllLabelTrans(Control frm, Control parent)
{
    foreach (Control ctl in frm.Controls)
    {
        if (ctl is Label)
        {
            ctl.Parent = parent;
            // ctl.BackColor = Color.Transparent;
        }
        else if (ctl.HasChildren)
        {
            MakeAllLabelTrans(ctl, parent);
        }
    }
} 
```

并调用为：`MakeAllLabelTrans(this, picBackground);`在 Form_Load 事件中，但缺少一些标签（我在循环体中放置了一个消息框 - 它真的不在循环中），但我不知道为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T09:57:31.390

您在枚举集合时正在更改集合。这会导致某些项目被跳过。

您应该重写它以首先构建需要重新设置父级的控件列表，然后在第二遍中重新设置它们的父级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:03:13.990

您不应该修改您正在迭代的集合。

```
private static IEnumerable<Labels> FindAllLabels(Control container)
{
    foreach (Control ctl in container.Controls)
    {
        var lbl = ctl as Label;
        if (lbl != null)
        {
            yield return ctl;
        }
        else if (ctl.HasChildren)
        {
            foreach (var innerResult in FindAllLabels(ctl))
                yield return innerResult;
        }
    }
}

// now call the method like this if you want to change a property on the label
foreach (var label in FindAllLabels(theForm))
    label.BackgroundColor = Color.White;

// or like this (note the .ToList()) if you want to move the labels around:
foreach (var label in FindAllLabels(theForm).ToList())
    label.Parent = someOtherControl; 
```

# html - Container Div 不会出现

> ID：13229640
> 
> 赞同：2
> 
> 时间：2012-11-05T09:55:09.797
> 
> 标签：html, css

我的页面有一个顶部、中间和底部的布局（它们都是 div。）到目前为止，我只能让顶部和底部区域正确显示。即使中间的内容与底部完全相同，它也不会出现，因此我假设一个简单而明显的语法时代很可能发生了，问题是我花了几个小时阅读和故障排除无济于事，所以请帮助！

这是我的HTML...

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
"http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
    <title>Saspadidious</title>
    <link rel="stylesheet" type="text/css" href="CSS\home.css">
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
</head>
<body>
    <a href="home.html">
        <div id="top">
            <h1 class="header9">Sarspadidious</h1>
        </div>
    </a>
    <div id="middle">
        <div class="subOrange">
            <h1 class="header6">Who?</h1>
        </div>
        <div class="subOrange">
            <h1 class="header6">What?</h1>
        </div>
        <div class="subOrange">
            <h1 class="header6">Why?</h1>
        </div>
    </div>
    <div id="bottom">
        <div class="subRed">
            <a href="software.html">
                <h1 class="header4">Software</h1>
            </a>
        </div>
        <div class="subRed">
            <a href="support.html">
                <h1 class="header4">Support</h1>
            </a>
        </div>
        <div class="subRed">
            <a href="about.html">
                <h1 class="header4">About</h1>
            </a>
        </div>
        <div class="subRed">
            <a href="news.html">
                <h1 class="header4">News</h1>
            </a>
        </div>
    </div>
</body>
</html> 
```

还有我的 CSS

```
body {
margin:0;
padding:0;
background-image:url('../Images/arches.PNG');
font-size:100%;
}

a {
text-decoration:none;
color:rgb(44,44,44);
}

@font-face {
font-family:"Mission Script";
src:url('../Other/Mission-Script.OTF');
}

#top {
position:relative;
width:90%;
margin-left:5%;
margin-right:5%;
margin-top:5%;
padding-top:4%;
padding-bottom:3%;
background-color:rgb(197,129,84);
border-color:rgb(44,44,44);
border-style:solid;
border-width:5px;
border-radius:15px;
-moz-border-radius:15px;
}

#middle {
position:relative;
width:95%;
margin-top:5%;
margin-left:2.5%;
margin-right:2.5%;
}

#bottom {
position:relative;
width:95%;
margin-top:5%;
margin-bottom:5%;
margin-left:2.5%;
margin-right:2.5%;
}

.subOrange {
position:relative;
width:26.6%;
margin-left:2.5%;
margin-right:2.5%;
padding-top:3%;
padding-bottom:3%;
background-color:rgb(255,159,72);
border-color:rgb(44,44,44);
border-style:solid;
border-width:5px;
border-radius:15px;
-moz-border-radius:15px;
float:left;
}

.subRed {
position:relative;
width:18.75%;
margin-left:2.5%;
margin-right:2.5%;
padding-top:3%;
padding-bottom:3%;
background-color:rgb(255,69,70);
border-color:rgb(44,44,44);
border-style:solid;
border-width:5px;
border-radius:15px;
-moz-border-radius:15px;
float:left;
}

.header4 {
font-family:"Mission Script";
font-size:4em;
text-align:center;
margin:0;
color:rgb(44,44,44);
}

.header6 {
font-family:"Mission Script";
font-size:6em;
text-align:center;
margin:0;
color:rgb(44,44,44);
}

.header9 {
font-family:"Mission Script";
font-size:9em;
text-align:center;
margin:0;
padding:0;
color:rgb(44,44,44);
} 
```

就这样，中间 div 中的文本也没有正确显示，它没有变成正确的大小或使用 Mission Script 作为其字体。

编辑：这是我的浏览器在呈现它时所做的屏幕截图。

![Chrome Linux (Ubuntu 10.04)](../Images/188ad3f51bd385cd0b07f654755aae2f.png)

![Safari Mac OSX（不知道我讨厌什么版本的 iMac）](../Images/47d354837f352edc7ff425bddfe83ffc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:21:44.737

我已经想通了！是的，问题很简单。有问题的页面是关于页面（about.html。）

在创建它的过程中，我从主页（home.html）复制并粘贴了大部分代码。我忘记做的是将它链接到我为它创建的新 CSS 表（about.css），正如您在我的它上面的原始代码仍然链接到 home.css。

我知道这将是显而易见的！救济是不可思议的！

这是代码中的问题...

```
<link rel="stylesheet" type="text/css" href="CSS\home.css"> 
```

改成

```
<link rel="stylesheet" type="text/css" href="CSS\about.css"> 
```

谢谢大家，很抱歉在如此明显的错误上浪费了您的专业知识。该死的地狱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:42:50.953

在 chrome for windows 上也适用于我。但是，无论哪种方式，它都无法对您的 html 中指定的 doctype 进行 w3c 验证，id 从这里开始[http://validator.w3.org/](http://validator.w3.org/)并确保您的标记与您要使用的 doctype 匹配。

首先，您需要更改以下内容：

```
<a href="home.html">

    <div id="top">
        <h1 class="header9">Sarspadidious</h1>
    </div>

</a> 
```

对此：

```
<div id="top">
    <h1 class="header9"><a href="home.html">Sarspadidious</a></h1>
</div> 
```

# git - msysgit sh.exe 参数

> ID：13229642
> 
> 赞同：12
> 
> 时间：2012-11-05T09:55:22.090
> 
> 标签：git, batch-file, sh, msysgit

我正在尝试查找有关 msysgit sh.exe 命令的一些文档。

例如，我知道`--login`启动 git bash 会话的标志，但我想知道其他可能性。

我查看了互联网，但找不到列出所有可能参数的任何地方。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T10:00:52.837

```
> .\sh.exe --help
GNU bash, version 3.1.0(1)-release-(i686-pc-msys)
Usage:  ".../Git/bin/sh.exe" [GNU long option] [option] ...
        ".../Git/bin/sh.exe" [GNU long option] [option] script-file ...
GNU long options:
        --debug
        --debugger
        --dump-po-strings
        --dump-strings
        --help
        --init-file
        --login
        --noediting
        --noprofile
        --norc
        --posix
        --protected
        --rcfile
        --restricted
        --verbose
        --version
        --wordexp
Shell options:
        -irsD or -c command or -O shopt_option          (invocation only)
        -abefhkmnptuvxBCHP or -o option
Type `".../Git/bin/sh.exe" -c "help set"' for more information about shell options.
Type `".../Git/bin/sh.exe" -c help' for more information about shell builtin commands.
Use the `bashbug' command to report bugs. 
```

另请参阅[GNU 网站](http://www.gnu.org/software/bash/)和[bash 手册](http://www.gnu.org/software/bash/manual/bash.html#Invoking-Bash)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-29T20:35:02.190

来自`sh.exe` git 命令行工具套件[https://git-scm.com/download/win](https://git-scm.com/download/win)本身是一个 Windows 可执行文件，但可以执行 linux 命令行和 linux shell 脚本。

*   首先应该设置路径，例如：`set PATH=D:\Programs\Gitcmd\bin;%PATH%`
*   也许某些环境变量适合构建`$HOME`：HOMEDRIVE 和 HOMEPATH。
*   两者都可以在批处理文件中正确完成。

    ```
    sh.exe 
    ```

    不带参数会打开一个 shell 窗口，尝试输入诸如 'ls'、'whoami' 或 'git' 之类的命令。它应该运行。

    ```
    sh.exe -x -c "command arg1 'arg2 with spaces' arg3" 
    ```

    调用单个 linux 命令，例如`sh.exe -x -c "git status"`

    ```
    sh.exe -x "path/to/scriptfile" 
    ```

    执行该脚本文件。

您可以在[http://www.vishia.org/Git/html/Gitcmd.html阅读更多内容](http://www.vishia.org/Git/html/Gitcmd.html)

# python - 获取在不同文件中定义的变量的行号

> ID：13229646
> 
> 赞同：1
> 
> 时间：2012-11-05T09:55:32.480
> 
> 标签：python, python-2.3

我是否可以获取在不同文件中定义变量的行号。例如：

```
file1.py
x = 5
mylist = [ 1, 2, 3]

file2.py

execfile("file1.py")
# TODO
# get line number of 'x' or 'mylist' 
```

我假设每个变量只定义一次，但以防万一他们定义多次怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:38:13.690

使用`ast`模块而不是正则表达式的 Ashwini 答案的略微改进版本是：

```
import ast

class GetAssignments(ast.NodeVisitor):
    def visit_Name(self, node):
        if isinstance(node.ctx, ast.Store):
            print node.id, node.lineno

with open('testing.py') as fin:
    module = ast.parse(fin.read())
    GetAssignments().visit(module) 
```

而且我认为可以在已经编译的对象上使用类似的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:06:36.983

使用`regex`：

尝试这样的事情，它会返回它找到的所有行 `x = something`：

```
In [25]: with open("fil.py") as f:
    print [index for index,line in enumerate(f) if re.findall(r'(x\s+=)',line)]
   ....:     
[0, 2, 3] 
```

其中`fil.py`包含：

```
x = 5
mylist = [ 1, 2, 3]
x = 7
x = 8 
```

# ruby - 使用 rvm 在 Ubuntu 12.4 中安装 ruby 时缺少 lib 'libruby.so.1.9' 错误

> ID：13229647
> 
> 赞同：3
> 
> 时间：2012-11-05T09:55:33.120
> 
> 标签：ruby, rvm, ubuntu-12.04

我正在尝试通过终端在远程服务器上使用 rvm 安装 ruby​​。
我正在关注此链接
[http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

但在安装步骤我收到以下错误。我试图通过网络查找问题，但无法解决。请在这里帮助我。

**$ rvm 安装 1.9.3**

```
https://rvm.io/binaries/ubuntu/12.04/x86_64/ruby-1.9.3-p286.tar.bz2 - #configure<br>
ruby-1.9.3-p286 - #download<br>
ruby-1.9.3-p286 - #extract<br>
ruby-1.9.3-p286 - #validate<br>
**Libraries missing for ruby-1.9.3-p286: libruby.so.1.9\. Refer to your system manual for installing libraries** <br>
Mounting remote ruby failed, trying to compile.<br>
Installing Ruby from source to: /home/ubuntu/.rvm/rubies/ruby-1.9.3-p286, this may take a while depending on your cpu(s)...<br>
ruby-1.9.3-p286 - #downloading ruby-1.9.3-p286, this may take a while depending on your connection...<br>
ruby-1.9.3-p286 - #extracted to /home/ubuntu/.rvm/src/ruby-1.9.3-p286 (already extracted)
Patch cflags was already applied.<br>
ruby-1.9.3-p286 - #configuring<br>
ruby-1.9.3-p286 - #compiling<br>
Write failed: Broken pipe 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:15:03.257

尝试先更新 rvm，这个问题应该已经解决了：

```
rvm get head
rvm reinstall 1.9.3 
```

如果您仍然看到它在此处报告问题/错误：[https ://github.com/wayneeseguin/rvm/issues](https://github.com/wayneeseguin/rvm/issues)

# windows - Windows 7：嗅探到本地主机的 TCP 套接字

> ID：13229652
> 
> 赞同：5
> 
> 时间：2012-11-05T09:55:40.530
> 
> 标签：windows, networking, tcp, localhost

我想捕获和分析在运行 Windows 7 操作系统的本地主机上运行的两个应用程序之间的 TCP 通信数据。我尝试使用 Wireshark，但 Wireshark 无法捕获数据，似乎只是监视网络接口输入/输出的数据。

您能否介绍一些有用的工具来轻松监控本地 TCP 数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T13:15:51.403

Wireshark 不起作用的原因是因为嗅探器依赖于网络驱动程序堆栈，而 Windows 不会`localhost`通过它公开调用。

您应该使用[Socket Sniffer](http://www.nirsoft.net/utils/socket_sniffer.html)，它查看 Winsock 调用并监控网络套接字；下载链接位于页面底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T20:56:53.857

Windows 中有一些限制阻止 libpcap 和 Microsoft Network Monitor 嗅探 localhost/loopback。但是如果您使用原始套接字，您可以嗅探 localhost。

有一个名为[RawCap](http://www.netresec.com/?page=RawCap)的免费工具可以嗅探 localhost 并将捕获的数据包保存在 PCAP 文件中。这允许您稍后检查 Wireshark 中的流量。

您可以从这里下载 RawCap：http: [//www.netresec.com/? page=RawCap](http://www.netresec.com/?page=RawCap)

# jquery - 在 iframe 和普通内容中运行 javascript？

> ID：13229655
> 
> 赞同：0
> 
> 时间：2012-11-05T09:55:52.667
> 
> 标签：jquery, iframe, input

我有以下代码块，当您单击它们时会清除输入字段：

```
$('.clearinputtext').focus(function(){
    if($(this)[0].defaultValue==$(this).val()) $(this).val('');
});
$('.clearinputtext').blur(function(){
    if($(this).val()=='') $(this).val($(this)[0].defaultValue);
}); 
```

我也需要它在 iframe 中运行，这可能吗？

**编辑：**我忘了提到 iframe 是使用灯箱动态加载的，所以当页面加载时它不存在。

**解决方案**

我设法解决了它。可能不是最好的解决方案，但现在可以了。由于当我单击链接时 iframe 会加载一个灯箱，因此当页面加载时它不存在，因此我需要在添加 iframe 后运行它的代码。我通过使用`afterShow`灯箱的事件处理程序来做到这一点。

以下是相关代码：

```
afterShow: function() {
    // First get html content of iframe
    var content = $('.fancybox-inner iframe').contents().find('html');
    //Then just apply same code to the iframe
    $(content).find('.clearinputtext').focus(function(){
        if($(this)[0].defaultValue==$(this).val()) $(this).val('');
    });
    $(content).find('.clearinputtext').blur(function(){
        if($(this).val()=='') $(this).val($(this)[0].defaultValue);
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:02:40.713

```
var iframe = document.getElementsByTagName('iframe');
innerDoc = iframe[0].contentWindow;

$(innerDoc.document.getElementsByClassName('clearinputtxet')).focus(function(){
if($(this)[0].defaultValue==$(this).val()) $(this).val('');
});

$(innerDoc.document.getElementsByClassName('clearinputtxet')).blur(function(){
    if($(this).val()=='') $(this).val($(this)[0].defaultValue);
}); 
```

试试这个它应该工作。

# css - 在背景图像中定位文本

> ID：13229659
> 
> 赞同：0
> 
> 时间：2012-11-05T09:56:11.093
> 
> 标签：css, responsive-design

我正在尝试在包含背景图像的 div 中放置一些文本。我该怎么做。该网站必须响应。类似于此站点上的正确部分。[http://loveandluxesf.com/](http://loveandluxesf.com/)

所以这是下面的代码。

```
<div class="row">
    <div class="six columns" id="signup-section">
      <div id="bg-img">
        <div class="offset-by-two">
         <h2>Random text which should go in here</h2>
          <form>
            <input type="email">
            <span class="button">Register</span>
          </form>
        </div>
      </div>
    </div> 
```

# bg-img 包含一个居中的背景图像。我希望文本和表格完全适合图像。这应该适用于多种分辨率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:59:53.107

如果您相对定位包含 div，则绝对定位文本元素 (h1)，您可以使用左上右下定位将文本放置在相对于包含 div 的位置。如果您需要更多细节，请询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:00:10.463

尝试设置`style="float:left;"`

# android - 按钮未将其图像状态更改为“按下”

> ID：13229668
> 
> 赞同：1
> 
> 时间：2012-11-05T09:57:03.790
> 
> 标签：android, imagebutton, selected

我正在尝试做一个简单的选择器。

这是我的选择器 xml 代码，它被称为“butt.xml”：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:drawable="@drawable/btn_activate_on" android:state_pressed="true"/>
<item android:drawable="@drawable/btn_activate_off" android:state_pressed="false"/> <!-- default --> 
```

这就是布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageButton
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="42dp"
    android:src="@drawable/butt" /> 
```

这就是代码：

```
ImageButton ib;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ib = (ImageButton) findViewById(R.id.imageView1);
    ib.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    ib.setSelected(true);

} 
```

我的问题是状态没有改变，当我按住按钮时。它正在将其图像更改为`"selected"`我按下时的图像。但是当我松开手指时，它又回到了原来的`"not sellected"`状态。

为什么呢？我怎样才能让它保持在“选定”模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:01:40.057

在您的选择器 butt.xml 中使用它

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/btn_activate_on" android:state_pressed="true"/>
    <item android:drawable="@drawable/btn_activate_off"/>

</selector> 
```

你也可以`ib.setSelected(true);`从你的`onClick()`. 它会被照顾的。
**更新**

```
<ImageButton
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="42dp"
    android:background="@drawable/butt" /> 
```

您需要设置背景而不是设置 src。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:05:18.250

如果您需要将按钮的状态显示为选中或未选中，则无需使用选择器。

相反，您必须使用代码 setBackground() 并通过管理标志来检查您的按钮当前是否被选中。

像

```
if(flag)
    btn.setDrawableBackground(R.id.btn_activate_on)
else
    btn.setDrawableBackground(R.id.btn_activate_off) 
```

如果要显示对状态的影响，请创建两个具有相反状态的选择器。

```
<item android:state_pressed="true"
    android:drawable="@drawable/btn_activate_on"></item>
<item android:drawable="@drawable/btn_activate_off"></item> 
```

另一个是

```
<item android:state_pressed="true"
    android:drawable="@drawable/btn_activate_off"></item>
<item android:drawable="@drawable/btn_activate_on"></item> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T01:59:29.093

按钮不应该用于这样的切换 - 而是使用复选框。

按钮的“选中”意味着用户当前的手指放在按钮上，因此当用户抬起手指时，它将不再被选中。

# fluent-nhibernate - FluentNHibernate AutoMapping：ClassConvention 不起作用

> ID：13229671
> 
> 赞同：1
> 
> 时间：2012-11-05T09:57:09.747
> 
> 标签：fluent-nhibernate, conventions, automapping

我有一个模型库，我想使用 FluentNhibernate 自动构建其 NHibernate 映射。我想在此模型中添加一个约定，即每个表名都以“s”结尾。所以这就是我所做的：

```
new AutoPersistenceModel()
            .AddEntityAssembly(typeof(User).Assembly)
            .Conventions.Add(typeof(ClassConvention))
            .WriteMappingsTo(@"E:\Temp\"); 
```

这是 ClassConvention 的代码：

```
private class ClassConvention:IClassConvention
    {
        public void Apply(IClassInstance instance)
        {
            instance.Table(instance.EntityType.Name+"s");
        }
    } 
```

但它根本不起作用。当我运行此代码时，没有将表属性添加到类标记中。请帮助我了解我的代码有什么问题？

**更新：**

我已经调试了我的代码，我确信这一行：

```
instance.Table(instance.EntityType.Name+"s"); 
```

叫做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:58:16.250

您的约定定义类应该是公共的而不是私有的

# php - PHPExcel 中 setLastModifiedBy() 的致命错误

> ID：13229679
> 
> 赞同：0
> 
> 时间：2012-11-05T09:57:25.500
> 
> 标签：php, phpexcel

在我当前的项目中，我使用了 PHPExcel 1.6.7，按照我的建议，我用我的 projet 配置了 PHPExcel 库，但是当我尝试将数据导出到 excel 文件中时，我得到了以下错误。

```
Fatal error: Call to a member function setLastModifiedBy() on a non-object in C:\wamp\www\xxx\site\dump.php on line 28 
```

我在 dump.php 中有后续代码

```
/** Error reporting */
error_reporting(E_ALL);

/** PHPExcel */
require_once ("Classes/PHPExcel.php");

/** PHPExcel_IOFactory */
require_once ("Classes/PHPExcel/IOFactory.php");

// Create new PHPExcel object
$objPHPExcel = new PHPExcel();

// Set properties
$objPHPExcel->getProperties()->setCreator("Maarten Balliauw")
 ->setLastModifiedBy("Maarten Balliauw")
 ->setTitle("Office 2007 XLSX Test Document")
     ->setSubject("Office 2007 XLSX Test Document")
 ->setDescription("Test document for Office 2007 XLSX, generated using PHP classes.")
 ->setKeywords("office 2007 openxml php")
 ->setCategory("Test result file");

// Add some data
$objPHPExcel->setActiveSheetIndex(0)
        ->setCellValue('A1', 'Hello')
        ->setCellValue('B1', 'world!')
        ->setCellValue('C1', 'Hello')
        ->setCellValue('D1', 'world!');

// Miscellaneous glyphs, UTF-8
$objPHPExcel->setActiveSheetIndex(0)
        ->setCellValue('A2', 'Miscellaneous glyphs')
        ->setCellValue('B2', 'test text');

// Rename sheet
$objPHPExcel->getActiveSheet()->setTitle('Simple');

// Set active sheet index to the first sheet, so Excel opens this as the first sheet
$objPHPExcel->setActiveSheetIndex(0);

// Redirect output to a client’s web browser (Excel5)
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="01simple.xls"');
header('Cache-Control: max-age=0');

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save('php://output'); 
exit; 
```

我检查了所有配置设置并找到了所有必需的文件，但仍然出现此错误。如果我在此过程中做错任何事情，请向我提出任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:02:23.480

看看这里：

[http://www.auditbureau.org.au/a/Documentation/API/PHPExcel/PHPExcel_DocumentProperties.html#methodsetLastModifiedBy](http://www.auditbureau.org.au/a/Documentation/API/PHPExcel/PHPExcel_DocumentProperties.html#methodsetLastModifiedBy)

setLastModfiedBy() 返回 void。因此，您不能链接调用您一直在进行的所有 ->setXX 调用。您应该分别在 getProperties() 的返回值上调用 each。

# c - C 程序 sizeof 或宏，有问题

> ID：13229682
> 
> 赞同：1
> 
> 时间：2012-11-05T09:57:33.773
> 
> 标签：c

> **可能重复：**
> [一个谜语（C 语言）](https://stackoverflow.com/questions/5611724/a-riddle-in-c)

有人可以解释一下这段代码有什么问题吗？

```
#include<stdio.h>
#define TOTAL_ELEMENTS (sizeof(array) / sizeof(array[0]))
int array[] = {23,34,12,17,204,99,16};

int main()
{
  int d;

  for(d=-1;d <= (TOTAL_ELEMENTS-2);d++)
      printf("%d\n",array[d+1]);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:59:01.900

```
d <= (TOTAL_ELEMENTS-2) 
```

`d`已签名：它是一个`int`. 但是`TOTAL_ELEMENTS`是无符号的：`sizeof`产生一个`size_t`值并且`size_t`是无符号类型。

在`<=`表达式 `d`中通过通常的算术转换方式转换为无符号数，它变成一个巨大的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:59:21.073

当`d`为-1 并与之比较`TOTAL_ELEMENTS-2`（即`size_t`类型，即*无符号*整数）时，`d`提升为无符号类型中的大数。然后，`d`大于`TOTAL_ELEMENTS-2`，因此永远不会执行循环。

> > [c11](/questions/tagged/c11 "显示标记为“c11”的问题")
> 
> **§ 6.5.8 关系运算符**
> 如果两个操作数都具有算术类型，则执行通常的算术转换。
> 
> **§ 6.3.1.8 通常的算术转换**
> 否则，如果具有无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则具有符号整数类型的操作数被转换为具有无符号的操作数的类型整数类型。

# windows-7 - 换色不起作用

> ID：13229685
> 
> 赞同：-1
> 
> 时间：2012-11-05T09:57:42.370
> 
> 标签：windows-7, colors, gtk2hs

我尝试使用以下代码更改小部件的颜色：

```
widgetModifyBg w StateNormal (Color 0xffff 0xffff 0) 
```

它适用于 ubuntu，但不适用于 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:14:37.273

与程序库放在一个文件夹中`libgtk-win32-2.0-0.dll`。

# python - 只从套接字接收一个字节

> ID：13229688
> 
> 赞同：6
> 
> 时间：2012-11-05T09:57:49.437
> 
> 标签：python, sockets, socketserver

我使用 python 编写了一个服务器程序。

我试图得到一个字符串，但我只有一个字符！我怎样才能收到一个字符串？

```
def handleclient(connection):                                           
    while True:                             
        rec = connection.recv(200)
        if rec == "help": #when I put help in the client program, rec = 'h' and not to "help"
            connection.send("Help Menu!")

    connection.send(rec)
    connection.close()

def main():
   while True:
        connection, addr = sckobj.accept()   
        connection.send("Hello\n\r")
        connection.send("Message: ")   
        IpClient = addr[0]
        print 'Server was connected by :',IpClient

        thread.start_new(handleclient, (connection,)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T10:23:01.170

使用 TCP/IP 连接，您的消息可能会被分段。它可能一次发送一封信，也可能一次发送整封信——你永远无法确定。

您的程序需要能够处理这种碎片。要么使用固定长度的数据包（因此您总是读取 X 字节），要么在每个数据包的开头发送数据的长度。如果您只发送 ASCII 字母，您还可以使用特定字符（例如`\n`）来标记传输结束。在这种情况下，您将一直阅读，直到消息包含`\n`.

`recv(200)`不保证接收 200 个字节 - 200 只是最大值。

这是您的服务器外观的示例：

```
rec = ""
while True:
    rec += connection.recv(1024)
    rec_end = rec.find('\n')
    if rec_end != -1:
        data = rec[:rec_end]

        # Do whatever you want with data here

        rec = rec[rec_end+1:] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T15:43:47.507

我解决愚蠢的 embarcadero C++ Builder

```
char RecvBuffer[4096];
boolean first_init_flag = true;
while(true)
{
    int bytesReceived;

    while(true)
    {
        ZeroMemory(RecvBuffer, 4096);
        bytesReceived = recv(clientSocket,(char*) &RecvBuffer, sizeof(RecvBuffer), 0);
        std::cout << "RecvBuffer: " << RecvBuffer << std::endl;
        std::cout << "bytesReceived: " << bytesReceived <<std ::endl;

        if (!std::strcmp(RecvBuffer, "\r\n"))
        {
            if (first_init_flag) {
                first_init_flag = !first_init_flag;
            }
            else
            {
                break;
            }
        }
    }

    if (bytesReceived == SOCKET_ERROR)
    {
        std::cout << "Client disconnected" << std::endl;
        break;
    }
    send(clientSocket, RecvBuffer, bytesReceived + 1, 0);
} 
```

首先，您发送 \r\n 或 ENTER 以进行转义连接握手和第一次数据发送

# java - 在 Java 中使用 Batik 检查和删除 SVG 中的属性

> ID：13229690
> 
> 赞同：1
> 
> 时间：2012-11-05T09:57:55.443
> 
> 标签：java, svg, attributes, viewbox, batik

这个问题基本上说明了一切。如何检查 SVG 是否具有 viewBox 属性？我正在使用蜡染库。我需要这个，因为我需要（至少）通知用户有一个 viewBox 属性。

我可以删除它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:50:48.353

使用 org.w3c.dom 类，你会按照这些思路做一些事情......

```
 String parser = XMLResourceDescriptor.getXMLParserClassName();
        SAXSVGDocumentFactory f = new SAXSVGDocumentFactory(parser);
        URL url = new URL(getCodeBase(), "fileName.svg");
        Document doc = f.createDocument(url.toString());

        Element svg = doc.getDocumentElement();

        if (svg.hasAttribute("viewBox")) {
          // notify the user somehow
        } 
```

删除通话

```
 svg.removeAttribute("viewBox") 
```

# objective-c - 核心数据：awakeFromFetch 和 awakeFromInsert 放在哪里？

> ID：13229694
> 
> 赞同：4
> 
> 时间：2012-11-05T09:58:09.490
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, objective-c-category

我想覆盖`awakeFromFetch`and `awakeFromInsert`。

当我保持自动生成的`NSManagedObject`子类不变并将我的自定义代码分类时，我的**问题**是：

我应该把这些方法放在哪里`awakeFromFetch`，`awakeFromInsert`以便正确调用这些方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T12:13:21.843

如果你的托管对象子类文件是由 Xcode 生成的，那么你也可以将方法放在托管对象子类的一个类别中，这样当你在 Xcode 中重新生成类文件时，代码不会被覆盖。

**MyEntity+Extensions.h**

```
#import "MyEntity.h"

@interface MyEntity (Extensions)
@end 
```

**MyEntity+Extensions.m**

```
#import "MyEntity+Extensions.h"

@implementation MyEntity (Extensions)

- (void)awakeFromFetch
{

} 

- (void)awakeFromInsert
{

}
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T20:17:06.637

您可能还想考虑[mogenerator](https://github.com/rentzsch/mogenerator)。它是一个命令行工具，可为您的每个托管对象生成两个类，并确保您的自定义代码在模型更改时永远不会被覆盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-23T18:51:33.497

根据 NSManagedObject 类参考，你应该把它放在一个子类中 - 调用超级实现是必要的：

> Important: Subclasses must invoke super’s implementation before performing their own initialization.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T10:10:39.517

你必须在你的子类中实现它们。如果所有子类的代码都相同，并且您希望避免将它们复制粘贴到每个子类中，我建议编写一个`NSManagedObject`实现它们的子类，然后使您的特定实体类成为该类的子类。

```
//MyManagedObject.h
@interface MyManagedObject : NSManagedObject
//...
@end

//MyManagedObject.m
@implementation
- (void)awakeFromFetch
{
    //...
} 
- (void)awakeFromInsert
{
    //...
}
@end

//OneOfMyEntities.h
@interface OneOfMyEntities : MyManagedObject
//... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T07:39:47.843

我觉得扩展是比子类更好的选择，因为在子类中，每当你生成时，你都需要再次更改父类……我希望这是更好的方法……

# matlab - Matlab中的卡尔曼滤波器

> ID：13229696
> 
> 赞同：1
> 
> 时间：2012-11-05T09:58:13.310
> 
> 标签：matlab, matlab-cvst, kalman-filter

我有一个视频，我必须使用卡尔曼方程来定位球的位置。假设球在第一帧中的初始位置`(xi,yi)`是已知的。

请指导我`(currx,curry);`在后续帧中的当前位置是什么，如下面的代码所示。

到目前为止我所拥有的：

```
R  = [0.2845 0.0045;0.0045 0.0455];
Hi = [1 0 0 0; 0 1 0 0];
Q  = 0.01*eye(4);
Pe = 100*eye(4);
F  = [1 0 0 0; 0 1 0 0; 0 0 1 0; 0 0 0 1];
x  = zeros(569,4);

kfinite = false;
for k = 1:nframes

    % Kalman initialization
    if ~kfinite
        Au    = [xi yi 0 0].';
        currx = xi;
        curry = yi;

    % Prediction 1st equation
    else            
        u  = [x1 y1 0 0].';
        Au = F*x(k-1,:).' + u; 
        currx = xi;
        curry = yi;

    end

    vx = currx-Au(1);
    vy = curry-Au(2);

    xactual      = [currx curry vx vy].';
    xactualnext  = F*xactual;
    ydesirednext = Hi*xactualnext;

    % Prediction 2nd equation
    pp = F*Pe*F.' + Q;   

    % correction 3rd equation
    K = pp*Hi.' / (Hi*pp*Hi.' + R); 

    % correction 4th equation
    Anu = Au + K*(ydesirednext - Hi*Au); 

    % correction 5th equation
    Pe = (eye(4) - K*Hi)*pp;  
    x1 = Anu(1);
    x2 = Anu(2);

    kfinite = true;

end 
```

# c++ - 我需要一个测试用例来证明我的算法/代码是错误的

> ID：13229699
> 
> 赞同：3
> 
> 时间：2012-11-05T09:58:21.237
> 
> 标签：c++, algorithm, testcase

我正在制作一个程序，它找到总和最接近 0 的最大长度子数组。实际上我试图解决这个问题： http: [//opc.iarcs.org.in/index.php/problems/DEVIOUS](http://opc.iarcs.org.in/index.php/problems/DEVIOUS)，但是当我提交了我的代码，它只对 50% 的测试用例给出了正确的答案。我的代码运行良好，甚至为我自己的测试用例给出了正确的答案，所以我需要一个测试用例来证明我的代码/算法是错误的，这样我就可以在我的代码中找到错误。

这是我的算法，

> 1.  创建一个等于输入数组大小的数组“temp”，初始化 temp 的所有元素，使得 temp[i] = 直到 input[i] 的所有元素的总和
> 2.  对数组 temp 进行排序，在 temp 中找到“i”，使得 temp[i-1] - temp[i] 最接近 0

这是我从上面的链接解决问题的代码。

```
#include <iostream>
#include <algorithm>
#include <stdlib.h>
#include <limits.h>

using namespace std;

struct element{
    int index;
    int value;
};

bool compare(element a, element b){
    return a.value < b.value;
}

int main(){
    int n;
    cin >> n;
    int array [n];
    element elements[n];
    int sum = 0;

    for(int i = 0 ;i < n; i ++){
        cin >> array[i];
        sum = sum + array[i];
        elements[i].index = i;
        elements[i].value = sum;
    }

    sort(elements,elements+n,compare);

    int diff = INT_MAX;
    int i1 = 0,i2 = 0;
    for(int i = 1;i < n;i ++){
        int temp = elements[i].value - elements[i-1].value;
        if(temp < diff){
            diff = temp;
            i1 = elements[i].index;
            i2 = elements[i-1].index;
        }
        else if(temp == diff){
            if(abs(elements[i].index - elements[i-1].index) > abs(i1-i2)){
                i1 = elements[i].index;
            i2 = elements[i-1].index;
            }
        }
    }

    diff = 0;
    int s,e;
    if(i1 >= i2){
        e = i1, s = i2+1;
    }else{
        s = i1+1, e = i2;
    }

    for(int i = s;i <= e ; i++){
        diff = diff+array[i];
    }
    cout << diff << endl;

    cout << s+1 << " " << e+1;

    return 0;
} 
```

编辑：我在我的代码中发现了一个错误并对其进行了编辑，它现在为 80% 的输入提供了正确的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:11:01.540

> 换句话说，如果车站的利润/损失是 p1, p2, ..., pN，部长想要移交一个序列 i, i+1, ..., j 使得 pi + pi 的绝对值+1 + ... + pj 被最小化。如果有不止一个具有这个最小绝对值的序列，那么他想交出最长的一个

我认为你的算法有点错误：

> temp[i] = 直到 input[i] 的所有元素的总和 对数组 temp 进行排序

序列的开始很可能是数组开始之外的另一个位置——它可以是一个子序列，不要忘记。

```
-1 | -2 | 10 | 5 |-10 | 6

   |    |    | x | x  | x 
```

edit2：现在我查看了代码，删除了错误的解释-

```
if(temp < diff){
        diff = temp;
        i1 = elements[i].index;
        i2 = elements[i-1].index;
    } 
```

您确实偏爱 -ve 数字（损失）。有没有可能是未命中的数字更接近于零，因为它要么稍微少一点 -ve 要么 +ve （但 abs 值更小）？

# mysql - 外键的`约束符号`和`index_name`之间的区别

> ID：13229701
> 
> 赞同：4
> 
> 时间：2012-11-05T09:58:29.783
> 
> 标签：mysql, foreign-keys, constraints, definition

在 Alter Table 命令中添加外键的 MySQL 语法如下：

```
ADD [CONSTRAINT [symbol]] FOREIGN KEY [index_name] (index_col_name,...) 
```

`CONSTRAINT symbol`和 有什么区别`index_name`。据我所知，它们都是命名外键的方法，但我认为必须有更多的区别，谁能启发我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:45:22.693

[ **symbol]**是一个约束名，如果指定，MySQL 将创建外键和索引，命名为**[symbol]**；在这种情况下**[index_name]**被忽略。

第二个**[index_name]**是索引名称。该索引是自动创建的。如果省略**[symbol]**，则外键将由服务器命名，索引将命名为**[index_name]**。

# java - 是否可以使用 Sikuli 断言图像在无 GUI 模式下是相同的？

> ID：13229705
> 
> 赞同：2
> 
> 时间：2012-11-05T09:58:34.850
> 
> 标签：java, image-processing, automated-tests, sikuli

我有一个无头运行的测试服务器。我想要的一项测试是检查从特定 URL 提供的图像是否与某些参考图像匹配。

Sikuli 中是否有一个 API 可以直接接受图像作为流并将其与从本地资源文件中获取的其他图像进行比较？不幸的是，没有关于 Sikuli 的 Java API 的完整教程，我发现的只是假设有可用显示的教程。

我很高兴看到任何示例或至少链接到 Sikuli javadocs 所需部分。此外，欢迎对其他方法提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:05:59.423

要使用 Sikuli，您需要

1.  将在其上搜索其他图像的基本图像。
2.  将在另一个图像中搜索的图像。

如果图像 1 是您的本地资源图像，您可以创建一个 org.sikuli.Finder 实例，其中包含图像的路径和将被搜索的该图像的区域。示例（Java 级别）：

```
finder = new Finder("path/to/image", new Region(0, 0, <imgwidth>, <imgheight>)); 
```

如果图像 1 是您的流，则必须以某种方式从中制作 BufferedImage （我不知道最好的方法）。然后，您可以借助 java.awt.Rectangle 和 org.sikuli.Region 从此 BufferedImage 制作 org.sikuli.ScreenImage。

```
finder = new Finder(new ScreenImage(new Rectangle(0,0,<imgwidth>,<imgheight>), bufferedImage), new Region(0,0,<imgwidth>,<imgheight>)) 
```

从图像 1 创建查找器后，您可以在此图像中搜索图像 2。

同样，您有两种可能性。如果第二个图像是您的本地资源图像，您可以使用文件位置创建一个 org.sikuli.Pattern 对象：

```
pattern = new Pattern("path/to/image.png"); 
```

否则，如果这是您的流，您必须以某种方式从流中创建一个 BufferedImage。然后，您可以从此图像创建图案：

```
pattern = new Pattnern(bufferedImage); 
```

作为最后一步，您现在可以运行 finder 来搜索模式：

```
finder.find(pattern); 
```

您可以检查查找器是否发现任何内容：

```
finder.hasNext(); 
```

您应该能够通过以下方式迭代所有发现：

```
for (Match m : finder):
    //do something with the match 
```

我希望我能帮助你，尽管你的问题已经有几个星期了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T13:14:09.740

下面的代码有助于断言图像

//截图

```
 File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);

 try {

//copy it some location

FileUtils.copyFile(scrFile, new File("C:\\screenshot.png"));
Finder f = new Finder("C:\\screenshot.png");
System.out.println("abc");
f.find("C:\\chrome3.png", 0.95);

while(f.hasNext()){

 System.out.println("found");
 Match m= f.next();
 f.destroy();
}

  }    
   catch (IOException e)
{
    e.printStackTrace();
  } 
```

# mysql - 需要一个实用的解决方案来为 15-Puzzle 创建模式数据库（5-5-5）

> ID：13229722
> 
> 赞同：1
> 
> 时间：2012-11-05T09:59:24.897
> 
> 标签：mysql, jdbc, recursion, artificial-intelligence, stack-overflow

对于静态模式数据库（5-5-5），请参阅[此](http://reference.kfupm.edu.sa/content/d/i/disjoint_pattern_database_heuristics_56916.pdf)（第 290 和 283 页）或下面有说明。什么[是 15 拼图？](http://en.wikipedia.org/wiki/Fifteen_puzzle)
我正在创建一个静态模式数据库（5-5-5）。此代码用于将条目填充到第一个表中。我是通过递归函数来做的`insertInDB()`。递归函数的第一个输入是这个（实际上输入拼图包含在一维数组中。为了更好地理解，我在下面将它表示为二维）

* * *

1 2 3 4
0 6 0 0
0 0 0 0
0 0 0 0

* * *

这是我的代码：

```
class DBClass
{
    public Connection connection;
     public ResultSet rs;
      public PreparedStatement ps1;
    public PreparedStatement ps2;
    public int k;
      String read_statement,insert_statement;

    public DBClass()
    {
        try {
            Class.forName("com.mysql.jdbc.Driver");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
            try {
                connection = DriverManager
                    .getConnection("jdbc:mysql://localhost/feedback?"
                        + "user=ashwin&password=ashwin&autoReconnect=true&useUnicode=true&characterEncoding=utf8&validationQuery=Select 1");
                insert_statement="insert into staticpdb1(hash,permutation,cost) values(?,?,?)";
                read_statement="select SQL_NO_CACHE * from staticpdb1 where hash=? and permutation= ? LIMIT 1";
                 ps1=connection.prepareStatement(read_statement, ResultSet.TYPE_SCROLL_SENSITIVE, 
                            ResultSet.CONCUR_UPDATABLE);
                ps2=connection.prepareStatement(insert_statement);
                k=0;
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    }
    public int updateIfNecessary(FifteenPuzzle sub) 
       {
           String str=sub.toDBString();
           try
           {

               ps1.setInt(1, sub.hashcode());
               ps1.setString(2,str);
               rs=ps1.executeQuery();
           if(rs.next())
              {
                  //if a row exists, check if the cost is greater than sub's
                  int cost=rs.getInt(3);
                  if(sub.g_n<cost)  //if the cost of sub is less than db row's cost
                  {
                      //replace the cost
                      rs.updateInt(3, sub.g_n);
                      rs.updateRow();
                      return 1;   //only examine - do not insert
                  }
                  else
                      return 0;   //dont examine - return

              }
           else
               return 2;      //insert and examine
           }
           catch(SQLException e)
           {

               System.out.println("here1"+e);
               System.err.println("reported recursion level was "+e.getStackTrace().length);
               return 0;
           }
           finally{

               try{
                   rs.close();}
               catch(final Exception e1)
               {
                   System.out.println("here2"+e1);
               }

           }

       }
    public void insert(FifteenPuzzle sub)
    {

        try{
        String str=sub.toDBString();

         ps2.setInt(1,sub.hashcode());
         ps2.setString(2, str);
         ps2.setInt(3,sub.g_n);
         ps2.executeUpdate();
         ps2.clearParameters();
        }catch(SQLException e)
        {
            System.out.println("here3"+e);
        }
    }

    public void InsertInDB(FifteenPuzzle sub) throws SQLException
       {

           System.out.println(k++);

           int i;

           int p=updateIfNecessary(sub);
          if(p==0)
          {
              System.out.println("returning");
           return;
          }
          if(p==2)
          {
          insert(sub);
          System.out.println("inserted");
          }

           //FifteenPuzzle temp=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n);
           for(i=0;i<sub.puzzle.length;i++)
           {
               if(sub.puzzle[i]!=0)
               {

                   //check the positions it can be moved to
                   if(i%4!=0 && sub.puzzle[i-1]==0)  //left
                   {
                       //create another clone and increment the moves
                       FifteenPuzzle temp_inner=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n+1);
                       //exchange positions
                        int t=temp_inner.puzzle[i];
                        temp_inner.puzzle[i]=temp_inner.puzzle[i-1];
                        temp_inner.puzzle[i-1]=t;
                        InsertInDB(temp_inner);
                   }
                   if(i%4!=3 && sub.puzzle[i+1]==0)  //right
                   {
                       //create another clone and increment the moves
                       FifteenPuzzle temp_inner=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n+1);
                       //exchange positions
                        int t=temp_inner.puzzle[i];
                        temp_inner.puzzle[i]=temp_inner.puzzle[i+1];
                        temp_inner.puzzle[i+1]=t;
                        InsertInDB(temp_inner);
                   }
                   if(i/4!=0 && sub.puzzle[i-4]==0)  //up
                   {
                       //create another clone and increment the moves
                       FifteenPuzzle temp_inner=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n+1);
                       //exchange positions
                        int t=temp_inner.puzzle[i];
                        temp_inner.puzzle[i]=temp_inner.puzzle[i-4];
                        temp_inner.puzzle[i-4]=t;
                        InsertInDB(temp_inner);
                   }
                   if(i/4!=3 && sub.puzzle[i+4]==0)  //down
                   {
                       //create another clone and increment the moves
                       FifteenPuzzle temp_inner=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n+1);
                       //exchange positions
                        int t=temp_inner.puzzle[i];
                        temp_inner.puzzle[i]=temp_inner.puzzle[i+4];
                        temp_inner.puzzle[i+4]=t;
                        InsertInDB(temp_inner);

                  }
             }   
       } 
```

类中的函数**insertInDB(FifteenPuzzle fp)**是递归函数，首先从主函数调用，其中十五个谜题参数的数组（`puzzle`是 Class 的整数数组字段`FifteenPuzzle`）为 - `1,2,3,4,0,6,0,0,0,0,0,0,0,0,0,0`（与上面显示的矩阵相同） . 在解释其他功能之前，我将解释什么是静态模式数据库；简要地（因为下面的评论）

## 什么是 15-Puzzle 的 (5-5-5) 静态模式数据库？

模式数据库是用于解决 15 个谜题的启发式算法（可以是任何谜题。但这里我只讨论 15 个谜题）。启发式是用于确定接下来要扩展哪个状态的数字。我就像每个州的成本。这里的状态是 15-Puzzle 的*排列*。对于像 8-Puzzle 这样的简单谜题，启发式可以是**manhattan distance**。它为每个错放的瓷砖提供了最少的移动次数，以达到**其**目标位置。然后将所有瓷砖的曼哈顿距离相加，得出该瓷砖的成本。曼哈顿距离给出了到达目标状态所需移动次数的估计下限，即您无法通过移动达到目标状态，小于曼哈顿距离。**但**曼哈顿距离不是一个很好的启发式算法，虽然可以接受，因为它不考虑附近的其他瓷砖。如果必须将瓷砖移动到它的目标位置，则附近的瓷砖也必须移动，并且移动次数会增加。因此，显然对于这些谜题，实际成本大多远大于曼哈顿距离。**克服**
_**这（曼哈顿距离）并考虑到其他瓷砖，引入了模式数据库。静态模式数据库保存子问题或一组图块的启发式方法，以达到其目标状态。由于您正在计算使这些图块组达到其目标状态的移动次数，因此在移动图块时将考虑该组中的其他图块。因此，这是一种更好的启发式方法，并且通常总是大于曼哈顿距离。
5-5-5静态模式只是静态模式数据库的一种形式，组数为3，其中两个包含5个tile，第三个包含6个（第6个是空白tile）。**

 **## 其中一组是这个矩阵：

1 2 3 4
0 6 0 0
0 0 0 0
0 0 0 0

* * *

我正在计算该组的所有排列的启发式/number_of_moves 以达到上述配置**并将它们插入到我的数据库**中。
可能的组合总数（也是db中的行数）是

```
16!/(16-5)! = 524160 
```

现在，其他函数——`updateIfNecessary(FifteenPuzzle)`这个函数检查传递的FifteenPuzzle 对象的数组是否已经存在于数据库中。如果数据库中已经存在，它会检查当前对象的成本是否小于数据库中的成本。如果是，它将用当前成本替换它，否则什么也不做。该函数 -`insert(FifteenPuzzle)`插入一个带有成本的新排列。

**注意：** `fifteenuzzle.g_n`是拼图的成本。对于表示上述矩阵的初始拼图，成本为`0`，每一步的成本为`incremented by1`。

对于运行配置中的堆栈大小，我已将堆栈大小设置为 - `Xss128m`（1024、512 和 256 给出了致命错误）。
目前递归数或深度是**`7,500,000`和计数**（的值`System.out.println(k++);`）。
可能的组合总数是

```
16!/(16-5)! = 524160 
```

但深度已经达到了七百五十万。这是因为产生了重复状态。目前数据库中的条目数为**513423**。您可能认为现在只有 10,000 个条目需要填写。但是现在进入的速度已经急剧下降，大约**每 30 分钟就有 1 次进入**。这永远不会过去。

我需要一个实用的解决方案——**有或没有递归**。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:08:06.950

重要的部分是第一行：`java.lang.StackOverflowError`. 递归对堆栈要求很高。

尝试仅递归地执行算法部分，同时将数据库访问置于额外的方法中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:29:39.923

似乎您正在移动块以获取所有排列。然后，检查每个排列是否存在于 DB 中；如果是，则在必要时更新移动次数。

它会生成一棵树。您正在以 DFS 样式生成它（通过递归调用）。如果您以 BFS 方式进行操作，那么您将始终获得最少的移动次数。稍后生成的重复状态总是需要更大的移动。因此，您不必在数据库中进行比较。

在以下示例中，我们将移动`6`，然后我们会看到移动的数量。

`Priority: Left, Right, Up, Down (as you gave)`

**DFS 风格**

```
1 2 3 4    1 2 3 4
0 6 0 0    6 0 0 0
0 0 0 0    0 0 0 0
0 0 0 0    0 0 0 0
  (0)        (1) 
```

到达最左边的位置。现在，检查向右移动（从它的来源）。该位置已经在数据库中，所以继续。更何况，也上不去。于是往下走。

```
1 2 3 4    1 2 3 4
0 0 0 0    0 0 0 0
6 0 0 0    0 0 0 0
0 0 0 0    6 0 0 0
  (2)        (3) 
```

现在，向右走

```
 State-1    State-2    State-3
1 2 3 4    1 2 3 4    1 2 3 4    1 2 3 4
0 0 0 0    0 0 0 0    0 0 0 0    0 0 0 0
0 0 0 0    0 0 0 0    0 0 0 0    0 0 0 0
6 0 0 0    0 6 0 0    0 0 6 0    0 0 0 6
  (3)        (4)        (5)        (6) 
```

在这里您可以看到，`State-1`只需 2 步（不是 4 步）即可到达。但这将在稍后公布，我们必须更新数据库。因此，显然这是浪费精力。

**BFS 风格**

```
1 2 3 4    1 2 3 4
0 6 0 0    6 0 0 0
0 0 0 0    0 0 0 0
0 0 0 0    0 0 0 0
  (0)        (1) 
```

到达最左边的位置，现在向右走

```
1 2 3 4    1 2 3 4
0 0 6 0    0 0 0 0
0 0 0 0    0 6 0 0
0 0 0 0    0 0 0 0
  (1)        (1) 
```

您可以将其视为`6`均匀分布所有面。在这里，我们也会有重复的状态，但这些状态需要比数据库的第一个条目更大的最小移动。

您可以使用一个简单的队列来实现这一点。

**伪代码**：

```
Initialize no_of_moves by 0
enqueue(startingPosition)
insertIntoDB(startingPattern, no_of_moves)
while((currentPattern = dequeue()) is not null)
    if(currentPattern is not already traversed)
        insertIntoDB(currentPattern);
        list<Pattern> allPatterns = patterns which can be reached from currentPattern in just 1 move
        no_of_moves++
        enqueue(allPatterns, no_of_moves)
    end if
end while 
```

除了从数据库中检查状态之外，还有很多方法可以检查状态是否已经被遍历。我正在考虑散列，但无法提出。

您可以维护从模式字符串（例如 ）映射的布尔列表`traversed["1234060000000000"] = true or false`。我不认为在主内存中存储 524160 个条目会产生任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:07:09.373

你不应该调用递归。这样做会在您的内存中的堆栈上放置另一个地址，如果这种情况经常发生，您会耗尽内存，这发生在您的情况下：`StackOverflowError`
尝试创建一个方法，让您输入一次数据，然后在循环中调用该方法，直到所有数据都保存在您的数据库中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T10:44:43.267

您`PreparedStatement`在每个方法调用中创建新对象，这里是递归方法。前任。`ps=connection.prepareStatement(read_statement);`和`ps=connection.prepareStatement(insert_statement);`。为两者创建两个单独的 PreparedStatement 对象，并将它们移出方法并`ps.clearParameters();`在方法的开头调用（对于两个对象）。有了它，您只需要处理两个对象，在这里您要创建数千个对象。然后在不再需要时关闭资源。（即，之前`FifteenPuzzle temp=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n);`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T10:04:42.163

我猜你的问题与资源管理不善有关，而不是递归本身。此外，您正在尝试使您的实现变得比您需要的更复杂。我建议如下：

*   创建一个将数据插入/更新到数据库的方法。在这里管理您的资源。这不必是递归的。
*   从您的递归方法中，调用此方法将数据插入/更新到您的数据库。

这更干净，因为您知道数据库特定方法会在返回递归之前关闭所有资源。但是，我建议您在调用此方法时重用您的连接对象。

此外，请确保关闭您的语句、结果集甚至您的连接作为 finally 块的一部分。对于初学者来说，我可以看到的一个问题是：

*   您试图在 try-block 或 if-block 中关闭您的preparedstatement。如果您没有点击 if 块并且在有机会关闭资源之前遇到了异常怎么办？你的 PreparedStatement 和其他资源永远不会关闭。**

# android - GCM 推送消息编码

> ID：13229723
> 
> 赞同：7
> 
> 时间：2012-11-05T09:59:25.587
> 
> 标签：android, encoding, push

我正在尝试使用以下代码发送推送通知：

```
 Message message = new Message.Builder().addData("appName", appData.name)
.addData("message", pushData.message).build(); 
```

在接收方，我的代码是：

```
String message = intent.getStringExtra("message"); 
```

当消息是英文、拉丁字符集时，一切正常。但是，当我尝试其他语言或字符 ç 时，它们会以问号形式出现或从字符串中删除。

注意：它是用 utf-8 编码的

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T14:15:47.923

Java 服务器

```
Message messagePush = new Message.Builder().addData("message", URLEncoder.encode("your message éèçà", "UTF-8"))) 
```

安卓应用

```
String message = URLDecoder.decode(intent.getStringExtra("message"), "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T18:42:18.367

我遇到了同样的问题。在 Android 客户端上收到时损坏的非 ASCII 字符。我个人认为这是 Google GCM 服务器库实现中的一个问题。

在 Android GCM 库中，我看到了方法：

```
com.google.android.gcm.server.Sender.sendNoRetry(Message, List<String>) 
```

该方法执行以下操作

```
HttpURLConnection conn = post(GCM_SEND_ENDPOINT, "application/json", requestBody) 
```

他们应该至少指定“application/json; **charset=utf-8** ”或他们使用的任何编码，或者更好的是强制它为 UTF-8。*这不是一个大问题吗？*

更深入地挖掘我找到了方法：

```
com.google.android.gcm.server.Sender.post(String, String, String) 
```

这样做：

```
byte[] bytes = body.getBytes() 
```

为什么他们使用平台默认字符集？特别是因为它不太可能与设备的默认字符集对齐。

**解决问题**

将以下属性作为参数传递给 JVM “ ***-Dfile.encoding=UTF-8*** ” 这将指示 Java 在执行“blah”.getBytes() 之类的操作时使用 UTF-8 作为平台默认字符集。这是不好的做法，但是当它是别人的图书馆时，你能做什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-27T12:36:14.990

我对 gcm-server 库有类似的问题。我的解决方法是使用自定义发件人来覆盖该方法并在调用`post`中使用 UTF8 作为编码。`getBytes()`它适用于谷歌应用引擎。

自定义发送者类的代码：

```
import java.io.Closeable;
import java.io.IOException;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.util.logging.Level;

import com.google.android.gcm.server.Sender;

/**
 * Workaround to avoid issue #13 of gcm-server
 * @see https://code.google.com/p/gcm/issues/detail?id=13&q=encoding
 * 
 * @author rbarriuso /at/ tribalyte.com
 *
 */
public class Utf8Sender extends Sender {

    private final String key;

    public Utf8Sender(String key) {
        super(key);
        this.key = key;
    }

    @Override
    protected HttpURLConnection post(String url, String contentType, String body) throws IOException {
        if (url == null || body == null) {
            throw new IllegalArgumentException("arguments cannot be null");
        }
        if (!url.startsWith("https://")) {
            logger.warning("URL does not use https: " + url);
        }
        logger.fine("Utf8Sender Sending POST to " + url);
        logger.finest("POST body: " + body);
        byte[] bytes = body.getBytes(UTF8);
        HttpURLConnection conn = getConnection(url);
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setFixedLengthStreamingMode(bytes.length);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type", contentType);
        conn.setRequestProperty("Authorization", "key=" + key);
        OutputStream out = conn.getOutputStream();
        try {
            out.write(bytes);
        } finally {
            close(out);
        }
        return conn;
    }

    private static void close(Closeable closeable) {
        if (closeable != null) {
            try {
                closeable.close();
            } catch (IOException e) {
                // ignore error
                logger.log(Level.FINEST, "IOException closing stream", e);
            }
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-18T06:50:39.863

这些是一些很好的解决方案，但是它们对我没有帮助，因为我正在使用主题消息发送通知。按照[这个](https://developers.google.com/cloud-messaging/http)

> HTTP 标头必须包含以下标头： Authorization: key=YOUR_API_KEY Content-Type: application/json for JSON; application/x-www-form-urlencoded;charset=UTF-8 用于纯文本。如果省略 Content-Type，则假定格式为纯文本。

但是，因为我正在使用云端点并且我的应用程序（已经在野外）期待 json，所以以纯文本格式格式化请求是不可行的。解决方案是忽略上面的文档，并在我的后端中，将 http 请求标头格式化为：

```
 connection.setRequestProperty("Content-Type", "application/json;charset=UTF-8"); 
```

就像魔术一样，突然间所有特殊字符（读作：日语）都进入了我的应用程序，而没有进行前端更改。我完整的http post代码如下`( where payload = Cloud endpoint model object, converted to json<String> via Gson):`

```
 try {
        URL url = new URL("https://gcm-http.googleapis.com/gcm/send");
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoOutput(true);
        connection.setRequestProperty("Content-Type", "application/json;charset=UTF-8");
        connection.setRequestProperty("Authorization", "key=" + API_KEY);
        connection.setRequestMethod("POST");

        byte[] bytes=payload.getBytes("UTF-8");
        OutputStream out = connection.getOutputStream();
        try {
            out.write(bytes);
        } finally {
            out.close();
        }

        if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
            // OK
            log.warning("OK");
        } else {
            // Server returned HTTP error code.
            log.warning("some error "+connection.getResponseCode());
        }
    } catch (MalformedURLException e) {
        // ...
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T08:43:13.957

中断调试器并查看您认为要发送的消息的字节

# eclipse - 根据打开的编辑器隐藏取消隐藏工具栏

> ID：13229724
> 
> 赞同：1
> 
> 时间：2012-11-05T09:59:26.990
> 
> 标签：eclipse, eclipse-rcp

在 Eclipse 中，当我打开 java 编辑器时，某些工具栏变得可见。当我关闭编辑器时它变得不可见（只打开了一个编辑器。）

这里打开 java 编辑器并没有改变视角。

如何在 eclipse rcp 应用程序中实现此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T20:52:13.007

在 3.3 之前，这可以通过 org.eclipse.ui.IEditorActionBarContributor 来完成，[它在您的编辑器扩展中使用contributorClass 属性定义](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_editors.html)。

从 3.3开始，可以在 visiblewhen 表达式中使用[核心表达式定义。](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_core_expressions_definitions.html)

例如，编辑器的可重用核心表达式可以定义如下

```
<extension point = "org.eclipse.core.expressions.definitions">
  <definition id="org.eclipse.ui.examples.contributions.activeEditor">    
     <with variable="activeEditorId">
        <equals value="org.eclipse.ui.examples.contributions.editor"/>
     </with>
  </definition>
</extension> 
```

那么下面的表达式可以用来控制菜单或工具栏是否可见

```
<visibleWhen>
  <reference definitionId=""org.eclipse.ui.examples.contributions.activeEditor"/>
</visibleWhen> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:39:01.690

您需要查看活动和上下文以隐藏/取消隐藏贡献

[http://www.vogella.com/blog/2009/07/13/eclipse-activities/](http://www.vogella.com/blog/2009/07/13/eclipse-activities/)

# java - java.awt.font 字母间距

> ID：13229725
> 
> 赞同：11
> 
> 时间：2012-11-05T09:59:31.977
> 
> 标签：java, fonts, awt, kerning

使用 java.awt.font 时是否可以增加字母间距？像这样的东西：

```
Font font = new Font("serif", Font.PLAIN, 21);
//Increase the spacing - perhaps with deriveFont()?

BufferedImage image = new BufferedImage(400, 600, BufferedImage.TYPE_INT_RGB);
Graphics2D graphics = image.createGraphics();
graphics.setFont(font);
graphics.drawString("testing",0,0); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T12:33:45.720

您可以使用更新的跟踪属性派生新字体：

```
Map<TextAttribute, Object> attributes = new HashMap<TextAttribute, Object>();
attributes.put(TextAttribute.TRACKING, 0.5);
Font font2 = font.deriveFont(attributes);
gr.setFont(font2);
gr.drawString("testing",0,20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-12T17:03:07.843

一个通用的“在宽度为 w 的容器中以当前字体居中此文本”可能是：

```
 /**
     * Calculates the x-coordinate to use to center the specified message
     * horizontally during a subsequent call to g.drawString().
     * 
     * @param g       - the instance of the Graphics object to use.
     * @param message - the string containing the message to be centered.
     * @param width   - the width of the container to center the message in.
     * @return - the integer x-coordinate to use in a subsequent call to
     *             g.drawString()
     */
    private int centerMessageHorizontal(Graphics g, String message, int width)
    {
        FontMetrics fontMetrics = g.getFontMetrics();
        int textWidth = fontMetrics.stringWidth(message);
        return width / 2 - textWidth / 2;
    } 
```

# java - 匹配域中除查询外的所有 url

> ID：13229727
> 
> 赞同：1
> 
> 时间：2012-11-05T09:59:35.837
> 
> 标签：java, regex, pattern-matching

我希望匹配（java regex）属于某个域的所有 url，除了看起来像查询字符串的那些。

例如，我希望匹配

```
http://www.thehindu.com/arts/music/marrying-keys-to-chips/article4061904.ece 
```

但避免

```
http://www.thehindu.com/arts/music?article=23417 
```

我尝试了以下方法，但它允许上述两种模式。

```
+^http://www\.thehindu\.com([^\?=])* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:11:49.570

关于什么

```
if (yourString.matches("(http://)?www\\.thehindu\\.com[^\\?=]*") {
    // match --> doesn't look like a query
} else {
    // no match --> looks like a query or completely different url
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:13:55.830

我想 regexp 不是必需的，尝试寻找问号`?`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:16:57.277

试试这个：

```
(^|\s)http:\/\/www\.thehindu\.com([^\?])*(\s|$) 
```

其中 (^|\s) 和 (\s|$) 是您期望在 url 之间的分隔符。如果需要，请在其中添加更多内容。

# android - Android外接配件开发库？

> ID：13229728
> 
> 赞同：1
> 
> 时间：2012-11-05T09:59:37.977
> 
> 标签：android, usb, arduino, microcontroller

我想构建一个带有传感器的设备（使用 Arduino 或带有微控制器的自制电路），我想通过 USB 电缆将数据从它发送到 Android 设备。通过 USB 连接设备需要什么库？有没有我可以阅读的文档？问题是，每当我搜索这个时，我只会得到关于 ADK 及其主板的结果，而不是其他设备的结果。有什么我应该事先知道的吗？我对这两个领域都不陌生，但这是我第一个将两者联系起来的项目。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:32:53.090

首先要检查的是您的 Android 设备是否配备了[USB 主机](http://en.wikipedia.org/wiki/USB_host#System_design)接口。在这种情况下，您可以将常规 USB 设备连接到您的 Android 并使用[此 API](http://developer.android.com/guide/topics/connectivity/usb/host.html)与设备进行通信。

然而，典型的 Android 设备（几乎每部手机）都只配备 USB 设备接口，用于连接 PC 或其他 USB 主机。在这种情况下，您必须使用 Android 的[USB 附件](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)支持。[Android Open Accessory 协议](http://source.android.com/tech/accessories/aoap/aoa.html)背后最重要的想法是它交换（逻辑上）USB 设备和 USB 主机角色。USB 主机查找具有特定供应商/产品 ID 的设备，选择特定的 USB 协议接口，然后简单地使用找到的输入/输出批量端点进行通信 - 非常聪明，不是吗？

要构建 Android Open Accessory 兼容设备，您需要一个带有 USB 主机接口的 CPU。如果你想使用 Arduino，[这个盾牌](http://www.circuitsathome.com/products-page/arduino-shields/usb-host-shield-2-0-for-arduino)可能是一个很好的起点，因为它的[固件](https://github.com/felis/USB_Host_Shield_2.0)已经实现了 Android 开放附件协议。还有一些[示例应用程序](http://www.circuitsathome.com/category/mcu/arduino/usb-shield/android-adk)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-16T08:48:19.053

这在通过 OTG 连接到 Arduino Mega 的 Nexus7 上效果很好。

[适用于 CDC、FTDI、Arduino 和其他设备的 Android USB 主机串行驱动程序库。](https://github.com/mik3y/usb-serial-for-android)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T08:55:21.093

你有两个解决方案

**1：您的 Arduino 板充当 USB 主机并为 Android 设备供电。**

使用此解决方案，您必须在 Arduino 板上实现 USB 主机堆栈，并且必须实现 Android 开放附件协议。您的 Arduino 板必须为 Android 设备供电。然后，您的应用程序必须使用[USB 附件 API](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)与您的开发板进行通信。

优势：

*   适用于几乎所有 Android 设备（Android 设备上不需要 USB 主机端口）

缺点：

*   设备板比较复杂（必须为两个设备都供电）
*   固件比较复杂（必须实现USB Accessory模式）

    **2\. 您的 Arduino 开发板充当 USB 设备，Android 设备为您的开发板供电。**

使用此解决方案，您不必实施特定的 USB 协议。您的开发板将充当标准 USB 设备。由于您充当设备，因此您可以直接通过 USB 电缆为您的主板供电（Android 设备将为自己和您的主板供电）。要与您的开发板通信，您将使用 Android 的[USB 主机 API](http://developer.android.com/guide/topics/connectivity/usb/host.html)。

优势：

*   设备板非常简单
*   固件简单且易于调试（您甚至可以使用 PC 进行测试）

缺点：

*   仅适用于具有 USB 主机端口的 Android 设备
*   在大多数设备上，您需要特定的电缆或适配器（例如：otg usb 主机电缆）

我有解决方案 2 的经验，并且效果很好。Android 源代码的所有源代码都可以从下面的链接获得。我已验证它适用于我在以下 Android 设备上工作的公司的传感器设备：

*   三星Galaxy S3
*   宏碁 Iconia 选项卡 a200
*   华硕变压器垫 TF300T

但它应该适用于大多数平板电脑和最近的手机，如果你想看看我们的体验，[你可以看到这篇文章。](http://www.yoctopuce.com/EN/article/sample-applications-for-android)

# c# - 这是 BaseBeen 反模式吗？

> ID：13229729
> 
> 赞同：-1
> 
> 时间：2012-11-05T09:59:41.277
> 
> 标签：c#, .net, design-patterns, anti-patterns

我有一个带有 ConsoleApp 类的实用程序库，它只有像 GetIntValue(string name) 这样的静态方法来要求用户输入具有指定名称的参数的整数值，或解析命令行参数的函数。

至于我，ConsoleApp 是一个实用程序类，继承它只是为了避免“ConsoleApp”。在代码中看起来像 BaseBeen 反模式。

但另一方面，ConsoleApp 只会被真正是 Console 应用程序的类继承，这样，它就不是 BaseBeen。

那么，它真的是 BaseBeen 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:22:55.820

SOLID 设计原则（尤其是 SRP、O/CP 和 DIP）建议您*最好*通过委托（例如策略模式）提供该功能。Has-A 比 Is-A 好，等等。

但是，您在这里非常直接地处于第一世界问题的领域，因为 Program.cs 非常位于您的代码库的瞬态端。显然，您可能需要在引导程序运行之前解析一些命令行参数（例如配置引导程序！），因此您可能会发现注入某种值提供程序具有挑战性。

所以，我会说*是的，它是一种反模式*，但是*可能还有更重要的事情需要担心*。

参见例如[http://s3.amazonaws.com/hanselminutes/hanselminutes_0145.pdf](http://s3.amazonaws.com/hanselminutes/hanselminutes_0145.pdf)第 8 页，鲍勃叔叔谈论 DIP：-

> “Main 是我们最具体的功能，它将创建我们所有的实例和所有工厂……然后它会移交给抽象部分……抽象核心将像在这个幻想世界，一切都是抽象的。”

如果 Main 必须调用一些静态方法，那没关系。如果您想从实用程序类继承以使其更容易，那可能会有点味道，但我并不在乎。只要确保你知道边界在哪里。如果您在 Main 之外使用静态实用程序类，那么您可能会遇到问题。

# jquery - 淡入/淡出 DIV 和嵌套 DIV

> ID：13229735
> 
> 赞同：1
> 
> 时间：2012-11-05T09:59:59.080
> 
> 标签：jquery, html, css

我试图让一个场景工作到我可以淡入淡出一个 div 的地方，用另一个 div 替换它。这部分我已经开始工作了，但是如果我淡入的 DIV 中包含 DIV，我的 DIV 就会完全消失。

例子：

```
<center>
        <ul id="menu">
            <li><a href="#content1">Home</a>&nbsp;&nbsp;|</li>
            <li><a href="#content2">Work</a>&nbsp;&nbsp;|</li>
            <li><a href="#content3">Blog</a>&nbsp;&nbsp;|</li>
            <li><a href="#content4">Contact</a></li>
        </ul>
    </center>
        <hr class="style-main">
        <center><img src="{image:homeHeaderImage}"></center>
</div>

 <div id="contentWrap">
   <div id="content1">
         Home, content should go here :)

     </div> 
```

这行得通，如果 DIV“content1”的内容看起来像这样，它将完美地淡入淡出。但是，由于我想设置“content1”和“content2”等内容的样式，所以我已经将 DIV 放在里面。

```
<div id="contentWrap">
   <div id="content1">
         <div id="homeContent">
         Home, content should go here :(
         </div>

     </div> 
```

这使得当我单击链接以淡化这个特定的 DIV 时，它又完全变白，没有内容。我无法弄清楚为什么它不会呈现内容。

我将它用于我的 jQuery 脚本

```
$(function() {
$('#contentWrap div').hide();
$('#contentWrap div:first').show();
$('#thumbs a:first').addClass('active');

$('#thumbs a').click(function() {
    if ($(this).hasClass('active') == true) {
        return false;
    }
    else {
        $('a.active').removeClass('active');
        $(this).addClass('active');

        $('#contentWrap div').fadeOut();
        var contentToLoad = $(this).attr('href');
        $(contentToLoad).fadeIn();

        return false;
    }
}); 
```

});

这是一个 jsFiddle，主菜单项是有问题的。如您所知，其他的工作正常。

[http://jsfiddle.net/uyAzp/](http://jsfiddle.net/uyAzp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:14:33.003

在您的 jQuery 中，您有这一行：

```
$('#contentWrap div').hide(); 
```

这会导致所有 div 隐藏，包括 #content1 中的 div

因此，当您单击主页按钮时，#content1 会使其淡化，但包含您要显示的信息的 #content1 内的 div 仍处于隐藏状态。

您可以通过将其添加到您的 css 来轻松解决它：

```
#homeContent{ display:block !important; } 
```

尽管稍微重写您的 jQuery 可能会更好，这样您就不必一开始就隐藏所有这些 div。（通过您的 CSS 将它们展示：无）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:41:21.727

您的 CSS 选择器设置为`div`选择`#contentWrap`.

如果您将它们更改`#contentWrap > div`为此将仅选择那些是直接子级的。

像这样：

[jsFiddle](http://jsfiddle.net/uyAzp/4/)

为避免它们在加载时同时显示，您应该`display: none`在 CSS 中添加`#contentWrap > div`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:35:01.110

**只需更新这一行：**

```
$('#contentWrap div:first').show(); 
```

**有了这个：**

```
$('#contentWrap div:first-child').show(); 
```

看看这是否有帮助。

# java - Gps、传感器和唤醒

> ID：13229741
> 
> 赞同：0
> 
> 时间：2012-11-05T10:00:18.087
> 
> 标签：java, android, gps, sensors, wakelock

我有一个程序可以读取和写入所有传感器值文件，但是当你关闭屏幕时，会停止传感器上的侦听器和 txt 文件上的记录。我已经尝试过使用唤醒锁，但收效甚微，我想知道您是否有想法，或者我是否必须诉诸唤醒来让我始终处于监控状态，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:01:40.753

您最好使用服务来监听传感器。我用我的 Sports Tracker 应用程序做到了这一点，并且 ist 工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T12:12:51.453

解决了？

尝试 onResume 和 LocationListener

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:10:41.467

屏幕关闭时，至少 GPS 系统 (LocationManager.requestLocationUpdates) 正在使用唤醒锁。我不知道其他传感器。（你用你的问题标记了 GPS）

# jquery - 图片未显示在页面上

> ID：13229742
> 
> 赞同：1
> 
> 时间：2012-11-05T10:00:19.067
> 
> 标签：jquery, html, css

单击提交按钮后，我有两个页面都显示相同的加载图像。这是我的代码片段：

```
<div class="content">
    <img src="/images/stroomschema.png" style="padding: 10px;">
    <form method="post" action="/result" enctype="multipart/form-data">
        <h3>1\. Selecteer een PDF-print van je rooster.<a href="instruction.html" target="_blank"><img src="/images/questionmark.png" /></a></h3>
        <input type="file" name="infile" id="roosterIn"/>
        <h3>2\. Klik op onderstaande knop om het rooster voor te bereiden.</h3>
        <input type="submit" name="upload" value="Selecteer eerst een rooster" id="submitIndex" disabled="disabled" />
    </form
    <img src="/images/loading.gif" style="display: none;" class="loading_image">
    <br>
    <h5><a href={{ logout_url }}>Uitloggen</a></h5>
</div>
</div>
<script>
    $('#roosterIn').change(function() {
        $('#submitIndex').removeAttr('disabled');
        $('#submitIndex').attr('value', 'Volgende')
    })

    $('input[type=submit]').click(function() {
        $('.loading_image').attr('style', 'display: block;')
        $(this).parents('form').hide()
        $(this).parents('form').submit()
    })
</script> 
```

奇怪的是，`.loading_image`图像永远不会显示。如果我在 chrome 中检查页面，那么它会显示以下代码：

```
<div class="content">
    <img src="/images/stroomschema.png" style="padding: 10px;">
    <form method="post" action="/result" enctype="multipart/form-data">
        <h3>1\. Selecteer een PDF-print van je rooster.<a href="instruction.html" target="_blank"><img src="/images/questionmark.png" /></a></h3>
        <input type="file" name="infile" id="roosterIn"/>
        <h3>2\. Klik op onderstaande knop om het rooster voor te bereiden.</h3>
        <input type="submit" name="upload" value="Selecteer eerst een rooster" id="submitIndex" disabled="disabled" />
    </form
    <br>
    <h5><a href={{ logout_url }}>Uitloggen</a></h5>
</div>
</div>
<script>
    $('#roosterIn').change(function() {
        $('#submitIndex').removeAttr('disabled');
        $('#submitIndex').attr('value', 'Volgende')
    })

    $('input[type=submit]').click(function() {
        $('.loading_image').attr('style', 'display: block;')
        $(this).parents('form').hide()
        $(this).parents('form').submit()
    })
</script> 
```

整个图片标签都不见了，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:01:53.520

该`img`标签不存在，因为您缺少标签的`>`关闭`</form>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:02:53.627

将其更改`</form`为`</form>`

# ruby-on-rails - 为什么“create！do”在这个模型中有效，而不是“new！do”？

> ID：13229744
> 
> 赞同：0
> 
> 时间：2012-11-05T10:00:41.620
> 
> 标签：ruby-on-rails

我有以下代码：

**用户.rb**：

```
 def self.create_with_omniauth(auth)
    create! do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"]
      # Add an error message when email is already taken
      user.email = auth["info"]["email"]
      user.password = user.password_confirmation = SecureRandom.urlsafe_base64(n=6) 
    end
  end 
```

**session_controller.rb：**

```
 def omniauth_create
    auth = request.env["omniauth.auth"]
    user = User.from_omniauth(env["omniauth.auth"])
    if user.save
      sign_in user
      redirect_back_or user
    else
      #session[:omniauth] = request.env['omniauth.auth'].except('extra')
      redirect_to signup_path
      flash.now[:error] = 'Worked!'
    end
  end 
```

现在此代码不起作用，因为`create! do`在 User 模型中保存了用户，并且在执行到达控制器并通过 if 语句之前引发了错误。所以我想`new! do`改用，但得到了这个：

```
undefined method `new!' for #<Class:0xb5aaf04> 
```

为什么“创造！做”没有“新！做”？

（我采取了错误的方法来解决这个问题？如果是这样，我可以应用哪些其他解决方案？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:04:29.687

我不认为有一种`new!`方法，我只知道`create!`和`save!`

`new`并且`build`只初始化对象而不保存到数据库`save`中，并且`create`同时进行初始化和保存。

最后的爆炸是如果发生错误而不是返回false，则引发异常。

因此，如果您使用，则`new`必须`save!`保留记录。

```
 def self.create_with_omniauth(auth)
    pw = SecureRandom.urlsafe_base64(6) 
    record = new(
      provider: auth["provider"],
      uid: auth["uid"],
      name: auth["info"]["name"],
      # Add an error message when email is already taken
      email: auth["info"]["email"],
      password: pw,
      password_confirmation: pw
    )
    record.save!
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:13:24.160

您可以找到模型有哪些方法，运行 rails 控制台并输入：`ModelName.methods.sort`

# android - 将 ImageButton 放入表格中

> ID：13229746
> 
> 赞同：0
> 
> 时间：2012-11-05T10:00:46.493
> 
> 标签：android, android-layout, imagebutton

我正在尝试创建一个包含 4 个单元格的表格，每行有 2 个`ImageButton`。出于某种原因，`ImageButton`即使`tablerow`宽度为`match parent`

**这是代码：**

```
<LinearLayout 
    android:layout_height="wrap_content"
     android:layout_width="match_parent"
    android:layout_weight="1" >
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"    

   >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageButton
            android:id="@+id/button5"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/button4"
            android:background="@null"
            android:onClick="changepic2"

            android:src="@drawable/breakingdawn"
            android:text="Breaking Dawn" />

        <ImageButton
            android:id="@+id/button4"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_alignBaseline="@+id/button1"
            android:layout_alignBottom="@+id/button1"
            android:layout_alignLeft="@+id/button5"
            android:layout_alignParentRight="true"
            android:background="@null"
            android:onClick="changepic3"

            android:src="@drawable/newmoon" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageButton
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/button3"
            android:layout_alignParentLeft="true"
            android:onClick="changepic"

            android:paddingTop="2dp"

            android:src="@drawable/twilight"
            android:background="@null"/>

        <ImageButton
            android:id="@+id/button3"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_alignParentBottom="true"
            android:onClick="changepic1"

            android:src="@drawable/eclipse"
            android:paddingTop="2dp"
            android:background="@null" />
    </TableRow>
</TableLayout> 
```

知道如何让它完全适合屏幕吗？

谢谢！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:43:58.133

代替

**这个** `android:src="@drawable/eclipse"`

**利用** `android:background="@drawable/eclipse"`

并尝试一次。它可能会帮助你

并使用`wrapcontent`而不是`matchparent`

# pandas - 如何将属性添加到 pandas.DataFrame 的子类？

> ID：13229750
> 
> 赞同：4
> 
> 时间：2012-11-05T10:00:56.923
> 
> 标签：pandas

我想将属性添加到 DataFrame 的子类，但出现错误：

```
>>> import pandas as pd
>>>class Foo(pd.DataFrame):
...     def __init__(self):
...         self.bar=None
...         
>>> Foo()

RuntimeError: maximum recursion depth exceeded 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:45:37.037

你想这样写：

```
class Foo(pd.DataFrame):
  def __init__(self):
    super(Foo, self).__init__()
    self.bar = None 
```

*请参阅[Python 的`__init__`语法](https://stackoverflow.com/questions/6013844/python-init-syntax)问题。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:48:41.307

```
In [12]: class Foo(pd.DataFrame):
   ....:     def __init__(self, bar=None):
   ....:         super(Foo, self).__init__()
   ....:         self.bar = bar 
```

这导致： -

```
In [30]: my_special_dataframe = Foo(bar=1)

In [31]: my_special_dataframe.bar
Out[31]: 1

In [32]: my_special_dataframe2 = Foo() 

In [33]: my_special_dataframe2.bar 
```

# php - PhpSeclib <-> BouncyCastle RSA

> ID：13229751
> 
> 赞同：1
> 
> 时间：2012-11-05T10:01:02.757
> 
> 标签：php, rsa, bouncycastle, public-key, phpseclib

我在服务器端使用 phpseclib 生成了一对公钥/私钥，例如

```
include 'Crypt/RSA.php';
$rsa = new Crypt_RSA();
$rsa->setPrivateKeyFormat(CRYPT_RSA_PRIVATE_FORMAT_PKCS1);
$rsa->setPublicKeyFormat(CRYPT_RSA_PUBLIC_FORMAT_PKCS1);
extract($rsa->createKey());
echo $privatekey;
echo "\n\n\n";
echo $publickey; 
```

现在我想使用 Java Bouncy Castle 引擎在客户端导入公钥。
这是我的公钥

```
-----BEGIN PUBLIC KEY-----
MIGJAoGBAJEGAmaQejDgJaCg/B5+g68arqpMpl6jZ9+p8TBzNRIq+Ygt/n3iqz+pAtltrlRnmqSD
svx0LMluw1wXezQ1pz2tTJTEhg6b69Qui0o//W5UDfle4yOyAHaOs8MD5nubJjXFU8vGiEdektET
jgKqiSr5TBgZoHy+YDWpd4yTemXVAgMBAAE=
-----END PUBLIC KEY----- 
```

但我可以做到。我尝试了几种方法，但总是出错。

```
AsymmetricKeyParameter publicKey = 
    (AsymmetricKeyParameter) PublicKeyFactory.createKey(b64.decodeBuffer(key));
AsymmetricKeyParameter publicKey = 
    (AsymmetricKeyParameter) PublicKeyFactory.createKey(key.getBytes()) 
```

还

```
PEMReader pemReader = new org.bouncycastle.openssl.PEMReader (reader);
PemObject pem = pemReader.readPemObject(); 
```

所有这些方式都会产生错误。

我应该如何使用 Java Bouncy Castle 引擎导入公钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T00:14:38.357

我找到了解决方案

```
 key = key.replaceAll("PUBLIC KEY", "RSA PUBLIC KEY");
    final Reader reader = new StringReader(key);
    PEMReader pemReader = new PEMReader(reader);
    Object obj = pemReader.readObject();
    pemReader.close();
    BCRSAPublicKey bcPublicKey = (BCRSAPublicKey) obj;

    AsymmetricKeyParameter publicKey = (AsymmetricKeyParameter) PublicKeyFactory.createKey(bcPublicKey.getEncoded());

    AsymmetricBlockCipher e = new RSAEngine();
    e = new org.bouncycastle.crypto.encodings.PKCS1Encoding(e);
    e.init(true, publicKey);

    byte[] messageBytes = inputData.getBytes();
    encryptedData = e.processBlock(messageBytes, 0, messageBytes.length); 
```

现在我可以在 Java 端加密并在服务器（PHP）端解密

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:52:25.023

可能值得尝试使用最新的 Git 版本的 phpseclib。引用一个半近期的提交：

[https://github.com/phpseclib/phpseclib/commit/2f8d1055ea5a6b06cd7a40eb85661ba688a31320](https://github.com/phpseclib/phpseclib/commit/2f8d1055ea5a6b06cd7a40eb85661ba688a31320)

引用它，提交“[使] Crypt_RSA 的公钥与 OpenSSL 兼容”。

# php - OneToMany 关系中的 Doctrine2 查询错误

> ID：13229753
> 
> 赞同：1
> 
> 时间：2012-11-05T10:01:10.597
> 
> 标签：php, mysql, doctrine-orm

我有一个 MySQL 数据库的学说 2 问题：

我有一个模型`User`和一个模型`Documents`。每个`User`可能有 0 或 n `Documents`。每个都`Document`被分配给一个`User`。我的模型：

**用户**

```
<?php

namespace Entity;

/**
* @Entity(repositoryClass="Entity\Repository\UserRepository")
* @Table(name="user")
*/
class User extends Object
{
    /**
    * @Id @GeneratedValue(strategy="UUID")
    * @Column(type="string", length=36)
    * @var string
    */
    protected $id;

    /**
    * @OneToMany(targetEntity="\Entity\Document", mappedBy="user")
    */
    private $documents;

    public function __construct($options = array())
    {
        $this->documents = new \Doctrine\Common\Collections\ArrayCollection;
    }
} 
```

**文档**

```
<?php

namespace Entity;

/**
* @Entity(repositoryClass="Entity\Repository\DocumentRepository")
* @Table(name="document")
*/
class Document extends Object
{
    /**
    * @Id @Column(type="string")
    * @var string
    */
    protected $id;

    /**
    * @ManyToOne(targetEntity="\Entity\User", inversedBy="documents")
    * @JoinColumn(name="user_id", referencedColumnName="id")
    * @var User
    */
    private $user;
} 
```

现在我想获取`User`给定`Document`ID 的。SQL 查询将是：

```
SELECT u.*
FROM `user` u
INNER JOIN `document` d ON d.user_id = u.id
WHERE d.id = 'mydocumentid' 
```

但这不起作用：

```
$user = $queryBuilder
        ->select('u.*')
        ->from('\\Entity\\User', 'u')
        ->innerJoin('\\Entity\\Document', 'd', \Doctrine\ORM\Query\Expr\Join::ON, 'd.user_id = u.id')
        ->where('d.id = :documentId')
        ->setParameter('documentId', 'mydocumentid')
        ->setMaxResults(1)
        ->getQuery()
        ->getSingleResult(); 
```

直接查询也不起作用：

```
$query = $em->createQuery('
    SELECT
        u.*
    FROM
        Entity\\User u
    INNER JOIN
        Entity\\Document d ON d.user_id = u.id
    WHERE
        d.id = "mydocumentid"
'); 
```

你能帮我跑这个吗？

**错误信息**

```
[Semantical Error] line 0, col 66 near 'd ON d.user_id': Error: Identification Variable \Entity\Document used in join path expression but was not defined before. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:07:49.823

而不是使用：

```
->innerJoin('\\Entity\\Document', 'd', \Doctrine\ORM\Query\Expr\Join::ON, 'd.user_id = u.id') 
```

尝试使用这个：

```
->innerJoin('u.documents', 'd', \Doctrine\ORM\Query\Expr\Join::ON, 'd.user_id = u.id') 
```

这是因为 Doctrine 需要知道必须加入`user`到哪个字段。`documents`知道字段 Doctrine 将获取目标实体，这样 Doctine 直接知道类。

# python - Python 支持 ++ 吗？

> ID：13229760
> 
> 赞同：11
> 
> 时间：2012-11-05T10:01:26.860
> 
> 标签：python

> **可能重复：**
> [Python 中递增和递减运算符的行为](https://stackoverflow.com/questions/1485841/behaviour-of-increment-and-decrement-operators-in-python)

我是 Python 新手，我对 ++ python 感到困惑。我试过 ++num 但 num 的值没有改变：

```
>>> a = 1
>>> ++a
1
>>> print a
1
>>> print(++a)
1 
```

有人可以解释一下吗？如果 Python 支持 ++，为什么 num 没有改变。如果不是，为什么我可以使用 ++？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T10:04:13.483

不：

```
In [1]: a=1

In [2]: a++
------------------------------------------------------------
   File "<ipython console>", line 1
     a++
        ^
SyntaxError: invalid syntax 
```

但是你可以：

```
In [3]: a+=1

In [4]: a
Out[4]: 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:02:38.870

它应该看起来像

```
a = 6
a += 1
print a
>>> 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:06:01.647

应该有一种并且最好只有一种明显的方法来做到这一点

```
>>> a = 1
>>> a += 1
>>> a
2 
```

# wcf - Windows Phone 8 和 REST

> ID：13229762
> 
> 赞同：3
> 
> 时间：2012-11-05T10:01:28.997
> 
> 标签：wcf, rest, windows-phone-8

我需要在 Windows Phone 8 下使用 REST Web 服务，但是 WP 框架中没有 System.ServiceModel.Web 命名空间，所以我不能使用 WebGet 和 WebInvoke 注释。

我应该如何使用 WCF 进行 HTTP GET 调用？Windows Phone 8 是否支持 WCF？

**编辑**

我现在能想到的唯一方法是使用 HttpWebRequest 的直接方法并手动处理所有内容。我想避免这种情况，因为这种方法在生产代码中带来了太多样板代码。这就是 WCF 出现的原因。我什至不能使用 RealProxy 自己实现一些基本设施，因为它也不支持。带来一些自动化并删除样板代码的唯一解决方案是使用 DynamicObject 的动态和 DLR 功能，这将解决运行时的调用，但这将使我摆脱静态编译器检查。

为什么微软要从 WP8 中删除框架的关键部分？我不明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:05:28.280

> 为什么微软要从 WP8 中删除框架的关键部分？

他们从未在场。此类 API 将被视为功能。[使用RestSharp](http://restsharp.org/)之类的框架，您无需费心手动编写任何内容。

# shell - tar：存档中出现意外的 EOF

> ID：13229764
> 
> 赞同：5
> 
> 时间：2012-11-05T10:01:43.320
> 
> 标签：shell, command, centos, extract, tar

我正在尝试提取 .tar.gz 文件但没有运气

```
gzip: stdin: unexpected end of file
tar: Unexpected EOF in archive
tar: Unexpected EOF in archive
tar: Error is not recoverable: exiting now 
```

文件 tar.gz 仅包含另一个有问题的 file.tar

当我试图提取 .tar 文件时，我得到了

```
tar: Unexpected EOF in archive
tar: Unexpected EOF in archive
tar: Error is not recoverable: exiting now 
```

我试过–ignore-zeros –ignore-failed-read 没有运气

即使它已损坏，我如何提取此文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:23:19.803

您的 tar 文件被截断。`tar`提取档案中存在的所有内容，但无法发明缺失的部分。

# javascript - 使用 setTimeout/Cleartimeout 时出现意外令牌非法

> ID：13229766
> 
> 赞同：0
> 
> 时间：2012-11-05T10:01:54.317
> 
> 标签：javascript, jquery

这就是我想要的：当我将鼠标悬停在 div 之外时超时，如果我再次将鼠标悬停在 div 顶部则取消。

如果我删除取消功能，该代码将起作用。所以显示和隐藏 div 效果很好。

这是我的代码：

```
$(document).ready(function ()
    {
        var timeoutID;
        function clearAlert()
        {
            window.clearTimeout(timeoutID);
        }​

        if ($('.txtVote').text() == "Avgi stemme")
        {
            $('#starInfo').hover(
            function ()
            {
                clearAlert();
                $('#CarDetailsButtons').css('right', '10px');
                $('#voteStars').show();
            },
            function ()
            {
                console.log("hide iniated");
                timeoutID = window.setTimeout(hideStars, 2000);
                console.log("hide executed");
            });     
        }

        function hideStars()
        {
            console.log("hideStars ran");
            $('#CarDetailsButtons').css('right', '45px');
            $('#voteStars').hide();
        }
}); 
```

而且，这是我的错误：

> Uncaught SyntaxError: Unexpected token ILLEGAL

紧随其后出现在行上`window.clearTimeout(timeoutID);`

任何人都能够看到我做错了什么？:)

**编辑：** **工作**

所以，似乎我有某种复制粘贴错误。我手动编写了 clearAlert 函数，就像以前一样，现在它可以工作了。

感谢所有的投入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:16:43.167

尝试这个：

```
var that = this;
that.timeoutID = null;

...

that.timeoutID = ... 
```

或者

你必须声明 var timeoutID = null; 全球的。因此，您在全局上下文中而不是在 $(document).ready 的函数上下文中拥有 var。

最好的解决方案是编写一个带有计时器的小 js 类。所以你没有全局冲突，它可以工作。

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:15:31.930

我建议您将您的功能移到 doc 之外，如下所示：

```
function hideStars()
    {
        console.log("hideStars ran");
        $('#CarDetailsButtons').css('right', '45px');
        $('#voteStars').hide();
    }

function clearAlert()
    {
        window.clearTimeout(timeoutID);
    }​

$(document).ready(function ()
  {
    var timeoutID;

    if ($('.txtVote').text() == "Avgi stemme")
    {
        $('#starInfo').hover(
        function ()
        {
            clearAlert();
            $('#CarDetailsButtons').css('right', '10px');
            $('#voteStars').show();
        },
        function ()
        {
            console.log("hide iniated");
            timeoutID = window.setTimeout(hideStars, 2000);
            console.log("hide executed");
        });     
    }

}); 
```

# objective-c - Restkit 对多关系追加到集合而不是设置新集合

> ID：13229767
> 
> 赞同：5
> 
> 时间：2012-11-05T10:02:12.637
> 
> 标签：objective-c, ios, restkit, object-object-mapping

我有一个与 iOS Restkit 相关的问题。我有一个来自远程服务器的父子关系数据，并将这些对象映射到`NSManagedObject`带有 Restkit 的对象。我目前遇到的问题是对服务器的每个请求总是清除“子”关系并将其替换为来自服务器的新数据。有没有办法避免这些并附加新的孩子？

例如：我有一个经典的 Category --> Products 关系。

> ```
> {"categories": [
>     {
>         "cat_id": "1",
>         "cat_title": "category 1",
>         "cat_tag": 1,
>         "product": [
>             {
>                 "prod_id": "1",
>                 "prod_name": "product 1",
>                 "prod_tag": 1
>             },
>             {
>                 "prod_id": "2",
>                 "prod_name": "product 2",
>                 "prod_tag": 1
>             }
>         ]
>     }
> ] } 
> ```

这工作正常，一切都与CoreData上的关系正确保存。但是，如果我向服务器发出另一个请求并有新的响应：

> ```
> {"categories": [
>     {
>         "cat_id": "1",
>         "cat_title": "category 1",
>         "cat_tag": 1,
>         "product": [
>             {
>                 "prod_id": "3",
>                 "prod_name": "product 3",
>                 "prod_tag": 1
>             },
>             {
>                 "prod_id": "4",
>                 "prod_name": "product 4",
>                 "prod_tag": 1
>             }
>         ]
>     }
> ] } 
> ```

我将让产品 3 和产品 4 替换数据库中的产品 1 和产品 2。我确定我正确设置了所有关系和主键。（两者`cat_id`都`prod_id`设置为主键）。

通过RestKit的内部框架调查，我注意到`line 576`在`RKObjectMappingOperation`课堂上，有

> ```
> RKLogTrace(@"Mapped NSSet relationship object from keyPath '%@' to
>            '%@'. Value: %@", relationshipMapping.sourceKeyPath,
>            relationshipMapping.destinationKeyPath, destinationObject);
> 
> NSMutableSet *destinationSet = [self.destinationObject
>                          mutableSetValueForKey:relationshipMapping.destinationKeyPath];
> [destinationSet setSet:destinationObject]; 
> ```

所以我想这很容易改变

`[destinationSet setSet:destinationObject];`

至

`[destinationSet addObjectsFromArray:[destinationObject allObjects]]`

但我想知道是否有更好的方法来做到这一点？

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:44:45.170

感谢来自的支持`Reskit`。它现在由`RKRelationshipMapping`.( [https://github.com/RestKit/RestKit/issues/989](https://github.com/RestKit/RestKit/issues/989) )支持

只需将实例的`assignmentPolicy`值设置为`RKRelationshipMapping``RKUnionAssignmentPolicy`

# licensing - LGPL 许可证和共享库

> ID：13229768
> 
> 赞同：0
> 
> 时间：2012-11-05T10:02:17.787
> 
> 标签：licensing, lgpl, copying

我想知道是否允许在单个存档中分发仅二进制/非 LGPL 的应用程序以及共享库（由应用程序本身使用），其中该库的原始源代码由LGPL 并没有被修改为应用程序使用。

原因是可以编译应用程序，以便它首先在当前目录 ./ 中搜索库，例如。这将使依赖于特定版本库的纯二进制应用程序几乎与具有静态链接库的相同应用程序相同，尽管在后一种情况下，您必须根据 LGPL 条款许可生成的应用程序。

> ```
> Myapp/      -- the archive
>    myapp    -- the binary-only application
>    otherlib.so -- the LGPL'ed library 
> ```
> 
> $ cd
> Myapp $ ./myapp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:13:12.187

我认为您建议的发行版很好。

为了遵守 LGPL，您的应用程序的用户必须可以删除他们自己的 otherlib.so 版本并让您的应用程序使用它运行。假设此要求仅涵盖二进制兼容更改，听起来在您的情况下，仅包含应用程序二进制版本的发行版满足了该要求。

# mysql - 如何将游标变量的值复制到过程中的临时变量？

> ID：13229774
> 
> 赞同：1
> 
> 时间：2012-11-05T10:02:31.827
> 
> 标签：mysql

```
BEGIN
DECLARE cur_var1 CURSOR FOR
        SELECT sum_field1  FROM table1 where field1 = sum_val1  ;

DECLARE cur_var2 CURSOR FOR
        SELECT sum_field2   FROM table2 where field2 = sum_val2  ;

END 
```

我想将 的值保存`cur_var1`到一个临时变量 say`cur_temp`中。现在请让我知道这可能吗？如果可能的话，我应该如何编写代码。

# c - 通过管道函数在 C 中计算行列式矩阵。修订代码

> ID：13229776
> 
> 赞同：2
> 
> 时间：2012-11-05T10:02:36.640
> 
> 标签：c, matrix, pipe, determinants

开发程序是使用 IPC 机制执行以下问题之一： 方式——“渠道”。通过在低阶行列式上展开方阵行列式来实现计算。“主”进程发送作业“驱动”进程，但后者执行行列式计算，然后计算主进程的结果。也就是说，需要用到管道功能。我有一个工作程序，但没有 IPC 机制。我不知道管道功能及其工作原理。

```
#include<stdio.h>
#include<math.h>
#include<stdlib.h>

int determinant(int n, double mat[n][n])
{
    int i,j,i_count,j_count, count=0;
    double array[n-1][n-1], det=0;
    if(n==1) return mat[0][0];
    if(n==2) return (mat[0][0]*mat[1][1] - mat[0][1]*mat[1][0]);

    for(count=0; count<n; count++)
    {
        i_count=0;
        for(i=1; i<n; i++)
        {
            j_count=0;
            for(j=0; j<n; j++)
            {
                if(j == count) continue;
                array[i_count][j_count] = mat[i][j];
                j_count++;
            }
            i_count++;
        }
        det += pow(-1, count) * mat[0][count] * determinant(n-1,array);
    }
    return det;
}

int main()
{
    int i, j, dim;
    printf("Enter n\n");
    scanf("%d", &dim);
    double matrix[dim][dim];
    printf("Enter matrix:\n");
    for(i = 0; i < dim; i++)
    {
        for(j = 0; j < dim; j++)
        {
            scanf("%lf \n", &matrix[i][j]);
        }
    }
    double x = determinant(dim, matrix);
    printf("Determinant = %g\n", x);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:06:07.460

几点注意事项：管道是单向的，一个进程写入，一个进程读取。所以当你启动管道时，如果一个进程正在从管道读取，应该关闭管道的写入端，反之亦然。否则你有发送数据的风险给自己，而不是把它发送给另一个进程。管道可以在fork（）之前启动，子进程继承管道（就像继承整个堆栈，除了pid）。
在此示例中，父进程要求输入一个矩阵，然后将其发送给子进程，子进程计算行列式并将其打印在屏幕上：

```
#include<stdio.h>
#include<math.h>
#include<stdlib.h>
#include <unistd.h>

int determinant(int n, double mat[n][n])
{
    int i,j,i_count,j_count, count=0;
    double array[n-1][n-1], det=0;
    if(n==1) return mat[0][0];
    if(n==2) return (mat[0][0]*mat[1][1] - mat[0][1]*mat[1][0]);

    for(count=0; count<n; count++)
    {
        i_count=0;
        for(i=1; i<n; i++)
        {
            j_count=0;
            for(j=0; j<n; j++)
            {
                if(j == count) continue;
                array[i_count][j_count] = mat[i][j];
                j_count++;
            }
            i_count++;
        }
        det += pow(-1, count) * mat[0][count] * determinant(n-1,array);
    }
    return det;
}

int main()
{
    int i, j, dim;
    int fd[2];
    pipe(fd);
    pid_t pid=fork();
    if(pid)
    {
        // Father process
        close(fd[0]); // close the reading side of the pipe
        char buffer[100];
        printf("Enter n\n");
        fgets(buffer,100,stdin);
        dim=atoi(buffer);        // gets a float with atof
        double matrix[dim][dim];
        printf("Enter matrix:\n");
        for(i = 0; i < dim; i++)
        {
            for(j = 0; j < dim; j++)
            {
                fgets(buffer,100,stdin);
                matrix[i][j]=atof(buffer);
            }
        }
        write(fd[1],&dim,sizeof(double));  // write the size of the matrix
        write(fd[1], matrix, dim*dim*sizeof(double));  // write the matrix
        close(fd[1]);
    }
    else
    {
        // Child process
        close(fd[1]);  // close the writing side of the pipe
        int dim;
        read(fd[0], &dim, sizeof(double)); // read the dimension
        double matrix[dim][dim];  // read the matrix
        read(fd[0], matrix, dim*dim*sizeof(double));
        printf("%d",determinant(dim, matrix));
        close(fd[0]);
    }
    return 0;
} 
```

重要提示：如果大小为负数，则可能存在分段错误或其他问题，因此还要测试 dim 是否为可接受的值。

在示例中我使用了 fgets，因为我不喜欢 scanf，这带来了清除缓冲区的问题。不幸的是，如何清除缓冲区也取决于系统，fflush(stdin) 在 windows 上效果很好，但在 linux 上你必须起诉另一种方法。只要您能够清理输入缓冲区，请随意使用 scanf。

# javascript - 用 jQuery 替换文本

> ID：13229779
> 
> 赞同：0
> 
> 时间：2012-11-05T10:02:49.247
> 
> 标签：javascript, jquery, replace

我正在尝试使用以下代码替换网站上的文本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(function() {
            $(document.body).find('*').each(function() {
                var tmp = $(this).children().remove();
                var text = $(this).text();
                text = text.replace(/Vorname/g, "Firstname");
                $(this).text(text);
                $(this).append(tmp);
            });
        });
    });

</script> 
```

HTML（片段）是这样的（由 SharePoint 生成）：

```
<td style="padding:4px;">
<div>
    <label for="ctl00_IWS_WH_CPH_Content_ContactUsControl1_firstName">
        <span><font color='red'>*</font> Vorname (erforderlich):</span>
    </label>
</div> 
```

上面的 jQuery 代码没有被执行... 对 jQuery 的引用已放在母版页中。

任何线索为什么这不起作用？

问候，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:03:24.630

```
$('.element').text("sometext"); 
```

我认为这是不对的

```
var text = $(this).text();
                text = text.replace(/Vorname/g, "Firstname"); 
```

你应该使用：

```
var text = $(this).text();
    text.replace("Vorname", "Firstname"); 
```

那么你应该更好地记录你的问题，我不明白你真正的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:08:39.423

我发现您正在使用两个文档就绪功能，您必须只使用一个：

```
Either : $(document).ready(function () {

or :     $(function() { 
```

看看这是否有效。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:10:08.883

[工作演示](http://jsfiddle.net/Uf3xQ/30/)

检查 jsfiddle 链接以获取工作代码

```
 $(document).ready(function () {
$(document.body).find('*').each(function() {
                var tmp = $(this).children().remove();
                var text = $(this).text();
                text = text.replace(/Vorname/g, "Firstname");
                $(this).text(text);
                $(this).append(tmp);
            });
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:18:38.483

在您的代码中，您正在剥离一些元素样式。如果您想保持布局，最好使用 html 而不是文本，但这实际上取决于您要查找的内容。

```
$(document).ready(function () {
   $('body').find('*').each(function() {                
       var html= $(this).html().replace(/Vorname/g, "Firstname");
        $(this).html(html);
    });
 }); 
```

# c - 我的 Opencv 应用程序的处理速度非常慢

> ID：13229786
> 
> 赞同：2
> 
> 时间：2012-11-05T10:03:12.110
> 
> 标签：c, visual-c++, image-processing, opencv, video-capture

我正在构建一个 OpenCV 应用程序，该应用程序从相机捕获视频并在移除背景后将其覆盖在另一个视频上。

我无法达到合理的速度，因为它以大约 1 fps 的速度播放输出，而我的背景去除以 3 fps 的速度工作。

有没有办法以正常速度显示背景视频并以 3fps 覆盖处理后的视频？

我尝试注释掉我的代码，我意识到问题主要在于渲染部分本身。我尝试将视频与我的网络摄像头提要一起显示，我注意到当使用 openCV 显示时，视频的实际 fps 和 fps 有所下降。

这是示例代码：

```
 void main()
{
    CvCapture* capture, *Vcap;
    capture = cvCaptureFromCAM(0);
    if(!capture)
    {
        printf("Video Load Error");
    }

    Vcap = cvCaptureFromAVI("bgDemo.mp4");
    //printf("\nEntered BGR");
    if(!Vcap)
    {
        printf("Video Load Error");
    }

    while(1)
    {

        IplImage* src = cvQueryFrame(Vcap);
        if(!src)
        {
            Vcap = cvCaptureFromAVI("bgDemo.mp4");
            continue;
        }
        IplImage* bck1 = cvCreateImage(cvGetSize(src),8,3);
        cvResize(src,bck1,CV_INTER_LINEAR);

        cvShowImage("BCK",bck1);
        cvWaitKey(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T16:10:15.760

主要**问题**是您在循环的每次迭代中都分配了一个新图像，而没有在循环结束时释放它。换句话说，你有一个漂亮的**内存泄漏**。

更好的方法是在循环开始之前简单地抓取视频的一帧。这将使您`bck1`只创建一次具有正确尺寸的东西。

你的代码还有其他问题，我在下面分享一个固定版本，确保你注意每一行代码，看看有什么变化。我还没有时间测试它，但我相信你会弄明白的：

```
int main()
{
    // I know what you are doing, just one capture interface is enough
    CvCapture* capture = NULL; 

    capture = cvCaptureFromCAM(0);
    if(!capture)
    {
        printf("Ooops! Camera Error");            
    }

    capture = cvCaptureFromAVI("bgDemo.mp4");
    if(!capture)
    {
        printf("Ooops! Video Error");
        // if it failed here, it means both methods for loading a video stream failed.
        // It makes no sense to let the application continue, so we return.
        return -1; 
    }

    // Retrieve a single frame from the camera
    IplImage* src = cvQueryFrame(capture);
    if(!src)
    {
        printf("Ooops! #1 cvQueryFrame Error");
        return -1; 
    }

    // Now we can create our backup image with the right dimensions.
    IplImage* bck1 = cvCreateImage(cvGetSize(src),src->depth, src->nChannels);
    if(!bck1)
    {
        printf("Ooops! cvCreateImage Error");
        return -1; 
    }

    while(1)
    {
        src = cvQueryFrame(capture);
        if(!src)
        {
             printf("Ooops! #2 cvQueryFrame Error");  
             break; 
        }

        cvResize(src, bck1, CV_INTER_LINEAR);

        cvShowImage("BCK",bck1);
        cvWaitKey(10);
    }

    cvReleaseImage( &bck1 ); // free manually allocated resource

    return 0;
} 
```

这些修复程序应该会大大加快您的应用程序。

# actionscript-3 - 如何在 ActionScript3 中使用“OpenCV”？

> ID：13229789
> 
> 赞同：0
> 
> 时间：2012-11-05T10:03:14.757
> 
> 标签：actionscript-3, flash, opencv

我想在我的 actionScript 3 代码中使用 OpenCV。

有没有办法这样做？

我有一个坐标列表，可以在蒙版上绘制多边形，

我需要一种方法来增长多边形并缩小它并为其添加羽毛，

使用 OpenCV 函数（我不想使用 AS3 的“规模”）。

这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:15:57.603

你不能在 actionscript-3 中使用 OpenCV，因为 actionscript-3 是一种高级语言，但 openCV 是由 C 语言制作的，它是一种基础语言

# c - 关于 ncurses 中的无输出

> ID：13229794
> 
> 赞同：0
> 
> 时间：2012-11-05T10:03:29.613
> 
> 标签：c, ncurses

我正在使用 ncurses 在主窗口中准备一个简单的菜单，该菜单有 5 个选项，并在箭头键的帮助下选择它们。目前我准备了一个程序，只在屏幕上显示一个只有 5 个选项的菜单，但有些如何输出显示为空白屏幕。请帮助我找出代码中的错误。

```
#include<ncurses.h>
#include<stdlib.h>
//#define ENTER 10
//#define ESCAPE 27

void init_curses()
{initscr();
start_color();
init_pair(1,COLOR_WHITE,COLOR_BLUE);
init_pair(2,COLOR_BLUE,COLOR_WHITE);
init_pair(3,COLOR_RED,COLOR_WHITE);
curs_set(0);
noecho();
keypad(stdscr,TRUE);
}

void draw_mainmenu(WINDOW *mainmenu)
{ wbkgd(mainmenu,COLOR_PAIR(2));
  waddstr(mainmenu, "HELLO THIVNENT");
  move(1,0);
  waddstr(mainmenu, "HELLO THIVNENT 1");
move( 2,0);
  waddstr(mainmenu, "HELLO THIVNENT 2");
move( 3,0);
  waddstr(mainmenu, "HELLO THIVNENT 3");
move( 4,0);
  waddstr(mainmenu, "HELLO THIVNENT 4");
move( 5,0);
  waddstr(mainmenu, "HELLO THIVNENT 5");
wattroff(mainmenu,COLOR_PAIR(3));
}

int main()
{
  int key;
  WINDOW *mainmenu;
  init_curses();
  bkgd(COLOR_PAIR(1));
  mainmenu=subwin(stdscr,1,80,0,0);
  draw_mainmenu(mainmenu);
sleep(3);
refresh();

delwin(mainmenu);
endwin();
return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:19:30.600

`refresh()`之前打电话`sleep()`

```
refresh();
sleep(3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:20:20.350

您的代码完全正确。问题是该`sleep(3)`功能被放置在`refresh()`3 秒后导致刷新之前，并且您立即尝试删除该窗口，当然您将无法看到它。有两种方法可以解决这个问题。

*   修复问题后删除`sleep(3)`并插入一个。该窗口现在将一直停留，直到您按下一个键 3 秒钟。`getch()``refresh()`
*   放置`sleep(3)`后`refresh()`

# c# - 如何在 C# 中将字符串日期：“Mon Nov 12 08:00:00 ICT 2012”转换为“dd/MM/yyyy HH:mm:ss”格式

> ID：13229796
> 
> 赞同：0
> 
> 时间：2012-11-05T10:03:33.083
> 
> 标签：c#, datetime

这是我的转换方式，但它不起作用：

```
 string date = "Mon Nov 12 08:00:00 ICT 2012";
 DateTime dateConvert = 
          DateTime.ParseExact(date, 
                              "dd/MM/yyyy HH:mm:ss", 
                              System.Globalization.CultureInfo.InvariantCulture);

 Console.WriteLine(dateConvert); 
```

那么，如何转换呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:07:56.687

您的 DateTime.ParseExact 格式字符串应该是`ddd MMM dd HH:mm:ss 'ICT' yyyy`

有关 DateTime 格式字符串的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:17:56.860

```
string date = "Mon Nov 12 08:00:00 ICT 2012";

DateTime d = DateTime.ParseExact(date, "ddd MMM dd HH:mm:ss ICT yyyy", null);

Console.WriteLine(d.ToString("dd/MM/yyyy HH:mm:ss")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:06:39.297

PARSE EXACT 意味着你告诉它期望：

```
dd/MM/yyyy HH:mm:ss 
```

但是您的输入字符串不是那种格式！！！

你需要类似的东西：

```
 ddd MMM dd HH:mm:ss \I\C\T yyyy 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:07:57.013

你错了，你提供给 DateTime.ParseExact 的格式应该是传入的日期字符串的格式，而不是你想要的格式。

尝试类似：

```
string date = "Mon Nov 12 08:00:00 ICT 2012";
DateTime dateConvert = DateTime.ParseExact(date, "ddd MMM dd HH:mm:ss 'ICT' yyyy", null);
Console.WriteLine(dateConvert.ToString("dd/MM/yyyy HH:mm:ss")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T10:50:04.870

谢谢大家的关心！这是我的解决方案，它的工作很酷！

```
DateTime dateTime = DateTime.ParseExact("Mon Nov 12 08:00:00 ICT 2012", "ddd MMM dd HH:mm:ss ICT yyyy", CultureInfo.InvariantCulture);
            Console.WriteLine(dateTime.ToString("MM/dd/yyyy")); 
```

# android - android中的文本到语音功能

> ID：13229797
> 
> 赞同：0
> 
> 时间：2012-11-05T10:03:41.077
> 
> 标签：android, text-to-speech

在android中需要文本到语音功能的帮助。如果没有安装语音文件，你需要为你的设备安装语音合成引擎。我的要求是在后台处理该安装而不提示用户通过去android市场手动安装它，这是现在的一般情况..

现在我正在做的是将语音合成引擎 apk 放在资产文件夹中并尝试从那里安装它，但我收到“问题解析包”错误。我能得到什么方向吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:19:50.510

创造

```
textToSpeech = new TextToSpeech(context, this); 
```

在实现 OnInitListener 接口时。在 onInit 方法中执行以下操作：

```
public void onInit(int status)
{
    if (status == TextToSpeech.SUCCESS)
    {
    } else
    { // Initialization failed. Alert to the user
    }
} 
```

您不必自己安装任何东西。如果未安装 TTS 或您的手机上有多个 TTS 系统，则会启动相应的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:39:01.710

也许您可以找到一种使用此项目安装语言数据的方法：（这似乎与官方版本使用的代码相同）

[http://code.google.com/p/eyes-free/downloads/detail?name=com.svox.langpack.installer_1.0.1.apk&can=2&q=](http://code.google.com/p/eyes-free/downloads/detail?name=com.svox.langpack.installer_1.0.1.apk&can=2&q=)

也就是说：我建议您不要尝试隐藏语音数据安装。

在 Android 4.2 中，语言数据处理不需要进入市场，所以您的困难可能会消失。

官方的 Android 方式可能会更新，并有更多的语言。

# ms-access - ms-access 查询

> ID：13229802
> 
> 赞同：0
> 
> 时间：2012-11-05T10:03:52.663
> 
> 标签：ms-access

我从来没有真正做过 ms 访问查询，但今天我需要一个。我有 2 张桌子、模型和订单。从第一个表开始，这里有 2 个字段感兴趣：数字和颜色，从第二个数字开始，它只能等于表 "models" 中的数字值。我需要的是选择最常见的颜色。在 mysql 中会是这样的

```
 SELECT models.color, orders.number  FROM  models
    INNER JOIN orders ON (orders.number =models.number) 
    group by color
    order by count(color) desc limit 1 
```

但是在 ms-access 中似乎不起作用你如何编写查询以在 ms-access 中做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:08:44.630

试试这个：

```
SELECT TOP 1 models.color, COUNT(orders.number)  FROM  models
INNER JOIN orders ON (orders.number=models.number) 
GROUP BY models.color
ORDER BY 2 desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T10:07:14.587

您只需要摆脱限制并使用 Top 1 代替：

```
SELECT Top 1 models.color  FROM  models
INNER JOIN orders ON (orders.number =models.number) 
group by color
order by count(color) Desc 
```

*但是，Top n*有一个警告，在 MS Access 中，Top *n*将返回匹配项，因此如果多个项目具有相同的计数，则将全部返回。如果这不适合，您也可以通过按唯一 ID 排序来解决此问题：

```
order by count(color) desc, OrderID 
```

另请注意，数字是保留字。

# android - OnClickListener 用于列表视图？

> ID：13229806
> 
> 赞同：-2
> 
> 时间：2012-11-05T10:04:08.747
> 
> 标签：android, listview, dialog

如何插入`OnClickListener`列表视图？当我单击一个项目时，我想显示一个带有两个按钮“是”和“否”的警报对话框。

```
private void loadListViewData() {
    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
    List<String> lables = db.getAllLabels();

    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(
        this,
        android.R.layout.simple_dropdown_item_1line,
        lables);

    listview.setAdapter(dataAdapter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:07:28.127

如果要在 item 上设置 Click Listener，然后`setOnItemClickListener`在 listview 上使用 , ，使用此方法您也可以访问单击 item 的位置，只需执行以下操作：

```
listView.setOnItemClickListener(new OnItemClickListener(){
    @Override
    public void onItemClick(AdapterView adapterView, View convertView, int position, long id)
    {
         //Do some operation
    }
}); 
```

# android - Android URL 从示例中获取和解析 - 错误

> ID：13229807
> 
> 赞同：0
> 
> 时间：2012-11-05T10:04:09.280
> 
> 标签：android

我正在尝试一个简单的例子：[http ://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

但是出现错误.. 谁能告诉我为什么会出现此错误： http: [//puu.sh/1mGz1](http://puu.sh/1mGz1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:10:32.343

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) 从 UI Thread 发出服务器请求，因此将代码更改为：

```
 ///Your code...
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new LongOperation().execute("");
      }

    private class LongOperation extends AsyncTask<String, Void, String> {

          @Override
          protected String doInBackground(String... params) {
                //call readtwitterFeed() method here
                String readtwitterFeed=readtwitterFeed(); 

                return readtwitterFeed;
          }      

          @Override
          protected void onPostExecute(String result) {      
                try {
                  JSONArray jsonArray = new JSONArray(result);
                  Log.i(ParseJSON.class.getName(),
                      "Number of entries " + jsonArray.length());
                  for (int i = 0; i < jsonArray.length(); i++) {
                    JSONObject jsonObject = jsonArray.getJSONObject(i);
                    Log.i(ParseJSON.class.getName(), jsonObject.getString("text"));
                  }
                } catch (Exception e) {
                  e.printStackTrace();
                }     
          }

          @Override
          protected void onPreExecute() {
          }

          @Override
          protected void onProgressUpdate(Void... values) {
          }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:10:14.727

您正在尝试在主线程上发出数据请求。使用[AsyncTask](https://stackoverflow.com/a/9671602/1503155)来完成。
或者在 onCreate() 方法中添加这 2 行来绕过它。

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

我建议使用 asynctask。

# networking - 如何解析 CISCO IPS 配置？

> ID：13229810
> 
> 赞同：-1
> 
> 时间：2012-11-05T10:04:12.170
> 
> 标签：networking, network-programming, firewall, cisco, network-security

我需要一个工具或脚本来解析 Cisco IPS 配置，我知道有一个名为 nipper 的工具用于解析防火墙和交换机配置，但我不支持 Cisco IPS，我 google 了它但没有好的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:05:34.700

你应该使用[`ciscoconfparse`](http://www.pennington.net/py/ciscoconfparse/).

以下示例使用下面的 Cisco 配置...我不能使用 IPS 配置，除非 OP 发布...这使用 Cisco IOS 配置...

以下脚本将从中加载配置文件`/tftpboot/bucksnort.conf`并用于`CiscoConfParse.find_lines()`解析它以获取所有串行接口的名称。注意`^`搜索字符串开头的符号是正则表达式；`^interface Serial`告诉`python`将其搜索限制在以 . 开头的行`interface Serial`。

```
[mpenning@typo tmp]$ python
Python 2.6.6 (r266:84292, Sep 11 2012, 08:34:23)
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from ciscoconfparse import CiscoConfParse
>>> parse = CiscoConfParse("/tftpboot/bucksnort.conf")
>>> serial_intfs = parse.find_lines("^interface Serial")
>>>
>>> serial_intfs
['interface Serial1/0', 'interface Serial1/1', 'interface Serial1/2']
>>>
>>> qos_intfs = parse.find_parents_w_child( "^interf", "service-policy output QOS_1" )
>>> qos_intfs
['interface Serial1/1'] 
```

* * *

```
! Filename: /tftpboot/bucksnort.conf
!
policy-map QOS_1
 class GOLD
  priority percent 10
 class SILVER
  bandwidth 30
  random-detect
 class default
!
interface Ethernet0/0
 ip address 1.1.2.1 255.255.255.0
 no cdp enable
!
interface Serial1/0
 encapsulation ppp
 ip address 1.1.1.1 255.255.255.252
!
interface Serial1/1
 encapsulation ppp
 ip address 1.1.1.5 255.255.255.252
 service-policy output QOS_1
!
interface Serial1/2
 encapsulation hdlc
 ip address 1.1.1.9 255.255.255.252
!
class-map GOLD
 match access-group 102
class-map SILVER
 match protocol tcp
!
access-list 101 deny tcp any any eq 25 log
access-list 101 permit ip any any
!
access-list 102 permit tcp any host 1.5.2.12 eq 443
access-list 102 deny ip any any
!
logging 1.2.1.10
logging 1.2.1.11
logging 1.2.1.12 
```

# networking - 如何模拟具有 pcap 文件的网络流量？我要建立测试机制

> ID：13229811
> 
> 赞同：1
> 
> 时间：2012-11-05T10:04:12.163
> 
> 标签：networking, network-programming, wireshark, pcap

我正在使用 VPN android 服务。由于该服务，我需要处理系统上的所有网络流量。有时会出现问题，所以我开始想根据早期记录的 pcap 文件创建可以模拟真实网络的测试机制。

有可能吗？我应该使用哪些工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-07T11:50:23.973

我认为“tcpreplay”适合你。有用的链接：[http ://tcpreplay.synfin.net/wiki/usage](http://tcpreplay.synfin.net/wiki/usage)

# jquery - 淘汰赛中的自动完成扩展器

> ID：13229816
> 
> 赞同：0
> 
> 时间：2012-11-05T10:04:25.267
> 
> 标签：jquery, knockout.js

我想要一个 autocomplete_extender 文本框。我编写了如下代码：

```
 //For autocomplete extender 
$(function () {
    $('.tags').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "GoalSheet2.aspx/GetAllMentoredMembers",
                data: "{ 'prefixText': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response(data.d);

                    self.LoadGoal();
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert('error occured while autocomplete');
                }
            });
        },
        minlength: 2,
    });
}); 
```

但在这里我使用 jquery 自动完成。我想知道在淘汰赛中有什么办法吗？选择一个值后，我想获得该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:15:59.857

您可以创建自定义绑定并在绑定中应用您的自动完成功能。

有关如何实现自定义绑定的更多详细信息，请阅读此处[http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

您还可以阅读我的文章，其中我描述了如何通过自定义绑定附加 jquery datepicker，但它是用俄语编写的。尝试用谷歌翻译它或只是查看 jsfiddle 中的代码，也许它会帮助你[http://www.delmadman.blogspot.com/2012/01/jquery-datepicker-c-knockoutjs.html](http://www.delmadman.blogspot.com/2012/01/jquery-datepicker-c-knockoutjs.html)

# android - Android：TextView 无法获得焦点

> ID：13229824
> 
> 赞同：2
> 
> 时间：2012-11-05T10:04:51.250
> 
> 标签：android, focus, textview

我无法弄清楚一个非常愚蠢的问题`TextView`！我有一个带有 a`Button`和 a的简单布局`TextView`。这是布局：

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Button1" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"
    android:focusable="true"
    android:clickable="true"
    android:text="TextView1"
    android:textAppearance="?android:attr/textAppearanceMedium"/> 
```

当按钮有焦点并且我在模拟器中按下“向下箭头”时，TextView 没有获得焦点（它不会变成蓝色！！）为什么？请帮我！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:48:08.323

尽管 TextView 没有变成蓝色，但它正在获得焦点。

要查看发生的焦点/不焦点，例如，您可以在文本中定义颜色变化。这样，这些事件对用户来说是可感知的。

创建一个 .xml 文件并放入 /res/color/ 在我的例子中，我将该文件命名为“color_text_view.xml”。

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
      <item android:state_focused="true" android:color="#00FF00"/>
      <item android:color="#FF00FF"/>
    </selector> 
```

并将其添加`android:textColor="@color/color_text_view"`到文本视图。

```
<TextView
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_below="@+id/button1"
android:focusable="true"
android:clickable="true"
android:text="TextView1"
android:textAppearance="?android:attr/textAppearanceMedium"
android:textColor="@color/color_text_view"/> 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:22:25.023

看看如果你想将你的文本设置为焦点，那么你的`code is true`. 您的文字处于焦点模式，但颜色不能改变。

如果您更改颜色，那么它将直接设置，因为您已经在 XML 中设置了焦点。所以当应用程序启动时 TextView 已经处于聚焦模式，所以颜色会改变。

# c++ - C++ 和 Python 之间的无缓冲通信

> ID：13229825
> 
> 赞同：0
> 
> 时间：2012-11-05T10:04:57.997
> 
> 标签：c++, python, pipe, popen, unbuffered

我想在 Linux 中将数据从 C++ 传递到 Python，我通过管道完成此操作。我的 C++ 程序如下所示：

```
#include<iostream>
#include<stdio.h>
#include<sstream>
#include<math.h>

int main() {
    FILE *cmd;

    std::ostringstream ss;
    double val;

    cmd = popen("python plot.py","w");
    for (int i=0; i<100; i++) {
        val = cos(3.14159*i/40);
        ss.str("");
        ss << val << std::endl;
        fputs(ss.str().c_str(),cmd);
        fflush(cmd);
    }
    fputs("\n",cmd);
    fflush(cmd);
    pclose(cmd);
    return 0;     
} 
```

对应的 python 函数 plot.py 如下所示：

```
fig, = plt.plot([],[])
index = 0
plt.ion()
while True:
    data = sys.stdin.readline().strip()
    if not data:
        plt.ioff()
        break
    index = index + 1
    val = [float(n) for n in self.data.split()]

    fig.set_xdata(numpy.append(fig.get_xdata(),index))
    fig.set_ydata(numpy.append(fig.get_ydata(),val))
    axis = list(plt.axis())
    min_x = 0      
    max_x = max(self.fig.get_xdata())
    min_y = min(self.fig.get_ydata())
    max_y = max(self.fig.get_ydata())
    axis[0] = min_x
    axis[1] = max_x
    axis[2] = min_y
    axis[3] = max_y
    plt.axis(axis)
    plt.draw()
plt.show() 
```

现在我的问题是，在将数据传递给 python 函数之前，我的 c++ 函数中似乎有数据缓冲，我无法摆脱它。我一直在寻找解决方案，但找不到任何解决方案。我能找到的最好的建议是在 c++ 函数中使用 setvbuf，所以我还尝试在 c++ 函数中包含以下行

```
setvbuf(cmd,NULL,_IONBUF,0) 
```

但这没有任何影响。

有谁知道我如何以无缓冲的方式将数据从我的 c++ 函数传递给 python？

# ldap - 使用 jackrabbit 配置 LDAP 以进行身份 验证

> ID：13229830
> 
> 赞同：4
> 
> 时间：2012-11-05T10:05:10.783
> 
> 标签：ldap, jackrabbit

[我对jackrabbit](http://jackrabbit.apache.org)和 LDAP没有太多经验。我正在尝试通过 LDAP 对 jcr 用户进行身份验证。

这是如何工作的任何来源？

我已经`repository.xml`像这样配置了我的文件：

```
<Security appName="Jackrabbit">
    <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager"
        workspaceName="security">
    </SecurityManager>

    <AccessManager
        class="org.apache.jackrabbit.core.security.DefaultAccessManager">
    </AccessManager>
    <LoginModule class="com.sun.security.auth.module.LdapLoginModule">
        <param name="userProvider" value="ldap://localhost:10389/o=sm" />
        <param name="authIdentity" value="uid={USERNAME}, ou=users, o=sm" />
        <param name="useSSL" value="false" />
        <param name="debug" value="true" />
    </LoginModule>
</Security> 
```

当我运行应用程序时，出现以下异常：

```
javax.security.auth.login.LoginException: Configured bean implementat
ion class com.sun.security.auth.module.LdapLoginModule was not found. 
```

知道这里出了什么问题吗？

# beautifulsoup - 使用 beautifulsoup 在 html 元素中获取数据

> ID：13229834
> 
> 赞同：1
> 
> 时间：2012-11-05T10:05:24.487
> 
> 标签：beautifulsoup

到目前为止，我已经这样做了：

```
import urllib2,re,time
from bs4 import BeautifulSoup
base_url="http://nairobinow.wordpress.com/"
rawEventsData=urllib2.urlopen(base_url).read()
rawEventssoup = BeautifulSoup(rawEventsData)
events=rawEventssoup.findAll("div", {"id": re.compile(r'post-[\d+]')}) 
```

现在我想在标签、地点和日期之后获取数据。这是事件块（只是迭代部分之一）：

```
<div class="post-17149 post type" id="post-17149">
<h2><a href="http://nairobinow.wordpress.com/2012/11/05/out/">Out of Town: Lamuest</a> 
</h2><p>u
Dates: November 15-18, 2012<br/>
Venue: Lamu</p>
<p>Accommodation information: <a href="http://.../index.html"target="_blank"  
>http://www.lamu.org/index.html</a></p></div> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:56:31.403

如果我正确理解您的问题，听起来您对`<p>`标签中的数据感兴趣。如果这是正确的...

如果您还不知道，请`.findAll()`返回一个列表。在这种情况下，任何`div`具有相应的`id`都将被返回。

您需要做的就是迭代`events`：

```
for event in events:
    print event('p')[0] 
```

这将返回：

```
<p>u Dates: November 15-18, 2012<br/> Venue: Lamu</p> 
```

用于`.contents`删除标签。请注意，`.contents`将根据其索引调用文本。即：`.contents[0]`可能会返回`Dates: November 15-18,`，而`.contents[1]`可能会返回`Venue: Lamu`。

你应该玩弄这个并找到适合你需要的东西。我希望这回答了这个问题，它有点模糊，但无论如何我都会试一试。

# iphone - UILable中带有属性字符串的超链接文本

> ID：13229838
> 
> 赞同：0
> 
> 时间：2012-11-05T10:05:44.070
> 
> 标签：iphone, uilabel, nsattributedstring

我想通过在`UILabel`.

我已经搜索过，但没有得到任何正确的结果。

是否可以使用属性字符串显示带有超链接的文本`UILabel`？

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T09:13:19.173

看看[DTCoreText](https://github.com/Cocoanetics/DTCoreText) 将他们的库导入你的项目。进而：

在您的 ViewController 中导入这些类

```
#import <NSAttributedString+HTML.h>
#import <DTCoreText/DTCoreTextConstants.h> 
```

并执行以下操作：

```
NSData *HTMLData = [htmlString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *optionsDictionary = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], DTUseiOS6Attributes,  @"your-fontName" ,  DTDefaultFontFamily, @(12), DTDefaultFontSize, nil];

NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithHTMLData:HTMLData options:optionsDictionary documentAttributes:nil];

[infoBodyLabel setAttributedText:attrString]; 
```

你完成了！

# c# - 如何将此 T-Sql 转换为 linq

> ID：13229840
> 
> 赞同：-7
> 
> 时间：2012-11-05T10:06:01.687
> 
> 标签：c#, linq

我写这个 tsql 查询

```
((SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[StCode]
      ,[PlanCode]
      ,[MIN]
      ,[MAX]
      ,[LastDateConsum]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[TypeRequest]
      ,[HeaderId]
  FROM [MyMaterialDB].[dbo].[Report2]
  WHERE headerid IN(SELECT HeaderId FROM [MyMaterialDB].[dbo].[Report2] WHERE line='I'))

  Order by Mesc,Line,unit 
```

我想将其转换为 linq，但我是 linq 的 biginet，请帮助我。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:13:56.107

除非是拼写错误，否则不需要内部选择：

```
SELECT [Id], [Mesc], <etc>
  FROM [MyMaterialDB].[dbo].[Report2]
  WHERE line='I'
  ORDER BY Mesc,Line,unit 
```

所以你的 LINQ 会是这样的：

```
report2
  .Select(x => new { x.Id, x.Mesc, <etc> })
  .Where(x => x.line == "I")
  .OrderBy(x => x.Mesc)
  .ThenBy(x => x.Line)
  .ThenBy(x => x.unit) 
```

（注意我的头顶 - 可能需要稍微纠正）。

# android - 科尔多瓦阿帕奇上的字体系列更改

> ID：13229841
> 
> 赞同：1
> 
> 时间：2012-11-05T10:06:03.597
> 
> 标签：android, cordova

似乎字体系列 css 更改不适用于 Android 中的 Apache Cordova/phonegap。但是普通浏览器对此没有问题，有什么解决方法吗？我已经完全没有办法了。

```
 var y = "Comic Sans MS";

    $(function () {
        $("#changecss").click(function () {
            $('#header').css("font-family", y );
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:55:02.447

如果我没记错的话，Android 上默认只有 3 种字体可用。如果您想包含不同的字体，它需要是 TrueType 字体，并且您必须自己引用字体文件。

[http://www.brianhadaway.com/font-face-declarations-on-android-devices/](http://www.brianhadaway.com/font-face-declarations-on-android-devices/)

# iphone - 打开 CV 图像效果

> ID：13229843
> 
> 赞同：-1
> 
> 时间：2012-11-05T10:06:15.970
> 
> 标签：iphone, ios, image-processing, opencv

我在目标C中使用openCV。我想将图像转换为黑白，我已经完成了，但是我的输出黑白图像不清晰，图像上有黑色阴影。

任何人都可以帮忙吗？

```
- (IBAction)blackAndWhite:(id)sender {

imageView.image=orignalImage;

cv::Mat  dst;

cv::Mat src=[self cvMatFromUIImage:imageView.image];

if( !src.data )
{ cout<<"Usage: ./Histogram_Demo <path_to_image>"<<endl;
}

/// Convert to grayscale
cvtColor( src, src, CV_BGR2GRAY );

/// Apply Histogram Equalization
equalizeHist( src, dst );

imageView.image =[self UIImageFromCVMat:dst];

} 
```

谢谢

原图：

![在此处输入图像描述](../Images/831c07d2d4a106da011a075d862c260d.png)

黑白图像：

![在此处输入图像描述](../Images/dcf12b5724db809ac31e3fc6d8808340.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:01:46.120

首先，您拥有的图像输出不是黑白（二进制）图像。这是一个灰度图像。

此灰度图像是具有 256 种颜色（0-255）的单通道图像，而二值图像中只有 0（黑色）或 255（白色）。

您可以使用阈值（cvThreshold）将其从灰度转换为二进制。有许多可用的二值化算法也可以帮助您实现所需的目标。局部二值化方法的适应性更强，也可以帮助去除部分阴影区域。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:20:56.540

研究伽玛**校正**。我假设在这种情况下需要调整伽马值以适应图像中线条的对比度。因为它是一个模糊的图像，你也会发现一些麻烦，我想。你可能还想增加一些对比度，当你在做的时候。

**链接：**

[了解伽马校正](http://www.cambridgeincolour.com/tutorials/gamma-correction.htm)

[维基百科 - 伽玛校正](http://en.wikipedia.org/wiki/Gamma_correction)

[OpenCV 伽玛校正 (C++)](http://vaamarnath.wordpress.com/2011/02/23/opencv-gamma-correction/)

[改变图像的对比度和亮度 - OpenCV](http://docs.opencv.org/doc/tutorials/core/basic_linear_transform/basic_linear_transform.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:58:42.850

好吧，我不知道为什么已经有 3 个答案而且没有一个是正确的。

为什么将图像转换为灰度后应用*图像均衡？*没有它的输出如下：

![在此处输入图像描述](../Images/7b223bde05360cc0456f4418bdada903.png)

[在这里](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_equalization/histogram_equalization.html)您可以阅读有关直方图均衡化的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:02:59.723

正如已经指出的那样，您并没有真正对图像进行二值化，而是将其转换为灰度。您可以使用二值化，`cv::threshold`但由于示例图像中的照明存在强烈的伪影，您最好使用[cv::adaptiveThreshold](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=adaptivethreshold#cv2.adaptiveThreshold)确定局部阈值。

这是[一个有用的链接](http://www.leptonica.com/binarization.html)，它解释了在非均匀照明条件下的二值化。

C++ 中的示例程序：

```
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <cstdlib>

int
main(int argc, char **argv)
{

  cv::Mat image = cv::imread(argv[1], CV_LOAD_IMAGE_GRAYSCALE);
  assert(!image.empty());

  cv::Mat binary;
  cv::adaptiveThreshold(image, binary, 255, CV_ADAPTIVE_THRESH_MEAN_C, CV_THRESH_BINARY, 5, 7);

  cv::imshow("Orig", image);
  cv::imshow("Binary", binary);
  cv::waitKey(0);
  cv::imwrite("binary.png", binary);

  return EXIT_SUCCESS;

} 
```

结果： ![在此处输入图像描述](../Images/cf55b4d7a14a3beadcd840d070761d65.png)

# phalcon - 文档中有错误吗？我不知道

> ID：13229848
> 
> 赞同：0
> 
> 时间：2012-11-05T10:06:33.700
> 
> 标签：phalcon, phalcon-orm

[http://docs.phalconphp.com/en/0.6.0/reference/phql.html](http://docs.phalconphp.com/en/0.6.0/reference/phql.html)

使用示例

为了更好地解释 PHQL 的工作原理，请考虑以下示例。我们有两个模型“汽车”和“品牌”：

```
<?php
    class Cars extends Phalcon\Mvc\Model
    {
        public $id;

        public $name;

        public $brand_id;

        public $price;

        public $year;

        public $style;

        /**
        * This model is mapped to the table sample_cars
        */
        public function getSource()
        {
            return 'sample_cars';
        }

        /**
         * A car only has a Brand, but a Brand have many Cars
         */
        public function initialize()
        {
            $this->belongsTo('brand_id', 'Brands', 'id');
        }
    } 
```

每辆车都有一个品牌，所以一个品牌有很多车：

```
<?php
    class Brands extends Phalcon\Mvc\Model
    {
        public $id;

        public $name;

        /**
         * The model Brands is mapped to the "sample_brands" table
         */
        public function getSource()
        {
            return 'sample_brands';
        }

        /**
         * A Brand can have many Cars
         */
        public function initialize()
        {
            $this->hasMany('id', 'Brands', 'brand_id'); // here
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:52:14.703

你是对的。关系应该`hasMany`就`Cars`没有了`Brands`。更正后的示例如下

[http://docs.phalconphp.com/en/latest/reference/phql.html](http://docs.phalconphp.com/en/latest/reference/phql.html)

```
<?php

class Cars extends Phalcon\Mvc\Model
{
    public $id;

    public $name;

    public $brand_id;

    public $price;

    public $year;

    public $style;

   /**
    * This model is mapped to the table sample_cars
    */
    public function getSource()
    {
        return 'sample_cars';
    }

    /**
     * A car only has a Brand, but a Brand have many Cars
     */
    public function initialize()
    {
        $this->belongsTo('brand_id', 'Brands', 'id');
    }
} 
```

每辆车都有一个品牌，所以一个品牌有很多车：

```
<?php

class Brands extends Phalcon\Mvc\Model
{

    public $id;

    public $name;

    /**
     * The model Brands is mapped to the "sample_brands" table
     */
    public function getSource()
    {
        return 'sample_brands';
    }

    /**
     * A Brand can have many Cars
     */
    public function initialize()
    {
        $this->hasMany('id', 'Cars', 'brand_id');
    }
} 
```

# ios - iOS：如何将 UIView 的自绘内容转换为图像（普遍的通用解决方案返回空白图像）？

> ID：13229852
> 
> 赞同：2
> 
> 时间：2012-11-05T10:06:45.233
> 
> 标签：ios, ios5, uiview, uiimage, signature

我的业务应用程序需要一项功能，让用户`UIView`用手指在 a 上绘制签名并保存（通过单击工具栏中的按钮），以便将其附加到单元上。这些单元将在工作完成后上传到服务器，并且已经支持通过 Base64 上传的相机图片附件，所以我只想将签名转换为`UIImage`.

首先，我需要一个解决方案来绘制签名，我很快从 Apple 找到了一些似乎符合我要求的示例代码：[GLPaint](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html)

由于我使用 ARC 和 Storyboards 并且不想要声音效果和调色板等，因此我将这个示例代码集成到我的项目中，并稍作修改，但绘图代码是直接复制的。

集成似乎是成功的，因为我能够在视图上绘制签名。因此，下一步是为绘制的签名添加保存/图像转换功能。

我进行了无休止的搜索并滚动了数十个具有类似问题的线程，其中大多数都指向完全相同的解决方案：

（假设）

*   **drawingView**：`UIView`绘制完成的子类。）
*   `<QuartzCore/QuartzCore.h>`并且`QuartzCore.framework`包括在内
*   `CoreGraphics.framework`已经包括了
*   `OpenGLES.framework`已经包括了

    ```
    - (void) saveAsImage:(UIView*) drawingView
    {
        UIGraphicsBeginImageContext(drawingView.bounds.size);
        [drawingView.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *image = UIGraphicsGetImageFromCurrentContext();
        UIGraphicsEndImageContext();
    } 
    ```

*最后是我的问题：*这段代码对我不起作用，因为它**总是返回一个空白图像**。由于我已经集成了对使用 iPhone 相机拍摄的图片附件的支持，我最初假设图像处理代码也应该适用于签名图像。

但是.. 经过一番毫无结果的搜索后，我放弃了这个假设，采用了原始的 GLPaint 项目，只添加了上面的几行代码和一些只显示图像的代码，它也是完全空白的。因此，要么是该代码无法处理`UIView`s 上的自绘内容，要么是我缺少的任何内容。

我对这个问题基本上没有想法，希望有人能帮助我。

最好的问候菲利克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:37:20.603

我相信您的问题可能是您试图从 GL 上下文中获取图像。您可能会在网上搜索，但通常您只需要在所有“draw”调用完成后调用“glReadPixels”。这样的事情应该可以工作：

```
BOOL createSnapshot;
int viewWidth, viewHeigth;
if(createSnapshot) {
    uint8_t *iData = new uint8_t[viewHeigth * viewWidth * 4];
    glReadPixels(0, 0, viewWidth, viewHeigth, GL_RGBA, GL_UNSIGNED_BYTE, iData);

    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, iData, (viewWidth * viewHeigth * 4), NULL);
    CGColorSpaceRef cref = CGColorSpaceCreateDeviceRGB();
    CGImageRef cgImage = CGImageCreate(viewWidth, viewHeigth, 8, 32, viewWidth*4, cref, kCGBitmapByteOrderDefault, provider, NULL, NO, kCGRenderingIntentDefault);

    UIImage *ret = [UIImage imageWithCGImage:cgImage scale:1.0f]; //the image you need

    CGImageRelease(cgImage);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(cref);
    delete [] iData;

    createSnapshot = NO;
} 
```

如果您使用多重采样，则需要在解析缓冲区并绑定呈现帧缓冲区后调用它。

# pivot - 更改绑定源时 WP8 枢轴重叠

> ID：13229855
> 
> 赞同：1
> 
> 时间：2012-11-05T10:07:00.017
> 
> 标签：pivot, windows-phone-8

当我在`Windows Phone 8 SDK`.

枢轴绑定到一个名为的列表`Students`并在单击它时设置一个按钮，将新建一个新的学生对象并将其设置`Students[2]`为新值。这导致了下面屏幕截图中显示的重叠问题。有没有其他人遇到过这个问题`WP8 SDK`？

这是代码

```
 public MainPage()
    {
        InitializeComponent();
        this.DataContext = this;

        // Sample code to localize the ApplicationBar
        //BuildLocalizedApplicationBar();
        InitiList();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        int index = 2;
        Students[index] = new Student();
        Students[index].Name = "tian";
        Students[index].College = "shida";
    }

    private ObservableCollection<Student> _students;
    public ObservableCollection<Student> Students
    {
        get { return _students; }
        set
        {
            _students = value;
            RaisePropertyChanged("Students");
        }
    }

    private void InitiList()
    {
        Students = new ObservableCollection<Student>();
        Students.Add(new Student { Name="a",College="aa"});
        Students.Add(new Student { Name = "b", College = "aa" });
        Students.Add(new Student { Name = "c", College = "aa" });
        Students.Add(new Student { Name = "d", College = "aa" });
        Students.Add(new Student { Name = "e", College = "aa" });
    } 
```

检查这个 o/p 图像：

![在此处输入图像描述](../Images/cb7b8ed3716568ef7687c47b7560c9b6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:35:52.003

您正在修改学生，但 RaisePropertyChanged 没有被解雇，因为访问学生不会触发 Set，它调用 RaisePropertyChanged。这可能是问题所在，我现在无法测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:37:48.407

我遇到了同样的问题，我通过将项目添加到构造函数中的 ObservableCollection 而不是使用 Add 方法来修复它。这似乎是 ObservableCollection 类的一个错误。尝试将您的代码更改为：

```
 private void InitiList()
{
    Students = new ObservableCollection<Student>(new [] {
    new Student { Name="a",College="aa"}),
    new Student { Name = "b", College = "aa" }),
    new Student { Name = "c", College = "aa" }),
    new Student { Name = "d", College = "aa" }),
    new Student { Name = "e", College = "aa" })
    });
} 
```

# java - 带有 HBase 数据存储的 JPA2 使用 Datanucleus 写入重复行

> ID：13229856
> 
> 赞同：0
> 
> 时间：2012-11-05T10:07:02.010
> 
> 标签：java, jpa-2.0, hbase, datanucleus, kundera

我正在创建简单的 Java Web 应用程序，该应用程序通过 JPA2（使用 Datanucleus）将一行数据写入 HBase 表，一切正常，除了它写入 2 个重复的行而不是只写入 1 行

结果

```
ROW                                        COLUMN+CELL                                                                                                              
 402881813acfed78013acfed78e00000          column=ACCOUNT_TABLE:FIRSTNAME, timestamp=1352108207916, value=testname                                                     
 402881813acfed78013acfed78e00000          column=ACCOUNT_TABLE:ID, timestamp=1352108207916, value=402881813acfed78013acfed78e00000                                 
 402881813acfed78013acfed78e00000          column=ACCOUNT_TABLE:LASTNAME, timestamp=1352108207916, value=testname2                                                     
 402881813acfed78013acfed78e00000          column=ACCOUNT_TABLE:LEVEL, timestamp=1352108207916, value=\x00\x00\x00\x03                                              
 402881813acfed78013acfedf7e20001          column=ACCOUNT_TABLE:FIRSTNAME, timestamp=1352108210172, value=testname                                                     
 402881813acfed78013acfedf7e20001          column=ACCOUNT_TABLE:ID, timestamp=1352108210172, value=402881813acfed78013acfedf7e20001                                 
 402881813acfed78013acfedf7e20001          column=ACCOUNT_TABLE:LASTNAME, timestamp=1352108210172, value=testname2                                                     
 402881813acfed78013acfedf7e20001          column=ACCOUNT_TABLE:LEVEL, timestamp=1352108210172, value=\x00\x00\x00\x03                                              
2 row(s) in 0.1270 seconds 
```

pom.xml 中的 Datanucleus 版本

```
<org.datanucleus-version>3.1.1</org.datanucleus-version> 
```

pom.xml 中的依赖项

```
 <dependencies>
        <!-- JPA 2.0 Spec -->
        <dependency>
            <groupId>org.apache.geronimo.specs</groupId>
            <artifactId>geronimo-jpa_2.0_spec</artifactId>
            <version>1.1</version>
        </dependency>

        <!-- JDO API -->
        <dependency>
            <groupId>javax.jdo</groupId>
            <artifactId>jdo-api</artifactId>
            <version>3.0</version>
        </dependency>

        <!-- DataNucleus HBase -->
        <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-hbase</artifactId>
            <version>${org.datanucleus-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>1.0.4</version>
            <exclusions>
                <exclusion>
                    <groupId>org.codehaus.jackson</groupId>
                    <artifactId>jackson-mapper-asl</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.codehaus.jackson</groupId>
                    <artifactId>jackson-core-asl</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.hbase</groupId>
            <artifactId>hbase</artifactId>
            <version>0.94.0</version>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.zookeeper</groupId>
            <artifactId>zookeeper</artifactId>
            <version>3.4.3</version>
        </dependency>

        <!-- DataNucleus Core -->
        <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-core</artifactId>
            <version>${org.datanucleus-version}</version>
            <scope>runtime</scope>
        </dependency>

        <!-- DataNucleus Enhancer -->
        <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-enhancer</artifactId>
            <version>${org.datanucleus-version}</version>
        </dependency>

        <!-- DataNucleus JPA api -->
        <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-api-jpa</artifactId>
            <version>${org.datanucleus-version}</version>
        </dependency> 
```

pom.xml 中的插件

```
 <plugin>
                <groupId>org.datanucleus</groupId>
                <artifactId>maven-datanucleus-plugin</artifactId>
                <version>${org.datanucleus-version}</version>
                <configuration>
                    <api>JPA</api>
                    <log4jConfiguration>${basedir}/log4j.properties</log4jConfiguration>
                    <verbose>true</verbose>
                    <persistenceUnitName>hbase-test</persistenceUnitName>
                </configuration>
                <executions>
                    <execution>
                        <phase>process-classes</phase>
                        <goals>
                            <goal>enhance</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

账户.java

```
package org.test.model;
import javax.persistence.*;
import java.io.Serializable;

@Entity
@Table(name = "ACCOUNT_TABLE")
public class Account implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "ACCOUNT_TABLE:ID")
    @GeneratedValue(strategy = GenerationType.AUTO)
    private String id;

    @Column(name = "ACCOUNT_TABLE:FIRSTNAME")
    private String firstName;

    @Column(name = "ACCOUNT_TABLE:LASTNAME")
    private String lastName;

    @Column(name = "ACCOUNT_TABLE:LEVEL")
    private int level = 0;

    public Account() {
    }

    public Account(String firstName, String lastName, int level) {
        super();
        this.firstName = firstName;
        this.lastName = lastName;
        this.level = level;
    }

    public int getLevel() {
        return level;
    }

    public void setLevel(int level) {
        this.level = level;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
} 
```

持久性.xml

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">

    <persistence-unit name="hbase-test" transaction-type="RESOURCE_LOCAL">
        <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
        <mapping-file>org/test/model/orm.xml</mapping-file>
        <class>org.test.model.Account</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>

        <properties>
            <property name="datanucleus.storeManagerType" value="hbase" />
            <property name="datanucleus.ConnectionURL" value="hbase:localhost:60010"/>
            <property name="datanucleus.ConnectionUserName" value=""/>
            <property name="datanucleus.ConnectionPassword" value=""/>
            <property name="datanucleus.autoCreateSchema" value="true"/>
            <property name="datanucleus.autoCreateTables" value="true" />
            <property name="datanucleus.autoCreateColumns" value="true" />
            <property name="datanucleus.validateTables" value="true"/>
            <property name="datanucleus.validateConstraints" value="false"/>
            <property name="datanucleus.Optimistic" value="false"/>
            <property name="datanucleus.Multithreaded" value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

orm.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
    <entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd" version="1.0">
        <description>JPA Mapping file for Test</description>
        <package>org.test.model</package>
        <entity class="org.test.model.Account" name="Account">
            <table name="ACCOUNT_TABLE" />
            <attributes>
                <id name="id">
                    <generated-value strategy="AUTO"/>
                </id>
                <basic name="firstName">
                    <column name="ACCOUNT_TABLE:FIRSTNAME"/>
                </basic>
                <basic name="lastName">
                    <column name="ACCOUNT_TABLE:LASTNAME"/>
                </basic>
                <basic name="level">
                    <column name="ACCOUNT_TABLE:LEVEL"/>
                </basic>
            </attributes>
        </entity>
    </entity-mappings> 
```

TestAddAccountRow.java

```
package org.test.app;

import org.test.model.Account;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

public class TestAddAccountRow {
    public void addAccount() {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hbase-test");
        EntityManager em = emf.createEntityManager();
        EntityTransaction tx = null;
        Account a2 = new Account("testname","testname2",3);
        tx = em.getTransaction();
        tx.begin();
        em.persist(a2);
        tx.commit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:25:15.200

**更新**

@Datanucleus

我在 spring mvc 控制器中有代码调用 DAO（添加 Account 对象），我不知道为什么，但这会导致重复行，Datanucleus 工作得很好。

* * *

~~虽然我找不到它创建重复行的原因，但我将[Datanucleus 换成](http://www.datanucleus.org/products/datanucleus/hbase/support.html)了[Kundera](https://github.com/impetus-opensource/Kundera)，它似乎解决了重复行的问题~~

~~我认为[Datanucleus中存在错误](http://www.datanucleus.org/products/datanucleus/hbase/support.html)~~

* * *

昆德拉版本号

```
<kundera-version>2.1</kundera-version> 
```

pom.xml 依赖项

```
 <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>2.0</version>
        </dependency>

        <dependency>
            <groupId>com.impetus.core</groupId>
            <artifactId>kundera-core</artifactId>
            <version>${kundera-version}</version>
        </dependency>

        <dependency>
            <groupId>com.impetus.client</groupId>
            <artifactId>kundera-hbase</artifactId>
            <version>${kundera-version}</version>
            <exclusions>
            <exclusion>
                <groupId>org.apache.hbase</groupId>
                <artifactId>hbase</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.apache.hadoop</groupId>
                <artifactId>hadoop-core</artifactId>
            </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>

        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.4</version>
        </dependency>

        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>com.impetus.kundera.rest</groupId>
            <artifactId>kundera-rest</artifactId>
            <version>${kundera-version}</version>
        </dependency>

        <!-- HBase and Hadoop -->
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>1.0.4</version>
            <exclusions>
                <exclusion>
                    <groupId>org.codehaus.jackson</groupId>
                    <artifactId>jackson-mapper-asl</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.codehaus.jackson</groupId>
                    <artifactId>jackson-core-asl</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.hbase</groupId>
            <artifactId>hbase</artifactId>
            <version>0.94.0</version>
        </dependency> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!--
  Copyright (C) 2010 Bartosch Warzecha, Matthias Weßendorf

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">

    <persistence-unit name="hbase">
        <provider>com.impetus.kundera.KunderaPersistence</provider>
        <class>org.test.model.Account</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>
            <property name="kundera.nodes" value="localhost" />
            <property name="kundera.port" value="60010" />
            <property name="kundera.keyspace" value="test" />
            <property name="kundera.dialect" value="hbase" />
            <property name="kundera.client.lookup.class" value="com.impetus.client.hbase.HBaseClientFactory" />
            <property name="kundera.cache.provider.class"
                      value="com.impetus.kundera.cache.ehcache.EhCacheProvider" />
            <property name="kundera.cache.config.resource" value="/ehcache-test.xml" />
            <property name="kundera.ddl.auto.prepare" value="create" />
        </properties>
    </persistence-unit>
</persistence> 
```

# ios - 带有管道的 NSURL |

> ID：13229861
> 
> 赞同：0
> 
> 时间：2012-11-05T10:07:26.937
> 
> 标签：ios, objective-c, iphone, cocoa-touch

我正在尝试`UIImage`通过 URL 初始化。这是我写的代码：

```
NSString * path = [NSString stringWithFormat:@"%@",[[_tours objectAtIndex:indexPath.row]objectForKey:@"map_url"]];
    NSURL *url = [NSURL URLWithString:path];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *img = [[UIImage alloc]initWithData:data];
    [[cell tourPreviewImage]setImage:img];
    .... 
```

一个示例`map_url`如下所示：

```
https://maps.google.com/maps/api/staticmap?size=200x200&maptype=roadmap&markers=size:big|color:green|72.3601030185,41.4626763775&markers=size:big|color:red|45.4563468516,94.4774796973&sensor=false 
```

似乎`NSURL`对象无法处理 | 管道字符以正确的方式，因为我没有得到任何图像数据。如果我从 url 中删除由管道分隔的参数，一切正常。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:11:40.007

好的，我找到了解决方案。编码是出了什么问题。

```
NSString * path = [NSString stringWithFormat:@"%@",[[_tours objectAtIndex:indexPath.row]objectForKey:@"map_url"]];
path = [path stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:path];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [[UIImage alloc]initWithData:data];
[[cell tourPreviewImage]setImage:img]; 
```

# iphone - 当我通过 fbconnect 在 Facebook 上发布图片时，如何隐藏图片的网址？

> ID：13229871
> 
> 赞同：1
> 
> 时间：2012-11-05T10:08:08.670
> 
> 标签：iphone, facebook, ios5

我正在使用此代码在 facebook 上发布图像，但它也在 facebook 上显示图像 url。我想隐藏这个网址：

这是我将图像发布到 facebook 的代码

```
#pragma mark Facebook 

-(void)facebook
{
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
        @"I'm using Shape App", @"message",  @"I'm using Shape App", @"caption",
        @"http://www.imageurlhost.com/images/3kft472rvl2qtnzx11_Sample.png", @"picture",
        @"I'm using Shape App", @"title",nil];
    [[delegate facebook] dialog:@"feed" andParams:params andDelegate:self];
  } 
```

请检查下面的图片

![在此处输入图像描述](../Images/ce503c5a6a359c77d17ad07e9272d80a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:40:01.217

您正在做的是发布一个 URL，因此它显示为：您共享的*链接。*此链接是否指向图像而不是网站并不重要。

您可以更改的选项是，

a) 将链接发布到包含图像的 Open Graph 页面，然后您可以设置将显示该共享链接的标题和描述，或者

b）将其发布为真实照片，[https://developers.facebook.com/docs/reference/api/user/#photos](https://developers.facebook.com/docs/reference/api/user/#photos)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:32:47.663

我已经通过最新的 ios6 facebook 集成解决了这个问题：为此，您必须导入 Social.framework，然后将此代码放入您要调用 Facebook 的方法中。但它仅适用于 iOS 6 及更高版本

```
 NSData *imageData=[NSData dataWithContentsOfURL:[NSURL urlWithString:@"http://www.imageurlhost.com/images/3kft472rvl2qtnzx11_Sample.png"]];
 if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])

   {
    mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"I am using Shape App"]];
    [mySLComposerSheet addImage:[UIImage imageWithData:imageData]];
    [self presentViewController:mySLComposerSheet animated:YES completion:nil];
   }

  else

   {
    UIAlertView *alertView=[[UIAlertView alloc]initWithTitle:@"No Facebook Account" message:@"There are no Facebook accounts configured.You can add or create a Facebook account in Settings" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [alertView show];
}
[mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result)
 {
   // NSLog(@"dfsdf");

    switch (result) {
        case SLComposeViewControllerResultCancelled:

            break;
        case SLComposeViewControllerResultDone:

            break;
        default:
            break;
    }

}]; 
```

# android - 如何在地图上显示矩形？

> ID：13229872
> 
> 赞同：1
> 
> 时间：2012-11-05T10:08:08.370
> 
> 标签：android, google-maps, user-interface

我想在地图上画一个矩形。该矩形有一个按钮、一个形状和一个文本。我可以在地图上画一个矩形，但是当我在屏幕上移动手指时，矩形的大小发生了变化。为什么？我不知道如何在地图上放置按钮、文本和形状。请帮我。

![在此处输入图像描述](../Images/1fe218f8d545462add2a187223950189.png)

# c - 安装 Notepad++ C 编译器插件：linintl-8.dll 丢失

> ID：13229877
> 
> 赞同：0
> 
> 时间：2012-11-05T10:08:37.463
> 
> 标签：c, compiler-construction, notepad++

按照[http://iitdu.forumsmotion.com/t108-gcc-compiler-in-notepad上的说明](http://iitdu.forumsmotion.com/t108-gcc-compiler-in-notepad)

但是，在使用提供的代码**（如下）**执行 NPPExec 时，ld.exe 会显示一条警告，详细说明缺少 linintl-8.dll。

```
// The script code, C source code compiling with GNU CC (GCC) in notepad++ (by "NppExec" plug-in) and compressing with UPX...
//
// Enable? "//" signs remove in code line.
// Sample: C:\Program Files\CodeBlocks\MinGW\bin\gcc.exe "$(FULL_CURRENT_PATH)" -o $(NAME_PART)

YOUR_GCC\BIN\_PATH_HERE\gcc.exe "$(FULL_CURRENT_PATH)" -o $(NAME_PART)

// UPX Compress (with "--best, --ultra-brute" options)
// Enable? "//" signs remove in code line.
// Sample: C:\WINDOWS\system32\upx.exe --best --ultra-brute $(NAME_PART).exe

YOUR_UPX_PATH_HERE\upx.exe --best --ultra-brute $(NAME_PART).exe 
```

然而，我可以看到 linintl-8.dll 位于 mingw 的 bin 目录中。

有没有人知道如何解决这个问题，或者在notepad++中成功编译C的完全不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:31:13.690

我不是 Windows 专家，但我知道 dll 应该放在 Windows 7 中的某个地方`C:/System`或`C:/System32`用于 Windows 7，你应该检查这个问题：

[如何在 Windows 7 64 位上注册 DLL 文件？](https://stackoverflow.com/questions/4897685/how-do-i-register-a-dll-on-windows-7-64-bit)

# visual-studio-2010 - 在 VC++ 中使用 Skype4COM

> ID：13229878
> 
> 赞同：0
> 
> 时间：2012-11-05T10:08:37.107
> 
> 标签：visual-studio-2010, visual-c++, com, skype4com

我正在尝试使用 Skype4COM.dll 获取 Skype 用户的联系人列表并向用户发送消息。我有 Visual Studio 2010，我正在尝试开发的应用程序是基于 C++ 的应用程序。

我在将 Skype4COM.dll 导入项目时遇到问题。以下是我已经完成的步骤：

*   [从http://developer.skype.com/accessories/skype4com](http://developer.skype.com/accessories/skype4com)下载 dll
*   使用 regsvr32 命令注册 dll
*   在 Visual Studio 中创建 Win32 控制台应用程序
*   将 Skype4COM.dll 添加到项目的 Additional Dependencies
*   试过 - #import "Skype4COM.dll"

我收到一条错误消息：错误：无法打开源文件“$(SolutionDir)/Debug/Skype4COM.tlh”

有人可以帮我解决这个问题。

此外，如果有人可以向我指出一篇关于如何使用/配置 Skype4COM 和 VC++ 的好文章，那就太好了

谢谢，

拉亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:18:08.193

通过使用 C:\Program Files (x86)\Common Files\Skype\Skype4COM.dll 而不是从互联网上下载的解决了它。

谢谢！

# java - 文件包含 ÿ 符号，同时将文本文件保存为二进制数据

> ID：13229881
> 
> 赞同：0
> 
> 时间：2012-11-05T10:08:53.363
> 
> 标签：java

我将 .txt 文件保存为二进制格式。但是在二进制文件的最后一行，又保存了一个字符，即ÿ

为什么会这样？我的代码是这样的：

```
FileOutputStream fout = null;
InputStream fin;
String path="something";
int i = 0;
fout = new FileOutputStream(path);
do {
  i=fin.read();
  fout.write(i);
} while(i != -1);
fout.flush();
fout.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:46:31.830

很明显：您看到的 ÿ 字符（unicode U+00FF）是您在退出循环之前编写的 -1。你不应该`do ... while()`在这里使用，而是使用更常见的成语：

```
 while ((i = fin.read()) != -1)
        fout.write(i); 
```

# vb.net - 使用 vb.net 将不带分隔符的字符串拆分并存储在数组中

> ID：13229886
> 
> 赞同：1
> 
> 时间：2012-11-05T10:09:20.640
> 
> 标签：vb.net, string, arrays

变量数据类型是字符串。它包含大于 300 个字符的字符串值。我想将该字符串拆分为 150 个字符并使用 vb.net 存储在字符串数组中

我的代码：

```
msg = t1("fld_msg")
msg1 = msg.Length
For i = 0 To msg.Length - 1
   strarr = msg.Substring(0, 150)
Next 
```

错误：

```
value of type string cant be converted into one dimensional array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:13:04.383

子字符串返回一个类型的值`string`。

您正在尝试将结果放入数组中。

尝试：-

```
strarr(0) = msg.Substring(0,150)
strarr(1) = msg.Substring(150) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:14:10.060

您需要一个计数器来增加数组中的单元格

```
msg = t1("fld_msg")
msg1 = msg.Length
dim Counter as Integer = 0
For i = 0 To msg.Length - 1 Step 150
   strarr(Counter) = msg.Substring(i, 150)
   Counter += 1
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:43:51.443

代码中所需的更正是将子字符串值分配给`an index of array`“strarr(i)”而不是`to an array`“strarr”。也采用子字符串 like`(0,XX)`是不正确的。每次它会从索引 0 返回一个子字符串，请`(i*NumberOfCharactersToInclude,XX)`改用。但这里的“XX”也很重要。

例如，

如果字符串有 311 个字符且 XX 固定为 150，则会导致第三个子字符串出错。所以我建议你用这个：（假设框架是 3.5 或以上）

```
For i As Integer = 0 To len  ' len represents possible no. of substrings
    strarr(i) = New String(msg.Skip(i * 150).Take(150).ToArray)
Next 
```

# java - 需要帮助删除单个 SMS Android 应用 Java

> ID：13229890
> 
> 赞同：1
> 
> 时间：2012-11-05T10:09:45.523
> 
> 标签：java, android, sms

> **可能重复：**
> [在 Android 1.5 中删除 SMS](https://stackoverflow.com/questions/2183680/delete-sms-in-android-1-5)

我已经在互联网上搜索了几天，但找不到任何类似的问题。

我正在制作一个 Android 应用程序，我想删除一条短信，而不是整个对话。

当手机收到短信时，我会保存时间戳，当我要删除消息时，我会找到时间戳。但是我只能删除整个线程，而不是单个短信，请帮忙？

```
 String pid = c.getString(1);
            String uri = "content://sms/conversations/" + pid;
            //Log.i(rm,"0 "+ c.getString(5) + " " +AllSmsTime.toString());
            //Log.i(rm ,"2 " + c.getLong(1));
            if(Long.valueOf(c.getString(5)).longValue()== AllSmsTime.get(0)){
                /*gets milliseconds*/

                getContentResolver().delete(Uri.parse(uri), null, null);    
            } 
```

# iphone - 排序工作不正常

> ID：13229892
> 
> 赞同：1
> 
> 时间：2012-11-05T10:09:53.467
> 
> 标签：iphone, objective-c, sorting, nsarray

我通过我的应用程序将一些文件保存在文档目录中，使用自定义命名为“file1.format”、“file2.format”等等。后来我在一个数组中获取这些文件并在循环中打印它们然后它们进入排序形式，但当我存储“file10.format”等时出现问题。在这之后的结果来得有些出乎意料。在保存第 10 个文件后，输出就像

文件1.foramt 文件10.format 文件2.format 。. file6.format file61.format file7.format 我不知道为什么排序将所有 1 或 2 放在一个位置，如上所示，而预计 10 应该在 9 之后而不是在 1 之后。我使用了所有类型的排序，但是结果总是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:47:47.620

如果要“像 Finder 一样”对文件名进行排序，请使用`localizedStandardCompare`. 特别是，字符串中的数字根据它们的数值排序：

```
NSArray *files = [NSArray arrayWithObjects:@"file10.format", @"file2.format", @"file1.format", nil];
NSArray *sorted = [files sortedArrayUsingSelector:@selector(localizedStandardCompare:)];
NSLog(@"%@", sorted); 
```

输出：

```
2012-11-05 11:38:55.474 test77[533:403] (
    "file1.format",
    "file2.format",
    "file10.format"
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:20:25.697

如果您想使用常规的字符串排序顺序，那么您应该考虑重命名您的文件。`file00001.format`，`file00002.format`等等。在这种情况`file00010.format`下`file00009.format`，`file00011.format`接下来是

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:14:35.193

它实际上工作正常。

```
file10.format 
```

来之前

```
file2.format 
```

因为该字符`0`被视为小于`.`与之比较的字符（两个字符在各自的文件名中位于同一位置。

事实上，在你们年轻人还没有花哨的图形操作系统之前，文件系统也是这样对文件进行排序的。</老人吐槽>

# android - Android：根据 ViewPager 显示操作栏菜单项

> ID：13229893
> 
> 赞同：12
> 
> 时间：2012-11-05T10:09:59.030
> 
> 标签：android, android-actionbar, android-viewpager

我无法解决以下代码。我有一个`viewpager`包含 3 个片段的片段，我希望一个搜索图标只显示在一个片段上。我开始尝试通过片段添加搜索功能，但是滑动到该页面时菜单项的呈现速度很慢。我现在正在将搜索图标添加到活动中，然后根据`viewpager`活动页面隐藏或显示，但以下内容不起作用：

```
public class MyApp extends FragmentActivity implements 
   FragmentTeams.FragmentNotification,ViewPager.OnPageChangeListener, 
      OnNavigationListener{

  ...

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);

    menuSearch = menu.findItem(R.id.menu_search);
    mSearchView = new SearchView(this);
    menuSearch.setActionView(mSearchView);
    menuSearch.setVisible(false);
    return true;
}

 @Override
public void onPageSelected(int pageNum) {

if(pageNum== 1){     
    ActionBar actionBar = MyApp.this.getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);     
        menuSearch.setVisible(true);
        invalidateOptionsMenu();

}else{           
    ActionBar actionBar = MyApp.this.getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);  
        menuSearch.setVisible(false);
        invalidateOptionsMenu();
    }
} 
```

虽然上面确实（似乎）在 处创建和隐藏图标`onCreateOptionsMenu`，但在移动到时不会重新启用它

```
 pageNum ==1 
```

谁能给我一些关于为什么会发生这种情况的见解？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-05T10:15:35.073

`invalidateOptionsMenu`使系统调用该方法`onPrepareOptionsMenu`，因此您可以按如下方式覆盖该方法：

```
public boolean onPrepareOptionsMenu(Menu menu) {
      int pageNum = getCurrentPage();
      if (pageNum == 1) {
         menu.findItem(R.id.menu_search).setVisible(true);

      }
      else {
         menu.findItem(R.id.menu_search).setVisible(false);
      }
   }

public void onPageSelected(int pageNum) {
    invalidateOptionsMenu();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-22T13:03:09.527

您可以在片段中实现 onCreateOptionsMenu() 并为片段设置“setHasOptionsMenu(true)”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T23:42:08.097

这个问题的一个可能的解决方案是在你的 ViewPager 宿主的活动中膨胀你的自定义菜单并获得如下的菜单参考：

```
 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
     getMenuInflater().inflate(R.menu.custom_menu, menu);
     customMenu = menu;
     return super.onCreateOptionsMenu(menu);
 } 
```

之后，您可以在 onPageSelected 方法中轻松隐藏/显示菜单项，无需任何延迟，如下所示：

```
 @Override
 public void onPageSelected(int position) {
  switch (position) {
        case 0: { 
           customMenu.getItem(0).setVisible(false);
           break;
        }
       case 1: { 
           customMenu.getItem(0).setVisible(true);
             break;
        }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-28T04:34:56.493

我使用了 Nermeen 的答案，并且毫不拖延地设法得到了它。

我不会在 中添加任何内容`onCreateOptionsMenu`，而是使用它来获取对菜单的引用：

```
 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
     customMenu = menu;
     return super.onCreateOptionsMenu(menu);
 } 
```

然后，在 中`onPrepareOptionsMenu()`，我调用 viewpager `getCurrentItem()`（应该类似于`viewPager.getCurrentItem()`），`invalidateOptionsMenu()`使用我在 中创建的 customMenu 引用调用并扩展该页面中我想要的任何菜单`onCreateOptionsMenu()`。

# php - php数组值删除索引

> ID：13229900
> 
> 赞同：0
> 
> 时间：2012-11-05T10:10:24.563
> 
> 标签：php, arrays, arraylist, jquery-ui-sortable

我有对象数组，我想做的是将 123, 150, 50 之类的索引重置为 0,1,2 。我已经完成了 array_values(); 但它删除了第一个数组“123”。

如何使索引号从 0 开始。使 123, 150, 50, 变成 0,1,2

```
 array(
    123 =>
      User::__set_state(array(
    _type' => 'student',
    'id' =>'23'}),
    150=>
    User::__set_state(array(
    '_type' => 'student',
   'id' =>'29'}),
    50=>
    User::__set_state(array(
    '_type' => 'student',
    'id' =>'12'}) 
```

输出

```
 array(
     150=>
    User::__set_state(array(
    '_type' => 'student',
   'id' =>'29'}),
    50=>
    User::__set_state(array(
    '_type' => 'student',
    'id' =>'12'}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:15:53.577

[`array_values`](http://www.php.net/manual/en/function.array-values.php)是正确的解决方案。小事是它不会影响给定的数组，而是返回一个数组。所以你必须将它分配给另一个变量。例如：

```
$arr1 = array(123 => 'test', 1234 => 'test2');
$arr2 = array_values($arr1);
print_r($arr2); //prints: Array ([0] => test [1] => test2) 
```

# c# - 主/细节的通用视图模型模式

> ID：13229905
> 
> 赞同：1
> 
> 时间：2012-11-05T10:10:34.883
> 
> 标签：c#, wpf, mvvm, viewmodel, master-detail

据我了解，Viemodel 中 MVVM 背后的概念包括业务逻辑和/或向视图公开的数据的主/细节关系之类的东西

因此，当我发现有很多 ORM 生成器，例如用于模型的 Telik ao 和用于 xaml 等的另一端设计器等。
但是如果我知道我有一个简单的 Master 或主/详细视图，它基于我所知道的模型中的经典。

那么是否有一个已知的库可以更快地实现主/详细视图模型，可能使用 C# 的通用特性？

基本思想一个泛型类，我将我需要的模型类作为主或细节提供，并且可以使用这个泛型作为我继承的特殊实现的基类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:37:43.613

我会建议两种可能的解决方案，但还有更多。

## 代码片段

这不是一个代码生成器，而是一个快速、简单的解决方案，用于制作快速视图模型等。有几次我们添加了模型并且不想运行生成器，所以我创建了一些主视图模型和详细视图模型的代码片段。然后我所要做的就是在一个地方替换名称，所有代码都会改变。如果您不熟悉代码片段，Microsoft 有一篇[很好的初学者文章。](http://msdn.microsoft.com/en-us/library/ms165394%28v=vs.80%29.aspx)

## 代码生成器

过去，我使用过[Code Smith 的 Generator](http://www.codesmithtools.com/product/generator) ，它可以获取一个定义了一些扩展属性的数据库，并生成所有需要的视图、viewModel、模型等......这是更完整的解决方案，能够生成整个项目与按文件执行，如上面提到的片段。然而，虽然代码片段是免费的，但这个解决方案会花钱。

# wpf - itemscontrol mouseDragElementbehavior for new items not working

> ID：13229911
> 
> 赞同：4
> 
> 时间：2012-11-05T10:11:06.387
> 
> 标签：wpf

我通过 Jörg Reichardt找到了[使用带有 ItemsControl 和 Canvas 的 MouseDragElementBehavior 的解决方案。](https://stackoverflow.com/questions/6358774/using-mousedragelementbehavior-with-an-itemscontrol-and-canvas)但这对我不起作用。

这是我的代码：

```
<ItemsControl ItemsSource="{Binding CardCollection}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas Background="White" AllowDrop="True" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ContentControl Content="{Binding}">
                <i:Interaction.Behaviors>
                    <is:MouseDragElementBehavior ConstrainToParentBounds="True" />
                </i:Interaction.Behaviors>
            </ContentControl>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这些项目显示在画布上，但不能拖放。我在视图模型中为 cardCollection 创建新项目，并且 cardCollection 通过 mvvm propertynotifychanged 更新到模型。

# c++ - getaddrinfo 内存泄漏

> ID：13229913
> 
> 赞同：17
> 
> 时间：2012-11-05T10:11:16.627
> 
> 标签：c++, c, ubuntu, valgrind, getaddrinfo

我有这个代码来获取有关 IPv4 地址的信息：

```
struct addrinfo hints, *info = NULL;
char addr4[INET_ADDRSTRLEN];

memset(&hints, 0, sizeof(hints));
hints.ai_socktype = SOCK_STREAM;
hints.ai_family = AF_INET;

if (!getaddrinfo(argv[hostPara], NULL, &hints, &info)) {
    inet_ntop(AF_INET, &((const sockaddr_in *)info->ai_addr)->sin_addr, addr4, INET_ADDRSTRLEN);
}
if (info != NULL) {
    freeaddrinfo(info);
} 
```

但是当我测试我什么时候`argv[hostPara]`得到`"www.google.com"`这个时`valgrind`：

```
==3632== 168 bytes in 1 blocks are still reachable in loss record 1 of 1
==3632==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==3632==    by 0x524B5B8: make_request (check_pf.c:249)
==3632==    by 0x524BA53: __check_pf (check_pf.c:342)
==3632==    by 0x5201134: getaddrinfo (getaddrinfo.c:2458)
==3632==    by 0x40186B: main (trace.cc:214) 
```

而如果`argv[hostPara]`是`"www.ubuntu.com"`没有内存泄漏。这是什么神奇的行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T10:41:09.337

看起来有点[gblic](http://code.woboq.org/userspace/glibc/sysdeps/unix/sysv/linux/check_pf.c.html)，它是关于在 ipv6 的情况下捕获对象（看 249 行）。

正如其他成员所解释的，“仍然可以访问”本身并不是一个错误，但它可能会隐藏一些错误的情况。在这种情况下，这不是问题，只是对可能隐藏令人讨厌的东西的警告。

此警告也已报告给[redhat](https://bugzilla.redhat.com/show_bug.cgi?format=multiple&id=859717)

警告 google 而不是 ubuntu 的原因是因为 google 在其服务器上部署了 ipv6 而 ubuntu 没有，然后没有执行捕获。您可以通过以下方式进行检查：

```
nslookup -q=AAAA www.google.com
nslookup -q=AAAA www.ubuntu.com 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T10:21:30.970

这可能不是内存泄漏（技术上它是，但您不应该担心）有时库会在第一次调用函数以进行后续调用时分配内存。如果你愿意，你可以让 valgrind[抑制](http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress)这些错误。

从[常见问题解答](http://valgrind.org/docs/manual/faq.html#faq.deflost)：

> “仍然可以访问”意味着您的程序可能没问题——它没有释放它可能拥有的一些内存。这是很常见的，而且通常是合理的。如果您不想看到这些报告，请不要使用 --show-reachable=yes。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T10:25:28.493

它说“仍然可以到达”。这可能意味着库为缓存或类似的东西分配了一些内存，并且不想释放它。您可以放心地忽略它，或者至少它需要更多的分析，而不仅仅是说它是内存泄漏。

任何人都猜测为什么不同主机之间存在差异。可能是因为不同的名称服务器需要不同类型的工作。

# c# - 没有 YSOD 的异常

> ID：13229914
> 
> 赞同：0
> 
> 时间：2012-11-05T10:11:18.267
> 
> 标签：c#, asp.net, error-handling, unhandled-exception

因此，我设置了我的 Global.asax 文件，以便在发生未经处理的异常时向我发送电子邮件。我收到一封电子邮件，其中包含用户看不到的异常，并且代码在客户端似乎运行良好，并且页面加载并执行了预期的操作。

我在 aspx 文件中有这段代码，它显示了一个基于角色或以特定字符开头的客户编号的复选框...

```
<%  if (Roles.IsUserInRole("Admin") ||
                   txtAccountNo.Text.Substring(0, 2) == "UK" ||
                   txtAccountNo.Text.Substring(0, 2) == "FR" ||
                   txtAccountNo.Text.Substring(0, 2) == "IT" ||
                   txtAccountNo.Text.Substring(0, 2) == "DK" ||
                   txtAccountNo.Text.Substring(0, 2) == "SE")
               { %>
            <label for="chkExpressDelivery"><asp:Literal ID="Literal14" runat="server" Text="<%$ Resources:LocalizedText, fieldLabel_ExpressDelivery %>"></asp:Literal><span class="small"></span></label>
            <asp:CheckBox ID="chkExpressDelivery" runat="server" Width="50px" CssClass="_checkbox _normalcheckbox" Text="&nbsp;" />
            <%} %> 
```

现在 txtAccountNo 由 aspx.cs 文件中 Page_Load 事件中的用户配置文件属性填充。

我在电子邮件中收到的错误消息（客户永远不会看到）是

> 索引和长度必须引用字符串中的位置。参数名称：长度

我理解错误消息 - 它说当代码运行时 txtAccountNo.Text 基本上是空的，但我不明白的是，客户端永远不会看到这个错误并且页面的行为如我所愿。

但是，如果我在 web.config 文件中打开自定义错误消息，客户端将被定向到自定义错误页面，但没有它，就客户端而言没有错误。

那么我该如何纠正这个错误，以便我可以打开我的自定义错误页面？

我希望这是有道理的！如果您需要更多信息，请告诉我。

谢谢

斯图尔特

这段代码现在可以工作了......

```
<%  if (txtAccountNo.Text.Length > 0 && (Roles.IsUserInRole("Admin") ||
               txtAccountNo.Text.Substring(0, 2) == "UK" ||
               txtAccountNo.Text.Substring(0, 2) == "FR" ||
               txtAccountNo.Text.Substring(0, 2) == "IT" ||
               txtAccountNo.Text.Substring(0, 2) == "DK" ||
               txtAccountNo.Text.Substring(0, 2) == "SE"))
           { %>
        <label for="chkExpressDelivery"><asp:Literal ID="Literal14" runat="server" Text="<%$ Resources:LocalizedText, fieldLabel_ExpressDelivery %>"></asp:Literal><span class="small"></span></label>
        <asp:CheckBox ID="chkExpressDelivery" runat="server" Width="50px" CssClass="_checkbox _normalcheckbox" Text="&nbsp;" />
        <%} %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:18:28.587

有些错误永远不会显示给客户。当我在页面中使用 AJAX 控件并且客户端具有某个 IE 版本时，它发生在我身上。客户端没有受到它的影响，但它一直通过 Emah 发送错误邮件。
激活自定义错误时，您的应用程序或 IIS 服务器可能会捕获错误并以某种方式对其进行解释。像这样的东西： [网络服务器上的 mvc3 错误，只能得到通用响应](https://stackoverflow.com/questions/11725611/mvc3-error-on-webserver-only-get-generic-response)也许这就是重定向发生的原因。
至于错误的来源（txtAccountNo.Text为空）：如果代码在页面事件生命周期的某个时刻（例如初始化）运行，则控件中没有数据。为避免该错误，您可以在 if 子句中添加另一个条件并检查 txtAccountNo.Length > 0。

# zeromq - 关闭 ZeroMQ 接收端不丢失

> ID：13229918
> 
> 赞同：4
> 
> 时间：2012-11-05T10:11:32.293
> 
> 标签：zeromq

我正在开发一个 (Python/pyzmq)) ZeroMQ 服务器，它通过 PULL 套接字接收传入的消息。

现在，有时我会彻底重启服务器以升级它。我的问题是；**我可以以某种方式停止接收传入消息（在我的 PULL 套接字上），以便重新启动不会丢失任何消息吗？**我正在考虑诸如`close()`不调用套接字，然后`recv()`输入最后一条消息之类的方法。可能将高水位线设置为零会产生类似的结果。

如果上述解决方案都不起作用，我可能最好将我的套接字转换为 REP 套接字并逐个获取每条消息，每次都 ACK:ing 它们。由于这将是同步的，我想这会更慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:27:36.380

是的，0mq 本身不会提供这种可靠的交付方式。您肯定应该使用带有 ACK 的方案。

请参阅[第四章 - zguide 的可靠请求 - 回复](http://zguide2.zeromq.org/py%3aall#toc65)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T13:34:00.990

我将 clrzmq 与 ZMQ 3.2.2 一起使用，并通过在 PULL 套接字上设置以下属性来获得上述功能：

1.  将 pull socket 上的接收高水位线设置为我愿意保留在内存中的 msg 数量。
2.  将缓冲区大小设置为适当的大小。
3.  当我不再希望接收消息时，我在接收通道上调用 socket.disconnect()。

断开连接后，频道将不再收到新的消息。如果您在发送方设置高水位线，它将开始将消息保存在发送方队列中（这样事件就不会丢失）

当通道断开时，当接收者队列中有消息时，调用接收事件将成功。我正在使用超时接收，所以如果超时后失败，当通道断开连接时，我假设队列为空，我可以处理通道并重新启动服务。当服务备份时，存储在发送者队列中的所有消息都将被分派。

# javascript - 跨浏览器兼容性问题

> ID：13229920
> 
> 赞同：0
> 
> 时间：2012-11-05T10:11:37.593
> 
> 标签：javascript, css

我正在开发一个网站，它在除 Google Chrome 之外的所有浏览器上都运行良好。我需要为 Chrome 设置一个对象的边距。navigator.appName为 mozilla 和 chrome返回“ **Netscape ”。**navigator.appCodeName 为浏览器提供**Mozilla**和 userAgent 返回此

" **Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4** "

我该怎么办？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:18:54.130

使用 Chrome 时返回 true：

`(/Chrome/).test(navigator.userAgent)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:19:59.380

尝试基于**userAgent属性的**[东西](http://davidwalsh.name/detecting-google-chrome-javascript)，最可靠的一个：

 **```
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:20:46.010

只是如果您使用的是 jQuery，您可以使用：

```
$.browser.webkit 
```**

# deployment - 使用终端部署 Websphere

> ID：13229922
> 
> 赞同：0
> 
> 时间：2012-11-05T10:11:41.253
> 
> 标签：deployment, terminal, websphere, ear

我正在尝试学习如何使用终端在 WebSphere v 7 中部署耳文件，我知道如何使用管理控制台部署耳文件，但我想学习如何使用终端进行部署。

我的搜索没有帮助

任何建议

十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:25:56.247

您应该在[wsadmin中使用](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/txml_script.html?resultof=%22wsadmin%22%20)[AdminApp](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.jpafep.multiplatform.doc/info/ae/ae/rxml_adminapp.html?resultof=%22AdminApp%22%20%22adminapp%22%20)对象

# c# - Fresh Silverlight 项目上的 NullReferenceException - 设计师

> ID：13229923
> 
> 赞同：0
> 
> 时间：2012-11-05T10:11:41.757
> 
> 标签：c#, .net, visual-studio-2010, silverlight, .net-4.5

我刚刚在现有的 Web 项目旁边创建了一个新的 Silverlight 项目。（视觉工作室 2010）

设计器窗口现在显示“发生未处理的异常”。

**注意：该项目没有添加额外的代码，它只有默认代码。**

*部分堆栈跟踪如下。*

System.NullReferenceException

你调用的对象是空的。在

Microsoft.Windows.Design.Platform.SilverlightMetadataContext.SilverlightXamlExtensionImplementations.d__8.MoveNext()

在 MS.Internal.Design.Metadata.ReflectionProjectNode.BuildSubsumption()

在 MS.Internal.Design.Metadata.ReflectionProjectNode.SubsumingNamespace（标识符标识符）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:05:02.743

安装 Silverlight Developer 运行时以避免空引用 exc VisualStudio Designer

# c++ - C++ 中指针初始化错误的后果是什么

> ID：13229925
> 
> 赞同：-9
> 
> 时间：2012-11-05T10:11:50.753
> 
> 标签：c++, pointers, initialization, mmu

**这个问题已经关闭，因为它对某些人来说似乎不是一个真正的问题**我从那时起更新了问题主体，现在可能会好一些。但是，我希望你们都建议我如何改进这个问题，因为这是我在这个领域的工作和研究。

RAII（资源分配即初始化）理论规定，如果我从 MMU 借用内存，我需要将其归还（新建和删除）。但是，我想知道如果我在 C++ 中做不好的初始化实践会产生什么后果。

如果我执行以下操作怎么办：

```
double* pp1 = 0;
double* pp2 = 0; 
```

然后在我需要的地方使用 pp1 和 pp2 ？这是根据标准编程实践初始化指针的错误方法吗？或者它是初始化。初始化完全取决于`new`操作员吗？

以及在以下设计中应该使用多少指针：

1) 实时 2) 安全关键 3) 关键任务

此外，在 32 位和 64 位机器上运行相同的 C/C++ 应用程序时，我发现了奇怪的结果。如果我乱用指针，我的机器会变得多么缓慢/性能不佳。因为，由于在我的设计中使用了太多指针，我的机器变得越来越慢。对于一些“明显的”保密协议，我不能把我的代码放在这里。我对此感到非常抱歉。为了澄清起见，我将在返回结果之前删除每个方法中使用的所有指针，即我的内存管理非常平衡且足够高效，不会导致堆栈溢出问题。

我知道这些问题可能过于开放，但我也在调查（谷歌、MISRA C++、英国计算机协会和 IEEE）以找出详细的答案。我的想法是实际研究和开发一种在不涉及大量指针的情况下用 C++ 编程的方法。

我知道一个显而易见的答案是，“你用 C++ 编程，这样你就可以使用指针并停止滥用你的 PC 的 MMU”。但如果有人有任何不同的想法，我想听听。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T10:15:17.883

> 使用指针最合适的做法是什么？

在这种情况下，答案是**根本不使用它们**。只是有什么问题

```
double p1 = 1.1;
double p2 = 2.2; 
```

### 如果必须，请将它们包装在智能指针中：

使用智能指针防止内存泄漏：

```
std::unique_ptr<double> pp1; 
```

### 如果您必须使用原始指针（值得怀疑），请初始化为`nullptr`：

更喜欢`nullptr`or ：`NULL``0`

```
double* pp1 = nullptr;
double* pp2 = nullptr; 
```

在使指针指向有效位置之前，您无法取消引用该指针：

```
pp1 = new double(1.1);

*pp1; //VALID
*pp2; //UNDEFINED BEHAVIOR - pp2 is still nullptr 
```

# ruby-on-rails-3 - 仅将处理后的图像保存在回形针中

> ID：13229927
> 
> 赞同：0
> 
> 时间：2012-11-05T10:12:01.290
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip

我的回形针设置是

```
has_attached_file :avatar, :styles => { :medium => "300x300", :thumb => "100x100"},
    :storage => :s3,
    :bucket => ENV['BUCKET'],
    :s3_credentials => {
      :access_key_id => ENV['ACCESS_KEY'],
      :secret_access_key => ENV['SECRET_KEY']
    } 
```

我不想有尺寸限制，因为它会麻烦用户调整他/她的图像大小。所以，我把样式放在中号和拇指上。但是，原始文件仍然保存在 s3 中。

如何避免保存原始图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:06:15.900

处理完成后使用回调销毁图像。这个[要点](https://gist.github.com/755593)包含一个例子

# c# - 将 WSDL 导入 .NET 项目只会创建一个空的命名空间

> ID：13229929
> 
> 赞同：3
> 
> 时间：2012-11-05T10:12:09.843
> 
> 标签：c#, .net, wcf, wsdl, wcf-client

我第一次尝试使用 WCF。这是我所做的：

1.  在 VS 2010 中创建了一个控制台 .NET 4 项目
2.  添加了一个 WSDL 文件作为服务参考。

但是，我似乎无法使用该服务，因为没有创建类。服务引用只是一个空的命名空间。

我错过了什么？

这是 WSDL：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSPY v2004 rel. 3 U (http://www.xmlspy.com) by Christophe Duquesne (DRYADE SA) -->
<!-- edited with XMLSpy v2007 rel. 3 U (http://www.altova.com) by Nick js Knowles (Kizoom) -->
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:siriWS="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/siri" xmlns:ns="http://datex2.eu/schema/1_0/1_0" xmlns:ns1="http://www.ifopt.org.uk/acsb" xmlns:ns2="http://www.ifopt.org.uk/ifopt" targetNamespace="http://new.webservice.namespace">
  <types>
        <xsd:schema targetNamespace="http://new.webservice.namespace">
            <xsd:import schemaLocation="siri.xsd" namespace="http://www.siri.org.uk/siri"/>
        </xsd:schema>
    </types>
    <message name="StopMonitoringServiceRequest">
        <part name="Request" type="siri:ServiceRequestStructure"/>
    </message>
    <message name="StopMonitoringServiceDelivery">
        <part name="Answer" type="siri:ServiceDeliveryStructure"/>
    </message>
    <portType name="SOAP-Port">
        <operation name="GetStopMonitoringService">
            <input message="siriWS:StopMonitoringServiceRequest"/>
            <output message="siriWS:StopMonitoringServiceDelivery"/>
        </operation>
    </portType>
    <binding name="SiriSOAPBinding" type="siriWS:SOAP-Port">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
        <!-- ====general  services ===== -->
        <!-- ====SIRI services ===== -->
        <operation name="GetStopMonitoringService">
            <soap:operation soapAction="GetStopMonitoringService"/>
            <input>
                <soap:body use="literal"/>
            </input>
            <output>
                <soap:body use="literal"/>
            </output>
        </operation>
    </binding>
    <service name="SiriServices">
        <port name="SiriWSPort" binding="siriWS:SiriSOAPBinding">
            <soap:address location="http://www.siri-service-location.com"/>
        </port>
    </service>
    <!--General messages-->
    <!--SIRI Functional services-->
    <!--Capabilities-->
    <xsd:annotation>
        <xsd:appinfo xmlns:gms="http://www.govtalk.gov.uk/CM/gms">
            <Metadata xmlns="http://www.govtalk.gov.uk/CM/gms-xs">
                <Aggregation>main schema</Aggregation>
                <Audience>e-service developers</Audience>
                <Contributor>Nicholas Knowles, KIZOOM LTD., London EC4A 1LT</Contributor>
                <Coverage>Europe</Coverage>
                <Creator>>Drafted for version 1.0, by  Cen TC278 WG3 SG7 Christophe Duquesne DRYADE SA mailto:schemer@siri.org.uk</Creator>
                <Date>
                    <Created>2005-03-01</Created>
                </Date>
                <Date>
                    <Modified>2005-05-11</Modified>
                </Date>
                <Date>
                    <Modified>2007-01-30</Modified>
                </Date>
                <Date>
                    <Modified>2007-04-17</Modified>
                    <!-- Name Space changes -->
                </Date>
                <Date>
                    <Modified>2008-02-12</Modified>
                    <!-- Situation  Exchnages -->
                </Date>
                <Date>
                    <Modified>2007-04-17</Modified>
                    <!-- Name Space correction  -->
                    <!-- Add  StopMonitoringMultipleRequest  -->
                </Date>
                <Description>
                    <p>SIRI is a European CEN standard for the exchange of real time information. This describes WSDL Server binding</p>
                </Description>
                <Format>
                    <MediaType>text/xml</MediaType>
                    <Syntax>http://www.w3.org/2001/XMLSchema</Syntax>
                    <Description>XML schema, W3C Recommendation 2001</Description>
                </Format>
                <Identifier>{http://www.siri.org.uk/schemas/1.3/siri}siri_wsProducer.wsdl</Identifier>
                <Language>[ISO 639-2/B] ENG</Language>
                <Publisher>Kizoom, 109-123 Clifton Street, London EC4A 4LD </Publisher>
                <Rights>Unclassified
                             <Copyright>CEN, VDV, RTIG 2005-2008</Copyright>
                </Rights>
                <Source>
                    <ul>
                        <li>SIRI is derived from the VDV, RTIGXML and Trident standards.</li>
                    </ul>
                </Source>
                <Status>Version 1.0 Draft for approval</Status>
                <Subject>
                    <Category>Arts, recreation and travel, Tourism, Travel (tourism), Transport,
 Air transport, Airports,
 Ports and maritime transport, Ferries (marine),
 Public transport, Bus services, Coach services, Bus stops and stations,
 Rail transport, Railway stations and track, Train services, Underground trains,
 Business and industry, Transport, Air transport , Ports and maritime transport, Public transport,
 Rail transport, Roads and road transport
 </Category>
                    <Project>Cen TC278 WG3 SG7</Project>
                </Subject>
                <Title>SIRI XML schema. WSDL Server binding. </Title>
                <Type>Standard</Type>
            </Metadata>
        </xsd:appinfo>
    </xsd:annotation>
    <!-- ======== All the structures are comming from siri.xsd ========= -->
    <!-- ======== Descritions of request parameters (requests and answers) ========= -->
    <!-- ========Service Requests ========= -->
    <!-- ====StopMonitoring== -->
    <!-- ====PORTS ================ -->
    <!-- ====BINDINGS  ================ -->
</definitions> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:20:51.063

显然导入模式时出现错误，我应该查看错误列表窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:28:55.077

尝试运行命令工具 wsdl.exe。我用你的wsdl试过了，有一些错误。将 wsdl 保存到文件（此处为 service.wsdl）并尝试运行：

```
wsdl service.wsdl /language:CS 
```

应该创建一个名为 Service.cs 的文件，您可以将其包含在您的项目中。

# scala - 如何压制“匹配不穷！” Scala中的警告

> ID：13229930
> 
> 赞同：23
> 
> 时间：2012-11-05T10:12:09.340
> 
> 标签：scala, pattern-matching

我怎么能压制“匹配不是穷举”！以下 Scala 代码中的警告？

```
val l = "1" :: "2" :: Nil
l.sliding(2).foreach{case List(a,b) => } 
```

到目前为止，我发现的唯一解决方案是用附加的 match 语句围绕模式匹配：

```
l.sliding(2).foreach{x => (x: @unchecked) match {case List(a,b) => }} 
```

然而，这使得代码变得不必要地复杂并且非常难以阅读。所以必须有一个更短、更易读的替代方案。有人知道吗？

## 编辑

我忘了提到我的列表`l`在我的程序中至少有 2 个元素。这就是为什么我可以安全地抑制警告。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-05T11:24:53.153

这里有几个选项：

1.  您可以匹配`Seq`而不是`List`，因为`Seq`没有详尽检查（这将失败，就像您原来的一样，在一个元素列表上）：

    ```
    l.sliding(2).foreach{case Seq(a, b) => ... } 
    ```

2.  您可以使用 for 理解，它会默默地丢弃任何不匹配的内容（因此它不会在一个元素列表上执行任何操作）：

    ```
    for (List(a, b) <- l.sliding(2)) { ... } 
    ```

3.  您可以使用`collect`，它也会默默地丢弃任何不匹配的东西（以及在哪里获得迭代器，如果需要，您必须遍历它）：

    ```
    l.sliding(2).collect{case List(a,b) => }.toList 
    ```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-05T10:20:14.863

完成它`; case _ => ???`很短。 `???`只是抛出一个异常。如果您使用的是 2.9 或更早版本（它是 2.10 中的新功能），您可以定义自己的。

与匹配注释所需的相比，它确实很短：

```
(: @unchecked)
; case _ => ???
              ^  One more character! 
```

它不会抛出 a `MatchError`，但这真的很重要吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T10:27:04.107

由于您`sliding(2)`可能返回最后一个列表，其中只有一个元素，因此您还应该对其进行测试：

```
l sliding(2) foreach {
  case a::b::Nil => println("two elements: " + a + b)
  case l         => println("one last element" + l.head)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-09T18:19:59.827

```
implicit class RichAny[A](private val a: A) extends AnyVal {
  @inline
  def match_ignoring_nonexhaustive[B](f: PartialFunction[A,B]): B = f(a)
} 
```

有了这个，您可以执行以下操作，实际上仅将大小写匹配解释为 PartialFunction：

```
l.sliding(2).foreach{ _ match_ignoring_nonexhaustive {case List(a,b) => }} 
```

# android - VerticalSeekBar 和事件

> ID：13229931
> 
> 赞同：1
> 
> 时间：2012-11-05T10:12:14.180
> 
> 标签：android, events, seekbar

这是我的 VerticalSeeker 课程：

```
public class VerticalSeekBar extends SeekBar implements SeekBar.OnSeekBarChangeListener{

    public VerticalSeekBar(Context context) {
        super(context);
        this.setOnSeekBarChangeListener(this);
    }

    public VerticalSeekBar(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public VerticalSeekBar(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(h, w, oldh, oldw);
    }

    @Override
    protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(heightMeasureSpec, widthMeasureSpec);
        setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
    }

    protected void onDraw(Canvas c) {
        c.rotate(-90);
        c.translate(-getHeight(), 0);

        super.onDraw(c);
    }
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (!isEnabled()) {
        return false;
    }

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
            setProgress((int) (getMax() * event.getY() / getHeight()) - 0);
            onSizeChanged(getWidth(), getHeight(), 0, 0);
            break;

        case MotionEvent.ACTION_CANCEL:
            break;
    }
    return true;
}

@Override
public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
}

@Override
public void onStartTrackingTouch(SeekBar seekBar)
{
    Toast.makeText(this.getContext(), "Start", Toast.LENGTH_SHORT).show();
}

@Override
public void onStopTrackingTouch(SeekBar seekBar) {
    Toast.makeText(this.getContext(), "Stop", Toast.LENGTH_SHORT).show();
} 
```

}

有人可以解释一下，为什么只有“onProgressChanged”事件正在触发？如何让“onStartTrackingTouch”和“onStopTrackingTouch”工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T06:48:53.457

至少将您的 Motion 事件切换案例代码更改为

```
case MotionEvent.ACTION_UP:
  setProgress(getMax()- (int) (getMax() * event.getY() / getHeight()));
  onSizeChanged(getWidth(), getHeight(), 0, 0); 
  onChangeListener.onStopTrackingTouch(this); 
```

[在http://hackskrieg.wordpress.com/2012/04/20/working-vertical-seekbar-for-android/](http://hackskrieg.wordpress.com/2012/04/20/working-vertical-seekbar-for-android/)找到了完整的实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T07:55:02.830

公共类 VerticalSeekBar 扩展 SeekBar {

```
public VerticalSeekBar(Context context) {
    super(context);
}

public VerticalSeekBar(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public VerticalSeekBar(Context context, AttributeSet attrs) {
    super(context, attrs);
}

protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(h, w, oldh, oldw);
}

@Override
protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(heightMeasureSpec, widthMeasureSpec);
    setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
}

protected void onDraw(Canvas c) {
    c.rotate(-90);
    c.translate(-getHeight(), 0);

    super.onDraw(c);
}

private OnSeekBarChangeListener onChangeListener;
@Override
public void setOnSeekBarChangeListener(OnSeekBarChangeListener onChangeListener){
    this.onChangeListener = onChangeListener;
}

private int lastProgress = 0;
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (!isEnabled()) {
        return false;
    }

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        onChangeListener.onStartTrackingTouch(this);
        setPressed(true);
        setSelected(true);
        break;
    case MotionEvent.ACTION_MOVE:
        super.onTouchEvent(event);
        int progress = getMax() - (int) (getMax() * event.getY() / getHeight());

        // Ensure progress stays within boundaries
        if(progress < 0) {progress = 0;}
        if(progress > getMax()) {progress = getMax();}
        setProgress(progress);  // Draw progress
        if(progress != lastProgress) {
            // Only enact listener if the progress has actually changed
            lastProgress = progress;
            onChangeListener.onProgressChanged(this, progress, true);
        }

        onSizeChanged(getWidth(), getHeight() , 0, 0);
        setPressed(true);
        setSelected(true);
        break;
    case MotionEvent.ACTION_UP:
        onChangeListener.onStopTrackingTouch(this);
        setPressed(false);
        setSelected(false);
        break;
    case MotionEvent.ACTION_CANCEL:
        super.onTouchEvent(event);
        setPressed(false);
        setSelected(false);
        break;
    }
    return true;
}

public synchronized void setProgressAndThumb(int progress) {
    setProgress(progress);
    onSizeChanged(getWidth(), getHeight() , 0, 0);
    if(progress != lastProgress) {
        // Only enact listener if the progress has actually changed
        lastProgress = progress;
        onChangeListener.onProgressChanged(this, progress, true);
    }
}

public synchronized void setMaximum(int maximum) {
    setMax(maximum);
}

public synchronized int getMaximum() {
    return getMax();
} 
```

}

# mysql - 在rails中将单个质量插入数据库

> ID：13229936
> 
> 赞同：0
> 
> 时间：2012-11-05T10:12:44.130
> 
> 标签：mysql, ruby-on-rails

我想使用类似下面的东西，一次将 1.000.000 条语句插入到我的数据库中。但是在我的模型中，我有一个**before_create :build_a_detail**，它向 user_node_scores 中的每条记录插入另一个表中的关联记录。它们通过 has_one、belongs_to 关系和外键关联。

但是我怎样才能保持这种关联，用一个单一的质量插入！？

```
inserts = []
TIMES.times do
  inserts.push "(3.0, '2009-01-23 20:21:13', 2, 1)"
end
sql = "INSERT INTO user_node_scores (`score`, `updated_at`, `node_id`, `user_id`) VALUES #{inserts.join(", ")} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:30:54.063

正如我所看到的，您在这里尝试做的是使用原始 sql 插入记录，因此您可以使用原始 ActiveRecord 连接来执行您的 sql 命令，（无需通过 ActiveRecord 模型回调）

前任：

```
class User < ActiveRecord::Base

  def raw_sql_insert(sql)
    ActiveRecord::Base.connection.execute(sql)
  end

end 
```

然后打电话`User.new.raw_sql_insert(<your insert sql>)`。

# flash - 从 Ipad 上的 Flex 应用程序导航到另一个应用程序

> ID：13229938
> 
> 赞同：0
> 
> 时间：2012-11-05T10:12:54.560
> 
> 标签：flash, apache-flex, actionscript, adobe, builder

完全是 Flex 的初学者。我需要知道如何在项目上放置一个按钮，该按钮将启动另一个本地 ipad 应用程序并关闭当前正在运行的 flex 应用程序。

只需一个 AIR APP --> Ipad App 映射。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:08:16.367

根据我的阅读，这是不可能的。你甚至不能在 iPad 上执行 File#openWithDefaultApplication。不幸的是，沙盒与实际设备的距离仍然太远。

# sql - 表和临时表之间的区别

> ID：13229946
> 
> 赞同：7
> 
> 时间：2012-11-05T10:13:24.687
> 
> 标签：sql, sql-server, tsql

为什么这段代码可以正常工作：

```
drop table t1 
select * into t1 from  master..spt_values
drop table t1 
select * into t1 from  master..spt_values 
```

输出

```
Msg 3701, Level 11, State 5, Line 1
Cannot drop the table 't1', because it does not exist or you do not have permission.

(2508 row(s) affected)

(2508 row(s) affected) 
```

但这段代码没有：

```
drop table #t1 
select * into #t1 from  master..spt_values
drop table #t1 
select * into #t1 from  master..spt_values 
```

输出

```
Msg 2714, Level 16, State 1, Line 4
There is already an object named '#t1' in the database. 
```

这段代码中的表和临时表有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:33:10.747

为了反驳所有其他错误答案，测试#temp 表的正确方法是

```
if object_id('tempdb..#temp') is not null
   drop table #temp; 
```

* * *

这是一篇关于#temp 表的编译阶段和执行阶段乐趣的[有趣文章。](http://sqlblog.com/blogs/linchi_shea/archive/2010/07/15/temp-table-name-resolution-or-maybe-not.aspx)

* * *

这是[延迟名称解析](http://msdn.microsoft.com/en-us/library/ms190686%28v=sql.90%29.aspx)(DNR) 的 MSDN 参考。为了帮助存储过程创建和语句批处理，`Deferred Name Resolution`在 SQL Server 7 中添加了。在此之前（Sybase），如果不使用大量动态 SQL，在批处理中创建和使用表将非常困难。

但是仍然存在限制，如果名称**确实**存在，SQL Server 将继续检查语句的其他方面，例如表对象的列名。DNR 从未扩展到变量或临时 (#)/(##) 对象，当 SQL Server 2000 中添加内联表值函数时，DNR 也没有扩展到它们，因为 DNR 的目的只是解决多-语句批处理问题。不要混淆，**内联**表值函数不支持 DNR；**多语句**TVF 可以。

解决方法是不使用该模式，而是先创建表，并且只创建一次。

```
-- drop if exists
if object_id('tempdb..#t1') is not null
   drop table #t1; 
-- create table ONCE only
select * into #t1 from master..spt_values where 1=0;
-- .... 
-- populate
insert #t1
select * from master..spt_values
-- as quick as drop
truncate table #t1; 
-- populate
insert #t1
select * from master..spt_values
-- as quick as drop
truncate table #t1; 

-- clean up
drop table #t1; 
```

# android - 如何为我的 android 应用程序构建自定义软键盘？

> ID：13229955
> 
> 赞同：2
> 
> 时间：2012-11-05T10:14:10.193
> 
> 标签：android, android-softkeyboard, android-input-method, android-keypad

我为输入字段开发了一个带有自定义软键的 android 应用程序。它适用于我的 xml 输入字段。我无法将它与 facebook 共享登录对话框集成。我在 google play 中搜索了很多软键板应用程序的设计。我安装了其中一个应用程序，我的设备总是调用新安装的应用程序而不是默认键盘。我只想为我的应用程序做类似的功能。以前我按照下面的链接来构建我的自定义键盘，它仅对我设计的输入字段有用，而不是为 Facebook、Twitter 设计的。

[http://tutorials-android.blogspot.in/2011/06/create-your-own-custom-keyboard-for.html](http://tutorials-android.blogspot.in/2011/06/create-your-own-custom-keyboard-for.html)

请建议我为整个应用程序制作自定义键盘，而不考虑我们应用程序中的第 3 方应用程序集成。

# maven - 如何排除文件被 Maven 复制到爆炸战争中

> ID：13229956
> 
> 赞同：8
> 
> 时间：2012-11-05T10:14:12.127
> 
> 标签：maven, war

我有一个 Java Web 应用程序，其中在标准 webapp 源目录`(src/main/webapp)`中有一些文件夹，我不想复制到战争中（`exploded`或`packaged`）。

我不希望复制这些文件的原因之一是我们在爆炸战争中对 .js 和 .css 文件运行 YUI JS 和 CSS 最小化器和压缩器。我要排除的文件在压缩阶段会产生错误。我不希望他们加入战争的另一个原因是他们支持测试存在于 webapp 中的单页 JS 应用程序（它们是依赖于`node`/的客户端 JS 测试脚本`angular.js`）。

以下是来自的相关部分`POM.xml`：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-war-plugin</artifactId>
  <version>2.1.1</version>
  <executions>
    <execution>
      <id>parent-resources</id>
      <configuration>
        <failOnMissingWebXml>false</failOnMissingWebXml>
        <overlays>
        </overlays>
        <webappDirectory>${project.build.directory}/${project.build.finalName}-work</webappDirectory>
      </configuration>
      <phase>generate-sources</phase>
      <goals>
        <goal>exploded</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

我曾尝试使用`warSourceExcludes`排除某些路径，但没有成功。下面显示了我的使用示例，下面`client/`是一个文件夹`src/main/webapp`：

```
<configuration>
  ...
  <warSourceExcludes>
    <excludes>
      <exclude>
        client/
      </exclude>
    </excludes>
  </warSourceExcludes>
  ...
</configuration> 
```

将 Web 应用程序源目录中的某些路径和/或单个文件排除在爆炸战争中的正确方法是什么？

# 更新

根据@maba 的建议，我将配置更新如下：

```
<configuration>
  <failOnMissingWebXml>false</failOnMissingWebXml>
  <overlays>
  </overlays>                                 
  <webappDirectory>${project.build.directory}/${project.build.finalName}-work</webappDirectory>
  <warSourceExcludes>client/</warSourceExcludes>
</configuration> 
```

文件夹 ,`client/`仍在被复制。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T16:37:14.060

感谢@alexksandr 和@maba 的回答——虽然正确并没有完全解决我的问题。

解决方案似乎是 - 尽管我不确定为什么会这样 - 配置部分在放置在该`execution`部分中时没有被拾取。

采用我原来的 pom.xml 并对其进行重构以使其工作给出：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-war-plugin</artifactId>
  <version>2.1.1</version>
  <configuration>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <overlays>
    </overlays>
    <webappDirectory>${project.build.directory}/${project.build.finalName}-work</webappDirectory>
    <warSourceExcludes>client/</warSourceExcludes>
  </configuration>
  <executions>
    <execution>
      <id>parent-resources</id>
      <phase>generate-sources</phase>
      <goals>
        <goal>exploded</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

重要的细节似乎是配置应该在插件的顶层，而不是在该`execution`部分中——尽管很明显`xml`，我第一次尝试使用`warSourceExcludes`时偏离了目标（请参阅更新部分之前的原始问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-30T14:03:14.860

我找不到有效的 <warSourceExcludes> 配置，但是 <packagingExcludes> 确实有效：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.5</version>
    <configuration>
      <packagingExcludes>excludeMe/**</packagingExcludes>
    </configuration>
  </plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:51:01.173

你`warSourceExcludes`错了。以下是[`maven-war-plugin`](https://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#warSourceExcludes)关于`warSourceExludes`：

> 复制 warSourceDirectory 的内容时要排除的逗号分隔的令牌列表。

所以在你的情况下，你的配置应该是这样的：

```
<configuration>
  ...
  <warSourceExcludes>client/</warSourceExcludes>
  ...
</configuration> 
```

这也意味着，如果您想添加更多排除项，只需将它们用逗号分隔即可：

```
<configuration>
  ...
  <warSourceExcludes>client/,otherDir/,evenMoreDir/</warSourceExcludes>
  ...
</configuration> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T12:09:38.017

为了从文件夹中排除所有文件，请使用这样的通配符`client/**`

```
<configuration>
 <failOnMissingWebXml>false</failOnMissingWebXml>
 <overlays>
 </overlays>                                 
 <webappDirectory>${project.build.directory}/${project.build.finalName}-work</webappDirectory>
 <warSourceExcludes>client/**</warSourceExcludes>
</configuration> 
```

# php - Dreamweaver CS5 记录集未过滤 $_SESSION 变量

> ID：13229958
> 
> 赞同：0
> 
> 时间：2012-11-05T10:14:25.330
> 
> 标签：php, dreamweaver

我正在尝试根据 $_SESSION 变量过滤记录。我有一个简单的表单，将用户名和密码发布到 results.php 页面，其中包含：

```
 <?php
 session_start ();
 $_SESSION['username'] = $_POST['user_name'];
 echo $_SESSION['username'];

 ?> 
```

这可以正常工作并在页面上回显用户名：

然后我想过滤一个记录集并返回基于 $_SESSION['username']; 的 user_id

我有一个记录集过滤器设置（见附件），但它不会返回任何记录 - 测试说没有数据......

![在此处输入图像描述](../Images/556db507ea792e17a777488a77e39cf7.png)

我已经打印了语句，上面写着 SELECT user_id FROM `user`WHERE user_name = '-1' 所以它没有选择 Session 变量 - 我已经研究了一段时间并且无法解决问题 - 任何我出错的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T15:57:43.580

Dreamweaver 存储一个完全命名为“ **MM_Username** ”的会话变量，其中包含登录表单用户名值。语法很重要，**u**是**大写**的。

所以你的运行时值必须是：

```
$_SESSION['MM_Username'] 
```

# mod-rewrite - 在 .htaccess 中出现路径错误（404）

> ID：13229960
> 
> 赞同：0
> 
> 时间：2012-11-05T10:14:27.213
> 
> 标签：mod-rewrite

我正在使用`.htaccess`文件来重定向页面。我已经尝试了绝对和相对两种路径，但在这两种情况下我都收到错误：`URL not found (404)`.

请指导我以正确的方式在 .htaccess 中提及路径

```
RewriteRule ^/abc/([a-zA-Z0-9]+)/?$ /abc.php?tag=$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:35:03.310

您可能需要`RewriteBase /`.

尝试在你的之前添加它`RewriteRule`，即：

```
RewriteEngine On
RewriteBase / 
```

还尝试在之前删除斜线`abc`：

```
RewriteRule ^abc/([a-zA-Z0-9]+)/?$ abc.php?tag=$1 
```

* * *

调试 URL 重写的一种好方法是打开重写日志记录。

在 Apache 2.2 中：

```
RewriteLog file-path.log
RewriteLogLevel 3 
```

Apache 2.4 的语法不同。[在这里阅读更多](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#RewriteLog)。

# c# - 使用 stylecop 设置布尔变量规则

> ID：13229961
> 
> 赞同：1
> 
> 时间：2012-11-05T10:14:29.857
> 
> 标签：c#, visual-studio-2010, stylecop

一个布尔变量必须有一个前缀是，例如：`bool isFinished;` 我怎样才能为它写一个自定义规则？（我正在使用 stylecop）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:57:15.140

您可以创建自己的[自定义 StyleCop 规则](http://stylecopplus.codeplex.com/wikipage?title=How%20to%20Create%20StyleCop%20Custom%20Rule)。您基本上会创建另一个 .dll，然后您可以将其放入您的 StyleCop 目录。通过这种方式，您可以创建对您的团队有意义的自定义规则，并且仍然可以利用 StyleCop 的未来版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:54:58.163

您将需要

*   从[StyleCop 下载页面](http://stylecop.codeplex.com/releases/view/79972)下载 SDK 。
*   查看有关[如何设置环境以构建 StyleCop](http://stylecop.codeplex.com/wikipage?title=SetUpDevBox&referringTitle=Documentation)的详细信息。

一个好的起点是复制和修改[现有规则](http://www.stylecop.com/docs/Naming%20Rules.html)之一。

# php - magento 成功页面变量

> ID：13229965
> 
> 赞同：2
> 
> 时间：2012-11-05T10:14:37.103
> 
> 标签：php, magento, checkout

我正在尝试捕获一些 magento 成功页面变量以传递给我们的广告公司。

到目前为止，我已经得到了这个，但变量没有输出任何东西：

```
<?php 
$items = $order->getItemsCollection();
foreach ($items as $item)
{
    $price="'".$item->getPrice()."', ";
    $qty="'".$item->getQty()."', ";
    $sku="'".$item->getSku()."', ";
}
?> 
```

数据需要采用以下格式：

```
'price1', 'price2', 'price3'
'qty1', 'qty2', 'qty3'
'sku1', 'sku2', 'sku3' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:51:14.450

尝试将此添加到 Success.phtml

```
$order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
$items = $order->getItemsCollection();

$price = $qty = $sku = array();
foreach($items as $item){
  $price[] = $item->getPrice(); 
  $qty[] = $item->getQty();
  $sku[] = $item->getSku();
}

echo "'" . implode("', '", $price) . "'";
echo "'" . implode("', '", $qty) . "'";
echo "'" . implode("', '", $sku) . "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:27:25.400

在您的 success.phtml 页面上，您可以这样做：

```
$order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId()); // follow the RS tip.
$items = $order->getItemsCollection();
foreach($items as $item){
    $price = $item->getData('price'); 
    $qty = $item->getData('qty');
    $sku = $item->getData('sku');
} 
```

血糖仪

# qlikview - 如何对位于开始日期和结束日期之间的一组值求和？

> ID：13229966
> 
> 赞同：5
> 
> 时间：2012-11-05T10:14:40.200
> 
> 标签：qlikview

我创建了两个下拉列表

```
 1\. start date 
 2\. end date 
```

我使用 MySQL 数据库作为源，并且我有一个名为`generation` 具有 ( `date , generation, turbine_id`) 列的表。

选择`start date`and后`end date`，我需要对位于两个日期之间的相应值求和：

```
sum({<Date= {"<=$(=vStartDate)>=$(=vEndDate)"}> } Target) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T08:36:11.390

我看到您已经创建了两个变量，vStartDate 和 vEndDate，因此您可以使用日历或输入框来操作它们。

在这种情况下，您的集合表达式几乎是好的。它看起来像这样：

```
Sum({$<Date = {">=$(=vStartDate)<=$(=vEndDate)"}>} Target) 
```

所以在大括号中它以 $ 符号开头，它代表当前选择，它将被表达式过滤。在双引号中，您告诉 Date 的值应该大于或等于评估的`=vStartDate`表达式（评估是通过使用美元符号表达式完成的），并且小于 vEndDate。这就是它的工作原理。

# javascript - JS：数字和空格的正则表达式？

> ID：13229968
> 
> 赞同：10
> 
> 时间：2012-11-05T10:14:49.083
> 
> 标签：javascript, regex, validation, zepto, happy

我正在使用[happyJS](http://happyjs.com/)并使用下面的正则表达式进行电话验证

```
phone: function (val) {
        return /^(?:[0-9]+$)/.test(val);
    } 
```

但是，这只允许数字。我希望用户能够输入空格以及喜欢

```
238 238 45383 
```

知道为什么`return /^(?:[0-9 ]+$)/.test(val);`不这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T10:22:01.003

这是我建议的解决方案：

```
/^(?=.*\d)[\d ]+$/.test(val) 
```

断言输入`(?=.*\d)`中至少有一位数字。否则，只有空格的输入可以匹配。

请注意，这不会对位数（仅确保至少有 1 位）或空格应出现在输入中的位置施加任何限制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T10:20:26.280

尝试

```
phone: function (val) {
    return /^(\s*[0-9]+\s*)+$/.test(val);
} 
```

必须至少存在一个数字才能使上述成功，但请查看 [此处的正则表达式示例](https://regex101.com/r/hoQpWO/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-25T11:14:24.080

尝试

```
/^[\d ]*$/.test("238 238 45383") 
```

```
console.log(/^[\d ]*$/.test("238 238 45383"));
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:23:00.443

我个人使用此代码，它可以正常工作：

```
function validateMobile(mob) 
{ 
     var re = /^09[0-9]{9}$/
     if(mob.match(re))
         return true;
     else
        return false; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-21T06:56:08.700

您可以尝试以下正则表达式来检查数字和空格。

```
function isTextAndNumberSpaceOnly(text) {
    var regex = /^[0-9 ]+$/;
    if (regex.test(text)) {
        return true;
    } else {
        return false;
    }
} 
```

# joomla - Joomla 待办事项列表扩展

> ID：13229969
> 
> 赞同：0
> 
> 时间：2012-11-05T10:14:49.480
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla1.7, joomla-module

是否有任何 Joomla 扩展程序允许任何注册用户保留具有以下属性的待办事项列表；1\. 标题 2\. 截止日期 3\. 描述。在输入表单中，标题应该是文本字段，到期日期应该是在 Joomla API 中找到的弹出日历，并且描述应该使用 Joomla 安装中默认的 WYSIWIG 编辑器。

我已经搜索了这个特定的扩展或任何与此接近但无济于事的扩展。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:34:56.320

您应该能够使用[Joomla 组件创建](http://www.notwebdesign.com/joomla-component-creator/)器自己创建该组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T07:55:50.513

我在寻找完全相同的东西时发现了这个问题：推荐支持开发人员/管理员通信和任务跟踪的扩展。Joomla 扩展目录既没有论坛也没有问答结构。如果在这里鼓励这种问题，那就太好了。

# javascript - 剔除过滤

> ID：13229970
> 
> 赞同：2
> 
> 时间：2012-11-05T10:15:03.577
> 
> 标签：javascript, mvvm, knockout.js

我已将以下过滤器添加到我的视图模型中：

```
contactsViewModel.filterItems = ko.computed(function () {
                var filter = this.filterInput().toLowerCase();
                if (!filter || !this.hasEnoughChars()) {
                    // Simply keep the results if input is empty or less 3 chars are in it
                    return this.contacts();
                } else {
                    // iterate through the JSON again
                    return ko.utils.arrayFilter(this.contacts(), function (item) {                        
                        // Return the objects that contain the filter term
                        // ko.utils.stringContains is not part of knockout
                        // Manually added to knockout-2.2.0.debug.js line 238
                        return ko.utils.stringContains(item.firstName().toLowerCase(), filter)
                            || ko.utils.stringContains(item.lastName().toLowerCase(), filter)
                            || ko.utils.stringContains(item.email().toLowerCase(), filter)
                            || ko.utils.stringContains(item.company().toLowerCase(), filter);                        
                    });
                }
            }, contactsViewModel); 
```

如何通过减少调用 stringContains 的次数来改进此代码？我希望能够写：

```
return ko.utils.stringContains(item.FirstName().toLowerCase() || item.lastName().toLowerCase() || item.email().toLowerCase() || item.company().toLowerCase(), filter); 
```

但是当我这样做时，stringContains 没有返回正确的值

**从淘汰赛开始：**

```
stringContains: function (string, contains) {
            string = string || "";
            return string.indexOf(contains) != -1;
        } 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:02:01.143

使用**ko.utils.arrayFilter**：

```
return ko.utils.arrayFilter([item.FirstName().toLowerCase(), item.lastName().toLowerCase(), item.email().toLowerCase(), item.company().toLowerCase()], function (str) { return str.indexOf(filter) != -1  }).length > 0; 
```

# html - 如何正确编写来自asp的电子邮件的html正文？

> ID：13229971
> 
> 赞同：0
> 
> 时间：2012-11-05T10:15:02.630
> 
> 标签：html, asp-classic

我正在从 asp 生成 html 电子邮件正文，但生成的 html 代码在每个电子邮件客户端（gmail、webmail、outlook）中几乎没有变化。在他们每个人中，电子邮件看起来都不同，代码也有不同的变化。例如，我用这样的循环做标签：

```
subtotal=0
while not Rs.EOF
subtotal= subtotal + (rs.Fields("Cantidad_LINFACTURA") * rs.Fields("PrecioUnitario_LINFACTURA"))

mensaje= mensaje + "<tr><td align='right'>" + CStr(rs.Fields("Cantidad_LINFACTURA"))+ "</td><td>" + rs.Fields("Descripcion_LINFACTURA") + "</td><td align='right' width='100'>" + CStr(formatNumber(rs.Fields("PrecioUnitario_LINFACTURA"),2)) + " &#8364;</td><td align='right' width='100'>" + CStr(formatNumber(rs.Fields("Cantidad_LINFACTURA") * rs.Fields("PrecioUnitario_LINFACTURA"),2) + " &#8364;</td><td></td></tr>"
rs.moveNext
wend 
```

这没有样式，但有时（可能是因为数据）在一个单元格中，并且只有一个单元格`align="right"`在某些电子邮件服务器中出现没有属性。
抱歉解释，但我真的很沮丧我不知道为什么会这样。我的临时解决方案是不使用样式，但`align=right`属性也失败了。

第三个出现时没有样式，但我都是用 asp 循环编写的，以同样的方式。这怎么可能？

# regex - 如何在 postgres sql 中使用正则表达式获取特定数据

> ID：13229972
> 
> 赞同：2
> 
> 时间：2012-11-05T10:15:05.263
> 
> 标签：regex, postgresql

如果列包含字母数字以外的特殊字符，我需要获取它的值。

前任：`select name from data;`

```
name

ACD12
A12DD
A_C12
A@CD
AB_M1
123AB 
```

我需要编写一个正则表达式来从上表中获取以下数据：

```
A_C12
A@CD
AB_M1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:48:04.860

您需要一个表示“任何包含至少一个非字母数字字符的字符串”的表达式：

```
SELECT name FROM table1 WHERE name ~ '[^[:alnum:]]' 
```

见：[http ://sqlfiddle.com/#!12/2edd5/15](http://sqlfiddle.com/#!12/2edd5/15)

我没有使用过`\W`，因为它相当于`[^[:alnum:]_]`并且您不想要下划线。请参阅[有关正则表达式的 PostgreSQL 文档](http://www.postgresql.org/docs/current/interactive/functions-matching.html)。

# c# - 从 DataGridView 插入多条记录

> ID：13229973
> 
> 赞同：1
> 
> 时间：2012-11-05T10:15:09.027
> 
> 标签：c#, gridview

此代码仅适用于第一行和 . 我希望此代码与其余行一起使用：

```
private void Save_Click(object sender, EventArgs e)
{
    textBox1.Text =orderdetailsDataGridView.Rows.Count.ToString();
    try
    {
        using (SqlCommand cmd = new SqlCommand())
        {
            con.Open();
            cmd.Connection = con;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "OD1";
        foreach (DataGridViewRow row in orderdetailsDataGridView.Rows)
        {
            if (!row.IsNewRow)
            {
                for (int x = 0; x < orderdetailsDataGridView.Rows.Count; x++)
                {
                    cmd.Parameters.Add("@order_id", SqlDbType.Int).Value = row.Cells[0].Value;
                    cmd.Parameters.Add("@prod_id", SqlDbType.Int).Value = row.Cells[1].Value;
                    cmd.Parameters.Add("@qun", SqlDbType.Int).Value = row.Cells[2].Value;
                    cmd.Parameters.Add("@price", SqlDbType.Decimal).Value = row.Cells[3].Value;
                    cmd.ExecuteNonQuery();
                    x++;

                }
            }
        }

    }
}
catch (Exception er)
{
    MessageBox.Show(er.ToString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:38:45.553

我建议你`modify nested structure`

```
 foreach (DataGridViewRow row in orderdetailsDataGridView.Rows)
            {
                if (!row.IsNewRow)
                {
                    for (int x = 0; x < orderdetailsDataGridView.Rows.Count; x++)
                    {
                        using (SqlCommand cmd = new SqlCommand())
                        {
                           con.Open();
                           cmd.Connection = con;
                           cmd.CommandType = CommandType.StoredProcedure;
                           cmd.CommandText = "OD1";
                           cmd.Parameters.Add("@order_id", SqlDbType.Int).Value = row.Cells[0].Value;
                           cmd.Parameters.Add("@prod_id", SqlDbType.Int).Value = row.Cells[1].Value;
                           cmd.Parameters.Add("@qun", SqlDbType.Int).Value = row.Cells[2].Value;
                           cmd.Parameters.Add("@price", SqlDbType.Decimal).Value = row.Cells[3].Value;
                           cmd.ExecuteNonQuery();
                        }
                        x++;
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:46:07.760

我认为您没有编写正确的代码。在 foreach 循环中，您从 GridView 中一一获取行，然后再次运行内部循环，使用 gridview 的计数，在此内部循环中，直到此循环停止为止，您正在使用与您相同的“行”已在 foreach 循环中提取。我不确定，如果我弄错了，但理想情况下这是不行的。

# html - 由于文本渲染，日文字符在 chrome 中显示为框：优化易读性；

> ID：13229976
> 
> 赞同：2
> 
> 时间：2012-11-05T10:15:21.477
> 
> 标签：html, google-chrome, css, internationalization, text-rendering

在我的网站中，我使用的是[Font-Awesome](http://fortawesome.github.com/Font-Awesome/)库。`text-rendering: optimizelegibility;`它在标题标签上应用 css 属性。当 laguage 是日语时，这会破坏我的网站。

正如您在[DEMO](http://jsfiddle.net/urvNf/)中看到的那样，使用此属性时会显示框。我真的不明白这个属性的作用，所以将它覆盖为自动是否安全？

注意：此属性在 Firefox 中运行良好，但在 google chrome 中出现问题。

感谢帮助 ：）

编辑：这个问题特定于window-XP

我还在 chrome 网站上打开了一个问题：[http ://code.google.com/p/chromium/issues/detail?id=159391](http://code.google.com/p/chromium/issues/detail?id=159391)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:24:30.623

Font Awesome 使用字体技巧，该技巧基于使用包含标志性图像的字体来代替特殊字体中的普通字符。这种诡计最有效，因为特殊字体作为可下载字体提供了有关字符支持的错误信息。但我不明白 Font Awesome 与问题的关系。我在 Font Awesome 包中的 CSS 文件中看不到任何与标题相关的 CSS 代码。如果标题元素的`class`属性与 Font Awesome 中使用的属性一致，它可能会间接影响标题。在这种情况下，请在此处更改类名。

而且那里也没有`text-rendering`设置。我怀疑该设置来自另一个来源。

在任何情况下，[`text-rendering`](https://developer.mozilla.org/en-US/docs/CSS/text-rendering)都可以安全地删除属性设置（或设置为`auto`初始值）。它具有印刷性质，*已知*和有些记录的效果与字距调整和连字有关，无论如何这可能不适用于日语写作。它可能还有其他影响，而且它的规范非常模糊。在某些情况下，Chrome 可能会尝试使用在（某些版本的）Windows XP 中失败的渲染技术。

在虚拟 Windows XP 中测试您的演示，这可能对应于旧的开箱即用 XP，根本不显示日文字符。似乎没有字体包含它们。不同的XP安装可能添加了字体，比如MS Office自带的Arial Unicode MS，然后问题就变了。

# java - Java 嵌套泛型类型不匹配

> ID：13229979
> 
> 赞同：17
> 
> 时间：2012-11-05T10:15:34.117
> 
> 标签：java, generics, java-6, nested-generics

在以下示例中：

```
public static void main(String[] args) {

    List<String> b = new ArrayList<String>();
    first(b);
    second(b);

    List<List<String>> a = new ArrayList<List<String>>();
    third(a);
    fourth(a);  // doesnt work

}

private static <T> void first(List<T> a){
    System.out.println("List of T");
}

private static void second(List<?> a){
    System.out.println("List of anything ");
}

private static <T> void third(List<List<T>> a){
    System.out.println("List of a List of T ");
}

private static void fourth(List<List<?>> a){
    System.out.println("List of a List of anything ");
} 
```

**为什么对 second(b) 的调用有效，而对 Fourth(a) 的调用却没有**？

我收到以下错误：

```
The method fourth(List<List<?>>) in the type `TestTest` is not applicable for the arguments (`List<List<String>>`) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T10:30:02.290

如果您希望能够`fourth`使用`List<List<String>>`参数进行调用，那么您需要将您的签名更改为：

```
private static void fourth(List<? extends List<?>> a){
    System.out.println("List of a List of anything ");
} 
```

以上将起作用，因为不像`List<List<?>>`,`List<? extends List<?>>`与`List<List<String>>`. 这样想：

```
List<List<String>> original = null;
List<? extends List<?>> ok  = original; // This works
List<?> ok2                 = original; // So does this
List<List<?>> notOk         = original; // This doesn't

List<Integer> original      = null;
List<? extends Number> ok   = original; // This works
List<?> ok2                 = original; // So does this
List<Number> notOk          = original; // This doesn't 
```

道理很简单。如果你有

```
private static void fourth(List<List<?>> a) {
    List<?> ohOh = Arrays.asList(new Object());
    a.add(ohOh);
} 
```

然后，如果您*可以这样*调用该方法：

```
List<List<String>> a = new ArrayList<List<String>>();
fourth(a);
String fail = a.get(0).get(0); // ClassCastException here! 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T10:26:48.173

A`List<List<String>>`不是`List<List<?>>`.

无论是什么，您都应该能够将任何内容`List<?>`放入. A只会接受 a 。`List<List<?>>``?``List<List<String>>``List<String>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T10:35:43.287

> 这意味着该类型是未知的，并且可以将任何类型的对象添加到`List<List<?>>` 其中，`heterogeneous`并且编译器不能保证其中的所有对象`List<List<?>>`都是相同的类型。因此，它不能传递`ArrayList<List<String>>()`给以有界类型作为参数的 new。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T10:27:44.243

`List<List<String>>`不一样`List<List<?>>`。泛型本质上是不变的。如果您只做`List<?>`并通过`List<String>`，那么它将起作用，因为`List of Anything`可以用`Lists of String`.

但`List of List of anything`不能用 来表示`List of List of String`。

[`@Lukas Elder`](https://stackoverflow.com/questions/13229979/java-nested-generic-type-mismatch/13230201#13230201)已经指定了可行的案例。这是第二种可行的情况

```
private static void fourth(List<?> a){
    System.out.println("List of anything ");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-08T12:25:49.300

```
List<List<?>> == List {                 //That contains any unknown type lists
                        List<Integer>,
                        List<String>,
                        List<Object>
                      } 
```

然而

```
List<? extends List<?> == List {       //That contains same unknown type lists
                        List<Integer>,
                        List<Integer>,
                        List<Integer>
                      } 
```

所以在这里

```
 List<List<String>> == List {        //That contains same String lists
                        List<String>,
                        List<String>,
                        List<String>
                      } 
```

因此`List<? extends List<?>`是超级类型`List<List<String>>`和可分配的。

因此，调用您的方法的有效值`fourth`如下。

```
 List<List<?>> a1 =  new ArrayList<List<?>>();
    a1.add(new ArrayList<String>());
    a1.add(new ArrayList<Integer>());
    a1.add(new ArrayList<Object>()); 
```

# migration - 从 Visual Source Safe 迁移后缺少外部

> ID：13229988
> 
> 赞同：1
> 
> 时间：2012-11-05T10:16:07.193
> 
> 标签：migration, visual-sourcesafe, visualsvn-server, svn-externals

> **可能重复：**
> [如何将 vss 存储库中的链接文件迁移到 svn 存储库](https://stackoverflow.com/questions/909218/how-linked-files-in-vss-repository-can-be-migrated-to-svn-repository)

我目前刚刚使用 VSS2SVN 开源代码将 Visual SourceSafe 数据库迁移到 VisuallSVN。但是我发现外部链接丢失了。它确实迁移了链接历史记录，但我需要手动配置外部吗？这是一个如此庞大的数据库。任何迁移工具或代码都可以自动迁移和设置外部？

# ipad - 可可：场景与视图

> ID：13229990
> 
> 赞同：1
> 
> 时间：2012-11-05T10:16:17.153
> 
> 标签：ipad, cocoa, model-view-controller, scene

菜鸟问题在这里。我想我掌握了三个基本模型-视图-控制器元素的基础知识。有点。但什么是场景？我知道 iPad 的每个屏幕可以有多个场景，而 iPhone/iPod 只能有一个。但是一个场景如何与一个视图相关联呢？

如果我弄错了，请善待:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:26:49.083

“场景”是 Apple 引入 XCode 的 UI 抽象，以允许在 Interface Builder 中使用故事板机制。

在此之前，在 Interface Builder 中，您创建（并且仍然可以）附加到 ViewControllers 的视图。

使用 Scenes、Segues 和 Storyboard，您可以通过“segue”定义从附加到视图控制器（场景）的视图到另一个场景的 UI 流。segue 是您可以在 Interface Builder 中可视化定义为移动到另一个视图的触发器的操作（附加到视图控制器）

在抽象级别上，场景**是**附加到视图控制器的视图，无论是 iPhone 还是 iPad，您都可以在 XIB 中拥有任意数量的视图。

这实际上只取决于您是在故事板编辑器还是界面构建器中。您可以选择创建项目来为您的新 iOS 项目创建故事板。

# database - 动态需求的数据库结构

> ID：13229992
> 
> 赞同：0
> 
> 时间：2012-11-05T10:16:20.320
> 
> 标签：database, database-design, data-structures

在我们的工单系统中，根据工单的不同需求，我们需要不同的表结构来为每种工单存储不同类型的字段。例如，客户投诉产品的票证，需要客户编号。和产品ID，但简单查询的票证不需要产品ID。某些类型的票可能不需要客户编号。还。

我们还需要该系统的分析和报告功能，其中包括产品详细信息和客户详细信息等动态详细信息。

作为一种解决方案，我想到了非 SQL 数据库（这里是 Cassandra），它可以支持动态数据库结构并提高分析和报告功能的效率。但是我之前没有使用过任何非 SQL 数据库，所以我不太确定这个解决方案。

任何人都可以提出任何更好的解决方案或对这个问题的非 SQL 解决方案有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:07:02.480

我推荐的设计类似于我在面向对象语言中的做法。这将产生潜在复杂连接的开销和多个表的开销。我会像这样布置我的数据库：

```
Table GeneralTickets  
(  
    ticket_id number,  
    customer_id number,
    ... other fields that are **common to all tickets**
)    

Table ComplaintTickets
(  
    complaint_id number,
    ticket_id number (FK to GeneralTickets#ticket_id),  
    product_id number,
    ... other fields
)   

Table FeatureTickets  
(  
    feature_id number,
    ticket_id number (FK to GeneralTickets#ticket_id),  
    ... other fields
) 
```

在这种情况下，No-SQL 解决方案不是您要寻找的，因为这个问题 1) 更适合关系数据库，2) 我非常怀疑您记录的数据量与 No-SQL 解决方案一样多。

**更新**

在报告功能方面，我仍然坚持使用关系数据库。您基本上有一个需要解决的数据仓库问题。您想要做的是拥有一系列基表（这些将是最终构建您的报告的表）。从这些基表中，您将创建所谓的`materialized views`. 这些`materialized views`将处理给定时间范围内的所有数据（即您的一月份报告）。

> 正如您所说，复杂联接和多个表的开销是我考虑 No-SQL 解决方案的主要因素。SQL 解决方案会增加维护并降低性能。我认为，工单系统与其他系统没有紧密绑定，对于产品详细信息或客户详细信息等其他详细信息，我们可以从 SQL DB 同步更改事件。你能解释一下你如何看待第二个问题吗？

现在到你留下的评论。只有写得不好的 SQL 才会变慢，这就是笛卡尔连接和简单索引查找之间的区别。维护在所有这一切中都只占很小的一部分。但是，如果没有看到您的域对象（在您处理结果集后初始化的类），我就无法谈论维护方面。您的域可能需要修改为比现在**更正确**（不是说它不正确，只是它可能更正确）。保持多个系统同步将是您最不想做的事情之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:07:11.783

称我为老式的，但我想我会建议一个常规的关系数据库。部分原因是如果“变化的需求”实际上*是*变化的，它们需要 NoSQL 解决方案而不是参照完整性和 ACID 属性，我会感到惊讶。部分原因是我知道对于常规 RDBMS，有各种各样的报告解决方案可用。

我的意思是，您不能只使用可选（即可为空）字段对票证建模，或者定义票证的几种子类型（即使用继承 - 请参阅[http://blogs.microsoft.co.il/blogs/bursteg/archive/2007 /09/30/how-to-model-inheritance-in-databases.aspx](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/09/30/how-to-model-inheritance-in-databases.aspx)）。

# forms - symfony2 表单创建具有多对一关系和现有外键

> ID：13229994
> 
> 赞同：1
> 
> 时间：2012-11-05T10:16:27.883
> 
> 标签：forms, symfony, one-to-many

我正在尝试为与另一个实体具有多对一关系的实体设置创建表单。

这些是我的实体：

```
class EvntEvents
{

/**
* Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * @ORM\OneToMany(targetEntity="EvntSessions", mappedBy="eventFk")
 * 
 * @var ArrayCollection $sessions
 * 
 */
protected $sessions;

/**
 * Add sessions
 *
 * @param Technogym\EventsBundle\Entity\EvntSessions $sessions
 * @return EvntEvents
 */
public function addSession(\Technogym\EventsBundle\Entity\EvntSessions $sessions)
{
$this->sessions[] = $sessions;

return $this;
}

/**
 * Get sessions
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getSessions()
{
 return $this->sessions;
}
} 
```

后一个实体记录已经存在，所以我想将其 id 作为隐藏字段包含在表单中，如下所示：

```
$entity = new EvntSessions();
$entity->setEventFk($event);
$form   = $this->createForm('form_sessions', $entity); 
```

表单显示正确，但在提交时出现以下错误：

UnexpectedTypeException：“对象或数组”类型的预期参数，给出“NULL”

所以我在绑定请求之前创建了关系：

```
$event->addSession($entity);
$entity->setEventFk($event); 
```

但我收到以下错误：

PropertyAccessDeniedException：属性“id”在“EvntEvents”类中不是公共的。也许您应该创建方法“setId()”？

所以我不明白我的错误在哪里。也许我不明白他在教义关系背后的模型？