# StackOverflow 问答 15743000-15743999

# jquery - 在 JQuery 中比较日期和时间

> ID：15743013
> 
> 赞同：2
> 
> 时间：2013-04-01T11:55:06.853
> 
> 标签：jquery

我想在 jquery 中按日期比较一些消息。 **例如：** 我有一个由用户端填充的**文本框**值。`04/01/2013 13:15:32`并且 jquery 变量中的当前日期时间`04/01/2013 18:30:12` 好像文本框值小于当前日期时间然后显示一条消息：

```
function foo(){
    usrDate = jQuery("#txtDate").val(); //getting user input date time

    currentDate = new Date(); //system current date
    currentMonth = currentDate.getMonth() + 01;
    currentDay = currentDate.getDate();
    currentYear = currentDate.getFullYear();
    currentHours = currentDate.getHours();
    currentMinutes = currentDate.getMinutes();
    currentSeconds = currentDate.getSeconds();

    currentcpDateTime = currentMonth + "/" + currentDay + "/" + currentYear + " " + currentHours + ":" + currentMinutes + ":" + currentSeconds;
       if (usrDate > currentcpDateTime ) {
       alert("you can not choose date greater then current");   
    }
   else {
      alert("valid date");
 }
} 
```

每次都是错误的结果。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:07:19.803

为什么不使用像 jQuery UI 这样的框架，你可以像下面这样简单地做到这一点

你的 HTML

```
<p>Date: <input type="text" id="datepicker" /></p>
<input type="button" id="checkDate" value="CheckDate"> 
```

你的 JS

```
$(document).ready(function(){
    $( "#datepicker" ).datepicker();
    $('#checkDate').bind('click',function(){
        var myDAte = $('#datepicker').datepicker( "getDate" );
        var curDate = new Date();

        if(curDate>myDAte){
            alert('current date is high');
        }
        else{
            alert('selected date is high');
        }
    });
}); 
```

查看示例`**[Live fiddle](http://jsfiddle.net/mayooresan/bw3Mz/)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T23:03:21.400

检查此处提供的解决方案它可能会有所帮助，我在我的项目中使用它。您可以节省从头开始编写所有代码的时间。[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/) .（在页面末尾）

# php - PHP 在 EOF 中添加函数

> ID：15743016
> 
> 赞同：1
> 
> 时间：2013-04-01T11:55:14.947
> 
> 标签：php, mysqli, eof

我需要为我的结果 ID 添加任何功能，`EOF`但我在页面中看到这一行并且无法使用我的功能。如何解决这个问题？！

```
{design_num('61')} 
```

我的PHP：

```
$stmt->bind_result($Id,$first_name, $last_name);

$content = <<< EOF
  <tr>
  <td style="text-align:center;">{design_num($Id)}</td> 
  <td style="text-align:right;"><a href="#">{$first_name}</td>
  <td style="text-align:right;">{$last_name}</td>
  </tr>                                                     
EOF; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:09:41.440

可行，但需要强大的魔法才能完成这个任务

```
$design_num = design_num($Id);
$content = <<< EOF
  <tr>
  <td style="text-align:center;">$design_num</td> 
  <td style="text-align:right;"><a href="#">$first_name</td>
  <td style="text-align:right;">$last_name</td>
  </tr>                                                     
EOF; 
```

# php - 列出 PostregSQL 中的匹配记录

> ID：15743019
> 
> 赞同：0
> 
> 时间：2013-04-01T11:55:23.670
> 
> 标签：php, sql, postgresql, indexing, pattern-matching

我正在研究将输入值与存储记录进行比较的搜索部分。数据库具有像 AB 09 CD 1234 这样的值。我已经爆炸（带空格）输入字符串以匹配存储的值，但是当我给出像 AB09 CD 1234 这样的输入时，它不会产生高于记录的结果。

```
SELECT * FROM some_vehicle WHERE vehicle_number ILIKE E\'%AB09 CD 1234%' 
```

db 中的车辆编号：`AB 09 C D 1234`
输入字符串：`AB09 CD 1234`

我希望通过输入字符串的组合来获得所有可能的场景。有没有办法在 PostgreSQL 中做到这一点？

“替换”功能能够消除字符串中的空格。PostgreSQL中是否有任何方法可以消除所有特殊字符以及空格。我正在尝试不同的正则表达式，例如

regexp_replace(vehicle_number,'[^a-z0-9\s]', '') 和 regexp_replace(vehicle_number,'[(|-|)|\:|\@|#|\$|*|.|!| \,]', '') 但它不起作用。

谢谢

试了几次才明白！非常接近它。"[^a-zA-Z0-9]" 模式消除了所有特殊字符，包括带有 'g' 选项的空格作为 PostgreSQL 中 regexp_replace 的第四个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:58:28.620

你可以这样做，从两个值中消除所有空格：

```
SELECT * FROM some_vehicle
WHERE replace(lower(vehicle_number), ' ', '') =
      replace(lower('AB09 CD 1234'), ' ', ''); 
```

或者，如果您想保留子字符串匹配：

```
SELECT * FROM some_vehicle
WHERE replace(lower(vehicle_number), ' ', '') LIKE
      ('%' || replace(lower('AB09 CD 1234'), ' ', '') || '%'); 
```

请注意，这将无法使用您当前拥有的任何索引，`vehicle_number`并且*将*导致 seq 扫描（或者可能是索引扫描，如果幸运的话），除非您创建专门的表达式索引来有效地处理此查询：

```
CREATE INDEX ON some_vehicle (( replace(lower(vehicle_number), ' ', '') )); 
```

（使用的子字符串查询`LIKE`将[无法使用任何索引](http://www.postgresql.org/docs/8.1/static/indexes-types.html)，因为模式以 开头`%`。）

另一种选择是，如果您的`vehicle_number`值总是在完全相同的位置有空格，则将这些值存储为不带空格的值，并将空格插入显示层（或视图中），因为您确切知道它们将在哪里。然后，您可以简单地从任何搜索值中去除空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:04:31.097

如果您想将索引与[@cdhowie 提供](https://stackoverflow.com/a/15743069/939860)的查询类似（如果这是对大表的常见查询，您应该使用该查询），请使用附加模块[**pg_trgm**](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)提供的功能三元索引：

```
CREATE EXTENSION pg_trgm; -- once per database

CREATE INDEX some_name_idx ON some_vehicle
USING GIN (replace(vehicle_number, ' ', '')  gin_trgm_ops); 
```

我没有使用`lower()`，因为这不是你的问题。匹配的查询将是：

```
SELECT * FROM some_vehicle
WHERE replace(vehicle_number, ' ', '')
      LIKE ('%' || replace('AB09 CD 1234', ' ', '') ||  '%'); 
```

关于 SO 的相关答案：
[有效地查询包含子字符串的列](https://stackoverflow.com/questions/10168486/effectively-query-on-column-that-includes-a-substring/10168546#10168546)
或[dba.SE 上](https://dba.stackexchange.com/questions/2195/how-is-like-implemented/10856#10856)的这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:57:53.930

如果您的意思是空间组合，那么：

```
SELECT * FROM some_vehicle WHERE vehicle_number ILIKE E\'%A%B%0%9%C%D%1%2%3%4%' 
```

# grails - 如何在 ubuntu 中运行像 sudo grails 这样的命令？

> ID：15743021
> 
> 赞同：0
> 
> 时间：2013-04-01T11:55:30.137
> 
> 标签：grails, ubuntu, path

我对 Ubuntu 很陌生，我正在尝试使用 sudo 权限运行 grails，例如：

```
sudo grails 
```

但我得到：

```
sudo: grails: command not found 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:28:41.120

如果您在 bin grails 文件夹中执行命令，则需要执行以下操作：

```
sudo ./grails 
```

# asp.net - 寻找一种聪明的方法来添加 90% 相似的新着陆页。(asp.net)

> ID：15743024
> 
> 赞同：0
> 
> 时间：2013-04-01T11:55:36.540
> 
> 标签：asp.net

在一个 Asp.net 网站中，我通过创建一个源自通用母版页的新页面来不断添加新的登录页面。这些“新”页面 90% 是相同的（只有背景图像不同）。

我最终在我的解决方案中使用了 10 多个类似的 .aspx 页面。有没有办法更聪明地做到这一点。（不必为每个“新”页面添加不同的 .aspx）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:00:29.030

添加一些呈现 CSS`body {background-image:url(...)}`部分的代码怎么样？这甚至不需要有代码隐藏的 DLL 文件就可以解决问题：

```
<% string[] backgrounds = {"b1.jpg", "b2.jpg", "b3.jpg"};
   Random rnd = new Random();
   string background = backgrounds[rnd.next(0, backgrounds.length)];
%>
<style type="text/css">
  body {background-image:url("<%=background%>");}
</style> 
```

# spring-data-neo4j - 我们如何在springdata neo4j中使精确索引不区分大小写

> ID：15743027
> 
> 赞同：1
> 
> 时间：2013-04-01T11:56:00.420
> 
> 标签：spring-data-neo4j

使用 neo4j 核心 API，我们可以创建一个精确索引，并将其设置为不区分大小写，如下所示这是一个如何创建不区分大小写的精确索引的示例：

```
Index index = graphDb.index().forNodes( "exact-case-insensitive", stringMap( "type", "exact", "to_lower_case", "true" ) ); 
Node node = graphDb.createNode(); index.add( node, "name", "Thomas Anderson" );
assertContains( index.query( "name", "\"Thomas Anderson\"" ), node ); 
assertContains( index.query( "name", "\"thoMas ANDerson\"" ), node ); 
```

我知道全文在 springdata neo4j 中默认执行此操作。但我想让我的确切索引在 springdata neo4j 中不区分大小写。

但我没有找到任何属性可以`@indexed()`将精确索引设置为不区分大小写。所以如果有任何机制，请帮助我做到这一点..

谢谢你，，

# c++ - 一起使用指针和地址运算符

> ID：15743030
> 
> 赞同：1
> 
> 时间：2013-04-01T11:56:05.927
> 
> 标签：c++, pointers

我不明白我们为什么要使用 *&first （指针和地址运算符一起使用）。这是什么意思？我应该什么时候使用它？

```
void splitArray (int *A, int size, int ind1, int ind2, int *&first, int &firstSize,int *&second, int &secondSize)
{
    firstSize = ind2 - ind1 + 1;
    secondSize = size - firstSize;

    first = new int[firstSize];
    second = new int[secondSize];

    int cnt1 = 0, cnt2 = 0;
    for (int i = 0; i < size; i++)
    {
        if ((i >= ind1) && (i <= ind2)){
        first[cnt1] = A[i]; 
        cnt1++;
    }
    else 
        {
    second[cnt2] = A[i]; 
    cnt2++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:56:57.787

它是一个通过引用传递的指针。这意味着何时`first`更改：

```
first = new int[firstSize]; 
```

更改传播回调用者。

从根本上说，这与传递的方式没有什么不同`firstSize`，只是它`first`恰好是一个指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T11:59:01.620

> 这是什么意思？我应该什么时候使用它？

`&`出现在*类型*之后的符号定义了对该类型的*引用。*因此，例如，`int&`是对 an的引用`int`，`my_object&`是对 的引用`my_object`，并且`int *&`是对 an 的引用`int*`（即对指向 an 的指针的引用`int`）。

当它出现在函数签名中时，这意味着相应的参数将通过引用而不是通过值传递：当通过值传递时，函数接收参数的*副本*；另一方面，当通过引用传递时，函数直接对传递的参数进行操作。

因此，通过引用传递指针意味着函数对该指针的值所做的更改将影响传递的原始参数。

特别是这两条指令：

```
first = new int[firstSize];
second = new int[secondSize]; 
```

将动态分配的数组分配给`first`和`second`。因此，在以下代码片段中（省略号表示其他参数）：

```
int* myfirst = NULL;
int* mysecond = NULL;
splitArray(..., myfirst, ..., mysecond, ...); 
```

从 , 返回时`splitArray()`，`myfirst`和`mysecond`将指向函数内部分配的数组，并分别分配给`first`和。`second`

如果您没有通过引用传递这些指针，那么`myfirst`and的值`mysecond`仍然会`NULL`在`splitArray()`返回之后（因为`splitArray()`将处理这些指针的*副本*）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:26:39.277

& 将其前面的所有内容视为要引用的类型。有时您需要传递指针本身而不是它的副本。例如，您可能需要在将要使用的函数中分配内存。因此，您将指针作为引用传递以能够处理它，而不是它指向的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:54:16.733

有时，在对象的其余实现包括构造函数指令之前，程序员使用引用来确保当前存在的指针对象来初始化对象。

# windows-phone-7 - 如何让主线程等待不同类中的 StreamReader 完成

> ID：15743031
> 
> 赞同：0
> 
> 时间：2013-04-01T11:56:13.077
> 
> 标签：windows-phone-7, concurrency, webclient, iostream

我目前正在开发一个应用程序，但对 wp7 开发来说相当新，我的主进程调用另一个类，该类使用 StreamReader 来读取网页的内容并分配变量。我遇到的问题是主进程试图在变量被赋值之前使用它们。有什么方法可以让主进程等到 StreamReader 完成

在主线程中，我有：

```
 locationDetails = new LocationResults();
 locationDetails.getResults(addressDetails); 
```

然后在 LocationResults 类中

```
public void getResults(String address)
    {
        String addy, tmp;
        if (address[0] == '+')
        {
            tmp = address.Substring(1);
            addy = baseAddress + tmp + "&sensor=false";
        }
        else
            addy = baseAddress + address + "&sensor=false";

        WebClient webClient = new WebClient();
        webClient.OpenReadAsync(new Uri(addy));
        webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);

    }

    void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        String tmp;
        var reader = new StreamReader(e.Result);
        tmp = reader.ReadToEnd().ToString();
        results = tmp;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:06:02.477

自从我使用 WP 7 和 .NET 以来已经有很长时间了，但我认为以下方法可能会有所帮助：

1.  使用任务并行库来执行整个 getResult-Procedure 与您的主线程异步。
2.  在任务中同步使用 WebClient 并返回读取的数据。
3.  [通过http://msdn.microsoft.com/en-us/library/hh194793.aspx](http://msdn.microsoft.com/en-us/library/hh194793.aspx)指定一个继续操作并传递主线程的 TaskScheduler 实例，以便同步。
4.  将影响结果的主线程代码放在您的继续操作中。

编辑：我猜代码应该是这样的：

```
Task.Factory.StartNew((adr)-> InvokeGetResult(adr as string), addressDetails)
   .ContinueWith((data) -> HandleDataSynchronousToMainThread(data),
      TaskScheduler.Current); 
```

但是再一次：自从我编写最后一个 .NET 代码以来已经有很长时间了......

# javascript - 使用按钮切换显示/隐藏 div 以获得多个结果

> ID：15743039
> 
> 赞同：1
> 
> 时间：2013-04-01T11:56:39.313
> 
> 标签：javascript, jquery, html, forms, show-hide

我正在开发一个课堂学生出勤网站，我在做什么以及我期望我的 php 编码做什么，它工作正常......当更新出勤时，每个学生只需点击学生列表页面中每个学生的缩略图，它的工作......

我的问题是我`add description`在缩略图上为每个学生添加了一个按钮，它不可见，当用户将鼠标悬停在学生缩略图上时仅显示此按钮，然后我添加了一个切换显示/隐藏 div 按钮，当用户单击此可见按钮时我的小表格 div 将显示...

这是我用按钮切换显示/隐藏 div...

**HTML**

```
<div id='content'>form content here</div>
<input type='button' id='hideshow' value='add description'> 
```

**jQuery**

```
jQuery(document).ready(function(){
    jQuery('#hideshow').live('click', function(event) {        
         jQuery('#content').toggle('show');
    });
}); 
```

它在单击添加描述按钮时起作用，但我的问题是，如果我有超过 2 个或以上的学生，我的列表当我单击此按钮时，所有学生现在都形成内容 div 显示，我只需要一个学生 div 显示，我的意思是上面的哪个学生按钮我们点击，只有那个显示...我认为这个问题是因为使用了唯一的 id，如何解决它。？任何的想法。？？？

**编辑** 这是我的 php 生成的学生列表显示

```
<?php if ($students) { ?>
        <?php foreach ($students as $student) { ?>    
        <div class="student">
        <div class="thumb">
        <div class="content" style="display:none;">
            DIV CONTENT HERE
        </div>
        <input type='button' id='hideshow' value='add description'>    
        <img class="img" src="<?php echo $student['image']; ?>" alt="<?php echo $student['name']; ?>" />
        </div>    
        <div class="name"><?php echo $student['name']; ?><?php echo $student['student_id']; ?></div> 
        </div>
       <?php } else { ?>
    <div class="empty"><?php echo $text_empty; ?></div>
    <?php } ?>
<?php } ?> 
```

这是我现在得到的截图... ![在此处输入图像描述](https://i.stack.imgur.com/jPKtl.jpg)

这就是我真正想要的 ![在此处输入图像描述](https://i.stack.imgur.com/WT2Aq.png)

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:00:59.120

我想我理解你的问题。尝试使用`prev()`来获取上一个兄弟，而`class="content"`不是使用`id`，因为有多个。

也[`.live()`](http://api.jquery.com/live/)已被弃用，更喜欢[`.on()`](http://api.jquery.com/on/)因为`.live()`在 v1.9 中被删除。

**JS**

```
jQuery(document).ready(function(){
    jQuery('#hideshow').on('click', function(event) {        
         jQuery(this).prev('.content').toggle('show');
    });
}); 
```

**HTML**

```
<div class='content'>form content here</div>
<input type='button' id='hideshow' value='add description'> 
```

## 更新

现在你包含了你的 PHP，我明白了这个问题。问题是您使用的`id`for `hideshow`, `id`s 应该是唯一的，我相信 jQuery 实际上会停止检查是否有多个。试试这个：

**HTML**

```
<div class='content'>form content here</div>
<input type='button' class='hideshow' value='add description'> 
```

**JS**

```
jQuery(document).ready(function(){
    jQuery('.hideshow').on('click', function(event) {        
         jQuery(this).prev('.content').toggle();
    });
}); 
```

所以与我原来的答案的不同之处在于它没有使用 class `.hideshow`，而不是 an `id`，我们只是调用`.toggle()`显示/隐藏而不是使用 CSS class `.show`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:05:31.537

尝试为多个学生循环，例如

```
foreach($total_stndts as $row)
{
    echo "<div class='content_<?php echo $row['stdnt_id'];?>'>form content here</div>";
    echo "<input type='button' id='<?php echo $row['stdnt_id'];?>' value='add description'>";   
} 
```

然后在你的jQuery中尝试像

```
$("input[type='button']").live('click',function(){
    id = $(this).attr('id');
    $('#content_'+id).toggle('show');  
}) 
```

# ios - 拍照前访问设备相机曝光值

> ID：15743046
> 
> 赞同：1
> 
> 时间：2013-04-01T11:57:02.180
> 
> 标签：ios

我正在使用来自 Brad Larson 的精彩[GPUImage 框架](https://github.com/BradLarson/GPUImage)，并且在某个时刻我有一个 AVCaptureDevice 实例（来自 GPUImageVideoCamera 类的属性 inputCamera），我想在拍照之前读取实际曝光值，就像在元数据信息中一样这是创建的，但仅在拍摄照片之后。有没有办法让这个值活起来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:28:02.487

设置一个 AVCaptureSession，然后你可以从以下位置实时获取曝光数据：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer  fromConnection:(AVCaptureConnection *)connection{

   lightSamp++;
   if(lightSamp>30){
      CFDictionaryRef metadataDictionary = CMGetAttachment(sampleBuffer, kCGImagePropertyExifDictionary, NULL);
      NSDictionary *metaDict= (__bridge NSDictionary*)metadataDictionary;

      NSLog(@"exposure %@",metaDict );
      lightSamp=0;
    }
} 
```

}

# c# - 需要获取百分比值的饼图

> ID：15743048
> 
> 赞同：0
> 
> 时间：2013-04-01T11:57:15.300
> 
> 标签：c#, .net, visual-studio-2010, mschart, dynamic-binding

我的 ASPX 部分

```
<div runat="server" id="divMain">
    <asp:Chart ID="Chart1" runat="server" DataSourceID="SqlDataSource1">
        <Series>
            <asp:Series Name="Series1" ChartType="Pie">
            <Points>

                //I want this part to come from code-behind

                //<asp:DataPoint AxisLabel="1 Star"  YValues="100" />
                //<asp:DataPoint AxisLabel="2 Star" YValues="123" />
                //<asp:DataPoint AxisLabel="3 Star" YValues="155" />
                //<asp:DataPoint AxisLabel="4 Star" YValues="245" />

            </Points>
            </asp:Series>
        </Series>
        <ChartAreas>
            <asp:ChartArea Name="ChartArea1">

            </asp:ChartArea>
        </ChartAreas>
        <Legends>
            <asp:Legend Title="Test abc" />
        </Legends>
    </asp:Chart>
  </div> 
```

我的代码隐藏如下：

```
protected void Page_Load(object sender, EventArgs e)
{
    double[] yValues = { 10, 27.5, 7, 12, 45.5 };
    string[] xNames = { "Mike", "John", "William", "George", "Alex" };

    Series series1 = new  Series("pie");
    series1.ChartType = SeriesChartType.Pie;
    series1.BorderWidth = 3;
    series1.ShadowOffset = 2;
    Chart1.Series[0].Points.DataBindXY(xNames, yValues);
    divMain.Controls.Add(Chart1);
} 
```

但我收到以下异常：“的 DataSourceID`Chart1`必须是类型`IDataSource`控件的 ID `SqlDataSource1`。找不到具有 ID 的控件。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:00:59.403

从您的 aspx 页面中删除`DataSourceID="SqlDataSource1"`元素`Chart`，它可能不存在，并且您在尝试以编程方式将数据填充到图表时不需要它。

# xml - Xpath 与 Internet Explorer 不兼容

> ID：15743049
> 
> 赞同：0
> 
> 时间：2013-04-01T11:57:17.503
> 
> 标签：xml, internet-explorer, xpath, compatibility

我正在尝试使用 XPath 提取 XML。它适用于 Firefox 和 Chrome，但不适用于 IE9。有什么技巧或技巧我应该做的吗？你可以[在这里](http://faunea.com/xpath-A1.html)看到它。

这是HTML：

```
<!DOCTYPE html>
<html>
<body>
<script>
function loadXMLDoc(dname)
{
    if (window.XMLHttpRequest)
    {
        xhttp=new XMLHttpRequest();
    }
    else
    {
        xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname,false);
    xhttp.send("");
    return xhttp.responseXML;
}

//xml=loadXMLDoc("productfeed-production-version_sample.xml");
xml=loadXMLDoc("data.xml");
//path="/Products/Product/Category"
path="root/article[3]/Price"
// code for IE
if (window.ActiveXObject)
{
    var nodes=xml.selectNodes(path);

    for (i=0;i<nodes.length;i++)
    {
        document.write(nodes[i].childNodes[0].nodeValue);
        document.write("<br>");
    }
}
// code for Mozilla, Firefox, Opera, etc.
else if (document.implementation && document.implementation.createDocument)
{
    var nodes=xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
    var result=nodes.iterateNext();

    while (result)
    {
        document.write(result.childNodes[0].nodeValue);
        document.write("<br>");
        result=nodes.iterateNext();
    }
}
</script>

</body>
</html> 
```

这是 XML 文件：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<root>
<article>
    <title>Best of the West - Édition Été 2013</title>
    <description>Un voyage dans l'Ouest américain est sans aucun doute ce qu'il y a de mieux pour qui veut se rendre aux Etats-Unis! Vous y transiterez par trois des villes les plus branchées...</description>
    <url>http://www.connections.be</url>
    <urltext>Visit the Site: connections.be</urltext>
    <Price>199,99</Price>
</article>
<article>
    <title>Hôtel Yotel</title>
    <description>Prenez le concept des hôtels capsule japonais, ajoutez-y le meilleur de la première classe des avions, saupoudrez le tout avec un style urbain et tendance,...</description>
    <url>http://www.connections.be</url>
    <urltext>Learn more</urltext>
    <Price>199,99</Price>
</article>
<article>
    <title>Essential Thailand</title>
    <description>Ce programme individuel, idéal pour un premier voyage en Thaïlande, vous emmène à la découverte des points d'orgue de Bangkok et de Chiang Mai.</description>
    <url>http://www.connections.be</url>
    <urltext>Continue Reading...</urltext>
    <Price>199,99</Price>
</article>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T07:00:50.630

为了使 XPath 在 IE 中工作，您需要使用以下推荐的 XPath 库之一：

*   ~~[JavaScript-XPath](http://coderepos.org/share/wiki/JavaScript-XPath)（我使用这个）~~ **更新**：现在已经失效，可以在 Internet 档案中看到[2016 年末的存档版本。](http://web.archive.org/web/20161024202858/http://coderepos.org/share/wiki/JavaScript-XPath)

*   [wicked-good-xpath](https://github.com/google/wicked-good-xpath) - 这是 Google 重新实现的 JavaScript-XPath，速度更快，代码更小。

*   [jquery-xpath](https://github.com/ilinsky/jquery-xpath) - 支持 XPath 2.0 的 jQuery 扩展。

祝你好运！

# c# - 模拟非 ASCII 字符的输入

> ID：15743053
> 
> 赞同：2
> 
> 时间：2013-04-01T11:57:18.423
> 
> 标签：c#, windows, winapi, windows-7

我正在寻找一种使用 Windows API 模拟非 ASCII 字符（例如 CJK 字符）输入的方法。`keybd_event`或者因为输入的字符可能不是有效的虚拟键而`SendInput` *无法工作。*

## 我想要的是

我想通过使用 Windows API 来模拟 Unicode 字符的输入，而无需编写 IME 或 TSF 提供程序。

## 我试过的

我试图将`WM_IME_CHAR`消息发送到当前聚焦的窗口：

```
// Gets the currently focused input control (if any)
internal static IntPtr GetActiveWindowControl()
{
    IntPtr activeWin = GetForegroundWindow();
    if (activeWin == IntPtr.Zero)
    {
        return IntPtr.Zero;
    }
    uint threadId = GetWindowThreadProcessId(activeWin, IntPtr.Zero);
    GUITHREADINFO guiThreadInfo = new GUITHREADINFO();
    guiThreadInfo.cbSize = Marshal.SizeOf(guiThreadInfo);
    GetGUIThreadInfo(threadId, ref guiThreadInfo);
    if (guiThreadInfo.hwndFocus == IntPtr.Zero)
    {
        return activeWin; // Example: console
    }
    else
    {
        return guiThreadInfo.hwndFocus;
    }
}

internal void SimulateInput()
{
    // Encoding.Default on my computer is CP950 (Big5)
    byte[] b = Encoding.Default.GetBytes("我"); // one single Chinese character
    IntPtr activeHwnd = GetActiveWindowControl();
    if (activeHwnd != IntPtr.Zero)
    {
        int ch = 0;
        for (int i = 0; i < b.Length; i++) // Assumed b has <=2 elements
        {
            ch = (ch << 8) | b[i];
        }
        uint WM_IME_CHAR = 0x0286;
        SendMessage(activeHwnd, WM_IME_CHAR, (IntPtr)ch, (IntPtr)0)
    }
} 
```

## 遇到的问题

到目前为止，这段代码在大多数情况下似乎运行良好，**但**它在 Notepad++ 上不起作用。我得到了垃圾输入，而不是所需的字符。

使用 Spy++ 的进一步调查表明，当使用 IME 输入时，没有`WM_IME_CHAR`消息发送到 Notepad++ 编辑窗口。我得到的只是`WM_IME_STARTCOMPOSITION`, `WM_IME_ENDCOMPOSITION`,`WM_IME_REQUEST`和. Notepad++ 处理 IME 输入的方式似乎与其他程序不同。（另外我相信还有更多类似于 Notepad++ 的程序，但我还没有找到。）`WM_IME_NOTIFY``WM_IME_SETCONTEXT`

此外，如果字符超出目标操作系统的默认字符编码（例如，简体中文不适用于 Big5），则此代码将不起作用。

## 我想阻止的事情

*   将字符放入剪贴板并在目标窗口上调用粘贴

## 附加信息

我意识到 Windows 7 Tablet PC 输入面板非常好地执行文本插入（甚至适用于 GTK+ 应用程序）。我试图模仿它发送的内容，但它似乎只是重复了最后一个 IME 输入的字符。即使它看起来与在 Spy++ 中看到的完全相同，它也不起作用。

```
SendMessage(active, WM_IME_STARTCOMPOSITION, (IntPtr)0, (IntPtr)0);
//SendMessage(active, WM_IME_COMPOSITION, (IntPtr)ch, (IntPtr)0x0800);
SendMessage(active, WM_IME_COMPOSITION, (IntPtr)0xA7DA, (IntPtr)0x0800);
SendMessage(active, WM_IME_NOTIFY, (IntPtr)0x010D, (IntPtr)0);
SendMessage(active, WM_IME_ENDCOMPOSITION, (IntPtr)0, (IntPtr)0);
SendMessage(active, WM_IME_NOTIFY, (IntPtr)0x010E, (IntPtr)0); 
```

我还在[`SendKeys`](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send%28v=vs.100%29.aspx).NET 中找到了一个类。它可以在我的应用程序中使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:33:43.580

经过一番搜索，事实证明它`SendInput`实际上**可以**用于发送 Unicode 输入[`KEYEVENTF_UNICODE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646271(v=vs.85).aspx)。

现在我的代码看起来像这样（`InputSender`是我自己的类）：

```
internal static void InputString(string str)
{
    char[] chars = str.ToCharArray();
    InputSender.Input[] inputs = new InputSender.Input[chars.Length * 2];

    for (int i = 0; i < chars.Length; i++)
    {
        ushort ch = (ushort)chars[i];
        // Key down
        inputs[i * 2].type = InputSender.InputType.Keyboard;
        inputs[i * 2].ki.wScan = ch;
        inputs[i * 2].ki.dwFlags = InputSender.KeyboardEventFlags.Unicode;
        // Key up
        inputs[i * 2 + 1].type = InputSender.InputType.Keyboard;
        inputs[i * 2 + 1].ki.wScan = ch;
        inputs[i * 2 + 1].ki.dwFlags = InputSender.KeyboardEventFlags.Unicode | InputSender.KeyboardEventFlags.KeyUp;
    }
    InputSender.SendInput(inputs);
} 
```

但事实证明，它[不适用于 GTK+ 程序](https://stackoverflow.com/q/1970917/1386111)。稍微搜索一下，[应该是不久前修复的，](https://mail.gnome.org/archives/commits-list/2011-February/msg06853.html)但是使用旧版本 GTK+ 的程序可能仍然会遇到问题。刚刚用 Geany 和最新的 GTK+ 尝试了最新的 GTK+ 就可以了，而 Inkscape 拒绝解释输入。

无论如何，如果我忽略 GTK+ 的问题，使用`SendInput`就足够了（并且应该比 更好`WM_IME_CHAR`）。我没有尝试过[解决 GTK+ 问题的这个答案，](https://stackoverflow.com/a/1972179/1386111)因为我不知道该怎么做，并且认为它不可行。

# php - Laravel 查询中出现问号

> ID：15743058
> 
> 赞同：2
> 
> 时间：2013-04-01T11:57:40.440
> 
> 标签：php, laravel

我正在尝试在 Laravel $posts= DB::table('rmm') 中运行以下代码

```
 ->select( array('message', DB::raw('COUNT(message) as number'), DB::raw('rmm.receivedTime as time')))

        ->join( 'rcs', 'rmm.smsCid', '=', 'rcs.smsCid', 'INNER') 

        ->where(DB::raw('rcs.status =1 and rmm.receivedTime > \'2012-12-26\' and rmm.receivedTime LIKE \'2013-04-01\' and length(\'message\') >\'3\' '))

        ->group_by('message')

        ->get(); 
```

并得到下面的错误代码

> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '? 附近使用的正确语法。GROUP BY `message`' 在第 1 行

```
SQL: SELECT `message`, COUNT(message) as number, rmm.receivedTime as time FROM `rmm` INNER JOIN `rcs` ON `rmm`.`smsCid` = `rcs`.`smsCid` WHERE rcs.status =1 and rmm.receivedTime > '2012-12-26' and rmm.receivedTime LIKE '2013-04-01' and length('message') >'3'   ? GROUP BY `message`

Bindings: array (
  0 => NULL,
) 
```

它以某种方式`?`在查询中产生；如果我解决了这个问题，我确定它会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:03:12.657

尝试`raw_where()`：

```
->raw_where("rcs.status = 1 AND rmm.receivedTime > '2012-12-26' AND rmm.receivedTime LIKE '2013-04-01' AND length('message') > 3") 
```

# android - 如何在android清单中写入包名？

> ID：15743065
> 
> 赞同：0
> 
> 时间：2013-04-01T11:58:07.657
> 
> 标签：android, android-manifest

我正在开发我的应用程序，现在我在我的应用程序中创建了三个包，我把这三个包放在一个特定的包中，我已经更新了 Android Manifest，但它仍然会强制关闭。我尝试了很多东西，但没有工作请帮助我. 如何解决？安卓清单

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="mayank.com"
     android:versionCode="1"
     android:versionName="1.0" >

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="mayank.com.onlinerecharge.MainActivity"
        android:label="@string/app_name" 
        android:theme="@style/tabTheme">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
       </activity>
      <activity android:name="mayank.com.onlinerecharge.signup" />
       <activity android:name="mayank.com.onlinerecharge.signin" />
    <activity android:name="mayank.com.onlinerecharge.account"
         android:label="@string/app_name" 
        android:theme="@style/tabTheme"/>
    <activity android:name="mayank.com.onlinerecharge.mobile" />
    <activity android:name="mayank.com.onlinerecharge.dth" />
    <activity android:name="mayank.com.onlinerecharge.datacard" />
    <activity android:name="mayank.com.onlinerecharge.about" />
    <activity android:name="mayank.com.onlinerecharge.ViewPagerAdapter" />
    <activity android:name="mayank.com.after_login.Main_after_login"
        android:label="@string/app_name" 
                 android:theme="@style/tabTheme" />
    <activity android:name="mayank.com.after_login.help" />
    <activity android:name="mayank.com.after_login.history" />
    <activity android:name="mayank.com.after_login.ewallet" />
    <activity android:name="mayank.com.after_login.signout" />
    <activity android:name="mayank.com.utils.Const" />
    <activity android:name="mayank.com.utils.Pref" />
    </application>

    <uses-permission android:name="android.permission.INTERNET" /> 
         </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:39:21.013

我怀疑您的包和活动的绝对路径定义不正确。另一件需要注意的事情：软件包通常是 com.mayank... 而不是 mayank.com。

根据清单中的定义检查“登录”的路径，并考虑将其更改为“.onlinerecharge.signin”。

另外，请，请，请在保存代码之前按 CTRL-F（Mac 的 COMMAND-F），以便正确格式化；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:54:53.660

通常包名称以 com.mayank 开头。在这种情况下，您会忘记完整提及您的包裹名称。我认为您的包裹名称是 "mayank.com.onlinerecharge" 。但你只写 mayank.com。参加您提到的完整包名的活动。所以更正它。

# actionscript-3 - 用于网络环境的 Google Drive AS3 API

> ID：15743071
> 
> 赞同：0
> 
> 时间：2013-04-01T11:58:34.183
> 
> 标签：actionscript-3, apache-flex, google-drive-api

我正在开发一个使用 Flex 4.x 和 AS3 的应用程序，它可以显示来自 Google Drive 的视频。为此，我需要使用 OAuth，以便我可以使用我的用户名和密码连接到 Drive。但是，谷歌似乎没有为 AS3 提供 API 来制作可以访问 Drive 的应用程序。[我在这里](https://stackoverflow.com/questions/10357797/can-i-use-oauth-2-0-with-flex?answertab=active#tab-top)看到了答案，但提供的 API 是针对独立的、基于窗口的应用程序。任何人都可以提供一下可用的选项吗？[我尝试在该问题本身中发表评论，但似乎没有太多要点我无法发表评论。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:21:27.880

假设您的应用程序将嵌入到网页中，则 anwser 是使用 javascript 进行 OAuth 调用。之后，您可以使用 as3 api 从 actionscript 使用 google drive api。
如果用户已经登录到谷歌驱动器，这种方法将让您跳过身份验证。

可以在这里找到没有 actionript 的很好的说明：[https ://developers.google.com/drive/v2/reference/files/list#try-it](https://developers.google.com/drive/v2/reference/files/list#try-it)

# css - Drupal Zen 子主题 - 在特定断点处停止响应

> ID：15743074
> 
> 赞同：0
> 
> 时间：2013-04-01T11:58:47.227
> 
> 标签：css, drupal, sass, drupal-themes, drupal-zen

我正在开发一个 Drupal Zen 子主题。

调整浏览器大小时，Zen 会正确调整所有内容以适应浏览器/窗口大小。太好了，但是有没有办法告诉 Zen 在某个断点停止响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:02:42.777

只适用`max-width`于容器。

# batch-file - 如何从批处理文件中for循环内的字符串中读取字符

> ID：15743077
> 
> 赞同：0
> 
> 时间：2013-04-01T11:59:10.013
> 
> 标签：batch-file

我试图从 for 循环内的字符串中读取一些字符，但没有得到结果。我的代码是这样的

```
@echo off
setlocal enableextensions enabledelayedexpansion
set str="abcdefgh"
for /l %%x in (1,1,5) do (
set fstr=!str:~1,%%x!
echo %fstr%
) 
```

一直得到结果“Echo is off”。请帮助如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:23:38.407

改变

```
echo %fstr% 
```

至

```
echo !fstr! 
```

%fstr% 显示 PARSED 行时的值`fstr`，即未设置，所以

```
ECHO %fstr% 
```

被解释为

```
echo 
```

因此`ECHO`报告回声状态 -`ECHO is off`

```
ECHO !fstr! 
```

显示在`fstr`循环中更改的值（运行时间值）。

# algorithm - 图回溯复杂度

> ID：15743084
> 
> 赞同：0
> 
> 时间：2013-04-01T11:59:43.497
> 
> 标签：algorithm, complexity-theory, depth-first-search, breadth-first-search, backtracking

我正在尝试分析回溯图形的复杂性以找到最长的路径。

我的算法包括拓扑排序，然后从每个顶点回溯以找到最长的路径。

如果有帮助，算法基本上是：拓扑排序（G），对于每个顶点计算到彼此顶点的距离，返回最大距离

无论如何，我真的不知道回溯操作的最坏情况复杂性是什么。

有什么建议么？

提前致谢！

# objective-c - 如何在 Objective-C 中获取文件大小

> ID：15743085
> 
> 赞同：5
> 
> 时间：2013-04-01T11:59:46.857
> 
> 标签：objective-c

我的问题：

```
NSString *path = @"~/Desktop/folder/";
pathg = [path stringByExpandTitlePath];
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *array = [fm contentsOfDirectoryAtPath: path error: NULL];

for(int i = 0; i < array.count; ++i)
{
    NSFileSize *num = [array[i] fileSize];
} 
```

> **错误：**使用未声明的标识符“num”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T12:09:46.893

如果需要获取单个文件的文件大小，可以通过构造文件 URL 并直接查询 URL 的属性来实现。

```
NSString *filePath = [@"~/.bash_history" stringByExpandingTildeInPath];
NSURL *fileURL = [NSURL fileURLWithPath:filePath];
NSNumber *fileSizeValue = nil;
NSError *fileSizeError = nil;
[fileURL getResourceValue:&fileSizeValue
                   forKey:NSURLFileSizeKey
                    error:&fileSizeError];
if (fileSizeValue) {
    NSLog(@"value for %@ is %@", fileURL, fileSizeValue);
}
else {
    NSLog(@"error getting size for url %@ error was %@", fileURL, fileSizeError);
} 
```

如果您需要迭代目录的内容，就像您的问题一样，您可以执行基于 URL 的版本以及问题中的方式。Using`contentsOfDirectoryAtPath:...`将文件名数组返回为`NSString`s，并且您必须重新构建完整路径并获取属性作为附加步骤：

```
 NSString *directoryPath = [@"~" stringByExpandingTildeInPath];
    NSFileManager *fm = [NSFileManager defaultManager];
    NSArray *array = [fm contentsOfDirectoryAtPath: directoryPath error:NULL];
    for (NSString *filename in array) {
        NSError *attributesError = nil;
        NSDictionary *attributes = [fm attributesOfItemAtPath:[directoryPath stringByAppendingPathComponent:filename]
                                                        error:&attributesError];
        unsigned long long size = [attributes fileSize]; //Note this isn't a pointer
        NSLog(@"%llu", size);
    } 
```

您可以使用文件 URL 制作类似的解决方案：

```
 NSString *directoryPath = [@"~" stringByExpandingTildeInPath];
    NSURL *directoryURL = [NSURL fileURLWithPath:directoryPath
                                     isDirectory:YES];
    NSFileManager *fm = [NSFileManager defaultManager];
    NSError *contentsError = nil;
    NSArray *contents = [fm contentsOfDirectoryAtURL:directoryURL
                          includingPropertiesForKeys:@[NSURLFileSizeKey, NSURLIsDirectoryKey]
                                             options:0
                                               error:&contentsError];
    if (contents) {
        for (NSURL *contentURL in contents) {
            NSError *isDirectoryError = nil;
            NSNumber *isDirectoryNumber = nil;
            [contentURL getResourceValue:&isDirectoryNumber
                                  forKey:NSURLIsDirectoryKey
                                   error:&isDirectoryError];
            if (isDirectoryNumber) {
                if (![isDirectoryNumber boolValue]) {
                    NSNumber *fileSizeNumber = nil;
                    NSError *sizeError = nil;
                    [contentURL getResourceValue:&fileSizeNumber
                                          forKey:NSURLFileSizeKey
                                           error:&sizeError];
                    if (fileSizeNumber) {
                        NSInteger size = [fileSizeNumber integerValue];
                        NSLog(@"%li", (long)size);
                    }
                    else {
                        NSLog(@"error getting file size for file %@ error:%@",contentURL,sizeError);
                    }
                }
            }
            else {
                NSLog(@"error getting is url %@ was directory: %@", contentURL, isDirectoryError);
            }
        }
    }
    else {
        NSLog(@"error getting contents for directory %@ error: %@", directoryURL, contentsError);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T12:10:02.573

试试这个：

```
NSString *yourPath=[@"~/Desktop/folder/abc.png" stringByExpandingTildeInPath];
NSFileManager *fileManager=[NSFileManager defaultManager];
NSDictionary *attributesDict=[fileManager attributesOfItemAtPath:yourPath error:NULL];
NSInteger fileSize=[attributesDict fileSize];

NSLog(@"%ld",fileSize); 
```

# ios - 在 Xcode for iOS 中使用 plist 中的数据

> ID：15743089
> 
> 赞同：1
> 
> 时间：2013-04-01T12:00:11.457
> 
> 标签：ios, xcode, plist, lookup

希望有人可以帮助我。我对 iOS 应用程序开发非常陌生，实际上我正在尝试为当地学校的职业日活动准备一些东西。

背景是我希望能够测试学生准确处理和输入数据的能力。

为了测试这一点，我想要一个我将部署到 iPad 上的应用程序，供他们在白天试用。非常简单的东西（我认为！）

到目前为止，我知道如何创建我的应用程序，将输入框放入并全部链接起来，并且已经研究出如何测试输入框中的输入是否与代码中的硬编码值正确，如下所示：

```
 self.DealID = self.DealIDEntry.text;
    NSString *Check1 = @"No";
    NSString *DealIDString = self.DealID;
    if ([DealIDString length] == 0) {
        Check1 = @"No Deal ID Entered";
    }
    if([self.DealID isEqual: @"12345678"]) {
        Check1 = @"Yes";
    }
    self.DealIDCheck.text = Check1; 
```

我想要的是有一个可能的 DealID 表，每个都有 5-6 位相关数据（客户、货币等），然后当学生输入交易 ID 时，希望是正确的客户、货币等应用程序应通过“查找”plist 中的 DealID 并检查该 DealID 的客户值是否正确来进行检查。

我试过用字典来做到这一点：

```
NSBundle *bundle = [NSBundle mainBundle];
NSString *pListpath = [bundle pathForResource:@"TestTable" ofType:@"plist"];
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:pListpath];

self.CustomerName = self.CustomerNameEntry.text;
    NSString *Check2 = @"No";
    NSDictionary *DealID = [dict valueForKey:self.DealID];
    NSString *CustomerNameString = self.CustomerName;
    if ([CustomerNameString length] == 0) {
        Check2 = @"No Customer Name Entered";
    }
    if([self.CustomerName isEqual: [DealID objectForKey:@"CustomerName"]]) {
        Check2 = @"Yes";
    }
    self.CustomerNameCheck.text = Check2; 
```

可悲的是它不起作用，我怀疑我不知道如何正确加载 plist（或测试它是否已加载）或者我做错了！

编辑 2 - 感谢 Matt 在下面的帮助，我现在有了这段代码来加载我的 plist 作为目录目录，并可以查询给定子目录的相关对象。再次感谢马特！

```
//This loads the array of data
    NSBundle* bundle = [NSBundle mainBundle];
    NSString* plistPath = [bundle pathForResource:@"TestTable" ofType:@"plist"];
    //Make large Dictionary
    NSDictionary *TradeTable = [[NSDictionary alloc] initWithContentsOfFile:plistPath];
    NSLog(@"The count: %i", [TradeTable count]);
    //Create relevant sub directory
    NSDictionary *query = [TradeTable valueForKey:@"12345678"];
    NSLog(@"The count: %i", [query count]);
    //Query that subdirectory for the object in question
    NSString *name = [query objectForKey:@"CustomerName"];
    NSLog(name); 
```

对于任何感兴趣的人，我的 plist 现在看起来像这样：

```
<dict>
    <key>12345678</key>
    <dict>
        <key>CustomerID</key>
        <integer>98765</integer>
        <key>CustomerName</key>
        <string>BigBank</string>
        <key>CustomerBank</key>
        <string>LittleBank</string>
        <key>AmountinCCY</key>
        <integer>75000</integer>
        <key>CCY</key>
        <string>GBP</string>
        <key>AmountinUSD</key>
        <integer>115000</integer>
        <key>Date</key>
        <integer>1</integer>
        <key>Points</key>
        <integer>5</integer>
    </dict>
    <key>12345679</key>
    <dict>
        <key>CustomerID</key>
        <integer>98754</integer>
        <key>CustomerName</key>
        <string>CarShop</string>
        <key>CustomerBank</key>
        <string>BigBank</string>
        <key>AmountinCCY</key>
        <integer>25123</integer>
        <key>CCY</key>
        <string>EUR</string>
        <key>AmountinUSD</key>
        <integer>27000</integer>
        <key>Date</key>
        <integer>0</integer>
        <key>Points</key>
        <integer>4</integer>
    </dict>
</dict>
</plist> 
```

很抱歉罗嗦，只是想确保我提供了尽可能多的信息。

非常感谢任何人的帮助。菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:14:03.977

您显示的 plist 将作为 NSDictionary 对象的 NSArray 加载。所以用 NSArray 加载它`arrayWithContentsOfFile:`；然后你走 NSArray 直到你找到你想要的 NSDictionary。

您正在使用`[[NSDictionary alloc] initWithContentsOfFile:pListpath]`，但结果 (your `dict`) 为 nil，因为这*不是*字典，而是数组。上的文档`initWithContentsOfFile:`准确地预测了这一点：

> 返回值：一个已初始化的字典……*如果……文件的内容是字典的无效表示，则返回 nil。*

（我的斜体）

嗯，那是你的问题。文件的内容是字典的无效表示，因为它们实际上是数组的有效表示。

现在，我并不是说字典数组是存储数据的最佳方式。我认为字典字典会好得多（因为这样你就可以通过一些主键立即获取正确的子字典，例如 DealID）。但是，无论出于何种原因，这不是您存储数据的方式。您将其存储为数组，现在必须将其作为数组检索。

编辑：我的建议是您使用交易 ID 的值作为子字典的键。像这样：

```
Dictionary
    key: 12345678
    value: a whole nother dictionary with everything *else* about that answer
    ---
    key: 12345679
    value: a whole nother dictionary with everything *else* about that answer
    ---
    etc. 
```

所以你从你的大字典开始（`d`），现在`d[someDealId]`是正确的子字典（ ），`subd`现在你可以`subd[@"customerName"]`通过键获取或任何其他值。在我看来，这正是您所描述的那种“查找”。

# jquery - 在 Jquery 中是否有任何字符验证？比如我们在editrules中使用的数字：{number:true}？

> ID：15743097
> 
> 赞同：0
> 
> 时间：2013-04-01T12:00:47.480
> 
> 标签：jquery, jqgrid

我有一个 jquery 函数，我需要在 Category 字段中只允许使用字母。我知道我必须为此编写一个函数并使用 custom 和 custom_func:charValidation。但是editrules中有什么东西，它只检查字母表，这样我就可以让它成真......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:05:06.433

你可以使用模式属性

[http://www.w3.org/TR/html5/forms.html#the-pattern-attribute](http://www.w3.org/TR/html5/forms.html#the-pattern-attribute)

```
<input name="category" type="text" pattern="[A-Za-z]+"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:12:59.773

您也可以使用 JQuery 验证插件，但可能有点矫枉过正。

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:12:50.040

这是代码，我使自定义功能完美运行。

```
function charValidation(value,colName) 
```

{ var charpos = value.search("[^ÂâÀàÆæÇçÉéÊêÈèËëÎîÏïÑñÔôÛûÙùA-Za-z-_. /()]");

```
if(value.length > 0 &&  charpos >= 0) 
{ 

    return [false,"<font color=red>Category</font> : Allowed characters  are - A-Z,a-z,ÂâÀàÆæÇçÉéÊêÈèËëÎîÏïÑñÔôÛûÙù, - , _ ,.,/,(,)"];
}      
else{
    return [true,""];
} 
```

}

并使用自定义调用该函数。

# jsf - 如何渲染 ap:panel，从 ap:selectonemenu 的选择触发？

> ID：15743099
> 
> 赞同：2
> 
> 时间：2013-04-01T12:00:51.390
> 
> 标签：jsf, primefaces, panel, selectonemenu

我正在使用 Primefaces 3.4 和 JSF 2.1，并且我试图让 ap:panel 项目出现并消失关于`p:oneselectmenu`. 我`p:datatable`在面板内部有一个我想显示并动态填充的面板，这就是我使用面板的原因。数据表的东西运作良好，但面板没有。我尝试将面板上的“渲染”选项与一个变量链接，该变量会随着菜单的每个选择的变化而变化，但没有任何反应。我也试过了，`p:outputpanel`但什么也没发生。因此，我尝试使用具有相同操作的按钮，但再次失败。这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core">
<h:body>
    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            #{msg.teaching}: #{msg.socialSecurity}
        </ui:define>
        <ui:define name="body">
            <h:form id="form">
                <p:messages id="messages" autoUpdate="true"/>                  
                <p:panel id="selectSocialSecurityPanel" rendered="true">
                    <p:panelGrid>
                        <p:row>
                            <p:column>
                                <p:selectOneMenu value="#{selectOneMenuSocialSecurityTeachingBean.choice}">
                                    <p:ajax update="socialSecurityDataTablePanel, socialSecurityDataTable, toUpdate" listener="#{dataTableSocialSecurityBean.updateTable()}"/>
                                    <f:selectItem itemLabel="#{msg.select}" itemValue=""/>
                                    <f:selectItems value="#{selectOneMenuSocialSecurityTeachingBean.socialSecurityTeachingList}"/>
                                </p:selectOneMenu>
                            </p:column>
                            <p:column>
                                <p:commandButton value="#{msg.find}" actionListener="#{dataTableSocialSecurityBean.updateTable()}" update="socialSecurityDataTablePanel, socialSecurityDataTable, toUpdate" id="button">
                                    <f:ajax render="toUpdate"/>
                                </p:commandButton>
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </p:panel>                    
                <p:outputPanel id="toUpdate" rendered="#{dataTableSocialSecurityBean.rendered}" autoUpdate="true">
                    <p:panel id="socialSecurityDataTablePanel">
                        <p:dataTable id="socialSecurityDataTable" var="unit" value="#{dataTableSocialSecurityBean.socialSecurityList}">                    
                            <p:columns value="#{dataTableSocialSecurityBean.columns}" var="column" columnIndexVar="colIndex">
                                <f:facet name="header">
                                    #{column.header}
                                </f:facet>
                                #{unit[column.property]}
                            </p:columns>
                        </p:dataTable>                       
                    </p:panel>
                </p:outputPanel>
            </h:form>
        </ui:define>
    </ui:composition>
</h:body> 
```

还有这个：

```
@ManagedBean
@ViewScoped
public final class DataTableSocialSecurityBean implements Serializable {

    private String choice;
    private List<Unit> socialSecurityList;
    private boolean rendered;
    private List<ColumnModel> columns = new ArrayList<ColumnModel>();

    public boolean getRendered(){
        System.out.println("DataTableSocialSecurityBean getRendered");
        System.out.println("DataTableSocialSecurityBean getRendered="+rendered);
        return rendered;
    }

    public void updateTable() {
        rendered=true;
        socialSecurityList = new ArrayList<Unit>();
        createDynamicColumns();
        populateDataTable(socialSecurityList);

    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T12:07:56.397

您的`rendered`字段最初是`false`这样的，因此面板不会在第一个视图上呈现。在初始 HTML 的该视图中，没有带有 id 的标签，`toUpdate`因此无法呈现。我建议你把它`panel`放在一些里面`h:panelGroup`并重新渲染这个组件：

```
<h:panelGroup id="myContainer" layout="block">
  <p:outputPanel id="toUpdate" rendered="#{dataTableSocialSecurityBean.rendered}" autoUpdate="true">
  </p:outputPanel>
</h:panelGroup> 
```

你用`render="myContainer"`. 我还建议您使用`p:ajax`而不是`f:ajax`用于 primefaces 组件。

您可以尝试添加效果添加`p:effect`组件作为子项`p:outputPanel`：

```
<p:effect type="explode" event="load"/> 
```

有关事件的完整列表，请参阅 PrimeFaces 用户指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:07:36.680

为了使渲染的事件按照您的意愿行事，组件应该是可见的（存在于 dom 中）。最著名的 hack 是将渲染属性应用于内部组件（不是输出面板，而是其中的面板）

```
<p:outputPanel id="toUpdate"  autoUpdate="true">
    <p:panel id="socialSecurityDataTablePanel" rendered="#{dataTableSocialSecurityBean.rendered}">
</p:panel>
</p:outputPanel> 
```

这样，您的 outputPanel 每次都是可见的（存在于 DOM 中），并且可以告诉其子级根据条件渲染自己。

# c# - Visual Studio 安装程序中的依赖项和 DLL

> ID：15743106
> 
> 赞同：3
> 
> 时间：2013-04-01T12:01:03.563
> 
> 标签：c#, wpf, visual-studio-2010, deployment

我正在使用 VS2010 的**Visual Studio 安装程序**将我的应用程序部署到**MSI**。

我在开发过程中引用了许多 DLL；有些是第 3 方，有些是系统 DLL。现在在部署期间，我不知道要包括或排除什么。在我添加输出 .EXE 后， Visual Studio 自动包含**检测到的依赖**项，但它们通常不足以运行应用程序。我经常不得不手动将开发的 DLL 包含到已安装的应用程序文件夹中。否则，**eventvwr**只会提供一个通用的**CLR20r3**错误，它只会告诉我缺少 DLL，但不会指出是哪一个。

在我的部署项目中包含所有引用，因为它们在我的开发项目中被引用已成为一种习惯（一个非常坏的习惯，IMO），但我猜应用程序的卸载可能会删除导致其他应用程序出现问题的系统 DLL。

那么，除了**Detected Dependencies**之外，我如何知道要在部署项目中手动包含哪些 DLL ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:50:59.037

您的所有第三方 dll 都需要与您的应用程序一起分发。
您需要查看这些库的文档以获得准确的答案。

根据经验，请查看项目的参考部分。
记下那里使用的库，然后检查文档是否需要 VS 未检测到的其他库。有时这些库会提供一个“可再发行包”，您可以将其包含在您的安装项目中。

我更喜欢手动完成这项工作，并且总是在空的虚拟机中进行测试。当您的客户安装应用程序时设置失败是非常尴尬的。

要卸载，如果您将所有内容都安装在应用程序文件夹中，您真的不用担心。

# jenkins - 如何在与 Jenkins 不同的机器上执行命令行脚本

> ID：15743108
> 
> 赞同：1
> 
> 时间：2013-04-01T12:01:09.123
> 
> 标签：jenkins

`myserver`我通过访问 url 访问位于服务器上的 Jenkins dashborad `http://<myserver>:8080/`。我已经在作业配置页面的构建部分编写了构建步骤。完成构建步骤后，我需要访问不同的服务器并执行命令行脚本。如何在与当前节点不同的服务器上运行命令行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:32:05.417

你基本上有两个选择。第一个是连接到您要在构建步骤中运行脚本的机器（例如使用 SSH）并以这种方式运行所有必需的命令。您需要为此设置 passworldess 访问权限（例如使用 SSH 密钥）。

第二种选择是将第二台机器添加为 Jenkins 从站，添加与该从站绑定的第二个作业并运行构建的后半部分，并告诉 Jenkins 在第一个作业完成后运行第二个作业。如果您需要将文件从第一个作业传递到第二个作业，您可以将它们作为工件提供并在第二个构建中下载它们。

我会选择第二种解决方案，因为它在概念上更干净。不过，设置的工作量更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:35:59.753

我们有听起来类似的情况，我们运行一些必须在非 Jenkins 主机上启动的自动化测试。为此，我们使用 ssh 和密钥身份验证，这需要在`Execute shell`步骤中进行一些设置：

```
# generic prep
eval `ssh-agent -s`
ssh-add ~/.ssh/my-agent-key 
```

此时，密钥现在位于 ssh-agent 密钥环中，您可以 ssh 而无需担心接受该密钥的任何帐户和主机的密码。

```
ssh testuser@targetmachine "<commands>" 
```

# c++ - C++ 从超类调用子类方法

> ID：15743110
> 
> 赞同：4
> 
> 时间：2013-04-01T12:01:11.603
> 
> 标签：c++, class, superclass

我有以下风格的代码：

```
class SubClass;
class SuperClass;

class SuperClass {

private:

    void bar() {

        SubClass().foo();
    }
};

class SubClass : SuperClass {

public:

    void foo() {};
}; 
```

所以基本上我有一个超类，我想从那里调用子类的方法 foo() 。VS 2012 给我以下错误：

错误 1 ​​错误 C2514：“子类”：类没有构造函数。

错误 2 错误 C2228：'.foo' 的左侧必须有类/结构/联合。

我想做的正确结构是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T12:04:37.010

你不能这样做。您必须（至少）在基类中声明该方法。例如：

```
#include <iostream>

class SuperClass 
{
public:
    void bar() 
    {
        foo();
    }
private:
    virtual void foo() // could be pure virtual, if you like
    {
        std::cout << "SuperClass::foo()" << std::endl;
    }
};

class SubClass : public SuperClass // do not forget to inherit public
{
public:
    virtual void foo() { std::cout << "SubClass::foo()" << std::endl; }
};

int main()
{
    SuperClass* pTest = new SubClass;

    pTest -> bar();

    delete pTest;
} 
```

将打印`SubClass::foo()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-10T19:54:08.503

您可以尝试使用一些 CRTP，即：

```
#include <iostream>

class SubClass;

template<typename T>
class SuperClass {
private:
    void bar() {
        ((T *) this)->foo();
    }
public:
    void foobar() {
        this->bar();
    }
};

class SubClass : public SuperClass<SubClass> {
public:
    void foo() {
        std::cout << "hello crtp!" << std::endl;
    };
};

int main(void){
    SubClass a = SubClass();
    a.foobar();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:05:44.937

首先，您必须意识到调用`SubClass().foo()`与当前对象无关——它将创建一个新`SubClass`对象并调用其`foo`成员。如果你想让`bar`函数调用`foo`当前对象，你需要`foo`在基类中声明为虚函数，正如 Kiril 建议的那样。

但是，如果您确实想调用`foo`一个新对象（这没有多大意义，但无论如何），那么您做对了。您的示例未编译，因为`SubClass`它是前向声明的，但未在`bar`函数之前定义 - 您可能希望将实现移至 的`bar`定义下方，如下所示`SubClass`： class SubClass; 类超类；

```
class SuperClass {

private:

    void bar();
};

class SubClass : SuperClass {

public:

    void foo() {};
};

void SuperClass::bar() {
    SubClass().foo();
} 
```

# websocket - 在 GAE 上执行码头 websocket servlet 时的 NPE

> ID：15743111
> 
> 赞同：1
> 
> 时间：2013-04-01T12:01:12.887
> 
> 标签：websocket, jetty, chat

我正在使用码头 WebSocketServlet 开发一个聊天应用程序。但是当我执行该应用程序时，Eclipse 控制台显示空指针异常，与 url [Jetty 8.1.9.v20130131 Web Socket 问题](https://stackoverflow.com/questions/14707694/jetty-8-1-9-v20130131-web-socket-issues)相同。即使我使用的是 8.1.10 版本的码头罐子，仍然面临错误。

谁能帮我解决这个问题。

提前致谢。

# pagination - ZF2中的Ajax分页？

> ID：15743112
> 
> 赞同：0
> 
> 时间：2013-04-01T12:01:19.243
> 
> 标签：pagination, zend-framework2

我是新手，`ZF2`但我在`ZF`. 我没有在`ZF`. 但现在我需要 ajax 分页`ZF2`。我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T08:50:38.417

我就是这样做的。

**第一步**（路线文件）：

我为分页定义了一条路线，与列表不同。我这样做是为了让控制器功能尽可能简单。

```
'customers' => array(
    'type' => 'Literal',
    'options' => array(
        'route' => '/customers',
        'defaults' => array(
            'controller' => 'customers_controller',
            'action'     => 'list',
        ),
    ),
    'may_terminate' => true,
    'child_routes' =>array(
        //LIST
        'list' => array(
            'type' => 'Segment',
            'options' => array(
                'route' => '/[:page]',
                'defaults' => array(
                'controller' => 'customers_controller',
                    'action'     => 'list',
                ),
            ),
        ),
        //PAGINATION
        'pager' => array(
            'type' => 'Segment',
            'options' => array(
                'route' => '/pager[/:page]',
                'defaults' => array(
                    'controller' => 'customers_controller',
                    'action'     => 'pager',
                ),
            ),
        ), 
```

**第二步（ module.config.php**）：

我创建客户内容模板的原因是，当您进行 AJAX 调用时，您只需要列表本身，而不是标题。所以我的客户列表在这个模板中。

它有助于保持客户列表模板的清洁，该模板包含除列表之外的所有 HTML 代码，通过调用此模板来检索列表。

```
'view_manager' => array( 
    'template_path_stack' => array( 
        __DIR__ . '/../view', 
    ),
    'template_map' => array(
        'customers-content' => __DIR__ . '/../view/customers/customers-content.phtml',
    ),
), 
```

**第三步**（控制器类）：

```
public function listAction() {
    (...)

    $view = new ViewModel;

    //SET THE VARIABLES NEEDED BY THE TEMPLATE VIEW
    $view->setVariables( $variables );
    //SET THE TEMPLATE VIEW
    $view->setTemplate( 'customers/list' );

    return $view;
}

public function pagerAction() {
    //POST DATA
    $data = get_object_vars( $this->getRequest()->getPost() );

    //GET DATA FROM THE DATABASE
    $customers = $this->customersMapper()->getCustomers( $data );

    //INITIALIZE THE PAGINATOR IN CASE THE DATABASE RETURNS ROWS
    if ( is_array( $customers ) ) {
        $paginator = new \Zend\Paginator\Paginator( new \Zend\Paginator\Adapter\ArrayAdapter( $customers ) );
    } else {
        $paginator = $customers;
    }

    $paginator->setItemCountPerPage( 100 );

    //SET THE PAGE NUMBER FROM THE ROUTE
    $paginator->setCurrentPageNumber( 
        $this->getEvent()->getRouteMatch()->getParam( 'page', 1 )
    );

    //CREATE THE VIEW
    $view = new ViewModel;

    //SET THE VARIABLES NEEDED BY THE TEMPLATE VIEW
    $view->setVariables( 
        array(
            'customers' => $paginator,
        )
    );

    //SET THE TEMPLATE VIEW (THE TEMPLATE IS THE ONE DEFINED IN module.config.php)
    $view->setTemplate( 'customers-content' );

    $viewHTML = $this->serviceManager->get( 'viewrenderer' )->render( $view );

    //THAT'S THE INFORMATION THAT'LL BE RETURNED BACK TO THE CLIENT
    $result = array( 
        "success" => true,
        "HTML" => $viewHTML
    );

    //PREPARE THE RESPONSE WHITH THE ARRAY CONVERTED TO A JSON OBJECT
    $this->response->setContent( \Zend\Json\Json::encode( $result ) );

    //RETURN THE RESPONSE
    return $this->response;
} 
```

**第四步**（ticket-content.phtml）：

```
<div id="customersList">
    <!-- HTML CODE THAT GENERATE LISTS' ROWS -->
    <?php
        //CALL TO THE PAGINATION TEMPLATE. WE PASS THE customers PAGINATOR CREATED IN THE CONTROLLER'S pagerAction()
        echo $this->paginationControl( $this->customers, 'Sliding', 'customers/customers-pagination.phtml' );
    ?>
    <!-- HTML CODE THAT CLOSES THE LIST -->
</div> 
```

**第五步**（customers-pagination.phtml）：

```
<a id="pager_first" 
    href="<?php echo $this->url( 'customers/filter', array( 'page' => $this->first ) ); ?>">
        &lt;&lt; First
</a>
<a id="pager_previous" 
    href="<?php echo $this->url( 'customers/filter', array( 'page' => $this->previous-9 ) ); ?>">
        &lt;&lt; Previous
</a>
<?php foreach ( $this->pagesInRange as $page ): ?>
    <a id="<?= "pager_" . $page ?>">
        href="<?php echo $this->url( 'customers/filter', array( 'page' => $page ) ); ?>">
            <?php echo $page; ?>
    </a>
<?php endforeach; ?>
<a id="pager_next" 
    href="<?php echo $this->url( 'customers/filter', array( 'page' => $this->next+9 ) ); ?>">
        &lt;&lt; Next
</a>
<a id="pager_last"
    href="<?php echo $this->url( 'customers/filter', array( 'page' => $this->last ) ); ?>">
        Last &gt;&gt;
</a> 
```

**第六步**（模板中的Javascript）：

将其放置在您想要的任何位置，customers-list.phtml、customers-content.phtml、customers-pagination.phtml。

```
$( function() {
    customers = new Customers();
    customers.initPagerElements( ["pager_first","pager_previous","pager_1-N","pager_next","pager_last"] );
} ); 
```

**第七步**（JavaScript 文件）：

我使用 jQuery

```
//CREATE CUSTOMERS CLASS
Customers = function () {};

//INIT PAGER ELEMENTS FUNCTION
Customers.prototype.initPagerElements = function () {
    pagerElements = arguments[ 0 ];

    //ITERATE EACH PAGER ELEMENT
    $.each( pagerElements, $.proxy( function( index, elementId ) {
        var element = $( "#" + this.common.escapeSelector( elementId ) );

        var route = element.attr( "href" );

        item.click( { "route" : route }, this.clickHandler );
    }, this ) );
};

//CLICK HANDLER FUNCTION
Customers.prototype.clickHandler = function ( event ) {
    var route = event.data.route;

    //ASYNC CALL. IT MUST BE json TYPE
    $.post( 
        route, 
        null, 
        $.proxy( function( data ) {
            //IF THE CALL IS SUCCESS (REMMBER THE RESULT RETURNED FROM THE SERVER, 'success' AND 'HTML')
            if ( data.success ) {
                var container = $( "#customersList" );

                container.html( data.HTML );
            }
        }, this ),
        'json'
    );
} 
```

也许有拼写错误，但它应该工作。

# python - Python。请求此资源需要用户访问令牌

> ID：15743113
> 
> 赞同：2
> 
> 时间：2013-04-01T12:01:22.050
> 
> 标签：python, facebook

我正在尝试通过 Python facebook SDK 发送一些 facebook 通知。使用以下 HTTP 请求执行此操作：

```
https://graph.facebook.com/<USER ID>/notifications?&access_token=<My APP access token>&template=My message!!!! 
```

所有请求都返回以下响应：

```
{
   "error": {
      "message": "A user access token is required to request this resource.",
      "type": "OAuthException",
      "code": 102
   }
} 
```

我试图在浏览器中手动完成。结果是一样的。Facebook 只是说：

```
POST /{recipient_userid}/notifications?access_token= … &template= … &href= … 
```

所以需要任何用户访问令牌......我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T01:53:43.487

如果您仍在开发中并且只需要一个有效的用户令牌，请转到[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)并从您自己的用户帐户生成一个。

但是，如果您已经从 python 进行身份验证，python facebook sdk 提供了一些选项。

1.  get_access_token_from_code
2.  get_user_from_cookie
3.  parse_signed_request

所有这些都提供了对用户访问令牌的访问权限，然后您可以使用该令牌来签署我们的请求。

# wpf - 以编程方式将列定义添加到 Wpf 和 MVVM 中的 DataGrid？

> ID：15743115
> 
> 赞同：1
> 
> 时间：2013-04-01T12:01:26.027
> 
> 标签：wpf, mvvm, datagrid

我想`pivot table`在我的用户界面中创建一个。

![用户界面中的数据透视表](https://i.stack.imgur.com/B1xRC.png)

**注意** 请注意，列数不是静态的。

这是我的`ER diagram`

![ER图](https://i.stack.imgur.com/lXbZ2.png)

这是我的`Main view model`

```
public class MainViewModel : ViewModelBase
{
     public ObservableCollection<ColorViewModel> Colors { get; set; }
} 
```

`ColorViewModel`班级

```
public class ColorViewModel : ViewModelBase
{
    public public ObservableCollection<SizeQtyInformationViewModel> SizeQtyInformationList { get; set; }
} 
```

`SizeQtyInformationViewModel`班级

```
public SizeQtyInformationViewModel : ViewModelBase
{
    public Size { get; set; }

    public Quantity { get; set; }
} 
```

所以现在，我想将这些绑定到数据网格并获得所需的结果。

我有一个想法，但不知道如何实现。

想法是：

如果我可以定义`column definitions programmatically`，那么我也可以绑定列。

有没有办法实现上述想法？或者有什么办法可以解决我的问题？

# node.js - MongoDb 中多次更新的问题

> ID：15743116
> 
> 赞同：1
> 
> 时间：2013-04-01T12:01:29.037
> 
> 标签：node.js, mongodb, node-mongodb-native

我有这样的mongo结构：

```
{
        "_id" : ObjectId("51596b7e469b9c3816000001"),
        "company" : {
                "_id" : "ade2fd0ec9b8b5e9152e0155",
                "title" : "LO3426546457"
        },
}
{
        "_id" : ObjectId("51596cef469b9c3816000008"),
        "company" : {
                "_id" : "ade2fd0ec9b8b5e9152e0155",
                "title" : "LO3426546457"
        },
}
{
        "_id" : ObjectId("51596cc3469b9c3816000007"),
        "company" : {
                "_id" : "ade2fd0ec9b8b5e9152e0155",
                "title" : "LO3426546457"
        }        
} 
```

我想更改具有特定“_id”的对象的所有“标题”字段。我喜欢这样：

```
Collections.UsersCollection.update({
    'company._id': 'ade2fd0ec9b8b5e9152e0155'
}, {
    $set: {
        'company': { _id: 'ade2fd0ec9b8b5e9152e0155', title: 'blablabla' }
        // I also tried: 'company.title': 'blablabla'
    }
}, false, true); 
```

在 Node.js 中执行该代码后（我使用 node-mongodb-native），mongo**只更新一个**文档。

但是，如果我在 Mongo Shell (mongo.exe) 上执行该命令，一切正常并更新所有文档。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:11:56.060

默认情况下，mongo 只更新一个文档。[http://docs.mongodb.org/manual/reference/method/db.collection.update/](http://docs.mongodb.org/manual/reference/method/db.collection.update/)

使用多选项进行多个文档更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T18:20:38.487

默认情况下，collection.update() 只更新单个文档，如果您需要更新多个文档，则必须在回调函数之前添加 {multi:1} 参数。

# python - 如何按字符串长度过滤“sqlalchemy”？

> ID：15743121
> 
> 赞同：14
> 
> 时间：2013-04-01T12:01:44.717
> 
> 标签：python, sqlalchemy

如何`sqlalchemy`按字符串长度过滤？

此代码片段：

```
sess.query(db.ArticlesTable).filter(or_(
    and_(db.ArticlesTable.shorttext.length > 0),
         ... 
```

给了我以下错误：

```
File "./aggregate_news.py", line 69, in is_acceptable
    db.ArticlesTable.shorttext.length > 0),
  File ".../sqlalchemy/orm/attributes.py", line 211, in __getattr__
    key)
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' 
    object associated with ArticlesTable.shorttext has an attribute 'length' 
```

在哪里`ArticlesTable`：

```
class ArticlesTable(Base):
    __tablename__ = TABLE_ARTICLES
    id = Column(Integer, primary_key=True)
    shorttext = Column(String)
    ... 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-01T12:09:21.763

您需要使用[`func`SQL 函数生成器](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html?highlight=desc#sqlalchemy.sql.expression.func)来创建`LENGTH()`函数：

```
from sqlalchemy.sql.expression import func

sess.query(db.ArticlesTable).filter(or_(
    and_(func.length(db.ArticlesTable.shorttext) > 0), 
```

# python - 在 Python 3 中反转排序字典

> ID：15743125
> 
> 赞同：17
> 
> 时间：2013-04-01T12:02:06.780
> 
> 标签：python, dictionary

我正在按键对字典进行排序，但我想颠倒顺序。但是，对于我在网上看到的一些示例，我并没有感到很高兴。

这是排序

```
tempdict = collections.OrderedDict(sorted(tempdict.items())) 
```

现在我正在尝试：

```
reverse = collections.OrderedDict(tempdict.items()[::-1])
reverse = collections.OrderedDict(map(reversed, tempdict.items())) 
```

但这些都行不通。对字典进行排序的最聪明和最优雅的方法是什么。是的，我知道，字典并没有真正用于排序，但这对我们很有效。谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-01T12:03:49.527

要以相反的顺序排序：

```
collections.OrderedDict(sorted(tempdict.items(), reverse=True)) 
```

要反转现有的字典：

```
collections.OrderedDict(reversed(list(tempdict.items()))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T12:04:25.150

```
>>> d = collections.OrderedDict([(1,2),(3,4),(5,6)])
>>> collections.OrderedDict(reversed(list(d.items())))
OrderedDict([(5, 6), (3, 4), (1, 2)]) 
```

# asp.net - 使用 AJAX 从 cookie 中保存和检索图像

> ID：15743127
> 
> 赞同：0
> 
> 时间：2013-04-01T12:02:11.507
> 
> 标签：asp.net, ajax

我只想下载一次图像，而它们是相同的。我需要将这些图像保存在网络流量中。

我如何使用 AJAX 更新来做到这一点。

在此先感谢 Kuldeep Dwivedi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:07:35.303

设置你的形象到期。
它将被缓存在客户端浏览器中。

**并在 cookie 中保存图像**：- 您不能在 cookie 中保存任何对象。您只能在 cookie 中保存字符串。

# ruby-on-rails - 在这种情况下如何急切加载？

> ID：15743129
> 
> 赞同：2
> 
> 时间：2013-04-01T12:02:24.877
> 
> 标签：ruby-on-rails, activerecord, associations, eager-loading, ruby-on-rails-4

```
class Model RunningTracks < ActiveRecord::Base
  has_many :achievements
  has_many :runners, through: :achievements

class Model Runner < ActiveRecord::Base
  has_many :achievements
  has_many :running_tracks, through: :achievements

class Model Achievement < ActiveRecord::Base
  belongs_to :runner
  belongs_to :running_tracks 
```

在 HomePage 上有一个`each do`显示所有 RunningTrack 的列表。在轨道旁边，我们显示一个按钮，将其标记为运行。急切加载解决方案是控制器查询中的`includes`and (Rails 4)：`references`

```
class RunningTracksController
  def index
    @running_tracks = RunningTracks.includes(:achievements).references(:achievements)
  end 
```

为了提高可用性，每条记录旁边的按钮如果已标记，则不应可见。（将在辅助方法中重构）

```
@running_tracks.each do |track|
  .
  - unless track.achievements.map(&:user_id).include? current_user.id
    = button_to "done", running_track_mark_as_done_path(track) 
```

这可行......但是......随着数据库获得更多记录，它将查询很多成就，因此自定义关联和`includes`仅查询`current_user`（设计）的成就应该是解决方案。

```
class Model RunningTracks < ActiveRecord::Base
  .
  has_many :achieved_runns, -> { where user_id: current_user.id }, class_name "Achievement" 
```

但是因为 current_user 在模型中不可访问，所以这不起作用。我认为不可能将变量传递给 hay_many 关联，是吗？

是否有更有效的解决方案来预先加载**所有**RunningTracks，包括当前用户的成就**？**感谢您宝贵的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:03:15.090

以下是丑陋的并且打破了 ActiveRecord 隐喻，但是随着数据库的增长，它会给你非常快速的查找。也许其他人可以通过一种方法将其保持在急切加载范式中。

```
class RunningTrack
   # Returns a Set (for fast lookups) of track IDs that have at least one achievement for the provided user
   def self.running_track_ids_for_achievements_for_user(user_id)
      Set.new Achievement.where(:user_id => user_id).pluck(:running_track_id)
   end
end 
```

然后在你的控制器中：

```
class RunningTracksController
   def index
      @running_tracks = RunningTracks.all
      @running_track_ids_for_achievements_for_user = RunningTrack.running_track_ids_for_achievements_for_user(current_user.id)
   end
end 
```

而你的观点：

```
- unless @running_track_ids_with_achievements_for_user.include? track
   = button_to "done", running_track_mark_as_done_path(track) 
```

# objective-c - 属性的合成 getter 遵循可可命名约定以返回“拥有”对象

> ID：15743130
> 
> 赞同：6
> 
> 时间：2013-04-01T12:02:25.030
> 
> 标签：objective-c, xcode, naming-conventions

我很好奇 cocos2d 对变量有任何命名约定吗？

我有这个

```
//.h
NSMutableArray *newRowForCounter; 
```

和

```
//.m
@synthesize newRowForCounter; 
```

在@synthesize 它警告“属性的合成吸气剂遵循可可命名约定以返回'拥有'对象”但如果我将名称更改为其他名称，它可以正常工作。

我还尝试以 new- {EX newVariable...) 开头的变量命名，它仍然警告我。

谢谢

我的伽玛可能看起来很糟糕，对此感到抱歉

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-01T12:07:08.560

new 不能用在变量名的开头。这就是它显示错误的原因。

Sol ：声明一个名称以 new 开头的属性，除非您指定不同的 getter：

```
// Won't work:
@property NSString *newTitle;

// Works:
@property (getter=theNewTitle) NSString *newTitle; 
```

[这里](https://stackoverflow.com/questions/15365613/why-cant-i-declare-a-variable-like-newvariable-in-obj-c)和[这里的](https://stackoverflow.com/questions/6327448/semantic-issue-propertys-synthesized-getter-follows-cocoa-naming-convention-fo)解释

# java - 获取已安装应用程序所需的权限：应用程序强制关闭

> ID：15743131
> 
> 赞同：0
> 
> 时间：2013-04-01T12:02:40.680
> 
> 标签：java, android, android-intent

我正在尝试制作一个应用程序，它提供已安装应用程序的列表，当单击一个项目时，启动另一个活动，说明已安装应用程序所需的权限。我得到了已安装的应用程序列表，但是当我单击任何应用程序而不是开始新活动时，应用程序强制关闭。我正在关注一个[教程](http://theopentutorials.com/tutorials/android/listview/how-to-get-list-of-installed-apps-in-android/)

主要活动

```
 package com.example.appslist;

import java.util.List;
import com.example.appslist.adapter.ApkAdapter;
import com.example.appslist.app.AppData;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class ApkListActivity extends Activity implements OnItemClickListener {

    PackageManager packageManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        packageManager = getPackageManager();
        List<PackageInfo> packageList = packageManager
                .getInstalledPackages(PackageManager.GET_PERMISSIONS);

        ListView mylistview= (ListView) findViewById(android.R.id.list);
        mylistview.setAdapter(new ApkAdapter(this, packageList, packageManager));

        mylistview.setOnItemClickListener(this);
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long row) {
        PackageInfo packageInfo = (PackageInfo) parent
                .getItemAtPosition(position);
        AppData appData = (AppData) getApplicationContext();
        appData.setPackageInfo(packageInfo);

        Intent appInfo = new Intent(getApplicationContext(), ApkInfo.class);
        startActivity(appInfo);
    }
} 
```

日志猫

```
04-02 11:16:04.536: E/asset(2777): MAS: getAppPckgAndVerCode package: com.example.appslist === version 1
04-02 11:16:04.559: D/dalvikvm(2777): Trying to load lib lib_glossary.so 0x0
04-02 11:16:04.559: I/dalvikvm(2777): Unable to dlopen(lib_glossary.so): Cannot load library: load_library[1083]: Library 'lib_glossary.so' not found
04-02 11:16:04.567: E/MBGlossaryManager(2777): lib_glossary.so can't be loaded
04-02 11:16:04.700: E/asset(2777): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-02 11:16:04.708: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-02 11:16:04.708: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-02 11:16:04.708: E/asset(2777): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-02 11:16:04.715: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-02 11:16:04.723: E/asset(2777): MAS: getAppPckgAndVerCode package: com.arcsoft.photoworkshop === version 5
04-02 11:16:04.778: D/dalvikvm(2777): GC_EXTERNAL_ALLOC freed 822 objects / 60704 bytes in 56ms
04-02 11:16:04.786: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.phone === version 8
04-02 11:16:04.794: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.calculator2 === version 8
04-02 11:16:04.794: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.htmlviewer === version 8
04-02 11:16:04.801: E/asset(2777): MAS: getAppPckgAndVerCode package: com.example.myfirstapp === version 1
04-02 11:16:04.801: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.providers.calendar === version 8
04-02 11:16:04.809: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.bluetooth === version 8
04-02 11:16:04.809: E/asset(2777): MAS: getAppPckgAndVerCode package: com.example.sessionmanagement === version 1
04-02 11:16:04.817: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.calendar === version 8
04-02 11:16:04.817: E/asset(2777): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-02 11:16:04.817: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-02 11:16:04.825: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-02 11:16:04.825: E/asset(2777): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-02 11:16:04.872: E/asset(2777): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-02 11:16:06.536: D/AndroidRuntime(2777): Shutting down VM
04-02 11:16:06.536: W/dalvikvm(2777): threadid=1: thread exiting with uncaught exception (group=0x400207e0)
04-02 11:16:06.551: E/AndroidRuntime(2777): FATAL EXCEPTION: main
04-02 11:16:06.551: E/AndroidRuntime(2777): java.lang.ClassCastException: android.app.Application
04-02 11:16:06.551: E/AndroidRuntime(2777):     at com.example.appslist.ApkListActivity.onItemClick(ApkListActivity.java:44)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at android.widget.ListView.performItemClick(ListView.java:3444)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at android.os.Handler.handleCallback(Handler.java:587)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at android.os.Looper.loop(Looper.java:143)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at android.app.ActivityThread.main(ActivityThread.java:4717)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at java.lang.reflect.Method.invoke(Method.java:521)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-02 11:16:06.551: E/AndroidRuntime(2777):     at dalvik.system.NativeStart.main(Native Method)
04-02 11:16:08.137: I/Process(2777): Sending signal. PID: 2777 SIG: 9 
```

请帮忙。如果问题含糊不清，非常抱歉。我想不通，我尝试了很长时间。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:05:02.383

这是因为您正在使用列表活动。当您使用 Activity 时，您的列表视图必须具有 id

在您的 xml 中设置 listview id

```
android:id="@android:id/list 
```

像这样得到它

```
ListView yorulistview= (ListView) findViewById(android.R.id.list); 
```

# javascript - 从子域跟踪域（谷歌分析）

> ID：15743142
> 
> 赞同：0
> 
> 时间：2013-04-01T12:03:53.660
> 
> 标签：javascript, google-analytics

我已在我的域的子域中添加了此代码以跟踪某些页面，但我不知道为什么它不起作用。

我想提一下，被跟踪的页面在域上，而不是在子域上。

```
<script type="text/javascript">
window.onload = function () {
    var _gaq = _gaq || []; 
    _gaq.push(['_setAccount', 'UA-15318659-1']); 
    _gaq.push(['_setDomainName', 'savoyhotel.ro']); 
    var hdStep = parseInt(document.getElementById('hdStep').value); 
    switch (hdStep) { 
        case 1: { _gaq.push(['_trackPageview', '/alege-data']); if(document.location.hash == '#test-lucian-20130401') { alert('alege-data') } break; }
        case 2: { _gaq.push(['_trackPageview', '/alege-camera']); if(document.location.hash == '#test-lucian-20130401') { alert('alege-camera') } break; }
        case 3: { _gaq.push(['_trackPageview', '/date-personale']); if(document.location.hash == '#test-lucian-20130401') { alert('date-personale') } break; }
        case 4: { _gaq.push(['_trackPageview', '/finalizare-fara-garantare']); if(document.location.hash == '#test-lucian-20130401') { alert('finalizare-fara-garantare') } break; }
        case 5: { _gaq.push(['_trackPageview', '/finalizare']); if(document.location.hash == '#test-lucian-20130401') { alert('finalizare') } break; }
    } 
    (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();

}
</script> 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:14:34.980

您将需要跟踪您的基本域“.savoyhotel.ro”（注意额外的 . 开头），并在分析内部设置规则以过滤域和子域。例如，在我们的一些网站上，我们在分析中有过滤器，允许我们显示主域、子域和组合的流量，同时使用单个分析标签。

现在在 iPad 上，详细说明有点痛苦，但如果没有人发布更详细的答案，我会在几个小时内发布我回家后要遵循的步骤

但它基本上归结为这里所说 [的在谷歌分析中设置子域包括过滤器](https://stackoverflow.com/questions/12670174/setting-up-sub-domain-include-filter-in-google-analytics)

* * *

更新：

1st，切换回使用普通分析代码，并添加 . 到域的前面

```
<script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount'   , 'UA-15318659-1']);
    _gaq.push(['_setDomainName', '.savoyhotel.ro']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script> 
```

现在，如果您想创建一个小包装函数，以便在需要时从您的代码中调用 trackPageView

```
function trackPageView(page) {
    window._gaq = window._gaq || [];
    window._gaq.push(['_trackPageview', page]);
} 
```

这是您唯一需要跟踪来自您的主域 + 子域的所有网页浏览量的事情

现在，如果您愿意，您可以在分析中设置配置文件，以拥有 1 个仅显示来自您的主域的分析的配置文件，以及来自您的子域的另一个配置文件，这就是[在谷歌分析中设置子域包括过滤器的](https://stackoverflow.com/questions/12670174/setting-up-sub-domain-include-filter-in-google-analytics)地方。

# java - 使用 JAVA 代码创建类图

> ID：15743147
> 
> 赞同：0
> 
> 时间：2013-04-01T12:04:11.257
> 
> 标签：java

是否有任何软件可以使用 JAVA 源代码创建类图、活动图、序列图和任何其他相关图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:06:37.707

大多数 UML 工具都可以导入源代码并生成类图。你用的是哪个工具？

序列图更成问题，因为您实际上必须运行代码。

IntelliJ 企业版是 JetBrains 出品的世界上最好的 IDE，可以为您做到这两点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:32:28.120

您可以使用 Java 将 UML 图生成为 XMI ( [http://en.wikipedia.org/wiki/XML_Metadata_Interchange](http://en.wikipedia.org/wiki/XML_Metadata_Interchange) )，然后使用一些支持 XMI 的工具对其进行处理。

# ios - 获取 iOS Core MIDI 客户端名称以显示在设备列表中

> ID：15743150
> 
> 赞同：1
> 
> 时间：2013-04-01T12:04:24.627
> 
> 标签：ios, coremidi

我已经使用 Core MIDI 在我的 iOS 应用程序中成功获得了 MIDI。但是，如果我打开一个输出 MIDI 的应用程序（例如，免费应用程序 Little MIDI Machine），我的应用程序不会出现在可能的设备列表中（对于 LMM，在名为“CoreMIDI 输出”的列表中） ，即使我的应用程序无论如何都会收到 MIDI 音符。其他应用程序确实按名称显示（即 iMS-20） 我如何将我的应用程序“宣传”到同一系统上的其他 MIDI 应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:20:31.093

好的，折腾了一段时间后，我已经解决了。我会尽力解释，如果此信息有任何错误，我希望一些专家随时加入。

使用 Core MIDI 接收 MIDI 信息有两种方式。您可以使用 MIDIInputPortCreate 创建一个 MIDIPortRef 作为输入端口，然后遍历所有可能的源，依次使用 MIDIPortConnectSource 连接每个源。或者您可以使用 MIDIDestinationCreate 创建一个 MIDIEndpointRef 作为 MIDI 目标 - 然后无需遍历所有源，并且在这两种情况下都需要 MIDIReadProc - 即您将用于读取传入消息的函数具有完全相同两种情况下的签名。

当您使用 MIDIDestinationCreate 时，您的应用程序会在其他应用程序中显示为可以选择的目的地。这比在应用程序中选择输入源更有意义，尤其是因为在任何给定时间这些源可能存在也可能不存在。但它也依赖于其他应用程序能够选择你的作为目的地。也许这两件事都是需要的，以涵盖所有场景。

我没有找到任何使用 MIDIDestinationCreate 在 iOS 上进行应用间通信的示例代码，所以我希望这个信息有一些用处。

无论如何，请注意您的应用程序需要设置为背景音频，根据这个问题：

[iOS6 中的 CoreMIDI/PGMidi 虚拟 MIDI 错误](https://stackoverflow.com/questions/12548856/coremidi-pgmidi-virtual-midi-error-in-ios6)

# ios - NSString 到 NSNumber 忽略初始零

> ID：15743156
> 
> 赞同：1
> 
> 时间：2013-04-01T12:04:56.050
> 
> 标签：ios, core-data, nsstring, nsnumber

我正在转换`NSString`为`NSNumber`. 但问题是，如果`NSString`从零开始，然后将其转换为`NSNumber`忽略初始零。我知道初始零没有任何意义，但我想保留初始零，因为在我的情况下它是电话号码。

这是我的代码：

```
NSLog(@"test1: %@",tempPhoneNumber);
NSNumberFormatter *formatter=[[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *tempPnoneNumberNumber=[formatter numberFromString:tempPhoneNumber];
NSLog(@"test: %@",tempPnoneNumberNumber); 
```

如果 test1：00966123456789 那么测试：966123456789

我想要两个一样

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:07:47.930

`NSNumber`不能保留初始零。

如果要保留零，**请不要将其转换**为`NSNumber`. 电话号码实际上不是数字，通常保存为字符串。

另请注意，电话号码可以包含其他字符`+`：`*`或`#`。这些字符通常具有特殊含义（例如`+`，开头的含义与 相同`00`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:10:15.760

如果您知道一个数字必须有多少位数，则可以使用该格式将其格式化为带有可选前导零的所需位数`"%014lli"`。幻数 14 是所需的位数，包括前导零。这是一个[C 语言演示](http://ideone.com/MEFDRi)的链接，它使用`long long`常量来表示您的数字。

PS 电话号码并不是真正的“数字”，它们是恰好由数字组成的字符串。您不应该因为前导零问题而尝试将它们精确地转换为数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:28:28.860

如果您不使用它进行计算，那么它是一个字符串，而不是一个数字。

这适用于电话号码、邮政编码等。

如果您确实设法存储了前导零，那么最终会有人提供此电话号码：+44 (0)1234 567890 - 您将如何处理？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:58:54.900

有两种方法可以做到这一点：首先，如果您的电话号码是固定大小的，那么您可以使用它

```
NSLog(@"test %014d", tempPnoneNumberNumber); 
```

否则只需添加前导零

```
[formatter setPaddingCharacter:@"00"]; 
```

# jquery - 如何通过ajax从struts2 action methode获取json结果（使用jquery）

> ID：15743159
> 
> 赞同：3
> 
> 时间：2013-04-01T12:05:06.463
> 
> 标签：jquery, ajax, json, struts2

我已经使用下面的代码在前端通过 ajax 从下拉列表中显示国家代码更改。但是我无法从操作类到前端获取 json 结果。任何人都可以帮我解决这个问题吗？

**Struts.xml 文件：**

```
<result-types>
  <result-type name="json" class="com.googlecode.jsonplugin.JSONResult"/>
</result-types>
<action name="populateCountryCode"
class="com.CustRegnManagerAction "method="populateCountryCode">
  <result name="success" type="json">
    <param name="root">jsonData</param>
  </result>
</action> 
```

**动作类方法：**

```
public String populateCountryCode() throws Exception
   {
     jsonData = new HashMap<String, String>();

    try{
         if(!getCountry().equals("") && getCountry()!=null){

             List<Country> countryCodeNew =(List<Country>) custRegnManagerService.getCountryCode(getCountry());
             for(Country country: countryCodeNew){

                 countryCode=country.getCountryCode();

                  jsonData.put("countryCode", countryCode);
                 // setJsonData(jsonData);
             }
        System.out.println(jsonData);
        }
     }catch (Exception e) {
        // TODO: handle exception
         e.printStackTrace();
    }

     return SUCCESS;
} 
```

**查询：**

```
$(document).ready(function() {   
//checks for the button click event
$("#country").change(function(e){

var countryCode=$('#countryCode').val();
var country=$('#country').val();

 $.getJSON(      
  'populateCountryCode.action' ,
  {
      country: country
  },
  function(json) {
       alert("hi")  ****//not displaying
   $('#countryCode').html(json.countryCode);

   countryCode=json.countryCode; 
  }
 );
 return false;
});  
}); 
```

**jsp代码：**

```
<s:form action="addRegistFeedback" method="post" id="theform" >

<s:select  headerKey="-1" headerValue="--- Select ---"

 label="Country"   id="country"     cssStyle="width:100%" list="countries" 

required="true" name="country">  </s:select><br>

<table style="width: 25%">
<tr style="width: 100%">
<td ><s:label theme="simple">Phone :</s:label>
</td>
<td style="width: 70%">

<s:textfield   name="customer.countryCode"id="countryCode" cssStyle="width:20%" 
theme="simple" required="true" />

<s:textfield name="stateCode"  cssStyle="width:20%" id="stateCode"
theme="simple"   required="true"  />

<s:textfield name="cityCode"  cssStyle="width:45%" id="phone"
theme="simple"   required="true" />
</td>
</tr>
</table><br>
<s:token name="token"></s:token>

<s:submit value="Save" id="button" theme="simple" cssStyle="width:50px;"></s:submit>
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:26:31.530

请在您的操作类中创建地图 jsonData 的 getter setter 方法。这可能会帮助您解决问题。

# php - PHP REST 客户端

> ID：15743161
> 
> 赞同：1
> 
> 时间：2013-04-01T12:05:22.840
> 
> 标签：php, rest, client

我有 Java REST API 服务器和 ServerResource 来在一些文档上创建哈希码，但我真的不知道，如何构建 PHP REST 客户端，有人可以帮忙吗？（一些示例或教程如何做到这一点？）我没有使用 php 的经验，所以我很感激帮助。如何通过 PHP 连接到我的本地主机？如何在 Java 中将一些字符串发布到我的哈希资源？

我已经从 phphttpclient.com/ 下载了 REST 客户端，所以我选择了一些文件，我有那个文件的内容..现在..如何将它发送到我的 Java REST API (localhost:port/hash)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T06:08:09.597

我认为您只需要一个非常简单的 php REST 客户端来发送请求和接收响应，以便与 REST 服务器进行通信。REST 客户端帮助您专注于要发送的数据，而不是关心较低级别的事情，例如如何发布或获取数据。对于更简单的，如果你使用像 Zend 这样的框架，你应该尝试 HTTPFUL，试试 Zend/Rest/Client

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T11:21:52.477

这不是在 php 中构建 rest api 的原始方法，这将帮助您启动它。

这里有main你只需要在php中创建rest类，我已经在php中给出了主要的rest类。

```
<?php
class REST {
    // initialize the database connection 
    const DB_SERVER = "localhost";
    const DB_USER = "root";
    const DB_PASSWORD = "pass";
    const DB = "vtms";

    // set the conntent type and object to the api
    public $_allow = array();
    public $_content_type = "application/json";
    public $_request = array();

    private $_method = "";      
    private $_code = 200;

    //construct the  input for the rest call
    public function __construct(){
        $this->inputs();
    }

    //Set reference to the webserver
    public function get_referer(){
        return $_SERVER['HTTP_REFERER'];
    }

   // give the status of the rest operation
    public function response($data,$status){
        $this->_code = ($status)?$status:200;
        $this->set_headers();
        echo $data;
        exit;
    }
    // For a list of http codes checkout http://en.wikipedia.org/wiki/List_of_HTTP_status_codes
    private function get_status_message(){
        $status = array(
                    200 => 'OK',
                    201 => 'Created',  
                    204 => 'No Content',  
                    404 => 'Not Found',  
                    406 => 'Not Acceptable');
        return ($status[$this->_code])?$status[$this->_code]:$status[500];
    }

    public function get_request_method(){
        return $_SERVER['REQUEST_METHOD'];
    }
    // define curd operation of the api 
    private function inputs(){
        switch($this->get_request_method()){
            case "POST":
                $this->_request = $this->cleanInputs($_POST);
                break;
            case "GET":
            case "DELETE":
                $this->_request = $this->cleanInputs($_GET);
                break;
            case "PUT":
                parse_str(file_get_contents("php://input"),$this->_request);
                $this->_request = $this->cleanInputs($this->_request);
                break;
            default:
                $this->response('',406);
                break;
        }
    }       

    private function cleanInputs($data){
        $clean_input = array();
        if(is_array($data)){
            foreach($data as $k => $v){
                $clean_input[$k] = $this->cleanInputs($v);
            }
        }else{
            if(get_magic_quotes_gpc()){
                $data = trim(stripslashes($data));
            }
            $data = strip_tags($data);
            $clean_input = trim($data);
        }
        return $clean_input;
    }       
    // set headers to the content
    private function set_headers(){
        header("HTTP/1.1 ".$this->_code." ".$this->get_status_message());
        header("Content-Type:".$this->_content_type);
    }
}   
?> 
```

如果您复制并粘贴此代码而几乎没有任何错误，那么现在创建一个对象类扩展至此 api，例如。

```
<?php 
```

require_once("Rest.inc.php");

类 API 扩展 REST {

```
public $data = "";
private $db = NULL;
private $mysqli = NULL;

public function __construct() {
    parent::__construct();    // Init parent contructor
    $this->dbConnect();     // Initiate Database connection
}

/*
 *  Connect to Database
 */

private function dbConnect() {
    $this->mysqli = new mysqli(self::DB_SERVER, self::DB_USER, self::DB_PASSWORD, self::DB);
}

/*
 * Dynmically call the method based on the query string
 */

public function processApi() {
    $func = strtolower(trim(str_replace("/", "", $_REQUEST['x'])));
    if ((int) method_exists($this, $func) > 0) {
        $this->$func();
    } else {
        $this->response('', 404);
    } // If the method not exist with in this class "Page not found".
}
  private function getAllstudent() {
    if ($this->get_request_method() != "GET") {
        $this->response('', 406);
    }

    $query = "SELECT * from students";
    $r = $this->mysqli->query($query) or die($this->mysqli->error . __LINE__);

    if ($r->num_rows > 0) {
        $result = array();
        while ($row = $r->fetch_assoc()) {
            $result[] = $row;
        }
        $this->response($this->json($result), 200); // send user details
    }
    $this->response('', 204); // If no records "No Content" status
}

  private function json($data){
        if(is_array($data)){
            return json_encode($data);
        }
    }

}
$api = new API;
$api->processApi(); 
```

只需打开一个 .htaccess 文件并输入此代码

```
<IfModule mod_rewrite.c>

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-s
    RewriteRule ^([a-zA-Z0-9-]+)/studentapi/method/ student.php?x=$1 [QSA,NC,L]

</IfModule> 
```

创建表调用 student 并向其输入一些值，现在打开浏览器并输入此 URL [http://localhost/yourserviceFodername/getAllStudent/studentapi/method/student](http://localhost/yourserviceFodername/getAllStudent/studentapi/method/student)。

开心点...

# iphone - Tabbar 从第一个控制器开始导航

> ID：15743164
> 
> 赞同：0
> 
> 时间：2013-04-01T12:05:27.557
> 
> 标签：iphone, objective-c

我正在创建标签栏应用程序，它包含 2 个标签栏，每个标签栏都包含导航控制器。当我按下第一个标签栏并遍历三个后续导航时。现在我正在调用/自从应用程序进入后台（iOS4）以来的任何中断。

我的问题是当通过双击主页按钮启动应用程序时，它从第三个导航页面开始，我想从 firstViewcontroller 开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:35:25.613

如果您的目标是在每次启动时从头开始重新启动应用程序，只需在文件中添加`UIApplicationExitsOnSuspend`/`YES`更改`info.plist`密钥

这是文档中的相关[链接](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

# android - 谷歌地图获取当前位置并绘制路径

> ID：15743167
> 
> 赞同：-2
> 
> 时间：2013-04-01T12:05:43.270
> 
> 标签：android, google-maps

如何获取您在 android 中的当前位置并在您当前位置和您被触摸的位置之间绘制路径或线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:12:54.923

要知道您当前的位置，您需要获取当前位置的纬度和经度。

```
 public void getLatiLongi()
 {
     LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);   
        Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {
               flati = location.getLatitude();
               flongi = location.getLongitude();
               System.out.println("Hello....................+lati+longi");
           }
     }

    @Override
    protected void onStart() {
        super.onStart();

        LocationManager locationManager =
                (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        final boolean gpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

        if (!gpsEnabled) {
            gpsAlert();

        }
    }

    public void gpsAlert(){
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

            alertDialogBuilder.setTitle("Enable GPS");  
            alertDialogBuilder
                .setMessage("Yes")      
                .setCancelable(false)
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {

                        enableLocationSettings();
                        dialog.cancel();
                    }
                  })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {        
                        dialog.cancel();
                    }
                });
                AlertDialog alertDialog = alertDialogBuilder.create(); 
                alertDialog.show();
    }
    private void enableLocationSettings() {
        Intent settingsIntent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(settingsIntent);
    } 
```

之后使用标记

[https://developers.google.com/maps/documentation/android/marker](https://developers.google.com/maps/documentation/android/marker)。

您需要目的地的纬度和经度。

[https://developers.google.com/maps/documentation/android/shapes#polylines](https://developers.google.com/maps/documentation/android/shapes#polylines)。

使用折线绘制从您所在位置到目的地的路径

[答案：使用 Google Maps Android API v2 在两点之间绘制路径](https://stackoverflow.com/questions/14702621/answer-draw-path-between-two-points-using-google-maps-android-api-v2)。此链接对该主题有很好的解释。

# c# - 如何使用 Silverlight Media Framework 在 Windows Phone 中播放 Youtube 视频

> ID：15743171
> 
> 赞同：1
> 
> 时间：2013-04-01T12:05:47.647
> 
> 标签：c#, silverlight, youtube, windows-phone-8

我有一个链接、一个 ID（有关 Youtube URL 的所有元数据），我想在我的 Windows Phone 8 应用程序中使用 SMF 播放器播放视频。这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T14:53:23.393

我认为您可以使用媒体元素来流式传输视频

[Windows Phone 的音频和视频](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207066%28v=vs.105%29.aspx#tag_mediaelement_obj)

# eclipse - Apache Hadoop 和 Eclipse 集成

> ID：15743174
> 
> 赞同：3
> 
> 时间：2013-04-01T12:06:14.533
> 
> 标签：eclipse, hadoop

我目前正在尝试将 Hadoop 与 Eclipse 集成。我按照 [这里](http://www.thecloudavenue.com/2012/10/debugging-hadoop-mapreduce-program-in.html)的说明进行操作。但是，当我尝试运行我的 Eclipse 项目时，我得到以下输出：

```
13/04/01 14:55:11 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/04/01 14:55:11 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
13/04/01 14:55:11 INFO input.FileInputFormat: Total input paths to process : 1
13/04/01 14:55:11 WARN snappy.LoadSnappy: Snappy native library not loaded
13/04/01 14:55:11 INFO mapred.JobClient: Running job: job_local_0001
13/04/01 14:55:11 INFO util.ProcessTree: setsid exited with exit code 0
13/04/01 14:55:11 INFO mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin@6ea920ad
13/04/01 14:55:11 INFO mapred.MapTask: io.sort.mb = 100
13/04/01 14:55:11 INFO mapred.MapTask: data buffer = 79691776/99614720
13/04/01 14:55:11 INFO mapred.MapTask: record buffer = 262144/327680
13/04/01 14:55:11 WARN mapred.LocalJobRunner: job_local_0001
java.lang.ClassCastException: interface javax.xml.soap.Text
    at java.lang.Class.asSubclass(Class.java:3046)
    at org.apache.hadoop.mapred.JobConf.getOutputKeyComparator(JobConf.java:774)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:959)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:674)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:756)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
13/04/01 14:55:12 INFO mapred.JobClient:  map 0% reduce 0%
13/04/01 14:55:12 INFO mapred.JobClient: Job complete: job_local_0001
13/04/01 14:55:12 INFO mapred.JobClient: Counters: 0
false 
```

我的机器是带有 Apache Hadoop 1.04 版、Oracle Java v1.7 和 Eclipse 3.7.2 的 Linux Ubuntu 12.04。为什么我得到这个输出？如果我做错了什么，任何人都可以指导我使用经过测试的方法以使其正常工作吗？

谢谢

PS：我目前正在为想要开始“玩”大数据的本科生写一个维基。因此，一大群人将从一个好的答案中受益:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:16:05.623

请切换到新的 API，即“mapreduce”而不是“mapred”。此外，它更有意义，因为您计划为学生编写一个 wiki。它们应该是最新的。对吗？如果您需要有关如何设置 eclipse 来编写 MapReduce 程序的信息，您可能会发现此[链接](http://cloudfront.blogspot.in/2012/07/how-to-run-mapreduce-programs-using.html#.UVwdZzWH6IQ)很有用。

# html - 垂直对齐 - 它是如何工作的？

> ID：15743175
> 
> 赞同：0
> 
> 时间：2013-04-01T12:06:16.800
> 
> 标签：html, css, alignment

所以[JSFidle 上](http://jsfiddle.net/2S2Qt/2/)有代码，我不能让节内的 h1 位于字段的中间......垂直对齐不做他的工作！和保证金自动相同。Any1有想法吗？

```
 #welcome{
    vertical-align: middle;
    height: 100px;
}
#welcome h1{
    color: gray;
    font-size: 2.1em;
    font-family:"proxima-nova","sans-serif";
    text-align: center;
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:09:18.230

将 line-height 设置`#welcome h1`为要使文本居中的高度，这是居中对齐文本的典型方法。

[jsFiddle](http://jsfiddle.net/Tyriar/xfRXX/)

```
#welcome h1 {
    line-height: 100px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:08:57.870

如果将 line-height 设置为与 div 高度相同，它将垂直对齐

```
#welcome{
height: 100px;
}
#welcome h1{
line-height:100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:07:53.510

添加`display:table-cell`

```
section{
    display:table-cell;
    vertical-align: middle;
    position: relative;
    top:0px;
    border-bottom: 1px solid #eee;
} 
```

**[演示](http://jsfiddle.net/2S2Qt/3/)**

# android - 在弹出的android中打开pdf

> ID：15743179
> 
> 赞同：0
> 
> 时间：2013-04-01T12:06:34.557
> 
> 标签：android, pdf, popup

我正在开发一个 Android 应用程序，我需要在弹出窗口中打开我的 pdf 文件。我的代码是：

```
ImageView brobutton=(ImageView)layout.findViewById(R.id.imageView3);
brobutton.setOnClickListener(new OnClickListener() {
                                                   }
}); 
```

我已经开发了一个应用程序来使用以下代码在模拟器中打开 pdf：

```
final String googleDocsUrl = "http://docs.google.com/viewer?url=";
WebView mWebView=new WebView(SubProducts.this);                                         mWebView.getSettings().setJavaScriptEnabled(true);
WebSettings webSettings = mWebView.getSettings();
webSettings.setPluginState(PluginState.ON);
mWebView.setWebViewClient(new WebViewClient() {
    public boolean shouldOverrideUrlLoading(WebView view, String url){                                                          
        view.loadUrl(image_urlpdf);
        return false; // then it is not handled by default action
    }
});
mWebView.loadUrl((googleDocsUrl + image_urlpdf)); 
```

在按钮的onclick下，我需要打开我的pdf。任何人都建议我有好主意。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:22:24.373

您需要修改您的应用程序才能打开 PDF。使用意图传递一些标志以提醒您的应用需要打开弹出窗口以显示 PDF。

检查此线程以了解如何将活动显示为对话框[Android 活动作为对话框](https://stackoverflow.com/questions/1979369/android-activity-as-a-dialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:21:10.390

您可以在自定义对话框中加载您的 PDF 文件。创建自定义对话框的教程 - [http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

# mysql - 如何从 GROUP_CONCAT 获取不同的标题作为左连接而不重复其他表的数据？

> ID：15743183
> 
> 赞同：2
> 
> 时间：2013-04-01T12:06:42.337
> 
> 标签：mysql, database

我有一个像这样的值表：

```
TABLE:     prop_feat
TYPE       FEAT
Appliances Gas Range
Appliances Fridge
Interior   Hardwood Flooring 
```

我正在尝试使用以下功能显示一次类型：

### 家电

煤气灶、冰箱

### 内部的

硬木地板

这些值可能是空的，所以我需要 LEFT JOIN 这个表。我到处找了！我应该如何编写 MySQL 来显示这样的结果？这是我到目前为止所拥有的，但还没有完全做到。（我知道.. 不是 LEFT JOIN.. ）

```
SELECT *
  (SELECT GROUP_CONCAT( DISTINCT CONCAT ('', type, '', prop_feat.feat, '') 
   ORDER BY type ASC SEPARATOR ' '  )
FROM prop_feat
WHERE prop_feat.id_prop = '$page'  )  AS feat
FROM properties
WHERE id_pg = '$page' 
```

任何帮助将不胜感激！

编辑

这是我的全部查询.. 我有一大堆连接。这使得类型/功能问题变得困难。

```
SELECT *,
GROUP_CONCAT(CONCAT('<tr><td>', style, '</td><td>', beds, '</td><td>', ba, '</td><td>', sq_ft, '</td><td>', rent, '</td><td>', dep, '</td></tr>') 
    ORDER BY beds DESC SEPARATOR '') AS unit, 
(SELECT 
    GROUP_CONCAT( DISTINCT CONCAT ('<h4>', type, '</h4><div>', prop_feat.feat, '</div>') 
        ORDER BY type ASC SEPARATOR ' '  )
    FROM prop_feat
    WHERE prop_feat.id_prop = '$page'  )  AS interior 
FROM properties 
INNER JOIN prop_units ON prop_units.id_prop = '$page'
LEFT JOIN prop_intro ON prop_intro.id_prop = '$page'  
LEFT JOIN prop_hours ON prop_hours.id_prop = '$page'  
WHERE id_pg = '$page'
GROUP BY type 
```

属性有：名称、地址、城市、省、邮政编码、电话（显示一个属性 - 基本信息）
Prop_units 有：床、浴室、平方英尺、租金、押金、样式
Prop_intro：标题、文本（地点描述）
Prop_hours：Sunfrom , Sunto, MonFrom, MonTo, etc (times open in week)
Prop_feat: 有硬木地板等房产特征，只需要按类型排序和显示类型一次..如果可能的话！

编辑编辑 - 现在使用这个

```
$info = mysql_fetch_array(mysql_query("SELECT *,
GROUP_CONCAT(CONCAT('<tr><td>', style, '</td><td>', beds, '</td><td>', ba, '</td><td>', sq_ft, '</td><td>$', rent, '</td><td>',IF(dep='','','$'), dep, '</td></tr>') 
    ORDER BY u_order ASC SEPARATOR '') AS unit
FROM properties 
INNER JOIN prop_units ON prop_units.id_prop = '$page'
LEFT JOIN prop_intro ON prop_intro.id_prop = '$page'  
LEFT JOIN prop_hours ON prop_hours.id_prop = '$page'  
WHERE id_pg = '$page'"));

$check = mysql_query("SELECT type, GROUP_CONCAT(CONCAT('<tr><td>', feat, '</td></tr>') SEPARATOR '') AS featlist
FROM prop_feat
WHERE id_prop = '$page'
GROUP BY type"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:10:36.633

您需要使用`GROUP BY`子句，因为`GROUP_CONCAT()`它是一个聚合函数。

```
SELECT  Title, GROUP_CONCAT(FEAT) FeatList
FROM    Prop_Feat
GROUP   BY Title 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/246c7/1)

输出

```
╔════════════╦═══════════════════╗
║   TITLE    ║     FEATLIST      ║
╠════════════╬═══════════════════╣
║ Appliances ║ Gas Range,Fridge  ║
║ Interior   ║ Hardwood Flooring ║
╚════════════╩═══════════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:29:17.633

尝试：

```
SELECT p.*, f.title, group_concat(distinct f.feat) features
FROM properties p
left join prop_feat f on p.id_pg = f.id_prop
WHERE p.id_pg = '$page'
group by f.title
order by f.title 
```

# php - 将带有谷歌字体的svg文件转换为png - PHP

> ID：15743184
> 
> 赞同：1
> 
> 时间：2013-04-01T12:06:46.870
> 
> 标签：php, svg, imagick

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative;" width="100%" version="1.1" height="100%"><defs><style> @import url(http://fonts.googleapis.com/css?family=Faster+One);</style></defs><text transform="matrix(1,0,0,1,0,0)" style="text-anchor: middle; ; font-size: 100px;" x="10%" y="32.36134453781513%" text-anchor="middle" font="" stroke="none" fill="#000000" font-family="   Faster One   , cursive" font-size="78%" id="text2"><tspan dy="NaN">hii</tspan></text></svg> 
```

当我尝试使用 PHP将此**svg**转换为**png**`imagick`时，它仅以默认字体（arial）呈现文本。

转换为 png 时，有什么方法可以使用相同的谷歌字体来呈现文本？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:58:46.497

PhantomJS 可以通过一些工作来渲染 SVG，包括 Google 字体。[https://github.com/ariya/phantomjs/issues/10592](https://github.com/ariya/phantomjs/issues/10592)

# ios - UICollectionView 快速滚动错误行为

> ID：15743187
> 
> 赞同：2
> 
> 时间：2013-04-01T12:07:08.480
> 
> 标签：ios, objective-c, ios6, uicollectionview

我有一个固定单元格大小的 collectionView，没有任何 flowLayout 类。

当我快速滚动时，单元格会像这样掉到以前的下面有时！！！

![在此处输入图像描述](https://i.stack.imgur.com/P4BRc.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:21:30.797

我曾经遇到过这个问题并[问](https://stackoverflow.com/questions/15481365/collectionview-loads-wierdly)过一次。没有人回答。我所做的解决方法是`CollectionView`调整高度以使单元格正确可见。使高度`UICollectionView`比单元格的高度+2像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:42:51.813

[在这里](https://stackoverflow.com/questions/12927027/uicollectionview-flowlayout-not-wrapping-cells-correctly-ios/13389461#13389461)找到了一个解决方案，您不必调整您的 collectionView 的大小。

# php - 使用 PDO mysql 显示数据库中的多个图像

> ID：15743189
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:07:10.473
> 
> 标签：php

情况：我一次只能显示一张图片。

问题：将数据库中的图像显示到网页中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:49:46.230

新答案，因为它的格式不正确

从表名中选择 imgMime、imgSize、imgData，其中 id_inter = 3；

//如果返回2个结果：

```
id_inter    |   imgMime     |   imgSize     |   imgData     |

3           |   jpeg        |   100kb       |   data1       |
3           |   png         |   300kb       |   data2       | 
```

然后

```
while($row = $statement->fetch()) { ?>
<img src="image.php?data=<?= $row['imgData']; ?>"><br />
<?php } ?> 
```

应该输出：

```
<img src="image.php?data=data1"><br />
<img src="image.php?data=data2"><br /> 
```

如果你使用 id_inter，你会输出

```
<img src="image.php?id=3"><br />
<img src="image.php?id=3"><br /> 
```

给我们一个 HTML 的例子，它应该如何处理 ie 3 结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:12:50.697

您没有选择 ID，但应该是这样的：

```
while($row = $statement->fetch()) { ?>
<img src="image.php?id_inter=<?= $row['id']; ?>" />
...
<?php } ... 
```

如果您使用 GET 方法中的 ID，如 ( try { $requestedID = (int)$_GET['id_inter']; })

然后简单地

```
..."id_inter=<?= $reuqestedID; ?>" 
```

# c# - 检查数字是否为素数

> ID：15743192
> 
> 赞同：58
> 
> 时间：2013-04-01T12:07:35.873
> 
> 标签：c#, primes, primality-test

我想问一下这是否是检查数字是否为素数的正确方法？因为我读到 0 和 1 不是质数。

```
int num1;

Console.WriteLine("Accept number:");
num1 = Convert.ToInt32(Console.ReadLine());
if (num1 == 0 || num1 == 1)
{
    Console.WriteLine(num1 + " is not prime number");
    Console.ReadLine();
}
else
{
    for (int a = 2; a <= num1 / 2; a++)
    {
        if (num1 % a == 0)
        {
            Console.WriteLine(num1 + " is not prime number");
            return;
        }

    }
    Console.WriteLine(num1 + " is a prime number");
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-04-01T12:10:10.443

```
var number;

Console.WriteLine("Accept number:");
number = Convert.ToInt32(Console.ReadLine());

if (IsPrime(number))
{
    Console.WriteLine("It is prime");
}
else
{
    Console.WriteLine("It is not prime");
}       

public static bool IsPrime(int number)
{
    if (number <= 1) return false;
    if (number == 2) return true;
    if (number % 2 == 0) return false;

    var boundary = (int)Math.Floor(Math.Sqrt(number));

    for (int i = 3; i <= boundary; i += 2)
        if (number % i == 0)
            return false;

    return true;        
} 
```

我改成`number / 2`是`Math.Sqrt(number)`因为从*[wikipedia](http://en.wikipedia.org/wiki/Prime_number)*中，他们说：

> 该例程包括将**n**除以每个大于 1 且小于或等于**n 的平方根的整数****m**。如果任何这些除法的结果是整数，则**n**不是素数，否则它是素数。事实上，如果**n = a*b**是复合的（其中 a 和 b ≠</p>
> 
> *******   那么因素**a**或**b**之一必然**是 n 的平方根********

 ***** * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-01T12:11:02.447

使用 Soner 的例程，但略有不同：我们将运行直到`i`等于`Math.Ceiling(Math.Sqrt(number))`，这是天真的解决方案的技巧：

```
boolean isPrime(int number)
{
    if (number == 1) return false;
    if (number == 2) return true;

    var limit = Math.Ceiling(Math.Sqrt(number)); //hoisting the loop limit

    for (int i = 2; i <= limit; ++i)  
       if (number % i == 0)  
           return false;
    return true;

} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-17T02:40:25.040

这是一个很好的方法。

```
 static bool IsPrime(int n)
    {
        if (n > 1)
        {
            return Enumerable.Range(1, n).Where(x => n%x == 0)
                             .SequenceEqual(new[] {1, n});
        }

        return false;
    } 
```

编写程序的一种快速方法是：

```
 for (;;)
        {
            Console.Write("Accept number: ");
            int n = int.Parse(Console.ReadLine());
            if (IsPrime(n))
            {
                Console.WriteLine("{0} is a prime number",n);
            }
            else
            {
                Console.WriteLine("{0} is not a prime number",n);
            }
        } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-06-19T00:19:12.837

我实现了一种不同的方法来检查素数，因为：

*   这些解决方案中的大多数都会不必要地重复相同的倍数（例如，它们检查 5、10，然后检查 15，单个 % by 5 将测试的东西）。
*   % by 2 将处理所有偶数（所有以 0、2、4、6 或 8 结尾的整数）。
*   % by 5 将处理 5 的所有倍数（所有以 5 结尾的整数）。
*   剩下的就是测试以 1、3、7 或 9 结尾的整数的偶数除法。但美妙之处在于我们可以一次增加 10，而不是增加 2，我将演示一个解决方案：穿出。
*   其他算法没有线程化，因此它们没有像我希望的那样充分利用您的内核。
*   我还需要支持非常大的素数，所以我需要使用 BigInteger 数据类型而不是 int、long 等。

这是我的实现：

```
public static BigInteger IntegerSquareRoot(BigInteger value)
{
    if (value > 0)
    {
        int bitLength = value.ToByteArray().Length * 8;
        BigInteger root = BigInteger.One << (bitLength / 2);
        while (!IsSquareRoot(value, root))
        {
            root += value / root;
            root /= 2;
        }
        return root;
    }
    else return 0;
}

private static Boolean IsSquareRoot(BigInteger n, BigInteger root)
{
    BigInteger lowerBound = root * root;
    BigInteger upperBound = (root + 1) * (root + 1);
    return (n >= lowerBound && n < upperBound);
}

static bool IsPrime(BigInteger value)
{
    Console.WriteLine("Checking if {0} is a prime number.", value);
    if (value < 3)
    {
        if (value == 2)
        {
            Console.WriteLine("{0} is a prime number.", value);
            return true;
        }
        else
        {
            Console.WriteLine("{0} is not a prime number because it is below 2.", value);
            return false;
        }
    }
    else
    {
        if (value % 2 == 0)
        {
            Console.WriteLine("{0} is not a prime number because it is divisible by 2.", value);
            return false;
        }
        else if (value == 5)
        {
            Console.WriteLine("{0} is a prime number.", value);
            return true;
        }
        else if (value % 5 == 0)
        {
            Console.WriteLine("{0} is not a prime number because it is divisible by 5.", value);
            return false;
        }
        else
        {
            // The only way this number is a prime number at this point is if it is divisible by numbers ending with 1, 3, 7, and 9.
            AutoResetEvent success = new AutoResetEvent(false);
            AutoResetEvent failure = new AutoResetEvent(false);
            AutoResetEvent onesSucceeded = new AutoResetEvent(false);
            AutoResetEvent threesSucceeded = new AutoResetEvent(false);
            AutoResetEvent sevensSucceeded = new AutoResetEvent(false);
            AutoResetEvent ninesSucceeded = new AutoResetEvent(false);
            BigInteger squareRootedValue = IntegerSquareRoot(value);
            Thread ones = new Thread(() =>
            {
                for (BigInteger i = 11; i <= squareRootedValue; i += 10)
                {
                    if (value % i == 0)
                    {
                        Console.WriteLine("{0} is not a prime number because it is divisible by {1}.", value, i);
                        failure.Set();
                    }
                }
                onesSucceeded.Set();
            });
            ones.Start();
            Thread threes = new Thread(() =>
            {
                for (BigInteger i = 3; i <= squareRootedValue; i += 10)
                {
                    if (value % i == 0)
                    {
                        Console.WriteLine("{0} is not a prime number because it is divisible by {1}.", value, i);
                        failure.Set();
                    }
                }
                threesSucceeded.Set();
            });
            threes.Start();
            Thread sevens = new Thread(() =>
            {
                for (BigInteger i = 7; i <= squareRootedValue; i += 10)
                {
                    if (value % i == 0)
                    {
                        Console.WriteLine("{0} is not a prime number because it is divisible by {1}.", value, i);
                        failure.Set();
                    }
                }
                sevensSucceeded.Set();
            });
            sevens.Start();
            Thread nines = new Thread(() =>
            {
                for (BigInteger i = 9; i <= squareRootedValue; i += 10)
                {
                    if (value % i == 0)
                    {
                        Console.WriteLine("{0} is not a prime number because it is divisible by {1}.", value, i);
                        failure.Set();
                    }
                }
                ninesSucceeded.Set();
            });
            nines.Start();
            Thread successWaiter = new Thread(() =>
            {
                AutoResetEvent.WaitAll(new WaitHandle[] { onesSucceeded, threesSucceeded, sevensSucceeded, ninesSucceeded });
                success.Set();
            });
            successWaiter.Start();
            int result = AutoResetEvent.WaitAny(new WaitHandle[] { success, failure });
            try
            {
                successWaiter.Abort();
            }
            catch { }
            try
            {
                ones.Abort();
            }
            catch { }
            try
            {
                threes.Abort();
            }
            catch { }
            try
            {
                sevens.Abort();
            }
            catch { }
            try
            {
                nines.Abort();
            }
            catch { }
            if (result == 1)
            {
                return false;
            }
            else
            {
                Console.WriteLine("{0} is a prime number.", value);
                return true;
            }
        }
    }
} 
```

**更新**：如果您想更快地实现一个带有试验除法的解决方案，您可能会考虑拥有一个素数缓存。**一个数只有在不能被其他不超过其平方根值的素数整除时才是素数**。除此之外，如果您正在处理足够大的值（取自 Rosetta Code，以防网站出现故障） ，您可以考虑使用[Miller-Rabin 素性检验的概率版本来检查数字的素性：](http://rosettacode.org/wiki/Miller-Rabin_primality_test#C.23)

```
// Miller-Rabin primality test as an extension method on the BigInteger type.
// Based on the Ruby implementation on this page.
public static class BigIntegerExtensions
{
  public static bool IsProbablePrime(this BigInteger source, int certainty)
  {
    if(source == 2 || source == 3)
      return true;
    if(source < 2 || source % 2 == 0)
      return false;

    BigInteger d = source - 1;
    int s = 0;

    while(d % 2 == 0)
    {
      d /= 2;
      s += 1;
    }

    // There is no built-in method for generating random BigInteger values.
    // Instead, random BigIntegers are constructed from randomly generated
    // byte arrays of the same length as the source.
    RandomNumberGenerator rng = RandomNumberGenerator.Create();
    byte[] bytes = new byte[source.ToByteArray().LongLength];
    BigInteger a;

    for(int i = 0; i < certainty; i++)
    {
      do
      {
        // This may raise an exception in Mono 2.10.8 and earlier.
        // http://bugzilla.xamarin.com/show_bug.cgi?id=2761
        rng.GetBytes(bytes);
        a = new BigInteger(bytes);
      }
      while(a < 2 || a >= source - 2);

      BigInteger x = BigInteger.ModPow(a, d, source);
      if(x == 1 || x == source - 1)
        continue;

      for(int r = 1; r < s; r++)
      {
        x = BigInteger.ModPow(x, 2, source);
        if(x == 1)
          return false;
        if(x == source - 1)
          break;
      }

      if(x != source - 1)
        return false;
    }

    return true;
  }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-05-26T13:56:59.790

这基本上是 Eric Lippert 在上面某处提出的绝妙建议的实现。

```
 public static bool isPrime(int number)
    {
        if (number == 1) return false;
        if (number == 2 || number == 3 || number == 5) return true;
        if (number % 2 == 0 || number % 3 == 0 || number % 5 == 0) return false;

        var boundary = (int)Math.Floor(Math.Sqrt(number));

        // You can do less work by observing that at this point, all primes 
        // other than 2 and 3 leave a remainder of either 1 or 5 when divided by 6\. 
        // The other possible remainders have been taken care of.
        int i = 6; // start from 6, since others below have been handled.
        while (i <= boundary)
        {
            if (number % (i + 1) == 0 || number % (i + 5) == 0)
                return false;

            i += 6;
        }

        return true;
    } 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-04-01T12:09:46.967

这是一个[很好的例子](http://www.dotnetperls.com/prime)。我将代码放在这里以防万一该网站有一天出现故障。

```
using System;

class Program
{
    static void Main()
    {
    //
    // Write prime numbers between 0 and 100.
    //
    Console.WriteLine("--- Primes between 0 and 100 ---");
    for (int i = 0; i < 100; i++)
    {
        bool prime = PrimeTool.IsPrime(i);
        if (prime)
        {
        Console.Write("Prime: ");
        Console.WriteLine(i);
        }
    }
    //
    // Write prime numbers between 10000 and 10100
    //
    Console.WriteLine("--- Primes between 10000 and 10100 ---");
    for (int i = 10000; i < 10100; i++)
    {
        if (PrimeTool.IsPrime(i))
        {
        Console.Write("Prime: ");
        Console.WriteLine(i);
        }
    }
    }
} 
```

这是包含该`IsPrime`方法的类：

```
using System;

public static class PrimeTool
{
    public static bool IsPrime(int candidate)
    {
    // Test whether the parameter is a prime number.
    if ((candidate & 1) == 0)
    {
        if (candidate == 2)
        {
        return true;
        }
        else
        {
        return false;
        }
    }
    // Note:
    // ... This version was changed to test the square.
    // ... Original version tested against the square root.
    // ... Also we exclude 1 at the end.
    for (int i = 3; (i * i) <= candidate; i += 2)
    {
        if ((candidate % i) == 0)
        {
        return false;
        }
    }
    return candidate != 1;
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-05T11:19:21.170

```
/***
 * Check a number is prime or not
 * @param n the number
 * @return {@code true} if {@code n} is prime
 */
public static boolean isPrime(int n) {
    if (n == 2) {
        return true;
    }
    if (n < 2 || n % 2 == 0) {
        return false;
    }
    for (int i = 3; i <= Math.sqrt(n); i += 2) {
        if (n % i == 0) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-29T22:16:33.313

此版本计算素数平方根列表，仅检查是否低于平方根的素数列表，并在列表中使用二进制搜索来查找已知素数。我循环检查前 1,000,000 个素数，大约需要 7 秒。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            //test();
            testMax();
            Console.ReadLine();
        }

        static void testMax()
        {
            List<int> CheckPrimes = Enumerable.Range(2, 1000000).ToList();
            PrimeChecker pc = new PrimeChecker(1000000);
            foreach (int i in CheckPrimes)
            {
                if (pc.isPrime(i))
                {
                    Console.WriteLine(i);
                }
            }
        }
    }

    public class PrimeChecker{
        public List<int> KnownRootPrimesList;
        public int HighestKnownPrime = 3;

        public PrimeChecker(int Max=1000000){
            KnownRootPrimesList = new List<int>();
            KnownRootPrimesList.Add(2);
            KnownRootPrimesList.Add(3);
            isPrime(Max);
        }

        public bool isPrime(int value)
        {
            int srt = Convert.ToInt32(Math.Ceiling(Math.Sqrt(Convert.ToDouble(value))));
            if(srt > HighestKnownPrime)
            {
                for(int i = HighestKnownPrime + 1; i <= srt; i++)
                {
                    if (i > HighestKnownPrime)
                    {
                        if(isPrimeCalculation(i))
                        {
                                KnownRootPrimesList.Add(i);
                                HighestKnownPrime = i;
                        }
                    }
                }
            }
            bool isValuePrime = isPrimeCalculation(value);
            return(isValuePrime);
        }

        private bool isPrimeCalculation(int value)
        {
            if (value < HighestKnownPrime)
            {
                if (KnownRootPrimesList.BinarySearch(value) > -1)
                {
                    return (true);
                }
                else
                {
                    return (false);
                }
            }
            int srt = Convert.ToInt32(Math.Ceiling(Math.Sqrt(Convert.ToDouble(value))));
            bool isPrime = true;
            List<int> CheckList = KnownRootPrimesList.ToList();
            if (HighestKnownPrime + 1 < srt)
            {
                CheckList.AddRange(Enumerable.Range(HighestKnownPrime + 1, srt));
            }
            foreach(int i in CheckList)
            {
                isPrime = ((value % i) != 0);
                if(!isPrime)
                {
                    break;
                }
            }
            return (isPrime);
        }

        public bool isPrimeStandard(int value)
        {
            int srt = Convert.ToInt32(Math.Ceiling(Math.Sqrt(Convert.ToDouble(value))));
            bool isPrime = true;
            List<int> CheckList = Enumerable.Range(2, srt).ToList();
            foreach (int i in CheckList)
            {
                isPrime = ((value % i) != 0);
                if (!isPrime)
                {
                    break;
                }
            }
            return (isPrime);
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-09T12:03:51.807

基于@Micheal 的回答，但检查负数并逐步计算平方

```
 public static bool IsPrime( int candidate ) {
        if ( candidate % 2 <= 0 ) {
            return candidate == 2;
        }
        int power2 = 9;
        for ( int divisor = 3; power2 <= candidate; divisor += 2 ) {
            if ( candidate % divisor == 0 )
                return false;
            power2 += divisor * 4 + 4;
        }
        return true;
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-28T09:04:46.313

在一本书中找到这个例子，并认为这是一个非常优雅的解决方案。

```
 static void Main(string[] args)
    {
        Console.Write("Enter a number: ");
        int theNum = int.Parse(Console.ReadLine());

        if (theNum < 3)  // special case check, less than 3
        {
            if (theNum == 2)
            {
                // The only positive number that is a prime
                Console.WriteLine("{0} is a prime!", theNum);
            }
            else
            {
                // All others, including 1 and all negative numbers, 
                // are not primes
                Console.WriteLine("{0} is not a prime", theNum);
            }
        }
        else
        {
            if (theNum % 2 == 0)
            {
                // Is the number even?  If yes it cannot be a prime
                Console.WriteLine("{0} is not a prime", theNum);
            }
            else
            {
                // If number is odd, it could be a prime
                int div;

                // This loop starts and 3 and does a modulo operation on all
                // numbers.  As soon as there is no remainder, the loop stops.
                // This can be true under only two circumstances:  The value of
                // div becomes equal to theNum, or theNum is divided evenly by 
                // another value.
                for (div = 3; theNum % div != 0; div += 2)
                    ;  // do nothing

                if (div == theNum)
                {
                    // if theNum and div are equal it must be a prime
                    Console.WriteLine("{0} is a prime!", theNum);
                }
                else
                {
                    // some other number divided evenly into theNum, and it is not
                    // itself, so it is not a prime
                    Console.WriteLine("{0} is not a prime", theNum);
                }
            }
        }

        Console.ReadLine();
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-24T03:48:24.473

您还可以找到素数的范围，直到用户给定的数字。

代码：

```
class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Input a number to find Prime numbers\n");
            int inp = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("\n Prime Numbers are:\n------------------------------");
            int count = 0;

            for (int i = 1; i <= inp; i++)
            {
                for (int j = 2; j < i; j++) // j=2 because if we divide any number with 1 the remaider will always 0, so skip this step to minimize time duration.
                {
                    if (i % j != 0)
                    {
                        count += 1;
                    }
                }
                if (count == (i - 2))
                    {
                        Console.Write(i + "\t"); 
                    }

                count = 0;
            }

            Console.ReadKey();

        }
    } 
```

![质数](https://i.stack.imgur.com/4cvxo.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-03-21T11:06:53.223

我试图在使用 Any() 时从提前退出中获得一些效率......

```
 public static bool IsPrime(long n)
    {
        if (n == 1) return false;
        if (n == 3) return true;

        //Even numbers are not primes
        if (n % 2 == 0) return false;

        return !Enumerable.Range(2, Convert.ToInt32(Math.Ceiling(Math.Sqrt(n))))
            .Any(x => n % x == 0);
    } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-01-26T10:00:07.300

## 原始答案

*   素数是奇数，除了 2
*   素数不是负数
*   1 或 0 既不是质数也不是合数

**方法**

1.  添加一个计数器以检查输入数字可被 i 整除的次数（并且余数为 0（零））
2.  如果计数器 = 2，则输入是素数，否则不是素数
3.  如果 counter > 2 "break" 以避免不必要的过程（如果您想计算输入数字的因素，请在第一个 if 语句中删除“|| counter > 2”）
4.  如果您想查看有多少余数为 0（或存在因子）的数字，请在 for 循环内的第二个 if 语句中添加这行代码：

```
Console.WriteLine( $" {inputNumber} / {i} = { inputNumber / i} (remainder: {inputNumber % i})" ); 
```

5.  在数字 4 中添加代码行（在 for 循环的末尾）以查看所有数字除以您的输入数字（以防您想查看余数输出和商）

```
Console.Write( "Enter a Positive Number: " );
int inputNumber = Convert.ToInt32( Console.ReadLine() );
int counter = 0;

    for ( int i = 1; i <= inputNumber; i++ ) {
        if ( inputNumber == 0 || inputNumber == 1 || counter > 2 ) { break; }
        if ( inputNumber % i == 0 ) { counter++; }
    }

    if ( counter == 2 ) {
        Console.WriteLine( $"{inputNumber} is a prime number." );
    } else if ( inputNumber == 1 || inputNumber == 0 ) {
        Console.WriteLine( $"{inputNumber} is neither prime nor composite." );
    } else {
        Console.WriteLine( $"{inputNumber} is not a prime number. (It is a composite number)" );
    } 
```

我的参考：[https ://www.tutorialspoint.com/Chash-Program-to-check-if-a-number-is-prime-or-not](https://www.tutorialspoint.com/Chash-Program-to-check-if-a-number-is-prime-or-not)

* * *

## 简化版：

我`uint`在这里使用而不是`int`避免`negative`输入。

```
public bool IsPrime(uint number)
{
    if (number <= 1) { return false; }

    int counter = 0;
    for (int i = 1; i <= number; i++)
    {
        if (number % i == 0) { counter++; }
        if (counter > 2) { return false; }
    }

    return true;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-05-24T16:27:50.413

该函数中的算法包括测试 n 是否是 2 和 sqrt (n) 之间的任何整数的倍数。如果不是，则返回 True，这意味着数字 (n) 是质数，否则返回 False，这意味着 n 除以 2 和 sqrt(n) 的底整数部分之间的数字。

```
private static bool isPrime(int n)
        {
            int k = 2;
            while (k * k <= n)
            {
                if ((n % k) == 0)
                    return false;
                else k++;
            }
            return true;
        } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-11T06:47:33.323

HackerRank Challenge (Running Time and Complexity)：针对多个测试用例，质数。

输入格式：第一行包含一个整数 T ，即测试用例的数量。随后的 T 行中的每一行都包含一个整数 n，用于测试素数。

```
 int T = Convert.ToInt32(Console.ReadLine());
        int[] ar = new int[T];   

        for (int i = 0; i < ar.Length; ++i)
        {
            ar[i] = Convert.ToInt32(Console.ReadLine());
        }

        List<string> result = new List<string>();
        bool flag = true;
        for (int r = 0; r < ar.Length; ++r)
        {
            for (int i =2; i < (ar[r]>1000? ar[r]/4:ar[r]); ++i)
            {
                if (i != 1 && i != ar[r])
                {
                    if (ar[r] % i == 0)
                    {
                        flag = false;
                        break;
                    }
                }
            }

            if (flag && ar[r]!=1)
                result.Add("Prime");
            else
            {
                result.Add("Not prime");
                flag = true;
            }

        }

        foreach (var a in result)
        {
            Console.WriteLine(a);
        } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-16T15:58:15.563

它可能会有所帮助。

```
boolean isPrime(int n)
{
 if(n==2) return true;
 if(n==1 || n%2==0) return false;

 int d,root;

 for(d=3,root=(int)Math.sqrt(n);d<=root && n%d!=0;d+=2);

 if(d>root) return true;
 return false;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-04-07T12:01:28.657

这是找到素数的最简单方法是

```
for(i=2; i<num; i++)
        {
            if(num%i == 0)
            {
                count++;
                break;
            }
        }
        if(count == 0)
        {
            Console.WriteLine("This is a Prime Number");
        }
        else
        {
            Console.WriteLine("This is not a Prime Number");
        } 
```

有用的链接： [https ://codescracker.com/java/program/java-program-check-prime.htm](https://codescracker.com/java/program/java-program-check-prime.htm)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-12-02T13:27:24.097

> 质数是大于 1 且不能被除 1 和自身以外的任何其他数整除的数。
> 
> @这个程序会告诉你给定的数字是否是素数，并且会告诉你非素数它可以被（一个数字）整除，而不是1或它本身？@

```
 Console.Write("Please Enter a number: ");
        int number = int.Parse(Console.ReadLine());
        int count = 2; 
        // this is initial count number which is greater than 1

        bool prime = true;
        // used Boolean value to apply condition correctly

        int sqrtOfNumber = (int)Math.Sqrt(number); 
        // square root of input number this would help to simplify the looping.  

        while (prime && count <= sqrtOfNumber)
        {
            if ( number % count == 0)
            {
            Console.WriteLine($"{number} isn't prime and it divisible by 
                                      number {count}");  // this will generate a number isn't prime and it is divisible by a number which is rather than 1 or itself and this line will proves why it's not a prime number.
                prime = false;
            }

            count++;

        }
        if (prime && number > 1)

        {
            Console.WriteLine($"{number} is a prime number");
        }
        else if (prime == true)
        // if input is 1 or less than 1 then this code will generate
        {
            Console.WriteLine($"{number} isn't a prime");
        } 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-03-04T22:00:28.023

```
function isPrime(n) {

    //the most speedly function

    var res = '';
    var is_composite = false;
    var err = false;
    var sqrt = Math.sqrt(n);

    if (n <= 1){
        err = true;
    }

    if (n == 2 || n == 3){

        res = true; //"Prime"

    } else if(n % 2 == 0 || n % 3 == 0) {

        res = false; //'Composite'

    } else{

        /*here you just neet to check dividers like (6k+1) or (6k-1)
          other dividers we exclude in if(n % 2 == 0 || n % 3 == 0)*/

        for(let i = 5; i <= sqrt; i += 6){
            if (n % i == 0){
                is_composite = true;
                break;
            }
        }

        if (!is_composite){
            for(let i=7; i <= sqrt; i += 6){
                if (n % i == 0){
                    is_composite = true;
                    break;
                }
            }
        }

        if (is_composite){
            res = false; //'Composite'
        } else {
            res = true; //'Prime'
        }
    }

    if (err) {
        res = 'error';
    }

    return res;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-05-30T11:50:33.620

该函数中的算法包括测试 n 是否是 2 和 sqrt (n) 之间的任何整数的倍数。如果不是，则返回 True，这意味着数字 (n) 是质数，否则返回 False，这意味着 n 除以 2 和 sqrt(n) 的底整数部分之间的数字。

递归版本

```
 // Always call it as isPrime(n,2)
        private static bool isPrime(int n, int k)
        {
            if (k * k <= n)
            {
                if ((n % k) == 0)
                    return false;
                else return isPrime(n, k + 1);
            }
            else
                return true;
        } 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-11-24T13:53:31.497

我认为这是最简单的方法。

```
static bool IsPrime(int number)
{
   for (int i = 2; i <= number/2; i++)
       if (number % i == 0)
           return false;
    return true;
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-06-28T19:45:16.923

这是一个没有其他答案“混乱”的版本，并且可以解决问题。

```
static void Main(string[] args)
{

    Console.WriteLine("Enter your number: ");
    int num = Convert.ToInt32(Console.ReadLine());
    bool isPrime = true;
    for (int i = 2; i < num/2; i++)
    {
        if (num % i == 0)
        {
            isPrime = false;
            break;
        }
    }
    if (isPrime)
        Console.WriteLine("It is Prime");
    else
        Console.WriteLine("It is not Prime");
    Console.ReadLine();
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-10-30T19:18:14.323

**更新**

添加`else if (value % 2 == 0)`以消除偶数。感谢[avl_sweden](https://stackoverflow.com/users/395763/avl-sweden)

**方法**

扩展版本：

```
public static bool IsPrime(this int value)
{
    if (value < 2)
        return false;
    else if (value == 2)
        return true;
    else if (value % 2 == 0) /*updated*/
        return false;

    var root = Math.Sqrt(value);

    for (int i = 3; i <= root; i += 2)
    {
        if (value % i == 0)
            return false;
    }
    return true;
} 
```

**查看**

```
var primes = Enumerable.Range(1, 100).Where(x => x.IsPrime());
Console.WriteLine(string.Join(", ", primes));
/* Output
2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97
*/ 
```

**用法**

```
12.IsPrime()    //false
13.IsPrime()    //true
151.IsPrime()   //true
2.IsPrime()     //true 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-02-10T19:02:01.973

这是一个有解释的：

```
// Checks whether the provided number is a prime number.
  public static bool IsPrime(int num) {
    if (num <= 1)
      return false; // 1 or less is never prime.
    if (num==2)
      return true; // 2 is always a prime number.

    // Trial Division: Tries to divide number with all of the numbers in range 1-to-square-root(number).
    // If the number did not divide with the numbers in this range it will not divide with any other number therefore it's prime.
    int bound = (int)Math.Floor(Math.Sqrt(num));

    for (int i = 2; i<=bound; i ++) { 
      if (num % i == 0)
        return false;
    }

    return true;
  } 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2014-04-24T07:57:34.643

```
 bool flag = false;

            for (int n = 1;n < 101;n++)
            {
                if (n == 1 || n == 2)
                {
                    Console.WriteLine("prime");
                }

                else
                {
                    for (int i = 2; i < n; i++)
                    {
                        if (n % i == 0)
                        {
                            flag = true;
                            break;
                        }
                    }
                }

                if (flag)
                {
                    Console.WriteLine(n+" not prime");
                }
                else
                {
                    Console.WriteLine(n + " prime");
                }
                 flag = false;
            }

            Console.ReadLine(); 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2014-05-11T07:43:08.057

只有一行代码：

```
 private static bool primeNumberTest(int i)
    {
        return i > 3 ? ( (Enumerable.Range(2, (i / 2) + 1).Where(x => (i % x == 0))).Count() > 0 ? false : true ) : i == 2 || i == 3 ? true : false;
    } 
```

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2015-05-26T16:24:54.397

试试这个代码。

```
bool isPrimeNubmer(int n)
{
    if (n == 2 || n == 3) //2, 3 are prime numbers
        return true;
    else if (n % 2 == 0) //even numbers are not prime numbers
        return false;
    else
    {
        int j = 3;
        int k = (n + 1) / 2 ;

        while (j <= k)
        {
            if (n % j == 0)
                return false;
            j = j + 2;
        }
        return true;
    }
} 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2015-12-09T18:34:30.210

我认为这对于初学者来说是一种简单的方法：

```
using System;
using System.Numerics;
public class PrimeChecker
{
    public static void Main()
    {
    // Input
        Console.WriteLine("Enter number to check is it prime: ");
        BigInteger n = BigInteger.Parse(Console.ReadLine());
        bool prime = false;

    // Logic
        if ( n==0 || n==1)
        {
            Console.WriteLine(prime);
        }
        else if ( n==2 )
        {
            prime = true;
            Console.WriteLine(prime);
        }
        else if (n>2)
        {
            IsPrime(n, prime);
        }
    }

    // Method
    public static void IsPrime(BigInteger n, bool prime)
    {
        bool local = false;
        for (int i=2; i<=(BigInteger)Math.Sqrt((double)n); i++)
        {
            if (n % i == 0)
            {
                local = true;
                break;
            }
        }
        if (local)
            {
                Console.WriteLine(prime);
            }
        else
        {
            prime = true;
            Console.WriteLine(prime);
        }
    }
} 
```

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2020-04-30T08:46:45.120

> 使用传统方法找到素数的最短技术

```
 public string IsPrimeNumber(int Number)
    {
        int i = 2, j = Number / 2;
        for (; i <= j && Number % 2 != 0; i++);
        return (i - 1) == j ? "Prime Number" : "Not Prime Number";
    } 
```

* * *

## 回答 #30

> 赞同：-2
> 
> 时间：2017-09-05T14:17:42.947

你也可以试试这个：

```
bool isPrime(int number)
    {
        return (Enumerable.Range(1, number).Count(x => number % x == 0) == 2);
    } 
```****

# javascript - 切换具有相似 ID 的子元素的父 DIV 以计算其价格

> ID：15743194
> 
> 赞同：1
> 
> 时间：2013-04-01T12:07:43.523
> 
> 标签：javascript, jquery, html, toggle

我正在尝试，当默认情况下加载下面的页面以显示**a1** div 并计算该 div 的价格并总共显示，例如 216。

当用户点击更改链接/按钮时，它应该隐藏 a1 并显示 a2 div 并计算 a2 的价格，例如 201。

谁能指导我如何实现这一目标？一直在尝试，到目前为止没有运气。

这是我正在工作的代码的快照，代表了它的逻辑。我希望它能更清楚地说明我的情况。

```
<script type="text/javascript">
    function prc_calc() {
        $price = parseInt($('#price').attr('value'));
        $quantity = parseInt($('#quantity').attr('value'));
        $sum = $price * $quantity;
        $('#total').text($sum);
    }

    function change() {
        prc_calc();
    }

    $(document).ready(function() {
        prc_calc();
    }
</script>

<body>
    <div id="a1" style="display:block">
        <span id="price">54</span>
        <span id="quantity">4</span>
    </div>

    <div id="a2" style="display:none">
        <span id="price">67</span>
        <span id="quantity">3</span>
    </div>

    <span id="total"></span>

    <a href="javascript:void(0);" onclick="change();">Change</a>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:28:59.957

您需要重组一些东西，首先拥有两个具有相同 ID 的元素对您没有帮助。我使用名为 .selected 的类进行了重组：

[http://jsfiddle.net/5tDUM/](http://jsfiddle.net/5tDUM/)

CSS：

```
.selected {
    display:block !important;
} 
```

HTML：

```
<body>
    <div id="a1" style="display:none" class="selected">
        <span class="price">54</span>
        <span class="quantity">4</span>
    </div>

    <div id="a2" style="display:none">
        <span class="price">67</span>
        <span class="quantity">3</span>
    </div>

    <span id="total"></span>

    <a id="changeclick">Change</a>
</body> 
```

Javascript：

```
function prc_calc() {

        var price = $('.selected .price').text();

        var quantity = $('.selected .quantity').text();
        var sum = price * quantity;
        $('#total').text(sum);

    }

function changeprice() {

    }

    $(document).ready(function() {

        prc_calc();
    });

$('#changeclick').click(function() {
     $('#a1').toggleClass('selected');
     $('#a2').toggleClass('selected');
        prc_calc();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:11:35.193

`ID`的意思是独一无二的。你最好使用`class`.
或者，您可以获取所有`span`标签`flds=document.getElementsByTagName('span')`并像数组一样引用它们：`flds[0]`和`flds[1]`（因为每个 div 有 2 个跨度，按该顺序排列价格和数量）。

此外，div 通常是一个块（默认情况下），因此您可能不需要使用内联样式声明来指定它。

主播很“奇怪”……尝试一些更理智的东西：`<a href="#" onclick="change(); return false;">Change</a>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:20:23.707

尝试

```
function prc_calc(el) {
    $price = parseInt($('[id="price"]', el).text());
    $quantity = parseInt($('[id="quantity"]', el).text());
    $sum = $price * $quantity;
    $('#total').text($sum);
}

function change() {
    $('#a1').hide();
    prc_calc($('#a2').show());
}

$(document).ready(function() {
    prc_calc($('#a1'));
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/3ryKk/)

注意：ID 属性在文档中应该是唯一的，如果您有 id`price`和`quantity`重复，您可以将其更改为 class 属性。

```
<div id="a1" style="display:block">
    <span class="price">54</span>
    <span class="quantity">4</span>
</div>

<div id="a2" style="display:none">
    <span class="price">67</span>
    <span class="quantity">3</span>
</div>

<span id="total"></span>

<a href="javascript:void(0);" onclick="change();">Change</a> 
```

然后

```
function prc_calc(el) {
    $price = parseInt($('.price', el).text());
    $quantity = parseInt($('.quantity', el).text());
    $sum = $price * $quantity;
    $('#total').text($sum);
}

function change() {
    $('#a1').hide();
    prc_calc($('#a2').show());
}

$(document).ready(function() {
    prc_calc($('#a1'));
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/3ryKk/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:20:38.527

首先....您所有的ID都应该是唯一的...（尽管它可能有效）...将其更改为类，您可以使用 hide() 和 show() 隐藏和显示...`text()`以获取`span`标签之间的文字。

注意：使用点击事件总是比使用内联 javascript 更好。

**HTML**

```
<div id="a1" style="display:block">
    <span class="price">54</span>
    <span class="quantity">4</span>
</div>

<div id="a2" style="display:none">
    <span class="price">67</span>
    <span class="quantity">3</span>
</div>

<span id="total"></span>

<a href="javascript:void(0);" id="change">Change</a> 
```

**javascript/jquery**

```
function change(obj1, obj2) {
  $('#' + obj1).show();
  $('#' + obj2).hide();
  $price = parseInt($('#' + obj1).find('.price').text());
  $quantity = parseInt($('#' + obj1).find('.quantity').text());
  $sum = $price * $quantity;
  $('#total').text($sum);
}

$(document).ready(function () {
  change('a1', 'a2');
  $('#change').click(function () {
    change('a2', 'a1')
  });
}); 
```

[在这里摆弄](http://jsfiddle.net/A2MBp/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T12:21:02.523

您的代码存在一些问题：

*   `price`并且`quantity`应该是类，因为有不止一个。`id`必须是独一无二的。
*   `);`您在准备好的文档末尾丢失了。
*   您应该指定数字基数，`parseInt()`否则可能会发生奇怪的情况。我们想要以 10 为底，因为我们想要一个十进制数`parseInt(num, 10)`
*   您可以添加一个类`.hide`并切换它以在显示`div`s 之间切换。
*   `val()`在`<input>`标签上使用`.text()`，在`<span>`s 上使用来获取它们的文本。

一切都已修复并正常工作：

[jsFiddle](http://jsfiddle.net/Tyriar/QuWMp/)

**HTML**

```
<div id="a1"> 
    <span class="price">54</span>
    <span class="quantity">4</span>
</div>
<div id="a2" class="hide">
    <span class="price">67</span>
    <span class="quantity">3</span>
</div>
<span id="total"></span>
<a href="javascript:void(0);" onclick="change();">Change</a> 
```

**JS**

```
function prc_calc() {
    var id = $('#a1').hasClass('hide') ? '#a2' : '#a1';
    var $price = parseInt($(id + ' .price').text(), 10);
    var $quantity = parseInt($(id + ' .quantity').text(), 10);
    var $sum = $price * $quantity;
    $('#total').text($sum);
}

function change() {
    $('#a1,#a2').toggleClass('hide');
    prc_calc();
}

$(document).ready(function () {
    prc_calc();
}); 
```

# spring - ClassPathXmlApplicationContext 加载 bean

> ID：15743199
> 
> 赞同：0
> 
> 时间：2013-04-01T12:07:48.507
> 
> 标签：spring, spring-mvc

我正在尝试通过 ClassPathXmlApplicationContext 访问我的 bean。我的 xml 在 WEB-INF 目录下，这是我的代码：

```
 ApplicationContext context =
                new ClassPathXmlApplicationContext("WEB-INF\\spring\\scgid-send-mail.xml"); 
```

但是当我通过我的路径时，我收到了这个错误：

```
java.io.FileNotFoundException: class path resource [WEB-INF/spring/scgid-send-mail.xml] cannot be opened because it does not exist
    org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:157)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
    org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    com.mbww.scgid.user.UserController.sendMail(UserController.java:80)
    com.mbww.scgid.user.UserController.get(UserController.java:74)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:745)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:686)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:936)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:827)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:812)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T13:39:56.837

尝试这个：

```
ApplicationContext context =
            new ClassPathXmlApplicationContext("**/scgid-send-mail.xml"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:10:48.267

WEB-INF 不在类路径中，但 WEB-INF/classes 在。将应用程序上下文 XML 移动到那里并使用在 web.xml 中配置的上下文加载器侦听器加载它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:25:04.270

```
ClassPathXmlApplicationContext 
```

通过类名我们可以知道它是为类路径中的文件设计的。但是您的文件 scgid-send-mail.xml 位于 WEB-INF 目录中，因此不能加载它。

您应该使用 ApplicationContext 的另一个实现，

```
// here is the absolute path of your config file
String filePath = "D:\\workspace\\Test\\WEB-INF\\spring\\scgid-send-mail.xml";
ApplicationContext ctx = new FileSystemXmlApplicationContext(filePath); 
```

希望能帮到你:)

# mysql - 如何在 MySQL 中对 A1、A2、A3、B1、B2、B3、...、AA1、AA2、AA3 进行排序？

> ID：15743200
> 
> 赞同：2
> 
> 时间：2013-04-01T12:07:51.030
> 
> 标签：mysql, sql, select

我有一个如下所示的数据集：

```
+--------+
| Square |
+--------+
| A1     |
| A10    |
| A2     |
| A3     |
| A4     |
| A5     |
| A6     |
| A7     |
| A8     |
| A9     |
| B1     |
| B10    |
| B2     |
| B3     |
| B4     |
| B5     |
| B6     |
| B7     |
| B8     |
| B9     | 
```

...

```
| AA1    |
| AA10   |
| AA2    |
| AA3    |
| AA4    |
| AA5    |
| AA6    |
| AA7    |
| AA8    |
| AA9    |
+--------+ 
```

前缀从 A#-Z# 开始，然后是 AA#-ZZ# 并继续，最多有 2 个字母（即它永远不会超过 ZZ）。数字后缀可以是任意长度（即A1、A10、A100、A1000等）。

我怎样才能对这些进行排序并使结果集如下所示：

```
+--------+
| Square |
+--------+
| A1     |
| A2     |
| A3     |
| A4     |
| A5     |
| A6     |
| A7     |
| A8     |
| A9     |
| A10    |
| B1     |
| B2     |
| B3     |
| B4     |
| B5     |
| B6     |
| B7     |
| B8     |
| B9     |
| B10    | 
```

...

```
| AA1    |
| AA2    |
| AA3    |
| AA4    |
| AA5    |
| AA6    |
| AA7    |
| AA8    |
| AA9    |
| AA10   |
+--------+ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T12:33:00.657

您需要重组您的表，否则您可能会遇到这样的低效查询，

```
SELECT  Square
FROM    Table1
ORDER   BY         
        CASE WHEN Square REGEXP '^[A-Z]{2}'
            THEN 1 
            ELSE 0
        END ASC,
        CASE WHEN Square REGEXP '^[A-Z]{2}'
            THEN LEFT(Square, 2)
            ELSE LEFT(Square, 1)
        END ASC,
        CASE WHEN Square REGEXP '^[A-Z]{2}'
            THEN CAST(RIGHT(Square, LENGTH(Square) - 2) AS SIGNED)
            ELSE CAST(RIGHT(Square, LENGTH(Square) - 1) AS SIGNED)
        END ASC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c1c749/14)

或者通过使用`IF`

```
SELECT  Square
FROM    Table1
ORDER   BY Square REGEXP '^[A-Z]{2}' ASC,
           IF(Square REGEXP '^[A-Z]{2}', LEFT(Square, 2), LEFT(Square, 1)),
           CAST(IF(Square REGEXP '^[A-Z]{2}', RIGHT(Square, LENGTH(Square) - 2), RIGHT(Square, LENGTH(Square) - 1)) AS SIGNED) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c1c749/16)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:58:53.197

这里有更好的方式来构建你的表格

```
 letter  number  
   A      1
   A      2
   A      3
  .....so on 
```

那么您的查询将像那样简单

```
 select concat(letter,number) as Square from your_table
  order by letter , number 
```

[**在这里演示**](http://www.sqlfiddle.com/#!2/d656d/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:12:59.807

*如果我没记错的话，*也许这会起作用：**

 *```
SELECT Square
FROM table
ORDER BY CASE WHEN
     SUBSTR(Square, 2, 1) BETWEEN 'A' AND 'Z' 
     THEN CONCAT(LEFT(Square, 2),
         LPAD(RIGHT(Square, LENGTH(Square) - 2), 6, '000000'))
     ELSE CONCAT(LEFT(Square, 1),
         LPAD(RIGHT(Square(LENGTH(Square) - 1), 6, '000000'))
    END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:40:53.333

如果可以的话，我强烈建议您更改数据库结构。这些应存储在 2 个单独的字段中。这是一种您可以执行排序的方法，但也可以让您朝着正确的方向重组表格：

```
select square, left(square,2) prefix, mid(square,3) suffix
from yourtable
where left(square,2) not regexp '[0-9]'
union
select square, left(square,1) prefix, mid(square,2) suffix
from yourtable
where left(square,2) regexp '[0-9]'
order by prefix, cast(sufix as signed) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/f7ba4/1)

这样，您可以看到分解的前缀和后缀。这也可以通过没有联合的 case/if 语句来完成。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-14T21:07:19.053

我现在无法完全测试它，但它对我有用，而且它是与前一个完全不同的解决方案，我很想看看它是否适用于你的问题。我的非常相似，并且更改数据库结构不是一个选项，因为我正在排序的是用户输入......但我的解决方案适用于任何大小，并且比建议的要简单得多：

```
SELECT  Square
FROM    Table1
ORDER BY LENGTH(Square), Square 
```*

# jquery - jQuery 的插件实现问题

> ID：15743206
> 
> 赞同：2
> 
> 时间：2013-04-01T12:08:20.760
> 
> 标签：jquery, plugins

我在实现一个应该是“简单”的插件时遇到了问题。插件在这个地址： http: [//lab.smashup.it/flip/](http://lab.smashup.it/flip/)

我尝试用一​​个简单的短代码对其进行测试，并从显示插件的页面检查代码以确保我做对了，但显然没有任何反应，我没有收到任何错误反馈，所以我不知道往什么方向走。

这是我测试运行它的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Test#0935</title>

        <script src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
            // Load jQuery 
            google.load("jquery", "1"); 
        </script>
        <script src="JS/jquery-ui-1.7.2.custom.min.js"></script>
        <script src="JS/jquery.flip.min.js"></script>

        <script type="text/javascript">

            $("a").bind("click",function(){
                $("#flipo").flip({
                    direction: "tb"
                })
                return false;
            });

        </script>

        <style type="text/css">

            #flipo {
                width:100px;
                height:70px;
                background-color:lightblue;
                margin:20px;
            }

        </style>

    </head>

    <body>

        <div id="flipo"></div>
        <a href="#" id="left">left</a>

    </body>
</html> 
```

我为 jQuery 库“导入”了与插件作者所做的相同的源，并且我确保对插件的引用是正确的。

查看作者页面的源代码，您会看到他也在链接标签上“绑定”了一个点击功能，从他的插件中调用 .flip 方法，“tb”表示“向左翻转”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:13:33.020

`.bind()`用`$(function() {});`包装纸包起来。这模拟[`$(document).ready()`](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)了，这意味着“它里面的所有东西都会在加载 DOM 并且在加载页面内容之前加载。”

```
$(function() {
    $("a").bind("click",function(){
        $("#flipo").flip({
            direction: "tb"
        })
        return false;
    });
}); 
```

# vba - 卡在“案例”分配/措辞上

> ID：15743211
> 
> 赞同：0
> 
> 时间：2013-04-01T12:08:53.813
> 
> 标签：vba

非常感谢我在论坛上收到的有关此特定代码的帮助；我以为我从那里得到了它，但我必须再次请求您的帮助。我认为我能给出的最好的解释是下面的伪代码！完成此案例选择部分后，我将在几个月内重复相同的过程，因此只需更改引用的单元格。

```
Sub PopCol()

Range("D3:D19").Formula = "=RC[-1]-RC[-2]"  'D=C-B , Delta is equal to Cap minus Dem
    For i = 3 To 19
    Range("D" & i) = CLng(Range("C" & i) - Range("B" & i))
    If (Range("D" & i) < 0) Then
        Range("E" & i) = Range("E" & i) - Range("D" & i)
    Else
        Range("F" & i) = Range("F" & i) + Range("D" & i)
    End If
Next

Range("G3:G19").Formula = "=RC[-1]-RC[-2]"  'G=F-E , Delta is equal to Cap minus Dem

'if delta (h)= capacity (G) continue, if g<0 go back over prior months to where is negative and add   
 to    capacity
'then recalculate, else g>0 - go back over prior months and subtract(a neg) from demand (same as 
adding absolute value). then recalculate all.

For i = 3 To 19
    Range("G" & i) = CLng(Range("F" & i) - Range("E" & i))
Select Case (Range("G" & i)) 'May
   'Case "G" = Range ("F" & i)  Continue
Case Is = Range("F" & i)
          GoTo Line 35

'Case "G" < "0" check D if >0,("D"&i)=("D"&i)-("G" & i) 
     '{then compare D with C, balance over equal is placed in G and D & C end up equal. goto beginning of sub}
Case Is < "0"
        ("D"&i)=("D"&i)-("G" & i)else Goto Line 5

Case Else
     'case "G" > "0" check D if <0,("C"&i)=("C"&i)-("G" & i) "(then compare D with C, balance over 
equal is placed in G and D & C end up equal.goto beginning of sub}
    If Range("G" & i) > "0" Then
End Select

'next is June
For i = 3 To 19
    Range("J" & i) = CLng(Range("I" & i) - Range("H" & i))
Select Case "June"
    'Case "H" = Range ("F" & i)  Continue
    'Case "H" < "0" check G if >0,("G"&i)=("G"&i)-("J" & i) {then compare G with F, balance over 
equal    is placed in J and G & F end up equal. goto beginning of sub}
    'case "H" > "0" check G if <0,("F"&i)=("F"&i)-("J" & i) (then compare G with F, balance over equal 
is placed in J and G & F end up equal. goto beginning of sub}
End Select

Next

'COntinue on with July, August, Sept, Oct, Nov, Dec, Jan 14, Feb 14 but in FEb 14 place balance over 
equal in

End Sub 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:05:35.177

你的问题很难理解。我已经发布了您的代码应该类似于的示例，希望您可以填写空白。

```
For i = 3 To 19
    Range("G" & i).Value = CLng(Range("F" & i).Value) - CLng(Range("E" & i).Value)
    Select Case CLng((Range("G" & i)).Value)
        Case CLng(Range("F" & i).Value)
              GoTo Line 35
        Case < "0"
            '("D"&i)=("D"&i)-("G" & i)else Goto Line 5  <--- very wrong, use the 2nd to see reformat this line.
        Case Else
            GoTo Line 35
    End Select
Next i 
```

# cakephp - Cake 中的 URL 重写

> ID：15743213
> 
> 赞同：0
> 
> 时间：2013-04-01T12:09:00.213
> 
> 标签：cakephp, mod-rewrite, url-rewriting

我需要在我的蛋糕应用程序中重写 URL，以便在 URL 中只显示 slug（例如标题）。例如，如果我有一个蛋糕 URL，如 www.site.com/users/view/1（控制器/操作/ID），如果用户的昵称是 vikram.sinha（没有 ID，我只需要显示 /vikram.sinha）没有操作，没有控制器或 URL 中的任何其他内容）。

我确保在存储之前标题（slug）是唯一的，我能做的最好的就是以下。

www.site.com/profile/vikram.sinha 通过添加以下路线。

```
Router::connect('/profile/:slug', array('controller' => 'users', 'action' => 'view'),
        array(
            'pass' => array('slug'),
        )); 
```

我面临的问题是我还需要从 URL 中删除配置文件。无法找到一种方法来重写蛋糕中的 URL，而不在 slug 之前添加一些东西。

或者可能是 URL 可以直接使用 htaccess 重写，但我也不擅长。如果有人建议使用 htaccess，那么请假设需要更改的 URL 是 www.site.com/users/view/vikram.sinha

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:06:35.040

IMO 最好的选择是做类似 reddit 的事情，其中​​每个 slug 都以 /r/ 为前缀。

例子：

```
mysite.com/u/johnsmith 
```

然后，在您的路线中，您可以执行以下操作：

```
Router::connect('/u/:slug/*', array('controller'=>'users', 'action'=>'view'), 
    array('pass'=>array('slug'))); 
```

如果你真的不想这样做，你可以使用类似的东西：

```
Router::connect('/:slug/*', array('controller'=>'users', 'action'=>'view'), 
    array('pass'=>array('slug'))); 
```

但请记住，任何其他控制器、插件......等等等等都需要它们自己的路由，因为它会认为在 mysite.com/ 之后传递的任何东西都是 unname。IMO 不是最好的主意。

# c# - 执行 while 块，直到出现三个条件之一

> ID：15743217
> 
> 赞同：1
> 
> 时间：2013-04-01T12:09:14.683
> 
> 标签：c#, while-loop

我想做一些动作，直到满足以下条件之一^

*   `html.IndexOf("/>")==0`
*   `html.IndexOf("</"+tagName+">")==0`
*   `html[0]=='<'`

这里的 html 实际上是字符串。我试过什么 - 只需将 OR 操作应用于反转条件。但这是错误的。如何正确地做到这一点。这是我的代码：

```
while((html.IndexOf("/>")!=0)&&(html.IndexOf("</"+tagName+">")!=0)||(html[0]!='<'))
{
    html = html.Remove(0, 1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:11:08.403

出于某种原因，您正在混合 AND 和 OR。你有

```
while(a && b || c) 
```

但你想写

```
while(a && b && c) 
```

代码应为：

```
while (   (html.IndexOf("/>")!=0)
        &&(html.IndexOf("</"+tagName+">")!=0)
        &&(html[0]!='<')) 
```

我也会回应@cdhowie 的评论。使用 HTML 解析器将使您的代码更易于阅读和编写，并使其对各种输入更加健壮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:13:37.177

您的代码很难阅读。您可能需要考虑拆分各个条件以使其更易于维护：

```
while(true)
{
   if(html.IndexOf("/>")==0) break;             // stop the while loop if we reach the end of a tag
   if(html.IndexOf("</"+tagName+">")==0) break; // or we find the close tag
   if(html[0]=='<')) break;                     // or if we find the start of another tag

   // otherwise, do this:
   html = html.Remove(0, 1);
} 
```

# c# - 在 WCF 服务中调用 Sitecore Database.Templates[] 时出现 NullReferenceException

> ID：15743222
> 
> 赞同：8
> 
> 时间：2013-04-01T12:09:25.897
> 
> 标签：c#, wcf, sitecore

我是 Sitecore 开发的新手，所以如果这个问题是基本的，我很抱歉。我已经创建了一个代理（计划任务）和一个 WCF 服务，并将它们都添加到我的 SiteCore 项目中。代理调用 WCF 服务代码调用的相同代码。

我遇到的问题是，当我`Database.Template[ID template]`为要处理的项目调用传入相应模板的 ID 容器时，它可以在代理任务内部工作，但不能在 WCF 服务内部工作。

`Database.Template[ID id]`对 WCF 服务内部的任何调用都会给我一个`NullReferenceException`，但是代理内部完全相同的调用会正确收集模板。

这是由于某些结构原因导致调用应用程序是网页而不是 Web 服务吗？

编辑#1：我将 svc 作为允许的扩展名，并且我都尝试过

```
Sitecore.Configuration.Factory.GetDatabase("master") 
```

和

```
var siteContext = Sitecore.Configuration.Factory.GetSite("websiteMaster");
siteContext.Database.Template[]; 
```

两者都返回`NullReferenceException`。

我也可以使用 成功获得一个项目，`GetItem`但是当我尝试访问该项目的模板属性时，我得到一个`NullReferenceException`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T12:28:07.077

您的 WCF 服务没有 Sitecore 上下文，因此`Sitecore.Context.Database`为空。

您可以添加`svc`到允许的扩展列表或通过以下方式获取数据`Sitecore.Configuration.Factory.GetDatabase("master")`

*   [将 WCF 服务附加到 Sitecore 上下文](http://sitecoreblog.alexshyba.com/2009/03/attach-wcf-services-to-sitecore-context.html)
*   [使用 WCF 访问 Sitecore 数据](http://adeneys.wordpress.com/2011/02/08/access-sitecore-data-with-wcf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T20:55:34.333

这个问题有几个部分

*   使用 Sitecore 数据库以编程方式访问项目
*   Sitecore 安全
*   WCF 和 Sitecore HTTPContext

使用 Sitecore 数据库以编程方式访问项目

*   创建用于读取/编辑 Sitecore 项目的 WCF 服务需要访问 Sitecore 数据库，请参阅以[编程方式登录到 Sitecore](https://stackoverflow.com/questions/3234832/how-can-i-login-programatically-into-sitecore)
*   （如前所述），`Sitecore.Configuration.Factory.GetDatabase(Database)`显式使用将为您提供数据库，但这会带来第 2 个问题。
*   为了利用内置的 Sitecore 功能，使用`Sitecore.Context.ContentDatabase`或`Sitecore.Context.Database`方法根据发出请求的上下文返回正确的数据库更加灵活；CD、CM服务器等

安全

*   虽然安全禁用程序可以消除访问 Sitecore 数据库的所有安全问题，但不建议这样做。 [Alex Soft 和 Sitecore 安全](http://sitecore.alexiasoft.nl/2005/12/24/sitecore-security-i-do-it-my-way/)

    ```
    using (new SC.Security.Accounts.UserSwitcher(User.FromName(ServiceAccountName, true)))
    {
        // code here
    } 
    ```

[更恰当地与Sitecore 的安全 API](http://sdn.sitecore.net/upload/sitecore6/sc61keywords/security_api_cookbook_usletter.pdf)保持一致，提供交易的安全跟踪，​​并支持对服务完成的更改项目进行版本控制。这些信息将有助于错误跟踪和审计。

WCF 和 Sitecore HTTPContext：

*   在使用 WCF 和使用 Sitecore HTTPContext 的对象时，您可能会遇到问题。
*   如果您想在 WCF 服务中使用`Sitecore.Context.ContentDatabase`或使用`Sitecore.Context.Database`，您可能会从数据库中获得空异常，尤其是在 CD 实例上运行该服务时。
*   克服此限制的唯一方法是`Sitecore.Context.SetActiveSite(SiteName)`在服务中的某个点（通常是构造函数）使用 设置活动站点。
*   SiteName 是 web.config 的 Sitecore/Sites 部分中可用的站点列表的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:16:15.367

这不是一个理想的解决方案，但我几乎将这条线从 WCF 服务转换为基于 ASMX 的服务，并且一切正常。我遇到的唯一问题是在调用服务时遇到访问权限问题。

我将 ASMX 服务函数内容包装在这种类型的块中：

```
using (new Sitecore.SecurityModel.SecurityDisabler()) { } 
```

一切都神奇地开始工作。我开始怀疑这是否不是我遇到的 Sitecore 框架的错误。如果有人知道如何提交正式报告，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T14:08:36.220

还值得检查 Website\App_Config\Include\SwitchMasterToWeb.config 并在需要时重命名/删除，因为它会使主数据库在其他情况下显示为 web。由于它是一个补丁配置，在故障排除时很容易错过它。

# php - 删除codeigniter中的数据

> ID：15743223
> 
> 赞同：0
> 
> 时间：2013-04-01T12:09:29.387
> 
> 标签：php, codeigniter

我无法删除codeiginter中的数据我是新手，所以请帮助我......

我的查看页面代码是

```
<?php
   foreach($item as $field)
   {
   ?>
   <tr>
       <td><?php echo $field->facility_id; ?></td>
       <td><?php echo $field->facility_name; ?></td>
       <td><?php echo $field->facility_desc; ?></td>
       <td>Edit</a></td>
       <td><?php echo anchor('http://localhost/Alaris_Health/index.php/admin_controller/delete_facility','Delete',$field->facility_id);?></td>
   </tr>
   <?php
}
?> 
```

我的控制器代码是

```
function delete_facility($fac_id)
{
    $this->load->model('Admin_model');
    $this->Admin_model->remove_facility($fac_id);
    $this->load->view('facility_view',$data);
} 
```

模型代码是

```
function remove_facility($fac_id)
{
     $this->db->delete('admin_facility_code', array('facility_id' => $fac_id)); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:21:48.623

Instead of this :

```
<?php echo anchor('http://localhost/Alaris_Health/index.php/admin_controller/delete_facility','Delete',$field->facility_id);?>

function delete_facility($fac_id)
{
    $this->load->model('Admin_model');
    $this->Admin_model->remove_facility($fac_id);
    $this->load->view('facility_view',$data);
} 
```

Try this :

```
<?php echo anchor('http://localhost/Alaris_Health/index.php/admin_controller/delete_facility/'.$field->facility_id.'','Delete','');?>

function delete_facility()
{
    $this->load->model('Admin_model');
    $fac_id = $this->uri->segment(5);
    $this->Admin_model->remove_facility($fac_id);
    $this->load->view('facility_view');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:33:58.017

尝试使用[`site_url()`](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html).....你需要在 url 中传递 id

> 建议您在需要生成本地 URL 的任何时候使用此功能，以便在您的 URL 更改时您的页面变得更加便携。

**更新**

```
....
<td><?php echo anchor(site_url('admin_controller/delete_facility/'.$field->facility_id),'Delete','id="'.$field->facility_id).'"'?></td> 
```

# border - 分页符打破页面上的侧边框

> ID：15743229
> 
> 赞同：2
> 
> 时间：2013-04-01T12:09:46.587
> 
> 标签：border, wkhtmltopdf, page-break

我有一个带有左右边框的长页面。内容是具有不同部分的表格，在这些表格中，我避免了分页。问题是，当页面中断时，侧边框也会中断。意味着，如果有任何分页符，则页面末尾没有边框。

谢谢，-索万

# sql - SQL 通过连接更新表？

> ID：15743236
> 
> 赞同：4
> 
> 时间：2013-04-01T12:10:03.413
> 
> 标签：sql, views

我有以下数据库并希望更新`room`表。表格`room`列出了单人房、双人房或特大床房型，价格为每间客房每晚的价格，酒店中的名称为酒店名称。

我需要做的是把所有双人房改成在斯科蒂酒店的特大号床房，而且价格也提高了 10%。

我知道如何在单个表中更新价格和类型，但似乎在这里我需要加入 HNO 上的酒店和房间，从而进行更新。嵌套查询可能吗？

```
create table Hotel  (
   HNo char(4),
   Name varchar(20)   not null,
   Address varchar(50),
   Constraint PK_Hotel Primary Key (HNo)
);

create table Room  (
   RNo char(4),
   HNo char(4),
   Type char(6) not null,
   Price decimal (7,2),
   Constraint PK_Room Primary Key (HNo, RNo),
   Constraint FK_Room Foreign Key (HNo)
   references Hotel (HNo)
);

create table Guest  (
   GNo char(4),
   Name varchar(20) not null,
   Address varchar(50),
   Constraint PK_Guest Primary Key (GNo)

);

create table Booking   (
   HNo char(4),
   GNo char(4),
   DateFrom date,
   DateTo date,
   RNo char(4),
   Constraint PK_Booking Primary Key (HNo, GNo, DateFrom),
   Constraint FK_Booking Foreign Key (GNo)
   references Guest (GNo),
   Constraint FK_Booking_room Foreign Key (HNo, RNo)
   references Room (HNo, RNo),
   Constraint FK_Booking_hotel Foreign Key (HNo)
   references Hotel (HNo)
); 
```

我有两个主要问题：

1.  是否可以对需要连接的表进行更新？

2.  我想通过视图列出来宾。我可以创建一个包含酒店名称和曾入住酒店的不同客人数量的视图吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T12:48:41.023

首先，最好进行选择以确保您的搜索/过滤条件正确：

```
SELECT
  h.Name,
  r.RNo,
  r.Type,
  r.Price

FROM
  room r

  INNER JOIN hotel h
  on h.hno = r.hno

WHERE
  h.name = 'Scotty Hotel'
  and
  r.type = 'Double' ; 
```

如果这针对正确的行，则*使用相同的过滤条件*进行更新查询，如下所示。

提示，复制整个`SELECT`查询然后对其进行编辑以形成新`UPDATE`查询是值得的。例如，对于 mySql，替换`FROM`为`UPDATE`（并保留原始`FROM`子句的内容以形成新`UPDATE`子句），保留`WHERE`原位，并使用`SELECT`原始查询中列表的内容作为形成新`SET`子句的基础（立即在您的`WHERE`条款之前）。

此代码适用于**mySql**：

```
UPDATE room r 

  INNER JOIN hotel h
  on h.hno = r.hno

SET
  r.type = 'King',
  r.price = r.price * 1.1

WHERE
  h.name = 'Scotty Hotel'
  and
  r.type = 'Double' ; 
```

此代码适用于**MS SQL Server**：

```
UPDATE r

SET
  r.type = 'King',
  r.price = r.price * 1.1

FROM
  room r

  INNER JOIN hotel h
  on h.hno = r.hno

WHERE
  h.name = 'Scotty Hotel'
  and
  r.type = 'Double' ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:15:49.920

为什么这不起作用？

```
UPDATE ROOM A SET TYPE='King', A.PRICE=A.PRICE*1.1 
WHERE A.TYPE ='DOUBLE' AND 
A.HNO IN (SELECT HNO FROM HOTEL WHERE NAME='Scotty') 
```

希望这行得通。当然，这假设酒店名称 Scotty 是唯一的

# shell - cron 运行的 shell 脚本中的 echo 语句

> ID：15743240
> 
> 赞同：2
> 
> 时间：2013-04-01T12:10:12.813
> 
> 标签：shell, unix

我在 shell 脚本中使用 echo 语句。shell 脚本将由 cronjob 运行。这些 echo 语句的输出会自动记录在某处吗？如果是，在哪里？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:14:01.280

通常 crond 会将输出通过电子邮件发送给用户。你最好这样做（示例 crontab 条目）

```
* * * * * /path/to/my/script.sh 2&>1 > /tmp/mylogfile.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:14:44.210

您可以检查系统日志或将脚本的输出重定向到文件。

# android - Playstore 详细评论

> ID：15743243
> 
> 赞同：0
> 
> 时间：2013-04-01T12:10:28.747
> 
> 标签：android, google-play

给定应用程序名称，是否有一个 API 可以帮助我从 Playstore 收集所有评论信息？要求是复制一个或多或少类似于 Playstore“详细评论”屏幕的屏幕（附在此处以供快速参考）。

任何帮助表示赞赏。

![在此处输入图像描述](https://i.stack.imgur.com/Sg5u7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:21:23.417

我很困惑。您想创建一个具有您附加的屏幕布局的屏幕，还是希望能够阅读实际评论并对其进行处理？如果是后者，那么遗憾的是没有 Play Store API。我认为这可能与隐私问题有关。如果您想要一个具有相同布局的屏幕，那么我认为您不需要收集评论信息。

我四处搜索，发现了这个：[https ://code.google.com/p/android-market-api/](https://code.google.com/p/android-market-api/)

此处提供有关 Play Store API 的更多信息：[有没有办法查看用户已向 Android Marketplace 提交评论？](https://stackoverflow.com/questions/9690016/is-there-a-way-to-see-that-a-user-has-submitted-a-review-to-the-android-marketpl?rq=1)

# javascript - 如何使用 firebug 调试 ExtJS 4 代码（在 Firefox 中）

> ID：15743246
> 
> 赞同：2
> 
> 时间：2013-04-01T12:10:47.103
> 
> 标签：javascript, debugging, firefox, extjs4, firebug

我一直在尝试用firebug（在Firefox浏览器中）调试javascript（即ExtJS 4.0.7）代码，但是当我设置断点并刷新页面时，断点消失并且没有调试发生。

我错过了什么？

**编辑 ：**

我正在使用 Firefox 19.0.2、Windows 7、Firebug 1.11.2。

断点在控制器 .js 文件中不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:15:47.797

您可能已启用 ExtJs 功能以防止缓存 js 文件。在 ExtJs 文档中查找 disableCache 配置选项。如果设置为 true，ExtJs 将时间戳作为参数添加到每个加载的文件（您可以在 Firebug Net 面板中看到 ?_dc=123456789。文件始终是新的，并且在重新加载后，firebug 无法设置断点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:34:19.863

您还可以在代码中使用**调试器**语句来停止该位置的执行。

[http://msdn.microsoft.com/en-us/library/ie/0bwt76sk(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/0bwt76sk(v=vs.94).aspx)

# xml - scala中的简单Xpath查询

> ID：15743252
> 
> 赞同：6
> 
> 时间：2013-04-01T12:11:13.720
> 
> 标签：xml, scala, xpath

我正在尝试使用 scala 运行 XPath 查询，但它似乎不起作用。我的 Xml 看起来像（简化）：

```
<application>
  <process type="output" size ="23"> 
     <channel offset="0"/>
      ....
     <channel offset="4"/>
  </process>
  <process type="input" size ="16"> 
     <channel offset="20"/>
      ....
     <channel offset="24"/>
  </process>
</application> 
```

我想`process`用`input`属性检索 ，为此我使用这个 XPath 查询：

```
//process[@type='input'] 
```

这应该可行，我用[xpathtester](http://www.xpathtester.com/test)验证了它 现在，我的 scala 代码如下所示：

```
import scala.xml._
val x = XML.loadFile("file.xml")

val process = (x \\ "process[@type='input']")  // will return empty NodeSeq() !!! 
```

最终`process`是空的，它没有捕捉到我想要的东西。我是这样解决的：

```
val process = (x \\ "process" filter( _ \"@type" contains Text("input"))) 
```

这更丑陋。为什么我的原始查询不起作用的任何已知原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T17:36:07.050

不应使用“XPath”来描述 Scala 标准库支持的内容。XPath 是一种成熟的表达式语言，目前有两个最终版本，第三个正在开发中：

*   1999 年的[XPath 1.0](http://www.w3.org/TR/xpath/)
*   [2007 年的XPath 2.0](http://www.w3.org/TR/xpath20/)（2010 年第 2 版）
*   [2013 年的XPath 3.0](http://www.w3.org/TR/xpath-30/)（候选推荐）

充其量你可以说 Scala 有一小部分受 XPath 启发的操作。因此，您不能指望在不做更多工作的情况下直接将 XPath 表达式粘贴到 Scala。

第三方库可以更好地支持实际的 XPath 表达式，包括：

*   [秤 Xml](https://github.com/chris-twiner/scalesXml)
    *   斯卡拉库
    *   “提供比普通 Scala XML 更像 XPath 的体验，路径看起来像 XPath，并且也像它们一样工作（具有许多相同的功能和轴）”
    *   如果我理解得很好，它仍然不是真正的 XPath
    *   旨在与 Scala 很好地集成
*   [撒克逊人](http://saxon.sourceforge.net/)
    *   Java 库
    *   开源
    *   对 XPath 2（和 XSLT 2）的完整且一致的支持
    *   有一个适用于 DOM 和其他数据模型的 XPath API，但目前没有特定的 Scala 支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-26T14:29:15.307

一种方法是使用[kantan.xpath](http://nrinaudo.github.io/kantan.xpath/)：

```
import kantan.xpath._
import kantan.xpath.implicits._

val input = """
     | <application>
     |   <process type="output" size ="23">
     |      <channel offset="0"/>
     |      <channel offset="4"/>
     |   </process>
     |   <process type="input" size ="16">
     |      <channel offset="20"/>
     |      <channel offset="24"/>
     |   </process>
     | </application>
     | """.stripMargin

val inputs = input.evalXPath[List[Node]](xp"//process[@type='input']") 
```

这会产生 a `List[Node]`，但您可以检索具有更有趣类型的值 - 通道偏移列表，例如：

```
input.evalXPath[List[Int]](xp"//process[@type='input']/channel/@offset")
// This yields Success(List(20, 24)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:27:43.433

我相信 scala xml 实现无法处理如此复杂的 XPath 查询。然而，创建一个小型丰富的包装器来减少混乱并不难，例如看看[这个线程](https://stackoverflow.com/questions/7574862/scala-xml-get-nodes-where-parent-has-attribute-value-match)。使用建议的包装器，您可以像这样解决您的问题：

```
x \\ "process" \@ ("type", _ == "input") 
```

# javascript - 我需要从工作灯适配器发送一个发布请求

> ID：15743254
> 
> 赞同：0
> 
> 时间：2013-04-01T12:11:15.870
> 
> 标签：javascript, adapter, ibm-mobilefirst

我正在使用 IBM Worklight 我需要从我正在调用的 Worklight 适配器向服务器发送一个发布请求通过 REST 客户端 XML 输出发送的 post 请求即将完美

我在适配器中的代码是

```
 function showAttributes()
    {
        var truevar ="True";
        var pubvar ="public";
        var gridvar = "GridView";
        var gvar ="Grid View 1 ";

        var request = '<rdf:RDF xmlns:dcterms="http://purl.org/dc/terms/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:rs="http://www.w3.org/2001/sw/DataAccess/tests/result-set#" xmlns:rrmNav="http://com.ibm.rdm/navigation#" xmlns:rrmViewdata="http://com.rdm/viewdata#" xmlns:rt="https://crizz.net/qw/views" xmlns:rm="http://www.crizz.com/xmlns/rdm/rdf/" xmlns:xsd="http://www.w3.org/2001/XMLSchema#" xmlns:rql="http://www.crizz.com/xmlns/rdm/rql/" xmlns:owl="http://www.w3.org/2002/07/owl#">' +
        '<rtm:View rdf:about="">' + 
        '<rtm:rowquery rdf:parseType="Resource"> ' +

                       ' <rdf:Seq>' +
                            '<rdf:li rdf:resource="https://jazz.net/rtm/folders/_maPswFcdEeCVbIiWC7_0yA"/>'+
                        '</rdf:Seq>' +
                   ' </rql:e2>' +
                    '<rql:op>' + invar + '</rql:op>' +
                '</rdf:_1>' +
            '</rql:where>' +
        '</rtm:rowquery>' +
        '<rtm:displayBaseProperties rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">' + truevar + '</rtm:displayBaseProperties>' +
        '<rrmNav:scope>' + pubvar + '</rrmNav:scope>'+
        '<rtm:ofType>' + gridvar + '</rtm:ofType>' +
        '<dcterms:description> </dcterms:description>' +
        '<dcterms:title>' + gvar +'</dcterms:title>' +
    '</rtm:View>' +
    '</rdf:RDF>';
        var input = {
            method : 'post',
            returnedContentType : 'application/xml',
            path : lpath,
            headers : {
                'RP-Request-Type' : 'private',

                       },

                       body : {
                            contentType: 'text/plain; charset=utf-8',
                            content: request.toString()
                        },
                        parameters : {
                            'oslc.query' : 'execute=true&fullObject=false&size=20&count=true&page=1&reuse=false&'
                        }

        };

        return WL.Server.invokeHttp(input);

} 
```

发送POST请求是否有任何错误..请帮助

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:08:48.453

是的，将工作灯 5.0.5 升级到 5.0.6 解决了我的问题，这非常感谢 Idan Adar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:05:30.987

我建议从一个非常简单的 POST 程序开始。[遵循 HTTP 适配器模块](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/04_02_HTTP_adapter_-_Communicating_with_HTTP_back-end_systems.pdf)。

# android - Android 模拟器软键盘无法正确显示

> ID：15743257
> 
> 赞同：0
> 
> 时间：2013-04-01T12:11:22.640
> 
> 标签：android, android-emulator, emulation, android-softkeyboard

在我的 Android 模拟器上，由于某种原因，它的软键盘在底部切开。只是想知道是否有人知道解决方法是什么？

以下是描述该问题的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/M7VSX.png)

# .net - 如果我在 VS 2010 中使用 C++/CLI，我需要哪个 VC++ 运行时？

> ID：15743258
> 
> 赞同：1
> 
> 时间：2013-04-01T12:11:32.627
> 
> 标签：.net, visual-c++, deployment, installation, runtime

如果我在 VS 2010 中使用 C++/CLI，我需要使用我的应用安装程序打包哪个 VC++ 运行时？假设目标 PC 正在运行 Windows XP/Vista/7 并且没有安装其他 VC++ Runtime。

1.  视觉 C++ 2005 -- 3 MB
2.  Visual C++ 2005 SP1 -- 3 MB
3.  视觉 C++ 2008 -- 2 MB
4.  Visual C++ 2008 SP1 -- 4 MB

我的[目标是 .NET 2.0](https://stackoverflow.com/a/2921868/1294758)，尽管我正在使用`ToolsVersion`设置为.NET 构建应用程序`"4.0"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:13:45.670

你的工作将通过使用这个来完成。

视觉 C++ 2008 -- 2 MB

我正在使用相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:23:32.870

好吧，我看到的是 C++/CLI，这意味着您可能还需要重新分发 .Net 框架。很可能是框架 2.0，但不确定。你也应该检查一下。

或者，如果您不使用 CLI，则应将其从项目首选项中删除，并且按照 AB Bolim 的建议，您可以重新分发 C++ 2008

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:29:38.000

使用 Dependency Walker ( [http://www.dependencywalker.com/](http://www.dependencywalker.com/) ) 检查您的混合模式程序集，它会显示您的程序集所依赖的运行时。

# mysql - 需要根据mysql中的条件加入表

> ID：15743264
> 
> 赞同：0
> 
> 时间：2013-04-01T12:11:44.537
> 
> 标签：mysql, join, outer-join

我想在 iOS/android 应用程序中集成类似的功能。我正在为此开发服务。我的问题是：我有一张名为歌曲的表格，其中有歌曲的详细信息

```
**like**

song
song_id
station_id
song_file 
```

很快。我有第二个名为 userlike 的表，其中存储了用户喜欢的信息。

```
**userlike**
user_id
song_id
like 
```

我的主要问题是我想返回所有歌曲详细信息以及特定用户的类似值信息。如果你不喜欢它，那么我可以在我的 JSON 中发送“零”或 null。如何构建此查询？如果用户喜欢它，我需要歌曲数据和喜欢的价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:24:00.083

```
select songs.song_id as song_id , songs.station_id as station_id , songs.song_file as song_file , userlike.user_id as user_id ,  COALESCE(userlike.like, 0) as like 
            FROM songs LEFT JOIN userlike
            on songs.song_id = userlike.song_id
            and userlike.user_id = 'your particular user' 
```

The above sql should work. Please look for table name and column names for correction.

Thanks

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:16:07.367

尝试这个

```
select s.song, s.song_id from song s , userlike u where u.user_id = your userId; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:20:20.727

假设`userlike.like`是`boolean`价值

```
SELECT like.song, like.song_id,
 like.station_id,
 like.song_file,
IFNULL(userlike.like,0)
from like left join userlike on like.song_id=userlike.song_id
and userlike.user_id=/*your userid*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:20:40.863

听起来你需要使用`OUTER JOIN`：

```
SELECT s.song_id, s.song, u.like
FROM song s 
    LEFT JOIN userlike u 
        ON s.song_id = u.song_id 
            AND u.user_id = @userId 
```

将 userId 放入 Join 将确保返回歌曲，即使用户不喜欢它。

# android - android 中的控件是否在该活动中不可公开访问？

> ID：15743266
> 
> 赞同：0
> 
> 时间：2013-04-01T12:11:53.063
> 
> 标签：android, android-edittext

android 中的控件是否在该活动中不可公开访问（.java 文件）

这里是edittext字段**txt1** - 我想在函数**public void clr()中访问它**

我该怎么做？有可能还是做错了什么？

这可能是一个非常基本的qn。但我对 Java 和 Android 还是很陌生——虽然在 C# 方面经验丰富。请帮忙

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final TextView res=(TextView)findViewById(R.id.textView1);

        final EditText txt1 =(EditText) findViewById(R.id.editText1);
        final EditText txt2 =(EditText) findViewById(R.id.editText2);

        Button btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            //Some code here

            }
        });

        Button btnClr=(Button) findViewById(R.id.button2);
        btnClr.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                txt1.setText("");
                txt2.setText("");

                res.setText("");

                txt1.requestFocus();

            }
        });

    }

    public void clr(){

        txt1.setText("");
        txt2.setText("");

        res.setText("");

        txt1.requestFocus();

    } 
```

我知道我可以将 txt1、txt2 作为参数传递给 clr 函数。但我想知道上述是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:14:42.360

您应该在类级别声明 EditText 字段，然后变量 txt1 将在您的 clr() 方法中可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:16:45.447

C# 开发人员对 android 感到难以理解的第一件事是控件。Visual Studio 提供设计器来放置控件，当您将控件放在表单上时，它会自动创建相应类的实例并使其可访问。它创建了一个部分类，在组合你的代码之后，创建一个完整的类。

使用 android，创建变量是您的责任，因为它不会自行创建变量。设计器只是一个屏幕布局，您无法访问它。执行此操作的标准方法是在类中创建要访问的类型变量，然后使用 findbyid 分配控件以访问该控件。

您定义的变量可以有自己的范围。因此，如果您使其可在类范围内访问，那么它应该不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T12:17:44.653

在类级别声明 EditText：

```
 Class MyClass extends Activity {

     final EditText txt1;

         public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            txt1 =(EditText) findViewById(R.id.editText1);
            }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:16:00.190

如果您不是编程新手，那么您应该知道必须在该类中将变量声明为全局变量才能在任何方法中访问它。您应该在类中声明它。但在任何特定方法之外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T12:16:07.847

尝试以下操作：

```
TextView res;
EditText txt1;
EditText txt2;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    res=(TextView)findViewById(R.id.textView1);

    txt1 =(EditText) findViewById(R.id.editText1);
    txt2 =(EditText) findViewById(R.id.editText2);

    Button btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

        //Some code here

        }
    });

    Button btnClr=(Button) findViewById(R.id.button2);
    btnClr.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            clr();

        }
    });

}

public void clr(){

    txt1.setText("");
    txt2.setText("");

    res.setText("");

    txt1.requestFocus();

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T12:23:02.470

我猜你的代码中的错误是因为

在方法内声明的最终变量的范围仅在方法内。无法在方法外访问。最终的局部变量确实在方法返回后被销毁...

所以你必须让你的类级别的edittext变量......

看到这就是为什么你在这里无法访问

```
 public void clr(){

    txt1.setText("");
    txt2.setText("");

    res.setText("");

    txt1.requestFocus();

} 
```

# java - 如何从一个 REST Web 服务触发到另一个？

> ID：15743269
> 
> 赞同：0
> 
> 时间：2013-04-01T12:12:14.023
> 
> 标签：java

我已经为消防面板和公共地址系统编写了一个休息网络服务。如果特定位置可能发生火灾，则必须将消息发送到公共广播系统。为此，我必须从消防面板服务触发到公共广播系统服务。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:36:04.013

如果您可以编写一个执行对 a 的调用`REST web service`并返回结果的类，那么您当然可以将该类合并到任何应用程序中，甚至是`REST`样式服务

与对 a 的常规调用一样`REST web service`，您必须在服务主体中创建客户端实例来调用第二个 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:17:21.450

您的火警服务只是公共广播系统服务的另一个休息客户端。您可以使用任何 REST 客户端/HTTP 客户端来调用其他服务。这没有什么特别的。

这是一个有关使用 REST 客户端的相关问题 -[用于 Java 的 Rest 客户端？](https://stackoverflow.com/questions/221442/rest-clients-for-java)

# python - 分隔窗口中的多个 python 实例

> ID：15743274
> 
> 赞同：0
> 
> 时间：2013-04-01T12:12:34.257
> 
> 标签：python, python-2.7, automation, ui-automation, python-2.x

我正在使用[PyUserInput](https://github.com/SavinaRoja/PyUserInput)并且我想在单独的窗口中运行多个 python 脚本是否可以让脚本在窗口内运行，同时仍然允许我同时使用鼠标和键盘做其他事情？我正在使用最新版本的 ubuntu 和 python 2.7.3

如何将 python 代码附加到窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:48:48.497

如果这是为了访问网站，通常是的。一些网站禁用将数据输入文本字段的功能，例如登录，所以要小心。我会对 Python 的 urllib2 模块做一些研究。

这是一个很好的例子：[Python urllib simple login script](https://stackoverflow.com/questions/10037992/python-urllib-simple-login-script)

此外，当涉及到使用脚本来处理这些过程时，它通常不是关于“按下按钮”，而是用于处理 GUI 时。与其使用 GUI 本身，不如使用它们所服务的底层进程。

# c - 将整数数组传递给需要 C 中字符的函数

> ID：15743276
> 
> 赞同：0
> 
> 时间：2013-04-01T12:12:39.553
> 
> 标签：c, arrays, casting, char, int

如何将无符号整数缓冲区传递给期望无符号字符缓冲区的函数？该函数将操作并更新缓冲区。接下来是我想要实现的伪代码。

```
unsigned int* inputBuffer = (unsigned int*)malloc(bufferSize);

function(inputBuffer); <- How to perform this correctly?

bool function(unsigned char *buffer)
{
  ...operate and update values of buffer
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:16:44.707

这取决于函数的作用。如果它对缓冲区中的字节进行操作（如`memcpy`等`memcmp`），则只需转换指针：

```
function((unsigned char *)inputBuffer); 
```

如果函数对缓冲区中的*元素*（整数）进行操作，则必须将整个内容复制到临时缓冲区中：

```
size_t nelems = bufferSize / sizeof(unsigned int);
unsigned char *temp = malloc(nelems);
if (temp == NULL)
    // handle error

for (size_t i=0; i < nelems; i++)
    temp[i] = (unsigned char)(inputBuffer[i]);
function(temp);

// copy results back into inputBuffer
free(temp); 
```

然而，如果你发现你需要做这样的事情，那么你的程序中可能存在设计缺陷。除非您使用设计不佳的库，否则您根本不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:21:21.573

int 和 char 的大小不同。将整数数组传递给期望字符数组的函数将导致该函数将每个整数视为（不一定但通常）4个字符。您将需要重组其余代码以使用 char 数组，或者创建一个临时 char 数组，将每个元素复制到其中，然后调用函数并将每个元素复制回来。

然而，“你为什么要这样做”（H2CO3 的评论）的问题仍然存在；不同的情况需要不同的解决方案。

# hadoop - 旧版本中的 Hadoop 新方法

> ID：15743282
> 
> 赞同：1
> 
> 时间：2013-04-01T12:13:09.500
> 
> 标签：hadoop

HADOOP 的新版本中有一个方法。http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html#concat%28org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.Path []%29

这种方法在 Hadoop 1.0.4 中不可用我可以做些什么来使用它吗？

hadoop 和 java 中的新功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:42:37.527

是的 concat 函数在 HDFS 1.0.4 中不可用，如以下 HDFS 文档所示：http: [//hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/fs/FileSystem.html](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/fs/FileSystem.html)

如果此功能在 HDFS 1.0.4 中不可用，那么除非您需要自己编写一些额外的库来支持它，否则您将无法拥有它。如果您希望自己添加一些功能，我建议您查看[此线程](https://issues.apache.org/jira/browse/HDFS-222)以了解讨论如何继续支持此功能以及新代码存在的位置以查看更改。

# matlab - 如何判断一个图是全连通的？

> ID：15743294
> 
> 赞同：2
> 
> 时间：2013-04-01T12:14:17.570
> 
> 标签：matlab, graph-theory, complex-networks

很抱歉这个简单的问题，但有没有办法确定一个完全连接的图？我读过一些论文，表明图的总连通性是图分析的先决条件。我通过 Matlab 的一些图形分析工具箱搜索确定连通性的此类函数，但这些工具箱中似乎至少没有提供任何功能。你能给我任何建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-15T22:06:16.887

您可以执行以下操作：

*   假设 G 是图的[邻接矩阵](https://en.wikipedia.org/wiki/Adjacency_matrix)

*   构建D，它是一个与G相同大小的[对角矩阵](https://en.wikipedia.org/wiki/Diagonal_matrix)，将第N个节点的度放在第N个对角元素中

*   通过减法制作拉普拉斯矩阵：L = D - G

*   计算 L 的[特征值](https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors)（`eig`函数 in`matlab`会为你做）

*   等于零的特征值的数量是图中连通分量的数量

*   如果您的组件数为 1，则您的图是完全连接的，否则它具有您想要的组件数

* * *

此方法适用于有**向**图和**无向**图

希望你觉得它有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:59:37.433

我不是图论专家，但看起来[`graphconncomp`](http://www.mathworks.com.au/help/bioinfo/ref/graphconncomp.html)可以完成这项工作。

此函数查找图中所有连接的组件，因此如果图是完全连接的，它将返回 S=1 组件，并且 C 将为每个节点包含一个 1。

例如

```
[S,C] = graphconncomp(G)
if all(C==ones(size(C)))
  disp "G is fully connected";
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T08:23:52.273

Another option would be to use the FEX function `isconnected`, see [here](http://www.mathworks.nl/matlabcentral/fileexchange/19218-matgraph/content/matgraph/html/matgraph/@graph/isconnected.html).

This will determine if your graph is connected and has 1 as output if connected and 0 otherwise. Only works on undirected graphs though.

# entity-framework - 是否首先使用实体 框架代码纯粹用于数据库迁移？

> ID：15743295
> 
> 赞同：1
> 
> 时间：2013-04-01T12:14:20.727
> 
> 标签：entity-framework, database-migration, entity-framework-migrations, fluent-migrator, roundhouse

我目前正在使用[RoundhouseE](https://github.com/chucknorris/roundhouse)来管理我的数据库迁移，这非常有效。

我一直在研究各种迁移创建技术，例如[FluentMigrator](https://github.com/schambers/fluentmigrator)和其他一些技术。虽然错误的可能性似乎非常高，因为它们中的大多数都不是强类型的。例如，这是来自 FluentMigrator 的迁移

```
public class CreateMemberTable : Migration
{
    public override void Up()
    {
        Create.Table("Members")
            .WithNamedIdColumn("MemberId")
            .WithColumn("Name").AsString().NotNullable();
    }

    public override void Down()
    {
        Delete.Table("Members");
    }
} 
```

我之前使用过 Entity Framework 代码优先，并且非常喜欢迁移引擎，因为它会生成基于代码的迁移，然后您可以进行之后需要的任何更改。但是我真的不需要 EF 框架的其余部分，它对于我正在寻找的东西来说有点重量级。

仅使用 EF 进行迁移但不打扰其他任何操作是否可以接受？还有一个不错的[roundhouse插件](https://github.com/chucknorris/roundhouse-entityframework)

从 ORM 的角度来看，我使用的大多数数据与 PetaPoco 或 Dapper 之类的数据平平，似乎是一个更轻的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:10:32.570

我相信你可以，但要做到这一点，你必须带来 EF 的映射部分。因此，我不确定在代码中不使用 EF 会获得多少收益。但这绝对是可能的，它只是与映射结构和上下文相关联。

如果你想走这条路，也可以只使用 SQL 文件使用 RH (RoundhouseE) RefreshDatabase。

# scripting - 我的自动 phonegap 安装程序需要使用 wget 下载 jdk，我让它在命令提示符下工作，但不在 .hta 文件中

> ID：15743296
> 
> 赞同：0
> 
> 时间：2013-04-01T12:14:23.437
> 
> 标签：scripting, vbscript, wget, hta

我已经编写了一个基于 vbscript 的 .hta 安装程序来自动安装 PhoneGap/Cordova 以及所有先决条件（ant/jdk/bada sdk 等）。它几乎完成了，但我被困在需要直接下载 JDK 的部分。

**如果您在命令提示符中复制粘贴此（长）行并且它可以工作**

```
 wget --header "Cookie: gpw_e24=http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html;" ""http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-i586.exe -O jdk.exe 
```

它会直接下载JDK，绝对没问题。

**当您将代码片段粘贴到记事本中并保存为 .vbs 并运行它时，它不起作用**

```
Set objShell = CreateObject("WScript.Shell")
objShell.CurrentDirectory = "c:\"

'inQuotes function just puts quotes around the command parameters
objShell.Run inQuotes(WorkingDir & "\wget.exe") & " "  & " --header "  & inQuotes("Cookie: gpw_e24=http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html; ") & "http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-i586.exe" & " -O" & " "  & inQuotes("jdk.exe"),1,True 

Function inQuotes(toQuote)
    'return with quotes around the toQuote parameter
    inQuotes = chr(34) & toQuote & chr(34)
End Function 
```

在 objShell.Run 行的某个地方出现问题，wget 没有下载 jdk ...非常感谢任何帮助，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:38:23.573

您的变量`WorkingDir`是否已定义？如果我放一个回声：

```
strCmd = inQuotes(WorkingDir & "\wget.exe") & " " & " --header " _
& inQuotes("Cookie: gpw_e24=http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html; ") _
& "http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-i586.exe" & " -O" & " "  & inQuotes("jdk.exe")
WScript.Echo strCmd 
```

我明白了：

```
"\wget.exe"  --header "Cookie: gpw_e24=http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html; "http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-i586.exe -O "jdk.exe" 
```

这不会传递给原始命令。也许它会是这样的？

```
strCmd = "wget.exe --header " _
& inQuotes("Cookie: gpw_e24=http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html;") _
& " " & chr(34) &chr(34) & "http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-i586.exe" _
& " -O jdk.exe"
WScript.Echo strCmd 
```

# sql - 如何将多个值作为参数传递给sql语句？

> ID：15743302
> 
> 赞同：0
> 
> 时间：2013-04-01T12:14:40.060
> 
> 标签：sql, sql-server-2008, tsql, select, stored-procedures

我有一个大 SQL 查询，我想使用该查询提取一些数据

```
declare @Period VARCHAR(10)  = 'MTD'
declare @Date DATETIME = '2011-08-31' 
```

我有一个很大的`select statement`地方，我在传递上面的参数并执行输出。

现在我有 10 个不同的日期，每次都需要通过这里才能看到结果。

如何将这些日期传递给上述参数`declare @Date DATETIME`，我该如何对其进行硬编码？

所以我想要的输出将是那些选定的日期，给我至少 3 个日期的提示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T13:50:25.547

使用表值参数。首先，创建一个类型：

```
CREATE TYPE dbo.Dates AS TABLE(d DATE); 
```

现在您的存储过程可以将此类型作为参数：

```
CREATE PROCEDURE dbo.whatever
  @d dbo.Dates READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT t.columns
    FROM dbo.tableName AS t
    INNER JOIN @d AS d
    ON t.[date] = d.d;
END
GO 
```

然后，从您的应用程序中，您可以将此参数作为 a 传递`DataTable`，例如。

# spring - wsse:security 的命名空间

> ID：15743303
> 
> 赞同：0
> 
> 时间：2013-04-01T12:14:40.920
> 
> 标签：spring, xml-namespaces, spring-ws, wss4j, wsse

我的问题是我正在尝试调用具有 Wss4jSecurityInterceptor 的 Web 服务来进行用户名密码身份验证。

生成的请求是这样的：

```
<wsse:Security
            xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
            xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
            SOAP-ENV:mustUnderstand="1"> 
```

这不起作用但是当我更改命名空间即**xmlns:wsse**

```
<wsse:Security
            xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/07/secext"
            SOAP-ENV:mustUnderstand="1"> 
```

它工作正常。

我想知道如何更改使用`<wsse:Security>`代码中的标记生成的命名空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:55:25.283

您可以扩展[EndpointInterceptorAdapter](http://static.springsource.org/spring-ws/sites/2.0/apidocs/org/springframework/ws/server/endpoint/interceptor/EndpointInterceptorAdapter.html)并覆盖方法 handleResponse ，如下所示：

```
@Override
public boolean handleResponse(MessageContext messageContext_, Object endpoint_) {

WebServiceMessage _webServiceMessage = messageContext_.getResponse();
SoapMessage _soapMessage = (SoapMessage) _webServiceMessage;

if (_soapMessage != null) {
SoapEnvelope _soapEnvelope = _soapMessage.getEnvelope();

if (_soapEnvelope != null) {

SoapHeader _soapHeader =_soapEnvelope.getHeader();
// modify the soapheader by casting to a DOMSource and manipulate the nodes 
```

# excel - 将历史记录从 Excel 导入自定义应用程序

> ID：15743306
> 
> 赞同：1
> 
> 时间：2013-04-01T12:14:58.453
> 
> 标签：excel, import, legacy

我需要一点帮助。我的公司有多个 Excel 表中的数据。有些工作表是直截了当的（因为它们很容易映射数据类型）。但它们中的大多数是在一个标题中合并的行和单元格等。我正在用 c# 开发一个应用程序，用于维护一个具有适当用户和角色管理以及多个部门作为利益相关者的大型数据库。

我已经从 excel 表中确定了关系，一切都很好。我无法理解的是如何导入该历史数据以映射到数据表？基本上，当设计一个新的自定义系统时，您将如何在其中导入无意义的数据？

我唯一能想到的就是编写一个实用程序，它读取 excel 表的每一行和每个单元格，然后提取所需的值以插入到正确的数据库表中。但由于 excel 表的数量众多，这将需要很长时间。

想知道你们中的任何人都经历过和我一样的事情吗？你们是怎么处理的或者会怎么处理的？

非常感谢伙计们:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T14:23:03.063

如果数据不规律，那么您将面临一个痛苦的世界。Excel 中的对象模型可以由任何 Windows 脚本宿主语言驱动，例如 VBScript 和 JScript。事实上，大多数脚本语言都对 Excel 遍历有一定的支持。

但是，正如您已经注意到的，所有电子表格的数据布局并不相同。几年前，我在遍历来自发电站的 SCADA 数据时遇到了类似的问题：每个站点的处理方式略有不同，并且不时更改其格式。

# jquery - jQuery，我将如何根据用户输入创建从 name-list.txt 中提取的随机名称

> ID：15743307
> 
> 赞同：1
> 
> 时间：2013-04-01T12:15:08.770
> 
> 标签：jquery, string, cordova, random

我正在使用 phonegap build 构建一个电话应用程序，因此我仅限于 HTML5、CSS 和 javascript / jQuery，但我想实现以下目标。

我想从可能是“John Smith”的用户那里获取输入，然后根据该输入，从文件中提取某些行，因此如果另一个用户输入相同的名称，他们将得到相同的结果。我在谷歌上搜索并找到了一些使用名称中的音节和字符数来生成名称等的文章，但似乎没有真正做我想做的事情。

我还计划对用户输入进行散列处理，然后使用随机生成的名称将其存储在远程数据库中，然后如果再次出现散列，它将使用相同的名称，但设备上的本地内容将有助于缩短加载时间等等

您知道根据用户输入生成随机名称的最佳方法是什么吗？非常感谢任何帮助，谢谢！

我的 name-list.txt 看起来像这样：

```
cup
annihilator
bobby
val
halen
chupa'clark'bra
hawii
mushinator
release 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:46:16.557

我最终为此编写了自己的函数，它是一种贫民窟，但它确实完成了工作。希望这对其他人有用：P

```
function generateName(name) {
        if(name != null) {
            // prepare the variables
            var sum = 0;
            var total = 0;
            var points = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26];

            // get the string
            var string = name.replace(/[^a-zA-Z]/g, "");
            if(string.length > 50) {
                string = string.substring(0,50);
            }

            // tally up the points of the letters
            for(var i = 0; i < string.length; i++ ) {
                var letter = string.charAt(i).toUpperCase();
                var letterIndex = letter.charCodeAt(0) - 65;
                sum += points[letterIndex];
            }

            // make the number bigger
            if(sum % 2 === 0) {
                if(sum < 100) {
                    total = parseInt(Math.pow(sum, (sum)));
                }
                else 
                {
                    total = parseInt(Math.pow(sum, (sum / 100)));
                }
                console.log("it was even" + total);
            }
            else {
                for(var i = 0; i < (sum*sum); i++) {
                    parseInt(total = total + sum);
                }
            }
            total = total + string.length;

            // check if the value is in a valid range, if not, loop again
            var word1 = total;
                while(word1 > 25000) {
                word1 = parseInt(word1 / 2);
            }

            var word2 = parseInt(word1.toString().split("").reverse().join(""))+string.length;

            while(word2 > 25000) {
                word2 = parseInt(word2 / 2);
            }
        }
        else {
            var word1 = Math.floor((Math.random()*25000)+1);
            var word2 = Math.floor((Math.random()*25000)+1);
        }

        $.ajax({
            type: "POST",
            url: "names.txt",
        }).done(function(msg) {
            var names = msg.split('\n');
            var name1 = names[word1].toLowerCase().replace(/\b[a-z]/g, function(letter) { return letter.toUpperCase(); });
            var name2 = names[word2].toLowerCase().replace(/\b[a-z]/g, function(letter) { return letter.toUpperCase(); });

            $("#name-space").hide();
            $("#name-space").html("<div id=\"name-wrapper\">Your name is:<br /><h1>" + name1 + " " + name2 + "</h1></div>");
            $("#name-space").fadeIn(100);
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:16:36.647

为什么不将其保存为 javascript 对象而不是文本？

然后，您可以进行快速 ajax 调用并获取对象。这也比使用普通文件和运行正则表达式快得多。

根据您文件的内容，我可以帮助您构建该 JSON。

# ios - 自定义 UITableView 类似于 ASP.Net Grid

> ID：15743309
> 
> 赞同：0
> 
> 时间：2013-04-01T12:15:20.707
> 
> 标签：ios, objective-c, ipad, uitableview

我正在尝试开发 iPad 应用程序，我需要一个类似于 asp.net 网格的自定义 UITableView。

我不能使用默认的 UITableView，因为我需要不止一列，并且通过数据集的列动态复制。

我需要这样的东西： [http ://www.c-sharpcorner.com/UploadFile/biswapinky/developing-a-multi-select-Asp-Net-gridview-using-jquery/Images/multi_select_gridview.png](http://www.c-sharpcorner.com/UploadFile/biswapinky/developing-a-multi-select-Asp-Net-gridview-using-jquery/Images/multi_select_gridview.png)

我被搜索制作CustomUITableCell，但我找不到任何这样的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:28:59.423

你可以

*   只需使用带有 customcell 的单个 tableview 显示标签中的所有值并使用它[我更喜欢这个]

或者

*   创建 UITableView 的子类
*   按照要求进行所有设计
*   初始化并添加为子视图[在循环中指定帧宽度和帧中的原点 x] 作为所需输入的视图

参考[这个](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html) 和[这个](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:56:58.380

试试 UICollectionView，它们是 iOS6 中的新功能，与 TableViews（数据源、委托等）的用法相似，但更灵活，并提供了网格排列选项。

# c - C中的结构可以总是以分号结尾吗

> ID：15743315
> 
> 赞同：0
> 
> 时间：2013-04-01T12:15:38.707
> 
> 标签：c, structure

这里我有两个结构。首先是：

```
struct complex {
    double real, imaginary;
}; 
```

我知道它必须以分号结尾。

但是这个有一个功能

```
struct complex add_complex(struct complex c1, struct complex c2) {
    struct complex c3;
    c3.real = c1.real + c2.real;
    c3.imaginary = c1.imaginary + c2.imaginary;
    return c3;
} 
```

在这里，如果我在末尾不包含分号，那么编译器将不会产生错误。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T12:17:04.833

结构定义必须始终以分号结尾。因此，如果您`;`从`struct complex`定义中删除了，您会得到一个编译器错误。

第二个 ( `add_complex`) 不是结构定义，它是一个返回结构的函数。函数末尾没有分号。

> *   我的意思是，如果我这样写 struct complex add_complex() { }; 那么这个也是真的。为什么？

它是“好的”，实际上取决于编译器。我使用的大多数编译器（例如 gcc 和 Micosoft 的）都允许这样做，但可以使用正确的标志显示警告/错误（添加`-pedantic`到 gcc 将给出：`warning: ISO C does not allow extra ‘;’ outside of a function [-pedantic]`并且您可以添加`-Werror`）将其变成错误。 )

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T13:12:06.773

您可以使用结构定义来立即声明变量或其他内容。例如，你可以做

```
struct complex {
    double real, imaginary;
} number; 
```

`number`用于用 type声明变量`struct complex`。你也可以像这样声明你的函数

```
struct complex {
    double real, imaginary;
} add_complex(struct complex c1, struct complex c2) {
    struct complex c3;
    c3.real = c1.real + c2.real;
    c3.imaginary = c1.imaginary + c2.imaginary;
    return c3;
} 
```

您不需要在函数定义后放置分号，因为此定义不能用于其他任何内容。

# hadoop - 使用 Hadoop 1.0.3 配置 HBase

> ID：15743316
> 
> 赞同：4
> 
> 时间：2013-04-01T12:15:45.457
> 
> 标签：hadoop, hbase

我正在使用**cygbin**在 widow-7 中安装**hadoop-1.0.3**。现在我想安装**HBase**，所以请建议我哪个版本的 Hbase 与 hadoop 1.0.3 兼容？

 ***** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T16:51:15.530

以下是 Hadoop 和 HBase 版本之间的兼容性矩阵列表：

![在此处输入图像描述](https://i.stack.imgur.com/wDHGB.png)

上图：S - 支持，X - 不支持，NT - 未测试

此处提供更多信息：http: [//hadoop.apache.org/releases.html](http://hadoop.apache.org/releases.html)****

# ios - 用 NSPredicate 比较两个数组

> ID：15743326
> 
> 赞同：0
> 
> 时间：2013-04-01T12:16:14.633
> 
> 标签：ios, image, cocoa, nspredicate

我有两个数组，一个代表全尺寸图像列表，另一个代表图像的缩略图。有一种方法，使用 NSPredicate 来检查全尺寸图像是否有缩略图？

拇指被称为 img{number}_thumb.jpg，全尺寸图像被称为 img{number}.jpg。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:29:27.723

使用**数组、字符串和循环**：

```
NSArray *thumbs=@[@"img1_thumb.jpg",@"img2_thumb.jpg",@"img3_thumb.jpg",@"img4_thumb.jpg",@"img5_thumb.jpg",];
NSArray *images=@[@"img1",@"img2",@"img3",@"img41",@"img5"];

BOOL isSame=YES;
for (NSString *name in images) {
    if (![thumbs containsObject:[NSString stringWithFormat:@"%@_thumb.jpg",name]]) {
        isSame=NO;
        NSLog(@"%@ doesn't has thumb image",name);
        break; //if first not found is not good enough remove this break
    }
}
NSLog(@"%@",isSame?@"All thumb has image":@"All thumb does not have image"); 
```

* * *

使用 NSPredicate：

```
for (NSString *image in images) {
    NSPredicate *predicate=[NSPredicate predicateWithFormat:@"SELF like [c]%@",[NSString stringWithFormat:@"%@_thumb.jpg",image]];
    NSArray *filtered=[thumbs filteredArrayUsingPredicate:predicate];
    if (filtered.count==0) {
        NSLog(@"%@ not found",image);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:51:00.660

您可以使用[indexOfObjectsPassingTest：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

```
NSArray *imageThumbs=   [NSArray arrayWithObjects:@"img1_thumb.jpg",@"img2_thumb.jpg",@"img3_thumb.jpg",@"img4_thumb.jpg",nil];
    NSArray *images=[NSArray arrayWithObjects: @"img1",@"img2",@"img3",@"img4",@"img5",nil];
    for(NSString *image in images)
    {
        if ([imageThumbs HasPrefix:image]) {
            NSLog(@"has thumbnail %@",image);
        }
    }  

@interface NSArray (fileterArrayUsingBlocks)
-(BOOL)HasPrefix : (NSString *)path;
@end
@implementation NSArray (fileterArrayUsingBlocks)

-(BOOL)HasPrefix : (NSString *)path
{
    NSIndexSet  *lIndexSet = [self indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
        if ([obj hasPrefix:path]) {
            *stop = YES;  
            return YES;
        } else
            return NO;
    }];
    if (![lIndexSet count])
        return NO;
    return YES;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:55:04.780

如果可以安排两个数组具有相同的值（即 img1.jpg 和 img1_thumb.jpg 都用“1”表示，但在不同的数组中），那么没有缩略图的图像集是：

```
[[NSMutableSet setWithArray:images] minusSet:[NSSet setWithArray:thumbnails]] 
```

# php - 使用 preg_replace 禁用当前页面的菜单选项

> ID：15743328
> 
> 赞同：0
> 
> 时间：2013-04-01T12:16:20.507
> 
> 标签：php, preg-replace

我正在尝试使用 preg_replace 在下拉菜单中禁用指向当前页面的链接。具体来说，我试图将一个类名和一个“禁用”属性附加到指向当前页面的菜单选项（页面名称在查询字符串中）。

到目前为止，我可以加载菜单，但我的 preg_replace 没有做任何事情（preg_replace 有时对我来说太混乱了）。

```
<?php

$menu = file_get_contents("menu.php");
$q_param = $_SERVER['QUERY_STRING'];

$menu = preg_replace("|<option value=\"routemap.php?$q_param\"></option>|U", "<option value=\"routemap.php?$q_param\" class=\"red\" disabled=\"disabled\">$1</option>", $menu);

echo $menu;

?> 
```

编辑：修复它：

```
<?php
$menu = file_get_contents("menu.php");
$param = $_SERVER['QUERY_STRING'];
$menu = preg_replace("/$param/", "$param\" class=\"red\" disabled=\"disabled", $menu);
echo $menu;
?> 
```

这是搜索模式的开始和结束标记的问题（我认为）。

# c - sqrt() 函数链接错误

> ID：15743330
> 
> 赞同：3
> 
> 时间：2013-04-01T12:16:22.413
> 
> 标签：c, sqrt

以下代码在 Linux 上引发未定义符号错误。

```
$ cat rms.c
/* sqrt example */
#include <stdio.h>
#include <math.h>

int main ()
{
  double param, result;
  param = 1024.0;
  result = sqrt (param);
  printf ("sqrt(%lf) = %lf\n", param, result );
  return 0;
}

$ gcc rms.c
/tmp/ccaWecFP.o(.text+0x24): In function `main':
: undefined reference to `sqrt'
collect2: ld returned 1 exit status 
```

如果我用 (double)16 替换 sqrt() 的参数，那么程序正在编译和执行。为什么在第一种情况下会抛出错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:20:24.947

这是一个链接器错误。

链接器缺少`sqrt()`. 它驻留在图书馆中`libm`。

告诉 GCC 通过应用选项来添加它`-lm`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T12:29:01.957

的实现`sqrt()`可在**数学库**或`libm`.

您必须将程序**链接**到数学库，如下所示：

```
gcc rms.c -lm 
```

一个自然的问题是，我怎么知道这个？答案在手册页中。如果我执行“man sqrt”，我会看到以下内容。请注意，**概要中提供了链接说明**。

```
SYNOPSIS
       #include <math.h>

       double sqrt(double x);

       Link with -lm. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T12:20:48.397

您必须与`libm`

```
gcc rms.c -lm 
```

如果您想了解更多说明[Linking with external libraries](http://www.network-theory.co.uk/docs/gccintro/gccintro_17.html)。

祝你好运 ;）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-01T01:42:44.247

正如其他答案所说，您需要通过`-lm`才能链接到包含该`sqrt`符号的库。

它使用常量参数的原因是因为`sqrt`它允许作为内置实现。当 GCC 看到使用常量参数调用的内置函数时，它可以在编译时计算结果，而不是发出对库中外部函数的调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-03T11:38:36.553

这里的其他答案讨论了链接错误；`param`如果您用常数替换，我将添加一个关于为什么结果正确的答案。

GCC 有一个优化，它用内置等效项（例如`sqrt`）和常量参数（例如`16.0`）替换函数，并用这些计算的结果（例如`4.0`）。

这是一种不断折叠的形式。

# c - 关于数组声明的困惑

> ID：15743331
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:16:30.380
> 
> 标签：c, arrays

这在 C 中是什么意思：

```
char strings[USHRT_MAX][50]; 
```

它是否创建了一个称为字符串的锯齿状字符数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T12:18:57.173

不，上面不会创建一个锯齿状的字符串数组。它创建了一个二维字符数组，能够存储最多`USHRT_MAX`49 个字符的 C 字符串（第 50 个字符`char`用于`'\0'`终止符）。

锯齿状数组声明如下所示：

```
char *strings[USHRT_MAX]; 
```

使用指针数组，您需要为各个字符串分配内存，但字符串的长度可能因一个元素而异。另一方面，您的数组已分配所有内存，但它限制了字符串的长度，并且有可能使用比存储较短字符串所需的更多内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:06:10.413

这个：

```
char strings[USHRT_MAX][50]; 
```

只提供一个二维字符数组。大小为`USHRT_MAX`50。这不是锯齿状数组，锯齿状数组是具有不同长度行的数组，从概念上讲是：

```
strings[0] = ['a']['\0']
strings[1] = ['j']['a']['g']['\0']
strings[2] = ['a']['r']['r']['a']['y']['\0'] 
```

你的更像是：

```
strings[0] = ['a']['\0'][ ][ ][ ][ ]
strings[1] = ['j']['a']['g']['\0'][ ][ ]
strings[2] = ['a']['r']['r']['a']['y']['\0'] 
```

请注意，在第二个示例中，它们在每行中都有相同数量的元素，但并非所有元素都被填充。

# spotify - Spotify Apps API：Spotify 一直崩溃

> ID：15743337
> 
> 赞同：0
> 
> 时间：2013-04-01T12:16:48.797
> 
> 标签：spotify

我正在开发一个 Spotify 应用程序，但 Spotify 应用程序一直在我身上崩溃。我一直在尝试调试自己的 Javascript 代码，看看哪里出错了，但似乎有点随机。当我的应用失去焦点（即切换到另一个应用）时，它几乎总是会发生。jQuery可能存在兼容性问题吗？

不幸的是，对于 Spotify，我找不到任何崩溃日志或任何东西。有吗？

我希望有人可以在这里帮助我，因为这个问题让开发很酷的 Spotify 应用程序变得不可能。

编辑：澄清一下，我在 Windows 8 64 位上使用 Spotify 0.8.8.450.gd9413514，但我在 Windows 7 和 Mac OS X 10.6 上也遇到过同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:00:54.367

使用 Windows 7，您可以通过访问任务管理器、右键单击 Spotify 进程并选择“创建转储文件”来创建崩溃日志。如果您使用的是 Mac OS X，则可以通过打开活动监视器、选择 Spotify 进程并单击“示例进程”来获取故障转储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T03:28:07.167

我遇到了同样的问题，似乎与顶部的广告横幅有关。运行广告视频并暂停它，这为我解决了问题。

# android - 如何在 SharedPreferences 中存储 Date 对象？

> ID：15743339
> 
> 赞同：3
> 
> 时间：2013-04-01T12:16:58.957
> 
> 标签：android, date, sharedpreferences

我需要将日期对象放在共享首选项编辑器中。

将其转换为什么数据类型以存储在共享首选项中？通常我们 `prefEditor.putString("Idetails1", Idetails1);`为字符串和元素编写。

我怎么做？我也可以将它用于日期对象吗？

```
private EditText pDisplayDate;
private ImageView pPickDate;
private int pYear;
private int pMonth;
private int pDay;
/** This integer will uniquely define the dialog to be used for displaying date picker.*/
static final int DATE_DIALOG_ID = 0;

Date date;

private DatePickerDialog.OnDateSetListener pDateSetListener =
new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, 
    int monthOfYear, int dayOfMonth) {
       pYear = year;
       pMonth = monthOfYear;
       pDay = dayOfMonth;
       updateDisplay();
       displayToast();
    }
};

private void updateDisplay() {
    pDisplayDate.setText(
       new StringBuilder()
       // Month is 0 based so add 1
       .append(pMonth + 1).append("/")
       .append(pDay).append("/")
       .append(pYear).append(" ")
    );
}

private void displayToast() {
    Toast.makeText(this, 
        new StringBuilder()
        .append("Date choosen is ")
        .append(pDisplayDate.getText()),
        Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T12:21:34.517

> can i use this for date object too??

The simpliest way i think you can use is convert `Date` to its String representation. Then you can simply convert it back to Date object using some date formatter.

```
String dateString = date.toString();
SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(<context>);
p.edit().putString("date", dateString).commit(); 
```

## Update:

Also how @MCeley pointed out, you can also convert `Date` to long and put its long value:

```
long dateTime = date.getTime();
SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(<context>);
p.edit().putLong("date", dateTime).commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:26:01.393

每当它更改或从 Preference 对象检索易于使用时，使用 Calendar 对象设置日期。

```
Calendar c = Calendar.getInstance(); // use system date on first time for initialization.

long millis= pref.getLong("date",c.getTimeInMillis()); // retrieve date from Preference object in long format

c.setTimeInMillis(millis); // now set in calendar and then use it

//on date change set the year, month and day into calendar to and then stored in preference

private DatePickerDialog.OnDateSetListener pDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year, 
                                  int monthOfYear, int dayOfMonth) {
                pYear = year;
                pMonth = monthOfYear;
                pDay = dayOfMonth;
                c.set(pYear , pMonth , pDay ); // set into the calendar and when need to save in preference do this
                Editor edit = pref.editor();
                edit.put("date",c.getTimeInMillis());
                edit.commit();
                updateDisplay();
                displayToast();
            }
        }; 
```

# visual-studio-2010 - 如何将 AntTweakBar 设置在 OpenGL 3 内容之上（使用 GLFW）

> ID：15743340
> 
> 赞同：1
> 
> 时间：2013-04-01T12:17:04.523
> 
> 标签：visual-studio-2010, opengl-3, glfw

我正在使用 GLFW 在 MSVS 2010 中显示一些 OpenGL 内容。我想使用 AntTweakBar 来修改一些指令变量（速度旋转，对象大小，...），我希望这个栏高于 OpenGL 内容（而不是像你一样落后）可以在图片中看到）。

我阅读了手册，按照示例进行操作，但我不知道如何设置它。

示例使用旧的不推荐使用的固定管道，但是我使用动态管道，所以我想这可能是问题。

图片：（我有足够的代表直接发布） [http://s9.postimg.org/43aa3pt0v/cube.png](http://s9.postimg.org/43aa3pt0v/cube.png)

代码：

```
TwInit(TW_OPENGL_CORE, NULL);

int width=0;
int height=0;
glfwGetWindowSize(&width,&height);

TwWindowSize(width, height);

TwBar * BuildingGUI = TwNewBar("Window settings");
TwSetParam(BuildingGUI, NULL, "refresh", TW_PARAM_CSTRING, 1, "0.1");
TwDefine(" 'Window settings' alwaystop=true ")
TwAddVarRW(BuildingGUI, "Movement Speed"  , TW_TYPE_FLOAT, &speed, "step=0.1"); 
```

感谢您的时间 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T19:14:32.093

我遇到了同样的问题并放置了 TwDraw(); 函数就在绘制函数内部的 glfwSwapBuffers 之前。

# javascript - d3.js 边距约定

> ID：15743343
> 
> 赞同：2
> 
> 时间：2013-04-01T12:17:24.303
> 
> 标签：javascript, svg, d3.js

请参阅[此处所述的保证金约定](http://bl.ocks.org/mbostock/3019563)

仅图表： http: [//bl.ocks.org/mbostock/raw/3019563/](http://bl.ocks.org/mbostock/raw/3019563/)

两个问题

*   [如果我从 gist（链接](https://gist.github.com/mbostock/3019563/raw/b163f911d8a1c6430930548024d35934bba35a52/index.html)）下载 html 文件，我会得到以下视图（Google Chrome 版本 26.0.1410.43）

![在此处输入图像描述](https://i.stack.imgur.com/8igb4.png)

svg周围没有边框，没有显示轴线/路径。我主要对缺少轴路径感到惊讶，因为它位于 svg 容器中。有什么问题？

*   如图所示，左上角的箭头表示`translate(margin.left, margin.top)`. 但是，我猜是`translate(padding.left, padding.top)`。边距是原点和 svg 元素之间的矩形。这是一个错误吗？

# javascript - 如何使用 JSDoc3 注释 JS 模块模式类？

> ID：15743347
> 
> 赞同：4
> 
> 时间：2013-04-01T12:17:51.840
> 
> 标签：javascript, documentation, jsdoc, module-pattern

这就是我实际执行此操作的方式，但是在生成文档后私有方法和属性不可见。

我做错了什么吗？

顺便说一句，其他一切都很好。我第一次使用文档生成器，印象非常深刻。

```
/**
 * Constructor Description
 * @constructor
 * @class
 * @classdesc Something about my class Foo.
 */
container.Foo = function() { this.init(); };
container.Foo.prototype = (function() {

  /**
   * @private
   * @name container.Foo~fooPropertyPrivat
   * @property {boolean} fooPropertyPrivat Some description
   */   
  var fooPropertyPrivat = true;

  /**
   * Some description
   * @private
   * @name container.Foo~doSomethingPrivat
   * @memberOf container.Foo
   * @method doSomethingPrivat
   */   
  function doSomethingPrivat() {
      //...
  }

  return {
    /**
     * @public
     * @name container.Foo#fooPropertyPublic
     * @property {boolean} fooPropertyPublic Some description
     */ 
    fooPropertyPublic: true,

    /**
     * Some description
     * @public
     * @constructs
     * @name container.Foo#init
     * @memberOf container.Foo
     * @method init
     */
     init: function() {
       //...
     }
  };
})(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:18:23.960

Raphael，我很高兴听到 JSDoc 3 到目前为止对你很有效！

默认情况下，JSDoc 会省略任何带有`@private`. 您可以使用`--private`命令行选项覆盖此设置。

# javascript - 将 Spine.js 放到现有应用程序中？

> ID：15743349
> 
> 赞同：1
> 
> 时间：2013-04-01T12:17:57.403
> 
> 标签：javascript, model-view-controller, spine.js

最近我一直在研究很多用于 JavaScript 框架的 MVC，我非常喜欢 Spine.js 的整体感觉以及它使用 CoffeeScript 的事实。也就是说，在这个阶段我主要关心的是我需要能够将 MVC 框架迭代地放入一个相当大的现有应用程序中。我在 Spine.js 上看到的大多数文档都侧重于创建新应用程序。

有没有人对这样做的最佳方法有任何建议？如果某个地方有一个很好的教程也会很棒，但谷歌不是我的朋友。

或者这只是一个坏主意，在处理遗留问题时我应该去其他地方？虽然 Angular 并没有以同样的方式点击我；然而，关于如何在遗留应用程序中迭代地使用它似乎非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:26:58.320

我认为“迭代地”做它是一个坏主意。我在一家公司担任自由职业者，他们决定在几个版本中进行完整的 UI 返工。在第一阶段，计划放弃现有的 JS，使用 Spine js 作为 MVC，并要求 js 作为 AMD。到目前为止一切都很好 - 但这个过程是“迭代的”。该项目/应用程序非常复杂，花了半年多的时间（我参与了 2.5 个月）。

留下所有现有的 JS 并“迭代地”替换发布的功能是一个很大的错误。因此，我们遇到了多个问题。如果你有数百个 js 文件、内联脚本、依赖项，那么简单地将它们扔掉会容易得多，因为你可以从字面上判断你的新代码是否有效。否则，您总是必须区分是谁的错：新代码或旧代码。

这也是造成本可以避免或至少减轻的麻烦的原因，如果它是一个硬削减：

*   产品负责人并没有真正意识到状态，因为他看不到任何可见的进展。他只发现错误和不当行为。这对双方来说都是不满意/令人沮丧的。我一遍又一遍地听到的一句话：“前几天/之前确实有效 - 现在不行了”

*   你开始更新一些过时的库，有时会导致兼容性问题的插件，因为 API 往往会发生变化，所以你也必须在旧代码中修复它。意味着：在某些时候，它开始感觉像是在解决问题而不是开发一个很酷/好的应用程序。这也太令人沮丧了。

*   它花费的时间比预期/估计的要长。

*   您一直在依赖最终不存在的旧代码进行开发。

我个人的建议是：不要迭代地做。对实时应用程序进行热修复，并在单独的分支上开发新应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:13:15.900

我看不出将任何没有显式 mvc 结构的遗留应用程序整合到 spin.js 或骨干或 angular 等中可能会导致体验下降。

迭代转换很像编写一个新应用程序，减去用于定义应用程序 GUI 交互的样板文件。首先关注模型和控制器，抽出非常适合 MVC 结构的组件。我建议尽早避免使用 Spine 的某些应用程序交互组件，例如堆栈和路由，因为一旦其他所有内容都准备好根据 Spine 约定使用，这些组件就会变得更有意义。

# java - Eclipse表单基本编辑器插件中的Tab键顺序

> ID：15743362
> 
> 赞同：0
> 
> 时间：2013-04-01T12:19:19.893
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, jface

我正在 Eclipse 中开发基于表单的插件编辑器。我的表单以相同的顺序包含 3 个文本字段和一个表格查看器和 4 个按钮。

我想通过键盘“Tab”按钮添加支持。当用户从 1 个文本字段移动到第 2 个和下一个时，选项卡的顺序是可以的。但是当用户移入/移出表格查看器时，选项卡按钮无法按预期工作。

但是直到现在我还没有编写任何代码来处理 Tab 排序，谁能告诉我我是如何为我的表单实现这种行为的。

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:37:06.523

Look at the below method on `Composite`

```
 public void setTabList (Control [] tabList)

ex: 
   Composite comp = new Composite(parent,SWT.NONE);
   comp.setLayout(new GridLayout(4,false));
   Button b1 = new Button(comp,SWT.NONE);
   b1.setText("button1");
   Button b2 = new Button(comp,SWT.NONE);
   b2.setText("button2");
   Button b3 = new Button(comp,SWT.NONE);
   b3.setText("button3");
   Button b4 = new Button(comp,SWT.NONE);
   b4.setText("button4");
   comp.setTabList(new Control[]{b1,b3,b4,b2}); 
```

# php - PHP Mongo 会话处理程序和分片

> ID：15743365
> 
> 赞同：0
> 
> 时间：2013-04-01T12:19:53.583
> 
> 标签：php, mongodb, session

我在用

[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/Handler/MongoDbSessionHandler.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/Handler/MongoDbSessionHandler.php)

作为我的 PHP 应用程序的会话处理程序。

我们的应用程序预计会有大量流量，因此我们正在尝试对 Mongo 存储会话进行分片。

我已经根据文档设置了我的分片，在我对集合进行分片之前一切都很好（我可以看到`session`集合中正在创建会话文档）。

一旦我`session`使用 sharding key启用了分片`sess_id`，就不会创建会话文档（即计数永远不会改变），`mongos`每当我访问我的 PHP 页面时，我都会在日志中看到这些行： `resetting shard version of mydb.session on my.hsard.ip.address:port, version is zero`

我试图对我的其他集合进行分片，它工作正常，这告诉我我的分片设置是正确的。

有人知道可能出了什么问题吗？我正在使用 Mongo 2.2.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:21:32.517

找到了原因。

这是因为我们使用的 symfony 版本附带的`write`功能不适用于分片。`MongoDbSessionHandler.php`

`MongoDbSessionHandler.php`我们正在使用这样的工具`write`：

```
$mongo->update({shardkey:1}, {shardkey:1, data:2}, {upsert:true}) 
```

这是不允许的，因为您无法更改分片键。

解决方案是简单地使用`MongoDbSessionHandler.php`github 中的最新版本。

# node.js - 干净的 URL（可能带有 slug）

> ID：15743376
> 
> 赞同：1
> 
> 时间：2013-04-01T12:20:40.540
> 
> 标签：node.js, express

我正在使用 mongodb 来存储数据。并且默认的_id 很长而且不干净。所以现在我的路线是这样的：example.com/job/sdg3463retgeragsehxcwe35435ert5

工作正常。

但是有什么方法可以自动增加数字并保存自定义 ID（字段名称如 serial_number）？

我是这样实现的：创建了另一个集合来存储最后保存的序列号。然后在保存新数据的同时增加它。这工作正常，但有没有更好的方法？

另外，如何用 slug 而不是 id 保存 url？我是否需要一个单独的集合来存储 slug 及其相关 ID？

如果我使用原始 mongodb _id 怎么办？它会严重伤害SEO吗？还是有其他问题？

这很好用，但只是想知道专业人士是如何做到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:04:18.097

如果您愿意使用字母数字 id，那么 shortid 模块可以很好地工作。[https://github.com/dylang/shortid](https://github.com/dylang/shortid)

如果你想要真正的蛞蝓并使用猫鼬，你可以尝试 mongoose-uniqueslus 模块。[https://github.com/punkave/mongoose-uniqueslugs.git](https://github.com/punkave/mongoose-uniqueslugs.git)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:07:33.627

1.  您应该使用 .htaccess 将所有流量重定向到 index.php
2.  在 index.php 上，您必须选择如何处理存储在`$_SERVER["REQUEST_URI"]`变量中的 url 结尾
3.  根据它的价值，你可以展示你想要的任何东西:)

注意：除非您在 .htaccess 中进行更多更改，否则绝对链接（例如[http://domain.com/index.php](http://domain.com/index.php) ）将继续有效。

# blackberry - 卸载/删除 App 时删除 Persistent Store 数据

> ID：15743380
> 
> 赞同：1
> 
> 时间：2013-04-01T12:20:48.853
> 
> 标签：blackberry, persistent, persistent-storage

我有一个 BlackBerry 应用程序，它在首次安装应用程序时启动（应用程序加载）并显示注册屏幕。稍后，应用程序将与主屏幕一起加载。注册屏幕仅在首次加载时出现。我通过将`boolean`值存储在`PersistentStore`. 如果该值存在，则不会出现注册屏幕。

```
PersistentStoreHelper.persistentHashtable.put("flagged",Boolean.TRUE);
PersistentStoreHelper.persistentObject.commit();
UiApplication.getUiApplication().pushScreen(new MyScreen()); 
```

我知道为了在删除/卸载应用程序时删除 Persistent Store，我必须使 Hashtable 成为我自己的子类，因此我在单独的类中声明了 Hashtable：

```
public class PersistentStoreHelper extends Hashtable implements Persistable{

    public static PersistentObject persistentObject;
    public static final long KEY = 0x9df9f961bc6d6daL;
    public static Hashtable persistentHashtable;

} 
```

然而，这并没有帮助，并且`boolean`flag 的值没有从`PersistentStore`. 请指教。

* * *

**编辑**：当我将上述**PersistentStoreHelper**类更改为

```
public static PersistentObject persistentObject =
    PersistentStore.getPersistentObject(KEY); 
```

并删除

```
PersistentStoreHelper.persistentObject = 
    PersistentStore.getPersistentObject(PersistentStoreHelper.KEY); 
```

从`boolean`正在保存值的 B 类中，我观察到`boolean`每次关闭应用程序时都会删除该值。这不应该发生，并且只有在应用程序被删除/卸载的情况下才应该删除该值。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:19:04.830

其工作方式是 BlackBerry OS 查看您存储在`PersistentStore`. 如果它识别出这些对象只能由您的应用程序使用，那么它将在您卸载应用程序时删除它们。但是，如果存储对象的类是其他应用程序使用的类，那么您的数据**不会**被删除。

你已经像这样声明了你的助手类：

```
public class PersistentStoreHelper extends Hashtable implements Persistable{ 
```

但助手类不是存储的内容。你的助手类只是一个*助手*，它为你存储其他东西。在您的情况下，它正在存储以下内容：

```
public static Hashtable persistentHashtable; 
```

但是，该对象是 type `java.util.Hashtable`，这是许多应用程序使用的类。因此，当您卸载您的应用程序时，它不会被删除。你应该做的是这样的：

```
public class PersistentStoreHelper implements Persistable {  // so inner class = Persistable

    public static PersistentObject persistentObject;
    public static final long KEY = 0x9df9f961bc6d6daL;
    /** 
      * persistentHashtable is now an instance of a class that
      * only exists in your app 
      */
    public static MyAppsHashtable persistentHashtable;

    private class MyAppsHashtable extends Hashtable implements Persistable {
        // don't need anything else ... the declaration does it all!
    }
} 
```

我在这里看不到它，但我假设你在某个地方有这个代码：

```
persistentObject = PersistentStore.getPersistentObject(KEY); 
```

然后当你想将数据保存回商店时，你正在做这样的事情；

```
persistentHashtable.put("SomeKey", someNewData);
persistentObject.setContents(persistentHashtable);
persistentObject.commit(); 
```

只是将数据添加到`persistentHashtable`并不会（永久）保存它。希望你已经在某个地方拥有了那部分。

* * *

**注意：**如果您进行了这些更改，不要指望这行代码可以工作，下次运行您的应用程序时：

```
persistentHashtable = (MyAppsHashtable)persistentObject.getContents(); 
```

因为您的代码的最后一个版本没有使用`MyAppsHashtable`该类，所以加载的数据不会是那种类型。这是第一次就做好这一点很重要的一个原因。一般来说，我总是把数据保存`PersistentStore`在一个顶级`Hashtable` *子类*中，实现`Persistable`. 我以后可能会更改其中的内容，但我永远不会更改该顶级存储对象的签名。希望您还没有发布您的应用程序。

* * *

**更新：** 针对您的评论/问题如下：

```
if (PersistentStoreHelper.persistentObject.getContents() == null) {   
    PersistentStoreHelper.persistentHashtable = new MyAppsHashtable();    
    PersistentStoreHelper.persistentObject.setContents(PersistentStoreHelper.persist‌entHashtable); 
} else { 
    PersistentStoreHelper.persistentHashtable = 
        (MyAppsHashtable)PersistentStoreHelper.persistentObject.getContents(); 
} 
```

# php - 长轮询 - 消息系统

> ID：15743388
> 
> 赞同：12
> 
> 时间：2013-04-01T12:21:22.123
> 
> 标签：php, long-polling

我正在考虑使用 jQuery 和 PHP 对消息系统进行一些长时间的轮询。我很想知道实现这一目标的最佳/最有效的方法。我基于这个[简单的长轮询示例](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)。

如果用户坐在收件箱页面上，我想拉入任何新消息。我看到的一个想法是`last_checked`在消息表中添加一列。PHP 脚本看起来像这样：

```
query to check for all null `last_checked` messages
if there are any...
while(...) {
    add data to array
    update `last_checked` column to current time
}
send data back 
```

我喜欢这个想法，但我想知道其他人对此有何看法。这是解决此问题的理想方法吗？任何信息都会有所帮助！

补充一点，网站上没有固定数量的用途，所以我正在寻找一种有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T08:33:05.613

是的，您描述它的方式是长轮询方法的一般工作方式。您的示例代码有点模糊，所以我想补充一点，您应该`sleep()`在循环内做一小段时间，`while`并且每次比较`last_checked`时间（存储在服务器端）和`current`时间（这是什么从客户端发送）。

像这样的东西：

```
$current = isset($_GET['timestamp']) ? $_GET['timestamp'] : 0;
$last_checked = getLastCheckedTime(); //returns the last time db accessed

while( $last_checked <= $current) {
    usleep(100000);
    $last_checked = getLastCheckedTime();
}

$response = array();
$response['latestData'] = getLatestData() //fetches all the data you want based on time
$response['timestamp'] = $last_checked;
echo json_encode($response); 
```

在您的客户端 JS 中，您将拥有以下内容：

```
function longPolling(){
        $.ajax({
          type : 'Get',
          url  : 'data.php?timestamp=' + timestamp,
          async : true,
          cache : false,

          success : function(data) {
                var jsonData = eval('(' + data + ')');
                //do something with the data, eg display them
                timestamp  = jsonData['timestamp'];
                setTimeout('longPolling()', 1000);
          },
          error : function(XMLHttpRequest, textstatus, error) { 
                    alert(error);
                    setTimeout('longPolling()', 15000);
          }     
       });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:30:13.857

而不是添加新列，`last_checked`您可以添加为`last_checked_time`. 这样您就可以将数据`last_checked_time`从`current_time`.

```
(i.e) DATA BETWEEN  `last_checked_time` AND `current_time` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T12:26:39.440

如果您只有一个用户，那很好。如果你不这样做，你会遇到并发症。通过这样做，您还将运行大量的 SELECT 查询。

一段时间以来，我一直坚信 PHP 和长轮询不能在本地工作，因为 PHP 没有任何跨客户端事件驱动的可能性。这意味着您需要每 2 秒/5 秒检查一次数据库，而不是依赖事件。

但是，如果您仍然想这样做，我会让您的消息传递系统在用户有消息时在目录中写入文件 [nameofuser].txt，并使用此触发器检查消息是否存在。如果文件存在且不为空，则触发获取消息、处理、反馈然后删除文本文件的请求。这将减少您的 SQL 开销，同时（如果您不小心的话）会增加您的磁盘 IO。

在结构方面，关联表是迄今为止最好的。创建一个专门用于检查状态的新表，包含三列：`user_id` `message_id` `read_at`. 用法应该很明显。任何不存在的组合都是未读的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T13:14:46.137

您可以创建一个名为：checked 的列，而不是创建名为 last_checked 的列。如果将所有消息保存在数据库中，则可以更新数据库中的字段。例子：

1.  用户 1 向用户 2 发送消息。
2.  PHP 使用长轮询系统接收消息并将消息保存在表格中。
3.  用户 2 在线时会向服务器发送信号，通知服务器用户 1 已准备好接收消息
4.  服务器检查表中所有未“检查”的消息并返回它们。

# java - 我想在我的手机上安装一个未签名的 apk 文件。该怎么办？

> ID：15743391
> 
> 赞同：5
> 
> 时间：2013-04-01T12:21:27.640
> 
> 标签：java, android, apk

我已经建立了一个应用程序。我通过 Eclipse APK 导出了它。

我有APK文件。我想把它寄给我爸爸（在另一个国家，所以不能做很多技术性的东西），这样他就可以安装它并查看我的进度？

如果没有在 Playstore 上获得开发帐户，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:24:53.523

You cannot install an unsigned application on a phone. Check out this link to see how to sign the application: [unsigned APK can not be installed](https://stackoverflow.com/questions/4835925/unsigned-apk-can-not-be-installed)

Edit: This is from Google's website: [http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

> All applications must be signed. The system will not install an application on an emulator or a device if it is not signed.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T12:26:06.683

您必须在设置中启用未签名应用程序的安装：

**设置 -> 应用程序 -> 未知来源（允许安装非市场应用程序）**

因此，您需要通过邮件或其他方式将文件发送给他，他需要进行设置修改并安装文件。

无需签署应用程序即可将其安装在手机上。如果您曾经在模拟器中运行此应用程序，`.apk`文件将自动在`\bin`您的项目文件夹的文件夹中创建。只需复制此文件/通过邮件发送给他安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:24:53.830

Your dad has to save the apk file in his device, so he will can open it.

After opening the application will can be installed.

So, send it by email, Dropbox, or other sharing service.

Your dad has to enable [installation from 'unknown sources'](http://www.androidcentral.com/allow-app-installs-unknown-sources).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:27:47.877

通过电子邮件将您的应用程序发送给您的父亲，并告诉他在以下设置后打开该 apk。[以这种方式签署](http://www.androiddevelopment.org/tag/apk/)您的应用程序。

![在此处输入图像描述](https://i.stack.imgur.com/xhE2O.png)

要在 Eclipse 中创建签名的 .apk：

在 Package Explorer 中选择项目，然后选择 File > Export。打开 Android 文件夹，选择导出 Android 应用程序，然后单击下一步。导出 Android 应用程序向导现在启动，它将指导您完成对应用程序进行签名的过程，包括选择用于签署 .apk 的私钥（或创建新的密钥库和私钥）的步骤。完成导出向导，您的应用程序将被编译、签名、对齐并准备好分发。”

[有关签名的更多信息](http://developer.android.com/tools/publishing/app-signing.html)

# c# - 在 mvvm 中的 Tap 事件上从 bing 地图获取位置

> ID：15743398
> 
> 赞同：3
> 
> 时间：2013-04-01T12:21:59.683
> 
> 标签：c#, windows-phone-7, mvvm, bing-maps

当我点击 bing 地图控件时，我正在尝试获取位置。我知道如何获得它，但我想在 ViewModel 中制作它。对于 Tap 事件，我使用交互。

```
<map:Map CopyrightVisibility="Collapsed" LogoVisibility="Collapsed">
            <map:MapTileLayer>
                <map:MapTileLayer.TileSources>
                    <customMap:OpenStreetTile />
                </map:MapTileLayer.TileSources>
            </map:MapTileLayer>
            <map:MapLayer>
                <map:Pushpin Location="{Binding Location}" />
            </map:MapLayer>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Tap">
                    <cmd:EventToCommand Command="{Binding AddPushpinCommand}" PassEventArgsToCommand="True" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </map:Map> 
```

我可以使用 GetPosition 函数从事件参数中获取位置。但是这个函数需要 UIElement 参数。我是这样做的：

```
var source = (e.OriginalSource as MapLayer).ParentMap;
        var point = e.GetPosition(source);
        Location = source.ViewportPointToLocation(point); 
```

但我不确定这是否是一个好的解决方案。你知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:25:34.440

好吧，您的方法确实有效，有时，足够好就足够了。;) 如果你想 100% 干净地使用你的 MVVM 实现，你应该避免引用视图（以及 MapLayer 类）。

Joost van Schaik 写了一篇博客文章，展示了如何使用行为来实现这一点（它适用于 Windows Phone 8，但我确信它也适用于 Windows Phone 7）：[http ://dotnetbyexample.blogspot.nl/2013/03 /simple-reverse-geocoding-with-windows.html](http://dotnetbyexample.blogspot.nl/2013/03/simple-reverse-geocoding-with-windows.html)

# linux - How to copy the file description when forking instead of sharing?

> ID：15743400
> 
> 赞同：1
> 
> 时间：2013-04-01T12:22:07.600
> 
> 标签：linux, unix, posix, fork, file-descriptor

When a process forks, the child will share with its parent the file description that was open before the forking.

Is there a way to make the child have its own copy of the file description (that includes the offset and the file status flag)?

I need that since I don't want both parent and child to share the same offset of the file; if one process has done a read, I don't want the offset of the file for the second process to be changed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:40:41.600

既有“打开文件描述符”又有“打开文件描述”。使用 打开文件时[`open()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html)，会同时创建文件描述符和文件描述。当一个文件描述符被复制（[`dup()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup.html)或[`dup2()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup2.html)）时，这两个描述符引用相同的打开文件描述。

上[`fork()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html)，父级中的文件描述符被复制（复制）到子级中；parent 和 child 中的描述符都指向相同的打开文件描述。

> *子进程应拥有自己的父文件描述符副本。每个子文件描述符都应与父文件描述符对应的打开文件描述相同。*

否则没有办法让它工作——您必须关闭并重新打开文件才能获得单独的打开文件描述。

# c# - Index was out of range in grid row command

> ID：15743401
> 
> 赞同：1
> 
> 时间：2013-04-01T12:22:08.717
> 
> 标签：c#, asp.net

I'd like to reach gridView a cell's value.But it gives the error is 'Index was out of range. Must be non-negative and less than the size of the collection. grid row command'

Can somebody help me?

```
 <asp:GridView ID="grdList" runat="server" AutoGenerateColumns="False"  GridLines="None"
            PageSize="5" AllowPaging="True" OnPageIndexChanging="Grd_Allergys_PageIndexChanging"
            OnRowCommand="grdList_RowCommand" OnRowDeleting="grdList_RowDeleting" OnRowEditing="grdList_RowEditing">
            <Columns>
                <asp:BoundField DataField="LangId" HeaderText="LangId" />
                <asp:BoundField DataField="LangName" HeaderText="LangName" />
                <asp:TemplateField HeaderText="Edit">
                    <ItemTemplate>
                        <asp:ImageButton ID="imgBtnEdit" runat="server" CommandName="Edit" CommandArgument='<%#Eval("LangId") %>'
                            ImageUrl="~/Image/edit.jpg" />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Delete">
                    <ItemTemplate>
                        <asp:ImageButton ID="imgBtnDelete" runat="server" CommandName="Delete" CommandArgument='<%#Eval("LangId")%>'
                            ImageUrl="~/Image/delete_icon.gif" OnClientClick="return confirm('Do you want to continue ?')" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
            <PagerSettings Mode="Numeric" />
        </asp:GridView>

 protected void grdList_RowCommand(object sender, GridViewCommandEventArgs e)
 {
        DBDataContext dc = new DBDataContext();

        if (e.CommandName == "Edit")
        {                       
           int rowIndex = int.Parse(e.CommandArgument.ToString());
           string LangName = grdList.DataKeys[rowIndex]["LangName"].ToString();                              
        }                    
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:29:37.237

您正在将其分配`LangId`并假设为`index`命令参数中的行。如果 id 大于行数，那么您应该超出范围`index`

*改变*

```
CommandArgument='<%#Eval("LangId")%>' 
```

*至*

```
CommandArgument='<%# ((GridViewRow) Container).RowIndex %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:05:57.740

你也没有设置`DataKeys` 。

添加`DataKeys="LangName"`到您的 GridView 定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T06:27:55.733

命令参数=`<%# Container.DisplayIndex %>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-04T22:52:24.853

我之前遇到过同样的问题，这是我找到的解决方案。

在**RowCommand**中，第一行必须是：

```
if (e.CommandName == "Page") return; 
```

# python - For loop python invalid syntax

> ID：15743407
> 
> 赞同：0
> 
> 时间：2013-04-01T12:22:49.247
> 
> 标签：python, list, loops, for-loop

i'm trying to run this loop in my program to calculate the average of H I need to calculate value's of 2 arrays for each element of those arrays and then add them up.

```
 Htot = 0
 for i in range (0, len(redshift)):
 H = ((300000*redshift[i])/(np.power(10, (appmag[i]-19.0+5)/5))
 Htot = Htot + H

 Hgem = Htot/len(redshift)
 print Htot 
```

But I get an invalid syntax error at Htot = Htot + H

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:23:43.733

You forgot to close a parenthesis on the previous line.

There are too many anyway, these are enough:

```
H = 300000 * redshift[i]  / np.power(10, (appmag[i] - 19.0 + 5) / 5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:45:17.673

您的代码中的问题在第 3 行，您没有关闭行尾的括号复制此代码并执行它

```
Htot = 0
for i in range (0, len(redshift)):
    H = (( 300000 * redshift[i] ) / ( np.power(10, (appmag[i] - 19.0 + 5) / 5) ))
    Htot = Htot + H
Hgem = Htot/len(redshift)
print Htot 
```

# python - Activating set_trace() selectively at runtime in pdb or sisters

> ID：15743408
> 
> 赞同：0
> 
> 时间：2013-04-01T12:22:54.830
> 
> 标签：python, debugging, pdb, pudb

In pdb/ipdb/pudb, is there a trick whereby I can selectively activate set_trace() statements during runtime?

I'm debugging somewhat complex code with probabilistic behavior, and I would like to interact with the program without the debugger distracting, and when a situation of interest arises, activate the set_trace/s. (This is combined with logging, but not relevant to the question).

I think might be possible to do this with conditionals, but is there a better way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T21:09:15.580

我认为没有这样的方法，因为 pudb （和其他调试器）只能无条件地 set_trace() 。

我不确定通过将条件移动到 set_trace() 本身来完成什么。如果那里有一些重复的代码，只需将其包装在一个函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-21T20:28:57.667

在 pudb 中，您可以设置断点，然后编辑断点以跳过给定次数或仅在给定条件下触发。

# paypal - how to send and receive back the user_id in the success link of payPal?

> ID：15743419
> 
> 赞同：0
> 
> 时间：2013-04-01T12:24:20.277
> 
> 标签：paypal

I'm confused with paypal sequences. I want to add in the website a donation paypal link "for members only" **it's my client demand** and I want to store in the db if the user have made a donation or not and how much. Now he is using in the website just the link [https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=6SENM6TBA5EPL](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=6SENM6TBA5EPL) so this means that he have an account on paypal and have created a button with this id "6SENM6TBA5EPL". what I know is that from the button config. in paypal site we can set cancel and success links,it's ok. But I want to send the user_id and receive it back from paypal as a variable on the success link if the donation is made.

So it's just to add another url variable like [https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=6SENM6TBA5EPL](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=6SENM6TBA5EPL)**&user_id=123**

or I can use the paypal form like this

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="user_id" value="123">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="6SENM6TBA5EPL">
<input type="image" src="https://www.paypalobjects.com/fr_FR/FR/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - la solution de paiement en ligne la plus simple et la plus sécurisée !">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:57:59.500

您可以使用自定义变量作为传递变量。然后，就获取信息而言，您可以通过 IPN、PDT 或使用 rm 变量将其返回。我在此论坛上发布了有关 IPN 和 PDT 的更多详细[信息](https://stackoverflow.com/questions/15651499/buy-now-button-return-url-update-field-in-database/15658981#15658981)。

```
<input type="hidden" name="custom" value="blah blah"> 
```

# ios - Issues with singleton

> ID：15743428
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:24:57.307
> 
> 标签：ios, objective-c, singleton

I have created a single ton like this for ARC,

```
+ (MyClass *)sharedInstance {
    static MyClass *sharedSpeaker = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedSpeaker = [[self alloc] init];
    });
    return sharedSpeaker;
}

- (id)init {
    if (self = [super init]) {

    }
    return self;
} 
```

But here I am creating instances like this:

```
id speaker3 = [[MyClass alloc] init];
id speaker = [MyClass sharedInstance];
id speaker2 = [[MyClass alloc] init];
NSLog(@"Speaker 1= %@ \n speaker 2 = %@\n Speaker3 = %@",speaker,speaker2,speaker3);` 
```

I got output as:

```
Speaker 1= <MyClass : 0xa45f5e0> 
speaker 2 = <MyClass : 0xa461740>
Speaker3 = <MyClass : 0xa4529e0> 
```

This is looking like a desired behaviour. How to stop this when I am giving singleton in library to user. I need to block him from creating new instance. Do I need to make static global if I make it global he cant create the global variable of the same name there will be conflict right. So any memebers can give solution on this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:34:36.913

例如在`init`方法中使用断言。

```
- (id)init {
    static int maxInstances = 1;

    assert(maxInstances > 0);

    maxInstances--;

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:31:27.680

因为您正在使用`alloc`,创建单例类的新实例`init`。

您将使用**`sharedInstance`类方法获得单例实例。**喜欢：

```
id speaker = [MyClass sharedInstance]; 
```

如果您不想使用`alloc`或创建实例`init`。覆盖这些方法。

您可以编写`static MyClass *sharedSpeaker = nil;`为静态全局变量并将其从`sharedInstance`方法中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:15:47.597

```
create instance like this it will always return you singlton

static testSinglton *myinstance = nil;
+ (testSinglton *) sharedInstance {
    if (!myinstance) {
        myinstance = [[testSinglton alloc] init];
    }
    return myinstance;
}

- (id) init {

    if (myinstance) {
        return myinstance;
    }
    if (self = [super init]) {
        //new object now will be created...
        myinstance = self;
    }
    return self;
}

 NSLog(@"%@",[[testSinglton alloc] init]);
 NSLog(@"%@",[testSinglton sharedInstance]);
 NSLog(@"%@",[[testSinglton alloc] init]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:56:08.147

在 .h 文件中

```
 #import <Foundation/Foundation.h>

    @interface Singleton : NSObject 
    {
            ///......
    }

    + (Singleton *)sharedSingleton; 
```

在 .m 文件中

```
 #import "Singleton.h"

    @implementation Singleton
    static Singleton *singletonObj = NULL;

    + (Singleton *)sharedSingleton 
    {
            @synchronized(self) 
            {
                    if (singletonObj == NULL)
                            singletonObj = [[self alloc] init];
            }
            return(singletonObj);
    } 
```

并在另一个文件中使用它

```
 #import "Singleton.h"
    //.....

    Singleton *sinObj =  [Singleton sharedSingleton];   // not alloc and init. use direct 
```

# jqgrid - jqGrid - 表单编辑问题

> ID：15743432
> 
> 赞同：0
> 
> 时间：2013-04-01T12:25:23.230
> 
> 标签：jqgrid, form-editing

在内联编辑中，在进行编辑之前，它会在内部创建一个数组 ( `savedRow`) 并用可编辑字段的值填充它，这样我就可以访问这些值。

我想知道在表单编辑中是否有类似的东西，因为我需要在编辑完成之前访问字段的值，以便在字段“保存”在数据库中之前进行验证。

有人可以帮助我吗？

* * *

**编辑：**

我在这里发布了我的代码的一部分（一个字段的代码），并且我正在尝试以两种方式进行验证（内联编辑和表单编辑）。对于*内联编辑*，我正在验证使用`dataEvents`，并且我正在使用`savedRow`它来访问尚未存储的数据。但是，由于使用了 savedRow，当我尝试使用表单编辑进行编辑时，它向我显示了一个错误：`savedRow is not defined`. 在这个领域的情况下，`editrules`适合我想做的事情，但我不知道这是否会发生在所有这些领域。

```
{ name: 'ac_fd', index: 'ac_fd', width: 50, editable: true,
  formatter: 'number', editrules: { number:true, required:true, minValue: 0.1,
  maxValue: 1.0 }, formatoptions: { decimalPlaces: 1, decimalSeparator: '.'},
     editoptions: {
        dataEvents: [ {
           type: 'blur', fn: function(e) {                        
              var savedrow  = $("#list").getGridParam('savedRow');
              console.log($(this).val());
              if($(this).val() != savedrow[0]['ac_fd']) {         
                 var eid='#' + savedrow[0]['id'] + '_ac_fd';   
                 var val_fd=$(this).val();
                 var fd_min=0.1;
                 var fd_max=1.0;

                 if( isNaN(val_fd) || val_fd > fd_max || val_fd < fd_min) {
                       setTimeout(function(){
                       $(eid).focus().select();
                    },600);

                    $(eid).qtip({
                       content: {
                          text: 'Fator de Demanda deve ser um <b>número</b>
                                 entre <b>' + fd_min.toFixed(1) + '</b> e <b>'
                                 + fd_max.toFixed(1) + '</b>.',
                          title: {
                             text: 'Atenção:',
                             button: true
                          }
                       },
                       show: {
                          event: false,

                          ready: true,

                          effect: function() {
                             $(this).stop(0, 1).fadeIn(400);
                          },

                          delay: 0,
                                                     },
                       hide: {
                          event: false,

                          effect: function(api) {
                             $(this).stop(0, 1).fadeOut(900).queue(function() {
                                 api.destroy();
                             });
                          },
                       },
                       style: {
                          classes: 'qtip-red qtip-rounded trif_tip_err',
                          tip: {
                             width: 10,
                             height:12
                          } 
                       },
                       position: {
                          my: 'bottom left',  
                          at: 'top center',
                       },

                       events: {
                          render: function(event, api) {
                             tip_timer.call(api.elements.tooltip, event);
                          }
                       }
                    });  

                 }       
              }        
           }           
        } ]            
     }                   
  }, 
```

所以如果`dataEvents`是常见的并且用于三种编辑形式，我在哪里可以进行这种类型的验证（也使用 qtip，我希望这种验证也用于内联编辑）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:18:32.347

jqGrid之所以在interval`savedRow`参数中保存编辑行，是因为jqGrid就地*修改*了编辑行。只是因为内联编辑和单元格编辑使用间隔`savedRow`参数。表单编辑在编辑完成之前不会修改原来的网格行。因此`savedRow`表单编辑不使用任何参数。

如果表单已关闭或服务器响应将包含一些错误 HTTP 代码，则用户输入的新数据将不会保存在网格中。所以简单的服务器端验证通常就足够了。如果你想实现额外的客户端验证，你可以使用[editrules](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#editrules)功能。[自定义验证](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#custom_checking_example)通常就足够了。它可以帮助验证表单的一个字段。如果您需要在验证期间比较表单的多个字段（如果一个字段的值定义了另一个字段的有效值），则另外使用[beforeCheckValues](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#events)回调。

**更新**：在`fn`事件处理程序内部，您可以测试它是否会在表单编辑内部被调用。有很多方法可以做到这一点。例如，您可以测试`$(e.target).closest(".FormGrid").length > 0`. 如果它是真的，那么事件就在形式之内。此外，重要的是要了解当前编辑行在*服务器上成功保存之前不会更改*。因此，您可以随时`getGridParam`使用`"selrow"`选项来获取编辑行的 id，您可以使用`getRowData`或`getCell`在修改开始之前从网格中获取数据（与 相同`savedrow`）。

# php - python how to write data into a single file with different call

> ID：15743434
> 
> 赞同：0
> 
> 时间：2013-04-01T12:25:24.237
> 
> 标签：php, python, http

I have a python script and a PHP page on my website. I have to create a csv file and write the data onto it in following manner-

PHP processes the `GET` requests and calls the python script by `shell_exec`, passing the `GET` variables into it, is JSON format. The script here looks like-

```
...
$var_a = $_GET['a'];
$var_b = $_GET['b'];
$var_c = $_GET['c'];
$post_data = array('item' => 'get-list',
    'var a' => "$var_a",
    'var b' => "$var_b",
    'var c' => "$var_c"
    );
$json_data = json_encode($post_data);
$temp = shell_exec('python process_data.py "' . $json_data .'"');
echo $temp;
... 
```

This script is quite straight forward, which does simply collects the `GET` variables and forms `JSON` object of it. Now this data is passed to `process_data.py`, which processes the data and saves the data into a csv file, the code for which is-

```
import sys, json, time, csv
json_data = json.dumps(sys.argv[1])
def scr(json_data):
    json_data = json_data
    count = 0
    json_list = json_data.split(',')
    for i in json_list:
        count=count+1
    if(count==5):
        lati = json_list[0].strip('{')
        longi = json_list[1]
        datestmp = json_list[2]
        timestmp = json_list[3]
        out = open('file.csv', 'w')
        out.write('%s;' % lati.split(':')[1])
        out.write('\n')
        out.write('%s;' % longi.split(':')[1])
        out.write('\n')
        out.write('%s;' % datestmp.split(':')[1])
        out.write('\n')
        out.write('%s;' % timestmp.split(':',1)[1])
        out.write('\n')
        out.close()
        print 'Latitude: ',lati.split(':')[1],', Longitude: ',longi.split(':')[1],', Datestamp: ',datestmp.split(':')[1],', Time: ', timestmp.split(':',1)[1]
    else:
        print 'Wrong data received'

scr(json_data) 
```

All the things are working well. The data is processed and saved. The PHP script also saves the current data into database. So PHP does two operations- 1\. Saves the data into database 2\. Pass the data to python script which saves the data into CSV file.

However, the `GET` data is coming at regular time-interval(say 1 or 2 seconds). So, the call to Python file gets regular for these intervals. It will have to open the CSV file every 1-2 seconds, write the data there. This will slow down the processing.

I want the CSV file to remain open till the data is coming, and close it when the `GET` request is not made for a long time. Is there any way to do so?

# javascript - 使用 Javascript/Jquery 访问 JSON 元素

> ID：15743440
> 
> 赞同：1
> 
> 时间：2013-04-01T12:25:56.817
> 
> 标签：javascript, jquery, html, json

我是 JSON、WebDevelopment、Javascript 的新手……

我有以下 JSON 文件

```
 {
                "component": "A",
                "status": 0,
                "children": [
                    {
                        "component": "AA",
                        "status": 0,
                        "children": [
                            {
                                "component": "AAA",
                                "status": 0,
                                "children": []
                            },
                            {
                                "component": "AAB",
                                "status": 0,
                                "children": []
                            }
                        ]
                    },
                    {
                        "component": "AB",
                        "status": 0,
                        "children": [
                            {
                                "component": "ABA",
                                "status": 0,
                                "children": []
                            },
                            {
                                "component": "ABB",
                                "status": 0,
                                "children": []
                            }
                        ]

                    }
                ]
            } 
```

我需要使用 Javascript/Jquery 阅读它，然后显示它。稍后我应该开发代码，用于在网页上单击“组件 A”，应显示其下的组件列表等等。根据状态变量，将为显示的组件分配颜色（以像盒子或其他东西的图​​像）

我写了以下代码：

```
 <html>
            <head>                   
            <title>Demo</title>
            </head>
            <body>

                <script src="jquery-1.9.1.min.js"></script>
                <script src="jquery-1.9.1.js"></script>
                <script>

                $(document).ready(function() {
                var myItems;

                $.getJSON('jsonfile.json', function(data) {

                 JSONArray children = jsonfile.getJSONArray("children");

                });
            });
                </script>
            </body>
            </html> 
```

首先，什么是类似于 getJSONArray()、getJSONObject() 等 JSON 的 java 函数的 javascript 等价物其次，关于我如何使用 API 等打印详细信息的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:51:50.337

`please show the syntax of $.each in this context`

```
var result = $('#result');
$.each(obj.children, function(i, v){
    result.append('<div>' + i + ' - ' + v.component + '</div>');
}); 
```

演示：http: [//jsfiddle.net/LbJBm/](http://jsfiddle.net/LbJBm/)

文档：[jQuery.each()](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:29:35.713

```
var response            =   JSON.stringify(jsonvar);
response                =   JSON.parse(response); 
```

`response.componet`将为您提供 A ，因此您可以访问 hte 元素。

# javascript - 如何使 div 在单击时隐藏并使其在再次单击时显示？

> ID：15743441
> 
> 赞同：1
> 
> 时间：2013-04-01T12:25:57.623
> 
> 标签：javascript, jquery, if-statement, document-ready

我有这个代码：

```
<script>
(function ($) {
    $(document).ready(function () {
        $("#thisclick, #thisclick2").click(function () {
            if ($('.example').is(":hidden")) {
                $(this).html($(this).html().replace(/Hide/, 'Show'));
            } else {
                $(this).html($(this).html().replace(/Show/, 'Hide'));
            }
            // Do it afterwards as the operation is async
            $(".example").hide();
        });
    });
})(jQuery);
</script> 
```

当前代码的工作方式是，如果`#thisclick`单击它会隐藏`#example`。这是我需要的，但是当`#thisclick`再次单击时我希望它显示`#example`。使用上面的代码，它不会工作。我必须做什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:36:44.200

您应该能够将代码更改为如下所示以使其正常工作：

```
(function ($) {
    $(document).ready(function() {
    $("#thisclick").click(function () {
        $("#example").slideToggle("slow");
        });
    });
})(jQuery); 
```

这是一个快速示例的链接：http: [//jsfiddle.net/andyjmeyers/szmXp/](http://jsfiddle.net/andyjmeyers/szmXp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:40:35.480

你期待像

```
<button>This click</button>
<p style="display: none">Example</p>

<script>
$("button").click(function () {
$("p").toggle();
});
</script> 
```

请在[http://jsfiddle.net/X5r8r/1107/上查看](http://jsfiddle.net/X5r8r/1107/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:31:02.130

```
<script>
    (function ($) {
          $(document).ready(function() {
          $("#thisclick").click(function () {
             if ($('#example').is(":hidden")) {
                 $(this).html($(this).html().replace(/Hide/, 'Show'));

             } else {
                 $(this).html($(this).html().replace(/Show/, 'Hide'));
             }
             // Do it afterwards as the operation is async
             $("#thisclick").slideToggle("slow");
             if($("#example").attr("isHidden") == "1")
                  $("#example").slideToggle("slow");
             $("#example").attr("isHidden","1");
          });
      });
        })(jQuery);
        </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:33:22.230

你可以这样做：

```
$("#thisclick").click(function () {
   if ($('#example').hasClass("hidden"))
   {
      $('#example').removeClass("hidden");
      $('#example').show();
   }
   else
   {
      $('#example').addClass("hidden");
   }
} 
```

或更容易：

```
$("#thisclick").click(function () {
   $('#example').toggleClass("hidden");
} 
```

定义风格”：

```
.hidden
 { display:none;} 
```

# bash - bash：路径中的撇号

> ID：15743442
> 
> 赞同：2
> 
> 时间：2013-04-01T12:25:58.153
> 
> 标签：bash, path, escaping

在 Mac OS X (bash 4.2) 上，我尝试 cd 进入路径中带有撇号的文件夹：

```
cd "~/Documents/study/new/Beej's Guide to Unix IPC_code/examples" 
```

然后我得到了

```
-bash: cd: ~/Documents/study/new/Beej's Guide to Unix IPC_code/examples: No such file or directory 
```

我还尝试像这样转义撇号：

```
cd "~/Documents/study/new/Beej\'s Guide to Unix IPC_code/examples" 
```

结果：

```
-bash: cd: ~/Documents/study/new/Beej\'s Guide to Unix IPC_code/examples: No such file or directory 
```

唯一对我有用的是在没有双引号的情况下很难避开空格和撇号，如下所示：

```
cd ~/Documents/study/new/Beej\'s\ Guide\ to\ Unix\ IPC_code/examples 
```

在这种情况下，有没有办法完全避免硬转义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T15:18:58.237

波浪号 ( `~`) 不会在引号内展开，因此您需要将其留在引号外。这些中的任何一个都可以：

```
cd ~/"Documents/study/new/Beej's Guide to Unix IPC_code/examples"
cd ~/Documents/study/new/"Beej's Guide to Unix IPC_code"/examples
cd ~/Documents/study/new/Beej"'s Guide to Unix "IPC_code/examples 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:02:16.637

你有哪个版本的 bash？就像@MaxLeske 所说，它适用于版本 3.2.48 的自动完成功能。

删除双引号内的波浪号 (~) 字符。而是给出一个完整的路径。

```
cd "/Users/<uname>/Documents/study/new/Beej's Guide to Unix IPC_code/examples" 
```

# sql - 如何加快我的 SQL 查询

> ID：15743443
> 
> 赞同：1
> 
> 时间：2013-04-01T12:25:58.437
> 
> 标签：sql, sql-server, performance, runtime

我目前正在运行此查询：

```
SELECT  Time_ID,
    Site_Type_ID,
    Abandoned_ID,
    WorkType_ID,
    SUM (staging.dbo.incoming_measure.ring_time) AS Ring_Time,
    SUM (staging.dbo.incoming_measure.hold_time) As Hold_Time,
    SUM (staging.dbo.incoming_measure.talk_time) AS Talk_Time,
    SUM (staging.dbo.incoming_measure.acw_time) AS ACW_Time,
    COUNT(*) CallCount
FROM incoming_measure
INNER JOIN DataMartEnd.dbo.Time_Dim 
        ON incoming_measure.StartTimeDate BETWEEN Time_Dim.Time_Start and 
                                                  Time_Dim.Time_End
INNER JOIN datamartend.dbo.Site_Type_Dim 
        ON incoming_measure.DBID = Site_Type_Dim.Site_Type_Code
INNER JOIN datamartend.dbo.Abandoned_Call_Dim 
        ON incoming_measure.Abandoned = Abandoned_Call_Dim.abandoned_value
INNER JOIN DataMartEnd.dbo.Work_Type_Dim 
        ON incoming_measure.DBID = work_type_dim.MIG_Site_ID AND
           Work_Type_Dim.Work_Type_Code = incoming_measure.Queue AND
           incoming_measure.StartTimeDate BETWEEN Work_Type_Dim.DimEffectiveStartDtm AND
                                                  Work_Type_Dim.DimEffectiveEndDtm
group by time_id, Site_Type_ID, Abandoned_ID, WorkType_ID 
```

它返回正确的结果，但运行大约需要 8 分钟，我只是想知道是否有人对我如何加快查询有任何建议？主要问题是如果这是我必须向客户展示最终结果的项目的一部分，并且我只能展示 10 分钟（大学规则），并且此查询约占项目的 30%。

估计执行的大部分是 SORT，占 57%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:45:33.623

如果这样重写，您*可能会发现查询的性能更好：*

```
SELECT
    Time_ID,
    Site_Type_ID,
    Abandoned_ID,
    WorkType_ID,
    SUM (im.ring_time) AS Ring_Time,
    SUM (im.hold_time) As Hold_Time,
    SUM (im.talk_time) AS Talk_Time,
    SUM (im.acw_time) AS ACW_Time,
    COUNT(*) CallCount
FROM incoming_measure im
INNER JOIN DataMartEnd.dbo.Time_Dim td
        ON dateadd(mi,
                   15*floor(datediff(mi,
                                     dateadd(dd, datediff(dd,0,im.StartTimeDate), 0),
                                     im.StartTimeDate ) / 15),
                   dateadd(dd, datediff(dd,0,im.StartTimeDate), 0) 
                  ) = td.Time_Start
INNER JOIN datamartend.dbo.Site_Type_Dim std
        ON im.DBID = std.Site_Type_Code
INNER JOIN datamartend.dbo.Abandoned_Call_Dim acd
        ON im.Abandoned = acd.abandoned_value
INNER JOIN DataMartEnd.dbo.Work_Type_Dim wtd
        ON im.DBID = wtd.MIG_Site_ID AND
           im.Queue = wtd.Work_Type_Code AND
           im.StartTimeDate BETWEEN wtd.DimEffectiveStartDtm AND wtd.DimEffectiveEndDtm
group by time_id, Site_Type_ID, Abandoned_ID, WorkType_ID 
```

- 以便时间维度连接在一个等于值上，而不是连接在一个值范围之间的值上。

如果这不能显着提高性能，那么我建议在现有查询上创建索引视图，并从索引视图中选择作为新查询 - 您可以在此处找到有关创建索引视图[的更多信息，同时在](http://msdn.microsoft.com/en-us/library/ms187864%28v=sql.90%29.aspx)[此处](http://sqlheaven.blogspot.co.uk/2011/06/indexed-view-limitations.html)提供有关其限制的一些信息.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:10:35.070

我认为性能问题是由于以下连接造成的：

```
FROM incoming_measure
INNER JOIN DataMartEnd.dbo.Time_Dim 
        ON incoming_measure.StartTimeDate BETWEEN Time_Dim.Time_Start and 
                                                  Time_Dim.Time_End 
```

什么是颗粒度`Time_Dim`？的粒度是`StartTimeDate`多少？名称表明一个以天为单位，另一个以小时、分钟或秒为单位。这可能会导致匹配许多其他记录。

如果您有时间维度，为什么要存储常规日期？如果您有数据库日期时间，为什么要使用时间维度表？

此外，您应该给每个表一个可读的别名。试图找出类似的东西：

```
SUM (staging.dbo.incoming_measure.ring_time) AS Ring_Time, 
```

比：

```
SUM (im.ring_time) AS Ring_Time, 
```

哪里`im`是`incoming_message`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:01:27.130

试试这个可能对你有帮助。

```
SELECT * FROM 
(SELECT  
ROW_NUMBER() OVER( PARTITION BY time_id, Site_Type_ID, Abandoned_ID, WorkType_ID ORDER BY time_id) No,
Time_ID,
    Site_Type_ID,
    Abandoned_ID,
    WorkType_ID,
    SUM (staging.dbo.incoming_measure.ring_time) OVER( PARTITION BY time_id, Site_Type_ID, Abandoned_ID, WorkType_ID) AS Ring_Time,
    SUM (staging.dbo.incoming_measure.hold_time) OVER( PARTITION BY time_id, Site_Type_ID, Abandoned_ID, WorkType_ID) As Hold_Time,
    SUM (staging.dbo.incoming_measure.talk_time) OVER( PARTITION BY time_id, Site_Type_ID, Abandoned_ID, WorkType_ID) AS Talk_Time,
    SUM (staging.dbo.incoming_measure.acw_time) OVER( PARTITION BY time_id, Site_Type_ID, Abandoned_ID, WorkType_ID) AS ACW_Time,
    COUNT(1)  OVER( PARTITION BY time_id, Site_Type_ID, Abandoned_ID, WorkType_ID) CallCount
FROM incoming_measure
INNER JOIN DataMartEnd.dbo.Time_Dim 
        ON incoming_measure.StartTimeDate BETWEEN Time_Dim.Time_Start and 
                                                  Time_Dim.Time_End
INNER JOIN datamartend.dbo.Site_Type_Dim 
        ON incoming_measure.DBID = Site_Type_Dim.Site_Type_Code
INNER JOIN datamartend.dbo.Abandoned_Call_Dim 
        ON incoming_measure.Abandoned = Abandoned_Call_Dim.abandoned_value
INNER JOIN DataMartEnd.dbo.Work_Type_Dim 
        ON incoming_measure.DBID = work_type_dim.MIG_Site_ID AND
           Work_Type_Dim.Work_Type_Code = incoming_measure.Queue AND
           incoming_measure.StartTimeDate BETWEEN Work_Type_Dim.DimEffectiveStartDtm AND
                                                  Work_Type_Dim.DimEffectiveEndDtm
                                                 ) AS T1 WHERE No = 1 
```

或者

```
SELECT  Time_ID,
    Site_Type_ID,
    Abandoned_ID,
    WorkType_ID,
    SUM (staging.dbo.incoming_measure.ring_time) AS Ring_Time,
    SUM (staging.dbo.incoming_measure.hold_time) As Hold_Time,
    SUM (staging.dbo.incoming_measure.talk_time) AS Talk_Time,
    SUM (staging.dbo.incoming_measure.acw_time) AS ACW_Time,
    COUNT(1) CallCount
FROM incoming_measure
INNER JOIN DataMartEnd.dbo.Time_Dim 
        ON incoming_measure.StartTimeDate BETWEEN Time_Dim.Time_Start and 
                                                  Time_Dim.Time_End
INNER JOIN datamartend.dbo.Site_Type_Dim 
        ON incoming_measure.DBID = Site_Type_Dim.Site_Type_Code
INNER JOIN datamartend.dbo.Abandoned_Call_Dim 
        ON incoming_measure.Abandoned = Abandoned_Call_Dim.abandoned_value
INNER JOIN DataMartEnd.dbo.Work_Type_Dim 
        ON incoming_measure.DBID = work_type_dim.MIG_Site_ID AND
           Work_Type_Dim.Work_Type_Code = incoming_measure.Queue AND
           incoming_measure.StartTimeDate BETWEEN Work_Type_Dim.DimEffectiveStartDtm AND
                                                  Work_Type_Dim.DimEffectiveEndDtm
group by time_id, Site_Type_ID, Abandoned_ID, WorkType_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:14:19.787

您需要以下字段的索引：

```
Time_Dim.Time_ID

incoming_measure.DBID
incoming_measure.Queue
incoming_measure.Abandoned
incoming_measure.StartTimeDate

Site_Type_Dim.Site_Type_ID
Site_Type_Dim.Site_Type_Code

Abandoned_Call_Dim.Abandoned_ID
Abandoned_Call_Dim.abandoned_value

Work_Type_Dim.WorkType_ID
Work_Type_Dim.Work_Type_Code
work_type_dim.MIG_Site_ID 
```

我不完全确定索引中字段的顺序，因此您可能需要进行试验，但我建议：

```
create index Time_Dim_Time_ID on Time_Dim (Time_ID)
create index incoming_measure_index on (DBID, Queue, Abandoned, StartTimeDate)
create index Site_Type_index on Site_Type_Dim (Site_Type_ID, Site_Type_Code)
create index Abandoned_Call_index on Abandoned_Call_Dim (Abandoned_ID, abandoned_value)
create index Work_Type_index on Work_Type_Dim (WorkType_ID, Work_Type_Code, MIG_Site_ID) 
```

# android - 如何动态地将项目添加到 Android 中的 ListView？

> ID：15743445
> 
> 赞同：0
> 
> 时间：2013-04-01T12:26:00.937
> 
> 标签：android, listview

我正在使用自定义适配器来显示 ListView。

它工作正常。

但我需要向 ListView 添加三个项目。如何添加它们并让它们显示？

我尝试`notifydatasetchanged()`了不起作用的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:34:42.243

您必须使用 将项目添加到列表中，`list.add(...)`然后使用 告诉适配器`adapter.notifyDataSetChanged()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:36:19.527

要将项目添加到列表视图中，您必须使用 List/ArrayList 对象。使用它，您可以对列表视图项数据执行添加/编辑/删除操作，并将此列表设置到您的适配器中，以从列表/数组列表中获取数据并设置到列表项中。

好的，现在假设我有 listview 并且想要添加新项目只需将项目添加到 list/arraylist 对象中并像这样通知适配器

```
List<String> myList = new ArrayList<String>();
ArrayAdapter<String> adapter;

oncreate(){
   // initi listview, adapter and set the myList object into adapter object and then set the adapter into listview

}

// on button click from somewhere
public void onClick(View view){
    myList.add("hello friends");// you can add your data here into list object
    adapter.notifyDataSetChanged();
} 
```

# c# - 调整 Visio 2013 上下文菜单

> ID：15743451
> 
> 赞同：0
> 
> 时间：2013-04-01T12:26:26.483
> 
> 标签：c#, visio, visio2013

是否可以从 Visio 2013 的上下文菜单中禁用某些功能以进行 visio 控制？

我想删除用于绘制和更改形状的按钮，因为我只想在我的 visioControl 中使用特定的形状。

![在此处输入图像描述](https://i.stack.imgur.com/e179C.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:11:56.780

找到了替换形状按钮的解决方案。我可以将[PageLockReplace](http://msdn.microsoft.com/library/office/jj228446.aspx)属性设置`pageSheet`为`TRUE`：

```
visioControl1.Document.Pages[1].PageSheet.Cells["PageLockReplace"].FormulaU = "TRUE"; 
```

# .net - 在 .NET Web 应用程序中实现不受信任的插件

> ID：15743452
> 
> 赞同：13
> 
> 时间：2013-04-01T12:26:27.913
> 
> 标签：.net, plugins, architecture, add-in

我想开发一个接受来自用户社区的插件的应用程序，类似于 Chrome 或 Firefox 的做法。这将是一个 Web 应用程序，因此单个用户的应用程序的每个“实例”都将运行不同的插件（插件将作为单例实例加载，但仅对某些用户是“活动的”）。我计划在 .NET 中实现该应用程序，并尝试为插件模型提出一个体系结构。

这是我想要的属性：

*   插件完全构建在我的核心应用程序之外，作为单独的程序集。
*   插件在它们自己的“锁定”、低信任环境中运行。可能是一个单独的 AppDomain。
*   插件只能通过我提供的 API 起作用。例如，我会将某种外观作为接口传递给它们，它们只能调用它，而不能调用任何其他程序集。我不能拥有可以在 Web 服务器上任意执行操作的插件，例如影响文件系统。
*   插件中的致命崩溃不会影响核心应用程序的稳定性。

似乎 System.AddIn 是我最好的选择，但我不清楚如何强制加载的插件仅通过我提供的 API 工作，而不加载任何其他程序集。System.AddIn 是否提供该功能？另外，System.AddIn 可以与 ASP.NET / IIS 一起使用吗？

除了 System.Addin，我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:55:58.550

看起来您主要关心的是隔离（为了安全性和稳健性）。

因此，您最好的选择是在单独的 AppDomain 中激活您的插件。在此域中，您可以控制允许加载的程序集（请参阅 AppDomainSetup 类）。

您的主代码也将受到保护，不会在插件内发生任何不愉快的事情：所有插件方法都必须使用核心对象的副本（除非您传递的对象是从 MarshalByRefObject 继承的，在这种情况下，所有的赌注都是关闭的）。插件方法中的异常可以通过将所有调用包装在 try except 中，或者通过 AppDomain 的 UnhandledExcption 事件来处理。

请记住，跨越 AppDomain 边界会降低性能。该呼叫本质上是一个远程呼叫。

另一个潜在的问题是您打算如何管理 AppDomain。我从未尝试在一个进程中创建多个 AppDomain，但我预计会遇到麻烦。为单个域中的多个用户组合插件将挑战您尝试构建的保护

作为对@RationalGeek 问题的回应 - [UnhandledException 事件](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)允许这样做 - 有点。您可以在核心域和插件域中订阅此事件，但这样做存在很多不确定性 - 请参阅我引用的文章了解更多详细信息。可能更好的选择是将对 API 的每次调用包装在 try/except 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:48:51.797

您可以尝试使用 AppDomains 并处理未处理的异常。为避免 appdomain 崩溃，您必须处理[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

在上面的链接中，请注意以下语句

*从 .NET Framework 4 开始，不会针对破坏进程状态的异常（例如堆栈溢出或访问冲突）引发此事件，除非事件处理程序是安全关键的并且具有 HandleProcessCorruptedStateExceptionsAttribute 属性。*

因此，您可能需要显式处理一些配置。

我读过很多问题，声称当子域中的不同线程上发生未处理的异常时，会冒泡并关闭父域。如果是这样，那么将所有插件加载到一个单独的进程中，每个插件都有一个 appdomain 或将插件加载到单独的进程中可能是可取的。

我还遇到了关于 SO 的以下问题，我相信您会觉得很有帮助

*   [寻找沙盒 .NET 插件的实用方法](https://stackoverflow.com/q/4145713/1012641)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T20:20:02.960

为什么不直接使用反射并在运行时发现可用的插件呢？Assembly.LoadFile 获取程序集，GetExportedTypes 获取您的对象使用 Activator.CreateInstance 创建实例

然后只需在 try 循环中运行插件，以确保它不会影响系统。尽管您将需要一些重要的架构来提供实际的稳定性。

除非您有复杂的插件管理场景，否则请远离 MEF。如果它只是允许用户使用他们的并包括你自己的一些，那就使用反射。

# backup - DynamoDB - 如何进行增量备份？

> ID：15743454
> 
> 赞同：8
> 
> 时间：2013-04-01T12:26:35.540
> 
> 标签：backup, amazon-dynamodb

我正在使用具有针对应用程序用例优化的键和吞吐量的 DynamoDB 表。为了支持其他临时管理和报告用例，我想在 S3 中保留一个完整的备份（一天前的备份是可以的）。同样，我无法扫描整个 DynamoDB 表来进行备份。我拥有的钥匙不足以找出什么是“新的”。如何进行增量备份？我是否必须修改我的 DynamoDB 架构，或者添加额外的表才能做到这一点？有什么最佳实践吗？

**更新**： [DynamoDB Streams](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.html)解决了这个问题。

> DynamoDB Streams 在任何 DynamoDB 表中捕获按时间排序的项目级修改序列，并将此信息存储在日志中长达 24 小时。应用程序可以访问此日志，并以近乎实时的方式查看修改前后出现的数据项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T13:34:03.850

我看到两个选项：

1.  生成当前快照。您必须阅读表格才能执行此操作，您可以以非常慢的速度执行此操作以保持在您的容量限制（[扫描](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_Scan.html)操作）之下。然后，在内存中保留在一段时间内执行的更新列表。你可以把这些放在另一张桌子上，但你也必须阅读这些，这可能会花费同样多的钱。这个时间间隔可以是一分钟、10 分钟、一个小时，无论您在应用程序退出时是否愿意丢失。然后，定期从 S3 获取快照，在快照上重放这些更改，然后上传新快照。我不知道你的数据集有多大，所以这可能不切实际，但我已经看到这对于高达 1-2GB 的数据集非常成功。

2.  每天使用完整扫描增加读取吞吐量并备份您的数据。您说您负担不起，但不清楚您的意思是为容量付费，还是扫描会耗尽所有容量并且应用程序将开始失败。从 DynamoDB 中提取数据的唯一方法是读取数据，无论是强一致性还是最终一致性。如果备份是您业务需求的一部分，那么我认为您必须确定它是否值得。您可以通过检查`ConsumedCapacityUnits`结果的属性来自动限制您的阅读。Scan 操作有一个 Limit 属性，您可以使用它来限制每个操作中读取的数据量。Scan 还使用最终一致性读取，其价格是强一致性读取的一半。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-06T01:10:29.197

您现在可以使用 dynamoDB 流将数据持久化到另一个表中或在另一个数据存储中维护另一个数据副本。

[https://aws.amazon.com/blogs/aws/dynamodb-streams-preview/](https://aws.amazon.com/blogs/aws/dynamodb-streams-preview/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-07T10:33:00.030

对于增量备份，您可以将您的 DynamoDB 流与 Lambda 函数关联，以自动触发每次数据更新的代码（即：数据到另一个存储，如 S3）

可用于与 DynamoDb 绑定以进行增量备份的 lambda 函数：

[https://github.com/PageUpPeopleOrg/dynamodb-replicator](https://github.com/PageUpPeopleOrg/dynamodb-replicator)

我在博客上详细介绍了如何使用 DynamoDB Streams、Lambda 和 S3 版本化存储桶为 DynamoDb 中的数据创建增量备份：

[https://www.abhayachauhan.com/category/aws/dynamodb/dynamodb-backups](https://www.abhayachauhan.com/category/aws/dynamodb/dynamodb-backups)

或者，DynamoDB 刚刚实现了按需备份和恢复。它们不是增量的，而是完整的备份快照。

查看[https://www.abhayachauhan.com/2017/12/dynamodb-scheduling-on-demand-backups/](https://www.abhayachauhan.com/2017/12/dynamodb-scheduling-on-demand-backups/)了解更多信息。

高温高压

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-29T17:56:18.570

2017 年 11 月 29 日，引入了*按需备份*。它允许您直接在 DynamoDB 中直接创建备份，而无需消耗任何容量。[以下是博客文章](https://aws.amazon.com/blogs/aws/new-for-amazon-dynamodb-global-tables-and-on-demand-backup/)中的一些片段：

> 此功能旨在帮助您遵守有关长期存档和数据保留的法规要求。您可以通过单击（或 API 调用）创建备份，而不会消耗您预置的吞吐量容量或影响应用程序的响应能力。备份以高度持久的方式存储，可用于创建新表。
> 
> ...
> 
> 备份立即可用！它使用 Amazon 管理的密钥进行加密，包括所有表数据、预置容量设置、本地和全局二级索引设置以及流。它不包括 Auto Scaling 或 TTL 设置、标签、IAM 策略、CloudWatch 指标或 CloudWatch 警报。
> 
> 鉴于我们的一些客户的表接近 0.5 PB，您可能想知道此操作如何能够即时进行。在幕后，DynamoDB 拍摄完整快照并保存所有更改日志。进行备份就像保存时间戳以及表的当前元数据一样简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-07T11:10:48.323

DynamoDB 中的扫描操作返回按主键（哈希键）排序的行。所以如果一个表的hash key是一个自增的整数，那么在下次备份的时候，将上次备份时保存的最后一条记录的hash key设置为扫描请求的“lastEvaluatedKey”参数，扫描会返回有仅自上次备份以来创建。

# javascript - 对多个对象执行单个功能

> ID：15743459
> 
> 赞同：0
> 
> 时间：2013-04-01T12:26:58.667
> 
> 标签：javascript

是否可以通过例如对多个对象进行分组来对多个对象执行单个功能。我想做的是：

```
{object1, object2, object3}.toFront(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:33:32.213

一个简单的方法：

```
var nodes = [node.rectangle1, node.text, node.rectangle2];
for (var i = 0; i < nodes.length; i++) {
    nodes[i].toFront();
} 
```

如果您使用[下划线](http://underscorejs.org/#invoke)并喜欢简洁：

```
_.invoke([node.rectangle1, node.text, node.rectangle2], 'toFront'); 
```

如果您想要返回值，您可以使用[map](http://underscorejs.org/#map)或者如果您只想进行一些额外的处理，请查看[每个](http://underscorejs.org/#each).

编辑（使之完整）：

您还可以以与下划线非常相似的方式使用内置`forEach`（如果您不关心某些浏览器或选择填充它）`each`：

```
[node.rectangle1, node.text, node.rectangle2].forEach(function(el) {
    el.toFront();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:26:48.907

虽然您已经接受了答案，但可以通过 JavaScript 1.6/ECMAScript 5 ^(th) Edition 以类似的方式实现：

```
function logElementID(element, index, array) {
    var el = array[index],
        prop = el.textContent ? 'textContent' : 'innerText';
    el[prop] = el.id;
}

[document.getElementById('one'), document.getElementById('two')].forEach(logElementID); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eAGeX/)。

或者通过扩展`Object`原型：

```
function doStuff (el) {
    console.log(el);
};

Object.prototype.actOnGroup = function(func){
    var els = this.length ? this : [this];
    for (var i = 0, len = els.length; i<len; i++){
        func(els[i]);
    }
    return this;
};

document.getElementsByTagName('div').actOnGroup(doStuff);
document.getElementById('one').actOnGroup(doStuff); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eAGeX/3/)。

或者，类似地，扩展`Array`原型：

```
function doStuff (el) {
    console.log(el);
};
Array.prototype.actOnGroup = function(func){
    var els = this.length ? this : [this];
    for (var i = 0, len = els.length; i<len; i++){
        func(els[i]);
    }
    return this;
};

[document.getElementById('one'), document.getElementById('two')].actOnGroup(doStuff); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eAGeX/4/)。

顺便说一句，如果您想为`forEach()`没有（相对）最新的 JavaScript 实现的用户提供替代方案，Mozilla 开发人员网络页面`forEach()`提供以下内容作为“[an] 算法 100% 符合 ECMA-262, 5th版'：

```
// Production steps of ECMA-262, Edition 5, 15.4.4.18
// Reference: http://es5.github.com/#x15.4.4.18
if (!Array.prototype.forEach) {

    Array.prototype.forEach = function forEach(callback, thisArg) {

        var T, k;

        if (this == null) {
            throw new TypeError("this is null or not defined");
        }

        // 1\. Let O be the result of calling ToObject passing the |this| value as the argument.
        var O = Object(this);

        // 2\. Let lenValue be the result of calling the Get internal method of O with the argument "length".
        // 3\. Let len be ToUint32(lenValue).
        var len = O.length >>> 0; // Hack to convert O.length to a UInt32

        // 4\. If IsCallable(callback) is false, throw a TypeError exception.
        // See: http://es5.github.com/#x9.11
        if ({}.toString.call(callback) !== "[object Function]") {
            throw new TypeError(callback + " is not a function");
        }

        // 5\. If thisArg was supplied, let T be thisArg; else let T be undefined.
        if (thisArg) {
            T = thisArg;
        }

        // 6\. Let k be 0
        k = 0;

        // 7\. Repeat, while k < len
        while (k < len) {

            var kValue;

            // a. Let Pk be ToString(k).
            //   This is implicit for LHS operands of the in operator
            // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.
            //   This step can be combined with c
            // c. If kPresent is true, then
            if (Object.prototype.hasOwnProperty.call(O, k)) {

                // i. Let kValue be the result of calling the Get internal method of O with argument Pk.
                kValue = O[k];

                // ii. Call the Call internal method of callback with T as the this value and
                // argument list containing kValue, k, and O.
                callback.call(T, kValue, k, O);
            }
            // d. Increase k by 1.
            k++;
        }
        // 8\. return undefined
    };
} 
```

逐字复制，来自 MDN`forEach()`文章的参考（下）；2013 年 1 月 4 日，14:30。

参考：

*   [`Array.forEach()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach).

# windbg - 通过windbg运行应用程序时访问冲突

> ID：15743461
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:27:00.383
> 
> 标签：windbg, printf

我的应用程序有时会出现访问冲突。我通过windbg运行应用程序，它在以下函数中停止。还尝试了_vscprintf而不是vsnprintf，结果是一样的。我是windbg的新手。任何帮助将不胜感激。

```
int tsk_sprintf_2(char** str, const char* format, va_list* ap)
{
    int len = 0;
    va_list ap2;
    ap2 = *ap; 
   len = vsnprintf(0, 0, format, *ap); /*-> access violation in this point! */
   *str = (char*)calloc(1, len+1);
   vsnprintf(*str, len, format, ap2);
   va_end(ap2);    
   return len;
} 
```

==> 以下是windbg的结果

```
MANAGED_STACK: !dumpstack -EE

OS Thread Id: 0x5b8 (22)

Current frame: 
ChildEBP RetAddr  Caller, Callee
PRIMARY_PROBLEM_CLASS:  WRONG_SYMBOLS
BUGCHECK_STR:  APPLICATION_FAULT_WRONG_SYMBOLS
LAST_CONTROL_TRANSFER:  from 1026d3d8 to 102e14cf

STACK_TEXT:  
    WARNING: Stack unwind information not available. Following frames may be wrong.

    1d3cde7c 1026d3d8 1d3cdea8 0898eeeb 00000000 MSVCR100D!vcwprintf_s_l+0x52ef
    1d3cded0 1026d46c 00000000 00000000 0898ee88 MSVCR100D!vsnprintf_l+0x158
    1d3cdeec 0834d927 00000000 00000000 0898ee88 MSVCR100D!vsnprintf+0x1c
    1d3cdfe8 1002891e 1d3ce0d0 0898ee88 1d3ce1e4 tinySAK!tsk_sprintf_2+0x57
    1d3ce0f0 10028b77 09a16fe8 0898ee88 00000000 tinyWRAP!debug_xxx_cb+0x6e
    1d3ce1ec 088b697b 09a16fe8 0898ee88 00000444 tinyWRAP!DDebugCallback::debug_info_cb+0x37
    1d3cffb4 7c80b713 1cd10f90 1d2cfb44 7c947d9a tinyNET!tnet_transport_mainthread+0x1adb
    1d3cffec 00000000 088a2aff 1cd10f90 00000000 KERNEL32!GetModuleFileNameA+0x1b4

SYMBOL_STACK_INDEX:  0
SYMBOL_NAME:  msvcr100d!vcwprintf_s_l+52ef
FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: MSVCR100D
IMAGE_NAME:  MSVCR100D.dll
STACK_COMMAND:  ~22s ; kb
BUCKET_ID:  WRONG_SYMBOLS
FAILURE_BUCKET_ID:  WRONG_SYMBOLS_c0000005_MSVCR100D.dll!vcwprintf_s_l
WATSON_STAGEONE_URL:  
Followup: MachineOwner
---------

route. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:42:49.243

您正在尝试打印到 NULL 指针`len = vsnprintf(0, 0, format, *ap);`：当然，它会崩溃。发送输出缓冲区的有效地址作为第一个参数，有效长度作为第二个参数。

# ios - Cocos2d 2.0：我得到更高的内存分配峰值设置默认像素格式为 kCCTexture2DPixelFormat_RGBA4444

> ID：15743462
> 
> 赞同：1
> 
> 时间：2013-04-01T12:27:04.730
> 
> 标签：ios, memory, memory-management, cocos2d-iphone

我有点疯了。我从那里得到了一个 AppDelegate，我在那里吃了一个介绍场景。我使用 TexturePacker 获取**使用 RGBA4444 像素格式**的 plist 和 png 文件，并在 XCode**中将“压缩 PNG 文件”选项设置为“NO”**以保留优化的文件。

我的 AppDelegate 配置了默认像素格式 kEAGLColorFormatRGB565：

```
 CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds]
                               pixelFormat:kEAGLColorFormatRGB565   //kEAGLColorFormatRGBA8
                               depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                        preserveBackbuffer:NO
                                sharegroup:nil
                             multiSampling:NO
                           numberOfSamples:0]; 
```

场景 1：我运行我的 AppDelegate 并推送 Introduction 场景**而不更改默认像素格式**（换句话说，保留默认 AppDelegate 设置）并获得以下分配分析。当从 plist 文件创建第一个 CCSprite 帧时，蓝色峰值对应于 IntroductionScene 中的**16 MB 内存分配**（蓝色峰值对应于 16 MB，我无法用显示的值截取更好的屏幕截图，其余的对应于大约分配了 2MB 内存 - 抱歉）。

![第一个案例](https://i.stack.imgur.com/06I2W.png)

场景 2：我在 IntroBackgroundScene 中将默认像素格式设置为**kCCTexture2DPixelFormat_RGBA4444**（如下所示）。

```
@implementation IntroBackgroundScene

-(id) init
{
    if ((self = [super init]))
    {
        [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA4444];

        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Intro background.plist"];
        background = [CCSprite spriteWithSpriteFrameName:@"Intro background 0.png"];
        background.anchorPoint = CGPointMake(0.5f, 0.5f);
        background.position = CGPointMake(160.0f, 0.0f);
        [self addChild:background];

        foreground = [CCSprite spriteWithSpriteFrameName:@"Intro background 1.png"];
        foreground.anchorPoint = CGPointMake(0.5f, 0.5f);
        foreground.position = CGPointMake(160.0f, 0.0f);
        [self addChild:foreground z:2]; 
```

这给了我**26 MB 的内存使用**峰值（即使像素格式设置设置为**kCCTexture2DPixelFormat_RGBA4444**）。见下文（蓝色峰值对应于 26 MB，我无法截取显示值的更好屏幕截图 - 抱歉）：

![第二种情况](https://i.stack.imgur.com/Yv28J.png)

**我认为它会减少内存分配而不是增加。为什么是这样？**

其次，为什么内存分配达到任何数量（16/26MB）然后下降到2MB？我希望它总是 2MB，因为我正在使用优化的纹理表。

这是 TexturePacker 构建设置：

![纹理打包器](https://i.stack.imgur.com/0xJll.png)

我正在为 Cocos2d 构建并使用激活 RGBA4444 的 2048*2048 像素表。它应该只消耗每个像素 2 个字节，总共大约 8 MB。**我不明白为什么内存分配在 IntroBackground 初始化方法中达到 16 MB 的峰值，以及为什么它随后下降到只有 2 MB（而不是 8 MB）。**

任何有关如何分析和理解这一点的见解将不胜感激。

**编辑：来自 iPod touch 第 4 代的纹理哑信息：**

cocos2d: "Intro background.png" rc=7 id=3 2048 x 2048 @ 32 bpp => 16384 KB cocos2d: CCTextureCache dumpDebugInfo: 2 个纹理，16448 KB (16.06 MB)

看起来纹理表中的所有帧都临时加载到内存中。这是正常的吗？**有没有办法避免这种情况？（这可能会在加载多张纸的场景时导致内存泄漏）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:01:00.523

我的猜测是（解释峰值）应用程序具有 1）在核心中加载压缩数据流，2）在核心中解压缩......因此同时保存了压缩和解压缩以及过程中使用的辅助对象......然后当内存块被传递给 GPU 时，内存被释放（并且纹理的内存需求从主进程中扣除）......假设跟踪是在设备上进行的。模拟器不使用主机的 GPU，因此在模拟器上进行相同的跟踪会显示更高的内存占用空间，其中包括纹理的内存需求。

# css - header 的组合 - main_wrapper 使页面滚动为 header-height

> ID：15743469
> 
> 赞同：1
> 
> 时间：2013-04-01T12:27:43.973
> 
> 标签：css, xhtml, sticky-footer

我正在制作一个带有固定页脚的网页。如果内容很多，一定要有滚动条。如果内容部分只有一行输入，则无需滚动。现在页面的制作方式，一直给我一个滚动条！它滚动得尽可能远，以使标题从屏幕上消失。--> 我的标题是 150 像素高，我可以精确滚动 150 像素。但我不想要这个。我的 html 或 CSS 有什么问题？

这是html：

```
<body>
<div id="header">
    <h1>The <span>ultimate</span><br />DVD collection</h1>
</div>
<div id="main_wrapper">
    <div id="main">
        <div id="choose">#abcdefghijklmnopqrstuvwxyz</div>
        <div id="content">Main content comes here.</div>
    </div>
</div>
<div id="footer">
    <p>My Name <span>admin log-in</span>
    </p>
</div> 
```

这是我的CSS：

```
html, body {
    height: 100%;
    margin: 0 auto;
}
body {
    font-family: Helvetica, Arial, sans-serif;
    color: #666;
    font-size: 12px;
    line-height: 1.5em;
    /*position: relative;*/
}
#header {
    height: 150px;
    background: linear-gradient(left, #2a2620, #a35e47);
    border-top: 10px solid #f6e6c5;
    border-bottom: 10px solid #f6e6c5;
    background-color: #a35e47;
}
h1 {
    width: 960px;
    margin: 35px auto 0;
    font-family:'Luckiest Guy', cursive;
    font-size: 3.5em;
    line-height: 1em;
    text-transform: uppercase;
    font-weight: 400;
    color: #a35e47;
    text-shadow: 0px 0px 2px #f6e6c5, 4px 4px 8px #000000;
}
h1 span {
    font-family:'Aclonica', Verdana, sans-serif;
    font-size: 1.75em;
}
#main_wrapper {
    height: 100%;
    min-height: 100%;
    background-image: url('http://4.bp.blogspot.com/-jPxP0Hgum7o/T0OiL_IupqI/AAAAAAAAAMs/Xu5zNtqULoE/s1600/IMG_0665+Hollywood+star.jpg');
    background-repeat: no-repeat;
    background-position: 50% 60%;
    background-color: #5a646d;
}
#main {
    width: 960px;
    height: 100%;
    margin: 0 auto;
    background-color: #fff;
    opacity: .75;
    /*overflow: auto;*/
}
#choose {
    margin-left: 20px;
    font-family: georgia, serif;
    font-style: italic;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 1.5em;
    line-height: 2em;
    letter-spacing: 20px;
    overflow: hidden;
}
#content {
    margin-left: 20px;
    margin-right: 20px;
}
#footer {
    height: 40px;
    width: 100%;
    border-top: 10px solid #f6e6c5;
    background: linear-gradient(left, #2a2620, #a35e47);
    position: fixed;
    left: 0;
    bottom: 0;
} 
```

您还可以在此[jsFiddle](http://jsfiddle.net/Kru5f/)中查看我的代码。

我究竟做错了什么？（看[图片](http://i.stack.imgur.com/u9CRs.jpg)中的滚动条）提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:45:16.957

在主包装上删除 height:100% 。100% 的高度表示父级内部可用空间的 100%（标题和主包装器具有相同的父级）。但是主包装器不知道标题的高度。所以结果将是 100% + 150px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:12:40.773

我在风格上做了一些调整。我已经为您的容器提供了百分比高度（您可以根据需要调整它们）并将属性滚动到 div。

```
 <style>
    html, body {
        height: 100%;
        margin: 0 auto;
    }
    body {
        font-family: Helvetica, Arial, sans-serif;
        color: #666;
        font-size: 12px;
        line-height: 1.5em;
        /*position: relative;*/
    }
    #header {
        height: 15%px;
        background: linear-gradient(left, #2a2620, #a35e47);
        border-top: 10px solid #f6e6c5;
        border-bottom: 10px solid #f6e6c5;
        background-color: #a35e47;
    }
    h1 {
        width: 960px;
        margin: 35px auto 0;
        font-family:'Luckiest Guy', cursive;
        font-size: 3.5em;
        line-height: 1em;
        text-transform: uppercase;
        font-weight: 400;
        color: #a35e47;
        text-shadow: 0px 0px 2px #f6e6c5, 4px 4px 8px #000000;
    }
    h1 span {
        font-family:'Aclonica', Verdana, sans-serif;
        font-size: 1.75em;
    }
    #main_wrapper {
        /*height: 100%;*/
        /*min-height: 100%;*/
        background-image: url('http://4.bp.blogspot.com/-jPxP0Hgum7o/T0OiL_IupqI/AAAAAAAAAMs/Xu5zNtqULoE/s1600/IMG_0665+Hollywood+star.jpg');
        background-repeat: no-repeat;
        background-position: 50% 60%;
        background-color: #5a646d;
    }
    #main {
        width: 960px;
        height: 70%;
        margin: 0 auto;
        background-color: #fff;
        opacity: .75;
        /*overflow: auto;*/
        overflow:scroll;
    }
    #choose {
        margin-left: 20px;
        font-family: georgia, serif;
        font-style: italic;
        font-weight: bold;
        text-transform: uppercase;
        font-size: 1.5em;
        line-height: 2em;
        letter-spacing: 20px;
        overflow: hidden;
    }
    #content {
        margin-left: 20px;
        margin-right: 20px;
    }
    #footer {
        height: 15%;
        width: 100%;
        border-top: 10px solid #f6e6c5;
        background: linear-gradient(left, #2a2620, #a35e47);
        position: fixed;
        left: 0;
        bottom: 0;
    }
    </style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:37:59.347

我使用这个解释解决了这个问题：http: [//dorayme.netweaver.com.au/ciaran.html](http://dorayme.netweaver.com.au/ciaran.html)

我的包装器现在有一个位置：绝对与顶部：和底部：等于页眉和页脚的高度（+ 边框的高度）

```
#main_wrapper{
position: absolute;
top: 170px; /* header + bordertop + borderbottom */
bottom: 50px; /* footer + bordertop */
left: 0;
right: 0;
background-image: url('path/to/img.jpg');
    background-repeat: no-repeat;
background-position: 50% 40%;
background-color: #5a646d;
} 
```

感谢 Johan Sundén 将我推向正确的方向！！

# maven - 如何仅为父模块执行 maven 插件？

> ID：15743471
> 
> 赞同：0
> 
> 时间：2013-04-01T12:27:48.230
> 
> 标签：maven, maven-plugin

所以我创建了这个小型 maven 插件，它将连接到数据库服务器并创建项目所需的所有表。问题是，该项目由多个模块组成，我希望插件在父模块中定义。然而它只需要执行一次，而不是为每个模块单独执行。我认为添加`"<inherited>false</inherited>"`到插件配置就足够了，但显然不是。这是我的父项目的pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>rpg</groupId>
    <artifactId>rpg-build</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>rpg-build</name>

    <modules>
        <module>../rpg-web</module>
    <module>../rpg-service</module>
    <module>../rpg-commons</module>
    <module>../rpg-maven-plugin</module>
    </modules>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>2.2.9</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>rpg.maven.plugin</groupId>
                <artifactId>rpg-maven-plugin</artifactId>
                <version>0.0.1-SNAPSHOT</version>
                <inherited>false</inherited>
            </plugin>
        </plugins>
        <finalName>${artifactId}</finalName>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T15:47:06.817

在评论中回答：

> 您应该将 @aggregator 注释添加到插件的 mojo 中。– 安德鲁·洛格维诺夫 2013 年 4 月 1 日 12:40

# android - 如何在只有文本的操作栏 menuItem 之前删除分隔线？

> ID：15743472
> 
> 赞同：5
> 
> 时间：2013-04-01T12:27:50.850
> 
> 标签：android, actionbarsherlock

我想在`MenuItem`其中包含“withText”选项的 ActionBar 之前删除短分隔符。

我已经尝试了许多不同的主题设置，但都失败了。

有什么办法可以去掉吗？

这是我的主题 xml。

```
 <style name="my_actionbar" parent="@style/Widget.Sherlock.Light.ActionBar.Solid">
    <item name="android:background">@drawable/actionbar_bg</item>
    <item name="background">@drawable/actionbar_bg</item>
    <item name="android:actionBarDivider">@null</item>
    <item name="actionBarDivider">@null</item>
    <item name="android:showDividers">none</item>
    <item name="android:dividerVertical">@null</item>
    <item name="android:dividerPadding">0dp</item>
    <item name="android:divider">@null</item>
</style> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-01T19:51:56.923

该`android:actionBarDivider`属性属于主题，不属于操作栏样式。您可以像这样删除分隔线：

```
<style name="AppTheme" parent="Theme.Sherlock">
    <item name="actionBarDivider">@null</item>
    <item name="android:actionBarDivider">@null</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:55:55.220

我通过将主主题上的 android:listDivider 属性设置为一些透明的drawble来解决这个问题。但我不知道这种设置的副作用。

主旋律：

```
<style name="Theme_Main" parent="@style/Theme.Sherlock.Light">
    ....
    <item name="android:listDivider">@drawable/shape_blank</item>
</style> 
```

shape_blank.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
   android:shape="line">
    <solid android:color="@android:color/transparent"/>
</shape> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T05:14:06.137

我使用下面的神奇线条从标签栏中删除了分隔线。

```
 mTabHost.getTabWidget().setDividerDrawable(null); 
```

或者

```
 mTabHost.getTabWidget().setDividerDrawable(R.Color.transperant); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-13T07:21:15.177

在您的片段/活动中使用以下代码

```
getSupportActionBar().setElevation(0); 
```

# iphone - 将 lat long 分配给 CLLocation 给出错误不接受任何格式

> ID：15743473
> 
> 赞同：1
> 
> 时间：2013-04-01T12:27:51.080
> 
> 标签：iphone, ios, core-location, cllocation

我以这种方式向 CLLocation 提供 lat long 。

```
CLLocation *loc = [[CLLocation alloc]init];
    loc.coordinate.latitude = [sLat floatValue];
    loc.coordinate.longitude = [sLng floatValue]; 
```

来自（哪里

```
 NSMutableDictionary *locat = [dictLoc valueForKey:@"location"];
sLat = [locat valueForKey:@"lat"];
sLng = [locat valueForKey:@"lng"]; 
```

在控制台中显示正确的值，但在分配给 cllocation 时会终止。请指导以上。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:10:01.627

`CLLocationCoordinate2D`你可以像下面这样获得对象中的值...

```
CLLocationCoordinate2D location;
location.latitude = [sLat doubleValue];
location.longitude = [sLng doubleValue]; 
```

**或者**也尝试保留该字符串，如下所示..

```
sLat = [locat valueForKey:@"lat"];
[sLat retain];
sLng = [locat valueForKey:@"lng"];
[sLng retain]; 
```

然后将其分配给`CLLocation`

希望这对你有帮助....

# php - 如何在php中将双数组数据存储到字符串中？

> ID：15743474
> 
> 赞同：0
> 
> 时间：2013-04-01T12:27:51.750
> 
> 标签：php

我在 php 中有双数组中的数据。现在我需要将该数组数据存储到字符串中。我怎么能在php中做到这一点？我是 php 新手。请在这方面帮助我。

数组如下：

```
 Array ( [0] => Array ( [id] => 100 [type] => test1 [count] => 8 [count2] => 8) 
   [1] => Array ( [id] => 103 [type2] => test2[count2] => 3 [count3] => 3 )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:29:28.640

您可以使用`implode()`将数组转换为字符串： http: [//php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

# performance - 第一次查询 WMI 性能计数器时出现奇怪的延迟

> ID：15743477
> 
> 赞同：4
> 
> 时间：2013-04-01T12:27:58.257
> 
> 标签：performance, wmi, performancecounter

我正在查询 WMI（win32_perfrawdata_perfproc_process 类）并且发生了一些奇怪的事情：第一次查询它时，它会停止近 50 秒以显示答案。接下来的时间几乎是立即的。

有人看到这种行为吗？有什么可以避免的吗？

要重现这一点，请打开 Powershell 窗口并键入

gwmi win32_perfrawdata_perfproc_process

第一次运行此命令时，它会停止将近 50 秒。第二次几乎是立即的。

布鲁诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-20T17:00:02.797

六年后回答这个问题是否为时已晚？:)

第一个 WMI 查询（来自任何来源，powershell、`wmic`命令行或以编程方式通过 COM 调用）大约 20 秒的延迟是正常的。我已经将此追溯到 RPC/TCP 连接。根据[Windows 文档](https://docs.microsoft.com/en-us/windows/win32/services/services-and-rpc-tcp)：

> 从 Windows Vista 开始，服务控制管理器 (SCM) 支持通过传输控制协议 (RPC/TCP) 和命名管道 (RPC/NP) 的远程过程调用。客户端 SCM 函数默认使用 RPC/TCP。
> 
> RPC/TCP 适用于大多数远程使用 SCM 功能的应用程序，例如远程管理或监控工具。但是，为了兼容性和性能，某些应用程序可能需要通过设置本主题中描述的注册表值来禁用 RPC/TCP。
> 
> 当服务调用远程 SCM 函数时，客户端 SCM 首先尝试使用 RPC/TCP 与服务器端 SCM 通信。如果服务器正在运行支持 RPC/TCP 并允许 RPC/TCP 通信的 Windows 版本，则 RPC/TCPP 连接将成功。如果服务器运行的 Windows 版本不支持 RPC/TCP，或者支持 RPC/TCP 但在只允许命名管道流量的防火墙后面运行，则 RPC/TCP 连接超时并且 SCM 重试与 RPC 的连接/NP。这最终会成功，但可能需要一些时间（通常超过 20 秒），导致 OpenSCManager 功能出现阻塞。

上面的链接指定了可以更改以消除此延迟的注册表值。他们在`HKLM\SYSTEM\CurrentControlSet\Control`. `SCMApiConnectionParam`通过将超时值更改为 5000，我能够将延迟缩短到仅 5 秒。

# php - 从数组中删除数据

> ID：15743478
> 
> 赞同：2
> 
> 时间：2013-04-01T12:28:04.070
> 
> 标签：php, arrays

我有一个问题，如果“lastpost”设置为“No Posts”，我需要忽略任何数组键

这是 $sublast 的数组转储：

```
 array(3) { [0]=> array(9) { ["forum_category_id"]=> string(1) "3" ["name"]=>  string(15) "Sub category #1" ["description"]=> string(39) "This is a short description test.... #2" ["topics"]=> string(1) "0" ["lastpost"]=> string(8) "No Posts" ["lastpostauthor"]=> string(1) " " ["lastposturl"]=> string(88) "http://test.codetrove.com/index.php?route=forum/read&forum_path=3&forum_post_id=" ["posts"]=> int(0) ["href"]=> string(81) "http://test.codetrove.com/index.php?route=forum/forum_category&forum_path=1_3" } [1]=> array(9) { ["forum_category_id"]=> string(1) "7" ["name"]=> string(16) "Test sub Sub cat" ["description"]=> string(0) "" ["topics"]=> string(1) "2" ["lastpost"]=> string(26) "Mon Apr 1, 2013 1:00:42 pm" ["lastpostauthor"]=> string(16) "Justine Smithies" ["lastposturl"]=> string(90) "http://test.codetrove.com/index.php?route=forum/read&forum_path=7&forum_post_id=63" ["posts"]=> int(2) ["href"]=> string(81) "http://test.codetrove.com/index.php?route=forum/forum_category&forum_path=1_7" } [2]=> array(9) { ["forum_category_id"]=> string(1) "9" ["name"]=> string(11) "Test cat #3" ["description"]=> string(20) "Short description #3" ["topics"]=> string(1) "2" ["lastpost"]=> string(26) "Mon Apr 1, 2013 1:00:15 pm" ["lastpostauthor"]=> string(16) "Justine Smithies" ["lastposturl"]=> string(90) "http://test.codetrove.com/index.php?route=forum/read&forum_path=9&forum_post_id=62" ["posts"]=> int(2) ["href"]=> string(81) "http://test.codetrove.com/index.php?route=forum/forum_category&forum_path=1_9" } } 
```

这是我正在尝试做的代码，只是它搞砸了，因为它总是针对正确的顶部条目，但是如果将“lastpost”设置为“No Posts”，我需要一种方法来删除顶部条目，所以它得到正确的信息。

```
 <?php
                        $sublast = $forum_category['children'];
                        foreach ($sublast as $key => $row) {
                        $dates[$key]  = $row['lastpost']; 
                        }
                        array_multisort($dates, SORT_ASC, $sublast);
                        $lastitem = $sublast[count($sublast) - 1];
                         var_dump($sublast); 
                        ?> 
```

这是 $lastitem 的转储：

```
 array(9) { ["forum_category_id"]=> string(1) "3" ["name"]=> string(15) "Sub category #1" ["description"]=> string(39) "This is a short description test.... #2" ["topics"]=> string(1) "0" ["lastpost"]=> string(8) "No Posts" ["lastpostauthor"]=> string(1) " " ["lastposturl"]=> string(88) "http://test.codetrove.com/index.php?route=forum/read&forum_path=3&forum_post_id=" ["posts"]=> int(0) ["href"]=> string(81) "http://test.codetrove.com/index.php?route=forum/forum_category&forum_path=1_3" } 
```

正如你所看到的，当整个数组条目应该被删除时它需要“无帖子”，所以它需要 array[1] 这是我需要的。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:31:03.143

在php中使用[unset](http://php.net/manual/en/function.unset.php)函数删除元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:33:37.183

Unset 将满足您的需求。

```
unset($array) 
```

# object - 更改对象的属性宽度

> ID：15743480
> 
> 赞同：0
> 
> 时间：2013-04-01T12:28:10.803
> 
> 标签：object

如何更改`attr`对象的宽度，我正在尝试这个，但似乎不起作用......

```
jQuery('.big').click(function(){
    jQuery('#flvPlayer').attr("width", "100");
}); 
```

这是我需要在点击时更改高度和宽度的代码

```
<a class="big">100</a>
<textarea><object id="flvPlayer" height="665" width="425"></object></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:29:21.133

使用`.css`而不是`.attr`.

```
jQuery('.big').click(function(){
    jQuery('#flvPlayer').css("width", "100");
}); 
```

`width`是一个 CSS 属性。

编辑：在`textarea`你有文字。您`<object>`不是 HTML 元素。它是您的文本区域中的文本。

因此，只需更改`textarea`.

```
$('.big').click(function(){
    var text = "<object id=\"flvPlayer\" height=\"665\" width=\"100\"></object>"
    $("textarea").val(text);
}); 
```

另外，我建议您使用`$`而不是`jQuery`. 写起来更容易、更快捷。

# jquery - 无法使用 jquery 获取 Textarea 值

> ID：15743481
> 
> 赞同：1
> 
> 时间：2013-04-01T12:28:14.867
> 
> 标签：jquery, textarea

```
<textarea id="txtDescription" class="smalltextarea" ></textarea>
<input type="submit" name="btnSubmit" value="Submit" id="btnSubmit">

$(document).ready(function () {
$("#btnSubmit").click(function(){

var getText= $("#txtDescription").val();
alert(getText);
});
}); 
```

当我在 textarea 上键入一些文本并按下提交按钮时，我的脚本返回
[object HTML TextAreaElement] 而不是 textarea 文本或值；

```
$("#txtDescription").val();
$("#txtDescription").text();
$("#txtDescription").html(); 
```

相同的输出 [object HTML TextAreaElement]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:33:09.733

问题不在于您显示的代码。这是一个具有完全相同代码的[jsFiddle 。](http://jsfiddle.net/4VkcF/1/)我的猜测是你可能与 id 有冲突：检查是否只有一个名为`btnSubmit`和的元素`txtDescription`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T11:06:12.887

利用

```
jQuery("#txtDescription").val();
jQuery("#txtDescription").text();
jQuery("#txtDescription").html(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:33:32.243

使用第一个`$("#txtDescription").val();` [这是小提琴](http://jsfiddle.net/prabhu5013/a3A6y/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:33:54.567

尝试这个

```
var text = $('textarea#txtDescription').val(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T12:51:41.137

请尝试给您的变量一个如下值并告诉我结果：

```
var getText = document.getElementById("txtDescription").value; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-11T18:23:43.213

我不知道您是否编写了 textarea 标签的简短版本，但我可能有一种情况。如果它是完美的解决方案，或者它可能会帮助像我这样在谷歌上搜索该问题并被定向到这里的人。

我在 asp.net 工作，只是通过擦除

> 运行=“服务器”

你的 textarea 标签的属性使工作

> $('#myTextarea').val();

# android - 在android中改变声音

> ID：15743482
> 
> 赞同：1
> 
> 时间：2013-04-01T12:28:26.493
> 
> 标签：android, audio, playback

我正在使用媒体录音机录制声音，但我想以女性音调播放声音，反之亦然。基本上我有一个媒体播放器的声音，当我播放它时，它运行良好，但现在我已经使用媒体录音机录制了我的声音，我想播放它是女声吗？如何将男声改为女声或将女声改为男声？我也尝试过使用 soundpool 类，但它会增加或减少频率。它不会改变语调或音调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:13:47.623

You *are* changing the pitch when you change the frequency. However, just increasing or decreasing the playback frequency is unlikely to make a male voice sound female or vice versa. It'll just sound like a distorted version of the original voice.

A female voice is likely to contain more energy in the higher end of the speech frequency spectrum, and less in the lower end. The opposite would be the case for a male voice. What *you're* doing in effect is move *all* energy upwards or downwards in the spectrum, which will not sound natural.

The theory of human speech is much too broad a subject to cover at a Q&A site like StackOverflow. So my recommendation would be for you to get a book on the subject, or use a search engine to find some research papers or scientific articles.

# javascript - $.ajax() 和“未捕获的 ReferenceError：未定义数据”

> ID：15743483
> 
> 赞同：3
> 
> 时间：2013-04-01T12:28:36.290
> 
> 标签：javascript, jquery, ajax, json, getjson

我尝试了几种使用 $.getJSON 和 $.ajax() [overthere 获取.json 文件和数据的方法](http://d.codio.com/hugolpz/getJson--/App/index.html)

**我的 JS 代码**n⁰2 失败：

```
$.ajax({
  type: "GET",
  url: 'js/main.js',
  data: data,
  success: 1,
  }).done(function ( data ) {
  var items = [];

  $.each(data.tata.entities.q142.labels.fr.value, function(key, val) {
    items.push('<li id="' + key + '">Test 2:' + val + '</li>');
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
}); 
```

**在 Chrome 控制台中，消息错误是**：

```
"Uncaught ReferenceError: data is not defined" 
```

**参考**线：

```
 data: data, 
```

**出了什么问题？该怎么办 ？**

* * *

**编辑：**一切都在客户端完成。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T12:34:03.997

问题是因为您没有定义变量数据而引起的，因此请尝试删除该`data: data`行，看起来您只是得到一个通常不会使用查询字符串的 JavaScript 文件：

```
$.ajax({
  type: "GET",
  url: 'js/main.js',
  success: success,
  }).done(function ( data ) {
  var items = [];

  $.each(data.tata.entities.q142.labels.fr.value, function(key, val) {
    items.push('<li id="' + key + '">Test 2:' + val + '</li>');
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
}); 
```

# javascript - 通过 Javascript 查找图像的 src

> ID：15743484
> 
> 赞同：0
> 
> 时间：2013-04-01T12:28:39.940
> 
> 标签：javascript, html, image, src

我通过一个简单的谷歌搜索找到了我的问题的答案，不过，我遇到了一个小问题。

到目前为止，我的 HTML 页面上有一个 ID 为 newAvatar 的图像。我试图通过它的 ID 找到这个图像，并将它的源保存到一个变量中，然后最终保存到一个 XML 文档中以供以后使用。

当我将此源保存到变量中或出于检查目的对其进行警告时，它会显示完整的源，这是不寻常的。例如，我在 WAMP 服务器上运行我的站点，因此变量保存为：

```
http://localhost/uploads/newUploadedImage.jpg 
```

实际上，来源应该简单明了，uploads/newUploadedImage.jpg

图片标签是

```
<img src="uploads/newUploadedImage.jpg" width="60px" height="60px;" id="newAvatar"/> 
```

我检查来源的方式是

```
alert(document.getElementById('newAvatar').src); 
```

知道如何摆脱第一批垃圾吗？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:34:53.373

通过使用@DavidThomas 之前的评论，我设法让它工作。这就是我将警报更改为：

```
alert(document.getElementById('newAvatar').getAttribute('src')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:35:21.760

```
var hostname = document.location.hostname;
var url = 'http://' + hostname + '/';

var src = document.getElementById('newAvatar').getAttribute('src'); //'uploads/newUploadedImage.jpg'
var image = src.split('/')[1];

console.log(url);
console.log(image); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:53:44.690

```
<script
  src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>

<img src="uploads/newUploadedImage.jpg" width="60px" height="60px;"
  id="newAvatar"/> 
```

和

```
$(function()
{
    alert($('#newAvatar').attr('src'));
}); 
```

# osx-lion - Lion上的NSTableView垂直网格颜色

> ID：15743487
> 
> 赞同：1
> 
> 时间：2013-04-01T12:28:45.700
> 
> 标签：osx-lion, nstableview

我的应用程序包含来自 NIB 的 NSTableView 设置。在 NIB 文件中，我添加了 Solid Vertical Grid，然后在 OS X 10.8 下编译它，但部署目标为 OS X 10.7。在 OS X 10.8 上一切正常，但在 10.7 上，垂直线仅出现在不包含任何数据的行中。

你有什么线索为什么会发生这种情况吗？

* * *

编辑
![在此处输入图像描述](https://i.stack.imgur.com/CiXud.png)

如您所见，有一条线没有出现数据，而垂直网格线在那里。

# javascript - 使用 ajax 调用加载替换数据后清除先前的元素

> ID：15743489
> 
> 赞同：1
> 
> 时间：2013-04-01T12:28:55.987
> 
> 标签：javascript, jquery

我有一个页面，我正在使用 ajax 从数据库加载数据。该数据包含一些 html 代码，我将此代码放在一个名为`#container`. 我有一个分页器系统，所以如果我单击“下一步”按钮，ajax 会再次启动并获取 html 代码作为响应，然后将此代码替换为`#container`.

我有这样的代码：

```
function loading_show() {
    $('#loading').html("<img src='images/loading.gif'/>").fadeIn('fast');
}
function loading_hide() {
    $('#loading').fadeOut('fast');
}
function loadData(page) {
    loading_show();

    $.ajax({
        type: "POST",
        url: "load_data.php",
        data: "page=" + page,
        success: function(msg) {
            $("#container").ajaxComplete(function(event, request, settings) {
                loading_hide();
                $("#container").html(msg);
            });
        }
    });
} 
```

ajax 函数的结果是一条 HTML 消息。这条消息的一部分是这样的：

```
<span id="one_15" class="textzero">8002379154 - JKLM REPRESENTACIONES Y CIA LTDA</span> 
```

哦。所以..如果我再次进行 ajax 调用，我会得到另一个像这样的 html：

```
<span id="one_16" class="textzero">EXAMPLE TEXT</span> 
```

问题是，假设我想在类之前加载之前的 ajax 数据之后对类做一些事情，如下`textzero`所示：`textzero``preserv`

```
texto2 = $('.textzero').text();

<span id="one_15" class="textzero">8002379154 - JKLM REPRESENTACIONES Y CIA LTDA</span>
<span id="one_16" class="textzero">EXAMPLE TEXT</span> 
```

**问题：** 有没有办法在使用 ajax 调用加载替换数据后清理以前的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:30:44.100

您可以调用[`$("#container").empty()`](http://api.jquery.com/empty/)以从该容器中删除所有子节点。

# vb.net - 混淆时出错

> ID：15743491
> 
> 赞同：0
> 
> 时间：2013-04-01T12:28:59.740
> 
> 标签：vb.net, obfuscation, dotfuscator, smartassembly

我们出于内部目的使用 vb.net 开发了项目，然后我们对其进行了混淆。它抛出错误，如下所述。

“未找到类型 'e' 上的公共成员 'Var1'。”</p>

代码：

```
Public Sub get_constants_from_DbList(ByRef frm As Object, ByRef sDbname As String)

    For Each Row As DataRow In CommonObj.DSCommonProc.Tables("dblist").Rows 
            If StrComp(Row("DbName").ToString, sDbname, CompareMethod.Text) = 0 Then
             prg_id = Row("PrgId").ToString
             frm.Var1= Row("ChangesDbName").ToString
             frm.Var2 = Row("LoadTableName").ToString
             frm.Var3 = Row("ServerName").ToString
             Exit Sub
        End If
    Next

End Sub 
```

一个表单（名为 FrmMain）从调用过程传递给参数“frm”到该子例程。Var1 等是这种形式的公共变量。

我们尝试过的混淆工具是——

1.  智能装配 6

2.  PreEmptive Dotfuscator and Analytics CE（随 Visual Studio 2012 提供）

没有混淆 exe 工作正常。

在子例程中分配变量“Var1”时引发错误。如果代码行如下修改，则混淆的 exe 将正常工作。

FrmMain.Var1= Row("ChangesDbName").ToString

我们认为混淆缺少后期绑定并在一个小型示例项目中尝试了类似类型的代码。但这没有任何错误。我们附上了这个小代码。但由于其规模，我们无法上传原始项目。

我们如何追踪错误？

[你可以在这里](http://incometaxsoft.com/DotFuscatorTest.zip)找到我的示例应用程序的源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:18:51.400

不要对反射/后期绑定/动态使用混淆。它只会让你陷入这样的麻烦。

混淆器将混淆所有私有和内部标识符，但它无法知道您在运行时通过名称绑定到它们。

打开`Option Strict`并解决错误（即将参数frm的类型更改为其真实类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:13:54.013

混淆器依靠静态分析来确定什么是“安全”的混淆。当您在混合中引入后期绑定和反射时，很难检测到重命名不安全的东西。大多数混淆器提供了将应用程序的某些元素从混淆中排除的能力，以便您可以解决此问题。

我实际上不太了解 VB.Net，但是您进行后期绑定的方式似乎是混淆器无法检测到的。因此，这意味着您需要将该属性排除在重命名之外。至少在 Dotfuscator 中，这应该很容易。您还应该能够打开“图书馆模式”，这将自动排除每个班级的所有公共成员。

# knockout.js - KnockoutJs & Asp.Net MVC 4 - 多模型视图提交

> ID：15743495
> 
> 赞同：0
> 
> 时间：2013-04-01T12:29:07.153
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-validation, knockout-mvc

我的情况是我有 2 个选项卡，每个选项卡都有一个部分视图，我使用 jquery UI 创建我的选项卡。

我为每个用户有两个选项 1\. 保存，2\. 提交。

保存时，它将为该特定选项卡（该选项卡包含模型视图 1）保存第二个相同的选项卡（该选项卡包含模型视图 2）

如何一键从两个选项卡提交两个模型？

我在选项卡 1 和选项卡 2 的保存中有类似的内容。

我的第一个视图模型。

```
 self.save = function() {
            $.ajax({
                url: "MyTabs",
                data: { data: ko.toJSON(self.firstVM) },
                type: "post", 
                contentType: "application/json",
                success: function(result) { alert(result); }
            });
        }; 
```

我的第二个视图模型。

```
 self.save = function() {
            $.ajax({
                url: "MyTabs",
                data: { data: ko.toJSON(self.secondVM) },
                type: "post", 
                contentType: "application/json",
                success: function(result) { alert(result); }
            });
         }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:05:31.940

跟进我的评论。这是第一种方法的小提琴。

[http://jsfiddle.net/sujesharukil/FDPAn/](http://jsfiddle.net/sujesharukil/FDPAn/)

```
var child1ViewModel = function(){
    var x = ko.observable(1),
            y = ko.observable('child1'),
        getData = function(){
            return JSON.stringify({x: x(), y: y()});
           },
        save= function(){

            alert(getData());
            //some ajax call
        };

    return {
        x: x,
        y: y,
        save: save,
        getData: getData
    }
};

var child2ViewModel = function(){
    var x = ko.observable(2),
        y = ko.observable('child2'),
        getData = function(){
            return JSON.stringify({x: x(), y: y()});
        },
        save= function(){

            alert(getData());
            //some ajax call
        };

    return {
        x: x,
        y: y,
        save: save,
        getData: getData
    }
};

var parentViewModel = function(){
    var child1 = new child1ViewModel(),
        child2 = new child2ViewModel(),
        submit = function(){
            var data = {
                child1Data: child1.getData(),
                child2Data : child2.getData()
            };
            alert(JSON.stringify(data));
            //make ajax submit
        };

    return {
        child1: child1,
        child2: child2,
            submit: submit
    }
}

ko.applyBindings(new parentViewModel()); 
```

和 HTML 将是

```
<form data-bind="submit: submit">
    <h1>Data from CHild 1</h1>
    x = <input data-bind="value: child1.x"/><br/>
    y = <input data-bind="value: child1.y"/><br/>
    <button type="button" data-bind="click: child1.save">Save Child1</button>
    <h1>Data from CHild 2</h1>
    x = <input data-bind="value: child2.x"/><br/>
    y = <input data-bind="value: child2.y"/><br/>
    <button type="button" data-bind="click: child2.save">Save Child2</button><br/>
    <button type="submit">Submit</button>
</form> 
```

希望有帮助。

# endeca - 在 Endeca 中，我希望在基线更新后自动将 dgraph 备份保存在 dgraph 服务器上。

> ID：15743496
> 
> 赞同：1
> 
> 时间：2013-04-01T12:29:16.927
> 
> 标签：endeca

如何在 dgraph 服务器而不是 ITL 服务器上自动保存 3 个 dgraphs 备份。默认情况下，dgidx 输出的备份保存在 ITL 服务器上。我希望它保存在 dgraph 服务器上，即 MDEX 主机上。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:54:04.847

我不相信有一个开箱即用的选项来备份目标服务器上部署的 dgidx 输出。你浏览过[文档](http://docs.oracle.com/cd/E35851_03/PlatformServices.613/pdf/EACGuide.pdf)吗？我也会质疑这是否是一个好主意。考虑您正在部署，并且 3 台服务器中有 2 台已成功通过，但第三台失败。您现在只需要回滚两台机器。您的中央 EAC 将不知道哪些要回滚，哪些要保留。但是，在发生回滚时，通过将所有内容保存在一个中心点（即在 ITL 服务器上），您将始终将相同的备份推送到所有三台服务器。

假设您正在尝试加快部署非常大的索引（Endeca 将整个 dgidx 输出复制到每个 MDEX），您可以随时查看 [性能调整指南](http://docs.oracle.com/cd/E28910_01/MDEX.622/pdf/PerfTuningGuide.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T18:24:34.207

您应该能够通过多种方式做到这一点：

1.  在任何基线更新中，dgidx_output 会自动复制到每个 dgraph 服务器。您应该添加复制或存档作业作为 dgraph的[预关闭任务。](http://docs.oracle.com/cd/E40177_03/ToolsAndFrameworks.312/pdf/DeploymentTemplateUsageGuide.pdf#_OPENTOPIC_TOC_PROCESSING_d0e4961)

2.  您还可以为将在基线更新结束或开始时运行的每个 dgraph 服务器创建自定义复制作业。或者它可能完全从您的基线更新中脱机。

就 radimpe 而言，在 dgraph 服务器上制作副本并不难，而是您需要真正考虑的回滚过程。您需要设置它并确保它使用您制作的任何备份副本，无论是在 ITL 机器本地还是在 dgraph 服务器上。

还要知道 dgidx_output 不会包含自创建索引以来添加的任何部分更新信息。部分更新信息仅在 dgraph 服务器上的 dgraph_input 中可用。因此，如果您合并部分更新，您应该归档 dgraph 输入并使其可用于任何回滚作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T19:09:32.907

您可以创建 DGRAPH 启动后任务并在图形定义中分配它。它将在每次 MDEX 启动时执行

```
<dgraph id="Dgraph01" host-id="LiveMDEXHost01" port="10000" pre-shutdown-script="DgraphPreShutdownScript" post-startup-script="DgraphPostStartupScript">

 <script id="DgraphPostStartupScript">
    <bean-shell-script>
      <![CDATA[
...code to backup here
   ]]>
    </bean-shell-script>
  </script> 
```

# wpf - 从 ColumnDefinition 宽度 XAML WPF 绑定文本框宽度

> ID：15743501
> 
> 赞同：2
> 
> 时间：2013-04-01T12:29:31.443
> 
> 标签：wpf, xaml, binding, textbox, width

在我的 WPF 项目中，我想从 ColumnDefinition Width 绑定 TextBox Width 属性。现在，它不工作了！

我使用转换器（GridLengthConverter）将数据转换为宽度。

这是我的代码：

```
<TextBox Grid.Column="1" Grid.Row="1" Style="{StaticResource SearchWhite}"  Name="tbSearch"
Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type mic:DataGrid}},
Path=ShowSearchBoxes, Converter={StaticResource visibleConverter}}" Width="{Binding
RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type ColumnDefinition}},
Path=Width, Converter={StaticResource gridLengthConverter}, Mode=TwoWay}"/> 
```

gridLengthConverter 是来自程序集的 GridLengthConverter：PresentationFramework。

我收到一个错误“无法转换数据属性'转换器'...”（法语翻译）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:42:48.000

```
<Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Name="col1" Width="200"/>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <TextBox Width="{Binding ElementName=col1, Path=Width}" 
                 Grid.Column="0" Height="20"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T11:20:26.317

如果您将文本框绑定到第 1 列的宽度，您需要做的就是忽略 Width 属性定义并设置`HorizontalAlignment = "Stretch"`

例如：

```
<Grid>
    <Grid.ColumnDefinitions>
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="100" />
    </Grid.ColumnDefinitions>

    <TextBox Grid.Column = "1" HorizontalAlignment="Stretch" Height="120" Name="textBox1" />
</Grid> 
```

文本框现在应该是高度 120 和宽度 100。

# facebook - 如何正确设置带有地图附件的 Facebook OpenGraph API 故事？

> ID：15743503
> 
> 赞同：3
> 
> 时间：2013-04-01T12:29:36.057
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试为我的网站/Facebook 应用程序设置一个自定义故事，以根据以下文档为我的用户提供“我一直在这里”和“我想访问这个地方”功能：[https://developers.facebook。 com/docs/opengraph/creating-custom-stories/](https://developers.facebook.com/docs/opengraph/creating-custom-stories/)

一切都很好，除了当我想在地图上显示这个项目时，我的应用程序中的“故事”作为带有照片和描述的正常项目布局出现在时间轴上。

带有 OG 数据的示例 URL：[http](http://en.advisor.travel/poi/16828) ://en.advisor.travel/poi/16828 ：

```
<meta property="place:location:latitude" content="36.25500"/>
<meta property="place:location:longitude" content="-112.69770"/>
<meta property="og:image" content="http://img1.advisor.travel/657x340px-bd308129ce37a06485dfe9ac47bee982.jpg"/>
<meta property="og:title" content="Havasu Falls"/>
<meta property="og:url" content="http://en.advisor.travel/poi/16828"/>
<meta property="og:type" content="worldpoi:attraction"/> 
```

正如你所看到的，我也提供了位置坐标。

故事是使用名为“想要访问”的自定义操作创建的，该操作具有从 Place 对象继承的自定义属性 Attraction。这个故事的附件布局设置为“*突出显示点*”属性设置为“attraction.place:location”的地图。

以下是附件的外观：[http ://dl.dropbox.com/u/16514036/Screenshots/bkpm.png](http://dl.dropbox.com/u/16514036/Screenshots/bkpm.png)

我究竟做错了什么？:)

PS：此动作目前设置为开发模式，无法进行外部测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:26:21.700

似乎由于某种原因，从 Place 对象扩展的 Object 的默认“place:location:attribute”不起作用。您应该将自己的 GeoPoint 属性添加到 Object 并在页面上进行设置：

```
<meta property="your_namespace:location_attribute:latitude" content="36.25500"/>
<meta property="your_namespace:location_attribute:longitude" content="-112.69770"/> 
```

在这种情况下，动作将正确地发布为地图。

# android - 如果设置为第二天，Android 通知将不起作用

> ID：15743505
> 
> 赞同：0
> 
> 时间：2013-04-01T12:29:49.070
> 
> 标签：android, notifications, broadcastreceiver

我制作了一个程序，它使用广播接收器来创建警报（几天后激活）。

时间到了，它应该播放通知。

我尝试将时间设置为几分钟、几小时，并且始终播放通知。

然而，在实际测试中，当时间超过一天时，通知不起作用。

未来广播接收器的设置是否有限制？

这是我的代码：[http://pastebin.com/JnxVExtK]

假设今天是星期日 5:00。如果我在周日 7:09 设置闹钟 - 它会响起。

但是，如果我将星期三的闹钟设置为 3:00 - 它将无法正常工作。

显然我不能长时间设置模拟器。

我一直在我的平板电脑上尝试该程序，如果警报设置为几天后响起，通知也无法显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:50:39.747

放松两个步骤并完美安排任务

```
1.create date object

Date dateobj=new Date(year-1900,month,day,hour,min);    

year - scheduling Year month-scheduling month(0-11) day-scheduling
day (1-30) hour scheduling hour (24 hrs format )(0-24) min
scheduling min 0-59

2\. set the alarm to dateobj.getTime() its returns milli seconds 

alarmManager.set(AlarmManager.RTC_WAKEUP, dateobj.getTime(),
pendingIntent); 
```

# ruby-on-rails - 如何在 ruby on rails 中从应用程序中停用和激活用户

> ID：15743506
> 
> 赞同：0
> 
> 时间：2013-04-01T12:29:52.480
> 
> 标签：ruby-on-rails, admin, dashboard

我在我的 ruby​​ on rails 应用程序中实现仪表板工具，只有管理员可以进入并查看所有在应用程序中注册的用户。从仪表板，管理员可以停用或激活用户（可能是一段时间）。我有包含 is_active 列的用户表。我知道，可以通过在表格的这一列上设置标志来完成。能否请您详细解释一下。

以下是我的用户表。

```
create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.boolean  "is_admin"
    t.boolean  "is_active"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
    t.string   "username"
  end 
```

请帮助我从应用程序中实现用户的激活和停用（管理员只能这样做）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:57:54.110

您可以在模型中创建两种方法`User`来激活和停用用户

```
class User < ActiveRecord::Base

 def activate_account!
   update_attribute :is_active, true
 end

 def deactivate_account!
   update_attribute :is_active, false
 end
end 
```

由于`is_active`列的类型是布尔型，您可以使用`user.is_active?`rails 生成的方法来检查用户的帐户是否处于活动状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:35:23.113

对于您，我建议您研究 CanCan 或其他授权宝石。在您提供的迁移中，您对此无能为力，因此我建议您查看有关实施 cancan 的截屏视频。

[http://railscasts.com/episodes/192-authorization-with-cancan](http://railscasts.com/episodes/192-authorization-with-cancan)

# python - Google 应用引擎 - 代码中的错误

> ID：15743512
> 
> 赞同：0
> 
> 时间：2013-04-01T12:30:33.687
> 
> 标签：python

我的代码是这样的：

```
import webapp2
import re
form = """<html>
<form method=post>
<input name="username"><div id=div>%s</div><br>
<input name="password"><div id=div>%s</div><br>
<input name="verify"><div id=div>%s</div><br>
<input name="email"><div id=div>%s</div>
<input type="submit">
</form>
</html>"""
class MainPage(webapp2.RequestHandler):
  def get(self):
      self.response.headers['Content-Type'] = 'text/html'
      self.response.write(form % ('','','',''))

  def reply(self,user,password,verify,email):
      if not user and password and verify and email:
        self.redirect('/broski')
      else:
        self.response.write(form % (user,password,verify,email))

  def post(self):
      self.usererror = ''
      if not re.compile(r"^[a-zA-Z0-9_-]{3,20}$").match(self.request.get('username')):
       self.usererror = "That's not a valid username."
      self.passworderror = ''
      if not re.compile(r"^.{3,20}$").match(self.request.get('password')):
        self.passworderror = "That wasn't a valid password."
      self.verifyerror = ''
      if self.request.get('verify') != self.request.get('password') and self.request.get('password') != '':
        self.verifyerror = "Your passwords didn't match."
      self.emailerror = ''
      if not re.compile(r"^[\S]+@[\S]+\.[\S]+$").match(self.request.get('email')):
        self.emailerror = "That's not a valid email."
      self.reply(usererror,passworderror,verifyerror,emailerror)

class ThankYo(webapp2.RequestHandler):
  def get(self):
      self.response.write('Welcome, ' + self.request.get('username')+'!')

app = webapp2.WSGIApplication([('/', MainPage),('/broski', ThankYo)],
                              debug=True) 
```

这实际上是我第一次为超过 10 行的 GAE（而且我是 python 新手..）编写代码，当然，他打破了。我发现了几个错误，但绝对可以帮助，因为该网站甚至还没有加载。非常感谢有关代码的帮助。更新：我更新了一点（更改了ThankYo的继承），现在表单成功加载，一旦我发布数据，它就会崩溃......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:36:25.757

```
class ThankYo(Mainpage): 
```

应该

```
class ThankYo(MainPage): 
```

（注意大写`P`）。

* * *

我通过查看终端中留下的错误消息发现了这一点：

```
% dev_appser  File "/home/unutbu/pysrc/project/main.py", line 38, in <module>
...
    class ThankYo(Mainpage):   
NameError: name 'Mainpage' is not defined 
```

* * *

也改变

```
self.reply(usererror,passworderror,verifyerror,emailerror) 
```

到

```
self.reply(self.usererror, self.passworderror, self.verifyerror, self.emailerror) 
```

* * *

我通过查看终端错误消息再次发现了这一点：

```
 File "/home/unutbu/pysrc/project/main.py", line 39, in post
    self.reply(usererror, passworderror, verifyerror, emailerror)
NameError: global name 'usererror' is not defined 
```

* * *

**如何查看错误消息（来自终端）：**

启动 GAE 服务器的方法不止一种。我这样做的方法是打开终端并运行

```
dev_appserver.py /path/to/project/ 
```

然后终端会发出有用的错误消息。

* * *

最后一个问题有点复杂。我们正在向该`reply`方法发送错误消息：

```
self.reply(self.usererror, self.passworderror, self.verifyerror, self.emailerror) 
```

但在`reply`方法定义中，我们称它们为`user`、和。这会导致一些认知失调。让我们重命名它们,和:`password``verify``email``usererror``passworderror``verifyerror``emailerror`

```
def reply(self, usererror, passworderror, verifyerror, emailerror): 
```

现在检查没有错误使用：

```
if not any(usererror and passworderror and verifyerror and emailerror): 
```

但是我们要重定向到的页面需要用户名！如果我们只是重定向到`/broksi`：

```
 self.redirect('/broski') 
```

那么`ThankYo`处理程序不知道用户名是什么。`self.request.get('username')`会出现空白（返回一个空字符串）。所以我们需要将用户名传递给`broski`：

```
import urllib

self.redirect('/broski?' + urllib.urlencode(
            {'username' : self.username})) 
```

* * *

所以代码最终看起来像这样：

```
import urllib
import webapp2
import re
form = """<html>
<form method=post>
<input name="username"><div id=div>%s</div><br>
<input name="password"><div id=div>%s</div><br>
<input name="verify"><div id=div>%s</div><br>
<input name="email"><div id=div>%s</div>
<input type="submit">
</form>
</html>"""

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/html'
        self.response.write(form % ('', '', '', ''))

    def reply(self, usererror, passworderror, verifyerror, emailerror):
        if not any(usererror and passworderror and verifyerror and emailerror):
            self.redirect('/broski?' + urllib.urlencode(
                {'username' : self.username}))
        else:
            self.response.write(form % (user, password, verify, email))

    def post(self):
        self.username = self.request.get('username')
        self.password = self.request.get('password')
        self.verify = self.request.get('verify')
        self.email = self.request.get('email')
        self.usererror = ''
        if not re.compile(r"^[a-zA-Z0-9_-]{3,20}$").match(self.username):
            self.usererror = "That's not a valid username."
        self.passworderror = ''
        if not re.compile(r"^.{3,20}$").match(self.password):
            self.passworderror = "That wasn't a valid password."
        self.verifyerror = ''
        if self.verify != self.password and self.password != '':
            self.verifyerror = "Your passwords didn't match."
        self.emailerror = ''
        if not re.compile(r"^[\S]+@[\S]+\.[\S]+$").match(self.email):
            self.emailerror = "That's not a valid email."
        self.reply(self.usererror, self.passworderror, self.verifyerror, self.emailerror)

class ThankYo(MainPage):
    def get(self):
        self.response.write('Welcome, ' + self.request.get('username') + '!')

app = webapp2.WSGIApplication([('/', MainPage), ('/broski', ThankYo)],
                              debug=True) 
```

# ruby-on-rails - 为什么从我的 Sinatra 应用程序返回的 JSON 会出现语法错误？

> ID：15743513
> 
> 赞同：0
> 
> 时间：2013-04-01T12:30:33.797
> 
> 标签：ruby-on-rails, json, sinatra

我正在开发一个返回 JSON 的 Sinatra 应用程序，例如

```
 get '/clients' do

     # do stuff

     response = {
       "success" => "true",
       "msg" => "Clients successfully retrieved",
       "data" => {"clients" => @current_user.clients}
     }
     return response.to_json
  end 
```

返回的 JSON 如下所示：

```
{"success":"true","msg":"Clients successfully retrieved","data":{"clients":[{"client":{"created_at":"2013-03-31T22:50:18Z","email":"test@test.com","first_name":"Marge","gender":"F","hairdresser_id":2,"id":1,"surname":"Simpson","updated_at":"2013-03-31T22:50:18Z"}}]}} 
```

当我将它复制并粘贴到 JSON 解析器中时，它工作正常。 [http://json.parser.online.fr/](http://json.parser.online.fr/)

但是当我启动 irb 并尝试使用它时，我得到了一堆错误：

```
1.9.3-p286 :001 > a = {"success":"true","msg":"Clients successfully retrieved","data":{"clients":[{"client":{"created_at":"2013-03-31T22:50:18Z","email":"test@test.com","first_name":"Marge","gender":"F","hairdresser_id":2,"id":1,"surname":"Simpson","updated_at":"2013-03-31T22:50:18Z"}}]}}
SyntaxError: (irb):1: syntax error, unexpected ':', expecting tASSOC
a = {"success":"true","msg":"Clients success...
           ^
(irb):1: syntax error, unexpected ',', expecting $end
a = {"success":"true","msg":"Clients successfully r...
                  ^
  from /home/[me]/.rvm/rubies/ruby-1.9.3-p286/bin/irb:13:in `<main>'
1.9.3-p286 :002 > 
```

任何人都可以提供任何见解？难道我做错了什么？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:34:41.470

## 问题

JSON 不构成有效的 Ruby [hash](http://ruby-doc.org/core-2.0/Hash.html)。这是一个需要用[JSON#parse 解析](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/JSON.html#method-i-parse)的字符串。

## 解决方案

通过将 JSON 括在单引号或 Ruby 引号文字中，将其解析为字符串。例如：

```
JSON.parse %q/{"success":"true","msg":"Clients successfully retrieved","data":{"clients":[{"client":{"created_at":"2013-03-31T22:50:18Z","email":"test@test.com","first_name":"Marge","gender":"F","hairdresser_id":2,"id":1,"surname":"Simpson","updated_at":"2013-03-31T22:50:18Z"}}]}}/
=> {"success"=>"true",
 "msg"=>"Clients successfully retrieved",
 "data"=>
  {"clients"=>
    [{"client"=>
       {"created_at"=>"2013-03-31T22:50:18Z",
        "email"=>"test@test.com",
        "first_name"=>"Marge",
        "gender"=>"F",
        "hairdresser_id"=>2,
        "id"=>1,
        "surname"=>"Simpson",
        "updated_at"=>"2013-03-31T22:50:18Z"}}]}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:38:14.723

您的哈希具有表示为 { key : value } 的键值对，但 ruby​​ 使用 '=>' 符号将键映射到值。

尝试将'：'替换为'=>'，它工作正常。

```
eg) a = {"success" => "true"} 
```

如果您想将此 Json 解析为 ruby​​，请使用以下代码段：

```
require 'json'
value = "{\"val\":\"test\",\"val1\":\"test1\",\"val2\":\"test2\"}"
puts JSON.parse(value) # => {"val"=>"test","val1"=>"test1","val2"=>"test2"} 
```

# java - WebApplication中的EHCache配置

> ID：15743515
> 
> 赞同：0
> 
> 时间：2013-04-01T12:30:35.767
> 
> 标签：java, grails, ehcache

我已经编写了下面的代码来获取 cacheManager 对象

```
public class EHCacheUtil implements Serializable{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    public static CacheManager cacheMgr = null;

    private static Ehcache getCache(String cacheName) throws Exception{
        if(cacheMgr == null){
            File file = new File("F:\\ProjectWorkSpace\\src\\java\\ehcache.xml");

                // We could use an environment or a VM variable
                cacheMgr = CacheManager.create(new FileInputStream(file));
                System.out.println("cacheMgr.cacheExists(cacheName)"+cacheMgr.cacheExists(cacheName));
        }

        Ehcache cache = null;
        if(cacheMgr!=null){
                //cache = cacheMgr.addCacheIfAbsent(name);
                cache = cacheMgr.getEhcache(cacheName);
        }

        return cache;
} 
```

ehcache.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="http://ehcache.sf.net/ehcache.xsd">

<diskStore path="G:\EHCacheTempMemory" />

<defaultCache maxElementsInMemory="10000" eternal="false"
overflowToDisk="true" timeToIdleSeconds="10" timeToLiveSeconds="20" diskPersistent="true" />

<cache name="myCache1"
maxElementsInMemory="500000"
maxElementsOnDisk="500000"
eternal="false"
overflowToDisk="true"
timeToIdleSeconds="864000"
timeToLiveSeconds="8640000"
diskPersistent="true"
diskSpoolBufferSizeMB="20"
diskExpiryThreadIntervalSeconds="8640000"
memoryStoreEvictionPolicy="LFU" />

</ehcache> 
```

SOP 打印适用于独立应用程序，但不适用于 Web 应用程序。有人可以解释这个问题吗？

# php - 使用用户输入显示服务器状态

> ID：15743516
> 
> 赞同：2
> 
> 时间：2013-04-01T12:30:36.530
> 
> 标签：php, html, css, wordpress

你将不得不原谅我的 PHP 是无辜的，但我从未正式研究过那个 launguge 和它自 HTML 课以来一直存在的时间。

我写了这个

```
<form>
<input type="text" name='address' />
<input type="text" name='port' />
</form>

<?php
// Script by Akensai

$ip = $_POST['address'];
$port = $_POST['port'];

if (!$socket = @fsockopen($ip, $port, $errno, $errstr, 30))
{
  echo "<font color='red'><strong>Offline!</strong></font>";
}
else 
{
  echo "<font color='green'><strong>Online!/strong></font>";  

  fclose($socket);
}

?> 
```

我正在尝试实现地址和端口的用户输入，将这些值与 if 语句进行比较，以确定地址是否基本上可以 ping，如果是，则相应地回显语句。

如果你们中的任何一个好的程序可以告诉我这是否可行，或者是否不能相应地修复错误。

我的网站正在使用 word press，我正在尝试将此 PHP 和 HTML 添加到 PHP 小部件中，该小部件不会加载我的代码，所以以太 1\. 小部件有问题或 2\. 我的代码是。

谢谢你的时间本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:35:57.560

你应该写 -

```
<form method="post" action="">
<input type="text" name='address' />
<input type="text" name='port' />
<input type="submit" name='submit' value = 'submit' />
</form> 
```

为您的 html。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:33:23.393

您必须`method="post"`在`<form>`标签中提供

```
<form method="post"> 
```

# apache - 添加尾部斜杠并删除 .htaccess

> ID：15743526
> 
> 赞同：0
> 
> 时间：2013-04-01T12:31:10.220
> 
> 标签：apache, .htaccess, mod-rewrite, trailing-slash

我该怎么做这样的事情： website.com/store/ 重定向到 website.com/store website.com/outbound/store/5 重定向到 website.com/outbound/store/5/

我想要的是对于没有前缀的 url 来删除斜杠，对于那些有前缀的 URL 来添加斜杠

我的.htaccess：

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.+)/$ /$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^pa/?$ /admin/index.php [L,QSA] 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/?$ stores.php?store=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^outbound/([^/]*)/([^/]*)$ /outbound.php?type=$1&id=$2 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:10:25.933

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /

# force tailing slash for all urls starting with /outbound/
RewriteRule ^outbound/.*[^/]$ /$0/ [R=301,L]

#remove tailing slash for all except urls starting with /outbound/
RewriteCond $1 !^outbound/
RewriteRule ^(.+)/$ /$1 [R=301,L]

RewriteRule ^pa/?$ /admin/index.php [L,QSA] 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^outbound/([^/]*)/([^/]*)/$ /outbound.php?type=$1&id=$2 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)$ stores.php?store=$1 [L] 
```

我也清理了一下。

# android - 如何在 Android 中创建自定义开关按钮

> ID：15743528
> 
> 赞同：0
> 
> 时间：2013-04-01T12:31:13.987
> 
> 标签：android, button

我正在研究使用切换按钮的 android 编程。

但我无法实现像 O、I simbols 这样的开关按钮（你可以看到 android 设置屏幕）。

我试图实现使用这些属性（android：thumb，android：track）

但我无法实现 simbol(O, I)。

你知道怎么做吗？我真的试图找到答案，但我没有成功。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-26T16:18:33.397

您可以在 activity_main.xml 中使用以下属性：

```
 <Switch
    android:id="@+id/switch1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:checked="true"
    android:textOn="I" 
    android:textOff="O"
    /> 
```

希望对你有帮助..

# java - 使用 java 恢复 PostgreSQL 数据库

> ID：15743529
> 
> 赞同：1
> 
> 时间：2013-04-01T12:31:14.753
> 
> 标签：java, postgresql, runtime.exec

我使用以下代码使用 java 还原 PostgreSQL 数据库

```
 Runtime r = Runtime.getRuntime();
 Process p;
 String cmd ="D:/Program Files/PostgreSQL/9.1/bin/pg_restore.exe --host localhost --port 5432 --username postgres --dbname mytestqq --role postgres --no-password  --verbose D:\sathish\rawDatabase.backup";
 p = r.exec(cmd); 
```

我在 rawDatabase.backup 文件中有 42 个表，但只有一个表正在恢复为什么其余表没有发生我的代码有什么问题？提前致谢！！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T12:37:03.970

令人惊讶的是，您显示的命令完全有效，因为您没有引用命令路径中的空格。尝试：

```
String[] cmd = {
    "D:\\Program Files\\PostgreSQL\\9.1\\bin\\pg_restore.exe",
    "--host", "localhost",
    "--port", "5432",
    "--username", "postgres",
    "--dbname", "mytestqq",
    "--role", "postgres",
    "--no-password",
    "--verbose",
    "D:\\sathish\\rawDatabase.backup"
};
p = r.exec(cmd); 
```

变化：

*   将单字符串形式转换为更安全的`exec`调用参数数组形式；
*   `rawDatabase`由于您的原始命令无法转义反斜杠，因此将路径中的反斜杠加倍，`\r`字符串中的回车而不是`\`字符后跟`r`字符也是如此。
*   在程序路径上切换到双反斜杠而不是正斜杠以保持一致性。这种变化可能无关紧要。

还要检查进程的返回状态。[`Process.waitFor()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#waitFor%28%29)退出使用后，您必须使用then[`Process.exitValue()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#exitValue%28%29)来确定结果。您应该检查对象捕获的 stderr 和 stdout`Process`中的错误和日志信息。

您的程序继续无法运行的原因可能是因为：

*   你有旧的`pg_restore`进程挂在锁上；和/或
*   您没有使用 stdout 和 stderr ，因此`pg_restore`缓冲管道空间不足并阻止写入输出流。

[如果您改用`ProcessBuilder`，](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#start%28%29)这一切都会简单得多。ProcessBuilder 允许您提供文件流以将输出写入其中，并且通常会为您处理很多事情。您仍然必须等待进程终止并检查其返回码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T04:53:52.213

最后我得到了解决方案

```
Runtime r = Runtime.getRuntime();
Process p;
ProcessBuilder pb;
r = Runtime.getRuntime();
pb = new ProcessBuilder( 
    "D:\\Program Files\\PostgreSQL\\9.1\\bin\\pg_restore.exe",
    "--host=localhost",
    "--port=5432",
    "--username=postgres",
    "--dbname=mytestqq",
    "--role=postgres",
    "--no-password",
    "--verbose",
   "D:\\sathish\\rawDatabase.backup");
pb.redirectErrorStream(true);
p = pb.start();
InputStream is = p.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String ll;
while ((ll = br.readLine()) != null) {
 System.out.println(ll);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T13:04:32.697

以下代码完美地使用 JAVA 代码获取 postgres DB 转储..试试这个

```
List<String> cmds = new ArrayList<String>();
         cmds.add("C:\\Program Files\\PostgreSQL\\9.1\\bin\\pg_dump.exe");
         cmds.add("-i");
         cmds.add("-h");
         cmds.add("localhost");
         cmds.add("-p");
         cmds.add("5432");
         cmds.add("-U");
         cmds.add("YOUR PG USERNAME");
         cmds.add("-F");
         cmds.add("c");
         cmds.add("-b");
         cmds.add("-v");
         cmds.add("-f");
         cmds.add("\"E:\\pg_dump.backup\"");//Location to store db Dump backup
         cmds.add("lmd");
         ProcessBuilder process = new ProcessBuilder();
         process.command(cmds).start(); 
```

# java - 一种 Java 方法，用于重复返回一个然后返回两个中的另一个

> ID：15743530
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:31:22.540
> 
> 标签：java, string, methods

我要定义的方法是返回“BLACK”或“WHITE”字符串。我将在棋盘游戏主要方法中使用它。

第一次返回“黑色”。第二次返回“黑色”。第三次返回“WHITE”，第四次返回“WHITE”。

然后，它反复返回“BLACK”、“WHITE”、“BLACK”、“WHITE”等。

我该如何实施？

我打算定义一个 String 的 Node 类，创建两个具有 next 和 prev 字段的节点，并返回 this._next._getDatum(); 但我认为它不会起作用，而且它使我的代码过于复杂。

你对完成这个有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:35:57.027

为了每次返回不同的东西，你的方法需要保持状态。在 Java 中，使用实例变量或类变量来保持状态。不太了解您的设计，这是一个在`"BLACK"`和之间切换的简短实现`"WHITE"`：

```
public class FlipFlop {
    boolean isWhite;
    public String getCurrent() {
        isWhite = !isWhite;
        return isWhite ? "WHITE" : "BLACK";
    }
} 
```

现在调用将在和`getCurrent`之间交替：`"BLACK"``"WHITE"`

```
static void main(String[] args) {
    FlipFlop ff = new FlipFlop();
    for (int i = 0; i != 10 ; i++) {
        System.out.println(ff.getCurrent());
    }
} 
```

这是[关于 ideone 的演示](http://ideone.com/yVy3UG)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:39:17.823

**如果**您将其包含在一个单独的方法中，您可以保存完成的移动次数并使用该数量的模来确定它是偶数还是奇数。这将允许您在两个值之间转换。

例子：

```
private static int amount = 0;
    public static void main(String[] args) {
        while(amount < 10){
            if(amount % 2 == 0){
                System.out.println("White");
            } else {
                System.out.println("Black");
            }

            amount++;
        }
    } 
```

这没有放在方法中，因为它更多地意味着作为解决此问题的一般方法。您可以轻松地将其放入方法中并将其作为值返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:34:45.280

这听起来根本不像一种方法。只需创建一个循环并放置一个简单的 IF 检查来切换值。

# iphone - 如何捕获用于过渡的屏幕截图

> ID：15743534
> 
> 赞同：0
> 
> 时间：2013-04-01T12:31:48.807
> 
> 标签：iphone, ios, ios4

我想捕获图像之间转换的屏幕截图。

```
- (UIImage *)captureView:(UIView *)view
{
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    UIGraphicsBeginImageContext(screenRect.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] set];
    CGContextFillRect(ctx, screenRect);
    [view.layer.presentationLayer renderInContext:ctx];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

我在 UIImageView 播放图像过渡期间调用此方法，但是，我只是在 UIImageView 中获得静止图像，但无法捕获图像之间的过渡。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:35:59.567

在模拟器中，您可以按 3 次 shift 来减慢动画速度，然后您也许可以捕捉到过渡。

# c# - 如何在 jquery 中获取动态跨度 ID？

> ID：15743538
> 
> 赞同：0
> 
> 时间：2013-04-01T12:32:16.387
> 
> 标签：c#, asp.net, jquery, html

我在 asp.net 中使用 jquery

我有一个用户控件，其中我有 div 和 div 表和表 tr 和 tr td 和 td 我有标签。

澳交所：

```
 <div  ID="Container" runat="server" class="dvContainer">
<table ID="Table" class = "Tablecs">
    <thead><tr>
        <td colspan="2">
            <asp:Label ID="lbl1" Text="Swiss" runat="server" /></td>
    </tr>
        </thead>
    <tr>
        <td>ABC</td>
        <td>DEF</td>
    </tr>
    <tr>
        <td><asp:Label ID="lblPA" Text="SUN 12/21 05:04" runat="server" /></td>
        <td ><asp:Label ID="lblPD" Text="SUN 12/21 19:00" runat="server" /></td>
    </tr>
        <tr>
        <td><asp:Label ID="lblAA" Text="SUN 12/21 05:04" runat="server" /></td>
        <td ><asp:Label ID="lblAD" Text="SUN 12/21 19:00" runat="server" /></td>
    </tr>
</table> 
```

我想将数据动态绑定到这些用户控件。即，将数据绑定到用户控件中的标签。

我的jQuery

```
 $div.find(".Table").text(oPorts[iCount].Name); // my result is an array of oPorts and i have filed as Name 
```

但这不能正常工作。当我动态检查代码时，它为每个标签生成 SPAN 如何在循环中动态查找 SPAN id 并将数据绑定到标签？

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:53:55.700

假设您有一个带有如下标记的用户控件

```
<%@ Control Language="C#" AutoEventWireup="true" 
 CodeBehind="WebUserControl1.ascx.cs" Inherits="DOTNET_FORMS.WebUserControl1" %>

<div id="Container" runat="server" class="dvContainer">
    <table id="Table" class="Tablecs">
        <tr>
            <td>
                <asp:Label ID="lblPA" Text="SUN 12/21 05:04" runat="server" />
            </td>
            <td>
                <asp:Label ID="lblPD" Text="SUN 12/21 19:00" runat="server" />
            </td>
        </tr>
    </table>
</div> 
```

你已经在你的`.aspx`页面上注册了这个用户控件，如下所示：

```
<%@ Register TagPrefix="UC" TagName="Test" Src="~/WebUserControl1.ascx" %> 
```

并像这样使用它：

```
<UC:Test ID="uc1" runat="server" /> 
```

然后，当您运行页面时，您的元素会呈现类似

```
<div id="uc1_Container" class="dvContainer">
    <table id="Table" class="Tablecs">
        <tr>
            <td>
                <span id="uc1_lblPA">SUN 12/21 05:04</span>
            </td>
            <td>
                <span id="uc1_lblPD">SUN 12/21 19:00</span>
            </td>
        </tr>
        <tr>
            <td>
                <span id="uc1_lblAA">SUN 12/21 05:04</span>
            </td>
            <td>
                <span id="uc1_lblAD">SUN 12/21 19:00</span>
            </td>
        </tr>
    </table>
</div> 
```

查看您的标签和其他元素（具有`runat="server"`属性的元素）的 ids 是如何改变的，即

```
lblPA > uc1_lblPA
lblPD > uc1_lblPD

Container > uc1_Container 
```

因此，您必须注意这些更改，因为只有这样您才能使用 jQuery 获取这些元素，因为 jQuery 是一种客户端语言，它在服务器端代码 (runat="server") 执行后执行。

但是，如果您不想查看修改后的 id，您可以执行以下操作

1.  删除`runat="server"`属性，并确保您的 id 是唯一的，所有这些
2.  让`runat="server"`属性成为他们的，`clientidmode="static"`在所有服务器端控件上放置一个属性。并且ID不会改变。
3.  在您的 jQuery 选择器中使用 ClientId 即，获取这样的元素：`$('#"+'<%= lblPA.ClientID %>');`

现在，由于您的 ID 是唯一的，因此您无需查找，直接抓取这样的元素：

```
$('#lblPA').text(); 
```

或者，如果您想使用 class 遍历表的所有 td，请`Tablecs`执行以下操作：

```
$('.Tablecs tr td').each(function(index, item){
             alert($(item).text());
}); 
```

# html - 导航栏中的引导下拉菜单未正确显示

> ID：15743544
> 
> 赞同：4
> 
> 时间：2013-04-01T12:32:47.303
> 
> 标签：html, twitter-bootstrap, drop-down-menu, navbar

导航栏下方包含一个未正确显示的下拉菜单，

```
<div style="margin: auto; width: 100%; margin-top: 0px">
                <div class="navbar" style="width: 100%">
                    <div class="navbar-inner">
                        <div class="container">
                            <a class="btn btn-navbar" data-toggle="collapse"
                                data-target=".navbar-responsive-collapse"> <span
                                class="icon-bar"></span> <span class="icon-bar"></span> <span
                                class="icon-bar"></span> </a>
                            <a class="brand" href="#">Acceuil</a>
                            <div class="nav-collapse collapse navbar-responsive-collapse">
                                <ul class="nav">

                                    <li class="active">
                                        <a href='acceuil/acceuil.jsp'>Notifications</a>
                                    </li>
                                    <li>
                                        <a href='acceuil/gestionIndividuelle.jsp'>Gestion individuelle</a>
                                    </li>
                                        <li>
                                        <a href='acceuil/tableaux.jsp'>Tableaux</a>
                                    </li>
                                    <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                              <ul class="dropdown-menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li class="divider"></li>
                                <li class="nav-header">Nav header</li>
                                <li><a href="#">Separated link</a></li>
                                <li><a href="#">One more separated link</a></li>
                              </ul>
                            </li>

                                    <li>
                                        <a href=''>Notes</a>
                                    </li>
                                    <li>
                                        <a href='acceuil/comptes.jsp'>comptes</a>
                                    </li>
                                </ul>

                                <ul class="nav pull-right">
                                    <li class="divider-vertical">e</li>
                                    <li>
                                        <a href="logout.do">Déconnexion</a>
                                    </li>
                                </ul>
                            </div>
                            <!-- /.nav-collapse -->
                        </div>
                    </div>
                    <!-- /navbar-inner -->
                </div>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T04:10:21.800

为什么要向已经全宽的导航栏添加内联样式？无论如何，这是你的答案：

```
<div class="navbar">
<div class="navbar-inner">
<div class="container">
<a class="btn btn-navbar" data-target=".navbar-responsive-collapse"                       data-toggle="collapse">
<a class="brand" href="#">Title</a>
<div class="nav-collapse collapse navbar-responsive-collapse">
<ul class="nav">
<li class="active"></li>
<li class="dropdown">
<a data-toggle="dropdown" class="dropdown-toggle" href="#">Dropdown   
<b class="caret"></b>
</a>

<ul class="dropdown-menu">
<li>
<a href="#">Action</a>
</li>

<li class="divider"></li>
<li class="nav-header">Nav header</li>

</ul>
</li>
<form class="navbar-search pull-left" action="">
<ul class="nav pull-right">
</div>
</div>
</div>
</div> 
```

# ruby - 厨师 - 使用动态变量创建模板？

> ID：15743546
> 
> 赞同：9
> 
> 时间：2013-04-01T12:32:58.743
> 
> 标签：ruby, chef-infra, knife

我在厨师食谱上遇到了一些挑战。我是新来的厨师，所以请多多包涵。

第 1 步：我的主厨食谱安装了 Ruby Passenger，然后将 Passenger nginx 模块与 Nginx 一起编译。

```
# Install passenger and nginx module
bash "Install Passenger" do
  code <<-EOF
  source /usr/local/rvm/scripts/rvm
  gem install passenger
  EOF
  user "root"
  not_if { `gem list`.lines.grep(/^passenger \(.*\)/).count > 0 }
end

# Install passenger
# Note that we have to explicitly include the RVM script otherwise it won't setup the environment correctly
bash "Install passenger nginx module and nginx from source" do
  code <<-EOF
  source /usr/local/rvm/scripts/rvm
  passenger-install-nginx-module --auto --prefix=/opt/nginx --auto-download
  EOF
  user "root"
  not_if { File.directory? "/opt/nginx" }
end 
```

第 2 步：之后，我使用模板创建 nginx 配置文件。此配置需要乘客的位置，这取决于步骤 1 的完成情况。

```
template "/opt/nginx/conf/nginx.conf" do
  source "nginx.conf.erb"
  action :create
  variables(
    deploy_user: deploy_user,
    passenger_root: `bash -c "source /usr/local/rvm/scripts/rvm; passenger-config --root"`.chomp,
    passenger_ruby: `bash -c "source /usr/local/rvm/scripts/rvm; which ruby"`.chomp,
    passenger: node[:passenger]
  )
end 
```

问题：Chef 似乎在运行开始时编译模板。所以最终发生的是，步骤 2 实际上是在步骤 1 运行之前编译的。这意味着passenger_root 变量为空。它需要先完成第 1 步，然后才能获取passenger_root，然后运行模板。

我尝试将步骤 2 代码包装在 a 中，`ruby_block`但这不起作用：`undefined method`Chef::Resource::RubyBlock` 的模板'。

不知道在这里做什么，或者对于这样的事情，厨师的最佳做法是什么？

提前致谢，

伦纳德

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-20T00:24:56.837

一种更简洁且推荐的方法是使用[Lazy Attribute Evaluation](http://docs.opscode.com/resource_common.html#lazy-attribute-evaluation)。

```
template "/opt/nginx/conf/nginx.conf" do
  source "nginx.conf.erb"
  action :create
  variables lazy {
    { 
      deploy_user: deploy_user,
      passenger_root: `bash -c "source /usr/local/rvm/scripts/rvm; passenger-config --root"`.strip,
      passenger_ruby: `bash -c "source /usr/local/rvm/scripts/rvm; which ruby"`.strip,
      passenger: node[:passenger]
    }
  }
end 
```

另外，我建议使用`strip`而不是`chomp`[感谢 Draco]。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T14:26:05.163

一旦将代码包装进去`ruby_block`，就不能再使用普通的配方资源声明了。你必须编写纯 ruby​​ 代码：

```
ruby_block "create /opt/nginx/conf/nginx.conf from template" do
  block do
    res = Chef::Resource::Template.new "/opt/nginx/conf/nginx.conf", run_context
    res.source "nginx.conf.erb"
    res.variables(
      deploy_user: deploy_user,
      passenger_root: `bash -c "source /usr/local/rvm/scripts/rvm; passenger-config --root"`.chomp,
      passenger_ruby: `bash -c "source /usr/local/rvm/scripts/rvm; which ruby"`.chomp,
      passenger: node[:passenger]
    )
    res.run_action :create
  end
end 
```

PS。而且我猜您想使用`strip`而不是`chomp`删除空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T13:16:57.387

是的，厨师是个野兽。我认为问题的一部分是有一百万种方法可以做同样的事情，但实际上没有详细说明最佳方法的文档。您可能想要的是使用[Notifications](http://docs.opscode.com/resource_common_notifications.html)，以便块 1 先运行，而不是通知块 2 运行。这意味着块 2 需要`action :none`在收到通知之前不会触发。

我在块 1 中将通知添加到您的示例，并将操作 :none 添加到块 2。

```
bash "Install Passenger" do
  code <<-EOF
  source /usr/local/rvm/scripts/rvm
  gem install passenger
  EOF
  user "root"
  not_if { `gem list`.lines.grep(/^passenger \(.*\)/).count > 0 }
  notifies :run, 'bash[Install passenger nginx module and nginx from source]', :immediately
end

bash "Install passenger nginx module and nginx from source" do
  code <<-EOF
  source /usr/local/rvm/scripts/rvm
  passenger-install-nginx-module --auto --prefix=/opt/nginx --auto-download
  EOF
  user "root"
  action :none
end 
```

# r - as.Date() 不尊重 POSIXct 时区

> ID：15743547
> 
> 赞同：7
> 
> 时间：2013-04-01T12:32:59.053
> 
> 标签：r, date, datetime, posixct

好的，这是从带有时区的 POSIXct 转换的 r as.Date 函数中的一个微妙的“怪癖”，我想知道这是否是一个错误。

```
> as.POSIXct("2013-03-29", tz = "Europe/London")
[1] "2013-03-29 GMT"
> as.Date(as.POSIXct("2013-03-29", tz = "Europe/London"))
[1] "2013-03-29" 
```

到目前为止没有问题，但是......

```
> as.POSIXct("2013-04-01", tz = "Europe/London")
[1] "2013-04-01 BST"
> as.Date(as.POSIXct("2013-04-01", tz = "Europe/London"))
[1] "2013-03-31" 
```

有人看到这个吗？这是一个错误还是另一个怪癖？愚人节？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T12:44:26.303

默认时区`as.Date.POSIXct`是`"UTC"`（请参阅帮助页面）。试试`as.Date(as.POSIXct("2013-04-01", tz = "Europe/London"),tz = "Europe/London")`。

# entity-framework - 用于曲目和专辑模型的 EF5 Code First Fluent EntityTypeConfiguration

> ID：15743548
> 
> 赞同：4
> 
> 时间：2013-04-01T12:32:59.203
> 
> 标签：entity-framework, ef-code-first

我正在建模音乐曲目和专辑，其中专辑有许多曲目，曲目只能在一张专辑上，并带有一个连接表来指定它在专辑列表中的位置。

这是我的模型：

```
public class Track
{
    public int Id { get; set; }
    public string Name { get; set; }

    public int AlbumTrackId { get; set; }
    public virtual AlbumTrack AlbumTrack { get; set; }
}

public class Album
{
    public int Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<AlbumTrack> AlbumTracks { get; set; }
}

public class AlbumTrack
{
    public int AlbumId { get; set; }
    public virtual Album Album { get; set; }

    public int TrackId { get; set; }
    public virtual Track Track { get; set; }

    public int Position { get; set; }
} 
```

和我的 EntityTypeConfiguration

```
public class AlbumTrackConfiguration : EntityTypeConfiguration<AlbumTrack>
{

    public AlbumTrackConfiguration()
    {
        // AlbumTrack has a composite key
        HasKey(at => new {at.AlbumId, at.TrackId});

        // AlbumTrack has one Album, Albums have many AlbumTracks
        HasRequired(at => at.Album)
            .WithMany(a => a.AlbumTracks)
            .HasForeignKey(at => at.AlbumId)
            .WillCascadeOnDelete(true);

        // AlbumTrack has one Track, Tracks have one AlbumTrack
        HasRequired(at => at.Track)
            .WithRequiredPrincipal(t=>t.AlbumTrack)
            .WillCascadeOnDelete(true);
    }

} 
```

Albums 和 AlbumTracks 之间的一对多关系很好，但除了预期之外

```
[AlbumTrackId] [int] NOT NULL, 
```

Code First 不断添加

```
[AlbumTrack_AlbumId] [int] NOT NULL,
[AlbumTrack_TrackId] [int] NOT NULL 
```

到轨道表。

如何更好地对音轨到专辑音轨的关系进行建模，以便只有我指定的属性才能在 db 字段中进行翻译？

[是的，在我的世界里，一首歌只能存在于一张专辑中！]

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T15:54:17.927

正如建议的那样，将位置作为一部分是`Track`有意义的。
但是，如果您仍然希望您的“加入”表正常工作-我个人总是宁愿将曲目、专辑与其“关联”（即位置等）分离...

为此，您需要稍微重新组织您的关系。EF/CF 未能构建它 - 因为您要求它本身不支持或预期的东西。加入，索引表总是期待另一边的“多重性”。

> 基本上，您`AlbumTrack`不再是一个“加入”表 - 而只是一个`one-on-one`带有来自 AlbumTrack`Track`的 fk 的 + 。`Album`

考虑到这一点，您可以执行以下操作 - 这将创建正确的列、索引......

```
public class Track
{
    public int Id { get; set; }
    public string Name { get; set; }
    // public int AlbumTrackId { get; set; }
    public virtual AlbumTrack AlbumTrack { get; set; }
}
public class AlbumTrack
{
    public int TrackId { get; set; } // <== this is a single primary
    public virtual Track Track { get; set; }

    public int AlbumId { get; set; }
    public virtual Album Album { get; set; }

    public int Position { get; set; }
}
public class Album
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<AlbumTrack> AlbumTracks { get; set; }
} 
```

...并使用流畅的配置：

```
modelBuilder.Entity<AlbumTrack>()
    .HasKey(at => new { at.TrackId });
    //.HasKey(at => new { at.AlbumId, at.TrackId });

modelBuilder.Entity<AlbumTrack>()
            .HasRequired(at => at.Track)
            .WithOptional(a => a.AlbumTrack);
            // .WithRequiredPrincipal(x => x.AlbumTrack);

modelBuilder.Entity<AlbumTrack>()
    .HasRequired(at => at.Album)
    .WithMany(a => a.AlbumTracks)
    .HasForeignKey(at => at.AlbumId)
    .WillCascadeOnDelete(true); 
```

...您可以像这样使用它：

```
var album1 = db.Albums.Add(new Album { Name = "Track1", });

var tr1 = db.Tracks.Add(new Track { Name = "Track1", });
var tr2 = db.Tracks.Add(new Track { Name = "Track2", });
var tr3 = db.Tracks.Add(new Track { Name = "Track3", });
var tr4 = db.Tracks.Add(new Track { Name = "Track4", });
var tr5 = db.Tracks.Add(new Track { Name = "Track5", });

db.AlbumTracks.Add(new AlbumTrack { Track = tr1, Album = album1, Position = 1 });
db.AlbumTracks.Add(new AlbumTrack { Track = tr2, Album = album1, Position = 2 });
db.AlbumTracks.Add(new AlbumTrack { Track = tr3, Album = album1, Position = 3 });
db.AlbumTracks.Add(new AlbumTrack { Track = tr4, Album = album1, Position = 4 });
db.AlbumTracks.Add(new AlbumTrack { Track = tr5, Album = album1, Position = 5 });

db.SaveChanges(); 
```

（或者您可以只“添加”专辑曲目，其余的将进入）。

**注意：**您不再需要复合键 - 因为您的 AlbumTrack 基本上仅依赖于曲目 - 即`only one record`每个曲目都有 - 带有“专辑”要附加到。
你也不需要，`// public int AlbumTrackId { get; set; }`因为那是对面，fk 在专辑曲目中。这在旧设置中也是错误的（因为您需要 fk 的“两个键” - 加入表）。

而且，要补充一点，整个结构基本上“暗示”您只是将 Track 表“拆分”为两个一对一的表，并且您也可以只使用 Track/Album。但这有其自身的优势——虽然你有额外的连接和读/写（不利的一面），但你可以获得一些灵活性——或者例如稍后你可以通过普通的连接表等来关联它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:50:28.173

不完全是一个答案，但我不明白为什么您需要一个中间表作为该职位。为什么不这样做：

```
public class Track
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Position { get; set; }
}

public class Album
{
    public int Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Track> Tracks { get; set; }
} 
```

# java - 无法使用 SSDP 接收正确的 UDP 数据包

> ID：15743550
> 
> 赞同：7
> 
> 时间：2013-04-01T12:33:03.277
> 
> 标签：java, android, udp, ssdp

我正在尝试将一个非常简单的 SSDP 功能实现到[从这里](https://code.google.com/p/android-dlna/source/browse/trunk/src/org/ray/?r=2#ray/upnp/ssdp)获取的我的 android 应用程序中。

我的应用程序将一些包含相关 M-SEARCH 消息的 UDP 数据包发送到广播地址，没有任何问题。问题是，我应该从运行 UPNP 服务器的其他设备得到正确的响应。出于某种原因，我只收到了从我的 android 设备发送回来的完全相同的数据包。

MainActivity.java

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE);
        WifiManager.MulticastLock multicastLock = wm.createMulticastLock("multicastLock"); 
        multicastLock.setReferenceCounted(true);
        multicastLock.acquire();

        setContentView(R.layout.activity_main);

        ((Button)this.findViewById(R.id.btnSendSSDPSearch)).setOnClickListener(this);
    }

@Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btnSendSSDPSearch:
            new Thread(new Runnable() {

                @Override
                public void run() {
                    SendMSearchMessage();
                }
            }).start();

        default:
            break;
        }
    }

private void SendMSearchMessage() {

                SSDPSearchMsg searchContentDirectory = new SSDPSearchMsg(SSDPConstants.ST_ContentDirectory);
    SSDPSearchMsg searchAVTransport = new SSDPSearchMsg(SSDPConstants.ST_AVTransport);
    SSDPSearchMsg searchProduct = new SSDPSearchMsg(SSDPConstants.ST_Product);

    SSDPSocket sock;
    try {
        sock = new SSDPSocket();
        for (int i = 0; i < 2; i++) { 
            sock.send(searchContentDirectory.toString());
            sock.send(searchAVTransport.toString());
            sock.send(searchProduct.toString());
        }

      while (true) {
            DatagramPacket dp = sock.receive(); //Here, I only receive the same packets I initially sent above
            String c = new String(dp.getData());
            System.out.println(c); 
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.e("M-SEARCH", e.getMessage());

    } 
```

SSDPSocket.java 实际完成 UDP 数据包传输的地方

```
public class SSDPSocket {
    SocketAddress mSSDPMulticastGroup;
    MulticastSocket mSSDPSocket;
    InetAddress broadcastAddress;

    public SSDPSocket() throws IOException {
        mSSDPSocket = new MulticastSocket(55325); //Bind some random port for receiving datagram
        broadcastAddress  = InetAddress.getByName(SSDPConstants.ADDRESS);
        mSSDPSocket.joinGroup(broadcastAddress);
    }

    /* Used to send SSDP packet */
    public void send(String data) throws IOException {
        DatagramPacket dp = new DatagramPacket(data.getBytes(), data.length(),
                broadcastAddress,SSDPConstants.PORT);

        mSSDPSocket.send(dp);
    }

    /* Used to receive SSDP packet */
    public DatagramPacket receive() throws IOException {
        byte[] buf = new byte[1024];
        DatagramPacket dp = new DatagramPacket(buf, buf.length);

        mSSDPSocket.receive(dp);

        return dp;
    }

    public void close() {
        if (mSSDPSocket != null) {
            mSSDPSocket.close();
        }
    }
} 
```

SSDPSearchMsg.java 用于构建 SSDP 广播字符串（可能与我遇到的问题无关，但以防万一）

```
public class SSDPSearchMsg {
    static final String HOST = "Host:" + SSDP.ADDRESS + ":" + SSDP.PORT;
    static final String MAN = "Man:ssdp:discover";
    static final String NEWLINE = System.getProperty("line.separator");

    int mMX = 3;    /* seconds to delay response */
    String mST;     /* Search target */

    public SSDPSearchMsg(String ST) {
        mST = ST;
    }

    public int getmMX() {
        return mMX;
    }

    public void setmMX(int mMX) {
        this.mMX = mMX;
    }

    public String getmST() {
        return mST;
    }

    public void setmST(String mST) {
        this.mST = mST;
    }

    @Override
    public String toString() {
        StringBuilder content = new StringBuilder();

        content.append(SSDP.SL_MSEARCH).append(NEWLINE);
        content.append(HOST).append(NEWLINE);
        content.append(MAN).append(NEWLINE);
        content.append(mST).append(NEWLINE);
        content.append("MX:" + mMX).append(NEWLINE);
        content.append(NEWLINE);

        return content.toString();
    }
} 
```

SSDPConstants.java

```
public class SSDPConstants {
    /* New line definition */
    public static final String NEWLINE = "\r\n";

    public static final String ADDRESS = "239.255.255.250";
    public static final int PORT = 1900;

    /* Definitions of start line */
    public static final String SL_NOTIFY = "NOTIFY * HTTP/1.1";
    public static final String SL_MSEARCH = "M-SEARCH * HTTP/1.1";
    public static final String SL_OK = "HTTP/1.1 200 OK";

    /* Definitions of search targets */
    public static final String ST_RootDevice = "St: rootdevice";
    public static final String ST_ContentDirectory = "St: urn:schemas-upnp-org:service:ContentDirectory:1";
    public static final String ST_AVTransport = "St: urn:schemas-upnp-org:service:AVTransport:1";
    public static final String ST_Product = "St: urn:av-openhome-org:service:Product:1";

    /* Definitions of notification sub type */
    public static final String NTS_ALIVE = "NTS:ssdp:alive";
    public static final String NTS_BYE = "NTS:ssdp:byebye";
    public static final String NTS_UPDATE = "NTS:ssdp:update";
} 
```

我还确保清单包含相关权限：

```
 <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我正在实际设备上测试应用程序，而不是在模拟器上。

任何援助将不胜感激。

根据评论编辑：

多播本身应该可以正常工作。我下载了一个名为 BubbleUPNP 的应用程序来测试 SSDP 功能。果然，wireshark 正确地捕获了所有从手机发送到 SSDP 协议中的广播地址的消息：

```
M-SEARCH * HTTP/1.1

Man: "ssdp:discover"

Mx: 3

Host: 239.255.255.250:1900

St: urn:schemas-upnp-org:service:AVTransport:1 
```

和回应

```
HTTP/1.1 200 OK

ST:urn:schemas-upnp-org:service:ContentDirectory:1

USN:uuid:d5829e90-73ce-4213-9ad1-4e75dbdd0232::urn:schemas-upnp-org:service:ContentDirectory:1

Location:http://10.175.95.4:2869/upnphost/udhisapi.dll?content=uuid:d5829e90-73ce-4213-9ad1-4e75dbdd0232

OPT:"http://schemas.upnp.org/upnp/1/0/"; ns=01

01-NLS:05f3dd08b4b4b5aafa1fe983fa447f49

Cache-Control:max-age=900

Server:Microsoft-Windows-NT/5.1 UPnP/1.0 UPnP-Device-Host/1.0 
```

所以，是的，毫无疑问，这是一个实施问题。设备没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-09T05:53:36.803

奇怪的。我解决了这个问题，但我真的不确定是什么使它起作用。

以下是我所做的一些更改：

我没有分配固定端口，而是让它动态分配一个可用端口。

```
public class SSDPSocket {
    SocketAddress mSSDPMulticastGroup;
    MulticastSocket mSSDPSocket;
    InetAddress broadcastAddress;

    public SSDPSocket() throws IOException {

        mSSDPSocket = new MulticastSocket();
        broadcastAddress  = InetAddress.getByName(SSDPConstants.ADDRESS);
        mSSDPSocket.joinGroup(broadcastAddress);
    }
...
} 
```

我还更改了 M-Search 消息结构，包括其顺序。

```
public class SSDPSearchMsg {
    static final String HOST = "Host: " + SSDPConstants.ADDRESS + ":" + SSDPConstants.PORT;
    static final String MAN = "Man: \"ssdp:discover\"";
    static final String NEWLINE = "\r\n";

    int mMX = 3;    /* seconds to delay response */
    String mST;     /* Search target */

    public SSDPSearchMsg(String ST) {
        mST = ST;
    }

    public int getmMX() {
        return mMX;
    }

    public void setmMX(int mMX) {
        this.mMX = mMX;
    }

    public String getmST() {
        return mST;
    }

    public void setmST(String mST) {
        this.mST = mST;
    }

    @Override
    public String toString() {
        StringBuilder content = new StringBuilder();

        content.append(SSDPConstants.SL_MSEARCH).append(NEWLINE);
        content.append(MAN).append(NEWLINE);
        content.append("Mx: " + mMX).append(NEWLINE);
        content.append(HOST).append(NEWLINE);
        content.append(mST).append(NEWLINE);
        content.append(NEWLINE);

        return content.toString();
    }
} 
```

一切都突然起作用了。为什么它起作用超出了我的范围。据我所知，我之前的实现遵循 SSDP 协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:00:07.463

可能的答案是您可能有一个“旧”设备。显然多播（来自 Java）在 Android 2.3.7 之前被破坏

参考：[https ://stackoverflow.com/a/9836464/139985](https://stackoverflow.com/a/9836464/139985)

另一种可能性是它是特定于设备的问题。例如像这样：[https](https://stackoverflow.com/a/3714848/139985) ://stackoverflow.com/a/3714848/139985 。（我不是说这是那个特定的问题......）

另一个是内核配置中禁用了多播：[http://code.google.com/p/android/issues/detail?id=51195](http://code.google.com/p/android/issues/detail?id=51195)

似乎有一系列不同的原因导致多播无法在各种 Android 设备上运行......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T04:21:25.923

我按照您的代码将一些单词更改为大写。有用。

```
static final String HOST = "HOST: " + SSDPConstants.ADDRESS + ":" + SSDPConstants.PORT;
static final String MAN = "MAN: \"ssdp:discover\""; 
```

不需要更改 MSEARCH 消息中的顺序。

# javascript - Parse.com Parse.Cloud 定义和运行和回调的以下代码有什么问题

> ID：15743553
> 
> 赞同：1
> 
> 时间：2013-04-01T12:33:12.653
> 
> 标签：javascript, parse-platform

[在 Parse.com 的 Cloud Code 上遇到一些代码](https://stackoverflow.com/questions/15787213/having-problems-with-some-code-on-parse-coms-cloud-code)问题时，用真实代码 VS sudo 代码重新提出问题

/* 我在这里做错了什么？

我不想重新编写所有代码来使用 Parse.Cloud.run，所以我决定创建一个函数来为我做这件事。

错误信息：

更新失败，无法加载触发器。错误是 TypeError: Object # has no method 'request'

*/

```
Parse.Cloud.define("httpx", function(request, response) {
    Parse.Cloud.httpRequest({
        url: request.params.url,
        method: request.params.method,
        headers: request.params.headers
    }, {
        success: function(httpResponse) {
            response.success(httpResponse);
        },
        error: function(httpResponse) {
            response.error(httpResponse);
        }
    });
});

function sendRequest(path, method, callback) {
    if (!initialized) {
        throw 'not initialized, call initialize(username, password) first before calling the API';
    }
    // Allows for only 2 paramiters to be passed if no method passed.
    if (typeof method == 'function') {
        callback = method;
        method = 'GET';
    }
    var type = (useHttps) ? 'http://' : 'https://';
    ////////////////////////////////////////
    var request = Parse.Cloud.run("httpx", {
        url: type + 'rest.website.com/' + path,
        method: method,
        headers: headers
    }, {
        success: function(httpResponse) {
            if (callback) {
                callback(httpResponse.text);
            }
            response.success(httpResponse.text);
        },
        error: function(httpResponse) {
            callback(httpResponse.status);
            response.error('Request failed with response code ' + httpResponse.status);
        }
    });
    //////////////////////////////////////////
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:41:17.327

```
response.success(httpResponse.text); 
```

你在哪里定义响应对象？

# javascript - 如何将 Websocket 用于 Firefox Android 插件

> ID：15743554
> 
> 赞同：2
> 
> 时间：2013-04-01T12:33:20.957
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk, fennec

我正在尝试编写一个简单的 firefox 移动插件，它使用 Websocket 与我的服务器端代码对话。

我的代码适用于桌面 Firefox 插件，但我在使用 Firefox 移动版时遇到了困难。

```
function connectToServer(aWindow) {

var ws = new MozWebSocket("ws://ipaddress:8887");  // LINE 20
// var ws = new WebSocket("ws://ipaddress:8887");
ws.onopen = function() {
    showToastMsg(aWindow, 'Sending');
    ws.send('data');
}   
ws.onmessage = function (evt) { 
    showToastMsg(aWindow, 'Display')
};  
ws.onclose = function() { 
}; 
```

我已经尝试过 MozWebSocket 和 WebSocket，但是它们都给了我类似于以下的错误：

> E/GeckoConsole(15569): [JavaScript 错误: "ReferenceError: MozWebSocket 未定义" {file: "resource://gre/modules/XPIProvider.jsm -> jar:file:///data/data/org.mozilla .firefox/files/mozilla/sq4c77hi.default/extensions/view-source@mydomain.org.xpi!/bootstrap.js" 行：20}]

任何人都知道我需要导入或做什么才能引用 WebSocket？我只想从我的 Firefox Android 插件和我的服务器端代码使用 websocket 来回发送数据。有什么建议么？

我很困惑，因为我在 Firefox 桌面插件上运行了这个设置，代码非常相似。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-17T12:18:04.943

尝试下一个解决方案

```
var ws = new Services.appShell.hiddenDOMWindow.WebSocket("ws://ipaddress:8887"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:27:35.440

您使用的是附加 SDK 吗？此代码将进入哪个文件？

首先，Mozilla 'un-prefixed' MozWebsocket 到 Websocket 前段时间：

[https://www.evernote.com/shard/s1/sh/59230d89-52f6-4f23-81de-75ab88f38c22/f9f1c0c64959ee44bdc833707efe10a9](https://www.evernote.com/shard/s1/sh/59230d89-52f6-4f23-81de-75ab88f38c22/f9f1c0c64959ee44bdc833707efe10a9)

...但是 Websocket api 仅在实际 Web 文档中可用。我过去所做的是使用 page-worker api 在后台加载文档并从工作页面连接到 Websocket 服务器：

[https://github.com/canuckistani/Jetpack-Websocket-Example](https://github.com/canuckistani/Jetpack-Websocket-Example)

有关 page-worker api 的更多信息：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/page-worker.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/page-worker.html)

未来我们计划将 HTML5 api 更直接地暴露给附加开发者。

# android - 安卓： 布局在横向上使应用程序崩溃

> ID：15743563
> 
> 赞同：0
> 
> 时间：2013-04-01T12:33:54.040
> 
> 标签：android, android-layout

我尝试使用 include 标记在横向模式下重用来自 activity_main.xml 和 contact_details.xml 的布局代码。我想在左侧显示activity_main，在右侧显示contact_details。但是当我切换到横向模式时，应用程序崩溃了。

这是 activity_main.xml 的编码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/list_data"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" />

<Button
    android:id="@+id/btnAddContact"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:layout_weight="0"
    android:text="Add Contact" />

</LinearLayout> 
```

这是contact_details.xml 的编码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/lvContactDetails"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

这是我的 layout-land/activity_main.xml 的编码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

<include layout="@layout/activity_main"/>
<View
    android:layout_width="1dp"
    android:layout_height="fill_parent"
    android:background="#A3A3A3"/>

<include layout="@layout/contact_details"/>

</LinearLayout> 
```

解决此问题的任何提示？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:49:47.067

感谢阿迪尼亚的建议。这是因为我不应该回调相同的 Layout 名称，即 activity_main.xml。这是坠机的主要原因。正如 Adinia 所说，它可能是一个循环引用。再次感谢。顺便说一句，我只能在 2 天内接受我的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:40:49.950

在您使用的 activity_main.xml 、contact_details.xml

`android:layout_width="fill_parent"`

而是尝试使用

```
android:layout_width="wrap_content" 
```

如果不发布您的 logcat 报告

# jquery - jquery将值设置为下拉

> ID：15743567
> 
> 赞同：1
> 
> 时间：2013-04-01T12:34:04.503
> 
> 标签：jquery, dwr

我有一个下拉列表，其中包含使用 dwr 调用加载的值列表。我从 db 获取数据说我有一个名为印度的位置。我用

```
$('select[name="cname"]').find(
'option:contains("'
+ data.loc + '")')
.attr("selected", true); 
```

使其被选中。cname 是下拉列表名称。data.loc 是我从数据库中获取的数据。这里的问题是，如果我有两个位置，如印度和印第安纳州，它会迭代并设置两个值，并设置最近的值（印第安纳州）。要设置的实际值是印度。只有当我选择印第安纳时，它才必须被选中，而不是印度。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:37:14.717

您可以使用[filter()](http://api.jquery.com/filter/)应用自定义过滤器匹配选择器返回的元素。

```
$('select[name="cname"] option').filter(function(){
    return $(this).text() == data.loc; 
}).attr("selected", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:37:01.250

你为什么不使用`val()`

```
$('select[name="cname"]').val(data.loc) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:38:56.843

使用等于选择器。请参考[这里](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:43:12.397

为什么不检查相等性：

```
if($(this).val() == data.loc){
    $('select[name="cname"] option[value="' + data.loc + '"]').attr("selected", "selected");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T12:43:54.580

您可以通过以下方式完成`Val()`，尝试如下所示，它将对您有所帮助..

```
$('select[name="cname"]').val(data.loc);
alert($("select[name='cname'] option:selected").text()); 
```

# python - 如何从不同的模块访问相同的多处理命名空间

> ID：15743568
> 
> 赞同：2
> 
> 时间：2013-04-01T12:34:07.677
> 
> 标签：python, module, namespaces, multiprocessing, python-multiprocessing

我需要能够在其中创建带有 pySerial 对象的共享对象。从位置列表中找到设备后，该对象将仅由子进程创建一次。其他进程将在以后使用它。

Python 多处理管理器无法知道嵌入到其他对象的对象的更改。因此，如果我创建经理：

```
import multiprocessing as mp
manager=mp.Manager()
ns=manager.Namespace() 
```

我可以在进程之间共享对象。

```
ns.obj = SerialReader() 
```

在哪里

```
class SerialReader(object):

    port = None
    def connect(self):

        #some code to test connected device 
        ...
        #end of that code

        ser=serial.Serial(device, etc)
        self.ser=ser 
        #or
        self.saveport() #for future use

    def saveport(self):
        self.port = self.ser._port
        ns.port= self.ser._port 
```

现在我将在子进程中运行它：

```
p=Process(target = ns.obj.connect)
p.start() 
```

并打印结果：

```
print ns.obj.port
print ns.port 
```

输出：

```
None
/dev/ttyACM0 
```

我希望能够使用简单的代码，例如：

ns.obj.ser.write(), ns.obj.somemethod(arg) 其中

```
...inside SerialReaders class...
def somemethod(self, arg):
    if arg == condition:
        self.ser.write('some text %s' %arg) 
```

但我不能参考ns.obj.ser，因为如果它将从新进程运行，它将被视为未定义。如果我们在 conntrollers.py 中的其他方法中引用 self.ser 并尝试在新进程中运行它们，我们也会遇到同样的情况。

编辑：我找到了将命名空间导入模块的方法：

```
from __main__ import ns 
```

或者在创建对象时将 ns 发送到**init 。**但问题依然存在。ns.obj 是 NoneType 对象，因为该对象仍在创建过程中。所以我不能输入 ns.obj.ser= self.ser 如果我尝试将 ns 发送到 SerialReader()

```
ns.obj = SerialReader(ns) 
```

并尝试在 SerialReader_init _ 中打印它*我*得到：

```
<NamespaceProxy object, typeid 'Namespace' at 0xa21b70c; '__str__()' failed> 
```

我也无法添加 ser..

# ios - ios coredata 表模式同步

> ID：15743578
> 
> 赞同：1
> 
> 时间：2013-04-01T12:34:44.020
> 
> 标签：ios, core-data, data-synchronization

最好在这里问，因为我在谷歌搜索结果上看不到光。

最后，我的 iOS app 和 web app 可以顺利同步数据了。在 iOS 端，核心数据用于玩离线数据。在 Web 应用程序上，用户可以将自定义字段添加到任何数据库表中。因此，新添加的字段存在于较新的请求结果中。我应该如何管理我的应用程序，以便它继续使用包含新添加字段的离线数据。

解决此问题的最佳模式是什么？有没有相关的框架？

编辑：旧 REST 得到结果

```
{
  "status":"SUCCESS",
  "data":{
    "id":1,
    "createdDateTime":"2012-05-07 08:18:11",
    "modifiedDateTime":"2012-05-07 08:18:11",
    "createdByUser":{
      "id":1,
      "username":"super"
    },
    "modifiedByUser":{
      "id":1,
      "username":"super"
    },
    "owner":{
      "id":1,
      "username":"super"
    },
    "department":null,
    "firstName":"First",

  },
  "message":null,
  "errors":null
} 
```

添加自定义字段后，新的 REST 结果：

```
 {
      "status":"SUCCESS",
      "data":{
        "id":1,
        "createdDateTime":"2012-05-07 08:18:11",
        "modifiedDateTime":"2012-05-07 08:18:11",
        "createdByUser":{
          "id":1,
          "username":"super"
        },
        "modifiedByUser":{
          "id":1,
          "username":"super"
        },
        "owner":{
          "id":1,
          "username":"super"
        },
        "department":null,
        "firstName":"First",
        "customField":"hello",
      },
      "message":null,
      "errors":null
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:20:35.913

[这里](http://www.2pi.dk/tech/cocoa/dynamic_attributes2.html)有关于动态添加 Core Data 属性的详细讨论。

# java - java中超类变量引用的子类对象有什么用？

> ID：15743580
> 
> 赞同：0
> 
> 时间：2013-04-01T12:34:48.993
> 
> 标签：java, inheritance

假设`B extends A`我们有一个声明`A a=new B();`，通过超类变量引用子类对象有什么用？对象可以访问的字段和方法是什么a（（仅子类方法和变量）或（来自子类和父类） )?

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:37:59.520

原因是抽象。这个想法是你不需要知道关于物体的每一个微小的细节。例如，假设您正在开车。在大多数情况下，右边的踏板让你走得更快，左边的踏板让你放慢速度，而你面前的大圆形东西可以控制汽车。对于驾驶员（即用户）来说，这是如何发生的并不重要，但让这些细节正常工作以使汽车真正移动非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:38:40.567

使用超类引用类型是你不必担心实现类（或特定类），比如`List a = new ArrayList();`

在这种情况下，只能访问超类公开的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:43:17.667

所以这主要是要实现：`Polymorphism`以及`Abstraction`。

主要原则是客户端针对更高标签接口进行编码，并且不担心低级实现。

这提供了在不更改客户端的情况下更改实现的灵活性。并且客户端还可以灵活地尝试多种实现。

在您的示例中，可从中访问的成员是该类`a`定义的成员`A`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T12:38:51.667

嗨，简单地说，我们可以说所有 B 都是 A，而不是所有 A 都是 B。这就是整个继承的工作方式。它提供了所需的抽象。

# php - Php Soap 函数参数

> ID：15743581
> 
> 赞同：2
> 
> 时间：2013-04-01T12:34:51.957
> 
> 标签：php, soap, wsdl

我正在尝试创建一个简单的 php Soap 服务器。

问题是虽然我在 wsdl 文件中设置了特定的参数类型，但在我的情况下我设置了整数，我可以从 php 使用另一种参数类型（字符串、数组、关联数组）进行方法调用。

理论上，如果php参数类型和wsdl参数类型不一样应该不会报错吧？就我而言，如果我在服务器上用数组调用函数，我得到数组，我在服务器上用字符串调用相同的函数，我得到字符串等。

我如何编辑下面的代码，使我的方法“doMyBookSearch”只接受在 wsdl 上声明的整数。

客户代码：

```
 try{
  $sClient = new SoapClient('sample.wsdl',array('trace'=>true));
    print_r($sClient->doMyBookSearch('test'));  //I call the function with a string, and not integer as WSDL
} catch(SoapFault $e){
var_dump($e);
} 
```

服务器代码：

```
$server = new SoapServer("sample.wsdl");

function doMyBookSearch($yourName){
  return 'Works'; //return string
} 
```

WSDL：

```
 <types>
    <xsd:schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:MyBookSearch">
        <xsd:element  name="bookTitle">
            <xsd:simpleType>
                <xsd:restriction base="xsd:integer">
                    <xsd:minInclusive value="0"/>
                    <xsd:maxInclusive value="120"/>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:element>
    </xsd:schema>   
</types>

<message name="doMyBookSearch">
    <part name="bookTitle" type="tns:bookTitle" />
</message>

<message name="doMyBookSearchResponse">
    <part name="return" type="xsd:string" />
</message>  

<portType name="MyBookSearchPort">
    <operation name="doMyBookSearch">
        <input message="tns:doMyBookSearch" />
        <output message="tns:doMyBookSearchResponse" />
    </operation>
</portType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:27:35.863

在这种情况下，PHP 并不真正关心类型。根据我对 SOAP 和 PHP 的经验，所有变量都作为字符串发送/接收，并且不遵守 WSDL 文件的限制。

一种解决方法是自己在 doMyBookSearch() 函数中进行检查，并在需要时抛出错误。

# php - 将php数组放入html代码

> ID：15743587
> 
> 赞同：1
> 
> 时间：2013-04-01T12:35:21.003
> 
> 标签：php

我曾经使用名为 smarty 的模板 php 系统很容易做到这一点。我目前不能smarty，所​​以我必须手动完成，但我完全忘记了如何以及什么是可能的......

```
 <? foreach ($searchresults as $row) { ?>
                    <tr class="tableRows">
                        <td><img style="cursor: pointer;" src="img/expand.png" id="1" alt="hidden" onclick="changeSign()" /></td>
                        <td><a href="#"><?  echo $row[0]; ?></a></td>
                        <td><? echo $row[1]; ?></td>
                        <td><?  echo $row[2]; ?></td>
                        <td><?  echo $row[3]; ?></td>
                        <td><?  echo $row[4]; ?></td>
                        <td><input type="button" value="Delete" class="deleteBtn" /></td>
                    </tr>
                <? } ?>
            </table>
        </fieldset>
        <?php } ?> 
```

这行不通。想知道我怎样才能让它工作。基本上我想将数组数据放入行中。

（我在问题的开头忘记了回声，我已经尝试过了，我已经更新了它，但仍然无法正常工作）

问题是什么都没有输出，但是数组肯定包含数据，因为当我执行 var_dump 时它会吐出：

```
array(10) { [0]=> string(4) "3344" ["purchaseNo"]=> string(4) "3344" [1]=> string(10) "2013-03-31" ["dateCreated"]=> string(10) "2013-03-31" [2]=> string(4) "John" ["Name"]=> string(4) "John" [3]=> string(5) "Mold1" ["mouldName"]=> string(5) "Mold1" [4]=> NULL ["courierName"]=> NULL } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:38:24.307

在 $row[1] 之前尝试回显`<?php echo $row[1]; ?>`

所以你的答案是：

```
<? foreach ($searchresults as $row) { ?>
                        <tr class="tableRows">
                            <td><img style="cursor: pointer;" src="img/expand.png" id="1" alt="hidden" onclick="changeSign()" /></td>
                            <td><a href="#"><?php echo $row[0]; ?></a></td>
                            <td><?php echo $row[1]; ?></td>
                            <td><?php echo $row[2]; ?></td>
                            <td><?php echo $row[3]; ?></td>
                            <td><?php echo $row[4]; ?></td>
                            <td><input type="button" value="Delete" class="deleteBtn" /></td>
                        </tr>

   <? } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:36:58.743

放`echo $row[i]`而不是`$row[i]`只放

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:37:35.213

你没有对变量做任何事情。你需要输出它：

```
<td><?= $row[1] ?></td> 
```

等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:37:43.800

你需要`echo`你的变量像

```
 <? foreach ($searchresults as $row) { ?>
                    <tr class="tableRows">
                        <td><img style="cursor: pointer;" src="img/expand.png" id="1" alt="hidden" onclick="changeSign()" /></td>
                        <td><a href="#"><? echo $row[0]; ?></a></td>
                        <td><? echo $row[1]; ?></td>
                        <td><? echo $row[2]; ?></td>
                        <td><? echo $row[3]; ?></td>
                        <td><? echo $row[4]; ?></td>
                        <td><input type="button" value="Delete" class="deleteBtn" /></td>
                    </tr>

  <? } ?> 
```

ETC

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T12:40:08.520

您必须`echo`用于显示任何变量或文本。或使用

`echo "<pre>"; print_r($row); echo "</pre>";`用于显示整个数组

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T12:50:34.410

试试这个，希望它会工作

```
<?php 
      foreach ($searchresults as $row)
      { ?>
         <tr class="tableRows">
             <td><img style="cursor: pointer;" src="img/expand.png" id="1" alt="hidden" onclick="changeSign()" /></td>
             <td><a href="#"><?php echo $row[0]; ?></a></td>
             <td><?php echo $row[1]; ?></td>
             <td><?php echo $row[2]; ?></td>
             <td><?php echo $row[3]; ?></td>
             <td><?php echo $row[4]; ?></td>
             <td><input type="button" value="Delete" class="deleteBtn" /></td>
          </tr>

 <?php } ?> 
```

# css - 寻找支持最大宽度 968px 的轻量级响应式 CSS 框架

> ID：15743593
> 
> 赞同：0
> 
> 时间：2013-04-01T12:35:33.447
> 
> 标签：css, frameworks, responsive-design

我一直在考虑为我的下一个项目使用 css 框架。我想使用一个响应式的css框架，并且应该有一个最大宽度：968px，它应该是轻量级系统（只有网格），不需要按钮、导航等。有没有关于我应该使用的 css 框架的建议，我似乎遇到的问题是框架通常设置为预定义的大小，例如 960px，每当我进行更改以支持这个 968px 大小时，似乎有些东西会中断（这可能只是我缺乏使用框架的经验和缺乏理解）。

我正在寻找关于使用哪个 css 框架的建议，以及关于将其设置为最大宽度 968px 的任何帮助；

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:55:49.180

我不知道任何运行（旧）960px 宽标准的响应式平台。我见过的每个平台都在 1140 像素左右。

尽管如此，您可以使用[Columnal](http://www.columnal.com/)并将其修改为 968px 宽。

Columnal 的重量很轻，支持列中的列，并且类名易于使用。（尽管我做了一个查找和替换并删除所有_并将它们更改为-的）。您需要做的就是`max-width:`更改`.row`.`columnal.css`

**请注意*****，我已经在我的一个使用 Columnal 的个人网站上测试过更改`.row`，`968px`无论我插入的值（600、800、960、968、1140（默认）、1200、1300）它总是有效。

您可以通过访问下面链接的站点并使用 chrome 开发人员工具自行测试，找到一个具有行类的 div，并将最大宽度值更改为您喜欢的任何值。

[http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/)

# django - 在 django 中的小数前拆分

> ID：15743597
> 
> 赞同：2
> 
> 时间：2013-04-01T12:35:39.560
> 
> 标签：django, django-templates

我有一个从数据库中获取数据的变量

> {{i.rewardpoints}}

以及它返回的值，例如 1.799 或 12 db 有多个包含小数和不带小数的值

但我需要显示不带小数的值

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:38:46.850

四舍五入到最接近的整数：

```
{{ i.rewardpoints|floatformat:"0" }} 
```

获取整数部分：

```
{{ i.rewardpoints|stringformat:"d" }} 
```

*   [floatformat 过滤器文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#floatformat)
*   [stringformat 过滤器文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#stringformat)

* * *

```
In [19]: tpl = Template('{{ x|stringformat:"d" }} {{ x|floatformat:"0" }}')

In [20]: tpl.render(Context({'x': 1.1}))
Out[20]: u'1 1'

In [21]: tpl.render(Context({'x': 1.9}))
Out[21]: u'1 2' 
```

# ios - 识别触摸移动方向

> ID：15743604
> 
> 赞同：1
> 
> 时间：2013-04-01T12:36:08.137
> 
> 标签：ios, objective-c, touch

我正在进行视图调整大小、移动和旋转一次触摸。

我试图找到触摸移动的方向，例如，

如果触摸移动的方向是水平或垂直，然后移动视图。如果触摸移动方向是对角线，则调整大小。如果触摸像旋转手势一样移动，则旋转视图。

我能够识别水平或垂直方向。

请建议我如何识别对角线和旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:45:45.050

我想对于旋转，你可以简单地使用这个方法`-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event`。

对于对角线，您可以比较两个点的坐标。对于对角线，您也可以从这篇[文章](https://stackoverflow.com/questions/11707257/detect-diagonal-swipe-gestures-in-a-uiview)中获得帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:50:42.340

尝试这个：

[TDResizerView](https://github.com/Thavasidurai/TDResizerView)

视图旋转和移动都可以在这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-16T08:54:53.820

在触摸移动功能中，您可以像这样识别移动手指的方向。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
  [super touchesMoved:touches withEvent:event]; 
   UITouch *touch = [touches anyObject];
   CGPoint current=[touch locationInView:self];
   CGPoint last=[touch previousLocationInView:self];

   if(current.x>last.x){
      NSLog(@">>>>rigth");
   }else{
     NSLog(@">>>>left");
   }

   if(current.y>last.y){
    NSLog(@">>>>up");
   }else{
    NSLog(@">>>>down");
   }   
} 
```

# javascript - javascript代码有问题。灯箱第二次打不开

> ID：15743610
> 
> 赞同：0
> 
> 时间：2013-04-01T12:36:35.350
> 
> 标签：javascript

我有一个代码，当用户单击链接时会打开灯箱。它的作用是打开灯箱，然后当用户单击`overlay`它时，它会关闭或隐藏叠加层和灯箱。但是当用户再次单击链接以再次打开灯箱时，它不会打开。这是我的代码

```
var el = document.getElementById('element');
            var body = document.getElementsByTagName('body');
            el.innerHTML = '<p><a id="clickme" href="#">Click me</a></p>';
            document.getElementById('clickme').onclick = function (e) {
                e.preventDefault();
                if (overlay) {
                overlay.style.display = 'block';
            } else {
                document.body.innerHTML = '<div id="overlay" style="display:block;position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;"></div>'+document.body.innerHTML;                   
            }
                document.body.innerHTML = '<iframe id="frame" style="position:absolute;display:block;z-index:101;width:50%;height:50%;margin:10% 20%;border:10px solid #ccc;border-radius:10px;" src="http://www.example.com/"></iframe>'+document.body.innerHTML;

                document.getElementById('overlay').onclick = function() {
                document.getElementById('overlay').style.display = 'none';
                    document.getElementById('frame').style.display = 'none';
            }
    } 
```

当用户第二次单击链接时，如何再次打开此灯箱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:40:22.287

您设置`style`为`display:none`关闭，但单击链接不会更改`display`属性。效果：盒子保持隐形。

简单的解决方案：`display:block`在打开功能中添加或您需要的任何内容。

另外：您的打开函数**每次**执行时都会创建一个新元素。您可以添加一个测试来防止这种情况：

```
var overlay = document.getElementById('overlay');
if(overlay){
    overlay.style.display = 'block';
} else {
    //create box
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:57:02.023

问题在于，一旦您通过添加或替换 document.body.innerHTML 来编辑 DOM，您的元素（您的 a href）上的事件将不再存在。在执行 document.body.innerHTML 之后，您需要再次附加该事件。

# java - 如何从实体类更新sql表？

> ID：15743611
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:36:36.543
> 
> 标签：java, hibernate, jpa, jdbc

我改变了我的一些实体类。我添加了更多列并更改了一些列名。我想了解如何根据这些实体更新我的 sql 表，或者如何从我的实体类中重新创建这些表。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:39:05.053

在休眠映射中添加这一行：

```
<property key="hibernate.hbm2ddl.auto">create</property> 
```

但是每次启动应用程序时，您的应用程序都会重新创建您的表。

[你也可以阅读本章](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

# c++ - 远程控制应用程序设置

> ID：15743622
> 
> 赞同：0
> 
> 时间：2013-04-01T12:37:02.153
> 
> 标签：c++, windows, network-programming, remote-access

我有一个充当客户服务并做一些后台工作的解决方案。此应用程序需要在安装时完成一些设置（从 xml 文件中读取）并定期修改。为方便起见（因为该服务安装在多台机器上），我想从中央服务器应用程序远程控制这些设置。如果服务器和客户端在 LAN 内，这工作正常，但我想控制这些设置，即使客户端在网络之外或服务器在防火墙后面。有什么解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:49:47.083

显然，解决方案完全取决于您想要实现的目标。但是，如果我理解正确，那么您对防火墙有“问题”的原因是您只需使用标准网络文件访问通过网络访问包含 XML 的文件。这通常（有充分理由）被防火墙阻止。

因此，解决方案将是使用标准协议和“非标准服务”。例如，如果机器被允许传入 HTTP 请求，您可以使用基于 HTTP 的 post 消息来更新 XML 内容，或者将整个文件作为文件上传发送，或者制作您自己的远程访问协议。如果不允许 HTTP，那么您必须查看防火墙中还有哪些其他“漏洞”，并对另一个“漏洞”进行类似的处理。

另一个不那么晦涩的解决方案当然是简单地使用远程桌面或安全外壳连接来远程访问机器。当然，再次假设这种连接是允许的。

没有神奇的“绕过防火墙”解决方案——您必须以某种方式在防火墙规则内工作。

# html - 在 Helper 中带有 concat content_tag 的 Rails 嵌套列表

> ID：15743624
> 
> 赞同：2
> 
> 时间：2013-04-01T12:37:10.437
> 
> 标签：html, ruby-on-rails, helper, concat

我正在尝试创建类似于此的内容：[Using helpers in rails 3 to output html](https://stackoverflow.com/questions/3561250/using-helpers-in-rails-3-to-output-html)

这是我的助手：

```
def section_references_to_html (section)
     concat content_tag (:ol, :class => 'sources') do
        section.references.each do |reference|
          concat content_tag (:li,content_tag(:a, reference.text, :src => reference.url))
        end
      end
  end 
```

但它返回各种语法错误：

```
/~/app/helpers/application_helper.rb:21: syntax error, unexpected ',', expecting ')'
     concat content_tag (:ol, :class => 'sources') do
                             ^
/~/app/helpers/application_helper.rb:21: syntax error, unexpected ')', expecting keyword_end
     concat content_tag (:ol, :class => 'sources') do
                                                  ^
/~/app/helpers/application_helper.rb:22: syntax error, unexpected keyword_do_block, expecting keyword_end
        section.references.each do |reference|
                                  ^
/~/app/helpers/application_helper.rb:23: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
          concat content_tag (:li,content_tag(:a, referen...
                            ^
/~/app/helpers/application_helper.rb:23: syntax error, unexpected ',', expecting ')'
...       concat content_tag (:li,content_tag(:a, reference.tex...
...                               ^
/~/app/helpers/application_helper.rb:23: syntax error, unexpected ')', expecting keyword_end 
```

* * *

我在这里做错了什么？也许使用部分会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:42:50.593

`content_tag`主要问题是和之间有空格`(`。试试这个：

```
def section_references_to_html(section)
  content_tag(:ol, class: 'sources') do
    section.references.each do |reference|
      content_tag(:li, content_tag(:a, reference.text, href: reference.url))
    end
  end
end 
```

# asp.net-membership - ASP.NET Membership - 向 ASP.Net 登录页面添加额外字段

> ID：15743637
> 
> 赞同：1
> 
> 时间：2013-04-01T12:38:04.530
> 
> 标签：asp.net-membership

目前在我的应用程序中，使用 ASP.Net 成员资格提供程序验证用户，并且 ASP.Net 默认登录页面仅包含用户名和密码。这在这两个领域工作得很好。但是根据我目前的要求，需要一个额外的字段“公司”在 ASP.Net 登录页面中显示为下拉列表，并使用 ASP.NET 会员提供程序验证三个公司、用户名和密码。这是否可能，使用 ASP.Net 会员提供程序自定义带有额外字段的 ASP.Net 登录页面？您能否给我一些想法，我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:28:35.643

成员资格提供者的 ValidateUser 方法只接受两个参数 - 用户名和密码。即使覆盖它，也不能传递三个参数。

```
ValidateUser(string username, string password) 
```

基本上，您不能使用登录控件来验证用户。相反，您想自己验证用户。这是一个示例代码 -

![在此处输入图像描述](https://i.stack.imgur.com/BCeMK.png)

注意：出于演示目的，我删除了登录控件中的代码。

```
<asp:Login ID="LoginUser" runat="server" OnAuthenticate="LoginUser_Authenticate">
    <LayoutTemplate>
        <asp:TextBox ID="UserName" runat="server" />
        <asp:TextBox ID="Password" runat="server" TextMode="Password" />
        <asp:DropDownList ID="CompanyDropDownList" runat="server">
            <asp:ListItem Text="One" Value="1" />
            <asp:ListItem Text="Two" Value="2" />
        </asp:DropDownList>
        <asp:Button ID="LoginButton" runat="server" CommandName="Login" 
        Text="Log In" ValidationGroup="LoginUserValidationGroup" />
    </LayoutTemplate>
</asp:Login>

protected void LoginUser_Authenticate(object sender, AuthenticateEventArgs e)
{
    var companyName = LoginUser.FindControl("CompanyDropDownList") 
        as DropDownList;

    if(MyValidateUser(LoginUser.UserName, LoginUser.Password, 
        companyName.SelectedValue))
    {
        FormsAuthentication.SetAuthCookie(LoginUser.UserName, false);

        // Do something
    }
} 
```

**请确保您使用新的[ASP.NET 通用提供程序](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:41:19.657

您可以为此使用配置文件提供程序。

或者，您可以创建自己的表来存储其他用户相关信息。这需要做更多的工作，因为您需要创建自己的表并创建代码以在这些表中获取和保存数据，但我发现以这种方式使用自定义表可以提供更大的灵活性和更多的可维护性而不是 Profile Provider（特别是默认的 Profile Provider，SqlProfileProvider，它以低效、非规范化的方式存储配置文件数据）。

查看本教程，您可以在其中找到此过程的演练：存储附加用户信息。

# python - 使用 Python 3.3 在 OSX 上使用 MKL 构建 NumPy 时出错

> ID：15743638
> 
> 赞同：0
> 
> 时间：2013-04-01T12:38:06.883
> 
> 标签：python, c, build, numpy, intel-mkl

## ***背景***

使用带有第二代 Core i7 处理器的 2012 iMac，我正在尝试在 OSX 10.8.3 上构建[NumPy](http://www.numpy.org) 1.7.0 （最终[是 SciPY](http://www.scipy.org)），该 OSX 10.8.3 链接到英特尔[C++ Composer XE 2013](https://registrationcenter.intel.com/RegCenter/Evalform.aspx?productid=1771)和[Fortran评估版本中包含的](https://registrationcenter.intel.com/RegCenter/Evalform.aspx?productid=1795)[MKL适用于 OSX 的](http://software.intel.com/en-us/intel-mkl)[Composer XE 2013](https://registrationcenter.intel.com/RegCenter/Evalform.aspx?productid=1795)。我正在关注英特尔网站上的[这篇文章（松散地改编，因为在某些情况下它不是很具体），用于设置、编译器标志等。](http://software.intel.com/en-us/articles/numpyscipy-with-intel-mkl)

## ***问题***

使用任一：

```
$ python3 setup.py config build --compiler=intelem --fcompiler=intelem 
```

或者

```
$ python3 setup.py config --compiler=intelem --fcompiler=intelem build_clib --compiler=intelem --fcompiler=intelem build_ext --compiler=intelem --fcompiler=intelem 
```

我犯了同样的错误：

```
running build_clib
customize IntelEM64TCCompiler
customize IntelEM64TCCompiler using build_clib
running build_ext
customize IntelEM64TCCompiler
customize IntelEM64TCCompiler using build_ext
building 'numpy.core._dummy' extension
compiling C sources
C compiler: icc -m64 -march=corei7 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64 -I/opt/intel/mkl/include

compile options: '-Inumpy/core/include -Ibuild/src.macosx-10.8-x86_64-3.3/numpy/core/include/numpy -Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/include -I/opt/local/Library/Frameworks/Python.framework/Versions/3.3/include/python3.3m -Ibuild/src.macosx-10.8-x86_64-3.3/numpy/core/src/multiarray -Ibuild/src.macosx-10.8-x86_64-3.3/numpy/core/src/umath -c'
icc: numpy/core/src/dummymodule.c
icc: command line warning #10121: overriding '-marchcorei7' with '-xhost'
icc -m64 -march=corei7 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64 -I/opt/intel/mkl/include -shared build/temp.macosx-10.8-x86_64-3.3/numpy/core/src/dummymodule.o -Lbuild/temp.macosx-10.8-x86_64-3.3 -o build/lib.macosx-10.8-x86_64-3.3/numpy/core/_dummy.so
icc: command line warning #10121: overriding '-marchcorei7' with '-xhost'
icc: command line warning #10006: ignoring unknown option '-shared'
Undefined symbols for architecture x86_64:
  "_PyModule_Create2", referenced from:
      _PyInit__dummy in dummymodule.o
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
icc: command line warning #10121: overriding '-marchcorei7' with '-xhost'
icc: command line warning #10006: ignoring unknown option '-shared'
Undefined symbols for architecture x86_64:
  "_PyModule_Create2", referenced from:
      _PyInit__dummy in dummymodule.o
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
error: Command "icc -m64 -march=corei7 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64 -I/opt/intel/mkl/include -shared build/temp.macosx-10.8-x86_64-3.3/numpy/core/src/dummymodule.o -Lbuild/temp.macosx-10.8-x86_64-3.3 -o build/lib.macosx-10.8-x86_64-3.3/numpy/core/_dummy.so" failed with exit status 1 
```

我的`LD_LIBRARY_PATH`和`DYLD_LIBRARY_PATH`都是：

```
/opt/intel/lib/intel64:/opt/intel/lib:/opt/intel/mkl/lib:/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib:/opt/local/lib:/usr/local/lib:/usr/lib 
```

我`DYLD_FRAMEWORK_PATH`的是：

```
/opt/local/Library/Frameworks:/Library/Frameworks:/System/Library/Frameworks 
```

我`site.cfg`的是：

```
[DEFAULT]
library_dirs = /opt/intel/lib/intel64:/opt/intel/lib:/opt/intel/mkl/lib:/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib:/opt/local/lib:/usr/local/lib:/usr/lib
include_dirs = /opt/intel/include:/opt/intel/include/intel64:/opt/intel/mkl/include:/opt/local/Library/Frameworks/Python.framework/Versions/3.3/include/python3.3m:/opt/local/include:/usr/local/include:/usr/include

[mkl]
library_dirs = /opt/intel/lib/intel64:/opt/intel/lib:/opt/intel/mkl/lib:/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib:/opt/local/lib:/usr/local/lib:/usr/lib
include_dirs = /opt/intel/include:/opt/intel/include/intel64:/opt/intel/mkl/include:/opt/local/Library/Frameworks/Python.framework/Versions/3.3/include/python3.3m:/opt/local/include:/usr/local/include:/usr/include
mkl_libs = mkl_rt
lapack_libs = mkl_lapack 
```

指向`icc`和`ifort`在其中的符号链接是`/usr/bin`有功能的。的内容`dummymodule.c`可在[GitHub 上](https://github.com/numpy/numpy/blob/master/numpy/core/src/dummymodule.c)的 numpy 存储库中找到。我不是 C 程序员，所以我不能立即看出问题所在。我使用 MacPorts python 3.3.0（使用上述设置）和 python.org 3.3.0 都遇到了这个错误，设置修改为指向它而不是`/opt/local`.

## ***恳求***

任何人都可以帮助解决这个问题吗？

# **编辑**

我换成了`-shared`，`-dynamiclib`现在得到：

```
building extension "numpy.random.mtrand" sources
C compiler: icc -m64 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64

compile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/include -I/opt/local/Library/Frameworks/Python.framework/Versions/3.3/include/python3.3m -c'
icc: _configtest.c
icc -m64 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64 _configtest.o -o _configtest
_configtest
failure.
removing: _configtest.c _configtest.o _configtest
building data_files sources
build_src: building npy-pkg config files
running build_py
copying numpy/version.py -> build/lib.macosx-10.8-x86_64-3.3/numpy
copying build/src.macosx-10.8-x86_64-3.3/numpy/__config__.py -> build/lib.macosx-10.8-x86_64-3.3/numpy
copying numpy/distutils/intelccompiler.py -> build/lib.macosx-10.8-x86_64-3.3/numpy/distutils
copying build/src.macosx-10.8-x86_64-3.3/numpy/distutils/__config__.py -> build/lib.macosx-10.8-x86_64-3.3/numpy/distutils
copying numpy/distutils/fcompiler/intel.py -> build/lib.macosx-10.8-x86_64-3.3/numpy/distutils/fcompiler
running build_clib
customize IntelEM64TCCompiler
customize IntelEM64TCCompiler using build_clib
running build_ext
customize IntelEM64TCCompiler
customize IntelEM64TCCompiler using build_ext
building 'numpy.core._dummy' extension
compiling C sources
C compiler: icc -m64 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64

compile options: '-Inumpy/core/include -Ibuild/src.macosx-10.8-x86_64-3.3/numpy/core/include/numpy -Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/include -I/opt/local/Library/Frameworks/Python.framework/Versions/3.3/include/python3.3m -c'
icc: numpy/core/src/dummymodule.c
icc -m64 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64 -dynamiclib build/temp.macosx-10.8-x86_64-3.3/numpy/core/src/dummymodule.o -Lbuild/temp.macosx-10.8-x86_64-3.3 -o build/lib.macosx-10.8-x86_64-3.3/numpy/core/_dummy.so
Undefined symbols for architecture x86_64:
  "_PyModule_Create2", referenced from:
      _PyInit__dummy in dummymodule.o
ld: symbol(s) not found for architecture x86_64
Undefined symbols for architecture x86_64:
  "_PyModule_Create2", referenced from:
      _PyInit__dummy in dummymodule.o
ld: symbol(s) not found for architecture x86_64
error: Command "icc -m64 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64 -dynamiclib build/temp.macosx-10.8-x86_64-3.3/numpy/core/src/dummymodule.o -Lbuild/temp.macosx-10.8-x86_64-3.3 -o build/lib.macosx-10.8-x86_64-3.3/numpy/core/_dummy.so" failed with exit status 1 
```

所以，我`failure.`在 _configtest （不确定那是什么）和下面的相同错误之后得到一条线。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:54:54.787

> icc：命令行警告＃10006：忽略未知选项“-shared”

这是一个问题。您的编译器正在尝试构建一个可执行文件，即使它被告知要构建一个共享库。根据 icc 文档，`-shared`仅在 Linux 系统上可用。由于您的系统是 MacOSX 系统，因此我认为您想`-dynamiclib`改用它。

*编辑*：我怀疑您缺少指向 pylib 的链接，位于：`icc -m64 -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -DMKL_ILP64 -dynamiclib build/temp.macosx-10.8-x86_64-3.3/numpy/core/src/dummymodule.o -Lbuild/temp.macosx-10.8-x86_64-3.3 -o build/lib.macosx-10.8-x86_64-3.3/numpy/core/_dummy.so`。

缺少的链接会导致：

```
Undefined symbols for architecture x86_64:
  "_PyModule_Create2", referenced from:
      _PyInit__dummy in dummymodule.o
ld: symbol(s) not found for architecture x86_64 
```

您需要添加`-lpythonX.Y`，其中 XY 表示您要链接的 Python 版本。如果此文件存在，但链接器找不到它，则需要使用`-Llink/search/directory`（例如`-Llib/`）指令告诉链接器它在哪里。如果文件不存在，则需要构建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T08:04:08.877

我建议您将文件 numpy-1.7.0/numpy/distutils/intelccompiler.py 第 37 行更改为

icc -m64 -fPIC -O3 -g -fPIC -fp-model strict -fomit-frame-pointer -openmp -xhost -undefined dynamic_lookup -bundle -DMKL_ILP64

这对我有用，我之前有这个编译错误

# sql - 使用动态SQL时存储过程参数错误

> ID：15743643
> 
> 赞同：0
> 
> 时间：2013-04-01T12:38:24.003
> 
> 标签：sql, stored-procedures, dynamic-sql, oracle-sqldeveloper

我正在使用**Oracle Sql Developer编写一个存储过程，它接受由“，”（****动态 sql** ）分隔的值列表，并在“ **in** ”子句中使用此变量从表中触发查询。

但我最终遇到了一个错误

```
@p_case_nbr       varchar2(100), 
```

**错误（4,5）：PLS-00103：在预期以下情况之一时遇到符号“@”：当前删除之前存在**

使用的 SP：

```
 create or replace
procedure TEST_PROC
(   
    @p_case_nbr       varchar2(100),
    p_out_case_nbr    out varchar2 
)
as
  cursor test_cur is
      select t.COLUMN1
      from test_table t
      where t.column1 in (@p_case_nbr);

      test_cur_line  test_cur%ROWTYPE;
begin

p_out_case_nbr := null;

  open test_cur;
    LOOP
      FETCH test_cur INTO test_cur_line;
      EXIT WHEN test_cur%NOTFOUND;

      p_out_case_nbr := p_out_case_nbr || ' ' || test_cur_line.COLUMN1;
      dbms_output.put_line(test_cur_line.COLUMN1);

   end loop;
  close test_cur; 

  dbms_output.put_line('Final Value ' || p_out_case_nbr);
  dbms_output.put_line('SP Completed Succesfully');
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:47:41.590

`ORACLE`不需要在变量之前给出只需`@`尝试`@`从指定的`@p_case_nbr`位置删除并再次尝试，也不需要像`@p_case_nbr varchar2(100)` 给出一样指定参数的大小`@p_case_nbr varchar`

# javascript - 如何加载兄弟和子属性值

> ID：15743645
> 
> 赞同：0
> 
> 时间：2013-04-01T12:38:31.157
> 
> 标签：javascript, jquery, xml

我正在尝试这段代码：-

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript" src="jquery.js"></script>

<script>
function load() {
    var select = $('#mySelect');
    var xml = ['<child_2 entity_id="2" value="Root" parent_id="1">', 
               '<child_4 entity_id="4" value="Activities" parent_id="2">', 
               '<child_10066 entity_id="10066" value="Physical1" parent_id="4">', 
               '<child_10067 entity_id="10067" value="Cricket" parent_id="10066">', 
               '<child_10068 entity_id="10068" value="One Day" parent_id="10067"/>', 
               '</child_10067>', '</child_10066>', '<child_10069 entity_id="10069" value="Test2" parent_id="4"/>', 
               '<child_10070 entity_id="10070" value="Test3" parent_id="4"/>', 
               '<child_10071 entity_id="10071" value="Test4" parent_id="4"/>', 
               '<child_10072 entity_id="10072" value="Test5" parent_id="4"/>', 
               '<child_5 entity_id="5" value="Physical" parent_id="4"/>', '</child_4>', '</child_2>'].join('');

    function makeHtml($xml, $ul) {
        $(document).ready(function () {
            $(xml).find('child_10066').each(function () {
                var $node = $(this);
                var $li = $('<li></li>').html($node.attr('value'));
                $ul.append($li);
                if ($node.children().length > 0) {
                    $childUl = $('<ul></ul>').hide();
                    $ul.append($childUl);
                    // toggle hide and show
                    $li.click(function () {
                        if ($(this).next().css('display') == 'none') {
                            $(this).next().show();
                        } else {
                            $(this).next().hide();
                        }
                    });
                    makeHtml($node.children(), $childUl);
                }
            });
        });
    }
    makeHtml($(xml), $('ul'));
}
</script>
<body onload="load()">
<div id="mySelect"></div>
<ul></ul>
</body> 
```

我想输出：-（在文件加载时）

`Physical1`
`Test2`
`Test3`
`Test4`
`Test5`
`Physical`

如果单击`physical1`然后显示那里的子节点，例如：-

`Physical1`
`Cricket`
`Test2`
`test3`
`test4`
`test5`
`Physical`

如果点击`cricket`
`Physical1`
`Cricket`
`One Day`
`Test2`
`Test3`
`Test4`
`Test5`
`Physical`

使用我的这段代码：-我得到`Physical1`
但是在点击它们之后它返回一个新的`ul` `li`并且有价值的是`Physical1`
谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:08:16.903

试试这个方法！

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

var select = $('#mySelect');
var xml = ['<child_2 entity_id="2" value="Root" parent_id="1">',
'<child_4 entity_id="4" value="Activities" parent_id="2">',
    '<child_10066 entity_id="10066" value="Physical1" parent_id="4">',
        '<child_10067 entity_id="10067" value="Cricket" parent_id="10066">',
            '<child_10068 entity_id="10068" value="One Day" parent_id="10067"/>',
        '</child_10067>',
    '</child_10066>',
    '<child_10069 entity_id="10069" value="Test2" parent_id="4"/>',
    '<child_10070 entity_id="10070" value="Test3" parent_id="4"/>',
    '<child_10071 entity_id="10071" value="Test4" parent_id="4"/>',
    '<child_10072 entity_id="10072" value="Test5" parent_id="4"/>',
    '<child_5 entity_id="5" value="Physical" parent_id="4"/>',
'</child_4>',
'</child_2>'
].join('');

     function makeHTML(parent, ul) {

         $(xml).find(parent).children().each(function() {

                var $node =  $(this) ;

                var $li   = $('<li/>');
                var $span = $('<span/>');
                $span.text($node.attr('value'));

                $li.append( $span ); 
                ul.append( $li ); 

                if ( $node.children().length > 0 ) {

                     // toggle hide and show
                    $li.click( function(){

                            event.stopImmediatePropagation();

                            var _UL = $(this).children()[1];                

                            if ( $(_UL).css('display') == 'none') {
                                $(_UL).show();
                            } else {
                                $(_UL).hide();
                            }  
                     });

                     var _newUl = $('<ul/>');
                     $(_newUl).hide();
                     $li.append(_newUl);
                     makeHTML($node.attr('tagName'), $(_newUl));

                } 
        });
    }         

    makeHTML('child_4', $('#_ul'));
});  
</script>
<body>
<div id="mySelect"></div>
<ul id="_ul"></ul>
</body> 
```

# java - 如何从 json 获取服务器端图表

> ID：15743647
> 
> 赞同：0
> 
> 时间：2013-04-01T12:38:34.733
> 
> 标签：java, google-app-engine

例如，我有一个字符串 json：

`{"records":[{"x":"02.04.2013","y":31.1093},{"x":"30.03.2013","y":31.0834},{"x":"29.03.2013","y":30.9962}]}`.

如何在环境应用引擎中使用 Java 在服务器端获取图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:55:29.850

简而言之 - 你不能。AFAIK 所有 Java 成像库都使用`java.awt.*`App Engine 上不可用的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:56:36.737

使用 highchart api。请检查它 ht​​tp [://www.highcharts.com/](http://www.highcharts.com/)

# c++ - 如何在 Qt LineEdit 上使用 .hide，仍然需要输入？

> ID：15743648
> 
> 赞同：2
> 
> 时间：2013-04-01T12:38:36.197
> 
> 标签：c++, qt, input, qt4, hidden

我有一个 QLineEdit，我想对用户隐藏它，但仍然在某处接受输入形式。我正在创建一个打字导师，我想以隐藏的方式接受输入，以提供更动态的反馈形式。

任何其他最好完成的建议将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:13:06.513

You can not do it. When `QLineEdit` is hidden, there is no focus on it, and you can not grab events.

If you persist on using `QLineEdit` there's an option to turn off displaying text.[`QLineEdit::NoEcho`](http://harmattan-dev.nokia.com/docs/library/html/qt4/qlineedit.html#EchoMode-enum).

```
lineEdit->setEchoMode(QLineEdit::NoEcho); 
```

This will show the edit box, but it doesn't show any text.

Otherwise, you should write a slot to grab window `keyPressed` signals, and handle everything yourself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T19:19:34.133

对于尝试做这种事情的其他人，一种解决方法是简单地实现一个 QLineEdit 可见，但使用 MinimumSize = MaximumSize = 0x0 :)

# cocoa - 在 NSWindow 中添加更多数量的 View 和 NSOpenGLView

> ID：15743662
> 
> 赞同：0
> 
> 时间：2013-04-01T12:39:11.847
> 
> 标签：cocoa, opengl, nsopenglview

我需要在一个窗口中添加更多数量的 NSView 以及更多数量的自定义 NSOpenGLView，然后想要对视图数组进行洗牌。如果我最初设置基本视图 setWantsLayer:YES，如果我设置 setWantsLayer:NO，我将无法绘制 OpenGLView，我可以绘制 OpenGLView 但 NSView 超出了 OpenGLView。喜欢，

在 MyOpenGLView.m

```
myOpenGLView = [ [ MyOpenGLView alloc ] initWithFrame:frame_ colorBits:16 depthBits:16 fullscreen:FALSE ];
[self  addSubview: myOpenGLView]; 
```

然后我尝试在窗口上再添加一个视图

```
 customView = [[CustomView alloc] initWithFrame:[self bounds]];
 [self  addSubview:customView]; 
```

现在我的自定义视图超越了 myOpenGLView。我该如何解决？

**编辑**：

问题截图

![](https://i.imgur.com/8Y78xDt.png)

# java - 这里将创建多少个 String 对象？

> ID：15743665
> 
> 赞同：5
> 
> 时间：2013-04-01T12:39:18.433
> 
> 标签：java, string

```
String x = new String("xyz");
String y = "abc"; 
x = x + y; 
```

`String`在这段代码中会创建多少个对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T12:42:34.100

至少有四个对象：

*   实习字符串`"xyz"`
*   `"xyz"`实习字符串的副本
*   实习字符串`"abc"`
*   连接两个字符串的结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-01T12:41:37.430

```
String x = new String("xyz"); 
```

有一个：`"xyz"`是一个实习字符串。
有两个：`new String("xyz")`。

```
String y = "abc"; 
```

有三个：`"abc"`是一个实习字符串。

```
x = x + y; 
```

有四个。由于字符串是不可变的，因此必须创建第三个字符串对象：`new String("xyzabc")`.

可能有第五个对象，因为编译器可以使用 StringBuilder 来执行字符串连接。

```
StringBuilder s = new StringBuilder(x);
s.append(y);
x = s.toString(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-01T12:44:03.523

加载类时，会创建两个 String 对象（很可能），每个 String 字面量一个。这是一次性的事情...

每次运行代码时，都会创建两个字符串：

*   创建一个新的`new String("xyz")`字符串，其状态与`"xyz"`文字相同。

*   字符串连接`x + y`创建第二个新字符串。

应该注意的是，`String y = "abc";`不会创建新的字符串。相反，它将对现有 String 的引用分配给`y`. 实际上，它是在加载类时创建的字面量对 String 对象的引用。

* * *

实际上，如果您向下钻取，将为`char[]`创建的每个 String 对象创建一个数组。并且字符串连接*可能*涉及临时`StringBuilder`对象的创建。这两个都是实现细节。

加载类*也可能*不会导致*创建*新的 String 对象。确实，字符串字面量将由字符串池中的字符串对象表示，但是如何发生的确切过程是一个实现细节……而且它*不一定*需要调用`String.intern`新创建的字符串对象。

* * *

另一个答案是创建了零个对象。那只是 Java 源代码，Java 源代码不会创建对象，除非您编译并运行它。（多田！！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T12:44:07.793

x ：当您使用 String 类的 new 关键字和构造函数时，会创建一个 String 对象

"abc": 是一个字符串字面量，Java 在遇到字符串字面量时创建一个 String 对象。

x : 两个字符串的串联转化为StringBuilder.append(X).append(Y).toString()，所以这里又创建了一个对象。

# hibernate - net.sf.hibernate.util.JDBCExceptionReporter - 连接 org.postgresql.jdbc3g.Jdbc3g连接已关闭

> ID：15743667
> 
> 赞同：0
> 
> 时间：2013-04-01T12:39:22.413
> 
> 标签：hibernate, tomcat6, quartz-scheduler, postgresql-9.2

我在我的一个生产环境中面临这个问题。它经常发生但并不总是在应用程序的同一部分发生，它非常随机。

部署在此环境中的应用程序与部署在不同机器上的其他应用程序非常相似，它们使用相同的技术和关闭设置，但错误仅发生在此环境中，因此很难找出问题所在。

我必须说这些错误最近开始出现，因为有几个更新更改：

应用程序从 Windows 迁移到 Linux

PostgresSQL 8.2 到 9.2

雄猫 5 到 雄猫 6

所有这些更改也已在其他未遇到任何问题的已部署应用程序上完成。

应用程序使用的技术是：

休眠 2.1.6

PostgreSQL 9.2

雄猫 6.0.35

context.xml 中的配置是：

```
<Resource name="jdbc/psa" auth="Container" type="javax.sql.DataSource"
        driverClassName="org.postgresql.Driver" url="jdbc:postgresql://localhost:5432/psa?compatible=7.4"
        username="xxx" password="xxx" maxActive="100" maxIdle="30"
        maxWait="10000" factory="org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory"
        defaultAutoCommit="false" removeAbandoned="true"
        removeAbandonedTimeout="60" logAbandoned="true" validationQuery="select 1"
        testOnBorrow="true" testOnReturn="true" testWhileIdle="true"
        timeBetweenEvictionRunsMillis="300000"/> 
```

请注意，驱逐是活跃的，只是试图解决问题，但没有结果。

接下来是一个典型问题的流程：

1.- 打开一个新的 Hibernate 会话

2.- 我在查询之前检查此会话是否已打开并连接

3.-在日志上看到打开的会话有效后，产生了异常

**- 添加**

其中一个错误的完整堆栈跟踪如下：

```
29 03 2013 10:00:00 INFO EasyApScheduler_Worker-8 com.psa.accounting.eureca.logic.EurecaNLAccountingLogic - -- Process EURECA_NL starts
    29 03 2013 10:00:00 INFO EasyApScheduler_Worker-2 com.psa.accounting.eureca.logic.EurecaSCAccountingLogic - -- Process EURECA_SC starts
    29 03 2013 10:00:00 DEBUG EasyApScheduler_Worker-2 com.xeridia.persistence.ServiceLocator - Session opened: net.sf.hibernate.impl.SessionImpl@22880d66\. Opened: true, Connected: true
    29 03 2013 10:00:00 DEBUG EasyApScheduler_Worker-2 com.xeridia.persistence.ServiceLocator - [getConnection]|16|Thread[EasyApScheduler_Worker-2,4,main]|
    29 03 2013 10:00:00 DEBUG EasyApScheduler_Worker-2 com.xeridia.persistence.ServiceLocator - [getConnection]|16|Thread[EasyApScheduler_Worker-2,4,main]|com.easyap.invoice.persistence.InvoiceDAOHibernate.<init>(InvoiceDAOHibernate.java:364)
    29 03 2013 10:00:00 ERROR EasyApScheduler_Worker-8 net.sf.hibernate.util.JDBCExceptionReporter - Connection org.postgresql.jdbc3g.Jdbc3gConnection@1b0ca3f7 is closed.
    29 03 2013 10:00:00 DEBUG EasyApScheduler_Worker-2 com.xeridia.persistence.ServiceLocator - [getConnection]|16|Thread[EasyApScheduler_Worker-2,4,main]|com.psa.invoice.persistence.PSAInvoiceDAOHibernate.<init>(PSAInvoiceDAOHibernate.java:52)
    29 03 2013 10:00:00 ERROR EasyApScheduler_Worker-8 net.sf.hibernate.util.JDBCExceptionReporter - Connection org.postgresql.jdbc3g.Jdbc3gConnection@1b0ca3f7 is closed.
    29 03 2013 10:00:00 ERROR EasyApScheduler_Worker-8 net.sf.hibernate.util.JDBCExceptionReporter - Could not execute query
    java.sql.SQLException: Connection org.postgresql.jdbc3g.Jdbc3gConnection@1b0ca3f7 is closed.
        at org.apache.tomcat.dbcp.dbcp.DelegatingConnection.checkOpen(DelegatingConnection.java:398)
        at org.apache.tomcat.dbcp.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:279)
        at org.apache.tomcat.dbcp.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.prepareStatement(PoolingDataSource.java:313)
        at net.sf.hibernate.impl.BatcherImpl.getPreparedStatement(BatcherImpl.java:257)
        at net.sf.hibernate.impl.BatcherImpl.getPreparedStatement(BatcherImpl.java:232)
        at net.sf.hibernate.impl.BatcherImpl.prepareQueryStatement(BatcherImpl.java:65)
        at net.sf.hibernate.loader.Loader.prepareQueryStatement(Loader.java:779)
        at net.sf.hibernate.loader.Loader.doQuery(Loader.java:265)
        at net.sf.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:133)
        at net.sf.hibernate.loader.Loader.doList(Loader.java:1033)
        at net.sf.hibernate.loader.Loader.list(Loader.java:1024)
        at net.sf.hibernate.hql.QueryTranslator.list(QueryTranslator.java:854)
        at net.sf.hibernate.impl.SessionImpl.find(SessionImpl.java:1544)
        at net.sf.hibernate.impl.QueryImpl.list(QueryImpl.java:39)
        at com.xeridia.persistence.BaseDAOHibernate.findByQuery(BaseDAOHibernate.java:312)
        at com.xeridia.persistence.BaseDAOHibernate.findByQuery(BaseDAOHibernate.java:291)
        at com.psa.invoice.persistence.PSAInvoiceDAOHibernate.getAccountingInvoicesWithNoProblem(PSAInvoiceDAOHibernate.java:215)
        at com.psa.accounting.eureca.logic.EurecaNLAccountingLogic.getAccountingDataFromDB(EurecaNLAccountingLogic.java:469)
        at com.psa.accounting.eureca.logic.EurecaNLAccountingLogic.process(EurecaNLAccountingLogic.java:207)
        at com.psa.accounting.eureca.scheduler.CronEurecaNLAccounting.execute(CronEurecaNLAccounting.java:91)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520) 
```

管理所有 Hibernate 会话的类是一个名为 ServiceLocator 的类。此类的方法 getConnection() 返回一个新连接，其代码如下：

```
synchronized (session) {
                s = (Session) session.get();
                if ((s == null)||(!s.isOpen())) {
                    s = null;
                    s = getSessionFactory().openSession();
                    if (s != null) {
                        log.debug("Session opened: " + s + ". Opened: " + s.isOpen() +
                                ", Connected: " + s.isConnected());
                        printThreadDataForClosedConnections("[getConnection]");
                    }
                    session.set(s);
                }
                if (!s.isConnected()) {
                    s.reconnect();
                    log.debug("Session reconnected: " + s + ". Opened: " + s.isOpen() +
                            ", Connected: " + s.isConnected());
                    printThreadDataForClosedConnections("[getConnection]");
                }
            } 
```

对象“会话”声明为：

```
public static final ThreadLocal session = new ThreadLocal(); 
```

为不同的线程获取不同的会话，因此关闭线程之间的会话不应该存在问题。

您在上面的堆栈跟踪中可以看到，EasyApScheduler_Worker-2 获得了一个新连接，`if ((s == null)||(!s.isOpen())) {`但 EasyApScheduler_Worker-8 没有，这意味着它的“会话”对象存在并且打开或无法获得连接，对应于第一个错误的踪迹`29 03 2013 10:00:00 ERROR EasyApScheduler_Worker-8 net.sf.hibernate.util.JDBCExceptionReporter - Connection org.postgresql.jdbc3g.Jdbc3gConnection@1b0ca3f7 is closed.`

我不知道问题是来自 Hibernate、Postgres 还是 Tomcat。我在谷歌上几乎没有发现这个错误，所以我希望你能帮帮我。

请询问您需要的任何额外信息或设置以提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:25:07.777

我已经解决了这个问题。

这是石英线程的问题。默认情况下，Quartz 管理一个线程池，这些线程池在不同作业的执行之间被重用。我的类ServiceLocator，负责打开和关闭连接，是基于ThreadLocal对象的。似乎我的一项计划作业没有正确关闭其连接，之后，在与该作业相同的线程上执行的所有作业都导致了错误。

我不知道什么是有问题的工作，我最终所做的是将 Quartz 的默认连接池更改为自定义连接池，这样我为每个作业执行创建一个新线程，而不是共享某个所有作业的线程数量。

这是我编写的 Quartz 自定义线程池，以防它对某人有用：

```
public class SimpleNoThreadPooling implements ThreadPool {

    public int getPoolSize() {
        return 0;
    }

    public Log getLog() {
        return LogFactory.getLog(SimpleNoThreadPooling.class);
    }

    public void initialize() throws SchedulerConfigException { }

    class WorkerThread extends Thread {

        private Runnable runnable = null;

        /**
         * <p>
         * Create a worker thread, start it, execute the runnable and terminate
         * the thread (one time execution).
         * </p>
         */
        WorkerThread(Runnable runnable) {
            this.runnable = runnable;
            start();
        }

        public void run() {
            if (runnable != null) {
                try {
                    runnable.run();
                } catch (Exception exceptionInRunnable) {
                    try {
                        getLog().error("Error while executing the Runnable: ",
                            exceptionInRunnable);
                    } catch(Exception e) {  
                        // ignore to help with a tomcat glitch
                    }
                }
            }
        }
    }

    public boolean runInThread(Runnable runnable) {
        new WorkerThread(runnable);
        return true;
    }

    public void shutdown(boolean waitForJobsToComplete) { }

} 
```

# java - 在 XML 中获取节点属性的值

> ID：15743669
> 
> 赞同：0
> 
> 时间：2013-04-01T12:39:40.607
> 
> 标签：java, xml, dom

我有一个 XML 文档，其中的一个片段如下：

```
<item name="entryDataItem" type="dataView" caption="__entry_data_item" id="208" formItem="selectbox"> 
<properties>
  <property name="caption" value="Task Type"/>
  <property name="name" value="task_type"/>
  </properties>
</item>
<item name="entryDataItem" type="dataView" caption="__entry_data_item"  id="211" formItem="text">
<properties>
  <property name="caption" value="Time Spent (Min)"/>
  <property name="name" value="time_spent_min"/>
  </properties>
</item> 
```

等等

还有其他“属性”。“task_type”的值以及所有其他属性都存储在数据库中。当我遍历文档时，会获取所有属性，并使用 XML 中的“标题”和“值”准备文档。问题是，所有的“属性”都被打印出来了。但我希望文档的内容基于“task_type”；说当 task_type 值为 TESTING”时，只会打印 task_type “ESTIMATION”，没有其他内容。

我知道我必须在准备文件之前检查一下。
我的问题是：当我在 XML 中只有“task_type”而不是直接在 XML 文档中的值（例如“TESTING”）时，如何设置条件？

我的代码是一个简单的 JAVA 代码。
非常感谢有关如何实现这一目标的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:47:56.603

在我看来，当涉及到处理 XML 文档中的特定项目时，XPath 是蜜蜂的膝盖。 如果您想说服[这篇文章，可能会有一些用处。](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)

# java - Struts 可以支持 HTML5 吗？

> ID：15743680
> 
> 赞同：2
> 
> 时间：2013-04-01T12:40:39.107
> 
> 标签：java, database, struts

我一直在使用 struts 框架我必须在应用程序上实现 HTML 5 是 possibke 在 struts 标记库中有 makje 更改吗？

因为我已经嵌入了所有这样的html标签

```
<html:form action="action.jsp" type="sample" name="applyform" > 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:49:16.193

Struts 1.x 没有特定于 html5 的标记库。（你用'struts'标记，所以我假设这就是你正在使用的）。但是你可以通过扩展标准的 struts taglib 来编写你自己的。这不应该证明太难。另一种选择是只使用常规的 JSP EL/JSTL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:43:43.127

Sruts 2 在其标签库中支持 HTML5 元素，例如参见[textfield](http://struts.apache.org/development/2.x/docs/tag-reference.html)的参考：

> 类型：(…) 指定要显示的 html5 类型元素。例如文本、电子邮件、网址

# c# - 小数点的不同表示

> ID：15743681
> 
> 赞同：0
> 
> 时间：2013-04-01T12:40:43.200
> 
> 标签：c#, .net, windows-phone

在尝试解析双精度时，我发现 Visual Studio 中的模拟器和我的 Lumia 820 之间的行为有所不同。如果我有一个表示 的字符串`string stringdouble = 3.434233`，则模拟器会正确地将其解析为相应的双精度值，但在我的 Lumia 820 上处于调试模式时，我必须用逗号替换点以使其工作。是什么导致了这种差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:46:17.797

那是一个文化问题。

您的模拟器和手机**可能设置了不同的文化**，这就是您的结果存在差异的原因。使用设备或不变的文化。

我建议在任何地方都使用**不变的文化**

```
double.Parse("3.5", CultureInfo.InvariantCulture) 
```

或**当前用户文化**

```
double number = Double.Parse("202.667,40", CultureInfo.CurrentCulture); 
```

对于将数字解析和转换为字符串，这将有助于避免您描述的错误

# azure - 确定 Windows Azure 上暂停网站的原因

> ID：15743682
> 
> 赞同：0
> 
> 时间：2013-04-01T12:40:44.503
> 
> 标签：azure, azure-web-app-service

我有一个托管在 Windows Azure 上的网站。该网站是作为共享网站实例托管的自定义 ASP.NET MVC 4 网站。在过去的几天里，我的 CPU 时间开始出现大幅峰值。这些峰值一直持续，并导致我的网站被暂停。但是，我不确定如何确定这些峰值的原因。这是我到目前为止所做的：

1.  我试图通过 Windows Azure FTP drop 查看诊断信息。我在那里什么也没看到。
2.  我查看了我的谷歌分析，看看是否有什么不寻常的地方。该网站昨天有 20 名访问者。所以没什么疯狂的。

如何确定 CPU 峰值的罪魁祸首？一旦达到峰值，它就会在那里呆上几个小时。我不确定是什么原因造成的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:21:11.440

您是否尝试过在本地机器上运行您的网站并模拟您的访问者流量，使用您网站的所有功能？

与尝试调试正在运行的站点相比，在本地进行测试要容易 1000 倍且更具启发性。

如果在本地运行时仍然找不到任何错误，请考虑使用[日志记录和跟踪](http://msdn.microsoft.com/en-us/magazine/ff714589.aspx)站点中的战略点，以便查看站点执行复杂操作的频率和时间。

# ubuntu-12.04 - Nexus 4 在 Ubuntu 12.04 中无法识别用于文件传输

> ID：15743693
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:41:53.027
> 
> 标签：ubuntu-12.04, nexus-4

来自 Ubuntu 12.04 操作系统的 nexus 4。我尝试下载 mtp 包并安装它们，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:55:26.157

您可以选择“相机（PTP）”作为连接类型，这至少允许您传输图像文件。MTP 在 Ubuntu 12.04 上也不适用于我。

或者，您可以安装“文件专家管理器资源管理器”或“WiFi 文件资源管理器 PRO”之类的应用程序。它们允许无线传输文件。

最后，可以使用`adb`（Android SDK 包的一部分）传输文件。有关详细信息，请参阅[此](http://log.amitshah.net/2012/05/using-adb-to-copy-files-to-from-your-android-device/)。

# mysql - 排列重复并按顺序编号记录 - MySQL

> ID：15743696
> 
> 赞同：1
> 
> 时间：2013-04-01T12:41:58.190
> 
> 标签：mysql, sql, select, duplicates

我的 MySQL 表有以下记录，

```
 ID Name   Account
-----------------------------------------
    1  ABC    PQR
    2  DEF    PQR
    3  ABC    PQR
    4  XYZ    ABC
    5  DEF    PQR
    6  DEF    ABC 
```

我正在寻找类似的输出

```
 ID Name   Account   Duplicate Sr No.
-----------------------------------------
    1  ABC    PQR       1
    2  DEF    PQR       1
    3  ABC    PQR       2
    4  XYZ    ABC       1
    5  DEF    PQR       2
    6  DEF    ABC       1 
```

在这里，我的意思是每个副本都应该有一个 Sr Number 或对副本进行编号。

Name : ABC and Account : PQR 当在表中重复时，Duplicate Sr No 从 1 增加到 2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:08:14.537

尝试：

```
SELECT t1.id, t1.name, t1.account
       , (SELECT COUNT(*)
            FROM tableName t2
           WHERE t2.name = t1.name
             AND t2.account = t1.account
             AND t2.id <= t1.id) AS dupno
  FROM tableName t1; 
```

**输出 ：**

```
ID NAME ACCOUNT DUPNO
-- ---- ------- -----
 1 ABC  PQR         1 
 2 DEF  PQR         1 
 3 ABC  PQR         2 
 4 XYZ  ABC         1 
 5 DEF  PQR         2 
 6 DEF  ABC         1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:43:59.837

MySQL 还不支持`Window Function`任何其他`RDBMS`. 此行为类似于`ROW_NUMBER()`为组中的每条记录提供排名编号。在 mysql 中，这可以通过使用*用户变量*来模拟。

```
SELECT  ID, Name, Account, DuplicateSR_No
FROM
        (
            select  ID,
                    Name,
                    Account,
                    @sum := if(@nme = Name AND @acct = Account, @sum ,0) + 1 DuplicateSR_No,
                    @nme := Name,
                    @acct := Account
            from    TableName,
                    (select @nme := '', @sum := 0, @acct := '') vars
            order   by  Name, Account
        ) s
ORDER   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2dfc0/5)

输出

```
╔════╦══════╦═════════╦════════════════╗
║ ID ║ NAME ║ ACCOUNT ║ DUPLICATESR_NO ║
╠════╬══════╬═════════╬════════════════╣
║  1 ║ ABC  ║ PQR     ║              1 ║
║  2 ║ DEF  ║ PQR     ║              1 ║
║  3 ║ ABC  ║ PQR     ║              2 ║
║  4 ║ XYZ  ║ ABC     ║              1 ║
║  5 ║ DEF  ║ PQR     ║              2 ║
║  6 ║ DEF  ║ ABC     ║              1 ║
╚════╩══════╩═════════╩════════════════╝ 
```

# django - 在美味派中定义 ResourceField 是强制性的吗？

> ID：15743697
> 
> 赞同：0
> 
> 时间：2013-04-01T12:42:01.347
> 
> 标签：django, tastypie

在美味派中定义[ResourceField](http://django-tastypie.readthedocs.org/en/latest/fields.html)是强制性的吗？

```
from tastypie import fields, utils
from tastypie.resources import Resource
from myapp.api.resources import ProfileResource, NoteResource

class PersonResource(Resource):
    name = fields.CharField(attribute='name')
    age = fields.IntegerField(attribute='years_old', null=True)
    created = fields.DateTimeField(readonly=True, help_text='When the person was created', default=utils.now)
    is_active = fields.BooleanField(default=True)
    profile = fields.ToOneField(ProfileResource, 'profile')
    notes = fields.ToManyField(NoteResource, 'notes', full=True) 
```

我有一个返回字典的类，我想将它作为非 orm 数据源转换为美味派。由于键是动态的，我无法定义字段。

# android - 无法解析同一包中的类，使用 eclipse 进行异步 android 开发

> ID：15743698
> 
> 赞同：0
> 
> 时间：2013-04-01T12:42:06.653
> 
> 标签：android, eclipse, asynchronous

这是我的第一个 android 项目，所以如果我错过了什么，请原谅我的无知！

我正在尝试将使用 json/php/mysql 的注册表单更改为使用异步，我得到的错误是 RegisterTask 无法解析为这一行上的类型 new RegisterTask().execute();

我的完整代码是这样的：

```
 package com.app.pubcrawlorganiser;

    import org.json.JSONException;
    import org.json.JSONObject;

    import com.app.pubcrawlorganiser.library.DatabaseHandler;
    import com.app.pubcrawlorganiser.library.JSONParser;
    import com.app.pubcrawlorganiser.library.UserFunctions;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.os.StrictMode;
    import android.os.StrictMode.ThreadPolicy;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;
    @SuppressWarnings("unused")
    public class RegisterActivity extends Activity 
    {

    Button btnRegister;
    Button btnLinkToLogin;
    EditText inputFullName;
    EditText inputEmail;
    EditText inputPassword;
    TextView registerErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        // Importing all assets like buttons, text fields
        inputFullName = (EditText) findViewById(R.id.registerName);
        inputEmail = (EditText) findViewById(R.id.registerEmail);
        inputPassword = (EditText) findViewById(R.id.registerPassword);
        btnRegister = (Button) findViewById(R.id.btnRegister);
        btnLinkToLogin = (Button) findViewById(R.id.btnLinkToLoginScreen);
        registerErrorMsg = (TextView) findViewById(R.id.register_error);

        // Register Button Click event
        btnRegister.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                    {                
                        new RegisterTask().execute();

                    }
            }
);
                class RegisterTask extends AsyncTask<String, String, String>
            {
                protected void onPreExecute()
                {
                    super.onPreExecute();
                }

                protected String doInBackground(String... args)
                {
                    String name = inputFullName.getText().toString();
                    String email = inputEmail.getText().toString();
                    String password = inputPassword.getText().toString();            
                    UserFunctions userFunction = new UserFunctions();
                    JSONObject json = userFunction.registerUser(name, email, password);

               try {
                    if (json.getString(KEY_SUCCESS) != null) 
                    {
                        registerErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if(Integer.parseInt(res) == 1)
                        {
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));
                            Intent dashboard = new Intent(getApplicationContext(), Home.class);
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);
                            finish();
                        }
                        else
                        {
                            registerErrorMsg.setText("Error occured in registration");
                        }
                    }
                    }
               catch (JSONException e) 
               {
                    e.printStackTrace();
               }
            return null;
            }
        };}

        protected void onPostExecute()
        {
            btnLinkToLogin.setOnClickListener(new View.OnClickListener() 
        {
             public void onClick(View view) 
                {
                    Intent i = new Intent(getApplicationContext(),
                    WelcomeActivity.class);
                    startActivity(i);
                    // Close Registration View
                    finish();
                }
        });
    }
} 
```

为什么我不能在同一个包中使用一个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:47:32.227

您不能在方法中定义内部类！把它移到外面`onCreate()`，它应该可以工作。

PS：内部类应该添加在外部类的最顶部或最底部。取决于您的编码规则/指南。把它放在中间的某个地方是相当混乱的......

# kinect - 用 C# 定义手势的 Kinect 骨架跟踪程序的框架是什么？

> ID：15743705
> 
> 赞同：0
> 
> 时间：2013-04-01T12:42:51.567
> 
> 标签：kinect

我正在编写有关 Kinect 骨架跟踪程序的程序。而手势的定义是写在程序中的。我希望手势的定义由用户定义。这样做的一种方法是通过 DFA。我不知道如何从 C# 开始。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:46:41.570

尝试使用列表来存储骨架关节的坐标（一种缓冲区），然后您可以运行 DFA。您可以将转换定义为每个方向的坐标范围，最终状态将是缓冲区中的元素大致位于同一区域时。

因此，在 C# 中，您将需要创建一个数据类型来保存手势序列，当用户添加一个手势序列时，手势序列将更新。如下所述的缓冲区列表。

保存手势时，您的代码将如下所示：

```
 While(!Joint_stable && (i < buffer.count() ) )
{
 While ((buffer.Joint.ElementAt(i+1).X-buffer.Joint.ElementAt(i)).X>0 && (buffer.Joint.ElementAt(i+1)-buffer.Joint.ElementAt(i).Y )>0 ) //Think about adding tolerence here
 { 
Gesture.add("Upper_Right");
 }
 ...
} 
```

只是一个建议，kinect 传感器不是那么准确，所以尝试建立一种公差。

我希望我的回答能帮助你，或者至少能给你一些启发:)

# ruby-on-rails-3 - 需要使用 Jquery 在所有行中添加日期选择器

> ID：15743709
> 
> 赞同：1
> 
> 时间：2013-04-01T12:43:06.030
> 
> 标签：ruby-on-rails-3, jquery

我有附加图像的视图。我想为所有行中的列到期日期添加日期选择器。![在此处输入图像描述](https://i.stack.imgur.com/HvtCO.png)

这里第一行包含列到期日期的 id 是 'expiry_1_date'

```
2nd row -> 'expiry_2_date'
3nd row -> 'expiry_3_date'
4nd row -> 'expiry_4_date'
5nd row -> 'expiry_5_date' 
```

请帮助我在 Jquery 中实现所需的结果。提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:45:25.117

使用从选择器开始。并调用 datepicker 方法。

试试这样

```
$('input:text [id^="expiry_"]').datepicker(); 
```

或替代方式为每个文本框添加一个类。

然后像这样使用

```
$('.SomeClass').datepicker(); 
```

[**演示**](http://jsfiddle.net/vwHNX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:45:52.473

试试喜欢

```
$("input[id^='expiry'][id$='date']").datepicker(); 
```

在此处查看[演示](http://jsfiddle.net/vwHNX/1/)

并添加 css 试试这个

```
<style type="text/css">
  .ui-datepicker {
       background: #333;
       border: 1px solid #555;
       color: #EEE;
   }
 </style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T12:45:57.670

使用[属性选择](http://api.jquery.com/category/selectors/attribute-selectors/) `[]`器`^`

> 选择具有指定属性且其值正好以给定字符串开头的元素。

试试这个

```
 $('input[id^="expiry_"]').datepicker(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T12:46:44.713

使用类设置输入`datepicker`

```
<input type="text" class="datepicker" /> 
```

然后像这样加载它：

```
$(function() {
  $( ".datepicker" ).datepicker();
}); 
```

您可以从中获取日期，如下所示：

```
$(".datepicker").datepicker(
{
    onSelect: function()
    { 
        var dateObject = $(this).datepicker('getDate'); 
        alert(dateObject);
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T12:49:45.770

您可以选择所有以字符串[开头](http://api.jquery.com/attribute-starts-with-selector/)的 id 元素`expiry`并分配`datepicker`给它：

```
$('input[id^="expiry"]').each(function() {
    $(this).datepicker();
}) 
```

演示：http: [//jsfiddle.net/pyMzT/](http://jsfiddle.net/pyMzT/)

# sql-server-2008-express - 比较不同表中具有相同列的行

> ID：15743711
> 
> 赞同：1
> 
> 时间：2013-04-01T12:43:17.260
> 
> 标签：sql-server-2008-express

我有 2 个表 tbl_A 和 tbl_A_temp。两个表都具有相同的架构。它们的主键不同，因为它们是标识列。有没有办法我可以比较这两个表中的两行并了解它们是否不同。我会将数据从 tbl_A_temp 插入到 tbl_A，我需要这个比较只是为了确保我没有在主表。

问候， 阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:46:09.327

我认为这应该对你有用。基本上，由于您没有要加入的主键，因此您需要`LEFT JOIN`在所有其他字段上执行 a。如果有任何不同，则`NULL`检查将为真：

```
SELECT t.*
FROM tbl_A_temp t
   LEFT JOIN tbl_A a ON 
      t.field1=a.field1 AND t.field2=a.field2 AND ...
WHERE a.field1 IS NULL 
```

我也看到其他人使用`CHECKSUM`，但我自己也遇到了返回误报的问题。

# android - 从 Eclipse 提交项目到 svn 存储库

> ID：15743714
> 
> 赞同：0
> 
> 时间：2013-04-01T12:43:21.690
> 
> 标签：android, eclipse, svn

我知道如何将项目提交到存储库，即通过右键单击项目>团队>提交，然后选择要提交的文件。在我们选择需要提交哪些文件时，我的困惑是：

1）我们只需要选择java文件和xml文件吗？

2）如果我们提交bin或其他文件夹或文件而不是java文件和xml文件会导致任何冲突吗？

这听起来可能很愚蠢，但如果有人能阐明这些观点，那将非常有帮助！或提供有关将文件提交到 svn 的任何好的教程的参考。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:59:32.517

1) 强烈不建议提交 bin 文件夹或类文件。建议仅提交源文件 (Java) 和资源（xml 文件、图像等）。

2）如果您提交 bin 文件夹，您将在每次编译后看到不同之处。

几个额外的说明为什么不提交编译结果（bin 文件夹或类文件）：

1）您可以将您的产品从相同的来源编译到不同的平台

2) 它只占用源代码控制存储库中的空间

# .net - 为什么 Console.ReadKey() 会阻止在另一个线程中调用 Console.WriteLine 的输出？

> ID：15743717
> 
> 赞同：7
> 
> 时间：2013-04-01T12:43:38.680
> 
> 标签：.net, multithreading, task-parallel-library, console-application

我有一个非常简单的控制台应用程序。

```
static void Main(string[] args)
{
    DoAsync();
    Console.ReadKey();
} 
```

这里`DoAsync`开始一组任务并返回不等待任务完成。每个任务都会写入控制台，但在按下键之前不会显示输出。
当我使用`Console.ReadLine`一切正常。

所以我对特殊性很好奇`ReadKey()`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T13:01:41.417

从[文档](http://msdn.microsoft.com/en-us/library/471w8d85.aspx)中`Console.ReadKey()`：

> ReadKey 方法等待，即阻塞在发出 ReadKey 方法的线程上，直到按下字符或功能键。

它实际上做的是获取一个锁定`Console.InternalSyncObject`，这会阻止控制台上的进一步操作。

该`Console.ReadLine()`方法不会以这种方式阻塞线程。

阅读[这篇文章](http://blogs.microsoft.co.il/blogs/dorony/archive/2012/09/12/console-readkey-net-4-5-changes-may-deadlock-your-system.aspx)我猜你已经安装了 .NET 4.5？

# android - 如何在 android 中使用 sqlite 文件

> ID：15743718
> 
> 赞同：0
> 
> 时间：2013-04-01T12:43:39.453
> 
> 标签：android, database, sqlite

我陷入了一种我不知道如何在 android 中使用 sqlite 文件的情况

1.  放在哪里？和
2.  我们如何整合它？

我知道我可以从文件夹中获取它，`data/data/PACKAGE/databases/`但是当有一个新项目时，我找不到数据库文件夹。在哪里放置我的扩展名为`.sqlite`. 任何答案将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:39:43.267

您需要将 sqlite 文件放在项目的 assets 文件夹中，并且应该将此文件复制到 SD 卡上的所需位置。在这里希望这对你有所帮助。

```
public DataBaseHelper(Context context) 
    {
        super(context, DB_NAME, null, 300500);// 1? its Database Version
        DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
        this.mContext = context;
    }   

    public void createDataBase() throws IOException
    {
        //If database not exists copy it from the assets

        boolean mDataBaseExist = checkDataBase();
        if(!mDataBaseExist)
        {
            this.getReadableDatabase();
            this.close();
            try 
            {
                //Copy the database from assests
                copyDataBase();
                Log.w(TAG, "createDatabase database created");
            } 
            catch (IOException mIOException) 
            {
                throw new Error("ErrorCopyingDataBase");
            }
        }
    }
        //Check that the database exists here: /data/data/your package/databases/Da Name
        private boolean checkDataBase()
        {
            File dbFile = new File(DB_PATH + DB_NAME);
            //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
            return dbFile.exists();
        }

        //Copy the database from assets
        private void copyDataBase() throws IOException
        {
            InputStream mInput = mContext.getAssets().open(DB_NAME);
            String outFileName = DB_PATH + DB_NAME;
            OutputStream mOutput = new FileOutputStream(outFileName);
            byte[] mBuffer = new byte[1024];
            int mLength;
            while ((mLength = mInput.read(mBuffer))>0)
            {
                mOutput.write(mBuffer, 0, mLength);
            }
            mOutput.flush();
            mOutput.close();
            mInput.close();
        }

        //Open the database, so we can query it
        public boolean openDataBase() throws SQLException
        {
            String mPath = DB_PATH + DB_NAME;
            //Log.v("mPath", mPath);
            myDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
            //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
            return myDataBase != null;
        }

        @Override
        public synchronized void close() 
        {
            if(myDataBase != null)
                myDataBase.close();
            super.close();
        }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:46:29.230

我认为这可能对您有所帮助：http: [//zaman91.wordpress.com/2010/09/22/android-how-to-use-own-sqlite-database/](http://zaman91.wordpress.com/2010/09/22/android-how-to-use-own-sqlite-database/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:00:12.927

如果您使用 Eclipse，您可以下载此插件，只需复制粘贴 .jar 文件即可：) 只需通过此[链接](http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/) ，您就可以在 DDMS 中看到您的数据库

通常Sqlite数据存储在

```
 //data/data/<Your-Application-Package-Name>/databases/<your-database-name> 
```

但是如果你看不到他们。您可以将数据库直接存储在 SD 卡中，如下所示：

```
 static class  SQLiteHelper extends SQLiteOpenHelper {

 SQLiteHelper(final Context context) {
    super(context, Environment.getExternalStorageDirectory()
            + File.separator + "/DataBase/" + File.separator
            + DATABASE_NAME, null, DATABASE_VERSION);
} 
```

现在您可以在 /sdcard 的 DataBase 文件夹中看到创建的数据库如果您将数据库存储在内部存储器中，那么您也可以将您的数据库从内部存储器复制到 SD 卡:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:07:54.950

> 当有一个新项目时，我找不到数据库文件夹

原因是安全。如果将数据库放置在内部存储中会更准确，这样数据库只能从创建它的应用程序中看到。您的 .db 文件存储在

```
data/data/com.example.db/databases 
```

所以如果你想在另一个项目（有不同的包）中打开它，就不会有你的文件。

> 在哪里放置我的文件

如果您想在多个应用程序之间实现和共享一个 db，您可以将文件保存到外部存储中，但现在这里是关于敏感数据安全性的问题。

但您还有另一种选择。您可以为更多应用程序共享一个数据库，但因此您必须在manifest.xml中为每个应用程序指定**sharedUserId**

```
android:sharedUserId="com.example" 
```

然后，如果您想从另一个应用程序连接到 db，您需要使用托管应用程序包。

```
Context cntxt = this.createPackageContext("hosting.app.package.name", 
                Context.CONTEXT_INCLUDE_CODE); 
```

# android - 如何使列表视图看起来像 android 中的横格纸？

> ID：15743721
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:43:52.847
> 
> 标签：android, listview

我是android应用程序开发的菜鸟，这就是我想要的

我有一个列表视图，我正在使用自定义适配器填充列表视图

我想让这个列表视图看起来像一张横格纸，即使列表是空的

（请看这张[图片](http://www.uiparade.com/portfolio/simple-to-do-list/)<--我想让列表视图看起来像这样）

我希望列表视图可以滚动，水平线应该随着列表视图滚动

编辑：

[图](http://i.imgbox.com/abbmUvEJ.png)1 <-- 这是我迄今为止所取得的成果（使用九个补丁图像）

我的列表视图代码

```
<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/list_bg1"
    android:cacheColorHint="#000000">

</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:49:39.443

我认为您可以在行布局中使用专门准备的图像作为背景，然后更改分隔符颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:49:06.293

我看到关于您的请求与您链接到的图像的 1 个重要区别：显示的列表不为空。我指出这一点是因为您的请求可以通过将背景可绘制 9-patch 图像分配给您的列表行来相当简单地实现，但是用“空白纸”填充显示会更先进一些 - 可以实现但尝试得到它分步工作。先说论文背景。:)

# facebook - 从公共粉丝页面生成帖子 ID 列表

> ID：15743723
> 
> 赞同：0
> 
> 时间：2013-04-01T12:43:57.113
> 
> 标签：facebook, facebook-graph-api

如何枚举公开的帖子？例如。即使没有登录 fb，您也可以在 fb.com/pepsi 页面上看到一长串帖子 我该如何检索它们？

我正在尝试找到一种方法来枚举粉丝页面墙上的帖子 ID 并逐个遍历它们。因为我只知道百事可乐页面的 ID，所以我从那里开始。我想在将它们枚举为列表后遍历每个帖子 ID。非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:00:25.840

好吧，您仍然可以在不登录 Facebook 的情况下查询 Graph API，但您需要一个访问令牌。您可以简单地创建一个应用程序并将其`APP_ID|APP_SECRET`用作应用程序访问令牌。我认为这对于仅处理公共帖子就足够了。

调用 -`https://graph.facebook.com/56381779049/posts?access_token=XXX`将返回该页面/上的公共内容的 JSON 数据。

```
{
   "data": [
      {
         "id": "56381779049_10151643119694050",
         "from": {
            "category": "Food/beverages",
            "name": "Pepsi",
            "id": "56381779049"
         },
         "story": "\"Thanks for sharing Bobby! Love...\" on Bobby Kirchner's photo.",
         ...
         "created_time": "2013-03-29T21:35:41+0000",
         "updated_time": "2013-03-29T21:35:41+0000"
      },
      {
         "id": "56381779049_10151639464904050",
         "from": {
            "category": "Food/beverages",
            "name": "Pepsi",
            "id": "56381779049"
         },
         "story": "\"Hi James, sorry to hear that....\" on James Kraus II's photo.",
         ...
         "created_time": "2013-03-27T18:23:49+0000",
         "updated_time": "2013-03-27T18:23:49+0000"
      },
... 
```

根据您使用的语言，迭代所有数据并将其转换为更易于执行分析的结构会很简单。例如，在 PHP 中，有一个`json_decode()`函数可以将 JSON 数据转换为普通的 PHP 数组。

请注意，每当您对 Facebook API 进行查询并且要返回的数据量相对较大时，每个请求中都会有一个分页机制。看起来是这样的——

```
"paging": {
  "previous": "https://graph.facebook.com/56381779049/posts?access_token=XXX&limit=25&since=1364592941&__previous=1",
  "next": "https://graph.facebook.com/56381779049/posts?access_token=XXX&limit=25&until=1362582226"
} 
```

# asp.net - 在 asp.net 中发布表单后需要成功或失败的警报

> ID：15743726
> 
> 赞同：0
> 
> 时间：2013-04-01T12:44:07.513
> 
> 标签：asp.net, html, asp.net-mvc-3

我的表单中有一个输入框和一个 html 文件上传器。我想提交将保存在数据库中的输入框和上传文件的文本，然后我需要在我的 html 页面中显示成功或失败警报。我不知道我该怎么做。我已经完成了获取帖子值并将其保存在数据库中的过程，但我无法向我的 web page.net mvc3 发出任何警报。我正在使用 asp.net mvc3。任何形式的帮助都将得到应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:07:35.610

```
 HttpContext.Current.Response.Write
                ("<script>alert('" + pageTable[page].Dequeue() + "');</script>"); 
```

[看这个例子这将帮助你](http://www.codeproject.com/Tips/370157/A-Windows-Form-like-MessageBox-for-ASP-NET-Website)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:39:42.150

当您使用 MVC 时，您可以在 VIEW 中编写一个 JavaScript 逻辑，只有在某些 FLAG 为真时才会调用该逻辑。当您第一次调用时，FLAG 的视图将关闭。成功上传后，使该 FLAG 为 true，它将执行或编写带有警告消息的 javascript，并由用户看到

# c# - 从 json 序列化列表对象构建动态表

> ID：15743728
> 
> 赞同：2
> 
> 时间：2013-04-01T12:44:10.107
> 
> 标签：c#, asp.net, ajax, jquery-mobile

我正在尝试通过 ajax 获取序列化的 json 列表并在 html jquery 移动页面中创建动态表。该列表来自代码后面的 sql 数据库。我只是不知道我是否正确地返回了 json 对象，以及如何从 ajax 成功函数中访问它。

我的目标是动态创建一个包含 html 中所有成员的表。

**我创建了一个成员类：**

```
public class Member
{
    public Member()
    {
        //
        // TODO: Add constructor logic here
        //
    }

    public String fName { set; get; }

    public String lName { set; get; }

} 
```

**这是我在后面的代码中返回成员列表的函数：（写在一个与sql连接的类中）**

```
public List<Member> return_member_list()
    {
        List<Member> member_list = new List<Member>();

        String fName;
        String lName;

        SqlConnection user_con = connect("ActConString");
        SqlCommand user_command = create_command(user_con, "select m_first_name, m_last_name from member");

        SqlDataReader rdr = user_command.ExecuteReader();

        while (rdr.Read())
        {
            Member m1 = new Member();
            fName = Convert.ToString(rdr["m_first_name"]);
            lName = rdr["m_last_name"].ToString();

            m1.fName = fName;
            m1.lName = lName;

            member_list.Add(m1);

        }

        rdr.Close();
        user_con.Close();

        return member_list;
    } 
```

**然后我使用 aspx 页面 web 方法返回序列化列表：**

```
 [WebMethod]
    public static String return_member_list()
    {
        dbservices db1 = new dbservices();

        List<Member> member_list = db1.return_member_list();

        var jsonSerialiser = new JavaScriptSerializer();

        var json = jsonSerialiser.Serialize(member_list);

        return json;
    } 
```

**和阿贾克斯：**

```
 $(document).ready(function () {

            $.ajax({
                type: "POST",
                url: "getdata.aspx/return_member_list",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (res) {

                    //this is where I need help

                },
                error: function (res, msg, code) {
                    // log the error to the console
                    alert("The following error occured: " + msg + " " + code);
                } //error

            });

        }); 
```

我也会在动态创建表格方面提供帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:14:13.217

您需要执行以下成功功能

```
success: function (res) {
    var parsedData = JSON.parse(res.d);
    var tableStr = "<table>";
    $.each(parsedData, function(){
        tableStr +="<tr><td>"+this.fName+"</td><td>"+this.lName+"</td></tr>";
    });
    tableStr += "</table>";
    $('#tableDiv').html(tableStr);
} 
```

假设您有一个带有 id 的 div`tableDiv`

# kendo-ui - 使用 kendo ui 框架传递 javascript 函数参数的正确格式是什么？

> ID：15743731
> 
> 赞同：-2
> 
> 时间：2013-04-01T12:44:18.327
> 
> 标签：kendo-ui

我有使用 kendo 数据源动态生成的图像链接，我需要调用一个使用 id 的函数...

你如何格式化href以使用参数调用javascript函数？

在这里查看我的尝试：http: [//screencast-o-matic.com/watch/cIfVlpVYUH](http://screencast-o-matic.com/watch/cIfVlpVYUH)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:07:11.967

如果你像下面这样替换你的锚标签

```
<a href="javascript:getItems(${id})">...</a> 
```

然后，getItems() 方法将调用。例如，

```
function getItems(value){
   // use value as you wish
} 
```

然后，您可以获得“id”值作为参数。

# node.js - 在 Karma 的 runner 中包含 Jasmine-node 文件

> ID：15743732
> 
> 赞同：4
> 
> 时间：2013-04-01T12:44:22.253
> 
> 标签：node.js, unit-testing, angularjs, jasmine, jasmine-node

目前，我有一组 node.js Javascript 文件以及一组“常规”Javascript 文件，我将使用 Angular 作为客户端框架将它们发送到浏览器。对于单元测试，我使用 jasmine-node 来测试服务器，并通过 Karma 使用 jasmine 作为客户端文件。有没有办法可以将我的 jasmine-node 文件包含到 Karma 中以拥有一个测试运行器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:54:12.217

我还有一个带有 angular.js 客户端代码的 node.js 服务器，并且正在使用 jasmine-node。我不知道是否有办法（或者是否甚至可取）使用 jasmine-node 来测试您的客户端代码。我正在使用业力（以前是睾丸），它工作得很好。您需要做的就是创建一个配置文件来加载您的项目和 angular.mock.js 并指向您的测试文件。

很抱歉，这并不能完全回答您的问题，但它是一种无痛的测试方法。

[http://karma-runner.github.com/0.8/index.html](http://karma-runner.github.com/0.8/index.html)

# mysql - 如何按不同的 WHERE 条件将数据排列到不同的列中？

> ID：15743734
> 
> 赞同：0
> 
> 时间：2013-04-01T12:44:42.140
> 
> 标签：mysql, sql, select, pivot

我有一个包含 3 列（SID、SUBJECT、MARKS）的表：

```
╔══════╦═════════╦═══════╗
║ SID  ║ SUBJECT ║ MARKS ║
╠══════╬═════════╬═══════╣
║ 1A01 ║ ENG     ║    66 ║
║ 1A02 ║ ENG     ║    75 ║
║ 1A01 ║ MATH    ║    60 ║
║ 1A03 ║ ENG     ║    73 ║
║ 1A02 ║ MATH    ║    35 ║
║ 1A03 ║ MATH    ║    80 ║
║ 1A01 ║ CHI     ║    65 ║
║ 1A02 ║ CHI     ║    74 ║
║ 1A03 ║ CHI     ║    78 ║
╚══════╩═════════╩═══════╝ 
```

我想按每行中的 SID 对数据进行分组，例如：

```
╔══════╦═════╦═════╦══════╗
║ SID  ║ CHI ║ ENG ║ MATH ║
╠══════╬═════╬═════╬══════╣
║ 1A01 ║  65 ║  66 ║   60 ║
║ 1A02 ║  74 ║  75 ║   35 ║
║ 1A03 ║  78 ║  73 ║   80 ║
╚══════╩═════╩═════╩══════╝ 
```

我是 mysql 新手，我尝试使用子查询和 UNION 但失败了。谁能给我一些提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T12:50:18.487

如果这 3 个是唯一的主题，您可以使用`CASE`来测试`Subject`for each`SID`并使用`MAX()`.

```
SELECT  SID,
        MAX(CASE WHEN Subject = 'Chi' THEN Marks ELSE NULL END) `Chi`,
        MAX(CASE WHEN Subject = 'Eng' THEN Marks ELSE NULL END) `Eng`,
        MAX(CASE WHEN Subject = 'Math' THEN Marks ELSE NULL END) `Math`
FROM    TableName
GROUP   BY SID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/44443/1)

但是，如果您有未知数量的主题，那么使用动态*SQL*`PREPARE`是更可取的。

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN Subject = ''',
      Subject,
      ''' then Marks end) AS ',
      CONCAT('`', Subject,'`')
    )
  ) INTO @sql
FROM TableName;

SET @sql = CONCAT('SELECT  SID, ', @sql, ' 
                    FROM    TableName
                    GROUP   BY SID');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/44443/4)

**两个查询的**输出****

 **```
╔══════╦═════╦═════╦══════╗
║ SID  ║ CHI ║ ENG ║ MATH ║
╠══════╬═════╬═════╬══════╣
║ 1A01 ║  65 ║  66 ║   60 ║
║ 1A02 ║  74 ║  75 ║   35 ║
║ 1A03 ║  78 ║  73 ║   80 ║
╚══════╩═════╩═════╩══════╝ 
```**

# asp.net - 未找到 RadGrid PageSizeComboBox

> ID：15743740
> 
> 赞同：1
> 
> 时间：2013-04-01T12:44:54.793
> 
> 标签：asp.net, telerik-grid

radgrid 的 PageSizeComboBox 在 ItemDataBound 事件或任何其他事件中给我空结果。我需要获取 RadGrid PageSizeComboBox 的选定值。我应该怎么做才能获得 PageSizeComboBox

这是我在 Grid 的 ItemDataBound 事件中编写的代码

```
 if (e.Item is GridDataItem)
     {
                RadComboBox PageSizeCombo = e.Item.FindControl("PageSizeComboBox") as RadComboBox;
     } 
```

我需要得到这个控制。我也想在我的 Button Click 事件中得到它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:24:44.767

请尝试使用以下代码片段。

```
if (e.Item is GridPagerItem)  
    {     
        GridPagerItem pagerItem = (GridPagerItem)e.Item;  
        RadComboBox PageSizeCombo = (RadComboBox)pagerItem.FindControl("PageSizeComboBox");  
        // Access ComboBox here   
    } 
```

欲了解更多信息，请查看以下链接。 [http://jayeshgoyani.blogspot.in/2012/06/customizing-items-of-radgrid-page-size.html](http://jayeshgoyani.blogspot.in/2012/06/customizing-items-of-radgrid-page-size.html)

# java - 具有引用数据类型的通用队列

> ID：15743741
> 
> 赞同：0
> 
> 时间：2013-04-01T12:44:57.930
> 
> 标签：java

我已经实现了一个通用队列（在 java 中），它适用于不同的数据类型，但是当我尝试使用引用类型实例化我的队列时，我从编译器得到“越界”错误；`Queue<Node<T>> myQueue = new Queue<Node<T>>();` 这是我实现的一部分：

```
public class Queue<F extends Comparable<? super F>>
{
    private static class QueueNode<F extends Comparable<? super F>>
    {
        private F data;
    private QueueNode<F> next;

    public QueueNode()
    {
        next = null;
    }
    public QueueNode(F val)
    {
        data = val;
        next = null;
    }
    }
    private QueueNode<T> head, rear;
    public Queue()
    {
        head = rear = null;
    }
    public boolean isEmpty()
    {
    }
    public void enqueue(F el)
    {
    }
    public F dequeue()
    {
    } 
} 
```

我有一个根据节点实现的二叉树，这个队列将用于二叉树类中的一种方法。谁能帮我找出问题并解决它！好的，这正是编译器所说的： Queue> myQueue = new Queue>(); “类型参数节点不在类型变量 F 的范围内”“其中 T，F 是典型变量：T 扩展类 BinarySearchTree 中声明的 Comparable F 扩展类队列中声明的 Comparable”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:12:58.807

`myQueue` declaration should use an actual class instead of `T`.

Ex: To create a queue of `String`

```
Queue<Node<String>> myQueue = new Queue<Node<String>>(); 
```

# spring - OpenSessionInViewFilter 和 Wicket 仍然遇到 LazyInitializationExceptions

> ID：15743742
> 
> 赞同：1
> 
> 时间：2013-04-01T12:44:59.797
> 
> 标签：spring, hibernate, wicket

我将 Spring 的 OpenSessionInViewFilter 与 Wicket 结合使用，但我一直遇到 LazyInitializationExceptions，我无法解决。我可以在日志中看到休眠会话在引发异常之前已关闭，所以我显然做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:08:45.993

OSIVFilter 必须在 WicketFilter 之上，否则请求将无法到达。WicketFilter 自己处理页面请求，它不委托给其他组件，例如另一个 servlet（因此，过滤器链停在那里）。

另一种方法是创建一个`IRequestCycleListener`与 OSIVFilter 相同的实现。我通过修改 Spring 的过滤器代码以符合新接口创建了这样的类，如下所示：

```
import org.apache.wicket.MetaDataKey;
import org.apache.wicket.protocol.http.WebApplication;
import org.apache.wicket.request.cycle.AbstractRequestCycleListener;
import org.apache.wicket.request.cycle.RequestCycle;
import org.hibernate.FlushMode;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.dao.DataAccessResourceFailureException;
import org.springframework.orm.hibernate4.SessionFactoryUtils;
import org.springframework.orm.hibernate4.SessionHolder;
import org.springframework.transaction.support.TransactionSynchronizationManager;
import org.springframework.web.context.WebApplicationContext;
import org.springframework.web.context.support.WebApplicationContextUtils;

public class OpenSessionInViewRequestCycleListener extends AbstractRequestCycleListener {

    protected final Logger logger = LoggerFactory.getLogger(getClass());

    public static final String DEFAULT_SESSION_FACTORY_BEAN_NAME = "sessionFactory";

    private static final MetaDataKey<Boolean> PARTICIPATE = new MetaDataKey<Boolean>() {
    };

    private static final MetaDataKey<SessionFactory> SESSION_FACTORY = new MetaDataKey<SessionFactory>() {
    };

    private String sessionFactoryBeanName = DEFAULT_SESSION_FACTORY_BEAN_NAME;

    private final WebApplication application;

    public OpenSessionInViewRequestCycleListener(WebApplication application) {
        this.application = application;
    }

    /**
     * Set the bean name of the SessionFactory to fetch from Spring's
     * root application context. Default is "sessionFactory".
     * @see #DEFAULT_SESSION_FACTORY_BEAN_NAME
     */
    public void setSessionFactoryBeanName(String sessionFactoryBeanName) {
        this.sessionFactoryBeanName = sessionFactoryBeanName;
    }

    /**
     * Return the bean name of the SessionFactory to fetch from Spring's
     * root application context.
     */
    protected String getSessionFactoryBeanName() {
        return this.sessionFactoryBeanName;
    }

    @Override
    public void onBeginRequest(RequestCycle cycle) {
        SessionFactory sessionFactory = lookupSessionFactory(cycle);
        cycle.setMetaData(SESSION_FACTORY, sessionFactory);
        cycle.setMetaData(PARTICIPATE, false);

        if (TransactionSynchronizationManager.hasResource(sessionFactory)) {
            // Do not modify the Session: just set the participate flag.
            cycle.setMetaData(PARTICIPATE, true);
        }
        else {
            logger.debug("Opening Hibernate Session in OpenSessionInViewRequestCycleListener");
            Session session = openSession(sessionFactory);
            SessionHolder sessionHolder = new SessionHolder(session);
            TransactionSynchronizationManager.bindResource(sessionFactory, sessionHolder);
        }
    }

    @Override
    public void onEndRequest(RequestCycle cycle) {
        if (!cycle.getMetaData(PARTICIPATE)) {
            SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.unbindResource(cycle.getMetaData(SESSION_FACTORY));
            logger.debug("Closing Hibernate Session in OpenSessionInViewFilter");
            SessionFactoryUtils.closeSession(sessionHolder.getSession());
        }
    }

    /**
     * Look up the SessionFactory that this filter should use,
     * taking the current HTTP request as argument.
     * <p>The default implementation delegates to the {@link #lookupSessionFactory()}
     * variant without arguments.
     * @param cycle the current request
     * @return the SessionFactory to use
     */
    protected SessionFactory lookupSessionFactory(RequestCycle cycle) {
        return lookupSessionFactory();
    }

    /**
     * Look up the SessionFactory that this filter should use.
     * <p>The default implementation looks for a bean with the specified name
     * in Spring's root application context.
     * @return the SessionFactory to use
     * @see #getSessionFactoryBeanName
     */
    protected SessionFactory lookupSessionFactory() {
        if (logger.isDebugEnabled()) {
            logger.debug("Using SessionFactory '" + getSessionFactoryBeanName() + "' for OpenSessionInViewFilter");
        }
        WebApplicationContext wac = WebApplicationContextUtils.getRequiredWebApplicationContext(this.application.getServletContext());
        return wac.getBean(getSessionFactoryBeanName(), SessionFactory.class);
    }

    /**
     * Open a Session for the SessionFactory that this filter uses.
     * <p>The default implementation delegates to the
     * {@code SessionFactory.openSession} method and
     * sets the {@code Session}'s flush mode to "MANUAL".
     * @param sessionFactory the SessionFactory that this filter uses
     * @return the Session to use
     * @throws DataAccessResourceFailureException if the Session could not be created
     * @see org.hibernate.FlushMode#MANUAL
     */
    protected Session openSession(SessionFactory sessionFactory) throws DataAccessResourceFailureException {
        try {
            Session session = sessionFactory.openSession();
            session.setFlushMode(FlushMode.MANUAL);
            return session;
        } catch (HibernateException ex) {
            throw new DataAccessResourceFailureException("Could not open Hibernate Session", ex);
        }
    }

} 
```

# javascript - 仅从 javascript 中的数组列表中获取常见对象

> ID：15743750
> 
> 赞同：2
> 
> 时间：2013-04-01T12:45:32.133
> 
> 标签：javascript, jquery, arrays

我的javascript代码中有几个数组（我也在使用淘汰赛js），我想得到一个只包含所有数组的公共对象的数组。

我的代码是这样的：

```
Array1 = [{a: 1, b: 'something'}, {a: 2, b: 'something1'},{a: 3, b: 'something3'}];

Array2 = [{a: 3, b: 'something3'}, {a: 1, b: 'something'}, {a: 4, b: 'something4'}]

Array2 = [{a: 3, b: 'something3'}, {a: 1, b: 'something'}, {a: 5, b: 'something5'}] 
```

所以，从这个数组中，我想把所有的共同点放在一个数组中，所以结果是这样的：

```
Array4 = [{a: 1, b: 'something'}, {a: 3, b: 'something3'}] 
```

我不得不提到 Array1、Array2 和 Array3 在另一个数组中，如下所示：

```
Array0 = [Array1, Array2, Array3]; 
```

我希望你能帮助我解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T13:15:25.380

例如：

```
Array1 = [{a: 1, b: 'something'}, {a: 2, b: 'something1'},{a: 3, b: 'something3'}];
Array2 = [{a: 3, b: 'something3'}, {a: 1, b: 'something'}, {a: 4, b: 'something4'}]
Array3 = [{a: 3, b: 'something3'}, {a: 1, b: 'something'}, {a: 5, b: 'something5'}]

all = [Array1, Array2, Array3]

objects = {}
counter = {}

all.map(function(ary, n) {
    ary.map(function(obj) {
        var key = JSON.stringify(obj);
        objects[key] = obj;
        counter[key] = (counter[key] || 0) | (1 << n);
    })
})

intersection = []
Object.keys(counter).map(function(key) {
    if(counter[key] == (1 << all.length) - 1)
        intersection.push(objects[key]);
})

console.log(intersection) 
```

这个想法是把所有对象放在一个哈希表中，使用它们的 JSON 表示作为键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:58:01.257

似乎您需要编写一些自定义代码来在 javascript 中进行对象比较（类似于[JavaScript 中的对象比较](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)），然后使用数组相交算法（如前面提到的海报之一）来查找公共元素。

# google-chrome - 谷歌浏览器从 URL 栏搜索我的网站

> ID：15743751
> 
> 赞同：8
> 
> 时间：2013-04-01T12:45:36.723
> 
> 标签：google-chrome

如果你打开谷歌浏览器，在 URL 栏中点击并输入：`google.com`然后点击`tab`，你会得到一个：`Search Google for <enter query>`。

我在我的网站上尝试过，因为我在将表单发送到 SEO 友好的 url 之前使用 javascript 来处理表单，所以对我的网站的搜索不起作用它将我重定向到`site.com/?question=test`而不是`site.com/search/test`

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:19:33.443

它被称为omnibar。如果您在 Google 上搜索它们，就会有一些教程。它只是一个`link`标签，告诉 Chrome 在用户使用多功能栏搜索您的网站时使用哪个 URL。具体细节在开放搜索描述 (OSD) 中有详细说明。

这是 Stack Overflow 的 OSD：

```
<link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml" /> 
```

# perl - perl LWP POST 使用特殊字符

> ID：15743753
> 
> 赞同：-2
> 
> 时间：2013-04-01T12:45:38.953
> 
> 标签：perl, post, special-characters, lwp

我正在努力使用 LWP 发布 Perl 数据。

这是我的代码

```
$req = POST $url, [
    SESSID => $sessid,
    csrf => $csrf,
    domainid => '1234567',
    type => 'A',
    default => '0',
    record-type => 'A',
    a-record%5B%5D => '12.12.12.12',
     aaaa-record => '',
     cname-record => ''
]; 
```

该代码显然在`a-record%5B%5D`. 如何使这个 Perl 兼容？

我已经试过了`'a-record%5B%5D'`；`a-record\%5B\%5D`; `a-record[]`; `a-record\[\]`;`a-record\%5B\%5D`

据我了解，表单的字段名确实是 `<input id="a0" class="left" type="text" value="11.11.11.11" name="a-record[]">`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:56:02.433

如果您不引用，则只能在左侧使用普通字母、下划线和数字：

```
$req = POST $url, [
    SESSID           => $sessid,
    csrf             => $csrf,
    domainid         => '1234567',
    type             => 'A',
    default          => '0',
    'record-type'    => 'A',
    'a-record%5B%5D' => '12.12.12.12',
    'aaaa-record'    => '',
    'cname-record'   => ''
]; 
```

现在这是代码中的语法问题。

另外，请查看[perlsyn](http://search.cpan.org/~rjbs/perl-5.16.3/pod/perlsyn.pod)以获取有关如何格式化 perl 代码的提示。

# c# - 如何动态更改不同 .NET 应用程序的图标（来自 C#）

> ID：15743756
> 
> 赞同：0
> 
> 时间：2013-04-01T12:45:54.343
> 
> 标签：c#, .net, winforms

我正在开发安装程序，并希望安装程序具有与其正在安装的应用程序相同的图标（在 Windows 任务栏和资源管理器中）。

我不想每次都用不同的图标重新编译安装程序，那么如何从另一个（C#）应用程序（安装程序创建者应用程序）更改安装程序的图标？

理想情况下，如果可能，可以将图标从正在安装的 .exe 中拉出。

怎么可能做到这一点？

# c++ - 如何创建一个读取多个文件的函数？

> ID：15743757
> 
> 赞同：-2
> 
> 时间：2013-04-01T12:45:56.167
> 
> 标签：c++, function

嗨，我正在开发一个应用程序，我想创建一个读取文件 ex 的函数。

```
readFiles()
{ 
   f1, f2=NULL, f3=NULL;
} 
```

但我很难加载多个文件。我想创建一个函数来读取文件并将它们设置为指定的变量，以便在我的程序中的其他函数中使用。任何帮助或想法都会很棒。再次感谢！附言。这不是家庭作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:00:52.570

我个人会从编写一个可以读取一个文件的函数开始。从另一个知道需要读取哪些文件的函数调用该函数。

例如，假设文件不是巨大的（千兆字节大），您可以执行一个将文件读入单个字符串的函数：

```
 std::string readfile(std::string name)
 {
     ifstream f(name.c_str());
     std::stream tmp;
     std::stream res;
     while(getline(f, tmp)
     {
       res += tmp;
     }
     return res;
 }

 void somefunc()
 {
    std::string file1 = readfile("file1.txt");
    std::string file2 = readfile("file2.txt");
 } 
```

当然，如果文件是整数列表，您可能希望将数据读入整数向量。如果内容更复杂，读入向量、结构或类也可以。但基本原则适用[当然，假设几个文件具有相同的一般内容类型]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:53:19.697

你看过了`ifstream`吗？看这里：[http ://www.cplusplus.com/reference/fstream/ifstream/ifstream/](http://www.cplusplus.com/reference/fstream/ifstream/ifstream/)

您是将流传递给函数还是实际文件名？您需要为多个文件创建多个流，除非您想一次处理一个文件。你必须做这样的事情：

```
ifstream nameOfStream ("Name of File"); 
```

创建流。您甚至不需要在函数中执行此操作。如果你有所有的文件名，你可以这样做：

```
ifstream stream1(file1);
ifstream stream2(file2);
ifstream stream3(file3); 
```

编辑：如果你想用一个流来做：

```
ifstream stream1(file1);
//Do something with stream
stream1.close();
stream1.open(file2); 
```

# machine-learning - 词汇级相似度词聚类工具

> ID：15743760
> 
> 赞同：0
> 
> 时间：2013-04-01T12:46:04.980
> 
> 标签：machine-learning, nlp, text-mining, stemming

是否有任何开放的软件工具包可以比较单词之间的词汇级相似性并将相似的单词组合在一起？例如，Blue jean、Blue Jeans 和 blue jea（拼写错误）应该组合在一起吗？我不需要在这里寻找语义相似性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:51:08.500

尝试自然语言工具包[http://nltk.org/](http://nltk.org/)

这是布朗聚类算法的一个相当抽象的处理[http://www.cs.columbia.edu/~cs4705/lectures/brown.pdf](http://www.cs.columbia.edu/~cs4705/lectures/brown.pdf)

单词之间的标准相似度度量是 Levenstein 距离 [http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:30:45.077

**我相信您对词干提取**比对实际聚类更感兴趣，例如使用 Levensthein 距离：使用无监督的文本相似性*太*容易产生误报。

从词汇相似性的角度来看，

```
blue jean
blue dean 
```

也只是一个字符不同。然而，这是一个不太可能的错字。

你真的想使用一些*受监督*的东西，比如搬运工词干分析器来匹配。

# ios - 带有附加对象的 NSFetchedResultsController

> ID：15743761
> 
> 赞同：1
> 
> 时间：2013-04-01T12:46:06.283
> 
> 标签：ios, core-data

我正在尝试使用 nsfetchedresultscontroller 从数据库中获取对象以在表格视图中显示。我想将一些自定义对象附加到获取的对象以用于显示目的。最好的方法是什么？

我当前的方法是将 [fetchedresultscontroller fetchedObjects] 存储在一个名为 objectsDatasource 的数组中，并将我的对象附加到其中。我使用这个 objectsDatasource 作为 tableview 的数据源。当我收到controllerDidChangeContent 时，我再次调用fetchedObjects 并重新加载我的objectsDatasource。会不会有性能问题？

另一种方法是放弃 nsfetchedresultscontroller 并创建我自己的数组并将观察者添加到 NSManagedObjectDidSaveNotification。

[fetchedResultsController fetchedObjects] 最初是否将所有对象作为故障提取并且仅在访问属性时触发故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:30:55.810

我将避免复制从获取结果控制器返回的数组，并尽可能将添加的结果保存在单独的数组中（从获取结果控制器返回的数组是存储在数据库中的实际数据的虚拟游标，可能实际上并不持有内存中的整个数据集）。
如果附加项目没有与从获取结果控制器返回的结果混合，我什至可能会将它们放在表的自己的部分中。

> > [fetchedResultsController fetchedObjects] 最初是否将所有对象作为故障提取并且仅在访问属性时触发故障？

这取决于分配给获取结果控制器的获取请求。如果您设置:`[request setReturnsObjectsAsFaults:NO]`和`[request setIncludesPropertyValues:YES]`，控制器将在首次从数据库中获取对象时出错，而不是在它们出现故障时再次出错（性能要好得多）。

# django - Django，使用其他表中的数据进行注释和排序

> ID：15743766
> 
> 赞同：3
> 
> 时间：2013-04-01T12:46:36.487
> 
> 标签：django, django-models

在我的应用程序中，有请求物品的用户和捐赠这些物品的用户。我想获取所有捐款最多的用户。

这些是我的模型：

```
class ItemRequest(models.Model):
    item_type = models.ForeignKey(ItemType)
    description = models.CharField(max_length=1024, default='', blank=True)
    quantity = models.IntegerField()
    user = models.ForeignKey(User)
    completed = models.BooleanField(default=False)
    completed_dt = models.DateTimeField()

class Donation(models.Model):
    item_request = models.ForeignKey(ItemRequest, related_name='donation')
    user = models.ForeignKey(User, related_name='donor')
    quantity_offered = models.IntegerField(default=0)
    quantity_accepted = models.IntegerField(default=0) 
```

更具体地说，我想获取“完成”捐赠最多的前 5 名捐赠者（在哪里`item_request.completed=True)`。我可以用一个查询来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:56:35.850

```
(User.objects
       .filter(donor__item_request__completed=True)
       .annotate(c=Count('donor'))
       .order_by('-c')[:5]) 
```

你也应该命名你的`Donation.user.related_name` `donation`。

然后就会

```
(User.objects
       .filter(donation__item_request__completed=True)
       .annotate(c=Count('donation'))
       .order_by('-c')[:5]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:57:55.527

```
Donation \
    .objects \
    .select_related('item_request', 'user') \
    .filter(item_request__completed=True) \
    .annotate(num_donations=models.Count('item_request')) \
    .filter(num_donations__gt=0) \
    .order_by("-num_domations")[:5] 
```

# .net - Net mvc 3 复杂模型将表单数据发送到控制器保存到数据库

> ID：15743773
> 
> 赞同：1
> 
> 时间：2013-04-01T12:47:11.827
> 
> 标签：.net, asp.net-mvc-3, editorformodel

我正在尝试将动态复杂模型传递给我的控制器，而不使用和编辑器视图模板。添加项目后，我的标记最终如下所示。

```
<ul>
    <li class="invItem">
        <input type="hidden" value="Bed California King" name="[0].efInvItem">
        <input type="hidden" value="4" name="[0].efRoomID"><span class="ui-icon ui-icon-circle-close removeItem"></span>Bed California King
    </li>
    <li class="invItem"><input type="hidden" value="Coffee Table Medium" name="[1].efInvItem">
    <input type="hidden" value="4" name="[1].efRoomID"><span class="ui-icon ui-icon-circle-close removeItem"></span>Coffee Table Medium
    </li>
    <li>
        <a href="#" class="addItem">Add inventory item to this room</a>
    </li>
</ul> 
```

我正在使用 javascript，而不是编辑器视图模板来创建列表。将项目添加到此列表时，我正在重命名所有输入元素，以便我拥有输入项目的有序列表。

然后我通过以下方式接收控制器中的表单项

```
[HttpGet]
public ActionResult SendEstimate(ICollection<EstimateFormInventory> intentoryItems) 
```

阅读这篇文章后按照建议的程序进行操作

```
http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx 
```

然后通过将项目保存到数据库

```
db.EstimateFormInventory.Add(estimateFormInventory);
db.SaveChanges(); 
```

但是，当发布到数据库时，ICollection 没有被迭代，并且我正在使用空值创建 1 行。

我的模型如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace OCMovers.Models
{
    public class EstimateFormInventory
    {
        [Key]
        public int efiID { get; set; }
        public virtual Room efRoomID { get; set; } 
        public string efiInvItem { get; set; }
    }
} 
```

我肯定错过了一些东西，任何建议都会很棒。

谢谢！

# java - 在这种情况下将创建多少个 UserHandler 类的实例？

> ID：15743775
> 
> 赞同：0
> 
> 时间：2013-04-01T12:47:28.313
> 
> 标签：java, spring, rmi

在我们的应用程序中，我们使用 Spring RMI 概念。

我有一个问题如下

有一个名为 UserHandlerI 的接口及其实现类 UserHandler 如下所示

**界面**

```
public interface UserHandlerI extends Remote {

public boolean add_user(String message) throws Exception;

} 
```

及其**实现类**（UserHandler）

```
public class UserHandler implements UserHandlerI 
{
public abstract boolean add_user(String message) throws Exception
{
// My business logic goes here
return true ;
}
} 
```

与上面的类和接口相关，这些在xml文件中都有提及

```
<bean id="streamer-core" class="com.user.UserHandler" scope="singleton" />

<bean id="streamer" class="org.springframework.remoting.rmi.RmiProxyFactoryBean">
        <property name="serviceUrl" value="rmi://${${appl-host}}:${${appl-port}}/App" />
        <property name="serviceInterface" value="com.at.UserHandler"/>
        <property name="refreshStubOnConnectFailure" value="true"/>
        <property name="lookupStubOnStartup" value="false" />
    </bean> 
```

我不确定我是否遗漏了配置文件中的任何内容？？

我的问题是，我怎么知道 UserHandler 类将被创建多少次（实例）。这会是单身人士吗？我能证明吗？？

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:52:40.643

您已将名称设置为具有单例范围`com.user.UserHandler`的 bean 。因此，每个应用程序上下文`streamer-core`只会创建一个**bean 。** `streamer-core`有关更多详细信息，请阅读：[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes-singleton)：

> 将单个 bean 定义限定为每个 Spring IoC 容器的单个对象实例。

但它只与bean有关。在将 RmiProxtFactoryBean 设置`com.user.UserHandler`为[SeviceInterface](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-context/3.0.2.RELEASE/org/springframework/remoting/support/RemoteAccessor.java#RemoteAccessor.setServiceInterface%28java.lang.Class%29)之后，您可以为`com.user.UserHandler`.

com.user.UserHandler 的实例通过[ProxyFactory](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-aop/3.0.2.RELEASE/org/springframework/aop/framework/ProxyFactory.java#ProxyFactory)在[RmiProxyFactoryBean#afterPropertySet中创建](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-context/3.0.2.RELEASE/org/springframework/remoting/rmi/RmiProxyFactoryBean.java#RmiProxyFactoryBean.afterPropertiesSet%28%29)

# jcl - 如何自动化批量监控作业

> ID：15743784
> 
> 赞同：0
> 
> 时间：2013-04-01T12:48:02.910
> 
> 标签：jcl

我们有一组称为批处理监控作业的 BMP，它们全天运行（始终执行状态），并且它们被购买运行开始作业。

我们需要看到 BMP 始终处于执行状态，我想自动执行此操作，以便它可以监视这些 BMP 并在它们关闭时通知我们，以便我们可以弥补它们。

你能帮我怎么做吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T15:30:27.027

大多数大型机都有一个调度应用程序，其中作业将手动启动或有启动条件（在这种情况下，条件是早上 6:00 之类的时间），然后如果有多个作业，可能会有启动其他作业的条件.

# salesforce - 如何在销售人员中实现这一点

> ID：15743785
> 
> 赞同：0
> 
> 时间：2013-04-01T12:48:03.360
> 
> 标签：salesforce

我有两个像 Enquery_c 这样的对象*，payment.enquery 对象有一个像opportunityOrder* _C 这样的字段，而payment__c 对象有两个像po_text__x 和Po_date 这样的字段。

我的要求是我输入字段机会Order__c 并自动更新另一个对象 Po_text__c 和 Po_date__ 等两个字段已自动更新。请告诉我如何解决此任务。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:39:15.553

为 Shimpson Korits 添加更多光线：

Payment 和 Enquery 之间可能存在关系，例如查找或主详细信息。

如果付款是 Enquery 的主/父（通过查找），则工作流和触发器是方法。

else 只有触发器可以用于更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:21:52.557

如果 Enquery_c 和 payment 之间的关系是 Master-Detail 关系，你可以通过 Workflow 来完成，否则在更新后触发 enquery__c。

# c++ - 这从 long in a union 转换为 char* 并返回有什么作用？

> ID：15743788
> 
> 赞同：0
> 
> 时间：2013-04-01T12:48:14.650
> 
> 标签：c++, windows, winapi, type-conversion

当我偶然发现这段代码时，我只是在检查一个简单的可执行打包器的代码，该打包器将一个部分写入可执行文件中，在启动期间将其解包：

```
void setDistance( unsigned long size )
{
    char* set = (((char *)I)+pUnpacker->VirtualAddress);
    union
    {
        short sh[2];
        long  l;
    } conv;
    conv.l      = size;
    conv.sh[0]  = 0;

    unpacker_set(set, (char *)(&conv.l), 4, TEXT_DISTANCE);
} 
```

Size 是从内存中的解包器代码到应该被解包的 Section 开头的距离。在加载程序代码中，它被定义为无符号长整数。unpacker_set 另一方面有这个代码：

```
void inline unpacker_set( char* at, char* what, size_t size, unsigned long sig )
{
    DWORD oldprotect;
    unsigned char *set  = (unsigned char *)at;

    while(*((unsigned long*)(set)) != sig)
        set++;

    if(VirtualProtect(set, size, PAGE_READWRITE, &oldprotect) == TRUE)
        for(unsigned i=0; i<size; i++)
            *(set+i) = *(what+i);
} 
```

虽然我知道第二个例程替换了解包器代码中的值，但我想知道为什么要完成联合的麻烦。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:57:11.163

理解代码的最好方法可能是编写一个非常小的测试用例，看看它做了什么：

```
#include <iostream>

void f()
{
  union 
  {
    short sh[2];
    long l ;
  } conv ;
   conv.l = 100000000 ;

   std::cout << std::hex << conv.l << std::endl ;

  conv.sh[0] = 0 ;

  std::cout << std::hex << conv.l << std::endl ;
}

int main()
{
  f() ;
} 
```

我看到的输出如下：

```
5f5e100
5f50000 
```

所以代码意图看起来像是试图掩盖大小的高阶位，尽管这非常难看并且不太可能是可移植的。

正如大卫指出的那样，您应该注意[严格的别名](https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule)。这篇文章[Type-punning and strict-aliasing](http://blog.qt.digia.com/blog/2011/06/10/type-punning-and-strict-aliasing/)更好，因为它有一些使用`union`s 的真实世界问题的可靠示例。因此，为了确保此代码按预期工作，`gcc`或者`clang`您需要传入以下命令行参数`-fno-strict-aliasing`。

# asp.net - 将超链接列动态添加到“GridView”（服务器端）

> ID：15743790
> 
> 赞同：2
> 
> 时间：2013-04-01T12:48:15.880
> 
> 标签：asp.net, gridview, dynamic, hyperlink, server-side

我有一个**ASP.NET**应用程序，它读取 XML 源并在[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview%28v=vs.110%29.aspx)中创建列。这个相同的 XML 源用于在[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)中创建列。应用程序填充`DataTable`然后将 绑定`DataTable`到`GridView`使用的服务器端代码。

现在我想在中显示一个超链接，但`GridView`不知道该怎么做。（请注意，应用程序没有使用[RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound(v=vs.110).aspx)事件。）

到目前为止，这是我所拥有的：

```
foreach (XmlNode columnNode in columnNodes)
{    
    dc = new DataColumn(columnNode.Attributes["ColumnName"].Value,
        Type.GetType("System.String"));
    dt.Columns.Add(dc);

    boundField = new BoundField();
    boundField.HeaderText = columnNode.Attributes["ColumnDisplayName"].Value;
    boundField.DataField = columnNode.Attributes["ColumnName"].Value;
    boundField.SortExpression = columnNode.Attributes["ColumnName"].Value; 
    grdView.Columns.Add(boundField);    
} 
```

哪里`dt`是 a`DataTable`并且`grdView`是 a `GridView`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:01:49.870

您应该使用[HyperLinkField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.aspx)来完成此操作；它是一种专为显示和格式化超链接而设计的绑定字段。您只需要稍微更新您的代码：

```
linkField = new HyperLinkField();
linkField.HeaderText = columnNode.Attributes["ColumnDisplayName"].Value;
// The field you want to use as the displayed text of the hyperlink
linkField.DataTextField = columnNode.Attributes["ColumnName"].Value;
// The field(s) you want to use in the URL behind the hyperlink
linkField.DataNavigateUrlFields = new string[] { columnNode.Attributes["ColumnName"].Value };
// The formatting string for your hyperlink.  Use this to build the links the way you want them.
linkField.DataNavigateUrlFormatString = "http://yourSiteName/links/{0}";
linkField.SortExpression = columnNode.Attributes["ColumnName"].Value; 
grdView.Columns.Add(linkField); 
```

您在问题中遗漏的部分是您希望这些超链接 URL 看起来像什么。它[`DataNavigateUrlFormatString`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.datanavigateurlformatstring.aspx)非常灵活（它的工作方式类似于`String.Format`，因此您可以从静态文本构建 URL 并从数据字段中嵌入文本）。

# asp.net - VB.NET/SQL Server 2012 - 列名无效

> ID：15743791
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:48:27.400
> 
> 标签：asp.net, sql-server, vb.net

当按下“注册”按钮时，Visual Studio 2012 在 SQL 语句中给我一个错误

```
sqlValidate = "SELECT * FROM users  where username=" + txtUsername.Text.ToString 
```

错误是：

> 列名“cdarwin”无效

其中 ' `cdarwin`' 是输入的用户名`txtUsername`。

谁能告诉我怎么了？

这是子的完整代码：

```
Public Sub register()
    Dim Username As String = txtUsername.Text
    Dim Surname As String = txtSurname.Text
    Dim Password As String = txtPassword.Text
    Dim Name As String = txtName.Text
    Dim Address1 As String = txtAddress1.Text
    Dim Address2 As String = txtAddress2.Text
    Dim City As String = txtCity.Text
    Dim Email As String = txtEmail.Text
    Dim Country As String = drpCountry.Text
    Dim DOB As Date = calDOB.SelectedDate
    Dim Occupation As String = txtOccupation.Text
    Dim WorkLocation As String = txtWorkLocation.Text
    Dim Age As Integer = Date.Today.Year - calDOB.SelectedDate.Year
    Dim ProjectManager As String = "N/A"
    Dim TeamLeader As String = "N/A"
    Dim TeamLeaderID As Integer = "1"
    Dim ProjectManagerID As Integer = "1"
    Dim RegistrationDate As Date = DateTime.Today
    Dim ContractType As String = "N/A"
    Dim ContractDuration As Integer = 6
    Dim Department As String = "N/A"
    Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
    Dim registerSQL As SqlCommand
    Dim sqlComm As String
    Dim validateSQL As SqlCommand
    Dim sqlValidate As String

    sqlValidate = "SELECT * FROM users  where username=" + txtUsername.Text.ToString

    sqlComm = "INSERT INTO users(Username, Password, Name, Surname, Address1, Address2, " +
        "City, Country, date_of_birth, age, Occupation, department, work_location, " +
        "project_manager,team_leader, team_leader_id, project_manager_id, " +
        "date_registration, contract_type, contract_duration) " +
        "VALUES(@p1, @p2,@p3,@p4,@p5,@p6,@p7,@p8,@p9,@p10,@p11,@p12,@p13,@p14,@p15," +
        "@p16,@p17,@p18,@p19,@p20)"

    conn.Open()

    validateSQL = New SqlCommand(sqlValidate, conn)

    Dim dr As SqlDataReader = validateSQL.ExecuteReader()

    If dr.HasRows = False Then
        dr.Close()

        registerSQL = New SqlCommand(sqlComm, conn)
        registerSQL.Parameters.AddWithValue("@p1", Username)
        registerSQL.Parameters.AddWithValue("@p2", Password)
        registerSQL.Parameters.AddWithValue("@p3", Name)
        registerSQL.Parameters.AddWithValue("@p4", Surname)
        registerSQL.Parameters.AddWithValue("@p5", Address1)
        registerSQL.Parameters.AddWithValue("@p6", Address2)
        registerSQL.Parameters.AddWithValue("@p7", City)
        registerSQL.Parameters.AddWithValue("@p8", Country)
        registerSQL.Parameters.AddWithValue("@p9", DOB)
        registerSQL.Parameters.AddWithValue("@p10", Age)
        registerSQL.Parameters.AddWithValue("@p11", Occupation)
        registerSQL.Parameters.AddWithValue("@p12", Department)
        registerSQL.Parameters.AddWithValue("@p13", WorkLocation)
        registerSQL.Parameters.AddWithValue("@p14", ProjectManager)
        registerSQL.Parameters.AddWithValue("@p15", TeamLeader)
        registerSQL.Parameters.AddWithValue("@p16", TeamLeaderID)
        registerSQL.Parameters.AddWithValue("@p17", ProjectManagerID)
        registerSQL.Parameters.AddWithValue("@p18", RegistrationDate)
        registerSQL.Parameters.AddWithValue("@p19", ContractType)
        registerSQL.Parameters.AddWithValue("@p20", ContractDuration)

        registerSQL.ExecuteNonQuery()

        conn.Close()

    ElseIf dr.HasRows = True Then

        lblUsername.Text = "That Username (" + txtUsername.Text + ") is already registered/taken."
        lblUsername.Visible = True
        conn.Close()

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:50:23.830

除了不使用参数化查询（易受 sql 注入攻击）之外，您需要在字符串周围加上引号：

```
sqlValidate = "SELECT * FROM users  where username='" + txtUsername.Text.ToString + "'" 
```

如果没有引号，SQL Server 会尝试将“cdarwin”解释为列名。

这是使用参数化查询的模型：

```
sqlValidate = "SELECT * FROM users  where username=@user"
...
validateSQL.Parameters.AddWithValue("@user", txtUsername.Text) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:51:37.133

使用类似的查询

```
sqlValidate = "SELECT * FROM users  where username='@UserName'" 
```

使用参数化查询来发送您的数据。
您当前的代码容易受到 SQL 注入攻击。

```
validateSQL.Parameters.AddWithValue("@UserName", txtUsername.Text.ToString) 
```

# python - 如何自动反映数据库的变化？

> ID：15743792
> 
> 赞同：-2
> 
> 时间：2013-04-01T12:48:29.533
> 
> 标签：python, google-app-engine, python-2.7, app-engine-ndb

我有一个 ndb 条目，可以通过对我的应用引擎应用程序的 rpc 调用来更改。我还有一个 python web 应用程序创建一个 html 站点来显示条目。我如何在更改发生时显示更改而无需刷新页面？我是编写服务器端的新手，所以我需要提示在哪里看，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:45:44.253

您可以使用[Channels API](https://developers.google.com/appengine/docs/python/channel/overview)在浏览器中推送（服务器到客户端）更新。

# c# - 使用 C# DataGridView 更新 SQL 表？

> ID：15743798
> 
> 赞同：0
> 
> 时间：2013-04-01T12:48:53.213
> 
> 标签：c#, sql, sql-server, datagridview, sql-server-ce

我正在一个包含 DataGridView 的程序中创建一个表单。有用于查看数据库中不同表的特定按钮，它们工作正常。但是，我还希望能够编辑表的内容并将更改发送回数据库。在“编辑预订”按钮按下时，DataGridView 的数据源设置为连接到 SQL 语句的数据适配器：

```
SELECT * FROM bookings 
```

这很好用；输出显示了表格，我有以下几行：

```
adminDataGrid.AllowUserToDeleteRows = true;
adminDataGrid.AllowUserToAddRows = true; 
```

允许在数据网格中进行编辑。我遇到的问题是更新放入数据网格的任何输入。如果可能的话，我想在按下“更新按钮”或按下不同按钮时更新表，但我尝试使用 SqlCommandBuilder 生成插入和更新命令，然后调用 DataAdapter.Update() 但我想我是做一些非常错误的事情。任何人都可以告诉我如何实现我想要实现的目标吗？

在此先感谢，迈克尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:14:28.693

在您的更新按钮中：

```
int id; 
string name;
string address;  

for (int i = 0; i <= adminDataGrid.Rows.Count-1; i++)
{
    id = int.Parse(adminDataGrid.Rows[i].Cells["ID"].Value);
    name = adminDataGrid.Rows[i].Cells["NAME"].Value.ToString();
    address = adminDataGrid.Rows[i].Cells["Address"].Value.ToString();
// now write the C# code to update your table using id, name and address. in first cycle of the for loop the table will update with first row data of your adminDataGrid. 
} 
```

# ios - 发送不带 MFMessageComposeViewController 的消息

> ID：15743804
> 
> 赞同：3
> 
> 时间：2013-04-01T12:49:14.200
> 
> 标签：ios, objective-c, xcode

我喜欢制作自己的 iMessages 消息应用程序。该应用程序基本上已准备就绪，但我不知道如何在不显示 MFMessageComposeViewController 的情况下发送 iMessage。我知道有办法。他们在 ByteSMS 和所有其他 Message.app 替代品中使用它。

那么有没有办法做到这一点？

感谢您的任何回答！

它不应该提交到 Appstore。该应用程序应提交给 Cydia 或其他 3rd 方商店。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:41:14.907

你不能这样做我厌倦了使用 CTmessageCenter 在后台发送消息它适用于我，但由于使用私有框架（CTmessagecenter），苹果拒绝了我的应用程序

因此，如果您想这样做并想在 appstore 上上传应用程序，唯一的方法是使用 3rd 方网络服务

如果您不想上传应用商店，那么您可以使用 CTmessagecenter 肯定会为您工作

```
#import <CoreTelephony/CTMessageCenter.h> 

[[CTMessageCenter sharedMessageCenter] sendSMSWithText:@"Your Message here" serviceCenter:nil toAddress:@"Receiver's Phone Number here"]; 
```

这是另一篇文章，这可能是您正在寻找的 [使用核心电话发送短信的内容？](https://stackoverflow.com/questions/6281837/send-sms-using-core-telophony)

# javascript - 如何减少 JavaScript for 循环中的工作量？

> ID：15743805
> 
> 赞同：9
> 
> 时间：2013-04-01T12:49:15.103
> 
> 标签：javascript

下面的 JavaScript 循环 for increment 正在工作，但 for decrement 没有。如何解决这个问题？

```
for(var i=1; i<5; i++) { alert(i); } work fine

for(var i=10; i<5; i--) { alert(i); } not working 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-01T13:00:39.393

最好轻松检查它...以减少使用

```
for (var i = 10; i > 5; i--) { alert(i); } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-01T12:53:47.757

您对第二个 for 循环的条件检查不正确。你说 i=10，并在 i<5 时继续，这永远不会。

尝试

```
for(var i=10; i>5; i--) { alert(i); } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-01T12:55:54.887

第一个循环以`i = 1`并递增，因此`i = [1, 2, 3, 4]`while `i < 5`。第二个以 开头`i=10`，但主体永远不会执行，因为它应该只在 时运行`i < 5`。

你想要的可能是：

```
for (var i = 10; i > 5; i--) { alert(i); } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-11T21:40:54.923

“for”循环的第二个参数是退出条件。只要条件为真，就会执行 for 循环中的代码。例如：

```
for(var i = 0; i < 10; i++){
  console.log([i]);
}
```

在上面的 for 循环中，退出条件检查是否`i`小于`10`( `i < 10`)，这是因为在第一个实例中 i = 0，因此循环进入代码块并运行代码，然后递增并继续，直到退出条件为不再是真的。
你明白为什么当你说：`for (var i = 10; i < 5; i--){alert[i]}`for循环中的代码永远不会执行，因为退出条件的`i < 5`计算结果为假（`i`等于`10`）。为了实现您的目标，您必须将`for`for 循环的退出条件更改为：

```
for (var i = 10; i > 5; i--) {
    alert([i]);
}
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-03T15:53:06.917

您可以通过将 i 设置为您正在迭代的长度来使其更具动态性：

```
const string = "abcd";

for (let i = string.length; i > 0; i--) {
   console.log(str[i]);
} 
```

注意：如果您将条件设置为，`i >= 0`您将忽略数组或字符串中的最后一个元素，因为它的索引基数为 0。

# php - Bootstrap 预输入不起作用

> ID：15743808
> 
> 赞同：0
> 
> 时间：2013-04-01T12:49:29.433
> 
> 标签：php, jquery, twitter-bootstrap, jquery-autocomplete

我在 json 对象中从 Yahoo Finance 提取股票符号，并尝试在用户开始在搜索框中输入公司名称或符号时将它们显示为下拉菜单。Typeahead 不能用作搜索框中的下拉菜单。我认为我做的一切都是正确的。这是我到目前为止的代码。任何帮助表示赞赏。

引用.js

```
$(document).ready(function() {

  // create autocomplete
  $('#form-quote input[name=symbol]').typeahead({

      // load autocomplete data from suggest.php
      source: function(query, callback) {
          $.ajax({
              url: '../suggest.php',
              type: 'POST',
              dataType: 'json',
              data: {
                  symbol: query
              },
              success: function(response) {
                  callback(response.symbols);

              }
          });
      }
  });

  // load data via ajax when form is submitted
  $('#form-quote').on('click', function() {

      // determine symbol
      var symbol = $('#form-quote input[name=symbol]').val();

      // send request to quote.php
      $.ajax({
          url: 'quote.php',
          type: 'POST',
          data: {
              symbol: symbol
          },
          success: function(response) {
              $('#price').text(response);
          }
      });

      return false;
  });

}); 
```

报价单.php

```
<?php

//configuration
require("../includes/config.php");

//if form was submitted 

if($_SERVER["REQUEST_METHOD"] == "POST"){

    $stock = lookup(strtoupper($_POST["symbol"]));

    if(empty($_POST["symbol"])){

        //echo "You must enter a stock symbol";

    }else if($_POST["symbol"]){

    $price = number_format($stock['price'], 2);

    echo "A share of {$stock['name']} costs $$price";
    }
}

else{

    // render portfolio
render("stock_search.php", ["title" => "Get Quote"]);
}   
?> 
```

报价搜索.php

```
<form id = "form-quote" action="quote.php" method="post">
<fieldset>     
    <div class="control-group">
        <input name="symbol" autofocus autocomplete="off"  placeholder="Symbol"  type="text"/>
    </div>

    <div class="control-group">
        <button type="submit" class="btn">Get Quote</button>
    </div>

</fieldset>
<div id="price"></div>
<div id="suggestions"></div> 
</form>
<script type="text/javascript" src="js/quote.js" ></script> 
```

建议.php

```
 <?php

// configuration
require("../includes/functions.php");

// if form was submitted
if ($_SERVER["REQUEST_METHOD"] == "POST")
{
    // load suggestion data
$data = @file_get_contents("http://d.yimg.com/aq/autoc?query=  {$_POST['symbol']}&region=US&lang=en-US&callback=YAHOO.util.ScriptNodeDataSource.callbacks");

    // parse yahoo data into a list of symbols
$result = [];
    $json = json_decode(substr($data, strlen('YAHOO.util.ScriptNodeDataSource.callbacks('), -1));
    foreach ($json->ResultSet->Result as $stock)
        $result[] = $stock;

    echo json_encode(['symbols' => $result]);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:53:37.767

Typeahead 仅将字符串数组作为源

```
 // i.e.
  ["INTC", "GOOG", "FB", /* etc */] 
```

您的脚本所做的是创建 Yahoo 返回的整个对象的数组

```
 // i.e.
  [
    {"symbol":"INTC","name": "Intel Corporation","exch": "NMS","type": "S","exchDisp":"NASDAQ","typeDisp":"Equity"},
    {"symbol":"INTC.MX","name": "Intel Corporation","exch": "MEX","type": "S","exchDisp":"Mexico","typeDisp":"Equity"},
    /* etc */
  ] 
```

您需要做的是更改您的Suggest.php，以便该行：

```
foreach ($json->ResultSet->Result as $stock)
        $result[] = $stock; 
```

变成例如：

```
foreach ($json->ResultSet->Result as $stock)
        $result[] = '('.$stock->symbol.') '.$stock->name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:40:16.290

尝试像这样在 Ajax 中添加 URL 的完整路径`localhost/app/user/suggest.php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:42:44.667

确保在使用 json_encode 响应之前将“Content-type”设置为 json。

```
header("Content-type: application/json"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T04:16:59.957

愚蠢的问题，但是您期望的 json 结果，即使将输入提前排除在等式之外，这是否会正确恢复？因为传递给 file_get_contents 的值可能会有点拙劣，除非格式在粘贴时被炸毁。

# php - 如何使用 WordPress 自动解析子域

> ID：15743809
> 
> 赞同：1
> 
> 时间：2013-04-01T12:49:31.427
> 
> 标签：php, wordpress, subdomain

我们有*独特的*Wordpress 安装，首页是一个 iframe，需要重定向到一个地址，该地址取决于它被访问的 URL（更具体地说，它取决于子域）。

比方说，如果地址是：

```
<subdomain>.<Domain> 
```

那么 iframe 应该重定向到：

```
<subdomain>.<OtherDomain> 
```

例如：chc.mynewdomain.com
应该包含一个 iframe 重定向到：
chc.myolddomain.com

问题是：
1-如何让所有子域都进入那个独特的 wordpress 安装？
2-如何解析底层 Wordpress (PHP) 代码中的子域，可能检查子域的白名单，并动态构建 iframe URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:55:12.437

要让所有子域转到相同的 wordpress 安装：

*   首先，设置通配符域条目。过程因 dns 主机而异
*   然后在您的 httpd 配置中设置一个通配符条目（通常涉及在主机名中添加 *）
*   至于在 wordpress 中处理它，取决于你想要做什么。最可能的情况是您希望每个子域都有一个不同的页面，因此您必须为多个站点启用 wordpress 多站点。然后，您必须安装域映射插件。描述的网址在这里：[http ://wp.tutsplus.com/tutorials/wordpress-multisite-beyond-basics-essentials-and-domain-mapping/](http://wp.tutsplus.com/tutorials/wordpress-multisite-beyond-basics-essentials-and-domain-mapping/)

# php - 使用 PHP/mysql 创建足球新闻？

> ID：15743810
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:49:35.617
> 
> 标签：php, mysql

请在所有反对票之前阅读此内容，因为我真的需要对此的答案，这是一个真正的问题。

我正在尝试创建一个网站，该网站将显示该网站上的所有足球/足球新闻。

我只是想知道是否有一种自动化的方法可以让所有新闻都发布在我的网站上？例如，有一个名为 football.co.uk 的网站将实时显示所有足球新闻，我想知道他们如何做到这一点？即显示新闻和图像等？

我将使用 PHP 和 mysql 创建网站。

我知道我可以使用来自 BBC 和 skye 等网站的 RSS 提要，但我认为我无法获取图像，而且 RSS 提要只能在我的网站上显示新闻的标题。我需要显示标题，当有人点击标题时，他们将被指向我自己网站上的新闻页面！

如果这个问题有点含糊，我深表歉意，但我没有其他方法可以问这个问题。

所以任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:03:43.433

您实际上要问的是两个不同的问题：

1) 为您的网站获取最新消息和结果文本

要为您的网站自动生成新闻和结果文本，您需要找到一个 RSS 或 XML 提供程序，例如[http://www.scorespro.com/livescore-xml/](http://www.scorespro.com/livescore-xml/)

2）抓取图像以匹配团队和得分手等，以使内容更具吸引力。

为此，您可能需要找到库存照片提供商。要自动显示图像，您可以进行关键字查找。例如，当 XML 中返回“Paulo Di Canio”时，轮询您的数据库以选择您拥有的 Paulo Di Canio 的现有图像，并将其与新闻或文本一起显示。

顺便说一句，如果您正在考虑使用 PHP 和 MySQL，您应该认真考虑一下 wordpress。它有一堆插件。可能对您有用的一个是[http://wordpress.org/extend/plugins/soccer-info/](http://wordpress.org/extend/plugins/soccer-info/)

希望这可以帮助！

# oop - 为什么我不能通过返回类型重载函数？

> ID：15743812
> 
> 赞同：1
> 
> 时间：2013-04-01T12:49:43.467
> 
> 标签：oop, overloading

为什么函数不能不被它的返回类型重载，不应该有支持这种重载的语言。我想知道如果它允许会发生什么，或者为什么它不允许通过其返回类型重载此类函数的原因。

```
int func();
bool func();
int main()
{
     int iret = func();
     bool bret = func();
} 
```

这个问题总是在我脑海中浮现。希望得到满意的答复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:01:23.577

像这样的功能

```
double function fn1()
{

int a = 2;
return a;

} 
```

在上面的例子中，a 在返回时将被隐式转换为 double。

```
int function fn1()
{

double a = 2;
return a;

} 
```

在上面，例如 a 在返回时将被隐式转换为 int。

对此 fn 的 fn 调用类似于`int a = fn1();` or `double a = fn1();`。

在任何一种情况下，这两种定义都可能导致关于调用哪个定义的歧义。返回值存储在`int`或`double`不影响确定要调用的 fn 的事实。该函数首先解析然后执行，然后分配返回值。

如果两者都没有返回类型，则调用只会`fn1();`使其模棱两可，无论是`fn1()`使用返回类型`int`还是调用`double`

# image - 如何在 sencha touch 中创建这样的图像查看器？

> ID：15743817
> 
> 赞同：2
> 
> 时间：2013-04-01T12:49:46.380
> 
> 标签：image, sencha-touch, sencha-touch-2

我需要在 sencha touch 中创建一个像这样的图像查看器。它应该显示图像的缩略图。单击缩略图应显示放大的图像。我是煎茶的新手。请帮我。![在此处输入图像描述](https://i.stack.imgur.com/mUVpq.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:02:14.167

AFAIK 没有这样的标准画廊插件，所以你必须自己做。你可以试试这个：

在布局中创建一个具有 2 个面板的容器`vbox`，较大的顶部面板将有一个`image`，而下部面板将是一个水平的`list`。在`itemtap`任何列表项上，您可以`src`更改`image`. 您可以通过使用提供缩略图和大图像 url 的商店从服务器加载数据来创建这个简单的列表。

我还没有测试过，但这应该是这样的：

```
{
    xtype : 'panel',
    layout : 'vbox',
    items : [{
        xtype : 'panel',
        flex : 5,
        items : [{
            xtype : 'image',
            id : 'myImg',
            src : 'http://xyz.com/asdf.jpg'
        }]
    },{
        xtype : 'panel',
        items : [{
            xtype : 'list',
            listeners: {
            itemtap: function(list, index, item, rec) {
                Ext.getCmp("myImg").setSrc(rec.get('bigImgUrl'));
            }
        }
        }]
    }]
} 
```

# matlab - 如何将 MATLAB 的输出写入 MS Word？

> ID：15743821
> 
> 赞同：0
> 
> 时间：2013-04-01T12:49:49.157
> 
> 标签：matlab

我正在使用 Excel 从 Excel 文件中读取 MATLAB 代码的输入，`xlsread`计算后我将导出到 Word 以写出报告（writetoword.m）。在 Excel 中，有一个字符串，我应该在 MATLAB 中读取并在 Word 中输出。

在 Excel 文件（input.xlsx）中，它写为“鞋”。

我阅读使用

```
[num,txt,raw] = xlsread('input.xlsx');
eng = txt(14,19); % the word 'shoe' in that excel cell 
```

在`writetoword.m`中，我写道，

```
test = eng;
WordText(ActXWord,test,Style,[0,1]);

function WordText(actx_word_p,text_p,style_p,enters_p,color_p)
    if(enters_p(1))
        actx_word_p.Selection.TypeParagraph;
    end
    actx_word_p.Selection.Style = style_p;
    if(nargin == 5)
        actx_word_p.Selection.Font.Color=color_p;     
    end

    actx_word_p.Selection.TypeText(text_p);
    actx_word_p.Selection.Font.Color='wdColorAutomatic';
    for k=1:enters_p(2)    
        actx_word_p.Selection.TypeParagraph;
    end
return 
```

它没有打印任何东西。错误在行

```
actx_word_p.Selection.TypeText(text_p); 
```

现在如果我写

```
test = 'eng';
WordText(ActXWord,test,Style,[0,1]); 
```

它将以英式而非鞋式的形式出现。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:52:26.383

您分配`txt`为[单元格](http://www.mathworks.com/help/matlab/matlab_prog/access-data-in-a-cell-array.html)而不是字符串。改为使用`eng = txt{14,19};`。

# c# - 在插入模式下更改 FormView 记录

> ID：15743827
> 
> 赞同：0
> 
> 时间：2013-04-01T12:50:21.050
> 
> 标签：c#, asp.net, gridview, formview

我有 2 个 ObjectDataSource - 1 个用于 GridView，1 个用于 FormView。

我在 GridView 上启用了选择，一切都很好；页面加载，您选择一条记录，FormView 将填充该记录。

但是，一旦 FormView 处于插入模式，当我在 GridView 上选择一条记录时，它不会变回以显示我选择的记录。

我在哪里可以在代码中处理这个问题，因为我看不到如何在后面的代码中访问 GridView 上的“启用选择”？

我试过的

```
protected void grdSearchGroup_SelectedIndexChanged(object sender, EventArgs e)
{
    formGroupInput.DefaultMode = FormViewMode.ReadOnly;
    formGroupInput.DataBind();
}

protected void grdSearchGroup_SelectedIndexChanging(object sender, GridViewSelectEventArgs e)
{
    formGroupInput.DefaultMode = FormViewMode.ReadOnly;
    formGroupInput.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:21:32.167

我认为解决您的问题的最简单方法是处理 GridView 的 SelectedIndexChanging 方法，并将 FormView 设置回只读模式（这样您就可以在 FormView 中看到您想要的记录详细信息）。

```
protected void yourGridView_SelectedIndexChanging(Object sender, EventArgs e)
{
    yourFormView.ChangeMode(FormViewMode.ReadOnly);
} 
```

请注意，您必须调用 FormView 的[`ChangeMode`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.changemode.aspx)方法才能更新模式。仅设置 DefaultMode 属性是不够的。

# jquery - jquery.ajax 和 asp mvc 4\. 发布文件

> ID：15743830
> 
> 赞同：-2
> 
> 时间：2013-04-01T12:50:22.703
> 
> 标签：jquery, file-io, asp.net-mvc-4

我需要知道如何将文件从输入发布到**asp mvc4 控制器**。请我会感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:16:33.197

您不能使用 AJAX 将文件发送到服务器。这仅在支持[`HTML5 File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications). 作为替代方案，您可以使用诸如[`jQuery.form`](http://www.malsup.com/jquery/form/)、[`Uploadify`](http://www.uploadify.com/)、之类的插件[`Fine Uploader`](http://fineuploader.com/)，[`BlueImp file upload`](https://github.com/blueimp/jQuery-File-Upload)它们将测试客户端浏览器的功能，如果它不支持 HTML5 File API，则回退到其他技术。

# asp.net-mvc - 无法先播种 EF 代码

> ID：15743837
> 
> 赞同：0
> 
> 时间：2013-04-01T12:50:44.693
> 
> 标签：asp.net-mvc, asp.net-mvc-4, entity-framework-4, seeding

我有几个相关的实体，我正在尝试用一些虚拟数据为数据库播种。这是我的种子代码：

```
public class EventInitializer : DropCreateDatabaseAlways<BSContext>
{
    protected override void Seed(BSContext context)
    {
        var authors = new List<Author>
        {
            new Author { Name = "Christina Gabbitas" },
            new Author { Name = "Gemma King" },
            new Author { Name = "Gemma Collins"},
            new Author { Name = "Billy Hayes" },
            new Author { Name = "Jodi Picoult" },
            new Author { Name = "John Whaite" }
        };
        authors.ForEach(a => context.Authors.Add(a));
        context.SaveChanges();

        var events = new List<Event>
        {
            new Event { Authors = new List<Author> { context.Authors.Find(0) }, Book = "Felicity Fly", Info = "Christina Gabbitas will be signing copies of her new book, Felicity Fly. Books should be bought from WHSmith. Proof of purchase may be necessary", Start = new DateTime(2013, 05, 25, 10, 30, 00), Url = "http://www.whsmith.co.uk/Support/InStoreSignings.aspx", Location = new Location { Name = "WHSmith Brent Cross", Address = "Brent Cross Shopping Centre", City = "London", County = "", PostCode = "NW4 3FB", Telephone = 02082024226 } },
            new Event { Authors = new List<Author> { context.Authors.Find(1) }, Book = "Haunted Spalding", Info = "Gemma King will be signing copies of her new book. Books should be bought from WHSmith. Proof of purchase may be necessary", Start = new DateTime(2013, 03, 31, 10, 00, 00), Url = "http://www.whsmith.co.uk/Support/InStoreSignings.aspx", Location = new Location { Name = "WHSmith Spalding", Address = "6-7 Hall Place", City = "Spalding", County = "Lincolnshire", PostCode = "PE11 1SA", Telephone = 01775768666 } },
            new Event { Authors = new List<Author> { context.Authors.Find(3) }, Book = "Midnight Express", Info = "Billy Hayes will be signing copies of his books. Books should be bought from WHSmith. Proof of purchase may be necessary", Start = new DateTime(2013, 04, 13, 13, 00, 00), Url = "http://www.whsmith.co.uk/Support/InStoreSignings.aspx", Location = new Location { Name = "WHSmith Birmingham", Address = "29 Union Street", City = "Birmingham", County = "West Midlands", PostCode = "B2 4LR", Telephone = 01216313303 } }
        };
        events.ForEach(e => context.Events.Add(e));
        context.SaveChanges();
    }
} 
```

上面的种子代码与我的所有实体一起位于一个单独的项目中。我这样做是为了让我的域模型与我的 Web 应用程序完全分开。当然，我的控制器中有引用来访问实体。

我以前使用过 EF Code First，但这次它不适合我！当我在我的控制器（ASP.NET MVC 应用程序）中访问数据时，我得到 0 个结果。

```
public ActionResult Index()
{
    ViewBag.Message = "Move around the map to find events near you.";

    var model = new IndexVM();

    using(var context = new BSContext())
    {
        model.Events = (List<Event>)context.Events.ToList();
    }

    return View(model);
} 
```

我在带有 Visual Studio 2012 的 Windows 8 64x Pro 上使用 EF (v4.0.30319)。更糟糕的是，我什至无法调试！当我尝试在调试模式下运行时，我的断点永远不会被命中！这是我的 Web 项目的[Web.config](http://pastebin.com/4SuqTEm6)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:28:35.037

你需要这样调用`Database.SetInitializer`：

```
Database.SetInitializer<BSContext>( new EventInitializer() ); 
```

# c++ - C++ lpcwstr 到 wstring

> ID：15743838
> 
> 赞同：1
> 
> 时间：2013-04-01T12:50:47.990
> 
> 标签：c++, wstring, lpcwstr

我想在 C++（VS 2010）中将 LPCWSTR 转换为 wstring。我想在 OutputDebugStringW() 中使用它。

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T13:11:51.240

好吧，只需将 传递`LPCWSTR`给这样的构造函数`wstring`：

```
LPCWSTR str=L"fun";
wstring str2(str); 
```

# flickr - 我可以使用 Flickr API 在 Flickr 中创建集合吗

> ID：15743848
> 
> 赞同：0
> 
> 时间：2013-04-01T12:51:12.867
> 
> 标签：flickr

我可以使用 Flickr API 创建集合吗（我使用的是 C# FlickerNet，但如果支持，我可以使用 REST 调用）。我没有得到任何方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:51:06.837

您可以使用[flickr.photosets.create](http://www.flickr.com/services/api/flickr.photosets.create.html)制作新照片集。照片集类似于集合，也许它们的差异对您的要求并不重要。

# php - javascript不通过php代码发送数据

> ID：15743849
> 
> 赞同：0
> 
> 时间：2013-04-01T12:51:15.040
> 
> 标签：php, javascript, mysql, xml, json

嗨，我有一个要求，一旦用户从确认框中确认 Ok，我需要执行 mysql 查询。在我的情况下，我传递给 insert_details.php 的任何数据都不起作用。我想提醒您的另一件事是，我需要将数据发送到不同的脚本并将其导航到不同的页面。请建议问题出在哪里？

```
 <script type="text/javascript">
            var r=confirm("This email address already exits in our database. Do you want to continue?");
 if (r==true)
 {  
 var dataObj = {
    fname : document.getElementById('fname').value,                  
    phone : document.getElementById('phone').value,
    pemail : document.getElementById('email').value
}
        var xhr = new XMLHttpRequest();
      xhr.open("POST","insert_details.php", true);
      xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
      xhr.send(JSON.stringify(dataObj));

xhr.onreadystatechange = function() {
    if (xhr.readyState>3) {
        window.location = 'http://localhost/myproject/test.php?eid=<?php echo $primary_email; ?>';
    }
}

alert("test");

  }
else
  {
   window.location = 'http://localhost/myproject/registration_request.php'
   }

    </script> 
```

insert_details.php 中的代码

```
$date = "Date:" . date("d/m/Y h:i:s") . "\n"; //to get today's date and time                  
        $logfile = "testing";
         $fpath ="myproject/";
        $filepath = $fpath .$logfile . '-log-' . date('Y-m-d') . '.csv';  //path of error log file

        $fh1 = fopen($filepath, 'a') or die("can't open file"); //opening the error log file 
        fwrite($fh1, "******************index*******************" . "\n");
        fwrite($fh1, $date); 

$test=json_decode(file_get_contents('php://input'));
fwrite($fh1, $test[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:03:27.240

您没有发送命名对。您只是发送文本框的值。

它看起来像一个字符串。

```
xhr.send("myEmail@example.com"); 
```

其次，Ajax 调用和 window.location.href 之间存在竞争条件。

在进行重定向之前，您需要等待响应返回。

基本思路：

```
var dataObj = {
    fname : document.getElementById('fname').value,                  
    phone : document.getElementById('phone').value,
    pemail : document.getElementById('email').value
}
xhr.onreadystatechange = function() {
    if (xhr.readyState>=3) {
        window.location = 'http://localhost/myproject/test.php?eid=<?php echo $primary_email; ?>';
    }
}
xhr.send(JSON.stringify(dataObj)); 
```

# wpf - Powerbuilder .net、MVVM 和单元测试

> ID：15743851
> 
> 赞同：4
> 
> 时间：2013-04-01T12:51:30.157
> 
> 标签：wpf, unit-testing, mvvm, powerbuilder, powerbuilder.net

我对 powerbuilder .NET 完全陌生而且我正在使用 WPF 并使用 MVVM。

有什么方法可以使用 powerbuilder .net WPF 并使用 MVVM 设计？你能告诉我使用它和单元测试的最佳实践和框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T20:13:32.880

这个演示可以帮助你： http:
[//gopowerbuilder.web12.hubspot.com/rich-resources/tutorials---demos/](http://gopowerbuilder.web12.hubspot.com/rich-resources/tutorials---demos/)

# vb.net - 如何在 VB.Net 2010 中将 rtf 文件行映射到 3 RichTextBox？

> ID：15743853
> 
> 赞同：0
> 
> 时间：2013-04-01T12:51:37.783
> 
> 标签：vb.net, richtextbox, rtf

我需要将“richtextbox4 行”拆分为richtextbox1 取行号1

richtextbox2 取行号 2

和 richtextbox3 取第 3 行

所以所有 3 个富文本框都从“richtextbox4 行”中取一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:30:48.550

试试这个代码

```
 For i As Integer = 0 To RichTextBox1.Lines.Count

            If i = 0 Then
                RichTextBox2.Text = RichTextBox1.Lines(i)
            ElseIf i = 1 Then
                RichTextBox3.Text = RichTextBox1.Lines(i)
            ElseIf i = 2 Then
                RichTextBox4.Text = RichTextBox1.Lines(i)
            End If

        Next 
```

# jquery - Datepicker 控件：在 Using jQuery 中在所需的退房日期添加 +1 天

> ID：15743858
> 
> 赞同：0
> 
> 时间：2013-04-01T12:52:02.760
> 
> 标签：jquery, jquery-ui, datepicker

我需要 jquery 日期选择器的帮助 我有两个文本框一个用于签入，另一个用于签出...我希望 1 天添加到结帐框中这是我的代码，我无法提前 1 天在签出框中获取日期...请帮助

```
 $("#CheckInDatePicker").datepicker({
        defaultDate: "+1w",
        minDate: 0,
        changeMonth: true,
        showOn: "button",
        buttonImage: "/Images/Base/calander.png",
        numberOfMonths: 2,
        showButtonPanel: true,
        buttonImageOnly: true,

        onSelect: function (selectedDate) {
            var minDate = $(this).datepicker('getDate');
            if (minDate) {
                minDate.setDate(minDate.getDate() + 1);
            }
            $("#CheckOutDatePicker").datepicker("option", "minDate", minDate || 1);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-04T10:57:49.937

```
 $(document).ready(function() {
    $( "#saledate" ).datepicker({  maxDate: "+1d", dateFormat: 'dd/mm/yy' }); 
    $("#saledate").datepicker("option","defaultDate", "<?=date("d/m/Y");?>");
 }); 
```

试试这个代码 #saledate 是 datepicker 字段的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:36:04.000

试试这个..并在尝试之前清除浏览器缓存..

```
onSelect: function(dateValue, inst) {
            $('#CheckOutDatePicker').datepicker();              
            var date2 = $('#CheckInDatePicker').datepicker('getDate', '+1d');                
            $('#CheckOutDatePicker').datepicker('destroy');
            date2.setDate(date2.getDate() + 1); 
            $('#CheckOutDatePicker').datepicker({
                minDate: date2,
                dateFormat: "yy-mm-dd",
                onSelect: function() {
                    //Do whatever you want to do
                }
            });   
        } 
```

[在http://jsfiddle.net/writetobhuwan/T6hPR/1/](http://jsfiddle.net/writetobhuwan/T6hPR/1/)上查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:02:29.263

```
$("#CheckInDatePicker").datepicker({
    defaultDate: "+1w",
    minDate: 1,
    changeMonth: true,
    showOn: "button",
    buttonImage: "/Images/Base/calander.png",
    numberOfMonths: 2,
    showButtonPanel: true,
    buttonImageOnly: true, 
```

change the minDate 你的一天延长一天

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T14:11:17.650

```
/*DATE PICKER FUNCTION START*/
    var today = new Date();
    $(function() {
        $( "#date_from" ).datepicker({
            defaultDate: "+0w",
            changeMonth: true,
            dateFormat: "yy-mm-dd",
            numberOfMonths: 1,
            onSelect: function( selectedDate ) {

                if($( "#date_to" ).val() == ""){
                    /*console.log(selectedDate);
                    var dateString = selectedDate; // date string
                    var actualDate = new Date(dateString); // convert to actual date
                    var newDate = new Date(actualDate.getFullYear(), actualDate.getMonth(), actualDate.getDate()+1); // create new increased date
console.log(actualDate.getMonth());
                    // now extract the bits we want to crete the text version of the new date..
                    var newDateString = (newDate.getFullYear()+'-'+newDate.getMonth()+'-'+newDate.getDate());
                    console.log(newDateString);*/
                    $( "#date_to" ).datepicker( "option", "minDate", selectedDate );

                }
            }
        });
        $( "#date_to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            dateFormat: "yy-mm-dd",
            numberOfMonths: 1,
            minDate: "+1d",
            onSelect: function( selectedDate ) {
                $( "#date_from" ).datepicker( "option", "maxDate", selectedDate );
            }
        });
    });
    /*DATE PICKER FUNCTION END*/ 
```

更改您想要的字段名称......我希望这会奏效

# sqlite - sqlite odbc 静默安装

> ID：15743859
> 
> 赞同：1
> 
> 时间：2013-04-01T12:52:08.533
> 
> 标签：sqlite

如何静默安装 sqlite odbc 驱动程序？在这里找到[http://www.ch-werner.de/sqliteodbc/](http://www.ch-werner.de/sqliteodbc/)

我发现有 2 种连接 sqlite 的方法，一种在上面，另一种是 dhSqlite（vbRichclient4.dll、vb_cairo_sqlite.dll 和 DirectCOM.dll）。这是一个类库，它似乎是 sqlite 的 ADO 的替代品。但我找不到这个的任何文件。

我喜欢 sqliteodbc，因为它只适用于 ADO。但 dhsqlite 可以与应用程序一起安装。我想 dhSqlite 也包含 sqlite3 引擎。是真的吗？

你能建议我可以关注哪一个吗？还是我可以检查任何其他选项？我正在寻找它是静默安装或作为我的应用程序的一部分安装。本身; 免费并支持 vb6

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-17T01:56:56.013

如果您使用 Inno Setup 来分发您的应用程序并使用 sqliteodbc 0.9996 版本，我们可以添加如下脚本：

**[档案]**

来源：sqliteodbc0.9996.exe；目标目录：{tmp}；标志：安装后删除

**[跑]**

文件名：{tmp}\sqliteodbc0.9996.exe；参数：/S；StatusMsg：“正在安装 SQLite ODBC 连接器...”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:34:00.050

Win32 通过 RUNDLL32 安装/删除/shell

每个驱动程序 DLL 提供了 ODBC 驱动程序安装和删除的入口点，可以从 RUNDLL32.EXE 调用，例如

### install sqliteodbc.dll C:> rundll32 [path]sqliteodbc.dll,install [quiet]

### 删除 sqlite3odbc.dll C:> rundll32 [path]sqlite3odbc.dll,uninstall [quiet]

# jquery - JQuery addClass SyntaxError：意外令牌非法

> ID：15743860
> 
> 赞同：2
> 
> 时间：2013-04-01T12:52:12.863
> 
> 标签：jquery, addclass

我的 JQuery 代码有什么问题？在铬浏览器中，我在使用 JQuery addClass 时得到**“未捕获的语法错误：意外的令牌非法” 。**提前致谢。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
  var url = window.location.href;
  $('ul.menu li').each(function() {
    var $this = $(this);
    var suburl = $this.find('a').attr('href');
    if(url.indexOf(suburl) > 0) {
      $this.addClass("active");​ // **Uncaught SyntaxError: Unexpected token ILLEGAL**
      //alert("url=" + url + ", suburl=" + suburl);
    }
  });

  $("button").click(function(){
    $("ul.nav a.active").hide();
  });
});
</script>
</head>

<body>
<div>
<p>List<p>
<ul class="menu">
  <li><a href="/test/jq_test.html">Coffee</a></li>
  <li><a href="/test/jq_test1.html">Milk</a></li>
  <li><a href="/test/jq_test2.html">Tea</a></li>
</ul>
</div>
<button>Click me</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:54:31.390

`;` 复制到记事本++之后你有一个非法字符，你会看到它

```
if(url.indexOf(suburl) > 0) {
  $this.addClass("active");? // <-- delete this
  //alert("url=" + url + ", suburl=" + suburl);
  }
}); 
```

删除它，它应该可以工作

# c# - 在 Win32_Process 上远程运行 msiexec

> ID：15743862
> 
> 赞同：0
> 
> 时间：2013-04-01T12:52:19.313
> 
> 标签：c#, windows-installer, win32-process

这个简短部分的主要任务是获取一些计算机名称并在这台 PC 上安装所需的软件（通过 msiexec.exe）

我这样做

```
 {                       

            Credential creds = new Credential();
            UserAttr UserCredential = new UserAttr();
            UserCredential = creds.DefaultFlagsTest();              
            ConnectionOptions connection = new ConnectionOptions();
            connection.Username = UserCredential.UserName;
            connection.Password = UserCredential.password;
            connection.Authentication = AuthenticationLevel.PacketPrivacy; 
            connection.Authority = "ntlmdomain:tcc1";

            ManagementScope scope = new ManagementScope(
                "\\\\"+computerName+"\\root\\CIMV2", connection);
            scope.Connect();

            ManagementClass classInstance =
                new ManagementClass(scope,
                new ManagementPath("Win32_Process"), null);

            ManagementBaseObject inParams = classInstance.GetMethodParameters("Create");

            inParams["CommandLine"] = @"msiexec.exe /qb /m log.mif /i ""\\tcc1-pgh10.tcc1.local\swshare$\Packages\NetAgent_10.0.3361\exec\Kaspersky Network Agent.msi""";       

            ManagementBaseObject outParams = classInstance.InvokeMethod("Create", inParams, null);

            int res = int.Parse(outParams["ReturnValue"].ToString());

            if (res == 0)
            {
                MessageBox.Show(outParams["ReturnValue"].ToString(), "Result");                   
            }
            else throw new System.ComponentModel.Win32Exception(res);             

            Close();           
    } 
```

该程序返回 0，但这并不意味着 msiexec 以同样的成功完成。错误是**检查包的路径**.. 或 smth。但是我在日志文件 log.mif 中看到的内容：

.............................
开始属性
名称 = “产品”
ID = 2
访问 = 只读
存储 = 特定
类型 =字符串（64）
**值=“\tcc1-pgh10.tcc1.local\swshare$\Packages\NetAgent_10.0.3361\exe”**
结束属性
...... …………

他将包的名称裁剪为 64 symb。原因是 Win32_Process.Create 的参数**CommandLine**有这个限制。我不知道如何克服这个...

Win32_Process.Create 也有属性**CurrentDirectory**，这似乎可以解决这个问题。但他无法处理 UNC 路径。

而且我不能缩短安装目录。这是不对的。（我可以说我已经做到了。它的工作）

拜托，也许你知道如何用长的安装路径解决这个问题？不同的属性如 TARGETDIR 或 INSTALLDIR 只设置安装路径，没有 FROM...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T06:07:01.213

我放弃

```
START ATTRIBUTE 
NAME = "Product" 
ID = 2 
ACCESS = READ-ONLY 
STORAGE = SPECIFIC 
TYPE = STRING(64) 
VALUE = "\tcc1-pgh10.tcc1.local\swshare$\Packages\NetAgent_10.0.3361\exe"
END ATTRIBUTE 
```

该值限制为 64symb，包括路径。它将仅在本地计算机上正常工作，而不使用 UNC 路径

# shell - 有没有办法在 Unix 中执行 .cmd 文件？

> ID：15743868
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:52:55.737
> 
> 标签：shell, cmd

如何在 .cmd 文件中创建 .cmd 文件并在其中传递变量以执行某些命令。

`Is there any way to execute .cmd file in Unix ?`

好心劝告

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:21:02.280

**不，不是真的**

windows 中的`.cmd`文件由 windows`cmd.exe`程序解释。如果你打开一个，你会发现一个`.cmd`文件包含要执行的文本命令。

在 Unix 世界中，命令文件的等价物是 shell 脚本。它们具有`.sh`扩展名，通常由`bash`程序解释。

[在线](http://www.freeos.com/guides/lsst/)阅读有关 shell 脚本的更多信息

**也许...**

您可以`cmd.exe`使用名为[Wine](http://www.winehq.org/)的兼容层在 Linux、Solaris Mac 和 BSD 上运行该程序。但是，由于平台之间的差异，您必须修改脚本并手动检查路径和可执行文件名称等内容是否仍然有效。

# shell - 如何在 shell 脚本中解析 URL 参数

> ID：15743870
> 
> 赞同：1
> 
> 时间：2013-04-01T12:53:14.927
> 
> 标签：shell, awk

我已经在 python 中成功地尝试过同样的方法来解析 URL 参数，但我想知道是否有办法在 Shell 脚本中做同样的事情。

说，我有一个 URL 值：

[http://www.abcdsample.com/listservices?a=1&b=10&c=abcdeeff&d=1663889&listservices=a|b](http://www.abcdsample.com/listservices?a=1&b=10&c=abcdeeff&d=1663889&listservices=a|b)

所需输出：

```
URL: http://www.abcdsample.com/
Service: listservices
a=1
b=10
c=abcdeeff
d=1663889
listservices=a|b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:52:15.960

这是一种方法：

```
BEGIN{
    FS="?"
}
{
    url=$1
    sub(/[^/]*$/,"",url)
    print "URL:",url

    sub(/.*[/]/,"",$1)
    print "Service:",$1

    n=split($2,b,/&/)
    for (i=1;i<=n;i++)
        print b[i]
} 
```

将其另存为`script.awk`并运行`awk -f script.awk file`：

```
URL: http://www.abcdsample.com/
Service: listservices
a=1
b=10
c=abcdeeff
d=1663889
listservices=a|b 
```

注意：这适用于以下 URL：

*   [http://www.abcdsample.com/listservices?a=1&b=10&c=abcdeeff&d=1663889&listservices=a|b](http://www.abcdsample.com/listservices?a=1&b=10&c=abcdeeff&d=1663889&listservices=a|b)
*   www.abcdsample.com/listservices?a=1&b=10&c=abcdeeff&d=1663889&listservices=a|b
*   abcdsample.com/listservices?a=1&b=10&c=abcdeeff&d=1663889&listservices=a|b
*   listservices?a=1&b=10&c=abcdeeff&d=1663889&listservices=a|b

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T13:54:14.140

使用 GNU awk 的一种方法：

```
$ gawk -F'&' '{
   $0 = gensub(/(^[^/]+[/][/][^/]+[/])([^?]+)[?]/,"\\1\\&\\2\\&","")
   print "URL:",$1
   print "Service:",$2
   for (i=3;i<=NF;i++)
      print $i
}' file
URL: http://www.abcdsample.com/
Service: listservices
a=1
b=10
c=abcdeeff
d=1663889
listservices=a|b 
```

# c++ - C ++：将未知的类变量赋予模板

> ID：15743872
> 
> 赞同：-4
> 
> 时间：2013-04-01T12:53:35.217
> 
> 标签：c++, templates

我有一个 ABC 类，我想为其模板提供一个未知的类变量，如下所示：

```
template < v >
class ABC
{
// do something
}; 
```

当然上面的代码不起作用（没有参数类型**v**）。你有什么想法来解决这个问题吗？我不想给模板变量**v的类型。**

有两种功能，类型不同。如何在下面的类模板中使用这两个函数？

```
#include <iostream>
using namespace std;
// Types of functions max1 and min1 are different!
int max1(int a, int b){ return a>b?a:b; }
int& min1(int a, int b){ return a<b?a:b; }

template<typename _T, _T(function)(_T,_T)>
class ABC
{
      public:
      _T a, b;
      _T get()
      {
                 return function(a, b);       
      }        
};

ABC <int, max1> abc; // <- If You write "ABC <int, min1> abc;", error comes! How fix this?

int main()
    {
    abc.a = 3;
    abc.b = 8;
    cout << abc.get() << '\n';      
    cin.get();      
    return 0;      
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:54:48.093

[似乎无关紧要，但是一开始这个问题很不清楚......]

 ~~~~```
template < v > 
```~~ 

一定是

```
template < typename v > 
```

或者

```
template < class v > 
```

~~`typename`更可取。~~

* * *

关于您的编辑：问题是，`min1`返回`&`. 如果你删除它，那么你可能有：

```
#include <iostream>

int max1(int a, int b){ return a>b?a:b; }
int min1(int a, int b){ return a<b?a:b; }

template<typename _T, _T(*function)(_T,_T)>
class ABC
{
public:
      _T a, b;
      _T get() { return function(a, b); }        
};

int main()
{
    ABC <int, max1> abc;
    ABC <int, min1 > def;

    abc.a = def.a = 3;
    abc.b = def.b = 8;

    std::cout << abc.get() << '\n';
    std::cout << def.get() << '\n';      

    return 0;      
} 
```

这将打印`8 3`~~

# php - PHP日期差异

> ID：15743882
> 
> 赞同：8
> 
> 时间：2013-04-01T12:54:10.650
> 
> 标签：php, date, diff

我有以下代码：

```
$dStart = new DateTime('2013-03-15');
$dEnd = new DateTime('2013-04-01');
$dDiff = $dStart->diff($dEnd);
echo $dDiff->days; 
```

我不知道为什么我得到 6015 结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:56:00.343

试试喜欢

```
$dStart = strtotime('2013-03-15');
$dEnd = strtotime('2013-04-01');
$dDiff = $dEnd - $dStart;
echo date('H:i:s',$dDiff); 
```

或根据您的代码尝试

```
$dDiff = $dStart->diff($dEnd);
$date->format('d',$dDiff);
echo $dDiff->days; 
```

如果你想在几天内尝试差异，也可以试试这个

```
echo floor($dDiff/(60*60*24)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T12:56:29.597

尝试这个-

```
$dStart = new DateTime('2013-03-15');
$dEnd = new DateTime('2013-04-01');
$dDiff = $dStart->diff($dEnd);
echo $dDiff->format('%d days') 
```

检查[PHP](http://www.php.net/manual/en/datetime.diff.php)

请查看[演示链接](http://phpfiddle.org/main/code/7dq-mb7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T12:57:35.327

用这个

```
 $datetime1 = date_create('2013-03-15');
 $datetime2 = date_create('2013-04-01');
 $interval = date_diff($datetime1, $datetime2);
 echo $interval->format('%R%a days'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T13:01:02.587

我更喜欢这样的东西：

```
function days_diff($first_date, $second_date)
{
    $later = new DateTime($second_date);
    $then = new DateTime($first_date);
    return $later->diff($then)->format('a');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-14T04:22:32.967

我在 PHP 5.3.0 上得到了相同的 6015 天，并使用`var_dump()`. 我的确切代码在这里：

```
$timestring = "Thu, 13 Jun 2013 14:05:59 GMT";
date_default_timezone_set('GMT');
$date = DateTime::createFromFormat('D, d M Y G:i:s T', $timeString);
$nowdate = new DateTime("now");
$interval = $date->diff($nowdate); 
```

现在如果我做 a `var_dump($interval)`，结果是：

```
object(DateInterval)#5 (8) {
  ["y"]=>
  int(0)
  ["m"]=>
  int(0)
  ["d"]=>
  int(0)
  ["h"]=>
  int(19)
  ["i"]=>
  int(45)
  ["s"]=>
  int(33)
  ["invert"]=>
  int(0)
  ["days"]=>
  int(6015)
} 
```

因此，小时 ( `h`)、分钟( `i`) 和秒 ( `s`) 设置正确，但还有另一个属性`days`保持不变，为 6015，这是其他人得到的错误。好吧，我不明白它从哪里得到这个值。`DateInterval`同样，根据http://www.php.net/manual/en/class.dateinterval.php上的 PHP 手册，我尝试将它们作为对象的属性进行[访问](http://www.php.net/manual/en/class.dateinterval.php)，一切都很好。

因此，我得到了准确的结果：

```
echo (string) $interval->d." days ago"; 
```

# android - 在android中更新数据库sqlite时出现异常

> ID：15743883
> 
> 赞同：0
> 
> 时间：2013-04-01T12:54:11.933
> 
> 标签：android, sqlite

当我按下按钮时更新数据库中的一行

```
public void updateContact(long id, String x, String y,String angle)
        {
        ContentValues editCon = new ContentValues();
        editCon.put(KEY_X, x);
        editCon.put(KEY_Y, y);
        editCon.put(KEY_ANGLE, angle);

        ourDatabase.update(DATABASE_TABLE, editCon, KEY_ROWID + id, null);

        } 
```

我用它`entry.updateContact(1, Double.toString(db1), Double.toString(db2), Double.toString(db3));`

但我得到了例外：`no such colum: _id1 (code1): , while compiling: UPDATE SavedTable SET position_y=?, position_x=?, position_angle=? WHERE_id1`

即使我有一个只有一行的数据库（我在主要活动的 oncreate 方法中创建条目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:58:30.280

您需要修复您的`update()`方法：

```
db.update(DATABASE_TABLE, editCon, KEY_ROWID + " = ?", 
          new String[] {String.valueOf(id)}); 
```

问题是您指定了不正确的`WHERE`子句。你写了这个：

```
KEY_ROWID + id 
```

这在数据库层**`_id1`**上被翻译为它被解释为列的位置。

您需要**`_id = 1`**，这是通过`KEY_ROWID + " = ?"`将占位符替换为字符串数组中的值来实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:59:24.817

`KEY_ROWID + id`不会像你期望的那样工作！`KEY_ROWID`可能是一个包含字符串，`_id`而您的`id`变量包含`1`将导致`_id1`.

你需要这个：

```
ourDatabase.update(DATABASE_TABLE, editCon, KEY_ROWID + "=" + id, null); 
```

或更好：

```
ourDatabase.update(DATABASE_TABLE, editCon, KEY_ROWID + "=?", new String[]{String.valueOf(id)}); 
```

编辑：

```
// pseudocode
Cursor c = ourDatabase.query(DATABASE_TABLE, null, null....);
if (c != null) {
    if (c.getCount() >= 1) {
        // there is an entry - just update
    } else { 
        // no entry - create entry
    }
} else {
    // error? But definitively no entry so create one
} 
```

# opengl - GL_FRAMEBUFFER_SRGB_EXT 条带问题（伽马校正）

> ID：15743884
> 
> 赞同：0
> 
> 时间：2013-04-01T12:54:13.480
> 
> 标签：opengl, rendering, gamma

考虑以下代码。imageDataf 是一个浮点数*。事实上，正如代码所示，它由光线追踪器创建的 float4 值组成。当然，颜色值在线性空间中，我需要对它们进行伽玛校正以在屏幕上输出。所以我能做的是一个简单的 for 循环，伽马校正为 2.2（参见 for 循环）。此外，我可以使用 GL_FRAMEBUFFER_SRGB_EXT，它几乎可以正常工作，但存在“条带”问题。

[![图像](https://i.stack.imgur.com/9w3nV.png)](https://i.stack.imgur.com/9w3nV.png)

左边是使用 GL_FRAMEBUFFER_SRGB_EXT，右边是手动伽玛校正。右图看起来很完美。在某些显示器上发现它可能会有一些困难。有谁知道如何解决这个问题？我想“免费”进行伽玛校正，因为 CPU 版本使 GUI 有点滞后。请注意，实际的光线追踪是在另一个线程中使用 GPU(optix) 完成的，因此实际上它的渲染性能几乎一样快。

```
GLboolean sRGB = GL_FALSE;
glGetBooleanv( GL_FRAMEBUFFER_SRGB_CAPABLE_EXT, &sRGB );
if (sRGB) {
    //glEnable(GL_FRAMEBUFFER_SRGB_EXT);
}

for(int i = 0; i < 768*768*4; i++)
{
    imageDataf[i] = (float)powf(imageDataf[i], 1.0f/2.2f);
}

glPixelStorei(GL_UNPACK_ALIGNMENT, 8);

glDrawPixels( static_cast<GLsizei>( buffer_width ), static_cast<GLsizei>( buffer_height ),
    GL_RGBA, GL_FLOAT, (GLvoid*)imageDataf);

//glDisable(GL_FRAMEBUFFER_SRGB_EXT); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:57:32.857

启用时`GL_FRAMEBUFFER_SRGB`，这意味着 OpenGL 将假定片段的颜色在线性颜色空间中。因此，当它将它们写入 sRGB 格式的图像时，它会在内部将它们从线性转换为 sRGB。除了......你的像素*不是线性*的。您已经将它们转换为非线性色彩空间。

但是，我假设您只是忘记了其中的`if`声明。我假设如果帧缓冲区支持 sRGB，则跳过循环并直接上传数据。所以相反，我会解释为什么你会被绑起来。

因为您要求的 OpenGL 操作执行以下操作，所以您得到了条带化。对于您指定的每种颜色：

1.  将浮点数限制在 [0, 1] 范围内。
2.  将浮点数转换为无符号、标准化的 8 位整数。
3.  生成一个无符号、标准化、8 位颜色的片段。
4.  将无符号、标准化、8 位片段颜色从线性 RGB 空间转换为 sRGB 空间并存储。

步骤 1-3 都来自使用`glDrawPixels`. 您的问题是第 2 步。您希望将浮点值保留为*floats*。然而，您坚持使用固定功能管道（即：）`glDrawPixels`，它*强制*将浮点数转换为无符号标准化整数。

如果您将数据上传到浮动纹理并使用适当的片段着色器来渲染此纹理（即使只是一个简单的`gl_FragColor = texture(tex, texCoord);`着色器），您就可以了。着色器管道使用浮点数学，而不是整数数学。所以不会发生这样的转换。

简而言之：停止使用`glDrawPixels`.

# wpf - VS 安装程序快捷方式中缺少“以管理员身份运行”

> ID：15743885
> 
> 赞同：2
> 
> 时间：2013-04-01T12:54:30.000
> 
> 标签：wpf, visual-studio-2010, deployment

我在**Visual Studio Installer中从应用程序****.EXE**创建了一个快捷方式，但是当我右键单击快捷方式图标时，生成的快捷方式没有“**以管理员身份运行”选项。**

 ****Program Files 中的应用程序**.EXE**确实允许右键单击此选项。**如果我从.EXE**（即“**创建快捷方式**”）而不是从部署中手动创建快捷方式，则生成的快捷方式也具有该选项。

**如何在Visual Studio 安装**程序中部署应用程序以包含在右键单击时启用“**以管理员身份运行”选项的快捷方式？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-14T20:37:29.433

我花了很长时间寻找解决方案。真的很神奇，因为它必须是所有 Visual Studio 安装程序项目的情况。

在撰写本文时，我正在使用 Visual Studio 2017 社区，但我在 IDE 中看不到任何执行此操作的选项。

显然，这是一个导致`.msi`创建的快捷方式是“广告快捷方式”的问题。我会让你在自己的时间里发现你想知道的。（就我个人而言，我不在乎。）

您需要做的是强制快捷方式为“非广告”。

这是我在 SO 中发现的两个解决方案中更好的一个。我认为它更好，因为它 1) 不包括为每个解决方案调整安装程序项目，并且 2) 不涉及`.msi`在每次构建后手动编辑文件。

[顺便说一句，对于这个解决方案的这个 SO 帖子](https://stackoverflow.com/questions/2165781/disableadvtshortcuts-1-disables-all-shortcuts)上的人来说，这是完全值得的。你知道你是谁。我发帖是因为从这个问题上看它是否能解决这个特定问题并不明显。

您所做的是对 msi 创建模式文件进行一般更改，以便将更改传播到您未来的所有构建。*您需要 Orca 进行初始更改。*

1.  [在此处](https://developer.microsoft.com/de-de/windows/downloads/windows-10-sdk/)下载 Windows SDK 安装程序。

2.  在安装程序中选择“MSI 工具”。

3.  *安装在{Installation Folder}\Windows Kits\10\WindowsSDK\Installers*中找到的 Orca-x86_en-us 。

4.  *找到位于{Visual Studio Program Folder}\Common7\IDE\CommonExtensions\Microsoft\VSI\bin\VsdSchema*之类的文件“Schema.msi” 。

5.  在 Orca 中打开“Schema.msi”。

6.  如果文件夹是只读的，请将其复制到桌面，并在步骤 9 后替换原始文件夹。

7.  选择左侧的“属性”表。

8.  添加具有属性`DISABLEADVTSHORTCUTS`和值“1”（真）的表格行。

9.  保存文件并关闭 Orca。

10.  重建您的安装程序项目并（重新）部署您的应用程序。

11.  享受“以管理员身份运行”的能力！

最后一点：我发现对 Visual Studio 的更新可以覆盖您所做的更改，再次删除“以管理员身份运行”上下文选项。所以每次更新后检查msi文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:09:10.730

如果您有清单，则可以要求具有管理员权限，将以下内容添加到清单中

```
<requestedExecutionLevel level="highestAvailable" uiAccess="false" /> 
```

请参阅 [http://msdn.microsoft.com/en-us/library/bb756929.aspx](http://msdn.microsoft.com/en-us/library/bb756929.aspx)

您还可以在注册表的帮助下以管理员身份运行任何文件类型，请参阅 [http://www.howtogeek.com/howto/windows-vista/add-run-as-administrator-to-any-file-type-in ​​- windows-vista/](http://www.howtogeek.com/howto/windows-vista/add-run-as-administrator-to-any-file-type-in-windows-vista/)****

# python - 通过 RCON 连接到服务器

> ID：15743893
> 
> 赞同：0
> 
> 时间：2013-04-01T12:55:15.433
> 
> 标签：python, python-2.7, python-3.x

为什么此代码返回我需要的内容：

测试2.py

```
import socket

if __name__ == "__main__":
    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    sock.connect(("192.168.0.101", 28960))
    sock.send(b"\xFF\xFF\xFF\xFFrcon xxxxxxxxx status")
    print (sock.recv(65565))
    sock.close() 
```

期望的输出：

```
 b'\xff\xff\xff\xffprint\nmap:mp_rust\nnum score ping guid name lastmsg address qport rate\n

--- ----- ----  -------------------------------- --------------- ------- --------------------- ----- -----\n\n\x00' 
```

但是这段代码总是返回：

```
b'\xff\xff\xff\xffdisconnect\x00' 
```

**我的代码**

测试.py

```
import socket
from models import RconConnection

if __name__ == "__main__":
    connection = RconConnection("192.168.0.101", 28960)
    connection.connect()
    connection.auth("xxxxxxxx")
    connection.send("status")
    print(connection.response(128)) 
```

模型.py

```
import socket

class RconConnection(object):
    def __init__(self, ip, port):
        self.ip = ip
        self.port = port
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

    def connect(self):
        self.socket.connect(("%s" % (self.ip), self.port))
        return 1

    def auth(self, password):
        string = "\xFF\xFF\xFF\xFFrcon_password %s" % (password)
        self.socket.send(bytearray(string, "utf-8"))
        return 1

    def send(self, command):
        string = "\xFF\xFF\xFF\xFFrcon %s" % (command)
        self.socket.send(bytearray(string, "utf-8"))
        return 1

    def response(self, size):
        string = self.socket.recv(size)
        return string 
```

Test2.py 和 (test.py + models.py) 不会同时运行。test2.py 和 test.py 和 models.py 中的面向对象实现的区别在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:07:16.477

建立连接后，似乎两个套接字都在尝试发送数据。

```
...
sock.connect(("192.168.0.101", 28960))
sock.send(b"\xFF\xFF\xFF\xFFrcon xxxxxxxxx status") # here
... 
```

和

```
...
connection.connect()
connection.auth("xxxxxxxx") # here
connection.send("status")   # and here!
... 
```

当另一个正在做相反的事情时，使一个/两个接收/发送数据，就像我为下面的客户端套接字所做的那样（这样就不必对 Rcon 调用进行更改）......

```
import socket

if __name__ == "__main__":
    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    sock.connect(("192.168.0.101", 28960))
    auth = sock.recv()   # recieve "xxxxxxxx" (auth)
    status = sock.recv() # recieve "status" 
    sock.send(b"\xFF\xFF\xFF\xFFrcon xxxxxxxxx status")
    sock.close()
    print "Auth:", auth
    print "Status:", status 
```

# javascript - 是否可以解释放置在 html 标签内的 javascript 代码？

> ID：15743894
> 
> 赞同：2
> 
> 时间：2013-04-01T12:55:15.670
> 
> 标签：javascript, html, eval, pre

我想使用 HTML 来记录算法。这将是一个本地文件，因此不存在任何安全问题。

这个想法是有一个`<pre>`包含 javascript 代码的标签。然后，当页面加载时，`<canvas>`将根据代码内容渲染一个元素，必须对其进行评估。

`eval()`我相信这会使用标签的某种`innerHtml`属性`<pre>`，但我不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T12:59:39.953

您确实可以在`<pre>`using中运行代码`innerHTML`以获取代码，然后`eval()`. 我已经将 HTML5`contenteditable`属性添加到我们的`<pre>`，所以我们可以像编辑它一样编辑它`<textarea>`。

[jsFiddle](http://jsfiddle.net/Tyriar/t5W9L/2/)

![在此处输入图像描述](https://i.stack.imgur.com/DmHrq.png)

**HTML**

```
<pre id="code" contenteditable>var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');
context.beginPath();
context.moveTo(10,10);
context.lineTo(40,40);
context.stroke();</pre>
<button id="run">Run</button>
<canvas width="400" height="300" id="canvas"></canvas> 
```

**JavaScript**

```
var button = document.getElementById('run');
button.onclick = function () {
    var code = document.getElementById('code').innerHTML;
    eval(code);
}; 
```

# uitableview - 如何将文本字段与列出选项的表格视图而不是键盘连接

> ID：15743897
> 
> 赞同：0
> 
> 时间：2013-04-01T12:55:27.077
> 
> 标签：uitableview, uitextfield

我需要能够禁用文本字段中的键盘，而不是当用户点击它开始编辑时，将出现一个新的表格视图，其中显示应该填充文本字段的可能字符串列表。

有人对如何实现这一目标有任何建议吗？

提前致谢

ps 我已经尝试过，但是在我的情况下，这个功能不能用选择器很好地实现，因为有太多的选项可供选择，而且（更重要的是）它们中的每一个都是相当长的字符串，不能完全出现在选择器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:50:43.860

我相信你只需要一个常规单元格，当点击它时，它会推送一个新的细节 UITableViewController 以及所有可供选择的选项。选择选项后，将单元格的 textLabel 设置为已选择的任何选项。

如果您想走一条更简单的道路，那么您还应该检查免费的 Sensible TableView 框架，因为它具有开箱即用的这些类型的单元格（称为选择单元格）。您只需将您的字符串数组传递给选择单元格，它就会自动显示详细视图，如果您愿意，甚至可以将选定的选项分配给您的对象属性之一。应该可以为您节省大量的手动工作。祝你好运！

# google-apps-script - 将所选行复制到演示文稿

> ID：15743912
> 
> 赞同：3
> 
> 时间：2013-04-01T12:56:24.600
> 
> 标签：google-apps-script, google-sheets

我的目标是从电子表格中复制一行，并使用标记将行数据合并到一个文档（最好是谷歌演示文稿）中，该文档保存为我可以打印的 PDF。

我已经想出了如何将选定的行复制到一个对象中，但我一生都无法弄清楚如何将该文本复制到任何类型的临时文档中。我有一个带有标记的演示模板，一切准备就绪。

这是我一直在使用的一些脚本。

```
function printRepairs() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var data = sheet.getDataRange().getValues();
  var row = sheet.getActiveSelection();

  //prints a comma delim string of a single row
  var row1 = data[1]
  Logger.log("row #1: " + row1);
  var selectedRow = SpreadsheetApp.getActiveRange().getValues();

  // creates a file with selected row --doesn't work.
  Browser.msgBox("the row you selected contains: " +selectedRow);  
  DocsList.createFile('temp_row', selectedRow);
  copyblob(selectedRow);

  var folder = DocsList.getFolder('temp');
  folder.createFile('temp_row', 'hello', 'application/vnd.google-apps.document');

  doc = DocumentApp.create("sheet_test");
  DocumentApp.openById("sheet_test");
  text.insertText("sheet_test", selectedRow);

  Browser.msgBox("the row you selected contains: " +selectedRow);
  Logger.log("the row you selected contains: " + selectedRow);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T20:04:45.717

您正在执行的操作通常称为“邮件合并”。有 Google Docs 附加组件可以为您执行此操作 - 从 Google Doc 转到“附加组件 > 获取附加组件”并搜索“合并”。

要从您自己的脚本中执行相同的操作，我建议您首先熟悉[简单邮件合并教程](https://developers.google.com/apps-script/articles/mail_merge)中的材料。您将从文档模板创建新文档，而不是从电子表格中的模板构建电子邮件。

1.  创建一个 google 文档模板，其标记与电子表格中的列标题相匹配。

    > 我有一个带有标记的演示模板，一切准备就绪。

    不幸的是，目前还不支持演示文稿。明星[问题 1573：Google Apps 脚本的演示服务](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1573)。（也许您的投票将是最终完成的投票！）

2.  对于电子表格中的每一行...

    1.  创建模板文档的副本。[`DriveApp.makeCopy(name, destination)`](https://developers.google.com/apps-script/reference/drive/file#makeCopy(String,Folder)). 您应该为每个文件使用唯一的名称，但如果不这样做，您最终会在云端硬盘上获得多个具有相同名称的文件。
    2.  使用`fileId`新文件的 ，并将其作为文档打开。[`DocumentApp.openById(id)`](https://developers.google.com/apps-script/reference/document/document-app#openById(String))
    3.  使用类似于[this](https://stackoverflow.com/questions/10627356)、[this](https://stackoverflow.com/questions/10692669)或[this](https://stackoverflow.com/questions/10692669)的技术，在文档中搜索您的标记，并用电子表格中的数据替换。

# localization - 使用 gettext 和 .po 文件时组合键和全文

> ID：15743919
> 
> 赞同：8
> 
> 时间：2013-04-01T12:56:41.770
> 
> 标签：localization, internationalization, gettext, po

我正在查看用于创建多语言应用程序的[`gettext`文件`.po`。](http://en.wikipedia.org/wiki/Gettext)我的理解是，`.po`文件`msgid`中是源，`msgstr`是翻译。因此，我看到了两种定义方式`msgid`：

使用全文（例如`"My name is %s.\n"`）具有以下优点：

*   打电话`gettext`时可以清楚地看到要翻译的内容
*   翻译文件更容易，`.po`因为它们包含要翻译的实际内容

`my-name %s`使用具有以下优点的键（例如）：

*   当源文本很长（例如关于公司的段落）时，`gettext`调用更简洁，这使您的视图更清晰
*   更容易维护多个`.po`文件和视图，因为密钥不太可能更改（例如，密钥更改的`company-description`可能性远低于实际的公司描述）

因此我的问题是：
**有没有一种方法可以结合两种方法的优点来处理文件`gettext`，`.po`即：
- 使用键来`gettext`调用
- 翻译人员能够看到需要翻译的全文？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T07:32:24.387

gettext 旨在将英文文本翻译成其他语言，这是您应该使用它的方式。请勿将其与钥匙一起使用。如果您想要键，请使用其他一些技术，例如关联数组。

我管理过两个大型开源项目（50 种语言，5000 种翻译），一个使用 key 方法，一个使用 gettext 方法——我再也不会使用 key 方法了。

缺点包括将英文文本的更改传播到其他语言。如果你改变

```
msg_no_food = "We had no food left, so we had to eat the cats" 
```

到

```
msg_no_food = "We had no food left, so we had to eat the cat's" 
```

新文本具有完全不同的含义——那么您如何确保其他翻译无效和更新？

您提到过长文本使您的脚本难以阅读。对此的解决方案可能是将它们放在单独的脚本中。例如，把这个放在主代码中

```
print help_message('help_no_food') 
```

并有一个仅提供帮助消息的脚本：

```
switch ($help_msg) {
...
case 'help_no_food': return gettext("We had no food left, so we had to eat the cat's");
...
} 
```

gettext 的另一个问题是当你有一个完整的页面要翻译时。可能是网站上包含大量嵌入图像的宣传册页面。如果您为长文本语言（例如德语）留出大量空间，那么在短文本语言（例如中文）上将有大量空格。因此，您可能对每种语言都有不同的图像/布局。

由于它们的数量往往很少，因此在 gettext 之外完全实现这些通常更容易。例如

```
brochure-view.en.php
brochure-view.de.php
brochure-view.zh.php 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-05T09:20:50.850

[我刚刚在这里](https://stackoverflow.com/questions/2790952/php-localization-best-practices-gettext/16935887#16935887)回答了一个类似的（更老的）问题。

简洁版本：

PO 文件格式非常简单，因此可以从另一个工作流生成 PO/MO 文件，从而满足您的要求。（您的开发人员需要标识符，您的翻译人员需要文字）

您可以自己推出这个解决方案，或者使用像[Loco](http://loco.pro/)这样的基于云的应用程序来管理您的翻译并在您的开发人员需要时导出带有标识符的 Gettext 文件。

# java - JAVA - 将二进制数写入文件并读取它

> ID：15743923
> 
> 赞同：0
> 
> 时间：2013-04-01T12:57:00.007
> 
> 标签：java, binary, inputstream, readfile, fileoutputstream

我如何在没有二进制数的情况下将二进制数写入文件以减少零。

我这样写：

```
byte[] b = new BigInteger("1011010101010110", 2).toByteArray();

FileOutputStream fos = new FileOutputStream("file",true);
fos.write(b); 
```

但是例如：当我写 0000001 时，它只在文件中写入 1 并忽略零，如果我写 001001001000 也会发生同样的情况，它忽略左侧的零，从右到左读取 8 位。

将二进制数字写入文件的正确方法是什么？如果这是正确的方式，我可能试图以错误的方式读取文件（我正在使用 InputStream 的 read() ）

Ps-（8 位数字必须是 1 个字节，因此不能选择以字符串形式写入，因为每个数字都是 1 个字节。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:03:07.970

你可以试试这样的

```
 String s = "0000001";
    byte[] a = new byte[s.length()];
    for (int i = 0; i < s.length(); i++) {
        a[i] = (byte) (s.charAt(i) & 1);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:59:15.843

你不想把它写成二进制文件，你想把它写成代表二进制文件的字符串。问题是 Java 无法知道您想要填充它。我建议将您的二进制数转换为字符串，然后用 0 左填充（Apache StringUtils 将对此有所帮助）

# java - 使用带有 LayoutBaseGameActivity 的 android 布局时，Andengine 上的奇怪问题？

> ID：15743929
> 
> 赞同：0
> 
> 时间：2013-04-01T12:57:12.913
> 
> 标签：java, android, andengine

我在我的动画应用程序中使用andengine。当我使用精灵点击事件时，它会出现奇怪的问题。我正在使用这个精灵来隐藏在 android 原生布局中显示视图。

我的 logcat 输出

```
 04-01 18:21:43.966: E/AndroidRuntime(1875): FATAL EXCEPTION: GLThread 3832
        04-01 18:21:43.966: E/AndroidRuntime(1875): java.lang.IndexOutOfBoundsException: Invalid index 42, size is 42
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at java.util.ArrayList.get(ArrayList.java:304)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at org.andengine.entity.Entity.onManagedDraw(Entity.java:1382)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at org.andengine.entity.scene.Scene.onManagedDraw(Scene.java:260)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at org.andengine.entity.Entity.onDraw(Entity.java:1160)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at org.andengine.engine.Engine.onDrawScene(Engine.java:627)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at org.andengine.engine.Engine.onDrawFrame(Engine.java:617)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at org.andengine.opengl.view.EngineRenderer.onDrawFrame(EngineRenderer.java:105)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1516)
        04-01 18:21:43.966: E/AndroidRuntime(1875):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

我不知道为什么会导致请帮忙

编辑：

```
 04-01 18:53:01.420: D/AndEngine(2899): FirstBaseActivity.onDestroy @(Thread: 'main')
        04-01 18:53:01.420: D/AndEngine(2899): UpdateThread interrupted. Don't worry - this EngineDestroyedException is most likely expected!
        04-01 18:53:01.420: D/AndEngine(2899): org.andengine.engine.Engine$EngineDestroyedException
        04-01 18:53:01.420: D/AndEngine(2899):  at org.andengine.engine.Engine.throwOnDestroyed(Engine.java:574)
        04-01 18:53:01.420: D/AndEngine(2899):  at org.andengine.engine.Engine.onTickUpdate(Engine.java:560)
        04-01 18:53:01.420: D/AndEngine(2899):  at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820)
        04-01 18:53:01.427: D/AndEngine(2899): FirstBaseActivity.onDestroyResources @(Thread: 'main')
        04-01 18:53:01.427: D/AndEngine(2899): FirstBaseActivity.onGameDestroyed @(Thread: 'main') 
```

完整的日志猫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:50:12.397

问题是您正在从不同于`UpdateThread`. 也许来自一些触摸/传感器事件。如果你这样做，你必须派发到`UpdateThread`via `runOnUpdateThread(Runnable)`。

# c# - 我可以根据行模式使用正则表达式对文本文件进行分组吗

> ID：15743931
> 
> 赞同：1
> 
> 时间：2013-04-01T12:57:25.757
> 
> 标签：c#, regex

给定一个文件：

```
Timestamp: some text and a number 1
Timestamp: some text and a number 33
Timestamp: some text and a number 1
Timestamp: some text and a number 22
Something totally different, maybe a new pattern
Timestamp: some text and a number 4
Timestamp: some text and a number 2
Something totally different, maybe a new pattern
Something totally different, maybe a new pattern 
```

我想获得第 1 到 4 行（TYPE1）和第 5 行（TYPE2）、第 6,7 行（TYPE1）和第 8,9 行（TYPE2）的分组。

这可以在一个正则表达式中完成，还是我应该为每种类型创建一个表达式，然后逐行检查前一行是否为同一类型？

最后，我需要返回一个带有 pair(int start_char, int end_char) 的分组列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:09:56.030

你可以试试这个

```
string[] lines = System.IO.File.ReadAllLines("your taext file");

       var Groups =( 
                from w in lines 
                group w by w[0] into g 
                select new { FirstLetterLine = g.Key, Lins = g }); 
```

# javascript - String.prototype.myFunction 不返回字符串？

> ID：15743932
> 
> 赞同：0
> 
> 时间：2013-04-01T12:57:31.947
> 
> 标签：javascript, string, this, function-prototypes

为什么下面的代码不能正确返回*？*它应该只返回“图像”，而不是对象中的所有字母，不是吗？

```
String.prototype.removeExtension = function(){
    return (this.lastIndexOf('.') !== -1) ? this.substr(0, this.lastIndexOf('.')) : this;
}

'image.jpg'.removeExtension(); // returns 'image'

'image.png.jpg'.removeExtension(); // returns 'image.jpg'

'image'.removeExtension(); // returns String {0: "i", 1: "m", 2: "a", 3: "g", 4: "e", removeExtension: function} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:00:36.073

`this`始终在范围^((*))的上下文中引用*对象*。例如，您需要调用以从中获取伪*原始值*。^(`.toString()`)

 *```
return this.toString(); 
```

如果您`this`像这样返回，它将引用`String-object`当前调用的当前实例。

* * *

^((*)（唯一的例外是 ES5 严格模式，其中`this`也可能引用该`undefined`值)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:08:22.840

[原始字符串值](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.16)和[`String`对象](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.15)之间存在差异。

```
'foo'             // primitive

new String('foo') // object 
```

当您在字符串原语上调用 String 成员函数时，它会被包装在一个 String 对象中，该对象成为`this`函数内的值。（下面有更多关于这种行为的信息。）

因此，in`removeExtension`是`this`一个`String`对象。另一方面，内置函数`this.substr`返回一个原语；这就是它的定义。因此，当您返回`this`( `String` *object* ) 与`this.substr`(string *original* ) 的结果时，您会看到不同的东西。如果要返回`this`对象的字符串原始版本，只需使用`this.toString`.

您会看到与任何原语相同的包装行为，例如`Number`s：

```
Number.prototype.returnThis = function() { return this; }

typeof 2;               // 'number'
typeof (2).returnThis() // 'object' (a Number object, specifically) 
```

如果你真的想知道为什么会发生这种情况，它在 ECMAScript 规范中：

> **10.4.3 输入功能码**
> 
> 当控制进入函数对象 F 中包含的函数代码的执行上下文、调用者提供 thisArg 和调用者提供 argumentsList 时，将执行以下步骤：
> 
> 1.  如果功能码是严格码，设置`ThisBinding`为`thisArg`.
> 2.  否则，如果 thisArg 为 null 或未定义，则将 设置`ThisBinding`为全局对象。
> 3.  否则，如果`Type(thisArg)`不是 Object，则将 设置`ThisBinding`为`ToObject(thisArg)`。
> 4.  ……

第 3 点很重要：在原始值（即非对象）上调用函数将它们强制转换为相应的对象形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:15:15.800

这是正常行为，因为 String 不是 char 数组。所以

```
'image'.removeExtension(); 
```

将返回一个对象字符串，而不是 {0: "i", 1: "m", 2: "a", 3: ...

要获取特定的字符，请使用 'image'.charAt(3); // G*

# javascript - Sencha Touch 中是否有类似 viewWillAppear 的功能

> ID：15743935
> 
> 赞同：-1
> 
> 时间：2013-04-01T12:57:40.460
> 
> 标签：javascript, extjs, sencha-touch

每次出现视图时，我都试图调用一个函数。但它只会被第一次调用，然后不会。是否有像 iOS 的 viewWillAppear 这样的事件函数。我正在使用**“初始化”**事件函数，它只被调用一次。请帮忙。

**看法：**

```
Ext.define('Abc.view.abc', {
 extend: 'Ext.List',
 xtype: 'runningList',
 requires: ['Abc.store.InstancesStore','Ext.data.proxy.JsonP',],

config: {
title: 'Running',
id: 'instanceList',/*
itemTpl: '<div class="serached_listview">'+ 
        '<div>{key}  {key} </div>' +
        '<div><b>{key}</b> </div>' +
        '<div>  {key}</div>' +
        '</div>'
        ,*/
        store: 'RunningInstanceStore',
           listeners: [{
                fn: 'initialize',
                 event: 'initialize'
            }
    ]
  }
}); 
```

控制器：

```
 Ext.define("Abc.controller.InstancesController", {
extend: 'Ext.app.Controller',
requires: [ 'Ext.data.JsonP','Ext.device.Connection'],
config: {
    refs: { 
        main: 'mainpanel',
                     Instances: '#instanceList',
        ListView: 'runningList'
    },
    control: {
        Instances: {
            initialize: 'initializePanel',
            activate:'initializePanel'
        },
        "runningInstancesList": {
            disclose: 'listViewAccessoryTapped',
            itemtap: 'listViewTapped'
        }
    }
},
listViewAccessoryTapped:  function(view, index, item, e) {
    if(Ext.device.Connection.isOnline())
        console.log('Internet connection is available.');
    else
        console.log('Internet connection is not available.');

},
listViewTapped:  function(view, index, item, e) {

},

initializePanel: function() { 
    console.log('Hi');     **////////////////Called only once...**

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:29:05.473

这些事件处理程序之一（而不是初始化）应该可以帮助您：

绘制
[http://docs.sencha.com/touch/2-1/#!/api/Ext.Component-event-painted](http://docs.sencha.com/touch/2-1/#!/api/Ext.Component-event-painted)

显示
[http://docs.sencha.com/touch/2-1/#!/api/Ext.Component-event-show](http://docs.sencha.com/touch/2-1/#!/api/Ext.Component-event-show)

理想情况下，这些事件应该像这样在控制器中处理（多种方式之一）

```
 '#instanceList': {
            show        : 'onListShow'
        } 
```

但您也可以像这样将侦听器添加到您的视图中：

```
Ext.define('Abc.view.abc', {
  extend: 'Ext.List',
  xtype: 'runningList',
  requires: ['Abc.store.InstancesStore','Ext.data.proxy.JsonP',],

  config: {
    title: 'Running',
    id: 'instanceList',
    store: 'RunningInstanceStore',
    listeners: {
      show  : function(me, opts){
        // Do whatever you want here
      }
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:17:02.830

在 ExtJS 中有 component.beforeactivate，每次激活组件之前都会触发

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-event-beforeactivate](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-event-beforeactivate)

但是，在 Touch 中，似乎只有 container.activate，它看起来像是在激活子组件后触发的

[http://docs.sencha.com/touch/2-1/#!/api/Ext.Container-event-activate](http://docs.sencha.com/touch/2-1/#!/api/Ext.Container-event-activate)

# hadoop - 使用 Hadoop 进行并行处理而不是大数据

> ID：15743943
> 
> 赞同：14
> 
> 时间：2013-04-01T12:58:06.507
> 
> 标签：hadoop, mapreduce

我管理着一个小型开发团队，在任何给定时间，我们都有几个正在进行的（一次性）数据项目，这些项目可以被认为是“[令人尴尬的并行](http://en.wikipedia.org/wiki/Embarrassingly_parallel)”——​​这些通常涉及在一台计算机上运行一个脚本数天，这是一个经典例如，处理数千个 PDF 文件以提取一些关键文本并放入 CSV 文件中，以便稍后插入数据库。

我们现在已经完成了足够多的此类任务，我开始研究使用 RabbitMQ 和一些备用服务器开发一个简单的作业队列系统（着眼于将 Amazon SQS/S3/EC2 用于需要更大扩展的项目）

在寻找其他人这样做的例子时，我不断遇到经典的 Hadoop New York Times 例子：

> 纽约时报使用 100 个 Amazon EC2 实例和一个 Hadoop 应用程序在 24 小时内将 4 TB 的原始图像 TIFF 数据（存储在 S3 中）处理成 1100 万个完成的 PDF，计算成本约为 240 美元（不包括带宽）

哪个听起来很完美？所以我研究了 Hadoop 和 Map/Reduce。

但我想不通的是他们是怎么做到的？或者他们为什么这样做？

在 PDF 中转换 TIFF 肯定不是 Map/Reduce 问题吗？一个简单的作业队列不是更好吗？

另一个经典的 Hadoop 示例是[Yahoo Hadoop 教程](http://developer.yahoo.com/hadoop/tutorial/)中的“wordcount”，它似乎非常适合 Map/Reduce，我可以理解为什么它是大数据如此强大的工具。

我不明白这些“令人尴尬的并行”任务是如何放入 Map/Reduce 模式的？

TL;博士

这是一个非常概念性的问题，基本上我想知道如何将“处理数千个 PDF 文件以提取一些关键文本并放入 CSV 文件”的任务融入 Map/Reduce 模式？

如果您知道任何完美的示例，我并不是要您为我编写它。

（注意：我们有处理 PDF 的代码，我不是要求那个 - 这只是一个例子，它可以是任何任务。我要求将这样的过程放入 Hadoop Map/Reduce 模式中 - 当有对任务没有明确的“映射”或“减少”元素。）

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T13:47:33.117

你的想法是对的。

您提到的上述示例仅使用了 hadoop 提供的部分解决方案。他们肯定使用了hadoop的并行计算能力加上分布式文件系统。您不必总是需要减少步骤。您可能在运行的并行进程之间没有任何数据相互依赖性。在这种情况下，您将消除 reduce 步骤。

我认为您的问题也将适合 hadoop 解决方案域。

您拥有大量数据 - 大量 PDF 文件和一项长期运行的工作

您可以通过将文件放在 HDFS 上并运行 MapReduce 作业来并行处理这些文件。理论上，您的处理时间会随着集群上的节点数量而提高。如果您不需要聚合由各个线程生成的数据集，则不需要使用 reduce 步骤，否则您还需要设计 reduce 步骤。

这里的问题是，如果您不需要 reduce 步骤，您只是利用 hadoop 的并行计算能力，加上您有能力在不那么昂贵的硬件上运行您的作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T00:15:30.167

我还需要添加一件事：错误处理和重试。在分布式环境中，节点失败是很常见的。我定期运行由数百个节点组成的 EMR 集群 3 - 8 天，发现在此期间很可能有 3 或 4 个失败。Hadoop JobTracker 将很好地在不同的节点中重新提交失败的任务（最多一定次数）。

# ios - 另一个视图中的触摸处理

> ID：15743947
> 
> 赞同：1
> 
> 时间：2013-04-01T12:58:23.403
> 
> 标签：ios, delegates, event-handling, touch, uiwebviewdelegate

我认为我的问题很简单，但目前我遇到了一些困难。我想使用 ViewOne 作为触摸输入视图 - 例如 UIImageView 和另一个将处理和使用所有这些触摸事件的视图。可能是 UIWebView View1 = touchInputView View2 = TouchHandlingView

我不能只说 View1.touchDelegate = View2

# c# - 将 MS ChartImage 导出为 PPT

> ID：15743948
> 
> 赞同：0
> 
> 时间：2013-04-01T12:58:23.573
> 
> 标签：c#, asp.net, visual-studio-2008

我正在尝试将图表图像导出到 PPT，即一张幻灯片中的每个图像，下面是我的代码

```
 String strTemplate, strPic;
            strTemplate = "C:\\Program Files (x86)\\Microsoft Office\\Templates\\Presentation Designs\\Maple.GIF";

            //strPic = @"C:\Users\rongala.ganesh\Pictures\arrow_left_green_large.png";

            bool bAssistantOn;

            Microsoft.Office.Interop.PowerPoint.Application objApp;
            Microsoft.Office.Interop.PowerPoint.Presentations objPresSet;
            Microsoft.Office.Interop.PowerPoint._Presentation objPres;
            Microsoft.Office.Interop.PowerPoint.Slides objSlides;
            Microsoft.Office.Interop.PowerPoint._Slide objSlide;
            Microsoft.Office.Interop.PowerPoint.TextRange objTextRng;
            Microsoft.Office.Interop.PowerPoint.Shapes objShapes;
            Microsoft.Office.Interop.PowerPoint.Shape objShape;
            Microsoft.Office.Interop.PowerPoint.SlideShowWindows objSSWs;
            Microsoft.Office.Interop.PowerPoint.SlideShowTransition objSST;
            Microsoft.Office.Interop.PowerPoint.SlideShowSettings objSSS;
            Microsoft.Office.Interop.PowerPoint.SlideRange objSldRng;
            //Create a new presentation based on a template.
            objApp = new Microsoft.Office.Interop.PowerPoint.Application();
            objApp.Visible = MsoTriState.msoTrue;
            objPresSet = objApp.Presentations;
            objPres = objPresSet.Open(strTemplate,
                 MsoTriState.msoFalse, MsoTriState.msoTrue, MsoTriState.msoTrue);
            objSlides = objPres.Slides;
            //Build Slide #1:
            //Add text to the slide, change the font and insert/position a
            //picture on the first slide.
            objSlide = objSlides.Add(1, Microsoft.Office.Interop.PowerPoint.PpSlideLayout.ppLayoutTitleOnly);
            objTextRng = objSlide.Shapes[1].TextFrame.TextRange;
            // objTextRng.Text = "FAME Presentation";
            objTextRng.Font.Name = "Comic Sans MS";
            objTextRng.Font.Size = 25;
            foreach (var ar in arr)
            {
                // ScriptManager.RegisterClientScriptBlock(this.Page,typeof(string),"alert"
                objSlide = objSlides.Add(1, Microsoft.Office.Interop.PowerPoint.PpSlideLayout.ppLayoutTitleOnly);
                objTextRng = objSlide.Shapes[1].TextFrame.TextRange;
                // objTextRng.Text = "FAME Presentation";
                objTextRng.Font.Name = "Comic Sans MS";
                objTextRng.Font.Size = 25;
                string[] str = (string[])ar;
                strPic = str[0];
                objSlide.Shapes.AddPicture(strPic, MsoTriState.msoFalse, MsoTriState.msoTrue,
                      150, 150, 500, 350);
                objTextRng = objSlide.Shapes[1].TextFrame.TextRange;
                objTextRng.Text = str[1];
                objTextRng.Font.Name = "Comic Sans MS";
                objTextRng.Font.Size = 48;

                //Build Slide #2:
                //Add text to the slide title, format the text. Also add a chart to the
                //slide and change the chart type to a 3D pie chart.

                //Build Slide #3:
                //Change the background color of this slide only. Add a text effect to the slide
                //and apply various color schemes and shadows to the text effect.
            }

        }
        catch (Exception ex)
        {

            throw ex;
        } 
```

当我运行它时，localHost 中的一切都运行良好，但是当我托管此应用程序 IIS7 时，它抛出异常 PowerPoint 无法打开文件。所以我认为最好添加响应头，所以我按照下面的代码

`dt`是 DataTable 名称，其中包含我单击 SaveImage 时保存的图像的路径

```
 GridView1.AllowPaging = false;

            GridView1.DataSource = dt;
            GridView1.DataBind();////////write this code only if paging is enabled.

            Response.Clear();

            Response.AddHeader("content-disposition", "attachment;filename=FileName.ppt");///////for text file write FileName.txt

            Response.Charset = "";
            // If you want the option to open the Excel file without saving than

            // comment out the line below
            // Response.Cache.SetCacheability(HttpCacheability.NoCache);

            Response.ContentType = "application/vnd.ppt";//for text file write vnd.txt

            System.IO.StringWriter stringWrite = new System.IO.StringWriter();
            System.Web.UI.HtmlTextWriter htmlWrite =

            new HtmlTextWriter(stringWrite);
            GridView1.RenderControl(htmlWrite);

            Response.Write(stringWrite.ToString());

            Response.End(); 
```

在这里我可以将图像添加到 PPT 中，但它们在同一张幻灯片中，并且图像相互重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:44:44.870

**MS 不支持在服务器上使用互操作（如 ASP.NET） - 请参阅[http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)**

由于 Windows Vista MS 引入了一些与安全相关的措施，这些措施会阻止 Windows 服务执行“类似桌面”的操作......这意味着您必须绕过一些安全措施才能使其正常工作（不推荐！）。

要在服务器场景中处理 PPT，有一些选项（免费和商业）：

一个免费选项（尽管仅适用于较新的 pptx 格式！）例如 [来自 MS 的 OpenXML 2](http://www.microsoft.com/download/en/details.aspx?id=5124)。

一个商业选项是[Aspose.Slides](http://www.aspose.com/.net/powerpoint-component.aspx)，它可以处理旧 (PPT) 和新 (PPTX) 格式。

# java - 使用java使半个jframe透明

> ID：15743955
> 
> 赞同：1
> 
> 时间：2013-04-01T12:58:40.217
> 
> 标签：java, swing, jframe, translucency

我正在`JFrame`使用 Netbeans 创建一个表单。是否可以使透明的一半`JFrame`和剩余的一半相同。如果我使用 opacity 属性，它适用于整个部分`JFrame`

`JFrame`如何使用 java swing使某些部分透明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:02:37.937

您可以尝试对您不想透明的一半框架使用非透明面板，其余部分您可以使用 setOpacity();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:04:38.903

不，这是不可能的。要么全有，要么全无。
为了达到您所描述的效果，您需要`JFrame`像您所做的那样使完全透明。然后在里面放两个`JPanel`；使一个`JPanel`不透明，另一个透明。

**编辑**
经过一番上网后，我相信这实际上*可以*在一定程度上做到。[`GradientPaint`](http://docs.oracle.com/javase/tutorial/2d/geometry/strokeandfill.html)在自定义函数中使用`paint`，您可能会达到这种效果。

然而，在我看来，这种方法更难实现、更难维护、更不直观、更易读。

# opencv - OpenCV 网络摄像机图像恶化

> ID：15743958
> 
> 赞同：3
> 
> 时间：2013-04-01T12:59:10.793
> 
> 标签：opencv, ip-camera

我已经使用 OpenCV 成功连接了 IP 摄像机。如果我只是使用 imshow 显示图像，那么一切都很好......但是如果我尝试对图像进行一些 CPU 处理（我均衡图像并运行人脸检测器......），图像开始恶化（我控制台中的 ac-tex 不断损坏）...开始变得模糊，模糊和模糊...我不知道为什么会这样。我可以确认从 iSight 相机获取图像时不会发生这种情况（我在 iMac 上运行......）除此之外，我在 OpenCV 上度过了一段非常奇怪的时光。当我在发布模式下运行应用程序时，面部检测似乎不起作用。我在 Windows 8 上并使用 VS 2010。

有人可以阐明这些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T12:16:32.913

我建议你把你的问题分解成小部分。我有一些问题要问你：

*   图像捕获和演示是否在没有任何处理的情况下工作？
*   带有人脸检测算法的本地摄像头正在工作？
*   你说的发布模式，意思是在调试版本上工作？

# c# - 如何在 C# 中将资源作为字节数组获取？

> ID：15743963
> 
> 赞同：3
> 
> 时间：2013-04-01T12:59:30.297
> 
> 标签：c#, embedded-resource

我从项目设置->资源将图像添加到我的 c# 项目我
如何在运行时获取此图像？
我尝试这个：

```
public byte[] GetResource(string ResourceName)
{
    System.Reflection.Assembly asm = Assembly.GetEntryAssembly();

    // list all resources in assembly - for test
    string[] names = asm.GetManifestResourceNames(); //even here my TestImg.png is not presented

    System.IO.Stream stream = asm.GetManifestResourceStream(ResourceName); //this return null of course

    byte[] data = new byte[stream.Length];

    stream.Read(data, 0, (int)stream.Length);

    return data;
} 
```

我这样称呼这个函数：

```
byte[] data = GetResource("TestImg.png"); 
```

但是我在项目资源管理器的资源文件夹中看到了我的图像。
![在此处输入图像描述](https://i.stack.imgur.com/O1IIx.png)

谁能告诉那里有什么问题？
![在此处输入图像描述](https://i.stack.imgur.com/Cxnmj.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T13:01:47.703

您需要将文件设置`TestImg.png`为“嵌入式资源”。资源名称将是`Resources/TestImg.png`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T13:05:56.357

您可以使用 访问图像`Properties.Resources.TestImg`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-29T05:04:50.430

这有效：

```
 var info = Application.GetResourceStream(uri);
    var memoryStream = new MemoryStream();
    info.Stream.CopyTo(memoryStream);
    return memoryStream.ToArray(); 
```

此外，如果要将图像保存到驱动器：

```
 var b =
    new Bitmap(namespace.Properties.Resources.image_resouce_name);
    b.Save("FILE LOCATION"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-27T14:07:14.110

您可以编辑 Resources.resx 文件并更改：

```
 <data name="ResourceKey" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\Image.jpg;System.Drawing.Bitmap, System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
  </data> 
```

to（替换文件名后的类型和程序集定义）：

```
 <data name="ResourceKey" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\Image.jpg;System.Byte[], mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
  </data> 
```

现在您可以使用`Properties.Resources.ResourceKey`. 我不知道这是否可以在不手动编辑资源文件的情况下完成。

# c++ - 继承、指针和软件架构

> ID：15743967
> 
> 赞同：0
> 
> 时间：2013-04-01T12:59:39.533
> 
> 标签：c++, pointers, inheritance, architecture, member

```
#include <iostream>

class EquationOfMotion
{
    public:
        // other attributes
        virtual void findNextTimeStep() = 0;
};

class SystemModel
{
    public:
        EquationOfMotion* p_eom;
        // other atributes 
        SystemModel(EquationOfMotion* new_p_eom)
        {
            p_eom = new_p_eom;
        }
};

class VehicleEquationOfMotion: public EquationOfMotion
{
    public: 
        VehicleEquationOfMotion(...){/* initialise attribute*/}
        virtual void findNextTimeStep(){}
};

class Vehicle: public SystemModel
{
 // ???? Implementation ?????
} 
```

`Vehicle`是`SystemModel`where`p_eom`指向 的特化`VehicleEquationOfMotion`。

我想初始化一个实例`VehicleEquationOfMotion`并指向它`p_eom`。`Vehicle`我希望它只在 的范围内定义`Vehicle`，同时不使用堆。甚至可以在不使用堆的情况下将`VehicleEquationOfMotion`对象驻留在里面吗？`Vehicle`（如果不是，请提出*设计*错误的地方）。

***可能会有所帮助***：我考虑过[这个](https://stackoverflow.com/questions/15734147/dependent-member-initialization-when-reorder-is-not-possible)问题中的实现，但遇到了麻烦（见问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:31:13.507

如果我正确地回答了您的问题，请这样做：

```
 class FooChild : public FooParent
  {
  public:
      FooChild (int pX):m_BarChild(pX), FooParent(&m_BarChild) // point p_barPar to instance of BarChild (i.e. m_BarChild)
      {
      }
  private:
      BarChild m_BarChild; // instance of BarChild resided in the stack(not the heap) and is local to FooChild
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:35:56.177

可能这就是你想要的。但这种设计并不安全。您正在将指针传递给未初始化的对象。

```
class Vehicle: public SystemModel
{
public:
    Vehicle(): SystemModel(&_vem)
    {

    }

    VehicleEquationOfMotion _vem;
} 
```

但是，执行以下操作更安全：

```
class SystemModel
{
    public:
        EquationOfMotion* p_eom;
        // other atributes 
        SystemModel()
        {
        }
};

class Vehicle: public SystemModel
{
   public:
   Vehicle(): SystemModel(&_vem)
   {
      p_eom = &_vem;
   }
   VehicleEquationOfMotion _vem;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:18:02.687

使用类模板。

```
class EquationOfMotion { ... };

template <typename EOM>
class SystemDynamics
{
    EOM EquationOfMotion;
    ...
};

class VehicleEquationOfMotion : public EquationOfMotion { ... };

class Vehicle : public SystemDynamics<VehicleEquationOfMotion> { ... }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:22:22.513

如果您想让 FooParent.p_barPar 指向位于 FooChild 内的 BarChild，您可能需要向 FooParent 添加一个默认 ctor 和一个方法，如下所示`set_p_barPar(BarChild* new_p_bar){p_barPar = new_p_bar;}`：所以你得到：

```
class FooParent
{
    public:
        BarParent* p_barPar;
        FooParent (){}
        FooParent (BarChild* new_p_bar)
        {
            p_barPar = new_p_bar;
            std::cout << p_barPar->x << std::endl;
        }
    protected:
        set_p_barPar(BarChild* new_p_bar)
        {
            p_barPar = new_p_bar;
        }
} 
```

然后你可以实现FooChild：

```
class FooChild : public FooParent
{
     public:
          FooChild(int new_x, BarChild* new_p_bar):_bar_child(new_x)
          {
               set_p_barPar(&_bar_child);
          }

     private:     //? Depends on your plans
         BarChild _bar_child();
} 
```

# django - 如何检查实例是否属于登录用户？

> ID：15743971
> 
> 赞同：1
> 
> 时间：2013-04-01T13:00:09.690
> 
> 标签：django

以下是我当前如何检查模型是否属于正在编辑它的用户。我`views.py`几乎对所有东西都这样做，它有点重复，我经常使用它！

```
 # If we have an instance check that it belongs to the login.
        if some_object.user != request.user:
            return HttpResponseForbidden() 
```

所以，我想知道其他人如何解决这样的功能？我一直在考虑将其移至所有对象的每个保存方法？

我可以提供 Django 开发人员如何执行此操作的示例（带有代码）吗，必须有更好的方法来检查哪些用户可以编辑哪些内容，对吗？

我不会急于接受答案，我对来自更有经验的开发人员的权威回复非常感兴趣，因为我对 Django 还很陌生。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:40:22.207

如果您使用基于类的视图，Mixins 可以工作......您可以通过执行类似这样的操作来创建自己的视图

```
class RequireOwnershipMixin(object):
    def get_object(self, queryset=None):
        obj = super(RequireOwnershipMixin, self).get_object(queryset)
        if obj.user != self.request.user:
            return None
        return obj 
```

你的视图现在看起来像这样

```
class UpdateSomeObjectView(RequireOwnershipMixin, UpdateView):
    ... 
```

如果您不是对象的所有者，这将覆盖`get_object`要返回的方法。`None`您可能需要在`get`or`post`方法中做一些额外的检查来处理何时`None`返回，以便您可以返回一个`HttpResponseForbidden`

您也可以将它用于任何使用该`get_object`方法的基于类的视图。

# sql - Oracle保持唯一约束索引

> ID：15743973
> 
> 赞同：3
> 
> 时间：2013-04-01T13:00:15.400
> 
> 标签：sql, oracle, indexing, toad

当我删除一`unique`列（只是唯一而非主键）约束时，Toad 会提示我是否要保留索引。

对我来说，合乎逻辑的事情是删除索引，但为什么要保留它？如果我在以后的某个时间点使同一列唯一，是否可以节省时间？（这让我很困惑，因为旧索引可能会导致冲突）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:15:02.030

从 10g 开始，Oracle 在`ALTER TABLE...DROP CONSTRAINT`. 从我读过的内容来看，它应该是相反的......因为它应该删除索引，除非您指定“KEEP INDEX”。所以我假设您通过 GUI 菜单删除了索引。

考虑到这一点，TOAD GUI 可能旨在提示您这样做。我想知道你是否真的跑了`ALTER TABLE...DROP CONSTRAINT`，如果它仍然会提示你。我敢打赌“不会”。

# c++ - 编译 C++ 代码使其在 Windows 和 Linux 中的行为相同

> ID：15743988
> 
> 赞同：-2
> 
> 时间：2013-04-01T13:01:02.780
> 
> 标签：c++, linux, windows, g++, cygwin

我已经安装了 cygwin 并用它在 Windows 上编写 C++。

我更喜欢在 Windows 中编写我的代码（这些是分配），但代码还需要能够在 Linux 上运行。虽然代码在大多数情况下都可以很好地移植，但似乎有些东西在 Windows 上有效，但在 Linux 上会导致段错误（例如引用未初始化的变量和指针）。

我在 Windows（通过 C:\cygwin\bin\g++.exe）和 Linux 中都使用 g++ 进行编译，我不明白为什么在前者中工作的代码在后者中失败（或者为什么它们的行为不一样）。如何让我的代码在两者中的行为完全相同？这甚至可能吗？

尽管我是 C++ 菜鸟，但我没有使用任何特定于 Windows 的库，所以我可能会误解一些简单/重要的事情。最后我知道使用未初始化的变量和指针是不好的——我想在 Windows 中使用它们会导致分段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:08:49.887

您所描述的“引用未初始化的变量和指针”被称为未定义的行为。这意味着“你的运气可能会有所不同”——它可能在一个系统上以一种方式做某事，而在另一个系统上做另一件事。不幸的是，作为“C 和 C++ 应该是高效语言”的一部分，未定义行为的行为就是这样 - 编译器不需要关心它，并且 C 或 C++ 标准中没有定义什么应该发生。

如果你应用`-Wall`到你的编译器，它应该会给你几乎所有类型的未初始化变量的警告。

制定你的规则，每当你声明一个变量时，你也要给它一个值。这样做从来都不是一个坏主意。即使它只是给它分配了一些无用的值，也比试图找出为什么你的计算在四级嵌套循环深处的某个地方出错要好。

您也可以尝试使用 Microsoft Visual Studio 工具——这些工具有一个免费的“Express Edition”。如果您使用调试模式编译，它将生成额外的代码来（尝试）检测未初始化变量的使用。

我不知道有一个“库”允许您对未初始化的变量进行错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:15:19.567

> 例如引用未初始化的变量和指针

确切地。根据我的经验，我看到在 Windows 上编译的 C++ 代码（带有`Visual C++`or `MinGW GCC`）指针未初始化为 NULL。

所以这样的事情不会出现段错误。（你没有得到你想要的，但至少你不知道。残忍。）

```
int *p;
*p = 1;
std::cout<<*p; 
```

然而，在 Linux 系统 (GCC) 上，至少似乎将它们初始化为 NULL。所以上面的代码会出现段错误。

最好的解决方案是为您正在使用的编译器打开未初始化的变量警告 (gcc `Wuninitialized`)，然后告诉它将所有警告视为错误 (gcc `Werror`)。

您至少可以在尝试移植代码之前执行此操作。

要获得更好的分析，您可以使用[valgrind 之](http://valgrind.org/)类的工具。

# iphone - 使用 IF 语句放置 iPhone5 按钮？

> ID：15743992
> 
> 赞同：-1
> 
> 时间：2013-04-01T13:01:16.287
> 
> 标签：iphone, ios, xcode, ipad

我有一个游戏，暂停按钮应该在右上角，但是在 iPhone 5 上它是顶部的 3/4，所以我尝试手动设置它但我无法让它工作，这个有效，但是在 iPhone 3 和 4 上它没有显示（所以它显然忽略了 IF 语句的某些部分）

```
CCMenuItemSprite* item1 = [CCMenuItemSprite itemWithNormalSprite:[CCSprite spriteWithFile:[[MainInfo shareInstance] getImageName:@"pause1.png"]]
                                                      selectedSprite:[CCSprite spriteWithFile:[[MainInfo shareInstance] getImageName:@"pause2.png"]]
                                                              target:self
                                                            selector:@selector(soundOff)];

    CCMenu *menu = [CCMenu menuWithItems:item1, nil];

    if ( ![[MainInfo shareInstance] isIPad] )
        menu.position = ccp(290, 450); //450 iPhone3/4
//  else

        if (IS_IPHONE_5) {
            // do something specific for iPhone 5
            menu.position = ccp(290, 530); //450 iPhone3/4

        }else

     menu.position = ccp(696, 960);

    [_bottomFrame addChild:menu z:30 tag:1234];

    [self updateBoard];
} 
```

在 .m 文件的顶部，我有以下内容；

```
#define IS_IPHONE_5 ([UIScreen mainScreen].bounds.size.height == 568.0) 
```

任何人都可以帮助以正确的方式编写上面的代码吗？

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:37:13.667

此外，您的 ELSE 语句没有括在括号中：

```
 CGSize screenSize = [[UIScreen mainScreen] bounds].size;
if (screenSize.height > 480.0f) {
    /*Do iPhone 5 stuff here.*/
} else {
    /*Do iPhone Classic stuff here.*/
} 
```