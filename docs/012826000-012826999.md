# StackOverflow 问答 12826000-12826999

# ios - Xcode iOS 使用 git

> ID：12826000
> 
> 赞同：4
> 
> 时间：2012-10-10T18:31:34.410
> 
> 标签：ios, xcode, git, bitbucket, gitignore

我已经设置了一个 bitbucket 存储库并在我的 Organizer 中对其进行了配置。我创建了一个基本的 .gitignore 并将其添加到我的项目的根目录中。我已经尝试提交所有文件，但是当我尝试推送时它继续说有未提交的文件。

未提交的文件是：

*   .DS_Store
*   项目.pbxproj
*   UserInterfaceState.xcuserstate

我已经将 *.xcuserstate 放在了我的 .gitignore 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:27:06.320

我以前一直有同样的问题。

首先，关闭 Xcode。这只会继续生成不断出现的 xcuserstate 更改。打开您的项目文件夹，我们需要从那里获取用户状态。如果您右键单击您的 .xcodeproj 文件，请选择 Show Package Contents。这将使您可以看到隐藏在其中的所有内容。您可以在那里删除 .xcuserdata 文件。这可能会丢失您的 Xcode 状态，例如您打开了哪些文件夹、选项卡等。但它不应该以任何方式损害您的项目。下次打开 Xcode 时，它​​只会创建另一个。

接下来，打开终端。这是处理此问题的最佳方法。确保您位于终端内项目的目录中。如果您不确定，请键入`cd`项目文件夹并将其拖放到终端中以加载位置名称。

```
rm .DS_Store 
```

这将删除 Mac OS 创建的隐藏文件夹文件。别担心。如果您还没有关闭项目文件夹，或者它只会创建另一个文件夹。

希望如果您已经做到了这一点，您可以`git status`在当前设置的终端中运行，并且应该会看到一条消息，显示只剩下 1 个文件要提交。pbxproj 文件。如果是这样，太好了！

```
git add project.pbxproj
git commit -m "Put some commit message for this file" 
```

这应该添加您的项目文件并将其提交 git 并清除内容。一个 git 状态应该显示你的 repo 是免费的，并且清除了所有未跟踪和未提交的文件。

运气好的话，当你再次启动 Xcode 并创建这些文件时，你的 gitignore 文件应该启动并忽略它们以备将来提交。当我第一次开始使用 git 时，这种情况经常发生在我身上。我终于学会了在添加任何 Xcode 源文件之前首先检查忽略文件。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:55:44.097

看起来您在设置 gitignore 之前已将这些文件添加到存储库中。

您必须先完全删除它们 - 查看这篇文章：[忽略已提交到 Git 存储库的文件](https://stackoverflow.com/questions/1139762/gitignore-file-not-ignoring)

我通常有以下几点：

```
.DS_Store
*.log
xcuserdata
build/*
.svn 
```

好吧 svn 只是因为发生了一些版本控制混合，我相信从 Xcode 4.4 开始就不需要构建文件夹 - 这个版本将构建存储在其他地方，但如果你愿意，你可以覆盖它。保留它是很好的。

`project.pbxproj`实际上是你的项目文件，你需要这个，尽管如果你在一个团队中会变得很烦人，因为其他开发人员在项目中更改了他们的代码签名配置文件 - 提示：iOS 团队配置文件是你的朋友。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T19:03:00.193

您必须从存储库中删除该文件并提交 .gitignore 文件的删除以开始忽略它。它不会忽略已经存在的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:51:19.963

这是我的 .gitignore 文件（不要忽略 project.pbxproj）：

```
.bundle
db/*.sqlite3
log/*.log
tmp/
.DS_Store 
```

# c - realloc 不改变数组的大小

> ID：12826002
> 
> 赞同：5
> 
> 时间：2012-10-10T18:31:46.113
> 
> 标签：c, arrays, realloc

> **可能重复：**
> [Realloc 未调整指针数组的大小](https://stackoverflow.com/questions/9478044/realloc-is-not-resizing-array-of-pointers)

谁能告诉我我的错误在哪里？此函数应创建一个由 提供的字符组成的数组`stdin`。我阅读了一些相关的问题，但它太复杂了，我无法理解。

```
char *readChar(void)
{
    int c;
    int len = 0;
    char* parr = malloc(sizeof(char));

    while((c = getchar()) != EOF)
    {
        ++len;
        int size = sizeof(char)*len;
        parr = (char *) realloc(parr,size);
        *(parr+size-1) = (char) c;
        printf("Done! Size should be: %dB, but real size is %dB\n",size,sizeof(parr));
    }

    return parr;
} 
```

输出：

> 完毕！大小应该是：1B，但实际大小是 8B 完成！大小应该是：2B，但实际大小是 8B 完成！大小应该是：3B，但实际大小是 8B 完成！大小应该是：4B，但实际大小是 8B

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T18:33:35.007

错误是它`sizeof()`不会告诉您分配的字节数。它告诉你的大小`char *`

听起来您想要的是验证您是否分配了正确的内存量。`sizeof()`不会给你这些信息。此时处于低级细节中，您需要做一些依赖于操作系统的操作来尝试查找该信息。（例如，在 Linux 内核中，如果你有`kmalloc()`记忆，你可以用`ksize()`它来准确找出你得到了多少字节）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:33:40.607

`sizeof(parr)`不是分配的空间量，它是`char*`(`parr`的数据类型) 的大小。了解您分配的内存量的唯一可移植方法是自己跟踪它。

假设`realloc`按预期工作，您分配的字节数将等于您的变量`size`。

我在您的代码中注意到的其他几件事：

```
 char* parr = malloc(sizeof(char)); 
```

您应该始终检查 的返回值`malloc`以确保它成功：

```
 char* parr;
 if(!(par = malloc(sizeof(char)))
 {
     //allocation failed
 } 
```

引起我注意的代码的下一部分：

```
 int size = sizeof(char)*len; 
```

这实际上是不需要的。`sizeof(char)`始终等于一个字节，因此您不妨只使用当前值，而不是在循环的每次迭代中`len`声明一个等于等于的新变量。`len * 1`

```
 parr = (char *) realloc(parr,size); 
```

如前所述，您不需要使用`size`，因为它等效于`len`. 同样在 C 中，转换指针通常不是一个好主意，您还应该检查 realloc 的返回值，以防它失败：

```
if(!(parr = realloc(parr, size)))
{
    //allocation failed
} 
```

最后一点，我在使用该`realloc`函数时总是使用缓冲区以避免潜在的内存问题。这是我对您的代码的看法：

```
char *readChar(void)
{
    int c, len = 0;
    char* parr = NULL, char *tmp;

    if(!(parr = malloc(sizeof(char)))
    {
        fputs("memory allocation failed", stderr);
        exit(1);
    }

    while((c = getchar()) != EOF)
    {
        ++len;
        if(!(tmp = realloc(parr, len)))
        {
            free(parr);
            fputs("memory allocation failed", stderr);
            exit(1);
        }
        parr = tmp;
        *(parr+len-1) = (char) c;
    }
    return parr;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:34:03.880

`sizeof(parr)`返回一个指针大小（在您的系统上为 8 个字节）。您需要使用`strlen`来找出实际的字符串大小（注意，字符串应以`\0`ie 结尾，以空值结尾）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T18:34:44.177

您无法使用 sizeof() 测量动态分配数组的大小，因为它是在编译期间评估的。在您的示例中，您使用的**指针**大小在 x64 架构上为 8B。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T18:35:17.873

它为您提供`sizeof`每次打印时始终相同的指针。

没有办法知道指针指向的内存大小，您只需要自己跟踪它们即可。

顺便说一句，它保证`sizeof(char)`始终为 1。因此，您可以在对`realloc`and的调用中删除它们`malloc`。为了安全起见，您还应该检查 malloc 和 realloc 的返回值。

# python - 如何从相对路径获取文本文件？

> ID：12826003
> 
> 赞同：0
> 
> 时间：2012-10-10T18:31:47.897
> 
> 标签：python

如果我有这样的文件目录：

```
-Proj
   - Proj.py
   - Directory
       - input.txt 
```

并且 Proj.py 想从 input.txt 中读取，我怎样才能得到它？open() 似乎只需要一个绝对地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:37:34.893

相对路径是相对于当前工作目录的，这通常是你调用 python 解释器时 shell 所在的目录。

使用类似的东西

```
import os
open(os.path.join(os.path.dirname(__file__), 'Directory', 'input.txt')) 
```

# ruby-on-rails - Ruby on Rails Michael Hartl 第 10 章 - Rspec 失败，没有微博

> ID：12826006
> 
> 赞同：1
> 
> 时间：2012-10-10T18:31:53.383
> 
> 标签：ruby-on-rails

我正在使用 Michael Hartl Ruby on Rails 教程。目前第 10 章。当我创建代码以向用户添加微博并尝试运行测试时，我收到此错误：

```
 1) User pages profile page microposts
Failure/Error: it { should have_content(m1.content) }expected there to be content   
"Foo" in "Ruby on Rails Tutorial Sample  App | Person 90\n    \n    \n      sample 
app\n Home\n Help\n Sign in\n \n  \n\n   Person 90, 
person_88@example.com\n\n\t\n\t\t\t\t\n\t\t\t\tPerson 90\n\t\t\t\n\t\t
\n\t\tMicroposts (2)\n\t\t\t\n\n\n\n Rails Tutorial\n by Michael Hartl\n 
\n  About\n Contact\n Ne ws\n    \n  "
# ./spec/requests/user_pages_spec.rb:77:in `block (4 levels) in <top (
required)>'←[0m

2) User pages profile page microposts
 Failure/Error: it { should have_content(m2.content) } expected there to be content   
 "Bar" in "Ruby on Rails Tutorial Sample  App | Person 92\n \n \nsample app\n 
 Home\n Help\n Sign in\n \n  \n \n Person 92, person_90@example.com\n\n\t\n\
 t\t\t\t\n\t\t\t\tPerson 92\n\t\t\t\n\t\t\n\t\tMicroposts (2)\n\t\t\t\n\n\n
 \n Rails Tutorial\n by Michael Hartl\n \n  About\n Contact\n Ne ws\n    \n  "
 # ./spec/requests/user_pages_spec.rb:78:in `block (4 levels) in <top (required)>' 
```

我的 user_pages_spec.rb 文件如下所示：

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "index" do

    let(:user) { FactoryGirl.create(:user) }

    before do
      sign_in user      
      visit users_path
    end

     it { should have_selector('title',  text: 'All users') }
     it { should have_selector('h1',     text: 'All users') }

    describe "pagination" do

       before do
         30.times { FactoryGirl.create(:user) } 
         visit users_path
       end

       after(:all)  { User.delete_all }

       it { should have_selector('div.pagination') }

       it "should list each user" do
         User.paginate(page: 1).each do |user|
           page.should have_selector('li', text: user.name)
         end        
       end      
     end

     describe "delete links" do

      it { should_not have_link('delete') }

      describe "as an admin user" do
        let(:admin)   { FactoryGirl.create(:admin) }
        before do
          sign_in admin
          visit users_path
        end

         it { should have_link('delete', href: user_path(User.first)) }
         it "should be able to delete another user" do
           expect { click_link('delete') }.to change(User, :count).by(-1)
        end      
         it  { should_not have_link('delete', href: user_path(admin)) }
       end
     end
   end

   describe "signup page" do
     before { visit signup_path }

     it { should have_selector('h1',    :text => 'Sign up') }
     it { should have_selector('title', :text => ('Sign up')) }
   end

   describe "profile page" do
     # Code to make a user variable
    let(:user) { FactoryGirl.create(:user) }    
   let!(:m1) { FactoryGirl.create(:micropost, user: user, content: "Foo") }
   let!(:m2) { FactoryGirl.create(:micropost, user: user, content: "Bar") }

        before { visit user_path(user) }

     it { should have_selector('h1',         :text=> user.name) }
     it { should have_selector('title',  :text=> user.name) }

      describe "microposts" do
      it { should have_content(m1.content) }
      it { should have_content(m2.content) }
      it { should have_content(user.microposts.count) }
    end    
  end

   describe "signup" do

     before { visit signup_path }

     let(:submit) { "Create my account" }

     describe "with invalid information" do
       it "should not create a user" do
         expect { click_button submit }.not_to change(User, :count)
      end
    end

     describe "with valid information" do
       before do
         fill_in "Name",         with: "Example User"
         fill_in "Email",        with: "user@example.com"
         fill_in "Password",     with: "foobar"
         fill_in "Confirmation", with: "foobar"
       end

       it "should create a user" do
         expect { click_button submit }.to change(User, :count).by(1)
      end
        describe "after saving the user" do
        before { click_button submit }
          it { should have_link('Sign out') }
       end
      end 
    end

   describe "edit" do
     let(:user) { FactoryGirl.create(:user) }
     before do
     sign_in user
     visit edit_user_path(user) 
   end

   describe "page" do
     it { should have_selector('h1',    text: "Update your profile") }
     it { should have_selector('title', text: "Edit user") }
     it { should have_link('change', href: 'http://gravatar.com/emails') }
   end

    describe "with invalid information" do
      before { click_button "Save changes" }

        it { should have_content('error') }
    end

    describe "with valid information" do
       let(:new_name)  { "New Name" }
       let(:new_email) { "new@example.com" }
       before do
         fill_in "Name",             with: new_name
         fill_in "Email",            with: new_email
         fill_in "Password",         with: user.password
         fill_in "Confirm Password", with: user.password
         click_button "Save changes"
       end

        it { should have_selector('title', text: new_name) }
        it { should have_selector('div.alert.alert-success') }
        it { should have_link('Sign out', href: signout_path) }
        specify { user.reload.name.should == new_name }
        specify { user.reload.email.should == new_email}
      end
    end
  end 
```

这个问题的明显结果是没有向用户添加微博。错误似乎与用户创建有关，但我真的不知道如何处理它。

修改后的错误：

```
1) User pages edit with valid information 
Failure/Error: fill_in "Name", with: new_name 
Capybara::ElementNotFound: cannot fill in, 
no text field, text area or password field with id, name, or label 'Name' found
# (eval):2:in `fill_in' 
# ./spec/requests/user_pages_spec.rb:139:in `block (4 levels) in <top (required)>'

2) User pages edit with valid information
Failure/Error:←[0m ←[31mfill_in "Name", with: new_name
Capybara::ElementNotFound: cannot fill in, no text field, text area or password field 
with id, name, or label 'Name' found 
# (eval):2:in `fill_in'
# ./spec/requests/user_pages_spec.rb:139:in `block (4 levels) in <top (required)>'

3) User pages edit with valid information
Failure/Error: fill_in "Name", with: new_name Capybara::ElementNotFound:
cannot fill in, no text field, text area or password field with id, name,
or label 'Name' found
# (eval):2:in `fill_in'
# ./spec/requests/user_pages_spec.rb:139:in `block (4 levels) in <top (required)>'

4) User pages edit with valid information
Failure/Error: fill_in "Name", with: new_name Capybara::ElementNotFound:
cannot fill in, no text field, text area or password field with id, name,
or label 'Name' found
# (eval):2:in `fill_in'
# ./spec/requests/user_pages_spec.rb:139:in `block (4 levels) in <top (required)>'

5) User pages edit with valid information
Failure/Error: fill_in "Name", with: new_name Capybara::ElementNotFound:
cannot fill in, no text field, text area or password field with id,name, 
or label 'Name' found
# (eval):2:in `fill_in'
# ./spec/requests/user_pages_spec.rb:139:in `block (4 levels) in <top (required)>'

6) User pages edit page
Failure/Error: it { should have_link('change', href: 'http://gravatar.com/emails')}
expected link "change" to return something
# ./spec/requests/user_pages_spec.rb:124:in `block (4 levels) in <top (required)>'

7) User pages edit page
Failure/Error: it { should have_selector('h1', text: "Update your profile") }
expected css "h1" with text "Update your profile" to return something
# ./spec/requests/user_pages_spec.rb:122:in `block (4 levels) in <top (required)>'

8) User pages edit page
Failure/Error: it { should have_selector('title', text: "Edit user") }
expected css "title" with text "Edit user" to return something
# ./spec/requests/user_pages_spec.rb:123:in `block (4 levels) in <top (required)>'

9) User pages edit with invalid information
Failure/Error: before { click_button "Save changes" }Capybara::ElementNotFound:
no button with value or id or text 'Save changes' found
# (eval):2:in `click_button'
# ./spec/requests/user_pages_spec.rb:130:in `block (4 levels) in <top (required)>'

10) User pages signup with valid information should create a user
Failure/Error: expect { click_button submit }.to change(User,  :count).by(1)
count should have been changed by 1, but was changed by 0
# ./spec/requests/user_pages_spec.rb:104:in `block (4 levels) in <top (required)>'

11) User pages profile page
Failure/Error: it { should have_selector('h1', :text=> user.name) }
expected css "h1" with text "Person 26" to return something
# ./spec/requests/user_pages_spec.rb:73:in `block (3 levels) in <top ( required)>'

12) User pages profile page
Failure/Error: it { should have_selector('title', :text=> user.name) }
expected css "title" with text "Person 27" to return something
# ./spec/requests/user_pages_spec.rb:74:in `block (3 levels) in <top (required)>'

13) User pages profile page microposts
Failure/Error: it { should have_content(m1.content) }
expected there to be content "Foo" in "Internal Server Error\nCouldn't find User with 
id=2\nWEBrick/1.3.1 (Ruby/1.9.3/2012-04-20) at 127.0.0.1:59157"
# ./spec/requests/user_pages_spec.rb:77:in `block (4 levels) in <top (required)>'

14) User pages profile page microposts
Failure/Error: it { should have_content(m2.content) }
expected there to be content "Bar" in "Internal Server Error\nCouldn't find User with 
id=2\nWEBrick/1.3.1 (Ruby/1.9.3/2012-04-20) at 127.0.0.1:59157"
# ./spec/requests/user_pages_spec.rb:78:in `block (4 levels) in <top (required)>'

15) User pages index
Failure/Error: it { should have_selector('title',  text: 'All users') }
expected css "title" with text "All users" to return something
# ./spec/requests/user_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

16) User pages index
Failure/Error: it { should have_selector('h1', text: 'All users') }
expected css "h1" with text "All users" to return something
# ./spec/requests/user_pages_spec.rb:17:in `block (3 levels) in <top (required)>'

17) User pages index pagination
Failure/Error:it { should have_selector('div.pagination') }
expected css "div.pagination" to return something
# ./spec/requests/user_pages_spec.rb:28:in `block (4 levels) in <top (required)>'

18) User pages index pagination should list each user
Failure/Error: page.should have_selector('li', text: user.name) 
expected css "li" with text "Example User" to return something
# ./spec/requests/user_pages_spec.rb:33:in `block (5 levels) in <top (required)>'
# C:in `each'
# C:in `each'
# ./spec/requests/user_pages_spec.rb:32:in `block (4 levels) in <top (required)>'

19) User pages index delete links as an admin user
Failure/Error: it { should have_link('delete', href: user_path(User.first)) }
expected link "delete" to return something
# ./spec/requests/user_pages_spec.rb:49:in `block (5 levels) in <top (equired)>'

20) User pages index delete links as an admin user should be able to delete an  
other user
Failure/Error: expect { click_link('delete') }.to change(User, :count).by(-1)
Capybara::ElementNotFound:no link with title, id or text 'delete' found
# (eval):2:in `click_link'
# ./spec/requests/user_pages_spec.rb:51:in `block (6 levels) in <top (required)>'
# ./spec/requests/user_pages_spec.rb:51:in `block (5 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T18:59:36.297

我遇到了同样的问题——微博在浏览器中渲染得很好，但是同样的测试失败了。原来问题是我有一个错字`UsersController#show`- 我是通过`params[:id]`而不是`params[:page]`to `@user.microposts.paginate`。

通过将我的代码与 GitHub 上的源代码进行比较，我发现了问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:11:50.777

我也被这个困住了。当我比较 Github 上的参考代码中的规范时，我注意到我没有使用`let!`（参见[user_pages_spec.rb](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/spec/requests/user_pages_spec.rb)的第 80 行）。

这在上一节 (10.1) 中提到过，其中`let`延迟加载其对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:59:01.430

尝试更改`describe "User pages" do`为`describe "User pages", :js => true do`. 这解决了你的问题吗？

# facebook - Facebook 评论链接 URL

> ID：12826008
> 
> 赞同：0
> 
> 时间：2012-10-10T18:31:58.397
> 
> 标签：facebook

我想将 Facebook 评论插件添加到网页。当用户发表评论时，我知道它会出现在他们的 Facebook 墙上，并发布一个返回网页的活动链接。

是否可以使该链接返回到我想要的任何网址？还是我必须使用我的 Facebook 评论模块所在的当前页面的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:25:40.890

评论插件将始终将用户链接到添加评论的 URL - 之后您做什么取决于您，如果您愿意，您可以使用您的服务器或客户端代码重定向。

# android - 代码执行顺序

> ID：12826009
> 
> 赞同：0
> 
> 时间：2012-10-10T18:32:01.887
> 
> 标签：android, handler

我在代码中的两个地方使用了处理程序。我的代码如下：

```
public void onClick(View v) {
        vibrator.vibrate(Constants.DEFAULT_VIBRATE_TIME);

        checkPassword();

        List<NameValuePair> userDetails = new ArrayList<NameValuePair>();
        Utils.addCustomerLoginDetail(userDetails);
        final ProgressDialog progress = ProgressDialog.show(
                ChangePasswordActivity.this, "", "Saving Please wait..");
        Ola.asyncHttpClient.get(HttpCommunicator.getFilledUrl(
                UrlConstants.AUTH_SEND_LOGIN_INFO_URL, userDetails),
                new AsyncHttpResponseHandler() {
                    public void onSuccess(String arg0) {
                        serverResponse = arg0;
                        handler.post(new Runnable() {

                            @Override
                            public void run() {
                                verifyLoginDetails();
                            }
                        });
                    };

                    @Override
                    public void onFinish() {
                        if(isRunning())
                            progress.dismiss();
                    };
                });

        if (!doValidations()
                || !isConnectedToInternet()) {
            return;
        }
        updateCustomerDetails();
        List<NameValuePair> list = new ArrayList<NameValuePair>();
        Utils.addUserId(list);
        Utils.addCustomerPassword(list);
        final ProgressDialog progressDialog = ProgressDialog.show(
                ChangePasswordActivity.this, "", "Saving Please wait..");

        Ola.asyncHttpClient.get(HttpCommunicator.getFilledUrl(
                UrlConstants.AUTH_UPDATE_PROFILE_URL, list),
                new AsyncHttpResponseHandler() {
                    public void onSuccess(String arg0) {
                        serverResponse = arg0;
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                sendCustomerDetailsToServer();
                            }
                        });
                    };

                    public void onFailure(Throwable arg0, String arg1) {
                        showOlaDialog(Ola.NO_CONNECTIVITY);
                    };

                    @Override
                    public void onFinish() {
                        if(isRunning())
                            progressDialog.dismiss();
                    };
                });
    }
}; 
```

我面临的问题是代码的第二部分（if 语句之后的部分）被执行并在第一部分之前完成。

我需要做些什么来确保第一部分在第二部分开始之前完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:37:55.973

Runnable 用于在单独线程上执行的代码。要强制执行特定订单，请使用您喜欢的任何同步方法。一个线程可以等待来自第一个线程的事件，然后执行其代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:37:54.913

因为上面有异步代码，也就是说`AsyncHttpResponseHandler`，你可以使用[异步信号量](http://en.wikipedia.org/wiki/Asynchronous_semaphore)。

信号量可以锁定一个机制或一段代码，直到某个异步事件发生。

# java - 如何使用 Smack 从 Android 向 GAE 发送 XMPP 消息

> ID：12826011
> 
> 赞同：0
> 
> 时间：2012-10-10T18:32:06.987
> 
> 标签：java, android, google-app-engine, xmpp, smack

我想使用 Smack 从我的 android 客户端向 GAE 服务器发送 XMPP 消息。我用 gmail 设置阅读[了这篇文章](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)，并了解了应该如何做。但我不知道如何为我的谷歌应用引擎帐户设置`host`and 。`serviceName`

```
String host = "talk.google.com";
int port = 5222;
String serviceName gmail.com;

ConnectionConfiguration connConfig = new ConnectionConfiguration(host ,port , serviceName);

XMPPConnection connection = new XMPPConnection(connConfig);
connection.connect();

Message msg = new Message(to, Message.Type.chat);
msg.setBody(text);
connection.sendPacket(msg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:20:28.083

XMPP 可以在几种不同的传输机制上工作。

GAE 适用于 HTTP，因此您的 XMPP 客户端可能必须支持 BOSH（XMPP over HTTP）这是规范：http: [//xmpp.org/extensions/xep-0124.html](http://xmpp.org/extensions/xep-0124.html)

然后，您将使用 GAE XMPP 文档中描述的 URL 和 XMPP 地址： [https ://developers.google.com/appengine/docs/java/xmpp/overview](https://developers.google.com/appengine/docs/java/xmpp/overview)

我还没有看到任何为 GAE XMPP 指定端口号的文档，我怀疑它不受支持，因此您将无法通过套接字进行连接。

# php - PHP - 电子邮件个性化字符串替换

> ID：12826015
> 
> 赞同：0
> 
> 时间：2012-10-10T18:32:15.607
> 
> 标签：php, regex, preg-replace, preg-match

我正在整理一个电子邮件个性化库，因此对于 Mailchimp 和 Campaign Monitor 之类的电子邮件邮件程序，您可以设置一个特定的个性化设置，例如 [FNAME]，它会将字符串替换为客户的名字。

如果我有如下文本：

```
$source = 'Hello [FNAME-fallback="there"]'; 
```

我想要做的是将 FNAME 替换为`$customer->fname`是否存在，否则将其替换为后备。

困难在于，用户也可以输入，`[FNAME]`然后它应该只尝试替换而没有任何回退，并且即使没有设置名字，也明显删除 [FNAME]。

我已经做到了：

```
$personalisations = array(
    'FNAME',
    'LNAME',
    'CNAME'
);

$match  = '/\[(?:' . implode('|', $personalisations) . ')(?:\-[\s]*fallback=\")*(.{0,})\"\]/i';
$replace    = '$1';
$source     = 'Hello [FNAME-fallback="there"]';

$text   = preg_replace($match, $replace, $source); 
```

该部分在用“there”替换 FNAME 时效果很好，但我需要考虑到可能没有`'-fallback="there"'`给定的，如果它不是空的，我也需要用它替换它`$customer->fname`。所以大概，我需要找到哪个它匹配为 $1 的个性化设置，然后设置：

```
$replace = !empty($customer->fname) ? $customer->fname : '$1' 
```

还需要考虑它可能是 fname、lname 或 cname 等。

我不确定我是否会因为尝试在一个函数中执行全部任务而混淆问题，但实际上我需要最有效的方法，因为该函数将为每个客户一遍又一遍地运行。任何正则表达式英雄都可以用这个为我指明正确的方向吗？我想我走对了，但我无法理解最后一部分......

谢谢，

基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:19:15.613

如果您改为在模板之外的单独字段中提供默认值，则可以执行以下操作：

```
$personalisations = array(
    'FNAME',
    'LNAME',
    'CNAME'
);

$defaults = array(
    'FNAME' => 'first',
    'LNAME' => 'last',
    'CNAME' => 'class',
);

$match = array();
$replace = array();

for ($personalinations as $key) {
    $match[] = "/[$key]/";
    if (isset($customer->$key)) {
        $replace[] = $customer->$key;   
    } else { 
        $replace[] = $defaults[$key];
    }
}

$source     = 'Hello [FNAME-fallback="there"]';

$text = preg_replace($match, $replace, $source); 
```

这应该在一个`$source`. 我仍然认为模板引擎会更健壮，如果您需要进行更改，维护起来会更容易。

# java - swing layout - 使用多个 JEditorPanes 滚动的中心面板

> ID：12826016
> 
> 赞同：1
> 
> 时间：2012-10-10T18:32:22.353
> 
> 标签：java, swing, jpanel, jscrollpane

我无法让 Swing 布局做我想做的事。我希望包含两个 JEditorPanes 的中心面板在它包含相等（固定）高度的“n”个窗格时滚动。
我一直在玩 Netbean 的 UI 设计器，试图让它工作
jPanel3 是中心面板
jEditorPane4 和 5 是一些示例编辑器窗格（这些将包含评论）

```
public class GBugForm1 extends javax.swing.JFrame {

public static void main(String[] args)
{
    GBugForm1 form;
    form = new GBugForm1();
    form.setDefaultCloseOperation(javax.swing.JDialog.DISPOSE_ON_CLOSE);
    form.setSize(500,500);
    form.setVisible(true);
}

/**
 * Creates new form GBugForm
 */
public GBugForm1() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jPanel3 = new javax.swing.JPanel();
    jScrollPane6 = new javax.swing.JScrollPane();
    jEditorPane4 = new javax.swing.JEditorPane();
    jScrollPane4 = new javax.swing.JScrollPane();
    jEditorPane5 = new javax.swing.JEditorPane();
    jPanel4 = new javax.swing.JPanel();
    jPanel2 = new javax.swing.JPanel();

    setPreferredSize(new java.awt.Dimension(500, 460));
    setLayout(new java.awt.BorderLayout());

    jPanel1.setLayout(new java.awt.BorderLayout());

    jPanel3.setLayout(new javax.swing.BoxLayout(jPanel3, javax.swing.BoxLayout.PAGE_AXIS));

    jEditorPane4.setPreferredSize(new java.awt.Dimension(106, 200));
    jScrollPane6.setViewportView(jEditorPane4);

    jPanel3.add(jScrollPane6);

    jScrollPane4.setViewportView(jEditorPane5);

    jPanel3.add(jScrollPane4);

    jPanel1.add(jPanel3, java.awt.BorderLayout.CENTER);

    jPanel4.setPreferredSize(new java.awt.Dimension(492, 105));

    javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
    jPanel4.setLayout(jPanel4Layout);
    jPanel4Layout.setHorizontalGroup(
        jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 500, Short.MAX_VALUE)
    );
    jPanel4Layout.setVerticalGroup(
        jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 105, Short.MAX_VALUE)
    );

    jPanel1.add(jPanel4, java.awt.BorderLayout.PAGE_START);

    add(jPanel1, java.awt.BorderLayout.CENTER);

    jPanel2.setPreferredSize(new java.awt.Dimension(400, 40));

    javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 500, Short.MAX_VALUE)
    );
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 40, Short.MAX_VALUE)
    );

    add(jPanel2, java.awt.BorderLayout.SOUTH);
}// </editor-fold>

// Variables declaration - do not modify
private javax.swing.JEditorPane jEditorPane4;
private javax.swing.JEditorPane jEditorPane5;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JPanel jPanel3;
private javax.swing.JPanel jPanel4;
private javax.swing.JScrollPane jScrollPane4;
private javax.swing.JScrollPane jScrollPane6;
// End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T20:19:17.983

这是一个可以指导您进一步努力的[sscce 。](http://sscce.org/)指定每个面板的首选大小以强制显示滚动条；同样，设置框架的整体大小（在 之后`pack()`）以强制出现外部滚动条。有关更多信息，请参阅此[问答](https://stackoverflow.com/q/7229226/230513)。还要注意使用符合[RFC 2606](http://tools.ietf.org/rfc/rfc2606.txt)的URL。

顺便说一句，您可能应该在过度依赖 GUI 编辑器之前 研究[布局。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

![图片](../Images/309fafe6f2f90203de4e60ae973b0ddb.png)

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.io.IOException;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

/**
 * @see https://stackoverflow.com/a/12827643/230513
 * @see https://stackoverflow.com/questions/4755524
 */
public class HtmlView extends JPanel {

    private static final String EXAMPLE = "http://www.example.com";
    private final JEditorPane jep;

    public HtmlView(String url) {
        super(new GridLayout(1, 1));
        jep = new JEditorPane();
        try {
            jep.setPage(EXAMPLE);
        } catch (IOException ioe) {
            ioe.printStackTrace(System.err);
        }
        jep.setEditable(false);
        this.add(new JScrollPane(jep));
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(600, 200);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                JPanel panel = new JPanel(new GridLayout(0, 1));
                panel.add(new HtmlView(EXAMPLE));
                panel.add(new HtmlView(EXAMPLE));
                panel.add(new HtmlView(EXAMPLE));
                f.add(new JScrollPane(panel));
                f.pack();
                f.setSize(640, 480);
                f.setVisible(true);
            }
        });
    }
} 
```

# ruby - 使用 Sinatra 时如何控制静态资产的缓存？

> ID：12826017
> 
> 赞同：11
> 
> 时间：2012-10-10T18:32:23.243
> 
> 标签：ruby, heroku, sinatra

我正在使用最新的 Sinatra，并且在 Heroku 上托管。有没有办法可以为从`/public`目录提供的静态资产设置缓存标头？

Sinatra 在检查任何已定义的路由之前从`/public`目录中提供文件，因此我不能只`cache_control`使用路由中的方法。

该`/public`目录包含我的应用程序的 CSS 和 JavaScript。我不希望浏览器每次都下载这些文件，因为它们不会经常更改。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T21:51:17.133

您可以使用该[`static_cache_control`设置](http://www.sinatrarb.com/intro.html#Available%20Settings)`Cache-Control`为Sinatra 提供的静态文件设置标头：

```
set :static_cache_control, [:public, max_age: 60 * 60 * 24 * 365] 
```

请注意，您需要使用显式数组`[...]`。

这也将适用于`public`目录中的所有文件，即您不能为 css 和 javascript 文件指定不同的标题。

（如果您*没有*使用 Heroku 并且使用 Apache 或 Nginx 来提供静态文件，那么这将不起作用，在这种情况下，您需要单独配置您的网络服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:38:00.613

我使用以下方法创建了一个简单的 Sinatra 站点：

```
#!/usr/bin/env ruby

require 'sinatra'

get '/public/*' do
  cache_control :public, max_age: 60 * 60 * 24 * 365
  'this is public'
end

get '/' do
    'hello world!'
end 
```

当我请求“ `/`”时，我得到了这些标题：

```
x-frame-options: sameorigin
x-xss-protection: 1; mode=block
Content-Type: text/html;charset=utf-8
Content-Length: 12
Connection: keep-alive
Server: thin 1.5.0 codename Knife

200 OK 
```

当我要求' `/public/foo`'时，我得到了这些：

```
x-frame-options: sameorigin
x-xss-protection: 1; mode=block
Content-Type: text/html;charset=utf-8
Cache-Control: public, max-age=31536000
Content-Length: 14
Server: thin 1.5.0 codename Knife

200 OK 
```

它正在 Ruby 1.9.3p194 上处理当前的 Sinatra (1.3.3)。

# node.js - 调用 .post() API-简单

> ID：12826018
> 
> 赞同：0
> 
> 时间：2012-10-10T18:32:24.637
> 
> 标签：node.js

我正在使用 API-easy ，如何在 _id_user 中获得此结果并将调用发送到 .post() 谢谢。例如

```
var APIeasy = require('api-easy'),
    assert  = require('assert');

var _id_user;

var suite = APIeasy.describe('Test User');
suite.use('localhost', 3000)
     .discuss('Test')
     .setHeader('Content-Type', 'application/x-www-form-urlencoded')
      .post('/user/authenticate', {data: '{"email":"emailuser@email.com","password":"123456"}')
        .expect('should respond with ID user', function (err, res, body) {
            _id_user = body;    //  I need this result to be sent in the next call .post()
        }).next()
      .post('/user/validate',{ data : _id_user}) // this result always comes null 
        .expect('should respond TRUE', function (_err, _res, _body) {
 }).export(module); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T09:15:51.777

处理这个问题的正确方法是使用 before() 调用来修改你的 post 参数。您可以直接修改“传出”请求的内容。

```
var APIeasy = require('api-easy'),
    assert  = require('assert');

var suite = APIeasy.describe('Test User');
suite.use('localhost', 3000)
     .discuss('Test')
     .setHeader('Content-Type', 'application/x-www-form-urlencoded')
      .post('/user/authenticate', {data: '{"email":"emailuser@email.com","password":"123456"}')
        .expect('should respond with ID user', function (err, res, body) {
            suite.before('setUserId', function(outgoing) {
                //use outgoing.body for post requests and outgoing.uri for get requests
                outgoing.body = outgoing.body.replace('_ID_USER',body);
                return outgoing;
            });    

        }).next()
      .post('/user/validate',{ data : '_ID_USER'}) 
        .expect('should respond TRUE', function (_err, _res, _body) {
            //you can unbefore() here if you need it
            suite.unbefore('setUserId');
 }).export(module); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-11T01:19:28.323

这是因为回调函数的异步性质。在回调函数中做第二篇文章，即之后`_id_user=body;`

# c# - 参数化查询后的 WebMatrix SQL 注入和 XSS 问题

> ID：12826020
> 
> 赞同：2
> 
> 时间：2012-10-10T18:32:34.560
> 
> 标签：c#, security, validation, razor, webmatrix

我有一个关于 WebMatrix razor (C#) 安全性的简单问题

我（在很短的一段时间内）考虑使用字符检查来帮助验证表单以对抗 SQL 注入，但是，在意识到参数化查询是解决这个问题的最佳方法之后，我已经注释掉了这个看起来像这样的检查：

```
 foreach(char c in POIName)
    {
        if(c=='\'' || c=='$' || c=='\"' || c=='&' || c=='%' || c=='@' || c=='-' || c=='<' || c=='>')
        {
            errorMessage = "You have entered at least one invalid character in the \"POI Name\" field. Invalid characters are: [\'], [\"], [&], [$], [@], [-], [<], [>], and [%]";
        }
    } 
```

现在，我的问题是：我应该完全删除这样的行，因为它们是不需要的（以允许文本区域中的最大用户自由等），还是应该仍然有一些特定于 WebMatrix 的字符检查（或者不是特定于它）事情）。

也许不允许“@”或“;” 或“<”或“>”？？

据我了解，将查询参数化（正如我所拥有的）自动转义有害字符并将整个内容重新包装为字符串（或者无论如何，哈哈），并且我的数据库已被证明不受任何 SQL 注入攻击我已经扔了。

我想我很担心，因为我不确定剃刀是否会受到影响，或者我是否应该担心 XSS（不，我不是博客或任何应该接受 html 标签甚至任何类型的尖括号的东西）。

抱歉，如果这个问题到处都是，但我不知道在哪里可以找到 Stack Overflow 通常提供的确切答案（例如，我相信这个社区比一些谷歌搜索要多得多，这我保证我在发布之前已经尝试过）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:04:13.193

好的，这里有两点。您正在谈论参与“黑名单”以清除用户输入。更好的方法是“[白名单](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)”。定义允许的字符是什么。攻击者可以通过多种方式创造性地绕过快速构建的黑名单。

其次，[XSS](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)是一个狡猾的野兽。编码和白名单可以用来对抗它。我建议查看[Microsoft 的 Ant-XSS 库](http://wpl.codeplex.com/)以获取建议。但通常，您会想要使用适合您要保护的页面部分的编码。

总之，我能给你的最好建议是熟悉 OWASP，特别是[OWASP Top 10](https://www.owasp.org/index.php/Top_10_2010-Main)。这是保护您的应用程序的绝佳资源。

# ios - DidDisappear 从另一个线程调用并且有延迟

> ID：12826025
> 
> 赞同：1
> 
> 时间：2012-10-10T18:32:45.107
> 
> 标签：ios

在自定义表格视图单元格中按下按钮后，我执行异步操作并在选择器回调调用中：

[`self performSegueWithIdentifier:SEGUE_PURCHASE_SEGUE sender:self];`

所以调用下一个回调：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
} 
```

我可以在日志中看到新屏幕的`viewDidLoad and viewWillAppear`方法已经被调用，但是下一个屏幕只会在这之后的几秒钟内显示。

这里可能有什么问题？

**代码：**

```
-(void) moveToPurchaseScreen{

     NSLog(@"view1 moveToPurchaseScreen");

    [self performSegueWithIdentifier:SEGUE_PURCHASE_SEGUE sender:self];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    NSLog(@"view1 prepareForSegue");
//    
//    BSPurchaseViewController *purchaseViewController = [segue destinationViewController];    
//    purchaseViewController.pngImage = [BSSharedObject getInstance].createdImage;
////    [[BSPopupManager getInstance]closeWaitingPopup];
//    
//    
//     NSLog(@"2");
}

-(void)viewDidDisappear:(BOOL)animated{
    NSLog(@"view1 DidDisappear");
}

2012-10-10 21:51:15.644 BarneyShop[4961:11603] view1 moveToPurchaseScreen
2012-10-10 21:51:15.646 BarneyShop[4961:11603] view1 prepareForSegue
2012-10-10 21:51:15.647 BarneyShop[4961:11603] view2 viewDidLoad
2012-10-10 21:51:15.648 BarneyShop[4961:11603] view2 viewWillAppear
2012-10-10 21:51:23.812 BarneyShop[4961:f803] view1 DidDisappear 
```

**编辑2：**

```
[purchase initPurchase: self withSelector:@selector(moveToPurchaseScreen)andProduct:product];

-(void) initPurchase:(id)object withSelector:(SEL)selector andProduct:(Product *)product{

    [operationQueue cancelAllOperations];

    NSInvocationOperation *downloadImageOperation = [[NSInvocationOperation alloc] initWithTarget:[BSImageDownloader getInstance] selector:@selector(downloadImageSync:) object:URL_DOWNLOAD_IMAGE];

    NSInvocationOperation *createImageOperation = [[NSInvocationOperation alloc] initWithTarget:[BSImageCreator getInstance] selector:@selector(createImage:) object:product];

    NSInvocationOperation *saveImageOperation = [[NSInvocationOperation alloc] initWithTarget:[BSImageSaver getInstance] selector:@selector(saveImageAsPng:) object:nil];

    NSInvocationOperation *callbackOperation = [[NSInvocationOperation alloc] initWithTarget:object selector:selector object:nil];

    [createImageOperation addDependency:downloadImageOperation];
    [saveImageOperation addDependency:createImageOperation];
    [callbackOperation addDependency:saveImageOperation];

    [operationQueue addOperation:downloadImageOperation];
    [operationQueue addOperation:createImageOperation];
    [operationQueue addOperation:saveImageOperation];
    [operationQueue addOperation:callbackOperation];    

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:58:14.710

在你的方法中：

```
-(void)viewDidDisappear:(BOOL)animated {

    [super viewDidDisappear:animated]; // <-- Try adding this.

    NSLog(@"view1 DidDisappear");
} 
```

让我知道这是否加快了您的流程。我还注意到这个方法是从不同的线程调用的。你是手动调用吗？

**编辑**

也试试这个：

```
-(void) moveToPurchaseScreen{

    NSLog(@"view1 moveToPurchaseScreen");

    dispatch_async(dispatch_get_main_queue(), ^{
        [self performSegueWithIdentifier:SEGUE_PURCHASE_SEGUE sender:self];
    });
} 
```

# unit-testing - 在具有一个入口点的多模块 GWT 应用程序中，有没有办法仅在入口点 GWT 模块中从子模块运行 GWT 测试？

> ID：12826026
> 
> 赞同：1
> 
> 时间：2012-10-10T18:32:48.600
> 
> 标签：unit-testing, gwt, testing, maven

作为补充说明，我们使用 Maven 管理我们的项目构建。

假设我们有三个 GWT 模块，其中只有一个有入口点。其他两个模块由包含入口点的模块继承。

我们练习 MVP 并努力将我们的大部分测试保持为正常的 JUnit 测试，但是一些集成测试要求我们使用 GWTTest。我们将这些保持在最低限度。

我们希望将实际测试与包含它们正在测试的代码的模块一起保留。我的想法是确保 maven 只为子模块构建执行 JUnit 测试。子模块中的 GWTTests 将被汇总到一个测试套件中。然后，入口点项目将包含一个 GWTTestSuite，它汇总了子模块测试套件以及入口点模块可能具有的其他 GWTTest。

此时，我的问题是入口点 GWTTestSuite 无法解析来自子模块（`"no source code is available........did you forget to inherit a required module"`）的测试。我已经尝试为子模块创建测试罐并将它们作为依赖项添加到测试范围，但是当 GWT 执行主 GWTTestSuite 时，它​​找不到子模块测试套件（或其底层 gwt 测试）。我可以在 .m2 repo 测试 jar 中看到 GWTTests。

那么，如何让 GWT 编译器“看到”子模块测试呢？

更新：我还没有弄清楚如何做到这一点。我能做到的最干净的事情是将普通的 JUnit 测试与子模块放在一起，但将所有模块的所有 GWT 测试保留在主模块中。

# css - 以一种简单且不糟糕的方式在网格上排列带有 CSS 的图像

> ID：12826027
> 
> 赞同：0
> 
> 时间：2012-10-10T18:32:48.943
> 
> 标签：css, position

我有这个网格，58x58 块。这个网格有一个背景图像，我想在某些块上放置一些图像。所以我使用了下面的代码：

```
<div style="position: relative !important; right: 0px" id="div">
   <img src="/6f89ab34.jpg">
</div> 
```

这只是痛苦，因为每个元素都与之前的元素相关。

有没有更好更聪明的方法来解决这个问题？

例如，您可以说将图像 1 放在第 1 行第 2 块上，将图像 2 放在第 3 行第 4 块上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:38:59.460

有很多方法可以处理它。我建议使用类。一组绝对定位在 x 轴上，另一组绝对定位在 y 轴上。

```
.tile {position: absolute;}

.x1 {left: 0px;}
.x2 {left: 58px;}
.x3 {left: 116px;}

.y1 {top: 0px;}
.y2 {top: 58px;}
.y3 {top: 116px;} 
```

然后可以使用类定位每个项目：

```
<div class="tile x1 y3"> 
```

# c - 使用 dos.h 在 TSR 编程中使用 keep(int,int) 函数

> ID：12826029
> 
> 赞同：2
> 
> 时间：2012-10-10T18:33:02.850
> 
> 标签：c, tsr

在学习 tsr 编程时，我看到了某些我无法理解的代码的使用。

示例 cede 部分是（在 c 中）：（请解释粗体部分）

```
#include "dos.h"
#include"stdio.h"
void interrupt our();
void interrupt (*prev)();
char far *scr=(char far*)0xB8000000L;
int ticks;
unsigned char color;
main()
{   
    prev=getvect(8);   // <<<<<
    setvect(8,our);    // <<<<<
    keep(0,10000);     // <<<<<
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:29:45.717

该程序安装一个中断处理程序。它使用中断号 8，[系统定时器中断](http://www.ctyme.com/intr/rb-0043.htm)。这是使用此中断在运行 DOS 的机器上“连续”执行操作的常见做法。

```
prev=getvect(8); 
```

此行获取*中断向量*，即系统每秒调用 18 次的函数的指针。

```
setvect(8,our); 
```

这一行设置了*中断向量*，也就是告诉系统调用这个函数，而不是旧函数，每秒18次。请注意，为了避免崩溃，新函数必须调用旧函数，除了它的主要目的（这似乎是*改变 characters 的大小写*）。

```
keep(0,10000); 
```

这一行使程序带有退出代码（ *success*`0`的常规值）并告诉 DOS 将字节（或者可能是 16 字节单位？不太可能；我不记得）留在 RAM 中。这与程序 ( ) 的正常完成不同，其中 DOS 将程序先前占用的所有 RAM 标记为空闲。*`10000``exit(0)`*

 *TSR 程序崩溃的一个常见原因是`keep`结尾的缺失。DOS释放函数代码占用的内存`our`，在接下来的1/18秒内，随机执行一段代码。

有关详细信息，请参阅[Int 21/AH=31h](http://www.ctyme.com/intr/rb-2723.htm)。

另请注意，参数 to`keep`应该通过操作一些地址来计算，这样你就不会占用太多内存，另一方面，要占用足够的内存来包含函数的代码`our`，它执行你需要的东西。该值`10000`只是一个示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:59:03.083

如果您阅读我在 TSR 上发布的类似问题的答案，您将部分理解此代码

[如何编写更改字符大小写的 TSR](https://stackoverflow.com/a/12826195/986760)

这里最重要的是

**远指针：**由于 16 位 DOS 使用段偏移寻址方案，您的正常近指针无法访问超出其分配段的 64K 的内存。您必须阅读详细信息才能理解它。

**显存地址**：这个 B8000000 是你需要远指针的地址。这个地址的特殊之处在于，从这个位置开始的字节（等于屏幕分辨率*2）被直接复制到显存中。

**因此，如果您在间接后将字符分配给指针地址，它将打印在屏幕上**

就像是

```
char * far p = 0xB8000000;

*p = 'a'; // this would actually print a on screen at left top 
```

向前循环以到达屏幕的其余部分。

yashwant kanetkar 的 ac 书对此有很多参考。我记得很多年前我在本科时使用过它。

其余的只是在 dos.h 中索引 api。如果您不了解任何内容，为什么不仔细阅读他们的描述并回到这里？*

# c++ - C++ 类指针没有保存任何东西。

> ID：12826038
> 
> 赞同：1
> 
> 时间：2012-10-10T18:33:25.493
> 
> 标签：c++, class, pointers

以下是我面临的问题的一个小规模示例。在下面的示例中，我使用 int 指针，但在我自己的代码中，我实际上使用的是指向另一个类（节点类）的指针。

问题似乎是我正在使用按值指针调用（如果有这样的事情）。我不知道，我认为指针是通过引用。
我确实需要能够将多个指针传递给该方法，并且我真的不想为每个指针编写一个特定的方法。
当然，当我运行代码时，我会遇到某种错误，因为它试图访问尚未分配的指针。我不明白为什么如果我传递我想要的特定指针它不会初始化正确的指针。

任何帮助将不胜感激。

```
#include <iostream>

using namespace std;

class Test {
  private:
    int *p1;   
    int *p2;
    int sizeP1;
    int sizeP2;   
  public:
    int* getIntPointer() {return p1;}
    void initializeP1(int *ip,int n){
        sizeP1=n; 
        ip=new int[n];

        for(int i=0;i<n;i++)
            p1[i]=i;         
    }  
    void printP1() {
        for(int i=0;i<sizeP1;i++)
            cout<<p1[i]<<" "; 
    }
};

int main() {
    Test t;
    t.initializeP1(t.getIntPointer(),10);
    t.printP1(); //this fails.. but why? How can I fix it?

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:35:45.497

问题是你初始化`ip`并填充`p1`

```
void initializeP1(int **ip,int n){
        sizeP1=n; 
        *ip=new int[n];

        for(int i=0;i<n;i++)
            *ip[i]=i;         
    }  
//call with p1

initializeP1(&p1, 10); // pass pointer to pointer so you can get return value. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:35:03.533

问题是您的函数将内存分配给作为参数的指针的副本 - 此副本在函数退出时丢失。通过引用传递指针，而不是通过更改函数签名

```
 void initializeP1(int* &ip,int n){
                         ^ 
```

这样分配的内存仍然可以访问，并且您的指针将指向它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:44:30.137

`initializeP1`将您的功能更改为以下内容会不会更容易：

```
int * initializeP1(int n)
{
    sizeP1 = n; 
    p1 = new int[n];

    for(int i = 0; i < n; ++i)
        p1[i] = i;
    return ip;
} 
```

但是，这仍然存在问题，例如您可以重复调用它并导致大量内存泄漏。

最好为您的类使用适当的构造函数来执行 initializeP1 所做的操作，如下所示：

```
Test(int n)
{
    sizeP1 = n; 
    p1 = new int[n];

    for(int i = 0; i < n; ++i)
        p1[i] = i;
    return ip;
} 
```

指针不是通过引用传递的，不。指针是值类型。如果您绝对必须让它看起来像这样，您会想要使用参考，但这是对语法的滥用，您应该以不同的方式来做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:36:19.073

对 t.getIntPointer() 的调用返回一个未初始化为合理值的指针。对 initializeP1() 的调用正在更新一个整数数组。但是要小心，这个分配的内存块不会被释放，直到你通过写“delete [] p1;”告诉它。

# javascript - 关于如何组合使用相同数据的 2 个 Handlebars 模板的建议？

> ID：12826044
> 
> 赞同：0
> 
> 时间：2012-10-10T18:33:39.450
> 
> 标签：javascript, jquery, templates

我目前正在学习如何使用 Handlebars 进行模板化，并且想要一些关于如何将以下 2 个模板组合为 1 个并更新我的脚本以使每个按钮仍显示正确的值集的建议？

**模板**

```
<script type="text/x-handlebars" id="infoTemp">
    {{#each films}}
    <li>
        <h2>{{title}}</h2>
        <p>{{{description}}}</p>        
    </li>
    {{/each}}
</script>
<script type="text/x-handlebars" id="additionalInfoTemp">
    {{#each films}}
    <li>
        <h1>{{id}}</h1>
        <h2>{{title}}</h2>
        <p>{{{description}}}</p>
        <small>{{released}}</small>        
    </li>
    {{/each}}
</script> 
```

**JS**

```
// Dummy data
data = {
    "films": [
    {
        "id": "1",
        "title": "The Shawshank Redemption",
        "description": "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.",
        "released": "2012-09-17 00:00:00"
    },
    {
        "id": "2",
        "title": "The Godfather",
        "description": "The aging <b>patriarch of an organized</b> crime dynasty transfers control of his clandestine empire to his reluctant son.",
        "released": "2012-09-17 00:00:00"
    }
    ]
}

var $info = $('#info');
var source;
//Grab contents of template

function templateData(id){
    if( id == 'add1' ){
        source = $("#infoTemp").html();
    } else {
        source = $("#additionalInfoTemp").html();
    }

    var template = Handlebars.compile(source);
    $info.append(template(data));
}

//Grab the container div and insert the templated data in

$('button').on('click', function(e){
    var thisData = $(this).data('id');

    $info.html('');

    templateData(thisData);

    e.preventDefault();
}); 
```

**JS 小提琴** [http://jsfiddle.net/2TpJh/2/](http://jsfiddle.net/2TpJh/2/)

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:07:06.057

您可以检查每个变量是否存在，并仅在它们存在时才呈现`h1`和：`released`

```
<script type="text/x-handlebars" id="additionalInfoTemp">
    {{#each films}}
    <li>
        {{#id}}<h1>{{.}}</h1>{{/id}}
        <h2>{{title}}</h2>
        <p>{{{description}}}</p>
        {{#released}}<small>{{.}}</small>{{/released}}
    </li>
    {{/each}}
</script> 
```

# javascript - JavaScript myFunction：函数（int x）与函数 myFunction（int x）？

> ID：12826045
> 
> 赞同：2
> 
> 时间：2012-10-10T18:33:40.060
> 
> 标签：javascript

> **可能重复：**
> [函数表达式与 Javascript 中的声明有什么区别？](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)

在 JavaScript 中声明函数的两种方式有什么区别？

```
myFunction : function(variable) 
{

} 
```

或者

```
function myFunction(variable)
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:51:26.957

您的第一个代码段无效 - 它仅适用于对象；例子：

```
var object = {
    myFunction: function(variable) { }
};
// object.myFunction(); 
```

基本上有两种方法可以在 JavaScript 中定义函数：

```
function myFunction(variable) { }

var myFunction = function(variable) { }; 
```

区别在于：第一种类型的声明使用`function`语句，因此允许您在声明之前使用函数。例子：

```
console.log(myFunction());    // prints test
function myFunction(variable) { return "test"; } 
```

[在此处](https://stackoverflow.com/a/261682/1350193)阅读更多相关信息。

这对于第二种类型的函数声明是不可能的，它将一个匿名函数分配给一个变量。在声明变量之前不能使用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:52:10.447

一是方法。另一个函数。

定义函数

```
function myfunction() {..} 
```

方法已定义

```
myobject.mymethod = function() {...} ; 
```

方法是指向/是该对象的函数的对象的属性

实际上，这取决于您如何构建对象。函数通常用于非对象特定的全局库中，而方法与对象绑定以执行特定的功能。

# php - php重定向到另一个页面

> ID：12826050
> 
> 赞同：0
> 
> 时间：2012-10-10T18:34:13.513
> 
> 标签：php, mysql

我正在使用标题功能根据某些条件定位到另一个页面。我正在监视一个邮箱，代码根据发件人地址重定向到另一个页面。除了一个之外，所有标题都在工作。如果发件人不属于任何现有组，我想将其重定向到 new.php。但它不是重定向。我无法弄清楚为什么。请帮我。

```
<?php 
session_start();

$server = '{server}INBOX';
$username = 'aaa@bbb.com';
$password = 'password';
require_once '../swift/lib/swift_required.php';
include('connection.php');

$connection  = imap_open($server,$username,$password) or die('Cannot connect to Gmail: ' .    imap_last_error());

$_SESSION['connection']=$connection;

$result = imap_search($connection,'UNSEEN');
if($result) {

    rsort($result);

    foreach($result as $email_number) 
    {         

        $header = imap_headerinfo($connection, $email_number);

        $fromaddr = $header->from[0]->mailbox . "@" . $header->from[0]->host;

        $query = "select * from usergroup where email='$fromaddr'";
        $_SESSION['fromaddr']=$fromaddr;

        $result1 = mysql_query($query) or die($query."<br/><br/>".mysql_error());

        while($line=mysql_fetch_array($result1,MYSQL_ASSOC))
        {
            $email=$line['email'];
            $group=$line['group'];

            if(mysql_num_rows($result1) == 1){

                if($group == 1){
                    header("Location: facilitator.php");
                }
                elseif($group == 2){
                    header("Location: learner.php");
                }

            }
            elseif (mysql_num_rows($result1) == 0) {
                header("Location: new.php");
            }

        }
    }

}
elseif (!$result)
{
     echo "No unread messages found";
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:38:34.223

看起来好像您将该重定向嵌套在 while 循环中。由于没有行，while 条件`mysql_fetch_array()`将立即返回`FALSE`并跳过整个块，包括您希望它遵循的重定向。

将测试移到循环`mysql_num_rows()`外。`while`

```
// Test for rows and redirect BEFORE entering the while loop.
if (mysql_num_rows($result1) === 0) {
  header("Location: new.php");
  // Always explicitly call exit() after a redirection header!
  exit();
}
// Otherwise, there are rows so loop them.
while($line=mysql_fetch_array($result1,MYSQL_ASSOC))
{
   $email=$line['email'];
   $group=$line['group'];

   if($group == 1){
     header("Location: facilitator.php");
   }
} 
```

实际上，您可能根本不需要`while`循环，具体取决于您期望获取的行数。如果您只希望每封电子邮件有一组，那么请放弃循环并只调用`$line = mysql_fetch_array()`一次。但是，如果您期望多行但希望在遇到 where 的第一个行上重定向`$group == 1`，那么您的逻辑有效。但是，在这种情况下，由于您只执行重定向而没有其他操作，您不妨将该条件放在查询中：

```
// Test the group in your query in the first place.
$query = "select * from usergroup where email='$fromaddr' AND group = 1";
$result1 = mysql_query($query) or die($query."<br/><br/>".mysql_error());

if (mysql_num_rows($result1) === 0) {
  // you didn't match a row, redirect to new.php
} 
else {
  // you had a match, redirect to facilitator.php
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:37:14.983

简单的一：

改变：

```
elseif (mysql_num_rows($result1) == 0){ 
```

到：

```
else { 
```

中的条件`else if`可能是错误的 - 所以你没有进入那里，因此不会发生重定向。

# image - read.pnm() - 尝试读取 pgm 图像时出错

> ID：12826051
> 
> 赞同：2
> 
> 时间：2012-10-10T18:34:15.063
> 
> 标签：image, r, pgm

我正在尝试读取 R 中的 pgm 文件。我将 wd 设置为图像所在的位置，然后简单地尝试读取它：

```
 setwd("~/3 Diplomado/5 Multivariado/lfwcrop_grey/faces")

   library(pixmap)

    x <- read.pnm(system.file("Aaron_Guiel_0001.pgm", package="pixmap")[1]) 
```

但我收到以下错误：

if (ch == "#") { 中的错误：参数长度为零另外：警告消息：在文件（文件，打开 =“rb”）中：文件（“”）仅支持打开 =“w+”和打开= "w+b": 使用前者

不确定它是什么。我认为它根本找不到图像。我究竟做错了什么？任何提示？提前谢谢你！

J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:58:43.167

只需尝试这个：

```
x=read.pnm(file = "Aaron_Guiel_0001.pgm") 
```

`system.file()`用于查找包中包含的文件的完整路径。它在包示例中使用，但您在读取自己的文件时不需要使用它。

# php - 使用 php 和 javascript 模板

> ID：12826053
> 
> 赞同：1
> 
> 时间：2012-10-10T18:34:17.157
> 
> 标签：php, templates, twig, handlebars.js, mustache.php

目前我正在使用 slim 框架为浏览器提供 html 模板。加载视图后，应用程序从 RESTful API 检索一些信息，并使用 handlebars.js 填充 DOM 的各个方面。

当提供 html 模板时，我想使用诸如 mustache.php 或 twig 之类的 php 模板系统来处理一些非常基本的模板需求。但是，作为 handlebars.js 使用与 mustache.php 和 twig 相同的语法，当使用从 API 检索到的信息填充 DOM 时，我遇到了一些重大冲突。

我目前唯一的解决方案是在 html 模板上执行 str_replace() 而不是使用上述 php 模板解决方案之一。

有没有办法可以使用其中一个 php 模板解决方案和 handlebars.js 而不会发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:27:51.893

处理此问题的最快方法是更改​​服务器端模板中的 Mustache 分隔符。像这样的东西：

```
{{=<% %>=}}
<html>
<head>
  <title><% title %></title>
  <script type="text/x-handlebars-template" id="mytemplate">
    {{# stuff }}{{ otherstuff }}{{/ stuff }}
  </script>
</head>
<body>
  <h1><% title %></h1>
</body>
</html> 
```

这样`<%`，Mustache.php 使用类型分隔符，`{{`而忽略类型分隔符，确保 Handlebars.js 可以使用它们。

如果您想继续使用 Mustaches 作为常规分隔符，您还可以立即更改 Handlebars 模板周围的分隔符：

```
<html>
<head>
  <title>{{ title }}</title>
  {{=<% %>=}}
  <script type="text/template" id="mytemplate">
    {{# stuff }}{{ otherstuff }}{{/ stuff }}
  </script>
  <%={{ }}=%>
</head>
<body>
  <h1>{{ title }}</h1>
</body>
</html> 
```

如果您将车把模板移动到部分：

```
{{=<% %>=}}
<script type="text/template" id="mytemplate">
  {{# stuff }}{{ otherstuff }}{{/ stuff }}
</script> 
```

...分隔符更改仅适用于该部分内部。然后你可以这样做：

```
<html>
<head>
  <title>{{ title }}</title>
  {{> handlebars_templates }}
</head>
<body>
  <h1>{{ title }}</h1>
</body>
</html> 
```

我建议走这条路线，因为它是最易于维护的。

# javascript - 将外部脚本中的 javascript 插入 HTML 中的 javascript

> ID：12826055
> 
> 赞同：0
> 
> 时间：2012-10-10T18:34:17.950
> 
> 标签：javascript, jquery, html, insert, external

我有一些来自外部 JS 文件的 JS，我想将这些 JS 插入 HTML 文件中的 JS 函数中。HTML文件中的JS脚本我是不能动的，所以想知道这个方法能不能实现。

这是我想在 HTML 文件中的 JS 函数中插入的 JS。

```
// FIRST JS TO INSERT
if (OS == "mobile"){
        killVideoPlayer();
    }

// SECOND JS TO INSERT
if (OS == "mobile"){ 
        loadHtmlFiveVideo();
        if (!document.all){
            flvPlayerLoaded = false;
        }
    }else {
        loadVideoPlayer();
    } 
```

然后我想把它插入这里。

```
<script>
function mediaTypeCheck() {
if (bsiCompleteArray[arrayIndex].mediaType == "video") {
// INSERT FIRST JS HERE
    document.getElementById("bsi-video-wrap").style.display = "block";
    document.getElementById('pngBsi').style.display = "block";
    document.getElementById("frame_photo").style.display = "none";
    document.getElementById("relativeFrame").style.display = "block";
    document.getElementById("buy-me-photo-button-bsi").style.display = "none";
// INSTER SECOND JS HERE    
    loadVideoPlayer();
} 
if (bsiCompleteArray[arrayIndex].mediaType == "photo") {
    killVideoPlayer();
    document.getElementById("bsi-video-wrap").style.display = "none";
    document.getElementById('pngBsi').style.display = "block";
    document.getElementById("relativeFrame").style.display = "block";
    document.getElementById("frame_photo").style.display = "block";
    document.getElementById("buy-me-photo-button-bsi").style.display = "block";
    if (!document.all){
        flvPlayerLoaded = false;
    }   
}   
}
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:47:30.860

在 JavaScript 中，您可以随时用新值覆盖变量，包括函数。

从外观上看，您可以用`mediaTypeCheck`您自己的函数替换该函数，该函数可以满足您的需要，然后调用原始函数。

例如

```
(function(){
  // keep track of the original mediaTypeCheck 
  var old_function = mediaTypeCheck;
  // overwrite mediaTypeCheck with your wrapper function
  mediaTypeCheck = function() {
    if ( conditions ) {
      // do whatever you need to, then ...
    }
    return old_function();
  };
})(); 
```

可以从任何脚本加载上述内容，只要它发生在定义 mediaTypeCheck 函数之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:40:09.453

过去对我来说最简单的方法是使用服务器端包含。根据您的后端，您可以设置 PHP 或 ASP 页面或其他任何内容以使用模仿“.js”的 mime 类型进行响应。

我不是 PHP 人，但你会做这样的事情：（如果我的语法不正确，请其他人修复它）

```
<?php 
//adding this header will make your browser think that this is a real .js page
header( 'Content-Type: application/javascript' );
?>

//your normal javascript here
<script>
function mediaTypeCheck() {
if (bsiCompleteArray[arrayIndex].mediaType == "video") {

//here is where you would 'include' your first javascript page
<?php 
      require_once(dirname(__FILE__) . "/file.php");
?>

//now continue on with your normal javascript code
document.getElementById("bsi-video-wrap").style.display = "block";
document.getElementById('pngBsi').style.display = "block";
....... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:22:13.930

你的问题看起来有些奇怪，但似乎是可能的。试试我的快速/肮脏的工作代码并实现你自己的情况：

```
$(document.body).ready(function loadBody(){
var testStr = test.toString();
    var indexAcc = testStr.indexOf("{");
    var part1 = testStr.substr(0, indexAcc + 1);
    var part2 = testStr.substr(indexAcc + 1, testStr.length - indexAcc - 2);
    var split = part2.split(";");
    split.pop();
    split.splice(0,0, "alert('a')");
    split.splice(split.length -1, 0, "alert('d')");
    var newStr = part1 + split.join(";") + ";" + "}";
    $.globalEval(newStr);
    test();
}
function test(){
    alert('b');
    alert('c');
    alert('e');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:55:28.997

您的问题是您无法触摸 html 中的脚本，所以我会说它无法在客户端完成。

如果您至少可以触摸脚本标签（而不是脚本本身），那么您可以添加一个自定义类型来在它执行之前对其进行操作，例如：

```
<script type="WaitForInsert"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T18:37:41.490

不能在 JS 中插入 JS。您*可以*做的是在 DOM 中插入另一个标签，并为外部 JS 文件指定 SRC。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T18:37:45.007

`$.getScript(url)`您可以使用;直接插入 js 文件

如果您有脚本作为文本，那么您可以创建脚本标签。

```
var script = docuent.createElement('script');
script.innerText = text;
document.getElementsByTagName('head')[0].appendChild(script); 
```

# asp.net - 在 ASP.NET 中跨网站共享页面

> ID：12826057
> 
> 赞同：3
> 
> 时间：2012-10-10T18:34:20.613
> 
> 标签：asp.net, webpage, multi-tenant

在我们公司，我们正试图弄清楚如何在 ASP.NET 中创建一个页面并跨域共享它。

我们想为所有客户网站创建一个简单的“购物车”页面，这样我们就可以在`http://ourwebsite.com/thecart.aspx`不重复代码的情况下从中心位置（例如）包含页面，并且仍然能够应用 CSS 样式并为每个客户在页面上进行品牌推广。

我们如何在 ASP.NET 中跨网站共享单个页面？

我们每个客户的网站都在不同的域上，在某些情况下也可能在不同的服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:03:15.480

我认为您想要做的是管理一个页面并让它自动更新您客户网站上的其他页面，理想情况下与“共享资源”相同，不是吗？为此，您不一定需要“共享”页面，您需要一个简单的过程来部署单个页面的多个站点，errr ....我认为？在任何情况下，如果不通过 iframe 加载页面，或者创建一个像“cart.somedomain.net”这样的中心点，然后将信息向后和第四次推送（我假设你会有购物车项目），你需要一个在不同站点上自动发布页面的方法。

即使您要将“购物车”页面设为自己的解决方案，然后将其包含在各个站点中，您仍然会遇到部署问题。我认为您有几个选择，其中一些前面提到过：

1.  创建一个从外部源加载页面的 iframe。
2.  为所有域创建一个中心位置，以将信息推送到其结帐过程（store.somedomain.net 或 somdomain.net/cart.aspx）并相应地处理它。
3.  创建一个应用程序或脚本，自动将更新的资源部署到多个站点（我不知道有什么工具可以做到这一点，否则我会向您提供名称，我很抱歉）。

无论如何，我希望这会有所帮助，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:50:35.457

继承并创建页面作为自定义库中的另一个服务器控件。你当然会在源代码管理中拥有它。

事实上，它不需要是一个“页面”，而是一个自定义的服务器购物车控件。

# php - 如何连接消息

> ID：12826059
> 
> 赞同：0
> 
> 时间：2012-10-10T18:34:23.663
> 
> 标签：php, variables, concatenation

我正在提交一个表单，该表单首先将数据输入数据库，然后编写来自表单字段的消息。我想要的功能是，如果用户重新提交表单（2 或 3 次），应该在同一个变量中组成三个消息？

下面是我如何创建我的消息变量

```
if(isset($_REQUEST['save'])){
$mesg = "<strong>Logging Off at </strong> " . date("d F Y h:i:s A");
$mesg .= "<BR><BR>";
$mesg .= "<strong>Project</strong>: " . $prj_name;
$mesg .= "<BR>";
$mesg .= "<strong>Deliverable</strong>: ". $dlvrbl_name;

$mesg .= "<BR>";
$mesg .= "<strong>Time spent</strong>: " . $time_spent;
$mesg .= "<BR>";
$mesg .= "<strong>Percentage</strong>: " . $percent . "%";
$mesg .= "<BR>";
$mesg .= "<strong>Comments</strong>: " . $comments;
$mesg .= "<BR><BR>";
$mesg .= "Regards,<BR>".$employee;
} 
```

它对于 1 次表单提交工作正常，但是如果我需要在同一个变量中包含 2 或 3 条消息怎么办？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:44:41.347

使用计数器使用数组怎么样？

```
$i = 0;
$mesg[$i] = "<strong>Logging Off at </strong> " . date("d F Y h:i:s A");
$mesg[$i] .= "<BR><BR>";
$mesg[$i] .= ... 
```

然后对于下一条消息：

```
$i++;
$mesg[$i] = "<strong>Logging Off at </strong> " . date("d F Y h:i:s A");
$mesg[$i] .= "<BR><BR>";
$mesg[$i] .= ... 
```

完成后，您可以按照自己的意愿使用`implode`或操作它。

另外，我建议您使用`<br />`而不是`<br>`，并且根据应用程序，您可能需要的只是一个新行`\n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:49:34.257

您可以使用[会话变量](http://www.php.net/manual/en/ref.session.php)，例如`$_SESSION['log']`：

```
session_start();

// ... 

if (isset($_REQUEST['save'])) {
    $message = isset($_SESSION['log']) ? $_SESSION['log'] . '<br>' : '';
    $message .= "<strong>Logging Off at </strong> " . date("d F Y h:i:s A");
    // ...
    $_SESSION['log'] = $message;
} 
```

# android-tabhost - 如何在更改 FragmentTab 时关闭 ActionMode

> ID：12826060
> 
> 赞同：2
> 
> 时间：2012-10-10T18:34:24.950
> 
> 标签：android-tabhost, actionbarsherlock, fragment

我在 FragmentTabs 演示中将 ActionBarSherlock 与 FragmentTabs 一起使用。从我的 TabHost 打开不同的 FragmentTab 时如何关闭 ActionMode。

问候德仁

链接到 ActionBarSherlock 演示：[FragmentTab.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java) / [Tab LoaderCursorSupport.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/LoaderCursorSupport.java)

这里是我的 ActionMode 中的代码：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
  selectedRowId = id;
  mMode = ((SherlockFragmentActivity) getActivity()).startActionMode(new TodoActionMode());
}

private final class TodoActionMode implements ActionMode.Callback {
        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            boolean isLight = DashboardActivity.THEME == R.style.Theme_Sherlock_Light;

            MenuInflater inflater = mode.getMenuInflater();
            inflater.inflate(R.menu.todo_actionmode_menu, menu);

            return true;
        }

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            switch (item.getItemId()) {
            case R.id.menu_todo_actionmode_remove:
                eintragLoeschen(selectedRowId);
                return true;
            case R.id.menu_todo_actionmode_new:
                neuerTask();
                return true;
            default:
                mMode.finish();
                return true;
            }
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {

            mMode = null;
        }
    }

private void eintragLoeschen(final long rowId) {

        //eigenen dialog erstellen
        final Dialog dialog = new Dialog(getActivity());
        dialog.setContentView(R.layout.projekttab_todolist_task_delete_dialog);
        dialog.setTitle(R.string.task_wirklich_loeschen_title);

        //OK und Abbrechen Button zuweisen
        Button dialogButtonAbbrechen = (Button) dialog.findViewById(R.id.button_abbrechen);
        Button dialogButtonOk = (Button) dialog.findViewById(R.id.button_ok);

        //wenn Button Abbrechen gedrueckt wurde
        dialogButtonAbbrechen.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                dialog.dismiss(); //schliese dialog
            }
        });

        //wenn Button Ok gedrueckt wurde        
        dialogButtonOk.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                //TODO Eintrag Löschen auf ArrayAdapter ändern
                Uri uri = ContentUris.withAppendedId(TodoTable.CONTENT_URI, todolist.get((int) rowId).getId());
                getActivity().getContentResolver().delete(uri, null, null);

                mAdapter.remove(todolist.get((int) rowId));
                mAdapter.notifyDataSetChanged();

                mMode.finish();
                dialog.dismiss();
            }
        });

        //zeige dialog
        dialog.show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-27T11:51:29.687

您可以通过像这样调用 addOnPageChangeListener 来关闭操作模式 `viewPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(tabLayout){ @Override public void onPageScrollStateChanged(int state) { if(ActionModeController.mActionMode != null) ActionModeController.mActionMode.finish(); } });`

# ruby-on-rails - 使用 rspec 和 rails 测试嵌套模块

> ID：12826061
> 
> 赞同：5
> 
> 时间：2012-10-10T18:34:28.780
> 
> 标签：ruby-on-rails, ruby, testing, rspec

> **可能重复：**
> [在 rspec 中测试模块](https://stackoverflow.com/questions/1542945/testing-modules-in-rspec)

目前我正在使用 rspec 成功测试我的模块，如下所示：

```
require 'spec_helper'

module Services
  module AppService
    describe AppService do
      describe "authenticate" do
        it "should authenticate the user" do
          pending "authenticate the user"
        end
      end
    end
  end
end 
```

我的模块位于 app/services/services.rb app/services/app_service.rb

但是，是否有更优雅的解决方案来测试我的模块而无需在规范中声明命名空间？我觉得它与我的规格紧密相关，进行更改会引起很多麻烦。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T20:35:38.503

您可以执行以下操作，而不是复制`AppServices`：

```
module Services
  describe AppService do
  end
ene 
```

或者：

```
describe Services::AppService do
end 
```

我更喜欢前者，因为它允许我不完全限定规范中的常量名称（因为一切都在`Services`模块中，首先它看起来与此相关）。

# iphone - iOS 6 自动旋转的问题

> ID：12826062
> 
> 赞同：1
> 
> 时间：2012-10-10T18:34:28.930
> 
> 标签：iphone, objective-c, ios, ipad

我有一个视图控制器，我希望它只以纵向显示，所以我在 iOS 6 中做了以下操作：

```
-(BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

但是，当我旋转设备时，它仍然会变成横向。知道在哪里可以检查这个吗？我放了一个断点，它命中了`supportedInterfaceOrientations`，但它仍然旋转

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:37:34.460

你有导航控制器吗？iOS6 决定什么可以自动旋转的方式已经改变。它正确地为您的视图控制器询问supportedInterfaceOrientations，但它可能向您的导航堆栈层次结构中的另一个元素询问“shouldAutorotate”并接受该答案。如果您的 navigationController/tabviewController 对此问题返回“是”，则它不会咨询您的视图控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:42:56.160

您还应该在应用委托中提供应用支持的方向：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    return UIInterfaceOrientationMaskPortrait;
} 
```

确保正确添加根视图控制器（不将其添加为子视图），但使用以下内容：

```
[window setRootViewController:myVC]; 
```

此外，如果您的视图控制器位于 a 内`UINavigationController`，则应将此类别用于导航控制器：

```
@implementation UINavigationController (autorotate)

- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
}

@end 
```

在 iOS 6 中，只有最顶层全屏控制器的根视图控制器会被询问旋转。这包括`UINavigationController`，这个类不询问它的视图控制器，它直接响应。Apple 现在建议子类化`UINavigationController`以覆盖`supportedInterfaceOrientations's`输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:23:12.210

确保您的**项目设置和 info.plist**仅选择纵向，因为**在**检查支持的方向时，它们的优先级高于应用程序委托

# objective-c - 必须在界面中添加按钮控件作为属性吗？

> ID：12826065
> 
> 赞同：1
> 
> 时间：2012-10-10T18:34:42.680
> 
> 标签：objective-c, xcode

我是 Objective C 的新手，从我看过的教程和书籍中我还没有理解一些基本的东西。对于这个问题，我对按钮是否需要连接到界面中的属性以及连接到 IBAction 方法感到困惑。

似乎是一个可能对其他人有所帮助的简单问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:43:14.003

只有当您需要在视图控制器中对它们进行操作时，您才应该将界面构建器中的项目连接到 IBOutlets。例如，如果您想更改按钮的标题文本以在加载时进行本地化，那么您可以将其连接起来。如果您要做的只是响应按钮上的特定操作（例如，触摸内部），那么您只需要连接 IBAction 部分。简短的回答是您不需要连接 IBOutlet。

# android - 在代码中动态设置边距 - android

> ID：12826067
> 
> 赞同：1
> 
> 时间：2012-10-10T18:34:46.753
> 
> 标签：android, dynamic, tablelayout, tablerow, margins

我有一个仅包含 ScrollView 和 TableLayout 的活动。在我的代码中，我添加了表格行，除边距外一切正常 - 它不起作用（没有任何反应）这是代码：

```
LayoutParams rowparams = new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT);
        rowparams.setMargins(10, 10, 10, 10);
        for (int i = 0; i < obiekty + 1; i++) {
            rowparams.setMargins(10, 10, 10, 10);
            trs[i] = new TableRow(MainActivity.this);
            trs[i].setGravity(Gravity.CENTER_VERTICAL);
            trs[i].setLayoutParams(rowparams);
            trs[i].setBackgroundColor(Color.parseColor("#33B5E5"));

        }

tvs[licznik].setText(nazwa);
            tvs[licznik].setBackgroundColor(Color.parseColor("#000000"));
            tvs[licznik].setGravity(Gravity.CENTER_VERTICAL);
            iv[licznik].setImageResource(obraz);
            iv[licznik].setBackgroundColor(Color.parseColor("#FFBB33"));
            trs[licznik].addView(tvs[licznik]);
            trs[licznik].addView(iv[licznik]);
            tl.addView(trs[licznik]); 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:14:41.390

采用`TableLayout.LayoutParams`

```
TableLayout.LayoutParams rowparams = new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT); 
```

# testing - 无法从 VS 2012 中的测试资源管理器运行测试

> ID：12826068
> 
> 赞同：1
> 
> 时间：2012-10-10T18:34:47.513
> 
> 标签：testing, visual-studio-2012

我最近安装了 Visual Studio 2012 的发行版，并且在使用测试资源管理器时遇到了很多问题。例如，当我在测试资源管理器中右键单击一个测试以选择它并选择“调试选定的测试”时，它会为我运行测试，但不是在调试模式下 - 它永远不会遇到我在测试中设置的任何断点. 此外，如果我在测试资源管理器中右键单击一个测试以选择它，然后从出现的上下文菜单中“打开测试”，则没有任何反应，测试不会打开。

我想看看其他人是否在 VS 2012 测试资源管理器中看到了类似的问题，以及可以采取哪些措施来解决这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:41:29.390

在您的解决方案构建配置中，测试项目是否设置为构建？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:22:10.370

这似乎是 Visual Studio 2012 中的一个错误。我目前使用的解决方法是从 Resharper 的测试接口运行测试。希望很快会有解决问题的方法。

# xml - 从数据库中读取大量数据并将其写入 XML

> ID：12826070
> 
> 赞同：2
> 
> 时间：2012-10-10T18:34:48.920
> 
> 标签：xml, jdbc, jaxb

我们正在通过 JAXB 创建一个 XML 文件，用于从一个地方到另一个地方的数据流，并且我们正在从数据库中获取数据。现在我的问题是我们有非常大量的数据，并且我们正在使用 JDBC 进行数据库连接。一段时间后，我们收到“内存不足错误”。我们还将 -Xms 和 -Xmx 的值内存值增加到 eclipse 允许的最大值。从这个站点得到了设置批量大小的解决方案，但这个问题仍然存在。我们必须为数据库中存在的所有数据创建一个 XML。请建议我一些解决方案。

提前感谢。阿比马纽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:23:13.713

我建议编组到 aa StAX `XMLStreamWriter`。通过这种方式，您可以读取一大块数据，然后使用 JAXB 对其进行编组，然后再执行其他块，直到所有数据都写入 XML。

# symfony - VichUploaderBundle 和 AvalancheImagineBundle

> ID：12826071
> 
> 赞同：5
> 
> 时间：2012-10-10T18:34:50.397
> 
> 标签：symfony, symfony-2.1

我使用 VichUploaderBundle 上传我的媒体文件，我想使用 AvalancheImagineBundle 在我的模板中创建拇指。应该怎么做？

我现在有这个：

```
<td><img src="{{ vich_uploader_asset(entity, 'image') | apply_filter('my_thumb')}}" alt="{{ entity.nombre }}" /></td> 
```

但输出是：

```
<img src="/app_dev.php/media/cache/my_thumb/images/uploads/392158_10150441208223772_580903771_8591661_774015725_n.jpg" alt="Froga"/> 
```

这是我的 config.yml：

```
# Vich Uploader
vich_uploader:
    db_driver: orm
    twig: true
    gaufrette: false # set to true to enable gaufrette support
    storage: vich_uploader.storage.file_system
    mappings:
        uploads:
            uri_prefix: /images/uploads
            upload_destination: %kernel.root_dir%/../web/images/uploads
            namer: ~ # specify a file namer service id for this entity, null default
            directory_namer: ~ # specify a directory namer service id for this entity, null default
            delete_on_remove: true # determines whether to delete file upon removal of entity
            inject_on_load: true # determines whether to inject a File instance upon load

avalanche_imagine:
    source_root:  %kernel.root_dir%/../web/images/uploads
    web_root:     %kernel.root_dir%/../web/images/uploads
    cache_prefix: media/cache
    driver:       gd
    filters:
        my_thumb:
            type:    thumbnail
            options: { size: [120, 90], mode: outbound, quality: 100, format: png } 
```

任何帮助或线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:24:17.720

如果您遇到的问题是没有显示图像，那么我遇到了同样的问题。

为了解决它，我确保在我的 config.yml 中，将 avalanche_imagine 的`source_root`和`web_root`选项设置为`%kernel.root_dir%/../web`（或您的 Web 根目录）。这是我的 config.yml 中的相关片段：

```
#Uploads
knp_gaufrette:
    adapters:
        article_adapter:
            local:
                directory: %kernel.root_dir%/../web/images/articles
    filesystems:
        article_image_fs:
            adapter:    article_adapter
vich_uploader:
    db_driver: orm
    gaufrette: true
    storage: vich_uploader.storage.gaufrette
    mappings:
        article_image:
            uri_prefix: /images/articles
            upload_destination: article_image_fs
            namer: vich_uploader.namer_uniqid

#images
avalanche_imagine:
    filters:
        article_list:
            type:    thumbnail
            options: { size: [100, 100], mode: outbound }
    source_root:  %kernel.root_dir%/../web
    web_root:     %kernel.root_dir%/../web
    cache_prefix: cache 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T13:12:47.953

就我而言，我选择使用`LiipImagineBundle`which 是`AvalancheImagineBundle` .

我将这个捆绑包配置为使用 gaufrette 作为数据加载器，而不是像你描述的那样简单地使用它，而不关心路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:52:20.713

没有错。想象一下，生产中的捆绑包在第一次调用时会生成缩略图并将其存储在 web/media 文件夹中。在第二次调用时，它只是从网络/媒体中读取。随意修改缩略图大小有一些优点。如果您担心性能，您应该在上传完成后启动一些工作以生成缩略图，尽管我就是这样使用它并且从未抱怨过。

# c# - 树数组到站点地图

> ID：12826075
> 
> 赞同：0
> 
> 时间：2012-10-10T18:35:04.800
> 
> 标签：c#, php, c++, arrays

我有两个学校的家庭作业问题，我看了好几遍都没有弄明白

我有这个数组

数组[10][10][10]

```
id  parent  value
1   0       X
2   1       Y
3   1       Z
4   3       A
5   2       B
6   5       C
7   3       D
8   9       E
9   4       F
10  2       G 
```

我想要的是基于父列生成站点地图。

```
Example
1 must be at the root
2 and 3 must be childs of 1
10 and 5 must be childs of 2
... and so on. 
```

我想如果我能生成一个像

```
<object id="1" value="X">
    <object id="2" value="Y">
        <object id="10" value="G">
        </object>
        <object id="5" value="B">
        </object>

        ... and so on ...

    </object>
</object> 
```

和一个数组

```
array(
    id = > 1
    array
); 
```

我不看它实际上看起来如何，也许是这样的

```
$array = array(
    "foo" => "bar",
    42    => 24,
    "multi" => array(
         "dimensional" => array(
             "array" => "foo"
         )
    )
); 
```

第二个问题我稍后会发布。我为此使用 PHP，但 C++ 和 C# 也可以，因为算法很重要。任何帮助都将不胜感激，因为我对此非常好奇！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:20:28.820

我相信你的阵列看起来像这样

```
$list = array();
$list[] = array("id" => 1,"parent" => 0,"value" => "X");
$list[] = array("id" => 2,"parent" => 1,"value" => "Y");
$list[] = array("id" => 3,"parent" => 1,"value" => "Z");
$list[] = array("id" => 4,"parent" => 3,"value" => "A");
$list[] = array("id" => 5,"parent" => 2,"value" => "B");
$list[] = array("id" => 6,"parent" => 5,"value" => "C");
$list[] = array("id" => 7,"parent" => 3,"value" => "D");
$list[] = array("id" => 8,"parent" => 9,"value" => "E");
$list[] = array("id" => 9,"parent" => 4,"value" => "F");
$list[] = array("id" => 10,"parent" => 2,"value" => "G"); 
```

你可以试试

```
$xml = new SimpleXMLElement("<data />");
startBuild($list, $xml);
header("Content-Type: text/xml");
echo $xml->asXML(); 
```

输出

```
<?xml version="1.0"?>
<data> <object id="1" value="X">
    <object id="2" value="Y">
        <object id="5" value="B">
            <object id="6" value="C" />
        </object>
        <object id="10" value="G" />
    </object>
    <object id="3" value="Z">
        <object id="4" value="A">
            <object id="9" value="F">
                <object id="8" value="E" />
            </object>
        </object>
        <object id="7" value="D" />
    </object>
</object> 
</data> 
```

使用的功能

```
function startBuild(array $array, SimpleXMLElement $xml, $no = 0) {
    $child = hasChildren($array, $no);
    if (empty($child))
        return "";

    foreach ( $child as $value ) {
        $xChild = $xml->addChild("object");
        $xChild->addAttribute("id", $value['id']);
        $xChild->addAttribute("value", $value['value']);
        startBuild($array, $xChild, $value['id']);
    }
    return true;
}

function hasChildren($array, $id) {
    return array_filter($array, function ($var) use($id) {
        return $var['parent'] == $id;
    });
} 
```

# c# - 如何通过另一个 DLL 访问 DLL 中的命名空间？

> ID：12826084
> 
> 赞同：3
> 
> 时间：2012-10-10T18:35:51.680
> 
> 标签：c#, dll

我有多个想要包含在 CoreLib.dll 中的 DLL（自己管理或不自己管理），这样我就不必在每个使用这些 DLL 的应用程序中包含（可能）数百个 DLL。我包含直接引用 DLL 的 DLL。

因此，我还想在我正在创建的应用程序中实例化在这些 DLL 中声明的类。我不能做 MyApp.exe 项目中所描绘的事情，即使我愿意。CoreLib 中没有对 A、B 或 C 的引用。

![在此处输入图像描述](../Images/82094daedc4f9c281e04c41cf5a35e61.png)

我怎样才能完成我想要的？

编辑我按照建议使用了外观模式，但是出现编译错误。它说我必须在 MyApp 项目中包含 A.dll。为什么？这是我想避免的。有什么办法吗？

![在此处输入图像描述](../Images/bec0fabdf3b6970b32e1befa8da4bef5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:44:30.247

我不认为这是可能的。在 CorLib 中添加对 A、B 和 C DLL 的引用仅意味着 CorLib 引用了这些 DLL（AssemblyRef 元数据表将为每个程序集提供一条记录）。这并不意味着 CorLib 重新定义了程序集和任何类型的引用程序集。在 MyApp.exe 中，您需要引用 A、B 和 C 程序集。

另一种解决方案是在 CorLib 中定义 Facade 类并将调用重定向到 A、B 和 C DLL。在 MyApp.exe 中，您将使用 Facade 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:56:18.060

您可以使用[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17630)将程序集合并为一个。

然后，您可以按照您想要的方式使用该程序集中的所有类。

这是一个如何将多个程序集 (dll) 合并​​为一个程序集 (dll) 的示例： [http ://www.fishofprey.com/2011/01/ilmerge-to-combine-multiple-dlls.html](http://www.fishofprey.com/2011/01/ilmerge-to-combine-multiple-dlls.html)

基本上你只是做

```
ILMerge.exe /out:CoreLib.dll A.dll B.dll C.dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:02:52.190

我认为您将 DLL（在本机托管世界中包含实际实现）与包含将在构建时合并到 EXE/DLL 中以将实现包含到相应 EXE/DLL 中的内容的 LIB/OBJ 文件混淆了。

您基本上有两个选择：

*   将所有 DLL 与您的应用程序一起携带（除非您有奇怪的要求，否则应采用常规方法）。您可以直接从主应用程序引用程序集并创建类，也可以在 CoreLib 程序集中创建某种工厂，以便按需创建类。在以后的情况下，您可能不需要添加对所有 A..C 程序集的引用（如果您不直接使用类，而是通过一些共享接口/基类），但仍然需要携带它们。
*   某种将程序集合并为一个（即@Alex建议的ILMerge）。这种方法需要比第一种方法更好地理解 CLR，并且如果涉及第三方程序集（由于许可）可能无法实现。

# php - 将数组数据插入mysql表的高效php代码？

> ID：12826087
> 
> 赞同：1
> 
> 时间：2012-10-10T18:35:55.923
> 
> 标签：php, mysql, arrays, insert

所以我有一个用户名格式的平面文件数据库：$SHA$1010101010101010$010110010101010010101010100101010101001010:255.255.255.255:1342078265214

每条记录在一个新行上......大约 5000 多行......我想将它导入到一个 mysql 表中。通常我会使用 phpmyadmin 和“文件导入”来执行此操作，但现在我想通过使用 php 通过 ftp 下载数据库然后清理现有表数据并上传更新的数据库来自动化此过程。

```
id(AUTH INCREMENT) | username | password | ip | lastlogin 
```

我在下面得到的脚本大部分都有效.. 虽然 php 会产生一个错误：“PHP 致命错误：超过 30 秒的最大执行时间”我相信我可以增加这个时间，但在远程服务器上我怀疑我'将被允许，所以我需要找到更好的方法来做到这一点。

在该超时之前，只有大约 1000 条记录会被插入到数据库中......

我正在使用的代码如下.. 我现在会说我不是 php 的专业人士，这主要是收集起来并拼凑在一起的。我正在寻找一些帮助来提高效率，因为我听说做这样的插入是很糟糕的。这听起来真的很糟糕，因为当我在本地电脑上运行这个脚本时会刮很多磁盘。我的意思是为什么它要杀死硬盘来完成这样一个看似简单的任务。

```
<?php
require ('Connections/local.php');

$wx = array_map('trim',file("auths.db"));
$username = array();
$password = array();
$ip = array();
$lastlogin = array();
foreach($wx as $i => $line) {

        $tmp = array_filter(explode(':',$line));
        $username[$i] = $tmp[0];
        $password[$i] = $tmp[1];
        $ip[$i] = $tmp[2];
        $lastlogin[$i] = $tmp[3];

mysql_query("INSERT INTO authdb (username,password,ip,lastlogin) VALUES('$username[$i]', '$password[$i]', '$ip[$i]', '$lastlogin[$i]') ") or die(mysql_error()); 
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:50:50.543

试试这个，使用绑定参数和 PDO。

```
<?php
require ('Connections/local.php');

$wx = array_map('trim',file("auths.db"));
$username = array();
$password = array();
$ip = array();
$lastlogin = array();

try {
    $dbh = new PDO("mysql:host=$ip;dbname=$database", $dbUsername, $dbPassword);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}

$mysql_query = "INSERT INTO authdb (username,password,ip,lastlogin) VALUES(:username, :password, :ip, :lastlogin)";
$statement = $dbh->prepare($mysql_query);

foreach($wx as $i => $line) {
        set_time_limit(0);

        $tmp = array_filter(explode(':',$line));
        $username[$i] = $tmp[0];
        $password[$i] = $tmp[1];
        $ip[$i] = $tmp[2];
        $lastlogin[$i] = $tmp[3];

        $params = array(":username"  => $username[$i],
                        ":password"  => $password[$i],
                        ":ip"        => $ip[$i],
                        ":lastlogin" => $lastlogin[$i]);
        $statement->execute($params);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T09:05:03.383

Instead of sending queries to server one by one in the form

```
insert into table (x,y,z) values (1,2,3) 
```

You should use extended insert syntax, as in:

```
insert into table (x,y,z) values (1,2,3),(4,5,6),(7,8,9),... 
```

This will increase insert performance by miles. However you need to be careful about how many rows you insert in one statement, since there is a limit to the size of a single SQL can be. So, I'd say start with 100 row packs and see how it goes, then adjust pack size accordingly. Chances are your insert time will go down to like 5 seconds, putting it way under max_execution_time limit.

# macos - 存储为 NSData 的 URL 书签的编码是什么？

> ID：12826091
> 
> 赞同：1
> 
> 时间：2012-10-10T18:36:01.153
> 
> 标签：macos, cocoa, sandbox

如果书签无法解析，从 NSData 书签对象获取路径的最佳方法是什么？

通常，您只需解析书签，获得一个 URL，然后就可以使用了。但如果书签指向当前不存在的 NFS 挂载，则无法解析。所以现在我有一个 NSData 指向某个无法解析的地方，但我不知道它指向哪里。

这是我拥有的代码块，它加载书签，尝试解析它们，并在解析失败时尝试解码 NSData，但我无法弄清楚编码 - 这甚至可能吗？

```
NSError* error = [[NSError alloc] init];
NSURL* resolvedURL = [NSURL URLByResolvingBookmarkData:bookmarkData 
                                               options:NSURLBookmarkResolutionWithSecurityScope | NSURLBookmarkResolutionWithoutUI 
                                         relativeToURL:nil 
                                   bookmarkDataIsStale:NULL 
                                                 error:&error];
if (resolvedURL) {
    // do some stuff
    ...
} else {
    NSString* msg  = [NSString stringWithFormat:@"Error Resolving Bookmark: %@", error];
    NSLog(msg);
    // the below certainly doesn't get me a path from the bookmark, any idea what will?
    // NSString* path = [[NSString alloc] initWithData:bookmarkData encoding:NSUTF32StringEncoding];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:46:02.097

我从来没有弄清楚编码，但我找到了一种解决方法。

最初，我将沙盒化的 NSURL 编码为 NSData 对象，然后将它们作为 NSArray 存储在 NSDefaults 中。因此，我无法确定 NSData 的路径，除非它可以解决。

解决方法是更改​​设计 - 现在我对沙盒 NSURL 进行编码，将其作为对象存储到 NSDictionary 中，键为 URL 路径，并将 NSDictionary 存储在 NSDefaults 中。

使用这种方法，我可以轻松地检索任何给定路径的 NSData，即使它无法解析。

# python - 我无法修复的 Pygame2Exe 错误

> ID：12826093
> 
> 赞同：7
> 
> 时间：2012-10-10T18:36:15.363
> 
> 标签：python, python-2.7, pygame, runtime-error, py2exe

我做了一个“游戏”。我喜欢玩它，我想将它分发给我的朋友，而无需在他们的计算机上安装 Python 和 Pygame。

我对 Py2Exe 和 Pyinstaller 做了很多研究。我浏览了许多教程、修复程序、错误，但似乎没有一个对我有帮助。

Pyinstaller 没用，因为它不喜欢 Pygame 中的字体，而且 Py2exe 不会编译内置模块，所以我发现 Pygame2exe 只是一个预制的安装脚本，用于 py2exe，包括 pygame 和字体。据说它构建得很好，但 exe 无法使用...我收到错误消息：

> “Microsoft Visual C++ 运行时库
> 
> 运行时错误！
> 
> 程序 C:...\dist\Worm Game.exe
> 
> 此应用程序已请求运行时以不寻常的方式终止。请联系应用程序的支持团队以获取更多信息。”

我就是不明白……为什么我不能编译这个游戏！！！

这是使用 Python 2.7 制作的游戏代码：

```
import pygame
import random
import os

pygame.init()

class Worm:
    def __init__(self, surface):
        self.surface = surface
        self.x = surface.get_width() / 2
        self.y = surface.get_height() / 2
        self.length = 1
        self.grow_to = 50
        self.vx = 0
        self.vy = -1
        self.body = []
        self.crashed = False
        self.color = 255, 255, 0

    def event(self, event):
        if event.key == pygame.K_UP:
            if self.vy != 1:
                self.vx = 0
                self.vy = -1
            else:
                a = 1
        elif event.key == pygame.K_DOWN:
            if self.vy != -1:
                self.vx = 0
                self.vy = 1
            else:
                a = 1
        elif event.key == pygame.K_LEFT:
            if self.vx != 1:
                self.vx = -1
                self.vy = 0
            else:
                a = 1
        elif event.key == pygame.K_RIGHT:
            if self.vx != -1:
                self.vx = 1
                self.vy = 0
            else:
                a = 1

    def move(self):
        self.x += self.vx
        self.y += self.vy
        if (self.x, self.y) in self.body:
            self.crashed = True
        self.body.insert(0, (self.x, self.y))
        if (self.grow_to > self.length):
            self.length += 1
        if len(self.body) > self.length:
            self.body.pop()

    def draw(self):
        x, y = self.body[0]
        self.surface.set_at((x, y), self.color)
        x, y = self.body[-1]
        self.surface.set_at((x, y), (0, 0, 0))

    def position(self):
        return self.x, self.y

    def eat(self):
        self.grow_to += 25

class Food:
    def __init__(self, surface):
        self.surface = surface
        self.x = random.randint(10, surface.get_width()-10)
        self.y = random.randint(10, surface.get_height()-10)
        self.color = 255, 255, 255

    def draw(self):
        pygame.draw.rect(self.surface, self.color, (self.x, self.y, 3, 3), 0)

    def erase(self):
        pygame.draw.rect(self.surface, (0, 0, 0), (self.x, self.y, 3, 3), 0)

    def check(self, x, y):
        if x < self.x or x > self.x +3:
            return False
        elif y < self.y or y > self.y +3:
            return False
        else:
            return True

    def position(self):
        return self.x, self.y

font = pygame.font.Font(None, 25)
GameName = font.render("Worm Eats Dots", True, (255, 255, 0))
GameStart = font.render("Press Any Key to Play", True, (255, 255, 0))

w = 500
h = 500
screen = pygame.display.set_mode((w, h))

GameLoop = True
while GameLoop:
    MenuLoop = True
    while MenuLoop:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
            elif event.type == pygame.KEYDOWN:
                MenuLoop = False
        screen.blit(GameName, (180, 100))
        screen.blit(GameStart, (155, 225))
        pygame.display.flip()

    screen.fill((0, 0, 0))
    clock = pygame.time.Clock()
    score = 0
    worm = Worm(screen)
    food = Food(screen)
    running = True

    while running:
        worm.move()
        worm.draw()
        food.draw()

        if worm.crashed:
            running = False
        elif worm.x <= 0 or worm.x >= w-1:
            running = False
        elif worm.y <= 0 or worm.y >= h-1:
            running = False
        elif food.check(worm.x, worm.y):
            score += 1
            worm.eat()
            print "Score %d" % score
            food.erase()
            food = Food(screen)

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
            elif event.type == pygame.KEYDOWN:
                worm.event(event)

        pygame.display.flip()
        clock.tick(200)

    if not os.path.exists("High Score.txt"):
        fileObject = open("High Score.txt", "w+", 0)
        highscore = 0
    else:
        fileObject = open("High Score.txt", "r+", 0)
        fileObject.seek(0, 0)
        highscore = int(fileObject.read(2))
    if highscore > score:
        a = 1
    else:
        fileObject.seek(0, 0)
        if score < 10:
            fileObject.write("0"+str(score))
        else:
            fileObject.write(str(score))
        highscore = score
    fileObject.close()
    screen.fill((0, 0, 0))
    ScoreBoarda = font.render(("You Scored: "+str(score)), True, (255, 255, 0))
    if highscore == score:
        ScoreBoardb = font.render("NEW HIGHSCORE!", True, (255, 255, 0))
        newscore = 1
    else:
        ScoreBoardb = font.render(("High Score: "+str(highscore)), True, (255, 255, 0))
        newscore = 0
    Again = font.render("Again?", True, (255, 255, 0))
    GameOver = font.render("Game Over!", True, (255, 255, 0))
    screen.blit(GameName, (180, 100))
    screen.blit(GameOver, (200, 137))
    screen.blit(ScoreBoarda, (190, 205))
    if newscore == 0:
        screen.blit(ScoreBoardb, (190, 235))
    elif newscore == 1:
        screen.blit(ScoreBoardb, (175, 235))
    screen.blit(Again, (220, 365))
    pygame.draw.rect(screen, (0, 255, 0), (200, 400, 40, 40), 0)
    pygame.draw.rect(screen, (255, 0, 0), (260, 400, 40, 40), 0)
    LEFT = font.render("L", True, (0, 0, 0))
    RIGHT = font.render("R", True, (0, 0, 0))
    screen.blit(LEFT, (215, 415))
    screen.blit(RIGHT, (275, 415))
    pygame.display.flip()
    loop = True
    while loop:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
            elif event.type == pygame.MOUSEBUTTONDOWN:
                x, y = event.pos
                if x > 200 and x < 240 and y > 400 and y < 440:
                    loop = False
                elif x > 260 and x < 300 and y > 400 and y < 440:
                    GameLoop = False
                    loop = False
            elif event.type == pygame.KEYDOWN:
                if event.key == pygame.K_LEFT:
                    loop = False
                elif event.key == pygame.K_RIGHT:
                    GameLoop = False
                    loop = False

    screen.fill((0, 0, 0))
pygame.quit() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T10:19:08.430

我也遇到了这个问题。经过排查，发现运行时错误是字体引起的。我注意到您也使用 None 作为字体名称。[请记住，在pygame2exe 页面](http://pygame.org/wiki/Pygame2exe)的“由 arit 更改：”下方有一条关于字体使用 pygame2exe 的通知，我们应该使用“fontname.ttf”替换 None 并将该 fontname.ttf 放在正确的文件夹下exe可以找到。例如，可以在创建字体时使用“freesansbold.ttf”替换None，将freesansbold.ttf放在exe文件所在的文件夹下。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:31:20.133

我的答案：

几周后（甚至之前也遇到过这个问题）我很高兴地说我解决了这个问题！:)

**我的问题的第一部分**（[http://i.stack.imgur.com/WpkjR.png](http://i.stack.imgur.com/WpkjR.png)）：我通过编辑 setup.py 脚本并在其中添加“排除”部分来解决它。这导致成功制作可执行文件！

修改 setup.py 脚本：

```
from distutils.core import setup
import py2exe
setup(windows=['source_static.py'], options={
          "py2exe": {
              "excludes": ["OpenGL.GL", "Numeric", "copyreg", "itertools.imap", "numpy", "pkg_resources", "queue", "winreg", "pygame.SRCALPHA", "pygame.sdlmain_osx"],
              }
          }
      ) 
```

因此，如果您有类似的问题，只需将那些“缺失”的模块放入此“排除”行。

**第二部分：**

在我成功制作可执行文件后，我遇到了下一个问题：*“**应用程序已请求运行时以异常方式终止它。请联系...** ”*。经过几天和几天的搜索和思考如何解决另一个问题，我找到了一种方法。我无法相信这个问题是如此荒谬。问题出在我的代码中，字体定义：

```
font1 = pygame.font.SysFont(None, 13) 
```

在将“ **None** ”更改为某个系统字体名称（例如“Arial”（必须是字符串））并编译后，我不敢相信我的 .exe 文件能正常工作！

```
font1 = pygame.font.SysFont("Arial", 13) 
```

当然，您可以使用自己的字体，但您必须指定它的路径并在您的程序中定义它。

因此，对于所有遇到此问题的人，请尝试此步骤，希望您能成功。我真的希望这会对您有所帮助，因为我已经浪费了几天和几周的时间来尝试解决这些问题。我什至尝试使用所有版本的 python 和 pygame 以及许多其他 .exe 构建器和设置脚本来制作我的 .exe 文件，但没有运气。除了这些问题，我之前也遇到过很多其他问题，但我在 stackoverflow.com 上找到了答案。

我很高兴我找到了解决这些问题的方法，并在您遇到相同问题时为您提供帮助。

**小技巧（我也做过）：**

> > 第一：将您的 Microsoft Visual C++ 库更新到最新版本。
> > 
> > 第二：如果您有可执行程序所需的类似图像或字体，请将它们包含到**dist**文件夹（您的 .exe 文件已在其中创建）。
> > 
> > 第三：当你制作你的 .exe 文件时，将所有需要的文件包含到你的 setup.py 脚本所在的文件夹中（你的主脚本使用的所有文件和目录）。

使用**Python 2.7 x64**、**pygame**和**py2exe**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T20:42:06.173

我认为您的代码没有任何问题。事实上，它编译得很好，我也玩过。不错的游戏。

我建议在您的计算机中查看以下内容，

1.  您是否安装了所有 Microsoft 更新
2.  查看程序（控制面板 - 程序和功能），看看您是否有最新的 Microsoft Visual C++ 库。

我认为如果上述两个正确到位，它应该可以正常工作。

我在具有以下配置的机器上对此进行了测试： 1\. 更新了所有安全补丁的 Windows 7。

# php - 是否可以创建过期时间戳缓存表？

> ID：12826096
> 
> 赞同：0
> 
> 时间：2012-10-10T18:36:27.063
> 
> 标签：php, sql, caching, yii

我正在阅读有关 Yii 实现的缓存机制以及可能的其他框架/技术/数据库的信息。如果我猜对了，有一个步骤是你必须指定一个条件来使缓存过期。如果您有一个带有时间戳字段的用户行，您可以使用此时间戳来验证它的（行）一致性。如果您有一个包含不可擦除/可更新行的日志表，则可以使用**count(*)**来确保您拥有该查询/表的最新缓存结果。

现在，我的问题：

想象一下，我有 13 张桌子。创建另一个只有一个**时间戳**类型列并存储**13 行的表（** **CacheTable** ）是否**有用**，每行告诉我最后一次更新/删除/插入其他表的时间是什么时候，并使用此**CacheTable**来验证我所有缓存查询的到期条件？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:10:46.523

如果您计划创建触发器来更新**CacheTable**，这是一个很好的解决方案，您不想在代码中进行更新，因为以后会变得难以维护。******

# java - 如何扫描包含 EMF 资源的文件夹以查找同级资源

> ID：12826097
> 
> 赞同：0
> 
> 时间：2012-10-10T18:36:34.473
> 
> 标签：java, eclipse-plugin, xtext, eclipse-emf-ecore

我用 xText 开发了一个 DSL，最近添加了一些增强的完成。在 xText 生成的编辑器中，当通过 Ctrl-Space 调用完成时，完成处理程序必须执行文件夹扫描以在同一 DSL 的另一个文本文件中查找符号。入口点是：

```
public class TypesProposalProvider extends AbstractTypesProposalProvider
{
   public void completeQualifiedName_Path(
      EObject                     model,
      Assignment                  assignment,
      ContentAssistContext        context,
      ICompletionProposalAcceptor acceptor )
   {
      super.completeQualifiedName_Path( model, assignment, context, acceptor ); 
```

我用：

```
 Model root = (Model) context.getRootModel();
      Resource rootRc = root.eResource(); 
```

获取模型的 emf.ecore 容器。

**现在，就ecore资源而言，我如何查找同级资源，同一文件夹中的其他文件？**

对于其他资源，我将调用 Resource.load() 来填充兄弟姐妹的底层 emf.ecore 模型。

*我希望你能理解我的近似英语（我是法国人）......*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:52:54.107

这是最终版本，像往常一样紧凑;-)：

```
Resource   rootRc = root.eResource();
String     rcPath = rootRc.getURI().toPlatformString( true );
IFile      file   = (IFile)ResourcesPlugin.getWorkspace().getRoot().findMember( rcPath );
IContainer parent = file.getParent();
for( IResource member : parent.members())
{
   String ext = member.getFileExtension();
   if( ext != null && ext.equals( "types" ))
   {
      String prefix     = member.getName();
      String path       = member.getLocation().toString();
      URI    uriSibling = URI.createFileURI( path );
      prefix = prefix.substring( 0, prefix.length() - ".types".length());
      if( ! rcPath.endsWith( '/' + prefix + ".types" )
         && ( context.getPrefix().isEmpty() || prefix.startsWith( cntxtPrefix )))
      {
         Resource types  = rs.createResource( uriSibling );
         types.load( null );
         for( EObject rc : types.getContents())
         {
            ...
         }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:56:53.383

我假设兄弟模型不相互引用。在这种情况下，您可以使用 WorkspaceSynchronizer 从资源中获取文件。

例子

```
Resource rootRc = root.eResource();
IFile file = WorkspaceSynchronizer.getFile(rootRc);

IResource parent = file.getParent();

Iresource[] childern = parent.members();

for(<iterate over children>)
     load the children resources. 
```

希望这可以帮助。

# maven - 为什么测试在我的 Jenkins-Sonar 插件中失败，但在 Jenkins-Maven 运行期间没有？

> ID：12826098
> 
> 赞同：3
> 
> 时间：2012-10-10T18:36:42.313
> 
> 标签：maven, junit, jenkins, classpath, sonarqube

我在 CentOS 上运行 Jenkins 1.478，使用 Java 6、Maven 3.0.4、JUnit 4.8.1（Maven 项目中的依赖项）和 Sonar 3.2.1。我有我的 Jenkins Maven 2/3 作业设置以在完成后运行声纳（设置目标为“clean package -Pdev”）。该项目是一个包含 WAR 和 EAR 模块的多模块项目。但是，当插件的 Sonar 部分运行时，许多测试会因以下错误而死掉……</p>

```
java.lang.NullPointerException
        at java.util.Properties$LineReader.readLine(Properties.java:418)
        at java.util.Properties.load0(Properties.java:337)
        at java.util.Properties.load(Properties.java:325)
        at org.parentco.myco.client.test.AbstractHibernateDaoTest.loadmyprojectProps(AbstractHibernateDaoTest.java:252)
        at org.parentco.myco.client.test.AbstractHibernateDaoTest.setupMockEjbContainer(AbstractHibernateDaoTest.java:235)
        at org.parentco.myco.client.test.AbstractHibernateDaoTest.setupBeforeClass(AbstractHibernateDaoTest.java:72)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236) 
```

异常来自此代码块的最后一行...

```
 final InputStream in = AbstractHibernateDaoTest.class.getClassLoader().getResourceAsStream("myproject.properties");
    final Properties props = new Properties();
    props.load(in); 
```

测试在我工作的 Maven 部分完美运行。有问题的文件位于

```
./myclient-war/src/main/resources/myproject.properties 
```

任何人都知道我可以如何进一步解决这个问题？我更愿意在 Sonar 中配置一些东西，而不是不得不重组我的整个项目以适应 Sonar，但我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:21:37.707

这可能是由于 Sonar 为运行每个测试创建了一个单独的类加载器，尽管我不太确定。

我相信所有失败的测试都遵循层次结构？

> YourTestClass 扩展 AbstractHibernateDaoTest

尝试使用直接测试类的类加载器加载文件，`YourTestClass`而不是总是尝试使用类加载器加载它`AbstractHibernateDaoTest`

尝试将您的代码更改为，

```
final InputStream in = this.getClass().getClassLoader()
                        .getResourceAsStream("myproject.properties");
final Properties props = new Properties();
props.load(in); 
```

这将确保您获得实际测试类的类对象而不是抽象类，以及直接类的类加载器而不是已经加载的类。

**更新：** 我觉得正在发生的事情是，无论您的代码中使用什么类加载器来加载资源，都无法看到 Maven 的类加载器。请注意，在您的情况下，Maven 尤其是 maven-surefire-plugin 负责设置正确的类路径。它将`src/main/resources`在类路径上添加目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T07:57:30.087

一种可能性是[这个问题](http://comments.gmane.org/gmane.comp.java.sonar.general/14748)：

基于 Spring 的 junit 测试与 Sonar 使用的 Cobertura 插件发生冲突。解决方法是使用 JaCoCo 或 EMMA 插件而不是 Cobertura。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T06:39:47.590

试试“/myproject.properties”。

```
ClassLoader cl = AbstractHibernateDaoTest.class.getClassLoader();  
InputStream inTmp = cl.getResourceAsStream("myproject.properties");
if(itTmp==null){
    itTmp=cl.getResourceAsStream("/myproject.properties");
}
final InputStream in = inTmp; 
```

# java - 我的类是线程安全的，有多个线程访问它的变量吗？

> ID：12826099
> 
> 赞同：2
> 
> 时间：2012-10-10T18:36:45.457
> 
> 标签：java, concurrency, thread-safety, synchronized

当我试图掌握线程安全时，我想知道这个类是否是线程安全的？如果两个线程随时尝试访问其变量，在我看来它是线程安全的，因为：

*   final 变量是线程安全的，因为它是不可变的。
*   getter 和 setter 是同步的，所以 mObject 一次只能被一个线程获取或设置。因此，两个线程不可能读取不同的值。
*   方法changeObj() 是不同步的，但是其中处理类变量（即mObject）的任何块都是同步的。

如果我错了或者这个类不是线程安全的，请告诉我。

```
public class MyClass{

   private final String = "mystring"; //thread safe because final
   private AnObject mObject;

   public MyClass(){
       //initialize
   }

   //only one class can set the object at a time.
   public synchronized void setObj(AnObject a){
      mObject = a;
   }

    //two threads trying to get the same object will not read different values.
   public synchronized AnObject getObj(){
      return mObject;
   }

   //better to synchronize the smallest possible block than the whole method, for performance.
   public void changeObj(){
       //just using local variables (on stack) so no need to worry about thread safety
       int i = 1;
       //i and j are just to simulate some local variable manipulations.
       int j =3;
       j+=i;
       synchronized(this){
          //change values is NOT synchronized. Does this matter? I don't think so.
          mObject.changeValues();
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T18:41:13.970

不，它不是线程安全的。`AnObject`如果使用该方法，请确保一次只有一个线程可以更改您的值`changeObj()`，但您还为此对象提供了一个 getter，因此任何其他线程都可以`changeValues()`同时调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:43:58.180

您的类本身在其当前状态下是线程安全的（假设此处未显示任何方法），但是您的想法中可能存在一个“错误”；

`mObject`不是 100% 封装的，它是通过 setter 传入的，并且可以通过 getter 获取。这意味着任何线程都可以同时获得对 mObject 引用的对象的引用和调用方法，而 MyClass 并不知道它。

换句话说，AnObject 的方法可能也需要是线程安全的。

至少，MyClass 中的同步*不会以任何方式使 mObject 免受线程问题的影响*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:46:50.970

除了 JB Nizet 先生的观点之外，如果`AnObject.changeValues`是一种设计为被客户端覆盖或调用此类方法的方法，那么在一般情况下，这为各种不需要的行为打开了大门，例如死锁和数据损坏。您绝不能将控制权交给同步块中的外来代码。“外星人”是指不受您控制的代码。更多细节可以在 Effective Java, 2nd Ed, Item 67 中找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T18:50:09.607

final 变量不一定是线程安全的，只有不可变的 final 变量是线程安全的——包括原语和类`String`，或者本身是线程安全的类的 final 变量。

您的类不是线程安全的，因为它公开了变量`a`，但也需要它进行内部工作。

下面的示例将演示如何`a`进入不一致状态的示例。

线程 A

```
MyClass myClass = ...
myClass.changeObj(); 
// imagine Thread A is suspended during the synchronized block inside of 
// changeObj() 
```

头B

```
MyClass myClass = ...
AnObj anObj = myClass.getObj();
anObj.changeValues();
// uh-oh, I am modifying the state of this instance of anObj which is also 
// currently being modified by Thread A 
```

要使 MyClass 真正成为线程安全的，您必须执行以下操作之一。

*   AnObj 还必须保证线程安全（通过使修改其状态的方法成为线程安全的）
*   AnObj 必须是不可变的。也就是说，如果您需要修改 AnObj 的状态，您必须创建 AnObj 的新实例来保持新状态。
*   AnObj 的 getter 不能直接公开 MyClass 的 AnObj 实例，而是返回该实例的副本。

# javascript - 用图像替换某些字符？

> ID：12826100
> 
> 赞同：0
> 
> 时间：2012-10-10T18:36:51.090
> 
> 标签：javascript, replace, blogger

我想做的是有一个 Javascript 代码，用一个 16x16 的小图像替换 (S)。我使用 (S) 链接到我网站上文章中的信息来源。它看起来有点不专业和凌乱，我想知道是否有办法（即使没有 JS）让我的博客自动用 16x16 图像或类似的字符替换我帖子中出现的 (S)在 Wikipedia 上用于显示链接在新选项卡中打开。

有没有人有任何想法？

编辑：顺便说一下，我和 Blogger 一起工作。手动输入 HTML 代码也是一个禁忌，因为博客上的其他作者几乎是计算机文盲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:35:35.903

我正在玩的页面中有一个编辑器。它会在您键入时更新，显示帖子外观的实时预览 - 所有客户端，无 ajax，快速闪电。

我调用此函数以响应 keyup 更改事件。

 **```
var content;

function byId(e) {return document.getElementById(e);}

function onPreview()
{
    var modifiedStr, re;

    var textArea = byId("threadText");
    var threadTextOrig = textArea.value;
    content = textArea;

    re = new RegExp("\n", "g");
    var modifiedStr = threadTextOrig.replace(re, "<br>");

    re = new RegExp(":wtf:", "g");
    modifiedStr = modifiedStr.replace(re, '<img src="img/smiley_WTF.gif" align="top" alt="WTF | :WTF:">');

    re = new RegExp(":\\)", "g");
    modifiedStr = modifiedStr.replace(re, '<img src="img/smiley_smile.gif" align="top" alt="Smile | :)">');

    re = new RegExp(":-D", "g");
    modifiedStr = modifiedStr.replace(re, '<img src="img/smiley_biggrin.gif" align="top" alt="Big Grin | :-D">');

    var tgt = byId(previewDiv);
    previewDiv.innerHTML = modifiedStr;

    var tgt = byId('previewTitle');

    var src = byId('title');
    var srcVal = src.value;
    tgt.innerHTML = "<strong>" + srcVal + "</strong>";
} 
```

**html**

```
<input name="title" id="title" value="Waiting for approval" style="width:100%" onchange="onPreview();" onkeyup="onPreview();" onmouseup="onPreview()">
<textarea rows="10" cols="80" id="threadText" name="threadText" onchange="onPreview();" onkeyup="onPreview();" onmouseup="onPreview()"></textarea> 
```**

# python - django 翻译模板 {% trans "something" %}

> ID：12826101
> 
> 赞同：9
> 
> 时间：2012-10-10T18:36:52.260
> 
> 标签：python, django, templates, translation

好的，我一直在疯狂寻找这个我认为很简单的问题。

我使用 Django 1.4

问题是 django 不会在我的模板中翻译一个简单的 {% trans "work" %} 。

这就是我所做的：

设置.py：

```
LANGUAGE_CODE = 'en-us'
USE_I18N = True
MIDDLEWARE_CLASSES = (
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.request",
)

LOCALE_PATHS = (
    '/home/m00p/PycharmProjects/astrid/locale'
) 
```

这是我的地图结构：

```
/
myproject/
apps/
locale/
template/ 
```

所以我跑了

> django-admin.py makemessages -l nl -i settings.py

它确实在语言环境文件夹 nl/LC_MESSAGES/django.po 中成功创建，然后我编辑它在 django.po 中找到的翻译

```
#: templates/base.html:22
msgid "work"
msgstr "ddddddddddddd" 
```

然后我运行编译命令

> django-admin.py 编译消息

它还在正确的文件夹中成功创建了一个 django.mo 文件

我也在 myproject/urls.py 中添加了这个

```
urlpatterns = patterns('',
    url(r'^i18n/', include('django.conf.urls.i18n')),
)

urlpatterns += i18n_patterns('',
    url(r'^$', 'front.views.home', name='home'),
) 
```

我在 base.html 文件中添加了这个，以便能够更改语言

```
<form action="/i18n/setlang/" method="post">
    {% csrf_token %}
    <input name="next" type="hidden" value="/" />
    <select name="language">
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
            <option value="{{ language.code }}">{{ language.name_local }} ({{ language.code }})</option>
        {% endfor %}
    </select>
    <input type="submit" value="Go" />
</form> 
```

因此，当我访问该网站时，我在 url 中得到 127.0.0.1:8000/en/，这是正确的，因为英语是默认语言，然后当我使用表单将其更改为 NL 时，它会重定向到 127.0.0.1:8000 /nl/ 但我翻译的文本没有改变。我也确定语言是 NL，因为当我显示 {{ LANGUAGE_CODE }} 时，它显示的是 NL。

有谁知道为什么不改？

谢谢m00p

**问题解决了**

在添加东西的过程中，我忘记了它的工作，我重新启动了我的部署服务器，但我**没有清除浏览器的缓存**它仍在使用旧页面，所以当我在 Chrome 中清除浏览器数据时重新访问该页面并更改了正确翻译的语言。无论如何感谢您的建议！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-27T18:12:12.833

[我在处理我的新项目Sportolio](http://www.sportolio.pl)时花了几个小时试图在 Django 1.5 中解决这个问题，结果发现我在 LOCALE_PATH 末尾缺少一个**逗号**

```
LOCALE_PATHS = (
    '/path/to/my/project/locale/',
) 
```

这是非常关键的，因为 Django 期望 LOCALE_PATHS 是一个**TUPLE**而不是一个字符串。

我希望它可以挽救某人的生命:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T19:25:32.393

在 Django 1.4 中，项目根目录下的语言环境目录不再受支持。您应该将其添加到`LOCALE_PATHS`设置中，默认情况下为空。[Django 设置](https://docs.djangoproject.com/en/dev/ref/settings/#locale-paths)。

但是，语言环境生成中涉及的管理命令似乎有效，所以我不知道您是否已经这样做了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-23T15:23:50.047

您键入命令的位置很重要。

就我而言，这是我的项目结构：

```
myproject/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py
    apps/
        migrations/
        __init__.py
        admin.py
        models.py
        tests.py
        views.py 
```

如果我`makemessages`在 mysite 文件夹中调用，如下所示：

```
D:\...\myproject\mysite> python ../manage.py makemessages -all 
```

它不会得到 HTML 中的字符串`{% trans "str" %}`。
但是，如果我在 myproject 文件夹中调用 makemessages，如下所示：

```
D:\...\myproject> python manage.py makemessages -all 
```

有用！`{% trans "str" %}`它可以在 HTML 中找到所有内容。
所以要小心你所在的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-23T21:21:38.240

我也有同样的情况。部分短语是翻译，但大多数只是显示关键。我们有两种主要语言 en 和 fa。两者都有同样的问题。我在网上查看了所有相同的问题和每一个关于 django 翻译的文档。我可以说我几乎尝试了一切。唯一的区别是我们在生产服务器上进行测试。而且我没有重新加载服务器！所以这个单行命令让我摆脱了痛苦：

```
sudo /etc/init.d/uwsgi reload 
```

我做错了什么是我重新启动了wsgi而不是uwsgi！

如果您喜欢做我所做的，这里是：我在服务器上按此顺序执行步骤：

```
django-admin makemessages -l en
django-admin makemessages -l fa 
```

添加波斯语短语和一些英文文本进行测试。

```
django-admin compilemessages
python manage.py clear_cache
python manage.py runserver 
```

服务器运行没有错误。但是 en 或 fa 没有发生任何变化。看起来 django 正在从旧缓存加载。所以，我删除了整个缓存，甚至删除了服务器上的所有文件并重新安装了整个项目。然而同样的问题。

我在笔记本电脑上从我的 django 发送消息并将其发送到服务器。此外，我尝试了不同的文本编辑器和翻译工具，例如 poedit 来生成 po 和 mo 文件。然而问题不断显现。

我使用并替换了 trans 标签，看看它是否适用于其中的任何一个：

```
{% trans ' ' %}
{% trans " " %}
{% blocktrans %} {% endblocktrans %}
{% trans "xyz" az XYZ %} {{ XYZ }}
{{ _() }} 
```

他们都没有工作！

但是重新加载服务器会使一切井井有条。我希望它可能对某人有所帮助。

# java - 从 android 库项目引用的 Jar 未被 App 引用。NoClassDefFoundError

> ID：12826104
> 
> 赞同：0
> 
> 时间：2012-10-10T18:37:03.010
> 
> 标签：java, android, jar, adt, android-library

我搜索了 SO 并尝试了我遇到的所有解决方案，但似乎没有任何效果。我尝试过的解决方案是[此处](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)、[此处](https://stackoverflow.com/questions/9308331/java-library-in-an-android-library-referenced-by-an-android-project-throws-nocla)、[此处](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)、[此处](https://stackoverflow.com/questions/8940418/jars-added-to-an-android-library-are-not-getting-referenced-in-the-project)和[此处](https://stackoverflow.com/questions/5565747/android-debugging-referenced-project-problem)给出的解决方案，但似乎没有任何效果。

如其中一些问题所述，我有一个包含在 android 库 (AL) 中的 java 库（比如说 J），该库包含在 android 应用程序 (AA) 中。我已将库添加到两者的库中（也尝试将其添加到仅 AA 并包含在 AL 中，反之亦然，仅在 AL 中并期望 android 依赖项来处理它）但是那个或其他任何东西都没有工作。

我正在使用最新的工具（版本 20.0.3）。android 库和应用程序的构建 android 版本为 2.2，最小 SDK 为 5。

我可以在应用程序的 android 依赖项中看到 java 库，但我得到了一个`NoClassDefFoundException`运行时间。

我怎样才能让它工作？

android 库必须引用一个 jar，因为它包含一些我需要隐藏的加密逻辑。该库是为分发而创建的，该应用程序只是用于测试该库的非常简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:50:07.357

有 2 个不同但相关的问题导致了此问题。

1.  Java 库 J 是按照合规级别 1.7（我的系统的默认值）编译的。这需要达到 1.5，即 Android 的合规级别。（合规水平将来可能会改变）。
2.  J 库也在使用 J2SE 库进行编译。我不得不用与我的应用程序相同 api 级别的 anroid.jar 替换它。

然后事情也没有奏效，由于某种原因，它在我删除项目并在新目录中重新创建后开始工作。（IMP：首先进行代码备份）。

# sql - 查找 SQL Server Management Studio 中正在运行的 SQL 的哪一行？

> ID：12826106
> 
> 赞同：1
> 
> 时间：2012-10-10T18:37:17.190
> 
> 标签：sql, sql-server-2008

我正在 SQL Server Management Studio 中执行一个很长的 SQL 脚本，通常需要几秒钟才能完成。

但这一次它需要永远并且永远不会完成。运行此脚本的其他人没有问题。

所以我想知道我是否可以在 SQL Server Management Studio 中进行调试，以查看这个长 SQL 脚本中的哪一行当前正在执行并永远持续下去？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:39:14.903

最简单的方法是启动 SQL Server Profiler 并用它来跟踪你的 SQL。作为奖励，您将获得更多有用的信息，而不仅仅是哪条线路导致了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:43:57.813

如果 Profiler 不能满足您的需求，请尝试使用 Activity Monitor。在 Processes 部分中找到您的会话，然后拉出详细信息以查看最后一个 T-SQ 命令批处理。

# c++ - euclid的扩展算法C++

> ID：12826114
> 
> 赞同：12
> 
> 时间：2012-10-10T18:37:43.250
> 
> 标签：c++, algorithm

我对欧几里得的扩展算法有疑问。(ax+by=gcd(a,b)) 我正在尝试确定 GCD 以及 x 和 y。GCD 不是问题，但使用循环方法时 x 和 y 出现问题。通常一个数字出现为 0，另一个是异常大的负数。代码如下：

```
#include <iostream>

using namespace std;

main ()
{
    int a,b,q,x,lastx,y,lasty,temp,temp1,temp2,temp3;
    cout << "Please input a" << endl;
    cin >> a; 
    cout << "Please input b" << endl;
    cin >> b;
    if (b>a) {//we switch them
        temp=a; a=b; b=temp;
    }
    //begin function
    x=0;
    y=1;
    lastx=1;
    lasty=0;
    while (b!=0) {
        q= a/b;
        temp1= a%b;
        a=b;
        b=temp1;

        temp2=x-q*x;
        x=lastx-q*x;
        lastx=temp2;

        temp3=y-q*y;
        y=lasty-q*y;
        lasty=temp3;
    }

    cout << "gcd" << a << endl;
    cout << "x=" << lastx << endl;
    cout << "y=" << lasty << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-08-27T05:01:06.547

虽然这个问题很久以前就被问过了，但答案将帮助那些正在寻找扩展欧几里得算法的 C++ 实现的人。

**这是一个递归 C++ 实现：**

```
int xGCD(int a, int b, int &x, int &y) {
    if(b == 0) {
       x = 1;
       y = 0;
       return a;
    }

    int x1, y1, gcd = xGCD(b, a % b, x1, y1);
    x = y1;
    y = x1 - (a / b) * y1;
    return gcd;
} 
```

**代码示例：**

```
#include <iostream>

int main()
{
   int a = 99, b = 78, x, y, gcd;

   if(a < b) std::swap(a, b);

   gcd = xGCD(a, b, x, y);
   std::cout << "GCD: " << gcd << ", x = " << x << ", y = " << y << std::endl;

   return 0;
} 
```

**输入：**

a = 99, b = 78

**输出：**

GCD：3，x = -11，y = 14

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T18:47:58.343

你的两个作业是错误的，它们应该是：

```
 temp2 = x;
    x=lastx-q*x;
    lastx = temp2;

    temp3 = y;
    y = lasty-q*y;
    lasty=temp3; 
```

具有上述修复的示例输出：

```
Please input a
54
Please input b
24
gcd6
x=1
y=-2 
```

# jaxb - 使 jaxb 行通用以避免重复编写它们

> ID：12826116
> 
> 赞同：0
> 
> 时间：2012-10-10T18:37:44.973
> 
> 标签：jaxb

从 a 解组`File`：

```
 JAXBContext jc = JAXBContext.newInstance( "com.acme.foo" );
   Unmarshaller u = jc.createUnmarshaller();
   Object o = u.unmarshal( new File( "nosferatu.xml" ) ); 
```

从 解组`InputStream`：

```
 InputStream is = new FileInputStream( "nosferatu.xml" );
   JAXBContext jc = JAXBContext.newInstance( "com.acme.foo" );
   Unmarshaller u = jc.createUnmarshaller();
   Object o = u.unmarshal( is ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:51:59.037

JAXB ( [**JSR-222)**](http://jcp.org/en/jsr/detail?id=222) API 已经非常通用。

**JAXB上下文**

该对象是线程安全的，因此您只需创建一次并从中创建所有 、 等`Marshaller`实例。`Unmarshaller`

**编组器/解组器**

这些对象不是线程安全的，因此您需要确保它们不会同时被多个线程使用。除非您设置任何属性，否则您总是可以这样做：

```
JAXBContext jc = JAXBContext.newInstance("com.acme.foo");
Object o = jc.createUnmarshaller().unmarshal(new File("nosferatu.xml")); 
```

# matlab - 如何在 3D 空间中检测一个点是否在圆锥内？

> ID：12826117
> 
> 赞同：9
> 
> 时间：2012-10-10T18:37:53.583
> 
> 标签：matlab, c#-4.0, math

如何检测 3D 点是否在圆锥内？

```
Ross cone = (x1, y1, h1)
Cone angle = alpha
Height of the cone = H
Cone radius = R
Coordinates of the point of the cone = P1 (x2, y2, h2)
Coordinates outside the cone = P2( x3, y3, h3)

Result for point1 = true
Result for point2 = false 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-10T18:52:24.270

扩展伊格纳西奥的回答：

让

```
x = the tip of the cone
dir = the normalized axis vector, pointing from the tip to the base
h = height
r = base radius

p = point to test 
```

所以你`p`投影`dir`到找到点沿轴的距离：

```
cone_dist = dot(p - x, dir) 
```

此时，您可以拒绝外部的值`0 <= cone_dist <= h`。

然后沿轴计算该点的圆锥半径：

```
cone_radius = (cone_dist / h) * r 
```

最后计算点与轴的正交距离以与圆锥半径进行比较：

```
orth_distance = length((p - x) - cone_dist * dir)

is_point_inside_cone = (orth_distance < cone_radius) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T18:54:13.613

与语言无关的答案：

*   找到定义圆锥主轴的直线方程。
*   计算[从 3D 点到直线 的距离](http://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html)，以及沿直线的交点，其中距离垂直于直线。
*   在交点处找到圆锥的半径，并检查线与 3D 点之间的距离是大于（外部）还是小于（内部）该半径。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T18:43:54.977

锥体只是无数个圆，其大小由一个线性方程定义，该方程取该点的距离。只需检查它是否在适当大小的圆圈内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-22T21:09:49.220

计算向量到锥体中心和从顶点指向评估点的向量之间的角度会不会更容易。如果使用矢量投影并且合成矢量的长度更短，那么指向圆锥中心的矢量在角度和长度之间，如果您在圆锥内，您就会知道。

[https://en.wikipedia.org/wiki/Vector_projection](https://en.wikipedia.org/wiki/Vector_projection)

# php - 如何从另一个类调用非静态方法

> ID：12826126
> 
> 赞同：2
> 
> 时间：2012-10-10T18:38:16.440
> 
> 标签：php, oop

这是我的第二个问题，甚至认为，我自己回答了前一个问题。无论如何，我对 OOP 有一个基本问题，关于如何从另一个类调用非静态方法。示例：我们在文件 A.class.php 中有一个名为 A 的类

```
class A {

    public function doSomething(){
     //doing something.
    }

} 
```

和另一个文件 B.class.php 上名为 B 的第二个类

```
require_once 'A.class.php';

class B {

    //Call the method doSomething() from  the class A.

} 
```

我想现在很清楚了。如何：从 A 类调用方法 doSomething() ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:40:29.293

B 类将需要 A 类的对象来调用方法：

```
class B {
    public function doStuff() {
        $a = new A();
        $a->doSomething();
    }
} 
```

或者，您可以在 B 之外创建 A 的实例并将其传递给 B 的构造函数以创建对它的全局引用（或将其传递给单个方法，您可以选择）：

```
class B {
    private $a = null;
    public function __construct($a) {
        $this->a = $a;
    }
    public function doStuff() {
        $this->a->doSomething();
    }
}

$a = new A();
$b = new B($a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:42:09.523

将 A 类注入 B 怎么样，使 B 依赖于 A。这是最原始的依赖注入形式：

```
class A 
{    
  public function doSomething()
  {
    //doing something.
  }
}

class B 
{
  private $a;

  public function __construct( A $a )
  {
     $this->a = $a;
  }

  //Call the method doSomething() from  the class A.
  public function SomeFunction()
  {
    $this->a->doSomething();
  }  
} 
```

这是这样构造的：

```
$a = new A();
$b = new B( $a ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:40:41.057

```
class B {

    public function __construct()
    {
      $a = new A;
      $a->doSomething();
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-28T12:42:06.567

我知道这是一个老问题，但考虑到我今天找到了它，我想我会在@newfurniturey 的答案中添加一些内容。

如果您希望保留对 A 类中 B 类的访问权限，这就是我所做的：

```
class A 
{    
    private $b = null
    public function __construct()
    {
        $this->b = new B($this);

        if (!is_object($this->b) {
            $this->throwError('No B');
        }

        $this->doSomething();
    }

    public function doSomething() {
        $this->b->doStuff();
    }

    private function throwError($msg = false) {
        if (!$msg) { die('Error'); }
        die($msg);
    }
}

class B {
    public function doStuff() {
        // do stuff
    }
} 
```

这是这样构造的：

```
$a = new A(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T18:39:55.950

您需要实例化 A 类的一个对象。您只能在 B 类的方法中执行此操作。

```
 class B{
     public function doSomethingWithA(){
          $a = new A();
          return $a->doSomething();
      }

  } 
```

# windows-8 - Windows 8 商店应用程序和 Windows 8 桌面应用程序之间的区别

> ID：12826128
> 
> 赞同：2
> 
> 时间：2012-10-10T18:38:36.853
> 
> 标签：windows-8

Windows 8 应用商店应用程序和 Windows 8 桌面应用程序有什么区别。我可以使用 Javascript 创建 Windows 8 桌面应用程序吗？我发现英特尔的[一篇文章](http://software.intel.com/en-us/articles/ultrabook-and-tablet-windows-8-sensors-development-guide/)给出了这两个应用程序之间的一些区别。但不清楚

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T06:16:53.927

Windows 8 桌面应用程序 - 您可以下载软件并安装它。无需 Marketplace - 传统开发工具，如 C#、C++、Winforms、WPF 等

Windows 8 应用商店应用程序 - 您只能通过 Windows 应用商店安装它，并且将应用程序上传到应用商店将经过认证过程。- 你可以使用 XAML 和 C#/VB.NET/C++ , HTML/JavaSCript/CSS , Embarcadero Prism 等进行开发。 - 主要为**Touch设计**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T19:25:40.947

不，您不能使用 javascript 编写您自己的桌面程序。

这里是关于这两种类型的简单概述：

**Windows 8 桌面应用程序：** 这只是记事本、MS Word、AutoCad 等基本程序......用 C++、C# 等已知语言编写......

**Windows 8 Store App** 在这里，您可以在新的开始菜单中创建应用程序。单击开始菜单中的按钮以打开您自己的应用程序。在这里，您也可以使用 html5/javascript 编写应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:16:40.783

实际上，您也可以旁加载 Windows RT 应用程序，这对 LOB 应用程序很有用。看看 Windows RT 开发指南 -

[http://www.microsoft.com/en-us/download/details.aspx?id=30703](http://www.microsoft.com/en-us/download/details.aspx?id=30703)

标题为“在 Windows 应用商店之外的 Windows RT 上安装开发人员包”的部分（第 19 页）

高温高压

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-01T19:37:18.153

JavaScript 不能用于创建桌面应用程序。

请参阅，桌面应用程序是那些需要您运行 Setup.exe 文件并通过笔式驱动器或 CD 安装的应用程序，或者您可能是从 Internet 获得的。

这些应用程序在 Windows 7、Windows XP 等操作系统上运行，让您可以完全控制要安装和不安装的内容。

Windows 8 Metro 应用程序是您手机上的应用程序 我说这些是为了真正理解。例如，您去 android 商店并下载 Temple Run。该游戏是从在线商店获得的，您无法自行决定。我们拥有这些地铁应用程序的类似方式

# diff - 从 kdiff3 文件比较中，我可以生成统一差异格式的差异吗？

> ID：12826132
> 
> 赞同：18
> 
> 时间：2012-10-10T18:39:08.220
> 
> 标签：diff, kdiff3, unified-diff

我在 Windows 中有一个 kdiff3 比较，我想将比较保存为统一差异格式的文本文件。

我意识到这是一个奇怪的问题。通常，人们已经掌握了文本差异，并希望在 kdiff3 中以图形方式查看它。

我在 Windows 中使用了一个……*[不寻常](https://stackoverflow.com/questions/2147055/how-do-i-roll-back-a-file-checked-in-to-clearcase)*的……版本控制[工具](https://stackoverflow.com/questions/8588781/clearcase-stop-making-baseline-if-there-are-checkouts)，它可以比较版本并在 kdiff3 中显示比较。然而，它在生成 Unix 友好的输出时显然是不友好的，至少对于像我这样的非 ClearCase-ninjas 来说是这样。

我真正喜欢的是以统一的差异格式获得比较的输出，这样我就可以使用类似`patch`或类似的工具。我不是特别喜欢 ClearCase，我很乐意尽可能地不理会它。

kdiff3 可以采用现有的比较并将其导出为统一的 diff 格式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-24T02:46:21.840

Windows 中的 kdiff3 往往也带有标准的命令行 diff 工具——查看你的`C:\Program Files*\KDiff3\bin`文件夹；如果 diff.exe 在那里，您可以使用它（标准`diff -u file1 file2`）。（如果不存在，请重新运行 kdiff3 安装程序并选择“实用程序”选项。）

如果您正在查看从 ClearCase 自动启动的正在运行的 kdiff3 中的某些文件，请在 kdiff3 bin 目录中打开命令提示符（或将 bin 目录的内容复制到`C:\Windows`以使这些命令在任何地方都可以工作）并执行以下操作：

`diff -u "<copy-pasted path of file A>" "<copy-pasted path of file B>"`

其中文件 A 和文件 B 的路径来自您的 kdiff3 窗口（它们是否是临时文件无关紧要；只要 kdiff3 窗口打开，它们就会存在）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-10-07T20:40:50.757

不要打扰kdiff3。您正在寻找的[命令是](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_diff.htm)

```
cleartool diff --diff-format 
```

约翰在这里回答：[从 kdiff3 文件比较中，我可以生成统一差异格式的差异吗？](https://stackoverflow.com/questions/12826132/from-a-kdiff3-file-comparison-can-i-generate-a-diff-in-unified-diff-format#comment27112886_12826132)

# asp.net - asp.net DetailsVeiw - 选择插入链接按钮时在下拉列表中插入一个项目

> ID：12826133
> 
> 赞同：0
> 
> 时间：2012-10-10T18:39:11.790
> 
> 标签：asp.net

我是 ASP.NET 的新手。单击“新建”以添加新记录时，我正在尝试将项目插入下拉列表。表单将从 ItemTemplate 切换到 InsertTemplate

错误：

> “System.NullReferenceException：对象引用未设置为对象的实例。”

此代码在我的详细信息视图中。

```
 <ItemTemplate>
         <asp:Label ID="lblVendorName" 
        runat="Server" style="text-align:left; width:100%" 
        Text='<%# Eval("VendorName")%>' Width="70%"/>

    </ItemTemplate>    
    <InsertItemTemplate>
        <asp:DropDownList id="insertVendorName" datasourceid="VendorSqlDataSource"
            datatextfield="VendorName" DataValueField="VendorID"  
            OnSelectedIndexChanged="ddlVendor_SelectedIndexChanged" 
            runat="server" AutoPostBack="true"  />
        <asp:SqlDataSource ID="VendorSqlDataSource"  
        ConnectionString="<%$Connectionstrings:ConnectionString%>"
            SelectCommand="SELECT VendorID, VendorName 
                from MDF_Vendor"  runat="server">
        </asp:SqlDataSource>
    </InsertItemTemplate> 
```

更新...下面是一组链接按钮。

```
<asp:TemplateField>  
    <ItemTemplate> 
        <asp:LinkButton ID="btnedit" runat="server" 
            CommandName="Edit" Text="Edit"/>  |   
        <asp:LinkButton ID="btnInsert" runat="Server" 
            Text="New" CommandName="New" 
            OnClick="LinkButton_Click"  />  |  
        <asp:LinkButton ID="btnDelete" 
            runat="server" 
            CommandName="Delete" Text="Delete" />      | 
    </ItemTemplate>  

    <InsertItemTemplate>
    <asp:LinkButton ID="btnInsert" runat="Server" 
        Text="Insert" CommandName="Insert"/>    
    <asp:LinkButton ID="btncancel" runat="server" 
        CommandName="Cancel" Text="Cancel"/> 
    </InsertItemTemplate>

    <EditItemTemplate>                                                 
        <asp:LinkButton ID="btnupdate" runat="server" 
            CommandName="Update" Text="Update" />                  
        <asp:LinkButton ID="btncancel" runat="server" 
            CommandName="Cancel" Text="Cancel"/>       
    </EditItemTemplate>
</asp:TemplateField> 
```

我尝试了@Aghislas 建议的以下代码（谢谢！）

```
protected void LinkButton_Click(object sender, EventArgs e)
{
    DropDownList ddlVendor = (DropDownList)DetailsView1.FindControl("insertVendorName"); 
    ddlVendor.Items.Insert(0, new ListItem("---Select---", "-1"));
} 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:42:43.313

您可以尝试使用此代码

```
<asp:LinkButton id="LinkButton1" 
       Text="Click Me" 
       OnClick="LinkButton_Click" 
       runat="server"/>

 protected void LinkButton_Click(Object sender, EventArgs e) 
 {
      var ddlVendor =(DropDownList)DetailsView1.FindControl("insertVendorName");

      ddlVendor.Items.Insert(0, new ListItem("---Select---", "-1"));
 } 
```

注意：您在 Click 委托中删除代码`Page_Load`并移入

# reporting-services - 用户 ID 和数据驱动订阅

> ID：12826139
> 
> 赞同：0
> 
> 时间：2012-10-10T18:39:39.570
> 
> 标签：reporting-services, subscription, userid, data-driven

我正在尝试为使用@UserID 过滤结果的报告创建数据驱动订阅（出于安全目的）。我所看到的作为几个类似问题的答案的解决方案是一个断开的链接。

我们希望有一个用户可以在线访问的版本以及通过电子邮件发送的订阅报告。有没有办法在没有两个版本的报告（一个有用户ID，一个没有）的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T17:15:04.377

我们开发了一种解决方案，允许将相同的报告用于实时访问以及数据驱动订阅 (DDS)。它基于 djphatic 提供的链接中的概念

首先，我们使用添加到报告中的自定义代码返回 @User 值，而不是使用会使 DDS 阻塞的 User!UserID 函数。该代码类似于 Prologika 解决方案，但我在另一个在线资源中找到了它——我很抱歉不记得我在哪里找到它。代码是：

```
Public Function GetHashedUser()
Try
Return Report.User!UserID
Catch
Return " "
End Try
End Function 
```

对于我们使用的用户参数默认值：

```
=Code.GetHashedUser() 
```

如果报表正在实时运行，这将返回 User!UserID。

数据驱动订阅需要使用订阅查询传递用户和其他参数。由于以这种方式传递的任何参数都将在 URL 中可见，因此我们使用用户 ID 的散列版本（称为 userkey）。userkey 对应于我们安全表中的一个值，可以识别用户及其相关权限。我们不加密其他过滤器，因为它们基于用户并用于向下钻取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:56:13.063

请参阅下面的链接。我自己没有对此进行过测试，但我已经看到了之前提到的这个解决方案。

[http://prologika.com/CS/blogs/blog/archive/2011/03/28/data-driven-subscriptions-and-row-level-security.aspx](http://prologika.com/CS/blogs/blog/archive/2011/03/28/data-driven-subscriptions-and-row-level-security.aspx)

# ruby - MongoMapper“save(:safe => true)”抛出“错误数量的参数（0 代表 1）”

> ID：12826140
> 
> 赞同：2
> 
> 时间：2012-10-10T18:39:39.823
> 
> 标签：ruby, mongodb, mongomapper

我有一个简单的 MongoMapper 模型：

```
class Author
    include MongoMapper::Document
    key :name, String
end 
```

这很好用：

```
a = Author.new(:name => 'Alice')
a.save                              # => returns 'true' 
```

现在我想使用[http://mongomapper.com/documentation/plugins/safe.html](http://mongomapper.com/documentation/plugins/safe.html)`:safe`中描述的选项：

> 将 :safe 选项传递给 save 将强制驱动程序确保保存成功并在不成功时引发错误，而不是仅在我们的保存操作中使用默认的“触发并忘记”行为。

所以我尝试：

```
a = Author.new(:name => 'Bob')
a.save(:safe => true)               # => throws exception 
```

这会抛出“ArgumentError：错误数量的参数（0 代表 1）”...“在‘保存’中”。知道我做错了什么吗？

我正在使用 MongoMapper 0.11.1。我检查了本地安装的gem文件，默认包含Safe插件。

# r - 如何从 data.frame 创建二进制矩阵？

> ID：12826152
> 
> 赞同：1
> 
> 时间：2012-10-10T18:40:32.150
> 
> 标签：r, matrix, binary-data

我有一个 16 列的 data.frame。这是一个示例行。

```
 > data[16,]
                      V1              V2              V3                 V4
    16 comp27182_c0_seq4 ENSP00000442096 ENSG00000011143 ENSFCAP00000011376
                       V5                V6                V7                V8
    16 ENSFCAG00000012261 comp48601_c0_seq1 comp19130_c0_seq3 comp22796_c2_seq3
                       V9 V10                V11                V12
    16 comp146901_c0_seq1     comp157916_c0_seq1 comp158124_c0_seq1
                      V13               V14 V15 V16
    16 comp229797_c0_seq1 comp61875_c0_seq2 
```

我只对第 1 列和第 6-16 列感兴趣。第一列包含我想用作矩阵中列名的名称，6 到 16 可能包含字符串或“”（无）。我想将此 data.frame 转换为显示 1 或 0 的矩阵，以反映第 6-16 列中的内容。

```
 V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11
comp27182_c0_seq4 1  1  1  1  0  1  1  1  1   0   0 
```

我试图使用面具但没有成功。我敢肯定那里有一个非常简单的选择。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:52:58.013

试试这个：

```
do.call(cbind, lapply(c(1,6:16), 
        function(x) as.numeric(nchar(as.character(data[,x])) > 0))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:02:55.940

我根据我的确切需要稍微修改了您的代码。现在第一列是命名行。

```
a<-do.call(cbind, lapply(c(6:16), 
        function(x) as.numeric(nchar(as.character(data[,x])) > 0)))
rownames(a)<-data[,1] 
```

效果很好，谢谢！

# javascript - 我可以在 JavaScript 中创建动态对象名称吗？

> ID：12826154
> 
> 赞同：14
> 
> 时间：2012-10-10T18:40:37.093
> 
> 标签：javascript, dynamic-variables

> **可能重复：**
> [javascript - 动态变量](https://stackoverflow.com/questions/4385084/javascript-dynamic-variables)
> [动态 Javascript 变量名称](https://stackoverflow.com/questions/7762502/dynamic-javascript-variable-names)

我需要在一个页面上创建多个对象并希望按顺序命名它们。有没有办法在 JavaScript 中做到这一点？

```
for (i=0;i<num;i++){
  var obj+i = new myObject("param1","param2");
  obj+i.someProperty = value;
} 
```

这样我可以动态创建不同数量的对象（取决于值“num”），然后适当地设置它们的属性。

我可以在 PHP 中做到这一点，有没有办法在 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T18:45:27.990

不建议这样做，但可以执行您尝试执行的操作（如果您在浏览器中运行，而不是在其他一些 js 环境中运行）。

```
for (i = 0; i < num; i++) {
  window['obj' + i] = new myObject("param1","param2");
  window['obj' + i].someProperty = value;
}
obj0.someProperty; 
```

这是有效的，因为全局变量实际上是窗口对象的属性（如果您在浏览器中运行）。您可以使用点表示法 (myObject.prop) 或括号表示法 (myObject['prop']) 访问对象的属性。通过分配 window['obj' + i]，您正在创建一个名为 'obj' + i 的全局变量。

更好的选择是使用数组或父对象来存储您的对象。

```
myObjs = {};
for (i = 0; i < num; i++) {
  myObjs['obj' + i] = new myObject("param1","param2");
  myObjs['obj' + i].someProperty = value;
}
myObjs.obj0.someProperty; 
```

或者像许多其他答案所建议的那样使用数组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T18:44:20.667

这就是数组的用途，用来保存一些东西：

```
var objs = [];
for (i=0;i<num;i++){
  objs[i] = new myObject("param1","param2");
  objs[i].someProperty = value;
} 
```

动态变量几乎总是一个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:42:24.443

您可以创建，也可以设置/修改该对象的属性。

修改后的代码：

```
var obj = {}; //
for (i=0;i<num;i++){
  obj[i] = new myObject("param1","param2");
  obj[i].someProperty = value;
} 
```

我建议你使用数组。作为

```
 var obj = []; //
    for (i=0;i<num;i++){
      obj[i] = new myObject("param1","param2");
      obj[i].someProperty = value;
    } 
```

# android - 如何从 Android 应用程序向服务器发出请求

> ID：12826161
> 
> 赞同：2
> 
> 时间：2012-10-10T18:40:59.713
> 
> 标签：android, android-asynctask, software-design

我目前正在Android平台上开发一个需要多次联系主服务器来做各种事情的应用程序。我现在正在处理软件设计问题，即在单独的线程中向服务器发出每个请求（否则，我会收到*NetworkOnMainThreadException*，不建议这样做）。

所以我的例子中有 3 个类：

*   **比如说，请求者**类希望用位于服务器中的数据库中的数据填充 Spinner。
*   **要求 DBConnection 执行新连接的中间类**，然后等待它完成并将数据解析为适当的格式。
*   **与数据库建立连接并检索原始字符串的低级类**，然后将其传递给中间类进行解析。

我知道，对于与服务器建立的每个连接，我都必须创建一个新线程，以便在建立连接的类（低级类）中创建一个新线程并等待结果。这样我就不会用 AsyncTasks 和他们不应该知道的东西使我的软件的顶层过载。

问题是，在我收到数据后，我必须解析它，并用它做一些事情。我还必须填满微调器（如示例中所示）。

我知道创建一个 DataFromServerListener 接口或类似的接口可能是个好主意，但我认为它会变得混乱，到处都是处理来自服务器的数据的方法。另一方面，我必须让每个顶级课程都使用 AsyncTask 启动单独的线程，这可能不是最好的解决方案。

我非常感谢有关此主题的任何建议。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:52:24.693

```
private class LongOperation extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {

        return "Executed";
    }      

    @Override
    protected void onPostExecute(String result) {               
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:23:59.523

这正是我所需要的。实际上，它解决了我以前没有解决的问题。 [http://www.codeproject.com/Articles/162201/Painless-AsyncTask-and-ProgressDialog-Usage](http://www.codeproject.com/Articles/162201/Painless-AsyncTask-and-ProgressDialog-Usage)

# php - 如何从主页的子页面回显特定的 $categ

> ID：12826164
> 
> 赞同：0
> 
> 时间：2012-10-10T18:41:05.237
> 
> 标签：php, echo

我有一个关于`$categ`从主页上的子页面回显特定的问题。例如，这段代码：

```
<?php foreach ($categories as $name => $value) { echo $categ[$name]; }  ?> 
```

回显子页面上的所有类别，例如`../library_books/`

回声：

```
category1 "library books1" -> "book1" "book2" "book3",...
category2 "library books2" -> "book1" "book2" "book3",...
category3 "library books3" -> "book1" "book2" "book3",... 
```

我怎样才能回显例如`library books2`只有 1 个子类别的类别 2，例如：`book2`在主页上`domain.com`

谢谢

# c++ - 是否可以在 C++ 中使用 std::atomic_flag 获得线程锁定机制？

> ID：12826168
> 
> 赞同：2
> 
> 时间：2012-10-10T18:41:18.883
> 
> 标签：c++, boost, c++11, boost-thread, atomic

使用 MS Visual C++2012

一个类有一个类型的成员`std::atomic_flag`

```
class A {
    public:
    ...
    std::atomic_flag lockFlag;
    A () { std::atomic_flag_clear (&lockFlag); } 
}; 
```

有一个 A 类型的对象

```
A object; 
```

谁可以被两个（Boost）线程访问

```
void thr1(A* objPtr) { ... }
void thr2(A* objPtr) { ... } 
```

如果对象正在被另一个线程访问，这个想法是等待线程。

问题是：有可能用一个`atomic_flag`对象来构建这样的机制吗？暂时不要这么说，我想要一些轻量级的 boost::mutex。

顺便说一下，其中一个线程所涉及的进程是对获得许多行的 dBase 的非常长的查询，我只需要将它挂起在发生冲突的某个代码区域（处理每一行时），我不能等待整个线程完成`join()`。

我在每个线程中都尝试了一些：

```
thr1 (A* objPtr) {
    ...
    while (std::atomic_flag_test_and_set_explicit (&objPtr->lockFlag, std::memory_order_acquire)) {
        boost::this_thread::sleep(boost::posix_time::millisec(100));
    }
    ...  /* Zone to portect */

    std::atomic_flag_clear_explicit (&objPtr->lockFlag, std::memory_order_release);
    ...  /* the process continues  */
} 
```

但没有成功，因为第二个线程挂起。其实我对`atomic_flag_test_and_set_explicit`函数所涉及的机制并不完全了解。如果这样的函数立即返回或者可以延迟直到标志可以被锁定，也不会。

对我来说，如何获得一个总是设置值并返回前一个值的函数的锁定机制也是一个谜。没有选项只能读取实际设置。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T22:47:21.237

> *顺便说一句，其中一个线程所涉及的进程是对获得许多行的 dBase 的非常长的查询，我只需要将它挂起在发生冲突的某个代码区域（处理每一行时），我不能等待整个线程完成join()。*

这样的区域称为*临界区*。使用临界区最简单的方法是通过*互斥*锁定。

建议的互斥解决方案确实是要走的路，除非你能*证明*这是一个热点并且锁竞争是一个性能问题。*仅使用原子和内在函数的无锁编程非常复杂，在此级别不推荐。*

这是一个简单的示例，展示了如何执行此操作（在[http://liveworkspace.org/code/6af945eda5132a5221db823fa6bde49a](http://liveworkspace.org/code/6af945eda5132a5221db823fa6bde49a)上直播）：

```
#include <iostream>
#include <thread>
#include <mutex>

struct A
{
    std::mutex mux;
    int x;

    A() : x(0) {}
};

void threadf(A* data)
{
    for(int i=0; i<10; ++i)
    {
        std::lock_guard<std::mutex> lock(data->mux);
        data->x++;
    }
}

int main(int argc, const char *argv[])
{
    A instance;
    auto t1 = std::thread(threadf, &instance);
    auto t2 = std::thread(threadf, &instance);

    t1.join();
    t2.join();

    std::cout << instance.x << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:03:32.160

看起来您正在尝试编写自旋锁。是的，你可以用 来做到这一点`std::atomic_flag`，但你最好`std::mutex`改用它。除非您真的知道自己在做什么，否则不要使用原子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T05:16:52.820

要实际回答所提出的问题：是的，您可以使用 std::atomic_flag 创建一个称为自旋锁的线程锁定对象。

```
#include <atomic>

class atomic_lock
{
    public:
        atomic_lock()
            : lock_( ATOMIC_FLAG_INIT )
        {}

        void lock()
        {
            while ( lock_.test_and_set() ) { } // Spin until the lock is acquired.
        }

        void unlock()
        {
            lock_.clear();
        }

    private:
        std::atomic_flag lock_;
}; 
```

# php - pdo 不绑定值

> ID：12826172
> 
> 赞同：2
> 
> 时间：2012-10-10T18:41:31.383
> 
> 标签：php, pdo, mysqli

请尝试从 mysqli 移动到 pdo 但运行此代码

```
 <?php
  $sql = "select concat(register.fname ,' ' ,register.lname) as name,register.matric   as matric,register.username as uname,register.sex as sex,register.phone as phone ,register.passport as passport ,register.email as email,register.level as level,faculty.fac_name as fac,dept.dept_name as dept,diary.diary as diary,diary.date_added as added from register,faculty,dept,diary where register.user_id = :_id  and diary.username = :name limit 1";
$sth = $dbh->prepare($sql);
$sth->bindValue(':id', $id, PDO::PARAM_INT);
$sth->bindParam(':name', $username);
$sth->execute();

    ?> 
```

它显示此错误（！）警告：PDOStatement::bindValue() [pdostatement.bindvalue]: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined in C:\wamp\www\uni\det\viewuser.php on第 14 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:42:55.387

在查询中，您已将其命名为`:_id`bind value `:id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:43:05.550

你有，在你的电话`:_id`中改变它`bindValue`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:43:08.163

您将变量绑定`$id`到`:id`，但在您需要的语句中`:_id`。

```
$sth->bindValue(':_id', $id, PDO::PARAM_INT); 
```

或更改语句：

```
 $sql = "select concat(register.fname ,' ' ,register.lname) as name,register.matric   as matric,register.username as uname,register.sex as sex,register.phone as phone ,register.passport as passport ,register.email as email,register.level as level,faculty.fac_name as fac,dept.dept_name as dept,diary.diary as diary,diary.date_added as added".
           "from register,faculty,dept,diary ".
          " where register.user_id = :id  and diary.username = :name limit 1"; 
```

# recursion - Prolog中的矩形钉接龙？

> ID：12826174
> 
> 赞同：2
> 
> 时间：2012-10-10T18:41:46.330
> 
> 标签：recursion, prolog, counter

因为我是 Prolog 的新手，所以可能会在这里快速提问。我正在尝试将此用于解决三角形钉接龙拼图的代码转换为解决矩形钉接龙拼图。我认为我面临的问题是试图弄清楚如何让程序知道它完成了这个难题。这是我目前所拥有的：

```
% Legal jumps along a line.
linjmp([x, x, o | T], [o, o, x | T]).
linjmp([o, x, x | T], [x, o, o | T]).
linjmp([H|T1], [H|T2]) :- linjmp(T1,T2).

% Rotate the board
rotate([[A, B, C, D, E, F],
        [G, H, I, J, K, L],
        [M, N, O, P, Q, R],
        [S, T, U, V, W, X]],
        [[S, M, G, A],
        [T, N, H, B],
        [U, O, I, C],
        [V, P, J, D],
        [W, Q, K, E],
        [X, R, L, F]]).

rotateBack([[A, B, C, D],
            [E, F, G, H],
            [I, J, K, L],
            [M, N, O, P],
            [Q, R, S, T],
            [U, V, W, X]],
            [[D, H, L, P, T, X],
            [C, G, K, O, S, W],
            [B, F, J, N, R, V],
            [A, E, I, M, Q, U]]).

% A jump on some line.
horizjmp([A|T],[B|T]) :- linjmp(A,B).
horizjmp([H|T1],[H|T2]) :- horizjmp(T1,T2).

% One legal jump.
jump(B,A) :- horizjmp(B,A).
jump(B,A) :- rotate(B,BR), horizjmp(BR,BRJ), rotateBack(A,BRJ).
%jump(B,A) :- rotate(BR,B), horizjmp(BR,BRJ), rotate(BRJ,A).

% Series of legal boards.
series(From, To, [From, To]) :- jump(From, To).
series(From, To, [From, By | Rest])
       :- jump(From, By),
         series(By, To, [By | Rest]).

% A solution.
solution(L) :- series([[o, x, x, x, x, x],
                       [x, x, x, x, x, x],
                       [x, x, x, x, x, x],
                       [x, x, x, x, x, x]], L). 
```

三角拼图代码要求用户输入结束表格的样子，但我不希望这样。我希望这显示任何可能的解决方案。桌子总是正好是 6x4。我喜欢旋转网格以继续简单地计算水平跳跃的想法，因此我更改了旋转函数以旋转它的侧面，并添加了一个 RotateBack 函数将其放回原位。我想我必须这样做，因为网格不是对称的。由于它总是这个大小，我认为找到结束的最简单方法是设置一个计数器来计算发生了多少次移动。一旦我们达到 22 步（清除除 1 个钉子之外的整个网格的最大可能步数），那么解决方案将是成功的。

换句话说，我认为我需要删除这段代码：

```
% Series of legal boards.
series(From, To, [From, To]) :- jump(From, To).
series(From, To, [From, By | Rest])
       :- jump(From, By),
         series(By, To, [By | Rest]). 
```

并对其进行更改，使其设置一个在 22 处停止的计数器。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:05:10.450

我认为你可以数数钉子，或者更好的是，当至少有 2 个时失败。

为了有效地做到这一点，应该是（未经测试的代码）

```
finished(L) :-
   \+ call_nth(find_peg(L), 2).
find_peg(L) :-
   member(R, L),
   memberchk(R, x). 
```

[此答案](https://stackoverflow.com/a/11400256/874024)中定义的 call_nth/2需要内置[nb_setval](http://www.swi-prolog.org/pldoc/doc_for?object=nb_setval/2)。这在 SWI-Prolog 或 Yap 中可用。

# php - CodeIgniter：分页与参数冲突

> ID：12826179
> 
> 赞同：0
> 
> 时间：2012-10-10T18:42:09.013
> 
> 标签：php, codeigniter, parameters, pagination, conflict

这是我的情况：我有页面**localhost/ctc/product**来显示产品和**localhost/ctc/product/abcxyz**来显示单个产品 abcxyz 的详细信息。它工作正常，直到我想对我的主页进行分页，因为产品列表太长了。我使用通常的分页类进行分页，但是当我进入下一页时，url 变成这样：**localhost/ctc/product/1**，我认为它会将分页号误认为是产品，并且页面什么也没有显示。那么我该如何解决这个问题呢？谢谢大家，对不起我的英语不好。

问题解决了。感谢 John B 和 otporan。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:55:55.747

您应该使用正则表达式限制 url 的最后一个参数中可以包含的内容。

您有 3 条路线：

```
ctc/product
ctc/product/abcxyz
ctc/product/1 
```

您必须向路由器机制解释 2 路由应该只接受字符串作为最后一个参数，而第三个路由只能接受数字作为最后一个参数。

你可以这样做：

```
$route['ctc/product/([a-z]+)'] = "controller/method/$1";
$route['ctc/product/([0-9]+)'] = "controller/method/$1"; 
```

因此，现在您有 2 个路由在 URI 中具有相同数量的“参数”，但路由器知道差异。一个将字符串作为最后一个参数，最后一个路由将整数作为最后一个参数。

我没有时间在本地服务器上测试这个。但是你应该明白这应该如何工作。

在这里阅读文档：[Codeigniter Routing](http://codeigniter.com/user_guide/general/routing.html)

# python - 使用 python 脚本过滤 SPARQL 查询中的数据

> ID：12826187
> 
> 赞同：5
> 
> 时间：2012-10-10T18:42:33.460
> 
> 标签：python, filter, sparql, rdflib

我正在尝试使用 RDFlib Python 中的以下查询来针对用户的名字文字获取 uri。

```
plugin.register(
    'sparql', rdflib.query.Processor,
    'rdfextras.sparql.processor', 'Processor')
plugin.register(
    'sparql', rdflib.query.Result,
    'rdfextras.sparql.query', 'SPARQLQueryResult')

f1Str="Thomas"

ecsuri= GraphS.query("""
                    PREFIX akt: <http://www.aktors.org/ontology/portal#>

                    SELECT ?akturi WHERE{
                        ?akturi akt:family-name ?fname.
                        FILTER (?fname = """+f1Str+""")

                    }""") 
```

它给出了以下错误，这似乎是由于***f1Str***，我们如何使用存储在某个变量中的值过滤 SPARQL 中的数据。请帮忙。

```
*Exception Type: ParseException
Exception Value: Expected "}" (at char 481), (line:10, col:29)* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:31:58.617

只需尝试使用`str()`过滤器将您的 SPARQL 变量转换为字符串

`FILTER (str(?fname) = """+f1Str+""")`

如果您需要不区分大小写的搜索，您也可以像这样进行正则表达式查询：

`FILTER (regex(str(?fname),"""+f1Str+""","i"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:55:21.507

确保`f1Str`使用 SPARQL 语法：

```
f1Str="'Thomas'"   # SPARQL quoted string. 
```

或者

```
f1Str="Thomas"
FILTER (?fname = '"""+f1Str+"""') # Add SPARQL quotes 
```

此外，在查询字符串中添加一些换行符 - 错误消息将对您更有用。

# macos - Facebook Like 不在 Chrome 上工作

> ID：12826189
> 
> 赞同：1
> 
> 时间：2012-10-10T18:42:40.113
> 
> 标签：macos, google-chrome, facebook-like

我正在 Mac Lion 上运行最新版本的 Chrome。我在我的页面上添加了一个类似 FB 的按钮，该按钮在 Firefox 上运行良好，但由于某种原因在 Chrome 上无法运行。似乎有一个快速窗口弹出，它试图加载，然后它消失了，没有“喜欢”发生。

小提琴 - [http://jsfiddle.net/luisp128/X7SDR/3/](http://jsfiddle.net/luisp128/X7SDR/3/)

我认为这可能与这个先前的问题有关，但 FB 说这个问题已经解决：[类似按钮的弹出窗口（“飞出”）没有出现在 chrome 扩展中](https://stackoverflow.com/questions/7852392/the-the-popup-window-flyout-of-a-like-button-doesnt-show-up-in-a-chrome-ext)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:01:24.873

需要注意的一点是，您必须在每个浏览器中登录 Facebook，FB 按钮才能显示在该浏览器中（否则按钮没有上下文）。如果不是，则不显示按钮。

因此，如果您遇到此问题，请打开一个新选项卡，登录 FB，然后刷新原始选项卡 - 然后会出现按钮（假设没有第二个问题）>

# jakarta-ee - 在应用服务器环境中，应该更喜欢 javax.sql.DataSource 还是 javax.sql.ConnectionPoolDataSource？

> ID：12826191
> 
> 赞同：5
> 
> 时间：2012-10-10T18:42:51.753
> 
> 标签：jakarta-ee, jdbc

[一个现有的问题](https://stackoverflow.com/questions/6506859/datasource-or-connectionpooldatasource-for-application-server-jdbc-resources)表达了类似的东西，但我想在这里指出一个稍微不同的细微差别。

基本问题：当您定义连接池时，所有应用程序服务器都能够为（little-d，little-s）数据源指定*（*标准）接口*和（供应商提供的）实现类。*如果供应商为 a`ConnectionPoolDataSource`和常规 ol'提供了实现`DataSource`，那么哪个是首选？

对于实现`DataSource`,`ConnectionPoolDataSource`并且`XADataSource`在同一个实现类中的供应商实现呢？

文档`javax.sql.ConnectionPoolDataSource`说，几乎总而言之：

> PooledConnection 对象的工厂。实现此接口的对象通常会向基于 JavaTM 命名和目录接口 (JNDI) 的命名服务注册。

这基本上没用，但值得注意的是`javax.sql.ConnectionPoolDataSource`它本身并不扩展`javax.sql.DataSource`，这意味着它的实现不需要提供`getConnection()`方法，这是大多数调用者习惯使用的方法。这告诉我所有应用程序服务器必须：

*   用一个实现包装一个`javax.sql.ConnectionPoolDataSource`实现，`javax.sql.DataSource`以便调用者可以使用`javax.sql.DataSource#getConnection()`, 或

*   检测到一个`javax.sql.ConnectionPoolDataSource`实现*也是*一个`javax.sql.DataSource`实现，并且（以某种方式）相信它的`getConnection()`方法将委托给`getPooledConnection()`（他们到底将如何做到这一点？）

的文档`javax.sql.DataSource`部分说：

> DataSource 接口由驱动程序供应商实现。有三种类型的实现：
> 
> *   基本实现——产生一个标准的 Connection 对象
> *   连接池实现——生成一个将自动参与连接池的连接对象。此实现与中间层连接池管理器一起使用。
> *   分布式事务实现——生成一个可用于分布式事务并且几乎总是参与连接池的 Connection 对象。此实现与中间层事务管理器一起使用，并且几乎总是与连接池管理器一起使用。

这也是无用的，并且启动不正确（或至少未指定：`javax.sql.DataSource`也由应用程序服务器供应商实现，他们必须提供一个实现，以便客户端代码可以（例如）将 a`javax.sql.DataSource`注入他们的服务器端代码）。这似乎也暗示任何给定的实现可能会或可能不会提供连接池`DataSource`，这让我想知道应用程序服务器应该如何判断何时设置了指定`javax.sql.DataSource`接口（而不是`javax.sql.ConnectionPoolDataSource`接口）的连接池.

**注意：**我不是在这里寻找关于我在 Tomcat 上是如何做到的，或者我在 GlassFish 上采取的对我有用的步骤或任何类似性质的答案。我正在寻找一个参考 JDBC 规范、Java EE 规范或错误报告的答案，或者表明这些单独（不相关！）接口存在的原因，以及它们应该如何统一或区分的内容在通用 Java EE 应用程序服务器上，因此有义务提供连接池。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T14:58:01.447

只是为了说明一下：我正在使用 Postgres，[来自 PGConnectionPoolDataSource 的 API 文档](http://jdbc.postgresql.org/documentation/publicapi/org/postgresql/ds/PGConnectionPoolDataSource.html)对我来说非常清楚：

```
public class PGConnectionPoolDataSource
extends org.postgresql.ds.jdbc4.AbstractJdbc4ConnectionPoolDataSource
implements javax.sql.ConnectionPoolDataSource 
```

> ConnectionPoolDataSource 的 PostgreSQL 实现。应用服务器或中间件供应商**应提供**利用此 ConnectionPoolDataSource 的 DataSource 实现。如果没有，**您可以使用** 称为 PoolingDataSource 的 PostgreSQL 实现，但 仅当您的服务器或中间件供应商不提供他们自己的**时才应使用。**为什么？服务器可能希望在同一事务中请求连接的所有 EJB 中重用相同的连接，或者提供其他类似的高级特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:32:16.143

您不应该`ConnectionPoolDataSource`直接使用 a，它旨在作为物理连接（又名`PooledConnection`s）的源，然后由`DataSource`实际实现连接池的 a 使用。A`ConnectionPoolDataSource`实际上不应该自己实现池化。

例如，这样的 DataSource 由您的应用程序服务器提供。它通常需要一个 JNDI url（或直接引用）到`ConnectionPoolDataSource`，并且它本身公开`DataSource`接口以分发“逻辑”连接。

`DataSource`s 在[JDBC 4.1](http://download.oracle.com/otndocs/jcp/jdbc-4_1-mrel-spec/index.html)第 9.4 节中讨论：

> DataSource 接口 [..] 是获得数据源连接的首选方法。

和

> 逻辑名称通过使用 Java Naming and Directory InterfaceTM (JNDI) 的命名服务映射到 DataSource 对象。DataSource 对象代表一个物理数据源并提供与该数据源的连接。

如果我们再看一下介绍中对连接池（第 11 章）的描述，指定：

> JDBC 驱动程序提供了 ConnectionPoolDataSource 的实现，**应用程序服务器使用它来构建和管理**连接池。
> 
> 用于管理连接池的算法是特定于实现的，并且因应用服务器而异。**应用程序服务器为其客户端提供 DataSource**接口的实现，该接口使连接池对客户端透明。结果，客户端在使用与以前相同的 JNDI 和 DataSource API 时获得了更好的性能和可伸缩性。*（强调我的）*

(AS) `DataSource`（以下简称：ASDS）和（司机）`ConnectionPoolDataSource`（以下简称 CPDS）之间的交互在第 11.1 - 11.3 节中进行了描述。11.3 节具体描述了交互：

> 以下步骤序列概述了当 JDBC 客户端从实现连接池的 DataSource 对象请求连接时发生的情况：
> 
> *   客户端调用 DataSource.getConnection。
> *   提供 DataSource 实现的应用程序服务器在其连接池中查看是否有合适的 PooledConnection 对象——一个物理数据库连接——可用​​。确定给定 PooledConnection 对象的适用性可能包括匹配客户端的用户身份验证信息或应用程序类型以及使用其他特定于实现的标准。与管理连接池相关的查找方法和其他方法特定于应用程序服务器。
> *   如果没有合适的 PooledConnection 对象可用，应用服务器调用 ConnectionPoolDataSource.getPooledConnection 方法来获取新的物理连接。实现 ConnectionPoolDataSource 的 JDBC 驱动程序创建一个新的 PooledConnection 对象并将其返回给应用程序服务器。
> *   无论 PooledConnection 是从池中检索到的还是新创建的，应用程序服务器都会进行一些内部记录以指示物理连接现在正在使用中。
> *   应用服务器调用方法 PooledConnection.getConnection 来获取逻辑 Connection 对象。这个逻辑 Connection 对象实际上是物理 PooledConnection 对象的“句柄”，当连接池生效时，DataSource.getConnection 方法返回的正是这个句柄。
> *   应用服务器通过调用方法 PooledConnection.addConnectionEventListener 将自己注册为 ConnectionEventListener。这样做是为了在 PooledConnection 对象可供重用时通知应用程序服务器。
> *   逻辑 Connection 对象返回给 JDBC 客户端，它使用与基本 DataSource 案例中相同的 Connection API。请注意，在客户端调用 Connection.close 方法之前，不能重用底层的 PooledConnection 对象。

最后一项并不完全正确：ASDS 可以通过分发从客户端`Connection`获得的新连接来强制关闭/无效来自客户端的逻辑连接`PooledConnection`（参见第 11.4 节）。

现在在评论中提出您的问题：为什么 AS 允许您在数据源配置中同时指定 a`DataSource`和`ConnectionPoolDataSource`interface：ASDS 和 CPDS 之间的引用通常也通过 JNDI 完成。例如，这允许轻松重新配置（将 ASDS 切换到不同的底层 CPDS，或将 ASDS 切换到正常的基本数据源，同时仍保持 CPDS 的配置，例如因为它也被不同的 ASDS 使用）。另请参阅 JDBC 规范的第 11.5 节：

> 部署实现连接池的 DataSource 对象要求客户端可见的 DataSource 对象和底层 ConnectionPoolDataSource 对象都注册到基于 JNDI 的命名服务。

# mysql - mysql 查询中的多个分组。Group_concat? 通过...分组？内联？我哪里错了？

> ID：12826196
> 
> 赞同：0
> 
> 时间：2012-10-10T18:43:00.053
> 
> 标签：mysql, join, group-by, sum

我很难找到与我想要实现的目标类似的例子。我有 3 张桌子。我想从一张表中获取链接 ID 号。从另一个表中，我想找到相同的 ID，并在该表中添加另一列数字，其中第一个表中的 ID 号匹配。然后在第三张表上，即文本，我想将 ID 与主 ID 号匹配的所有文本组合在一起......并在 1 中返回所有这些。我的图表应该显示我的意思：

![](../Images/e875ee579cf538b63097271e586d9595.png)

因此，有 2 个查询将自行返回部分结果，但我努力将其构建为 1 个单个查询。

```
 SELECT ticket_charges.ticket_id
         , sum(ticket_charges.charge_time) AS Seconds
    FROM
      ticket_charges
    LEFT OUTER JOIN tickets
    ON ticket_charges.ticket_id = tickets.id
    GROUP BY
      ticket_charges.ticket_id
    , tickets.id 
```

票号 3 的 77 和 937 已正确相加！！

![](../Images/bb24fb3d851ca75006eb1942bf0c7948.png)

```
 SELECT tickets.id AS `Ticket Number`
         , left(tickets_messages.message, 500) AS `Ticket Message`
    FROM
      tickets
    INNER JOIN tickets_messages
    ON tickets.id = tickets_messages.id
    GROUP BY
      tickets_messages.ticket_id
    , tickets.id 
```

消息正确地连接在一起。

![](../Images/0277a771942b25e579c6c8e29f7a1ee8.png)

我已经尝试了一些消息连接，选择中的选择，不同的分组方法，几个总和等。但似乎无法得到一个结果，我通过两个查询都正确地得到了结果作为 1 个单一查询。要么来自“charge_time”的连接数字非常错误，并且与任何东西都不匹配，或者我最终在“charge_time”上得到数百个“消息”和奇怪的数字

仅供参考..如果我尝试这个，我会得到“子查询返回超过 1 行”，但这是我认为我应该做的。

```
 SELECT ticket_charges.ticket_id
        , sum(ticket_charges.charge_time) AS Seconds
    FROM
      ticket_charges
    LEFT OUTER JOIN tickets
    ON ticket_charges.ticket_id = tickets.id
       Where (SELECT left(tickets_messages.message, 500)
              FROM  
               tickets    
              INNER JOIN tickets_messages
              ON tickets.id = tickets_messages.id
              GROUP BY
               tickets.id)
    GROUP BY
     ticket_charges.ticket_id
    , tickets.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:33:30.807

如果您确实需要使用单个查询来执行此操作，则解决方案是在其中一个关节中执行子查询。

```
SELECT t.id, t.person_id, SUM(tc.charge_time), mc.concat
FROM tickets t
INNER JOIN tickets_charges tc ON tc.ticket_id = t.id
INNER JOIN (
    SELECT ticket_id, GROUP_CONCAT(message SEPARATOR ' ') as concat
    FROM tickets_messages
    GROUP BY ticket_id) AS mc
  ON mc.ticket_id = t.id
GROUP BY t.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:44:20.577

试试这个查询 -

```
SELECT
  t.id,
  t.person_id,
  SUM(tc.charge_time) Seconds,
  GROUP_CONCAT(LEFT(tm.message, 20)) Message
FROM
  tickets t
LEFT JOIN ticket_charges ts
  ON ts.ticket_id = t.id
LEFT JOIN tickets_messages tm
  ON tm.ticket_id = t.id
GROUP BY
  t.id; 
```

请注意，我使用了 'LEFT(tm.message, **20** )'，因为`GROUP_CONCAT`函数有长度限制 - [group_concat_max_len](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_group_concat_max_len)。

# iphone - 主屏幕链接上的 iPhone 视口元标记更改

> ID：12826207
> 
> 赞同：5
> 
> 时间：2012-10-10T18:43:30.543
> 
> 标签：iphone, viewport, homescreen

我有一个 Web 应用程序，我之前已经设置了支持带有主屏幕书签的 iPhone 所需的元标记。该网站在 safari 中运行良好，并且作为将 apple-mobile-web-app-capable 设置为 yes 的书签，因此当您使用主屏幕链接时它删除了浏览器控件。

现在 iPhone 5 出来了，我意识到通过页面上的视口设置，它显示的网站在屏幕的顶部和底部都有黑条。我已经更改了我的视口元标记，以便它可以使用 iPhone 5 的全屏。但是，主屏幕书签使用新的视口标签并全屏显示的唯一方法是删除书签，然后重新添加它。

是否有另一种设置方法，以便已安装主屏幕书签的每个人都不需要删除并重新添加它以使网站全屏显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:58:36.270

这是我在 Burlin 在 Gist 上找到的解决方案。工作一种享受。[https://gist.github.com/3840737](https://gist.github.com/3840737)

```
<!-- standard viewport tag to set the viewport to the device's width
  , Android 2.3 devices need this so 100% width works properly and
  doesn't allow children to blow up the viewport width-->
<meta name="viewport" id="vp" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" />
<!-- width=device-width causes the iPhone 5 to letterbox the app, so
  we want to exclude it for iPhone 5 to allow full screen apps -->
<meta name="viewport" id="vp" content="initial-scale=1.0,user-scalable=no,maximum-scale=1" media="(device-height: 568px)" /> 
```

# c# - 使用 XmlReader 获取未经授权的 WebException

> ID：12826208
> 
> 赞同：2
> 
> 时间：2012-10-10T18:43:37.383
> 
> 标签：c#, rdf, xmlreader, craigslist

在尝试使用来自 craigslist 的 RDF 提要时，我遇到了 (401) Unauthorized WebException。我可以毫无问题地阅读其正下方的两个已注释掉的 URL。如果我能够使用 Internet Explorer 直接导航到 craigslist URL 没有问题，为什么在尝试使用 XmlReader 加载数据时会失败？

[http://portland.craigslist.org/search/sss?query=mac&srchType=A&format=rss](http://portland.craigslist.org/search/sss?query=mac&srchType=A&format=rss)

```
 static void Main(string[] args)
    {
        XmlReader reader = XmlReader.Create("http://portland.craigslist.org/search/sss?query=mac&srchType=A&format=rss");
        //XmlReader reader = XmlReader.Create("http://wdfw.wa.gov/news/newsrss.php");
        //XmlReader reader = XmlReader.Create("http://rss.slashdot.org/Slashdot/slashdot");
        Rss10FeedFormatter rf = new Rss10FeedFormatter();
        rf.ReadFrom(reader);
        Console.ReadLine();
    }
} 
```

![在此处输入图像描述](../Images/2dd4eaf03c782cd32b931f63017d78a5.png)

![为什么未经授权？](../Images/217d623f3f47755cc9ab8f385f751915.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:44:16.343

使用 XmlResolver

```
 XmlUrlResolver resolver = new XmlUrlResolver();
                resolver.Credentials = System.Net.CredentialCache.DefaultCredentials;

                XmlReaderSettings settings = new XmlReaderSettings();
                settings.XmlResolver = resolver;

                // create a reader and populate the document
                XmlReader reader = XmlReader.Create(rssFeedUrl, settings); //
                doc = new XmlDocument();
                doc.Load(reader); 
```

# google-apps-script - 在电子表格之间移动 GUI Builder 组件

> ID：12826209
> 
> 赞同：2
> 
> 时间：2012-10-10T18:43:38.763
> 
> 标签：google-apps-script

我想我可能只是把自己画到了一个角落里……

有没有办法将 Google 的 GUI Builder 中为 Google 电子表格脚本构建的 UI 组件移动到另一个电子表格中？

我已经在测试表中使用 GUI Builder 开发了一个 GUI，但现在我想在一个不同的、已经存在的工作电子表格中使用它。我找不到任何移动它的方法。如果无法移动，是否有某种方法可以序列化和存储 UI 的元素，以便我可以从另一个电子表格中的新脚本中读取这些元素。作为解决方案的一部分，我什至对复制和粘贴感到满意（毕竟这是我移动脚本的方式）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:53:01.457

您要求的功能仍在开发中。你可以在这里追踪它：

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=999](http://code.google.com/p/google-apps-script-issues/issues/detail?id=999)

您可以采用的一种解决方法是将您的测试项目转换为库。有关更多信息，请阅读本用户指南：

[https://developers.google.com/apps-script/guide_libraries#writingLibrary](https://developers.google.com/apps-script/guide_libraries#writingLibrary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:29:01.853

复制 Ui 组件的唯一方法是制作电子表格的副本。然后复制您要使用的数据。这就是我不使用 Ui 构建器的原因！

# iphone - 如何使用密钥将所有数据从 NSMutableArray 移动到 NSArray

> ID：12826216
> 
> 赞同：1
> 
> 时间：2012-10-10T18:44:05.817
> 
> 标签：iphone, xcode, nsmutablearray, nsarray

我有一个数组`NSMutableArray`。它包含来自 XML 文件的对象 - `@"time"`. 我需要将所有记录从`NSMutableArray`key移动`@"time"`到`NSArray`. 这是为了表示会根据日历上的日期被高亮标记。我该如何实施？

如果我写代码：

```
NSDictionary *nItem = [rasp objectAtIndex:0]; //here instead of 0, you should put the number of elements in the array, but I do not get ((
NSArray *data = [NSArray arrayWithObjects:[nItem objectForKey:@"time"], nil]; 
```

`NSMutableArray`仅分配数组中的第一个日期，索引 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:55:30.410

你可以做这样的事情。

```
NSMutableArray* mutable = [NSMutableArray arrayWithCapacity:0];

for(NSDictionary* nItem in rasp)
{
    [mutable addObject:[nItem objectForKey:@"time"]];
}
NSArray *data = [NSArray arrayWithArray:mutable]; 
```

希望能帮助到你！

# mysql - 如何使 MySQL 选择树结构？

> ID：12826217
> 
> 赞同：1
> 
> 时间：2012-10-10T18:44:13.173
> 
> 标签：mysql, sql

我在 MySQL 中有一个表：

```
id       name        parent_id
1        animals       null
2        mammal         1
3        feline         2
4        human          2
5        cat            3
6        invertebrate   1
7        snake          6
8        objects        null
etc.. 
```

我想要一个按以下顺序显示结果的 MySQL 查询：

```
 Animals
       Mammal
          Feline
             Cat
          Human
       Invertebrate
    Objects
etc.. 
```

我还在学习，完全坚持这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:58:47.553

如果你想显示一个嵌套层数不定的树结构，我认为你需要在其他语言中使用 mysql。使用 mysql 和 PHP，这可以通过一对嵌套的“while”和“if”循环来完成。但正如 Iouri 所说，“纯粹的”Mysql 方法（例如将表连接回自身）将仅支持与您拥有的连接数量一样多的嵌套级别。

```
SELECT 
    t1.name, t2.name, t3.name
FROM table t1
    JOIN table t2 ON t2.parent_id = t1.id
    JOIN table t3 ON t3.parent_id = t2.id
    # etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:52:57.447

这可能会有所帮助：

```
http://sqllessons.com/categories.html 
```

我认为它假设您有一定数量的嵌套级别。

# c# - C# 卡在使用 Get Set

> ID：12826221
> 
> 赞同：0
> 
> 时间：2012-10-10T18:44:15.507
> 
> 标签：c#, class, methods, get, set

在按照在线教程制作一个使用 Get 和 Set 和类的基本程序之后。我试图弄清楚如何从文本框中设置一个值，以便将其存储在我的“存储类”中，清除文本框中的数据，然后再次“获取”数据以显示在文本框中，这样就证明了如果有意义的话，我的第一个输入数据已正确设置。
所以我的表单有 3 个按钮，设置、清除、获取和 1 个文本框。这是我的“存储类”的代码，

```
 namespace Pracitse{
class Stored
{        

    private string Colour;
    private string getColour(string colour)
    {
        string displayColour;
        displayColour = colour;
        return displayColour;
    }

    public string MyProperty 
    {
        get { return Colour; }
        set{ Colour = getColour (value) ;}
    }   
    } 
```

这是我表单中的代码：

```
 private void setBtn_Click(object sender, EventArgs e){          
        Stored Details = new Stored();
        string setcolour;
        setcolour = Details.MyProperty;
        Details.MyProperty = colourBx.Text;             

    }

    private void getBtn_Click(object sender, EventArgs e)
    {
        Stored Details = new Stored();             
        string Displaycolour;
        Displaycolour = Details.MyProperty;
        colourBx.Text = (Displaycolour);                     
    }

    private void clrBtn_Click(object sender, EventArgs e)
    {            
        colourBx.Clear();            
    }       
}} 
```

我使用谷歌并尝试关注其他 tuts，但我似乎无法弄清楚如何存储第一个输入的数据。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T18:46:32.953

每次你这样做`Stored details = new Stored();`，你都会有一个*新*的、*不同* `Stored`的对象。

您需要*共享*一个：

```
Stored details = new Stored();

private void setBtn_Click(object sender, EventArgs e){          
    details.MyProperty = colourBx.Text;             
}

private void getBtn_Click(object sender, EventArgs e)
{
    string Displaycolour;
    Displaycolour = details.MyProperty;
    colourBx.Text = Displaycolour;
}

private void clrBtn_Click(object sender, EventArgs e)
{            
    colourBx.Clear();            
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:49:56.957

您的问题是您正在`Stored`单击处理程序中创建（实例化）一个新的且完全独立的类型对象。您的`MyProperty`Stored 类是一个实例属性，仅属于该对象的特定实例。

您需要做的是在表单中创建一个单独的 Stored 对象作为类成员，并在两个处理程序中引用它，而不是创建新对象。

换句话说，奥德在我点击提交前两分钟所说的话！

# php - 流程图测验库

> ID：12826223
> 
> 赞同：1
> 
> 时间：2012-10-10T18:44:24.420
> 
> 标签：php, jquery, logic

我有一个朋友在一家报社工作，他得到了一张大流程图，用于“你是哪一个？”类型的在线测验。你知道类型——“你是哪种类型的运动员？”，“你是哪个电视节目 X 角色？”等等。

本质上，问题 A 派生出两个选项，每个选项派生出具有 N 个选项的另一个问题，每个选项派生出具有另一个任意数量选项的另一个问题，依此类推，用户最终到达终点。您可能会在 1 次分叉后得到“你是 $this”的响应，或者可能需要 5 次。没有问题被使用超过一次。

我真的很好奇什么是最好的方法来做到这一点。它可能可以用一堆嵌套函数在大约 1000 行内完成，但我觉得我缺乏计算机科学教育在这一点上让我失望了。或者，在某个地方是否有一个对此有好处的库，或者这仅仅是编写一堆代码的问题？

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:53:10.853

如果流程图测验中只有一个最终结论，则该问题可与**20Q 游戏**、**类别页面排列**或**组织结构图**相媲美。

它可能涉及 3 列：*子问题*、*父问题*和*答案列表*。

*   一个*子问题*就像一个*父问题*，它下面还有其他节点，
*   *最终结论*就像一个子*问题*（没有任何其他节点，只有结论）
*   *答案列表*导致下一个儿童问题或最终结论。

如果提出最终问题，要么进入*最终结论*（并结束），要么返回到某个*父问题*（循环）。

希望这是有道理的。

![在此处输入图像描述](../Images/a92bf4592f7e8195709fd808c3faafb7.png)

# macports - 如何在不更新所有现有软件包的情况下让 MacPorts 安装某些东西

> ID：12826224
> 
> 赞同：1
> 
> 时间：2012-10-10T18:44:25.413
> 
> 标签：macports

我想用 MacPorts 安装一些东西。`badport`但是，我安装了一个始终无法更新的端口（我们称之为）。每次我这样做`port install x-package`时，它都会尝试在安装之前更新*所有内容*`x-package`。它不可避免地无法做任何事情，`x-package`因为它全部挂起`badport`，即使`badport`不可能是依赖项（它是一个应用程序，而不是一个库甚至是命令行工具）。

*此外，出于某种原因，MacPorts 会在我每次*运行命令时尝试运行*所有*这些更新，就好像成功运行的更新数量仅因为该最终应用程序未能更新而回滚。

 *有什么方法可以告诉 MacPorts 停止尝试“提供帮助”，而只是安装我该死的软件包？*

# php - 使用 FILE->PRINT 菜单时如何打印 OBJECT 元素的内容？

> ID：12826235
> 
> 赞同：1
> 
> 时间：2012-10-10T18:45:11.230
> 
> 标签：php, html, pdf, browser

我有一个 PHP 脚本，它在对象元素内显示 PDF。Adobe Reader 插件可以很好地处理这个问题，用户可以使用 Adob​​e 工具栏打印嵌入的 PDF。但是，一些用户*坚持*使用“文件”菜单（98% 的用户使用 Internet Explorer 8）来打印 HTML 文档。利用 IE 中的这个 File->Print 菜单，可以打印出*没有 OBJECT 元素的内容 (PDF) 的*HTML 文档。（[打印预览](https://i.imgur.com/DA0AX.png)）使用此方法在 Chrome 或 FF 中打印文档只会打印对象视口中当前显示的数据。也就是说，一个部分对象而不是实际的 PDF。

我在 StackOverflow 上[搜索](https://stackoverflow.com/search?page=2&tab=relevance&q=html%20pdf%20won%27t%20print)并阅读了[一些](https://stackoverflow.com/questions/9949566/embed-pdf-while-removing-print-save-etc) [相关](https://stackoverflow.com/questions/975652/silent-print-a-embedded-pdf) [问题](https://stackoverflow.com/questions/8639067/save-print-pdf-embedded)，但没有针对这种情况或案例的具体问题。其中一些“解决方案”使用 Javascript 方法或函数通过按钮或链接打印内容。如果我不能让我的用户使用浏览器中的 Adob​​e 工具栏来打印 PDF，我怀疑他们会改变主意使用“打印”按钮。

为什么IE中的File->Print方法会出现空白页？有没有办法让浏览器在使用 File->Print 菜单时打印 Object 元素的内容。没有 JS hack、按钮、“单击此处”的链接、iframe 或“内联显示”的建议等。

作为参考，此“查看 PDF”的代码如下（同样，它可以很好地在对象元素中显示 PDF 内容；没有问题）。

```
echo "
<html>
 <head>
  <title>View PDF</title>
 </head>
 <body scroll='no'>
  <object data='getFile.php?f={$file_hash}' type='application/pdf' width='100%' height='100%' >
  <h2>Error: No PDF plugin</h2>
  <p>The browser does not have a PDF viewer installed.  In order to view the PDF in the browser, please <a href='http://get.adobe.com/reader'>download Adobe Reader</a>. </p>
  </object>
 </body>
</html>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:03:55.043

据我所知，这个问题没有解决方案。[我已经看到一些开发人员通过生成 PDF 文件来](https://stackoverflow.com/questions/6167995/generate-a-pdf-that-automatically-prints)“解决”问题，该文件在打开时会自动显示打印对话框

另一种选择是在删除工具栏和菜单的新窗口中显示 PDF 文件，以避免视觉模糊。

```
Window.open(url, "_blank", "location=0,menubar=0,toolbar=0"); 
```

我不知道这是否有效，但您可以尝试[检测浏览器打印事件](https://stackoverflow.com/questions/1234008/detecting-browser-print-event)，然后调用`pdfDoc.printAll();`您的 Acrobat Reader 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:43:36.420

只打开 PDF - 没有 HTML 和对象。然后文件->打印将始终有效。

当然，如果 PDF 显示在浏览器中或在新的阅读器窗口中打开，则更多地取决于浏览器/阅读器配置

# jms - HornetQConnectionFactory 不是 javax.jms.ConnectionFactory

> ID：12826238
> 
> 赞同：2
> 
> 时间：2012-10-10T18:45:20.440
> 
> 标签：jms, hornetq

我有一个连接工厂的spring-bean到hornetQ：

```
 <bean name="connectionFactory" class="org.hornetq.jms.client.HornetQConnectionFactory" >
            <constructor-arg value="false" />
            <constructor-arg ref="transportConfiguration" />
        </bean> 
```

并且，这个 bean 正在使用它：

```
<bean name="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="connectionFactory"></property>
</bean> 
```

当 'jmsTemplate' bean 启动时，所有异常都会失败：

> 无法将类型“org.hornetq.jms.client.HornetQConnectionFactory”的属性值转换为所需类型“javax.jms.ConnectionFactory”

即jmsTemplate 要求connectionFactory 是javax.jms.ConnectionFactory，但它不是。

问题，如何以及在何处下载“HornetQConnectionFactory”的正确实现以满足要求。

我在我的 pom.xml 中使用了这个 deps：

```
 <hornetq.version>2.2.13.Final</hornetq.version>
   ...
   <dependency>
        <groupId>org.hornetq</groupId>
        <artifactId>hornetq-core</artifactId>
        <version>${hornetq.version}</version>
    </dependency>

    <dependency>
        <groupId>org.hornetq</groupId>
        <artifactId>hornetq-jms</artifactId>
        <version>${hornetq.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hornetq</groupId>
        <artifactId>hornetq-spring-integration</artifactId>
        <version>${hornetq.version}</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T16:05:11.037

最好的方法是使用 HornetQJMSClient.createConnectionFactory 方法

您直接使用该实现，并且会发生变化。

HornetQJMSClient 是 API 的一部分，因此可以更好地在版本之间保持合同。

您应该将您的示例转换为使用 HornetQJMSClient ...

关于您找到的博客，也许您应该指出这个问题/答案，因为该博客使用的是内部实现而不是公共 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:57:34.273

我想我找到了解决方案：

只使用***HornetQJMSConnectionFactory***（里面有***JMS***字）。似乎 HornetQConnectionFactory 的旧实现是 javax.jms.ConnectionFactory，但现在不是。

# c# - 使用传感器读数协调 Zaber 设备的运动

> ID：12826241
> 
> 赞同：0
> 
> 时间：2012-10-10T18:45:41.593
> 
> 标签：c#, .net, serial-port, zaber

我在[Zaber 控制台](http://www.zaber.com/wiki/Software/Zaber_Console)中编写了一个脚本来控制我的阶段，但现在我想在移动过程中获取一些传感器读数。我想移动阶段，阅读，然后再次移动阶段。有时传感器读数会影响我需要做的动作。如何协调运动与传感器读数？

我想在一个串口上与我的 Zaber 设备通信，而在第二个串口上与我的传感器通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:45:41.593

当您编写 Zaber 控制台脚本时，您可以访问 Microsoft.NET 框架中的所有内容，因此您可以自己打开第二个串行端口。这是一个尝试在压力传感器上保持恒定压力的简单示例。每次通过回路时，它都会读取压力传感器，然后缩回设备以增加压力或伸出设备以降低压力。

```
// C# example that shows how to communicate with a second serial port
#template(simple)

const string LOAD_PORT = "COM9";
const int MAX_SPEED = 20000;
const int TARGET_PRESSURE = 1000; // in thousandths of a pound

// set up load cell on serial port
using (var port = new System.IO.Ports.SerialPort())
{
    port.PortName = "COM9";
    port.BaudRate = 9600;
    port.ReadTimeout = 500;
    port.WriteTimeout = 500;

    port.Open();

    port.WriteLine("ct0\r");
    port.ReadLine();

    while ( ! IsCanceled)
    {
        port.WriteLine("o0w1\r");
        var pressure = Int32.Parse(port.ReadLine());
        int velocity = (pressure - TARGET_PRESSURE) * 20;
        int speed = Math.Min(Math.Abs(velocity), MAX_SPEED);
        velocity = speed * Math.Sign(velocity);
        Conversation.Device.Send(Command.MoveAtConstantSpeed, velocity);
    }
} 
```

该`using`块确保即使发生错误也关闭串行端口。我使用的压力传感器理解`ct0`为去皮命令和`o0w1`返回当前压力的命令，您需要查看传感器的手册以了解它理解哪些命令。您还需要查看要使用的波特率和其他设置。该[`SerialPort`文档](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)列出了您可以设置的所有通信参数。

如果要记录传感器读数中的数据，一种选择是仅使用`Output.WriteLine(data)`在输出窗口中转储数据值。然后，您可以将它们复制并粘贴到电子表格或其他文件中。如果要直接写入文件，看[`File.CreateText()`方法](http://msdn.microsoft.com/en-us/library/system.io.file.createtext.aspx)。

# php - PHP 和 Javascript 系统算我随机添加 +1

> ID：12826245
> 
> 赞同：1
> 
> 时间：2012-10-10T18:45:48.040
> 
> 标签：php, count, char

我在 php 和 javascript 中创建了一个系统，用户可以在其中输入一定数量的字符（5）并自动更新 mysql 中 db 中的一个单元格，但是有一个问题......系统时不时地不会计数+2 而不是 +1，我将发布代码

```
$sql=mysql_query("select * from bare");
while($row=mysql_fetch_array($sql))
{
//se voglio fare sanitizer $name = mysql_real_escape_string($_POST['name']);
$id= $row['id'];
$cab=$row['cab'];
$qty=$row['qty'];
//echo "$id $cab $qty <br/>";

if(isset($_POST['submitbar']))
    $name = $_POST['name'];
    {   
         if( $name == $cab) {
            echo '<p>';
            $nqty = $qty+1;
            mysql_query("UPDATE bare SET qty = $nqty WHERE cab = '$cab'");
            echo "Hai aggiunto 1 elemento a $cab. Ora $cab vale $nqty";
            echo '</p>';
        } else {
    //echo '<p>Non corrisponde a nessun codice a barre nel database<p>';    

    }
}
}

?>
<h1>Aggiorna le quantit&agrave; utilizzando il Barcode</h1>
<form id="form" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
   <input id="seleziona" type="text" name="name"><br>
   <input type="submit" name="submitbar" value="Invia"><br>
</form>
<!--<script type="text/javascript">
$(function() {
    $('input').charCount(25);
});
</script> -->
<script type="text/javascript">
//seleziona input automatico
    $(document).ready(function(){
        $('#seleziona').jqEasyCounter();

});
</script>
<script>
//invio automatico
    $("#seleziona").keyup(function(){
         if($(this).val().length == 5)
            $('#form :submit').click();
    })
</script> 
```

我**认为**这个问题是

```
$nqty = $qty+1; 
```

因为变量 $nqty 仍然在内存中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:10:35.090

在您的情况下，我会建议以下内容：

```
 $name = mysql_real_escape_string($_POST['name']);
    $sql = mysql_query("SELECT qty FROM bare WHERE cab = '$name'");
    $row = mysql_fetch_array($sql);

    if(isset($_POST['submitbar']) && $row)  {
        $nqty = $row['qty'] + 1;
        $name = mysql_real_escape_string($_POST['name']);
        mysql_query("UPDATE bare SET qty = qty + 1 WHERE cab = '$name'");
        echo "<p>Hai aggiunto 1 elemento a $name. Ora $name vale $nqty</p>";
    } 
```

那会 ：

1.  限制代码中的迭代次数
2.  更新相同的行
3.  显示相同的信息

（*在并发更新的情况下，UI 显示可能不是 100% 正确，但后端数据应该是*）

作为旁注——因为这不是你的问题——我建议你搜索*MVC*术语，因为分离数据库、php 逻辑和 html 显示是一个很好的做法。你没有做，但它可能只是一个快速&肮脏/非生产代码:-)

编辑：除了 drobert 关于原子性和准备好的语句的好建议之外，这将需要使用 PDO mysql（值得在您的`phpinfo()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:51:50.557

在像 PHP 这样的无状态系统中，解决此问题的一般方法是让数据库处理原子增量，例如将语句修改为：

```
UPDATE bare SET qty = qty + $nqty WHERE cab = '$cab' 
```

在这种情况下，$nqty 将是添加到 'qty' 的数字，并且数据库将确保它以原子方式发生，以避免[读取-修改-写入](http://en.wikipedia.org/wiki/Read_modify_write)竞争条件。

此外，将变量直接插入 sql 字符串（由于[sql injection](http://en.wikipedia.org/wiki/Sql_injection)）是不好的做法。而是使用[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)。

# c# - 检查随机数重复

> ID：12826246
> 
> 赞同：1
> 
> 时间：2012-10-10T18:46:00.213
> 
> 标签：c#, sql, sql-server

我正在生成一个随机数入场号码，这是我的 DAL

```
 public static int randomgen()
   {
       int id=0;
       int number = r.Next(100);
       HttpContext.Current.Session["number"] = "SN" + (" ") + number.ToString();
       SqlConnection con = DBConnection.OpenConnection();
       try
       {
           string sql1 = "select admissionno from tblstudent_details";
           SqlCommand cmd=new SqlCommand(sql1,con);
           SqlDataReader dr = cmd.ExecuteReader();
           if (dr.Read())
          {
               id = Convert.ToInt32(dr[0]);

           }
            dr.Close();
           return id;
       }

       catch (Exception)
       {

           throw;
       }
   } 
```

我正在检查是否生成了任何重复项，但是我收到一个错误，例如输入字符串的格式不正确？我在哪里做错了？还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:25:22.187

你问有没有更好的方法...

根据我对这个问题的理解，您尝试做的是选择一个随机值，然后检查数据库以查看该值是否已经存在。您想将一个值返回给 UI 以告诉 UI 该值是否存在......

这里有几个可供考虑的选择......

```
public static bool randomgen() 
{
    bool isFound = false;
    string admissionNumber = "SN " + r.Next(100); 
    HttpContext.Current.Session["number"] = admissionNumber; 
    using (SqlConnection con = new SqlConnection()) // use "using" to guarantee connection is closed
    {
        string sql1 = "SELECT CASE WHEN EXISTS(SELECT admissionno FROM tlblstudent_details WHERE admissionno = @admissionno) THEN 1 ELSE 0 END";
        using (SqlCommand cmd = con.CreateCommand())
        {
             cmd.CommandText = sql;
             cmd.Parameters.AddWithValue("@admissionno", number);
             using (SqlDataReader dr = cmd.ExecuteReader())
             {
                 if (dr.Read())
                 {
                     isFound = (Convert.ToInt32(dr[0]) == 1)
                  }
              }
         }
     }
     return isFound;
} 
```

这样，您就可以让 SQL Server 检查该值是否存在。

另一种方法...

不确定如果值不是唯一的，是否需要提示用户，如果这不是要求，那么我会考虑不同的方法；继续尝试，直到你找到一个独特的价值......像这样......

```
public static int randomgen() 
{ 
    bool isFound = true;
    while (isFound)
    {
        string admissionNumber = "SN " + r.Next(100); 
        using (SqlConnection con = new SqlConnection()) // use "using" to guarantee connection is closed
        {
            string sql1 = "SELECT CASE WHEN EXISTS(SELECT admissionno FROM tlblstudent_details WHERE admissionno = @admissionno) THEN 1 ELSE 0 END";
            using (SqlCommand cmd = con.CreateCommand(sql1))
            {
                cmd.Parameters.AddWithValue("@admissionno", admissionNumber);
                using (SqlDataReader dr = cmd.ExecuteReader())
                {
                    if (dr.Read())
                    {
                        isFound = (Convert.ToInt32(dr[0]) == 1)
                     }
                 }
             }
        }
        return number;
    } 
```

这会一直检查直到返回唯一值。然后将该唯一值返回给调用方法。现在，您从调用者那里设置了 HttpContent.Current 会话，让这个方法的责任*只在于*找到一个唯一的准入号码。第二种方法的缺点是可能需要很长时间才能找到唯一值，具体取决于已经使用了多少值，特别是考虑到您只允许 100 个值。

希望这能给你很好的选择。如果您还有其他问题，请告诉我。

# android - 将android中的音乐文件读入字节数组？

> ID：12826247
> 
> 赞同：3
> 
> 时间：2012-10-10T18:46:03.587
> 
> 标签：android

我正在尝试从我的 android 设备读取音乐文件的内容，尽管我已经能够检索文件并播放它们，但我需要读取音乐文件并将它们转换为字节数组。有人可以帮助我：以下是我的代码：

```
 public void retrieve_music_files() {
     music_column_index =   musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA); 
     musiccursor.moveToPosition(position); 
     String filename = musiccursor.getString(music_column_index);
     Cursor musiccursor;
     MediaPlayer mMediaPlayer;
     int music_column_index;

     try {
         if (mMediaPlayer.isPlaying()) {
             mMediaPlayer.reset();
         }
         mMediaPlayer.setDataSource(filename);
         mMediaPlayer.prepare();
         mMediaPlayer.start();
     } catch (Exception e) {
     }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-17T11:10:10.890

我为我的项目使用了以下代码。希望这对你有用。

```
String musicFilePath="your music file path";
byte[] fileByteArray;
File file = new File(musicFilePath);
fileByteArray = new byte[(int)file.length()]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T01:54:36.347

您应该能够按照此链接中的代码将任何文件转换为字节数组。

[http://www.mkyong.com/java/how-to-convert-file-into-an-array-of-bytes/](http://www.mkyong.com/java/how-to-convert-file-into-an-array-of-bytes/)

# json - @RequestBody 与泛型

> ID：12826248
> 
> 赞同：2
> 
> 时间：2012-10-10T18:46:06.637
> 
> 标签：json, binding, jackson, spring-annotations

我有必要将 JSON 消息反序列化为通用对象/接口，而不是特定类型。

我浏览了这篇文章[Interfaces 和 @RequestBody](https://stackoverflow.com/questions/4737579/interfaces-and-requestbody)并尝试实现相同的功能。

但它再次失败并出现同样的错误

```
Can not construct instance of XXXXX, problem: abstract types either need to be mapped to concrete types, have custom deserializer, or be instantiated with additional type information 
```

当控件到达方法时，对象被构造为链接的哈希映射。可能出了什么问题？我是否正确地接近解决方案？

# python - 如何将 Python 变量发送到 bash 变量？

> ID：12826250
> 
> 赞同：0
> 
> 时间：2012-10-10T18:46:13.613
> 
> 标签：python, system

我正在尝试使用 Python 从列表中选择一个变量，然后使用 bash 命令大声说出它。现在我有这样的东西

```
foo = ["a","b","c","d"]
from random import choice
x = choice(foo)
foo.remove(x)
from os import system
system('say x') 
```

这说“x”，我需要的是它说出`x`变量的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:49:40.603

我想你可以使用`os.system`，但更好的可能是`subprocess`：

```
import subprocess
subprocess.call(['say',x]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:48:24.473

您正在传递字符串，您可以使用 x 的值，例如

`sytem('say {0}'.format(x))`

传递字符串时，您可以使用字符串格式。当您意识到您需要在字符串中获取 x 的值而不是变量 x [http://docs.python.org/library/string.html#format-examples](http://docs.python.org/library/string.html#format-examples)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:48:48.393

您可以使用[格式](http://docs.python.org/library/stdtypes.html#str.format)：

```
system('say {}'.format(x)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:48:49.843

使用字符串格式：

```
In [9]: x="ls -ld"

In [10]: os.system("{0}".format(x))
drwxr-xr-x 41 monty monty 4096 2012-10-10 22:46 .
Out[10]: 0 
```

# php - 使用 PHP/SQL 的博客提要/存档页面

> ID：12826252
> 
> 赞同：0
> 
> 时间：2012-10-10T18:46:23.740
> 
> 标签：php, mysql, dynamic, blogs

我被要求创建一个网站并希望对其进行设计，以便用户可以将新的博客文章添加到新闻提要中。我已经尝试过了，并成功创建了一个非常简单的博客功能，可以在 sql 数据库中添加/读取条目。

但是，我想为用户添加的每个博客条目动态创建新网页。我该怎么办？我是 Php/Sql 的新手，所以我不确定从哪里开始。任何指向正确方向的指针将不胜感激。

至于我之后的例子，请参阅：http: [//kingslandprimaryschool.co.uk/](http://kingslandprimaryschool.co.uk/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:31:22.317

解决方案是雇佣大量员工，他们手动创建数百个脚本。很多工作，但你还能做什么？不，开个玩笑。

诀窍不是为每个博客页面创建一个新文件，您只需更改路由即可。首先创建一个通过一致 URL 工作的博客系统，例如`blog.php?p=home`. 完成后，创建一个 .htaccess 文件，将某些请求路由到该页面。例如，如果您想`my.site/home`加载一个 URL，`blog.php?p=home`您将需要以下 .htaccess 脚本：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    # Allow existing directories and files
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f

    # Route the request
    RewriteRule ^(.*)$ blog.php\?p=$1 [QSA]
</IfModule> 
```

这将首先检查请求的 URL 中是否存在文件。如果是，则显示该文件。否则，`blog.php?p=myPath`被打开。重定向后的`[QSA]`标记意味着问号之后的所有内容都传递给您重定向到的脚本，因此如果您要转到`my.site/home?day=wednesday`该页面`blog.php?p=home&day=wednesday`，则会加载。

如果您需要更多帮助，请随时提出任何问题。或者，您可以只搜索“htaccess mod_rewrite”或“PHP pretty url”以获取更多信息。希望这有帮助！

# firefox-addon - 获取Firefox插件上输入元素的值

> ID：12826256
> 
> 赞同：0
> 
> 时间：2012-10-10T18:46:40.270
> 
> 标签：firefox-addon, firefox-addon-sdk

我如何在 main.js 中获取此输入元素的值：

```
<input type="hidden" value="12124054" id="ctl00_cphContent_hdnID" name="ctl00$cphContent$hdnID"> 
```

我试过了`var id = document.getElementById("ctl00_cphContent_hdnPlayerID").value;`，`contentWindow.document.getElementById("ctl00_cphContent_hdnPlayerID").focus();`但我收到了文档和 contentWindows 无法识别的错误:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:25:15.397

您需要使用内容脚本从页面获取值，然后将值发送到 main.js - 这是因为 web 内容本质上不受 addon-sdk 的信任。有关如何使用内容脚本的更多信息，请参阅这些文档：

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.0/dev-guide/addon-development/web-content.html#content_script_events](https://addons.mozilla.org/en-US/developers/docs/sdk/1.0/dev-guide/addon-development/web-content.html#content_script_events)

这是 Builder 上的一个示例插件，它展示了如何将内容脚本中的值传递回 main.js。在这种情况下，我使用 xui 库来更轻松地绑定 pgae 中的事件。

# android - Android glGetFloatv 调用未实现的“OpenGL ES API”

> ID：12826258
> 
> 赞同：2
> 
> 时间：2012-10-10T18:46:52.647
> 
> 标签：android, opengl-es

> **可能重复：**
> [GL11 (Android) 中的 getFloatv 函数存在问题](https://stackoverflow.com/questions/7125557/problem-with-getfloatv-function-in-gl11-android)

当在我的 draw 方法中调用“ **glGetFloatv** ”时，我发现 ModelMatrix 填充了零，但我希望 ModelMatrix 被填充，因为对象在 Z 和 Y 轴上平移了一个单位。寻找可能是什么原因，我发现 LogCat 正在抛出下一条消息：“ **libEGL 调用了未实现的 OpenGL ES API** ”。

我可以猜测我没有运行正确的 OpenGL 版本，但我已经强制使用 OpenGL ES 2，但问题仍然存在。

我的源代码如下：

渲染类

```
@Override
public void onDrawFrame(GL10 gl) {
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glLoadIdentity();
        objectToDraw.Draw(gl);
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {

    gl.glViewport(0, 0, width, height);     
    gl.glMatrixMode(GL10.GL_PROJECTION);    
    gl.glLoadIdentity();
    GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig egl) {

    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glClearDepthf(1.0f);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthFunc(GL10.GL_LEQUAL); 
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
} 
```

对象绘制方法。

```
public void Draw(GL10 gl){
        gl11 = (GL11) gl;           
        gl11.glGetFloatv(GL11.GL_MODELVIEW_MATRIX, _matrix,0);
            super.Draw();
        gl.glPopMatrix();
} 
```

最后，我没有使用 Eclipse 模拟器，我正在 HTC Wild Fire 设备上调试应用程序（模拟器太慢）

# java - 将 netbeans 升级到 7.2 后出错

> ID：12826259
> 
> 赞同：1
> 
> 时间：2012-10-10T18:46:54.687
> 
> 标签：java, netbeans, netbeans-7, netbeans-platform, logfiles

我使用的是 netbeans 6.1，然后当我尝试运行以前的 java 源代码错误时将其升级到 netbeans 7.2

```
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: C:\Program Files (x86)\Java\jdk1.7.0_07\jrelog4j_jgap_lf.log (Access is denied)
    at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:136)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:290)
    at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:194)
    at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:164)
    at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:133)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:97)
    at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:689)
    at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:647)
    at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:544)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:440)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:476)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:125)
    at org.apache.log4j.Logger.getLogger(Logger.java:105)
    at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:289)
    at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:109)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.commons.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1116)
    at org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:914)
    at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:604)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:336)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:310)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:685)
    at net.didion.jwnl.util.MessageLog.<init>(MessageLog.java:11)
    at net.didion.jwnl.dictionary.Dictionary.<clinit>(Dictionary.java:24) 
```

任何想法如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:07:52.950

看起来您不允许写入给定的文件夹，或者路径名中的空格是问题的原因。

您可以尝试将日志文件的路径配置到不同的目录中，最好在其名称中没有空格？

# linux - 'find 的输出格式是什么？-ls'？

> ID：12826262
> 
> 赞同：4
> 
> 时间：2012-10-10T18:47:26.910
> 
> 标签：linux, find

我正在查看`find . -ls`. 例如，下面是`/lib64`CentOS 系统上的一小段摘录：

```
163542   28 -rwxr-xr-x   1 root     root        28448 Aug  4  2010 ./libvolume_id.so.0.66.0
163423    0 lrwxrwxrwx   1 root     root           16 Mar  3  2010 ./libwrap.so.0 -> libwrap.so.0.7.6
163601    0 lrwxrwxrwx   1 root     root           11 Nov  9  2010 ./libc.so.6 -> libc-2.5.so 
```

`ls -dils`find(1) 手册页显示“以标准输出格式列出当前文件”。然后我试图从 ls(1) 手册页中找出答案，但我被第二列难住了。任何想法？

供参考：列（第一行带有参考）是：

1.  `inode 163542`
2.  `??? 28` *这是什么？`stat`该文件未提及任何等于“28”的字段*
3.  `permissions -rwxr-xr-x`
4.  `hard-links 1`
5.  `owner root`
6.  `group root`
7.  `size(bytes) 28448`
8.  `modified Aug 4 2010`
9.  `name ./libvolume_id.so.0.66.0`
10.  （对于逻辑链接`-> softlink`：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:48:44.473

Doh，对大小的随意回归表明它大约是 1024 字节块的数量......

# ruby - 为什么使用扩展/包含而不是简单地在主对象中定义方法？

> ID：12826270
> 
> 赞同：1
> 
> 时间：2012-10-10T18:48:02.137
> 
> 标签：ruby

RSpec 添加了一个“描述”方法来做顶级命名空间。但是，他们不是简单地在任何类/模块之外定义方法，而是这样做：

```
# code from rspec-core/lib/rspec/core/dsl.rb 
module RSpec
  module Core
    # Adds the `describe` method to the top-level namespace.
    module DSL
      def describe(*args, &example_group_block)
        RSpec::Core::ExampleGroup.describe(*args, &example_group_block).register
      end
    end
  end
end

extend RSpec::Core::DSL
Module.send(:include, RSpec::Core::DSL) 
```

与简单地在任何模块和类之外定义描述相比，使用这种技术有什么好处？（据我所知，DSL 模块在 rspec-core 的其他任何地方都没有使用。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:47:32.467

[几个月前](https://github.com/rspec/rspec-core/commit/de01e0567f5ca49ad445d90387e947ad116f2081)，我进行了此更改，因此`describe`不再将其添加到系统中的每个对象中。如果您在顶层定义它：

```
def describe(*args)
end 
```

...那么系统中的*每个*对象都会有一个私有`describe`方法。RSpec 并不拥有系统中的每个对象，也不应该随意添加`describe`每个对象。我们只希望 describe 方法在两个范围内可用：

```
describe MyClass do
end 
```

（在顶层，脱离主要对象）

```
module MyModule
  describe MyClass do
  end
end 
```

（在任何模块之外，因此您将描述嵌套在模块范围内）

将它放在一个模块中可以很容易地扩展到主对象（仅将其添加到该对象，而不是每个对象）并包含它`Module`（将其添加到所有模块）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:12:12.693

实际上，如果这就是代码中的全部内容，我真的不相信它会更好——如果有的话。一个常见的论点是，您可以通过检查方法所有者轻松检查 RSpec 是否负责在全局命名空间中添加此方法。不知何故，它从来没有觉得这是必要的，因为该方法的位置已经存储了该信息。

在任何范围之外定义方法将等同于在 Object 中定义私有实例方法：

```
class Object
  private
  def double(arg)
    arg * 2
  end
end

double(3)      # OK
3.double(3)    # Error: double is private
self.double(3) # Error: double is private 
```

我认为隐私是一个有用的方面，因为它可以防止进行某些没有意义的方法调用，而问题中显示的代码缺少这些方法。

不过，在模块中定义方法有一个好处，但 RSpec 代码似乎没有使用它：使用`module_function`，不仅可以保留实例方法的私有性，还可以获得公共类方法。这意味着如果您有一个同名的实例方法，您仍然可以通过使用类方法版本来引用模块定义的方法。

一个常见的例子`module_function`是`Kernel`模块，它包含了大多数类似函数的核心方法，比如`puts`（另一个是`Math`）。如果你在一个重新定义的类中`puts`，你仍然可以`Kernel#puts`在需要时显式使用：

```
class LikeAnIO
  def puts(string)
    @output << string
  end

  def do_work
    puts "foo" # inserts "foo" in @output
    Kernel.puts "foo" # inserts "foo" in $stdout
  end
end 
```

# android - Android项目：返回多个列表对象形成一个方法

> ID：12826272
> 
> 赞同：0
> 
> 时间：2012-10-10T18:48:09.647
> 
> 标签：android, arraylist

我正在开发一个 Android 项目，我需要`List`从一个方法返回多个对象。这可能吗？

例如，我创建了两个不同的`List`对象....

```
List<String> tid_list=new ArrayList<String>();
List<String> tno_list=new ArrayList<String>(); 
```

我想从一个方法中返回它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:54:03.560

您可以执行以下操作：

1.由于列表是引用，您可以通过方法的参数列表传递它们。

2.或者您可以创建一个引用任意数量列表的类。

3.您可以返回ArrayLists的ArrayList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:00:29.207

根据定义，一个函数只能返回一个值，因此您有几个选择。

*   您可以创建一个新类，该类具有`tid_list`并`tno_list`作为它的属性
*   您可以让您的方法返回一个`ArrayList`包含两个`ArrayList`s
*   如果`tno_list`和`tid_list`是类的属性，而函数是同一个类的方法，可以在方法内部进行编辑，完全跳过参数/返回值路由。

# jquery - CSS jquery使用像素从下到上移动div

> ID：12826277
> 
> 赞同：0
> 
> 时间：2012-10-10T18:48:34.693
> 
> 标签：jquery, css, jquery-animate, jsfiddle

嘿，我有一个 JSFiddle，我一直在努力让它从下到上进行动画处理，而不是从上到下目前正在做的事情。

这将用作图像前面的筹款人金额的动画​​条形图，该条形图将代表他们迄今为止筹集的美元金额。

jsfiddle 在这里：http: [//jsfiddle.net/kboucher/YDruG/](http://jsfiddle.net/kboucher/YDruG/)

任何帮助都会很棒！！！

**更新**

HTML 代码：

```
<a href="#" id="button">View 100 (out of 500)</a>

<div id="barGraph-container">
    <div id='barGraph'></div>
</div>​ 
```

JS：

```
$('#button').click(function(){
    $('#barGraph').animate({height:'72px'}, 500);
}); 
```

​ CSS：

```
#barGraph-container {
    height: 200px;
    position: relative;
}
#barGraph {
    height: 200px;
    width: 50px;
    background-color: #000;
    position: absolute;
    bottom: 0;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:52:09.957

尝试在条形图周围放置一个容器，并使用绝对定位将其锚定到容器底部。

像这样：http: [//jsfiddle.net/kboucher/YDruG/](http://jsfiddle.net/kboucher/YDruG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:02:32.783

通过给图表栏一个相对位置，并添加一个顶部位置动画来补偿降低的高度，您可以很容易地实现这一点。

[http://jsfiddle.net/GZeu3/19/](http://jsfiddle.net/GZeu3/19/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:03:38.773

这是一个使用 2 个 div 来“显示”看起来正在增长的图形的示例。

[http://jsfiddle.net/GZeu3/23/](http://jsfiddle.net/GZeu3/23/)

# javascript - 如何在 JavaScript 中更改构造函数内的函数？

> ID：12826278
> 
> 赞同：0
> 
> 时间：2012-10-10T18:48:40.730
> 
> 标签：javascript, constructor

我需要编辑位于构造函数内部的函数。例子：

```
some.thing = function() {
    this.somefn = function() { // this is the function that I need to fix
        ...
    }
} 
```

但是函数不仅应该被编辑为单个对象（`new obj = some.thing();`），而且应该被这个构造函数创建的任何对象所编辑。

那么有没有办法编辑这样的内部功能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:56:45.403

解决方案似乎有点太明显了，所以我想知道问题是否在于您无法访问原始代码，并且您需要一个更动态的解决方案。

如果是这样，一种选择*可能*是用您自己的构造函数覆盖构造函数，并让它调用原始构造函数，然后更新对象。

* * *

*原始代码：*

```
some.thing = function() {
    this.somefn = function() { // this is the function that I need to fix
        ...
    }
} 
```

* * *

*你的代码：*

```
 // cache a reference to the original constructor
var _thing = some.thing;

               // your constructor
some.thing = function() {

             // invoke the original constructor on the new object.
    _thing.apply(this, arguments);

    this.somefn = function() { /*your updated function*/ };
};

        // maintain inheritance
some.thing.prototype = Object.create(some.thing.prototype);

  // make an instance
var theThing = new some.thing(); 
```

现在你得到了原始构造函数和原型链的好处，但是你将自己的函数注入到正在创建的对象上。

唯一的麻烦可能是您替换的原始函数可能会特殊使用原始构造函数的变量范围。如果是这样，那将是一个需要解决的问题。

在调用您的方法之前，可以保留并调用您覆盖的原始方法。不确定这种情况是否需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:06:40.923

这是一个基于原型的解决方案：

```
var Something = function () {
    this.f = function () {
       console.log("Something");
    };    
};
var Old = Something;
var Something = function () {
    Old.apply(this);
    this.f = function () {
        console.log("New");
    };
};
Something.prototype = new Old();

var s = new Something();
s.f(); // prints "New" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:01:00.773

我完全知道你的需要，因为上周我通过了它。我刚刚在 javascript 中实现了一个完整的继承模型，据我所知，在子类初始化时，我遇到了重写构造函数和调用父类的 ctor 的问题。

所以我只是通过修改我的设计中的一些点解决了这个问题，它现在就像一个魅力！（类似于 C#，但在 Javascript 中）

顺便说一句，我不建议您以这种方式更改方法内容，但这是一种方法（我自己没有这样做，我也不建议这样做。还有很多其他方法，但是这是最简单的）：

```
var test = function() { /*InjectionPlace*/ };

eval("var newTest = " + test.toString().replace(
     "/*InjectionPlace*/", 
     "var i = 10; alert(i);"
));

test();

newTest(); 
```

干杯

# wcf - 从 WCF 服务如何以当前用户而不是 IIS\DefaultApppool 的身份调用第三方 dll 中的方法

> ID：12826286
> 
> 赞同：1
> 
> 时间：2012-10-10T18:48:53.897
> 
> 标签：wcf, impersonation, cyber-ark

我需要编写一个 WCF 服务，该服务将使用 VBA 代码中的服务名字对象从 MS Excel 中调用。到目前为止，我已经弄清楚了那部分。

我也有模拟工作，所以如果我要从 web 方法返回当前用户，它将返回我的用户名，而不是 IIS\DefaultAppPool 或任何 IIS 正在运行的...

所以这是我的问题。我有一个第三方 dll “如果有人感兴趣，Cyber​​Ark 密码管理”，我在其中创建了一个 PWD 对象，设置了一些参数，然后调用了一个名为 Getpassword 的方法。现在我可以调用该方法，但我总是遇到身份验证失败。如果我深入研究正在运行的 Cyber​​Ark 代理的日志，似乎即使我正在使用 Impersonation，dll 方法仍被称为 IIS\DefaultAppPool

这里有一些片段......

在方法级别打开模拟

```
[OperationBehavior(Impersonation = ImpersonationOption.Required)] 
```

如我所料，调用此方法会返回我的域和用户名

```
WindowsIdentity.GetCurrent().Name 
```

但是这条线被称为 IIS\DefaultAppPool

```
password = PasswordSDK.GetPassword(passRequest); 
```

我尝试过在代码中进行模拟而不是使用注释，我还尝试了一个使用 bolck 的模拟对象，但似乎没有任何效果，所以这就是我的想法。

1.  出于安全原因，该 dll 不允许我冒充调用者

2.  出于安全原因，可能是 .NET 框架不允许再次这样做

3.  我不知道，希望得到一些帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:54:29.713

您可以[自行托管](http://msdn.microsoft.com/en-us/library/ms750530.aspx)应用程序，而不是使用 IIS 来托管。然后该服务将在已经以当前用户身份运行的进程中运行。

（如果这是一个选项）

# iphone - in -init 方法不会改变子视图

> ID：12826288
> 
> 赞同：0
> 
> 时间：2012-10-10T18:49:28.703
> 
> 标签：iphone, objective-c, ios, ios5, superclass

我有一个从 UIView 派生的对象，它是 AIItem，这个项目有 UIImageView *status_view，现在我需要从 AIItem 派生的另一个对象 AIAnotherItem，问题出在 status_view。

例如 ：

AIItem 初始化方法

```
-(id)initWithName:(NSString *)name {
self = [super init];
if (self) {
    status_view = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,50,50)];
    status_view.image = [UIImage imageNamed:@"item_image.png"];
    [self addSubview:status_view];
} 
```

}

AIAnotherItem 初始化方法

```
-(id)initWithName:(NSString *)name {
self = [super initWithName:name];
if (self) {
   status_view.image = [UIImage imageNamed:@"another_item_image.png"];
}
return self;
} 
```

在 AIAnotherItem 我将另一个图像设置为 status_view 但它不会改变。问题是为什么？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:15:56.483

不管这不起作用的机制是什么（我相信你会弄明白的），我相信你可能没有以正确的方式解决这个问题。

`AIItem.h`拥有一个空属性的类不是更合乎逻辑`statusView`吗？然后两个派生类（或同一个子类的实例）继承相同`statusView`但用不同的图像填充它？

我认为这将更接近于*[继承](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/OOP_ObjC/Articles/ooObjectModel.html#//apple_ref/doc/uid/TP40005149-CH5-SW12)*背后的哲学。

# python - 同时引发两个错误

> ID：12826291
> 
> 赞同：22
> 
> 时间：2012-10-10T18:49:34.680
> 
> 标签：python

有没有办法通过使用 try 和 except 同时引发两个错误？例如， `ValueError`和`KeyError`。

我怎么做？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2018-05-18T15:27:21.227

该问题询问如何**引发**多个错误而不是捕获多个错误。

严格来说，您不能引发多个异常，但可以引发包含多个异常的对象。

```
raise Exception(
    [
        Exception("bad"),
        Exception("really bad"),
        Exception("really really bad"),
    ]
) 
```

**问题**：你为什么要这样做？
**答**：在循环中，当您想引发错误但处理循环以完成时。

例如，当与您一起进行单元测试时，`unittest2`您可能希望引发异常并继续处理，然后在最后引发所有错误。这样你就可以一次看到所有的错误。

```
def test_me(self):

    errors = []

    for modulation in self.modulations:
        logging.info('Testing modulation = {modulation}'.format(**locals()))

        self.digitalModulation().set('value', modulation)
        reply = self.getReply()

        try: 
            self._test_nodeValue(reply, self.digitalModulation())
        except Exception as e:
            errors.append(e)

    if errors:
        raise Exception(errors) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T18:56:16.513

您可能会引发一个继承自`ValueError`和的错误`KeyError`。它会被任何一个 catch 块捕获。

```
class MyError(ValueError, KeyError):
    ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T18:55:15.327

是的，您可以处理多个错误，或者使用

```
try:
    # your code here
except (ValueError, KeyError) as e:
    # catch it, the exception is accessable via the variable e 
```

或者，直接添加两种处理不同错误的“方式”：

```
try:
    # your code here
except ValueError as e:
    # catch it, the exception is accessable via the variable e
except KeyError as e:
    # catch it, the exception is accessable via the variable e 
```

您也可以省略“e”变量。

查看文档：[http ://docs.python.org/tutorial/errors.html#handling-exceptions](http://docs.python.org/tutorial/errors.html#handling-exceptions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-16T17:00:16.470

@shrewmouse 的解决方案仍然需要选择一个异常类来包装捕获的异常。

*   以下解决方案使用[Exception Chaining](https://www.python.org/dev/peps/pep-3134/#id36) via`finally`在一个异常发生后执行代码
*   我们**不需要事先知道，发生了什么异常**
*   请注意，**只有发生的第一个异常**可以通过调用者检测到`except`
    *   如果这是一个问题，请使用上面的@Collin[解决方案](https://stackoverflow.com/a/12826388/5864166)从所有收集的异常中继承
*   您将看到由以下分隔的异常：
    “ `During handling of the above exception, another exception occurred:`”

```
def raise_multiple(errors):
    if not errors:  # list emptied, recursion ends
        return
    try:
        raise errors.pop()  # pop removes list entries
    finally:
        raise_multiple(errors)  # recursion 
```

* * *

如果您有**需要为 list 的每个元素完成的任务，**则无需事先收集 Exceptions。这是一个带有多个错误报告的多个文件删除的示例：

```
def delete_multiple(files):
    if not files:
        return
    try:
        os.remove(files.pop())
    finally:
        delete_multiple(files) 
```

* * *

PS：
使用 Python 3.8.5 测试
要打印每个异常的完整回溯，请查看[traceback.print_exc](https://docs.python.org/3.8/library/traceback.html#traceback.print_exc)
多年来一直回答原始问题。但由于此页面是“python raise multiple”的热门搜索结果，我分享了我填补解决方案范围中（恕我直言相关）空白的方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-02-15T17:04:24.340

您可以像这样**引发**多个异常：

```
try:
    i = 0
    j = 1 / i
except ZeroDivisionError:
    try:
        i = 'j'
        j = 4 + i
    except TypeError:
        raise ValueError 
```

**注意：**可能只引发了 ValueError ，但此错误消息似乎是正确的：

```
Traceback (most recent call last):
  File "<pyshell#9>", line 3, in <module>
    j = 1 / i
ZeroDivisionError: division by zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "<pyshell#9>", line 7, in <module>
    j = 4 + i
TypeError: unsupported operand type(s) for +: 'int' and 'str'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "<pyshell#9>", line 9, in <module>
    raise ValueError
ValueError 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-10T18:51:19.217

```
try :
    pass
except (ValueError,KeyError):
    pass 
```

阅读有关[处理异常的更多信息](http://docs.python.org/tutorial/errors.html#handling-exceptions)

# c# - 在我的 iPhone 应用共享文件中写入/读取文件

> ID：12826292
> 
> 赞同：1
> 
> 时间：2012-10-10T18:49:36.690
> 
> 标签：c#, iphone, file, shared

我在我的 iPhone 上写了一个应用程序。这是我的电脑软件的更便携和更小的版本。我在我的应用程序上激活了文件共享功能，所以现在我可以通过 iTunes 传输文件。但我希望我的电脑软件能够读取或写入文件到我 iPhone 上的共享文件夹，而无需通过 iTunes 手动执行。

我有很大的限制：

1.  我无法使用越狱的 iPhone/iPod/iPad
2.  我的绝大多数客户都没有互联网接入（这是一个农场管理软件，所以在某些地区甚至没有蜂窝网络）...... :(

我听说有一种方法可以使用 Manzana 和 MobileDevice.dll (itunesmobiledevice.dll)。我真的不知道如何使用这些dll。我尝试使用一点 Manzana，但我无法访问我的文件夹，因为它不是越狱的 iPhone。有人可以帮我提供一些代码示例吗？

或者有没有其他方法可以让我的 iPhone 应用程序使用 USB 电缆与我的 C# 应用程序进行通信，而无需访问互联网或 Wifi？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:00:37.950

[mobiledevice.codeplex.com](http://mobiledevice.codeplex.com)。这个项目应该让你从手机发送和检索文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:34:28.673

我建议您看看是否可以使用 iTunes 脚本界面。将 COM 引用 iTunes 1.1 类型库添加到项目中，您可以自动控制 iTunes 的许多部分。我找不到它的文档，但是您可以使用该库，看看是否有东西可以访问文件共享部分。

这是使用它的一个不错的介绍：http: [//www.codeproject.com/Articles/7723/Controlling-iTunes-through-COM](http://www.codeproject.com/Articles/7723/Controlling-iTunes-through-COM)

# actionscript-3 - 我可以将新修改的数据保存到从中检索或加载它的 xml 文件中的任何函数或方法？

> ID：12826296
> 
> 赞同：0
> 
> 时间：2012-10-10T18:49:43.620
> 
> 标签：actionscript-3, apache-flex

从 ActionScript3 中的外部 xml 文件加载后，如何将修改后的数据保存到同一个 xml 文件中。

是否存在任何功能或方法或任何方式将修改后的数据再次保存在加载它的同一文件中。

```
import flash.net.URLRequest;

var myXML:XML = new XML();
var XML_URL:String = "sample.xml";
var myXMLURL:URLRequest = new URLRequest(XML_URL);
var myLoader:URLLoader = new URLLoader(myXMLURL);
myLoader.addEventListener("complete", xmlLoaded);

function xmlLoaded(event:Event):void
{               
    myXML = XML(myLoader.data);
    trace("Data loaded.");

trace(myXML); //showing output of just loaded xml file.

//process of adding new child node or property.
var newnode:XML = new XML(); 
    newnode =
        <student >
            <sname srno="2">mm</sname>
            <father tax="no">
                <fname>Ratan</fname>
                <focc>business man</focc>
                <mobno>9928946899</mobno>
            </father>
        </student>;

    myXML = myXML.appendChild(newnode);

trace(myXML); //showing o/p after being the child-node appended.
} 
```

其中 sample.xml 文件位于同一工作路径中，仅包含以下数据。-

```
<data>
  <student srno="1" class="5" rollno="1">
    <sname>Rohan Jain</sname>
    <father tax="yes">
      <fname>Ronak Jain</fname>
      <focc>teacher</focc>
      <mobno>9928946899</mobno>
    </father>
  </student>
</data> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:27:13.570

如果您正在构建基于浏览器的应用程序；您在客户端上所做的任何事情都不会将文件保存到特定的名称和位置。您必须将更新的文档发送到服务器进行保存。在我处理过的大多数服务器端语言中，很容易编写一个服务来做到这一点。

如果要将文件保存到客户端机器；您可以使用[FileReference.save()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#save%28%29)这样做。但是，这需要用户输入，并且无法保证用户将命名文件或放置文件的位置。

# php - pcntl_sigwaitinfo 和信号处理程序

> ID：12826297
> 
> 赞同：4
> 
> 时间：2012-10-10T18:49:47.003
> 
> 标签：php, signals, posix, pcntl

我正在编写一个守护进程，它周期性地做一些工作并在再次重复之前休眠一段时间。但它在睡眠时仍必须对外部影响（即终止请求）做出响应。

我设法用 ALRM 信号实现睡眠超时并用 TERM 信号终止（示例）：

```
// ...

declare(ticks = 1);

function do_work()
{
    echo "Doing some work.\n";
}

$term = FALSE;

$sighandler = function ($signal) use (&$term)
{
    if ($signal === SIGTERM)
    {
        pcntl_alarm(0);

        $term = TRUE;

        echo "TERM HANDLER\n";
    } else {
        echo "ALRM HANDLER\n";
    }
};

pcntl_signal(SIGALRM, $sighandler);
pcntl_signal(SIGTERM, $sighandler);

while (!$term)
{
    do_work();

    // Kick myself after 2 seconds
    pcntl_alarm(2);

    // Wait for alarm or termination
    $signal = pcntl_sigwaitinfo(array(SIGTERM, SIGALRM), $info);

    pcntl_signal_dispatch();

    switch ($signal)
    {
        case SIGALRM: echo "ALRM SIGWI\n"; break;
        case SIGTERM: echo "TERM SIGWI\n"; $term = TRUE; break;
    }
}

// ... 
```

但是看在上帝的份上，我无法弄清楚为什么永远不会调用 sighandler。我得到以下输出：

```
$ php sigsample.php
Doing some work.
ALRM SIGWI
Doing some work.
ALRM SIGWI
Doing some work.
TERM SIGWI 
```

同时，如果我不设置这个处理程序，脚本会因为 unhandler 信号而死掉。

我错过了什么吗？为什么我的信号处理函数从未被调用？pcntl_sigwaitinfo() 会干扰吗？

还有其他方法可以同时实现超时和信号处理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T03:08:05.380

这并不完全出乎意料。

您已要求将信号传递给信号处理程序 ( `pcntl_signal(...)`)，但随后还要求在不调用任何处理程序 ( ) 的情况下接受信号`pcntl_sigwaitinfo(...)`。您的操作系统可以决定在这种情况下会发生什么，而您的操作系统（如我的）选择让`pcntl_sigwaitinfo()`胜利。

### 背景

进程可以通过两种不同的方式接收（“受苦？”）信号：

1.  **异步*传递***

    该信号会引发一些异步操作，通常会终止进程或调用用户定义的处理程序。[`pcntl_signal`](http://php.net/manual/en/function.pcntl-signal.php)只注册这样一个处理程序。

    C 程序员熟悉的底层调用是[`signal`](http://pubs.opengroup.org/onlinepubs/007904975/functions/signal.html)和[`sigaction`](http://pubs.opengroup.org/onlinepubs/007904975/functions/sigaction.html)。

2.  **同步*验收***

    特殊的系统函数注意到一个信号处于未决状态，并将其从未决列表中删除，将有关信号的信息返回给进程。 [`pcntl_sigwaitinfo`](http://php.net/manual/en/function.pcntl-sigwaitinfo.php)就是这样一个功能。

    基础调用是[`sigwait`](http://pubs.opengroup.org/onlinepubs/007904975/functions/sigwait.html)和。[`sigwaitinfo`](http://pubs.opengroup.org/onlinepubs/007904975/functions/sigwaitinfo.html)[`sigtimedwait`](http://pubs.opengroup.org/onlinepubs/007904975/functions/sigtimedwait.html)

这两种方式，*交付*和*接受*，是[不同](http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html)的，**不能一起使用**。例如，AIX 简单地禁止[“[c]oncurrent use of **sigaction** and **sigwait** ”](http://pic.dhe.ibm.com/infocenter/aix/v6r1/index.jsp?topic=%2Fcom.ibm.aix.genprogc%2Fdoc%2Fgenprogc%2Fsignal_mgmt.htm)。

（与上面相关的是信号掩码的概念，它可以“阻塞”信号，有效地迫使它们保持挂起直到被接受或直到“解除阻塞”并被传递。）

# jsf-2 - Primefaces inputTextArea maxlength不起作用

> ID：12826298
> 
> 赞同：2
> 
> 时间：2012-10-10T18:49:48.757
> 
> 标签：jsf-2, primefaces

我正在使用 JSF 2.0 和 Primefaces 3.2。我有一个最大长度设置为 4000 的文本区域。但文本区域允许我输入 4001 个字符。（总是一个额外的字符）。我一直将 maxlength 设置为 3999 以避免此问题这是一个已知问题吗？我在展示柜上没有看到这个问题，有什么想法吗？

```
<p:inputTextarea id="text" value="#{controller.text}" maxlength="4000"
                rows="6" cols="150" autoResize="true" required="true" requiredMessage="Text is required" rendered="#{controller.condition}"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-26T13:51:10.943

有时输入计为 2 个字符：\r\n 而不仅仅是 \n。在这种情况下，请尝试在您的 setter 方法中将所有这些字符替换为 \n。例如，您可以使用 StringUtils.replace() 方法来做到这一点：

```
your_string = StringUtils.replace(your_string, "\r\n", "\n"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T22:16:37.583

使用占用超过一个字节来存储的 UTF-8 字符仍算作一个字符，但您可能会在数据库中遇到此问题（收到超过 4000 个字符的错误消息）。

你说它总是 +1 字符，只使用 ASCII 字符（数字+英文字母）结帐。

ps：（如果您使用 nobleCount 显示剩余字符，它也有一些 UTF-8 字符/一些特殊字符的问题）。

# provisioning - Puppet Nodes.pp 包含模块执行顺序

> ID：12826301
> 
> 赞同：5
> 
> 时间：2012-10-10T18:50:00.280
> 
> 标签：provisioning, puppet

我正在尝试为某些节点在我的某些模块上设置顺序。

```
node basenode{
 include ps
 include netfx
 include hg
 include reportviewer2012
 include wdeploy30
 include sqlexpress2008
 include windowsrolesfeatures
 include tcbase
}

node 'myserver' inherits basenode  {
 include tcuiagent

 Class['tcuiagent'] -> Class['tcbase'] -> Class['windowsrolesfeatures'] -> Class['ps']
} 
```

当然，我不想在模块资源中设置依赖关系，因为这会使它们相互依赖，而我不想这样做。在这种情况下，我想完成这个命令。

1.  ps（第一个）
2.  windows角色功能
3.  anyotherpackage {hg,netfx...}（不关心配置顺序） n。tcbase
4.  tcuigant（最后一个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:29:24.750

If you really don't want to express relationships between modules, you can use stages to enforce an order.

You must first declare the stages in your top manifest :

```
## Very important : we define stages.
## Can only be done here.
stage { 'first': }      # the first of first
stage { 'apt': }        # to install apt sources and run apt-get update if necessary
# stage main            # default stage, always available
stage { 'last': }       # a stage after all the others
# Now we define the order :
Stage[first] -> Stage[apt] -> Stage[main] -> Stage[last] 
```

Then use them :

```
# basics needing a run state
# We use the "class" syntax here because we need to specify a run stage.
class
{
   'puppeted': # debug
      stage   => first, # note the explicit stage !
      ;
   'apt_powered': # Very important for managing apt sources
      stage   => apt, # note the explicit stage !
      #offline => 'true', # uncomment this if you are offline or don't want updates
      ;
   'apt_powered::upgraded': # will systematically upgrade paquets. dev machine -> we want to stay up to date
      stage   => apt, # note the explicit stage !
      ;
} 
```

But this is ugly and this is not what stages are made for.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:55:16.637

我想我使用节点继承的不同方法来解决它。

```
node windowsmachine{
 include ps #powershell 
 include windowsrolesfeatures #windows roles and features
 include netfx #netframework 4.0 and 4.5
}

node teamcitybase inherits windowsmachine {
 include hg #mercurial
 include nuget #nuget configuration
 include reportviewer2012 
 include wdeploy30 #web deployment 3.0
 include tcbase #asp.net configuration
 include sqlexpress2008 #sqlexpress
}

node 'myserver1','myserver2' inherits teamcitybase{
 #pending installation of puppet clients
}

node 'myserver3' inherits teamcitybase  {
 include tcuiagent 
} 
```

Windows 机器配置模块不相互依赖，但`myserver1`与 sqlexpress2008 依赖于该基线。

没有阶段或模块依赖！！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:47:31.010

我强烈建议重写模块，以便它们的安装顺序不再重要，或者创建与资源的必要关系。

如果您正在安装/配置来自不同模块的相关资源，您可以考虑合并这些模块。

格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-26T06:30:13.587

在发布相同的问题后，我遇到了以下帖子，这是我发现的所有内容中效果最好的。

```
 1 #####################
 2 # 1) Define the stages
 3 #####################
 4 
 5 stage { 'prereqs':
 6  before => Stage['main'],
 7 }
 8 
 9 stage { 'final':
10  require => Stage['main'],
11 }
12 
13 #####################
14 # 2) Define the classes
15 #####################
16 
17 # We don't care when this class is executed, it will
18 # be included at random in the main stage
19 class doThisWhenever1 {
20 
21 }
22 
23 # We don't care when this class is executed either, it will
24 # be included at random in the main stage
25 class doThisWhenever2 {
26 
27 }
28 
29 # We want this class to be executed before the
30 # main stage
31 class doThisFirst {
32 
33    exec {'firstThingsFirst':
34      command => '/bin/echo firstThingsFirst',
35    }
36 }
37 
38 # We want this class to be executed after the
39 # main stage
40 class doThisLast {
41 
42   exec {'lastly':
43      command => '/bin/echo lastly',
44    }
45 
46 }
47 
48 #####################
49 # 3) Assign the classes 
50 # to a stage
51 #####################
52 
53 class { 'doThisFirst': 
54   stage => prereqs,
55 }
56 
57 class { 'doThisLast':
58  stage => final,
59 }
60 
61 
62 include doThisFirst
63 include doThisLast 
```

[http://pipe-devnull.com/2013/09/20/puppet-ensure-class-execution-ordering.html](http://pipe-devnull.com/2013/09/20/puppet-ensure-class-execution-ordering.html)

问候

# grails - 多对多只检索一行

> ID：12826304
> 
> 赞同：0
> 
> 时间：2012-10-10T18:50:10.417
> 
> 标签：grails, grails-orm

我在两个域类之间有一个关系：**User**和**Bank**，用户有很多银行，银行有很多用户，我称之为结果表，因为`mm_user_banks`它保留了 MM 关系的两个表 ID。

```
class User {

    String name
    String password
    Date createdAt = new Date()
    Date loginAt

    static hasMany = [banks:Bank]

    static fetchMode = [banks: 'eager']

    static constraints = {
    }

    static mapping = {
        banks joinTable: [name: 'mm_user_banks', key: 'mm_user_id']
    }
} 
```

和银行...

```
class Bank {

    Long id
    String name

    static belongsTo = User
    static hasMany = [users:User]

    static constraints = {
    }

    static mapping = {
        id generator: 'assigned'
        users joinTable: [name: 'mm_user_banks', key: 'mm_bank_id'], lazy: false
    }
} 
```

我也可以用银行保存用户，但问题是当我尝试从用户实例中检索银行列表时，即使`mm_user_banks`表中该用户的行数不止一行，它也只获取一行。

例如：

```
User u = new User(name: 'user', password: 'pwd')
u.addToBanks(Bank.findById(1))
u.addToBanks(Bank.findById(2))
u.addToBanks(Bank.findById(3))

u.save(flush: true) 
```

在数据库中可以，获取 3 行，但是当我获取用户并查看其银行列表时：

```
def user = User.findById(1) //OK

println "Size ${user.banks?.size()}" //only 1??? How? 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T15:07:30.837

我有类似的问题，但在我的情况下，我与用户和银行的等价物之间存在另一种关系。这使得 hasMany 语句使用错误的关系来映射多对多关系。在我的情况下，它是通过向关系添加一个 mappedBy 语句来解决的：

```
class Bank{
    ...
    static mappedBy=[users:'banks']
    ...
} 
```

和

```
class User{
    ...
    static mappedBy=[banks:'users']
    ...
} 
```

或者就像我的情况一样，因为它是一个单向关系：

```
class ArticleGroup {

    String name
    static hasMany = [articles:Article]

    static mappedBy = [articles: 'none']

    static constraints = {
        name(nullable:false, blank:false, unique:true, maxSize:100)
    }

    static mapping = {
        table 'article_group'
        sort 'name'

        articles joinTable: [name:'article_group_article', key: 'articleGroup_id', column:'article_id'], fetch: 'join'

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:36:54.723

刚刚对其进行了测试-“user.banks?.size()”返回“3”。您确定数据库中的数据正常吗？

无论如何，如果你想对集合使用渴望获取，那么在 User 类的“映射”中定义它（而不是“fetchMode”静态字段）：

```
static mapping = {
    banks joinTable: [name: 'mm_user_banks', key: 'mm_user_id'], fetch: 'join'
} 
```

在 Bank 类中使用**fetch: 'join'** in mapping 而不是lazy: false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:15:41.237

非常感谢，谢尔盖，但没有成功。

我以一种丑陋的方式修复了它，但这是我剩下的出路。

我创建了另一个域类来映射 MM 表，所以我做了一个`mm_user_banks`类。我用它从银行或用户那里获取记录并且工作正常。为了为用户保存银行，我实际上也以旧方式进行操作，并没有改变。我想这可能不是最好的方法，但就像我说的，解决了。

我试过“fetch：'join'”和“lazy：false”和“static fetchMode = [banks：'eager']”但没有成功。

新的域类是：

```
class UserBanks {

    User user
    Bank bank

    static constraints = {
    }

    static mapping = {
        table name: 'mm_user_banks'
        user column: 'mm_user_id'
        bank column: 'mm_bank_id'
    }
} 
```

# android - 如何打开正在运行的应用程序设置页面？

> ID：12826308
> 
> 赞同：0
> 
> 时间：2012-10-10T18:50:37.657
> 
> 标签：android, android-intent

基本上，我想打开 Runnings Apps 页面（设置中的应用程序管理器中的那个），最终打开一个活动应用程序的页面（例如知道它的包名称）。

这甚至可能吗？我查看了文档，只找到了一种打开*所有应用程序*（使用[ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS](http://developer.android.com/reference/android/provider/Settings.html#ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS)）设置页面的方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:54:48.527

我不相信`Intent`“运行应用程序”有记录和支持的操作。

对于单个应用程序的设置页面，[使用`ACTION_APPLICATION_DETAILS_SETTINGS`](http://developer.android.com/reference/android/provider/Settings.html#ACTION_APPLICATION_DETAILS_SETTINGS).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T12:56:08.003

尝试：

```
 Intent intent = new Intent(android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS);
  intent.setData(Uri.parse("package:" + getPackageName()));
  startActivity(intent); 
```

# chef-infra - Chef LWRP - 如何使用

> ID：12826311
> 
> 赞同：2
> 
> 时间：2012-10-10T18:50:47.280
> 
> 标签：chef-infra

我尝试使用 chef 来制作 Vagrant 的开发环境。**当我运行`vagrant provision`**. 我`gem librarian`用来下载食谱，这是我当前的 Vagrantfile： [https ://github.com/rhacker/vagrant-rails/blob/master/Vagrantfile](https://github.com/rhacker/vagrant-rails/blob/master/Vagrantfile)

这是我存储 Cheffile 和 Vagrantfile 的仓库：[https ://github.com/rhacker/vagrant-rails](https://github.com/rhacker/vagrant-rails)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T21:09:12.057

创建`site-cookbooks/rbenv/recipes/install.rb`与

```
include_recipe "rbenv::default"
include_recipe "rbenv::ruby_build"

rbenv_ruby "1.9.3-p194" 
```

现在在你的`Vagrantfile`，更改为

```
Vagrant::Config.run do |config|
  config.vm.box = "lucid32"
  config.vm.network :hostonly, "33.33.33.33"
  config.vm.customize do |vm|
    vm.memory_size = 386
  end
  config.vm.provision :chef_solo do |chef|
    chef.cookbooks_path = ["cookbooks", "site-cookbooks"]
    chef.add_recipe "apt"
    chef.add_recipe "build-essential"
    chef.add_recipe "git"
    chef.add_recipe "openssl"
    chef.add_recipe "postgresql"
    chef.add_recipe "rbenv::install"
    chef.add_recipe "unicorn"
  end
end 
```

# javascript - MVC 4 和 JQuery

> ID：12826315
> 
> 赞同：1
> 
> 时间：2012-10-10T18:50:54.873
> 
> 标签：javascript, jquery, asp.net-mvc

我正在使用 MVC 4`GET`和`POST`使用 JQuery 的请求，但似乎我无法让 JQuery 发送请求，也无法从服务器获取响应。

```
<script type="text/javascript">
    function search() {
        var lat = $('#latitude').val();
        var long = $('#longitude').val();

        $.ajax({
            url: "api/Attractions/?longitude=" + long + "&latitude=" + lat,
            type: "GET",
            success: function (data) {
                if (data == null) {
                    $('#attractionName').html("No attractions to search");
                }
                else {
                    $('#attractionName').html("You should visit " + data.Name);
                    displayMap(data.Location.Geography.WellKnownText, data.Name);
                }
            }
        });
    }
    // Get Geo Information
    function displayMap(coordinateString, name) {
        // WellKnownText is in format 'POINT (<longitude>, <latitude>)'
        coordinateString = coordinateString.replace("POINT (", "").replace(")", "");
        var long = coordinateString.substring(0, coordinateString.indexOf(" "));
        var lat = coordinateString.substring(coordinateString.indexOf(" ") + 1);

        // Show map centered on nearest attraction
        var map = new VEMap('myMap');
        map.LoadMap(new VELatLong(lat, long), 15, VEMapStyle.Aerial);

        // Add a pin for the attraction
        var pin = new VEShape(VEShapeType.Pushpin, new VELatLong(lat, long));
        pin.SetTitle(name);
        map.AddShape(pin);
    }
</script> 
```

然后，按钮代码：

```
<h1>Find the Closest Tourist Attraction</h1>
<div>
    <label for="longitude">Longitude:</label>
    <input type="text" id="longitude" size="10" />
    <label for="latitude">Latitude:</label>
    <input type="text" id="latitude" size="10" />
    <input type="button" value="Search" onclick="search();" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:26:40.743

您应该使用 URL 帮助程序。ajax 调用中的 url 应该有点像这样，我还没有测试过，但我知道我必须这样做才能解决问题。

```
url:"@Url.Action("action", "controller")" + "?longitude=" + etc.. 
```

# html - 适用于 Android 和 iPad 的 jQuery 移动/JavaScript 图像缩放缩放

> ID：12826317
> 
> 赞同：4
> 
> 时间：2012-10-10T18:51:07.430
> 
> 标签：html, css, jquery-mobile, touch, multi-touch

我一直在寻找一个简单的解决方案来解决如何在不影响网站其余部分的情况下放大和缩小图像（png），但没有找到。

你们有没有人使用过这样的工具或知道使用 jQuery 或 javascript 的方法？我对 jQuery 很陌生，所以不知道我应该看什么事件。此功能应适用于 Android 平板电脑和 iPad。

只查看了[JQuery Mobile Pinch Zoom Image](https://stackoverflow.com/questions/10777800/jquery-mobile-pinch-zoom-image-only)和提供的链接，但显然这些链接是针对使用 PhoneGap 的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-19T08:18:15.327

我也没有找到解决方案，所以我自己实现了它（使用香草 JS 和画布但可移植到 css3）：[https ://github.com/rombdn/img-touch-canvas](https://github.com/rombdn/img-touch-canvas)

示例：[http](http://www.rombdn.com/img-touch-canvas/demo) ://www.rombdn.com/img-touch-canvas/demo （最好使用触摸设备，但可以在桌面上使用 +/- 和鼠标拖动）

```
<html>
<body>
    <div style="width: your_image_width; height: your_image_height">
        <canvas id="mycanvas" style="width: 100%; height: 100%"></canvas>
    </div>

    <script src="img-touch-canvas.js"></script>
    <script>
        var gesturableImg = new ImgTouchCanvas({
            canvas: document.getElementById('mycanvas'),
            path: "your image url"
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:15:50.210

I would place the image in a "viewport" layer that is used to maintain the flow of your page. The "viewport" element would have it's `overflow` CSS property set to `hidden` to achieve this goal.

You can then use JavaScript to detect multiple touches and then scale the image as necessary. I have yet to use this frameworks but it seems very cool and could help make this easier on you: [https://github.com/HotStudio/touchy](https://github.com/HotStudio/touchy)

You can also detect multiple touches without a framework by watching the `event.touches` array inside an event handler for `touchmove`. For each touch occurring simultaneously there will be another index in the `event.touches` array.

Using `Touchy` seems pretty easy (untested):

```
var handleTouchyPinch = function (e, $target, data) {
    $target.css({'webkitTransform':'scale(' + data.scale + ',' + data.scale + ')'});
};
$('#my_div').bind('touchy-pinch', handleTouchyPinch); 
```

# javascript - 如何创建一个在所有页面上继续播放的播放器？

> ID：12826320
> 
> 赞同：1
> 
> 时间：2012-10-10T18:51:18.217
> 
> 标签：javascript, jquery, audio, frame

我想知道的是如何在网站周围创建一个保持不变的框架，同时**根据显示的实际页面更改地址栏中的 url**。即使您转到服务器上的另一个页面，它也需要能够有一个**不间断播放的音频元素。**

[Pitchfork 网站](http://www.pitchfork.com/)，玩家可以在右上角看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:01:13.253

交换内容然后更新 URL 听起来像是 Mark Pilgrim 在[http://diveintohtml5.info/history.html中提到的一种模式](http://diveintohtml5.info/history.html)

使用一点 AJAX，您可以更新您的内容，`history.pushState()`允许您更改 URL，然后添加一个事件侦听器来侦听该`popstate`事件（当用户向后导航时）。

*这并没有真正为您应该如何构建页面或 AJAX 调用提供太多指导，但希望它能让您对一般概念有所了解。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:55:57.457

如果我理解您，您可以将您的资源作为模板包含到您的站点中（将其包含在每个页面中，同时考虑到主框架的宽度和长度以及资源的大小）。

# jquery - jQuery 选择具有类 a 的元素，但它也可以具有类 b

> ID：12826322
> 
> 赞同：0
> 
> 时间：2012-10-10T18:51:20.633
> 
> 标签：jquery, jquery-selectors

我的第一个问题。此外，我的英语还远远不够，我可以形容为好，所以请原谅（不知道更好的词:)）。

我正在使用 php 生成具有不同样式的表行。

```
if ($n % 2 == 0)
    $tr_class = ' class="package_' . $p->package_id . ' alt"';
else {
    $tr_class = ' class="package_' . $p->package_id . '"';
}

<tr<?php echo $tr_class ?> 
```

我想在具有类的每一行的第五个单元格中选择输入字段并为其`package_{number here}`添加一些样式。为此，我使用该语句：

```
$('tr.package_' + package_errors_ids[i] + ' td:nth-child(5) input[type=text]').css('border', '1px solid red'); 
```

但是二等舱（`.alt`）不允许我这样做。我不知道如何修改该语句来实现这一点。你会帮忙吗？:)

我忘记写了。它有效，但并非每次都有效。Package_errors_ids 是一个数组，其中包含我用来创建唯一 ID 以区分用户无效包的数字。当 2 行无效（一个具有 .alt 类）时，两者都受此代码影响`css('border', '1px solid red');`。但是当一个有效时，这些行都不受影响。

编辑：我已经简化了我的混合 js 和 php 代码，以便在不使用 JavaScript 数组 [http://jsfiddle.net/TAdsT/7/的情况下生成代码](http://jsfiddle.net/TAdsT/7/)

经过这种简化并清除我的浏览器缓存后，它可以正常工作！谢谢大家的意见。这是代码（如果 jsfindle.net 删除它）：

```
<script type="text/javascript">
$(document).ready(function() {
<?php
$count = count($this->package_errors_ids);
if ($count > 0)
{
    for ($i = 0; $i < $count; $i++)
    {
        echo "$('tr.package_" .
            (int) $this->package_errors_ids[$i] .
            " td:nth-child(5) input[type=\"text\"]').css('border', '1px solid red');\n";
    }
}
?>
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:58:43.530

我正在看这个：

```
// in PHP
$('tr.package_' + package_errors_ids[i] + ' td:nth-child(5) input[type=text]') 
```

我假设这将产生类似的东西：

```
// after PHP
$('tr.package_1 td:nth-child(5) input[type=text]') 
```

这在选择`<tr class="package_1 alt">`. 一点都不麻烦。假设您的 HTML 生成正确，这意味着您做错了其他事情。我将假设它是这一部分：

```
input[type=text] 
```

尝试将其更改为

```
input[type="text"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:38:23.063

如果你想同时使用这两个类来访问元素，试试这个

```
$('tr.package_' + package_errors_ids[i] + '.alt td:nth-child(5) input[type=text]')                   
   .css('border', '1px solid red'); 
```

# javascript - 居中布局，侧边栏扩展位于屏幕右侧

> ID：12826334
> 
> 赞同：1
> 
> 时间：2012-10-10T18:52:26.783
> 
> 标签：javascript, html, css

我正在尝试创建一个固定的布局，侧边栏的背景延伸到最右边。我画了一个草图来说明图像：

![在此处输入图像描述](../Images/dac3b41ad7b435045bf4f8661da6b61a.png)

在任何窗口大小上，我将如何扩展侧边栏背景以延伸到右侧屏幕的末尾？我试过：

```
#sidebar {
    z-index: 1000;
    overflow: hidden;
    position: absolute;
    width: 100%;
    background: url(../img/sidebar-base.png) no-repeat 0 -8px;
    min-height: 200px;
    &::after {
        content: '';
        z-index: 10;
        display: block;
        height: 100px;
        overflow: hidden;
        width: 100%;
        background: url(../img/sidebar-rx.png) repeat-x 0 -9px;
        position: absolute;
        top: 0;
    }
} 
```

但是滚动会水平出现，如果我应用`overflow:hidden`在身体上，我将无法滚动到底部。谢谢！

**编辑**：我确实尝试过用 javascript 找到我的运气，但仍然有一点滚动：

```
$(function(){
    $sidebar = $('#sidebar');
    $sidebar.css({width: window.innerWidth - ($sidebar.offset().left)})
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:47:54.513

如果您的问题仅在于滚动，您可以使用此行轻松解决此问题

```
overflow-x: hidden; 
```

并将其完全应用于背景的父元素或正文元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T09:52:34.187

有没有人关注这里？无论如何，我认为你应该像下面这样静态定位和隐藏溢出：

```
#sidebar {
        z-index: 1000;
        overflow: hidden;
        position: static;
        width: 100%;
        height:100%;
        right:0;
        top:0;
        margin:0;} 
```

还要隐藏卷轴，你也应该隐藏你的身体溢出。

希望是正确的和有帮助的......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T19:19:23.337

你应该做的是创建一个包装 div。

```
<div class="sidebar-parent">
  <div class="sidebar"><!-- Stuff Here --></div>
</div> 
```

完成后，您的文档应如下所示：

```
<html>
<head>
  <title>Experiment</title>
  <style type="text/css">
    .content {float: left; width: 49%; height: 500px; border: 1px solid #000;}
    .sidebar-parent {float: left; width: 50%; background-color: green;}
    .sidebar {width: 500px; height: 500px; border: 1px solid #000;}
  </style>
</head>
<body>
  <div class="content">blah blah blah</div>
  <div class="sidebar-parent">
    <div class="sidebar"><!-- Stuff Here -->blah blah blah</div>
  </div>
</body>
</html> 
```

要记住的主要内容是容器 div “sidebar-parent” 是获取宽度并包含背景的内容。

要使它们居中，您需要`width: 50%;`内容和侧边栏的父容器。你让它们`float:left;`填满屏幕，然后是它们的父容器中的内容子容器`float: right;`和侧边栏子容器。`float: left;`

摘要：2 个 50% 宽度的容器，每个容器包含 1 个子容器。将父母与左浮动堆叠在一起，然后将固定宽度的子容器放置在其父母中。

这将使他们居中，现在您将有能力拥有扩展的背景。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T18:55:54.607

将身体设置为 100%

```
body {
height: 100%;
} 
```

然后将侧边栏高度设置为“height: auto;”。这将使它延伸到视口的高度。从那里，像你说的那样添加固定定位。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T18:58:29.753

你可以这样做：

```
overflow-y:hidden 
```

那应该摆脱底部的滚动条。

然后，我还会在侧边栏中使用大量右手边距来扩展它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-10T19:07:50.363

尝试将侧边栏宽度设置为 30%，将内容设置为 70%。

# twitter-bootstrap - Bootstrap 响应式网格布局

> ID：12826335
> 
> 赞同：2
> 
> 时间：2012-10-10T18:52:27.477
> 
> 标签：twitter-bootstrap, grid-layout

这是我使用 twitter bootstrap 流体布局编码的标记

```
<div class="row-fluid">
  <div class="span4">Col4</div>
  <div class="span8">Col8</div>
</div> 
```

这在横向模式下工作正常。但在纵向我想改变网格；例如，第一个 div 应该占据 2 列，第二个 div 应该占据 10 列。

```
<div class="row-fluid">
  <div class="span2">Col2</div>
  <div class="span10">Col10</div>
</div> 
```

我想在普通的 less 文件中定义一个新类为 .row-colum {.span4;} 并使用媒体查询方向：portrait overwrite .row-column {.span2;}。但是我的编译错误越来越少。

这就是我想做的

```
<div class="row-fluid">
  <div class="row-column">Col2</div>
  <div class="span10">Col10</div>
</div> 
```

有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T20:07:03.833

如果您不能/不想让它与 LESS 一起使用，您可以随时返回寻找调整大小事件：

```
$(window).resize(function () {
    if ($(window).width() < 640) {
        $("#col1").removeClass("span4").addClass("span2");
        $("#col2").removeClass("span8").addClass("span10");
    } else {
        $("#col1").removeClass("span2").addClass("span4");
        $("#col2").removeClass("span10").addClass("span8");
    }
}); 
```

# python - Web2py - 使用redirect（）和request.vars时防止上传的文件内容出现在URL中

> ID：12826337
> 
> 赞同：0
> 
> 时间：2012-10-10T18:52:33.660
> 
> 标签：python, web2py

当我的 web2Py 页面通过 SQLFORM 上传文件，然后将用户重定向到下一页时，出现了麻烦：

```
redirect(URL('form2', vars=request.vars)) 
```

我猜想由于 'vars' 参数，所有的 vars，包括*上传文件的全部内容*，都作为参数出现在 'form2' 的 url 中。也就是说，当用户被重定向时，浏览器 url 栏中的 url 会显示为 [the_url]?file=[file contents] 等。当上传足够大的文件时，这显然会导致问题。

防止这种情况发生的最好方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:39:29.370

怎么样：

```
del request.vars.file
redirect(URL('form2', vars=request.vars)) 
```

# authentication - 将 Bcrypt 与 ServiceStack 一起使用

> ID：12826338
> 
> 赞同：2
> 
> 时间：2012-10-10T18:52:45.627
> 
> 标签：authentication, servicestack, bcrypt

我希望将 ServiceStack 用于即将进行的项目，但我想使用 bcrypt 来散列密码。目前内置存储库使用 SHA256 散列。我有什么办法可以利用现有的身份验证代码并使用 bcrypt 代替吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:08:41.430

在这里澄清一下，[ServiceStack 的 Auth Provider](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)中的密码散列仅用于存储 UserName / Password 的 Auth Provider，即 Credentials / Basic / Digest Auth 提供者。

不幸的是，散列提供者不容易交换，因为它在每个不同的 UserAuthRepo 提供者的几个地方使用，请`SaltedHash()`参见[OrmLiteAuthRepository](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/OrmLiteAuthRepository.cs)和[RedisAuthRepository](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/RedisAuthRepository.cs)：

如果您可以提出一个共享接口，该接口既可以与 ServiceStack 当前使用的 SHA256 SaltedHash 一起使用，也可以与 bcrypt 一起使用，我可以重新分解它以使 Hashing 提供程序可覆盖。ie bcrypt 散列提供程序可以与此接口一起使用吗？

```
public interface IHashProvider {
    void GetHashAndSalt(byte[] Data, out byte[] Hash, out byte[] Salt);
    void GetHashAndSaltString(string Data, out string Hash, out string Salt);
    bool VerifyHash(byte[] Data, byte[] Hash, byte[] Salt);
    bool VerifyHashString(string Data, string Hash, string Salt);
} 
```

否则有一个对两者都适用的吗？

# java - 调试时如何查看变量的所有内容？

> ID：12826349
> 
> 赞同：0
> 
> 时间：2012-10-10T18:53:27.700
> 
> 标签：java, android, eclipse

我会解析 JSON

```
JSONObject json = jParser.getJSONFromUrl();
        json.toString(); 
```

在调试“json.toString()”时，我看不到整行，因为行太长

事实证明，与此类似的东西

```
"{"VehiclePartItems":[],"BrandItems":[],"TabletSurveyTasksItems":[{"Brand":"Infiniti","ShippingAgentNativeName":"ÐÐÐ¢Ð-13061","Model":"FX37","SecondDriverShortNativeName":null,"ShippingAgentUnitId":"3700bc0b-17cc-47c9-8bca-cd78a258a592","FirstDriverEnglishName":"Saranchuk Viktor Vasyliovych","Vin":"JN1TCNS51U0442875","FirstDriverShortNativeName":"Ð¡Ð°ÑÐ°Ð½ÑÑÐº Ð. Ð.","SecondDriverNativeName":"  ","SurveyPointNativeName":"Ð¢ÐµÑÐ¼ÑÐ½Ð°Ð» ÐÐ²ÑÐ¾Ð»Ð¾Ð³ÑÑÑÐ¸ÐºÐ°","RowState":2,"TruckPlateNumber":"AA1939HE","FirstDriverNativeName":"Ð¡Ð°ÑÐ°Ð½ÑÑÐº ÐÑÐºÑÐ¾Ñ ÐÐ°ÑÐ¸Ð»ÑÐ¾Ð²Ð¸Ñ","ReportNumber":"2011\/640758","CarrierNativeName":"ÐÐÐ¢Ð-13061","RowVer":[0,0,0,0,1,160,127,245],"SurveyPointUnitId":"62e12548-0a68-4999-960b-a3bb3c44675c","SecondDriverShortEnglishName":null,"ShippingAgentEnglishName":"KATP-13061 PJSC","SecondDriverEnglishName":"  ","CarrierEnglishName":"KATP-13061 PJSC","TrailerPlateNumber":"AA9774XP","CarrierUnitId":"3700bc0b-17cc-47c9-8bca-cd78a258a592","Id":"3341661f-8a70-4a8f-b7b0-..." 
```

**我怎样才能看到所有的内容？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:59:21.843

在调试期间右键单击文本区域`Eclipse`并选择`Max length...`（`Wrap text`可能也有帮助）。

![在此处输入图像描述](../Images/f90867677c8629c39bae9e589422d010.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:58:13.473

大多数 IDE`.toString()`在调试时使用变量的方法。使用 Eclipse 启动调试工具（运行图标旁边的绿色错误图标）并在代码行上方的`json.toString();`Then mouse howler to `json`variable 处放置一个断点。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:21:46.700

使用 eclipse 提供的变量选项卡。此选项卡在调试透视图中可见。如果你看不到它然后转到 windows-show view-variables

在[这里查看](http://www.comscigate.com/debug/learn_Debug.htm)

# c# - 使用 c# 进行 Active Directory 身份验证（编码问题）

> ID：12826352
> 
> 赞同：0
> 
> 时间：2012-10-10T18:53:39.697
> 
> 标签：c#, windows, active-directory, windows-server-2008, windows-authentication

我在针对 Active Directory 对我的用户进行身份验证时遇到问题。我正在尝试通过`PrincipalContext`.

我的问题是，当用户密码包含非 ASCII 字符时，即使使用正确的凭据，验证也会失败。但我只在我的产品环境中遇到这个问题。它适用于 UAT 和开发环境。

我该如何解决这个问题？AD的任何设置与此有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:40:55.330

这是在黑暗中拍摄的，但请听我说完。这就是为什么我问这是否是一个网络项目。我有类似的问题，症状相同。一位用户来找我说他无法登录我的网站。原来他的密码中有“特殊”字符。这没有意义，但在禁用自定义错误后，我意识到错误是由于 ASP.NET 请求验证引起的：http: [//msdn.microsoft.com/en-us/library/hh882339%28v=vs.100%29 .aspx](http://msdn.microsoft.com/en-us/library/hh882339%28v=vs.100%29.aspx)

> 请求验证是 ASP.NET 中的一项功能，它检查 HTTP 请求并确定它是否包含潜在的危险内容。在这种情况下，潜在危险内容是请求的正文、标头、查询字符串或 cookie 中的任何 HTML 标记或 JavaScript 代码。ASP.NET 执行此检查是因为在 URL 查询字符串、cookie 或发布的表单值中找到的标记或代码可能已出于恶意目的添加到请求中。

在我的代码有机会验证用户密码之前，几乎所有看起来像标签的东西都被标记了，并且运行时抛出了异常。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:46:27.677

尝试将密码编码更改为 UTF-8

# c# - C# listview 搜索虚拟模式

> ID：12826354
> 
> 赞同：0
> 
> 时间：2012-10-10T18:54:00.347
> 
> 标签：c#

我在 C# 中搜索虚拟列表视图时遇到问题。

我现在正在做的是读取一个大的日志文件。这是我迄今为止实施的

我一次读一行文件，并记下行首的位置。将这些位置添加到列表中，并在调用 RetrieveVirtualItem 时 - 使用项目的索引和列表查找文件中的位置，然后从文件中读取该行。

所以读取文件时没有延迟。

我现在想搜索项目。这是我到目前为止所想到的，但我一直未能成功实施。

我实际上并没有搜索列表视图，但在我的文件读取过程中，我标记了特定字符串的命中位置，例如“INFO”。如果它命中，我将位置添加到列表中。

当调用 RetrieveVirtualItem 时，我只是读回了所有命中的行。

似乎通过调试 -`if (line.IndexOf("INFO", StringComparison.OrdinalIgnoreCase) >= 0)`没有击中任何匹配项。我不知道为什么，有人帮忙吗？

```
using (var sr = new myStreamReader("test.log"))
{
    while ((line = sr.ReadLine()) != null)
    {
        if (line.IndexOf("INFO", StringComparison.OrdinalIgnoreCase) >= 0)
        {
            position = sr.BytesRead;
            Search.Add(position);
            searchcount++;
        }
    }
    newMessageView.VirtualListSize = searchcount;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:26:09.633

我不知道您的“myScreamReader”类是如何工作的，但如果它类似于 StreamReader，则此代码可能对您有用：

```
using (var sr = new StreamReader("test.log"))
{
    while (!sr.EndOfStream)
    {
        string line = sr.ReadLine();
        if (line.IndexOf("INFO", StringComparison.OrdinalIgnoreCase) >= 0)
        {
            // line contains "info"
        }
    }
} 
```

您应该通过在 line.IndexOf... 处设置断点来调试代码，检查 line 的值是否正在更改并且看起来正确。

# javascript - Ember.js 路由器应用架构——如何在松散耦合的组件之间正确通信

> ID：12826362
> 
> 赞同：2
> 
> 时间：2012-10-10T18:54:27.060
> 
> 标签：javascript, ember.js, ember-old-router

从架构上讲，控制器（通常）不知道视图，当然也不知道其他控制器的视图。控制器也不知道其他控制器。有时这些松散耦合的组件需要能够进行通信，但最佳实践是不要将它们紧密耦合在一起。是否有消息框架插件允许不同的组件在应用程序内发出和接收全局消息？有没有更好的方法来处理这些类型的通信？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T02:43:33.143

使用 jQuery.Callbacks 之类的东西创建 pub/sub 集线器并不难。但是，这不是典型的 Ember.js 应用程序的一部分。

当发生需要在责任控制器范围之外进行通信的事情时，模式是将操作发送到路由器，当前状态可以处理它。router/stateManager 是应用程序的协调器，可以通过向其他控制器和/或模型发送消息和/或转换到另一个状态来响应操作。

我试图在最近的一次演讲中对此进行图解：[http ://www.lukemelia.com/devblog/archives/2012/08/23/architecting-ember-js-apps/](http://www.lukemelia.com/devblog/archives/2012/08/23/architecting-ember-js-apps/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:57:36.783

我对 Ember 还是很陌生，但[Ember Instrumentation](http://emberjs.com/api/classes/Ember.Instrumentation.html)在这种情况下不会有用吗？它允许发布和订阅自定义事件。[在这个答案](https://stackoverflow.com/a/14508316/69652)中可以看到很好的解释。

# c++ - C++ std::map 或 std::set - 有效地插入重复项

> ID：12826364
> 
> 赞同：8
> 
> 时间：2012-10-10T18:54:30.633
> 
> 标签：c++, performance, stdmap, stdset

我有一堆充满重复的数据，我想消除重复。你知道，例如 [1, 1, 3, 5, 5, 5, 7] 变成 [1, 3, 5, 7]。

看起来我可以使用 std::map 或 std::set 来处理这个问题。但是我不确定（a）简单地将所有值插入容器中是否更快，或者（b）检查它们是否已经存在于容器中并且仅在它们不存在时才插入 - 插入是否非常有效？即使有更好的方法......你能建议一种快速的方法吗？

另一个问题 - 如果我存储在其中的数据不像整数那么微不足道，而是一个自定义类，std::map 如何管理正确存储（散列？）数据以便通过运算符快速访问 [ ]？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T19:01:22.247

`std::map`不使用散列。 `std::unordered_map`确实如此，但那是 C++11。 `std::map`并且`std::set`都使用您提供的比较器。类模板具有此比较器的默认值，归结为`operator<`比较，但您可以提供自己的比较器。

如果您不需要同时存储键和值（看起来不需要），您应该只使用 a `std::set`，因为这样更合适。

该标准没有说明`map`s 和`set`s 在幕后使用什么数据结构，只是说明某些操作具有一定的时间复杂性。实际上，我知道的大多数实现都使用树。

如果您使用`operator[]`or `insert`，在时间复杂性方面没有区别，但如果找不到该项目，我会在执行 a 之前使用`insert`or后跟 an 。后者意味着两个单独的搜索将一个项目插入到集合中。`operator[]``search``insert`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T19:00:18.177

对`insert()`任何关联容器执行 a`find()`查看对象是否存在，然后插入该对象。只需将元素插入 an 即可`std::set<T>`合理有效地消除重复项。

根据您的集合的大小以及重复值与唯一值的比率，将对象放入`std::vector<T>`,`std::sort()`然后`std::unique()`与 with 一起使用`std::vector<T>::erase()`以消除重复值可能会更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T19:00:19.070

你应该做多少次？

如果插入是通常的：

```
//*/
std::set<int> store;
/*/
// for hash:
std::unordered_set<int> store;
//*/
int number;

if ( store.insert(number).second )
{
  // was not in store
} 
```

如果您填写一次：

```
std::vector<int> store;
int number;

store.push_back(number);
std::sort(store.begin(),store.end());
store.erase(std::unique(store.begin(),store.end()),store.end() );

// elements are unique 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:59:19.940

假设 和 的常见实现策略`std::map`，`std::set`即平衡二叉搜索树，插入和查找都必须进行树遍历以找到键所在的位置。因此，查找失败然后插入的速度大约是插入的两倍。

> std::map 如何正确存储（散列？）数据以便通过 operator[] 快速访问？

通过您指定的比较函数（或者`std::less`，如果您重载`operator<`自定义类型，则该函数有效）。无论如何，`std::map`都不`std::set`是哈希表*。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T19:01:41.257

`std::set`据我所知，`std::map`它们都被实现为红黑树。并且可能只使用插入会更快（然后两者都因为你会加倍查找时间）。

也`map`和`set`使用`operator <`. 只要您的班级定义了`operator <`它就可以将它们用作键。

# javascript - 有效的表单：不可能返回 false / 始终启动表单的操作

> ID：12826365
> 
> 赞同：1
> 
> 时间：2012-10-10T18:54:34.343
> 
> 标签：javascript, html

我使用表单向 API 提交一些数据。此外，我使用 recaptcha 来避免机器人。

我的问题：

如果用户输入了错误的总和，他会收到错误警报。但是在错误警报之后，脚本总是执行“action="www.test.de"，所以用户没有机会更正输入。 `return false`也不起作用。

有人可以指出错误吗？

剧本：

```
<script type="text/javascript">
        var a = Math.ceil(Math.random() * 10);
        var b = Math.ceil(Math.random() * 10);
        var c = a + b
        function DrawBotBoot() {
            document.write("Was ergibt " + a + " + " + b + "? ");
            document.write("<br/><input id='BotBootInput' type='text' maxlength='2' size='2'/><br/>");
        }

        function ValidBotBoot() {
            var d = document.getElementById('BotBootInput').value;
            if(d == c)
                $('#test_form').submit(function(evt) {
                    evt.preventDefault();
                    var uvSubdomain = "test";
                    var uvKey = "xxxxxxxxxxxxxx";
                    var message = $('#message').val();
                    var subject = $('#subject').val();
                    var name = $('#name').val();
                    var email = $('#email').val();
                    $.jsonp({
                        url : 'https://' + uvSubdomain + '.test/tickets/create_via_jsonp.json?callback=?',
                        data : {
                            client : uvKey,
                            ticket : {
                                message : message,
                                subject : ("Anfrage via Landingpage test.de")
                            },
                            name : name,
                            email : email
                        },
                        success : function(data) {
                            alert('Herzlichen Dank für Ihre Mitteilung! Wir werden uns umgehend bei Ihnen melden.');
                            window.open('index.html', '_self', false)
                        },
                        error : function(d, msg) {
                            alert("Leider konnte die Mitteilung nicht übermittelt werden.");
                        }
                    });
                    return false;
                });
            else
                alert('Falsches Ergebnis')
            document.contact.BotBootInput.focus();
            return false;
        }
    </script> 
```

的HTML：

```
<div id="contact_form">
                            <form id="test_form" name="contact" method="post" action="https://www.test.de">
                                <label for="name">Name</label>
                                <input type="text" name="name" id="name" value="" class="span3" />
                                <label for="email">E-Mail</label>
                                <input type="email" name="email" id="email" value="" class="span3" />
                                <label for="message">Mittteilung</label>
                                <textarea name="message" id="message"></textarea>
                                <div>
                                    <script type="text/javascript">DrawBotBoot()</script>
                                    <button class="btn btn-primary"  onclick="ValidBotBoot()">
                                        Senden
                                    </button>
                                </div>
                            </form>
                        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:24:35.477

当您想简单地丢弃事件时：
1.`false`从被调用函数返回和
2.`return`在函数名之前使用关键字。

所以，`onclick`属性的最终值应该是：

```
onclick="return ValidBotBoot()" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:03:17.653

尝试这个：

```
else {
    alert('Falsches Ergebnis')
    document.contact.BotBootInput.focus();
    return false;
} 
```

# image - Matlab中的BMP到GIF

> ID：12826366
> 
> 赞同：1
> 
> 时间：2012-10-10T18:54:35.563
> 
> 标签：image, matlab, image-processing, gif, bmp

**Matlab版本：7.8.0**

我正在使用*imread*函数在 matlab 中读取 bmp 文件 -

```
i = imread('lena.bmp'); 
```

现在我想将此*i*矩阵转换为 gif 格式。但是既然我们没有颜色映射表，我们怎么能这样做呢。

有没有办法从图像生成地图矢量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:08:52.017

诀窍是使用`rgb2ind`：

```
 [x,map]=rgb2ind(i,256);
 imwrite(x,map,'C:\test.gif'); 
```

我假设您想在颜色图中使用 256 种颜色。您可以使用它来创建更多/更少的颜色量化与文件大小。

# c# - 链接到运行 IIS 6 的站点上的 docx 在 IE8 中显示为 zip 文件

> ID：12826372
> 
> 赞同：0
> 
> 时间：2012-10-10T18:55:17.023
> 
> 标签：c#, asp.net, .net, iis-6, mime-types

在我们的网站上，我们有几个 docx 文件的链接。此文件格式实际上是压缩的 xml，但单击时应显示为 Word 文档。在 FF 和 Chrome 中一切正常，但在 IE8 及更早版本中却不行。我们为 docx 添加了以下 MIME 类型：

```
application/vnd.openxmlformats-officedocument.wordprocessingml.document 
```

这已在站点和 IIS 中的计算机上完成，但无济于事。我们已经回收了应用程序池，重新启动了站点，并运行了 iisreset 很多次。无论我们做什么，它似乎都不对劲。不知何故，IE8 认为该文件是一个压缩文件，并坚持将其作为一个文件运行。该服务器是 2003 R3 SP2 Windows 服务器。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:40:52.220

使用 mime 类型 application/msword 甚至 application/octet-stream

它在技术上不正确，但它会起作用。

# sencha-touch-2 - 如何根据 Sencha Touch 中的选择查询设置 css 类？

> ID：12826377
> 
> 赞同：1
> 
> 时间：2012-10-10T18:55:36.573
> 
> 标签：sencha-touch-2

我有一个简单的选择查询来选择 DOM 节点：

```
var selectNode = Ext.select('.myCSSClass textarea'); 
```

我想将 css 类应用于*textarea*。

我试过了：

```
selectNode.addCls('newClass'); 
```

我也尝试过使用 Ext.ComponentQuery 来选择节点，但它不起作用。

我也尝试使用*apply()*方法：

```
Ext.apply(selectNode, {
    cls: 'newClass'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:50:40.057

`Ext.select`返回响应您提供的 CSS 选择器的元素数组。如果你想为 `class`这个元素的属性添加一个 CSS 类，你必须这样做：

```
Ext.select('.css-class').elements[0].className += ' myClass'; // don't forget the space 
```

例子 ：

![在此处输入图像描述](../Images/269ef203df3c6fe0b9e53be6f7e3aa33.png)

希望这可以帮助

# c# - 使用带有条件的 Linq 左连接

> ID：12826378
> 
> 赞同：0
> 
> 时间：2012-10-10T18:55:40.443
> 
> 标签：c#, sql, linq, lambda

我正在尝试在我的 C# 代码中创建一个带有条件的左连接。我可以在 SQL Server 中编写它，但在将其编写为 lambda 表达式时遇到问题。这是我的 SQL 代码的粗略部分：

```
Select x.RequestId, aud.DepartmentId
From Requests x
Left Join UserDepartment ud on x.AssignedToTeam = ud.DepartmentId and ud.User = 'Joe' 
```

我知道如何编写左连接，但不熟悉如何或是否可以添加条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:03:17.093

我*怀疑*你想要这样的东西：

```
var query = from request in db.Requests
            join department in db.UserDepartments
                                 .Where(dep => dep.User == "Joe")
              on request.AssignedToTeam equals department.DepartmentId
              into departments
            from dep in departments.DefaultIfEmpty()
            select new { request.RequestId,
                         DepartmentId = dep == null ? null : (int?) dep.DepartmentId
            }; 
```

（如果需要，显然更改您想要处理缺少部门 ID 的方式。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:47:17.550

```
var request = db.View.Join(
    db.UserDepartment.Where(w=>w.User=="Joe"),
    a=>a.AssignedToTeam, 
    b=>b.DepartmentId, 
    (a,b)=> new {View = a, UserDepartment = b}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:01:36.310

查看 MSDN 文章：[如何：执行左外连接（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb397895.aspx)

# batch-file - 使用批处理脚本搜索然后用 txt 文件中的变量替换整行

> ID：12826387
> 
> 赞同：4
> 
> 时间：2012-10-10T18:56:13.263
> 
> 标签：batch-file

我正在尝试创建一个 .bat 文件，该文件将用整行文本替换一组变量（按顺序）。

我曾经从文件'variables.txt'中提取3行文本数组：

```
 @echo off
    setlocal ENABLEDELAYEDEXPANSION
    set vidx=0
    for /F "tokens=*" %%A in (variables.txt) do (
SET /A vidx=!vidx! + 1
set var!vidx!=%%A
    )
    set var 
```

我想扫描文件“export.txt”，并且第一次遇到“client”这个词时，我想用第一个变量替换整行。

第二次遇到“客户”一词时，我希望它用第二个变量替换整行（依此类推）。

我真的很难过，不确定 for /F 序列中的多个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:46:43.983

你快到了，你只需要循环浏览包含的行`client`

```
set vidx=0
for /F "tokens=*" %%A in ('findstr "client" export.txt') do (
SET /A vidx=!vidx! + 1
set var!vidx!=%%A
)
set var 
```

对于 export.txt 文件：

```
blah
client test1 test1
blah blah blah
client test2 test 2
blah blah
blah
test client test3 
```

输出是：

```
var1=client test1 test1
var2=client test2 test 2
var3=test client test3 
```

# android - 在画布上绘制延迟 - “让 onDraw() 减速”

> ID：12826391
> 
> 赞同：6
> 
> 时间：2012-10-10T18:56:18.827
> 
> 标签：android, animation, android-canvas, draw

我在 android 中使用像 drawCircle 和 drawPoint 这样的画布函数。这工作正常。

但是现在的问题是延迟绘制这些不同的项目，所以它看起来像一个动画。

我应该使用什么样的机制？尝试过异步，但我不喜欢这种方式。

我应该使用某种仅按时间间隔绘制的计时器，还是有其他聪明的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:06:21.180

我使用这种策略，首先我以这种方式声明一个 Handler 和一个 Runnable：

```
 private final Observable mObservable = new Observable();
    private final static int TIME_STEP_MS = 5;
    private final Handler mHandler = new Handler();
    private final Runnable mTimeManager = new Runnable() 
    {
        public void run() 
        {
            mObservable.notifyObservers(TIME_STEP_MS);
            mHandler.postDelayed(mTimeManager, TIME_STEP_MS);
        }
    }; 
```

然后，当我想启动我的时间管理器时，我只需调用 mTimeManager.run()，它就会开始`Observer`定期通知我的 s（之前添加的）。

如果您出于某种原因需要停止计时器或您只需执行以下操作：

```
 mHandler.removeCallbacks(mTimeManager); 
```

**[编辑-更完整的代码]**

好吧，让我们更清楚一点，首先我制作了一个像这样的自定义 Observable 对象[这是可选的]：

```
 private final Observable mObservable = new Observable()
    {
        public void notifyObservers()
        {
            setChanged();
            super.notifyObservers();
        };

        @Override
        public void notifyObservers(Object data) 
        {
            setChanged();
            super.notifyObservers(data);
        };
    }; 
```

这样做的原因只是因为我不能在 Observable 类之外调用 setChanged() - 它是受保护的，如果它没有改变它不会通知任何观察者。

其他声明与之前显示的相同，现在我需要在`TimeManager`某个地方开始，我的应用程序是 LiveWallpaper，我将所有渲染内容放入一个扩展 a`Thread`但你不一定需要的类中，我创建了一个名为 的方法`resumeDrawing()`，这个是`super.start();`在我`@Override`的班级之后立即调用`public synchronized void start()`的`Thread`，该方法如下所示：

```
 public void resumeDrawing()
    {
        if (!mTimeManagerRunning) // just a boolean field in my class
        {
            System.err.println("Resuming renderer."); // just for debug
            mTimeManager.run();
            mTimeManagerRunning = true;
        }
        else
        {
            System.err.println("Renderer already running."); // just for debug
        }
    } 
```

它是双重的：

```
 public void pauseDrawing()
    {
        if (mTimeManagerRunning)
        {
            System.err.println("Pausing renderer.");
            mHandler.removeCallbacks(mTimeManager);
            mTimeManagerRunning = false;
        }
        else
        {
            System.err.println("Renderer already paused.");
        }
    } 
```

好的，现在我们可以启动和停止时间管理器，但是谁在听呢？没有人！所以让我们添加：在我的 Renderer 的构造函数中，我`Observer`向我的对象添加了一些 s `mObservable`，其中之一是 Renderer 本身，所以我的渲染器扩展`Thread`并实现`Observer`：

```
 @Override // from Observer interface
    public void update(Observable arg0, Object arg1) 
    {
        mElapsedMsRedraw += (Integer) arg1; 

        if (mElapsedMsRedraw >= mDrawingMsPerFrame)
        {
            mElapsedMsRedraw = 0;
            drawEm(); // refresh the canvas and stuff
        }
    } 
```

添加观察者，您只需这样做`mObservable.addObserver(THE_OBJECT - Implements Observer)`

您可以看到，每次收到通知时我都不会重新渲染我的东西，那是因为我将这个 TimeManager 用于其他想法，而不仅仅是刷新`Canvas`我想在内部绘制的对象的位置。

所以，你需要减慢绘图速度是改变你的对象在时间流逝时内部变化的方式，我的意思是你的圆圈和点等，或者你可以选择你的时间步长，我推荐第一个。

是不是更清楚了？我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:05:57.197

我会使用计时器，或创建动画。你可以创建动画来做各种各样的事情，包括随着时间的推移改变透明度。

这是动画资源的[Android 文档](http://developer.android.com/guide/topics/resources/animation-resource.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-18T09:05:43.417

我相信可能有复杂的方法可以做到这一点，但出于我的需要，我使用了一种具有很多优点的简单方法：我首先为绘图的每个点创建坐标**记录**（以及所需的任何其他数据）——而不是在现场绘制点 - 然后使用计时器（最好是 Android 处理程序）重现它们。这在实际绘图时也提供了很多可能性：暂停，快/慢，倒退，......我不知道这种方法是否可以用于复杂的绘图，但它可以用于绘制形状，曲线，曲面， ETC。

# .net - 单元格中的 VSTO excel 按钮

> ID：12826397
> 
> 赞同：0
> 
> 时间：2012-10-10T18:56:54.823
> 
> 标签：.net, excel, button, vsto

我正在使用 VSTO / .NET4.0 创建 Excel 插件。我想将控件（按钮和组合框）嵌入到工作表中。我使用下面的代码，但是一旦我保存工作簿，关闭它并重新打开它，按钮就变成了一个没有功能的平面图像。我究竟做错了什么？任何帮助将不胜感激！

```
System.Windows.Forms.Button b = new System.Windows.Forms.Button();
b.Text = "Run";
sheet.Controls.AddControl(b, (sheet.Cells[rowidx, colidx] as Range),"buttonName");
b.Click += this.runSimulation; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:36:18.323

VSTO 解决方案有两种类型：加载项和文档自定义。您可以使用插件动态地将控件添加到工作表，但是，一旦您关闭并重新打开文档，这些控件就会消失。如果您希望您的工作表具有“持久”的自定义控件，那么您所追求的可能是文档自定义：您可以使用控件开发和设计文档，并且与加载项不同，代码“附加”到工作簿.

# math - 八度：哪种方法更有效

> ID：12826405
> 
> 赞同：4
> 
> 时间：2012-10-10T18:57:10.780
> 
> 标签：math, optimization, octave, mathematical-optimization

我正在 GNU Octave 中尝试一些机器学习算法，例如平方误差成本函数。我所说的正确的矢量化论坛是：

```
J = (X * theta - y)' * (X * theta - y) * (1/(2*m) 
```

其中 X 是 `m x n+1`矩阵，theta 是`n+1 x 1`向量，y 是`m x 1`向量。我的问题是第二种方式是否更快一点：

```
J = sum((X * theta - y).^2) * (1/(2*m)) 
```

因为它只计算`X * theta -y`一次。作为 octave 的新手，它似乎在 windows 上运行在一个非常有气质的环境中，我不知道如何对自己进行基准测试。

由于这比任何事情都更令人好奇，请随时告诉我这甚至都没有关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:42:42.933

这会检查挂钟时间：

```
octave:2> tic; sleep(3); toc
Elapsed time is 3.00161 seconds.
octave:3> help tic 
```

分辨率不是太大，因此您可能希望在循环中多次运行计算。

要测量 CPU 时间，请使用`cputime`：

```
octave:7> cputime()
ans =  0.21000
octave:8> sleep(3)
octave:9> cputime()
ans =  0.21000 
```

# php - 如何确保 PHPUnit 中的数组相等？

> ID：12826406
> 
> 赞同：0
> 
> 时间：2012-10-10T18:57:13.843
> 
> 标签：php, selenium, phpunit

我正在测试网站的下拉菜单以按名称排序。

```
$nameSort = array();
    $numOfNames = $this->getXpathCount("//td[@class='entry']");
    for($count = 1; $count <= $numOfNames; $count ++) {
        $get = $this->getText("xpath=(//td/a[contains(@href, '')])[$count]");
        array_push($nameSort, $get);
    }
    $test = sort($entrySort);
    $this->assertEquals($entrySort, $test); 
```

但它说“有1次失败：

`NameTest::testNameTab true does not match expected type "array".`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:02:51.930

您的问题是`sort`返回一个布尔值并对数组进行排序。

举个例子：

```
$arr = array(1,5,3); 
var_dump(sort($arr)); 
var_dump($arr); 
```

这将导致：

```
bool(true)
array(3) {
  [0]=>
  int(1)
  [1]=>
  int(3)
  [2]=>
  int(5)
} 
```

你可能想要这个（或类似的东西）：

```
sort($nameSort);
$this->assertEquals($entrySort, $nameSort); 
```

# ssis - SSIS 客户端不支持在 MySQL 脚本中重新定义 DELIMITER

> ID：12826408
> 
> 赞同：0
> 
> 时间：2012-10-10T18:57:33.530
> 
> 标签：ssis

我想创建导入 Mysql 数据库的过程。如果我在 SQL 执行器任务中运行以下查询，它将失败。

```
DELIMITER $$

create procedure abc

as

begin

select count(*) from tableA;

select count(*) from tableB;

end

DELIMITER ; 
```

这表明 DELIMITER 命令存在问题。我检查了问题是否出在 MYSQL 的 .NET 连接器上。但是根据Mysql中的论坛，它已经在那里解决了： http: [//dev.mysql.com/doc/refman/5.1/en/connector-net-news-6-3-1.html](http://dev.mysql.com/doc/refman/5.1/en/connector-net-news-6-3-1.html)

Mysql 连接器错误：[http ://bugs.mysql.com/bug.php?id=46429](http://bugs.mysql.com/bug.php?id=46429)

实际上 DELIMITER 是客户端命令，所以我得出的结论是问题出在 SSIS 上。

有人可以说明一下吗？

# html - 我无法调整文本大小

> ID：12826412
> 
> 赞同：0
> 
> 时间：2012-10-10T18:57:48.913
> 
> 标签：html, css, fonts, resize

我在调整文本大小时遇到​​问题。我上传图片用于说明目的。 ![在此处输入图像描述](../Images/a0d385cdf3f1b7bba55462b944101804.png) 问题是。大框是父 div，其中有一个包含图像的较小 div（较小的框）。较大的 div 的其余部分应填充文本（红色/粉色线）。文本格式为段落 ( `<p> .... </p> <p> .... </p>`)，并且文本中有一些链接。

div 的大小是动态的，它们会随着窗口大小的变化而变化。所以我希望改变字体大小以适应主 div。有什么解决办法吗？我真的很感激。

这是我的html代码

```
<div id="taust" align="justify">

<img src="images/1.png" width="30%" height="auto" alt="1" id="top_foto">
<img src="images/A.png" width="auto" height="15%">

<p> text </p>
<p> text </p>
<p> text </p>
<p>text <a href="link" target="_blank">Link</a>!</p>

</div> 
```

这是我的 CSS 代码

```
@charset "utf-8";
/* CSS Document */

html, body, div, a, p {
}
html { 
    background: url(background/bg_image2_sx.jpg) no-repeat; 
    top: 0;
    left: 0;
    width: 100%;
    height:100%;
    background-size: cover;
    position: relative;
    min-width: 911px;
    min-height: 500px;
    font-size: 100%;
}

body {
    font-family:"Franklin Gothic Medium","Arial Narrow Bold",Arial,sans-serif;
}

#taust {  
    background-image:url(images/taust.png);
    width: 88%;
    height: 87%;
    position: absolute;
    top: 5%;
    left: 5%;
    min-height:435px;
    min-width:802px;
    border: 1px solid #CCC;
    padding: 1%;
}

@font-face { font-family: riesling; src: url('font/riesling.TTF');
}

a {
    color: #CCC;
    text-decoration: underline;
    font-size:0.95em;
    line-height: 1.4em;
    font-family:"Franklin Gothic Medium","Arial Narrow Bold",Arial,sans-serif;
}

p {
    line-height: 1.4em;
    font-size: 0.95em;
    color:#CCC;
    margin: 0 0 6px 0;
    font-family:"Franklin Gothic Medium","Arial Narrow Bold",Arial,sans-serif;
}

#top_foto {
    float: left;
    margin: 0 1.2% 1.2% 0;
    border: solid 1px #CCC;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:56:53.950

您的 div 没有扩展到覆盖所有文本，因为您的位置在 CSS 中设置为绝对。我编辑了下面的 CSS。

```
#taust {  /* Avalehe taustaks must kast */
    background-color: #CCC;
    width: 88%;
    height: 87%;
    position: relative;
    top: 5%;
    left: 5%;
    border: 1px solid #000000;
    padding: 1%;
}​ 
```

如果您希望 DIV 具有特定大小，但又希望将字体限制在其中，则整个站点应使用相对单位，例如百分比。否则，我认为您最终会使用反复试验来尝试找出在任何给定屏幕尺寸下什么尺寸的文本不会流出您的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:03:02.457

This answer from a similar question似乎回答了您的问题：

> 我不得不自己做这件事。我所做的是为正文设置基本文本大小，并为所有其他大小设置百分比。然后，我使用一个简单的 jQuery 脚本来更改窗口调整大小的基本大小。然后其他尺寸也会更新。我用过这样的东西：
> 
> ```
> $(function() {
>      $(window).bind('resize', function() {
>          resizeMe();
>      }).trigger('resize');
> }); 
> ```
> 
> 在 resizeMe 函数中，我有这个：
> 
> ```
> //Standard height, for which the body font size is correct var
> preferredHeight = 768;  
> 
> var displayHeight = $(window).height(); 
> var percentage = displayHeight / preferredHeight;
> var newFontSize = Math.floor(fontsize * percentage) > - 1;
> $("body").css("font-size", newFontSize); 
> ```

请参阅：[调整窗口大小时自动调整文本大小（字体大小）？](https://stackoverflow.com/questions/2989950/auto-resize-text-font-size-when-resizing-window)

编辑：

要将 jQuery 添加到您的代码中，请执行以下操作：

您必须参考 jQuery 库。通常，您在页面中的结束`</body>`标记之前执行此操作。`index.html`

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

这是google托管的，速度最快，体积最小的。您也可以下载该库并将其放入您的 js 文件夹中，并像上面一样引用它，但带有指向您文件的相对链接。

然后，您可以将 jQuery 代码粘贴到上述脚本下方和结束`</body>`标记上方，它应该可以工作。您还可以将代码放在单独的文件中，并在 index.html 页面的正文部分底部链接到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:11:36.790

使用媒体查询动态调整大小，或使用 VH、VW（相对单位），但目前受 Chrome 和 IE9/10 支持。

# msdeploy - 如何使用 msdeploy 中的 skip 指令跳过文件和包含它们的目录？

> ID：12826414
> 
> 赞同：1
> 
> 时间：2012-10-10T18:57:54.903
> 
> 标签：msdeploy, microsoft-distributed-file-system

我们正在将网站部署到 DFS 共享。DFS 在不同位置创建名为 .DFSFolderLink.lnk 的快捷方式文件。该框的管理员无权删除此快捷方式文件。因此，如果存在，我需要将它们从部署中排除，这样它们就不会被删除。

我已经可以通过将*-skip:File=.DFSFolderLink.lnk*传递给 msdeploy来排除 .DFSFolderLink。但是，如果正在部署的包中不存在包含快捷方式文件的目录，则会引发错误，因为它试图删除该文件夹但不能因为快捷方式文件仍然存在而无法删除。

如何在不提前知道目录名称的情况下排除快捷方式文件和包含它的目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:00:27.050

如果您不知道目录的名称，则不能跳过它。您*可以*做的是告诉 msdeploy 使用[`ignoreErrors`提供程序设置](http://technet.microsoft.com/en-us/library/dd569001%28v=ws.10%29)忽略“目录非空”错误：

```
msdeploy -verb:sync -source:... ^
         -dest:auto,ignoreErrors=80070091,computerName=... ^
         -skip:File=\.DFSFolderLink.lnk 
```

# wordpress - 从 URL 中删除 index.htm

> ID：12826419
> 
> 赞同：1
> 
> 时间：2012-10-10T18:58:34.397
> 
> 标签：wordpress, .htaccess

我有一个运行良好的 WordPress 博客 - URL 设置为月/日/年，前端的所有内容看起来和功能都很好。

然而，当检查我的统计数据和谷歌网站管理员工具时，有大量的 404 看起来像这样：

```
http://theURL.com/normal-wordpress-url/index.htm 
```

当然，`index.htm`WordPress URL 的末尾不存在，所以搜索引擎给出了 404。

我不知道是什么原因造成的，因为一切对人类来说都很好。

所以基本上，我需要一种方法来告诉搜索引擎忘记 URL 末尾的 index.htm。

我在`.htacess`没有运气的情况下尝试过这个：

```
RewriteCond %{REQUEST_URI} /index\.htm?$ [NC]
RewriteRule ^(.*)index\.htm?$ "/$1" [NC,R=301,NE,L] 
```

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:32:18.700

也许这里有不同的问题需要解决：

**问题 1：**如果爬虫是指向此页面的爬虫，您可能需要做两件事：

*   尝试去网站管理员并删除“index.htm”
*   尝试创建一个不允许在 Google Crawler 上看到“index.htm”的机器人。

**问题 2：**如果您已经分发了指向此 url 的 url，Google 网站管理员可以告诉您它来自哪个网页。

*   因此，请尝试确保将所有指向“index.htm”的链接从所有其他 url 中删除。

# ruby-on-rails - 骨干网、rails、跨域和前端/后端解耦？

> ID：12826424
> 
> 赞同：2
> 
> 时间：2012-10-10T18:58:48.293
> 
> 标签：ruby-on-rails, backbone.js, backend, frontend, decoupling

我需要解耦前端和后端。我将 Rails 用于后端，将 Backbone 用于前端。

经过几天的反复试验，我能够在服务器上设置 CORS。多亏了这个模块：

[https://github.com/yaoweibin/nginx_cross_origin_module](https://github.com/yaoweibin/nginx_cross_origin_module)

现在我发现 Backbone 不支持开箱即用的跨域调用。

我想知道将 Backbone 与后端分离的最佳方法是什么？

我看到两个解决方案：

1）在将指向服务器的主干模型/集合中写入路径，因此我将获得例如：

```
class App.Collections.Plots extends Backbone.Collection
   model: App.Models.Plot
   url: 'http://www.app.com/api/plots' 
```

这意味着我还必须修补 Backbone 方法以支持跨域。

2）以这样的方式设置前端部分的rails端，Rails而不是Backone将对服务器进行跨域调用。这看起来很奇怪，因为Backbone应该使解耦更容易，现在我会有点退回到 Rails 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:44:26.177

现在我发现 Backbone 不支持开箱即用的跨域调用。

Backbone.js “支持”跨域调用。事实上，它并不特定于backbone.js，它是浏览器的角色来支持它。在兼容 CORS 的浏览器中，每个请求（POST、GET）之前都有一个 OPTIONS 请求，以检查服务器是否授权相应的 POST 或 GET 请求。

所以你只需要在你的 Rails 应用程序中响应这个新的调用。例如 ：

```
class ApplicationController < ActionController::Base
  before_filter :cors_preflight_check
  after_filter :cors_set_access_control_headers

  # For all responses in this controller, return the CORS access control headers.
  def cors_set_access_control_headers
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
    headers['Access-Control-Max-Age'] = "1728000"
  end

  # If this is a preflight OPTIONS request, then short-circuit the
  # request, return only the necessary headers and return an empty
  # text/plain.
  def cors_preflight_check
    if request.method == :options
      headers['Access-Control-Allow-Origin'] = '*'
      headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
      headers['Access-Control-Allow-Headers'] = 'X-Requested-With, X-Prototype-Version'
      headers['Access-Control-Max-Age'] = '1728000'
      render :text => '', :content_type => 'text/plain'
    end
  end

end 
```

这篇好文章的代码：[http ://www.tsheffler.com/blog/?p=428](http://www.tsheffler.com/blog/?p=428)

所以如果你的 Nginx 插件工作正常，你应该没问题。只需检查您的`Access-Control-Allow-Origin`标头是否包含执行 javascript 的域。

# asp.net - 如何使用窗口服务帐户使用窗口身份验证托管 asp.net 应用程序

> ID：12826431
> 
> 赞同：0
> 
> 时间：2012-10-10T18:59:13.193
> 
> 标签：asp.net, iis, hosting, impersonation, spn

我正在一个使用 Active Directory 进行任何类型的应用程序身份验证的组织工作。

我们最近在 ASP.NET 上创建了一个 Web 应用程序，使用 Sql Server 进行数据库连接。在开发过程中，我们使用窗口身份验证连接到 Sql Server 2008。当应用程序完成时，是时候在 IIS 上托管这个应用程序了。

挑战

我们被要求使用窗口服务帐户在服务器上托管此应用程序。我们不应该在任何地方使用任何类型的用户名密码。它应该是活动目录驱动和窗口身份验证驱动的。

现在我不知道如何进行此操作。我是否需要对 Web 配置进行任何更改以配置模拟，或者我需要更改我的连接字符串。

我只知道我们必须使用 Window 身份验证。

任何指导方针都会有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:52:02.270

内部连接字符串使用可信连接，其他配置可以在这里找到：

[WindowsIdentity 和经典 .Net 应用程序池](https://stackoverflow.com/questions/12645601/windowsidentity-and-classic-net-app-pool/12646148#12646148)

只需确保将模拟设置为已启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:09:40.173

这是我一直在做的：

1.  创建一个应用程序池供站点使用。如果需要，您可以使用已创建的池。
2.  将应用程序池的标识设置为您的 IT 人员希望您使用的 AD 服务帐户。
3.  确保服务帐户也可以访问数据库资源
4.  配置您的连接字符串以使用集成安全性。
5.  在 web.config 中配置 Windows 身份验证和模拟。

对于 #4 和 5： http: [//msdn.microsoft.com/en-us/library/bsz5788z (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bsz5788z(v=vs.100).aspx)

# objective-c - 如何将新行插入到不同类的表视图中？

> ID：12826432
> 
> 赞同：0
> 
> 时间：2012-10-10T18:59:16.883
> 
> 标签：objective-c, ios, xcode

我正在尝试从不同的类访问 tableView 属性（在 UITableViewController 类中定义）。一旦我访问它，我需要向它发送方法

```
insertRowsAtIndexPaths: withRowAnimation:UITableViewRowAnimationAutomatic: 
```

这是我的代码，但它似乎没有插入新行？

> [((MainViewController *)self.presentingViewController).tableView insertRowsAtIndexPaths:@[path] withRowAnimation:UITableViewRowAnimationAutomatic];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:13:54.110

您需要确保您的数据源也能自行修改。所以如果你插入一个新行，你需要

--tableView:numberOfRowsInSection:

比以前多返回 1，并且

--tableView:cellForRowAtIndexPath:

返回新单元格。TableView 不会为您处理这些部分。

这是您的代码应该是什么样子的粗略轮廓。

```
[tableView beginUpdates];
// Some code to add row to your datasource
[datasource addrow]
[tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];
[tableView endUpdates]; 
```

# c# - ATDD - 验收测试从哪里开始？

> ID：12826440
> 
> 赞同：3
> 
> 时间：2012-10-10T18:59:41.443
> 
> 标签：c#, asp.net-mvc, unit-testing, acceptance-testing

我试图理解验收测试，但我很困惑它从哪里开始或涉及什么样的测试/s。我必须使用自动化 GUI 测试框架还是必须使用单元测试？验收测试的边界是什么？

编辑：我的问题是关于**自动化**验收测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:20:40.343

验收测试是在整个应用程序/软件开发和集成之后进行的。验收测试主要是为了测试应用程序是否满足用户要求。

验收测试主要有两种类型。

*   阿尔法测试
*   Beta测试

验收测试主要由客户（要求开发软件的人）和最终用户完成。

**Alpha 测试**由客户端完成。他得到了开发商的帮助。在这里，客户查看软件以确保满足他的所有要求。

**Beta 测试**在 Alpha 测试完成后进行。在这里，应用程序被发布给一组充当最终用户并使用应用程序的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:03:18.953

不要将单元测试与验收测试混淆。

**验收测试**基本上是*需求*，编写为测试，以便：

1.  清楚何时满足要求；
2.  实际测试更容易计划和运行。

**单元测试**是对少量代码的自动化测试，用于监视所有的小代码，而不需要持续（并且非常讨厌）手动检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:03:31.157

你可以沿着 UI 之路走下去。Selenium 或 WatiR 是可用于运行基于 ui 的测试套件的可靠工具。如果你是 Dot.Net 开发者，你可以使用 WatiN，但它的问题是它似乎已经死了，因为它自 2011 年 4 月以来没有新版本。

不久前，我确实设法为我提供了一些不错的测试套件，集成了 SpecFlow（稍后会详细介绍）和 watiN，它运行良好。

然而，随着时间的推移，我意识到当我在做基于 UI 的测试时，我所做的只是加载一个页面，点击一些东西，而不是检查数据库中的结果。有时，我还检查了屏幕是否也显示了预期的消息，但仅此而已。这个结论让我放弃了基于 UI 的测试。

我开始做的是确保 UI 建立在规则和成语之上。现在的工具（asp.net mvc、razor 模板或更好的[——knockout.js](http://knockoutjs.com/)）允许我们这样做而没有太多的痛苦。当 UI 是有条不紊地构建的，而不是每个人都在页面上抛出他们喜欢的任何字段时，大多数时候您需要测试的只是构建它的方法，而不是结果。[当然，如果我确实想测试它（在某些情况下，你会），使用QUnit](http://qunitjs.com/)等工具测试它会更容易（更快），

所以我目前练习 ATDD 的方式：

1.  使用[specflow](http://www.specflow.org/specflownew/)将业务需求纳入测试代码。
2.  仅测试“后面的代码”。
3.  使用 knockoutJS 进行 UI 管道（使用大量自定义绑定）
4.  为返回到视图的模型创建标准。
5.  将 UI 行为测试视为单元测试。

这是 specflow 的一个很好的起点：http: [//www.infoq.com/articles/Spec-Flow](http://www.infoq.com/articles/Spec-Flow)

# javascript - javascript 周选择器

> ID：12826441
> 
> 赞同：1
> 
> 时间：2012-10-10T18:59:45.597
> 
> 标签：javascript, datetime

有人可以推荐一个可以编辑的星期选择器，例如我需要将月份的名称更改为另一种语言。

我看到了这个 jQuery 周选择器，可以稍微改变一下吗？正如我所说，我需要将月份名称更改为另一种语言。

[周选择器](https://stackoverflow.com/questions/1289633/how-to-use-jquery-ui-calendar-date-picker-for-week-rather-than-day)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:03:07.447

您发布的内容基于**支持**本地化的 jQuery UI Datepicker，请参阅[文档](http://jqueryui.com/datepicker/#localization)。

```
$("#datepicker" ).datepicker("option", $.datepicker.regional["en"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:08:30.697

只需 insert `monthNames: ["J","F","M","A","M","J","J","A","S","O","N","D"]`，其中数组有 12 个字符串将用作月份名称，作为初始化日期选择器时的一个选项。我从您的链接帖子中编辑了 jsfiddle 以显示[DEMO](http://jsfiddle.net/AVZJh/825/)。

# javascript - 当用户在一个 如何区分用户是尝试提交还是从自动完成中选择

> ID：12826448
> 
> 赞同：0
> 
> 时间：2012-10-10T19:00:17.530
> 
> 标签：javascript, jquery, html

我尝试了一些建议，例如在用户点击“向下箭头”键时进行录制，但它并不可靠。当用户点击向下箭头然后使用鼠标单击从下拉自动完成列表中进行选择时，该方法会中断。

您能否告诉我是否有一种可靠的方法来区分用户的“输入”键事件是尝试提交表单还是从下拉自动完成中选择？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:04:31.143

检查用户是否关注下拉菜单。

例如

```
 if ($("#yourdropdown").is(":focus"))
 {
    return false;
 } 
```

这是由 jquery [jquery Focus完成的](http://api.jquery.com/focus/)

# ruby - 在提交时生成文档

> ID：12826453
> 
> 赞同：2
> 
> 时间：2012-10-10T19:00:30.040
> 
> 标签：ruby, git, rdoc, yard

作为 git 提交工作流程的一部分，自动生成 ruby​​ 文档的最佳实践是什么？我们希望在提交合并到 master 时自动生成新文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:08:54.900

使用 Git 钩子。

如果您希望它在客户端运行，请使用**提交后挂钩**。从本质上讲，注册一个钩子（通过将其存储在 中`.git/hooks`）使 Git 调用您在每次成功后提供的任意脚本`git commit`。然后，您的脚本可以调用 RDoc 或 YARD 将文档生成到某个输出目录（当然，在您的源代码存储库之外）。

**或者，您可以使用接收后**挂钩在托管您的 Git 存储库的服务器上运行它。这将在您推送到服务器的存储库后运行。例如，您可以使用它自动将新文档上传到`/docs/dev/`项目的 Web 服务器上。

有关详细说明，请参阅[Git 手册中有关钩子的章节](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)。

# jquery - django ajax 上下文

> ID：12826456
> 
> 赞同：0
> 
> 时间：2012-10-10T19:00:40.227
> 
> 标签：jquery, ajax, django, django-context

如何在我的 html/jquery 中使用下面的 upload_response 来检查它是否正确，并相应地显示一些文本而不转到新页面？

文件上传.py 文件：

```
 template = loader.get_template('start_interview.html')
  context = Context({ 'upload_response': 'True'})
  return HttpResponse(template.render(context)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:11:21.287

您将需要为[ajax 部分](http://api.jquery.com/jQuery.ajax/)使用类似 jquery 的东西。

```
$.ajax({
  type: "POST",
  url: "<your url to the view that returns appropriate template>",
  data: { name: "John", location: "Boston" }
}).done(function( responseMsg ) {
  $('#notifier').html(responseMsg)
}); 
```

将`responseMsg`是渲染的模板。完成上述操作的方法不止一种。

在您的模板中

```
{%if upload_response %}
 ...Your html tags or jquery if inside script block...
{%else%}
 ...Do Stuff if it is false...
{%endif%} 
```

# python - Python - 从二维数组中获取值

> ID：12826458
> 
> 赞同：3
> 
> 时间：2012-10-10T19:01:04.173
> 
> 标签：python, arrays, multidimensional-array

我有一个二维数组：

```
[[], ['shotgun', 'weapon'], ['pistol', 'weapon'], ['cheesecake', 'food'], []] 
```

我如何从中调用一个值？例如我`print (name + " " + type)`想得到

> 霰弹枪武器

我找不到这样做的方法。不知何故`print list[2][1]`，什么也不输出，甚至没有错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T19:05:23.987

```
>>> mylist = [[], ['shotgun', 'weapon'], ['pistol', 'weapon'], ['cheesecake', 'f
ood'], []]
>>> print mylist[2][1]
weapon 
```

记住几件事，

1.  不要命名您的列表，[列表](http://docs.python.org/library/functions.html#list)...这是python保留字
2.  列表从索引 0 开始。所以`mylist[0]`会给出`[]`
    类似的，`mylist[1][0]`会给出`'shotgun'`
3.  考虑替代数据结构，如[字典](http://docs.python.org/tutorial/datastructures.html#dictionaries)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T19:03:53.407

通过索引访问适用于任何`sequence` `(String, List, Tuple)`：-

```
>>> list1 = [[], ['shotgun', 'weapon'], ['pistol', 'weapon'], ['cheesecake', 'food'], []]
>>> list1[1]
['shotgun', 'weapon']
>>> print list1[1][1]
weapon
>>> print ' '.join(list1[1])
shotgun weapon
>>> 
```

您可以使用列表上的**连接**，将字符串从列表中取出..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:05:02.093

```
array = [[], ['shotgun', 'weapon'], ['pistol', 'weapon'], ['cheesecake', 'food'], []]
print " ".join(array[1]) 
```

用 切片到数组中`[1]`，然后使用 加入数组的内容`' '.join()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T19:09:33.967

```
In [80]: [[], ['shotgun', 'weapon'], ['pistol', 'weapon'], ['cheesecake', 'food'], []]
Out[80]: [[], ['shotgun', 'weapon'], ['pistol', 'weapon'], ['cheesecake', 'food'], []]

In [81]: a = [[], ['shotgun', 'weapon'], ['pistol', 'weapon'], ['cheesecake', 'food'], []]

In [82]: a[1]
Out[82]: ['shotgun', 'weapon']

In [83]: a[2][1]
Out[83]: 'weapon' 
```

要获取所有列表元素，您应该使用 for 循环，如下所示。

```
In [89]: a
Out[89]: [[], ['shotgun', 'weapon'], ['pistol', 'weapon'], ['cheesecake', 'food'], []]

In [90]: for item in a:
    print " ".join(item)
   ....:     

shotgun weapon
pistol weapon
cheesecake food 
```

# memory - vb.net - 处理大量图像时内存不足

> ID：12826459
> 
> 赞同：1
> 
> 时间：2012-10-10T19:01:07.980
> 
> 标签：memory

我正在尝试检查一组图像（通常超过 50 个，每个大约 3 Mb）的方向。当我已经处理了一堆时，我得到“内存不足”错误。

所以我的问题是如何分别检查每个图像以使用最少的内存？

我对 vb.net 和编程真的很陌生，所以这是我弄清楚如何完成任务的唯一方法：

```
 Dim MyFiles As New ArrayList()

  Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    TextBox2.Clear()

    If CheckBox2.Checked = True Then

        TextBox2.Text = "Checking the orientation of the images ..." & vbNewLine & vbNewLine

        For i As Integer = 0 To MyFiles.Count - 1

            TextBox2.AppendText("Checking " & MyFiles(i) & vbNewLine)
            If Image.FromFile(MyFiles(i)).Width < Image.FromFile(MyFiles(i)).Height Then
                TextBox2.AppendText(vbNewLine & "There are images with portrait orientation. Splitting aborted!" & vbNewLine)
                Return
            End If

        Next

        TextBox2.AppendText(vbNewLine & "All images are with landscape orientation." & vbNewLine)

    End If

    'ConvertBMP("C:\test.bmp", ImageFormat.Jpeg)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:10:22.123

在 Image.FromFile 命令周围抛出 using() 。此外，您应该只构建一次图像并检查一次宽度/高度，而不是解码两次。

在 c# 中，它看起来像这样：

```
using (var img = Image.FromFile(filename))
{
    if (img.Width < img.Height)
        doSomething();
} 
```

或在 VB.Net 中（我的 VB.Net 有点生疏，但我认为这是正确的）：

```
Dim img as Image
Using img = Image.FromFile(filename)
    If img.Width < img.Height
        TextBox2.AppendText(vbNewLine & "There are images with portrait orientation. Splitting aborted!" & vbNewLine)
        Return
    End If
End Using 
```

# encryption - 蓝牙会加密数据吗？

> ID：12826461
> 
> 赞同：7
> 
> 时间：2012-10-10T19:01:16.707
> 
> 标签：encryption, bluetooth

简介：我在不完全熟悉蓝牙堆栈和协议的情况下遇到这个问题，因此这可能需要几轮编辑，因为我的假设中的错误被揭示出来。

我正在尝试连接到蓝牙设备[Scosche myTREK Pulse Monitor](http://www.scosche.com/consumer-tech/product/2218)。我能够使用 Android 的“官方”应用程序连接到设备，并使用`hcidump`. 我可以通过链接密钥交换阅读和理解连接过程；但是，设备随后会发送一个 HCI`Encrypt Change`事件，之后大多数（但不是全部）数据包都被标记为 ACL 数据包，并且难以解释。

基本问题是：**蓝牙是否加密数据，是否有安全解密的方法？这与转向 ACL 数据包有关吗？**

这是给定连接提供的数据包输出示例`hcidump`，从传递链接密钥开始。（`>`指监视器发送数据）

```
> HCI Event: Link Key Request (0x17) plen 6
  0000: ** ** ** ** ** **                                 ??????

< HCI Command: Link Key Request Reply (0x01|0x000b) plen 22
  0000: ** ** ** ** ** ** ** **  ** ** ** ** ** ** ** **  ???????????????
  0010: ** ** ** ** ** **                                 ??????

> HCI Event: Command Complete (0x0e) plen 10
  0000: 01 0b 04 00 ** ** ** ** ** **                    ....??????

> HCI Event: Encrypt Change (0x08) plen 4
  0000: 00 0c 00 01                                       ....

> ACL data: handle 12 flags 0x02 dlen 12
    L2CAP(s): Connect req: psm 1 scid 0x0040

< ACL data: handle 12 flags 0x00 dlen 16
    0000: 0c 00 01 00 03 02 08 00  40 00 40 00 01 00 00 00  ........@.@.....

< ACL data: handle 12 flags 0x00 dlen 10
    0000: 06 00 01 00 0a 01 02 00  02 00                    ..........

> HCI Event: Number of Completed Packets (0x13) plen 5
  0000: 01 0c 00 02 00                                    .....

> ACL data: handle 12 flags 0x02 dlen 16
    L2CAP(s): Info rsp: type 2 result 0
      Extended feature mask 0x0000

< ACL data: handle 12 flags 0x00 dlen 16
    0000: 0c 00 01 00 03 02 08 00  40 00 40 00 00 00 00 00  ........@.@.....

< ACL data: handle 12 flags 0x00 dlen 12
    0000: 08 00 01 00 04 02 04 00  40 00 00 00              ........@...

> HCI Event: Number of Completed Packets (0x13) plen 5
  0000: 01 0c 00 02 00                                    .....

> ACL data: handle 12 flags 0x02 dlen 16
    L2CAP(s): Config req: dcid 0x0040 flags 0x00 clen 4
      MTU 48 

< ACL data: handle 12 flags 0x00 dlen 18
    0000: 0e 00 01 00 05 03 0a 00  40 00 00 00 00 00 01 02  ........@.......
    0010: 30 00                                             0.

> ACL data: handle 12 flags 0x02 dlen 14
    L2CAP(s): Config rsp: scid 0x0040 flags 0x00 result 0 clen 0
      Success

> ACL data: handle 12 flags 0x02 dlen 36
    L2CAP(d): cid 0x0040 len 32 [psm 0]
      0000: 06 00 01 00 1b 35 11 1c  00 00 00 00 de ca fa de  .....5......??·?
      0010: de ca de af de ca ca fe  00 26 35 03 09 00 04 00  ???»????.&5.....

< ACL data: handle 12 flags 0x00 dlen 33
    0000: 1d 00 40 00 07 00 01 00  18 00 15 35 13 35 11 09  ..@........5.5..
    0010: 00 04 35 0c 35 03 19 01  00 35 05 19 00 03 08 12  ..5.5....5......
    0020: 00                                                .

> HCI Event: Number of Completed Packets (0x13) plen 5
  0000: 01 0c 00 02 00                                    .....

> ACL data: handle 12 flags 0x02 dlen 12
    L2CAP(s): Disconn req: dcid 0x0040 scid 0x0040

< ACL data: handle 12 flags 0x00 dlen 12
    0000: 08 00 01 00 07 04 04 00  40 00 40 00              ........@.@.

> ACL data: handle 12 flags 0x02 dlen 12
    L2CAP(s): Connect req: psm 3 scid 0x0041

< ACL data: handle 12 flags 0x00 dlen 16
    0000: 0c 00 01 00 03 05 08 00  40 00 41 00 00 00 00 00  ........@.A.....

> HCI Event: Number of Completed Packets (0x13) plen 5
  0000: 01 0c 00 02 00                                    .....

> ACL data: handle 12 flags 0x02 dlen 16
    L2CAP(s): Config req: dcid 0x0040 flags 0x00 clen 4
      MTU 895 

< ACL data: handle 12 flags 0x00 dlen 18
    0000: 0e 00 01 00 05 06 0a 00  41 00 00 00 00 00 01 02  ........A.......
    0010: 7f 03                                             ..

< ACL data: handle 12 flags 0x00 dlen 16
    0000: 0c 00 01 00 04 03 08 00  41 00 00 00 01 02 f5 03  ........A.....?.

> HCI Event: Number of Completed Packets (0x13) plen 5
  0000: 01 0c 00 02 00                                    .....

> ACL data: handle 12 flags 0x02 dlen 18
    L2CAP(s): Config rsp: scid 0x0040 flags 0x00 result 0 clen 4
      MTU 1013 
```

在这一点上，设备提供的有效负载在运行之间变化很大，更不用说在一次运行中了。为简洁起见，我已将日志的其余部分放在粘贴箱中：[链接](http://pastebin.com/CS4g2viA)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T21:17:41.557

是的，蓝牙通过无线方式加密数据。是的，这适用于 ACL 数据。但是您通过 HCI 界面看到的数据已经解密。您的问题是您不知道如何解释 ACL 数据流。在 ACL 数据之上有几个协议级别。除非您的设备记录了他们的协议，否则您可能不走运。他们很可能正在运行 SPP（串行端口配置文件）或 RFCOMM 来与 android 应用程序通信。因此，您有以下嵌套协议层来解码 SPP -> RFCOMM -> L2CAP -> ACL 数据。

您的设备/应用程序也有可能在 SPP 之上进行额外的应用程序级加密。在这种情况下，你就不走运了。

# sql - 存储过程调用带有 Trans Commit 的第二个 SP

> ID：12826465
> 
> 赞同：0
> 
> 时间：2012-10-10T19:01:33.020
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我有一个存储过程需要调用传递一个输入参数的第二个存储过程。由于两个存储过程的性质，我希望能够使用事务和提交来确保所有元素在提交之前都已执行。

如果第一个存储过程的相关内容在事务中以及对第二个存储过程的调用中，这就足够了，还是第二个 sp 的事件将被单独提交？？？

我希望这是有道理的，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:30:41.303

是的，它们将成为同一交易的一部分。事实上，即使您在第二个过程中启动了一个单独的事务，SQL 中的嵌套事务也不起作用。整个事情被提交或回滚。

# php - 如何创建一个codeigniter菜单？

> ID：12826470
> 
> 赞同：0
> 
> 时间：2012-10-10T19:01:44.187
> 
> 标签：php, codeigniter

因此，我正在使用 CodeIgniter 创建一个网站，如果我可以编辑例如一个我指定了所有菜单的配置文件，并且它会为所有视图文件编辑它，那就太好了。

所以基本上在简单的 OOP 中我会用一个函数来做这件事，但是在 CodeIgniter 中做这件事的最好方法是什么？我应该为此使用 Helper 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:32:08.800

如果有任何语法错误，请多多包涵。

在你的主控制器中使用这个：

```
$template['menu'] = $this->load->view('main/menu', '', TRUE);
$this->load->view('main', $template); 
```

然后，您可以在主模板中使用 $menu。

# c - 停止 system() 函数中使用的一些命令

> ID：12826471
> 
> 赞同：0
> 
> 时间：2012-10-10T19:01:49.713
> 
> 标签：c, ip-address, ping

我的功能有问题`system()`。

我需要实现一个简单的 bash，我项目的模块之一是允许用户键入一些 bash 命令来执行它。

高于我实际上正在做的事情：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// similar to gets
int reads(char* str)
{
#ifndef WIN32
    fflush(stdout);
    strcpy(str,GetServiceLine());
#else
    gets(str);
#endif

    return 1;
}

int main(void) {
    char str[100];

        while(strcmp(str, "exit")) {
            printf("\nNote: type \"exit\" to return menu\n");
            printf("MyBash$ ");
            reads(str);

            system(str);
        }

    return 0;
} 
```

我的问题是像`ping`.

当我在我的 PC 上运行此代码并尝试执行`ping`合法命令时`IP`它工作正常，我可以使用 停止`ping`进程`CTRL+C`，但是当我以相同的方式在目标上运行它时，我无法使用`CTRL+C`并且我的进程始终保持在`system()`称呼。

有人可以帮助我吗？

注意：我阅读[了这篇](https://stackoverflow.com/questions/3771691/how-can-i-enable-ctrl-c-ctrlbreak-after-calling-system)关于如何使用 CTRL+C 来破坏系统功能的帖子。我尝试了这个建议，但没有奏效。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:27:14.127

既然你还没有尝试过，我会把它扔在这里作为建议。您始终可以[安装信号处理程序](http://www.cs.utah.edu/dept/old/texinfo/glibc-manual-0.02/library_21.html)来捕获您感兴趣的信号。

这是一个使用（主要）您的代码的快速示例，它演示了它是如何完成的：

```
#include <signal.h>
#include <stdio.h> 
#include <stdlib.h> 
#include <string.h>   

void intHandler(int dummy) 
{
    exit(1);   // Do whatever you want here to handle it...
}

int main(void) 
{
    char str[100];
    signal(SIGINT, intHandler);   
    signal(SIGKILL, intHandler);
    while(strcmp(str, "exit")) {
       printf("\nNote: type \"exit\" to return menu\n");
       printf("MyBash$ ");
       gets(str);
       system(str);
    }      
    return 0; 
} 
```

我可以用这个来捕捉 ctrl+C，但我不确定它是否是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:36:59.820

在上面的评论之后，我只是想解释为什么你不能以一种优雅的方式控制它（尽管在评论中建议了一些技巧）。

如果您分叉了一个子进程，然后在子进程上调用 exec 以执行作为参数传递给 exec 的二进制文件，系统命令的行为将完全一致。

system() 函数应忽略 SIGINT 和 SIGQUIT 信号，并应阻止 SIGCHLD 信号，同时等待命令终止。如果这可能导致应用程序错过可能会杀死它的信号，那么应用程序应该检查 system() 的返回值并采取任何适当的措施。

请记住，这是非常特定于操作系统的行为，并且没有这样的标准。

[Linux中的system()函数调用](http://pubs.opengroup.org/onlinepubs/009695399/functions/system.html)

内部 ping 实用程序将在 icmp 上运行并等待，直到收到来自其他节点的响应。

您可能会按照另一个答案中的建议编写信号处理程序并调用 killpid() 但它会被阻止，直到对 system() 的调用返回。这在函数的规范中有所说明。因此，您可能能够终止，但只有在呼叫返回之后。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T14:15:29.857

在用于解决我的问题的代码下方。我不知道是否是更好的解决方案，但在这种情况下解决了我的问题。

```
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// similar to gets
int reads(char* str)
{
#ifndef WIN32
    fflush(stdout);
    strcpy(str,GetServiceLine());
#else
    gets(str);
#endif

    return 1;
}

void getCommandName(char input[], char output[])
{
    int count=0;

    while (input[count] != NULL && input[count] != ' ' && input[count] != '\0') {
        output[count] = input[count];
        count++;
    }
}

int killLastCommand(int pid)
{
    char commandKill[30];

    memset(commandKill, 0, 30);

    sprintf(commandKill, "kill -9 %d", pid);
    return(!system(commandKill));
}

int main(void) {
    FILE *fp; //Will be used with popen()
    char str[100];
    char lastCommandName[50];
    char pidofCommand[50];
    char strLastPIDCommand[10];
    int lastPIDCommand=0;

    memset (str, 0, 100);

        while(strcmp(str, "exit")) {
        if (lastPIDCommand == 0) {
            memset (lastCommandName, 0, 50); //Clean lastCommandName array
            memset (pidofCommand, 0, 50); //Clean pidofCommand array
            memset (strLastPIDCommand, 0, 10); //Clean strLastPIDCommand array

            printf("\n\nNote: type \"exit\" to return menu\n");
            printf("MyBash$ ");
                reads(str);

            if (strcmp(str, "exit")) {
                    sprintf(str, "%s &", str);
            }

            getCommandName(str, lastCommandName);

            system(str);
            sleep(1); //Sleep to guarantee than command will end

            sprintf(pidofCommand, "pidof %s", lastCommandName); 

            //Saving PID
            fp = popen(pidofCommand, "r");

            if (fp) {
                fgets(strLastPIDCommand, 10, fp);
                lastPIDCommand = atoi(strLastPIDCommand);
            } else {
                //Handle error
            }
            pclose(fp);

printf("commandName = %s\r\n", lastCommandName);
printf("pid = %d\r\n", lastPIDCommand);
        } else {
            printf("\n\nYou have a command running, press 'kill' to stop it before to type another command\n");
            printf("EITVBash$ \n\n");
            reads(str);

//          if (str[0] == 0x03) { //CTRL+C hexa code
            if (!strcmp(str, "kill")) {
                if (killLastCommand(lastPIDCommand)) {
                    lastPIDCommand = 0;
                }
            }
        }
    }

    return 0;
} 
```

我的实现可能不干净，但我对 c 没有太多经验。

谢谢大家。

# google-apps-script - 由于管理版本，刷新浏览器不会反映 UI 更改

> ID：12826473
> 
> 赞同：2
> 
> 时间：2012-10-10T19:02:00.227
> 
> 标签：google-apps-script

我是 Google Apps 脚本的新手。我正在编写一些简单的示例代码，在脚本编辑器中组合了一个非常简单的 UI。添加每个元素后，我希望能够刷新浏览器视图以查看最新更新。（我将脚本作为 Web 应用程序发布。）

因此，我通过脚本向 Ui 添加了一个元素，保存我的脚本，然后刷新浏览器窗口。（我已经保存了一个版本并发布了脚本，所以我已经打开了一个带有该 URL 的浏览器窗口。）刷新后不会反映更新。

原因似乎是因为我在进行更改后没有保存新版本。如果我保存一个新版本，发布新版本，然后刷新，我会看到最新版本的 UI。

保存新版本并重新发布是一种非常缓慢的方式来查看我所做的更改。是否有其他方法可以预览 UI 更改而无需费力完成这些步骤？我没有使用 GUI Builder，只是编写代码。

我从大局中看到了版本管理的优势，但就我的情况而言，它让事情变得相当麻烦！

我确实看到 6 月份的一篇帖子似乎问了同样的问题（如何在 Google 协作平台中快速测试保存的代码？）并且没有提供解决方案，但我不确定他的代码中是否还有其他因素不适用于我。

谢谢！嘉莉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T20:03:58.500

有一个“特殊” url ......所以当你保存脚本时你可以直接看到你的更改。

请参阅下面的屏幕截图，它显示在两个屏幕中。 ![在此处输入图像描述](../Images/175a482cabab5e20528aa60e523de253.png) ![在此处输入图像描述](../Images/3d6191d110410908300d10104f1d534c.png)

# jquery - 用于数组中元素的 jQuery UI 定位实用程序

> ID：12826474
> 
> 赞同：1
> 
> 时间：2012-10-10T19:02:02.087
> 
> 标签：jquery, arrays, jquery-ui, position

我正在使用 jQuery UI 位置实用程序在图像地图上放置标记。我在地图中的每个区域标记上使用 html5 数据属性，然后，当用户单击包含与其中一个区域相同的数据属性的链接时，它会生成标记的 html。这工作正常。

但是，一个链接可以对应不同的区域标签。因此，我创建了一个 DOM 元素数组并将它们附加到页面上的 div 中。然后，当我尝试在每个标记上使用位置实用程序时，数组中的所有标记最终都位于相同的位置，而不是与其数据属性匹配的区域标记上。我猜这与附加数组而不是原始 DOM 对象有关吗？

下面是我的代码：

```
var $holder = $('#holder'); //div that holds the generated markers
    var $map = $('#floorPlan');
    var $area = $('#floorPlan area');
    $('.locationLink li a').each(function () {
        $(this).click(function () {
            //remove pinned markers
            $holder.children('.pinned').fadeOut(function () {
                $(this).remove();
            });

            var grp = $(this).attr('data-group'),
                $grpMatch = new Array();

            //generate new markers and match to area
            $map.find('area[data-group="' + grp + '"]').each(function () {
                var loc = $(this).attr('data-loc')
                // create a marker for each matched area and create array
                if ($(this).hasClass('hall')) {
                    var eleItems = '<div data-loc="' + loc + '" data-group="' + grp + '" class="marker marker-blue"></div>';
                }
                else {
                    var eleItems = '<div data-loc="' + loc + '" data-group="' + grp + '" class="marker"></div>';
                }

                $grpMatch.push(eleItems);
                 $holder.append($grpMatch);
                positionMarker();

            });

            return false;
        });

    });

    function positionMarker() {

        $holder.children('.marker').each(function() {
            var $lMarker = $(this);
            var mLoc = $lMarker.attr('data-loc');
            var $aMatch = $map.find('area[data-loc="' + mLoc + '"]');

            $lMarker.position({
                'my': 'center center',
                'at': 'center center',
                'of': $aMatch,
                'collision': 'none'
            }).addClass('pinned');

        });
    } 
```

谢谢您的帮助

# mysql - 从 MySQL 的表列中删除特定单词？

> ID：12826477
> 
> 赞同：0
> 
> 时间：2012-10-10T19:02:16.983
> 
> 标签：mysql, sql

我在 MySQl 表中有一列，其中包含以下格式的单词：

姓名 - 姓名 2 - 姓名 3

我想删除 Name2，只留下 Name - Name3

所以我只需要删除中间词，而不是整个列！中间的词总是一样的。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:10:02.280

```
update your_table
set your_column = concat(SUBSTRING_INDEX(your_column, '-', 1), '-',
                         SUBSTRING_INDEX(your_column, '-', -1)) 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/d41d8/2721)
[子字符串索引文档](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)

# javascript - 如何使用 javascript 更改视频标签海报属性？

> ID：12826478
> 
> 赞同：14
> 
> 时间：2012-10-10T19:02:20.927
> 
> 标签：javascript, jquery, html5-video, native, poster

我想使用原生 JavaScript 或 jQuery 来更改 HTML 视频标签上的海报属性。任何帮助将不胜感激。

```
<div id="videoplayer" class="video-player" style="overflow: hidden; width: 582px; height: 326px; "> 
    <div id="myPlayer"> 
        <video id="htmlFive" width="100%" height="100%" controls="" poster="undefined">
            <source src="blank.m3u8">
        </video>
</div> 
     </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T20:46:58.703

要在本地执行此操作，只需更改属性：

`document.getElementById('htmlFive').setAttribute('poster','newvalue');`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T19:03:42.180

使用 jQuery 的[attr](http://api.jquery.com/attr/)方法，例如：

```
$('#htmlFive').attr('poster', 'newvalue') 
```

或本机[setAttribute](https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute)：

```
document.querySelector('#htmlFive').setAttribute('poster', 'newvalue') 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-10T19:04:08.270

```
$('#video source').attr('src', srcPath); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-08-01T04:09:06.240

```
$("#example_video_1 .vjs-poster").css('background-image', 'url(http://video-   js.zencoder.com/oceans-clip.jpg)').show(); 
```

# iphone - 使用应用程序加载器上传 IPA

> ID：12826481
> 
> 赞同：12
> 
> 时间：2012-10-10T19:02:34.787
> 
> 标签：iphone, ios, upload, ipa

我有一个 IPA，想用*Application Loader*上传它。但是当我在应用程序加载器中单击“打开包”时，我无法选择 IPA 文件，它是灰色的。

如何使用 Application Loader 将此 IPA 文件上传到 iTunes Connect？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T12:06:01.990

单击“打开包”按钮是错误的。请改用“交付您的应用程序”。要使用该功能，必须在[itunesconnect.apple.com](http://itunesconnect.apple.com)上在线创建一个接受所需 IPA 的新版本。

然后可以上传 IPA，这是一个 ZIPped 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:11:58.970

特别是对于 iOS 项目，您只需要提交一个 .app（由 Xcode 生成），它是压缩的。

# sql - 用这个存储过程或函数指导我

> ID：12826482
> 
> 赞同：1
> 
> 时间：2012-10-10T19:02:37.983
> 
> 标签：sql, sql-server, sql-server-2008

```
Manager | Employee  |HireDate
----------------------------------------
ManagerA| EmpA      |1/1/2012
managerA| EmpB      |1/15/2012
ManagerB| Emp C     |2/1/2012
ManagerA| Emp D     |2/15/2012
ManagerB| Emp E     |2/8/2012 
```

每位经理的奖金金额是根据当月招聘的新员工人数计算的。前任。每位经理首次聘用可获得 1000 美元，下一次聘用可获得 500 美元。

它几乎就像每条记录都有一个种子

```
Manager | Employee  |HireDate   | Seed
------------------------------------------------
ManagerA| EmpA      |1/1/2012   | 1
managerA| EmpB      |1/15/2012  | 2
ManagerB| Emp C     |2/1/2012   | 1
ManagerA| Emp D     |2/15/2012  | 1
ManagerB| Emp E     |2/8/2012   | 2 
```

奖金是种子的函数，为 1000+(seed-1)*500

我需要帮助生成种子。我不确定是否应该使用存储过程来生成种子或函数

最终我想生成一个如下表

```
Manager | Employee  |HireDate   | Bonus
-------------------------------------------------
ManagerA| EmpA      |1/1/2012   | 1000
managerA| EmpB      |1/15/2012  | 1500
ManagerB| Emp C     |2/1/2012   | 1000
ManagerA| Emp D     |2/15/2012  | 1000
ManagerB| Emp E     |2/8/2012   | 1500 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:12:10.557

获得种子

```
Select
     *
    ,ROW_NUMBER() Over(Partition By Manager, Year(HireDate), Month(HireDate) Order By HireDate) As Seed
From
    YourTable 
```

直接获得红利

```
Select
     *
    ,1000 + (Seed - 1) * 500 As Bonus
From
    (
        Select
             *
            ,ROW_NUMBER() Over(Partition By Manager, Year(HireDate), Month(HireDate) Order By HireDate) As Seed
        From
            YourTable
) T 
```

# mgwt - MGWT ScrollPanel 对齐

> ID：12826486
> 
> 赞同：2
> 
> 时间：2012-10-10T19:02:55.400
> 
> 标签：mgwt

我正在使用 mgwt 中的滚动面板来显示图像，我希望它在用户滚动最近的图像时捕捉到顶部。我看到滚动面板有两种捕捉方法

```
void setSnap(boolean snap) 
void setSnapSelector(String selector) 
```

我在 setSnapSelector 上找不到任何文档。谁能告诉我这个方法是做什么的？它应该通过什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:51:46.540

如果您想查看快照选择器的示例，请查看 HeaderList 小部件：[http ://code.google.com/p/mgwt/source/browse/src/main/java/com/googlecode/mgwt /ui/client/widget/HeaderList.java](http://code.google.com/p/mgwt/source/browse/src/main/java/com/googlecode/mgwt/ui/client/widget/HeaderList.java)

如果您启用捕捉并设置选择器，则滚动面板将在任何触摸后捕捉到某个位置。因此，如果您有多个图像，您想将 img 作为选择器传递。

# ruby-on-rails - Railscasts 102 中的 index.js.erb 问题（自动完成）：数据未显示在 localhost 的 listings.js 中

> ID：12826499
> 
> 赞同：0
> 
> 时间：2012-10-10T19:03:40.587
> 
> 标签：ruby-on-rails, search, autocomplete

Rails 3.2.5 应用程序。很简单，只有一个模型：listing

有列网站、网址、医生、评论和日期。

在这一集刚开始 9 分钟时，他访问了 localhost:3000/cateogories.js，类别以列表形式出现在页面上。

在我的情况下，它会是 Listings.js

我在 JS 控制台中没有收到任何错误，浏览器只是空白。在我的终端上它说

*在 2012 年 10 月 10 日 13:20:41 -0500 开始 GET "/listings.js" for 127.0.0.1
由 ListingsController#index 处理为 JS
渲染的列表/index.js.erb (0.1ms)
在 8ms 内完成 200 OK (观看次数：7.7 毫秒 | ActiveRecord：0.0 毫秒）*

我的 index.js.erb 文件（如果我错了，请纠正我），进入视图/列表，代码是：

```
<%= auto_complete_result @listings, :website %> 
```

我想为 :url、:website、:comments 和 :doctor 设置自动完成功能，但这不是我现在主要关心的问题。只是想让它工作。

我在 listings_controller.rb 中的索引是

```
def index
  @listings = Listing.search(params[:search_text]) 
    respond_to do |format|
      format.js
  end
end 
```

我的 application.html.erb 文件包括

```
<%= javascript_include_tag :defaults %> 
```

而且我不确定这在 rails 3.2 中是否有必要（虽然它已在 railscasts 中列出，但它有点旧）。

知道为什么 localhost:3000/listings.js 是空白的（我在数据库中有 5 个列表）吗？任何输入表示赞赏。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:09:16.850

仅对所有列表进行尝试：

```
def index
  @listings = params[:search_text].nil? ? Listing.all : Listing.search(params[:search_text])
    respond_to do |format|
      format.js
  end
end 
```

我认为因为您正在使用搜索，所以您不能只去页面查看结果`params[:search_text]`，当然这不取决于您如何处理`search`方法。您可以通过检查参数来处理它，但最好在搜索实现中处理它。上面的代码应该可以工作。

# c++ - 了解 VTune 报告

> ID：12826508
> 
> 赞同：2
> 
> 时间：2012-10-10T19:04:02.197
> 
> 标签：c++, profiling, intel-vtune

这是对现有线程（http://stackoverflow.com/questions/12724887/caching-in-a-high-performance-financial-application）的跟进 - 我发现阻碍我的应用程序的不是缓存。长话短说，我有一个应用程序在一个函数中花费了 70% 的运行时间（22 秒中有 15 秒）。因此，我想尽可能地缩短此函数的运行时间，因为该函数的设想用途是用于更大的数据（即 22 秒不是计划的运行时间：）

问题是 VTune 的输出让我感到困惑，代码似乎在绝对意想不到的地方花费了大量时间。我的想法已经用完了，所以我在这里发布了我的项目以及分析器结果。

看看有罪的 evaluateExits() 函数，这些事情让我感到困惑：

1/ 该函数恰好花费 2.2 秒调用一个内联函数，该函数返回 1 而不管参数如何（第 425 行，this->contractManager->contractCount()）。注意：无论参数如何，函数返回 1 的版本是可能的情况之一，所以我不能把“contractCount=1”放在那里。来自虚拟表指针的重定向能否占用这 2.2 秒（contractCount() 是一个虚拟方法）？

2/ 该函数在 min(uint1, uint2) （第 432 行）上花费了 3.3 秒，尽管我使用的 wmin 版本应该尽可能对 CPU 友好。

3/函数在第512行花费了1.6s，这是一个非常微不足道的操作，被调用的函数不是虚拟的..

所以问题是：为什么这三行代码要花这么多时间？我在看什么？以及如何优化我的代码以使其运行得更快？我应该用应用于整个数组的 SSE 版本的 min 替换 wmin() 吗？

非常感谢任何输入。丹尼尔

**编辑：** 查看程序集，我发现在 1/ 情况下，确实是 vfptr 使代码“变慢”。我用 Don Clugston 的 fastdelegate 替换了对虚函数的调用，但性能没有发生任何变化（我不知道为什么）。由于南丁格尔的评论，附件现在应该包含所有必要的文件。但是，该二进制文件无法成功运行，因为它连接到有 100 MB 数据的共享内存。

[所以，我在这里](https://rapidshare.com/files/3682855915/backTesterCalc.rar)和[这里](https://rapidshare.com/files/4078705412/QShared.rar)附上整个项目以及 VTune 的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:17:03.133

丹尼尔，

我想看看您的 VTune 结果，但不幸的是，您没有包含为其收集结果的二进制模块，因此我无法查看此处应该具有最大价值的程序集。您可以重新发布包含二进制文件和调试信息文件的项目存档吗？

我还尝试重新构建您的源代码，但找不到许多头文件：

*   一些 Qt 头文件（我没有安装 Qt，也不是这样做的专家）
*   parameterHolder.h 文件
*   externFloatConsts.h 文件

因此，为了提供帮助，最好拥有这些文件或用于收集数据的二进制文件。

# css - 引导表单水平右对齐标签

> ID：12826511
> 
> 赞同：7
> 
> 时间：2012-10-10T19:04:12.610
> 
> 标签：css, twitter-bootstrap

如果可以在 twitter bootstrap form-horizo​​ntal 中获得右对齐标签？

因此，在这个横向表单示例中[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms) “电子邮件”中的字母“E”将超过“密码”中的字母“P”。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T19:26:08.730

实际上，它们是正确对齐的。如果我理解正确，我认为您想将它们*左*对齐（所以 P 超过 E）。如果是这样，你可以试试这个：

```
.form-horizontal .control-label {
    text-align: left;
} 
```

（在 bootstrap.css 中默认为 "text-align: right;"）

# android - 将元素插入 Android 相对和线性布局

> ID：12826516
> 
> 赞同：1
> 
> 时间：2012-10-10T19:04:41.413
> 
> 标签：android, layout, android-edittext, android-linearlayout, android-relativelayout

我正在尝试插入此代码（插入软键盘的布局）`EditText`：`Button`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/LinearLayout1"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent"> 

    <LinearLayout android:layout_width="fill_parent"
        android:id="@+id/container" android:layout_alignParentTop="true"
        android:layout_height="fill_parent" android:layout_above="@+id/keyboard_view">
        <EditText android:layout_width="fill_parent" android:id="@+id/target"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <it.anddev.tutorial.CustomKeyboardView
        android:id="@+id/keyboard_view" android:visibility="gone"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"></it.anddev.tutorial.CustomKeyboardView>

</RelativeLayout> 
```

如果我在下面插入`EditText`和`Button`里面`"@+id/target"`它没有效果。我不知道如何将其他元素置于`EditText`(id=target) 下。

谢谢你帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:16:05.847

添加`android:orientation="vertical"`你的线性布局

# c# - Lambda表达式从对象列表中获取成员列表？

> ID：12826518
> 
> 赞同：1
> 
> 时间：2012-10-10T19:04:47.107
> 
> 标签：c#, lambda, expression

我正在使用 VS 2008。

我有一个小用户控件，它有一个参数类型为 的方法`List<String>`。我有一个对象列表（称为它`MyObjectList`，类型`List<MyObject>`），其定义包括一个字符串成员（称为它`myString`）。

我想得到一个`List<String>`包含所有`myString`字符串的`MyObjectList`.

当然，我可以编写一个遍历的小循环`MyObjectList`，将每个`myString`值添加到`List<String>`对象中。但我正在努力变得尽可能现代。

随着 lambda 表达式的出现，我认为必须有更好的方法来做到这一点。在那儿？如果是这样，怎么做？VS 2012 中的答案有什么不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:44:04.887

假设您的列表是 a`List<MyObject>`并且该类`MyObject`具有 property `MyString`，您可以使用 LINQ 和 lambda 来执行此操作：

```
var listOfStrings = myObjectList.Select(o => o.MyString).ToList(); 
```

这适用于任何面向 .NET 3.0 或更高版本的程序集；VS的版本无关紧要。

# node.js - Node Mongo Native - 如何判断光标何时用尽？

> ID：12826520
> 
> 赞同：4
> 
> 时间：2012-10-10T19:04:49.490
> 
> 标签：node.js, mongodb, database-cursor, node-mongodb-native

[node-mongo-native`collection.find()`函数](https://github.com/mongodb/node-mongodb-native#find)的文档说它创建了一个游标对象，该对象懒惰地返回匹配的文档。此外：

> 游标上的基本操作是`nextObject`从数据库中获取下一个匹配文档的方法。方便的方法`each`和`toArray`调用`nextObject`，直到游标耗尽。

不幸的是，文档没有提供如何判断光标何时实际耗尽的指示。您可以使用“toArray”方法并使用标准数组接口（例如“length”方法），但此解决方案不适用于流式传输大量数据。MongoDB API Wiki 引用[`cursor.hasNext()`](http://api.mongodb.org/wiki/current/Queries%20and%20Cursors.html)了 mongo shell 中的 ，但该方法似乎在 node.js 驱动程序中不可用。

在 node.js 中从 MongoDB 流式传输数据时，如何确定游标何时耗尽？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T19:15:36.217

的[文档](http://mongodb.github.com/node-mongodb-native/api-generated/cursor.html#nextobject)确实定义了`Cursor#nextObject`其回调的第二个参数是`null`如果没有更多可用的结果。

> 第一个参数将包含一个错误对象，而第二个参数将包含来自返回结果的文档，如果没有更多结果，则为 null。

# android - 如何设置按键的系统亮度？

> ID：12826526
> 
> 赞同：0
> 
> 时间：2012-10-10T19:05:09.503
> 
> 标签：android, settings, system

我找不到控制系统（！）按钮亮度的方法。我找到了这个：

> 公共浮动**按钮亮度**
> 
> 这可用于覆盖按钮和键盘背光的标准行为。默认值小于 0 表示使用标准背光行为。0 到 1 将亮度从暗调整为全亮。

链接：[Android API 参考](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#buttonBrightness)

请注意“覆盖标准行为”，这表示存在一些标准行为设置。但我找不到任何 API。

我想执行这样的代码（来自我的服务）：

```
previous = get_buttons_brightness();
set_buttons_brightness(0); // off
...
set_buttons_brightness(previous);
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:14:43.863

Try different values for screenBrightness between 0 to 1

```
WindowManager.LayoutParams layout = getWindow().getAttributes();
layout.screenBrightness = 1F;
getWindow().setAttributes(layout); 
```

# jquery-mobile - jquerymobile 工具栏不应创建历史条目

> ID：12826527
> 
> 赞同：0
> 
> 时间：2012-10-10T19:05:12.140
> 
> 标签：jquery-mobile, browser-history

如果您查看页面[http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html)，您会看到一个工具栏，其中包含基本、选项、方法的选择器。它加载不同的页面，因此它就像页面中的导航栏一样。

但是，每次您单击其中之一时，它都会在您的历史记录中创建一个条目。如果您有这样的页面，上面有 data-rel=back 按钮，或者用户单击后退按钮，它会将您带到上一个工具栏选择，而您希望完全离开页面。

我怎样才能拥有这样的工具栏，它的锚标签不会污染历史？

在我的应用程序中，此工具栏表示首选项设置，并且基于该设置，下面的其他设置将可用。所以我需要能够点击 [返回] 并退出设置页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:11:03.367

看起来锚标签不适合这种用途。锚点只是为了将历史抛诸脑后。我已经切换到单选按钮（可以将它们设置为相同的样式），然后我可以根据通过回调选择的单选显示/隐藏文档的各个部分。

```
 <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-type="horizontal">
            <legend>Team role:</legend>
            <input type="radio" name="radio-view" id="radio-view-a" value="list" checked/>
            <label for="radio-view-a">Robot</label>
            <input type="radio" name="radio-view" id="radio-view-b" value="grid"  />
            <label for="radio-view-b">Controller</label>
        </fieldset>
    </div> 
```

# jquery - jQuery 响应列。

> ID：12826529
> 
> 赞同：0
> 
> 时间：2012-10-10T19:05:25.137
> 
> 标签：jquery, responsive-design

我们正在使用响应式设计，我们希望制作响应式列。因此，在大屏幕上，项目将存储在 2 列中，而在小屏幕上则存储在 1 列中。物品可以有不同的高度。物品应按正确的顺序放置（见下图）。

![物品顺序](../Images/527b4f955a4794f53b17b45e0f7ad6cc.png)

**1\. 从 1 -> 2**

一栏布局：

```
<div class="container">
  <div class="item">1</div>
  <div class="item">2</div>
  <div class="item">3</div>
  <div class="item">4</div>
  <div class="item">5</div>
  <div class="item">6</div>
</div> 
```

将其转换为两列的脚本。

```
$(".container > .item:odd").wrapAll('<div class="column" />');
$(".container > .item").wrapAll('<div class="column" />'); 
```

**2\. 从 2 -> 1**

两列布局：

```
<div class="container">
  <div class="column">
    <div class="item">1</div>
    <div class="item">3</div>
    <div class="item">5</div>
  </div>
  <div class="column">
    <div class="item">2</div>
    <div class="item">4</div>
    <div class="item">6</div>
  </div>
</div> 
```

编写将其转换为一列的脚本。

```
while($(".container .column .item").length > 0)
      {
        $(".container").append($(".container .column:eq(0) .item:first"))
        $(".container").append($(".container .column:eq(1) .item:first"))
      }
$(".container2 .column1").remove(); 
```

我们不能使用 $(".container item").unwrap() 作为第二个选项，因为它不会*保存项目 order*。

一切正常，但我们想知道是否有任何更容易的解决方案（特别是对于 2 选项）。我们将不胜感激任何建议或帮助。

# ios - iOS - 一次不分配太多内存

> ID：12826530
> 
> 赞同：2
> 
> 时间：2012-10-10T19:05:32.583
> 
> 标签：ios, memory-management, uiview

试图解决一些 iOS 设备上发生的崩溃，并结合 Apple 的建议“不要导致分配高峰”。如何更改此代码以不立即发生？

```
for (Item *item in self.items) {
        ItemView *itemView = [[ItemView alloc] initWithFrame:CGRectMake(xPos, kYItemOffsetIphone, kItemWidthIphone, kItemHeightIphone) ];

        itemView.delegate = self;
        [itemView layoutWithData:item]; //this just adds an imageView and button
        [self.scrollView addSubview:itemView];
        xPos += kXItemSpacingIphone;
    } 
```

self.items 数组中有大约 20 个对象，用于构建 20 个 ItemView。同样，有没有办法让这段代码不那么“分配密集”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:59:42.817

I personally do something along the lines of:

1.  Make my view controller the `delegate` of the scroll view (if you do this in code, you have to modify your view controller's .h to say that it conforms to `UIScrollViewDelegate`).

2.  Define a [`scrollViewDidScroll`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/scrollViewDidScroll%3a) method that (a) determines the frame of the visible portion of the scroll view; (b) determine which of the subviews intersect with that visible portion; (c) load the items that are visible, and unload the ones that aren't.

So, for example, it might look something like the following:

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    // Determine the frame of the visible portion of the scrollview.

    CGRect visibleScrollViewFrame = scrollView.bounds;
    visibleScrollViewFrame.origin = scrollView.contentOffset;

    // Now iterate through the various items, remove the ones that are not visible,
    // and show the ones that are.

    for (Item *itemObject in self.itemCollection)
    {
        // Determine the frame within the scrollview that the object does (or 
        // should) occupy.

        CGRect itemObjectFrame = [self getItemObjectFrame:itemObject];

        // see if those two frames intersect

        if (CGRectIntersectsRect(visibleScrollViewFrame, itemObjectFrame))
        {
            // If it's visible, then load it (if it's not already).
            // Personally, I have my object have a boolean property that
            // tells me whether it's loaded or not. You can do this any
            // way you want.

            if (!itemObject.loaded)
                [itemObject loadItem];
        }
        else
        {
            // If not, go ahead and unload it (if it's loaded) to conserve memory.

            if (itemObject.loaded)
                [itemObject unloadItem];
        }
    }
} 
```

That's the basic idea. You can certainly optimize this logic based upon your app's particular design, but this is how I generally do it.

# javascript - 构造函数定义的区别

> ID：12826534
> 
> 赞同：1
> 
> 时间：2012-10-10T19:05:59.240
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

我想知道以下两个构造函数之间是否存在一些隐藏的区别：

```
var Person = function(name){
     this.say=function(){
         console.log(name);
     }
} 
```

和这个：

```
function Person(name){
         this.say=function(){
             console.log(name);
         }
  } 
```

假设我们总是要写：

```
var x = new Person('xxxxx');
x.say(); 
```

对我来说似乎是一样的，但我真的很喜欢 javascript，我想知道某些形式是否错误以及是否有一些最佳实践可以遵循。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:08:43.340

就构造函数而言，没有区别。JavaScript 中的所有函数都可以作为构造函数调用（它们是否抛出错误完全是一个不同的问题）。

区别在于函数的声明方式。

第一个声明是作为需要执行的变量。第二个声明是作为一个被提升的函数。

`var foo`和`function foo`JavaScript 中的语句被提升到其关闭范围的顶部（最近的`function`父级）。这意味着：

```
(function () { //closure for scope
  doStuff();
  var foo = bar;
}()); 
```

实际上是：

```
(function () {
  var foo;
  doStuff();
  foo = bar;
}()); 
```

函数的反应类似：

```
(function () {
  doStuff();
  function foo() {
    bar = baz;
  }
}()); 
```

是相同的：

```
(function () {
  function foo() {
    bar = baz;
  }
  doStuff();
}()); 
```

这种区别很重要，因为在变量中声明的函数只有在声明之后才能访问：

```
(function () {
  foo(); //this doesn't work and will result in an error
  var foo = function () {
    alert('works');
  };
}()); 
```

而只要函数在范围内，就可以访问它：

```
(function () {
  foo(); //works!
  function foo() {
    alert('works!');
  }
}()); 
```

# java - Java 长轮询：单独的线程？

> ID：12826540
> 
> 赞同：2
> 
> 时间：2012-10-10T19:06:21.067
> 
> 标签：java, long-polling

由于浏览器兼容性问题，我决定使用长轮询来实现实时同步和通知系统。我在后端使用 Java，到目前为止我发现的所有示例都是 PHP。他们倾向于使用 while 循环和 sleep 方法。我如何在 Java 中复制这种东西？有一种`Thread.sleep()`方法会导致我……我应该为每个发起投票的用户使用单独的线程吗？如果我不使用单独的线程，轮询请求会阻塞服务器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:28:03.067

[更新] 首先，是的，当然可以做一个简单的、长轮询请求处理程序。请求进入服务器，然后在您的处理程序中循环或阻塞，直到您需要的信息可用，然后您结束循环并提供信息。只要意识到对于每个长轮询客户端，是的，您将占用一个线程。这可能很好，也许这就是你应该开始的方式。但是 - 如果您的 Web 服务器变得如此流行，以至于阻塞线程的绝对数量正在成为性能问题，请考虑使用异步解决方案，您可以在其中保持大量客户端请求处于待处理状态 - 他们的请求被阻塞，直到出现是有用的数据，不会占用每个客户端的一个或多个线程。

[原来的]

servlet 3.0 规范为进行这种异步处理提供了一个标准。谷歌“servlet 3.0 异步”。Tomcat 7 支持这一点。我猜 Jetty 也有，但我没用过。

基本上在您的 servlet 请求处理程序中，当您意识到需要进行一些“长”轮询时，您可以调用一个方法来创建异步上下文。然后您可以退出请求处理程序并释放您的线程，但是客户端仍然阻塞请求。无需任何睡眠或等待。

诀窍是将异步上下文存储在“方便”的地方。然后在你的应用程序中发生了一些事情，你想将数据推送到客户端，你去找到那个上下文，从中获取响应对象，编写你的内容并调用完成。响应被发送回客户端，而无需为每个客户端绑定一个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:09:56.203

不确定这是否是您想要的最佳解决方案，但通常如果您想在 java 中定期执行此操作，您可以使用[ScheduleExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)。API 文档顶部有一个很好的示例。[TimeUnit](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html)是一个很好的枚举，因为您可以轻松清晰地指定周期时间。因此，您可以指定它每 x 分钟、几小时等运行一次

# android - Adobe Air - 加密本地存储的替代方案

> ID：12826541
> 
> 赞同：2
> 
> 时间：2012-10-10T19:06:35.603
> 
> 标签：android, air, storage

如何在*Air Android*应用程序中存储敏感数据？Adobe Air 2.5 似乎不支持*加密的本地存储*

# javascript - 地理编码器地理编码 - 谷歌地图 javascript API

> ID：12826542
> 
> 赞同：0
> 
> 时间：2012-10-10T19:06:37.353
> 
> 标签：javascript, maps, undefined, geocode

我对以下功能有疑问：

```
function geo(address) {
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            return results[0].geometry.location;
        }
    });
} 
```

它返回我“未定义”。任何帮助都会得到认可。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:56:05.760

好，谢谢。

我找到了其他解决方案 - 最好将 results[0].geometry.location 中的值保存到 cookie 并在我想要的任何地方使用。不管怎么说，还是要谢谢你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:07:06.367

实际上您的地理编码代码是正确的。问题是“geocoder.geocode”是异步的，geo 函数在获取地理编码结果之前完成执行。作为概念证明，试试这个：

```
function geo(address) {
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {

            alert(results[0].geometry.location); //should have valid info
            return results[0].geometry.location;                    
        }
    });

    alert("I bet you were not expecting this alert to go first");                
} 
```

所以，你有两个选择。您可以在地理函数中处理地理编码位置，或者为处理该位置的函数提供回调。

我已经用一个例子更新了你的小提琴。[在这里](http://jsfiddle.net/rqwAF/1/)检查

# javascript - JavaScript 对象创建/关联性

> ID：12826544
> 
> 赞同：2
> 
> 时间：2012-10-10T19:06:47.683
> 
> 标签：javascript, constructor, associative-array

有人可以解释以下代码片段的输出行为吗？

```
function Vertex(x, y, z) {
    this.x = parseInt(x);
    this.y = parseInt(y);
    this.z = parseInt(z);
};

var set = {};

var v1 = new Vertex(1,2,3);
var v2 = new Vertex(2,3,4);
var v3 = new Vertex(1,2,3);
var v4 = new Vertex(4,5,6);

set[v1] = 10;
set[v2] = 11;

alert(set[v1] + " " + set[v2] + " " + set[v3] + " " + set[v4]);
// Output: 11 11 11 11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:12:02.707

对象属性是字符串，因此如果您尝试这样做`set[v1] = 10;`,`v1`将被转换为字符串（字符串将为`[object Object]`），因此基本上您会得到`set['[object Object]'] = 10;`所有对象都会发生这种情况，并且您设置的每个值都将覆盖前一个值。

所以你的代码相当于这个

```
function Vertex(x, y, z) {
    this.x = parseInt(x);
    this.y = parseInt(y);
    this.z = parseInt(z);
};

var set = {};

var v1 = new Vertex(1,2,3);
var v2 = new Vertex(2,3,4);
var v3 = new Vertex(1,2,3);
var v4 = new Vertex(4,5,6);

set['[object Object]'] = 10;
set['[object Object]'] = 11;          

alert(set['[object Object]'] + " " + set['[object Object]'] + " " + set['[object Object]'] + " " + set['[object Object]']);
// Output: 11 11 11 11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:12:48.403

```
v1 == v2 == v3 == v4 == "[object Object]" when expressed as a string 
```

您不能将对象作为键。

```
set[v1] is the same as set["[object Object]"] 
```

这就是为什么您要获得所有 4 个键的最后一个值的原因。

**这是您对代码进行了重新设计以按预期执行**

```
var object_id = 0; /* global object instance id */
function Vertex(x, y, z) {
    this.x = parseInt(x);
    this.y = parseInt(y);
    this.z = parseInt(z);
    this.id = (object_id++); /* add id to object */
};
/* override to string so it can be used as a key */
Vertex.prototype.toString = function() {
    return JSON.stringify(this);
}

var set = {};

var v1 = new Vertex(1,2,3);
var v2 = new Vertex(2,3,4);
var v3 = new Vertex(1,2,3);
var v4 = new Vertex(4,5,6);

set[v1] = 10;
set[v2] = 11;

alert(set[v1] + " " + set[v2] + " " + set[v3] + " " + set[v4]); 
```

# r - 导出 hclust 集群成员

> ID：12826552
> 
> 赞同：4
> 
> 时间：2012-10-10T19:07:25.890
> 
> 标签：r, hclust

我是 R 新手。我正在尝试做 hclust 并导出集群成员。我使用了以下内容。这是正确的还是有更好的方法？

```
FCtable1<-as.matrix(read.delim("table1.txt", row.names=1, header=TRUE, sep="\t"))
Disttab1<-dist(FCtable1, method="euclidean")
Hclustout1<-hclust(Disttab1, method="average")
clustnumber<- cutree(Hclustout1, h=1000)
tab1clustn <-data.frame(FCtable1, clustnumber)
write.table(tab1clustn,  file=" tab1clustn.xls", row.names=T, sep="\t") 
```

谢谢R

# iphone - 第五代设备上更大的启动图像

> ID：12826555
> 
> 赞同：0
> 
> 时间：2012-10-10T19:07:32.233
> 
> 标签：iphone, objective-c, ios, cocoa-touch

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

随着市场上第 5 代设备的屏幕更大，我们需要更大的启动图像（点击应用图标时显示的图像）。应用程序如何根据设备类型产生差异，例如何时使用普通图像以及何时使用更大的图像？

当我为 iPhone 6.0 模拟器构建项目时，我在项目中看到一条警告，点击它会引发以下警报：

![在此处输入图像描述](../Images/f9d079e3c969159e1bbc83955ed4fdb8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:41:09.607

您需要添加一个名为**Default-568h@2x.png**的启动图像。编译器检查此图像并对其进行验证。如果图像经过验证，则您的应用程序已准备好用于 iPhone 5 - 否则不会。获得正确的图像后，请按照本文中概述的步骤进行操作：

[如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

如果您对在应用程序内部使用的图像有疑问，并且想要支持 iPhone 5 和 iPhone 5 之前的设备，请使用以下命令：

[在 iPhone5 和 iPhone4 的 xib 中处理不同尺寸的图像？](https://stackoverflow.com/questions/12753718/dealing-with-different-size-images-in-a-xib-for-iphone5-versus-iphone4/12754158#12754158)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:33:04.737

简而言之：如果您想支持 iPhone 5 屏幕，则必须为 4" 屏幕提供启动屏幕，否则您的应用程序将在 4" 屏幕上的 3.5" 上运行。如果您放置 4" 启动图像，则该图像将在 iPhone 上使用5 和 iPhone 4 上的 3.5" （可能不同）。

请[在此处](https://stackoverflow.com/questions/12751863/does-the-app-store-show-iphone-5-users-the-smaller-screenshots-too-and-vice-ver/12759663#12759663)查看我的详细说明。

# javascript - 从 Angular js 表单发布数据时出错

> ID：12826559
> 
> 赞同：4
> 
> 时间：2012-10-10T19:07:39.120
> 
> 标签：javascript, scala, angularjs, scalatra

我有一个将数据发布到 scalatra servlet 的 angularJS 表单。提交表单后，我无法在我的 scalatra servlet 中获得任何表单参数。

下面是我的代码

AngularJS

```
$scope.createUser = function() {
    $http.post('/createUser',{name:$scope.name,email:$scope.email,pwd:$scope.pwd}).
        success(function(data, status, headers, config) {
            alert("success " + data)
        }).
        error(function(data, status, headers, config) {
            alert("failure =>" +data)
        });
 };         });
 }; 
```

HTML 表单

```
<form ng-controller="UserController">
            <legend>Create User</legend>

            <label>Name</label>
            <input type="text" id="name" name="name" ng-model="name" placeholder="User Name">

            <label>Email</label>
            <input type="text" id="email" name="email" 
                ng-model="email" placeholder="ur email here">

            <label>Password</label>
            <input type="text" id="pwd" name="pwd" 
                ng-model="pwd" placeholder="ur own pwd here">

            <button ng-click="createUser()" class="btn btn-primary">Register</button>
        </form> 
```

Scalatra Servlet

```
post("/createUser") {
    println(params("name")) 
} 
```

当我运行应用程序并尝试从表单提交时，我收到此错误

> 未找到错误 500 键：名称（从 firebug lite 获得）

如果我错过了什么或任何其他方式，请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:46:18.440

两个变化：

1.  使用“ng-submit”事件。
2.  将 ng-models 放入对象本身，这样您就可以在帖子中发送对象。

HTML：

```
<div ng-controller="UserController">
  <form ng-submit="createUser()">
    <input type="text" ng-model="user.name">
    ...
    <input type="email" ng-model="user.email">
    ...
  </form>
</div> 
```

JS：

```
function UserController($scope, $http) {
  $scope.user = {};
  $scope.createUser = function() {
    $http.post('/createUser', $scope.user);
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T14:18:31.400

我刚刚通过在http帖子本身中添加标题信息来解决这个问题，下面是代码

```
$scope.createUser = function() {
$http({
method: 'POST',
url: '/createUser',
data: 'name=' + $scope.user.name + '&email=' +$scope.user.email,
headers: {'Content-Type': 'application/x-www-form-urlencoded'}
}) 
```

}

如果其他人有任何其他更好的方法，请发表您的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T14:42:16.363

这将是迟到的答复。无论如何，我认为这会对其他人有所帮助，因此，我发布了我的答案。

如果您想在请求提交为 时阅读请求正文`POST`，您可以使用以下的`reader`of获取它`HttpRequest`。

```
 BufferedReader reader = request.getReader();
      String line = null;
      while ((line = reader.readLine()) != null)
      {
        sb.append(line);
      }

 String requestBody = sb.toString(); 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T07:58:15.483

好吧，我也有类似的问题，数据被正确发布到服务器，但无法使用正常的 $_POST 或 $_REQUEST 在 POST 数据中接收

但是，以下对我有用

```
$data = json_decode(file_get_contents("php://input")); 
```

# ios - 使用 Game Center 保存/共享游戏数据/状态

> ID：12826571
> 
> 赞同：7
> 
> 时间：2012-10-10T19:08:22.453
> 
> 标签：ios, save, game-center

在阅读了[开发人员文档](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008304-CH1-SW1)和搜索各种论坛的数小时后，我似乎无法找到有关如何完成此操作的信息。

基本上我有一堆数据保存在本地，这些数据构成了玩家游戏的当前状态。我见过其他游戏，例如 Tiny Tower、Pocket Planes 和 Smurf 的村庄，实际上在 Game Center 中备份了这些数据。

我的目标是让玩家能够从他们朋友的游戏中加载数据，这样他们就可以看到事情的进展情况。例如，在小塔中，我可以查看我朋友的塔并向他/她发送礼物。同样在蓝精灵村。我知道我可以用我自己的服务器使用登录名/密码来做到这一点，但如果它通过 Game Center 工作，为什么会使事情复杂化？

是利用 Game Center 的比赛功能的问题吗？还是排行榜？或者？

无论如何，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:12:58.510

我已经阅读了本教程，听起来它会回答你的很多问题。

[iOS6 游戏中心的新功能](http://www.raywenderlich.com/23189/whats-new-with-game-center-in-ios-6?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20RayWenderlich%20%28Ray%20Wenderlich%20%7C%20iPhone%20Developer%20and%20Gamer%29)

# java - 排序数组时出现异常

> ID：12826576
> 
> 赞同：-1
> 
> 时间：2012-10-10T19:08:35.627
> 
> 标签：java, sorting

我有一个文件数组，我试图按上次修改日期排序：

```
Arrays.sort(myFiles, new Comparator<File>(){
    public int compare(File f1, File f2) {
        return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified());
    }
}); 
```

我没有看到这种类型的任何问题。如果文件不存在，lastModified 应该返回 0。但是，有时我会遇到以下异常：

```
java.lang.IllegalArgumentException: Comparison method violates its general contract!
at java.util.TimSort.mergeHi(TimSort.java:864)
at java.util.TimSort.mergeAt(TimSort.java:481)
at java.util.TimSort.mergeForceCollapse(TimSort.java:422)
at java.util.TimSort.sort(TimSort.java:219)
at java.util.TimSort.sort(TimSort.java:169)
at java.util.Arrays.sort(Arrays.java:2038)
at com.myapp.MyManager.getFiles(MyManager.java:101)
at com.myapp.MyManager$2.run(MyManager.java:171)
at java.lang.Thread.run(Thread.java:856) 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:10:40.187

```
public int compare(File f1, File f2) {
    return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified());
} 
```

您在第二个操作数上忘记了**Long.valueOf** ..

```
public int compare(File f1, File f2) {
    return Long.valueOf(f1.lastModified()).compareTo(
           Long.valueOf(f2.lastModified()));
} 
```

这可能会给你带来问题..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:10:43.450

我的猜测是您在排序期间“修改”文件（或至少更新上次修改时间）。这意味着分拣机看到类似`A < B`,`B < C`和的东西`C < A`，此时它会死掉，因为它认为您的`compare`函数必须被破坏。

您是否对正在被另一个进程修改的文件进行排序？也有可能查看修改时间正在更新修改时间，这显然会破坏这种排序。

# android - 为了使用 Android 连接到中央数据库，我需要做什么？

> ID：12826577
> 
> 赞同：2
> 
> 时间：2012-10-10T19:08:36.890
> 
> 标签：android, database, xampp, remote-access

我即将使用 Android 构建一个 GPS Spot Finder 应用程序，我正在尝试确定哪些要求是可行的，哪些不可行。该应用程序将使用户能够在谷歌地图上添加不同的地点。问题之一是获取数据、添加新点等。这当然意味着数据库必须在线并且必须是中央数据库。我的问题是，我需要什么样的技术来实现这一点？我最熟悉 XAMPP、PHPMyAdmin 等。我可以使用它并将Android连接到数据库吗？我想我不需要创建一个网站......只是数据库？

我可以采取哪些不同的方法？如果人们能指出我正确的方向，那就太好了。

对不起，如果我没有任何意义并且这种类型的问题不适合 Stackoverflow：S

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:11:20.750

创建一个网站以在本地访问数据库，并让 Android 向该网站发送请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T20:41:31.397

如果用户向地图中添加只有他们能看到的地点，那么使用内置数据库 (SQLite) 将数据保留在 Android 本地是有意义的。看起来像

> 安卓 -> 数据库

[您可以在此处](http://developer.android.com/guide/topics/data/data-storage.html#db)阅读有关 SQLite 选项的信息。

如果用户需要查看所有其他用户添加的所有点，甚至是用户添加的点的子集，那么您需要一个 Web 服务来处理对数据库的查询：[连接到远程数据库...在线数据库](https://stackoverflow.com/questions/4124805/connect-to-remote-database-online-database)

> ANDROID -> HTTP -> 应用服务器 -> 数据库

尝试直接与数据库接口不仅不太稳定，而且可能在安全性和可访问性方面带来[风险](https://stackoverflow.com/questions/2256082/best-way-to-implement-client-server-database-architecture-in-an-android)。

> 永远不要通过 Internet 连接、任何数据库、任何平台、任何客户端、任何地方使用数据库驱动程序。这对于移动设备来说是双倍的。数据库驱动程序是为 LAN 操作而设计的，而不是为不稳定/间歇性连接或高延迟而设计的。

此外，Android 没有内置客户端来访问 MySQL 等数据库。因此，虽然在某个地方运行 Web 服务似乎需要做更多的工作，但实际上比尝试直接使用数据库做事要好得多。[这](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8339-connect-android-mysql-database-tutorial.html)是一个展示如何连接这两者的教程。

使用 html 路由有一个隐藏的好处。您将需要一种编程思维来思考在 POST 中发送什么类型的数据以及在 GET 中检索什么类型的数据。仅此一项就可以改善您的应用程序架构和结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:11:01.257

为什么不尝试使用已经内置在 android 中的东西，比如 SQLite？通过那里将这些“点”的坐标保存到数据库中。这样，一切都是本地的，应该是快速的。除非，您的功能之一是与其他用户共享位置？除了拥有中央数据库之外，您仍然可以通过不同的方法发送这些“点”。

是的，你只需要一个开放的数据库，而不是一个网站。从技术上讲，您可以从家用计算机托管数据库，但我不建议这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T10:35:10.540

如果您正在考虑将数据存储在您的用户移动设备中，那么没有比内置 SQLLite 更好的了。

如果您正在寻找集中式数据库来存储信息，Parse.com 是一种将用户应用程序数据存储在集中式存储库中的简单且更好的方法。

Parse.com 并不完全是基于 SQL 的数据库，但是您可以从 android 创建表、插入/更新和检索行。

最好的部分是它是免费的，最高可达 1GB。他们声称在 Parse.com 上构建了 400,000 个应用程序。我很少使用我的应用程序通常用于用户管理，这对我来说效果很好。

# javascript - 不同结果的 CSS 圆圈

> ID：12826583
> 
> 赞同：0
> 
> 时间：2012-10-10T19:08:46.493
> 
> 标签：javascript, html, css

我已经看到了屏幕截图，蓝色圆圈还可以，但是即使有两个相同的 css 和 js，灰色圆圈看起来也很有趣？我将不胜感激如何纠正灰色圆圈？我同时使用相同的 css 和 js，但灰色的流线型很差。

[对齐顶部 http://www.kerrydeaf.com/circle.png](http://www.kerrydeaf.com/circle.png "工具提示")

CSS3

```
 button {
      height: 90px;
      width: 90px;
      border-radius: 50%;
      border: 3px solid #fff;
      background-color:#003F5F;
  }

  button:hover {
      background-color:#FFCC05; /*47C3D2*/
  }

  buttongrey {
      height: 90px;
      width: 90px;
      border-radius: 50%;
      border: 3px solid #fff;
      background-color:#a8a9a2;
      }

  buttongrey:hover {
      background-color:#FFCC05;
  } 
```

Javascript：

```
 <script type="text/javascript">
  $("button").click(function() {
    $(this).toggleClass("hover");
  });
  $("buttongrey").click(function() {
    $(this).toggleClass("hover");
  });
  </script> 
```

更新：HTML5

```
 <div data-role="content"> <div class="content_index"><!--START CONTENT and another at the END -->
          <div id="content_index_left" align="center">
          <ul data-role="listview">
              <li><a href="#page1"><button><img style="vertical-align: middle" src="images/index_10.svg" width="80%" alt="" title="" border="0" class="shadow" /></button></a></li>
              <li><a href="#page1"><span class="bold_index">Ten tips</span></a></li><br />

              <li><a href="#page2"><button><img style="vertical-align: middle" src="images/index_triadic.svg" width="90%" alt="" title="" border="0" class="shadow" /></button></a></li>
              <li><a href="#page2"><span class="bold_index">Triadic Exchange</span></a></li><br />

              <li><a href="#page6"><buttongrey><img style="vertical-align: middle" src="images/index_deafculture.svg" width="80%" alt="" title="" border="0" class="shadow" /></button></a></li>
              <li><a href="#page6"><span class="bold_index">Deaf Culture</span></a></li>
          </ul>
          </div> 
          <div id="content_index_right" align="center">           
          <ul data-role="listview">
              <li><a href="#page4"><button><img style="vertical-align: middle" src="images/index_video.svg" width="80%" alt="" title="" border="0" class="shadow" /></button></a></li>
              <li><a href="#page4"><span class="bold_index">Video</span></a></li><br />

              <li><a href="#page3"><button><img style="vertical-align: middle" src="images/index_examples.svg" width="85%" alt="" title="" border="0" class="shadow" /></button></a></li>
              <li><a href="#page3"><span class="bold_index">Examples</span></a></li><br />

              <li><a href="#page5"><buttongrey><img style="vertical-align: middle" src="images/index_disability.svg" width="90%" alt="" title="" border="0" class="shadow" /></button></a></li>
              <li><a href="#page5"><span class="bold_index">Disability Rights</span></a></li>
          </ul>
          </div>
      </div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:20:49.220

html 标签 buttongrey 不存在！对我来说，这是解决方案：

HTML：

```
<li>
  <a href="#page6">
     <button class="grey">
        <img style="vertical-align: middle" src="images/index_deafculture.svg" width="80%" alt="" title="" border="0" class="shadow" />
     </button>
  </a>
</li> 
```

CSS：

```
.grey {
      height: 90px;
      width: 90px;
      border-radius: 50%;
      border: 3px solid #fff;
      background-color:#a8a9a2;
 }

.grey:hover {
     background-color:#FFCC05;
 }​ 
```

# asp.net - 在 Visual Studio 解决方案资源管理器中，为什么解决方案名称是 localhost 而不是解决方案名称？

> ID：12826589
> 
> 赞同：-1
> 
> 时间：2012-10-10T19:09:20.457
> 
> 标签：asp.net, visual-studio-2010, visual-studio

在 Visual Studio 的解决方案资源管理器中，为什么以及如何将项目名称设为 localhost 而不是项目名称？

打开解决方案并在解决方案资源管理器中查看项目时，它的名称是 LocalHost 和端口号。这是怎么发生的？（通常我总是看到解决方案名称）

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:11:21.530

你可以`rename your solution`和`save your solution name`, localhost 因为她没有名字

# php - mysql类似搜索查询结果

> ID：12826590
> 
> 赞同：0
> 
> 时间：2012-10-10T19:09:29.690
> 
> 标签：php, mysql, search

我需要知道如何显示类似的搜索查询用户名，例如是否有用户名：johnhol、_john_、donjohnqq、king_john、code_john，如果我们搜索 john，则所有以 john 开头的名称必须显示当前 iam using

```
$result = mysql_Query("SELECT user FROM UserData WHERE user LIKE '%$username%'") or die(mysql_error());
$fetch = mysql_num_rows($result); 
```

但它不像我所说的那样显示，它只显示一些名称，如 _john_ ， king_john 之类的名称仅根据代码显示，所以请告诉我如何使用搜索查询进行搜索并显示 mysql 数据库中的所有起始名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:15:51.727

I *THINK* you are looking for everything which starts with `$username`. Is that correct? If so, then your query should only have one `%` at the end:

```
SELECT user FROM UserData WHERE user LIKE '$username%' 
```

That will match `john_glenn` but not `glenn_johnson`.

# php - MySQL 事务 - 如何分组？

> ID：12826594
> 
> 赞同：0
> 
> 时间：2012-10-10T19:09:39.817
> 
> 标签：php, mysql, pdo

几天前我刚刚了解了事务，我发现它在某些情况下非常有用，例如当我更新几个表并且脚本可能在操作中间失败时，非常好。

但是，我怎样才能将它们分组？可能会在事务中的两个查询之间运行查询，但我不希望它回滚。有没有一种方法可以在没有新连接的情况下对查询进行分组？

我已经搜索过，但结果很差。

我正在使用 InnoDB、PHP/PDO + MySQL。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:44:30.927

您可以尝试使用`begin-end`，您可以在这些标签内执行多个查询。您正在使用 TRANSACTIONS，因此您只有两个选项 COMMIT 和 ROLLBACK，如果您的查询不成功，它将 ROLLBACK（没有更多选项），请查看此帖子

[START TRANSACTION inside BEGIN ... END context or outside and LOOP 语法](https://stackoverflow.com/questions/12259675/start-transaction-inside-begin-end-context-or-outside-and-loop-syntax)

# javascript - 使用 CasperJS 将结果写入文件

> ID：12826596
> 
> 赞同：43
> 
> 时间：2012-10-10T19:09:50.040
> 
> 标签：javascript, casperjs

如何在文件系统中创建文件并将其内容`this.getPageContent()`放入其中？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-11T18:28:41.780

```
var fs = require('fs');
fs.write(myfile, myData, 'w'); 
```

为了节省日常擦伤，我这样做：

```
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();
var myfile = "data-"+year + "-" + month + "-" + day+".html"; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-18T14:38:58.787

您还可以使用以下方法附加到文本文件

```
 var casper = require('casper').create();
    var fs = require('fs');
    var fname = new Date().getTime() + '.txt';
    var save = fs.pathJoin(fs.workingDirectory, 'nwaomachux', fname);

    casper.start('http://www.po3w.com/', function() {
        fs.write(save, this.getTitle() + '\n', 'w');
    });

    casper.thenOpen('http://phantomjs.org', function() {
        fs.write(save, this.getTitle(), 'a');
    });

    casper.run(); 
```

*   如果文件夹**nwaomachux**尚不存在，它将自动为您创建。
*   如果您将文件保存为**save.js ，请****在 Linux PC 上**使用以下命令从 PhantomJS 运行它

 **> ./phantom casperjs/bin/bootstrap.js --casper-path=casperjs --cli save.js

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-04T20:19:49.750

这是一个帮助函数，您可以使用它来将此功能添加到 casper 对象。

```
/**
 * Save page markup to a file. Respect an existing savePageContent function, if
 * casper.js core introduces one.
 * 
 * @param String targetFile
 *   A target filename.
 * @return Casper
 */
casper.savePageContent = casper.savePageContent || function(targetFile) {
  var fs = require('fs');
  var f  = require('utils').format;

  // Get the absolute path.
  targetFile = fs.absolute(targetFile);
  // Let other code modify the path.
  targetFile = this.filter('page.target_filename', targetFile) || targetFile;
  this.log(f("Saving page html to %s", targetFile), "debug");
  // Try saving the file.
  try {
    fs.write(targetFile, this.getPageContent(), 'w');
  } catch(err) {
    this.log(f("Failed to save page html to %s; please check permissions", targetFile), "error");
    this.log(err, "debug");
    return this;
  }

  this.log(f("Page html saved to %s", targetFile), "info");
  // Trigger the page.saved event.
  this.emit('page.saved', targetFile);

  return this;
}; 
```

请注意，在这种情况下，“fs”不是 Node JS FileSystem 对象，而是[PhantomJS 模块](http://phantomjs.org/api/fs/)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-11T06:30:20.290

一个完整的 ' `then`' 函数，即从站点抓取数据，返回 a`json`并将其存储到文件“myFile”中，应该如下所示：

```
casper.then(function paso2() {
var jsonStr = this.evaluate(function(){
    var puntos = {};
    puntos.alafecha = document.querySelector('div.cont_item_productos_puntos > p.txt_negro').textContent;
    puntos.totales = document.querySelector('ul.lista_prod_puntos > li.ppuntos_1 > span.ppuntos_2').textContent;
    return JSON.stringify(puntos);
});
console.log("this is a response in json format: "+json);
fs.write('myFile.json', jsonStr, 'w');
}); 
```**

# c# - 如何检查Web服务器上是否存在文件

> ID：12826597
> 
> 赞同：1
> 
> 时间：2012-10-10T19:09:54.573
> 
> 标签：c#, asp.net

我在服务器上存储了一个文件，我正在填充的网页取决于该文件是否存在的 fatc。

如何测试文件在服务器上是否可用？该文件在网页上为： http: [//main.server.com/PGT/Reports/ObjectsReport.xml](http://main.server.com/PGT/Reports/ObjectsReport.xml)

我必须测试该文件是否存在，如果可用，我将显示一个链接，否则我想隐藏该链接。

服务器的实际路径是 //main.server.com/inetpub/wwwroot/PGT/Reports/ObjectsReport.xml 但我无法访问网络上的服务器（因此也无法访问文件）。我只能使用网页访问它。有没有办法测试服务器是否有文件或不显示链接？(hlObjectsReport.Visible = false;)

我尝试使用以下内容：

Uri 验证的Uri；Uri.TryCreate(uri, UriKind.RelativeOrAbsolute, out validUri);

但即使文件不存在，它也会返回有效地址。

谢谢托尼。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T19:11:40.320

使用 System.IO.File.Exists() （[文档](http://msdn.microsoft.com/en-us/library/system.io.file.exists%28VS.71%29.aspx)）

```
if(System.IO.File.Exists([path goes here]))
{
  // do something
} 
```

如果您不确定物理路径，可以将以下内容替换为上面的 [path goes here]：

> Server.MapPath(/PGT/Reports/ObjectsReport.xml)

（[文档](http://msdn.microsoft.com/en-us/library/ms524632%28VS.90%29.aspx)）

# jquery - 录音，8 或 11 khz jquery

> ID：12826599
> 
> 赞同：0
> 
> 时间：2012-10-10T19:10:00.180
> 
> 标签：jquery, audio

我最近使用了 jRecorder jquery，但发现它以 44 khz 记录。我需要获取创建的 .wav 文件并转换为 8 或 11 khz，或者找到一个新插件以 44khz 录制。

任何人都知道一个好的插件或知道如何以编程方式将 44 khz 转换为 8 或 11？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:02:50.503

*听起来像一个名为Sound eXchange*的开源工具可以完成这项工作。它是一个跨平台的命令行工具，因此您需要一些服务器端代码（即，当然，以编程方式发出外部命令来触发它）来处理幕后的波形文件转换。

工具下载地址：
[http ://sox.sourceforge.net/](http://sox.sourceforge.net/)

在 jRecorder 将 wav 文件上传到服务器目录后，就可以使用服务器端代码进行转换了。您没有提到您正在使用的 Web 服务器和服务器端语言，所以我假设您使用的是 PHP。所以看看这些：

[http://php.net/manual/en/function.shell-exec.php](http://php.net/manual/en/function.shell-exec.php)

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

希望这可以帮助！

# ruby-on-rails - rake db:migrate 语法错误（不存在）

> ID：12826601
> 
> 赞同：1
> 
> 时间：2012-10-10T19:10:04.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, syntax, dbmigrate

`rake db:migrate`由于语法错误而中止

```
rake aborted!
/Users/Fryed/rails/treebook/db/migrate/20121009215822_devise_create_users.rb:3: syntax error, unexpected '\n', expecting '|'
/Users/Fryed/rails/treebook/db/migrate/20121009215822_devise_create_users.rb:47: syntax error, unexpected keyword_end, expecting $end 
```

但相应的行如下所示：

第 3 `create_table(:users) do |t` 行和第 47 行`end`

为什么这不起作用，我该如何解决？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:12:20.400

您只是缺少尾随`|`，第 3 行应为：

```
create_table(:users) do |t| 
```

`\n`表示换行 - 所以错误消息基本上说，“ruby 看到换行，但它期待另一个`|`”

# svg - 如何使用 SVG 渐变来显示相对于彩色区域大小的不同颜色

> ID：12826604
> 
> 赞同：6
> 
> 时间：2012-10-10T19:10:19.300
> 
> 标签：svg, d3.js, linear-gradients

我正在使用 SVG 和 D3 创建条形图，并且有一个关于如何为它们着色的问题。我在这个网站和其他网站上搜索了很多问题，但还没有找到有同样问题的人。

我希望每个条都以一种颜色（例如黄色）从底部开始，并且随着条变高，逐渐混合更多的第二种颜色（例如红色），以使条具有最大潜力高度只是第二种颜色。在此示例中，处于其潜在高度一半的条形顶部将是橙色的。

我能够编写一个函数来为任何给定高度的条生成一个独特的线性渐变，该渐变可以根据需要对条进行着色。

但是，由于此图是动态的，并且随着数据的刷新，条形图的高度每秒可能会发生多次变化，因此每次为每个条形图创建和应用新的梯度肯定效率不高，并且可能导致刷新时严重滞后酒吧。（我承认我实际上除了静态测试用例之外没有尝试过这个，所以我对最后一个假设可能是错误的。）

使用静态渐变当然会产生类似这样的结果，其中颜色是根据条形的高度混合的，而不是区域的高度：

![使用静态渐变](../Images/a767dfe43757a0b64f7adb6198345049.png)

然而，在我想要的场景中，较小的条应该分别有很少的红色或深蓝色。

**最后，我的问题是：有没有办法**

1.  创建一个应用于 SVG 区域本身的渐变（*简单*）
2.  已经说过以某种方式掩盖了渐变（*简单*）
3.  然后有选择地在代表图形条形的矩形下方露出？（*？？？*）

或者，还有其他一些我忽略的技术吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-11T00:00:27.143

这很容易实现，但有点难以掌握，您需要指定梯度单位`userSpaceOnUse`，然后通过`x1`, `x2`, `y1`,定义您希望它应用的区域`y2`：

```
var gradient = svg
    .append("linearGradient")
    .attr("y1", minY)
    .attr("y2", maxY)
    .attr("x1", "0")
    .attr("x2", "0")
    .attr("id", "gradient")
    .attr("gradientUnits", "userSpaceOnUse")

gradient
    .append("stop")
    .attr("offset", "0")
    .attr("stop-color", "#ff0")

gradient
    .append("stop")
    .attr("offset", "0.5")
    .attr("stop-color", "#f00") 
```

你可以在这里看到一个演示：http: [//jsfiddle.net/ZCwrx/](http://jsfiddle.net/ZCwrx/)

# mysql - 从匹配一个条件的表中删除，其中同一个表中的行匹配不同的条件？

> ID：12826606
> 
> 赞同：2
> 
> 时间：2012-10-10T19:10:22.763
> 
> 标签：mysql

很抱歉这个大标题......我试图描述得足够好。我有一个包含活动出席数据的表，其中包含一些错误数据。表定义是这样的：

```
id (row id)
date
company_name
attendees 
```

最终在某些情况下，对于给定的日期，有两个条目与 company_name 和 date 匹配，但一个的参加者=0，另一个参加者>0。在这些情况下，我想丢弃参加者 = 0 的那些。

我知道您在删除时不能加入同一张表，因此请将此查询视为显示我想要完成的伪代码。

```
DELETE FROM attendance a WHERE a.attendees=0 AND a.date IN (SELECT b.date FROM attendance b WHERE b.attendees > 0 AND b.company_name = a.company_name); 
```

我还尝试使用要删除的行的 ID 填充临时表，但是由于 IN (SELECT ...) 子句，该查询挂起。我的表有数千行，所以只会最大化 CPU 然后超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:24:36.797

这个丑陋的东西应该可以工作（使用 alias permit 来避免`You can't specify target table for update in FROM clause`错误）

```
DELETE FROM attendance
WHERE (attendees, date, company_name)
IN (SELECT c.a, c.d, c.c 
    FROM
     (SELECT MIN(attendees) a, date d, company_name c
      FROM attendance
      GROUP BY date, company_name
      HAVING COUNT(*) > 1) as c); 
```

[SqlFiddle](http://sqlfiddle.com/#!2/3c591/1)

# vb.net - vb.net中的多个按键

> ID：12826614
> 
> 赞同：1
> 
> 时间：2012-10-10T19:10:44.230
> 
> 标签：vb.net, events, keyboard

我要做的是处理最终用户用手掌、拳头、脸等敲击键盘的事件。听起来很荒谬，但它将用作高功率激光实验室的补充安全功能。我正在考虑观看 4 个或更多键。有效组合示例：

```
- u{f5}7hby6
- 6g3.io{alt}mn'
- p9hyi
- {tab}2{f2}56{shift}z
- {alt}{windows}\{ctrl}{f8}
- basically anything else that can be typed with a face 
```

我已经尝试过这种方法，但它不起作用，因为并非所有 KeyUp 或 KeyDown 事件都得到处理，尤其是在按下多个键时。

```
Private keez As New List(Of Integer)

Private Sub Form1_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles MyBase.KeyDown
    keez.Add(e.KeyValue)
    If keez.Count >= 4 Then MessageBox.Show("I handled it!")
End Sub

Private Sub Form1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles Me.KeyPress
    Try
        keez.Remove(AscW(e.KeyChar))
    Catch
    End Try
End Sub

Private Sub Form1_KeyUp(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyUp
    keez.Remove(e.KeyValue)
End Sub 
```

使用这种方法，密钥会不断丢失。我想知道是否有人知道处理连续按下多个键的方法。大多数 Google 搜索都与标准组合键相关，这些组合键几乎总是包含一个修饰符（ctrl、alt、shift）+ 一个附加键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:02:22.910

我不认为您可以同时处理超过 4 个键（例如，同时 5 个字母字符将不起作用） - 这是当今大多数键盘的硬件限制，即它们的内部接线方式。支持同时按下所有键的键盘可能非常昂贵，而且我还没有现场看到过。您可以查看[此线程](https://gaming.stackexchange.com/questions/6669/how-do-i-remove-the-limit-on-pc-keyboard-button-presses)以获取更多信息。还讨论[了 tomshardware](http://www.tomshardware.com/forum/50383-28-pressing-multiple-keys-keyboard-problem)。

# c# - UpdatePanel 在默认加载时不会出现，但在给出特定页面时会出现

> ID：12826616
> 
> 赞同：0
> 
> 时间：2012-10-10T19:10:53.427
> 
> 标签：c#, asp.net, master-pages

几天前我得到了这个 Web 应用程序，但我已经遇到了一个问题。

当我使用 HL1 = 加载页面时`http://localhost:8001/`，UpdatePanel 根本不会出现。

虽然当我使用 HL2 = 加载页面时`http://localhost:8001/Default.aspx`，它会完全显示出来。

[编辑：添加 HL1、HL2 标签]

仅供参考，UpdatePanel 是母版页的一部分。

有什么建议么？

谢谢， 阿比纳夫

[编辑：更新面板的代码]

```
<asp:UpdatePanel ID="upan" runat="server" >
    <ContentTemplate>
        <fieldset style="width:320px; padding:2px;margin-top:20px;margin-bottom:5px;" onmouseover="showHelp('quickAccess')" onmouseout="g_Popup.hide()">
            <legend>Quick Access</legend>
            <span style="vertical-align: middle">Dummy #
            <asp:TextBox ID="txtSearchDummy" clientidmode="Static" runat="server" MaxLength="9" Width="70px" Height="15px" style="margin-top: 5px"></asp:TextBox>
            <asp:Button ID = "btnSearchDummy" clientidmode="Static" runat="server" OnClick="btnSearchDummy_Click" style="display:none"/>
            <button onclick="return quickAccess()"  lang="javascript" type="submit" class="button_enabled" style="margin-left: 5px;">
            <img alt="" src="images/lightning.gif"></img><span>Find Dummy</span></button></span>
        </fieldset>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:46:47.250

感谢所有的帮助。问题现已解决，正如预期的那样，它与 ASP.NET 无关。在文件后面的母版页代码中，该搜索框变得不可见。

:)

# eclipse - 将maven sourceproject导入eclipse

> ID：12826619
> 
> 赞同：0
> 
> 时间：2012-10-10T19:10:56.307
> 
> 标签：eclipse, maven, m2e

我已经使用 Import Maven 项目在 Eclipse 中导入了我的 Maven 项目。它在 Eclipse 项目资源管理器中导入，但所有源文件夹都作为文件和文件夹打开，而不是作为 java 源文件夹打开。由于它作为文件和文件夹打开，它没有编译单元，发现使用它进行编码非常困难。

我需要做什么才能使源文件夹成为 java 源文件夹以便我可以轻松编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:18:51.797

选择项目并从上下文菜单中选择 Maven -> 更新项目配置（此菜单项在各种 maven 版本中重新措辞，因此请寻找类似的内容）。您可能还需要选择更新依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:16:24.647

在 shell/命令行中，执行`mvn eclipse:eclipse`

# html - HTAccess 重定向错误的文件夹名称

> ID：12826632
> 
> 赞同：0
> 
> 时间：2012-10-10T19:11:40.423
> 
> 标签：html, .htaccess, redirect, url-rewriting, subdirectory

我以前问过这个问题，但我又问了一次，因为以前没有人能回答这个问题。如果他/她输入了错误的文件夹名称，我想重定向用户。因此，如果他们这样做：

```
www.domain.com/folder 
```

我想将它们重定向到

```
www.domain.com/Folder 
```

所以到目前为止，这是我根目录中的 htaccess 代码：

```
RewriteEngine On
RewriteBase /
RewriteRule ^(.+)\/Front.php$ $1/ [R=301,L] 
```

如果他们以小写字母输入文件夹名称，我应该附加什么来帮助我重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:54:41.593

解决方案：`RewriteRule ^folder(/.*)?$ /Folder$1 [L,R=301]`

# php - 在 PHP 中的参考位置用 mock 替换对象

> ID：12826633
> 
> 赞同：0
> 
> 时间：2012-10-10T19:11:44.737
> 
> 标签：php

在 PHP 项目中，我有主单例和其他一些使用主单例的单例：

```
<?php

class SingletonMain
{
    // Main singleton
    // ...
}

class SingletonA
{
    protected $main;

    function __construct()
    {
        $main = SingletonMain::getInstance();
    }
}

class SingletonB
{
    protected $main;

    function __construct()
    {
        $main = SingletonMain::getInstance();
    }
}
?> 
```

我想，也许在**SingletonA**和**SingletonB中模拟****SingletonMain**的最简单方法是获取对**SingletonMain**实例的引用并执行以下操作：

 ******1.  将**SingletonMain**实例复制到`$temp`.
2.  将**MockSingletonMain**实例代替**SingletonMain**。“就地”是指在同一个参考位置，以便**SingletonA**和**SingletonB**可以立即使用新的模拟，就好像它是原始的**SingletonMain**一样。
3.  测试。
4.  从原位恢复**SingletonMain**实例。`$temp`

那有可能吗？如果不是，那么在所有**SingletonsABCD中模拟****SingletonMain**的最简单方法是什么......

 **`$this->main = $my_mock`目前，我唯一想到的解决方案是在每个叶子单例中显式设置新的模拟，并最终使用正常的赋值运算符（并在测试之后）再次恢复它`$this->main = SingletonMain::getInstance()`。

**编辑**

通过阅读几个答案，我意识到，我需要提供更多信息。我有大约 20-30 个这样的叶子单例。该应用程序在几年前并不是为了测试而设计的，所以现在我正在寻找绕过单例模式的最佳方法，而不会破坏任何东西并尽可能少地改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:02:56.833

您可以通过创建测试存根来做到这一点：

```
class SingletonAStub extends SingletonA
{

    public function getMain() {
        return $this->main;
    }

    public function setMain($main) {
        $this->main = $main;
    }
} 
```

在您的测试中，您使用存根，根据需要更改“单例”并进行测试。

当然，最好不要直接使用单例，因此您不需要创建仅用于测试的特殊子类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:36:33.170

SingletonA 在您的代码中不是单例，因此您可以轻松地在测试中传递模拟的 SingletonMain 实例：

```
class SingletonA
{
    protected $main;

    function __construct($main = null)
    {
        if (!$main) $main = SingletonMain::getInstance();
        $this->main = $main;
    }
} 
```

如果没有传递回退到当前行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:39:55.420

听起来你需要的是继承。像这样：

```
class SingletonA extends SingletonMain {
    // Your code specific to SingletonA here.
}

class SingletonB extends SingletonMain {
    // Your code specific to SingletonB here.
} 
```********

# windows - 在 Perl 脚本中播放声音

> ID：12826634
> 
> 赞同：9
> 
> 时间：2012-10-10T19:11:46.530
> 
> 标签：windows, perl, audio, portability, gnome

我正在尝试向 Perl 脚本添加声音以提醒用户事务正常（用户在工作时可能不会一直看着屏幕）。我希望尽可能保持便携，因为脚本在 Windows 和 Linux 站上运行。
我可以

```
use Win32::Sound;
Win32::Sound::Play('SystemDefault',SND_ASYNC); 
```

对于 Windows。但我不确定如何在 Linux (Gnome) 上调用通用声音。到目前为止，我想出了

```
system('paplay /usr/share/sounds/gnome/default/alert/sonar.ogg'); 
```

但我不确定我是否可以指望这条可用的路径。
所以，三个问题：

1.  有没有更好的方法在 Gnome 中调用默认声音
2.  这条路是否相当普遍（至少在 Debain/Ubuntu 风格中）
3.  `paplay`播放声音后需要一段时间才能退出，有没有更好的方法来调用它？

我宁愿远离系统扬声器的哔哔声，这听起来很糟糕（这会被播放很多）而且 Ubuntu 无论如何都会将 PC 扬声器列入黑名单。
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:27:36.190

获取路径`paplay`（假设它在那里）的一种更便携的方法可能是使用[`File::Which`](https://www.metacpan.org/module/File%3a%3aWhich). 然后你可以得到这样的路径：

```
use File::Which;
my $paplay_path = which 'paplay'; 
```

要异步播放声音，您可以`fork`使用子流程：

```
my $pid = fork;
if ( !$pid ) { 
    # in the child process
    system $paplay_path, '/usr/share/sounds/gnome/default/alert/sonar.ogg';
}

# parent proc continues here 
```

另请注意，我使用了 ; 的多参数形式`system`。这样做可以避免 shell 并直接运行请求的程序。这避免了危险的错误（并且更有效。）

# c++ - 在 XP 上使用 windows 文件资源管理器时阻止 explorer.exe 任务栏打开

> ID：12826641
> 
> 赞同：0
> 
> 时间：2012-10-10T19:12:23.077
> 
> 标签：c++, windows-xp, registry, explorer, windows-shell

我正在为开发人员创建一个外壳替换，它创建一个名为“开发人员”的新 Windows 用户，并且只有当您登录该用户时，才应该启动外壳。

替换的开始菜单被替换为基于 shell 的终端，具有强大的功能，任务栏被替换为基于树的窗口视图，进程监视器被替换为可以附加进程监视器、调试器、配置文件和内存泄漏的视图探测器等

我希望我的应用程序替换常规的 Windows shell。但是，我遇到了一个在 Windows 7 上运行良好的注册表项。但是在 Windows XP 上，如果我使用常规的 Windows XP 文件管理器，explorer.exe 中的 Windows XP 任务栏会启动，即使我更改了上述注册表项！

有没有人知道我需要做什么才能使用 Windows XP 完全替换 Windows shell 和任务栏，同时仍然保留使用基于 Windows 的文件管理器？:)

编辑：

使用 C++，使用 Qt 为我的 gui 库使用 NetBeans 进行开发。但是，由于我认为这不会影响答案，因此我想我会以任何一种方式将其包括在内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:17:21.257

我相信 Windows XP 不支持每个用户的 shell 替换（不确定，我玩桌面的东西已经有一段时间了），但你应该能够在下面设置“shell”条目`HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Winlogon`并防止资源管理器将自己注册为首次运行时的外壳。当然，这将影响机器中的所有用户。

# java - session_start()、session_destroy() 和 $_SESSION['username'] 的 Java 等效项

> ID：12826643
> 
> 赞同：3
> 
> 时间：2012-10-10T19:12:39.940
> 
> 标签：java, session, jersey

在 PHP 中，当用户登录她的帐户时，我会执行以下操作，以便在用户浏览网站时记住她：

```
session_start();
...
$_SESSION['username'] = $username; 
```

在可能需要敏感数据的任何其他页面上，我检查它`$_SESSION['username']`是否有效。

当使用注销时，我执行以下操作

```
unset($_SESSION['username']
session_destroy(); 
```

我如何在 Java 中做同样的事情？我有一个使用`Jersey`和的 REST API `EJB`。如果以下内容很重要，我坚持使用 JPA、Hibernate、Glassfish 和 mysql。

更新验证：

它是否正确？

```
@Path("login")
public class UserLoginResource {

  @EJB
  private LoginDao  loginDao;

  @Context
  HttpServletRequest request;

  @POST
  public Response login(JAXBElement<Login> jaxbLogin){
    Login login = jaxbLogin.getValue();
    loginDao.authenticateUserLogin(login);
    HttpSession session = request.getSession();
    session.setAttribute("username", login.getUsername());
    return Response.ok().build();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:38:33.387

Java 与 php 非常不同，因此在 java 中，您将仅从[HttpRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)的[getSession()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28%29)方法获取会话，在 php 中始终假定您的代码由某个服务器（即 apache）运行，在 java 中，您将获得它来自 ServletContainer（即 Apache Tomcat）。

与 php 不同，您不必在 java 中启动会话，只要您在 servlet 容器中并发出请求，如果没有会话，则此客户端 servlet 容器负责启动

所以对于上述动作：

```
 reqest.getSession().setAttribute("udername","Elbek");
    //later 
    reqest.getSession().removeAttribute("udername");

   //destroy it
   reqest.getSession().invalidate(); 
```

这`request`是[HttpRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)类的对象

你可以看看这个[HttpSession](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)

我强烈建议你看看 java [scopes](http://javapapers.com/jsp/explain-the-scope-of-jsp-objects/)

**php**中没有这种东西，我希望有，**但是**没有

 **[这](https://stackoverflow.com/questions/5118752/how-do-i-access-the-http-request)是您如何将请求对象放入您的球衣动作（方法）中，即通过注入`@Context HttpServletRequest httpRequest`

编辑：您不是`HttpRequest`自己创建对象，而是从 servlet 容器中获取它，您的服务器根据客户端请求创建它并为您提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:54:35.223

+elbek 描述了普通的 servlet 情况——然而，现在几乎没有人编写普通的 servlet。那时候真是太恶心了，很多网络框架都在进化。它们有很多，但好的会利用依赖注入技术，如 spring
（例如，struts 2），并且有不同的范围 - 应用程序/会话/请求 - 包含普通 java bean，而这些 bean 又可以具有身份验证数据.

J2EE 还通过 servlet 容器和 JAAS 提供自己的身份验证语义 - 它还使用会话跟踪，当您需要访问一些后端资源（如数据源或队列或 EJB）时很有用 - 但大多数 Web 应用程序并不关心它。**

# objective-c - 调整大小的 UIToolbar 拒绝保持其 UIBarButtonItem 正确对齐

> ID：12826644
> 
> 赞同：0
> 
> 时间：2012-10-10T19:12:41.080
> 
> 标签：objective-c, ios, cocoa-touch, uibarbuttonitem, uitoolbar

我`UIToolbar`的视图顶部有一个，它需要在动画中调整大小。工具栏包含：

*   使用`UIBarButtonItem`系统项目`UIBarButtonSystemItemAdd`（“+”按钮）
*   A`UIBarButtonItem`使用自定义视图（标题）
*   A`UIBarButtonItem`使用样式`UIBarButtonItemStyleBordered`（“编辑”按钮）

我在每个按钮之间使用间隔符添加这些按钮，使标题保持在中心：

```
 [toolbar setItems: @[addButton, spacer, titleButton, spacer, editButton] animated:NO]; 
```

![原始尺寸](../Images/451abc0ab8a1dae8a78516a06538c319.png)

工具栏的大小调整得很好，两个按钮的位置固定在外边缘。但是，标题按钮不会停留在工具栏的中心。相反，它似乎将其右边缘固定在同一位置，在其左侧创建了一个空间。在动画期间，这给人的印象是它向右滑动。

![扩大尺寸](../Images/63438163797ac4d1af64f139a46427c0.png)

需要明确的是，我**确实**希望标题栏保持相同的宽度 - 我不希望它随着工具栏的增长而扩展。但我需要标题留在工具栏的中心。

由于 a`UIBarButtonItem`不是 a `UIView`，我不能（？）使用该`autoresizingmask`功能。

如何将标题保持在工具栏的中心？

**附加信息**

这可能是因为“添加”和“编辑”按钮的宽度不同 - 当我只添加标题（两边都有一个分隔符）时，行为是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:02:42.727

事实证明，我遗漏了一个关键细节。我手动将`width`编辑按钮的设置为 50。

如果将其删除，则调整大小将按预期工作。但是，我无法控制编辑按钮的大小，我喜欢将其设置为 50，以便与导航栏上的按钮匹配。

我找到了一个可行的解决方案。保持 Edit 按钮的宽度为 50。在 '+' 按钮后立即添加一个固定分隔符，并将其宽度设置为 18（50 - '+' 按钮的宽度）。这平衡了标题两侧的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:30:52.573

我知道这太糟糕了，您仍然可以使用自定义按钮作为栏按钮项目并在其中使用添加/编辑按钮的图像。这样您就可以在任何地方设置按钮框架。所以你的按钮不会放在最右边的地方。

```
UIButton * addButton = [[UIButton alloc] init];
[addButton setBackgroundImage:<AddimageName> forState:UIControlStateNormal];
UIBarButtonItem * addItem = [[UIBarButtonItem alloc] initWithCustomView:addButton]; 
```

# image-processing - 如何使用 oCanvas.js 渲染具有透明背景的图像

> ID：12826646
> 
> 赞同：1
> 
> 时间：2012-10-10T19:12:44.807
> 
> 标签：image-processing, canvas, html5-canvas

我一直在用 oCanvas.js 设计一个应用程序。这是一个非常好的画布库，它可以更轻松地创建一个可以创建和操作图像的应用程序，但是当我尝试实现图像过滤器时遇到了一个障碍：

我需要透明背景，以便我可以拥有多个图层，每个图层都由其自己的显示对象表示，在隐藏的“登台”画布上单独呈现（意味着一次一个）。渲染后立即在可见画布上的先前图层之上绘制一个图层，以便在渲染期间可以将不同的图像过滤器独立应用于每个图层。

我遇到的问题是，当尝试从 oCanvas 对象的 canvasElement 中提取图像时，生成的图像永远不会有透明背景。例如：假设我有一个 50x50 的画布，它已经过 oCanvas.create() 处理，但有 display: none; （这用作渲染画布）和另一个没有 oCanvas 实例的画布（相同尺寸）。我正在尝试做这样的事情（伪代码）：

```
visibleCanvas.getContext("2d").drawImage(MyOcanvasCore.canvasElement,  0,  0); 
```

我也尝试过使用`URL = MyOcanvasCore.canvasElement.toDataURL()`然后让我`visibleCanvas`用`src=url`.

图像总是传输，但它们具有白色背景，即使我在 canvas.create() 期间指定背景：“透明”。因此，它们完全覆盖了所有先前的层。

你对我有什么建议吗？我做错了吗？我尝试使用经典的 drawRect、drawImage 等方法将内容从一个画布转移到另一个画布，并且保留了透明度。这就是为什么我相信它要么是库要么是我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:09:21.000

> 我猜您使用的是 png 以外的图像格式。你的图像格式应该是 PNG，它保留了每个像素的所有细节 > 包括像素的透明度，而不是压缩格式。因此，只需在某些图像编辑器中编辑它们并保存 > 结果为 .png 后，尝试将图像保留为 png 格式。

# clojure - Clojure - 用大数字计算

> ID：12826649
> 
> 赞同：12
> 
> 时间：2012-10-10T19:12:55.733
> 
> 标签：clojure, overflow, integer-overflow

我想`!1000`在 clojure 中计算，如何在不出现整数溢出异常的情况下做到这一点？

我的阶乘代码现在是：`(reduce * (range 1 1001))`.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-10T19:29:16.247

您可以`*'`通过自动将结果提升到 BigInt 来使用支持任意精度的运算符，以防它溢出：

```
(reduce *' (range 1 1001)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T19:24:24.350

将 N 放在数字的末尾，使其成为 bigint，

```
(reduce * (range 1N 1001N)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T19:59:16.167

强制参数为`clojure.lang.BigInt`

```
(reduce * (range (bigint 1) (bigint 1001))) 
```

即，如果您正在使用不使用的第三方库`*'`

```
(defn factorial' [n]
   (factorial (bigint n))) 
```

# ruby-on-rails - 使用 Ruby Win32ole 发送格式化/html Outlook 电子邮件

> ID：12826651
> 
> 赞同：1
> 
> 时间：2012-10-10T19:13:10.860
> 
> 标签：ruby-on-rails, ruby, outlook, win32ole

是否可以使用 Ruby 的 WIN32OLE 发送格式化的电子邮件，无论是 html 还是其他方式 - 我已经能够通过自动化发送纯文本电子邮件（如下所示），但希望能够添加一些格式。任何帮助将不胜感激！

```
require 'win32ole'

@outlook = WIN32OLE.new('Outlook.Application')
email = @outlook.CreateItem(0)
email.Subject = 'Test Subject'
email.Body = 'Test Body'
email.To = 'recipient@example.com'
email.Save
email.Send 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:32:50.780

很确定您需要使用 HTMLBody 而不是 Body，如下所示：

```
email.HTMLBody = '<h3>Test body in HTML format</h3>' 
```

# android - 如何滚动背景图像？

> ID：12826652
> 
> 赞同：3
> 
> 时间：2012-10-10T19:13:15.343
> 
> 标签：android, eclipse, imageview, scrollview, background-image

如何设置背景图像以使用 ScrollView 滚动？例如，我想显示一个 640x480 的图像，如果向下滑动，它必须显示我图像的另一个 480 dp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:27:05.867

尝试

```
<ScrollView> 
<RelativeLayout>
<ImageView>  with "wrap_content","wrap_content" and App background here
.
.
. 
```

我没有尝试过，但我想它会起作用的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:16:13.043

I'm not sure if you can do that with scrollView but if you want to change your application to scroll horizontally you might consider implement a ViewPager and set a different background at each page. It will smoothly switch between pages displaying different picture on the full screen. You might want to check this tutorial: [http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

# asp.net - 获取 ASP.Net 中的所有样式规则

> ID：12826653
> 
> 赞同：0
> 
> 时间：2012-10-10T19:13:24.237
> 
> 标签：asp.net, stylesheet

有没有办法获取应用于页面的所有 CSS 规则？目前，我正在使用 jQuery 来执行此操作，但是否有服务器端解决方案？

```
var style = "";

//grab all styles defined on the page
$("style").each(function () {
    style += $(this).html() + "\n";
});

$.ajaxSetup({ async: false });
//grab all styles referenced by stylesheet links on the page
$("[rel=stylesheet]").each(function () {
    $.get(this.href, '', function (data) {
        style += data + "\n";
    });
});
$.ajaxSetup({async: true});
style = "<style type='text/css'>" + style + "</style>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:17:51.727

You can try with `HtmlHead.StyleSheet` property

Link : [http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlhead.stylesheet.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlhead.stylesheet.aspx)

# sql - 在 sql 中的视图中调用视图是否不好

> ID：12826654
> 
> 赞同：15
> 
> 时间：2012-10-10T19:13:25.610
> 
> 标签：sql, sql-server

我已经创建了 8 个不同的视图，并且我在一个视图中使用了所有这些视图。所以我想知道在我继续这个想法之前。我想知道它是否会严重影响性能。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T19:18:26.397

不，还好。在许多情况下，我个人认为编写一个具有巨大且难以理解的定义的视图更可取。我认为，使用多个视图可以：

1.  将离散逻辑封装在各个视图中。
2.  在各个视图中重用逻辑，而不必重复逻辑（稍后消除更新问题）。
3.  命名您的逻辑，以便下一个程序员更容易理解您要完成的工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T02:52:20.347

在创建执行计划期间，视图会被“编译”掉。因此，使用它们只有很小的代价：SQL Server 查找定义所花费的额外时间。通常这种延迟是不可测量的。

这意味着将视图用于 Larry Lustig 提到的目的是非常好的和值得鼓励的。

但是：确保不要使用此技术引入不必要的 JOIN。虽然 SQL Server 具有从查询中消除不需要的表的机制，但如果查询变得复杂，它会很快放弃。执行这些额外的 JOIN 可能会导致显着减速。这就是许多公司制定禁止查看规则的原因。

所以：使用视图，但确保不要滥用它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T19:18:11.693

It's not bad for performance just for being a view. It may add some complexity to maintain, and cause additional consideration when you want to change the schema of the underlying tables. If you were using views and they joined to the same tables, I think that would be less efficient than joining to the table once in one view.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T19:19:08.977

我喜欢使用嵌套视图，每个视图都封装和命名一些数据的横截面。

至于性能，如果替代方案需要多次查询相同的数据，它实际上可以提高性能：嵌套视图有点像临时表 - 触发一次。

发现性能影响的最佳和推荐方法是尝试这两个选项并检查解释输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T19:19:05.710

从视图中查询视图的纯粹事实不会对性能产生任何负面影响。它与从视图中查询表没有什么不同。

# android - 未调用广播接收器

> ID：12826656
> 
> 赞同：0
> 
> 时间：2012-10-10T19:13:34.797
> 
> 标签：android

我知道这是一个基本问题，但它仍然让我发疯。我正在设置重复警报，但从未呼叫过接收器。

```
Intent intent = new Intent(NewSchedule.this, RepeatingAlarm.class);
PendingIntent sender = PendingIntent.getBroadcast(NewSchedule.this, 0, intent, 0);

Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.add(Calendar.SECOND, 10);

AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, calendar.getTimeInMillis(), 5 * 1000, sender);
Log.i("calendar",calendar.getTimeInMillis() + "");
Toast.makeText(NewSchedule.this, "repeating_scheduled", Toast.LENGTH_SHORT).show();

public class RepeatingAlarm extends BroadcastReceiver {

      @Override
      public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "repeating_received", Toast.LENGTH_LONG).show();

      }
    }

<receiver android:name=".RepeatingAlarm" android:process=":remote" /> 
```

我正在手机上测试。日历日志显示准确时间。我从来没有在接收器类中得到吐司。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:29:35.203

参考：[带有广播接收器的 Android 警报管理器](https://stackoverflow.com/a/7061752/801437)

```
Intent sender = new Intent("WhatEverYouWant");
PendingIntent senderPIntent = PendingIntent.getBroadcast(context, 0, sender, 0);
AlarmManager alarm = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
alarm.set(AlarmManager.RTC_WAKEUP, triggerTime, senderPIntent);

// In Manifest.xml file
<receiver android:name="com.package.YourOnReceiver">
    <intent-filter>
       <action android:name="WhatEverYouWant" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:40:13.827

实际上，事实证明我的代码很好。不知何故，警报启动并运行，因此由于某种未知原因（至少对我而言）无法呼叫接收器。当我创建一个新项目并测试该接收器工作正常时，我想通了。我也不得不停止那个警报。然后我回到我原来的项目并在不改变任何行的情况下启动了相同的警报，它工作正常。有没有人经历过这个？

# php - 将多维数组转换为数据库

> ID：12826658
> 
> 赞同：-1
> 
> 时间：2012-10-10T19:13:43.103
> 
> 标签：php, mysql, database, arrays

我正在尝试在 PHP 中转换一个巨大的配置数组，看起来像这样

```
$config['festival'] = 
array
(
    'title' => 'USF Tango Festival',
    'tableLayout' => array
    (
        'registration' => array
        (
            array('firstName','text'),
            array('lastName','text'),
            array('phone','text'),
            array('email','text'),
            array('hearAboutFestival','text'),
            array('danceAs','enum(\'Leader\', \'Follower\', \'Both\')'),
            array('student','tinyint(1)')
        ),
        'experience' => array
        (
            array('options','text'),
            array('lunchMeat','enum(\'Ham\',\'Turkey\',\'Vegetarian\')'),
            array('lunchBread','enum(\'White\',\'Wheat\')'),
            array('dinnerPref','enum(\'Chicken\',\'Beef\',\'Vegetarian\')')
        )
    ),
    'pageLayout' => array
    (
        'registration' => array
        (
            'jqueryRules' =>
<<<EOT
    'firstName': 'required',
    'lastName': 'required',
    'phone': {
        required: true,
        phoneUS: true
    },
    'email': {
        required: true,
        email: true
    },
    'danceAs': 'required',
    'partner': 'required',
    'partnerMatching': {
        required: function() {
            return $("input[name='partner']").val() == 0;
        }
    },
    'partnerName': {
        required: function() {
            return $("input[name='partner']").val() == 1;
        }
    }
EOT
    ,
        'inputs' => array
        (
            array
            (
                'type' => 'text',
                'name' => 'firstName',
                'fullName' => 'First Name',
                'required' => true,
                'separateDiv' => false
            ),
            array
            (
                'type' => 'text',
                'name' => 'lastName',
                'fullName' => 'Last Name',
                'required' => true,
                'separateDiv' => false
            ),
            array
            (
                'type' => 'text',
                'name' => 'phone',
                'fullName' => 'Phone number',
                'required' => true,
                'separateDiv' => false
            ),
            array
            (
                'type' => 'text',
                'name' => 'email',
                'fullName' => 'Email address',
                'required' => true,
                'separateDiv' => false
            ),
            array
            (
                'type' => 'text',               
                'name' => 'hearAboutFestival',
                'separateDiv' => false,
                'fullName' => 'How did you hear about the festival?',
                'required' => false
            ),
            array
            (
                'type' => 'select',
                'name' => 'danceAs',
                'fullName' => 'You dance as a...',
                'required' => true,
                'separateDiv' => false,
                'options' => array(array('leader','Leader'),array('follower','Follower'),array('both','Both'))
            ),
            array
            (
                'type' => 'checkbox',
                'name' => 'student',
                'value' => '1',
                'separateDiv' => false,
                'fullName' => 'I am a student',
                'required' => false
            )
        )
    ) 
```

和

```
'options' => array
(
    'busMilonga' => array
    (
        'price' => 20,
        'student' => false,
        'name' => 'Tango on the Town Bus milonga',
        'description' => 'A bus milonga!'
    ),
    'thursdayMilonga' => array
    (
        'price' => 10,
        'student' => false,
        'name' => 'Thursday Kickoff Milonga',
        'description' => 'The un-official kick off milonga!'
    ),
    'saturdayPass' => array
    (
        'price' => 90,
        'student' => true,
        'name' => 'Saturday pass',
        'description' => 'Includes all Saturday workshops and milongas'
    ),
    'sundayPass' => array
    (
        'price' => 80,
        'student' => true,
        'name' => 'Sunday pass',
        'description' => 'Includes all Sunday workshops, the jam session, and milonga'
    ),
    'milongaPass' => array
    (
        'price' => 70,
        'earlyBird' => 50, //array(50,60),
        'student' => true,
        'name' => 'Milonga Pass',
        'description' => 'Includes entrance to all night milongas'
    ),
    'dinnerPass' => array
    (
        'price' => 20,
        'student' => false,
        'name' => 'Dinner pass',
        'description' => 'Includes Saturday dinner'
    ),
    'lunchPass' => array
    (
        'price' => 10,
        'student' => false,
        'name' => 'Saturday lunch',
        'description' => 'Includes lunch on Saturday'
    )
),
'info' => array
(
    'instructors' => array('Instructors'),
    'hour' => array('10','11','12','01','02','03'),
    'min' => array('15','30','45','00'),
    'tod' => array('AM','PM'),
    'day' => array('Friday','Saturday','Sunday'),
    'level' => array('Beginner','Intermediate','Advanced'),
    'place' => array('REC 107','REC 033','REC 005'),
    'sessions' => array
    (
        3, // days
        array
        (
            'Friday', // day name
            3, // sessions on this day
            array
            (
                3, // workshops in session
                '1100AM' // time
            ), 
            array
            (
                3, 
                '0100PM' 
            ), 
            array
            (
                1,
                '0230PM'
            ) // 1,4
        ),
        array('Saturday', // 2,0
            3, // 2,1
            array(1,'1030AM'), //2,2
            array(3,'1145AM'), // 2,3
            array(3,'0145PM') // 2,4
        ),
        array
        (
            'Sunday', // 3,0
            3, // 3,1
            array(1,'1115AM'), // 3,2
            array(3,'1230PM'), // 3,3
            array(3,'0230PM') // 3,4
        )
    )
) 
```

入数据库。我想我可以制作一些表格，标题类似于 config.event.festival 但随后会变得很麻烦，因为我必须为数组下的每个数组创建一个表格......

我想避免使用 JSON 编码或序列化，这样我就可以保持数据的所有相关性和干净的外观，但除了保留一个大的配置文件而不是数据库之外，我不知道任何其他方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:28:12.643

假设您提供的示例代表整个数据结构的截断视图，这可以通过三个表来完成。

# 节日

*   节日ID
*   标题

# 布局

*   layout_id
*   节日ID
*   layout_type_id
*   类型
*   姓名
*   全名
*   必需的
*   单独的Div

# 布局类型

*   layout_type_id
*   姓名

节日表将保留有关活动页面的高级元数据。布局表将包含有关页面上每个元素的元数据。最后，layout_type 表将允许您识别应该在给定页面上的不同元素类型。

这应该让您开始并允许您根据需要进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:26:20.123

试试这个：

```
// To save multidimensional array into database:

$confIn = serialize($config);

// Save serialized config into database

// To get it from database, query the database and get serialized value

$confOut = serialize($confIn);

// Check if its ok

var_export($confOut); 
```

更多关于序列化函数：[序列化](http://php.net/manual/en/function.serialize.php)

这种方法的好处是您只能在数据库中使用一列。

希望这可以帮助！

# asp.net-mvc-3 - 如何在 MVC 3 Razor 中使用过滤器修改 HTTP 响应？

> ID：12826659
> 
> 赞同：0
> 
> 时间：2012-10-10T19:13:50.290
> 
> 标签：asp.net-mvc-3, http-response-codes, response.filter

**_Layout.cshtml 中的 HtML 部分**

```
<div id="header">
      <div class="logo"><a href="#"><img src="@Url.Content("~/!(IMAGEPATH)!/logo.png")" alt="" /></a></div>
      <div class="fb_like"><img src="@Url.Content("~/!(IMAGEPATH)!/fb_like_btn.png")" alt="" /></div>
      <div class="google_plus"><img src="@Url.Content("~/!(IMAGEPATH)!/google_plus.png")" alt="" /></div>
      <div class="header_rt">
        <ul>
          <li>Call us: 1500 258 789</li>
          <li><a href="#">Live chat</a></li>
          <li><a href="#">My Account</a></li>
          <li><a href="#">Sign in</a></li>
        </ul>
        <div class="search">
          <input type="text" value="Type your keyword..." class="srh_txt" />
          <input name="Submit" type="submit" value="Submit" class="srh_btn" />
        </div>
      </div>
    </div>
  <div id="main">
      @RenderBody()
 </div> 
```

**Index.cshtml 中的 Html 部分**

```
@{
   ViewBag.Title = "Home Page";
}
<div class="clr"></div>
<div id="banner">
<div id="slider"><img src="@Url.Content("~/!(IMAGEPATH)!/banner.jpg")" alt="" /></div>
<div class="banner_rt">
  <div class="adv1"><img src="@Url.Content("~/!(IMAGEPATH)!/adv1.jpg")" alt="" /></div>
  <div class="adv2"><img src="@Url.Content("~/!(IMAGEPATH)!/adv2.jpg")" alt="" /></div>
</div> 
```

**使用下面的代码我可以替换！（IMAGEPATH）！仅在 _Layout.cshtml 中**

```
 void Application_PostReleaseRequestState(object sender,EventArgs e)
   {
      if(string.CompareOrdinal(Response.ContentType,"text/html") == 0)
      {
         Response.Filter = new ResponseFilter(Response.Filter);
      }
   } 
```

但上述代码不会影响像**Index.cshtml**这样的子页面。**请告诉我ASP.NET MVC3**中的任何事件，例如 Classic ASP.NET 的旧**受保护覆盖​​ void OnPreInit(EventArgs e)**！！！

我想知道在 MVC3 中渲染之前哪个事件会影响所有子页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:46:52.317

Within **Base Controller**, write the bellow code

```
protected override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        var response = filterContext.HttpContext.Response;
        if (string.CompareOrdinal(response.ContentType, "text/html") == 0)
        {
            response.Filter = new ResponseFilter(response.Filter);
        }
        base.OnResultExecuting(filterContext);
    } 
```

# astyanax - does Astyanax support cql 3 prepared statements?

> ID：12826665
> 
> 赞同：2
> 
> 时间：2012-10-10T19:14:18.643
> 
> 标签：astyanax, cql3

I know that cassandra does but what about Astyanax? And does it escape single quotes in values? Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:38:41.133

Yes it does,

You can see an example here [https://github.com/Netflix/astyanax/wiki/Cql-and-cql3](https://github.com/Netflix/astyanax/wiki/Cql-and-cql3)

```
final String INSERT_STATEMENT = "INSERT INTO employees (empID, deptID, first_name,   last_name) VALUES (?, ?, ?, ?);";

result = keyspace
    .prepareQuery(CQL3_CF)
        .withCql(INSERT_STATEMENT)
    .asPreparedStatement()
        .withIntegerValue(222)
        .withIntegerValue(333)
        .withStringValue("Eric")
        .withStringValue("Cartman")
    .execute(); 
```

# asp.net-mvc - Entity Framework - Reverse Engineer Code First - Overwriting Changes

> ID：12826673
> 
> 赞同：3
> 
> 时间：2012-10-10T19:14:42.090
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

Im using the EF Power Tools to **Reverse Engineer** an existing Database. This is fine. Under the EDMX Database-1st Route I would create partial classes for any overrides like Data Annotations, for e.g. here, **LedgerPeriod** being the original EntityObject:

```
[MetadataType(typeof(LedgerPeriodMetaData))]
public partial class LedgerPeriod
{
    public class LedgerPeriodMetaData
    {

        [Required(ErrorMessage = "Period Start Date Required")]
        [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
        [DataType(DataType.Date)]
        public object PeriodDateFrom { get; set; }

        [Required(ErrorMessage = "Period End Date Required")]
        [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
        [DataType(DataType.Date)]
        public object PeriodDateTo { get; set; }

    }
} 
```

This is fine. Now do I use the same approach for **Code First Reverse Engineer** or are there any custom settings whereby if you have to run the power tools multiple times, because say I added a new Table to the Database, it wouldn't overwrite any changes to the existing Models created previously.

This would ultimately mean I can make changes to the actual model classes themselves, instead of creating partial classes.

Reference to the EF Powertools can be found here:

[http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx](http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T19:34:26.763

Code First 并没有正式支持逆向工程场景，这就是它被称为 Code First 的原因。电动工具很好，但正如你所说，它们会覆盖东西。EF Code First 旨在让您对模型本身进行更改，而不是对部分和元数据进行更改（尽管您仍然可以根据需要使用它们）。

您可以使用 EF Power Tools 的自定义逆向工程师模板功能，然后修改 T4 模板以将部分声明添加到生成的类，或者您可以添加代码来测试特定实体并根据需要进行修改。

但是，实际上，您不需要这样做。将实体传递给视图被认为是糟糕的设计，这是将这些属性添加到模型的唯一原因。最重要的是，您强制视图具有与数据模型相同的要求，这也是一个糟糕的选择。

相反，您应该在视图中使用专用视图模型，并将数据属性放在视图模型上。

# javascript - 使用javascript模拟用户在gridview中单击udate按钮

> ID：12826675
> 
> 赞同：0
> 
> 时间：2012-10-10T19:14:49.283
> 
> 标签：javascript, asp.net, gridview, custom-controls

我有一个自定义 Web 控件 *.ascx 文件。我正在尝试使用 java 脚本模拟用户单击 gridview 中的更新按钮。我的 .ascx 页面顶部有这个脚本：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript">

        $(document).keypress(function (e) {
            if (e.which == 13) {
                document.getElementById("LinkButton1").click();
            }
        });

    </script> 
```

“LinkBut​​ton1”位于此模板字段中：

```
 <asp:TemplateField ShowHeader="False">
                      <EditItemTemplate>
                          <asp:LinkButton ID="LinkButton1" runat="server" onKeyPress="" UseSubmitBehavior="True" CausesValidation="True" 
                              CommandName="Update" TabIndex="13" Text="Update"  ></asp:LinkButton>
                          &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                              CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                      </EditItemTemplate>
                      <ItemTemplate> 
```

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:22:57.400

你可以试试

```
document.getElementById('<%# ((GridViewRow)Container).FindControl("LinkButton2").ClientID %>').click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:26:28.040

这是行不通的，因为单击仅适用于附加事件，而不适用于链接按钮呈现为的锚点。

你可以用这个..

```
$(document).keypress(function (e) {
        if (e.which == 13) {
    simulate(document.getElementById("LinkButton1"), "click");

        }
    }); 
```

函数模拟（元素，事件名称）{ var options = extend(defaultOptions, arguments[2] || {}); var oEvent, eventType = null;

```
for (var name in eventMatchers) {
    if (eventMatchers[name].test(eventName)) { eventType = name; break; }
}

if (!eventType)
    throw new SyntaxError('Only HTMLEvents and MouseEvents interfaces are supported');

if (document.createEvent) {
    oEvent = document.createEvent(eventType);
    if (eventType == 'HTMLEvents') {
        oEvent.initEvent(eventName, options.bubbles, options.cancelable);
    }
    else {
        oEvent.initMouseEvent(eventName, options.bubbles, options.cancelable, document.defaultView,
          options.button, options.pointerX, options.pointerY, options.pointerX, options.pointerY,
          options.ctrlKey, options.altKey, options.shiftKey, options.metaKey, options.button, element);
    }
    element.dispatchEvent(oEvent);
}
else {
    options.clientX = options.pointerX;
    options.clientY = options.pointerY;
    var evt = document.createEventObject();
    oEvent = extend(evt, options);
    element.fireEvent('on' + eventName, oEvent);
}
return element; 
```

}

function extend(destination, source) { for (var property in source) destination[property] = source[property]; 返回目的地；}

var eventMatchers = { 'HTMLEvents': /^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/, 'MouseEvents': /^(?:click |dblclick|mouse(?:down|up|over|move|out))$/ };

var defaultOptions = { pointerX: 0, pointerY: 0, button: 0, ctrlKey: false, altKey: false, shiftKey: false, metaKey: false, bubbles: true, cancelable: true };

# templates - Is it possible to create a custom widget in Amazon Webstore?

> ID：12826678
> 
> 赞同：0
> 
> 时间：2012-10-10T19:15:02.937
> 
> 标签：templates, amazon, webstore

I need to create a form, which on submission, filters search results based on certain keywords.

The keywords I'm working with a year, make, model (it's a car part site). If I use Amazon's webstore search function. Make and Model are parameters that are able to be used because most of the products have make and model in the product name, which isn't really the most efficient to say the least.

I need to be able to query the product database, but it's just not how Amazon Webstore, I assume.

Does anybody have an example of this that I can look at? Does anyone develop custom templates in Amazon Webstore so I can ask questions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:50:58.890

[从Amazon Webstore 论坛](https://getsatisfaction.com/amazonwebstore)开始，那里有专门的员工、文档和帮助人员以及更多解决方案。

# ios - 从 iOS Rails 3 服务器和 Omniauth 验证用户

> ID：12826679
> 
> 赞同：6
> 
> 时间：2012-10-10T19:15:18.987
> 
> 标签：ios, facebook, ruby-on-rails-3, omniauth

我们的 Rails 3 应用程序使用 facebook-omniauth，允许用户通过 facebook 进行身份验证。

尽可能多地使用基于 Web 的身份验证系统会很好，所以我尝试按照[这个 SO 问题](https://stackoverflow.com/questions/7376878/how-to-authenticate-users-from-an-ios-app-against-a-rails-3-application-using-om)的答案（没有被否决的那个），但我无法让它工作。

答案的要点是：

> omn​​iauth-facebook 将使用 access_token 参数毫无问题地处理对回调端点的请求。简单的 ：）

因此，为了测试这一点，在我的浏览器中，我发出以下请求：

```
/users/auth/facebook_api/callback?access_token=BAAB... 
```

但在我的服务器日志中，我看到：

```
(facebook) Callback phase initiated.
(facebook) Authentication failure! invalid_credentials: OAuth2::Error, : 
{"error":{"message":"Missing authorization code","type":"OAuthException","code":1}} 
```

我无法弄清楚我做错了什么。事实上，我试图通过浏览器来测试搞砸了一些事情吗？关于如何为我的 ios 应用程序重用基于 www 的身份验证逻辑的任何其他想法？

**更新：** 我不确定，但我遵循[本指南](http://www.wealsodocookies.com/posts/how-to-create-multiple-facebook-omniauth-strategies-for-the-same-application)是为了拥有多种 facebook omniauth 策略，一种用于 www，另一种用于移动设备。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T00:00:26.600

我从来没有找到符合我最初要求的解决方案，但我是这样解决的：获取您在 iPhone 上获得的访问令牌并将其发送到您的服务器并手动执行登录。

```
def facebook_login
  graph = Koala::Facebook::API.new(params[:user][:fb_access_token])
  profile = graph.get_object('me')
  omniauth = build_omniauth_hash(profile)

  @user = User.find_or_create_for_facebook_oauth(omniauth)
end 
```

在 www 上，我们已经有一个名为 的方法`find_or_create_for_facebook_oauth`，它从 Omniauth 获取结果，要么找到用户，要么创建一个新用户。为了将这种方法用于移动设备，我必须手动构建一个类似的结构，以便可以将其作为参数传递。

```
def build_omniauth_hash(profile)
  struct = OpenStruct.new
  struct.uid = profile['id']
  struct.info = OpenStruct.new
  struct.info.email = profile['email']
  struct.info.image = "http://graph.facebook.com/#{profile['id']}/picture?type=square"
  struct.info.first_name = profile['first_name']
  struct.info.last_name = profile['last_name']
  struct.info.bio = profile['bio']
  struct.info.hometown = profile['hometown']['name'] if profile['hometown']
  struct.info.location = profile['location']['name'] if profile['location']
  struct
end 
```

# python - 如何使用 Python 的 gdata 模块获取所有 YouTube 评论？

> ID：12826680
> 
> 赞同：5
> 
> 时间：2012-10-10T19:15:23.647
> 
> 标签：python, youtube-api, gdata

希望从给定视频中获取所有评论，而不是一次只看一页。

```
from gdata import youtube as yt
from gdata.youtube import service as yts

client = yts.YouTubeService()
client.ClientLogin(username, pwd) #the pwd might need to be application specific fyi

comments = client.GetYouTubeVideoComments(video_id='the_id')
a_comment = comments.entry[0] 
```

上面的代码可以让你抓取一条评论，可能是最近的评论，但我正在寻找一种方法来一次抓取*所有*评论。Python的`gdata`模块可以做到这一点吗？

* * *

[用于评论](https://developers.google.com/youtube/2.0/developers_guide_protocol_comments)的 Youtube API 文档、评论[源文档](http://gdata-python-client.googlecode.com/hg/pydocs/gdata.youtube.html#YouTubeVideoCommentFeed)和 Python API[文档](https://developers.google.com/youtube/1.0/developers_guide_python#Comments)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T20:38:16.493

以下实现了您使用[Python YouTube API](https://gdata-python-client.googlecode.com/hg/pydocs/gdata.youtube.html)的要求：

```
from gdata.youtube import service

USERNAME = 'username@gmail.com'
PASSWORD = 'a_very_long_password'
VIDEO_ID = 'wf_IIbT8HGk'

def comments_generator(client, video_id):
    comment_feed = client.GetYouTubeVideoCommentFeed(video_id=video_id)
    while comment_feed is not None:
        for comment in comment_feed.entry:
             yield comment
        next_link = comment_feed.GetNextLink()
        if next_link is None:
             comment_feed = None
        else:
             comment_feed = client.GetYouTubeVideoCommentFeed(next_link.href)

client = service.YouTubeService()
client.ClientLogin(USERNAME, PASSWORD)

for comment in comments_generator(client, VIDEO_ID):
    author_name = comment.author[0].name.text
    text = comment.content.text
    print("{}: {}".format(author_name, text)) 
```

不幸的是，API 将可检索的条目数限制为**1000**。这是我尝试使用手工制作的`GetYouTubeVideoCommentFeed`URL 参数调整版本时遇到的错误：

```
gdata.service.RequestError: {'status': 400, 'body': 'You cannot request beyond item 1000.', 'reason': 'Bad Request'} 
```

请注意，同样的原则应该适用于检索 API 的其他提要中的条目。

如果你想手工制作`GetYouTubeVideoCommentFeed`URL 参数，它的格式是：

```
'https://gdata.youtube.com/feeds/api/videos/{video_id}/comments?start-index={sta‌​rt_index}&max-results={max_results}' 
```

适用以下限制：`start-index <= 1000`和`max-results <= 50`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T20:24:50.050

我现在唯一的解决方案，但它没有使用 API，当有几千条评论时会变慢。

```
import bs4, re, urllib2
#grab the page source for vide
data = urllib2.urlopen(r'http://www.youtube.com/all_comments?v=video_id') #example XhFtHW4YB7M
#pull out comments
soup = bs4.BeautifulSoup(data)
cmnts = soup.findAll(attrs={'class': 'comment yt-tile-default'})
#do something with them, ie count them
print len(cmnts) 
```

请注意，由于 'class' 是一个内置的 python 名称，因此您不能通过正则表达式或 lambdas 定期搜索 'startwith' [，](https://stackoverflow.com/a/2830550/541208)因为您使用的是 dict，而不是常规参数。由于 BeautifulSoup，它也变得相当缓慢，但它需要被使用，因为`etree`并且由于`minidom`某种原因找不到匹配的标签。即使在`prettyfying()`与`bs4`

# android - How to receive a byte array and convert it to image in Android?

> ID：12826681
> 
> 赞同：-1
> 
> 时间：2012-10-10T19:15:29.050
> 
> 标签：android, sockets

I have used:

```
InputStream in;
Bitmap bmp=BitmapFactory.decodeStream(in); 
```

but the process waits for a long time and nothing happens. On the server side, i have the image converted into byte[].

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:22:04.460

我认为这段代码对你有用：

```
public Bitmap DownloadImage(String url)
{
    HttpClient client = new DefaultHttpClient();
    HttpResponse httpResponse;
    Bitmap bmp = null;

    try{
       httpResponse = client.execute(new HttpGet(url));
       responseCode = httpResponse.getStatusLine().getStatusCode();

       HttpEntity entity = httpResponse.getEntity();

       if (entity != null)
       {
           InputStream in = entity.getContent();
           bmp = BitmapFactory.decodeStream(in);
           in.close();
       }
    } catch (ClientProtocolException e)  {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    } catch (IOException e) {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    }   
    return bmp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:22:12.040

尝试这种方式转换为位图。

```
 try {
     Bitmap bitmap=null;
         URL imageUrl = new URL(url);
     HttpURLConnection conn =
     (HttpURLConnection)imageUrl.openConnection();
     conn.setConnectTimeout(30000);
     conn.setReadTimeout(30000);
     conn.setInstanceFollowRedirects(true);
     InputStream is=conn.getInputStream();
     InputStream is;
     OutputStream os = new FileOutputStream(f);

     bitmap = decodeFile(f);
     return bitmap;
     } catch (Exception ex){
     ex.printStackTrace();
     return null;
     }

// decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE
                        || height_tmp / 2 < REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale *= 2;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {
        }
        return null;
    } 
```

# c# - 在属性网格中隐藏可扩展属性的省略号 (...) 按钮，例如字体属性的“...”按钮

> ID：12826684
> 
> 赞同：2
> 
> 时间：2012-10-10T19:15:44.177
> 
> 标签：c#, winforms, custom-controls, propertygrid, design-time

我在自定义控件中添加了一个新属性作为可扩展属性，例如属性网格中的字体属性。在 Windows 窗体应用程序项目中使用我的自定义控件后，我在属性网格中看到一个省略号 (...) 按钮，例如字体属性的“...”按钮。（有关更多信息，请参见下图。）

![我的自定义控件属性之一](../Images/3f271f911ec86d42636e69df68de3cd2.png)

现在，我想为我的新可扩展属性隐藏省略号 (...) 按钮。

可扩展的属性代码是：

```
[DisplayName("Floors Information")]
[Description("Floors Informationnnnnnnnnnnnnnnn")]
[DefaultProperty("TitleText")]
[DesignerCategory("Component")]
public class FloorsInformation : DockContainerItem
{
    private SimilarFloorsInformation similarFloorsInformation = new SimilarFloorsInformation();

    public FloorsInformation()
    {

    }

    [Category("Data")]
    [DisplayName("Similar Floors Panel")]
    [Description("Similar Floors Panellllllllllllllllllll")]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    [Editor(typeof(ItemsCollectionEditor), typeof(UITypeEditor))]
    //[TypeConverter(typeof(ExpandableObjectConverter))]
    //[TypeConverter(typeof(SimilarFloorsInformationTypeConverter))]
    public SimilarFloorsInformation SimilarFloorsInfo
    {
        get
        {
            return similarFloorsInformation;
        }
    }
}

[DisplayName("Similar Floors Information")]
[Description("Similar Floors Informationnnnnnnnnnnnnnnn")]
[DefaultProperty("Text")]
[DesignerCategory("Component")]
[TypeConverter(typeof(SimilarFloorsInformationTypeConverter))]
//[TypeConverter(typeof(ExpandableObjectConverter))]
public class SimilarFloorsInformation : ExpandablePanel
{
    private Color canvasColor = SystemColors.Control;
    private eCollapseDirection collapseDirection = eCollapseDirection.LeftToRight;
    private eDotNetBarStyle colorSchemeStyle = eDotNetBarStyle.StyleManagerControlled;
    private DockStyle dock = DockStyle.Right;
    private eTitleButtonAlignment expandButtonAlignment = eTitleButtonAlignment.Left;
    private bool expanded = false;
    private bool markupUsesStyleAlignment = true;
    private Size size = new Size(30, 177);

    public SimilarFloorsInformation()
    {

    }
}

public class SimilarFloorsInformationTypeConverter : ExpandableObjectConverter//TypeConverter
{
    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        if (destinationType == typeof(SimilarFloorsInformation))
        {
            return true;
        }
        return base.CanConvertTo(context, destinationType);
    }

    public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(String) && value is SimilarFloorsInformation)
        {
            SimilarFloorsInformation similarFloorsInformation = (SimilarFloorsInformation)value;
            return similarFloorsInformation.TitleText;
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }

    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
        {
            return true;
        }
        return base.CanConvertFrom(context, sourceType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, object value)
    {
        if (value is string)
        {
            SimilarFloorsInformation similarFloorsInformation = new SimilarFloorsInformation();
            similarFloorsInformation.TitleText = (string)value;
            return similarFloorsInformation;
        }
        return base.ConvertFrom(context, culture, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T20:51:38.177

您应该实现自己的类派生[`UITypeEditor`](http://msdn.microsoft.com/en-us/library/system.drawing.design.uitypeeditor.aspx)并覆盖[`GetEditStyle`](http://msdn.microsoft.com/en-us/library/xtsths3h.aspx)方法，如下所示：

```
public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
{
    return UITypeEditorEditStyle.None;
} 
```

然后使用[`EditorAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorattribute.aspx)：

```
[Editor(typeof(YourTypeEditor), typeof(UITypeEditor))] 
```

## 更新1：

好。我刚刚意识到你已经在申请`EditorAttribute`房产了：

```
[Editor(typeof(ItemsCollectionEditor), typeof(UITypeEditor))]
public SimilarFloorsInformation SimilarFloorsInfo
{
    get
    {
        return similarFloorsInformation;
    }
} 
```

所以你应该覆盖`GetEditStyle`in `ItemsCollectionEditor`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:22:51.050

我根据 Nikolay Khil 的回答解决了我的问题。省略号 (...) 按钮显示为我已应用于自定义控件的“ **SimilarFloorsInfo** ”属性的以下代码行（属性）：

```
[Editor(typeof(ItemsCollectionEditor), typeof(UITypeEditor))] 
```

所以，这行代码必须删除或注释掉。现在，在属性网格中没有为我的属性显示省略号 (...) 按钮。

# c - 我想过滤一个范围内的值的数字流

> ID：12826688
> 
> 赞同：0
> 
> 时间：2012-10-10T19:15:51.620
> 
> 标签：c, string

我有一个关键的代码部分，它检查许多字符串中的每个字符，以确保它在可接受的范围内。

有什么方法可以在不分支的情况下执行这种过滤？

```
...
int i, c;
int sl = strnlen(s, 1023);
for( i = 0; i < sl; i++ ) {
    c = s[i];
    if( c < 68 || c > 88 )
        return E_INVALID;
}
if( 0 == i )
    return E_INVALID;
... do something with s ... 
```

我在想某种使用按位运算的过滤可能是可能的，但实际上我看不出如何使这项工作。按位与 95 将范围缩小到 0-31,64-95。如果不引入 if 测试，我无法看到如何进行，从而提出跳过分支空白的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:40:36.153

假设你的字符串真的是无符号字符，而不是整数，你可以有一个 256 字节的不可接受字符的查找表，这将使你的测试 if(table[s[i]]) { return E_INVALID; }

但是，如果您试图加速关键功能，您应该做其他事情以获得更大的回报。首先，您可以完全跳过 strnlen，并在 0 字符上终止循环。仅此一项可能会让您获得 2 倍。接下来将循环展开 10 倍左右，这应该会获得另一个 2 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:16:49.850

可以使用按位运算进行过滤。尝试...

```
c & 68 & ~88; 
```

对于超出边界的值，这应该始终返回零，对于边界内的值，应该始终返回非零值。

订单也是必须的.​​..

```
CHAR & LowerBound & ~UpperBound 
```

翻转界限会导致错误的行为

# oracle - Top N% students oracle

> ID：12826689
> 
> 赞同：0
> 
> 时间：2012-10-10T19:15:59.033
> 
> 标签：oracle, sqlplus

> **Possible Duplicate:**
> [Top n percent top n%](https://stackoverflow.com/questions/12825196/top-n-percent-top-n)

```
 SQL> select ssn, gpa from (select ssn, gpa,
 rank() over(partition by ssn order by gpa desc) as rank,
 count(*) over(partition by ssn) as no_students

 SQL> from students_gpa)

  Error
                 * 
```

ERROR at line 1: ORA-00936: missing expression

I am trying to get the top 5% of students with a GPA of 4\. Since I have two students with a GPA of 4, I want to report both students and not just one one 1 student who occupies the first row. Any help will be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:26:14.457

您似乎正试图将具有多个空行的 SQL 语句复制并粘贴到 SQL*Plus 中。如果是这样，您要么需要在复制和粘贴之前删除空行，要么需要`set sqlblanklines on`在粘贴包含空行的查询之前在 SQL*Plus 中运行 SQL*Plus 命令。

# c# - How do I convert a byte array represented as a string into a byte array?

> ID：12826692
> 
> 赞同：0
> 
> 时间：2012-10-10T19:16:11.253
> 
> 标签：c#, .net

In SQL Server, a varbinary(max) looks like '0xFE12CE34AB27' when looking at query results in a grid result within Management Studio. How can I copy a value looking like that and convert it back into a byte array via C#?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:20:08.770

您看到的`'0xFE12CE34AB27'`字符串是 Mgmt Studio 的工件。

您的数据已经是一个字节数组，不要做任何事情。

# .net - .Net 的 RestfulRouting 更改默认“id”参数

> ID：12826697
> 
> 赞同：3
> 
> 时间：2012-10-10T19:16:23.383
> 
> 标签：.net, asp.net-mvc

非常基本的问题，但我似乎无法在文档中找到它。我一直在将[RestfulRouting](http://restfulrouting.com)（通过 nuget）集成到 Mvc 4 应用程序中，但在某些情况下，调整参数会很好，要么更改名称，要么在控制器操作中包含多个参数。

例如

```
/resource/:id/:slug

public ActionResult Show(int id, string slug) { return View(); } 
```

或者

```
/resource/:custom_param_name

public ActionResult Show(string custom_param_name) { return View(); } 
```

是否有涵盖此场景的示例或文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:32:10.003

如果我理解正确，您正在尝试[按名称而不是 id 路由。](http://danpesolutions.blogspot.co.il/2012/10/route-by-name-not-by-id.html)使用 RestfulRouting。

我不确定这是否 100% 可能，但您可以尝试**Create Custom Routes**：

*提供了两种额外的方法，因此您可以在需要时将自定义路由添加到路由集。Map 是一种可链接的方法，允许您添加标准映射。Route 是一种允许您将自定义路由添加到路由集的方法。*

## 例如

```
Map("posts/{year}/{slug}")
  .To<PostsController>(x => x.Post(-1, ""))
  .Constrain("slug", @"\w+")
  .Constrain("year", @"\d+");
Route(new Route("posts/{action}", 
  new RouteValueDictionary(new { controller = "posts" }), 
  new MvcRouteHandler()); 
```

* * *

## 或者

```
Map("resource/{custom_param}")
  .To<ResourcesController>(x => x.Resource(-1, ""))
  .Constrain("custom_param", @"\w+");
Route(new Route("resource/custom", 
  new RouteValueDictionary(new { controller = "resource" }), 
  new MvcRouteHandler()); 
```

所以你可以使用：

```
public ActionResult Custom(string custom_param) { return View(); } 
```

## 如何使用它 ？

```
public class Routes : RouteSet
{
    public override void Map(Mapper map)
    {
        map.Root<HomeController>(x => x.Show());
        map.Path("test/{id}").To<TestController>(x => x.Test()).Constrain("id", @"\d+");
        map.Resource<SessionsController>();
        map.Resources<BlogsController>(blogs =>
        {
            blogs.As("weblogs");
            blogs.Only("index", "show");
            blogs.Collection(x => {
                x.Get("latest");
                x.Post("someaction");
            );
            blogs.Member(x => x.Put("move"));

            blogs.Resources<PostsController>(posts =>
            {
                posts.Except("create", "update", "destroy");
                posts.Resources<CommentsController>(c => c.Except("destroy"));
            });
        });
    }
}

public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        ViewEngines.Engines.Clear();
        ViewEngines.Engines.Add(new RestfulRoutingViewEngine());

        RouteTable.Routes.MapRoutes<Routes>();
    }
} 
```

*如何使用：[用于 ASP .NET MVC 的 Restful Routing](https://github.com/stevehodgkiss/restful-routing)*

*完整指南可以在这里找到：[RestfulRouting](http://stevehodgkiss.github.com/restful-routing/)*

# assembly - MIPS Overflow/Programming

> ID：12826699
> 
> 赞同：2
> 
> 时间：2012-10-10T19:16:26.460
> 
> 标签：assembly, mips

I am new to programming in MIPS and have been having trouble with one problem. I am working to solve the equation f = 5 - a[3] + g * h

```
For:g=3,
    h=5, and 
    a[0]= 10, a[1]= 8, a[2]= 6, a[3]=4 .... a[4]=2 
```

Here is the code I already have:

```
 .data
    g:      .word   3   #
    h:      .word   5
    a:      .word   10,8,6,4,2,0
    f:      .space  4
    mes1:   .ascii  "Problem 3:"
    newL:   .ascii  "\n"
            .text

    main:
            lw  $t0, g      #t0= g
            lw  $t1, h      #t1= h
            mul $t2, $t0, $t1   #t2= g *h

            add     $t3, $zero, 4      #t3= 4 
            mul     $t4, $t0, $t3   #t4= 3 * 4
            lw      $t5, 0($t4)

            add     $t5, $t5, $t2   #t5= a[3] + (g * h)
            sub     $t5, $t0, $t5   #t5= 5 - [a[3] + g * h]
            sw      $t5, f            #f= t5

            la  $a0, mes1       #loads addr for label in a0
            li  $v0, 4          #prepares to output as a string
            syscall            #prints label

            la  $a1, f          #loads addr for a in a1 
            li  $v0, 1          #prepares to output as an int
            syscall            #prints a

            li  $v0, 10     #call to terminate program
            syscall            #terminates program 
```

When run with spim I get the following output:

```
 spim -file problem3.asm
    SPIM Version 8.0 of January 8, 2010
    Copyright 1990-2010, James R. Larus.
    All Rights Reserved.
    See the file README for a full copyright notice.
    Loaded: /usr/lib/spim/exceptions.s
    Exception occurred at PC=0x00400040
      Bad address in data/stack read: 0x0000000c
      Exception 7  [Bad data address]  occurred and ignored
    Problem 3:
    268501028 
```

I currently get a bad data address exception and a random large number as output. It would be great if someone from SO could tell me what I am doing wrong, why I am getting junk output and what I need to change. Thanks in advance

# c# - 时间：2019-01-02 标签：c#web browser insert text into textarea

> ID：12826702
> 
> 赞同：1
> 
> 时间：2012-10-10T19:17:10.230
> 
> 标签：c#, insert, textarea

如何使用 .net 网络浏览器将文本插入 textarea？我尝试了很多方法，但都没有奏效

这是我的尝试

```
HtmlElement element4 = WebBrowser1.Document.GetElementById("description");
element4.SetAttribute("value", "text"); 
```

但正如我所说，他们都没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:19:36.623

就像是：

```
element4.InnerText = "text"; 
```

假设`GetElementById`工作并且您在 中具有有效的参考`element4`，那么应该这样做。

# java - 将 path2d 添加到 jpanel

> ID：12826705
> 
> 赞同：0
> 
> 时间：2012-10-10T19:17:23.650
> 
> 标签：java, swing, awt, java-2d, custom-painting

我对这个非常微不足道的事情有很多问题。我想获取一个 path2d 对象并将其添加到 jpanel 并在我的 gui 中显示它。我能得到一些关于我做错了什么的指导吗？我在这里和谷歌使用了搜索，找不到任何有用的东西，所以如果之前有人问过这个问题，请原谅我。

伪代码：传入的面板是根面板

```
public void stuff(Path2D path, JPanel panel){
    JPanel inside = new JPanel();
    Graphics g2d = (Graphics2D) inside.getGraphics();

    g.draw(path);
    panel.add(inside);
} 
```

我可能对正在发生的事情有一个非常糟糕的基本误解。一点指导真的很有帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:23:13.077

```
Graphics g2d = (Graphics2D) inside.getGraphics(); 
```

除非`getGraphics()`在 a上调​​用`BufferedImage`，否则将在下一次绘制时透支。否则，当被告知在`paintComponent(Graphics)`.

有关详细信息，请参阅[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)。

# java - PreparedStatement multiple replacements without a comma separator

> ID：12826706
> 
> 赞同：0
> 
> 时间：2012-10-10T19:17:28.690
> 
> 标签：java, sql, prepared-statement

I have the following PreparedStatement:

```
 PreparedStatement statement = conn.prepareStatement("Select * from foo 
          where foo.age ? ? AND foo.children ? ?") 
```

Now to explain what I am looking to do, because I am lazy and don't like writing multiple queries. I want the statement to look like the following when finished:

```
Select * from foo where foo.age >= 42 AND foo.children <= 3 
```

OR

```
Select * from foo where foo.age = 42 AND foo.children = 3 
```

If it isn't clear I want to be able to substitute multiple tokens in a row, where the first token happens to be a qualifier (equals,greater,less,etc) and the token following it happens to be a literal (3,17,"Steve",etc). My question is is this possible and if so how can this be accomplished?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:20:05.910

你不能这样做，因为`?`它不代表一个*token*，而是一个*value*。显然，一些标记（即文字）表示值，但即使对于这些，`?`直接表示值本身，而不是文字也表示值。（这是设计的一个有意元素，因为参数化查询的真正目的是防止参数“泄漏”并被解释为单个值以外的东西。）

* * *

**编辑补充：**在我工作的地方，我们有一个自定义框架，它围绕着 JDBC 并处理事务等，所以我们*通常*不必直接处理`PreparedStatement`。该框架有一个看起来像这样的方法：

```
public <T> Iterator<T> executeQuery(ConverterFromResultSetToT<T> converter,
                                     String query, Map<String, Object> params)
{
    // . . . modify query, replacing any instances of $!{paramKey} with the
    //       corresponding value from params -- this allows arbitrary SQL code
    //       to be injected, in the rare cases that that's necessary

    // . . . modify query, replacing any instances of ${paramKey} with '?' and
    //       adding the corresponding value from params to an array -- we use
    //       this much more often

    // . . . create PreparedStatement with the resulting query

    // . . . set parameters of PreparedStatement from aforemented array

    // . . . run PreparedStatement; wrap result in an Iterator<T>; and return
} 
```

但是，如果您希望做很多这样的事情，我只会推荐这种事情。我们在这个框架上付出了很多努力，它非常有用，但它也有很多代码。

* * *

值得注意的是，尽管文档可能暗示，创建 a 的成本`PreparedStatement`并不是很高。除非您确实多次运行相同的查询，否则`PreparedStatement`每次都重新创建它并不是什么大问题。因此，只要您愿意为此编写自己的代码，您实际上并不需要对插入式运算符的内置支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:19:01.687

这是无法做到的。a 中的参数`PreparedSatement`只能是值，不能是运算符、表名等。

现在，对于上面的特定查询，您可以执行以下操作：

```
select * from foo where age > ? and age < ? 
```

然后有了`42`，`400`你得到`age>=42`了年，有了`42`，`42`你得到了`age = 42`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T19:23:33.830

您可以有一个解决方法：

```
String query = "Select * from foo where foo.age @ @ AND foo.children @ @";

//write code here to manipulate your query string using
query = query.replaceFirst("@", "=");
query = query.replaceFirst("@", "42");
query = query.replaceFirst("@", "=");
query = query.replaceFirst("@", "3");

Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery(query ); 
```

**如果您决定`replaceFirst`按上述方式使用，请注意您正在分配 value`from left to right`**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T19:34:53.593

```
String firstOperator = ">="
String secondOperator = "<="

PreparedStatement statement = conn.prepareStatement("Select * from foo 
          where foo.age "+firstOperator+" ? AND foo.children "+secondOperator+" ?");

statement.setInt(1,42);
statement.setInt(2,3); 
```

无论如何，我认为这不是一件非常优雅的事情。“不写多个查询”似乎不是一个明智的设计目标。

# javascript - jQuery action only once / custom URLs

> ID：12826707
> 
> 赞同：0
> 
> 时间：2012-10-10T19:17:41.117
> 
> 标签：javascript, jquery

I have a very basic jQuery script that slides a title from bottom to top after the page loads. The problem I'm having now is that I need to make this title to only slide if the user is on the 'main page'. If the user then clicks on any sub-pages I need the title to remain to the top of the page.

Example: wordpress website with a few pages on which I have galleries. When a user enters a page -> animate title. When the user is browsing the gallery -> static title.

This is the jQuery script:

```
jQuery(document).ready(function () {
jQuery(".animate").addClass("move"); 
}); 
```

You can see the website in question [here](http://www.noahd.net/demo-upwall/residential/rooftop-garden/).

// **later edit:** Thanks everyone for helping! I forgot to mention that I have multiple URLs, there are multiple pages. Is there a way I can get the "current URL" of the page and then append to it the extra bit which will always be the same i.e. `/?pid=xx` ?

Example: I need to animate the title on pages with this format:

`mywebpage/custom_name/`

Then, on pages with this format, I need to keep the title static:

`mywebpage/custom_name/?pid=xx`

Following the answers bellow I made this script:

```
if(window.location.href == 'http://www.noahd.net/demo-upwall/residential/rooftop-garden/'){
    jQuery(document).ready(function () {
        jQuery(".animate").addClass("move"); 
    });
} else {
    jQuery(document).ready(function () {
        jQuery(".portfolio-title-wrap").removeClass("animate").addClass("top"); 
    }); 
} 
```

This script works only for the `/residential/rooftop-garden/` page. Under `residential` I have another 10 pages. And then I have another 6 pages starting from root, like `/commercial/` or `/objects` which also have 6-10 sub-pages.

How can I adapt the above script to work on those pages and sub-pages but not on the sub-sub-pages?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:23:01.370

您可以根据 url 决定页面的行为。

代码：

```
if(window.location.href== mainapplicationurl){

    // slide code
}
else{
      // put title on top

} 
```

编辑问题后。您可以根据 url 中“/”的计数来决定页面（仅当 url 格式一致时才有效）。

```
var count = window.location.href.split("/").length;
jQuery(document).ready(function () {
   if( count < 7 ){        
        jQuery(".animate").addClass("move"); 
   } else {        
        jQuery(".portfolio-title-wrap").removeClass("animate").addClass("top"); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:27:21.407

Wordpress 使用独特的类标记页面，因此您可以像这样定位特定页面：

```
jQuery(document).ready(function () {
    jQuery(".page-id-32 .animate").addClass("move"); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:29:29.133

你可以用不同的方式来做。例如，您只能在使用 wordpress 条件的特定页面上加载幻灯片标题内容。

或者你可以从客户端做你想做的事。例如，您的页面有不同的标题标签，而主页有 - Upwall Studio，您可以检查：

```
if ($('title').text() === 'Upwall Studio') {
  //slide youre title here
} 
```

或者您可以通过 window.location.href 检查用户是否在特定 url 上：

```
if (window.location.href === 'http://www.noahd.net/demo-upwall/') {
  //slide youre title here
} 
```

# ruby-on-rails - Testing cancan abilities and getting MassAssignmentSecurity::Error

> ID：12826708
> 
> 赞同：0
> 
> 时间：2012-10-10T19:17:45.000
> 
> 标签：ruby-on-rails, rspec, factory-bot, cancan

I have implemented cancan and would like to test abilities as recommended on the [cancan wiki](https://github.com/ryanb/cancan/wiki/Testing-Abilities). I trying to replicate "user can only destroy projects which he owns."

spec/models/ability_spec.rb:

```
require "cancan/matchers"
require 'spec_helper'

describe Ability do
  context "user is investigator" do
    it "user can only destroy projects which he owns" do
        user = FactoryGirl.create(:user)
        ability = Ability.new(user)
        ability.should be_able_to(:destroy, Project.new(:user => user))
    end
  end
end 
```

However I get:

```
ActiveModel::MassAssignmentSecurity::Error:
       Can't mass-assign protected attributes: user 
```

Models:

```
class User < ActiveRecord::Base
  has_many :projects, dependent: :destroy          
  devise :database_authenticatable, etc...         
  attr_accessible :email, :password, :password_confirmation, :remember_me, :locale 
  validates :role, :presence => true
end

class Project < ActiveRecord::Base
  belongs_to :user
end 
```

Factory:

```
FactoryGirl.define do
  factory :user do |f|                        
    f.email { Faker::Internet.email }
    f.password "secret"
    f.role 1
  end
end 
```

I understand why this error arrises, and have tried various ways round it, but don't have a good enough understanding of factories to crack it. Can you help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:57:35.790

So the problem was related to not using Factory Girl when creating the project. It should have been:

```
describe Ability do
  context "user is investigator" do
    it "user can only destroy projects which he owns" do
        user = FactoryGirl.create(:user)
        ability = Ability.new(user)
        ability.should be_able_to(:destroy, FactoryGirl.create(:project, :user => user))
    end
  end
end 
```

# node.js - node.js + restify - requiring client certificate

> ID：12826711
> 
> 赞同：0
> 
> 时间：2012-10-10T19:17:50.023
> 
> 标签：node.js, https, certificate, restify

So I'm working on a basic node app. Clients will connect to it with SSL. It seems to work fine when I just use a server certificate, but when I attempt to require a client certificate, it continues to work no matter what I throw at it.

I have found questions on this site related to this, but the answers contained therein didn't seem to work for me. [Here's one.](https://stackoverflow.com/questions/10142431/my-node-js-https-client-always-works-regardless-of-certificate-validity?rq=1 "Here's one.")

Here's relevant code:

```
var restify=require('restify');
var fs=require('fs');

var server=restify.createServer({
    certificate: fs.readFileSync('../certs/server.crt'),
    key: fs.readFileSync('../certs/server.key'),
    ca: fs.readFileSync('../certs/ca.crt'),
    requestCert: true,
    rejectUnauthorized: true,
});

...

server.listen(8080, function() {
    console.log('servers up...');
}); 
```

I'm using curl to test connections, and pretty much anything that comes in causes the request object to be logged to console.

The various curl command lines I've used are:

```
curl -k https://localhost:8080/hello
curl -k -E user.combined:password https://localhost:8080/hello 
```

I'm using -k because the certificates were generated locally and curl wants to validate them. (could this be the problem??)

So, no matter what I send to the node instance, I get the output I'd expect if the user was using the proper certificate (as they are in the second curl command line above).

Logged in the console, I see this:

```
req = { socket:
    { pair:
        _secureEstablished: true,
        _isServer: true,
        ...
        _rejectUnauthorized: false,
        _requestCert: false,

        (further down)

        authorized: false 
```

Obviously, there's something going on here that I'm not fully up to speed on. What could it be?

== UPDATE ==

using -v with curl gets me some additional information, including this in the curl output:

```
* About to connect() to localhost port 8080 (#0)
*  Trying 127.0.0.1... connected
* successfully set certificate verify locations:
*  CAfile: none
  CApath: /etc/ssl/certs 
```

As noted above, my ca.crt file is in the (relative) directory ../certs

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:07:50.210

从 restify 1.4.4 开始不支持这一点。我相信这将包含在 2.0 版本中，因为我看到代码已添加到 Git 存储库的主分支中。

# c# - 什么是队列 实际执行

> ID：12826715
> 
> 赞同：6
> 
> 时间：2012-10-10T19:18:08.900
> 
> 标签：c#, .net, c#-4.0

在尝试通过包装通用队列来实现我自己的队列时，我注意到队列实现了 ICollection。但是，ICollection.CopyTo 的方法签名如下

```
void CopyTo(
    Array array,
    int index) 
```

而通用 Queue.CopyTo 的方法签名是

```
public void CopyTo(
    T[] array, 
    int arrayIndex) 
```

这与 ICollection.CopyTo 的通用版本的签名相同。我的困惑来自这样一个事实，即通用队列似乎没有实现通用的 ICollection，而是实现了标准的 ICollection。那么这里到底发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T19:20:35.657

根据[文档](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)：

```
public class Queue<T> : IEnumerable<T>, ICollection, IEnumerable 
```

所以它实现了*泛型* `IEnumerable<T>`接口，但是*非泛型* `ICollection`接口。

不要让名称的相似性欺骗了你——`ICollection`它们`ICollection<T>`是完全独立的接口，虽然这样的事情（实现一些通用接口但只实现非通用的其他接口）是不寻常的，但它是完全合法的。

我怀疑`ICollection<T>`设计师*确实*不想支持的各个方面`Queue<T>`，但同样他们希望实施`ICollection`以允许人们轻松地从非泛型[`Queue`](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)类升级。

编辑：如丹尼斯的回答中所述，[`ICollection.CopyTo`](http://msdn.microsoft.com/en-us/library/system.collections.icollection.copyto.aspx)在`Queue<T>`. 这意味着您*只能*通过 type 的表达式获得该签名`ICollection`。例如：

```
Queue<string> queue = new Queue<string>();
Array array = new Button[10];
queue.CopyTo(array, 0, queue.Count); // Compilation failure...
ICollection collection = (ICollection) queue;
collection.CopyTo(array, 0, queue.Count); // Compiles, but will go bang 
```

采用强类型数组的方法*对*实现是有效的[`ICollection<T>.CopyTo`](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx)，但`Add`和`Remove`的方法`ICollection<T>`不存在 - 相反，您应该使用`Enqueue`和`Dequeue`值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T19:25:46.093

根据 MSDN 文档： http: [//msdn.microsoft.com/en-us/library/7977ey2c.aspx，Queue](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)有自己的 CopyTo() 实现，并*明确实现 ICollection.CopyTo()*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T19:32:47.493

因为`ICollection<T>`包含*从集合中的任何位置*`Remove`删除项目的方法。这不适用于队列，因为您只能删除顶部项目而不重建整个队列。

# c++ - “已处理”还是“已处理”？

> ID：12826716
> 
> 赞同：0
> 
> 时间：2012-10-10T19:18:11.413
> 
> 标签：c++, naming

在我正在处理的一个程序中，我试图描述一个在以前的迭代中以某种方式处理的项目。我希望我编写的用于访问此状态的函数尽可能自描述。函数名称可以是：

```
wasProcessedAsMime() 
```

或者

```
isProcessedAsMime() 
```

哪个更正确或更有意义？“已处理”本身是过去时，但我不确定在它之前是否需要“是”或“是”。前者听起来更自然，但我不知道为什么。两者都有效吗？如果是这样，每个是什么意思？

我还被告知这`hasBeenProcessedAsMime()`将是正式正确的版本，但我不确定这是否矫枉过正:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:21:52.900

在我看来，如果返回类型是 Boolean（它可能是），我会使用 isProcessedAsMime()，因为这是常规的，并且有助于为下一个维护您的代码的人自我描述函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T19:24:31.007

两者都不。只需使用`processedAsMime`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T19:23:06.310

我会选择“isProcessed”，因为对象处于已处理状态，所以这里的返回是 True。

# c++ - 堆分配类的成员是否自动分配到堆中？

> ID：12826722
> 
> 赞同：4
> 
> 时间：2012-10-10T19:18:34.323
> 
> 标签：c++, heap-memory, allocation

假设我有：

```
class A{
    public:
    int x;
    int y;
}; 
```

我分配了一个 A 实例，例如：

```
A *a = new A(); 
```

ax 和 ay 是否也在堆中分配，因为它们“依赖”于堆分配的对象？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:29:52.490

重要的是要了解 C++ 使用“复制语义”。这意味着变量和结构字段不包含对值的引用，而是值本身。

当你声明

```
struct A
{
    int x;
    double yarr[20];
}; 
```

您将创建的每个`A`都将包含一个整数和一个由 20 个双精度数组成的数组......例如，`sizeof(int)+20*sizeof(double)`由于对齐原因，它的字节大小可能会更大。

当您`A`在堆上分配一个对象时，所有这些字节都将在堆中，当您`A`在堆栈上创建一个实例时，所有这些字节都将在堆栈上。

当然，一个结构也可以包含一个**指向**其他东西的指针，在这种情况下，指向的内存可能在其他地方......例如：

```
struct B
{
   int x;
   double *yarr;
}; 
```

在这种情况下，该结构`B`包含一个整数和一个**指向**双精度数组的指针，并且内存中的大小`B`可能`sizeof(int)+sizeof(double *)`更大。当您分配`B`构造函数的实例时，将决定从哪里`yarr`分配指向的内存。

例如，标准类`std::vector`非常小（通常只有三个指针），并将所有元素保留在堆上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T19:20:03.970

您将在包含`x`和的堆上获得一个分配`y`。`A`只是引用该对象的好方法。

我希望我可以轻松地利用 Stack Overflow，但您可以将它想象成这样的（非常小的）堆示例：

```
 +-------------------------------+
        |            Heap               | 
        +-------------------------------+
        | Other memory here ...         | 
        +-------+-----------------------+
A *a -> | x | y | Other memory here ... |
        +-------+-----------------------+ 
```

# python - 可以通过 Python 代码提取 git repo 修订哈希吗？

> ID：12826723
> 
> 赞同：2
> 
> 时间：2012-10-10T19:18:35.780
> 
> 标签：python, git, version

是否有任何简单的方法可以使用 Python 代码获取 git 存储库（在 GitHub 上）版本哈希？我想用它来处理 github 上我的软件的“开发”版本的版本控制。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-17T00:27:28.820

```
def git_version():
    from subprocess import Popen, PIPE
    gitproc = Popen(['git', 'rev-parse','HEAD'], stdout = PIPE)
    (stdout, _) = gitproc.communicate()
    return stdout.strip() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:27:02.053

像这样 ？

```
import subprocess
ref = subprocess.check_output("""
    git 2>/dev/null show-ref | awk '/refs\/heads\/master/{print $1}'
""", shell=True)
print ref 
```

如果您有其他东西，请调整它`master`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T19:39:40.797

```
from subprocess import Popen, PIPE

gitproc = Popen(['git', 'show-ref'], stdout = PIPE)
(stdout, stderr) = gitproc.communicate()

for row in stdout.split('\n'):
    if row.find('HEAD') != -1:
        hash = row.split()[0]
        break

print hash 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T19:28:33.820

您也可以为此使用[GitHub API](http://developer.github.com/v3/git/refs/)。

# c# - 查询优化挑战 - 是否可以调整此 linq 查询

> ID：12826725
> 
> 赞同：0
> 
> 时间：2012-10-10T19:18:48.683
> 
> 标签：c#, sql, performance, linq, query-optimization

我正在进行一项性能练习，我想知道是否有机会改进这一点，只是通过查询此信息而不是尝试进行任何数据库架构或数据更改的方式。

下面的**查询大约需要 200 毫秒来执行**。我知道我雄心勃勃，但挑战在于是否有办法让自己失望。我准备使用 ADO.NET 或使用 SP 或使用 sql 查询，但不能进行任何数据更改。此外，**EmpTable 有大约 2000 万行**。它选择与 paramid 匹配的 1 条记录。

有人认为这仍然可以进一步优化吗？

```
Log.Time()
            using (MyDataContext db = MyDataContext.GetContext())
            {
                db.ObjectTrackingEnabled = false;
                var _Query = from t in db.EmpTable
                             where t.id == paramId
                             select t;

                 if (!_Query.Any())
                    return null;
            }
            Log.Time()  -- 200 ms approx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:25:03.910

您的查询看起来很简单，您将无法对其进行太多改进。

我要检查的第一个地方是看看您是否可以在表上添加一个针对此查询优化的索引以提高性能。

为您正在运行的查询获取查询执行计划并查找任何问题区域。这似乎是一个可以通过数据库调优得到最好解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:33:47.823

使用 linq 会有一些小的开销（但无论如何你都在进行微优化）。您可以尝试执行原始 SQL，看看是否有任何性能变化。

```
using (MyDataContext db = MyDataContext.GetContext())
{
   var exists = db.ExecuteQuery<bool>(@"
       SELECT CASE WHEN EXISTS(SELECT NULL FROM EmpTable where t.id == {0}) 
       THEN CAST(1 As bit) 
       ELSE CAST(0 As bit) END", paramId);
   if(exists)
      return null;
} 
```

除了创建上下文之外，还`GetContext()`做些什么？

# apache2 - 将 owner:group 和 770 chmod 设置为 apache2 创建的文件

> ID：12826731
> 
> 赞同：0
> 
> 时间：2012-10-10T19:19:03.800
> 
> 标签：apache2, umask

我想配置 apache 以创建具有个性化所有者的文件：组和 chmod。我有一个需要由 apache + (ftp) 用户操作的网站文件夹。

实际上我做了一个（其中'mygroup'是ftp用户组）

```
chown www-data:mygroup -R /my/website/files
chmod 770 -R /my/website/files 
```

但是当 apache2 操作文件并创建文件或文件夹时，它们有

> -rw-r--r-- 1 www-数据 www-data

配置 apache2 的任何想法？

**编辑**：Debian 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:27:05.557

没有真正的*好*方法可以做到这一点 AFAIK。库存版本的 Apache 没有一种机制可以根据请求在不同用户下生成工作人员。它的所有工作人员都在用户下运行，因此不能将文件写成另一个。

* * *

话虽如此，有一些方法可以解决这个问题。

The first way will require you to run Apache as root. Apache, as it sits on your server, is running under an unprivileged user. Unprivileged users can't change the user that they run under. Only processes run as root can do that. If you are willing to run your Apache as root, there is a multi-process mod available [here](http://mpm-itk.sesse.net). What it does is allow you to run each VHOST under a different user (defined in your config). That means you would now also need to set up each user with their own VHOST. This way would work, but you are sacrificing a bit of security by doing this.

The second, more secure, but more "hacky" way to do it would be to run completely new and individual version of Apache for each user. So you have an Apache with its own set of config files JUST for userA, another Apache with its own different and separate set of configs just for userB, etc. Each instance of Apache could listen on a different port (i.e. userA's listens on port 8080, userB on port 8081...). Then you could use some kind of front end reverse proxy to sort it all out and route the traffic to the appropriate Apache instance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:22:36.147

看起来你在 openSUSE 或 SLES 下工作。如果是这样，请查看文件`/etc/apache2/uid.conf`...

对于 umask：实际上不确定。当然可行的是在 apache 用户主目录下创建一个 .profile 文件并在其中设置 umask。但我敢打赌，有一个更优雅的解决方案！

# sip - Asterisk 中的呼叫者 ID 用于用户识别

> ID：12826735
> 
> 赞同：0
> 
> 时间：2012-10-10T19:19:13.933
> 
> 标签：sip, voip, asterisk

我是 Asterisk 的新手，所以如果这个问题有一个我只是忽略的明显答案，请原谅我。

我正在混合个人广告和语音邮件服务，我希望每个用户都能够提交一个广告，其他人可以通过记录进入该用户收件箱的消息来响应。我最初的想法是纯粹基于 CALLERID(num) 值，但很快发现这有点不可靠。有时当我打电话时它会说匿名，有时它会给我一堆零，有时它会显示我的真实电话号码，而一旦它实际上只给我随机数字。在接听后但在我的第一个声音文件被触发之前，在我的拾音环境中，我确实有一个等待电话。我想知道解决这个问题的最佳方法是什么？我是否要求用户输入他们的电话号码，然后基于此生成一个代码，然后在您回拨时用作密码？我是否尝试使用 CALLERID(num) 来检测返回用户，或者从安全角度来看这是不建议的？

最好，我想完全避免使用代码，但有人告诉我，欺骗电话号码以侵入别人的收件箱相对容易。请注意，我不打算允许直接 SIP 呼叫，只能通过 IP 地址在白名单上的 PSTN/SIP 提供商。任何有关如何解决此问题的提示将不胜感激。基本上我想让我的用户尽可能简单，但要保持高安全性。

我还想知道是否有一个函数来检查一个字符串是否只包含数字？如果我决定以这种方式使用 CALLERID(num)，在我在 MySql 数据库中查找电话号码之前，这将作为一个健全性检查很有用。

我非常基本且未完成的拨号方案如下：

```
[verify]

exten => blastbay,1,Answer(1000)

; A few simple sanity checks, but not very good ones.
same => n,GotoIf($["${CALLERID(num)}" != "0000000000"]?nextcheck)

; If we have only zero's, try waiting another second.
same => n,Wait(1)
same => n,GotoIf($["${CALLERID(num)}" = "0000000000"]?rejected)

same => n(nextcheck),GotoIf($["${CALLERID(num)}" = ""]?rejected)
same => n,GotoIf($["${CALLERID(num)}" = "anonymous"]?rejected)
same => n,GotoIf($["${CALLERID(num)}" = "unavailable"]?rejected)
same => n,GotoIf($["${CALLERID(num)}" = "protected"]?rejected)
same => n,GotoIf($[${LEN(${CALLERID(num)})}<5]?rejected)
same => n,Goto(welcome,welcomespeech,1)

same => n(rejected),Playback(/usr/phone/rejected)
same => n,Hangup()

[welcome]
include => mainmenu
exten => welcomespeech,1,BackGround(/usr/phone/welcome)
same => n,Goto(mainmenu,menuspeech,1)

[mainmenu]
exten => menuspeech,1,BackGround(/usr/phone/mainmenu)
same => n,WaitExten(5)

exten => 1,1,Goto(information,infospeech,1)
exten => i,1,Goto(menuspeech,1)
exten => t,1,Goto(menuspeech,1)

[information]
exten => infospeech,1,BackGround(/usr/phone/information)
same => n,Goto(mainmenu,menuspeech,1)
exten => #,1,Goto(mainmenu,menuspeech,1)
exten => i,1,Goto(mainmenu,menuspeech,1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T07:07:30.990

一个经常被忽视的命令是“验证”命令......因此您可以构建一种机制，为用户分配一个基于数字的 UID，然后是一个 PIN。将 PIN 放入名称为 UID 的文件中，然后当他们调用时，读取他们的 UID，Authenticate(uid_file_name)，如果他们通过 Authenticate 输入正确的 PIN，则让他们访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:31:07.350

*我正在混合个人广告和语音邮件服务，我希望每个用户都能够提交一个广告，其他人可以通过记录进入该用户收件箱的消息来响应。*

因此，您可以使用`Record()`,`Playback()`和`Voicemail()`。

*   `Record()`录制广告，
*   `Playback()`广告，
*   `Voicemail()`让用户记录他们的语音信箱

如果你想要更多的访问控制，我建议使用[PHP AGI](http://phpagi.sourceforge.net/)或使用[AstDB](http://www.voip-info.org/wiki/view/Asterisk+func+db)。

是的，很容易欺骗一个数字，对于访问控制，比如访问代码，使用[Read](http://www.voip-info.org/wiki/view/Asterisk+cmd+Read)可以将 DTMF 输入作为变量读取，可能与基于 CallerID Number 的过滤器结合使用，听起来是个好主意。

*我还想知道是否有一个函数来检查一个字符串是否只包含数字？*

您可以为此使用[REGEX ，即。](http://www.voip-info.org/wiki/view/Asterisk+func+regex)在宏中：

```
; Arg1: CALLERID(num)
[macro-dblookup]
exten => s,1,Set(isnumber=${REGEX("[0-9]" ${ARG1})})
exten => s,2,GotoIf($["${isnumber}" = "1"]?4)
exten => s,3,MacroExit()
exten => s,4,NoOp("Do something with number here")
exten => s,5,NoOp("...Db Lookup...") 
```

在拨号盘中，您可以像这样调用宏 dblookup：

```
exten => 012345678,1,Noop("...")
exten => 012345678,n,Macro(dblookup,${CALLERID(num)}) 
```

# java - 2个日期Java之间的差异

> ID：12826737
> 
> 赞同：-7
> 
> 时间：2012-10-10T19:19:34.110
> 
> 标签：java

> **可能重复：**
> [Java中两个日期之间的天数差异？](https://stackoverflow.com/questions/3299972/difference-in-days-between-two-dates-in-java)

我需要找到两个日期之间的差异。第一个是字符串格式，

```
s1=2012-10-01T15:33:34.652905Z 
```

我需要将 s1 转换为日期 d1，然后找到今天日期 d2 和 d1 之间的整数差。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:29:13.127

要将字符串转换为日期，可以使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html) .parse("yyyy-MM-dd'T'HH:mm:ss.SSSZ")。

给定两个 Date 对象，您可以按照 SO 条目中的建议使用[JODA Time获得所需的任何差异（天、秒......）：](http://joda-time.sourceforge.net/) [Java 中两个日期之间的天数差异？](https://stackoverflow.com/questions/3299972/difference-in-days-between-two-dates-in-java)

# objective-c - Obj-C：我试图了解代表，但我搞砸了

> ID：12826745
> 
> 赞同：-1
> 
> 时间：2012-10-10T19:20:23.237
> 
> 标签：objective-c, xcode, delegates

我看到了 Flower an MyGarden 的示例，但是当我尝试制作类似的东西时它不起作用。我的代码：

类A.h：

```
#import <Foundation/Foundation.h>

@protocol CommDelegate <NSObject>
@required
-(void)funcB;
@end

@interface ClassA : NSObject
{
    id <CommDelegate> delegate;
}
@property (retain) id delegate;
-(void)funcB;
@end 
```

类A.m

```
#import "ClassA.h"

@implementation ClassA
-(void) start
{
    [[self delegate] funcB];
}
@end 
```

B类.h

```
#import <Foundation/Foundation.h>
#import "ClassA.h"

@interface ClassB : NSObject <CommDelegate>
@end 
```

B类.m

```
#import "ClassB.h"

@implementation ClassB
-(void)funcB
{
    NSLog(@"HELLO!");
}
@end 
```

主要是我在做：

```
ClassA* classa = [[ClassA alloc] init];
[classa start]; 
```

有人可以帮助我，并告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:37:27.510

代表团概述摘要：

1.  创建一个@protocol，它是您希望可以从委托人调用但由您的委托人提供的方法。
2.  在委托人的公共@interface 中添加委托@property。
3.  在委托者的实现中使用委托属性，例如 result = [self.delegate methodInProtocol]
4.  在委托的@implementation 中的某处设置委托属性： delegator.delegate = self;
5.  在委托中实现协议方法（包括@interface上的<>）

委托只是一个指向将为您实现必要方法的对象的指针。在您的情况下，我认为您希望 classA 能够调用 funcB 方法，但该 funcB 由其他人实现。

要让另一个类实现这些方法的类中需要有一个委托属性，然后在要成为委托的类中，它应该将委托属性设置为 self。

正如其他人所指出的，您没有设置您的委托。在 B 类的某个地方，你需要一个

```
ClassA.delegate = self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:25:17.030

```
ClassA* classa = [[ClassA alloc] init];
[classa start]; 
```

看来您需要设置`classa`的委托。通常，您希望`-start`调用调用委托方法，但`classa`这里没有委托。做这个：

```
ClassB* classb = [[ClassB alloc] init];
ClassA* classa = [[ClassA alloc] init];
classa.delegate = classb;
[classa start]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T19:25:55.253

1.  你从不设置委托
2.  您通常`assign`委托而不是`retain`他们来避免保留周期。（分配委托的对象通常会对对象有强引用，并负责`nil`在完成时将委托设置为）

* * *

```
#import <Foundation/Foundation.h>
@protocol CommDelegate <NSObject>
@required
-(void)funcB;
@end

@interface ClassA : NSObject
{
    id <CommDelegate> delegate;
}
@property (assign) id delegate; //assign
-(void)funcB;
@end 
```

这是重要的部分：

```
ClassA* classa = [[ClassA alloc] init]; //Consider creating an init method that accepts the delegate
classa.delegate = self; //Assuming self conforms to CommDelegate
[classa start]; 
```

# c++ - 每当写入流时，C++ 执行函数

> ID：12826751
> 
> 赞同：4
> 
> 时间：2012-10-10T19:20:53.310
> 
> 标签：c++, events, callback, stringstream

我有一个简单的 GUI 程序，它使用自定义`stringstream`将控制台的输出重定向到 GUI 中的文本字段（在某些情况下）。目前。每当我按 Enter 键时，窗口都会重绘，但有可能在其他时间生成输出。有没有办法注册一个函数，`stringstream`每次`<<`在流上使用运算符时都会执行该函数？

**笔记**

我应该指出我不能在我的解决方案中使用 C++11。将在其上编译和运行它的机器将没有可用的 c++11。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T19:48:14.870

就个人而言，我根本不会使用`std::ostringstream`（甚至是`std::stringstream`）！相反，我会创建自己的流缓冲区，负责将数据发送到 GUI。也就是说，我将覆盖当前数据`std::streambuf::overflow()`并将`std::streambuf::sync()`其发送到 GUI。为了确保立即发送任何输出，我设置了一个`std::ostream`to have `std::ios_base::unitbuf`set。实际上，将更改发送到函数非常简单，即，我将实现：

```
#include <streambuf>
#include <ostream>
#include <functional>
#include <string>
#include <memory>
#include <iostream> // only for testing...

#if HAS_FUNCTION
typedef std::function<void(std::string)> function_type;
#else
class function_type
{
private:
    struct base {
        virtual ~base() {}
        virtual base* clone() const = 0;
        virtual void  call(std::string const&) = 0;
    };
    template <typename Function>
    struct concrete
        : base {
        Function d_function;
        concrete(Function function)
            : d_function(function) {
        }
        base* clone() const { return new concrete<Function>(this->d_function); }
        void  call(std::string const& value) { this->d_function(value); }
    };
    std::auto_ptr<base> d_function;
public:
    template <typename Function>
    function_type(Function function)
        : d_function(new concrete<Function>(function)) {
    }
    function_type(function_type const& other)
        : d_function(other.d_function->clone()) {
    }
    function_type& operator= (function_type other) {
        this->swap(other);
        return *this;
    }
    ~function_type() {}
    void swap(function_type& other) {
        std::swap(this->d_function, other.d_function);
    }
    void operator()(std::string const& value) {
        this->d_function->call(value);
    }
};
#endif

class functionbuf
    : public std::streambuf {
private:
    typedef std::streambuf::traits_type traits_type;
    function_type d_function;
    char          d_buffer[1024];
    int overflow(int c) {
        if (!traits_type::eq_int_type(c, traits_type::eof())) {
            *this->pptr() = traits_type::to_char_type(c);
            this->pbump(1);
        }
        return this->sync()? traits_type::not_eof(c): traits_type::eof();
    }
    int sync() {
        if (this->pbase() != this->pptr()) {
            this->d_function(std::string(this->pbase(), this->pptr()));
            this->setp(this->pbase(), this->epptr());
        }
        return 0;
    }
public:
    functionbuf(function_type const& function)
        : d_function(function) {
        this->setp(this->d_buffer, this->d_buffer + sizeof(this->d_buffer) - 1);
    }
};

class ofunctionstream
    : private virtual functionbuf
    , public std::ostream {
public:
    ofunctionstream(function_type const& function)
        : functionbuf(function)
        , std::ostream(static_cast<std::streambuf*>(this)) {
        this->flags(std::ios_base::unitbuf);
    }
};

void some_function(std::string const& value) {
    std::cout << "some_function(" << value << ")\n";
}

int main() {
    ofunctionstream out(&some_function);
    out << "hello" << ',' << " world: " << 42 << "\n";
    out << std::nounitbuf << "not" << " as " << "many" << " calls\n" << std::flush;
} 
```

上述代码的相当一部分实际上与手头的任务无关：它实现了一个原始版本，`std::function<void(std::string)>`以防 C++2011 无法使用。

如果您不想要太多的调用，您可以关闭`std::ios_base::unitbuf`并仅在刷新流时发送数据，例如使用`std::flush`（是的，我知道`std::endl`但不幸的是它通常被滥用，我强烈建议摆脱它并使用`std::flush`真正意味着冲洗的地方）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T19:40:00.303

为此，您应该创建自己的 streambuf 类。streambuf 类代表 IO 设备，每个类都处理特定于该类型设备的各种问题。该标准为文件定义了一个streambuf，为字符串定义了另一个。网络访问将使用另一种，如果您要使用流，则输出到 GUI 也应该表示为另一种设备。

编写适当的 streambuf 类并非易事，而且似乎有点晦涩难懂，但是那里有资源。*[C++ 标准库 - 教程和参考](http://www.cppstdlib.com/)*对此有一小部分。*[标准 C++ IOStreams 和语言环境：高级程序员指南和参考](https://rads.stackoverflow.com/amzn/click/com/0201183951)*提供了深入的信息。搜索`subclassing basic_streambuf`也会在网上找到一些免费资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T19:29:09.853

如果您还没有，您能否从 stringstream 派生一个子类并重载其流插入运算符以生成事件？

伪代码：

```
class AlertingStream : public stringstream
{
    ostream& operator << (type)
    {
        for (each listener in listeners)
        {
            listener.notify();
        }
        perform insertion;
        return *this;
    }
} 
```

# php - 在 Joomla 之外使用 JUserHelper 类 - 在自定义脚本中

> ID：12826754
> 
> 赞同：0
> 
> 时间：2012-10-10T19:21:01.670
> 
> 标签：php, joomla, content-management-system

我正在将 joomla 用户数据库移动到新的自定义 CMS，但我想包含用于 salt 的 joomla 助手类。如何`include`在我自己的代码中从 helper.php 运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:35:38.953

忘记问题。

我只是在生成自己的随机数并遵循 Joomla 的登录协议

登记：

```
$salt = uniqid('', true);
$crypt = md5($password.$salt);
$password = $crypt.':'.$salt; 
```

登入

```
if( $row !== false )
{
    $parts = explode( ':', $row['password']);

    // Check if password is md5-ed with or without salt
    if (count($parts) < 2) 
        $new_password = md5($_GET["password"]);
    else 
    {
        // get some salt
        $salt = $parts[1];

        // convert the raw password to Joomla md5(password+salt):salt model
        $new_password = md5($_GET["password"] . $salt) . ":" . $salt;
    }

    // authenticate
    if ( $new_password != $row['password'] )
        echo "NO";  // your params
    else
        echo "YES," . $row['name'] . "," . $row['email'];  // your params

    // clean up
    mysql_free_result($result);
} 
```

# css - 边距：自动自动

> ID：12826755
> 
> 赞同：3
> 
> 时间：2012-10-10T19:21:03.237
> 
> 标签：css, centering

> **可能重复：**
> [为什么 margin-top: auto 和 margin-bottom:auto 不与左右对应物一样工作？](https://stackoverflow.com/questions/6775273/why-dont-margin-top-auto-and-margin-bottomauto-work-the-same-as-their-left-an)
> [margin-top: auto 和 margin-bottom: auto 等于 0 保证金的原因是什么？](https://stackoverflow.com/questions/12386739/what-is-the-rationale-behind-margin-top-auto-and-margin-bottom-auto-amounting)

为什么不`margin: auto auto;`添加垂直居中？auto 关键字不应该告诉浏览器在顶部和底部之间平均分配边距吗？我的印象是它对左右边距的作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:24:46.797

最终它是一个 w3c 规范 -

> 如果 'margin-top' 或 'margin-bottom' 为 'auto'，则它们的使用值为 0。

看起来它会很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:28:12.543

该`auto`关键字应该执行[w3c 规范](http://www.w3.org/TR/CSS2/visudet.html#Computing_widths_and_margins)中定义的任何内容，这恰好是：

> 如果 'margin-top' 或 'margin-bottom' 为 'auto'，则它们的使用值为 0。

# python - csv中的Django夹具

> ID：12826756
> 
> 赞同：4
> 
> 时间：2012-10-10T19:21:04.883
> 
> 标签：python, django, csv, fixture

对于 Django 测试，我想加载一个 csv 文件中的夹具。最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T19:41:07.463

Django 的内置固定装置功能不支持 CSV。您需要使用`csv`模块自动处理文件，可能是在测试的`setUp`方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T06:23:02.880

为了更容易重用，我建议使用我的[Django-PyFixture](https://pypi.python.org/pypi/django_pyfixture/)库。然后，您将在原始 python 中对您的夹具进行编程，但它在语义上看起来更像是一个夹具。

# ruby-on-rails - 来自同一控制器的 2 个页面的导航突出显示

> ID：12826758
> 
> 赞同：1
> 
> 时间：2012-10-10T19:21:22.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在上一篇文章之后，我（几乎）成功地使用 CSS 和 Rails 实现了高亮导航。

```
<ul class="nav">
        <li class="<%= "active" if params[:controller] == "sweets" %>"><%= link_to 'Sweets', sweets_path %>           </li>
        <li class="<%= "active" if params[:controller] == "sweets/new" %>"><%= link_to 'New Sweets', new_sweets_path %>     </li>
        <li class="<%= "active" if params[:controller] == "tasks" %>"><%= link_to 'Tasks', tasks_path %>         </li>'Customers', customers_path %> </li>
        <li class="<%= "active" if params[:controller] == "suppliers" %>"><%= link_to 'Suppliers', suppliers_path %> </li>   
</ul> 
```

唯一的问题是我的导航项目之一是创建一个新项目，而不是到一个完全不同的页面。我已经尝试在普通控制器文本的末尾使用 /new 进行上述操作，但它没有奏效。

导航到方法页面时是否可以使用此方法，还是我需要以不同的方式实现它？对不起，如果这是一个重复的问题，但我找不到任何有同样情况的人。

在此先感谢，任何提示或提示总是受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:26:07.303

您也可以检查操作：

```
if params[:action] == 'some_action' 
```

# svn - 将发布分支更改合并到主干

> ID：12826759
> 
> 赞同：0
> 
> 时间：2012-10-10T19:21:27.243
> 
> 标签：svn

这是我的情况：首先，我的仓库中有主干、分支、标签。我在分支/RB1.x 主干上有发布分支，所有最新代码都在处理中。我需要在发布分支 RB1.x 上工作，所以我对其进行了更改。现在我如何将这些更改合并到主干？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:27:43.107

这是您的标准情况。

您可以简单地使用 svn 命令将更改从分支合并到主干：

```
svn merge -r x:y https://someserver/repo/project/branch/123 trunk 
```

where`x`和`y`是修订号，`trunk`是您的主干的结帐。

清除任何冲突后，您可以签入修改。使用包含合并修订号的标准修订注释是一种很好的做法。这样就可以更容易地识别以后已经合并了哪些修订。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:32:10.337

鉴于您没有使用 svn 1.4 或更早版本：

从主干，运行：

```
svn merge ^/branches/RB1.x 
```

这是使用合并跟踪功能，因此您应该能够多次执行此操作，而不会一遍又一遍地合并相同的更改。

或者您可以按照 arkascha 的说明指定版本范围。

# c# - 以矩阵格式打印二维数组

> ID：12826760
> 
> 赞同：30
> 
> 时间：2012-10-10T19:21:35.763
> 
> 标签：c#, multidimensional-array

我有一个二维数组，如下所示：

```
long[,] arr = new long[4, 4] {{ 0, 0, 0, 0 },
                              { 1, 1, 1, 1 },
                              { 0, 0, 0, 0 },
                              { 1, 1, 1, 1 }}; 
```

我想以矩阵格式打印该数组的值，例如：

```
0 0 0 0
1 1 1 1
0 0 0 0
1 1 1 1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-10T19:36:24.677

您可以这样做（稍微修改数组以显示它适用于非方形数组）：

```
 long[,] arr = new long[5, 4] { { 1, 2, 3, 4 }, { 1, 1, 1, 1 }, { 2, 2, 2, 2 }, { 3, 3, 3, 3 }, { 4, 4, 4, 4 } };

        int rowLength = arr.GetLength(0);
        int colLength = arr.GetLength(1);

        for (int i = 0; i < rowLength; i++)
        {
            for (int j = 0; j < colLength; j++)
            {
                Console.Write(string.Format("{0} ", arr[i, j]));
            }
            Console.Write(Environment.NewLine + Environment.NewLine);
        }
        Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T19:27:36.960

像这样：

```
long[,] arr = new long[4, 4] { { 0, 0, 0, 0 }, { 1, 1, 1, 1 }, { 0, 0, 0, 0 }, { 1, 1, 1, 1 } };

var rowCount = arr.GetLength(0);
var colCount = arr.GetLength(1);
for (int row = 0; row < rowCount; row++)
{
    for (int col = 0; col < colCount; col++)               
        Console.Write(String.Format("{0}\t", arr[row,col]));
    Console.WriteLine();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-11-15T15:37:13.080

我写了扩展方法

```
public static string ToMatrixString<T>(this T[,] matrix, string delimiter = "\t")
{
    var s = new StringBuilder();

    for (var i = 0; i < matrix.GetLength(0); i++)
    {
        for (var j = 0; j < matrix.GetLength(1); j++)
        {
            s.Append(matrix[i, j]).Append(delimiter);
        }

        s.AppendLine();
    }

    return s.ToString();
} 
```

要使用只需调用该方法

```
results.ToMatrixString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-04T01:06:17.627

以下是在**Unity**中的操作方法：

（来自@markmuetz 的修改答案，所以一定要支持[他的答案](https://stackoverflow.com/a/12827010/3324388)）

```
int[,] rawNodes = new int[,]
{
    { 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0 }
};

private void Start()
{
    int rowLength = rawNodes.GetLength(0);
    int colLength = rawNodes.GetLength(1);
    string arrayString = "";
    for (int i = 0; i < rowLength; i++)
    {
        for (int j = 0; j < colLength; j++)
        {
            arrayString += string.Format("{0} ", rawNodes[i, j]);
        }
        arrayString += System.Environment.NewLine + System.Environment.NewLine;
    }

    Debug.Log(arrayString);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T09:05:53.587

您可以在短时间内做到这一点。

```
 int[,] values=new int[2,3]{{2,4,5},{4,5,2}};

        for (int i = 0; i < values.GetLength(0); i++)
        {
            for (int k = 0; k < values.GetLength(1); k++) {
                Console.Write(values[i,k]);
            }

            Console.WriteLine();
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-22T03:16:49.950

你也可以这样做

```
 long[,] arr = new long[4, 4] { { 0, 0, 0, 0 }, { 1, 1, 1, 1 }, { 0, 0, 0, 0 }, { 1, 1, 1, 1 }};

        for (int i = 0; i < arr.GetLength(0); i++)
        {
            for (int j = 0; j < arr.GetLength(1); j++)
            {
                Console.Write(arr[i,j]+" ");
            }
            Console.WriteLine();
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-16T20:20:49.400

如果使用方阵：

```
 int[,] mat = new int[,]{{ 1, 0, 0 },{ 0, 1, 0},{ 0, 0, 1}};
    int i=1;
    foreach(int e in mat){
        Console.Write(i%Math.Sqrt(mat.Length)==0? $"{e}\n" : e);
        i+=1;
    } 
```

# c# - 运算符重载如何在此代码中工作

> ID：12826763
> 
> 赞同：-2
> 
> 时间：2012-10-10T19:21:47.737
> 
> 标签：c#

我在如何发布我的代码时犯了一个错误，这表明我很懒，我只想为我完成所有事情，我想了解下面代码中的运算符重载以及这段代码在主程序中的作用

```
static public explicit operator Int32(Vector v)
        {
            return v.Length;
        }

        public override string ToString()
        {
            String res = "<";
            for (int i = 0; i < elements.Length; i++)
                res += " " + elements[i];
            res += " >";
            return res;
        }

        public override bool Equals(Object v)
        {
            return (this == (Vector)v);
        }

        public override int GetHashCode()
        {
            return base.GetHashCode();
        }
    } 
```

该代码通过重写向量的加法、减法、乘法和相等/不等运算符来实现一类向量。考虑到其中一个操作数的操作——实数或整数。在操作中维度向量重合的情况下抛出异常。

```
namespace ConsoleApplication3
{

    public class Vector
    {
        private Double[] elements;

        public Vector()
        {
            this.elements = null;
        }

        public Vector(Int32 size)
        {
            if (size < 0) throw new Exception("Invalid vetors size");        
            elements = new Double[size];
        }

        public Vector(params Double[] elements)
        {
            this.elements = elements;
        }

        public Vector(Vector v)
        {
            this.elements = v.elements;
        }

        public int Length
        {
            get
            {
                if (elements == null) return 0;
                return elements.Length;
            }
        }

        public Double this[int index]
        {
            get 
            {
                return elements[index];
            }
            set 
            {
                elements[index] = value;
            }
        }

        static public Vector operator+(Vector v1, Vector v2)
        {
            if (v1.Length != v2.Length)
                throw new Exception("size of vectors are different");
            Vector res = new Vector(v1.Length);
            for (int i = 0; i < res.Length; i++)
                res[i] = v1[i] + v2[i];
            return res;
        }

        static public Vector operator+(Vector v, Double d)
        {
            Vector res = new Vector(v.Length);
            for (int i = 0; i < v.Length; i++ )
                res[i] = v[i] + d;
            return res;
        }

        static public Vector operator +(Double d, Vector v)
        {
            return (v + d);
        }

        static public Vector operator -(Vector v, Double d)
        {
            Vector res = new Vector(v.Length);
            for (int i = 0; i < v.Length; i++)
                res[i] = v[i] - d;
            return res;
        }

        static public Vector operator -(Double d, Vector v)
        {
            Vector res = new Vector(v.Length);
            for (int i = 0; i < v.Length; i++)
                res[i] = d - v[i];
            return res;
        }

        static public Vector operator *(Vector v, Double d)
        {
            Vector res = new Vector(v.Length);
            for (int i = 0; i < v.Length; i++)
                res[i] = v[i] * d;
            return res;
        }

        static public Vector operator *(Double d, Vector v)
        {
            return (v * d);
        }

        static public Vector operator -(Vector v1, Vector v2)
        {
            if (v1.Length != v2.Length)
                throw new Exception("size of vectors are different");
            Vector res = new Vector(v1.Length);
            for (int i = 0; i < res.Length; i++)
                res[i] = v1[i] - v2[i];
            return res;
        }

        static public Vector operator *(Vector v1, Vector v2)
        {
            if (v1.Length != v2.Length)
                throw new Exception("size of vectors are different");
            Vector res = new Vector(v1.Length);
            for (int i = 0; i < res.Length; i++)
                res[i] = v1[i] * v2[i];
            return res;
        }

        static public Boolean operator ==(Vector v1, Vector v2)
        {
            if (v1.Length != v2.Length)
                return false;            
            for (int i = 0; i < v1.Length; i++)
                if(v1[i] != v2[i]) return false;
            return true;
        }

        static public Boolean operator !=(Vector v1, Vector v2)
        {
            return (!(v1 == v2));
        }

        static public explicit operator Int32(Vector v)
        {
            return v.Length;
        }

        public override string ToString()
        {
            String res = "<";
            for (int i = 0; i < elements.Length; i++)
                res += " " + elements[i];
            res += " >";
            return res;
        }

        public override bool Equals(Object v)
        {
            return (this == (Vector)v);
        }

        public override int GetHashCode()
        {
            return base.GetHashCode();
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Vector v1 = new Vector(new Double[]{1, 2, 3, 4});
            Vector v2 = new Vector(2, 3, 4, 5);
            Console.WriteLine(v1 + " + " + v2 + " = " + (v1 + v2));
            Console.WriteLine(v1 + " - " + v2 + " = " + (v1 - v2));
            Console.WriteLine(v1 + " * " + v2 + " = " + (v1 * v2));
            Console.WriteLine(v1 + " * " + 7 + " = " + (v1 * 7));
            Console.ReadKey(true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:27:15.413

一点代码审查，这里有一些大的危险信号。

这个构造函数是危险的错误：

```
 public Vector(Vector v)
    {
        this.elements = v.elements;
    } 
```

`elements`是一个引用（对一个数组），因此您在这里创建了 2 个*共享*相同元素的 Vector 对象。

```
Vector v1 = new Vector(10);
Vector v2 = new Vector(v1);  // 2 vectors, 1 elements

v1[0] = 1.2;
Console.WriteLine(v2[0]);  // prints 1.2 
```

出于同样的原因，这个至少是危险的：

```
 public Vector(params Double[] elements)
    {
        this.elements = elements;
    } 
```

解决这两个（可能还有更多）问题的方法是将此类重新设计为不可变的。对于初学者，请从索引器中删除设置器。

这个运算符非常可疑，您的用例是什么：

```
 static public explicit operator Int32(Vector v)
    {
        return v.Length;
    } 
```

它表明 Vector 不知何故*是一个长度*，实际上它只是*有*一个长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:30:41.593

运算符重载非常简单，根据提供的代码，您似乎理解它。您可能会在这里遇到问题，例如：

```
static public Vector operator *(Double d, Vector v)
    {
        return (v * d);
    } 
```

您正在使用运算符本身定义 * 运算符，这是毫无意义的，并且可能无论如何都不起作用（将 Double d 乘以 Vector v 可能会起作用，但您已经在使用该功能）。

如果您了解函数，则运算符使用两个参数执行相同的操作并返回您想要返回的必要值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T19:38:22.720

在 C# 中，所有项目都是对象，所以都在对象类中。

[http://msdn.microsoft.com/en-us/library/system.object.aspx](http://msdn.microsoft.com/en-us/library/system.object.aspx)

所以所有对象都至少有从 Object 继承的方法。如果您覆盖任何此函数（如 ToString），则基类上可用函数的实现将被您的实现替换。

对于操作符也是同样的情况，而且两个数组（或者你定义的其他类型）的操作符 + 不存在，所以它们应该有你的实现。

运算符与方法类似 static public Boolean operator ==(Vector v1, Vector v2)

需要 2 个向量项并返回一个布尔值等价于（不是在语法上）： Boolean Equal(Vector v1, Vector v2)

其余的方法相同。

我希望我是有帮助的。

# php - 使用 Doctrine 2 检查完整性约束违规

> ID：12826770
> 
> 赞同：1
> 
> 时间：2012-10-10T19:22:19.143
> 
> 标签：php, symfony, doctrine-orm

我正在尝试清理实体集合（即关系术语中的表），这些实体是 的实例`Color`，并且我想运行一个使用 Doctrine 2 删除所有未引用的脚本的脚本`Color`。问题是`Color`系统中的许多其他实体都引用了它。所以，我可以想到两个选择：

1.  遍历所有颜色并手动检查每种颜色是否存在`Color`对我系统上其他实体上的特定的引用，如果没有引用，则将其删除。
2.  遍历所有颜色并尝试删除一个，如果有对该颜色的引用，则捕获由违反完整性约束引起的 EM 引发的异常，因此，我确实忽略了失败的颜色并继续下一步。

显然，第二种选择比第一种更简单，所以我试过了。我遇到的问题是，当实体删除失败时，EM 会抛出异常，但也会关闭实体管理器，我不能再使用它来删除剩余的颜色！

我检查了教义 2`commit`的课程方法`UnitOfWork`，实际上......

```
try {
    ... //Execute queries

    $conn->commit();
} catch (Exception $e) {
    $this->em->close();
    $conn->rollback();

    throw $e;
} 
```

有什么方法可以完成我正在尝试做的事情（也许重新打开实体管理器）？
你相信有更好的方法吗？
为什么教义有这种行为？

**另请注意，我将 Doctrine 2 与 Symfony 2 一起使用**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:44:54.353

理想情况下，您将`orphanRemoval`在您的关系中进行定义，这样您就不需要为删除而烦恼。除此之外，我现在可以想到 3 个解决方案..

首先，你在引用表时使用`CASCADE`in吗？`ON DELETE``colors`

# 1)

如果您确实使用`CASCADE`我建议按照此处所述实施 Doctrine 的批处理：[BULK DELETE](http://docs.doctrine-project.org/en/2.0.x/reference/batch-processing.html#bulk-deletes)但在这里您`$batchSize`将是 1。

# 2)

不知何故，我认为上述解决方案效率不高，您也可以通过以下方式实现：

*   遍历引用实体的`Color`实体并收集`id`到`Color`数组中。
*   如果该数组不为空，则执行：并照常`DELETE FROM AcmeDemoBundle:Color c WHERE c.id IN (:ids)`设置参数。`ids`

# 3)

如果您**不**使用`CASCADE`. 您可以执行**原始 sql**：

```
DELETE IGNORE FROM color; 
```

在这里，引用的颜色不会被删除并且会引发错误，但由于`IGNORE`它最终只会作为警告。

希望有些帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:05:41.133

像这样的东西：

```
// somewhere in ColorRepository.php

$this->createQueryBuilder("o")
    ->leftJoin("o.Relation1", "r1")
    ->leftJoin("o.Relation2", "r2)
    ->where("r1 IS NULL AND r2 IS NULL")
    ->delete() ; 
```

只有当它们不再与 r1 和 r2 有关系并删除它们时，这才应该加载您的实体（颜色）。

# spring - 1对1关系导致，异常：org.hibernate.exception.ConstraintViolationException：无法执行JDBC批量更新

> ID：12826772
> 
> 赞同：1
> 
> 时间：2012-10-10T19:22:27.580
> 
> 标签：spring, hibernate, jakarta-ee, hibernate-mapping

使用的技术：Spring MVC、Hibernate、MySQL DB、Windows 7、NetBeans IDE

我的创建、读取、更新操作可以正常工作，但是在尝试**删除 UserAccount 和相关密码记录时出现异常：**

严重：无法删除或更新父行：外键约束失败（`profiler`. `password`, CONSTRAINT `FK4C641EBBCF6D23F4`FOREIGN KEY ( `user_id`) REFERENCES `user_account`( `user_id`)) Oct 10, 2012 11:52:22 AM org.hibernate.event.def.AbstractFlushingEventListener performExecutions 严重：可以未将数据库状态与会话 org.hibernate.exception.ConstraintViolationException 同步：无法执行 JDBC 批量更新

引起：java.sql.BatchUpdateException：无法删除或更新父行：外键约束失败（`profiler`. `password`，CONSTRAINT `FK4C641EBBCF6D23F4`FOREIGN KEY（`user_id`）REFERENCES `user_account`（`user_id`））

UserAccount & Password 关系：

![在此处输入图像描述](../Images/a4b3168359b92512a8e3b68d0f694b96.png)

用户帐户类：

```
package com.profile.beans;

import java.io.Serializable;
import java.util.List;
import java.util.Set;
import javax.persistence.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;

@Entity
@Table(name = "user_account")
public class UserAccount implements Serializable {

    @Autowired
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY, generator = "user_account_seq")
    @SequenceGenerator(name = "user_account_seq", sequenceName = "user_account_seq")
    @Column(name = "user_id")
    private Long userId ;
    //
    @Autowired
    @Column(name = "user_name")
    private String userName;
    //
    @Autowired
    @Column(name = "user_type")
    private String userType;
    //
    @Autowired
    @Column(name = "first_name")
    private String firstName;
    //
    @Autowired
    @Column(name = "last_name")
    private String lastName;
    //
    @Autowired
    @Column(name = "email")
    private String email;
    //
    @Autowired
    @Column(name = "phone_contact")
    private String phoneContact; 

    //
    @Autowired
    @Column(name = "address")
    private String address;
    //
    @Autowired
    @Column(name = "city")
    private String city ; 
     //
    @Autowired
    @Column(name = "state")
    private String state; 
     //
    @Autowired
    @Column(name = "country")
    private String country;
     //
    @Autowired
    @Column(name = "zipcode")
    private Integer zipcode = 0;

    //is the user account Active either due to user deactivation,admin deactivation, or nonpayment
    @Autowired
    @Column(name = "active")
    private boolean active = false;

    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "UserAccount")  
    @JoinColumn(name="user_id")
    private Password Password = null; 

    @OneToMany(mappedBy="UserAccount",cascade={CascadeType.ALL})    
    @JoinColumn(name="doc_id")      
    private List<Document> documents = null; 

    @Autowired(required = false)
    public UserAccount() {
    } 

  @Autowired(required = true)
    public UserAccount(Long userId, String userName, String userType, String firstName, String lastName, String email, String phoneContact, String address, String city, String state, String country, Integer zipcode) {
        this.userId = userId;
        this.userName = userName;
        this.userType = userType;
        this.firstName = firstName;
        this.lastName = lastName;
        this.email = email;
        this.phoneContact = phoneContact;
        this.address = address;
        this.city = city;
        this.state = state;
        this.country = country;
        this.zipcode = zipcode;
    }

    public com.profile.beans.Password getPassword() {
        return Password;
    }

    public void setPassword(com.profile.beans.Password Password) {
        this.Password = Password;
    }
    public boolean isActive() {
        return active;
    }
    public void setActive(boolean active) {
        this.active = active;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public List<Document> getDocuments() {
        return documents;
    }

    public void setDocuments(List<Document> documents) {
        this.documents = documents;
    }

    public Integer getZipcode() {
        return zipcode;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getPhoneContact() {
        return phoneContact;
    }

    public void setPhoneContact(String phoneContact) {
        this.phoneContact = phoneContact;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }

    public Long getUserId() {
        return userId;
    }

    public void setUserId(Long userId) {
        this.userId = userId;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getUserType() {
        return userType;
    }

    public void setUserType(String userType) {
        this.userType = userType;
    }

    public void setZipcode(Integer zipcode) {
        try
        {
        this.zipcode = zipcode;
        }
        catch (NumberFormatException exc)
        {
            exc.printStackTrace();
        }
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final UserAccount other = (UserAccount) obj;
        if ((this.userId == null) ? (other.userId != null) : !this.userId.equals(other.userId)) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 3;
        hash = 73 * hash + (this.userId != null ? this.userId.hashCode() : 0);
        return hash;
    }

    @Override
    public String toString() {
        return "UserAccount{" + "userId=" + userId + ", userName=" + userName + ", userType=" + userType + ", firstName=" + firstName + ", lastName=" + lastName + ", email=" + email + ", phoneContact=" + phoneContact + ", address=" + address + ", city=" + city + ", state=" + state + ", country=" + country + ", zipcode=" + zipcode + ", active=" + active + ", documents=" + documents + '}';
    }

} 
```

密码类：

```
package com.profile.beans;

import java.io.Serializable;
import javax.persistence.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.hibernate.annotations.Cascade;

@Entity
@Table(name = "Password")
public class Password implements Serializable {

    @Autowired(required = false)
    public Password() {
    }

    @Autowired(required = true)
    public Password(UserAccount UserAccount) {
       this.UserAccount = UserAccount;
    }
    @Autowired
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY, generator = "password_seq")
    @SequenceGenerator(name = "password_seq", sequenceName = "password_seq")
    @Column(name = "password_id")
    private Long passwordId;
    @Autowired
    @Column(name = "password")
    private String password = null;  
     //1 to 1 relation with UserAccounts
       //1 to 1 relation with UserAccounts
    @Autowired
    @Qualifier("UserAccount")
    @OneToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "user_id", referencedColumnName="user_id",nullable = false)
    private UserAccount UserAccount;

@Autowired(required = true)
        public Password(UserAccount UserAccount, String password) {
            this.UserAccount = UserAccount;
            this.password = password;
        }

    public UserAccount getUserAccount() {
        return UserAccount;
    }

    public void setUserAccount(UserAccount UserAccount) {
        this.UserAccount = UserAccount;
    }

    public Long getPasswordId() {
        return passwordId;
    }

    public void setPasswordId(Long passwordId) {
        this.passwordId = passwordId;
    }

        public String getPassword() {
            return password;
        }
    } 
```

我的数据库 DDL（MySQL 语法）：

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

DROP SCHEMA IF EXISTS `profiler`;
CREATE SCHEMA IF NOT EXISTS `profiler` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
DROP SCHEMA IF EXISTS `profiler` ;
CREATE SCHEMA IF NOT EXISTS `profiler` DEFAULT CHARACTER SET latin1 ;
USE `profiler` ;

-- -----------------------------------------------------
-- Table `profiler`.`user_account`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `profiler`.`user_account` ;

CREATE  TABLE IF NOT EXISTS `profiler`.`user_account` (
  `user_id` BIGINT(20) NOT NULL ,
  `user_name` VARCHAR(45) NULL DEFAULT NULL ,
  `user_type` VARCHAR(45) NULL DEFAULT NULL ,
  `first_name` VARCHAR(45) NULL DEFAULT NULL ,
  `last_name` VARCHAR(45) NULL DEFAULT NULL ,
  `email` VARCHAR(45) NULL DEFAULT NULL ,
  `phone_contact` VARCHAR(45) NULL DEFAULT NULL ,
  `address` VARCHAR(45) NULL DEFAULT NULL ,
  `city` VARCHAR(45) NULL DEFAULT NULL ,
  `state` VARCHAR(45) NULL DEFAULT NULL ,
  `country` VARCHAR(45) NULL DEFAULT NULL ,
  `zipcode` VARCHAR(45) NULL DEFAULT NULL ,
  `active` TINYINT(1) NULL DEFAULT NULL ,
  PRIMARY KEY (`user_id`) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

-- -----------------------------------------------------
-- Table `profiler`.`document`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `profiler`.`document` ;

CREATE  TABLE IF NOT EXISTS `profiler`.`document` (
  `doc_id` BIGINT(20) NOT NULL ,
  `title` VARCHAR(45) NULL DEFAULT NULL ,
  `format` VARCHAR(45) NULL DEFAULT NULL ,
  `url_string` VARCHAR(45) NULL DEFAULT NULL ,
  `size_in_bytes` INT(11) NULL DEFAULT NULL ,
  `created_on` TIMESTAMP NULL DEFAULT NULL ,
  `bytes` BLOB NULL DEFAULT NULL ,
  `height` INT(11) NULL DEFAULT NULL ,
  `width` INT(11) NULL DEFAULT NULL ,
  `user_id` BIGINT(20) NOT NULL ,
  PRIMARY KEY (`doc_id`) ,
  CONSTRAINT `user_id_fk`
    FOREIGN KEY (`user_id` )
    REFERENCES `profiler`.`user_account` (`user_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

-- -----------------------------------------------------
-- Table `profiler`.`password`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `profiler`.`password` ;

CREATE  TABLE IF NOT EXISTS `profiler`.`password` (
`password_id` BIGINT(20) NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
`user_id` BIGINT(20) NOT NULL ,
  PRIMARY KEY (`password_id`) ,
  CONSTRAINT `user_id_fk_1`
    FOREIGN KEY (`user_id` )
    REFERENCES `profiler`.`user_account` (`user_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

CREATE INDEX `user_id_fk_idx` ON `profiler`.`password` (`user_id` ASC) ;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
SET foreign_key_checks = 1; 
```

UserAccount 控制器类：

```
@Controller
@RequestMapping("/UserAccount")
public class UserAccountController {
      @Autowired
    private UserAccountDao userAccountDao;
     @Autowired
     private PasswordDao passwordDao;

    public UserAccountController() {
    }

    public UserAccountController(UserAccountDao userAccountDao, PasswordDao passwordDao) {
        this.userAccountDao = userAccountDao;
        this.passwordDao = passwordDao;
    }
@RequestMapping(value="/Register")
    public String RegisterationView()
{
    return "UserAccount/Register";
}
@RequestMapping(value="/Login")
    public String LoginView()
{
    return "UserAccount/Login";
}
@RequestMapping(value="/Update")
    public String UpdateView()
{
    return "UserAccount/Update";
}
    //create
    @RequestMapping(value="/create",method = RequestMethod.POST)
    public String create(
            @RequestParam("username") String username,
            @RequestParam("email") String email,
            @RequestParam("firstname") String firstName,
            @RequestParam("lastname") String lastName,
            @RequestParam("phonecontact") String phonecontact,
            @RequestParam("address") String address,
             @RequestParam("state") String state,
             @RequestParam("city") String city,
             @RequestParam("country") String country,
             @RequestParam("password") String password,
             @RequestParam("zipcode") Integer zipcode,
             HttpSession session,HttpServletRequest request, Model model)
    {
        String view = null ; 
        //*check if username exists
        //*if email exists

         UserAccount userAccount = new UserAccount(); 

        userAccount.setAddress(address);
        userAccount.setCity(city);
        userAccount.setCountry(country);
        userAccount.setState(state);
        userAccount.setPhoneContact(phonecontact);
        userAccount.setEmail(email);
        userAccount.setZipcode(zipcode);
        userAccount.setFirstName(firstName);
        userAccount.setLastName(lastName);
        userAccount.setUserName(username);
        userAccount.setUserType(utility.UserTypes.REGULAR);
        //instatiate password 
        //**password not exist before & must be at least characters long 

        Password userPassword = new Password(userAccount,password);
        userAccountDao.create(userAccount);
        passwordDao.create(userPassword);
        //add userAccount to model 
        model.addAttribute("userAccount", userAccount);
        session.setAttribute("userAccount", userAccount);
         view =  "UserAccount/UserMainMenu";

        return view;
    }
    //update
   @RequestMapping(value="/update",method = RequestMethod.GET)
    public String update( @RequestParam(value="username", required=false) String username,
            @RequestParam(value="email",required=false) String email,
            @RequestParam(value="firstname",required=false) String firstName,
            @RequestParam(value="lastname",required=false) String lastName,
            @RequestParam(value="phonecontact",required=false) String phonecontact,
            @RequestParam(value="address",required=false) String address,
            @RequestParam(value="state",required=false) String state,
            @RequestParam(value="city",required=false) String city,
            @RequestParam(value="country",required=false) String country,
            @RequestParam(value="zipcode",required=false) Integer zipcode,@RequestParam(value="update",required=false) String update,HttpSession session,HttpServletRequest request)
    {
         String view = null ; 
          UserAccount userAccount = (UserAccount)session.getAttribute("userAccount");
         //*check if username exists
        //*if email exists
          try
          {
              System.out.println("Class  UserAccountController, update:" + update); 
     if (update.equalsIgnoreCase("update"))
             {
        //reset values in case updated info 
        userAccount.setAddress(address);
        userAccount.setCity(city);
        userAccount.setCountry(country);
        userAccount.setState(state);
        userAccount.setPhoneContact(phonecontact);
        userAccount.setEmail(email);
        userAccount.setZipcode(zipcode);
        userAccount.setFirstName(firstName);
        userAccount.setLastName(lastName);
        userAccount.setUserName(username);
        userAccount.setUserType(utility.UserTypes.REGULAR);
        //instatiate password 
        userAccountDao.update(userAccount);
        //add userAccount to model 
        session.setAttribute("userAccount", userAccount);
        view =  "UserAccount/UserMainMenu";
             }
      if (update.equalsIgnoreCase("delete"))
             {

      System.out.println("Class  UserAccountController, userAccount: "+userAccount);
      //query for password that corresponds to particular user 
      Password password = (Password)passwordDao.getByUserAccount(userAccount);
      System.out.println("Class  UserAccountController, password: "+password );
     password.setUserAccount(null);
      //delete password 
      passwordDao.delete(password);
      //delete user account 
      userAccountDao.delete(userAccount);
      session.removeAttribute("userAccount");
      view =  "UserAccount/UserMainMenu";

             }
          }
          catch (Exception exc)
          {
              //forward to error page 
              exc.getMessage();
              view = "error";
          }
        return view;
    }
    //delete
    @RequestMapping(value="/delete",method = RequestMethod.DELETE)
    public String delete( @RequestParam("id")Long id,HttpSession session,HttpServletRequest request)
    {
        String view = null ; 
        UserAccount newUserAccount = userAccountDao.getById(id);
        userAccountDao.delete(newUserAccount);
        view =  "UserAccount/UserMainMenu";
        return view;
    }
    //read
    @RequestMapping(value="/read",method = RequestMethod.GET)
    public void read(Long id)
    {
        userAccountDao.getById(id);
    }

    public UserAccountDao getUserAccountDao() {
        return userAccountDao;
    }

    public void setUserAccountDao(UserAccountDao userAccountDao) {
        this.userAccountDao = userAccountDao;
    }

    public PasswordDao getPasswordDaoImpl() {
        return passwordDao;
    }

    public void setPasswordDaoImpl(PasswordDaoImpl passwordDao) {
        this.passwordDao = passwordDao;
    }

} 
```

PasswordDaoImpl 类：

```
@Repository
@Transactional
public class PasswordDaoImpl implements PasswordDao{
   @Autowired
    private SessionFactory sessionFactory;

    private Session currentSession()
    {
        return sessionFactory.getCurrentSession();
    }

    @Override
    public Password getByUserAccount(UserAccount UserAccount) { 
    String hql = "FROM com.profile.beans.Password WHERE Password.UserAccount.UserId =:id";
    Long id = UserAccount.getUserId();
    Query q = currentSession().createQuery(hql);
    return (Password)q.setParameter("id",id).list().get(0);
    }

    @Override
    public void create(Password Password) {
        currentSession().save(Password);
    }

    @Override
    public void delete(Password Password) {
        currentSession().delete(Password);
    }

    @Override
    public void update(Password Password) {
        currentSession().update(Password);
    }
       public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:43:15.517

您应该在删除 UserAccount 之前中断关系：

```
Password pass = userAccount.getPassword();
userAccount.setPassword(null);
userAccountDao.delete(pass);
userAccountDao.delete(userAccount); 
```

# c - 如何使用 c 中的指针指向总行或总列

> ID：12826775
> 
> 赞同：0
> 
> 时间：2012-10-10T19:22:42.240
> 
> 标签：c, arrays, pointers

例如：我有一个包含一些文本的文件..like

```
my name is sunny
i am a student 
```

我想从文件中读取并存储它，

```
a[0][0]=my,a[0][1]=name,a[0][2]=is,a[0][3]=sunny,

a[1][0]=i,a[1][1]=am,a[1][2]=a,a[1][3]. 
```

我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:31:20.413

您可以使用 fgets 读取每一行文本。对于读取的每一行，递增用于访问`a`第一个维度（行）的计数器。对于每个读取行，您使用 strtok 迭代该行中的所有标记。对于 strtok 返回的每个标记，您应该将指针归因于`a[i][j]`和 increment `j`。

当然`a`是指向char matriz的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:34:56.540

我没有测试它。这只是一个如何做的例子。

```
/* not real value; see limits.h header if you are in POSIX or equivalento to your env */
#define LINE_MAX 128
char line[LINE_MAX + 1];
char contents[MAX_LINES][MAX_WORDS];
char * token;
/* read file line by line */
while(fgets(line, LINE_MAX, fp) != NULL) {
 /* split words by white-space */
 token = strtok(buffer, " ");
 while(token != NULL) {
   // token is "my", after "name" and and so on.
   // store it into contents array. you can use strcpy() or strncpy() (more safe) 
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:49:39.090

好吧，我会给你一些线索。

首先声明 `a` 为

```
char a[2][3]; 
```

这个变量可以这样使用：

```
int main()
{
   char a[2][3];

   a[1][1]='a';
   printf("%c",a[1][1]);

} 
```

然后用于 `fscanf(f, "%c", a[][]);` 从文件中读取，请参阅互联网教程和手册页。

其他选择是动态地进行：

声明 `a` 为：

```
char **a; 
```

之后，您像这样分配内存：

```
a = (char**)malloc(2 * sizeof(char*));  //Two times the size of char 
```

现在你有了第一个数组的内存，我们想在数组的每个空间中“插入”另一个数组。像矩阵一样思考它。

```
for(i=0; i<3; i++)
    a[i] = (char*)malloc(3 * sizeof(char)); 
```

这给了你你的矩阵。像第一种情况一样使用它。

问题的情况是读取字符串，所以尝试用这个结构而不是 char 做同样的事情

```
typedef struct string {
    char cadena[6];
}myString; 
```

祝你好运！

# jenkins - 将 Hudson 升级到 Jenkins：500 错误

> ID：12826783
> 
> 赞同：2
> 
> 时间：2012-10-10T19:23:13.470
> 
> 标签：jenkins, hudson

我尝试从 Hudson 升级到 Jenkins，但我在主页上收到“状态代码：500 错误”。我在这里提交了一份错误报告：[https](https://issues.jenkins-ci.org/browse/JENKINS-15309) ://issues.jenkins-ci.org/browse/JENKINS-15309但没有人回应。

还有其他人知道发生了什么吗？我真的很想从 Hudson 转换为 Jenkins。

部分堆栈跟踪：

```
Status Code: 500
Exception: org.apache.commons.jelly.JellyTagException: jar:file:/appserv/devimat/hudson/war/WEB-INF/lib/jenkins-core-1.483.jar!/hudson/model/View/index.jelly:44:43: <st:include> Cannot invoke method isEmpty() on null object
Stacktrace:

javax.servlet.ServletException: org.apache.commons.jelly.JellyTagException: jar:file:/appserv/devimat/hudson/war/WEB-INF/lib/jenkins-core-1.483.jar!/hudson/model/View/index.jelly:44:43: <st:include> Cannot invoke method isEmpty() on null object
at org.kohsuke.stapler.jelly.JellyClassTearOff.serveIndexJelly(JellyClassTearOff.java:112)
at org.kohsuke.stapler.jelly.JellyFacet.handleIndexRequest(JellyFacet.java:127)
at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:625)
at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
at org.kohsuke.stapler.Stapler.invoke(Stapler.java:488)
at org.kohsuke.stapler.Stapler.service(Stapler.java:162)
[...]

Caused by: org.apache.commons.jelly.JellyTagException: jar:file:/appserv/devimat/hudson/war/WEB-INF/lib/jenkins-core-1.483.jar!/hudson/model/View/index.jelly:44:43: <st:include> Cannot invoke method isEmpty() on null object
at org.apache.commons.jelly.impl.TagScript.handleException(TagScript.java:716)
at org.apache.commons.jelly.impl.TagScript.run(TagScript.java:282)
at org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)
at org.kohsuke.stapler.jelly.CallTagLibScript$1.run(CallTagLibScript.java:98)
at org.apache.commons.jelly.tags.define.InvokeBodyTag.doTag(InvokeBodyTag.java:91)
at org.apache.commons.jelly.impl.TagScript.run(TagScript.java:270)
at org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)
at org.apache.commons.jelly.tags.core.CoreTagLibrary$1.run(CoreTagLibrary.java:98)
at org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)
[...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:40:47.790

此时从 Hudson 升级到 Jenkins 将非常困难，因为代码库自 2010 年底拆分以来已经出现了很大差异。我很确定您的错误是由于预期的配置文件格式不兼容哈德逊和詹金斯之间。

在升级之前确保您拥有最新版本的 Hudson 可能会有所帮助，然后选择大约在同一时间发布的 Jenkins 版本，但我不能保证这会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:43:56.297

这就是我们的做法：

1.  在新服务器上安装 Jenkins，以及您喜欢的任何插件。

2.  假设您有从机，请将 Jenkins-Agents 与现有的（Hudson's）并行安装。

3.  手动将您的工作从 Hudson 复制到 Jenkins，同时查看流程。

我知道这听起来很乏味，但它通常比尝试将 Hudson 的 DB 转换为 Jenkins 现在所需的结构要快得多，尤其是在拆分后许多插件发生了变化。

干杯

# java - Java 动作监听器

> ID：12826787
> 
> 赞同：0
> 
> 时间：2012-10-10T19:23:34.593
> 
> 标签：java, android, timer, actionlistener, countdowntimer

> **可能重复：**
> [CountDownTimer- 用户递增。问题](https://stackoverflow.com/questions/12808201/countdowntimer-that-the-user-increments-issues)

我必须制作一个应用程序，允许用户每次单击按钮将时间增加 +1。然后在按钮停止单击后等待三秒钟，然后开始倒计时。

我一直很困惑，然后意识到我可以通过一个 java 动作侦听器来实现这一点，我在其中使用了类似的东西。我发布了我的代码，但这不能正常工作 - 只是想知道是否有人可以引导我走向正确的方向。

谢谢

```
@SuppressWarnings("unused")
public class MainActivity extends Activity {

private static String TAG = "cs313f12p1a";
    Button stoptime;
    public TextView timedisplay;
    public myTimer wavetimer;
    private long millisInFuture;
    private long millisUntilFinished;
    private long countDownInterval;
    private long onclicktime;
    private WaveInterface model;
    public long counter;

    private boolean buttonClicked;
    private Thread thread;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     
    stoptime = (Button) findViewById(R.id.button2);
    stoptime.setText("Stop Timer");
    timedisplay = (TextView) findViewById(R.id.mycounter);
    timedisplay.setText("Time Left: " + millisUntilFinished);
    wavetimer = new myTimer (millisInFuture, countDownInterval);
    counter = 01;
    final MainActivity MainActivity = this;

    stoptime.setOnClickListener(new OnClickListener(){

    public void onClick(View v) {
        if (!buttonClicked){
            counter++;
        } else {

            wavetimer.start();
        }

 }

    }});

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:43:24.737

好吧，看看您发布的代码，我认为它永远不会起作用-您在 buttonClicked 为真时启动计时器，但您从未将其设置为该状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:58:03.693

我找到了使用计时器的更好解决方案。

您现在使用它的方式是错误的，请查看此链接：

[如何在 Android TextView 中更改文本](https://stackoverflow.com/questions/2300169/how-to-change-text-in-android-textview)

# oop - 如何编写通用函数来操作私有属性？

> ID：12826792
> 
> 赞同：2
> 
> 时间：2012-10-10T19:23:51.243
> 
> 标签：oop, matlab, properties, private

在 Matlab 中，我想对类的私有成员执行一些操作。我也想在其他课程上执行完全相同的任务。显而易见的解决方案是在一个单独的 M 文件中编写一个函数，所有类都调用该函数来执行此任务。然而，这在 Matlab 中似乎是不可能的（见下文）。还有另一种方法可以做到这一点吗？

这是具体的问题：假设我有一个包含内容的 m 文件

```
classdef PrivateTest
    properties (Access=private)
        a
    end

    methods
        function this = directWrite(this, v)
            this.a = v;
        end
        function this = sameFileWrite(this, v)
            this = writePrivate(this, v);
        end
        function this = otherFileWrite(this, v)
            this = otherFileWritePrivate(this, v);
        end
        function print(this)
            disp(this.a);
        end
    end
end

function this = writePrivate(this, v)
    this.a = v;
end 
```

...以及另一个包含内容的 m 文件

```
function this = otherFileWritePrivate(this, v)
    this.a = v;
end 
```

实例化后`p = PrivateTest`，这两个命令都可以正常工作（如预期的那样）：

```
p = p.directWrite(1);
p = p.sameFileWrite(2); 
```

...但是即使它是相同的代码，这个命令也不起作用，只是在不同的 m 文件中：

```
p = p.otherFileWrite(3); 
```

因此，似乎任何对类的私有属性执行操作的代码都必须与定义这些私有属性的 classdef 位于同一个 m 文件中。另一种可能性可能是让所有类都继承一个具有写入方法的类，但 Matlab 也不允许这样做。在一个 m 文件中，我会有以下代码：

```
classdef WriteableA
    methods
        function this = inheritWrite(this, v)
            this.a = v;
        end
    end
end 
```

...在另一个 m 文件中，我将拥有以下代码：

```
classdef PrivateTestInherit < WriteableA
    properties (Access=private)
        a
    end
end 
```

但是，在实例化之后`p = PrivateTestInherit;`，该命令`p.inheritWrite(4)`会导致与之前相同的错误消息：“不允许设置 'PrivateTestInherit' 类的 'a' 属性。”

鉴于此，如何在 Matlab 中泛化操纵私有属性的代码，或者有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:35:53.573

不能在类之外操作私有属性，这就是为什么它们被称为私有的。这个想法被称为封装。

您可以通过多种方式解决它：

1.  定义包装私有的公共属性，并更改它。（见下面的代码）
2.  （继承模式）做一个普通的父类，你的其他类继承函数

* * *

```
classdef PrivateTest
    properties (Access=private)
        a
    end

    properties(Access=public,Dependent)
        A
    end

    methods
        function this = set.A(this,val)
            this.a = val;
        end

        function val = get.A(this)
           val = this.a;
        end

        function this = directWrite(this, v)
            this.a = v;
        end
        function this = sameFileWrite(this, v)
            this = writePrivate(this, v);
        end
        function this = otherFileWrite(this, v)
            this = otherFileWritePrivate(this, v);
        end
        function print(this)
            disp(this.a);
        end
    end
end

function this = writePrivate(this, v)
    this.A = v;
end 
```

# javascript - 检测文件选择jQuery

> ID：12826793
> 
> 赞同：1
> 
> 时间：2012-10-10T19:23:58.993
> 
> 标签：javascript, jquery, ajax, file

我一直在使用明显的：

```
 /*Place the file into the editing image */
    $j("#file").change(function(e) {
            type="upload";
            submitChanges("preview");
    }); 
```

submitChanges 函数基本上通过“点击”提交（隐藏）来提交表单。使用 AJAX 表单插件监控表单。提交工作正常，与问题无关，但在这里只是为了给你一个背景。

使用 Firefox 和 IE8 一切正常。如果用户选择一个文件 AJAX 就可以了。用户可以再次单击浏览并选择新文件或相同文件，更改将再次触发。

问题在于基于 Webkit 的浏览器（Chrome 和 Safari），仅当用户选择的文件与之前选择的文件不同时才会触发更改事件。这些浏览器会逐字解释变化。由于选择了相同的文件，因此该框未更改，因此未触发该事件。我想模仿 IE 和 Firefox 的功能，因为无论选择什么文件都会触发此事件。

有什么解决办法吗？

根据要求的HTML：

```
 <table border="0" style="width:100%">
                    <tbody>
                            <tr>
                                    <td style="width:50%"><input id="preview" type="button" value="Preview"/></td>
                                    <td><input type="button" id="save" value="Save" /></td>
                            </tr>
                            <tr>
                                    <td style="width:50%">Upload (JPEG Only):</td>
                                    <td><form id="uploadForm" class="upload" method="POST" enctype="multipart/form-data" action="/path/to/file.php?action=preview"><input type="file" name="file" id="file" /><input type="submit" id="uploadSubmit" style="display:none" /><div id="hiddenFields"><!-- JQUERY --></div></form></td>
                            </tr>
                    </tbody>
            </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:19:49.860

我知道这有点小技巧，但可能是一个临时解决方案。

即使用户选择了相同的文件，也要触发更改事件，请在完成所需的所有操作后清理该字段。

```
$("#file").on('change', function(e) {
    type = "upload"
    submitChanges("preview")
    $(this).val('')
}) 
```

看到它在这里工作：http: [//jsfiddle.net/RASG/2rrqv/](http://jsfiddle.net/RASG/2rrqv/)

使用 Chrome 21 和 FF 15 进行测试。

对于 IE，这里还有另一个“hack”：[为什么 IE 不重置文件输入字段？](https://stackoverflow.com/questions/8368104/why-doesnt-ie-reset-file-input-field)

# php - 使用数据库创建 Magento 模块

> ID：12826796
> 
> 赞同：1
> 
> 时间：2012-10-10T19:24:07.937
> 
> 标签：php, mysql

您好我正在尝试使用数据库创建简单的模块，但我找不到我的错误，我不知道如何找到它（以及调试方法）我的文件结构是：
MyNameSpace
-SkipCart
--controllers
---IndexController。 php
--etc
---config.xml
--Helper
---Data.php
--Model
---Mysql4
----SkipCart
------Collection.php
----SkipCart.php
--- SkipCart.php
--sql
---SkipCart_setup
----mysql4-install-0.0.1.php

文件中的代码是：

索引控制器.php

```
class MyNameSpace_SkipCart_IndexController extends Mage_Adminhtml_Controller_Action {
     public function indexAction()
    {
        $this->loadLayout();

        //create a text block with the name of "example-block"
        $block = $this->getLayout()
        ->createBlock('core/text', 'example-block')
        ->setText('<h1>This is a text block</h1>');

        $this->_addContent($block);
  //add menu active
        $this->_setActiveMenu('tutorial_menu/first_page');
       // $this->_setActiveMenu('system/another_menu_from_us');
        $this->renderLayout();

    }

} 
```

配置文件

```
<config>

    <admin>
        <routers>
            <test>
                <use>admin</use>
                <args>
                    <module>MyNameSpace_SkipCart</module>
                    <frontName>skipcart</frontName>
                </args>
            </test>
        </routers>
    </admin>
     <adminhtml>
        <menu>
            <tutorial_menu translate="title" module="skipcart">
                <title>Skip Cart</title> 
                <sort_order>9999</sort_order>
                <children>
                    <first_page module="skipcart">
                        <title>Our First Page</title> 
                        <action>skipcart/index/index</action>
                    </first_page>
                </children>
            </tutorial_menu>
        </menu> 
         <system>
                <children>
                    <another_menu_from_us>
                        <title>Here Too!</title> 
                        <action>skipcart/index/index</action>
                    </another_menu_from_us>
                </children>
            </system>
    </adminhtml>
    <global>
        <helpers>
            <skipcart>
                <class>MyNameSpace_SkipCart_Helper</class>
            </skipcart>
        </helpers>
    </global>
    <global>
        <blocks>
            <checkout>
                <rewrite>
                    <cart>MyNameSpace_SkipCart_Block_Cart</cart>
                </rewrite>
            </checkout>
        </blocks>
    </global>

     <global>
        <models>
            <skipcart>
                <class>MyNameSpace_SkipCart_Model</class>
                <resourceModel>mynamespace_skipcart_mysql4</resourceModel>
            </skipcart>
            <skipcart_mysql4>
                <class>MyNameSpace_SkipCart_Model_Mysql4</class>
                <entities>
                    <skipcart>
                        <table>skipcart</table>
                    </skipcart>
                </entities>
            </skipcart_mysql4>
        </models>
        <resources>
            <skipcart_setup>
                <setup>
                    <module>MyNameSpace_SkipCart</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </skipcart_setup>
            <skipcart_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </skipcart_write>
            <skipcart_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </skipcart_read>
        </resources>
        <blocks>
            <skipcart>
                <class>MyNameSpace_SkipCart_Block</class>
            </skipcart>
        </blocks>
        <helpers>
            <skipcart>
                <class>MyNameSpace_SkipCart_Helper</class>
            </skipcart>
        </helpers>
    </global>
</config> 
```

数据.php

```
class MyNameSpace_SkipCart_Helper_Data extends Mage_Core_Helper_Abstract
{
} 
```

--Model
---Mysql4
---SkipCart.php

```
class MyNameSpace_SkipCart_Model_SkipCart extends Mage_Core_Model_Abstract {

    public function _construct(){
        parent::_construct();
        $this->_init('skipcart/skipcart');
    }
} 
```

--Model
---Mysql4
----SkipCart
-----Collection.php

```
 class MyNameSpace_SkipCart_Model_Mysql4_SkipCart_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract
{
    public function _construct()
    {

        $this->_init('SkipCart/skipcart');
    }
} 
```

--Model
---Mysql4
----SkipCart
----SkipCart.php

```
 class MyNameSpace_SkipCart_Model_Mysql4_SkipCart extends Mage_Core_Model_Mysql4_Abstract
    {
        public function _construct()
        {   
            $this->_init('skipcart/skipcart', 'skipcart_id');
        }
    } 
```

--sql
---SkipCart_setup
----mysql4-install-0.0.1.php

```
 <?php

    $installer = $this;

    $installer->startSetup();

    $installer->run("

    -- DROP TABLE IF EXISTS {$this->getTable('skipcart')};
    CREATE TABLE {$this->getTable('skipcart')} (
      `skipcart_id` int(11) unsigned NOT NULL auto_increment,
      `status` smallint(6) NOT NULL default '0',
      PRIMARY KEY (`skipcart_id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

        ");

    $installer->endSetup(); 
```

任何人都可以帮助我找到问题，并且可以解释我如何单独查找和调试错误吗？

# mysql - 如何将连接表的条件计数放在同一个连接表的单独列中

> ID：12826797
> 
> 赞同：1
> 
> 时间：2012-10-10T19:24:11.073
> 
> 标签：mysql

可以说，我有两张桌子 -`people`和`bonus`

```
------------
people
------------
people_id | company_id  | job_id
  1       |     1       |    2
  2       |     1       |    4
  3       |     2       |    1
  4       |     2       |    3
  5       |     3       |    5

------------
bonus
------------
job_id    | bonus_id 
  1       |     101    
  2       |     102    
  3       |     103 
```

现在，我想要一个像下面这样的连接表

```
-------------
JOINED TABLE 
-------------
people_id | company_id  | job_id | bonus_id | no_of_bonus_for_company
  1       |     1       |    2   |   102    |      1
  2       |     1       |    4   |   NULL   |      1
  3       |     2       |    1   |   101    |      2
  4       |     2       |    3   |   103    |      2
  5       |     3       |    5   |   NULL   |      0 
```

我需要在中包含主要搜索词`people_id`-

```
SELECT p.people_id,
       p.company_id,
       p.job_id,
       b.bonus_id
FROM people p
LEFT JOIN bonus b
     ON p.job_id = b.job_id
WHERE p.people_id IN (1,2,3,4,5)
ORDER BY p.people_id ASC; 
```

但是如何获得连接表的第五列？它实际上算数。连接表本身中每个公司 ID 的奖金 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:20:47.813

我只能假设您告诉我们图片的一部分，所以我将保留对数据库模式、规范化等的判断。

鉴于提供的事实，您可以通过以下方式检索信息。

**注意**：这是 TSQL 语法，但我不认为 mySQL 语法应该有很大不同，即 ISNULL -> IFNULL

```
 SELECT p.people_id
        , p.company_id
        , p.job_id
        , b.bonus_id
        , ISNULL((
                   SELECT COUNT(pt.Job_Id)
                     FROM Bonus bt 
               INNER JOIN People pt
                       ON pt.job_Id = bt.job_Id
                    WHERE pt.company_Id = p.company_Id
                 GROUP BY pt.company_Id                 
                 ), 0) AS no_of_bonus_for_company
     FROM People p 
LEFT JOIN Bonus b
       ON p.job_Id = b.job_Id 
```

# c# - “清单 XML 签名无效”

> ID：12826798
> 
> 赞同：13
> 
> 时间：2012-10-10T19:24:11.797
> 
> 标签：c#, deployment, visual-studio-2012, xml-signature

操作系统：Windows 7 64 位，使用安装了 .NET 4.5 的 Visual Studio Pro 2012。

我在 Visual Studios 中使用了 Publish 选项，并确保我单击了 Sign the clickOnce manifest 和 Sign the Assembly。它仍然无法在另一台计算机上运行，​​并说我没有有效的 XML 签名。我在下面粘贴了错误消息。

我还阅读[了：如何移动 ClickOnce 部署包](https://stackoverflow.com/questions/174764/how-to-move-a-clickonce-deployment-package)，[我必须签署 ClickOnce 清单吗？](https://stackoverflow.com/questions/12445091/do-i-have-to-sign-my-clickonce-manifest). [VS2012 .NET 4.0 Clickonce VSTO CryptographicException：无法为提供的签名算法](https://stackoverflow.com/questions/10901035/exception-reading-manifest-from-file-the-manifest-may-not-be-valid-or-the-file)和其他几个算法创建 SignatureDescription。

我至少需要能够在 .NET 4.0 上部署我的程序，并且我无法访问其他版本的 Visual Studio。提前致谢！

完整的错误如下：

* * *

平台版本信息 Windows：5.1.2600.196608 (Win32NT) 公共语言运行时：2.0.50727.3603 System.Deployment.dll：2.0.50727.3053 (netfxsp.050727-3000) mscorwks.dll：2.0.50727.3603 (GDR)df-dll-73600 dll : 2.0.50727.3053 (netfxsp.050727-3000) dfshim.dll : 4.0.31106.0 (Main.031106-0000)

来源 部署网址：file:///C:/Documents%20and%20Settings/Administrator/Desktop/EatonWizard.application

错误摘要 下面是错误摘要，这些错误的详细信息在日志后面列出。* 激活 C:\Documents and Settings\Administrator\Desktop\EatonWizard.application 导致异常。检测到以下失败消息： + 从 file:///C:/Documents%20and%20Settings/Administrator/Desktop/EatonWizard.application 读取清单时出现异常：清单可能无效或无法打开文件。+ 清单 XML 签名无效。+ 无法为提供的签名算法创建 SignatureDescription。

组件存储事务失败摘要未检测到事务错误。

警告 此操作期间没有警告。

操作进度状态 * [10/10/2012 2:05:02 PM]：C:\Documents and Settings\Administrator\Desktop\EatonWizard.application 的激活已开始。

错误详细信息 在此操作期间检测到以下错误。* [10/10/2012 2:05:02 PM] System.Deployment.Application.InvalidDeploymentException (ManifestParse) - 从 file:///C:/Documents%20and%20Settings/Administrator/Desktop/EatonWizard.application 读取清单的异常：清单可能无效或文件无法打开。- 来源：System.Deployment - 堆栈跟踪：在 System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri) 在 System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState、IDownloadNotification 通知、DownloadOptions 选项、ServerInformation& serverInformation）在 System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation（Uri activationUri，布尔 isShortcut，字符串 textualSubId , String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl) at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state) --- 内部异常 --- System.Deployment.Application.InvalidDeploymentException (SignatureValidation) - 清单 XML 签名无效。- 来源：系统。部署 - 堆栈跟踪：在 System.Deployment.Application.Manifest.AssemblyManifest.ValidateSignature(Stream s) 在 System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri) --- 内部异常 --- 系统.Security.Cryptography.CryptographicException - 无法为提供的签名算法创建 SignatureDescription。- 来源：System.Security - 堆栈跟踪：System.Security.Cryptography.Xml.SignedXml.CheckSignedInfo(AsymmetricAlgorithm key) at System.Security.Cryptography.Xml.SignedXml.CheckSignatureReturningKey(AsymmetricAlgorithm& signingKey) at System.Deployment.Internal.CodeSigning .SignedCmiManifest。

组件商店交易详情 没有可用的交易信息。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-05T18:11:46.190

我今天遇到了同样的问题。我就是这样解决的：

导致问题的原因：我们使用 vs2012 和框架 4.5 创建了一个 clickonce 项目。然后我们将目标框架更改为 4.0（客户要求）。

问题是：Framework 4.5 使用 SHA-256 算法进行签名，而 4.0 使用 SHA-1。当我们将目标框架更改为 4.0 并且 vs2012 并没有更改算法时。

解决方案：手动更改算法，生成新证书。

转到项目属性-> 签名

您将看到“签名算法”中使用的算法。您可以创建一个新的测试证书，然后您会注意到它更改为“sha1RSA”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-03T12:41:46.583

*请注意，我会将此添加为评论，但由于愚蠢的声誉规则，我只能添加一个答案！*

* * *

## 当心新的代码签名证书

我最近遇到了这个问题，因为我们的代码签名证书需要更新。因此，对于 Microsoft 在 ClickOnce 部署期间没有修补 XP 版本的 Framework 4 以使用 SHA2 证书这一事实视而不见，我告诉我所有的 clickonce 项目使用新的代码签名证书。

因为我还对应用程序进行基于代码的更新，而不仅仅是让 Microsoft 处理它，因此它对最终用户来说是一种更加无缝的体验，而无需他们按我的应用程序的样式按下按钮。

但是，我遇到了一个错误，我的程序没有报告清单错误，而是挂起（我的错！）。为了在工作到凌晨 3 点后得到更新以发现这个问题，我不得不创建一个由 Visual Studio 颁发的临时证书。那有什么问题吗？代码更新不再是无缝的，因为微软提出了一个愚蠢的对话框，因为发布者是未知的！

所以我最担心的是，是的，好吧，据说从星期一开始就不支持 XP 了，但这并不意味着 Framework 4 不应该接受新证书，如果这是他们向所有人推送的内容。微软甚至积极参与了这一推动！

唯一可行的答案是如上，您必须使用 Visual Studio 创建一个不受信任的临时证书，这太荒谬了！！！（我还是有希望，也许我没有找到正确的方法来使用新证书）

# android - Google Nexus 7：图片宽度大于屏幕宽度

> ID：12826800
> 
> 赞同：0
> 
> 时间：2012-10-10T19:24:23.100
> 
> 标签：android, nexus-7

Google Nexus 7 是一款 800x1280 像素的平板电脑（不包括系统 75/64 像素的条形高度）。但是当我使用相机应用程序拍照时，生成的图片尺寸为 960x1280。相机首选项中没有设置放大倍率。

想知道什么给了。如果我必须在屏幕上渲染这张图片并缩放它并保持纵横比，它不会从原始高度剪掉一些信息吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:38:56.823

我不知道你为什么期望你拍摄的照片的分辨率与屏幕相同。当您使用普通数码相机拍照时，您不会期望它与它的屏幕相匹配，对吗？大多数数码相机的屏幕分辨率都很低。

所以是的，如果您的图片和屏幕具有不同的纵横比，那么如果您放大它，您将剪切区域或在侧面有空条。

# razor - 链接到 WebMatrix 中的外部站点

> ID：12826805
> 
> 赞同：0
> 
> 时间：2012-10-10T19:24:32.197
> 
> 标签：razor, webmatrix

我正在为我们的一些外部站点构建一个注册表应用程序，但是当我尝试显示我需要的项目时；WebMatrix 不断将 localhost 添加到所有内容。所有这些网站都在我正在构建的应用程序之外，单击时会在新窗口/选项卡中打开。如何在不将 localhost 附加到它的情况下创建 a href 标记并仅使用我在数据库中拥有的 URL？

# ruby-on-rails - 入门指南后部署 rails

> ID：12826811
> 
> 赞同：2
> 
> 时间：2012-10-10T19:24:46.563
> 
> 标签：ruby-on-rails, ruby

[我是 Ruby on Rails 的新手，我刚刚完成了http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)上的入门指南。在指南中，我在`http://localhost:3000`. 现在我只是将项目文件夹移动到我的网站目录，但我无法通过输入 URL 访问项目的页面。我需要执行哪些步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:27:54.127

您需要在安装了 Rails 的服务器上托管 Rails 应用程序。然后，您需要确保启动在该 Web 服务器上运行的任何 Web 服务器，以便它可以开始接受请求。

如果你还没有这样做，我建议你找一个 Rails 友好的 web 主机来为你处理服务器配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:33:12.043

假设您的 Web 服务器是 Apache 2，您可以使用[Phusion Passenger](http://www.modrails.com/)。

看，Rails 带有自己的称为 Webrick 的小型 Web 服务器，由于各种原因，它并不适合生产。因此，当您运行时，您`rails server`会启动*该*服务器。

您需要告诉您的服务器（例如 Apache 2）要通过您的应用程序处理哪些页面，以及如何处理。而Passenger让这变得非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:57:21.830

Rails 教程的第一章介绍了 Rails 部署的最佳指南。它涵盖了源代码版本控制以及设置部署环境。这是第一章的链接：**http ://ruby.railstutorial.org/ruby-on-rails-tutorial-book#top**

希望这可以帮助。

# c++ - 旋转图像会导致 Qt 失真

> ID：12826812
> 
> 赞同：2
> 
> 时间：2012-10-10T19:24:48.450
> 
> 标签：c++, qt, image-rotation, rounding-error

我在 Qt 中旋转图像时遇到了一些问题。每次我用[QPainter](http://qt-project.org/doc/qt-4.8/QPainter.html)旋转我的图像时，它都会变得越来越扭曲。这是初始图像：

![http://imageshack.us/photo/my-images/838/ship1.png/](../Images/7c7005a91ac0a3a1a2676d00fe71f06e.png)

经过一些迭代，它变成：

![http://imageshack.us/photo/my-images/11/ship2e.png/](../Images/f2b6d5eb9a479ce1c91311f2714df68f.png)

这是我的代码：

```
void Ship::Move(int x, int y)
{
    QPixmap rotatePixmap(shipPixels.size());
    rotatePixmap.fill(Qt::transparent);

    QTransform transform;
    transform.translate(
            rotatePixmap.size().width() / 2,
            rotatePixmap.size().height() / 2
    );

    transform.rotate(degree);
    transform.translate(
            - rotatePixmap.size().width() / 2, 
            - rotatePixmap.size().height() / 2
    );

    QPainter p(&rotatePixmap);
    p.setRenderHints(
            QPainter::Antialiasing | QPainter::SmoothPixmapTransform,
            true
    );

    p.setTransform(transform);
    p.drawPixmap(0, 0, shipPixels);
    p.end();

    shipPixels = rotatePixmap;
    this->setPixmap(shipPixels);
    this->move(QPoint(x, y));
    degree = 0;
} 
```

对我来说，Qt 保留了图像质量。这种行为完全奇怪。有原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:33:12.080

根据答案，新代码是这样的。发现自己遇到相同问题的其他用户可以获取此代码：

```
void Ship::Move(int x, int y)
{
    QPixmap sourceImage(shipPixels);

    QPixmap rotatePixmap(sourceImage.size());
    rotatePixmap.fill(Qt::transparent);

    QTransform transform;
    transform.translate(sourceImage.size().width() / 2, sourceImage.size().height() / 2);
    transform.rotate(degree);
    transform.translate(-sourceImage.size().width() / 2, -sourceImage.size().height() / 2);

    QPainter p;
    p.setRenderHints(QPainter::Antialiasing|QPainter::SmoothPixmapTransform, true);
    p.begin(&rotatePixmap);
    p.setTransform(transform);
    p.drawPixmap(0, 0, sourceImage);
    p.end();

    rotatePixmap.save("temp.png");

    this->setPixmap(rotatePixmap);
    this->move(QPoint(x, y));
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-10-12T13:28:07.987

```
QPainter pixmap;
pixmap.setRenderHints(QPainter::Antialiasing|QPainter::SmoothPixmapTransform,true); 
```

这就是你要找的。

# sql - @@Error 可以在成功插入时为非零吗？

> ID：12826813
> 
> 赞同：2
> 
> 时间：2012-10-10T19:24:48.370
> 
> 标签：sql, sql-server

我不确定如何做到这一点。我们正在调试一个问题，如果插入成功，我们需要知道@@Error 是否可能为非零。如果@Error <> 0，我们有一个退出的存储过程。如果我们知道这个问题的答案，那会有所帮助。有人知道吗？

代码如下。我们想知道如果插入成功，是否有可能进入 goto 语句。

```
 -- This happened
    insert into Workflow
    (SubID, ProcessID, LineID, ReadTime)
    values
    (@sub_id, @proc_id, @line_id, @read_time)

    set @error = @@Error
    set @insertedWorkflowId = SCOPE_IDENTITY()
    if @error <> 0 
    begin
        set @error_desc = 'insert into tw_workflow'
        goto ERROR_EXIT
    end

    -- This didn't happen
    INSERT INTO Master.WorkflowEventProcessing (WorkflowId, SubId, ReadTime, ProcessId, LineId) VALUES (@insertedWorkflowId, @sub_id, @read_time, @proc_id, @line_id)
    INSERT INTO Master.ProcessLogging (ProcessCode, WorkflowId, SubId, EventTime) VALUES (10, @insertedWorkflowId, @sub_id, GETDATE()) 
```

**编辑**

也许更好的方式来说明问题是这样的：第一个插入发生了，但最后两个没有。这怎么可能？也许最后两个插入只是失败了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:00:06.893

如果此插入成功，那么将有一个非零[@@rowcount](http://msdn.microsoft.com/en-us/library/ms187316.aspx)，因为您只是在使用`values`（而不是`select...where`可以“成功”插入 0 行）。您可以使用它在其中编写一些调试检查，或者将其作为例程的一部分永久包含在内。

```
insert into Workflow
(SubID, ProcessID, LineID, ReadTime)
values
(@sub_id, @proc_id, @line_id, @read_time)

if @@rowcount = 0 or @@error <> 0 -- Problems! 
```

**更新**

如果触发器在插入时触发，则触发器中的错误严重性为：

*   < 10：将正常运行，@@error = 0
*   11 到 16 之间：插入**会成功，@@error != 0**
*   17、18：插入成功，执行停止
*   19（带日志）：插入将成功，执行将停止
*   > 20（带日志）：插入**不会**成功，执行将停止

我通过在工作流表中添加触发器并测试各种严重性值来实现这一点，所以我不能轻易地说这将是所有环境中的确切情况：

```
alter trigger workflowtrig on workflow after insert as begin
    raiserror(13032, 20, 1) with log -- with log is necessary for severity > 18
end 
```

**太棒**了，在那之后，我们对这个问题有了一些答案：

> @@Error 可以在成功插入时为非零吗？

**是的......但是**，我不确定是否还有其他一系列事件可能导致这种情况，而且我没有足够的创造力来组合测试来证明这一点。希望其他人肯定知道。

我知道这一切都不是一个很好的答案，但是对于评论来说太大了，我认为它可能会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:54:59.927

根据 T-SQL[文档](http://technet.microsoft.com/en-us/library/ms188790.aspx)，这应该是不可能的。您也可以将其包装在 try/catch 中，以尝试捕获大多数错误。

您可能还需要考虑 SCOPE_IDENTITY() 未返回正确值或您认为的值的可能性。如果您在 Master.WorkflowEventProcessing 和 Master.ProcessLogging 表上有 FK，则尝试插入这些表时可能会收到 FK 错误，因为从 SCOPE_IDENTITY 返回的值不正确。

# wcf - WCF：为什么要使用 System.ServiceModel.Channels.Message 类？

> ID：12826817
> 
> 赞同：2
> 
> 时间：2012-10-10T19:24:57.193
> 
> 标签：wcf, message

我有一个普遍的问题。为什么有时我们应该在创建 WCF 服务时使用 System.ServiceModel.Channels.Message 类而不是一些具体的类？

例如：

1）我们可以使用以下内容：

```
public Person GetPersonById(int id)
{
    Person person = Employees.CreateEmployees().First(e => e.Id == id);
    return person;
} 
```

2）但我们也可以使用以下内容：

```
public Message GetPersonById(Message id)
{
    string firstName = Employees.CreateEmployees().First(e => e.Id == id.GetBody<int>()).FirstName;
    Message response = Message.CreateMessage(id.Version, ReplyAction, firstName);
    return response;
} 
```

有什么不同？在这两种情况下我会得到相同的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:45:57.720

简短的回答 - 它是更高级别的抽象。
例如，如果您的服务必须在不实际更改其合同的情况下发送可扩展的消息类型列表，或者想象一个负载平衡 WCF 代理。

同样在消息处理管道中，如果没有这种抽象，就不可能创建用于处理消息的通用机制。

# algorithm - 会话调度的遗传算法

> ID：12826826
> 
> 赞同：2
> 
> 时间：2012-10-10T19:25:34.920
> 
> 标签：algorithm, scheduling, genetic-algorithm, heuristics

我观看了 Mike Swanson 的[这段视频](http://channel9.msdn.com/Blogs/Charles/Algorithms-and-Data-Structures-Mike-Swanson-Genetic-Session-Scheduler)，他需要一种算法来规划 PDC 或 TechED 等大型活动的会议。我正在考虑什么是代表解决方案的最佳方式。他的方法非常简单，他有一个数组，其中将索引映射到时隙空间，解决方案是一个包含这些索引列表的简单数组，其中每个时隙空间元素在被挑选后从数组中删除。

例如，给定 3 个时隙和 3 个房间，这是映射时隙+房间的数组：
0：时隙 0，房间 0
1：时隙 0，房间 1
2：时隙 0，房间 2
3：时隙 1，房间 0
4：时间段 1，房间 1
5：时间段 1，房间 2
6：时间段 2，房间 0
7：时间段 2，房间 1
8：时间段 2，房间 2

假设要安排 9 个会话。示例解决方案是 5,5,2,1,2,3,1,1,0，转换为：
会话 0，时间段 1，房间 2
会话 1，时间段 2，房间 0
会议 2, 时间段 0, 房间 2
会议 3, 时间段 0, 房间 1
会议 4, 时间段 1, 房间 1
会议 5, 时间段 2, 房间 2
会议 6, 时间段 1, 房间 0
会议 7, 时间段 2, 房间 1
会议 8，时间段 0，房间 0

（如果看不清楚，25:30视频很快就解释的很清楚了）

现在，我对遗传算法有了一些经验，如果我错了，我会纠正我，但我一直认为通过交叉和变异个体产生的解决方案必须与产生它的解决方案相似？即，如果我在两个解决方案之间进行交叉，则生成的解决方案必须与生成它的解决方案非常相似（并且对于突变也类似）。进化不就是这样吗？看起来 Mark Swanson 表示解决方案的方式没有考虑到它。

例如在交叉的情况下：
Parent 1: 5,5,2,1,2,3,1,1,0
Parent 2: 0,0,0,0,4,3,2,1,0
Child : 5,5,2,1,4,3,2,1,0（在这种情况下交叉索引为 4）

孩子与父母 1 和 5 与父母 2 有 4 个共同的基因。但是如果您像我上面所做的那样写下实际的解决方案（会话 x，时间段 x，房间 x），您很快就会意识到孩子解决方案有与父母 2 几乎没有共同之处。这不是问题吗？

再比如，对于这次的突变：
突变前：5,5,2,1,2,3,1,1,0
突变后：0,5,2,1,2,3,1,1,0

这个微小的变化导致了实际最终解决方案的 9 次变化中的 6 次。

这些是我提出的实际问题吗？还是没关系，因为遗传算法无论如何都会很好地工作？如果这些都是问题，你能提出更好的解决方案吗？

我的另一个问题是：如果一个会话必须安排多次怎么办？在这种情况下，您将如何表示解决方案？

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:51:08.373

> 如果一个会话必须安排多次怎么办？

每次需要安排课程时创建一个[Lecture实例，然后安排课程而不是课程。](https://github.com/droolsjbpm/drools-planner/blob/master/drools-planner-examples/src/main/java/org/drools/planner/examples/curriculumcourse/domain/Lecture.java)

# ios - 单击 UIImageView 时将无法识别的选择器发送到实例

> ID：12826827
> 
> 赞同：0
> 
> 时间：2012-10-10T19:25:35.030
> 
> 标签：ios, cocoa-touch

我想像这样在 UIImageView 上绑定点击事件：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self.backgroundImage action:@selector(imageClicked:)];
[self.backgroundImage addGestureRecognizer:tap];
self.backgroundImage.userInteractionEnabled=YES; 
```

方法就在那里：

```
-(void)imageClicked:(id)sender{

    NSLog(@"image clicked");
} 
```

但是当我点击图像视图时，我的应用程序崩溃了，我得到了这个堆栈：

```
[UIImageView imageClicked:]: unrecognized selector sent to instance 
```

我错过了什么吗？提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:27:36.780

你`UITapGestureRecognizer`的目标应该是`self`而不是它`UIImageView`本身。

# html - 模拟后端以测试和使用 Ajax？

> ID：12826833
> 
> 赞同：0
> 
> 时间：2012-10-10T19:25:46.590
> 
> 标签：html, ajax

我是前端开发人员。我想练习 AJAX，但我不想写后端代码。有没有模拟器，后端模拟器？我的意思是某种应用程序模拟服务器 www，我只能为我的请求设置常量响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:29:02.163

我没有亲自使用它，但我相信 JSFiddle 有这个功能：[http ://doc.jsfiddle.net/use/echo.html](http://doc.jsfiddle.net/use/echo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:29:17.947

只要您运行本地 Web 服务器，您就可以在您访问的任何端点托管静态文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:29:30.257

您可以只对静态 HTML 文件进行 AJAX 调用。

# regex - 使用正则表达式，但它不会删除 excel 表中的 html 标签

> ID：12826834
> 
> 赞同：0
> 
> 时间：2012-10-10T19:25:46.613
> 
> 标签：regex, excel, excel-2003, vba

我尝试使用下面的代码删除 html 标签，但它没有做任何事情。我已经尝试再次运行它但没有用。有人可以请教可能是什么问题。使用 html 标签附加文件的快照。有关信息，数据来自 MS Access 和指向 Sharepoint 列表的 MS Access 链接。

![在此处输入图像描述](../Images/42b7a6f951d48bdb2e1e3b5e4c5f34e9.png)

```
Sub Import_AccessData()
 Dim strtKeyMsgRange As Range
 Dim KeyMsgRange As Range
 Dim KeyMsgRangeCell As Range
 Dim endKeyMsgRangeCell As Range

Set strtKeyMsgRange = Range("B2")
Set endKeyMsgRange = Range("AC13")

Set KeyMsgRange = Range(strtKeyMsgRange, endKeyMsgRange)

For Each KeyMsgRangeCell In KeyMsgRange
   a = StripHTML(KeyMsgRangeCell)
   KeyMsgRangeCell.Value = a
Next KeyMsgRangeCell

End Sub

Public Function StripHTML(cell As Range) As String
     Dim RegEx As Object
     Set RegEx = CreateObject("vbscript.regexp")

     Dim sInput As String
     Dim sOut As String

     sInput = cell.Value

     With RegEx
   .Global = True
   .IgnoreCase = True
   .MultiLine = True
   .Pattern = "<[^>]+>" 'Regular Expression for HTML Tags.
   .Pattern = "&nbsp;"
   .Pattern = "&amp;"
 End With

 sOut = RegEx.Replace(sInput, "")
 StripHTML = sOut
 Set RegEx = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:47:06.927

您正在多次设置 Pattern 属性，它只会保留最后分配的值 ( `&amp;`)。

您需要使用 3 个正则表达式 ( `"<[^>]+>" => ""`, `"&nbsp;" => " "`, `"&amp;" => "&"`) 或一个匹配所有输入 ( `"(&amp;)|(&nbsp;)|(<[^>]+>)" => ""`) 的表达式来实际执行此操作。

# iphone - 在 viewController 上使用 ASIHttpRequest 到 UISplitviewController 时出错

> ID：12826838
> 
> 赞同：0
> 
> 时间：2012-10-10T19:26:06.950
> 
> 标签：iphone, objective-c, ios6, asihttprequest, uisplitviewcontroller

我有一个从 XCode 模板`UISplitViewController`中实现 a`masterNavigationController`和 a 的基本。`detailNavigationController`

`masterNavigationController`调用另一个`NSObject`称为“API”的 API，该 API 又用于从`ASIHTTPRequest`服务器检索某些 JSON 数据。

一切都很好，花花公子，直到我从请求开始。它显示 iPad 的图形用户界面，并在使用`EXC_BAD_ACCESS`. 我收到的错误消息如下：

> 2012-10-10 21:13:42.357 myapp[24409:c07] Splitview 控制器在使用前应该在索引 0 处有一个视图控制器！

我尝试了不同的方法来尝试解决这个问题，其中之一是在设置视图控制器之后设置 SplitViewController 委托，另一个是使用 NetworkQueue。

这是的代码`masterNavigationController`：

```
[...]
- (void)viewDidLoad
{
    [UIHelper setNavigationBackBackground:self.navigationController.navigationBar widePage:NO];
    [UIHelper setViewBackground:self.parentViewController.view widePage:NO];
    [UIHelper setTableViewStyle:self.tableView];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;

    API *api = [[API alloc] init];
    [api setDelegate:self];
    [api setDidFinishSelector:@selector(didFinish:)];
    [api getCommingRetrievals];
}
[...] 
```

AppDelegate：

```
[...]
    MasterViewController *masterViewController = [[MasterViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

    masterViewController.detailViewController = detailViewController;

    self.splitViewController = [[UISplitViewController alloc] init];

    self.splitViewController.view.opaque = NO;
    self.splitViewController.view.backgroundColor = [UIColor clearColor];

    self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];
    masterViewController.managedObjectContext = self.managedObjectContext;

    self.splitViewController.delegate = detailViewController;

    self.window.rootViewController = self.splitViewController;
    [self.window makeKeyAndVisible];
[...] 
```

这是 API 对象的代码：

```
- (void)getCommingRetrievals
{
    [self getRetrievalsForDate:[NSDate date]];
}

- (void)getRetrievalsForDate:(NSDate*)date
{
    NSString *stringFromDate = @"";

    if (date != nil)
    {
        // Set date string
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setDateFormat:@"yyyyMMdd"];
        stringFromDate = [formatter stringFromDate:date];
    }

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/bookings/%@", API_BASE_DOMAIN, stringFromDate]];
    [self callApi:url requestMethod:@"GET"];
}

#pragma mark - 
#pragma mark API methods

- (void)callApi:(NSURL*)url requestMethod:(NSString*)requestMethod
{
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setRequestMethod:requestMethod];
    [request setDelegate:self];
    [request setDidFinishSelector:@selector(requestFinished:)];
    [request setDidFailSelector:@selector(didFailWithError:)];
    [request startAsynchronous];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
    if (self.delegate && [self.delegate respondsToSelector:didFinishSelector]) {
        [self.delegate performSelector:didFinishSelector withObject:self];
    }
} 
```

如果我注释掉该行`[request startAsynchronous];`，应用程序不会崩溃。

我在这里缺少什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:37:52.793

检查您的 UISplitViewController 是否已通过 2 个视图控制器。

除此之外，还有一些惯用的东西：

这应该在任何设置的开始时进行：

```
[super viewDidLoad]; 
```

例如[`[super viewDidLoad]` 约定](https://stackoverflow.com/questions/844195/super-viewdidload-convention)

并考虑使用 ASI 以外的其他框架。这是一个死图书馆。AFNetworking、MKNetworkingKit 或 RESTKit 是不错的选择。

# sql - 使用 LIKE 比较优化存储过程

> ID：12826843
> 
> 赞同：0
> 
> 时间：2012-10-10T19:26:14.113
> 
> 标签：sql, stored-procedures

我有这个问题。我可以看到一些问题`like`。

你们可以看看这个查询并帮助我优化它吗？我非常感谢您抽出时间在这里支持我。

```
 UPDATE F_State
  SET StateName = L.State_Name
  FROM Reg.Location L 
  JOIN F_State S ON CONVERT(nvarchar, L.stateID) = s.StateCode  --BECAUSE THIS IS NVARCHAR and ststeid isnt
  WHERE S.StateName LIKE '%)%' 
    AND L.ZIPCODE = S.ZIPCODE 
    AND L.CITY=S.CITY 
```

我有大约 300,000 行要更新......这根本没有帮助。你们能帮我解决吗？再次感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:07:00.383

如果您在 oracle 上，您可以将基于函数的索引与 INSTR(insted LIKE '%)') 一起使用，这将解决您的问题。

但在您的情况下， LIKE '%..%' 问题不相关。

1.  您正在对整个桌子进行更新，这真的有必要吗？
2.  你真的必须再次加入 F_State 吗？
3.  您在 StateCode 上有索引（或唯一约束），在 ZipCode 上有索引吗？

我看不到，你在做什么，但我猜你正在尝试设置 F_State.StateName，当它包含带有 Location.State_name 的 '%)%' 时。发现适当的位置具有与 F_State 中的 StateCode 相同的 stateID（wtf，真的吗？一个是 nonvarchar ID，一个是 varchar ......但没关系）以及相同的 ZipCode 和相同的城市。

```
UPDATE F_State S
   SET S.StateName = (SELECT State_Name 
                      FROM Reg.Location L 
                      WHERE CONVERT(nvarchar, L.stateID) = s.StateCode 
                        AND L.ZipCode = S.ZipCode 
                        AND L.City = S.City 
                      LIMIT 1)
 WHERE S.StateName LIKE '%)%'; 
```

# actionscript-3 - (Flash CS5/AS3) 错误 #1007：在非构造函数上尝试实例化

> ID：12826845
> 
> 赞同：0
> 
> 时间：2012-10-10T19:26:20.180
> 
> 标签：actionscript-3, flash-cs5

我第一次使用函数，我不明白为什么这段代码会带回来：

> 错误 #1007：在非构造函数上尝试实例化
> 
> 在 myfla_fla::MainTimeline/showERM()
> 
> 在 myfla_fla::MainTimeline/oponents()
> 
> 在 myfla_fla::MainTimeline/frame4()
> 
> 在 flash.display::MovieClip/gotoAndStop()
> 
> 在 myfla_fla::MainTimeline/myKD3()

这是代码：

```
var ERMstand:Array = new Array ( met1stand,met2stand,met3stand );
var roundposition:Number = 1;
var ER:Array = new Array;
var EProc:Array = new Array;
var EAtt:Array = new Array;
var EDef:Array = new Array;
var EMob:Array = new Array;
var EHea:Array = new Array;
var EEne:Array = new Array;
var st1r1ER:Array =new Array ( "met1","met2","met3" );
var st1r1ERMMC:Array = new Array ( "0","1","2" )
var st1r1EProc:Array = new Array ( "5","20","8" );
var st1r1EAtt:Array = new Array ("3","10","15" );
var st1r1EDef:Array = new Array ("25","4","4" );
var st1r1EMob:Array = new Array ("3","8","10" );
var st1r1EHea:Array = new Array ("10","5","5");
var st1r1EEne:Array = new Array ("5","5","5");

oponents();

function oponents() {
if (stageposition == 1) {
    if (roundposition == 1) {
        ER = st1r1ER
        EProc = st1r1EProc
        EAtt = st1r1EAtt
        EDef = st1r1EDef
        EMob = st1r1EMob
        EHea = st1r1EHea
        EEne = st1r1EEne
        showERM(st1r1ERMMC.length, st1r1ERMMC)

    }
}
}

function showERM(popRM:Number, ERMS:Array) {
for (loop=0 ;loop<popRM;loop++){
    Robotmaster =new ERMS[loop]();
    Robotmaster.name = "ERM" + loop;
    addChild(Robotmaster);
    if (loop == 0) {
        Robotmaster.y = 415;
        Robotmaster.x = 425;
    } else if (loop == 1) {
        Robotmaster.y = 365;
        Robotmaster.x = 425;
    } else if (loop == 2) {
        Robotmaster.y = 315;
        Robotmaster.x = 425;
    } else if (loop == 3) {
        Robotmaster.y = 265;
        Robotmaster.x = 425;
    } else if (loop == 4) {
        Robotmaster.y = 215;
        Robotmaster.x = 425;
    }
}
} 
```

提前致谢！

# shell - 脚本外壳中的 For 循环

> ID：12826846
> 
> 赞同：1
> 
> 时间：2012-10-10T19:26:21.703
> 
> 标签：shell

我的脚本是：

```
for i in $(seq $nb_lignes) a list of machines
do
ssh root@$machine -x "java ....." 
sleep 10
done 
```

--> 我从机器 C 执行这个脚本

我有两台机器 A 和 B ($nb_lignes=2)

```
ssh root@$machineA -x "java ....." : create a node with Pastry overlay 
wait 10 secondes
ssh root@$machineB -x "java .....":create another node join the first (that's way i     have use sleep 10 secondes) 
```

我从机器 C 运行脚本：我希望它显示：节点 1 已创建，等待 10 秒并显示节点 2 已创建

我的问题：它显示节点 1 仅创建

i 磁带 ctrl+c 它显示节点 2 已创建

PS：两个进程java仍在机器A和B中运行

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:37:40.810

从我读这篇文章的方式来看，**阿玛尼**是正确的；由于您的 java 程序没有退出，因此循环的第二次迭代不会运行，直到您“中断”第一个迭代。我猜Java程序忽略了ssh发送给它的中断信号。

`&`您最好使用 ssh 本身提供给您的工具，而不是使用 . 从 ssh 手册页：

```
 -f      Requests ssh to go to background just before command execution.
         This is useful if ssh is going to ask for passwords or
         passphrases, but the user wants it in the background.  This
         implies -n.  The recommended way to start X11 programs at a
         remote site is with something like ssh -f host xterm. 
```

所以......你的脚本看起来像这样：

```
for host in machineA machineB; do
    ssh -x -f root@${host} "java ....." 
    sleep 10
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:34:16.257

在“ssh”命令后尝试“&”字符。这会单独生成进程 [背景] 并继续执行脚本。

否则，您的脚本会卡在运行 ssh。

编辑：为清楚起见，这将是您的脚本：

```
for i in $(seq $nb_lignes) a list of machines
do
ssh root@$machine -x "java ....." &
sleep 10
done 
```

# c# - C# Process.Start() - 目标应用程序找不到文件

> ID：12826850
> 
> 赞同：0
> 
> 时间：2012-10-10T19:27:01.163
> 
> 标签：c#, process

我正在尝试启动应用程序“GA.exe”，但在启动时它正在从文件“acc.txt”中获取数据。如果我正常启动它（通过双击:-)）它可以工作，但如果我使用下面的代码，它会说“找不到 acc.txt”。

我的第一个想法：

```
Process.Start(pathToGA.exe); 
```

第二个想法：

```
ProcessStartInfo pinfo = new ProcessStartInfo()
                {
                    Arguments = FolderWithGA.exePath,
                    FileName = pathToGA.exe,
                }; 
```

而且两者都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:29:20.067

您应该设置[`ProcessStartInfo.WorkingDirectory`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)为包含`acc.txt`and的目录`GA.exe`：

```
ProcessStartInfo pinfo = new ProcessStartInfo()
{
    Arguments = FolderWithGA.exePath,
    FileName = pathToGA.exe,
    WorkingDirectory = FolderWithGA
}; 
```

# javascript - 根据内部的动态内容更改 iframe 高度

> ID：12826852
> 
> 赞同：9
> 
> 时间：2012-10-10T19:27:04.253
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [根据内容调整 iframe 的大小](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)

我正在尝试将我的一个页面加载到 iframe 中。我永远不确定页面有多大，页面上的数据是动态加载的。我希望 iframe 始终适合页面，无论它有多大或多小。这是我所拥有的：

```
function loadModal() {
    myframe = $('<iframe id="mymodal" src="MyPage.aspx" width="700"></iframe>');

    myframe.appendTo($('html'));

    var height = document.getElementById('modalPreview').contentWindow
                     .document.body.scrollHeight;

    $("#mymodal").attr("height", height);
} 
```

我一直在尝试获取页面加载后的高度。问题是`height`返回为`0`. 但如果我这样做：

```
 setTimeout(function () {
        $("#mymodal").attr("height", height);
    }, 2000); 
```

加载了正确的高度。我认为这是因为数据需要几秒钟才能加载。但是如果页面加载得非常快，这看起来很时髦，或者如果加载页面需要超过 2 秒，它仍然会给我一个 0 的高度。

那么有没有办法：

1.  加载数据后等待并设置 iframe 的高度，或者
2.  `MyPage.aspx`从?设置父 iframe 的高度

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T19:40:43.500

如果您要使用选项#2，您可以使用 DOM 访问父窗口并设置子窗口的 iframe 高度。

```
$(document).ready(function() {
    var iframeWin = parent.document.getElementById("yourIframeID");
    iframeWin.height = document.body.scrollHeight;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:36:35.583

您可以在插入之前将`onload`事件挂钩。`Iframe`当它触发时，检查 iframe 中文档的高度并相应地调整其高度。

# java - binarySearch 方法产生“ArrayIndexOutOfBounds”异常

> ID：12826864
> 
> 赞同：0
> 
> 时间：2012-10-10T19:27:25.123
> 
> 标签：java, exception, methods, binary-search, indexoutofboundsexception

我想知道为什么`ArrayIndexOutOfBounds`当我提供一个不在我的数组中的字母的键时，这种方法会给我一个异常。如果键不是字母，返回值似乎没有问题。

```
public class BinarySearch2 {

    public static void main(String[] args) {
        String[] array = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J"};
        String key = "K";
        String found = binarySearch(array, key);
        System.out.println(found);
    }

    public static String binarySearch(String[] array, String key) {
        int low = 0;
        int high = array.length;
        int mid = (low + high)/2;
        //int i = 0;

        while (low <= high) {
            //System.out.print(i + " ");
            if (array[mid].compareTo(key) < 0) {
                System.out.println(array[mid].compareTo(key));
                low = mid + 1;
                mid = (low + high)/2;
            }
            else if (array[mid].compareTo(key) > 0) {
                high = mid - 1;
                mid = (low + high)/2;
            }
            else
                return array[mid];

            //i++;
        }
        return "-1";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:31:42.297

在您的`binarySearch`方法中，您已将您初始化`high`为： -

```
int low = 0;
int high = array.length;
int mid = (low + high)/2; 
```

你的**高点**实际上应该是：-

```
int high = array.length - 1; 
```

# c# - 驾驶执照条形码字段数据类型

> ID：12826866
> 
> 赞同：5
> 
> 时间：2012-10-10T19:27:33.393
> 
> 标签：c#, .net, barcode

我的任务是开发一个小型库，该库需要能够读取位于[驾驶执照](http://www.idscanner.com/id/wp-content/uploads/2011/01/reverse_side_sample.jpg)[`PDF417`](http://en.wikipedia.org/wiki/PDF417)背面的条形码并将数据解析到我们的自定义对象。

但是我需要知道这些数据类型表示什么数据类型？

```
4/ANS, 10/ANS, 5/ANS, etc. 
```

![在此处输入图像描述](../Images/4ceacc48cc5c810e7ba0d2691e062672.png)

完整文档可在以下网址找到：http: [//www.dol.wa.gov/external/docs/barcodeCalibration-basic.pdf](http://www.dol.wa.gov/external/docs/barcodeCalibration-basic.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:29:58.603

在这里猜测，但是 <field length>/ANS，其中 A 是字母，N 数字和 S 空格？

例如，3/A 是 3 个字母字符，例如 USA。

有趣的是，体重和性别都是 1/N，但给出的例子（两种情况下都是 2）符合我的假设。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-07T21:41:35.757

The Washington spec is based on the AAMVA standard here: [http://www.aamva.org/DL-ID-Card-Design-Standard/](http://www.aamva.org/DL-ID-Card-Design-Standard/)

The 2013 ID Card Design Standard is here: [http://www.aamva.org/WorkArea/DownloadAsset.aspx?id=4435](http://www.aamva.org/WorkArea/DownloadAsset.aspx?id=4435)

The PDF 417 barcode specifications start on page 51 (65) of that document. On page 58 (72) they list the type definitions: "A=alpha A-Z, N=numeric 0-9, S=special, F=fixed length, V=variable length"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T14:01:15.177

6 A/N 表示它是一个 6 位数字或间隔 (A)lpha/(N)umeric 变量。例如 5'7" 可以表示为适合格式为“067 in”的变量（引号仅包含实际变量。非常常见的术语定义通常在数据库编程中找到。您的变量将始终为 6 个字符长（包括空格字符）--3 个字母（in）和 3 个数字（067）。

# java - 是否有任何模拟框架允许监视超类方法？

> ID：12826871
> 
> 赞同：1
> 
> 时间：2012-10-10T19:27:49.940
> 
> 标签：java, unit-testing, mocking, mockito, superclass

我们使用的是spring oauth，有几个地方需要使用继承。

在当前情况下，我们正在扩展 TokenEndpoint

```
public class MyTokenEndpoint extends TokenEndpoint {
    //...
    public ResponseEntity<OAuth2AccessToken> getAccessToken(
            Principal principal,
            MyParams myParams,
            @RequestParam Map<String, String> allParams) {

        // .. Stuff Happens

        updateParamsWithStuff(allParams);

        return super.getAccessToken(
        principal, myParams.grantType(), allParams);
    }
    //...
} 
```

现在我要测试的是传递给 super.getAcccessToken 的地图是否已经填充了 Stuff。我的简单方法是监视传入的地图，但这依赖于实现细节，实际上并不能确保地图中的东西通过 super.getAccessToken

我们正在使用 Mockito，我看到评论说这不起作用，并且暗示它可能会起作用。这可以在任何模拟框架中完成吗？

查看两个答案（[我可以使用 Mockito/Powermock 模拟超类的构造函数吗？](https://stackoverflow.com/questions/9957102/can-i-mock-a-superclasss-constructor-with-mockito-powermock)，检查过的说不可能，但鉴于对第二个答案的讨论，我不得不尝试。）

阅读后，我尝试了以下方法：

```
MyTokenEndpoint spyEndpoint = Mockito.spy(endpoint); //endpoint Set-up previously

Mockito.doAnswer(new Answer<ResponseEntity<OAuth2AccessToken>>() {
    @Override
    public ResponseEntity<OAuth2AccessToken> 
           answer(InvocationOnMock invocation) {
       Object[] args = invocation.getArguments();
       Map<String, String> params = (Map<String, String>) args[2];
       System.out.printf("%s\n", params.toString());
       return new ResponseEntity<OAuth2AccessToken>(HttpStatus.ACCEPTED);
    }
}).when(((TokenEndpoint) spyEndpoint))
.getAccessToken(any(Principal.class), 
                anyString(), (Map<String, String>) anyMap());

theResponse = spyEndpoint
                .getAccessToken(principal, 
                                myPrams,
                                currentMap); 
```

但是答案中的代码永远不会被调用。

我在吠叫错误的树吗？？这在任何模拟框架中都可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:18:44.580

[使用JMockit](http://code.google.com/p/jmockit)可以轻松编写这样的测试：

```
@Test
public void mockCallToSuper(@Mocked final TokenEndpoint mockedBase)
{
   final Principal principal = null; // or whatever
   MyParams myParams = new MyParams();
   Map<String, String> params = new HashMap<String, String>();

   ResponseEntity<OAuth2AccessToken> accessToken =
      new MyTokenEndpoint().getAccessToken(principal, myParams, params);

   // asserts on "accessToken"

   new Verifications() {{
      Map<String, String> actualParams;
      mockedBase.getAccessToken(
         principal, (MyParams) any, actualParams = withCapture());

      assertEquals("abc", actualParams.get("A"));
      assertEquals("another item", actualParams.get("B2"));
   }};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:30:24.767

为什么需要嘲笑？您已经在扩展类——只需覆盖该方法，检查传入的数据，然后将数据转发给父级。

# c# - 通过查询字符串传递变量

> ID：12826872
> 
> 赞同：-1
> 
> 时间：2012-10-10T19:27:51.957
> 
> 标签：c#, asp.net

输入字符串格式不正确是我在将值分配给我的 mediaID 变量时收到的错误。它显示为一个整数，并试图通过查询字符串传递它。有任何想法吗？

```
int mediaID =
    int.Parse(((Hashtable)grd_AllMedia.SelectedRecords[0])["MediaID"].ToString());
Response.Redirect("EditMedia.aspx?MediaID=" + mediaID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:33:55.870

您可以尝试使用此代码

```
var result = (HashTable)grd_AllMedia.SelectedRecords[0];
if(result != null)
{
   var mediaID = result["MediaID"].ToString();
   Response.Redirect("EditMedia.aspx?MediaID=" + mediaID);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:36:03.353

试一试。

```
int mediaID =
    int.Parse(((Hashtable)grd_AllMedia.SelectedRecords[0])["MediaID"].ToString());

Response.Redirect(string.Format("EditMedia.aspx?MediaID={0}", mediaID)); 
```

# objective-c - 以编程方式创建布局约束

> ID：12826878
> 
> 赞同：84
> 
> 时间：2012-10-10T19:28:08.190
> 
> 标签：objective-c, ios, constraints, autolayout

我知道很多人已经问了很多关于这个的问题，但即使有了答案，我也无法让它发挥作用。

当我处理情节提要上的约束时，这很容易，但在代码中我很难。例如，我尝试让视图保持在右侧并根据屏幕方向具有屏幕高度。这是我的代码：

```
UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 748)];
myView.backgroundColor = [UIColor redColor];
[self.view addSubview:myView];
[self.view addConstraints:[NSLayoutConstraint
    constraintsWithVisualFormat:@"V:|-[myView(>=748)]-|"
    options:0 metrics:nil
    views:NSDictionaryOfVariableBindings(myView)]]; 
```

它不满足某些约束。我看不出有什么问题。另外，为什么我不能使用属性 like`self.myView`而不是局部变量 like `myView`？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-10-24T18:54:39.083

在代码中使用自动布局时，设置框架什么都不做。因此，您在上面的视图中指定宽度为 200 的事实在您对其设置约束时没有任何意义。为了使视图的约束集明确，它需要四个东西：任何给定状态的 x 位置、y 位置、宽度和高度。

目前在上面的代码中，您只有两个（高度，相对于超级视图，和 y 位置，相对于超级视图）。除此之外，您还有两个必需的约束，它们可能会根据视图的超级视图约束的设置方式而发生冲突。*如果*超级视图有一个必需的约束，指定它的高度小于 748，你将得到一个“不可满足的约束”异常。

在设置约束之前设置视图的宽度这一事实没有任何意义。它甚至不会考虑旧框架，而是会根据它为这些视图指定的所有约束来计算新框架。在代码中处理自动布局时，我通常只是使用`initWithFrame:CGRectZero`或简单地创建一个新视图`init`。

要创建您在问题中口头描述的布局所需的约束集，您需要添加一些水平约束来限制宽度和 x 位置，以便提供完全指定的布局：

```
[self.view addConstraints:[NSLayoutConstraint
    constraintsWithVisualFormat:@"V:|-[myView(>=748)]-|"
    options:NSLayoutFormatDirectionLeadingToTrailing
    metrics:nil
    views:NSDictionaryOfVariableBindings(myView)]];

[self.view addConstraints:[NSLayoutConstraint
    constraintsWithVisualFormat:@"H:[myView(==200)]-|"
    options:NSLayoutFormatDirectionLeadingToTrailing
    metrics:nil
    views:NSDictionaryOfVariableBindings(myView)]]; 
```

从垂直约束开始，口头描述此布局如下：

> myView 将使用等于标准空间的顶部和底部填充填充其超级视图的高度。myView 的 superview 的最小高度为 748pts。myView 的宽度是 200pts 并且有一个右边的填充等于它的 superview 的标准空间。

如果您只是希望视图填充整个超级视图的高度而不限制超级视图的高度，那么您只需省略`(>=748)`可视格式文本中的参数。如果您认为需要该`(>=748)`参数来给它一个高度 - 在这种情况下您不需要：使用 bar ( `|`) 或带有空格 ( `|-`, `-|`) 语法的 bar 将视图固定到超级视图的边缘，您正在给您的视图一个 y -position （将视图固定在单边上）和带有高度的 y 位置（将视图固定在两条边上），从而满足您为视图设置的约束。

关于你的第二个问题：

使用`NSDictionaryOfVariableBindings(self.myView)`（如果您为 myView 设置了属性）并将其输入您的 VFL 以`self.myView`在您的 VFL 文本中使用，当自动布局尝试解析您的 VFL 文本时，您可能会遇到异常。它与字典键中的点符号和尝试使用的系统有关`valueForKeyPath:`。 [有关类似的问题和答案，请参见此处](https://stackoverflow.com/questions/13045178/nsinvalidargumentexception-reason-unable-to-parse-constraint-format)。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-02-13T02:36:19.000

嗨，我一直在使用此页面进行限制和“如何”。我花了很长时间才意识到我需要：

```
myView.translatesAutoresizingMaskIntoConstraints = NO; 
```

让这个例子工作。感谢 Userxxx、Rob M. 尤其是 larsacus 在这里的解释和代码，它非常宝贵。

以下是运行上述示例的完整代码：

```
UIView *myView = [[UIView alloc] init];
myView.backgroundColor = [UIColor redColor];
myView.translatesAutoresizingMaskIntoConstraints = NO;  //This part hung me up 
[self.view addSubview:myView];
//needed to make smaller for iPhone 4 dev here, so >=200 instead of 748
[self.view addConstraints:[NSLayoutConstraint
                           constraintsWithVisualFormat:@"V:|-[myView(>=200)]-|"
                           options:NSLayoutFormatDirectionLeadingToTrailing
                           metrics:nil
                           views:NSDictionaryOfVariableBindings(myView)]];

[self.view addConstraints:[NSLayoutConstraint
                           constraintsWithVisualFormat:@"H:[myView(==200)]-|"
                           options:NSLayoutFormatDirectionLeadingToTrailing
                           metrics:nil
                           views:NSDictionaryOfVariableBindings(myView)]]; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-04-01T04:49:03.567

# 斯威夫特版本

*为 Swift 3 更新*

此示例将显示两种以编程方式添加以下约束的方法，就像在 Interface Builder 中一样：

**宽度和高度**

[![在此处输入图像描述](../Images/c19ff186b4c97925261a7752b58f534d.png)](https://i.stack.imgur.com/zHUBP.png)

**集装箱中心**

[![在此处输入图像描述](../Images/b78d5fb183160ad85891703ff5973ce0.png)](https://i.stack.imgur.com/w9usX.png)

# 样板代码

```
override func viewDidLoad() {
    super.viewDidLoad()

    // set up the view
    let myView = UIView()
    myView.backgroundColor = UIColor.blue
    myView.translatesAutoresizingMaskIntoConstraints = false
    view.addSubview(myView)

    // Add constraints code here (choose one of the methods below)
    // ...
} 
```

# 方法1：锚样式

```
// width and height
myView.widthAnchor.constraint(equalToConstant: 200).isActive = true
myView.heightAnchor.constraint(equalToConstant: 100).isActive = true

// center in container
myView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = true
myView.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive = true 
```

# 方法二：NSLayoutConstraint 样式

```
// width and height
NSLayoutConstraint(item: myView, attribute: NSLayoutAttribute.width, relatedBy: NSLayoutRelation.equal, toItem: nil, attribute: NSLayoutAttribute.notAnAttribute, multiplier: 1, constant: 200).isActive = true
NSLayoutConstraint(item: myView, attribute: NSLayoutAttribute.height, relatedBy: NSLayoutRelation.equal, toItem: nil, attribute: NSLayoutAttribute.notAnAttribute, multiplier: 1, constant: 100).isActive = true

// center in container
NSLayoutConstraint(item: myView, attribute: NSLayoutAttribute.centerX, relatedBy: NSLayoutRelation.equal, toItem: view, attribute: NSLayoutAttribute.centerX, multiplier: 1, constant: 0).isActive = true
NSLayoutConstraint(item: myView, attribute: NSLayoutAttribute.centerY, relatedBy: NSLayoutRelation.equal, toItem: view, attribute: NSLayoutAttribute.centerY, multiplier: 1, constant: 0).isActive = true 
```

# 笔记

*   锚样式是比`NSLayoutConstraint`样式更受欢迎的方法，但是它仅适用于 iOS 9，因此如果您支持 iOS 8，那么您仍然应该使用`NSLayoutConstraint`样式。
*   另请参阅以[编程方式创建约束](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/ProgrammaticallyCreatingConstraints.html)文档。
*   有关添加固定约束的类似示例，请参[见此答案。](https://stackoverflow.com/a/36263784/3681880)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-10T23:04:37.737

关于您关于属性的第二个问题，`self.myView`只有在将其声明为类中的属性时才能使用。由于`myView`是局部变量，因此您不能那样使用它。有关这方面的更多详细信息，我建议您阅读有关[声明属性](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocproperties.html)的苹果文档，

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-06T22:23:00.277

为什么我不能使用像 myView 这样的属性`self.myView`而不是像 myView 这样的局部变量？

尝试使用：

```
NSDictionaryOfVariableBindings(_view) 
```

代替`self.view`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-12-23T14:29:00.137

另请注意，从 iOS9 开始，我们可以使用新的辅助类[NSLayoutAnchor的子类以编程方式定义约束](https://developer.apple.com/library/ios/documentation/AppKit/Reference/NSLayoutAnchor_ClassReference/index.html)*“更简洁、更易于阅读”*。

文档中的一个例子：

```
[self.cancelButton.leadingAnchor constraintEqualToAnchor:self.saveButton.trailingAnchor constant: 8.0].active = true; 
```

# css - Unicode 字符的飞碟字体

> ID：12826881
> 
> 赞同：10
> 
> 时间：2012-10-10T19:28:17.417
> 
> 标签：css, grails, encoding, pdf-generation, flying-saucer

我正在使用 Grails 导出插件（基本上是 Flying Saucer）生成 PDF。我的 GSP 页面是一个 UTF-8 页面（或者至少属性显示它是 UTF-8，在 GSP 页面的开头也有一个`<?xml version="1.0" encoding="UTF-8"?>`指令）。最初生成的 PDF 正确包含变音字符“äöüõ”，但 PDF 中缺少西里尔字符（根本未呈现）。然后我通过添加以下内容更改了我的css文件，如文档中所述：

```
@font-face {
    src: url(ARIALUNI.TTF);
    -fs-pdf-font-embed: embed;
    -fs-pdf-font-encoding: UTF-8;
}
body {
      font-family: "Arial Unicode MS", Arial, sans-serif;
} 
```

ArialUni.ttf 也部署到服务器。但现在我将变音字符和西里尔字符都呈现为框。如果我将 -fs-pdf-encoding 属性值更改为 Identity-H，则元音变音字符会正确呈现，但西里尔字符会呈现为问号。

关于可以使用什么字体来正确渲染变音符号和西里尔字符的任何想法？或者可能是我的 CSS 有点错误？任何提示将不胜感激。

**更新 1：** 我也尝试过以下 css（由[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)生成）：

```
@font-face {
    font-family: 'ArialUnicodeMS';
    src: url('arialuni.ttf');
    src: url('arialuni.eot?#iefix') format('embedded-opentype'),
        url('arialuni.woff') format('woff'),
        url('arialuni.ttf') format('truetype'),
        url('arialuni.svg#arialuni') format('svg');
    font-weight: normal;
    font-style: normal;
    -fs-pdf-font-embed: embed;
    -fs-pdf-font-encoding: UTF-8;
}

body {
    font-family:'ArialUnicodeMS';
} 
```

我已经添加了`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>` 我还尝试使用 -Dfile.encoding=UTF-8 运行 grails，如此处所述：http: [//grails.1312388.n4.nabble.com/PDF-plugin-Having-problems-with- instalation-td2297840.html](http://grails.1312388.n4.nabble.com/PDF-plugin-Having-problems-with-instalation-td2297840.html)，但没有任何帮助。西里尔字符根本不显示。任何其他想法可能是什么问题？

**顺便说一句：* *我将我的 PDF 打包为 zip 并在响应中将其发送回浏览器，如下所示：

```
response.setHeader "Content-disposition", "attachment; filename=test.zip"
response.setHeader "Content-Encoding", "UTF-8"
response.contentType = 'application/zip'
response.outputStream << zip
response.outputStream.flush()
response.outputStream.close() 
```

我是否需要在压缩时以某种方式考虑编码????，我喜欢这样：

```
public static byte[] zipBytes(Map<String, ByteArrayOutputStream> fileNameToByteContentMap) throws IOException {
        ByteArrayOutputStream zipBaos = new ByteArrayOutputStream();
        ZipOutputStream zos = new ZipOutputStream(zipBaos);
        fileNameToByteContentMap.eachWithIndex {String fileName, ByteArrayOutputStream baos, i  ->
            byte[] content = baos.buf
            ZipEntry entry = new ZipEntry(fileName)
            entry.setSize(content.length)
            zos.putNextEntry(entry)
            zos.write(content)
            zos.closeEntry()
        }
        zos.close()
        return zipBaos.toByteArray();
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-03-09T15:43:14.183

我设法在java代码中“启用”unicode字符（西里尔文或捷克文），并在我的资源（CALIBRI.TTF）中提供了一个真正的字体。

```
import org.w3c.dom.Document;
import org.xhtmlrenderer.pdf.ITextRenderer;
import com.lowagie.text.pdf.BaseFont; 

...
    ITextRenderer renderer = new ITextRenderer();
    URL fontResourceURL = getClass().getResource("fonts/CALIBRI.TTF");
    //System.out.println("font-path:"+fontResourceURL.getPath());

    /* HERE comes my solution: */
    renderer.getFontResolver().addFont(fontResourceURL.getPath(), 
                BaseFont.IDENTITY_H, BaseFont.EMBEDDED);

    renderer.setDocument(doc, null);
    renderer.layout();
    baos = new ByteArrayOutputStream();
    renderer.createPDF(baos);
    baos.flush();
    result = baos.toByteArray();
... 
```

最后，我将 font-family 'Calibri' 添加到文档的 css 部分：

```
...
<style type="text/css">
    span { font-size: 11pt; font-family: Calibri; }
... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-13T15:20:00.717

由于某种原因，它开始使用由 face-kit-generator 生成的以下 css 和 .ttf 文件：

```
@font-face {
    src: url('arialuni.ttf');
    -fs-pdf-font-embed: embed;
    -fs-pdf-font-encoding: Identity-H;
}

body {
    font-family: Arial Unicode MS, Lucida Sans Unicode, Arial, verdana, arial, helvetica, sans-serif;
    font-size: 8.8pt;
} 
```

奇怪的是，如果我将字体放入某个文件夹，比如说“字体”，它会找到字体但不会呈现字符。

# c# - c# linq 不等于变化

> ID：12826886
> 
> 赞同：0
> 
> 时间：2012-10-10T19:28:42.097
> 
> 标签：c#, sql, linq, list

我有一个带有实体框架的 linq 查询，它可以工作并获取所需的信息，但现在我在做相反的事情时遇到了麻烦。

目前它使用连接来获取链接表所需的所有数据，但我需要获取一些与某些连接不匹配的数据。

我知道你只能使用“等于”om linq，但我需要不等于的信息，即在 ap.idLook 上的 c.IsoNe 中加入 ec 不等于 ec.idAll

下面是工作代码，但不是我现在需要的。任何帮助，将不胜感激...

```
var test = (from bil in bilats
                join ap in c.Allegro on bil.idAll equals ap.idAll
                join ec in c.IsoNe on ap.idLook equals ec.idAll
                join cb in c.Comp on ap.idCompBuy equals cb.idComp
                join cs in c.Com on ap.idCompSell equals cs.idComp
                join iby in c.IsoNe on cb.idComp equals iby.idComp
                join iss in c.IsoNe on cs.idComp equals isl.idComp
             orderby bil.HBegin ascending
             where bil.HBegin >= ec.DateTStart
             where bil.HBegin < ec.DateTEnd
             select new
             {
                 Cont = ec.ContractID,
                 ContType = ap.idScheduleType,
                 Sel = isel.ISONE1,
                 Buy = ibel.ISONE,
                 HBegin = bil.HBegin,
              }).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:36:07.387

据我所知，您必须创建一个笛卡尔积，然后使用 where 条件对其进行过滤。（我做出了一个轻率的假设，即你想要一个内连接而不是左连接，但内连接是`join`关键字所代表的。）这样的事情：

```
var test = (from bil in bilats
                join ap in c.Allegro on bil.idAll equals ap.idAll
                from ec in c.IsoNe where ap.idLook != ec.idAll
                join cb in c.Comp on ap.idCompBuy equals cb.idComp
                join cs in c.Com on ap.idCompSell equals cs.idComp
                join iby in c.IsoNe on cb.idComp equals iby.idComp
                join iss in c.IsoNe on cs.idComp equals isl.idComp
             orderby bil.HBegin ascending
             where bil.HBegin >= ec.DateTStart
             where bil.HBegin < ec.DateTEnd
             select new
             {
                 Cont = ec.ContractID,
                 ContType = ap.idScheduleType,
                 Sel = isel.ISONE1,
                 Buy = ibel.ISONE,
                 HBegin = bil.HBegin,
              }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:35:01.100

听起来**加入**可能是错误的方法。查看**联合**或**子查询**

*   [C# linq 联合问题](https://stackoverflow.com/questions/4419538/c-sharp-linq-union-question)
*   [如何在 LINQ 中进行子查询](https://stackoverflow.com/questions/418609/how-to-do-subquery-in-linq)

# c++ - 检测引用计数对象中的内存泄漏

> ID：12826887
> 
> 赞同：6
> 
> 时间：2012-10-10T19:28:49.357
> 
> 标签：c++, pointers, memory-leaks, reference-counting

我正在尝试打印调用 addref 和 release 的哪一行。这里是代码

在下面的代码中，我创建了 ReferenceCount 类，其主要功能是增加和减少引用计数。Referencemanager 类跟踪引用计数并在达到 0 时删除对象。

Test1 是测试类。我主要创建 Test1 指针并用 CReferenceManager 类包装它。现在在创建 CReferenceManager 类时调用 AddRef 并在销毁时调用 Release。

如果存在内存泄漏，那么当 AddRef 和 Release 调用时使用引用计数时，我是否可以打印出 FILE 和 LINE 编号会更容易检测。

如果有一种方法可以打印调用 AddRef 和 Release 的 FILE 和 LINE 编号。一种方法是我可以覆盖派生类中的 AddRef 和 Release 以及 prinf FILE 和 LINE 编号

```
//ReferenceCount.h
#include <string>
#include <Windows.h>

using namespace std;
class CReferenceCount
{
public:
   CReferenceCount();
   virtual ~CReferenceCount();
   virtual void AddRef();
   virtual bool Release();

private:
   LONG m_ref;

};

// RefCount.cpp 
//

#include "stdafx.h"
#include "ReferenceCount.h"

CReferenceCount::CReferenceCount():m_ref(0)
{
   AddRef();

}

CReferenceCount::~CReferenceCount()
{
}

void CReferenceCount::AddRef()
{
    InterlockedIncrement(&m_ref);
}

bool CReferenceCount::Release()
{
   if (InterlockedDecrement(&m_ref) == 0)
   {
      delete this;
      return true;
   }

   return false;
}

//ReferenceManager.h
#include <string>
#include <Windows.h>

using namespace std;
class CReferenceCount
{
public:
   CReferenceCount();
   virtual ~CReferenceCount();
   virtual void AddRef();
   virtual bool Release();

private:
   LONG m_ref;

};

//test.cpp
#include "stdafx.h"
#include "ReferenceCount.h"
#include "RefManager.h"
#include <iostream>
using namespace std;

class Test1: public CReferenceCount
{
public:
    Test1(){}
    ~Test1(){}

private :
    int m_i;
};

void main()
{
    Test1 *pTest= new Test1();
    CReferenceManager<Test1> testRef(pTest);

} 
```

类似的问题我已经发布了 [寻找谁通过智能指针创建对象](https://stackoverflow.com/questions/12902021/finding-who-creates-object-via-smart-pointer) [设计模式来检测引用计数智能指针的内存泄漏](https://stackoverflow.com/questions/12805366/design-pattern-to-detect-memory-leaks-for-reference-counted-smart-pointers)

但没有一个答案给出正确的解释来解决这个问题，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T19:39:42.453

唯一的方法是定义用于调用 AddRef 和 Release 的宏，因为函数无法在内部知道它们被调用的位置。所以你可以使用类似的东西。

```
#define RELEASE(obj) cout << __LINE__ << ":" << __FILE__ << endl; (obj).Release(); 
```

此外，不同的编译器有不同的预定义宏；如果可移植性是一个问题，那么在编写上述代码时应该考虑这一点。[MSDN 参考 (2003)](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.71%29.aspx)

鉴于您在下面的评论，我可能会提供另一种有点骇人听闻的解决方案。您可能无法看到您的参考在哪里发布，但您可以获得有关它的创建位置以及未正确发布的更多信息。

```
template <typename T>
struct CReferenceManager
{
    CReferenceManager(const T & _obj, const string & _file, int _line) : mObj(_obj), mFile(_file), mLine(_line)
    {
        cout << "Constructing from " << _file << ":" << _line << endl;
        CReferenceManager::sObjects[make_pair(mFile, mLine)]++;
        mObj.addRef();
    }

    ~CReferenceManager()
    {
        cout << "Destructing object created at " << mFile << ":" << mLine << endl;
        CReferenceManager::sObjects[make_pair(mFile, mLine)]--;
        mObj.Release();
    }

    static map<pair<string, int>, int> sObjects;
    string mFile;
    int mLine;
    T obj;
}

int main()
{
...
    // Cycle through sObjects before return, note any unreleased entries
    return 0;
} 
```

请注意，这只是伪代码；我怀疑它可以编译或开箱即用！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T17:26:50.430

您永远不应该在自己的代码中显式分配或释放引用，因此存储源文件和引用递增或递减的行根本不会帮助您，因为这些将（应该！）始终在引用计数管理中代码。

您没有将源代码包含到您的 CReferenceManager 类中，但根据您的描述，它是引用的计数对象的包装器。这个对吗？此 CReferenceManager 对象的正确实现应确保：

*   采用裸指针的构造函数存储指针并且不更改引用计数（因为您的 CReferenceCount 类创建具有一个引用的对象）
*   引用总是在析构函数中递减
*   引用在复制构造函数中递增
*   在赋值运算符中，右侧对象的引用递增，左侧对象的引用递减
*   不应公开显式递增/递减参考方法
*   operator->() 方法应该返回指向对象的指针
*   应该没有直接的方法可以将引用计数对象从拥有它的 CReferenceManager 实例中分离出来。唯一的方法是通过分配一个新的引用计数对象。

此外，您希望将 CReferenceCount 类中的`AddRef()`和`Release()`方法设为私有，并通过类友谊使它们只能由 CReferenceManager 类访问。

如果您在 CReferenceManager 类中遵循上述规则，则可以通过确保每个人都通过分配在堆栈上的 CReferenceManager 包装器访问对象来避免泄漏或其他内存问题。换句话说：

要创建一个新的引用计数对象，请将一个新创建的对象（带有一个引用）传递给堆栈分配的 CReferenceManager 对象。例子：

```
CReferenceManager<Test1> testRef(new Test1()); 
```

要将对象作为参数传递给另一个函数或方法，请始终按值传递 CReferenceManager 对象（不是通过引用，也不是通过指针）。如果您这样做，复制构造函数和析构函数将负责为您维护引用计数。例子：

```
void someFunction(CReferenceManager<Test1> testObj)
{
    // use testObj as if it was a naked pointer
    // reference mananagement is automatically handled
    printf("some value: %d\n", testObj->someValue());
}

int main()
{
    CReferenceManager<Test1> testRef(new Test1());
    someFunction(testRef);
} 
```

如果您需要将引用计数对象粘贴在容器中，则按值插入 CReferenceManager 包装器（不是它的指针，也不是对象的裸指针）。例子：

```
std::vector< CReferenceManager<Test1> > myVector;
CReferenceManager<Test1> testRef(new Test1());
myVector.push_back(testRef);
myVector[0]->some_method(); // invoke the object as if it was a pointer! 
```

我相信如果您严格遵守上述规则，您会发现的唯一问题是引用计数实现中的错误。

遵循这些规则的示例实现在[此页面](http://www.linuxprogrammingblog.com/cpp-objects-reference-counting)中，尽管该解决方案缺乏对多线程保护的任何支持。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T20:39:10.607

有一些方法可以做到这一点，但首先让我问你一件事。为什么要手动管理引用并为内存泄漏提供机会？你可以很容易地`boost::intrusive_ptr`为你做这项工作？（如果你不想要提升，没有问题，查看实现`intrusive_ptr`并实现你自己的类，或者只是将它复制到你自己的文件中）然后你没有一个内存泄漏来搜索它！

但是作为您的问题的答案，您可以有 2`AddRef/Release`个用于调试版本，另一个用于发布，您应该将`AddRef`位置添加到结构`std::stack`中，`Release`然后从它们中弹出它们，`stack`最后您会看到堆栈中有多少来自女巫位置的引用！但如果这是用于 COM 实现，请记住 COM 可能会`AddRef`多次调用，然后稍后将其删除，因此您无法理解哪些`AddRef`没有对应`Release`的 .

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T16:19:50.530

对于我参与的项目，我也有类似的需求。我们有自己的智能指针模板类，并且由于循环引用不时出现内存泄漏。

要知道引用泄漏对象的智能指针仍然存在（2 个或更多），我们使用特殊的预处理器定义编译源代码，该定义在智能指针实现中启用特殊的调试代码。你可以看看我们的[智能指针类](https://github.com/MITK/MITK/blob/master/BlueBerry/Bundles/org.blueberry.osgi/src/berrySmartPointer.h)。

本质上，每个智能指针和引用计数对象都有一个唯一的 id。当我们得到泄漏对象的 id 时（通常使用 valgrind 来识别泄漏对象的内存分配的源位置），我们使用我们的特殊调试代码来获取引用该对象的所有智能指针 id。然后我们使用一个配置文件，我们在其中写下智能指针 ID，并且在下一次应用程序启动时，我们的调试工具会读取该文件，然后它会知道它应该为哪个新创建的智能指针实例触发一个信号以进入调试器。这揭示了创建该智能指针实例的堆栈跟踪。

诚然，这涉及一些工作，并且可能只会为较大的项目带来回报。

另一种可能性是`AddRef`在运行时在您的方法中记录堆栈跟踪。查看我的[ctkBackTrace](https://github.com/commontk/CTK/blob/master/Libs/Core/ctkBackTrace.h)类以在运行时创建堆栈跟踪。用标准 STL 类型替换 Qt 特定类型应该很容易。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T09:14:22.943

The principle of reference counting is to increase the counter when the user link to the object and to decrease when they break the link.

So you have to:

*   manipulate smart pointers, not pointers to make increase/decrease transparent
*   overload copy constructor and assign operator of the smart_pointer

Symbolic exemple:

*   `A a = new A();` refcount = 0, nobody use it
*   `Link<A> lnk( a );` refcount = 1
*   `obj.f( lnk );` obj stores lnk, refcount = 2
*   this method may returns since the ownership has been transfered to `obj`

So, take a look at parameter passing (may do automatic copies) and at copy into foreign objects.

Good tutorials exists on that in the [CORBA](http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture) nebulae.

You may see also [ACE](http://www.cs.wustl.edu/~schmidt/ACE.html) or [ICE](http://www.zeroc.com/ice.html), or [0MQ](http://www.zeromq.org/).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T00:02:58.567

简短的回答：您应该使用其他人发布的想法，即使用 ADD/RELEASE 宏并将编译器提供的预定义 __FILE__ 和 __LINE__ 宏传递给您的跟踪类。

稍微长一点的答案：您还可以使用允许您遍历堆栈并查看谁调用了该函数的功能，这比使用宏更灵活和干净，但几乎可以肯定更慢。

此页面向您展示如何在使用 GCC 时实现此目的：http: [//tombarta.wordpress.com/2008/08/01/c-stack-traces-with-gcc/](http://tombarta.wordpress.com/2008/08/01/c-stack-traces-with-gcc/)。

在 Windows 中，您可以使用一些编译器内在函数以及符号查找功能。有关详细信息，请查看： http: [//www.codeproject.com/tools/minidump.asp](http://www.codeproject.com/tools/minidump.asp)

请注意，在这两种情况下，您的程序都需要至少包含一些符号才能正常工作。

除非您对在运行时执行此操作有特殊要求，否则我建议您查看简短答案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-21T17:28:05.960

做你问的一种方法是通过 AddRef 和 Release 这个信息使用这样的东西：

```
void CReferenceCount::AddRef(const char *file=0, int line=-1) { if (file) cout << "FILE:" << file; if (line>0) count << " LINE: " << line;   .... do the rest here ... } 
```

然后当你调用该函数时，你可以使用类似于上面 Rollie 建议的宏，如下所示：

```
#define ADDREF(x) x.AddRef(__FILE__, __LINE__) 
```

这将传递进行调用的文件和行，我相信这是您所要求的。您可以控制要对方法中的信息执行的操作。正如我在上面所做的那样，将它们打印出来只是一个例子。您可能希望收集除此之外的更多信息，并将其记录到另一个对象，这样您就有了呼叫历史记录，将它们写入日志文件等。您还可以从呼叫点传递更多信息，而不仅仅是文件和线，根据您需要的跟踪类型和级别。默认参数还允许您在不传递任何内容的情况下使用它们（通过简单的宏重新定义），只是为了查看最终版本的行为方式，其中包含两次堆栈推送和两次条件检查的开销。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-19T08:52:04.307

我想通过一些工作并使用*libunwind*，您可能会尝试获得您需要的东西（这将非常感激）。

[http://www.nongnu.org/libunwind/docs.html](http://www.nongnu.org/libunwind/docs.html)

# php - 为什么我会收到“为 foreach 提供的参数无效”？

> ID：12826893
> 
> 赞同：0
> 
> 时间：2012-10-10T19:29:10.993
> 
> 标签：php, arrays, foreach

我正在我的数据库中创建一个搜索，当我使用 foreach 构造来回显我的结果时，我得到“为 foreach 提供的参数无效......”。我不明白为什么会出现这个错误，因为包含我的错误的 foreach 工作正常。

```
if (empty($errors)){
    $results = search_results($keywords);
    $results_num = count($results);

    foreach ($results as $result){
        echo '<p> <strong>', $result['TITLE'], '</strong> </p>';
    }
} else {
    foreach($errors as $error){
        echo $error, '</br>';
    }
} 
```

search_results 函数中关注的部分是这个

```
$results = "SELECT TITLE FROM occupationalinfo WHERE $where"; 
$results_num = ($results = mysql_query($results)) ? mysql_num_rows($results): 0;

if ($results_num === 0){
    return false;
}else{
    while ($results_row = mysql_fetch_assoc($results)) {
        $returned_results[] = array(
            'title' => $results_row['TITLE']
        );      
    }
} 
```

我还是编程新手，所以我知道是否有一些我可能错过或不太明白的东西。我将不胜感激任何提示或建设性的批评。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:34:22.793

```
if ($results_num === 0){
    return false;
} 
```

我敢打赌这正在执行，所以它正在返回`false`。您不能`foreach`申请`false`. 也许你应该`return array()`，或者只是检查`false`：

```
$results = search_results($keywords);
if ($results !== false) {
    $results_num = count($results);

    foreach ($results as $result){
        echo '<p> <strong>',$result['TITLE'],'</strong> </p>';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:45:52.503

试试php函数`is_array()`。

```
if (empty($errors)){
           $results = search_results($keywords);
            if(is_array($results)){
               foreach ($results as $result){
                 echo '<p> <strong>'. $result['TITLE'] .'</strong></p>';
               }
            } else {
                echo "<p> <strong>empty</strong></p>";
            }
    } 
```

或者

```
 if (empty($errors)){
        $results = search_results($keywords);
        if(is_array($results)){
             $results_num = count($results);
             foreach ($results as $result){
               echo '<p> <strong>'. $result['TITLE']. '</strong> </p>';
             }
        }        
    } else {
        foreach($errors as $error){
            echo $error, '</br>';
        }
    } 
```

# java - 停止未运行的 Windows 服务会导致构建失败

> ID：12826897
> 
> 赞同：4
> 
> 时间：2012-10-10T19:29:12.770
> 
> 标签：java, windows-services, gradle, sts-springsourcetoolsuite

使用以下 Gradle 操作，

```
developerBuild << {
   exec {
      commandLine = ['cmd', '/c', 'net', 'stop', 'Foo']
   }
} 
```

如果我执行这个任务并且 Windows 服务`Foo`没有运行，我会得到以下异常，

```
The Foo service is not started.

More help is available by typing NET HELPMSG 3521.

FAILURE: Build failed with an exception.

* Where:
Build file 'C:\...\build.gradle' line: ..

* What went wrong:
Execution failed for task ':developerBuild'.
> Command 'cmd' finished with (non-zero) exit value 2.

* Try:
Run with --info or --debug option to get more log output.

* Exception is:
org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':developerBuild'.
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:68)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)
    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:34)
    at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter$1.run(CacheLockHandlingTaskExecuter.java:34)
    at org.gradle.cache.internal.DefaultCacheAccess$2.create(DefaultCacheAccess.java:200)
    at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:172)
    at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:198)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.longRunningOperation(DefaultPersistentDirectoryStore.java:111)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.longRunningOperation(DefaultTaskArtifactStateCacheAccess.java:83)
    at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter.execute(CacheLockHandlingTaskExecuter.java:32)
    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:55)
    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)
    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:41)
    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)
    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:42)
    at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:247)
    at org.gradle.execution.DefaultTaskGraphExecuter.executeTask(DefaultTaskGraphExecuter.java:192)
    at org.gradle.execution.DefaultTaskGraphExecuter.doExecute(DefaultTaskGraphExecuter.java:177)
    at org.gradle.execution.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:83)
    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:36)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildExecuter.java:31)
    at org.gradle.cache.internal.DefaultCacheAccess$1.create(DefaultCacheAccess.java:111)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:126)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:109)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:103)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactStateCacheAccess.java:79)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuildExecuter.java:29)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:54)
    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:155)
    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:110)
    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:78)
    at org.gradle.tooling.internal.provider.ExecuteBuildAction.run(ExecuteBuildAction.java:31)
    at org.gradle.tooling.internal.provider.ConfiguringBuildAction.run(ConfiguringBuildAction.java:94)
    at org.gradle.launcher.daemon.protocol.Build.run(Build.java:68)
    at org.gradle.launcher.daemon.protocol.Build.run(Build.java:64)
    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:45)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:45)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:24)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.StartStopIfBuildAndStop.execute(StartStopIfBuildAndStop.java:28)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.ReturnResult.execute(ReturnResult.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$4.call(ForwardClientInput.java:116)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$4.call(ForwardClientInput.java:114)
    at org.gradle.util.Swapper.swap(Swapper.java:38)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:114)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:61)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy.doBuild(StartBuildOrRespondWithBusy.java:49)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.HandleStop.execute(HandleStop.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.CatchAndForwardDaemonFailure.execute(CatchAndForwardDaemonFailure.java:32)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.HandleClientDisconnectBeforeSendingCommand.execute(HandleClientDisconnectBeforeSendingCommand.java:21)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.StopConnectionAfterExecution.execute(StopConnectionAfterExecution.java:27)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.DefaultDaemonCommandExecuter.executeCommand(DefaultDaemonCommandExecuter.java:55)
    at org.gradle.launcher.daemon.server.Daemon$1$1.run(Daemon.java:123)
    at org.gradle.messaging.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:66)
Caused by: org.gradle.process.internal.ExecException: Command 'cmd' finished with (non-zero) exit value 2.
    at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:339)
    at org.gradle.process.internal.DefaultExecAction.execute(DefaultExecAction.java:39)
    at org.gradle.api.internal.file.DefaultFileOperations.exec(DefaultFileOperations.java:160)
    at org.gradle.api.internal.project.AbstractProject.exec(AbstractProject.java:818)
    at org.gradle.api.Project$exec.call(Unknown Source)
    at org.gradle.api.Project$exec.call(Unknown Source)
    at org.gradle.groovy.scripts.DefaultScript.exec(DefaultScript.groovy:161)
    at build_3fpei35pj0kg0lnicte94004ar$_run_closure5_closure11.doCall(C:\Users\meherts\workspace\SSAgentPlugin\build.gradle:67)
    at org.gradle.api.internal.AbstractTask$ClosureTaskAction.execute(AbstractTask.java:452)
    at org.gradle.api.internal.AbstractTask$ClosureTaskAction.execute(AbstractTask.java:436)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:60)
    ... 79 more

BUILD FAILED 
```

这会导致整个任务的执行停止，为什么？无论操作中命令行调用的退出代码如何，有没有办法继续执行任务？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T23:47:04.117

您可以禁用[ExecSpec](http://www.gradle.org/docs/current/javadoc/org/gradle/process/ExecSpec.html)上的退出值检查，如下所示：

```
developerBuild << {
  exec{
    commandLine = ['cmd', '/c', 'net', 'stop', 'Foo']
    ignoreExitValue = true
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T19:47:43.453

这可能有点像黑客，但我认为它有效：

```
developerBuild << {
    try {
        exec{
            commandLine = ['cmd', '/c', 'net', 'stop', 'Foo']
        }
    } catch (TaskExecutionException e) {
        //Do whatever you want
    }
} 
```

看起来 gradle 默认会在执行失败时抛出异常（如果我实现了它，我会这样做）。解决方案是捕捉这个“业务异常”。

# cordova - 从使用phonegap构建的ipa文件中拯救WWW文件夹

> ID：12826907
> 
> 赞同：0
> 
> 时间：2012-10-10T19:29:50.650
> 
> 标签：cordova, ipa, .app

我的电脑在星期六被偷了，我做了一件非常愚蠢的事情：几个月没有备份我的 phonegap 项目。

我只剩下一个 .ipa 文件。我希望有办法从这个文件中提取 WWW 文件夹。这似乎是合理的，因为该文件夹中的任何内容都没有被编译，我可以使用 IExplorer [http://www.macroplant.com/iexplorer/](http://www.macroplant.com/iexplorer/)查看内容。

我曾尝试使用 IDA Pro 并设法将 .js 文件视为二进制文件并挽救了几行，但仅此而已。老实说，IDA Pro 超出了我的想象。

任何帮助都会很棒。

提前谢谢各位。

弥敦道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:05:21.133

试试这个方法，希望你不会遇到很多障碍，因为你是构建项目的人，所以你应该知道什么是什么

*   [http://vivianaranha.com/hacking-into-phonegap-iphoneipad-apps/](http://vivianaranha.com/hacking-into-phonegap-iphoneipad-apps/)
*   存档链接：[https ://web.archive.org/web/20111002200403/http://www.vivianaranha.com/hacking-into-phonegap-iphoneipad-apps/](https://web.archive.org/web/20111002200403/http://www.vivianaranha.com/hacking-into-phonegap-iphoneipad-apps/)

> 脚步
> 
> 1.  获取 phonegap iPhone 应用程序。我有一个，这是我很久以前创造的。
> 2.  所以去 - [http://www.phonegap.com/apps](http://www.phonegap.com/apps)
> 3.  选择 iPhone 或 iPad
> 4.  选择您想要代码的应用程序（让我选择我的应用程序）
> 5.  获取应用程序的链接并使用 iTunes 打开
> 6.  下载应用程序。它会将应用程序保存在您的应用程序文件夹中
> 7.  右键单击该应用并选择“在 Finder 中显示”</li>
> 8.  您将看到 .ipa 文件。`TicTacToe 1.1.ipa`
> 9.  将其重命名为`TicTacToe 1.1.zip`
> 10.  解压文件，你会发现类似这样的东西
>     
>     
>     
>     ```
>     iTunesArtwork
>     iTunesMetadata.plist
>     Payload\TicTacToe 
>     ```
>     
>     
> 11.  右键单击`TicTacToe`并选择“显示包内容”</li>
> 12.  其中主要有一个文件夹，`www`其中包含整个 HTML、JS 和 CSS 文件或任何人使用的文件。
> 13.  田…… 就是这样……

# jakarta-ee - 隐藏 Etag 以在 jboss 中对静态内容使用缓存控制

> ID：12826909
> 
> 赞同：0
> 
> 时间：2012-10-10T19:29:53.813
> 
> 标签：jakarta-ee, servlets, jboss, browser-cache, cache-control

我需要禁用 Etag 标头作为响应，以便我可以将缓存控制设置为一个较大的值，以用于在 6 个月内不会更新的 Web 应用程序的静态内容。我正在使用jboss。我找到了一种创建过滤器以添加缓存控制标头的方法。有没有办法不设置 etag、配置文件中的设置或使用过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:55:42.320

实际传递内容（并生成 ETag）的 HTTP 服务器是 Tomcat，JBoss 是在其之上构建的。有了这个，我可以找到下面的文章，它基本上说你不能关闭 ETags，但你必须在响应发送到浏览器之前从响应中删除（过滤）它们。

[http://thinkinginsoftware.blogspot.de/2011/04/enabling-resource-caching-in-tomcat.html](http://thinkinginsoftware.blogspot.de/2011/04/enabling-resource-caching-in-tomcat.html)

# mysql - MySQL 基于多个日期返回查询，如果不存在其他记录

> ID：12826914
> 
> 赞同：0
> 
> 时间：2012-10-10T19:30:04.793
> 
> 标签：mysql

我正在创建一个 php/mysql 应用程序，并尝试根据用户提供的日期运行查询，然后如果另一个日期不存在或不匹配，则使用这些结果返回查询。

我有多个订单要根据一些事情进行查询，例如：

1.  用户提供日期。MySQL 使用提供的日期并仅在没有与该 Customer_ID 关联的更当前日期的“订单”时才返回行。因此，如果根据用户提供的日期没有新订单，我只想要一个值。

这是我一直在玩的：

```
SELECT
o.Customer_ID, o.ShippingCompanyName, cg.Category, cd.Category_ID, o.Order_ID,

SUM(o.CustomerOrderTotal) as TOTAL,
COUNT(o.Order_ID) as ORDERS,
MAX(o.OrderPlaceServerTime) as LASTORDER

FROM Orders o

LEFT JOIN CustomerDetails cd ON o.Customer_ID = cd.Customer_ID
LEFT JOIN _CustomerCategory cg ON cg.Category_ID = cd.Category_ID

WHERE (
        o.OrderPlaceServerTime <= '".$BEFORE."'
    AND o.OrderPlaceServerTime NOT BETWEEN '".$BEFORE."' AND NOW()
      )

AND o.IsVOID = 0
AND o.IsPENDING = 0                     

GROUP BY o.Customer_ID
ORDER BY TOTAL DESC 
```

我没有得到我想要的结果。我给我的客户订单也有比用户提供的日期更新的订单。

此外，“日期”就像 '2010-10-10 10:05:55' 和数据和时间一样。

我有点迷茫，所以我希望有人可以在这里帮助我或指出我正确的方向。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:40:16.667

您在同一个查询中混合了两件事。

每次 WHERE 表达式运行时，它们都会检查单行！他们不检查其他行。因此，当您检查日期时，您基本上是在说 WHERE i 小于 5 并且 i 不大于 5。这是没有意义的 - 您在第一个表达式中已经说过小于 5。

将 WHERE 更改为：

```
o.OrderPlaceServerTime <= '$BEFORE' AND
NOT EXISTS (SELECT * FROM Orders WHERE Orders = o.Customer_ID AND OrderPlaceServerTime > '$BEFORE') 
```

# java - 在linkedHashSet中有序插入，任何高效的方式？

> ID：12826916
> 
> 赞同：1
> 
> 时间：2012-10-10T19:30:22.733
> 
> 标签：java, performance, data-structures, linkedhashset

所以我有一个 LinkedHashSet ，其值为 a1, a2, , b, c1, c2

我想用 x 替换 b ，这样 x 的顺序应该与 b 的顺序相同。

一种明显的方法是

```
 private LinkedHashSet<String> orderedSubstitution(final Set<String> originalOrderedSet, final String oldItem,
            final String newItem) {
        final LinkedHashSet<String> newOrderedSet = new LinkedHashSet<String>();
        // Things we do to maintain order in a linkedHashSet
        for (final String stringItem : originalOrderedSet) {
            if (stringItem.equals(oldItem)) {
                newOrderedSet.add(newItem);
            } else {
                newOrderedSet.add(stringItem);
            }
        }
        return newOrderedSet;
    } 
```

这不仅是 O(n) 我也*觉得*这不是最快的方法。有更好的解决方案吗？注意：我必须使用linkedHashMap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:45:40.033

一种方法是使用内置替换的 LinkedHashSet 的子类，例如：

```
public class ReplacingLinkedHashSet extends LinkedHashSet<String> {
    private final String what;
    private final String with;

    public ReplacingLinkedHashSet(String what, String with) {
        this.what = what;
        this.with = with;
    }

    @Override
    public Iterator<String> iterator() {
        final Iterator<String> iterator = super.iterator();
        return new Iterator<String>() {
            @Override
            public boolean hasNext() {
                return iterator.hasNext();
            }

            @Override
            public String next() {
                String next = iterator.next();
                return what.equals(next) ? with : next;
            }

            @Override
            public void remove() {
                iterator.remove();
            }
        };
    }
} 
```

但这意味着在填充 Set 之前必须知道替换。（当然你可以很容易地把这个`<String>`版本变成一个通用版本。

* * *

回复评论：

好的，那么没有完整的迭代就没有办法解决它。但是，您可以在检索值时保持 LinkedHashSet 不变并装饰迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:27:06.903

1.  创建结构图
2.  用 <String, OrderOfTheString> 插入所有字符串
3.  通过在当前字符串的 OrderOfTheString 之后添加一个小的 Delta 来插入新字符串。
4.  将 Map 转换为 LikedHashSet

我知道这很复杂，但是当我们链接约 1000000 个元素的哈希映射并且要插入大约 1000 个元素时，它肯定会更好。

# java - 如何在 Play 2.0 中呈现纯 html

> ID：12826920
> 
> 赞同：0
> 
> 时间：2012-10-10T19:30:26.997
> 
> 标签：java, html, jsp, playframework, playframework-2.0

我正在学习 JSP 和 Play 框架，我知道它在 Scala 上运行并基于模板呈现视图，但是如果我只想使用纯 HTML 而不是 scala 模板怎么办？

我所处的情况是我正在设计网站以匹配可视模板，因此我使用 Dreamweaver 来构建 html 文件。不过我真的很喜欢 Play 框架，所以我想继续使用它。那么，我在这里有什么选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T20:15:49.393

我不明白。Play 的视图不仅仅是漂亮的 html 文件，当然你可以（甚至应该）使用你最喜欢的工具来设计部分，无论如何你还必须学习如何在其中包含动态部分。

当然，您可以使用 DreamWeaver 来完成该任务，因为它具有编辑源代码的功能。但我可以根据我自己的经验向您保证，与 DW 相比，在 Play 的日常工作中，有更好的工具。

您也可以在`/public`文件夹中使用纯 HTML，但是在这种情况下，您将无法使其成为动态的，因此它没有任何意义，因为您可以在没有任何框架的情况下创建页面 - 只需使用使用 DW 创建的静态文件。

概括地说：您需要验证您的需求，因为从您的问题中我读到：“我喜欢 Play 框架，无论如何我不想将它用于它的工作......”

**评论后编辑：**

您不必使视图动态化。如果您不将任何参数传递到视图中并将纯 HTML 放在那里，那么它也将是显示*静态*页面的“*相对便宜”的方式。*只是您需要记住将文件的第一行留空。因此，您无需使用，只需将裸 HTML 代码放入 ie:中，然后使用操作：*`File index = new File...``app/views/staticContact.scala.html`*

 *```
public static Result staticContact(){
    return ok(views.html.staticContact.render());
} 
```

另一方面，上次我想知道是否将*静态页面*的 HTML 代码放入数据库不是更好，在这种情况下，您可以创建一个编辑页面，您可以在其中更改 HTML 而无需重新部署应用程序。您所需要的只是从数据库中获取 HTML 并将其显示在一个通用视图中。为了获得更好的性能，您可以使用包含的缓存实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T18:55:23.003

GET / controllers.Assets.at(path="/public/html", file="index.html")

这适用于 /public/html/index.html 文件的 play 2.0.1*

# php - 在 .load() 之后使用 scrollTo 插件

> ID：12826922
> 
> 赞同：0
> 
> 时间：2012-10-10T19:30:29.010
> 
> 标签：php, jquery, ajax, scrollto

我有一个 div 溢出：滚动；在它上面，这意味着 div 需要在页面加载时滚动到底部。

我使用了 scrollTo 插件，它工作正常，但是当我替换 div 中的内容并将其移动到外部页面然后使用时：

```
 $('document').ready(function()
    {
        $('#div').load("pagetoload.php").show();
    }); 
```

它不应该滚动？

这是我的滚动代码

```
 $('#div').scrollTo( { top:800, left:0}, 800 ); 
```

当我在加载后放置该代码时，它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:33:44.110

你需要使用.load的回调函数：

```
$('#div').load("pagetoload.php", function(){
  $('#div').scrollTo( { top:800, left:0}, 800 );
}).show(); 
```

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:33:48.400

加载异步运行。这意味着它会在以后发生。所以你的 show() 命令和滚动运行时什么都没有。然后加载发生在这一切完成之后。

您需要使用 load 的回调函数，并将您的代码放在那里。

```
$('#div').load("pagetoload.php", function(responseText, textStatus) { ... } ) 
```

另外：您不需要`scrollTo`像您正在做的事情一样简单的插件。只需使用`scrollTop()`and`scrollLeft()`直接代替。

# xcode - xcode 和 bitbucket

> ID：12826929
> 
> 赞同：0
> 
> 时间：2012-10-10T19:30:58.820
> 
> 标签：xcode, bitbucket

当我尝试将我的 repo 添加到 xcode 管理器时，我得到以下信息：

![在此处输入图像描述](../Images/5bee7323a61abe61a6916c479d10d2fa.png)

我用谷歌搜索了这个并在这里搜索，什么也没找到……wth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:08:43.220

如果您在 bitbucket.org 上使用 hg(mercurial)，您可以参考以下网址：http://tadabborat.tumblr.com/post/9502320721/mercurial-warning-bitbucket-org-certificate-with 我解决了我的问题按照指南。如果加上公钥信息，就可以顺利使用bitbucket.org了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:39:54.977

我通常使用 App SourceTree 来管理 bitbucket 和 github 项目。您可以从 mac 应用商店免费下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:05:33.680

实际上，我第一次按照 bitbucket 指令通过终端手动完成了它，现在它允许我通过 xcode 界面完成所有操作。

# javascript - 停止幻灯片放映 onmouseover javascript

> ID：12826937
> 
> 赞同：1
> 
> 时间：2012-10-10T19:31:33.970
> 
> 标签：javascript

这是幻灯片脚本，我希望它在鼠标移过时停止。但我不知道要添加什么。我已经尝试在网上寻找它，但它们都不起作用:(

```
<SCRIPT LANGUAGE="JavaScript">
<!--
var dimages=new Array();
var numImages=2;
for (i=0; i<numImages; i++)
{
dimages[i]=new Image();
dimages[i].src="/v/vspfiles/assets/images/image"+(i+1)+".jpg";
}
var curImage=-1;
function swapPicture()
{
if (document.images)
{
var nextImage=curImage+1;
if (nextImage>=numImages)
nextImage=0;
if (dimages[nextImage] && dimages[nextImage].complete)
{
var target=0;
if (document.images.myImage)
target=document.images.myImage;  
if (document.all && document.getElementById("myImage"))
target=document.getElementById("myImage");

if (target)
{
target.src=dimages[nextImage].src;
curImage=nextImage;
}
setTimeout("swapPicture()", 4000);
}
else
{
setTimeout("swapPicture()", 1000);
}
setTimeout("swapPicture()", 4000);
//--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:04:38.403

根据提供的信息（此时只有 javascript）。幻灯片脚本取决于 `setTimeout();`

负责停止 setTimeout() 的代码；是

`clearTimeout();`

将鼠标事件添加到幻灯片并调用 clearTimeout()。至于鼠标事件和最佳实践，请查看 SO 以获取更多说明。

这是关于 setTimeout() 的一个参考。

[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

请发布 HTML 以获得更好、更准确的鼠标事件代码。

# python - Subversion 在 Python Commit Hooks 中获取文本状态数据

> ID：12826940
> 
> 赞同：0
> 
> 时间：2012-10-10T19:31:45.093
> 
> 标签：python, svn

我正在寻找一种扩展 Python Commit Hooks 的方法，这样我只能找出所有被修改的文件，不包括所有已更改的修订属性。

是否有我可以使用的 SVN.Core 或 SVN.fs 或其他 SVN 导入库函数？

我目前正在研究 svn_fs_txn_prop

但没有太多的运气。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:07:12.627

使用 Python 中的 Subversion Core 库，您可以创建一个类来读取与提交关联的不同 Subversion 属性。

你可以这样称呼：

```
changeCollector = svn.repos.ChangeCollector(self.fs_obj,self.fsroot,self.pool);

        for path, change in changeCollector.changes.items():
            # this is the property that i want
            change.text_changed 
```

# c# - G-WAN + Phalanger

> ID：12826942
> 
> 赞同：1
> 
> 时间：2012-10-10T19:31:50.303
> 
> 标签：c#, php, g-wan, phalanger

好的，我有这个疯狂的想法，因为 php 不能很好地与 G-WAN 配合使用，也许解决方案是使用 phalanger 将 php 代码编译为 c# mono 程序集，然后从 g-wan 使用它？

有人对这种组合有任何经验并且可以提供帮助吗？

或者也许我错了，G-wan 可以运行 php？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:09:28.057

有人试过[PH7](http://ph7.symisc.net/) 吗？

PH7 是一个 PHP 引擎，它允许宿主应用程序**在进程**内编译和执行 PHP 脚本。

作为一个嵌入式解释器，它允许多个解释器状态共存于同一个程序中，它们之间没有任何干扰。

**PH7 是线程安全的**。

但是为了线程安全，必须使用定义的 PH7_ENABLE_THREADS 编译时间指令来编译 PH7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:51:42.780

好吧，我确实联系了 Phalanger（和其他一些解决方案）背后的人来添加对 PHP 的支持。他们（当时）的回答是，Phalanger 不再开发。

现在它已被重新实现为 CLR 语言，这可能会给 PHP 带来第二次生命。虽然我使用了 G-WAN 3.9 测试版，但我还没有尝试使用 Mono 运行时支持的各种语言。

关于正版PHP库，我写了下面的代码让它运行：

```
// ----------------------------------------------------------------------------
// php.c: G-WAN using PHP scripts
//
// To build PHP5:
//
//    CFLAGS="-O3" ./configure --enable-embed --enable-maintainer-zts --with-tsrm-pthreads --without-pear
//    make clean
//    make
//    sudo make install
/*    Installing PHP SAPI module:       embed
      Installing PHP CLI binary:        /usr/local/bin/
      Installing PHP CLI man page:      /usr/local/php/man/man1/
      Installing PHP CGI binary:        /usr/local/bin/
      Installing build environment:     /usr/local/lib/php/build/
      Installing header files:          /usr/local/include/php/
      Installing helper programs:       /usr/local/bin/
        program: phpize
        program: php-config
      Installing man pages:             /usr/local/php/man/man1/
        page: phpize.1
        page: php-config.1
      Installing PEAR environment:      /usr/local/lib/php/
      [PEAR] Archive_Tar    - already installed: 1.3.7
      [PEAR] Console_Getopt - already installed: 1.3.0
      [PEAR] Structures_Graph- already installed: 1.0.4
      [PEAR] XML_Util       - already installed: 1.2.1
      [PEAR] PEAR           - already installed: 1.9.4
      Wrote PEAR system config file at: /usr/local/etc/pear.conf
      You may want to add: /usr/local/lib/php to your php.ini include_path
      /home/pierre/Downloads/PHP/php5.4-20/build/shtool install -c ext/phar/phar.phar /usr/local/bin
      ln -s -f /usr/local/bin/phar.phar /usr/local/bin/phar
      Installing PDO headers:          /usr/local/include/php/ext/pdo/       */
/*      
      enabling the 'thread safety' --enable-maintainer-zts option results in:

          error: 'tsrm_ls' undeclared (first use in this function)
*/     
/*
tsrm_ls
    TSRM local storage - This is the actual variable name being passed around 
    inside the TSRMLS_* macros when ZTS is enabled. It acts as a pointer to 
    the start of that thread's independent data storage block.

TSRM
    Thread Safe Resource Manager - This is an oft overlooked, and seldom if 
    ever discussed layer hiding in the /TSRM directory of the PHP source code.
    By default, the TSRM layer is only enabled when compiling a SAPI which 
    requires it (e.g. apache2-worker). All Win32 builds have this layer 
    enabled enabled regardless of SAPI choice.

ZTS
    Zend Thread Ssafety - Often used synonymously with the term TSRM. 
    Specifically, ZTS is the term used by ./configure 
    ( --enable-experimental-zts for PHP4, --enable-maintainer-zts for PHP5), 
    and the name of the #define'd preprocessor token used inside the engine 
    to determine if the TSRM layer is being used.    

TSRMLS_??
    A quartet of macros designed to make the differences between ZTS and 
    non-ZTS mode as painless as possible. When ZTS is not enabled, all 
    four of these macros evaluate to nothing. When ZTS is enabled however,
    they expand out to the following definitions:

        TSRMLS_C tsrm_ls
        TSRMLS_D void ***tsrm_ls
        TSRMLS_CC , tsrm_ls
        TSRMLS_DC , void ***tsrm_ls    

   PHP relies on global variables from resource type identifiers, to 
   function callback pointers, to request specific information such as 
   the symbol tables used to store userspace variables. Attempting to 
   pass these values around in the parameter stack would be more than 
   unruly, it'd be impossible for an application like PHP where it's 
   often necessary to register callbacks with external libraries which
   don't support context data.

   So common information, like the execution stack, the function and 
   class tables, and extension registries all sit up in the global 
   scope where they can be picked up and used at any point in the 
   application.    

   For single-threaded SAPIs like CLI, Apache1, or even Apache2-prefork,
   this is perfectly fine. Request specific structures are initialized 
   during the RINIT/Activation phase, and reset back to their original 
   values during the RSHUTDOWN/Deactivation phase in preparation for 
   the next request. A given webserver like Apache1 can serve up multiple
   pages at once because it spawns multiple processes each in their own 
   process space with their own independant copies of global data.    

   The trouble starts with threaded webservers like Apache2-worker, or IIS
   where two or more threads trying to run the a request at the same time.
   Each thread wants to use the global scope to store its request-specific
   information, and tries to do so by writing to the same 
   storage space. At the least, this would result in userspace variables 
   declared in one script showing up in another. In practice, it leads to 
   quick and disasterous segfaults and completely unpredictable behavior as 
   memory is double freed or written with conflicting information by separate
   threads.        

*/
#pragma include "/usr/local/include/php"
#pragma include "/usr/local/include/php/main"
#pragma include "/usr/local/include/php/TSRM"
#pragma include "/usr/local/include/php/Zend"
#pragma link "/usr/local/lib/libphp5.so"

#include "gwan.h" // G-WAN exported functions

#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/syscall.h>

#include <php/sapi/embed/php_embed.h>
#include <php/Zend/zend_stream.h>

static pid_t gettid(void) { return syscall(__NR_gettid); }

// PHP
static int ub_write(const char *str, unsigned int str_len TSRMLS_DC)
{
   puts(str); // this is the stdout output of a PHP script
   return 0;
}

static void log_message(char * message)
{
   printf("log_message: %s\n", message);
}

static void sapi_error(int type, const char * fmt, ...) { }

static void php_set_var(char *varname, char *varval)
{
   zval *var;
   MAKE_STD_ZVAL(var);
   ZVAL_STRING(var, varval, 1);
   zend_hash_update(&EG(symbol_table), varname, strlen(varname) + 1,
                    &var, sizeof(zval*), NULL);
}

static char *php_get_var(char *varname)
{
   zval **data = NULL;
   char *ret = NULL;
   if(zend_hash_find(&EG(symbol_table), varname, strlen(varname) + 1,
                    (void**)&data) == FAILURE)
   {
      printf("Name not found in $GLOBALS\n");
      return "";
   }

   if(!data)
   {
      printf("Value is NULL (not possible for symbol_table?)\n");
      return "";
   }

   ret = Z_STRVAL_PP(data);
   return ret;
}

static int php_init(void)
{
   static int once = 0;
   if(once) return 0;

   once = 1;
   static char *myargv[2] = {"toto.php", NULL};
   php_embed_module.log_message = log_message;
   php_embed_module.sapi_error  = sapi_error;
   php_embed_module.ub_write    = ub_write;
   if(php_embed_init(1, myargv PTSRMLS_CC) == FAILURE)
   {
      printf("php_embed_init error\n");
      return 1;
   }
   return 0;
}

static void php_shutdown()
{
   php_embed_shutdown(TSRMLS_C);
}

static int php_exec(char *str)
{
   zval ret_value;
   int exit_status;
   zend_first_try
   {
      PG(during_request_startup) = 0;

      // run the specified PHP script file
      // sprintf(str, "include (\"% s \ ");", scriptname);

      zend_eval_string(str, &ret_value, "toto.php" TSRMLS_CC);

      exit_status = Z_LVAL(ret_value);
   } zend_catch
   {
      exit_status = EG(exit_status);
   }
   zend_end_try();
   return exit_status;
}

__thread char reply_num[8] = {0};
__thread pid_t tid = 0;

int main(int argc, char *argv[])
{
   if(!tid)
   {
      tid = gettid();
      s_snprintf(reply_num, 8, "%u", tid);
      php_init();
   }

   xbuf_t *reply = get_reply(argv);
   //php_set_var("argv", argv[0]);
   php_set_var(reply_num, "");

   char fmt[] = //"print(\"from php [$test]\n\");\n"
                "$reply%s = \"Hello World (PHP)\";\n";
   char php[sizeof(fmt) + sizeof(reply_num) + 2];
   s_snprintf(php, sizeof(php), fmt, reply_num);

   php_exec(php);

   xbuf_cat(reply, php_get_var(reply_num));
   return 200;
} 
```

如果有人可以让这段代码与多个工作线程一起工作而不会导致 PHP 运行时崩溃，那么 PHP 将被添加到 G-WAN。

以下是 G-WAN 使用单个工作线程产生的结果：

```
-----------------------------------------------------
weighttp -n 100000 -c 100 -t 1 -k "http://127.0.0.1:8080/?php.c"

finished in 0 sec, 592 millisec, **168744 req/s**, 48283 kbyte/s
requests: 100000 total/started/done/succeeded, 0 failed/errored
status codes: 100000 2xx, 0 3xx, 0 4xx, 0 5xx
traffic: 29299985 bytes total, 27599985 bytes http, 
         1700000 bytes data
----------------------------------------------------- 
```

解决这个 PHP 线程问题会很棒。感谢您帮助任何人！

# javascript - javascript Datatable.js 如何根据上一列显示值

> ID：12826943
> 
> 赞同：1
> 
> 时间：2012-10-10T19:31:50.303
> 
> 标签：javascript, jquery-datatables

我正在使用 datatables.net 中的 datatables.js 并尝试显示基于 prev col 的列。就像如果 prev col 的值 < 0 然后 Dr else CR。

我尝试了以下脚本：

```
$(document).ready(function() {
    var oTable = $('#transaction-list-results').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "bProcessing": true,
        "sAjaxSource": "ajax/transactions.php",
    "aaSorting": [[0, 'asc']],
    "bAutoWidth": false,
        "aoColumns": [
            { "mData": "ref_no", 'sWidth': '100px' },
            { "mData": "date", 'sWidth': '100px', "mRender": function(data, type, row){return localizeDateStr(data);}},
            { "mData": "desc", 'sWidth': '300px' },
            { "mData": "amount", 'sWidth': '75px', "sCalss": 'amount' },
        { "mData": "depo", 'sWidth': '75px', "mRender": function(data, type, row){return data;}},
        { "mData": "width", 'sWidth': '75px', "mRender": function(data, type, row){return data;}},
        { "mData": "transfer", 'sWidth': '75px', "mRender": function(data, type, row){return data;}}
        ]
    } );
} ); 
```

我的 transaction.php 文件的结果：

```
{"aaData":[{"ref_no":"4345643532","date":"2012-10-09T17:36:28Z","desc":"Western Union","amount":-50,"depo":"","width":"","transfer":""},{"ref_no":"4324","date":"2012-10-09T17:28:06Z","desc":"123","amount":-10,"depo":"","width":"","transfer":""},{"ref_no":"4324","date":"2012-10-09T17:27:48Z","desc":"123","amount":3.45,"depo":"","width":"","transfer":""},{"ref_no":"123","date":"2012-10-05T20:56:11Z","desc":"abc","amount":10,"depo":"","width":"","transfer":""},{"ref_no":"12","date":"2012-10-01T16:47:19Z","desc":"autorefill","amount":2000,"depo":"","width":"","transfer":""}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:24:33.387

因此，您实际上已经在这里使用了一些应该有所帮助的功能。

`mRender`将允许您呈现在定义中`aoColumns`定义的特定列中显示的数据。您正确地为函数标记了三个参数：

*   `data`（单元格的数据，基于`mData`键）
*   `type`
*   `row`（整行的数据集）

所以你可以做这样的事情：

```
...
"mRender": function(data, type, row) {
    var valueToCompare = row.someOtherCell
        returnValue = data;

    if (data > valueToCompare) { // or some similar logic
        returnValue = somethingElse;
    }

    return returnValue;
}
... 
```

另外，作为旁注-您使用`mRender`几次只是为了返回`data`。如果您不操作该值，则没有必要 - 这是通过简单地设置`mData`属性隐式完成的。

# actionscript-3 - 修改舞台上的 TLF 文本字段属性

> ID：12826945
> 
> 赞同：0
> 
> 时间：2012-10-10T19:32:01.997
> 
> 标签：actionscript-3, flash, tlf

我在舞台上有一个 TLF 文本字段。我正在尝试在简单的 Flash 文档中对此进行测试。

我的代码接受了一些我解析的 xml。xml 会有所不同，并且不会总是更改文本字段的所有属性。例如，在一种情况下，我只想更改字体的大小。在另一种情况下，我只想更改字体的对齐方式。

我正在使用 TLF 文本字段，因为我们将翻译成阿拉伯语，并且我已经获得了从右到左的文本使用它们。

这些是我需要在代码中编辑的一些属性：

*   字体大小
*   字体
*   结盟
*   领导
*   粗体、斜体、下划线（粗体）

任何编码帮助都会很棒。我已经看到了关于文本流和文本布局的想法，但我显然没有正确使用它，因为我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:07:20.607

很久以前，在我放弃并停止使用 TLF 字段之前。我有一个项目要求动态添加并从/到阶段删除 tlf 文件。这是该项目的代码：

这将动态生成默认格式

```
 var config:Configuration    = new Configuration();
        var defTextFormat:  TextLayoutFormat = new TextLayoutFormat();
        defTextFormat.textAlign   = TextAlign.LEFT;
        defTextFormat.fontFamily  = m_strFontName;
        defTextFormat.fontSize    = m_nFontSize;
        defTextFormat.fontWeight  = FontWeight.BOLD
        defTextFormat.paddingLeft = 3;
        defTextFormat.paddingTop  = 3;
        defTextFormat.paragraphStartIndent = 3;
        defTextFormat.paragraphSpaceBefore = 3;

        config.defaultLinkActiveFormat  = defTextFormat;
        config.defaultLinkHoverFormat   = defTextFormat;
        config.defaultLinkNormalFormat  = defTextFormat;
        config.textFlowInitialFormat    = ITextLayoutFormat( defTextFormat );

        m_textFlow = new TextFlow( config ); 
```

成员 m_textFlow 持有对 TLF 字段的引用。要添加和删除元素，请使用 m_textFlow.addChild( p ); 其中 p 是段落元素，请参阅：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flashx/textLayout/elements/ParagraphElement.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flashx/textLayout/elements/ParagraphElement.html)

要更改 FontSize 并为元素着色，例如：

```
var _p:ParagraphElement = ParagraphElement( m_textFlow.getChildAt( iChild ) );
for ( var iParChild: uint = 0; iParChild < _p.numChildren; ++iParChild )
{
   _p.getChildAt( iParChild ).color = color;
       _p.getChildAt( iParChild ).fontSize = nRatio; 
```

...

也许这可以帮助你。

# opencv - 将 cython 内存视图传递给 OpenCV 函数

> ID：12826946
> 
> 赞同：4
> 
> 时间：2012-10-10T19:32:06.373
> 
> 标签：opencv, numpy, cython, memoryview

我正在使用 cython memoryviews 来引用一些灰度图像。我已经在我编写的一些图像处理代码中成功地使用了它。现在，我需要使用一些 OpenCV 函数。不幸的是，我发现我无法将内存视图作为图像参数传递给 OpenCV 函数。代码可以编译，但是当它运行时，它会在 OpenCV 函数调用处停止，并显示“TypeError: is not a numpy array”

我可以使用 np.asarray(my_memoryview) 将 memoryview 转换回 numpy 数组。这可行，但它复制数据并且速度很慢。

在 memoryview 文档中，他们谈论强制转换为 numpy [http://docs.cython.org/src/userguide/memoryviews.html#coercion-to-numpy](http://docs.cython.org/src/userguide/memoryviews.html#coercion-to-numpy) 似乎我应该能够将 memoryview 强制转换为 numpy数组而不复制内存。但是，如果我写：

```
im = np.asarray(<np.uint8_t[:, :]> my_memoryview) 
```

它会导致编译错误：“只能从指针或数组创建 cython.array”

任何有关如何将 memoryview 传递给 OpenCV 函数，或如何在不复制数据的情况下将 memoryview 强制转换为 numpy 数组的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:47:11.123

Numpy/OpenCV 不需要 memoryviews，但它需要一个[legacy 前驱](http://docs.scipy.org/doc/numpy/reference/arrays.interface.html#__array_interface__)。您可以创建一个包装类：

```
from cython.view cimport memoryview

cdef extern from "Python.h":
    object PyLong_FromVoidPtr(void *p)

cdef class OpenCVMemoryView:
    cdef object arr
    cdef object underlying_object
    def __init__(OpenCVMemoryView self, np.uint8_t[:, :] my_memoryview):
        self.underlying_object = my_memoryview # prevents GC of my_memoryview
        cdef memoryview my_memoryview_c = my_memoryview
        self.arr = dict(version=3,
            typestr='<u1', #typestr=np.uint8,
            data=(PyLong_FromVoidPtr(<void*>my_memoryview_c.view.buf), False),
            strides=my_memoryview.strides,
            shape=my_memoryview.shape)
    def __array_interface__(self):
        return self.arr 
```

Cython [memoryview 对象](https://github.com/cython/cython/blob/master/Cython/Utility/MemoryView.pyx)具有返回`__array_interface__`所需元组的属性。

如果这不是更快，我会推断您的解决方案已经没有复制数据。

# extjs - 分页工具栏不起作用

> ID：12826952
> 
> 赞同：0
> 
> 时间：2012-10-10T19:32:34.307
> 
> 标签：extjs, extjs4.1

我正在使用 PagingToolbar 过滤我的结果搜索，我想每页显示 20 个结果，但在我的网格中仍然显示所有记录。

我网格中的 bbar

```
bbar: Ext.create('Ext.PagingToolbar', 
store: store,
pageSize: 20,
displayInfo : true,
plugins: Ext.create('Ext.ux.ProgressBarPager', {})
}), 
```

我的商店

```
Ext.define('Mystore', {
extend: 'Ext.data.Store',
model: 'Mymodel',
pageSize: 20,
autoLoad: true,
remoteSort: true,
proxy: {
    type: 'rest',
    url: 'search',
    reader: {
        type: 'json',
        root: 'root',
        idProperty: 'id'
    },
    writer: {
        type: 'json',
        writeAllFields: true
    }
} 
```

});

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:04:32.100

为商店提供数据的`/search`REST 服务需要支持`start`、`limit`和/或`page`参数，以便商店一次可以请求一页结果。

要支持该[`limit`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Rest-cfg-limitParam)参数，您的服务必须将返回的结果数限制为不超过该参数中指定的计数。您通常会通过将限制值传递给您用来提供结果的数据库查询来实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T07:20:51.520

您的 Store 必须包含此参数以及 start 和 limit，并且您的后端需要使用这些参数。

baseParams：{开始：0，限制：20}

在java后端，

```
 String startPage = request.getParameter("start");
    String limits = request.getParameter("limit"); 
```

它是您网格的一种过滤器。

# c# - 以下缓存项会在 15 分钟后过期吗？

> ID：12826956
> 
> 赞同：4
> 
> 时间：2012-10-10T19:33:01.037
> 
> 标签：c#, asp.net, caching

```
_cache.Insert(cacheKey, userList, null,
 Cache.NoAbsoluteExpiration,
 new TimeSpan(0, 15, 0),
 CacheItemPriority.High, null); 
```

我上面的代码似乎没有在 3 分钟后过期缓存，userList 对象从更新的数据库中提取数据，但缓存在 15 分钟后不会过期。

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:36:21.650

您正在使用明确将缓存设置为永不过期`Cache.NoAbsoluteExpiration`。您想[`Cache.NoSlidingExpiration`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.noslidingexpiration.aspx)改用：

> 使用时，此字段将`slidingExpiration`参数 设置为`TimeSpan.Zero`具有恒定值零的字段。缓存项根据与or方法调用`absoluteExpiration`关联的参数过期。`Insert``Add`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T19:38:13.407

您将 15 分钟传递给滑动到期参数：http: [//msdn.microsoft.com/en-us/library/05kd8d77.aspx](http://msdn.microsoft.com/en-us/library/05kd8d77.aspx)

上次访问插入对象的时间与该对象过期的时间之间的时间间隔。如果此值等于 20 分钟，则对象将在上次访问后 20 分钟过期并从缓存中删除。如果使用滑动过期，absoluteExpiration 参数必须为 NoAbsoluteExpiration。

如果您的缓存对象的访问频率高于每 15 分钟一次，则它永远不会过期。

```
_cache.Insert(
        cacheKey, 
        userList, 
        null, 
        new TimeSpan(0, 15, 0),
        Cache.NoSlidingExpiration,
        CacheItemPriority.High, 
        null); 
```

现在该项目将在 15 分钟后过期

# ios - 如何管理 Cordova/PhoneGap jQuery Mobile iOS WebApp 持续更新和 Apple 审核流程？

> ID：12826960
> 
> 赞同：1
> 
> 时间：2012-10-10T19:33:18.597
> 
> 标签：ios, cordova, configuration, appstore-approval

我的 Cordova iOS Web 应用程序适用于生产网站。iOS webapp 的版本必须与网站的版本匹配才能正常工作。

现在我需要将 iOS webapp 的第 2 版提交给 Apple 以供审核。我确实有一个版本 2 的临时网站。

我有两个选择：

> 1.  峰会 webapp 指向 Apple Review 的登台服务器。如果获得批准，请将其更改为指向生产服务器并再次提交，并附上说明仅进行更改并希望快速批准的注释。然后我将生产网站更新到第 2 版，并将批准版本的 iOS webapp 推广到 iTune 应用商店。
> 2.  找到一些方法将 SERVER_URL 设置保存在 iOS webapp 之外（在 html5 缓存等中），并让 webapp 在运行之前读取此设置，并要求 Apple 审阅者在测试之前将此设置更改为 STAGING_SERVER_URL。

我也不喜欢。也许我错过了其他一些更好的方法。我希望一些大师能指出我正确的方向。提前致谢。

# jquery - 从以前通过 ajax 加载的页面中通过 ajax 获取内容

> ID：12826961
> 
> 赞同：0
> 
> 时间：2012-10-10T19:33:21.593
> 
> 标签：jquery, tabs

我使用了 jquery 选项卡，通过单击一个选项卡，我通过 ajax 加载了页面。我通过 javascript 编辑了加载的页面并添加了一些 html 元素（嵌套列表）。我尝试在其他 php 页面中使用 load() 函数通过 jquery 加载这些元素，所以我可以在图表中表示这些嵌套列表，但它没有加载任何东西。如果我尝试加载静态元素，它会起作用。我尝试从包含选项卡的主文件加载并尝试加载的文件。它不起作用

我希望我的问题很清楚，任何帮助我都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:41:49.240

[根据 API](http://api.jquery.com/jQuery.ajax/)，您可以使用 HTML 传回脚本标签，然后 jQuery 将执行脚本（请参阅 dataType 部分。）但是，在实践中，我发现这并不是一直有效。我发现 jQuery 对在 ajax 调用的 HTML 中嵌入 JavaScript 很挑剔。你真的必须做一个或另一个，或者使用 eval 语句自己处理 javascript。

注意：当 jQuery 做对了，我相信它仍然在使用 eval() 调用，这不是有效的。

正确的方法是将您的 javascript 保存在您的 javascript 文件中。在您的第一个 jQuery .load 语句中，使用 onComplete 调用 .load...

```
$('#mydiv').load('/some/file', {
  onComplete: function() {
    $('#someOtherDiv').load()
  }
}); 
```

# backbone.js - Backbone.js 需要帮助将视图事件与其他视图连接起来

> ID：12826962
> 
> 赞同：0
> 
> 时间：2012-10-10T19:33:25.680
> 
> 标签：backbone.js

我正在构建一个实现“分面”或“过滤”接口的简单应用程序——没有数据写入。我希望用户选择左侧的构面（复选框）以减少右侧的结果集。

我有 2 个单独的集合（方面和激励）。这些是从一个包含由 2 个项目组成的数组的单个 json 对象填充的。每 2 个项目有助于为页面的这两个部分创建模型、视图和集合。

我需要在方面视图中获取事件以更新激励收集的结果。将这两者连接在一起的最佳方法是什么。我的测试应用可以在这里找到。我正在使用 Handlebars 进行模板化。

在这里看到它：[演示站点](http://www.rsturim.com/test/)

主要内容区域是由这样的“汽车激励”组成的。

```
//define Incentive model
var Incentive = Backbone.Model.extend({
    defaults: {
        photo: "car.png"
    }
});

//define individual incentive view
var IncentiveView = Backbone.View.extend({
    tagName: "article",
    className: "incentive-container",
    template: Handlebars.compile($("#incentive-template").html()),

    initialize: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }

});

//define Incentives collection
var Incentives = Backbone.Collection.extend({
    model: Incentive,
    url: 'data/incentives3.json',
    parse: function(response) {
        return response.incentiveHolder;
    }
});

var IncentivesView = Backbone.View.extend({
    el: $(".incentives-container"),

    initialize: function() {
        this.collection = new Incentives();

        // When the contents of the collection are set, render the view.
        this.collection.on('reset', function() {
            incentives = this.collection.models;
            this.render();
        }, this);

        this.collection.fetch();
        this.collection.on("reset", this.render, this);
    },

    render: function() {
        this.$el.find("article")
            .remove();

        _.each(this.collection.models, function(item) {
            this.renderIncentive(item);
        }, this);
    },

    renderIncentive: function(item) {
        var incentiveView = new IncentiveView({
            model: item
        });
        this.$el.append(incentiveView.render()
            .el);
    }

}); 
```

刻面模型/集合详述如下。你可以在 FacetView 中看到——当用户选择一个复选框时，我已经注册了一个“更改”事件。我需要一些如何使用这些数据来 1) 隐藏不包含此方面值的每个激励或 2) 从 FacetCollection (??) 中删除模型。我希望用户能够快速打开/关闭这些复选框 - 删除/添加速度较慢（或效率较低）然后使用 css 隐藏/显示？

此外，您可以从我的 displayIncentives() 函数中看到“this”——是视图的一个实例——但我如何访问刚刚单击的复选框的“值”？

如果我能得到这个值——那么我可以检查激励集合，遍历每个项目——并询问它的“激励”数组“包含”刚刚单击的复选框的这个值。如果返回 false，我将隐藏（或删除？）该项目并继续。

```
// ======================================
// FACETS
// ======================================

//define Facet model
var Facet = Backbone.Model.extend({});

//define individual facet view
var FacetView = Backbone.View.extend({
    tagName: "div",
    className: "facet-group",
    template: Handlebars.compile($("#facets-template").html()),

    initialize: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    },

    events: {
        "change input[type=checkbox]": "displayIncentives"
    },

    displayIncentives: function() {
        console.log(this);
    }

});

//define Facets collection
var Facets = Backbone.Collection.extend({
    model: Facet,
    url: 'data/incentives3.json',
    parse: function(response) {
        return response.facetsHolder;
    }
});

var FacetsView = Backbone.View.extend({
    el: $(".facets-container"),

    initialize: function() {
        this.collection = new Facets();

        // When the contents of the collection are set, render the view.
        this.collection.on('reset', function() {
            this.render();
        }, this);

        this.collection.fetch();
    },

    render: function() {
        _.each(this.collection.models, function(item) {
            this.renderFacet(item);
        }, this);
    },

    renderFacet: function(item) {
        var facetView = new FacetView({
            model: item
        });
        this.$el.append(facetView.render().el);
    }

}); 
```

最后——我的 json 对象位于此处……我现在可以自由地帮助设计该对象在该项目的下一阶段的结构。任何建议都非常感谢。

[json对象](http://www.rsturim.com/test/data/incentives3.json)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:04:50.530

这是什么问题！其实很多问题合二为一！

我可以告诉你我用来执行完全相同任务的逻辑，并且它确实有效（见[这里](http://epos-couch.cloudant.com/epos-couch/_design/epos-couch/index.html)）

您基本上必须有 2 个集合：一个方面的集合和一个项目的集合。

**刻面的集合** 一开始它是空的（没有选择刻面）。当您选中一个时，您将其添加到构面集合中。添加构面时，您可以以某种方式过滤项目集合（您可以触发项目集合侦听的事件，或者 - 更好的是 - 只需调用一个方法，例如 您在项目集合对象`itemCollection.facet_filter()`中 `facet_filter()`定义的方法）。

好的。

**项目** 集合 这是一个普通的集合。您只需添加一个`facet_filter()`过滤列表并触发重置事件的方法。此重置事件由`FacetsView`重新呈现列表进行侦听。

该`facet_filter()`方法应该是这样的。

```
filter_results: function(facets){
    var filteredColletion= new Backbone.Collection(this.models);
    _.each(facets,function(facet){
        filteredColletion.where({facet.key: facet.value});
            });
    this.reset(returnList);
        }
} 
```

这是我使用的逻辑并且它有效。

# math - 以编程方式识别数字列表中的“序列”

> ID：12826966
> 
> 赞同：1
> 
> 时间：2012-10-10T19:33:45.820
> 
> 标签：math, coldfusion, sequences

我需要确定*数字*列表是否按真实顺序排列。特别是5的序列。

**示例 1：**

*   （原创系列） `1,3,4,67,43,20`
*   （订购系列） `1,3,4,20,43,67`
*   是5的序列吗？ `FALSE`

**示例 2**

*   （原创系列） `147,10,143,432,144,23,145,146`
*   （订购系列） `10,23,143,144,145,146,147,432`
*   是5的序列吗？ `TRUE` （即 143-147）

目前 - 我遍历有序列表，并检查当前数字是否等于最后一个数字 +1，并保留一个计数器。这行得通，但我很好奇是否有更好的方法来数学或编程。

```
<cfscript>
_list1 = [1,3,4,67,43,20]; // should evaluate to FALSE
_list2 = [147,10,143,432,144,23,145,146]; // should evaluate to TRUE

_list = _list2; // switch list in one place - test purposes only.
_seq = 1; // sequence counter
_cap = ''; // value of the upper most number of the sequence
_msg = 'There is not a consecutive sequence of 5.'; // message to user

// sort the array smallest to largest 
arraySort( _list, 'numeric' ); 

// loop the array - compare the last number with the current number 
for ( i=2; i LTE arrayLen( _list ); i++ ) {
    _last = _list[i-1]; // the LAST number - we started at the second element, so we shouldn't error.
    _this = _list[i]; // this current number
    // compare the two numbers
    if ( val( _this ) EQ val( _last ) + 1 ) {
        _seq = _seq + 1; // increment our sequence
        _cap = _this; // set the top number
    }
}

// re-set the message if we meet some threshold (5) is hardcoded here 
if ( val( _seq ) GTE 5 ) {
    _msg = 'Sequence of ' & _seq & ' to ' & _cap;
}

// write the message 
writeoutput( _msg );    
</cfscript> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:20:59.223

为了提高性能，我会说将您的循环包装在一个 IF 语句中，该语句首先检查至少有 5 个元素；没有必要循环超过 4 个元素。

然后我会说，如果'seq' = 5，请在循环内进行检查，并立即跳出循环（除非您实际上需要找出大于5的序列长度）。

您可能会考虑尝试的另一件事。在循环之前，您可以比较列表的第一个元素和列表的最后一个元素。如果它们之间的差异小于 5，则根本没有必要进行循环。尽管从您的数据看来，这可能不太可能发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:48:28.537

听起来您想了解更多关于算法时间复杂度的信息（[https://en.wikipedia.org/wiki/Time_complexity](https://en.wikipedia.org/wiki/Time_complexity)）。

您当前的算法首先进行排序，然后迭代所有元素。要确定你的算法的时间复杂度，我们首先要知道 Coldfusion 的排序算法的时间复杂度是多少。由于 Coldfusion 委托给 Java，并且[Java 数组](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)使用 QuickSort 算法，我们知道算法的排序部分需要`n*log(n)`时间。算法的第二部分迭代数组需要`n`时间。将这两个时间复杂度加在一起，我们得到`n+(n*log(n))`.

在分析算法的时间复杂度时，我们只关心最慢的部分：`n*log(n)`. 因此，大 O 时间复杂度为`O(n*log(n))`.

这是什么意思？解决方案的排序部分是最糟糕的部分。如果您可以在不排序的情况下解决问题，那么您将提高应用程序的速度——假设您的新解决方案不会做任何比排序花费更多时间的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:41:49.863

我会从序列中创建一个数组，然后比较这个数组。这是一个很好的例子：[链接](http://milanchandnacf.blogspot.com/2012/02/equate-arrays-structs-query-or-possible.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-03T19:14:03.477

我把这个答案放在这里是因为我需要一个函数来输出一系列数字，其中任何超过 2 的内部序列按顺序作为连字符（即`1,3,4,5,7`as `1,3-5,7`）并且在其他任何地方都没有快速找到它。您的代码看起来不比我的长，所以我的代码可能对您没有帮助，尽管它可以回答您的问题，因为 active`cfreturn`给出了最长的序列（您可以将其与您的 5 楼进行比较。（我的注释`cfreturn`给出了我需要的缩写内部序列）：

```
<cffunction name="fNumSeries" output="1" hint="pass in sorted array, get count of longest sequence">
<cfargument name="raNums" required="1" type="array">
<cfset numHold=raNums[1]>
<cfset isSeq="">
<cfset hasSeq=0>
<cfsavecontent variable="numSeries">
<cfloop from="1" to="#arraylen(raNums)#" index="idxItem">
    <cfif idxItem eq 1>#raNums[1]#<!--- always output the first --->
    <cfelse>
        <!--- if in a sequence and not the last array element, no output --->
        <cfif numHold+1 eq raNums[idxItem] and idxItem neq arraylen(raNums)>
            <!--- capture the first value of the sequence --->
            <cfif len(isSeq) eq 0><cfset isSeq=numHold></cfif>
        <cfelseif len(isSeq)><!--- was in sequence but no longer --->
            <!--- if more than 2 in a row, show as sequence (n-n) --->
            <cfif idxItem eq arraylen(raNums) and raNums[idxItem] gt isSeq+1>
                - #raNums[idxItem]#
                <cfif hasSeq lt numHold - isSeq+1><cfset hasSeq=numHold - isSeq+1></cfif>
            <cfelseif raNums[idxItem] gt isSeq+3>
                - #numHold#, #raNums[idxItem]#
                <cfif hasSeq lt numHold - isSeq+1><cfset hasSeq=numHold - isSeq+1></cfif>
            <!--- otherwise show the 2nd (held) sequential value and current array value --->
            <cfelse>, #isSeq+1#, #raNums[idxItem]#
            </cfif>
            <cfset isSeq="">
        <cfelse>, #raNums[idxItem]#<!--- not in sequence --->
        </cfif>
    </cfif>
    <cfset numHold=raNums[idxItem]>
</cfloop>
</cfsavecontent>
<!--- <cfreturn replace(numSeries, " ,", ",", "all")> --->
<cfreturn hasSeq>
</cffunction> 
```

# java - Glassfish 中的错误“加载应用程序时出现异常”

> ID：12826971
> 
> 赞同：1
> 
> 时间：2012-10-10T19:33:59.507
> 
> 标签：java, jsf, glassfish

在你因为低级别信息而活活烧死我之前，让我解释一下为什么......我真的不明白这个错误来自哪里......所以我不知道我可能会搞砸
这基本上是一个错误有时会出现这种情况，我能解决的唯一方法是重新安装 Netbeans 和 Glassfish，并祈祷不要回来。

我随机更改了一些课程，然后砰！出现此错误。到目前为止，我什至无法删除我编写的所有代码。

Glassfish 给了我这个错误（日志中有更多内容，但我想它不值得放在这里）：
`Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file com/enterprise/dao/SomeClassDao`

有趣的是......我没有改变这个类，它与我正在研究的那个没有任何关系！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:29:45.687

如果您厌倦了重新安装 Netbeans，请先尝试清除 Netbeans 的缓存。

# c++ - 从 Eclipse 中的现有 Makefile 推断包含路径和生成目标

> ID：12826972
> 
> 赞同：6
> 
> 时间：2012-10-10T19:34:01.467
> 
> 标签：c++, eclipse, gcc, makefile, eclipse-cdt

我正在尝试在 Linux 中使用 C++ 和递归 Makefile 文件的现有文件夹集合上使用 Eclipse。`make`文件使用and `gcc`，`ar`用户`gcc`在 Makefile 中指定他想要使用的路径。我将使用的 make 文件是**手动输入的**。

在 Eclipse 中，有一个选项可以创建一个看起来适合我需要的新项目：`"Create a new Makefile project from existing code in that same directory"`.

```
* <none>
* cross GCC
* GNU Autotools Toolchain
* Linux GCC 
```

这里我有两个问题：

*   我应该选择哪个工具链？Eclipse 如何使用这些信息？
*   我希望 Eclipse 从顶级 Makefile 中尽可能多地推断（例如**包含**路径、生成**目标**等）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:07:52.030

您的问题与我为项目设置的问题非常相似。

1.  如果应用程序预期运行的目标平台是你正在编译的机器，你应该选择 Linux GCC。
2.  如果应用程序运行的目标平台是 ARM 处理器，您需要指定 cross GCC。
3.  GNU Autotools 工具链旨在在不同的 linux 系统上构建源代码包。

通过选择“从同一目录中的现有代码创建一个新的 Makefile 项目”，eclipse 将假定用户的 makefile 将管理构建本身。要让 Eclipse 推断包含路径，请在项目设置中启用发现选项。诚然，您的顶级 make 需要指定包含路径、源代码路径等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:03:59.603

您实际上只能允许 Eclipse 根据您在项目中的内容为您创建生成文件，或者在您选择“构建”时告诉它运行哪个命令。混合我发现的这些选项并没有真正起作用。如果您指定 Makefile，那么使用的编译器也并不重要，因为 Makefile 将定义它。只需在创建新项目时选择一个“空 c++ 项目”，确保指定不使用“默认工作区”位置并将此输入框指向您的代码库。在项目 c++/build 设置中，确保未选中“自动生成 makefile”，并指定应执行什么命令来生成项目。（通常这是“make all”，但对你来说可能会有所不同）

# javascript - 多个参数与选项对象

> ID：12826977
> 
> 赞同：187
> 
> 时间：2012-10-10T19:34:25.093
> 
> 标签：javascript, json, function, object, arguments

在创建具有多个参数的 JavaScript 函数时，我总是面临这样的选择：传递参数列表与传递选项对象。

例如，我正在编写一个将 nodeList 映射到数组的函数：

```
function map(nodeList, callback, thisObject, fromIndex, toIndex){
    ...
} 
```

我可以改用这个：

```
function map(options){
    ...
} 
```

其中 options 是一个对象：

```
options={
    nodeList:...,
    callback:...,
    thisObject:...,
    fromIndex:...,
    toIndex:...
} 
```

推荐的方法是哪一种？是否有关于何时使用一种与另一种的指导方针？

[更新] 似乎有一个支持选项对象的共识，所以我想添加一条评论：在我的案例中，我很想使用参数列表的一个原因是具有与 JavaScript 一致的行为内置 array.map 方法。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-10-10T19:47:36.107

像许多其他人一样，我通常更喜欢将 an 传递`options object`给函数而不是传递一长串参数，但这实际上取决于确切的上下文。

我使用代码可读性作为试金石。

例如，如果我有这个函数调用：

```
checkStringLength(inputStr, 10); 
```

我认为该代码的可读性很强，并且传递单个参数就可以了。

另一方面，有些函数的调用如下：

```
initiateTransferProtocol("http", false, 150, 90, null, true, 18); 
```

除非您进行一些研究，否则完全不可读。另一方面，这段代码读起来很好：

```
initiateTransferProtocol({
  "protocol": "http",
  "sync":      false,
  "delayBetweenRetries": 150,
  "randomVarianceBetweenRetries": 90,
  "retryCallback": null,
  "log": true,
  "maxRetries": 18
 }); 
```

它更像是一门艺术而不是一门科学，但如果我不得不说出经验法则：

在以下情况下使用选项参数：

*   您有四个以上的参数
*   任何参数都是可选的
*   你曾经不得不查找函数来弄清楚它需要什么参数
*   如果有人在尖叫“ARRRRRG！”时试图勒死你。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-10T19:56:42.477

多个参数主要用于强制参数。他们没有任何问题。

如果您有可选参数，它会变得复杂。如果其中一个依赖于其他，因此它们具有一定的顺序（例如第四个需要第三个），您仍然应该使用多个参数。几乎所有原生的 EcmaScript 和 DOM 方法都是这样工作的。一个很好的例子是[`open`XMLHTTPrequests 的方法](http://www.w3.org/TR/XMLHttpRequest/#the-open-method)，其中最后 3 个参数是可选的 - 规则就像“没有用户就没有密码”（另见[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#open%28%29)）。

选项对象在两种情况下派上用场：

*   你有太多的参数以至于让人困惑：“命名”会帮助你，你不必担心它们的顺序（特别是如果它们可能会改变）
*   你有可选参数。这些对象非常灵活，无需任何排序，您只需传递您需要的东西，而不是其他（或`undefined`s）。

在你的情况下，我建议`map(nodeList, callback, options)`. `nodelist`并且`callback`是必需的，其他三个参数只是偶尔出现并且具有合理的默认值。

另一个例子是[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。您可能希望在`space`不传递`replacer`函数的情况下使用参数 - 然后您必须调用`…, null, 4)`. 一个 arguments 对象可能会更好，尽管它只对 2 个参数并不合理。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-10T19:37:05.233

使用“选项作为对象”方法将是最好的。您不必担心属性的顺序，并且可以更灵活地传递哪些数据（例如可选参数）

创建一个对象还意味着这些选项可以很容易地用于多个功能：

```
options={
    nodeList:...,
    callback:...,
    thisObject:...,
    fromIndex:...,
    toIndex:...
}

function1(options){
    alert(options.nodeList);
}

function2(options){
    alert(options.fromIndex);
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-10-10T19:55:23.687

两者都使用可能会很好。如果您的函数有一个或两个必需参数和一堆可选参数，则将前两个参数设为必需参数，将第三个参数设为可选选项哈希。

在你的例子中，我会做`map(nodeList, callback, options)`. 节点列表和回调是必需的，通过读取对它的调用很容易知道发生了什么，它就像现有的地图函数一样。任何其他选项都可以作为可选的第三个参数传递。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-11T02:47:16.590

您对问题的评论：

> 在我的示例中，最后三个是可选的。

那么为什么不这样做呢？ *（注意：这是相当原始的 Javascript。通常我会使用`default`散列并使用[Object.extend](http://api.prototypejs.org/language/Object/extend/)或[JQuery.extend](http://api.jquery.com/jQuery.extend/)或类似方法传入的选项对其进行更新。）*

```
function map(nodeList, callback, options) {
   options = options || {};
   var thisObject = options.thisObject || {};
   var fromIndex = options.fromIndex || 0;
   var toIndex = options.toIndex || 0;
} 
```

所以，既然现在更明显什么是可选的，什么不是，所有这些都是该函数的有效用法：

```
map(nodeList, callback);
map(nodeList, callback, {});
map(nodeList, callback, null);
map(nodeList, callback, {
   thisObject: {some: 'object'},
});
map(nodeList, callback, {
   toIndex: 100,
});
map(nodeList, callback, {
   thisObject: {some: 'object'},
   fromIndex: 0,
   toIndex: 100,
}); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-04-20T00:29:44.083

我的回复可能有点晚了，但我正在寻找其他开发人员对这个主题的意见，并遇到了这个线程。

我非常不同意大多数响应者的观点，并支持“多重论点”的方法。我的主要论点是它不鼓励其他反模式，例如“变异并返回参数对象”或“将相同的参数对象传递给其他函数”。我曾在广泛滥用这种反模式的代码库中工作，并且很快就无法调试执行此操作的代码。我认为这是一个非常特定于 Javascript 的经验法则，因为 Javascript 不是强类型的，并且允许这种任意结构化的对象。

我个人的看法是，开发人员在调用函数时应该明确，避免传递冗余数据，避免通过引用修改。并不是这种模式排除了编写简洁、正确的代码。我只是觉得它使您的项目更容易陷入不良的开发实践。

考虑以下可怕的代码：

```
function main() {
    const x = foo({
        param1: "something",
        param2: "something else",
        param3: "more variables"
    });

    return x;
}

function foo(params) {
    params.param1 = "Something new";
    bar(params);
    return params;
}

function bar(params) {
    params.param2 = "Something else entirely";
    const y = baz(params);
    return params.param2;
}

function baz(params) {
    params.params3 = "Changed my mind";
    return params;
} 
```

Not only does this kind of require more explicit documentation to specify intent, but it also leaves room for vague errors. What if a developer modifies `param1` in `bar()`? How long do you think it would take looking through a codebase of sufficident size to catch this? Admittedly, this is example is slightly disingenuous because it assumes developers have already committed several anti-patterns by this point. But it shows how passing objects containing parameters allows greater room for error and ambiguity, requiring a greater degree of conscientiousness and observance of const correctness.

Just my two-cents on the issue!

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-04-15T19:31:55.667

这取决于。

根据我对那些流行的库设计的观察，以下是我们应该使用选项对象的场景：

*   参数列表很长 (>4)。
*   部分或全部参数是可选的，它们不依赖于特定顺序。
*   参数列表可能会在未来的 API 更新中增加。
*   API 会被其他代码调用，API 名称不够清楚，无法说明参数的含义。因此，它可能需要强参数名称以提高可读性。

以及使用参数列表的场景：

*   参数列表很短（<= 4）。
*   大部分或所有参数都是必需的。
*   可选参数按一定顺序排列。（即： $.get ）
*   通过 API 名称很容易分辨参数的含义。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-10T19:37:10.073

Object 更可取，因为如果您传递一个对象，则可以轻松扩展该对象中的属性数量，并且您不必注意传递参数的顺序。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-10T19:56:10.900

对于通常使用一些预定义参数的函数，您最好使用选项对象。相反的例子就像一个函数，它得到无限数量的参数，比如：setCSS({height:100},{width:200},{background:"#000"})。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-10T19:36:53.143

我会看大型 javascript 项目。

像谷歌地图这样的东西，你会经常看到实例化的对象需要一个对象，但函数需要参数。我认为这与 OPTION 参数有关。

如果您需要默认参数或可选参数，则对象可能会更好，因为它更灵活。但是，如果您不使用正常的功能参数，则更加明确。

Javascript 也有一个`arguments`对象。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

# java - jLayer -- 播放 mp3 会导致文件开头失真

> ID：12826981
> 
> 赞同：2
> 
> 时间：2012-10-10T19:34:39.943
> 
> 标签：java, mp3, jlayer

我正在使用 jLayer 1.0 播放一个简单的 mp3 文件。除了前 3 秒左右外，它工作正常（在曲目开头添加 5 秒的静音可以解决问题）。这是我正在使用的代码：

```
try 
{

    final Player player = new Player(getClass().getResourceAsStream("1.mp3"));
    new Thread() 
    {
        public void run() 
        {
            try 
            { 
                player.play(); 
            }
            catch (Exception e) { System.out.println(e); }
         }
     }.start();
}
catch (Exception e) 
{
    System.out.println("Something went wrong!");
    System.out.println(e);
} 
```

我可能在做一些愚蠢的事情（我很确定我不需要将线程放在 try 块中），但它确实与失真分开。

失真的音频样本：[http](http://www.filedropper.com/broken) ://www.filedropper.com/broken 原音轨：[http ://www.filedropper.com/dennyschneidemessermodernwarstory](http://www.filedropper.com/dennyschneidemessermodernwarstory)

音乐：denny schneidemesser (by-nc-nd)

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:32:19.980

更新到 v1.0.1 后问题完全修复。

此页面上托管的版本：http: [//introcs.cs.princeton.edu/java/faq/mp3/mp3.html](http://introcs.cs.princeton.edu/java/faq/mp3/mp3.html)

已过时。

# python - 使用 BeautifulSoup 解析 HTML 一个复杂的表格

> ID：12826983
> 
> 赞同：1
> 
> 时间：2012-10-10T19:34:42.110
> 
> 标签：python, csv, web-scraping, beautifulsoup, html-table

我正在尝试从他们的[http://www.srh.noaa.gov/data/obhistory/PAFA.html](http://www.srh.noaa.gov/data/obhistory/PAFA.html)中的 NOAA 数据创建一个 csv 文件。

我尝试使用 table 标签，但失败了。所以我试图通过识别`<tr>`每一行来做到这一点。所以这是我的代码：

```
#This script should take table context from URL and save new data into a CSV file.
noaa = urllib2.urlopen("http://www.srh.noaa.gov/data/obhistory/PAFA.html").read()
soup = BeautifulSoup(noaa)

#Iterate from lines 7 to 78 and extract the text in each line. I probably would like     
#space delimited between each text
#for i in range(7, 78, 1):
 rows = soup.findAll('tr')[i]
 for tr in rows:
    for n in range(0, 15, 1):
       cols = rows.findAll('td')[n]
       for td in cols[n]:
       print td.find(text=true)....(match.group(0), match.group(2), match.group(3), ... 
       match.group(15) 
```

目前有些东西按预期工作，有些则没有，最后一部分我不知道如何按我想要的方式缝合。

好的，所以我接受了“That1guy”的建议，并尝试将其扩展到 CSV 组件。所以：

```
import urllib2 as urllib
from bs4 import BeautifulSoup
from time import localtime, strftime
import csv
url = 'http://www.srh.noaa.gov/data/obhistory/PAFA.html'
file_pointer = urllib.urlopen(url)
soup = BeautifulSoup(file_pointer)

table = soup('table')[3]
table_rows = table.findAll('tr')
row_count = 0
for table_row in table_rows:
 row_count += 1
 if row_count < 4:
    continue

  date = table_row('td')[0].contents[0]
  time = table_row('td')[1].contents[0]
  wind = table_row('td')[2].contents[0]

  print date, time, wind
  with open("/home/eyalak/Documents/weather/weather.csv", "wb") as f:
   writer = csv.writer(f)
   print date, time, wind
   writer.writerow( ('Title 1', 'Title 2', 'Title 3') )
   writer.writerow(str(time)+str(wind)+str(date)+'\n')
 if row_count == 74:
    print "74"
    break 
```

打印结果很好，不是文件。我得到：

```
Title   1,Title 2,Title 3
0,5,:,5,3,C,a,l,m,0,8," 
```

创建的 CSV 文件中的问题是：

1.  标题被分成错误的列；第 2 列有“1,Title”与“title 2”
2.  数据在错误的地方用逗号划定
3.  当脚本写入新行时，它会覆盖前一行，而不是从底部追加。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T20:18:48.037

这对我有用：

```
url = 'http://www.srh.noaa.gov/data/obhistory/PAFA.html'
file_pointer = urllib.urlopen(url)
soup = BeautifulSoup(file_pointer)

table = soup('table')[3]
table_rows = table.findAll('tr')
row_count = 0
for table_row in table_rows:
    row_count += 1
    if row_count < 4:
        continue

    date = table_row('td')[0].contents[0]
    time = table_row('td')[1].contents[0]
    wind = table_row('td')[2].contents[0]

    print date, time, wind

    if row_count == 74:
        break 
```

这段代码显然只返回每行的前 3 个单元格，但你明白了。另外，请注意一些空单元格。在这些情况下，为了确保它们被填充（或者可能收到一个`IndexError`），我会在抓取之前检查每一行的长度`.contents`。IE：

```
if len(table_row('td')[offset]) > 0:
    variable = table_row('td')[offset].contents[0] 
```

这将确保单元格被填充，您将避免`IndexErrors`

# android - Amazon SimpeDB - 应用程序 - 数据保护

> ID：12826984
> 
> 赞同：3
> 
> 时间：2012-10-10T19:34:45.343
> 
> 标签：android, amazon-simpledb, data-protection

我一直在使用 AWS（亚马逊网络服务），尤其是 simpleDB，用于一些使用 iOS/android 客户端库的智能手机应用程序。

到目前为止，数据非常良性，所以我并没有太担心数据保护。

我的下一个应用项目将需要一个包含用户名和密码的“用户”表/域。

我担心的是有人对应用程序的 Android java 版本进行了逆向工程，然后很容易得到所有的 simpleDB 数据，包括所有的密码。

基本的 TVM 东西（令牌自动售货机，其中一个临时令牌替换了不在代码中的 AWS 凭证）似乎并不能防止这种情况，所以很高兴听到人们认为推荐的方法来做使用 AWS 登录应用程序的一部分，而不会完全不安全。

将密码表存储在其他地方/以不同的方式访问？

任何评论表示赞赏，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T06:40:26.560

我可以向您建议两种方法来保护您的应用程序 -

第一种方法：

您可以将 AWS 密钥保存在应用程序中的文件中，该文件将使用私有密钥进行加密。在启动时，您的代码将使用公钥读取该文件，并且只能获取您的 AWS 密钥。请记住此方法中的以下几点 -

1.  您的代码必须经过混淆处理。
2.  您的密钥必须以加密形式保存到文件中，这样您才能获得双重保护。
3.  您的文件必须经过数字签名。

第二种方法：

您还可以创建自己的网站来管理您的用户身份验证，如果用户成功通过身份验证，它将在用私钥加密后发送 AWS 密钥，在他对应用程序的响应中，您的应用程序将在解密后使用该 AWS 密钥它与公钥。请记住此方法中的以下几点 - 1\. 您的回复必须以加密形式返回。2\. 您的站点必须是安全的，并且必须在 HTTPS 上运行。3\. 您的代码必须经过混淆处理。

# javascript - Sencha Architect 中的表格布局（Ext.js 项目）

> ID：12826988
> 
> 赞同：1
> 
> 时间：2012-10-10T19:35:02.733
> 
> 标签：javascript, extjs, sencha-architect

由于新的项目需求，我开始熟悉 Sencha Architect，除了使用 Table Layouts 之外，一切似乎都很好。Sencha Architect 的文档很差，Ext.js 的 Table Layout 的文档似乎没有回答我的问题。

请使用此链接作为参考： http: [//fossilstudio.com/offsite/sampleLayout1/app.html](http://fossilstudio.com/offsite/sampleLayout1/app.html)

“表格”面板只是一个布局为 Table 且列为 2 的面板。它包含 4 个面板。我想要实现的是通过强制表格为 100% 的高度和宽度来让这 4 个面板占据相同数量的水平和垂直空间。这并不像我希望的那样直观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:08:37.520

如果你真的想要一张桌子，你应该只使用表格布局。

使用盒子布局：

```
Ext.onReady(function() {
    Ext.create('Ext.panel.Panel', {
        renderTo: Ext.getBody(),
        width: 400,
        height: 400,
        layout: {
            type: 'vbox',
            align: 'stretch'
        },
        items: [{
            flex: 1,
            xtype: 'container',
            layout: {
                type: 'hbox',
                align: 'stretch'
            },
            items: [{
                flex: 1,
                title: 'P1'
            }, {
                flex: 1,
                title: 'P2'
            }]
        }, {
            flex: 1,
            xtype: 'container',
            layout: {
                type: 'hbox',
                align: 'stretch'
            },
            items: [{
                flex: 1,
                title: 'P3'
            }, {
                flex: 1,
                title: 'P4'
            }]
        }]
    });
}); 
```

# .net - WinForms 应用在 16 位显示器上使用低质量的标题栏图标

> ID：12826990
> 
> 赞同：12
> 
> 时间：2012-10-10T19:35:04.827
> 
> 标签：.net, winforms, icons, color-depth

在具有 16 位颜色深度的显示器（包括设置为 16 位颜色的远程桌面会话）上，Windows 窗体应用程序使用分配的标题栏图标 ( `Form.Icon`) 的低颜色深度版本。但是，WPF 应用程序和 Windows 资源管理器使用 24 位颜色深度（如果存在）。

我首先在我目前正在处理的 Windows 窗体应用程序中看到了这一点。我使用的图标定义了 4 位、24 位和 32 位变体。在 16 位显示器上，Windows 窗体在标题栏中使用丑陋的 4 位版本，而不是好看的 24 位或 32 位版本。

为了测试和说明行为，我为每种尺寸和颜色格式创建了一个具有明显不同设计的测试图标。我包括了 4 位、8 位、24 位和 32 位变体。

以下是 32 位和 16 位显示器上的结果：

## 在 32 位显示器上，一切正常：

**Windows资源管理器：**

![Windows 资源管理器，32 位显示](../Images/afb6127c8c67a9e2888aa6db6f18f06d.png)

**WPF 应用程序：**

![WPF 应用程序，32 位显示](../Images/34448032f3885f049dbf268452938627.png)

**Windows 窗体应用程序：**

![Windows 窗体应用程序，32 位显示](../Images/749c0bd9cbd3b2dd1e2ce3793cbd0db3.png)

## 在 16 位显示器上，Windows 窗体显示的图标变体比 WPF 或 Windows 资源管理器的颜色深度更低：

**Windows资源管理器：**

![Windows 资源管理器，16 位显示器](../Images/85a469b6db5acf83f862329d272d7df3.png)

**WPF 应用程序：**

![WPF 应用程序，16 位显示](../Images/2ba008615c69b1e15fc3236939131071.png)

**Windows 窗体应用程序：**

![Windows 窗体应用程序，16 位显示](../Images/36b59708e111a6490a07b7789a86f58f.png)

在 16 位显示器上，Windows 资源管理器和 WPF 使用 24 位格式，但 Windows 窗体不使用。在这种情况下，它使用 8 位格式。我真正的应用程序图标没有 8 位变体（但我现在要做一个！），所以 Windows 窗体使用 4 位变体。

**如何让我的 Windows 窗体应用程序在 16 位显示器的标题栏中显示 24 位版本的图标？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:43:59.517

不幸的是，您无法在 16 位系统上显示 24 位图像。但是，您可以想出一个技巧，使您的应用程序适应它所运行的系统。

因此，您可以尝试伪造图片的“位”字段（尝试使用一些照片编辑软件），使其认为它是 16 位，而实际上是 24 位。这是可能的，我几年前就设法做到了，但我不能记住如何（对不起）。

我想这是您应该尝试解决问题的方式。

祝你好运！

# shell - 杀死 -s SIGINT ps SHELL

> ID：12826991
> 
> 赞同：-1
> 
> 时间：2012-10-10T19:35:08.813
> 
> 标签：shell

我在命令行上使用此命令 kill -s SIGINT ps 并且它可以工作（该过程已被消除），但是当我在 SHELL 脚本上使用该命令时它不起作用并且它显示此错误消息 kill: SIGNIT: invalid信号规范。我该如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-23T09:32:13.800

我想回答这个问题，因为我最近解决了类似的问题。当您调用 时`kill -s SIGINT`，您可以使用`sh`来运行脚本。不幸`sh`的是，与`bash`( [linux shell kill signal SIGKILL && KILL](https://stackoverflow.com/questions/16423732/linux-shell-kill-signal-sigkill-kill) ) 不同的是，它将在[兼容模式下](http://www.redhat.com/archives/nahant-list/2006-October/msg00138.html)运行并且无法识别 SIGINT。

最好的解决方案是`/bin/bash`显式使用。顺便说一句，当你编写脚本`#!/bin/bash`时也不起作用。`sh`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T19:40:47.103

存在错误消息以在出现问题时为开发人员和用户提供线索。我怀疑你打错`SIGINT`了 as `SIGNIT`。您收到的错误消息与您声明中的拼写错误一致。

我觉得这表明研究工作很差，因为如果你在寻求帮助之前阅读了错误信息，你就会明白的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T19:40:40.887

执行脚本的 shell 可能正在使用内置的“kill”命令，而您的命令行 shell 正在使用外部二进制文件，反之亦然。明确使用`/bin/kill`，看看是否有助于更加一致。 `kill -SIGINT`我相信，这是更常见的方式（而不是“-s SIGINT”）。

此外，`kill`通常采用进程 ID 而不是进程名称。内置与外部“kill”命令也可能以不同的方式支持（或不支持）这一点。

# mysql - 在 MySQL 中将数据从一张表插入到多张表中

> ID：12826997
> 
> 赞同：0
> 
> 时间：2012-10-10T19:35:35.840
> 
> 标签：mysql, sql

我正在寻找一个示例查询，它允许我将数据从一个表插入到多个（2）个表中。我阅读了这篇[文章](https://stackoverflow.com/questions/2240960/insert-data-from-one-table-into-multiple-tables)，但它仅适用于 Microsoft SQL Server，并且不确定这是否是您在 MySQL 中的操作方式。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:56:25.817

您将需要使用多个查询/命令才能插入多个表。

```
$sql1 = mysql_query("SELECT * FROM tbl1");
$result = mysql_fetch_assoc($sql1);

$item1 = $result['item1'];
$item2 = $result['item2'];

$save_to_tbl2 = ("INSERT INTO tbl2(item1,item2)VALUES('".$item1."','"item2."')";
$save = mysql_query(save_to_tbl2);

$save_to_tbl3 = ("INSERT INTO tbl3(item1,item2)VALUES('".$item1."','"item2."')";
$save = mysql_query(save_to_tbl3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:38:51.867

AFAIK mysql 没有提供一种在一个命令中将数据插入多个表的方法。

您必须使用多个命令，但您可以在使用它们之前锁定表以确保数据完整性。

# opencart - 如何要求登录opencart？（私人购物）

> ID：12826999
> 
> 赞同：-1
> 
> 时间：2012-10-10T19:35:43.750
> 
> 标签：opencart

我想用 Open cart 进行私人购物。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:20:06.770

OpenCart 没有使您能够将商店设置为在访问商店之前需要用户名和密码的功能。

您可以将其配置为要求在退房前登录，也可以在显示价格前登录。从管理界面...

```
Login Display Prices: 
Only show prices when a customer is logged in.
yes/no

Guest Checkout:
Allow customers to checkout without creating an account. This will not be available when a downloadable product is in the shopping cart.
yes/no 
```

但是，尽管 OpenCart 不提供您正在寻找的功能，但使用 OpenCart 扩展添加它会很容易。您可以编写一个，或者看起来 OpenCart 扩展目录中已经有一个，请参阅[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6230](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6230)