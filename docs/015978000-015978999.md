# StackOverflow 问答 15978000-15978999

# php - CakePhp 2.x HABTM SaveAll

> ID：15978000
> 
> 赞同：0
> 
> 时间：2013-04-12T18:04:05.307
> 
> 标签：php, cakephp, has-and-belongs-to-many

我正在尝试 3 天让它工作，已经应用了我在堆栈/论坛/谷歌上看到的所有内容。一个订阅者 habtm subrcriberlist 和一个订阅者列表可以属于多个订阅者。

```
/* Subscriber model*/
     public $hasAndBelongsToMany =
array(
    'Subscriberslists' => array(
        'className' => 'Subscriberslist',
        'joinTable' => 'subscribers_subscriberslists',
        'foreignKey' => 'subscriber_id',
        'associationForeignKey' => 'subscriberslist_id',
        'unique' => true
    )
);
/* Subscriberslist model*/
 public $hasAndBelongsToMany =
array(
    'Subscribers' => array(
        'className' => 'Subscriber',
        'joinTable' => 'subscribers_subscriberslists',
        'foreignKey' => 'subscriberslist_id', 
        'associationForeignKey' => 'subscriber_id',
        'unique' => true
    )
); 
```

数据的格式与我见过的所有帖子中所示的一样：

```
array(
'Subscriberslist' => '1',
'Subscriber' => array(
    'Subscriber' => array(
        (int) 0 => '1',
        (int) 1 => '2',
        (int) 2 => '3'
    )
) 
```

然后我无法将我的数据保存在我的联接表中。Cake 只保存新的订阅者。这是我的控制器：

```
if (!$this->Subscriber->saveAll($this->request->data){ //error}else{//no error} 
```

你能告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:08:08.920

我想说，如果您尝试插入订阅者，则该`saveAll`方法期望如下所示：

```
array(
    'Subscriber' => array(/* Single subscriber fields here */),
    'Subscriberslist' => array(
        /* List subscribers here */
    )
) 
```

首先尝试使用该`saveAssociated`方法，因为它需要您尝试保存的模型的单个实例，但会将关联的数据与它一起保存。如果您需要一次保存多个订阅者，请更换装备并恢复为`saveAll`：

```
array(
    array(
        'Subscriber' => array(/* Single subscriber fields here */),
        'Subscriberslist' => array(
            /* List subscribers here */
        )
    ),
    array(
        'Subscriber' => array(/* Single subscriber fields here */),
        'Subscriberslist' => array(
            /* List subscribers here */
        )
    )
) 
```

我希望这会有所帮助！

# c# - c# 中 (e, v) => 和 Changed Property as Parameter 的含义

> ID：15978002
> 
> 赞同：1
> 
> 时间：2013-04-12T18:04:15.953
> 
> 标签：c#

`(e, v) =>`C# 中的语法是什么意思？

例如，

```
TreeViewModel root = TreeViewModel.initializeRoot(parentStatus, statuses);
root.PropertyChanged += (e, v) => updateConditions(); 
```

我知道我正在注册以监听根对象的属性更改。而且，如果发生这样的事件，那么我将调用该`updateConditions()`方法。但是，`(e, v) =>`介于两者之间的是什么？

而且，有没有办法将更改的属性作为参数发送到`updateConditions()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T18:08:02.300

这是一个[Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。基本上，它创建了一个匿名方法，该方法调用`updateConditions()`并将事件绑定到该匿名方法。

相当于。

```
private void root_PropertyChanged(object e, PropertyChangeEventArgs v)
{
    updateConditions();
}

root.PropertyChanged += root_PropertyChanged 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T18:11:30.900

对于你的第二个问题：

可以将更新的内容发送`PropertyName`到`updateConditions()`. 因为`v`是类型`PropertyChangedEventArgs`它具有`PropertyName`属性：

```
root.PropertyChanged += (e, v) => updateConditions(v.PropertyName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T18:09:11.417

该语法`(e, v) => (some sort of expression)`创建一个 lambda 函数，接受参数“e”和“v”，然后返回计算表达式的结果。它基本上是一种就地创建函数的方式，因此您不必定义委托并以这种方式传递委托。在您的情况下，它接受参数 e 和 v 然后简单地返回调用的结果`updateConditions()`。查看[http://www.codeproject.com/Articles/24255/Exploring-Lambda-Expression-in-C](http://www.codeproject.com/Articles/24255/Exploring-Lambda-Expression-in-C)以了解有关如何使用这些的更多详细信息。

# ruby-on-rails - 使用acts_as_commentable_with_threading

> ID：15978007
> 
> 赞同：1
> 
> 时间：2013-04-12T18:04:32.920
> 
> 标签：ruby-on-rails, gem

我试图让这个插件工作。我读过其他线程，但我似乎不明白。

我正在尝试使我的文章模型可评论。如果我到目前为止所做的一切：

正确完成所有安装。

```
class CommentsController < ApplicationController

def create
    @article = Article.find(params[:id])
    @user_who_commented = @current_user
    @comment = Comment.build_from( @article, @user_who_commented.id, "Hey guys this is my   comment!" )
  end
end 
```

在文章#show中：

```
<%= form_for @comment do |f| %>
 <%= f.text_area :text %>
   <%= f.submit "Post Comment" %>
<% end %> 
```

路线：

```
devise_for :users
  resources :dashboard
  resources :users, :only => [:index,:show,:edit,:update]
  resources :events
  resources :januscript do
    resources :quotes
  end
  resources :jmail, :only => [:index, :show]
  resources :album 
  resources :video, :only => [:index, :show]
  resources :photos
  scope '/archive' do
    resources :quotes, :only => [:index]
    resources :articles, :only => [:index,:show]
  end
  resources :comments 
```

我收到此错误消息：

```
undefined method `model_name' for NilClass:Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:16:43.917

确保将`acts_as_commentable`您想要评论的模型添加到您的模型中。在这里没有看到任何型号代码。

**编辑：** 您是否也在您的文章路线中添加了嵌套资源？

```
resources :articles do
    resources :comments
end 
```

# javascript - 单击单选按钮，隐藏 div

> ID：15978009
> 
> 赞同：4
> 
> 时间：2013-04-12T18:04:37.223
> 
> 标签：javascript, jquery, html, css, show-hide

当有人单击表单上的单选按钮（第二个单选按钮）时，我试图隐藏 div，但是当单击第一个单选按钮时，div 会重新显示（切换）。这是我的工作代码：http: [//jsfiddle.net/NKr7M/](http://jsfiddle.net/NKr7M/)

如果您愿意，这里是 HTML：

```
<div class="grid howAnswer">
    <div class="col-1">
        <div class="button-left">
            <img src="http://i.imgur.com/RVmh2rz.png" />

            <input checked="checked" type="radio" id="id_delivery_0" value="chat" name="delivery" onclick="toggle(this)" />
        </div><!-- .button-left -->

        <div class="text-area top-text-area">
            <label for="id_delivery_0">
                AnswerChat By Appointment (Fastest)
            </label>
        </div><!-- .text-area -->
    </div><!-- .col-1 -->

    <div class="col-1">
        <div class="button-left" style="margin-left: 15px;">
            <img src="http://i.imgur.com/8J0SEVa.png" />

            <input type="radio" id="id_delivery_2" value="email" name="delivery" onclick="toggle(this)" />
        </div><!-- .button-left -->

        <div class="text-area bottom-text-area">
            <label for="id_delivery_2">
                AnswerMail ASAP (Within 1-2 days)
            </label>
        </div><!-- .text-area -->
    </div><!-- .col-1 -->
</div><!-- .grid -->

<!-- THIS IS WHAT I WANT TO HIDE -->
<div class="formInput">
    <p>Let's try and hide this div</p>
</div><!-- .formInput --> 
```

以及CSS：

```
/* General Declarations */
body { font-family: Arial, Helvetica, sans-serif; }

ul li { list-style: none; }

/* Form */
.col-1 li.howDoPadding { padding-bottom: 10px!important; }

.byAppointment { margin: 0 0 -4px 10px;}

.offlineForm .lightBlueText { 
    color: #80A9BD; 
    display: inline;
}

/* Grid */
*, *:after, *:before {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
}

.grid:after {
    clear: both;
    content: "";
    display: table;
}

.grid.howAnswer > div.col-1 {
    padding-left: 90px;
    position: relative;
}

.grid.howAnswer .button-left {
    width: 80px;
    position: absolute;
    margin-left: 20px;
    left: 0;
    top: 0;
}

.button-left img { margin-right: -5px; }

.top-text-area { margin: 15px 0 10px; }

.bottom-text-area { margin: 10px 0 15px; }

.button-left { margin: 10px 0; }

/* Grid Gutters */
[class*='col-'] {
    float: left;
    padding-right: 20px;
}

[class*='col-']:last-of-type { padding-right: 0; }

.col-1 { width: 100%; } 
```

我对 JavaScript 不是很精通，所以我非常感谢我能得到的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:11:54.527

`**[LIVE DEMO](http://jsfiddle.net/NKr7M/6/)**`

```
$(':radio[name=delivery]').change(function(){ // Or simply: $("[name=delivery]")
    $('.formInput').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:09:04.730

试试这个：

```
$("#id_delivery_0").on("change",function(){
    if($(this).prop("checked"))
       $(".formInput").hide();     
});

$("#id_delivery_2").on("change",function(){
    if($(this).prop("checked"))
       $(".formInput").show();     
}); 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/NKr7M/3/](http://jsfiddle.net/hescano/NKr7M/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T18:07:54.297

你可以用它`toggle()`来做到这一点：

```
$('#id_delivery_0').on("click", function(){
   $(".formInput").hide();
});
$('#id_delivery_2').on("click", function(){
   $(".formInput").show();
}); 
```

**工作小提琴：**

[http://jsfiddle.net/NKr7M/4/](http://jsfiddle.net/NKr7M/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:11:16.577

我假设 jQuery 库没问题，因为你用 jQuery 标记了它，所以这里是 jQuery 响应：

```
$(document).ready(function() {
    $("#id_delivery_0").click(function() {
        $(".formInput").show();
    });
    $("#id_delivery_2").click(function() {
        $(".formInput").hide();
    });
}); 
```

一定要包括 jQuery 库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T18:12:45.233

您可以执行以下操作：

```
$('#id_delivery_2').click( function(){
   $('.formInput').hide();
});

$('#id_delivery_0').click( function(){
      $('.formInput').show();
}); 
```

演示：http: [//jsfiddle.net/darkajax/jCuk9/](http://jsfiddle.net/darkajax/jCuk9/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T18:13:02.117

```
$("#id_delivery_0").on('click',function(){
      $(".formInput").find('p').show();
});

$("#id_delivery_2").on('click',function(){
      $(".formInput").find('p').hide();
}); 
```

[**小提琴**](http://jsfiddle.net/mohammadAdil/u6BKu/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-16T09:00:32.113

```
$(document).ready(function(){

     $('#button1').click(function(event) { 
     $('#hide').hide();
});

    $('#button2').click(function(event) { 
    $('#hide').show();
    });  
}); 
```

# signalr - signalR 脚本参考？

> ID：15978010
> 
> 赞同：0
> 
> 时间：2013-04-12T18:04:41.137
> 
> 标签：signalr

所有 signalR 示例都显示

`<script src="/signalr/hubs" type="text/javascript"></script>`

没有充分解释它的用途。

对于 Html 页面，它是文件夹的位置。那里没有脚本。

为什么以及如何使用这条线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:19:29.780

/signalr/hubs 页面是由 SignalR 自动生成的 JavaScript 文件，其中包含为 SignalR 项目中的每个集线器生成的集线器代理。

例如（从[http://shootr.signalr.net/signalr/hubs](http://shootr.signalr.net/signalr/hubs)获得）让我们看一下代码片段。

```
 proxies.h = this.createHubProxy('h'); 
            proxies.h.client = { };
            proxies.h.server = {
                changeViewport: function (viewportWidth, viewportHeight) {
                    return proxies.h.invoke.apply(proxies.h, $.merge(["changeViewport"], $.makeArray(arguments)));
                 },

                fire: function () {
                    return proxies.h.invoke.apply(proxies.h, $.merge(["fire"], $.makeArray(arguments)));
                 },        
... 
```

“this”指的是集线器连接，或者更确切地说是 $.connection.hub。所以我们本质上是在说 proxies.h = $.connection.hub.createHubProxy('h');

现在 'h' 是服务器上的集线器 请参阅[https://github.com/NTaylorMullen/ShootR/blob/master/ShootR/ShootR/Server/GameHub.cs](https://github.com/NTaylorMullen/ShootR/blob/master/ShootR/ShootR/Server/GameHub.cs)，更具体地查看集线器名称属性。

接下来我们有 proxies.h.client; 这是用户能够声明将从服务器调用的客户端函数的端点。

然后我们有 proxies.h.server，它引用了 GameHub.cs 上的所有公共集线器方法。所以有些函数是changeViewport，和fire。此代码是在服务器上自动生成的，以代表您的每个集线器。

最后在 signalr/hubs 文件的末尾，我们将所有动态创建的集线器扩展到 $.connection 对象，以便用户可以通过以下方式访问它们

```
var myGameHub = $.connection.h; 
```

希望这可以帮助！

# java - 有一个找不到符号错误和另一个

> ID：15978012
> 
> 赞同：0
> 
> 时间：2013-04-12T18:05:02.717
> 
> 标签：java, list, methods

我得到 2 找不到符号错误，它似乎不是类路径的结果。我也无法从 listinterface.java 代码中获取我的 .add 方法以在我的 pex6.java 中工作。我不知道是不是因为我使用整数作为类型并且 add 方法是无效的，但我不确定。我已经使用 java 大约 6 个月了，所以我对它还是很陌生。让我知道是否缺少某些东西。

```
public interface ListInterface<T>
{

/**
 * Should return the number of elements contained within this list:
 */`enter code here`
int size ();

/**
 * Should return true if this list contains a copy of the given object:
 *
 * Comparisons should be performed by calling the equals(...) method of
 * each element, passing the given object as an argument
 */
boolean contains ( T theObject );

/**
 * Should remove the first element found within this list that exists as a
 * copy of the given object and return true if such an element was found:
 */
boolean remove ( T theObject );

/**
 * Should return a reference to the first element found within this list
 * that exists as a copy of the given object or null if no such element was
 * found:
 */
Object get ( T element );

/**
 * Should return a nicely formatted string representation of this list:
 */
String toString ();

/**
 * Should print the contents of this list to the screen:
 */
void writeLinkedList ();

/**
 * Should initialize this list for iteration (use of the getNext() method):
 */
void reset ();

/**
 * Should return a reference to the element located at the iterator's
 * current position and increment the iterator:
 *
 * If the iterator is currently pointing to the last element in this list,
 * the iterator should be reset to point to the first element in this list.
 *
 * @Preconditions:
 *     This list is not empty.
 *     This list has been reset.
 *     This list has not been modified since the last reset.
 */
  T getNext ();

/**
 * Should insert the given object onto the front of this list:
 */
void add ( T theObject );

}

public class PEX6
{
public static void main (String[] theArgs)
    {
        ListInterface<String> list = new RefList<T>();

            for (int i = 1; i <= 20; i++);
                {
                    int Random = ( ( int ) ( Math.random() * 4 ) );
                    list.add(new Integer(Random));

                    list.writeLinkedList();
                }
    }
private static int CountValue(ListInterface<T> theList,int theValue)
    {
        theList.clear();
        Integer nFound = 20;

        return nFound;
    }

} 
```

错误：

```
C:\Users\Linville\Documents\Assignment 6\PEX6.java:16: error: cannot find symbol
    private static int CountValue(ListInterface<T> theList,int theValue)
                                                ^
  symbol:   class T
  location: class PEX6
C:\Users\Linville\Documents\Assignment 6\PEX6.java:5: error: cannot find symbol
            ListInterface<String> list = new RefList<T>();
                                                     ^
  symbol:   class T
  location: class PEX6
C:\Users\Linville\Documents\Assignment 6\PEX6.java:11: error: method add in interface ListInterface<T> cannot be applied to given types;
                        list.add(new Integer(Random));
                            ^
  required: String
  found: Integer
  reason: actual argument Integer cannot be converted to String by method invocation conversion
  where T is a type-variable:
    T extends Object declared in interface ListInterface
3 errors

Tool completed with exit code 1 
```

顺便说一句，PEX6.java 并没有以任何方式完成，但我想继续正确编译代码，这样我完成后就不会出现很多错误需要修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:07:27.990

没有`T`in `PEX6`，但您指的是它：

```
ListInterface<String> list = new RefList<T>();
                                         ^ here

private static int CountValue(ListInterface<T> theList,int theValue)
                                            ^ and here 
```

您需要替换`T`为`String`或`Integer`。无法判断两者中的哪一个是有意的：您声明`list`为`ListInterface<String>`，然后继续添加`Integers`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:08:38.613

您需要为 T 传递一个类型。例如。如果您希望 ListInterface 是字符串列表

`private static int CountValue(ListInterface<String> theList,int theValue)`

# php - 根据它们的值对数组进行排序并在表格中列出

> ID：15978013
> 
> 赞同：1
> 
> 时间：2013-04-12T18:05:09.093
> 
> 标签：php, arrays, sorting

我有以下数组：

```
Array
(
    [0] => 147
    [1] => hello
    [2] => Asia/Kolkata
    [3] => Upcoming
)

Array
(
    [0] => 148
    [1] => hello world
    [2] => Asia/Karachi
    [3] => Live
)

Array
(
    [0] => 147
    [1] => ABCD
    [2] => Asia/Colombo
    [3] => NA
) 
```

上述数组来自数据库，预计最后 6 个值来自 API 动态。我已使用数组推送将该值推送到数据库数组。

请看下面的代码：

```
function compareArrayItems($a, $b) {
$order = array(
"Live",
"Upcoming",
"NA"
);
$aWeight = array_search($a[9], $order);
$bWeight = array_search($b[9], $order);
if ($aWeight === false || $bWeight === false || $aWeight === $bWeight)
return 0;
return $aWeight < $bWeight ? 1 : - 1;
}                                           

$sArr = array();
while ($kj = mysqli_fetch_array($result)) {
$arrk = get_status_for_hashtag($kj['start_time'], $kj['end_time'], $kj['day'], $kj['timezone']);
array_push($kj, $arrk);
$sArr[] = $kj;
}                       

usort($sArr, "compareArrayItems"); 
```

这里的状态只不过是最后一个值：即将到来，直播，NA。目前排序是根据数据库的常规方式进行的，但我想根据状态表示最后一个值对其进行排序。我希望 live 应该首先出现，然后是即将到来的 2nd 和 NA 3rd。使用 order-by 查询是不可能的，因为状态不是来自数据库。它来自 API，我只是将它与数据库数组合并。

希望你明白我的意思。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:10:49.217

您可以使用[usort](http://php.net/manual/en/function.usort.php)提供自定义`$cmp_function`比较`$a[3]`和`$b[3]`值。

**更新**

这是一个使用示例：

```
$arr = array(
    array(147, "hello", "Asia/Kolkata", "Upcoming"),
    array(148, "hello world", "Asia/Karachi", "Live"),
    array(147, "ABCD", "Asia/Colombo", "NA"),
);
print_r($arr);
usort($arr, "compareArrayItems");
print_r($arr); 
```

和自定义函数，用于按“Live”、“Upcoming”、“NA”的顺序对数组项进行排序：

```
function compareArrayItems($a, $b)
{
    $order = array(
        "Live",
        "Upcoming",
        "NA"
    );
    $aWeight = array_search($a[3], $order);
    $bWeight = array_search($b[3], $order);
    if ($aWeight === false || $bWeight === false || $aWeight === $bWeight)
        return 0;
    return $aWeight > $bWeight ? 1 : - 1;
} 
```

有关回调的更多信息，您可以参考[此页面](http://www.php.net/manual/en/language.types.callable.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:20:23.633

```
$rows = $result->fetch_all(MYSQLI_ASSOC);
$sort = [];
foreach ($rows as &$row)
{
   $row[] = $sort[] = get_status_for_hashtag($row['timezone']);
}
unset($row);
array_multisort($sort, $rows); 
```

[在行动中看到它。](http://eval.in/16154)

# ios - 弧内存管理

> ID：15978016
> 
> 赞同：0
> 
> 时间：2013-04-12T18:05:18.493
> 
> 标签：ios, memory-management, automatic-ref-counting

我有两个控制器，第一个控制器推动第二个控制器。我正在使用仪器的分配来检查内存分配，我发现有时分配图中会出现峰值。以下是截图。这是什么原因？这是正常的还是这种问题，可能是泄漏？顺便说一句，我使用弧。我还使用泄漏来查找任何内存泄漏，但它没有显示任何。

![在此处输入图像描述](https://i.stack.imgur.com/qn3S0.png)

# sql-server - 查询我正在寻找不匹配的 3 个表

> ID：15978017
> 
> 赞同：0
> 
> 时间：2013-04-12T18:05:19.713
> 
> 标签：sql-server, tsql

我有三个表：LitHold、LitHoldDetails 和 EmailTemplate。定义如下。

```
CREATE TABLE [dbo].[LitHold](
[LitholdID] [int] IDENTITY(1,1) NOT NULL,
[LitHoldStatusID] [tinyint] NOT NULL,
[EmailReminderID] [tinyint] NULL,
[ApprovedDate] [datetime] NULL,
[TerminatedDate] [datetime] NULL,
CONSTRAINT [PK_Lithold] PRIMARY KEY CLUSTERED 
(
[LitholdID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[LitHoldDetails](
[LitHoldDetailsID] [int] IDENTITY(1,1) NOT NULL,
[LitholdID] [int] NOT NULL,
[VersionID] [int] NOT NULL,
[Description] [varchar](300) NULL,
[ResAttorneyID] [varchar](10) NOT NULL,
[Comments] [varchar](1000) NULL,
[HoldStartDate] [datetime] NULL,
[HoldEndDate] [datetime] NULL,
[CreatedDate] [datetime] NOT NULL,
[CreatedByLogin] [varchar](10) NULL,
CONSTRAINT [PK_LitholdDetails] PRIMARY KEY CLUSTERED 
(
[LitHoldDetailsID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[EmailTemplate](
[TemplateID] [int] IDENTITY(1,1) NOT NULL,
[LitHoldDetailsID] [int] NOT NULL,
[From] [varchar](50) NULL,
[To] [varchar](2000) NULL,
[CC] [varchar](500) NULL,
[BCC] [varchar](500) NULL,
[Subject] [nvarchar](200) NULL,
[MessageBody] [nvarchar](max) NULL,
[SendDate] [datetime] NULL,
[IsDefault] [bit] NOT NULL,
CONSTRAINT [PK_EmailTemplate] PRIMARY KEY CLUSTERED 
(
[TemplateID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

对于每个 LitHold，可以有多个 LitHoldDetails。对于每个 LitHoldDetail，应该有一个 EmailTemplate。我最近发现一些 LitHoldDetails 没有 EmailTemplates。我们仍在开发这个项目，所以这没什么大不了的。但是，我们希望将 EmailTemplate 数据放入数据库。情况是，对于每个 LitHold，至少有一个具有 EmailTemplate 的 LitHoldDetail。我想为 a) 具有相同 LitHoldID 和 b) 没有 EmailTemplate 的所有 LitHoldDetails 复制此 EmailTemplate 数据。我尝试过的一种方法是：

```
insert into EmailTemplate
(LitHoldDetailsID, [From], [To], CC, BCC, Subject, MessageBody, SendDate, IsDefault)
(select (select top 1 LitHoldDetailsID from LitHoldDetails where LitholdID = d.LitholdID and LitHoldDetailsID <> e.LitHoldDetailsID), [To], CC, BCC, Subject, MessageBody, SendDate, IsDefault from 
EmailTemplate e inner join LitHoldDetails d on e.LitHoldDetailsID = d.LitHoldDetailsID) 
```

但这让我获得了一些 LitHoldDetails 的多行，具有不同的 EmailTemplate 数据，以及 LitHoldDetails 为 NULL 的一些行。我怎样才能做到这一点？我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:31:07.827

尝试插入：

```
SELECT lhd.LitHoldDetailsID, CloneEmailTemplate.[From], ... 
FROM LitHoldDetails lhd 
CROSS APPLY (SELECT TOP 1 et.*
             FROM EmailTemplate et
             JOIN LitHoldDetails lhd2 ON lhd2.LitHoldDetailsID = et.LitHoldDetailsID
             WHERE lhd2.LitHoldID = lhd.LitHoldID
            ) AS CloneEmailTemplate 
WHERE NOT EXISTS (SELECT 1 
                  FROM EmailTemplate et2 
                  WHERE et2.LitHoldDetailsID = lhd.LitHoldDetailsID
                 ) 
```

# sql-server-2008 - 如何获取打开我的网页的系统的用户名

> ID：15978018
> 
> 赞同：0
> 
> 时间：2013-04-12T18:05:21.160
> 
> 标签：sql-server-2008, jpa, jsf-2, eclipselink, glassfish-3

我正在为 Intranet 构建一个 Web 应用程序。我需要实现单点登录，即根据用户的系统（PC/笔记本电脑）用户名对用户进行身份验证。直到今天我都非常高兴，因为每次我测试我的登录页面时，它基本上都会选择我的系统用户名并让我登录而无需输入用户名。这就是我所需要的。但是，今天只是为了从 Intranet 中的另一个系统测试我的应用程序，当我打开登录页面时，它仍然选择了我自己的用户名。只是为了让事情更清楚，例如。如果我的系统名称是 User1，则此登录页面会选择 User1 并通过数据库进行身份验证并将我带到主页。但是，当我从具有用户名 User2 的不同系统测试我的登录页面时。登录页面仍然选择了我自己的系统用户名，即

有人可以说明我的错误或我错过的内容。是用户名 = System.getProperty("user.name"); 从访问我的登录页面的不同系统中选择用户名的正确方法是什么？

关于配置的一些细节：

1.  Glassfish V3.1.2
2.  JSF2.0（XHTML 中的所有页面，包括登录页面）
3.  JPA Eclipse 链接
4.  SQLServer2008 R2

**这是我的控制器类代码片段**

```
public boolean validateUser(String username) {

        String sysName = System.getProperty("user.name");
        System.out.println("System User is: " + sysName);

        if (username.equalsIgnoreCase(sysName)) {
            String checkUser = (String) entityManager
                    .createQuery(
                            "select u.username from User u where u.username =:username")
                    .setParameter("username", username).getSingleResult();
            System.out.println("User found in database: " + checkUser);
            if (checkUser.equalsIgnoreCase(username)) {
                System.out.println("Loggin sucessful!");
                return true;
            } else {
                System.out
                        .println("User does not exists in the system. Thus second failed");
                return false;
            }
        } else {
            System.out
                    .println("User not logged in from own system thus first failed");
            return false;
        }

    } 
```

**我的 ManagedBean 类代码片段**

```
public String username = System.getProperty("user.name");

//  private String username;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String login() {
        FacesContext context = FacesContext.getCurrentInstance();

        if (uDB.validateUser(username)) {
            userId = uDB.findUser(username);

            context.getExternalContext().getSessionMap().put("userId", userId);
            if (uGDB.validateGroup(userId)) {
                return "home.jsf?faces-redirect=true&amp;includeViewParams=true";
            }
            return "normalHome.jsf?faces-redirect=true&amp;includeViewParams=true";

        } else {
            FacesMessage message = new FacesMessage();
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            message.setSummary("Username doesn't exists! OR User is trying to login from someone else's account");
            context.addMessage("", message);
            return null;
        }
    } 
```

* * *

好的，所以我想用我目前的发现和我不久前实施的内容来扩展我的问题。下面是我为从系统获取用户名而编写的 SSOApplet.class。

**SSOApplet.class**

```
import java.applet.Applet;

public class SSOApplet extends Applet {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    String sysUser = null;

    public String getSystemUsername() {
        try {
            sysUser = System.getProperty("user.name");
            return sysUser;
        } catch (Exception e) {
            System.out.println(e);
            return null;
        }

    }
} 
```

然后我将它插入到正文中的 XHTML 页面中

```
<object>
        <param name="myApplet" value="SSOApplet.class" />
    </object> 
```

现在尝试搜索如何将这个字符串值从小程序传递给 loginBean。我对下一步完全一无所知。试图用谷歌搜索答案，但我能理解的是我现在必须编写一个 JavaScript 吗？为了设置小程序拾取的用户名的值。现在有人可以指导我正确的下一步应该是什么吗？现在如何在不提示用户输入的情况下将系统用户名传递给我的 loginBean？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:26:55.307

Java/JSF 代码不在网络浏览器中运行。它在物理上与网络服务器运行在同一台机器上。它不像网络浏览器那样在机器上运行。过程如下：

1.  客户端（使用 Web 浏览器的用户）发送请求 HTML 页面的 HTTP 请求。
2.  服务器（网络服务器）检索 HTTP 请求并执行所有 Java 代码。
3.  Java/JSF 代码产生 HTML 输出。
4.  服务器将 HTML 输出作为代表 HTML 页面的 HTTP 响应发送回客户端。
5.  客户端检索 HTML 页面并呈现它。

您的错误是您以某种方式期望 Java/JSF 代码在客户端运行。这是一个相当严重的误解。

基本上，为了在客户端运行 Java 代码，您需要创建一个[Java 小程序](http://docs.oracle.com/javase/tutorial/deployment/applet/)或[Java web start](http://docs.oracle.com/javase/tutorial/deployment/webstart/)`<object>` ，并通过元素将其嵌入到 HTML 输出中。这样，客户端将下载 Java 程序并在本地执行它（因此，在物理上与运行 web 浏览器的机器相同）。请注意，该环境通常是沙盒环境，您可能需要对其进行签名以获得更多权限，例如获取系统信息。

但是，对于您的具体功能要求，可能应该寻求完全不同的解决方案。查看单点登录 (SSO) 和/或 LDAP 等机制。有关详细信息，请联系服务器管理员。

# r - 处理 r 代码中的 ftp 错误

> ID：15978021
> 
> 赞同：1
> 
> 时间：2013-04-12T18:05:43.310
> 
> 标签：r

我有一堆 ftp 站点，我想使用 rCurl getURL 函数自动检索数据。

我正在这样做：

首先，我有一个这样的 url 边向量：

```
 sites<-c("ftp.test1.com", "ftp.test2.com", "ftp.test3.com")
 for (i in 1:length(sites)) {
  data<-getURL(sites[i], userpwd="id:passwd")

  <here I have code to insert this data to db>
} 
```

直到这里它才有效。但有时，我可以从 ftp 站点抽出时间。如果超时，此代码将中断。如果出现超时或身份验证错误，我该如何处理。我喜欢继续处理其他 ftp 站点并记录有问题的 ftp 站点的问题。任何想法，我会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:00:42.840

如果`the code breaks`您的意思是代码引发了 R 错误，您可以使用它`tryCatch`来捕获错误。然后，您可以优雅地处理问题，而不是引发错误，例如忽略该数据，或尝试建立新连接。

# java - 如何使服务器自动将数据发送回连接的客户端

> ID：15978022
> 
> 赞同：1
> 
> 时间：2013-04-12T18:05:44.580
> 
> 标签：java, rmi

我正在使用 Java RMI 在客户端和服务器之间进行网络编程。客户端连接服务器，调用方法和接收，RMI技术很容易解决。但是现在我遇到了这个问题：服务器会记住注册的客户端，并且有时，服务器会通过方法 A 将数据返回给该客户端。

所以我的问题是：

*   如何让服务器记住注册的客户端并在需要时将数据发送回该客户端？
*   如何让客户端知道服务器正在发送方法 A，而不是方法 B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:43:26.933

选项 1) 在客户端上创建一个 UnicastRemoteObject 并将其发送到服务器。（服务器推送）

选项 2）让服务器存储数据并让客户端定期调用一个方法来获取它。（客户轮询）

# java - 为什么java中的默认hashcode()不好？

> ID：15978026
> 
> 赞同：6
> 
> 时间：2013-04-12T18:05:52.087
> 
> 标签：java, hash, hashcode

如果我没记错的话，Java 中 Object() 类型对象的默认 hashCode() 实现是返回对象的内存地址。当我们创建自己的类时，我读到我们想要覆盖 hashCode() 以便当我们将它们插入到像 HashMap() 这样的与哈希相关的集合中时，它会正常工作。但是为什么内存地址不好呢？

当然，我们最终会耗尽内存并且您会遇到冲突，但我认为这是一个问题的唯一情况是您正在处理大量数据并且内存非常少，然后它会开始影响性能，因为java中与哈希相关的集合通过链接解决冲突（存储桶将链接到解析为相同哈希码/索引的值列表）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-12T18:08:40.457

如果每个对象都是唯一的，则默认实现可以正常工作。但是，如果您覆盖 equals() ，那么您就是在暗示具有不同地址的对象可以彼此等价。在这种情况下，您还必须覆盖 hashCode()。

想想 String 类。

```
String s1 = new String("foo");
String s2 = new String("foo"); 
```

这两个字符串相等，因此它们的哈希码必须相等。但它们是具有不同地址的不同对象。

```
s1 == s2         // false, different addresses
s1.equals(s2)    // true, same contents 
```

使用他们的地址作为哈希码将是一个错误。因此，String 会覆盖 hashCode() 以确保相等的字符串具有相等的哈希码。这有助于满足 hashCode() 的约定，即：

> 如果`a.equals(b)`是真的，那么`a.hashCode() == b.hashCode()`。

**底线：**如果你覆盖equals()，也覆盖hashCode()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T13:58:55.510

将对象放入 hashmap 时使用的确切键对象可能无法在以后在您的程序中访问该映射。所以你最终会覆盖 equals 方法。当您覆盖 equals 方法时，请确保它们的哈希码也相等，否则您无法从哈希图中检索对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:07:59.830

虽然您不使用`equals`方法，但可以不定义`hashCode`，但在合同之后`hashCode`为对象提供相同的结果，即等于。你不能确定它会，所以你需要自己重写它

[哈希码](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-26T09:07:19.880

**决定数据结构应该使用哪个 hashCode() 实现是 hashmap API 的一部分。**

向某些 API 提供未经您严格处理的信息，会使您无法控制。

使用默认的 hashCode() 实现将您希望管理**的键与您不处理****的内存地址**耦合，并且您没有任何控制权。

假设有一天你会想要使用某种内存优化器，它会在内存中移动对象以实现一致性和更好的性能。您将无法再使用您的数据结构，因为它包含您的密钥的原始哈希地址。

**从更实际的角度来看，**

为了在整个程序中从数据结构中检索值，您必须保留对之前插入的所有键的引用（通过使用另一个数据结构）。您将无法使用在对象状态方面“相似”的键。

```
Person steve1 = new Person("Steve","21","engineer");
Person steve2 = new Person("Steve","21","engineer");

map.put(steve1,"great worker");

map.get(steve2); 
// returns null because "steve2" is not considered a key like "steve1"

map.get(steve1); 
// returns "great worker" 
```

# xml - 我们如何使用 xslt 删除 xml 的 1 级元素中的名称空间

> ID：15978027
> 
> 赞同：0
> 
> 时间：2013-04-12T18:05:56.130
> 
> 标签：xml, xslt, xslt-1.0

我有这个xml

```
<Request xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <UserInfo xmlns="">
      <name>ss</name>
      <addr>XXXXXX</addr>
     </UserInfo>
</Request> 
```

我想要输出 xml 作为

```
<Request xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
       <UserInfo>
          <name>ss</name>
          <addr>XXXXXX</addr>
         </UserInfo>
    </Request> 
```

请在 xsl 中帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:01:46.907

您的输入和输出在语义上是相同的，但是如果您想删除它`xmlns=""`，这将起作用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*/*">
    <xsl:element name="{name()}" namespace="{namespace-uri()}">
      <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<Request xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <UserInfo>
    <name>ss</name>
    <addr>XXXXXX</addr>
  </UserInfo>
</Request> 
```

# flash - AS 2 延迟滚动到顶部

> ID：15978034
> 
> 赞同：0
> 
> 时间：2013-04-12T18:06:22.740
> 
> 标签：flash, scroll, actionscript-2, delay

我有一个滚动条和一个问题：

```
function scrolling(){
_root.onEnterFrame = function() {

    function fun()      {
        moz = -94;
    }

    setTimeout(fun,5000);

    container_mc._y = (moz);

    if (container_mc._y > mask_mc._y)       {
        container_mc._y = mask_mc._y;
    }

    if (container_mc._y < (mask_mc._y - (container_mc._height - mask_mc._height)))      {
        container_mc._y = mask_mc._y - (container_mc._height - mask_mc._height - 1782);
    }

}; 
```

}

我想将内容移到顶部，但我不知道该怎么做。我想延迟。最重要的是认为运动不是连续的！单位大约为 94 像素。我需要一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:42:45.823

您知道最后缺少一个结尾 } 括号的事实，对吗？

我不知道“将内容移到顶部”到底是什么意思，但要使移动平滑而不是`container_mc._y = (moz);`这样做：

```
container_mc._y+=(moz-container_mc._y)/5; //you may modify the 5 to adjust the speed 
```

# c++ - 无法打开输入文件“opencv_calib3d243d.lib”

> ID：15978035
> 
> 赞同：4
> 
> 时间：2013-04-12T18:06:27.003
> 
> 标签：c++, visual-studio-2010, opencv

我在 OpenCV 中收到以下错误

```
1>------ Build started: Project: OpenCv, Configuration: Debug Win32 ------
1>LINK : fatal error LNK1181: cannot open input file 'opencv_calib3d243d.lib'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我正在使用 MS Visual Studio 2010 express 和 OpenCV 2.4.0 版。在配置 OpenCV 并使用提供的代码进行测试时，我遵循了以下说明。

[在 Visual C++ 2010 Express 中安装 OpenCV 2.4.3](https://stackoverflow.com/questions/10901905/installing-opencv-2-4-3-in-visual-c-2010-express)

为什么我收到此错误？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-26T13:57:24.927

240 表示您的版本是 2.4.0，所以只需根据您的 opencv 版本更改 240，我的是 2.4.5，所以我的是 245 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:25:45.007

找到了答案！

将以下内容添加到**项目属性->链接器->输入->附加依赖项**

```
opencv_calib3d240d.lib
opencv_contrib240d.lib
opencv_core240d.lib
opencv_features2d240d.lib
opencv_flann240d.lib
opencv_gpu240d.lib
opencv_haartraining_engined.lib
opencv_highgui240d.lib
opencv_imgproc240d.lib
opencv_legacy240d.lib
opencv_ml240d.lib
opencv_nonfree240d.lib
opencv_objdetect240d.lib
opencv_photo240d.lib
opencv_stitching240d.lib
opencv_ts240d.lib
opencv_video240d.lib
opencv_videostab240d.lib 
```

转到**Linker->General->Enable Incremental Linking**并选择**No(/INCREMENTAL:NO)**；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T21:57:15.193

我有同样的问题。即使我在 .props 文件中做对了所有事情，项目本身也没有导入 OpenCV lib 目录。我通过右键单击项目文件并转到属性/配置属性/链接器/常规/附加库目录，编辑它并检查“从父级或对象默认值继承”解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T12:36:41.037

我通过添加整个路径名解决了这个问题。为此，请访问：

1.  物业经理
2.  链接器
3.  一般的
4.  其他库目录
5.  *粘贴文件的完整路径*

...也转到“启用增量链接”并选择“否”

# jquery - 如何使用jquery获取嵌套框架中元素相对于视口的位置？

> ID：15978037
> 
> 赞同：0
> 
> 时间：2013-04-12T18:06:28.597
> 
> 标签：jquery, position, frame

我有一个由几个框架和子框架组成的网页，并且想知道其中一个子框架中的元素**相对于视口**的位置。

**例子**

让我们假设以下框架布局：

```
|----------------------|
|Frame A    | Frame B  |
|           |          |
------------------------
|Frame C    | Frame D  |
|           | #myDiv   |
------------------------ 
```

我有四个帧**A,B,C,D**并且在帧**D**中有一个元素**#myDiv**。我知道我可以使用 jQuery 的*offset()*方法来获取元素相对于文档的位置，在我的例子中是框架 $D$ 的文档。但是，我想要的是**#myDiv**相对于整个视口左上角的位置。

有人对此有很好的解决方案吗？我花了一些时间在 Stackoverflow 上阅读诸如此类的答案，[但](https://stackoverflow.com/questions/3714628/jquery-getting-location-of-element-relative-to-window)所提出的解决方案似乎都不适用于上述情况。

有没有人知道一个好的解决方案？

# html5-canvas - TideSDK 支持 HTML5 Canvas

> ID：15978038
> 
> 赞同：1
> 
> 时间：2013-04-12T18:06:30.613
> 
> 标签：html5-canvas, tidesdk

我打算使用 TideSDK 将现有的 Web 应用程序移植到桌面。webapp 广泛使用了 HTML5 画布，我想问一下是否有人已经对使用 HTML5 画布的 TideSDK 应用程序有一定的经验，是否通常可以做类似的事情？
我已经用 TideSDK 编译了我的 webapp 的精简版本来进行测试，画布似乎根本不起作用。
所以我假设我在设置应用程序时错过了一些东西，或者 TideSDK 正在使用的 Webkit 引擎仍然需要更新？有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T20:14:36.213

也许答案来得太晚了，但我现在正在这样做，我发现了这个问题。

使用 TideSDK v1.3.1 beta 和 TideSDK Developer 1.4.2 一切都对我有用（在我的情况下，它是一个仅使用 2D 功能在画布内渲染的 javascript 游戏——没有任何 webgl）。我只需要在应用程序的 Resources 文件夹中放置一个 index.html，包括必要的脚本（当然还有启动它们），应用程序就可以工作了。

注意 1：我发现一些小问题让我认为这个 webkit 是一个稍微不同的版本（尝试使用图像之外的坐标执行 drawImage 时出现一些错误，这似乎适用于其他 webkit 版本）。如果您从 TideSDK 开发人员处启动应用程序，您可以在窗口内右键单击并选择“显示检查器”，就像在任何其他浏览器中一样。从可执行文件启动应用程序时，您不能这样做。

注2：坏消息：帧率下降到不到一半。我在一个不太复杂的游戏中从每秒 60 帧到 15~30 帧，这使得我的实验无法使用。

# quicksort - 快速排序在 O(n^2) 时间内运行？

> ID：15978042
> 
> 赞同：4
> 
> 时间：2013-04-12T18:06:42.037
> 
> 标签：quicksort

谁能解释为什么快速排序的最坏情况运行时是 O(n^2) 以及为什么这种情况很少见？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T18:11:42.353

如果每次都以最坏的方式选择枢轴，而不是将其划分为两个大小为 n/2 的列表，它将划分为一个大小为 1 的列表和一个大小为 n-1 的列表。这导致递归深度为 n 和 n^2 总时间。

这种情况很少见，因为枢轴通常是随机选择的，因此每次选择最差枢轴的机会很小，平均而言，枢轴倾向于将列表大致分成两半。

如果枢轴是非随机选择的，例如取第一个元素，则某些输入（预排序或反向排序的列表）可以强制执行 n^2 性能。

# html - 在您的网站上添加指向电子商务供应商的链接

> ID：15978043
> 
> 赞同：3
> 
> 时间：2013-04-12T18:06:46.293
> 
> 标签：html, css, c#-4.0

我为我的最后一个学期项目制作了一个图书网站，我想在其中添加以下功能：

我显示有关一本书的信息，我想添加指向用户可以购买书籍的不同供应商的链接。例如，我可以放置指向 amazon、ebay 等的链接。一旦用户点击它，他将被定向到该特定网站，但产品页面在其上打开。

我是否必须使用相同的 API，或者我可以将内容附加到 url 并达到相同的效果？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:12:00.803

许多网站确实有一个 url api，但通常需要您传递某种令牌才能访问他们的数据。这几乎可以保证每个站点在构建这些 url 的方式上都会有所不同。它还取决于您必须进行哪些数据查询。作者？标题？国际标准书号？

但是，如果您只是想获得一些快速的结果，您可以在网站上进行搜索并分析 url 以找出可以使用的一般查询。比如我刚去亚马逊和ebay看：

对于亚马逊，我进行了搜索，发现 ISBN 在字符串中。所以我创建了一些自定义网址：
[http ://www.amazon.com/dp/0765325950/](https://rads.stackoverflow.com/amzn/click/com/0765325950)
[http://www.amazon.com/dp/1449331815](https://rads.stackoverflow.com/amzn/click/com/1449331815)
[http://www.amazon.com/dp/0441013597/](https://rads.stackoverflow.com/amzn/click/com/0441013597)

这不是一个神秘的数字，而是那些书的 ISBN-10。这是关键字搜索： [http](http://www.amazon.com/s/?field-keywords=enders%20game)
://www.amazon.com/s/?field-keywords=enders%20game （%20 是空格的 url 编码）

易趣有点不同。以下是一些查询：
关键字：[http](http://www.ebay.com/sch/i.html?_nkw=wheel%20of%20time)
://www.ebay.com/sch/i.html?_nkw= wheel+of+time 关键字：[http ://www.ebay.com/sch/i.html?_nkw=狩猎+寻找+红色+十月](http://www.ebay.com/sch/i.html?_nkw=the%20hunt%20for%20red%20october)

我尝试过的其他一些网站：
关键字：[http](http://www.barnesandnoble.com/s/war%20and%20peace)
://www.barnesandnoble.com/s/war+and+peace ISBN-13：[www.barnesandnoble.com/s/9781449331818](http://www.barnesandnoble.com/s/9781449331818)
ISBN-10：[http://www.barnesandnoble。 com/s/0812550706](http://www.barnesandnoble.com/s/0812550706)
ISBN-13： http: [//www.booksamillion.com/p/9780618260300](http://www.booksamillion.com/p/9780618260300)
ISBN-10： http: [//www.booksamillion.com/p/1476714789](http://www.booksamillion.com/p/1476714789)

因此，只需替换 url 的相关部分：关键字、ISBN-10、ISBN-13，对于这些服务中的任何一个，你都应该很高兴。请注意，这不是一个长期的解决方案。您确实应该使用服务 API，但因为这只是一个学校项目。足够好恕我直言。

# latex - LaTeX：无法创建文档

> ID：15978047
> 
> 赞同：0
> 
> 时间：2013-04-12T18:06:57.470
> 
> 标签：latex, pdflatex

我刚开始使用 LaTeX，并尝试创建我的第一个文档。我正在使用 Mac OS X 10.8.3。

创建`hello.tex`文件后，我`latex hello`在命令行中输入。这将返回以下输出：

```
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012)
 restricted \write18 enabled.
entering extended mode
(./hello.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, ge
rman-x-2012-05-30, ngerman-x-2012-05-30, afrikaans, ancientgreek, ibycus, arabi
c, armenian, basque, bulgarian, catalan, pinyin, coptic, croatian, czech, danis
h, dutch, ukenglish, usenglishmax, esperanto, estonian, ethiopic, farsi, finnis
h, french, friulan, galician, german, ngerman, swissgerman, monogreek, greek, h
ungarian, icelandic, assamese, bengali, gujarati, hindi, kannada, malayalam, ma
rathi, oriya, panjabi, tamil, telugu, indonesian, interlingua, irish, italian, 
kurmanji, latin, latvian, lithuanian, mongolian, mongolianlmc, bokmal, nynorsk,
 polish, portuguese, romanian, romansh, russian, sanskrit, serbian, serbianc, s
lovak, slovenian, spanish, swedish, turkish, turkmen, ukrainian, uppersorbian, 
welsh, loaded.

! LaTeX Error: File `(.cls' not found.

Type X to quit or <RETURN> to proceed,
or enter new name. (Default extension: cls) 
```

我一直试图为此找到解决方法，但一直无法做到。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:10:52.193

您很可能在声明文档的类时使用了圆括号而不是花括号。也就是说，你有类似的东西

```
\documentclass(article) 
```

但应该是

```
\documentclass{article} 
```

顺便说一句，您确实还需要包含文件的内容，而不仅仅是错误消息。

# java - 在静态方法中从抽象类中查找扩展器

> ID：15978051
> 
> 赞同：2
> 
> 时间：2013-04-12T18:07:20.723
> 
> 标签：java, reflection, static, extend, superclass

我有一组基本类，ei：

`public class Item{ }`

我想添加功能以扩展具有 Storable 能力的基本类：

1.  用于防止数据存储在对象中的新参数
2.  从存储中加载对象的新静态方法

我创建了一个抽象类 Storable：

```
public abstract class Storable{
    private StorageRow str;

    public void setStorageRow(StorageRow row){
        str = row;
    }

    public static ArrayList<? extends Storable> getAll(){
        ArrayList<Storable> ans = new ArrayList<Storable>();
        Class<Storable> extenderClass = ??????

        ArrayList<StorageRow> rows = Storage.get(llallala);
        for(StorageRow row : rows){
            Object extender = extenderClass.newInstance();
            // Now with reflection call to setStorageRow(row);
        }
        return ans;
    }
} 
```

现在我用 Storable 扩展我的基础类：

`public class Item extends Storable{}`

电话是：

```
ArrayList<Item> items = (ArrayList<Item>) Item.getAll(); 
```

主要问题是：现在我在超类的静态方法 getAll 中。如何获得子类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:10:21.727

你不能。静态方法属于您声明它的类，而不是它的子类（[它们不是继承的](https://stackoverflow.com/questions/1740528/inheritance-vs-static-in-java)）。因此，如果您想知道它是从哪里调用的，则需要将类作为参数传递给它。

```
public static ArrayList<? extends Storable> getAll(Class<? extends Storable>) 
```

另一种更麻烦的方法是获取堆栈跟踪并检查哪个类进行了调用，但我认为当参数足够时这种黑客行为是不值得的。

**编辑**：使用堆栈跟踪的示例：

```
class AnotherClass {

    public AnotherClass() {
        Main.oneStaticMethod();
    }
}

public class Main {

    /**
     * @param args
     * @throws OperationNotSupportedException
     */
    public static void main(final String[] args) {
        new AnotherClass();
    }

    public static void oneStaticMethod() {
        final StackTraceElement[] trace = Thread.currentThread()
                .getStackTrace();
        final String callingClassName = trace[2].getClassName();
        try {
            final Class<?> callingClass = Class.forName(callingClassName);
            System.out.println(callingClass.getCanonicalName());
        } catch (final ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

# php - 使用 PHP 对简单表单进行多重重定向

> ID：15978055
> 
> 赞同：0
> 
> 时间：2013-04-12T18:07:33.213
> 
> 标签：php, javascript, forms, redirect

请任何人都可以帮助我填写此表格，我现在需要为我的客户完成这项工作，我迷路了！在 PHP 方面不是最好的。需要发生的是，每当用户填写表单时，它需要根据为表单添加的输入重定向 URL。例如，如果他们选择列出的任何下拉菜单，它会将他们带到该特定页面。如图所示，我实际上通过 javascript 完成了所有这些工作。我需要帮助的下一部分是当他们输入正确的邮政编码（圣地亚哥的邮政编码）时，它会将他们带到他们在下拉菜单中选择的页面。如果他们没有输入正确的圣地亚哥邮政编码，它将把他们带到一个不同的“国家页面”。完全覆盖下拉选择。我真的需要这方面的帮助，谁能帮帮我？感谢您提供任何可以添加的输入，因为我现在非常迷茫……

```
<script type="text/javascript">

    function setAction(nPage){

        document.forms[0].action = nPage;
    }
</script>

<?php
    $zip = $_GET['zip'];

    $sandiego =  array('91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173');

    if (in_array($zip, $sandiego)){
        header("Location: http://www.pureflo.com/");
    } else {
            header("Location: http://www.pureflo.com/");
    }

?>

<form method='post' enctype='multipart/form-data'  id='gform_1'  action='front-page.php'>
<div class="serviceinput"
<label for="services">Services: </label>
<select id="selection" onchange="setAction(this.value)">

<option value=''>Select a Service</option>
<option value='http://50.22.79.62/~pftech/water-delivery-service/'>Water Delivery</option>
<option value='http://50.22.79.62/~pftech/coffee-delivery/'>Coffee Services</option>
<option value='http://50.22.79.62/~pftech/water-filtration-systems/'>Water Filtration</option>
</select>

</div>
&nbsp;
<div class="zipcode">
<label for="zip">Zip Code: </label>
<input name="zip" type="text" maxlength="5" id="zip" /></div>
<div class="frontradio"><input name="home" type="radio" id="homeradio" />
   <div class="homelabel"> <label for="homeradio">Home</label></div>
    <input name="home" type="radio" id="officeradio" />
    <label for="officeradio">Office</label></div>
<div class="homebutton">
<input type='submit' id="submithome" name="did_submit" value="Get Started!">
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:16:33.313

检查你的方法:) 并在`header()`使用`exit`后防止进一步执行 php

```
<?php
    $zip = $_POST['zip']; //your form method is post

    $sandiego =  array('91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173');

    if (in_array($zip, $sandiego)){
        header("Location: ".$_POST['selection']);
        exit;
    } else {
            header("Location: http://www.pureflo.com/");
            exit; 
   }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:35:59.137

你确定这个功能是你需要的吗？您想更改表单的操作而不是在一个地方处理重定向吗？

让我们从这里开始：您的表单正在使用 post，但您查找的是 $_GET['zip']。你需要改变它来听一个或另一个。由于这看起来像一个过滤形式，我建议使用 get：

```
<form method='get' id='gform_1' action='front-page.php'> 
```

你不需要 enctype ，你的方法应该是 get 。现在，您的提交代码应该有 isset 围绕它：

```
if(isset($_GET['zip'])){
    $sandiego =  array('91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173');

    if (in_array($_GET['zip'], $sandiego)){
        header("Location: http://www.pureflo.com/"); // <- you sure about this?
    } else {
        header("Location: http://www.pureflo.com/");
    }
} 
```

您的邮编检查器针对两者定位相同的位置。也许您应该使用当前没有名称的选择，因此它不会填充到 get 数组中：

```
 if (in_array($_GET['zip'], $sandiego)){
        header("Location: ".urldecode($_GET['selection'])."?zip=".$_GET['zip']."&type=".$_GET['type']);
    } else {
        header("Location: http://www.pureflo.com/");
    }
    exit; 
```

并确保为您的选择输入 html 命名：

```
<select name="selection"> 
```

除非您真的想在几个不同的地方编写提交处理代码或包含它，否则您不需要那个 js。PS - 你不想那样做。如果你这样做，你会感到困惑。

您的单选按钮需要值，并且可能应该有一个不太具体的名称：

```
<input name="type" type="radio" id="homeradio" value="home" />
<input name="type" type="radio" id="officeradio" value="office" /> 
```

您可能希望根据此表格的实际意图更新您的问题。我假设它正在请求服务信息。就像 - 你说你想要家里的水，它应该带你去：

```
http://50.22.79.62/~pftech/water-delivery-service/?zip=xxxxx&type=home 
```

这很简单。

您的整个代码将是这样的：

```
<?php
    if(isset($_GET['zip'])){
        $sandiego =  array('91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173');

        if (in_array($_GET['zip'], $sandiego)){
            header("Location: ".urldecode($_GET['selection'])."?zip=".$_GET['zip']."&type=".$_GET['type']);
        } else {
            header("Location: http://www.pureflo.com/");
        }
        exit;
    }
?>
<form method='get' id='gform_1' action='front-page.php'>
  <div class="serviceinput">
    <label for="services">Services: </label>
    <select id="selection" name="selection">
      <option value=''>Select a Service</option>
      <option value='http://50.22.79.62/~pftech/water-delivery-service/'>Water Delivery</option>
      <option value='http://50.22.79.62/~pftech/coffee-delivery/'>Coffee Services</option>
      <option value='http://50.22.79.62/~pftech/water-filtration-systems/'>Water Filtration</option>
    </select>
  </div>
  &nbsp;
  <div class="zipcode">
    <label for="zip">Zip Code: </label>
    <input name="zip" type="text" maxlength="5" id="zip" />
  </div>
  <div class="frontradio">
    <input name="type" type="radio" id="homeradio" value="home" />
    <div class="homelabel"> <label for="homeradio">Home</label></div>
    <input name="type" type="radio" id="officeradio" value="office" />
    <label for="officeradio">Office</label>
  </div>
  <div class="homebutton">
    <input type='submit' id="submithome" name="did_submit" value="Get Started!">
  </div>
</form> 
```

结束语，您的代码应该验证是否为服务下拉列表选择了一个值，并且只返回错误而不是强迫用户。

PS - 您的提交处理需要在任何 html 发送到浏览器之前完成。我的示例没有正确显示分离。它看起来是内联的，但这不是意图。表单检查代码应尽可能靠近文件顶部

**JAVASCRIPT 示例：**

```
<script type="text/javascript">
    var sandiego = ['91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173'];
    var selection, zip, home;

    function sendForm(){
        zip = document.getElementById("selection").value;

        if(inArray(zip, sandiego))
        {
            selection = document.getElementById("selection").value;
            if(selection != "")
            {
                home = document.getElementById("home").value;
                var url = selection + '?zip=' + zip + '&home=' + home;
                window.location = url;
            }            
        }
        else
        {
            window.location = 'http://www.pureflo.com/';
        }
    }

    function inArray(needle, haystack) {
        var length = haystack.length;
        for(var i = 0; i < length; i++) {
            if(haystack[i] == needle) return true;
        }
        return false;
    }
</script> 
```

# map - 在纯函数中嵌套使用 Apply/Map/MapThread

> ID：15978056
> 
> 赞同：0
> 
> 时间：2013-04-12T18:07:36.530
> 
> 标签：map, wolfram-mathematica

**1\. 我的主要问题**

我有一个带有两个参数槽的函数。我不想将此功能应用于 2 个不同长度的列表。我认为在这个解决方案中：

```
Map[Map[f[# &, #], b] &, c] 
```

但它不起作用。这是为什么？

**例子**

```
f[x_, y_] := Sin[x y]

  b = {1, 2}
  c = {1, 2, 3} 
```

输出似乎与我想要的非常接近，但还不够接近：

```
{{Sin[#1 &][1], Sin[#1 &][2]}, {Sin[2 (#1 &)][1], 
  Sin[2 (#1 &)][2]}, {Sin[3 (#1 &)][1], Sin[3 (#1 &)][2]}} 
```

**2.**看来我只需要把方括号中的 & 去掉即可。

**a)**是这样吗？为什么？

**b)**我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:55:42.837

您可以使用`Outer`如下：

```
Outer[Sin[#1 #2] &, {1, 2}, {1, 2, 3}]
(* {{Sin[1], Sin[2], Sin[3]}, {Sin[2], Sin[4], Sin[6]}} *) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:49:01.280

您可以使用两个 arg 形式的函数来命名参数之一。

```
Map[Map[Function[ci,f[ci, #]], b] &, c] 
```

Outer 非常适合这个例子，但命名的纯函数参数对于更一般的情况很有用。即使不是绝对必要，它们通常也有助于提高可读性。

# javascript - 在 Google 电子表格中使用 onEdit 实时编辑单元格内容

> ID：15978057
> 
> 赞同：2
> 
> 时间：2013-04-12T18:07:43.773
> 
> 标签：javascript, google-apps-script, google-sheets, google-docs

我很难让我的 onEdit 脚本工作。我的工作有一个电话记录表，我们用它来跟踪电话（日期、时间、分配的技术等）。我们将另一个工作表设置为数据透视表报告，称为“技术电话”。该工作表应该自动计算每位技术人员每天的通话次数。它可以工作，但问题是任何时候额外的空白被添加到电话日志表中分配的技术列中的单元格，技术表的电话将其视为一个整体，所以看起来好像有 4 个不同的“鲍勃等。

我已经成功地编写了一个脚本，通过修剪 Assigned Tech 列的每个单元格中的空白来清理它，并且我正在尝试将其转换为 onEdit 脚本以实时完成相同的事情。

```
function onEdit(e) 
{ 
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = ss.getActiveSheet();
  var r = ss.getActiveRange();
}

function myOnEdit() 
{
  function replacer( str, p1, p2, offset, s ) {
    return p1 
      }

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var cell = ss.getActiveCell().getA1Notation();
  var tsheet = "Phone Log";
  var sname = ss.getName();

  if (sname = tsheet) //Are we in the Phone Log sheet?
  {

    var r = ss.getActiveRange();
    var column = r.getColumn();

    if (column == 4) //Are we editing a cell in the "Assigned Tech" column?
    {

      var value = cell.getValue();
      if ( value == String )
      {
        value = value.replace( /^\s*(.*?)\s*$/gm , replacer );
        cell.setValue( value) ;
      } 
    }
  }

} 
```

所以基本上，我正在尝试获取正在编辑的单元格值，即“Bob”，删除空格并将输入的值替换为已编辑的值“Bob”。当我在脚本编辑器中运行上述脚本时，我没有收到任何错误，但它只是不起作用。我确实安装了 onMyEdit() 作为 onEdit 触发器。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T02:30:37.123

我很惊讶这对你有用。因为`getA1Notation()`调用，`cell`包含一个String，所以不支持`.getValue()`or`.setValue()`方法。

“活动”表格和单元格的概念并不真正适用于`onEdit()`触发功能；它们在它们自己的执行实例中被调用，并且一个事件被传递给它们以提供上下文。请参阅[了解事件](https://developers.google.com/apps-script/understanding_events)。

您还犯了一个简单但灾难性的错误`=`。单`=`是赋值操作，比较有两种风格，`==`和`===`。（第一个比较两个对象的内容，第二个也比较这些对象的类型。）当你有`if (sname = tsheet)`时，它不是比较工作表的名称，而是将内容分配`tsheet`给`sname`，然后对 进行布尔测试`sname`。（这种类型的错误不会被解释器捕获，因为它完全有效......这不是你想要的。）

当您检查`if ( value == String )`时，您的意思是检查值的类型是否为字符串？如果是这样，那将是这样的：`if (typeof value === 'string')`

### 更新的脚本

```
function myOnEdit(e) 
{
  function replacer( str, p1, p2, offset, s ) {
    return p1 
      }

  var ss = e.source;
  var cell = e.range;
  var tsheet = "Phone Log";
  var sname = ss.getName();

  if (sname === tsheet) //Are we in the Phone Log sheet?
  {

    var column = cell.getColumn();

    if (column == 4) //Are we editing a cell in the "Assigned Tech" column?
    {

      var value = cell.getValue();
      if (typeof value === 'string')
      {
        value = value.replace( /^\s*(.*?)\s*$/gm , replacer );
        cell.setValue( value );
      } 
    }
  }
} 
```

# javascript - 检查两个选择器元素是否存在并且在jQuery中具有相同的值

> ID：15978059
> 
> 赞同：2
> 
> 时间：2013-04-12T18:07:49.203
> 
> 标签：javascript, jquery, jquery-selectors, sidebar

考虑这段代码：

```
if ( $('.sidebar-primary, .sidebar-secondary').css('float') === 'left' ) { 
```

它给了我一个真实的即使`.sidebar-secondary`在 HTML 中甚至不存在。为什么会这样？即使 .sidebar-secondary 有时不存在，我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:17:30.050

“获取匹配元素集中**第一个元素**的样式属性值，或者为每个匹配元素设置一个或多个 CSS 属性。”（[http://api.jquery.com/css/](http://api.jquery.com/css/)）..

你应该试试：

```
if (
   $('.sidebar-primary').css('float') === 'left' && 
   $('.sidebar-secondary').css('float') === 'left' ){
   // Your code here...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:22:00.527

正如[jQuery 文档](http://api.jquery.com/css/)所说：

> [.css()]获取匹配元素集中第一个元素的样式属性值，或者为每个匹配元素设置一个或多个 CSS 属性。

所以只考虑数组的第一个元素。你需要类似的东西：

```
var every = Function.call.bind(Array.prototype.every);

var isFloatLeft = every($('.sidebar-primary, .sidebar-secondary'), function(node) {
    return $(node).css('float') === 'left'
});

console(isFloatLeft); 
```

不幸的是，jQuery 没有任何`every`方法，幸运的是 JavaScript（ES5 规范）有：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)

请注意，这是一种通用方法，以防您需要检查多个元素。只有两个，您可以直接比较它们：

```
isFloatLeft = $('.sidebar-primary').css('float') === 'float' && 
              $('.sidebar-secondary').css('float') === 'float; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:15:11.390

它将匹配第一个选择器，因此如果您`.sidebar-primary`只有这个选择器将被评估。
要解决这个问题，您必须一一比较。

看看下面的[**演示**](http://jsfiddle.net/jDejM/)，看看会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:15:14.960

将您的条件语句分成几部分：

```
if ($('.sidebar-primary').css('float') === 'left' && $('.sidebar-secondary').css('float') === 'left')) {
   //Do your stuff!
} 
```

或者，如果您有大量要检查的元素：

```
function CheckFloat() {
    $('.sidebar-primary, .sidebar-secondary').each(function(i, e) {
      if (e.css('float') != 'left') {
          return false;
      }
    });

    return true;
} 
```

# javascript - 使用 javascript 捕获 ALT+S 时如何避免键入 ß？

> ID：15978060
> 
> 赞同：0
> 
> 时间：2013-04-12T18:07:51.023
> 
> 标签：javascript, macos

我正在使用[这种](https://stackoverflow.com/a/5235968/303295)方法来捕获键组合。

它们中的大多数都按预期工作，但至少在 OS X 上的 Chrome 上，当捕获 ALT+S（键代码 18 + 83）时，char ß 会被输入浏览器 - 这是破坏性的。

如何防止输入该字符？

# java - Java FileLock 无异常阻塞；等锁

> ID：15978064
> 
> 赞同：10
> 
> 时间：2013-04-12T18:08:00.220
> 
> 标签：java

我发现 Java 文件锁定机制是一个真正的错误，因为它不能执行第一条锁定规则——阻塞调用锁定！除非我错了——如果应用程序已经在文件上保持了锁，对 lock() 的调用将引发异常，我知道在我的应用程序中就是这种情况。我在这里查看了一些答案，不幸的是我没有使用 Java 7。

有没有人有关于我如何处理等待排他文件锁而不让自己陷入`while(true)`循环的建议:)

**在 Aubin 的回答后编辑（来自评论的副本）：**

我想要做的是在将大文件复制到目录后访问它，然后对其进行处理。我的代码很简单...

```
public boolean ifFileReady(File file) {
   boolean ready = false;
   FileLock lock = null;
   FileChannel channel = null;
   try {

      channel = new RandomAccessFile(file, "rw").getChannel();
      lock = channel.lock();
      lock.release();
      ready = true;
   }
   catch( IOException e ) {
      // Always Here
   }
   finally
   {
      if (channel != null)
         channel.close();
   }
   return ready;
} 
```

我从不堵在锁上。它总是抛出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-11T16:54:49.393

下面的代码演示了 lock 确实阻塞而不抛出异常。我遇到了类似的问题，但发现异常实际上是由于我的用户无权打开文件 rw 引起的。

这是一个完整的程序；同时运行它的两个实例以进行演示

```
import java.io.File;
import java.io.RandomAccessFile;
import java.nio.channels.FileChannel;

public class Test {
  public static void main(String args[]) throws Exception {
    FileChannel channel = null;
    File lockFile = new File("lock");
    System.out.println ("Opening file...");
    channel = new RandomAccessFile(lockFile, "rw").getChannel();
    System.out.println ("File open. Locking channel...");
    channel.lock();
    System.out.println ("Channel locked. Sleep for 30 seconds");
    Thread.sleep (30000);
    System.out.println ("Process terminating");
    }
} 
```

为了使代码更简洁，我没有包括解锁、关闭或异常处理（您将收到编译器警告）。当进程退出时，所有资源都应该由操作系统自动释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:43:49.240

的[文件](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#lock%28%29)副本`java.nio.channels.FileChannel`：

> public abstract FileLock lock(long position, long size, boolean shared) 抛出 IOException
> 
> 获取此通道文件的给定区域的锁定。
> 
> 对该方法的调用**将阻塞，直到该区域可以被锁定**、该通道被关闭或调用线程被中断，以先到者为准。
> 
> 自：1.4

# iphone - 如何确定文本放大镜是否在 UITextView 上处于活动状态？

> ID：15978065
> 
> 赞同：2
> 
> 时间：2013-04-12T18:08:00.963
> 
> 标签：iphone, ios

在我正在使用的这个应用程序上，我需要知道文本放大镜何时处于活动状态（这样我就可以忽略我的应用程序中的拖动动作事件）。

我已经尝试使用这些`UITextViewDelegate`方法，尤其是`textViewDidChangeSelection:`，但只有在触摸事件结束并且系统关闭放大镜后才会调用它。

我也尝试监控`didEditingBegin/End`通知 - 但这也行不通。

我需要知道放大镜何时激活，此外，不仅仅是何时关闭。任何人有任何见解？

# ios - 如何裁剪图像以使其具有弯曲的不规则边缘？

> ID：15978066
> 
> 赞同：0
> 
> 时间：2013-04-12T18:08:01.390
> 
> 标签：ios, objective-c, uitableview, uiimageview

我有 UITableViewCell 与正确大小的图像。这是单元格的外观： ![在此处输入图像描述](https://i.stack.imgur.com/iHqGv.png)

我有背景： ![在此处输入图像描述](https://i.stack.imgur.com/17H5B.png)

和图像占位符： ![在此处输入图像描述](https://i.stack.imgur.com/NYAMq.png)

我想知道是否有办法使用 iOS 库裁剪图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:41:26.503

是的，可能：

```
UIImage *imageToCrop = ...;
UIGraphicsBeginImageContext();
CGContextRef context = UIGraphicsGetCurrentContext();
[imageToCrop drawAtPoint:CGPointZero];
CGContextAddEllipseInRect(context, CGRectMake(0 ,0, imageToCrop.size.width,  imageToCrop.size.height);
CGContextClip(context);
UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T02:49:43.090

您可以使用图像遮罩技术来裁剪此图像请查看此链接 [https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc /uid/TP30001066-CH212-CJBHIJEB](https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-CJBHIJEB)

我写了一些可以帮助你的代码

```
@interface ImageRenderer : NSObject {
UIImage *image_;
}
@property (nonatomic, retain) UIImage * image;
- (void)cropImageinRect:(CGRect)rect;
- (void)maskImageWithMask:(UIImage *)maskImage;
- (void)imageWithAlpha;
@end

@implementation ImageRenderer

@synthesize image = image_;

- (void)cropImageinRect:(CGRect)rect  {
CGImageRef imageRef = CGImageCreateWithImageInRect(image_.CGImage, rect);
image_ = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);
}

- (void)maskImageWithMask:(UIImage *)maskImage  {

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGImageRef maskImageRef = [maskImage CGImage];
// create a bitmap graphics context the size of the image
CGContextRef mainViewContentContext = CGBitmapContextCreate (NULL, maskImage.size.width, maskImage.size.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);
if (mainViewContentContext == NULL){
    return;
   }

CGFloat ratio = 0;

ratio = maskImage.size.width/ image_.size.width;

if(ratio * image_.size.height < maskImage.size.height) {
    ratio = maskImage.size.height/ image_.size.height;
} 

CGRect rect1  = {{0, 0}, {maskImage.size.width, maskImage.size.height}};
CGRect rect2  = {{-((image_.size.width*ratio)-maskImage.size.width)/2 , -((image_.size.height*ratio)-maskImage.size.height)/2}, {image_.size.width*ratio, image_.size.height*ratio}};

CGContextClipToMask(mainViewContentContext, rect1, maskImageRef);
CGContextDrawImage(mainViewContentContext, rect2, image_.CGImage);
// Create CGImageRef of the main view bitmap content, and then
// release that bitmap context
CGImageRef newImage = CGBitmapContextCreateImage(mainViewContentContext);
CGContextRelease(mainViewContentContext);

image_ = [UIImage imageWithCGImage:newImage];

CGImageRelease(newImage);
}

- (void)imageWithAlpha {
CGImageRef imageRef = image_.CGImage;
CGFloat width = CGImageGetWidth(imageRef);
CGFloat height = CGImageGetHeight(imageRef);

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context =  CGBitmapContextCreate(nil, width, height, 8, 0, colorSpace, kCGImageAlphaPremultipliedFirst);
CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

CGImageRef resultImageRef = CGBitmapContextCreateImage(context);
image_ = [UIImage imageWithCGImage:resultImageRef scale:image_.scale orientation:image_.imageOrientation];

CGContextRelease(context);
CGColorSpaceRelease(colorSpace);
CGImageRelease(resultImageRef);
}

@end 
```

在此代码中，您可以从较大的图像中裁剪图像，然后您可以使用蒙版图像来完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:55:43.973

您可以使用 CoreGraphics 添加蒙版或带有路径的剪辑。蒙版是带有 alpha 通道的图像，它决定了图像的显示部分。下面的示例如何使用图像蒙版进行剪辑：

```
- (UIImage *)croppedImage:(UIImage *)sourceImage
{
    UIGraphicsBeginImageContextWithOptions(CGSizeMake(width, height), NO, [UIScreen mainScreen].scale);

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextClipToMask(context, CGRectMake(0, 0, width, height), [UIImage imageNamed:@"mask"].CGImage);

    [sourceImage drawInRect:CGRectMake(0, 0, width, height)];

    UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resultImage;
} 
```

然后你可以写`cell.picture = [self croppedImage:sourceImage];`

# java - 将数据插入数据库 - 最好的方法是什么

> ID：15978068
> 
> 赞同：4
> 
> 时间：2013-04-12T18:08:05.720
> 
> 标签：java, android, database

我必须在数据库中插入 50 - 500 个联系人的信息。我有 4 个数组列表，分别包含图像、名称、数字、布尔变量。

数据中的每一行都由所有 4 个数组列表和一个 SNO 的组合组成。请参考下图。

![在此处输入图像描述](https://i.stack.imgur.com/Nf6Hk.jpg)

我的问题是，假设我从用户的联系人列表中检索到 500 个联系人。我有一个函数可以一次将每一行插入到表中并调用它 500 次，这是一件好事吗？还是有其他方法？一个卑鄙的想法是将所有数组列表组合在一起，将其传递给函数并在那里检索数据并重复插入语句 500 次。

在性能方面什么更好？

```
for(int i =0; i < 500; i++)
{
  dbObj.insert_row(par1, par2, par3, par4, ...);
} 
```

或者

```
function insert_row(Combined ArrayLists)
{
  for(int i=0; i<500; i++)
  {
    db.execSql(//Insert Statement);
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T18:13:45.250

> 将数据插入数据库 - 最好的方法是什么

我建议您创建自己的对象来代表您的表，其中对象的属性将等于表中的列，eq

```
public class Contact {

   private String name;
   private String number;
   private String image;
   private boolean conn;

   //getters and setters
} 
```

现在你的方法听起来像“意大利面条代码”。不需要有四个 ArrayList，这种设计既不高效也不正确。

现在，您将拥有一个包含 500 个孩子的联系人对象的 ArrayList。

> 插入的最佳方法是什么？

确保将您的插入包装到一个`TRANSACTION`可以快速加快插入速度的产品上，并且您处理数据库的主要内容变得更加安全，然后您就不需要关心失去数据库完整性的可能性。

交易示例（我个人示例项目中的一种方法）：

```
public boolean insertTransaction(int count) throws SQLException {
    boolean result = false;
    try {
        db = openWrite(DataSource.getInstance(mContext));
        ContentValues values = new ContentValues();
        if (db != null) {
            db.beginTransaction();
            for (int i = 0; i < count; i++) {
                values.put(SQLConstants.KEY_TYPE, "type" + i);
                values.put(SQLConstants.KEY_DATE, new Date().toString());
                db.insertOrThrow(SQLConstants.TEST_TABLE_NAME, SQLConstants.KEY_TYPE, values);
                values.clear();
            }
            db.setTransactionSuccessful();
            result = true;
        }
        return result;
    }
    finally {
        if (db != null) {
            db.endTransaction();
        }
        close(db);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:12:43.247

将 4 个数组转换为一个对象数组使代码更好。但是您可以创建这些对象而无需这样做。

使用绑定变量（? 或 :vars）准备 sql 语句，然后通过为每一行设置绑定变量在循环中多次执行该语句。

```
String sql = "insert into..... values (?,?,?,?)";
// Get connection etc
PreparedStatement stmt = conn.prepareStatement(sql);
for(int i =0; i < 500; i++)
{
   stmt.setString(1, name.get(i));
   stmt.setNumber(2, number.get(i));
   ...

   stmt.executeUpdate();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:16:56.737

如果要将 500 条记录插入数据库，则应使用事务

```
database.beginTransaction();
try {
     // perform inserts
     database.setTransactionSuccessful();
finally {
     database.endTranasction();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:23:05.013

如前所述，创建您自己的类来表示一行或使用[ContentValues 类](http://developer.android.com/reference/android/content/ContentValues.html) SQlite 无法像在 MySQL 中那样在一个查询中插入多行，但有一些解决方法您可以[在这里](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)阅读。

如果您决定使用此链接中描述的方法，最好创建一个函数来生成此查询并只运行一次。否则正如其他人已经提到的，您可以使用事务来提高许多插入的性能。

# c# - MonoDroid：未处理的异常恢复

> ID：15978070
> 
> 赞同：7
> 
> 时间：2013-04-12T18:08:07.953
> 
> 标签：c#, android, exception-handling, mono, xamarin.android

我正在尝试向我的应用程序添加一个默认处理程序，以便我可以从其他未处理的异常中恢复。

我发现了 Android/MonoDroid 提供的三种机制，据我所知，它们应该可以实现这一点，但我无法让它们中的任何一个起作用。这是我的代码：

```
using System;
using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;

namespace TestApp {
    [Android.App.Activity(Label = "TestApp", MainLauncher = true, Icon = "@drawable/icon")]
    public class MainActivity : Activity {
        protected override void OnCreate(Bundle bundle) {
            base.OnCreate(bundle);
            SetContentView(new LinearLayout(this));

            //set up handlers for uncaught exceptions:
            //Java solution
            Java.Lang.Thread.DefaultUncaughtExceptionHandler = new ExceptionHandler(this);
            //MonoDroid solution #1
            AndroidEnvironment.UnhandledExceptionRaiser += AndroidEnvironment_UnhandledExceptionRaiser;
            //MonoDroid solution #2
            AppDomain.CurrentDomain.UnhandledException += delegate { new Alert(this, "AppDomain.CurrentDomain.UnhandledException", "error"); };

            //throw an exception to test
            throw new Exception("uncaught exception");
        }

        void AndroidEnvironment_UnhandledExceptionRaiser(object sender, RaiseThrowableEventArgs e)
        {
            //found a suggestion to set the Handled flag=true, but it has no effect
            new Android.Runtime.RaiseThrowableEventArgs(e.Exception).Handled = true;
            new Alert(this, "AndroidEnvironment.UnhandledExceptionRaiser", "error");
        }
    }

    public class ExceptionHandler : Java.Lang.Object, Java.Lang.Thread.IUncaughtExceptionHandler {
        private Context _context;
        public ExceptionHandler(Context c) { _context = c; }
        public void UncaughtException(Java.Lang.Thread thread, Java.Lang.Throwable ex) {
            new Alert(_context, "java exception handler");
        }
    }

    public class Alert {
        public Alert(Context c, string src, string title = "alert") {
            Android.App.AlertDialog.Builder builder = new Android.App.AlertDialog.Builder(c);
            builder.SetTitle(title);
            builder.SetMessage(src);
            builder.SetPositiveButton("Ok", delegate { });
            Android.App.AlertDialog alert = builder.Create();
            alert.Show();
        }
    }
} 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-24T08:02:09.913

您可以在 AppDomain.CurrentDomain.UnhandledException 事件中捕获大多数异常。但是你不能在这个委托中调用 AlertDialog，因为： 1\. 应用程序崩溃了。2\. UnhandledException 事件至少被调用。3\. alert.Show() 异步执行（在 UI 线程中）

因此，您应该使用同步操作（例如 System.IO）。您不应该使用本机 UI 操作，因为它们是异步的。

# java - Spring：使用@Configuration 动态返回一个Bean

> ID：15978074
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:08:30.530
> 
> 标签：java, spring, spring-ioc

假设您需要动态（在运行时）获取给定类型的子类型的实例。

您将如何使用 Spring IoC 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:08:17.503

您还可以使用`@Profile`以更具声明性的方式实现类似的功能。

```
@Configuration
@Profile("default")
public class TypeAConfig {
    @Bean
    public Type getType() {
        return new TypeA();
    }
}

@Configuration
@Profile("otherProfile")
public class TypeBConfig() {
    @Bean
    public Type getType() {
        return new TypeB();
    }
}

@Configuration
public class SysConfig {
    @Autowired
    Type type;       

    @Bean Type getType() {
        return type;
    }
} 
```

然后，您可以通过指定 Spring 应该激活的配置文件来控制要使用的实现，例如使用`spring.profiles.active`系统属性。[用于 Profile 的 JavaDoc](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/context/annotation/Profile.html)中的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:42:49.667

我发现以下是一种简单的方法。

```
@Component
public class SystemPreferences {
  public boolean useA() {...}
}

interface Type {....}

public class TypeA implements Type {
   @Autowired
   Other xyz;
}

public class TypeB implements Type {...}

@Configuration
public class SysConfig {
  @Autowired
  SystemPreferences sysPrefs;

  @Bean
  public Type getType() {
    if (sysPrefs.useA()) {
      //Even though we are using *new*, Spring will autowire A's xyz instance variable
      return new TypeA();
    } else {
      return new TypeB();
    }
  }
} 
```

# php - 加载模态窗口时对话框jquery没有方法

> ID：15978079
> 
> 赞同：0
> 
> 时间：2013-04-12T18:08:56.180
> 
> 标签：php, jquery, modal-dialog

我正在尝试在模式窗口中打开一个 url，但我收到以下错误消息：未捕获的类型错误：对象 [对象对象] 没有方法“对话框”。下面是我的代码。

```
function()
{
   var id = $("#grid").jqGrid('getGridParam','selrow'), 
  data={};
  if(id) 
  {
       data = {assetID:id};
  }
   else 
  {
     alert('Please select a row to edit');
     return;
  } 
   var ajaxDialog = $('<div id="ajax-Dialog" style="display:hidden" title="New Work Order"></div>').appendTo('body');
   ajaxDialog.load('forms/mwoForm.php',
       data,
       function(response, status)
       {
           ajaxDialog.dialog(
           {
               width: 'auto',
               modal:true,
               open: function(ev, ui)
               {
                  $(".ui-dialog").css('font-size','0.9em');
               },
               close: function(e,ui) 
               {
                   ajaxDialog.remove();
               }
           });
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:15:23.173

我已经多次看到这个问题，它通常与两次引用 jQuery 相关联。

这个线程可以给出更多解释：你见过这个解决方案吗： [Uncaught TypeError: Object [object Object] has no method 'dialog'](https://stackoverflow.com/questions/8786104/uncaught-typeerror-object-object-object-has-no-method-dialog)

编辑：对话框是一个小部件，确实需要包括在内：

```
 <script type="text/javascript" src="jquery.ui.dialog.js"></script> 
```

或者如果你想加载 jQuery UI：

```
 <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

看不到您的所有代码，但请确保它已包含在内。

# web2py - 如何根据 web2py 中的多个其他字段创建计算字段？

> ID：15978083
> 
> 赞同：1
> 
> 时间：2013-04-12T18:09:15.687
> 
> 标签：web2py

我的数据库模型中有一个计算字段，如下所示：

```
Field('computed_field', compute=lambda(page): compute_this_field(page)), 
```

我最近发现的是，计算只传递在更新调用期间更改的页面字段。如果我的函数 compute_this_field 需要其他字段来完成其计算，它不会得到它们。

绕过此限制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:19:29.647

问题是，如果您要更新多条记录，并且这些记录在未更新的字段上没有相同的值，则无法为所有更新的记录计算单个计算值——每条记录都需要它自己的计算值，无法在一次更新中处理。如果您希望更新计算值，则应传入计算所需的所有值（即使其中一些没有改变）。一种方法如下：

```
query = db.mytable.id == [some id]
row = db(query).select().first()
row.update(field1=newvalue1)
db(query).update(**row.as_dict()) 
```

上面首先提取单个记录（即`Row`对象），对对象进行更改`Row`，然后将整个`Row`对象（包括所有字段）传递给`.update()`方法。

# jquery - Nivo Slider 仅延迟第一张图像

> ID：15978084
> 
> 赞同：5
> 
> 时间：2013-04-12T18:09:17.193
> 
> 标签：jquery, slider, nivo-slider

有用！！！ [http://jsfiddle.net/jupago/W6CkP/](http://jsfiddle.net/jupago/W6CkP/)

基于此线程：[暂停 Nivo 滑块](https://stackoverflow.com/questions/8135625/pause-nivo-slider)

我能够让它停在第一张图片上。

**这是我的代码。我要停止动画两次，因为我希望它在幻灯片结束后也停止：**

```
$(window).load(function() {
    $('#slider').nivoSlider({
    effect: 'fade', // Specify sets like: 'fold,fade,sliceDown'
    animSpeed: 500, // Slide transition speed
    pauseTime: 5000,
    startSlide: 0, // Set starting Slide (0 index)
    directionNav: true,  // Next & Prev navigation
    controlNav: false, // 1,2,3... navigation
    controlNavThumbs: false, // Use thumbnails for Control Nav
    pauseOnHover: false, // Stop animation while hovering
    manualAdvance: false, // Force manual transitions
    prevText: 'previous', // Prev directionNav text
    nextText: 'next', // Next directionNav text
    randomStart: false, // Start on a random slide
    slideshowEnd: function(){           
          $('#slider').data('nivoslider').stop();
    setTimeout("$('#slider').data('nivoslider').start()",10000);
        }, // Triggers when last slide is shown
    });

    $('#slider').data('nivoslider').stop();
    setTimeout("$('#slider').data('nivoslider').start()",10000);
 }); 
```

* * *

原帖在这里：

我正在使用 NIVO 滑块插件，虽然我让它工作顺利，但我需要第一张图像比其他图像持续更长时间（第一张图像中有文本）。

我在这里创建了一个工作小提琴：[jsfiddle.net/jupago/W6CkP](http://jsfiddle.net/jupago/W6CkP)

这应该可以更容易地理解这个问题。我仍然附上小提琴之前的html代码以供参考：

HTML：

```
<div class="slider-wrapper">
    <div id="slider" class="nivoSlider">
<img src="http://goo.gl/I4c65" />
<img src="http://goo.gl/acxBF"/>
<img src="http://goo.gl/GBzYF"/>
<img src="http://goo.gl/BC2EA" />
<img src="http://goo.gl/9Sd69" />
<img src="http://goo.gl/qOaZl"/>
<img src="http://goo.gl/btswq" />
    </div>
</div> 
```

JS 尼沃：

```
 $('#slider').nivoSlider({
    effect: 'fade', // Specify sets like: 'fold,fade,sliceDown'
    animSpeed: 500, // Slide transition speed
    pauseTime: 5000, // How long each slide will show
    startSlide: 0, // Set starting Slide (0 index)
    directionNav: true,  // Next & Prev navigation
    controlNav: false, // 1,2,3... navigation
    controlNavThumbs: false, // Use thumbnails for Control Nav
    pauseOnHover: false, // Stop animation while hovering
    manualAdvance: false, // Force manual transitions
    prevText: 'next', // Prev directionNav text
    nextText: 'previous;', // Next directionNav text
    randomStart: false, // Start on a random slide
    beforeChange: function(){}, // Triggers before a slide transition
    afterChange: function(){}, // Triggers after a slide transition
    slideshowEnd: function(){}, // Triggers after all slides have been shown
    lastSlide: function(){}, // Triggers when last slide is shown
    afterLoad: function(){} // Triggers when slider has loaded
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:26:09.920

我没有尝试过，所以我不能保证它会起作用，但您可以尝试的其中一件事是实际上将 设置`pauseTime`为函数而不是常量，`5000`. 您将确定您在哪个图像上，然后，如果它是所需的图像，您会将时间设置为类似`8000`，否则将其设置为`5000`。

重申一下：我没有对此进行测试，也不能保证它会起作用。但是，如果确实如此，它将为您提供大量的额外灵活性。

如果您想尝试实现此功能，您将使用以下代码：

```
...
pauseTime: function() {
    if ($("#slider").data("nivo:vars").currentSlide == 0) {
        return 8000;
    }
    return 5000;
},
... 
```

或者，如果这在 中不起作用`pauseTime`，那么我会尝试将几乎相同的东西放入其他`beforeChange`选项中，如下所示：

```
...
beforeChange: function() {
    if ($("#slider").data("nivo:vars").currentSlide == 0) {
        $("#slider").delay(3000);
    }
    return;
},
... 
```

**重要提示：**您实际上应该将`....currentSlide == 0)`上面示例中的 替换为 Nivo Slider`startSlide`选项的访问器，特别是如果您打算更改滑块的起始索引。我不记得访问器是什么，但我会想象它看起来像：

```
....currentSlide == settings.startSlide) 
```

`settings`Nivo 使用的设置变量的名称在哪里。

**更新**

根据您在评论中提到的错误，我的下一个建议是您再次尝试相同的两种解决方案，但这次将替换`setting.startSlide`为`0`. 如果这不起作用（尽管它应该），那么我们需要回到绘图板上。如果它确实有效，请尝试将 替换`0`为`this.startSlide`。让我知道这是怎么回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T10:55:29.033

我已经做到了并且工作正常：

在您的 HTML 页面更改中：

```
$(window).load(function() {  
     $('#slider').nivoSlider({... 
```

经过

```
$( document ).ready(function() {
    $('#slider').nivoSlider({... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:22:53.837

你可以尝试这样的事情：

```
 $(window).load(function() {
   var waited = false;
   $('#slider').nivoSlider({
    //...
    beforeChange: function(){
        if(!waited && ($('#slider').data("nivo:vars").currentSlide == 0)) { //first slide
            //wait a little longer
            $('#slider').data('nivoslider').stop();
            setTimeout(function(){
                 waited = true;
                 $('#slider').data('nivoslider').start();
            }, 2000); //2 seconds
        } else {
            waited = false;
        }
    },
    //...
    });
}); 
```

**编辑：**我不知道 settimeout 是否真的有必要，也许只`return false`会这样做。

```
 $(window).load(function() {
   var waited = false;
   $('#slider').nivoSlider({
    //...
    beforeChange: function(){
        if(!waited && ($('#slider').data("nivo:vars").currentSlide == 0)) { //first slide
            //wait a little longer
            return false;
        } else {
            waited = false;
        }
    },
    //...
    });
}); 
```

# jquery - 使用 jQuery 删除标签

> ID：15978086
> 
> 赞同：0
> 
> 时间：2013-04-12T18:09:24.263
> 
> 标签：jquery

我已经尝试过各种版本的“unwrap”，但我一直觉得 unwrap 不是一个函数。我如何在这里放弃 b 标签？

```
<div id="top_left">
    <font size="3">
       <b>test</b>
    </font>
</div> 
```

我试过了

```
jQuery("#top_left b").unwrap(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:15:34.333

一个非常简单的方法`.unwrap()`是：

```
$('#top_left font').html($('#top_left font').text()); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/MJpXU/)**

正如一些评论者指出的那样，`<font>`很久以前就被弃用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:14:11.493

问题是“测试”不是一个元素，而是一个文本节点。

假设您的真实 HTML 可能更复杂，即可能有很多`b`元素，并且某些文本不在`b`元素中，您应该这样做

```
$('#top_left b').replaceWith(function(){
  return $('<span>', {text:$(this).text()});
}); 
```

[演示](http://jsbin.com/etuhif/1/edit)（点击“用JS运行”）

`span`但通常情况下，你会从一个给它的类开始处理这种情况，`font-weight:bold`然后只是改变它的类。`b`, `i`, `font`, 和类似的元素在今天已经很少用了，它们使所有的风格变化变得更加沉重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:32:48.837

你不想`unwrap`html 标签而是它的内容

您可以为此使用以下内容

```
$('#top_left b').contents().unwrap(); 
```

[JS 小提琴链接](http://jsfiddle.net/rahularyansharma/dHxKW/13/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:14:03.100

```
var b = document.getElement... // Get your b tag
b.outerHTML = b.innerHTML; 
```

这可能不需要使用 jQuery 就可以工作。如我错了请纠正我。

# azure - 如何实现 Azure 移动服务表的内联编辑（Edit）。如何处理错误处理

> ID：15978090
> 
> 赞同：1
> 
> 时间：2013-04-12T18:10:10.510
> 
> 标签：azure, jqgrid, jqgrid-inlinenav

我正在将 jqGrid ( `inlineNav`) 与来自 azure 服务的数据一起使用，并且有兴趣了解使用 azure 移动服务表进行内联编辑和错误处理。

请分享想法。

**代码更新1**：基于Oleg建议的使用方式和机制`ondblClickRow`的`Enter`代码更新`Escape`

```
$("#list4").jqGrid({
    url: myTableURL,
    datatype: "json",
    height: "auto",
    colNames: ['RowNo', 'RouteId', 'Area'],
    colModel: [
        { name: 'id', width: 70, editable: false },
        { name: 'RouteId', width: 70 },
        { name: 'Area', width: 150 }}
    ],
    cmTemplate: { editable: true, editrules: { required: true} },
    rowList: [10, 20, 30],
    rowNum: 10,
    sortname: "id",
    prmNames: { search: null, nd: null },
    ondblClickRow: function (rowid) {
        var $self = $(this);

        $self.jqGrid("editRow", rowid, {
            mtype: "PATCH",
            keys: true,
            url: myTableURL + "/" +
                $.jgrid.stripPref($self.jqGrid("getGridParam", "idPrefix"), rowid)
        });
    },
    ajaxGridOptions: {
        contentType: "application/json",
        headers: {
            "X-ZUMO-APPLICATION": "myKey"
        }
    },
    serializeGridData: function (postData) {
        if (postData.sidx) {
            return {
                $top: postData.rows,
                $skip: (parseInt(postData.page, 10) - 1) * postData.rows,
                $orderby: postData.sidx + " " + postData.sord,
                $inlinecount: "allpages"
            };
        } else {
            return {
                $top: postData.rows,
                $skip: (parseInt(postData.page, 10) - 1) * postData.rows,
                $inlinecount: "allpages"
            };
        }
    },
    serializeRowData: function (postData) {
        var dataToSend = $.extend(true, {}, postData);
        if (dataToSend.hasOwnProperty("oper")) {
            delete dataToSend.oper;
        }
        if (dataToSend.hasOwnProperty("id")) {
            delete dataToSend.id;
        }
        return JSON.stringify(dataToSend);
    },
    beforeProcessing: function (data, textStatus, jqXHR) {
        var rows = parseInt($(this).jqGrid("getGridParam", "rowNum"), 10);
        data.total = Math.ceil(data.count / rows);
    },
    jsonReader: {
        repeatitems: false,
        root: "results",
        records: "count"
    },
    loadError: function (jqXHR, textStatus, errorThrown) {
        alert('HTTP status code: ' + jqXHR.status + '\n' +
            'textStatus: ' + textStatus + '\n' +
            'errorThrown: ' + errorThrown);
        alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
    },
    pager: '#pager1',
    viewrecords: true,
    caption: "Schedule Data",
    gridview: true,
    autoencode: true
}); 
```

内联编辑和服务器端分页的组合代码：

```
 var $grid = $("#list4"),
azureHeaders = { "X-ZUMO-APPLICATION": "mykey" },
myTableURL = "https://mohit.azure-mobile.net/tables/Schedules",
inlineNavParams = {
    save: false, // we want to add Save button manually. So we needn't no standard button
    edit: true, add: true, del: true,
    editParams: { mtype: "PATCH" },
    addParams: {
        addRowParams: {
            //mtype: "POST", // default value
            aftersavefunc: function (rowid, response) {
                var rowData = $.parseJSON(response.responseText),
                    newId = rowData.id,
                    $self = $(this),
                    idPrefix = $self.jqGrid("getGridParam", "idPrefix", newId),
                    selrow = $self.jqGrid("getGridParam", "selrow", newId),
                    selArrayRow = $self.jqGrid("getGridParam", "selarrrow", newId),
                    oldId = $.jgrid.stripPref(idPrefix, rowid),
                    dataIndex = $self.jqGrid("getGridParam", "_index", newId),
                    i;
                // update id in the _index
                if (dataIndex != null && dataIndex[oldId] !== undefined) {
                    dataIndex[newId] = dataIndex[oldId];
                    delete dataIndex[oldId];
                }
                // update id attribute in <tr>
                $("#" + $.jgrid.jqID(rowid)).attr("id", idPrefix + newId);
                // update id of selected row
                if (selrow === rowid) {
                    $self.jqGrid("setGridParam", { selrow: idPrefix + newId });
                }
                // update id in selarrrow array
                // in case of usage multiselect:true option
                if ($.isArray(selArrayRow)) {
                    i = $.inArray(rowid, selArrayRow);
                    if (i >= 0) {
                        selArrayRow[i] = idPrefix + newId;
                    }
                }
                // the next line is required if we use ajaxRowOptions: { async: true }
                $self.jqGrid("showAddEditButtons");
            }
        }
    }
};

// set common options which we want to use in inline editing
                  $.extend(true, $.jgrid.inlineEdit, {
keys: true,
afterrestorefunc: function () {
    $(this).jqGrid("showAddEditButtons");
},
aftersavefunc: function () {
    $(this).jqGrid("showAddEditButtons");
},
                });

               $grid.jqGrid({
colNames: ['RouteId', 'Area'],
        colModel: [
                      { name: 'RouteId', index: 'RouteId', width: 70 },
                      { name: 'Area', index: 'Area', width: 150 }
                  ],
        cmTemplate: { editable: true, editrules: { required: true} },
// the parameters below are needed to load the grid data from the server
// we use loadonce: true option below. One can use server side pading instead.
// see http://stackoverflow.com/a/15979809/315935 for the changes
url: myTableURL,
rownumbers: true,
datatype: "json",
rowNum: 10,
rowList: [10, 20, 30],
prmNames: {search: null, nd: null, sort: null, rows: null},
ajaxGridOptions: { contentType: "application/json", headers: azureHeaders },
                 // jsonReader: {
               //     repeatitems: false,
                   //     root: function (obj) { return obj; }
                   // },
                  jsonReader: {
            repeatitems: false,
            root: "results",
            records: "count"
        },
loadError: function (jqXHR, textStatus, errorThrown) {
            alert('HTTP status code: ' + jqXHR.status + '\n' +
                'textStatus: ' + textStatus + '\n' +
                'errorThrown: ' + errorThrown);
            alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
        },
gridview: true,
autoencode: true,
height: "auto",
                   // we implement additionally inline editing on double-click.
                  // it's optional step in case of usage inlineNav
                ondblClickRow: function (rowid) {
    var $self = $(this);

    $self.jqGrid("editRow", rowid, {
        mtype: "PATCH",
        keys: true,
        url: myTableURL + "/" +
            $.jgrid.stripPref($self.jqGrid("getGridParam", "idPrefix"), rowid)
    });
},
                     // next options are important for inline editing
                     ajaxRowOptions: { contentType: "application/json", headers: azureHeaders },
editurl: myTableURL,
serializeRowData: function (postData) {
            var dataToSend = $.extend(true, {}, postData);
            if (dataToSend.hasOwnProperty("oper")) {
                delete dataToSend.oper;
            }
            if (dataToSend.hasOwnProperty("id")) {
                delete dataToSend.id;
            }
            return JSON.stringify(dataToSend);
        },

serializeGridData: function (postData) {
    if (postData.sidx) {
        return {
            $top: postData.rows,
            $skip: (parseInt(postData.page, 10) - 1) * postData.rows,
            $orderby: postData.sidx + " " + postData.sord,
            $inlinecount: "allpages"
        };
    } else {
        return {
            $top: postData.rows,
            $skip: (parseInt(postData.page, 10) - 1) * postData.rows,
            $inlinecount: "allpages"
        };
    }
},

beforeProcessing: function (data, textStatus, jqXHR) {
            var rows = parseInt($(this).jqGrid("getGridParam", "rowNum"), 10);
            data.total = Math.ceil(data.count/rows);
        },

viewrecords: true,
rownumbers: true,
height: "auto",
pager: "#pager1",
caption: "Windows Azure Mobile Services REST API"
           }).jqGrid("navGrid", "#pager1", { edit: false, add: false, del: false, search: false });

             $grid.jqGrid("inlineNav", "#pager1", inlineNavParams);

                $grid.jqGrid("navButtonAdd", "#pager1", {
caption: $.jgrid.nav.savetext || "",
title: $.jgrid.nav.savetitle || "Save row",
buttonicon: "ui-icon-disk",
id: $grid[0].id + "_ilsave",
onClickButton: function () {
    var $self = $(this),
        gridIdSelector = $.jgrid.jqID(this.id),
        savedRow = $self.jqGrid("getGridParam", "savedRow"),
        prmNames = $self.jqGrid("getGridParam", "prmNames"),
        editUrl = $self.jqGrid("getGridParam", "editurl"),
        rowid = savedRow != null ? savedRow[0].id : "",
        id = $.jgrid.stripPref($self.jqGrid("getGridParam", "idPrefix"), rowid),
        tmpParams = {};

    if (rowid != null) {
        if ($("#" + $.jgrid.jqID(rowid), "#" + gridIdSelector).hasClass("jqgrid-new-row")) {
            if (!inlineNavParams.addParams.addRowParams.extraparam) {
                inlineNavParams.addParams.addRowParams.extraparam = {};
            }
            inlineNavParams.addParams.addRowParams.extraparam[prmNames.oper] = prmNames.addoper;
            tmpParams = inlineNavParams.addParams.addRowParams;
        } else {
            if (!inlineNavParams.editParams.extraparam) {
                inlineNavParams.editParams.extraparam = {};
            }
            inlineNavParams.editParams.extraparam[prmNames.oper] = prmNames.editoper;
            inlineNavParams.editParams.url = editUrl + "/" + id;
            tmpParams = inlineNavParams.editParams;
        }
        if ($self.jqGrid("saveRow", rowid, tmpParams)) {
            $self.jqGrid("showAddEditButtons");
        }
    } else {
        $.jgrid.viewModal("#alertmod", {gbox: "#gbox_" + gridIdSelector, jqm: true});
        $("#jqg_alrt").focus();
    }
}
                });
                 $("#" + $grid[0].id + "_ilsave").addClass("ui-state-disabled"); 
```

代码更新 3：

```
 var $grid = $("#list4");
    var myTableURL = 'https://mohit.azure-mobile.net/tables/Schedules';
    var azureHeaders = { "X-ZUMO-APPLICATION": ", mykey" };

    $grid.jqGrid({
        url: myTableURL,
        editurl: myTableURL,
        datatype: "json",
        height: "auto",
        colNames: ['RowNo', 'RouteId', 'Area', 'BusStop', 'Seater', 'Lat', 'Long', 'Timing', 'FromTo', 'KeyPoint'],
        colModel: [
                      { name: 'id', index: 'id', width: 70, editable: false },
                      { name: 'RouteId', index: 'RouteId', width: 70 }
                                            ],
        cmTemplate: { editable: true, editrules: { required: true} },
        rowList: [10, 20, 30],
        rowNum: 10,
        sortname: "id",
        prmNames: { search: null, nd: null},
        ondblClickRow: function (rowid) {
            var $self = $(this);

            $self.jqGrid("editRow", rowid, {
                mtype: "PATCH",
                keys: true,
                url: myTableURL + "/" + $.jgrid.stripPref($self.jqGrid("getGridParam", "idPrefix"), rowid)
            });
        },

        ajaxGridOptions: { contentType: "application/json", headers: azureHeaders },
        ajaxRowOptions: { contentType: "application/json", headers: azureHeaders },

        serializeGridData: function (postData) {
            if (postData.sidx) {
                return {
                    $top: postData.rows,
                    $skip: (parseInt(postData.page, 10) - 1) * postData.rows,
                    $orderby: postData.sidx + " " + postData.sord,
                    $inlinecount: "allpages"
                };
            }
            else {
                return {
                    $top: postData.rows,
                    $skip: (parseInt(postData.page, 10) - 1) * postData.rows,
                    $inlinecount: "allpages"
                };
            }
        },
        serializeRowData: function (postData) {
            var dataToSend = $.extend(true, {}, postData);
            if (dataToSend.hasOwnProperty("oper")) {
                delete dataToSend.oper;
            }
            if (dataToSend.hasOwnProperty("id")) {
                delete dataToSend.id;
            }
            return JSON.stringify(dataToSend);
        },
        beforeProcessing: function (data, textStatus, jqXHR) {
            var rows = parseInt($(this).jqGrid("getGridParam", "rowNum"), 10);
            data.total = Math.ceil(data.count / rows);
        },
        jsonReader: {
            repeatitems: false,
            root: "results",
            records: "count"
        },
        loadError: function (jqXHR, textStatus, errorThrown) {
            alert('HTTP status code: ' + jqXHR.status + '\n' +
                                                                    'textStatus: ' + textStatus + '\n' +
                                                                    'errorThrown: ' + errorThrown);
            alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
        },
        pager: '#pager1',
        viewrecords: true,
        caption: "Bus Schedule Data",
        gridview: true,
        autoencode: true
    });

inlineNavParams = {
    save: false, // we want to add Save button manually. So we needn't no standard button
    edit: true, add: true, del: true,
    editParams: { mtype: "PATCH" },
    addParams: {
        addRowParams: {
                            aftersavefunc: function (rowid, response) {
                var rowData = $.parseJSON(response.responseText),
                    newId = rowData.id,
                    $self = $(this),
                    idPrefix = $self.jqGrid("getGridParam", "idPrefix", newId),
                    selrow = $self.jqGrid("getGridParam", "selrow", newId),
                    selArrayRow = $self.jqGrid("getGridParam", "selarrrow", newId),
                    oldId = $.jgrid.stripPref(idPrefix, rowid),
                    dataIndex = $self.jqGrid("getGridParam", "_index", newId),
                    i;
                                    if (dataIndex != null && dataIndex[oldId] !== undefined) {
                    dataIndex[newId] = dataIndex[oldId];
                    delete dataIndex[oldId];
                }
                                    $("#" + $.jgrid.jqID(rowid)).attr("id", idPrefix + newId);
                                    if (selrow === rowid) {
                    $self.jqGrid("setGridParam", { selrow: idPrefix + newId });
                }
                                    if ($.isArray(selArrayRow)) {
                    i = $.inArray(rowid, selArrayRow);
                    if (i >= 0) {
                        selArrayRow[i] = idPrefix + newId;
                    }
                }
                                    $self.jqGrid("showAddEditButtons");
            }
        }
    }
};

    $grid.jqGrid("navGrid", "#pager1", { edit: false, add: false, del: false, search: false });
    $grid.jqGrid("inlineNav", "#pager1", inlineNavParams);

    $grid.jqGrid("navButtonAdd", "#pager1", {
        caption: $.jgrid.nav.savetext || "",
        title: $.jgrid.nav.savetitle || "Save row",
        buttonicon: "ui-icon-disk",
        id: $grid[0].id + "_ilsave",
        onClickButton: function () {
            var $self = $(this),
                gridIdSelector = $.jgrid.jqID(this.id),
                savedRow = $self.jqGrid("getGridParam", "savedRow"),
                prmNames = $self.jqGrid("getGridParam", "prmNames"),
                editUrl = $self.jqGrid("getGridParam", "editurl"),
                rowid = savedRow != null ? savedRow[0].id : "",
                id = $.jgrid.stripPref($self.jqGrid("getGridParam", "idPrefix"), rowid),
                tmpParams = {};

        if (rowid != null) {
            if ($("#" + $.jgrid.jqID(rowid), "#" + gridIdSelector).hasClass("jqgrid-new-row")) {
                if (!inlineNavParams.addParams.addRowParams.extraparam) {
                    inlineNavParams.addParams.addRowParams.extraparam = {};
                }
                inlineNavParams.addParams.addRowParams.extraparam[prmNames.oper] = prmNames.addoper;
                tmpParams = inlineNavParams.addParams.addRowParams;
            } else {
                if (!inlineNavParams.editParams.extraparam) {
                    inlineNavParams.editParams.extraparam = {};
                }
                inlineNavParams.editParams.extraparam[prmNames.oper] = prmNames.editoper;
                inlineNavParams.editParams.url = editUrl + "/" + id;
                tmpParams = inlineNavParams.editParams;
            }
            if ($self.jqGrid("saveRow", rowid, tmpParams)) {
                $self.jqGrid("showAddEditButtons");
            }
        } else {
            $.jgrid.viewModal("#alertmod", {gbox: "#gbox_" + gridIdSelector, jqm: true});
            $("#jqg_alrt").focus();
        }
    }
});

    $.extend(true, $.jgrid.inlineEdit, {
        keys: true,
        afterrestorefunc: function () {
            $(this).jqGrid("showAddEditButtons");
        },
        aftersavefunc: function () {
            $(this).jqGrid("showAddEditButtons");
        },
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:34:49.623

jqGrid 的内联编辑模式提供了实现编辑所需的三个基本方法：[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)、[restoreRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#restorerow)和[saveRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)。[addRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#addrow)方法添加空行，然后在内部`editRow`用于开始编辑。如果其中一种使用`keys: true`选项，`editRow`则不需要`saveRow`显式调用。`editRow`如果用户`Enter`在编辑字段中按下键，则在内部执行此操作。用户可以使用`Esc`键取消编辑。在 case`editRow`内部调用而不是.`restoreRow``saveRow`

jqGrid 稍后介绍了`formatter: "actions"`addRow[和](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#addrow)inlineNav [，](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)如果需要一些按钮来开始编辑和保存数据，它们会稍微简化内联编辑的使用。`formatter: "actions"`inlineNav和[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)的使用最多的问题在于参数的正确使用，因为这些方法为您提供了对参数使用的较少控制。此外`inlineNav`还有许多仅在 4.4.5 版中修复的错误。

对不起，这么长的普通文字，但我只想解释为什么我想先回答你的问题*而不*使用，`inlineNav`然后提供使用该方法的解决方案。

使用内联编辑编辑现有行的最简单方法如下。一开始就`editRow`在`ondblClickRow`. 用户可以按 键`Enter`将编辑行保存在服务器上，也可以按 键`Esc`放弃更改。对应的代码大概如下：

```
var azureHeaders = { "X-ZUMO-APPLICATION": "myApplicationKey" },
    myTableURL = "https://oleg.azure-mobile.net/tables/Products";

$("#grid").jqGrid({
    url: myTableURL,
    datatype: "json",
    prmNames: {search: null, nd: null, sort: null, rows: null},
    ajaxGridOptions: { contentType: "application/json", headers: azureHeaders },
    jsonReader: { repeatitems: false, root: function (obj) { return obj; } },
    ondblClickRow: function (rowid) {
        var $self = $(this);

        $self.jqGrid("editRow", rowid, {
            mtype: "PATCH",
            keys: true,
            url: myTableURL + "/" +
                $.jgrid.stripPref($self.jqGrid("getGridParam", "idPrefix"), rowid)
        });
    },
    ajaxRowOptions: { contentType: "application/json", headers: azureHeaders },
    serializeRowData: function (postData) {
        var dataToSend = $.extend(true, {}, postData);
        if (dataToSend.hasOwnProperty("oper")) {
            delete dataToSend.oper;
        }
        if (dataToSend.hasOwnProperty("id")) {
            delete dataToSend.id;
        }
        return JSON.stringify(dataToSend);
    },
    gridview: true,
    loadonce: true,
    autoencode: true,
    ... // other parameters of jqGrid
}); 
```

（为了使代码更容易，我删除了加载数据或保存编辑结果期间的任何错误处理）

上面的例子有效。用户可以*查看*数据、选择行、进行本地分页等。另一方面，用户可以双击行进行编辑。重要的是要了解设计内联编辑允许*在同一侧编辑多行*。用户可以双击一行，进行一些修改，然后双击另一行，进行一些其他修改。最后，用户可以通过按`Enter`或`Esc`键来完成对每一行的编辑，以保存或放弃该行的当前更改。

在开始编辑每一行时，我们设置`url`的选项`editRow`将与网格*行相关联。*如果用户`Enter`按键，该方法在`editRow`内部调用`saveRow` *相同的参数*。

在您了解内联编辑的工作原理后，我可以解释在使用情况下所有工作原理`inlineNav`。如果您检查`inlineNav`（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.inlinedit.js#L448-L626)）的代码，那么您将看到它主要使用方法[navButtonAdd](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_buttons)将自定义按钮添加到导航栏。在回调内部，`onClickButton`它调用`addRow`,或. 4.4.5 版本修复了许多错误（请参阅[此处](http://www.trirand.com/blog/?page_id=393/bugs/cancel-button-of-inlinenav-uses-callback-of-edit-options-on-canceling-add-operation/#p28553)、[此处](http://www.trirand.com/blog/?page_id=393/bugs/jgrid-inlineedit-be-changed-by-restorerow/#p28552)、[此处](http://www.trirand.com/blog/?page_id=393/bugs/resetting-of-inlinenav-toolbar-buttons-required-in-case-of-saving-error/#p28528)、[此处](http://www.trirand.com/blog/?page_id=393/bugs/class-jqgrid-new-row-will-be-added-by-addrow-but-never-removed/#p28527)和[此处](http://www.trirand.com/blog/?page_id=393/bugs/save-button-of-inlinenav-uses-editparams-instead-of-addparams-addrowparams-on-add-new-row/#p28525)），但仍不能解决并非所有现有问题。例如，如果您允许同时编辑多行（如果您使用当前未记录的选项`editRow``saveRow``restoreRow``inlineNav``restoreAfterSelect: false``inlineNav`) 然后由于使用`$t.p.savedRow[0].id`表达式来获取 rowid，jqGrid 的代码可以使用*错误的 rowid*来保存或丢弃行。所以**你不应该`restoreAfterSelect: false`**在当前版本的 jqGrid 中使用选项。

在我看来，主要问题是`inlineNav`在初始化行编辑期间使用的保存或丢弃选项不同。我的意思是`inlineNav`call `saveRow`or `restoreRow`*not 使用与 call of 相同的选项`editRow`。例如，如果更改了 of 的`url`属性，`editRow`以便使用`url`带有of 行的 RESTfull，则如果用户单击“保存”按钮，则不会使用相同的选项`id`调用 of 。`saveRow`

此外，如果用户单击 ，则不存在**可用于修改当前选项（`url`主要修改）**`saveRow`的回调。Nether目前`inlineNav`也`saveRow`没有（在 jqGrid 4.4.5 或更低版本中）这样的回调。

解决我看到的问题的唯一方法是：

1.  从不使用`restoreAfterSelect: false`选项
2.  使用[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)`save: false`的选项
3.  添加自定义“保存”按钮，看起来像相应的按钮，并在调用*之前*`inlineNav`修改`url`手动选项。换句话说，应该重新实现 的“保存”按钮。*`saveRow``inlineNav`*

 *您可以在下面找到相应实现的示例。我使用`loadonce: true`了选项。如果一个人有大表并且更喜欢服务器端分页，那么需要对一些参数进行更改，这与[我之前](https://stackoverflow.com/a/15979809/315935)对您的问题的回答相对应。此外，我删除了错误处理以稍微简化代码：

```
var $grid = $("#list"),
    azureHeaders = { "X-ZUMO-APPLICATION": "myApplicationKey" },
    myTableURL = "https://oleg.azure-mobile.net/tables/Products",
    inlineNavParams = {
        save: false, // we want to add Save button manually. So we needn't no standard button
        editParams: { mtype: "PATCH" },
        addParams: {
            addRowParams: {
                //mtype: "POST", // default value
                aftersavefunc: function (rowid, response) {
                    var rowData = $.parseJSON(response.responseText),
                        newId = rowData.id,
                        $self = $(this),
                        p = $self.jqGrid("getGridParam"), // get all parameters as object
                        idPrefix = p.idPrefix,
                        oldId = $.jgrid.stripPref(idPrefix, rowid),
                        selrow = p.selrow,
                        selArrayRow = p.selarrrow,
                        dataIndex = p._index,
                        keyIndex = p.keyIndex,
                        colModel = p.colModel,
                        localRowData = $self.jqGrid("getLocalRow", rowid),
                        i;
                    // update id in the _index
                    if (dataIndex != null && dataIndex[oldId] !== undefined) {
                        dataIndex[newId] = dataIndex[oldId];
                        delete dataIndex[oldId];
                    }
                    // update id value in the data
                    if (localRowData.hasOwnProperty("_id_")) {
                        localRowData._id_ = newId;
                    }
                    if (keyIndex !== false) {
                        for (i = 0; i < colModel.length; i++) {
                            if (colModel[i].key) {
                                if (localRowData.hasOwnProperty(colModel[i].name)) {
                                    // update the value of the column
                                    localRowData[colModel[i].name] = idPrefix + newId;
                                    $self.jqGrid("setCell", rowid, i, newId);
                                }
                                break; // one can have only one column with key:true
                            }
                        }
                    }

                    // update id attribute in <tr>
                    $("#" + $.jgrid.jqID(rowid)).attr("id", idPrefix + newId);
                    // update id of selected row
                    if (selrow === rowid) {
                        $self.jqGrid("setGridParam", { selrow: idPrefix + newId });
                    }

                    // update id in selarrrow array
                    // in case of usage multiselect:true option
                    if ($.isArray(selArrayRow)) {
                        i = $.inArray(rowid, selArrayRow);
                        if (i >= 0) {
                            selArrayRow[i] = idPrefix + newId;
                        }
                    }
                    // the next line is required if we use ajaxRowOptions: { async: true }
                    $self.jqGrid("showAddEditButtons");

                }
            }
        }
    };

// set common options which we want to use in inline editing
$.extend(true, $.jgrid.inlineEdit, {
    keys: true,
    afterrestorefunc: function () {
        $(this).jqGrid("showAddEditButtons");
    },
    aftersavefunc: function () {
        $(this).jqGrid("showAddEditButtons");
    },
});

$grid.jqGrid({
    colModel: [
        { name: "id", key: true, width: 100 }, // optional column
        { name: "Name", width: 450, editable: true }
    ],
    // the parameters below are needed to load the grid data from the server
    // we use loadonce: true option below. One can use server side pading instead.
    // see https://stackoverflow.com/a/15979809/315935 for the changes
    url: myTableURL,
    datatype: "json",
    prmNames: {search: null, nd: null, sort: null, rows: null},
    ajaxGridOptions: { contentType: "application/json", headers: azureHeaders },
    jsonReader: {
        repeatitems: false,
        root: function (obj) { return obj; }
    },
    gridview: true,
    autoencode: true,
    loadonce: true,
    // we implement additionally inline editing on double-click.
    // it's optional step in case of usage inlineNav
    ondblClickRow: function (rowid) {
        var $self = $(this);

        $self.jqGrid("editRow", rowid, {
            mtype: "PATCH",
            keys: true,
            url: myTableURL + "/" +
                $.jgrid.stripPref($self.jqGrid("getGridParam", "idPrefix"), rowid)
        });
    },
    // next options are important for inline editing
    ajaxRowOptions: { contentType: "application/json", headers: azureHeaders },
    editurl: myTableURL,
    serializeRowData: function (postData) {
        var dataToSend = $.extend(true, {}, postData); // make copy of post data
        if (dataToSend.hasOwnProperty("oper")) {
            delete dataToSend.oper;
        }
        if (dataToSend.hasOwnProperty("id")) {
            delete dataToSend.id;
        }
        return JSON.stringify(dataToSend);
    },
    rowNum: 2,
    rowList: [2, 5, 10],
    sortname: "Name",
    sortorder: "desc",
    viewrecords: true,
    rownumbers: true,
    height: "auto",
    pager: "#pager"
    caption: "Windows Azure Mobile Services REST API"
}).jqGrid("navGrid", "#pager", { edit: false, add: false, del: false, search: false });
$grid.jqGrid("inlineNav", "#pager", inlineNavParams);
$grid.jqGrid("navButtonAdd", "#pager", {
    caption: $.jgrid.nav.savetext || "",
    title: $.jgrid.nav.savetitle || "Save row",
    buttonicon: "ui-icon-disk",
    id: $grid[0].id + "_ilsave",
    onClickButton: function () {
        var $self = $(this),
            gridIdSelector = $.jgrid.jqID(this.id),
            savedRow = $self.jqGrid("getGridParam", "savedRow"),
            prmNames = $self.jqGrid("getGridParam", "prmNames"),
            editUrl = $self.jqGrid("getGridParam", "editurl"),
            rowid = savedRow != null ? savedRow[0].id : "",
            id = $.jgrid.stripPref($self.jqGrid("getGridParam", "idPrefix"), rowid),
            tmpParams = {};

        if (rowid != null) {
            if ($("#" + $.jgrid.jqID(rowid), "#" + gridIdSelector).hasClass("jqgrid-new-row")) {
                if (!inlineNavParams.addParams.addRowParams.extraparam) {
                    inlineNavParams.addParams.addRowParams.extraparam = {};
                }
                inlineNavParams.addParams.addRowParams.extraparam[prmNames.oper] = prmNames.addoper;
                tmpParams = inlineNavParams.addParams.addRowParams;
            } else {
                if (!inlineNavParams.editParams.extraparam) {
                    inlineNavParams.editParams.extraparam = {};
                }
                inlineNavParams.editParams.extraparam[prmNames.oper] = prmNames.editoper;
                inlineNavParams.editParams.url = editUrl + "/" + id;
                tmpParams = inlineNavParams.editParams;
            }
            if ($self.jqGrid("saveRow", rowid, tmpParams)) {
                $self.jqGrid("showAddEditButtons");
            }
        } else {
            $.jgrid.viewModal("#alertmod", {gbox: "#gbox_" + gridIdSelector, jqm: true});
            $("#jqg_alrt").focus();
        }
    }
});
$("#" + $grid[0].id + "_ilsave").addClass("ui-state-disabled"); 
```

怎么看，最复杂的就是参数`aftersavefunc`回调的实现。`addRowParams`我计划稍后将我的建议发布到 trirand，它扩展了内联编辑的代码，但简化了`aftersavefunc`回调代码，以便它可以只是

```
aftersavefunc: function (rowid, response) {
    return response.responseText ?
        $.parseJSON(response.responseText).id :
        undefined;
} 
```

`aftersavefunc`如果返回的值的类型不是“未定义” ，则 jqGrid 应在内部执行所有其他操作。*

# knockout.js - 使用击退来绑定 2d 数组更改 - 未捕获的 Observable：缺少密钥

> ID：15978093
> 
> 赞同：0
> 
> 时间：2013-04-12T18:10:20.420
> 
> 标签：knockout.js, knockback.js

我正在尝试使用 knockbackjs (knockoutjs +bonejs)，其中模型是 2d 数组)ie 表，并且 viewModel 使用 foreach 绑定到表 html 标记，因此我将获得一个可观察的表，每次单击一个单元格都会发送整个二维数组到 api。

我一直在看[这个](https://stackoverflow.com/questions/12305655/the-simplest-example-of-knockback-js-working-with-a-restful-webservice-such-as-s)和[那个](http://jszip.org/quickstart-knockback/)例子，我问了一个[问题并得到了这样的问题：](https://stackoverflow.com/questions/15888042/table-is-not-refreshed-with-knockoutjs)

```
 //model
    var GameModel = Backbone.Model.extend({ urlRoot: '/game' });

    //viewmodel
    var GameViewModel = function (game) {

        this.board = kb.observable(game, [
                         [ko.observable(0), ko.observable(0), ko.observable(0)],
                         [ko.observable(0), ko.observable(0), ko.observable(0)],
                         [ko.observable(0), ko.observable(0), ko.observable(0)]
                     ]);
    };

    var model = new GameModel({ id: 1 });
    var gameViewModel = new GameViewModel(model);
    ko.applyBindings(gameViewModel); 
```

但我在以

```
this.board = kb.observable(game, [ 
```

我怎样才能解决这个问题？有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:37:18.083

您需要将对象发送到可观察对象，我想，而您只是通过参数列表发送。

您要么只需要发送数组，要么将其设为对象，例如：

```
this.board = kb.observable(
{
    'game': game,
    'board': [
        [ko.observable(0), ko.observable(0), ko.observable(0)],
        [ko.observable(0), ko.observable(0), ko.observable(0)],
        [ko.observable(0), ko.observable(0), ko.observable(0)]
    ]
}); 
```

# excel - 根据另一列值填充 Excel 中的值

> ID：15978100
> 
> 赞同：1
> 
> 时间：2013-04-12T18:10:39.127
> 
> 标签：excel

我不是最好的技术描述，但请多多包涵。

我面前的任务：

一个大型电子表格，其中有一列需要查看的值，旁边还有一个不同的数字输入。不幸的是，这个数字不仅仅是“价值，虽然接近，但少了 15%”。我需要为我的公式提供一个特定的“查找/替换”命令列表。

例子：

3.02

6.65

1.54

3.02

我需要对其进行格式化，使其显示：

3.02 2.80

6.65 5.60

1.54 1.40

3.02 2.80

我的想法类似于 =if(A1=3.02,2.80,=if(A1=6.65,5.60,=if(A1....

然后我就可以粘贴这个公式并向下拖动整个电子表格。

不幸的是，这没有用，所以我向大家寻求帮助。

请为我节省大量时间，并弄清楚如何让这个电子表格生成它自己的值！

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:16:11.103

我会制作一个特定替换的小查找表：

```
 A     B
1  lookup result
2   3.02   2.8
3   6.65   5.6
4   1.54   1.4
5   3.02   2.8 
```

然后你可以设置一个这样的公式：

```
9  value   result
10  3.02    =VLOOKUP(A10,A$2:B$5,2,FALSE)
11  6.65
12  1.54
13  3.02
14  1.54 
```

您可以将该公式拖到表格的其余部分。

请注意`A$2:B$5`- 如果您的查找表大小不同，则需要更改。

**或者**，为了更符合你所拥有的，试试这样的公式：

```
=if(A1=3.02,2.80,if(A1=6.65,5.60,if(A1.... 
```

我所做的更改是`=`在内部`IF`函数调用之前删除额外的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-09T03:23:36.580

很难猜出你有多少不同的价值。根据您给定的示例数据，`XLOOKUP()`如果您有***Excel-365*** ，则可以使用如下函数。

```
=XLOOKUP(A1,{5.6,2.8,1.4},{5.6,2.8,1.4},"",-1) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/AI4Xr.png)](https://i.stack.imgur.com/AI4Xr.png)

# css - 表格行框-悬停时的阴影发光 (Webkit/Chrome)

> ID：15978101
> 
> 赞同：3
> 
> 时间：2013-04-12T18:10:39.390
> 
> 标签：css, hover, css-tables

在 Chrome 浏览器中，无法`box-shadow`在悬停时设置表格行的样式。当您将 box-shadow 分配给`td`伪类`:first-child`和`:last-child`. （参考：[Table Row Box-Shadow on Hover (Webkit)](https://stackoverflow.com/questions/5972525/table-row-box-shadow-on-hover-webkit)）

我正在尝试`box-shadow`在表格行上使用发光效果。问题是如果没有 h-shadow 或 v-shadow 值，它`box-shadow`也会出现在表格行的中间。

JSfiddle：http: [//jsfiddle.net/2nw4t/25/](http://jsfiddle.net/2nw4t/25/)

```
tr:hover td {
-moz-box-shadow: 0px 0px 16px 0 rgba(0, 0, 0, 0.5);
-webkit-box-shadow: 0px 0px 16px 0 rgba(0, 0, 0, 0.5);
box-shadow: 0px 0px 16px 0 rgba(0, 0, 0, 0.5);
} 
```

这个问题的解决方案是`div`使用 jQuery 定位覆盖，但我想知道是否只能使用 CSS 来完成。

# mysql - 如何在我的 sql 查询中使用条件操作？

> ID：15978114
> 
> 赞同：0
> 
> 时间：2013-04-12T18:11:21.037
> 
> 标签：mysql

![在此处输入图像描述](https://i.stack.imgur.com/U6qbS.jpg)请检查附件：

在这里，我试图找到 targets_value 字段的总和。但如果记录（目标值）是字符串格式，如 2000/3000。我想拆分它们的值并添加自己。

我想使用 sql 查询（在我的示例中）像这样进行增值：500+200+2000+3000+2000+3000 .....等。

我尝试了简单的查询，但无法通过以下查询：

```
SELECT sum(target_value) FROM target 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:52:55.823

试试这个：

```
SELECT
 SUM(
  CASE WHEN LOCATE('/', target_value) > 0 
   THEN
    (SUBSTRING_INDEX(target_value, '/', 1) + SUBSTRING_INDEX(target_value, '/', -1))
   ELSE 
    target_value 
   END
 ) AS `total`
FROM target; 
```

根据您的示例，这给了我 23670

# c - memcpy 额外的起始字符

> ID：15978115
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:11:23.390
> 
> 标签：c, memcpy

我在使用 memcpy 时遇到了一些麻烦，因为当执行 memcpy 操作时，我得到：

"ÍÍWF03-021913.datýýý««««««««þ"

当我应该得到：

“WF03-021913.datýýý«««««««««þ”

我不知道这些领先的“ÍÍ”是从哪里来的。

代码：

注意：lpszFileName = "WF03-021913.dat"

```
typedef struct {
    BYTE  cbRequestType;
    BYTE  cbFileName;   
    char* szFileName;      
} UFTP_GET_FILE_INFO_REQUEST;

BOOL Uftp_BuildFileInfoRequest(PUFTP_REQUEST request, LPCTSTR lpszFileName)
{
    UFTP_GET_FILE_INFO_REQUEST *fileInfo;
    int fileNameLen;

    if (lpszFileName == NULL) {
        ASSERT( 0 );
        return FALSE;
    }

    fileNameLen = strlen( lpszFileName );
    if (fileNameLen == 0)
        return FALSE;

    request->dwRequestSize = sizeof(UFTP_GET_FILE_INFO_REQUEST) - 
                             sizeof(void*) + fileNameLen;
    request->RequestBuffer = malloc( request->dwRequestSize );
    if ( !request->RequestBuffer ) {
        TRACE0("Failed to allocate RequestBuffer");
        return FALSE;
    }

    fileInfo = (UFTP_GET_FILE_INFO_REQUEST*) request->RequestBuffer;
    fileInfo->cbRequestType = UFTP_GET_FILE_INFO;
    fileInfo->cbFileName = fileNameLen;

    memcpy(&fileInfo->szFileName, lpszFileName, fileNameLen);
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:14:33.093

我只是在这里猜测，但我的猜测是它`fileInfo->szFileName`是一个*指针*。这意味着它`&fileInfo->szFileName`是一个*指向指针的指针*，所以你复制到一个完整的其他内存区域。

此外，您不会复制`'\0'`所需的终止字符。`fileNameLen + 1`在分配和复制时都需要这样做。

如果您真的希望它全部在连续内存中，您可能应该将结构更改为以大小为零的字符数组结尾（您的编译器可能不支持，然后使用大小为 1 的数组）并`sizeof(UFTP_GET_FILE_INFO_REQUEST) + fileNameLen + 1`用作要分配的大小. 然后您可以将该数组用作普通字符串数组。

* * *

如果你解决*了这些*问题，你还有*另一个*问题：你没有初始化指针以指向分配的内存。这意味着它将指向一些随机内存。

所有这些错误都会导致*未定义的行为*，我会说你很幸运它没有崩溃。

# jsp - 如何通过 XML JSP 将集合项传递给 bean？

> ID：15978116
> 
> 赞同：1
> 
> 时间：2013-04-12T18:11:25.103
> 
> 标签：jsp, jspx

给定一个具有集合属性的 Java bean 类，有没有办法使用 XML JSP 将集合项传递给该属性？

例如，下面的代码：

```
<jsp:useBean id="myBean"
        class="com.corp.project.MyBean" scope="page">
    <jsp:setProperty name="myBean" 
        property="items" value="first value" />
    <jsp:setProperty name="myBean" 
        property="items" value="second value" />
</jsp:useBean> 
```

MyBean 有一个 Items 集合属性。有没有办法传递多个值以添加到该集合中？

# haskell - Haskell基本阶乘不退出？

> ID：15978118
> 
> 赞同：9
> 
> 时间：2013-04-12T18:11:35.213
> 
> 标签：haskell, factorial

[我正在学习 Haskell，并且在使用本教程](http://learnyouahaskell.com/syntax-in-functions)中的基本阶乘函数时遇到了问题。

基本上，我已经定义了一个阶乘：

```
Prelude> let factorial 0 = 1
Prelude> let factorial n = n * factorial (n - 1) 
```

类型检查：

```
Prelude> :t factorial
factorial :: Num a => a -> a 
```

这是有道理的。但是，此函数的行为不会。`(interactive): out of memory`无论输入是什么，它都会导致。

```
Prelude> factorial 5
(interactive): out of memory 
```

我不得不假设这是一个导致内存不足错误的无限递归调用，但我不确定是什么可能导致它。发生同样的事情`factorial 0`，即使我已明确声明它为 1：

```
Prelude> factorial 0
(interactive): out of memory 
```

现在，这是奇怪的部分：如果我在文件中定义阶乘函数，它工作正常。我创建一个文件`tesths.hs`st：

```
factorial 0 = 1
factorial n = n * factorial (n - 1) 
```

然后，如果我回到 GHCI 并运行`:l tesths.hs`，我可以毫无错误地执行`factorial 5`。

这里发生了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T18:30:04.580

定义了两个函数，而不是一个具有两种情况的函数。在第一次运行时尝试相同的命令`:set -Wall`，您应该会收到名称阴影警告。要解决问题，请尝试

```
let factorial 0 = 1; factorial n = n * factorial (n - 1) 
```

反而。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-12T18:44:19.503

您还可以使用`:{ ... :}`语法提供多行输入：

```
Prelude> :{
Prelude| let factorial 0 = 1
Prelude|     factorial n = n * factorial (n - 1)
Prelude| :}
Prelude> factorial 10
3628800
Prelude> 
```

同样，您可以使用多行模式和缩进`:set +m`：

```
Prelude> :set +m
Prelude> let factorial 0 = 1
Prelude|     factorial n = n * factorial (n - 1)
Prelude| 
Prelude> factorial 10
3628800
Prelude> 
```

注意空行。您可以使用 关闭多行模式`:unset +m`。

有关这些内容的文档，请参阅[GHC 用户指南的第 2.4.3 节，“[将 GHCi 与] 多行输入一起使用”](http://www.haskell.org/ghc/docs/7.6.2/html/users_guide/interactive-evaluation.html#ghci-multiline)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T19:48:21.857

请注意，也有这个漂亮的单线：

```
let factorial n = product [1..n] 
```

# jquery - 如何获取单击 a 标签的 div

> ID：15978127
> 
> 赞同：-2
> 
> 时间：2013-04-12T18:12:00.967
> 
> 标签：jquery

如何获取单击 a 标签的 div 并将其克隆并插入另一个 div。

我只需要知道如何获取父 div 类似这样的父 div

```
 <div class="seven columns offset-by-one">
                            <h1>
                                Joshua F. Schwartz
                            </h1>
                            <h2>
                                Position
                            </h2>
                            <p>
                            venenatis nisl ut lorem ultricies semper.
                            Duis vitae turpis nec tortor dignissim tempor.
                            Phasellus et elit et.
                            <a href="">Read More</a>
                            </p>
                      </div> 
```

这是我的代码基于下面你们的评论非常感谢你们的回应到目前为止很好，但由于某种原因它不起作用。:(

//// Select Link On click Run Function $("#leaderBottom a").on("click", function(event) { ///阻止链接执行 event.preventDefault();

```
 ///insert dark overlay
    $('<div class="overlay"></div>').insertAfter('#leaderTop');
        // show block
      $('.popOut').css('display','block');
      /// Grab the links div

        var $newDiv = $(this).parent('.four').clone();
         $newDiv.appendTo('.popOut');
            return false;

      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:20:10.290

这是你的电话，但我实际上会`.parents()`用来实现你正在尝试的东西（因为你可以提供一个选择器）：

```
$('a').click(function() {
    var $cloned = $(this).parents('.seven').clone();
    $cloned.appendTo('.clone-wrapper');
    return false;
}); 
```

[http://jsfiddle.net/MXHS6/](http://jsfiddle.net/MXHS6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:15:58.790

您可以使用[parent](http://api.jquery.com/parent/)找到该 div。

$("a").parent(".seven .columns .offset-by-one");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:17:07.863

这应该工作

```
<div class="seven columns offset-by-one">
    <h1>
        Joshua F. Schwartz
    </h1>
    <h2>
        Position
    </h2>
    <p>
       venenatis nisl ut lorem ultricies semper.
       Duis vitae turpis nec tortor dignissim tempor.
       Phasellus et elit et.
       <a class='ReadMore' href="">Read More</a>
    </p>
</div>

$(".ReadMore").bind("click", function () {
    var newDiv = $(this).parent().clone();
}); 
```

# jquery-ui - 如何动态创建 JQuery-UI 小部件

> ID：15978128
> 
> 赞同：0
> 
> 时间：2013-04-12T18:12:06.250
> 
> 标签：jquery-ui, jquery

我知道`.on`当元素上发生某些事件时，我可以使用将函数绑定到 DOM 元素。

我一直在使用 JQuery-ui，我想在页面上加载不同的 JQuery-ui 元素后创建它们。例如，在页面上加载按钮时创建一个按钮：

```
$(document.body).on('load', '.my-button', function(){
    $(this).button()
}); 
```

但是，这不起作用（实际上，处理程序永远不会到达）。

在 DOM 中加载时如何创建 JQuery-ui 小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T18:42:49.480

创建元素时，jQuery 不会触发任何事件。相反，使用[watch 插件](http://darcyclarke.me/dev/watch/)`button()`并从那里运行你的 s。

# c - 使用 Postgres 时 C 中的链接器错误

> ID：15978130
> 
> 赞同：0
> 
> 时间：2013-04-12T18:12:10.767
> 
> 标签：c, postgresql, linker, linker-errors

我有以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <libpq-fe.h>

int main(int argc, char* argv[])
{
//Start connection
PGconn* connection = PQconnectdb("host=webcourse.cs.nuim.ie dbname=cs621  sslmode=require user=ggales password=1234");

if (PQstatus(connection) ==CONNECTION_BAD)
{
printf("Connection error\n");
PQfinish(connection);
return -1; //Execution of the program will stop here
}
printf("Connection ok\n");
//End connection
PQfinish(connection);
printf("Disconnected\n");

return 0;
} 
```

当我运行它时，我收到以下错误：

```
/tmp/cc73kO0N.o: In function `main':
main.c:(.text+0x15): undefined reference to `PQconnectdb'
main.c:(.text+0x25): undefined reference to `PQstatus'
main.c:(.text+0x40): undefined reference to `PQfinish'
main.c:(.text+0x5d): undefined reference to `PQfinish'
collect2: error: ld returned 1 exit status 
```

这很奇怪，因为 PQconnectdb 等都是在 libpq-fe.h 中定义的函数，我已经包含在代码中。

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:21:58.443

`#include <libpq-fe.h>`不链接到库，它只包含有关库提供的函数和数据类型的信息。

`libpq-fe.h`您必须告诉链接器实际可以在哪里找到声明的引用。

如果您使用 Makefile 来编译您的代码，您应该添加`-lpq`到您的`LDFLAGS`或链接命令中。

发布您正在运行的命令进行编译以向我们提供更多信息。

# json - AS3 中带有 json.parse() 的 Unicode？

> ID：15978131
> 
> 赞同：0
> 
> 时间：2013-04-12T18:12:13.143
> 
> 标签：json, actionscript-3, flash, unicode, utf-8

我正在将 JSON 文件读入 Actionscript 3 项目，该文件根据 JSON Validator 是有效的，但 Flash 11 给了我错误 #1132：无效的 JSON 解析输入。

在此删除 unicode 可清除错误：

```
{
    "vars": {
        "0": {
            "id": "128",
            "varName": "dp",
            "varValue": "FLASHFAN",
            "category": "1"
        },
        "1": {
            "id": "129",
            "varName": "np",
            "varValue": "ERIK EKL\u00d6F",
            "category": "1"
        }
    }
} 
```

\u00d6 unicode 似乎造成了问题。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:24:14.073

我刚刚测试了您的代码，一切正常。我使用了 flex 4.6 编译器和 11 FP。

```
var json:* = {
    "vars": {
        "0": {
            "id": "128",
            "varName": "dp",
            "varValue": "FLASHFAN",
            "category": "1"
        },
        "1": {
            "id": "129",
            "varName": "np",
            "varValue": "ERIK EKL\u00d6F",
            "category": "1"
        }
    }
}

var str:String = JSON.stringify(json);
var newObj:* = JSON.parse(str);
trace(newObj); 
```

# jquery - 加载 div 背景图像后运行函数

> ID：15978133
> 
> 赞同：0
> 
> 时间：2013-04-12T18:12:18.723
> 
> 标签：jquery, image, background, load

我希望根据 div 的背景图像何时加载来运行一个函数。我错过了什么？

查询

```
$(function () { 
    $('.productnew .imgframe').each(function () { 
        $(this).load(function () { 
            $(this).attr("style", $(this).attr("style").replace("background:", ""));
            $(this).attr('style', 'background:url(images/new.png), ' + $(this).attr('style')); 
        }); 
    }); 
}); 
```

HTML

```
<div class="poster productnew"><div class="imgframe" style="background:url(images/posters/bicycle.jpg);"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:18:18.143

div 元素（您的`<div class="imgframe">`元素）没有 onload 事件，这就是您没有收到该事件的原因。

一些具有 onload 事件的元素是`<image>`, `<body>`, `<iframe>`.

如果您需要知道该特定图像何时加载以触发其他代码，您可以使用 javascript 手动将图像加载到图像对象中，然后当 onload 事件触发时，您将知道图像已加载并且您可以触发其他事件（将其设置为背景 URL 或您想做的任何其他事情）。

# data-mining - Weka：分类器和 ReplaceMissingValues

> ID：15978139
> 
> 赞同：0
> 
> 时间：2013-04-12T18:12:39.090
> 
> 标签：data-mining, weka

我对数据挖掘领域比较陌生，并且一直在尝试使用 Weka。

我有一个数据集，其中包含近 8000 条与客户和他们购买的物品相关的记录。该数据集中 58% 的“性别”属性缺失值。

我想根据我拥有的其他数据找到缺失的性别值。

我首先认为我可以使用 Weka 中的分类器算法使用训练集来构建模型来做到这一点。根据我在网上看到的示例，我使用 Weka 中几乎所有可用的算法进行了尝试，使用的训练集包含 60-80% 的没有缺失值的数据。这给了我比我想要的更低的准确率（80-86%，取决于所使用的算法）

我做对了吗？有没有办法提高这种准确性？我尝试使用不同的属性，对数据进行不同的预处理等。

我还尝试在完整数据集上使用 ReplaceMissingValues 过滤器，以查看如何处理缺失值。但是，它只是将所有缺失的值更改为“女性”，显然情况并非如此。所以我想知道我是否需要在我的情况下使用这个过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:25:09.210

听起来你以正确的方式去做了。过滤器用我认为最`ReplaceMissingValues`常见的非缺失值替换缺失值，所以在这种情况下它不是你想要的。

了解性别预测器的真实准确性的更好方法是使用交叉验证而不是训练/测试拆分（Weka 有一个单独的选项）。80-86% 可能看起来很低，但请记住，随机猜测只会让你得到大约 50%，所以它仍然比这要好得多。要尝试获得更好的性能，请选择一个性能良好的分类器，然后使用它的参数，直到获得更好的性能。这可能非常耗费人力（尽管您当然可以使用自动化方法进行调优，例如[Auto-WEKA](http://www.cs.ubc.ca/labs/beta/Projects/autoweka/)），但这是提高性能的唯一方法。

您还可以将您选择的算法与单独的特征选择步骤结合起来（Weka 对此有一个特殊的元分类器）。这可能会提高性能，但您必须再次尝试找到适合您的特定配置。

# php - PHP登录数据库问题

> ID：15978141
> 
> 赞同：-2
> 
> 时间：2013-04-12T18:12:44.933
> 
> 标签：php, mysql

我是 PHP 新手，所以请耐心等待！我正在尝试设置用户登录页面，但每次单击登录时，它都无法识别数据库中已有的数据。我目前在表格中有 7 个部分，但只从 2 个部分中获取数据。我不确定我哪里出错了可能是 php 或 MySQL 查询有人请帮助我！

```
 <?PHP

$email = "";
$pword = "";
$errorMessage = "";
$num_rows = 0;

function quote_smart($value, $handle) {

   if (get_magic_quotes_gpc()) {
       $value = stripslashes($value);
   }

   if (!is_numeric($value)) {
       $value = "'" . mysql_real_escape_string($value, $handle) . "'";
   }
   return $value;
}

if ($_SERVER['REQUEST_METHOD'] == 'POST'){
    $email = $_POST['Email'];
    $pword = $_POST['Password'];

    $email = htmlspecialchars($email);
    $pword = htmlspecialchars($pword);

    $e_mail = "root";
    $pass_word = "";
    $database = "the_travel_cult";
    $server = "127.0.0.1";

    $db_handle = mysql_connect($server, $e_mail, $pass_word);
    $db_found = mysql_select_db($database, $db_handle);

    if ($db_found) {

        $email = quote_smart($email, $db_handle);
        $pword = quote_smart($pword, $db_handle);

        $SQL = "SELECT * FROM user_login WHERE Email='$email' AND Password='$pword'";
        $result = mysql_query($SQL);
        $num_rows = mysql_num_rows($result);
        //if(!$result) die ('Unable to run query:'.mysql_error());

        if ($result) {
            if ($num_rows > 0) {
                session_start();
                $_SESSION['user_login'] = "1";
                header ("Location: SignedIn.php");
            }
            else {
                session_start();
                $_SESSION['user_login'] = "";
                //$errorMessage = "Not Registered";
                header ("Location: Register.php");              
            }   
        }
        else {
            $errorMessage = "Error logging on";
        }

    mysql_close($db_handle);

    }

    else {
        $errorMessage = "Error logging on";
    }
}

?>

<FORM NAME ="form1" METHOD ="POST" ACTION ="HomePage.php">

<form method=post action=”login.php”&gt;

<p><center><strong>Email Addres:</strong></center><br>
<center><input type=”text” name= 'email' value="<?PHP print $email;?>" size=40 maxlength=100></center>
<p><center><strong>Password</strong></center><br>
<center><input type=”text” name= 'password' value="<?PHP print $pword;?>" size=40 maxlength=20></center>

<P align = center>
<INPUT TYPE = "Submit" Name = "Submit1"  VALUE = "Login">
<form action="Register.php"> <input type="submit" value="Sign Up"> </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:22:17.183

首先，恭喜您开始编码。我希望你玩得开心！

看起来您可能会遇到“区分大小写”的情况。我注意到您在顶部有以下代码：

```
$email = $_POST['Email'];
$pword = $_POST['Password']; 
```

但是，在您的 HTML 中，您实际上是在传递以全小写命名的那些变量。尝试将顶部的代码更改为：

```
$email = $_POST['email'];
$pword = $_POST['password']; 
```

或者您在“电子邮件”和“密码”中输入的名称（同样，请注意首字母大写）。检查问题是否在这里（与查询中的某些内容相比）的一种简单方法是

```
var_dump($_POST); 
```

看看你的脚本从表单提交中得到了什么。

有关更多信息，请参阅 PHP 的[http://php.net/manual/en/language.variables.basics.php](http://php.net/manual/en/language.variables.basics.php)或查看相关帖子以了解如何进行自己的不区分大小写检查，但会被警告：这是更多的工作。[PHP：不区分大小写的参数](https://stackoverflow.com/questions/4211420/php-case-insensitive-parameters)

# orchardcms - Orchard CMS ContentPart 更新

> ID：15978144
> 
> 赞同：3
> 
> 时间：2013-04-12T18:12:52.060
> 
> 标签：orchardcms

每次更新、创建或删除特定内容部分时，我都会尝试发送消息。

当被创建或删除时，我使用 Content Handler: OnCreated 和 OnRemoving 来发送消息。

但在更新期间，我还需要 ContentPart 的先前状态和新数据。

谢谢。

[回答]

[Piotr Szmyd](https://stackoverflow.com/users/629335/piotr-szmyd)的回答和评论引导我解决问题。阅读它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T23:58:45.937

使用`OnVersioning`/ `OnVersioned`。每当创建项目的新版本时，就会触发这些事件。然后，您可以访问给定部件的旧版本和新版本。

# testing - 在 Azure 实例上安装 Visual Studio 测试控制器不起作用

> ID：15978145
> 
> 赞同：1
> 
> 时间：2013-04-12T18:13:01.363
> 
> 标签：testing, azure, installation

我已经在另一个线程中提到了这个问题，但我认为错误的根源是另一个。现在我知道真正的错误，但无法解决，也不明白。

我想在 Azure 实例上安装 Visual Studio 测试控制器。我正在尝试通过启动任务来执行此操作，该任务运行一个批处理文件，该文件依次下载测试控制器安装文件并将其安装在实例上。

问题是：通过启动任务运行安装时不起作用。当我通过 RDP 登录机器并双击完全相同的批处理文件时，一切正常。

以下是一些附加信息：

这是我执行的批处理文件：

```
powershell $command = "set-executionpolicy Unrestricted"
powershell $command = ".\setupController.ps1" -NonInteractive >; out.txt
echo Setup TestController >> %~dp0out.txt
cd E:\approot
timeout /T 60
"E:\approot\testcontroller.exe" /full /q /Log %~dp0install.log
echo Setup has been executed! >> %~dp0out.txt
net user vstestagent MyPassword! /add
net localgroup Administrators vstestagent /add
REM Create a task that will run with full network privileges.
net start Schedule
schtasks /CREATE /TN "Configure Test Controller Service" /SC ONCE /SD 01/01/2020 /ST 00:00:00 /RL HIGHEST /RU vstestagent /RP MyPassword! /TR e:\approot\configcontroller.cmd /F
schtasks /RUN /TN "Configure Test Controller Service" 
```

这是角色的启动任务：

```
<Task executionContext="elevated" taskType="background" commandLine="setupController.cmd"></Task> 
```

批处理文件以及测试控制器的安装文件位于 E:\approot 文件夹中

testcontroller 的安装日志文件是这样说的：

```
0A88:0ABC][2013-04-12T10:36:04]: Creating a system restore point.    
[0A88:0ABC][2013-04-12T10:36:04]: System restore disabled, system    restore point not created. 
[0A88:0ABC][2013-04-12T10:36:04]: Caching    bundle from:    'C:\Resources\temp\48c0ec5daf5846cab7f53f6b5c80dc6f.TestController\RoleTemp\{44f19fb6-98e0-4462-886c-c5e56d82dfd3}\.be\vstf_testcontroller.exe'    to: 'D:\ProgramData\Package    Cache\{44f19fb6-98e0-4462-886c-c5e56d82dfd3}\vstf_testcontroller.exe'    
[0A88:0ABC][2013-04-12T10:36:04]: Registering bundle dependency    provider: {44f19fb6-98e0-4462-886c-c5e56d82dfd3}, version:
       11.0.51106.1 
[0A40:09EC][2013-04-12T10:36:04]: MUX:  Cache Begin 
[0A40:064C][2013-04-12T10:36:05]: Error 0x80070070: Failed to set end    of file. 
[0A40:064C][2013-04-12T10:36:05]: Error 0x80070070: Failed    to extract all files from container.    
[0A40:09EC][2013-04-12T10:36:05]: Error 0x80070070: Faild to begin    and wait for operation. 
[0A40:09EC][2013-04-12T10:36:05]: Error    0x80070070: Failed to extract payload: a25 from container:    WixAttachedContainer 
[0A40:09EC][2013-04-12T10:36:05]: Failed to    extract payloads from container: WixAttachedContainer to working    path: E:\approot\testcontroller.exe, error: 0x80070070\.    
[0A40:0B98][2013-04-12T10:36:05]: Error 0x80070070: Failed while    caching, aborting execution. 
[0A88:0ABC][2013-04-12T10:36:05]:    Removed bundle dependency provider:    {44f19fb6-98e0-4462-886c-c5e56d82dfd3}
... Some Rollback and cleanup
[0A40:0B98][2013-04-12T10:36:06]: Variable: WixBundleTag = vstf_testcontroller,1031
[0A40:0B98][2013-04-12T10:36:06]: Variable: WixBundleVersion = 11.0.51106.1
[0A40:0B98][2013-04-12T10:36:06]: Exit code: 0x643, restarting: No 
```

我真的不知道问题出在哪里 - 特别是因为当我通过 RDP 运行批处理文件时，一切正常。唯一的区别似乎是用户执行批处理：启动任务以管理权限运行，我认为我的 RDP 帐户是另一个帐户，但也具有管理权限....

最好的问候塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:45:34.757

我仍然不知道为什么会这样，但是如果您通过计划任务进行安装，安装就可以了。

因为我认为唯一的区别可能是安装软件的帐户，所以我首先尝试通过 runas 命令安装测试控制器，但我无法将密码与命令一起传递。因此，我创建了一个用于安装测试控制器的计划任务，并且能够将用户凭据与命令一起传递。现在我的 setupController.cmd 看起来像这样：

```
powershell $command = "set-executionpolicy Unrestricted"
powershell $command = ".\setupController.ps1" -NonInteractive >; out.txt
echo Setup TestController >> %~dp0out.txt
cd E:\approot
echo Setup has been executed! >> %~dp0out.txt
net user vstestagent MyPassword! /add
net localgroup Administrators vstestagent /add
REM Create a task that will run with full network privileges.
net start Schedule
schtasks /CREATE /TN "Install Test Controller Service" /SC ONCE /SD 01/01/2020 /ST 00:00:00 /RL HIGHEST /RU vstestagent /RP MyPassword! /TR "E:\approot\testcontroller.exe /full /q /Log %~dp0install.log" /F
schtasks /RUN /TN "Install Test Controller Service"
timeout /T 120
schtasks /CREATE /TN "Configure Test Controller Service" /SC ONCE /SD 01/01/2020 /ST 00:00:00 /RL HIGHEST /RU vstestagent /RP MyPassword! /TR e:\approot\configcontroller.cmd /F
schtasks /RUN /TN "Configure Test Controller Service" 
```

希望它也对其他人有所帮助。

# python - 向 OpenStack 添加自定义过滤器时出现 ClassNotFound 异常

> ID：15978149
> 
> 赞同：1
> 
> 时间：2013-04-12T18:13:11.913
> 
> 标签：python, openstack, openstack-nova

我正在尝试使用他们的 FilterScheduler 组件为 OpenStack 创建一个自定义过滤器。FilterScheduler 的文档在这里：[http ://docs.openstack.org/developer/nova/devref/filter_scheduler.html#](http://docs.openstack.org/developer/nova/devref/filter_scheduler.html#)

现在，创建您自己的自定义过滤器的文档方式并不多。事实上，完整的文档是：

```
If you want to create your own filter you just need to inherit from BaseHostFilter and implement one method: host_passes. This method should return True if host passes the filter. It takes host_state (describes host) and filter_properties dictionary as the parameters.

As an example, nova.conf could contain the following scheduler-related settings:

--scheduler_driver=nova.scheduler.FilterScheduler
--scheduler_available_filters=nova.scheduler.filters.standard_filters
--scheduler_available_filters=myfilter.MyFilter
--scheduler_default_filters=RamFilter,ComputeFilter,MyFilter 
```

我创建了一个自定义的“test_filter.py”——它与“all_hosts_filter.py”非常相似，这是最简单的标准过滤器。

这是它的全部内容：

```
from nova.scheduler import filters
from nova.openstack.common import log as logging

LOG = logging.getLogger(__name__)

class TestFilter(filters.BaseHostFilter):
    """NOOP host filter. Returns all hosts."""

    def host_passes(self, host_state, filter_properties):
        LOG.debug("COMING FROM: nova/scheduler/filters/test_filter.py")
        return True 
```

但是当我将这个文件“test_filter.py”放在`nova/scheduler/filters`文件夹中并重新启动 OpenStack 时，我得到以下异常：

```
CRITICAL nova [-] Class test_filter could not be found: 'module' object has no attribute 'test_filter' 
```

OpenStack 似乎正在注册并尝试导入我的新过滤器，但出现了一些错误。作为参考，这是我`/etc/nova/nova.conf`文件的相关部分的样子：

```
scheduler_available_filters=nova.scheduler.filters.all_filters
scheduler_available_filters=nova.scheduler.filters.test_filter.TestFilter
scheduler_default_filters=TestFilter,RamFilter,ComputeFilter 
```

======

更新：2000 年 4 月 15 日 BST。

对此问题的更新，仍在苦苦挣扎。在 OpenStack IRC 频道上讨论了 boris-42 的问题后，我们进行了更多调查：

Openstack-scheduler 作为 /usr/bin/nova-scheduler 的服务运行

然后它有一个错误：

```
"Inner Exception: 'module' object has no attribute 'test_filter' from (pid=32696) import_class /usr/lib/python2.7/dist-packages/nova/utils.py:78" 
```

这表明它使用 /usr/lib/python2.7/dist-packages/nova/ 文件夹作为安装的源文件。

将我的自定义“test_filter.py”放入`/usr/lib/python2.7/dist-packages/nova/scheduler/filters`会导致上述错误。

但是，经过仔细检查，似乎该文件 `/usr/lib/python2.7/dist-packages/nova/scheduler/filters`夹中的所有其他文件实际上都是指向 `/usr/share/pyshared/nova/scheduler/filters`

所以我把我的“test_filter.py”放在 `/usr/share/pyshared/nova/scheduler/filters`-- 然后在原始文件夹中创建了一个符号链接。

这导致完全相同的文件夹。只要文件存在或文件夹中存在链接， `/usr/lib/python2.7/dist-packages/nova/scheduler/filters` 就会发生错误。

nova.conf 文件更新如下：

```
scheduler_available_filters=nova.scheduler.filters.TestFilter
scheduler_default_filters=TestFilter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:35:54.130

我认为您不必将文件放入`/usr/lib/python2.7/dist-packages/nova/scheduler/filters`. 您可以放在任何地方并确保路径位于`PYTHONPATH`.

[作为例子中的metnion](http://docs.openstack.org/developer/nova/devref/filter_scheduler.html#filtering)

如果你想创建自己的过滤器，你只需要从 BaseHostFilter 继承并实现一种方法：host_passes。如果主机通过过滤器，此方法应返回 True。它以 host_state（描述主机）和 filter_properties 字典作为参数。

*例如，nova.conf 可以包含以下与调度程序相关的设置：*

```
......
--scheduler_available_filters=myfilter.MyFilter
....... 
```

你必须提到`myfilet.MyFilter`没有`nova.scheduler.filters`.

# asp.net-mvc-3 - 保存到会话并在按钮单击时重定向

> ID：15978150
> 
> 赞同：0
> 
> 时间：2013-04-12T18:13:12.307
> 
> 标签：asp.net-mvc-3

A 有一个简单的网站，有 4 个视图（PersonalInfo、PostOffice、OrderDetails、Commentary）。所有视图都被强类型化为名为 Information 的模型。我需要做的是：

*   当我单击 PersonalInfo 视图中的下一步按钮时，我需要将一些数据存储到会话中
*   之后，我必须被重定向到下一个视图，OrderDetails

下面是我如何尝试解决问题的示例，但它不起作用

控制器：

```
public ActionResult PersonalInfo(string button, Models.Information FirstName, Models.Information LastName)
    {
        if (button == "Next")
        {
            HttpContext.Session["FirstName"] = FirstName;
            HttpContext.Session["LastName"] = LastName;

            return RedirectToAction("PostOffice", "Home");
        }
        else if (button == "Back")
        {
            return RedirectToAction("OrderDetails", "Home");
        }
        return View();
    } 
```

视图中的按钮：

```
<div>
<button name="button" value="Next">Next</button>
<button name="button" value="Back">Back</button></div> 
```

模型属性：

```
//Firstname validation
    [Required(ErrorMessage = "Required field.")]
    [Display(Name = "First name:")]
    [RegularExpression(@"^[a-zA-Z]+$", ErrorMessage = "Use letters only.")]
    public string FirstName { get; set; }

    //Lastname validation
    [Required(ErrorMessage = "Required field.")]
    [Display(Name = "Last name:")]
    [RegularExpression(@"^[a-zA-Z]+$", ErrorMessage = "Use letters only.")]
    public string LastName { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:20:17.350

听起来您甚至没有生成执行`PersonalInfo`操作的请求。

让您的按钮改为提交按钮

```
<input type="submit" name="button" value="Prev" />
<input type="submit" name="button" value="Next" /> 
```

我假设你的表单动作是`PersonalInfo`

在您的控制器操作中，使用`TempData`而不是`Session`将信息传递给重定向的操作，以便数据仅保留到下一个请求。

```
TempData["FirstName"] = FirstName;
TempData["LastName"] = LastName; 
```

最后，[asp.net mvc（拆分视图模型，单一模型）中的多步注册过程问题](https://stackoverflow.com/questions/6402628/multi-step-registration-process-issues-in-asp-net-mvc-splitted-viewmodels-sing/6403485#6403485)可能会帮助您，因为您正在进行多步表单处理。

# windows - 运行命令而不在新窗口中运行命令行

> ID：15978153
> 
> 赞同：0
> 
> 时间：2013-04-12T18:13:18.143
> 
> 标签：windows, node.js, command-line

我正在尝试从机器上安装的 node.js 应用程序运行命令。该命令运行良好（它是启动 Tomcat 的命令）。但是，我运行的命令实际上打开了启动 Tomcat 的命令行窗口。有没有办法做同样的事情（运行相同的命令来启动 Tomcat）但没有打开命令行窗口？

如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:04:08.660

您的问题不在于 node.js，而在于 tomcat。您可能正在运行错误的命令。而不是打电话`catalina.bat start`，而是打电话`catalina.bat run`。

或者，您可以将其设置为服务并调用 net start tomcatX

# hadoop - Oozie + Sqoop：JDBC 驱动程序 Jar 位置

> ID：15978156
> 
> 赞同：6
> 
> 时间：2013-04-12T18:13:34.280
> 
> 标签：hadoop, dependencies, cloudera, sqoop, oozie

我有一个基于 6 节点 cloudera 的 hadoop 集群，我正在尝试从 oozie 中的 sqoop 操作连接到 Oracle 数据库。

我已将我的 ojdbc6.jar 复制到 sqoop lib 位置（对我来说恰好位于：/opt/cloudera/parcels/CDH-4.2.0-1.cdh4.2.0.p0.10/lib/sqoop/lib/ ) 在所有节点上，并已验证我可以从所有 6 个节点运行一个简单的“sqoop eval”。

现在，当我使用 Oozie 的 sqoop 操作运行相同的命令时，我得到“无法加载数据库驱动程序类：oracle.jdbc.OracleDriver”

我已经阅读[了这篇](http://blog.cloudera.com/blog/2012/12/how-to-use-the-sharelib-in-apache-oozie/)关于使用共享库的文章，当我们谈论我的任务/操作/工作流特定依赖项时，这对我来说很有意义。但我认为 JDBC 驱动程序安装是对 sqoop 的扩展，所以我认为它属于 sqoop 安装库。

现在的问题是，虽然 sqoop 看到了我放入它的 lib 文件夹中的这个 ojdbc6 jar，但为什么我的 Oozie 工作流程没有看到它？

这是预期的还是我错过了什么？

顺便说一句，你们认为 JDBC 驱动程序 jar 的合适位置在哪里？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T18:49:49.433

JDBC 驱动程序 jar（以及它所依赖的任何 jar）应该放在 HDFS 上的 Oozie sharelib 文件夹中。我正在运行 Hortonworks Data Platform 1.2 而不是 Cloudera 4.2，因此细节可能会有所不同，但我的 JDBC 驱动程序位于`/user/oozie/share/lib/sqoop`. 这应该允许您通过 Oozie 使用 JDBC 运行 Sqoop。

不必将 JDBC 驱动程序 jar 放入数据节点上的 sqoop lib 中。在我的设置中，我无法`sqoop eval`从数据节点上的命令行运行简单的命令。我理解你为什么认为这会起作用的逻辑。JDBC 驱动程序 jar 需要位于 HDFS 上的原因是所有数据节点都可以访问它。您的解决方案应该实现相同的目标。我对 Oozie 的内部工作原理不够熟悉，无法说出为什么使用 sharelib 有效，但您的解决方案却没有。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-17T07:47:01.117

在CDH5中，你应该把jar放到'/user/oozie/share/lib/lib_${timestamp}/sqoop'，然后你必须更新sharelib或者重启oozie。

更新共享库：

`oozie admin -oozie http://localhost:11000/oozie -sharelibupdate`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-30T04:54:42.047

如果您使用 CDH-5，则 JDBC 驱动程序 jar（以及它所依赖的任何 jar）应位于 HDFS 上的“/user/oozie/share/lib/lib_timestamp/sqoop”文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-22T19:29:50.760

我遇到了同样的问题，它无法找到`mysql jar`. 我在这个偶数`oozie admin -oozie http://localhost:11000/oozie -sharelibupdate`命令中使用 cloudera 4.4 将不起作用

为了解决这个问题，我按照以下步骤操作：

1.  创建一个用户`Hue`并`hdfs`提供管理员权限

2.  使用`Hue UI`上传`jar`到`/user/oozie/share/lib/sqoop` `hdfs`路径，或者您可以使用以下命令：

`hadoop put /var/lib/sqoop2/mysql-connector-java.jar /user/oozie/share/lib/sqoop`

3.  一旦`jar`放置运行`oozie`命令。

# android - 在 Android 中以编程方式创建 ImageView

> ID：15978157
> 
> 赞同：2
> 
> 时间：2013-04-12T18:13:41.157
> 
> 标签：android, android-animation, android-imageview

我按照[这个](http://android-er.blogspot.com/2012/01/create-frame-animation-with.html)创建了一个简单的动画。

该示例`ImageView`在主布局中手动创建一个，具有这样的资源`android:src="@anim/anim_android`

问题是，当我制作动态`ImageView`时，我像这样设置资源`myImageView.setImageResource(R.anim.anim_android);`，动画不起作用，只是查看序列的第一张图像。

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T18:20:51.860

你应该从你开始动画`imageView`：

```
myImageView.setImageResource(R.anim.anim_android);
final AnimationDrawable myAnimationDrawable = (AnimationDrawable)myImageViewn.getDrawable();

myImageView.post(
new Runnable(){

  @Override
  public void run() {
   myAnimationDrawable.start();
  }
});
} 
```

**编辑：我认为你没有添加`ImageView`到你的布局（`contentView`你的`Activity`）；尝试这个 ：**

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        RelativeLayout rootLayout = new RelativeLayout(this);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        rootLayout.setLayoutParams(params);

        ImageView myAnimation = new ImageView(this);
        RelativeLayout.LayoutParams paramsImage = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        paramsImage.addRule(RelativeLayout.CENTER_IN_PARENT);
        myAnimation.setLayoutParams(paramsImage);
        myAnimation.setImageDrawable(getResources().getDrawable(R.anim.anim_android));
        rootLayout.addView(myAnimation);

        setContentView(rootLayout);

        final AnimationDrawable myAnimationDrawable = (AnimationDrawable)myAnimation.getDrawable();

        myAnimation.post(new Runnable() {

            @Override
            public void run() {
                myAnimationDrawable.start();
            }
        });
    } 
```

# regex - 这个 perl 替换字符串有什么作用？

> ID：15978159
> 
> 赞同：0
> 
> 时间：2013-04-12T18:13:48.630
> 
> 标签：regex, perl

我不知道这里发生了什么......我正在尝试手动执行此操作，而不是让 Perl 执行此操作。

```
my $replace_string
    = "s/typedef struct WebFontDescription WebFontDescription/struct WebFontDescription/g";

print $fh "perl -p -i -e \""
        . $replace_string
        . "\" \""
        . $idl_filename
        . "\"\r\n";

$replace_string
    = "s/\(WebFontDescription\\* webFontDescription/\(struct WebFontDescription\\* webFontDescription/g";

print $fh "perl -p -i -e \""
        . $replace_string
        . "\" \""
        . $idl_filename
        . "\"\r\n"; 
```

我看到它在寻找一个字符串

`typedef struct WebFontDescription WebFontDescription`

然后将其替换为

`s/\(WebFontDescription\\* webFontDescription/\(struct WebFontDescription\\* webFontDescription/g`

但是如何用正则表达式替换正则表达式？这没有任何意义...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:20:09.037

它创建以下一对 shell 命令：

```
perl -p -i -e "s/typedef struct WebFontDescription WebFontDescription/struct WebFontDescription/g" "file"
perl -p -i -e "s/(WebFontDescription\* webFontDescription/(struct WebFontDescription\* webFontDescription/g" "file" 
```

* * *

第一个替换每个实例

```
typedef struct WebFontDescription WebFontDescription 
```

和

```
struct WebFontDescription 
```

* * *

第二个没有做任何事情，只是抛出一个错误消息，因为它没有编译。（无与伦比`(`。）

# haskell - Haskell LLVM 绑定不明确类型

> ID：15978164
> 
> 赞同：6
> 
> 时间：2013-04-12T18:14:09.720
> 
> 标签：haskell, llvm, ffi

我正在尝试开始使用 Haskell 的 LLVM 绑定。一个很好的起点是Hello World。

以下来自绑定作者的博客。

```
bldGreet :: CodeGenModule (Function (IO ()))
bldGreet = do
    puts <- newNamedFunction ExternalLinkage "puts" :: TFunction (Ptr Word8 -> IO Word32)
    greetz <- createStringNul "Hello, World!"
    func <- createFunction ExternalLinkage $ do
      tmp <- getElementPtr greetz (0::Word32, (0::Word32, ()))
      call puts tmp -- Throw away return value.
      ret ()
    return func 
```

它不编译。
相反，我得到“不明确的类型变量`n0' in the constraint: (type-level-0.2.4:Data.TypeLevel.Num.Sets.NatI n0) arising from a use of`getElementPtr0' 可能的修复：添加修复这些类型变量的类型签名”

这是一个有效的变体

```
llvmModule :: TFunction (IO Word32)
llvmModule = 
    withStringNul "Hello world!" $ \s -> do 
    puts <- newNamedFunction ExternalLinkage "puts" :: TFunction (Ptr Word8 -> IO Word32)
    main <- newNamedFunction ExternalLinkage "main" :: TFunction (IO Word32)
    defineFunction main $ do
      tmp <- getElementPtr0 s (0::Word32, ())
      _ <- call puts tmp
      ret (0::Word32)
    return main 
```

第一个似乎更自然。我的问题是第一个歧义是什么，我该如何解决。我的第二个问题是为什么第二个不是模棱两可的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:02:48.150

好的。所以我解决了这个问题。这确实是一个类型类的东西。它只会让我更加困惑。但是，我确实有解决方案的答案。但请随时帮助我理解。首先，一些挖掘。函数 createStringNul 具有类型

```
createString :: String -> TGlobal (Array n Word8) 
```

美好的。编译器遇到的问题是 Array 类型中的“n”不明确。它实际上可以是世界上的任何东西。查找，数组，你会看到

```
newtype Array n a 
```

现在它不是那么明显，但是经过一点挖掘，特别是对 getElementPtr 的调用，我们发现 n，实际上应该是一个 Nat n，这是一种固定数组大小的类型级方法。现在，Array na 的定义实际上并不关心它实际上只是 [a] 的类型同义词。因此，您可以使用 D0、D9 或 Data.TypeLevel.Num.Reps 包中的任何您想要的内容。固定数组的大小，而这个函数实际上并没有考虑到一个好主意。但无论如何，改变 greetz <- createStringNul "Hello, World!" 到 greetz <- createStringNul "你好，世界！" :: TGlobal (Array D0 Word8) 有效。

这是有趣的部分......我没想到它会起作用。D0 应该是 0，所以我不明白为什么它允许我在一个 0 大小的“数组”中存储这么多字符 但是，如果你查看源代码，就会立即清楚实际上并不是类型限制重视。

好吧，无论如何，在编译时意识到 createStringNul 已被弃用，而 withStringNul 是首选。除了我不完全理解 withStringNul 的类型是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T19:05:20.563

`createStringNul` `llvm`在(3.0.1.0)的当前版本中[被标记为已弃用。](http://hackage.haskell.org/packages/archive/llvm/3.0.1.0/doc/html/src/LLVM-Core-CodeGen.html#createStringNul)使用`withStringNul`：

```
import Data.Word
import LLVM.Core

bldGreet :: CodeGenModule (Function (IO ()))
bldGreet = do
    puts <- newNamedFunction ExternalLinkage "puts" :: TFunction (Ptr Word8 -> IO Word32)
    func <- withStringNul "Hello, World!" $ \greetz ->
      createFunction ExternalLinkage $ do
        tmp <- getElementPtr greetz (0::Word32, (0::Word32, ()))
        _ <- call puts tmp -- Throw away return value.
        ret ()
    return func 
```

`withStringNul`至于第一个示例中导致错误的原因，这与具有更多信息类型的事实有关： `withStringNul :: String -> (forall n . Nat n => Global (Array n Word8) -> a) -> a`--cf。到`createStringNul :: String -> TGlobal (Array n Word8)`. 的函数参数`withStringNul`具有[更高等级的类型](http://www.haskell.org/haskellwiki/Rank-N_types)- 这意味着该函数适用于所有`n`自然`n`数。

如果你真的想使用`createStringNul`，你可以通过添加显式类型签名来编译第一个示例`greetz`：

```
{-# LANGUAGE TypeOperators #-}
module Test
       where

import Data.Word
import Data.TypeLevel.Num.Reps
import LLVM.Core

bldGreet :: CodeGenModule (Function (IO ()))
bldGreet = do
    puts <- newNamedFunction ExternalLinkage "puts" :: TFunction (Ptr Word8 -> IO Word32)
    greetz <- createStringNul "Hello, World!"
    func <- createFunction ExternalLinkage $ do
      tmp <- getElementPtr (greetz :: Global (Array (D1 :* D3) Word8)) (0::Word32, (0::Word32, ()))
      call puts tmp -- Throw away return value.
      ret ()
    return func 
```

`:*`类型构造函数来自[类型级别包](http://hackage.haskell.org/packages/archive/type-level/0.2.4/doc/html/Data-TypeLevel-Num-Reps.html#t%3a%3a-42-)，用于构造类型级别的数字。`D1 :* D3`表示数组的大小为 13。

# xampp - 无法连接到 SMTP 主机：localhost，端口：25。 Telnet 说 220 localhost ESMTP 服务器已准备就绪

> ID：15978167
> 
> 赞同：0
> 
> 时间：2013-04-12T18:14:21.343
> 
> 标签：xampp, jakarta-mail, telnet, symantec

我正在使用 XAMPP 在 tomcat 中部署我的 java 应用程序，还使用水银邮件发送电子邮件。现在我只是用一个使用 java 邮件 API 和水银电子邮件的小型 java 程序来测试我的应用程序。我已经在 Mercury 中完成了必要的配置来设置 localhost。现在运行java程序时..它说

```
javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25;
  nested exception is:
    java.net.SocketException: Network is unreachable: connect
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1962)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:654) 
```

当我的 XAMPP Mercury 服务器启动并使用以下端口号运行时

```
25, 79, 105 , 106, 110, 143, 2224 
```

我还测试了telnet命令...结果如下..

```
telnet localhost 25
220 localhost ESMTP server ready. 
```

现在我被困住了。因为我在我的大学实验室工作，并且系统上安装了 Symantec End Point Protection，所以我什至无法检查防火墙是否导致任何问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:48:45.943

几乎可以肯定是 Symantec End Point Protection 导致了问题。可能您的大学不希望您运行自己的邮件服务器。

# visual-studio-2010 - 错误 168：存储提供程序工厂类型“Oracle.DataAccess.Client.OracleClientFactory”未实现 IServiceProvider 接口

> ID：15978168
> 
> 赞同：1
> 
> 时间：2013-04-12T18:14:28.943
> 
> 标签：visual-studio-2010, edmx

我有以下错误：错误 168：商店提供程序工厂类型“Oracle.DataAccess.Client.OracleClientFactory”未实现 IServiceProvider 接口。使用实现此接口的商店提供程序。

问题发生在文件 DiscoModel.edmx 上：

`<?xml version="1.0" encoding="utf-8"?> <edmx:Edmx Version="2.0" xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx"> <!-- EF Runtime content --> <edmx:Runtime> <!-- SSDL content --> <edmx:StorageModels> <Schema Namespace="DiscoModel.Store" Alias="Self" Provider="Oracle.DataAccess.Client" ProviderManifestToken="11.2" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">`

在以下行：

```
<Schema Namespace="DiscoModel.Store" Alias="Self" Provider="Oracle.DataAccess.Client" ProviderManifestToken="11.2" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl"> 
```

我将 ProviderManifestToken="11.1" 更改为 ProviderManifestToken="11.2"，我验证了我们使用的是 .Net Framework 4，我安装了 ODP .net，确保安装了实体模型框架，验证了我们指向正确的 Oracle。 dataaccess.client.dll (11.2.0.3),

但我仍然得到这个错误？为什么 ？我可以做什么 ？

谢谢你的回答，

尼古拉斯·莫让

# .net - 我的程序无法正确显示数值

> ID：15978174
> 
> 赞同：0
> 
> 时间：2013-04-12T18:14:59.417
> 
> 标签：.net, vb.net, decimal

我的程序应该计算物品的成本，当它运行时它不会显示小数。例如，如果用户在成本文本框中输入 5.99，在项目数框中输入 5，则输出将显示 25。

```
Public Class Form1
Private Sub btnCalculate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCalculate.Click
    Dim DecCost As Decimal = txtCost.Text
    Dim intNumber As Integer = txtNumber.Text
    If Decimal.TryParse(txtNumber.Text, DecCost) Then
        Dim DecTotal As Decimal = intNumber * DecCost
        lblTotal.Text = DecTotal
    Else
        lblTotal.Text = "Please Enter Numerals in Both Boxes."
    End If

End Sub 
```

结束类

提前致谢！

*编辑*我只是在运行时在文本框中尝试了一些新值。它似乎将 Number of items 值乘以自身。我不知道为什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:19:26.937

我认为问题在于您正在解析`txtNumber.Text`并将其存储在 中`DecCost`，而您已经在使用它来保存成本。您需要一个`DecCost`小数来存储成本，以及一个`intNumber`整数来存储数量。然后，解析每个文本框并将结果组合在一起。

```
Dim decCost As Decimal
Dim intNumber As Integer
If Integer.TryParse(txtNumber.Text, intNumber) AND Decimal.TryParse(txtCost.Text, decCost) Then
    lblTotal.Text = decCost * intNumber
Else
    lblTotal.Text = "Please Enter Numerals in Both Boxes."
End If 
```

[演示](http://ideone.com/DUFsjI)

# image - CSS 中的内容属性以显示图像图标

> ID：15978178
> 
> 赞同：3
> 
> 时间：2013-04-12T18:15:21.053
> 
> 标签：image, css

在创建和学习引导页面时。我遇到了 css 的 content 属性，我读了几篇文章，我知道它是如何工作的。但是下面的代码片段向我显示了一个图像图标，但内容属性值实际上不是图像 url，而是一个代码。我不清楚我们如何在没有 url 的情况下显示图像以及图像来自哪里？

```
.test.glass i:before {
  content: "\e001";
} 
```

以下是使用上述 css 显示图像图标的 html 元素：

```
<span class="test glass"><i></i></span> 
```

但那是什么`"\e001"`图像代码或其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:19:11.697

它们是 utf8 代码。有很多网站描述了不同标准字体的字形，但您也可以使用您选择的任何图像来定义自己的字体集作为任何字符。

如果您使用网络字体，例如来自 fontello，但有很多类似的网站，您可以定义要使用的图像作为字符 \e0001 并且每当您想使用该图像时，您必须确保使用该字体元素并使用 utf8 代码显示图像。在 html 中它会像`<span class="iconfont">&#xe001;</span>`. 如果您使用 css 添加图像，那么就像在您的示例中一样。

# python - 使用 pygtk 和多处理 ( python ) 时无法列出 .pop()

> ID：15978186
> 
> 赞同：1
> 
> 时间：2013-04-12T18:15:59.310
> 
> 标签：python, python-2.7, multiprocessing, pygtk

我在尝试制作一个使用多处理无限循环的程序时遇到问题，同时检查队列（列表）

我的代码的简化版本在这里（它包括 gui）：

```
 #!/usr/bin/env python
    # coding: latin-1

    import multiprocessing
    import time
    import subprocess
    import collections
    import os
    import random
    import string
    import sys
    import mimetypes
    import re
    import pygtk
    import gtk
    import gobject

    # set globals
    queue1 = []

    def do_stuff():
        global queue1
        print("Do_stuff has been called") # this is displayed
        ftype=''
        try:
            print("Attempting to get work to do")  # this is displayed
            qe = queue1.pop()
            print("Getting file name")  # this is NOT displayed, even if the on_queueadd_clicked button appends data to the queue.
            filein, data = qe.split("::=::")
            processfile(filein)
        except IndexError:      
            print("Nothing in Queue")

        return 0

    def queuecheck():
        while True:
            do_stuff()
            #time.sleep(0.1) # 100ms
            time.sleep(3)
    def processfile(filein):
        print ("PROCESSING FILE")
        fileout,fileout2 = os.path.splitext(filein)
        f = "-i '"+filein+"' -o '"+fileout+".o.txt'"
        #output1 = os.system("e.exe "+f)
        print("file has been made")
    def main():
        print("Loading Main Window ")
        loadui()
    class loadui():
        def on_queueadd_clicked(self, widget):
            global filebutton
            global queue1
            # get file location from gtk window -> FileChooserButton (removed for simplicity)

            stringadd = 'file.txt'+'::=::'+'some other data'

            print("The string we are adding is: ") # this displays the correct output
            print(stringadd)
            queue1.append(stringadd)

        def on_window_delete_event(self, w1, widget):
            self.sub_process.terminate()
            sys.exit(0)
            return True
        def update_text(self):
            try:
                data = self.data_queue.get_nowait()
            except:
                pass
            else:
                print(data)
            return True

        def __init__(self):
            builder = gtk.Builder()
            builder.add_from_string('<?xml version="1.0" encoding="UTF-8"?><interface>  <requires lib="gtk+" version="2.24"/>  <!-- interface-naming-policy project-wide -->  <object class="GtkWindow" id="window1">    <property name="can_focus">False</property>    <child>      <object class="GtkButton" id="queueadd">        <property name="label" translatable="yes">Add to queue</property>        <property name="visible">True</property>        <property name="can_focus">True</property>        <property name="receives_default">True</property>        <property name="use_action_appearance">False</property>        <signal name="clicked" handler="on_queueadd_clicked" swapped="no"/>      </object>    </child>  </object></interface>')
            handlers = {
                "on_queueadd_clicked": self.on_queueadd_clicked

            }
            builder.connect_signals(handlers)
            main = builder.get_object("window1")
            main.set_title("test script")
            # init queue
            self.data_queue = multiprocessing.Queue()
            gobject.timeout_add(100, self.update_text) 
            self.sub_process = multiprocessing.Process(target=queuecheck)
            self.sub_process.start()
            #.... ... ... 
            main.show_all()
            gtk.main()

    main() 
```

GUI 加载（和功能）正常，无限循环似乎也可以正常工作，但它似乎无法 .pop() 来自“queue1”的列表条目

我已将问题归结为：

```
 print("Do_stuff has been called") # this is displayed
        ftype=''
        try:
            print("Attempting to get work to do")  # this is displayed
            qe = queue1.pop()
            print("Getting file name")  # this is NOT displayed, even if the on_queueadd_clicked button appends data to the list. 
```

产生一个索引错误，表明列表是空的，即使 gui 加载数据并将数据附加到列表中也是如此。

任何帮助将不胜感激，我一直在努力解决这个问题几个小时:(

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:24:19.270

每个进程都有它自己的列表版本。Python 列表不是进行进程间通信的合适方式。你应该看看使用[multiprocessing.Queue](http://docs.python.org/2/library/multiprocessing.html#exchanging-objects-between-processes)。

在使用多处理时使用“main”作为函数或模块名称也可能很危险。多处理库在内部使用此名称，您可能会遇到问题。

# javascript - 如何调试 Google Chrome 拒绝发送 AJAX 请求？

> ID：15978189
> 
> 赞同：1
> 
> 时间：2013-04-12T18:16:06.077
> 
> 标签：javascript, ajax, google-chrome, jquery

我的应用程序使用 jquery 1.7.1。失败的代码如下所示：

```
 dialog = $("<div>").append($("<form class='ourformstyle'>Loading...</form>"));
    dialog.css({
        position: "absolute",
        top: "50px", 
        left: "50px",
        display: "block",
        zIndex: 3
    });
    $("body").append(dialog);

    dialog.load(uri, function () { 
        alert('success');
    }); 
```

“uri”是一个本地 URI，相对于当前页面定义（其值为“AdvertCreate?advertiser=1&campaign=4”）。但是在 load() 函数中，我抛出了一个异常，如下所示：

```
GET http://icandigital.com:81/icandigital/AdvertCreate?advertiser=1&campaign=4  jquery-1.7.1.min.js:4
  send jquery-1.7.1.min.js:4
  f.extend.ajax jquery-1.7.1.min.js:4
  f.fn.extend.load jquery-1.7.1.min.js:4
  showdialog Adverts:254 [this is the 'dialog.load' line above] 
```

在开发者工具的“网络”标签上，Chrome 将请求的类型显示为“待处理”，状态显示为“（失败）”。服务器似乎没有收到请求。

这个问题出现在最新版本的 Chrome (26.0.1410.64) 上，但似乎在早期版本上也有效（未知，但大约在 2 月初左右出现）。我不再有该版本进行测试，但确保该网站现在与当时的情况相同，看来肯定是某些 Chrome 更新导致了它。

因为异常没有告诉我请求失败的原因，所以我不知道如何调试这个问题。有谁知道获取更多信息的方法？或者也许知道可能导致此类问题的更新内容。

**更新**

问题是由 AdBlock 引起的。由于这是一个内部站点，我刚刚通知我的客户，他们需要为自己的域禁用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:33:20.213

没关系。是 AdBlock 阻止了请求，根本没有改变 Chrome。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:34:14.703

尝试使用其他浏览器，以便向自己证明问题出在 chrome 上。带有 firebug 插件的 Firefox 可以为您提供许多与 Chrome 相同的调试功能。

# unity3d - 如何在 Unity3D 中动态加载资产？

> ID：15978191
> 
> 赞同：1
> 
> 时间：2013-04-12T18:16:09.137
> 
> 标签：unity3d

在 Unity3D Webplayer 中加载外部资源的正确方法是什么？

我的示例由一个空场景和一个按钮组成。当用户单击按钮时，我必须将外部资产加载到场景中。比我应该分配脚本等，但问题是 - 我可以用脚本创建一个空对象，但是如何将外部资产加载到其中？

外部资产是存储在远程 PC 上的文件，可通过 http 或任何其他协议访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:59:52.927

Unity 具有 WWW 类，用于访问来自某些协议的数据，最显着的是您上面所说的 http。

[http://docs.unity3d.com/Documentation/ScriptReference/WWW.html](http://docs.unity3d.com/Documentation/ScriptReference/WWW.html)

如果对象成功返回，您可以访问它下载的数据。您可以访问它下载的原始字节并根据需要处理数据。或者，如果适用于您的情况，您可以将其作为文本或纹理访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-07T14:10:56.613

你可以看看 AssetBundle：

[https://unity3d.com/fr/learn/tutorials/topics/best-practices/assetbundle-fundamentals](https://unity3d.com/fr/learn/tutorials/topics/best-practices/assetbundle-fundamentals)

一旦捆绑包远程存储在某个地方，您就可以使用它下载它`WWW.LoadFromCacheOrDownload`，然后从中实例化特定对象。

# c# - 带溢出的简单区间/范围交集

> ID：15978196
> 
> 赞同：1
> 
> 时间：2013-04-12T18:16:18.937
> 
> 标签：c#, c++, overflow, range, intervals

我正在编写一个物理内存管理器，它从 BIOS 获取一些关键系统数据未使用的内存间隔。每个区间都有`0 <= start <= 2^32 - 1`和`0 <= length <= 2^32`。我已经过滤掉了零长度间隔。

给定两个区间 S 和 T，我想检测它们是*如何*相交的。例如，S 是否在 T 之前开始并在 T 内结束（图片*a*）？还是 S 在 T 之前开始并在 T 之后结束（图片*c*）？

你会认为解决方案是微不足道的：

```
uint s_end = s_start + s_length;
uint t_end = t_start + t_length;

if (s_start < t_start)
    // S starts before T
else if (s_start < t_end)
    // S starts within T
else
    // S starts after T

if (s_end <= t_start)
    // S ends before T
else if (s_end <= t_end)
    // S ends within T
else
    // S ends after T 
```

问题是溢出：我在技术上仅限于 32 位整数，并且间隔可以（并且经常这样做）使用整个可用整数范围。例如在图*b*中，`t_end`由于溢出而等于 0。甚至，如图*f* `t_start = t_end = s_start = 0` while `t_length != 0`。

**如何使这些区间相交条件在考虑溢出的情况下工作？**

溢出搞砸了我的条件，但我*真的*不能为此使用 64 位整数（这将是最简单的）。我知道对我的条件进行一些巧妙的改组并使用加法和减法一定是可能的，但是在制作了无尽的图表并思考了几个小时之后，我似乎无法理解它。

![间隔的一些例子](https://i.stack.imgur.com/HlpX5.png)

^(虽然我的问题是 32 位整数，但在这张图片中，我使用 4 位整数只是为了简化它。问题仍然相同。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:35:18.287

好的，问题是，如果您希望您的范围跨越所有 n 位，则任何基于开始/结束的计算都有可能溢出。

所以诀窍是对开始/结束计算不会溢出的地方进行线性变换，进行计算，然后线性变换回来。

**笔记**

*在我们可以安全地调用 end() now*行下方，您可以调用排序检查（您的原始代码），这将是安全的，因为在线性变换期间会保留排序。

此外，正如我在上一篇文章中所指出的，存在一种特殊的边界情况，即使您进行此转换，也会溢出（跨越整行的地方） - 但您可以针对该特殊边界条件进行编码。

**输出**

5 11

**代码**

```
#include <iostream>

using type = uint8_t;

struct segment
{
    type start, length;
    type end() const { return start + length; }
};

static segment
intersect( segment s, segment t )
{
    type shift = std::min( s.start, t.start );

    // transform so we can safely call end()
    s.start -= shift;     // doesn't affect length
    t.start -= shift;     // doesn't affect length

    // we can safely call end() now ----------------------------------------------
    type u_start  = std::max( s.start, t.start );
    type u_end    = std::min( s.end(), t.end() );
    type u_length = u_end - u_start;

    segment u{ u_start, u_length };

    // transform back
    u.start += shift;

    return u;
}

int main()
{
    segment s{ 3, 13 }, t{ 5, 11 };
    segment u = intersect( s, t );

    std::cerr << uint32_t( u.start ) << " " << uint32_t( u.length ) << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:29:17.503

One solution is to treat an end of 0 as a special case. Weaving this into the if-statements, it becomes:

```
uint s_end = s_start + s_length;
uint t_end = t_start + t_length;

if (s_start < t_start)
    // S starts before T
else if (t_end == 0 || s_start < t_end)
    // S starts within T
else
    // S starts after T

if (s_end != 0 && s_end <= t_start)
    // S ends before T
else if (t_end == 0 || s_end == t_end
    || (s_end != 0 && s_end <= t_end))
    // S ends within T
else
    // S ends after T 
```

This looks correct.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:29:40.103

I don't know what do you do with conditions like (f), since 32-bit t_length will be 0 there. Assuming you've managed this case somehow when you were filtering out length=0, which can mean both 0 and 2^32, the basic idea is this:

```
bool s_overflows=false;
if(s_start>0)//can't have overflow with s_start==0,
{
    uint32 s_max_length=_UI32_MAX-s_start+1;
    if(s_length==s_max_length) s_overflow=true;
}
bool t_overflows=false;
if(t_start>0)
{
    uint32 t_max_length=_UI32_MAX-t_start+1;
    if(t_length==t_max_length) t_overflow=true;
} 
```

Then you just do your calculations, but if s_overflow is true, you don't calculate s_end -- you don't need it, since you already know it's 0x100000000\. The same for t_overflow. Since these are already special cases, just like start=0, they shouldn't complicate your code much.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:38:50.650

您的示例代码并未列举所有情况。例如，间隔也可以在同一点开始或结束。

要解决溢出问题，您可以尝试根据开始比较添加不同的数学，其中根本不包括计算结束。就像是：

```
if (s_start < t_start)
{
    // S starts before T
    uint start_offset = t_start - s_start;
    if (start_offset < s_length)
    {
        if (s_length - start_offset < t_length)
        {
            // ...
        }
        else ...
    } else ...
} 
```

# java - 返回类型不兼容

> ID：15978197
> 
> 赞同：0
> 
> 时间：2013-04-12T18:16:27.457
> 
> 标签：java, inheritance, overriding, three.js, lwjgl

### 背景

我正在为 java 编写一个 three.js 并使用 LWJGL 作为后端。我正在使用 three.js 所需的方法扩展 LWJGL，但我遇到了问题。

### 问题

我需要为它的每个库重写 Vector2f.set 等，因为我只需要这些方法返回它们自己的行为就像 three.js。我尝试了以下方法：

```
@Override
public Vector2 set(float x, float y){
    super.set(x,y);
    return this;
} 
```

Eclipse 抱怨这两种方法不兼容。您是否允许覆盖 void 返回，如果不允许，我是否应该为此调用创建一个单独的方法名称？有没有办法完全覆盖超类方法并忽略它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:17:40.493

您可以覆盖 void 方法，但您必须使用另一个 void 方法覆盖它们。覆盖方法的返回类型和参数类型需要与其被覆盖的方法兼容。

如果您可以选择这样做，我建议您使用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)而不是向量 - 向量较慢，因为它同步所有方法，这通常是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:41:31.097

如果你想要链接，你可能需要

```
public Vector2 modify(float x, float y) {
    set(x, y);
    return this;
} 
```

很难完美地模拟其他语言的代码。

# mysql - SQL——返回记录组，其中一个字段在组中的所有记录中不匹配

> ID：15978201
> 
> 赞同：1
> 
> 时间：2013-04-12T18:16:41.540
> 
> 标签：mysql, sql

在下面的示例表中，所有具有相同价格的记录`O_Id`也应该具有相同的价格。显然，对于`O_Id`1 和 3，并非所有记录都具有相同的价格。

我很难编写一个查询，该查询将返回与`O_Id`一个或多个其他记录相同的表中的所有记录，但在`OrderPrice`具有相同`O_id`.

**样品表：**

```
+------+------------+------------+
| Type |  MySQL     | OrderPrice |
+======+============+============+
| 1    | 2008/11/12 | 1000       |
| 1    | 2008/10/23 | 2000       |
| 2    | 2008/09/02 |  700       |
| 2    | 2008/09/03 |  700       |
| 3    | 2008/08/30 | 2000       |
| 3    | 2008/10/04 | 2100       |
| 3    | 2008/08/30 | 2000       |
| 3    | 2008/10/04 | 2000       |
+------+------------+------------+ 
```

**样本结果集：**

```
+------+------------+------------+
| Type |  MySQL     | OrderPrice |
+======+============+============+
| 1    | 2008/11/12 | 1000       |
| 1    | 2008/10/23 | 2000       |
| 3    | 2008/08/30 | 2000       |
| 3    | 2008/10/04 | 2100       |
| 3    | 2008/08/30 | 2000       |
| 3    | 2008/10/04 | 2000       |
+------+------------+------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:23:40.203

您可以获得`O_Id`与以下相关的不止一种不同价格的地方：

```
SELECT O_Id
FROM myTable
GROUP BY O_Id
HAVING COUNT(DISTINCT OrderPrice) > 1 
```

并将其用作内部语句以获取这些`O_Id`s 的所有行：

```
SELECT *
FROM myTable
WHERE O_Id IN (
    SELECT O_Id
    FROM myTable
    GROUP BY O_Id
    HAVING COUNT(DISTINCT OrderPrice) > 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:25:47.083

这是使用的解决方案`Exists`：

```
Select * From OrderTable O
Where Exists(
    Select O_Id From OrderTable
    Where O_Id = O.O_Id
    Group By O_Id
    Having Count(Distinct OrderPrice) > 1 ) 
```

# php - 创建自动更新的日历事件列表

> ID：15978203
> 
> 赞同：-2
> 
> 时间：2013-04-12T18:16:44.840
> 
> 标签：php, calendar, google-calendar-api

我正在尝试制作一个非常基本的日历事件列表，一旦事件结束就会自动更新。如果我用 HTML 来做这个，我会创建一个有序列表，每个列表项都是一个事件。

不确定 PHP 是否可以实现这一点，或者它是如何工作的。

将其与 Google 日历绑定会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:28:02.597

当然，您可以将事件存储在数据库中并使用 PHP 或任何数量的其他语言将它们读出。基本思想是获取日期/时间大于当前日期/时间的下 n 个事件。

但是，如果您还不熟悉数据库以及如何从网页与它们交互，那么 Google 日历可以为您节省大量时间。您可以免费获得很多东西，包括多个日历、事件通知、多日事件、用户之间的共享等等。此外，Google 生成的 HTML 代码可以直接放入您的网页中，用于简单的嵌入式日历。对于更高级的用法，您可以使用 Google 日历 API ( [https://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/) )。

# javascript - 什么是 JavaScript 的内置字符串？

> ID：15978204
> 
> 赞同：148
> 
> 时间：2013-04-12T18:16:46.583
> 
> 标签：javascript, obfuscation

*这个问题很难用问题标题来概括*

**更新** 我创建了一个 JSFiddle，它根据从这个问题中提取的字母从您的输入中构建一个混淆字符串：您可以[在此处](http://jsfiddle.net/w9rFF/14/)访问它，或者[要点](http://bl.ocks.org/jasonsperske/5400283)更容易？

[我最近在这个配置文件](https://stackoverflow.com/users/1249581/vision)中遇到了一些有趣的混淆 JavaScript，如下所示：

```
javascript:[[]+1/!1][1^1][1>>1]+({}+[])[1<<1^11>>1]+([]+!!-
[])[1<<1]+[/~/+{}][+!1][-~1<<1]+([]+/-/[(!!1+[])[1>>1]+(!!1
+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^11<<1]+([,][
~1]+[])[1-~1]+[[]+{}][!1.1%1][11111.1%11.1*111e11|!1]+(/1/+
1/[1<1][1%1])[1^11]+[[],[]+{}][1][+1]+(/<</[1]+[])[1/1.1&1] 
```

很抱歉破坏了这个惊喜，但是当它被评估时，它会返回：

```
"I love you" in Chrome
"I lone you" In Firefox
"I lo[e you" in IE10 
```

分解时的工作方式是生成一系列消息并像这样从它们中提取字母（以“I”为例）：

```
[]+1/!1
returns
"Infinity"
then
[[]+1/!1]
creates this array:
["Infinity"]
then
[[]+1/!1][1^1]
Takes the first (1^1 == 0) element of that array
"Infinity"
finally
[[]+1/!1][1^1][1>>1]
Takes the first (1>>1 == 0) char of that string
"I" 
```

生成的其他字符串包括：

```
({}+[])       -> "[object Object]" (where the space comes from)
([]+!!-[])    -> "false" (used for it's "l")
[/~/+{}][+!1] -> "/~/[object Object]" (this is used for an "o")
(/<</[1]+[])  -> "undefined" 
```

我有兴趣找到“n”和“[”的替代品，并想出了这个：

```
String.fromCharCode(('1'.charCodeAt(0)<<1)+(10<<1)) 
```

我本着使用 1 和 0 的精神，但违反了原始代码更优雅的方面之一，即与字符串完全无关的外观。还有其他人知道如何生成与原始混淆代码一致的“v”吗？

***这是许多有才华的 JavaScript 程序员深入研究后发现的一些额外信息***

Firefox 返回“我孤独你”因为这行：

```
([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^11<<1]+ 
```

`[1^11<<1]`从中修剪一个特定的字符：

```
([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]]) 
```

评估结果如下：

```
"function test() {
    [native code]
}" 
```

看起来我们可能有我们的“V”！

Chrome 会返回“我爱你”，因为相同的代码会返回：

```
"function test() { [native code] }" 
```

* * *

在问题因与“真正的编程问题”的可疑联系而关闭之前，我想我会添加一个基于@Supr ['s](https://stackoverflow.com/a/15981930/16959)、[@Cory's](https://stackoverflow.com/a/15980008/16959)和[@alpha123's](https://stackoverflow.com/a/15978467/16959)的总结解决方案，看：

```
alert([[]+1/!1][1^1][1>>1]+({}+[])[1<<1^11>>1]+(
[]+!!-[])[1<<1]+[/~/+{}][+!1][-~1<<1]+[([]+/-/[(
!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(
!!1+[])[1^1]])[1+(1^(11+1+1)<<1)],([]+/-/[(!!1+[
])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[
])[1^1]])[1^11<<1],([]+/-/[(!!1+[])[1>>1]+(!!1+[
])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^(11
+1+1)<<1]][((([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<
1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[(1<<1<<1<<1
)+1<<1]==({}+[])[1^1])*1)+((([]+/-/[(!!1+[])[1>>
1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1
]])[(1^11<<1)-1]==({}+[])[1^1])<<1)]+([,][~1]+[]
)[1-~1]+[[]+{}][!1.1%1][11111.1%11.1*111e11|!1]+
(/1/+1/[1<1][1%1])[1^11]+[[],[]+{}][1][+1]+(/<</
[1]+[])[1/1.1&1]) 
```

考虑到代码的复杂性和它产生的信息，它几乎就像 JavaScript 引擎在告诉你让它感觉有多特别:)

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-04-16T12:13:50.440

首先，我要感谢 Jason 和所有贡献者使用这个有趣的片段。我写这段代码*只是为了好玩*，以便在 2 月 14 日将它发送给我的妻子 :) 笔记本电脑上只安装了 Chrome，我无法检查它在 Firefox 和 IE 中的工作方式。此外，我并没有真正预料到`toString()`内置方法的表示在其他浏览器中可能会有所不同。

现在，*转向真正的问题*，让我们准确地看一下代码。是的，`"v"`这是真正的“问题”。`[native code]`除了可以从任何内置方法中获取的解析字符串外，我没有发现其他获取该字母的方法。由于我限制自己除了使用之外没有字符串和数字`1`，因此我需要利用一些名称中只有可用字符的方法。

可用字符可以从现有的关键字和字符串表示中获得，即从一开始我们就有`NaN`、`null`、`undefined`、`Infinity`、`true`、`false`和`"[object Object]"`。其中一些可以很容易地转换为字符串，例如`1/!1+[]`给`"Infinity"`。

`[]`我分析了数组、对象`{}`、正则表达式`/(?:)/`、数字`1.1`、字符串的不同内置方法`"1"`，并发现了一种漂亮的`RegExp`对象方法，称为[`test()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test). 它的名称可以由所有可用的字符组合而成，例如`"t"`，and `"e"`from`true`和`"s"`from `false`。我创建了一个字符串`"test"`，并使用方括号表示法解决了这个方法的正则表达式文字`/-/`，在这一行中正确识别：

```
/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]] 
```

正如已经讨论过的，这段代码在 Chrome 中被评估为：

```
function test() { [native code] } 
```

在 Firefox 中为：

```
function test() {
    [native code]
} 
```

在 IE 中为：

```
 function test() {     [native code] } 
```

^(（在后者中要*特别*注意`function`关键字前的空格）)

因此，正如您清楚地看到的那样，我的代码正在从提供的字符串中获取第 24 个字符，这在 Chrome 中是`"v"`（按计划），但不幸的是在 Firefox 和 IE 中 -`"n"`和`"["`分别。

为了在所有浏览器中产生相同的输出，我使用了与其他答案中所示*不同的方法。*现在修改后的版本是这样的：

```
javascript:[[]+1/!1][1^1][1>>1]+({}+[])[1<<1^11>>1]+([]+!!-
[])[1<<1]+[/~/+{}][+!1][-~1<<1]+/\[[^1]+\]/[([]+![])[1<<1<<
1]+(/|/[(1+{})[1+11>>>1]+[[]+{}][+!1][1]+([]+1/[])[1<<1>>1]
+([1<1]+[])[1+11>>>1+1]+[[!!1]+1][+[]][1-1]+([]+!!/!/)[1|1]
+(/1/[1]+[])[!1%1]+(-{}+{})[-1+1e1-1]+(1+[!!1])[1]+([]+1+{}
)[1<<1]+[!!/!!/+[]][+[]][1&1]]+/=/)[1e1+(1<<1|1)+(([]+/-/[(
!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1
]])[1^1]==+!1)]+(!![]+{})[1|1<<1]+[1+{}+1][!1+!1][(11>>1)+1
]](([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+
(!!1+[])[1^1]]))[1&.1][11>>>1]+([,][~1]+[])[1-~1]+[[]+{}][!
1.1%1][11111.1%11.1*111e11|!1]+(/1/+1/[1<1][1%1])[1^11]+[[]
,[]+{}][1<<1>>>1][1||1]+(/[<+>]/[1&1|1]+[1.1])[1/11.1&1.11] 
```

但是，为了吸引读者，我不会为此提供解决方案。老实说，我相信你会很容易理解它是如何工作的......有些甚至可以以跨浏览器的方式让他们心爱的人大吃一惊；）

# PS[又一个混淆器](http://jsbin.com/amecoq/2)

受到 Jason 创建通用混淆工具的想法的启发，我又写了一个。你可以在**JSBin 上找到它：http: [//jsbin.com/amecoq/2](http://jsbin.com/amecoq/2)**。它可以混淆任何包含数字`[0-9]`、小拉丁字母`[a-z]`和空格的文本。字符串长度主要受您的 RAM 限制（至少我的答案的主体已成功混淆）。Chrome、Firefox 和 IE 支持输出。

^(**提示：**该工具使用与上面介绍的不同的混淆方法。)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-12T22:35:27.453

为什么不`native code`使用问题中的位？这`'v'`在 Chrome 和 Firefox 中都给出了一个：

```
([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^11<<1]>([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^(11+1+1)<<1]?([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^11<<1]:([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^(11+1+1)<<1] 
```

* * *

**编辑以支持 IE 并在没有三元运算符的情况下执行此操作：** 这适用于 Chrome、IE 和 FF。构建一个数组并用于`==`确定浏览器。

```
[([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1+(1^(11+1+1)<<1)],([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^11<<1],([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^(11+1+1)<<1]][((([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[(1<<1<<1<<1)+1<<1]==({}+[])[1^1])*1)+((([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[(1^11<<1)-1]==({}+[])[1^1])<<1)] 
```

可读性：

```
[
    //ie
    ([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1+(1^(11+1+1)<<1)],
    //ch
    ([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^11<<1],
    //ff
    ([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^(11+1+1)<<1]
]
[
    //ch?
    ((([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[(1<<1<<1<<1)+1<<1]==({}+[])[1^1])*1)+
    //ff?
    ((([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[(1^11<<1)-1]==({}+[])[1^1])<<1)
] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-12T20:07:51.610

这几乎是我能得到的最接近的结果，不幸的是，它通过调用以下内容违反了原始混淆的约定`unescape()`：

```
unescape((/%/+[])[1]+(/1/[1]+[])[1%1]+(+!1)+(+!1)+(1e1+(11*(1-~1)<<1))) 
```

拆除：

```
(/%/+[])[1]          => "%"
(/1/[1]+[])[1%1]     => "u"
(+!1)                => "0"
(+!1)                => "0"
(1e1+(11*(1-~1)<<1)) => "76"
===========================
unescape("%u0076")   => "v" 
```

其他想法：

1.  不知何故到达`unescape("\x76")`
2.  以某种方式转换`118`而不调用`String.fromCharCode()`
3.  从包含“无效”一词的异常中获取文本

**更新：**

我开始玩代码高尔夫，并一直在缩短它，用更多`1`的 s 替换零件等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-12T18:33:04.697

这是生成 n/v 的部分：

```
([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[1^11<<1] 
```

在 Firefox 中，`([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])`计算结果为

```
"function test() {
    [native code]
}" 
```

在 Chrome 中它是

```
"function test() { [native code] }" 
```

`1^11<<1`等于 23。因此，由于 Firefox 的额外空格，这还不足以到达“v”，而是“n”。

这就是为什么您不应该依赖 Function#toString 行为的原因。;)

编辑：最后我找到了一个合理混淆的跨浏览器版本：

```
[[]+1/!1][1^1][1>>1]+({}+[])[1<<1^11>>1]+([]+!!-[])[1<<1]+[/~/+{}][+!1][-~1<<1]+([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[(1^11<<1)+(parseInt("010")<10?(1+1+1+1):0)]+([,][~1]+[])[1-~1]+[[]+{}][!1.1%1][11111.1%11.1*111e11|!1]+(/1/+1/[1<1][1%1])[1^11]+[[],[]+{}][1][+1]+(/<</[1]+[])[1/1.1&1] 
```

这将 n/v 部分替换为：

```
([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])[(1^11<<1)+(parseInt("010")<10?(1+1+1+1):0)] 
```

它利用了 parseInt 的差异（显然 Firefox 将以 0 开头的数字解析为八进制，而 Chrome 没有）在 Firefox 的情况下添加 4，从而在两种情况下都从“native”获取“v”（我找不到另一个 'v '：P）。
parseInt 看起来有点不合适，但这是我现在能做的最好的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-12T20:54:44.370

对于*一般*用例，如果字符大小写不是一个大问题，我可能会倾向于作弊。

创建函数“c”，将数字 0 .. 25 转换为字符。

```
c=function(v){for(var i in window){for(var ci in i){if(parseInt(i[ci],(10+11+11)+(1<<1)+(1<<1))==(v+10)){return i[ci]}}}}; 
```

出于性能原因，如果需要，请预先缓存这些字母。

```
l=[];for(var i=0; i<(11+11)+(1<<1)+(1<<1);i++){l[i]=c(i);} 
```

在 Chrome 控制台中，生成的数组如下所示：

```
> l;
["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "K", "l", "m", "n", "o", "p", "q", "r", "S", "t", "u", "v", "w", "x", "y", "Z"] 
```

所以......你的*v*可能是`l[10+10+1]`.

或者，像这样的一般解决方案：

```
p=(function(){10%11}+[])[1+11+(1<<1)]; // "%"
u=(function(){club=1}+[])[1+11+(1<<1)]; // "u"
vc=p+u+(0+[])+(0+[])+((111>>1)+11+10+[]); // "%u0076"
unescape(vc); 
```

或者，对于这个*特定*的问题，也许只是：

```
(function(){v=1}+[])[10+(1<<1)]; // "v" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-12T18:37:08.587

这在 Chrome 中给出了 av：

```
Object.getOwnPropertyNames(Object)[17][3]; 
```

这在 Firefox 中是这样的：

```
Object.getOwnPropertyNames(Object)[9][3] 
```

他们都将其从 中提取出来`Object.prototype.preventExtensions()`，因此您可能会找到一种跨浏览器的方式来引用该方法。（对于初学者来说，它是 Object.Prototype 中唯一的 17 个字符的名称。）

随意构建一个更加模糊的版本，并将所有功劳归于自己，我没时间了；）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-12T18:33:18.610

在 chrome 中，表达式`([]+/-/[(!!1+[])[1>>1]+(!!1+[])[1<<1^1]+(!1+[])[1|1<<1]+(!!1+[])[1^1]])`计算为`"function test() { [native code] }"`，`[1^11<<1]`计算结果为 23（按位运算符导致变量被截断为 32 位）

# c# - 如何获得运行或段落的高度

> ID：15978206
> 
> 赞同：3
> 
> 时间：2013-04-12T18:16:48.413
> 
> 标签：c#, .net, wpf, height, flowdocument

我找到了`Run`or `Paragraph`，`FlowDocument`现在我需要知道它的**高度**。

IE

```
while (navigator.CompareTo(flowDocViewer.Document.ContentEnd) < 0)
  {
      TextPointerContext context = navigator.GetPointerContext(LogicalDirection.Backward);
      Run run = navigator.Parent as Run;
      // I need to get HEIGHT of Run in pixels somehow 
```

真的可以做到吗？

![在此处输入图像描述](https://i.stack.imgur.com/82WWP.png)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-15T13:30:02.647

我正在使用的一个小功能。输入是一个包含 Section 的字符串。您可以轻松渲染其他块元素，例如段落。

您也可以省略 Parse 方法的第二个参数。

诀窍不是测量段落，而是测量包含 RichTextBox 的 ViewBox。这是实际呈现 Flowdocument 所必需的。ViewBox 动态获取 rtb 的大小。也许你甚至可以在没有 ViewBox 的情况下做到这一点。我花了一些时间来解决这个问题，它对我有用。

请注意`Width`的`RichTextBox`设置为`double.MaxValue`。这意味着当您要测量单个段落时，它必须非常长，否则所有内容都在一行中。所以这只有在你知道输出设备的宽度时才有意义。因为这是一个 FlowDocument，所以没有宽度，它会流动；）我用它来对我知道纸张大小的 FlowDocument 进行分页。

返回的高度是与设备无关的单位。

```
private double GetHeaderFooterHeight(string headerFooter)
        {

            var section = (Section)XamlReader.Parse(headerFooter, _pd.ParserContext);
            var flowDoc = new FlowDocument();
            flowDoc.Blocks.Add(section);

            var richtextbox = new RichTextBox { Width = double.MaxValue, Document = flowDoc };
            var viewbox = new Viewbox { Child = richtextbox };

            viewbox.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
            viewbox.Arrange(new Rect(viewbox.DesiredSize));

            var size = new Size() { Height = viewbox.ActualHeight, Width = viewbox.ActualWidth };

            return size.Height;
        } 
```

# ios - iOS：registerForRemoteNotificationTypes 方法被卡住，没有响应

> ID：15978208
> 
> 赞同：0
> 
> 时间：2013-04-12T18:16:52.223
> 
> 标签：ios

当我在我的 iPhone 4 设备上调用该`registerForRemoteNotificationTypes`方法时，它成功并且我取回了一个设备令牌。

我尝试在同事的 iPhone 4 上运行相同的应用程序，调用该`registerForRemoteNotificationTypes`方法后，没有任何反应。它不会通过，它不会失败。据我所知，在尝试注册远程通知后，只有两种方法中的一种会触发：

`didRegisterForRemoteNotificationsWithDeviceToken`

或者

`didFailToRegisterForRemoteNotificationsWithError`

我不知道还能做什么，我已经尝试在她的手机上卸载并重新安装该应用程序，我从她的设备中手动删除了配置文件并重新安装了该应用程序。还是行不通。

有任何想法吗？

**编辑**：*她在澳大利亚购买手机并且现在住在加拿大的事实与它有什么关系吗？*

# c# - 像这样清理 while 循环的首选方法是什么？

> ID：15978213
> 
> 赞同：0
> 
> 时间：2013-04-12T18:17:06.440
> 
> 标签：c#, control-flow

我对我的代码有点强迫症，想知道其他人如何构建以下示例控制流。我还没有找到任何通过我的“漂亮”代码测试的东西。

```
var records = repo.GetRecords(batch:10);

while(records.Any())
{
    var processed = ProcessRecords(records);        
    repo.DeleteRecords(processed);      
    records = repo.GetRecords(batch:10);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:35:31.623

类似于上面的@John Kugleman，但使用 while 而不是 for。

```
while (true)
{
    var records = repo.GetRecords(batch:10);

    if (!records.Any()) break;

    var processed = ProcessRecords(records);        
    repo.DeleteRecords(processed);      
} 
```

您还可以找到这样的问题：

[使用 LINQ 将列表拆分为子列表](https://stackoverflow.com/questions/419019/split-list-into-sublists-with-linq)

那问如何“分块”一系列项目。该技术可能适用于您的情况，也可能不适用于您的情况。

假设使用 Chunk 扩展方法（类似于@TickleMeElmo 的答案或从@JaredPar 的答案拆分），您的代码可能如下所示：

```
foreach (var chunk in repo.GetRecords().Chunk(10))
{
  var processed = ProcessRecords(chunk);
  repo.DeleteRecords(processed);
} 
```

如果您已经在存储库中内置了某种“分块”，则此习惯用法可能效果不佳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:20:18.623

```
while (true)
{
    var records = repo.GetRecords(batch:10);

    if (!records.Any())
        break;

    var processed = ProcessRecords(records);        
    repo.DeleteRecords(processed);      
} 
```

# c# - String.Split 与字符串？

> ID：15978215
> 
> 赞同：4
> 
> 时间：2013-04-12T18:17:12.743
> 
> 标签：c#, .net

我有一个可能是一个非常简单的问题。

我想做一个经典的`String.Split()`，但用一个字符串，而不是一个字符。就像我做的一样，喜欢`string.Split("word")`并取回一个数组`string.Split('x')`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T18:18:36.677

您可以使用[`String.Split(string[], StringSplitOptions options)`](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx).

代码将如下所示：

```
var results = theString.Split(new[] {"word"}, StringSplitOptions.None); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:20:04.620

有一个可用的函数重载，`string.Split`但它需要一个数组和一个枚举。

```
string test = "1Test2";
string[] results = test.Split(new string[] { "Test" }, StringSplitOptions.None); 
```

将产生一个包含“1”和“2”的数组。

# eclipse - 如何在没有pom备份文件的情况下更新maven版本

> ID：15978218
> 
> 赞同：49
> 
> 时间：2013-04-12T18:17:21.043
> 
> 标签：eclipse, maven, versions-maven-plugin

您如何使用版本插件运行 maven 以更新几个 pom.xml 文件中的版本而不获取烦人的`pom.xml.versionsBackup`文件？（我在版本控制中有我的 poms，所以我不需要备份）。

我运行这个命令来更新版本：

`mvn versions:set -DnewVersion=3.8.0-SNAPSHOT`

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-04-12T18:17:21.043

要防止创建备份文件，请`generateBackupPoms`改用：

`mvn versions:set -DgenerateBackupPoms=false -DnewVersion=3.9.0-SNAPSHOT`

我还看到如果你想这样做，你可以在 pom.xml 的插件部分设置**generateBackupPoms 。**

请注意，如果您使用的是 eclipse，则可以使用如下运行配置运行命令：

![在此处输入图像描述](https://i.stack.imgur.com/vsd10.png)

另见：[http ://www.mojohaus.org/versions-maven-plugin/set-mojo.html](http://www.mojohaus.org/versions-maven-plugin/set-mojo.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-09-21T08:26:09.047

之后`mvn versions:set`，运行命令`mvn versions:commit`。

所有 pom 备份都将被删除。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-17T22:01:32.443

**`mvn versions:set -DgenerateBackupPoms=false`**删除备份并且还会要求设置新版本，而不是在命令中传递版本。

# windows - 从 PowerShell 脚本中重新启动服务器后重新连接到映射驱动器

> ID：15978220
> 
> 赞同：0
> 
> 时间：2013-04-12T18:17:23.653
> 
> 标签：windows, powershell

我有一个 PowerShell v1 脚本，它通过映射驱动器连接到远程服务器并来回移动文件，远程服务器由驱动器号“M”和 UNC 路径 REMOTESERVER\DATA 标识：

```
(M:) \\REMOTESERVER\DATA 
```

当远程服务器重新启动时，我认为我搞砸了，因为现在脚本将无法访问映射的驱动器。

问题不在于映射驱动器何时真正消失，而在于重新启动后，需要进行身份验证，而 Windows 显然不会记住这一点。

如何在 PowerShell 脚本中以编程方式处理这种情况？

有没有办法通过编写一些 PowerShell 代码重新连接到映射驱动器？

只是好奇这是如何实现的？

# c# - 如何在 MS Access 中使用 C# 获取所有表名和列名？

> ID：15978225
> 
> 赞同：3
> 
> 时间：2013-04-12T18:17:34.980
> 
> 标签：c#, winforms, ms-access-2007

如何使用C#获取Access 2007中所有表的名称和列表的名称？

我想将表名绑定到组合框，将列名绑定到列表框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:28:36.407

这个简单的方法会给你一个包含所有列名称的数据表

```
void Main()
{
     using(OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;" + 
            @"Data Source=D:\temp\temp.mdb;Persist Security Info=False;")) 
     { 
       con.Open();
       DataTable schema = con.GetSchema("Columns");
       foreach(DataRow row in schema.Rows)
           Console.WriteLine("TABLE:" + row.Field<string>("TABLE_NAME") + 
                             " COLUMN:" + row.Field<string>("COLUMN_NAME"));
    }
} 
```

您还可以尝试使用“表”更改“列”，以获取包含有关表的更多信息的不同数据表。（也是索引的“索引”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:35:16.477

这段代码是：

```
 OpenFileDialog openfiledialog1 = new OpenFileDialog();
        openfiledialog1.Title = "path select ";

        openfiledialog1.Filter = "Access 2003 (*.mdb)|*.mdb|Access 2007|*.accdb";
        if (openfiledialog1.ShowDialog() == DialogResult.OK)
        {
            txtpath.Text = openfiledialog1.InitialDirectory + openfiledialog1.FileName;
            using (OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + openfiledialog1.FileName))
            {

                con.Open();
                DataTable schema = con.GetSchema("Columns");
                foreach (DataRow row in schema.Rows)
                {         
                   listBox1.Items.Add(row.Field<string>("COLUMN_NAME"));
                   cmbloadtable.Items.Add(row.Field<string>("TABLE_NAME"));
                }

            }
        } 
```

# xsd - XSD 在每个字段级别都有元数据

> ID：15978228
> 
> 赞同：1
> 
> 时间：2013-04-12T18:17:42.803
> 
> 标签：xsd, metadata

我的 XML 结构如下（只是大型 XML 的一部分）

```
<Person>
<firstName>
<lastName>
<Partner>
   <firstName>
...
</Person> 
```

我需要为每个字段保留额外的元数据，例如以指示其是否可更新

ic 两种方法

1) 在每个 FIELD 级别添加元数据。我觉得这使 XSD 过于复杂，因为每个元素现在都是一个 OBJECT

```
<Person>
   <firstName updatable="true" ... />
   ...
</Person> 
```

2）分离出元数据如下

但是我如何将元数据链接到数据？通过一个独特的名字？使用 XML 的人可以轻松链接它吗？有没有更好的办法？谢谢！

```
 <data>
     <Person>one
       <firstName>
       <lastName>
       <Partner>
           <firstName>
       ...
     </Person>
     <Person>two
       <firstName>
       <lastName>
       <Partner>
           <firstName>
       ...
    </Person>
</data>
<metadata>
    <field name="firstName" updateble="false"/>
    ....
</metadata> 
```

我认为这类似于将 [元数据添加到 XSD 定义](https://stackoverflow.com/questions/633969/add-metadata-to-an-xsd-definition) ，但它没有任何答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:36:56.493

我的（也许是修辞）问题是，如果每个 XML 与模型的关系是静态的，为什么有人希望看到这个元数据？

我将向您展示一个 UBL XSD 片段（XML 命名空间被忽略为不相关）：

```
 <xsd:element ref="cbc:UBLVersionID" minOccurs="0" maxOccurs="1">
    <xsd:annotation>
       <xsd:documentation>
          <ccts:Component>
             <ccts:ComponentType>BBIE</ccts:ComponentType>
             <ccts:DictionaryEntryName>Application Response. UBL Version Identifier. Identifier</ccts:DictionaryEntryName>
             <ccts:Definition>The earliest version of the UBL 2 schema for this document type that defines all of the elements that might be encountered in the current instance.</ccts:Definition>
             <ccts:Cardinality>0..1</ccts:Cardinality>
             <ccts:ObjectClass>Application Response</ccts:ObjectClass>
             <ccts:PropertyTerm>UBL Version Identifier</ccts:PropertyTerm>
             <ccts:RepresentationTerm>Identifier</ccts:RepresentationTerm>
             <ccts:DataType>Identifier. Type</ccts:DataType>
             <ccts:Examples>2.0.5</ccts:Examples>
          </ccts:Component>
       </xsd:documentation>
    </xsd:annotation>
 </xsd:element> 
```

您可以在这里看到有很多结构化数据可以很容易地作为与您的问题相关的内容传递。但从根本上说，这是一种使用 XSD 注释机制的机制，以实现与 XSD 相关的事情。另一种是 JAXB 自定义绑定机制使用的：

```
<xsd:simpleType name="ZipCodeType">
    <xsd:annotation>
        <xsd:appinfo>
            <jxb:javaType name="int" parseMethod="javax.xml.bind.DatatypeConverter.parseInt" printMethod="javax.xml.bind.DatatypeConverter.printInt"/>
        </xsd:appinfo>
    </xsd:annotation>
    <xsd:restriction base="xsd:integer">
        <xsd:minInclusive value="10000"/>
        <xsd:maxInclusive value="99999"/>
    </xsd:restriction>
</xsd:simpleType> 
```

虽然这与 UBL 示例不同（documentation vs. appinfo），但两者都使用 XSD 注释机制。

JAXB 的自定义绑定还支持一个模型，其中自定义绑定与 XSD 分离（在它们自己的单独 XML 文件中）。自定义绑定文件（在您的案例中为元数据）和 XSD（在您的案例中为 XML）之间的关联是通过 XPath 匹配完成的。

这带来了另一个澄清：您想到的处理模型是什么？动态（即元模型是静态的，但可以应用于任意 XSD）？平台？如果它恰好与您的平台相匹配，下面是一个可以以动态方式满足您需要的解决方案。

。网：

*   按照我上面提到的方式构建 XSD（即某种注释）。
*   在运行时，对照此 XSD 验证您的 XML。然后每个节点都将填充[SchemaInfo](http://msdn.microsoft.com/en-CA/library/system.xml.xmlnode.schemainfo.aspx)属性。使用 [System.Xml.Schema](http://msdn.microsoft.com/en-us/library/system.xml.schema.aspx)中的类，您可以轻松地将 SchemaInfo 属性中的[SchemaElement](http://msdn.microsoft.com/en-CA/library/system.xml.schema.ixmlschemainfo.schemaelement.aspx)或[SchemaAttribute处理为](http://msdn.microsoft.com/en-CA/library/system.xml.schema.ixmlschemainfo.schemaattribute.aspx)[XmlSchemaAnnotated](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaannotated.aspx)类，这两者都是。

以上基本上是将PSVI应用于您的XML。Java 也是如此（在此[Xerces 页面上](http://xerces.apache.org/xerces2-j/faq-dom.html)搜索`How do I retrieve PSVI from the DOM?`）...

我也可以描绘出 XSLT 的解决方案，或者根本不涉及 XSD……以上内容应该足以让您入门。

# hadoop - AWS EC2 - Cloudera Manager - 停止实例

> ID：15978229
> 
> 赞同：0
> 
> 时间：2013-04-12T18:17:49.500
> 
> 标签：hadoop, amazon-ec2, cloudera

我已经使用 cloudera manager 在 Amazon EC2 上设置了 hadoop 集群。Cloudera 经理创建了两个实例，一切都按预期工作。我试图通过 AWS 控制台停止 cloudera 创建的实例，但没有停止的选项。我们只有“终止”和“重启”。我不想终止这些实例，因为我想重用这些实例。

如何停止这些实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:27:12.360

由于您的实例来自实例存储支持的 AMI，您将只能重新启动和终止实例。查看“根设备”下的管理控制台以确认是这种情况。

为了解决这个问题，您可以从您的实例创建一个 AMI，然后使用新的 AMI 重新启动您的环境，这将使您可以选择停止您的实例。

# linux - 检测cryptofs设备或分区

> ID：15978230
> 
> 赞同：1
> 
> 时间：2013-04-12T18:17:56.107
> 
> 标签：linux, encryption

我正在尝试为 cryptofs 加密设备/分区开发自动挂载。问题是我没有 Linux 底层的经验。

有什么方法可以检测到系统中何时插入了 cryptofs 设备或分区？（当您插入具有常规分区和加密分区的加密狗时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:11:25.353

从未尝试过，但我会遵循这种方法：

在 Linux 中，即插即用由 hal 和/或 udev 处理。hal 有点老，最近的大多数发行版都使用 udev。

您可以开始研究“libudev”。使用libudev api，您将能够获取有关连接设备的信息。

这应该有帮助：[http ://www.signal11.us/oss/udev/](http://www.signal11.us/oss/udev/)

之后，打开设备，开始读取文件系统信息，判断是不是cryptofs

看看，如果这个答案有帮助：[How to programmatically discover the filesystem without mount the device (like "fdisk -l")](https://stackoverflow.com/questions/12495537/how-to-programmatically-discover-the-filesystem-without-mounting-the-device-lik)

# php - 喜欢和评论 Facebook 以外的页面/个人资料的帖子

> ID：15978236
> 
> 赞同：0
> 
> 时间：2013-04-12T18:18:14.410
> 
> 标签：php, ajax, facebook, facebook-graph-api, facebook-comments

写细节让大家好好理解——

1.  我创建了一个 facebook 应用程序以通过该应用程序 ID 和密钥生成访问令牌

2.  我使用该访问令牌在我的 php 网站中使用 Graph API 获取任何 Facebook 页面或个人资料或群组的墙贴，这是我的目标

3.  现在我希望任何用户都可以喜欢或评论我网站中的“Facebook 页面墙帖子”帖子，我在上面第 2 节中通过图形 api 在我的网站上显示了该帖子

我可以使用我的访问令牌（具有“publish_stream”权限）使用 Graph API 调用来评论帖子或喜欢帖子，但是如果我使用我的访问令牌对另一个用户（登录到 fb）尝试相同的操作，那么它不起作用。所以这意味着我必须为该用户生成另一个具有“publish_stream”权限的访问令牌。我必须这样做吗？

为什么我不希望如果我编写代码为任何没有“应用程序权限对话框”的用户生成具有“publish_stream”权限的访问令牌，让用户知道他们给予了该权限，那么它可能有很大的安全性如果黑客得到了我的代码，他可以用那个访问令牌做任何事情，他甚至可以删除所有用户配置文件！！！！或帖子！！！！代表用户的任何事情。

那么最好的评论方式是什么，比如在 fb 之外的任何页面/个人资料/组的帖子上（我将在 facebook 之外的网站上使用 ajax 调用）....

脚注：我的客户也想要它..非常想这样做。

# c# - 从两种颜色计算中间颜色（从渐变）

> ID：15978240
> 
> 赞同：1
> 
> 时间：2013-04-12T18:18:25.283
> 
> 标签：c#, wpf, xaml, math, colors

我的 WPF 应用程序，我有两个颜色对象。我想从我的两种颜色中计算出“中间”颜色。

我的两种颜色来自渐变，我想找到中间颜色。

谁能帮我计算一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T18:32:35.463

假设你有颜色的 RGB 值，你可以通过线性插值来做到这一点。如果原始颜色是`(R1, G1, B1)`并且`(R2, G2, B2)`它们之间的颜色可以通过平均找到：`((R1 + R2) / 2, (G1 + G2) / 2, (B1 + B2) / 2)`。

（假设您只是在寻找中间的颜色 - 如果您要计算整个渐变，请在每个组件上使用[线性插值。）](http://en.wikipedia.org/wiki/Linear_interpolation)

# javascript - 是否有用于在元素中设置断点的插件？

> ID：15978241
> 
> 赞同：0
> 
> 时间：2013-04-12T18:18:28.330
> 
> 标签：javascript, css, media-queries

我经常通过 enquire.js 或媒体查询来检测窗口宽度，但是如果我想根据元素的宽度（例如 div）设置不同的样式，然后根据其宽度更改其子元素的外观怎么办？谢谢。如果有帮助，我正在使用 SASS。

# c# - 在中继器中，我应该如何添加图像和标签并将它们垂直对齐？

> ID：15978243
> 
> 赞同：1
> 
> 时间：2013-04-12T18:18:45.053
> 
> 标签：c#

我在转发器中显示图像和文本框，但问题是我试图让它看起来像在右边的图像中，所以图像是 eft 和文本在图像的右边我试图让它工作用户，但如果在新行上正常，则只有图像，但标签很奇怪这个问题。这是我的代码，请看看我做错了什么，也许可以帮助我解决我的问题。这是代码片段！

```
if (vData.SkillNameOther != null && vData.SkillLevel == "Beginner")
{
    lbl.Text = vData.SkillNameOther+ "<br />"; 
    img.ImageUrl = @"~/_layouts/images/Cv.Knowit/pie-1-4.png";

    RepeaterDataBase.Controls.Add(lbl);
    RepeaterDataBase.Controls.Add(img);
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/Yk4sr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:05:17.293

首先，您以错误的顺序添加控件，标签应该添加到第二个。

即便如此，标签仍然会对齐底部。然后你需要垂直对齐：

[垂直对齐图像旁边的文本？](https://stackoverflow.com/questions/489340/how-do-i-vertically-align-text-next-to-an-image-with-css)

另一种选择是使用表格（见下面的帖子）并垂直对齐单元格：

[如何在 ASP.Net Repeater 中创建三列表](https://stackoverflow.com/questions/3442897/how-to-create-a-three-column-table-in-asp-net-repeater)

# php - 读取最后插入的行

> ID：15978244
> 
> 赞同：0
> 
> 时间：2013-04-12T18:18:52.240
> 
> 标签：php, mysql, transactions, pdo

我有以下插入语句

```
global $dbUser;
global $dbPW;
$query = "INSERT INTO comments (post_id, text) VALUES (:post_id,:text)";
$db = new PDO('mysql:host=localhost;dbname=test', $dbUser, $dbPW);
$statement = $db -> prepare($query);
$statement -> execute(array(':post_id' => $postId, ':text' => $text)); 
```

我想**在同一个事务**中读取并返回插入的行。

我知道我可以得到

> $db->lastInsertId('id')

但是我知道如何在 PDO 中进行交易，但我不知道如何使用上述准备好的语句（这是出于安全目的 IIRC 的首选方法）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:25:26.817

您不需要在这里进行任何交易。
如果您需要自动生成的 id，只需运行 $db->lastInsertId() - 就是这样。

# html - 在 http 标头响应或 html 元标记中设置缓存控制有什么区别？

> ID：15978247
> 
> 赞同：4
> 
> 时间：2013-04-12T18:19:12.507
> 
> 标签：html, http, tomcat, caching, firebug

这是一个 html 元标记示例：

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="private"> 
```

它设置在 html 元标记上以启用缓存。

我用 Tomcat 和 Firebig 试过了。服务器在 html 元标记中发送信息。但在 http 标头响应中没有关于缓存的信息。

但是，http 标头响应中的类似内容是有效的：

```
Cache-Control: private 
```

所以我想知道：什么时候将信息写在http响应中？

有两种设置相同信息的方式（元标记和http响应行）有什么需要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:56:08.853

来自[HTML 4.01 规范](http://www.w3.org/TR/html4/struct/global.html#h-7.4.4.2)

> ## 元元素
> 
> http-equiv = 名称 [CI]
> 
> 该属性可以用来代替 name 属性。**HTTP 服务器**使用此属性来收集 HTTP 响应消息头的信息。

这就是想法。*服务器的工作是在元元素通过网络发送之前*将其转换为真正的 HTTP 标头。

但这意味着服务器必须在发送每个 HTML 文档之前对其进行解析，因此它实际上从未发生过。

浏览器尽其所能拾取这些部分，但缓存规则也适用于代理，并且那些只会处理真正的 HTTP 标头，因此缓存控制 http-equiv 元元素在 HTML5 中无效。

您应该始终使用真正的 HTTP 标头，这些标头要么由服务器作为其配置的一部分添加，要么在服务器端代码中（即，用 PHP、Java servlet、ASP.NET 等编写的代码）

# c#-4.0 - 如何将图像保存到文件夹并在需要时检索

> ID：15978250
> 
> 赞同：1
> 
> 时间：2013-04-12T18:19:28.227
> 
> 标签：c#-4.0

```
private void btn_Browse_Click(object sender, EventArgs e)
{
    OpenFileDialog ofd = new OpenFileDialog();
    ofd.Filter = "image files |*.jpg;";
    DialogResult dr = ofd.ShowDialog();
    pictureBox1.Image = Image.FromFile(ofd.FileName);
} 
```

我正在使用此代码在图片框中获取图片，但我想将图像保存在文件夹中，以便稍后再次显示给用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T19:00:24.347

```
 private void btn_Save_Click(object sender, EventArgs e)
    {
        FolderBrowserDialog fbd = new FolderBrowserDialog();
        if (fbd.ShowDialog()==DialogResult.OK)
        {
            pictureBox1.Image.Save(fbd.SelectedPath + txtFileName + ".jpg");
        }
    } 
```

其中 txtFileName ix 文本框，您将在其中写入您要保存的图像的名称。

# ruby-on-rails - Rails 如何存储其他服务的密码？

> ID：15978253
> 
> 赞同：1
> 
> 时间：2013-04-12T18:19:33.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

存储用于其他服务的密码的最安全方法是什么？

例子：

需要为其他站点存储密码以执行 rake 任务以获取需要身份验证的数据的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:27:43.757

您可以将此数据存储为环境变量。例如，对于我的一个项目，我需要我的应用程序能够访问 Github 登录。通过将以下行添加到我的 .bashrc 文件中，将此 Github 登录名存储为环境变量。

```
export GITHUB_LOGIN=myLogin 
```

在我的应用程序的配置文件中，我这样引用这个环境变量：

```
:github_login: <%= ENV['GITHUB_LOGIN'] %> 
```

然后应用程序会加载此配置文件，如下所示：

```
require 'erb'
raw_data = File.read(config_file)
erbified_data = ERB.new(raw_data).result 
```

# java - 无法打开套接字服务器

> ID：15978257
> 
> 赞同：0
> 
> 时间：2013-04-12T18:19:49.053
> 
> 标签：java, sockets

我正在尝试建立一个简单的客户端和服务器连接。但是，服务器似乎没有适当地绑定到端口。

我用于服务器的代码如下所示：

```
class Server extends Thread
{
    public boolean running = true;

    public Server(Main main) throws IOException
    {
        super();
        ServerSocket server_sock = new ServerSocket(8123);

        while (running)
        {
            new Connector(server_sock.accept(), main);
        }
        server_sock.close();
    }
}

class Connector extends Thread
{
    public Connector(Socket c)
    {
        super();
        system.out.println("Connecting"+c.getRemoteSocketAddress()+":"+c.getLocalPort());
        c.setKeepAlive(true);
        //wait for the connection to end
        system.out.println("Disconnecting"+c.getRemoteSocketAddress()+":"+c.getLocalPort());
    }
} 
```

客户端很简单，我只想连接到服务器（下面显示的行是通过其主程序中的另一个程序运行的）：

```
s = new Socket("127.0.0.1", 8123); // Start
s.close(); // Stop 
```

会发生什么：服务器运行并且不抛出任何异常。希望我在抛出异常的地方运行客户端`Exception in thread "main" java.net.ConnectException: Connection refused: connect`。

所以我做了一个简单的python客户端和服务器对来检查Java服务器/客户端：

*服务器：*

```
from socket import *

s = socket(AF_INET, SOCK_STREAM)
s.bind(('', 8123))
s.listen(1)
conn, addr = s.accept()
print("CONNECTED: ", addr)
conn.close() 
```

*客户：*

```
from socket import *

s = socket(AF_INET, SOCK_STREAM)
s.connect(('localhost', 8123))
s.close() 
```

我用 python 客户端测试了 python 服务器作为健全性测试，效果很好。我用java客户端测试了python服务器，他们都合作得很好。但是，python 客户端和 java 系列都不起作用。我的 python 服务器提供了错误：

```
Traceback (most recent call last):
  File "C:\Users\SIGABRT\Desktop\tcp.py", line 4, in <module>
    s.connect(('localhost', 8123))
ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it 
```

这通常意味着服务器未正确启动。那么我在使用 Java 服务器客户端时做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:00:17.877

我有同样的问题。对我来说，这样做很有帮助

```
s = new Socket("localhost", 8123); 
```

我想知道为什么它不适用于IP ...

### 解释

至少在我的 Ubuntu 系统上，似乎`new ServerSocket(port)`建立了与 IPv6 的连接 - “127.0.0.1”是 IPv4，无法连接到正在设置的套接字。另一种方法是初始化服务器套接字

```
new ServerSocket(port, 32, Inet4Address.getByName("127.0.0.1")); 
```

我不知道在通过环回地址使用时，在 IPv6 上使用 IPv4 是否会产生真正的差异（性能方面）。

# jquery - jquery 数据表功能不适用于 asp:repeater

> ID：15978258
> 
> 赞同：2
> 
> 时间：2013-04-12T18:19:50.270
> 
> 标签：jquery, asprepeater

我已经在这个上搜索了一段时间，我很困惑。对于我正在研究的东西，我有一个非常非常基本的原型，但我不确定出了什么问题。我有一个在代码隐藏中绑定数据的中继器，我在 .js 中为它调用 .datatable ...该表显示了所有花哨的功能，但没有一个功能真正起作用。这是我的代码，我错过了什么吗？

标记：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Repeater ID="repeater" runat="server">
        <HeaderTemplate>
            <table id="booksTable" border="1" width="100%">
                <thead>
                    <tr>
                        <th>
                            author
                        </th>
                        <th>
                            title
                        </th>
                        <th>
                            genre
                        </th>
                    </tr>
                </thead>
        </HeaderTemplate>
        <ItemTemplate>
            <tbody>
                <tr>
                    <td>
                        <%#DataBinder.Eval(Container.DataItem, "author")%>
                    </td>
                    <td>
                        <%#DataBinder.Eval(Container.DataItem, "title")%>
                    </td>
                    <td>
                        <%#DataBinder.Eval(Container.DataItem, "genre")%>
                    </td>
                </tr>
            </tbody>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater>
    <script type="text/javascript" src="js\jquery-1.4.1.js"></script>
    <script type="text/javascript" src="js\jquery.dataTables.js"></script>
    <script type="text/javascript" src="js\GridControls.js"></script>
</asp:Content> 
```

代码隐藏：

```
namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                DataTable dataTable = CreateDataTable();
                repeater.DataSource = dataTable;
                repeater.DataBind();
            }
        }

        private static DataTable CreateDataTable()
        {
            DataTable dataTable = new DataTable();
            dataTable.Columns.Add(new DataColumn("Author", typeof(string)));
            dataTable.Columns.Add(new DataColumn("Title", typeof(string)));
            dataTable.Columns.Add(new DataColumn("Genre", typeof(string)));
            dataTable.Rows.Add("douglas Adams", "the hitchhiker's guide to the galaxy", "science fiction");
            dataTable.Rows.Add("j.d. salinger", "the catcher in the rye", "fiction");
            dataTable.Rows.Add("aldous huxley", "brave new world", "science fiction");
            dataTable.Rows.Add("ayn rand", "atlus shrugged", "fiction");
            dataTable.Rows.Add("barbara w. tuchman", "the guns of august", "non-fiction");
            dataTable.Rows.Add("joshua foer", "moonwalking with einstein", "non-fiction");
            dataTable.Rows.Add("esther forbes", "johnny tremain", "historical fiction");
            dataTable.Rows.Add("harold keith", "rifles for watie", "historical fiction");
            dataTable.Rows.Add("tom clancy", "rainbow six", "military fiction");
            dataTable.Rows.Add("tom clancy", "clear and present danger", "military fiction");
            dataTable.Rows.Add("tom clancy", "the sum of all fears", "military fiction");
            dataTable.Rows.Add("stephen king", "christine", "horror fiction");
            dataTable.Rows.Add("stephen king", "pet cemetary", "horror fiction");
            dataTable.Rows.Add("stephen king", "the shining", "horror fiction");
            dataTable.Rows.Add("brian jacques", "redwall", "fantasy fiction");
            dataTable.Rows.Add("benjamin franklin", "the autobiography of benjamin franklin", "autobiography");
            return dataTable;
        }
    }
} 
```

javascript:

```
$(document).ready(function () {
    $('#booksTable').dataTable({
        'sPaginationType': 'full_numbers'
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:38:23.617

当你这样做时：

```
<ItemTemplate>
    <tbody>
        <tr>
            <td>
                <%#DataBinder.Eval(Container.DataItem, "author")%>
            </td>
            <td>
                <%#DataBinder.Eval(Container.DataItem, "title")%>
            </td>
            <td>
                <%#DataBinder.Eval(Container.DataItem, "genre")%>
            </td>
        </tr>
    </tbody>
</ItemTemplate> 
```

您正在添加多个`<tbody>`元素。添加`<tbody>`到你的`HeaderTemplate`和`</tbody>`你的`FooterTemplate`，然后再试一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-29T07:52:01.847

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Repeater ID="repeater" runat="server">
        <HeaderTemplate>
            <table id="booksTable" border="1" width="100%">
                <thead>
                    <tr>
                        <th>
                            author
                        </th>
                        <th>
                            title
                        </th>
                        <th>
                            genre
                        </th>
                    </tr>
                </thead>
         <tbody>
        </HeaderTemplate>
        <ItemTemplate>

                <tr>
                    <td>
                        <%#DataBinder.Eval(Container.DataItem, "author")%>
                    </td>
                    <td>
                        <%#DataBinder.Eval(Container.DataItem, "title")%>
                    </td>
                    <td>
                        <%#DataBinder.Eval(Container.DataItem, "genre")%>
                    </td>
                </tr>

        </ItemTemplate>
        <FooterTemplate>
           </tbody>
            </table>
        </FooterTemplate>
    </asp:Repeater>
    <script type="text/javascript" src="js\jquery-1.4.1.js"></script>
    <script type="text/javascript" src="js\jquery.dataTables.js"></script>
    <script type="text/javascript" src="js\GridControls.js"></script>
</asp:Content> 
```

# powershell - 更改文件属性时“访问被拒绝”

> ID：15978266
> 
> 赞同：2
> 
> 时间：2013-04-12T18:20:22.030
> 
> 标签：powershell

我有一个 PS 脚本试图更改文件的属性（存档标志），但我收到拒绝访问路径的错误。

我登录的用户是本地管理员组的成员，并且可以通过右键单击文件来毫无问题地更改属性。

允许脚本首先将这些文件写入此文件夹，只是不更改它们的属性。

有谁知道我可能需要更改哪些其他安全设置？

先感谢您。

-本

编辑 - 代码：

```
$file=get-item E:\Transfer\In\Data\EAS\BALSHEET.txt
if(Test-Path $file){
    $file.attributes.GetType().Name
    $a = $file.attributes
    if($a -eq "Archive"){
        Copy-Item $file 'E:\FDM_Apps\Main\Inbox\_Data From Transfer'
        Copy-Item $file 'E:\Transfer\Archive\In Archive\Data\EAS'
        $ArchiveFile = get-item 'E:\Transfer\Archive\In Archive\Data\EAS\BALSHEET.txt'
        $ArchiveName = 'BALSHEET'+$date+'.txt'
        Rename-Item $ArchiveFile $ArchiveName
        $file.Attributes="Normal"   #Error occurs on this line
    }
} 
```

# r - 合并行数不等的数据框

> ID：15978267
> 
> 赞同：2
> 
> 时间：2013-04-12T18:20:22.373
> 
> 标签：r, merge, dataframe

我想从数据帧 df1 和 df2 创建一个新的数据帧 df3。数据框包含邮政编码和状态。一个数据框的邮政编码比另一个数据框多。我想将它们组合起来，并为另一个文件中没有相应邮政编码值的邮政编码添加 NA。

```
df3  
ZIP STATE   Total2 Total1  
36541   AL  6747   11190  
36542   AL  8093   10647  
36549   AL  9404   NA  
36551   AL  7048   10656  
36561   AL  5104   5044  
.
.
.

df1  
ZIP STATE   Total1  
36541   AL  11190  
36542   AL  10647  
36551   AL  10656  
36561   AL  5044  
32314   FL  10624  
32320   FL  5705  
32322   FL  11457  
32324   FL  5926  
32508   FL  8885  
32511   FL  9428  
32514   FL  6168  
32526   FL  11998  
32533   FL  11188  
32534   FL  11188  

df2  
ZIP STATE   Total2  
36541   AL  6747  
36542   AL  8093  
36549   AL  9404  
36551   AL  7048  
36561   AL  5104  
32314   FL  8959  
32320   FL  9237  
32321   FL  11417  
32322   FL  5467  
32324   FL  6672  
32508   FL  6085  
32511   FL  8782  
32514   FL  11297  
32522   FL  6892  
32526   FL  9497  
32533   FL  9114  
32534   FL  8594 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:22:51.653

`merge()`应该这样做：

`merge(df1, df2, all=T)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:55:23.883

`rbind.fill`从`plyr`包中可能是您​​正在寻找的：

```
 > plyr::rbind.fill(df1, df3, df2)
       ZIP STATE Total1 Total2
  1  36541    AL  11190     NA
  2  36542    AL  10647     NA
  3  36551    AL  10656     NA
  4  36561    AL   5044     NA
  5  32314    FL  10624     NA
  6  32320    FL   5705     NA
  7  32322    FL  11457     NA
  8  32324    FL   5926     NA
  9  32508    FL   8885     NA
  10 32511    FL   9428     NA
  11 32514    FL   6168     NA
  12 32526    FL  11998     NA
  13 32533    FL  11188     NA
  14 32534    FL  11188     NA
  15 36541    AL  11190   6747
  16 36542    AL  10647   8093
  17 36549    AL     NA   9404
  18 36551    AL  10656   7048
  19 36561    AL   5044   5104
  20 36541    AL     NA   6747
  21 36542    AL     NA   8093
  22 36549    AL     NA   9404
  23 36551    AL     NA   7048
  24 36561    AL     NA   5104
  25 32314    FL     NA   8959
  26 32320    FL     NA   9237
  27 32321    FL     NA  11417
  28 32322    FL     NA   5467
  29 32324    FL     NA   6672
  30 32508    FL     NA   6085
  31 32511    FL     NA   8782
  32 32514    FL     NA  11297
  33 32522    FL     NA   6892
  34 32526    FL     NA   9497
  35 32533    FL     NA   9114
  36 32534    FL     NA   8594 
```

# java - Servlet 中的 iText PDF

> ID：15978269
> 
> 赞同：3
> 
> 时间：2013-04-12T18:20:25.663
> 
> 标签：java, pdf, servlets, itext

所以，我正在使用此代码从我的服务器创建一个报告 PDF 文件

```
response.setHeader("Expires", "0");
response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
response.setHeader("Pragma", "public");
response.setContentType("application/pdf");
List<Integer> cartas1 = new ArrayList<Integer>();
DeudorDAO DDAO = new DeudorDAO();
ByteArrayOutputStream baos = new ByteArrayOutputStream();
try {
    baos = DocumentoCartaCobranza.CrearDocumento(
        getServletContext().getRealPath("static/images/pdf_banner.jpg"),
        getServletContext().getRealPath("static/images/firmaJG.png"),
        getServletContext().getRealPath("static/images/firmaAB.jpg"),
        DDAO.getDatosFullDeudores(cartas1)
    );
} catch (DocumentException e) {
    e.printStackTrace();
}
OutputStream os = response.getOutputStream();
baos.writeTo(os);
os.flush();
os.close(); 
```

和

```
public static ByteArrayOutputStream CrearDocumento(
    String imgCabecera,
    String imgFirma,
    String imgAbogado,
    java.util.List<Deudor> carta1) throws DocumentException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        try {
            PdfWriter pdfw = null;
            pdfw = PdfWriter.getInstance( Documento, baos );
            Documento.open();
            for (Deudor D : carta1){
                //Imagen cabecera
                Image imgHead = Image.getInstance(imgCabecera);
                //imgHead.setAbsolutePosition(35, 770);
                imgHead.scaleAbsolute(125, 40);
                Documento.add(imgHead);
                Carta1(D);
                //Imagen Firma
                Image imgSign = Image.getInstance(imgFirma);
                //imgHead.setAbsolutePosition(35, 770);
                imgSign.scaleAbsolute(110, 105);
                Documento.add(imgSign);
                Documento.newPage();
            }
            Documento.close();
        }
        catch(DocumentException e) {
            System.out.println(e.getMessage());
        } catch (MalformedURLException e) {
            System.out.println(e.getMessage());
        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
        return baos;
    } 
```

所以我的 servlet 调用一个类，它返回一个 ByteArrayOutputStream。到目前为止，一切都很好。有用 ！

当我调用另一个报告时，问题就开始了...... servlet 没有响应。它说：

**文档已关闭。您不能添加任何元素。**

而且，当然它在第一次通话时就关闭了。但这是对不同报告的新呼吁。

我猜它与PDFWriter有关...

谢谢 ！！

编辑 ！

以防万一你问：

```
private static float Espaciado = 15;
private static Document Documento = new Document();

private static void Carta1(Deudor D) throws DocumentException {
        //Cabecera Cuerpo
        Paragraph persona = new Paragraph(); persona.add(Chunk.NEWLINE); persona.add(new Chunk("Señor(a)"));
        persona.add(Chunk.NEWLINE); persona.add(new Chunk(D.getPaciente().getNombre()).append(" ").
                append(D.getPaciente().getApepat()).append(" ").append(D.getPaciente().getApemat()).toString());
        persona.add(Chunk.NEWLINE); persona.add(new Chunk(D.getPaciente().getRut().toString()).append("-").append(D.getPaciente().getDV()).toString());
        persona.add(Chunk.NEWLINE); persona.add(new Chunk(D.getPaciente().getDireccion()+", "+D.getPaciente().getCiudad()+", "+D.getPaciente().getComuna()));
        persona.setAlignment(Element.ALIGN_LEFT);

        Paragraph folio = new Paragraph();
        Chunk c = new Chunk(D.getIngreso().toString()+"-"+D.getDV(), new Font(folio.getFont().getFamily(), 20, Font.BOLD)); c.setUnderline(0.5f, -1.5f); folio.add(c);
        folio.add(Chunk.NEWLINE); folio.add(new Chunk("Ref: Valorización PAM"));
        folio.setAlignment(Element.ALIGN_RIGHT);

        Paragraph cc = new Paragraph(new Chunk("Estimado Paciente:"));
        cc.setAlignment(Element.ALIGN_LEFT); cc.setSpacingAfter(Espaciado);
        //Cuerpo
        Paragraph p2 = new Paragraph(new Chunk("En CLINICA IQUIQUE S.A. bla bla").toString());
        p2.setFirstLineIndent(50); p2.setSpacingAfter(Espaciado); p2.setAlignment(Element.ALIGN_JUSTIFIED);

        Documento.add(persona); Documento.add(folio); Documento.add(cc);
        Documento.add(p2); 
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:40:37.227

这很简单：您创建一个静态文档：

```
 private static Document Documento = new Document(); 
```

然后你打电话给它：

```
Documento.close(); 
```

所以这个错误是合乎逻辑的。将文档创建为方法属性并将其传递，而不是将其用作静态属性。在 servlet 中使用静态字段只对缓存有用，其他任何事情都是自找麻烦。

# android - Android Youtube App -> GoogleTV 配对

> ID：15978273
> 
> 赞同：1
> 
> 时间：2013-04-12T18:20:37.000
> 
> 标签：android, android-intent, youtube, google-tv, anymote

我希望有人能告诉我 Youtube 应用程序如何与 GoogleTV 配对。在anymote协议中，您需要提供GoogleTV提供的配对码，并且在同一个WIFI网络上。Youtube 并非如此。

目前，这就是我所看到的：我家里有一台 Sony GoogleTV，昨晚我正在使用手机上的 Android Youtube 应用程序在 GoogleTV 上播放视频。今天，当我在城市完全不同的地方工作时，我仍然可以通过 Android Youtube 应用程序控制 GoogleTV。我的妻子看到了有关我的手机配对/取消配对的消息，并且我已经成功地从我的办公室在家中的 GoogleTV 上启动了 Youtube 视频。我不在同一个 WIFI 网络上，所以我很好奇它如何仍然能够连接到 GoogleTV。

这是开发人员可以访问的东西（即：在电视上投掷意图而无需进行任何配对）？我怎么还能在几公里外的 GoogleTV 上投掷意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:19:24.880

YouTube、Netflix 和其他应用程序开发人员和硬件 OEM 正在研究 DIAL 协议：[http](http://www.dial-multiscreen.org/home) ://www.dial-multiscreen.org/home 该站点包含协议规范和一些 C 代码来模拟服务器和客户端。当前的 YouTube 应用程序很可能正在使用此功能，但 YouTube 尚未向开发人员提供有关其协议实现的任何信息。

Google TV 设备是 DIAL 服务器。您可以使用 DIAL 发现网络上的 GTV 设备。但是，缺少的是如何启动和控制单个应用程序。看起来 GTV 设备还没有完整的实现。此外，每个应用程序开发人员都需要提供文档，以了解他们在发现和启动后支持哪些命令/协议。DIAL 比 Anymote 更通用，并且很可能是 GTV 设备在未来的工作方式，特别是因为该协议被设计为独立于平台和设备。

# usb - 从 ASP.NET MVC 访问 USB 设备

> ID：15978274
> 
> 赞同：1
> 
> 时间：2013-04-12T18:20:37.170
> 
> 标签：usb, activex

我希望我的 Web 应用程序（仅在 Intranet 上运行）能够与 USB 指纹设备接口，该设备通过注册 Web 应用程序捕获用户的指纹

我试过用谷歌搜索，但似乎唯一可行的方法是 Active X，根据我的阅读，它仅在 IE 上受支持。

是否有解决方案/解决方法/粗略的破解，允许我与 USB 设备接口，适用于所有浏览器？

我可以接受以下条件：

1.  提示安装 3rd 方文件/active x/etc
2.  安全性与我无关，因为这仅在 Intranet 上使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:32:22.320

[Silverlight 受信任](http://msdn.microsoft.com/en-us/library/ee721083%28v=vs.95%29.aspx)的应用程序怎么样？

编辑-另外，作为旁注，我认为安全应该始终是一个问题，因为诸如枢轴攻击和社会工程之类的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:31:38.973

写个浏览器插件怎么样？例如，Chrome 开发人员文档包含有关[Accessing Hardware Devices](http://developer.chrome.com/trunk/apps/app_hardware.html)的信息，以及专门用于访问 USB 设备的 API。

然后，您可以使用[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)与您的页面进行交互，例如，用`<input type="fingerprint" />`您的指纹扫描 UI 替换元素（例如，显示扫描打印的图像）。我不知道你想要实现的用户体验的细节，所以很难说。

另一种方法是生成一个 windows.fingerprintScanned 事件（您也可以使用内容脚本和消息传递），然后您可以在应用服务器的常规 javascript 页面代码中处理该事件。

* * *

浏览器扩展的缺点是它更专业：如果你想要一个 Firefox 或 IE 插件，你必须专门为它们编写。只是把它作为 Flash/Silverlight/Java 的替代品（它们是跨浏览器但有自己的缺点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:58:31.507

哈克我不知道，但你可以让你的网络应用程序向队列发送一些东西并安装一个从这个队列读取数据的客户端。你明白？

# sqlite - Sqlite - 如果记录退出则插入

> ID：15978278
> 
> 赞同：0
> 
> 时间：2013-04-12T18:20:56.503
> 
> 标签：sqlite, triggers, foreign-keys, constraints

我知道这是一个非常基本的问题，但我似乎无法让它发挥作用。我有一张看起来像这样的表：

```
 TABLE entry 
(
     "eID" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    "pID" INTEGER,
     "fID" INTEGER,
     "vidPath" TEXT ) 
```

还有一个相关的：

```
 CREATE TABLE "ftime" (
     "fID" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
     "fName" TEXT ); 
```

我想要一个触发器，这样一个人只能针对已经存在的 ftime 将一条新记录插入到条目表中，即 fID 必须已经存在。我想出了以下触发器，但由于某种原因它一直失败：

```
 CREATE TRIGGER insert_fid_exists    BEFORE   INSERT ON entry BEGIN
      IF EXISTS (SELECT from faceTime WHERE fID=new.fID;) END 
```

遗憾的是，外键不是一种选择，因为自动级联似乎不起作用。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:43:36.297

```
CREATE TRIGGER insert_fid_exists
BEFORE INSERT ON entry
BEGIN
    SELECT RAISE(FAIL, 'no matching ftime record')
    WHERE NOT EXISTS (SELECT 1
                      FROM ftime
                      WHERE fID = NEW.fID);
END; 
```

# python - 如何使用函数在 sqlalchemy 查询中验证密码？

> ID：15978279
> 
> 赞同：1
> 
> 时间：2013-04-12T18:21:15.277
> 
> 标签：python, python-2.7, sqlalchemy

如何使用函数在 sqlalchemy 查询中验证密码？在

```
class PersonModel(Base):
    __tablename__ = 'persons'
    username = Column(String(30), nullable=False)
    email = Column(String(75), nullable=False)
    password = Column(String(128), nullable=False) 
```

`sha256_crypt.encrypt("password_string")`我使用[http://pythonhosted.org](http://pythonhosted.org/passlib/) /passlib/存储密码，我可以验证`sha256_crypt.verify(password_to_check_against, hash)`

（尝试过

```
person = session.query(PersonModel).filter(and_(PersonModel.username.like(username), PersonModel.password.like(sha256_crypt.encrypt(password_string)))).first() 
```

但它不起作用 => sha256_crypt.encrypt(password_string) 生成的值与 db 中相同的密码不同，我不能`==`仅使用`sha256_crypt.verify`站点中的运算符）如何在我的查询中注入它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:27:18.907

您需要使用`sha256_crypt.verify()`，并且不能在`AND`子句中使用，因为它需要密码哈希字符串进行验证。

如果您查看此函数的输出示例以及[“模块化加密格式”的文档](http://pythonhosted.org/passlib/modular_crypt_format.html#modular-crypt-format)：

> $5$rounds=80000$zvpXD3gCkrt7tw.1$QqeTSolNHEfgryc5oMgiq1o8qCEAcmye3FoMSuvgToC

*   `5`开头的意思[是 sha256_crypt](http://pythonhosted.org/passlib/modular_crypt_format.html#mcf-identifiers)。
*   `rounds=80000`是它被散列的次数。
*   之间的下一部分`$`是盐。
*   最后一部分实际上[是摘要输出](http://pythonhosted.org/passlib/modular_crypt_format.html#requirements)

所以它实际上需要所有前三个部分，加上纯文本密码以同样的方式散列它。

为此，首先获取您的用户信息：

```
person = session.query(PersonModel).filter(PersonModel.username.like(username)).first() 
```

然后进行验证：

```
is_authenticated = sha256_crypt.verify(password_string, person.password) 
```

# wordpress - ServInt 禁用 WordPress 登录

> ID：15978283
> 
> 赞同：0
> 
> 时间：2013-04-12T18:21:31.973
> 
> 标签：wordpress

我为另一家公司设计和编辑网站，他们的 WordPress 网站存储在 ServInt 上。虽然我以前不是网站管理员，但从转发的这一点开始，我已经完全控制了服务器（这意味着我有 root 访问权限）。但是，在尝试编辑 WordPress 页面时，我不断收到此消息“ServInt 已禁用 WordPress 登录”。

看看这里：[http ://superpestproducts.com/wp-admin/](http://superpestproducts.com/wp-admin/)

此外，当我尝试访问 wp-admin 时，托管在那里的所有 WordPress 网站都会说同样的话。

我想知道为什么会发生这种情况以及如何重新获得对登录页面的访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:10:50.020

由于您对这些站点具有 root 访问权限，因此您只需在代码中搜索“ServInt”即可。例如：

```
find /var/www/html -name "*.php"|xargs grep ServInt 
```

然后禁用生成该消息的代码。或者，您可以将受影响的文件替换为 WordPress 的原始来源。

# php - Wordpress 主题页面路由

> ID：15978284
> 
> 赞同：0
> 
> 时间：2013-04-12T18:21:35.990
> 
> 标签：php, wordpress, wordpress-theming

在仪表板中，我创建了一个没有内容的页面，名为“**提交**” ，其中包含“**提交**”。然后我在我的主题文件夹中添加了一个页面，复制**page.php**文件并将其命名为**page_submit.php** 我可以通过添加特定于该 php 文件的字符串来访问该页面。我通过' **.../submit** '到达那里

然后我添加 php 代码来处理表单。表单被渲染，但在提交时，我收到一个 404 错误，表明找不到该页面。它试图完善一个名为 submit 的页面，该页面不存在但 page-submit.php 确实存在。

我不完全理解文件路由的失败或这里的问题。我只需要提交表格。

TIA

# php - Symfony2 为另一个实体的实体生成表单（商店的位置）

> ID：15978286
> 
> 赞同：1
> 
> 时间：2013-04-12T18:21:37.460
> 
> 标签：php, forms, symfony, entity

我现在正在尝试解决这个问题。

我找不到有关如何执行以下操作的任何文档：

我有 2 个实体 Shop 和 Location，一个商店可以有更多的位置实体已经在数据库中正常工作。

但现在我想制作一个表格来为商店添加位置。如果我在 LocationType 中使用 ->add('shop', 'entity') 呈现表单，那么我将获得一个下拉列表。

我想要的是带有商店 ID 的隐藏（不可更改）字段。

有什么建议么？

这是我的 LocationType 代码：（[STORENAME] 是公司名称的替换）

```
class LocationType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name', 'text')
            ->add('street')
            ->add('number')
            ->add('numberAddition')
            ->add('postalcode')
            ->add('city')
            ->add('phone')
            ->add('email')
            ->add('shop', 'entity', array(
                'class' => '[STORENAME]ShopBundle:Shop',
                'property' => 'name'))
        ;
    } 
```

Txs！，您好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T08:26:05.410

这不是你想要的吗？ [http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)

它允许您从商店表单向商店添加一个或多个位置。

# java - 在Android中读取文件和远程上传错误

> ID：15978288
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:21:39.640
> 
> 标签：java, android, http-post

我的应用程序要求用户选择一个上传到 PHP 脚本的文件。当用户选择一个文件时，会返回正确的 URI，但是当我尝试访问该文件时，我得到 FileNotFound 错误。以下是 onActivityResult 代码：

```
private static final int FILE_SELECT_CODE = 1234;    
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case FILE_SELECT_CODE:      
            if (resultCode == RESULT_OK) {  
                // Get the Uri of the selected file 
                Uri uri = data.getData();

                Log.d("file upload register page", "File Uri: " + uri.toString());
                try {
                file_path = FileUtils.getPath(getBaseContext(), uri);
            } 
                catch (URISyntaxException e) {
                e.printStackTrace();
            }
            Log.d("file upload register page", "File Path: " + file_path);
            file = new File(file_path);
            UploadFile task = new UploadFile();
            task.execute();
        }           
        break;
    }
super.onActivityResult(requestCode, resultCode, data);
} 
```

FileUtils.getPath 函数返回给定 URI 的路径。根据日志，我返回的路径是：file:///mnt/sdcard/bluetooth/Tutorial%201.pdf

在 AsyncTask UploadFile 中，我将文件上传到远程服务器。我收到一个错误

```
java.io.FileNotFoundException: /file:/mnt/sdcard/bluetooth/Tutorial%201.pdf (No such file or directory). 
```

这就是我上传文件的方式：

```
public void newUpload()
{
    HttpEntity resEntity;
    try {
        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost(url);

        InputStreamEntity reqEntity = new InputStreamEntity(new FileInputStream(file), -1);
        reqEntity.setContentType("binary/octet-stream");
        reqEntity.setChunked(true); // Send in multiple parts if needed
        httppost.setEntity(reqEntity);
        HttpResponse response_http = httpclient.execute(httppost);
        //Do something with response...
        resEntity = response_http.getEntity();
        response = EntityUtils.toString(resEntity);
        Log.d("response",response);
    } 
    catch (Exception e) {
        e.printStackTrace();
    }
} 
```

如何解决文件未找到异常？我不知道为什么它不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:17:17.930

检查你的`getPath()`功能。它可能未发送给定 URI 的正确路径。

# xml - 使用 Unicode 字符粉碎 SQL Server XML

> ID：15978295
> 
> 赞同：0
> 
> 时间：2013-04-12T18:21:56.667
> 
> 标签：xml, sql-server-2008

在我之前的问题 [SQL Server XML String Manipulation](https://stackoverflow.com/questions/15126430/sql-server-xml-string-manipluation)

我得到了下面的答案（感谢 Mikael Eriksson）来粉碎 XML 文档，并从字符中删除不需要的单词。我现在需要更进一步，去掉超过 255 个 Unicode 字符。当我的 XML 中有这些字符时，它们会作为问号存储在 @T 表变量（在下面的代码中）中。我怎样才能让这些字符作为实际的 Unicode 字符出现，这样我就可以把它们去掉？

我有一个功能可以很好地删除不需要的字符，但是由于 Unicode 作为问号出现，它不会触及它们

```
 -- A table to hold the bad words
declare @BadWords table
(
  ID int identity,
  Value nvarchar(10)
)

-- These are the bad ones.
insert into @BadWords values
('one'),
('three'),
('five'),
('hold')

-- XML that needs cleaning
declare @XML xml = '
<root>
  <itemone ID="1one1">1one1</itemone>
  <itemtwo>2two2</itemtwo>
  <items>
    <item>1one1</item>
    <item>2two2</item>
    <item>onetwothreefourfive</item>
  </items>
  <hold>We hold these truths to be self evident</hold>
</root>
'

-- A helper table to hold the values to modify
declare @T table
(
  ID int identity,
  Pos int,
  OldValue nvarchar(max),
  NewValue nvarchar(max),
  Attribute bit
)

-- Get all attributes from the XML
insert into @T(Pos, OldValue, NewValue, Attribute)
select row_number() over(order by T.N),
       T.N.value('.', 'nvarchar(max)'),
       T.N.value('.', 'nvarchar(max)'),
       1
from @XML.nodes('//@*') as T(N)

-- Get all values from the XML
insert into @T(Pos, OldValue, NewValue, Attribute)
select row_number() over(order by T.N),
       T.N.value('text()[1]', 'nvarchar(max)'),
       T.N.value('text()[1]', 'nvarchar(max)'),
       0
from @XML.nodes('//*') as T(N)

declare @ID int
declare @Pos int
declare @Value nvarchar(max)
declare @Attribute bit

-- Remove the bad words from @T, one bad word at a time
select @ID = max(ID) from @BadWords
while @ID > 0
begin
  select @Value = Value
  from @BadWords
  where ID = @ID

  update @T
  set NewValue = replace(NewValue, @Value, '')

  set @ID -= 1
end

-- Write the cleaned values back to the XML
select @ID = max(ID) from @T
while @ID > 0
begin
  select @Value = nullif(NewValue, OldValue),
         @Attribute = Attribute,
         @Pos = Pos
  from @T
  where ID = @ID

  print @Attribute

  if @Value is not null
    if @Attribute = 1  
      set @XML.modify('replace value of ((//@*)[sql:variable("@Pos")])[1] 
                       with sql:variable("@Value")')
    else
      set @XML.modify('replace value of ((//*)[sql:variable("@Pos")]/text())[1] 
                           with sql:variable("@Value")')
  set @ID -= 1
end

select @XML 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:55:26.793

这部分看起来：

```
insert into @BadWords values
('one'),
('three'),
('five'),
('hold') 
```

Unicode 字符串文字需要 N 前缀。如果没有 N，您的代码会将它们视为 VARCHAR，并且您会得到多字节字符的问号。还有其他地方你也必须使用 Unicode 友好的字符串。XML 通常是 UTF-8，因此应该能够处理 Unicode 字符，尽管标准不鼓励[这些](http://www.w3.org/TR/unicode-xml/#Suitable). 您的代码应如下所示：

```
insert into @BadWords values
(N'one'),
(N'three'),
(N'five'),
(N'hold') 
```

# solr - 维护 Sunspot Solr 索引的正确方法是什么？

> ID：15978299
> 
> 赞同：7
> 
> 时间：2013-04-12T18:22:09.553
> 
> 标签：solr, indexing, mongoid, sunspot

我对 Solr 索引机制感到困惑。也许有人可以对此有所了解。

所以，我们有 2 个 rake 命令：`rake sunspot:solr:index`和`rake sunspot:solr:reindex`

这是我的`index`任务的样子（我为 Mongoid 覆盖了它）：

```
namespace :sunspot do
  namespace :solr do 
    desc "indexes searchable models"
    task :index => :environment do
      [Model1, Model2].each do |model|
        Sunspot.index!(model.all)
      end
    end
  end
end 
```

据我了解，我的定义`index`是每次运行时有效地重新索引集合。

我对吗？它会覆盖以前的索引还是我必须使用`reindex`删除旧索引并创建新索引？

我正在使用宝石`sunspot v2.0.0`，，`sunspot_mongo v1.0.1``sunspot_solr v2.0.0`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T19:58:37.810

重新索引任务只调用`solr_reindex`每个模型，该方法的源代码如下（取自 github）。

```
 # Completely rebuild the index for this class. First removes all 
   # instances from the index, then loads records and indexes them.
   #   
   # See #index for information on options, etc.
   #   
   def solr_reindex(options = {}) 
     solr_remove_all_from_index
     solr_index(options)
   end 
```

如果您查看 的来源`solr_index`，评论说该方法将“添加/更新 Solr 索引中的所有现有记录”。

所以回答你的问题，`reindex`任务本质上与`index`任务相同，只是`reindex`任务将首先删除现有索引。如果您的索引中有您知道不应该存在的项目，您应该调用`reindex`. 如果您知道您只是在索引中添加或更新项目，您可以调用`index`而不会遭受删除索引然后从头开始重建它的性能损失。

# xslt - XSLT Group Sum 不显示结果

> ID：15978300
> 
> 赞同：1
> 
> 时间：2013-04-12T18:22:13.287
> 
> 标签：xslt, sharepoint-2010, dataview

我在 sharepoint 2010 设计器中创建了一个数据视图，并使用 XSLT 显示默认情况下不包含的结果。我有一个计算字段，结果可以是负数或正数。详细信息字段显示没有问题，但是当我尝试显示它们的总和时，在某些情况下它会正确显示，而在其他情况下它不会显示任何内容。

据我了解，只要负数小于一千负，它就不会显示总和的结果。

示例：*-1,641* , 296, -613, 0, 1032, 155 -> 不显示结果

示例：0、-15、-348、-640 -> 正确显示 -1003

我正在使用这个 xslt 来显示数字

```
<xsl:value-of select="format-number(sum($nodeset/@Deviation_x0020_EFC_x0020_vs_x00),'####,##0;(####,##0)')" /> 
```

如果我跳过格式编号并使用：

```
<xsl:value-of select="sum($nodeset/@Deviation_x0020_EFC_x0020_vs_x00)" /> 
```

它将显示 NaN 而不是空白

一千个负数肯定存在问题，因为我尝试将格式设置为负数，它适用于 -603 或 -10 但不适用于 -1,640

# asp.net - 不明确的参考错误

> ID：15978304
> 
> 赞同：9
> 
> 时间：2013-04-12T18:22:24.690
> 
> 标签：asp.net, vb.net, visual-studio-2010, user-controls

我间歇性地收到以下错误：

> *无法加载文件或程序集“com.mycompany.myapp”或其依赖项之一。找到的程序集的清单与程序集引用不匹配。*

我有一个 Ajax 用户控件库，我构建并编译为 DLL。该项目引用了项目 A (com.mycompany.myapp)。我的主 Web 应用程序引用了这个 DLL，也引用了 Project A。有时，当我尝试重建我的 Web 应用程序时会发生此错误。似乎对项目 A 的引用在 DLL 和 Web 应用程序之间变得不同步。

这只能通过重新构建 DLL、从 Web 应用程序中删除对 DLL 的引用、重新添加引用，然后重新构建 Web 应用程序来解决。谁能解释为什么会发生这种情况以及如何防止出现此错误？

我正在寻找一种能够解决此问题的解决方案，以便我可以分发此 DLL，而不必担心需要间歇性地重建和部署它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:41:09.820

这可能会对你有所帮助.. 我之前遇到过同样的问题，我所做的是，我删除了 bin 文件夹中的文件，然后重建应用程序，然后在主项目中添加另一个项目，然后重建它们。

[“无法加载文件或程序集”错误，但我不知道哪个项目正在使用旧编号引用此程序集](https://stackoverflow.com/questions/11967632/could-not-load-file-or-assembly-error-but-i-dont-know-which-project-is-refere)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:18:49.770

验证对项目 A 的引用（对于两个项目）并确保它们引用相同的程序集和/或项目。（最常见的原因） [名称为 xxx.dll 的已定位程序集的清单定义与程序集引用不匹配](http://blogs.msdn.com/b/junfeng/archive/2004/03/25/95826.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T21:47:43.290

如果您的所有项目都在同一个解决方案中，则需要确保它们都是项目引用而不是文件引用。您可以通过右键单击项目并转到属性 => 引用来检查这一点。

在您的参考列表中，您会看到一个名为“复制本地”的列。如果将其设置为 false，则表示您通过文件而不是项目引用它（在构建 DLL 后不会更新 DLL）。要解决它，请删除引用并再次添加（确保从解决方案中引用它，而不是通过引用硬盘驱动器上的 DLL）。

如果您没有在同一个解决方案中包含所有项目，那么这是正常行为。假设您的 Ajax 控件库在解决方案之外。

开始的情况是这样的：

*   Ajax 引用 A（版本 1）
*   项目参考 A（版本 1）
*   项目参考 Ajax（版本 1）

构建解决方案后（其中没有 Ajax 项目），您将遇到以下情况：

*   Ajax 引用 A（版本 1）
*   项目参考 A（版本 2）
*   项目参考 Ajax（版本 1）

如您所见，编译器突然需要对 A 版本 1 和版本 2 的引用，所以这是不可能的，它会给您一个错误。这也可以解释为什么当您进行重建并删除 DLL 并再次添加它时它会起作用。

这里的解决方案是将 Ajax 项目添加到您的解决方案中并每次都重新构建它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-11T16:24:41.630

检查您的程序集“com.mycompany.myapp”是否在其 AssemblyInfo.cs 文件中没有 AssemblyVersion 属性，或者该版本没有导致自动生成版本的星号。

只是一个想法。

# javascript - 鼠标按下

> ID：15978305
> 
> 赞同：0
> 
> 时间：2013-04-12T18:22:26.287
> 
> 标签：javascript, dom

我需要解决这个问题。

当在最大按钮上按下鼠标按钮时，变量`max`应该增加一。当我按住 min 按钮时，`max`变量应该会减小，但它对我不起作用。

我怎样才能让它工作？

```
<body>

<button id="max" onmousedown="max()" >max</button>
<input id="num" type="number" disabled="disabled" value="0">
<button id="min" onmousedown="min()">min</button>

<script type="text/javascript">

function max()
{
  var x = document.getElementById("num").value
  if (x<100) {var max= document.getElementById("num").value++;}
}

function min()
{
  var x = document.getElementById("num").value
  if (x>0) {var max= document.getElementById("num").value--;}
}

</script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:31:28.170

[**例子**](http://jsfiddle.net/tAh6Q/2/)

一些东西：

1 - 我已从您的输入标签中删除了内联事件。

2 - 为了让间隔正常工作，您需要参考该过程。在我的示例中`minInterval`，`maxInterval`请允许我调用`clearInterval` `onmouseup`.

3 - 为了使这些正常工作，您需要在 DOM 加载/准备好后运行脚本，因此将代码放在`body`标签末尾附近。

4 - 的值`speed`基本上是您希望间隔运行的速度。

**HTML**

```
<button id="max" >max</button>
<input id="num" type="number" disabled="disabled" value="0">
<button id="min">min</button> 
```

**JavaScript**

```
var min = document.getElementById("min"),
    max = document.getElementById("max"),
    num = document.getElementById("num"),
    speed = 10,
    minInterval, maxInterval;

min.onmousedown = function(){

    minInterval = setInterval(function(){
        num.value--;
    }, speed);
};

min.onmouseup = function(){
    clearInterval(minInterval);
};

max.onmousedown = function(){
    maxInterval = setInterval(function(){
       num.value++;
    }, speed);
};

max.onmouseup = function(){
    clearInterval(maxInterval);
}; 
```

**有用的网址：**

[设置间隔](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

[清除间隔](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:30:13.560

这应该有效。

```
function max()
{
    var numElement = document.getElementById("num");
    var x= numElement.value
    var fnc = function ()
    {
        if (x<100){
        document.getElementById("num").value = x;
        x++;
    }    
    var i = setInterval(fnc, 100);
    fnc(); 
    document.onmouseup = function ()
    {
        clearInterval(i);
    }
}   

function min()
{
    var numElement = document.getElementById("num");
    var x= numElement.value
    var fnc = function ()
    {
        if (x>0){
        document.getElementById("num").value = x;
        x--;
    }    
    var i = setInterval(fnc, 100);
    fnc(); 
    document.onmouseup = function ()
    {
        clearInterval(i);
    }
} 
```

# java - 线程“主”中的异常 java.lang.NullPointerException Java 错误

> ID：15978309
> 
> 赞同：0
> 
> 时间：2013-04-12T18:22:48.450
> 
> 标签：java, nullpointerexception

当我尝试创建对象数组时，我在 Java 程序中遇到问题。线程“main”中的异常 java.lang.NullPointerException 错误是我得到的错误。我真的可以使用一些帮助，因为我在这个地方被困了几个小时......

感谢您的帮助 ！

```
public class Placement extends JFrame  {
    private JPanel placementPanel;

    private JFrame gameEngineFrame;

    private Ship[] boardShips; //Array of ships objects to save ships
    private JButton[] shipButton; //Array of buttons for the ships
    private JLabel selectShipLabel;
    private Ship shipSelected;
    private Ship highlightedShip;

        JPanel shipSelect = new JPanel();
        shipSelect.setLayout(new GridLayout(14, 1));
        shipSelect.setBackground(Color.getHSBColor(0.0F, 0.0F, 0.75F)); //Setting background color. Hue, saturation, brightness format. (HSB)
        shipSelect.setBounds(320, 20, 200, 300); //Setting postiion of the panel inside the JPanel and setting width & height
        this.placementPanel.add(shipSelect);     

     makeShips(shipSelect);

  private void makeShips(JPanel inPanel)
  {
      System.out.println("make ships testing");
    this.shipButton[0] = new JButton("Aircraft Carrier");
    boardShips[0] = new Ship(5, "Aircraft Carrier", 0);

    this.shipButton[1] = new JButton("Battleship");
    boardShips[1] = new Ship(4, "Battleship", 1);

    this.shipButton[2] = new JButton("Cruiser");
  boardShips[2] = new Ship(3, "Cruiser", 2);

    this.shipButton[3] = new JButton("Destroyer 1");
    boardShips[3] = new Ship(2, "Destroyer", 3);

    this.shipButton[4] = new JButton("Submarine 1");
    boardShips[4] = new Ship(1, "Submarine", 4);

  System.out.println("make ships testing22");

    for (int i = 0; i < 5; i++)
    {
      this.shipButton[i].setName("" + i);
     this.shipButton[i].addActionListener((ActionListener) this);
      inPanel.add(this.shipButton[i]);
      this.boardShips[i].makeIcons();
    }

  } 
```

**在船级：**

```
 public Ship(int tempSize, String tempName, int tempButton)
  {
    this();
    this.size = tempSize;
    this.name = tempName;
    this.button = tempButton;
   // this.shipCoords = new int[this.size][2];
    //this.shipIcons = new ImageIcon[2][this.size];
    //this.shipSunkIcons = new ImageIcon[2][this.size];
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:25:41.883

你有这个 Jbutton`private JButton[] shipButton;`数组，没有在任何地方初始化，你正在尝试做`this.shipButton[0] = new JButton("Aircraft Carrier");`causin NPE。

我看到你有 5 个 shipButton 数组

```
 JButton[] shipButton=new JButton[5]; 
```

**编辑**

您不能从类体中调用方法。您只能在那里定义方法。要调用您的方法，您必须使用构造函数或通过其他方法。

# html - .less 文件未正确加载

> ID：15978311
> 
> 赞同：0
> 
> 时间：2013-04-12T18:22:50.933
> 
> 标签：html, css, twitter-bootstrap, less

我为我的新网站安装了较少的引导程序。在我看来，并非所有的 .less 文件都正确编译。当我调整浏览器窗口的大小时，内容应该以流畅的方式缩小。我也尝试了 bootstrap.css（没有 LESS）并且工作正常。

感谢您提供有用的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:50:53.723

除了`bootstrap.less`你还需要包括`responsive.less`

# c# - c# 编译表示为二进制的整数

> ID：15978314
> 
> 赞同：0
> 
> 时间：2013-04-12T18:23:00.513
> 
> 标签：c#, binary

是否可以有以下情况：

```
var i = 000101; 
```

编译为：

```
var i = 5; 
```

有一些特殊的字符/标记？就像是..

```
var i = B000101; 
```

提前致谢。

# imagemagick - imagemagick mogrify 将图像的一部分剪掉

> ID：15978315
> 
> 赞同：2
> 
> 时间：2013-04-12T18:23:02.540
> 
> 标签：imagemagick, crop, mogrify

如果我有类似这样的图像：

```
---------------------------------
-        xxxxxxxxxx             -
-        x        x             -
-        xxxxxxxxxx             -
--------------------------------- 
```

我怎样才能用`mogrify`它来只剪掉`x`'s 中的部分？我用吗`-geometry?`。我找不到一个很好的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:32:13.537

imagemagick 文档展示了如何使用“convert”来做到这一点：

[http://www.imagemagick.org/Usage/crop/#crop_viewport](http://www.imagemagick.org/Usage/crop/#crop_viewport)

有一些变化，这取决于您是想用另一种颜色替换“剪切”部分还是将尺寸缩小到 x （在您的图表中）。

我假设“mogrify”会做同样的事情，但你只是不给出输出文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-10T12:57:20.267

虽然代码很棒，但他们的手册缺乏严肃的例子。通过 ++ 指定开始来剪切您的*xxx*`b.png`部分，之前的 x 是 的新图像大小，而`a.png`是输入。

```
mogrify -crop '100x200+100+10' -write b.png a.png 
```

在这种情况下，它需要向右 100 像素，向下 200 像素，窗口从右上角的锚点偏移`a.png`100 向右和向下 10 像素。简单的一次掌握。

# java - Spring JMS ActiveMQ - 无法让多个消费者同时处理

> ID：15978317
> 
> 赞同：3
> 
> 时间：2013-04-12T18:23:04.223
> 
> 标签：java, spring, jms, activemq

我是使用 JMS/ActiveMQ 的新手，我有一个 Spring/Hibernate 应用程序，它从 ActiveMQ 中的队列中获取消息并处理这些消息以实现持久性。由于消息需要一段时间来处理和持久化，我将我的 DefaultMessageListenerContainer 配置为具有多个消费者（例如 5-10），因此可以同时处理多个消息。我查看了很多 ActiveMQ 和 Spring API 文档，我认为我需要做的就是将 maxConcurrentConsumers 设置为 10 + 将 concurrentConsumers 设置为 5 或在 DefaultMessageListenerContainer 上将并发设置为 5-10。一旦我这样做了，我可以从 ActiveMQ 的内置控制台看到我的队列确实有 5 个消费者。但是当我在队列中放置 10 或 100 条消息时，处理似乎是单线程的，我添加了一个日志行来打印线程 ID，它似乎是相同的线程 ID 按顺序处理所有请求。从控制台上的 ActiveMQ 的队列页面，我单击浏览活动消费者链接以查看正在发生的事情，看起来一个消费者有所有 100 条消息待处理，而其他 4 条则没有。

我做了一些研究，发现这篇文章来自 Spring ( [http://forum.springsource.org/showthread.php?61170-Messages-missed-using-DefaultMessageListenerContainer](http://forum.springsource.org/showthread.php?61170-Messages-missed-using-DefaultMessageListenerContainer)) 并添加了一个值为 2 的预取策略，认为每个消费者都在为自己注册 1000 条消息。现在，当我发送另一批消息时，一个消费者将有 2-3 条消息待处理，但其他 4 个消费者保持空闲状态，并且最终由该消费者按顺序处理所有内容。在这一点上，我想可能是我在 ActiveMQ 代理上配置错误。我在文档中读到默认调度策略是循环策略，但我在我的 activemq.xml 中看到一个名为 constantPendingMessageLimitStrategy 的设置设置为 1000，并尝试将其设置为非常低的数字（例如 2），认为它控制了多少消息经纪人一次发送给消费者，但仍然没有做任何事情。希望有人能指出我做错了什么，我' 我已经在下面发布了我的 spring 配置，除了尝试一个设置（constantPendingMessageLimitStrategy）之外，我真的没有接触过 activemq.xml。我正在使用 ActiveMQ 5.8。

```
<bean id="importRedeliveryPolicy" class="org.apache.activemq.RedeliveryPolicy">
    <property name="initialRedeliveryDelay" value="15000" />
    <property name="maximumRedeliveries" value="-1" />
    <property name="useExponentialBackOff" value="true" />
    <property name="backOffMultiplier" value="2" />
</bean>

<bean id="importPrefetchPolicy" class="org.apache.activemq.ActiveMQPrefetchPolicy">
    <property name="all" value="2"></property>
</bean>

<bean id="importConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="${import.queue.url}"/>
    <property name="redeliveryPolicy" ref="importRedeliveryPolicy" />
    <property name="prefetchPolicy" ref="importPrefetchPolicy"></property>
</bean>

<bean id="importQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="${import.queue.name}" />
</bean>

<bean id="importListener" class="com.mycompany.ImportQueueListener" >
    <property name="importService" ref="importService"></property>
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="importJmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
   <property name="connectionFactory" ref="importConnectionFactory" />
    <property name="destination" ref="importQueue" />
    <property name="messageListener" ref="importListener" />
    <property name="sessionTransacted" value="true" />
    <property name="maxConcurrentConsumers" value="10"></property>
    <property name="concurrentConsumers" value="5"></property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T10:51:47.317

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jms="http://www.springframework.org/schema/jms"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/jms
http://www.springframework.org/schema/jms/spring-jms.xsd">

 <!--  <bean class="org.apache.activemq.command.ActiveMQQueue" id="destination">  
     <constructor-arg value="TEST.Q1"></constructor-arg>  
  </bean>-->

  <bean id="destination" class="org.apache.activemq.command.ActiveMQTopic">
    <constructor-arg value="TOPIC_NAME" />
  </bean>

 <bean class="org.springframework.jms.core.JmsTemplate" id="producerTemplate">
  <property name="connectionFactory" ref="connectionFactory"/>
   <property name="defaultDestination" ref="destination"/>
 </bean>  

 <!--ActiveMq broker URL configured here-->
   <bean class="org.apache.activemq.ActiveMQConnectionFactory" id="connectionFactory" >
        <property name="brokerURL">
          <value>tcp://localhost:61616</value>
        </property>
   </bean>  

    <!--producer configured here-->

   <bean class="Producer" id="simpleMessageProducer">  
       <property name="jmsTemplate" ref="producerTemplate"></property>  
   </bean> 

    <!--listeners configured here-->

     <bean class="Consumer" id="simpleMessageListener">  

      </bean>  
     <bean class="ConsumerSecond" id="simpleMessageListenerSecond">   </bean> 

     <bean class="org.springframework.jms.listener.DefaultMessageListenerContainer" id="jmsContainer"> 
     <property name="connectionFactory" ref="connectionFactory"></property>  
     <property name="destination" ref="destination"></property>  
     <property name="messageListener" ref="simpleMessageListener"></property>  

    </bean> 
     <bean class="org.springframework.jms.listener.DefaultMessageListenerContainer" id="jmsContainer1"> 
     <property name="connectionFactory" ref="connectionFactory"></property>  
     <property name="destination" ref="destination"></property>
     <property name="messageListener" ref="simpleMessageListenerSecond"></property>

    </bean>  

</beans> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:58:52.530

您应该尝试`ActiveMQConnectionFactory`用 pool 替换您的：

```
<bean id="jmsFactory" class="org.apache.activemq.pool.PooledConnectionFactory" destroy method="stop">
<property name="connectionFactory">
  <bean class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL">
      <value>tcp://localhost:61616</value>
      </property>
   </bean>
  </property>
</bean>
<bean id="myJmsTemplate" class="org.springframework.jms.core.JmsTemplate">
   <property name="connectionFactory">
    <ref local="jmsFactory"/>
  </property>
</bean> 
```

# javascript - 从javascript函数返回数据的更好方法是什么

> ID：15978319
> 
> 赞同：1
> 
> 时间：2013-04-12T18:23:05.540
> 
> 标签：javascript, jquery, function, return

我现在正在构建一个 javascript 游戏，并将游戏的某些部分编码在单独的文件中，例如用于循环和初始化等的 main.js，然后我有关卡、玩家、碰撞文件。

游戏文件（关卡、玩家、碰撞）设置如下：

```
function Level(){

  this.draw_level = function(){

  }
} 
```

然后像这样从我的主文件中调用：

```
var level = new Level();
level.draw_level(); 
```

我遇到的问题是从嵌套函数返回信息。这是我所指的代码：

```
function Level (){

//other functions

 this.collisionLayer = function(layer){
    if(!layer.properties && !layer.properties.collision){return;}
    var t = this,
        row = [];
    t.solids = [];
    layer.data.forEach(function(idx, i) {
        if (i % layer.width === 0 && i) {
            t.solids.push(row);
            row = [];
        }
        row.push(idx);
    });
    t.solids.push(row);

}
} 
```

并从我的主文件中调用，如下所示：

```
var collisions =  level.collisionLayer(layers) 
```

我想做的是返回 t.solids 数组，这样我就可以利用存储在主 JS 文件中的信息。

我努力了

```
return t; 
```

但我得到突出显示错误的功能：

```
function has inconsistent return points 
```

所以我的问题是：

在像我这样的情况下返回信息的更好方法是什么？存储在全局变量中？或其他方式？

上面的错误是什么意思？很高兴知道以供将来参考。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:24:23.567

感谢您的所有投入。正如 Parthik Gosar 所说，我可以使用 level.solids 访问实体数组！再次感谢

# php - 包含外部 PHP 文件

> ID：15978321
> 
> 赞同：0
> 
> 时间：2013-04-12T18:23:11.733
> 
> 标签：php, include, external

我想要做的是将外部 .php 文件包含到项目中。

我即将为一个在线商店的客户开始一个项目。我创建了一些我想在这个项目和其他项目中使用的类和函数，但我不想将这些函数和类提供给客户，因为它们可以消除一些限制，原因有很多（主要是价格原因）我已经申请了网站。

即使是保护我的文件的最明显的方法，我真的不想使用 ionCube 或 Zend Guard，因为我必须提高价格（对业务不利），而且因为一些共享托管服务提供商不支持这个功能，并且使用专用服务器也很昂贵（也不利于业务）。所以最后我想做的是从我自己的服务器中包含这些文件，例如，我的服务器上有一个名为 cart.php 的文件，并将它包含在托管在不同服务器中的客户端项目中。

我希望你能理解我奇怪的解释。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:55:59.463

如果您允许其他脚本包含 PHP 文件，您将遇到一个重要的安全问题。
其他任何人只要瞥见了您的“远程 PHP 文件”，就可以入侵您的网站，因为他可能会看到密码。

但我认为你做了错误的尝试：创建一个“秘密 API”。一个例子：
如果你想看看用户在她/他的购物车里有什么，你必须只写：

```
<?php
json_decode(file_get_contents("http://yourShop.example/api/get_cart.json?userID=123&apiKey=someVerySecretValue");
?> 
```

它可能会返回：

```
[
    {
        "name": "article 1",
        "price": "$ 152"
    },
    {
        "name": "article 1",
        "price": "$ 152"
    },
    {
        "name": "article 1",
        "price": "$ 152"
    }
] 
```

所以，我认为它返回的正是你想要的。
如果您想了解有关 API 的更多信息，Google 应该会帮助您获得一些相关信息 :)

如果您有任何问题，请随时与我联系：）

# node.js - Node.js 找不到网址

> ID：15978324
> 
> 赞同：5
> 
> 时间：2013-04-12T18:23:30.383
> 
> 标签：node.js, url, express

我正在玩 Node.js 并尝试发出 Twitter API 请求。

我正在使用 Express 生成的项目，所以我`app.js`看起来像这样

```
var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path')
  , url = require('url');

var app = express();

// all environments
app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router);
app.use(express.static(path.join(__dirname, 'public')));

// development only
if ('development' == app.get('env')) {
  app.use(express.errorHandler());
}

app.get('/', routes.index);

http.createServer(app).listen(app.get('port'), function(){
  console.log('Express server listening on port ' + app.get('port'));
}); 
```

`index.js`像这样

```
exports.index = function(req, res){

  var username = 'Axiol';

  option = {
    protocol: 'http:',
    host: 'api.twitter.com',
    pathname: '/1/statuses/user_timeline.json',
    query: { screen_name: username, count: 10 }
  }

  var twitterUrl = url.format(options);

  console.log(twitterUrl);
}; 
```

看起来很不错，但是，它总是给我这些错误

```
ReferenceError: url is not defined
    at exports.index (/Users/Arnaud/Sites/badge/routes/index.js:17:20)
    at callbacks (/Users/Arnaud/Sites/badge/node_modules/express/lib/router/index.js:161:37)
    at param (/Users/Arnaud/Sites/badge/node_modules/express/lib/router/index.js:135:11)
    at pass (/Users/Arnaud/Sites/badge/node_modules/express/lib/router/index.js:142:5)
    at Router._dispatch (/Users/Arnaud/Sites/badge/node_modules/express/lib/router/index.js:170:5)
    at Object.router (/Users/Arnaud/Sites/badge/node_modules/express/lib/router/index.js:33:10)
    at next (/Users/Arnaud/Sites/badge/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.methodOverride [as handle] (/Users/Arnaud/Sites/badge/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:37:5)
    at next (/Users/Arnaud/Sites/badge/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at multipart (/Users/Arnaud/Sites/badge/node_modules/express/node_modules/connect/lib/middleware/multipart.js:64:37) 
```

看起来它找不到`url`，但它在`app.js`...中定义得很好

任何想法 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T18:25:43.523

你也需要`var url = require('url')`在你的`routes/index.js`文件中做。我认为这是因为 nodejs 模块系统。每个模块都是孤立的，从外部可见的唯一内容是您添加的内容`exports`（显然还有全局变量）。所以一个模块中的局部变量对其他模块是不可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:09:44.097

您收到错误的原因是“url”模块未导入您的 index.js 模块。

node.js 中的每个模块都是封装的，它不会向外界公开任何内容，除非您通过导出指定它，就像您对 export.index = function(...) { ... } 所做的那样

但是，如果您这样做，它将无法工作，因为 Node 的 URL 模块并非旨在发出 HTTP 请求，而是用于处理 URL。根据节点的文档：

“此模块具有 URL 解析和解析实用程序”。见[http://nodejs.org/api/url.html](http://nodejs.org/api/url.html)

如果你想向 Twitter 发出 HTTP 请求，你可以使用一个名为“request”的 Node 模块，它可以稍微简化一些事情。见[https://github.com/mikeal/request](https://github.com/mikeal/request)

希望这可以帮助。

# python - 如何使用 Python 对 IDLE 交互式提示进行分区？

> ID：15978327
> 
> 赞同：0
> 
> 时间：2013-04-12T18:23:37.857
> 
> 标签：python, python-2.7, console, command-line-interface

我想创建一个基本的多人游戏（通过 LAN）文本-rpg。为此，我希望能够让用户同时看到故事情节和聊天。我想我可以通过拆分控制台的屏幕来做到这一点。这是我想要的一个想法：

```
<------Chat-------->
xxmbabanexx: Hello Everyone
John Smith: Sup, Playing Game.
xxmbabanexx: Help me to kill the goblin

<------Story------->
What is your name?
>>> xxmbabanexx
A goblin approaches. What do you do? 
```

**是否可以使用 Python 2.7.3 拆分控制台屏幕？**

**注意：**我希望它是跨平台的（mac、windows、linux）。如果我需要使用特定于平台的库，请向我展示其他操作系统上的等价物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:36:35.350

IDLE 不是执行此操作的最佳场所。你很可能最终会在 IDLE 中运行一个复杂的 curses 程序。可以使用高级终端库对终端进行分区……*但这非常困难*。我建议使用 gui 平台，例如 Tkinter、pyQT 或 wxPython（它们都提供了相当程度的跨平台支持）。

# php - 提交按钮在第一次点击时不起作用

> ID：15978328
> 
> 赞同：2
> 
> 时间：2013-04-12T18:23:39.090
> 
> 标签：php

我尝试了许多不同的方法，但我似乎无法弄清楚为什么提交按钮在第一次单击时不起作用。我已经从代码中删除了 if 语句，但仍然需要单击两次。在第一次单击时，它会刷新页面，当您单击必须向下滚动到的提交按钮时，这是最明显的。下面的代码在页面上重复了大约 27 次，但歌曲不同。在第二次点击后它们都可以工作，所以我很确定它们连接正确。此外，当您单击按钮一次，然后如果您单击另一个按钮，它会提交您单击的第一个按钮。

如果有人想看看它的实际外观，我已经在页面上设置了一个测试帐户。[http://www.saint57records.com/rewards/index.php](http://www.saint57records.com/rewards/index.php)用户名：test 密码：test

```
<?php
$resultstwo = mysqli_query($con,"Select * FROM users WHERE user_name ='$username'");
while ($row = mysqli_fetch_array($resultstwo))
{
extract($row);
}
?>
<form method="post" action="index.php">
  <?php
    //If submit form was clicked
    if(isset($_POST['endo'])) {
        //Server side validation for security purposes
       if($points >= 100 AND $endo == 0 AND $savetheworldalbum == 0) {
            mysqli_query($con,"UPDATE users SET points = points - 100 WHERE users.user_name = '$username' LIMIT 1");
            mysqli_query($con,"UPDATE users SET endo = 1 WHERE users.user_name = '$username' LIMIT 1");
        }
    }
    if ($points >= 100 AND $endo == 0 AND $savetheworldalbum == 0) {
        echo '<input type="submit" name="endo" value="100pts">';
    } elseif ($endo == 1 OR $savetheworldalbum == 1) {
        echo '<input type="submit" name="submit" value="100pts" disabled title="You already earned this track!">';
    } else {
        echo '<input type="submit" name="submit" value="100pts" disabled title="You need at least 100 points for this download">';
    } 
  ?>
</form> 
```

这就是输出

```
<form method="post" action="index.php">
<input type="submit" name="endo" value="100pts"></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:31:16.203

看起来您在`$endo`决定是否禁用提交按钮之后设置 php 变量。首先阅读`$_POST`，收集数据，*然后*生成 HTML。但是，除非您包含设置 $endo 的代码，否则我无法确定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:57:25.493

尝试将提交处理程序放在表单之外（html/php 文件的顶部）。

```
<?php
if(isset($_POST['endo'])) {
    //Server side validation for security purposes
   if($points >= 100 AND $endo == 0 AND $savetheworldalbum == 0) {
        mysqli_query($con,"UPDATE users SET points = points - 100 WHERE users.user_name = '$username' LIMIT 1");
        mysqli_query($con,"UPDATE users SET endo = 1 WHERE users.user_name = '$username' LIMIT 1");
    }
} else { ?>
<html>
.`
. 
```

# regex - 正则表达式中的打开和关闭引号 []

> ID：15978330
> 
> 赞同：0
> 
> 时间：2013-04-12T18:23:44.153
> 
> 标签：regex, emacs, elisp

我有需要使用 elisp 正则表达式提取的文本，其中包含开始和结束引号：- ”和“（不是标准的“字符）

例如，文本如下所示：

```
name\tmy-name\t\t
value\ttext here is what I need “inside quotes” text text text\t\t
otherattrib\tvala\t\t
otherattrib2\tvalb\t\t 
```

缓冲区中有真正的选项卡 - 我使用 \t 在上面显示它们。

我需要在 value\t 之后和下一个选项卡之前获取文本。下面是我的 elisp 函数。

```
(defun find-text()
  (interactive) 
  (goto-char (point-min))
  (when (re-search-forward "value\t\\([a-zA-Z0-9- ]+\\)")
    (goto-char (point-max))
    (insert "\n\n\ndefault=")
    (insert (match-string 1)))) 
```

由于引号，这不太有效。我可以在 [ ] 中输入引号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:26:11.123

```
\\([a-zA-Z0-9- ]+\\) 
```

如何用更简单的替换它：

```
\\([^\t]+\\) 
```

除非你想限制那里的字符，否则只允许任何非制表符。

# c# - 从 EventHandler 中删除 EventHandler 的问题

> ID：15978331
> 
> 赞同：2
> 
> 时间：2013-04-12T18:23:54.207
> 
> 标签：c#, event-handling

我向一个事件添加了一个方法，但现在想在某些条件下从这些事件上删除该方法：

```
public MyClassConstructor()
{
    otherClassObj.OnMyDataReceived += new EventHandler(analyzeValues);
}
private void analyzeValues(object sender, EventArgs e)
{
    // finished analysis
    otherClassObj.OnMyDataReceived -= analyzeValues;
} 
```

这似乎使程序崩溃，但我不明白为什么。这是我的第一个 C# 程序。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:40:11.720

也许您的问题是您举办活动的方式？您必须首先将事件背后的当前委托复制到一个局部变量，然后检查它是否为空，然后才*调用*它。像这样：

```
var omdr = OnMyDataReceived;
if (omdr != null)
    omdr(this, new EventArgs()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:27:32.533

确保您的事件访问器[编写得当](http://msdn.microsoft.com/en-us/library/bb882534.aspx)。它应该看起来像这样：

```
private EventHandler onMyDataReceived;
public event EventHandler OnMyDataReceived
{
    add
    {
        lock (OnMyDataReceived)
        {
            onMyDataReceived += value;
        }
    }
    remove
    {
        lock (OnMyDataReceived)
        {
            onMyDataReceived -= value;
        }
    }
} 
```

另外，考虑使用它来添加事件处理程序：

```
otherClassObj.OnMyDataReceived += analyzeValues; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T18:33:01.903

以下应用程序演示了如何订阅和取消订阅事件。您可以将此代码放在新的控制台应用程序中以运行它。

它表明第一次引发事件时，会调用您的事件处理程序，然后自行取消订阅。第二次，不再订阅任何处理程序，也没有任何反应。

```
using System;
class Program
{

    static void Main(string[] args)
    {
        MyClass c = new MyClass();
        Console.WriteLine("Ready..");
        Console.ReadLine();
    }
}

public class MyClass
{
    OtherClass otherClassObj = new OtherClass();

    public MyClass()
    {
        Console.WriteLine("Class constructor.. adding event");
        otherClassObj.OnMyDataReceived += analyzeValues;

        Console.WriteLine("Raising event 1");
        otherClassObj.Raise();

        Console.WriteLine("Raising event 2");
        otherClassObj.Raise();
    }

    private void analyzeValues(object sender, EventArgs e)
    {
        Console.WriteLine("Event handler");
        Console.WriteLine("Removing event");
        otherClassObj.OnMyDataReceived -= analyzeValues;
    }
}

public class OtherClass
{
    public event EventHandler OnMyDataReceived;

    public void Raise()
    {
        if (OnMyDataReceived != null)
        {
            OnMyDataReceived(this, EventArgs.Empty);
        }
    }
} 
```

# ruby-on-rails - 为什么 twitter oauth 访问令牌无效/过期（rails 3）

> ID：15978333
> 
> 赞同：0
> 
> 时间：2013-04-12T18:24:01.357
> 
> 标签：ruby-on-rails, ruby, omniauth, twitter-oauth

过去三天我一直在尝试解决这个问题，但无济于事。我要做的就是允许使用 Twitter 登录的用户向他们的帐户发送推文。

这是我要解决的错误消息：

```
Twitter::Error::Unauthorized in PostsController#create
Invalid or expired token 
```

我已经尝试了各种不同的东西，但我回到了一个完整的 360 圈以同样的信息。

这是我现在所处的位置：

```
class ApplicationController < ActionController::Base

   def twitter
    unless @twitter_user
      provider = Authentication.find_by_provider('twitter')
      @twitter_user = Twitter::Client.new(:token => provider.token, :secret => provider.secret) rescue nil
    end
    @twitter_user
    end 
```

这是引发错误的地方

```
class PostsController < ApplicationController
    def create
        twitter.update(@post.content)
    end 
```

这是架构的布局方式

```
create_table "authentications", :force => true do |t|
    t.integer  "user_id"
    t.string   "provider"
    t.string   "uid"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "secret"
    t.string   "token"
  end

  create_table "users", :force => true do |t|
    t.string    "name"
    t.string    "email"
    t.timestamp "created_at",                         :null => false
    t.timestamp "updated_at",                         :null => false
    t.string    "password_digest"
    t.string    "remember_token" 
```

这是我的初始化程序

```
Rails.application.config.middleware.use OmniAuth::Builder do
  configure do |config|
    config.path_prefix = '/auth'
  end

  provider :twitter, "XXXXXXXXXXXXXXXXXXXXXX", "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
end

Twitter.configure do |config|
  config.consumer_key = "XXXXXXXXXXXXXXXXXXXXXX"
  config.consumer_secret = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
  config.oauth_token = :token
  config.oauth_token_secret = :secret
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:57:25.893

尝试改变这个：

```
Twitter::Client.new(:token => provider.token, :secret => provider.secret) 
```

进入这个

```
Twitter::Client.new(:oauth_token => provider.token, :oauth_token_secret => provider.secret) 
```

# mysql - mysql 将列的默认值设置为当前登录用户

> ID：15978334
> 
> 赞同：8
> 
> 时间：2013-04-12T18:24:04.620
> 
> 标签：mysql

如何将列的默认值设置为登录用户？

我正在创建一个“日志记录”表，其中一列应该是登录用户

```
(the output of "SELECT user();"). 
```

这可能吗？

**编辑——我试过的：**

```
create trigger logtrigger_test before insert on logging_test for each row set new.changed_by=current_user(); 
```

**编辑2：描述表**

```
+---------------+-------------+------+-----+-------------------+-----------------------------+
| Field         | Type        | Null | Key | Default           | Extra                       |
+---------------+-------------+------+-----+-------------------+-----------------------------+
| id            | int(11)     | NO   | PRI | NULL              | auto_increment              |
| source_table  | varchar(50) | NO   |     | NULL              |                             |
| foreign_id    | int(11)     | NO   |     | NULL              |                             | 
| field_changed | varchar(30) | NO   |     | NULL              |                             | 
| changed_by    | varchar(30) | YES  |     | NULL              |                             | 
| changed_on    | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
+---------------+-------------+------+-----+-------------------+-----------------------------+ 
```

**编辑 3：表中的示例条目**

```
+----+---------------+------------+------------------+----------------------+---------------------+
| id | source_table  | foreign_id | field_changed    | changed_by           | changed_on          |
+----+---------------+------------+------------------+----------------------+---------------------+
| 0  | phone_numbers | 34         | home_phone       | jeff@localhost       | 2013-04-10 14:15:13 |
| 1  | contact_info  | 24         | first_name       | bob@localhost        | 2013-04-11 10:18:43 | 
| 2  | addresses     | 32         | home_address     | autoscript@localhost | 2013-04-12 11:10:37 |
| 3  | addresses     | 36         | business_address | bob@localhost        | 2013-04-12 14:56:17 |
| 4  | addresses     | 36         | business_address | jeff@localhost       | 2013-04-12 15:25:52 |
+----+---------------+------------+------------------+----------------------+---------------------+ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T20:05:52.550

好的，这通常不是创建审计表的方式。通常，当您想要记录插入、删除和更新时，您会执行以下操作：

创建一个像 foo 这样的表：

```
create table foo (
    foo_id int not null auto_increment primary key,
    foo_data varchar(100) not null
    ); 
```

然后你通常会像这样制作一个审计表：

```
create table foo_audit (
    foo_audit_id not null auto_increment primary key,
    foo_id int,
    foo_data varchar(100),
    change_type char(1),
    change_timestamp timestamp default current_timestamp,
    change_login varchar(100)
    ); 
```

然后你在表上创建一个或多个触发器，如下所示：

```
create trigger trg_foo_insert
    after insert on foo
    for each row 
    insert into foo_audit (
        foo_id,
        foo_data,
        change_type,
        change_login
        )
    values (
        new.foo_id,
        new.foo_data,
        'I',
        current_user
        ); 
```

您将为更新创建一个“U”触发器，为删除创建一个“D”触发器。

我认为你遇到的主要问题是你试图做一个“一刀切”的审计表；我认为这种模式会给你带来很多问题，你不一定有你正在寻找的数据，你仍然需要为你正在审计的每个表编写至少一个触发器。

但是，您的问题的实际答案是，您要么在未插入的表上设置触发器，要么尝试更新该列不存在的表上的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-30T08:39:48.107

我们可以在任何具有默认约束的表中添加列名作为系统用户。
在这里，我将在表格中添加 ModifiedBy 列。

```
ALTER TABLE [AccessDB].[dbo].[MediaTable]
ADD ModifiedBY varchar(100) default  SUSER_SNAME() 
```

# web-services - 如何使用 POST 发送 Mirth HTTP 连接器

> ID：15978335
> 
> 赞同：3
> 
> 时间：2013-04-12T18:24:08.473
> 
> 标签：web-services, mirth

我们有一个 mirth 实例使用 POST 方法发送到休息服务。

然而，Mirth 似乎是通过 URL（如 GET）发送至少一个参数。

我们设置了以下选项：

方法：POST 多部分：无发送响应：无响应内容：标头和正文作为 XML 身份验证：无使用持久队列：无字符集编码：UTF-8

然后我们有 5 个查询参数 -

其中之一是名称“文件”和“${message.rawData}”的值。我正在查看 Apache 请求日志，并且可以看到这个属性/值对出现在 URL 中（好像它正在执行 GET 而不是 POST）。

没有标题

内容类型 text/plain 内容：文字“无数据”。

我们正在使用 Mirth Connect Server 2.2.1.5861

如何强制此值（“文件”）出现在 POST 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:20:54.833

虽然@Dave 的回应是有道理的，但它实际上并没有为我工作。但它确实让我走上了进一步调查的道路。

最大的关键是，为了将列表属性/值对作为“网络表单处理”意义上的“帖子”发送，您需要这样做：

将有效负载“类型”设置为：

```
application/x-www-form-urlencoded 
```

这会强制所有元素都被“发布”。如果你想要一个混合包（由于最纯粹的原因是“坏形式”），那么你需要跳过更多的箍。

有关详细信息，请参阅以下链接：

[与访问 RESTful Web 服务相关的 Mirth 论坛主题](http://www.mirthcorp.com/community/forums/showthread.php?t=6194)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:41:29.083

mirth 中的查询参数是 URL 参数。因此，它会遇到类似于 Get 的情况。如果要发布变量，则需要在 http 发送者的“内容”部分对它们进行编码。

我相信它遵循类似的编码，尽管您可能想进一步研究它

```
lastName=Smith&age=31&team=woodchucks 
```

所以你可能想要这样的东西：

```
file=${message.rawData} 
```

# multithreading - Gdata电子表格API多线程（python）

> ID：15978336
> 
> 赞同：1
> 
> 时间：2013-04-12T18:24:16.323
> 
> 标签：multithreading, google-docs, gdata, google-docs-api, gdata-api

有谁知道你是否可以使用 python 的 gdata 电子表格 api 多线程 google docs 电子表格写入？

我有一个需要每天更新的电子表格数据库，最好将写入分布在多个内核上以加快速度。

在此先感谢任何了解该主题的人。我最大的担忧是一个谷歌账户是否可以同时写两个（或更多）东西（虽然，它们是共享文档，所以我可以有多个账户——一个用于每个核心......）

再次感谢

# javascript - Flexslider 和 Form 内容

> ID：15978337
> 
> 赞同：0
> 
> 时间：2013-04-12T18:24:18.760
> 
> 标签：javascript, flexslider

我在使用 Flexsider 时遇到了一个不寻常的问题，其中一张幻灯片中有一个表格。表单中有一些单选按钮，除了容器的一些 div 之外没有其他任何东西。单击单选按钮会导致按钮周围出现光标轮廓，因此它正在响应，但不会被检查。我确实尝试过使用 javascript 调用来设置属性的测试。走过，它设置了单选按钮成功，但退出功能后，单选按钮被重置。我似乎找不到在这里或其他地方讨论过的任何类似问题，我完全惊呆了。

表单内容是通过 ajax 加载的。我注意到 Flexslider 创建了第一张和最后一张幻灯片的克隆，并且当 ajax 内容加载到幻灯片中时，克隆正在更新。我重新排序了我的幻灯片，因此不会复制表单，但仍然无法检查单选按钮。但是，在 Firebug 中，我将 checked 属性设置为 true（在 Watch 面板中使用 jquery），这一次按钮仍然处于选中状态。尝试选中/取消选中没有任何效果，并且我通过 Firebug 设置其属性的按钮仍然存在。

**编辑**：我添加了一个文本字段，并且没有问题。

以下是 HTML。老实说，javascript 可以忽略不计，因为它只是获取表单内容的 ajax 请求。视频中使用的 Javascript 是 jquery、flexslider 和 flowplayer。该表单位于数据幻灯片 2 中，正式地是第二个，因为第一个是克隆。

```
<section class="slider">
    <div class="flexslider" id="mainSlider">

        <div class="flex-viewport" style="overflow: hidden; position: relative;">
            <ul class="slides" style="width: 1000%; margin-left: -3486px;">
                <li data-slide="2" data-type="Quiz" data-id="6" class="clone" style="width: 1162px; float: left; display: block;">

                    <div class="quiz" data-id="1">
                        <div class="quizDescription">

                        </div>
                        <div class="quizContent" data-id="1">
                            <div style="max-width: " data-id="1" class="question">
                                <div class="questionText">Is TRUE true?<br></div>
                                    <span id="CourseQuizAnswer"><input type="radio" name="CourseQuizAnswer" id="CourseQuizAnswer_0" value="2"> 
                                        <label for="CourseQuizAnswer_0" style="display:inline">True</label><br>
                                        <input type="radio" name="CourseQuizAnswer" id="CourseQuizAnswer_1" value="3">
                                        <label for="CourseQuizAnswer_1" style="display:inline">False</label>
                                    </span>
                                </div>
                            </div>
                        <div class="well">
                            <input type="button" value="Submit" name="yt0" onclick="submitQuestionAnswer(this);" class="btn btn-primary btn-med">
                        </div>
                    </div>

                </li>
                <li data-slide="0" data-type="Video" data-id="2" style="width: 1162px; float: left; display: block;" class="">

                    <div class="minimalist video-slide flowplayer is-mouseout is-ready is-paused" data-video_id="1" id="mainPlayer">
                        <video tabindex="0" class="fp-engine">
                            <source src="http://stream.flowplayer.org/bauhaus/624x260.webm" type="video/webm"></source>
                        </video>
                        <div class="fp-ratio" style="padding-top: 56.25%;"></div>      <div class="fp-ui">         <div class="fp-waiting"><em></em><em></em><em></em></div>         <a class="fp-fullscreen"></a>         <a class="fp-unload"></a>         <p class="fp-speed"></p>         <div class="fp-controls">            <a class="fp-play"></a>            <div class="fp-timeline" style="">               <div class="fp-buffer" style="width: 100%;"></div>               <div class="fp-progress"></div>            </div>            <div class="fp-volume">               <a class="fp-mute"></a>               <div class="fp-volumeslider" style="">                  <div class="fp-volumelevel" style="width: 43%;"></div>               </div>            </div>         </div>         <div class="fp-time">            <em class="fp-elapsed">00:00</em>            <em class="fp-remaining">00:40</em>            <em class="fp-duration">00:40</em>         </div>         <div class="fp-message"><h2></h2><p></p></div>      </div><a href="http://flowplayer.org" target="_top"></a></div>
                </li>
                <li data-slide="1" data-type="Content" data-id="5" style="width: 1162px; float: left; display: block;">
                    Segment 2            
                </li>
                <li data-slide="2" data-type="Quiz" data-id="6" class="flex-active-slide" style="width: 1162px; float: left; display: block;">
                    <div class="quiz" data-id="1">
                        <div class="quizDescription">

                        </div>
                        <div class="quizContent" data-id="1">
                            <div style="max-width: " data-id="1" class="question">
                                <div class="questionText">
                                    Is TRUE true?<br>
                                </div>
                                <span id="CourseQuizAnswer">
                                    <input type="radio" name="CourseQuizAnswer" id="CourseQuizAnswer_0" value="2"> 
                                    <label for="CourseQuizAnswer_0" style="display:inline">True</label><br>
                                    <input type="radio" name="CourseQuizAnswer" id="CourseQuizAnswer_1" value="3"> 
                                    <label for="CourseQuizAnswer_1" style="display:inline">False</label>
                                    </span>
                                </div>
                            </div>
                        <div class="well">
                            <input type="button" value="Submit" name="yt0" onclick="submitQuestionAnswer(this);" class="btn btn-primary btn-med">
                        </div>
                    </div>

                </li>
                <li data-slide="0" data-type="Video" data-id="2" style="width: 1162px; float: left; display: block;" class="clone">

                    <div class="minimalist video-slide" data-video_id="1" id="mainPlayer">
                        <video tabindex="0">
                            <source src="http://stream.flowplayer.org/bauhaus/624x260.webm" type="video/webm"></source>
                        </video>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</section> 
```

有没有人有任何见解？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:16:27.040

单选按钮有重复`id`的 s。删除重复`id`的 s 并重试。让我知道它是否仍然无法正常工作。

例如：

```
<input type="radio" name="CourseQuizAnswer" id="CourseQuizAnswer_0" value="2"> 
```

是相同的

```
<input type="radio" name="CourseQuizAnswer" id="CourseQuizAnswer_0" value="2"> 
```

它在页面上存在两次。

我知道为什么您可能认为您`id`的 s 是独一无二的：您使它们在与它们相关的问题上独一无二。但是，您忘记使它们在页面上独一无二。问题是`id`s 都在全局页面范围内，无论它们在哪里声明。

祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T11:05:32.610

flexslider 为每张幻灯片创建一个镜像副本，以在滚动浏览最后一张幻灯片时产生连续性的错觉。这些是使用类名“克隆”创建的。您可以尝试在使用 jQuery 提交之前禁用表单：

```
$(".clone input").prop("disabled", true); 
```

# java - 使用 RequestBuilder 表单发布

> ID：15978340
> 
> 赞同：1
> 
> 时间：2013-04-12T18:24:25.833
> 
> 标签：java, gwt

在 GWT中执行 a 的正确方法是`RequestBuilder`什么能够完全按照纯 HTML 执行此操作：

```
<form action="javascript:;" method="post" data-field="form">
      <input class="rounded" name="username" size="20" type="text" data-field="username">
      <input class="rounded" name="password" size="20" type="password" data-field="password">
      <button class="submit" type="submit" value="Login" data-field="button"><br>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:43:30.253

尽管您可以使用 gwt 小部件包装每个输入，但在大型表单的情况下，最好遍历所有表单元素，读取它们的名称和值，并生成一个查询字符串以使用您的 requestBuilder 作为数据发送，此代码应该可以工作：

```
 String payload = "";
  Element e = DOM.getElementById("form");
  // you need make this recursive if you want grand-children
  for (int i = 0, l = e.getChildCount(); i < l; i++) {
    Element c = e.getChild(i).cast();
    if (c.getTagName().toLowerCase().matches("input")) {
      String name = c.<InputElement>cast().getName();
      String value = c.<InputElement>cast().getValue();
      payload += name + "=" + value + "&";
    }
  }

  RequestBuilder b = new RequestBuilder(POST, "/my_servlet");
  try {
    b.sendRequest(payload, new RequestCallback() {
      public void onResponseReceived(Request request, Response response) {
         String resp = response.getText();
      }
      public void onError(Request request, Throwable exception) {
      }
    });
  } catch (RequestException ex) {
    ex.printStackTrace();
  } 
```

但是，我更喜欢使用[gwtquery](https://code.google.com/p/gwtquery/)的口号：（`do more, write less`）：

```
 Properties data = Properties.create();
  // This loop also gets grand-children, and you can use more sophisticated css selectors
  for (Element e: $("form").find("input").elements()) {
    data.set($(e).attr("name"), $(e).val());
  }

  GQuery.post("/my_servlet", data, new Function(){
    public void f(){
      // Use getDataObjet in non snapshot versions
      String response = arguments(0);
    };
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:34:27.460

**首先构建如下请求（伪代码）：**

```
RequestBuilder req= new RequestBuilder(RequestBuilder.POST, url);
req.setHeader("Content-Type","application/x-www-form-urlencoded");

StringBuilder sb = new StringBuilder();
sb.append(URL.encodeComponent("usename="+usernameVal+"&"));
sb.append(URL.encodeComponent("password="+passwordval));//add & if more params.

req.setRequestData(sb.toString());
req.setCallback(new RequestCallback() {

        @Override
        public void onResponseReceived(Request request, Response response) {
           //TO DO
        }

        @Override
        public void onError(Request request, Throwable exception) {
        }
    }); 
```

**在提交按钮单击处理程序：**

```
try {
       req.send();
    }
catch (Exception e){
       e.printStackTrace();

    }
} 
```

它们有点旧，但仅供参考：[RequestBuilderUsage](http://www.androidadb.com/class/re/RequestBuilder.html)和[GeetingResponse through GWT HTTP](http://www.javabeat.net/2011/03/getting-response-through-gwt-using-http-protocol/)。

*我希望以上几行能给一些基本的想法*

# regex - 使用 firstName.LastName 限制域名的电子邮件正则表达式

> ID：15978341
> 
> 赞同：1
> 
> 时间：2013-04-12T18:24:39.897
> 
> 标签：regex

我有这个正则表达式

```
"^\w+@(email1|email2|email3|email4|email5)+?\.[a-zA-Z]{2,3}$" 
```

这可以限制人们可以用来注册的域名。但是有些人的地址是这样的：

```
FirstName.LastName@email1.com 
```

因此，即使他们的域名匹配，他们也无法注册。

关于如何`"first.last"`在此正则表达式中包含可选选项的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:45:50.840

这个正则表达式应该适合你：

```
^[a-zA-Z0-9.!#$%&'*+-\/=?\^_`{|}~-]+@(?:email1|email2|email3|email4|email5)(?:\.[a-zA-Z0-9-]+)+$ 
```

这将涵盖以下情况：

*   abc@email1.com
*   abc@email2.co.uk
*   abc@email3.jp.co.uk
*   first.last@email4.jp.co.uk

### 现场演示：[http ://www.rubular.com/r/VmPw0Q3unZ](http://www.rubular.com/r/VmPw0Q3unZ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:32:57.617

简单地检查 not`@`怎么样？

```
^[^@]+@... 
```

实际检查`.`：（如果任何地方超过 1 个都可以）

```
^(\w|\.)+@... 
```

如果你想限制`.`为1：

```
^\w+(\.\w+)?@... 
```

（在`...`哪里`(email1|email2|email3|email4|email5)+?\.[a-zA-Z]{2,3}$`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:34:07.880

您构建了一个较小的正则表达式来处理域之前电子邮件初始部分的验证。现在您正在使用`\w+`，所以如果您仅验证这两种情况（word 或 word.word），您可以将正则表达式更改为`^(\w|\w.\w)+@(email1|email2|email3|email4|email5)+?.[a-zA-Z]{2,3}$`

# matlab - 无法打开以这种方式压缩的 tiff 文件 (2) - imageJ/FIJI

> ID：15978343
> 
> 赞同：1
> 
> 时间：2013-04-12T18:24:43.737
> 
> 标签：matlab, matlab-figure, imagej

我有两组从 MATLAB 生成的图像 - 一组是我从图形窗口手动保存到 tif 文件时，另一组是通过使用`imwrite`MATLAB 中的函数以 tif 格式保存的图像。

当我尝试使用第一组图像在斐济（图像 J）中执行某些操作时，它可以工作，但是当我尝试在第二组中执行相同操作时，我收到一条错误消息，提示“无法打开以这种方式压缩的 tiff 文件（2 )'。有我需要安装的插件吗？

第一组的 imfinfo - 由图形窗口中的 saveas tif 创建：

```
Filename: [1x68 char]
              FileModDate: [1x20 char]
                 FileSize: 51376
                   Format: 'tif'
            FormatVersion: []
                    Width: 719
                   Height: 477
                 BitDepth: 24
                ColorType: 'truecolor'
          FormatSignature: [1x4 double]
                ByteOrder: [1x13 char]
           NewSubFileType: 0
            BitsPerSample: [8 8 8]
              Compression: 'PackBits'
PhotometricInterpretation: 'RGB'
             StripOffsets: [69x1 double]
          SamplesPerPixel: 3
             RowsPerStrip: 7
          StripByteCounts: [69x1 double]
              XResolution: 96
              YResolution: 96
           ResolutionUnit: 'Inch'
                 Colormap: []
      PlanarConfiguration: 'Chunky'
                TileWidth: []
               TileLength: []
              TileOffsets: []
           TileByteCounts: []
              Orientation: 1
                FillOrder: 1
         GrayResponseUnit: 0.0100
           MaxSampleValue: [1x3 double]
           MinSampleValue: [0 0 0]
             Thresholding: 1
                   Offset: 50592
         ImageDescription: [1x22 char] 
```

第二组的 imfinfo - 由 imwrite 创建。imwrite(bw,fullfile(文件名),'tiff');

```
 Filename: [1x75 char]
              FileModDate: [1x20 char]
                 FileSize: 25586
                   Format: 'tif'
            FormatVersion: []
                    Width: 832
                   Height: 587
                 BitDepth: 1
                ColorType: [1x9 char]
          FormatSignature: [1x4 double]
                ByteOrder: [1x13 char]
           NewSubFileType: 0
            BitsPerSample: 1
              Compression: [1x8 char]
PhotometricInterpretation: [1x11 char]
             StripOffsets: [66x1 double]
          SamplesPerPixel: 1
             RowsPerStrip: 9
          StripByteCounts: [66x1 double]
              XResolution: 72
              YResolution: 72
           ResolutionUnit: 'Inch'
                 Colormap: []
      PlanarConfiguration: 'Chunky'
                TileWidth: []
               TileLength: []
              TileOffsets: []
           TileByteCounts: []
              Orientation: 1
                FillOrder: 1
         GrayResponseUnit: 0.0100
           MaxSampleValue: 1
           MinSampleValue: 0
             Thresholding: 1
                   Offset: 24868 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:01:14.090

我不确定，如果你得到答案。我有一个类似的问题。尝试通过以下方式保存文件：

```
imwrite(bw,fullfile(filename),'tiff', 'Compression','none'); 
```

或尝试使用“packbits”进行压缩

```
imwrite(bw,fullfile(filename),'tiff', 'Compression','packbits'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:35:15.187

试试这个 ImageJ 插件 - [IJ 插件：Image I/O](http://ij-plugins.sourceforge.net/plugins/imageio/index.html)。

* * *

**编辑**

看起来您的图像是二进制的（BitDepth=1）。默认情况下，IMWRITE 将二进制图像保存为 TIFF 格式并进行`ccitt`压缩。IMageJ 不支持此类图像。（例如，出于可能的原因，请参阅此[线程）。](http://imagej.1557.x6.nabble.com/Problem-opening-TIFF-image-in-ImageJ-td3684014.html)

如果您需要保存图像，请`imwrite`尝试设置为`BitDepth`24 和. 比较输出中的其他字段，并在必要时使用不同的字段。`Compression``packbits``imfinfo``imwrite`

# java - 鉴于此 Java 代码示例，我对内部类有基本的了解吗？

> ID：15978344
> 
> 赞同：1
> 
> 时间：2013-04-12T18:24:43.597
> 
> 标签：java, scope, inner-classes

我正在设计一个倒数计时器，并在[这里](https://stackoverflow.com/questions/4314725/java-making-time-to-decrease-to-zero-by-swing-timer)找到了一个。这个效果很好……你输入秒数，它会自动为你倒计时。我修改代码以侦听单选按钮选择以设置开始时间。单击“开始”按钮时将开始倒计时。我已经完成了布局，但是在将 ButtonListener 放置在下面的代码中时遇到了问题。

![我的用户界面](https://i.stack.imgur.com/0sHlz.jpg)

我*刚*开始使用嵌套类，所以有些概念对我来说有点模糊。下面，如果我理解正确，那`ActionEvent`是倒计时，它位于`ActionListener`classk 内部，它捕获按钮单击。倒计时依赖于并且不能独立于按钮单击运行，并且`Listener`类中的所有变量也可用于`Event`该类。

所以我在想，如果我想为单选按钮添加一个`Listener`and ，那些将封装，它将封装下面的代码。我已经标记了我认为他们应该去哪里的类声明，但没有标记结束括号。我需要做一些更仔细的分析来弄清楚它们是如何工作的。这是做事的正确方法吗？或者，还有更好的方法？如果我在 radiobuttion 中将我的 startTime 变量声明为 public`Event``Listener``Action``event`，它应该遵循其他嵌套类，对吗？

我是否正确理解了这一切？还是我错过了一些重要的观点。这是我的第一个内部类项目，所以请温柔。:)

```
 public Test() {
    super("Countdown timer");
    final String startTime = "10"
    text = new JTextField(startTime, 18);
    start = new JButton("Start");
    pr = new JRadioButton("30");
    sr = new JRadioButton("15");
    lr = new JRadioButton("5");
        JPanel radioPanel = new JPanel(new GridLayout(0, 1));
        radioPanel.add(pr);
        radioPanel.add(sr);
              radioPanel.add(lr);

//new button action listener here {
     // new button action event here {   

    start.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent click) {
        final long current = System.currentTimeMillis();
        try {
          final long limit = Integer.parseInt(text.getText().trim())* 1000; // X seconds
          timer = new Timer(1000, new ActionListener() {
            public void actionPerformed(ActionEvent event) {
              long time = System.currentTimeMillis();
              long passed = time - current;
              long remaining = limit - passed;
              if(remaining <= 0) {
                text.setText(startTime);
                timer.stop();
              } else {
                long seconds = remaining/1000;
                long minutes = seconds/60;
                long hours = minutes/60;
                text.setText(String.format("%02d:%02d:%02d remaining", hours, minutes, seconds%60));
              }
            }
            });
          timer.start();
        } catch(NumberFormatException nfe) {
          // debug/report here
          nfe.printStackTrace();
        }
      }});
    JPanel panel = new JPanel();
    panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
    panel.add(radioPanel);
    panel.add(text);
    panel.add(start, BorderLayout.CENTER );
    add(panel);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:04:14.510

您的代码没有定义任何典型的内部（=嵌套）类。您正在使用[Anonymous (inner) Classes](https://stackoverflow.com/q/355167/1593077)。您可能对这个 SO 问题感兴趣：

[Java 中如何使用匿名（内部）类？](https://stackoverflow.com/q/355167/1593077)

有关真正的内部（=嵌套）类的信息，请尝试Oracle 的[Java 教程的](http://docs.oracle.com/javase/tutorial/)[相关部分](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)。请注意，有两种内部类，静态和非静态，在 SO 的以下问题中讨论：

[Java内部类和静态嵌套类](https://stackoverflow.com/q/70324/1593077)

# curl - 使用 Apache HttpClient 将 curl 命令转换为 Java 代码

> ID：15978346
> 
> 赞同：1
> 
> 时间：2013-04-12T18:24:52.333
> 
> 标签：curl, apache-httpclient-4.x, put

我正在尝试将 java 客户端编写为 restful 服务。身份验证没有问题，但我不知道如何添加--data参数。

这是卷曲命令：

```
curl -i -L --user user:password -X PUT -H "Content-Type: application/json" 
--data '{"translation": {"0": "zero"}}' 
http://www.transifex.com/api/2/project/p1/resource/testspot/translation/ar/string/fbb05a9f1ad844fcd1740ce9bf8f2574/ 
```

我如何为该 curl 语句编写 java 客户端。我尝试了多种解决方案建议，但没有帮助。

这是我的java代码：

```
public static JsonElement httpPut(String username, String password, String url, String putText) throws UnauthorizedAccessException, Exception {

    JsonElement jelement = null;
    try {

        String basicAuth = Base64.encodeBase64String(("gccster" + ":" + "test").getBytes());
        HttpClient client = new DefaultHttpClient();
        HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000);

        HttpPut httpPut = new HttpPut("https://www.transifex.com/api/2/project/demoproject1/resource/test/translation/el/string/bff3b5b0513a5e4821f649ffcca93069/");
        httpPut.setHeader("Authorization", "Basic " + basicAuth);
        httpPut.addHeader("Accept", "application/json");
        httpPut.addHeader("Content-Type", "application/json");

        //StringEntity putEntity = new StringEntity(putText, "UTF-8");
        //putEntity.setContentType("application/json");
        //httpPut.setEntity(putEntity);
        HttpResponse transifexResponse = client.execute(httpPut);

        StatusLine statusLine = transifexResponse.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        //if (statusCode == 200) {
        HttpEntity entity = transifexResponse.getEntity();
        InputStream content = entity.getContent();

        String responseText = readInputStream(content);

        if (responseText.equals("Authorization Required")) {
            throw new UnauthorizedAccessException("Anauthorized Exception");
        } else {
            jelement = new JsonParser().parse(responseText.toString());
        }
        //}
    } catch (UnauthorizedAccessException ex) {
        throw ex;
    } catch (Exception ex) {
        throw ex;
    }

    return jelement;

} 
```

# batch-file - 从带有索引字母的文本文件创建文件夹

> ID：15978347
> 
> 赞同：2
> 
> 时间：2013-04-12T18:24:52.570
> 
> 标签：batch-file

我有下面的批处理脚本。它应该读取文本文件每一行的第一个字符。就是a到z，应该在对应的文件夹下做一个子文件夹。它是别的东西，它应该在“_other”文件夹中创建。

所以如果我有一个清单：

```
123test
aaatest
bbbtest 
```

它应该创建：

```
c:\dirs\_other\123test
c:\dirs\a\aaatest
c:\dirs\b\bbbtest 
```

但由于某种原因，我的最后一个 if/else 不起作用。为什么不？这是脚本：

```
setlocal EnableDelayedExpansion
set file=c:\klantenlijst.txt
FOR /F "delims=~" %%i IN (!file!) DO (
set var=%%i 
set str=!var:~0,1!
IF !str!==A ( set letter=1 )
IF !str!==B ( set letter=1 )
IF !str!==C ( set letter=1 )
IF !str!==D ( set letter=1 )
IF !str!==E ( set letter=1 )
IF !str!==F ( set letter=1 )
IF !str!==G ( set letter=1 )
IF !str!==H ( set letter=1 )
IF !str!==I ( set letter=1 )
IF !str!==J ( set letter=1 )
IF !str!==K ( set letter=1 )
IF !str!==L ( set letter=1 )
IF !str!==M ( set letter=1 )
IF !str!==N ( set letter=1 )
IF !str!==O ( set letter=1 )
IF !str!==P ( set letter=1 )
IF !str!==Q ( set letter=1 )
IF !str!==R ( set letter=1 )
IF !str!==S ( set letter=1 )
IF !str!==T ( set letter=1 )
IF !str!==U ( set letter=1 )
IF !str!==V ( set letter=1 )
IF !str!==W ( set letter=1 )
IF !str!==X ( set letter=1 )
IF !str!==Y ( set letter=1 )
IF !str!==Z ( set letter=1 )

IF !letter!==1 ( md c:\Dirs\!str!\!var! ) ELSE ( md c:\Dirs\_Other\!var! )

) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T00:19:40.380

这是我会这样做的方式：

```
@echo off
setlocal EnableDelayedExpansion
set letters=ABCDEFGHIJKLMNOPQRSTUVWXYZ
set file=c:\klantenlijst.txt
FOR /F "delims=" %%i IN (%file%) DO (
   set var=%%i
   set str=!var:~0,1!
   for %%a in ("!str!") do if "!letters:%%~a=!" equ "%letters%" set str=_other
   md "c:\dirs\!str!\!var!"
) 
```

上面的程序试图从由所有字母组成的字符串中删除第一个字符；如果结果相同，则第一个字符不是字母。此方法更快，因为它不使用任何外部 .exe 命令。

**编辑**：*添加了一些解释*

在下面的下一个示例中，我首先编写一个命令，然后编写它的输出。

该`letters`变量包含 26 个字母，即：

```
echo !letters!
ABCDEFGHIJKLMNOPQRSTUVWXYZ 
```

批处理允许以这种方式替换变量值的一部分：

```
echo !letters:M=123!
ABCDEFGHIJKL123NOPQRSTUVWXYZ 
```

如果没有给出替换字符串，则原始子字符串将被删除：

```
echo !letters:M=!
ABCDEFGHIJKLNOPQRSTUVWXYZ 
```

如果原始子字符串包含在*另一个变量*中，则使用其值实现替换。例如，如果变量有一个字母：

```
set str=M
echo !letters:%str%=!
ABCDEFGHIJKLNOPQRSTUVWXYZ 
```

另一方面，如果变量没有字母，则新值与原始值相同：

```
set str=1
echo !letters:%str%=!
ABCDEFGHIJKLMNOPQRSTUVWXYZ 
```

这样，如果您`"!letters:%str%=!"`比较`"%letters%"`; 如果结果不同，则 str 变量包含一个字母；否则 str 变量包含非字母字符。

但是，您必须注意 str 变量是在FOR 循环*内修改的。*这意味着必须使用 DelayedExpansion 替换它的值，但这会导致以下有趣的代码：`"!letters:!str!=!"`这当然是无效的。修复此细节的方法是`!str!`通过 FOR 可替换参数更改值，然后在替换子字符串表达式中使用该参数。

您必须注意，先前的替换是由 cmd.exe 处理器立即作为批处理文件的正常处理来实现的。另一方面，为了执行管道的每一端，`ECHO !str! | FINDSTR /I "[A-Z]"`需要加载 FINDSTR.EXE 文件（大约 30 KB 大小）并执行*两个CMD.EXE 副本，并且**针对每个名称执行此过程在列表中！*. 这意味着这种方法比前一种方法*要慢*得多，如果名称列表很大，时间差异会很明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T19:39:16.930

您可以使用`FINDSTR`来测试第一个字符是否为字母：

```
...
ECHO !str! | FINDSTR /I "[A-Z]" 1>NUL && (
  *command to execute if !str! is a letter*
) || (
  *command to execute if !str! is not a letter*
)
... 
```

该`"[A-Z]"`模式匹配任何字母，并且`/I`开关使匹配不区分大小写。

例如，如果它不是字母，您可以设置`str`为。`_other`这样，当使用该值作为应在其中创建子文件夹的文件夹的名称时，您将不再需要任何条件：

```
...
ECHO !str! | FINDSTR /I "[A-Z]" 1>NUL || (
  SET str=_other
)
MD "c:\Dirs\!str!\!var!"
... 
```

请注意路径周围的双引号`MD`。当路径包含空格或其他特殊字符时，这是必需的。（感谢@Peter Wright 的说明。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T11:48:19.857

Here is another quick way to verify whether a character is a letter.

```
@echo off
setlocal EnableDelayedExpansion
set file=c:\klantenlijst.txt
for /f "delims=" %%i IN (%file%) do (
   set var=%%i
   set str=!var:~0,1!
   if /i "!str!" geq "A" if /i "!str!" leq "Z" set "str=_other"
   md "c:\dirs\!str!\!var!"
) 
```

One difference with this approach is that non-English letters with diacriticals will also be counted as letters. These non-English letters all have extended ASCII codes greater than 127\. This is the same result that Andriy's FINDSTR method gets.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T19:23:07.683

这不适用于`a`，仅适用于`A`：

```
IF !str!==A ( set letter=1 ) 
```

将其替换为：

```
IF /i !str!==A ( set letter=1 ) 
```

# windows-8 - Windows 8 Internet Explorer 10 VHD？有人找到了吗？

> ID：15978349
> 
> 赞同：0
> 
> 时间：2013-04-12T18:25:07.007
> 
> 标签：windows-8, internet-explorer-10, virtual-pc, vhd

我一直在使用 microsoft virtual pc 在我的 Web 开发机器上本地运行多个 Internet Explorer 版本。

大多数时候我从微软那里下载我需要的 vhd[大多数时候我在这里](http://www.microsoft.com/en-us/download/details.aspx?id=11575)

但是，我在 microsoft.com 上的任何地方都没有找到 IE 10 vhd。我在[这里问过微软](http://social.technet.microsoft.com/Forums/en-US/w8itprovirt/thread/d3fd51b5-ece1-49fb-a437-4586b65a68b3)问过微软。

我应该复制 Windows 7 vhd 并暂时将其升级到 IE 10 吗？交叉我的手指它不会在 Windows 8 上以不同的方式运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T13:43:30.430

是的！适用于您所有基础的 VM 设备都在这里：[http ://www.modern.ie/en-us/virtualization-tools#downloads](http://www.modern.ie/en-us/virtualization-tools#downloads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:08:10.193

由于您正在运行 Windows XP 并且已经拥有 Windows 7 VHD，我会说复制它并将其升级到 IE10。IE10 for Windows 7 可以从[这里](http://ie.microsoft.com/testdrive/Info/Downloads/Default.html)获得。

我建议您升级到 Windows 8 Pro，因为它包括 Hyper-V 和本机 VHD 启动支持。本机 VHD 启动也在 Windows 7 上。看到[这个帖子](http://www.zdnet.com/blog/bott/how-to-use-a-vhd-to-dual-boot-windows-8-on-a-windows-7-pc/4847)。这使您能够启动多个 Windows 操作系统，就像在裸机上运行一样。

如果您需要进一步说明，请告诉我。

# android - 如何在 ActionBar Sherlock 的视图中使用葫芦 android？

> ID：15978359
> 
> 赞同：1
> 
> 时间：2013-04-12T18:25:48.963
> 
> 标签：android, actionbarsherlock, calabash

我在我的 Androi 项目中使用葫芦。我想按下操作栏中的一个菜单项 Sherlock。这个视图是一个图标，它的 id 是 R.drawable.info_icon。

如果这是我的布局的通用视图，我可以使用

```
step 'I press view with id "info_icon"' 
```

但是有了夏洛克，我得到了这个错误：

```
Step unsuccessful: Could not find view with id: 'info_icon' (RuntimeError) 
```

有人知道我的葫芦测试如何按此视图？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T17:59:22.203

您所指的 id 是图像的 id，而不是视图的 id。[实际上，正如库](https://stackoverflow.com/questions/10187523/actionbarsherlock-how-to-access-home-button-view)的创建者自己所解释的那样，您无法访问 ActionBar 中的任何视图。

相反，您可以尝试根据其索引来触摸视图。要查找索引，请查看[本教程](http://blog.lesspainful.com/2012/12/18/Android-Query/)，该教程展示了如何使用实时控制台来发现视图。一旦您对想要触摸的元素进行了很好的查询，只需编写一个自定义步骤，如下所示：

```
When /^I press the info icon menu item$/ do 
  macro 'I press the menu key'
  wait_for_elements_exist(["IconMenuItemView index:X"])
  touch("IconMenuItemView index:X")
end 
```

X 是您使用控制台找到的视图的索引。

# r - 使用 R 并行加速引导程序

> ID：15978361
> 
> 赞同：14
> 
> 时间：2013-04-12T18:26:02.100
> 
> 标签：r, parallel-processing, statistics-bootstrap

我想加快我的引导功能，它本身工作得很好。我读到自 R 2.14 以来有一个名为 的包`parallel`，但我发现它对某人来说非常困难。计算机科学知识很少，无法真正实现它。也许有人可以帮忙。

所以这里我们有一个引导程序：

```
n<-1000
boot<-1000
x<-rnorm(n,0,1)
y<-rnorm(n,1+2*x,2)
data<-data.frame(x,y)
boot_b<-numeric()
for(i in 1:boot){
  bootstrap_data<-data[sample(nrow(data),nrow(data),replace=T),]
  boot_b[i]<-lm(y~x,bootstrap_data)$coef[2]
  print(paste('Run',i,sep=" "))
} 
```

目标是使用并行处理/利用我 PC 的多个内核。我在 Windows 下运行 R。谢谢！

**编辑（诺亚回复后）**

以下语法可用于测试：

```
library(foreach)
library(parallel)
library(doParallel)
registerDoParallel(cores=detectCores(all.tests=TRUE))
n<-1000
boot<-1000
x<-rnorm(n,0,1)
y<-rnorm(n,1+2*x,2)
data<-data.frame(x,y)
start1<-Sys.time()
boot_b <- foreach(i=1:boot, .combine=c) %dopar% {
  bootstrap_data<-data[sample(nrow(data),nrow(data),replace=T),]
  unname(lm(y~x,bootstrap_data)$coef[2])
}
end1<-Sys.time()
boot_b<-numeric()
start2<-Sys.time()
for(i in 1:boot){
  bootstrap_data<-data[sample(nrow(data),nrow(data),replace=T),]
  boot_b[i]<-lm(y~x,bootstrap_data)$coef[2]
}
end2<-Sys.time()
start1-end1
start2-end2
as.numeric(start1-end1)/as.numeric(start2-end2) 
```

但是，在我的机器上，简单的 R 代码更快。这是并行处理的已知副作用之一，即它会导致分叉进程的开销，这会增加像这样的“简单任务”中的时间？

编辑：在我的机器上，`parallel`代码比“简单”代码长约 5 倍。`boot`当我增加任务的复杂性（例如增加或`n`）时，这个因素显然不会改变。所以也许代码或我的机器有问题（基于 Windows 的处理？）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T19:48:19.107

试试这个`boot`包。它经过了很好的优化，并且包含一个`parallel`参数。这个包的棘手之处在于你必须编写新函数来计算你的统计数据，它接受你正在处理的数据和一个索引向量来重新采样数据。所以，从你定义的地方开始`data`，你可以做这样的事情：

```
# Define a function to resample the data set from a vector of indices
# and return the slope
slopeFun <- function(df, i) {
  #df must be a data frame.
  #i is the vector of row indices that boot will pass
  xResamp <- df[i, ]
  slope <- lm(y ~ x, data=xResamp)$coef[2] 
} 

# Then carry out the resampling
b <- boot(data, slopeFun, R=1000, parallel="multicore") 
```

`b$t`是重采样统计量的向量，并且`boot`有很多很好的方法可以轻松地处理它 - 例如`plot(b)`

请注意，并行方法取决于您的平台。在您的 Windows 机器上，您需要使用`parallel="snow"`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T18:50:10.507

我没有在 Windows 上测试`foreach`后端`parallel`，但我相信这对你有用：

```
library(foreach)
library(doSNOW)

cl <- makeCluster(c("localhost","localhost"), type = "SOCK")
registerDoSNOW(cl=cl)

n<-1000
boot<-1000
x<-rnorm(n,0,1)
y<-rnorm(n,1+2*x,2)
data<-data.frame(x,y)
boot_b <- foreach(i=1:boot, .combine=c) %dopar% {
  bootstrap_data<-data[sample(nrow(data),nrow(data),replace=T),]
  unname(lm(y~x,bootstrap_data)$coef[2])
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T14:12:18.407

我认为主要问题是你有很多小任务。*在某些情况下，您可以通过使用任务分块*来提高性能，这会导致 master 和 worker 之间的数据传输更少但更大，这通常更有效：

```
boot_b <- foreach(b=idiv(boot, chunks=getDoParWorkers()), .combine='c') %dopar% {
  sapply(1:b, function(i) {
    bdata <- data[sample(nrow(data), nrow(data), replace=T),]
    lm(y~x, bdata)$coef[[2]]
  })
} 
```

我喜欢为此使用该`idiv`功能，但`b=rep(boot/detectCores(),detectCores())`如果您愿意，也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-16T12:52:17.053

这是一个老问题，但我认为使用`data.table`. 在使用更大的数据集之前，不会真正注意到这些好处。把这个答案放在这里是为了帮助其他可能需要引导更大数据集的人

```
library(data.table)
setDT(data) # convert data.frame to data.table by reference
system.time({
  b <- rbindlist(
    lapply(
      1:boot,
      function(i) {
        data.table(
          # store the statistic
          'statistic' = lm(y ~ x, data=data[sample(.N, .N, replace = T)])$coef[[2]],
          # store the iteration
          'iteration' = i
        )
      }
    )
  )
})
# 1.66 seconds on my system
ggplot(b) + geom_density(aes(x = statistic)) 
```

然后，您可以通过使用 package.json 进一步提高性能`parallel`。

```
library(parallel)
cl <- makeCluster(detectCores())            # use all cores on machine, can change this

clusterExport(                              # give it the variables it needs #nolint
  cl,
  c(
    "data"
  ),
  envir = environment()
)
clusterEvalQ(                               # give it libraries needed #nolint
  cl,
  c(
    library(data.table)
  )
)

system.time({
  b <- rbindlist(
    parLapply(              # this is changed to be in parallel
      cl,                   # give it the cluster you created earlier
      1:boot,
      function(i) {
        data.table(
          'statistic' = lm(y ~ x, data=data[sample(.N, .N, replace = T)])$coef[[2]],
          'iteration' = i
        )
      }
    )
  )
})

stopCluster(cl)
# .47 seconds on my machine 
```

# jquery - clearAfterAdd 事件不起作用

> ID：15978362
> 
> 赞同：0
> 
> 时间：2013-04-12T18:26:07.870
> 
> 标签：jquery, jqgrid

目前，我使用 [Enter 键] 将记录保存到网格中，同时保持表单打开。我对 jqgrid wikiDoc 的理解是 clearAfterAdd 将清除模式表单上的字段以输入下一条记录，但是此事件不起作用。任何人都可以提供一些见解。下面是我的代码。

```
 var lastSel,
            mydata = [
                { id: "1", invdate: "2007-10-01", name: "test", amount: "200.00", tax: "10.00", total: "210.00" }
            ],
            grid = $("#list"),
            getColumnIndex = function (columnName) {
                var cm = $(this).jqGrid('getGridParam', 'colModel'), i, l = cm.length;
                for (i = 0; i < l; i++) {
                    if ((cm[i].index || cm[i].name) === columnName) {
                        return i; // return the colModel index
                    }
                }
                return -1;
            },
            onclickSubmitLocal = function (options, postdata) {
                var $this = $(this), grid_p = this.p,
                    idname = grid_p.prmNames.id,
                    grid_id = this.id,
                    id_in_postdata = grid_id + "_id",
                    rowid = postdata[id_in_postdata],
                    addMode = rowid === "_empty",
                    oldValueOfSortColumn,
                    new_id,
                    tr_par_id,
                    colModel = grid_p.colModel,
                    cmName,
                    iCol,
                    cm;

                // postdata has row id property with another name. we fix it:
                if (addMode) {
                    // generate new id
                    new_id = $.jgrid.randId();
                    while ($("#" + new_id).length !== 0) {
                        new_id = $.jgrid.randId();
                    }
                    postdata[idname] = String(new_id);
                } else if (typeof postdata[idname] === "undefined") {
                    // set id property only if the property not exist
                    postdata[idname] = rowid;
                }
                delete postdata[id_in_postdata];

                // prepare postdata for tree grid
                if (grid_p.treeGrid === true) {
                    if (addMode) {
                        tr_par_id = grid_p.treeGridModel === 'adjacency' ? grid_p.treeReader.parent_id_field : 'parent_id';
                        postdata[tr_par_id] = grid_p.selrow;
                    }

                    $.each(grid_p.treeReader, function (i) {
                        if (postdata.hasOwnProperty(this)) {
                            delete postdata[this];
                        }
                    });
                }

                // decode data if there encoded with autoencode
                if (grid_p.autoencode) {
                    $.each(postdata, function (n, v) {
                        postdata[n] = $.jgrid.htmlDecode(v); // TODO: some columns could be skipped
                    });
                }

                // save old value from the sorted column
                oldValueOfSortColumn = grid_p.sortname === "" ? undefined : grid.jqGrid('getCell', rowid, grid_p.sortname);

                // save the data in the grid
                if (grid_p.treeGrid === true) {
                    if (addMode) {
                        $this.jqGrid("addChildNode", new_id, grid_p.selrow, postdata);
                    } else {
                        $this.jqGrid("setTreeRow", rowid, postdata);
                    }
                } else {
                    if (addMode) {
                        // we need unformat all date fields before calling of addRowData
                        for (cmName in postdata) {
                            if (postdata.hasOwnProperty(cmName)) {
                                iCol = getColumnIndex.call(this, cmName);
                                if (iCol >= 0) {
                                    cm = colModel[iCol];
                                    if (cm && cm.formatter === "date") {
                                        postdata[cmName] = $.unformat.date.call(this, postdata[cmName], cm);
                                    }
                                }
                            }
                        }
                        $this.jqGrid("addRowData", new_id, postdata, options.addedrow);
                    } else {
                        $this.jqGrid("setRowData", rowid, postdata);
                    }
                }

                if ((addMode && options.closeAfterAdd) || (!addMode && options.closeAfterEdit)) {
                    // close the edit/add dialog
                    $.jgrid.hideModal("#editmod" + grid_id, {
                        gb: "#gbox_" + grid_id,
                        jqm: options.jqModal,
                        onClose: options.onClose
                    });
                }

                if (postdata[grid_p.sortname] !== oldValueOfSortColumn) {
                    // if the data are changed in the column by which are currently sorted
                    // we need resort the grid
                    setTimeout(function () {
                        $this.trigger("reloadGrid", [{ current: true }]);
                    }, 100);
                }

                // !!! the most important step: skip ajax request to the server
                options.processing = true;
                return {};
            },
            editSettings = {
                //recreateForm: true,
                jqModal: false,
                reloadAfterSubmit: false,
                closeOnEscape: true,
                savekey: [true, 13],
                closeAfterEdit: true,
                onclickSubmit: onclickSubmitLocal
            },
            addSettings = {
                recreateForm: true,
                jqModal: false,
                reloadAfterSubmit: false,
                savekey: [true, 13],
                closeOnEscape: true,
                closeAfterAdd: false,
                clearAfterAdd: true,
                onclickSubmit: onclickSubmitLocal
            }
                processing: true
            }
            };

        grid.jqGrid({
            datatype: 'local',
            data: mydata,
            colNames: [/*'Inv No', */'Client', 'Amount', 'Tax', 'Total'],
            colModel: [
                //{name: 'id', width: 70, align: 'center', sorttype: 'int', searchoptions: {sopt: ['eq', 'ne']}},
                {name: 'name', index: 'name', editable: true, width: 60, editrules: {required: true}},
                {name: 'amount', index: 'amount', width: 70, formatter: 'number', editable: true, align: 'right'},
                {name: 'tax', index: 'tax', width: 50, formatter: 'number', editable: true, align: 'right'},
                {name: 'total', index: 'total', width: 60, formatter: 'number', editable: true, align: 'right'}
            ],
            rowNum: 10,
            rowList: [5, 10, 20],
            pager: '#pager',
            gridview: true,
            rownumbers: true,
            autoencode: true,
            ignoreCase: true,
            sortname: 'invdate',
            viewrecords: true,
            sortorder: 'desc',
            caption: 'How to implement local form editing',
            height: '100%',
            editurl: 'clientArray',
            ondblClickRow: function (rowid, ri, ci) {
                var $this = $(this), p = this.p;
                if (p.selrow !== rowid) {
                    // prevent the row from be unselected on double-click
                    // the implementation is for "multiselect:false" which we use,
                    // but one can easy modify the code for "multiselect:true"
                    $this.jqGrid('setSelection', rowid);
                }
                $this.jqGrid('editGridRow', rowid, editSettings);
            },
            onSelectRow: function (id) {
                if (id && id !== lastSel) {
                    // cancel editing of the previous selected row if it was in editing state.
                    // jqGrid hold intern savedRow array inside of jqGrid object,
                    // so it is safe to call restoreRow method with any id parameter
                    // if jqGrid not in editing state
                    if (typeof lastSel !== "undefined") {
                        $(this).jqGrid('restoreRow', lastSel);
                    }
                    lastSel = id;
                }
            }
        }).jqGrid('navGrid', '#pager', {}, editSettings, addSettings, delSettings,
            {multipleSearch: true, overlay: false,
                onClose: function (form) {
                    // if we close the search dialog during the datapicker are opened
                    // the datepicker will stay opened. To fix this we have to hide
                    // the div used by datepicker
                    $("div#ui-datepicker-div.ui-datepicker").hide();
                }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:02:22.937

您使用我在[此处](https://stackoverflow.com/a/12296186/315935)和[此处](https://stackoverflow.com/a/5611519/315935)发布的代码。我在对您之前的问题的回答中写道，如果您使用表单编辑模式，jqGrid 不支持编辑本地数据。我发布的代码是尝试实现一种解决方法，该解决方法可以使用本地数据编辑表单的大部分功能。的代码`onclickSubmitLocal`是基于（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.formedit.js#L711-L816)）的`complete`事件处理程序代码编写的。如果您检查代码[的一部分](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.formedit.js#L749-L779)，您将看到结合选项，**内部**函数（见[行](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.formedit.js#L769)）将被调用`editGridRow``closeAfterAdd: false, clearAfterAdd: true`**`fillData`**

 **```
fillData("_empty",$t,frmgr); 
```

当我编写代码时，我必须删除该部分，因为`fillData`无法从外部访问。

您可以做的是使用`afterComplete`回调将输入表单上的所有字段重置为默认值。[您可以在此处](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.formedit.js#L518-L551)找到应该完成的通用代码，但在每种特定情况下，如果输入字段的填充会容易得多。**

# hibernate - Hibernate hbm2ddl.auto=update 不更新 MySQL 中的列定义

> ID：15978368
> 
> 赞同：29
> 
> 时间：2013-04-12T18:26:32.483
> 
> 标签：hibernate, hbm2ddl

我正在尝试使用 hbm2ddl.auto = update 更新现有表。

几个表中有几个列，其中数据库列定义从实体中的声明发生变化。喜欢

```
@Column(name="mycolumn", nullable=false, length=10)
private Long mycolumn; 
```

和

> 'mycolumn' bigint(20) 不为空 默认 0

在 MySQL 中。

为什么 hbm2ddl 不更新这些东西？是否可以强制进行此类更新？我想说 hbm2ddl 删除列的默认值并更改类型的长度。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-10-31T18:55:02.927

`hibernate.hbm2ddl.auto" value="update`不会修改现有的表列定义。做了一些测试，我发现：

`hibernate.hbm2ddl.auto" value="update`将添加一个尚不存在的 db 列。

`hibernate.hbm2ddl.auto" value="update`不会删除实体中已删除/不再存在的 db 列。

`hibernate.hbm2ddl.auto" value="update`不会修改已创建的 db 列。

您需要备份表数据，将其删除并重新启动应用程序，以使该表的架构与您的实体重新同步。然后重新加载您的数据。

请参阅：
[需要澄清 hibernate.hbm2ddl.auto=update](https://stackoverflow.com/questions/23533409/need-clarity-on-hibernate-hbm2ddl-auto-update)

和
[Hibernate hbm2ddl.auto 可能的值以及它们的作用？](https://stackoverflow.com/questions/438146/hibernate-hbm2ddl-auto-possible-values-and-what-they-do?lq=1)

# python - 我的代码有什么问题？Python

> ID：15978369
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:26:33.310
> 
> 标签：python, python-2.7

我正在用python编程但是我遇到了一个我无法解决的小故障！问题是当它在文本文件中打印出来时，它只打印整个输出的一行！否则它工作！请我需要帮助才能完成这项工作！

```
import sys, bz2, string, os
#instead of hardcoding filename, get it from arguments
#filename = os.getcwd()
filename = raw_input("Enter the path of bz2 document e.g. files/access_log-20130301.bz2: ")
print "Using file : " + filename
source_file = bz2.BZ2File(filename, "r") 
for line in source_file:
    #Extract the date and put into a variable 
    logdate = string.split(line)[3][1:12]
    #Extract movie name and put into variable movie
    movie = string.split(line)[6]
    #extract who read the movie username = 
    usernames = string.split(line)[2]
    #Only process the movie line if we have /media/movie in it. 
    if movie.find('media/movies') > 0:
        #Prints all things prosscesed
        print "User:" + usernames + " On:" +  logdate + " Was watching:"+ movie
        #p=open(filename+"record.txt", "w")
        fp=open(filename+"record.txt", "wb+")
        fp.write("User: " + usernames + " On: " +  logdate + " Was watching: "+ movie+" File from:"+filename+"\n")
sys.exit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:33:09.810

问题很可能是您每次要写入一行时都为该文件打开一个新的文件句柄，并且您没有先刷新输出。这里有两种可能的解决方案：

1.  `for`在主循环之前打开要写入的文件。这样，您将只有一个文件句柄，并且缺少刷新不会导致此行为。确保完成后关闭文件。（考虑使用`with`块，这将导致文件在块终止时自动关闭`with open(filename + "record.txt", "wb+") as f:`：）
2.  `fp`调用后立即关闭`fp.write()`，这将强制刷新任何缓冲的输出，至少刷新到内核 I/O 缓存。

我更喜欢选项 1，因为在这种情况下没有理由多次打开和关闭文件。（如果你在文件中写了很多行，这些打开/刷新/关闭循环最终会浪费很多时间！）

选项 1 看起来像这样：

```
import sys, bz2, string, os
#instead of hardcoding filename, get it from arguments
#filename = os.getcwd()
filename = raw_input("Enter the path of bz2 document e.g. files/access_log-20130301.bz2: ")
print "Using file : " + filename
with open(filename+"record.txt", "wb+") as fp:
    source_file = bz2.BZ2File(filename, "r") 
    for line in source_file:
        #Extract the date and put into a variable 
        logdate = string.split(line)[3][1:12]
        #Extract movie name and put into variable movie
        movie = string.split(line)[6]
        #extract who read the movie username = 
        usernames = string.split(line)[2]
        #Only process the movie line if we have /media/movie in it. 
        if movie.find('media/movies') > 0:
            #Prints all things prosscesed
            print "User:" + usernames + " On:" +  logdate + " Was watching:"+ movie
            #p=open(filename+"record.txt", "w")
            fp.write("User: " + usernames + " On: " +  logdate + " Was watching: "+ movie+" File from:"+filename+"\n")

# The with block has ended at this point, so the file will already be closed here.

sys.exit() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:34:14.793

您正在循环内以写入模式打开输出文件。在主循环之外打开它一次。

完成后请务必关闭它。更好的是，这样写：

```
with open(filename + "record.txt", "wb+") as fp:
    for line in source_file:
        ...
        fp.write(...) 
```

以便`open`上下文管理器随后为您关闭它。

# ios - 继承 UIView 的正确做法？

> ID：15978370
> 
> 赞同：168
> 
> 时间：2013-04-12T18:26:34.640
> 
> 标签：ios, objective-c, cocoa-touch, uiview

我正在研究一些基于 UIView 的自定义输入控件，并且正在尝试确定设置视图的正确做法。使用 UIViewController 时，使用`loadView`和 相关`viewWill`的`viewDid`方法相当简单，但是当子类化 UIView 时，我拥有的最接近的方法是``awakeFromNib`、`drawRect`和`layoutSubviews`。（我正在考虑设置和拆卸回调。）在我的情况下，我正在设置我的框架和内部视图`layoutSubviews`，但我没有在屏幕上看到任何东西。

确保我的视图具有我想要的正确高度和宽度的最佳方法是什么？（无论我是否使用自动布局，我的问题都适用，尽管可能有两个答案。）什么是正确的“最佳实践”？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2013-04-12T19:02:33.070

Apple 非常清楚地定义了如何`UIView`在文档中进行子类化。

查看下面的列表，特别是看看`initWithFrame:`and `layoutSubviews`。前者旨在设置您的框架，`UIView`而后者旨在设置框架及其子视图的布局。

还请记住，`initWithFrame:`仅当您以`UIView`编程方式实例化时才调用它。如果您从 nib 文件（或情节提要）加载它，`initWithCoder:`将使用。并且`initWithCoder:`框架中还没有计算出来，所以你不能修改你在Interface Builder中设置的框架。[正如此答案中](https://stackoverflow.com/questions/3352042/loading-a-uiview-subclass-from-nib-size-issues)所建议的那样，您可能会考虑调用`initWithFrame:`from`initWithCoder:`以设置框架。

最后，如果您`UIView`从 nib（或故事板）加载您的，您也有`awakeFromNib`机会执行自定义框架和布局初始化，因为当`awakeFromNib`被调用时，可以保证层次结构中的每个视图都已取消存档和初始化。

来自[`NSNibAwaking`](https://web.archive.org/web/20140812095209/https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Protocols/NSNibAwaking_Protocol/Reference/Reference.html)（现在被 doc 取代[`awakeFromNib`](https://developer.apple.com/documentation/objectivec/nsobject/1402907-awakefromnib?language=objc)）的文档：

> 可以从 awakeFromNib 中安全地向其他对象发送消息——到那时，可以确保所有对象都未归档和初始化（当然不一定要唤醒）

还值得注意的是，使用自动布局，您不应该明确设置视图的框架。相反，您应该指定一组足够的约束，以便布局引擎自动计算框架。

直接来自[文档](https://developer.apple.com/documentation/uikit/uiview?language=objc)：

> ## 覆盖的方法
> 
> ### 初始化
> 
> *   **`initWithFrame:`**建议您实现此方法。除了或代替此方法，您还可以实现自定义初始化方法。
>     
>     
> *   **`initWithCoder:`**如果您从 Interface Builder nib 文件加载视图并且您的视图需要自定义初始化，请实施此方法。
>     
>     
> *   **`layerClass`**仅当您希望视图使用不同的 Core Animation 层作为其后备存储时才实施此方法。例如，如果您使用 OpenGL ES 进行绘图，您可能希望覆盖此方法并返回 CAEAGLLayer 类。
>     
>     
> 
> ### 绘图和印刷
> 
> *   **`drawRect:`**如果您的视图绘制自定义内容，请实施此方法。如果您的视图不执行任何自定义绘图，请避免覆盖此方法。
>     
>     
> *   **`drawRect:forViewPrintFormatter:`**仅当您想在打印期间以不同方式绘制视图内容时才实施此方法。
>     
>     
> 
> ### 约束
> 
> *   **`requiresConstraintBasedLayout`**如果您的视图类需要约束才能正常工作，请实施此类方法。
>     
>     
> *   **`updateConstraints`**如果您的视图需要在子视图之间创建自定义约束，请实施此方法。
>     
>     
> *   **`alignmentRectForFrame:`**,**`frameForAlignmentRect:`**实现这些方法来覆盖您的视图如何与其他视图对齐。
>     
>     
> 
> ### 布局
> 
> *   **`sizeThatFits:`**如果您希望视图具有与调整大小操作期间不同的默认大小，请实施此方法。例如，您可以使用此方法来防止您的视图缩小到无法正确显示子视图的程度。
>     
>     
> *   **`layoutSubviews`**如果您需要对子视图的布局进行比约束或自动调整大小行为提供的更精确的控制，请实施此方法。
>     
>     
> *   **`didAddSubview:`**,**`willRemoveSubview:`**根据需要实现这些方法来跟踪子视图的添加和删除。
>     
>     
> *   **`willMoveToSuperview:`**,**`didMoveToSuperview`**根据需要实现这些方法来跟踪当前视图在您的视图层次结构中的移动。
>     
>     
> *   **`willMoveToWindow:`**,**`didMoveToWindow`**根据需要实现这些方法来跟踪您的视图到不同窗口的移动。
>     
>     
> 
> ### 事件处理：
> 
> *   **`touchesBegan:withEvent:`**, **`touchesMoved:withEvent:`**, **`touchesEnded:withEvent:`**,`touchesCancelled:withEvent:`如果需要直接处理触摸事件，请实现这些方法。（对于基于手势的输入，请使用手势识别器。）
>     
>     
> *   **`gestureRecognizerShouldBegin:`**如果您的视图直接处理触摸事件并且可能希望防止附加的手势识别器触发其他操作，请实现此方法。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-11-15T15:54:22.447

这在谷歌中仍然很高。下面是 swift 的更新示例。

该`didLoad`函数允许您放置所有自定义初始化代码。正如其他人所提到的，`didLoad`将在通过以编程方式创建视图`init(frame:)`或当*XIB*反序列化器通过将*XIB*模板合并到您的视图中时调用`init(coder:)`

> *Aside* :`layoutSubviews`并且`updateConstraints`对于大多数视图被多次调用。这适用于视图边界发生变化时的高级多通道布局和调整。就个人而言，我尽可能避免使用多通道布局，因为它们会消耗 CPU 周期并使一切都令人头疼。此外，我将约束代码放在初始化程序本身中，因为我很少使它们无效。

```
import UIKit

class MyView: UIView {
  //-----------------------------------------------------------------------------------------------------
  //Constructors, Initializers, and UIView lifecycle
  //-----------------------------------------------------------------------------------------------------
  override init(frame: CGRect) {
      super.init(frame: frame)
      didLoad()
  }

  required init?(coder aDecoder: NSCoder) {
    super.init(coder: aDecoder)
    didLoad()
  }

  convenience init() {
    self.init(frame: CGRectZero)
  }

  func didLoad() {
    //Place your initialization code here

    //I actually create & place constraints in here, instead of in
    //updateConstraints
  }

  override func layoutSubviews() {
     super.layoutSubviews()

     //Custom manually positioning layout goes here (auto-layout pass has already run first pass)
  }

  override func updateConstraints() {
    super.updateConstraints()

    //Disable this if you are adding constraints manually
    //or you're going to have a 'bad time'
    //self.translatesAutoresizingMaskIntoConstraints = false

    //Add custom constraint code here
  }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-12T18:59:50.793

[Apple文档](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW23)中有一个不错的总结，这在 iTunes 上的免费[斯坦福课程中得到了很好的介绍。](https://itunes.apple.com/us/course/coding-together-developing/id593208016)我在这里展示我的 TL;DR 版本：

如果您的类主要由子视图组成，那么分配它们的正确位置是在`init`方法中。对于视图，可以调用两种不同的`init`方法，具体取决于您的视图是从代码实例化还是从 nib/storyboard 实例化。我所做的是编写自己的`setup`方法，然后从`initWithFrame:`和`initWithCoder:`方法中调用它。

如果您正在进行自定义绘图，您确实希望`drawRect:`在您的视图中覆盖。但是，如果您的自定义视图主要是子视图的容器，那么您可能不需要这样做。

仅`layoutSubViews`当您想要根据您是纵向还是横向进行添加或删除子视图之类的操作时才覆盖。否则，您应该可以不理会它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T18:58:12.957

`layoutSubviews`旨在在子视图上设置框架，而不是在视图本身上。

对于`UIView`，指定的构造函数通常是`initWithFrame:(CGRect)frame`并且您应该在那里（或在`initWithCoder:`）设置框架，可能忽略传入的框架值。您还可以提供不同的构造函数并在那里设置框架。

# entity-framework - MiniProfiler 与 EF5 CodeFirst SimpleMembership 并指定数据库名称

> ID：15978373
> 
> 赞同：1
> 
> 时间：2013-04-12T18:26:39.917
> 
> 标签：entity-framework, ef-code-first, dbcontext, mvc-mini-profiler, simplemembership

我有一个带有迁移的 EF 5 CodeFirst (DBContext) 的 MVC 4 Web 应用程序。我正在使用通过 EF 5 绑定的 SimpleMembership。我的数据库是 SQL Server 2012，我没有创建和删除数据库的权限，因此我指定了数据库名称。

我查看了多个站点来设置 MiniProfiler，但我无法将 2 和 2 放在一起。以下是我的问题：

1) 我可以将 MiniProfiler 与 EF 5 (DBContext)、SimpleMembership 一起使用并指定数据库名称吗？2）如果可能的话，您能否为我提供一个演练。请具体一点，因为我是新手。我的 DBContext 是以这种方式设置的：

```
public class DataContext : DbContext
{
    public DataContext() : base("DatabaseNameHere")
    { }

    public DbSet<Table1> Table1 { get; set; }
    public DbSet<Table2> Table2 { get; set; }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:21:22.713

好的，经过大量挖掘，我找到了解决方案。正如上面的评论所述，这确实有效。这是有助于帮助的演练的链接。

[http://www.codeproject.com/Articles/516627/MiniProfilerplus-plusInstallationplusandplusSetup](http://www.codeproject.com/Articles/516627/MiniProfilerplus-plusInstallationplusandplusSetup)

# android - 从控制台打开 html 文件

> ID：15978374
> 
> 赞同：1
> 
> 时间：2013-04-12T18:26:45.407
> 
> 标签：android, html, file

我们制作了一个 bash 脚本，它从服务器读取纯数据并编写一个 html 文件。该文件创建良好，我们只需要在浏览器中打开它。

这项任务比我们预想的要困难得多。

你能给我们一些关于如何实现它的建议吗？

如果我们到目前为止所做的一切：

```
am start -a android.intent.action.VIEW http:///storage/sdcard0/path/final.html -t text/html 
```

此代码会启动一个对话框来选择浏览器，但它会尝试在 Internet 中查找资源。当我们用设备替换`http:///`时，`file:///`尝试打开文件时没有运气。

我们已经阅读了有关此主题的其他一些问题，但我们能够直接从浏览器打开文件。我们的问题是如何从上午打开它。

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:41:57.153

首先，让我为[Jsoup](http://jsoup.org)插入一个插件，用于获取和解析现有的 HTML 以及创建新的 HTML……只是提供了一堆。

其次，您需要`loadDataWithBaseUrl`像这样从 WebView 类中使用：

`webview.loadDataWithBaseURL("file:///android_asset/", thingToLoadAsHtml, "text/html", "UTF-8", "about:blank")`

其中 thingToLoadAsHtml 是一个包含所有 HTML 的字符串。

有关更多信息，请参阅[android 开发者文档](http://developer.android.com/reference/android/webkit/WebView.html)。

# html - SoundCloud HTML5 小部件：音频完成时共享面板覆盖波形

> ID：15978378
> 
> 赞同：1
> 
> 时间：2013-04-12T18:27:04.483
> 
> 标签：html, widget, embed, soundcloud

当音频在 SoundCloud 小部件的 HTML5 版本中完成时，共享面板会出现并覆盖音频波形。用户可以重放音频；但是，共享面板并没有消失，用户似乎也没有办法隐藏它。也没有任何方法可以防止面板首先出现，这是理想的选择。

“共享”参数在我的嵌入代码中设置为 false。

这是我正在使用的嵌入代码：

```
<iframe width="100%" height="100%" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F87283114&buying=false&sharing=false&liking=false&show_artwork=false&download=false&show_user=false&show_bpm=false&show_playcount=false&show_comments=false&color=568ED4&theme_color=DDD9C3"></iframe> 
```

在 Firefox 和 Chrome 中复制。

同样，这只是一个 HTML5 问题。Flash 版本可以正常工作。

请注意，也发生了类似的问题，但在 Flash 版本中已修复：

[轨道完成时新的 SoundCloud HTML5 小部件动画](https://stackoverflow.com/questions/13404731/new-soundcloud-html5-widget-animation-on-track-finish)

# php - Swiftmailer 和 PHP 变量

> ID：15978386
> 
> 赞同：0
> 
> 时间：2013-04-12T18:27:42.630
> 
> 标签：php, variables, swiftmailer

我有以下代码：

```
<?php
include 'swiftmailer/lib/swift_required.php';
//*** Create the Transport ***
$transport = Swift_SmtpTransport::newInstance('smtp.My-Hosting', 25)
->setUsername('MyUserName')
->setPassword('Password');
//*** Create the Mailer using your created Transport ***
$mailer = Swift_Mailer::newInstance($transport);
//*** Create a message ***
$message = Swift_Message::newInstance('NameOfInstance')
->setFrom(array('Support@test.com' => 'John Doe'))
->setTo(array("John@test.com" => "John Smith"))
->setBody('This is a test email message') ;
//*** Send the message ***
$result = $mailer->send($message);
?> 
```

如何在 setFrom、setTo 和 setBody 数组中使用 PHP 变量（即 $email、$name 等）？（我不想输入个人电子邮件/姓名）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:33:02.743

如果我理解您的问题和代码（因为它是未格式化的），您应该能够简单地用您选择的变量名称替换字符串。

例如，您的原始代码格式化为：

```
setUsername('MyUserName') ->setPassword('Password'); 
//*** Create the Mailer using your created Transport *** 
$mailer = Swift_Mailer::newInstance($transport); 
//*** Create a message *** 
$message = Swift_Message::newInstance('NameOfInstance') ->setFrom(array('Support@test.com' => 'John Doe')) ->setTo(array("John@test.com" => "John Smith")) ->setBody('This is a test email message') ; 
//*** Send the message *** 
$result = $mailer->send($message); 
```

现在，您可以简单地将 "John@test.com" 替换为 $from_email 或您选择的任何变量名......等等其他文本字符串。

```
setUsername('MyUserName')->setPassword('Password'); 
//*** Create the Mailer using your created Transport *** 
$mailer = Swift_Mailer::newInstance($transport); 
//*** Create a message *** 
$message = Swift_Message::newInstance('NameOfInstance')->
    setFrom(array($from_email => $from_name))->
    setTo(array($to_email => $to_name))->setBody($body) ; 
//*** Send the message *** 
$result = $mailer->send($message); 
```

# android - 调整视图大小，使其他视图不可见

> ID：15978389
> 
> 赞同：2
> 
> 时间：2013-04-12T18:28:00.160
> 
> 标签：android, android-layout

我有一个具有线性布局和页脚的活动：结构有点像这样：

<LinearLayout>
...
...
<LinearLayout>
android:id="@+id/main_view"
...
...
</LinearLayout>
<LinearLayout>
android:id="@+id/footer"
...
...
< /线性布局>
</LinearLayout>

我在某种条件下使页脚不可见。但我想让 main_view 调整大小以通过使页脚不可见来占用可用空间。有什么办法吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T18:36:26.520

致电`setVisibility(View.GONE)`您的`View`. 将可见性设置`VISIBLE`为绘制时，设置`INVISIBLE`为不绘制但仍进行测量会占用屏幕上的空间。当它设置为时，`GONE`它不会被绘制，也不会被测量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:34:47.227

我假设您使用`View.INVISIBLE`常量，它隐藏了一个视图但保留了它使用的空间。你可以`View.GONE`改用。

# vba - 如何从关闭的工作簿中的特定单元格读取信息，然后使用 Microsoft Excel 中的 VBA 将其粘贴到活动工作表的单元格中？

> ID：15978391
> 
> 赞同：1
> 
> 时间：2013-04-12T18:28:03.563
> 
> 标签：vba, excel

我想知道是否有人知道如何使用 VBA 从封闭的工作簿中引用单元格。

我知道如何使用 ADO 和 SQL 引用一系列单元格，但我不知道如何为特定单元格创建 SQL 查询。

在浏览互联网时，我遇到了一些使用“ExecuteExcel4Macro”的代码，但我找不到该函数/命令的任何真实文档。事实上，MSDN 网站上关于这个命令的文档是垃圾和模糊的，坦率地说，完全没有帮助。

无论如何，我离题了；理想情况下，我想从外部工作簿调用一个单元格，而不必打开所述工作簿。我试图开始工作的代码如下：

```
 Sub update_overview() 

Dim wbPath As String 
Dim wbName As String 
Dim wsName As String 
Dim cellRef As String 
Dim data As Variant 

wbPath = "C:\examplepath\" 
wbName = "Core (N)i.xls" 
wsName = "Sheet1" 
cellRef = "C5" 

'data = GetData(wbPath, wbName, wsName, cellRef) 

ThisWorkbook.Activate 
Sheets("Overview").Select 
With Selection 
ActiveSheet.Range("C5").Clear 
ActiveSheet.Range("C5").Select 
ActiveCell = GetData(wbPath, wbName, wsName, cellRef) 
End With 

End Sub 

Private Function GetData(ByVal wbPath As String, _ 
wbName As String, wsName As String, cellRef As String) As Variant 

Dim arg As String 

GetData = "" 
arg = "'" & wbPath & "[" & wbName & "]" & _ 
wsName & "'!" & Range(cellRef).Address(True, True, xlR1C1) 

GetData = ExecuteExcel4Macro(arg) 
End Function 
```

当我运行宏时，它唯一返回的是#REF

我也试过：

```
Sub Sample() 
Dim wbPath As String, wbName As String 
Dim wsName As String, cellRef As String 
Dim Ret As String 

'wbPath = "C:\Documents and Settings\Siddharth Rout\Desktop\" 
wbPath = "C:\Users\my.name\Desktop\" 

wbName = "QOS DGL stuff.xls" 
wsName = "ACL" 
cellRef = "C3" 

Ret = "'" & wbPath & "[" & wbName & "]" & _ 
wsName & "'!" & Range(cellRef).Address(True, True, -4150) 

MsgBox ExecuteExcel4Macro(Ret) 
End Sub 
```

当代码到达 MsgBox 时，我收到类型不匹配错误。如果我摆脱 msgbox 命令并尝试继续粘贴到单元格

```
ThisWorkbook.Activate 
Sheets("Overview").Select 
With Selection 
ActiveSheet.Range("C5").Clear 
ActiveSheet.Range("C5").Select 
ActiveCell = ExecuteExcel4Macro(Ret) 
```

我仍然得到#REF！错误

谁能告诉我：1）这是最好的技术吗？2）我的代码有什么问题？并且，3) 是否有更好的方法可以使用 ADO 或 DOA 或我不知道的技术从外部工作簿中引用单个单元格。

还有人知道有关如何使用 ExecuteExcel4Macro 函数的任何详细文档。

请帮忙; 谢谢

仅供参考，我在 excel 2003 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:57:14.427

你可以尝试这样的事情：

`arg = "='" & wbPath & "[" & wbName & "]" & wsName & "'!" & cellRef`

```
Sub Test()

Dim wbName As String
Dim wbPath As String
Dim wsName As String
Dim cellRef As String
Dim calcState As Long

calcState = Application.Calculation

wbPath = "C:\users\david_zemens\"
wbName = "a report.xlsx"
wsName = "Sheet1"
cellRef = Range("B2").Address

Dim arg As String
arg = "='" & wbPath & "[" & wbName & "]" & wsName & "'!" & cellRef 'Range(cellRef).Address(True, True, xlR1C1)

Application.Calculation = xlCalculationManual
Application.DisplayAlerts = False
ActiveCell.Value = arg
ActiveCell.Value = ActiveCell.Value 'essentially a paste/values over the formula.
Application.DisplayAlerts = True
Application.Calculation = calcState

End Sub 
```

# ios - 是否可以“暂停”一个线程并让另一个操作先进行？

> ID：15978393
> 
> 赞同：2
> 
> 时间：2013-04-12T18:28:04.867
> 
> 标签：ios, objective-c, multithreading

我设置了 2 个 UIWebViews，第一个是控制第二个。他们通过 ajax 请求进行通信。

我想在第二个 WebView 中加载一个网站，然后继续执行其他任务。不幸的是，这正在崩溃。它正在崩溃，因为 Web 线程在收到响应后立即被第一个占用。第二种来不及加载网页，导致死锁。

我想延迟响应，直到第二个 WebView 完全加载网页。目前，第二个 WebView 在第一个 WebView 获取并响应后立即开始加载（即在 Web 线程被释放时）。

**是否可以“暂停”/“暂停”当前（第一个 WebView）执行，直到第二个 WebView 完成加载？**这意味着也开始执行第二个 WebView。

事件：

1.  第一个 WebView 发送命令加载网页（使用同步 AJAX 命令）
2.  Web 线程被第一个 WebView 的任务阻塞
3.  命令的执行和响应的计算
4.  返回响应
5.  第二个 WebView**启动**加载网页
6.  僵局

我希望事件 5 在事件 4 之前。这可能吗？

**解决方案：** 正如您在评论中看到的那样，我通过使 then work *concurrently*解决了我的问题。基本上我不得不使用**Grand Central Dispatch (GCD)**。**另一种选择是使用NSOperationQueues**来实现它**它可以让您更好地控制执行流程，但实现起来往往更复杂。**

 ***有用的文献：*

*   [Apple：并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)
*   [iOS 上的多线程和 Grand Central Dispatch 初学者教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)
*   [如何使用 NSOperations 和 NSOperationQueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:07:45.477

现在，这可能需要一些调整，但它应该为您提供一个很好的起点。

基本上，我们创建一个并发 GCD 队列并调度 2 个异步调用来加载带有 2 个不同 URL 内容的 HTML 字符串。

当请求完成时，它们会将其 html 字符串加载到您的 Web 视图中。请注意，如果第二个 UIWebView 已经加载，第一个 UIWebView 只会加载其数据。

```
 __weak ViewController *bSelf = self;
dispatch_queue_t webQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul);
dispatch_async(webQueue, ^{
    NSError *error;
    bSelf.html1 = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://google.com"] encoding:NSASCIIStringEncoding error:&error];
    if( !bSelf.secondLoaded)
    {
        dispatch_sync(dispatch_get_main_queue(), ^{
            [bSelf.webView1 loadHTMLString:bSelf.html1 baseURL:nil];
        });
    }
});

dispatch_async(webQueue, ^{
    NSError *error;
    bSelf.html2 = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://amazon.com"] encoding:NSASCIIStringEncoding error:&error];
    bSelf.secondLoaded = YES;
    dispatch_sync(dispatch_get_main_queue(), ^{
        [bSelf.webView2 loadHTMLString:bSelf.html2 baseURL:nil];
        if( bSelf.html1 != nil )
        {
            [bSelf.webView1 loadHTMLString:bSelf.html1 baseURL:nil];
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:41:33.573

是的，最好的两种方法是使用`Grand Central Dispatching (GCD)`or`NSOperation`和`NSOperationQueue`。

对此的解释很长，但我会指导您阅读类似的[内容](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)。如果您在 google 中搜索这些术语，您可以找到很多其他资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:47:47.017

你有没有尝试过这样的事情？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.webView.delegate = self;
    self.webView2.delegate = self;

    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"yourURL"]]];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    if (webView == self.webView)
    {
        if (!self.webView.isLoading)
        {
            [self.webView2 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"yourURL"]]];
        }
    }
} 
```**

# sql - 从 PL/SQL 插入临时表 GTT 非常慢

> ID：15978395
> 
> 赞同：3
> 
> 时间：2013-04-12T18:28:11.877
> 
> 标签：sql, performance, oracle, sql-tuning

我有一个从 SQL 执行时执行出色的查询。

它是表和查询之间的连接。这两个表都有近 400 万条记录。我试图提供提示的文档表上有位图索引。当我从蟾蜍看到时，解释计划确实表明他们正在帮助加入。

我提供了 2 个其他提示，看看它们是否有帮助。一种是直接路径 APPEND，另一种是利用 pda 上现有的 BTree 索引。

当对 SQL 中的替换变量运行此查询时，结果是即时的，但过程中的相同查询需要 8 秒或更长时间。

除了 DBA 尚未屈服的程序计划之外，如果有任何明显的遗漏，我可能会让您想到什么？提前致谢。

```

     INSERT                                                           /*+ APPEND */
          INTO  tmp_search_gross_docs (document_id,
                                       last_name,
                                       first_name,
                                       person_doc_association_id,
                                       association_date)
       SELECT                 /*+INDEX(pda IDX_DOC_PDOC_DOCID ) USE_NL(pda doc) */
             pda.document_id,
              last_name,
              first_name,
              person_doc_association_id,
              association_date
         FROM   pda,
              (SELECT /*+INDEX_COMBINE(attr IDX_BMP_SEARCH_FN,IDX_BMP_SEARCH_LN)*/
                      document_id, last_name, first_name
                 FROM doc attr
                WHERE first_name LIKE l_first_name OR last_name LIKE l_last_name) doc
        WHERE pda.document_id = doc.document_id;
                         ) doc
                 WHERE pda.document_id = doc.document_id;

```

解释计划（来自 Toad 的绑定变量）

INSERT STATEMENT ALL_ROWSCost: 1,086,010 Bytes: 15,309,420 Cardinality: 364,510
11 LOAD AS SELECT TMP_SEARCH_GROSS_DOCS
10 TABLE ACCESS BY INDEX ROWID TABLE PDA Cost: 3 Bytes: 20 Cardinality: 1
9 NESTED LOOPS Cost: 1,086,010 Bytes: 15,309,420 Cardinality: 364,510
7 TABLE ACCESS BY INDEX ROWID TABLE ATTR 成本：23,893 字节：8,019,220 基数：364,510
6 位图转换为行 5 位图
或
2位图合并
1 位图索引范围扫描索引（位图） IDX_BMP_SEARCH_FN 4 位图合并
3 BITMAP INDEX RANGE SCAN INDEX (BITMAP) IDX_BMP_SEARCH_LN 8 INDEX RANGE SCAN INDEX IDX_PDA_EXP_DOC 成本：2 基数：1

基数 364,510 似乎关闭，因为该表包含 3738562 行，而对于 WHERE 中列的替换值，计数仅为 8892。

但同样，这个计划至少告诉我正在使用正确的索引，并且从 toad 编辑器运行得非常快。

PL/SQL 的实际计划仍然不可用。

不确定这是否会增加一些有价值的信息。但思想还是会编辑。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:04:01.587

首先，我认为使用 append 插入 GTT 没有任何逻辑。我可能是错的，但据我所知，附加绕过缓冲区缓存并直接写入文件，它写在高水位线之上，并且在提交之前不允许查询。GTT 不在常规数据文件上 - 它在临时文件上，并且在提交时被截断（默认设置）。

我认为，如果您不需要在查询后操作数据，请考虑将 ref 游标返回给应用程序。基本上是一样的——很多 DAL 层都是这样实现的。

如果您仍然想要 GTT，我会检查我的临时文件分配，包括大小和实际磁盘 - 您的 DBA 可能已将它们放在不同的设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:45:46.567

您可能会研究的几件事。

1.  与 GTT 表无关。~~就像您说的那样，在 nologging 中创建更多表，并且在插入时使用插入附加提示进行直接路径加载。~~

2.  此外，如果您查看 Toad 的结果，可能会对查询速度产生误解。像 toad 这样的软件会自动添加提示以获取前 50/100/200 行，因此查询可能看起来运行得更快。您是否尝试过转到最后一条记录（网格中的“>”图标）并查看获取最后一行需要多少时间？

3.  如果无法查看计划，就不可能调整查询甚至编写好的代码。如果它是一个更大的过程，您可以查看 DBMS_PROFILER 之类的东西。如果您确定这是导致问题的语句，您可以从 SQL 跟踪或解释计划开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:55:02.363

[自适应游标共享不适用于 LIKE 谓词。](http://optimizermagic.blogspot.com/2007/12/why-are-there-more-cursors-in-11g-for.html)

如果您的过程首先使用诸如 之类的参数执行`%`，则 Oracle 不能对谓词使用某些索引访问方法。甲骨文无法听从你的暗示，并制定了一个对其他一切都很好`%`但对其他一切都很糟糕的计划。

一种可能的解决方案是强制 Oracle 始终硬解析您的查询。我已经使用了这个解决方案，正如 Dion Cho 在 [这个 OTN 线程](https://forums.oracle.com/forums/thread.jspa?threadID=854605)中所解释的那样：

```
dbms_stats.set_table_stats('schema','DOC',num_rows=>null,no_invalidate=>false); 
```

硬解析将使用额外的 CPU 资源，但希望更好的计划能够弥补差异。此解决方案将导致其他不相关的查询需要硬解析。您可能想查看引用线程中提到的其他一些解决方案。

此外，您的[INDEX_COMBINE](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#BABHJBAJ)提示可能不正确。索引之间不应有逗号。但是，提示语法的文档记录很差，提示解析器通常会“部分”工作。您的提示可能被评估为 的等价物 `/*+INDEX_COMBINE(attr)*/`，它可能会或可能不会按您希望的方式工作。没有计划你永远不会知道。

避免提示是有充分理由的，尤其是当您无法方便地访问解释计划时。

# php - 从域 B 中的弹出窗口创建域 A 可访问的 cookie

> ID：15978404
> 
> 赞同：0
> 
> 时间：2013-04-12T18:28:52.713
> 
> 标签：php, javascript

我试图创建的功能类似于*facebook connect*的工作方式，在域 A 中，当按下按钮时会弹出一个弹出窗口，显示来自域 B 的内容，如果用户登录，则在此弹出窗口上创建 cookie，然后弹出窗口已关闭，但由于此 cookie 是在域 B 中创建的，因此我无法从 A 访问该信息。facebook 如何解决此问题？我是一名 javascript 和 PHP 开发人员，因此如果您向我提供代码示例，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:22:53.963

在一个域中创建的 Cookie 无法从另一个域访问。它可以使用子域进行管理，但不能使用不同的域进行管理。您将需要为您的问题找到不同的解决方案。

我不知道您指的是什么 Facebook 解决方案，但据我所知，Facebook 在他们自己的域中使用 iframe，因此他们可以从他们的 iframe 访问自己的 cookie。

您可以查看[oauth 规范](http://tools.ietf.org/pdf/draft-ietf-oauth-v2-31.pdf)，了解在域之间完成授权的一种标准方式。

而且，这里是 Facebook Connect 如何工作的参考：http: [//thinkdiff.net/facebook/new-javascript-sdk-oauth-2-0-based-fbconnect-tutorial/](http://thinkdiff.net/facebook/new-javascript-sdk-oauth-2-0-based-fbconnect-tutorial/)

# vb.net - 使用默认命名空间将新的 Xelement 添加到现有文档

> ID：15978414
> 
> 赞同：0
> 
> 时间：2013-04-12T18:29:24.243
> 
> 标签：vb.net, linq-to-xml, xml-namespaces, xml-literals

我觉得这应该比现在更容易，但我似乎无法弄清楚。这是我的测试用例。

```
 Imports <xmlns="http://www.w3.org/2000/svg">

    Public Sub Test()

        Dim doc As XDocument = XDocument.Load("input.svg")
        Dim svg As XElement = doc.Elements.First

        svg.Add(<text>
                    <tspan>Some Text</tspan>
                </text>)

        svg.Save("output.svg")

    End Sub 
```

输入xml

```
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg">
    <g  id="layer4" >
    </g>
</svg> 
```

我得到的是以下输出，

```
<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg">
  <g id="layer4"></g>
  <text xmlns="http://www.w3.org/2000/svg">
    <tspan>Some Text</tspan>
  </text>
</svg> 
```

为什么新的文本元素看不到它正在使用默认命名空间并没有使用 xmlns？如果我离开该语句，我会在文本元素上`Imports <xmlns="http://www.w3.org/2000/svg">`得到一个空的命名空间。`xmlns=""`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:42:22.633

在最新版本的 .NET（4.5，也可能是 4.0）中，您可以使用

```
doc.Save("output.svg", SaveOptions.OmitDuplicatNamespaces) 
```

请参阅[http://msdn.microsoft.com/en-us/library/bb551426.aspx](http://msdn.microsoft.com/en-us/library/bb551426.aspx)。

# java - Android InputStream.read() 非常慢

> ID：15978415
> 
> 赞同：0
> 
> 时间：2013-04-12T18:29:34.447
> 
> 标签：java, android, networking, client, inputstream

我正在开发一个需要与服务器（在我的 PC 上运行）通信的 Android 应用程序，该应用程序也是由我编写的。问题是 InputStream.read() 需要一个永恒的时间，处理 200kb 需要大约 30 秒。也许以某种方式涉及垃圾收集，在我的循环中它不时被调用，但列出的延迟只有 2 或 3 毫秒，总共可能是 20 毫秒，所以我认为这不是问题。

我的代码：

```
client = new Socket("192.168.1.1", 1235);
client.setTcpNoDelay(true);
client.setReceiveBufferSize(1048576);
InputStream is = client.getInputStream();

byte[] buffer = new byte[1048576];
int i = 0;
int length = -1;

while (true)
{
    int b = is.read();
    if (b == -1)
    {
        success = false;
        break;
    }
    buffer[i] = (byte) b;

    if (i == length)
        break;

    if (i == 3)
    {
        length = buffer[0] | buffer[1] << 8 | buffer[2] << 16 | buffer[3] << 24;
    }

    i++;
} 
```

我在 Java 方面并没有真正的经验，并且在 Android 编程方面完全是初学者，所以我不知道为什么它这么慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:44:35.877

您一次读取 1 个字节。这是令人难以置信的低效。您想一次读取大量字节 - 尽可能多。这就是您的应用程序运行缓慢的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:45:05.577

为什么要单独读取每个字节？看起来您真的想读取前 3 个字节并计算出您的长度，然后读取该块。

IE：

```
final byte[] lengthBuffer = new byte[3];

int b = is.read(lengthBuffer);

// make sure b was 3 and do your length calculation

final byte buffer = new byte[length];

b = is.read(buffer);

// check b and then you have your bytes 
```

然后，您至少可以获得 Inputstream 可以为读取数据块而不是一次读取一个字节提供的优化。而且您并没有像目前那样分配那个巨型阵列。

# c++ - async_read_until 处理程序调用了两次

> ID：15978420
> 
> 赞同：0
> 
> 时间：2013-04-12T18:30:07.557
> 
> 标签：c++, boost-asio

我正在尝试使用 boost asio 库来实现网络编程。这是一些数据（以“##”结尾）到达端点时调用的代码。

```
{
    boost::asio::async_read_until(m_socket, m_response,
                std::string("##"),
                boost::bind(&CTcpClient::HandleReceive,
                                shared_from_this(),
                                boost::asio::placeholders::error,
                                boost::asio::placeholders::bytes_transferred));

}

void CTcpClient::HandleReceive(const ErrorCodeType p_errorCode, size_t p_length)
{
    IN_FUNCTION

    if ( !p_errorCode )
    {
        logInfo(STR("Data received ..."));

        boost::asio::async_read_until(m_socket, m_response,
            std::string("##"),
            boost::bind(&CTcpClient::HandleReceive,
                            shared_from_this(),
                            boost::asio::placeholders::error,
                            boost::asio::placeholders::bytes_transferred));

        m_onReceiveSignal(sbuf2s(m_response));

    }
    else
    {
        Shutdown(p_errorCode);
    }

    OUT_FUNCTION
} 
```

假设发送到端点的数据是“KINGS##”。因此，Handlereceive 应该被调用一次。但在我的代码中，这被调用了两次，一次是“KINGS##”，另一次是空字符串。

有人能告诉我是什么原因以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:11:21.483

成功读取后，您需要清除`m_response`缓冲区，直到令牌。

因为您在重新发出异步读取之前没有这样做，所以您的响应缓冲区中仍然有`##`字符，因此读取将立即完成。

附带说明一下，`async_read_until`调用*可能会*读取 ## 之外的数据，因此您必须小心仅清除并包括 ##，但不能超过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T22:54:46.710

我认为您只需要在 m_onReceiveSignal(...) 之后调用 async_read_until(...)。在 Handlereceive 中更改两者的顺序。

这是假设您第一次调用 Handlereceive 是通过 async_read_untill(...) 从另一个方法（可能是连接）

# vb.net - 不允许我突出显示文本的 vb.net 文本框

> ID：15978424
> 
> 赞同：1
> 
> 时间：2013-04-12T18:30:23.827
> 
> 标签：vb.net, winforms, textbox, highlighting

我正在将 VB6 winforms 项目升级到 VB.Net 2.0。在一个表单上（只有这一个表单，大约 25 个），我的文本框表现得很奇怪。

当用户单击（聚焦）其中包含值的文本框时，光标会自动转到文本框的开头（左侧），并且只能使用键盘箭头键移动。我不能用鼠标重新定位光标，也不能用鼠标突出显示一段文本。

文本框不是只读的，并且是可见和启用的。事实上，所有设置都是默认设置，因为我拖出了一个新的文本框并将其添加到表单中，我得到了相同的行为。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:16:18.353

好的，这是答案：启动表单设置为 MdiContainer。此表单有一个拆分面板容器，其中包含另一个表单，用于面板 1 中的应用程序控件和面板 2 中的工作表单。当工作表单加载到面板 2 中时，它们不允许成为顶级，因为有一个 .Parent属性设置为拆分容器面板 2。由于某种原因，除非文本框位于顶级表单上，否则不允许突出显示文本框中的文本，并且由于我们无法将工作表单置于顶级，我们不能t 突出显示文本。作为参考，看看[这个](http://www.codeproject.com/Questions/175273/Text-controls-doesn-t-let-to-select-the-text-with)。

# rest - 如何通过 Azure 移动服务使用服务器端排序和分页

> ID：15978427
> 
> 赞同：1
> 
> 时间：2013-04-12T18:30:36.357
> 
> 标签：rest, azure, jqgrid, odata, jqgrid-inlinenav

我正在将 jqGrid (inlineNav) 与来自 azure 服务的数据一起使用，并且有兴趣了解如何将服务器端排序和分页与 Azure 移动服务一起使用。

请分享对此的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:54:13.750

Windows Azure 移动服务提供 REST API，可用于获取/插入/编辑/删除您为相应访问配置的表的数据（请参阅[文档](http://msdn.microsoft.com/en-us/library/windowsazure/jj591475.aspx)）。[查询记录操作](http://msdn.microsoft.com/en-us/library/windowsazure/jj677199.aspx)请求使用 HTTP GET 动词。它支持开放数据协议 (OData) URI 选项`$orderby`, `$skip`,`$top`和`$inlinecount`可用于填充 jqGrid。

```
$("#list4").jqGrid({
    url : 'https://mohit.azure-mobile.net/tables/Schedules',
    datatype: "json",
    height: "auto",
    colModel: [
        { name: "RouteId", width: 50 },
        { name: "Area", width: 130 }
    ],
    cmTemplate: {editable: true, editrules: { required: true}},
    rowList: [10, 20, 30],
    rowNum: 10,
    prmNames: { search: null, nd: null },
    ajaxGridOptions: {
        contentType: "application/json",
        headers: {
            "X-ZUMO-APPLICATION": "myKey"
        }
    },
    serializeGridData: function (postData) {
        if (postData.sidx) {
            return {
                $top: postData.rows,
                $skip: (parseInt(postData.page, 10) - 1) * postData.rows,
                $orderby: postData.sidx + " " + postData.sord,
                $inlinecount: "allpages"
            };
        } else {
            return {
                $top: postData.rows,
                $skip: (parseInt(postData.page, 10) - 1) * postData.rows,
                $inlinecount: "allpages"
            };
        }
    },
    beforeProcessing: function (data, textStatus, jqXHR) {
        var rows = parseInt($(this).jqGrid("getGridParam", "rowNum"), 10);
        data.total = Math.ceil(data.count/rows);
    },
    jsonReader: {
        repeatitems: false,
        root: "results",
        records: "count"
    },
    loadError: function (jqXHR, textStatus, errorThrown) {
        alert('HTTP status code: ' + jqXHR.status + '\n' +
            'textStatus: ' + textStatus + '\n' +
            'errorThrown: ' + errorThrown);
        alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
    },
    pager: "#pager1",
    sortname: "Area",
    viewrecords: true,
    caption: "Schedule Data",
    gridview: true
}); 
```

对上述代码的一些注释：

*   我删除`sortable: false`以允许通过单击列标题对网格进行排序
*   关于`prmNames`选项一，可以删除向服务器发送不需要的参数或重命名它。我曾经`prmNames: { search: null, nd: null }`拒绝发送`_search`和`nd`选项。可以用来重命名`sort: "$orderby", rows: "$top"`另外两个参数，但是因为我们需要在需要使用. 所以在这种情况下不需要重命名其他参数。`$skip``sord``sidx``serializeGridData`
*   使用`serializeGridData`我们构建将发送到服务器的选项列表。
*   `ajaxGridOptions`将用于设置 jQuery.ajax 请求的附加参数，这些参数在内部执行 jqGrid 以访问服务器。我在示例集`Content-Type: application/json`和`X-ZUMO-APPLICATION: myKey`HTTP 标头中使用的选项
*   来自服务器的响应不包含`total`（总页数），因此我们使用`beforeProcessing`回调根据其他信息填充属性，*然后*再处理响应。
*   因为我们`$inlinecount=allpages`在 URL 中使用了选项，所以来自服务器的响应将包含有关记录总数的信息，并且数据页面将包含在`results`答案的一部分中。所以我们`jsonReader: {repeatitems: false, root: "results", records: "count"}`用来读取响应。
*   我们必须删除`loadonce: true`选项，因为服务器只返回请求的数据页面而不是整个数据集。

# objective-c - 以编程方式更改可可绑定值

> ID：15978428
> 
> 赞同：0
> 
> 时间：2013-04-12T18:30:39.057
> 
> 标签：objective-c, cocoa, cocoa-bindings

我的偏好中有一个`NSButton`可以与将应用程序添加到 LoginItems 进行交互。如果添加登录项失败，我想取消选中该框，这样用户就不会误认为它已添加到登录项中。但是，这样做之后，当我再次单击复选框时，不会触发绑定。

![在此处输入图像描述](https://i.stack.imgur.com/MiGD0.png)

```
- (void)addLoginItem:(BOOL)status
{
    NSURL *url = [[[NSBundle mainBundle] bundleURL] URLByAppendingPathComponent:
                  @"Contents/Library/LoginItems/HelperApp.app"];

    // Registering helper app
    if (LSRegisterURL((__bridge CFURLRef)url, true) != noErr) {
        NSLog(@"LSRegisterURL failed!");
    }

    if (!SMLoginItemSetEnabled((__bridge CFStringRef)[[NSBundle mainBundle] bundleIdentifier], (status) ? true : false)) {
        NSLog(@"SMLoginItemSetEnabled failed!");
        [self willChangeValueForKey:@"startAtLogin"];
        [self.startAtLogin setValue:[NSNumber numberWithBool:[self automaticStartup]] forKey:@"state"];
        [self didChangeValueForKey:@"startAtLogin"];
    }
}

- (void)setAutomaticStartup:(BOOL)state
{
    NSLog(@"Set automatic startup: %d", state);
    if ([self respondsToSelector:@selector(addLoginItem:)]) {
        [self addLoginItem:state];
    }
}

- (BOOL)automaticStartup
{

    BOOL isEnabled  = NO;

    // the easy and sane method (SMJobCopyDictionary) can pose problems when sandboxed. -_-
    CFArrayRef cfJobDicts = SMCopyAllJobDictionaries(kSMDomainUserLaunchd);
    NSArray* jobDicts = CFBridgingRelease(cfJobDicts);

    if (jobDicts && [jobDicts count] > 0) {
        for (NSDictionary* job in jobDicts) {
            if ([[[NSBundle mainBundle] bundleIdentifier] isEqualToString:[job objectForKey:@"Label"]]) {
                isEnabled = [[job objectForKey:@"OnDemand"] boolValue];
                break;
            }
        }
    }
    NSLog(@"Is Enabled: %d", isEnabled);
//    if (isEnabled != _enabled) {
    [self willChangeValueForKey:@"startupEnabled"];
        startupEnabled = isEnabled;
    [self didChangeValueForKey:@"startupEnabled"];
//    }

    return isEnabled;
} 
```

我将复选框的数据绑定绑定到`self.automaticStartup`. 如果我删除该行`[self.startAtLogin setValue:[NSNumber numberWithBool:[self automaticStartup]] forKey:@"state"];`，则绑定工作正常，但如果添加项目失败，它不会取消选中。

如何以编程方式更改此绑定值，以便不忽略所有其他绑定事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:03:25.100

根据您的解释，您的绑定值为`automaticStartup`，但您发送`willChangeValueForKey:`的是`startAtLogin`。为了使绑定正常工作，您需要在某些时候提醒绑定变量的更改。但是，由于您正处于`setAutomaticStartup:`当时的状态，因此在这里这样做并不安全。

在这种情况下，我不会使用绑定来执行更改本身，我会考虑旧式`IBAction`机制，然后通过`IBOutlet`当您可以确认状态时手动设置复选框值。

# ms-access - 如何在 Access SQL 中每个满足条件只返回一行？

> ID：15978430
> 
> 赞同：1
> 
> 时间：2013-04-12T18:30:50.043
> 
> 标签：ms-access

我有看起来像这样的数据

```
CUSTID     POLICY     TYPE   RANDOMTHING   ETC 
```

有时每个 CUSTID 会有多行，否则其余字段的值不同。我只想为每个 CUSTID 返回一行，只取第一行的值（忽略其余的）。

我尝试将 First 应用到 CUSTID，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:32:37.363

我相信你想要类似的东西

```
SELECT t1.* 
FROM yourTable t1 INNER JOIN 
    (
        SELECT CUSTID, MIN(POLICY) AS MinOfPOLICY 
        FROM yourTable
        GROUP BY CUSTID
    ) t2 ON t1.CUSTID = t2.CUSTID AND t1.POLICY = t2.MinOfPOLICY
ORDER BY 1 
```

在此示例中，`t1`和`t2`是表别名。在大多数情况下，当构造一个多次引用同一个表的查询时，需要表别名来消除列引用的歧义。例如，您不能只说`CUSTID`是因为不清楚您是指`CUSTID`来自 的第一个实例`yourTable`还是来自第二个实例。

SQL 语言允许通过将别名紧跟在表名之后来为表赋予别名，因此`yourTable t1` 意味着“ `yourTable`，使用别名`t1`”。另一个别名`t2`是`GROUP BY`子查询的别名（括号内的那个）。

# ruby-on-rails - ActionMailer 传递命令返回什么？

> ID：15978431
> 
> 赞同：2
> 
> 时间：2013-04-12T18:30:54.990
> 
> 标签：ruby-on-rails, actionmailer

我试图弄清楚如何优雅地通知用户尚未从 Rails 发送电子邮件。

问题是这行代码：

```
OrderNotifier.received(@order).deliver 
```

以及当 smtp 服务器不响应交付命令时会发生什么（例如，smtp 服务器已关闭）。我看过如下示例代码：

```
@response_from_deliver = OrderNotifier.received(@order).deliver 
```

但找不到任何文档说明这是一个有效的分配，或者如果是，ActionMailer 提供的各种响应可能是什么。

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-20T18:14:01.760

您将取回 Mail::Message 对象类型。Apidock.com 看起来有一些[关于 ActionMailer 的好信息](http://apidock.com/rails/ActionMailer/Base/mail)。

```
#<Mail::Message:70225058423980, 
Multipart: false, Headers: <Date: Mon, 20 Jan 2014 12:06:05 -0600>, 
<From: info@socialrest.me>, 
<To: myemail@gmail.com>, 
<Message-ID: <52dd658d8f0f7_11643fde8d219160235e4@iMac.local.mail>>, 
<Subject: Welcome to My Site>, 
<Mime-Version: 1.0>, 
<Content-Type: text/html>, 
<Content-Transfer-Encoding: quoted-printable>> 
```

# php - 远程 json 读取在 jquery 中不起作用

> ID：15978432
> 
> 赞同：2
> 
> 时间：2013-04-12T18:30:55.220
> 
> 标签：php, jquery, json

我需要从这里解析 json 输出[http://kalpa.freeoda.com/news/news_feed.php](http://kalpa.freeoda.com/news/news_feed.php)

以下是我编写的代码，

```
$.getJSON("http://kalpa.freeoda.com/news/news_feed.php", function(data){
        alert('Received news");
}); 
```

但是当我运行此代码时，我没有收到警报。

任何支持使这项工作得到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:35:09.383

尝试这个：-

现场演示

[http://jsfiddle.net/YFtvU/9/](http://jsfiddle.net/YFtvU/9/)

```
$.ajax({
            url: 'http://query.yahooapis.com/v1/public/yql',
                data: {
                    q: "select * from json where url ='http://kalpa.freeoda.com/news/news_feed.php'",
                    format: "json"
                },
                dataType: "jsonp",
            success: function (data) {

                alert(JSON.stringify(data));

            },
            error: function (result) {
                alert("Sorry no data found.");
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:38:32.313

尝试这个

[现场演示](http://jsfiddle.net/W9tSv/6/)

```
 $.getJSON("http://kalpa.freeoda.com/news/news_feed.php?callback=?", null, function (data) {
                alert(JSON.stringify(data));
            }); 
```

# rdf - 使用OWL API查询BBC野生动物本体

> ID：15978433
> 
> 赞同：2
> 
> 时间：2013-04-12T18:30:56.483
> 
> 标签：rdf, owl, owl-api

是否可以使用 OWL API 来查询这个本体，[http://www.bbc.co.uk/ontologies/wildlife/2010-11-04.shtml](http://www.bbc.co.uk/ontologies/wildlife/2010-11-04.shtml)，我对此感到非常困惑。它在RDF中提到它，我的困惑是，它是RDF语法中的OWL Ontology序列化吗？如果是这样，那么我想它应该与 OWL API 一起加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:49:03.040

如评论中所述，包含本体的文件（purl.org/ontology/wo）似乎不可用。（编辑：可以通过 Protege: "Open as URI" --> 加载文件`http://purl.org/ontology/wo/`）但是，这些术语在 HTML 页面的下方列出，因此您可以在需要时自己重新创建它。

本体应该可以使用 RDFS 公理（范围、域、子属性和子类）或使用 OWL 来表示。您可以在 RDF/XML 或任何 OWL 语法中序列化本体，这两种格式都由 OWL-API 处理。

# database - MVC 4 Bootstrap轮播，共享布局中文件夹中的图像

> ID：15978436
> 
> 赞同：0
> 
> 时间：2013-04-12T18:31:09.203
> 
> 标签：database, asp.net-mvc-4, twitter-bootstrap, slider, carousel

我目前在共享文件夹下的部分视图中实现了一个静态滑块：

```
@{
    ViewBag.Title = "_SliderPartial";
}

@*slider*@
<div id="myCarousel" class="carousel slide">
    <!-- Carousel items -->
    <div class="carousel-inner">
        <div class="active item">
            <img src="~/Content/images/ads/banner1.jpg" />
        </div>
        <div class="item">
            <img src="~/Content/images/ads/banner2.jpg" />
        </div>
        <div class="item">
            <img src="~/Content/images/ads/banner3.jpg" />
        </div>
        <div class="item">
            <img src="~/Content/images/ads/banner4.jpg" />
        </div>
    </div>
    <!-- Carousel nav -> toont navigatie pijlen op slider-->
    @*                    <a class="carousel-control left" href="#myCarousel" data-slide="prev">‹&lt;/a>
                    <a class="carousel-control right" href="#myCarousel" data-slide="next">›&lt;/a>*@
</div> 
```

我在 _BootstrapLayoutcshtml 中呈现此视图，该视图可在以下 pastebin 中找到：http://pastebin.com/AvxMeVQS [（](http://pastebin.com/AvxMeVQS)第 100 行），它工作得非常好。

我的问题是我希望滑块根据某些参数动态填充存储在 ads 文件夹中的图像（我只想显示活动的广告，它们都有开始和结束日期，存储在数据库中）。我知道如何编写代码，但问题是我没有任何控制器（因为我猜共享不需要控制器？）来收集广告并发送它们。

如果有人可以帮助我，我会很惊讶，因为我对 MVC 还很陌生，在此先感谢！

解决方案资源管理器：http: [//i46.tinypic.com/2cwt02h.png](http://i46.tinypic.com/2cwt02h.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:59:14.050

我做了类似的事情，为了遵循一个体面的工作实践，你需要一个模型和控制器。例如，您可能需要一个图像视图模型（下面的伪代码）

```
 namespace Models
{
public class adsImage
{
  public int ID {get; set;}
  public string src {get; set;}
}
}

public class HomeController : Controller
{

public ActionResult RenderAds()
{

   List<Models.adsImage> imgList = new List<adsImage>();

   imgList.add(new adsImage({ src = ""});

   return PartalView("YourPartialView",imgList);
}
}
 } 
```

不要忘记将模型绑定到视图（将其添加到您的局部视图）

@model 列表

最后要做的是通过您的操作方法呈现部分视图

```
 @{ Html.RenderAction("RenderAds","Home"); } 
```

# javascript - 为什么我的 javascript WebSocket 会死掉？蟒蛇服务器

> ID：15978444
> 
> 赞同：1
> 
> 时间：2013-04-12T18:31:29.017
> 
> 标签：javascript, python, websocket

试图制作一个简单的文本聊天套接字服务器。我对编码服务器非常陌生。我有这个工作代码，但问题是 WebSocket() 默默地死在我身上：

javascript 控制台中的输出打开关闭

很少有资源可以帮助我理解这种行为。为什么我的 python 服务器在发送标头后会终止连接？我是否以正确的方式发送响应？任何帮助都将是惊人的。

* * *

Python代码：

```
 import socketserver
    import re
    from base64 import b64encode
    from hashlib import sha1

    inited = 0

    class MyTCPHandler(socketserver.BaseRequestHandler):

        def handle(self):
            global inited
            if(inited==0):
                print(self)
                text = self.request.recv(1024).strip()
                self.upgradeConnection(text)
                self.request.send("a sweet message from the server!".encode("utf-8"));
                inited = 1
            else:
                self.request.sendall("second response!".encode("utf-8"));

        def upgradeConnection(self,text):
            #print("Client wants to upgrade:")
            #print(text);
            websocket_answer = (
                'HTTP/1.1 101 Switching Protocols',
                'Upgrade: websocket',
                'Connection: Upgrade',
                'Sec-WebSocket-Accept: {key}\r\n\r\n',
            )

            GUID = '258EAFA5-E914-47DA-95CA-C5AB0DC85B11'
            #print(re.search(b'Sec-WebSocket-Key:\s+(.*?)[\n\r]+', text))
            key = (re.search(b'Sec-WebSocket-Key:\s+(.*?)[\n\r]+', text)
                .groups()[0]
                .strip())

            #print(key.decode("utf-8"))
            #print(key.decode("utf-8") + GUID)
            #print(sha1((key.decode("utf-8") + GUID).encode("utf-8")))

            response_key = b64encode(sha1((key.decode("utf-8") + GUID).encode("utf-8")).digest()).decode("utf-8")
            #print(response_key)
            response = '\r\n'.join(websocket_answer).format(key=response_key)
            self.request.send(response.encode("utf-8"));

    HOST, PORT = "localhost", 9999
    server = socketserver.TCPServer((HOST, PORT), MyTCPHandler)
    server.serve_forever() 
```

网页代码：

```
 url = "ws://127.0.0.1:9999/";

    var sk = new WebSocket(url);

    sk.onopen = function(e){
        console.log("open");
        sk.send("the client is here!!");
    }
    sk.onmessage = function(e){
        console.log("message");
        console.log(e.data);
    }
    sk.onerror = function(e){
        console.log("error");
    }
    sk.onclose = function(e){
        console.log("closed");
    } 
```

# magento - 如何限制 Magento 产品页面中产品缩略图的数量

> ID：15978445
> 
> 赞同：0
> 
> 时间：2013-04-12T18:31:30.727
> 
> 标签：magento

在 Magento 中，有人知道如何限制在主产品图片下显示的缩略图数量吗？

这是可以通过管理员轻松控制的东西，还是我应该进入 media.phtml 并编辑 php？

```
 <div class="more-views">
      <ul>
      <?php foreach ($this->getGalleryImages() as $_image): ?>
        <li>
            <a href="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile()); ?>" title="<?php echo $_product->getName();?>" onclick="$('image').src = this.href; return false;">

                <img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(103, 103); ?>" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>"/>
</a>
        </li>
    <?php endforeach; ?>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:39:39.013

最快的方法是

```
 <div class="more-views">
      <ul>
      <?php $limit = 5; ?>
      <?php $ct = 0; ?>
      <?php foreach ($this->getGalleryImages() as $_image): ?>
        <li>
            <a href="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile()); ?>" title="<?php echo $_product->getName();?>" onclick="$('image').src = this.href; return false;">
                <img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(103, 103); ?>" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>"/>
            </a>
        </li>
      <?php
          if(++$ct >= $limit)
             break;
      ?>
    <?php endforeach; ?>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:35:28.250

是的，您可以通过管理员轻松控制要在主产品图像下显示哪些图像，但您需要为所有产品单独设置。

只需转到添加/编辑产品的图像选项卡。单击您不想在图片库中显示的排除复选框，然后单击保存按钮。

# eclipse - 在 Maven 多模块项目中，如何为包括模块在内的整个项目只生成一个 .classpath 和 .project？

> ID：15978450
> 
> 赞同：1
> 
> 时间：2013-04-12T18:32:00.273
> 
> 标签：eclipse, maven, m2eclipse, multi-module

我正在尝试为整个项目（包括模块）创建一个只有一个 .classpath 和 .project 和 .settings 的 Maven 多模块项目，但每次执行 mvn eclipse:eclipse 时，它​​都会生成一个 .classpath、.project 和 .父项目和每个子项目的设置目录。我想要的是有这样的结构：

例如：

父项目的名称是：

*   根父项目

模块（子项目）是：

*   横
*   服务
*   运输
*   客户
*   网络应用

在**包资源管理器**视图中：

+- 根父项目/

```
 +-transverse/src/main/java
        +-service/src/main/java
        +-service/src/main/resources
        +-service/src/test/java
        +-service/src/test/resources
        +-transport/src/main/java
        +-transport/src/main/java
        +-client/src/main/java
        +--client
        +--service          
        +--transport
        +--transverse   
        +--webapp
        +-pom.xml 
```

在**导航器**视图中：

+- 根父项目/

```
 +-.settings
                +- ...
        +-client/
            +-src
            +-target
            +-pom.xml
        +--service/ 
            +-src
            +-target
            +-pom.xml           
        +--transport/
            +-src
            +-target
            +-pom.xml           
        +--transverse/
            +-src
            +-target
            +-pom.xml           
        +--webapp/
            +-src
            +-target
            +-pom.xml
        +- .classpath
        +- .project
        +- pom.xml 
```

我不希望 Maven (m2eclipse) 在执行 mvn eclipse:eclipse 时为每个模块生成 .project 文件、.classpath 文件和 .settings 。

我希望我已经足够清楚:)。

谢谢您的帮助。此致。

# android - setOneShotPreviewCallback 没有回调我的方法

> ID：15978451
> 
> 赞同：5
> 
> 时间：2013-04-12T18:32:00.943
> 
> 标签：android, callback, android-camera

我正在尝试创建一个访问 Android 相机的应用程序，获取帧（图像），对其进行处理，然后重新启动该过程，同时在屏幕上提供流畅的预览。

我通过调用来获取一个帧`camera.setOneShotPreviewCallback(...)`，处理在我的回调中接收到的数据，然后`setOneShotPreviewCallback`再次调用来做到这一点。

问题是，我无法通过放入`setOneShotPreviewCallback`主要活动的`onResume()`功能来启动该过程。如果我这样做，我的回调永远不会被调用。

请看以下测试代码：

```
public void onResume() {
    super.onResume();
    camera = getCameraInstance();

    cameraPreviewSurface = new CameraPreview(this, camera);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.removeAllViews();
    preview.addView(cameraPreviewSurface);
    camera.setOneShotPreviewCallback(cameraPreviewCallback);

    Button button = (Button) findViewById(R.id.button_capture);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            camera.setOneShotPreviewCallback(cameraPreviewCallback);
        }
    });
} 
```

当应用程序启动时，永远不会调用回调，但只要按下按钮，我就会收到回调。

我曾尝试`setOneShotPreviewCallback`在我的`CameraPreview`课堂上使用 after `camera.startPreview();`，但我的方法仍然没有被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:07:45.137

我发现了问题。由于某种原因，必须在初始化预览表面后设置回调。

就我而言，由于我使用的是自定义 SurfaceView，因此我必须在 `surfaceCreated`和`surfaceChanged`函数中应用回调。

```
camera.setPreviewDisplay(surfaceHolder);
camera.startPreview();
camera.setOneShotPreviewCallback(cameraPreviewCallback); 
```

# c - 根据最后一个已知值执行命令？

> ID：15978456
> 
> 赞同：0
> 
> 时间：2013-04-12T18:32:16.070
> 
> 标签：c, state

```
switch (leds & 0x07) {
    case 1:
        setG510LEDColor(0, 220, 0);
        break;
    case 2:
        setG510LEDColor(220, 0, 0);
        break;
    case 4:
        setG510LEDColor(0, 0, 220);
        break;
    default:
        setG510LEDColor(000, 220, 000);
} 
```

以上是我的代码（我应该休息一下；默认情况下？）我想知道我是否可以根据最后一个已知状态（leds & 0x07）设置默认值来执行命令。例如，如果它是 2 我想做 1 个命令，如果它是 1 我想做另一个命令，如果它是 4 我想做另一个命令，那么如果这些都不是我想做其他事情。

可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:40:56.427

1）是的，你应该在默认后添加一个中断。这样做是为了在很多天后，当有人在 case 语句的末尾添加一些东西时，他/她不必担心默认是否中断终止。

2）我很困惑。是否要使用最后一个开关值？那么为什么不将它存储在某个全局状态持有者中并默认使用它呢？您可以在 switch 语句的末尾执行此操作，第一次切换时也要小心。或者是别的什么？

# php - 如何检索从 CakePHP 到 Android 的图像链接？

> ID：15978459
> 
> 赞同：0
> 
> 时间：2013-04-12T18:32:27.303
> 
> 标签：php, android, image, cakephp, android-networking

我对 CakePHP 和图像还很陌生，所以请多多包涵。您可以假设我使用的是最新版本。

我正在尝试构建一个可以显示从服务器检索到的图像的 Android 应用程序。

假设我在 assets 文件夹中有一个名为 football.jpg 的图像。我将如何将其存储在数据库中，然后如何将其输出到 Android 应用程序？我是只发送链接还是发送整个图像？如果只是链接，这是否意味着我必须使用链接重新连接到服务器然后获取图像？对不起，如果这没有意义。仍然试图绕过它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:51:54.580

请注意，最好将文件存储在服务器的文件系统上，并将文件的路径存储在数据库中。这背后的原因是 BLOB 存储在文件系统上与所有其他典型数据不同的区域中，就检索而言，它的速度并没有快很多。

这是我的意思的链接：将[图片存储为文件还是在网络应用程序的数据库中？](https://stackoverflow.com/questions/561447/store-pictures-as-files-or-in-the-database-for-a-web-app)

关于将其返回到您的 Android 应用程序，您可以在响应对象 ( [http://book.cakephp.org/2.0/en/controllers/request-response.html#cake-response-file](http://book.cakephp.org/2.0/en/controllers/request-response.html#cake-response-file) ) 中发送文件：

```
public function sendFile($id) {
    $file = $this->Attachment->getFile($id);
    $this->response->file($file['path']);
    //Return reponse object to prevent controller from trying to render a view
    return $this->response;
} 
```

这应该使您可以更好地控制将哪些文件返回给您的客户。

# gcc - 构建 wxWidgets 2.8.12 GCC 4.6.2

> ID：15978460
> 
> 赞同：1
> 
> 时间：2013-04-12T18:32:35.023
> 
> 标签：gcc, wxwidgets

在 Cygwin 中构建 wxWidgets 时出现此错误：

```
../src/generic/dirctrlg.cpp:67:24: fatal error: direct.h: No such file or directory
compilation terminated.
make: *** [corelib_dirctrlg.o] Error 1
T_BITS=64 -D_LARGE_FILES -D__WXDEBUG__ -I/cygdrive/c/wxWidgets-2.8.12/build-debug/lib/wx/include/msw-ansi-debug-static-2.8 -I../include -Wall -Wundef -Wno-ctor-dtor-privacy -ggdb -O0 ../src/generic/dirctrlg.cpp
Makefile:28340: recipe for target `corelib_dirctrlg.o' failed 
```

我按照 wxWidgets for Windows 中的说明使用`configure`（`install.txt`编译 wxWidgets）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:59:06.380

你使用哪个编译器？有关您拥有的一些选择，请参阅[http://wxwidgets.blogspot.com/2011/06/choosing-gcc-for-building-wxwidgets.html](http://wxwidgets.blogspot.com/2011/06/choosing-gcc-for-building-wxwidgets.html)。FWIW`direct.h`应该出现在 MinGW 编译器头文件中。

# algorithm - Dijkstra算法复杂度分析误区

> ID：15978462
> 
> 赞同：2
> 
> 时间：2013-04-12T18:32:51.233
> 
> 标签：algorithm, complexity-theory, graph-algorithm, dijkstra

给定 Cormen 书中的以下算法：

```
DIJKSTRA(G,w,s)

1\. INITIALIZE-SINGLE-SOURCE(G,s)
2\. S <-- {0}
3\. Q <-- V[G]
4\. while (Q != {0})
5\.    do u <-- extract-min(Q)
6\.    s <-- s U {u}
7\.    for each vertex v at Adj(u) 
8\.            do RELAX(u,v,w)

RELAX (u,v,w)
if d[v] > d[u] + w(u,v)
    then d[v] <-- d[u] + w(u,v)
       pie(v) <--- u 
```

我们的教授告诉我们，如果我们使用 Binary Heap，Relax 操作需要 O(log|V|)，因此第 7-8 行的循环需要 O(|E|*log|V|)..（如果我们使用线性队列然后放松需要 O(1))。我已经在谷歌上搜索了一段时间，但找不到一个很好的解释。当我们使用二进制堆时，为什么松弛操作需要 O(log|V|)？很想得到一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:06:25.333

我相信一旦你放松一个节点，你将不得不将它们放在二进制堆中的正确节点中。最坏的情况，如果当前节点有一个可怕的距离值并且是你的二进制堆中的一个叶节点，而你刚刚找到了一个非常好的方法来到达那个节点，你必须把那个节点从堆的底部移到顶部保持最小堆属性。节点可能需要移动的级别数是 log(V) -> O(log(V))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:22:59.363

在Relax函数中，d[v]处的键值被更新，我们需要再次维护最小堆，因为它可能违反平均堆的性质，所以整个Relax过程需要O(log v)时间。最小堆被维护，它准备好提取下一个最小值。

```
RELAX (u,v,w)
if d[v] > d[u] + w(u,v)
    then d[v] <-- d[u] + w(u,v)        //* updation.
       pie(v) <--- u 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T12:48:01.930

在我看来，RELAX 需要`O(1)`. 由于每条边都只查看一次，因此会生成`O(E)`. 关键是 extract-min 需要`O(log(V))`并使用了 V 次，占`O(V log(V))`.

所以总而言之，Djikstra 可以运行`O(V log V + E)`（参见[此页面](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Running_time)），与使用哪种堆结构无关（参见[这篇文章](http://en.wikipedia.org/wiki/Heap_%28data_structure%29#Comparison_of_theoretic_bounds_for_variants)）。

除此之外，在调用 RELAX 操作时运行 min-heap（而不是每次 4-8 迭代一次）会产生巨大的时间开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-10T14:12:34.320

如果我们维护最小堆，那么 extract-min(Q) 将花费 O(1) 时间。O(log V) 只是由于更新和维护最小堆。

# scipy - 使用 SciPy DCT 函数创建 2D DCT-II

> ID：15978468
> 
> 赞同：11
> 
> 时间：2013-04-12T18:33:05.087
> 
> 标签：scipy

我正在 labview 中创建 2D DCT-II，但希望能够检查我的输出是否正确。SciPy 有一个很好的 DCT 函数，默认为 DCT-II，但它是一维的。

我想让它适用于二维数组。为此，必须将 DCT 应用于列，然后必须再次将 DCT 应用于此结果的行。

我不确定我想使用什么功能来做到这一点。我试过 np.rot90 将 numpy 数组逆时针旋转 90 度，如下所示：

```
import numpy as np
from scipy.fftpack import dct

a = np.array([[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],
[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],
[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],
[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],
[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],
[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],
[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],
[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0]])

b = dct(np.rot90(dct(a),3)) 
```

但是，这会输出以下内容：

```
array([[ 1152\.        ,     0\.        ,     0\.        ,     0\.        ,
            0\.        ,     0\.        ,     0\.        ,     0\.        ],
       [ -412.30867345,     0\.        ,     0\.        ,     0\.        ,
            0\.        ,     0\.        ,     0\.        ,     0\.        ],
       [    0\.        ,     0\.        ,     0\.        ,     0\.        ,
            0\.        ,     0\.        ,     0\.        ,     0\.        ],
       [  -43.10110726,     0\.        ,     0\.        ,     0\.        ,
            0\.        ,     0\.        ,     0\.        ,     0\.        ],
       [    0\.        ,     0\.        ,     0\.        ,     0\.        ,
            0\.        ,     0\.        ,     0\.        ,     0\.        ],
       [  -12.85778584,     0\.        ,     0\.        ,     0\.        ,
            0\.        ,     0\.        ,     0\.        ,     0\.        ],
       [    0\.        ,     0\.        ,     0\.        ,     0\.        ,
            0\.        ,     0\.        ,     0\.        ,     0\.        ],
       [   -3.24494866,     0\.        ,     0\.        ,     0\.        ,
            0\.        ,     0\.        ,     0\.        ,     0\.        ]]) 
```

我认为 rot90 不是做我想做的事情的正确功能，也许有更好的功能？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-13T03:42:50.707

@Jaime 的回答很好。我要补充一点，`dct`就是`axis`为了这个目的。首先沿轴 0 应用它，然后沿结果的轴 1 应用它：

```
In [30]: from scipy.fftpack import dct

In [31]: a.shape
Out[31]: (8, 8)

In [32]: t1 = dct(dct(a, axis=0), axis=1)

In [33]: t2 = dct(dct(a.T).T)

In [34]: np.abs(t1 - t2).max()
Out[34]: 0.0 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-12T22:11:19.350

我不认为旋转是您想要的，因为它将行转换为列，但它也会混淆数据的顺序。改为使用`np.transpose`。

要先按列应用 dct，然后按行应用，您可以执行以下操作：

```
dct(dct(a.T).T) 
```

尾随`.T`相当于`np.transpose`。请注意在对列进行操作后如何撤消转置，以使返回再次按行对齐。

我不认为你应用 dct 的顺序，即列然后行与行然后列，有任何区别，但你可以得到行然后列：

```
dct(dct(a).T).T 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-21T00:25:26.130

现在还有一个多维 DCT 函数（和反函数）：

```
>>> from scipy.fft import dctn, idctn
>>> b = dctn(a)
>>> np.allclose(a, idctn(b))
True 
```

[https://docs.scipy.org/doc/scipy/reference/generated/scipy.fft.dctn.html](https://docs.scipy.org/doc/scipy/reference/generated/scipy.fft.dctn.html)

# c++ - 类成员总是作为一致性的指针？

> ID：15978471
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:33:15.917
> 
> 标签：c++

考虑这个类。

```
#pragma once

#include <memory>
#include <string>

class A;
class B;

class Test
{
public:
    Test();
    ~Test();

private:
    std::unique_ptr<A> m_a;
    std::unique_ptr<B> m_b;
    std::unique_ptr<std::string> m_string1; // 1
    std::string m_string2; // 2
}; 
```

我总是尝试在头文件中转发声明类。但是，我不会对标准头文件这样做，前向声明模板类的 typedef 是很痛苦的。无论如何，如果我有可用的标题 - 我应该更喜欢第一种方式还是第二种方式 -`m_string1`还是`m_string2`？我觉得如果我混合使用指针和值类型，那么它看起来会不一致。将所有内容都设为指针是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:52:05.363

如果您要这样做，请改用`pImpl`：

```
class TestImpl;
class Test
{
public:
  Test();
  ~Test();

private:
  std::unique_ptr<TestImpl> m_;
}; 
```

在你的 .cpp 文件中，创建一个`TestImpl`包含所有数据的文件。

这将更好地隐藏您的实现细节，并减少间接性，因为所有数据`Test`现在都是连贯的（聚集），如果仍然删除了一个间接步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:50:27.317

`std::string`已经拥有一个动态结构（所以它本身就是一个指针）

毕竟，如果你认为一个字符串是“不透明类型”，那么不透明，你甚至不想包含它的标题，unique_ptr 也应该如此......但你迟早必须停止，否则你最终会得到一类普通指针，重新定义了 big-5（ctor、dtor、copy、assign、move、transfer）。但这每次都在重新实现智能指针。

还要考虑将一个类分解成太小的动态“细节”会在内存中散布对象，从而不允许（或更难）任何基于系统缓存的处理器优化。

如果那时你有一些模板，那么*pimpl*习惯用法就变得毫无用处：你必须将整个类公开为标题。

在我看来，您对这个成语的应用太深入了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:50:52.537

您希望它分配在堆上还是可能在堆栈上？有理由使用每种方法（例如对象生命周期），根据情况使用适当的选择。我觉得如果你不需要做指针管理是没有意义的；即使您使用智能指针。

此外，`std::string`内部类通常是指向堆分配字符串的指针。因此，在这种情况下，您将为单个指针进行堆分配。堆分配比堆栈分配更昂贵，并且许多非常小的分配往往会迅速分割您的堆空间，从而使分配器更难（也就是更慢）找到合理大小的连续可用空间块。

IMO，一般来说一致性是好的，但为了一致性而一致性是僵化和不切实际的。

# java - 如何使用通用对象列表迭代器中的方法调用另一个类的 equals 方法

> ID：15978474
> 
> 赞同：0
> 
> 时间：2013-04-12T18:33:23.207
> 
> 标签：java, list, object, compare, equals

我正在学习 Java 课程的介绍，我们正在学习如何制作一个通用对象列表迭代器（我称之为 List），它可以在以后扩展到更具体的列表。这样，如果我决定稍后再创建一个列表类，我可以只扩展 List 而不是再次输入所有的 getter、setter、insert()、delete() 等。

我的教授希望我们的 List 类有一个 isThere() 方法。她希望它接受一个对象，遍历列表直到找到匹配项，然后返回找到它的位置的索引。我在这个网站上搜索过类似的问题，但大多数建议的方法包括“<>”，或者我们不允许在这个类中使用的哈希。我们也不允许使用 java 为我们提供的任何 Array 方法。我们必须编写自己的方法。

所以，我的问题是我在我的对象列表中存储了 10 个用户。我故意将一个元素存储为“Bimmy”，以便我可以尝试使用我的 isThere() 方法找到该元素。当我进入调试模式时，它显示它到达了用户方法 equals() 然后返回 false。Debug还显示User的名字都是“Bimmy”，id值也一样（用户名和id相同是equals方法返回true的要求）。

同样，这是我学习 Java 的第一个学期，我认为我的问题与强制转换有关。我认为在 List 的 isThere() 中，“list[i]”不知道它是一个用户，或者它应该将自己与另一个用户对象进行比较。但是，我真的不确定。如果有人愿意提供帮助，我将不胜感激。我将在下面发布代码...

列出 isThere() 方法：

```
public int isThere(Object obj)
    {
        for(int i = 0; i<index; i++)
        {
            if(list[i].equals(obj))
            {
                return i;
            }
        }

            return -1;
    } 
```

用户的 equal() 方法：

```
public boolean equals(User user)
{
    if(user.getName().equals(name) && user.getId().equals(id))
    {
        return true;
    }
    else
        return false;
} 
```

这就是我在 Main 中所做的：

```
System.out.println("-----------------------------test isThere()");
    UserList check = new UserList(10);
    check.tryAdd(new User("Jimmy", "562801"));//I am adding 10 Users here.
    check.tryAdd(new User("Jimmy", "562801"));//I put one as "Bimmy" so that I can 
    check.tryAdd(new User("Jimmy", "562801"));//test this method to find that User
    check.tryAdd(new User("Jimmy", "562801"));//at index 8
    check.tryAdd(new User("Jimmy", "562801"));
    check.tryAdd(new User("Jimmy", "562801"));
    check.tryAdd(new User("Jimmy", "562801"));
    check.tryAdd(new User("Jimmy", "562801"));
    check.tryAdd(new User("Bimmy", "562801"));
    check.tryAdd(new User("Jimmy", "562801"));
    System.out.println(check.toString());

    System.out.println(check.isThere( new User("Bimmy","562801"))); 
```

此时控制台输出 -1 表示未找到“Bimmy”。我不知道如何解决这个问题，但我期待着了解我做错了什么。

这是关于我的清单的更多信息：

```
protected final int MAXSIZE=10;
    protected Object [] list;
    protected int index;
    protected int curPos;

    public List()
    {
        list = new Object[MAXSIZE];
        for(int i = 0;i<MAXSIZE; i++)
        {
            list[i]=new Object();
        }
        index = 0;
        curPos = 0;
    }

    public List(int size)
    {
        list = new Object[size];
        for(int i = 0;i<size; i++)
        {
            list[i]=new Object();
        }
        index = 0;
        curPos = 0;
    } 
```

添加元素

```
public void tryAdd(Object thing)//adds Object to index, increment index. if full, it deques first
    {
        if(isFull())
        {
            deque();
            setElement(thing,index-1);
        }
        else
        {
            setElement(thing,index);
            index++;
        }
    }

public void setElement(Object setWhat, int which) //assigns a specific element with the parameters
    {
        list[which] = setWhat;
    } 
```

还有用户列表：

```
public UserList(int size){super(size);} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:50:17.567

我相信它正在调用该`Object.equals`方法（实际上只是检查它们是否是完全相同的对象）（每个对象都是 的子类`Object`）。

这是因为你打电话

```
list[i].equals(obj) 
```

where `obj`is 的类型`Object`（即使它的实际类型是`User`）。

让您的`equals`方法覆盖`Object.equals`应该可以工作：

```
@Override
public boolean equals(Object other)
{
    User user = (User)other;
    if(user.getName().equals(name) && user.getId().equals(id))
        return true;
    else
        return false;
} 
```

应该可行的替代方法是将输入参数的类型更改为`isThere`to `User`。

# nosql - 其他具有集合数据类型的数据库，如 Redis

> ID：15978476
> 
> 赞同：0
> 
> 时间：2013-04-12T18:33:37.267
> 
> 标签：nosql, redis

Redis 中的集合数据类型和相关操作（联合、交集、基数等）非常有用。我一直无法找到任何其他具有类似功能的数据库。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:30:58.480

与 Redis 类似的一个数据库是[Kyoto Tycoon](http://fallabs.com/kyototycoon/spex.html)。它没有集合、列表等，但它确实有多种数据库类型、游标和类似于 Redis 的 Lua 脚本的 Lua 扩展。

您可以在京都大亨内部运行的 Lua 中实现一些 Redis 数据类型和命令，但它实际上只是一个键/值存储。

另一个值得一看的是[Edis](https://github.com/inaka/edis)：Redis 在 Erlang 中实现。

# visual-studio-lightswitch - 如何制作多选灯开关组合框以及如何使用此过滤查询

> ID：15978477
> 
> 赞同：0
> 
> 时间：2013-04-12T18:33:43.697
> 
> 标签：visual-studio-lightswitch

我需要使用多选组合框过滤 Lightswitch 查询。我可以构建一个 wpf 控件来制作组合框，但我不知道如何过滤。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T16:13:40.030

我有同样的问题。下面是我是如何做到的。首先在您的表上创建一个单独的查询。它不必与原来的不同。原因是组合框将由查询填充，因此如果查询被过滤，那么组合框项目也会被过滤，我们不希望这样。接下来，确保您关闭该查询的分页，否则您只会在组合框中获得 45 个（默认值）项目。

接下来，您需要自定义控件。我做了一个简单的silverlight组合框。

```
<UserControl x:Class="SilverlightControlLibrary.SilverlightComboBoxControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" 
Height="23" 
Width="180">   

    <ComboBox Height="23" HorizontalAlignment="Left" VerticalAlignment="Top" Width="180"
          Margin="0,0,0,0" Name="ModuleIDFilterCB" 
          ItemsSource="{Binding Screen.ADDEDQUERY, Mode=OneWay}"
          DisplayMemberPath="ADDEDQUERYCOLUMN"      
          SelectedItem="{Binding Screen.LOCALPROPERTY, Mode=TwoWay}"
          />
</UserControl> 
```

从您创建的查询中，您使用“ItemsSource”属性和“DiplayMemberPath”填充组合框。源是查询，路径是列的名称。

现在是好的部分。创建需要过滤的列类型的本地属性。在查询窗口中为您需要过滤的表创建一个参数。确保这与您用于填充组合框的查询不同！将参数映射到属性。

其参数映射的查询现在由您创建的本地属性过滤。正如您在 XAML 中注意到的，最后一行将组合框的选定项设置为本地属性。确保使用“屏幕”。查询和属性的路径，并确保 selectedItems 绑定处于“双向”模式。

然后它应该工作。

# jquery - Infragistics Ignite UI 网格与 Hot Towel/Durandal SPA 应用程序

> ID：15978482
> 
> 赞同：3
> 
> 时间：2013-04-12T18:34:17.177
> 
> 标签：jquery, knockout.js, infragistics, durandal, hottowel

有没有人有将 Infragistics Ingite UI 控件集成到 Hot Towel/Durandal SPA 应用程序的经验？

我已将此 ig 示例集成到基本的 Hot Towel 应用程序中：

[http://www.infragistics.com/products/jquery/sample/grid/grid-knockoutjs-integration](http://www.infragistics.com/products/jquery/sample/grid/grid-knockoutjs-integration)

它适用于简单的绑定，例如：

看法：

```
<table id="grid" data-bind="igGrid: {
    dataSource: gridData, autoGenerateColumns: false,
    columns: [
        { headerText: 'Product Name', key: 'Name', dataType: 'string' }
    ]}">
</table> 
```

虚拟机：

```
define(['services/logger'], function (logger) {
    var vm = {
        activate: activate,
        title: 'Details View',
        gridData: adventureWorks // Points to ig's JSON sample data
    };

    return vm;

    //#region Internal Methods
    function activate() {
        return true;
    }
    //#endregion
}); 
```

这工作正常并呈现网格。但是，只要将任何功能添加到绑定中，就会出现错误，例如：

```
<table id="Table1" data-bind="igGrid: {
    dataSource: gridData, autoGenerateColumns: false,
    features: [
        { name: 'Sorting', type: 'local' }
    ],
    columns: [
        { headerText: 'Product Name', key: 'Name', dataType: 'string' }
    ]}">
</table> 
```

错误是“[”无法调用未定义的方法'_injectGrid'”，“视图/详细信息”，对象]”。

我正在使用 jQuery.Migrate 库（因为 ig 仍然引用 1.7 而 Durandal 想要 1.9），并使用它来加载依赖的 ig 脚本：

```
$.ig.loader({
    scriptPath: "../App/Infragistics/js/",
    cssPath: "../../Content/",
    resources: "igGrid.*,extensions/infragistics.datasource.knockoutjs.js,extensions/infragistics.ui.grid.knockout-extensions.js"
}); 
```

顺便说一句，我曾尝试使用“传统”jQuery（即非 KO）API 来创建网格，但我遇到了更多问题！

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:07:50.650

我不能真正为您提供 100% 合适的解决方案，但我可以告诉您为什么会得到这个 - 问题不在于淘汰赛（或者不是因为它） - 视图与模型的绑定发生在实际视图标记附加到文档。我相信它是作为片段加载的，因此`igGrid`尝试选择它`jQuery`并将功能小部件附加到它 - 这显然无法获取尚不存在的项目。

我不熟悉 Hot Towel，我不知道如何让它先附加标记，然后再进行 Knockout 绑定，所以我只是通过手动将片段附加到正文中来帮助它`ViewModelBinder.js`：

```
bind: function(obj, view) {
    doBind(obj, view, function () {
        if ((view.getAttribute("data-view") == "views/details") && ($(view).parent().length == 0)) {
            $("#content").prepend(view);
        }
        ko.applyBindings(obj, view);
        if (obj.setView) {
            obj.setView(view);
        }
    });
} 
```

它几乎是这样工作的（移动实际的`Durandal`包装让它有点抽搐）。现在我知道这不是要走的路，而是让你知道哪里出了问题。或者，您可以添加

```
 ko.applyBindings(settings.model, newChild); 
```

在`entrance.js` `startTransition`函数中并从上面的函数中删除额外的前置和绑定。仍然不是很好的过渡，但更好。

PS 还注意到，当您直接进入详细信息视图时，您无需等待加载器，请注意[Infragistics 加载器](http://help.infragistics.com/NetAdvantage/jQuery/2012.2/CLR4.0?page=Using_Infragistics_Loader.html)是异步的，并且具有回调函数，这就是您实际等待加载器完成的方式:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:23:09.823

我不确定，但由于加载程序的异步请求，基础网格文件可能尚未加载。要查看这是否是问题，请尝试在没有加载程序的情况下添加脚本，例如：

```
<link href="~/Content/IG/css/themes/infragistics/infragistics.theme.css" rel="stylesheet"type="text/css" />
<link href="~/Content/IG/css/structure/infragistics.css" rel="stylesheet" type="text/css" 
<script src="~/Scripts/IG/js/infragistics.js" type="text/javascript"></script> 
```

您还需要敲除网格绑定 javascript 文件。试一试它可能会奏效。

如果要保留加载器，另一个想法是在加载所有基础文件时在加载器的回调中解析一个延迟对象，并从激活方法返回该延迟对象。

# excel - 将带有旋转按钮的 excel 图表导入到 powerpoint

> ID：15978483
> 
> 赞同：0
> 
> 时间：2013-04-12T18:34:18.650
> 
> 标签：excel, vba, powerpoint

我在 excel 中有一个带有旋转按钮的图表，该按钮可以在按下时更改值以更改图表。我可以使用 insert -> object 将它们导入到 powerpoint 中，但这不会使旋转按钮可用。

我正在尝试获取它，因此在显示演示文稿时，我可以单击旋转按钮，图表将相应更改，就像它在 excel 中一样。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:02:22.177

旋转按钮连接到宏，这就是导致图表在 Excel 中发生变化的原因。

您可以从 Excel 复制代码并将其放在 Powerpoint 文件中的标准模块中。

您可能需要进行一些调整 - 或多或少，取决于原始宏的编写情况（例如，如果它充满了`ActiveSheet.This`，`ActiveChart.That`那么它需要比使用`Chart`或`ChartObject`变量来表示更多的调整图表。

以下是与 powerpoint 图表交互的示例：

```
Sub TEST()
Dim sld As slide
Dim cht As Chart
Dim srs As Series

Set sld = ActivePresentation.Slides(1) 'Modify to be the correct slide #'

'You can hardcode the shape by index if you know it, otherwise'
' this method will apply to the FIRST chart object found on the slide'
For i = 1 To sld.Shapes.count
    If sld.Shapes(i).Type = msoChart Then
        Set cht = sld.Shapes(i).Chart
        Exit For
    End If
Next

'use a variable to interact with the Series:'
Set srs = cht.SeriesCollection(1) '<Modify as needed.'

'specify a particular formula for the series:'
'your macro likely changes the chart's source data/formula information'
' so something like this:'    
srs.Formula = "=SERIES(Sheet1!$B$1,Sheet1!$A$2:$A$5,Sheet1!$B$2:$B$5,1)"

'Or you can display the series formula:'
MsgBox srs.Formula

'Or you can toggle the series axis group:'
With srs
If Not .AxisGroup = xlSecondary Then
    .AxisGroup = xlSecondary
Else
    .AxisGroup = xlPrimary
End If

'etc.'
'Basically anything you can do to an Excel chart in VBA, you can do in PPT.'

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:24:54.923

当您将任何内容从 Excel 复制/粘贴到 PowerPoint 时，您将获得一个 OLE 对象。PowerPoint 中显示的是您从 Excel 复制的任何内容的 Windows 图元文件*图片。*您必须激活 Excel 内容（在 PPT 的正常视图中双击它，或为其提供适当的操作设置以使其在幻灯片放映期间激活）。然后微调器也应该在启动的 Excel 实例中工作。

或者您可以在 PPT 中创建另一个微调器并让它运行代码来修改图表（使用 David 的示例代码作为基础）。

# php - 如何在 ajax 请求上显示 CActiveForm::errorSummary()？(Yii)

> ID：15978486
> 
> 赞同：1
> 
> 时间：2013-04-12T18:34:24.653
> 
> 标签：php, yii

On **Post**请求`<?php echo $form->errorSummary($model) ?>`在提交表单后自动出现在页面上并显示表单错误的摘要。如何让它出现在**Ajax**请求中？

## 编辑：

以下是我的视图文件：

```
<div class="form" >
    <?php
    $form = $this->beginWidget('CActiveForm',array(
        'id'=>'change-profile-form',
        'enableAjaxValidation'=>true,
        'enableClientValidation'=>true,
        'action' => Yii::app()->createUrl('upanel/user/CProfile'),
        'method' => 'POST',
        'clientOptions'=>array(
            'validateOnSubmit'=>true,
            'validateOnChange'=>true,
            'validateOnType'=>false,
        ),
    ));
    ?>
    .
    .
    .
    <div class="row">
        <?php
            echo CHtml::ajaxSubmitButton(
                'update',
                Yii::app()->createUrl('upanel/user/CProfile'),
                array(
                    'type'=>'POST',
                    'data'=>"js:$('#change-profile-form').serialize()",
                    'success'=>'callback',
                    'beforeSend'=>'before',
                ),
                array(
                    'id'=>'update-button'.uniqid(),
                    'class'=>'submit-button',
                )
            );
        ?>
    </div>
    <?php $this->endWidget() ?>

</div> <!-- End The Profile Form  -->
<?php echo $form->errorSummary($model,'Please solve these errors:') ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:32:00.917

clientOptions 也可以接受：

```
'afterValidate' => 'js:function(form, data, hasError){ 
     if(hasError){
         // do something with: data
     }
 }' 
```

我所做的是这样的[http://phpfiddle.org/lite/code/4j3-6rx](http://phpfiddle.org/lite/code/4j3-6rx)然后在服务器端，我只返回一个在 ajax 成功回调上解析的 json 消息，非常简单。

# java - 来自 ObjectInputStream 的 IOException 和 NullPointerException

> ID：15978492
> 
> 赞同：1
> 
> 时间：2013-04-12T18:35:01.380
> 
> 标签：java

我正在为分配编写一个小程序，其中一部分涉及使用 ObjectInputStream 从文件中读取。我遇到了一堵砖墙，因为我在尝试关闭 finally 块中的文件以及 NullPointerException 时不断收到错误，但我不明白为什么。任何帮助深表感谢！我已经检查过了，文件路径是正确的，所以它能够找到文件。

示例文件：你好 || 苹果、巴西莓、香蕉|| 购物|| 0.0005 || 是的

```
 public Disease[] readInCancers() {
    Disease[] cancerList = null;
    try {
        FileInputStream fis = new FileInputStream(myData);
        BufferedInputStream bis = new BufferedInputStream(fis);
        ois = new ObjectInputStream(bis);
        while(true) {
            Disease disease = null;
            try {
                disease = (Disease)ois.readObject();
            } catch (EOFException eofx) {
                break;
            }
            if (cancerList == null || cancerList.length == 0) {
                    cancerList = new Disease[1];
                    cancerList[0] = disease;
                } else {
                    Disease[] newList = new Disease[cancerList.length + 1];
                    System.arraycopy(cancerList, 0, newList, 0, cancerList.length);
                    newList[cancerList.length] = disease;
                    cancerList = newList;
                }
        }
    } catch (FileNotFoundException fnfx) {
        JOptionPane.showMessageDialog(null, "File could not be found");
    } catch (IOException iox) {
        JOptionPane.showMessageDialog(null, "Problem with reading from file");
    } catch (ClassNotFoundException cnfx) {
        JOptionPane.showMessageDialog(null, "Class could not be found");
    } catch (NullPointerException npx) {
        System.out.println("blah");
     } finally {
        try {
            ois.close();
        } catch (IOException iox) {
            JOptionPane.showMessageDialog(null, "Problem with closing file");
        }
    }
    return cancerList;
} 
```

当我运行该程序时，它会在 ois.close() 处提供 NullPointerException 以及产生弹出“从文件读取问题”的 IOException。

我还尝试更改文件本身的结构，替换了 || （分隔符）带有一个单词甚至空格，但没有任何变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:38:31.343

您`FileInputStream`正在引发异常（我猜测文件权限不正确，但您必须进一步研究）；这发生在初始化之前`ObjectInputStream`，因此`ois`当您到达 finally 块时仍然为空，这会导致空指针异常。`close`出于这个原因，通过空指针检查在最终块中的语句之前通常是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:50:32.500

在这种情况下，当使用`ObjectInputStream`输入数据时，需要采用可以读​​入序列化对象的字节格式`Disease`。如果格式不是预期的格式，`StreamCorruptedException`将抛出 a。如果您要手动更改文本文件，则可能会引发此异常，但不会显示确切的消息，因为您正在显示从文件消息*读取的一般问题。*

显示堆栈跟踪将有所帮助

```
iox.printStackTrace(); 
```

确保您将对象正确写入文件。或者，您可以使用基于文本的文件，并用于`Printwriter`写入、`Scanner`读取。您可以使用`||`for 作为`Scanner`分隔符。

# html - 将 div 置于包含 div 的顶部和底部

> ID：15978495
> 
> 赞同：1
> 
> 时间：2013-04-12T18:35:11.497
> 
> 标签：html, css, position, css-float

我有一个容器 div，它的内容有时需要用`class="top"`和分割`class="bottom"`。显然没有`float:top`or `float:bottom`，那么单独使用 html/css 实现这一目标的最佳方法是什么？

前任：

```
<div class="content">
        <div class="left">
            <a href="#"><img src="img/home.jpg" alt="salon home"></a>
        </div><!-- end left -->
        <div class="center">
            <a href="#" class="top"><img src="img/about.jpg" alt="about salon"></a>
            <a href="#" class="bottom"><img src="img/services.jpg" alt="salon service"></a>
        </div><!-- end center -->
        <div class="right">
            <a href="#" class="top"><img src="img/products.jpg" alt="salon products"></a>
            <a href="#" class="bottom"><img src="img/contact.jpg" alt="contact salon"></a>
        </div><!-- end right -->
    </div><!-- end content -->

#container .content {
    margin-top: 115px;
}

#container .content .left {
    float: left;
    width: 307px;
}

#container .content .center {
    float: left;
    padding-left: 19px;
    width: 307px;
}

#container .content .right {
    float: right;
    width: 307px;
} 
```

ETA - 小提琴 - [http://jsfiddle.net/FaTxw/2/](http://jsfiddle.net/FaTxw/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:52:25.120

您可以通过几个简单的步骤来做到这一点。

1）给父容器添加相对定位：

```
 #container .content .left,
 #container .content .center,
 #container .content .right { 
    position: relative;
 } 
```

2) 将子元素设置为绝对定位。

```
#container .content .top,
#container .content .bottom {
   position: absolute;
} 
```

3) 将元素设置为顶部和底部位置。

```
#container .content .top {
   top: 0;
}

#container .content .bottom {
   bottom: 0;
} 
```

4）将所有父容器的高度设置为100%

```
html, body, #container, .content, .left, .right, .center {
    height: 100%;
} 
```

5）在容器上设置一个最小高度，这样顶部和底部的孩子就不会重叠。

```
#container {
    min-height: 349px;
} 
```

查看一个工作示例：http: [//jsfiddle.net/FaTxw/3/](http://jsfiddle.net/FaTxw/3/)

# c# - 尝试上传文件时出现 System.UnauthorizedAccessException

> ID：15978499
> 
> 赞同：1
> 
> 时间：2013-04-12T18:35:16.650
> 
> 标签：c#, asp.net

我正在尝试从本地主机中的计算机下载文件。但我不断收到错误

System.UnauthorizedAccessException: Access to the path 'c:\users\zunair\documents\visual studio 2012\Projects\WebApplication2\WebApplication2\Uploads' is denied.

这是我的代码

```
if (FileExt == ".pdf")
{
    Response.ContentType = "Application/pdf";
    Response.AppendHeader("Content-Disposition", "attachment; filename=FileName");
    Response.TransmitFile(Server.MapPath("~/Uploads" + FileName));
    Response.End();
} 
```

我得到错误`Response.TransmitFile(Server.MapPath("~/Uploads" + FileName));`

# sql - 如何将 NULL 默认为零

> ID：15978501
> 
> 赞同：0
> 
> 时间：2013-04-12T18:35:30.643
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures

我正在通过一些计算创建存储过程，并且我想确保我没有遗漏一些简单的东西。

假设我正在查找`SUM()`可能具有 NULL 的列。是否有一个 set 语句可以`NULL`自动转换为零而不必`COALESCE`每次都转换？还是我`NULL`每次都必须手动检查？

我浏览了[MSDN SET](http://msdn.microsoft.com/en-us/library/ms190356.aspx)，但没有看到任何有用的东西。

有一种方法可以`NULL`使用连接，但我看不到任何计算。

例如：

```
SET ANSI_NULLS ON
SET CONCAT_NULL_YIELDS_NULL ON

--Calc
SELECT SUM(CONVERT(decimal(10,2), NULL))
SELECT SUM(CONVERT(decimal(10,2), Coalesce(NULL,0)))

--Concat
SELECT  NULL + ', ' + 'Isaak' AS Name
SELECT COALESCE(NULL + ', ' + 'Isaak','') AS Name
SELECT COALESCE(NULL,'') + ', ' + 'Isaak' AS Name

--Change Concat NULL to OFF
SET ANSI_NULLS ON
SET CONCAT_NULL_YIELDS_NULL OFF

--Calc
SELECT SUM(CONVERT(decimal(10,2), NULL))
SELECT SUM(CONVERT(decimal(10,2), Coalesce(NULL,0)))

--Concat
SELECT  NULL + ', ' + 'Isaak' AS Name
SELECT COALESCE(NULL + ', ' + 'Isaak','') AS Name
SELECT COALESCE(NULL,'') + ', ' + 'Isaak' AS Name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:42:42.657

不，没有神奇的方法可以做到这一点。但是有多种解决方法：

1.  首先停止允许`NULL`s - 添加默认值 0，如果您无法更新 DML 逻辑，则添加触发器（但最好将其作为原始插入/更新的一部分执行）。
2.  将其`COALESCE`放入视图中，然后在查询中引用该视图。
3.  将零（`COALESCE`当然使用）保留到单独的计算列中，并将计算更改为使用计算列而不是原始列。

# python - 上传前未设置格式的 CSV 上传

> ID：15978503
> 
> 赞同：0
> 
> 时间：2013-04-12T18:35:32.953
> 
> 标签：python, django

我正在使用[Django 适配器](http://django-adaptors.readthedocs.org/en/latest/)，它工作得很好，但是，我开始看到 CSV 上传，用户可以在上传后决定数据属于哪一列，而在上传前没有设置格式。

**是否有可能将其构建到 Django 适配器中，如果可以的话，可以为我指明正确的方向吗？**

或者

**有没有可以做到这一点的应用程序？**（我已经搜索过了，没有喜悦）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:38:43.990

您需要从 CSVModel 类继承并扩展/覆盖 get_fields 方法（如果需要，还需要其他方法）。这是声明性类的动态构建实例的常见模式。

[看看这段代码](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/dashboard/catalogue/forms.py)

ProductForm 类，这不完全是你的情况，但要点是一样的。

# sed - 在每行末尾添加文本

> ID：15978504
> 
> 赞同：122
> 
> 时间：2013-04-12T18:35:37.550
> 
> 标签：sed, command-line-interface

我在 Linux 命令行上，我有文件

```
127.0.0.1
128.0.0.0
121.121.33.111 
```

我想

```
127.0.0.1:80
128.0.0.0:80
121.121.33.111:80 
```

我记得我的同事为此使用 sed，但是在阅读 sed 手册后仍然不清楚如何在命令行上执行此操作？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-04-12T18:38:02.383

您可以尝试使用类似的东西：

```
sed -n 's/$/:80/' ips.txt > new-ips.txt 
```

*前提是您的文件格式与您在问题中描述的一样。*

`s///`替换命令匹配（*查找*）文件中每一行的结尾（使用`$`字符），然后附加（*替换*）`:80`到每行的末尾。该`ips.txt`文件是您的输入文件......并且`new-ips.txt`是您新创建的文件（*您更改的最终结果。*）

* * *

此外，如果您有一个 IP 号码列表，碰巧已经附加了端口号（如[Vlad](https://stackoverflow.com/users/1143917/vlad)所述，并且由[aragaer](https://stackoverflow.com/users/390363/aragaer)给出），您可以尝试使用以下内容：

```
sed '/:[0-9]*$/ ! s/$/:80/' ips.txt > new-ips.txt 
```

因此，例如，如果您的输入文件看起来像这样*（注意`:80`）*：

```
127.0.0.1
128.0.0.0:80
121.121.33.111 
```

最终结果将如下所示：

```
127.0.0.1:80
128.0.0.0:80
121.121.33.111:80 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2018-08-30T17:17:52.147

# *sed*命令的简洁版本：

```
sed -i s/$/:80/ file.txt 
```

# 解释：

*   `sed` **串流**编辑**器**_****
***   `-i` **i** n-place（就地编辑文件）*   `s` **替换**命令*   `/replacement_from_reg_exp/replacement_to_text/`陈述*   `$`匹配行尾（*replacement_from_reg_exp*）*   `:80`您要在每行末尾添加的文本 ( *replacement_to_text* )*   `file.txt`文件名**

 **# 在不修改原始文件的情况下如何实现？

如果您想保持原始文件不变并将结果保存在另一个文件中，则放弃`-i`选项并将重定向 ( `>`) 添加到另一个文件：

```
sed s/$/:80/ file.txt > another_file.txt 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-12-20T09:31:44.887

```
sed 's/.*/&:80/'  abcd.txt >abcde.txt 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-05-25T13:11:26.673

如果您想在每一行的末尾就地（在同一个文件中）添加文本，您可以使用`-i`参数，例如：

```
sed -i'.bak' 's/$/:80/' foo.txt 
```

但是`-i`，选项是非标准 Unix 扩展，可能并非在所有操作系统上都可用。

所以你可以考虑使用[`ex`](https://en.wikipedia.org/wiki/Ex_(text_editor))（相当于`vi -e`/ `vim -e`）：

```
ex +"%s/$/:80/g" -cwq foo.txt 
```

这将添加`:80`到每一行，但有时它可以将其附加到空白行。

所以更好的方法是检查该行是否实际包含任何数字，然后附加它，例如：

```
ex  +"g/[0-9]/s/$/:80/g" -cwq foo.txt 
```

如果文件具有更复杂的格式，请考虑使用正确的正则表达式，而不是`[0-9]`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-11T08:39:32.060

1.  您也可以使用反向引用技术来实现这一点

    ```
    sed -i.bak 's/\(.*\)/\1:80/' foo.txt 
    ```

2.  您也可以像这样使用 awk

    ```
    awk '{print $0":80"}' foo.txt > tmp && mv tmp foo.txt 
    ```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-06T00:21:19.033

使用文本编辑器检查`^M`每行末尾的（control-M 或回车）。您需要先删除它们，然后在行尾附加附加文本。

```
sed -i 's|^M||g' ips.txt
sed -i 's|$|:80|g' ips.txt 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-07T03:49:52.070

sed -i 's/$/,/g' foo.txt

我经常这样做是为了在输出的末尾添加一个逗号，这样我就可以轻松地将其复制并粘贴到 Python（或您最喜欢的语言）数组中**

# node.js - Socket.io 在 Firefox 中回退到 xhr

> ID：15978506
> 
> 赞同：4
> 
> 时间：2013-04-12T18:35:45.330
> 
> 标签：node.js, websocket, socket.io

我的应用程序使用 Node.js 和 Socket.io。它工作正常，但是当我断开与互联网的连接时，Socket.io 回退到 xhr 但只是在 Firefox 上，在 chrome 上它工作正常。

这是我的调试消息：

```
info  - socket.io started
Express server listening on port 3000 development
GET /connexion 200 38ms - 882
POST /connexion 302 5ms - 64
GET /jeu 200 8ms - 583
    debug - client authorized
    info  - handshake authorized UTHMxCJEKx-DC3sSf57M
    debug - setting request GET /socket.io/1/xhr-polling/UTHMxCJEKx-DC3sSf57M?t=1365791206086
    debug - setting poll timeout
    debug - client authorized for 
    debug - clearing poll timeout
    debug - xhr-polling writing 1::
    debug - set close timeout for client UTHMxCJEKx-DC3sSf57M
    debug - xhr-polling received data packet 1::/jeu/Jeu1
    s:B2ZSTca4rYyle+ooJCY5/Z+d.xuW1XrVrU+IG0UpLvs5q88hm6Nr83SOwr7fpOjfPhbM
    B2ZSTca4rYyle+ooJCY5/Z+d
    debug - client authorized for /jeu/Jeu1
    debug - setting request GET /socket.io/1/xhr-polling/UTHMxCJEKx-DC3sSf57M?t=1365791206116
    debug - setting poll timeout
    debug - clearing poll timeout
    debug - xhr-polling writing 1::/jeu/Jeu1
    debug - set close timeout for client UTHMxCJEKx-DC3sSf57M
    debug - discarding transport
    debug - cleared close timeout for client UTHMxCJEKx-DC3sSf57M
    newPlayer: hamou92
    debug - broadcasting packet
    debug - setting request GET /socket.io/1/xhr-polling/UTHMxCJEKx-DC3sSf57M?t=1365791206203
    debug - setting poll timeout
    debug - discarding transport
    debug - cleared close timeout for client UTHMxCJEKx-DC3sSf57M 
```

这是 Firebug 向我展示的：

```
Firefox ne peut établir de connexion avec le serveur à l'adresse ws://localhost:3000/socket.io/1/websocket/_uQklvPYeYn-_BNg-WDa.

this.websocket = new Socket(this.prepareUrl() + query);          socket.io.js (ligne 2371) 
```

# java - 为什么这个 ArrayList 不适用于 Wave 文件？（爪哇）

> ID：15978510
> 
> 赞同：-2
> 
> 时间：2013-04-12T18:36:05.250
> 
> 标签：java, arraylist, wav

我正在尝试创建代码以将 wav 文件放入数组列表中，然后让数组列表播放文件。为什么这段代码不起作用？谢谢。

```
public class trackList {

    public void tracklist(){

        ArrayList<String> songs = new ArrayList();
        songs.add("c:\\01.wav");
        songs.add("c:\\02.wav");

        byte[] buffer = new byte[4096];
        for(int x = 0; x < songs.size(); x++){

          try{

                AudioInputStream ais = AudioSystem.getAudioInputStream(songs(x));
                AudioFormat format = ais.getFormat();
                SourceDataLine line = AudioSystem.getSourceDataLine(format);
                line.open(format);
                line.start();

          while (ais.available() > 0) {

                int len = ais.read(buffer);
                line.write(buffer, 0, len);

               }

            line.drain(); 
            line.close();

                } 
          catch (Exception e) {

                e.printStackTrace();

                }
        }                       
    } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T18:41:38.137

不是Java专家，但可能是这样的：

```
AudioInputStream ais = AudioSystem.getAudioInputStream(songs(x)); 
```

一定是

```
AudioInputStream ais = AudioSystem.getAudioInputStream(songs.get(x)); 
```

# windows-phone-7 - 具有多个用户控件（和 ViewModel）的页面

> ID：15978512
> 
> 赞同：0
> 
> 时间：2013-04-12T18:36:11.890
> 
> 标签：windows-phone-7, mvvm-light

所以，我有几个页面，每个页面上有几个用户控件。其中一个 UC 出现在每个页面上，并在其构造函数中从 DataService（用作信息存储）获取信息。

在页面之间切换时，UC 的 ViewModel 构造函数不会被调用，因此它不会从 DataService 更新信息。它在创建第一页期间被调用一次。

有任何想法吗？我应该只创建一个方法，然后从代码隐藏中调用它吗？或者我可以以某种方式将视图模型的字段绑定到 DataService？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:30:40.343

好的，答案很简单。求解 SimpleIoc 时只需要传递新参数。

```
SimpleIoc.Default.GetInstance<MainViewModel>((uidHolder++).ToString()); 
```

参考（关于 mvvm-light 的 ioc 的一些信息）：[如何使用 MVVMLight SimpleIoc？](https://stackoverflow.com/questions/13795596/best-tutorial-to-learn-mvvmlight-simpleioc-use)

# cakephp-2.0 - 使用 CakePHP 保存关联模型

> ID：15978513
> 
> 赞同：0
> 
> 时间：2013-04-12T18:36:11.880
> 
> 标签：cakephp-2.0

我正在尝试在[http://book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html)以“保存相关模型数据（hasOne，hasMany ， 属于）”。但是，当我调用 unset 时，我收到以下错误消息：

重载属性 AppModel::$MealContent 的间接修改无效 [APP\Controller\MealsController.php，第 15 行] 尝试修改非对象的属性 [APP\Controller\MealsController.php，第 15 行]

自然，数据也不会被保存。

如您所见，我的应用程序没有公司或帐户。相反，我有 Meals 和 MealContents，但关系似乎已建立相同。显然，虽然*某处*存在问题，但这里有一些代码。

膳食.php：

```
class Meals extends Entry {

    public $hasMany = 'MealContents';
    public $validate = array(
        'Timestamp' => array(
            'validDate' => array(
                'rule' => array('garbageDateChecker'),
                'required' => true,
                'message' => 'The date could not be understood.'),
            'noTimeTravel' => array(
                'rule' => array('noTimeTravel'),
                'required' => true,
                'message' => 'You cannot enter times in the future.')
        )
    );

} 
```

膳食内容.php：

```
class MealContents extends Entry {

    public $belongsTo = 'Meals';
    public $validate = array(
        'Meals_ID' => array(
            'notEmpty' => array(
                'rule' => 'notEmpty',
                'required' => true,
                'message' => 'This field cannot be blank')
        ),
        'Item_ID' => array(
            'notEmpty' => array(
                'rule' => 'notEmpty',
                'required' => true,
                'message' => 'This field cannot be blank')
        )
    );

} 
```

最后，控制器的 index() 函数：

```
public function index() {
        $this->set('title_for_layout', "Food Log");
        if ($this->request->is('post')) {
            $this->Meal->create();

            unset($this->Meal->MealContent->validate['Meals_ID']);
            if ($this->Meal->saveAssociated($this->request->data)) {
                $this->Session->setFlash('The meal was logged.');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash("Couldn't save the meal.");
            }
        }
    } 
```

入口.php

```
abstract class Entry extends AppModel {

    public function garbageDateChecker($dateToCheck) {
        date_default_timezone_set("America/Tijuana");
        $result = TRUE;

        try {
            new DateTime($dateToCheck['Timestamp']);
        } catch (Exception $e) {
            $result = FALSE;
        }

        return $result;
    }

    public function noTimeTravel($dateToCheck) {
        date_default_timezone_set("America/Tijuana");
        $result = TRUE;

        $objectifiedDateToCheck = new DateTime($dateToCheck['Timestamp']);
        $currentTime = new DateTime("now");

        if ($objectifiedDateToCheck > $currentTime) {
            $result = FALSE;
        }

        return $result;
    }

} 
```

我很确定 save() 失败不是由于验证，因为即使我注释掉验证规则和 unset() 行，数据也没有保存。

很容易将其归咎于不良数据或错误的观点。但是，数据看起来不错：

```
$this->request->data
--MealContents
---[0]
-----[Food_Item_ID] = "0"
--Meals
---[Comments] = ""
---[Timestamp]
-----[day] = "12"
-----[hour] = ... 
```

当我阅读 CakePHP 的书时，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:57:35.030

在所有模型类声明中，您应该扩展 AppModel 类而不是“Entry”。此外，您需要将模型名称更改为单数名词。吃饭代替饭菜。

```
class Meal extends AppModel {

    //your model's code

}

class MealContent extends AppModel {

    //your model's code

} 
```

在您的控制器中，如果您想跳过 saveAssociated 调用的验证，您可以传递一个选项数组，其中元素“validate”设置为 False 作为第二个参数。你不应该像这样在你的模型上使用 unset ，因为它会影响你应用程序的其余部分。

```
$this->Meal->saveAssociated($this->request->data, array("validate" => false)); 
```

# mysql - 在 where 子句中使用子查询结果

> ID：15978515
> 
> 赞同：0
> 
> 时间：2013-04-12T18:36:27.577
> 
> 标签：mysql, sql, subquery

```
select distinct (`hostname`)  as  h from `drpl_comment` c where 
(select count(cid) from  `drpl_comment` where  hostname == h ) > 0 
```

如果主机名值在表中出现多次，我的意图是从 drpl_comment 表中获取所有主机名。

你能帮我建立这个查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:38:26.540

你可以简单地使用`GROUP BY`和`HAVING`

```
SELECT  hostname
FROM    drpl_comment
GROUP   BY hostName
HAVING  COUNT(cid) > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:42:52.680

尝试这个

```
SELECT DISTINCT `hostname` AS h, COUNT(`hostname`) AS count_h 
FROM `drpl_comment`
GROUP BY `hostname`
HAVING count_h > 2 
```

`GROUP BY ... HAVING`正好解决这个问题:)

## 更新：

正如***JW***所提到的，在这种情况下，使用`DISTINCT`不会影响查询的结果。所以它可以从查询中删除。

# ektron - 任何可以让我选择页面布局的 smartform 控件？

> ID：15978517
> 
> 赞同：0
> 
> 时间：2013-04-12T18:36:38.123
> 
> 标签：ektron

在智能表单控件中，我的选择是链接选择器和资源选择器。该链接仅允许我手动输入或从库中选择。资源选择器只允许我选择内容块，但没有列出页面布局页面。

是否有任何智能表单控件可以让我选择页面布局页面？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:32:53.157

您可以将页面布局设为模板，然后将其设为智能表单的模板。另一个选项是反向链接，并使用页面布局上的资源选择器链接到智能表单（假设您的关系是 1 对 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:08:52.637

Bill Cava 在 Ektron 想出了答案。渲染中有一个过滤器需要修改。

[http://developer.ektron.com/Forums/?v=t&t=880](http://developer.ektron.com/Forums/?v=t&t=880)

# perl - perl：分配 array = smth 它将返回 false

> ID：15978520
> 
> 赞同：1
> 
> 时间：2013-04-12T18:36:52.243
> 
> 标签：perl

我有以下声明：

```
my $iii=0;
while (my @row = sub_undef()) { print $iii++."\n"; }

sub sub_undef {

  if ($error) {
    return "something that will end the while loop";
  } else {
    return 1;
  }
} 
```

在 sub_undef() 中，当我需要返回将结束 while 循环的内容时，我可能会遇到一个案例（错误）。任何想法如何做到这一点？

——德米特里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:48:03.563

在布尔上下文中，空数组为 false ^(1 ：)

```
return () if $error; 
```

[`return`](http://perldoc.perl.org/functions/return.html)方便的是，如果您不指定参数，这就是默认设置，因此您甚至可以只写：

```
return if $error; 
```

* * *

^(1）)这里的一个微妙之处是，在标量上下文中，空*数组*的计算结果为 0（即它的长度），而空*列表*的计算结果为`undef`：

```
@a = (); $b = @a;  # now $b is 0
$b = ();           # now $b is undef 
```

但是，由于 0 和`undef`在布尔上下文中都是假的，所以这里的区别并不重要。有关详细信息，请参阅[perldata](http://perldoc.perl.org/perldata.html)。

* * *

**编辑：**如果您需要将错误条件与仅仅用完数据区分开来，最好使用for errors[引发异常](https://stackoverflow.com/questions/4006267/what-is-the-best-way-to-handle-exceptions-in-perl)[`die`](http://perldoc.perl.org/functions/die.html)并返回一个空列表作为数据结束。然后你的循环看起来像这样：

```
eval {
    while (my @row = sub_undef()) { 
        # do something with @row
    }
};
if ($@) {
    # oops, we got an error, handle it
} 
```

或者，使用[Try::Tiny](http://search.cpan.org/perldoc?Try::Tiny)：

```
try {
    while (my @row = sub_undef()) { 
        # do something with @row
    }
} catch {
    # oops, we got an error, handle it
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T18:43:00.640

有几种方法：

解决方案1：如果您不需要返回一行，只需返回一个假标量：

```
sub sub_undef {
    # xxx
    return $error; # Already a true/false scalar
}
while (sub_undef()) { do_stuff(); } 
```

* * *

解决方案2：返回一个arrayref而不是一个数组，如果出错则返回false（undef）

```
sub sub_undef {
    # xxx
    return $error ? undef : $rowArrayRef;
}
while (my $row = sub_undef()) { do_stuff(@$row); } 
```

* * *

解决方案 3：返回一个元组 ($status, $rowArrayRef)

```
sub sub_undef {
    # xxx
    return ($error, $rowArrayRef);
}
while (my ($error, $row) = sub_undef()) { last if $error; do_stuff(@$row); } 
```

* * *

解决方案 4：仅当行不能为空时才有效，除非根据您的业务案例发生错误！

```
sub sub_undef {
    # xxx
    return $error ? () : @row;
}
while (my @row = sub_undef()) { do_stuff(@row); } 
```

* * *

解决方案 5：使用异常处理错误 ( `Try::Tiny`)

```
# No example worth bothering that won't be covered by Synopsis of the module 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T20:16:06.967

`return 1`似乎表明你真的想返回一个标量。如果您按如下方式编写循环

```
while (my ($value) = iter()) {
   ...
} 
```

那么你可以发出三种状态的信号：

*   `return $value;`成功返回。由于 中的括号`my ($value)`，您甚至可以安全地返回一些 false 或 undefined 而不会导致循环退出。

*   `return;`当您的迭代器已用尽时。这将导致执行在循环后继续。

*   `die "message"`发出错误信号。这将导致程序结束，除非`eval BLOCK`用于捕获异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T18:50:32.567

空列表的分配将评估为假。

```
 if ($error) {
    return ();
  } else {
    return 1;
  } 
```

# c# - 如何将 IFactory 绑定到具体实现？

> ID：15978532
> 
> 赞同：4
> 
> 时间：2013-04-12T18:37:45.973
> 
> 标签：c#, ninject

我需要一个工厂类在它返回一个实例之前做一些工作，所以我有一个这样的工厂方法：

```
public Foo Create(string bar, IEnumerable<SomeMetaData> metaData)
{
    var meta = new ObservableCollection<AnotherType>(
                        metaData.Select(e => new AnotherType { ... }).ToList());

    return Create(new ConstructorArgument("bar", bar),
                  new ConstructorArgument("metaData", meta));
} 
```

具体工厂类派生自一个基础工厂，它省去了我的实际布线，以防你想知道它们`IResolutionRoot`去了哪里：

```
public abstract class FactoryBase<T> where T : class
{
    private IResolutionRoot _resolutionRoot;
    protected FactoryBase(IResolutionRoot resolutionRoot)
    {
        _resolutionRoot = resolutionRoot;
    }

    protected T Create(params IParameter[] parameters)
    {
        return _resolutionRoot.Get<T>(parameters);
    }
} 
```

（如果有人想对此发表评论，我对 CodeReview 有疑问：[https ://codereview.stackexchange.com/questions/25038/are-there-side-effects-to-having-a-generic-ninject -工厂](https://codereview.stackexchange.com/questions/25038/are-there-side-effects-to-having-a-generic-ninject-factory)）

问题是在 NinjectModule 中，我不知道如何告诉 Ninject 使用该特定的具体`FooFactory`类：

```
Bind<IFooFactory>().ToFactory(); // uses an abstract factory that doesn't do what I need
Bind<IFooFactory>().ToFactory<FooFactory>(); // doesn't build 
```

我相信我需要的是这样的：

```
Bind<IFooFactory>().ToFactory<FooFactory>(Func<FooFactoryInstanceProvider>); 
```

我需要做什么才能提供这个`InstanceProvider`？可能这只是我的误解，`Func<T>`但我发现[http://www.planetgeek.ch/2011/12/31/ninject-extensions-factory-introduction/](http://www.planetgeek.ch/2011/12/31/ninject-extensions-factory-introduction/)对此过于模糊。

我想出了这个：

```
public class FooFactoryInstanceProvider : StandardInstanceProvider
{
    protected override Type GetType(MethodInfo methodInfo, object[] arguments)
    {
        return typeof(FooFactory);
    }
} 
```

到目前为止，一切都很好？下一步是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:58:09.213

如果您已经努力进行自己的实现，为什么不以*非工厂*`FooFactory`方式绑定到它：

 *代替：

```
Bind<IFooFactory>().ToFactory<FooFactory>(); 
```

利用：

```
Bind<IFooFactory>().To<FooFactory>(); 
```

如果您正在创建自己的工厂实现，那么究竟是什么驱使您需要使用`ToFactory()`Ninject Factory Extensions 中的方法？

**编辑 1 - 将工厂扩展与自定义实例提供程序一起使用**

这样，您将解决所需的逻辑放在`Foo`自定义实例提供程序中。如果您可以获得与实现名称相匹配的逻辑`Foo`，那么您就在做生意。

```
public class BlueFiftyTwoFoo : Foo { }

Bind<IFooFactory>().ToFactory(() => new FooFactoryInstanceProvider()); 
```

并且自定义实例提供程序`Foo`根据您的 IFooFactory 的 `Create() 方法参数确定您想要的实现的名称，如下所示：

```
public class FooFactoryInstanceProvider : StandardInstanceProvider
{
    protected override string GetName(MethodInfo methodInfo, object[] arguments)
    {
        // harvest the 1st factory method arg, cast as appropriate 
        string fooParamOne = (string)arguments[0];  // ex. "Blue"

        // harvest the 2nd factory method arg, cast as appropriate 
        string fooParamTwo = (string)arguments[1];  // ex. "FiftyTwo"

        // manipulate the params to come up with the **Name** of the 
        //  IFoo implementation you want
        var fooName = GetFooName(fooParamOne, fooParamTwo);

        return fooName; // ex. "BlueFiftyTwoFoo"
    }

    protected override ConstructorArgument[] GetConstructorArguments(MethodInfo methodInfo, object[] arguments)
    {
        // skip the number of params you're using above to come up with the implementation name
        return base.GetConstructorArguments(methodInfo, arguments).Skip(2).ToArray();
    }

    private string GetFooName(string fooParamOne, string fooParamTwo)
    {
        // do that voodoo that you do
        return fooParamOne + fooParamTwo + "Foo";
    }
} 
```*

# sed - grep / sed：当没有匹配项时如何打印 *something*

> ID：15978533
> 
> 赞同：3
> 
> 时间：2013-04-12T18:37:53.550
> 
> 标签：sed, awk, grep

谢谢阅读。

我有一个包含一些简单用户信息的纯文本文件

问题是，有时其中一件物品会丢失。

请注意 Norman 和 Reggie 如何显示电子邮件地址，但 Missy 没有：

```
Name: Norman Normalrecord
Email: norman@ooga.com
Addr: 123 Main street

Name: Missy Missington
Addr: 789 Back street

Name: Reggie Regularrecord
Email: reggie@booga.com
Addr: 456 Middle street 
```

我想 grep / sed 并说“如果找不到电子邮件地址，请用文本 missing_email_addr 替换”，所以我得到了这个结果：

```
Norman Normalrecord
norman@ooga.com
123 main street

Missy Missington
MISSING_EMAIL_ADDR
789 back street

Reggie Regularrecord
reggie@booga.com
456 middle street 
```

问题是，在我所有的实验中，当什么都没有找到时，grep / sed 绝对不会产生任何东西，所以我什至不能第二次通过 global-replace。

我梦想的是（显然是伪grep），当搜索没有找到任何东西时提供打印的内容：

```
grep /Name:/MISSING_NAME/email:/MISSING_EMAIL_ADDR/Addr:/MISSING_STREET_ADDR/ 
```

有没有办法做这样的事情？再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:45:40.447

这是一个开始。它将丢失的电子邮件行替换为“电子邮件：不适用”。

```
awk -v RS='\n\n' -v FS='\n' -v OFS='\n' \
    '{ if (!$3) $3 = "Email: N/A"; print; print "" }' users.txt 
```

输出：

```
Name: Norman Normalrecord
Email: norman@ooga.com
Addr: 123 Main street

Name: Missy Missington
Addr: 789 Back street
Email: N/A

Name: Reggie Regularrecord
Email: reggie@booga.com
Addr: 456 Middle street 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:13:52.200

将 GNU awk 用于 gensub()：

```
$ cat tst.awk
BEGIN { RS=""; ORS="\n\n"; FS=OFS="\n" }
NF<3  { $3=$2; $2="Email: MISSING_EMAIL_ADDR" }
{ print gensub(/(^|\n)[^:]+:[[:space:]]*/,"\\1","g") }

$ gawk -f tst.awk file
Norman Normalrecord
norman@ooga.com
123 Main street

Missy Missington
MISSING_EMAIL_ADDR
789 Back street

Reggie Regularrecord
reggie@booga.com
456 Middle street 
```

您可以在任何 awk 中使用 sub(/^..) 然后 gsub(/\n...) 而不是 gensub(/(^|\n)...) 来执行相同的操作。

如果有用，请识别任何缺失的字段并按照字段在输入中使用的顺序为其提供“缺失”指示，而无需预先明确命名任何字段（假设每个字段至少出现在一个记录）将是：

```
$ cat tst.awk
BEGIN { RS=""; FS=OFS="\n" }
{
   for (fldNr=1; fldNr<=NF; fldNr++) {

      split($fldNr,nameVal,/:[[:space:]]*/)

      name = nameVal[1]
      val  = nameVal[2]

      rec[NR,name] = val

      if (!seen[name]++) {
         for (nameNr=++numNames; nameNr>fldNr; nameNr--) {
            names[nameNr] = names[nameNr-1]
         }
         names[nameNr] = name
      }

   }

}

END {
   for (recNr=1; recNr<=NR; recNr++) {

      for (nameNr=1; nameNr<=numNames; nameNr++) {

         name = names[nameNr]
         key  = recNr SUBSEP name

         if (key in rec) {
            print rec[key]
         }
         else {
            print "MISSING_" toupper(name)
         }
      }

      print ""

   }
}
$
$ cat file
Name: Norman Normalrecord
Email: norman@ooga.com
Addr: 123 Main street

Name: Missy Missington
Addr: 789 Back street

Name: Reggie Regularrecord
Email: reggie@booga.com
Addr: 456 Middle street
Whatever: Some useful info
$
$ awk -f tst.awk file
Norman Normalrecord
norman@ooga.com
123 Main street
MISSING_WHATEVER

Missy Missington
MISSING_EMAIL
789 Back street
MISSING_WHATEVER

Reggie Regularrecord
reggie@booga.com
456 Middle street
Some useful info 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T01:05:25.440

这可能对您有用（GNU sed）：

```
sed '/^Name: /!b;:a;$!N;/\nAddr: /!ba;/\nEmail: /!s/\n/&Email: MISSING_EMAIL_ADDR&/' file 
```

如果要删除标签：

```
sed -r '/^Name: /!b;:a;$!N;/\nAddr: /!ba;/\nEmail: /!s/\n/&Email: MISSING_EMAIL_ADDR&/;s/(Name|Email|Addr): //g' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:29:20.493

这是一个`sed`似乎可以实现您“梦想”的脚本（它假设条目用空行分隔）：

```
$ cat s.sed
# collect the lines from one entry in the pattern space
# removing the empty line for consistency
:a; $!{N;/\n$/!ba}; s/\n$// 
# make substitutions
/Name:/!s/^/MISSING_NAME\n/
/Email:/!s/\n/\nMISSING_EMAIL_ADDR\n/
/Addr:/!s/$/\nMISSING_STREET_ADDR/
# add an empty line back
s/$/\n/p 
```

使用您的数据：

```
$ sed -nf s.sed info.txt 
Name: Norman Normalrecord
Email: norman@ooga.com
Addr: 123 Main street

Name: Missy Missington
MISSING_EMAIL_ADDR
Addr: 789 Back street

Name: Reggie Regularrecord
Email: reggie@booga.com
Addr: 456 Middle street 
```

另一个演示：

```
$ cat info_ext.txt 
Email: norman@ooga.com
Addr: 123 Main street

Name: Missy Missington
Addr: 789 Back street

Name: Reggie Regularrecord
Email: reggie@booga.com

$ sed -nf s.sed info_ext.txt 
MISSING_NAME
Email: norman@ooga.com
Addr: 123 Main street

Name: Missy Missington
MISSING_EMAIL_ADDR
Addr: 789 Back street

Name: Reggie Regularrecord
Email: reggie@booga.com
MISSING_STREET_ADDR 
```

# javascript - 显示“不支持”浏览器消息的最佳方式

> ID：15978538
> 
> 赞同：1
> 
> 时间：2013-04-12T18:38:09.287
> 
> 标签：javascript, browser, cross-browser

我们正在开发一个仅支持“现代”浏览器（基本上是 IE9 及更高版本，以及具有大致相同数量的现代功能的任何其他浏览器）的 Web 应用程序。

我们的网络应用程序也可以在平板电脑和智能手机等移动设备上运行。

由于这是一个 Web 应用程序（与普通网站相反），我们可以接受一些用户被冷落到一些依赖现代功能的高级功能（即旧版浏览器）。

但是，我们希望至少显示一条消息让他们知道。

我们希望基本上维护两个列表：“支持的浏览器”和“不支持的浏览器”，以及第三个隐式列表“不支持的浏览器”（即，两者都不支持的浏览器）。

*   如果浏览器在支持列表中，我们不会显示任何内容。
*   如果它在“不支持”列表中，它将始终显示一条消息，上面写着“此浏览器不支持，请升级等等”。
*   如果浏览器不在其中，它会显示一条消息（几乎可以永久关闭），上面写着“此浏览器未直接针对我们的网站进行测试，某些功能可能无法按预期运行。如果您遇到任何问题，请报告他们等等等等”。

建立这个和什么不是问题。但是，我想知道是否有一些站点/服务具有已经完成此类事情的 API，或者至少维护了我可以从中提取的浏览器列表。（如果没有，我只是计划使用手动测试结合来自“我可以使用...”和 Modernizr 等网站的信息）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:45:23.037

在网上浏览我看过的所有资源都说你根本不应该使用浏览器检测。最好测试您知道在您不支持的浏览器中不存在的功能，而不是尝试查看用户代理字符串。

[http://www.quirksmode.org/js/support.html](http://www.quirksmode.org/js/support.html)（如果您想知道查看您页面的浏览器是否支持您想在代码中使用的某些对象，您永远不应该使用浏览器检测。）

[http://api.jquery.com/jQuery.support/](http://api.jquery.com/jQuery.support/)（与其使用 $.browser 来检测当前用户代理并根据正在运行的浏览器更改页面呈现，不如使用特征检测。）

所以我认为你的现代化方法可能是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:43:34.657

你不需要服务。

“支持”列表仅包含您实际测试的浏览器/设备/操作系统组合。

“不支持”列表包含那些您知道不起作用的浏览器/设备/操作系统组合（即，它们未通过您的测试）

正如您所提到的，“可能有效”列表是隐含的。

# java - 将eclipse java项目导出到可执行jar时如何调整相对路径和绝对路径？

> ID：15978542
> 
> 赞同：0
> 
> 时间：2013-04-12T18:38:25.743
> 
> 标签：java, eclipse, jar, relative-path, absolute-path

好的，所以我在 Eclipse 中有一个名为 SWT 的项目。在这个项目的一个类中，有一段代码：

```
public static String rpath = "..\\SWT\\src\\data.txt";
public static String path = new File(rpath).getAbsolutePath(); 
```

如果我在 Eclipse 中编译并运行我的项目，我的程序能够找到 data.txt 并将其用作输入，这是该文件的预期用途。

然后我将这个项目导出为一个可执行的 jar 文件，打开命令提示符并输入 java -jar SWT.jar。程序打开，但在命令提示符下，出现以下错误：

`java.io.FileNotFoundException: C:\Users\Yoshikawa\workspace\SWT\..\data.txt (The system cannot find the file specified)`

**我的问题：**

如何在将代码导出到可执行 jar 之前修改我的代码，以便让我的可执行 jar 能够找到 data.txt？顺便说一句，我的可执行 jar 已经包含 data.txt，但是无法使用上面指定的相对路径来找到它的确切位置，我觉得这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:52:38.450

你的 jar 文件中不会有 src 目录。只有包名和类文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:57:33.203

尝试这个：

```
URL url = ClassLoader.getSystemResource("/data.txt");
File file = new File(url.toURI()); 
```

更多信息[在这里](https://stackoverflow.com/questions/676097/java-resource-as-file)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:59:16.610

您可以将文件 data.txt 放在某个包中，然后使用该包中的类来执行此操作：

```
URL url = ClassFromSamePackageOfFile.class.getResource( "data.txt" );

File f;
try {
  f = new File(url.toURI());
} catch(URISyntaxException e) {
  f = new File(url.getPath());
} 
```

# c# - MVC4：以电子邮件为参数的 url 路由

> ID：15978555
> 
> 赞同：4
> 
> 时间：2013-04-12T18:39:00.557
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我有这个在我的 VS 网络服务器上运行良好的 url

```
http://localhost:4454/cms/account/edituser/email@domain.com (works) 
```

但是当我将此站点发布到 IIS7.5 时，它只会抛出 404。

```
http://dev.test.com/cms/account/edituser/email@domian.com  (does not work) 
```

但是如果我删除电子邮件地址会发生奇怪的事情

```
http://dev.test.com/cms/account/edituser/email (works , no 404) 
```

但是如果我用查询字符串更改我的 url 它工作正常

```
http://dev.test.com/cms/account/edituser?id=email@domain.com (works) 
```

这是我的路线条目

```
routes.MapRoute(
             "Default", // Route name
             "{controller}/{action}/{id}", // URL with parameters
             new { controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
             new[] { "App.NameSpace.Web.Controllers" }
         ); 
```

我注意到的奇怪的事情是，当服务器抛出 404 错误页面时，这是一个标准的 iis 404 页面，而不是我拥有的一个自定义页面。
所以我想知道我的路由映射是否有任何问题，或者 IIS 不喜欢将电子邮件作为参数的 url。但是我的本地开发人员一切正常。
谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T18:43:22.850

尝试对 URL 中的电子邮件地址进行 url 编码。

**编辑**

UrlEncode + Base64？

```
 public static string ToBase64(this string value)
    {
        byte[] bytes = Encoding.UTF8.GetBytes(value);
        return Convert.ToBase64String(bytes);
    }

    public static string FromBase64(this string value)
    {
        byte[] bytes = Convert.FromBase64String(value);
        return Encoding.UTF8.GetString(bytes);
    } 
```

在您看来：

```
<a href="@Url.Action("MyAction", new { Id = email.ToBase64() })">Link</a> 
```

在您的控制器中

```
function ActionResult MyAction(string id){
   id = id.FromBase64();
   //rest of your logic here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T18:44:27.080

`email@domain.com`包含不是路径合法部分的字符（出于充分的理由，它们通常保留用于特殊功能）。您需要引用/url 对这些字符进行编码或将它们传递到查询字符串中。

Scott Hanselman 有一篇关于在 url 中允许“Naughty Things”的[好帖子。](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)

# c++ - 将数组的元素作为对象的常量属性提取到一个临时位置

> ID：15978560
> 
> 赞同：0
> 
> 时间：2013-04-12T18:39:38.137
> 
> 标签：c++, linux

我是一名高级 PHP/Perl 开发人员，也是 C++ 的相对初学者。

我拥有的是一个类的对象数组，其中一个元素又是子类的数组指针（如果我使用正确的术语）。我需要的是一个一个地处理主数组并将其元素提取到一个单独的位置，如果它们满足特定条件（唯一的 Name 属性）。然后输出提取一个及其子数组。然后输出原件。

我想出了各种解决方案，并试图在您的帮助下确定哪个是最好的。

细节。

这些是我提到的 2 个类的头文件的一部分：

```
/// class to define the modificable parameters of the machine
class CMachineParameter {
    public:
        /// Short name: "Cutoff"
        char const *Name;
        /// Longer description: "Cutoff Frequency (0-7f)"
        char const *Description;
        /// recommended >= 0\. If negative, minValue is represented as 0 in the pattern
        int MinValue;
        /// recommended <= 65535\. Basically so that it can be represented in the pattern
        int MaxValue;
        /// flags. (see below)
        int Flags;
        /// default value for params that have MPF_STATE flag set
        int DefValue;
};

///\name CMachineParameter flags
///\{
    /// shows a line with no text nor knob
    int const MPF_NULL = 0;
    /// shows a line with the text in a centered label
    int const MPF_LABEL = 1;
    /// shows a tweakable knob and text
    int const MPF_STATE = 2;
///\}

///\name CFxCallback::CallbackFunc codes
///\{
    int const CBID_GET_WINDOW = 0;
///\}
///\name CMachineInfo::HostEvent codes
///\{
    /// Sent by the host to ask if this plugin uses the auxiliary column. return true or false.
    int const HE_NEEDS_AUX_COLUMN = 0;
///\}

/*////////////////////////////////////////////////////////////////////////*/

/// class defining the machine properties
class CMachineInfo {
    public:
        CMachineInfo(
            short APIVersion, int flags, int numParameters, CMachineParameter const * const * parameters,
            char const * name, char const * shortName, char const * author, char const * command, int numCols
        ) :
            APIVersion(APIVersion), PlugVersion(0), Flags(flags), numParameters(numParameters), Parameters(parameters),
            Name(name), ShortName(shortName), Author(author), Command(command), numCols(numCols)
        {}

        CMachineInfo(
            short APIVersion, short PlugVersion, int flags, int numParameters, CMachineParameter const * const * parameters,
            char const * name, char const * shortName, char const * author, char const * command, int numCols
        ) :
            APIVersion(APIVersion), PlugVersion(PlugVersion), Flags(flags), numParameters(numParameters), Parameters(parameters),
            Name(name), ShortName(shortName), Author(author), Command(command), numCols(numCols)
        {}

        /// API version. Use MI_VERSION
        short const APIVersion;
        /// plug version. Your machine version. Shown in Hexadecimal.
        short const PlugVersion;
        /// Machine flags. Defines the type of machine
        int const Flags;
        /// number of parameters.
        int const numParameters;
        /// a pointer to an array of pointers to parameter infos
        CMachineParameter const * const * const Parameters;
        /// "Name of the machine in listing"
        char const * const Name;
        /// "Name of the machine in machine Display"
        char const * const ShortName;
        /// "Name of author"
        char const * const Author;
        /// "Text to show as custom command (see Command method)"
        char const * const Command;
        /// number of columns to display in the parameters' window
        int numCols;
}; 
```

这是我的代码：

```
for(int i(0) ; i < MAX_MACHINES ; ++i) if(song.machine(i)) {
    if (song.machine(i)->GetDllName() == "") continue;
    Plugin & plug = *((Plugin*)song.machine(i));
    const psycle::plugin_interface::CMachineInfo  psycle_info = plug.GetInfo();

    // Process machine general info: psycle_info.Name, psycle_info.ShortName, psycle_info.Author etc

    if(psycle_info.numParameters > 0 && psycle_info.Parameters) {
        const int n = psycle_info.numParameters;
        for(int i(0) ; i < n; ++i) {
            const psycle::plugin_interface::CMachineParameter & psycle_param(*psycle_info.Parameters[i]);

            // Process machine's parameters: psycle_param.MinValue, psycle_param.MaxValue, psycle_param.DefValue, psycle_param.Flags etc 
```

基本上，我有一个虚拟机列表，每个虚拟机都有它的参数。只有 ShortName 不同（机器红色 1、机器红色 3、机器灰色 4）。我需要按名称输出唯一的机器及其参数（机器红色，机器灰色）。

在 PHP 中，我会简单地创建和数组，如 $original[psycle_info.Name] = array('author'=>psycle_info.Author, 'parameters'=>array(psycle_param.MinValue, psycle_param.MaxValue, psycle_param.DefValue, psycle_param.标志））；

在 C++ 中，我发现我可以使用 std::map 和 std::vector STL 库实现类似的功能。这篇文章展示了一个非常相似的问题以及我从其他来源找到的解决方案： [http ://www.dreamincode.net/forums/topic/67804-c-multidimensional-associative-arrays/](http://www.dreamincode.net/forums/topic/67804-c-multidimensional-associative-arrays/)

但是这样做的一般方法是什么？也许我需要创建 2 个新的非常量元素类？或者可能是一个简单的标准数组并一直使用标准数组循环函数？

非常感谢您的关注！

**PS。**数据示例：

```
0.
Name: 'Red Machine v.098'
ShortName: 'Red Machine 1'
Author: 'Jeremy'
Parameters: 0(Name: 'OSC type', MinValue: 0, MaxValue: 255, DefValue:0), 1(Name: 'CutOff', MinValue: 0, MaxValue: 16555, DefValue: 1000), 2(Name: 'LFO', MinValue: 100, MaxValue: 30555, DefValue: 3000)

1.
Name: 'Red Machine v.098'
ShortName: 'Red Machine 2'
Author: 'Jeremy'
Parameters: 0(Name: 'OSC type', MinValue: 0, MaxValue: 255, DefValue:0), 1(Name: 'CutOff', MinValue: 0, MaxValue: 16555, DefValue: 1000), 2(Name: 'LFO', MinValue: 100, MaxValue: 30555, DefValue: 3000)

2.
Name: 'Yellow Machine v.2.4.5'
ShortName: 'Yellow Machine 1'
Author: 'Anthony'
Parameters: 0(Name: 'OSC 1 wave', MinValue: 0, MaxValue: 255, DefValue: 0), 1(Name: 'OSC 2 Wave', MinValue: 0, MaxValue: 255, DefValue: 0), 2(Name: 'OSC 3 Wave', MinValue: 0, MaxValue: 255, DefValue: 0)

3.
Name: 'Yellow Machine v.2.4.5'
ShortName: 'Yellow Machine 2'
Author: 'Anthony'
Parameters: 0(Name: 'OSC 1 wave', MinValue: 0, MaxValue: 255, DefValue: 0), 1(Name: 'OSC 2 Wave', MinValue: 0, MaxValue: 255, DefValue: 0), 2(Name: 'OSC 3 Wave', MinValue: 0, MaxValue: 255, DefValue: 0) 
```

显然，作为这种情况下的输出，我需要有 2 台独特的机器。

**PS2。**我现在将进一步描述我拥有什么以及需要做什么。

我有一个数组 song.machine(i)

算法：

1.  由于 song.machine(i) 信息有限，循环通过它来获取另一个对象并对其进行操作
2.  在循环中，从每个 song.machine(i) 创建 Plugin（类对象）插件，以便最终可以通过 psycle_info = plug.GetInfo(); 获取对象 CMachineInfo psycle_info；其中包含我们需要输出的所有信息
3.  比较 psycle_info.Name 中的名称。如果已经显示，请跳到下一个。否则，输出数据。

这是我包含的头文件，其中包含我最初显示的 2 个类：http: [//sourceforge.net/p/psycle/code/HEAD/tree/trunk/psycle-plugins/src/psycle/plugin_interface.hpp](http://sourceforge.net/p/psycle/code/HEAD/tree/trunk/psycle-plugins/src/psycle/plugin_interface.hpp)

再次总结一下：由于我只能迭代地访问对象，而且我需要对数据执行一些操作（比如将名称中的所有空格替换为“+”），我想到了创建一个临时数组/类。但可能，创建一个简单的数组 char nameShown[100] 就足够了，我可以在其中存储已经显示的所有名称，并且每次 song.machine(i) 迭代，循环遍历整个 nameShown，如果它包含当前名称，继续下一个。我只是不想每次都循环通过“nameShown”，在 PHP 中我们可以为此使用关联数组：所以我只能检查 ($nameShown[$Name]) 是否存在。就像你说的那样，我也很头疼，我不能复制属性和参数，因为它们是常量！看起来很简单的任务，但对于像我这样的初学者来说太难了。希望我

**PS4。**我刚刚还更新了主题的名称，因此它将包含“不断”提及。

**PS5。**这是基本上应该做我需要的代码：

```
std::string nameShown[100];
bool should_skip = false;
for (int k(0); k < i; k++) {
    if (nameShown[k] == psycle_info.Name) {
        should_skip = true;
    }
}
if(should_skip)  continue;
    nameShown[i] = psycle_info.Name;
std::ostringstream l; l << "Plugin: " << psycle_info.Name; loggers::warning()(l.str()); 
```

所以完整的部分看起来像：

```
std::string nameShown[100];
for(int i(0) ; i < MAX_MACHINES ; ++i) if(song.machine(i)) {
    if (song.machine(i)->GetDllName() == "") continue;
    Plugin & plug = *((Plugin*)song.machine(i));
    const psycle::plugin_interface::CMachineInfo  psycle_info = plug.GetInfo();

    // Process machine general info: psycle_info.Name, psycle_info.ShortName, psycle_info.Author etc
    bool should_skip = false;
    for (int k(0); k < i; k++) {
        if (nameShown[k] == psycle_info.Name) {
            should_skip = true;
        }
    }
    if(should_skip)  continue;
    nameShown[i] = psycle_info.Name;
    std::ostringstream l; l << "Plugin: " << psycle_info.Name; loggers::warning()(l.str());

    if(psycle_info.numParameters > 0 && psycle_info.Parameters) {
        const int n = psycle_info.numParameters;
        for(int i(0) ; i < n; ++i) {
            const psycle::plugin_interface::CMachineParameter & psycle_param(*psycle_info.Parameters[i]);

            // Process machine's parameters: psycle_param.MinValue, psycle_param.MaxValue, psycle_param.DefValue, psycle_param.Flags etc 
```

循环插入前的输出：

```
log:  446322us: W: main: Plugin: Sublime 1.1
log:  446413us: W: main: Plugin: Pooplog FM UltraLight0.68b
log:  446497us: W: main: Plugin: Phantom 1.2
log:  446581us: W: main: Plugin: Pooplog FM UltraLight0.68b
log:  446649us: W: main: Plugin: FeedMe 1.2
log:  446729us: W: main: Plugin: Drum Synth v.2.5
log:  446793us: W: main: Plugin: Sublime 1.1
log:  446876us: W: main: Plugin: Arguru Compressor
log:  446945us: W: main: Plugin: Pooplog Filter 0.06b
log:  447016us: W: main: Plugin: Slicit
log:  447095us: W: main: Plugin: EQ-3
log:  447163us: W: main: Plugin: Arguru Compressor
log:  447231us: W: main: Plugin: Pooplog Filter 0.06b
log:  447294us: W: main: Plugin: Koruz
log:  447361us: W: main: Plugin: Pooplog Filter 0.06b
log:  447425us: W: main: Plugin: EQ-3
log:  447496us: W: main: Plugin: Arguru Compressor
log:  447558us: W: main: Plugin: EQ-3 
```

后：

```
log:  414242us: W: main: Plugin: Sublime 1.1
log:  414331us: W: main: Plugin: Pooplog FM UltraLight0.68b
log:  414415us: W: main: Plugin: Phantom 1.2
log:  414499us: W: main: Plugin: FeedMe 1.2
log:  414560us: W: main: Plugin: Drum Synth v.2.5
log:  414622us: W: main: Plugin: Arguru Compressor
log:  414694us: W: main: Plugin: Pooplog Filter 0.06b
log:  414761us: W: main: Plugin: Slicit
log:  414830us: W: main: Plugin: EQ-3
log:  414897us: W: main: Plugin: Koruz 
```

请注意，在新添加的循环中，我尝试使用 for (int k(0); k < sizeof(nameShown); k++) 对于 PHP 程序员来说这听起来更明显，但即使是在第一首 song.machine (i) 迭代，它自己循环了很多次，然后给出一个段错误，所以我把它改成了“k < i”。

这基本上就是我所需要的。并且只是好奇它是否是正确的做法，因为每次循环通过过滤器数组的不存在元素对我来说听起来很原始且无效。

另一件事是，在我刚刚完成的独特机器的输出之后，我需要输出整个列表。那又怎样，我必须再次创建整个 song.machine(i) 循环，所以为了避免代码重复，我想到了将我需要的值提取到更简单的数据句柄中。在 PHP 中，我会为此使用关联数组。

再次总结一下，首先我需要输出唯一的机器列表，然后为每个列表设置不同的详细信息。

可能，因为解释起来似乎很复杂（但实际上这是一个非常简单的任务，XML 生成）我会坚持什么是有效的，在这种情况下寻找最好的代码可能太奢侈了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:20:57.197

让我们从清楚的开始，你有一个数组 song.machine(i)

算法：

1.  比较 song.machine(i) 中的名称
2.  如果匹配，则将 song.machine(i) 动态转换为 Plugin（类对象）插件
3.  使用它通过 psycle_info = plug.GetInfo(); 创建对象 CMachineInfo psycle_info
4.  处理这些数据/输出/**提取它？**.

让我们从您在类定义中编写的内容开始：

*   **字符***

    一个 char*，声明在堆/堆栈上分配内存。随着对象在应用程序中被销毁，这又必须被删除。您的代码正在创建大量对象，然后您复制它们，将它们传递给另一个对象。未分配指针的内存位置（例如 new [] 运算符/malloc），最终将被任何类型/对象数据覆盖。有时您可能不会遇到分段错误，但在这种情况下您的数据肯定不安全。

    在这种情况下，您应该使用**string**、内置 char* 或 char 数组。他们自行分配和销毁。因此不会出现内存错误，而且 string.compare() 等函数也很容易使用。参考[这里](http://www.cplusplus.com/reference/string/string/compare/)

*   [**复制/赋值运算符**](http://www.cplusplus.com/articles/y8hv0pDG/)

    复制和赋值运算符（例如 CMachineInfo obj1 = CMachineInfo Obj2）作用于类的对象，顾名思义，它们旨在在对象之间传递数据。C++ 默认为您定义运算符。但是当您处理指针时，这种行为很棘手。您可以通过定义您想要的内容来覆盖它（见下文）。

*   **成员**

    在 c++ 类中，成员可以是具有规则的 const（没有变通的整数），**具有 const 成员的对象不能在 COPY AND ASSIGNMENT OPERATOR 中使用**。这很容易理解。您有一个对象 obj1，现在您想将其所有内容复制到另一个对象 obj2（同一个类）。创建 Obj2 时，它的成员被定义为常量，现在您正试图覆盖这些值。编译器不允许这样做。解决此类问题的方法是将此类成员声明为**private**。不允许私人成员直接访问（例如 pyscle_info.Name）。您必须编写一个公共函数，该函数反过来可以向他们提供这种访问权限（例如 pyscle_info.GET_NAME_OF_MACHINE();）

再来看看修改后的代码CMachineParameter：

```
class CMachineParameter{

public:

    CMachineParameter(string Name, string Description, int MinValue, 
                        int MaxValue, int Flags, int DefValue
    ): Name(Name), Description(Description), MinValue(MinValue), MaxValue(MaxValue), Flags(Flags), DefValue(DefValue)
    {}

    /*DeFault Constructor*/
    CMachineParameter(): Name("TEST"), Description("Temp Object")
    {}

    //  Copy Constructor
    CMachineParameter(const CMachineParameter &TO_BE_COPIED)
    : Name(TO_BE_COPIED.Name), Description(TO_BE_COPIED.Description), MinValue(TO_BE_COPIED.MinValue),
      MaxValue(TO_BE_COPIED.MaxValue) ,Flags(TO_BE_COPIED.Flags), DefValue(TO_BE_COPIED.DefValue)
    {}

    //  Assignment Operator
    CMachineParameter & operator=(const CMachineParameter & TO_BE_Assigned)
    {
        if(this != &TO_BE_Assigned)
        {
            Name        = TO_BE_Assigned.Name;
            Description = TO_BE_Assigned.Description;
            MinValue    = TO_BE_Assigned.MinValue;
            MaxValue    = TO_BE_Assigned.MaxValue;
            Flags       = TO_BE_Assigned.Flags;
            DefValue    = TO_BE_Assigned.DefValue;
        }

        return *this;
    }

    void show(void) const;

    /*To access the Private members*/
    std::string GET_NAME(void) const;

    /// recommended >= 0\. If negative, minValue is represented as 0 in the pattern
    int MinValue;
    /// recommended <= 65535\. Basically so that it can be represented in the pattern
    int MaxValue;
    /// flags. (see below)
    int Flags;
    /// default value for params that have MPF_STATE flag set
    int DefValue;

private:
    /*
     * Making them as Private as Assignment and copy operator Cannot be used with Const members.
    */
    /// Short name: "Cutoff"
    string Name;
    /// Longer description: "Cutoff Frequency (0-7f)"
    string Description;
};

void CMachineParameter::show() const
{
    cout << "------------------------------------------------------\n";
    cout << "My Machine " << Name << endl
         << "\t" << Description << endl
         << "\tMinValue:    " << MinValue << endl
         << "\tMaxValue:    " << MaxValue << endl
         << "\tFlags:       " << Flags << endl
         << "\tDefValue:    " << DefValue << endl;
    cout << "------------------------------------------------------\n";
}

std::string CMachineParameter::GET_NAME(void) const
{
    return Name;
} 
```

**对于 CMachineInfo，您需要实现分配/复制运算符。**我实现了一个 CMachineParameter const * 的向量。

```
class CMachineInfo {
    public:
        CMachineInfo(
            short APIVersion, int flags, int numParameters,
            string name, string shortName, string author, string command, int numCols
        ) :
            APIVersion(APIVersion), PlugVersion(0), Flags(flags), numParameters(numParameters),
            Name(name), ShortName(shortName), Author(author), Command(command), numCols(numCols)
        {}

        CMachineInfo(
            short APIVersion, short PlugVersion, int flags, int numParameters,
            string name, string shortName, string author, string command, int numCols
        ) :
            APIVersion(APIVersion), PlugVersion(PlugVersion), Flags(flags), numParameters(numParameters),
            Name(name), ShortName(shortName), Author(author), Command(command), numCols(numCols)
        {}

        //  Copy Constructor
        CMachineInfo (const CMachineInfo &TO_BE_COPIED)
        : APIVersion(TO_BE_COPIED.APIVersion), PlugVersion(TO_BE_COPIED.PlugVersion),
        Flags(TO_BE_COPIED.Flags), numParameters(TO_BE_COPIED.numParameters), Name(TO_BE_COPIED.Name),
        ShortName(TO_BE_COPIED.ShortName), Author(TO_BE_COPIED.Author), Command(TO_BE_COPIED.Command),
        numCols(TO_BE_COPIED.numCols), Parameter(TO_BE_COPIED.Parameter)
        {}

        //  Assignment Operator
        CMachineInfo & operator=(const CMachineInfo &TO_BE_Assigned)
        {
            if(this != &TO_BE_Assigned)
            {
                APIVersion      = TO_BE_Assigned.APIVersion; 
                PlugVersion     = TO_BE_Assigned.PlugVersion;
                Flags           = TO_BE_Assigned.Flags;
                numParameters   = TO_BE_Assigned.numParameters; 
                Name            = TO_BE_Assigned.Name;
                ShortName       = TO_BE_Assigned.ShortName; 
                Author          = TO_BE_Assigned.Author; 
                Command         = TO_BE_Assigned.Command;
                numCols         = TO_BE_Assigned.numCols;
                Parameter       = TO_BE_Assigned.Parameter;
            }
            return *this;
        }

        void SHOW(void) const;

        /// a pointer to an array of pointers to parameter infos
        /// CMachineParameter const * const * const Parameters;
        vector<CMachineParameter const *> Parameter;

        /// "Name of the machine in listing"
        std::string Name;

        /// "Name of the machine in machine Display"
        std::string ShortName;

        /// "Name of author"
        std::string Author;

        /// "Text to show as custom command (see Command method)"
        std::string Command;

        /// number of columns to display in the parameters' window
        int numCols;

private:
        /// API version. Use MI_VERSION
        short APIVersion;

        /// plug version. Your machine version. Shown in Hexadecimal.
        short PlugVersion;

        /// Machine flags. Defines the type of machine
        int Flags;

        /// number of parameters.
        int numParameters;
};

void CMachineInfo::SHOW() const
{
    cout << "My Machine IS: " << endl
         << "\tAPIVersion:    " << APIVersion << endl
         << "\tPlugVersion:   " << PlugVersion << endl
         << "\tFlags:         " << Flags << endl
         << "\tnumParameters: " << numParameters << endl
         << "\tName:          " << Name << endl
         << "\tShortName:     " << ShortName << endl
         << "\tAuthor:        " << Author << endl
         << "\tCommand:       " << Command << endl
         << "\tnumCols:       " << numCols << endl;
} 
```

# cocoa - 实现自定义访问器方法

> ID：15978563
> 
> 赞同：1
> 
> 时间：2013-04-12T18:39:47.920
> 
> 标签：cocoa, core-data, copy

我正在阅读“核心数据编程指南”。它包含以下文本：

> 但是，您必须以符合 KVC 的方式更改属性值。例如，以下通常表示编程错误：

`NSMutableString *mutableString = [NSMutableString stringWithString:@"Stig"]; [newEmployee setFirstName:mutableString]; [mutableString setString:@"Laura"];`

> 对于可变值，您应该将值的所有权转移给 Core Data，或者实现自定义访问器方法以始终执行复制。如果表示 Employee 实体的类声明了 firstName 属性（副本）（或实现了复制新值的自定义 setFirstName: 方法），则前面的示例可能不会表示错误。在这种情况下，调用 setString: 之后（在第三行代码中）firstName 的值仍然是“Stig”而不是“Laura”。

关于文本的问题：“在这种情况下”是哪种情况 - 属性被声明为“副本”或不是？

关于复制和编程实践的问题：从我在这里读到的内容： [NSString 属性：复制还是保留？](https://stackoverflow.com/questions/387959/nsstring-property-copy-or-retain) 我明白

1.  使用 copy 将确保 firstName 是“Stig”，而不是 Laura
2.  这样做是明智的，因为“在几乎所有情况下，您都希望防止在其背后改变对象的属性”

我真的很想知道上面引用的文字试图在 Core Data 的上下文中告诉我们什么。无论是否使用 Core Data，我们都必须使用“复制”。另外，如果有人能对上面的“2”点（这是明智的......）进行更多说明，我会很高兴，因为在其背后改变对象的属性会产生什么后果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T11:38:33.367

您的“关于文本的问题：“在这种情况下”是哪种情况 - 属性被声明为“副本”还是不是？我相信，与苹果文件想要解释的观点不符。

正如Apple文档指出的那样，如果自定义访问器方法正常实现，则默认实现不会**复制**属性值。如果属性值可能是可变的并且实现了 NSCopying 协议（例如 NSString 的情况），您可以将值复制到自定义访问器中以帮助保持封装（**例如，在 NSMutableString 的实例是作为值传递**）。

这是一个复制设置器片段

```
@interface Department : NSManagedObject
{
}
@property(nonatomic, copy) NSString *name;
@end
@implementation Department
@dynamic name;
- (void)setName:(NSString *)newName
{
    [self willChangeValueForKey:@"name"];
    // NSString implements NSCopying, so copy the attribute value
    NSString *newNameCopy = [newName copy];
    [self setPrimitiveName:newNameCopy];
    [self didChangeValueForKey:@"name"];
} @end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:08:12.397

问题是何时（以及如何）使用不可变值。

由于核心数据在检测对对象所做的更改时大量使用 KVO，如果您使用直接通过对象而不是通过属性更改的可变属性，CoreData 将不会检测到对对象的更改，并且您的更改可能不会持久保存到存储中.

如果您使用可变的 NSManagedObject 属性，请覆盖 setter/getter 方法并仅使用它们来改变底层对象（这意味着您有责任让 CoreData 知道该对象确实发生了更改，并且必须将其持久化到存储中另外，
如果对复杂对象使用transformable属性，则必须自己触发更改通知，以便CoreData意识到发生了更改，并且在上下文保存时应该重新转换并保存对象。

我强烈建议当涉及到像字符串这样的简单对象时，您使用不可变的属性值，这将强制您通过对象属性并触发默认的 KVO 通知（复制属性也会强制 KVO 通知）。

# scala - 如何访问 Specs2 中的测试/示例名称？

> ID：15978565
> 
> 赞同：3
> 
> 时间：2013-04-12T18:40:08.813
> 
> 标签：scala, specs2

我有一些测试共享一个夹具，并希望将测试彼此隔离。一种方法是使用测试/示例名称作为“命名空间”的一部分（例如，作为目录路径的一部分）。

如何在自身内部访问测试/示例名称？

例如：

```
class MySpec extends Specification {
  "Something" should {
    "do something" in {
      // access String "do something"
    }

    "do something else" in {
      // access String "do something else"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:39:29.037

所以你可以通过两种方式做到这一点：

Specs2 允许您使用字符串作为片段的可选参数，因此您可以执行以下操作：

```
class MySpec extends Specification {
  "Something" should {
    "do something" in {
      fragmentName: String =>
        println(fragmentName) //prints do something
        ok
    }

    "do something else" in {
      fragmentName: String =>
        println(fragmentName) //prints do something else
        ok
    }
  }
} 
```

还有一种 hacky 方式（我先玩了这个，但就是不能把它扔掉）： 更新 这是**@Eric** 建议的“更好”的 hacky 版本

```
class MySpec extends Specification {
  "Something" should {
    "do something" in {
      val fragmentName = is.examples(0).desc
      println(fragmentName) //prints do something
      ok
    }

    "do something else" in {
      val fragmentName = is.examples(1).desc
      println(fragmentName) //prints do something else
      ok
    }
  }
} 
```

# c++ - 返回一个类

> ID：15978569
> 
> 赞同：0
> 
> 时间：2013-04-12T18:40:16.067
> 
> 标签：c++, class, function, return-value

我们刚刚开始研究 C++ 中的类，我有一个关于在函数中返回类变量的小问题。这是代码：

```
#include <iostream>
#include <string>

using namespace std;

class Medis{
private:
    int Aukstis;
    int Storis;
    int Amzius;
public:
    Medis();
    int GautiAuksti();
    int GautiStori();
    int GautiAmziu();

    bool NustatytiAuksti(int);
    bool NustatytiStori(int);
    bool NustatytiAmziu(int);   

    Medis SujungtiMedzius(Medis M1, Medis M2){
        Medis Grazinamas;
        Grazinamas.Aukstis = M1.Aukstis + M2.Aukstis;
        Grazinamas.Storis = M1.Storis + M2.Storis;
        Grazinamas.Amzius = M1.Amzius + M2.Amzius;
        return Grazinamas;
    }
};

int Medis::GautiAuksti(){return Aukstis;}
int Medis::GautiStori(){return Storis;}
int Medis::GautiAmziu(){return Amzius;}

bool Medis::NustatytiAuksti(int n){
    if (n >= 0){ 
        Aukstis = n;
        return true;
    }else return false;
}
bool Medis::NustatytiStori(int n){
    if (n >= 0){ 
        Storis = n;
        return true;
    }else return false;
}
bool Medis::NustatytiAmziu(int n){
    if (n >= 0){ 
        Amzius = n;
        return true;
    }else return false;
}

Medis::Medis(){
    Aukstis = 0;
    Storis = 0;
    Amzius = 0;
}

void main(){
    Medis Berzas[3];
    Berzas[0].NustatytiAuksti(10);
    Berzas[0].NustatytiStori(50);
    Berzas[0].NustatytiAmziu(23);
    printf("Aukstis = %d; Storis = %d; Amzius = %d", Berzas[0].GautiAuksti(), Berzas[0].GautiStori(), Berzas[0].GautiAmziu());
    Berzas[1].NustatytiAuksti(10);
    Berzas[1].NustatytiStori(50);
    Berzas[1].NustatytiAmziu(23);
    printf("Aukstis = %d; Storis = %d; Amzius = %d", Berzas[1].GautiAuksti(), Berzas[1].GautiStori(), Berzas[1].GautiAmziu());
    Berzas[2] = SujungtiMedzius(Berzas[0], Berzas[1]);
    cin.get();
} 
```

错误在后面的第三行。Visual Studio 强调了“SujungtiMedzius”（顺便说一句，我很抱歉变量不是英文的）并说：“标识符“SujungtiMedzius”未定义”。我试图找到一种如何返回类对象的方法，但没有成功。有没有办法在没有任何指针的情况下返回类对象？或者，也许你看到了某种类型的小姐？我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:42:47.587

`SujungtiMedzius` 是`Medis`class 而不是的成员函数`static`，它在您的`Medis`类的范围内。您必须使用类的实例来调用它`Medis`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:45:11.493

SujungtiMedzius 是 Medis 类的成员，因此您需要提供对象来调用函数，例如

```
Berzas[2] = Berzas[0].SujungtiMedzius(Berzas[0], Berzas[1]); 
```

但这没有多大意义，因为您不使用来自 Berzas[0] 的任何数据

或使 SujungtiMedzius 静态并将其称为

```
Berzas[2] = Medis::SujungtiMedzius(Berzas[0], Berzas[1]); 
```

或者，这可能是最好的选择，让 SujungtiMedzius 只接受一个参数并使用来自对象的数据作为第二个调用它应该变成类似

```
Berzas[2] = Berzas[0].SujungtiMedzius(Berzas[1]); 
```

# python - 如何在 django 中由系统（网站）自动调用方法？

> ID：15978571
> 
> 赞同：1
> 
> 时间：2013-04-12T18:40:31.690
> 
> 标签：python, django

我有一个方法叫`postState()`. 此方法应该检查帖子的状态。帖子可以有 3 种状态（新、旧、存档），该方法将帖子作为其参数。该方法根据过去的天数计算状态。

*   30 天前的帖子是新的
*   30 - 60 天前的帖子已过时
*   一个 > 60 天的旧帖子已存档

这是代码：

```
#This method automatically determines the state of the post. Whether it is (New, Old, or          #   Archived)
#The method takes in one parameter which is the post itself
#the method compares the date of which the post was published in and the current date
#It then uses an algorithim to determine the difference in number of days between the current date and the published date
#Based on the amount returned, if the amount is less than 30 days, the state = "NEW", if between 30 and 60, the state = "OLD", if greater than 60, the state = "ARCHIVED"

def postState(self):
    current_time = datetime.datetime.now()
    p = Post.objects.get(id = self.id)

    #used if the current year is greater than the year of the published post
    if current_time.year > self.pub_Date.year:
        #this is in case for exmaple the published month of the post is December and the current month is January
        #Although the years are diff yet the diff in days may not be greater than 30
        #Ex: published date: 2012, 12, 28 ----- current date: 2013, 1, 10
        if current_time.month == 1 and self.pub_Date.month ==12 and (current_time.day + (31 - self.pub_Date.day)) > 30:
            p.state = 'Old'
            p.save()
        #this is in case for exmaple the published month of the post is November and the current month is January
        #Although the years are diff yet the diff in days may not be greater than 30 and less than 60
        #Ex: published date: 2012, 11, 1 ----- current date: 2013, 1, 28
        elif current_time.month == 1 and self.pub_Date.month ==11 and (current_time.day + (31 - self.pub_Date.day)) < 60:
            p.state = 'Old'
            p.save()
        else:
            p.state = 'Archived'
            p.save()
    #Used when the current year and Published year of the post are the same
    if current_time.year == self.pub_Date.year:

        day_diff_diff_month = current_time.day + (31 - self.pub_Date.day)
        day_diff_same_month = current_time.day - self.pub_Date.day
        month_diff = current_time.month - self.pub_Date.month
        if month_diff >= 1:
            month_diff = month_diff - 1
            total_diff = (month_diff*31) + day_diff_diff_month
        else:
            total_diff = day_diff_same_month

        if total_diff > 30 and total_diff < 60:
            p.state = 'Old'
            p.save()
        if total_diff > 60:
            p.state = 'Archived'
            p.save() 
```

我希望在用户打开帖子页面（post.html）或启动网站时运行此方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:01:49.823

1.  您确定帖子状态的代码似乎非常复杂。我是这样写的：

    ```
    @property
    def state(self):
        """The state of the post:
        'new' if the post is younger than 30 days;
        'old' if the post is between 30 and 60 days old;
        'archived' if the post is 60 days old or older.

        """
        age = (datetime.datetime.now() - self.pub_Date).days
        if age < 30: return 'new'
        elif age < 60: return 'old'
        else: return 'archived' 
    ```

2.  如果我正确理解您的问题，您计划在每次有人查看帖子时更新帖子的状态。这将导致大量的数据库更改。但是既然可以从 计算帖子的状态`pub_Date`，为什么还要麻烦呢？为什么不只在需要时计算状态，如上所示？

    您可以轻松地根据计算的日期发出查询。例如，这是一个只选择“新”帖子的查询：

    ```
    from datetime import datetime, timedelta
    Post.objects.filter(pub_Date__gt = datetime.now() - timedelta(days=30)) 
    ```

    这是一个只选择“旧”帖子的帖子：

    ```
    now = datetime.now()
    Post.objects.filter(pub_Date__range = (now - timedelta(days=60),
                                           now - timedelta(days=30)) 
    ```

    您可能还需要弄清楚如何计算数据库引擎中的状态。确切的细节取决于您的数据库，但例如，在 MySQL 中，您可以使用[`DATEDIFF`函数](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff).

# java - 我需要一些帮助来使用 java 读取 WAV 文件并确定它的各种幅度

> ID：15978572
> 
> 赞同：1
> 
> 时间：2013-04-12T18:40:35.133
> 
> 标签：java, audio, wave, amplitude

从本质上讲，我要问的问题是，当 wav 文件的数据由于是一个大文件而导致剪辑崩溃时，我如何查看它的数据，然后在歌曲播放时确定它的振幅。将程序中的这些振荡想象为像 winamp 一样可视化音乐。在这种情况下，我需要形成声波的数值。

我对采样率之类的东西进行了一些疯狂的研究，甚至设法找到了一些代码，但这对我完成这项任务没有帮助。

如果有人能提供粗略的大纲和一些代码，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:13:40.543

此代码未经测试，但这大致是您应该做的：

```
File fileIn = new File("C:\\path\\to\\your\\file.wav");
AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(fileIn);
int size = audioInputStream.available();
byte[] b = new byte[size];
if (size == audioInputStream.read(b)) {
  // Do what you have to do
} 
```

# c# - 如何在 C# 中更改 Windows Phone 8 应用程序的起始页

> ID：15978575
> 
> 赞同：0
> 
> 时间：2013-04-12T18:40:38.413
> 
> 标签：c#, mobile, windows-phone-8, .net-4.5

我在 Visual Studion 2012 中有一个 windows phone 8 应用程序。根据内存中的数据模型，我必须显示相应的页面。例如，如果 data.Number = 1，那么我应该显示 Page1.xaml，如果 data.Number = 18，那么我应该显示 Page2.xaml，等等。

当应用程序变为活动时，即进入前台时，必须进行导航。如何在 App.xaml.cs 文件中进行必要的更改以适应此要求？

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:18:48.943

下面的行暗示答案考虑我们需要调用调度程序的开始调用的事实：

[WP7应用程序中的“任务不在前台时不允许导航”](https://stackoverflow.com/questions/7373533/navigation-is-not-allowed-when-the-task-is-not-in-the-foreground-in-wp7-applic)

# c# - 指定为可选 Func<> 的扩展方法

> ID：15978576
> 
> 赞同：1
> 
> 时间：2013-04-12T18:40:47.930
> 
> 标签：c#, extension-methods

这可能是一个相当复杂的问题，但只是检查是否有答案。

考虑有两个大致如下所示的扩展方法（并且它们位于另一个我无法控制的程序集中）：

```
public static class ExtensionMethods
{
    public static string ConversionA<T>(this T self) { /* .... */ }
    public static string ConversionB<T>(this T self) { /* .... */ }
} // eo class ExtensionMethods 
```

我有一个在对象上使用此扩展方法的方法。理想情况下，我希望调用者明确指定要使用的转换函数，但在必要时默认使用它，所以我希望我能以某种方式将签名转换为`Func<>`：

```
public static class Config
{
    public static T Read<T>(string fileName, Func<T, string> = ExtensionMethods.ConversionA<T>)
    {
    }
} // eo class Config 
```

这可能吗？我知道这是一个很长的镜头:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:02:39.923

> 这可能吗？

当然 - 你唯一*不能*做的就是有`Func`一个可选参数。可选参数的默认值必须是编译时常量。

但是，您*可以*通过重载来做到这一点：

```
public static T Read<T>(string fileName, Func<T, string> func) // non-optional parameter
{
    /* ... */
}

public static T Read<T>(string fileName)
{
    return Read<T>(fileName, ExtensionMethods.ConversionA<T>);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:54:28.817

**编辑**

不幸的是，我错过了您要求定义默认方法的地方。这是**不可能**的。C# 明确禁止为任何非**编译时常**量分配默认参数。解决此问题的唯一方法是设置一些重载方法，例如：

```
public static T Read<T>(T input)
{
    Read(input, ExtensionMethods.ConversionA<T>);
}

public static T Read<T>(T input, Func<T, string> conversion)
{
    // Logic goes here
} 
```

总而言之，它并没有那么糟糕。这是一点点额外的代码，它会让你得到你正在寻找的行为。

**原来的**

看起来你所拥有的应该基本上可以工作。您只需要指定它接受一个`Func<T, string>`. 您不能强制要求它**始终**是`ConversionA<T>`or `ConversionB<T>`，但是这些类型签名中的任何一个都应该满足`Func<T, string>`.

例如（不知道你的转换方法做什么，我会自己编）：

```
public static class Conversions
{
    public static string UpperString<T>(T self)
    {
        return self.ToString().ToUpper();
    }

    public static string LowerString<T>(T self)
    {
        return self.ToString().ToLower();
    }
}

public static T Read<T>(T input, Func<T, string> conversion)
{
    // Do-whatchya-do
}

void Main()
{
    Read<SomeObj>(new SomeObj(), Conversions.UpperString<SomeObj>);
    Read<SomeObj>(new SomeObj(), Conversions.LowerString<SomeObj>);
} 
```

当您最终调用“Read”时，您只需要传递具有正确类型的泛型方法。因此，您可能需要稍微复制类型签名，但它应该可以正常工作。

它们是扩展方法并没有改变。任何扩展方法都可以显式地以非扩展格式使用。例如：

```
public static class Extensions 
{
    public static T SomeExtension<T>(this T value) { /* ... */ }
} 
```

可以通过以下**两种**方式调用：

```
someT.SomeExtension();
Extensions.SomeExtension(someT); 
```

# math - 没有完美的哈希函数吗？

> ID：15978577
> 
> 赞同：0
> 
> 时间：2013-04-12T18:40:49.483
> 
> 标签：math, hash, perfect-hash

根据[http://java-bytes.blogspot.com/2009/10/hashcode-of-string-in-java.html](http://java-bytes.blogspot.com/2009/10/hashcode-of-string-in-java.html)：“首先，众所周知的事实是没有完美的散列算法，其中有没有碰撞。”

作者说的是实际而不是理论上的，对吗？因为理论上，这里有一个完美的哈希函数：“对于给定的对象，给它分配一个新的数字”。有无限数量的数字，所以我们总是有一些东西可以分配给一个独特的对象。但在实践中这是不可行的，因为我们的内存量有限。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T19:15:01.593

通常，散列函数从一组对象（宇宙）映射到一组较小的对象（共域）。通常，宇宙是一个无限集，例如所有字符串的集合或所有数字的集合，而余域是一个有限集，例如所有 512 位字符串的集合，或 0 之间的所有数字的集合和一些数字 k 等。在 Java 中，`hashCode`对象上的函数有一个可以用 表示的值的共同域`int`，它都是 32 位整数。

我相信作者在说“没有完美的哈希函数”时所谈论的是，不可能将所有字符串的无限集合映射到所有 32 位整数的集合中而不会发生至少一次冲突. 实际上，如果您选择 2 ^(32) + 1 个不同的字符串，则可以保证至少发生一次碰撞。

你的论点 - 我们不能只为每个对象分配一个不同的哈希码吗？- 隐含假设哈希函数的余域是无限的。例如，如果您要尝试使用这种方法为字符串构建散列函数，则散列函数的余域必须至少与所有可能的自然数的集合一样大，因为字符串的数量是无限的。大多数编程语言不支持以这种方式工作的哈希码，尽管理论上这可以工作是正确的。当然，有人可能会反对并说这不算是有效的散列函数，因为散列函数通常具有有限的 codomain。

希望这可以帮助！

# c++ - 有什么方法可以直接进入特定案例吗？

> ID：15978579
> 
> 赞同：0
> 
> 时间：2013-04-12T18:41:07.650
> 
> 标签：c++

我想知道是否有任何简单的方法可以直接“跳转”到特定案例。

我知道这可以通过使用 do while 循环来完成。想知道是否有更优雅的方式。

例如（当然不是整个代码）：

```
.
.
.
case 8:
            {
                if (grades.findStudent(tempid1)==-1)
                {
                    cout << "\nOne of the ID's you have entered wasn't found. Try again.\n" << endl;
                    case(8); //<- <- <- something like that
                }

            }
            break;
.
.
. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:43:18.833

当然。做：

```
switch (...) {
    case 1:
        foo ();
        goto bar;
    case 2:
        ...

    bar:
    case 42:
        baz ();
        break;
} 
```

但是您的问题可能存在其他解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:04:27.127

唔...

我认为重组它的#1 最佳方法是制作函数中的任何内容，然后简单地在你想使用它的地方和其他地方`case 8:`调用该函数。`case 8:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:48:08.733

你在这里有错误的控制结构。你想要这样的东西：

```
int studentId;
while(true) {
    studentId = getStudentId();  // Sorry, I'm rusty.
    if (isValid(studentId)) { break;}
}
switch (...) {
    ...
} 
```

一次做一件事。你不是达夫*设备*的达夫。看那个。好吓人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:49:30.830

也许这会更好

```
case 8:
   while (grades.findStudent(tempid1)==-1)
   {
      cout << "\nOne of the ID's you have entered wasn't found. Try again.\n" << endl;
      // Do whatever to enter tempid1 (perhaps a function here that is used
      // before the start of this switch statement?
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T18:52:51.197

我不知道，但我怀疑这是某种“菜单系统”，而 8 是“搜索学生”。

在这种情况下，您要执行以下操作：

```
 while (grades.findStudent(tempid1)==-1)
            {
                cout << "\none of the ID's you have entered wasn't found. Try again.\n" << endl;
                // add code to ask for tempid1 again
            } 
```

所以，不要使用“if”，而是使用“while”。

# performance - 矩阵乘法有多昂贵？

> ID：15978583
> 
> 赞同：2
> 
> 时间：2013-04-12T18:41:33.017
> 
> 标签：performance, rotation, matrix-multiplication

我在 Quad 类中编写了几个方法来绘制四边形并进行旋转。

目前，draw sprite 方法就是这样做的——将四边形渲染到屏幕上。

但是，旋转方法会旋转**并**渲染四边形。

我编写了另外几个方法，一个只是旋转但不渲染，另一个渲染例程在进行矩阵乘法时考虑了旋转矩阵。所以，而不是这样做：

```
Quad sprite = new Quad();
Quad sprite.rotate(0,0,45,mMVPMatrix);  //rotate by 45 degrees and render at 0,0 
```

我可以做这个：

```
Quad sprite = new Quad();
sprite.rotate(45);            //Rotate sprite by 45 degrees
sprite.draw(0,0,mMVPMatrix);  //Render sprite at 0,0 
```

尽管后者在编写我的主要代码时更加灵活，但这确实意味着即使我不想旋转精灵，绘图例程仍然必须采用旋转矩阵并将其与投影矩阵结合。

当我有 50 多个精灵时，这会花费我吗？我知道在“更多代码”和“更好的性能”之间总是需要权衡取舍，但实际上，这会是一个大问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:46:39.463

先写代码。然后看看性能是否有问题。太多的事情会影响性能，任何人都无法给你一个提示，尤其是没有任何真实的代码（除了你发布的小片段）来判断。

这里有人说，代码开发中最大的罪过是早期优化。您可以在早期花大量时间优化永远不会成为问题的代码。您始终可以在事后进行优化，事后您将获得有关瓶颈所在位置的实际信息，而不是早期优化，这将导致经过调整的代码永远不会成为瓶颈，但现在由于优化而变得不那么可读。

# rspec - 有没有一种简单的方法可以在 Capybara 测试中包含 RackTest 方法？

> ID：15978587
> 
> 赞同：2
> 
> 时间：2013-04-12T18:41:50.803
> 
> 标签：rspec, capybara, rack-test

Capybara 2 删除了这些并建议将它们分开，但在某些情况下，我们希望在测试中同时使用两者（通过视图启用 api 键，然后点击 api 等）。

我尝试包括`include ::Rack::Test::Methods`但我得到：

```
undefined local variable or method `app' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007fb737932ba0> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-09T20:11:13.933

我在使用 Rails 和 RSpec 测试 API 时遇到了同样的错误。我为 Rails 2.3 找到了一篇有用的博客文章：http: [//eddorre.com/posts/using-rack-test-and-rspec-to-test-a-restful-api-in-rails-23x](http://eddorre.com/posts/using-rack-test-and-rspec-to-test-a-restful-api-in-rails-23x)

```
module ApiHelper
  require 'rack/test'
  include Rack::Test::Methods

  def app
    ActionController::Dispatcher.new
  end
end 
```

我对 Rails 3.2 的解决方案是（在 config.ru 中查找 MyAppName）：

```
module ApiHelper
  require 'rack/test'
  include Rack::Test::Methods

  def app
    MyAppName::Application
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T16:02:17.537

尝试这个

```
def app
  Rails.application
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-26T15:12:15.247

对于其他任何人都将头撞到墙上，得到“NameError：未定义的局部变量或方法‘app’”错误。当您一次运行所有测试（多个文件）并且其中一个执行`include Rack::Test::Methods`- 包含“感染”其他测试时，也会发生这种情况。所以症状是当文件单独运行时所有测试都通过了，但是当它们一起运行时它们会失败并出现“无应用程序”错误。至少这发生在`rails 3.0.9`和`rspec 3.0`

此问题的解决方案是删除`includes`. 或者，您可以尝试类似@ultrasaurus 的答案，以确保仅将包含正确包含在需要它的示例中。

# iphone - 如何在更改另一个视图控制器中的值后要求第一个视图控制器重新加载其视图？

> ID：15978589
> 
> 赞同：1
> 
> 时间：2013-04-12T18:41:56.430
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, uitabbarcontroller

我试图在第二个视图控制器中调用我的视图，并在第一个视图控制器中更改一组新值。我正在使用指针来获取我的第一个 viewcontroller 视图（使用指向 firstview 控制器的属性），但我没有看到视图中的任何更改。想法表示赞赏。谢谢

```
//secondviewcontroller.m

#import "SecondViewController.h"
#import "FirstViewController.h"
#import "Tab.h"
#import "AppDelegate.h"

@interface SecondViewController ()

@end

@implementation SecondViewController
@synthesize changeSizeSlider;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"second", @"second");
        self.tabBarItem.image = [UIImage imageNamed:@"second"];

    }
    return self;
}

- (IBAction)changeSizeSlider:(UISlider *)sender
{
    // Change label to match slider's value
    label1.text = [NSString stringWithFormat:@"%g", [changeSize value]];

    // Var for changing size
    CGFloat changeSizeCont = [changeSize value];

    NSLog(@"changeSizeCont = %f", changeSizeCont);

    ((Tab *)vc.view).rect_width  = changeSizeCont;
    ((Tab *)vc.view).rect_height = changeSizeCont;

    // The values here are displayed but i think the view is not reloaded with the nw values
    NSLog(@"Current values for VC's view properties:");
    NSLog(@"rect_width = %f", ((Tab *)vc.view).rect_width);
    NSLog(@"rect_height = %f", ((Tab *)vc.view).rect_height);

} 
```

通过调用 //secondviewcontroller.h 中的属性调用 firstviewcontroller 的视图对象 vc

```
@property FirstViewController *vc;

//firstviewcontroller.m

#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

- (void)viewWillAppear:(BOOL)animated
{
    //NSLog(@">>> %@", NSStringFromSelector(_cmd) );
    self.title = NSLocalizedString(@"First", @"First");
    self.tabBarItem.image = [UIImage imageNamed:@"first"];
    // Get timer
    NSTimer *timer = [NSTimer timerWithTimeInterval: 0.5
                                                      target: self.view
                                                    selector: @selector(setNeedsDisplay)
                                                    userInfo: nil
                                                     repeats: YES];

    // Get runloop, add timer to runloop
    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
    [runLoop addTimer:timer forMode: NSDefaultRunLoopMode];

} 
```

我有绘制类中编写的矩形的函数。

//appdelegate.m #import "TabAppDelegate.h"

```
#import "FirstViewController.h"

#import "SecondViewController.h"

#import "Tab.h"

@implementation TabAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    time_t seed = time(0);
    srandom((int)seed);

    CGRect bounds        = [self.window bounds];
    Tab *view     = [[Tab alloc] initWithFrame:bounds];
    view.backgroundColor = [UIColor whiteColor];

    FirstViewController *vc = [[FirstViewController alloc] init];
    [vc setView: view];

    SecondViewController *vc2 = [[SecondViewController alloc] init];
    //[vc2 setView: view];
    vc2.vc = vc;

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[vc, vc2];
    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

Tab.m 具有将出现在 firstview 中的绘图功能，而 secondview 具有处理 firstviewcontroller 中的更改的 nib。

我几乎认为我在任何地方都没有错，我花了将近一个星期没有弄清楚这个问题。感谢你们的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:53:07.330

在其他视图中处理更改、操作或用户交互是[委托](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)的基本用例。最佳实践是让第一个视图控制器成为第二个视图控制器的委托，然后当第二个视图控制器中发生事件时，它会调用其委托上的某些方法来通知它。

保持视图之间的值/状态同步的其他选项是：

*   [核心数据](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)——最适合用于数据
*   [Key-Value Observation](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html) - 最适合用于数据
*   `NSNotification`s sent through [`NSNotificationCenter`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)- 最适合用于操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:41:16.503

您还可以在第二个视图控制器上创建一个块属性，第一个视图控制器在将其推送到堆栈时设置该属性

```
typdef void(^CallWhenChanged)(CGSize);
@interface ViewController2

@property(strong, nonatomic) CallWhenChanged callBlock;

@end 
```

然后：

```
- (IBAction)changeSizeSlider:(UISlider *)sender
{
    //do stuff
    if( self.callBlock != nil )
    {
        self.callBlock(CGSizeMake(rect_width,rect_height));
    }
} 
```

jszumski 提到的委托是另一种选择，但我更喜欢在处理多个委托方法时使用委托。

# php - 在 php 中使用 ffmpeg exe

> ID：15978591
> 
> 赞同：0
> 
> 时间：2013-04-12T18:41:58.257
> 
> 标签：php, ffmpeg

我想在 Windows 7 x64 上直接使用 ffmpeg 作为命令行，我尝试添加扩展名，但不幸的是它由于某种未知原因无法正常工作，但可执行文件运行良好，我正在使用 exec 命令，唯一的问题是这不适用于直线，我必须创建一个文件。bat 来运行程序。这是我的疑问。

```
$a = exec('\b.bat');
 if ($a) 
      { 

        echo "Success"."\n"; 
        print $a;
    }else { 

      echo "No good"."\n"; 
      print $a;

      } 
```

b.bat

```
ffmpeg -i video.flv -an -ss 00:00:16 -an -r 1 -vframes 1 -y %a.jpg 
```

已经尝试了几种替代方案，但唯一有效的是与。蝙蝠

```
$a = exec('\windows/system32/ffmpeg.exe ffmpeg -i video.flv -an -ss 00:00:16 -an -r 1 -vframes 1 -y %a.jpg'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:18:24.833

确保包含 .bat 文件的完整路径，并确保在 .bat 文件中包含 ffmpeg.exe 的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T18:49:15.933

好吧，我也在处理这个文件`ffmpeg`来转换我的电影和东西我的想法是让人们免费观看电影无论如何这里是我用来转换我的电影的东西，请注意，当`ffmpeg.exe`电影，那么您将需要提供完整路径或使用 ../ 来上一个文件夹和 / 到一个文件夹，例如：

```
 $input_path=   $_FILES["file"]["tmp_name"];
 $output_result=  "movies/" . basename($_FILES["file"]["name"]).".flv";
 exec("FFMPEG.EXE -i '$input_path' -s 900x400 -r 29.97 -b 1024k -ar 22050 -ab 50k -ac 1    '$output_result'"); 
```

我正在使用比例和速率帧以及比特率和声音质量，所以我的输入和输出我在一个变量中给出了它们，基本上你可以使用的命令只是给这些变量 $input 和 $output 一个值。请注意，到目前为止，我几乎没有想出这个想法，这是我提出的，请不要期待出色的结果，因为我们使用的是 Microsoft Windows，结果可能因版本而异，您可能必须使用命令管理员模式我希望这对你有帮助我的电子邮件是 support@web2021.com 如果有什么让我知道的人。

# java - 从 Windows 任务计划程序客户端在共享驱动器上运行 Java 应用程序

> ID：15978595
> 
> 赞同：2
> 
> 时间：2013-04-12T18:42:11.560
> 
> 标签：java, vbscript, batch-file, cmd, windows-task-scheduler

首先，只是想提前感谢大家对此的帮助，让我带你去我的旅程......

**任务：**使用 Windows 任务计划程序运行位于文件服务器上的文件夹中的 Java 应用程序，非常简单。

需要注意的是，我想使用“无论用户是否登录都运行”的任务计划程序选项。这似乎是一个棘手的功能......

**我已将我的帐户设置为运行任务的帐户。**

**我尝试了什么？**

*基于这些操作创建任务：*

Java.exe -jar“共享jar的路径”

Java.exe -jar“本地jar的路径”

Javaw.exe -jar“共享jar的路径”

Javaw.exe -jar “本地 jar 的路径”

“无论用户是否登录，都运行”的结果都相同。选项：0x1

接下来，我尝试创建一个批处理文件来代表我运行它，并将任务更改为运行该批处理文件，我得到了所有相同的结果。我已经读过使用动作的“开始（可选）”字段可能会解决问题，但它没有。

之后，我创建了一个 .vbs 文件，其代码类似于以下内容：

设置 WshShell = CreateObject("WScript.Shell")

WshShell.Run chr(34) & "C:\Batch Files\syncfiles.bat" & Chr(34), 0

设置 WshShell = 无

这实现了“静默运行”，但任务调度程序仍然没有运行“无论使用是否登录都运行。”，并以 0x1 结束。

所有这些都适用于“仅在用户登录时运行”。选项。

无论我是否登录，我都想这样做的原因是因为我想在上班之前运行我的应用程序。

**更新：** 我发现了一些东西。在 Windows 的电源选项中，我必须启用计划任务唤醒计算机的功能，对此我感到有点愚蠢。

使用一个更简单的任务 - 一个只创建一个空白文本文件的任务 - 这个选项可以正常工作。我相信问题在于执行 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:57:45.470

该任务需要用户运行。当然，它不必是登录的用户，但无论如何都需要用户。

1.  制作一个在您手动启动时有效的批处理文件（或等效文件）
2.  使用您的密码和所有内容安排相同的批处理文件（带有`cmd /c c:\full\path\to\batch.bat`）以您自己的身份运行。
3.  现在您已准备好调试您的问题

当没有人登录时，Windows 用户将用来运行您的任务，需要配置和工作的所有工具。例如，本地服务是否设置了所有路径和注册表设置？该用户是否可以读取共享（系统帐户没有网络凭据）。

为了帮助调试，请使用[psexec](http://technet.microsoft.com/en-ca/sysinternals/bb897553.aspx)。此命令行将允许您在 SYSTEM 帐户下运行脚本。就像是

```
psexec -dies cmd /c c:\full\path\to\batch.bat 
```

+欢迎来到 SO ！

# eclipse - 您可以使用 EGit 在两个相同的存储库之间推/拉吗？

> ID：15978596
> 
> 赞同：0
> 
> 时间：2013-04-12T18:42:16.603
> 
> 标签：eclipse, git, dvcs, egit

我有一个存储库 A，我想复制它来创建 B。然后我希望能够拉 A->B，进行一些合并，然后推 B->A。

EGit可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:36:44.933

您只需要添加和配置遥控器。[http://wiki.eclipse.org/EGit/User_Guide#Remote_Repositories](http://wiki.eclipse.org/EGit/User_Guide#Remote_Repositories)

# c# - 只允许公共接口的内部实现

> ID：15978597
> 
> 赞同：0
> 
> 时间：2013-04-12T18:42:16.630
> 
> 标签：c#, .net, inheritance, interface

这个问题类似于[Can I make a type “sealed except for internal types”](https://stackoverflow.com/questions/3072119/can-i-make-a-type-sealed-except-for-internal-types)，但使用接口而不是类。

我想用类似的东西制作一个图书馆：

```
public class SomeClass {
  ISupporter Supporter {get; set;}
}

public interface ISupporter {/*Some public methods*/}

internal interface ISupporterInternal {/*Some secret methods*/}

public class SupporterA : ISupporterInternal  {/*Includes some explicit interface impls of ISupporterInternal*/}

public class SupporterB : ISupporterInternal  {/*Includes some explicit interface impls of ISupporterInternal*/} 
```

库的用户应该能够为 SomeClass 的实例设置支持者对象。用户还应该能够使用 ISupporter 中的方法，但我不希望用户创建自己的 ISupporter 实现并让他分配这些实现的实例。

当分配的支持者的类型不是从 ISupporterInternal 派生时，除了抛出异常之外，还有其他方法吗？

# vb.net - Visual Basic - 控制各种表单元素

> ID：15978598
> 
> 赞同：0
> 
> 时间：2013-04-12T18:42:19.047
> 
> 标签：vb.net, for-loop, label

我有一个包含这么多表单控件（如 300 个标签）的项目，我必须更改它们的所有文本。

所以我想做这样的事情

```
For i= 1 to 300
(Labeli).text = "xyz"
Next 
```

我无法一个一个地编写和更改所有标签，因此我需要一种方法来更改任何标签，方法是使用数字+“标签”，使其变为“标签”。

对不起我的英语，我正在等待你的帮助，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:46:31.453

像这样的东西应该适合你：

```
For i = 1 to 300
  CType(Me.Controls("Label" & i), Label).Text = "xyz"
Next 
```

如果您有嵌套的标签控件，您将需要添加递归或展平标签控件。

# asp.net - 创建contact.asp

> ID：15978601
> 
> 赞同：1
> 
> 时间：2013-04-12T18:42:33.043
> 
> 标签：asp.net, html

我正在尝试将我的 HTML5 网站链接到联系表格，以便它可以将电子邮件发送到特定地址。

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <title>Sunset Events</title>
    <link rel="shortcut icon" href="favicon.ico"/>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/reset.css" type="text/css" media="screen">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen">
    <link rel="stylesheet" href="css/layout.css" type="text/css" media="screen">    
    <script type="text/javascript" src="js/jquery-1.4.1.min.js"></script>
  <script type="text/javascript" src="js/custom.js"></script>
    <!--[if lt IE 7]>
        <script type="text/javascript" src="http://info.template-help.com/files/ie6_warning/ie6_script_other.js"></script>
    <![endif]-->
    <!--[if lt IE 9]>
        <script type="text/javascript" src="js/html5.js"></script>
    <![endif]-->

</head>
<body id="page5">
<div class="main">
<!--==============================header=================================-->
    <header>
        <h1><a href="index.html">Wedding Planner</a></h1>
    </header>
<!--==============================content================================-->
    <section id="content">
        <article class="col-1">
            <figure><img src="images/page5-img1.jpg" alt=""></figure>
            <img class="title" src="images/page5-title.png" alt="">
        </article>

        <article class="col-3">
            <div class="padding">               

                          <font style="color:white; font-size:large;" >CONTACT INFO<br />
                        <br>
                        <dl>
                            <dt >Sunset events<br /><br>BEIRUT- LEBANON</dt><br>
                            <dd><span >Telephone / FAX : <font style="font-size:11px; color:#ccc;">+961 1 484556</font></dd><br><br>
                            <dd><span >MOBILE :<font style="font-size:11px; color:#ccc;"> +961 3 301459</font></dd><br><br>
                            <dd><span >E-mail : <font style="font-size:11px; color:#ccc;">info@sunsetevents.net</font></dd><br><br>
                            <dd><span >Facebook : <a class="linkfb" href="http://www.facebook.com/SunsetWeddingsAndEventss" target="_blank" >SunsetWeddingsAndEventss</a></dd>
                        </dl>

            </div>
        </article>

               <article class="col-2">

                    <div class="padding" style="margin-left:-40px;">

                          <font style="color:white; font-size:large;" >FEEDBACK <img src="images/contact.png" 
                          style="margin-top:-70px; margin-left:200px;">
                          <a href="index.html"><img src="images/close.png" style="float:right; margin-top:-60px; margin-right:-50px;" ></a><br />

                        <form id="form-main" action="contact.asp" method="post" enctype="multipart/form-data">
                            <fieldset>
                                <table>
                                <tr>
                                <td>
                                <label><span class="input"><input name="name" value="Full Name" onBlur="if(this.value=='') this.value='Full Name'" onFocus="if(this.value =='Full Name' ) this.value=''" /></span></label></td>
                                <td >
                                <label style="margin-left:10px;"><span class="input"><input name="name" value="E-mail" onBlur="if(this.value=='') this.value='E-mail'" onFocus="if(this.value =='E-mail' ) this.value=''" /></span></label></td>
                                </tr>
                                </table>
                                <table>
                                <tr>
                                <td>
                                <label><span class="input"><input name="name" value="Tel" onBlur="if(this.value=='') this.value='Tel'" onFocus="if(this.value =='Tel' ) this.value=''" /></span></label>
                                </td>
                                <tD>
                                <label style="margin-left:10px;"><span class="input"><input name="name" value="Fax" onBlur="if(this.value=='') this.value='Fax'" onFocus="if(this.value =='Fax' ) this.value=''" /></span></label>
                                </tD></tr></table>
                                <table>
                                <tr>
                                <tD>
                                <label ><span class="input"><input name="name" value="Activity" onBlur="if(this.value=='') this.value='Activity'" onFocus="if(this.value =='Activity' ) this.value=''" /></span></label>
                                </tD>
                                <td>

                                <select name="Country" class="dropdown"> 
                                <option value="" selected="selected">Select Country</option> 
                                <option value="United States">United States</option> 
                                <option value="United Kingdom">United Kingdom</option> 
                                <option value="Afghanistan">Afghanistan</option> 
                                <option value="Albania">Albania</option> 
                                <option value="Algeria">Algeria</option> 
                                <option value="American Samoa">American Samoa</option> 
                                <option value="Andorra">Andorra</option> 
                                <option value="Angola">Angola</option> 
                                <option value="Anguilla">Anguilla</option> 
                                <option value="Antarctica">Antarctica</option> 
                                <option value="Antigua and Barbuda">Antigua and Barbuda</option> 
                                <option value="Argentina">Argentina</option> 
                                <option value="Armenia">Armenia</option> 
                                <option value="Aruba">Aruba</option> 
                                <option value="Australia">Australia</option> 
                                <option value="Austria">Austria</option> 
                                <option value="Azerbaijan">Azerbaijan</option> 
                                <option value="Bahamas">Bahamas</option> 
                                <option value="Bahrain">Bahrain</option> 
                                <option value="Bangladesh">Bangladesh</option> 
                                <option value="Barbados">Barbados</option> 
                                <option value="Belarus">Belarus</option> 
                                <option value="Belgium">Belgium</option> 
                                <option value="Belize">Belize</option> 
                                <option value="Benin">Benin</option> 
                                <option value="Bermuda">Bermuda</option> 
                                <option value="Bhutan">Bhutan</option> 
                                <option value="Bolivia">Bolivia</option> 
                                <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option> 
                                <option value="Botswana">Botswana</option> 
                                <option value="Bouvet Island">Bouvet Island</option> 
                                <option value="Brazil">Brazil</option> 
                                <option value="British Indian Ocean Territory">British Indian Ocean Territory</option> 
                                <option value="Brunei Darussalam">Brunei Darussalam</option> 
                                <option value="Bulgaria">Bulgaria</option> 
                                <option value="Burkina Faso">Burkina Faso</option> 
                                <option value="Burundi">Burundi</option> 
                                <option value="Cambodia">Cambodia</option> 
                                <option value="Cameroon">Cameroon</option> 
                                <option value="Canada">Canada</option> 
                                <option value="Cape Verde">Cape Verde</option> 
                                <option value="Cayman Islands">Cayman Islands</option> 
                                <option value="Central African Republic">Central African Republic</option> 
                                <option value="Chad">Chad</option> 
                                <option value="Chile">Chile</option> 
                                <option value="China">China</option> 
                                <option value="Christmas Island">Christmas Island</option> 
                                <option value="Cocos (Keeling) Islands">Cocos (Keeling) Islands</option> 
                                <option value="Colombia">Colombia</option> 
                                <option value="Comoros">Comoros</option> 
                                <option value="Congo">Congo</option> 
                                <option value="Congo, The Democratic Republic of The">Congo, The Democratic Republic of The</option> 
                                <option value="Cook Islands">Cook Islands</option> 
                                <option value="Costa Rica">Costa Rica</option> 
                                <option value="Cote D'ivoire">Cote D'ivoire</option> 
                                <option value="Croatia">Croatia</option> 
                                <option value="Cuba">Cuba</option> 
                                <option value="Cyprus">Cyprus</option> 
                                <option value="Czech Republic">Czech Republic</option> 
                                <option value="Denmark">Denmark</option> 
                                <option value="Djibouti">Djibouti</option> 
                                <option value="Dominica">Dominica</option> 
                                <option value="Dominican Republic">Dominican Republic</option> 
                                <option value="Ecuador">Ecuador</option> 
                                <option value="Egypt">Egypt</option> 
                                <option value="El Salvador">El Salvador</option> 
                                <option value="Equatorial Guinea">Equatorial Guinea</option> 
                                <option value="Eritrea">Eritrea</option> 
                                <option value="Estonia">Estonia</option> 
                                <option value="Ethiopia">Ethiopia</option> 
                                <option value="Falkland Islands (Malvinas)">Falkland Islands (Malvinas)</option> 
                                <option value="Faroe Islands">Faroe Islands</option> 
                                <option value="Fiji">Fiji</option> 
                                <option value="Finland">Finland</option> 
                                <option value="France">France</option> 
                                <option value="French Guiana">French Guiana</option> 
                                <option value="French Polynesia">French Polynesia</option> 
                                <option value="French Southern Territories">French Southern Territories</option> 
                                <option value="Gabon">Gabon</option> 
                                <option value="Gambia">Gambia</option> 
                                <option value="Georgia">Georgia</option> 
                                <option value="Germany">Germany</option> 
                                <option value="Ghana">Ghana</option> 
                                <option value="Gibraltar">Gibraltar</option> 
                                <option value="Greece">Greece</option> 
                                <option value="Greenland">Greenland</option> 
                                <option value="Grenada">Grenada</option> 
                                <option value="Guadeloupe">Guadeloupe</option> 
                                <option value="Guam">Guam</option> 
                                <option value="Guatemala">Guatemala</option> 
                                <option value="Guinea">Guinea</option> 
                                <option value="Guinea-bissau">Guinea-bissau</option> 
                                <option value="Guyana">Guyana</option> 
                                <option value="Haiti">Haiti</option> 
                                <option value="Heard Island and Mcdonald Islands">Heard Island and Mcdonald Islands</option> 
                                <option value="Holy See (Vatican City State)">Holy See (Vatican City State)</option> 
                                <option value="Honduras">Honduras</option> 
                                <option value="Hong Kong">Hong Kong</option> 
                                <option value="Hungary">Hungary</option> 
                                <option value="Iceland">Iceland</option> 
                                <option value="India">India</option> 
                                <option value="Indonesia">Indonesia</option> 
                                <option value="Iran, Islamic Republic of">Iran, Islamic Republic of</option> 
                                <option value="Iraq">Iraq</option> 
                                <option value="Ireland">Ireland</option> 
                                <option value="Israel">Israel</option> 
                                <option value="Italy">Italy</option> 
                                <option value="Jamaica">Jamaica</option> 
                                <option value="Japan">Japan</option> 
                                <option value="Jordan">Jordan</option> 
                                <option value="Kazakhstan">Kazakhstan</option> 
                                <option value="Kenya">Kenya</option> 
                                <option value="Kiribati">Kiribati</option> 
                                <option value="Korea, Democratic People's Republic of">Korea, Democratic People's Republic of</option> 
                                <option value="Korea, Republic of">Korea, Republic of</option> 
                                <option value="Kuwait">Kuwait</option> 
                                <option value="Kyrgyzstan">Kyrgyzstan</option> 
                                <option value="Lao People's Democratic Republic">Lao People's Democratic Republic</option> 
                                <option value="Latvia">Latvia</option> 
                                <option value="Lebanon">Lebanon</option> 
                                <option value="Lesotho">Lesotho</option> 
                                <option value="Liberia">Liberia</option> 
                                <option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option> 
                                <option value="Liechtenstein">Liechtenstein</option> 
                                <option value="Lithuania">Lithuania</option> 
                                <option value="Luxembourg">Luxembourg</option> 
                                <option value="Macao">Macao</option> 
                                <option value="Macedonia, The Former Yugoslav Republic of">Macedonia, The Former Yugoslav Republic of</option> 
                                <option value="Madagascar">Madagascar</option> 
                                <option value="Malawi">Malawi</option> 
                                <option value="Malaysia">Malaysia</option> 
                                <option value="Maldives">Maldives</option> 
                                <option value="Mali">Mali</option> 
                                <option value="Malta">Malta</option> 
                                <option value="Marshall Islands">Marshall Islands</option> 
                                <option value="Martinique">Martinique</option> 
                                <option value="Mauritania">Mauritania</option> 
                                <option value="Mauritius">Mauritius</option> 
                                <option value="Mayotte">Mayotte</option> 
                                <option value="Mexico">Mexico</option> 
                                <option value="Micronesia, Federated States of">Micronesia, Federated States of</option> 
                                <option value="Moldova, Republic of">Moldova, Republic of</option> 
                                <option value="Monaco">Monaco</option> 
                                <option value="Mongolia">Mongolia</option> 
                                <option value="Montserrat">Montserrat</option> 
                                <option value="Morocco">Morocco</option> 
                                <option value="Mozambique">Mozambique</option> 
                                <option value="Myanmar">Myanmar</option> 
                                <option value="Namibia">Namibia</option> 
                                <option value="Nauru">Nauru</option> 
                                <option value="Nepal">Nepal</option> 
                                <option value="Netherlands">Netherlands</option> 
                                <option value="Netherlands Antilles">Netherlands Antilles</option> 
                                <option value="New Caledonia">New Caledonia</option> 
                                <option value="New Zealand">New Zealand</option> 
                                <option value="Nicaragua">Nicaragua</option> 
                                <option value="Niger">Niger</option> 
                                <option value="Nigeria">Nigeria</option> 
                                <option value="Niue">Niue</option> 
                                <option value="Norfolk Island">Norfolk Island</option> 
                                <option value="Northern Mariana Islands">Northern Mariana Islands</option> 
                                <option value="Norway">Norway</option> 
                                <option value="Oman">Oman</option> 
                                <option value="Pakistan">Pakistan</option> 
                                <option value="Palau">Palau</option> 
                                <option value="Palestinian Territory, Occupied">Palestinian Territory, Occupied</option> 
                                <option value="Panama">Panama</option> 
                                <option value="Papua New Guinea">Papua New Guinea</option> 
                                <option value="Paraguay">Paraguay</option> 
                                <option value="Peru">Peru</option> 
                                <option value="Philippines">Philippines</option> 
                                <option value="Pitcairn">Pitcairn</option> 
                                <option value="Poland">Poland</option> 
                                <option value="Portugal">Portugal</option> 
                                <option value="Puerto Rico">Puerto Rico</option> 
                                <option value="Qatar">Qatar</option> 
                                <option value="Reunion">Reunion</option> 
                                <option value="Romania">Romania</option> 
                                <option value="Russian Federation">Russian Federation</option> 
                                <option value="Rwanda">Rwanda</option> 
                                <option value="Saint Helena">Saint Helena</option> 
                                <option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option> 
                                <option value="Saint Lucia">Saint Lucia</option> 
                                <option value="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option> 
                                <option value="Saint Vincent and The Grenadines">Saint Vincent and The Grenadines</option> 
                                <option value="Samoa">Samoa</option> 
                                <option value="San Marino">San Marino</option> 
                                <option value="Sao Tome and Principe">Sao Tome and Principe</option> 
                                <option value="Saudi Arabia">Saudi Arabia</option> 
                                <option value="Senegal">Senegal</option> 
                                <option value="Serbia and Montenegro">Serbia and Montenegro</option> 
                                <option value="Seychelles">Seychelles</option> 
                                <option value="Sierra Leone">Sierra Leone</option> 
                                <option value="Singapore">Singapore</option> 
                                <option value="Slovakia">Slovakia</option> 
                                <option value="Slovenia">Slovenia</option> 
                                <option value="Solomon Islands">Solomon Islands</option> 
                                <option value="Somalia">Somalia</option> 
                                <option value="South Africa">South Africa</option> 
                                <option value="South Georgia and The South Sandwich Islands">South Georgia and The South Sandwich Islands</option> 
                                <option value="Spain">Spain</option> 
                                <option value="Sri Lanka">Sri Lanka</option> 
                                <option value="Sudan">Sudan</option> 
                                <option value="Suriname">Suriname</option> 
                                <option value="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option> 
                                <option value="Swaziland">Swaziland</option> 
                                <option value="Sweden">Sweden</option> 
                                <option value="Switzerland">Switzerland</option> 
                                <option value="Syrian Arab Republic">Syrian Arab Republic</option> 
                                <option value="Taiwan, Province of China">Taiwan, Province of China</option> 
                                <option value="Tajikistan">Tajikistan</option> 
                                <option value="Tanzania, United Republic of">Tanzania, United Republic of</option> 
                                <option value="Thailand">Thailand</option> 
                                <option value="Timor-leste">Timor-leste</option> 
                                <option value="Togo">Togo</option> 
                                <option value="Tokelau">Tokelau</option> 
                                <option value="Tonga">Tonga</option> 
                                <option value="Trinidad and Tobago">Trinidad and Tobago</option> 
                                <option value="Tunisia">Tunisia</option> 
                                <option value="Turkey">Turkey</option> 
                                <option value="Turkmenistan">Turkmenistan</option> 
                                <option value="Turks and Caicos Islands">Turks and Caicos Islands</option> 
                                <option value="Tuvalu">Tuvalu</option> 
                                <option value="Uganda">Uganda</option> 
                                <option value="Ukraine">Ukraine</option> 
                                <option value="United Arab Emirates">United Arab Emirates</option> 
                                <option value="United Kingdom">United Kingdom</option> 
                                <option value="United States">United States</option> 
                                <option value="United States Minor Outlying Islands">United States Minor Outlying Islands</option> 
                                <option value="Uruguay">Uruguay</option> 
                                <option value="Uzbekistan">Uzbekistan</option> 
                                <option value="Vanuatu">Vanuatu</option> 
                                <option value="Venezuela">Venezuela</option> 
                                <option value="Viet Nam">Viet Nam</option> 
                                <option value="Virgin Islands, British">Virgin Islands, British</option> 
                                <option value="Virgin Islands, U.S.">Virgin Islands, U.S.</option> 
                                <option value="Wallis and Futuna">Wallis and Futuna</option> 
                                <option value="Western Sahara">Western Sahara</option> 
                                <option value="Yemen">Yemen</option> 
                                <option value="Zambia">Zambia</option> 
                                <option value="Zimbabwe">Zimbabwe</option>
                                </select>

                                </td>
                                </tr></table>

                               <div class="area"><textarea onBlur="if(this.value=='') this.value='Message:'" onFocus="if(this.value =='Message:' ) this.value=''">Message:</textarea></div>
                                <div class="buttons">                                        
                                    <a class="link-1" href="#" onClick="document.getElementById('form-main').reset()">Clear</a>
                                    <a class="link-1" href="#" onClick="document.getElementById('form-main').submit()">Send</a>
                                </div>  
                            </fieldset>

                        </form>

                    </div>

        </article>
        <div class="clear"></div>

    </section>
<!--==============================footer=================================-->
    <footer>
        <span  style="margin-left:50px;">Sunset Events &copy; 2013 | </span>
        Follow us:
        <span> 
        <a href="http://www.facebook.com/SunsetWeddingsAndEventss" target="_blank" data="Facebook"><img class="fb" src="images/fb.png" ></a> 
        </span>
        <span style="margin-right:30px;">
        <a href="https://twitter.com/@sunsetWE" target="_blank" data="Twitter"><img class="fb" src="images/twitte.png" ></a> 
        </span>
<br>
        <span >By <a href="http://designerds.net/" target="_blank">
         <img src="images/designerdslogo.png" style="margin-top:2px;"></a></span>
        <!-- {%FOOTER_LINK} -->
    </footer>
</div>
</body>
</html> 
```

这是联系人.ASP

```
 ‘—-Settings———–
subj = “Contact form from your site” – (here you can change heading message which you will receive in the letter from guest)
mail_from = “admin@tsie.loc” – (here you need to put your website mail address )
mail_to = “andy@template-help.com” – (here you need to put your own email address)
smtp_server = “localhost” – (here you need to put SMTP server name of your server )
smtp_port = 25 – (here you need to put SMTP port of your server) 
```

这是错误信息

> [HttpException (0x80004005)：不允许使用 HTTP 动词 POST 访问路径“/demo/contact.asp”。]
> System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state) +2523961
> System.Web。 CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

# javascript - 如何在 javascript 或 jquery 中重定向页面

> ID：15978605
> 
> 赞同：0
> 
> 时间：2013-04-12T18:42:45.510
> 
> 标签：javascript, jquery, html

我有一个网页。在这个页面上，我有一个从另一个 PHP 页面获取提要的 DIV。此提要也有倒计时。我希望当计数达到 0 时，仅将 DIV 中的页面重定向到我选择的目的地。这是我在下面使用的：

```
function CountDown(t){
var s,c,countdown;
s= 6;
c=$('#count');

countdown = setInterval(function(){
c.html("Redirecting in " + s);
if (s == 0) {

  window.location.href="Forums";
  return false;
}
s--;
}, 1000);
} 
```

现在这是 HTML 的样子；

```
<html>
//header stuff
<body>
//html stuff
<div id="Mypage"></div>
//some more html stuff
</body>
</html> 
```

有问题的页面位于 id = Mypage 的 DIV 中。我想要的是当倒计时达到零页面重定向但在这种情况下它重定向整个主页。是否可以仅将 DIV 中的页面重定向到新位置？我确信我的代码 window.location.href 是发生这种情况的原因，但我不确定如何仅在 DIV 重定向中制作页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:45:47.047

您可以使用 jQuery.load() 将内容加载到特定的 div 中，如下所示：

```
$('#result').load('ajax/test.html', function() {
  alert('Load was performed.');
}); 
```

要仅替换内页的正文，请从内页的脚本中尝试：

```
$('body').replaceWith(data); 
```

或者

```
$('body').html(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:45:40.483

像这样在 Mypage Div 中加载新内容。

```
$("#Mypage").load(urlToLoad); 
```

# qt - 在 cmake 中编译 QT 项目时出错

> ID：15978608
> 
> 赞同：0
> 
> 时间：2013-04-12T18:42:47.937
> 
> 标签：qt, cmake

```
/other/Qt5.0.1/5.0.1/gcc_64/include/QtCore/qglobal.h:1079:4: error: #error "You must build your code with position independent code if Qt was built with -reduce-relocations. " "Compile your code with -fPIC or -fPIE." 
```

似乎所有组件都被正确读取，但弹出此错误。我需要在 CMAKE 中进行哪些更改才能更正此问题？

我将这些行放入`CMakeLists.txt`：

```
SET(CMAKE_CXX_FLAGS "-g -Wall")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}
   ${Qt5Widgets_EXECUTABLE_COMPILE_FLAGS}") 
```

但这也不能解决问题。

# java - Android小部件onReceive崩溃

> ID：15978611
> 
> 赞同：0
> 
> 时间：2013-04-12T18:42:57.873
> 
> 标签：java, android, widget

基本上，当我单击小部件上的特定按钮时，我想获取数据库中的下一条记录。当我在应用程序中使用它时，该功能本身可以正常工作。但是在小部件中它崩溃了。我认为问题出在 onReceive 函数本身，即使我只是将 onReceive 设置为更新文本视图，它也会作为 nullpointerexception 崩溃。

> 公共静态字符串 NEXT_RECORD = "next_record";

这是它被调用的地方：

> Intent intent = new Intent(context, MyWidgetProvider.class);
> 意图.setAction(NEXT_RECORD); PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); remoteViews.setOnClickPendingIntent(R.id.TextView02, pendingIntent);

并收到

```
 @Override
  public void onReceive(Context context, Intent intent) {
   super.onReceive(context, intent);
   if(NEXT_RECORD.equals(intent.getAction())){
       newid = mDbHelper.getNextRecord(1, keyid);
    }

  }

04-12 14:47:57.591: E/AndroidRuntime(30633): FATAL EXCEPTION: main
04-12 14:47:57.591: E/AndroidRuntime(30633): java.lang.RuntimeException: Unable to start receiver com.example.app.hs.MyWidgetProvider: java.lang.NullPointerException
04-12 14:47:57.591: E/AndroidRuntime(30633):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2362)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at android.app.ActivityThread.access$1500(ActivityThread.java:142)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1284)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at android.os.Looper.loop(Looper.java:137)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at android.app.ActivityThread.main(ActivityThread.java:4931)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at java.lang.reflect.Method.invokeNative(Native Method)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at java.lang.reflect.Method.invoke(Method.java:511)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-12 14:47:57.591: E/AndroidRuntime(30633):    at dalvik.system.NativeStart.main(Native Method)
04-12 14:47:57.591: E/AndroidRuntime(30633): Caused by: java.lang.NullPointerException
04-12 14:47:57.591: E/AndroidRuntime(30633):    at com.example.app.hs.MyWidgetProvider.onReceive(MyWidgetProvider.java:100) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:15:21.773

```
Caused by: java.lang.NullPointerException
    at com.example.app.hs.MyWidgetProvider.onReceive(MyWidgetProvider.java:100) 
```

如果`newid = mDbHelper.getNextRecord(1, keyid);`抛出此 NPE，`mDbHelper`则为空。`mDbHelper`在尝试从中读取之前简单地实例化：

```
@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);
    if (NEXT_RECORD.equals(intent.getAction())) {
        mDbHelper = new DbHelper(context); // I guessed at the constructor's parameters
        newid = mDbHelper.getNextRecord(1, keyid);
    }

} 
```

# c# - 在两种类型的列表上使用 foreach 循环？

> ID：15978613
> 
> 赞同：0
> 
> 时间：2013-04-12T18:43:03.790
> 
> 标签：c#, list, foreach

我知道我可以使用`foreach`如下循环：

```
List<int> handles = GetHandles();

foreach (int handle in handles)
{
    // do stuff
} 
```

我可以对 a 做同样的事情`SortedList`吗？

```
SortedList<string, int> namesAndHandles; 
```

编辑：对不起，打错了。它应该是一个`SortedList`. 本质上，我想将其转换为 an`IDictionary`并根据名称访问句柄

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:44:42.740

没有这样的事情`List<string, int>`- 没有`List<,>`具有两个类型参数的类型。如果您有一组名称/句柄对，您应该使用`List<Tuple<string, int>>`或创建自己的`NameAndHandle`类。两者都可以正常工作`foreach`。

（如果你真的想要，你*可以*创建自己的`List<TFirst, TSecond>`课程，但我真的不建议这样做。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:48:41.833

我打赌 List<KeyValuePair<string,int>> 会做你想要的。您可以迭代集合，.Key 属性保存字符串，.Value 保存 int

# android - 映射坐标

> ID：15978616
> 
> 赞同：0
> 
> 时间：2013-04-12T18:43:09.247
> 
> 标签：android, map, geolocation

我已经构建了一个应用程序，每次从护理人员发送请求更新的文本时，它都会从患者设备接收坐标。我现在正在研究我的选项，用于映射从患者收到的坐标以及护理设备的位置，以便可以看到它们之间的相对关系。除了在我的应用程序中内置谷歌地图之外，还有其他推荐的选项。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:47:34.710

OpenStreetMap 是另一种选择。你可以从[这里](http://wiki.openstreetmap.org/wiki/Android)开始。

# c++ - ds:0023:003a3000=?? drwatson FAULT 结尾的东西？

> ID：15978620
> 
> 赞同：1
> 
> 时间：2013-04-12T18:43:19.770
> 
> 标签：c++, logging, access-violation, postmortem-debugging, drwatson

我在 Dr Watson 日志中有以下条目。“ds:0023:003a3000=??”的意义是什么 FAULT 行右侧的条目的一部分？

```
*----> State Dump for Thread Id 0xdfc <----*
eax=00000000 ebx=00390320 ecx=0854ff48 edx=09e44bfc esi=00012ce1 edi=0854ff61
eip=00465c51 esp=0854ff30 ebp=00000000 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00010246

function: sysman
        00465c37 49               dec     ecx
        00465c38 eb02             jmp     sysman+0x65c3c (00465c3c)
        00465c3a 33c9             xor     ecx,ecx
        00465c3c 8d542428         lea     edx,[esp+0x28]
        00465c40 52               push    edx
        00465c41 51               push    ecx
        00465c42 8d4c2418         lea     ecx,[esp+0x18]
        00465c46 e8d5c0fcff       call    sysman+0x31d20 (00431d20)
        00465c4b 33c0             xor     eax,eax
        00465c4d 8d4c2418         lea     ecx,[esp+0x18]
FAULT ->00465c51 8a441eff         mov     al,[esi+ebx-0x1]        ds:0023:003a3000=??
        00465c55 50               push    eax
        00465c56 6864074900       push    0x490764
        00465c5b 51               push    ecx
        00465c5c e8cfd0fcff       call    sysman+0x32d30 (00432d30)
        00465c61 8d542424         lea     edx,[esp+0x24]
        00465c65 68689f4800       push    0x489f68
        00465c6a 8d44242c         lea     eax,[esp+0x2c]
        00465c6e 52               push    edx
        00465c6f 50               push    eax
        00465c70 e83bc3fcff       call    sysman+0x31fb0 (00431fb0)

*----> Stack Back Trace <----*
ChildEBP RetAddr  Args to Child              
00000000 00000000 00000000 00000000 00000000 sysman+0x65c51

*----> Raw Stack Dump <----*
000000000854ff30  58 01 55 08 75 07 c8 09 - 00 00 00 00 18 6d c7 01  X.U.u........m..
000000000854ff40  fc 4b e4 09 04 bd 47 00 - 04 bd 47 00 fc 0c c9 01  .K....G...G.....
000000000854ff50  ac ca ae 09 64 5f c4 01 - 20 37 37 30 32 34 3a 20  ....d_.. 77024: 
000000000854ff60  00 b3 42 00 a8 ff 54 08 - 90 a6 47 00 02 00 00 00  ..B...T...G.....
000000000854ff70  8b c5 42 00 b8 ff 54 08 - 2e 03 39 00 28 99 cb 01  ..B...T...9.(...
000000000854ff80  ff ff ff ff 00 00 00 00 - 00 00 00 00 20 1e cb 01  ............ ...
000000000854ff90  a6 f7 ba 77 06 00 00 00 - c9 f7 ba 77 e1 6b d9 09  ...w.......w.k..
000000000854ffa0  06 00 00 00 1f 00 00 00 - 68 00 55 08 c1 a0 47 00  ........h.U...G.
000000000854ffb0  00 00 00 00 58 c4 42 00 - c9 a5 ca 09 d1 fb 38 0a  ....X.B.......8.
000000000854ffc0  27 00 00 00 e1 6b d9 09 - ef f2 41 00 c9 a5 ca 09  '....k....A.....
000000000854ffd0  01 59 cc 01 38 00 55 08 - ec 00 55 08 00 00 00 00  .Y..8.U...U.....
000000000854ffe0  e0 00 55 08 ff ff ff ff - 89 00 00 00 01 00 01 01  ..U.............
000000000854fff0  c8 ff 54 08 b8 ff 54 08 - 77 00 55 08 29 a5 ca 09  ..T...T.w.U.)...
0000000008550000  51 00 00 00 5f 00 00 00 - 00 9f 82 7c 61 36 ca 01  Q..._......|a6..
0000000008550010  25 00 00 00 3f 00 00 00 - 00 ce bb 77 91 b7 c7 01  %...?......w....
0000000008550020  19 00 00 00 1f 00 00 00 - 00 ff ff ff d9 28 cc 01  .............(..
0000000008550030  0b 00 00 00 1f 00 00 00 - 00 00 55 08 d1 fb 38 0a  ..........U...8.
0000000008550040  27 00 00 00 3f 00 00 00 - 00 20 ba 77 00 00 00 00  '...?.... .w....
0000000008550050  00 00 00 00 00 00 00 00 - 20 b7 c7 01 00 00 00 00  ........ .......
0000000008550060  00 00 00 00 00 00 00 00 - b4 00 55 08 1b 90 47 00  ..........U...G.` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:49:20.597

总结一下：

你在这里得到一个寄存器转储：

```
eax=00000000 ebx=00390320 ecx=0854ff48 edx=09e44bfc esi=00012ce1 edi=0854ff61
eip=00465c51 esp=0854ff30 ebp=00000000 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00010246 
```

`eip`指示失败的指令：

```
FAULT ->00465c51 8a441eff         mov     al,[esi+ebx-0x1]        ds:0023:003a3000=?? 
```

最后的东西是读取失败的地址，也就是23的“普通”数据段，地址3A3000，由`esi`加减`ebx`1组成：390320+12ce1-1。对我来说，这看起来像是一个坏了的索引 - 3a3000 将是内存中新“页面”的第一个地址，所以这就是它在这一点上失败的原因。将 77025 个字节放入数组是很长的路要走，但当然也有可能是其他错误。

# c# - 更新从 EntityDataSource 过滤的 ObjectDataSource 是否会更新 EntityDataSource？

> ID：15978623
> 
> 赞同：1
> 
> 时间：2013-04-12T18:43:23.590
> 
> 标签：c#, asp.net, .net, entity-framework

在 ASP.NET Webform 中，使用 Master/Details 设置，Gridview 用于选择，FormView 用于详细信息，如果我以编程方式将所选项目绑定到 FormView，如下所示：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        var context = new DataAccessLayer.SafetyEntities();
        var se = (from c in context.Employees
                  where c.EID == (long)GridView1.SelectedDataKey.Value
                  select c).ToList();
        FormView1.DataSource = se;
        FormView1.DataBind();
    } 
```

我更新了 FormView 中的数据，这些更改会反映在原始上下文中吗？

此外，我将如何以编程方式更新我在 FormView 中使用的条目？

我已阅读以下帖子：[如何使用过滤器从 EntityDataSource 填充可更新的 FormView](https://stackoverflow.com/questions/1056257/how-to-populate-an-updateable-formview-from-an-entitydatasource-with-filter)，但他填充 formview 的方式与我不同。

我应该这样填充 FormView 吗？

# lua - 如何使 Lua 函数返回键，与尚未填充的表配对？

> ID：15978626
> 
> 赞同：0
> 
> 时间：2013-04-12T18:43:41.403
> 
> 标签：lua, indexing, lua-table

我希望密钥对是 tableToPopulate.width = 30 和 tableToPopulate.Height = 20 它们目前是 tableToPopulate[1] = 30 和 tableToPopulate[2] = 20

* * *

```
local function X ()
    code, code...
    return 30,20
end

local tableToPopulate = {
    x()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:53:25.510

你为什么不直接返回一张桌子？

```
local function X ()
    return {width=30, height=20}
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:32:47.613

您可以传入要设置值的表，如下所示：

```
function x(tbl)
    tbl.Height = 20; 
    tbl.Width = 30;
end

local t={}
x(t)
print(t.Height, t.Width) 
```

尽管根据表中任何内容的结构的复杂程度，使用嵌套表可能更有意义。

```
function x(tbl)
    table.insert(tbl, {Height = 20, Width = 30})
end

local t={}
x(t)
print(t[1].Height, t[1].Width) 
```

这相当于：

```
function x()
    return {Height = 20, Width = 30}
end
local t = {x()}
print(t[1].Height, t[1].Width) 
```

所以实际上，这取决于您希望如何对数据进行分组以及您喜欢哪种语法。

# c++ - 传递可变参数时的奇怪行为

> ID：15978627
> 
> 赞同：0
> 
> 时间：2013-04-12T18:43:41.550
> 
> 标签：c++, c, variadic-functions

我想，`printf`也会采取`va_list`
但当我这样做时，`printf`并没有做我想做`printf`的事：

```
void Log(int loglevel, char* string, ...)
{
    va_list args;
    va_start(args, string);

    switch (type)
    {
        case LOGLEVEL_FATAL:
            printf("FATAL: ");
            break;

        case LOGLEVEL_ERROR:
            printf("ERROR: ");
            break;

        case LOGLEVEL_WARNING:
            printf("WARNING: ");
            break;

        case LOGLEVEL_INFO:
            printf("INFO: ");
            break;
    }

    printf(string, args);
    va_end(args);
} 
```

当我现在打电话时：

```
Log(LOGLEVEL_INFO, "testvariable = %f", 16.0); 
```

输出是：

```
INFO: testvariable = 0.000000 
```

但为什么？
我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:45:19.010

最后的`printf()`调用应该是[`vprintf()`](http://www.cplusplus.com/reference/cstdio/vprintf/)（“v”表示可变参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:17:31.670

在 C++11 中，您可以这样做（在头文件中）：

```
template<typename... Args>
void Log(int loglevel, char* string, Args&&... args)
{
    switch (type)
    {
        case LOGLEVEL_FATAL:
            printf("FATAL: ");
            break;

        case LOGLEVEL_ERROR:
            printf("ERROR: ");
            break;

        case LOGLEVEL_WARNING:
            printf("WARNING: ");
            break;

        case LOGLEVEL_INFO:
            printf("INFO: ");
            break;
    }

    printf(string, std::forward<Args>(args)...);
} 
```

从理论上讲，这也可以让您解析`string`并确定它们是否`args`实际上是正确的，而不是盲目地崩溃。

# javascript - 如何在表格单元格中正确放置选择标签

> ID：15978632
> 
> 赞同：14
> 
> 时间：2013-04-12T18:43:58.340
> 
> 标签：javascript, jquery, html, css, dom

我拼命地试图让一个选择标签适合一个表格单元格，就像它属于那里一样，而不是像有人用撬棍将它楔入一样。这是代码，后面是它的外观图片：

```
<tr>
  <td class="lblCell_L" >ISIN Code </td>
  <td id="ISINcb" class="lblCell_R" align="center">
   <select id='isinz' width="144" style="height:19px; width:140px; text-align:center;">
       <option id="ISIN1" onclick="JavaScript:quarterUpdate()" >A</option>
       <option id="ISIN2" onclick="JavaScript:quarterUpdate()" >B</option>
       <option id="ISIN3" onclick="JavaScript:quarterUpdate()" >C</option>
       <option id="ISIN4" onclick="JavaScript:quarterUpdate()" >E</option>
   </select>
  </td>
  <td class="lblCell_tx" id="isinOptions" style="color:#a56;">0</td>
</tr> 
```

这在 FireFox 中出现的方式：

![选择标签在单元格边框内有自己的边框](https://i.stack.imgur.com/CAowX.png)

所以，这真的很难看，因为 Select 对象在单元格内有自己的可见边界，单元格有自己的边界。这就像用猪肉填充鹅......看起来很糟糕！

是否可以抑制表格单元格边框以允许选择标签边框取而代之？

您可能还会注意到，该单元格的高度高于另一个“*纯文本*”单元格。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T18:56:44.233

玩选择的边框（这在 Safari 中可能有效，也可能无效）

```
select {
    border: 0;
    width: 100%;
} 
```

这是一个 JsFiddle：http: [//jsfiddle.net/EuNw4/](http://jsfiddle.net/EuNw4/)

也不要大量`option onclick="JavaScript:quarterUpdate()"`使用`select onchange"JavaScript:quarterUpdate()"`......**不应该使用这样的内联Javascript，你应该这样做：**

```
// jQuery
jQuery(document).ready(function($) {
    $('#isinz').on('change', quarterUpdate());
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T18:53:51.503

根据您的问题，我知道这就是您想要的：

[http://jsfiddle.net/8vwV3/](http://jsfiddle.net/8vwV3/)

```
table {
    border-collapse: collapse;
}

td {
    border: 1px solid #999;
    padding:3px 10px;
}

td select {
    border: none;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T19:03:32.113

您可以隐藏`select`元素上的边框，例如：

```
<table>
    <tr>
        <td class="lblCell_L">ISIN Code</td>
        <td id="ISINcb" class="lblCell_R" align="center">
            <select>
                <option id="ISIN1">A Abel</option>
                <option id="ISIN2">B Babel</option>
                <option id="ISIN3">C Cable</option>
                <option id="ISIN4">E Enable</option>
            </select>
        </td>
        <td class="lblCell_tx" id="isinOptions">0</td>
    </tr>
</table> 
```

CSS可能是：

```
table {
    outline: 1px solid black;
    font-family: Arial, sans-serif;
    font-size: 20px;
}
table td {
    border: 1px solid blue;
    padding: 5px;
}
select { 
    width: 140px;
    border: none;
    font-family: inherit;
    font-size: inherit;
} 
```

您可能无法对选择菜单中的向下箭头进行太多控制。

确保您使用`inherit`保持`select`菜单中的字体系列和大小一致。

我的其余边界对于演示来说是令人眼花缭乱的。

小提琴：http: [//jsfiddle.net/audetwebdesign/Em79R/](http://jsfiddle.net/audetwebdesign/Em79R/)

# asp.net-mvc-4 - VS 2012 IIS Express 8 - 无法启动 Web 应用程序

> ID：15978633
> 
> 赞同：1
> 
> 时间：2013-04-12T18:43:59.330
> 
> 标签：asp.net-mvc-4, visual-studio-2012, iis-express

我在 VS2012（Windows 7 64 位）中创建了全新的 ASP.NET MVC 4 应用程序。当我使用 IIS Express 8 运行应用程序时，我的应用程序没有启动。使用 FireBug，我注意到无法传递“site.css”文件，因为 HTTP GET 请求挂起。

我在 IIS 日志中没有找到对这些文件的任何请求：

```
#Software: Microsoft Internet Information Services 8.0
#Version: 1.0
#Date: 2013-04-12 17:39:15
#Fields: date time s-ip cs-method cs-uri-stem cs-uri-query s-port cs-username c-ip cs(User-Agent) cs(Referer) sc-status sc-substatus sc-win32-status time-taken 
2013-04-12 17:39:15 ::1 GET / - 57178 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:20.0)+Gecko/20100101+Firefox/20.0 - 200 0 0 7163 
2013-04-12 17:39:15 ::1 GET /Scripts/modernizr-2.5.3.js - 57178 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:20.0)+Gecko/20100101+Firefox/20.0 http://localhost:57178/ 304 0 0 2 
2013-04-12 17:39:15 ::1 GET /favicon.ico - 57178 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:20.0)+Gecko/20100101+Firefox/20.0 - 304 0 0 14 
2013-04-12 17:39:39 ::1 GET / - 57178 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:20.0)+Gecko/20100101+Firefox/20.0 - 200 0 0 5 
```

顺便说一句，在 Visual Studio 开发服务器上，该应用程序运行良好。将不胜感激任何想法和帮助。

# javascript - 使用 JQuery 切换表格的选定行

> ID：15978634
> 
> 赞同：2
> 
> 时间：2013-04-12T18:43:59.420
> 
> 标签：javascript, jquery, html-table, css-selectors

我有一张桌子。单击一行时，将给出`.active`该行并突出显示该行。除了单击它之外，我需要采用其他方法来更改选定的行。对于我的示例，我选择了下一步按钮。

[http://jsfiddle.net/dHxKW/](http://jsfiddle.net/dHxKW/)

当它到达表格末尾或其他类似的东西时，我可以做背后的逻辑。

**我只需要帮助弄清楚如何在活动类中获取 TR 的索引，**以便我可以增加索引，然后我可以为下一行提供活动类......这就是我需要做的......如何获取该行索引。

这是我尝试过的一些不起作用的东西......

```
 alert( $('table tr .active').index() ); 

    var row = $('table tr.active').first(); 

    alert(row.index() );   

    alert($("table").index( $('table tr .active') )); 
```

这就是我用作参考的内容（[https://stackoverflow.com/a/469910/623952](https://stackoverflow.com/a/469910/623952)）

```
var index = $("table tr").index($(this)); 
```

但我无法正确选择选择器...

**解决方案.....**

它永远不会奏效......我写了糟糕的代码：

`$(this).children("tr").addClass("active");` （this = 在 click 函数中点击了 tr）

但新代码：http: [//jsfiddle.net/dHxKW](http://jsfiddle.net/dHxKW)

```
 $("#table_one").on("click", "tr", function () {
     $(".active").removeClass("active");

     $(this).children("td").addClass("active");

     // removed line: $(this).children("tr").addClass("active");
     $(this).addClass("active");
 });

 $('#btn_next').on('click', function () 
{ 
     // right here  ********** 

     var n = $('tr.active').next(); 

     $(".active").removeClass("active");     

     n.children("td").addClass("active");
     n.addClass("active");

 }); 
```

** 作为说明，我正在将类添加到 tr 和 td 中...我不确定这是否是最好的方法，但 tr 没有背景属性，所以我只是将它添加到两者中。我想这可能是我困惑的原因......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:46:06.507

问题是“活动”类没有被添加到“tr”元素中。

在这一行中，您正在寻找, 但是是 a 的`tr`孩子，因此没有孩子被选中：`this``this``tr``$(this).children("tr").addClass("active");`

而是尝试`$(this).addClass("active");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:48:04.830

```
$('td.active').parent().index('tr') 
```

会给你索引。

**[jsFiddle 示例](http://jsfiddle.net/j08691/dHxKW/2/)**

**[jsFiddle 示例 2](http://jsfiddle.net/j08691/dHxKW/3/)**

顺便说一句，您的点击功能中的链接在`$(this).children("tr").addClass("active");`搜索一行的子行时似乎什么都不做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T18:48:32.893

```
var counter = 0;
var index = -1

$('table tr').each(function(){
    if( ! $(this).hasClass('active')) {
         counter++;
    }
    else index = counter;
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T18:55:23.120

```
$('table tr .active').removeClass('active').parent().next().children('td').addClass('active'); 
```

这应该这样做

# c++ - C++ EXC_BAD_ACCESS（代码=1 访问=0x0）

> ID：15978635
> 
> 赞同：1
> 
> 时间：2013-04-12T18:44:03.523
> 
> 标签：c++, xcode

我正在为 connect 4 游戏编写一个类，当我去绘制棋盘时遇到问题，当我尝试引用我的 game_board 成员变量时，错误 EXC_BAD_ACCESS (code=1 access=0x0) 不断出现. 我究竟做错了什么？提前致谢。

```
#include "board.h"
#include <iostream>
using namespace std;

Board::Board()
{
char** game_board=new char*[SIZEX];
for(int i=0; i<SIZEX; i++)
    game_board[i]=new char[SIZEY];

for (int i=0;i<SIZEX;i++)
 {
    for (int j=0;j<SIZEY;j++)
    {
        game_board[i][j]=' ';
    }
 }
};
void Board::draw()
{
    for (int j=0; j<SIZEY;++j )
    {
       cout<<"|---+---+---+---+---+---+---|\n";
        for (int i=0; i<SIZEX;++i)
        {
            cout<<"| "<<game_board[i][j]<<" ";
        }
        cout<<"|\n";
   }
    cout<<"|---+---+---+---+---+---+---|\n";
};
Board::~Board()
{
    for(int i=0; i<SIZEX; i++)
        delete [] game_board[i];

    delete []game_board;

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:45:46.827

```
Board::Board()
{
    char** game_board=new char*[SIZEX];
    ^^^^^^ 
```

在这里，您声明一个新的`char** game_board`并为它分配，而您的班级`game_board`仍未分配。

我认为您的意图是使用 class member `Board::game_board`。在这种情况下，您不应该声明它，而应该按原样使用它（*它已经声明*过）。

```
Board::Board()
{
   game_board=new char*[SIZEX];  // Or this->game_board=new char*[SIZEX] 
```

# java - 如何在我的媒体播放器中添加 seekbar Plus 快退和快进按钮

> ID：15978637
> 
> 赞同：2
> 
> 时间：2013-04-12T18:44:08.913
> 
> 标签：java, android, android-layout, android-mediaplayer

嘿，伙计们正在为我的 android 设备开发媒体播放器，但不知道如何让搜索栏正常工作，而且我希望能够通过按住按钮而不是按一次来快进和快退

这是我到目前为止所拥有的

`MyMediaPlayerActivity`班级：

```
 package com.technegames.mymediaplayer;

     import java.io.File;
     import java.io.FileDescriptor;
     import java.io.FileInputStream;
     import java.io.IOException;
     import java.util.ArrayList;
     import java.util.List;
     import java.util.Random;

     import android.app.Activity;
     import android.content.Context;
     import android.content.res.AssetFileDescriptor;
     import android.content.res.AssetManager;
     import android.graphics.drawable.Drawable;
     import android.media.AudioManager;
     import android.os.Bundle;
     import android.os.Environment;
     import android.os.PowerManager;
     import android.os.PowerManager.WakeLock;
     import android.view.Menu;
     import android.view.MenuItem;
     import android.view.View;
     import android.view.Window;
     import android.view.WindowManager;
     import android.widget.Button;
     import android.widget.ImageView;
     import android.widget.Toast;

     public class MyMediaPlayerActivity extends Activity {
 WakeLock wakeLock;
 private static final String[] EXTENSIONS = { ".mp3", ".mid", ".wav", ".ogg",         ".mp4" }; //Playable Extensions

List<String> trackNames; //Playable Track Titles

List<String> trackArtworks; //Track artwork names

AssetManager assets; //Assets (Compiled with APK)

File path; //directory where music is loaded from on SD Card

File path2; //directory where album artwork is loaded from on SD Card

Music track; //currently loaded track

ImageView bg; //Track artwork

Button btnPlay; //The play button will need to change from 'play' to 'pause', so we need an instance of it

Random random; //used for shuffle

boolean shuffle; //is shuffle mode on?

boolean isTuning; //is user currently jammin out, if so automatically start playing the next track

int currentTrack; //index of current track selected

int type; //0 for loading from assets, 1 for loading from SD card

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setVolumeControlStream(AudioManager.STREAM_MUSIC);
    PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "Lexiconda");
    setContentView(R.layout.main);

    initialize(0);
}

@Override
public void onResume(){
    super.onResume();
    wakeLock.acquire();
}

@Override
public void onPause(){
    super.onPause();
    wakeLock.release();
    if(track != null){
        if(track.isPlaying()){
            track.pause();
            isTuning = false;
            btnPlay.setBackgroundResource(R.drawable.play);
        }
        if(isFinishing()){
            track.dispose();
            finish();
        }
    } else{
        if(isFinishing()){
            finish();
        }
    }
}

private void initialize(int type){
    bg = (ImageView) findViewById(R.id.bg);
    btnPlay = (Button) findViewById(R.id.btnPlay);
    btnPlay.setBackgroundResource(R.drawable.play);
    trackNames = new ArrayList<String>();
    trackArtworks = new ArrayList<String>();
    assets = getAssets();
    currentTrack = 0;
    shuffle = false;
    isTuning = false;
    random = new Random();
    this.type = type;

    addTracks(getTracks());
    loadTrack();
}

//Generate a String Array that represents all of the files found
private String[] getTracks(){
    if(type == 0){
        try {
            String[] temp = getAssets().list("");
            return temp;
        } catch (IOException e) {
            e.printStackTrace();
            Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_LONG).show();
        }
    } else if(type == 1){
        if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED) 
                || Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED_READ_ONLY)){
            path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC);
            path2 = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
            String[] temp = path.list();
            return temp;
        } else{
            Toast.makeText(getBaseContext(), "SD Card is either mounted elsewhere or is unusable", Toast.LENGTH_LONG).show();
        }
    }
    return null;
}

//Adds the playable files to the trackNames List
private void addTracks(String[] temp){
    if(temp != null){
        for(int i = 0; i < temp.length; i++){
            //Only accept files that have one of the extensions in the EXTENSIONS array
            if(trackChecker(temp[i])){
                trackNames.add(temp[i]);
                trackArtworks.add(temp[i].substring(0, temp[i].length()-4));
            }
        }
        Toast.makeText(getBaseContext(), "Loaded " + Integer.toString(trackNames.size()) + " Tracks", Toast.LENGTH_SHORT).show();
    }
}

//Checks to make sure that the track to be loaded has a correct extenson
private boolean trackChecker(String trackToTest){
    for(int j = 0; j < EXTENSIONS.length; j++){
        if(trackToTest.contains(EXTENSIONS[j])){
            return true;
        }
    }
    return false;
}

//Loads the track by calling loadMusic
private void loadTrack(){
    if(track != null){
        track.dispose();
    }
    if(trackNames.size() > 0){
        track = loadMusic(type);
        setImage("drawable/" + trackArtworks.get(currentTrack));
    }
}

//loads a Music instance using either a built in asset or an external resource
private Music loadMusic(int type){
    switch(type){
    case 0:
        try{
            AssetFileDescriptor assetDescriptor = assets.openFd(trackNames.get(currentTrack));
            return new Music(assetDescriptor);
        } catch(IOException e){
            e.printStackTrace();
            Toast.makeText(getBaseContext(), "Error Loading " + trackNames.get(currentTrack), Toast.LENGTH_LONG).show();
        }
        return null;
    case 1:
        try{
            FileInputStream fis = new FileInputStream(new File(path, trackNames.get(currentTrack)));
            FileDescriptor fileDescriptor = fis.getFD();
            return new Music(fileDescriptor);
        } catch(IOException e){
            e.printStackTrace();
            Toast.makeText(getBaseContext(), "Error Loading " + trackNames.get(currentTrack), Toast.LENGTH_LONG).show();
        }
        return null;
    default:
        return null;
    }
}

//Sets the background image to match the track currently playing or a default image
private void setImage(String name) {
    if(type == 0){
        int imageResource = getResources().getIdentifier(name, null, getPackageName());
        if(imageResource != 0){
            Drawable image = getResources().getDrawable(imageResource);
            bg.setImageDrawable(image);
        } else{
            int defaultImageResource = getResources().getIdentifier("drawable/defaultbg", null, getPackageName());
            if(defaultImageResource != 0){
                Drawable image = getResources().getDrawable(defaultImageResource);
                bg.setImageDrawable(image);
            }
        }
    } else if(type == 1){
        if(new File(path2.getAbsolutePath(), trackArtworks.get(currentTrack) + ".jpg").exists()){
            bg.setImageDrawable(Drawable.createFromPath(path2.getAbsolutePath() + "/" + trackArtworks.get(currentTrack) + ".jpg"));
        } else{
            int defaultImageResource = getResources().getIdentifier("drawable/defaultbg", null, getPackageName());
            if(defaultImageResource != 0){
                Drawable image = getResources().getDrawable(defaultImageResource);
                bg.setImageDrawable(image);
            }
        }
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu){
    super.onCreateOptionsMenu(menu);
    createMenu(menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item){
    switch(item.getItemId()){
    case 0:
        //Set Looping
        synchronized(this){
            if(track.isLooping()){
                track.setLooping(false);
                Toast.makeText(getBaseContext(), "Playing Tracks Sequentially", Toast.LENGTH_SHORT).show();
            } else{
                track.setLooping(true);
                Toast.makeText(getBaseContext(), "Looping " + trackNames.get(currentTrack), Toast.LENGTH_SHORT).show();
            }
        }
        return true;
    case 1:
        //Set Shuffle
        synchronized(this){
            if(shuffle){
                setShuffle(false);
            } else{
                setShuffle(true);
            }
        }
        return true;
    case 2:
        //Stop Music
        synchronized(this){
            track.switchTracks();
            btnPlay.setBackgroundResource(R.drawable.play);
        }
        return true;
    case 3:
        //Change Source from Assets to SD Card and vice versa
        synchronized(this){
            type++;
            if(type > 1){
                type = 0;
            }
        }
        if(type == 0){
            Toast.makeText(getBaseContext(), "Loading Tracks from Assets ", Toast.LENGTH_SHORT).show();
        } else if(type == 1){
            Toast.makeText(getBaseContext(), "Loading Tracks from SD Card", Toast.LENGTH_SHORT).show();
        }
        initialize(type);
        return true;
    default:
        return false;
    }
}

private void createMenu(Menu menu){
    MenuItem miLooping = menu.add(0, 0, 0, "Looping");{
        miLooping.setIcon(R.drawable.looping);
    }
    MenuItem miShuffle = menu.add(0, 1, 1, "Shuffle");{
        miShuffle.setIcon(R.drawable.shuffle);
    }
    MenuItem miStop = menu.add(0, 2, 2, "Stop");{
        miStop.setIcon(R.drawable.stop);
    }
    MenuItem miSource = menu.add(0, 3, 3, "Source");{
        miSource.setIcon(R.drawable.source);
    }
}

public void click(View view){
    int id = view.getId();
    switch(id){
    case R.id.btnPlay:
        synchronized(this){
            if(isTuning){
                isTuning = false;
                btnPlay.setBackgroundResource(R.drawable.play);
                track.pause();
            } else{
                isTuning = true;
                btnPlay.setBackgroundResource(R.drawable.pause);
                playTrack();
            }
        }
        return;
    case R.id.btnPrevious:
        setTrack(0);
        loadTrack();
        playTrack();
        return;
    case R.id.btnNext:
        setTrack(1);
        loadTrack();
        playTrack();
        return;
    default:
        return;
    }
}

private void setTrack(int direction){
    if(direction == 0){
        currentTrack--;
        if(currentTrack < 0){
            currentTrack = trackNames.size()-1;
        }
    } else if(direction == 1){
        currentTrack++;
        if(currentTrack > trackNames.size()-1){
            currentTrack = 0;
        }
    }
    if(shuffle){
        int temp = random.nextInt(trackNames.size());
        while(true){
            if(temp != currentTrack){
                currentTrack = temp;
                break;
            }
            temp++;
            if(temp > trackNames.size()-1){
                temp = 0;
            }
        }
    }
}

//Plays the Track
private void playTrack(){
    if(isTuning && track != null){
        track.play();
        Toast.makeText(getBaseContext(), "Playing " + trackNames.get(currentTrack).substring(0, trackNames.get(currentTrack).length()-4), Toast.LENGTH_SHORT).show();
    }
}

//Simply sets shuffle to isShuffle and then displays a message for confirmation
private void setShuffle(boolean isShuffle) {
    shuffle = isShuffle;
    if(shuffle){
        Toast.makeText(getBaseContext(), "Shuffle On", Toast.LENGTH_SHORT).show();
    } else{
        Toast.makeText(getBaseContext(), "Shuffle Off", Toast.LENGTH_SHORT).show();
    }
}

} 
```

`Music`班级：

```
 import java.io.FileDescriptor;
    import java.io.IOException;

    import android.content.res.AssetFileDescriptor;
    import android.media.MediaPlayer;
    import android.media.MediaPlayer.OnCompletionListener;

    public class Music implements OnCompletionListener{
MediaPlayer mediaPlayer;
boolean isPrepared = false;

public Music(AssetFileDescriptor assetDescriptor){
    mediaPlayer = new MediaPlayer();
    try{
        mediaPlayer.setDataSource(assetDescriptor.getFileDescriptor(), assetDescriptor.getStartOffset(), assetDescriptor.getLength());
        mediaPlayer.prepare();
        isPrepared = true;
        mediaPlayer.setOnCompletionListener(this);
    } catch(Exception ex){
        throw new RuntimeException("Couldn't load music, uh oh!");
    }
}

public Music(FileDescriptor fileDescriptor){
    mediaPlayer = new MediaPlayer();
    try{
        mediaPlayer.setDataSource(fileDescriptor);
        mediaPlayer.prepare();
        isPrepared = true;
        mediaPlayer.setOnCompletionListener(this);
    } catch(Exception ex){
        throw new RuntimeException("Couldn't load music, uh oh!");
    }
}

public void onCompletion(MediaPlayer mediaPlayer) {
    synchronized(this){
        isPrepared = false;
    }
}

public void play() {
    if(mediaPlayer.isPlaying()){
        return;
    }
    try{
        synchronized(this){
            if(!isPrepared){
                mediaPlayer.prepare();
            }
            mediaPlayer.start();
        }
    } catch(IllegalStateException ex){
        ex.printStackTrace();
    } catch(IOException ex){
        ex.printStackTrace();
    }
}

public void stop() {
    mediaPlayer.stop();
    synchronized(this){
        isPrepared = false;
    }
}

public void switchTracks(){
    mediaPlayer.seekTo(0);
    mediaPlayer.pause();
}

public void pause() {
    mediaPlayer.pause();
}

public boolean isPlaying() {
    return mediaPlayer.isPlaying();
}

public boolean isLooping() {
    return mediaPlayer.isLooping();
}

public void setLooping(boolean isLooping) {
    mediaPlayer.setLooping(isLooping);
}

public void setVolume(float volumeLeft, float volumeRight) {
    mediaPlayer.setVolume(volumeLeft, volumeRight);
}

public void dispose() {
    if(mediaPlayer.isPlaying()){
        stop();
    }
    mediaPlayer.release();
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-25T14:44:10.380

*I hope this will help you. This Code is used in our project*

```
public class MusicPlayer extends Activity
    implements OnCompletionListener, SeekBar.OnSeekBarChangeListener {

private ImageButton btnPlay;
private ImageButton btnForward;
private ImageButton btnBackward;
private ImageButton btnPlaylist;
private ImageButton btnRepeat;
private ImageButton btnShuffle;
private SeekBar songProgressBar;
private TextView songTitleLabel;
private TextView songCurrentDurationLabel;
private TextView songTotalDurationLabel;
// Media Player
private MediaPlayer mp;
// Handler to update UI timer, progress bar etc,.
private Handler mHandler = new Handler();;
private SongsManager songManager;
private Utilities utils;
private int seekForwardTime = 5000; // 5000 milliseconds
private int seekBackwardTime = 5000; // 5000 milliseconds
private int currentSongIndex = 0;
private boolean isShuffle = false;
private boolean isRepeat = false;
private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.player);

    // All player buttons
    btnPlay = (ImageButton) findViewById(R.id.btnPlay);
    btnForward = (ImageButton) findViewById(R.id.btnForward);
    btnBackward = (ImageButton) findViewById(R.id.btnBackward);
    btnPlaylist = (ImageButton) findViewById(R.id.btnPlaylist);
    btnRepeat = (ImageButton) findViewById(R.id.btnRepeat);
    btnShuffle = (ImageButton) findViewById(R.id.btnShuffle);
    songProgressBar = (SeekBar) findViewById(R.id.songProgressBar);
    songTitleLabel = (TextView) findViewById(R.id.songTitle);
    songCurrentDurationLabel = (TextView) findViewById(R.id.songCurrentDurationLabel);
    songTotalDurationLabel = (TextView) findViewById(R.id.songTotalDurationLabel);

    // Mediaplayer
    mp = new MediaPlayer();
    songManager = new SongsManager();
    utils = new Utilities();

    // Listeners
    songProgressBar.setOnSeekBarChangeListener(this); // Important
    mp.setOnCompletionListener(this); // Important

    // Getting all songs list
    songsList = songManager.getPlayList();

    // By default play first song
    playSong(0);

    /**
     * Play button click event plays a song and changes button to pause
     * image pauses a song and changes button to play image
     * */
    btnPlay.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // check for already playing
            if (mp.isPlaying()) {
                if (mp != null) {
                    mp.pause();
                    // Changing button image to play button
                    btnPlay.setImageResource(R.drawable.btn_play);
                }
            } else {
                // Resume song
                if (mp != null) {
                    mp.start();
                    // Changing button image to pause button
                    btnPlay.setImageResource(R.drawable.btn_pause);
                }
            }

        }
    });

    btnForward.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            // get current song position
            int currentPosition = mp.getCurrentPosition();
            // check if seekForward time is lesser than song duration
            if (currentPosition + seekForwardTime <= mp.getDuration()) {
                // forward song
                mp.seekTo(currentPosition + seekForwardTime);
            } else {
                // forward to end position
                mp.seekTo(mp.getDuration());
            }
            return false;
        }
    });

    /**
     * Forward button click event Forwards song specified seconds
     * */
    btnForward.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // get current song position
            // check if next song is there or not
            if (currentSongIndex < (songsList.size() - 1)) {
                playSong(currentSongIndex + 1);
                currentSongIndex = currentSongIndex + 1;
            } else {
                // play first song
                playSong(0);
                currentSongIndex = 0;
            }
        }
    });

    btnBackward.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            int currentPosition = mp.getCurrentPosition();
            // check if seekBackward time is greater than 0 sec
            if (currentPosition - seekBackwardTime >= 0) {
                // forward song
                mp.seekTo(currentPosition - seekBackwardTime);
            } else {
                // backward to starting position
                mp.seekTo(0);
            }
            return false;
        }
    });

    /**
     * Backward button click event Backward song to specified seconds
     * */
    btnBackward.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (currentSongIndex > 0) {
                playSong(currentSongIndex - 1);
                currentSongIndex = currentSongIndex - 1;
            } else {
                // play last song
                playSong(songsList.size() - 1);
                currentSongIndex = songsList.size() - 1;
            }

        }
    });

    /**
     * Button Click event for Repeat button Enables repeat flag to true
     * */
    btnRepeat.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (isRepeat) {
                isRepeat = false;
                Toast.makeText(getApplicationContext(), "Repeat is OFF",
                        Toast.LENGTH_SHORT).show();
                btnRepeat.setImageResource(R.drawable.btn_repeat);
            } else {
                // make repeat to true
                isRepeat = true;
                Toast.makeText(getApplicationContext(), "Repeat is ON",
                        Toast.LENGTH_SHORT).show();
                // make shuffle to false
                isShuffle = false;
                btnRepeat.setImageResource(R.drawable.btn_repeat_focused);
                btnShuffle.setImageResource(R.drawable.btn_shuffle);
            }
        }
    });

    /**
     * Button Click event for Shuffle button Enables shuffle flag to true
     * */
    btnShuffle.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (isShuffle) {
                isShuffle = false;
                Toast.makeText(getApplicationContext(), "Shuffle is OFF",
                        Toast.LENGTH_SHORT).show();
                btnShuffle.setImageResource(R.drawable.btn_shuffle);
            } else {
                // make repeat to true
                isShuffle = true;
                Toast.makeText(getApplicationContext(), "Shuffle is ON",
                        Toast.LENGTH_SHORT).show();
                // make shuffle to false
                isRepeat = false;
                btnShuffle.setImageResource(R.drawable.btn_shuffle_focused);
                btnRepeat.setImageResource(R.drawable.btn_repeat);
            }
        }
    });

    /**
     * Button Click event for Play list click event Launches list activity
     * which displays list of songs
     * */
    btnPlaylist.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent i = new Intent(getApplicationContext(),
                    PlayListActivity.class);
            startActivityForResult(i, 100);
        }
    });

}

/**
 * Receiving song index from playlist view and play the song
 * */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == 100) {
        currentSongIndex = data.getExtras().getInt("songIndex");
        // play selected song
        playSong(currentSongIndex);
    }

}

/**
 * Function to play a song
 * 
 * @param songIndex
 *            - index of song
 * */
public void playSong(int songIndex) {
    // Play song
    try {
        mp.reset();
        mp.setDataSource(songsList.get(songIndex).get("songPath"));
        mp.prepare();
        mp.start();
        // Displaying Song title
        String songTitle = songsList.get(songIndex).get("songTitle");
        songTitleLabel.setText(songTitle);

        // Changing Button Image to pause image
        btnPlay.setImageResource(R.drawable.btn_pause);

        // set Progress bar values
        songProgressBar.setProgress(0);
        songProgressBar.setMax(100);

        // Updating progress bar
        updateProgressBar();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

/**
 * Update timer on seekbar
 * */
public void updateProgressBar() {
    mHandler.postDelayed(mUpdateTimeTask, 100);
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        mHandler.removeCallbacks(mUpdateTimeTask);
        mp.release();
    }
    return super.onKeyDown(keyCode, event);
}

/**
 * Background Runnable thread
 * */
private Runnable mUpdateTimeTask = new Runnable() {
    public void run() {
        long totalDuration = mp.getDuration();
        long currentDuration = mp.getCurrentPosition();

        // Displaying Total Duration time
        songTotalDurationLabel.setText(""
                + utils.milliSecondsToTimer(totalDuration));
        // Displaying time completed playing
        songCurrentDurationLabel.setText(""
                + utils.milliSecondsToTimer(currentDuration));

        // Updating progress bar
        int progress = (int) (utils.getProgressPercentage(currentDuration,
                totalDuration));
        // System.out.println("Progress : "+progress);
        songProgressBar.setProgress(progress);

        // Running this thread after 100 milliseconds
        mHandler.postDelayed(this, 100);
    }
};

/**
 * 
 * */
@Override
public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromTouch) {

}

/**
 * When user starts moving the progress handler
 * */
@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // remove message Handler from updating progress bar
    mHandler.removeCallbacks(mUpdateTimeTask);
}

/**
 * When user stops moving the progress hanlder
 * */
@Override
public void onStopTrackingTouch(SeekBar seekBar) {
    mHandler.removeCallbacks(mUpdateTimeTask);
    int totalDuration = mp.getDuration();
    int currentPosition = utils.progressToTimer(seekBar.getProgress(),
            totalDuration);

    // forward or backward to certain seconds
    mp.seekTo(currentPosition);

    // update timer progress again
    updateProgressBar();
}

/**
 * On Song Playing completed if repeat is ON play same song again if shuffle
 * is ON play random song
 * */
@Override
public void onCompletion(MediaPlayer arg0) {

    // check for repeat is ON or OFF
    if (isRepeat) {
        // repeat is on play same song again
        playSong(currentSongIndex);
    } else if (isShuffle) {
        // shuffle is on - play a random song
        Random rand = new Random();
        currentSongIndex = rand.nextInt((songsList.size() - 1) - 0 + 1) + 0;
        playSong(currentSongIndex);
    } else {
        // no repeat or shuffle ON - play next song
        if (currentSongIndex < (songsList.size() - 1)) {
            playSong(currentSongIndex + 1);
            currentSongIndex = currentSongIndex + 1;
        } else {
            // play first song
            playSong(0);
            currentSongIndex = 0;
        }
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
    mp.release();
} 
```

}

# gwt - GWT 中的 LongBox - 删除千位分隔符格式

> ID：15978638
> 
> 赞同：2
> 
> 时间：2013-04-12T18:44:10.163
> 
> 标签：gwt

我想在 GWT LongBox 中格式化一个数字 例如：我有一个数字：2,134，我不想在这里显示千位分隔符（，），而是想显示为 2134。

我们如何在 GWT 中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:54:31.890

最好的选择是实现自己的`LongBox`小部件：

```
public class MyLongBox extends ValueBox<Long> {
  public MyLongBox() {
    super(Document.get().createTextInputElement(), 
          new AbstractRenderer<Long>() {
            public String render(Long l) {
              return l == null ? "" : l.toString();
            }
          },
          LongParser.instance());
  }
}

MyLongBox lb = new MyLongBox();
lb.setValue(2134l);
RootPanel.get().add(lb); 
```

但是如果你不能改变你的用户界面，你可以改变全局`decimalFormat`变量。

```
private static native void changeCachedDecimalFormat(NumberFormat f) /*-{
  @com.google.gwt.i18n.client.NumberFormat::cachedDecimalFormat = f;
}-*/;

changeCachedDecimalFormat(NumberFormat.getFormat("###0"));

LongBox lb = new LongBox();
lb.setValue(2134l);
RootPanel.get().add(lb); 
```

# ad-hoc-distribution - IOS Ad Hoc 分发链接什么都不做

> ID：15978642
> 
> 赞同：2
> 
> 时间：2013-04-12T18:44:27.647
> 
> 标签：ad-hoc-distribution, ios6.1

试图创建一个用于测试的发行版。当在 ios 设备上的 safari 中单击该链接时，没有任何反应（字面意思。没有错误）。我们正在使用企业证书和通用分发配置文件。mime 类型是正确的，一切都很好，直到我们移动到 Web 服务器上的一个新文件夹。请帮忙。如果有办法查看 safari 中的错误，那将是一个好的开始。

这是相关的代码。

## html

```
<html>
<head>
<title>
test
</title>
</head> 
<body>
<center>
<h1>Test</h1>
<a href=itms-services://?action=download-manifest&url=http://uri/app.plist>Install</a>
</center>
</body>
</html> 
```

## 列表

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>items</key>
    <array>
    <dict>
            <key>assets</key>
            <array>
                <dict>
                    <key>kind</key>
                    <string>software-package</string>
                    <key>url</key>
                    <string>http://uri/app.ipa</string>
                </dict>
            </array>
            <key>metadata</key>
            <dict>
                <key>bundle-identifier</key>
                <string>appId</string>
                <key>bundle-version</key>
                <string>1</string>
                <key>kind</key>
                <string>software</string>
                <key>title</key>
                <string>apptitle</string>
            </dict>
        </dict>
    </array>
</dict>
</plist> 
```

## 编辑

擦拭有问题的 iPad 似乎可行，但如果它发生在个人设备上，这并不是一个真正可行的解决方案。还有其他可能的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-18T16:03:22.883

我在 iOS8 上遇到了同样的问题。安装按钮将在 Safari 中自动禁用。原因是我的 plist 文件无效。起初这似乎很奇怪，但显然 Safari 在您单击它之前会检查该链接。我从以前的版本中获取了 plist 文件的副本，并且（在更新应用程序版本号之后）它可以工作。还值得注意的是，Xcode 6 不会像旧版本那样生成 plist 文件。有关 Xcode 6/plist 的更多信息，您也可以查看此链接：

[Xcode 6 Save for Enterprise Deployment 不再为 ipa 创建 plist？](https://stackoverflow.com/questions/25910387/xcode-6-save-for-enterprise-deployment-does-not-create-plist-for-ipa-anymore)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:34:11.263

我遇到了这个问题，使用 Xcode 4.6.2（4 月 15 日发布）重建和归档已经为我解决了这个问题。

# python - 列表：如何从最大计数创建新列表

> ID：15978643
> 
> 赞同：0
> 
> 时间：2013-04-12T18:44:34.600
> 
> 标签：python, list, python-3.x

```
def validateGuess():
    print(letters)
    inputGuess= input("Choose one of the letters above:")
    return inputGuess

def wordLength():
    length=input("Welcome to Hangman. How many letters in the secret word?")
    length1=int(length)
    if length1 <0:
        length=input("Welcome to Hangman. How many letters in the secret word?")
    return length    

def guessAmount():
    guesses=input("How many guesses would you like?")
    guesses1=int(guesses)
    if guesses1 < 0:
        guesses=input("How many guesses would you like?")
    return guesses

welcome=wordLength()
remain=input("Do you want to print the count of how many words remain [Y/N]?")
guessNumber=int(guessAmount())
F=open('dictionary.txt')
F1=F.readlines()

welcome2=int(welcome)
a_list=[word.strip('\n') for word in F1]
possible_words = [x for x in a_list if len(x) == welcome2]

letters= ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']

while guessNumber >0:
    letter_guess=validateGuess()
    letters.remove(letter_guess)
    guessNumber -= 1
    result={}
    for word in possible_words:
        key=' '.join(letter_guess if c == letter_guess else '-' for c in word)
        if key not in result:
            result[key]=[]
        result[key].append(word)
    inverse= [(len(value), key) for key, value in result.items()]
    Answer=max(inverse)[1]
    possible_words=result.values()
    print() 
```

我正在用 Python 编写一个名为 Evil Hangman 的程序。基本上，给定一个 170,000 个单词的列表，我必须尽可能让用户获胜。所以对于每个用户的猜测，比如“A”，我根据“A”在单词中出现的位置将单词放入族中，然后选择**最大的族**并打印“A”在该族中出现的位置。无论用户决定多久，这都会持续下去。我的问题是我想不出一种方法来为我的 while 循环创建一个新的单词列表。这个新列表将只包含**最大家族**中的单词。我想，

```
for word in max(result):
     possible_words+=word 
```

会起作用，但我不知道为什么它不起作用。非常感谢任何和所有帮助。另外，我是 Python 的新手，并且尽我所能解释了我的问题，但是如果您有任何问题，请不要犹豫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:51:07.447

通过查看代码，您似乎可以从此更改 while 循环的结尾：

```
Answer=max(inverse)[1]
possible_words=result.values() 
```

对此：

```
Answer=max(inverse)[1]
possible_words=result[Answer] 
```

因为`Answer`will be the key from `result`that 给你最大的家庭，`result[Answer]`将是那个最大的家庭，你可以重新分配`possible_words`给那个值。

# jquery - 带有 setinterval 的 jQuery 动画

> ID：15978645
> 
> 赞同：4
> 
> 时间：2013-04-12T18:44:40.970
> 
> 标签：jquery

我的 jQuery 代码：

```
 $(document).ready(function(){
        setinterval(function(){
        $("#animate").animate({'margin-left':'50px'},1000)
        $("#animate").animate({'margin-left':'-50px'},1000)
        },2000); 

        }); 
```

HTML：

```
<div id="animate">sdfdsfdsfsdfsdfds</div> 
```

我想做每5秒一次的动画。怎么了？谢谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T18:55:33.693

我的首选解决方案。这样，您的动画将 100% 真正同步，并且不会受到重叠动画的影响。相信我，虽然其他答案使用`setInterval()`并且“看起来”像它一样有效，但由于 javascript 的异步特性，这些解决方案在足够的迭代后会莫名其妙地失败。此外，它只对元素进行*一次*DOM 查找，并使其成为 jQuery 对象一次。

```
jQuery(function($){
    (function swoop(element) {
        element
            .animate({'margin-left':'50px'}, 1000)
            .animate({'margin-left':'-50px'}, 1000, function(){
                setTimeout(function(){
                    swoop(element);
                }, 5000);
            });
    })($('#animate'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:47:41.820

[http://jsfiddle.net/3GHaf/](http://jsfiddle.net/3GHaf/)

`setInterval`区分大小写。骆驼案它和它的工作原理。

# go - 处理整数列表和查找、添加和删除的最佳方法

> ID：15978646
> 
> 赞同：2
> 
> 时间：2013-04-12T18:44:42.503
> 
> 标签：go

我需要创建一个整数列表，并能够快速添加、删除和查找该列表中的项目。虽然我可以创建一个包含它们的字符串和一个处理添加/删除/定位的函数，但如果 Go 可以为我处理它显然更有意义。我查看了容器/列表，它似乎并不完全合适，但也许我错了。

为了快速实现某些东西，我使用的是整数数组，但这远非理想，我需要找到更好的解决方案。该列表可能最多包含 1,000 个值。

有人可以建议在 Go 中处理此问题的“最佳”方法吗？一个例子值 1000 字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:30:19.183

您的问题没有“最佳”方式，因为您没有说明您想做什么或哪种表现对您很重要。数据结构的问题在于，每个结构的性能都取决于环境。一般来说，我会说整数切片对于 1000 个条目的性能相当好，而且使用起来并不难。Nick 提出的解决方案也很有吸引力，因为它`O(1)`为您的值提供了查找时间（平均！），而不是 数组中的`O(n)`（未排序）或 （排序）搜索时间。`O(log n)`

按照您的建议，Go 提供了一些操作来实现`[]int`商店：

*   **得到**：`x[i]`
*   **insert** : `x[i] = j`or `x = append(x, j)`or 使用排序插入
*   **删除**：`x = append(x[:i], x[i+1:]...)`
*   **search**：如果你使用了排序插入，你可以使用[`sort.SearchInts`](http://golang.org/pkg/sort/#SearchInts)，否则你需要循环和线性搜索。

有关切片的更多操作，请参见[此处](https://code.google.com/p/go-wiki/wiki/SliceTricks)。

以下示例 ( [playground](http://play.golang.org/p/s1c4wz5ZEe) ) 为您提供`[]int` 了`O(log n)`搜索和`O(n)`插入的时间。按索引检索、删除和设置当然是`O(1)`.

```
type Ints []int

// Insert v so that ints is sorted
func (ints *Ints) Append(v int) {
    i := sort.SearchInts(*ints, v)
    *ints = append((*ints)[:i], append([]int{v}, (*ints)[i:]...)...)
}

// Delete by index
func (ints *Ints) Delete(i int) {
    *ints = append((*ints)[:i], (*ints)[i+1:]...)
}

func (ints Ints) Search(v int) (int, bool) {
    i := sort.SearchInts(ints, v)
    return i, i < len(ints) && ints[i] == v
}

data := make(Ints, 0, 1000)
data.Append(100)
index,ok := data.Search(10) 
```

正如您在示例中看到的`Append`，根据大小搜索插入新值的位置，有效地按升序对切片的内容进行排序。这使得通过 使用二分搜索成为可能`sort.SearchInts`，将搜索时间从 减少`O(n)`到`O(log n)`。随之而来的是在插入时进行排序的成本，而这又是通过搜索插槽来完成的，`O(log n)`在最坏的情况下这会花费成本。因此，插入也是`O(log n)`如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:17:05.873

为了保持简单，我会使用[map](http://golang.org/doc/effective_go.html#maps)。地图非常快速、高效且内置。

（[游乐场链接](http://play.golang.org/p/oVoTaD9dff)）

```
package main

import "fmt"

func main() {
    // Make our collection of integers
    xs := make(map[int]bool)

    // Add some things to the collection
    xs[1] = true
    xs[2] = true
    xs[3] = true

    // Find them
    if xs[2] {
        fmt.Println("Found 2")
    } else {
        fmt.Println("Didn't Find 2")
    }
    if xs[8] {
        fmt.Println("Found 8")
    } else {
        fmt.Println("Didn't Find 8")
    }

    // Delete them
    delete(xs, 2)

    // List them
    for x := range xs {
        fmt.Println("Contents", x)
    }
} 
```

哪个生产

```
找到 2
没找到 8
内容 3
内容 1

```

此解决方案的唯一缺点可能是整数没有按任何特定顺序保存，这对您的应用程序可能很重要，也可能不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:48:53.620

这实际上更像是一个抽象的数据结构问题。答案取决于您的用例。对于一般情况（看看`append`等），一片整数会很好，但是如果你想找到比 O(n) 更好的项目，那么你会希望它们被排序，并且插入到排序`int[]`中的情况最糟糕O(n) iirc 的情况。

所以问题是您要优化、索引、添加、删除或搜索哪个？

# xpath - xpath - assertTextPresent 在 UL 中找不到文本，为什么不呢？

> ID：15978650
> 
> 赞同：0
> 
> 时间：2013-04-12T18:44:54.253
> 
> 标签：xpath, selenium, assert

如果我有一个清单：

```
<html>
<head>
</head>
<body>
<ul>
  <li><span class="A">Vans</span></li>
  <li><span class="B">Cars</span></li>
  <li><span class="B">Trucks</span></li>
  <li><span class="C">Vans</span></li>
  <li><span class="C">Cars</span></li>
  <li><span class="C">Trains</span></li>
  <li><span class="C">Cars</span></li>
  <li><span class="C">Bikes</span></li>
</ul>
</body>
</html> 
```

如何检查最后一个“汽车”项目是否存在？

我正在尝试使用 assertTextPresent

我正在使用`//ul//li//span[contains(text(),'Cars')][last()]`目标，但是这是选择第**一个**“汽车”行，因为包含文本的跨度在 li 内

我也尝试过`//span[last()][contains(text(),'Cars')]`，但这也选择了第一个“汽车”而不是最后一个。

我也尝试过`//span[contains(text(),'Cars')][last()]`，但结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:42:49.100

如果您试图找出最后的文本是否`<li>`是“汽车”，那么：

```
//ul//li[last()][.="Cars"] 
```

使用[Nokogiri](http://nokogiri.org)进行测试，它使用 libxml2 (XPath 1.0)：

```
require 'nokogiri'
doc = Nokogiri.HTML('<html><head></head><body>
<ul>
  <li><span class="A">Vans</span></li>
  <li><span class="B">Cars</span></li>
  <li><span class="B">Trucks</span></li>
  <li><span class="C">Vans</span></li>
  <li><span class="C">Cars</span></li>
  <li><span class="C">Trains</span></li>
  <li><span class="C">Cars</span></li>
  <li><span class="C">Bikes</span></li>
</ul>
</body></html>')

puts doc.at_xpath('//ul//li[last()]')
#=> <li><span class="C">Bikes</span></li>

puts doc.at_xpath('//ul//li[last()][.="Cars"]')
#=> nil

puts doc.at_xpath('//ul//li[last()][.="Bikes"]')
#=> <li><span class="C">Bikes</span></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:15:39.153

假设你的意思是“*最后一个“汽车”项目*`<li><span class="C">Cars</span></li>`，你几乎是对的。你想要`(//ul/li/span[contains(text(),'Cars')])[last()]`，这意味着“元素集合中的最后一个元素，这些元素是`<span>`s 包含“汽车”并包含在`<li>`s 中包含的`<ul>`s 中。

# php - PHP 在 localhost 上部分解释

> ID：15978655
> 
> 赞同：0
> 
> 时间：2013-04-12T18:45:17.590
> 
> 标签：php, localhost

几天前一切都很好，但是今天，在我的一个本地站点上，PHP 被部分解释了。

我的脚本：

索引.php

```
<?php
##############################################################
## Définitions des chemins d'accès à / et au dossier admin  ##
## Initialisation de l'interface                            ##
##############################################################
DEFINE('ROOT_PATH', '');
DEFINE('ADMIN_PATH', ROOT_PATH . 'admin/');
require_once(ROOT_PATH . 'init.php');

##############################################################
## Définitions des scripts/styles à charger pour la page    ##
##############################################################
$scripts_to_load = array();
$styles_to_load = array();

##############################################################
## Traitements PHP                                          ##
##############################################################
if(isset($_POST['action']) && $_POST['action'] == 'rate') {

    // on stocke les données postées en session
    $_SESSION['form-rating'] = $_POST;

    // on vérifie qu'aucun champ obligatoire n'est vide
    if(!empty($_POST['server']) && !empty($_POST['name']) && !empty($_POST['rating'])) {

        // on vérifie si le summoner existe dans la base de données
        $handler_summoners = new Handler_Summoners();
        $summoner = $handler_summoners->get_summoner_from_server_and_name($_POST['server'], $_POST['name']);

        // si le summoner n'existe pas encore, on le créé
        if(!$summoner) {
            $summoner = new Summoner();
            $summoner->server_id    = $_POST['server'];
            $summoner->name         = $_POST['name'];
            $summoner->create();
        } 
```

以及在 localhost 上呈现在 Firefox 上的内容：

> get_summoner_from_server_and_name($_POST['server'], $_POST['name']); // si le caller n'existe pas encore, on le crÃ©Ã© if(!$summoner) { $summoner = new Summoner(); $summoner->server_id = $_POST['server']; $summoner->name = $_POST['name']; $summoner->create(); } // 在实例 le 投票上 $rating = new Rating(); $rating->summoner_id = $summoner->id; $rating->rating = $_POST['rating']; $rating->comment = $_POST['comment']; $rating->ip = $_SERVER['REMOTE_ADDR']; // 验证 que le vote est permis if($rating->is_permitted()) { // 注册投票 $rating->create(); // 通知 $notice = new Notice('success', '谢谢！您的选择已成功提交。'); $notice->sessionize(); } else { // 注意 $notice = new Notice('danger', “抱歉，但是……你最近评价了这位召唤师。再等一会儿再给这个召唤师评分。'); $notice->sessionize(); } } else { // 通知 $notice = new Notice('danger', '对不起，但是...一个或多个字段为空。'); $notice->sessionize(); } // 重定向头('Location: index.php'); 出口（）; } ################################################ ############# ## 收费du header ## ############################## ############################### require_once(ROOT_PATH . 'includes/inc.head.php'); ?> _s($config->site_name); ?> ); $notice->sessionize(); } // 重定向头('Location: index.php'); 出口（）; } ################################################ ############# ## 收费du header ## ############################## ############################### require_once(ROOT_PATH . 'includes/inc.head.php'); ?> _s($config->site_name); ?> ); $notice->sessionize(); } // 重定向头('Location: index.php'); 出口（）; } ################################################ ############# ## 收费du header ## ############################## ############################### require_once(ROOT_PATH . 'includes/inc.head.php'); ?> _s($config->site_name); ?>

```
Home
About
Contact 
```

就像我的 PHP 脚本的开头没有被服务器解释（我可以看到 CSS 和 JS 文件没有加载），并且从第 29 行开始，PHP 在页面中被输出。

在我的远程服务器上，一切正常，页面完美呈现。

我正在使用 EasyPHP：APACHE 2.4.2
MYSQL 5.5.27 PHP 5.4.6

几天前，我卸载了一个恶意浏览器插件（安装在 FF、Chrome 和 IE 上），它在我的网页上的随机单词上注入了增强的链接工具提示（带有一些随机的网站截图）。这可能有关系吗？

对如何解决我的 PHP 问题有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:52:27.003

看起来您的 PHP 不再在本地解析。您确定您是通过启用 php 的 Web 服务器而不是直接从文件系统请求脚本。（您的网址是否以 file:// 开头？）

如果这不是问题，您应该查看最近对 php.ini 和 httpd.conf（或 IIS 安装）所做的更改。

**编辑：**从评论中可以看出，它原来是一个 .htaccess

# php - Magento - Ajax 调用 PHP 不起作用

> ID：15978657
> 
> 赞同：0
> 
> 时间：2013-04-12T18:45:21.243
> 
> 标签：php, ajax, magento, xmlhttprequest

我将 Magento 安装在`local`.
我添加了我的 Ajax 代码`magento\app\design\frontend\base\default\template\catalog\product\view.phtml`

我正在尝试将一些变量发布到与`view.phtml`.

```
<script>
  function loadXMLDoc()
  {
      var user = "<?php echo $userId;?>";
      var product = "<?php echo $xxx;?>";
      var xmlhttp;
      if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
           xmlhttp=new XMLHttpRequest();
      }
      else
      {// code for IE6, IE5
           xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.open("POST","test.php",true);
      xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
      xmlhttp.send("userID="+user+"&productID="+product);
      }

      //this is just a countdown timer
     var timeLeft = 3; 
     var timer = window.setInterval(function() {
     timeLeft--;
     var minutesLeft = Math.floor(timeLeft / 60);
     var secondsLeft = timeLeft % 60;
     console.log('Time left: ' + minutesLeft + ':' + secondsLeft);
     if (timeLeft == 0) {
     window.clearInterval(timer);
     // do some ajax thing

     loadXMLDoc();
         }
     }, 1000);
</script> 
```

基本上我会在几秒钟后将 2 个变量发布到 test.php。我很确定这些代码是有效的，但是当我在 magento 产品页面中尝试它们时。它不工作。我试图确定是否所有代码都在执行。一切运行良好，只有 Ajax 不会在 PHP 文件中发布。

在 test.php 文件中，我只获取 2 个变量并将其保存到位于同一文件夹中的 .txt 文件中。test.php 文件仅用于测试目的。

我所需要的只是让 Ajax 正常工作。我希望它发布到 test.php 但保持在同一页面上。

我用谷歌搜索并找到了一些解决方案，它似乎与 Magento 控制器或其他东西有某种联系。但我就是无法理解。

谁能告诉我是否有解决此问题的简单方法？

* * *

我添加这个只是为了让事情更清楚。

```
<?php

  if(isset($_POST['userID']))
  {   
     $userID = $_POST['userID'];
     $productID = $_POST['productID'];

     $file = "db.txt";

     $current = file_get_contents($file);

     $current .= "\n$userID \t $productID";

     file_put_contents($file, $current);
     }

  ?> 
```

并且 db.txt 与 test.php 放在同一文件夹中

如何知道是否正在调用 test.php？我试图检查 db.txt，但里面没有任何变化。

* * *

更正

我将 test.php 和 db.txt 放在根目录中。并改变

```
xmlhttp.open("POST","test.php",true) 
```

至

```
xmlhttp.open("POST","http://localhost/magento/test.php",true) 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:22:29.090

显然，由于您`test.php`旁边有 view.phtml，因此将无法`xmlhttp.open("POST","test.php",true);`请求 POST `/test.php`（这意味着应用程序根目录）。

请将`test.php`and`db.txt`放在根目录（与 Magento's 相同的位置`index.php`）

# sql-server - SSIS - 如何使用用户定义的变量作为数据库路径？

> ID：15978659
> 
> 赞同：1
> 
> 时间：2013-04-12T18:45:39.970
> 
> 标签：sql-server, ssis

我想让用户输入他们将使用的数据库路径。

例如：@SourceDB = DatabaseA.dbo。

然后我想在数据流或执行 SQL 任务中使用这些变量。

我的问题：如何引用这两个任务中的变量？这些方法似乎都不适合我：

```
SELECT Field1, Field2 FROM @SourceDB + tablename 
```

或者

```
"SELECT Field1, Field2 FROM " + @[User::SourceDB] + "tablename" 
```

或者

```
SELECT Field1, Field2 FROM ? tablename 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:54:30.647

您将无法将其用作参数`?`。其他人试图这样做并遇到你正在经历的事情。

我要做的是定义一个变量，称之为 SourceQuery，数据类型为 String，范围为包级别。在该变量 (F4) 的属性窗口中，将 EvaluateAsExpression 属性更改为 True。然后在表达式中使用您已经指定的公式。 `"SELECT Field1, Field2 FROM " + @[User::SourceDB] + "tablename"`

最后，在您的 中`OLE DB Source`，将访问模式更改为 table 或 view 为“来自变量的 SQL 命令”，然后一切就可以正常工作了。

需要注意的一个警告是，如果这些列的数据类型发生更改，您的 SSIS 包将无法通过验证步骤。

# php - 格式化 json 数据以在 Flot 中工作

> ID：15978662
> 
> 赞同：0
> 
> 时间：2013-04-12T18:45:40.427
> 
> 标签：php, javascript, json, flot

无论如何要转换这个json数据：

```
[

    {
        "year":"1999",
        "value":"3.0"
    },
    {
        "year":"2008",
        "value":"0.9"
    }

] 
```

喜欢这样：

```
{
    "data": [[1999, 3.0], [2008, 0.9]]
} 
```

检查值的类型（“3.0”和 3.0、字符串和整数）。

我很难弄清楚这一点，或者甚至有可能。

这就是我获取 json 数据的方式：我的数据库中有“数据”表，其中有“年份”和“值”列，我从数据库中获取它们，例如：

```
 $sql = mysql_query("SELECT * FROM data");
        $rows = array();
        while($r = mysql_fetch_assoc($sql)) {
            $rows[] = $r;
        }
        $encodedJson = json_encode($rows);

$encodedJson = json_encode($rows);
print $encodedJson; 
```

我正在尝试从我的数据创建一个图表，并且 json 数据必须正确格式化才能在[Flot](http://code.google.com/p/flot/)中工作。感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:52:13.403

您可以将对象数组*映射*到多维数组：

```
var mapped = originalData.map(function (obj) {
  return [ parseInt(obj.year, 10), parseFloat(obj.value) ];
});

var newData = {
  data: mapped
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:54:18.850

可能的解决方案

```
 var a = [

        {
            "year":"1999",
            "value":"3.0"
        },
        {
            "year":"2008",
            "value":"0.9"
        }

    ];

    var b = [];
    $.each(a, function(_index, _item){
        var c = [_item["year"], _item["value"]];
        b.push(c);
    });

console.log(b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:54:07.770

试试这个。PHP：

```
$sql = mysql_query("SELECT * FROM data");
 $rows = $sql->results_array();
$return_args = array();
foreach($rows as $row){
  $tmp[0] = $row['year'];
  $tmp[1] = $row['value'];
  array_push($return_args,$tmp);
}

 $encodedJson = json_encode($return_args);

 print $encodedJson; 
```

# php - 编辑表格以清理/验证电话号码

> ID：15978667
> 
> 赞同：10
> 
> 时间：2013-04-12T18:45:56.890
> 
> 标签：php, forms, email, filter-var

我在 PHP 方面的经验非常有限，我真的希望有人可以帮助我。

我想要做的是清理/验证电话号码输入，以便只允许数字。

我想我需要使用`FILTER_SANITIZE_NUMBER_INT`，但我不确定在哪里或如何使用它。

这是我的代码：

```
<?php

// Replace the email address with the one that should receive the contact form inquiries.
define('TO_EMAIL', '########');

$aErrors = array();
$aResults = array();

/* Functions */

function stripslashes_if_required($sContent) {

    if(get_magic_quotes_gpc()) {
        return stripslashes($sContent);
    } else {
        return $sContent;
    }
}

function get_current_url_path() {

    $sPageUrl = "http://".$_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
    $count = strlen(basename($sPageUrl));
    $sPagePath = substr($sPageUrl,0, -$count);
    return $sPagePath;
}

function output($aErrors = array(), $aResults = array()){ // Output JSON

    $bFormSent = empty($aErrors) ? true : false;
    $aCombinedData = array(
        'bFormSent' => $bFormSent,
        'aErrors' => $aErrors,
        'aResults' => $aResults
        );

    header('Content-type: application/json');
    echo json_encode($aCombinedData);
    exit;
}

// Check supported version of PHP
if (version_compare(PHP_VERSION, '5.2.0', '<')) { // PHP 5.2 is required for the safety filters used in this script

    $aErrors[] = 'Unsupported PHP version. <br /><em>Minimum requirement is 5.2.<br />Your version is '. PHP_VERSION .'.</em>';
    output($aErrors);
}

if (!empty($_POST)) { // Form posted?

    // Get a safe-sanitized version of the posted data
    $sFromEmail = filter_input(INPUT_POST, 'email', FILTER_SANITIZE_EMAIL);
    $sFromName = filter_input(INPUT_POST, 'name', FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_LOW);

    $sMessage  = "Name: ".stripslashes_if_required($_POST['name']);
    $sMessage .= "\r\nEmail: ".stripslashes_if_required($_POST['email']);
    $sMessage .= "\r\nBusiness: ".stripslashes_if_required($_POST['business']); 
    $sMessage .= "\r\nAddress: ".stripslashes_if_required($_POST['address']);
    $sMessage .= "\r\nPhone: ".stripslashes_if_required($_POST['phone']);
    $sMessage .= "\r\nMessage: ".stripslashes_if_required($_POST['message']);
    $sMessage .= "\r\n--\r\nEmail sent from ". get_current_url_path();

    $sHeaders  = "From: '$sFromName' <$sFromEmail>"."\r\n";
    $sHeaders .= "Reply-To: '$sFromName' <$sFromEmail>";

    if (filter_var($sFromEmail, FILTER_VALIDATE_EMAIL)) { // Valid email format?

        $bMailSent = mail(TO_EMAIL, "New inquiry from $sFromName", $sMessage, $sHeaders);
        if ($bMailSent) {
            $aResults[] = "Message sent, thank you!";
        } else {
            $aErrors[] = "Message not sent, please try again later.";
        }

    } else {
        $aErrors[] = 'Invalid email address.';
    }
} else { // Nothing posted
    $aErrors[] = 'Empty data submited.';
}

output($aErrors, $aResults); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T18:53:15.233

你看过 PHP 的[preg_replace](http://php.net/manual/en/function.preg-replace.php)函数吗？您可以使用 去除任何非数字字符`preg_replace('/[^0-9]/', '', $_POST['phone'])`。

过滤掉字符数据后，您可以随时检查它是否具有所需的长度：

```
$phone = preg_replace('/[^0-9]/', '', $_POST['phone']);
if(strlen($phone) === 10) {
    //Phone is 10 characters in length (###) ###-####
} 
```

您还可以使用 PHP 的[preg_match](http://php.net/manual/en/function.preg-match.php)函数，如[其他 SO question 中所述。](https://stackoverflow.com/questions/3090862/how-to-validate-phone-number-using-php)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-12T19:00:33.790

有几种方法可以做到这一点......示例：

```
// If you want to clean the variable so that only + - . and 0-9 can be in it you can:
$number = filter_var($number, FILTER_SANITIZE_NUMBER_INT);

// If you want to clean it up manually you can:
$phone = preg_replace('/[^0-9+-]/', '', $_POST['phone']);

// If you want to check the length of the phone number and that it's valid you can:
if(strlen($_POST['phone']) === 10) {
    if (!preg_match('/^[0-9-+]$/',$var)) { // error } else { // good }
} 
```

显然，可能需要根据国家和其他杂项因素进行一些编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:52:35.797

您可以尝试使用 preg_replace 过滤掉任何非数字字符，然后您可以检查剩余内容的长度以查看它是否是电话号码（应该是 7,9 或 10 位数字）

```
// remove anything thats not a number from the string
function only_numbers($number) { return preg_replace('/[^0-9]/', '', $number) };
// test that the string is only 9 numbers long
function isPhone($number) { return strlen(only_numbers($number)) == 9; } 
```

只需确保`only_numbers`在验证后使用该值时使用该值。

-肯

# wordpress - Wordpress 缩略图宽度/高度图像不会改变大小 - 停留在 300 像素

> ID：15978668
> 
> 赞同：0
> 
> 时间：2013-04-12T18:46:03.377
> 
> 标签：wordpress, dimensions

我已经尝试通过设置>媒体编辑wordpress上缩略图的默认图像大小，适用于中型和小型图像，但似乎没有什么不同。

我也多次重新生成缩略图，删除并重新上传它们，但它们似乎仍然不会从 300 移动。

当我查看源代码时，缩略图解析为：

> img 宽度="300" 高度="300" src="

并且完全忽略了通过管理员 cp 设置的尺寸。

当我从自定义模板更改为 211 时，尺寸从 300 更改为 288 像素。

这些维度是从哪里拉出来的？它开始让我发疯了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:07:26.303

尝试使用这样的插件重建缩略图：[http ://wordpress.org/extend/plugins/ajax-thumbnail-rebuild/screenshots/](http://wordpress.org/extend/plugins/ajax-thumbnail-rebuild/screenshots/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:52:25.883

尝试这个：

```
 set_post_thumbnail_size( 300, 200 ); 
```

如果你想使用不同的尺寸，你可以这样做：

1.）在functions.php中设置所需的图像大小

```
add_image_size( 'smallFeaturedImage', 150, 100, true ); 
```

2.)`the_post_thumbnail`在模板中找到函数并修改如下：

```
the_post_thumbnail( 'smallFeaturedImage' ); 
```

# python - 通过文件处理进行长度切割

> ID：15978675
> 
> 赞同：9
> 
> 时间：2013-04-12T18:46:19.463
> 
> 标签：python, python-2.7

我有 2 个代码与我要求的工作相同，但我仍然没有为我的数据集获得任何有用或更好的代码以使其对我有用，首先让我清楚我在做什么。我有`2 TEXT`文件，一个名为 as `input_num`，第二个名为 as ，从其中有数字的`input_data`名称中可以清楚地看出，其中有数据，这两个文件的大小为 8 到 10 mb，让我向您展示它们的一部分，这是'input_num.txt'`input_num.txt``input_data`

```
ASA5.txt DF4E6.txt DFS6Q7.txt 
```

和这个`input_data.txt`

```
>56|61|83|92|ASA5
Dogsarebarking 
```

这2个是他们的文本文件的一些部分，`input_data.txt`最后一列包含`ASA5`等等，这些是来自的数据`input_num.txt`，所以程序首先检查最后一列是`>56|61|83|92|ASA5`而`ASA5`不是goto `input_num.txt`，`5`它包含一些`input_num.txt`像`4`上面一样的值，所以它回到`input_data.txt`goto 单词并将它们削减为 4 ，

我有 2 个代码：1 是

```
import os
import re
file_c = open('num_data.txt')
file_c = file_c.read()
lines = re.findall(r'\w+\.txt \d+', file_c)
numbers = {}

for line in lines:
    line_split = line.split('.txt ')
    hash_name = line_split[0]
    count = line_split[1]
    numbers[hash_name] = count
file_i = open('input_data.txt')
file_i = file_i.read()

for hash_name, count in numbers.iteritems():
    regex = '(' + hash_name.strip() + ')'
    result = re.findall(r'>.*\|(' + regex + ')(.*?)>', file_i, re.S)

    if len(result) > 0:
        data_original = result[0][2]
        stripped_data = result[0][2][int(count):]
        file_i = file_i.replace(data_original, '\n' + stripped_data)
f = open('input_new.txt', 'wt')
f.write(file_i)
f.close() 
```

第二个是

```
import csv
output = open('output.txt' , 'wb')
def get_min(num):
    return int(open('%s.txt' % num, 'r+').readlines()[0])
last_line = ''
input_list = []

#iterate over input.txt in sort the input in a list of tuples 
for i, line in enumerate(open('input.txt', 'r+').readlines()): 
    if i%2 == 0: 
        last_line = line
    else:
        input_list.append((last_line, line))
filtered = [(header, data[:get_min(header[-2])] + '\n' ) for (header, data) in input_list]
[output.write(''.join(data)) for data in filtered]
output.close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T17:59:41.537

据我从您对第一个代码的问题的描述中可以理解，您想要`N`输出中的第一个字母，而实际上您得到了除第一个`N`字母之外的所有内容。这可能可以通过更改来解决

```
stripped_data = result[0][2][int(count):] 
```

至

```
stripped_data = result[0][2][:int(count)] 
```

我也认为使用的正则表达式并不完全准确。我建议以下数字：

```
with open('num.txt') as nums:
    lines = re.findall(r'\w+\.txt\s+\d+', nums.read())

numbers = {}
for line in lines:
    line_split = re.split(r'\.txt\s+', line)
    count = line_split[1]
    numbers[line_split[0]] = int(line_split[1]) 
```

以及以下数据：

```
with open('input_data.txt') as file_i:
     data = file_i.read()

for name, count in numbers.iteritems():
    result = re.search(r'\|{}\n(.*?)(>|$)'.format(name), s, re.S)
    if result:
        data_original = result.group(1)
        stripped_data = data_original[:count]
        data = data.replace(data_original, stripped_data)
with open('input_new.txt', 'w') as f:
    f.write(data) 
```

但请注意，这个想法仍然存在缺陷，因为您可能会在执行时意外更改多个序列`replace`。此外，这种方法内存效率低，因为文件作为一个字符串读入内存。我建议对数据使用迭代解析器，就像我在下面提到的那样。

* * *

无论如何，如果我必须解决这个问题，我会用它[`pyteomics`](https://pyteomics.readthedocs.io/)来读写 FASTA 文件（因为我写了它并且总是很方便）。

的格式`input_num.txt`很糟糕，所以我认为您的第一个示例中的代码是提取信息的最佳方法。不过，我对其进行了一些修复：

```
import re
from pyteomics import fasta

with open('num.txt') as nums:
    lines = re.findall(r'\w+\.txt\s+\d+', nums.read())

numbers = {}
for line in lines:
    line_split = re.split(r'\.txt\s+', line)
    count = line_split[1]
    numbers[line_split[0]] = int(line_split[1])

with fasta.read('data.txt') as data:
    new_data = ((header, seq[:numbers.get(header.rsplit('|', 1)[-1])])
            for header, seq in data)
    fasta.write(new_data, 'new_data.txt') 
```

* * *

另一方面，由于您的数据看起来更像 DNA 序列，而 pyteomics 是针对蛋白质组学的，因此使用 可能更有意义[`BioPython.SeqIO`](http://biopython.org/wiki/SeqIO)：

```
import re
from Bio import SeqIO

with open('num.txt') as nums:
    lines = re.findall(r'\w+\.txt\s+\d+', nums.read())

numbers = {}
for line in lines:
    line_split = re.split(r'\.txt\s+', line)
    count = line_split[1]
    numbers[line_split[0]] = int(line_split[1])
data = SeqIO.parse(open('data.txt'), 'fasta')

def new_records():
    for record in data:
        record.seq = record.seq[:numbers.get(record.description.rsplit('|', 1)[-1])]
        yield record

with open('new_data.txt', 'w') as new_data:
    SeqIO.write(new_records(), new_data, 'fasta') 
```

# android - Android Facebook 异常

> ID：15978676
> 
> 赞同：0
> 
> 时间：2013-04-12T18:46:21.690
> 
> 标签：android, facebook, exception

Google Play 报告异常。有些人也在评论中抱怨。

我自己没有得到这样的例外。

我应该用 try/catch 包装什么来处理它？

或者我该如何解决？或者我如何获得完整的堆栈跟踪？

```
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=64206, result=0, data=null} to activity {com.roolez.tinshot/com.facebook.LoginActivity}: java.lang.NullPointerException
at android.app.ActivityThread.deliverResults(ActivityThread.java:3027)
at android.app.ActivityThread.handleSendResult(ActivityThread.java:3070)
at android.app.ActivityThread.access$1100(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1209)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4508)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.facebook.AuthorizationClient$KatanaProxyAuthHandler.onActivityResult(AuthorizationClient.java:645)
at com.facebook.AuthorizationClient.onActivityResult(AuthorizationClient.java:142)
at com.facebook.LoginActivity.onActivityResult(LoginActivity.java:134)
at android.app.Activity.dispatchActivityResult(Activity.java:4663)
at android.app.ActivityThread.deliverResults(ActivityThread.java:3023)
... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:05:48.313

我想我最近遇到了同样的问题。如果您更新 facebook-android-sdk，这应该可以解决。在这里查看差异：

[https://github.com/facebook/facebook-android-sdk/commit/ed74ff363e3a7c32b54567e68cc7e86ea27bdbd7#facebook/src/com/facebook/AuthorizationClient.java](https://github.com/facebook/facebook-android-sdk/commit/ed74ff363e3a7c32b54567e68cc7e86ea27bdbd7#facebook/src/com/facebook/AuthorizationClient.java)

特别是添加到文件第 619 行的空检查：

facebook/src/com/facebook/AuthorizationClient.java

# c - 为函数队列调度实现二维队列

> ID：15978678
> 
> 赞同：0
> 
> 时间：2013-04-12T18:46:30.493
> 
> 标签：c, embedded, queue

我正在编写一些 C 代码来模拟嵌入式系统的运行。事件从一定数量的设备发生，并被赋予优先级 0-3。我必须服务的事件的优先级主要基于设备编号（设备 0 > 设备 3 > 设备 7），然后每个设备服务的事件的优先级基于它们提供的优先级。

我得出的结论是 2D 队列可能是实现该系统的最佳方式。带有 for 循环的数组被认为是“浪费的”，并且大多数函数队列调度使用像 while(notEmpty) 这样的循环。

我的粗略计划是创建两个看起来像这样的“节点”结构：

```
struct events{
    Event curEvent; //the "node"
    struct events *next; //leads to event of lower priority
};
struct devices { //a linked list of Devices
    int deviceNumber; //the "node"
    struct devices *next;//leads to next device in order 0->max
    struct events *headEevent; //a linked list of events per device
}; 
```

我从命令行提供了要服务的设备数量和每个设备的最大事件数。

我想我的问题是双重的。首先是，我在正确的轨道上吗？第二个（也许更重要）是，“初始化这个 2D 队列的最佳方式是什么，以及在事件发生时将它们排入队列的最佳方式是什么？”

现在我的初始化代码是错误的，我觉得：

```
curDevice = (struct device * ) malloc (sizeof (struct device));
deviceHead = curDevice;//sets head to first that's initialized
for (i = 0; i< Number_Devices; i++) {
    curDevice -> deviceNumber = i;
    curEvent = (struct event * ) malloc (sizeof (struct event));
    curDevice -> headEvent = curEvent; //sets head event to the empty curEvent
    for (j = 0; j<Q; j++) { //Q is max queue size
        newEvent = (struct event* ) malloc (sizeof struct event));
        curEvent -> next = newEvent;
        curEvent = newEvent;
    }
    new_device = (struct device * ) malloc (sizeof (struct device));
    curDevice -> next = newDevice;
    curDevice = newDevice;
} 
```

我想我可以自己发现如何入队。我会使用 while 循环遍历链表，如果当前事件的优先级高于单个设备堆栈上的优先级，我会将其推到顶部。

这是一个漫长而复杂的问题，因此请随时询问您可能需要的任何说明。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:49:56.813

为什么不使用单个链表（队列）然后将任务插入到末尾。当您想选择下一个任务时，只需检查它并找到具有最高优先级的任务并从列表中删除。

# xna-4.0 - XNA Sprite 碰撞类部分不起作用

> ID：15978683
> 
> 赞同：0
> 
> 时间：2013-04-12T18:46:36.230
> 
> 标签：xna-4.0, collision, sprite

编辑：精灵是 derping。现在它只是有一些持续碰撞的问题。

所以我有一个逐像素的精灵碰撞类，它部分起作用，但只在右边。试图向左走会导致总是发生碰撞。这就是类本身。

```
 public Boolean collision(Texture2D first, Vector2 position1, Texture2D second, Vector2 position2)
    {

        //gets the bounds of the two sprites
        FirstBounds = new Rectangle((int)(position1.X),
        (int)(position1.Y), first.Width, first.Height);

        SecondBounds = new Rectangle((int)(position2.X),
        (int)(position2.Y), second.Width, second.Height);

        //if they intersect.
            if (FirstBounds.Intersects(SecondBounds))
            {

            Color[] DataA = new Color[first.Width * first.Height];
            first.GetData(DataA);

            Color[] DataB = new Color[second.Width * second.Height];
            second.GetData(DataB);

            int Top = System.Math.Max(FirstBounds.Top, SecondBounds.Top);
            int Bottom = System.Math.Min(FirstBounds.Bottom, SecondBounds.Bottom);
            int Left = System.Math.Max(FirstBounds.Left, SecondBounds.Left);
            int Right = System.Math.Min(FirstBounds.Right, SecondBounds.Right);

            for (int y = Top; y < Bottom; y++)
            {
                for (int x = Left; x < Right; x++)
                {
                    Color ColorA = DataA[(x - FirstBounds.Left) + (y - FirstBounds.Top) * FirstBounds.Width];
                    Color ColorB = DataB[(x - SecondBounds.Left) + (y - SecondBounds.Top) * SecondBounds.Width];

                    if (ColorA.A > 0 && ColorB.A > 0)
                    {
                        return true;
                    }

                }

            }

            return false;
            }

        return false;

    } 
```

这是我正在使用的整个类的代码，是的，它是主类。

```
/// <summary>
/// This is the main type for your game
/// </summary>
public class Game1 : Microsoft.Xna.Framework.Game
{

    // all graphics classes.
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    private AnimatedSprite animatedSprite;
    private AnimatedSprite background2;
    private AnimatedSprite Zero;
    private KeyboardState oldState;
    //starting place for Zero
    Vector2 lol = new Vector2(100, 200);

    Vector2 ground2 = new Vector2(0, 0);
    Vector2 ground = new Vector2(0, 0);
    Boolean jumping = false;

    Texture2D firstback;
    Texture2D texture2;
    Texture2D secondback;

   public Rectangle FirstBounds;
   public Rectangle SecondBounds;

    //Variables
    int timer = 0; //checks if it should update, helps to delay the update process.
    int jumptimer = 0;//uses as a timer for the amount of time you get to jump.
    int jumpanimation = 0;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        graphics.PreferredBackBufferHeight = 900;
        graphics.PreferredBackBufferWidth = 1000;
    }

    protected override void Initialize()
    {
        base.Initialize();
    }

    protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);

        firstback = Content.Load<Texture2D>("Tester");
        animatedSprite = new AnimatedSprite(firstback, 1, 1);

        secondback = Content.Load<Texture2D>("Tester2");
        background2 = new AnimatedSprite(secondback, 1, 1);

        //Creates the sprite for Zero, the main character.
        texture2 = Content.Load<Texture2D>("ZeroIdle");
        Zero = new AnimatedSprite(texture2, 1, 8);

        ground2 = new Vector2(ground.X + firstback.Width, 0);

    }

    protected override void UnloadContent()
    {
    }

    //Collision, took forever to figure out.
    public Boolean collision(Texture2D first, Vector2 position1, Texture2D second, Vector2 position2)
    {

        //gets the bounds of the two sprites
        FirstBounds = new Rectangle((int)(position1.X),
        (int)(position1.Y), first.Width, first.Height);

        SecondBounds = new Rectangle((int)(position2.X),
        (int)(position2.Y), second.Width, second.Height);

        //if they intersect.
            if (FirstBounds.Intersects(SecondBounds))
            {

            Color[] DataA = new Color[first.Width * first.Height];
            first.GetData(DataA);

            Color[] DataB = new Color[second.Width * second.Height];
            second.GetData(DataB);

            int Top = System.Math.Max(FirstBounds.Top, SecondBounds.Top);
            int Bottom = System.Math.Min(FirstBounds.Bottom, SecondBounds.Bottom);
            int Left = System.Math.Max(FirstBounds.Left, SecondBounds.Left);
            int Right = System.Math.Min(FirstBounds.Right, SecondBounds.Right);

            for (int y = Top; y < Bottom; y++)
            {
                for (int x = Left; x < Right; x++)
                {
                    Color ColorA = DataA[(x - FirstBounds.Left) + (y - FirstBounds.Top) * FirstBounds.Width];
                    Color ColorB = DataB[(x - SecondBounds.Left) + (y - SecondBounds.Top) * SecondBounds.Width];

                    if (ColorA.A > 0 && ColorB.A > 0)
                    {
                        return true;
                    }

                }

            }

            return false;
            }

        return false;

    }

    protected override void Update(GameTime gameTime)
    {

        KeyboardState state = Keyboard.GetState();

        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        //checks indivdual keystates, starts with if keys are down.

        if (state.IsKeyDown(Keys.Right) && state.IsKeyUp(Keys.Left))
        {

            if (state.IsKeyDown(Keys.Up))
            {

                //Makes it impossible to double jump. You need to wait until you finished your jump to jump again.

                if (oldState.IsKeyUp(Keys.Up) && jumping == false && (collision(firstback, ground, texture2, lol) == true || collision(secondback, ground2, texture2, lol) == true))
                {
                    texture2 = Content.Load<Texture2D>("ZeroJump");
                    Zero = new AnimatedSprite(texture2, 1, 14);
                    jumping = true;

                }
        }

            //checks to see if you've released the right key. Makes the game update properly.
            if (oldState.IsKeyUp(Keys.Right) && jumping == false && (collision(firstback, ground, texture2, lol) == true || collision(secondback, ground2, texture2, lol) == true))
            {
                texture2 = Content.Load<Texture2D>("ZeroRunning");
                Zero = new AnimatedSprite(texture2, 1, 11);

            }

            oldState = state;

            //Causes a delay to make sure Zero updates properly and not at 60 times per second.
            if (timer >=3)
            {

                //moves Zero.
                Vector2 adding = new Vector2(5, 0);
                lol = Vector2.Add(lol, adding);
                Zero.Update();

                timer = 0;
            }

            else
                timer++;

            Vector2 aSpeed = new Vector2(-5, 0);
            ground = Vector2.Add(ground, aSpeed);
            ground2 = Vector2.Add(ground2, aSpeed);
        }

        else if (state.IsKeyDown(Keys.Left) && state.IsKeyUp(Keys.Right))
        {

            if (state.IsKeyDown(Keys.Up))
            {

                //Makes it impossible to double jump. You need to wait until you finished your jump to jump again.

                if (oldState.IsKeyUp(Keys.Up) && jumping == false && (collision(firstback, ground, texture2, lol) == true || collision(secondback, ground2, texture2, lol) == true))
                {
                    texture2 = Content.Load<Texture2D>("ZeroJump");
                    Zero = new AnimatedSprite(texture2, 1, 14);
                    jumping = true;

                }

            }

            //checks to see if you've released the right key. Makes the game update properly.

            if (oldState.IsKeyUp(Keys.Left) && jumping == false && (collision(firstback, ground, texture2, lol) == true || collision(secondback, ground2, texture2, lol) == true))
            {
                texture2 = Content.Load<Texture2D>("ZeroRunningLeft");
                Zero = new AnimatedSprite(texture2, 1, 11);

            }

            oldState = state;

            //causes a delay in updating so Zero animates properly.
            if (timer >= 3)
            {
                //actually moves Zero.
                Vector2 adding = new Vector2(-5, 0);
                lol = Vector2.Add(lol, adding);
                Zero.Update();

                timer = 0;
            }

            else
                timer++;

                Vector2 aSpeed = new Vector2(5, 0);
                ground = Vector2.Add(ground, aSpeed);
                ground2 = Vector2.Add(ground2, aSpeed);
        }

        //Jumping State.
        if (state.IsKeyDown(Keys.Up))
        {

            //Makes it impossible to double jump. You need to wait until you finished your jump to jump again.

            if (oldState.IsKeyUp(Keys.Up) && jumping == false && (collision(firstback, ground, texture2, lol) == true || collision(secondback, ground2, texture2, lol) == true))
            {
                texture2 = Content.Load<Texture2D>("ZeroJump");
                Zero = new AnimatedSprite(texture2, 1, 14); 
                jumping = true;

            }

            oldState = state;

        }

        //Section that checks if the keys are up.

        if (state.IsKeyUp(Keys.Left) && state.IsKeyUp(Keys.Right) && jumping == false && (collision(firstback, ground, texture2, lol) == true || collision(secondback, ground2, texture2, lol) == true))
        {
            texture2 = Content.Load<Texture2D>("ZeroIdle");
            Zero = new AnimatedSprite(texture2, 1, 8);
            timer = 0;
            oldState = (new KeyboardState());
        }

        //Gravity effects and updates.

        if (jumping == true)
        {                
                Vector2 adding = new Vector2(0, -5);
                lol = Vector2.Add(lol, adding);

                //times the animation.
                if (jumpanimation >= 5)
                {

                    Zero.Update();
                    jumpanimation = 0;

                }

                else
                    jumpanimation++;

                jumptimer++;

                if (jumptimer >= 30)
                {
                    jumping = false;
                    jumptimer = 0;

                    //whenever the timer has expired.
                    if (collision(firstback, ground, texture2, lol) == false)
                    {
                        texture2 = Content.Load<Texture2D>("ZeroFalling");
                        Zero = new AnimatedSprite(texture2, 1, 4);
                    }

                    oldState = (new KeyboardState());

                }

        }

        else
        {
            if (collision(firstback, ground, texture2, lol) == false && collision(secondback, ground2, texture2, lol) == false)
            {
                Vector2 adding = new Vector2(0, 5);
                lol = Vector2.Add(lol, adding);
            }

            else if ((collision(firstback, ground, texture2, lol) == true || collision(secondback, ground2, texture2, lol) == true) == true && texture2 == Content.Load<Texture2D>("ZeroFalling"))
                oldState = (new KeyboardState());

        }

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        background2.Draw(spriteBatch, ground2);
        Zero.Draw(spriteBatch, lol);
        animatedSprite.Draw(spriteBatch, ground);

        base.Draw(gameTime);

    }

} 
```

}

我不完全确定出了什么问题，任何帮助表示赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:22:00.033

你在那里的一切看起来都是正确的，所以问题可能出在其他地方，例如，位置更新得太晚或太快。还有更多代码要发布吗？

我会推荐以下教程：

[http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started](http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started)

它将有助于正确设置动画类，因此正确的帧被用于检测。

# c# - 修改现有 AutoMapper 类型映射（用于单元测试）

> ID：15978685
> 
> 赞同：3
> 
> 时间：2013-04-12T18:46:46.060
> 
> 标签：c#, unit-testing, automapper

我使用[AssertConfigurationIsValid](https://github.com/AutoMapper/AutoMapper/wiki/Configuration-validation)方法对我的映射配置文件进行单元测试。为了让它接受我的映射，我需要明确忽略未映射的目标属性。这会污染我的映射代码并使其可读性降低。由于只有通过 AssertConfigurationIsValid 的单元测试才需要这样做，所以我想将“忽略”代码移到同一个单元测试中。

考虑一些映射配置文件类中的以下映射代码：

```
CreateMap<SourceType, DestinationType>()
   // here goes some actual mapping code:
   .ForMember(dest => dest.DestMember, opt => opt.MapFrom(src => src.SourceMember))
   // and then go the explicitly ignored unmapped dest members,
   // just for AssertConfigurationIsValid to pass:
   .ForMember(dest => dest.IgnoredMember, opt => opt.Ignore()); 
```

我想将后面的代码移动到单元测试方法中，所以它看起来像下面这样：

```
[TestMethod]
public void TestMappingConfiguration()
{
  Mapper.AddProfile<MyProfile>();
  Mapper.FindTypeMapFor<SourceType, DestinationType>()
    .ForMember(dest => dest.IgnoredMember, opt => opt.Ignore());
  Mapper.AssertConfigurationIsValid(MyProfile.Name);
} 
```

Mapper 类中已经有 FindTypeMapFor 方法，但我找不到将忽略的属性添加到映射的好方法。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T09:15:34.997

我已经成功地做到了我想要的。这是具有扩展方法的主类，用于将忽略的属性添加到现有地图：

```
 static class TypeMapExtensions
  {
    public static TypeMap<TSource, TDestination> AddIgnoredMember<TSource, TDestination>(
      this TypeMap<TSource, TDestination> typeMap, 
      Expression<Func<TDestination, object>> accessorExpression)
    {
      MemberInfo memberInfo = ReflectionHelper.FindProperty(accessorExpression);
      IMemberAccessor memberAccessor = memberInfo.ToMemberAccessor();
      var propertyMap = new PropertyMap(memberAccessor);
      propertyMap.Ignore();
      AddPropertyMap(typeMap.Map, propertyMap);
      return typeMap;
    }

    private static void AddPropertyMap(TypeMap typeMap, PropertyMap propertyMap)
    {
      typeMap.AddPropertyMap(propertyMap);
      if (typeMap.HasDerivedTypesToInclude())
      {
        IEnumerable<TypeMap> derivedMaps = GetDerivedMaps(typeMap);
        foreach (var derivedMap in derivedMaps)
          derivedMap.AddInheritedPropertyMap(propertyMap);
      }
    }

    private static IEnumerable<TypeMap> GetDerivedMaps(TypeMap typeMap)
    {
      return Mapper.GetAllTypeMaps().Where(
        map =>
          (map.Profile == typeMap.Profile) &&
          (typeMap.TypeHasBeenIncluded(map.SourceType, map.DestinationType)));
    }
  } 
```

类 TypeMap 只不过是对原始 TypeMap 的包装。通用版本的重点是允许流畅的语法（见下文）。

从 AutoMapper 源代码借用的 ReflectionHelper 类。它依赖于 AutoMapper.Internal 命名空间中的其他五个类，因此它们也是借用的。

最后，这一切让我可以编写以下代码：

```
TypeMap<SourceType, DestinationType>.Get()
  .AddIgnoredMember(dest => dest.IgnoredMember)
  .AddIgnoredMember(dest => dest.AnotherIgnoredMember); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T22:52:03.940

您最初是否可以忽略所有成员，然后为您需要的属性提供特定的映射？我之前创建了一个扩展来帮助解决这个问题：

```
public static IMappingExpression<TSource, TDest>
    IgnoreAllUnmapped<TSource, TDest>(
        this IMappingExpression<TSource, TDest> expression)
{
    expression.ForAllMembers(opt => opt.Ignore());
    return expression;
} 
```

然后你可以做类似的事情

```
CreateMap<SourceType, DestinationType>()
    .IgnoreAllUnmapped()
    .ForMember(d => d.DestMember, opt => opt.MapFrom(s => s.SourceMember)) 
```

# svg - paper.js、SVG 和 Opera 浏览器

> ID：15978686
> 
> 赞同：1
> 
> 时间：2013-04-12T18:47:00.517
> 
> 标签：svg, opera, paperjs

在 paperjs 中使用 SVG 图像时，发现 paperjs`importSvg()`在 Opera 下失败并出现奇怪的错误。

所以我做了一个解决方法。首先在其他浏览器中导入 SVG，然后将 paperjs 对象导出为 JSON。手动将我的几个 SVG 转换为 JSON。现在只需导入它们，`importJson()`不用担心....

但！`importJson()`仅在 paperjs 的夜间构建中实现，正如我后来发现的那样，在 Opera 下某些功能失败了！！

所以...我不知道）））有什么想法吗？

可能有一天 Opera 或 paperjs 的工作人员会来到这里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:42:39.903

Opera 有问题的 paper.js 中的行：

```
'stop-color': function(item, value) {
    item.setColor(value);
}, 
```

如果该`item.setColor`行被注释掉，您的示例将正常工作。

# jquery - 如何使用 AmplifyJS 使用可选数据构建请求？

> ID：15978690
> 
> 赞同：0
> 
> 时间：2013-04-12T18:47:36.570
> 
> 标签：jquery, ajax, amplifyjs

我有一个采用这种格式的 RESTful Web 服务：

```
/users?age={age} 
```

正如它所定义的那样，无论我是否添加年龄参数，Web 服务都可以正常工作。所以这两个例子都是正确的：

```
/users 
```

或者

```
/users?age=18 
```

放大的请求定义：

```
amplify.request.define( "usersService", "ajax", {
  url: "/users",
  type: "GET",
  data: {age : "{age}"}
}); 
```

有效的调用：

```
var myAge = 18;
amplify.request("usersService", {age : myAge}); 
```

结果是：

```
GET /users?age=18 
Response code: 200 OK 
```

调用不起作用：

```
var myAge = null;
amplify.request("usersService", {age : myAge}); 
```

结果是：

```
GET /users?age=
Response code: 400 BAD REQUEST 
```

未定义年龄时我期望的正确结果是：

```
GET/users
Response code: 200 OK 
```

知道如何使这个例子有效吗？

提前致谢。问候 Neuquino

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:32:18.290

尝试：

amplify.request("usersService", {});

amplify.request("usersService");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:57:28.403

解决方案不是在 request.define 中定义“数据”，也不是在调用中添加或不添加年龄属性。

```
var input = null;
if(myAge != null){
  input.age = myAge
}
amplify.request("usersService",input);

amplify.request.define( "usersService", "ajax", {
  url: "/users",
  type: "GET",    
}); 
```

输入被合并到正文中，因此如果为空，则不发送任何内容。

# java - 具有弱引用和身份哈希的并发集

> ID：15978692
> 
> 赞同：5
> 
> 时间：2013-04-12T18:47:39.287
> 
> 标签：java, concurrency, set, guava, weak-references

我想要一个对元素的弱引用的并发集合。我想用番石榴做这个`MapMaker`：

```
Set<Object> concurrentSet = Collections.newSetFromMap(
    new MapMaker<Object, Boolean>().weakKeys().makeMap()); 
```

Guava 会自动为您提供带有弱密钥的身份哈希。但是，事实证明`MapMaker`不允许类型参数。

```
file.java:123 type com.google.common.collect.MapMaker does not take parameters
                new MapMaker<Object, Boolean>().weakKeys().makeMap());
                            ^ 
```

任何解决方案如何获得对元素的弱引用的并发集？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-14T02:16:00.080

为了充实[接受的答案](https://stackoverflow.com/a/15978735/642706)和评论中暗示的代码，这是我自己对代码的看法，以获得并发弱集。

# Java，没有番石榴

使用类文档中建议的习语，使用[Collections.newSetFromMap](http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#newSetFromMap-java.util.Map-)将并发 Map 包装为 Set。用作`Boolean`地图的 Value 类型只是填充物，无关紧要。

```
Set< YourObjectTypeGoesHere > concurrentWeakSet = 
    Collections.synchronizedSet(
        Collections.newSetFromMap(
            new WeakHashMap< YourObjectTypeGoesHere , Boolean >()
        )
    )
; 
```

可以推断参数化类型，将代码简化为：

```
Set< YourObjectTypeGoesHere > concurrentWeakSet = 
    Collections.synchronizedSet(
        Collections.newSetFromMap(
            new WeakHashMap<>()     // Types inferred, so omitted.
        )
    )
; 
```

## 番石榴

或者，我们可以`MapMaker`从 Google Guava 库中使用。

我们没有使用该文档的示例包装[WeakHashMap](http://docs.oracle.com/javase/8/docs/api/java/util/WeakHashMap.html) ，而是根据 Guava 文档的建议将WeakHashMap 替换为来自[Google Guava](https://code.google.com/p/guava-libraries/)的[MapMaker](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MapMaker.html)`new MapMaker().weakKeys().makeMap()`的地图 call 。Guava 文档指出，此映射“使用对象标识比较键，而 WeakHashMap 使用`Object.equals`”。

# 用法

使用它比理解它更容易！

## 实例化

要创建并发弱集，请复制粘贴以下代码。替换两次出现的`YourObjectTypeGoesHere`.

```
int level = 16; // Basically, the approximate number of threads that may simultaneously try to mutate the map. See Guava doc.
ConcurrentMap<YourObjectTypeGoesHere , Boolean> concurrentWeakMap = new MapMaker().concurrencyLevel( level ).weakKeys().makeMap(); // Google Guava team recommends MapMaker > weakKeys > makeMap as a replacement for weakHashMap.
Set<YourObjectTypeGoesHere> concurrentWeakSet = Collections.newSetFromMap( concurrentWeakMap ); // Concurrency protection carries over to Set wrapper. 
```

## 添加

要添加到集合中：

```
concurrentWeakSet.add( myObject ); 
```

## 迭代

要访问集合中的元素：

```
Iterator<YourObjectTypeGoesHere> iterator = concurrentWeakSet.iterator();
while(iterator.hasNext()) {
    YourObjectTypeGoesHere myObject = iterator.next();
    if( myObject != null ) { // Not sure if needed. Is it possible for object to be garbage-collected but not yet have its entry removed from the Set/Map?
       // Work with the object.
    }
} 
```

# 去除

弱意味着不需要删除元素。随着元素被废弃和垃圾收集，它们从我们的集合（Map/Set）中消失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T18:50:16.363

如[文档中所述](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MapMaker.html)，`MapMaker`不是泛型类型；它是`<Object, Object>`。这意味着您可以将任何内容作为键或值，您只需要在检索时进行转换。引用链接：

```
 ConcurrentMap<Request, Stopwatch> timers = new MapMaker()
       .concurrencyLevel(4)
       .weakKeys()
       .makeMap(); 
```

要获取条目，您只需`Set`调用.`Map`[`Map#entrySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T11:09:29.320

您的原始方法可以正常工作，您只需将类型参数放在调用`makeMap()`

```
Set<Object> concurrentSet = Collections.newSetFromMap(
new MapMaker().weakKeys().<Object, Boolean> makeMap()); 
```

使用 Java 较少使用的泛型方法调用语法。 [Java 规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12)。

# android - 按钮与 AdView 的对齐方式

> ID：15978696
> 
> 赞同：0
> 
> 时间：2013-04-12T18:47:54.807
> 
> 标签：android, alignment, adview

我有一个 Layout for Android 应用程序，里面有几个按钮。我正在尝试在页面底部设置广告。请参考我下面的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/MainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_color"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/adView"
        android:paddingBottom="@dimen/activity_vertical_margin"
        android:paddingLeft="@dimen/activity_horizontal_margin"
        android:paddingRight="@dimen/activity_horizontal_margin"
        android:paddingTop="@dimen/activity_top_margin" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left|center_vertical"
                android:text=""
                android:textColor="@color/text_color"
                android:textSize="@dimen/nav_text_size" >
            </TextView>

            <Button
                android:id="@+id/ProceedToScreen31"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableRight="@drawable/ic_action_name"
                android:gravity="left|center_vertical"
                android:text="@string/TA1"
                android:textColor="@color/btn_text_color"
                android:textSize="@dimen/button_text_size" >
            </Button>

            <Button
                android:id="@+id/ProceedToScreen32"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableRight="@drawable/ic_action_name"
                android:gravity="left|center_vertical"
                android:text="@string/TA2"
                android:textColor="@color/btn_text_color"
                android:textSize="@dimen/button_text_size" >
            </Button>

            <Button
                android:id="@+id/ProceedToScreen33"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableRight="@drawable/ic_action_name"
                android:gravity="left|center_vertical"
                android:text="@string/TA3"
                android:textColor="@color/btn_text_color"
                android:textSize="@dimen/button_text_size" >
            </Button>

            <Button
                android:id="@+id/ProceedToScreen34"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableRight="@drawable/ic_action_name"
                android:gravity="left|center_vertical"
                android:text="@string/TA4"
                android:textColor="@color/btn_text_color"
                android:textSize="@dimen/button_text_size" >
            </Button>

            <View
                android:layout_width="match_parent"
                android:layout_height="2dip"
                android:background="@color/line_color" >
            </View>

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/copyright"
                android:textColor="@color/text_color"
                android:textSize="@dimen/small_text_size" >
            </TextView>
        </LinearLayout>
    </ScrollView>

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:adSize="BANNER"
        ads:adUnitId="@string/MY_AD_UNIT_ID"
        ads:loadAdOnCreate="true" />

</RelativeLayout> 
```

广告完美地作为固定页脚进入页面底部（根据我的要求），但随着页面的其他组件也进入页面底部，页面顶部的空间很大。请帮助我如何对齐以便只有广告应该到达页面底部，其余所有组件都应该从页面顶部开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:25:36.973

这是因为滚动视图中的这一行：

`android:layout_above="@+id/adView"`

这样做是因为您基本上是在告诉它，“*就*在 adView 上方，放置 ScrollView。” 只是删除它为我修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:36:26.907

谢谢大家的输入，我的代码有问题，我在两个地方都设置了 Java 类和 XML 文件中的 Ad，我删除了 Java 中的 Ad 代码，并按照这里的建议更改了 XML 文件中的一点代码android:layout_above="@+id/adView"

现在一切看起来都很好，并且符合要求。再次感谢您的时间和投入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:37:17.170

尝试删除

```
android:gravity="center_horizontal" 
```

从顶部布局。实际上，我会删除所有对重力的引用，直到您个人将事情放在正确的位置。此外，您可能想检查有多大

```
@dimen/activity_top_margin 
```

是。它可以很好地解释您拥有的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T20:03:44.433

添加到`ScrollView`-> `android:layout_alignParentTop="true"`，这将删除顶部的空白区域。

另外，我建议先设置`AdView`，然后设置`ScrollView`with，`android:layout_above="@+id/adView"`因为`ScrollView`根据设置其布局`AdView`，有时需要先定义不依赖任何其他布局的布局，然后再定义其他布局。

# php - （登录）PHP代码

> ID：15978701
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:48:11.940
> 
> 标签：php

**我解决了这个问题谢谢大家我把所有的php代码都移到了页面的第一行（上面的部分）除了用户输入错误的电子邮件我把它留在正文中的情况^_^**

* * *

我有这个登录代码，它检查用户是否已经是会员。

```
<?php
$con=mysql_connect("localhost","root","") or die(mysql_error());

mysql_select_db("mydb")or die("error in selecting db");

    $email = $_POST['email'];
    $password = $_POST['password'];
    if( $email && $password)
    {
   $query = "select * from users where email = '$_POST[email]' and password = '$_POST[password]'";

  $result  = mysql_query($query, $con); 
$num_rows = mysql_num_rows($result);
  $record = mysql_fetch_array($result);

  if ($num_rows > 0) {
session_start();

$_SESSION['email'] = $_POST['email'];
$_SESSION['password'] = $_POST['password'];
header("Location: home.php");
}
else
{    
echo "<h3><br><br><font>Error in Password or email </font><br> <br> 
<font>
  if you are new plz register here </a> <br></font>";

    echo "</h3>";

}
    } else{ echo "<h3><br><br> You Enter any thing , Try again<br> <br> ;}
?> 
```

如果用户输入正确的电子邮件和密码，将得到：

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在 C:\wamp\www\vwl 中发送（输出开始于 C:\wamp\www\vwl\login.php:122） \login.php 在第 170 行
> 
> 警告：无法修改标头信息 - 标头已由第 174 行 C:\wamp\www\vwl\login.php 中的（输出开始于 C:\wamp\www\vwl\login.php:122）发送

成功进入时打印welcome的代码是：

```
<?php
//     session_start();
//connect to db

if (isset($_COOKIE["email"]) && isset($_COOKIE["password"])) {
                                        $query = "select * from users where email = '$_COOKIE[email]' and password = '$_COOKIE[password]'";
} else {
$query = "select * from users where email='$_SESSION[email]' and password='$_SESSION[password]'";
}

$result = mysql_query($query, $con);

echo "<table border = 0>";

$record = mysql_fetch_array($result);

if ($record) {

echo "<tr><td>$record[email]</td>
<td>
</td></tr><br><br>";
} else {
header("Location: login.php");
}
echo "</table>";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:54:26.350

写`session_start`在第一行之后`<?php`，学习有关 SQL 注入的基础知识！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:50:55.410

> 要使用基于 cookie 的会话，必须在向浏览器输出任何内容之前调用 session_start()。

（[文档](http://php.net/manual/en/function.session-start.php)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:51:35.080

您的 . 上方有空格或其他内容`session_start`。这会导致该错误。你希望它是绝对的第一行之后`<?php`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:01:35.263

您可能会在第 122 行输出空格。就像其他人所说，您需要将 session_start () 移到文件的顶部。此外，您确实需要检查注射。您需要切换到 MYSQLi，因为您正在使用的功能已被弃用。此外，您在查询中缺少 $_POST[email] 和 $_POST[password] 的引号。此外，您应该避免使用 html 表格进行布局。另外，像这样检查：

```
if ($email && $password) 
```

可能没有做你想要的。你可能想要：

```
if (!empty (@$_POST['email']) && !emtpy ($_POST['password'])) 
```

以另一种方式检查它，您实际上是在检查 post 变量的值。

看起来你错过了最后一个结束标签

```
<h3> 
```

还。

# sql - 为什么即使使用 ORDER BY 子句，SQL 查询也会返回未排序的行？

> ID：15978706
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:48:31.130
> 
> 标签：sql, sql-server-2008-r2, sql-order-by

我读过的所有内容都说这不应该发生，但它确实发生了。我的数据库大小大约为 15GB，有几百个表，表可以有几行到几百万不等的任何地方。

以下是发生的情况：假设我有一个名为的表`orders`，第一列被调用`ID`并且是表的主键。还有许多其他列，其中之一名为`policy`. 如果我运行以下查询：

```
SELECT * 
FROM orders 
WHERE policy = 12345 
ORDER BY ID 
```

我希望结果看起来像这样：

```
1
2
3
4
5
6 
```

但有时结果会如下所示：

```
1
2
4
5
3
6 
```

就好像`3`被移到了不同​​的位置。这如何/为什么会发生？

实际查询是

```
SELECT * FROM loc_info WHERE PolInfo_ID=25634 ORDER BY LocInfo_ID 
```

表定义为

```
CREATE TABLE [dbo].[loc_info]( 
    [LocInfo_ID] [int] IDENTITY(1,1) NOT NULL, 
    [PolInfo_ID] [int] NOT NULL, 
    [name] [varchar](100) NOT NULL, 
    [address1] [varchar](100) NULL, 
    [address2] [varchar](100) NULL, 
    [city] [varchar](100) NULL, 
    [state] [varchar](100) NOT NULL, 
    [zip] [char](10) NULL, 
    [county] [varchar](100) NULL, 
    [country] [varchar](100) NULL, 
    [loc_number] [varchar](20) NULL, 
    [occ_type_id] [int] NULL, 
    [occ_type] [varchar](100) NULL, 
    [flood_zone] [varchar](6) NOT NULL, 
    [coastal_zone] [varchar](20) NOT NULL, 
    [earthquake_zone] [varchar](20) NOT NULL, 
    [earthquake_group] [varchar](20) NULL, 
    [BuildingTIV] [numeric](18, 0) NULL, 
    [MachEquipTIV] [numeric](18, 0) NULL, 
    [StocksSuppliesTIV] [numeric](18, 0) NULL, 
    [OtherTIV] [numeric](18, 0) NULL, 
    [BusinessInterruptTIV] [numeric](18, 0) NULL, 
    [ExtraExpTIV] [numeric](18, 0) NULL, 
    [RentTIV] [numeric](18, 0) NULL, 
    [Property] [numeric](18, 0) NULL, 
    [IsUpload] [bit] NULL, 
    [IsMoved] [bit] NULL, 
 CONSTRAINT [PK_locations] PRIMARY KEY CLUSTERED  
( 
    [LocInfo_ID] ASC
)WITH (PAD_INDEX  = OFF
, STATISTICS_NORECOMPUTE  = OFF
, IGNORE_DUP_KEY = OFF
, ALLOW_ROW_LOCKS  = ON
, ALLOW_PAGE_LOCKS  = ON
, FILLFACTOR = 90) ON [PRIMARY] 
) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T18:54:57.350

这应该是不可能的，假设您订购的列实际上是`LocInfo_ID`，它确实是，并且当问题发生时`INT`您确实有一个子句。`ORDER BY`

如果您可以在这三个条件为真的情况下生成有效的重现，那么您手上就会有一个错误（可能是由损坏引起的）。

我怀疑这里还有其他我们不知道的变量。我的猜测是，您正在检查的列不是您订购的那一列，或者它不是您认为的数据类型，或者当您观察到这个随机无序的结果时，实际上并没有按顺序排列用过的。

否决这一切你想要的，但这是非常科学和合乎逻辑的 - SQL Server 不会弄乱`ORDER BY`你定义的，除非（a）你没有定义它或（b）你没有定义它一种产生您期望的顺序的方式。鉴于您坚持认为这是一个非常简单的表和一个非常简单的 order by，而且它只是间歇性地发生，我不得不同意 JNK 并说您发现 SQL Server 中的错误的机会非常小的确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:00:02.650

你试过`ORDER BY LocInfo_ID desc`吗？只是为了确保它确实是正在排序的 LocInfo_ID？那么这3个会不合适吗？似乎有一些想法（包括我的）认为此查询嵌入在其他内容中或作为 CTE 或 TVF 的一部分包含在内——您尚未上传执行计划。

# vb.net - 数据表选择逻辑

> ID：15978708
> 
> 赞同：0
> 
> 时间：2013-04-12T18:48:37.760
> 
> 标签：vb.net, select, datatable

所以我有一个名为“用户”的数据表，看起来像这样。

```
UserName | Rank | Amount | OrderCount
jsmith   |  2   |  30    |    15
jdoe     |  2   |  30    |    0
japple   |  2   |  30    |    5 
```

我正在尝试创建一个函数，该函数将通过并返回具有最低 OrderCount 的用户名。到目前为止，我有以下内容：

```
Function DetermineBestUser(ByVal usertable As DataTable) As String

    Dim bestchoice As DataRow()

    bestchoice = usertable.Select("Rank = 2", "OrderCount ASC")

    Return bestchoice(0)(0).ToString
End Function 
```

我确实看到了一个问题，我的排名将是 1 或 2。如果用户的排名是 1，即使排名为 2 的用户的 OrderCount 较低，他们也应该得到返回。orderCount 不应该超过 Amount 列中的值（已经有一个函数来检查它）。

因此，在此示例中，我希望返回 jdoe，因为她的 OrderCount 最低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:52:01.560

试试这个：

```
bestchoice = usertable.Select("", "Rank DESC, OrderCount ASC") 
```

# css - 菜单“右边框：无”不起作用

> ID：15978709
> 
> 赞同：0
> 
> 时间：2013-04-12T18:48:38.293
> 
> 标签：css, wordpress, styles, border, stylesheet

我在此页面上添加了菜单分隔符`http://79.170.40.241/refthecoffeefactory.co.uk/home`

我还添加了以下内容以删除菜单最右侧的边框，尽管它似乎不起作用.....

```
#navigation ul.nav > li.menu-item-56 {
    border-right: none !important;

} 
```

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:16:40.427

边框样式在`a`标签上，而不是`li`标签上。

这应该为您完成工作：

```
#menu-item-56 a {
    border-right: none !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:14:26.297

注意：只是进一步看了一下。您的边框位于“a”标签上，而不是表格上。不过，我之前的回答如下：

看起来它正在被其他样式覆盖。查看您的样式链，您有许多重叠的样式，并且经常使用 !important。有一些方法可以隔离该特定元素，但您可能希望重新审视所有样式，同时考虑到特异性和继承性。这是一个简单有效地解释它的网站： [http ://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

此外，要找出哪种样式特别破坏了它，使用 Firefox 或 Chrome，右键单击并检查元素。你会看到你指定没有边框的那个被覆盖了（它被划掉了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:27:21.473

```
#main-nav li a:last-child
{
border-right: none !important;
} 
```

# spring - Vaadin 应用程序未在 liferay 上部署为 portlet

> ID：15978718
> 
> 赞同：0
> 
> 时间：2013-04-12T18:49:08.263
> 
> 标签：spring, jpa, liferay, vaadin

在这种情况下，
我开发了一个小型 Vaadin 应用程序（MYSQL DB 中包含 Spring 和 JPA）并尝试将其部署在本地 liferay 门户上。我从 liferay 开始
使用本[教程，然后添加了其他内容。](http://www.liferay.com/community/wiki/-/wiki/Main/Developing+Vaadin+Applications+as+Liferay+Portlets)
但是有些东西不起作用，当我尝试在 liferay 上部署应用程序时，我似乎无法弄清楚是什么，日志说

```
 Plugin package on context VaadinApp cannot be tracked because this WAR does not contain        
a liferay-plugin-package.xml file 
```

我试图弄清楚这是什么意思，但对这个问题的调查并没有给我任何结论。我在应用程序中有 portlet 所需的所有文件，但没有这个。
由于liferay使用自己的内置HSQL而VaadinApp使用MYSQL，问题是否可能在数据库中？

这是一件紧急的事情，因此非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T07:43:01.007

我发现了这个问题。
正如我推测的那样，问题出在数据库中。
我在 Vaadin 应用程序中的 DB 连接配置包括一个 context.xml 文件，其中配置了与 DB 的连接，这只是来自 Tomcat 的 context.xml。
我所做的是从这个 context.xml 中获取连接配置并将其直接粘贴到 Liferay 的 Tomcat 中的 context.xml 中，一切正常。
这就是为什么这个 Vaadin 应用程序在部署在独立的 Tomcat 服务器上时可以工作的原因，因为它覆盖了 Tomcat 本身中的 context.xml，而在 Liferay 上则不是这样。
希望我能帮助有类似问题的人。

# django - django admin 仅在复选框为 false 时才显示字段

> ID：15978719
> 
> 赞同：10
> 
> 时间：2013-04-12T18:49:08.453
> 
> 标签：django, django-admin

模型.py

```
class Menu(models.Model):

    ...
    has_submenu=models.BooleanField(default=1)
    page=models.ForeignKey(Page,null=True) 
```

我希望 django admin 仅在 has_submenu 复选框为 false 时才显示页面属性（所以 django-admin 必须为我编写一些 javascript :)）

也许我必须扩展`render_change_form`方法

有什么建议吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-13T19:39:51.840

您可以[在 Django 管理员中使用 jQuery](https://docs.djangoproject.com/en/2.2/ref/contrib/admin/#jquery)：

```
class MenuAdmin(admin.ModelAdmin):
    # ...
    class Media:
        js = ('/static/admin/js/hide_attribute.js',) 
```

> `ModelAdmin`并`InlineModelAdmin`有一个`media`属性返回一个媒体对象列表，这些对象存储表单和/或表单集的 JavaScript 文件的路径。

hide_attribute.js 的内容：

```
hide_page=false;
django.jQuery(document).ready(function(){
    if (django.jQuery('#id_has_submenu').is(':checked')) {
        django.jQuery(".page").hide();
        hide_page=true;
    } else {
        django.jQuery(".page").show();
        hide_page=false;
    }
    django.jQuery("#id_has_submenu").click(function(){
        hide_page=!hide_page;
        if (hide_page) {
            django.jQuery(".page").hide();
        } else {
            django.jQuery(".page").show();
        }
    })
}) 
```

命名空间：

> 为了避免与用户提供的脚本或库发生冲突，Django 的 jQuery（版本 3.3.1）被命名为`django.jQuery`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:23:43.400

如何覆盖`get_form`ModelAdmin 上的方法，如下所示：

```
class MenuModelAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        self.exclude = []
        if obj and obj.has_submenu:
            self.exclude.append('page')
        return super(MenuModelAdmin, self).get_form(request, obj, **kwargs) 
```

另外，请参阅[get_form 文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_form)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T20:37:25.473

您可以扩展 Django 管理模板。

只需遵循以下结构：

在整个项目中：

```
templates/admin/change_form.html 
```

跨应用程序

```
templates/admin/<my_app>/change_form.html 
```

跨模型

```
templates/admin/<my_app>/<my_model>/change_form.html 
```

在您的情况下，看起来您只需要扩展 Menu 模型。我会做以下事情：

1.  **从django 文件夹**中获取**change_form.html** teamplate
***   在对象循环中，查找*页面*字段*   对**has_submenu**进行条件检查以决定是否显示**页面**属性**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-08T20:22:51.333

实际上，我不得不稍微修改一下，并想我会分享我在这里所做的事情，以防其他人偶然发现这篇文章。我必须考虑三个主要领域：

1.  经常出错，因为它在准备好之前尝试加载 django.jQuery。
2.  隐藏一般不工作（不知道为什么）
3.  想要做相反的事情，除非选中该选项，否则隐藏。

所以，这为我解决了所有这三个问题。我们执行以下操作：

1.  延迟调用函数
2.  隐藏 .form-row.field-, 以隐藏整行（我建议使用 chrome 检查功能来查找要隐藏的行的名称。）
3.  我们做相反的事情，一旦页面加载完成就隐藏该部分，然后如果选中该框则取消隐藏。

所以这是我的最终代码：

```
window.addEventListener("load", function() {
    (function() {
        show_page=false;
        django.jQuery(document).ready(function(){
            if (django.jQuery('#id_override_timeline').is(':checked')) {
                django.jQuery(".form-row.field-next_milestone").show();
                show_page=true;
            } else {
                django.jQuery(".form-row.field-next_milestone").hide();
                show_page=false;
            }
            django.jQuery("#id_override_timeline").click(function(){
                show_page=!show_page;
                if (show_page) {
                    django.jQuery(".form-row.field-next_milestone").show();
                } else {
                    django.jQuery(".form-row.field-next_milestone").hide();
                }
            })
        })
    })(django.jQuery);
}); 
```

我希望这可以帮助其他偶然发现这篇文章的人！**

# javascript - javascript/ajax 加载和预加载图像

> ID：15978720
> 
> 赞同：0
> 
> 时间：2013-04-12T18:49:08.100
> 
> 标签：javascript, html, ajax

我对此很陌生。我必须使用 ajax 写一个相册。单击链接列表中的链接后，将显示一个图像，同时预加载上一个和下一个图像，以便在单击时打开更快。异步或同步加载它们。显示下一张照片后，应自动隐藏上一张照片。在任何给定时间只能显示一张照片。我正在考虑在 javascript 部分中编写一个 for 循环，这是最好的方法吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>

<body>
<p id="Title">text</p>
<p id="Body">text
</p>

<p class="background">&nbsp;</p>

<p class="link1"><a href="image1.jpg">Photo 1</a> </p>
<p class="link2"><a href="image2.jpg">Photo 2</a> </p>
<p class="link3"><a href="image3.jpg">Photo 3</a></p>
<p class="link4"><a href="image4.jpg">Photo 4</a></p>
<p class="link5"><a href="image5.jpg">Photo 5</a> </p>
<p class="link6"><a href="image6.jpg">Photo 6</a> </p>
<p class="link7"><a href="image7.jpg">Photo 7</a> </p>
<p class="link8"><a href="image8.jpg">Photo 8</a> </p>
<p class="link9"><a href="image9.jpg">Photo 9</a> </p>
<p class="link10"><a href="image10.jpg">Photo 10</a> </p>
<p class="link11"><a href="image11.jpg">Photo 11</a> </p>
<p class="link12"><a href="image12.jpg">Photo 12</a> </p>
<p class="link13"><a href="image13.jpg">Photo 13</a> </p>
<p class="link14"><a href="image14.jpg">Photo 14</a> </p>
<p class="link15"><a href="image15.jpg">Photo 15</a> </p>
<p class="link16"><a href="image16.jpg">Photo 16</a> </p>
<p class="link17"><a href="image17.jpg">Photo 17</a> </p>
<p class="link18"><a href="image18.jpg">Photo 18</a> </p>
<p class="link19"><a href="image19.jpg">Photo 19</a> </p>
<p class="link20"><a href="image20.jpg">Photo 20</a> </p>

<script>

var images= new Array()
    images[0]="image1.jpg";
    images[1]="image2.jpg";
    images[2]="image3.jpg";
    images[3]="image4.jpg";
    images[4]="image5.jpg";
    images[5]="image6.jpg";
    images[6]="image7.jpg";
    images[7]="image8.jpg";
    images[8]="image9.jpg";
    images[9]="image10.jpg";
    images[10]="image11.jpg";
    images[11]="image12.jpg";
    images[12]="image13.jpg";
    images[13]="image14.jpg";
    images[14]="image15.jpg";
    images[15]="image16.jpg";
    images[16]="image17.jpg";
    images[17]="image18.jpg";
    images[19]="image19.jpg";
    images[20]="image20.jpg";

var numImages = images.length;
var count = 0;
function preloadImage()
{
    i=images[];
    for(i=0;i<=numImages; i++)
    images[i].onclick=preload(images[i+1];
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:20:08.743

要将图像预加载到浏览器内存中，您应该这样做：

```
function preloadImage(url) {
    var image = new Image();
    image.src = "url_to_image.png"; // in this moment browser will request the image
    return image; // returning handler in case you want to use it later
} 
```

你可以考虑使用一些现有的画廊，比如[fancybox](http://fancybox.net/)

# android - Android：使用矩阵绘制位图

> ID：15978721
> 
> 赞同：6
> 
> 时间：2013-04-12T18:49:09.480
> 
> 标签：android, matrix, bitmap, android-canvas

我正在尝试使用以下方法学习在画布上绘制位图

```
drawBitmap(Bitmap bitmap, Matrix matrix, Paint paint); 
```

因为我需要我的一个 png 来增加几乎每一帧的大小，我设法做到了

```
Matrix matrix=new Matrix();
matrix.setScale(0.001f,0.001f); 
```

这对我来说很好。但是我遇到的问题是将图像放置在正确的坐标中时。我认为其中任何一个都会做到这一点

矩阵.setTranslate(x,y); 矩阵.postTranslate(x,y);

但这就是我弄错的地方，图像总是绘制在 0,0 坐标上。在我需要缩放图像之前，我可以很好地使用

```
canvas.drawBitmap(bmp,x,y,paint); 
```

我可以在其中指定要绘制它的点。我也可以使用 drawBitmap 的矩阵版本吗？或者我应该如何经常调整我的图像大小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T18:53:03.407

使用绘制位图的矩阵版本。重要的是要以正确的顺序进行。从单位矩阵开始。然后使用 postScale 按您想要的任何因素对其进行缩放。这将使它成长，但不改变原点。然后使用 postTranslate 翻译它，它将向左/向右/向上/向下移动。然后将位图绘制到画布上，将矩阵传递给它。在复制之前，它将按矩阵缩放和移动位图。

# java - 简单到复杂方程的字符串方程 (2)

> ID：15978729
> 
> 赞同：1
> 
> 时间：2013-04-12T18:49:57.090
> 
> 标签：java, string, arraylist, equation, parentheses

是的！感谢您对最后一个问题的帮助！对于指定的字符串方程，它工作得很好！但是现在我遇到了两个括号（无论是打开还是关闭）在一起的问题

示例：4+(2+(1+1))

在我的代码中的某个地方它被困在一个循环中，但我不知道在哪里！怎么了？我的代码：

```
import java.util.ArrayList;

public class StringEquation
{
    public static void main(String[] args) 
    {
        String s = "2+(8*(7+1))";

        ArrayList<String> equation = new ArrayList<>();

        String ns = "";

        String b;

        int nsi = 0;

        double n;

        double res;

        for(int c=0; c<s.length(); c++)
        {
             b = s.substring(c,c+1);
             if("0".equals(b)||"1".equals(b)||"2".equals(b)||"3".equals(b)||"4".equals(b)||"5".equals(b)||"6".equals(b)||"7".equals(b)||"8".equals(b)||"9".equals(b))
             {
                 ns += b;
                 if(c==s.length()-1)
                 {
                     nsi = Integer.parseInt(ns);
                     equation.add(Integer.toString(nsi));
                 }
             }
             else if(("+".equals(b)||"-".equals(b)||"*".equals(b)||"/".equals(b)||"%".equals(b))&&!"".equals(ns))
             {
                nsi = Integer.parseInt(ns);
                equation.add(Integer.toString(nsi));
                equation.add(b);
                ns = "";
             }
             else if("(".equals(b))
             {
                 equation.add(b);
             }
             else if (")".equals(b))
             {
                if(!"".equals(ns))
                {
                    nsi = Integer.parseInt(ns);
                }
                equation.add(Integer.toString(nsi));
                equation.add(b);
                ns = "";
             }
             else if("+".equals(b)||"-".equals(b)||"*".equals(b)||"/".equals(b)||"%".equals(b))
             {
                 equation.add(b);
             }
        }

        while(equation.contains("(")||equation.contains(")"))
        {
            for(int d=0; d<equation.size(); d++)
            {
                if("*".equals(equation.get(d))||"/".equals(equation.get(d))||"%".equals(equation.get(d)))
                {
                    if("(".equals(equation.get(d-1))||")".equals(equation.get(d-1))||"(".equals(equation.get(d+1))||")".equals(equation.get(d+1)))
                    {
                        switch(equation.get(d))
                        {
                            case "*": equation.set(d, "TIMES"); break;
                            case "/": equation.set(d, "DIVBY"); break;
                            default: equation.set(d, "MOD");
                        }
                    }
                    else
                    {
                        switch(equation.get(d))
                        {
                            case "*":
                                n = Double.parseDouble(equation.get(d-1));
                                n *= Double.parseDouble(equation.get(d+1));
                                equation.set(d-1, Double.toString(n));
                                equation.remove(d);
                                equation.remove(d);
                                break;
                            case "/":
                                n = Double.parseDouble(equation.get(d-1));
                                n /= Double.parseDouble(equation.get(d+1));
                                equation.set(d-1, Double.toString(n));
                                equation.remove(d);
                                equation.remove(d);
                                break;
                            default:
                                n = Double.parseDouble(equation.get(d-1));
                                n %= Double.parseDouble(equation.get(d+1));
                                equation.set(d-1, Double.toString(n));
                                equation.remove(d);
                                equation.remove(d);
                        }
                    }
                }
            }

            for(int d=0; d<equation.size(); d++)
            {
                if("+".equals(equation.get(d))||"-".equals(equation.get(d)))
                {
                    if("(".equals(equation.get(d-1))||")".equals(equation.get(d-1))||"(".equals(equation.get(d+1))||")".equals(equation.get(d+1)))
                    {
                        switch(equation.get(d))
                        {
                            case "+": equation.set(d, "PLUS"); break;
                            default: equation.set(d, "MINUS");
                        }
                    }
                    else
                    {
                        switch(equation.get(d))
                        {
                            case "+":
                                n = Double.parseDouble(equation.get(d-1));
                                n += Double.parseDouble(equation.get(d+1));
                                equation.set(d-1, Double.toString(n));
                                equation.remove(d);
                                equation.remove(d);
                                break;
                            default:
                                n = Double.parseDouble(equation.get(d-1));
                                n -= Double.parseDouble(equation.get(d+1));
                                equation.set(d-1, Double.toString(n));
                                equation.remove(d);
                                equation.remove(d);
                        }
                    }
                }
            }

            for(int d=0; d<equation.size(); d++)
            {
                switch(equation.get(d))
                {
                    case "PLUS":    equation.set(d, "+"); break;
                    case "MINUS":   equation.set(d, "-"); break;
                    case "TIMES":   equation.set(d, "*"); break;
                    case "DIVBY":   equation.set(d, "/"); break;
                    case "MOD":     equation.set(d, "%"); break;
                }
            }

            for(int d=0; d<equation.size(); d++)
            {
                if(d>0)
                {
                    if("(".equals(equation.get(d-1))&&")".equals(equation.get(d+1)))
                    {
                        equation.remove(d-1);
                        equation.remove(d);
                    }
                }
            }
        }

        for(int d=0; d<equation.size(); d++)
        {
            if("*".equals(equation.get(d))||"/".equals(equation.get(d))||"%".equals(equation.get(d)))
            {
                switch(equation.get(d))
                {
                    case "*":
                        n = Double.parseDouble(equation.get(d-1));
                        n *= Double.parseDouble(equation.get(d+1));
                        equation.set(d-1, Double.toString(n));
                        equation.remove(d);
                        equation.remove(d);
                        break;
                    case "/":
                        n = Double.parseDouble(equation.get(d-1));
                        n /= Double.parseDouble(equation.get(d+1));
                        equation.set(d-1, Double.toString(n));
                        equation.remove(d);
                        equation.remove(d);
                        break;
                    default:
                        n = Double.parseDouble(equation.get(d-1));
                        n %= Double.parseDouble(equation.get(d+1));
                        equation.set(d-1, Double.toString(n));
                        equation.remove(d);
                        equation.remove(d);
                }
            }
        }

        for(int d=0; d<equation.size(); d++)
        {
            if("+".equals(equation.get(d))||"-".equals(equation.get(d)))
            {
                switch(equation.get(d))
                {
                    case "+":
                        n = Double.parseDouble(equation.get(d-1));
                        n += Double.parseDouble(equation.get(d+1));
                        equation.set(d-1, Double.toString(n));
                        equation.remove(d);
                        equation.remove(d);
                        break;
                    default:
                        n = Double.parseDouble(equation.get(d-1));
                        n -= Double.parseDouble(equation.get(d+1));
                        equation.set(d-1, Double.toString(n));
                        equation.remove(d);
                        equation.remove(d);
                }
            }
        }

        res = Double.parseDouble(equation.get(0));

        System.out.println(res);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:58:24.593

从字符串中删除所有额外的元素say“（”“）”并将数字和符号放在单独的队列中，然后从队列中获取每个元素，同时继续检查天气它是否是一个数字，如果它是一个数字下一个元素作为符号

# java - 将运行时解析参数传递给具有多个绑定类型的方法，编译错误

> ID：15978730
> 
> 赞同：2
> 
> 时间：2013-04-12T18:50:07.927
> 
> 标签：java, generics

我有一个看起来像这样的方法：

```
public static <T extends Enum<T> & Marshallable> String foo(Collection<T> collection, Class<? extends Marshallable>... marshallables); 
```

所以我期望传递的集合是一个实现 Marshallable 接口的 Enum 。如果我在运行时有具体的 Enum 类型，它工作正常，但我编写了一个测试方法，它从类对象动态创建一个 Enum 列表（实现 Marshallable），并且我无法将此列表传递给上面的方法。

```
@Test
public void fooTest() {
...
if (clazz.isEnum()) { // collection enum xml
    List<? extends Enum<? extends Marshallable>> enumList = (List<? extends Enum<? extends Marshallable>>) Arrays.asList(clazz.getEnumConstants());
--> String enumListXml = foo(enumList, clazz);
... 
```

标记的行将给出编译错误。我无法弄清楚如何在不更改方法签名的情况下传递列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:32:42.903

您需要使用带有未经检查的强制转换的通用辅助方法：

```
private static <T extends Enum<T> & Marshallable> void fooHelper(Class<? extends Marshallable> type) {
    if (type.isEnum()) {

        //This is safe because of the isEnum check, and we don't return any
        //type with T (important because the caller can specify what T is).
        @SuppressWarnings("unchecked")
        final Class<T> enumType = (Class<T>)type;

        final List<T> enumConstants = Arrays.asList(enumType.getEnumConstants());
        foo(enumConstants);
    }
} 
```

您的版本不起作用的原因是因为 with `T extends Enum<T> & Marshallable`,`T`是递归绑定的 - 只能用类型参数表示的东西。通配符类型参数`? extends Enum<? extends Marshallable>`不再指定该关系。

**警告：**必须`fooHelper`不返回包含的类型，`T`因为这可能会导致堆污染。例如：

```
private static <T extends Enum<T> & Marshallable> List<T> unsafeFooHelper(Class<? extends Marshallable> type) {
    if (type.isEnum()) {

        //no longer safe!
        @SuppressWarnings("unchecked")
        final Class<T> enumType = (Class<T>)type;

        return Arrays.asList(enumType.getEnumConstants());
    }
    return Collections.emptyList();
}

enum Enum1 implements Marshallable { ONE, TWO }

enum Enum2 implements Marshallable { A, B }

...

//caller lies about what T is:
List<Enum2> enumConstants = Main.<Enum2>unsafeFooHelper(Enum1.class);

//sometime later...
Enum2 enumConstant = enumConstants.get(0); //ClassCastException 
```

# iphone - phonegap 2.6 iOS 程序中出现意外的“@”

> ID：15978731
> 
> 赞同：0
> 
> 时间：2013-04-12T18:50:08.457
> 
> 标签：iphone, ios, xcode, ipad, cordova

我刚刚按照电话间隙的分步指南在 Xcode 中创建了一个新的电话间隙项目，并使用它创建的默认模板文件出现此错误。有谁知道这是什么或如何解决它？它应该能够在构建后无错误地构建默认模板项目，但我得到了这个：

程序中出现意外的“@” - 第 68 行 CDVNotification.m

```
[self showDialogWithMessage:message title:title buttons:@[buttons] callbackId:callbackId dialogType:DIALOG_TYPE_ALERT]; 
```

程序中出现意外的“@” - 第 106 行 CDVNotification.m

```
NSDictionary* info = @{
            @"buttonIndex":@(buttonIndex + 1),
            @"input1":(value0 ? value0 : [NSNull null])
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:46:34.600

升级到更新版本的 Xcode。该语法是 Objective C 的[新文字语法](http://clang.llvm.org/docs/ObjectiveCLiterals.html)的一部分，因此您需要更新版本的 Xcode/clang 来编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:56:53.560

如果您在文件中进行了任何复制/粘贴代码，则可能引入了无效字符。尝试“重新输入”上面的行，然后删除上面的行。那些@符号看起来有点有趣，如果编译器接受它们作为文字，它们应该是蓝色的......

# c# - 在树视图中获取文件的完整路径

> ID：15978733
> 
> 赞同：0
> 
> 时间：2013-04-12T18:50:09.863
> 
> 标签：c#, treeview

我有这段代码可以从树视图中的目录创建节点

```
if (file.Exists)
{
    var nodes = node.Nodes.Add(file.Name);
    nodes.ImageIndex = nodes.SelectedImageIndex = 2;
    nodes.Tag = file.FullName;
} 
```

我还需要获取文件的完整路径才能以另一种形式使用它。我感谢您的所有创意帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:54:19.127

尝试这个 ：

```
string myFilePath = Path.GetFullPath(file.Name);

//OR

var fileInfo= new FileInfo(file.Name);
fileInfo.DirectoryName; 
```

# php - 仅插入查询的长 mysql 事务（约 30 秒）是否存在问题？(InnoDB)

> ID：15978738
> 
> 赞同：0
> 
> 时间：2013-04-12T18:50:18.357
> 
> 标签：php, mysql, web-applications, transactions, insert

我正在开发一个 PHP 脚本，该脚本处理文件并将有关文件的信息插入到数据库中。

具体来说，脚本会处理一些信息，然后开始事务并将其插入表中。然后我`lastinsertid`用来获取`ID`刚刚插入的行，并`ID`在处理相关文件时使用它。处理完成后（需要 2-30 秒），我在其他表中再插入一些内容，并在检查文件处理成功后完成事务。

所以基本上纲要是这样的：

```
START TRANSACTION

INSERT DATA INTO TABLE 1

PROCESS FILE USING INSERT ID (takes 2-30 seconds)

INSERT DATA INTO TABLE 2

INSERT DATA INTO TABLE 3

INSERT DATA INTO TABLE 4

//VERIFY FILE PROCESSING    
  if ($file_process == true){   
COMMIT   
}   
else{   
ROLLBACK   
} 
```

我知道由于长时间持有锁的问题，应该避免长事务，但是如果事务只使用插入怎么办。由于插入只锁定正在插入的行，这仍然是一个问题吗？

有人可以向我解释这种情况可能产生的潜在“陷阱”吗？我很确定，如果一个会话的进程需要很长时间，而另一个会话开始自己的进程，`session 1`则不会阻塞`session 2`，因为这些进程只处理插入。如果`session 1`失败并且必须回滚，它将对`session 2`任何内容都没有影响（除了在数据库中，自动递增的主 ID 会出现差距，但这没关系）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:15:46.803

如果您在 PHP 脚本中插入数据库的运行时间达到 30 秒，您可能会遇到 PHP 的最大执行时间上限。

您可以通过以编程方式更改时间限制来缓解这种情况。

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

或者

您可以修改 php.ini 文件以更改默认值。如果这成为问题，我建议您只修改数据库调用，以免与数据库无关的失控脚本阻塞服务器资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:16:13.370

如果您不确定在那里使用事务，我建议您在`new_added_row`那里使用额外的列，如果出现问题，您只需删除`new_added_row=1`列以回滚您的事务。您仍将获得该 insert_id，并且不使用事务，并且能够回滚更改。如果多个用户会异步执行此操作，您可能会考虑使用 `session_key 额外列来防止删除其他人的插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:58:23.493

> 由于插入只锁定正在插入的行，这仍然是一个问题吗？

不总是。如果您在明细表中插入记录，主记录也会被锁定。如果您有许多关系，则很难意识到究竟锁定了什么，这反过来可能会导致死锁。

# php - 带有产品代码和发票的电子商务

> ID：15978739
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:50:22.970
> 
> 标签：php, mysql, product, invoice

我知道那里可能有一些脚本，我确信我忽略了它们，但我想知道是否有人可以为我指出更好的脚本或向我展示如何制作脚本的方法。

我正在寻找的是一种电子商务类型的脚本，它可以让我输入产品代码，它会告诉单价，例如说，我要卖一个产品，然后我去生成一张发票，其中`e.g. 0001`然后我会输入一个产品编号（

我不是在寻找任何花哨的东西，只是一个简单的系统来使用，如果需要的话让我添加更多的产品代码。

从理论上讲，这就是我希望它阅读的方式：

```
Product Code~~~~~~~~~~~~~~Item~~~~~~~~~~~~~~Price  
0001~~~~~~~~~~~~~~~~~Something Cool~~~~~~~~~50.00  
0002~~~~~~~~~~~~~~~install Something Cool~~~~~~5.00  
Total:~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~55.00 
```

我希望这对我正在寻找的东西有意义，并且有人可以将我指向正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:40:46.117

Box Billing 可能会满足您的需求水平。它支持多种产品和用户日志以及发票等......它可能是您可以找到的最简单的计费系统：

网址： http: [//www.boxbilling.com/](http://www.boxbilling.com/)

它是基于 PHP 和 MySQL 的免费和开源的。

# c - 如何提供一致的接口：深度复制 OpenSSL 结构或记录不同的案例？

> ID：15978741
> 
> 赞同：2
> 
> 时间：2013-04-12T18:50:27.713
> 
> 标签：c, interface, openssl, copy, deep-copy

我正在开发一个执行加密任务的应用程序。它使用 OpenSSL 来完成这些任务，并且界面类似于`libcurl`. 如果不熟悉，它看起来像这样：

```
conf_func(handle, ENUM_OPTION, value); 
```

从而在实例上设置由`ENUM_OPTION`to表示的选项。通读它的文档说它会复制所有值（除非另有说明），因此你释放了你分配的东西，它释放了它分配的东西。`value``handle``libcurl`

我认为这对我的应用程序来说可能是一个好主意。虽然它会提高内存需求，但它确实使使用更容易。但是，我在这里遇到了一个问题。假设这段代码：

```
X509 *cert = X509_new();
X509 *cert_copy = malloc(sizeof(X509));
memcpy(cert_copy, cert, sizeof(X509)); 
```

这当然会产生一个问题：它只是一个浅拷贝，释放会有问题。搜索后，我决定 OpenSSL 本身不提供深拷贝，它甚至可能是不可取的（内存使用）。

因此，我采取了不同的方法：我不复制，而只是存储我传递的指针：

```
X509 *cert = X509_new();
X509 *cert_copy = cert;
X509_free(cert_copy); 
```

这将减少内存占用并简化开发。另一方面，这将提高文档需求和特殊使用意识：您分配，但我免费为您服务。

所以我想也许我应该始终如一地提供这种行为？但是后来我遇到了字符串问题：

```
char *s = "Some text";
char *s_copy = s;
free(s_copy); 
```

这不会像`s`常量一样工作，并且没有在堆上分配。

所以这是我的两难境地：我将不得不复制字符串，但不能复制 OpenSSL 结构。我该如何**干净地**解决这个问题？我是否记录它并依赖用户正确**使用**我的界面？或者有什么完全明显的我失踪了吗？

*注意*：我释放意味着我在使用结束时有一个通用的销毁功能。它只会检查指针是否存在`NULL`，否则会释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:00:43.503

正如您所发现的，除非该库公开了用于执行复制的 API，否则没有正确的方法可以“深度复制”属于库的不透明数据对象。你有几个选择：

1.  不要让调用者传入属于库的对象，而只需传递创建所述对象所需的信息/参数。然后，您的代码可以自由调用库来创建对象。

2.  设计你的接口契约，使你的代码成为传递给它的对象的“所有者”，并且调用者在传递它们后不能再使用它们。

3.  设计您的接口契约，以便在调用者和您的代码之间明确共享所有权。例如，这可能意味着调用者在您的代码仍然具有对它的引用时不会修改或释放该对象，但是在您的代码完成使用它之后，调用者可以再次自由使用它并负责释放它。

哪种方法最好取决于您的应用程序的要求。除非内存或性能是关键问题，否则我会选择以简单性取胜的设计。

# css - 将鼠标悬停在图像上时如何在标签中显示图像名称

> ID：15978744
> 
> 赞同：0
> 
> 时间：2013-04-12T18:50:34.567
> 
> 标签：css, image, hover, label, zooming

我有八张图片，当我将鼠标悬停在它上面时，它们会放大 10 倍。现在我想在页面顶部的单独标签中显示悬停图像的名称（即第一张图像的 alt="a"）。如何使用 css 做到这一点？

```
<div class="positioner11">
<a class="slide" aria-haspopup="true"><img class="a1" src="Insta/1.jpg" alt="a" /></a>
<a class="slide" aria-haspopup="true"><img class="a2" src="Insta/2.jpg" alt="b" /></a>
<a class="slide" aria-haspopup="true"><img class="a3" src="Insta/3.jpg" alt="c" /></a>
<a class="slide" aria-haspopup="true"><img class="a4" src="Insta/4.jpg" alt="d" /></a>
<a class="slide" aria-haspopup="true"><img class="a1" src="Insta/5.jpg" alt="e" /></a>
<a class="slide" aria-haspopup="true"><img class="a2" src="Insta/6.jpg" alt="f" /></a>
<a class="slide" aria-haspopup="true"><img class="a3" src="Insta/7.jpg" alt="g" /></a>

<a class="slide last" aria-haspopup="true"><img class="a5" src="Insta/8.jpg" alt="h" />       </a>

</div>

.positioner11 {position:absolute; left:0; top:576px;}

.slide {display:block; border:0; text-decoration:none; float:left; border-right:1px     solid #fff;}
.last {border:0;}
.slide img {display:block; border:0; width:50px; height:50px; cursor:pointer;
-webkit-transition-duration: .7s;
-moz-transition-duration: .7s; 
-o-transition-duration: .7s;
transition-duration: .7s;
}
.slide:hover img 
{
width:500px;
height:500px;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:02:48.670

这是一个很好的例子：

```
$('ul li img').hover(
    function(){
        $(this).css('opacity','.5');
        var a = $(this).attr('alt');
        $(this).parent().append('<div class="title">' + a + '</div>');
    },
    function(){
        $(this).css('opacity','1');
        $(this).next().remove('.title');
    }
); 
```

[http://jsfiddle.net/dgKne/](http://jsfiddle.net/dgKne/)

# c# - 250条结果中只有10条返回页面

> ID：15978746
> 
> 赞同：0
> 
> 时间：2013-04-12T18:50:38.600
> 
> 标签：c#, asp.net-mvc, linq

我的服务类中有一个语句，它返回数据库中的所有用户。我目前有 250 个用户，但在 IE、chrome 和 FF 中，我每页只有 10 个用户。可能的原因是什么，如何改变。

```
public IEnumerable<Users> GetUsers(int sectionID)
    {
        var _user = DataBase.ProcsContext.GetRoster<Users>(sectionID, u => new Users
        {
            Name = UserColumnMap.Name(u),
            Email = UserColumnMap.Email(u)
        });
        return _user;
    } 
```

**获取名册**

```
public virtual IEnumerable<T> GetRoster<T>(int sectionId, Func<IDataRecord, T> modelBinder, int resultsPerPage = 10, int pageNumber = 1)
        {
            //code
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:12:56.970

> 可能的原因有哪些

答案在您删减的那段代码中`//code`。如果您看到那里发生的事情，您可能会注意到*分页*中常用的`Skip`和方法：在一定大小的卡盘中显示记录。现在页面大小和页码的默认值分别是和。因此，当您在没有可选参数的情况下调用此方法时，您总是会获得前 10 条记录。`Take`*`10``1`*

 *> 以及如何改变

使用您需要的页面大小和页码调用该方法。

和 - 我会通过删除`= 10`和来改进这段代码`= 1`。我认为对于分页方法，默认参数是无用且具有欺骗性的。您应该始终注意要获取的页码和页面大小。*遵循 David Tansey 的评论：将其更改为始终返回所有*记录的方法并不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:24:09.467

您的`GetRoster`方法的默认`resultsPerPage`值为 10。请尝试在调用该方法时更改此值，如下所示：

```
public IEnumerable<Users> GetUsers(int sectionID)
{
    var _user = DataBase.ProcsContext.GetRoster<Users>(sectionID, u => new Users
    {
        Name = UserColumnMap.Name(u),
        Email = UserColumnMap.Email(u)
    },
    resultsPerPage: 250);
    return _user;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:03:49.033

尝试这个

```
using(dbContext context = new dbcontext())
{
    var results = (from u in context.Users
                   where u.sectionId == SectionId
                   select new {u.Name, u.Email}).toList();

    return results;
} 
```*

# javascript - 在用户定义的变量上获取 selectedIndex - 适用于 IE 而不是 Firefox

> ID：15978747
> 
> 赞同：0
> 
> 时间：2013-04-12T18:50:38.730
> 
> 标签：javascript, firefox, selectedindex

我有以下根据用户选择填充 HTML 文本字段的函数。由于引用的数量可以是 1 到多个，因此我传入了它们正在更新的引用的 id。

我得到了在线错误：

```
var IndexOfReferenceSelect = ReferenceSelect.selectedIndex; 
```

那`ReferenceSelect`就是`null`。如何`ReferenceSelect`在 Firefox 中设置？我认为使用`getElementById`会起作用。它在 IE 中可以，但在 Firefox 中没有。

```
function SelectReference(ReferenceNum){
    var i;
    var ReferenceSelect = document.getElementById("Reference_" + ReferenceNum);

    var Author      = document.getElementById("Author_Last_Name_" + ReferenceNum);
    var Title       = document.getElementById("Title_" + ReferenceNum);
    var Edition     = document.getElementById("Edition_" + ReferenceNum);
    var Publisher   = document.getElementById("Publisher_" + ReferenceNum);
    var Year1       = document.getElementById("Year_" + ReferenceNum);
    var Pages       = document.getElementById("Pages_" + ReferenceNum);

    var ReferenceList = new Array(<%=strBigListOfOptionTagGroups%>);

    var IndexOfReferenceSelect = ReferenceSelect.selectedIndex;

    var IndexOfReferences = ReferenceList[IndexOfReferenceSelect].split("|");

    Author.value    = IndexOfReferences[0];
    Title.value     = IndexOfReferences[1];
    Edition.value   = IndexOfReferences[2];
    Publisher.value = IndexOfReferences[3];
    Year1.value     = IndexOfReferences[4];
    if (IndexOfReferenceSelect == 0){
        Pages.value = '';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:58:40.610

使用`document.getElementById`正是这样做的方法。所以问题可能是当您试图访问该元素时，DOM 尚未正确加载；或者`ReferenceNum`是不正确的；或者您设置`name`属性而不是`id`: 在这种情况下，IE 有一个错误，它不会在名称或 id 之间产生差异，并且它将返回元素，遵循标准的浏览器将返回该元素`null`。

# cobol - 什么是控制中断？(COBOL)

> ID：15978750
> 
> 赞同：1
> 
> 时间：2013-04-12T18:50:42.973
> 
> 标签：cobol

好的，所以我现在和这周正在参加在线 COBOL 课程，内容是控制中断和控制场......对于以前的讲座，我可以轻松理解，但我不知道这个讲座在说什么。什么是控制字段，用途是什么？谢谢。

以下是讲座网站：

[http://flashserver.ait.iastate.edu/shchang/cobol/chapter10/chapter10u1/index.html](http://flashserver.ait.iastate.edu/shchang/cobol/chapter10/chapter10u1/index.html)

[http://flashserver.ait.iastate.edu/shchang/cobol/chapter10/chapter10u2/index.html](http://flashserver.ait.iastate.edu/shchang/cobol/chapter10/chapter10u2/index.html)

[http://flashserver.ait.iastate.edu/shchang/cobol/chapter10/chapter10u3/index.html](http://flashserver.ait.iastate.edu/shchang/cobol/chapter10/chapter10u3/index.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T20:06:52.847

控制字段是指示数据如何分组的字段。所有相同的控制字段值“属于一起”。控制字段值不属于它的“其他值”。

一个典型的例子可能是客户编号。同一客户编号的数据可以出于某种目的（未完成订单的总数等）在逻辑上组合在一起。

在您当前正在处理的客户中包含另一个客户的数据是不合逻辑的。

当控制字段值改变时，这是一个“控制中断”。在报告中，是时候做一些事情来与其他客户区分开来了，在这个例子中：打印一个总数，指出一些不同的行/页间距，以便用户“看到”“中断”。

您可以有多个控制字段。当更高的控制字段（例如，公司）发生变化时，在其下方的每个控制字段中都会出现“中断”，从最低级别的控制字段开始，按顺序“向上”。

数据通常会按控制字段排序（实际上，您会看到称为控制字段的 SORT 键），但这不是必需的，只要相同控制值的所有数据都是连续的。

文件可以具有控制字段和控制中断，它们可以由包含该中断“级别”的摘要信息的不同记录类型表示。

报告通常会有控制字段，其中包含要在控制中断上执行的特定操作。

```
01\. 1111
02\. 1111
03\. 1111
04\. 1111
05\. 2222 
```

在上面，记录号 05 “导致”了控制中断。需要先对控制值 1111 进行处理，*然后*才能处理记录号 05。

控制处理至少需要存储先前记录的控制字段（通常也称为“密钥”）。通常必须存储或累积其他数据。

有时您在读取下一条记录之前不知道如何处理一条记录，因此整个输入（或其中的所有必填字段）都被存储，并且记录被“一个落后”处理。

要永远记住的一件事是，“文件结尾”会导致最终的 Control Break，它是最高的，并且从最低点向上的所有 Control Break 处理都必须在该点完成。

# c++ - 指向两种不同类型节点的指针

> ID：15978751
> 
> 赞同：0
> 
> 时间：2013-04-12T18:50:47.210
> 
> 标签：c++

我正在用 C++ 编写哈希树，其中我需要两种不同类型的节点，即一种用于非叶节点，它将简单地指向其子节点，另一种用于包含所需信息的叶节点。

我面临的问题是如何在非叶节点中声明指针。因为有些非叶子节点要指向其他非叶子节点，有些必须指向叶子节点。所以我不能为非叶节点中的指针声明一种指针类型。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:59:58.913

您可以只拥有一个带有数据指针的节点类，而不是拥有一个叶节点和一个非叶节点。如果节点不是叶节点，则数据指针将为`NULL`。如果节点是叶节点，`Node*`则将是`NULL`。

```
struct Node
{
    Node *child; // NULL if leaf node
    Data *data;  // NULL if not leaf node
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:53:36.850

我会在标题中使用联合和标志来处理这个问题，告诉我所讨论的指针是指向节点还是叶。

```
struct Header
{
   int isLeaf;
}

struct Leaf
{
    struct Header header;
    struct LeafBody body;
}

struct Node
{
    struct Header header;
    struct NodeBody body;
}

union Entity
{
    struct Header header;
    struct Node   node;
    struct Leaf   leaf;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:57:06.310

有几种解决方案。您可以简单地从叶子继承非叶子，并让多态性处理它。或者使用联合和标志来确定使用哪个。或者最肮脏但有时是有效的，是一个简单的 void*，您可以随时将其转换为您需要的任何东西。根据您的特定需求：联合将表现最佳，多态性将最易读，并且 void* 将与联合具有相同的性能，并且如果您不喜欢联合，则取决于口味更清晰的代码。

# c - 如何从 X509 中删除扩展？

> ID：15978758
> 
> 赞同：1
> 
> 时间：2013-04-12T18:51:18.820
> 
> 标签：c, openssl, x509

我正在创建一个用于`X509`在 C 中修改证书的 api，并且我想添加一种方法来删除扩展名（例如`subjectNameAlt`）。我将如何通过 OpenSSL API 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:04:14.200

您可以`X509_NAME_delete_entry ()`为此使用函数：

> X509_NAME_delete_entry() 从位置 loc 的名称中删除一个条目。已删除的条目将被返回，并且必须被释放。

手册页： http: [//linux.die.net/man/3/x509_name_delete_entry](http://linux.die.net/man/3/x509_name_delete_entry)

**编辑：**

要实际获取和删除扩展，您可以使用以下函数：

```
X509_EXTENSION *X509_delete_ext(X509 *x, int loc); 
```

**例子：**

```
int idx = X509_get_ext_by_NID( cert, nid, -1 ); //get the index
X509_EXTENSION *ext = X509_get_ext(cert, idx); //get the extension
if (ext != NULL){ //check that the extension was found
    X509_delete_ext(cert, idx); //delete the extension
    X509_EXTENSION_free(ext); //free the memory
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-29T00:08:55.680

Paul 的回答是释放从 X509_get_ext 返回的指针，文档明确表示不要这样做。如[文档所述](https://www.openssl.org/docs/man1.1.0/crypto/X509_get_ext.html)：

> `X509v3_get_ext()`[and `X509_get_ext()`] 从 检索扩展名 loc `x`。索引 loc 可以取从 0 到 的任何值`X509_get_ext_count(x) - 1`。返回的扩展是一个内部指针，**应用程序不能释放它**。

释放扩展的正确方法如下。

```
int idx = X509_get_ext_by_NID( cert, nid, -1 ); //get the index
X509_EXTENSION *ext = X509_get_ext(cert, idx); //get the extension
if (ext != NULL){ //check that the extension was found
    X509_EXTENSION *tmp = X509_delete_ext(cert, idx); //delete the extension
    X509_EXTENSION_free(tmp); //free the memory
} 
```

# java - 如何向 JTable 添加“输入值”侦听器？

> ID：15978762
> 
> 赞同：1
> 
> 时间：2013-04-12T18:51:52.243
> 
> 标签：java, swing, jtable, mouselistener

我有一个 JTable。目前我有以下代码：

```
 table.addMouseListener(new MouseAdapter() {
     public void mouseClicked(MouseEvent e) {
     if (e.getClickCount() == 1) {
     JTable target = (JTable)e.getSource();
     int row = target.getSelectedRow();

     int   value = Integer.parseInt( (String) table.getValueAt(row, 0));
     int x = 0,y=0;
     if (row==1) {x=582;y=483;} else if (row==2) {x=221;y=575;} else if (row==3) {x=231;y=435;}
     boundaryFill4(x, y, value, 50);

     my.setIcon(new ImageIcon(buffered));

            }
          }
        }); 
```

但是我需要让我的 JTable 在用户输入新值时自动更新。鼠标侦听器并不完全符合我的要求。当用户将光标指向 JTable 单元格时，它将更新。我在文档中找不到任何“输入值更新”侦听器。

我可以使用 keyListener，但在这种情况下，我需要添加一个“UPDATE”JButton，但我需要 JTable 在没有 JButton 的情况下自动更新自身。

第三种方法是创建一个无限更新循环：while(true) { //update} 但这需要大量的计算机内存......而且不是有效的方法。

任何人都可以推荐我如何改进我的代码，或者任何人都可以更正上面的 MouseListener。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:33:11.233

如[*如何使用表格*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中所示，您可以通过选择如何构建您的`TableModel`. 要控制单个单元格，请覆盖`isCellEditable()`您的`TableModel`. 如果您仍有问题，请编辑您的问题以包含显示您选择的方法的[sscce 。](http://sscce.org/)

附录：*我只是好奇是否有“输入”监听器。*

您可能正在寻找一个[`TableCellEditor`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)，在[这里](https://stackoverflow.com/a/7539298/230513)和[这里](https://stackoverflow.com/a/13510756/230513)看到的。

# ios - 从 ^block 访问 @property

> ID：15978765
> 
> 赞同：0
> 
> 时间：2013-04-12T18:52:02.027
> 
> 标签：ios, objective-c, objective-c-blocks

当我尝试更改在我的 StreamScreen UIViewController 类中声明的@property 时，我收到一个（lldb）错误。

我正在尝试更改 asyncRequest 成功块中的 feedList 对象。asyncRequest 方法是我导入的一个类方法，它是我的名为 NSURLConnection-block 的类的一部分。

**所以...**

我正在尝试更改一个 NSMutableArray (feedList)，它是 StreamScreen 中的一个块内的 StreamScreen 的一部分，并且该块由另一个类的类方法 (asyncRequest) 调用，但我收到错误。

在调试导航器中，我得到 -`error: address doesn't contain a section that points to a section in a object file`

**这是我的一些代码...**

**这是我声明 feedList @property (StreamScreen.h) 的地方**

```
@property (strong, nonatomic) NSMutableArray *feedList; 
```

**下面的代码是（StreamScreen.m）中带有asyncRequest类方法的getStream方法**

```
- (void)getStream {
    NSString *fbAccessToken = [[[FBSession activeSession] accessTokenData] accessToken];
    NSString *urlString = [NSString stringWithFormat: @"http://198.199.71.169/getFB.php?at=%@", fbAccessToken];
    NSURL *url = [[NSURL alloc] initWithString:urlString];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
    [NSURLConnection asyncRequest:request
                          success:^(NSData *data, NSURLResponse *response) {
                              NSLog(@"%@", feedList);
                          }
                          failure:^(NSData *data, NSError *error) {
                              NSLog(@"Error! %@",[error localizedDescription]);
                          }];
} 
```

我实例化 feedList NSMutableArray 并在我的 viewDidLoad 方法中调用 getStream 方法

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    feedList = [[NSMutableArray alloc] initWithObjects:@"zero", @"one", @"two", nil];
    [self getStream];    
} 
```

***编辑：***

**这是 NSURLConnection-block.m**

```
#import "NSURLConnection-block.h"

@implementation NSURLConnection (block)

#pragma mark API
+ (void)asyncRequest:(NSURLRequest *)request success:(void(^)(NSData *,NSURLResponse *))successBlock_ failure:(void(^)(NSData *,NSError *))failureBlock_
{
    [NSThread detachNewThreadSelector:@selector(backgroundSync:) toTarget:[NSURLConnection class]
                           withObject:[NSDictionary dictionaryWithObjectsAndKeys:
                                       request,@"request",
                                       successBlock_,@"success",
                                       failureBlock_,@"failure",
                                       nil]];
}

#pragma mark Private
+ (void)backgroundSync:(NSDictionary *)dictionary
{
    //NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    void(^success)(NSData *,NSURLResponse *) = [dictionary objectForKey:@"success"];
    void(^failure)(NSData *,NSError *) = [dictionary objectForKey:@"failure"];
    NSURLRequest *request = [dictionary objectForKey:@"request"];
    NSURLResponse *response = nil;
    NSError *error = nil;
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    if(error)
    {
        failure(data,error);
    }
    else
    {
        success(data,response);
    }
    //[pool release];
}

@end 
```

**这是 NSURLConnection-block.h**

```
#import <Foundation/Foundation.h>

@interface NSURLConnection (block)
#pragma mark Class API Extensions
+ (void)asyncRequest:(NSURLRequest *)request success:(void(^)(NSData *,NSURLResponse *))successBlock_ failure:(void(^)(NSData *,NSError *))failureBlock_;
@end 
```

我希望有一个人可以帮助我。我真的很感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:02:13.300

你是在自己合成`feedList`一个`feedList`ivar 吗？否则 try `_feedList`，这是默认的合成变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:32:13.947

如果编译器没有抱怨，你可能不会得到你期望的结果。您`feedList`在制作`asyncRequest`.

尝试

```
[self feedList] 
```

或者，更有用的是，`response`这显然在块的范围内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:14:17.663

可能由于多线程环境而发生错误：

当你把它放在成功块中时会发生什么？：

```
dispatch_async(dispatch_get_main_queue(), ^{
    NSLog(@"%@",self.feedList);
}); 
```

# prestashop - Prestashop 1.5.3.1。免运费

> ID：15978766
> 
> 赞同：1
> 
> 时间：2013-04-12T18:52:03.387
> 
> 标签：prestashop

如何为我的每个承运人设置不同的免费送货边界？例如承运人 1：免费送货起价 @ 100 美元承运人 1：免费送货起价 @ 200 美元

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:29:54.120

这很简单。转到后台 -> 运输 -> 价格范围。您可以为每个单独的运营商添加不同的范围。创建所有范围后，再次单击 Shipping。滚动到底部，您将看到“按运营商、地理区域和范围划分的费用”。瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:32:52.760

将模块编辑为特定的快递员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T08:44:35.337

好吧，我不是那样做的。我使用覆盖来添加第二个免费送货价格，然后在 cart.php 中我将它连接到特定的运营商（id）覆盖：

```
'PS_SHIPPING_FREE_PRICE' => array(
                        'title' => $this->l('Free shipping starts at'),
                        'suffix' => $this->context->currency->getSign(),
                        'cast' => 'floatval',
                        'type' => 'text',
                        'validation' => 'isPrice'),
                    'PS_SHIPPING_FREE_PRICE2' => array(
                        'title' => $this->l('Free shipping2 starts at'),
                        'suffix' => $this->context->currency->getSign(),
                        'cast' => 'floatval',
                        'type' => 'text',
                        'validation' => 'isPrice'),
cart.php: 
```

$configuration = Configuration::getMultiple(array('PS_SHIPPING_FREE_PRICE', 'PS_SHIPPING_FREE_PRICE2', 'PS_SHIPPING_HANDLING', 'PS_SHIPPING_METHOD', 'PS_SHIPPING_FREE_WEIGHT'));

```
 // Free fees
        $free_fees_price = 0;
        if (isset($configuration['PS_SHIPPING_FREE_PRICE']))
            if($id_carrier==27)  
            $free_fees_price = Tools::convertPrice((float)$configuration['PS_SHIPPING_FREE_PRICE2'], Currency::getCurrencyInstance((int)$this->id_currency));
        else
            $free_fees_price = Tools::convertPrice((float)$configuration['PS_SHIPPING_FREE_PRICE'], Currency::getCurrencyInstance((int)$this->id_currency)); 
```

这对我来说很好，但是每次更新您的运营商时，它都会获得新的 ID，因此您必须更新和 cart.php 最好使用 cart.php 的覆盖，但我就是做不到

# multithreading - WCF单线程？同步通话？

> ID：15978769
> 
> 赞同：0
> 
> 时间：2013-04-12T18:52:09.930
> 
> 标签：multithreading, wcf, thread-safety

我有一个 WCF 服务，它充当应用程序之间的中间件：WCF 接收来自多个客户端（例如系统 A）的多个调用。每个调用都会导致调用另一个系统（例如，系统 B）。

是否可以每次对系统 B 进行一次调用？而不是使通话瘫痪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:40:04.783

如果系统 B 不关心它在哪个线程上被调用，但您只想确保它不会被多个线程同时调用（可能是因为您知道系统 B 依赖于全局变量或全局状态），那么您可以使用一个简单的互斥锁让所有线程排成一行，通过系统B单文件。像这样的东西：

```
public class MyClass
{
  private static object _lockObj = new Object();

  public void MyFunction()
  {
    lock(_lockObj)  
    {
      system_B_call(etc);
    }
  }
} 
```

重要提示：您要“限制”的所有函数必须使用相同的锁定对象实例。

如果您的系统 B 对调用它的线程很敏感（包括 WinForms 和 WCF 在内的许多 UI 框架要求 UI 更改发生在主 UI 线程上），那么您需要将调用编组到特定线程上。有几种方法可以做到这一点，其中一种是使用[SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.send.aspx)及其 Post 或 Send 方法。

# django - post_delete 和 post_save 信号的使用有什么区别吗？

> ID：15978772
> 
> 赞同：0
> 
> 时间：2013-04-12T18:52:16.217
> 
> 标签：django

我正在尝试实现几个信号来创建、删除和删除在从数据库中创建或删除实例时生成的一些文件。

现在下面的代码正在工作：

```
class Document(TimeStampedModel, StatusModel):

    ...

    def save(self, *args, **kwargs):
        create = self.pk is None
        super(Document, self).save(*args, **kwargs)
        if create:
            os.makedirs(self.get_root_path())
            self.process_file()

from django.db.models.signals import post_delete, post_save
from django.dispatch.dispatcher import receiver

@receiver(post_delete, sender=Document)
def document_delete(sender, instance, **kwargs):
    shutil.rmtree(instance.get_root_path(), ignore_errors=True)
    instance.docfile.delete(False) 
```

post_delete 信号正在工作。当我尝试设置 post_save 信号（而不是重写 save 方法）时，它不起作用。信号永远不会被调用。

```
class Document(TimeStampedModel, StatusModel):

    ...

from django.db.models.signals import post_delete, post_save
from django.dispatch.dispatcher import receiver

@receiver(post_delete, sender=Document)
def document_delete(sender, instance, **kwargs):
    shutil.rmtree(instance.get_root_path(), ignore_errors=True)
    instance.docfile.delete(False)

@receiver(post_save, sender=Document)
def document_save(sender, instance, created, **kwargs):
    print "this is never called"
    if created:
        os.makedirs(instance.get_root_path())
        instance.process_file() 
```

我必须配置 post_delete 和 post_save 的方式有什么区别吗？

多重继承是否有可能以一种奇怪的方式影响这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:08:01.557

也许您继承的模型也定义了 post_save 方法。

来自 Django 文档：

> 在某些情况下，您连接信号的模块可能会被多次导入。这可能会导致您的接收器函数被多次注册，从而为单个信号事件多次调用。

解决方案是为您的信号设置一个唯一标识符，如下所示：

```
from django.db.models.signals import post_delete, post_save
import uuid

"""Class Document"""

def document_save(sender,instance,*args, **kwargs):
    if created:
        os.makedirs(instance.get_root_path())
        instance.process_file()

post_save.connect(document_save, dispatch_uid=str(uuid.uuid1()),sender = Document) 
```

# javascript - 带有嵌入对象的 Ember.js 模型

> ID：15978774
> 
> 赞同：0
> 
> 时间：2013-04-12T18:52:20.107
> 
> 标签：javascript, ember.js, ember-data

我将查询一个在响应中返回嵌入对象的 API，因此我将使用夹具适配器对此进行模拟。我的数据如下所示：

```
App.Deal.FIXTURES = [
      {id: 1, name: 'Deal 1', closed_time: '2012-04-01', value_in_cents: 342345, company: { id: 1, name: 'Google' }, user: { id: 2, full_name: 'Bob Smith' } },
      {id: 2, name: 'Deal 2', closed_time: '2012-04-01', value_in_cents: 342345, company: { id: 1, name: 'Google' }, user: { id: 2, full_name: 'Bob Smith' } }
] 
```

这是我的模型：

```
App.Deal = DS.Model.extend({
  name: DS.attr('string'),
  value_in_cents: DS.attr('number'),
  closed_time: DS.attr('date'),
  user: DS.belongsTo('App.User'),
  company: DS.belongsTo('App.Company')
});

App.User = DS.Model.extend({
  full_name: DS.attr('string')
});

App.Company = DS.Model.extend({
  name: DS.attr('string')
}); 
```

我不确定如何获取`user`和`company`对象。我通过控制台查看数据：

```
App.Deal.find(1)
Class {store: Class, clientId: 2, _relationshipChanges: Object, _changesToSync: Object, id: "1"…}
__ember1365792240874: "ember329"
__ember1365792240874_meta: Meta
_changesToSync: Object
_data: Object
attributes: Object
belongsTo: Object
company: Object
id: 1
name: "Google"
__proto__: Object 
```

但我做不到`App.Deal.find(1).get('user')`。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:12:13.930

以下设置有效：

```
App.Adapter = DS.FixtureAdapter.extend();

App.Adapter.map('App.Deal', {
  user: {embedded: 'load'},
  company: {embedded: 'load'}
});

App.User = DS.Model.extend({
  full_name: DS.attr('string')
});

App.Company = DS.Model.extend({
  name: DS.attr('string')
});

App.Deal = DS.Model.extend({
  name: DS.attr('string'),
  value_in_cents: DS.attr('number'),
  closed_time: DS.attr('date'),
  user: DS.belongsTo(App.User, {embedded: 'load'}),
  company: DS.belongsTo(App.Company, {embedded: 'load'})
}); 
```

# ruby-on-rails - rails 关联的多样性

> ID：15978778
> 
> 赞同：0
> 
> 时间：2013-04-12T18:52:34.920
> 
> 标签：ruby-on-rails, associations, multiplicity

问题是：如何在 Ruby on Rails 关联中表示多样性？假设我有两个模型 - **Collection**和**Item**。他们处于**has_and_belongs_to_many**关系中。如果一个集合包含多个相同的项目实例（例如，它包含 10 个相同的项目），我应该怎么做？

我尝试了**has_many :through**，但这似乎不是很好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:12:07.697

首先，我想澄清一下，您确实想要多对多关系，而不仅仅是一对多，其中有**重复**的数据库记录来表示多重性。因为如果可以的话，您可以简单地`items`根据需要多次复制记录并将它们的`collection_id`外键指向适当的`Collection`记录。

如果这不是您想要的，并且您确实想要多重性，那么我不会使用 ActiveRecord 关联来执行此操作。我将简单地存储一个数组或`item_ids`in`Collection`对象列表，并将该数组序列化/反序列化为数据库中的字符串或文本字段，以便：

```
collection.item_ids
=> [2, 3, 1, 1, 2, 1, 2, 2, 2, 2, 5, 6, 2, 3, 2] 
```

其中`item_ids`属性中的每个条目都是表的外键`items`。

如果您碰巧使用 Postgres 作为您的数据库，我认为您实际上可以将列表/数组存储为[Postgres`array`列](http://www.postgresql.org/docs/9.1/static/arrays.html)，尽管我自己从未真正尝试在 Rails 中这样做。

# python - 如何找到整数 n 次根？

> ID：15978781
> 
> 赞同：17
> 
> 时间：2013-04-12T18:52:40.453
> 
> 标签：python, algorithm, math, nth-root

我想找到小于或等于 n 的第 k 个根的最大整数。我试过

```
int(n**(1/k)) 
```

但是对于 n=125, k=3 这给出了错误的答案！我碰巧知道 5 的立方是 125。

```
>>> int(125**(1/3))
4 
```

有什么更好的算法？

背景：在 2011 年，这个失误让我击败了 Google Code Jam 问题[*昂贵的晚餐*](https://codingcompetitions.withgoogle.com/codejam/round/0000000000432f3b/0000000000432b31)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T18:57:00.673

怎么样：

```
def nth_root(val, n):
    ret = int(val**(1./n))
    return ret + 1 if (ret + 1) ** n == val else ret

print nth_root(124, 3)
print nth_root(125, 3)
print nth_root(126, 3)
print nth_root(1, 100) 
```

在这里，两者`val`和`n`都应该是整数和正数。这使得`return`表达式完全依赖整数运算，消除了任何舍入错误的可能性。

`val**(1./n)`请注意，只有在相当小的情况下才能保证准确性。一旦该表达式的结果与真实答案的偏差超过`1`，该方法将不再给出正确答案（它将给出与原始版本相同的近似答案）。

> 我仍然想知道`int(125**(1/3))`为什么`4`

```
In [1]: '%.20f' % 125**(1./3)
Out[1]: '4.99999999999999911182' 
```

`int()`将其截断为`4`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-12T20:04:46.107

一种解决方案首先通过重复将 hi 乘以 2 直到 n 介于 lo 和 hi 之间，将 lo 和 hi 之间的答案括起来，然后使用二进制搜索来计算确切的答案：

```
def iroot(k, n):
    hi = 1
    while pow(hi, k) < n:
        hi *= 2
    lo = hi // 2
    while hi - lo > 1:
        mid = (lo + hi) // 2
        midToK = pow(mid, k)
        if midToK < n:
            lo = mid
        elif n < midToK:
            hi = mid
        else:
            return mid
    if pow(hi, k) == n:
        return hi
    else:
        return lo 
```

一个不同的解决方案使用牛顿法，它对整数非常有效：

```
def iroot(k, n):
    u, s = n, n+1
    while u < s:
        s = u
        t = (k-1) * s + n // pow(s, k-1)
        u = t // k
    return s 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T19:27:24.363

我被严重烧伤后的谨慎解决方案：

```
def nth_root(N,k):
    """Return greatest integer x such that x**k <= N"""
    x = int(N**(1/k))      
    while (x+1)**k <= N:
        x += 1
    while x**k > N:
        x -= 1
    return x 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-30T06:39:11.507

为什么不试试这个：

```
125 ** (1 / float(3)) 
```

或者

```
pow(125, 1 / float(3)) 
```

它返回 5.0，因此您可以使用 int() 转换为 int。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T19:14:04.623

这是在 Lua 中使用 Newton-Raphson 方法

```
> function nthroot (x, n) local r = 1; for i = 1, 16 do r = (((n - 1) * r) + x / (r ^ (n -   1))) / n end return r end
> return nthroot(125,3)
5
> 
```

蟒蛇版本

```
>>> def nthroot (x, n):
...     r = 1
...     for i in range(16):
...             r = (((n - 1) * r) + x / (r ** (n - 1))) / n
...     return r
... 
>>> nthroot(125,3)
5
>>> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T19:34:27.313

我想知道从基于对数的方法开始是否可以帮助确定舍入误差的来源。例如：

```
import math
def power_floor(n, k):
    return int(math.exp(1.0 / k * math.log(n)))

def nth_root(val, n):
    ret = int(val**(1./n))
    return ret + 1 if (ret + 1) ** n == val else ret

cases = [
    (124, 3),
    (125, 3),
    (126, 3),
    (1, 100),
    ]

for n, k in cases:
    print "{0:d} vs {1:d}".format(nth_root(n, k), power_floor(n, k)) 
```

打印出来

```
4 vs 4
5 vs 5
5 vs 5
1 vs 1 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-12T19:59:33.487

```
def nth_root(n, k):
    x = n**(1./k)
    y = int(x)
    return y + 1 if y != x else y 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-12T19:03:31.883

`int(125**(1/3))`显然应该是 5，即正确答案，所以这必须是标准的计算机舍入误差，即内部结果是 4.9999999999，它被舍入为 4。无论您使用什么算法，都会存在这个问题。一个简单的临时解决方案是添加一个很小的数字，例如`int((125**(1/3)) + 0.00000001)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-12T19:06:29.410

您可以四舍五入到最接近的整数，而不是将 / 向下舍入为零（我不知道 Python 指定了什么）：

```
def rtn (x):
    return int (x + 0.5)

>>> rtn (125 ** (1/3))
5 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-12T19:19:49.197

在一切之前这样做：

```
from __future__ import division 
```

然后运行任何上述指定的技术来得到你的结果。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-01T09:46:47.900

```
def nthrootofm(a,n):
    a= pow(a,(1/n))
    return 'rounded:{},'.format(round(a))
a=125
n=3
q=nthrootofm(a,n)
print(q) 
```

刚刚使用了格式字符串，也许这有帮助。

# php - 简单 php 脚本的找不到对象错误

> ID：15978782
> 
> 赞同：0
> 
> 时间：2013-04-12T18:52:40.303
> 
> 标签：php, forms, post, submit, http-status-code-404

每次我点击提交按钮以在我的网页中处理此代码时，它都会转到“找不到对象（404 错误）”页面。它发生在我的一些脚本中，我不知道问题的根源是我的本地主机（Xampp）还是我的代码。

```
if (isset($_POST['submit']))
{
    require "dbc.php"; //Connection to database
    //the textfield input to be saved
    $name = mysql_real_escape_string($_POST['assign_id']);
    $id   = mysql_real_escape_string($_POST['id']);

    //the mysql query to process the textfield input
    $query = mysql_query("UPDATE users SET docID='$assign_id' WHERE id='$id'");
//normal statement to let the user know that the changes have been made.    
    echo "Doctor ID Successfully Assigned for Patient ID : $name ";
    echo "<p>Refresh page to view changes.</p>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:06:28.920

404 是一个 HTTP 错误代码，它（直接）与 PHP 无关。

这意味着服务器无法找到与您的请求匹配的文件。

本质上，看起来您在提交表单时正在请求[http://yourdomain.com/path/to/script.php](http://yourdomain.com/path/to/script.php)，但 /path/to/script.php 文件不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:15:21.833

在表单上按下提交时，服务器会尝试查找表单的“操作”。您应该检查此操作是否在正确的路径中包含有效的文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T21:00:47.750

在表单上按下提交时，服务器会尝试查找表单的“操作”。您应该检查此操作是否在正确的路径中包含有效的文件名。总是显示错误..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:58:13.063

您`$assign_id`在查询中使用，您可以在其中获取`$_POST['assign_id']`较早的并将其存储到`$name`.

尝试将`$assign_id`您的查询更改为`$name`.
或
尝试将您的变量更改`$name`为`$assign_id`.

**编辑**

要检查的另一件事是，该文件是否与该文件`dbc.php`位于同一目录中？

**编辑 2**

发布`apache2/error.log`文件的内容。这将显示没有找到什么文件。

**编辑 3**

为您发布`<form>`打开标签的代码。你的`action`设置是什么？动作文件真的存在吗？

# jaxb - @XmlJavaTypeAdapter、继承和 xsi:type

> ID：15978783
> 
> 赞同：2
> 
> 时间：2013-04-12T18:52:43.043
> 
> 标签：jaxb, eclipselink, moxy

好吧，当我执行以下操作时会发生什么：

Entities.java：所有名称以“E”开头的类（例如 ESTudent、ETeacher 等）都扩展了`EntityWithId`类。

```
public class Entities {

  Map<Integer,EStudent> students;
  Map<Integer,ETeacher> teachers;
  Map<Integer,ECourse> courses;
  Map<Integer,EQuiz> quizzes;
  Map<Integer,EQuestion> questions;
  Map<Integer,EAnswer> answers;
  Map<Integer,ETimeslot> timeslots;
  Map<Integer,ESharedFile> sharedFiles;

  ...
} 
```

entity-xml-bindings.xml：我为所有属性设置了 xml-java-type-adapter。为清楚起见省略。

```
<?xml version="1.0" encoding="US-ASCII"?>
  <xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="com.pest.esinif.common.entity">

<java-types>
    <java-type name="Entities">
        <java-attributes>
            <xml-element java-attribute="students" >
                <xml-java-type-adapter value="com.pest.esinif.common.entity.adapters.MapToCollectionAdapter" />
            </xml-element>
            ...
        </java-attributes>
    </java-type>
</java-types>
</xml-bindings> 
```

MapToCollectionAdapter.java：旨在将 Maps 转换为 Collections。

```
public class MapToCollectionAdapter extends XmlAdapter<MyCollection, Map<Integer,EntityWithId>> {

@Override
public Map<Integer, EntityWithId> unmarshal(MyCollection v) throws Exception {
    Map<Integer, EntityWithId> m = new TreeMap<>();

    for (Iterator<EntityWithId> it = v.list.iterator(); it.hasNext();) {
        EntityWithId i = it.next();
        m.put(i.getId(), i);
    }

    return m;
}

@Override
public MyCollection marshal(Map<Integer, EntityWithId> v) throws Exception {
    if(v == null) {
        return null;
    }
    MyCollection mc = new MyCollection();
    mc.list = v.values();
    return mc;
}

class MyCollection {

  @XmlElement(name="entry")
  public Collection<EntityWithId> list;

  public MyCollection() {}
} 
```

当我编组这个时，输出如下。

```
<?xml version="1.0" encoding="UTF-8"?>
<entities>
   <courses>
      <entry id="4" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="eCourse">
         <name>English</name>
         <timetable>5</timetable>
         <timetable>6</timetable>
      </entry>
   </courses>
   <students>
      <entry id="1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="eStudent">
         <name>Anil Anar</name>
      </entry>
   </students>
   <timeslots>
      <entry id="12" course="4" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="eTimeslot">
         <attendances>1</attendances>
         <day>1970-01-01T02:00:00.0</day>
         <slot>0</slot>
      </entry>
   </timeslots>
</entities> 
```

你注意到那些`xsi:type`s了吗？当我省略它们时， unmarshaller 显然失败了。但我不希望所有`<entry>`标签都有这个。我希望它如下：

```
<courses child-xsi-type="eCourse">
    <entry> ... </entry>
    <entry> ... </entry>
</courses> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:31:36.820

感谢[Blaise Doughan 的博客](http://blog.bdoughan.com)，我解决了这个问题。诀窍是使用`@XmlAnyElement(lax=true)`and 来注释`EntityWithId`with的子类`@XmlRootElement`。

```
class MyCollection {

  @XmlAnyElement(lax=true)
  public Collection<EntityWithId> list;

  public MyCollection() {}
} 
```

我得到的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<entities>
   <courses>
      <course id="4">
         <name>English</name>
         <timetable>5</timetable>
         <timetable>6</timetable>
      </course>
   </courses>
   <students>
      <student id="1">
         <name>Anil Anar</name>
      </student>
   </students>
   <timeslots>
      <timeslot id="12">
         <attendances>1</attendances>
         <day>1970-01-01T02:00:00.0</day>
         <slot>0</slot>
      </timeslot>
   </timeslots>
</entities> 
```

# responsive-design - Cycle.js 覆盖图像大小

> ID：15978788
> 
> 赞同：0
> 
> 时间：2013-04-12T18:52:56.703
> 
> 标签：responsive-design, jquery-cycle

我正在使用 cycle.js，但该网站是响应式的。

我希望能够使用大图像（对于全屏版本来说足够大），然后`max-width:100%`在图像上使用以根据屏幕尺寸减小其宽度。

问题是`cycle.js`根据图像的大小使用内联样式覆盖。因此，如果是`800x600`这样，它将始终以该大小显示，无论包含 div 的宽度是 100px 还是 1000px

代码：

```
<div id="rightCol">
            <div class="slideshow">
                <img src="http://4.bp.blogspot.com/-PGEqrdJBKmc/T_xe7hoz0yI/AAAAAAAAA0w/vKDMnf-5p7o/s1600/cat+5.jpg" />
                <img src="http://4.bp.blogspot.com/-PGEqrdJBKmc/T_xe7hoz0yI/AAAAAAAAA0w/vKDMnf-5p7o/s1600/cat+5.jpg" />
                <img src="http://4.bp.blogspot.com/-PGEqrdJBKmc/T_xe7hoz0yI/AAAAAAAAA0w/vKDMnf-5p7o/s1600/cat+5.jpg" />
                <img src="http://4.bp.blogspot.com/-PGEqrdJBKmc/T_xe7hoz0yI/AAAAAAAAA0w/vKDMnf-5p7o/s1600/cat+5.jpg" />
            </div>
        </div> 
```

# 右科尔{

```
width:72.5%;
float:right; 
```

}

# 幻灯片{

```
width:100% 
```

}

# 幻灯片img{

```
max-width:100%; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:51:44.377

当我使用 Cycle.js 但需要它做出响应时，我设法为此创建了一个修复程序。

我必须在其他图像之前添加一个具有固定宽度和高度的透明 dummy.gif 图像。

例如

```
<div id="slider-wrapper">

     <div id="slider">

        <img src="images/dummy.gif" width="960px" height="300px">

        <img  src="images/image1.jpg" />

        <img  src="images/image2.jpg" />

        <img  src="images/image3.jpg" />  

        <img  src="images/image4.jpg" />

    </div>
</div> 
```

与之配套的 CSS 是：

```
#slider
{
    width:100%;
    height:auto;
    min-height:300px;
    max-width:960px;
}
#slider img
{
    max-width: 100%;
    height: auto;
    width: auto; 
} 
```

这里有一个例子：http: [//jacobhammond.co.uk/](http://jacobhammond.co.uk/) - 请注意该网站还没有完成，只是一个实验。我目前正在我的实际网站上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:48:48.703

看看 cycle.js 的内部工作

```
// apparently a lot of people use image slideshows without height/width attributes on the images.
// Cycle 2.50+ requires the sizing info for every slide; this block tries to deal with that.
var requeue = false;
options.requeueAttempts = options.requeueAttempts || 0;
$slides.each(function() {
    // try to get height/width of each slide
    var $el = $(this);
    this.cycleH = (opts.fit && opts.height) ? opts.height : ($el.height() || this.offsetHeight || this.height || $el.attr('height') || 0);
    this.cycleW = (opts.fit && opts.width) ? opts.width : ($el.width() || this.offsetWidth || this.width || $el.attr('width') || 0);

    if ( $el.is('img') ) {
        // sigh..  sniffing, hacking, shrugging...  this crappy hack tries to account for what browsers do when
        // an image is being downloaded and the markup did not include sizing info (height/width attributes);
        // there seems to be some "default" sizes used in this situation
        var loadingIE   = ($.browser.msie  && this.cycleW == 28 && this.cycleH == 30 && !this.complete);
        var loadingFF   = ($.browser.mozilla && this.cycleW == 34 && this.cycleH == 19 && !this.complete);
        var loadingOp   = ($.browser.opera && ((this.cycleW == 42 && this.cycleH == 19) || (this.cycleW == 37 && this.cycleH == 17)) && !this.complete); 
```

它需要获取图像元素的高度宽度属性。因此，在 JS 中编写一个简单的辅助函数，它可以在调整窗口大小时提供此功能。用一点谷歌搜索应该不会很难。

[jquery循环在调整大小时自动适应窗口宽度](https://stackoverflow.com/questions/11467656/jquery-cycle-automatically-fit-to-window-width-on-resize)

[Jquery 循环调整大小](https://stackoverflow.com/questions/8082360/jquery-cycle-resize)

# javascript - JQuery获取和设置高度

> ID：15978791
> 
> 赞同：0
> 
> 时间：2013-04-12T18:53:03.283
> 
> 标签：javascript, jquery, html, height

我试图让 div '.impress' 的高度与 div '.page' 的高度相同，但我的 '.impress' div 的高度显示不正确（'.impress' 太小了）。

查询：

```
var getHeight = $('.page').height();
$(".impress").css('height', getHeight+200); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:54:43.683

您应该使用 jquery 的 height() 方法来设置高度：

```
$(".impress").height(getHeight+200) 
```

或者，如果您使用的`css('height',...)`是确保包含单位，则在您的情况下：

```
$(".impress").css('height', (getHeight+200) + 'px') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:58:15.237

在访问高度之前，您是否确保 DOM 已加载并准备就绪`.impress`？

确保这是发生的，`$(document).ready(function() {});`以确保`.impress`已布置并具有高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:06:19.837

首先确保`.page`存在。

```
if($('.page').length){
    var getHeight = parseInt($('.page').height());
    $(".impress").css('height', getHeight+200);
}
else{
    alert('oops');
} 
```

## 更新：

如果`$('.page')`存在，则确保它具有一定的高度。所有孩子都漂浮的父母*可能*有`height = 0`

# amazon-web-services - 如果在 cloudformation 脚本的参数中未指定任何安全组，如何创建安全组？

> ID：15978796
> 
> 赞同：1
> 
> 时间：2013-04-12T18:53:14.677
> 
> 标签：amazon-web-services, amazon-cloudformation

我有一个安全组参数：

```
"Parameters" : {
 "SecurityGroup" : {
   "Description" : "Name of an existing EC2 Security Group ",
   "Type" : "String",
   "Default" : "default", 
   "MinLength": "1",
   "MaxLength": "64",
   "AllowedPattern" : "[-_ a-zA-Z0-9]*",
   "ConstraintDescription" : "can contain only alphanumeric characters, spaces, dashes and underscores."
  },
}, 
```

但是，如果没有指定参数，我想创建一个，而不是使用默认值。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-13T03:41:49.823

这些可能是在提出此问题后添加的，但对于现在遇到此问题的任何人，都可以使用 CloudFormation 中的[条件](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html)来完成。

因此，如果我们从您的参数声明开始

```
"Parameters" : {
 "SecurityGroup" : {
   "Description" : "Name of an existing EC2 Security Group ",
   "Type" : "String",
   "Default" : "default", 
   "MinLength": "1",
   "MaxLength": "64",
   "AllowedPattern" : "[-_ a-zA-Z0-9]*",
   "ConstraintDescription" : "can contain only alphanumeric characters, spaces, dashes and underscores."
  },
}, 
```

我们可以添加一个`Conditions`带有条件的声明`ShouldCreateSecurityGroup`

```
"Conditions" : {
  "ShouldCreateSecurityGroup" : {"Fn::Equals" : [{"Ref" : "SecurityGroup"}, "default"]}
}, 
```

此条件现在可用于告诉 CloudFormation 是否创建安全组：

```
"Resources": {
  "NewSecurityGroup": {
    "Type" : "AWS::EC2::SecurityGroup",
    "Condition" : "ShouldCreateSecurityGroup" 
    "Properties" : {
       "SecurityGroupEgress" : [ Security Group Rule, ... ],
       "SecurityGroupIngress" : [ Security Group Rule, ... ],
    }
  }
} 
```

那么当你去引用this里面的值的时候，你可以使用[Fn::If](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html#intrinsic-function-reference-conditions-if) Conditional函数来说明你是想使用`SecurityGroup`参数中的值还是`NewSecurityGroup`Resource中的值。例如，要将值传递给`SecurityGroups`EC2 实例的参数，我们可以使用`{"Fn::If}`如下：

```
"Server": {
  {
    "Type" : "AWS::EC2::Instance",
    "Properties" : {
        ...
      "SecurityGroups" : [ {"Fn::If": ["ShouldCreateSecurityGroup", {"Ref": "NewSecurityGroup"}, {"Ref": "SecurityGroup"}]} ],
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T10:39:52.180

否 - Cloud Formation 是一种声明性语言，因此很遗憾没有“if/else”。

您甚至不能通过创建自己的然后将“Ref”传递给参数来做到这一点，因为参数部分在脚本执行之前被解析和评估。

你可以用嵌套的云形成脚本做一些事情，但我还没有玩够它来确定它是否可能。所以对我来说 - 你会有一个脚本，它需要一个参数。如果提供了参数，则直接将其传递给第二个云结构，但如果未提供，则执行第一个云结构并返回新创建的安全组的名称，然后将其传递给第二个云形成。

# jpa - 归档列表中的未知列 - jpa

> ID：15978801
> 
> 赞同：0
> 
> 时间：2013-04-12T18:53:26.670
> 
> 标签：jpa, playframework-1.x

我在播放框架 1.2.4 中收到此错误

```
org.hibernate.util.JDBCExceptionReporter logExceptions - Unknown column 'mytable0_.id' in 'field list' 
```

我的模型是

```
@javax.persistence.Entity
@Table(name="mytable")
public class MyTable extends Model{
    @Id
    public BigInteger pid;
    public String ip;
    ...

} 
```

其中 pid 是主键

我尝试从 GenericModel 扩展，但这给出了同样的错误。

我正在尝试根据特定的 ip 从 MyTable 获取 pid，在我的控制器中使用它

```
List<MyTable> currentIP = MyTable.find("select a from MyTable a where ip = '" + SelectedIP + "'").fetch(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:04:54.267

`Model`已经声明了一个以`id`主键命名的属性。

如果要声明自己的`@Id`，则需要扩展`GenericModel`：

```
@javax.persistence.Entity
@Table(name="mytable")
public class MyTable extends GenericModel { ... } 
```

# sql-server - 从 SQL 数据源创建 ASP.Net 动态 Excel

> ID：15978804
> 
> 赞同：0
> 
> 时间：2013-04-12T18:53:50.470
> 
> 标签：sql-server, vb.net, excel, tsql, crystal-reports

我想创建一个客户端可以从服务器下载的动态 excel 工作表，数据位于 SQL Server 数据库中，我将通过如下查询获得

```
SELECT * FROM employee; 
```

我想做一些类似 Crystal Reports 但在 Excel 文件中的事情

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:08:05.570

我看到了两种可能性。一种是使用 DTS 和导出向导。[您可以在http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49926](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49926)上阅读更多内容。代码将类似于：

```
insert into OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
    'Excel 8.0;Database=D:\testing.xls;', 
    'SELECT * FROM [SheetName$]') SELECT * FROM employee 
```

第二种方式：您可以尝试使用[EEPlus](https://epplus.codeplex.com/)创建 Excel 2007 文件。

# javascript - 跨域 XHR

> ID：15978806
> 
> 赞同：1
> 
> 时间：2013-04-12T18:53:51.677
> 
> 标签：javascript, xmlhttprequest, cross-domain

嗨，我面临一个奇怪的问题。我需要使用来自不同域的 web 服务。所以我查看了 chrome addon Simple REST Client 的代码，我发现他们正在使用这个函数来制作 XHR

```
function sendRequest() {
clearFields();
if ($("#url").val() != "") {
    var a = new XMLHttpRequest;
    a.onreadystatechange = readResponse;
    try {
        a.open($("input[type=radio]:checked").val(), $("#url").val(), true);
        //This code is for adding headers
        var b = $("#headers").val();
        b = b.split("\n");
        for (var c = 0; c < b.length; c++) {
            var d = b[c].split(": ");
            d[1] && a.setRequestHeader(d[0], d[1])
        }
        jQuery.inArray($("input[type=radio]:checked").val(), ["post", "put"]) > -1 ? a.send($("#postputdata").val()) : a.send("")
    } catch (e) {
        console.log(e);

        $("#responsePrint").css("display", "")
    }
} else {
    console.log("no uri");

}
} 
```

所以我创建了一个类似的

```
 var xmlhttp;
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}
else {// code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var test = $(xmlhttp.responseText);
    }
}
xmlhttp.open("GET", "http://aplikace.mvcr.cz/sbirka-zakonu/SearchResult.aspx?q=1/2013&typeLaw=zakon&what=Cislo_zakona_smlouvy", true);
//xmlhttp.setRequestHeader('Access-Control-Allow-Origin','*');
 xmlhttp.send(); 
```

但是有了我的代码，我得到了`XMLHttpRequest cannot load http://aplikace.mvcr.cz/sbirka-zakonu/SearchResult.aspx?q=1/2013&typeLaw=zakon&what=Cislo_zakona_smlouvy. Origin http://localhost:51582 is not allowed by Access-Control-Allow-Origin.` 那么问题出在哪里？为什么以前的代码有效而我的代码几乎不一样？

编辑：我也试过用这个函数调用 hte webservice

```
$.ajax({
    type: "GET",
    url: "http://aplikace.mvcr.cz/sbirka-zakonu/SearchResult.aspx?q=1/2013&typeLaw=zakon&what=Cislo_zakona_smlouvy",
    contentType: "script; charset=utf-8",
    dataType: "jsonp",
    success: function (msg) {
        var tes = $(msg);
    },
    error: function (xhr, status, err) {
    }
}); 
```

我想要做的是将响应读取为 DOM，因为 web 服务返回整个 HTML 页面，我只需要一个 div，但现在我得到`Uncaught SyntaxError: Unexpected token <`了指向这一行的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

正如我在“网络”选项卡中看到的那样，请求有效，但由于错误，成功函数从未被调用，我无法访问数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:18:20.797

[同源策略阻止](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)您这样做。因此错误`http://localhost:51582 is not allowed by Access-Control-Allow-Origin.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:32:44.043

正如其他人所指出的，这是由于**[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)**。这是*由浏览器强制执行的*，这意味着附加组件可以绕过此限制。这应该回答您最初的问题。

如何解决这个问题？有很多方法，但大多数都需要服务器的某种合作。人们已经在这里提到了其中一些解决方法，显然您尝试了 JSONP 路径并得到了错误。

为什么你会得到错误？因为脚本**希望得到 JSONP 格式的响应，但它没有**：它得到了 HTML 响应。我认为这种方法不适用于您的情况，因为服务器绝对不是为此而设计的。

现在真正的问题是：*你为什么要这样做？*根据您的回答，我可以想到几种解决方案。

例如，如果您需要访问该页面上的信息以显示在您的网站上，我认为最简单的解决方案是使用一些代理（请参阅[http://developer.yahoo.com/javascript/howto-proxy. html](http://developer.yahoo.com/javascript/howto-proxy.html)获取更多信息）。

如果您只是出于个人目的在自己的机器上使用它，则可以在某些浏览器中专门禁用同源策略检查。

例如，在 Chrome 中，使用以下选项运行它可以解决问题：（警告：不支持！安全性肯定会受到影响）

```
chrome --disable-web-security 
```

如果你这样做（禁用浏览器的安全检查），即使是简单的：

```
$.get("http://aplikace.mvcr.cz/sbirka-zakonu/SearchResult.aspx?q=1/2013&typeLaw=zakon&what=Cislo_zakona_smlouvy", function(data) {
    console.log(data);
},'html'); 
```

会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:23:48.867

浏览器插件/扩展以不同的权限运行，并在与常规网页不同的环境中运行。我怀疑你的代码如果做成插件应该可以工作。它只是不能作为常规网页使用。

从 CORS 到代理，有解决此问题的方法。在此处搜索“跨域 ajax”或在 Google 周围搜索。

# java - ImageIO.read() 总是旋转我上传的图片

> ID：15978809
> 
> 赞同：17
> 
> 时间：2013-04-12T18:53:56.470
> 
> 标签：java, image, spring-mvc, multipartform-data, javax.imageio

我想创建一个允许用户将他们的图像上传到服务器的 Web 应用程序。当他们单击发送时，他们的图像将被上传到服务器（多部分）。在保存之前，我想对图像进行一些操作，所以我决定使用 ..

> ImageIO.read（输入流）

获取 BufferedImage 对象

这是代码：

```
public static BufferedImage getBufferedImageFromMultipartFile(MultipartFile file) 
throws APIException
{
    BufferedImage bi = null;

    try
    {
        bi = ImageIO.read(file.getInputStream());
    }
    catch (IOException e)
    {
        throw new APIException(ErrorCode.SERVER_ERROR, e);
    }

    return bi;
} 
```

问题是当我尝试上传高度大于宽度的图片时，例如 3264 x 2448（高度 x 宽度），结果始终是已旋转的图像（2448 x 3264）。

有什么办法可以解决这个问题吗？

这是一个错误还是任何定义的 API 规范？

谢谢。

PS。对不起我的英语：D

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-03-28T16:40:41.407

如果使用移动设备拍摄，ImageIO.read( ) 无法读取图像的方向。

我使用元数据提取器来读取元数据，我认为这是一个很好的解决方案： [github.com/drewnoakes/metadata-extractor/wiki](http://github.com/drewnoakes/metadata-extractor/wiki)

```
<dependency> 
  <groupId>com.drewnoakes</groupId> 
  <artifactId>metadata-extractor</artifactId> 
  <version>2.7.2</version> 
</dependency> 
```

读取 exif 目录中归档的方向：

```
ExifIFD0Directory exifIFD0 = metadata.getDirectory(ExifIFD0Directory.class);
int orientation = exifIFD0.getInt(ExifIFD0Directory.TAG_ORIENTATION);

switch (orientation) {
  case 1: // [Exif IFD0] Orientation - Top, left side (Horizontal / normal)
    return null;
  case 6: // [Exif IFD0] Orientation - Right side, top (Rotate 90 CW)
    return Rotation.CW_90;
  case 3: // [Exif IFD0] Orientation - Bottom, right side (Rotate 180)
    return Rotation.CW_180;
  case 8: // [Exif IFD0] Orientation - Left side, bottom (Rotate 270 CW)
    return Rotation.CW_270;
} 
```

（旋转是我使用 ti 旋转图像的 org.imgscalr.Scalr 框架中的一个类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:29:15.027

非常有趣的问题...您可以尝试通过检查图像宽度和高度分别大于 2448 和 3264 来解决它，然后交换其宽度和高度

使用下面的代码：

```
BufferedImage oldImage = ImageIO.read(file.getInputStream());

if (oldImage.getWidth() > 2448 || oldImage.getHeight() > 3264) {

    BufferedImage newImage = new BufferedImage(oldImage.getWidth(),
                oldImage.getHeight(), oldImage.getType());

    Graphics2D graphics = (Graphics2D) newImage.getGraphics();

    graphics.drawImage(oldImage, 0, 0, oldImage.getHeight(),
                oldImage.getWidth(), null);

    ByteArrayOutputStream bos = new ByteArrayOutputStream();

    ImageIO.write(newImage, "JPG", bos);
} 
```

# php - 在数组的前三个元素中包含一个值

> ID：15978810
> 
> 赞同：0
> 
> 时间：2013-04-12T18:54:04.833
> 
> 标签：php, arrays

我正在使用以下代码来获取一些值的数组。

```
<?php

$sms = array();
foreach($contact_number as $value) {    

    $sms[] = array($value, $message);       

}   

 var_dump($sms); 
```

我现在要做的是在上述数组的前 3 个元素中包含一个变量`$abc = "From Charlie Sheen";`，`$message`这样当前三个消息出现时，我可以在原始消息的末尾看到“来自 Charlie Sheen”。

你能告诉我如何解决这个问题吗（如果我不必对上面的数组做任何改变就更好了；我想添加一行新的代码来解决这个问题）

的输出`var_dump($sms);`是：

```
array(2) {
    [0]=> array(2) {
        [0]=> string(3) "123"
        [1]=> string(15) "This is Message"
    }
    [1]=> array(2) {
        [0]=> string(3) "456"
        [1]=> string(15) "This is Message"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:07:13.440

```
$sms = array();
$toAdd = 3;
foreach($contact_number as $value) {
    if($toAdd > 0) {
        $sms[] = array($value, $message . 'charlie bla bla');       
       --$toAdd;
    } else {
        $sms[] = array($value, $message);
    }
} 
```

或更短：

```
$sms = array();
for($toAdd = 3, $i = 0, $l = count($contact_number); $i < $l; --$toAdd, ++$i)
    $sms[] = array($value, $toAdd > 0 ? $message . 'charlie bla bla' : $message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:07:18.790

您可以在创建数组时通过添加计数器来执行此操作

```
<?php

  $sms = array();
  $counter = 0;
  foreach($contact_number as $value) {    
     if($counter < 3) { $message .= " From Charlie Sheen"; }

     $sms[] = array($value, $message);       

     $counter++;
  }   

  var_dump($sms); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:28:25.033

从这个例子中很难看出你在做什么......请记住，其他联系号码不一定是唯一的，但手机号码*应该*是。如果您正在制作各种日志记录系统：

```
<?php

    $cell_numbers = array(
    '000-555-1212'=>'Charlie Sheen',
    '800-333-4475'=>'Mary Poppins'
    );

    $sms = array();

    //Number from the person texting
    $inbound = $_POST['number'];

    //Message from the person texting
    $message = $_POST['message'];

    if(!empty($cell_numbers[$inbound])){
        $sms[][$number]=$message;   
    }

    foreach($sms as $key=>$tempArr){

       foreach($sms[$key] as $tNum=>$tMes){
           echo "Message from ".$cell_numbers[$tNum]." - $tMes\n";
       }
    }

?> 
```

如果你正在制作一个战争文本电子邮件应用程序，那么你可以这样做：

```
<?php
    $contacts = array(
    0=>array(
    'number'=>'000-555-1212',
    'name'=>'Charlie Sheen',
    'carrier'=>'Sprint'),
    1=>array(
    'number'=>'800-333-4475',
    'name'=>'Mary Poppins',
    'carrier'=>'ATT'),
    );

    $carriers = array(
    'ATT'=>'txt.att.net',
    'Sprint'=>'messaging.sprintpcs.com',
    'T-Mobile'=>'tomomail.net',
    'Virgin'=>'vmobl.com',
    'Verizon'=>'vtext.com',
    );

    $message = 'Do I know you?';
    $sms = array();

    foreach ($contacts as $key=>$tempArr){

        $to = $contacts[$key]['number'].'@'.$carriers[$contacts[$key]['carrier']];
        if(mail("$to","SMS","$message",$headers = 'From: Tom Hanks <911@vtext.com>' . "\r\n")){
        $SMS[$to] = 'yes';  
        } else {
        $SMS[$to] = 'failed';
        }

    }

?> 
```

# javascript - 全日历时间格式

> ID：15978811
> 
> 赞同：6
> 
> 时间：2013-04-12T18:54:05.320
> 
> 标签：javascript, jquery, time, fullcalendar

下午好，我知道这个话题在以前的场合已经讨论过了，但是尽管线程不同，我仍然无法解决我的问题。我正在使用[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)提供的完整日历，它们有两种显示时间的方式，例如“10:30a”-“7p”。我希望以“12:00 pm”或“12:00 am”的格式显示在非全天活动日历上的时间。我遇到的问题是，当您下载完整日历时，您有几个文件：

fullcalendar.js、fullcalendar.css、fullcalendar.min.js、fullcalendar.print.css、gcal.js、jquery-1.9.1.min、jquery-ui-1.10.2.custom.min

我尝试了其他线程的建议，这是 fullcalendar.js 在时间格式和 setdefault 方法上的更改，但无济于事。我什至可以删除文件“fullcalendar.js”，我的测试仍然可以正常工作。我想知道为什么会这样，如果时间格式没有在那里管理，它在哪里管理？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-10-23T03:04:21.597

使用它，它会起作用：

```
$('#calendar').fullCalendar({
 timeFormat: 'hh:mm a'
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-26T12:54:49.327

如果你使用的是timelineDay视图，我发现这个设置会改变时间格式：

```
slotLabelFormat:"HH:mm" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-06-10T11:14:30.760

我之前也遇到过同样的问题，这个可以解决你的问题

如果您使用的是**版本 4**，请将此对象添加到您的 fullcalender 的对象中

```
eventTimeFormat: {
  hour: "numeric",
  minute: "2-digit",
  meridiem: "short",
}, 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-29T13:24:23.657

你可以使用这个：

```
axisFormat: 'h:mm a' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-11T13:40:31.200

首先，我认为您对这么多文件感到困惑，但基本上您只需要缩小 javascript 和 css 即可使其工作。

其次，我在正确显示时间时遇到了同样的问题。这就是我所做的，这是一种解决方法，但它对我有用，如果它很脏，对不起。

当您初始化日历时，您必须设置时间格式选项，以便它显示分钟，即使它是四舍五入的小时。

```
jQuery('#calendar').fullCalendar({ timeFormat: 'h:mm t' }); 
```

然后它只出现了“a”或“p”而不是“am”或“pm”，所以我使用了一点 CSS 魔法在末尾添加了“m”，我创建了规则：

```
.fc-time:after { content: "m"; } 
```

现在你可能会弄乱周视图所以你添加规则

```
.fc-axis.fc-time:after { content: " "; } 
```

现在希望你以你想要的方式拥有它。

问候

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-23T08:40:02.913

在*fullcalendar v3*中，他们使用***moment.js***来格式化时间，您可以使用 timeFormat: 'h:mm A' 来格式化，您可以在 this [moment js docs page中使用输入在报价之间进行更改](http://momentjs.com/docs/#/displaying/format/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-13T05:14:10.403

fullcalendar 允许您通过设置时间格式（[http://arshaw.com/fullcalendar/docs/text/timeFormat/](http://arshaw.com/fullcalendar/docs/text/timeFormat/)）来更改默认时间。可能比更改源代码更好。

我认为您的解决方案不起作用的原因是因为您包含了 fullcalendar.js 和 fullcalendar.min.js。这些文件包含相同的代码，第二个是第一个的缩小版本。缩小文件通常用于站点的部署版本，而另一个版本用于开发。因此，如果您想进行更改，请不要包含缩小版本

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-04T06:26:29.877

在你的 scheduler.fullcalendar.js 文件中查找**events:[]，**并在它下面添加这一行 **timeFormat: 'hh:mm A'，** 它将显示像这样的时间 10:20 PM 如果你想像这样显示时间10:20 PM 使用小**a**

# sql - SQL 列按值排序

> ID：15978816
> 
> 赞同：0
> 
> 时间：2013-04-12T18:54:12.983
> 
> 标签：sql, sql-server, tsql, multiple-columns

使用 T-SQL 我正在创建一个临时表网格。我需要根据从最大开始的列的总数对列进行重新排序。

例如

```
----    DO  MO  BC  NI  SC
Total   22  44  53  57  24
Prod A  0   24  0   24   0
Prod B  0   0   0   20   7
Prod C  0   20  0   13  13 
```

会成为：

```
----    NI  BC  MO  SC  DO
Total   57  53  44  24  22
Prod A  24   0  24   0   0
Prod B  20   0   0   7   0
Prod C  13   0  20  13   0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T20:35:52.453

首先，`----`如果是一个糟糕的列名，但我想不出更好的办法，所以我保留了它。

您可以在构建查询字符串时在对列进行排序的位置动态构建查询。

```
declare @SQL nvarchar(max)

set @SQL = '
select [----]'+
  (
  select ', '+T2.N.value('local-name(.)', 'nvarchar(128)')
  from (
       select DO, MO, BC, NI, SC
       from T
       where [----] = 'Total'
       for xml path(''), type
       ) as T1(X)
  cross apply T1.X.nodes('*') as T2(N)
  order by T2.N.value('.', 'int') desc
  for xml path('')
  )+'
from T'

exec (@SQL) 
```

[SQL小提琴](http://sqlfiddle.com/#!6/5fb9d/1)

**更新**

如果您认为构建动态查询的 XML 版本有点复杂和不直观，您可以使用它来代替，完全没有 XML 的东西。

```
declare @SQL nvarchar(max)
declare @Col nvarchar(128)

declare C cursor local fast_forward for
  select U.Col
  from (
       select DO, MO, BC, NI, SC
       from T
       where [----] = 'Total'
       ) as T
  unpivot(Val for Col in (DO, MO, BC, NI, SC)) as U
  order by U.Val desc

set @SQL = 'select [----]'

open C
fetch next from C into @Col
while @@FETCH_STATUS = 0
begin
  set @SQL = @SQL + ',' + @Col
  fetch next from C into @Col
end

close C
deallocate C

set @SQL = @SQL + ' from T'

exec (@SQL) 
```

[SQL小提琴](http://sqlfiddle.com/#!6/5fb9d/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:05:38.167

如果是临时表，您可以：

1.  创造它
2.  计算列顺序
3.  以正确的顺序创建另一个表
4.  插入该表（以正确的顺序）

但我还是要问为什么？

您知道您可以在 select 语句中对列进行排序吗？

不知道如何对列求和吗？

```
select sum(col1), sum(col2) 
from #temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:56:04.650

不幸的是，您无法重新排序 SQL 中的列。

# javascript - 如何从 HTML 表单中获取数据并在 HTML 画布脚本中使用它

> ID：15978827
> 
> 赞同：-1
> 
> 时间：2013-04-12T18:54:35.563
> 
> 标签：javascript, html, forms, canvas

我正在使用 HTML 画布做一个游戏，我在 HTML 页面上放置了一个表单中的几个输入框，用户将在其中输入关卡的密码，以便他可以继续下一个。但问题是，如果输入了正确的密码，我无法弄清楚如何获取输入框的值并让脚本进入关卡，如果密码不正确，则不执行任何操作，因为框中没有任何内容。（脚本在外部 JavaScript 文件中）我尝试了“正常”方式（`document.getElementById("...").value`变量中的东西然后根据需要对其进行操作）但显然它不起作用。

下面是 HTML 页面的表单部分，以防万一，但脚本中确实没有任何与它有关的内容。

```
<form id="passes">  
Level 2 password: <input type="text" id="level2pass" /><br />  
Level 3 password: <input type="text" id="level3pass" /><br />  
Level 4 password: <input type="text" id="level4pass" /><br />  
Level 5 password: <input type="text" id="level5pass" /><br />  
Bonus level password: <input type="text" id="bonuslevelpass" />  
</form> 
```

如果没有任何可行的方法，是否有另一种方法可以将密码集成到游戏中，以便我可以轻松（或不那么容易：D）获取输入的值并在画布中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:23:44.860

虽然很难猜出您的问题是什么，但您的问题可能`document.getElementById("...").value`是由于在呈现页面之前运行了您的 javascript 代码。

检查[这个 jsfiddle](http://jsfiddle.net/excentris/MzC85/1/)看看它是否是你想要的。请注意，我已使用该选项`No wrap - in <head>`将 javascript 代码放入其中并确保该函数存在于全局范围内。

# ios - UITableView 第一部分被 viewForHeaderInSection 隐藏

> ID：15978830
> 
> 赞同：1
> 
> 时间：2013-04-12T18:54:49.567
> 
> 标签：ios, objective-c, ios5, ios6

我有一个 UITableView，它是一个分组表视图。我正在尝试将图像添加为表格视图的标题（并且仅适用于第一部分）。我遇到的问题是图像覆盖了表格视图的第一部分。

这是代码：

```
- (UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{

    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, 80)];
    NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.eventsforacausesf.com/uploads/8/7/3/0/8730216/3416277_orig.jpg"]];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, headerView.frame.size.width, headerView.frame.size.height)];
    imageView.image = [UIImage imageWithData:imageData];
    [headerView addSubview:imageView];

    if (section == 0) {
        return headerView;
    }
    return nil;
} 
```

例如，在下图中，tableview 的第一部分隐藏在图像后面。我需要将该部分移动到图像下方。

![描述](https://i.stack.imgur.com/S3YHN.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:59:07.683

您使用该数据源方法设置的是表视图特定部分的标题，但在我看来，您想要设置`tableViewHeader`表视图本身的标题。将表视图的`tableViewHeader`属性设置为标题视图，而不是将标题视图作为节标题返回。然后您将获得标准的 iOS 标题与内容布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:57:48.177

您还需要实现`tableView:heightForHeaderInSection:`返回图像视图的高度。

# c++ - MFC 将双数据类型写入注册表

> ID：15978832
> 
> 赞同：1
> 
> 时间：2013-04-12T18:54:51.460
> 
> 标签：c++, mfc, registry, double

我正在开发一个需要将 double 类型的数据值存储到注册表的应用程序。我正在使用 MFC，但我在“theApp”中看到的用于完成这项工作的唯一功能（来自我所做的搜索）是`GetProfileIntW`,`GetProfileStringW`和`GetProfileBinary`. 在保持尽可能高的精度的同时存储和检索数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:06:41.047

GetProfileBinary 函数是唯一合理的选择。使用字符串意味着进行转换，并且在许多情况下使用 int 会失去精度。

```
double *pMyDouble;
UINT size = sizeof(*pMyDouble);
GetProfileBinary(sectionName, valueName, (LPBYTE *)&pMyDouble, &size);
double myDouble = *pMyDouble; 
```

# r - ggplot2：geom_line() 用于单个观察（x 因子，y 数字）

> ID：15978836
> 
> 赞同：10
> 
> 时间：2013-04-12T18:55:01.027
> 
> 标签：r, ggplot2

我有以下数据和简单的代码

```
library(ggplot2)
dane <- data.frame(mylevels=c(1,2,5,9), myvalues=c(2, 5, 3, 4))
ggplot(dane, aes(x=factor(mylevels), y=myvalues)) + geom_line() + geom_point(size=3) 
```

我无法弄清楚如何强制“ggplot2”画线 - 我收到一个错误。在第 55 页（R Graphics Cookbook）上，Winston Chang 描述了同样的错误，但我的情节更简单，这就是为什么不能采用他的解决方案的原因。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T19:20:43.840

您应该添加`group=1`内部`aes()`以将点与线连接起来。

```
ggplot(dane, aes(x=factor(mylevels), y=myvalues,group=1)) + 
       geom_line() + geom_point(size=3) 
```

# emacs - tuareg ocaml 上一个命令

> ID：15978838
> 
> 赞同：3
> 
> 时间：2013-04-12T18:55:02.807
> 
> 标签：emacs, ocaml, tuareg

我是ocaml的新手。由于我使用的是学校计算机，因此无法安装 rlwrap。所以我必须坚持使用emacs tuareg。

我的问题是：如何将向上箭头键绑定到 tuareg 中的上一个命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:13:30.603

只需使用 M+p 而不是箭头键 :) 但是您也可以将以下行添加到您的 .emacs 文件中：

```
(add-hook 'tuareg-interactive-mode-hook
 (lambda ()
   (local-set-key (kbd "<up>") 'comint-previous-input)
 )
) 
```

# html - 如何将来自 github 的“当前连续”贡献添加到我的博客？

> ID：15978845
> 
> 赞同：29
> 
> 时间：2013-04-12T18:55:27.540
> 
> 标签：html, ruby-on-rails, ruby, github, html-parsing

我有一个使用 Rails 构建的个人博客。我想在我的网站上添加一个部分，显示我当前的 github 贡献。这样做的最佳方法是什么？

编辑：为了澄清，这就是我想要的：

![在此处输入图像描述](https://i.stack.imgur.com/sP9W0.png)

我只需要天数。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-13T13:33:44.343

考虑到[GitHub API for Users](http://developer.github.com/v3/users/)尚未公开该特定信息（当前贡献流的天数），您可能必须：

*   刮掉它（通过阅读用户的 GitHub 页面提取它）
    正如[klamping](https://stackoverflow.com/users/150552/klamping)在[他的回答](https://stackoverflow.com/a/18008037/6309)中提到的（赞成），要刮掉的 url 将是：
    ~~`https://github.com/users/<username>/contributions_calendar_data`~~
    **`https://github.com/users/<username>/contributions`**
    （不过，仅适用于公共回购）

    [SherlockStd](https://stackoverflow.com/users/5567941/sherlockstd)有一个[更新的（2017 年 5 月）解析代码](https://stackoverflow.com/a/44007340/6309)如下：

    ```
    https://github-stats.com/api/user/streak/current/:username 
    ```

*   尝试正在使用的项目`https://github.com/users/<username>/contributions`~~`_calendar_data`~~（如[Marques Johansson](https://stackoverflow.com/users/156674/marques-johansson)的[回答](https://stackoverflow.com/a/24802507/6309)中所列，赞成）

    *   [**IonicaBizau/git-stats**](https://github.com/IonicaBizau/git-stats)：

![git-stats](https://i.stack.imgur.com/7ff9b.png)

*   [akerl/githubchart](https://github.com/akerl/githubchart)（Github 贡献的 SVG 生成器）
*   [akerl/githubstats](https://github.com/akerl/githubstats)（Github贡献统计）

![https://github.com/akerl/githubchart](https://i.stack.imgur.com/ElvLA.png)

*   自己构建该图：请参阅[**GitHub 项目 git-cal**](https://github.com/k4rthik/git-cal)

![https://raw.github.com/k4rthik/git-cal/master/screenshots/img1.png](https://i.stack.imgur.com/QAAvm.png)

> `git-cal`是一个在命令行上查看提交日历（类似于 GitHub 贡献日历）的简单脚本。
> 图中的每个块对应于一天，并用 5 种可能的颜色中的一种进行着色，每种颜色代表当天提交的相对数量。

*   或建立一项服务，该服务将每天向 Google 日历报告该特定日期的任何新提交（通过[**nf/streak 之**](https://github.com/nf/streak)类的项目使用 Google 日历 API ）。
    然后，您可以阅读该信息并在您的博客中报告。

![谷歌日历连续](https://i.stack.imgur.com/dsLuS.png)

* * *

您可以找到各种抓取该信息的示例：

*   [`github_team_calendar.py`](https://github.com/bigsnarfdude/github_team_calendars/blob/master/github_team_calendar.py)
*   [`weekend-commits.js`](https://gist.github.com/remy/4654404)

如：

```
$.getJSON('https://github.com/users/' + location.pathname.replace(/\//g, '') + '/contributions_calendar_data', weekendWork); 
```

*   [`leaderboard.rb`](https://gist.github.com/hecticjeff/4518181)：

喜欢：

```
leaderboard = members.map do |u|
  user_stats = get("https://github.com/users/#{u}/contributions_calendar_data")
  total = user_stats.map { |s| s[1] }.reduce(&:+)
  [u, total]
end 
```

*   ...（你明白了）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-08-02T02:58:59.433

纯 JSON 数据的 URL**是**： [https](https://github.com/users/[username]/contributions_calendar_data) ://github.com/users/ [username]/contributions_calendar_data [编辑：看起来这个 URL 不再有效）

有一个生成 SVG 的 URL，其他答案已经表明了这一点。就是在这里： [https ://github.com/users/[用户名]/contributions](https://github.com/users/[username]/contributions)

只需在 URL 中将 [username] 替换为您的 github 用户名，您应该能够看到图表。查看其他答案以获得更深入的解释

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-17T11:39:20.250

如果您想要与 GitHub 图表的视觉外观相匹配的东西，请查看这些项目，这些项目使用`https://github.com/users/<username>/contributions_calendar_data`但也应用了基于 Github 逻辑的其他因素。

*   [https://github.com/akerl/githubchart](https://github.com/akerl/githubchart)
*   [https://github.com/akerl/githubstats](https://github.com/akerl/githubstats)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-16T16:53:16.333

[项目已弃用且暂时不可用，将很快重新上线。]

由于 URL`https://github.com/users/<username>/contributions_calendar_data`不再起作用，您必须从`https://github.com/users/<username>/contributions`.

不幸的是，Github 喜欢安全性，并且在其服务器上禁用了 CORS。

为了解决这个问题，我为我和所有需要它的人设置了一个 API，只是`GET https://github-stats.com/api/user/streak/current/{username}`（允许使用 CORS），你会得到并回答如下：

```
{
  "success":true,
  "currentStreak": 3
} 
```

[https://github-stats.com](https://github-stats.com)将很快实现更多的统计端点:)

请在[https://github.com/SherloxFR/github-stats.com/issues](https://github.com/SherloxFR/github-stats.com/issues)请求新的端点，很高兴找到一种方法来实现它们！

# linux - 将字符串传递给脚本

> ID：15978852
> 
> 赞同：-2
> 
> 时间：2013-04-12T18:56:10.197
> 
> 标签：linux, bash

我有一个脚本，`download`它接受一个字符串并检查文件是否具有字符串的文件名。如果没有，它会下载它。所有文件名都在一个文件中。

此命令不起作用：

```
cat filenames | ./download 
```

下载源：

```
filename=$1
if [ ! -f $1 ];
then
        wget -q http://www.example.com/nature/life/${filename}.rdf
fi 
```

示例文件名文件：

```
file1
file2
file3
file4 
```

如何将 cat 的命令输出传递给下载脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:01:37.950

在您的脚本`$1`中是命令行上的位置参数。`./download somefile`会工作，但`cat filename | ./download`将数据流式传输到下载中，您忽略它。

您应该阅读[高级 bash 脚本编写指南](http://tldp.org/LDP/abs/html/)，它将为您提供有关 bash 脚本如何工作的良好基础。要解决此问题，请将您的命令更改为：

```
cat filename | xargs -n 1 ./download 
```

这将`./download`针对列表中的每个文件名运行。但是，文件名中可能包含空格或其他特殊字符，这会破坏您的脚本。您应该寻找替代方法来避免这些问题。

具体来说，使用[while 循环](http://mywiki.wooledge.org/Handling_contents_of_files?highlight=%28file%29#How_can_I_read_a_file_line-by-line.3F)来读取您的文件。如果将它们正确输入到文件中，这将正确地转义每一行的文件名。这样，您就可以避免 cat 使用以下文件名时遇到的问题：`fi/\nle`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:00:30.893

您可以将文件名传递给包含脚本文件名的文件：

```
./download filenames 
```

然后从文件名中循环文件名`$1`：

```
$!/bin/bash
# Do sanity check

fname=$1

for f in $(<$fname); do
   if [ ! -f "$f.rdf" ]; then
     wget -q http://www.example.com/nature/life/${f}.rdf
   fi
done 
```

# sql - 自定义 SQL 查询 ORDER BY term_order

> ID：15978853
> 
> 赞同：0
> 
> 时间：2013-04-12T18:56:22.837
> 
> 标签：sql, wordpress, sql-order-by

我有自定义分类法，其中列出了“系列”下的术语，其中包含的帖子也出现在“media_type”下的术语中，其中 media_type 是 term_id 16。

我想按术语表中的 term_order 列对列表进行排序，但它不起作用。

我究竟做错了什么？

```
$q_result = $wpdb->get_col("
    SELECT DISTINCT {$wpdb->terms}.name 
    FROM {$wpdb->terms}
        INNER JOIN {$wpdb->term_taxonomy} 
            ON {$wpdb->term_taxonomy}.term_id = {$wpdb->terms}.term_id
        INNER JOIN {$wpdb->term_relationships} 
            ON {$wpdb->term_taxonomy}.term_taxonomy_id = {$wpdb->term_relationships}.term_taxonomy_id
    WHERE {$wpdb->term_taxonomy}.taxonomy = 'series' 
        AND {$wpdb->term_relationships}.object_id IN (
            SELECT object_id 
            FROM {$wpdb->term_relationships}
                INNER JOIN {$wpdb->term_taxonomy} 
                    ON {$wpdb->term_taxonomy}.term_taxonomy_id = {$wpdb->term_relationships}.term_taxonomy_id
            WHERE {$wpdb->term_taxonomy}.taxonomy = 'media_type' 
                AND {$wpdb->term_taxonomy}.term_id = '16'
            ORDER BY {$wpdb->terms}.term_order 
        );"
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:01:08.250

看起来您的 order by 嵌套在 select IN (...) 子句中。尝试将结束括号向上移动一行并将 term_order 部分留在外部子句中：

```
 AND {$wpdb->term_taxonomy}.term_id = '16')
ORDER BY {$wpdb->terms}.term_order;" 
```

实际上，您正在对 IN 子句的结果进行排序，该子句不会更改项目实际返回给您的顺序。

注意：我原来的帖子错误地说“将右括号和分号向上移动一行”。你只需要移动括号。如果移动分号，则会提前终止 SQL。对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:41:45.910

[已经在那里](https://wordpress.stackexchange.com/questions/95615/custom-sql-query-order-by-term-order)回答了 在您的情况下，您指`ORDER BY {$wpdb->terms}.term_order`的是默认情况下，`wordpress` `wp_terms`表中没有此列，该`term_order`列位于`wp_term_relationships`表中

# c# - 计划任务用户未登录，用户登录后如何更改为交互模式

> ID：15978859
> 
> 赞同：1
> 
> 时间：2013-04-12T18:56:54.893
> 
> 标签：c#, scheduled-tasks, user32, shell32

我有一个运行应用程序的计划任务；比方说**notepad.exe**。如果任务“仅在用户登录时运行”，我可以看到记事本，但如果任务“无论用户是否登录都运行”记事本不会在交互模式下运行。即使我登录并在此模式下运行任务，我也看不到记事本窗口或进程，直到我在任务管理器中选择“全部显示”。问题是当记事本出现错误时，在登录时，我看不到该错误，因此无法判断错误是什么或记事本在出现错误时正在做什么。看起来任务无法在交互模式下运行，因为在它启动时没有登录用户。所以我的问题是：一旦用户登录，有没有办法将记事本更改为交互模式？

查看编程解决方案，有没有办法在运行时使用 shell32 或 user32 将应用程序更改为交互模式？

另外，我的问题显然不在于记事本......只是一个概念证明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:35:36.743

我对计划任务了解不多，但如果它们的行为类似于服务，那么您将很难进入这些窗口。在服务中，当您启用服务与桌面交互时，如果您想看到服务打开的窗口，那么您需要给他一个用户帐户，并且您只能看到这些窗口重新登录该帐户，并且仅在打开新窗口时；当打开一个新窗口时，您会在桌面上收到一条通知（如果我没记错的话在桌面顶部），您必须单击该通知才能看到打开的应用程序。

如果您可以修改计划任务的应用程序，那么我建议您将其设为非 gui 并向事件查看器或日志文件报告错误。如果您无法修改计划任务的应用程序，那么您可以尝试将其包装为服务，以便在打开新窗口时收到通知。

# javascript - 在数组中找到最大值（在整数集中）

> ID：15978863
> 
> 赞同：1
> 
> 时间：2013-04-12T18:57:04.337
> 
> 标签：javascript

我的朋友让我帮他做作业，我被困住了。这是任务：

用户必须在第一个提示框中输入数组中元素的数量。然后，他会得到每个数字输入的提示框。现在，输出必须是数组中的最大数。但这根本行不通。使用下面的代码，我总是得到第一位数字最大的元素。（数字是负数还是正数都没有关系，代码不能正常工作）

这是我的代码（它甚至在 jsfiddle 中不起作用，只是在我的文件中）

```
<button onclick="duzinaNiza()">Do it!</button> 
```

这是JavaScript

```
function duzinaNiza() {
    var brClanova = prompt("Enter the number of array elements:");

    if (brClanova > 0) {
        var niz = new Array();

        for (i=0; i<brClanova; i++) {
            var redniBr = i+1;
            niz[i] = prompt("Enter "+ redniBr +". array number:");
            \\ prompt for geting each array element
        }

        var maximum = niz[0];

        for (a=0; a<brClanova; a++) {

            if (maximum < niz[a]) {
                maximum = niz[a];
            }
        }

        document.write("Greatest value in array is: " + maximum);   
    }
} 
```

我朋友的教授不想使用函数对数组进行排序，这必须通过循环来完成。

PS是的，我知道...但是不要问有关document.write的东西，它必须以那种方式打印...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:58:58.133

那是因为输入是一个字符串，你必须将它解析为一个整数。像：

```
niz[i] = parseInt(prompt("Enter "+ redniBr +". array number:"), 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:08:12.580

试试这个：

```
function duzinaNiza() {
    var brClanova = prompt("Enter the number of array elements:");

    if (brClanova > 0) {
        var niz = new Array();

        for (i=0; i<brClanova; i++) {
            var redniBr = i+1;
            niz[i] = parseInt(prompt("Enter "+ redniBr +". array number:"));
            // prompt for geting each array element
        }

        var maximum = niz[0];

        for (a=0; a<brClanova; a++) {

            if (maximum < niz[a]) {
                maximum = niz[a];
            }
        }

        document.write("Greatest value in array is: " + maximum);   
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:13:23.930

试试[这个](http://jsfiddle.net/hcx4J/3/)，[提示：我刚刚使用了`'+' operator`将值转换为`number`（来自`prompt`. 的值）。如果输入的值无法转换为数字，`'+' operator`则将返回。`NaN`所以在那种情况下，你应该使用`isNan`函数来摆脱它。]

```
 duzinaNiza = function () {
    var brClanova = prompt("Enter the number of array elements:");

    if (brClanova > 0) {
        var niz = new Array();
        var maximum;

        for (i=0; i<brClanova; i++) {
            var temp = +prompt("Enter "+ i+1 +". number:");
            if(i===0) { maximum = temp }
            else { maximum = (temp > maximum)?temp:maximum; }

        }

        alert("Greatest value in array is: " + maximum);   
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T19:17:42.940

问题是当您想比较两个数字时，您正在比较两个字符串。换句话说，以下表达式在 javascript 中是合法的，并且计算结果为 true：

```
if('4' > '393939393'){
    //true! string '4' is greater than string '3' (first char of '393939393')
} 
```

您应该做的是转换从函数提示符收到的值，因此它被视为一个数字。您可以使用以下函数执行此操作：

```
parseInt(prompt("Enter "+ redniBr +". array number:"), 10); 
```

第一个参数是要转换为数字的值，而第二个参数是数字的基数（或“基数”）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T19:18:29.660

所以，这里的主要问题是你不是威胁你的数字作为“数字”，而是作为字符串。该方法`prompt`返回一个字符串，因此您需要将它们转换：

```
 function duzinaNiza() {
    var brClanova = +prompt("Enter the number of array elements:");

    if (!brClanova)
      return;

    var niz = [];

    for (var i=0; i < brClanova; i++) {
        var redniBr = i + 1;
        niz[i] = +prompt("Enter "+ redniBr + ". array number:");
    }

    var max = niz[0]; 

    for (var a = 1; a < brClanova; a++) {

      if (max < niz[a])
         max = niz[a];

    }

    document.write("Greatest value in array is: " + max);
} 
```

为此，我使用了[一元加运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators)。

只是要知道，在 JS 中，您实际上可以避免使用最后一个循环`Math.max`来获取数字数组的最大值。所以而不是：

```
 var max = niz[0]; 

    for (var a = 1; a < brClanova; a++) {

      if (max < niz[a])
         max = niz[a];

    }

    document.write("Greatest value in array is: " + max); 
```

你将会有：

```
 var max = Math.max.apply(null, niz);

    document.write("Greatest value in array is: " + max); 
```

在这种情况下，您甚至不需要一元加号运算符，因为`Math.max`它会照顾到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T20:21:43.783

您不需要 parseInt- 如果您减去可以转换为数字的字符串，它们就会被转换。所以你可以从下一个数字中减去最大值，看看它是否留下了余数。

另外，parseInt 会破坏小数，所以你不会知道 1.5 大于 1。

您的评论使用了错误的字符 - `('\' 应该是 '//')

```
function duzinaNiza(){
    var brClanova= prompt("Enter the number of array elements:");
    if(brClanova>0){
        var niz= new Array();
        for(var i= 0;i<brClanova;i++){
            var redniBr= i+1;
            niz[i]= prompt("Enter "+ redniBr +". array number:");
            //prompt for geting each array element
        }
        var maximum= niz[0];
        for(var a= 0;a<brClanova;a++){
            if(niz[a]-maximum>0){
                maximum= niz[a];
            }
        }
        document.write("Greatest value in array is: " + maximum);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T19:01:33.613

修改代码[JSFIDDLE](http://jsfiddle.net/xfubn/)

```
function duzinaNiza() {
    var brClanova = prompt("Enter the number of array elements:")*1; //convert string to intger

    if (brClanova > 0) {
        var niz = new Array();

        for (i=0; i<brClanova; i++) {
            var redniBr = i+1;
            niz[i] = prompt("Enter "+ redniBr +". array number:")*1;
            // prompt for geting each array element
        }

        var maximum = niz[0];

        for (a=0; a<brClanova; a++) {

            if (maximum < niz[a]) {
                maximum = niz[a];
            }
        }

        document.write("Greatest value in array is: " + maximum);   
    }
} 
```

# python - 在 python 中使用时间睡眠方法时出错

> ID：15978870
> 
> 赞同：5
> 
> 时间：2013-04-12T18:57:32.830
> 
> 标签：python, time, import, weblogic, sleep

有一个 weblogic python 脚本进行线程转储并休眠 10 或 20 秒，然后在 time.sleep(30) 之后再进行一次，线程转储工作正常，但睡眠方法 time.sleep(20) 不起作用。

`import time`两者都试过了`from time import sleep`。

在下面收到此错误

```
AttributeError: java package 'weblogic.time' has no attribute 'sleep' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-28T11:27:42.893

这个对我有用： [https ://community.oracle.com/thread/3560679](https://community.oracle.com/thread/3560679)

```
import time as systime
systime.sleep(10) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T19:01:45.483

这里的问题是`weblogic.time`包遮蔽了 stdlib`time`模块。所以，当你尝试 时`import time`，你得到的是前者，而不是后者。

（`weblogic.time`除了 subpackage 或 module 之外什么都没有`weblogic.time.common`，所以你在尝试使用它的`sleep`函数时会出错。但这可能是一件好事——比它有一个名为的函数`sleep`没有达到你的预期要好。）

如果您正在开发`weblogic`自己，我可以解释如何不这样做……但如果您只是使用`weblogic`，那将无济于事。

如果您正在做`from weblogic import *`之前的事情，解决方案很简单：不要那样做。否则……解决起来会更复杂。

但是，如果您需要做的只是将解释器线程阻塞 20 秒，那么您可以使用 Java 来做到这一点`Thread.sleep(20000)`。请参阅[本教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)，但实际上，您无需了解更多信息，即 Java 方法需要整数毫秒而不是浮点秒。然后你不需要`time`.

# r - 使用 github_install 安装 l2boost 包

> ID：15978875
> 
> 赞同：0
> 
> 时间：2013-04-12T18:57:52.443
> 
> 标签：r, installation-package

我正在尝试从 github 安装 Ehrlinger 的 l2boost。我试过使用：

```
> library(devtools)
> install_github('l2boost',username='ehrlinger') 
```

这给出了以下输出：

```
Installing github repo(s) l2boost/master from ehrlinger
Installing l2boost.zip from https://github.com/ehrlinger/l2boost/archive/master.zip
Installing l2boost
"C:/PROGRA~1/R/R-215~1.3/bin/x64/R" --vanilla CMD build  \
  "C:\Users\user\AppData\Local\Temp\RtmpcBoWGu\l2boost-master" --no-manual --no-resave-data 

* checking for file 'C:\Users\user\AppData\Local\Temp\RtmpcBoWGu\l2boost-master/DESCRIPTION' ... OK
* preparing 'l2boost':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* looking to see if a 'data/datalist' file should be added
* building 'l2boost_0.19.tar.gz'

"C:/PROGRA~1/R/R-215~1.3/bin/x64/R" --vanilla CMD INSTALL  \
  "C:\Users\USER\AppData\Local\Temp\RtmpcBoWGu/l2boost_0.19.tar.gz" --library="C:/Program  \
  Files/R/R-2.15.3/library" --with-keep.source 

* installing *source* package 'l2boost' ...
** R
** data
** inst
** preparing package for lazy loading
** help
No man pages found in package  'l2boost' 
*** installing help indices
** building package indices
** testing if installed package can be loaded

* DONE (l2boost) 
```

我注意到的唯一错误是它没有找到任何帮助/手册页。但是，它似乎并没有实际安装任何功能：

```
> library(l2boost)
> predict.l2boost
Error: object 'predict.l2boost' not found 
```

在`C:\Program Files\R\R-2.15.3\library\l2boost\R`中，只有三个文件：`l2boost`、`l2boost.rdb`和`l2boost.rdx`。该`l2boost\data`文件夹至少成功安装`diabetes.rda`。

为什么没有安装帮助和功能？是否可以使用 install_github 安装此软件包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:00:10.600

我不知道手册页为什么不起作用但是如果您键入

```
l2boost:::predict.l2boost 
```

你会看到这个功能。这是 github 上可用的函数定义中的一个示例（应该可以工作）。

```
data(diabetes)
object <- l2boost(diabetes$x,diabetes$y, M=1000, nu=.01)
prd <- predict(object) 
```

# java - Clojure Java Interop - 对字段的引用......无法解决

> ID：15978876
> 
> 赞同：0
> 
> 时间：2013-04-12T18:57:55.767
> 
> 标签：java, clojure, interop, leiningen, clojure-java-interop

我正在开发一个 clojure 项目，我想在 Java 中创建一个类，然后实例化该类并从我的 clojure 代码中调用一个方法。

我的 Java 代码位于 resources/MyClass.java

```
public class MyClass {

    public static long myMethod() {
        long i = 1; 
        return i;
    }

} 
```

在我的clojure代码中，我有

```
(import MyClass)
...
(def my-object (MyClass.))
(.myMethod my-object) 
```

我编译了我的类并运行了 lein compile，但是当我运行我的代码时，我得到了

```
 Exception in thread "main" java.lang.IllegalArgumentException: No matching field found: myMethod for class MyClass
    at clojure.lang.Reflector.getInstanceField(Reflector.java:271)
    at clojure.lang.Reflector.invokeNoArgInstanceMember(Reflector.java:300) 
```

我究竟做错了什么？看起来导入语句作为实例化有效，但我无法调用该方法。帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:38:44.033

对于静态方法，使用 a`/`而不是 a`.`

```
(MyClass/myMethod) 
```

# sql-server - 从另一个存储过程调用的 SQL Server 存储过程返回命令成功完成但没有结果集

> ID：15978878
> 
> 赞同：0
> 
> 时间：2013-04-12T18:58:02.487
> 
> 标签：sql-server

我有两个存储过程；我正在从另一个调用一个存储过程。

我从第一个存储过程返回一个表。当我单独执行第一个时，我得到了正确的表格。

但是当我从另一个存储过程调用第一个存储过程时，它总是返回命令成功完成并且没有结果。

我在存储过程 2 中这样称呼它：

```
set @query = 'exec servername.dbo.storedproc1 @ClassName = ''' + 
             @ClassName +''', @StatusName = ''' + @StatusName 
exec(@query) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:08:17.687

在外部过程中，创建一个与从内部过程返回的结果集具有相似架构的临时表。调用内部过程时，使用 insert..exec，如下所示：

```
insert #tempTable exec InnerProcedure 
```

然后从临时表中选择数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:16:32.073

首先创建一个临时表，用于捕获从执行第一个过程中获得的数据。然后使用 Select 语句从临时表中检索所需的数据。不要忘记在 Select 语句之后使用 drop 临时表 table 否则下次执行过程时会抛出 table already exists 错误。另一方面，您可以使用表变量来避免删除表，因为表变量的范围仅限于包含存储过程的生命周期。`

```
Insert into @temptable
Exec sprcdre1

Select * from  @temptable 
```

# wordpress - 获取自定义帖子类型的第一张图片

> ID：15978879
> 
> 赞同：1
> 
> 时间：2013-04-12T18:58:02.300
> 
> 标签：wordpress

我有这个自定义帖子类型画廊。我想从帖子中调用第一张图片。

```
<?php 
$item_count = 1;
$args = array( 'post_type' => 'gallery', 'posts_per_page' => 10 );  
$loop = new WP_Query( $args ); 
$item_count = 1;
while ( $loop->have_posts() ) : $loop->the_post();  ?>
    <?php the_title();  ?>
    <div class="count"><?php echo $item_count; ?></div>
    <div class="thumbnail">
    // THE FIRST GALLERY ATTACHMENT IMAGE
    </div> 

<?php $item_count++; ?>
<?php endwhile; ?> 
```

有任何想法吗？

注意：我在帖子上添加了画廊没有简单的图像！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:20:25.557

检查[这个](http://codex.wordpress.org/Function_Reference/get_children#Show_the_first_image_associated_with_the_post)WordPress Codex 示例。

该代码将显示与帖子关联的第一张图片。

或者查看[这个](http://wordpress.org/support/topic/retreive-first-image-from-post?replies=25)也处理这个问题的 WordPress 论坛讨论。

**更新：**

转到**外观 > 编辑器**并选择主题函数 (functions.php)。在文件末尾添加：

```
// Get URL of first image in a post
function catch_that_image($my_postid) {
global $post;

$first_img = '';
  ob_start();
  ob_end_clean();
            $output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i',  get_post_field('post_content', $my_postid), $matches);

$first_img = $matches [1] [0];

// no image found display default image instead
if(empty($first_img)){

$first_img = "/images/default.jpg";
}
return $first_img;
} ?> 
```

现在在您的代码中修改这部分代码：

```
<div class="thumbnail">
   <?php echo catch_that_image($loop->ID) ?>
</div> 
```

**更新 V2**

我修改了代码以适合您的代码。

**更新 V3**

我在我的开发站点上尝试了代码，并进一步修改了它，直到代码正常工作。你现在应该没有任何问题。

# xaml - xaml 根据另一种颜色定义颜色

> ID：15978891
> 
> 赞同：2
> 
> 时间：2013-04-12T18:58:56.367
> 
> 标签：xaml, colors, windows-runtime, winrt-xaml

我正在学习 WinRT，我为我的程序定义了一个自定义主题，包括覆盖一些默认颜色

目前我在我的 App.xaml 中做这样的事情

```
<Application>
    <Application.Resource>
        <ResourceDictionary>
            ...
            <Color x:Key="PrimaryColor">#FF0055A3</Color>
            <Color x:Key="PrimaryColorHighlighShade">#FF1263B0</Color>
            <Color x:Key="PrimaryColorClickShade">#FF2674BD</Color>
            ...
            <SolidColorBrush x:Key="SliderTrackDecreaseBackgroundThemeBrush" Color="{StaticResoruce PrimaryColor}" />
            <SolidColorBrush x:Key="SliderTrackDecreasePointerOverBackgroundThemeBrush" Color="{StaticResoruce PrimaryColorHighlighShade}" />
            <SolidColorBrush x:Key="SliderTrackDecreasePressedBackgroundThemeBrush" Color="{StaticResoruce PrimaryColorClickShade}" />
            ...
        </ResourceDictionary>
    </Application.Resource> 
```

为了获得高光阴影和 ClickShade，我打开了 Photoshop，转到 HSB 滑块，然后将 S 向下和 B 向上移动，但我想知道我是否可以在 XAML 中执行此操作，所以我必须做的就是改变PrimaryColor 和其他颜色，在此进行相应调整。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T19:11:42.050

您可以绑定到静态资源（请参阅[是否可以在 WPF 中为静态资源提供类型转换器？](https://stackoverflow.com/questions/2382178/is-it-possible-to-supply-a-type-converter-for-a-static-resource-in-wpf)）并使用值转换器根据您提供的颜色构造新颜色。

**编辑：**

这里有一些代码来解释：

值转换器代码（为简单起见我总是加红色，您可以根据需要进行更复杂的计算）：

```
class ColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is Color)
        {
            var theColor = Color.Add((Color)value, Color.FromArgb(255,255,0,0));
            return theColor;
        }
        else
        {
            return null;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

我的 App.Xaml 看起来像这样：

```
<Application x:Class="SO_15979100.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:local="clr-namespace:SO_15979100"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <Color x:Key="PrimaryColor">#FF0055A3</Color>
        <local:ColorConverter x:Key="MyConverter" />
        <SolidColorBrush x:Key="PrimaryColorBrush" Color="{StaticResource PrimaryColor}" />
        <SolidColorBrush x:Key="ConvertedPrimaryColorBrush" Color="{Binding Source={StaticResource PrimaryColor}, Converter={StaticResource MyConverter}}" />
    </Application.Resources>
</Application> 
```

请注意，我已经包含了一个本地命名空间来让转换器在手边。

我的主窗口是这样定义的：

```
<Window x:Class="SO_15979100.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <Rectangle Grid.Column="0" Fill="{StaticResource PrimaryColorBrush}" />
        <Rectangle Grid.Column="1" Fill="{StaticResource ConvertedPrimaryColorBrush}" />
    </Grid>
</Window> 
```

左边的矩形是你的颜色，右边的矩形是粉红色的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:29:42.540

You don't need to use Photoshop to change the colorspaces. Both Visual Studio 2012 and Expression Blend have RGB, HSB, HLS and CYMK colorspace tools.

*   In your Resource dictionary, select the SolidColorBrush.
*   IN the property Grid, click the color item.

![enter image description here](https://i.stack.imgur.com/rNygc.png)

*   In the dropdown, select the "Edit Resource".

![enter image description here](https://i.stack.imgur.com/gTHj8.png)

*   Here's the trick. Click the R, G or B letters (the ones with the underlines) in the Resource dialog. That causes a menu to appear in the Visual studio editor. Pick your new colorspace.

![enter image description here](https://i.stack.imgur.com/gIohJ.png)

*   Choose another colorspace (HSB in your example). Then use the dialog to change the Saturation or Brightness values.

![enter image description here](https://i.stack.imgur.com/OHYsI.png)

*   Finally, click the OK button, the color value is modified in the Resource Dictionary.

# jquery - 如何成功地将 jquery 验证规则应用于 jQuery 自动完成“输入”字段？

> ID：15978894
> 
> 赞同：1
> 
> 时间：2013-04-12T18:59:04.867
> 
> 标签：jquery, validation, autocomplete, jquery-validate

如何成功地将 jquery 验证规则应用于 jQuery 自动完成“输入”字段？

为了进一步解释，在下面的例子中：

1.  jquery 验证对“***状态***”输入字段按预期工作 - 即，它在表单提交时生成验证消息。

2.  jquery 验证不适用于“ ***acstate*** ”输入字段 - 即，它不会在表单提交时产生验证消息。

感谢您提供的任何帮助/指导！

* * *

# FWIW - 这是我正在使用的示例：

```
 <link rel="stylesheet" type="text/css" media="screen" href="css/redmond/jquery-ui-1.10.2.custom.css" />
    <script src="js/jquery-1.9.1.js" type="text/javascript"></script>     
    <script src="js/jquery-ui-1.10.2.custom.js" type="text/javascript"></script>
    <script src="js/jquery.validate.js" type="text/javascript"></script>         

    <script type="text/javascript">
        /* <![CDATA[ */

        $(document).ready(function() {

            $("#form1").validate({
                rules: {
                    state: {
                        required: true,
                        minlength: 2
                    },
                    acstate: {
                        required: true,
                        minlength: 2                            
                    }
                },
                messages: {
                    state: {
                        required: "state required",
                        minlength: "min length {0}"
                    },
                    acstate: {
                        required: "acstate required",
                        minlength: "min length {0}"                            
                    }
                }
            });

            $("#acstate").autocomplete(
            {
                source: "AZ,CA,DC,MD,NM,NV,VA".split(",")                     
            });

            $("#submit").click(function() {
                if ($("#form1").valid())
                {
                    alert("VALID");
                }
                else
                {
                    alert("INVALID");
                }
            });
        }); 
```

# 如果您需要查看整个 HTML...

```
 <?xml version='1.0' encoding='UTF-8' ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">

        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <title>acvalid</title>

            <link rel="stylesheet" type="text/css" media="screen" href="css/redmond/jquery-ui-1.10.2.custom.css" />
            <script src="js/jquery-1.9.1.js" type="text/javascript"></script>     
            <script src="js/jquery-ui-1.10.2.custom.js" type="text/javascript"></script>
            <script src="js/jquery.validate.js" type="text/javascript"></script>         

            <script type="text/javascript">
                /* <![CDATA[ */

                $(document).ready(function() {

                    $("#form1").validate({
                        rules: {
                            state: {
                                required: true,
                                minlength: 2
                            },
                            acstate: {
                                required: true,
                                minlength: 2                            
                            }
                        },
                        messages: {
                            state: {
                                required: "state required",
                                minlength: "min length {0}"
                            },
                            acstate: {
                                required: "acstate required",
                                minlength: "min length {0}"                            
                            }
                        }
                    });

                    //statelistdata = "AZ,CA,DC,MD,NM,NV,VA";

                    $("#acstate").autocomplete(
                    {
                        source: "AZ,CA,DC,MD,NM,NV,VA".split(",")                     
                    });

                    $("#submit").click(function() {
                        if ($("#form1").valid())
                        {
                            alert("VALID");
                        }
                        else
                        {
                            alert("INVALID");
                        }
                    });
                });

                /* ]]> */
            </script>

        </head>
        <body>
            <form id="form1">
                <table>
                    <tr>
                        <td><label for="state" >regular state input:</label></td>
                        <td><input id="state" class="required" minlength="2" maxlength="2"/></td>
                    </tr>
                    <tr>
                        <td><label for="acstate" >'autocomplete' state input:</label></td>
                        <td><input id="acstate" class="required" minlength="2" maxlength="2"/></td>
                    </tr>
                </table>
                <input type="submit" id="submit" value="Submit" />                            
            </form>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:55:23.303

您的主要问题是您的`input`元素缺少`name`属性。`rules`函数中声明的输入名称`.validate()`仅引用`name`属性。

```
<input name="state" id="state" class="required" minlength="2" maxlength="2"/>
<input name="acstate" id="acstate" class="required" minlength="2" maxlength="2"/> 
```

# vba - 从 VBA 向 cmd 行发送密钥会丢失特殊密钥

> ID：15978896
> 
> 赞同：3
> 
> 时间：2013-04-12T18:59:09.097
> 
> 标签：vba, cmd

我正在编写一个 VBA 宏，它将向命令行发送一个字符串，如下所示：

```
str = "SELECT (edr.VersionName + ' ' + edr.BuildName)"
RSP = Shell(Environ$("COMSPEC"), vbNormalFocus)
SendKeys str 
```

但是问题来了，像 ( 和 + 这样的特殊键在翻译中丢失了；命令行最终如下所示：

```
SELECT edr.VersionName  ' '  edr.BuildName 
```

如何防止这些特殊字符在此过程中丢失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:43:16.127

实际上，我发现了另一种显示这些特殊字符的方法，通过用 {} 将其括起来，它将显示在我的命令行中。谢谢您的帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T19:30:07.657

您可以使用以下字符串显示“+”符号：

```
str = "SELECT (edr.VersionName += ' ' += edr.BuildName)" 
```

在`SendKeys`VBA 中的函数中，“+”符号用于表示 {SHIFT} 键。所以，{SHIFT}=，实际上是 '+' 符号；至少在我的键盘上。

使用这种逻辑，'+9' 和 '+0' 应该给你 '(' 和 ')' 但我还没有让它们工作。

**编辑**

好的，您可以显示括号，但您必须将它们包含两次：

```
str = "SELECT +9" & "(edr.VersionName += ' ' += edr.BuildName)" & "+0" 
```

同样，请记住，上面的字符串适用于我的键盘（标准英语）。如果您使用不同的键盘布局，“+”号后面的字符很可能会有所不同。

# jquery - Jquery多个自动完成字段

> ID：15978897
> 
> 赞同：1
> 
> 时间：2013-04-12T18:59:10.100
> 
> 标签：jquery, html, autocomplete, jquery-autocomplete

我有来自 jquery 网站的 jquery 自动完成功能。它在一个领域工作得很好。但是现在我想在其中添加具有不同值的不同字段，我该怎么做？我尝试了几种方法，但搞砸了整个系统。我的所有领域都在工作，但现在却没有。我需要给它一个新的函数名吗？我对这件事很陌生。

我认为通过在顶部添加一个新字段和新变量它会起作用，但它没有

```
var projects = [
  {
    value: "CMPT101",
    label: "CMPT 101",
    desc: "Discrete Mathematics I"

  },

  var instr={
      value:"johnson "
      lable:"Johnson"
  }
]

select: function( event, ui ) {
        $( "#project" ).val( ui.item.label );
        $( "#instr" ).val( ui.item.label );
        $( "#project-id" ).val( ui.item.value );
        $( "#project-description" ).html( ui.item.desc );
        $( "#project-icon" ).attr( "src", "images/" + ui.item.icon ); 
```

[http://jsfiddle.net/6wTHK/4/](http://jsfiddle.net/6wTHK/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:35:57.057

所以我做了一个例子来向你解释你需要做些什么来做更多的输入。

FIDDLE： http: [//jsfiddle.net/6wTHK/6/](http://jsfiddle.net/6wTHK/6/) ***不像****下面的代码*

假设我们有两个`inputs`：

```
<input  name="project1" id="searchbox1" placeholder="Cmpt 1"/>
<input  name="project2" id="searchbox2" placeholder="Cmpt 2"/> 
```

**`#searchbox1`它的值是否保存在`var projects1`**

```
var projects1 = [
      {
        value: "CMPT101",
        label: "CMPT 101",
        desc: "Discrete Mathematics I"
},
{
        value: "CMPT102",
        label: "CMPT 102",
        desc: "Discrete Mathematics II"
},
{
        value: "CMPT103",
        label: "CMPT 103",
        desc: "Discrete Mathematics III"
}]; 
```

**`#searchbox2`它的值是否保存在`var projects2`**

```
var projects2 = [
          {
            value: "CMPT104",
            label: "CMPT 105",
            desc: "Discrete Mathematics IV"
    },
    {
            value: "CMPT106",
            label: "CMPT 106",
            desc: "Discrete Mathematics V"
    },
    {
            value: "CMPT107",
            label: "CMPT 107",
            desc: "Discrete Mathematics VI"
    }]; 
```

**现在为每个`input`我们添加`.autocomplete()`功能；**

```
 $( "#searchbox1" ).autocomplete({ //change #searchbox2 to your input id
      minLength: 0,
      source: projects1, //change here the source of your values
      focus: function( event, ui ) {
        $( "#searchbox1" ).val( ui.item.label );
        //you had more stuff here
        return false;
      },
      select: function( event, ui ) {
        $( "#searchbox1" ).val( ui.item.label );
        //you had more stuff here
        return false;
      }, 
      })
    .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li>" )
        .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
        .appendTo( ul );
    }; 
```

**而对于第二个`input`**

```
$( "#searchbox2" ).autocomplete({ //change #searchbox2 to your input id
          minLength: 0,
          source: project2, //change here the source of your values
          focus: function( event, ui ) {
            $( "#searchbox2" ).val( ui.item.label );
            //you had more stuff here
            return false;
          },
          select: function( event, ui ) {
            $( "#searchbox2" ).val( ui.item.label );
            //you had more stuff here
            return false;
          }, 
          })
        .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
          return $( "<li>" )
            .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
            .appendTo( ul );
        }; 
```

# regex - 记忆部分的 Sed 用法

> ID：15978899
> 
> 赞同：0
> 
> 时间：2013-04-12T18:59:12.737
> 
> 标签：regex, linux, bash, unix

假设我有一个格式的图像`img_12-31-06_99.jpg`

现在我正在尝试将 移到`'.jpg'`表达式的前面以获得

```
`.jpgimg_12-31-06_99` 
```

所以我尝试将表达式的第一部分与`img_[0-9]*-[0-9]*-[0-9]*_[0-9]*`

然后`.jpg`匹配余数。我曾经`\2`将第二部分移到前面，并将`\1`捕获的第一个表达式移到最后。

```
echo img_12-31-06_99.jpg | sed 's/\(img_[0-9]*-[0-9]*-[0-9]*_[0-9]*\) \(.jpg\)/\2 \1/' 
```

现在这将返回我原来的表达式：

```
img_12-31-06_99.jpg 
```

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:01:58.157

您很接近，您在正则表达式和替换中都有问题空间，以下应该可以工作：

```
sed 's/\(img_[0-9]*-[0-9]*-[0-9]*_[0-9]*\)\(.jpg\)/\2\1/' 
```

例如：

```
$ echo img_12-31-06_99.jpg | sed 's/\(img_[0-9]*-[0-9]*-[0-9]*_[0-9]*\)\(.jpg\)/\2\1/'
.jpgimg_12-31-06_99 
```

# java - 使用ant编译java代码

> ID：15978903
> 
> 赞同：3
> 
> 时间：2013-04-12T18:59:23.130
> 
> 标签：java, ant

我对使用 ant 有点陌生，目前，我制作 ant 脚本的方式是通过 eclipse 自动生成它们以生成可运行的 jar。这样做的问题是它只读取 bin 目录。结果，如果我要更改 java src 文件，我将看不到在 ant 构建中复制的更改。我需要在我的 ant 脚本中添加什么？我在下面展示了一个示例脚本：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <project default="create_run_jar" name="Create Runnable Jar for Project poodah">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required                                        -->
    <target name="create_run_jar">
        <jar destfile="../lib/TestMaster.jar" filesetmanifest="mergewithoutmain">
            <manifest>
                <attribute name="Main-Class" value="test.startup.TestMaster"/>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="../test/bin"/>
        </jar>
    </target>
    </project> 
```

我尝试阅读一些文档，但这有点令人困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T19:16:02.453

您需要使用*javac* ant 的任务编译源代码

假设您的项目结构是：

```
java
  your
    package
      structure
         SomeClass.java
lib
  log4j.jar
  guava-14.jar
test
  bin 
```

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Runnable Jar for Project poodah">
  <!--this file was created by Eclipse Runnable JAR Export Wizard-->
  <!--ANT 1.7 is required                                        -->
  <target name="create_run_jar" depends="compile">
      <jar destfile="../lib/TestMaster.jar" filesetmanifest="mergewithoutmain">
          <manifest>
              <attribute name="Main-Class" value="test.startup.TestMaster"/>
              <attribute name="Class-Path" value="."/>
          </manifest>
          <fileset dir="../test/bin"/>
      </jar>
  </target>

  <target name="compile">
    <javac srcdir="java" destdir="../test/bin" includes="**/*.java" target="1.6">

        <classpath refid="classpath.base" />
    </javac>

  </target>
  <!-- Libraries on which your code depends -->
  <path id="classpath.base">                                                                                                                           
     <fileset dir="lib">                                                                                                                          
         <include name="**/*.jar" />                                                                                                          
     </fileset>                                                                                                                                   
  </path>  
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:03:34.307

将您的编译目标添加为依赖项

```
<target name="create_run_jar" depends="compile">
    <jar destfile="../lib/TestMaster.jar" filesetmanifest="mergewithoutmain">
        <manifest>
            <attribute name="Main-Class" value="test.startup.TestMaster"/>
            <attribute name="Class-Path" value="."/>
        </manifest>
        <fileset dir="../test/bin"/>
    </jar>
</target>
</project> 
```

编译目标

```
<target name="compile" depends=""   description="compile the java source files">  
 <javac srcdir="." destdir="../test/bin">  
    <classpath>  
        <fileset dir="${lib}">  
            <include name="**/*.jar" />  
        </fileset>  
       </classpath>  
</javac> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:03:38.227

您需要在[`<javac>`](http://ant.apache.org/manual/Tasks/javac.html)Ant 脚本中添加一个任务。

# java - 加载数据，数据到数组，数组到JList

> ID：15978905
> 
> 赞同：0
> 
> 时间：2013-04-12T18:59:27.940
> 
> 标签：java, swing, jlist

```
public static void load() {
    try {
        URL load = new URL("http://www.site.net/loader.php?username=" + "username" + "&password=" + "password");
        BufferedReader in = new BufferedReader(
                new InputStreamReader(load.openStream()));

                String inputLine;
                while ((inputLine = in.readLine()) != null){
                    if(inputLine.length() > 0){
                        put = inputLine;
                        put.split(":");
                        System.out.print(put);

                    }
                }
    } catch (IOException e){
        e.printStackTrace();
    }
} 
```

如您所见，我正在尝试拆分以下数据：

![图片](https://i.stack.imgur.com/6zFLh.png)

如何删除引号并将其存储在数组中，以便可以将其加载到 JList 中？

放 = 字符串放；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:08:16.587

String`split`方法返回一个字符串数组。它不会改变原始字符串，所以这一行什么都不做：

```
put.split(":"); 
```

相反，考虑这样的事情。首先在冒号处拆分：

```
String[] parts = put.split(":"); 
```

然后对于每个部分，删除引号：

```
for( int i = 0; i < parts.length; i++) {
    parts[i] = parts[i].replaceAll("\"", "");
} 
```

然后使用清理后的字符串数组来支持 JList：

```
JList myList = new JList(parts); 
```

# extjs - ExtJS - 将列标题拖到其他网格

> ID：15978908
> 
> 赞同：0
> 
> 时间：2013-04-12T18:59:48.820
> 
> 标签：extjs, grid, datagridcolumn

我需要**保留**重新排序列的默认功能，并添加将列放入第二个网格的可能性，在最后一个包含第一个网格的列的列表中构建。

我希望已经清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:33:38.887

我解决了扩展 DropZone 的问题。此实现接收目标网格作为构造函数参数，并且此在源网格的 rbar（停靠控件）中。键将 ddGroup 设置为“header-dd-zone-”加上源网格的 id。我希望这很有用。

```
Ext.define('Crud.FilterDropZone', {
    extend: 'Ext.dd.DropZone'

    , constructor: function() {}

    , init: function (grid) {
        var me = this;

        if (grid.rendered) {
            me.grid = grid;
            me.ddGroup = 'header-dd-zone-' + grid.up('grid').id;
            grid.getView().on({
                render: function(v) {
                    me.view = v;
                    Crud.FilterDropZone.superclass.constructor.call(me, me.view.el);
                },
                single: true
            });
        } else {
            grid.on('render', me.init, me, {single: true});
        }
    }

    , getTargetFromEvent: function (e) {
        return {};
    }

    , onNodeDrop: function (nodeData, source, e, data) {
        var header = data.header
            , store = Ext.getCmp(e.target.id).getStore();

        //store.add(new store.RecordType({ property: header.text, value: '', reference: header.dataIndex}));
        store.add([[header.text, '', header.dataIndex]]);
    }

}); 
```

# jquery - Jquery datepicker 验证 mm/dd/yyyy

> ID：15978911
> 
> 赞同：0
> 
> 时间：2013-04-12T19:00:04.120
> 
> 标签：jquery, validation, jquery-ui-datepicker

我正在尝试使用 jquery 日历日期选择器验证输入文本框。日期选择器本身运行良好，但我不确定如何验证输入是否为 mm/dd/yyyy 形式。这是这样设置的，因为内容是从另一个 jsp 加载的。

这是输入。

```
<table class="style2" width="100%">
    <tr>
        <td width="291" valign="middle">
            <p>Date: <input type="text" class="followup_three_02" id="followup_three_02" maxlength="10" size="10" value="<%=session.getAttribute("followup_three_02")==null?"":session.getAttribute("followup_three_02")%>" />
        </td>
        <td width="246">            
        </td>
    </tr>
</table> 
```

和日期选择器

```
function showContent(pos,direction){
    $("#area").hide("slide", { direction: direction=="left"?"right":"left"}, 500,      
        function(){
            $("#area").load("3month_forms.jsp #area" + pos, function(){
                $("#area").show("slide", { direction: direction }, 500);
                if(pos==2){
                    $(function(){
                    var pickerOpts = {
                        showOn: "button",
                        buttonImage: "/images/calendar.png",
                        buttonImageOnly: true,
                        changeMonth: true,
                        changeYear: true,
                        yearRange: "-60:+0"
                    }; 
        $("#followup_three_02").datepicker(pickerOpts);
});

                }
            }); 
        }             
    );
} 
```

我的验证器不正确。

```
}else if(question_pos==2){
        if($('#followup_three_02').val() == ( Date.parse("4/8/2013") > Date.now())){
            alert("What is your baby's birthdate? ");
        return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:07:42.373

这是一个条件：

```
Date.parse("4/8/2013") > Date.now() 
```

它返回真或假！

`val()`将始终返回一个字符串，在这种情况下可能是一个字符串形式的日期，例如`5/5/2013`，并将其与 true 或 false 进行比较，始终为 false。

```
if($('#followup_three_02').val() == ( Date.parse("4/8/2013") > Date.now())){
// if  string ^^^^^^^^^         equals       true or false ^^^^^^ == always false 
```

而是尝试：

```
var given_date   = Date.parse( $('#followup_three_02').val() ),
    compare_date = Date.parse("4/8/2013");

if ( given_date.getTime() > compare_date.getTime() ) { ... } 
```

并且由于您使用的是jQuery datepicker：

```
var given_date   = $("#followup_three_02").datepicker('getDate'),
    compare_date = $.datepicker.parseDate('m/d/yy', '04/08/2013', {});

if ( given_date > compare_date ) { ... } 
```

[**小提琴**](http://jsfiddle.net/GMuYD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:06:50.953

调用这个函数。如果日期不是 mm/dd/yyyy 格式，它将返回 false。

```
function isDate(txtDate) {
        var currVal = txtDate;
        if (currVal === '') {
            return false;
        }

        //Declare Regex
        var rxDatePattern = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/;
        var dtArray = currVal.match(rxDatePattern); // is format OK?
        if (dtArray === null) {
            return false;
        }

        //Checks for mm/dd/yyyy format.
        dtMonth = dtArray[3];
        dtDay = dtArray[1];
        dtYear = dtArray[5];

        if (dtMonth < 1 || dtMonth > 12) {
            return false;
        }
        else if (dtDay < 1 || dtDay > 31) {
            return false;
        }
        else if ((dtMonth == 4 || dtMonth == 6 || dtMonth == 9 || dtMonth == 11) && dtDay == 31) {
            return false;
        }
        else if (dtMonth == 2) {
            var isleap = (dtYear % 4 === 0 && (dtYear % 100 !== 0 || dtYear % 400 === 0));
            if (dtDay > 29 || (dtDay == 29 && !isleap)) {
                return false;
            }
        }
        else {
            return true;
        }
    } 
```

# c# - 在win 7上以编程方式更改代理地址

> ID：15978912
> 
> 赞同：0
> 
> 时间：2013-04-12T19:00:12.153
> 
> 标签：c#, proxy, registry

在 Windows 7 中，我尝试以编程方式启用 chrome 代理

```
RegistryKey registry = Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings", true);
registry.SetValue("ProxyEnable", 1);
registry.SetValue("ProxyServer", "IP:8080"); 
```

但现在没有任何效果。我不能再上网了。如何重置 Internet 将重新开始工作的值？

在哪里可以获得有效的代理网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:34:46.617

只需禁用代理，它应该没问题。

```
string keyName = @"Software\Microsoft\Windows\CurrentVersion\Internet Settings";
using (RegistryKey key = Registry.CurrentUser.OpenSubKey(keyName, true))
{
    if (key != null)
    {
        key.SetValue("ProxyEnable", 0);
    }
} 
```

# html - javascript中旋转图像的碰撞检测

> ID：15978914
> 
> 赞同：0
> 
> 时间：2013-04-12T19:00:22.137
> 
> 标签：html, image, math, canvas, rotation

我创建了一个 js 函数，它应该旋转图像以进行碰撞检测，但是该函数不能正常工作，当旋转超过 π*1.5 (Pi) 时，图像会裁剪。

```
function rotateImage(image , rotation)
{

    // Creates a canvas
    var rotatedImage = document.createElement( "canvas" ) . getContext( "2d" ),

    // Setting a bounding box size
    boundingWidth = Math . abs( image . height * Math . cos( rotation ) + image . width * Math . sin( rotation ) ),
    boundingHeight = Math . abs( image . height * Math . sin( rotation ) + image . width * Math . cos( rotation ) );

    // Changing canvas size
    rotatedImage . canvas.width = boundingWidth;
    rotatedImage . canvas.height = boundingHeight;

    // Translating canvas
    rotatedImage . translate( boundingWidth/2 , boundingHeight/2 );

    // Rotate canvas
    rotatedImage . rotate( rotation );

    // Un-translating canvas
    rotatedImage . translate( -boundingWidth/2 , -boundingHeight/2 );

    // Draws image
    rotatedImage . drawImage( image , 0 , 0 );

    // Returns canvas
    return rotatedImage . canvas;

} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:20:47.833

**[编辑：OP澄清他们想要碰撞检测]**

哦……您希望旋转矩形的边界框用于碰撞检测。

您不需要为此使用画布旋转，只需使用三角函数！

```
// where w = rectangle width (sprite width)
// where h = rectangle height (sprite height)
// where a = angle of rotation in degrees
// calculate the bounding box of the rectangle at the given rotation

function BoundingBoxDimensions(w,h,a){
  var rads=a*Math.PI/180;
  var c = Math.abs(Math.cos(rads));
  var s = Math.abs(Math.sin(rads));
  return({  width: h * s + w * c,  height: h * c + w * s });
} 
```

关于您上面的代码，如果您的 Math.sin(rotation) 或 Math.cos(rotation) 变为负数，您需要在 BB 计算中使用它们之前获取它们的绝对值。这就是为什么您的计算在 PI * 1.5 时变得疯狂的原因。

# sql-server-2008 - 存储过程中的动态 SQL 不返回结果集；在 SSMS 中运行时，我得到了结果

> ID：15978915
> 
> 赞同：0
> 
> 时间：2013-04-12T19:00:25.033
> 
> 标签：sql-server-2008, tsql, stored-procedures

我有一个构建动态 sql 并执行它的存储过程。它不给出错误消息，但不返回结果。但是，当我手动运行 sp 中的代码时，我得到了我正在寻找的结果。为什么会这样？sp 采用一个 nvarchar(max) 参数，@CLM。ANSI_NULLS、QUOTED_IDENTIFIER 和 NOCOUNT 为 ON。在 sp 中有一个临时表#tmpAffPeople。它的列是 EmpLogin nvarchar(8)、Matter nvarchar(15)、NameandTitle nvarchar(max)、TotalHours decimal(6,2)、ClientMatter varchar(max)。sp的正文如下：

```
DECLARE @SQLString AS nvarchar(max)
SET @SQLString = ';WITH Emps (EmpLogin, AttorneyAndTitle)
AS
(SELECT EmpLogin, 
CASE WHEN EmpTermDate IS NULL OR EmpTermDate = ' + '''' + '''' + ' THEN LastName + ' + '''' + ', ' + '''' + ' + FirstName + ' + ''''+ ' [' + '''' + ' + Title + ' + '''' + '] ' + '''' +
'ELSE LastName + ' + '''' + ', ' + '''' + ' + FirstName + ' + '''' + ' [' + '''' + ' + Title +' + '''' +'] (inactive) ' + '''' + ' END as FullName 
FROM [LitigationHold].[dbo].[Employees] 
where JobCode IN (' + '''' + '100' + '''' + ',' + '''' + '300' + '''' + ',' + '''' + '400' + '''' + ',' + '''' + '500' + '''' + ',' + '''' + '700' + '''' + ',' + '''' + '800' + '''' + ',' + '''' + '1801' + '''' + '))
INSERT INTO #tmpAffPeople
SELECT t.[EmpLogin],t.Matter, e.AttorneyAndTitle, SUM([Workhours]) AS TotalHours,
c.ClientName + ' + '''' + '/' + '''' + ' + em.MatterDesc
FROM TimeCard t
INNER JOIN Emps e
ON e.EmpLogin = t.EmpLogin
INNER JOIN EliteMatter em
ON t.Matter = em.MatterName
INNER JOIN EliteClient c
ON c.ClientNum = em.ClientNum
WHERE t.Matter IN (' + @CLM + ')
GROUP BY t.EmpLogin, c.ClientName, em.MatterDesc, t.Matter, e.AttorneyAndTitle
ORDER BY TotalHours' 
```

运行后，在 sp 中，我通过在括号之间紧跟 @SQLString 调用执行来执行 @SQLString。然后我放下桌子。我以前做过这种事情，从来没有遇到过问题。我错过了什么？我正在使用 SQL Server 2008R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:11:21.890

您需要从`#tmpAffPeople`表中选择行以从存储过程中获取结果集

# c++ - 鉴于某些函数是 const 而其他函数是非 const，正确使用/修改 QString

> ID：15978916
> 
> 赞同：1
> 
> 时间：2013-04-12T19:00:26.540
> 
> 标签：c++, qt, qt4, constants, qstring

我正在对 QString 执行一些操作来修剪它，但我不想影响原始字符串。我是 Qt 新手，对使用各种 QString 函数的正确方法感到困惑，因为有些是 const，有些不是。到目前为止，这就是我所拥有的：

```
// this needs to be const so it doesn't get modified.
// code later on is depending on this QString being unchanged
const QString string = getString(); 
```

我需要调用的方法是`QString::simplified()`、`QString::remove()`和`QString::trimmed()`。令人困惑的部分是什么是正确的方法，因为`simplified()`and `trimmed()`are `const`，但`remove()`不是。请记住，我要复制原件并直接对副本进行修改，这就是我所拥有的：

```
// simplified() is a const function but no problem because I want a copy of it
QString copy = string.simplified(); 

// remove is non-const so it operates on the handle object, which is what I want
copy.remove( "foo:", Qt::CaseInsensitive );

// trimmed() is const, but I want it to affect the original
copy = copy.trimmed(); 
```

是否使用`copy = copy.trimmed()`正确的方法来处理这种情况？这会实现我的目标，即为下一次使用修剪副本（）吗？有没有更好（更优雅、更高效、更 Qtish）的方法来做到这一点？

我检查了[QString Qt 文档](https://qt-project.org/doc/qt-4.8/qstring.html)并不能令人满意地回答这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:59:50.213

我认为答案仅仅是出于优化的原因。

> 在幕后，`QString`使用隐式共享（写时复制）来减少内存使用并避免不必要的数据复制。这也有助于减少存储 16 位字符而不是 8 位字符的固有开销。

很多时候，当它们返回对修改后的字符串的引用以获得最终结果时，我会添加一些不同的方法。（更优雅的方式......）

例如：

```
QString str = " Hello   World\n!";
QString str2 = str.toLower().trimmed().simplified();
if(str2.contains("world !"))
{
    qDebug() << str2 << "contains \"world !\"";
} 
```

以下是关于隐式共享的更多信息：

[http://qt-project.org/doc/qt-4.8/implicit-sharing.html](http://qt-project.org/doc/qt-4.8/implicit-sharing.html)

希望有帮助。

# mysql - 用另一个表的数据更新 MySQL 表

> ID：15978920
> 
> 赞同：3
> 
> 时间：2013-04-12T19:00:35.123
> 
> 标签：mysql, sql, sql-update

我读[了这个](https://stackoverflow.com/questions/5727827/update-one-mysql-table-with-values-from-another)和[这个](https://stackoverflow.com/questions/1202075/advanced-mysql-query-update-table-with-info-from-another-table)，但我需要做一个 GROUP BY 查询来设置另一个表。

`logintable`是这样的：

```
id | name    | login_date
------------------------
1  | michael | 2013-01-04 
2  | michael | 2013-01-08 
3  | mary    | 2013-01-11 
4  | john    | 2013-01-15 
5  | michael | 2013-01-19 
6  | mary    | 2013-01-22 
7  | john    | 2013-01-26 
```

我这样查询：

```
SELECT * FROM logintable GROUP BY name ORDER BY id ASC 
```

这给了我用户的第一个登录日期：

```
1  | michael | 2013-01-04 
3  | mary    | 2013-01-11 
4  | john    | 2013-01-15 
```

我有另一个`userstable`这样的表：

```
id | name    | last_seen_date | first_login_date
------------------------------------------------
1  | michael | 2013-02-02     |  
2  | john    | 2013-02-04     |   
3  | mary    | 2013-02-16     | 
```

我需要用第一个结果更新用户表的 first_login_date 列。我怎样才能做到这一点 ？（我在 logintable 中有 75k 条记录，在 usertable 中有 10k 条记录）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T19:02:48.993

```
UPDATE  userstable a
        INNER JOIN
        (
            SELECT  name, min(login_date) min_date
            FROM    logintable
            GROUP   BY name
        ) b ON a.name = b.Name
SET     a.first_login_table = b.min_date 
```

为了获得更快的性能，您需要为两个表添加一个`INDEX`on 列`Name`。这将**防止执行**在大型数据库中非常慢的全表扫描。

添加`INDEX`在桌子上`userstable`：

```
ALTER TABLE usersTable ADD INDEX (Name); 
```

为了参照完整性，通过定义约束使表`logintable`依赖于表：`userstable``FOREIGN KEY`

```
ALTER TABLE loginTable ADD CONSTRAINT tb_fk
FOREIGN KEY (Name) REFRENCES usersTable (Name) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T19:02:45.870

```
UPDATE userstable AS u
INNER JOIN
(
   SELECT MIN(login_date) AS MinLoginDate, Name
   FROM logintable 
   GROUP BY name
) AS l ON u.name = l.name
SET u.first_login_date = l.MinLoginDate 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T19:09:12.223

我不知道 MySql ......但在 SQL Server 中你会写这样的东西：

```
UPDATE userstable set first_login_date = (SELECT MIN(login_date) FROM logintable where name = userstable.name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T10:56:07.597

UPDATE userstable a INNER JOIN ( SELECT name, min(login_date) min_date FROM logintable GROUP BY name ) b ON a.name = b.Name SET a.first_login_table = b.min_date

这肯定会显示您的输出。

# activeadmin - 如何使用模块在活动管理员中拆分很长的代码？

> ID：15978928
> 
> 赞同：5
> 
> 时间：2013-04-12T19:01:16.600
> 
> 标签：activeadmin

Activeadmin 在单个文件上注册一个页面，其中包含所有逻辑：索引、显示、编辑等。

我想将 task.rb 拆分为 task_index.rb、task_show.rb、task_edit.rb 等。

那么，你应该怎么做呢？

**注意**：我知道在每个文件中创建一个 ActiveAdmin.register 块（如果*Task*存在，它会附加）将完成这项工作，但这个问题旨在提供一种通用方法，而不是解决这个特定的查询。

```
-- admin/task.rb
#encoding: utf-8

ActiveAdmin.register Task do
 [Lot's of actions]
  member_action....
  member_action....
  member_action....
  batch_action....

 [Index stuff]
  filter....
  scope....
  scope....
  scope.... 
  index do
   column...
   column...
   column...
   column...
  end

 [Edit stuff]
  form do |f|
    f.input....
    f.input....
    f.input....
    f.input....
    f.input....
  end
 [etc etc etc]
end
---------------- 
```

我正在考虑模块，但我不知道如何去做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-27T20:26:27.820

我就是这样做的

**模块源**

```
module ResourceDSL
  module ActsAsClone

    def acts_as_clone
      controller do
        def new
          instance_variable_name = active_admin_config.resource_class.to_s.underscore
          resource = active_admin_config.resource_class.find(params[:id]) rescue nil
          attrs = resource.nil? ? {} : resource.attributes
          resource = active_admin_config.resource_class.new(attrs)
          instance_variable_set("@#{instance_variable_name}", resource)
        end
      end

      action_item :only => [:show, :edit] do
        if can? :create, resource and (!resource.respond_to?(:live?) or resource.live?)
          link_to "Copy", :action => :new, :id => resource.id
        end
      end
    end
  end
end 
```

**包括 ActiveAdmin::ResourceDSL**

```
ActiveAdmin::ResourceDSL.send :include, ResourceDSL::ActsAsClone 
```

然后你可以

```
ActiveAdmin.register Account do
  menu :parent => "Billing",  :priority => 10
  acts_as_clone
end 
```

# apache - 如何防止 RewriteRule 忽略此 URL？

> ID：15978929
> 
> 赞同：0
> 
> 时间：2013-04-12T19:01:17.560
> 
> 标签：apache, .htaccess, mod-rewrite

我有这个 RewriteRule ：

`RewriteRule !^(div|sitemapXML|cache|AJAX|xml|html|favicon.ico|robots.txt|script|cms|style|image|inc|img|templates|index.html) index.php`

但例如“ [http://www.mydomain.com/divindu/](http://www.mydomain.com/divindu/) ”会因为排除“div”而被忽略。在这里处理文件夹的最佳方法是什么？我应该在名字后面加上斜杠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:07:14.270

看起来您正在尝试实现忽略现有文件的包罗万象的规则。您应该为此简单地使用 Apache 的 FallbackResource 指令。对于旧版本的 Apache，或更精细的控制，查看 RewriteCond 的特殊 -d 和 -f 标志，您可以使用它们从 RewriteRule 显式排除现有文件和文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T20:42:10.220

根据类型、常规文件或目录，您可以附加斜杠`/`或字符串结尾的美元符号`$`。您还可以将模式移动到 a[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)并将目录和文件拆分为两个

```
# exclude some directories
RewriteCond %{REQUEST_URI} !^/(div|sitemapXML|cache|AJAX|xml|html|script|cms|style|image|inc|img|templates)/
# exclude some existing files
RewriteCond %{REQUEST_URI} !^/(favicon.ico|robots.txt|index.html)$
RewriteRule ^ index.php [L] 
```

或者，如果您想像@Niels 假设的那样排除所有现有文件和目录，您可以使用

```
# exclude existing files
RewriteCond %{REQUEST_FILENAME} !-f
# exclude directories
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [L] 
```

# android - Windows 7 只能识别一台 Nexus 7 平板电脑。看不到新的

> ID：15978930
> 
> 赞同：0
> 
> 时间：2013-04-12T19:01:20.903
> 
> 标签：android, eclipse

我希望有人可以帮助我。我可以将我的 windows 7 机器和 Eclipse 成功连接到我的 nexus 7。我丢失了我的平板电脑，我买了新的，但现在我的 windows 机器甚至无法将它识别为外部设备，我的 Eclipse 也不能工作有了它。Windows 7 是否将 USB ID 保留在某处？我应该重新安装一些东西吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:04:06.780

确保您启用了 USB 调试。

打开设备管理器。您是否看到 ADB 设备的选项卡？你在名单上的任何地方看到你的N7吗？

如果没有，请在平板电脑上进入并将 PC 连接模式更改为未打开的模式。然后再试一次。

我的 N7 也有问题，它只有在设置为某种连接类型时才会连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T17:34:26.343

I have found that if Eclipse is not installed on the computer, the computer is able to see multiple Nexus 7 tablets as MTP devices. However, for computers that have Eclipse installed on them they can only see the first Nexus 7 tablet connected to them as an MTP device. All other tablets connected to the computer are seen as an unspecified device. It seems like Eclipse is storing a unique identifier from the first tablet associated with it. The only way I can get apps built in Eclipse onto my other Nexus 7 tablets is to change the usb connection to PTP (not MTP) and then my windows 7 computer sees my tablet as a camera and I can move the .apk file over to the tablet. Is this how it's suppose to work?

# wordpress - W3 验证器无法检查

> ID：15978935
> 
> 赞同：1
> 
> 时间：2013-04-12T19:01:37.487
> 
> 标签：wordpress, validation, xml-rpc, w3c-validation

我在 Wordpress 上的 XML-RPC 协议不起作用！这就是我想使用 W3 Validator 的原因。我刚刚输入了我的 URL 并单击了确定。

验证结果：

> 尝试检索[http://subtarget.net](http://subtarget.net)时收到以下意外响应：500 Internal Server Error

这很奇怪，因为 PC 可以毫无问题地访问我的网站

我的网站名称是：www.subtarget.net

谢谢你。

**编辑：我删除了 .htaccess 并再次尝试，但我仍然得到 500 错误代码..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:20:06.770

问题出在您的编码中。如果您在选项中将验证器的编码设置为 iso-8859-1，那么它将进行验证： http: [//validator.w3.org/check ?uri=http%3A%2F%2Fsubtarget.net%2F&charset=iso- 8859-1&doctype=内联&group=0&No200=1&user-agent=W3C_Validator%2F1.3+http%3A%2F%2Fvalidator.w3.org%2Fservices](http://validator.w3.org/check?uri=http://subtarget.net/&charset=iso-8859-1&doctype=Inline&group=0&No200=1&user-agent=W3C_Validator/1.3%20http://validator.w3.org/services)

# rubygems - 运行 sproutcore 时出错

> ID：15978940
> 
> 赞同：0
> 
> 时间：2013-04-12T19:01:50.070
> 
> 标签：rubygems, sproutcore

我已经安装了 sproutcore，但是 `sc-init, sc-server`在我的 Windows 系统的命令提示符下运行时出现此错误。
`C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require': c annot load such file -- iconv (LoadError) from C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in` require' from C:/Ruby200/lib/ruby/gems/2.0.0/gems/json_pure-1.4.6/lib/json/common .rb:2:in ....`

任何建议都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:58:25.490

Sproutcore 构建工具与 Ruby 2.0 不兼容。您必须使用 Ruby 的 1.9.x 版本。

# spring-security - 绕过 Spring 安全过滤器

> ID：15978941
> 
> 赞同：0
> 
> 时间：2013-04-12T19:01:50.707
> 
> 标签：spring-security

我的`AbstractPreAuthenticatedProcessingFilter`overrides实现`getPreAuthenticatedPrincipal()`。在某种情况下，我想绕过这个安全过滤器。

为此，我`null`按照[Javadoc](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/preauth/AbstractPreAuthenticatedProcessingFilter.html#getPreAuthenticatedPrincipal%28javax.servlet.http.HttpServletRequest%29) **[EDIT]返回** **并且效果**很好。

> 请注意，这不会影响 getPreAuthenticatedPrincipal(javax.servlet.http.HttpServletRequest) 返回的主体为空的情况，此时链仍将正常进行。

# java - 从 GAE 数据存储到 JSP 的 PreparedQuery

> ID：15978943
> 
> 赞同：0
> 
> 时间：2013-04-12T19:01:57.037
> 
> 标签：java, google-app-engine, google-cloud-datastore

我正在使用带有 Java 的 Google App Engine。

我使用数据存储查询通过以下代码从数据存储中取回实体：

```
public static PreparedQuery GetAllEntities() {
        DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
        Query q = new Query("Apple");
        PreparedQuery pq = ds.prepare(q);
        return pq;
    } 
```

之后，我想将其“提供”`pq`给 .jsp，它应该列出所有实体的“名称”属性。怎么可能呢？

提前致谢

# php - 使用 XPath 从 HTML 中获取多个值

> ID：15978945
> 
> 赞同：0
> 
> 时间：2013-04-12T19:02:05.083
> 
> 标签：php, xpath

我想从一些 HTML 中提取多个值，我觉得 XPath 可能是执行此操作的理想方式。

我正在考虑做的是遍历每个`tr`具有该类的类，`data`然后在循环中获取我需要的数据，即`route_number`（`a`也在标题中）和文本中的`via`文本。

HTML 如下：

```
<tr class="data"><th class="route_number"><a href="/routes/west-midlands/B001v/?tab=" title="Dudley - Sedgley - Wolverhampton - Tettenhall Wood"><span class="route_number small_curvy">1</span></a></th>
  <td class="main_and_via">
    <a href="/routes/west-midlands/B001v/?tab=" title="Dudley - Sedgley - Wolverhampton - Tettenhall Wood">Dudley - Sedgley - Wolverhampton - Tettenhall Wood</a>
            <span class="via"><strong>via</strong> Dudley Road and Tettenhall Road</span>
          </td>
</tr><tr class="data"><th class="route_number"><a href="/routes/west-midlands/B002/?tab=" title="Birmingham City Centre - Sparkbrook - Yardley Wood - Warstock / Maypole"><span class="route_number small_curvy">2</span></a></th>
  <td class="main_and_via">
    <a href="/routes/west-midlands/B002/?tab=" title="Birmingham City Centre - Sparkbrook - Yardley Wood - Warstock / Maypole">Birmingham City Centre - Sparkbrook - Yardley Wood - Warstock / Maypole</a>
            <span class="via"><strong>via</strong> Yardley Wood Road</span>
          </td>
</tr> 
```

是循环遍历每个`tr`然后对`route number`,`anchor text`和`via text`理想的单独查询还是可以使用单个 XPath 查询来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:08:09.277

您可以使用 XPath 的“上下文”支持：

```
$tr = $xpath->query("//tr[@class='data']");

foreach($tr as $row) {
   $route = $tr->query("//td[contains(@class, 'route_number')]", $row);
   etc...
} 
```

注意`$row`第二个 ->query() 调用中的。它提供了搜索应该从哪里开始的上下文。xpath 不会搜索整个 DOM 树，而是仅搜索 $row 指向的特定分支。

这样做可以保证`.route_number`您找到的是属于您正在处理的 $row 的那个，而不是树中其他地方的 .router_number 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:17:32.037

*如果*它们始终存在，您可以查询所有您想要的值：

```
(
    (//tr[@class = "data"])
        /*[@class="route_number"]//span
        |//tr[@class = "data"]/*[@class="main_and_via"]/a
        |//tr[@class = "data"]//*[@class="via"]
)/text() 
```

结果：

```
#0: DOMText (length: 1) "1"
#1: DOMText (length: 50) "Dudley - Sedgley - Wolverhampton - Tettenhall Wood"
#2: DOMText (length: 32) " Dudley Road and Tettenhall Road"
#3: DOMText (length: 1) "2"
#4: DOMText (length: 71) "Birmingham City Centre - Sparkbrook - Yardley Wood - Warstock / Maypole"
#5: DOMText (length: 18) " Yardley Wood Road" 
```

[在行动中看到它。](http://eval.in/16207)

# prolog - 解析字符串中的整数？

> ID：15978946
> 
> 赞同：0
> 
> 时间：2013-04-12T19:02:07.573
> 
> 标签：prolog, dcg

我在[DCG上浏览了这个例子](http://www.swi-prolog.org/pldoc/man?section=DCG)

```
integer(I) -->
        digit(D0),
        digits(D),
        { number_codes(I, [D0|D])
        }.

digits([D|T]) -->
        digit(D), !,
        digits(T).
digits([]) -->
        [].

digit(D) -->
        [D],
        { code_type(D, digit)
        }. 
```

但是此示例仅在整数位于字符串开头时才解析整数（因为 digit(D0) 失败是 D0 不是数字代码）。如何解析字符串中任意位置的整数，例如“abc123def”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:15:44.537

您可以添加如下内容：

```
non_digits--> [D], {not(code_type(D, digit))}, !, non_digits.
non_digits-->[]. 
```

然后添加一个呼叫以`non_digits`跳过非数字，例如：

```
integer_skip(I) -->
        non_digits,
        digit(D0),
        digits(D),
        { 
           number_codes(I, [D0|D])
        },
        non_digits. 
```

# c - 如何修改 X509 的扩展？

> ID：15978950
> 
> 赞同：1
> 
> 时间：2013-04-12T19:02:24.440
> 
> 标签：c, openssl, x509

我正在创建一个用于`X509`在 C 中修改证书的 api，并且我想添加一种修改扩展的方法。例如，添加另一个 DNS 条目`subjectNameAlt`，使其`DNS:example.com,DNS:example2.com`不仅仅是`DNS:example.com`. 删除和重新添加不好的原因是因为我必须重新解析扩展名（这很困难），我宁愿只添加一条信息。我将如何通过 OpenSSL API 做到这一点？

我试图简单地重用添加代码：

```
ex = X509V3_EXT_conf_nid(NULL, &ctx, NID_subject_alt_name, "DNS:new.dns.example");
if (!ex)
    return;
X509_add_ext(cert,ex,-1);
X509_EXTENSION_free(ex); 
```

但是在运行之后，根本找不到扩展名（即使我尝试添加另一个新的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T15:57:18.533

看一下

```
 demos/x509/mkcert.c
  demos/x509/selfsign.c
  demos/x509/mkreq.c 
```

在您的 openssl 发行版中。我怀疑您没有设置上下文；或者您假设当您说“根本找不到”时会在幕后调用某些 i2d/etc。请注意，X509_sign() 和他们的同类确实创造了很多这样的东西。如果您没有调用任何东西 - 那么不要期望创建任何这些。

# c# - 我可以向 PasswordCredential.Properties 添加自定义属性吗？

> ID：15978958
> 
> 赞同：2
> 
> 时间：2013-04-12T19:02:54.693
> 
> 标签：c#, windows-8, windows-runtime, passwordvault

在 WinRT API 中有包含[PasswordCredential](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordcredential.aspx "密码凭证")类的 Windows.Security.Credentials 命名空间。使用它，我们可以加密敏感数据，如用户名和密码，但该类本身有一个名为“Properties”的属性，在我看来，它就像一个方便的容器，用于存放与存储的凭证相关的其他自定义属性，但我无法让它工作. 文档中有“属性”的“只读”访问类型，但我认为这仅意味着我无法更改对它指向的容器的引用。我的问题是：

[PasswordCredential](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordcredential.aspx "密码凭证")的“Properties”属性对程序员有用吗？

很抱歉文本中的任何错误，您也可以在答案中纠正我的英语，它不是我的母语；）

编辑：这可能有用：

以下代码中的“Add”方法抛出 ArgumentException：

```
PasswordVault v = new PasswordVault();
PasswordCredential c = new PasswordCredential("TEST", "TEST", "TEST");
c.Properties.Add("Name", "testName");
v.Add(c); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T08:21:06.077

不幸的是， PasswordCredentials.Properties 是 PasswordCredentialPropertyStore 的一个实例[，](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordcredentialpropertystore)文档将每个方法描述为“......保留供内部使用，不打算在您的代码中使用”。

这就是为什么它不适用于程序员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:36:56.260

不，它是一个只读属性，所以你不能设置它。它的设计目的是让您可以枚举对象的属性（不是 c# 类属性，而是属性集合的各个属性）。命名使这令人困惑。

# cassandra - Cassandra Architecture on upsert

> ID：15978959
> 
> 赞同：1
> 
> 时间：2013-04-12T19:02:59.393
> 
> 标签：cassandra, bigdata

我正在阅读[这篇](http://www.datastax.com/docs/1.2/dml/about_inserts)关于 Cassandra upsert 的文章。这张[图片](http://www.datastax.com/docs/_images/update_db_12.png)显示了 2 行，`memtable`如下`commit log`所示。

```
k1 c1:v5 c4:v4
k1 c1:v2 c3:v3 
```

我想知道的是“ `it's a mistake and 2nd line's k1 should be k2`”还是“ `it's not a mistake and talks about 2 consecutive updates on k1`”？

希望问题很清楚。

如果答案是，我会有第二个问题`no, it's not a mistake`。:)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:27:19.373

是的，这是一个错误。它应该同时显示 k1 和 k2。

虽然提交日志显示 k1 两次（例如来自两次不同的写入）是有效的，但在这种情况下，memtable 将显示一行。

# jquery - 带有复选框的列表框，带有全选选项

> ID：15978969
> 
> 赞同：0
> 
> 时间：2013-04-12T19:03:36.403
> 
> 标签：jquery, jquery-ui, jquery-plugins, kendo-ui

这是列表框的类型，我正在寻找一个 jquery 插件，或者 Jquery 或 Kendo UI 中的东西。我搜索了很多但徒劳无功。我需要一个列表框，我在其中绑定到数据源。列表框中的项目应该有复选框，允许用户选中/取消选中。我还想要列表中的所有项目选项，使用户能够选择列表框中的所有项目或取消选择列表框中的所有项目。你遇到过这样的插件吗？

![带有复选框选项的列表框以选择所有](https://i.stack.imgur.com/WYdnb.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:07:50.847

我以前使用过这个插件，它或多或少地做了你描述的事情：

[http://www.erichynds.com/blog/jquery-ui-multiselect-widget](http://www.erichynds.com/blog/jquery-ui-multiselect-widget)

在我看来，它比列表框好得多，并且只是自动从选择元素中生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:11:09.257

您是否考虑过使用 jqWidjects

[http://www.jqwidgets.com/listbox-with-checkboxes/](http://www.jqwidgets.com/listbox-with-checkboxes/)

他们有开源和付费的 API。看看哪一个最适合您的需求

如果你想坚持你在问题中提到的插件，那么你可以尝试 kendo 多选自定义模板

[http://demos.kendoui.c​​om/web/multiselect/template.html](http://demos.kendoui.com/web/multiselect/template.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-03T03:13:23.790

你见过：http: [//joelanman.com/2009/03/simple-multiple-selection-with-checkbox-lists-and-jquery/](http://joelanman.com/2009/03/simple-multiple-selection-with-checkbox-lists-and-jquery/)？它似乎不用插件就可以解决问题。

# objective-c - 具有多个参数的方法

> ID：15978977
> 
> 赞同：0
> 
> 时间：2013-04-12T19:03:52.460
> 
> 标签：objective-c

我有一个像这样的瓷砖对象

```
- (id)initWithFrame:(CGRect)frame withImageNamed:(NSString*) imageName value:(int) tileValue{
if (self = [super initWithFrame:frame]) {
    //initilization code
    image = [[UIImageView alloc]
             initWithImage: [UIImage imageNamed: imageName]];
    image.frame = self.bounds;
    image.opaque = YES;
    [self addSubview:image];

    valueOfTile = tileValue;
} return self;
} 
```

我正在尝试创建一个对象：

```
tile1 = [[TileView alloc]
             initWithFrame:CGRectMake(20,20, 100, 150)
             value:1
             withImageNamed:@"tile1.png"]; 
```

当我没有添加值信息时，我能够让它工作，但现在它给了我这个错误：实例方法`'-initWithFrame:value:withImageNamed:' not found (return type defaults to 'id')`

我不确定我在哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:06:40.527

该方法定义为`initWithFrame:withImageNamed:value:`，但您将其称为`initWithFrame:value:withImageNamed:`。你需要这样称呼它：

```
tile1 = [[TileView alloc]
             initWithFrame:CGRectMake(20,20, 100, 150)
             withImageNamed:@"tile1.png"
             value:1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:06:17.040

您的方法签名和调用它的方式不匹配：参数的顺序不同。将调用中的最后两个参数交换为`initWithFrame...`，它应该可以工作。

# ios - 上下滚动时 UISwitch 重置

> ID：15978980
> 
> 赞同：2
> 
> 时间：2013-04-12T19:04:07.670
> 
> 标签：ios, objective-c, uitableview, uiswitch

我对 UISwitch 的事件值更改有疑问，这是我的详细问题。

在 numberOfRowsInSection 我有循环调用数据库方法，该方法返回每个部分的#of 行。

我使用了一个数组数组（因为我有很多部分和很多行），它保持 UISwitch 的状态，然后在调用值更改时更新它，这是事件的代码：

但是，当我向上或向下滚动时，所有这些 UISwitch 仍然会重置。请尽快帮助我，我将非常感谢您的帮助。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:12:35.630

`if (sender.on)`我认为您在方法中犯了逻辑错误，`-(void)switchChanged:(UISwitch *)sender`因为当`sender.on == YES`您关闭时:) 写

```
-(void)switchChanged:(UISwitch *)sender
{
    UITableViewCell *cell = (UITableViewCell *)[sender superview];
    NSIndexPath *x =[mainTableView indexPathForCell:cell];

    NSMutableArray *repl = [SwitchArray objectAtIndex:x.section];
    [repl replaceObjectAtIndex:x.row withObject:(sender.on ? @"ON", @"OFF")];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:13:52.487

您可以仔细检查表格视图中的值，`willDisplayCell:`以确保您正确无误：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{

    UISwitch* uiSwitch = (UISwitch*) cell.accessoryView;
    if (uiSwitch != nil && [uiSwitch isKindOfClass:[UISwitch class]]) {
        //just make sure it is valid
        NSLog(@"switch value at %d-%d is: %@",indexPath.section, indexPath.row,  [SwitchArray[indexPath.section] objectAtIndex:indexPath.row] );
        uiSwitch.on = [[SwitchArray[indexPath.section] objectAtIndex:indexPath.row] isEqualToString:@"ON"];
    }

} 
```

顺便说一句，您可以使用 NSNumbers 使代码更具可读性：

```
-(void)switchChanged:(UISwitch *)sender
{
    UITableViewCell *cell = (UITableViewCell *)[sender superview];
    NSIndexPath *x=[mainTableView indexPathForCell:cell];
    NSLog(@"%ld", (long)x.section);

    //NSLog(@"index for switch : %d", switchController.tag );
     NSMutableArray *repl =  repl= [SwitchArray objectAtIndex:x.section];

   repl[x.section]  = @(sender.on);
} 
```

然后在哪里设置`on`值：

```
 uiSwitch.on = [[SwitchArray[indexPath.section] objectAtIndex:indexPath.row] boolValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:25:44.503

细胞被重复使用。每次使用单元时，您都在创建一个新开关。您应该只为每个单元创建一次开关。`cellForRow...`在您的方法中尝试以下操作：

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                  reuseIdentifier:CellIdentifier];

    UISwitch *switchController = [[UISwitch alloc] initWithFrame:CGRectZero];
    [switchController setOn:YES animated:NO];

    [switchController addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];
    cell.accessoryView = switchController;
    [switchController release];
}

UISwitch *switch = cell.accessoryView; 
```

# c# - 如何找到不可见的菜单项？

> ID：15978981
> 
> 赞同：2
> 
> 时间：2013-04-12T19:04:12.500
> 
> 标签：c#, .net, winforms, menu

我正在重构一段代码，逐行查看所有代码。

我遇到了一个事件处理程序：

```
private void mnuUpdate_Click(object sender, EventArgs e) 
```

...并且，不知道哪个菜单项调用了这个（菜单项名称并不总是与其标签匹配，甚至接近），很好奇。

表单上的主菜单在其子项中没有这样的菜单项。

我右击事件处理程序，选择“Find Usages*”并被引导到这里：

```
this.mnuUpdate.Text = "Update";
this.mnuUpdate.Click += new System.EventHandler(this.mnuUpdate_Click); 
```

（这是一个早于 .NET 的部分类优点的古老应用程序，所以它在同一个文件中）

在设计器中的表单上，当我从属性页面组合框中选择“mnuUpdate”时，表单上的 mainMenu 完全消失了。

我怎样才能找到这个逃亡的菜单项？窗体上没有popupMenu或contextMenu，只有mainMenu控件……？？？

*   唯一的其他用法是：

    if (ResetConnectionFetchForm) mnuUpdate_Click(sender, e);

这是否可能只是一个应该转换为“常规旧”方法的幻像菜单项？

## 更新

正如最聪明的乔治曾经说过的那样，“好奇者和好奇者”。现在我发现这个：

```
public void btnCancel_Click(object sender, EventArgs e) 
```

...虽然它是从代码中的七个位置调用的，但表单上没有 btnCancel ...这是一个“假”按钮单击事件。哦，我的兰塔！！！

因此，我将其替换为具有完全相同代码的无参数私有方法（它不使用发送方或事件参数）。

如果写这个 cockamamie glob 的水果蛋糕意大利面的猫是故意想让下一只猫（我）发疯，它工作得很好，并且会制作一个很好的 Poe 风格的故事或 Hitchcock 风格的电影。

...我明白了...死代码！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:31:24.990

好了，谜团解开了。mnuUpdate 被动态地（有条件地）添加到 mnuSetup（它是具有 Text 属性“Fetch”的顶级菜单项），如下所示：

```
if (!mnuSetup.MenuItems.Contains(mnuUpdate))
{
    mnuSetup.MenuItems.Add(mnuUpdate);
    UpdateMenuItemSelectable = true;
} 
```

我认为从表单的“属性”页面的组合框中选择 mnuUpdate 是因为此时没有可视化表示。

选择“mnuSetup”会突出显示“Fetch”菜单项，但选择“mnuUpdate”会导致它比蟑螂从灯光下更快地逃走。

所以现在奇怪的是：为什么菜单项没有按需动态*创建*，而不是显式创建然后动态添加；猫剥猫皮似乎是一种奇怪的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:24:41.577

我建议你把它变成“常规的旧菜单”，这样别人就不会浪费时间弄清楚它了。

我 - 我会认为它是过时的代码，因为它没有 Handles 子句。

您可以使用 .Visible 和 .Enabled 来控制用户看到的内容。

# java - 用于解析 json 的 jquery 数据属性

> ID：15978982
> 
> 赞同：0
> 
> 时间：2013-04-12T19:04:12.803
> 
> 标签：java, javascript, jquery, html

我有基于 spring mvc 的 java web 应用程序。我从我的服务器发送一个字符串数组列表。

在表中，我将其读入数据属性。

就像是

```
 <td id="context"class="hidden" data-contexts='${result.getContext()}'></td> 
```

当我将鼠标悬停在每一行上时，我想显示数据属性的值。

[http://jsfiddle.net/3WgTY/](http://jsfiddle.net/3WgTY/)（预期行为）

现在问题出在调试模式下，我看到表格是这样的。

[http://jsfiddle.net/4DMqr/](http://jsfiddle.net/4DMqr/)（当前行为）

所以 jquery.data() 不能正常工作。

我不知道为什么数据上下文有双引号，即使在 html 中我使用单引号。有人可以告诉如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:25:58.217

由于内部双引号，您的 json 周围的双引号会破坏代码。您可以使用单引号 ( [http://jsfiddle.net/4DMqr/2/](http://jsfiddle.net/4DMqr/2/) )，但如果您的 json 包含单引号，您会遇到同样的问题。要全面修复它，只需将属性内的所有 " 替换为`&quot;`

[http://jsfiddle.net/4DMqr/4/](http://jsfiddle.net/4DMqr/4/)

```
<td id="context" data-contexts="[&quot;\&quot;java\&quot; is awesome&quot;,&quot;\&quot;java\&quot; is object oriented&quot;]">java</td> 
```

此外，ID 必须是唯一的，并且 .live 在较新版本中已被折旧/删除。请更新您的代码以修复这两个（不相关的）问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:27:07.847

只是好奇为什么你需要那个循环

```
 <td id="context" data-contexts='java is awesonme <br> java is oo '>java</td> 
```

这有什么问题

```
var context = $(this).find("td#context").data("contexts");   
        $('#contextData').html(context ); 
```

可能我不明白

# r - 如何聚合一些列，同时将其他列保留在 R 中？

> ID：15978985
> 
> 赞同：15
> 
> 时间：2013-04-12T19:04:24.227
> 
> 标签：r, aggregate

我有一个这样的数据框：

```
 id  no  age
1    1   7   23
2    1   2   23
3    2   1   25
4    2   4   25
5    3   6   23
6    3   1   23 
```

我希望将日期框架聚合`id`成这样的形式：（只需总结`no`它们是否共享相同`id`，但保留`age`在那里）

```
 id  no  age
1    1   9   23
2    2   5   25
3    3   7   23 
```

如何使用 R 实现这一目标？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-12T19:18:21.267

假设您的数据框名为`df`.

```
aggregate(no~id+age, df, sum)
#   id age no
# 1  1  23  9
# 2  3  23  7
# 3  2  25  5 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-17T21:06:50.513

更好的是，`data.table`：

```
library(data.table)
# convert your object to a data.table (by reference) to unlock data.table syntax
setDT(DF)
DF[  , .(sum_no = sum(no), unq_age = unique(age)), by = id] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T21:59:55.940

或者，您可以使用`ddply`plyr 包：

```
require(plyr)
ddply(df,.(id,age),summarise,no = sum(no)) 
```

在此特定示例中，结果是相同的。但是，情况并非总是如此，[此处](https://stackoverflow.com/questions/14176756/difference-between-ddply-and-aggregate)概述了这两种功能之间的区别。这两个功能都有其用途，值得探索，这就是为什么我觉得应该提到这个替代方案。

# angularjs - CRUD 详细信息屏幕，有条件的新建或编辑

> ID：15978986
> 
> 赞同：3
> 
> 时间：2013-04-12T19:04:26.680
> 
> 标签：angularjs, crud, angular-template

我正在使用 Angular 中的 CRUD 详细信息屏幕并希望重用单个模板。这是初始模板伪代码，编辑屏幕的粗略开始......

```
<h1>{{fixtureType.Label}}</h1>
<form>
    <span>Fixture Type Details</span>
      <label>Type</label>
      <input>{{fixtureType.Type}}</input>
      <label>Watts</label>
      <input>{{fixtureType.Watts}}</input>
      <label>Cost</label>
      <input>{{fixtureType.Cost}}</input>
</form> 
```

假设我也想有条件地使用与*新*屏幕相同的模板，看起来像这样

```
<h1>New Fixture Type</h1>
<form>
    <span>Fixture Type Details</span>
      <label>Type</label>
      <input/>
      <label>Watts</label>
      <input/>
      <label>Cost</label>
      <input/>
</form> 
```

如果这是直接的 Javascript，那么一个简单的条件`bIsEdit = fixtureType != null`就可以了。从我目前所读的内容来看，没有条件或方法可以将一大块 JS 放入 Angular 视图中……或者这是我需要自定义*指令*或*过滤器*的地方？

现在我可以有 2 个视图并适当地处理路由，但更希望有一个视图以避免代码重复。

那么处理这样的事情的 Angular 方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:01:26.960

当新版本和可编辑版本之间的差异不太复杂时，我使用以下方法来最大程度地减少表单重复：

```
<form ng-submit="mySubmitMethod()">
<!-- fields models bound to "activeItem"-->
  <button >
     <span ng-show="editMode>Update</span>
      <span ng-show="!editMode">Create</span>
   </button>
</form> 
```

```
 $scope.activeItem={};
    $scope.editMode=false;
    $scope.mySubmitMethod=function(){
        if($scope.editMode){
            /* do update of existing*/
        }else{
           /* process new form*/
       }
        $scope.resetform()
    });

   $scope.EditUser=function(user){
        $scope.editMode=true;
        $scope.activeItem=angular.copy( user);
   })

  $scope.newUser=function(){
        $scope.editMode=false;
        $scope.activeItem={};
   }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T19:32:05.477

我希望每个路线都有单独的路线。要将编辑和新 HTML 放在一起，您可以使用[ng-switch](http://docs.angularjs.org/api/ng.directive%3angSwitch)与基本上两个模板，但考虑将它们都放在一个部分中，以便您可以 ng-include 它在两个不同的视图中：

```
<span ng-switch on="mode">
  <span ng-switch-when="edit">
    <h1>{{fixtureType.Label}}</h1>
    <form>
      <span>Fixture Type Details</span>
        <label>Type</label>
        <input ng-model='fixtureType.Type' ...>
    ...
  </span>
  <span ng-switch-default>
    <h1>New Fixture Type</h1>
    <form>
         <span>Fixture Type Details</span>
         <label>Type</label>
         <input ng-model="fixtureType.Type" ...>
    ...
  </span>
</span> 
```

# excel - 根据单独单元格范围中的条件对单元格范围使用 RANK 函数

> ID：15978997
> 
> 赞同：0
> 
> 时间：2013-04-12T19:05:29.490
> 
> 标签：excel, excel-2010, rank

我对 MS Excel 2010 中的 RANK 函数有疑问。我有一个大工作表，我想根据列中的值对其行进行排名。这些值可以是正值或负值。[我在这里](http://www.mrexcel.com/forum/excel-questions/303127-ranking-positive-negative-but-not-zeros.html)找到了有用的建议，它解释了如何对列中的值进行排名，同时从排名和排名计数中排除所有等于零的值。他们使用以下公式：

```
IF(O24<0, RANK(O24,$O$24:$O$29) - COUNTIF($O$24:$O$29,0), IF(O24=0, "", RANK(O24,$O$24:$O$29))) 
```

这很好用，但如果我可以仅在同一行但不同列中的相应值满足某些标准时对这些值进行排名，那就更好了。

这样的事情可能吗？我该怎么做？我将如何更新上面的示例公式以使更改生效？非常感谢您的帮助。

PS：我试过放一张桌子，但它并没有真正起作用，对不起......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:41:47.403

您可以使用`COUNTIFS`函数根据另一列中的条件进行排名，例如复制下来的第 24 行中的这个公式[编辑以包括额外的 IF）

`=IF(O24=0,"",IF(N24="x",COUNTIFS(O$24:O$29,">"&O24,O$24:O$29,"<>0",N$24:N$29,"x")+1,""))`

这将在列 N =“x”的情况下从高到低排列，忽略零值

请参阅[此示例](https://www.dropbox.com/s/jbprbp6arwtlbj6/rank_example.xlsx)列 N 和 O 包含随机值 - 按 F9 重新生成新的随机值，Q 列中的公式结果将相应更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:32:45.243

每当您添加新的排名标准时，当然可以继续创建更复杂的公式。但是，通过使用单步公式创建中间列，您将使电子表格更易于理解，并且更易于添加新条件或编辑现有条件。

我的建议是创建一个不包括零的列（假设这是在 P 列中）：`=IF(O24 = 0, "", O24)`

然后在 R 列中，消除负值（这一步是不必要的，但你原来的公式做了类似的事情）：`=IF(P24 = "", "", P24 - MIN(0, MIN($O$24:$O$29)))`

现在在 S 列中，添加您的最新标准：`=IF(OR(R24="", [enter newest criteria here]), "", R24)`

最后，T 列只对选中的行进行排序：`=IF(S24="", "", RANK(S24, S$24:S$29))`

如果暴露列 P、R 和 S 很麻烦，您可以随时隐藏它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T13:34:14.553

使用表格格式对 barry houdini 的答案进行了改写。Value_Col 是包含要排名的值的列。Group_Column 是按值分组的列，用于在组内排名

=COUNTIFS([Value_Col], ">"&[@[Value]], [Value_Column],"<>0", [Group_Column], [@[Group]]) +1

# asp.net-web-api - 在 Web API 中正确实现 IAuthorizationFilter

> ID：15978999
> 
> 赞同：23
> 
> 时间：2013-04-12T19:05:38.287
> 
> 标签：asp.net-web-api

我无法弄清楚如何使用 System.Web.Http.Filters 中的 IAuthorizationFilter 在 Web API 中实现授权过滤器。

这是我编写的一个简单过滤器，用于响应所有非 https 请求，并带有 403 禁止响应：

```
public class HttpsFilter : IAuthorizationFilter {
    public bool AllowMultiple {
        get {
            return false;
        }
    }

    public Task<HttpResponseMessage> ExecuteAuthorizationFilterAsync( HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation ) {
        var request = actionContext.Request;

        if ( request.RequestUri.Scheme != Uri.UriSchemeHttps ) {
            HttpResponseMessage response = request.CreateResponse( HttpStatusCode.Forbidden );
            response.Content = new StringContent( "<h1>HTTPS Required</h1>", Encoding.UTF8, "text/html" );
            actionContext.Response = response;

            return new Task<HttpResponseMessage>( delegate() {
                return response;
            } );
        }
        else
            return continuation();
    }
} 
```

到目前为止我所写的运行，但是当我尝试通过常规 http 访问 api 时，它只是挂起，我从来没有得到响应。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T19:19:58.497

对于您的场景，您可以简单地从“System.Web.Http.AuthorizeAttribute”派生。

例子：

```
public class HttpsFilterAttribute : System.Web.Http.AuthorizeAttribute
{
    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T19:10:32.200

您要么需要将任务保存到变量中并`task.Start()`在返回之前调用该方法，要么使用该`Task<HttpResponseMessage>.Factory.StartNew(Action action)`方法创建任务。