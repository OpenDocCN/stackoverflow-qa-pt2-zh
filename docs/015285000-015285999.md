# StackOverflow 问答 15285000-15285999

# html - WebGL Three.js：几何面上的纹理调整

> ID：15285001
> 
> 赞同：1
> 
> 时间：2013-03-08T01:08:17.043
> 
> 标签：html, 3d, three.js, webgl

我想在二十面体几何的每个面上写文字

我能够生成纹理并将纹理应用于所有面：

```
for ( var i = 0; i < geometry.faces.length; i ++ ) {
geometry.faces[i].materialIndex = i;
materials.push( new THREE.MeshBasicMaterial( { overdraw: true, map:  getTexture(i), wireframe: true, wireframeLinewidth: 1} ) );
 }

// 3D element   
element = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial(materials) ); 
```

然而，每个纹理都覆盖了另一个......而且我无法正确对齐它们

[http://jsfiddle.net/jzbf7/](http://jsfiddle.net/jzbf7/)

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:28:16.837

您需要了解如何设置 UV `IcosahedronGeometry`- 它们与用于 的 UV 非常相似`SphereGeometry`，其中世界地图将覆盖整个球体。

`CubeGeometry`这与纹理映射到*每个面*的 UV 非常不同。

尝试使用更新的小提琴亲自查看：http: [//jsfiddle.net/jzbf7/2/](http://jsfiddle.net/jzbf7/2/) （如果球体渲染太暗，请再次渲染 - 颜色是随机的。）

`IcosahedronGeometry`此外， UV 贴图中存在错误。这可以在“接缝”处看到。

三.js r.56

# visual-studio-2012 - 如何让 Visual Studio 2012 在 Windows 应用商店应用程序的 Debug.Assert 上中断？

> ID：15285005
> 
> 赞同：2
> 
> 时间：2013-03-08T01:08:50.223
> 
> 标签：visual-studio-2012, windows-store-apps, assert

我正在使用 Visual Studio 2012 并开发 Windows Store 应用程序。我添加了一些使用`Debug.Assert`.

当我在调试器中运行应用程序时，我希望断言失败要么引发异常，要么导致调试器中断。但是，他们目前只将消息输出到输出窗口，这对我来说几乎没有用。

**如何使调试器在断言失败时中断或抛出异常？**

我考虑过使用代码合同，但它显着减慢了我的构建时间，所以我不想使用它。

我试过`Contract.Assert`了，但它会产生一条 Windows 桌面错误消息，当 Windows Store 应用程序全屏时我看不到。

我也考虑过为开发人员的假设/断言抛出异常，但我不希望在发布代码中出现这种情况。

# ruby-on-rails - 你如何使用 Capybara 测试 js 重定向？

> ID：15285007
> 
> 赞同：3
> 
> 时间：2013-03-08T01:08:57.970
> 
> 标签：ruby-on-rails, capybara

在我的控制器中，使用以下代码完成重定向：

会话控制器

```
def create
  render js: "window.location.pathname = #{home_path.to_json}"
end 
```

`login`但是，当我运行 capybara 时，提交发生后它不会进入 home_page ：

```
describe "Login Test", :js => true do
  before do
    @user = FactoryGirl.create(:user)
  end
  it 'should show the users first name' do
    visit login_path
    fill_in 'email', with: @user.email
    fill_in 'password', with: @user.password
    click_button "Log In"
    save_and_open_page
    assert page.has_content? @user.first_name
  end
end 
```

当我通过添加`launchy gem`并运行进行故障排除时，`save_and_open_page`我得到一个包含以下文本的页面： `window.location.pathname = "/"`

Capybara 给我以下错误： `Capybara::ElementNotFound: Unable to find xpath "/html"`

似乎水豚永远不会通过登录按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:15:39.323

你试过这个吗？

```
respond_to do |format|
  format.js { render :js => 'window.location.href = "#{home_path.to_json}"' }
end 
```

# tcp - 关于 TCP SYN flood：为什么半开连接比已建立的连接更糟糕？

> ID：15285008
> 
> 赞同：1
> 
> 时间：2013-03-08T01:09:00.087
> 
> 标签：tcp, ddos, denial-of-service

这不是为了黑客目的而要求的。我正在学习计算机科学，我只是好奇。

所以.. 当主机 A 向主机 B 发送 TCP SYN 时，主机 B 分配空间用于接收缓冲区等，将 SYNACK 发送回主机 A，主机 A 也分配这些空间，然后将 ACK 发送回主机 B。然后建立连接。

但是为什么半开连接（从 A 发出的最后一个 ACK​​ 永远不会发送）比完全建立的连接更能破坏主机 B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:25:14.580

半打开连接不会比完全打开的连接占用更多的资源，而且它们中的一堆不会比完全打开的连接更容易、快速或确定地压倒服务器。

但是您只需要向服务器发送一个数据包即可使其创建半开放连接，而您需要完成一次 TCP 握手（1 次发送，1 次接收，另一次发送）以创建完全开放的连接。因此，您可以从欺骗性 IP 地址创建大量半开连接，或者从 DDoS 平台快速生成数百万个连接。您不必处于收到`SYN|ACK`回复的位置。您甚至不必关心服务器是否能够足够快地产生这些回复。

这假设没有 SYN cookie 或其他针对半开连接的防御措施。

# pyrocms - PyroCMS 自定义模块布局

> ID：15285009
> 
> 赞同：1
> 
> 时间：2013-03-08T01:09:15.320
> 
> 标签：pyrocms

我创建了一个名为 Drawings 的自定义模块。我想在前端给它自己的主题布局，所以我遵循了我在[这里](https://stackoverflow.com/questions/9546499/pyrocms-custom-module-design-clear-css-formating-from-default-design/9560570#9560570)找到的建议——我在我的主题中放置了一个名为 Drawings.html 的布局文件。

这对前端产生了正确的影响，但导致了我一直在努力解决的其他问题和问题：

1.  我的模块的后端管理部分现在使用 Drawings.html 布局，这完全破坏了它的功能。如何为我的模块前端设置特定布局，但保留标准的管理后端布局（与[示例模块](https://github.com/pyrocms/sample)教程中的后端实现相同）？

2.  我在[模板库](http://docs.pyrocms.com/2.1/manual/developers/tools/template-library)中阅读了以下内容：“使用 Public_Controller 和 Admin_Controller 时，布局已设置。” 也许解决方案涉及以某种方式在这些控制器中使用 set_layout 函数？到目前为止，我所有的尝试都失败了。

3.  我觉得我做错了，因为现在我的模块不是模块化的。例如，在主题中创建 Drawings.html 布局文件后，该布局文件中的语句`{{ theme:css file="drawings.css"}}`会在我的主题中搜索这些资源。所以我必须将这些 JS 和 CSS 资源放在我的主题中，而不是放在我模块的 CSS 和 JS 文件夹中。如何在模块的 JS 和 CSS 文件夹中保留和访问我的资源？

我不知道这应该如何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:10:09.890

当您使用前端控制器时，使用这样的 philsturgeon 模板库进行布局

```
function index(){
    $this->template->set_layout('drawing')
                   ->build('yourview');
} 
```

这样您就可以为您的应用程序加载自定义布局。

# regex - 在 Perl 中将正则表达式匹配保存到数组中

> ID：15285011
> 
> 赞同：-2
> 
> 时间：2013-03-08T01:09:31.177
> 
> 标签：regex, arrays, perl, pattern-matching

我希望你能指导我，我做错了。

我有例如：

```
my $text = "<some tag>  stuff here> </some tag> mer mer <some tag> 'more stuff' </some tag>";

 @b =($text =~ m/s(.)uff/gsi);
 print "array B, size: ",  @b+0,  ", elements: ";
 print join (" ,", @b);
 print "\n";

 @c =($text =~ m/<some tag>(.+)<\/some tag>/g);
 print "array C, size: ",  @c+0,  ", elements: ";
 print join (", ", @c);
 print "\n"; 
```

输出如下：

```
array B, size: 2, elements: t ,t
array C, size: 1, elements:   stuff here> </some tag> mer mer <some tag> 'more stuff' 
```

我对数组 C 的输出感兴趣

```
size 2: , elements stuff here , 'more stuff' 
```

为什么它会跳过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:13:22.463

```
/<some tag>(.+?)<\/some tag>/ 
```

如果它们不能嵌套，就可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:23:49.793

为了在字符串中找到最短匹配，使用*非贪婪*搜索`(.+?)`。

否则，对于最长的匹配字符串，您可以使搜索变得*贪婪* `(.+)`。

为了更好地理解，请参阅[此](https://stackoverflow.com/questions/15106250/how-does-pattern-matching-works-in-perl/15106472#15106472)链接。

因此，正确的答案将是池上给出的答案。

# objective-c - iOS如何通过一个循环将许多事件添加到日历中

> ID：15285014
> 
> 赞同：3
> 
> 时间：2013-03-08T01:10:12.310
> 
> 标签：objective-c, cocoa-touch, eventkit

我知道下面的代码对于在 iOS 日历中创建和添加事件非常有用。它工作得很好，我可以添加许多事件，但是对于一个事件，我必须按一下按钮。

```
- (IBAction)add_event:(id)sender{     
    EKEventStore *eventStore=[[EKEventStore alloc] init];
    EKEvent *addEvent=[EKEvent eventWithEventStore:eventStore];
    addEvent.title=@"title";
    addEvent.startDate = [NSDate date];
    addEvent.endDate = [addEvent.startDate dateByAddingTimeInterval:600];
    [addEvent setCalendar:[eventStore defaultCalendarForNewEvents]];
    NSError *err;
    [eventStore saveEvent:addEvent span:EKSpanThisEvent error:&err];
    if (err == nil) {
        NSString* str = [[NSString alloc] initWithFormat:@"%@", addEvent.eventIdentifier];
        NSLog(@"Event ID: %@" , str );
    }
    else {
        NSLog(@"Error %@",err);
    } 
} 
```

然后我尝试在按钮触摸事件上添加许多带有while循环的事件，我编辑的代码在这里：

```
- (IBAction)add_event:(id)sender{
    int i = 0;
    while(i < 100){
        EKEventStore *eventStore=[[EKEventStore alloc] init];
        EKEvent *addEvent=[EKEvent eventWithEventStore:eventStore];
        addEvent.title=@"title";
        addEvent.startDate = [NSDate date];
        addEvent.endDate = [addEvent.startDate dateByAddingTimeInterval:600]; 
        [addEvent setCalendar:[eventStore defaultCalendarForNewEvents]]; 
        NSError *err;
        [eventStore saveEvent:addEvent span:EKSpanThisEvent error:&err];
        if (err == nil) {
            NSString* str = [[NSString alloc] initWithFormat:@"%@", addEvent.eventIdentifier];
            NSLog(@"Event ID %d: %@",i, str);
        }
        else {
            NSLog(@"Error %@",err);
        }
        i++;
    }
} 
```

我想在日历中添加 100 个事件，但只有 82 个事件添加成功，所有 83 号事件都会出错。这是我的日志屏幕：

```
.......

2013-03-07 15:08:07.742 MyDTUSchedule[3066:c07] Event ID 79: BBCF7782-5D60-42D7-8478-EF80604FBF41:B0124DEE-EC5F-40B9-B9F8-312FA07D8059
2013-03-07 15:08:07.756 MyDTUSchedule[3066:c07] Event ID 80: BBCF7782-5D60-42D7-8478-EF80604FBF41:613F794D-67BE-4704-BEC2-7439E77965F0
2013-03-07 15:08:07.781 MyDTUSchedule[3066:c07] Event ID 81: BBCF7782-5D60-42D7-8478-EF80604FBF41:2FEF3B6D-6AC0-4058-AA79-BB46FEBDF732
2013-03-07 15:08:07.810 MyDTUSchedule[3066:c07] Error Error Domain=EKErrorDomain Code=1 "No calendar has been set." UserInfo=0x7e6a380 {NSLocalizedDescription=No calendar has been set.}
2013-03-07 15:08:07.812 MyDTUSchedule[3066:c07] Error Error Domain=EKErrorDomain Code=1 "No calendar has been set." UserInfo=0x7e6a9d0 {NSLocalizedDescription=No calendar has been set.}
2013-03-07 15:08:07.813 MyDTUSchedule[3066:c07] Error Error Domain=EKErrorDomain Code=1 "No calendar has been set." UserInfo=0x7e6c310 {NSLocalizedDescription=No calendar has been set.}
2013-03-07 15:08:07.815 MyDTUSchedule[3066:c07] Error Error Domain=EKErrorDomain Code=1 "No calendar has been set." UserInfo=0x7e6d5d0 {NSLocalizedDescription=No calendar has been set.}

........... 
```

你能帮我解决这个问题吗？我在 iOS Simulator 5.0 中运行此代码。iOS Simulator 6.0 出现同样的错误，但事件编号为 124

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:45:05.827

可能是内存问题。`eventStore`在每次循环迭代中分配并且从不释放。

尝试`EKEventStore *eventStore=[[EKEventStore alloc] init];`从循环中取出。

# haskell - 有没有一种很好的方法来编写这个涉及单例数据类型的 Template Haskell 代码？

> ID：15285016
> 
> 赞同：6
> 
> 时间：2013-03-08T01:10:27.697
> 
> 标签：haskell, template-haskell

我刚刚开始使用 Template Haskell（我终于有了一个用例，耶！）现在我在认知上陷入了困境。

我想要做的是生成表单的单例数据类型声明

```
data $V = $V deriving (Eq,Ord) 
```

从名称`V`开始（希望以大写字符开头！）。明确地说，我正在尝试编写一个`declareSingleton`类型的函数`String -> DecsQ`（我应该在这里提到我正在使用 GHC 7.6.1，template-haskell 版本 2.8.0.0），以便拼接

```
$(declareSingleton "Foo") 
```

相当于

```
data Foo = Foo deriving (Eq,Ord) 
```

* * *

我已经让以下代码工作并做我想做的事，但我对它不是很满意：

```
declareSingleton :: String -> Q [Dec]
declareSingleton s = let n = mkName s in sequence [
        dataD (cxt []) n [] [normalC n []] [''Eq,''Ord]
   ] 
```

我希望得到类似以下的工作：

```
declareSingleton :: String -> Q [Dec]
declareSingleton s = let n = mkName s in 
    [d| data $n = $n deriving (Eq,Ord) |] 
```

我尝试过各种, , ,的组合`$s`，但无济于事（但并非详尽无遗！） ，所以我不得不假设我对 Template Haskell 工作原理的心智模型过于简单。`$v``$(conT v)``v``'v`

我是否在这里遗漏了一些明显的东西，我是否以某种基本方式混淆了类型名称和构造函数名称，我可以用`declareSingleton`一种很好的（r）方式编写吗？

如果是，如何；如果不是，为什么不呢？

（旁注：Haskell 模板 API 变化很快，我为此感到高兴——我希望这个简单的类型最终实现一个具有关联类型族的多参数类型类——但 API 目前正在经历的流失并没有' t 使搜索教程变得容易！TH 在 6.12.1 或 7.2（大多数现有教程的编写时）中的实现方式与现在的工作方式有很大的不同......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:37:59.037

从[模板 Haskell 文档](http://www.haskell.org/ghc/docs/7.6.2/html/users_guide/template-haskell.html)中：

> 拼接可以代替
> 
> *   一种表达; 拼接后的表达式必须是 Q Exp 类型
> *   一种类型；拼接后的表达式必须是 Q Typ 类型
> *   顶级声明列表；拼接后的表达式必须为 Q [Dec] 类型

因此，例如构造函数名称根本无法在当前版本的 Template Haskell 中拼接。

我认为您可以做很多事情来简化这个用例（除非将整个声明构造为字符串并将其转换为`Dec`via [`toDec`](http://hackage.haskell.org/packages/archive/haskell-src-meta/latest/doc/html/Language-Haskell-Meta-Syntax-Translate.html#v%3atoDec)in [`haskell-src-meta`](http://hackage.haskell.org/package/haskell-src-meta)）。

您可以考虑简单地将声明的不同部分绑定到局部变量。虽然更冗长，但它使代码更易于阅读。

```
declareSingleton :: String -> Q [Dec]
declareSingleton s = return [DataD context name vars cons derives] where
    context  = []
    name     = mkName s
    vars     = []
    cons     = [NormalC name fields]
    fields   = []
    derives  = [''Eq, ''Ord] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T22:51:00.293

解析插值字符串而不是构造 AST 的 hack：

```
makeU1 :: String -> Q [Dec]
makeU1 = makeSingletonDeclaration >>> parseDecs >>> fromRight >>> return

makeSingletonDeclaration :: String -> String
makeSingletonDeclaration name = [qq|data {name} = {name} deriving (Show)|] 
```

在哪里：

```
parseDecs :: String -> Either String [Dec] 
```

用法：

```
makeU1 "T"
main = print T 
```

它需要这些软件包：

```
$ cabal install haskell-src-exts
$ cabal install haskell-src-meta
$ cabal install interpolatedstring-perl6 
```

可运行脚本：

[https://github.com/sboosali/haskell/blob/0794eb7a52cf4c658270e49fa4f0d9e53c4b0ebf/TemplateHaskell/Splice.hs](https://github.com/sboosali/haskell/blob/0794eb7a52cf4c658270e49fa4f0d9e53c4b0ebf/TemplateHaskell/Splice.hs)

# jquery - 自动完成来自远程源的数据

> ID：15285019
> 
> 赞同：0
> 
> 时间：2013-03-08T01:10:51.173
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-autocomplete, jquery-ui-autocomplete

我目前正在使用 jQuery UI 自动完成小部件，从远程源中提取数据。
我的问题是，我以前只需要预加载纽约数据。
但现在，我添加了新城市；波士顿和洛杉矶。
所以我需要 index.asp?DESTINATION= 是 newyork 或 boston 或 los angeles 基于用户将键入的内容，以便加载正确的数据。
我应该如何修改它？

顺便说一句，我已经尝试将其更改为；`url: "index.asp?DESTINATION=" + $("#location").val(),`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:36:24.947

安德鲁·惠特克在评论中回答了这个问题。

`DESTINATION= + request.term`

# java - 将参数值作为变量的值传递

> ID：15285025
> 
> 赞同：0
> 
> 时间：2013-03-08T01:11:39.640
> 
> 标签：java, variables, parameters

基本上我正在制作一个需要为角色添加健康的游戏。当玩家击中蜘蛛的命中框时，我希望改变生命值并重新绘制我的框架。我觉得我做得对。这是我的代码：

`Frame.java`：

```
public static int redHealth;
public static int blueHealth;

public static void getBlueHealth(int health) {
    health = redHealth;
}

public static void getRedHealth(int health) {
    health = blueHealth;
}

// Create health labels
public static JLabel redHealthLabel = new JLabel("Health: " + redHealth);
public static JLabel blueHealthLabel = new JLabel("Health: " + blueHealth); 
```

`Key.java`：

```
if (Frame.spiderObj.intersects(Frame.blueCharacterObj)) {
    System.out.println("hit spider");
    Frame.getBlueHealth(97);
    Frame.frame.repaint();
    System.out.println(Frame.redHealth + "" + Frame.blueHealth);
} 
```

如您所见，我将`97`作为参数传递给`getRedHealth()`and`getBlueHealth()`方法，然后将其设置为等于`redHealth`and `blueHealth`。但是，当我运行游戏并击中蜘蛛时，它会打印出来`hit spider`但不会更新健康状况。

有什么帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:21:24.453

您的大问题是您试图“通过引用传递”来填充`health`而不是实际返回它。

应该：

```
public static int getBlueHealth() {
    return blueHealth;
} 
```

另外：您可能不需要吸气剂，因为 bluehealth 已经是`public static`.

即使您可以通过引用传递，使用常量调用它也会失败。从您的调用代码中不清楚您是否想要获取器或设置器。

# c++ - C++ Eclipse Mac Hello World

> ID：15285031
> 
> 赞同：0
> 
> 时间：2013-03-08T01:12:18.490
> 
> 标签：c++, eclipse, xcode, gcc

我正在使用 Lion、Mac OX X 10.7.5 和 Eclipse Juno 来尝试学习使用 C++ 进行编程。我使用 hello world 模板创建了一个新项目。当我尝试运行 hello world 程序时，出现了 3 个错误：

> 在 PATH 中找不到程序“make” 在 PATH 中找不到
> 程序“gcc” 在 PATH 中找不到
> 程序“g++”

我也下载了 Xcode。我选择了工具链 MACOSX GCC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:19:55.403

下载 Xcode 后，您还需要从 Xcode 中下载命令行工具包，它将安装必要的`make`程序和`clang`编译器。

要下载它，请转到 Xcode >> Preferences >> 'Downloads Tab' 并安装`Command line tools`.

# python - 带有 vim 的 autopep8

> ID：15285032
> 
> 赞同：11
> 
> 时间：2013-03-08T01:12:34.993
> 
> 标签：python, vim, pep8

有没有办法自动将[autopep8](https://github.com/hhatto/autopep8)应用于 vim 中正在编辑的文件？我有以下[vimrc](https://github.com/mictadlo/vimrc4GO/blob/master/.vimrc)。

先感谢您。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-05-20T14:33:09.613

使用 autopep8 的正确方法是依赖 vim "formatprg" 设置。因此，您将下面的行添加到 vimrc：

```
au FileType python setlocal formatprg=autopep8\ - 
```

现在，当您在 python 中选择行并点击时`gq`（默认映射，除非您重新映射它）。它将过滤这些行`autopep8`并在适当的位置写入格式良好的版本。

上面的设置还使其适用于 vim 对象和 vim 动作，因此您可以使用`gqap`.

做你可以做的整个文件`gggqG`

命令末尾的连字符“-”是使 autopep8 从标准中读取行所必需的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T08:38:18.503

autopep8 包含在[python-mode](https://github.com/klen/python-mode "蟒蛇模式")中。

调用 :PymodeLintAuto 或映射它：

```
" Automatically fix PEP8 errors in the current buffer:
noremap <F8> :PymodeLintAuto<CR> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T08:31:07.677

您应该能够执行以下操作以通过 autopep8 运行当前文件：

```
:!autopep8 -i expand("%") 
```

如果您想在写入每个 python 文件时自动执行此操作，您可以将其添加到您的`vimrc`：

```
if has("autocmd")
    autocmd BufWritePost *.py !autopep8 -i expand("%")
endif 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-15T13:04:53.400

提交问题时该插件还不存在，但现在有 vim-autopep8。

[https://github.com/tell-k/vim-autopep8](https://github.com/tell-k/vim-autopep8)

# c++ - 如何调用类函数类（构造函数完成所有工作的类）

> ID：15285033
> 
> 赞同：1
> 
> 时间：2013-03-08T01:12:35.243
> 
> 标签：c++

> 我问这个只是为了知道 - 不一定我的代码最终会使用这种策略。

假设我有一个类似的类：

```
class Calc
{
public:
    Calc( int &X, int &Y, CalcType aType )
    {
        int h = Helper( X );
        // All the hard work will be done here.  
    }

    int Helper( int I ) { // Do something }

    enum CalcType
    {
        Add,
        Sub,
        Mul,
        Div
    };
}; 
```

将优化删除此调用：

```
Calc( X, Y, Calc::Add ); 
```

它会删除这个：

```
Calc iCalc( X, Y, Calc::Add ); // iCalc will be unused hence after. 
```

有什么理由不做这样的事情（在构造函数中完成工作）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:27:09.703

答案是否定的，仅仅因为没有使用对象并不意味着实例化将被优化。

如果构造函数为空并且该对象从未使用过或仅作为临时对象创建，则智能编译器可以将其优化掉。在你的情况下，因为“ //所有的努力都将在这里完成。”情况并非如此。

# ios - MagicalRecord - 速记适用于某些实体，但不适用于其他实体

> ID：15285040
> 
> 赞同：2
> 
> 时间：2013-03-08T01:13:27.847
> 
> 标签：ios, core-data, nsmanagedobject, magicalrecord

在我的前缀文件中，我有这个：

```
#define MR_SHORTHAND
#import "CoreData+MagicalRecord.h"

//this causes an unrecognized selector sent to instance crash
Apple *apple = [Face findFirstByAttribute:@"appleId" withValue:value];

//this works fine
Apple *apple = [Face MR_findFirstByAttribute:@"appleId" withValue:value];

//however this also works fine:
Orange *orange = [Face findFirstByAttribute:@"orangeId" withValue:value]; 
```

为什么我可以对某些实体使用速记而不对其他实体使用速记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-18T14:54:41.853

以防万一有人在 2014 年和 2.2+ 版偶然发现此搜索结果，您需要安装以使用速记的 Cocopod 是

`pod 'MagicalRecord/Shorthand', '~> 2.2';`

根据以下线程

[https://github.com/magicalpanda/MagicalRecord/issues/668](https://github.com/magicalpanda/MagicalRecord/issues/668)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:34:38.570

OK, I don't know if this is any help to you but I just fixed the problem I was having.

I had an entity called "EventMessage" and I didn't like the name so I renamed it to "Message".

This is when I started having the problems.

It was only running the app to the simulator from AppCode that I saw a message telling me that "Message is implemented twice".

I renamed the entity (and all the associated classes) back to "EventMessage" and it's working fine now.

Strange that it even compiled before though?!

Anyway, give that a go. Rename your Face entity to something that you know is unique "SoleilFace" for example and see if that fixes it.

# c# - LogicalTreeHelper.GetChildren - ObservableCollection Move() 导致 DataTemplate 中的 ContentControl 丢失其内容？

> ID：15285041
> 
> 赞同：2
> 
> 时间：2013-03-08T01:13:32.840
> 
> 标签：c#, wpf, recursion, observablecollection, visualtreehelper

这很奇怪。下面代码的重点是支持 attachProperty，如果容器的任何子项已获得焦点，它将通知容器。

即，我在其内容中的某处有一个带有文本框的网格，如果其中一个控件获得焦点，我想将网格变为蓝色。

我有一个带有 ItemsTemplate 的 ListView。ItemsTemplate 是一个 DataTemplate，其中包含一些东西……但其中之一是 ContentControl。

例子：

```
<ListView>
   <ListView.ItemTemplate>
      <DataTemplate>
         <Grid>
           <Border>
            <ContentControl Content="{Binding Something}"/>
           </Border>
         </Grid>
      </DataTemplate>
   </ListView.ItemTemplate>
</ListView> 
```

ContentControl 上的 Binding 应该显示某种类型的 UserControl。创建后...工作得很好。如果我从 Grid 元素开始递归迭代 listViewItem 的模板......它也会遍历 ContentControl 的“内容”。

但是...一旦我对 ListView ItemsSource 绑定到的 ObservableCollection 执行 .Move()，根据 LogicalTreeHelper，ContentControl.Content 为空。

是什么赋予了？

如果我检查 ContentControl，它会向我显示内容......但 LogicalTreeHelper.GetChildren 返回并清空枚举器。

我很困惑...

谁能解释为什么会这样？

LogicalTreeHelper 迭代器方法

```
public static void applyFocusNotificationToChildren(DependencyObject parent)
{
  var children = LogicalTreeHelper.GetChildren(parent);

  foreach (var child in children)
  {
    var frameworkElement = child as FrameworkElement;

    if (frameworkElement == null)
      continue;

    Type frameworkType = frameworkElement.GetType();

    if (frameworkType == typeof(TextBox) || frameworkType == typeof(ListView) ||
      frameworkType == typeof(ListBox) || frameworkType == typeof(ItemsControl) ||
      frameworkType == typeof(ComboBox) || frameworkType == typeof(CheckBox))
    {
      frameworkElement.GotFocus -= frameworkElement_GotFocus;
      frameworkElement.GotFocus += frameworkElement_GotFocus;

      frameworkElement.LostFocus -= frameworkElement_LostFocus;
      frameworkElement.LostFocus += frameworkElement_LostFocus;

      // If the child's name is set for search
    }

    applyFocusNotificationToChildren(child as DependencyObject);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:04:23.147

阿罗哈，

以下是如何解决问题的建议：

我不确定 GotFocus 事件的拼写是否正确，但它是一个 RoutedEvent，您可以在可视化树中的任何位置使用它。

如果您的一个项目获得焦点，您的 ListView 将收到通知，并且在处理程序中您可以做任何您想做的事情。

这个怎么样：

```
<ListView GotFocus="OnGotFocus">
   <ListView.ItemTemplate>
      <DataTemplate>
         <Grid>
           <Border>
            <ContentControl Content="{Binding Something}"/>
           </Border>
         </Grid>
      </DataTemplate>
   </ListView.ItemTemplate>
</ListView> 
```

这只是一些随机逻辑来演示您可以做什么。

```
public void OnGotFocus(object sender, RoutedEventArgs e)
{
  TreeViewItem item = sender as TreeViewItem;

  if(((MyViewModel)item.Content).SomeColor == "Blue")
  {
    Grid g = VisualTreeHelper.GetChild(item, 0) as Grid;
    g.Background = Colors.Blue;
  }
} 
```

GotFocus 是一个 RoutedEvent，如果被触发，它会在视觉树上冒泡。因此，在某处捕获事件并检查哪个是触发事件的原始源对象。或者检查触发事件的对象的 ViewModel 属性是什么。

# api - 使用实时数据 Matlab 进行错误处理

> ID：15285043
> 
> 赞同：1
> 
> 时间：2013-03-08T01:13:44.400
> 
> 标签：api, matlab, live

我正在使用返回下一班火车的实时数据 API。我计划为用户提供接下来 5 趟到达的火车。如果到达的列车少于 5 列，您如何处理？我在想办法时遇到了麻烦，我在想用 if 语句的办法，但不知道如何设置它们。

```
time1Depart = dataReturnedFromLiveAPI{1,1}.orig_departure_time;
time2Depart = dataReturnedFromLiveAPI{1,2}.orig_departure_time;
time3Depart = dataReturnedFromLiveAPI{1,3}.orig_departure_time;
time4Depart = dataReturnedFromLiveAPI{1,4}.orig_departure_time;
time5Depart = dataReturnedFromLiveAPI{1,5}.orig_departure_time;

time1Arrival = dataReturnedFromLiveAPI{1,1}.orig_arrival_time;
time2Arrival = dataReturnedFromLiveAPI{1,2}.orig_arrival_time;
time3Arrival = dataReturnedFromLiveAPI{1,3}.orig_arrival_time;
time4Arrival = dataReturnedFromLiveAPI{1,4}.orig_arrival_time;
time5Arrival = dataReturnedFromLiveAPI{1,5}.orig_arrival_time; 
```

现在的代码使用一个从 1:numoftrains 开始的矩阵，但我只使用前五个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:29:11.873

将单个值分配给单独的变量是一种不好的做法。如果根据 和 的类将所有相关值传递给向量或元胞数组，则效果会`orig_departure_time`更好`orig_arrival_time`。

它看起来像是`dataReturnedFromLiveAPI`一个结构单元数组。然后你可以这样做：

```
timeDepart = cellfun(@(x), x.orig_departure_time, ...
    dataReturnedFromLiveAPI(1,1:min(5,size(dataReturnedFromLiveAPI,2))), ...
    'UniformOutput',0 );
timeArrival = cellfun(@(x), x.orig_arrival_time, ...
    dataReturnedFromLiveAPI(1,1:min(5,size(dataReturnedFromLiveAPI,2))), ...
    'UniformOutput',0 ); 
```

然后你如何一个一个地访问这些值

```
time1Depart = timeDepart{1}; 
```

如果`orig_departure_time`和`orig_arrival_time`是数字标量，您可以使用`...'UniformOutput',1...`. 您将获得作为向量的输出，并且可以使用`timeDepart(1)`.

# easeljs - EaselJS 没有用一个以上的对象实例更新舞台

> ID：15285045
> 
> 赞同：1
> 
> 时间：2013-03-08T01:13:58.720
> 
> 标签：easeljs

我一定是做错了什么，但是当我添加多个时钟对象实例时， setTime() 停止工作。你可以把它包装成 html 和 body 标签来看看我在说什么。这是代码：`

```
 function Clock(){
            this.SIZE=20;
            this.width=this.SIZE*2;
            this.height=this.SIZE*2;
            this.time=null;
            this.hourH=null;
            this.minuteH=null;
            this.initialize();
        }
        Clock.prototype = new createjs.Container(); 

        Clock.prototype.initialize = function () {

              var back = new createjs.Shape();

              var clockColor=createjs.Graphics.getRGB(220, 220, 220);
                var g = back.graphics;
                    g.setStrokeStyle(1);
                    g.beginStroke(createjs.Graphics.getRGB(240, 240, 240));
                    g.beginFill(createjs.Graphics.getRGB(255,255,255));
                    g.drawCircle(this.SIZE, this.SIZE, this.SIZE);
                    g.endStroke();
                    g.beginStroke(createjs.Graphics.getRGB(230, 230, 230));
                    g.drawCircle(this.SIZE, this.SIZE, this.SIZE*0.85);
                this.addChild(back);    
                this.hourH=new createjs.Shape();
                this.minuteH=new createjs.Shape();
                this.addChild(this.hourH);
                this.hourH.x=this.hourH.y=this.minuteH.x=this.minuteH.y=this.SIZE;
                this.addChild(this.minuteH);
                this.hourH.graphics.setStrokeStyle(3, "round", "round");
                this.hourH.graphics.moveTo (0, 0);
                this.hourH.graphics.beginStroke(createjs.Graphics.getRGB("black"));
                this.hourH.graphics.lineTo(0, -this.SIZE*0.6);
                this.hourH.graphics.endStroke();
                this.minuteH.graphics.setStrokeStyle(3, "round", "round");
                this.minuteH.graphics.moveTo (0,0);
                this.minuteH.graphics.beginStroke(createjs.Graphics.getRGB("black"));
                this.minuteH.graphics.lineTo(0, -this.SIZE*0.7);
                this.minuteH.graphics.endStroke();
                this.setTime(3, 45);

        }
            Clock.prototype.setTime=function(hour, minutes){
                this.hourH.rotation=Math.min(hour, 12)/12*360;
                this.minuteH.rotation=Math.min(minutes, 60)/60*360;
            }

        function init(){ 
            createjs.Ticker.setFPS(30); 
            createjs.Ticker.addListener(function() {

            })

            stage = new createjs.Stage("clocks");
            myClock1=new Clock();
            myClock2=new Clock();
            myClock2.x=myClock2.y=50;
            stage.addChild(myClock1);
            stage.addChild(myClock2);
            myClock1.setTime(7,25);
            stage.update();
        }

    </script>
</head>
<body onload="init();">
<div id="canvas_wrap">
    <canvas id="clocks" width="960" height="560"> </canvas>    
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:28:09.197

您还需要为 Container-Prototype 调用初始化方法，因此您的 Clock-header 应如下所示：

```
function Clock() {
    this.initialize();
}
Clock.prototype = new createjs.Container(); 

// get the original initialize-method
Clock.prototype.container_init = Clock.prototype.initialize;

Clock.prototype.initialize = function () {
    // invoke the original method as the first thing before doing ANYTHING else
    this.container_init();

    // now you can do the other stuff
    this.SIZE=20;
    this.width=this.SIZE*2;
    this.height=this.SIZE*2;
    ... 
```

我测试了它，它对我有用你的代码。

# .net - 为什么我在创建 X509Certificate2 对象时收到拒绝访问错误？

> ID：15285046
> 
> 赞同：10
> 
> 时间：2013-03-08T01:14:07.897
> 
> 标签：.net, x509certificate, x509certificate2

我们有一些单元测试，其中嵌入了 PFX 证书。这些证书在测试执行期间被读取并变成`X509Certificate2`对象。不幸的是，当以非特权用户身份运行时，我们会遇到`Access Denied`异常：

```
using (var s = EmbeddedResourceUtilities.GetEmbeddedResourceAsStream(typeThatContainsEmbeddedResource, certFileName))
{
    if (s == null)
    {

        throw new ApplicationException(String.Format("Embedded certificate {0} for type {1} not found.", certFileName, typeThatContainsEmbeddedResource.FullName));
    }

    try
    {
        var bytes = new byte[s.Length];
        s.Read(bytes, 0, (int)s.Length);
        return new X509Certificate2(bytes);
    }
    catch (Exception ex)
    {
        throw new ApplicationException(String.Format("Error loading embedded certificate {0} for type {1}.", certFileName, typeThatContainsEmbeddedResource.FullName), ex);
    }
} 
```

这是一个例外：

> System.Security.Cryptography.CryptographicException：访问被拒绝。
> 在 System.Security.Cryptography.CryptographicException.ThrowCryptographicException(Int32 hr)
> 在 System.Security.Cryptography.X509Certificates.X509Utils._LoadCertFromBlob(Byte[] rawData, IntPtr 密码, UInt32 dwFlags, Boolean persistKeySet, SafeCertContextHandle& pCertCtx)
> 在 System.Security.Cryptography .X509Certificates.X509Certificate.LoadCertificateFromBlob(Byte[] rawData, Object password, X509KeyStorageFlags keyStorageFlags)
> 在 System.Security.Cryptography.X509Certificates.X509Certificate2..ctor(Byte[] rawData)

我尝试修改构造函数以使用空密码和显式键集标志，但这并不能解决它：

```
// this doesn't work, either
return new X509Certificate2(bytes, String.Empty, X509KeyStorageFlags.MachineKeySet); 
```

我在其他地方读到我应该给我的非特权用户增加对 MachineKeys 目录的权限，但我不愿意这样做，因为它会允许生产代码假设这些权限在测试环境之外的那个目录上可用。

**有没有办法允许非特权用户从文件中加载 X509Certificate？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2018-07-19T20:36:25.370

在 X509Certificate2 构造函数中使用“X509KeyStorageFlags.UserKeySet”标志对我有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-23T20:02:04.017

这是我对正在发生的事情的最佳猜测。

X509Certificate2 构造函数在 Machine Keys 目录中创建临时公钥/私钥对象（我相信是通过 Windows 本地安全机构）。因为我们的非特权用户无权访问这些密钥或机器密钥目录，所以测试失败。

我们的解决方案是更新我们的环境设置脚本以提前安装这些测试证书，授予非特权用户权限，并重新编写测试以从适当的证书存储加载证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-27T10:17:17.190

我的解决方案是指定 X509KeyStorageFlags.MachineKeySet 标志

X509Certificate2 x509Certificate = new X509Certificate2("YourKey.pfx", "yourPassword", X509KeyStorageFlags.MachineKeySet);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-19T12:24:59.113

我的原因是另外两个。在我认为的最新 Windows 版本 2019 和 Windows 10 上，可以将 pfx 编码证书加密为 TripleDES-SHA1 和 AES256-SHA256。在较旧的 Windows 版本上，即使密码正确，也会因“拒绝访问”而失败。

另一个原因是证书存储中可能不存在中间和根权限。确保首先通过从 .p7b 导入到本地计算机来导入它们。现在证书将被标记为对服务 SSL（例如）有效，并且不再发生“拒绝访问”。

# java - 如何使用 org.apache.commons.logging 登录到文件？

> ID：15285049
> 
> 赞同：1
> 
> 时间：2013-03-08T01:14:23.160
> 
> 标签：java, logging, apache-commons

这可能很明显，但我一直在寻找一个简单的例子`org.apache.commons.logging`来记录一个特定的文件（即`/path/to/my-log.txt`）

```
public class MyClass {

    static Log log = LogFactory.getLog(MyClass.class);

    public static void main(String[] args) {

        // What to do here to get log to output to a file???

        log.info("I want to appear in a specific log file")
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T04:21:44.580

这取决于您在项目中的日志记录实现。如果类路径中没有 log4j，commons-logging 默认为 java.util.logging。在这种情况下，您需要配置 java.util.logging.FileHander。您可以通过 logging.properties 文件或以编程方式执行此操作

```
 Logger.getGlobal().addHandler(new FileHandler("log"));
    LogFactory.getLog(MyClass.class).info("/path/to/mylog.log"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:21:39.990

Commons-Logging 只是一个日志门面，你应该使用 Log4j 或 JDK-Logging 来做真正的日志任务，你可以设置日志文件。

[http://logging.apache.org/log4j/1.2/](http://logging.apache.org/log4j/1.2/) 或 [http://logging.apache.org/log4j/2.x/](http://logging.apache.org/log4j/2.x/)

它的配置文件将像：

```
log4j.rootLogger=info, stdout, R
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p %d{yy-MM-dd HH:mm:ss} %c:%L - %m%n
log4j.appender.R.File=/path/to/mylog.log 
```

# javascript - jquery 删除特定的手风琴类

> ID：15285050
> 
> 赞同：1
> 
> 时间：2013-03-08T01:14:23.977
> 
> 标签：javascript, jquery, css, ruby, haml

此代码在小提琴中运行良好：
[您可以展开/折叠所有项目，也可以展开/折叠单个项目](http://jsfiddle.net/HqXMN/19/)。

现在我在 ruby​​ 中添加了一些逻辑（我不能在 jsfiddle 中添加）

```
.accordion-body{id: "collapse-#{index}", class: ( get_office_id.to_i == office_id ? '' : 'collapse') } 
```

上面的代码从一个 URL 接收一个 id 并使用手风琴中的一个项目检查它并展开该手风琴。这很好用。

但是当我点击*Expand/Collapse All*时，它会展开/折叠除那个之外的所有内容。

我尝试在上面的 javascript 中添加以下行，但它不起作用：

```
 $(this).removeClass('accordion-body'); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:58:34.547

更改确定是否需要打开手风琴项之一的代码。如果它与 url 中的 ID 匹配，请给出`.accordion-body`类：`collapse`和`in`

只是对红宝石的猜测，但像这样吗？

```
.accordion-body{id: "collapse-#{index}", class: ( get_office_id.to_i == office_id ? 'collapse in' : 'collapse') } 
```

这里的例子：http: [//jsfiddle.net/n1ck/HqXMN/20/](http://jsfiddle.net/n1ck/HqXMN/20/)

# javascript - Javascript 页面未链接到我的 HTML 文件

> ID：15285051
> 
> 赞同：1
> 
> 时间：2013-03-08T01:14:40.500
> 
> 标签：javascript, jquery, html, head

我最初只是使用 JSFiddle，但我想将我的项目转移到 Notepad++，这样我就可以在我的计算机上保存这些文件。问题是，我页面上的 Javascript 没有生效。

标题代码：

```
<head>
<link href="C:/HTML/App/app.css" type="text/css" rel="stylesheet" />
<script type='text/javascript' src='C:/HTML/App/app.js'></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
</head> 
```

有什么理由吗？它链接到我的样式表就好了，但我的 app.js 似乎没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:21:59.583

三件事：

app.js 使用 jQuery，因此需要首先包含 jQuery 文件

另外，你说你在你的电脑上运行这个。您可以使用 localhost，但如果您从 运行`file://`，src=" **//** ... 将无法工作，因为您的浏览器将查找**文件：** //ajax.googleapis.com/ajax/libs/jqueryui/1.9 .1/jquery-ui.min.js 而不是http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js所以你需要做的就是添加 http **:**

但是你的意思是 jQuery 不是 jQuery UI 吗？（感谢@ahren）

```
<head>
    <link href="C:/HTML/App/app.css" type="text/css" rel="stylesheet" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script> -->
    <script type='text/javascript' src='C:/HTML/App/app.js'></script>
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:19:14.543

Jquery 是第一位的，像这样：

```
<head>
    <link href="C:/HTML/App/app.css" type="text/css" rel="stylesheet" />
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <script type='text/javascript' src='C:/HTML/App/app.js'></script>
</head> 
```

# c - 从双精度数组中删除一列

> ID：15285053
> 
> 赞同：2
> 
> 时间：2013-03-08T01:14:43.150
> 
> 标签：c, arrays, matrix

我被困在这里。我有一个大小为 NxN 的矩阵存储在一个双数组中。然后我想删除给定的列，比如说第一列。所以我创建了一个大小为 NxN-1 的新双精度数组，并将值从第一个矩阵复制到第二个矩阵，当然第一列除外。但后来我想将第一个数组设置为第二个数组。我在这里空白。

```
double matrix[N][N]
//fill up the matrix code here...

// remove first column of array
double newMatrix[N][N-1];
for(i = 0; i < N; i++){
    for(j = 1; j < N; j++){
        newMatrix[i][j-1] = matrix[i][j];
    }
}
matrix = newMatrix; // how do I set this correctly?  Do I need to realloc the first array? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:16:39.120

您不能在 C 中分配数组，我假设您的编译器会告诉您。要进行这种动态内存管理，您需要使用指针而不是数组。我建议你阅读如何`malloc()`和`free()`工作，以便你可以做你想做的事。

**编辑：**

*如果您只删除*列（或行） ，则会想到另一个解决方案：跟踪数组中使用的行数和列数。然后，您可以删除原始数组中的一行或一列，而无需先创建副本。只需将数据通过删除列（或行）向左（或向上）移动，然后减少您的大小计数器。（我希望这是有道理的。如果不让我知道，我会详细说明。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:40:07.470

`array + stride_x[x] + stride_y[y]`可以选择从;访问元素，而不是从 array[i][j] 访问元素。其中 array 最初是作为`double matrix[N*N];`or引入的`double *matrix = malloc(sizeof(double)*N*N);`。

stride_y[x] 最初将包含所有行的列偏移量：0 1 2 3 4 ... N-1 和 stride_y[y] 将包含相似的偏移量乘以原始行宽 0 N 2*N 3*N..

从这些一维数组中，可以更轻松地删除或交换完整的行和列，这可能会派上用场，例如。行列式计算/高斯乔丹消除的递归实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T02:17:14.950

就像 Code-guru 说 malloc() 和 free() 应该有很大帮助，但如果你只是想删除最后一列，你就不需要两个数组：

```
double matrix[2][3] = {1,2,3,4,5,6}; //declaring a 2 by 3 matrix 

for (i=0;i<2;i++) //rows
{   
    for (j=0;j<3-1;j++) //columns - 1
    {
        printf("%.1f ",matrix[i][j]); //I chose to display matrix...
    }
    printf("\n");
} 
```

# mongodb - 重新配置 Mongo 副本集随机增加版本

> ID：15285060
> 
> 赞同：0
> 
> 时间：2013-03-08T01:15:22.453
> 
> 标签：mongodb

当我重新配置 Mongo 副本集时，我最终得到了一个随机递增的副本集版本号。一切正常，但我担心这个数字最终可能会溢出，因为它似乎呈几何级数递增。

如果我做：

```
conf = rs.conf() 
```

并检查我会看到`conf['version' ] = 1` 然后我做：

```
conf['members'][0]['priority'] = 2
rs.reconfig(conf, {force:1}) 
```

它有效，我的 replset 已重新配置，但是当我这样做时：

```
conf = rs.conf() 
```

`conf['version']`是类似的东西`24956`。如果我再做一次，它会变成`83584`and then`282961`等等（它并不总是那些确切的数字，但模式是相同的，随机大增量，通常加倍或更糟）。

即使我这样指定版本号，也会发生这种情况：

```
conf['members'][0]['priority'] = 2
conf['version'] = conf['version'] + 1
rs.reconfig(conf, {force:1}) 
```

有谁知道底层的 Mongo 发生了什么，以及如何让它具有可靠的版本号增量？（我在 Ubuntu 上运行 Mongo 2.0.2）。

顺便说一句，如果我通过 Mongo shell 执行此操作或使用 Pymongo`conn.admin.command('replSetReconfig', config)`通过 Python 脚本执行此操作，则会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T13:19:02.013

大的随机增量是强制标志的实现方式。

[https://github.com/mongodb/mongo/blob/master/src/mongo/db/repl/rs_config.cpp#L653](https://github.com/mongodb/mongo/blob/master/src/mongo/db/repl/rs_config.cpp#L653)：

```
void ReplSetConfig::init(BSONObj cfg, bool force) {
    _constructed = false;
    clear();
    from(cfg);
    if( force ) {
        version += rand() % 100000 + 10000;
    }
    configAssert( version < 0 /*unspecified*/ || (version >= 1) );
    if( version < 1 )
        version = 1;
    _ok = true;
    _constructed = true;
} 
```

副本集总是使用最高版本的配置。如果您已经获得了最高版本，则不需要强制。最大的飞跃是试图确保新配置始终是最高版本，即使该集合的另一个成员的版本比正在更新的版本新。

# php - 生产错误：找不到您指定的型号

> ID：15285061
> 
> 赞同：0
> 
> 时间：2013-03-08T01:15:22.723
> 
> 标签：php, codeigniter

从过去两个月开始，我正在使用 codeigniter 进行开发。但是，当我今天将代码推送到 Web 托管站点时，我收到了这个错误。我检查了 100 次的几件事：

*   控制器方法说`$this->load->model('myModel');`
*   在我的模型文件夹中`myModel.php`
*   它开始于

> ```
> <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');<br/>
> 
> class MyModel extends CI_Model {
>   public function __construct()
>   {
>    parent::__construct();
>   } 
> ```

我检查了拼写错误或一些拼写错误，但一切似乎都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:18:27.683

模型名称应为小写：`mymodel_model.php`on `/application/models/`directory。

mymodel_model.php 包含：

```
class Mymodel_model extends CI_Model {
public function __construct()
{
    parent::__construct();
} 
```

并将其称为：

```
$this->load->model('mymodel'); 
```

`_model`必须打开一个字符串：

*   模型文件名`mymodel_model.php`
*   具有第一个大写名称的类名`class Mymodel_model`

Codeigniter 手册的完整示例：http: [//ellislab.com/codeigniter/user-guide/general/models.html](http://ellislab.com/codeigniter/user-guide/general/models.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:16:21.387

将模型名称全部设为小写，例如：“mymodel.php”，然后在 autoload.php 中输入此代码 $autoload['libraries'] = array('session','database'); 只需在模型中获取父构造并使其更简单，就像这段代码一样。

```
 <?php
    class MyModel extends CI_Model
    {    
        public function functionName()
        {

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:27:03.153

模型文件名应全部小写。@ddjikic 的回复是正确`_model`的，没有必要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T15:35:05.610

我正在使用 codeigniter 3.0.0，当我将应用程序托管到生产站点时，我在应用程序中遇到了同样的问题。我使用错误中提到的大写文件名（第一个字母）来拯救它。

大写和小写文件名取决于不同的托管服务器。

我刚刚将文件名的第一个字母大写，它对我来说很好用。我不知道我的托管服务器有什么设置。但它对我有用。你也可以试试，希望能解决你的错误。

例子：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Enquiry_model extends CI_Model
{
} 
```

如上例所示，当它给我错误时，我的文件名是**enquiry_model.php 。**但后来我将它重命名为**Enquiry_model.php**并解决了我的错误。

# java - Eclipse：仅在将焦点放在当前编辑器窗口后才能跳过快捷方式

> ID：15285062
> 
> 赞同：1
> 
> 时间：2013-03-08T01:15:24.380
> 
> 标签：java, eclipse, debugging

每当在 Eclipse 中调试代码时，我都会遇到这个错误：

*   打断点
*   使用键盘快捷键进入另一个班级
*   使用键盘快捷键点击 Step Over

除非我首先将编辑器窗口聚焦在当前 Java 文件上，否则第三步永远不会越过。

每次我进入单独的班级时，如何克服必须使用鼠标来聚焦编辑器窗口？

我的环境如下（这个bug已经出现在多个操作系统上）：

操作系统：OS X 10.8.2 和 Windows 7

带有单独安装的 Android 开发者工具的基础 Eclipse。

爪哇 6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T06:31:29.657

您需要确保将调试快捷方式应用于 In Windows 而不是 Debugging。

*   打开首选项
*   常规 > 按键
*   输入“步骤”的过滤文本
*   在 When 下拉菜单中将 Step Into、Step Over 和 Step Out 更改为“In Windows”而不是“Debugging”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T22:07:01.383

为我工作，但我讨厌在大多数窗口中覆盖 F5 进行刷新。

更好的解决方案是让 Eclipse 在我调试时正确检测。

# c4 - 如何使用 [object addGesture...] 从 C4Workspace 调用方法？

> ID：15285063
> 
> 赞同：2
> 
> 时间：2013-03-08T01:15:25.167
> 
> 标签：c4

我希望实现的是通过使用以下方法调用 C4Workspace.m 中的方法：

```
[shape addGesture:SWIPELEFT name:@"swipeLeft" action:@"leftSwipeMethod"]; 
```

我知道这试图在 C4Shape 类中调用一个名为“leftSwipeMethod”的方法，但在文档中它还提到您可以从超类调用方法（这是我认为我正在尝试做的事情？）。

我检查了其他类似的问题，我知道你不应该在正常的客观 c 中这样做......但我想知道 C4 是否也是这种情况。

有没有其他方法可以获得相同的结果，还是我必须创建一个子类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:58:40.490

好的，最简单的方法是设置您的画布以侦听在 C4Shape 内部调用的正确方法（实际上，它来自任何 C4Control，因此该技术适用于所有视觉对象。

1.  首先，创建一个形状并将其添加到画布中。
2.  向形状添加手势，触发相应的`swipe`方法
3.  告诉画布`notification`从形状中侦听
4.  当画布听到通知时做一些事情（即改变形状的颜色）

以下代码设置形状：

```
@implementation C4WorkSpace {
    C4Shape *s;
}

-(void)setup {
    s = [C4Shape rect:CGRectMake(0, 0, 192, 96)];
    s.center = self.canvas.center;
    [s addGesture:SWIPELEFT name:@"leftSwipeGesture" action:@"swipedLeft"];
    [self.canvas addShape:s];

    [self listenFor:@"swipedLeft" fromObject:s andRunMethod:@"randomColor"];
}

-(void)randomColor {
    s.fillColor = [UIColor colorWithRed:[C4Math randomInt:100]/100.0f
                                  green:[C4Math randomInt:100]/100.0f
                                   blue:[C4Math randomInt:100]/100.0f
                                  alpha:1.0f];
}
@end 
```

但是，这是硬编码的……一种更好、更动态的方法是从大量对象中侦听并使用`randomColor:`一种也接受通知的方法，以便您可以拉出正在执行通知的形状。

```
@implementation C4WorkSpace {
    C4Shape *s1, *s2;
}

-(void)setup {
    s1 = [C4Shape rect:CGRectMake(0, 0, 192, 96)];
    [s1 addGesture:SWIPELEFT name:@"leftSwipeGesture" action:@"swipedLeft"];

    s2 = [C4Shape rect:CGRectMake(0, 0, 192, 96)];
    [s2 addGesture:SWIPELEFT name:@"left" action:@"swipedLeft"];

    s1.center = CGPointMake(self.canvas.center.x, self.canvas.center.y - s1.height * 1.25);
    s2.center = CGPointMake(self.canvas.center.x, self.canvas.center.y + s2.height * 0.25);

    NSArray *shapes = @[s1,s2];
    [self.canvas addObjects:shapes];

    [self listenFor:@"swipedLeft" fromObjects:shapes andRunMethod:@"randomColor:"];
}

-(void)randomColor:(NSNotification *)notification {
    C4Shape *shape = (C4Shape *)notification.object;
    shape.fillColor = [UIColor colorWithRed:[C4Math randomInt:100]/100.0f
                                      green:[C4Math randomInt:100]/100.0f
                                       blue:[C4Math randomInt:100]/100.0f
                                      alpha:1.0f];
}
@end 
```

第二个例子需要注意的地方：

首先，要接受通知，正在运行的方法必须具有以下格式：

```
-(void)randomColor:(NSNotification *)notification {} 
```

其次，要触发此操作，您使用的方法名称`listenFor` **必须**是`:`这样的：

```
@"randomColor:" 
```

第三，通过从它发送的通知中拉取刚刚收到滑动手势的对象：

```
C4Shape *shape = (C4Shape *)notification.object; 
```

# python - 从受密码保护的 Excel 文件到 pandas DataFrame

> ID：15285068
> 
> 赞同：11
> 
> 时间：2013-03-08T01:15:45.987
> 
> 标签：python, excel, pandas, dataframe

我可以用这个打开一个受密码保护的 Excel 文件：

```
import sys
import win32com.client
xlApp = win32com.client.Dispatch("Excel.Application")
print "Excel library version:", xlApp.Version
filename, password = sys.argv[1:3]
xlwb = xlApp.Workbooks.Open(filename, Password=password)
# xlwb = xlApp.Workbooks.Open(filename)
xlws = xlwb.Sheets(1) # counts from 1, not from 0
print xlws.Name
print xlws.Cells(1, 1) # that's A1 
```

我不确定如何将信息传输到熊猫数据框。我需要一个一个地读取单元格，还是有一种方便的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-25T16:31:32.010

假设起始单元格为 (StartRow, StartCol)，结束单元格为 (EndRow, EndCol)，我发现以下内容对我有用：

```
# Get the content in the rectangular selection region
# content is a tuple of tuples
content = xlws.Range(xlws.Cells(StartRow, StartCol), xlws.Cells(EndRow, EndCol)).Value 

# Transfer content to pandas dataframe
dataframe = pandas.DataFrame(list(content)) 
```

注意：Excel 单元格 B5 在 win32com 中作为第 5 行第 2 列给出。此外，我们需要 list(...) 将元组的元组转换为元组的列表，因为元组的元组没有 pandas.DataFrame 构造函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-28T20:59:57.513

来自大卫哈曼的网站（所有学分归他所有） [https://davidhamann.de/2018/02/21/read-password-protected-excel-files-into-pandas-dataframe/](https://davidhamann.de/2018/02/21/read-password-protected-excel-files-into-pandas-dataframe/)

使用 xlwings，打开文件将首先启动 Excel 应用程序，以便您输入密码。

```
import pandas as pd
import xlwings as xw

PATH = '/Users/me/Desktop/xlwings_sample.xlsx'
wb = xw.Book(PATH)
sheet = wb.sheets['sample']

df = sheet['A1:C4'].options(pd.DataFrame, index=False, header=True).value
df 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-20T16:26:44.303

假设您可以使用 win32com API 将加密文件保存回磁盘（我意识到这可能会破坏目的），您可以立即调用顶级 pandas 函数`read_excel`。不过，您需要先安装`xlrd`（对于 Excel 2003）、`xlwt`（也适用于 2003）和`openpyxl`（对于 Excel 2007）的某种组合。[这](http://pandas.pydata.org/pandas-docs/stable/io.html#excel-files)是用于读取 Excel 文件的文档。目前 pandas 不支持使用 win32com API 读取 Excel 文件。如果您愿意，欢迎您[打开 GitHub 问题](https://www.github.com/pydata/pandas/issues)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-26T20:12:37.703

根据@ikeoddy 提供的建议，这应该将各个部分放在一起：

[如何使用python打开受密码保护的excel文件？](https://stackoverflow.com/questions/19450837/how-to-open-a-password-protected-excel-file-using-python)

```
# Import modules
import pandas as pd
import win32com.client
import os
import getpass

# Name file variables
file_path = r'your_file_path'
file_name = r'your_file_name.extension'

full_name = os.path.join(file_path, file_name)
# print(full_name) 
```

[在 Python 中获取命令行密码输入](https://stackoverflow.com/questions/9202224/getting-command-line-password-input-in-python)

```
# You are prompted to provide the password to open the file
xl_app = win32com.client.Dispatch('Excel.Application')
pwd = getpass.getpass('Enter file password: ') 
```

[Workbooks.Open 方法 (Excel)](https://docs.microsoft.com/en-us/office/vba/api/Excel.Workbooks.Open)

```
xl_wb = xl_app.Workbooks.Open(full_name, False, True, None, pwd)
xl_app.Visible = False
xl_sh = xl_wb.Worksheets('your_sheet_name')

# Get last_row
row_num = 0
cell_val = ''
while cell_val != None:
    row_num += 1
    cell_val = xl_sh.Cells(row_num, 1).Value
    # print(row_num, '|', cell_val, type(cell_val))
last_row = row_num - 1
# print(last_row)

# Get last_column
col_num = 0
cell_val = ''
while cell_val != None:
    col_num += 1
    cell_val = xl_sh.Cells(1, col_num).Value
    # print(col_num, '|', cell_val, type(cell_val))
last_col = col_num - 1
# print(last_col) 
```

ikeoddy 的回答：

```
content = xl_sh.Range(xl_sh.Cells(1, 1), xl_sh.Cells(last_row, last_col)).Value
# list(content)
df = pd.DataFrame(list(content[1:]), columns=content[0])
df.head() 
```

[python win32 COM关闭excel工作簿](https://stackoverflow.com/questions/6337595/python-win32-com-closing-excel-workbook)

```
xl_wb.Close(False) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-08-20T19:29:14.327

# 简单的解决方案

```
import io
import pandas as pd
import msoffcrypto

passwd = 'xyz'

decrypted_workbook = io.BytesIO()
with open(i, 'rb') as file:
    office_file = msoffcrypto.OfficeFile(file)
    office_file.load_key(password=passwd)
    office_file.decrypt(decrypted_workbook)

df = pd.read_excel(decrypted_workbook, sheet_name='abc') 
```

* * *

```
pip install --user msoffcrypto-tool 
```

## 从目录和子目录中导出每个 excel 的所有工作表到单独的 csv 文件

```
from glob import glob
PATH = "Active Cons data"

# Scaning all the excel files from directories and sub-directories
excel_files = [y for x in os.walk(PATH) for y in glob(os.path.join(x[0], '*.xlsx'))] 

for i in excel_files:
    print(str(i))
    decrypted_workbook = io.BytesIO()
    with open(i, 'rb') as file:
        office_file = msoffcrypto.OfficeFile(file)
        office_file.load_key(password=passwd)
        office_file.decrypt(decrypted_workbook)

    df = pd.read_excel(decrypted_workbook, sheet_name=None)
    sheets_count = len(df.keys())
    sheet_l = list(df.keys())  # list of sheet names
    print(sheet_l)
    for i in range(sheets_count):
        sheet = sheet_l[i]
        df = pd.read_excel(decrypted_workbook, sheet_name=sheet)
        new_file = f"D:\\all_csv\\{sheet}.csv"
        df.to_csv(new_file, index=False) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-08T07:28:12.883

添加到@Maurice 答案以获取工作表中的所有单元格，而无需指定范围

```
wb = xw.Book(PATH, password='somestring')
sheet = wb.sheets[0] #get first sheet

#sheet.used_range.address returns string of used range
df = sheet[sheet.used_range.address].options(pd.DataFrame, index=False, header=True).value 
```

# c - C char 直到应用程序关闭后才保存到文件

> ID：15285070
> 
> 赞同：1
> 
> 时间：2013-03-08T01:15:53.713
> 
> 标签：c, file, printf

我正在制作 ac 功能并将其与 mac 应用程序一起用于测试和学习目的。当我尝试使用此将文本打印到文件时：

```
FILE *f = fopen("text.txt", "w+");
fflush(f);
if (f==NULL) {
    f = fopen("text.txt", "w+");
    saveToFile(text);
    printf("null\n");
    return 0;
}
else{
    int i = fprintf(f, "%s", text);
    if (i>0) {
        return  1;
    }
    else{
        return 0;
    }
}
fclose(f); 
```

它将它打印到文件中，但只有在我退出应用程序之后。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T01:19:04.397

在您`return`的程序到达`fclose`. 因此，您的程序将推迟写入文件，直到文件关闭（因为缓冲）。当您终止程序时，文件正在为您关闭。

# sql - SQL Server 2000 上的 SQL 条件插入

> ID：15285071
> 
> 赞同：1
> 
> 时间：2013-03-08T01:15:56.783
> 
> 标签：sql, sql-server, insert

嗨，我有以下 2 个表：

表格1

```
GroupName PersonName email phone
A         Tom        tom@  123
A         Jen        jen@  223
B         Kim        kim@  232 
```

表2

```
GroupName PersonName email phone
A         Tom        NULL  1
A         Jen        NULL  1
A         Ken        NULL  1
B         Kim        NULL  1
B         Tai        NULL  1 
```

我需要将附加记录的所有列插入`table2`到`table1`. 例如，我需要`Ken`和`Tai's`记录从`table2`添加到`table1`. 它在**SQL Server 2000**上运行，所以我不能使用`EXCEPT`or `INTERSECT`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:17:54.467

假设电子邮件是唯一的：

```
insert into table1
select * from table2
where email not in (select email from table1) 
```

选择：

```
insert  into table1
select  a.* 
from    table2 a
        LEFT JOIN table1 b
            ON a.email = b.email
WHERE   b.email IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:21:00.187

这会做到的..

```
Inser Table1
select  GroupName, PersonName, email, phone
from Table2 where  GroupName+'|'+PersonName+'|'+email+'|'+phone 
    not in (select GroupName+'|'+PersonName+'|'+email+'|'+phone from Table1) 
```

谢谢！

@leo。

# flash - Highslide：全屏无法在 iframe 中工作

> ID：15285073
> 
> 赞同：0
> 
> 时间：2013-03-08T01:16:22.223
> 
> 标签：flash, iframe, fullscreen, away3d, highslide

我正在 wordpress 下建立一个网站，我正在使用 highslide 在 iframe 中显示 Flash 视频播放器。

该播放器通常可以通过单击专用按钮进入全屏状态，但由于它是在 Away3D 中开发的，因此全屏无法与 Google Chrome 一起使用（已知错误）：它会变为空白。

这就是为什么我必须在加载播放器的页面上使用脚本通过谷歌全屏 API 进入全屏状态。

您可以在以下测试站点上查看示例（由于我现在离线工作，所以我只是为您编造的）：

[http://ipgtest.co.nf](http://ipgtest.co.nf)

*   第一个 ipad 图像只是加载了一个经典的幻灯片：它工作得很好。
*   第二个 ipad 图像单独加载 Flash 播放器加载器页面，您会看到播放器上的全屏按钮（箭头）在 google chrome 和所有其他浏览器上完美运行。
*   第三个 ipad 图像在 iframe 中以 highslide 加载 Flash 播放器加载器页面，您会看到全屏按钮在 Google Chrome 上根本不起作用......

请随意阅读[http://ipgtest.co.nf/play/index.html](http://ipgtest.co.nf/play/index.html)的源代码，了解如何正常处理 chrome 全屏。

坦克很多你的帮助，我真的很绝望找到一个解决方案......

朱利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:40:18.067

基于上面[Juliens 的最新评论](https://stackoverflow.com/questions/15285073/highslide-fullscreen-not-working-in-an-iframe?noredirect=1#comment21584513_15285073)以及通过添加`allowfullscreen webkitallowfullscreen mozallowfullscreen`到 iframe 的代码中的技巧的信息，唯一的解决方案是将相同的代码添加到在 highslide-full.js 文件（或 highslide-with 中）创建 iframe 的代码中-html.js 文件 - 这取决于您使用的 Highslide 文件）。

在文本编辑器（不是 Word 或类似编辑器）中打开 Highslide js 文件并找到以下行：
*（highslide-full.js 中的第 1668 行 - highslide-with-html.js 中的第 1435 行 / 版本 4.1.13，行号可能会在以后的版本中更改）*

```
this.body.innerHTML += '<iframe name="hs'+ (new Date()).getTime() +'" frameborder="0" key="'+ this.key +'" ' 
```

将行更改为：

```
this.body.innerHTML += '<iframe allowfullscreen webkitallowfullscreen mozallowfullscreen name="hs'+ (new Date()).getTime() +'" frameborder="0" key="'+ this.key +'" ' 
```

# arrays - gfortran 不编译隐含的 do 循环

> ID：15285084
> 
> 赞同：0
> 
> 时间：2013-03-08T01:17:38.540
> 
> 标签：arrays, fortran, gfortran

我正在尝试按如下方式初始化数组：

```
program test
  n = 3
  call it(n)

contains

subroutine it(n)
  integer n,j
  integer, dimension(3*(n-1)) :: a=(/(j,j=4,3*n,1)/)
  write(*,*) a
end subroutine it

end program test 
```

当我用 编译时`gfortran -o test.exe test.f`，我收到以下错误：

```
test.f:9.43:

        integer, dimension(3*(n-1)) :: a=(/(j,j=4,3*n,1)/)
                                           1
Error: Invalid character in name at (1) 
```

问题是什么？据我了解，这是符合标准的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T01:35:47.840

编译器错误可能令人困惑，但示例代码不符合标准。

类型声明语句中的*初始化程序*必须是*常量表达式*。此外，*自动数据对象*可能没有 SAVE 属性。

初始化（没有限定形容词）在 Fortran 中只发生一次，在程序开始执行之前。因此，初始化程序中使用的表达式必须是可以在程序开始执行之前进行评估的东西（这种表达式中允许的细节（以及术语的各个方面）取决于您正在写入的 Fortran 标准）。

示例代码中的初始化程序取决于 n 的值，它是一个虚拟参数。在程序开始执行之前，您不能引用虚拟参数的值 - 它本质上不是常量。

同样，局部变量的属性（其形状）`a`取决于虚拟参数的值。这使变量`a`成为自动数据对象。不允许自动数据对象具有 SAVE 属性（对象的属性可能因调用而异，这与 SAVE 在调用之间维护值不一致）。提供初始化器也意味着 SAVE 属性。

如果`n`是参数而不是虚拟参数，则代码将符合要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:41:16.047

正如 IanH 已经解释的那样，这里有两个允许的示例。在一种情况下，初始化程序是一个常量表达式，因为`M`它是一个参数。另一方面，虽然初始化不是常量表达式，但它不是声明的一部分。

```
program test5
  integer :: j
  integer :: n = 3
  integer, parameter :: M = 4
  integer, dimension(3*(M-1)) :: b = [ (j,j=4,3*M,1) ]

  write (*,*) b
  call it(n)

contains

subroutine it(n)
  integer n,j
  integer, dimension(3*(n-1)) :: a
  a = [ (j,j=4,3*n,1) ]
  write(*,*) a
end subroutine it

end program test5 
```

# vba - Excel VBA - 循环未正确删除表中的最后一行

> ID：15285085
> 
> 赞同：0
> 
> 时间：2013-03-08T01:17:45.610
> 
> 标签：vba, excel, excel-2007

我一直在研究一个宏，如果表的 A 列中的值与另一个单独的 B 列中的任何值都不匹配，则删除表中的行。目前，我的代码没有正确删除最后一行，并且我终其一生都无法弄清楚为什么。

这是我当前的代码：

```
Sub Stuff()
    Dim rCell As Range, ColumnA As Range, ColumnB As Range
    Dim rowPoint As Integer

    Set ColumnA = ActiveWorkbook.Worksheets("Sheet1").Range("Table2[Column1]") 
    Set ColumnB = ActiveWorkbook.Worksheets("Sheet1").Range("Table1")

    rowPoint = ColumnA.Count

    On Error Resume Next

    For i = rowPoint To 1 Step -1
        For Each rCell In ColumnA
            If Application.CountIf(ColumnB, rCell.Value) = 0 Then rCell.Rows.Delete

        Next rCell
    Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T06:08:06.650

当你说最后一行没有被正确删除时，你是什么意思？

它是被删除并且格式有问题还是最后一行根本没有被删除？

如果是格式问题，那么您可以使用

```
If Application.CountIf(ColumnB, rCell.Value) = 0 Then rCell.Rows.Delete xlShiftUp 
```

这将仅删除该列中的单元格，并将已删除单元格下方的行向上移动，而不会更改其他列的结构。

# python - 我的华氏温度到摄氏度/开尔文转换器有问题

> ID：15285086
> 
> 赞同：3
> 
> 时间：2013-03-08T01:17:46.280
> 
> 标签：python, math, python-2.7

```
# Fahrenheit to Celcius    
def f2c():
    userInput = tempEntry.get().lower()
    thisEquation = "Fahrenheit to Celcius"
    if userInput == "":
        textWid.insert(END,"-- " + thisEquation + " --")
        textWid.insert(END,"\n")
        textWid.insert(END,temp_equations[thisEquation])
        textWid.insert(END,"\n")
        textWid.insert(END,"\n")
    elif userInput.isdigit():
        textWid.insert(END,"Fahrenheit = ")
        textWid.insert(END,str(((float(userInput) - 32) * (5/9))))
        textWid.insert(END,"\n")
    else:
        textWid.insert(END,"Invalid entry for"+" "+thisEquation)
        textWid.insert(END,"\n")

# Fahrenheit to Kelvin
def f2k():
    userInput = tempEntry.get().lower()
    thisEquation = "Fahrenheit to Kelvin"
    if userInput == "":
        textWid.insert(END,"-- " + thisEquation + " --")
        textWid.insert(END,"\n")
        textWid.insert(END,temp_equations[thisEquation])
        textWid.insert(END,"\n")
        textWid.insert(END,"\n")
    elif userInput.isdigit():
        textWid.insert(END,"Fahrenheit = ")
        textWid.insert(END,str(((5/9)*(float(userInput) - 32) + 273.15)))
        textWid.insert(END,"\n")
    else:
        textWid.insert(END,"Invalid entry for"+" "+thisEquation)
        textWid.insert(END,"\n") 
```

userInput 是一个全局定义的 Tkinter 输入框。我强烈怀疑我的问题源于这两个方程，但我已经尝试过多次重新处理它们。

我的华氏度到摄氏度的转换器总是返回 0.0 华氏度到开尔文的转换器每次大约 20 折。

完全难倒这里的家伙，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T01:19:49.117

`5 / 9`是你的问题：

```
>>> 5 / 9
    0 
```

在 Python 2 中，将整数除以整数会产生整数。您希望至少有一个数字为浮点数：

```
>>> 5.0 / 9
    0.5555555555555556
>>> 5.0 / 9.0
    0.5555555555555556 
```

# teamcity - 在 TeamCity 中，是否有当前构建配置 ID 的系统/环境变量？

> ID：15285087
> 
> 赞同：5
> 
> 时间：2013-03-08T01:17:48.350
> 
> 标签：teamcity

在 TeamCity 中，如果您知道构建配置 ID，则可以生成如下 URL：

```
http://example.org/guestAuth/repository/download/bt222/.lastSuccessful/exampleBuild.zip 
```

但是看到那个“bt222”了吗？那是构建配置 ID；它是在您设置构建配置时由 TC 生成的，它是静态的。[Atlassian 文档](http://confluence.jetbrains.com/display/TCD7/Build+Configuration#BuildConfiguration-BuildConfigurationID)似乎说确定它的方法是在屏幕上查看您的 URL 。

问题是，我需要在 msbuild 脚本中以编程方式处理它，以便同一个构建脚本可以服务于多个构建配置。否则 TC 有[很多很好的方便变量](http://confluence.jetbrains.com/display/TCD65/Predefined+Build+Parameters)，我只是希望我以某种方式错过了它......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-22T15:00:20.403

配置 ID 可用作`%system.teamcity.buildType.id%.`

经验证可在 Teamcity 7.1.5 中工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T08:05:33.680

将其作为构建脚本的参数，并从外部将其设置在构建配置设置中。

构建脚本不应该依赖于构建服务器，它也应该在本地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:10:03.867

依赖这些 id 似乎有点不稳定，也许您可​​以从另一个角度接近它，并使用 Dependent 构建和人工制品？你调查过吗？我们经常使用它来将文件从一个构建配置传递到另一个构建配置。

# r - 不允许 R 重复的“row.names”

> ID：15285089
> 
> 赞同：1
> 
> 时间：2013-03-08T01:17:58.430
> 
> 标签：r

这是我在 R 中的问题：

```
mtable <- read.table(paste(".folder_1362704682.4574","/groups.txt",sep=""),sep="\t",comment.char='',skip=0, header=TRUE, fill=TRUE,check.names=FALSE) 
```

第一个文件夹部分或 paste() 通常由 var 包装，用于调试目的 -> 静态。

我总是收到这样的信息：

```
Error in read.table(paste(".frunc_1362704682.4574", "/groups.txt", sep = ""),  :
  duplicate 'row.names' are not allowed 
```

但是，如果我查看带有此标题的文件：

```
root_node_name  node_name       node_id #genes_in_root_node     #genes_in_node  #genes_with_variable=1_in_root_node     #genes_with_variable=1_in_node  raw_p_underrepresentation_of_variable=1 raw_p_overrepresentation_      of_variable=1  FWER_underrepresentation        FWER_overrepresentation FDR_underrepresentation FDR_overrepresentation 
```

我看不到任何重复项.. :( 我在另一个讨论中读到了我应该尝试的内容：

```
mtable <- read.table(paste(".frunc_1362704682.4574","/groups.txt",sep=""),sep="\t",comment.char='',skip=0, header=TRUE, fill=TRUE,check.names=FALSE,**row.names=NULL**) 
```

这很好用，但之后所有标题都向右移动一列：

```
> head(mtable, n=1)
           row.names                            root_node_name  node_name
1 molecular_function trans-hexaprenyltranstransferase activity GO:0000010
  node_id #genes_in_root_node #genes_in_node
1   17668                   2           2419
  #genes_with_variable=1_in_root_node #genes_with_variable=1_in_node
1                                   0                        0.74491
  raw_p_underrepresentation_of_variable=1
1                                       1
  raw_p_overrepresentation_of_variable=1 FWER_underrepresentation
1                                      1                        1
  FWER_overrepresentation FDR_underrepresentation FDR_overrepresentation
1 
```

有什么想法可以让它正确吗？:(

***编辑：***

好的，正如评论者所说，这主要是 thr 行的问题.. 愚蠢的我认为它来自标题。但我不想命名这些行，它应该很容易阅读它们...... oO不能那么难，或者？

文件内容：

```
molecular_function      trans-hexaprenyltranstransferase activity       GO:0000010      17668   2       2419    0       0.74491 1       1       1       -1      -1
molecular_function      single-stranded DNA specific endodeoxyribonuclease activity     GO:0000014      17668   5       2419    0       0.478885        1       1       1       -1      -1
molecular_function      lactase activity        GO:0000016      17668   1       2419    0       0.863086        1       1       1       -1      -1
molecular_function      alpha-1,3-mannosyltransferase activity  GO:0000033      17668   3       2419    0       0.64291 1       1       1       -1      -1
molecular_function      tRNA binding    GO:0000049      17668   27      2419    7       0.975698        0.0663832       1       1       -1      -1
molecular_function      fatty-acyl-CoA binding  GO:0000062      17668   20      2419    6       0.986407        0.0460431       1       1       -1      -1
molecular_function      L-ornithine transmembrane transporter activity  GO:0000064      17668   1       2419    0       0.863086        1       1       1       -1      -1
molecular_function      S-adenosylmethionine transmembrane transporter activity GO:0000095      17668   1       2419    0       0.863086        1       1       1       -1      -1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T01:53:38.343

根据[此处](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/read.table.html)的 R 文档，

```
If there is a header and the first row contains one fewer field 
than the number of columns, the first column in the input is used
for the row names. Otherwise if row.names is missing, the rows are numbered. 
```

...因此我建议第一行可能比列数少一个字段，因此`read.table()`选择第一列（包含多个副本`molecular_function`）作为行名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T18:06:31.280

@adrianoesch的答案（[https://stackoverflow.com/a/22408965/2236315](https://stackoverflow.com/a/22408965/2236315)）应该会有所帮助。

请注意，如果您在某些文本编辑器中打开，您应该会看到标题字段的数量少于标题行下方的列数。在我的例子中，数据集在最后一个标题字段的末尾缺少一个“，”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T15:43:32.477

我遇到了同样的问题，问题是我的文本文件底部有大量的表格空白。因此，这些行上的每一行名称都是相同的（即空白）。之所以发生是因为我是从excel转换过来的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-24T02:26:32.817

我已经自动生成了数据文件，除了标题之外，一列是空的。我不想单独编辑每个文件（并冒着弄脏它的风险）。我发现的最佳解决方法是问题#4066607，在参数中包含“row.names=NULL”。

```
DF<-read.csv(file, ..... , row.names=NULL) 
```

这并不完美，但让我加载文件。与另一个答案中描述的行为不同（强制添加额外的行号列），我得到了标记为“row.names”的原始第一列，并且所有标题都向右移动了一列......但它让我获取所有数据。

# facebook - Drupal7 提要模块 Facebook 提要被截断为 80 个字符

> ID：15285090
> 
> 赞同：2
> 
> 时间：2013-03-08T01:18:24.773
> 
> 标签：facebook, drupal, rss, drupal-7

在 Drupal 7 中，我的 Facebook 提要显示在视图中。映射设置为标题到标题和正文到正文。但是 Facebook 帖子在 80 个字符处被截断，然后是 (...) 示例：EmC 的 Direct-Hire Construction 团队最近因实现更多...

我将一堆项目映射到正文，但仍然没有显示整个段落？视图和 CCk 类型设置为显示完整节点而不是预告片。我应该使用解析器还是添加嵌入字段？我的 Flickr 提要也在做同样的事情。我正在使用 Drupal 7 和 Feeds 模块。我的 Youtube 和 Twitter 提要运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:27:52.700

打开您的数据库并检查此内容类型的正文字段 - 如果它由 80 个字符组成，则从提要创建字段的问题（也许这是 facebook api 的一些细微差别）。如果正文包含超过 80 个字符 - 您的视图设置有问题，可能已调整为显示正文字段（如预告片）或限制为 80 个字符。

# visual-studio-2010 - Visual Studio HTML 设计器垂直拆分视图

> ID：15285092
> 
> 赞同：1
> 
> 时间：2013-03-08T01:18:36.917
> 
> 标签：visual-studio-2010, visual-studio-2012

我在 Visual Studio IDE 中遇到问题，在我的工具 >> 选项 >> HTML 设计器中，未选中垂直拆分视图，但 IDE 决定仍然保持 aspx 页面和源代码垂直拆分。有谁知道我该如何解决这个问题？必须是我可以删除的某个注册表项。

我尝试通过转到窗口>>重置窗口布局来重置窗口布局，并尝试工具>>导入/导出设置>>重置所有设置。

当前设置未选中，这意味着窗口应水平拆分（默认设置）。这个问题在我的 Visual Studio 2010 安装中存在并且以相同的方式发生，现在在我的 Visual Studio 2012 安装中也存在。两种 IDE 设置均未设置为垂直拆分，但仍垂直拆分。

我希望这不会太令人困惑。有任何想法吗？

# php - 简单的 PHP Mailer.php 和一个contact.html，需要 html 帮助可能缺少几个标签

> ID：15285094
> 
> 赞同：0
> 
> 时间：2013-03-08T01:18:39.547
> 
> 标签：php, html

嗨，我对 php 完全陌生，我有一个网站，我有一个contact.html，它有可以填写姓名、电子邮件、保险类型、主题和评论的表格。点击提交按钮后，指定的电子邮件将收到详细信息。似乎无法定位问题所在。

这是contact.html的html代码

```
 <form id="ajax-contact-form">
        <div class="row">
            <div class="span4">
                <div class="form-padding">
                    <label for="f1">Your name(required):</label>
                    <input type="text" name="name" id="f1" class="form-text" value=""/>
                    <label for="f2">Insurance type:</label>
                    <input type="text" name="category" id="f2" class="form-text" value="" size="40"/>
                </div>
            </div>
            <div class="span4">
                <div class="form-padding">
                    <label for="f3">Your email(required):</label>
                    <input type="text" name="email" id="f3" class="form-text" value="" size="40"/>
                    <label for="f4">Subject:</label>
                    <input type="text" name="subject" id="f4" class="form-text" value="" size="40"/>        
                </div>
            </div>
        </div>
        <div class="row">
            <div class="span8">
                <div class="form-padding">
                    <label for="f5">Message(required):</label>
                    <textarea name="message" id="f5" cols="40" rows="10"></textarea>    
                </div>
            </div>
        </div>
                    <!-- send mail configuration -->
                    <input type="hidden" value="myemail@gmail.com" name="to" id="to" />
                    <input type="hidden" value="myemail@gmail.com" name="from" id="from" />
                    <input type="hidden" value="From contact form" name="subject" id="subject" />
                    <input type="hidden" value="send-mail.php" name="sendMailUrl" id="sendMailUrl" />
                    <!-- ENDS send mail configuration -->               
                    <p><input type="button" class="button red small" value="Submit Form" name="submit" id="submit" /></p>
        </form> 
```

和我的 SEND-MAIL.PHP

```
 <?php
        //vars
        $subject = $_POST['subject'];
        $to = explode(',', $_POST['to'] );

        $from = $_POST['email'];

        //data
        $msg = "NAME: "  .$_POST['f1']    ."<br>\n";
        $msg .= "INSURANCE: "  .$_POST['f2']    ."<br>\n";
        $msg .= "EMAIL: "  .$_POST['f3']    ."<br>\n";
        $msg .= "SUBJECT: "  .$_POST['f4']    ."<br>\n";
        $msg .= "COMMENTS: "  .$_POST['f5']    ."<br>\n";

        //Headers
        $headers  = "MIME-Version: 1.0\r\n";
        $headers .= "Content-type: text/html; charset=UTF-8\r\n";
        $headers .= "From: <".$from. ">" ;

        //send for each mail
        foreach($to as $mail){
           mail($mail, $subject, $msg, $headers);
        }

        ?> 
```

我的 JS 函数

```
// contact form
$("#ajax-contact-form").submit(function() {
var str = $(this).serialize();
    $.ajax({
    type: "POST",
    url: "send-mail.php",
    data: str,
    success: function(msg) {
        if(msg == 1) {
            result = '<div class="alert success fade in">Your message has been sent. Thank you!<a href="#" class="close-alert" data-dismiss="alert"></a></div>';
            $("#ajax-contact-form").hide();
        } else {result = msg;}
        $('#form-message').hide();
        $('#form-message').html(result);
        $('#form-message').fadeIn("slow");
        }
    });
return false;
}); 
```

我的问题

1.  好像有错误，无法发送邮件。我很天真。任何帮助，将不胜感激。

2.  如何在单击提交按钮后显示成功消息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:25:41.510

也许你必须完成你的表单打开标签

```
<form id="ajax-contact-form" method="POST" action="send-mail.php"> 
```

除非您使用 Ajax，否则您必须在问题中提供 ajax 代码。

# javascript - 你如何从 Javascript 中的 Django 视图中获取所有列表信息？

> ID：15285095
> 
> 赞同：1
> 
> 时间：2013-03-08T01:18:40.300
> 
> 标签：javascript, arrays, django-models

我正在尝试使用 django 和 javascript 制作一个小型网络应用程序，但是我遇到了问题。

在我的模型中，我有一个实体名称“条目”，它的属性 id、name、location_lat 和 location_lon 都是 char 数组。我使用以下代码将与某项运动相关的条目传递给“map.html”文件：

```
def sportpage(request,sportname):
t = get_template('map.html')
try:
    entry_list = Feature.objects.filter(sport=sportname)
except BaseException:
    raise Http404
sport_list = Sport.objects.all().order_by('name')
context = RequestContext(request,{'sport_list':sport_list,'entry_list':entry_list, 'page_title':sportname})
return HttpResponse(t.render(context)) 
```

在 JavaScript 文件中，我尝试使用以下方式读取“entry_list”：

```
var data = "{{entry_list|safe}}"; 
```

但是，数据仅包含条目名称列表，但不包含 location_lat 或 location_lon 属性。我将如何访问这些？

非常感谢您的帮助

# c++ - 理解 BFS 以找到最短路径的 C++ 问题

> ID：15285101
> 
> 赞同：0
> 
> 时间：2013-03-08T01:19:09.193
> 
> 标签：c++, breadth-first-search, adjacency-list

我有一个简单的图表，我的任务是找到两个节点之间的最短路径。我已经尽力阅读了 BFS 伪代码和示例，但它只是没有点击。

我的节点存储在邻接列表中，（目前我不关心边权重）这是数据的视觉效果：第一列是向量元素，它最左边的行是另一个向量。向量元素编号表示对应节点的编号。

```
=====================================
0  |  (1, 100), (3, 50), (7, 100)
1  |  (0, 100), (4, 50), (5, 10) 
2  |  (3, 1000), (4, 200), (6, 1000) 
3  |  (0, 50), (2, 1000) 
4  |  (1, 50), (2, 200), (6, 100) 
5  |  (1, 10), (6, 50), (7, 2000) 
6  |  (2, 1000), (4, 100), (5, 50) 
7  |  (0, 100), (5, 2000) 
```

我正在尝试通过我在[维基百科](http://en.wikipedia.org/wiki/Breadth-first_search#Pseudocode)上找到的伪代码来实现 BFS，但我没有得到它。我的邻接列表存储在一个向量中：`vector<vector <vertex> > adjList;` `vertex`is a struct of two `int`1)`node`和 2 `weight`)

我的实现非常基本：

```
vector<vector <vertex> > adjList;      // the vector adjacency list

// the start and end vertices are passed into the function
int startV;     //num of start node
int endV;       //num of destination node

bool visited = false, done = false;    //control         

vector<int> marked, path;              // holds visited and final path

Queue<int> Q;                          // Q for BFS
Q.push(startV);                        // enqueue BFS

while (!Q.empty() && !done) {

    int t = Q.front(); Q.pop();        // mark and pop(back)
    marked.push_back(t);               // push back start node onto marked

    if (t == endV)                     // if t is our destination
        done = true;                   // done, get out of here

    size_t adjE = adjList[t].size();   // degree of this node

    for (int i = 0; i < adjE; i++) {

        int u = adjList[t][i].node;    // visit each adjacent node

        for (int j = 0; j < marked.size(); j++) {

           if (marked[j] == u)         // test if node has been marked
               visited = true;  
           }
                                       // check if this node has
           if (!visited) {             // already been visited
              marked.push_back(u);     // if not enqueue
              Q.push(u);
           }
        }
    }
} 
```

我知道我的实现一定有问题。我只是没有看到是什么。

**更新：** 我通过使用多地图方法解决了这个问题。详细解释在这里：[Traverse MultiMap to Find Path from a given Value to a given Key](https://stackoverflow.com/q/15304951/938865)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:25:26.463

`visited`我认为您关于查找节点的逻辑是不正确的。尝试

```
...
int u = adjList[t][i].node;

visited = false;
for (int j = 0; j < marked.size(); j++) {
    // std::find() does essentially all this for you. Check it out.
    if (marked[j] == u) {
        visited = true;
    }
}

if (!visited) {
    marked.push_back(u);
    Q.push(u);
} 
```

# javascript - 计算 3d 空间等距的通用公式

> ID：15285108
> 
> 赞同：7
> 
> 时间：2013-03-08T01:19:50.833
> 
> 标签：javascript, jquery, math

这可能不是发布此内容的正确位置，但我不知道在哪里发布它。

我有 5 条线 (d1 -> d5) 在 3d 透视图中彼此平均分布，我有 (a) 角度、(d1) 和 (b5) 的值。我需要用 jquery 计算 (b2, b3, b4, d2, d3, d4, d5)。

![在此处输入图像描述](../Images/aacda8e31cb7635c2398c46533c3064c.png)

我可以计算 d5：

```
d5 = d1 - ( b5 * Math.tan(a)) 
```

但我不知道如何计算 b2、b3 和 b4。（d1 分为 4 个相同的段）任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:39:35.977

您正在寻找的是投影比例。在计算上做到这一点的最简单方法是使用齐次坐标，取一个矩形（如下面第一张图片中的那个），其中 V“向右无限远”，并找到一个投影变换，将该矩形映射到中的梯形第二张图片。矩形的顶点是(0|0)、(0|d1)、(b5|d1)、(b5|0)，梯形对应的顶点是(0|0)、(0|d1)、( b5|d5), (b5|0)。

![用于获得投影比例的投影变换的图示](../Images/1a6c6f70a216c35a765433dd0d0514ac.png)

由于这些是四个点，其中没有三个点是共线的，因此我们可以为这个变换找到一个唯一的矩阵（直到缩放）M。经过一些数学运算，结果证明这个矩阵是：

```
[d1*b5,0,0] 
[0,b5*d5,0]
[d1-d5,0,b5*d5] 
```

例如，如果你想找到坐标 b3 和 d3，你可以将这个矩阵乘以直线中间点的齐次坐标，即向量 (0.5*b5,d1,1)^T，你得到点 (b3|d3) 的齐次坐标，可以通过去齐次化将其转换为欧几里得坐标，即将前两个分量除以第三个分量。

一般来说，如果你有两个点 (b1|d1) 和 (bn|dn)，并且想知道在这样的投影尺度上的 n-2 个等距点的坐标，你可以像这样计算坐标 bi 和 di （在你的情况下，n 当然是 5）：

```
let M := matrix [[d1*bn, 0, 0], [0, bn*dn, 0], [d1-dn, 0, bn*dn]]
let v := ((i-1)/(n-1)*bn, d1, 1)
let (x,y,z) := M*v
let bi := x/z and di := y/z 
```

如您所见，这是一种用于计算这些投影等距点坐标的简单算法，并且可以很好地推广到任意数量的点。

如果您希望有一个封闭的公式，您可以直接计算 bi 和 di 为：

```
let bi := (bn*d1*(i-1))/(dn*n+(d1-dn)*i-d1)
let di := d1*dn*(n-1)/(dn*n+(d1-dn)*i-d1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:34:21.853

![在此处输入图像描述](../Images/7cf83603ea0a89170b5fef2e0736c4d2.png)

首先我们需要计算整个三角形**d1** -> **v** -> **c**的相邻边的长度是多少（它的左侧垂直边）：

```
tan(Θ) = opposite / adjacent
opposite * tan(Θ) = adjacent
adjacent = opposite * tan(Θ)
adjacent = d1 * tan(a) 
```

接下来我们需要知道从**v**到线**d1**的每条线离地面有多少。假设变量**s**对于所有分割都是相同的，并假设**N**个分割段（在本例中为 3），我们的计数器是**i**，它从 1 开始到**N**：

```
opposite(i) = i * (d1 / N) 
```

现在我们需要从**v**到每个标记**s 的**线所形成的角度：

```
tan(Θi) = opposite / adjacent
Θi = arctan(opposite / adjacent)
Θi = arctan(opposite(i) / adjacent)
Θi = arctan((i * (d1 / N)) / (d1 * tan(a))) 
```

使用一些几何/三角函数，我们可以说从**d1**通过点**c**到**d5**顶部的角度是 (90° - a)。我们称这个角**为a'**

```
a' = 90° - a 
```

正弦定律告诉我们：

```
A' / sin(a') = opposite(i) / sin(b') 
```

所以现在我们求解 A' 因为我们需要一些帮助来获取橙色正方形的尺寸：

```
A' = (opposite(i) * sin (a')) / sin(b') 
```

因为**b'** = ( **a** + **Θi** ) 这变成：

```
A' = (opposite(i) * sin (90° - a)) / sin(a + Θi) 
```

应用相同的方法，但求解橙色三角形中的**h**（见图）：

```
h / sin(90°-Θi) = A' / sin(90°)
h = (A' * sin(90°-Θi)) / sin(90°)    
b2 = h 
```

把它们放在一起（希望我没有复制/粘贴错误）并且没有简化：

```
b2 = (((( i * (d1 / N)) * sin (90° - a)) / sin(a + Θi)) * sin(90° - arctan((i * (d1 / N)) / (d1 * tan(a))))) / sin(90°) 
```

**现在冲洗/重复i**的每个值并变成代码（我会这样做但我太累了）:)

# c - pthread_atfork() 多次调用导致后 fork() 函数被多次调用

> ID：15285109
> 
> 赞同：0
> 
> 时间：2013-03-08T01:19:50.893
> 
> 标签：c, linux, pthreads

我正在实现一个库。我只能修改文件`mylib.c`, `mylib.h`，而不能修改`main()`另一个文件中的 which 。

当 main() 中的进程调用`mylib_init()`时，就可以开始使用`mylib.h, mylib.c`函数了。

当一个进程调用时`mylib_exit()`，他不能再使用`mylib.h, mylib.c`函数。

我想统计当前使用`mylib`库的进程数，所以里面`mylib_init()`有一个

`pthread_atfork(my_prepare_fork, NULL, NULL);`

```
my_prepare_fork() {
    p_using_mylib ++;
} 
```

（虽然`p_using_mylib`由共享内存实现，但有信号量和应包含的所有内容......）

我在下一次发生时遇到了一个问题：

给定 main() 函数的伪代码：

1.  父亲打电话`mylib_init()`
2.  父亲打电话`mylib_exit()`
3.  父亲打电话`mylib_init()`//第二次
4.  父亲做`fork()`

因为`mylib_init()`被调用了两次，`pthread_atfork()`也被调用了两次，因为现在在`fork()`，函数`my_prepare_fork()`被调用了两次。=> number of`p_using_mylib`将不正确，这就是问题所在。

所以我想知道：

1.  有什么办法可以取消`pthread_atfork()`之前的注册吗？
2.  有什么方法可以注册一个函数，只在第一次生成主进程时？在这种情况下，我可以在这个函数中初始化`pthread_atfork()`
3.  还有其他方法可以解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:28:50.393

没有办法“注销”`pthread_atfork`功能。您应该使用它`pthread_once`来保护所有初始化类型的例程不被多次运行。

# java - 如何在 Hibernate Search 中使用通配符和空格搜索字段

> ID：15285117
> 
> 赞同：7
> 
> 时间：2013-03-08T01:20:34.273
> 
> 标签：java, hibernate, lucene, full-text-search, hibernate-search

我有一个搜索框，它根据给定的输入对标题字段执行搜索，因此用户推荐了所有以插入的文本开头的可用标题。它基于 Lucene 和 Hibernate Search。在输入空间之前它工作正常。然后结果消失。例如，我希望“Learning H”给我“Learning Hibernate”作为结果。但是，这不会发生。你能告诉我我应该在这里用什么吗？

**查询生成器：**

```
QueryBuilder qBuilder = fullTextSession.getSearchFactory()
        .buildQueryBuilder().forEntity(LearningGoal.class).get();
  Query query = qBuilder.keyword().wildcard().onField("title")
        .matching(searchString + "*").createQuery();

  BooleanQuery bQuery = new BooleanQuery();
  bQuery.add(query, BooleanClause.Occur.MUST);
  for (LearningGoal exGoal : existingGoals) {
     Term omittedTerm = new Term("id", String.valueOf(exGoal.getId()));
     bQuery.add(new TermQuery(omittedTerm), BooleanClause.Occur.MUST_NOT);
  }
  @SuppressWarnings("unused")
  org.hibernate.Query hibQuery = fullTextSession.createFullTextQuery(
        query, LearningGoal.class); 
```

**休眠类**：

```
@AnalyzerDef(name = "searchtokenanalyzer",tokenizer = @TokenizerDef(factory = StandardTokenizerFactory.class),
filters = {
  @TokenFilterDef(factory = StandardFilterFactory.class),
  @TokenFilterDef(factory = LowerCaseFilterFactory.class),
  @TokenFilterDef(factory = StopFilterFactory.class,params = { 
      @Parameter(name = "ignoreCase", value = "true") }) })
      @Analyzer(definition = "searchtokenanalyzer")
public class LearningGoal extends Node { 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T05:52:35.810

我找到了解决这个问题的方法。这个想法是对输入字符串进行标记并删除停用词。对于最后一个标记，我使用关键字通配符创建了一个查询，对于之前的所有单词，我创建了一个 TermQuery。这是完整的代码

```
 BooleanQuery bQuery = new BooleanQuery();
    Session session = persistence.currentManager();
    FullTextSession fullTextSession = Search.getFullTextSession(session);
    Analyzer analyzer = fullTextSession.getSearchFactory().getAnalyzer("searchtokenanalyzer");
    QueryParser parser = new QueryParser(Version.LUCENE_35, "title", analyzer);
    String[] tokenized=null;
    try {
    Query query=    parser.parse(searchString);
    String cleanedText=query.toString("title");
     tokenized = cleanedText.split("\\s");

    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    QueryBuilder qBuilder = fullTextSession.getSearchFactory()
            .buildQueryBuilder().forEntity(LearningGoal.class).get();
    for(int i=0;i<tokenized.length;i++){
         if(i==(tokenized.length-1)){
            Query query = qBuilder.keyword().wildcard().onField("title")
                    .matching(tokenized[i] + "*").createQuery();
                bQuery.add(query, BooleanClause.Occur.MUST);
        }else{
            Term exactTerm = new Term("title", tokenized[i]);
            bQuery.add(new TermQuery(exactTerm), BooleanClause.Occur.MUST);
        }
    }
        for (LearningGoal exGoal : existingGoals) {
        Term omittedTerm = new Term("id", String.valueOf(exGoal.getId()));
        bQuery.add(new TermQuery(omittedTerm), BooleanClause.Occur.MUST_NOT);
    }
    org.hibernate.Query hibQuery = fullTextSession.createFullTextQuery(
            bQuery, LearningGoal.class); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-08T09:38:34.463

SQL 使用不同于任何终端的通配符。在 SQL`'%'`中替换零个或多个出现的任何字符（在您使用的终端中`'*'`），并且下划线`'_'`仅替换一个字符（在您使用的终端中`'?'`）。Hibernate 不翻译通配符。

所以在第二行你必须替换`matching(searchString + "*")`为

```
 matching(searchString + "%") 
```

# java - JAVA 我从文本文件扫描的二维数组打印时没有第一列

> ID：15285120
> 
> 赞同：2
> 
> 时间：2013-03-08T01:21:19.127
> 
> 标签：java, multidimensional-array, text-files

我正在为学校的实验室工作，因此将不胜感激，但我不希望为我解决这个问题。我在 NetBeans 中工作，我的主要目标是通过从文本文件中扫描整数来创建一个“二维”数组。到目前为止，我的程序运行没有错误，但我缺少数组的第一列。我的输入看起来像：

```
6
3
0 0 45
1 1 9
2 2 569
3 2 17
2 3 -17
5 3 9999
-1 
```

其中 6 是行数，3 是列数，-1 是标记。我的输出看起来像：

```
0 45 
1 9 
2 569 
2 17 
3 -17 
3 9999 
End of file detected.
BUILD SUCCESSFUL (total time: 0 seconds) 
```

如您所见，除了缺少的第一列之外，所有内容都正确打印。

这是我的程序：

```
import java.io.*;
import java.util.Scanner;

public class Lab3
{
    public static void main(String[] arg) throws IOException
    {
        File inputFile = new File("C:\\Users\\weebaby\\Documents\\NetBeansProjects\\Lab3\\src\\input.txt");
        Scanner scan = new Scanner (inputFile);
        final int SENT = -1;
        int R=0, C=0;
        int [][] rcArray;  

        //Reads in two values R and C, providing dimensions for the rows and columns.
        R = scan.nextInt();
        C = scan.nextInt();        

        //Creates two-dimensional array of size R and C.
        rcArray = new int [R][C];   

        while (scan.nextInt() != SENT)   
                {            
                    String line = scan.nextLine();
                    String[] numbers = line.split(" ");
                    int newArray[] = new int[numbers.length];

                    for (int i = 1; i < numbers.length; i++)
                    {
                        newArray[i] = Integer.parseInt(numbers[i]);
                        System.out.print(newArray[i]+" ");                        
                    }
                    System.out.println();
                }

                System.out.println("End of file detected.");    
    }

} 
```

显然，这里有一个逻辑错误。有人可以解释为什么第一列是不可见的吗？有没有办法我只能使用我的 rcArray 或者我必须同时保留我的 rcArray 和 newArray？另外，我怎样才能让我的文件路径只读取“input.txt”，这样我的文件路径就不会那么长了？文件“input.txt”位于我的 Lab3 src 文件夹（与我的程序相同的文件夹）中，所以我想我可以使用 File inputFile = new File("input.txt"); 找到文件，但我不能。

//编辑

好的，我已经更改了这部分代码：

```
for (int i = 0; i < numbers[0].length(); i++)
{
  newArray[i] = Integer.parseInt(numbers[i]);                        
  if (newArray[i]==SENT)
     break; 
  System.out.print(newArray[i]+" ");                        
}
System.out.println(); 
```

运行程序（从 0 而不是 1 开始）现在给出输出：

```
0 
1 
2 
3 
2 
5 
```

这恰好是第一列。:) 我要去某个地方！

//编辑2

万一有人在乎，我想通了。:) 感谢您的所有帮助和反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:22:44.067

既然你不想为你解决这个问题，我会给你一个提示：

[Java](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)中的数组是基于 0 的，而不是基于 1 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:24:33.353

除了 Jeffrey 关于数组基于 0 的性质的观点外，请看以下内容：

```
while (scan.nextInt() != SENT)   
{            
    String line = scan.nextLine();
    ... 
```

您正在*使用*一个整数（使用`nextInt()`），但您对该值所做的只是检查它是否不是`SENT`. 你可能想要这样的东西：

```
int firstNumber;
while ((firstNumber = scan.nextInt()) != SENT)
{
    String line = scan.nextLine();
    ...
    // Use line *and* firstNumber here 
```

或者（更干净的IMO）：

```
while (scan.hasNextLine())
{
    String line = scan.nextLine();
    // Now split the line... and use a break statement if the parsed first
    // value is SENT. 
```

# joomla - 在外部脚本中获取 K2 额外字段数据

> ID：15285127
> 
> 赞同：0
> 
> 时间：2013-03-08T01:21:50.067
> 
> 标签：joomla, joomla-k2

我试图从外部 php 脚本中的 k2_items 表中的 extra_fields 字段加载数据（我们称之为locations.php），我想将其包含在网站的其他地方。

extra_field 字段中的数据是 json 编码的：

```
[{"id":"1","value":"somevalue"},{"id":"2","value":"somevalue"},{"id":"3","value":"somevalue"}.] 
```

例如：我有 ID 为 1、6、10、15、22、44 和 66 的项目。我想为每个额外的字段和每个项目设置变量，以便我可以在其他地方使用它们。如果 id 为 1 的项目有 3 个额外字段，我想要变量 $item1ExtraField1、$item1ExtraField2 和 $item1ExtraField3。

所以首先我启动了 Joomla 框架：

```
// Get Joomla Framework
defined('_JEXEC') or die('Restricted access');
define( 'JPATH_BASE', realpath(dirname(__FILE__)));
define( 'DS', DIRECTORY_SEPARATOR );
require_once (JPATH_BASE.DS.'includes'.DS.'defines.php' );
require_once (JPATH_BASE.DS.'includes'.DS.'framework.php' );
require_once (JPATH_BASE.DS.'libraries'.DS.'joomla'.DS.'factory.php' );

$mainframe =& JFactory::getApplication('site');
$mainframe->initialise(); 
```

然后我尝试使用 2 个 id 进行数据库查询，看看是否可以获取数据：

```
// Load the data from the database.
$db = JFactory::getDbo();
$query = $db->getQuery(true);
$query
->select('extra_fields')
->from('#__k2_items')
->where('id = 15 or id= 289');
$db->setQuery($query);
$items = $db->loadObjectList();

// Check for a database error.
if ($db->getErrorNum())
{
    $this->_subject->setError($db->getErrorMsg());
    return false;
} 
```

然后我慢慢迷失了。如果我尝试，我不会得到任何结果：

```
foreach ($items as $item) {
    echo json_decode($item);
} 
```

和 var_dump 给了我

```
array(2) { [0]=> object(stdClass)#1395 (1) { ["extra_fields"]=> string(1013) "[{"id":"3","value":"somevalue"},{"id":"4","value":"somevalue"}, etc ] 
```

或使用 jdump 扩展：

```
[array] (unknown name) 
    [stdClass object] 0
    Properties
        [string] extra_fields = "[{"id":"3","value":"somevalue"},{"id":"4","value":"somevalue"}, etc ]"
[stdClass object] 1
    Properties
        [string] extra_fields = "[{"id":"3","value":"somevalue"},{"id":"4","value":"somevalue"}, etc ]" 
```

所以Joomla框架初始化似乎没问题，数据库连接在那里，但我不知道如何继续。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T12:02:24.743

我看到问题在于解码 json 字符串。尝试这样的事情：

```
$query = mysql_query($sql,$con);
while ($item = mysql_fetch_array($query))
{
$fields =(array)json_decode($item['extra_fields']);
$field1 = $fields[0]->value;
$field2 = $fields[1]->value;
} 
```

# php - 如何访问和更改动态创建的多个 html 表单元素？

> ID：15285130
> 
> 赞同：0
> 
> 时间：2013-03-08T01:22:22.090
> 
> 标签：php, jquery, html, user-interface

我有一个包含许多输入字段的表单。我无法访问和更改动态复制的表单。我将只向您展示部分表格来解释我的问题。

```
<div>
  <input class="add check" type="checkbox" name="add"> <label for="check">Add</label>
</div>

<select disabled="true" class="classname">
    <option value="value1">Value1</option>
    <option value="value2">Value2</option>
</select>

<input name="percentage" type="text" class="percent medium" disabled="true" />                                        
<input name="amount" type="text" class="amount medium"  disabled="true" />
<div class="total medium process_price"></div> 
```

这是表格的一部分。当添加复选框被启用时，将激活下拉列表，然后选择选项时，从数据库中检索选项值并在Total Div上显示。现在，我可以通过输入金额或百分比字段来操作总计。我可以使用 jQuery 复制此表单，但我希望复制的表单独立于原始表单工作。我怎么做？这是我到目前为止所拥有的，但重复的表格不能独立工作。有什么建议吗？谢谢。

```
$(".add").live('click',function(e){
    orginize($(e.target));
});

orginize(obj){
 var addCheck = obj.closest('div').find('input:checkbox');
 if(addCheck.is(':checked')){
   // Do stuff
 }
} 
```

# opengl-es - 我可以将 vec2 数组绑定到着色器语言中的 vec4 变量吗？

> ID：15285132
> 
> 赞同：1
> 
> 时间：2013-03-08T01:22:31.843
> 
> 标签：opengl-es, shader

我可以将 vec2 数组绑定到着色器语言中的 vec4 变量吗？

例如，在代码中，变量“position”是 vec4 类型，我尝试将变量“squareVertices”绑定到它，但 squareVertices 是 vec2 类型数组，只有 (x,y) 坐标，可能默认 ( x,y,z,w) = (x,y,0,1)？

我的顶点着色器和属性绑定代码：

```
attribute vec4 position;
attribute vec2 textureCoordinate;
varying vec2 coordinate;
void main()
{
    gl_Position = position;
    coordinate = textureCoordinate;
}

glBindAttribLocation(gProgram, ATTRIB_VERTEX, "position");
glBindAttribLocation(gProgram, ATTRIB_TEXTURE, "textureCoordinate");

// bind attribute values
glVertexAttribPointer(ATTRIB_VERTEX, 2, GL_FLOAT, 0, 0, squareVertices);
glEnableVertexAttribArray(ATTRIB_VERTEX);

glVertexAttribPointer(ATTRIB_TEXTURE, 2, GL_FLOAT, 0, 0, coordVertices);
glEnableVertexAttribArray(ATTRIB_TEXTURE);

// squareVertices definition
static const GLfloat squareVertices[] = {
    -1.0f, -1.0f,
    0.0f, -1.0f,
    -1.0f,  0.0f,
    0.0f,  0.0f,
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:18:59.377

是的，这是合法的。而且，z 和 w 的默认值分别是 0 和 1 是正确的。OpenGL ES 2.0 规范的第 2.7 节对此进行了介绍。

# python - Python中的惰性映射函数

> ID：15285134
> 
> 赞同：15
> 
> 时间：2013-03-08T01:22:36.293
> 
> 标签：python, map, iterator, lazy-evaluation

有没有变`map`懒的方法？还是在 Python 中内置了它的另一种实现？

我想要这样的工作：

```
from itertools import count

for x in map(lambda x: x**2, count()):
    print x 
```

当然，上面的代码不会结束，但我只想在里面输入任何条件（或更复杂的逻辑）`for`并在某个点停止。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-08T01:24:14.980

在 Python 2.x 上使用[`itertools.imap`](http://docs.python.org/2/library/itertools.html#itertools.imap)或升级到 Python 3.x

您也可以只使用一个更 Pythonic 的简单生成器表达式：

```
foo = (x**2 for x in count()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T01:24:02.870

`itetools.imap`是懒惰的。

```
In [3]: itertools.imap?
Type:       type
String Form:<type 'itertools.imap'>
Docstring:
imap(func, *iterables) --> imap object

Make an iterator that computes the function using arguments from
each of the iterables.  Like map() except that it returns
an iterator instead of a list and that it stops when the shortest
iterable is exhausted instead of filling in None for shorter
iterables. 
```

# css - 对齐文本中心（减号）10px

> ID：15285138
> 
> 赞同：4
> 
> 时间：2013-03-08T01:23:07.753
> 
> 标签：css, text-alignment

我有一个菜单系统，它使用 170px 宽 x 1px 高的图像（无限重复）它的左侧有 10px 边框，但右侧有 30px 边框。

有没有办法使文本居中，但要考虑右侧额外的 20px？

小提琴站点代码：http: [//jsfiddle.net/jgallaway81/AXVT5/1/](http://jsfiddle.net/jgallaway81/AXVT5/1/)

相关代码：

```
.menubuttonthin {margin-left:0px; margin-top:0px; margin-bottom:0px; width:170px; height:30px; display:block; line-height:30px; font-family:courier; font-size:small; color:#C8C8C8; text-decoration:none; font-weight:900; background-image: url(../_pic-lib/lcars-frame-button-thin.png); }

<a href="http://www.fccorp.us/index.fccorp.php" class="menubuttonthin"> FCCorp.US Story </a> 
```

如您所见，我没有 div 的链接，因为它们是由创建菜单区域框的 div 封装的。此外，我尝试了两边的边距和填充，但所做的只是增加框的大小，丢弃背景图像，使其与网站的背景图像不匹配。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T01:31:44.750

将您的文本放在 a 中`<div>`并使用以下样式：

```
text-align:center; 
margin-right:-20px; 
```

例如，如果你想使用内联样式：

```
<div style="text-align:center; margin-right:-20px;">

</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T01:36:47.703

如果我理解您的问题，一种方法是按照以下方式做一些事情：

CSS；

```
foo {
    width: 130px;
    padding: 0 30px 0 10px;
    text-align: center;
} 
```

HTML：

```
<div class="foo">Whatevs</div> 
```

这会将 div 的内容限制在非边界区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:04:31.743

好吧，一个意见...我是一个真正的白痴。

回答：

直到 madhushankarox 提到 text-indent，我才得到了答案。就文本居中而言，减小链接区域的大小以消除两边的差异，然后使用填充来增加大小以确保显示整个按钮图像。

```
.menubuttonthin { padding-right:10px; width:160px; } 
```

（仅包括更改）宽度从 170 像素缩小到 160 像素，从而创建了居中；填充增加了盒子的大小，显示了背景（按钮）图像的最后 10px

感谢所有的帮助！

当然，在我发布这个之后，我意识到 Ultranaut 一直都是对的。对于那个很抱歉。我检查了你的答案是正确的。谢谢。

# solr - 编译solr时出错

> ID：15285140
> 
> 赞同：0
> 
> 时间：2013-03-08T01:23:24.383
> 
> 标签：solr, lucene

编译 solr 时出现以下错误：

> /home/username/MP3/solr-4.1.0/build.xml:106：执行此行时出现以下错误：
> /home/username/MP3/solr-4.1.0/solr/common-build.xml :329 ：执行此行时发生以下错误：
> /home/username/MP3/solr-4.1.0/solr/common-build.xml:349：执行此行时发生以下错误：
> /home/username/MP3/solr -4.1.0/lucene/module-build.xml:229：执行此行时出现以下错误：
> /home/username/MP3/solr-4.1.0/lucene/module-build.xml:141：以下错误执行此行时发生：
> /home/username/MP3/solr-4.1.0/lucene/common-build.xml:464：执行此行时发生以下错误：
> /home/username/MP3/solr-4.1.0/lucene/common-build.xml:592：无效清单：/home/username/MP3/solr-4.1.0/lucene/build/analysis/common/MANIFEST.MF

# ios - 应用内购买服务器模型，交易相关

> ID：15285141
> 
> 赞同：0
> 
> 时间：2013-03-08T01:23:28.740
> 
> 标签：ios, in-app-purchase

我正在尝试构建一个应用内购买服务器模型。没有太多有用的示例代码。所以我想写我自己的。这是我的问题

1.  购买完成后，我的应用从应用商店检索“已完成交易”

    *   (void) completeTransaction:(SKPaymentTransaction *)transaction 然后我的工作就是将它发送到我的服务器。在这里，我应该发送交易对象本身吗？或 transaction.transactionReceipt 字符串？另外我应该如何将它发送到我的服务器？ex/ HTTP POST 请求？？也许示例代码会有所帮助
2.  我还读到，当我从苹果指南发送数据时，我应该使用 base64 进行编码。当我将数据从我的应用程序发送到服务器时？或从我的服务器到应用商店？或两者？

请兄弟们帮帮我~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:29:08.200

[验证此链接](https://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/) 这里有一个verificationcontroller.h 和.m 您想将这两个文件添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:04:49.970

```
 NSString *jsonObjectString = [self encodeBase64:(uint8_t*)transaction.transactionReceipt.bytes
                                         length:transaction.transactionReceipt.length]; 
```

在这里，您要为此添加 base64。在这里，您想将 jsonObjectString 保存到您的服务器，并且您想在此处提供一个 sharedsecret

# sas - unix 格式的 sas 库名

> ID：15285142
> 
> 赞同：1
> 
> 时间：2013-03-08T01:23:37.517
> 
> 标签：sas

我正在尝试将以下假设的 libname 引用更改为其他内容，以使其指向不同的共享驱动器。

```
libname mylibref '/u/mystuff/sastuff/work'; 
```

这引用了共享驱动`k:\`。

我想把它改成指向共享驱动`m:\`。

我应该如何改变`/u/mystuff/sastuff/work`才能做到这一点？我在一台 Windows 机器上，我不知道为什么这个 SAS 库名是 Unix 格式。我接手了一些用 SAS 编写的项目，但对这种特定的参考格式并不熟悉......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:04:50.073

如果它是 Unix 库名，那么代码很可能被设计为远程提交到 Unix SAS 服务器。

例如

```
/* 本地代码 - 在 PC 上处理 */
libname 本地 'c:\temp' ;
数据 local.test ;
  做 i = 1 到 100 ;
    输出 ;
  结尾 ;
跑 ;

提交；
  /* 远程代码 - 在服务器上处理 */
  libname unix '/u/user/stuff' ;
  数据 unix.test ;
    做 i = 1 到 100 ;
      输出 ;
    结尾 ;
  跑 ;
结束提交；

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:21:41.183

值得记住的是，可以在 windows 上使用正斜杠，因此应该执行以下操作而不会出错：

```
libname mylibref 'M:/u/mystuff/sastuff/work'; 
```

反向（反斜杠\on\unix）不起作用！

不确定这是否真的适用于您的情况，除非您有一个从 M 驱动器到 unix 的挂载点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:25:23.093

SAS 的语法可能过于有用，并试图让用户的生活更轻松，但有时它可能会令人困惑。这是一个很好的例子。

当前 libname 语句中的正斜杠被解释为 SAS 会话的**当前默认 Windows 驱动器**上的路径，在您的情况下显然是**驱动器 K**并且等效于：

```
libname mylibref 'K:\u\mystuff\sastuff\work'; 
```

因此，要将 libref 更改为您的**M 驱动器**，只需提交一个新的 libname 语句：

```
libname mylibref 'M:\u\mystuff\sastuff\work'; 
```

# c - 将计数字符从源字符串转移到目标字符串的函数

> ID：15285150
> 
> 赞同：-1
> 
> 时间：2013-03-08T01:24:34.863
> 
> 标签：c

我编写了这个函数来将计数字符从源字符串转移到目标字符串。我将字符串传递给 src，将 NULL 传递给 dst，并将计数值传递给函数

如果我将输入字符串作为“堆栈溢出”发送并计为 4，我希望将 o/p 字符串作为“流”。但是这里我的 o/p 字符串总是空的，你能告诉我我的逻辑有什么问题吗？请

```
char *Rprint(const char *src, char *dst, int count)
{
    int i = 0;
    char *ret = NULL;
    while(*src!= '\0')
        src++;
    dst = malloc(sizeof(char) * (count + 1));
    ret = dst;
    dst = dst + (count + 1);
    while(count)
    {
        *dst++ = *src--;
        count--;
    }
    *dst++ = '\0';
    //return ret;
    printf("String:%s \n", ret);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:50:48.060

我希望你打算这样做：

```
*dst-- = *src--; 
```

我不喜欢你这样做的方式，但这应该让你在没有我建议你完全重写你的代码的情况下走上正轨。

之后您不应该对字符串进行空终止，因为您已经复制了终止符。您正在将字符串从结尾复制到开头（*即*反向复制），但会将其与更常见的正向复制混淆。

小心你的循环条件。那里可能有一个错误。与添加`count+1`相同`dst`。我认为你应该只添加`count`.

哦，别忘了从你的函数中返回一个值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:13:08.087

这是基于您的原始方法的工作代码，但几乎没有更正。

```
#include <stdio.h>

void Rprint(const char [], char [], int );

int main()
{
char buff[50] = "stack overflow";
char cut [50];

Rprint(buff,cut,5);
puts(cut);
}

void Rprint(const char src[], char dst[], int count)
{

    while(*src!= '\0')
       src++;

    src = src - count;

    while(count--)
        *(dst++) = *(src++);

    *(dst++) = '\0';

} 
```

# jquery - 如何使用 d3.js 将嵌套的 svg 元素附加到 dom

> ID：15285155
> 
> 赞同：1
> 
> 时间：2013-03-08T01:25:19.883
> 
> 标签：jquery, d3.js, append, documentfragment

我环顾四周，似乎这可能是不可能的，但如果您可以使用 d3 的选择功能来获取一整块 svg 标记并将其用作您想要复制的结构的架构，那就太棒了次。例子：

```
<g class='nice'>
<g class="slice">
    <path fill="#3182bd" d="M1.836909530733566e-15,-30A30,30 0 0,1 25.98076211353316,-14.999999999999995L0,0Z"></path>
    <text transform="translate(10.500000000000002,-18.186533479473212)" text-anchor="middle">bla2</text>
</g>
<g class="slice">
    <path fill="#6baed6" d="M25.98076211353316,-14.999999999999995A30,30 0 0,1 25.980762113533153,15.000000000000007L0,0Z"></path>
    <text transform="translate(21,4.6629367034256575e-15)" text-anchor="middle">bla</text>
</g> 
```

只需弹出到当前的输入循环会容易得多，而不必为每个元素添加填充和 d 并转换属性，例如

```
.append('path')
.attr('transform', 'M25.98076211353316,-14.999999999999995A30,30 0 0,1 25.980762113533153,15.000000000000007L0,0Z')
.attr(.... etc etc etc 
```

我想我希望 d3 更像 jquery。任何人都知道你怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:33:53.530

d3 有一个`.html()`方法，虽然我没有尝试过，但我希望它可以`<path>`在组内创建元素等。

当然，这不会负责为每个元素设置适当的属性，但 jQuery 核心附带的任何东西也不会。为此，您需要使用一些模板库，例如[jam](http://icanhazjs.com/)或[ICanHaz](https://github.com/visionmedia/jade)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T20:06:56.443

使用 d3`.html()`方法时，请注意对 SVG 元素的 innerHTML 支持（在 safari、IE 中不支持）。

但是，您可以使用 innerSVG polyfill 来获得相同的效果。有关详细信息，请参阅[https://code.google.com/p/innersvg/](https://code.google.com/p/innersvg/)。它只是工作。

像这样使用它：

```
D3Selection.append("g").node().innerSVG = "<circle class=..."; 
```

* * *

更好的方法可能是引入在提供的 d3 选定元素上嵌套所需结构的方法并使用它。例如。：

```
function appendCircles(group) { 
    group.append("circle").attr("class", "circle1");
    group.append("circle").attr("class", "circle2");
} 
```

# java - GSON如何使用此数组json字符串反序列化为类

> ID：15285158
> 
> 赞同：0
> 
> 时间：2013-03-08T01:25:34.467
> 
> 标签：java, json, gson

我正在努力寻找一种将这个 JSON 输出序列化/反序列化为 Java 类的方法？谁能提供代码示例？

```
[
    {
        "topic": "this is my topic"
    },
    [
        {
            "name": "John"
        },
        {
            "age": 100
        }
    ]
] 
```

我目前的尝试使用这个 Javabean：

```
public class Test {
    private String topic;
    private List<Person> listOfPersons;
} 
```

我尝试使用 Gson 将数据反序列化：

```
gson.fromJson(this.json, Test[].class); 
```

但是反序列化失败了，因为 Gson 正在寻找 JSON 中的人员列表，但它不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:55:38.450

将对象放在数组旁边、在数组内部似乎并不明智。把事情这样说是有道理的：

```
{
    "topic": "this is my topic",
    "listOfPersons" : [
        {
            "name": "John",
            "age": 100
        },
        {
            ... another person
        }
    ]
} 
```

然后你可以只`Person`上课：

```
public class Person {
    private String name;
    private int age;
} 
```

...并且您可以使用已有的代码进行反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:02:09.460

这里的问题是您的 JSON 数据在语法上是正确的，但在语义上是模棱两可的。我的意思是，它似乎代表了一个*多态*数组，其中数组中的每个项目都是不同的类型。

此外，代表“人”的部分似乎已经被可怕地去规范化，其中人的每个属性都表示为数组中的一个单独对象。确实很奇怪。不幸的是，仅仅通过查看数据真的不可能知道代表什么类型，并且没有提供允许 Gson 为您反序列化数据的提示。在这种情况下，您能做的最好的事情就是手动解析信息。

```
Test test = new Test();
JsonArray rootArray = new JsonParser().parse(jsonString);
test.setTopic(rootArray.get(0).get("topic");

Person person = new Person();
JsonArray personArray = rootArray.get(1);
person.setName(personArray.get(0).get("name"));
person.setAge(personArray.get(1).get("age"));

test.setListOfPersons(Arrays.asList(person)); 
```

# ios - 如何将不同的 UITapGestureRecognizer 添加到单个 UILabel 的许多部分？

> ID：15285163
> 
> 赞同：1
> 
> 时间：2013-03-08T01:26:11.967
> 
> 标签：ios, uilabel, uitapgesturerecognizer

例如，我想显示一个`UILabel`带有指向许多用户配置文件的链接，例如：

> **“[John]、[Josef]、[Doe]、[May] 和 [You] 喜欢这样”**

这个想法是每个**[name]**调用一个不同的 TapGestureRecognizer。

另一种选择是创建不同的`UILabels`并将它们像字符串一样连接，但也不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:55:10.123

已为您发明了显示文本中可点击的单个单词：使用 a`UIWebView`而不是标签。将您的文本格式化为 HTML，使每个名称都成为链接，并使用 Web 视图委托方法查看已点击的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T07:27:20.910

确实，您不能仅将手势识别器附加到 UIView 的某些部分。Label 是单个 UIView，因此仅使用这两个部分没有解决方案，除了拦截 touchesBegan 并试图找出 base don touch 坐标是哪个单词。

如果你想走那条路，你会发现这很有帮助：

```
NSString* text = @"John";
CGSize size = [text sizeWithFont:font]; 
```

这使您可以计算出给定字体（您的标签使用的字体）中绘制文本的大小，然后进行一些可怕的数学运算以找出您的单词在哪里并比较触摸位置。

另一种可能性是为每个单词使用单独的 UILabel。同样，您将使用，`sizeWithFont`但现在您使用它来设置每个标签的 label.frame.size.width 以适合给定的文本。然后，您可以编写代码来设置所有标签的 .frame，使它们彼此相邻排列。

```
NSString* text = @"John";
CGSize size = [text sizeWithFont:font];
CGRect frame = myUILabelObject.frame;
frame.size.width = size.width;
myUILabelObject.frame = frame;
// Now next label, setting label.frame to position it next to this label. 
```

# java - 在 Intellij 中，如何创建一个为测试添加导入语句的实时模板？

> ID：15285165
> 
> 赞同：14
> 
> 时间：2013-03-08T01:26:20.753
> 
> 标签：java, junit, intellij-idea

我希望能够输入`test`一个类文件，然后按 Tab 并将其扩展为：

```
@Test
public void whenThen() {

} 
```

并且还包括适当的进口。这包括`import static junit.framework.Assert.*;`.

我该怎么做呢？我正在使用 Intellij 12

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-08T02:47:37.230

`test`您可以像这样在 IntelliJ 12中创建实时模板：

文件 > 设置... > 实时模板

![添加模板](../Images/51677b3a6bc1c2e8252bc09a9e399a6c.png)

1.  添加新模板
2.  设置缩写（您将键入的内容以使用此过滤器）
3.  键入此模板（按 Tab 后，您的光标将位于 $EXPR$ 以完成方法的名称，在这种情况下，$END$ 是完成 $EXPR$ 名称后光标所在的位置（即，按 enter )

    ```
    @org.junit.Test
    public void test$EXPR$() {
        $END$
    } 
    ```

4.  确保 Expand with 设置为 Tab（或您喜欢的任何一个）
5.  确保启用了缩短完全限定名称（`@org.junit.Test`模板中的这种方式添加`import org.junit.Test;`到文件顶部并且该方法将具有 just `@Test`）
6.  将 Applicable 设置为“in Java: declaration”。

编辑：正如 tieTYT 指出的那样，`import static junit.framework.Assert.*`可以通过创建一个新的文件模板来满足该部分：

![JUnit 测试文件模板](../Images/c5bbbe8452f577a836fe79d8a6c70ce8.png)

```
#if (${PACKAGE_NAME} && ${PACKAGE_NAME} != "")package ${PACKAGE_NAME};#end

import static junit.framework.Assert.*;

#parse("File Header.java")
public class ${NAME}
{

} 
```

以上只是从 Class 模板复制粘贴，添加了`import`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-18T16:40:34.043

现在可以使用**静态导入添加****实时模板**：

 **> 您必须在选项中检查静态导入

```
@org.junit.Test
public void should$EXPR$when$CONDITION$() {
    org.junit.Assert.assertThat(null, org.hamcrest.CoreMatchers.is(org.hamcrest.CoreMatchers.nullValue())); 
} 
```

[![在此处输入图像描述](../Images/f673e2f97250f187d39e6c8cb71fa5ce.png)](https://i.stack.imgur.com/0GVzX.png)**

# c# - 从不同程序集中的基类继承

> ID：15285167
> 
> 赞同：0
> 
> 时间：2013-03-08T01:26:47.057
> 
> 标签：c#, inheritance, factory

我使用通用基类和派生类，它们实现具有自己专业个体依赖关系的特定实例。我不希望开发人员必须安装所有依赖项，只安装他们需要的那些，所以我将派生类放在他们自己的程序集\dll 中。然后我使用一个工厂，它根据传入的参数创建正确的实例。针对该返回实例的所有调用都需要路由到正确的派生方法。只是那行不通。它们被路由到基类方法。有没有办法配置这个？当他们在同一个程序集中时，它工作得很好。

# google-app-engine - appengine 禁用应用版本

> ID：15285172
> 
> 赞同：1
> 
> 时间：2013-03-08T01:27:25.790
> 
> 标签：google-app-engine, google-api, google-apps

我在应用引擎上有一个测试应用。

我增加了它的版本并再次部署

现在如果我在一个版本中修改一些数据，它会写在第二个版本使用的数据存储上（因为版本指向同一个存储）

如何禁用版本而不删除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T01:53:17.220

只有一个数据存储对所有版本都是通用的。并不是每个版本都有自己的数据存储。

你可以设置一个默认版本，但你不能阻止任何人通过访问[http://version.appid.appspot.com直接强制一个版本](http://version.appid.appspot.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T04:21:08.370

您可以使用命名空间来分隔版本之间的数据。 [https://developers.google.com/appengine/docs/python/multitenancy/overview](https://developers.google.com/appengine/docs/python/multitenancy/overview)

# ios - 垂直居中视图、自动调整大小和 iPhone 5 4" 屏幕

> ID：15285174
> 
> 赞同：0
> 
> 时间：2013-03-08T01:27:42.623
> 
> 标签：ios, uikit, xib, iphone-5, autoresizingmask

我有一些自定义按钮添加到`-viewDidLoad`. 我希望它们在视图内垂直居中，如下所示：

```
self.customButton.center = CGPointMake(98.f, self.view.center.y); 
```

但是，视图高度`504.0`甚至在 3.5 英寸设备上，我希望它是`416`（480 - 20（状态栏高度） - 44（导航栏高度））。

xib 中的视图使用“Retina 4 Fullscreen”，但将其设置为自由格式并没有帮助。我当然不希望两个 xib 只是为了解释高度差异。

我知道我可以使用 UIScreen，但我希望视图能够知道高度差。

编辑：奇怪的是，在`-viewWillAppear`视图高度正确设置为`416.0`。为什么之后不处理这件事`[super viewDidLoad]`超出了我的范围。

人们是如何处理这个问题的？Autolayout 可能会处理这个问题，但我需要一个 iOS5 兼容的方法。自动调整大小可以以某种方式处理“居中”吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T03:49:05.290

你在 iOS5 中没有 Autolayout，但你仍然有 autoresizing mask。如果您在 IB 中垂直居中视图，请转到检查器并取消选择自动布局遮罩中的垂直支柱和弹簧，该视图将在 4" 和 3.5" 屏幕上保持垂直居中。

或者，您可以在 viewDidLoad 方法的代码中执行此操作。只需像现在一样将视图居中并像这样设置 autoresizingMask：

```
 self.customButton.autoresizingMask = (UIViewAutoresizingFlexibleBottomMargin | \
                                       UIViewAutoresizingFlexibleTopMargin); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:20:24.333

> 编辑：奇怪的是，`-viewWillAppear`视图高度正确设置为 416.0。为什么之后不处理这件事`[super viewDidLoad]`超出了我的范围。

因为调整视图大小不是加载视图的一部分！从一个可能看起来有点像这样的方法`-viewDidLoad`调用：`-view`

```
-(UIView*)view
{
  if (!_view)
  {
    [self loadView];
    [self viewDidLoad];
  }
  return _view;
}

-(void)loadView
{
  // Some code to load the view from a nib/storyboard...
} 
```

视图将通过类似的调用来调整大小`yourViewController.view.frame = ...`，但这只能在视图加载*后*发生（因此`-viewDidLoad`调用 after ）。

设置一些自动调整大小的蒙版。这就是他们的目的。

# python - Python Roguelike：背景问题

> ID：15285175
> 
> 赞同：0
> 
> 时间：2013-03-08T01:27:48.207
> 
> 标签：python, roguelike, libtcod

我正在关注一个关于在 python 中制作 roguelike 的教程，它实际上非常好。但是，我遇到了一个小图形问题：对于玩家和敌人，他们都有黑色背景，这是我不想要的。我已经尝试将背景更改为无，但我似乎无法弄清楚如何修复它。如果有人能帮助我解决这个问题，我将不胜感激。以下是显示此问题的图像的链接：

[![](../Images/bea7b8a0333f52000856832db7bbbacc.png)](https://imgur.com/5XgZovX)

另外，如果有帮助，我正在使用 notepad++ 和 libtcod。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:37:15.480

[解决了]

我发现我忽略了 object.clear() 事件中的一个参数，我所要做的就是检查对象是否可见，以及是否已经探索过它以确定将其设置为哪种背景颜色。

感谢所有回复并提供意见的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:26:58.197

嗯，您可能需要设置背景标志。或者至少给它适当的颜色。所以尝试覆盖它。

当您打印一个字符时，它需要前景和背景。

无论如何，您可能应该查看 object.draw() player.draw()

# ruby-on-rails - 让“不在”在 Rails MySQL 查询中工作

> ID：15285178
> 
> 赞同：0
> 
> 时间：2013-03-08T01:27:59.273
> 
> 标签：ruby-on-rails, ruby

我有三个模型 - 用户。游戏和活动。我有一个视图应该显示用户没有活动记录的游戏。我无法弄清楚如何编写排除已经有活动的游戏的查询。

当我做这两个版本（在控制器中）时，它不起作用（我收到错误`undefined method 'game_id' for #<ActiveRecord::Relation:0x69eab40>`）

版本 1

```
def index
  if current_user
    @activities = current_user.activities.game_id
    @games = Game.where("id NOT IN (?)", @activities )
  end
end 
```

第 2 版

```
def index
  if current_user
    @activities = current_user.activities
    @activity_ids = @activities.game_id
    @games = Game.where("id NOT IN (?)", @activity_ids )
  end
end 
```

但是，当我这样做时，它可以工作：控制器：

```
def index
  if current_user
    @activities = current_user.activities
    @games = Game.where("id NOT IN (?)", @activities.collect {|p| p.game_id} )
  end
end 
```

我担心这样做，因为我不确定它的可扩展性。我从这个 [question] 中得到了这样做的想法，但是人们说这个解决方案是不可扩展的（这对那个提问者来说不是问题）。[1](https://stackoverflow.com/questions/6756165/empty-array-is-null-in-rails-where-find)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:36:21.527

你的错误不在那一行。是什么导致你的错误是这个

```
@activities = current_user.activities.game_id 
```

`current_user.activities`是一个`ActiveRecord::Relation`对象，因此调用`game_id`它会引发异常。您的解决方案很好，因为您将使用`@activities`（您将使用，对吗？）。如果您想要更多的 sql 方法，请尝试

```
def index
  if current_user
    @activities = current_user.activities
    @games = Game.where("id NOT IN (?)", @activities.uniq.pluck(:game_id))
  end
end 
```

# java - 二维数组列表

> ID：15285179
> 
> 赞同：19
> 
> 时间：2013-03-08T01:27:59.573
> 
> 标签：java

我知道我可以通过在数组旁边添加另一个 [] 来向数组添加维度。但是我可以在 java.util.ArrayList 中有多个维度吗？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-08T02:07:51.263

```
List<ArrayList<Integer>> twoDArrayList = new ArrayList<ArrayList<Integer>>(); 
```

@rgettman 的回答完成了工作，但是有一些注意事项需要注意：

**警告 1：尺寸**

在最常见的用例中，数组的维度是预定义的，例如：

```
int[][] array = new int[5][6]; 
```

在这种情况下，数组将是定义尺寸的“矩形”形式：

```
 0 1 2 3 4 5
0 [][][][][][]
1 [][][][][][]
2 [][][][][][]
3 [][][][][][]
4 [][][][][][] 
```

正如下面评论中的另一位成员所建议的那样，还有更多内容。“二维数组”只是其他数组的数组，上面的代码行是以下代码的简写：

```
int[][] array = new int[5][];
array[0] = new int[6];
array[1] = new int[6];
array[2] = new int[6];
array[3] = new int[6];
array[4] = new int[6]; 
```

或者，可以用不同的大小实例化子数组，在这种情况下，“数据形状”将不再是矩形：

```
int[][] array = new int[5][];
array[0] = new int[2];
array[1] = new int[4];
array[2] = new int[1];
array[3] = new int[6];
array[4] = new int[3];

  0 1 2 3 4 5
0 [][]        
1 [][][][]    
2 []          
3 [][][][][][]
4 [][][] 
```

使用该`ArrayList<ArrayList<Integer>>`方法将产生一个“列表列表”，其中所涉及的所有列表的长度将由于所执行的操作而增长。

没有预先定义尺寸的简写。子列表必须插入到主列表中，然后数据元素必须插入到子列表中。因此，数据的形状类似于第二个示例：

```
0 [][]        <- list with 2 elements
1 [][][][]    <- list with 4 elements
2 []          ...and so on
3 [][][][][][]
4 [][][] 
```

**警告 2：数据的默认值**

数组允许使用原始数据类型（例如“int”）以及它们的盒装对应物（例如“Integer”）。当涉及到元素的默认值时，它们的行为不同。

```
int[][] array1 = new int[5][6];         // all elements will default to 0
Integer[][] array2 = new Integer[5][6]; // all elements will default to null 
```

列表（与所有其他集合一样）仅允许使用盒装类型。因此，虽然可以预先定义列表的长度，但其元素的默认值将始终为空。

```
List<Integer> = new ArrayList<Integer>(10); // all elements will default to null 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-08T01:28:51.253

是的，这是可能的。只要有你的元素`ArrayList`也可以`ArrayLists`。

```
ArrayList<ArrayList<Integer>> twoDArrayList = new ArrayList<ArrayList<Integer>>(); 
```

这不仅适用于`ArrayLists`，还适用于其他集合类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T12:12:14.073

是的你可以！在常规数组中，当您添加第二对大括号时，您将创建一个存储数组类型对象的普通数组。你可以在这里做同样的事情，让 ArrayList 保存 ArrayList 类型的东西：`ArrayList<ArrayList<Object>> list = new ArrayList<ArrayList<Object>>();`

# php - 从mysql数据库中检索数据

> ID：15285184
> 
> 赞同：-2
> 
> 时间：2013-03-08T01:28:20.900
> 
> 标签：php, mysql

我已经创建了一个包含电子邮件、名字、姓氏、密码等列的数据库
我的登录页面使用电子邮件和密码登录
我想检索与电子邮件在同一行的姓氏列中键入的名称
我想知道如何这样做
我的代码如下所示：-

```
$query=mysql_query("SELECT * FROM Users WHERE email='$email' AND 
`password`='$encrypted_pass' "); 
```

在此之后，我希望能够为 LastName 分配一个变量，这样我就可以创建一个会话以及登录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:31:40.610

然后在列列表中指定列：

```
SELECT LastName
FROM Users
WHERE email = '$email'
... 
```

然后，您需要获取结果集以将其分配给变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:44:54.453

mysql_ 函数已正式弃用，不再维护/安全使用。

您应该改用 PHP 的 PDO，因为它是一种更安全且更面向对象的方法。只需使用您的特定凭据填写 DB_NAME、DB_USER_NAME 和 DB_USER_PASS，此代码应该适合您。

```
$database = new PDO( 'mysql:host=localhost;dbname=DB_NAME;charset=UTF-8', 'DB_USER_NAME', 'DB_USER_PASS' );

$query = $database->prepare( "SELECT * FROM Users WHERE `email` = ? AND `password` = ? " );
$query->bindValue( 1, $email );
$query->bindValue( 2, $encrypted_pass );
$query->execute();

if( $query->rowCount() > 0 ) { # If rows are found for query

    $result = $query->fetch( PDO::FETCH_ASSOC );
    echo $result[ 'LastName' ]; # <-- The LastName field you were looking for!

}
else { echo "No Rows Returned!"; } 
```

有关 PHP PDO 的更多信息，请参阅[http://www.php.net/manual/en/book.pdo.php](http://www.php.net/manual/en/book.pdo.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:45:18.497

我认为这涵盖了您要求的所有内容。启动一个会话，检查它是否良好，为我们的发布数据设置几个变量，进行一些数据验证，设置查询，查询数据库，检查结果，在会话中设置 var lastname。

```
<?php
 header('Content-type: text/html');

    session_start();
    if (session_id() === '') {
        echo 'session_id is null!';
        exit;
    }   
    $myemail = null;
    $mypassword = null;

    if (isset($_POST['Submit']) == true) {
        //assuming you have a db connection
        //mysql_connect($host, $user, $password) || die(mysql_error());
        //mysql_select_db($database) || die(mysql_error()); 

    if ((isset($_POST["username"]) === false)||
            (isset($_POST["password"]) === false)) {
            echo 'Please fill in all fields';
            exit;
        } else {
            // get the post data
            $myemail = ($_POST["username"]);
            $mypassword = ($_POST["password"]);
        }

    // check the form in database
    $sql = "SELECT * FROM Users WHERE email = '".$myemail."' 
            AND password = '".$mypassword."'";
    $result = mysql_query($sql);
    $count = mysql_num_rows($result);

    $_SESSION['loggedin'] = false;
    if ($count === 1) {
        $userrecord = mysql_fetch_array($result);
        $_SESSION['username'] = $userrecord['username'];
        $_SESSION['password'] = $userrecord['password'];
        $_SESSION['loggedin'] = true;
        $_SESSION['lastname'] = $userrecord['lastname']; 
        // assign last name to a session var

        echo 'You have been logged in successfully";
    } else {
         echo 'Wrong username or password';
         exit;
    }
} else {
    echo "No form post detected.<br><br>";
}
?> 
```

这是使用 Mysqli 的一些基本内容，因为不推荐使用 mysql_ 命令。同样，它使用了一些常用名称，因此请进行相应调整。

```
 /********************************/
    // using mysqli (untested but should work)
    /********************************/

    $mysqli = new mysqli("localhost", "dbuser", "dbpassword", "default_dbname");

    /* check connection */
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    // ecsape the query params
    $myemail = $mysqli->real_escape_string($myemail);
    $mypassword = $mysqli->real_escape_string($mypassword);

    if ($mysqli->query("SELECT * FROM Users WHERE email = '$myemail' 
                        AND password = '$mypassword'")) {
        printf("%d Rows returned.\n", $mysqli->affected_rows);

    // here is where you can set the $_SESSION vars
    // and do any other work you want to do on login.

    }

    $mysqli->close();
    /********************************/
    //end mysqli
    /********************************/ 
```

最后一件事。获取自己的 GitHub.com 存储库设置，以便您可以轻松回滚到以前的版本。这真的是必须拥有的IMO。

# function - MatLab - 将函数应用于矩阵中的每一行

> ID：15285187
> 
> 赞同：3
> 
> 时间：2013-03-08T01:28:44.730
> 
> 标签：function, matlab, matrix, row

我有一个包含 4 个整数行的矩阵，列数未指定（取决于文本文件）。

我想对矩阵的每一行独立地应用一个函数。该函数有 4 个输入和 2 个输出。

我正在尝试使用 arrayfun 函数来执行此操作，但是每当我调用该函数时，都会收到一条错误消息：“输入参数不足。”

这是函数调用：

```
[gain,phase]=arrayfun(@(x) GainPhaseComp(B(x,1:4)), 1:size(B)); 
```

其中 b 是一个 n x 4 矩阵。

这是功能：

```
function [gain,phase] = GainPhaseComp(InAmp,InPhase,OutAmp,OutPhase)

gain = 20*log10(OutAmp\InAmp);

phase = (OutPhase - InPhase);

end 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:53:28.780

您的函数`GainPhaseComp`有 4 个输入参数，但您只传递了 1 个行向量。具有 4 个元素的向量仍然是一个变量，而不是 4 个。您需要更改函数定义或拆分向量元素。

第一个选项：

```
function [gain,phase] = GainPhaseComp(inputvector)
% function body 
```

第二个选项：

```
[gain,phase]=arrayfun(@(x) GainPhaseComp(B(x,1),B(x,2),B(x,3),B(x,4)), 1:size(B,1)); 
```

# c++ - 运行时错误反转字符串

> ID：15285190
> 
> 赞同：1
> 
> 时间：2013-03-08T01:29:08.987
> 
> 标签：c++, string, runtime-error, reverse

我知道 return end 不正确，我正在考虑使用我的指针之一走到末尾，然后按字符串的大小返回以返回反转的字符串。有没有更有效的方法来做到这一点？另外，更重要的是，我在这里遇到运行时错误吗？[http://ideone.com/IzvhmW](http://ideone.com/IzvhmW)

```
#include <iostream>
#include <string>

using namespace std;

string Reverse(char * word)
{
    char *end = word;
    while(*end)
        ++end;
    --end;

    char tem;
    while(word < end) {
             tem = *word;
             *word = *end;
             *end = tem;  //debug indicated the error at this line

             ++word;
             --end;
    }

    return end;
}

int main(int argc, char * argv[]) {
    string s = Reverse("piegh");
    cout << s << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T01:33:50.257

您将“piegh”传递给 Reverse，它被转换为指向 char 的指针。指向 char 的指针指向只读字符串文字。也许您打算在尝试分配给它之前复制字符串文字“piegh”：

```
char fubar[] = "piegh";
string s = Reverse(fubar); 
```

毕竟，你怎么能辩解`"piegh"[0] = "peigh"[4];`呢？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T01:45:33.137

这部分代码是做什么的？ `while(*end) ++end; //Assuming you are moving your pointer to hold the last character but not sure y --end;`//y这个 `while(word < end)`//我也不确定这是如何工作的

此代码有效并具有相同的目的

```
 char* StrReverse(char* str)
{
int i, j, len;
char temp;
char *ptr=NULL;
i=j=len=temp=0;

len=strlen(str);
ptr=malloc(sizeof(char)*(len+1));
ptr=strcpy(ptr,str);
for (i=0, j=len-1; i<=j; i++, j--)
{
    temp=ptr[i];
    ptr[i]=ptr[j];
    ptr[j]=temp;
}
return ptr;
} 
```

# flash - 菜鸟试图让坏人在 Flash 游戏中爆炸

> ID：15285191
> 
> 赞同：-1
> 
> 时间：2013-03-08T01:29:14.410
> 
> 标签：flash, movieclip

请原谅我对此感到不快（我是 Flash 新手），但我已经到处搜索了 3 天才找到这个，我尝试了很多不同的东西，但似乎没有任何效果。这应该很简单...

场景：简单的游戏，玩家穿越太空射击坏人。（我的起始步骤是这个很棒的教程： http: [//www.makeflashgames.com/tutorials/tut4.php](http://www.makeflashgames.com/tutorials/tut4.php)）

我现在想让我的敌人在检测到碰撞时爆炸。我用我的爆炸动画制作了一个新的影片剪辑，将该影片剪辑放到我的敌人影片剪辑的帧中。这个框架我标记为爆炸。

在 GameController.as 上，我查看了检测到子弹碰撞时移除 Enemy 的代码，并移除了 removechild 代码，并将其替换为： Enemy.gotoAndPlay("Explode"); 这给了我错误 1061：通过静态类型 Class 的引用调用可能未定义的方法 gotoAndPlay。

我试过 _root.Enemy.gotoAndPlay("Explode"); 它不起作用（我读到 _root 在 as3 中不起作用）

我错过了什么？

我写的代码在几个不同的领域。在gamecontroller.as我有

```
 for (var i=bullets.length - 1; i >= 0; i--)
        {
            for (var j=enemies.length - 1; j >= 0; j--)
            {
                if (bullets[i].hitTestObject(enemies[j].collisionArea))
                {

                    playerScore +=  enemies[j].getPointsWorth();

                    mcGameStage.removeChild(bullets[i]);
                    bullets.splice(i,1);

                    Enemy.gotoAndPlay("Explode");

                    break;
                }
            }
        } 
```

如果我删除 gotoandplay，然后放入

mcGameStage.removeChild(敌人[j]); 敌人。拼接（j，1）；

然后游戏运行正常（没有爆炸动画）

@Sunil D.：您的代码就像一个魅力。然而，它给我留下了一个新问题。当爆炸动画结束时我需要移除我的敌人（第 35 帧）我尝试了这段代码

```
enemy.addEventListener(Event.ENTER_FRAME,checkFrame);

function checkFrame(event:Event):void
    {
        if (enemy.currentFrame  ==  35)
            {
                  mcGameStage.removeChild(enemies[j]);
                  enemies.splice(j,1);
                  enemy.removeEventListener(Event.ENTER_FRAME,checkFrame);
            }
    } 
```

这给了我错误 #2007：参数 child 必须为非空。在 Flash.display::DisplayObjectContainer/removeChild() 在 MethodInfo-243()

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:22:42.227

您得到的错误是，当您`Enemy.gotoAndPlay("Explode");`尝试调用类本身的`gotoAndPlay()`方法时。`Enemy`相反，您需要在 Enemy 类的**实例**`gotoAndPlay()`上调用该方法。

 **从您显示的代码中，看起来您的数组中有`Enemy`该类的实例（它是一个对象数组）。所以你可能应该能够通过这样做来爆炸敌人：`enemies``Enemy`

```
var enemy:Enemy = enemies[j] as Enemy;
enemy.gotoAndPlay("Explode"); 
```**

# html - HTML5“时间”输入间隔

> ID：15285193
> 
> 赞同：11
> 
> 时间：2013-03-08T01:29:29.163
> 
> 标签：html

也许我只是没有正确搜索，但有没有人知道一种方法可以让时间输入仅根据预设间隔使用微调器增加。所以如果是 10 分钟，让向上箭头去 +10 分钟，如果小时改变它会自动去 + 一个小时

8:50 - 向上箭头命中以 9:00 结束 - 或 - 8:50 - 向下箭头命中以 8:40 结束

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T01:41:46.920

当然，只需使用 step 属性，其中 step 指定要增加的秒数（60 秒 x 10 分钟 = 600 秒）：

```
<input type="time" value="08:30:00" step="600"> 
```

**[jsFiddle 示例](http://jsfiddle.net/MkxHE/)**

# asp.net - iCal 未在两个帐户之一的 gmail 中解析

> ID：15285194
> 
> 赞同：0
> 
> 时间：2013-03-08T01:29:43.640
> 
> 标签：asp.net, email, icalendar

我正在尝试从我的应用程序中生成一封包含 iCal 事件的电子邮件，我正在两个 Google 帐户中测试该电子邮件：一个来自 gmail，一个来自 google 应用程序。

当我在 gmail ([email1]@gmail.com) 中收到事件时，事件会像这样呈现，没有问题：

![在此处输入图像描述](../Images/4b1b518457de51741b15f6242068e4c4.png)

但是当我在我的谷歌应用程序帐户（[email2]@[domain].com）中获得它时，它没有呈现，我不知道它是否正在被解释，但它只是不向我显示事件，它只显示一个简单的电子邮件带附件（invite.ics）

这是正在生成的电子邮件：

> 投递至：[email2]@[domain].com 接收：由 10.205.80.15 发送，SMTP id 为 zs15csp100752bkb；2013 年 3 月 7 日星期四 17:12:25 -0800 (PST) X-Received：由 10.236.126.202 发送，SMTP id 为 b50mr351212yhi.25.1362705145168；2013 年 3 月 7 日星期四 17:12:25 -0800 (PST) 返回路径：收到：来自 mx 的 mail-gh0-f181.google.com (mail-gh0-f181.google.com [209.85.160.181])。 google.com 与 ESMTPS id f43si3539773yhk.290.2013.03.07.17.12.24（版本=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128）；2013 年 3 月 7 日星期四 17:12:25 -0800 (PST) 收到-SPF：中性（google.com: 209.85.160.181 既不允许也不拒绝 app@[domain].com 域的最佳猜测记录）客户端- ip=209.85.160.181；身份验证结果：mx.google.com；spf=中性 (google.com: 209.85.160\. 181 既不允许也不被 app@[domain].com 域的最佳猜测记录拒绝） smtp.mail=app@[domain].com 接收：由 mail-gh0-f181.google.com 与 SMTP id y8so186664ghb.26对于 <[email2]@[domain].com>；2013 年 3 月 7 日星期四 17:12:24 -0800 (PST) X-Google-DKIM-签名：v=1；一个=rsa-sha256；c=放松/放松；d=google.com；s=20120113；h=x-received:message-id:mime-version:from:to:date:subject :content-type:x-gm-message-state; bh=WkTwznIOK5D42bFC8nOzJjgv3+K9EWlBJWKv1ejbN9w=; b=n8BuYosOIOzxX28UkvX71UjVR9gFK00+9vixzoImOEvRKSvCimOPf1nvcpZR3AMShv rl/0ahNmVoDJ0ypjTiqA/fRZazf2M65SWJih/MGJuYmhzpyTpf371Z8NI65sAAGMvB0w KIaKl3kybyuS1TxysalZ/ZssN1vf2BT9T5Y5vVR+uAzBeAmtxZap733ZEn+Z+UvHQmOL twu64kvR/6TSWLFZgrtkGdKC8Gcet4CGeXQd/qKg0ZjpFPNXmuDXeqIz6Ftouuu7fFhd ms30c9l6zaexmpbFCCiZdtuwIfMKFjPuMnqtT6KcucDWmTTgu8LbBqNqdV5icFkrrCM2 LnTQ== X-Received: by 10.236.138.162 with SMTP id a22mr309438yhj.80.1362705144570; 2013 年 3 月 7 日星期四 17:12:24 -0800 (PST) 返回路径：收到：来自 escobar5-pc ([181.133.180.140]) 由 mx.google.com 与 ESMTPS id w2sm5267588yhh.7.2013.03.07.17.12.22 （版本=TLSv1 密码=RC4-SHA 位=128/128）；2013 年 3 月 7 日星期四 17:12:23 -0800 (PST) 消息 ID：<51393af7.027cec0a.0f2d.ffffa713@mx.google.com> MIME 版本：1.0 从：“app”到：“user”<[email2]@[domain].com>，[email1]@gmail.com 日期：2013 年 3 月 7 日星期四 17:12:23 -0800（太平洋标准时间) 主题：邀请：测试 9 内容类型：multipart/alternative；边界=--boundary_0_9e5fb21c-1a19-477c-a576-04176397fb67 X-Gm-消息状态：ALoCoQmdferSoIzk/zUGmI9SEnioj6H76AOGmK/HVLGAaL29QjhGXVj8Z9VuAewe0N38zdOEVvTH
> 
> ----boundary_0_9e5fb21c-1a19-477c-a576-04176397fb67 内容类型：文本/纯文本；charset=UTF-8 内容传输编码：base64
> 
> TWVldGluZzogVGVzdCA5DQpPcmdhbml6ZXI6IGpzZXNjb2JhckBiaW9hbnl3aGVyZS5j b20NClN0YXJ0IHRpbWU6IFRodXJzZGF5LCBBcHJpbCA0LCAyMDEzIDE6MDA6MDAgQU0N CkVuZCB0aW1lOiBUaHVyc2RheSwgQXByaWwgNCwgMjAxMyAyOjAwOjAwIEFNDQoNCkF0 dGVuZGVlczogDQoJLWpzZXNjb2JhckBiaW9hbnl3aGVyZS5jb20NCgktanNlc2NvYmFy NUBnbWFpbC5jb20NCg0KRGVzY3JpcHRpb246IHNkZmRzZmRzZnMNCkxvY2F0aW9uOiBC aW9tZWV0aW5ncw0K ----boundary_0_9e5fb21c-1a19-477c-a576-04176397fb67 Content-Type: text/html; charset=UTF-8 内容传输编码：base64
> 
> aT4NCjxsaT5qc2VzY29iYXI1QGdtYWlsLmNvbTwvbGk+DQo8L3VsPjxici8+DQo8cD48 c3Ryb25nPkRlc2NyaXB0aW9uOjwvc3Ryb25nPiBzZGZkc2Zkc2ZzPC9wPg0KPHA+PHN0 cm9uZz5Mb2NhdGlvbjo8L3N0cm9uZz4gQmlvbWVldGluZ3M8L3A+DQo8L2JvZHk+DQo8 L2h0bWw+DQo= ----boundary_0_9e5fb21c-1a19-477c-a576-04176397fb67 Content-Type: text/calendar; 方法=请求；charset=UTF-8 内容传输编码：7bit
> 
> BEGIN:VCALENDAR PRODID:-//Google Inc//Google Calendar 70.9054//EN 版本:2.0 CALSCALE:GREGORIAN METHOD:REQUEST BEGIN:VEVENT DTSTART:20130404T010000Z DTEND:20130404T020000Z DTSTAMP:20130308T011216Z ORGANI:[域][域] .com UID:event_36@[domain].com ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION;RSVP=TRUE;X-NUM-GUESTS=0:mailto:[email2]@[domain] .com 参加者；CUTYPE=个人；ROLE=REQ-PARTICIPANT；PARTSTAT=NEEDS-ACTION；RSVP=TRUE；X-NUM-GUESTS=0:mailto:[email1]@gmail.com 创建时间：20130308T011154Z 描述：sdfdsfdsfs 最后修改：20130308T011154Z 位置：某处 序列：0 状态：确认摘要：测试 9 传输：不透明 END：VEVENT END：VCALENDAR
> 
> ----boundary_0_9e5fb21c-1a19-477c-a576-04176397fb67--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:28:27.433

那么，您是否收到*任何*在第二个帐户中正确显示的邀请（例如来自第一个帐户或来自 MSFT Outlook 的邀请）？

上面的消息看起来很好，但可能想尝试下面的 MIME 结构。

```
content-type:multipart/mixed
      content-type:multipart/alternative
          essentially the 3 mime parts that you already have above
      content-type:text/calendar
      Content-Disposition: attachment; filename="invite.ics"
          the ics invitation (again) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:54:13.627

我在 ical 文本中更改了 METHOD:REQUEST 为 METHOD:PUBLISH，现在它向我显示了两个帐户中的事件，它不会自动添加到谷歌日历，但至少它显示在 gmail 消息中

# c# - SimpleCursorAdapter IllegalArgumentException

> ID：15285195
> 
> 赞同：1
> 
> 时间：2013-03-08T01:29:44.867
> 
> 标签：c#, android, simplecursoradapter

我目前正在使用 Visual Studio 2010 和 C# 进行 Android 编程。编译时出现错误： `Unhandled Exception: Java.Lang.IllegalArgumentException:`有人可以解决这个问题吗？

这是我的代码：

```
 void GetCursorView()
          {
             Android.Database.ICursor icTemp = sql.GetRecordCursor();
             if (icTemp != null)
             {
             icTemp.MoveToFirst();
             ListView lvTemp = FindViewById(Resource.Id.lvtemp);
             string[] from = new string[] { "id", "fname", "age", "addr" };
              int[] to = new int[] {
              Resource.Id.t1,
              Resource.Id.t2,
              Resource.Id.t3,
              Resource.Id.t4
                };
          // creating a SimpleCursorAdapter to fill ListView object.
             SimpleCursorAdapter scaTemp = new SimpleCursorAdapter(this,Resource.Layout.recordview, icTemp, from, to); //error on this line
                     lvTemp.Adapter = scaTemp;
                            }
                        else
                         {
                         text.Text = sql.Message;
                            }
                      } 
```

这是我的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
    <AbsoluteLayout
        android:id="@+id/widget35"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        xmlns:android="http://schemas.android.com/apk/res/android">
      <ListView
        android:id="@+id/lvtemp"
        android:layout_width="276dp"
        android:layout_height="147dp"
        android:background="#ff999999"
        android:padding="100dp"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:drawSelectorOnTop="true"
        android:gravity="center"
        android:layout_x="22dp"
        android:layout_y="0dp" 
        />
      <TextView
        android:id="@+id/t1"
        android:layout_width="268dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:hint="ID"
        android:layout_x="27dp"
        android:layout_y="157dp" />
      <TextView
        android:id="@+id/t2"
        android:layout_width="264dp"
        android:layout_height="22dp"
        android:hint="Name"
        android:layout_x="30dp"
        android:layout_y="204dp" />
      <TextView
        android:id="@+id/t3"
        android:layout_width="261dp"
        android:layout_height="wrap_content"
        android:hint="age"
        android:layout_x="31dp"
        android:layout_y="244dp" />
      <TextView
        android:id="@+id/t4"
        android:layout_width="269dp"
        android:layout_height="wrap_content"
        android:hint="Address"
        android:layout_x="30dp"
        android:layout_y="282dp" />
      <

        Button
            android:id="@+id/b1"
            android:layout_width="182dp"
            android:layout_height="wrap_content"
            android:text="OK"
            android:layout_x="77dp"
            android:layout_y="324dp" />

    </AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:48:15.447

我想而不是

```
SimpleCursorAdapter scaTemp = new SimpleCursorAdapter(this,Resource.Layout.recordview, icTemp, from, to); 
```

做

```
SimpleCursorAdapter scaTemp = new SimpleCursorAdapter(this, icTemp,Resource.Layout.recordview, from, to); 
```

# haskell - 类型级程序的分层模块名称

> ID：15285197
> 
> 赞同：6
> 
> 时间：2013-03-08T01:30:05.663
> 
> 标签：haskell, module, type-families, data-kinds

假设我在 Haskell 中编写了一些[类型级别的程序：](http://www.haskell.org/ghc/docs/latest/html/users_guide/type-families.html#synonym-families)

```
type family NAryFn (n::Nat) (dom::*) (cod::*) :: *
type instance NAryFn Ze dom cod = cod
type instance NAryFn (Su n) dom cod = dom -> NAryFn n dom cod 
```

我认为这很有用，我想在我的项目中使用它。所以我把它放在一个模块中。

什么是模块的好分层名称？（参见[Haskell 分层模块](http://www.haskell.org/ghc/docs/latest/html/libraries/)）

很多数据结构都存在于`Data`( `Data.Text`,`Data.List`等) 中，各种结构化效果的方式都存在于`Control`诸如`Control.Monad`or`Control.Applicative`中。

类型级程序应该放在哪里？ `Type`? `TypeFamily`? 达成共识了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:13:48.390

我检查了hackage ，大多数提供类型级别功能的包都存在于`Data`层次结构中，`Data.Type`在. 不过也有一些例外。`Data.TypeLevel``Data.Number.Etc.TypeLevel`

type-level-natural-number 包位于 TypeLevel 下：http: [//hackage.haskell.org/package/type-level-natural-number](http://hackage.haskell.org/package/type-level-natural-number)

tfp 包位于类型下：http: [//hackage.haskell.org/package/tfp](http://hackage.haskell.org/package/tfp)

许多 nicolas frisby 的包都在 Type 下：例如[http://hackage.haskell.org/package/type-booleans](http://hackage.haskell.org/package/type-booleans)和[http://hackage.haskell.org/package/type-cereal](http://hackage.haskell.org/package/type-cereal)。

因此，目前显然没有达成共识。就我个人而言，我认为这`Types`是所有这些东西的合适去处，但就像 Haskell 社区的惯例一样，一切都以`Data`.

我想，几乎所有东西都是一流的语言的危险:-)

您可以在 hackage 的“类型系统”类别中看到一些（但不是全部）类型级包：http://hackage.haskell.org/packages/archive/pkg-list.html#cat:type% [20system](http://hackage.haskell.org/packages/archive/pkg-list.html#cat:type%20system)

# asp.net - 如何在 ASP.NET 中自定义日历选择

> ID：15285201
> 
> 赞同：0
> 
> 时间：2013-03-08T01:30:37.173
> 
> 标签：asp.net, vb.net

我正在尝试使用文本框、日历、按钮和更新字段在 ASP.Net 中提出一个日期时间选择器。

如果用户单击按钮，则带有隐藏日历的面板将变为可见，如果用户选择日期，则日历的可见性将变为 false，并且他的日期将分配给 textBox。

如果用户想要更改月份，我的问题就来了，因为在这种情况下，日历会因为 selectionChange 被触发而消失。

我的问题是如何才能找出月份的变化并仅在选择日期时才绑定面板的隐藏？

非常感谢你。

以下是代码示例：

前部：

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
        <ContentTemplate>
    <asp:TextBox ID="TextBox2" runat="server" />
            <asp:ImageButton ID="Imbut" runat="server" ImageUrl="imagesNew/calender.png" Height="17px" Width="17px" />
    </ContentTemplate>
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Calendar1" EventName="SelectionChanged" />
        </Triggers>
    </asp:UpdatePanel>

    <br />

    <br />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
        <asp:Panel ID="Panel1" runat="server">
            <asp:Calendar ID="Calendar1" runat="server" Height="129px" Width="209px">
            </asp:Calendar>
        </asp:Panel>
        </ContentTemplate>
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Imbut" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel> 
```

后部

```
Protected Sub Imbut_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Imbut.Click
    Panel1.Visible = True
End Sub

Protected Sub Calendar1_SelectionChanged(ByVal sender As Object, ByVal e As EventArgs) Handles Calendar1.SelectionChanged

        TextBox2.Text = Calendar1.SelectedDate.ToString("dd/MM/yyyy")
        Panel1.Visible = False

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:17:45.717

我在类似的问题上苦苦挣扎。问题是（如您所说）在回发时控件被重置。我从来没有找到用 asp.net 控件优雅地做到这一点的方法。我能够使用 jQuery 日历和 asp:hidden 字段来完成此操作。通过JavaScript保持IT客户端，我能够允许用户导航日历更改日期等。选择日期时，将值设置为UI中的文本框以及隐藏的字段，然后在提交中，在提交中，该值，文本框或隐藏字段被服务器端拾取并（在我的情况下）用作过滤器参数。

# ejb - 如何在 Websphere 8.5 上部署 EJB 3.1 会话 bean

> ID：15285203
> 
> 赞同：2
> 
> 时间：2013-03-08T01:30:52.620
> 
> 标签：ejb, jersey, websphere, jax-rs, websphere-8

现在我使用 Jersey 在 Websphere 8.5 上创建 restful web 服务。
我还希望restful web 服务具有EJB 3.1 的能力。
我的宁静网络服务代码如下：

```
@Stateless
@Path("/tagServiceRS/{tagid}")
@Interceptors(TestTagServiceInterceptor.class)
public class TagServiceRS implements Serializable{
    private static final long serialVersionUID = 5L;
    private static final Logger log = LoggerFactory.getLogger(TagServiceRS.class);

    @EJB
    private TagTestService tagTestService;

    @PersistenceContext(unitName = "tag-ejb")
    private EntityManager entityManager;

    @GET
    @Produces("text/plain")
    public String findTagById(@PathParam("tagid") String tagid) {
       return "TAG";
    }

    /**
     * @return the tagTestService
     */
    public TagTestService getTagTestService() {
        return tagTestService;
    }

    /**
     * @param tagTestService the tagTestService to set
     */
    public void setTagTestService(TagTestService tagTestService) {
        this.tagTestService = tagTestService;
    } 
```

当我在 Websphere 8.5 上部署战争时。TagServiceRS 已成功部署为一个 RESTful Web 服务。我对其进行了测试。没关系。
但是 TagServiceRS作为**EJB 会话 bean部署****失败**。TagServiceRS 的**entityManager**和**tagTestService**字段都是**null**。 我看到日志，没有错误或警告日志。 下面是我的 TagTestServiceBean 代码。

 ******```
@Stateless
public class TagTestServiceBean implements TagTestService, Serializable {

    private static final long serialVersionUID = 5L;
    private static final Logger log = LoggerFactory.getLogger(TagTestServiceBean.class);

    @Override
    public Tag testFindTagById(Long id) {
        log.info("testFindTagById ++++++++++++++++++++++++++++++++++++++++ invoked for id: {}", id);
        return new Tag();
    }

}

    @Remote
public interface TagTestService extends Serializable {

    /**
     * @param id
     *            the ID from database
     * @return a tag, may null
     */
    Tag testFindTagById(Long id);

} 
```

如果有任何答案。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:07:57.150

将注释从 更改`@EJB`为`@Resource`

```
@Resource
private TagTestService tagTestService; 
```

类本身不需要使用注解进行`@Stateless`注解。

*此外，JAX-RS 根资源和提供者类必须具有 JCDI 指定范围。范围控制 JCDI 托管 bean 的生命周期。根资源类可以具有任何有效范围，例如 @javax.enterprise.context.RequestScoped，这使得 JAX-RS 根资源类的行为与未启用 JCDI 的应用程序中的行为相同。javax.ws.rs.core.Application 子类和 JAX-RS 提供者必须具有 @javax.enterprise.context.ApplicationScoped 注释。*

更多信息[在这里](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/twbs_jaxrs_jcdi.html)。******

# python - 在 Python 中使用带有变量连接的 rsync 时出错

> ID：15285205
> 
> 赞同：1
> 
> 时间：2013-03-08T01:31:16.957
> 
> 标签：python, python-2.7, rsync, os.system

我正在从命令行运行以下脚本：

```
os.system("rsync -avrz -e \'ssh -i /root/.ssh/keyfile.pem\' /var/www/" + folder_name + " root@server.com:" + destfoldertosync) 
```

当我打印出 rsync 时，我得到了这个：

```
rsync -avrz -e 'ssh -i /root/.ssh/keyfile.pem' /var/www/folder_name, root@server.com:/var/www/destfoldertosync 
```

“/var/www/folder_name”正在破坏 rsync。它适用于那里硬编码的文件夹名称。为什么在路径后插入逗号，我该如何阻止它这样做？

注意：我不能使用 paramiko，所以我希望它可以与 os.system 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:37:45.153

我犯了在cli上用逗号分隔参数的错误。现在它起作用了。

# hyper-v - 使用没有“基本”身份验证的openwsman连接到Hyper-V？

> ID：15285206
> 
> 赞同：2
> 
> 时间：2013-03-08T01:31:37.043
> 
> 标签：hyper-v, wsman

我正在尝试测试 WS-MAN 管理多个虚拟机管理程序（主要是 ESXi 和 Hyper-V）的功能；在 Hyper-V 方面，我遇到的所有示例都坚持首先将 Hyper-V 身份验证调整为“基本”；有谁知道这是当前 OpenWSMAN 实现中的一个缺点，还是设计它不能支持其他身份验证机制，或者如果我的理解有误，请纠正我:-)。

系统详细信息：主机操作系统：SL 6.1 OpenWSMAN：2.2.0（客户端版本）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:33:31.303

我找到了上述观察的解释。在 Linux 上，OpenWSMAN 使用 OpenSSL 进行身份验证连接，现在 Linux 上的 OpenSSL 支持“摘要”而 Windows 机器不支持。Windows 支持 OpenSSL 目前不支持的 Kerbos/GSSAPI。

谢谢！

# service - 我可以使用 AutoIT，在服务器上作为服务运行，使用发送功能

> ID：15285209
> 
> 赞同：-1
> 
> 时间：2013-03-08T01:31:42.230
> 
> 标签：service, autoit, adobe-illustrator

我正在尝试通过使用 AutoIT 及其发送功能来触发 Illustrator javascripts。AutoIT 是通过 Perl 脚本调用的，它在我打开 Illustrator 并从命令行运行 Perl 脚本时工作。（Perl 脚本在连续循环中运行，由到达热文件夹的文件触发。）当我有一个活动连接时，它在服务器上运行。但是，当我断开连接并保持会话处于活动状态时，autoIT 进程不起作用。（我猜这是因为我正在使用需要活动窗口的发送功能。）

这是在 Windows 2003 服务器上运行的。

这是可能的还是我在风中放屁。

提前致谢。

* * *

代码：

```
Run("C:\Program Files\Adobe\Adobe Illustrator CS6\Support     Files\Contents\Windows\Illustrator.exe")

WinActivate("Adobe Illustrator CS6")
sleep (3000)

Send("!f")
Send("{DOWN 17}")
Send("{RIGHT 2}")
Send("{ENTER}") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T19:33:35.820

这是 AutoIT 中有关 Send() 函数的一些文档。此外，如果您在关键示例之后查看页面底部附近，您可以看到它还建议尝试使用 ControlSend：[http ://www.autoitscript.com/autoit3/docs/functions/Send.htm](http://www.autoitscript.com/autoit3/docs/functions/Send.htm)

# php - 使用带有 Silex 的 SecurityServiceProvider 验证 HMAC

> ID：15285217
> 
> 赞同：0
> 
> 时间：2013-03-08T01:32:34.000
> 
> 标签：php, symfony, hmac, silex

在允许用户访问系统之前，我要在我想要验证的 URL 中发送一个 hmac。没有用户数据库，因此它只是验证 url 参数以验证它是由正确的服务器生成的，用户无法更改这些参数来访问系统的其他部分。

我想知道是否有人对 SecurityServiceProvider 做过类似的事情。我可以使用在路由和安全防火墙规则之后触发的 before 中间件来执行此操作。如果可能的话，我想在防火墙上停止这个请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:02:31.590

我决定“之前”使用 silex 的中间件功能。我确定这可能不是解决此问题的最佳方法，但我的应用程序没有用户或身份验证，所以我只需要检查密钥是否正确并返回响应。如果有人对改进这一点有任何意见，我很想听听他们的意见。

当外部系统生成 url 时，它们必须使用我的配置文件中定义的共享密钥，并且可以通过 $app['config']['hmac_key'] 访问。hmac 是在路径中 hmac 之后的所有内容上生成的。所以如果我有子文件夹 domain.com/folder/hmac/arg1/arg2/arg3。before 过滤器在 hmac 处拆分路由并在此之后构建路径。

```
// Before firing the controller check the hmac matches, otherwise return 403.
$app->before(function (Request $request) use ($app) {
    // 40 chars in a sha1 hmac hash
    if(!preg_match('/^[0-9a-f]{40}$/i', $request->get('hmac')))
        $app->abort(403, "Invalid key.");

    // break the route down to the arguments used in hmac
    $route = explode('hmac_', $request->get('_route'));
    $route = explode('_',$route[1]);
    // build the path used to generate hmac
    $path = array();
    foreach($route as $r)
        if($v = $request->get($r))
            $path[] = $v;

    $path = implode('/', $path);

    // Generate hmac hash from path and key
    $hmac = hash_hmac("sha1", $path, $app['config']['hmac_key']);

    // If the hmac's don't match return 403
    if($hmac !== $request->get('hmac'))
        $app->abort(403, "Invalid key.");
}); 
```

# c# - 不确定如何让 Glimpse.Log4Net 正常工作

> ID：15285218
> 
> 赞同：3
> 
> 时间：2013-03-08T01:32:37.487
> 
> 标签：c#, log4net, glimpse

我正在尝试让 Glimpse.Log4Net 在现有的 ASP.Net MVC v4 项目（在 VS2010 中）中工作，遵循[此处](https://github.com/jchadwick/Glimpse.Log4Net)和[此处](http://gouigoux.com/blog-fr/?p=750)的文档，但尽管该解决方案编译并运行 Glimpse 并且 log4net 似乎工作正常，但我可以'在我期望的 Glimpse 窗口中看不到 log4net 的内容，如第二个链接中页面末尾附近所示。

[我已经使用这种方法](http://code.google.com/p/autofac/wiki/Log4NetIntegration)对 Autofac 进行了依赖注入，我认为它不会产生干扰，因为我在日志文件中获得了预期的条目。

谁能指出我正确的方向？

在我的控制器中：

```
public class QuoteController : Controller
{
  private readonly PrintCostEntities db;

  private readonly ILog logger;

  public QuoteController(PrintCostEntities db, ILog logger)
  {
    if (db == null)
    {
      throw new ArgumentNullException("db");
    }

    if (logger == null)
    {
      throw new ArgumentNullException("logger");
    }

    this.db = db;
    this.logger = logger;
  }

  public ActionResult Index()
  {
    this.logger.DebugFormat("Index");

    return this.View(this.db.Quotes);
  }
} 
```

在 global.asax 中：

```
public class MvcApplication : System.Web.HttpApplication
{
  private readonly ILog logger;

  protected MvcApplication()
  {
    XmlConfigurator.Configure();
    this.logger = LogManager.GetLogger(typeof(MvcApplication));
  }

  protected void Application_Start()
  {
    this.logger.Debug("Application_Start");
  }
} 
```

在 web.config 中：

```
<configuration>
  <configSections>            
    <section name="glimpse" type="Glimpse.Core.Configuration.Section, Glimpse.Core" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <system.web>
    <httpModules>
      <add name="Glimpse" type="Glimpse.AspNet.HttpModule, Glimpse.AspNet" />
    </httpModules>
    <httpHandlers>
      <add path="glimpse.axd" verb="GET" type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet" />
    </httpHandlers>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="Glimpse" type="Glimpse.AspNet.HttpModule, Glimpse.AspNet" preCondition="integratedMode" />
    </modules>
    <handlers>
      <add name="Glimpse" path="glimpse.axd" verb="GET" type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet" preCondition="integratedMode" />
    </handlers>
  </system.webServer>
  <glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd" /> 
  <log4net>  
    <appender name="GlimpseAppender" type="Glimpse.Log4Net.Appender.GlimpseAppender">
      <threshold value="ALL" />
    </appender>
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <threshold value="ALL" />
      <file value="log4net.log" />
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <datePattern value="yyyyMMdd" />
      <maxSizeRollBackups value="5" />
      <param name="StaticLogFileName" value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n" />
      </layout>
    </appender>
    <root>
      <appender-ref ref="GlimpseAppender" />
      <appender-ref ref="RollingLogFileAppender" />
    </root>
  </log4net>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T16:25:02.073

该软件包已于[2013 年 5 月更新到 1.0 版](http://www.nuget.org/packages/Glimpse.Log4Net/)，该版本在我的 asp.net mvc4 应用程序中对我来说很好用。

当没有附加到`GlimpseAppender`. 这有几个可能的原因：

*   没有[`GlimpseAppender`配置](https://github.com/jchadwick/Glimpse.Log4Net#enhanced-configuration-via-log4net)- 这发生在我身上，因为我有一个自定义 log4net 配置
*   在您的消息被记录后，在您的控制器中某处进行了重定向。您的典型`RedirectResult`将[通过客户端](https://stackoverflow.com/questions/4387127/mvc-redirectresult)重定向，从而产生*新的请求*。当前 http 请求的`GlimpseAppender`唯一日志消息，因此您不会看到重定向之前的任何消息。（注意：因此，如果您执行 post-redirect-get，最有趣的日志消息*不在*glimpse 日志选项卡中）

然后，当然，没有记录消息的“通常” [log4net](https://stackoverflow.com/questions/tagged/log4net)原因。但我认为这个问题的题外话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:06:12.047

log4net Glimpse 插件由[Jess Chadwick](https://twitter.com/jchadwick)创建，尚未与最新版本的 Glimpse 保持同步。

您将希望在 MVC4 中使用 1.1 版本的 Glimpse，但 log4net 插件尚未更新。

好消息是[Glimpse.Log4Net 是开源](https://github.com/jchadwick/Glimpse.Log4Net)的，因此您应该能够轻松更新它以使用新接口。我什至可能会在下周亲自更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T20:22:01.377

万一有人正在寻找有关此问题的更多信息-对我有用的方法：

*   VS 2013，MVC4，一瞥 1.8.5，log4net 1.2.11.0

*   使用单独的 log4net.config 文件

*   在 AssemblyInfo.cs 我有 [assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)] 在 Global.asax Application_Start() 我有 log4net.Config.XmlConfigurator.Configure();

*   Glimpse 中没有 log4net 输出 - 该选项卡可见但已涂黑

*   感谢我在这里找到的提示：[https](https://stackoverflow.com/a/4558906/3590792) ://stackoverflow.com/a/4558906/3590792我将 Application_Start() 代码更改为：

    字符串 l4net = Server.MapPath("~/log4net.config"); log4net.Config.XmlConfigurator.ConfigureAndWatch(new System.IO.FileInfo(l4net));

和 Glimpse log4net 开始工作

# xml - 在 XML 字段中检测 URL

> ID：15285223
> 
> 赞同：1
> 
> 时间：2013-03-08T01:32:57.610
> 
> 标签：xml, xslt, hyperlink, detection

XSLT 是否可以通过脚本或其他方式检测是否存在：

```
"http://..." 
```

或者

```
<a>"http..."</a> 
```

在消息字段中并将其样式设置为链接。我已经做好了最坏的打算！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:19:12.943

**XPath 2.0 提供了 RegEx 处理的宝贵特性。在 XSLT 2.0+ 中使用它可以编写**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vurlRegex"
 >(http|https|ftp|mailto)://(\p{L}+\.)+\p{L}+(/\p{L}([./?%&amp;=])*)?</xsl:variable>

 <xsl:template match="/*/*[not(matches(.,$vurlRegex))]">
  <xsl:sequence select='"Warning:", ., " isn&apos;t a valid Uri&#xA;"'/>
 </xsl:template>

 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
 <a>http://abc.com</a>
 <b>\`\```^^^</b>
</t> 
```

**产生了想要的正确结果**：

```
Warning:<b>\`\```^^^</b> isn't a valid Uri 
```

**请注意**：

使用的 RegEx 可能不是匹配 Url 最精确的 - 您可以用更好和更精确的 RegEx 替换它。

* * *

**可以用一种更可重用的形式表达这种有用的词法检查，使用`xsl:function`：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vurlRegex"
 >(http|https|ftp|mailto)://(\p{L}+\.)+\p{L}+(/\p{L}([./?%&amp;=])*)?</xsl:variable>

 <xsl:template match="/*/*[not(my:IsValidUrl(.))]">
  <xsl:sequence select='"Warning:", ., " isn&apos;t a valid Uri&#xA;"'/>
 </xsl:template>

 <xsl:template match="text()"/>

 <xsl:function name="my:IsValidUrl" as="xs:boolean">
  <xsl:param name="pStr" as="xs:string"/>

  <xsl:sequence select="matches($pStr, $vurlRegex)"/>
 </xsl:function>
</xsl:stylesheet> 
```

* * *

**更新**：

**在这里，我使用了 Michael Kay 在他的评论中提供的表达式引用——这是[来自 XSD 工作组发布的 W3C 说明，与 XSD 规范分开](http://www.w3.org/2011/04/XMLSchema/TypeLibrary-URI-RFC3986.xsd)**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vurlRegex"
 >((([A-Za-z])[A-Za-z0-9+\-\.]*)
   :((//(((([A-Za-z0-9\-\._~!$&amp;'()*+,;=:]|(%[0-9A-Fa-f][0-9A-Fa-f]))*@))?
   ((\[(((((([0-9A-Fa-f]){0,4}:)){6}((([0-9A-Fa-f]){0,4}:([0-9A-Fa-f]){0,4})
   |(([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])
   |(25[0-5]))\.([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])
   |(25[0-5])))))
   |(::((([0-9A-Fa-f]){0,4}:)){5}((([0-9A-Fa-f]){0,4}:([0-9A-Fa-f]){0,4})
   |(([0-9]|([1-9][0-9])|(1([0-9]){2})
   |(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})
   |(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])|(25[0-5])))))
   |((([0-9A-Fa-f]){0,4})?::((([0-9A-Fa-f]){0,4}:)){4}((([0-9A-Fa-f]){0,4}:([0-9A-Fa-f]){0,4})
   |(([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]
   |([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])
   |(25[0-5])))))|(((((([0-9A-Fa-f]){0,4}:))?([0-9A-Fa-f]){0,4}))?::((([0-9A-Fa-f]){0,4}:)){3}((([0-9A-Fa-f]){0,4}:([0-9A-Fa-f]){0,4})
   |(([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]
   |([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})
   |(2[0-4][0-9])|(25[0-5])))))|(((((([0-9A-Fa-f]){0,4}:)){0,2}([0-9A-Fa-f]){0,4}))?
   ::((([0-9A-Fa-f]){0,4}:)){2}((([0-9A-Fa-f]){0,4}:([0-9A-Fa-f]){0,4})|
   (([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|
   ([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})
   |(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})
   |(2[0-4][0-9])|(25[0-5])))))|(((((([0-9A-Fa-f]){0,4}:)){0,3}([0-9A-Fa-f]){0,4}))
   ?::([0-9A-Fa-f]){0,4}:((([0-9A-Fa-f]){0,4}:([0-9A-Fa-f]){0,4})|(([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})
   |(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])
   |(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5])))))
   |(((((([0-9A-Fa-f]){0,4}:)){0,4}([0-9A-Fa-f]){0,4}))?::((([0-9A-Fa-f]){0,4}:([0-9A-Fa-f]){0,4})
   |(([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})
   |(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]
   |([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5])))))
   |(((((([0-9A-Fa-f]){0,4}:)){0,5}([0-9A-Fa-f]){0,4}))?::([0-9A-Fa-f]){0,4})
   |(((((([0-9A-Fa-f]){0,4}:)){0,6}([0-9A-Fa-f]){0,4}))?::))|(v([0-9A-Fa-f])+\.(([A-Za-z0-9\-\._~]
   |[!$&amp;'()*+,;=]|:))+))\])|(([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])
   |(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]|([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5]))\.([0-9]
   |([1-9][0-9])|(1([0-9]){2})|(2[0-4][0-9])|(25[0-5])))|(([A-Za-z0-9\-\._~]|(%[0-9A-Fa-f][0-9A-Fa-f])
   |[!$&amp;'()*+,;=]))*)((:([0-9])*))?)((/(([A-Za-z0-9\-\._~!$&amp;'()*+,;=:@]|(%[0-9A-Fa-f][0-9A-Fa-f])))*))*)
   |(/(((([A-Za-z0-9\-\._~!$&amp;'()*+,;=:@]|(%[0-9A-Fa-f][0-9A-Fa-f])))+((/(([A-Za-z0-9\-\._~!$&amp;'()*+,;=:@]|(%[0-9A-Fa-f][0-9A-Fa-f])))*))*))?)
   |((([A-Za-z0-9\-\._~!$&amp;'()*+,;=:@]|(%[0-9A-Fa-f][0-9A-Fa-f])))+((/(([A-Za-z0-9\-\._~!$&amp;'()*+,;=:@]|(%[0-9A-Fa-f][0-9A-Fa-f])))*))*)
   |)((\?((([A-Za-z0-9\-\._~!$&amp;'()*+,;=:@]|(%[0-9A-Fa-f][0-9A-Fa-f]))|/
   |\?))*))?((#((([A-Za-z0-9\-\._~!$&amp;'()*+,;=:@]|(%[0-9A-Fa-f][0-9A-Fa-f]))|/|\?))*))?)</xsl:variable>

 <xsl:template match="/*/*[not(my:IsValidUrl(.))]">
  <xsl:sequence select='"Warning:", ., " isn&apos;t a valid Uri&#xA;"'/>
 </xsl:template>

 <xsl:template match="text()"/>

 <xsl:function name="my:IsValidUrl" as="xs:boolean">
  <xsl:param name="pStr" as="xs:string"/>

  <xsl:sequence select="matches($pStr, $vurlRegex, 'x')"/>
 </xsl:function>
</xsl:stylesheet> 
```

# php - 编写 sql 和 if 语句比较数据库中的两个项目的最佳方法

> ID：15285233
> 
> 赞同：0
> 
> 时间：2013-03-08T01:33:53.907
> 
> 标签：php, mysql, if-statement

尝试编写一个新概念；但是，不确定它是否能正常工作。在这一点上，我只是在玩一个想法。

因此，我的数据库中有一个名为 defaultpermissions 的表，我有 2 列，“名称”和“状态”，其中名称是权限，状态状态是打开还是关闭（ 1 或 0 ）

因此，我在 defaultpermissions 页面上有一个复选框列表，管理员可以在其中设置保存默认权限。

对于每个复选框，它会检查该权限是打开还是关闭（1 或 0）。

最好的方法是如何做到这一点？

1.  我是否必须为每个权限运行一个新查询（获取 $status where $name = '$permission'）
2.  或者我可以为while语句中的每个权限一次比较两列吗？

抱歉，它太笼统了，但在这一点上，它只是我试图弄清楚的一个概念，并希望得到一些帮助。

例子：

一些权限

*   添加页面[复选框]
*   隐藏页面 [复选框]
*   删除页面 [复选框]
*   添加内容[复选框]
*   编辑内容[复选框]
*   实时编辑器 [复选框]

数据库：

*   名称 = 添加页面状态 = 0
*   名称 = 隐藏页面状态 = 1
*   名称 = 删除页面状态 = 0
*   名称 = 添加内容状态 = 1

等等等等

对于每一个，它需要比较行'name'和'status'来确定它是否已经激活，因此它知道是否要选中该框。我不介意为每个权限做一个新的查询，但是有一些，所以我认为这可能是一件坏事。目前，可以在此页面上检查大约 20 个默认权限选项。感谢您提前输入

PS Semi 是 PHP 新手，边走边学……如果有更好的设置方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:08:25.890

您的问题的简单解决方案如下：

*   添加一个隐藏的输入字段来保存您的权限状态（使用您的示例，这将是 1 或 0
*   使用 PHP，使用类似于以下的语句：

`'<input type="checkbox" name="input Name Here" value="1"' . ($dbRow['Status'] == 1 ? ' checked="checked"' : '') . ' />';`

它使用从 db select 中找到的状态并使用该状态将框默认为选中状态。

*   接下来，您可以采取一种方法（我在这种情况下使用[switch 语句](http://www.w3schools.com/php/php_switch.asp)）来查看复选框和隐藏字段的值是否匹配。

> $checkBoxVal = ($_GET['checkBoxName'] ? 1 : ($_POST['checkBoxName'] ? 1 : 0));
> 
> $hiddenVal = ($_GET['hiddenFieldName'] == 1 || $_POST['hiddenFieldName'] == 1 ? 1 : 0);
> 
> if ($checkBoxVal <> $hiddenVal) {
> 
> ```
> do updates here 
> ```
> 
> }//万一

这样做是查看您的复选框是否被勾选。如果是，那么`$checkBoxVal`将是 1

然后它将它与通过隐藏输入的最后一个值进行比较。

如果它们的隐藏字段为 0，并且您勾选框并提交表单，则值将不同，然后您可以进行所需的更新。

对我来说，如果初始值发生更改，这是更改数据库中任何内容的好方法（也就是说，如果您没有使用 jQuery`$.ajax`或 XHR 请求动态地执行此操作。）

如果您需要有关此的更多信息或需要示例，请告诉我。

希望这有帮助。祝你好运。=)

编辑：

您的查询应该选择您要使用复选框更改的行。

> 从默认权限中选择名称、状态

`mysql_fetch_assoc`然后你会像这样在结果查询上使用 PHPs 的函数

> 而 ($row = mysql_fetch_assoc($result)) {
> 
> //在此处使用 $row 作为您返回的行来输入您的输入字段
> 
> }//END WHILE 循环

也许这会让它更清楚一点=）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T01:58:32.850

我认为你的方向很好。为了改进设计可能是一个好主意来识别..

*   所有权限名称/概念
*   所有权限状态（如果权限名称之间的值相同，则为身份）

现在您已经掌握了所有信息，请分析复选框是否正确表示您想要表示的内容。例如，一个复选框可以很好地表示是否授予了权限，但表示与真/假无关的状态就不是很好了。

如果后者不是您的情况，您将能够创建一个列表，其中包含表示默认权限集状态的标签和复选框。查询将类似于

还可以考虑添加另一列以向用户授予权限。您可以使用用户名来过滤每个用户的权限集以及默认集。例如...

```
Select * from permissionsets where user like 'default' >> this will return the default set.
Select * from permissionsets where user like 'user1' >> this will return user1 permission set. 
```

你认为这会有帮助吗？谢谢！

@leo

# c# - 语言本地化可以从 .resx 文件自动逆向工程吗？

> ID：15285234
> 
> 赞同：7
> 
> 时间：2013-03-08T01:33:57.593
> 
> 标签：c#, asp.net-mvc, visual-studio, localization

我正在使用一个 MVC 4 应用程序，该应用程序最初是为了可能需要语言本地化而创建的，因此在整个项目中大量使用 .resx 文件和相应的引用嵌入。事实证明，该应用程序只会被说英语的观众使用，而且实际上没有加载其他语言。我们现在得到的是每次我们需要将文本放在页面上并且增加英语的不一致性时的开销语言被硬编码到无法直接访问资源文件的地方，例如 .js 文件和数据库中的参考数据。

除了大量的复制和粘贴之外，是否有任何自动化方法可以从资源文件中提取英语语言值并替换它们在视图中的引用？在一个完美的世界里，会有一个工具来做到这一点，当然它在*概念上*是可编写脚本的，这样的东西已经存在了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:45:15.123

您必须编写脚本。我用 O2 平台 AST 操作 Mono.Cecil 和 mono Cecil API 做了类似的事情。

如果你给我一个使用你需要的小项目（一个 resx 文件和一个 MVC 视图）我可以向你展示一个代码片段示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:30:00.803

我还没有看到任何可以解决这个问题的东西。我的第一个想法是因为大多数“开箱即用”解决方案中可能出现的本地化问题。

这可能有点牵强，但试一试。您能否编写一个 C# 应用程序来加载包含资源文件的程序集，然后遍历项目中的每个文件并用值替换资源键？

就像你说的，脚本化是可能的，在我看来，这似乎是完成任务的最简单但最粗暴的方式。根据您正在谈论的资源数量，显然复制/粘贴可能更容易和更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:32:52.323

附属程序集..如果您将所有应用程序资源放置在项目中，则创建您要实现的非默认语言。例如 fr_ca.ErrorMsg | en_gb.ErrorMsg 和 en_Us.ErrorMsg。默认语言可以在主 Thread.CultureInfo 中指定，如果 en_us 则在 en_us 文件中填写所有需要的条目，并且只有在默认资源->en_us 中不存在其他资源时才会加载其他资源。

# if-statement - CoffeeScript 是否有简化的“和”、“或”运算符？

> ID：15285235
> 
> 赞同：0
> 
> 时间：2013-03-08T01:34:33.787
> 
> 标签：if-statement, coffeescript, control-flow, simplify, simplification

是否可以在 CoffeeScript 中简化：

```
redisSETNXReply.toString() == '1' or redisSETNXReply.toString() =='0' 
```

类似于：

```
redisSETNXReply.toString() == '1' or '0' 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:37:49.967

你可以这样做：

```
redisSETNXReply.toString() in ['1', '0'] 
```

# python - 全局变量问题 Python

> ID：15285236
> 
> 赞同：1
> 
> 时间：2013-03-08T01:34:45.580
> 
> 标签：python, string, python-3.3

如果我今晚很愚蠢，我不会这样做，但由于某种原因，这在 Python 中不起作用。我正在尝试在python中的函数中设置变量，每当我打印它们时，我都会得到一个“函数+函数名称+十六进制值而不是字符串”，任何人都可以给我一些建议吗？

```
import sys

def serverAdd():
    global serverAdd
    if len(sys.argv) <2:
        serverAdd = input('Please enter server address:')
    else:
        serverAdd = sys.argv[1]

def serverPort():
    global portNumber
    if len(sys.argv) <3:
        portNumber = input('Please enter port number for server:')
    else:
        portNumber = sys.argv[2]

def serverPassword():
    global serverPassword
    if len(sys.argv)< 4:
        password = input('Please enter server password:')
    else:
        password = sys.argv[3]

serverAdd()
print(serverAdd)
serverPort()
print(serverPort)
serverPassword()
print(serverPassword)`` 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:41:43.013

在函数内部声明全局性：

```
def inputPass():
    global passNumber
    passNumber = input('Please enter pass number') 
```

*我个人*更喜欢避免使用全局变量，而是写：

```
def inputPass():
    return input('Please enter pass number') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:10:20.427

在您的代码中，您不会打印您在函数中所做的任何事情的结果，而是打印对函数本身的引用（这是名称，我假设函数在内存中的位置）。

除了修复其他答案中讨论的全局变量外，您还需要打印变量名称，而不是函数引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:39:21.280

### 问题 1

`global serverAdd`将覆盖您的`serverAdd`功能。如果您`serverAdd`第二次调用，它将不再是一个函数。

### 问题 2

全局 in`serverPort`是`portNumber`，但您打印`serverPort`的是函数。

### 问题 3

全局 in`serverPassword`是`password`但你打印`serverPassword`的是一个函数。

### 解决方案

使您的全局变量与您的函数名称不同，并打印正确的名称。

### 或者

使用 Python 库来解析您的参数（[argparse](http://docs.python.org/3/library/argparse.html)，[tutorial](http://docs.python.org/3/howto/argparse.html)）：

```
#!python3
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('-s','--server')
parser.add_argument('-p','--port')
parser.add_argument('-w','--password')
args = parser.parse_args()

if args.server is None:
    args.server = input('server? ')
if args.port is None:
    args.port = input('port? ')
if args.password is None:
    args.password = input('pass? ')

print(args.server,args.port,args.password) 
```

### 示例用法

```
C:\>example
server? Server
port? 123
pass? Password
Server 123 Password

C:\>example -s Server
port? 123
pass? Pass
Server 123 Pass

C:\>example -s Server -w pass
port? 123
Server 123 pass

C:\>example -s Server -w pass --port 123
Server 123 pass 
```

你甚至得到帮助！

```
C:\>example -h
usage: example.py [-h] [-s SERVER] [-p PORT] [-w PASSWORD]

optional arguments:
  -h, --help            show this help message and exit
  -s SERVER, --server SERVER
  -p PORT, --port PORT
  -w PASSWORD, --password PASSWORD 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T01:41:17.217

当前代码的问题是您声明与函数同名的全局变量！python 中的函数是变量——因此，它们共享相同的命名空间！因此，当您访问变量名时，`serverAddress`Python 必须确定`serverAddress`您指的是哪个 - 全局变量或局部变量（函数）。至于作用域如何工作，它首先引用局部变量。这就是为什么当您打印它时，它会打印出函数信息，而不是全局变量。

工作代码如下：

```
import sys

def serverAdd():
  global serverAddress
  if len(sys.argv) <2:
    serverAddress = input('Please enter server address:')
  else:
    serverAddress = sys.argv[1]

def serverPort():
  global portNumber
  if len(sys.argv) <3:
    portNumber = input('Please enter port number for server:')
  else:
    portNumber = sys.argv[2]

def serverPassword():
  global password
  if len(sys.argv)< 4:
    password = input('Please enter server password:')
  else:
    password = sys.argv[3]

serverAdd()
print(serverAddress)

serverPort()
print(portNumber)

serverPassword()
print(password) 
```

# ios - presentViewController 正在禁用 UISplitViewController 中的所有 removeFromSuperview 消息

> ID：15285237
> 
> 赞同：1
> 
> 时间：2013-03-08T01:34:52.883
> 
> 标签：ios, ipad, ios6, uiviewcontroller, uisplitviewcontroller

这是 UISplitViewController 的可视化表示：

![](../Images/cd8b29b59952ce91e7ab6f290324251a.png)

我正在尝试使用以下方法呈现一个 UIViewController (myVC)，它是 UISplitViewController 的 DetailViewController 内的 UIView 的子视图：

```
[appDelegate.splitViewController presentViewController:myVC animated:NO completion:nil]; 
```

它显示，我关闭它，应用程序旋转顺利，然后当我尝试通过单击 rootViewController（UINavigationController）中的一个单元格来重新加载详细视图时，所有 [orangeUIView removeFromSuperview] 消息都被神秘地禁用（还有更多橙色 UIViews 隐藏在 mainScrollView 内）。顶部工具栏中的“信息标签”正在更新，所以我知道单元格正在发送数据......

如果使用 splitViewController 呈现此活动，为什么会禁用 removeFromSuperview？我已经使用 detailViewController 展示了 myVC...

```
[appDelegate.detailViewController presentViewController:myVC animated:NO completion:nil]; 
```

这不会禁用 removeFromSuperview，但会导致各种其他旋转崩溃。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:23:32.790

由于这个问题是由上一个问题产生的，所以这个问题的答案是......尝试其他的东西。我无法通过展示视图控制器来解决这个问题，很可能是因为我使用了一个自定义 UISplitViewController，它具有我不想进入的层次结构。

这是我想出的解决方案：

[核心图 - 使图形全屏显示的选项 - 出现模态问题后的 addSubview](https://stackoverflow.com/questions/15237390/core-plot-options-on-making-the-graph-full-screen-addsubview-after-presentin)

# javascript - jQuery从json数据添加类

> ID：15285242
> 
> 赞同：0
> 
> 时间：2013-03-08T01:35:56.013
> 
> 标签：javascript, jquery, json, class, object

这是一个包含座位信息的 json 文件。

```
var jsondata = {
    "who": "RSNO",
    "what": "An American Festival",
    "when": "2013-02-08 19:30",
    "where": "User Hall - Main Auditorium",
    "seats": ["00000000000000000011111111111111000000000000000000", "0000000000000001111111111111111aaa0000000000000000", "00000000000000aa111111111111111aaaaa00000000000000", "00000000000001111111111111111111111111000000000000", "000000000aa00aaaaaaaaaaaaaaaaaaaaaa1100aa000000000", "00000001111001111111111111111111111100111100000000", "00000aaaaaa0011aaaaaaaaa11111111aaa1100aaaaaa00000", "00001111111001111111111111111111111100111111100000", "000aaaaaaa110011111111111111111111110011aaaaaaa000", "00111111111100111111111111111111111001111111111000", "00aaaaa1111110011111111111111111111001111aaaaaaa00", "11111111111100111111111111111111111001111111111110", "0aaaaaaaaaaaa001111111111111111111100aaaaaaaaaaaa0", "01111111111110011111111111111111110011111111111100", "00000000000000001111111111111111110000000000000000", "01111111111111001111111111111111100111111111111100", "01111111111111001111111111111111110011111111111110", "01111111111111001111111111111111100111111111111100", "00a11111111111100111111111111111100111111111111a00", "00111111111111100111111111111111001111111111111000", "00011111111111110011111111111111001111111111111000", "00111111111111100111111111111111001111111111111000", "00011111111111110011111111111111001111111111111000", "00011111111111110011111111111110011111111111110000", "0000000111a111111001111a1111a110011111111110000000", "00000000111111110011111111111110011111111000000000", "00000000001111111001111111111110011111110000000000", "00000000000000111001111111111100111000000000000000"],
    "rows": ["DD", "CC", "BB", "AA", "Z", "Y", "X", "W", "V", "U", "T", "S", "R", "Q", "P", "N", "M", "L", "K", "J", "H", "G", "F", "E", "D", "C", "B", "A"],
    "seatPrice": ["                  00000000000000                  ", "               0000000000000000000                ", "              0000000000000000000000              ", "             0000000000000000000000000            ", "         00  000000000000000000000000  00         ", "       0000  00000000000000000000000  0000        ", "     000000  000000000000000000000000  000000     ", "    0000000  00000000000000000000000  0000000     ", "   000000000  0000000000000000000000  000000000   ", "  0000000000  000000000000000000000  0000000000   ", "  00000000000  00000000000000000000  00000000000  ", "000000000000  000000000000000000000  000000000000 ", " 000000000000  00000000000000000000  000000000000 ", " 000000000000  0000000000000000000  000000000000  ", "                000000000000000000                ", " 0000000000000  00000000000000000  0000000000000  ", " 0000000000000  000000000000000000  0000000000000 ", " 0000000000000  00000000000000000  0000000000000  ", "  0000000000000  0000000000000000  0000000000000  ", "  0000000000000  000000000000000  0000000000000   ", "   0000000000000  00000000000000  0000000000000   ", "  0000000000000  000000000000000  0000000000000   ", "   0000000000000  00000000000000  0000000000000   ", "   0000000000000  0011111111100  0000000000000    ", "       0000000000  111111111111  0000000000       ", "        00000000  1111111111111  00000000         ", "          0000000  111111111111  0000000          ", "              000  00000000000  000               "],
    "priceLookup": [10, 20] 
};

$.getJSON('jsondata' , function(data) {
    var tbl_body = "";
    $.each(jsondata.seats, function() {
        var tbl_row = "";
        $.each(this, function(k , v) {
            tbl_row += "<td>"+v+"</td>";
        });
        tbl_body += "<tr>"+tbl_row+"</tr>";                 
    });
    $("#plan").html(tbl_body);
}); 
```

最后的函数在使用座位布局方面工作正常，但是，我需要将保存的信息作为函数生成的 s`seatPrice`的类添加。`td`我已经尝试基本上复制最后一个函数，但对于`seatPrice`对象并将其附加到表中，但这似乎不起作用。关于我将如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:06:45.403

您的代码存在一些问题。`$.getJSON()`如果您已经拥有数据，为什么还需要`jsondata`？如果你真的是从 AJAX 调用中获取这些数据，那很好，但是你需要`data`在函数中引用，而不是`jsondata`，或者将参数重命名为匿名函数。

传递给函数的第一个参数`$.each()`是数组的索引。您可以使用它来获取`seatPrice`相同索引的：

```
$.each(jsondata.seats, function (j, d) {
    var tbl_row = "";
    $.each(this, function (k, v) {
        var seatPrice = jsondata.seatPrice[j][k];
        var seatPriceClass = '';
        if(seatPrice == "0") {
             seatPriceClass = "notawesome";  
        } else if(seatPrice == "1") {
             seatPriceClass = "awesome";   
        } else {
             seatPriceClass = "none";   
        }
        tbl_row += "<td class='"+seatPriceClass+"'>" + v + "</td>";
    });
    tbl_body += "<tr>" + tbl_row + "</tr>";
}); 
```

演示：http: [//jsfiddle.net/jtbowden/pJhgK/](http://jsfiddle.net/jtbowden/pJhgK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:03:53.547

似乎您使用 $.each() 循环使问题复杂化。正如 popnoodles 所说，您可以使用香草 for 循环。

这是你想要的吗？

```
$.getJSON('jsondata' , function(data) {
    var tbl_body = "";
    var tbl_row = "";

    for (var i in data.seats){
        tbl_row += "<td>"+i+"</td>";
    }

    for (var i in data.seatPrice){
        tbl_row += '<td class="' + i + '">this is a td</td>';
    }

    tbl_body += "<tr>"+tbl_row+"</tr>";   

    $("#plan").html(tbl_body);
}); 
```

# iphone - 在 iOS 中进行异步调用同步的最佳实践？

> ID：15285244
> 
> 赞同：0
> 
> 时间：2013-03-08T01:36:00.870
> 
> 标签：iphone, ios, objective-c, concurrency, afnetworking

我有一个单例类 APIClient，它需要设置 userId 和 authToken 才能调用我的后端。

我们目前将 userId 和 authToken 存储在 NSUserDefaults 中。对于全新安装，这些值不存在，我们会向服务器查询它们。

目前，我们在 ViewController 的 viewDidLoad 方法中有代码，如果这些值不存在，则可以手动查询服务器。

我有兴趣让这门课“正常工作”。我的意思是让客户端检查它是否已初始化，如果没有触发对服务器的调用并设置适当的 userId 和 authToken - 所有这些都无需手动干预。

这已被证明是一个相当棘手的问题，因为：

1.  我无法使 asyncObtainCredentials 同步，因为#iphonedev 的人们告诉我，如果我必须冻结主线程以进行网络操作，操作系统将杀死我的应用程序
2.  对于我们现在所拥有的，由于 asyncObtainCredential 的异步特性，第一次调用总是会失败。将返回 Nil，第一次调用将始终失败。

有谁知道解决这个问题的好方法？

`

```
@interface APIClient ()
@property (atomic) BOOL initialized;
@property (atomic) NSLock *lock;
@end

@implementation APIClient

#pragma mark - Methods

- (void)setUserId:(NSNumber *)userId andAuthToken:(NSString *)authToken;
{
    self.initialized = YES;
    [self clearAuthorizationHeader];
    [self setAuthorizationHeaderWithUsername:[userId stringValue] password:authToken];
}

#pragma mark - Singleton Methods

+ (APIClient *)sharedManager {
    static dispatch_once_t pred;
    static APIClient *_s = nil;

    dispatch_once(&pred, ^{
        _s = [[self alloc] initWithBaseURL:[NSURL URLWithString:SERVER_ADDR]];
        _s.lock =[NSLock new] ;
    });

    [_s.lock lock];
    if (!(_s.initialized)) {
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        NSNumber *userId = @([prefs integerForKey:KEY_USER_ID]);
        NSString *authToken = [prefs stringForKey:KEY_AUTH_TOKEN];

        // If still doesn't exist, we need to fetch
        if (userId && authToken) {
            [_s setUserId:userId andAuthToken:authToken];
        } else {
            /*
             * We can't have obtainCredentials to be a sync operation the OS will kill the thread
             * Hence we will have to return nil right now.
             * This means that subsequent calls after asyncObtainCredentials has finished
             * will have the right credentials.
             */
            [_s asyncObtainCredentials:^(NSNumber *userId, NSString *authToken){
                [_s setUserId:userId andAuthToken:authToken];
            }];
            [_s.lock unlock];
            return nil;
        }
    }
    [_s.lock unlock];

    return _s;
}

- (void)asyncObtainCredentials:(void (^)(NSNumber *, NSString *))successBlock {

    AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:SERVER_ADDR]];
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:[OpenUDID value], @"open_udid", nil];
    NSMutableURLRequest *request = [client requestWithMethod:@"GET" path:@"/get_user" parameters:params];

    AFJSONRequestOperation *operation = \
    [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        ... 

        // Do not use sharedManager here cause you can end up in a deadlock
        successBlock(userId, authToken);

    } failure:^(NSURLRequest *request , NSURLResponse *response , NSError *error , id JSON) {
        NSLog(@"obtain Credential failed. error:%@ response:%@ JSON:%@",
              [error localizedDescription], response, JSON);
    }];

    [operation start];
    [operation waitUntilFinished];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:54:46.703

`NSUserDefaults`您应该在应用程序启动期间检查这些值是否存在。如果它们不存在，请调用以从服务器获取它并在屏幕上显示加载覆盖。获取后，您可以继续下一步。

如果您不想使用加载覆盖，您可以`isLoading`在类中设置一些标志`APIClient`并检查以了解异步是否仍在获取。因此，每当您进行服务调用并且需要这些值时，您就知道如何根据此标志来处理它。获得所需的值并存储在 中后`NSUserDefaults`，您可以继续下一步。您可以使用 Notifications/Blocks/KVO 通知您的视图控制器，让他们知道您已经获取了这些值。

# javascript - 添加指向 JavaScript 图像数组的链接

> ID：15285245
> 
> 赞同：1
> 
> 时间：2013-03-08T01:36:04.000
> 
> 标签：javascript, arrays, hyperlink

我这里有一些幻灯片的代码，我需要添加链接，它是一个运行良好的 JavaScript 图像数组，但我不确定如何为每张图片添加链接。

我是 JS 的新手。

```
var mygallery=new fadeSlideShow({
    wrapperid: "fadeshow1", //ID of blank DIV on page to house Slideshow
    dimensions: [200, 235], //width/height of gallery in pixels. Should reflect dimensions of largest image
    imagearray: [
        ["images_ads/image1.jpg"],
        ["images_ads/image2.jpg"],
        ["images_ads/image3.jpg"]
    ],
    displaymode: {type:'auto', pause:5000, cycles:0, wraparound:false},
    persist: false, //remember last viewed slide and recall within same session?
    fadeduration: 1000, //transition duration (milliseconds)
    descreveal: "ondemand",
    togglerid: ""
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:55:29.323

根据动态驱动器，图像数组中的第二个键应该是您的 URL 值，第三个值是您要显示的文本 例如：

```
["images_ads/image1.jpg", "http://www.stackoverflow.com", "Your text goes here"], 
```

# matlab - MATLAB 检查矩阵的一部分是否在第一列的 x % 范围内

> ID：15285253
> 
> 赞同：1
> 
> 时间：2013-03-08T01:37:00.447
> 
> 标签：matlab, matrix, percentage

我有一个关于 MATLAB 中矩阵的快速问题。

给定一个 3x4 矩阵，如何检查第一列右侧的所有内容是否在第一列的 80% 范围内？我似乎真的什么都想不出来。

例子：

```
Temperature = [60 59 55 50; 60 48 30 46; 60 45 37 47] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:44:28.277

例如：

```
relTemp = bsxfun(@rdivide,Temperature(:,2:end),Temperature(:,1));

%# be within +/- 80% of first column
isWithin80Perc = all(relTemp > 0.2 & relTemp < 1.8,2); 
```

# ruby-on-rails-3 - 在 Rails 应用程序上捆绑安装后连接到服务器 (PG:Error)

> ID：15285255
> 
> 赞同：0
> 
> 时间：2013-03-08T01:37:07.350
> 
> 标签：ruby-on-rails-3, postgresql

我遇到了一个非常奇怪的错误。在我的 Rails gem 文件中，我有：

```
gem 'pg' 
```

此时服务器可以成功启动。停止服务器，我将 pg gem 注释为

```
# gem 'pg' 
```

并捆绑安装。然后我取消注释并进行捆绑安装。我预计什么都没有改变，对吧？但是现在服务器无法启动并显示错误：

```
could not connect to server: Permission denied (PG::Error)
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我重复了几次并得到了一致的结果。为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:20:53.403

添加主机：本地主机，端口：5432 修复了问题。虽然还是不知道为什么

# java - 带有 AjaxBehaviorEvent 的 bean 方法和没有 AjaxBehaviorEvent 的 bean 方法之间的区别？

> ID：15285256
> 
> 赞同：0
> 
> 时间：2013-03-08T01:37:12.537
> 
> 标签：java, ajax, jsf, jsf-2, dom-events

我有这样的 XHTML

```
<h:form id="form">
    <h:panelGrid columns="3">
        <h:outputText value="Keyup: " />
        <p:inputText id="counter">
            <p:ajax event="keyup" update="out"
                listener="#{counterBean.increment}" />
        </p:inputText>
        <h:outputText id="out" value="#{counterBean.count}" />
    </h:panelGrid>
</h:form> 
```

**案例一：ajax监听器方法`AjaxBehaviorEvent`**

```
public void increment(AjaxBehaviorEvent event) {
        count++;
    } 
```

**案例二：没有`AjaxBehaviorEvent`**

```
 public void increment() {
       count++;
} 
```

在这两种情况下，将调用侦听器并执行计数器工作以增加计数`keyup`。那么，究竟什么时候需要使用`AjaxBehaviorEvent`，什么时候不需要使用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:42:04.897

您可以将多个 ajax 事件绑定到同一个方法，并使用`getSource()`来`AjaxBehaviorEvent` 了解哪个组件触发了该事件。

# bash - 输出 csv 文件中的第一个副本

> ID：15285257
> 
> 赞同：2
> 
> 时间：2013-03-08T01:37:17.863
> 
> 标签：bash, sorting, csv, awk, duplicates

如何输出 csv 文件的第一个副本？例如，如果我有：

```
00:0D:67:24:D7:25,1,-34,123,135  
00:0D:67:24:D7:25,1,-84,567,654  
00:0D:67:24:D7:26,1,-83,456,234  
00:0D:67:24:D7:26,1,-86,123,124  
00:0D:67:24:D7:2C,1,-56,245,134  
00:0D:67:24:D7:2C,1,-83,442,123  
00:18:E7:EB:BC:A9,5,-70,123,136  
00:18:E7:EB:BC:A9,5,-90,986,545  
00:22:A4:25:A8:F9,6,-81,124,234  
00:22:A4:25:A8:F9,6,-90,456,654  
64:0F:28:D9:6E:F9,1,-67,789,766  
64:0F:28:D9:6E:F9,1,-85,765,123  
74:9D:DC:CB:73:89,10,-70,253,777 
```

我希望我的输出看起来像这样：

```
00:0D:67:24:D7:25,1,-34,123,135  
00:0D:67:24:D7:26,1,-83,456,234  
00:0D:67:24:D7:2C,1,-56,245,134  
00:18:E7:EB:BC:A9,5,-70,123,136  
00:22:A4:25:A8:F9,6,-81,124,234  
64:0F:28:D9:6E:F9,1,-67,789,766  
74:9D:DC:CB:73:89,10,-70,253,777 
```

我在考虑首先输出 csv 文件的第一行，`awk (code that outputs first row) >> file.csv`然后将行的第一个字段与下一行的第一个字段进行比较，如果它们相同，请检查下一行。直到出现新行，代码将再次输出新的不同行，`awk (code that outputs) >> file.csv`并且将重复直到检查完成

我对 bash 编码有点陌生，但到目前为止我很喜欢它，我目前正在编写一个 csv 文件，我需要一些帮助。感谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T02:38:46.723

使用 awk：

```
awk -F, '!a[$1]++' file.csv 
```

awk 形成一个数组，其中第一列是键，值是 no 的计数。特定键出现的次数。' `!a[$1]++`' 仅在第一列第一次出现时才为真，因此该行的第一次出现被打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:11:30.027

如果我明白你在做什么，你想要这样的东西：

```
prev_field=""
while read line
do
  current_field=$(echo $line | cut -d ',' -f 1)
  [[ $current_field != $prev_field ]] && echo $line
  prev_field=$current_field
done < "stuff.csv" 
```

`stuff.csv`你的文件名在哪里。那是假设您要做的是获取 csv 行中的第一个字段，并且只打印它的第一个唯一出现，如果是这种情况，我认为您的输出可能会丢失一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:59:22.770

使用 uniq：

```
sort lines.csv | uniq -w 17 
```

如果您的第一列是固定大小（17）。lines.csv 是一个包含您原始输入的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:19:55.827

```
perl -F, -lane '$x{$F[0]}++;print if($x{$F[0]}==1)' your_file 
```

如果要就地更改文件：

```
perl -i -F, -lane '$x{$F[0]}++;print if($x{$F[0]}==1)' your_file 
```

# linq - 而不是 firstordefault 我可以使用什么来获取所有值

> ID：15285258
> 
> 赞同：1
> 
> 时间：2013-03-08T01:37:20.477
> 
> 标签：linq

下面是代码，它只返回第一条记录，因为 FirstOrDefault。如何更改它以检索所有元素？

```
 var fValue = bList.Cast<String>()Where(t => t.StartsWith(sValue,      StringComparison.OrdinalIgnoreCase)).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:42:13.660

```
var fValues = bList.Cast<String>()
       .Where(t =>t.StartsWith(sValue, StringComparison.OrdinalIgnoreCase))
       .ToList(); 
```

如果你想创建一个字符串来显示你所有的值

```
var fValue = bList.Cast<String>()
       .Where(t =>t.StartsWith(sValue, StringComparison.OrdinalIgnoreCase))
       .Aggregate((x,y) => x + "\r\n" + y); 
```

# javascript - 如何以编程方式更改网格面板单元格的 css

> ID：15285259
> 
> 赞同：1
> 
> 时间：2013-03-08T01:37:24.443
> 
> 标签：javascript, extjs

我有两个不同的网格面板，并且在整个代码中，每当 Grid1 中一个单元格的值发生变化时，我希望能够更改 Grid2 中某些单元格的值，如何从 Grid1 中更改第二个网格的 css。

以下允许我更改 Grid2 中整行的 css，但我需要能够更改 Grid2 行的单元格的 css：2，第 3 列

```
var Grid2Store= Ext.data.StoreManager.get("MainComparisonStore");
Grid2.getView().addRowCls(Grid2Store.getAt(2), 'orange-bar'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:11:37.203

抓住元素，你可以使用`cellElement.addCls('orange-bar');`. 请参阅[Ext.dom.Element.addCls()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-addCls)文档。我整理了一个[jsFiddle](http://jsfiddle.net/yuVET/10/)给你看一个例子。只需单击网格工具栏中的“测试”按钮。

这是完成工作的代码。将一个类添加到第 1 列第 1 行是硬编码的。

```
var grid = Ext.getCmp('myGrid');
var column = grid.columns[1];
var record = grid.store.getAt(1);
var cell = grid.getView().getCell(record, column);
cell.addCls('orange-bar'); 
```

[这里（Sencha 论坛）](http://www.sencha.com/forum/showthread.php?136121-Grid-getCell-function)是关于如何获取单元格的一些讨论。这就是我用来组合我的示例的内容。您可以看到如何很容易地制作像 getCell(rowIndex, columnIndex) 这样的助手。

# ios - 滚动关闭时，UILabels 从表格视图单元格内容视图中消失，但如果选择了单元格，则会再次显示

> ID：15285261
> 
> 赞同：0
> 
> 时间：2013-03-08T01:37:34.283
> 
> 标签：ios, uitableview

我有一个带有两个 uilabels 的自定义表格视图单元格，一切正常启动，但是当我滚动到表格的另一部分并返回时，在任何地方都找不到标签。但是，如果我选择它们，它们会再次显示，直到它们被取消选择

```
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    id appDelegate = [[UIApplication sharedApplication] delegate];
    _managedObjectContext = [appDelegate managedObjectContext];

    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        NSLog(@"%@ %@", error, [error userInfo]);
        abort();
    }

    _infoView.layer.cornerRadius = 5;
    _infoView.layer.masksToBounds = YES;
    _infoView.layer.shadowColor = [UIColor colorWithRed:205.0/255.0 green:205.0/255.0 blue:205.0/255.0 alpha:1.0].CGColor;
    _infoView.layer.shadowOpacity = 0.8;
    _infoView.layer.shadowRadius = 10.0;
    _infoView.layer.shadowOffset = CGSizeMake(2.0, 2.0);

    _addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(add:)];
    self.navigationItem.rightBarButtonItem = _addButton;

    _searchBar.backgroundColor = [UIColor clearColor];
    _searchBar.clipsToBounds = YES;
    _searchBar.tintColor = [UIColor colorWithRed:200.0/255.0 green:200.0/255.0 blue:200.0/255.0 alpha:1.0];

    for (UIView *subview in _searchBar.subviews)
    {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")])
        {
            [subview removeFromSuperview];
            break;
        }
    }

    _exercisesNumberLabel.text = [NSString stringWithFormat:@"%lu Exercises", (unsigned long)[_fetchedResultsController.fetchedObjects count]];
    [_exercisesNumberLabel sizeToFit];

}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self.tableView setContentOffset:CGPointMake(0, _headerView.bounds.size.height)];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)add:(id)sender
{

}

#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[_fetchedResultsController sections] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [[[_fetchedResultsController sections] objectAtIndex:section] name];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[_fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = nil;
    cellIdentifier = @"exerciseCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        [self stampCell:cell atIndexPath:indexPath];
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

- (void)stampCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    UILabel *textLabel, *detailTextLabel;
    UIButton *playButton;
    //UIWebView *miniYouTubeView;

    textLabel = [[UILabel alloc] initWithFrame:CGRectMake(70, 2, 170, 22)];
    textLabel.tag = kExerciseCellTextLabel;
    textLabel.font = [UIFont systemFontOfSize:17.0];
    textLabel.textAlignment = NSTextAlignmentLeft;
    textLabel.textColor = [UIColor blackColor];
    [[cell contentView] addSubview:textLabel];

    detailTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(70, 24, 170, 18)];
    detailTextLabel.tag = kExerciseCellDetailTextLabel;
    detailTextLabel.font = [UIFont systemFontOfSize:14.0];
    detailTextLabel.textAlignment = NSTextAlignmentLeft;
    detailTextLabel.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
    detailTextLabel.autoresizingMask = UIViewAutoresizingFlexibleRightMargin;
    [[cell contentView] addSubview:detailTextLabel];

    playButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 64, 44)];
    playButton.backgroundColor = [UIColor lightGrayColor];
    [playButton setImage:[UIImage imageNamed:@"121-landscape.png"] forState:UIControlStateNormal];
    [[cell contentView] addSubview:playButton];

    /*miniYouTubeView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 60, 44)];
    miniYouTubeView.tag = kExerciseCellMiniYouTubeView;
    miniYouTubeView.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleHeight;
    [[cell contentView] addSubview:miniYouTubeView];*/
}

#pragma mark - UITableViewDelegate

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 44;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[[_fetchedResultsController objectAtIndexPath:indexPath] isDefault] boolValue]) {
        return NO;
    }
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleInsert) {

    }
    else if (editingStyle == UITableViewCellEditingStyleDelete) {
        Exercise *exercise = [_fetchedResultsController objectAtIndexPath:indexPath];
        [_managedObjectContext deleteObject:exercise];

        NSError *error;
        if (![_managedObjectContext save:&error]) {
            NSLog(@"%@ %@", error, [error userInfo]);
            abort();
        }
    }
}

#pragma mark - NSFetchedResultsControllerDelegate

- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController) {
        return _fetchedResultsController;
    }

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:kExercise inManagedObjectContext:_managedObjectContext];
    [request setEntity:entity];

    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:kExerciseName ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    [request setSortDescriptors:sortDescriptors];

    NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:_managedObjectContext sectionNameKeyPath:kExerciseFirstLetter cacheName:@"ExerciseList"];
    [self setFetchedResultsController:fetchedResultsController];
    [_fetchedResultsController setDelegate:self];

    return _fetchedResultsController;
}

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    Exercise *exercise = [_fetchedResultsController objectAtIndexPath:indexPath];
    UILabel *textLabel = (UILabel *)[[cell contentView] viewWithTag:kExerciseCellTextLabel];
    UILabel *detailTextLabel = (UILabel *)[[cell contentView] viewWithTag:kExerciseCellDetailTextLabel];
    //UIWebView *miniYouTubeView = (UIWebView *)[[cell contentView] viewWithTag:kExerciseCellMiniYouTubeView];

    textLabel.text = [exercise valueForKey:kExerciseName];
    detailTextLabel.text = [NSString stringWithFormat:@"%@ - %@", [[exercise valueForKey:kExerciseEType] valueForKey:kExerciseTypeName], [[exercise valueForKey:kGear] valueForKey:kGearName]];

    //[textLabel sizeToFit];
    //[detailTextLabel sizeToFit];

    /*[miniYouTubeView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[exercise valueForKey:kExerciseUrlAddress]]]];
    [miniYouTubeView setScalesPageToFit:YES];
    [miniYouTubeView setAutoresizesSubviews:YES];*/

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:57:18.790

滚动表格时，单元格会被重用。但是您的代码是以这样一种方式编写的，即每次重用单元格时，您都会不断添加越来越多的子视图。

你应该只打电话`stampCell`if `cell`is `nil`。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSString *cellIdentifier = @"exerciseCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        [self stampCell:cell atIndexPath:indexPath];
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
} 
```

一个更好的解决方案是子类`UITableViewCell`化并将所有这些逻辑放在单元格而不是视图控制器中。

# apache - 仅重新启动机架/Sinatra 应用程序的一部分

> ID：15285267
> 
> 赞同：0
> 
> 时间：2013-03-08T01:37:56.510
> 
> 标签：apache, sinatra, passenger, rack

PHP的伟大之处在于，如果你有类似的东西

```
clothes.com, clothes.com/men.php, clothes.com/women.php 
```

然后，如果您只编辑男士页面，则只会重新启动那个特定的“应用程序”。

但在 rack/Sinatra 上，我必须触摸 restart.txt 文件才能重新启动整个网站。

有没有办法解决这个问题，让浏览网站其他部分的用户在编辑网站的其他部分时不会遇到任何问题？

（我在 Apache 上使用 mod-passenger，这并不重要..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:03:14.010

[从sinatra contrib](https://github.com/sinatra/sinatra-contrib/)查看 sinatra reloader

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:05:39.687

无论如何，对于编辑（非内联）视图（不是布局），这在所有情况下都是正确的。

除此之外，如果您真的对此感到担心，那么我建议您使用版本化文件夹来保存应用程序代码。进行部署时，将代理更改为指向较新的版本。那些已经发出请求的人将保留在 Apache 实例和已经运行的应用程序上，只要他们的请求仍然存在，并且无缝地（除非你用代码破坏了某些东西）在下一个移动到新代码要求。

这也是一种快速轻松地回滚到以前版本的便捷方式。

# java - 是否可以从 Java 中的方法返回多个值？

> ID：15285270
> 
> 赞同：10
> 
> 时间：2013-03-08T01:38:11.993
> 
> 标签：java, variables, return

我正在使用模拟器玩掷骰子，我试图从同一个方法返回两个值（或者更确切地说，我想）。

当我写我的返回语句时，我只是试着把编译和运行正常的“&”放在里面；但我无法访问第二个返回值。

```
public static int crapsGame(){
  int myPoint;
  int gameStatus = rollagain;
  int d1,d2;
  int rolls=1;

  d1 = rollDice();
  d2 = rollDice();
  switch ( d1+d2 ) {
    case 7: 
    case 11:
      gameStatus = win;
      break;
    case 2: 
    case 3: 
    case 12:
      gameStatus = loss;
      break;
    default:
      myPoint = d1+d2;
      do {
        d1=rollDice();
        d2=rollDice();
        rolls++;
        if ( d1+d2 == myPoint )
          gameStatus = win;
        else if ( d1+d2 == 7 )
          gameStatus = loss;
       } while (gameStatus == rollagain);
  } // end of switch
  return gameStatus & rolls;
} 
```

当我将值返回为：

```
gameStatus=crapsGame(); 
```

它适当地设置了赢或输的变量，但如果我尝试像以下语句一样简单的事情：

```
rolls=crapsGame(); 
```

它被分配了与 gamestatus 相同的值......一个 0 或一个 1（赢或输）。有什么方法可以访问第二个返回值？还是有完全不同的方法来解决它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T01:39:48.940

创建您自己的值持有者对象来保存这两个值，然后返回它。

```
return new ValueHolder(gameStatus, rolls); 
```

可以返回具有多个值的数组，但这很神秘，而且对可读性没有任何帮助。更容易理解这意味着什么......

```
valueHolder.getGameStatus() 
```

比这意味着什么。

```
intArray[0] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T01:42:20.313

返回`gameStatus & rolls`的意思是“按位返回游戏状态和滚动”，这可能不是你想要的

你有一些选择：

*   返回一个数组
*   创建一个表示响应的类，每个值都有一个属性并返回一个实例
*   使用许多 java 集合之一来返回值（可能是列表或映射）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T01:43:34.200

您可以返回值的数组或值的集合。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-08T01:47:12.193

> 是否可以从 Java 中的方法返回多个值？

不它不是。Java 只允许返回一个值。这个限制是硬连线到语言中的。

但是，有几种方法可以处理此限制：

*   编写一个轻量级的“持有人”类，其中包含要返回的多个值的字段，并创建并返回该类的实例。
*   返回`Map`包含值的 a。这种（以及下一种）方法的问题在于，您正误入一个需要运行时类型检查的领域……这可能导致脆弱性。
*   返回一个包含值的数组。数组必须有一个基本类型，可以容纳所有值的类型。
*   如果这是一个对象的方法，那么在同一个对象和方法上添加一些字段，允许调用者从上次调用中获取“辅助结果”。（例如，JDBC`ResultSet`类这样做是为了允许客户端确定刚刚检索到的值是否为 NULL。）问题是这使得类在实例级别不可重入。
*   （您甚至可以在静态中返回额外的结果，但这是一个非常糟糕的主意。它使类在所有实例中不可重入，更不用说与滥用静态相关的所有其他坏处了。）

其中，第一个选项是最干净的。如果您担心创建持有者实例等的开销，您可以考虑重用这些实例；例如，让调用者将现有的“持有者”传递给被调用的方法，结果应该放入其中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-07T22:19:41.150

OOP 方法的最佳实践是返回一个对象。包含您想要的所有值的对象。

例子：

```
class Main {

    public static void main(String[] args) {

        MyResponse response = requestResponse();

        System.out.println( response.toString() );

    }

    private static MyResponse requestResponse() {

        return new MyResponse( "this is first arg", "this is second arg" );
    }
}

class MyResponse {

    private String x, y;

    public MyResponse( String x, String y ) {

        this.x = x;
        this.y = y;

    }

    @Override
    public String toString() {

        return "x: " + x + "\t y: " + y;
    }

} 
```

如果您想要一种更具可扩展性的方法，那么您必须使用 JSON 响应。（如果您也想要 JSON 示例，请告诉我）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-07T22:01:54.110

您可以通过以下方式做到这一点：

1.  使用 Container 类，例如

    ```
    public class GameStatusAndRolls {
        String gameStatus;
        String rolls;
        ... // constructor and getter/setter
    }
    public static GameStatusAndRolls crapsGame(String gameStatus, String rolls) {
        return new GameStatusAndRolls(gameStatus, rolls); 
    }
    public static void main(String[] args) {
        ...
        GameStatusAndRolls gameStatusAndRolls = crapsGame(gameStatus, rolls);
        gameStatusAndRolls.getGameStatus(); 
    ```

2.  使用`List`或`array`，例如

    ```
    public static List<Integer> crapsGame(String gameStatus, String rolls) {          
        return Arrays.asList(gameStatus, rolls); 
    }
    private static final int GAME_STATUS = 0;
    private static final int ROOLS = 0;
    public static void main(String[] args) {
        ...
        List<Integer> list = crapsGame(gameStatus, rolls);
        ... list.get(0)...list.get(GAME_STATUS);
        ... list.get(1)...list.get(ROOLS); 
    ```

    或者

    ```
    public static String[] crapsGame(String gameStatus, String rolls) {          
        return new String[] {gameStatus, rolls}; 
    }
    private static final int GAME_STATUS = 0;
    private static final int ROOLS = 0;
    public static void main(String[] args) {
        ...
        String[] array = crapsGame(gameStatus, rolls);
        ... array[0]...array[GAME_STATUS];
        ... array[1]...array[ROOLS]; 
    ```

3.  使用`Map`，例如

    ```
    public static Map<String, String> crapsGame(String gameStatus, String rolls) {  
        Map<String, String> result = new HashMap<>(2);
        result.put("gameStatus", gameStatus);           
        result.put("rolls", rolls);
        return result; 
    }
    public static void main(String[] args) {
        ...
        Map map = crapsGame(gameStatus, rolls);
        ... map.get("gameStatus")...map.get("rolls"); 
    ```

# c# - 进程无法访问仅由我自己的应用程序使用的锁定文件

> ID：15285271
> 
> 赞同：1
> 
> 时间：2013-03-08T01:38:17.567
> 
> 标签：c#, .net, file-io

当我尝试写入临时文件时，我不断收到以下错误：

> 该进程无法访问文件“C:\Users\jdoe\AppData\Local\Temp\jdoe.tmp”，因为它正被另一个进程使用。

这些是对文件执行任何操作的唯一方法：

```
private void LoadData(string filePath)
{
    if (!File.Exists(filePath))
    {
        File.Create(filePath);
        return;
    }

    var fileDetails = new FileInfo(filePath);
    if (fileDetails.Length > 0)
    {
        using (var fileStream = new FileStream(filePath, FileMode.Open))
        {
            // Do stuff...
            fileStream.Close();
        }
    }
}

private void SaveData(string filePath)
{
    using (var fileStream = new FileStream(filePath, FileMode.Create))
    {
        // Do stuff...
        fileStream.Close();
    }
} 
```

什么是锁定文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:38:17.567

结果`File.Create(filePath)`返回 a `FileStream`，需要关闭。只需将其更改为以下内容，错误就消失了`File.Create()`：

```
if (!File.Exists(filePath))
{
    File.Create(filePath).Close();
    return;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T02:22:37.027

你必须删除代码的第一个块..

因为当你写的时候..如果文件不存在，它将创建文件，或者如果文件已经存在，那么它应该追加..

# qt - Qt 模型视图编程：创建索引

> ID：15285273
> 
> 赞同：2
> 
> 时间：2013-03-08T01:39:05.620
> 
> 标签：qt

我正在阅读以下文档以增加对模型视图编程的理解：

```
http://qt-project.org/doc/qt-4.8/model-view-programming.html 
```

虽然写得很好，但我有一个关于创建索引的问题。据我了解计算和项目的索引，我们需要其父项目的索引。要计算父项的索引，我们需要子项的索引。所以它是一个循环依赖。你怎么打破它？

如果您通过以下部分：

> 行和列
> 
> 该图显示了基本表格模型的表示，其中每个项目都由一对行号和列号定位。我们通过将相关的行号和列号传递给模型来获得引用数据项的模型索引。

```
 QModelIndex indexA = model->index(0, 0, QModelIndex());
 QModelIndex indexB = model->index(1, 1, QModelIndex());
 QModelIndex indexC = model->index(2, 1, QModelIndex()); 
```

> 模型中的顶级项总是通过将 QModelIndex() 指定为其父项来引用。这将在下一节中讨论。

我不明白 Qt 如何知道计算 A 的索引，父索引应该是 QModelIndex() （即顶级项目的索引）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:22:13.933

> 据我了解计算和项目的索引，我们需要其父项目的索引。

是的，除非它是顶级项目。

> 要计算父项的索引，我们需要子项的索引。

不可以。一个索引不能有多个父级，所以只需调用`QModelIndex::parent() const`.

# mule - 保持活动状态时如何检查 TCP 连接状态？

> ID：15285274
> 
> 赞同：0
> 
> 时间：2013-03-08T01:39:26.320
> 
> 标签：mule

我正在使用`keepalive`属性设置为的客户端 TCP 连接器`true`。建立连接后它工作正常。服务器宕机时出现问题，我在发送数据之前不知道连接状态。

有什么方法可以在通过引发异常或事件发送数据之前找到服务器/连接？

# mysql - MySql 选择查询连接没有给出预期的答案

> ID：15285275
> 
> 赞同：0
> 
> 时间：2013-03-08T01:39:47.047
> 
> 标签：mysql, sql, inner-join

我有一个简单的技术人员考勤系统。参加的天数存储在名为 tech_logins 的表中。每个技术人员每个日期有 1 条记录。技术人员执行的工作存储在称为日志的表中。此表包含技术人员完成的所有工作。它还有两个与 tech_logins 表相关的字段。它们称为technical_id 和dos。

日志表可以包含链接到技术人员但dos 未链接的工作，即当有人为技术人员输入工作但在技术人员不在的日期(dos) 时。

我正在尝试为每个技术人员获取所有工作，仅针对与 tech_logins 表中的 login_date 链接的 dos 日期。此 sql 仅返回单个技术人员和单个日期的记录：

```
SELECT tech_logins.tech_id, 
       tech_logins.login_date 
FROM   tech_logins 
INNER JOIN `logs`
       ON tech_logins.login_date = `logs`.dos 
       AND tech_logins.tech_id = `logs`.technician_id 
```

任何帮助或指导将不胜感激。

表结构：

```
CREATE TABLE `tech_logins` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `tech_id` int(10) DEFAULT NULL,
  `login_date` date DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `tech_id` (`tech_id`,`login_date`)
) ENGINE=MyISAM AUTO_INCREMENT=9 DEFAULT CHARSET=latin1;

CREATE TABLE `logs` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `completed` date DEFAULT NULL,
  `patient_first_name` varchar(20) NOT NULL,
  `patient_last_name` varchar(20) NOT NULL,
  `dob` date DEFAULT NULL,
  `sex` varchar(1) DEFAULT NULL,
  `dos` date DEFAULT NULL,
  `study_id` int(10) DEFAULT NULL,
  `ICD9` varchar(10) DEFAULT NULL,
  `ref_doctor_id` int(10) DEFAULT NULL,
  `insurance_id` int(10) DEFAULT NULL,
  `insurance_no` varchar(20) DEFAULT NULL,
  `authorization_no` varchar(20) DEFAULT NULL,
  `referral_no` varchar(20) DEFAULT NULL,
  `location_id` int(10) DEFAULT NULL,
  `reading_doctor_id` int(10) DEFAULT NULL,
  `technician_id` int(10) NOT NULL,
  `biller` int(10) DEFAULT NULL,
  `billed` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM AUTO_INCREMENT=79 DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:46:23.563

您的查询结构显示正确。您可能遇到数据问题，即两个表中的数据在您的两个连接列上实际上并没有正确匹配。

您为什么不尝试分别选择一小组两列，首先从 tech_logins 中选择。然后使用从 tech_logins 返回的几行的两列查询日志表。一步一步，你会找到你的答案。您正在正确执行 sql。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T01:59:36.377

更改日期加入以下

```
 DATE_FORMAT( tech_logins.login_date, '%d %m     %Y')
 = DATE_FORMAT( 'logs'.dos, '%d %m %Y') 
```

更新如果这不起作用，则将内部联接替换为左联接只是为了检查是否存在任何日期问题。

# mysql - 什么是 Django 中用于 sql join 的等效 ORM 查询

> ID：15285278
> 
> 赞同：0
> 
> 时间：2013-03-08T01:40:16.003
> 
> 标签：mysql, django, django-models

我有两个 django 模型，它们彼此没有关系，但有共同的 JID（我没有把它设为外键）：

```
class result(models.Model):
  rid = models.IntegerField(primary_key=True, db_column='RID') 
  jid = models.IntegerField(null=True, db_column='JID', blank=True)
  test_case = models.CharField(max_length=135, blank=True)

class job(models.Model):
  jid = models.IntegerField(primary_key = True, db_column='JID') 
  client_build = models.IntegerField(max_length=135,null=True, blank=True) 
```

我想在 ORM 中实现这个 sql 查询：SELECT * FROM result JOIN job ON job.JID = result.JID

基本上我想加入两个表，然后对该表执行过滤查询。

我是 ORM 和 Django 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:51:10.050

```
jobs = job.objects.filter(jid__in=result.objects.values('jid').distinct()
   ).select_related() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:15:13.573

您可以通过像这样修改结果类来表示 Django 模型中的外键：

```
class result(models.Model):
  rid = models.IntegerField(primary_key=True, db_column='RID') 
  # jid = models.IntegerField(null=True, db_column='JID', blank=True)
  job = models.ForeignKey(job, db_column='JID', blank=True, null=True, related_name="results")
  test_case = models.CharField(max_length=135, blank=True) 
```

（我在某处读过你需要同时添加`blank=True`并`null=True`在 Django 中使外键可选的地方，你可以尝试不同的选项）。

现在你可以简单地通过编写来访问结果的工作：

```
myresult.job # assuming myresult is an instance of class result 
```

使用参数`related_name="results"`，Django 会自动将一个新字段添加到类`job`中，因此您将能够编写：

```
myjob.results 
```

并获得作业的结果`myjob`。

这并不意味着 Django ORM 必须使用 JOIN 查询来获取它（它可能是另一个查询），但从代码的角度来看效果是一样的（除了性能考虑）。

`models.ForeignKey`您可以在[Django 文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)中找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:48:55.587

我不知道如何在 Django ORM 中做到这一点，但这是我的 2 美分：

*   任何 ORM 都可以让 99% 的查询超级容易编写（无需任何 SQL）。对于剩下的 1%，您有 2 个选择：了解 ORM 的核心并添加自定义代码或简单地编写纯 SQL。我建议您为此编写 SQL 查询。

*   如果表**结果**和**作业**都有 JID，为什么不将其设为外键？我觉得这很奇怪。

*   类名以大写字母开头，class * *R* *esult, class * *J* *ob。

# ruby-on-rails - 如何将属于“有很多：通过”的一半的项目与关联的另一半分配？

> ID：15285279
> 
> 赞同：2
> 
> 时间：2013-03-08T01:40:17.687
> 
> 标签：ruby-on-rails, ruby, associations

我正在尝试用 Ruby 为我的数据库建模，但不知道该怎么做。

这是我到目前为止所拥有的：

```
class Course < ActiveRecord::Base
    has_many :enrolled_ins
    has_many :users, :through => :enrolled_ins
    has_many :events, :dependent => :destroy
end

class User < ActiveRecord::Base
    has_many :enrolled_ins
    has_many :courses, :through => :enrolled_ins
end

class EnrolledIn < ActiveRecord::Base
    belongs_to :users
    belongs_to :courses
end

class Event < ActiveRecord::Base
    belongs_to :courses
end 
```

我想补充一点，当用户选择一门课程时，他们可以选择该课程所需的不同事件，并将这些事件分配给他们，而不是让他们获得所有事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:13:14.053

我会添加一个 UserEvents 加入。添加课程时，您会看到可用活动的列表。假设您有一个带有复选框的表单，您将创建 UserEvent 记录。我认为您不需要所有 3 个 ID 值（用户、事件、课程）。课程只是对各种事件进行分组的一种方式。

```
class UserEvent < ActiveRecord::Base
  belongs_to :user
  belongs_to :event
end 
```

如果任一侧被删除，我还将在用户和事件上添加一个依赖销毁，并销毁连接记录。

# c++ - 为什么 C++ 中“this”的地址会改变？

> ID：15285280
> 
> 赞同：0
> 
> 时间：2013-03-08T01:40:25.397
> 
> 标签：c++, this, memory-address

我有一种情况，我有一个 Foo 类型的对象，在这种情况下，调用它自己的方法会以某种方式在“this”中丢失它自己的地址。我已经定义了这些功能：

```
// Bar has an instance of foo, and wishes to call a function001()...
Bar::doThingWithFoo(){

    // foo is at address 0x1a7bbb70 here...
    foo->function001();

}

// The definition of function001().  The address of "this" is as expected.
Foo::function001(){

    // the address of "this" is 0x1a7bbb70 here...
    this->function002();  

}

Foo::function002(){

    // but the address of "this" is 0xbfffe090 here!!!
    // bad things happen, as you might expect.
    this->getMyProperty()->doThing();

} 
```

为什么会发生这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:55:35.590

也许您正在使用多重继承，这导致指针值`this`依赖于上下文：

[http://frogchunk.com/documentation/lang/cpp/Multiple_inheritance_and_the_this_pointer.pdf](http://frogchunk.com/documentation/lang/cpp/Multiple_inheritance_and_the_this_pointer.pdf)

如果您使用 C 强制转换而不是`dynamic_cast`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:25:51.677

疯狂的推测性​​猜测将是其他人也没有想到的，即您可能在代码中的其他位置存在某种缓冲区溢出情况，而缓冲区溢出正在破坏这种情况。

了解代码会有所帮助。

我想如果它是内存损坏，它会导致它有一个核心转储，你注意到了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T01:52:08.890

我同意我们需要查看实际代码的评论。我推测它`0xbfffe090`看起来像堆栈上的地址，这意味着您可能不小心复制了您的对象，然后在副本上调用了一个方法。它也与某些本地地址的某种内存损坏（例如，覆盖本地数组）一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T23:19:38.027

回答我自己的问题：alltom 的答案实际上比看起来更接近，但最终当然是内存损坏。由于将对象用作委托，在调用 function002 之前，function001 内部的内存已损坏。委托已被传递并存储为 void*，并且 C 样式转换回其对象类型以调用其相关方法。

该问题已通过将委托对象存储在变量中（例如：MyDelegate* 委托）而不是存储为 void* 和强制转换来解决。

# javascript - jqGrid gridComplete:- getRowData - 从数组中获取行单元格值

> ID：15285282
> 
> 赞同：8
> 
> 时间：2013-03-08T01:40:31.573
> 
> 标签：javascript, jquery, jqgrid

> 请 - 需要从 jqGrid getRowData 属性设置变量的语法

循环遍历行 - 只需将 ID 和 Phrase 列值拉入变量

```
gridComplete: function () {
  var allRowsInGrid = $('#list').jqGrid('getRowData');
  for (i = 0; i < allRowsInGrid.length; i++) {
    pid = allRowsInGrid[i].ID;
    vPhrase = allRowsInGrid[i].Phrase;
    vHref = "<a href='#' onclick='openForm(" + pid + ", " + vPhrase + ")'>View</a>";
  }
}, 
```

能够使用 getDataIDs 轻松获得 ID :-)

在获取 pid 和 vPhrase for i 的特定列值方面需要帮助

干杯

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-08T02:14:39.017

试试这个：

```
var ids = jQuery("#list").jqGrid('getDataIDs');
for (var i = 0; i < ids.length; i++) 
{
    var rowId = ids[i];
    var rowData = jQuery('#list').jqGrid ('getRowData', rowId);

    console.log(rowData.Phrase);
    console.log(rowId);
} 
```

请注意：如果您的目标是添加一个指向调用 javascript 方法的单元格的链接，您可以使用`formatter`下面给出的方法来实现此目的，格式化程序应该添加到 colModel 中，就像您添加其他列属性（如名称、索引、宽度、对齐等）一样，这样您就可以避免对行数据的迭代

```
formatter: function(cellvalue, options, rowObject) {

    return  "<a href='#' onclick='openForm(" 
            + rowObject.ID + ", " 
            + rowObject.Phrase 
            + ")'>View</a>"; 
      } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T06:02:38.467

当我想通过`RowID`特定的`Cell`.

```
var selRow = jQuery("#list10").jqGrid('getGridParam','selarrrow');  //get selected rows
for(var i=0;i<selRow.length;i++)  //iterate through array of selected rows
{
    var ret = jQuery("#list10").jqGrid('getRowData',selRow[i]);   //get the selected row
    name = ret.NAME;  //get the data from selected row by column name
    add = ret.ADDRESS;
    cno = ret.CONTACTNUMBER
    alert(selRow[i] +' : ' + name +' : ' + add +' : ' + cno);
} 
```

# vba - Excel VBA代码，用于根据相邻单元格中的选择使用与单元格相邻的文本填充单元格

> ID：15285283
> 
> 赞同：1
> 
> 时间：2013-03-08T01:40:47.060
> 
> 标签：vba, excel, excel-2010

根据在下拉菜单中所做的选择，尝试编写代码以使用下拉菜单填充与单元格相邻的单元格。

我需要这个仅适用于活动工作表，而不一定适用于整个工作簿。

在 VBA 中编写代码相对较新，可能是一个新手错误，但仍然需要一些帮助！

获取运行时错误**对象“范围”的方法“值”失败。**

这是我拥有的代码，它是整个工作簿中唯一的代码......

```
Private Sub Worksheet_Change(ByVal Target As Range)

Select Case Range("F18")

Case "Made Margin/Made Sales $"
    Worksheets("Store #").Range("G18").value = 
    "Made margin by $XXX GIG at XX.XX%. Shrink  at XX.XX% or $XXX. QTD Margin at 
    XX.XX%"

Case "Made Margin/Missed Sales $"
    Worksheets("Store #").Range("G18").value = 
    "Made margin by $XXX GIG at XX.XX%. Shrink at XX.XX% or $XXX. QTD Margin at XX.XX%   
    Missed sales by $XXX. Begin explaining Sales $ miss here"

Case "Missed Margin/Made Sales$"
    Worksheets("Store #").Range("G18").value = "Missed margin by $XXX GIG at XX.XX%.   
    Shrink at XX.XX% or $XXX. QTD Margin at XX.XX% Made sales by $XXX. Begin explaining   
    Margin $ miss here"

Case "Missed Margin/Missed Sales"
    Worksheets("Store #").Range("G18").value = "Missed margin by $XXX GIG at XX.XX%.  
    Shrink at XX.XX% or $XXX. QTD Margin at XX.XX% Begin explaining Margin $ miss here,  
    followed by explaining Sales $ miss"

End Select

End Sub 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:21:30.947

您需要添加一个仅在 F18 更改时触发事件的条件。那，并将字符串放入一行或使用“_”键表示多行代码。我还要确保每个案例值只有一组引号，否则会弄乱代码。

我试过了，代码效果很好。

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Not Intersect(Target, Range("F18")) Is Nothing Then

Select Case Range("F18")

Case "Made Margin/Made Sales $"
    Worksheets("Store #").Range("G18").Value = "Made margin by $XXX GIG at XX.XX%.     Shrink  at XX.XX% or $XXX. QTD Margin at"

 Case "Made Margin/Missed Sales $"
    Worksheets("Store #").Range("G18").Value = "Made margin by $XXX GIG at XX.XX%. Shrink at XX.XX% or $XXX. QTD Margin at XX.XX%. Missed sales by $XXX. Begin explaining Sales $ miss here"

Case "Missed Margin/Made Sales$"
    Worksheets("Store #").Range("G18").Value = "Missed margin by $XXX GIG at XX.XX%. Shrink at XX.XX% or $XXX. QTD Margin at XX.XX% Made sales by $XXX. Begin explaining Margin $ miss here"

Case "Missed Margin/Missed Sales"
    Worksheets("Store #").Range("G18").Value = "Missed margin by $XXX GIG at XX.XX%. Shrink at XX.XX% or $XXX. QTD Margin at XX.XX% Begin explaining Margin $ miss here, followed by explaining Sales $ miss"

End Select

End If

End Sub 
```

# multithreading - 如何为期货配置一个微调的线程池？

> ID：15285284
> 
> 赞同：81
> 
> 时间：2013-03-08T01:41:00.323
> 
> 标签：multithreading, scala, parallel-processing, threadpool, future

Scala 的期货线程池有多大？

我的 Scala 应用程序生成了数百万个`future {}`s，我想知道是否可以通过配置线程池来优化它们。

谢谢你。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2014-06-11T23:04:42.677

这个答案来自monkjack，来自已接受答案的评论。但是，人们可能会错过这个很棒的答案，所以我在这里重新发布。

```
implicit val ec = ExecutionContext.fromExecutor(Executors.newFixedThreadPool(10)) 
```

如果您只需要更改线程池计数，只需使用全局执行器并传递以下系统属性即可。

```
-Dscala.concurrent.context.numThreads=8 -Dscala.concurrent.context.maxThreads=8 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-03-08T02:00:46.740

您可以指定自己的 ExecutionContext 来运行您的期货，而不是导入全局隐式 ExecutionContext。

```
import java.util.concurrent.Executors
import scala.concurrent._

implicit val ec = new ExecutionContext {
    val threadPool = Executors.newFixedThreadPool(1000)

    def execute(runnable: Runnable) {
        threadPool.submit(runnable)
    }

    def reportFailure(t: Throwable) {}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-24T05:32:26.647

在 Scala 期货中指定线程池的最佳方法：

```
implicit val ec = new ExecutionContext {
      val threadPool = Executors.newFixedThreadPool(conf.getInt("5"));
      override def reportFailure(cause: Throwable): Unit = {};
      override def execute(runnable: Runnable): Unit = threadPool.submit(runnable);
      def shutdown() = threadPool.shutdown();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-29T10:57:23.633

```
class ThreadPoolExecutionContext(val executionContext: ExecutionContext)

object ThreadPoolExecutionContext {

  val executionContextProvider: ThreadPoolExecutionContext = {
    try {
      val executionContextExecutor: ExecutionContextExecutor = ExecutionContext.fromExecutor(Executors.newFixedThreadPool(25))
      new ThreadPoolExecutionContext(executionContextExecutor)
    } catch {
      case exception: Exception => {
        Log.error("Failed to create thread pool", exception)
        throw exception
      }
    }
  }
} 
```

# xcode - 程序启动时的延迟事件。XCODE

> ID：15285286
> 
> 赞同：0
> 
> 时间：2013-03-08T01:41:11.783
> 
> 标签：xcode, cocos2d-iphone

```
-(void)playpattern {
for (int i = 0; i < 36; i++) {
int button = myIntegers [i];
if (button==1) { 
              [yellow setVisible:NO];
}
} 
```

低于初始化

```
 for (int i = 0; i < 36; i++)
    myIntegers [i]=(i%4)+1;

    yellowbg = [CCSprite spriteWithFile:@"yellowxlixk.png"];
    [yellowbg setPosition:ccp(509, 671.75)];
          yellowbg.scale = .75;
    [self addChild:yellowbg z: 1];

    [self playpattern];

}

return self;
} 
```

如何在启动时延迟此操作？我对此很陌生，请在您的解释中保持基本。如果我需要添加任何内容，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:22:04.400

您可以使用 performSelector 或 scheduleOnce。

1.  使用 scheduleOnce。

    [self scheduleOnce:@selector(playpattern) delay:3];

2.  使用执行选择器

    [self performSelector:@selector(playpattern) withObject:nil afterDelay:3];

# three.js - Threejs 着色器 - 带 Alpha 的 gl_FragColor（不透明度不变）

> ID：15285287
> 
> 赞同：4
> 
> 时间：2013-03-08T01:41:15.533
> 
> 标签：three.js, shader

我正在尝试编写一个简单的着色器，其中一半的场景将被显示，而一半的场景将是透明的。我似乎无法弄清楚为什么透明度不起作用：

```
 uniform sampler2D tDiffuse;
  varying vec2 vUv;

  void main(){
        vec2 p = vUv;
        vec4 color;      

        if(p.x < 0.5){ 
              color = (1.0, 0.0, 0.0, 0.0);
        }else{
              color = texture2D(tDiffuse, p);
        }

        gl_FragColor = color;
  } 
```

着色器运行肯定没有错误 - 屏幕的右半部分是我的threejs 场景，屏幕的左半部分是红色的（当它真的应该是透明的时候）。我读过也许我需要调用 glBlendFunc(GL_SRC_ALPHA); - 但是当我尝试这个时我遇到了错误。为此，我做了 renderer.context.blendFuncSeparate(GL_SRC_ALPHA); 在我的主 js 文件（不是着色器）中。我应该把它放在其他地方让它工作吗？

任何帮助，将不胜感激。作为参考，我将我的着色器与标准 effectsComposer、shaderPass 等一起应用——大多数threejs 着色器示例都使用这些着色器。

在此先感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:22:49.953

只有部分信息和代码片段很难帮助您，所以我只能做出有根据的猜测。

默认情况下`EffectComposer`使用带有`RGB`格式的渲染目标。指定了`RGBA`吗？

您是否指定了 material.transparent = true？

三.js r.56

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-18T18:54:30.167

我遇到了这个问题，对我来说是材料没有启用透明度。

```
let myMaterial = new THREE.ShaderMaterial({
  uniforms: myUniforms,
  fragmentShader: myFragmentShader(),
  vertexShader: myVertexShader(),
});
myMaterial.transparent = true; 
```

# c# - 如何设置一个可以在 C# 和 SQL 中执行的布尔表达式，而不依赖于 EntityFramework 等库？

> ID：15285290
> 
> 赞同：0
> 
> 时间：2013-03-08T01:41:17.160
> 
> 标签：c#, sql, linq, expression, boolean-expression

我想要一个用户（通常是高级用户）可以输入布尔表达式的应用程序。我希望能够在 .NET 和 SQL 中执行布尔表达式。

表达式本身并不难，它们是这样的：

*   国家是美国
*   国家是以下国家之一：美国、加拿大、墨西哥
*   （国家是美国）和（年龄是 20 岁）
*   （国家为美国）或（（年龄为 20 岁）且国家为以下国家之一：美国、加拿大）

我需要能够支持基本的东西，如'in'、等于、大于/小于、介于、包含、startswith 等。我希望能够编译成 C# 并针对 type 的对象运行它`dynamic`，并且也是能够将表达式编译成 SQL。我会将结果插入到非常具体的查询的 where 子句中。

我不想使用 Nhibernate 或 EntityFramework，我希望能够直接执行 SQL。

**更新：** 我已经知道我想使用 ADO.NET 执行它。对不起，如果我没有说清楚。我只是想知道存储一个可以在 C# 和 SQL 中执行的布尔表达式的好方法是什么。我不关心存储过程和参数化（一旦我能够生成查询，后者是显而易见且微不足道的）。输入表达式的用户是我公司内部的，主要是开发人员和高级用户。

所以我正在考虑使用表达式树、抽象语法树、LINQ 等来实现这一点。我不想使用 ORM，但我想做一些与 ORM 在其 LINQ 表达式中所做的非常相似的事情，以将 lambas 转换为`WHERE`子句的代码。

**UPDATE2：** 到目前为止，我们正在考虑这样做的方式是将表达式作为 C# 输入并作为字符串存储在数据库中。当我们想在 .NET 上下文中执行时，我们会编译成 lambda 或 Expression 并可能将其包装在一个对象中，该对象作为一个接口与一个方法来表示布尔表达式`interface IDynamicFilter { bool PassesFilter<SomePocoType>(poco); }`。或者我们可以将 POCO(s) 放入 IEnumerable 并运行 LINQ .Where() 并传入 lambda/表达式，以提取与过滤器匹配的对象。

对于 SQL，这是我比较模糊的部分。我们想要复制 ORM 的功能——访问一个表达式树并将其呈现为一个 SQL 字符串。我们不需要支持全套 SQL。我们只需要支持非常简单的运算符，例如带括号的分组、AND/OR/NOT、in/not in、GT/LT/EQ/NEQ/between。我们还希望支持一些基本的数学运算 ( `a + b > c`)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:15:34.550

如果我了解您的问题，您可以执行以下操作（请记住，我不建议将此类事情用于生产）：

```
var query = "SELECT * FROM TABLE as T WHERE 1=1";

if ([some condition]) query += " AND T.CountryCode = 'USA'";
if ([some other condition]) query += " AND T.CountryCode IN ('USA', 'CAN', 'MEX')";
if ([yet another condition]) query += " AND T.CountryCode = 'USA' AND T.Age = 20";

using (var conn = new SqlConnection(connectionString))
{
    conn.Open();
    using (var comm = new SqlCommand(conn, query))
    {
        var results = comm.ExecuteReader();  //returns an IDataReader you can loop through.
    }
} 
```

我再说一遍，确保你正在参数化你正在搜索的任何变量，这种查询很容易受到 sql 注入的影响。这是懒惰的开发人员做事的方式，而且可能非常危险。如果你想避免 ORM，这种逻辑应该在你传递参数的存储过程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:45:42.507

Microsoft CRM 有类似的东西，它们为您提供表单字段和一个下拉列表，指定您要查找的内容以及您的逻辑运算符是什么，因此您可能拥有。

```
Column:
Select Column in Database

Opeartor: 
>
<
>=
<=
LIKE
=
IN
NOT IN

Value:
TextBox for user input 
```

因此，您将获取用户输入并基于此创建查询。如果您不想使用像实体这样的 ORM，那么您可以使用 ADO.NET。

# linker - Linux 中 dmd 和 Derelict 的链接器问题：Ld 找不到 .a 文件

> ID：15285291
> 
> 赞同：1
> 
> 时间：2013-03-08T01:41:18.527
> 
> 标签：linker, dmd

我正在尝试使用 Derelict2 绑定在 D 中编写一个测试程序。这是我的代码：

```
import std.stdio;
import derelict.sfml.audio;

pragma(lib, "/home/ryan/Derelict2/lib/libDerelictSFMLAudio.a");
pragma(lib, "/home/ryan/Derelict2/lib/libDerelictUtil.a");

void main(){
  DerelictSFMLAudio.load();
} 
```

所有 derelict 的 .di 文件都在 dmd 的默认导入目录中，所以我的印象是以下命令应该编译并链接我的程序。

```
dmd test.d -L-lDerelictSFML -L-lDerelictUtil -L-ldl 
```

但是，我收到此错误：

```
/usr/bin/ld: cannot find -lDerelictSFML
/usr/bin/ld: cannot find -lDerelictUtil
collect2: error: ld returned 1 exit status
--- errorlevel 1 
```

我到底做错了什么？

有点离题，但也令人担忧：

-ldl 标志有什么作用？我知道它是成功链接所必需的，但我不确定如何，而且它不在 ld 手册中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T18:29:02.820

您还需要将库位置（例如 -LL/usr/lib/dmd）传递给 dmd：

```
dmd test.d -I/usr/include/d -L-L/usr/lib/dmd -L-lDerelictSFML -L-lDerelictUtil -L-ldl 
```

`-ldl`代表 libdl，它是一个库，可让您的程序能够动态链接到库。

# javascript - 如何通过 CKEditor 4.0 的默认样式覆盖网站模板的样式表

> ID：15285292
> 
> 赞同：0
> 
> 时间：2013-03-08T01:41:23.567
> 
> 标签：javascript, css, asp.net-mvc, ckeditor, stylesheet

当我将 CKEditor 4.0 与没有任何样式或样式表关联的 HTML 页面结合时，编辑器在显示项目符号和数字时看起来很好。

但是，当我应用模板的样式表/CSS 时，集成的 CKEditor 组件开始无法正确显示项目符号和数字。我的意思是它显示了站点的样式表的项目符号，这完全不是为该上下文指定的。例如，项目符号在每个文本条目的右侧显示为一个小图片。或者没有显示 1、2、3 等。

如何使 CKEditor 不使用站点的样式表，而是使用它自己的样式表。代码片段如下所示：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>FAQ</title>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="~/Content/themes/construct/stylesheets/style.css"> 
<link rel="stylesheet" href="~/Content/themes/construct/stylesheets/responsive.css"> 
<script src="~/Content/themes/construct/scripts/jquery.min.js"></script> 
<script src="~/Content/themes/construct/scripts/jquery.simpleFAQ-0.7.min.js"></script>  
<script src="~/Content/themes/construct/scripts/js_func.js"></script>
<script src="~/ckeditor/ckeditor.js"></script>

<script>
    $(function () {
        $('#faq').simpleFAQ();
    });
</script>

</head>
<body>
<div class="wraper">
 <header class="header">
 </header>
</div> 

 <!-- /top_title -->
 <!-- /faq_list -->
 <div class="faq_list">
  <ul class="filter">
   <li class="active all"><a href="#all">All</a></li>
   <li class="business"><a href="#business">Business</a></li>
   <li class="technical"><a href="#technical">Technical</a></li>
   <li class="miscellaneous"><a href="#miscellaneous">Miscellaneous</a></li>
  </ul>
  <ul id="faq">
    @foreach (var entry in Model.MyList)
    {
    <li class="all business">
        <p class="question">
            @entry.Question
        </p>
        @foreach (var newEntry in entry.List2)
        {            
            <div class="answer" id="editable" contenteditable="true">
                <h1>@newEntry.Header</h1>
                <p>@newEntry.Answer</p>
            </div>

            }
    </li>
        }
  </ul>
 </div>
 </body>
 </html> 
```

谢谢您的帮助。皮疹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:51:16.643

覆盖样式表的最佳方法是..

1.  将相同的类复制到一个新文件中，并将该文件链接到默认站点之后。前任。默认：

    .class1 {字体：正常 12px Arial;}

覆盖

```
.class1 {font: bold 12px Arial;} 
```

2..按照前面的流程，将属性标记为!important。前任..

默认：

```
.class1 {font: normal 12px Arial;padding:10px;} 
```

覆盖：

```
.class1 {font: normal 12px Arial;padding-left:10px !important;} 
```

# javascript - 方法与函数，以及其他问题

> ID：15285293
> 
> 赞同：55
> 
> 时间：2013-03-08T01:41:31.710
> 
> 标签：javascript, function, methods

关于JS，两者有什么区别？我知道方法与对象相关联，但我很困惑函数的目的是什么？它们各自的语法有何不同？

另外，这两种语法有什么区别：

```
var myFirstFunc = function(param) {
    //Do something
}; 
```

和

```
function myFirstFunc(param) {
    //Do something
}; 
```

另外，我在某处看到我们需要在使用函数之前做这样的事情：

```
obj.myFirstFunc = myFirstFunc;
obj.myFirstFunc("param"); 
```

为什么需要第一行，它有什么作用？

对不起，如果这些是基本问题，但我从 JS 开始并且很困惑。

编辑：对于最后一段代码，这就是我所说的：

```
// here we define our method using "this", before we even introduce bob
var setAge = function (newAge) {
  this.age = newAge;
};
// now we make bob
var bob = new Object();
bob.age = 30;
// and down here we just use the method we already made
bob.setAge = setAge; 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-08T02:30:35.297

回答您关于“功能”和“方法”之间有什么区别的标题问题。

这是语义，与您要表达的内容有关。

在 JavaScript 中，每个函数都是一个对象。对象是键：值对的集合。如果一个值是基元（数字、字符串、布尔值）或其他对象，则该值被视为属性。如果一个值是一个函数，它被称为“方法”。

在对象的范围内，函数被称为该对象的方法。它是从对象命名空间调用的`MyObj.theMethod().`既然我们说函数是一个对象，那么函数中的函数可以被认为是该函数的方法。

你可以说“我将使用我的对象的保存**方法”之类的话。**并且“这个保存方法接受一个**函数**作为参数。” 但是您通常不会说函数接受方法作为参数。

顺便说一句，Stoyan Stefanov 的 JavaScript 模式一书详细[介绍](http://www.phpied.com/publishing-5-books-this-year/)*了*您的问题，如果您真的想了解该语言，我强烈推荐您阅读。以下是书中关于这个主题的引述：

> 因此，作为对象的函数 A 可能具有属性和方法，其中一个恰好是另一个函数 B。然后 B 可以接受函数 C 作为参数，并且在执行时可以返回另一个函数 D。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-01-20T06:29:51.960

有一点点不同——

方法：当对象与它关联时，方法是一个函数。

```
var obj = {
name : "John snow",
work : function someFun(paramA, paramB) {
    // some code..
} 
```

功能：当没有对象与之关联时，它就起作用了。

```
function fun(param1, param2){
// some code...
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2019-03-02T17:55:09.513

许多答案都在说*方法*是在对象上定义时调用的函数。

虽然当人们谈论 JavaScript 或一般的面向对象编程时使用这个词的方式通常是正确的（参见[此处](https://stackoverflow.com/a/155655/10367549)），但值得注意的是，**在 ES6 中，*方法*一词具有非常具体的含义**（参见第[14.3 节方法）规范的定义](https://www.ecma-international.org/ecma-262/9.0/index.html#sec-method-definitions)）。

* * *

# 方法定义

方法（严格意义上）是通过对象字面量中的简洁方法语法或类声明/表达式中的类方法定义的函数*：*

```
// In object literals:
const obj = {
    method() {}
};

// In class declarations:
class MyClass {
    method() {}
} 
```

* * *

# 方法特异性

这个[答案](https://stackoverflow.com/a/39263543/10367549)很好地概述了*方法*的特殊性（严格意义上），即：

1.  `[[HomeObject]]`方法被分配了一个允许它们使用的内部属性`super`。
2.  方法不是用`prototype`属性创建的，它们没有内部`[[Construct]]`方法，这意味着它们不能用`new`.
3.  方法的名称不会成为方法范围内的绑定。

下面是一些示例，说明方法（严格意义上）与通过函数表达式在对象上定义的函数有何不同：

### 示例 1

```
const obj = {
    method() {
        super.test;         // All good!
    },
    ordinaryFunction: function ordinaryFunction() {
        super.test;         // SyntaxError: 'super' keyword unexpected here
    }
};
```

### 示例 2

```
const obj = {
    method() {},
    ordinaryFunction: function ordinaryFunction() {}
};

console.log( obj.ordinaryFunction.hasOwnProperty( 'prototype' ) );  // true
console.log( obj.method.hasOwnProperty( 'prototype' ) );            // false

new obj.ordinaryFunction();     // All good !
new obj.method();               // TypeError: obj.method is not a constructor
```

### 示例 3

```
const obj = {
    method() {
        console.log( method );
    },
    ordinaryFunction: function ordinaryFunction() {
        console.log( ordinaryFunction );
    }
};

obj.ordinaryFunction()  // All good!
obj.method()            // ReferenceError: method is not defined
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T02:07:06.490

您的第一行是创建一个引用函数的对象。你会这样引用它：

```
myFirstFunc(param); 
```

但是你可以将它传递给另一个函数，因为它会像这样返回函数：

```
function mySecondFunction(func_param){}
mySecondFunction(myFirstFunc); 
```

第二行只是创建了一个函数`myFirstFunc`，它的引用方式如下：

```
myFirstFunc(param); 
```

并且在范围上受到限制，具体取决于它的声明位置，如果它在任何其他函数之外声明它属于全局范围。但是，您可以在另一个函数中声明一个函数。然后，该函数的范围仅限于在其内部声明的函数。

```
function functionOne(){
    function functionTwo(){}; //only accessed via the functionOne scope!
} 
```

您的最后一个示例是创建函数实例，然后通过对象参数引用这些实例。所以这：

```
function myFirstFunc(param){};

obj.myFirst = myFirstFunc(); //not right!
obj.myFirst = new myFirstFunc(); //right!

obj.myFirst('something here'); //now calling the function 
```

表示您有一个引用函数实例的对象。这里的关键是，如果函数更改，您存储的*引用*`obj.myFirst`将不会更改。

虽然@kevin 基本上是正确的，但 JS 中只有函数，您可以创建更像方法而不是函数的函数，例如：

```
function player(){

    this.stats = {
        health: 0,
        mana: 0,

        get : function(){
            return this;
        },

        set : function( stats ){
            this.health = stats.health;
            this.mana = stats.mana;
        }  
} 
```

然后你可以调用`player.stats.get()`它，它会返回给你`heath`, 和的值`mana`。所以我会考虑`get`and`set`在这种情况下是`player.stats`对象的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-04T09:24:27.127

函数执行语句列表示例：

```
 function add() { 
     var a = 2; 
     var b = 3;
     var c = a + b;
     return c;
 } 
```

1) 方法是应用于对象示例的函数：

```
 var message = "Hello world!";
 var x = message.toUpperCase(); // .toUpperCase() is a built in function 
```

2) 使用对象构造函数创建方法。一旦方法属于该对象，您就可以将其应用于该对象。例子：

```
function Person(first, last, age, eyecolor) {
    this.firstName = first;
    this.lastName = last;
    this.age = age;
    this.eyeColor = eyecolor;
    this.name = function() {return this.firstName + " " + this.lastName;};
}

document.getElementById("demo").innerHTML = person.fullName(); // using the 
method 
```

方法的定义：方法是作为函数的对象的属性。方法的定义方式与定义普通函数的方式相同，只是它们必须作为对象的属性进行分配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-13T23:33:04.037

方法是对象的属性，其值为函数。方法以下列格式在对象上调用：object.method()。

//这是一个名为developer的对象

```
 const developer = {
  name: 'Andrew',
  sayHello: function () {
    console.log('Hi there!');
  },
  favoriteLanguage: function (language) {
    console.log(`My favorite programming language is ${language}`);
  }
}; 
```

// favoriteLanguage: 和 sayHello: 和 name: 都是名为 developer 的对象中的属性

现在假设您需要调用 favoriteLanguage 适当的女巫是对象内部的一个函数..

你这样称呼它

```
developer.favoriteLanguage('JavaScript');

// My favorite programming language is JavaScript' 
```

所以我们称之为：developer.favoriteLanguage('JavaScript'); 它不是一个函数它不是一个对象？这是什么？它是一种方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T01:48:09.690

```
var myFirstFunc = function(param) {
    //Do something
}; 
```

和

```
function myFirstFunc(param) {
    //Do something
}; 
```

（几乎）相同。第二个是（通常）只是简写。但是，正如这个 jsfiddle ( [http://jsfiddle.net/cu2Sy/](http://jsfiddle.net/cu2Sy/) ) 所示，`function myFirstFunc`一旦进入封闭范围就会导致函数被定义，而`myFirstFunc = function`只有在执行到达该行时才会创建它。

至于方法，它们有一个`this`参数，即当前对象，所以：

```
var obj = {};
obj.func = function( ) {
    // here, "this" is obj
    this.test = 2;
}
console.log( obj.test ); // undefined
obj.func( );
console.log( obj.test ); // 2 
```

您显示的确切语法是因为您也可以这样做：

```
function abc( ) {
    this.test = 2;
}
var obj = {};
obj.func = abc;
obj.func( ); // sets obj.test to 2 
```

但你不应该没有充分的理由。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-07T07:45:53.050

[ecma 文件](https://www.ecma-international.org/ecma-262/9.0/index.html#sec-method)

> 4.3.31method : 作为属性值的函数
> 
> 注意 当函数作为对象的方法被调用时，对象作为 this 值传递给函数。

很清楚：当你调用一个函数时，如果它隐含一个`this`（**指向一个对象**）并且如果你不能在没有对象的情况下调用该函数，**那么该函数**应该命名为**method**。

# wordpress - WordPress 多站点上的网络范围的 Cron 调度

> ID：15285294
> 
> 赞同：5
> 
> 时间：2013-03-08T01:41:38.557
> 
> 标签：wordpress, cron, wpmu

我正在使用 WP Cron 从插件安排网络范围的 cron。

无论从哪个博客激活它，我都想每小时运行一次 cron。最重要的是，我需要防止 cron 从网络上的不同站点多次运行。

有没有办法使用 WordPress 调度系统进行设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T16:42:31.647

多站点上的 wp-cron 依赖于（子）域，因此每个实例都是独立的。因此，来自 a.site.com 的调用与来自 b.site.com 的调用是完全独立的实例

*这意味着，如果*激活 cron 的代码可以从该网络中的任何站点运行，则默认情况下，当您在多个实例上运行插件时，无法阻止它在每个网络上运行多次。

有几种方法可以解决这个问题：

1）（这是未经测试的，但我认为它可能有效）您可以在 wp-config 中定义一个名为 WP_CRON_LOCK_TIMEOUT 的常量，您可以将其定义为 3600。这意味着*所有*cron 进程只能每小时运行一次。不确定这是否是您所追求的选择。

2) 停止 wp-cron 自行运行，然后设置服务器 cron 作业以在 crontab 中每小时触发一次 wp-cron。你会定义('DISABLE_WP_CRON', true); 在 wp-config 然后在 crontab 中执行 curl [http://site.com/wp-cron.php](http://site.com/wp-cron.php) 以每 3600 秒运行一次（或 wget 而不是 curl）

3) 您可以设置一个网络范围的站点选项，该选项在 wp-cron 每小时首次运行时更新。您需要在运行 cron 作业的脚本中构建一个检查以获取此选项，并查看存储的时间是否少于 3600 秒前。如果是，则不要让 cron 运行。如果不是，则运行 cron 并使用当前时间更新站点范围的选项。（参见 add_site_option() update_site_option() 和 get_site_option() 本质上与它们的单站点对应物相同，但在网络范围内）

4) 有一个“高级”插件，它基本上会产生一个 PHP 后台进程，该进程独立于访问您网站的任何人运行。默认情况下，它每 60 秒运行一次，但很容易更改它。[http://codecanyon.net/item/improved-cron/176543](http://codecanyon.net/item/improved-cron/176543)

wp-cron.php 并没有真正为您提供任何操作或过滤器，它确实设置了您可能会尝试测试的瞬态，但我认为这不是前进的方向。

有一些非常有用（免费）的 cron 插件：

[http://wordpress.org/extend/plugins/wp-crontrol/](http://wordpress.org/extend/plugins/wp-crontrol/)

[http://wordpress.org/extend/plugins/wp-cron-control/](http://wordpress.org/extend/plugins/wp-cron-control/)

[http://wordpress.org/extend/plugins/cron-view/](http://wordpress.org/extend/plugins/cron-view/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-01T09:43:59.433

试试这个：

[http://www.lucasrolff.com/wordpress/why-wp-cron-sucks/](http://www.lucasrolff.com/wordpress/why-wp-cron-sucks/)

这个简单的解决方案对我有用。

只需按照第 2 部分。

# cakephp - CakePHP 2 没有正确处理二进制字段

> ID：15285296
> 
> 赞同：2
> 
> 时间：2013-03-08T01:41:46.203
> 
> 标签：cakephp, pdo, binary-data

我在使用 CakePHP 2.x (2.1.5, 2.2.7) 将二进制数据插入数据库时​​遇到了真正的问题。

我的问题是，当我将原始二进制数据插入数据库时​​，出现以下错误：

> 错误：SQLSTATE[HY093]：无效参数号：混合命名参数和位置参数

我的插入代码如下所示：

```
 $imageData = array(
            $this->alias => array(
                'parent_id' => $imageId,
                'image' => $imageBlob,
                'encoding' => $encoding,
                'mime_type' => $mime_type,
                'file_name' => $options['fileDetails']['name'],
                'width' => $imageWidth,
                'height' => $imageHeight,
                'size_type' => $resizeName,
                'owner_class' => $options['ownerClass'],
                'token' => $this->generateToken()
            )
        );

        $this->create();
        $this->save($imageData); 
```

如果我在插入之前对 imageBlob 数据进行 base64 编码，则插入工作正常。CakePHP 1.3 中的类似代码运行良好，无需先对数据进行 base64 编码。MySQL 中的列是 MEDIUMBLOB。

我已经开始通过 cake 库跟踪代码，并确定列类型被正确猜测为“二进制”，并且执行正在运行“二进制”案例：

```
 switch ($column) {
        case 'binary':
            return $this->_connection->quote($data, PDO::PARAM_LOB); 
```

我也很惊讶 Cake 实际上并没有使用带有命名参数的普通 PDO 语法，它只是构建了一个很大的长 SQL 字符串。

插入二进制数据的问题可能是因为我在 PHP 5.2.6 或 MySQL 5.0.45 中运行吗？（两个都很旧的版本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:45:03.643

这似乎是 PHP 5.2.6 中 PDO 系统的限制。有关更多信息，请参阅此错误：[https ://bugs.php.net/bug.php?id=44251](https://bugs.php.net/bug.php?id=44251)

显然这是在 PHP 5.2.8 中修复的，这就是为什么 CakePHP 的要求说 5.2.8 是与其兼容的 PHP 的最低版本。

因此，解决方案是对您的数据进行 Base64 处理，或者升级到 PHP 5.2.8。

我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:27:52.707

我在使用 PHP 5.2.6 和 MySQL 5.0.45-7 时遇到了完全相同的问题。使用相同的代码库和 CakePHP 2.1.5 的 5.4.4 和 MySQL 5.5.25 没有发生此问题。

在查看堆栈跟踪和 SQL 插入语句时，我的二进制数据确实包含单引号字符，我确信这是查询的一部分，它会抛出错误消息中所述的列名/值计数。

我能想出的唯一解决方案是在将二进制文件数据插入数据库之前对其进行 base64 编码（当然，在将其返回时进行 base64 解码）。我很想看看是否有更好的解决方案。

# jquery-address - IE6 上的重定向循环

> ID：15285303
> 
> 赞同：0
> 
> 时间：2013-03-08T01:42:40.243
> 
> 标签：jquery-address

我一直在我的一个项目中使用 Jquery 地址并且一切正常，但是当我在 IE6 中尝试它时，行为非常奇怪。

当我尝试访问 [http://www.local.test.com/?param=123](http://www.local.test.com/?param=123)

它无限循环： [http ://www.local.test.com/#/?param=123#/?param=123#/?param=123#/?param=123#/?param=123#/](http://www.local.test.com/#/?param=123#/?param=123#/?param=123#/?param=123#/?param=123#/)

顺便说一下，这是我的 jquery 初始化

```
(function($){ 
//JQUERY ADDRESS Initialization
var init = true;
state = window.history.pushState !== undefined;

  $.address.state('/').init(function(event) {
     $('.address').address();
  }).change(function(event) {
      if (state && init) {
          init = false;
          //handleRequest();
    } 
      route();
  });
if (!state) {
}

}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:13:46.670

放弃 IE6 支持。我知道这不能回答你的问题，但它是*你问题**的*答案。

# spring-security - 任何 URL 的 Spring Security 过滤器

> ID：15285305
> 
> 赞同：0
> 
> 时间：2013-03-08T01:43:09.087
> 
> 标签：spring-security

我有如下要求

1.  用户请求访问welcome.html。在请求的过程中，我们还发布了用户 ID。

2.  一旦请求到达服务器，首先认为我需要检查用户是否存在于我的数据库中，如果它不存在，那么我必须重定向到登录页面并且如果用户已经存在于我的数据库中，需要创建新会话并重定向到welcome.html。

我不确定，我怎样才能实现这个功能。

寻找一些想法。

谢谢

阿迪

# android - Android sqlite where, like 和 orderby 一起

> ID：15285306
> 
> 赞同：0
> 
> 时间：2013-03-08T01:43:33.630
> 
> 标签：android, sqlite, sql-like

我正在尝试从以下模式的 SQLite 数据库中获取所有行，该模式以**Group**开头并以**(General)**结尾。：

```
Group n (General)
Group n+1 (General)
Group n+1+... (General) 
```

因为，我是第一次使用 SQL，目前我尝试使用如下所示的原始查询。这是抛出 SQLException 因为我的查询不正确。

```
 Cursor cursor = mDatabase.rawQuery("SELECT DISTINCT " + KEY_LOCATION
            + " FROM " + FTS_VIRTUAL_TABLE + " ORDER BY " + KEY_LOCATION
            + " ASC" + " WHERE " + KEY_LOCATION + " LIKE '"
            + "%Group%%%%General%" + "'", null); 
```

这是上面执行的堆栈跟踪：

```
03-08 09:38:49.340: E/AndroidRuntime(4082): FATAL EXCEPTION: main 03-08 09:38:49.340: E/AndroidRuntime(4082): android.database.sqlite.SQLiteException: near "WHERE": syntax error (code 1): , while compiling: SELECT DISTINCT suggest_text_1 FROM FTSlocation ORDER BY suggest_text_1 ASC WHERE suggest_text_1 LIKE '%Group%%%%General%'
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
03-08 09:38:49.340: E/AndroidRuntime(4082):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253) 
```

谁能指导我如何实现它，或者可能提示我如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:49:25.633

将`ORDER BY`子句设置在`WHERE`.

那应该可以

# php - 使用 Facebook Graph API 创建“时间线照片”相册

> ID：15285308
> 
> 赞同：5
> 
> 时间：2013-03-08T01:43:40.087
> 
> 标签：php, facebook, api, facebook-graph-api

# 我想要的是

我需要在页面墙上创建带有大预览图片的帖子 - 就像您上传照片时显示的那样。使用 Facebook Graph API 将这些照片添加到用户（或页面）的“时间线照片”相册中是有意义的。

当然我可以轮询用户相册列表并搜索`type:"wall"`一个（即英文翻译中的*时间轴照片*），但如果相册不存在怎么办？如何创建一个或如何让 Facebook Graph 创建它？

# 我试过什么

尝试`/me/feed`使用消息和图片 URL（参数`picture`或`source`）发帖，但它所做的只是创建一个`type:"link"`带有小图片的帖子，而我需要的是`type:"photo"`一张。

再一次，我需要它，因为如果帖子是照片，那么大照片就会显示在墙上。例如，当我将图片上传到为我的应用程序自动创建的相册时，就会发生这种情况。但问题是，当有几张照片相继发布时，Facebook 会自动将它们分组到属于相册的一组中。

# 附言

基本上，我想要实现的是能够将帖子发送到页面墙上，墙上本身有大​​的预览照片，这些照片没有按专辑名称分组。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:38:43.530

通过张贴照片解决`/{page-id}/photos`。

[https://developers.facebook.com/docs/graph-api/reference/v2.0/page/photos](https://developers.facebook.com/docs/graph-api/reference/v2.0/page/photos)

# javascript - 过度使用 jQuery 的 preventDefault() 和 stopPropagation()

> ID：15285313
> 
> 赞同：7
> 
> 时间：2013-03-08T01:44:31.083
> 
> 标签：javascript, jquery

我最近在与一位同事讨论我们的编码实践中的一些差异，在那里我提出了一个关于他在他的事件处理程序中过度使用上述两种方法的问题。具体来说，它们看起来都是这样的**......**

```
$('span.whatever').on('click', function(e) {

    e.preventDefault();
    e.stopPropagation();

    /* do things */

}); 
```

他声称这是一个很好的实践，没有可预见的反弹，并且将改善跨平台支持，同时减少未来的意外问题。

我对你们的问题：如果他是对的，为什么 jQuery 团队没有将这种行为全局应用于所有事件处理程序？实际上，我的假设是他错了，仅仅是因为这些方法可以独立使用，但谁知道……非常感谢您的洞察力。

--

**更新：**我做了一个简单的速度测试，这两个功能造成了一点阻力，但没有什么特别明显的。不过，除其他外，我认为在使用它们时要慎重考虑是一个很好的理由。

```
$('span.whatever').on('click', function(e) {

    var start = new Date();

    for (i = 0; i < 999999; i++) {
        e.preventDefault();
        e.stopPropagation();
    }

    console.log( new Date() - start );

}); 
```

上面记录了约 9.5 秒，当我将函数调用退出循环时，约 2.5 秒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T02:15:07.447

我没有和你的同事做同样的事情（在每个事件处理程序上推送 2 个调用），但我确实有同样的做法，即明确使用这些调用而不是“返回 false；”，我相信这让我生活更轻松。

当我开始使用 Jquery 时，我想如果我需要停止传播并防止默认值，我应该只“返回 false”，我到处都这样做了。

```
$('a.whatever').on('click', function(e) {

    do_stuff();

    return false;
}); 
```

但是我最终遇到了两个问题：

*   如果 do_stuff() 有任何导致异常的严重错误，“return false;” 永远都达不到！！！错误最终会被 jquery “很好地” 吞下；您的事件将冒泡，并让浏览器执行默认操作。如果您在一个单页应用程序中并且单击了一个链接，那么据您所知，该页面已导航离开，并且整个应用程序状态都消失了（我以前去过那里）。

*   我对返回 false 太宽容了：在很多情况下，我只需要一个 preventdefault()。“return false”正在扼杀事件冒泡，有时会阻碍我执行更高 dom 层次结构的另一个操作的能力（或者使我使用的其他一些插件/库无法正常工作）

所以我现在更喜欢明确。我几乎**从不**使用“return false;” 不再。如果我有一个不能传播或不执行默认值的事件处理程序，我会故意将它放在我的函数**FIRST**中，在任何处理代码之前。在事件处理期间发生的任何事情都不应**影响**我不希望默认操作运行和/或事件不冒泡的事实。

是的，话虽如此，我也注意到在需要时只使用这两个中的一个（或者在某些情况下根本不使用）。我不会无缘无故地同时添加 preventDefault() 和 stopPropagation() 。我在处理程序中操纵事件的任何地方，都是有意识的逐案决策的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:16:28.493

如果元素是菜单的一部分并且单击事件应该冒泡并告诉菜单也自行关闭，那将是一个问题。

或者，如果菜单在其他地方打开并且在菜单外部单击应该会冒泡到事件处理程序将关闭菜单的主体。但是停止气泡的元素会阻止菜单关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T09:47:26.533

```
<div id="wrapper">
            <div id="header">header
              <div id="footer">footer
              <div id="content">click this!!!</div>
              </div>
            </div>

        </div>

$("#wrapper div").click(function(){
  console.log(  $(this) )
}); 
```

请尝试单击到 div 并显示控制台...

现在添加

```
$("#wrapper div").click(function(e){
  e.stopPropagation()
}) 
```

# perl - HTML::FormHandler 动态表单使用你自己的小部件

> ID：15285314
> 
> 赞同：0
> 
> 时间：2013-03-08T01:44:32.257
> 
> 标签：perl, widget, forms, catalyst

我正在使用[HTML::FormHandler](https://metacpan.org/module/HTML::FormHandler)来动态创建一个表单，如下所示：

```
my $form = HTML::FormHandler->new(
    name => 'types',
    field_list => \@field_list,
    widget_name_space => ['my_app::Form::Widget'],
); 
```

我试图`widget`通过这样设置来使用我自己的字段：

```
field => {
    type  => 'Checkbox',
    label  => $_->{label},
    widget_wrapper => 'MyWidget',
}; 
```

但是，每当我尝试创建表单时，我都会收到此错误：

```
"Can't find Wrapper widget MyWidget from my_app::Form::Widget, 
HTML::FormHandler::Widget, HTML::FormHandlerX::Widget at
/usr/local/share/perl5/HTML/FormHandler/Widget/ApplyRole.pm line 39." 
```

我可以将它`widget`与我在文件中定义的表单一起使用，但由于某种原因，每当我尝试像这样动态创建表单时，我都会收到此错误。有谁知道我做错了什么？谢谢！

# github - 有没有办法在 github 中使用 pre/post 提交钩子从 master 更新 gh-pages 分支？

> ID：15285324
> 
> 赞同：3
> 
> 时间：2013-03-08T01:46:01.220
> 
> 标签：github, github-pages

我有一个完全静态的站点（例如[https://github.com/robertjchristian/angular-enterprise-seed](https://github.com/robertjchristian/angular-enterprise-seed)）托管在[github](https://github.com/robertjchristian/angular-enterprise-seed)上，我主要在 master 分支工作。/app/ 目录的内容是我要托管的逐字节内容。所以在开发过程中我只是 cd ~/projects/angular-enterprise-seed/app，然后是“python -m SimpleHTTPServer”。这使我可以在 localhost:8000 本地浏览该站点。

我也想在网络上托管 /app 的静态内容，而 gh-pages 是理想的候选者。以下是我的要求：

*   不想“只使用 gh-pages 分支作为主”
*   不想依赖使 gh-pages 与来自客户端的主更改保持一致的包装脚本。
*   不想构建一个服务来处理 webhook 帖子、从 master 结帐和签入 gh-pages。

理想情况下，它会是一个 github 钩子，上面写着“提交提交钩子 - 将 gh-pages 与 master 中的更改同步”

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T14:13:32.280

在阅读[了](https://stackoverflow.com/questions/13907038/build-into-gh-pages-branch-from-master-branch)处理[master](https://stackoverflow.com/questions/5807459/github-mirroring-gh-pages-to-master)和 gh-pages之间[同步](http://lea.verou.me/2011/10/easily-keep-gh-pages-in-sync-with-master/)[的](https://stackoverflow.com/questions/20411849/push-local-master-into-gh-pages-branch-on-github) [各种](https://gist.github.com/cobyism/4730490) [不同](https://stackoverflow.com/questions/1705224/github-how-to-include-files-from-master-in-new-git-branch-gh-pages)[解决方案](https://gist.github.com/chrisjacob/825950)后，我最终采用了 JavaScript 大师[Sindre Sorhus](https://twitter.com/sindresorhus)和其他人所青睐的方法：

1.  将 gh-pages 分支设为 GitHub 上的默认分支
2.  [删除主分支](http://oli.jp/2011/github-pages-workflow/#deleting-master)
3.  使用`gh-pages`分支作为主。

你可以在 GitHub 上的 Sindre 的[screenful.js repo](https://github.com/sindresorhus/screenfull.js)或我的项目[selection-menu](https://github.com/iDoRecall/selection-menu)中看到这一点。

# ios - 将 sectionNameKeyPath 与 NSFetchedResultsController 一起使用

> ID：15285327
> 
> 赞同：0
> 
> 时间：2013-03-08T01:46:05.950
> 
> 标签：ios, core-data

我有一种情况，我正在使用 NFC 获取消息列表。每条消息都有一个名为“未读”的属性，如果尚未看到，则将其设置为 true。我还使用了一个 sortDescriptor，它以最新到最旧的顺序为我提供消息。

我想要做的是将消息分成两个部分。一个表示未读 == true，一个表示未读 == false。

我将 sectionNameKeyPath 设置为 @"unread" 但这些部分似乎是颠倒的。我也不清楚使用 sectionNameKeyPath 的选项是什么。我已阅读文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:14:39.033

添加两个排序描述符，一个用于未读，一个用于您的时间戳。确保未读排序描述符在 sortDescriptors 数组中排在第一位。

# android - 如何从命令行编译 APK？

> ID：15285331
> 
> 赞同：24
> 
> 时间：2013-03-08T01:46:30.757
> 
> 标签：android, windows, delphi, compilation, automation

我对按需制作 Android 应用程序很感兴趣。根据客户的请求，我的网站会将 JSON 文件直接发送给我在 Delphi 中创建的 Windows 应用程序。这会将文件保存在 Android 应用程序源文件夹中，然后执行命令行告诉 Android 编译器生成 APK 文件并将其发送到我的客户端，所有这些都不需要我在场。

Android 项目是用[MotoDev 制作](http://www.motorola.com/sites/motodev/us-en/motodev_lp.html)的。它使用我根目录中的 Android SDK。

我应该如何配置命令行以从我的 Delphi 程序中实现这一点？

我还需要更改清单以放置一个新的版本号，这样它就不会与其他客户端版本冲突。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-08T02:21:27.540

Android 使用 Ant 构建系统，因此您可以为您的项目创建一个`build.xml`和`build.properties`文件。

您需要先创建`build.xml`文件：

```
android update project -p . 
```

这将生成一个`build.xml`文件。您可能应该为您的项目自定义构建步骤和目标。在您的情况下，一个好主意是让`build.properties`您的网站为特定构建生成文件......然后通过`build.xml`文件包含它。特别是，您需要在`build.properties`文件中指定签名密钥的位置以及密码是什么：

**构建.属性：**

```
key.store=keystore.dat
key.alias=signing_key
key.store.password=password123
key.alias.password=password123 
```

构建过程 using`ant`还允许您在 Java 文件中进行变量替换，这可能是另一个想法。它将允许您在逐个客户端的基础上进一步自定义构建过程。

默认情况下，构建由以下触发：

```
ant clean
ant release 
```

另一个好主意：让 Ant 将生成的 APK 文件复制到网站可访问的网络共享中，方法是在该部分中放置`< copy ... />`一行。`< target name="release" >`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-22T16:25:13.903

**在项目创建时创建 build.xml**

如果您开始一个新项目：

```
android create project \
    --target 1 \
    --name MyName \
    --path . \
    --activity MyActivity \
    --package com.yourdomain.yourproject 
```

将生成使用的`build.xml`文件。`ant`

该`android`工具位于`tools/`您下载的 SDK 的目录中。

**创建调试版本**

除了：

```
ant release 
```

对于最终版本，您还可以使用以下命令创建调试版本：

```
ant debug 
```

**生成的apk的位置**

生成的 apk 放在`bin/`.

最重要的输出是：

```
MyName-debug.apk
MyName-release.apk 
```

但也会生成一些中间 apk，特别是未对齐和未签名的版本。

但大多数时候你会忘记它们是在哪里创建的，然后运行：

```
ant debug install
ant release install 
```

安装它们。但请确保它首先与 adb 一起使用：[adb devices command not working](https://stackoverflow.com/questions/5510284/adb-devices-command-not-working)

在 Ubuntu 15.10、Android 23 上测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-07T16:38:20.043

Android 现在不直接使用 ANT 构建系统。它使用基于 Groovy 的 Gradle。[您可以在此处](https://en.wikipedia.org/wiki/List_of_build_automation_software)了解有关构建系统的更多信息。

您可以使用此命令查看可以运行的可用任务列表

```
gradlew tasks 
```

要启动调试构建，请调用 assembleDebug 任务

```
gradlew assembleDebug 
```

您可以通过此命令使用 adb 工具安装您的应用程序

```
adb install path/to/your_app.apk 
```

要了解有关在命令行上构建的更多信息，请阅读[这篇](https://developer.android.com/studio/build/building-cmdline)综合文章。

您还可以阅读这篇文章“[为什么使用 Gradle 而不是 Ant 或 Maven 构建 Java 项目？](http://www.drdobbs.com/jvm/why-build-your-java-projects-with-gradle/240168608?pgno=1) ”

# github - 是否可以仅跟踪 git 分支中的文件夹？

> ID：15285332
> 
> 赞同：1
> 
> 时间：2013-03-08T01:46:44.503
> 
> 标签：github, git-branch, github-pages

我不知道这是否有意义......

我有一个主要的私人 git 存储库，我在其中进行所有编码。我设置了另一个公共 git 只发布公共结果（我的一些原始数据是敏感信息）。我在私有 git 中的一个文件夹中准备好了所有结果。

那么，是否可以仅将公共 git 跟踪的分支（github-pages）创建为我的私有 git 的结果文件夹？

或者你们都有更好的工作流程吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T03:56:52.120

对的，这是可能的

你可以这样做：

1）将私人文件夹临时移动到另一个地方

2）创建一个新的仓库（您应该这样做以从旧提交中删除任何可能在公共分支中公开私有文件的日志）并在主分支上仅包含公共文件（现在）

```
 git init
    git add . 
    git commit -m 'adding public files to repo' 
```

2) 创建并签出一个名为 public_stable 的新分支

```
 git checkout -b public_stable 
```

3) 创建一个带有“/your-private-folder-name/.”行的 .gitignore 文件 在 public_stable 分支中，从您的公共分支中排除这些文件

例如，在 linux 机器上...

```
 touch .gitignore && echo '/your-private-folder/*' >> .gitignore 
```

下一个...

```
 git add .gitignore
    git commit -m 'this branch will ignore files located on private folder' 
```

4）回到master并从master创建一个新的分支private_stable

```
 git checkout master
    git checkout -b private_stable 
```

4）现在您可以将私有文件夹移回您的项目

```
 git add /your-private-folder-name/.
    git commit -m 'added private files' 
```

5）在此之后，您将有两个主要分支需要处理：public_stable 和 private_stable

6）要处理您的私人文件，您应该从 private_stable 分支以创建与稳定工作分开的正在进行的工作。

从私人稳定...

```
 git checkout -b private_issue 
```

完成 private_issue 后，您可以将更改合并到 private_stable

您可以对 public_* 分支应用相同的工作流程

这样您就可以将公共内容与私人内容隔离开来。

Master 将拥有所有文件，但您应该避免将位于 public_* 分支中的 .gitignore 合并到 master 或 private_ 分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:48:42.180

由于它是一个分支，我建议从分支中删除除该文件夹之外的所有内容并提交。无论如何，您似乎只希望在该分支中使用它，这不应该对您的工作流程产生影响。

# asp.net - 在VB中将数据集转换为字符串

> ID：15285340
> 
> 赞同：0
> 
> 时间：2013-03-08T01:47:35.367
> 
> 标签：asp.net, vb.net

我在编译代码时出错。它说数据集不能转换为字符串..请帮助我..我已经使用 SQL 存储过程完成了这个..我必须获取保存在主表中的员工姓名来检索 ID，然后 ID 应该检索休假详细信息从休假详细信息表中。

```
 Public Shared Function GetEmpID(ByVal EmpName As String) As DataSet
    Dim db As Database = DatabaseFactory.CreateDatabase(HttpContext.Current.Session("CompanyID").ToString) ' TO Get Database Connection
    Dim dbCommand As DbCommand = db.GetStoredProcCommand("spRetrieveEmpID") ' Stored Procedure to Execute
    db.AddInParameter(dbCommand, "EmployeeName", DbType.String, EmpName) ' Parameter for Stored Procedure
    Return db.ExecuteDataSet(dbCommand) ' Execute Stored Procedure
End Function

Public Shared Function EmpLeaveDetails(ByVal EmployeeID As String) As DataSet
    Dim db As Database = DatabaseFactory.CreateDatabase(HttpContext.Current.Session("CompanyID").ToString) ' TO Get Database Connection
    Dim dbCommand As DbCommand = db.GetStoredProcCommand("spHRLeaveEntitlement") ' Stored Procedure to Execute
    db.AddInParameter(dbCommand, "EmployeeID", DbType.String, EmployeeID) ' Parameter for Stored Procedure
    Return db.ExecuteDataSet(dbCommand) ' Execute Stored Procedure
End Function 
```

这是我的 leave.aspx.vb 代码

```
 Private Sub ddlEmpName_SelectedIndexChanged(ByVal sender As Object, ByVal e As Telerik.Web.UI.RadComboBoxSelectedIndexChangedEventArgs) Handles ddlEmpName.SelectedIndexChanged

    EmployeeID = TESTING.GetEmpID(ddlEmpName.Text)

    If ds.Tables(0).Rows.Count > 0 Then
        dgLeaveDetails.DataSource = ds
        dgLeaveDetails.DataBind()
    End If

    ds1 = TESTING.EmpLeaveDetails(EmployeeID)
    dgLeaveDetails.DataSource = ds1

    ddlEmpName.SelectedIndex = -1
    dgLeaveDetails.Rebind()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:57:30.037

您正在设置`EmployeeID`，如下所示：

```
EmployeeID = TESTING.GetEmpID(ddlEmpName.Text) 
```

该`GetEmpID`方法返回一个`DataSet`对象。因此，`EmployeeID`引用 a `DataSet`，而不是等于单个 ID 值。稍后，您尝试传递`EmployeeID`给这样的`EmpLeaveDetails`方法：

```
ds1 = TESTING.EmpLeaveDetails(EmployeeID) 
```

但是，该`EmpLeaveDetails`方法将 a`String`作为参数。因此，您试图将 a 传递给`DataSet`需要 a 的方法`String`。由于`DataSet`对象无法自动转换为`String`类型，因此编译器会报错。

要修复它，您需要`GetEmpID`返回一个字符串，否则您需要`DataSet`在将其传递给`EmpLeaveDetails`方法之前从 中检索单个字符串值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:56:18.790

线

```
EmployeeID = TESTING.GetEmpID(ddlEmpName.Text) 
```

对我来说似乎是个问题。

你应该使用：

```
Dim dst As Dataset = TESTING.GetEmpID(ddlEmpName.Text)
EmployeeID = CStr(dst.Tables(0).Rows(0).Item("EmployeeID")) 
```

# jquery - jquery同位素和wordpress，过滤麻烦

> ID：15285344
> 
> 赞同：1
> 
> 时间：2013-03-08T01:48:18.330
> 
> 标签：jquery, wordpress, filtering, jquery-isotope

我一直在尝试让同位素过滤工作..我是 jquery/javascript 的新手，但想在客户网站上让同位素工作..我一直在堆栈和互联网上寻找我做错或丢失的事情..我是在 wordpress 主题中也使用它，并认为这可能是我的问题的一部分，但是在遵循每个教程和示例之后，我发现我认为这是我的一个小小的疏忽

这是我的 jsfiddle .. [http://jsfiddle.net/CNj95/1/](http://jsfiddle.net/CNj95/1/)

Heres过滤器UL

```
<ul id="filters" class="option-set clearfix" data-option-key="filter">
  <li><a href="#" data-option-value=".category-instagram">instagram</a></li>
  <li><a href="#" data-option-value=".category-tweets">tweets</a></li>
  <li><a href="#" data-option-value=".category-facebook">facebook</a></li>
  <li><a href="#" data-option-value=".category-youtube">youtube</a></li>
</ul> 
```

以下是要过滤的项目示例

```
<div id="content">
  <div class="category-tweets boxy"><div class="soc-label" ></div>
      <a href="" rel="prettyphoto"  title="" ></a>                      
       <p>CONTENT</p>
  </div>

  <div class="category-instagram boxy"><div class="soc-label" ></div>   
      <a href="" ><img width="150" height="150" src="" class="attachment-thumbnail wp-post-image" alt="" /></a>                     
       <p>CONTENT</p>
  </div>
</div> 
```

原样的jQuery

```
jQuery(document).ready(function () {
  var mycontainer = jQuery('#content');
  mycontainer.isotope({
      itemSelector: '.boxy'
  });

  // filter items when filter link is clicked
  jQuery('#options a').click(function (event) {
      var selector = jQuery(this).attr('data-option-value');
      mycontainer.isotope({
          filter: selector
      });
      return false;
  }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:50:46.287

您现在的选择器变量只返回一个字符串......而不是选择器。易于修复。只需将其包裹在括号中并在前面加上 $：

```
jQuery('#options a').click(function (event) {
  var selector = jQuery(this).attr('data-option-value');
  mycontainer.isotope({
      filter: $(selector)
  });
  return false;
  }); 
```

# knockout.js - 将元素添加到模型后进行淘汰验证

> ID：15285351
> 
> 赞同：1
> 
> 时间：2013-03-08T01:49:12.430
> 
> 标签：knockout.js

这是一个小提琴，显示了我的部分问题：

[http://jsfiddle.net/Nv2pW/](http://jsfiddle.net/Nv2pW/)

有一个带按钮的输入框；输入框应验证强制性和电子邮件地址。在我的实时站点中，它确实验证了，但直到输入框中的项目被添加到 emailCC 数组之后，这为时已晚 - 如果它不是有效的电子邮件地址，我不希望它出现在模型中。（在小提琴中，验证根本没有触发，但我不知道为什么）。如果输入框项无效，如何防止将其添加到 emailCC 数组？

部分js代码在这里：

```
 function emailViewModel() {
 var self = this;
 self.emailAddress = ko.observable("test").extend({
     required: true
 }).extend({
     email: true
 });
 self.emailCC = ko.observableArray([]);

 self.addCC = function () {
     if (this.emailAddress() !== "")
     self.emailCC.push(new EmailAddress(self.emailAddress()));
     self.emailAddress(""); //clear text box
 };
 }
 ko.applyBindings(new emailViewModel());

 function EmailAddress(name) {
 this.name = name;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:08:18.967

我进行了更改以解决您的问题，该问题运行良好。

使用

```
 isValid() method achieved your objective 
```

## [检查这个小提琴](http://jsfiddle.net/naveenkumarm/VeBSf/)

如果它解决了您的问题，请随意将其标记为答案并单击上行链接。

# visualization - 用很多点画一个多边形

> ID：15285357
> 
> 赞同：0
> 
> 时间：2013-03-08T01:50:41.760
> 
> 标签：visualization, polygon, graphic

我想要的输出是移动很多点来可视化一些单词。效果类似于这个视频[http://www.youtube.com/watch?v=Le13by2WM70](http://www.youtube.com/watch?v=Le13by2WM70)。

我认为这个问题可以分为两个子问题。首先是如何从矢量字体中提取路径。第二个是如何移动点以可视化该多边形。

有一些工具可以解决第一部分，但我不知道第二部分。有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:01:00.640

只需在规则网格上采样点，添加一点抖动以避免看起来过于计算机化，您可能会做得很好。您需要做的就是检查您是在路径的“内部”还是“外部”。在里面，放一条鱼（或圆点）；对于外面，没有鱼。

# c# - 从 MVC 运行 .EXE

> ID：15285363
> 
> 赞同：1
> 
> 时间：2013-03-08T01:51:28.140
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, exe

我的代码在本地工作，但在我部署到我的 Web 服务器时却不行。`wkhtmltopdf.exe`尝试访问文件时显示“权限被拒绝” 。我正在使用[Codaxy Wrapper](https://github.com/codaxy/wkhtmltopdf/blob/master/NuGet/Codaxy.WkHtmlToPdf/content/PdfConvert.cs)。

```
WkHtmlToPdfPath = HttpContext.Current.Server.MapPath(@"~/wkhtmltopdf/wkhtmltopdf.exe"), 
```

我可以将其更改为使用 DLL 或其他东西吗？我怎样才能使它在服务器上工作，就像它在本地工作一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:23:13.657

您需要将 .exe 文件的执行访问权限授予 IIS 将用来访问该文件的用户，很可能是应用程序池标识或 IIS 6 中的 IIS_WPG 用户。

# php - 显示mysql数据库表时出现php错误

> ID：15285364
> 
> 赞同：0
> 
> 时间：2013-03-08T01:51:31.343
> 
> 标签：php, sql

每次我尝试使用 php 连接到数据库时，我都会不断收到此错误：`Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in /homepages/12/d441172468/htdocs/Organizer/dashboard/index.php on line 258`如何解决此问题？我的代码是

```
 $email = 'redacted@me.com_classes';

            echo $email;

            $result = mysqli_query($con,"SELECT * FROM $email");

            $classcount = 1;

            while($row = mysqli_fetch_array($result))
              {

              $period = $row['period'];
              $teacher = $row['teacher'];
              $subject = $row['subject'];
              $subjecto = strtolower($subject);
              $subjecto = str_replace(' ', '', $subjecto);
              $grade = $row['grade'];

              echo "<li id='button" . $classcount . "' onclick='" . $subjecto . "(),homework" . $classcount . "()'>" . $classcount . ". " . $subject . "-" . $grade . "</li>\n";

              $classcount += 1;

              } 
```

当我回显它时，该`$email`变量工作正常。第128行是`while($row = mysqli_fetch_array($result))`部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:56:14.273

如果值`$email`真的是你的表名，你需要引用它，因为它包含不带引号的[表名](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html)`@`中不允许的字符（the ）：

```
 $result = mysqli_query($con,"SELECT * FROM `$email`"); 
```

请注意，您需要在 mysql 中使用反引号引用表名和列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:54:25.050

表名允许在`ASCII`：[http ://dev.mysql.com/doc/refman/5.1/en/identifiers.html](http://dev.mysql.com/doc/refman/5.1/en/identifiers.html)

```
 Permitted characters in unquoted identifiers:

    ASCII: [0-9,a-z,A-Z$_] (basic Latin letters, digits 0-9, dollar, underscore)

    Extended: U+0080 .. U+FFFF 

    Permitted characters in quoted identifiers include the full Unicode Basic Multilingual Plane (BMP), except U+0000:

    ASCII: U+0001 .. U+007F

    Extended: U+0080 .. U+FFFF 

    ASCII NUL (U+0000) and supplementary characters (U+10000 and higher) are not permitted in quoted or unquoted identifiers.

    Identifiers may begin with a digit but unless quoted may not consist solely of digits.

    Database, table, and column names cannot end with space characters.

    Before MySQL 5.1.6, database and table names cannot contain “/”, “\”, “.”, or characters that are not permitted in file names. 
```

很奇怪，您是否已经手动添加了带有 string 的表`@`。我认为这不能作为表名处理？

下面略过

* * *

您的查询无效，例如更改您的代码：

```
mysqli_query($con,"SELECT * FROM TABLE_NAME WHERE 'email' = $email"); 
```

更改`TABLE_NAME`为表的名称。更改`email`为表 TABLE_NAME 上的电子邮件列名称。

您是 mysql 注入的受害者，因此也不会检查实体和特殊字符！

如果您的 VALUE $email 是 TABLE_NAME，那应该是 LIMITED 个字符！

# emacs - emacs自动完成插件不显示下拉菜单

> ID：15285367
> 
> 赞同：1
> 
> 时间：2013-03-08T01:51:55.613
> 
> 标签：emacs, autocomplete

我是 Emacs 新手。我正在尝试使用 Marmalade 存储库安装自动完成插件，并且能够使用以下警告安装它。

```
In ac-quick-help:
auto-complete.el:1281:19:Warning: called-interactively-p called with 0
arguments, but requires 1

In ac-mouse-1:
auto-complete.el:1517:20:Warning: reference to free variable `it'

In end of data:
auto-complete.el:1986:1:Warning: the following functions are not known to be defined:        popup-awhen,
popup-menu-item-of-mouse-event 
```

但我无法访问下拉菜单。当我尝试执行 a`M-x autocomplete`时，我收到一条错误消息，提示未启用自动完成功能。

我正在使用 Lubuntu 12.10 操作系统。

# ruby-on-rails - 将文本文件中的数据导入 PostgreSQL。“Postgres_Copy”宝石

> ID：15285369
> 
> 赞同：0
> 
> 时间：2013-03-08T01:52:02.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, import, rails-postgresql

我正在使用 PostgreSQL 和 ruby​​ 和 rails 应用程序并安装了`Postgres_copy`gem [https://github.com/diogob/postgres-copy](https://github.com/diogob/postgres-copy)

我有酒店表，想使用`pg_copy_from`gem 函数导入文本文件。文件中的数据用“|”分隔 象征。

所以我创建了 rake 任务

```
namespace :db do
  namespace :import do
    desc "Copy hotels records to the database"
    task :hotels => :environment do
      Hotel.pg_copy_from 'db/ActivePropertyList.txt', :delimiter => '|', :map => {
        'HotelID' => 'ean_hotel_id',
        'SequenceNumber' => 'sequence_number',
        'Name' => 'name',
        'Address' => 'address'}
    end
  end
end 
```

如果我运行`rake db:import:hotels`什么都不会发生。可能是什么问题呢？

**更新**

我注意到，当我运行`psql`并尝试通过`\d`命令查看所有关系时，它显示“未找到关系”。

但是，我运行命令`rake:db:create:all`并`rake db:migrate`可以看到架构文件。此外，`\l`psql 控制台中的命令显示了我的数据库。

也许只是跑步会更容易

```
c = Hotel.connection.raw_connection
c.exec(%q{\copy hotels (hotel_id, name) FROM 'db/ActivePropertyList.txt' DELIMITER '|'}) 
```

，但我建议由于缺少关系而不会发生任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:45:03.050

由于 PostgreSQL 常见的大写问题，我的导入失败。将所有标题字段和数据库列名重命名为小写就可以了。

# django - 在 Tastypie 中序列化 django-mptt 树

> ID：15285371
> 
> 赞同：4
> 
> 时间：2013-03-08T01:52:15.427
> 
> 标签：django, tastypie, django-mptt

如何序列化`django-mptt`树`Tastypie`？

我想使用`django-mptt`'s `cache_tree_children()`。我尝试过应用不同的 Tastypie 钩子，但它会引发错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T23:39:55.793

如果没有该`cache_tree_children`方法，您可能只需将 a`ToManyField`与`full=True`指向`children`属性的对象连接起来，就可以让您的孩子序列化：

```
class MenuResource(ModelResource):

    children = fields.ToManyField('self', 'children', null=True, full=True)
    parent = fields.ToOneField('self', 'parent', null=True)

    class Meta:
        queryset = Menu.objects.all() 
```

要实现该`cache_tree_children`功能，您可以编写自己的`ToManyField`子类来覆盖标准`dehydrate`功能。请注意，我只是非常肤浅地测试了这个解决方案：

```
def dehydrate(self, bundle):
    if not bundle.obj or not bundle.obj.pk:
    if not self.null:
        raise ApiFieldError("The model '%r' does not have a primary key and can not be used in a ToMany context." % bundle.obj)

        return []

    the_m2ms = None
    previous_obj = bundle.obj
    attr = self.attribute

    if isinstance(self.attribute, basestring):
        attrs = self.attribute.split('__')
        the_m2ms = bundle.obj

        for attr in attrs:
            previous_obj = the_m2ms
            try:
                the_m2ms = getattr(the_m2ms, attr, None)
            except ObjectDoesNotExist:
                the_m2ms = None

            if not the_m2ms:
                break

    elif callable(self.attribute):
        the_m2ms = self.attribute(bundle)

    if not the_m2ms:
        if not self.null:
            raise ApiFieldError("The model '%r' has an empty attribute '%s' and doesn't allow a null value." % (previous_obj, attr))

        return []

    self.m2m_resources = []
    m2m_dehydrated = []

    # There goes your ``cache_tree_children``
    for m2m in cache_tree_children(the_m2ms.all()):
        m2m_resource = self.get_related_resource(m2m)
        m2m_bundle = Bundle(obj=m2m, request=bundle.request)
        self.m2m_resources.append(m2m_resource)
        m2m_dehydrated.append(self.dehydrate_related(m2m_bundle, m2m_resource))

    return m2m_dehydrated 
```

这种方法的主要优点之一是您不必再关心细节/列表视图约束/差异。您甚至可以进一步参数化资源的这一方面，直到您获得某种符合您需要的默认行为。即基于字段。我认为这很酷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:52:15.427

这就是我解决它的方法：

```
class MenuResource(ModelResource):
    parent = fields.ForeignKey('self', 'parent', null=True)

    class Meta:
        serializer = PrettyJSONSerializer()
        queryset = Menu.objects.all().select_related('parent')
        include_resource_uri = False
        fields = ['name']

    def get_child_data(self, obj):
        data =  {
            'id': obj.id,
            'name': obj.name,
        }
        if not obj.is_leaf_node():
            data['children'] = [self.get_child_data(child) \
                                for child in obj.get_children()]
        return data

    def get_list(self, request, **kwargs):

        base_bundle = self.build_bundle(request=request)
        objects = self.obj_get_list(bundle=base_bundle, 
                                    **self.remove_api_resource_names(kwargs))
        sorted_objects = self.apply_sorting(objects, options=request.GET)

        paginator = self._meta.paginator_class(
            request.GET, sorted_objects, 
            resource_uri=self.get_resource_uri(), limit=self._meta.limit, 
            max_limit=self._meta.max_limit, 
            collection_name=self._meta.collection_name
        )
        to_be_serialized = paginator.page()

        from mptt.templatetags.mptt_tags import cache_tree_children
        objects = cache_tree_children(objects)

        bundles = []

        for obj in objects:
            data = self.get_child_data(obj)
            bundle = self.build_bundle(data=data, obj=obj, request=request)
            bundles.append(self.full_dehydrate(bundle))

        to_be_serialized[self._meta.collection_name] = bundles
        to_be_serialized = self.alter_list_data_to_serialize(request, 
                                                            to_be_serialized)
        return self.create_response(request, to_be_serialized) 
```

如果你不使用分页，你可以把那部分去掉。这就是我所做的。

# javascript - Javascript规模检查功能性能

> ID：15285373
> 
> 赞同：1
> 
> 时间：2013-03-08T01:52:22.057
> 
> 标签：javascript, performance, math, loops, exponent

好吧，我有一个轻微的性能瓶颈。

基本上我有一个由屏幕 div（“屏幕”）和图表 div（“图表”）组成的图表，当这个图表完成渲染时，它会检查它需要在图表上设置什么比例才能获得图表适合屏幕内部。问题是我想出的任何比例都必须是 1.2 的指数。换句话说，您需要能够通过将 1.2 乘以某个数字的幂来获得新刻度的数字。

这个函数是计算我需要的比例。

```
fitScale = function (width, height)
{
  var scale = 1,
      gWidth = graph.element.offsetWidth,
      gHeight = graph.element.offsetHeight;
  while (gWidth > width * scale && gHeight > height * scale)
    scale *= 1.2;
  while (gWidth < width * scale || gHeight < height * scale)
    scale /= 1.2;
  return 900 / scale;
} 
```

问题是这很糟糕......

它所做的是获取图表大小 ( `width, height`) 和屏幕大小 ( `gWidth, gHeight`) 并循环通过新的比例，直到达到正确的数字。

首先，它使比例变大，直到图表的至少一维乘以比例大于屏幕的一维。

然后它会循环返回以确保图表 * 比例的两个维度至少比屏幕小一点。

我想只用一次数学计算来执行这个动作。也许通过计算贴合度然后向下舍入，但我不知道如何向下舍入到 1.2 的指数

-使固定-

这是生成的工作版本...

```
fitScale = function (width, height)
{
  var wScale = graph.element.offsetWidth / width,
      hScale = graph.element.offsetHeight / height,
      snugg = wScale < hScale ? wScale : hScale,
      exp = Math.log(snugg) / Math.log(1 / 1.2),
      scale = Math.pow(1 / 1.2, Math.ceil(exp));
  return 900 / scale;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:22:26.077

我的数学技能生疏了，所以如果我在这里偏离了真理之路，那就放轻松吧。

基本上你想知道什么幂`y`等于`1.2`某个给定的数字`x`。虽然该`log`函数似乎没有帮助，因为它告诉您`e`将等于您的 number`x`的幂，但实际上您可以使用一些疯狂的对数技能来到达您想去的地方：

```
var y = Math.log(x) / Math.log(1.2); 
```

赔率非常好，`y`不会是整数，我认为这是你想要的，所以如果你继续前进`Math.floor(y)`，你应该已经准备好了。

# entity-framework - EF - 如何使用流畅的 EntityTypeConfiguration API 定义正则表达式属性？

> ID：15285374
> 
> 赞同：2
> 
> 时间：2013-03-08T01:52:30.293
> 
> 标签：entity-framework, ef-code-first, code-first

使用 DataAnnotations 设置属性很容易：

```
[RegularExpression("^[A-Za-z0-9](([_\\.\\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\\.\\-]?[a-zA-Z0-9]+)*)\\.([A-Za-z]{2,})$")]
        public string Email { get; set; } 
```

但是如何使用流利的 API 来做到这一点？

```
public class UserConfiguration : EntityTypeConfiguration<User>
{
    public UserConfiguration()
    {
        //email
        Property(p => p.Email).IsRequired();
        //setting up regex??
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:33:51.840

我很确定这`RegularExpressionAttribute`不适用于 EF，但它仅用于在您的视图中生成验证。fluent API 用于配置数据库属性。所以，`IsRequired()`将列设置为`NOT NULL`等。我可能错了，但我相信 SQL 中不支持正则表达式约束，您会发现这就是为什么 EF fluent 配置中没有任何内容的原因为了它。只是为了你的意见...

# excel - Excel 公式到 SUMIF 日期落在特定月份

> ID：15285381
> 
> 赞同：43
> 
> 时间：2013-03-08T01:54:04.487
> 
> 标签：excel

我有以下格式的excel数据。

```
Date        Amount

03-Jan-13   430.00 
25-Jan-13   96.00 
10-Jan-13   440.00 
28-Feb-13   72.10 
28-Feb-13   72.30 
```

仅当月份位于**Jan**月份时，我才需要对金额字段求和。

我试过的是，

```
=SUMIF(A2:A6,"MONTH(A2:A6)=1",B2:B6) 
```

但它回来了，

```
0 
```

我需要的是，

```
Following values to be summed, 430.00 + 96.00 + 440.00 = 966.00 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-08T01:59:57.523

试试这个：

```
 =SUM(IF(MONTH($A$2:$A$6)=1,$B$2:$B$6,0)) 
```

这是一个数组公式，因此您需要使用`Control`- `Shift`-`Enter`组合键输入它。

这是公式的工作原理。

1.  MONTH($A$2:$A$6) 为 A2:A6 中的日期创建月份数值数组，即
    `{1, 1, 1, 2, 2}`.
2.  然后比较`{1, 1, 1, 2, 2}= 1`生成数组`{TRUE, TRUE, TRUE, FALSE, FALSE}`，其中包含 IF 语句的条件。
3.  然后，IF 语句返回一个值数组，`{430, 96, 400..`其中包含月份值等于 1 和`..0,0}`月份值不等于 1 的总和范围的值。
4.  然后对该数组`{430, 96, 400, 0, 0}`求和以获得您正在寻找的答案。

这本质上等同于 SUMIF 和 SUMIFs 函数所做的事情。但是，这些函数都不支持您尝试包含在条件中的那种计算。

也可以完全删除 IF。由于 TRUE 和 FALSE 也可以被视为 1 和 0，所以这个公式`=SUM((MONTH($A$2:$A$6)=1)*$B$2:$B$6)`————也适用。

*注意：这在 Google 电子表格中不起作用*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-09-19T18:34:35.630

```
=Sumifs(B:B,A:A,">=1/1/2013",A:A,"<=1/31/2013") 
```

这个公式的美妙之处在于您可以向 A 列和 B 列添加更多数据，它只会重新计算。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-08-09T17:42:35.110

```
=SUMPRODUCT( (MONTH($A$2:$A$6)=1) * ($B$2:$B$6) ) 
```

解释：

*   `(MONTH($A$2:$A$6)=1)`创建一个 1 和 0 的数组，当月份为 1 月时为 1，因此在您的示例中，返回的数组为`[1, 1, 1, 0, 0]`

*   `SUMPRODUCT`首先将在上述步骤中创建的数组的每个值与数组的值相乘`($B$2:$B$6)`，然后将它们相加。因此，在您的示例中，它会这样做：`(1 * 430) + (1 * 96) + (1 * 440) + (0 * 72.10) + (0 * 72.30)`

*这也适用于 OpenOffice 和 Google 电子表格*

# java - 数据无法解析为类型

> ID：15285383
> 
> 赞同：0
> 
> 时间：2013-03-08T01:54:16.763
> 
> 标签：java, variables, parameters, compiler-errors, boolean

我需要为我的作业做这个，但是，当我编译它说我在打印数据中的变量无法解析为类型时，我做错了什么？我还需要为此创建一个测试器类。

```
public class PayCalculator

{
  private double hourlyRate;
  private double hoursWorked;

  /**
   * Two parameter constructor
   * Add hourlyRate and hoursWorked
   * @param the hourly rate
   * @param the hours worked
   */
  public PayCalculator(double aHourlyRate, double aHoursWorked)
  {
    hourlyRate = aHourlyRate;
    hoursWorked = aHoursWorked;
  }

  /**
   * sets the hourly rate
   * @return hourlyRate
   */ 
  public void setHourlyRate(double aHourlyRate)
  {
    hourlyRate = aHourlyRate;
  }

  /**
   * gets the hourly rate
   * @param hourlyRate
   */
  public double getHourlyRate()
  {
    return hourlyRate;
  }

  /**
   * sets the hours worked
   * @return hoursWorked
   */ 
  public void setHoursWorked(double aHoursWorked)
  {
    hoursWorked = aHoursWorked;
  }

  /**
   * gets the hours worked
   * @param hours worked
   */
  public double getHoursWorked()
  {
    return hoursWorked;
  }

  public boolean workedOvertime()
  {
    if (hoursWorked > 40)
    {
      return true;
    }
    else 
    {
      return false;
    }
  }

  public double numHoursOvertime()
  {
    if (hoursWorked > 40)
    {
      return hoursWorked - 40;
    }
    else 
    {
      return 0;
    }
  }

  public double calculateGrossPay()
  {
    if (hourlyRate  <= 10.25)
    {
      if (hourlyRate <= 40)
        return hourlyRate * hoursWorked;
    }
    else 
    {  
      double grossPay = ((40 * hourlyRate) + ((hourlyRate * 2) * hoursWorked - 40));
      return grossPay;
    }

    if (hoursWorked <= 60)
    {
      return hourlyRate * hoursWorked;
    }
    else
    {
      return 60 * hourlyRate;
    }
  }

  public double determineTaxRate(double grossPay)
  {
    if (grossPay >= 800)
    {
      double tax = 0;
      tax = grossPay * 0.37;
      return tax;
    }
    else if ( grossPay >= 400)
    {
      double tax = 0;
      tax = grossPay * 0.22;
      return tax;
    }
    else
    {
      double tax = 0;
      tax = grossPay * 0.12;
      return tax;
    }
  }

  public double calculateNetPay(double grossPay, double tax)
  {
    double calculateNetPay = grossPay - tax;
    return calculateNetPay;
  }

  public void printData()
  {
    System.out.println("Hours Worked: " + hoursWorked);
    System.out.println("Hourly rate: " + hourlyRate);
    System.out.println("Number of hours of overtime worked: " + numHoursOvertime);
    System.out.println("Worked overtime? " + workedOvertime);
    System.out.println("Gross pay: " + calculateGrossPay);
    System.out.println("Tax Rate: " + determineTaxRate);
    System.out.println("Net Pay: " + calculateNetPay);
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:56:55.187

你不能`methods`只用他们的名字称呼正义。像下面这样称呼他们。

```
numHoursOvertime()
workedOvertime()
determineTaxRate(10) // example
calculateNetPay(10, 10) // example 
```

[您可以在此处](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)了解有关方法的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:56:44.050

这些方法不能在`System.out.println();`调用中使用。相反，在方法中，使用方法创建新`int`的并分配它们，然后将它们打印出来。例如：

```
int a = calculateTax();
System.out.println("tax: " + a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:56:59.387

numHoursOvertime workingOvertime 是方法。你不能就这样称呼他们！

```
numHoursOvertime()
workedOvertime() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T01:59:01.593

您令人困惑的方法名称和变量名称。例如，使用

```
numHoursOvertime() 
```

并不是

```
numHoursOvertime 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T01:59:20.923

用括号调用方法`hoursWorked()`。我在代码中看到的另一个可能的错误是未定义`public double determineTaxRate(double grossPay)`变量的方法`tax`

# mysql - 分组获取单品+PK

> ID：15285384
> 
> 赞同：0
> 
> 时间：2013-03-08T01:54:22.770
> 
> 标签：mysql

可以说我有价值

```
PK |  Section | UserID | Rating |  Body
 1          20       30        8   Test
 2          20       31        5  Test2
 3          21       31        6  Test3 
```

像这样的东西来自子查询。我想要的是我想获得最高评价的每个部分。所以 1 应该赢（比 2 更高的评级）和 3 应该赢（它是该部分的唯一一个）。我怎么写这个？我正在考虑做限制 1，但这不会奏效，因为我有多个部分。它也是一个子查询，因此尝试再次加入会很烦人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T02:02:34.180

您只希望每个部分有一个结果（因此您希望按该字段分组）并且您希望结果包含最大评级。由于 GROUP BY，您必须在此处使用 HAVING 子句：

```
SELECT _____ FROM ______ GROUP BY Section HAVING Rating = MAX(Rating) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:56:23.537

在 MySQL 中，您可以这样排序：

`ORDER BY Rating ASC` 或者 `ORDER BY Rating DESC`

Asc 是上升的，而 Desc 是下降的。您也可以`LIMIT 1`在此之后使用以获得最高评分。

现在，您想为每个部分获取它。为此，您可以使用`WHERE`仅选择该部分。如果您想获得每个部分的最高评分，您可能（如果我没记错的话）必须遍历每个部分编号并查询最高的项目。

# function - OCaml 递归函数应用函数 n 次

> ID：15285386
> 
> 赞同：4
> 
> 时间：2013-03-08T01:54:39.497
> 
> 标签：function, functional-programming, ocaml

我想在 OCaml 中创建一个 int -> ('a -> 'a) -> 'a -> 'a 类型的函数，它需要一个 int n （非否定）和一个函数 f 'a -> 'a 和'a 类型的参数 a。f 应该被调用一次。

我尝试了 3 种不同的方法，但只能得到 int -> ('a -> 'b) -> 'a -> 'b，这是我尝试过的一些方法。

```
let rec f n g a = 
g a;
f (n-1) g a;; 
```

这使

```
val f : int -> ('a -> 'b) -> 'a -> 'c = <fun> 
```

我试过了

```
 let rec f n g a =
  if n > 0 then f (n-1) g a
  else g a
  ;; 
```

这给了我

```
val f : int -> ('a -> 'b) -> 'a -> 'b = <fun> 
```

第二个更接近，但我不知道如何获得 int -> ('a -> 'a) -> 'a -> 'a

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T02:04:02.537

我不太确定您要做什么。我猜它是下面的函数：

```
let rec foldi i f acc =
    if i <= 0 then acc else foldi (pred i) f (f acc) 
```

它递归地将`i`函数应用`f`到一个值`acc`，然后应用到它的结果。`foldi`虽然可能不是最好的名字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T02:01:30.607

一旦你正确编写了函数，类型就会变直。您第二次尝试的问题是它给出了错误的答案`f5 0 ...`。在我看来，在这种情况下您根本不想应用该功能。

也许下面的例子会说明我的意思：

```
# let add1 x = x + 1;;
val add1 : int -> int = <fun>
# f5 2 add1 3;;
- : int = 5
# f5 1 add1 3;;
- : int = 4
# f5 0 add1 3;;
- : int = 3
# 
```

这些是你*应该*得到的答案，在我看来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T16:21:48.530

> ```
> let rec f n g a =
> if n > 0 then f (n-1) g a
> else g a
> ;; 
> ```

差不多就这些了，但是你要多了解你的问题，也许只是f^n的定义。您可以通过以下方式定义 f^n：对于所有 x，f^n(x) = f^(n-1)(f(x)) 和 f^0(x) = x

在您的代码中，您有 f (n-1) ga，即 f^(n-1)(x) 与我的符号。你永远不会申请 f，只是在最后。

解决方案是：f (n-1) g (ga) !!!

你必须每次都申请 g 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T07:56:40.417

几分钟前我碰巧写了一个工作版本：

```
let rec applyn n func arg =
if n <= 0 then
    arg
else
    applyn (n-1) func (func arg) 
```

请注意，每次进行递归调用时都会发生函数应用程序。在您的代码中， g 仅被调用一次；OCaml 不能推断它是 'a -> 'a，所以给出 'a -> 'b。

# testing - TFS 测试控制器只能用于一个项目集合吗？

> ID：15285392
> 
> 赞同：0
> 
> 时间：2013-03-08T01:55:29.727
> 
> 标签：testing, tfs

TFS 测试控制器是否只绑定到一个项目集合？如果我有更多的项目集合，我该怎么办，安装更多的测试控制器服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:23:23.473

正确的。您只能将一个测试控制器关联到一个团队项目集合。如果您希望每个项目集合都有一个测试控制器，您需要为每个集合至少有一台机器（安装了测试控制器服务）。

请注意，这并不意味着它是一对一的关系。每个团队项目集合可以有多个测试控制器。

# android - Android：在这种情况下要实现什么类型的工作线程？

> ID：15285395
> 
> 赞同：1
> 
> 时间：2013-03-08T01:55:59.917
> 
> 标签：android, multithreading

我有一个活动需要创建一个长时间运行的工作线程。该工作线程需要在运行时响应用户输入。例如，我需要创建一个名为“ConstructionWorker”的线程，但我想根据 UI 中的按钮向它发送诸如“EatLunch”或“WorkFaster”之类的命令。然后，工作线程将使用进度更新父线程。

我已经使用 AsyncTask 实现了其中的一部分，但我看不到创建“WorkSlower”或“WorkFaster”函数的方法，然后我可以从 UI 线程调用这些函数。

我应该为此使用哪种类型的线程技术？我猜 AsyncTask 不是解决它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:31:04.827

你可以使用 HandlerThread 而不是 AsyncTask，

```
public class TestActivity extends Activity implements OnClickListener {
private HandlerThread mBackgroundThread;
private Handler mBackgroundHandler;

private static final int BACKGROUND_TASK_WORK_SLOWER = 0;
private static final int BACKGROUND_TASK_WORK_FASTER = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_content);

    Button btnWorkSlower = (Button) findViewById(R.id.work_slower);
    btnWorkSlower.setOnClickListener(this);
    Button btnFaster = (Button) findViewById(R.id.work_faster);
    btnFaster.setOnClickListener(this);

    mBackgroundThread = new HandlerThread("ConstructionWorker",
            Process.THREAD_PRIORITY_BACKGROUND);
    mBackgroundThread.start();
    mBackgroundHandler = new Handler(mBackgroundThread.getLooper()) {
        @Override
        public void handleMessage(Message msg) {
            performBackgroundTask(msg.what, msg.obj);
        }
    };
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.work_slower:
        scheduleBackgroundTask(BACKGROUND_TASK_WORK_SLOWER);
        break;
    case R.id.work_faster:
        scheduleBackgroundTask(BACKGROUND_TASK_WORK_FASTER);
        break;
    default:
        break;
    }
}

protected void scheduleBackgroundTask(int task) {
    mBackgroundHandler.sendEmptyMessage(task);
}

protected void performBackgroundTask(int task, Object arg) {
    switch (task) {
    case BACKGROUND_TASK_WORK_SLOWER: {
        // work slower here
        break;
    }
    case BACKGROUND_TASK_WORK_FASTER: {
        // work faster here
        break;
    }
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:09:52.290

为后台线程使用异步任务。

然后创建一个消息队列。由于您将进行跨线程同步，因此请确保在推送和弹出消息时围绕共享数据结构（例如队列本身）使用 synchronize()。

让您的 UI 线程将消息发布到队列中，并让您的 asynctask 循环，轮询队列中的消息。

# java - Java 俄罗斯方块游戏：无法可视化如何移动对象 4 个不同的 Tile 对象

> ID：15285404
> 
> 赞同：2
> 
> 时间：2013-03-08T01:56:25.200
> 
> 标签：java, swing

我正在将俄罗斯方块作为 Java 中的一个有趣的副项目。

我正试图移动一个完整的俄罗斯方块片，这是一个由 4 个 Tile 对象组成的对象。

当我将棋子向下移动时，所有未被其他瓷砖之一阻挡的块
都会毫无问题地向下移动。由于以下两项检查，棋子的任何部分被其中一个瓷砖阻挡（例如，那是带有蓝色 x 的瓷砖）都不会移动：

![在此处输入图像描述](../Images/2ba78722ae21368bd844adeae40a355f.png)

```
public boolean isValidCoordinate(int x, int y) {
    return x >= 0 && y >= 0 && x < width && y < height-1; 
}

public boolean isOpen(int x, int y) {
        return isValidCoordinate(x, y) && getTileAt(x, y) == null;
} 
```

从 Board 类中，我这样移动 Piece 对象：

```
if(keyCode == KeyEvent.VK_DOWN) {

newPiece.movePieceDown(); 
```

然后在 Piece 类中：

```
 public void movePieceDown() {
    tile1.setLocation(tile1.getX(), tile1.getY()+1);
    tile2.setLocation(tile2.getX(), tile2.getY()+1);
    tile3.setLocation(tile3.getX(), tile3.getY()+1);
    tile4.setLocation(tile4.getX(), tile4.getY()+1);        
} 
```

有没有办法让俄罗斯方块的所有瓷砖都一起移动？

谢谢！

* * *

编辑：

**EXE文件：**

[https://www.dropbox.com/s/mg9dtf2sr0sazwq/my_tetris_test2.jar](https://www.dropbox.com/s/mg9dtf2sr0sazwq/my_tetris_test2.jar)

**来源：**

[https://www.dropbox.com/s/9kt3sl6qqo54amk/Tetris%20Two.rar](https://www.dropbox.com/s/9kt3sl6qqo54amk/Tetris%20Two.rar)

* * *

**代码编辑：**

反向 Z 形测试：

![在此处输入图像描述](../Images/279269223fc61f86c3f2152dbf5c0ea0.png)

起始坐标：`Piece "RevZ" Coordinates: (1, 1) (2, 1) (0, 2) (1, 2)`

按下键给我：

![在此处输入图像描述](../Images/21f8b2f9eccae246e49da8b3bb12a18e.png)

**Board.java 类：**将关键事件更改为：

```
public void keyPressed(KeyEvent e) {
    int keyCode = e.getKeyCode();
        newPiece.movePieceCheck(keyCode);
        if (newPiece.movePieceValid()) {
            newPiece.move();
        }
        repaint();  
} 
```

**Piece.java 类：**我现在在移动之前检查...

```
public void calcNewPosition(int newX, int newY, int currTile) {     
    newPositionX[currTile] = newX;
    newPositionY[currTile] = newY;
    System.out.println("New Position: " + newPositionX[currTile] + ", " + newPositionY[currTile]);  
}

public void clearCurrPosition(int currX, int currY, int currTile) { 
        currPositionX[currTile] = currX;
        currPositionY[currTile] = currY;    
        System.out.println("Current Position: " + currPositionX[currTile] + ", " + currPositionY[currTile]);
        board.setTileAt(null, currPositionX[currTile], currPositionY[currTile]);
        if (board.getTileAt(currPositionX[currTile], currPositionY[currTile]) == null) {
            System.out.println("curr block set to null...");
    }       
}       

public void movePieceCheck(int keycode) {
    if (keycode == KeyEvent.VK_DOWN) {
        for (int i = 0; i < tile.length; i++) {
            calcNewPosition(tile[i].getX(), tile[i].getY()+1, i);
            clearCurrPosition(tile[i].getX(), tile[i].getY(), i);
        }       
    }
    if (keycode == KeyEvent.VK_RIGHT) {
        for (int i = 0; i < tile.length; i++) {
            calcNewPosition(tile[i].getX()+1, tile[i].getY(), i);
            clearCurrPosition(tile[i].getX(), tile[i].getY(), i);
        }       
    }
    if (keycode == KeyEvent.VK_LEFT) {
        for (int i = 0; i < tile.length; i++) {
            calcNewPosition(tile[i].getX()-1, tile[i].getY(), i);
            clearCurrPosition(tile[i].getX(), tile[i].getY(), i);
        }       
    }
}

public boolean movePieceValid() {   
    boolean valid = false;
    for (int i = 0; i < tile.length; i++) {
        if(tile[i].checkNewLocation(newPositionX[i], newPositionY[i])) {
            valid = true;
        }
    }       
    return valid;
}       

public void move()   {
    for (int i = 0; i < tile.length; i++) {
        tile[i].setLocation(newPositionX[i], newPositionY[i]);              
    }       
} 
```

**打印输出：**

```
Piece "RevZ" Coordinates: (1, 1) (2, 1) (0, 2) (1, 2) 

New Position: 1, 2
Current Position: 1, 1
curr block set to null...
New Position: 2, 2
Current Position: 2, 1
curr block set to null...
New Position: 0, 3
Current Position: 0, 2
curr block set to null...
New Position: 1, 3
Current Position: 1, 2
curr block set to null... 
```

* * *

我按照你说的先检查所有内容，然后设置位置。

现在的问题是，除了在检查发生时无法移动的块之外，它都在移动，因为原始块在那里。但这很奇怪，因为我在移动碎片之前将那个旧位置设置为空，所以它应该是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T02:08:16.280

好吧，这并不奇怪，因为您如您所说检查位置是否`valid`是，据我了解，没有其他部分存在。

你的问题是这样的：

```
tile3.setLocation(tile3.getX(), tile3.getY()+1);
tile4.setLocation(tile4.getX(), tile4.getY()+1); 
```

我敢打赌，卡住的是第 3 部分。所以要解决这个问题，只需改变这两个的顺序。但是现在问题来了，当你旋转这块时会发生什么，然后它们应该按什么顺序移动？

我认为最好先计算每个正方形的新位置，然后将它们从当前位置中删除。然后将它们全部吸引到新位置：

```
calculateNewPositions();
clearCurrentPositions();
drawSquares(); 
```

这应该可以在没有太多麻烦的情况下变得非常通用，因此它可以处理不同的情况（即当您旋转对象时）而不会有太多麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T02:20:02.823

我认为您的问题是每个 Tile 决定其是否被阻塞和移动的逻辑之一是错误的。建议：

*   Tile 类不应该决定它是否应该移动。
*   相反，它应该有一个方法来检查它是否没有被阻塞，就是这样。
*   Piece 类应遍历其 Tile 集合，并对其组成的 Tile 对象调用此方法。
*   如果一个 Tile 被阻挡，Piece 应该确保它没有被它自己的 Tiles 阻挡。
*   如果棋子被非棋子棋子阻挡，棋子应该取消移动。
*   如果所有的瓷砖都没有被阻挡，或者任何瓷砖被自己的一块瓷砖阻挡，那么一块应该遍历瓷砖`ArrayList<Tile>`，告诉每个瓷砖移动。

为了他人的利益，这是您在单个文件中的完整程序：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Toolkit;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class TetrisSscce extends JPanel {
   static TetrisSscce runMe;
   BoardSscce board;

   public TetrisSscce() { // creates a new Panel window and sets properties
      JFrame f = new JFrame("Tetris");
      // width (height), length, tilesize
      board = new BoardSscce(4, 6, 30);
      f.add(board);
      f.setSize(board.getWidth(), board.getHeight());
      f.setVisible(true);
      f.setResizable(false);
      f.setVisible(true);
      f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      Dimension screensize = Toolkit.getDefaultToolkit().getScreenSize();
      f.setLocation((screensize.width - f.getWidth()) / 2,
            (screensize.height - f.getHeight()) / 2 - 100);
   }

   public static void main(String[] args) {
      runMe = new TetrisSscce();
   }

}

class BoardSscce extends JPanel implements KeyListener {
   private TileSscce grid[][];
   private TileSscce activetile;
   private int width, height, tilesize;
   private String piece;
   private PieceSscce newPiece;

   public BoardSscce(int w, int h, int ts) { // add elements to the Tetris panel
      width = w;
      height = h;
      tilesize = ts;
      grid = new TileSscce[height][width];

      // activetile = new TileSscce(this,0, 0); //add new tile to "this" board

      newPiece = new PieceSscce(this, randomPiece());

      addKeyListener(this);
      setFocusable(true);

   }

   public String randomPiece() {
      String[] Pieces = { "L", "O", "Z", "RevZ", "Bar", "T", "RevL" };
      String randomShape;

      int rand = (int) (Math.random() * Pieces.length);
      randomShape = Pieces[rand];

      return randomShape;
   }

   // dimensions of board = width * tilesize
   public int getWidth() {
      // 4 * 30 = 120 width
      return width * tilesize;
   }

   public int getHeight() {
      // 6 * 30 = 180 height
      return height * tilesize;
   }

   public void paintComponent(Graphics g) {
      g.setColor(Color.black);
      g.fillRect(0, 0, getWidth(), getHeight());
      for (int row = 0; row < grid.length; row++) {
         for (int col = 0; col < grid[row].length; col++) {
            if (grid[row][col] != null) {
               // if there is a non-null space, that is a tetris piece.. fill it
               // red
               if (grid[row][col].getColor() != null) {
                  g.setColor(grid[row][col].getColor());
                  g.fillRect(col * tilesize, row * tilesize, tilesize, tilesize);
               }
            }
         }
      }
   }

   public void keyPressed(KeyEvent e) {
      int keyCode = e.getKeyCode();
      if (keyCode == KeyEvent.VK_DOWN) {
         // checkBottomFull(0,4);
         // collisionCheck(activetile.getX(),activetile.getY());
         // checkEndGame(activetile.getX(), activetile.getY());

         // activetile.setLocation(activetile.getX(), activetile.getY()+1);

         // need to move Object newPiece down as a unit of 4 tiles
         newPiece.movePieceDown();

         // System.out.println("coordinates: " + activetile.getX() + ", " +
         // activetile.getY());

         repaint();
      }
      if (keyCode == KeyEvent.VK_RIGHT) {
         // activetile.setLocation(activetile.getX()+1, activetile.getY());
         // System.out.println("coordinates: " + activetile.getX() + ", " +
         // activetile.getY());
         newPiece.movePieceRight();
         repaint();
      }
      if (keyCode == KeyEvent.VK_LEFT) {
         // activetile.setLocation(activetile.getX()-1, activetile.getY());
         // System.out.println("coordinates: " + activetile.getX() + ", " +
         // activetile.getY());
         newPiece.movePieceLeft();
         repaint();
      }

   }

   public void keyReleased(KeyEvent e) {
   }

   public void keyTyped(KeyEvent e) {
   }

   // check if (x, y) is a safe coordinate, ie, within the grid array bounds
   public boolean isValidCoordinate(int x, int y) {
      return x >= 0 && y >= 0 && x < width && y < height - 1;
   }

   // returns the tile at (x, y) or null if empty
   public TileSscce getTileAt(int x, int y) {
      if (isValidCoordinate(x, y))
         return grid[y][x];
      return null;
   }

   // sets the tile at (x, y) to tile
   public void setTileAt(TileSscce tile, int x, int y) {
      if (isValidCoordinate(x, y))
         grid[y][x] = tile;
   }

   public boolean isOpen(int x, int y) {
      return isValidCoordinate(x, y) && getTileAt(x, y) == null;
   }

   public void collisionCheck(int x, int y) {
      /*
       * if (activetile.getY() == this.height-2 || getTileAt(x, y+1) != null) {
       * //activetile = new TileSscce(this, 0, 0); newPiece = new
       * PieceSscce(this, randomPiece()); }
       */

   }

   public void checkBottomFull(int x, int y) {
      while (getTileAt(x, y) != null) {
         say("(" + x + ", " + y + ")");
         if (x == 3) {
            say("row is full");
            // replace full row with tiles from above
            for (int i = 0; i < 4; i++) {
               for (int j = 5; j > 0; j--) {
                  grid[j][i] = getTileAt(i, j - 1);
               }
            }
            break;
         }
         x++;
      }
   }

   public void checkEndGame(int x, int y) {
      if (y == 0 && !isOpen(x, y + 1)) {
         say("Game over");
         for (int i = 0; i < 4; i++) {
            for (int j = 5; j > 0; j--) {
               grid[j][i] = null;
            }
         }
      }
   }

   public void say(String word) {
      System.out.println(word);
   }

   public void sayint(int number) {
      System.out.println(number);
   }
}

class PieceSscce {
   public int[] pieceCoordinates;
   public String shape;
   public BoardSscce board;

   public TileSscce tile[];

   public TileSscce tile1;
   public TileSscce tile2;
   public TileSscce tile3;
   public TileSscce tile4;

   // don't need to pass in board because I'm already utilizing the Tiles class,
   // which knows about the board
   public PieceSscce(BoardSscce b, String randomPiece) {
      shape = randomPiece;
      board = b;
      // set what the shape coordinates should be based on what "shape" is

      pieceCoordinates = new int[8];
      setInitialShapeCoordinates(shape);

      tile = new TileSscce[4];

      tile1 = new TileSscce(board, pieceCoordinates[0], pieceCoordinates[1]);
      tile2 = new TileSscce(board, pieceCoordinates[2], pieceCoordinates[3]);
      tile3 = new TileSscce(board, pieceCoordinates[4], pieceCoordinates[5]);
      tile4 = new TileSscce(board, pieceCoordinates[6], pieceCoordinates[7]);

   }

   public void movePieceDown() {
      for (int i = 0; i < 4; i++) {

      }

      tile1.setLocation(tile1.getX(), tile1.getY() + 1);
      tile2.setLocation(tile2.getX(), tile2.getY() + 1);
      tile3.setLocation(tile3.getX(), tile3.getY() + 1);
      tile4.setLocation(tile4.getX(), tile4.getY() + 1);
   }

   public void movePieceRight() {

      tile1.setLocation(tile1.getX() + 1, tile1.getY());
      tile2.setLocation(tile2.getX() + 1, tile2.getY());
      tile3.setLocation(tile3.getX() + 1, tile3.getY());
      tile4.setLocation(tile4.getX() + 1, tile4.getY());
   }

   public void movePieceLeft() {

      tile1.setLocation(tile1.getX() - 1, tile1.getY());
      tile2.setLocation(tile2.getX() - 1, tile2.getY());
      tile3.setLocation(tile3.getX() - 1, tile3.getY());
      tile4.setLocation(tile4.getX() - 1, tile4.getY());
   }

   public void setInitialShapeCoordinates(String shape) {
      System.out.println(shape);
      if (shape == "L") {
         // piece 1
         pieceCoordinates[0] = 0;
         pieceCoordinates[1] = 1;

         // piece2
         pieceCoordinates[2] = 1;
         pieceCoordinates[3] = 1;

         // piece3
         pieceCoordinates[4] = 2;
         pieceCoordinates[5] = 1;

         // piece4
         pieceCoordinates[6] = 2;
         pieceCoordinates[7] = 2;

      } else if (shape == "O") {
         // piece 1
         pieceCoordinates[0] = 0;
         pieceCoordinates[1] = 1;

         // piece2
         pieceCoordinates[2] = 1;
         pieceCoordinates[3] = 1;

         // piece3
         pieceCoordinates[4] = 0;
         pieceCoordinates[5] = 2;

         // piece4
         pieceCoordinates[6] = 1;
         pieceCoordinates[7] = 2;

      } else if (shape == "Z") {
         // piece 1
         pieceCoordinates[0] = 0;
         pieceCoordinates[1] = 1;

         // piece2
         pieceCoordinates[2] = 1;
         pieceCoordinates[3] = 1;

         // piece3
         pieceCoordinates[4] = 1;
         pieceCoordinates[5] = 2;

         // piece4
         pieceCoordinates[6] = 2;
         pieceCoordinates[7] = 2;

      } else if (shape == "RevZ") {
         // piece 1
         pieceCoordinates[0] = 1;
         pieceCoordinates[1] = 1;

         // piece2
         pieceCoordinates[2] = 2;
         pieceCoordinates[3] = 1;

         // piece3
         pieceCoordinates[4] = 0;
         pieceCoordinates[5] = 2;

         // piece4
         pieceCoordinates[6] = 1;
         pieceCoordinates[7] = 2;

      } else if (shape == "Bar") {
         // piece 1
         pieceCoordinates[0] = 0;
         pieceCoordinates[1] = 1;

         // piece2
         pieceCoordinates[2] = 1;
         pieceCoordinates[3] = 1;

         // piece3
         pieceCoordinates[4] = 2;
         pieceCoordinates[5] = 1;

         // piece4
         pieceCoordinates[6] = 3;
         pieceCoordinates[7] = 1;

      } else if (shape == "T") {
         // piece 1
         pieceCoordinates[0] = 1;
         pieceCoordinates[1] = 1;

         // piece2
         pieceCoordinates[2] = 0;
         pieceCoordinates[3] = 2;

         // piece3
         pieceCoordinates[4] = 1;
         pieceCoordinates[5] = 2;

         // piece4
         pieceCoordinates[6] = 2;
         pieceCoordinates[7] = 2;

      } else if (shape == "RevL") {
         // piece 1
         pieceCoordinates[0] = 0;
         pieceCoordinates[1] = 2;

         // piece2
         pieceCoordinates[2] = 1;
         pieceCoordinates[3] = 2;

         // piece3
         pieceCoordinates[4] = 2;
         pieceCoordinates[5] = 2;

         // piece4
         pieceCoordinates[6] = 2;
         pieceCoordinates[7] = 1;

      }
   }
}

class TileSscce {
   private BoardSscce board;
   private int currX, currY;

   public TileSscce(BoardSscce b, int x, int y) {
      board = b;

      // when TileSscce is instantiated, set its position
      setLocation(x, y);
   }

   public int getX() {
      return currX;
   }

   public int getY() {
      return currY;
   }

   public void setLocation(int newX, int newY) {
      if (board.isValidCoordinate(newX, newY) && board.isOpen(newX, newY)) {

         board.setTileAt(null, currX, currY);
         currX = newX;
         currY = newY;
         board.setTileAt(this, currX, currY);

      }
   }

   public Color getColor() {

      double rand = Math.random() * (2 - 0);

      /*
       * Random rand = new Random(); float r = rand.nextFloat(); float g =
       * rand.nextFloat(); float b = rand.nextFloat();
       */
      // Color randomColor = new Color(r, g, b);

      if (rand == 1) {
         return Color.GRAY;
      } else {
         return Color.RED;
      }
   }

   public Color setColor() {
      return Color.GREEN;
   }
} 
```

正如 Daniel 指出的那样，您需要将逻辑拆分为如何检查被阻塞的部分以及如何移动。您应该首先检查一块所持有的所有瓷砖上的块，然后让块告诉所有瓷砖移动而不是您正在做的事情 - 检查每个块是否有块，如果未阻挡则移动它。

例如，给 Tile 这样的东西：

```
// method to check if position OK
public boolean checkNewLocation(int newX, int newY) {
  boolean newLocationOK = board.isValidCoordinate(newX, newY)
        && board.isOpen(newX, newY);

  return newLocationOK;
}

// method to move to new position.
public void setLocation(int newX, int newY) {
  board.setTileAt(null, currX, currY);
  currX = newX;
  currY = newY;
  board.setTileAt(this, currX, currY);
} 
```

所以 Piece 将遍历它的 Tiles 调用第一个方法，然后如果一切正常，移动 Tiles 调用第二个方法。

# javascript - 将 Javascript 插入 HTML Javascript

> ID：15285409
> 
> 赞同：0
> 
> 时间：2013-03-08T01:57:17.263
> 
> 标签：javascript, jquery, html, wordpress

我正在尝试通过插入此 Javascript 代码。谷歌：

```
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1362706866260-0'); });
</script> 
```

进入这个 JavaScript / HTML 代码：

```
var theDivs = {
      "div1": makeSpecialBox("doublearticlewrapperadmp", 
              '<div class="articlewrapper" id="div-gpt-ad-1362706866260-0">
              <div class="entry-image"></div></div>'),
      ...
}; 
```

我想在我的“entry-image”div 之间插入上面列出的第一个代码。我试着简单地这样做：

```
var theDivs = {
      "div1": makeSpecialBox("doublearticlewrapperadmp", 
'<div class="articlewrapper" id="div-gpt-ad-1362706866260-0">
<div class="entry-image">googletag.cmd.push(function() { googletag.display('div-gpt-ad-1362706866260-0'); });</div></div>'), 
```

在我的 javascript 代码的 HTML 部分中添加来自 Google 的直接 javascript 代码根本不起作用，**无论有没有脚本标签**:( 我将如何解决这个问题并将我上面的 Google javascript 代码正确插入到我现有的代码中？

**更新的当前代码：**

```
<script type="text/javascript">
$(document).ready(function () {
var $window = $(window);
var resized = false;
var resized500 = false;
var resized600 = false;
var resized700 = false;
var resized800 = false;

var sadfdsf = true;
var theDivs = {
        "div1": makeSpecialBox("doublearticlewrapperadmp", '<div class="articlewrapper" id="div-gpt-ad-1362706866260-0"><div class="entry-image"><script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1362706866260-0"); });</script></div></div>'),

        "div2": makeSpecialBox("doublearticlewrapperadmp", '<div class="articlewrapper"></div></div>'),

        "div3": makeSpecialBox("doublearticlewrapperadmp", '<div class="articlewrapper"></div></div>'),

        "div4": makeSpecialBox("doublearticlewrapperadmp", '<div class="articlewrapper"></div></div>'),

        "div5": makeSpecialBox("doublearticlewrapperadmp", '<div class="articlewrapper"></div></div>'),

function makeSpecialBox(className, content) {
    // Create a new special box with the class name and the content
    var specialBox = $("<div />").addClass(className).html(content);
    // Return the special box
    return specialBox;
}

function removeSpecialBoxes() {
    // Get the special boxes
    var specialBoxes = $("#wrapper div").filter("[class^=doublearticlewrapperadmp]");
    // Remove the special boxes
    specialBoxes.remove();
}

function setNthPosition(theDiv, newPos) {
    // Generate the special box
    var theClone = theDivs["div" + theDiv].clone();
    // Get the nth-child
    var nthChild = $("#wrapper > div:nth-of-type(" + newPos + ")");
    // Append the special box after the nth-child
    nthChild.after(theClone);
}

function checkWidth() {
    var windowsize = $window.width();
    if (windowsize >= 1442) {
        //if the window is in between the sizes of 440 and 500px
        //if(resized==false){
        // Remove special boxes
        removeSpecialBoxes();
        // Reposition
        setNthPosition(1, 9);
        setNthPosition(2, 15);
        setNthPosition(3, 29);
        setNthPosition(4, 35);
        resized = true;
        //  }
    }

    windowsize = $window.width();
    if (windowsize > 1278 && windowsize < 1441)  {
        //if the window is in between the sizes of 500 and 600px
        // if(resized500==false){
        // Remove special boxes
        removeSpecialBoxes();
        // Reposition
        setNthPosition(1, 7);
        setNthPosition(2, 16);
        setNthPosition(3, 31);
        setNthPosition(4, 40);
        resized500 = true;

        // }
    }

    if (windowsize < 1278) {
        //if the window is in between the sizes of 600 and 700px
        // if(resized600==false){
        // Remove special boxes
        removeSpecialBoxes();
        // Reposition
        setNthPosition(1, 5);
        setNthPosition(2, 15);
        setNthPosition(3, 29);
        setNthPosition(4, 39);
        resized600 = true;

        //}
    }
}

// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth);
}); 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:04:25.040

您忘记了脚本标签：

```
var theDivs = {
  "div1": makeSpecialBox("doublearticlewrapperadmp", 
  '<div class="articlewrapper" id="div-gpt-ad-1362706866260-0">
  <div class="entry-image"><script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1362706866260-0"); });</script></div></div>'), 
```

还要注意您对单/双引号的使用。有些可能也可能不需要转义（尽管您*似乎*不需要...），但我确实在`googletag.display("div-gpt-ad-1362706866260-0")`部分中将单引号更改为双引号。

**编辑：**

您可能会在此处找到您的解决方案：[JavaScript 字符串中的脚本标记](https://stackoverflow.com/questions/1659749/script-tag-in-javascript-string)

```
var test = '...... </scr'+'ipt>......'; 
```

这个小技巧也许可以绕过浏览器解析你的标签。

所以在你的情况下：

```
var theDivs = {
  "div1": makeSpecialBox("doublearticlewrapperadmp", 
  '<div class="articlewrapper" id="div-gpt-ad-1362706866260-0">
  <div class="entry-image"><script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1362706866260-0"); });</scr' + 'ipt></div></div>'), 
```

# javascript - Javascript：如何在指定的内部创建隐藏的输入元素 表格内的标签？

> ID：15285411
> 
> 赞同：0
> 
> 时间：2013-03-08T01:57:24.177
> 
> 标签：javascript, forms, function, input

我一直在试图弄清楚这一点。我想在表单内的指定段落标签内创建隐藏的输入标签。我在数组中有一个变量输入名称和值。我想要发生的事情是在处理表单之前，在单击提交按钮后自动增加隐藏的输入元素。这是我所做的，这显然是不正确的：

```
<script type="text/javascript">

function insertInput(){

        hname=["name1","name2","name3","name4"];
        hvalue=["value1","value2","value3","value4"];

    var i=0;

    for (;hname[i];){
        var para, hiddenInput, br;
        para = document.getElementById('hidden');
        hiddenInput = document.createElement('input');
        hiddenInput.type = 'hidden';
        hiddenInput.name = hname[i];
        hiddenInput.value = hvalue[i];
        para.appendChild(hiddenInput);
        br = document.createElement('br');
        para.appendChild(br);
        return false; 
        i++;
    } 

</script>

<form id="form1">
        <p><label>Username:</label> <input type="text" name="username" size="10" /></p>
        <p><label>Password:</label> <input type="password" name="password" size="10"/></p>

        <p id="hidden">
        <!-- Insert Hidden input tags tag here -->
        </p>

        <button type="submit" onclick="return insertInput();">Log In</button>
</form> 
```

这是单击提交按钮后我想要实现的目标：

```
<form id="form1">
 <p><label>Username:</label> <input type="text" name="username" size="10" /></p>
 <p><label>Password:</label> <input type="password" name="password" size="10"/></p>

 <p id="hidden">
        <!-- Insert Hidden input tags tag here -->
            <input type="hidden" name="name1" value="value1"/><br/>
            <input type="hidden" name="name2" value="value2"/><br/>
            <input type="hidden" name="name3" value="value3"/><br/>
            <input type="hidden" name="name4" value="value4"/><br/>
 </p>

        <button type="submit" onclick="return insertInput();">Log In</button>
</form> 
```

请帮忙！提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:11:43.630

您的代码中有几个问题。

1.  `}`insertInput 函数缺少一个
2.  for循环中的return语句，问题是第一次迭代后循环退出。
3.  似乎您不需要`<br />`单独的隐藏字段。
4.  创建没有`var`关键字的变量，这将导致创建一个全局变量而不是局部变量。
5.  `i++`可以放入post语句（for循环）

JavaScript

```
<script tpe="text/javascript">
    function insertInput(){

        var hname=["name1","name2","name3","name4"];
        var hvalue=["value1","value2","value3","value4"];

        var i=0;

        for (;hname[i]; i++){
            var para, hiddenInput, br;
            para = document.getElementById('hidden');
            hiddenInput = document.createElement('input');
            hiddenInput.type = 'hidden';
            hiddenInput.name = hname[i];
            hiddenInput.value = hvalue[i];
            para.appendChild(hiddenInput);              
        } 
        return false;
    }
</script> 
```

# mysql - 使用子查询作为字段列

> ID：15285413
> 
> 赞同：2
> 
> 时间：2013-03-08T01:57:36.100
> 
> 标签：mysql, sql, subquery

我有一个将子查询作为字段列的查询，但我想在其他地方使用这个字段列。

```
SELECT c.country_code                                                    AS 
       country_code, 
       c.dial_code                                                       AS 
       dial_code, 
       (SELECT r.destination 
        FROM   region r 
        WHERE  r.country_code = c.country_code 
               AND r.dial_code = c.dial_code)                            AS 
       destination, 
       c.start_time, 
       c.duration, 
       c.call_type, 
       c.customer_prefix                                                 AS 
       customer_prefix, 
       c.vendor_prefix                                                   AS 
       vendor_prefix, 
       (SELECT Round(r.rate, 3) 
        FROM   rate r 
               INNER JOIN region re 
                       ON r.region_id = re.id 
               INNER JOIN account_prefix ap 
                       ON r.account_prefix_id = ap.id 
        WHERE  re.country_code = c.country_code 
               AND re.dial_code = c.dial_code 
               AND ap.prefix = c.customer_prefix 
               AND ap.prefix_type = 0)                                   AS 
       **customer_rate**, 
       (SELECT Round(r.rate, 3) 
        FROM   rate r 
               INNER JOIN region re 
                       ON r.region_id = re.id 
               INNER JOIN account_prefix ap 
                       ON r.account_prefix_id = ap.id 
        WHERE  re.country_code = c.country_code 
               AND re.dial_code = c.dial_code 
               AND ap.prefix = c.vendor_prefix 
               AND ap.prefix_type = 1)                                   AS 
       **vendor_rate**, 
       (SELECT Round(r.rate, 3) 
        FROM   rate r 
               INNER JOIN region re 
                       ON r.region_id = re.id 
               INNER JOIN account_prefix ap 
                       ON r.account_prefix_id = ap.id 
        WHERE  re.country_code = c.country_code 
               AND re.dial_code = c.dial_code 
               AND ap.prefix = c.customer_prefix 
               AND ap.prefix_type = 0) - (SELECT Round(r.rate, 3) 
                                          FROM   rate r 
                                                 INNER JOIN region re 
                                                         ON r.region_id = re.id 
                                                 INNER JOIN account_prefix ap 
                                                         ON r.account_prefix_id 
                                                            = ap.id 
                                          WHERE 
       re.country_code = c.country_code 
       AND re.dial_code = c.dial_code 
       AND ap.prefix = c.vendor_prefix 
       AND ap.prefix_type = 1) AS **unit_profit**, 
       unit_profit * duration 
FROM   cdr c 
LIMIT  100; 
```

如您所见，我想使用 unit_profit、customer_rate 和 vendor_rate。如何实现呢？

编辑：

任何显示加入视图的教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T02:17:21.320

您需要做的是获取所有在飞行中完成的子查询，并创建与 CDR 表的连接。

这将大大提高查询的性能和响应时间。您现在正在做的是为每个 CDR 的记录执行 3 个查询。Ff 这个表 (CDR) 只有几条记录是可以的，但如果没有这可能会消耗大量的处理器、内存和磁盘 I/O。

执行“加入”并以相同格式显示信息的技巧是加入 3 次相同的子查询，但使用不同的别名。

```
select  c.country_code, customer_rate_table.customer_rate 
from CDR c
left outer join on ( SELECT Round(r.rate, 3) customer_rate , re.country_code, 
                       re.dial_code, re.dial_code, ap.prefix  
               FROM   rate r 
               INNER JOIN region re 
                       ON r.region_id = re.id 
               INNER JOIN account_prefix ap 
                       ON r.account_prefix_id = ap.id 
               WHERE ap.prefix_type = 1

) customer_rate_table
ON  customer_rate.country_code = c.country_code 
AND customer_rate.dial_code = c.dial_code 
AND customer_rate.prefix = c. customer_prefix 
left outer join on ( {Same as above but with the right fields} ) vendor_rate_table
ON  vendor_rate_table.country_code = c.country_code 
AND vendor_rate_table.dial_code = c.dial_code 
AND vendor_rate_table.prefix = c.vendor_prefix 
```

然后下一张桌子...

此代码不完整，但我认为可以解释您需要做什么。

谢谢！

@leo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:16:21.253

*在性能方面，像您在查询中使用的*相关子查询通常很糟糕。*由于您只检索 100 行，它应该不会太糟糕，但如果您想要它更快，您必须重写您的查询。*

 *手头的问题可以通过以下方式轻松解决：

```
SELECT *, unit_profit * duration AS my_calc
FROM (
   -- your query here
   -- just without "unit_profit * duration"
   -- and maybe without redundant column aliases
   ) AS sub 
```*

# paypal - Paypal API DoDirectPayment 产生错误 10001：超时处理请求

> ID：15285414
> 
> 赞同：5
> 
> 时间：2013-03-08T01:58:02.640
> 
> 标签：paypal, paypal-sandbox, paypal-nvp

我在使用 Paypal 的 API 方面进展缓慢。目前，进行 API 调用会产生超时错误 (ERRORCODE:10001)：

```
**HttpResponseTIMESTAMP=2013-03-08T01:25:56Z&CORRELATIONID=e00b64a9e4c97&ACK=Failure&L_ERRORCODE0=10001&L_SHORTMESSAGE0=Internal Error&L_LONGMESSAGE0=Timeout processing request** 
```

上面的错误并不能说明太多，只是它已经超时了。这意味着它要么尝试执行交易超时，要么因为无法验证帐户而超时？这是名称-值-对字符串，

```
**METHOD=DoDirectPayment
&VERSION=99.0
&PWD=1362597445
&USER=paypro_1362597411_biz_api1.hotmail.com
&SIGNATURE=AFcWxV21C7fd0v3bYYYRCpSSRl31AA.mtioVVAeUWZAnm4W4LmSKUmC8
&IPADDRESS=192.168.237.124
&PAYMENTACTION=SALE
&AMT=660
&CREDITCARDTYPE=VISA
&ACCT=4926081645578645
&EXPDATE=3/2018
&CVV2=333
&FIRSTNAME=Parijat
&LASTNAME=Kalia
&STREET=3302+Folsom+Street
&CITY=3302+Folsom+Street
&STATE=CA
&ZIP=94110
&COUNTRYCODE=US
&CURRENCYCODE=$** 
```

另一个可能有用的提示是，当我尝试登录**沙盒测试站点时**

使用提到的凭据，它不会让我登录。但是，在我的**paypal 开发人员站点**中，在**测试帐户**中清楚地说明了相同的凭据，我 100% 只需复制粘贴用户名、密码和 API。一位朋友表示，那些用于 API 调用的测试帐户不允许您登录沙盒测试站点，这看起来很可疑。

线索？解决方案？批评？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-25T19:05:54.920

不要使用这些卡号进行测试`DoDirectPayment`： http: [//www.paypalobjects.com/en_US/vhelp/paypalmanager_help/credit_card_numbers.htm](http://www.paypalobjects.com/en_US/vhelp/paypalmanager_help/credit_card_numbers.htm)

相反，请确保您使用与 developer.paypal.com 中的一位测试用户相关联的确切测试信用卡号。

要找到这些：

1.  前往 developer.paypal.com 并登录
2.  转到仪表板 > 沙盒 > 帐户
3.  选择您要测试的帐户，查看“个人资料”
4.  打开资金选项卡并使用其中列出的卡号进行测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T13:44:07.117

您收到的错误是由您传递的日期引起的。它的格式不正确。它必须是“032018”而不是“3/2018”。这将解决 10001 错误，但是当您收到第二个错误，说明该版本不受支持。您需要使用版本 98.0 而不是 99.0。当前版本是 98.0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-17T12:00:13.500

可能存在一些问题，我们无法确定我们做错了什么。所以在这里我列出了其中的一些。

1.升级为“商务专业账户”

单击帐户>>选择任何企业帐户/创建企业帐户>>单击个人资料链接>>然后您将打开弹出窗口。

如果您尚未将您的商务帐户升级为“商务专业版”，请先进行升级，否则您将无法通过信用卡付款。

2\. 对我来说，这是我输入的信用卡号问题。不要使用任何虚拟信用卡号，例如“4242424242424242”或“4111111111111111”

始终使用贝宝提供的信用卡号，信用卡到期日也应来自贝宝。

您可以获得您的信用卡号和 card_expiration_date “在资金菜单下”

3\. 付款审核选项应始终打开。

希望这可以帮助某人:)

# java - Spring没有注入bean，我做错了什么？

> ID：15285416
> 
> 赞同：3
> 
> 时间：2013-03-08T01:58:18.600
> 
> 标签：java, spring, servlets, dependency-injection

我正在尝试简单地尝试 Spring，但我似乎遗漏了一些东西。它似乎可以很好地加载 Spring 和 bean，但是在使用自动装配注入这些 bean 时，它不起作用。有人有线索吗？

Spring 和 mainServlet 的 web.xml 部分：

```
 <welcome-file-list>
        <welcome-file>/login.jsp</welcome-file>
    </welcome-file-list>

    <!-- Spring Dependency Injection -->

     <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

  <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
    </listener-class> 
```

```
<!-- Login Filter -->
<filter>
    <filter-name>LoginFilter</filter-name>
    <filter-class>com.nortal.pirs.presentation.web.LoginFilter</filter-class>
    <init-param>
        <param-name>secretParameter</param-name>
        <param-value>8392</param-value>
    </init-param>
</filter>

<filter-mapping>
        <filter-name>LoginFilter</filter-name>
        <url-pattern>/MainServlet</url-pattern>
        <servlet-name>MainServlet</servlet-name>
</filter-mapping>

<!-- Main Servlet -->
<servlet>
<servlet-name>MainServlet</servlet-name>
<servlet-class>com.nortal.pirs.presentation.web.MainServlet</servlet-class> 
```

```
<servlet-mapping>
    <servlet-name>MainServlet</servlet-name>
    <url-pattern>/main/*</url-pattern>
</servlet-mapping> 
```

Spring 应用程序上下文文件（虽然我认为我也加载了太多不必要的废话，但它是出于绝望，因为它不起作用）：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context
         http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:annotation-config />

    <!-- Turn on AspectJ @Configurable support -->
    <context:spring-configured />

    <context:component-scan base-package="com.nortal.pirs.test.independent" />
    <context:component-scan base-package="com.nortal.pirs.businesslogic.logic" />
    <context:component-scan base-package="com.nortal.pirs.presentation.vaadin" />
    <context:component-scan base-package="com.nortal.pirs.presentation.vaadin.views" />
    <context:component-scan base-package="com.nortal.pirs.presentation.web" />

    <!-- Turn on @Autowired, @PostConstruct etc support -->
    <bean
        class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor" />
    <bean
        class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" />

</beans> 
```

UserManagerLogic（稍后必须使用 @autowired 注入 MainServlet 的 bean）：

```
@Component("UserManager")
public class UserManagerLogic implements UserManagerInterface { 
```

MainServlet：

```
 @Service
public class MainServlet extends HttpServlet {

    @Autowired
    @Qualifier("UserManager")
    private UserManagerInterface userManager;
    Logger log;

    public MainServlet() {
        log = Logger.getLogger(getClass());
    }

    public boolean userLoggedIn(String username, String password) {     
        return SecurityManager.getInstance().credentialsValid(username, password);
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        processRequest(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        processRequest(req, resp);
    }

    public void processRequest(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {

        HttpSession session = ((HttpServletRequest) request).getSession();

        String username = (String) session.getAttribute("username");
        boolean authenticated = (boolean) session.getAttribute("authenticated");

        User user = userManager.getUserByEmail(username);

        WelcomeGenerator welcomeGenerator = new WelcomeGenerator();

        if (authenticated) {
            generateResponse(response, welcomeGenerator.WelcomeMessage(user), "The secret code is " + session.getAttribute("secretParameter"));
        } else {
            generateResponse(response, welcomeGenerator.wrongCredentialsMessage(username), "Secret code is hidden, because authentication failed");
        }
    }

    public void generateResponse(HttpServletResponse response, String welcomeMessage, String additionalData) throws IOException {       
        HtmlGenerator generator = new HtmlGenerator("PIRS");
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        out.write(generator.printHeader());
        out.write(generator.printCenter(welcomeMessage));
        out.write(generator.printCenter(additionalData));
        out.write(generator.printFooter());
    }

    public UserManagerInterface getUserManager() {
        return userManager;
    }

    public void setUserManager(UserManagerInterface userManager) {
        this.userManager = userManager;
    }               
} 
```

结果当然是调用 userManager 时出现空指针异常，它应该由 Spring 注入？

```
java.lang.NullPointerException
    at com.nortal.pirs.presentation.web.MainServlet.processRequest(MainServlet.java:58)
    at com.nortal.pirs.presentation.web.MainServlet.doPost(MainServlet.java:47)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641) 
```

但是 Spring 确实加载了 bean，它只是不注入它们并且不抛出任何错误，这是为什么呢？

```
2013-03-08 03:48:42,834 [localhost-startStop-1] INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6a4ac9fb: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.config.internalBeanConfigurerAspect,mainController,SecurityManager,**UserManager**,VisitManager,**mainServlet**,org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor#0,org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:04:48.260

您的 servlet 不是`@Configurable`。由于它的生命周期不受 Spring 控制，因此这是让它自动装配的唯一方法。

哦，你的 servlet 绝对不是`@Service`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:21:09.757

那是因为 Servlet 是由 Spring Container 管理的。Servlet 由 Servlet 容器管理。

但幸运的是 Spring 提供了一个实用方法来获取 SpringApplicationContext 以从 Servlet 获取 bean。这是使用[WebApplicationContextUtils完成的](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/context/support/WebApplicationContextUtils.html)

**示例代码**

```
ApplicationContext ctx = 
                    WebApplicationContextUtils.
                          getWebApplicationContext(session.getServletContext());
UserManagerInterface userManager = (UserManagerInterface )ctx.getBean("UserManager"); 
```

# android - 在 Web 服务器中创建会话以供 Android 应用访问

> ID：15285417
> 
> 赞同：1
> 
> 时间：2013-03-08T01:58:28.920
> 
> 标签：android, session, android-intent, login

我正在尝试为具有用户系统的网站创建一个 android 应用程序（要求用户注册以使用该网站的网站 - 例如 twitter、stackoverflow 等）。

所以我的应用程序需要用户注册或登录才能使用。

为此，我实施了以下步骤：

1）让用户从应用程序登录并发送到http post

2）服务器将在其一侧创建会话并将会话发送回应用程序

3) 应用程序将保持会话 - 操作数据，应用程序将会话发送到服务器进行仔细检查

现在的问题是：我已经使用意图创建了几个页面。如果用户在登录后退出，然后单击返回按钮，他们将能够看到“登录”意图页面。

流程：用户使用app：首页-->（点击登录）-->进入登录页面（并输入信息）-->进入登录页面-->点击用户设置页面-->编辑设置（发送到网络服务器），它说编辑成功->单击注销（应用程序将再次显示主页）->当用户单击“返回”按钮时***出现问题*，他们将能够看到“设置页面”**

我认为这是意图问题......如果有一种方法可以让 1 个意图加载所有页面，那就太好了。

有没有办法让 1 意图使用来加载多个页面？如果没有，如何解决？

**第二个问题**

每个意图是否携带不同的网络会话？（就像我使用 Intent A 登录并且 Web 服务器创建了一个会话，然后我转到 Intent B，是否会将来自 Intent A 的会话带到 Intent B？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:56:49.853

我找到了我的答案。您所需要的只是客户端的单身人士。

代码可以在这里找到：[Android: Singleton DefaultHttpClient will not keep session](https://stackoverflow.com/q/13094187/2041851)

我创建了一个 BaseActivity 以便我的所有其他活动都可以使用客户端并发出 httpPost 请求

# java - AP计算机科学逻辑运算符

> ID：15285421
> 
> 赞同：5
> 
> 时间：2013-03-08T01:58:38.443
> 
> 标签：java

只有当布尔表达式 、 和 都是 时，以下哪项的计算`A`结果`B`为`C`真`false`？

> *答：* `!(A || B || C)`
> *我的回答：* `!(A && B && C)`

为什么我的答案不正确？如果`A`, `B`and `C`are all`false`并且 the`!`是分布式的，它将使它们全部成为`true`，从而返回`true`。

* * *

鉴于`a`,`b`和`c`是整数，请考虑布尔表达式

```
(a < b) || !((c == a * b) && (c < a)) 
```

以下哪项可以保证表达式是`true`？

> *答案：* `c < a`是`false`

结果`(c == a * b)`不`false`也是因为存在`&&`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:03:04.693

1.  关键字：**只有**. `A`如果,`B`或`C`is中的至少一个`true`，`!(A || B || C)`则将是`false`（因为`A || B || C`will be`true`和`! true`is `false`）。

2.  > 结果不是`(c == a * b)`也因为`&&`?

    否：如果`c < a`is `false`，则`(c == a * b) && (c < a)` *must* also be `false`，意味着表达式`! ((c == a * b) && (c < a))`必须是`true`，暗示整个表达式必须是`true`（因为`||`，而且我们已经知道右手边会是`true`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:01:45.410

因为如果有任何为假，您的表达式将评估为真。它们不一定都是假的才能评估为真，这就是问题所要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T02:01:55.600

关键词“仅当”，在您的回答中，AB 和 C 的其他组合为假，而某些为真也将产生真。虽然如果它们都是假的，它也会产生真，但是它说*只有当*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T02:02:37.647

这是因为！在第一个。你是对的，通常会发生这种情况。数字电子产品也是如此。要得到答案，您必须使用 or，因为除非它们都相同，否则它将是正确的。这很奇怪，但它有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T02:11:22.790

否定运算符的分布方式并非您认为的那样——请参阅[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)。首先计算括号。

我建议建立一个表达式的真值表来验证它的正确性。

# .htaccess - .htaccess 查找和替换

> ID：15285425
> 
> 赞同：1
> 
> 时间：2013-03-08T01:59:00.547
> 
> 标签：.htaccess

我的托管服务提供商让他们的 SSL 请求通过代理，我想通过 .htaccess 文件强制 https，但 SSL 没有在 443 上侦听，所以通过端口、https 或在 .htaccess 中要求 ssl不工作。

我一直在尝试找到一种通过.htaccess 查找和替换的方法。例如，.htaccess 将搜索“http://”并根据用户所在的 URL 将所有出现的“http://”替换为“https://”，最终强制建立安全连接。到目前为止，我还没有找到使用 .htaccess 执行此操作的方法，因此我们将不胜感激。

我知道我可以使用 JavaScript 完成此操作，并且使用 PHP 也可以完成此操作，但我真的想通过 .htaccess 完成此操作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:03:19.417

```
RewriteEngine On 
#if it is a regular http request
RewriteCond %{HTTPS} !=on
#rewrite every page to https version
RewriteRule ^(.*)$ https://www.yoursitenamehere.com/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:55:32.937

在“普通”HTTP 中你不能。对不起。

一个正常的请求看起来像这样：

```
GET / HTTP/1.1
Host: www.example.com 
```

无论是 HTTP 还是 HTTPS，这看起来都完全相同（`Host`标头可以有一个端口号，但默认端口通常会省略它）。

还有一种替代语法，（我怀疑）源自 HTTP 代理服务器：

```
GET http://www.example.com/ HTTP/1.1 
```

一些 Web 服务器支持第二种语法（Apache 支持；我没有测试过其他语法），但客户端不会使用第二种语法，除非他们正在与 HTTP 代理通信。有时我会考虑过滤使用第二种语法的请求，因为它们可能是试图找到一个开放的代理。

有几个简单的选择：

*   将 SSL 转发到其他端口。
*   在网络服务器上启用 SSL。

后者并不太棘手（如果你想在不同的证书上使用它，你可以使用 StartSSL 或滚动你自己的 CA），你可以选择一个低开销的密码套件（例如 RC4）

# exception - try and catch 语句中的代码没有执行，这是怎么回事？

> ID：15285430
> 
> 赞同：0
> 
> 时间：2013-03-08T01:59:27.893
> 
> 标签：exception, jframe, try-catch

我有以下简单的例子；

```
public class TES extends JFrame {

private JPanel contentPane;
private JTextField textField;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                TES frame = new TES();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public TES() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 100, 100);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);

    textField = new JTextField();
    textField.setColumns(10);

    JButton btnNewButton = new JButton("New button");
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            try {
                System.out.println("Before ");
                textField.setText("Before");
                Thread.sleep(4000);
            } catch (InterruptedException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            textField.setText("After");
        }
    });

    GroupLayout gl_contentPane = new GroupLayout(contentPane);
    gl_contentPane.setHorizontalGroup(
        gl_contentPane.createParallelGroup(Alignment.TRAILING)
            .addGroup(gl_contentPane.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnNewButton)
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(gl_contentPane.createSequentialGroup()
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(textField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
    );
    gl_contentPane.setVerticalGroup(
        gl_contentPane.createParallelGroup(Alignment.LEADING)
            .addGroup(gl_contentPane.createSequentialGroup()
                .addComponent(textField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(ComponentPlacement.RELATED, 61, Short.MAX_VALUE)
                .addComponent(btnNewButton)
                .addContainerGap())
    );
    contentPane.setLayout(gl_contentPane);

} 
```

}

textField.settext("Before") 行没有被执行。

```
 try {
                System.out.println("Before ");
                textField.setText("Before");
                Thread.sleep(4000);
            } catch (InterruptedException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            textField.setText("After");
        } 
```

System.out.println("Before ") 行虽然被执行。我输入 thread.sleep(4000) 只是为了暂停，这样我就可以在 JtextField 中看到“之前”和“之后”文本。在我的原始代码中，我在那个地方运行另一个类；

```
 try {
                System.out.println("Before ");
                textField.setText("Before");
                Functions.dbSet();
            } catch (InterruptedException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            textField.setText("After");
        } 
```

所以主要问题是 textField.setText("Before"); 行没有被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:09:57.657

看起来您需要了解 Java 的“事件调度线程”。

看这里：[Java Event-Dispatching Thread 解释](https://stackoverflow.com/questions/7217013/java-event-dispatching-thread-explanation)

或[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

# macos - OSX - 无法在备份脚本中压缩数据库文件 - 权限被拒绝

> ID：15285432
> 
> 赞同：0
> 
> 时间：2013-03-08T01:59:38.910
> 
> 标签：macos, bash, rsync, tar

我对这一切都很熟悉，所以轻松一点——我的第一个 bash 脚本。

**我制作了一个简单的 bash 脚本：**

*   登录到网络服务器
*   将网站文件传输到我们的 OSX 服务器
*   将数据库哑元传输到我们的 OSX 服务器
*   在 OSX 上使用 tar 压缩文件
*   将日期命名的存档保存到 OSX 上的不同目录
*   删除超过 15 天的档案

该脚本运行良好，但在制作存档时由于权限错误而失败 - 这一切都发生在 OSX 服务器上。

如何授予脚本压缩文件的权限？我使用网络服务器的 root 用户来传输文件。

该脚本非常基本 - 只是一堆像这样的终端命令：

```
echo "START WEB SERVER BACKUP"
rsync -azrP --delete user@1.2.3.4:/etc/apache2/ ~/Backups/webserver-backups/apache/;
echo "Complete"
echo "Starting transfer of mysql databases"
rsync -azrP --delete user@1.2.3.4:/mysql-backups/ ~/Backups/webserver-backups/mysql/;
echo "Complete"
echo "Starting transfer of website files"
rsync -azrP --delete root@1.2.3.4:/website-vhosts/ ~/Backups/webserver-backups/vhosts/;
echo "Complete"
echo "Compressing files into archive - this may take 5-10 minutes"
DATE=`date +%Y-%m-%d`
tar -zcfp ~/Backups/webserver-backups/archives/dev-$DATE.tar.gz ~/Backups/webserver-backups;
echo "Complete"
echo "Removing archives older than 15 days"
find "~/Backups/webserver-backups/archives/" -maxdepth 1 -type f -name "*.tar.gz" -mtime +15 -exec rm -f {} \;
echo "Complete"
echo "WEB SERVER BACKUP COMPLETE" 
```

任何帮助或指示将不胜感激。

干杯

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:16:25.860

该`p`选项仅用于提取。试试这个：

`tar -czf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:18:19.083

您的问题是尝试创建 tarball 的用户无法读取某些文件（如 dbu_1354246775.sql）。删除 ~/Backups/webserver-backups 中的所有文件：

```
sudo find ~/Backups/webserver-backups -type f -delete 
```

然后在您的脚本中将**tar -zcfp**命令替换为**tar czf**

并重新启动您的脚本

# c# - 不正确、缺失和重复的按键事件

> ID：15285438
> 
> 赞同：2
> 
> 时间：2013-03-08T02:00:29.797
> 
> 标签：c#, winforms, mono

处理键盘事件的 OS X 实现的方式似乎存在错误。当快速连续按下多个键或同时按下多个键时，该错误就会显现出来。

如果我同时按“J”“K”“L”键，在 Win7 上运行我的应用程序，我总是可以得到所有三个键（尽管不是以任何特定顺序）。但在 OS X 上，在运行 Windows 窗体应用程序时，我可以得到“JJJ”或“JKK”或“LLL”。在 OS X 的其他任何地方都没有表现出这种行为（原生 Cocoa 应用程序，例如 TextEdit，其行为与 Win7 相同）。

源代码：（在 Visual Studio 中，创建一个 windows 窗体项目，并编辑 Form1 的代码）：

```
public partial class Form1 : Form
{
    public Form1(){
        InitializeComponent();
        KeyPress += Form1_KeyPress;
        KeyDown += Form1_KeyDown;}
    void Form1_KeyDown(object sender, KeyEventArgs e)
        {Console.WriteLine("KeyDown: " + e.KeyCode.ToString());}
    void Form1_KeyPress(object sender, KeyPressEventArgs e)
        {Console.WriteLine("KeyPress: " + e.KeyChar.ToString());}
} 
```

在 Windows 7 上运行（一次性使用 JKL）：

```
KeyDown: L
KeyPress: l
KeyDown: J
KeyPress: j
KeyDown: K
KeyPress: k 
```

在 OS X 上运行（一次全部命中 JKL；请注意，它可能需要几次尝试）

```
KeyDown: L
KeyPress: k
KeyDown: J
KeyPress: k
KeyDown: K
KeyPress: k 
```

如果你错过了，所有的 KeyPress 事件都是'k'，结果是'kkk'。这是为什么？

**更新**：我在 Mountain Lion 上运行 Mono 2.10.10。

# haskell - Haskell Prelude.head 错误，空列表

> ID：15285439
> 
> 赞同：2
> 
> 时间：2013-03-08T02:00:35.617
> 
> 标签：haskell, functional-programming

我的代码抛出一个空列表错误。当我运行时：

```
makeAgent :: Agent -> [Agent] -> Agent
makeAgent (Agent func n _) agents = (Agent func (n++(show $ length $ sameNames n agents)) empty) --appends number to name to differentiate agents
    where sameNames n agents = filter (findName n) agents
          findName n1 (Agent _ n2 _) = (slice 0 3 n1) == (slice 0 3 n2) --ignore the suffix
          empty = head $ getEmpty (positions agents) (fst $ getGrid agents) --getGrid returns a tuple, but currently assume to be a square

baseline :: [Interaction] -> Float
baseline int = (fromIntegral total)/len
  where total = sum sums
        sums = map snd (showSums int)
        agents = nub  $ map (\(Interaction a1 a2 _ ) ->  a2) int
        len  = fromIntegral $ length agents

reproduce :: Float -> [Interaction] -> [Agent]  --so baseline isn't recalulated every time
reproduce _ [] = []
reproduce base interaction = winners ++ [newAgent] ++ reproduce base (tail interaction)
    where agents = nub $ concat $ map (\(Interaction a1 a2 _ ) -> a1:a2:[]) interaction
          winners = [a | a <- agents, (sumAgent interaction a) >= (round base)]
          newAgent = makeAgent (head winners) winners

main = do
    output "Length" (fromIntegral $ length int)
    output "Baseline" base
    output "Agents" agents
    output "Sums" (showSums int)
    output "winners" winners
    output "NeAgent" (makeAgent (head winners)winners)
    output "New Agents" (reproduce base int)

    where agents = generate 4
          int = playRound agents 20
          base = baseline int
          winners = [a | a <- agents, (sumAgent int a) >= (round base)] 
```

这个复制的主要功能应该做的是根据他们的父母“适应度”是否超过一定水平来生成一个新的代理，然后在代理列表中使用除该代理之外的所有代理运行相同的功能。

它输出：

```
Length: 16
Baseline: 280.0
Agents: [c_pavlov(-1,-1),c_titForTat(-1,0),c_sucker(-1,1),b_grim(0,-1)]
Sums: [("c_pavlov",280),("c_titForTat",280),("c_sucker",280),("b_grim",280)]
winners: [c_pavlov(-1,-1),c_titForTat(-1,0),c_sucker(-1,1),b_grim(0,-1)]
NeAgent: c_pavlov1(0,0)
prisoners: Prelude.head: empty list 
```

当我调用重现时，它会抛出 prelude.head 空列表错误，并且获胜者、代理和 int 列表都是非空的，因此它可能是递归最后一次迭代的边缘情况错误。为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T08:53:44.153

解决方案相对简单：根本**不要** 在 Haskell 程序中使用`head`and 。`tail`（虽然在某些情况下这样做是合理的，但最好在一开始就假设没有。）

相反，使用模式匹配。通常，您总是希望在空列表和非空列表上进行正确的模式匹配，如下所示：

```
fun :: [Something] -> ...
fun []       = ...
fun (x : xs) = ... -- x is head, xs is tail 
```

这样，你就被迫处理错误，*并且*你知道引用不能`x`再`xs`失败，因为列表已经被确定为非空。

如果您的程序中有很多不应该为空的列表，那么您必须手动跟踪这些条件（并且至少应该*记录*它们）。但即便如此，最好在这样的`let`-binding中进行模式匹配

```
(winner : _) = ... 
```

然后稍后将其`winner`称为该列表的头部，因为您将收到一条错误消息，其中涉及模式匹配失败的行号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:06:34.743

您没有确切说明错误发生的位置。大概是当你打电话时没有检查列表是否为空。~~`tail`~~ `head`

如果是这种情况，您可以使用空`interaction`列表的模式匹配来修复它。

否则，您需要提供有关错误的更多信息。

*（编辑：用头代替尾巴）*

# class - UML中的聚合关系可以有一对一的关系吗

> ID：15285445
> 
> 赞同：0
> 
> 时间：2013-03-08T02:01:03.173
> 
> 标签：class, uml, aggregation, class-diagram

UML中的聚合关系可以有一对一的关系吗？

我们的应用程序是商店计费应用程序。在计费期间，我们将提供会员 ID 以获得一定的折扣。那么成员类和计费类之间的关系是一种聚合吗？如果是的话，会是一对一的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:43:01.977

在 UML 中进行 1-1 聚合没有问题。

但是你只提供了成员ID，那为什么这是一个聚合而不是一个关联呢？它不像“计费类有一个成员”，而更像是“计费类使用一个成员”或类似的东西。该成员不是计费类别的一部分（即使是共享部分）。

# cloud-foundry - 如何让 service_broker 在 vcap 开发部署中启动？

> ID：15285455
> 
> 赞同：1
> 
> 时间：2013-03-08T02:02:14.317
> 
> 标签：cloud-foundry

当前在[service_broker 的 README 中的](https://github.com/cloudfoundry/vcap-services/tree/master/service_broker)说明谈到设置一些环境变量，但这些说明已经过时（是的，我将发出拉取请求）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:02:14.317

有两种选择：

**您可以编辑部署并重新运行 vcap_dev_setup**：

在这种情况下，您只需编辑 .../cloudfoundry/vcap/dev_setup/deployments/devbox.yml 文件（或您正在使用的任何部署文件）并将 service_broker 添加到作业列表中：

```
---
deployment:
  name: "devbox"

jobs:
  install:
    - nats_server

    ... snip a bunch of other jobs ...

    - service_broker 
```

然后重新运行 vcap_dev_setup。

但这需要一些时间，所以如果您已经部署了 vcap dev，那么更快的解决方案是......

**更新现有部署**

为此，进入 ...cloudfoundry/.deployments/devbox/config 目录做两件事：

1.  编辑 vcap_components.json 文件，添加“service_broker”
2.  将 service_broker.yml 文件放到同一目录中

您可以在 ...cloudfoundry/vcap/services/service_broker/config 目录中找到 service_broker.yml 的示例 - 只需确保正确设置令牌、cloud_controller_uri、mbus、pid 和 local_db 的值 - 看看...cloudfoundry/.deployments/devbox/config 中的其他 .yml 文件之一作为示例。

# linux - 怎么能找到什么^？和 ^/ 对应于 linux 中的键盘？

> ID：15285461
> 
> 赞同：0
> 
> 时间：2013-03-08T02:03:06.130
> 
> 标签：linux, bash

我正在通过将擦除键设置为退格键以外的其他东西来试验 stty。例如，设置常规退格键将是：

```
stty erase ^? 
```

如果您想让擦除命令实际上是 ENTER，那么当您在终端中按 Enter 时它实际上删除了最后一个字符，您会将哪些字符作为参数传递给 stty erase？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:06:25.587

```
stty erase ^M 
```

通常，您可以使用`Ctrl`-来计算控制代码。`V``<key>`

# windows-phone-8 - 如何更改起始页？

> ID：15285467
> 
> 赞同：5
> 
> 时间：2013-03-08T02:04:22.010
> 
> 标签：windows-phone-8

在开发我的 Windows Phone 8 应用程序时，我经常想直接进入我正在处理的页面。这并不总是主页。[在此处](http://mobile.dzone.com/articles/how-change-start-page-windows)找到的文章讨论了具有 OnLaunched 事件处理程序的应用程序。我认为不再是（也许我只是没有看到它）。是否有更当前的方法来设置首先启动解决方案中的哪个页面？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T10:39:39.800

在 App 清单中将起始页更改为您想要的页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T02:04:57.860

找到了答案。把它放在这里是为了拯救可能遇到这种情况的其他人。它现在在清单中。转到项目 > 属性 > WMAppManifest.xml。在编辑器中，将 Application UI > Navigation Page 更改为您需要的页面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-25T20:23:20.980

在 Windows 通用应用程序中：

共享-> App.xaml.cs

```
protected override void OnLaunched(LaunchActivatedEventArgs e)
{
    /*...*/
        if (rootFrame.Content == null)
        {
          /*...*/

            // When the navigation stack isn't restored navigate to the first page,
            // configuring the new page by passing required information as a navigation
            // parameter
            if (!rootFrame.Navigate(typeof(MainPage), e.Arguments))
            {
                throw new Exception("Failed to create initial page");
            }
        }
     /*...*/
} 
```

将 MainPage 更改为您自己的 Page 的名称

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-29T20:14:03.700

您还可以在`Application_Launching`事件中的 App.xaml 中使用以下内容更改它：

```
App.RootFrame.Navigate(new Uri("/Startup.xaml",UriKind.Relative)); 
```

请记住，您必须将“Startup.xaml”更改为您自己的 xaml 文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-30T21:47:54.637

对于用 C# 编写的 Windows Phone 应用程序：

1.  打开 WMAppManifest.xml 文件。
2.  在 Application UI 选项卡下，将 Navigation Page 的值从默认的 MainPage.xaml 更改为 YourPageName.xaml（将 YourPageName 替换为您要使用的 xaml 文件的名称）。

# regex - 这个单词计数正则表达式在做什么？

> ID：15285469
> 
> 赞同：1
> 
> 时间：2013-03-08T02:04:27.067
> 
> 标签：regex

```
\p{N}[\p{N}.]* 
```

它用于字数计数算法，但不确定它是否正在做这件事，以及它是否准确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:13:23.613

看起来它与 unicode 数字相匹配`\d[\d.]*`。它看起来不是一个很好的表达式，因为它会匹配诸如 and 之类的东西`1234`，`1..2..3..`但这取决于您的数据。我的意思是你可能没有这样的东西。

> \p{N} 或 \p{Number}：任何脚本中的任何类型的数字字符。

[正则表达式 \p{L} 和 \p{N}](https://stackoverflow.com/questions/14891129/regular-expression-pl-and-pn)

# javascript - CSS边框不扩展整个div

> ID：15285470
> 
> 赞同：0
> 
> 时间：2013-03-08T02:04:35.220
> 
> 标签：javascript, html, height, css

看看下面的图片，你可以看到我在 div 的每一侧或至少在 div 的右侧都有一个边框。我想要边框做的是扩展整个灰色 div，但是当我将`height:100%;`边框放入 div 时，它会按原样显示。在下面检查我的css，让我解释一下。`#Content`是包含所有内容的大灰色 div，如果我删除 min-height 并使其`height:70%;`边框延伸整个页面。看看下面的前后图片以获得一个想法。

CSS：

```
#Content {
padding:0px;
min-height:70%;
} 
```

前：

![前](../Images/a3a9712728240ff5ef6adbda80ab2b85.png)

后： ![后](../Images/089120001215e832fcb1b513aeaa802c.png)

改变了`#Content { padding:0px; min-height:70%; }`

至`#Content { padding:0px; height:70%; }`

有人可以向我解释一下如何在具有最小高度属性的“状态后图片”中获得边框。这是一个 jsFiddle 乱七八糟的：[链接](http://jsfiddle.net/U2MsK/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:06:09.850

我猜了一下，但也许你想要的效果可能来自：

```
#Files {
    border-left: 2px solid red;
    border-right: 2px solid red;
    min-height: 20em;
    padding: 0 10px;   
} 
```

为了清楚起见，我将边界设置为红色和宽，但这可以更改。

要将边框一直延伸到末尾`<div id="Content">`，需要修改如下样式：

```
#Content {
    width:100%;
    min-width:965px;
    min-height:50%;
    background-color:#FAFAFA;
    border-bottom:1px solid #E5E5E5;
    padding-top:50px;
    padding-bottom: 0px;
    font-weight:normal;
    color:rgba(0, 0, 0, .8);
} 
```

请注意，您需要将底部填充设置为零。如果要强制使用空格并保留边框，则需要放入一个具有固定高度的额外元素：

```
<p style="height: 50px; margin: 0;"><!-- spacing hack --></p> 
```

这是一种快速而肮脏的方式，无需修改布局的其余部分。

请注意您的原始样式表，我认为该`#Content`规则出现在几个地方（原始小提琴 CSS 面板中的第 4 行和第 103 行）。

我的小提琴是：http: [//jsfiddle.net/audetwebdesign/TuRUk/1/](http://jsfiddle.net/audetwebdesign/TuRUk/1/)

希望这可以帮助！

**注意：**我添加了一些额外的填充，但这是可选的。我不喜欢坐在边框上的文字......

**关于 min-height：** 为了让边框按您的意愿工作，`#Files`div 需要对其高度进行绝对测量（像 auto 或 100% 这样的相对测量不会这样做）。所以，我指定了一个`min-height`for `#Files`（20em，但你可以调整它），对于小内容（几行），边框一直到底部。对于较大的文本块，它仍然有效。

由于您浮动其他 div 的方式，该`#Files`div 无法知道兄弟元素的高度，它可以做的最好的事情是从其父元素继承高度，但在这种情况下，其他元素不会考虑，因为它们浮动。

# ruby-on-rails-3.2 - yuidoc 可以与咖啡脚本一起使用吗？

> ID：15285471
> 
> 赞同：0
> 
> 时间：2013-03-08T02:04:36.850
> 
> 标签：ruby-on-rails-3.2, coffeescript, yui

有没有人设置过 yuidoc 来使用 coffeescript？这是我的 yuidoc.json 文件：

```
{
  "name": "App",
  "description": "App",
  "version": "1",
  "url": "http://example.com",
  "options": {
    "paths": [
      "./"
             ],
   "exclude": "vendor",
   "syntaxtype": "coffee",
   "extension": ".coffee",
   "outdir": "./api_docs"
  }
} 
```

当我运行`yuidoc -c yuidoc.json .`我创建的示例类时，我在 api.js 文件中显示并生成了 html 页面，但是当我转到由`yuidoc --server`.

**更新**

这是我的评论。

```
###*
# Description
#
# @project MyProject
# @author Me
# @class MyClass
### 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:57:12.630

yuidoc 不会查看您的代码，而是查看以 /** 开头并包含正确关键字的注释。您可以从根本不包含任何代码、仅包含适当注释的文件创建 API 文档，相反，您将不会从没有注释的纯代码中获得任何文档，就像您的情况一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T11:39:38.460

yuidocjs v0.3.19以后支持解析咖啡评​​论语法（0.3.19以后的版本已经支持CoffeeScript）看[这里](https://github.com/yui/yuidoc/pull/56)

添加 CoffeeScript 注释语法支持。

```
set options --syntaxtype coffee.

$ yuidoc --syntaxtype coffee -e .coffee input 
```

这是 CoffeeScript 的代码：

```
###*
# The test project
# @project tester
# @title The Tester
# @icon http://a.img
# @url http://one.url
# @url http://two.url
# @author admo
# @contributor davglass
# @contributor entropy
### 
```

# c++ - 如何将输入字符串转换为函数（）

> ID：15285473
> 
> 赞同：1
> 
> 时间：2013-03-08T02:04:42.300
> 
> 标签：c++, reflection, scripting

我将构建一个命令行工具。我希望用户输入一个文本/字符串（函数/命令）。然后，我的工具会将这些字符串转换为 C++ 函数/变量。

[他们将运行我的自定义数据类型，我自己的函数，而不是运行系统函数]

例如：用户类型

```
>> myVar = c(123,456,789) 
```

我的工具会知道那`myVar`是变量名。并且`c(123,456,789)`是 的数组`integer`。并将这些字符串转换为如下内容：

```
int myVar[] = {123,456,789}; 
```

用户也可以调用函数：

**输入：**

```
 >> myPrintf(myVar[0]); 
```

**输出**

```
 << 123 
```

* * *

我的解决方案：我将建立一个类，可能是这样的：

```
public class cVariable
{
    public string varName; // the variable name
    private varType; // the variable data-type
    public string varData;  // the value of this variable
} 
```

我将使用`if/else`语句来知道我必须运行哪种数据类型/函数。

但我觉得这种方式一点都不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:35:37.597

摘要：这可能比看起来更难做到。如果你有一小部分案例，并且你想在今晚有一些工作（这主要是一个学习练习），那么你可以简单地使用你的第一种方法。

从您的问题来看，您似乎想创建一种自定义语言，解释该语言，并将其绑定到您编译的二进制文件。总的来说，这是一项艰巨的任务。如果您缩小范围，您可能会得到更好的答案或结果。

如果您熟悉以下主题，您将了解有多少选项可供您使用：

*   编译和链接
    *   动态链接
*   反射
*   脚本和解释语言
    *   语言绑定
*   代码生成

为了让您的程序了解其自身的结构和标识符，该语言需要一个称为反射的功能。标准 C++ 没有这个特性（而许多其他的有）。到编译代码时，您的函数、类型或参数不再有字符串标识符。

有关 C/C++ 中类似反射的行为的讨论，请参阅以下问题：[如何将反射添加到 C++ 应用程序？](https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application)

（C 和 C++ 存在动态链接约定，它们提供了从字符串到已编译二进制文件中位置的映射，但这可能不是完成您想要的最直接的方法。）

听起来您想要构建一种与原始源代码绑定的解释性语言。如果您有一组非常孤立的案例，您可以考虑使用预处理器技巧。（上面链接的问题指的是 Qt 的实现，以及 Boost 工具。）

如果您愿意使用现有的脚本语言，您可以研究从该语言生成与 C++ 代码的绑定。以下是 Python 的一些资源，例如：[http](http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages) ://wiki.python.org/moin/IntegratingPythonWithOtherLanguages 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T02:35:05.200

如果您确实打算做一些相对完整的事情，那么编写自己的语言是一项艰巨的任务。上千行代码绝对是可能的。在我 30 年的职业生涯和业余爱好中，我参与了各种形式的工作——从在调试器中编写简单的命令解析器或类似的运行良好的“迷你基本”解释器和小型 Lisp 解释器。我还制作了很多“伪语言”，其中将文本文件用作程序的输入，但它不是一种成熟的编程语言 - 只有一组有限的变量。

我做过的另一件事是“表驱动编程”，其中实际的“代码”以表的形式内置到程序中。

在所有这些中，有各种形式的“我有一些输入/数据，我想将其转换为与其他对象相关的动作”。

正如您所描述的，基本机制是将名称和其他一些数据（例如类型）存储在某种数据结构中。`std::map<std::string, cVariable>`将是一种相对容易地将数据从名称（字符串）检索到该名称的变量的方法。

你可以清楚地为函数做同样的事情。当然，您也可以通过某种方式将参数传递给函数。究竟如何解决这个问题是每种语言都必须解决的问题，通常它最终会成为某种“堆栈”。

您当然可以有一个`map<std::string, function>`从名称转换为函数的函数 - 函数定义可能包含一些关于函数接受的参数数量和类型的信息。

对于“内置”函数，您还可以使用一种`argc, argv[]`类型方法，其中参数作为`cVariable`[其中一个选项是`constant`或`expression`] 传递，以允许`myPrint(myVar[0] + 100)`，这当然不是真正的变量，而是内容的结果添加到常量的变量。

如果您还没有编写像带变量的计算器一样的东西，那可能是一个很好的起点。

许多“脚本”类型语言都有一个“多态”变量——也就是说，该值可以用作数字或字符串，而无需实际要求转换变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T02:43:18.513

至于标题“将字符串转换为函数（）”，您可以使用函数指针来实现：

根据值分配函数：

```
int (*p)(char*,...) = printf; 
```

使用你的函数指针来调用函数：

```
char* str = "hello function pointer";
p("say %s", str); 
```

但这只是你问题的一半，首先你需要做一个词法分析来解析你的输入，并根据定义的规则确定什么是令牌（构成命令行工具语言的符号），比如 DIGIT，括号、分配等。然后您需要一个语法分析器来设置命令中语法含义的规则。这基本上是通过状态机完成的，但这是一项复杂的任务，我认为您不想自己实现它？查看[Flex](http://en.wikipedia.org/wiki/Flex_lexical_analyser)和[Bisson](http://en.wikipedia.org/wiki/GNU_bison)工具来自动生成解析器。

这为您提供了通用命令行工具的通用解决方案，该工具可以解释您想要的任何语言。如果语法很简单，你可以自己做一个解析器，也许用一些正则表达式库。

# php - 如何在字符串中将 %xxx 替换为 $xxx？

> ID：15285476
> 
> 赞同：2
> 
> 时间：2013-03-08T02:05:05.457
> 
> 标签：php, regex

如何将字符串中的 %xxx 替换为 $xxx ？

```
<?php
// how to replace the %xxx to be $xxx

define('A',"what are %a doing, how old are %xx ");
$a='hello';
$xx= 'jimmy';
$b= preg_replace("@%([^\s])@","${$1}",A);   //error here;

// should output: what are hello doing,how old are jimmy
echo $b; 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:19:13.343

您需要将替换值评估为 php，因此您需要`e`修饰符（尽管从 php 5.5 开始它似乎已被弃用......）。您还需要一个量词，因为`$xx`它包含多个字符：

```
$b= preg_replace('@%([^\s]+)@e','${$1}',A);
                          ^  ^ 
```

请参阅[codepad 上的工作示例](http://codepad.org/P2GpOYmW)。

顺便说一句，我更喜欢单引号，以避免 php 尝试查找变量时出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:23:20.803

为了以这种方式合并变量，您可能应该执行以下操作：

```
$b = preg_replace_callback("/(?<=%)\w+/",function($m) {
        return $GLOBALS[$m[0]];
    },A); 
```

但是请注意，使用`$GLOBALS`通常是一个坏主意。理想情况下，你应该有这样的东西：

```
$replacements = array(
    "%a"=>"hello",
    "%xx"=>"jimmy"
);
$b = strtr(A,$replacements); 
```

# php - 如何查找不在主 ID 表中的 ID

> ID：15285478
> 
> 赞同：0
> 
> 时间：2013-03-08T02:05:42.483
> 
> 标签：php, sql, sql-server, asp-classic

假设我有一个**Products**主表，还有另一个保存**ProductIDs**列表的表。

```
 Table name: Products  
 --------------------
 ProductID, Title, Price  
       1, Title 1, 12.00  
       2, Title 2, 15.00  
       4, Title 4, 11.50  
       8, Title 8, 13.89  
       11, Title 11, 12.00  

     Table name: ListOfProducts  
      --------------------------
       SomeID, ProductIDs  

         34, 4,8,1  
         35, 8,10,2 
```

现在，您可以看到在表格中`ListOfProducts`，记录为`SomeID=35`，产品列表为`8,10,2`。`ProductID 10`由于它不在主表 Products 中，我如何使用 SQL 快速找出 invalid ？

我的程序实际上是经典的**ASP**（旧版），数据库是 MS SQL。我可以在 ASP 中循环遍历记录`ListOfProducts`，但是如何使用快速 SQL 来查找任何无效的`ProductID`？在这种情况下，当程序循环记录`35`时，脚本应该返回`ProductID 10`。

这看起来真的很简单。但我就是想不出一个好的解决方案。这可以做到吗？请帮忙！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:10:42.997

您不应该将 ID 存储为逗号分隔的列表，这看起来更像是多对多关系。你应该有一个像这样的表：

```
SomeID | ProductID
-------------------
34     | 4
34     | 8
34     | 1
35     | 8
35     | 10
35     | 2 
```

如果您真的必须使用逗号分隔列表，那么您需要创建某种[拆分功能](https://stackoverflow.com/search?q=sql%20split%20function)

# javascript - Dribbble.js 覆盖 Twitter Bootstrap CSS

> ID：15285483
> 
> 赞同：0
> 
> 时间：2013-03-08T02:06:29.080
> 
> 标签：javascript, css, html, twitter-bootstrap

我正在尝试向使用引导程序的网站添加运球镜头。当我将 ID 添加到列表元素时，该元素会丢失所有样式。

我正在使用在这里找到的 dribbble.js：[https ://github.com/tmdvs/Dribbble.js](https://github.com/tmdvs/Dribbble.js)

我的 JS 是：

```
<script src="scripts/dribbble.js" type="text/javascript"></script>
<script type="text/javascript">
    getShotsForID('tim', 'shots', 15);
</script> 
```

的HTML：

```
<div class="row-fluid">
    <ul class="thumbnails">
        <li  class="span3" id='shots'></li>
     </ul>
</div> 
```

通常，HTML 将是：

```
<div class="row-fluid">
    <ul class="thumbnails">
        <li class="span3">
            <img src="images.png" class="img-polaroid" image alt="image" />
        </li>
        <li class="span3">
            <img src="images.png" class="img-polaroid" image alt="image" />
        </li>
        <li class="span3">
            <img src="images.png" class="img-polaroid" image alt="image" />
        </li>
        <li class="span3">
            <img src="images.png" class="img-polaroid" image alt="image" />
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:07:16.903

如果你在这里查看，[https://github.com/tmdvs/Dribbble.js/blob/master/style.css](https://github.com/tmdvs/Dribbble.js/blob/master/style.css)，

您会看到 css 是基于 id 的，并且确实会从 bootstrap 覆盖很多 css，因为`#ids`它的[特异性](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)值比`.classes`

我将重构 dribblejs 提供的 css 并删除任何不必要的样式

# php - 爆炸并获取引号内的内容

> ID：15285489
> 
> 赞同：1
> 
> 时间：2013-03-08T02:06:57.833
> 
> 标签：php, arrays, explode

我正在使用一种方法在表格行中列出一堆用户/信息：

```
"3""2""5""pg1" 
```

假设这是我得到的数据，我该如何制作它，所以我只检索引号内的数据（作为数组）。我这样做是因为从长远来看它有助于编程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:08:25.237

[`explode()`](http://php.net/explode)如果值内不能有引号，则可以使用：

```
$string = '"3""2""5""pg1"';
$array = explode( '""', trim( $string, '"')); 
```

这[将输出](http://viper-7.com/J5ra91)：

```
Array
(
    [0] => 3
    [1] => 2
    [2] => 5
    [3] => pg1
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T02:09:35.420

您可以使用 preg_split 将其分开：

```
preg_split("/\"+/", STRING, -1, PREG_SPLIT_NO_EMPTY); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T02:21:36.140

这没有完全回答，因为我还有一些探索......

> TRIM 不比 ltrim 和 rtrim 快吗？看例子...

```
<?php

// FASTEST: 0.13544297218323 ms     
$a1 = microtime(true);
for ($i=0; $i<=100000; $i++) {
$string = '"3""2""5""pg1"';
$array = explode( '""', trim( $string, '"'));
}
$a1e = microtime(true);
$a1r = $a1e-$a1;

// MIDDLE FAST: 0.2419900894165 ms
$a2 = microtime(true);
for ($i=0; $i<=100000; $i++) {
$string = '"3""2""5""pg1"';
$string = rtrim(ltrim(str_replace('""', ',', $string), '"'), '"');
$pieces = explode(',', $string);
}
$a2e = microtime(true);
$a2r = $a2e-$a2;

// MIDDLE 0.20940399169922 ms!
$a3 = microtime(true);
for ($i=0; $i<=100000; $i++) {
$re = preg_split("/\"+/", $string, -1, PREG_SPLIT_NO_EMPTY);
    $pieces = explode(',', $re[0]);
}
$a3e = microtime(true);
$a3r = $a3e-$a3;

echo $a1r."\r\n"; 
echo $a2r."\r\n"; 
echo $a3r."\r\n";

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T02:10:25.367

可能不是最优雅的方式：

```
<?php

$string = '"3""2""5""pg1"';

$string = rtrim(ltrim(str_replace('""', ',', $string), '"'), '"');

$pieces = explode(',', $string);

print_r($pieces); 
```

**结果**

```
大批
(
    [0] => 3
    [1] => 2
    [2] => 5
    [3] => pg1
)
```

[查看演示](http://codepad.org/29h4P7Sd)

# asp.net-mvc-4 - 如何使用从编辑返回的响应数据刷新 jqgrid

> ID：15285490
> 
> 赞同：1
> 
> 时间：2013-03-08T02:07:01.777
> 
> 标签：asp.net-mvc-4, jqgrid

我正在使用 inlineNav 编辑选项来添加和编辑行。数据正在正确更新到数据库中，但是在成功保存后我找不到刷新网格而不发回服务器的方法。

我发现的所有问题和答案都建议做 $.('grid').trigger('reloadGrid');

但是，如果来自服务器的响应已经包含所需的数据，这似乎是不必要的。这主要是添加新记录时的问题，ID 值显示为 jqg1。

我正在使用带有 jqGrid 4.4.4 的 ASP.NET MVC4。

这是我的看法

```
 $(document).ready(function () {
    var emptyMsgDiv = $('<div>No school codes to display.</div>');
    var grid = $('#tblSchools');

    grid.jqGrid({
        datatype: 'json',
        viewrecords: true,
        url: '@Url.Action("SchoolsGridData")',
        editurl: '@Url.Action("EditSchoolsGridData")',
        colNames: ['School ID', 'Name', 'SACE Number', 'School Code', 'LEA Code', 'DFEE Code', 'Active'],
        colModel: [
                    { name: 'SchoolId', index: 'SchoolId', width: 80, key: true },
                    { name: 'Name', index: 'Name', width: 190, editable: true },
                    { name: 'SaceSchoolNumber', index: 'SaceSchoolNumber', width: 105, editable: true, sortable: false },
                    { name: 'Code', index: 'Code', width: 105, editable: true, sortable: false },
                    { name: 'LeaCode', index: 'LeaCode', width: 80, editable: true, sortable: false },
                    { name: 'DfeeCode', index: 'DfeeCode', width: 80, editable: true, sortable: false },
                    { name: 'Active', index: 'Active', width: 80, editable: true, sortable: false }
        ],
        shrinkToFit: true,
        height: "100%",
        caption: 'School list',
        rowNum: 10,
        rowList: [10, 15, 20],
        emptyrecords: 'No school codes to display.',
        pager: '#schoolsPager',
        loadComplete: function () {
            var count = grid.getGridParam();
            var ts = grid[0];
            if (ts.p.reccount === 0) {
                grid.hide();
                emptyMsgDiv.show();
            } else {
                grid.show();
                emptyMsgDiv.hide();
            }
        }
    }).trigger('reloadGrid', [{ page: 1 }]);

    emptyMsgDiv.insertAfter(grid.parent());

    grid.jqGrid('navGrid', "#schoolsPager", { edit: false, add: false, del: true });
    grid.jqGrid('inlineNav', '#schoolsPager', {
        addParams: {
            position: "last",
            addRowParams: {
                "keys": true,
                "aftersavefunc": function (rowid, response) {
                    alert('row: ' + rowid + ', response: ' + $.param(response));
                }
            }
        },
        editParams: {
            "aftersavefunc": function (rowid, response) {
                alert('row: '+rowid+', response: '+response);
            }
        }
    });

  });
</script>
<h3>Maintain Schools</h3>

<table id="tblSchools"></table>
<div id="schoolsPager" class="gridPager"></div> 
```

和我的控制器

```
public JsonResult EditSchoolsGridData(string oper, string SchoolId, string Name, string SaceSchoolNumber, string Code, string LeaCode, string DfeeCode, string Active)
{
  [Update Logic]

  return SchoolsGridData(string.Empty, "asc", 1, 10);
}

[HttpGet]
public JsonResult SchoolsGridData(string sidx, string sord, int? page, int? rows)
{
  [Get data logic]
} 
```

我可以看到在 aftersavefunc 中显示的响应 json，但找不到将其绑定到网格的方法。

我想要做的甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:30:38.170

您可以使用 addRowData 方法，该方法将通过重新加载网格将数据设置为网格

```
jQuery("#tblSchools").jqGrid('addRowData', response.SchoolId, response, "first"); 
```

[有关更多详细信息，请参阅 jqgrid 方法 wiki](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)

# android - 从 Activity 启动 Android init.rc 服务

> ID：15285492
> 
> 赞同：6
> 
> 时间：2013-03-08T02:07:08.923
> 
> 标签：android, android-activity, init

在我开始之前，这适用于我们自己的基于 android 的设备，而不是手机或其他地方的部署。

我们在 init.rc 中有一个服务，它是一个 postgresql 数据库服务器。这会在启动时启动，并且始终在系统的后台运行。但是它可能会关闭，我们希望有一种方法可以从系统的 android 端停止和启动此服务。

有没有办法从 android Activity 发送初始化启动命令？在 root shell 中，这相当于运行“start servicename”和“stop servicename”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-29T14:41:03.040

要启动在 init.rc 文件中声明的服务，我认为您必须使用以下命令更改“ctl.start”系统属性：

在 c 文件中：

```
property_set("ctl.start", "<service_name>"); 
```

在 java 中：

```
SystemProperties.set("ctl.start", "<service_name>"); 
```

这意味着您的活动具有系统权限（在清单中）：

```
android:sharedUserId="android.uid.system" 
```

并由您的系统密钥签名（或将平台放在 Android.mk 中）

您可以猜到，要停止服务，请使用以下命令：

```
property_set("ctl.stop", "<service_name>"); 
```

或者

```
SystemProperties.set("ctl.stop", "<service_name>"); 
```

# ios - 删除联系人 Cordova 2.5 for IOS 不工作

> ID：15285494
> 
> 赞同：1
> 
> 时间：2013-03-08T02:07:34.970
> 
> 标签：ios, cordova, contact

我想问一下 Contact API Cordova 2.5.0 中的删除功能。我使用 xcode 4.6 和 Iphone 版本 5.1.1。这真的有效吗？为什么删除函数总是转到onRemoveError？

这是代码：

```
 var myContact = navigator.contacts.create();
        myContact.note = document.getElementById('txtNote').value;

        myContact.nickname = document.getElementById('txtNickname').value;      
        var name = new ContactName();
        name.givenName = document.getElementById('txtGiven').value;
        name.familyName = document.getElementById('txtFamily').value;
        myContact.name = name;

        // save
        myContact.save(onSaveSuccess,onSaveError);

        // remove
        myContact.remove(onRemoveSuccess,onRemoveError); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:20:02.303

如果您的代码确实看起来像那样，并且您*在*保存后立即删除，那么保存将不会发生（因为它是异步处理的）。

您可以在“onSaveSuccess”处理程序中放置删除联系人的行，这将确保在实际创建联系人后调用它。

# jquery - JQuery 加载变量存储的 html 到一个 div

> ID：15285496
> 
> 赞同：1
> 
> 时间：2013-03-08T02:07:44.010
> 
> 标签：jquery

朋友们，

我有一个简单的页面。我有一个 div（我们称之为#content），其中包含我想要存储到变量中的内容（在 html 中）。

```
<div id="content">
   <div id="left">
      <h1>Cool title</h1>
      <p>text</p>
   </div>
   <div id="right">
      <p>more text</p>
   </div>
</div> 
```

然后我有一个通过 JQuery 绑定到点击函数的 div。单击时，它将#content 的内容存储到变量storedHTML 中，并将高度存储到storedHeight 中。然后它将#content 的高度设置为0 并删除#content 中的html。

然后当再次点击时，它会将高度动画化回storedHeight，比如说200px；它还会将 html 重新加载到 div 中。

问题在于将 html 重新加载到 div 中。我该怎么做呢？我试过了：

```
storedHTML = $('#content').html(); //to store it
$('#content').html(''); //to clear it 
$('#content').html(storedHTML); //to load it back up again 
```

尝试加载它...但无济于事。

当我第一次编写它以从 ap 标签中获取文本，将其最小化，然后再次放大时，这非常有效。例如：

```
storedText = $('p#example').text(); //to store it
$('p#example').text(''); //to clear it
$('p#example').text(storedText) //to load it back up again 
```

出于此 html 加载的目的，我尝试使用 .html()、.text()、.data()、.load()。以及 .html() 和 .append() 的组合

我显然失败了。我不知道如何将 html（多个 div 等）加载回这个 div。我很想学习正确的方法来做到这一点！

衷心感谢您一直以来的帮助朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:11:17.920

您是否尝试过使用 .hide() 和 .show()？

```
$('#content').hide();
$('#content').show(); 
```

您还可以在这里看到一堆示例和文档：http: [//api.jquery.com/hide/](http://api.jquery.com/hide/)

此外，即使您的方法不是最好的，它仍然应该有效。我不确定您为什么会遇到问题，但是下面的代码对我来说效果很好：

```
 <html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
</head>
<body>
<div id="content">
   <div id="left">
      <h1>Cool title</h1>
      <p>text</p>
   </div>
   <div id="right">
      <p>more text</p>
   </div>
</div>

<input type="button" value="Hide" onclick="hideContent()" />
<input type="button" value="Show" onclick="showContent()" />

</body>
<script type="text/javascript">
    var storedHTML = '';

    function hideContent() {
        storedHTML = $('#content').html();
        $('#content').html('');
    }

    function showContent() {
        $('#content').html(storedHTML);
    }

</script>
</html> 
```

# apache2 - 无法通过ip访问我的网站。我的 httpd 设置有问题吗？

> ID：15285498
> 
> 赞同：0
> 
> 时间：2013-03-08T02:07:53.537
> 
> 标签：apache2, centos, virtualhost

我刚刚在远程服务器上的 CentOS 上安装了新的 apache/mysql。现在我只想能够通过我服务器上的 ip 访问我的服务器

假设 ip 是**64.123.myip.whatever**

这是我的 /etc/httpd/conf/httpd.conf 设置

```
### Section 2: 'Main' server configuration
ServerName  64.123.myip.whatever:80

### Section 3: Virtual Hosts
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot /var/www/html 
    ServerName 64.123.myip.whatever
    ErrorLog logs/error_log
    CustomLog logs/access_log common
</VirtualHost> 
```

我重新启动我的 apache，尝试访问此服务器，但在浏览器中出现此错误

```
Oops! Google Chrome could not connect to 64.123.myip.whatever 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:28:15.600

有几件事。首先...您的字面意思是IP地址吗？如果是这样，那么将其放入 Chrome 中实际上会直接进入该地址。实际托管网络服务器的随机 IP 地址的可能性相当小，因此会出现错误。ServerName 不能是 IP 地址。如果您的意思是您尝试使用“64.123.myip.whatever”的 ServerName，那么您必须添加一个主机条目，将“64.123.myip.whatever”的所有流量定向到您的 Web 服务器的 IP 地址（大概127.0.0.1)。

# java - 将对象放在 x,y 位置 JFrame

> ID：15285502
> 
> 赞同：0
> 
> 时间：2013-03-08T02:08:28.013
> 
> 标签：java, swing, jframe, coordinates, layout-manager

我正在尝试在 Java 中做一些事情，我只是将一个对象`x, y`放在`JFrame`. 我需要知道要使用什么布局，或者我需要做什么才能做到这一点。任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T02:08:59.067

您可以使用`null`布局来执行此操作，然后在组件上调用 setLocation 或 setBounds。但是你一般不应该这样做，因为这会导致*非常*不灵活的 GUI，在一个平台上看起来不错，在另一个平台上看起来很糟糕，而且*很难*更新和维护。只是不要这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T03:45:15.927

![特定坐标的组件](../Images/b83422d9aec4414a5f78ef2cd9e0cdec.png)

此示例使用空边框提供“空白”（或在本例中为“绿色”）。当然，如果框架中有其他组件，所有这些“特定坐标”会变得更加复杂，但是可以使用相同的技术为特定组件提供空白空间。

请注意，通常最好在提供空白时将组件包裹在面板中，以保留组件的现有边框。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

class SpecificCoords {

    public static void main(String[] args) {
        final int specificX = 40;
        final int specificY = 20;

        Runnable r = new Runnable() {
            @Override
            public void run() {
                // imagine this is our 'frame'
                JPanel gui = new JPanel(new BorderLayout());
                JTextField tf = new JTextField(10);
                JPanel borderPanel = new JPanel(new GridLayout());
                borderPanel.add(tf);
                borderPanel.setBorder(new EmptyBorder(
                        specificX, specificY, 
                        specificX, specificY));
                borderPanel.setBackground(Color.GREEN);
                gui.add(borderPanel);

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

# javascript - phonegap 可以用画布吗？

> ID：15285508
> 
> 赞同：2
> 
> 时间：2013-03-08T02:09:36.797
> 
> 标签：javascript, android, cordova, canvas

我是使用 javascript 编程 phonegap 的新手！我尝试在我的项目中使用画布，但它没有用！这是我的代码：index.html：

```
 <!DOCTYPE html>
<html>
<head>
<script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
<script type="text/javascript" charset="utf-8">
document.addEventListener("deviceready",onDeviceReady, false);
function onDeviceReady() {

}
var c = document.getElementById("mycanvas");
var ctx = c.getContext("2d");
ctx.fillStyle="#FF0000";
ctx.fillRect(0,0,150,75);
</script>
</head>
<body>
<canvas id="mycanvas" width="200" height="100" style="border:1px solid #c3c3c3;"></canvas>
</body>
</html> 
```

# javascript - 让 onpageshow 和 onpagehide 监听器工作的问题

> ID：15285511
> 
> 赞同：1
> 
> 时间：2013-03-08T02:09:51.713
> 
> 标签：javascript, html

无法获得`pagehide`和`pageshow`工作

```
<script>
    console.log( 'adding pagehide / pageshow' );
    window.addEventListener( 'pagehide', function() { console.log( 'page hide' ); } );
    window.addEventListener( 'pageshow', function() { console.log( 'page show' ); } );
</script> 
```

获取控制台消息

```
adding pagehide / pageshow 
```

但是当移动到不同的选项卡或应用程序之间时，`pagehide`似乎`pageshow`不会触发。

99% 确定我很愚蠢，但看不出哪里出了问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:23:15.810

移动到不同的选项卡或应用程序会触发`blur`and`focus`侦听器，而不是`pagehide`or`pageshow`侦听器。例如：

```
console.log( 'adding blur / focus' );
window.addEventListener( 'blur', function() { console.log( 'blur' ); } );
window.addEventListener( 'focus', function() { console.log( 'focus' ); } ); 
```

应该管用。

# mysql - 从 MySQL 查询生成 Mongo 查询

> ID：15285513
> 
> 赞同：0
> 
> 时间：2013-03-08T02:09:52.423
> 
> 标签：mysql, mongodb

我一直在使用以下 MySQL 命令从日志数据构建热图。但是，我有一个存储在 Mongo 数据库中的新数据集，我需要运行相同的命令。

```
 select concat(a.packages '&' b.packages) "Concurrent Packages",
 count(*) "Count"
 from data a
 cross join data b
 where a.packages<b.packages and a.jobID=b.jobID
 group by a.packages, b.packages
 order by a.packages, b.packages; 
```

请记住，表 a 和 b 在查询之前不存在。但是，它们是从数据表的 packages 列创建的，其中 jobID 作为我要检查匹配的字段。换句话说，如果两个包在同一个作业中，我想在并发使用计数中添加一个条目。如何在 Mongo 中生成类似的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:52:34.190

**这不是不同文件的“加入”**；它是**一个**文档中的操作，可以在 MongoDB 中完成。

```
You have a SQL TABLE "data" like this:
  JobID   TEXT,
  package TEXT 
```

将其存储在 MongoDB 中的最佳方式是一个名为“data”的集合，每个 JobID 包含一个文档，其中包含一组包：

```
{
    _id: <JobID>,
    packages: [
        "packageA",
        "packageB",
        ....
    ]
} 
```

[注意：您还可以将数据表实现为 MongoDB 中的一个文档，其中包含一组作业，每个作业包含一组包。不建议这样做，因为您可能会达到 16MB 的文档大小限制，并且嵌套数组（尚未）被不同的查询很好地支持 - 如果您还想将数据用于其他目的]

现在，如何得到这样的结果？

```
{ pair: [ "packageA", "packageB" ], count: 20 },
{ pair: [ "packageA", "packageC" ], count: 11 },
... 
```

由于 MongoDB 中没有两个数组的内置“交叉连接”，因此您必须在 mapReduce() 的 map 函数中对其进行编程，将每对包作为键发出：

```
mapf = function () {
    that = this;
    this.packages.forEach( function( p1 ) {
        that.packages.forEach( function( p2 ) {
            if ( p1 < p2 ) {
                key = { "pair": [ p1, p2 ] };
                emit( key, 1 );
            };
        });
    });
}; 
```

[注意：这可以优化，如果包数组被排序]

reduce 函数只不过是对每个键的计数器求和：

```
reducef = function( key, values ) {
    count = 0;
    values.forEach( function( value ) { count += value } );
    return count;
}; 
```

因此，对于这个示例集合：

```
> db.data.find()
{ "_id" : "Job01", "packages" : [ "pA", "pB", "pC" ] }
{ "_id" : "Job02", "packages" : [ "pA", "pC" ] }
{ "_id" : "Job03", "packages" : [ "pA", "pB", "pD", "pE" ] }

we get the following result:

> db.data.mapReduce(
...     mapf,
...     reducef,
...     { out: 'pairs' }
... );
{
    "result" : "pairs",
    "timeMillis" : 443,
    "counts" : {
        "input" : 3,
        "emit" : 10,
        "reduce" : 2,
        "output" : 8
    },
    "ok" : 1,
}
> db.pairs.find()
{ "_id" : { "pair" : [ "pA", "pB" ] }, "value" : 2 }
{ "_id" : { "pair" : [ "pA", "pC" ] }, "value" : 2 }
{ "_id" : { "pair" : [ "pA", "pD" ] }, "value" : 1 }
{ "_id" : { "pair" : [ "pA", "pE" ] }, "value" : 1 }
{ "_id" : { "pair" : [ "pB", "pC" ] }, "value" : 1 }
{ "_id" : { "pair" : [ "pB", "pD" ] }, "value" : 1 }
{ "_id" : { "pair" : [ "pB", "pE" ] }, "value" : 1 }
{ "_id" : { "pair" : [ "pD", "pE" ] }, "value" : 1 } 
```

有关 mapReduce 的更多信息，请参阅：[http](http://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/) ://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/和[http://docs.mongodb.org/manual/applications/map-reduce/](http://docs.mongodb.org/manual/applications/map-reduce/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:15:47.817

你不能。Mongo 不做连接。从 SQL 切换到 Mongo 比迁移查询要复杂得多。

通常，您会将所有相关信息包含在同一记录中（而不是规范化信息并通过连接选择它）。非规范化！

# emacs - Emacs Python 模式和执行命令

> ID：15285516
> 
> 赞同：0
> 
> 时间：2013-03-08T02:09:59.270
> 
> 标签：emacs, python-2.7, emacs24, python-mode

`C:\Program Files(x64)`我在windows中和python2.7下安装了emacs24`C:\Python27`

我尝试安装 python 模式以从 emacs 向解释器发送命令。我的 init.el 文件位于`Users/myname/.emacs.d`：

```
(setq py-install-directory "~/.emacs.d/python-mode.el-6.1.1")
(add-to-list 'load-path py-install-directory)
(require 'python-mode)
(setq py-shell-name "C:\Python27\python.exe")

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(py-shell-name "C:\\Python27\\python.exe"))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 ) 
```

我已将 python 模式文件放入：`C:\Users\myname\.emacs.d\python-mode.el-6.1.1`

通过在菜单中选择 PyShell > Default Intepreter 选项，可以在缓冲区中形成交互式 python 会话，但是如果我打开一个 .py 文件并尝试通过转到菜单 PyExec > Execute Statement 来运行一个地狱般的世界，我会收到错误这种性质的：

`Opening output file: no such file or directory, c:/Users/Ben/AppData/Local/Temp/C-/Python27/python.exe-705218Y.py`

如何设置以便我可以编辑 python 代码，然后将行发送到另一个缓冲区中的 python 解释器而不会出现此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:37:17.573

您正在使用`setq`and`custom-set-variables`来设置`py-shell-name`. 如果我没记错的话，`custom-set-variables`如果你在它之前使用它是行不通的`setq`。此外，当您用字符串文字编写它时，您需要转义反斜杠。使用以下方法之一应该可以解决您的问题。

要使用`setq`，请修复反斜杠：

```
(setq py-install-directory "~/.emacs.d/python-mode.el-6.1.1")
(add-to-list 'load-path py-install-directory)
(require 'python-mode)
(setq py-shell-name "C:\\Python27\\python.exe") 
```

要使用`custom-set-variables`，只需删除`setq`：

```
(setq py-install-directory "~/.emacs.d/python-mode.el-6.1.1")
(add-to-list 'load-path py-install-directory)
(require 'python-mode)

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(py-shell-name "C:\\Python27\\python.exe"))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 ) 
```

# javascript - 是否可以控制复制顺序？

> ID：15285520
> 
> 赞同：4
> 
> 时间：2013-03-08T02:10:24.213
> 
> 标签：javascript, database, couchdb, database-replication, master-slave

我有一个巨大的主 CouchDB 数据库和从属只读 CouchDB 数据库，与主数据库同步。
因为变化速度很快，服务器之间的通道又慢又不稳定，我想设置 order/priority 来定义哪些文档首先出现。我需要确保优先级最高的文档肯定是最新版本，我可以忽略列表末尾的文档。

排序，而不是过滤

**如果不可能，有什么解决办法？**

我已经看过的资源：
[http :](http://wiki.apache.org/couchdb/Replication)
[//wiki.apache.org/couchdb/Replication http://couchapp.org/page/index](http://couchapp.org/page/index)

更新：主数据库实际上是 Node.js NPM 注册表，并且 order 是[Most Depended-upon Packages 的列表](https://npmjs.org/browse/depended)。我正在尝试制作[代理](https://github.com/PaulVI/npm-proxy/)，因为克隆 50G 一段时间后总是失败。但事实是“我们不需要 90% 的这些模块，而是快速可靠地访问我们所依赖的那些模块。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:39:45.613

开箱即用的 CouchDB 不提供任何选项来控制复制顺序。不过，我猜如果您将具有不同优先级的文档保存在 master 上的不同数据库中，您可以拼凑一些东西。然后，您可以先将高优先级的主数据库复制到从数据库，然后再复制低优先级的数据库，等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T18:37:22.013

最简洁的答案是不。

长答案是，CouchDB 仅在单个文档级别提供 ACID 保证，这是设计的。复制器在复制时会自动更新每个文档（任何人都可以，复制器只是使用公共 API）但不保证排序，这主要是因为它使用多个 http 连接来提高吞吐量。如果您愿意，您可以将其配置为 1，这样您会得到更好的排序，但这不是灵丹妙药。

在 bigcouch 合并后，所有赌注都被取消，将有多个来源和多个目标，没有强加的总订单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:15:00.797

您可以设置过滤复制或命名文档复制：

*   [http://wiki.apache.org/couchdb/Replication#Filtered_Replication](http://wiki.apache.org/couchdb/Replication#Filtered_Replication)
*   [http://wiki.apache.org/couchdb/Replication#Named_Document_Replication](http://wiki.apache.org/couchdb/Replication#Named_Document_Replication)

这两种方法都是复制整个数据库的替代方法。您可以以较小的批次大小进行复制，并根据您的优先级对批次进行排序。

# android - 在 Android 中使用 Web 服务

> ID：15285525
> 
> 赞同：1
> 
> 时间：2013-03-08T02:10:48.647
> 
> 标签：android, web-services, soap, axis2, webservices-client

我已经编写了一个 we 服务并且我有 WSDL 文件。我是 android 编程新手，我想在我的移动应用程序中使用我的网络服务功能。我可以使用哪些不同的方法？什么是最好的选择，请给我一些很好的参考。

# sql - sql server中char数据类型列的最大条件

> ID：15285531
> 
> 赞同：0
> 
> 时间：2013-03-08T02:11:40.197
> 
> 标签：sql, sql-server, max

我有一个列的 char 数据类型的表。需要从该列中获取最大数量。

该列中的一些值是 1,2,3,A,B

在获取最大值（列）时，我只得到字符 - 'B'，我如何获得数值中的最大值？ `select max(cast(floor as int)) from floormaster`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:12:50.747

```
SELECT  MAX(CAST(columnName AS INT)) MAX_VALUE
FROM    tableName
WHERE   ISNUMERIC(columnName) = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/13bca/3)

*   [数字（）](http://msdn.microsoft.com/en-us/library/ms186272%28v=sql.90%29.aspx)

# text - 标题和段落文本没有空格

> ID：15285533
> 
> 赞同：0
> 
> 时间：2013-03-08T02:11:46.977
> 
> 标签：text, margin, space, paragraph, gaps-in-visuals

我有 -

```
<p>some text as 'intro'</p>
<h1>Big Text</h1>
<p>some text as 'outro'</p> 
```

我在背景图像上设置了这个，我已经设置了边距并正确地将文本放在里面，但是我想把所有的文本都放在一起，所以几乎没有间隙——行高会毁了它，我已经尝试过单独的 div 标签但没有运气 - 为此选择的最佳 css 方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:27:24.263

如果您需要使用这些元素，您可以使用负边距：

```
<p>some text as 'intro'</p>
<h1 style="margin: -15px 0 -15px">Big Text</h1>
<p>some text as 'outro'</p> 
```

更好的方法可能是通过换行符分隔不同的行并设置“标题”行的样式，如下所示：

```
<p>some text as 'intro'<br />
<span style="font-size: 200%; font-weight: bold;">Big Text</span><br />
some text as 'outro'</p> 
```

# python - Python 语言的 isPrime 函数

> ID：15285534
> 
> 赞同：61
> 
> 时间：2013-03-08T02:12:11.837
> 
> 标签：python, primes

所以我能够在互联网的一些帮助下解决这个问题，这就是我得到的：

```
def isPrime(n):
    for i in range(2,int(n**0.5)+1):
        if n%i==0:
            return False

    return True 
```

但我的问题确实是如何做到这一点，但为什么。我知道 1 不被视为“素数”，即使它是，并且我知道如果它除以范围内的任何内容，它自动不是素数，因此返回 False 语句。但我的问题是**平方根“n”在这里扮演什么角色**？

Ps 我非常缺乏经验，一个月前才被介绍编程。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-08T02:17:51.233

在 Internet 上流传的许多质数测试中，请考虑以下 Python 函数：

```
def is_prime(n):
  if n == 2 or n == 3: return True
  if n < 2 or n%2 == 0: return False
  if n < 9: return True
  if n%3 == 0: return False
  r = int(n**0.5)
  # since all primes > 3 are of the form 6n ± 1
  # start with f=5 (which is prime)
  # and test f, f+2 for being prime
  # then loop by 6\. 
  f = 5
  while f <= r:
    print('\t',f)
    if n % f == 0: return False
    if n % (f+2) == 0: return False
    f += 6
  return True 
```

[由于所有大于 3 的素数](https://math.stackexchange.com/questions/3297805/all-prime-numbers-within-2-columns-of-number-pyramid-proof)都是 6n ± 1 的形式，因此一旦我们消除它`n`：

1.  不是 2 或 3（它们是素数）和
2.  甚至 (with `n%2`) 和
3.  不能被 3 整除（用`n%3`），那么我们可以每 6 个 n ± 1 进行一次测试。

考虑素数 5003：

```
print is_prime(5003) 
```

印刷：

```
 5
 11
 17
 23
 29
 35
 41
 47
 53
 59
 65
True 
```

该行`r = int(n**0.5)`计算为 70（5003 的平方根为 70.7318881411 并`int()`截断该值）

考虑下一个奇数（因为除了 2 之外的所有偶数都不是素数）5005，同样的打印结果：

```
 5
False 
```

极限是平方根，因为`x*y == y*x`该函数只需循环 1 次即可发现 5005 可被 5 整除，因此不是素数。因为`5 X 1001 == 1001 X 5`（并且两者都是 5005），我们不需要在循环中一直走到 1001 来知道我们在 5 处知道的内容！

* * *

现在，让我们看看您拥有的算法：

```
def isPrime(n):
    for i in range(2, int(n**0.5)+1):
        if n % i == 0:
            return False

    return True 
```

有两个问题：

1.  它不测试是否`n`小于 2，并且没有小于 2 的素数；
2.  它测试 2 到 n**0.5 之间的每个数字，包括所有偶数和所有奇数。由于每个大于 2 且能被 2 整除的数都不是素数，因此我们可以通过只测试大于 2 的奇数来加快速度。

所以：

```
def isPrime2(n):
    if n==2 or n==3: return True
    if n%2==0 or n<2: return False
    for i in range(3, int(n**0.5)+1, 2):   # only odd numbers
        if n%i==0:
            return False    

    return True 
```

好的——它加快了大约 30%（我对它进行了基准测试......）

我使用的算法`is_prime`仍然快 2 倍左右，因为只有每 6 个整数在循环中循环。（再一次，我对它进行了基准测试。）

* * *

旁注：x**0.5 是平方根：

```
>>> import math
>>> math.sqrt(100)==100**0.5
True 
```

* * *

旁注 2：[素数测试](http://en.wikipedia.org/wiki/Primality_test)是计算机科学中一个有趣的问题。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-08T02:19:21.400

使用`n**.5`，您不是对 n 求平方，而是取平方根。

考虑数字 20；整数因子是 1、2、4、5、10 和 20。当你将 20 除以 2 得到 10 时，你知道它也能被 10 整除，无需检查。当你将它除以 4 并得到 5 时，你知道它可以被 4 和 5 整除，而无需检查 5。

达到因子的中间点后，您将没有更多的数字可以检查您之前尚未识别为因子的数字。因此，你只需要走到一半就可以看是否是素数，而这个中点可以通过取数的平方根来找到。

此外，1 不是素数的原因是因为素数被定义为具有 2 个因数，即 1 和它本身。即 2 是 1*2，3 是 1*3，5 是 1*5。但是 1 (1*1) 本身只有 1 个因子。因此，它不符合这个定义。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-10-01T07:52:08.227

这个问题是不久前提出的，但我有一个更短的解决方案给你

```
def isNotPrime(Number):
    return 2 not in [Number,2**Number%Number] 
```

如果数字是素数，数学运算将主要返回 2，而不是 2。但如果 2 是给定的数字，它会附加到我们正在查看的列表中。

例子：

```
2^5=32    32%5=2
2^7=128   128%7=2
2^11=2048 2048%11=2 
```

反例：

```
2^341%341=2,  but 341==11*31
2^561%561=2,  but 561==3*11*17
2^645%645=2,  but 645==3*5*43 
```

如果 Number 不是素数，isNotPrime() 可靠地返回 True。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-08T02:18:27.803

下面没有进行浮点运算。这更快，并且可以容忍更高的参数。你必须只求平方根的原因是，如果一个数有一个大于它的平方根的因数，它也有一个比它小的因数。

```
def is_prime(n):
    """"pre-condition: n is a nonnegative integer
    post-condition: return True if n is prime and False otherwise."""
    if n < 2: 
         return False;
    if n % 2 == 0:             
         return n == 2  # return False
    k = 3
    while k*k <= n:
         if n % k == 0:
             return False
         k += 2
    return True 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-12-01T04:41:13.100

这种方法会比这里的递归和枚举方法慢，但使用[威尔逊定理](https://en.wikipedia.org/wiki/Wilson%27s_theorem)，并且只有一行：

```
from math import factorial

def is_prime(x):
    return factorial(x - 1)  % x == x - 1 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-09-28T21:26:33.933

找到数字的平方根是为了提高效率。例如。如果我试图找到 36 的因数，可以乘以自身形成 36 的最大数是 6\. 7*7 = 49。

因此，每个 36 的因数都必须乘以 6 或更小的数字。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-08-13T00:08:00.933

```
def is_prime(x):
    if x < 2:
        return False
    elif x == 2:
        return True  
    for n in range(2, x):
        if x % n ==0:
            return False
    return True 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-02-20T10:00:16.257

```
def isPrime(num,div=2):
    if(num==div):
        return True
    elif(num % div == 0):
        return False
    else:
        return isPrime(num,div+1) 
```

===============================================
已编辑

```
def is_prime(num, div = 2):
    if num == div: return True
    elif num % div == 0: return False
    elif num == 1: return False
    else: return is_prime(num, div + 1) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-27T11:48:26.093

我不知道我是否迟到了，但我会把它留在这里以帮助将来的人。

我们使用 (n) 的平方根，即 int(n**0.5) 来减少您的程序将被迫计算的数字范围。

例如，我们可以做一个试验除法来测试 100 的素数。让我们看看 100 的所有除数：

2, 4, 5, 10, 20, 25, 50 这里我们看到最大的因子是 100/2 = 50。这对所有 n 都是正确的：所有除数都小于或等于 n/2。如果我们仔细看看除数，我们会发现其中一些是多余的。如果我们以不同的方式编写列表：

100 = 2 × 50 = 4 × 25 = 5 × 20 = 10 × 10 = 20 × 5 = 25 × 4 = 50 × 2 冗余变得明显。一旦我们达到 10，即 √100，除数就会翻转并重复。因此，我们可以进一步消除大于 √n 的测试除数。

取另一个数字，例如 16。

它的除数是 2,4,8

16 = 2 * 8、4 * 4、8 * 2。

您可以注意到，在达到 4（即 16 的平方根）之后，我们重复了 8 * 2，我们已经将其作为 2*8。这种模式适用于所有数字。

为了避免重复自己，我们因此测试素数直到数字 n 的平方根。

所以我们将平方根转换为 int，因为我们不想要一个带有浮点数的范围。

阅读维基百科上的素数测试以获取更多信息。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-12-16T22:10:51.237

这是我的方法：

```
import math

def isPrime(n):
    'Returns True if n is prime, False if n is not prime. Will not work if n is 0 or 1'

    # Make sure n is a positive integer
    n = abs(int(n))

    # Case 1: the number is 2 (prime)
    if n == 2: return True

    # Case 2: the number is even (not prime)
    if n % 2 == 0: return False

    # Case 3: the number is odd (could be prime or not)

    # Check odd numbers less than the square root for possible factors 
    r = math.sqrt(n)
    x = 3 
    while x <= r:
        if n % x == 0: return False  # A factor was found, so number is not prime
        x += 2 # Increment to the next odd number

    # No factors found, so number is prime  
    return True 
```

要回答原始问题，**n**0.5***与 n 的平方根*相同。您可以在此数字之后停止检查因数，因为合数的因数*总是*小于或等于其平方根。这比只检查每个 n 的 2 和 n 之间的所有因子要快，因为我们检查的数字更少，随着 n 的增长，这可以节省更多的时间。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-20T17:57:01.073

```
isPrime=lambda x: all(x % i != 0 for i in range(int(x**0.5)+1)[2:]) 
```

这里是如何使用它

```
isPrime(2) == False
isPrime(5) == True
isPrime(7) == True 
```

要查找您可能使用的所有素数：

```
filter(isPrime, range(4000)[2:])[:5]
=> [2, 3, 5, 7, 11] 
```

请注意，在这种情况下，5 表示要找到的素数的数量和 4000 最大范围的素数将被查找。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-05-22T19:09:04.547

```
def is_prime(x):  
    if x < 2:  
        return False  
    for n in range(2, (x) - 1):  
        if x % n == 0:  
            return False  
    return True 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-11-02T16:49:06.653

您编写的每个代码都应该是高效的。对于像您这样的初学者，最简单的方法是检查数字**'n'**从**2 到 (n-1)**的整除性。当您考虑非常大的数字时，这需要很多时间。平方根方法通过较少的比较次数帮助我们使代码更快。阅读***算法设计和分析的复杂性。***

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-12-15T10:10:41.513

在 python 中实现了一个伪代码（[https://en.wikipedia.org/wiki/Primality_test ），希望对您有所帮助。](https://en.wikipedia.org/wiki/Primality_test)

```
# original pseudocode https://en.wikipedia.org/wiki/Primality_test
def isPrime(n):
    # Corner Cases
    if (n<= 1): return False
    elif (n<= 3): return True
    elif (n%2 == 0 or n%3 == 0): return False

    i = 5
    while i*i<=n:
        if (n%i==0 or n%(i+2)==0): return False
        i += 6

    return True;

%timeit isPrime(800) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-02-13T05:59:58.423

`int(n**0.5)`是您与 n 的幂 2 混淆的 sqrt(n) 的底值`(n**2)`。如果`n`不是素数，则*必须*有两个数`1 < i <= j < n`：`i * j = n`。

现在，由于`sqrt(n) * sqrt(n) = n`假设其中一个`i,j`大于（或等于）`sqrt(n)`- 这意味着另一个必须小于（或等于）`sqrt(n)`。

既然是这样，迭代 range 中的整数就足够了 `[2, sqrt(n)]`。这正是发布的代码正在做的事情。

如果您想成为真正的聪明人，请使用以下单行函数：

```
import re
def is_prime(n):    
    return not re.match(r'^1?$|^(11+?)\1+$',n*'1') 
```

可以在[此处找到“魔术正则表达式”的解释](http://montreal.pm.org/tech/neil_kandalgaonkar.shtml)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-03-13T05:29:30.277

这是我的`np`方式：

```
def is_prime(x):
    if x < 4:
        return True
    if all([(x > 2), (x % 2 == 0)]):
        return False
    else:
        return np.array([*map(lambda y: ((x % y) == 0).sum(), np.arange(1, x + 1))]).sum() == 2 
```

这是表演：

```
%timeit is_prime(2)
%timeit is_prime(int(1e3))
%timeit is_prime(5003)

10000 loops, best of 3: 31.1 µs per loop
10000 loops, best of 3: 33 µs per loop
10 loops, best of 3: 74.2 ms per loop 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-04-27T13:36:04.587

```
def is_prime(n):
    n=abs(n)
    if n<2:    #Numbers less than 2 are not prime numbers
        return "False"
    elif n==2: #2 is a prime number
        return "True"
    else:
        for i in range(2,n): # Highlights range numbers that can't be  a factor of prime number n. 
            if n%i==0:
                return "False" #if any of these numbers are factors of n, n is not a prime number
    return "True" # This is to affirm that n is indeed a prime number after passing all three tests 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-11-05T11:55:37.450

这是codecademy中的一个练习，这就是我在下面通过它的方式......

```
def is_prime(x):  

    # If number(x) is evenly divided by following dividers then number(x) is not prime

    divider = [2, 3, 5, 7]

    # An empty list to be able to check whether number(x) is evenly divided:

    remainder = []

    # exceptions for numbers 1,2,3,5,7:
    if x < 2:
        return False
    if x in divider:
        return True
    else:
        for nums in divider:
            remainder.append(x % nums)
        if 0 in remainder:
            return False
        else:
            return True 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-09-02T03:38:47.220

```
def is_prime(n):
if (n==2 or n==3): return True
if(n<=1 or n%2==0 or n%3==0 ): return False
for i in range(6,int((n**0.5)) + 2,6):
    if(n%(i-1)==0 or n%(i+1)==0):
        return False
return True 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-31T02:41:05.043

这是该网站的答案。

```
def is_Prime(n):
    if n <= 3:
        return n > 1
    if n % 2 == 0 or n % 3 == 0:
        return False
    i = 5
    while i ** 2 <= n:
        if n % i == 0 or n % (i + 2) == 0:
            return False
        i += 6
    return True
isPrime=list()
c=-1
for i in range(0,1000001):
    c=c+1
    isPrime.append(c)
    if is_Prime(isPrime[i])==True:
       isPrime[i]=True
    else:
       isPrime[i]=False 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-15T00:28:43.737

这整个解决方案是基于因素的。恰好有两个因数（即 1 和数字本身）的自然数是质数。简单来说，如果一个数只能被 1 和它自己整除，那么它就是质数。除数字 2 外，所有质数都是奇数。

```
def isprime(x):
         factors=[]
         if  x < 2:
              return False
         for i in range(1,x+1):
             if (x % i == 0):
                 factors.append(i)
         return True if len(factors) <=2 else False 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2015-05-23T09:23:26.557

很简单！

```
def prime(x):
  if x == 1:
    return False
  else:
    for a in range(2,x):
      if x % a == 0:
        return False
  return True 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2015-11-14T19:26:38.590

这是我的

```
import math

def is_prime(num):

    if num % 2 == 0 and num > 2: 
       return False
    for i in range(3, int(math.sqrt(num)) + 1, 2):
        if num % i == 0:
            return False
    return True 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2016-04-10T04:15:33.207

```
def fun(N):#prime test
if N>1 :
    for _ in xrange(5):
        Num=randint(1,N-1)
        if pow(Num,N-1,N)!=1:
            return False
    return True
return False 
```

如果数字是素数则为真，否则为假

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-11-15T06:55:00.540

数字 1 是一种特殊情况，它既不是素数也不是合数。欲了解更多信息，请访问： http: [//mathworld.wolfram.com/PrimeNumber.html](http://mathworld.wolfram.com/PrimeNumber.html)

而且，(n**0.5) --> 这将给我们“n”的“**平方根**”。因为它是“n 次幂 0.5 或 1/2”

我们为什么要这样做，以数字 400 为例：我们可以用 a*b 的形式表示它

```
1*400 = 400
2*200 = 400
4*100 = 400
5*80 = 400
8*50 = 400
10*40 = 400
16*25 = 400
20*20 = 400
25*16 = 400
40*10 = 400
50*8 = 400
80*5 = 400
100*4 = 400
200*2 = 400
400*1 = 400 
```

400 的平方根是 20：我们可以看到，我们只需要检查直到 20 的可分性，因为当 'a' 达到 20 时，'b' 开始减少......所以，最终我们用小于的数字检查可分性平方根。

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2017-07-05T14:15:36.207

我有一个新的解决方案，我认为它可能比 Python 中提到的任何函数都快

它基于这样的想法：对于任意数 N，N/D = R，除以 N（如果不是素数）的最小可能数是 D=2，相应的结果 R 是 (N/2)（最高）。

随着 D 变大，结果 R 变小 例如：除以 D = 3 结果 R = (N/3) 所以当我们检查 N 是否可被 D 整除时，我们也在检查它是否可被 R 整除

所以随着 D 变大而 R 变小直到 (D == R == 平方根(N))

那么我们只需要检查从 2 到 sqrt(N) 的数字另一个提示以节省时间，我们只需要检查奇数，因为它可以被任何偶数整除，它也可以被 2 整除。

所以序列将是 3,5,7,9,......,sqrt(N)。

```
import math
def IsPrime (n): 
    if (n <= 1 or n % 2 == 0):return False
    if n == 2:return True
    for i in range(3,int(math.sqrt(n))+1,2):
        if (n % i) == 0:
            return False
    return True 
```

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2018-01-25T04:37:39.407

> ( [https://www.youtube.com/watch?v=Vxw1b8f_yts&t=3384s](https://www.youtube.com/watch?v=Vxw1b8f_yts&t=3384s) ) Avinash Jain

```
for i in range(2,5003):
    j = 2
    c = 0
    while j < i:
        if i % j == 0:
            c = 1
            j = j + 1
        else:
            j = j + 1
    if c == 0:
        print(str(i) + ' is a prime number')
    else:
        c = 0 
```

* * *

## 回答 #28

> 赞同：-3
> 
> 时间：2014-07-31T22:56:10.363

```
def is_prime(x):  
    if x<2:  
        return False  
    elif x == 2:  
        return True  
    else:  
        for n in range(2, x):  
            if x%n==0:  
                return False  
        return True 
```

* * *

## 回答 #29

> 赞同：-4
> 
> 时间：2014-11-04T00:20:50.240

Srsly 伙计们......为什么像这样的简单方法需要这么多行代码？这是我的解决方案：

```
def isPrime(a):
    div = a - 1
    res = True
    while(div > 1):
        if a % div == 0:
            res = False
        div = div - 1
    return res 
```

# svn - SVN Server 源代码不更新？

> ID：15285543
> 
> 赞同：1
> 
> 时间：2013-03-08T02:13:33.280
> 
> 标签：svn, visualsvn-server

我是 SVN 的新手。我使用本教程在 Windows Server 2012 R2 上创建了 SVN 服务器管理器：

安装 VisualSVN：[http ://www.youtube.com/watch?v=yGIo9_x-YSo](http://www.youtube.com/watch?v=yGIo9_x-YSo%5D)

在 SVN 服务器管理器中导入源代码后，我可以签入到本地系统。

我修改了文件并提交了，但我无法在导入文件夹的服务器端看到我的最新源代码。

例如：我在服务器中有“X”文件夹，所以我导入到 SVN。因此，我签出到本地系统并修改了 X 文件夹中的一些文件。在我提交这些更改后，这些更改应该会在服务器端的“X”文件夹中生效。

我将在哪里获得服务器端的最新源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:23:01.727

也许我遗漏了一些东西，但在我看来，您只需`update`要从服务器端在文件夹上运行一个即可提取在本地系统上提交的内容吗？

# php - 使用带有 fopen 的代理服务器

> ID：15285546
> 
> 赞同：5
> 
> 时间：2013-03-08T02:13:47.537
> 
> 标签：php, proxy, stream, fopen

我正在尝试使用 fopen 从另一个网站读取远程文件。我想使用代理来做到这一点，据我所知，我可以做到：

```
$context = stream_context_create(array(
    'http' => array(
        'proxy' => 'tcp://192.168.10.10:80' // The proxy server address and port
    ),
));

$file = fopen($url, 'r', false, $context) 
```

但是有没有办法使用该代理的用户名和密码进行身份验证？还是我仅限于使用公共代理？

此外，代理定义是`tcp://192.168.10.10:80`. 如果我想使用 HTTP 代理，我可以随意将其更改为`http://192.168.10.10:80`吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:06:28.787

如果代理需要身份验证，您可以使用[Proxy-Authorization](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.34)。来自[**PHP.Net**](http://www.php.net/manual/en/function.stream-context-create.php#111032)的示例：`$context`[](http://www.php.net/manual/en/function.stream-context-create.php#111032)

 **```
$opts= array(
                 'http' => array( 
                 'proxy' => 'tcp://proxyip:8080', 
                 'header' => array( 
                                     "Proxy-Authorization: Basic $auth" 
                                  ) 
                ) 
); 
$context = stream_context_create($opts); 
```

另外，我认为您不能将 tcp 更改为 http in，`tcp://192.168.10.10:80`因为代理所做的是代表客户端建立与另一台服务器的 TCP 连接，然后在客户端和服务器之间来回路由所有流量。显然它与 TCP（有时 UDP）而不是 HTTP.Http 代理只是“理解”由 HTTP 协议传递的流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-25T11:51:28.607

如果你不明白是什么`$auth`。

例如，我有这个代理`http://myproxyuser:myprxypassword@domain:port`。

然后

```
$auth = base64_encode("myproxyuser:myprxypassword"); 
```**

# javascript - 从 Ajax 请求中打开 Jquery 对话框？

> ID：15285547
> 
> 赞同：0
> 
> 时间：2013-03-08T02:14:04.330
> 
> 标签：javascript, jquery

我当前的 javascript/ajax 请求有问题。我正在尝试从`.append`我的代码中打开一个 Jquery 对话框，如下所示：

```
for (var i in rows)
{
  var row = rows[i];          
  var id = row[0];
  var NewEdit = row[0];
  var PreviousEdit = row[1];
  var FunctionName = row[2];
  var FunctionID = row[2]
  function ShowInfo() 
  {
    dialog('Original: <br>'+PreviousEdit+'<br><br> New: <br>' +NewEdit);
  }
  $('#RecentEdits').append("<br>Page: <a href=Page.php?ID="+FunctionID+">"+FunctionName+"</a> - <a href='#' OnClick='ShowInfo()'>Info</a>");
} 
```

我只粘贴了相关代码，如果需要，我可以发布整个函数。

我知道一个事实，我的变量是正确设置的，因为它们被打印出来了。

如何打开一个对话框，显示 Javascript 函数内部的更多信息？

* * *

**解决方案：**

因为没有正确的答复。我使用了 OQJF 的示例并制作了这个：

```
 <script>
function ShowInfo(a,b) 
      {
       alert('Original: \n'+unescape(a)+'\n\n New: \n'+unescape(b));
      };
    </script>
   <script>
//window.setInterval(function()
//{
  $(function () 
  {
    $.ajax({                                      
        url: 'RecentUpdates.php', data: "", dataType: 'json',  success: function(rows)        
        {
        $('#RecentEdits').empty();

            for (var i in rows)
            {
                var row = rows[i];          
                var id = row[0];
                var NewEdit = row[0];
                var PreviousEdit = row[1];
                var FunctionName = row[2];
                var FunctionID = row[3];
                $('#RecentEdits')
                .append("<br>Page: <a href='Page.php?ID="+FunctionID+"'>"+FunctionName+"</a> - ");
                $('#RecentEdits').append("<input type='button' onClick=ShowInfo('"+escape(PreviousEdit)+"','"+escape(NewEdit)+"'); value='Show'>");
            } 
        } 
    });       
  });
// }, 1000);
  </script> 
```

这使我能够从我的 Javascript 打印输出中访问该功能。

我的 html 周围的引号引起了我的麻烦，所以我决定做两个附加。这似乎工作得很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:30:32.510

虽然首先我认为您应该在循环之外设置函数 showInfo 并为其设置 2 个参数。下面是我没有测试的示例代码，但它应该几乎是这样的。

```
 function ShowInfo(orginVal,newVal) 
      {
        var msg =('Original: <br>'+orginVal+'<br><br> New: <br>' +newVal);
        $(<div>msg</div>).appendTo('body).dialog();//maybe you can add some options for dialog
      } 
```

下面的部分似乎在另一个函数中。

```
 for (var i in rows)
    {
      var row = rows[i];          
      var id = row[0];
      var NewEdit = row[0];
      var PreviousEdit = row[1];
      var FunctionName = row[2];
      var FunctionID = row[2]

      $('#RecentEdits').append("<br>Page: <a href=Page.php?ID="+FunctionID+">"+FunctionName+"</a> - <a href='#' OnClick='ShowInfo(/*add your 2 parameters here*/)'>Info</a>");
    } s 
```

# css - CSS3自定义单选按钮问题

> ID：15285550
> 
> 赞同：0
> 
> 时间：2013-03-08T02:14:35.447
> 
> 标签：css, internet-explorer-7, radio-button

我按照 wittysparks.com 创建自定义单选按钮一切正常，但如果在标签中添加更多内容将显示未使用的图像。

像下面这样的代码正在工作查找。

```
 <input id="radio2" name="groupradio" type="radio" value="Radio 2" tabindex="6" /><label     for="radio2">I am Group Radio 2 </br>
</label> 
```

在代码中添加更多内容后会出现问题。

```
 <input id="radio2" name="groupradio" type="radio" value="Radio 2" tabindex="6" /><label    for="radio2">I am Group Radio 2 </br>
I am Group Radio 2 </br>
I am Group Radio 2 </br>
I am Group Radio 2 </br>
I am Group Radio 2 </br>
I am Group Radio 2 </br>
I am Group Radio 2 </br>
I am Group Radio 2 </br>
I am Group Radio 2 </br>
</label> 
```

这是我的CSS

```
/*!
 * WittySparks - (c) Sravan Kumar, freely distributable, can modify as per your needs.
 * WittySparks.com.com
 */
input[type='radio'], input[type='checkbox']{opacity:0;position:absolute;filter:alpha(opacity=0);margin:5px 0 0 5px}
input[type='radio']:focus+label, input[type="checkbox"]:focus+label{color:#C30}
input[type="checkbox"]+label, input[type="radio"]+label{background:url('wittysparks_checkbox_radio.png') left top no-repeat;position:relative;margin:0;padding:0 0 0 50px;cursor:pointer;line-height:43px;min-height:43px;display:inline-block;z-index:0;font-size:30px;font-weight:bold}
input[type="checkbox"]+label{background-position:0 0}
input[type="radio"]+label{background-position:0 -200px}
input[type='checkbox']:checked+label{background-position:0 -100px}
input[type='radio']:checked+label{background-position:0 -300px}
input[type='checkbox']:disabled+label{background-position:0 -400px;color:#999}
input[type='radio']:disabled+label{background-position:0 -600px;color:#999} 
input[type='checkbox']:disabled:checked+label{background-position:0 -500px;color:#999}
input[type='radio']:disabled:checked+label{background-position:0 -700px;color:#999} 
```

教程网站。“ [http://www.wittysparks.com/2012/04/17/pure-css3-custom-checkbox-and-radio-buttons-with-sprite-image/](http://www.wittysparks.com/2012/04/17/pure-css3-custom-checkbox-and-radio-buttons-with-sprite-image/) ”

更新 jsfiddle

[http://jsfiddle.net/shivanraptor/fdEHj/1/](http://jsfiddle.net/shivanraptor/fdEHj/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T10:30:25.410

为了显示我自己的单选按钮而不是根据浏览器更改的默认按钮，我使用了这个：[http ://www.screwdefaultbuttons.com/](http://www.screwdefaultbuttons.com/)

它适用于 IE6 +、Chrome、Firefox、Safari...

[http://www.screwdefaultbuttons.com/](http://www.screwdefaultbuttons.com/)

包括标题中的脚本：

```
<script src="js/jquery.screwdefaultbuttonsV2.min.js" ></script> 
```

css

```
 $('input:radio').screwDefaultButtons({ 
    image: "url(images/radio.jpg)",
    width:   85,
    height:  85
});

.styledRadio {
/* Your styles here */
}

.styledCheckbox {
    /* Your styles here */

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:25:29.083

CSS 本身受标签高度的影响。如果标签的高度减少到一两行，问题就消失了。

尝试通过CSS分离标签的效果。

# css - 如何在 Internet Explorer 中删除下标 2 后的多余空格

> ID：15285551
> 
> 赞同：1
> 
> 时间：2013-03-08T02:14:37.340
> 
> 标签：css, internet-explorer, subscript

我正在建立一个经常使用下标 2 的网站，例如 H₂O。2 是使用 HTML 代码 2 而不是标签创建的。

这就是问题所在，在 Internet Explorer 中 2 之后有一个很大的空格。如何使用 #css 解决此问题？

IE9中的网站截图

![在此处输入图像描述](../Images/2552f610c7b8ee64d5c11697ddfb4bd5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T06:11:58.107

这是字体问题。没有完美的解决方案，因为[页面](http://dvm1source.com/h2o-for-fitness)使用[SUBSCRIPT TWO](http://www.fileformat.info/info/unicode/char/2082/index.htm)字符（原则上很好）——不是使用任何 HTML 代码，而是使用 UTF-8 编码的字符（很好）并且它使用 Open Sans 字体，这是一个不错的字体，但不包含 SUBSCRIPT TWO。这意味着浏览器将使用一些备用字体，而 IE 似乎使用了一种字体，其中 SUBSCRIPT TWO 的字形在图形右侧有很多空间（您可以通过用鼠标绘制字符来看到这一点；备用字体在这种情况下，在 IE 中似乎类似于 Batang）。

有两种方法可以解决这个问题。

`font-family`您可以在声明中列出您首选的备用字体。在您的 CSS 规则中`body`，`font-family: 'Open Sans'`您可以使用例如

```
font-family: 'Open Sans', 'Calibri', 'Arial Unicode MS', 'DejaVu Sans', 'FreeSans',
  'Lucida Sans Unicode'; 
```

很难说应该放入列表中的内容和顺序，但上面应该涵盖了几乎所有的浏览情况，并且呈现结果可以容忍。仍然存在混合不同字体的字形的问题，所以结果不会*很好*。为了获得最佳结果，下标应该来自与其他字符相同的字体。

另一种方法是使用不同的基本字体而不是 Open Sans。在 Google 字体中，您可能会考虑 Source Sans Pro。这是一个不错的无衬线字体系列，有许多字体（粗细从 200 开始），它包含 SUBSCRIPT TWO；您需要在 Google Web Fonts 中选择“Latin Extended (latin-ext)”复选框，否则不会包含 SUBSCRIPT TWO。

# ios - 在应用程序退出之前，系统不会放弃磁盘空间？

> ID：15285557
> 
> 赞同：2
> 
> 时间：2013-03-08T02:15:16.933
> 
> 标签：ios, nsfilemanager

我们正在为 iOS 5.1+ 开发一个应用程序，用于下载和管理大型媒体文件，并且发现系统似乎没有放弃在[NSFileManager](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)实例上使用[removeItemAtPath:error](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000305-SW18)时放弃的磁盘空间。

例如：

*   我们从 5 GB 的可用空间开始（如“设置”应用程序下的“常规”->“使用”所示），该应用程序显示为使用 50MB。
*   用户下载一个 500 MB 的视频。设置现在显示 4.5 GB 可用。（我们的应用程序现在显示使用 550MB。）
*   用户在观看后选择删除视频，使用我们应用程序中的删除过程。设置仍然显示只有 4.5 GB 可用，但我们的应用程序现在显示恢复使用 50MB。
*   多次退出并恢复应用程序，设置中不会看到任何更改。
*   强制应用退出，设置会立即更新可用空间，说 5GB 再次可用。

是什么导致系统看似缓存已删除的文件？有什么方法可以告诉它不要，或者让系统释放磁盘空间？

# android - Google Maps Android API v2 在中国的大多数安卓手机上都可用吗？

> ID：15285558
> 
> 赞同：1
> 
> 时间：2013-03-08T02:15:30.990
> 
> 标签：android, localization, google-maps-android-api-2

我正在尝试使用 google maps android api 2 开发一些 android 应用程序。但似乎它正在使用 google play 服务，大多数中国 android 手机（包括仿冒手机）甚至没有 google play。如果要在中国部署应用程序，我可以在我的应用程序中使用谷歌地图吗？

# php - PHP if file_exists() 语句在来自 URL 的 file_get_content() 上失败

> ID：15285560
> 
> 赞同：-1
> 
> 时间：2013-03-08T02:15:38.953
> 
> 标签：php, if-statement, file-get-contents, file-exists

我有一个非常简单的功能来读取 URL 图像文件并将其保存在服务器上。

```
function o99_download_shot_binary(){

        $url = esc_url_raw( o99_get_content_link() ); // function returns http:// url
        $img = $uploads['basedir'] . '/tmp/' . uniqid() . '.jpeg'; // name and location
        file_put_contents($img, file_get_contents($url)); 
    } 
```

IT 工作正常，但有时 o99_get_content_link() 返回无效的 URL，因此保存了一个空图像，所以我用 if 语句进行了简单的检查并分隔了一个衬里：

```
function o99_download_shot_binary(){

    $url = esc_url_raw( o99_get_content_link() ); // function returns http:// url
    $img = $uploads['basedir'] . '/tmp/' . uniqid() . '.jpeg'; // name and location
    $file = file_get_contents($url);
     if (file_exists($file)) {
        file_put_contents($img, $file); 
     }
} 
```

但是这样做，没有图像被保存。

所以我尝试将 if 语句更改为

```
if ( $file) { file_put_contents($img, $file); } 
```

..现在它可以工作了。

现在一切正常，您可能想知道我为什么要发布这个问题，好吧，因为我也想了解我在做什么 - 我的问题很简单：

为什么`file_exists($file)`检查失败？

我对自己（可能是错误的）假设这是因为 file_exists() 只检查本地文件系统。如果是这种情况，那么是否有专门的功能来检查 URL 是否存在？或任何其他更好的解决方案供将来参考？

**编辑我**（根据评论请求）

Var_dump() 是一个二进制字符串：

```
string(51238) "����JFIF��������BZ�|su��{��3�_�R��[J��z���K�^��g�/��9���|*�F��W~�&gt;tχ�&gt;��� �&amp;��?�~0�f�����[��i���R��_���g~�_��Ɵ�#����.5�x+�_ u��-�ٿ�L����ƺV��  ... ... ... 
```

但这是可以预测的，就像我在原始问题中所说，文件保存正常，这只是为什么 file_exists() 检查失败的问题，以及是否有更好的方法来对二进制远程文件执行检查网址...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:19:33.713

`$file = file_get_contents($url)`表示`$file`包含一个字符串，文件的内容。除非文件的内容恰好是存在的文件的路径，否则您不会保存任何内容。

您想检查`if( file_exists($url))`并保留以前的单线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:10:46.380

`file_exists()`需要一条路径，例如`/home/user/foo.txt`或`C:\foo.txt`。您正在向它提供文件的内容，而不是文件的本地路径，因此它不会返回真值（当然，除非文件的内容是现有文件的有效文件路径......不要把水弄混，但必须说:)）。

# ios - 在 iOS 模拟器上用 App 打开文件？

> ID：15285561
> 
> 赞同：2
> 
> 时间：2013-03-08T02:15:42.240
> 
> 标签：ios, objective-c

如何使用正在开发的 iOS 应用程序打开文件（它是 XML 文件）。我想测试我的：`UIApplicationLaunchOptionsURLKey`实现。我该怎么做呢？iOS Simulator 没有附带 Mail 或任何东西，所以我对测试这种功能一无所知。有任何想法吗？

我在 Xcode 的 Target Properties 位下做了 Document Types，所以我很确定这是对的：

```
<dict>
    <key>CFBundleTypeIconFiles</key>
    <array>
        <string>icon</string>
    </array>
    <key>CFBundleTypeName</key>
    <string>XML File</string>
    <key>LSItemContentTypes</key>
    <array>
        <string>public.XML</string>
    </array>
</dict> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-02T18:19:04.770

您只需将文件拖放到模拟器上即可。如果您的应用注册了该文件类型，您的应用将打开并处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T02:32:08.493

使用 Apple 的[示例应用程序](http://developer.apple.com/library/ios/#samplecode/DocInteraction/Introduction/Intro.html)，您可以在此应用程序中包含您的文件，它可以让您执行“打开”，您可以在其中选择您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T02:33:02.737

你想要看起来像这样的东西：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>XML File</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.xml</string>
        </array>
    </dict>
</array> 
```

这应该是 Info.plist 文件中的一项。

# asp.net-mvc - 为不同监视器显示单独视图的 Web 应用程序

> ID：15285563
> 
> 赞同：0
> 
> 时间：2013-03-08T02:15:52.887
> 
> 标签：asp.net-mvc, silverlight, web, multiple-monitors

我正在研究一个涉及在不同显示器上显示不同数据的项目。本质上它就像一个游戏节目应用程序。这个想法是教师将他/她的笔记本电脑插入投影仪并启动应用程序。投影仪通过倒数计时器显示问题。笔记本电脑屏幕显示问题和倒数计时器，还显示问题的答案以及学生列表，以便教师选择正确答案的学生，以便保持分数。

我认为它作为一个窗口窗体应用程序会相当简单，但我想让它基于网络，这样我们就不必担心教师机器的规格是否兼容，向各个教师分发更新，等等

看起来 Silverlight 可能是基于这篇[文章](https://stackoverflow.com/questions/267137/multiple-screens-monitors-with-silverlight)的可能解决方案，但我想知道是否还有其他选择。此外，由于我处于研究阶段，因此我可以灵活地查看不同的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:37:26.133

您可以通过拥有两个不同的页面来使用 ASP.Net，一个用于笔记本电脑屏幕，另一个用于投影仪，并让这两个页面通过 SignalR 与服务器通信。

不过，老师需要手动将页面移动到正确的监视器上。

# python - 海德静态页面站点生成器 - 从命令行运行 hyde 命令的问题

> ID：15285564
> 
> 赞同：0
> 
> 时间：2013-03-08T02:15:57.230
> 
> 标签：python, pip, hyde

我用 pip 安装了 Hyde。我可以在 /usr/local/share/python 中看到 hyde。但是当我从命令行运行 hyde 时，我收到“Bash - 命令未找到错误”。

我在 Mac OSX (ML) 和 python 2.7.3

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:37:38.700

我需要在我的 PATH 中有 /usr/local/share/python。

# sql-server - SSIS 条件拆分多个真实路径

> ID：15285566
> 
> 赞同：3
> 
> 时间：2013-03-08T02:16:10.333
> 
> 标签：sql-server, ssis

我在 dtsx 包中有一个数据流，可以处理我需要处理的所有数据。最后，我需要执行一些清理任务。例如，假设以下结构：

![我想做的事](../Images/44053857e2f18d73a7b39f23be1e3d4e.png)

如果所有 3 个案例的记录都为真，那么我想运行所有三个 OLE DB 命令。如果记录仅适用于案例 1，则它应该只运行案例 1。

我可以通过多播和 3 个单独的条件拆分（如下所示）来做到这一点，但我希望有一种更清洁的方式。有任何想法吗？

![可能的替代方案。 有没有更好的办法？](../Images/a1399593f93a595108e08df1af649480.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T04:25:11.067

使用**多播和三个条件拆分**是最容易实现的，也可能是最容易理解的。

**设置为具有三个输出的转换的脚本组件**可能是下一个最容易实现的 - 但它将涉及大量设置和一定程度的编码。数据流看起来会比较漂亮：

![在此处输入图像描述](../Images/b2aae73339b70616f812f79994f89395.png)

对于每个输出，确保将其设置`Synchronous Input ID`为`None`（以便您可以控制何时创建行）；那么您需要在每个输出中复制每个输入列。脚本代码本身将如下所示：

```
public override void IncomingRows_ProcessInputRow(IncomingRowsBuffer Row)
{
    if (Case1Logic(Row))
    {
        Case1OutputBuffer.AddRow();
        Case1OutputBuffer.ProductId = Row.ProductID;
        Case1OutputBuffer.Name = Row.Name;
        // etc. for all columns
    }
    if (Case2Logic(Row))
    {
        Case2OutputBuffer.AddRow();
        Case2OutputBuffer.ProductId = Row.ProductID;
        Case2OutputBuffer.Name = Row.Name;
        // etc. for all columns
    }
    if (Case3Logic(Row))
    {
        Case3OutputBuffer.AddRow();
        Case3OutputBuffer.ProductId = Row.ProductID;
        Case3OutputBuffer.Name = Row.Name;
        // etc. for all columns
    }
}

private bool Case1Logic(IncomingRowsBuffer Row)
{
    // Whatever the Case 1 logic involves
}
private bool Case2Logic(IncomingRowsBuffer Row)
{
    // Whatever the Case 2 logic involves
}
private bool Case3Logic(IncomingRowsBuffer Row)
{
    // Whatever the Case 3 logic involves
} 
```

当人们决定要更改列时，请保持最新状态！

如果这对您来说还不够麻烦，您可以编写自己的**自定义转换**。如何做到这一点的血淋淋的细节在[MSDN](http://msdn.microsoft.com/en-us/library/ms135931.aspx)中；可以说会涉及**更多**的代码。对于 SSIS 如何处理缓冲区管理，您还将了解比您想知道的更多，这反过来可以解释为什么开箱即用的条件拆分不允许您将同一行发送到多个输出。

最后，如果您想要一个看起来非常丑陋的解决方案，同时也是维护的噩梦，请尝试**为每个案例组合构建一个带有一个输出的条件拆分**。在您的每个 OLE 目标前面放置一个 Union All 转换。将`Cases 1, 2 and 3`输出定向到三向多播，其中一个多播输出到三个联合所有转换中的每一个。条件拆分的`Cases 1 and 2`、`Cases 2 and 3`和`Cases 1 and 3`输出将分别进行双向多播转换（这反过来将馈送到适当的联合全部），而`Case 1`和`Case 2`输出`Case 3`将直接转到适当的联合全部。它看起来像这样：

![在此处输入图像描述](../Images/b3ecd8214fdc459f0fd4e91cbccfc89d.png)

**总而言之**，我认为您最初的想法是最简单的，也可能是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:27:01.143

根据您对 C# 或 VB 的熟悉程度，您可以编写自己的转换，该转换本质上是将多播和条件拆分合二为一。将脚本组件添加到数据流中，它会询问您它是源、转换还是目标。选择转换，添加您的输入和三个输出，然后从那里开始。祝你好运！

# android - 从eclipse运行应用程序时Android手机重启

> ID：15285569
> 
> 赞同：4
> 
> 时间：2013-03-08T02:16:21.113
> 
> 标签：android, eclipse, restart

我是android编程的陌生人。

当我从 Eclipse 运行应用程序时，我的手机每三次重启一次。

（我总是在活动设备上启动应用程序，而不是在 AVD 上。）

我搜索了很多网站，但没有解决方案。

我试过了：

1.  切换 USB 端口
2.  项目 -> 清理（在 Eclipse 中）
3.  删除应用程序并重新安装
4.  清理临时文件和注册表
5.  重新安装 Eclipse 和 Android SDK

然而，它们并不是解决这个问题的方法。

这是我的信息：

*   Eclipse 版本：ADT（内部版本 v21.1.0-569685）
*   手机操作系统：ICS (4.0.3)
*   手机型号：LG Prada 3.0
*   扎根：是
*   ROM：不使用自定义ROM

有人知道吗？

# android - 3g 上的 JSON 解析导致连接被拒绝

> ID：15285581
> 
> 赞同：0
> 
> 时间：2013-03-08T02:17:21.300
> 
> 标签：android, json, wifi, 3g, 4g

我有这个问题导致我把头撞在墙上。我正在编写一个报纸应用程序，它从数据库中解析 JSON 格式的数据并显示它。该应用程序运行良好，可以在 WiFi 和 4G 上传输数据，但在 3G 上会卡住。大多数情况下，在 3G 上抓取数据需要 30 秒到 1 分钟，而在 WiFi 上只需要 1 到 2 秒。我经常收到一条警告消息，说明：HttpHostConnectException：连接被拒绝。我知道该站点运行良好并且不会引起问题，因为我可以在 WiFi 和 4G 上正常查询，同时从桌面导航也没有问题。作为另一个测试，我借了我的同事MiFi，它在我们地区只有3G，并将我的设备连接到它，它可以很好地传递数据，虽然它只是3G回到互联网。所以在看了这个，并试图找到解决方案之后，我得出的结论是，也许我没有做正确的事情。据我所知，一切都很好，但我不是专家。对此的任何见解将不胜感激。

概括 -

*   4G = 工作
*   WiFi = 工作
*   3G = 极慢
*   3G via WiFi（MiFi on 3G）=Works

    公共 JSONObject makeHttpRequest（字符串 url，字符串方法，列表参数）{

    ```
    // Making HTTP request
    try {

         if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);
            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
            System.out.println("---GET--- Now grabing GET DATA");
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj; 
    ```

    }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:21:43.230

我的 MiFi 上的 3G 是否同样慢？否则，听起来您是在说您的进程在连接缓慢的地方失败。

你提到3G需要> 30s。你在应用引擎上运行吗？GAE 对交易需要多长时间有一个硬性限制——我相信这个限制是 30 秒。

如果你在你的服务器上添加了一个延迟，这样即使是 Wifi 请求也需要与现在进行 3G 测试一样长的时间 - 以验证是否是导致失败的时间。

另外，我认为那些 3G 的结果听起来很差。我不知道您要检索多少数据，但听起来确实不需要那么长时间。因此，也许您的 3G 连接只是质量较差的连接（而 MiFi 可能是更好的 3G 连接）。

# android - 有没有办法以编程方式发现有关 Android 设备 GPU 的细节？

> ID：15285585
> 
> 赞同：5
> 
> 时间：2013-03-08T02:17:44.770
> 
> 标签：android

我搜索了包括[developer.android.com](http://developer.android.com)在内的互联网。我已阅读此 Stack Overflow 帖子：[如何查询 android 设备硬件信息](https://stackoverflow.com/questions/11497319/how-to-query-android-device-hardware-info)。我知道 System.getProperties()。

我的问题是：有没有办法以编程方式发现特定 Android 设备上 GPU 的特定信息？至少有可能在设备上获得 GPU 的品牌和型号吗？

或者，我是否应该只使用 Build 类的 MANUFACTURER 和 MODEL 字段来推断该特定设备上使用的 GPU？

关于这个问题，我的目的是找到一种方法来识别运行我的应用程序的设备的图形处理能力，以便我可以相应地调整我的应用程序的图形处理需求。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:32:32.613

您可以使用`glGetString()`with`GL_VENDOR`来确定 GPU 供应商名称并`GL_RENDERER`确定 GPU 名称。

查看[文档](http://www.opengl.org/sdk/docs/man/xhtml/glGetString.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T17:09:58.830

试试这个：我将渲染器和供应商信息放在我的 GLSurfaceView.Renderer 中的 volatile 变量中，在 GUI 线程上读取：

```
public volatile static String vendor, renderer;

@Override
public void onSurfaceCreated(GL10 glUnused, EGLConfig config) 
{
    vendor = GLES20.glGetString(GLES20.GL_VENDOR);
    renderer = GLES20.glGetString(GLES20.GL_RENDERER); 
```

# javascript - 回调一个类实例化另一个发出 AJAX 请求的类

> ID：15285586
> 
> 赞同：1
> 
> 时间：2013-03-08T02:17:44.920
> 
> 标签：javascript, ajax, oop, callback, prototype

这是一个有点难以言说的问题。以下是基本流程：

1.  一个类被实例化。
2.  然后这个类的构造方法实例化另一个类
3.  这个新类的构造方法使用全局对象的方法来发出 AJAX 请求。

完成 ajax 请求后，我想在步骤 #1 中调用类上的方法。什么是实现这一目标的好方法？

这是我正在尝试做的一个 jsFiddle：http: [//jsfiddle.net/twiz/3PRma/4/](http://jsfiddle.net/twiz/3PRma/4/)

相同的代码如下：

```
//The global object that makes an ajax call
///////////////////////////////////////////////
globallyDoStuff={
    somethingWithACallback: function(url,callback){
        $.get(url,{},function(){
            // WHAT do I do here to call the 
            // "doSomethingToAllTheClasses" method?
        });
    }
}

// A class used to hold an array of classes
///////////////////////////////////////////////
var SomeClassCollection = function(arrayOfURLs){
    this.arrayOfClasses=[];
    for(var i=0;i<arrayOfURLs.length;i++){

        this.addSomeClass(arrayOfURLs[i]);
    }
};
SomeClassCollection.prototype={
    addSomeClass: function(theUrl){
        this.arrayOfClasses.push(new SomeClass(theUrl));
    },
    doSomethingToAllTheClasses: function(){
        // I WANT TO CALL THIS EACH TIME AN AJAX REQUEST IS COMPLETED
        console.log(this.arrayOfClasses);
    }
}

//The class that calls the global ajax object's method
///////////////////////////////////////////////
var SomeClass = function(theUrl){
    this.globalAction(theUrl);
};
SomeClass.prototype={
    globalAction: function(theUrl){
        globallyDoStuff.somethingWithACallback(theUrl);
    }
}

//List of urls
///////////////////////////////////////////////
var urls=[
    "/echo/json/",
    "/echo/json/",
    "/echo/json/",
    "/echo/json/",
    "/echo/json/",
    ]

//Create the instance
///////////////////////////////////////////////
var someInstance = new SomeClassCollection(urls); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:26:02.027

在我看来，这是您的体系结构的一个更广泛的问题，但是这是可行的。

`$.get`返回一个 XHR 对象，您可以使用返回值并挂钩它的“成功”。

您可以更改`globalAction`为

```
globalAction: function(theUrl){
    return globallyDoStuff.somethingWithACallback(theUrl);
} 
```

然后将`SomeClass`构造函数更改为

```
var SomeClass = function(theUrl){
    var result = this.globalAction(theUrl);
    //note, you now fill the object here, in the returned part
    //when a constructor returns an object it behaves like a normal function
    return {callRes:result,...};
}; 
```

然后将 addSomeClass 更改为

```
addSomeClass: function(theUrl){
        var addedClass = new SomeClass(theUrl);
        this.arrayOfClasses.push(addedClass);
        addedClass.callRes.done(function(){
           //your code executes here! EACH TIME AN AJAX REQUEST IS COMPLETED
        }
}, 
```

请注意，您还可以挂钩`jQuery`全局`ajaxComplete`方法：

```
$.ajaxComplete(function(){
   //this executes whenever ANY AJAX request is complete!
} 
```

您可以向其添加`if`检查，请参阅[API](http://api.jquery.com/ajaxComplete/)

# spring - 第一页加载时出现 Spring Data 转换器错误，之后工作正常

> ID：15285589
> 
> 赞同：0
> 
> 时间：2013-03-08T02:17:52.920
> 
> 标签：spring, exception, spring-data, spring-data-mongodb

我在我的 Spring MVC 应用程序中使用 spring-data-mongodb 依赖项。到目前为止它工作正常，但我需要将一个 Class 实例属性添加到我的域对象之一。由于 Mongo 不直接支持持久化 Class 实例，因此我为这种情况添加了自定义转换器。我按照这里的说明操作：http: [//static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/mongo.core.html#mongo.custom-converters.writer](http://static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/mongo.core.html#mongo.custom-converters.writer)

所以我的转换器看起来像：

```
public class ClassReadConverter implements Converter<DBObject, Class> {
    public Class convert(DBObject source){
        Class entityClass = null;
        try{
            entityClass = Class.forName((String) source.get("entityClass"));
        }catch (Exception e){ 
        }
        return entityClass;
    }
}

public class ClassWriteConverter implements Converter<Class, DBObject> {
    public DBObject convert(Class entityClass) {
        DBObject dbo = new BasicDBObject();
        dbo.put("entityClass", entityClass.getName());
        return dbo;
    }
} 
```

我使用以下方法注册了这些转换器：

```
<mongo:mapping-converter>
    <mongo:custom-converters>
        <mongo:converter>
            <bean class="com.test.util.ClassReadConverter"/>
        </mongo:converter>
        <mongo:converter>
            <bean class="com.test.util.ClassWriteConverter"/>
        </mongo:converter>
    </mongo:custom-converters>
</mongo:mapping-converter>

<!-- MongoTemplate instance -->
<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
    <constructor-arg name="mongoConverter" ref="mappingConverter"/>
</bean> 
```

现在的问题是，当应用程序启动并且我第一次在应用程序中加载第一页时，我得到了一个异常。如果我重新加载/重新提交该页面，一切正常。之后我访问的每个页面也都没有问题。

这是写异常：

```
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
java.lang.SecurityException: Can not make a java.lang.Class constructor accessible
at java.lang.reflect.AccessibleObject.setAccessible0(AccessibleObject.java:118)
at java.lang.reflect.AccessibleObject.setAccessible(AccessibleObject.java:108)
at org.springframework.util.ReflectionUtils.makeAccessible(ReflectionUtils.java:437)
at org.springframework.data.mapping.PreferredConstructor.<init>(PreferredConstructor.java:54)
at org.springframework.data.mapping.model.PreferredConstructorDiscoverer.buildPreferredConstructor(PreferredConstructorDiscoverer.java:106)
at org.springframework.data.mapping.model.PreferredConstructorDiscoverer.<init>(PreferredConstructorDiscoverer.java:74)
at org.springframework.data.mapping.model.BasicPersistentEntity.<init>(BasicPersistentEntity.java:73)
at org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity.<init>(BasicMongoPersistentEntity.java:60)
at org.springframework.data.mongodb.core.mapping.MongoMappingContext.createPersistentEntity(MongoMappingContext.java:74)
at org.springframework.data.mongodb.core.mapping.MongoMappingContext.createPersistentEntity(MongoMappingContext.java:36)
at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:269)
at org.springframework.data.mapping.context.AbstractMappingContext$PersistentPropertyCreator.doWith(AbstractMappingContext.java:411)
at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:570)
at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:281)
at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:190)
at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:159)
at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:69)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:333)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeCollectionInternal(MappingMongoConverter.java:517)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.createCollection(MappingMongoConverter.java:477)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:408)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:376)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:363)
at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:195)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:363)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:442)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:376)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:363)
at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:195)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:363)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:334)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.write(MappingMongoConverter.java:299)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.write(MappingMongoConverter.java:72)
at org.springframework.data.mongodb.core.MongoTemplate.doSave(MongoTemplate.java:804)
at org.springframework.data.mongodb.core.MongoTemplate.save(MongoTemplate.java:750)
at org.springframework.data.mongodb.repository.support.SimpleMongoRepository.save(SimpleMongoRepository.java:71)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:334)
at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:319)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
at $Proxy51.save(Unknown Source)
at com.test.service.saveContent(ContentServiceImpl.java:42)
at com.test.web.controller.ContentController.create(ContentController.java:39)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662)
Mar 7, 2013 5:50:41 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jersey-servlet threw exception
java.lang.SecurityException: Can not make a java.lang.Class constructor accessible
at java.lang.reflect.AccessibleObject.setAccessible0(AccessibleObject.java:118)
at java.lang.reflect.AccessibleObject.setAccessible(AccessibleObject.java:108)
at org.springframework.util.ReflectionUtils.makeAccessible(ReflectionUtils.java:437)
at org.springframework.data.mapping.PreferredConstructor.<init>(PreferredConstructor.java:54)
at org.springframework.data.mapping.model.PreferredConstructorDiscoverer.buildPreferredConstructor(PreferredConstructorDiscoverer.java:106)
at org.springframework.data.mapping.model.PreferredConstructorDiscoverer.<init>(PreferredConstructorDiscoverer.java:74)
at org.springframework.data.mapping.model.BasicPersistentEntity.<init>(BasicPersistentEntity.java:73)
at org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity.<init>(BasicMongoPersistentEntity.java:60)
at org.springframework.data.mongodb.core.mapping.MongoMappingContext.createPersistentEntity(MongoMappingContext.java:74)
at org.springframework.data.mongodb.core.mapping.MongoMappingContext.createPersistentEntity(MongoMappingContext.java:36)
at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:269)
at org.springframework.data.mapping.context.AbstractMappingContext$PersistentPropertyCreator.doWith(AbstractMappingContext.java:411)
at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:570)
at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:281)
at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:190)
at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:159)
at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:69)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:333)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeCollectionInternal(MappingMongoConverter.java:517)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.createCollection(MappingMongoConverter.java:477)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:408)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:376)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:363)
at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:195)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:363)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:442)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:376)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:363)
at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:195)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:363)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:334)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.write(MappingMongoConverter.java:299)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.write(MappingMongoConverter.java:72)
at org.springframework.data.mongodb.core.MongoTemplate.doSave(MongoTemplate.java:804)
at org.springframework.data.mongodb.core.MongoTemplate.save(MongoTemplate.java:750)
at org.springframework.data.mongodb.repository.support.SimpleMongoRepository.save(SimpleMongoRepository.java:71)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:334)
at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:319)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
at $Proxy51.save(Unknown Source)
at com.test.service.ContentServiceImpl.saveContent(ContentServiceImpl.java:42)
at com.test.web.controller.ContentController.create(ContentController.java:39)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

读取异常：

```
java.lang.SecurityException: Can not make a java.lang.Class constructor accessible
at java.lang.reflect.AccessibleObject.setAccessible0(AccessibleObject.java:118)
at java.lang.reflect.AccessibleObject.setAccessible(AccessibleObject.java:108)
at org.springframework.util.ReflectionUtils.makeAccessible(ReflectionUtils.java:437)
at org.springframework.data.mapping.PreferredConstructor.<init>(PreferredConstructor.java:54)
at org.springframework.data.mapping.model.PreferredConstructorDiscoverer.buildPreferredConstructor(PreferredConstructorDiscoverer.java:106)
at org.springframework.data.mapping.model.PreferredConstructorDiscoverer.<init>(PreferredConstructorDiscoverer.java:74)
at org.springframework.data.mapping.model.BasicPersistentEntity.<init>(BasicPersistentEntity.java:73)
at org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity.<init>(BasicMongoPersistentEntity.java:60)
at org.springframework.data.mongodb.core.mapping.MongoMappingContext.createPersistentEntity(MongoMappingContext.java:74)
at org.springframework.data.mongodb.core.mapping.MongoMappingContext.createPersistentEntity(MongoMappingContext.java:36)
at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:269)
at org.springframework.data.mapping.context.AbstractMappingContext$PersistentPropertyCreator.doWith(AbstractMappingContext.java:411)
at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:570)
at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:281)
at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:190)
at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:69)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:203)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readCollectionOrArray(MappingMongoConverter.java:746)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.access$100(MappingMongoConverter.java:72)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$MongoDbPropertyValueProvider.getPropertyValue(MappingMongoConverter.java:954)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.getValueInternal(MappingMongoConverter.java:710)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$1.doWithPersistentProperty(MappingMongoConverter.java:245)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$1.doWithPersistentProperty(MappingMongoConverter.java:235)
at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:195)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:235)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:209)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$MongoDbPropertyValueProvider.getPropertyValue(MappingMongoConverter.java:956)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.getValueInternal(MappingMongoConverter.java:710)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$1.doWithPersistentProperty(MappingMongoConverter.java:245)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$1.doWithPersistentProperty(MappingMongoConverter.java:235)
at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:195)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:235)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:209)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readCollectionOrArray(MappingMongoConverter.java:743)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.access$100(MappingMongoConverter.java:72)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$MongoDbPropertyValueProvider.getPropertyValue(MappingMongoConverter.java:954)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.getValueInternal(MappingMongoConverter.java:710)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$2.doWithAssociation(MappingMongoConverter.java:254)
at org.springframework.data.mapping.model.BasicPersistentEntity.doWithAssociations(BasicPersistentEntity.java:207)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:251)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:209)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:173)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:169)
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:72)
at org.springframework.data.mongodb.core.MongoTemplate$ReadDbObjectCallback.doWith(MongoTemplate.java:1820)
at org.springframework.data.mongodb.core.MongoTemplate.executeFindOneInternal(MongoTemplate.java:1503)
at org.springframework.data.mongodb.core.MongoTemplate.doFindOne(MongoTemplate.java:1309)
at org.springframework.data.mongodb.core.MongoTemplate.findOne(MongoTemplate.java:489)
at org.springframework.data.mongodb.core.MongoTemplate.findOne(MongoTemplate.java:484)
at org.springframework.data.mongodb.repository.query.AbstractMongoQuery$SingleEntityExecution.execute(AbstractMongoQuery.java:202)
at org.springframework.data.mongodb.repository.query.AbstractMongoQuery.execute(AbstractMongoQuery.java:90)
at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:313)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204) 
```

为什么我只在一个页面上得到这个问题，而且只在第一次出现？它就像没有实例化的东西，然后突然一切都很好。任何帮助表示赞赏！

我正在使用 1.1.1.RELEASE 版本，甚至尝试使用 1.2.0.BUILD-SNAPSHOT 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:07:44.133

我尝试使用 Spring Data MongoDB 版本 1.2.0.RELEASE 运行您的代码并且运行良好。为了清楚起见 - 我的文档类是：

```
@Document
public class User {
    @Id
    private ObjectId id;
    private String name;
    private Class clazz;

    public User(String name) {
        this.id = new ObjectId();
        this.name = name;
        this.clazz = this.getClass();
    }
} 
```

它工作得很好——我只用单元测试试过了。也许它是用新的（1.2.0.RELEASE）版本修复的？

# python - 如何在 OS X 10.6.8 的终端中设置默认 Python 版本？

> ID：15285592
> 
> 赞同：21
> 
> 时间：2013-03-08T02:18:32.547
> 
> 标签：python, macos

我刚刚在运行 OS X 10.6.8 的 Mac 上下载了 python 2.7。以前安装的python版本是2.6。

当我`python`在终端中输入时，它会打开 python 2.6 版。我希望它打开 python 2.7

如何让 Python 2.7 默认打开？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-08T02:43:02.683

默认情况下，OS X 上 Python 2.x 的 python.org 安装程序会修改 shell 配置文件（对于标准 shell，如`bash`和`csh`），以将其框架`bin`目录添加到 shell 路径的前面。假设您在安装期间没有取消选择该选项，那么您的`.bash_profile`文件中现在应该有以下内容。

```
# Setting PATH for Python 2.7
# The orginal version is saved in .profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH 
```

但是这个配置文件只有在你启动一个新的终端窗口时才会默认执行；它不适用于现有的终端会话。因此，请确保您打开一个新的，然后重试。如果您使用不同的 shell，您可能需要修改该 shell 的启动以执行等效操作。

默认情况下，OS X 上 Python 3.x 的 python.org 安装程序不选择 shell 脚本修改选项。您可以在安装时启用它，也可以稍后在文件夹中`Update Shell Profile.command`的相应`Python x.x`文件夹中运行该`Applications`文件。或者您可以手动编辑正确的配置文件。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T02:35:47.070

更简单的解决方案是通过 MacPorts 安装它：

```
sudo port install python_select
port search python # Search for version you are looking for
sudo port install python27
sudo port select --set python python27 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-08T02:30:37.823

将以下内容添加到您的`~/.bash_profile`

```
# Setting PATH for Python 2.7
PATH="/path/to/your/python2.7/bin:${PATH}"
export PATH 
```

保存文件并重新打开终端。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-09-03T04:30:18.093

因为我的账号没有管理员权限。我解决了在`~/.zshrc`or中设置配置`~/.bashrc`。现在我举一个例子，假设你安装了 python 3.7。如果您安装了其他版本，只需更改版本即可。

1.  `~/.zshrc`解决方案

```
 $ echo "alias python=/usr/local/bin/python3.7" >> ~/.zshrc
  $ source ~/.zshrc 
```

2.  `~/.bashrc`解决方案

```
 $ echo "alias python=/usr/local/bin/python3.7" >> ~/.bashrc
    $ source ~/.bashrc 
```

3.  检查结果

```
 $ python --version   
    # print result Python 3.7.1 
```

其他解决方案请参考：[https ://opensource.com/article/19/5/python-3-default-mac](https://opensource.com/article/19/5/python-3-default-mac)

# javascript - 在画布上旋转移动对象

> ID：15285595
> 
> 赞同：0
> 
> 时间：2013-03-08T02:18:41.647
> 
> 标签：javascript, html, canvas

我正在尝试根据它的旋转属性绘制一个对象，但是当对象移动时它似乎会感到困惑。

```
 ctx.save();
    ctx.translate(this.width * 0.5, this.height*0.5);
    ctx.rotate(DegToRad(45));
    ctx.translate(-this.width*0.5,-this.height*0.5);
    ctx.drawImage(this.img, this.spriteOffset, 0, this.width, this.height, this.x, this.y,this.width,this.height);
    ctx.restore(); 
```

图像被旋转 45 度绘制，但它现在向左下方向移动，此时对象应该只向下移动。通过增加 this.y 位置可以简单地处理移动代码。有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:34:22.643

这是因为整个画布正在旋转。

您可以尝试研究像[Kinetic JS](http://kineticjs.com/)这样的框架，它为画布创建了一种 SVG API。

[该站点](http://www.html5canvastutorials.com/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/)还包含大量有关如何使用它的信息，包括[旋转](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-rotation-animation-tutorial/)、过渡、转换以及您在使用它时可能需要的几乎所有其他信息。

这应该非常适合您的需求。

* * *

我认为我也应该提供一个低级的、无框架的选项。基本上，使用原始 javascript 和 HTML 来实现这一点。

现在，正如我理解你的问题一样，你正试图让一个物体（假设一个黑色方块）向下移动并让它旋转。我能想到的在画布中旋转它而不进入*路径地狱*的唯一方法是旋转整个渲染上下文。但是您也可以将图像导入画布，例如透明的黑色菱形（即旋转的同一个正方形）。因此，您将使用单独的画布来渲染正方形旋转的每一步。

基本上是这样的：

```
var canvas2 = document.createElement('canvas'), ctx2 = canvas2.getContext('2d');
//do something with the second canvas
//let's assume the second canvas is the same size as the square
ctx.drawImage(canvas2, squareX, squareY); 
```

[看看我的尝试](http://jsfiddle.net/B1KMusic/QnM8P/)

正如您所看到的，它有点不稳定，但它确实确实完成了问题所要求的工作；它向下移动正方形，然后旋转它。它还在实际画布下方绘制了旋转的结果，因此您可以看到*引擎盖下发生了*什么，但是由于“中心”位于正方形的左上角而不是中间，正方形被切掉了。

最后，这真的取决于*你*想怎么做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-06T19:01:30.507

我正在使用 API，发现跟踪对象*应该*在哪里更容易。这是一个正方形在屏幕上沿对角线移动并旋转的示例。

```
<canvas id="canvas" style="width: 100%; height: 100%;">
</canvas>

<script>
  var DELAY = 15; // ms
  var RECT_WIDTH = 100; // px
  var RECT_HEIGHT = 100; // px

  var canvas = document.getElementById('canvas');

  // set intrinsic dimensions
  canvas.width = 1000;
  canvas.height = 1000;
  var ctx = canvas.getContext('2d')
  ctx.fillStyle = 'teal';

  var step = 0
  var vx = 2
  var animate = setInterval(function () {
    ctx.resetTransform()
    ctx.clearRect(0, 0, 1000, 1000);
    ctx.translate(vx * step, vx * step);

    // rotation in place, translate to center of square and back
    ctx.translate(RECT_WIDTH / 2, RECT_HEIGHT / 2);
    ctx.rotate((Math.PI / 180) * step);
    ctx.translate(-(RECT_WIDTH / 2), -(RECT_HEIGHT / 2));

    // Draw the rectangle
    ctx.fillRect(0, 0, RECT_WIDTH, RECT_HEIGHT);
    step = step + 1
  }, DELAY)

  setTimeout(function () {
    clearInterval(animate);
  }, 5000);
</script> 
```

在这里，我使用`vx`并跟踪平移的步骤，并根据新的**不关心先前状态**的步骤计算旋转的弧度。确保你旋转过你所在的正方形的中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:29:56.867

在应用旋转之前，使用 ctx.translate 设置对象的位置。这应该可以解决问题。

```
ctx.save();
ctx.translate(this.x, this.y);

ctx.translate(this.width * 0.5, this.height*0.5);
ctx.rotate(DegToRad(45));
ctx.translate(-this.width*0.5,-this.height*0.5);

ctx.drawImage(this.img, this.spriteOffset, 0, this.width, this.height, 0, 0,this.width,this.height);
ctx.restore(); 
```

# entity-framework - 单元测试用 ObjectContext 抛出 ObjectDisposedException

> ID：15285596
> 
> 赞同：1
> 
> 时间：2013-03-08T02:18:50.103
> 
> 标签：entity-framework, objectdisposedexception

我有单元测试，我在每个测试方法之前创建和播种 SQLCE4 数据库。

在测试方法中，如果我有这样的查询：

```
var maxGroupLevel = repository.Get<GroupLevel>().Max(g => g.Id); 
```

它将抛出以下异常：

```
System.ObjectDisposedException: The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.
Result StackTrace:  
at System.Data.Objects.ObjectContext.EnsureConnection()
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
   at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__3[TResult](IEnumerable`1 sequence)
   at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
   at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
   at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.Max[TSource,TResult](IQueryable`1 source, Expression`1 selector) 
```

但是，如果我在查询中放置一个 ToList() 调用，它会起作用：

```
var maxGroupLevel = repository.Get<GroupLevel>().ToList().Max(g => g.Id); 
```

这是怎么回事？

此外，如果我将数据库的创建/播种移至构造函数而不是 TestInitialize 方法并在 TestInitialize 中创建新上下文，那么一切正常。但是，我不想这样做，因为我希望在每次测试之前数据库处于已知状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:08:24.377

您的代码的第一个版本被推迟到第一次查询 maxGroupLevel

```
var maxGroupLevel = repository.Get<GroupLevel>().Max(g => g.Id); 
```

代码的第二个版本在那里运行查询，然后在上述代码和对`maxGroupLevel`上下文的第一个引用之间的某个地方被处理。如果没有其他代码的可见性，则比这更难提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T15:26:17.070

如果不查看其余代码，就很难确定确切的问题。但是在使用与 ObjectDisposedException 异常相关的实体框架时，您可能想知道两件事。

1) 在从数据库中获取所有数据之前，不得释放数据上下文。

2) 一个 linq 语句创建一个 IQueryable，直到您对其进行枚举
（例如，在 for 每个循环中使用它）或将其转换为列表或数组时才会执行该 IQueryable。

# html - GitHub Pages 不会渲染 Jekyll 包含

> ID：15285597
> 
> 赞同：1
> 
> 时间：2013-03-08T02:18:58.183
> 
> 标签：html, jekyll, liquid, github-pages

我有一些液体标记在我`_includes/`的机器上渲染得很好，但是当我只推送到`gh-pages`包含的 div 渲染时。它应该为我的网站生成导航，按页面类别分组。我已经在我的机器上匹配了 ruby​​gems 来模仿我[在这里](https://help.github.com/articles/using-jekyll-with-pages#troubleshooting)看到的内容。我的流动语法有什么问题会阻止它在 GitHub Pages 中呈现吗？

```
<!-- NAVBAR -->
<div class="navbar">
{% assign categories = site.pages | map: 'to_liquid' | map: 'category' %}
{% assign usedCategories = '' %}
{% for category in categories %}{% if category %}
    {% capture categoryToCheck %},{{ category }},{% endcapture %}
    {% unless usedCategories contains categoryToCheck %}
    <h3 style="color: red; text-transform: capitalize;">{{ category | replace: '-', ' ' }}</h3>
        {% for doc in site.pages %}{% if doc.category == category %}
        <a href="{{ site.baseurl }}{{ doc.url }}">{{ doc.title }}</a>
        {% endif %}{% endfor %}
        {% capture usedCategories %}{{ usedCategories }}{{ categoryToCheck }}{% endcapture %}
    {% endunless %}
{% endif %}{% endfor %}
</div> 
```

注意：我认为我已经将问题归结`map: 'category'`为`site.pages | map: 'to_liquid'`生成相同的输出（但顺序不同）。`map: 'category'`在我的机器上从液体中提取字段，但这`gh-pages`不会发生。如果您有任何建议，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:03:18.040

我通过不使用 map 属性来解决这个问题。这是一个片段：

```
{% assign usedCategories = '' %}
{% for page in site.pages %}
  {% unless usedCats contains page.category %}
    <h3 style="color: red; text-transform: capitalize;">{{ page.category | replace: '-', ' ' }}</h3>
  {% capture usedCategories %}{{ usedCategories }}{{page.category}}{% endcapture %}
  {% endunless %}
{% endfor %} 
```

# java - APCS：有符号位

> ID：15285601
> 
> 赞同：0
> 
> 时间：2013-03-08T02:19:14.247
> 
> 标签：java, integer, range

> 在 Java 中，int 类型的变量在内部表示为 32 位有符号整数。假设一位存储符号，其他 31 位存储以 2 为底的数字的大小。在这个方案中，可以存储为 type 的最大值是`int`多少？

答案是`(2^31)-1`。我很好奇它的目的`-1`是什么？为什么一定`1`要从数的大小中减去？我不相信这`1`与符号有任何关系，因为这就是第 32 位的用途。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:23:43.593

你忘记了`0`.

在十进制系统中，您可以使用单个数字存储`10`值，最大值是`9`（即`10^1 - 1`）。

这是同一个故事。使用`i`base 中的数字数字，`b`您可以存储`b^i`值，最大的数字是`b^i-1`（我现在忽略符号位）。

附带说明：Java 中数字使用的表示形式（如在许多其他实现中一样）是*二进制补码*，其特点是只存储一个 0（否则你最终会得到两个`0`'s:`-0`并`+0`根据第一位标志）。所以即使最大值是`2^31-1`，最小的也是`-2^31`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:37:41.190

您应该了解二进制补码表示法。所有java整数类型都是有符号的，并且都用它来表示整数。这非常好，因为你永远不需要减去。

# java - 让我的字典搜索更高效

> ID：15285606
> 
> 赞同：2
> 
> 时间：2013-03-08T02:20:02.070
> 
> 标签：java, dictionary, search, solver, boggle

我在 Java 中创建了一个 boggle 求解器，它需要大约 1 分 30 秒来解决一个板，我确信它是因为我遍历我的字典的方式。这个想法是它检查它是否是一个单词，并查看它是否是一个有效的前缀。如果它是一个有效的前缀，它将返回 true 以便程序继续运行。如果它返回 false，那么程序将停止运行它正在学习的课程。我阅读了有关 trie 结构的信息，但我不太了解如何实现它们。带有书面代码的示例，一个小的解释将不胜感激

```
private ArrayList <String> dic = new ArrayList<String>(/*dictionary()*/);//my useable dictionary
private ArrayList <String> dicFinal = new ArrayList<String>();//all the words found
private ArrayList <String> checked = new ArrayList<String>();//all words that have   already been checked go here
public boolean CheckTest (String word)throws IOException{//if its impossible to create a word with the combination of letters then it returns false, 
    String backw=reverse(word);
    boolean isValid = true;     
    if (word.length()<=1){isValid = true;}
    else if (checked.contains(word)&&checked.contains(backw)){}
    else{
        boolean isWord=true;
        if(checked.contains(word)){}
        else if(dic.contains(word)==true){
            setCount(getCount()+1);
            dicFinal.add(word);
            dic.remove(word);
            isWord=true;
        }
        else
            isWord=false;
        if(checked.contains(backw)==true){}
        else if (dic.contains(backw)==true){
            setCount(getCount()+1);
            dicFinal.add(backw);
            dic.remove(word);
        }
        if(isWord==false){
            for(int i=0;i<dic.size();i++){
                if(word.length()<=dic.get(i).length()&&dic.get(i).substring(0, word.length()).equalsIgnoreCase(word.substring(0, word.length()))){
                    isValid=true;
                    i=dic.size();
                }
                else 
                    isValid=false;
            }
        }
    }
    checked.add(word);
    checked.add(backw);
    return isValid;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:13:49.350

I'd suggest that the first thing to do would be to make `dic` and `checked` HashSets instead of ArrayLists, which will give you O(1) access time instead of O(N). If your supposition that these lookups are the key bottleneck is correct, your program's performance should improve enormously.

If that doesn't improve matters enough, it would be worth investing a few minutes in learning how to profile Java programs so that you can pinpoint where the problem lies.

# sql - 为什么 EXEC 会报告必须声明标量变量的错误

> ID：15285609
> 
> 赞同：6
> 
> 时间：2013-03-08T02:20:16.570
> 
> 标签：sql, sql-server, tsql

我一直在为下面的脚本而苦苦挣扎，我想不出更好的方法来做到这一点。
有没有人看到问题？我正确地声明了变量。为什么会失败？谢谢你的帮助！

```
DECLARE @var1 as VarChar(50) 
DECLARE @var2 as VarChar(50) 

SET @Var1 = '1, 2, 3, 4, 5'

EXEC('IF (select count(*) from Table1 where Column1 in (' + @Var1 + ')) = 5 
     SET @Var2 = ''True''
ELSE 
     SET @Var2 = ''False''')

SELECT @Var2 
```

错误信息：

> 必须声明标量变量@Var2

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T02:27:45.527

`sp_executesql`如果要从参数中获取值，则需要使用。

要缩短查询，请使用`CASE`.

```
DECLARE @var1 as VarChar(50) 
DECLARE @var2 as VarChar(50) 
SET @Var1 = '1, 2, 3, 4, 5'
SET @sqlCommand = 'SELECT @Var = CASE WHEN count(*) = 5 THEN ''TRUE'' ELSE ''FALSE'' END FROM Table1 where Column1 IN (' + @Var1 + ')'
EXECUTE sp_executesql @sqlCommand, N'@Var VARCHAR(5) OUTPUT', @Var=@var2 OUTPUT
SELECT @Var2 
```

如果您想知道所有`ID`from`@Var1`是否存在于桌子上，您还需要使用`DISTINCT`

```
SET @sqlCommand = 'SELECT @Var = CASE WHEN count(DISTINCT Column1) = 5 THEN ''TRUE'' ELSE ''FALSE'' END FROM Table1 where Column1 IN (' + @Var1 + ')' 
```

*   [sp_executesql ^(MSDN 文档)](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T02:40:37.807

由于 exec 正在执行单引号内的 SQL 的动态部分。但是@var2 在 exec 之外声明。要解决此问题，请在 exec 中声明并选择 @var2 或使用 @var2 作为 set '+@var2+'

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T02:22:30.973

使用 sp_executeSQL 而不是 exec 并使用输出参数

例如[，如何将 sp_executesql 结果转换为变量？](https://stackoverflow.com/questions/803211/how-to-get-sp-executesql-result-into-a-variable)

例如

```
DECLARE @var1 as VarChar(50) 
DECLARE @var2 as VarChar(50) 
DECLARE @ParmDefinition nvarchar(500);
SET @Var1 = '1, 2, 3, 4, 5'

SET @ParmDefinition = N'@Var2  VarChar(50) OUTPUT';

DECLARE @sSQL nvarchar(500);

set @sSQL =  'IF (select count(*) from Table1 where Column1 in (' + @Var1 + ')) = 5 
     SET @Var2 = ''True''
ELSE 
     SET @Var2 = ''False'''

EXEC sp_executesql @sSQL, @ParmDefinition, @Var2=@Var2 OUTPUT;

SELECT @Var2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T02:22:59.447

那里有两件事..首先“;”在哪里 结束句子。您还需要对 varchar 值进行转义。

同意其他答案...使用 sp_executeSQL 运行动态 sql。

一个声明的例子......

```
USE AdventureWorks2012;
GO
DECLARE @find varchar(30); 
/* Also allowed: 
DECLARE @find varchar(30) = 'Man%'; 
*/
SET @find = 'Man%'; 
SELECT p.LastName, p.FirstName, ph.PhoneNumber
FROM Person.Person AS p 
JOIN Person.PersonPhone AS ph ON p.BusinessEntityID = ph.BusinessEntityID
WHERE LastName LIKE @find; 
```

sp_executeSQL 的示例..

```
DECLARE @IntVariable int;
DECLARE @SQLString nvarchar(500);
DECLARE @ParmDefinition nvarchar(500);

/* Build the SQL string one time.*/
SET @SQLString =
     N'SELECT EmployeeID, NationalIDNumber, Title, ManagerID
       FROM AdventureWorks.HumanResources.Employee 
       WHERE ManagerID = @ManagerID';
SET @ParmDefinition = N'@ManagerID tinyint';
/* Execute the string with the first parameter value. */
SET @IntVariable = 197;
EXECUTE sp_executesql @SQLString, @ParmDefinition,
                      @ManagerID = @IntVariable;
/* Execute the same string with the second parameter value. */
SET @IntVariable = 109;
EXECUTE sp_executesql @SQLString, @ParmDefinition,
                      @ManagerID = @IntVariable; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T02:37:51.777

远离执行 sql 字符串的原因有很多。我会将其重写为：

```
declare @cnt int

select @cnt = count(1) 
from Table1 
where Column1 in
    (select items
    from dbo.Split(@Var1,',')
    )

return @cnt   -- then the calling function says if this is true or false. 
```

对于拆分功能，请参见： [这里](https://stackoverflow.com/questions/12999631/split-string-by-comma-in-sql-server-2008)

# python - 重定向似乎不适用于 GAE

> ID：15285612
> 
> 赞同：0
> 
> 时间：2013-03-08T02:20:44.413
> 
> 标签：python, google-app-engine

我正在使用 Python 2.7 和 Google App 引擎。我编写了一个页面，在 Oauth 完成后将用户重定向到表单。这在本地主机上完美运行，但是当我部署到应用程序引擎时它失败了。我究竟做错了什么？

我收到的错误消息是“404。这是一个错误。在此服务器上找不到请求的 URL / 表单。这就是我们所知道的。”

服务器日志根本不显示我的 /form 请求。

相关片段如下：

1.app.yaml

```
handlers:      
- url: .*
script: public.main.app

builtins:
- remote_api: on
- admin_redirect: on 
```

2.main.py

```
app = webapp2.WSGIApplication([
     ('/form?$', content.Home), 
     ('/oauthcallback?$', content.CallbackHandler),], 
debug=True) 
```

3.content.py 为`/oauthcallback`

```
....
http = credentials.authorize(http)
self.redirect('/form') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:37:05.617

万岁！

谢谢大家的帮助。

@Dave Smith，语法：'/form?$' 完全没问题。

事实证明，'/form' 是由 GAE 保留的。我重命名了我的条目，现在它可以完美运行了。

请参阅：[https ://developers.google.com/appengine/docs/python/config/appconfig#Reserved_URLs](https://developers.google.com/appengine/docs/python/config/appconfig#Reserved_URLs)

# ruby-on-rails - 在 HAML 中使用 I18n 降价字符串

> ID：15285614
> 
> 赞同：0
> 
> 时间：2013-03-08T02:21:13.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, haml, markdown

我在我的语言文件中本地化了降价字符串，我正在寻找一种更简洁的方法来在 HAML 中执行以下操作：

```
#text_for_something
  :markdown
    #{ t(:text_in_markown) } 
```

或者，等效地：

```
#text_for_something!= Maruku.new( t(:text_in_markown) ).to_html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:59:44.807

我最终为[我的 Rails 教程示例应用程序](https://github.com/paulfioravanti/sample_app)的 i18n 做了类似的事情。不确定这是否重要，但我使用[RDiscount](https://github.com/rtomayko/rdiscount)来呈现 Markdown。

总之，我将每个 i18n 化的 markdown 文件归档在**config/locales下的****controller/action**目录下，并确定需要在控制器中呈现哪个页面。例如，对于一个简单的 About 页面，这里是markdown 文件所在的位置：**`:en`**

 ****config/locales/static_pages/about/about.en.md**

```
About Us
========

Some more markdown text... 
```

要呈现的文件的路径在控制器中确定并分配给`@page`，然后文件本身在相关的 HAML 部分中呈现出来：

**应用程序/控制器/static_pages_controller.rb**

```
class StaticPagesController < ApplicationController

  before_filter :localized_page

  def about
    # ...
  end

  # ...

  protected

    def localized_page
      locale = params[:locale]
      @page = "#{Rails.root}/config/locales/#{controller_name}/"\
              "#{action_name}/#{action_name}.#{locale}.md"
    end
end 
```

**app/views/static_pages/about.html.haml**

```
= render 'static_page', title: t('.about_us'), page: @page 
```

**应用程序/视图/static_pages/_static_page.html.haml**

```
- provide(:title, title) if title
:markdown
  #{render file: page} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:01:21.870

我知道这不是您想要的，但您可以将以下助手添加到`helpers/application_helper.rb`

```
def render_md(key)
    Maruku.new( t(key) ).to_html
end 
```

然后像这样在你的 HAML 中使用它：

```
#text_for_something!= render_md :text_in_markown 
```

希望能帮助到你。**

# c# - 在负载测试插件中访问 App.Config 连接字符串

> ID：15285615
> 
> 赞同：0
> 
> 时间：2013-03-08T02:21:17.447
> 
> 标签：c#, .net, entity-framework, load-testing

我目前正在开发我的第一个负载测试，所以请多多包涵~

负载测试本身正在运行一组单元测试，将不同的请求发布到 HTTP 处理程序。根据负载测试在哪个代理上运行，请求本身是针对开发/暂存环境发出的，然后传递给“处理”请求的下游服务，`INSERT`并对几个数据库执行语句。我想构建并包含一个简单的插件，该插件实现并为事件处理程序`ILoadTestPlugin`提供它自己的一组指令。`LoadTestCompleted`此插件当前包含在一个单独的类库项目中，该项目包含在包含负载测试本身的同一解决方案中。

在我开始描述这个问题之前，我想指出我目前正在本地运行负载测试，该测试是针对我在 IIS 中设置的同一个处理程序。

当事件触发时我遇到了一个问题，我的方法尝试建立到目标数据库上下文的实体连接（当前使用 Entity Framework 4）。[插件代码似乎](http://www.screencast.com/t/ge97yH5D34)无法找到负载测试项目中包含的 app.config。异常消息/堆栈跟踪指出连接字符串无效，但我渴望问题是它找不到它。最重要的是，我们的代码库中的许多地方都使用了相同的连接字符串。

我可以排除我的连接字符串无效的可能性，因为如果我创建一个使用相同配置文件执行相同代码的简单单元测试方法，它就可以正常工作。这是给定的，因为负载测试代理包含在与项目不同的目录中，因此定位配置文件没有问题。

我还尝试将复制到启动项目的输出目录的配置文件作为部署项添加到我的 .testsettings 文件中。没有布埃诺。我还在插件项目中创建了一个应用程序配置文件，它是我试图用来查看是否有效的文件的精确副本。还是没有bueno。

有没有人遇到过这个问题？如果您尝试使用`<connectionString>`配置文件中的部分，如何让负载测试插件找到/使用它们？

我打算尝试使用反射和良好的 ole'`ConfigurationManager`来尝试调用程序集以查找路径（最终是 ProjectName.dll.config 文件），但想向 StackOverflow 上的专家询问一下前进之前的建议。

另外，如果这不是那么直接的 EF 代码（或者如果它超出了点：），我会提供代码`var dbContext = new dbContext( myConnectionString );`示例

非常感谢任何帮助/反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T20:57:58.083

您可以创建一个自定义负载测试插件，在 Initialize 方法中，您可以从一些 xml/app.config 文件中获取连接字符串，将其添加到上下文对象中，将在您的单元测试项目中使用它。它将更加强大且易于维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:25:06.983

虽然我不知道如何在负载测试插件中使用应用程序的配置文件，因为负载测试和任何相应的插件在 QTAgent.exe 目录中运行，我能够实现我的加载后测试数据库清理向上一步有两种方式。

1.  使用包含基于环境（运行设置）的连接字符串的唯一元素的上下文参数，以便连接字符串本身的唯一元素（例如 - 数据源等）以编程方式可供我的插件使用。

2.  在向端点发出请求的单元测试类中，我创建了一个用`[ClassCleanup]`属性标记的静态方法。当包含来自该类的单元测试的测试组合完成运行时，将执行此操作。测试类包含在项目的 out 目录中，并且可以使用实体连接字符串访问应用程序的 .config 文件：

```
[TestClass]
public class MyEndpointUnitTests()
{
   [TestMethod]
   public void SubmitRequestType1()
   {
       //DoStuff for request type 1
   }

   [TestMethod]
   public void SubmitRequestType2()
   {
       //DoStuff for request type 2
   }

   [ClassCleanup]
   public static void Cleanup()
   {
       EndpointLoadTestCleanup.DoCleanup( dbContext = new DbContext( ) );
   }
} 
```

# html - 如何在容器内保持css背景图像模糊？

> ID：15285621
> 
> 赞同：6
> 
> 时间：2013-03-08T02:21:39.737
> 
> 标签：html, css, blur

当我模糊图像时，它会溢出父容器，甚至指定要隐藏溢出。有没有办法将模糊的边缘保持在尺寸内？

图片需要作为css背景而不是在标签内

示例不起作用：

```
.box{
    width: 300px;
    height: 300px;
    border: 1px solid red;
    overflow: hidden;
}

.blur{
    width: 100%;
    height: 100%;
    overflow: hidden;
    -webkit-filter: blur(20px);
    background: url("https://news.slac.stanford.edu/sites/default/files/imagecache/Img350_Scale/images/image/demag-300h.jpg");
} 
```

[http://jsfiddle.net/tMjsJ/1/](http://jsfiddle.net/tMjsJ/1/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T03:08:25.377

它可以通过将 a`margin`应用于子元素和`overflow:hidden`父元素来实现。

```
.box {
    overflow: hidden;
    margin:5px;
}

.blur {
    -webkit-filter: blur(20px);
    margin: -5px 0 0 -5px;
    background: url("https://news.slac.stanford.edu/sites/default/files/imagecache/Img350_Scale/images/image/demag-300h.jpg");
    height:300px;
    width:300px;
} 
```

在此处查看示例：http: [//jsfiddle.net/n1ck/tMjsJ/5/](http://jsfiddle.net/n1ck/tMjsJ/5/)

正如[Joshua](https://stackoverflow.com/users/175082/joshua)指出的那样，它与此处使用的技术相同：[使用 CSS3 过滤器模糊定义边缘](https://stackoverflow.com/questions/12224320/defined-edges-with-css3-filter-blur)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T02:52:06.617

因此，显然，这似乎不适用于背景图像。非常有趣的发现:) 这里展示了一个类似但不准确的帖子：

[使用 CSS3 滤镜模糊定义的边缘](https://stackoverflow.com/questions/12224320/defined-edges-with-css3-filter-blur)

我想如果你想达到同样的效果，试着从使用带有背景图像的 div 更改为图像本身，使用 100% 的宽度/高度。

编辑：查看@N1ck 的答案。应用负边距（甚至 -1px）似乎可以触发适当的效果。好的。

另外 - 为了避免背景颜色（白色）溢出，或者至少更好地管理它，请尝试在图像之外设置背景颜色。

# c - C - 涉及数组时 Printf 的重复

> ID：15285622
> 
> 赞同：1
> 
> 时间：2013-03-08T02:21:40.277
> 
> 标签：c

我希望这对于堆栈溢出来说不是太基本的问题。但是我有一个查询，它试图确定数组中的成绩数量，然后要求用户输入每个成绩。它看起来像这样：

```
#include <stdio.h>

int main (void)
{
int size;

printf ("Enter The Amount Of Grades In Your Array: ");
scanf("%i", &size);/*Stores Amount Of Grades In The Array*/

char myGrades[size];
int i;

for (i = 0; i < size; ++i)
  {
  printf ("Enter the grade:");
  scanf ("%c",&myGrades[i]);
  }

return 0; 
} 
```

我希望 int i 之后的第一行可以读取`"Enter The Grade:"`，但它看起来像`"Enter The Grade:""Enter The Grade:"`

我不明白为什么它说第二次输入成绩而没有首先询问我在第一次“输入成绩”时的输入。我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T02:24:28.837

你的第一个`scanf`是留下`\n`后面，然后在下次自动读取它，就好像你按下了回车一样（所以换行符存储在你的数组中）。你可以通过使用`" %c"`来解决这个问题。该空格将消除您想要的字符之前的任何换行符或空格。

# python - Django自引用外键

> ID：15285626
> 
> 赞同：198
> 
> 时间：2013-03-08T02:22:10.363
> 
> 标签：python, django, django-orm

一般来说，我对 webapps 和数据库的东西有点陌生，所以这可能是一个愚蠢的问题。我想创建一个模型（“CategoryModel”），其字段指向模型的另一个实例（其父级）的主 ID。

```
class CategoryModel(models.Model):
    parent = models.ForeignKey(CategoryModel) 
```

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2013-03-08T02:25:18.277

您可以将模型的名称作为字符串传递给 ForeignKey，它会做正确的事情。

所以：

```
parent = models.ForeignKey("CategoryModel") 
```

或者你可以使用字符串“self”

```
parent = models.ForeignKey("self") 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-03-08T02:25:34.903

您可以使用字符串“self”来表示自引用。

```
class CategoryModel(models.Model):
    parent = models.ForeignKey('self') 
```

[https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-12-17T14:09:34.923

您还可以设置`null=True`和`blank=True`

```
class CategoryModel(models.Model):
    parent = models.ForeignKey("self", on_delete=models.CASCADE, null=True, blank=True) 
```

`null=True`, 允许在数据库
`blank=True`中, 允许在表单中验证

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-06-19T18:34:09.950

[https://books.agiliq.com/projects/django-orm-cookbook/en/latest/self_fk.html](https://books.agiliq.com/projects/django-orm-cookbook/en/latest/self_fk.html)

```
class Employee(models.Model):
    manager = models.ForeignKey('self', on_delete=models.CASCADE) 
```

或者

```
class Employee(models.Model):
    manager = models.ForeignKey("app.Employee", on_delete=models.CASCADE) 
```

[https://stackabuse.com/recursive-model-relationships-in-django/](https://stackabuse.com/recursive-model-relationships-in-django/)

# ruby-on-rails - Rails.logger 上的 Honeybadger 钩子

> ID：15285630
> 
> 赞同：0
> 
> 时间：2013-03-08T02:22:44.027
> 
> 标签：ruby-on-rails, ruby, logging

我想在调用 Rails.logger 的任何时候通知 Honeybadger，并且在我的应用程序中有大量现有的 Rais.logger 调用。

无论如何要创建一个每次调用 Rails.logger.fatal 时调用的钩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:35:14.357

我认为您应该能够为此滥用`formatter`。[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html#label-Format](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html#label-Format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:43:22.470

我最终覆盖了开箱即用的日志格式化程序，如下所示：

```
class Logger::SimpleFormatter
  def call(severity, time, progname, msg)
    if Rails.env.production? && (severity == "FATAL" || severity == "ERROR")
        @context = { :severity => severity.to_s, :time => time.to_s, :msg => msg.to_s }
        Honeybadger.context(@context)
        Honeybadger.notify(@context)
    end
    return "[#{severity}] #{msg}\n"
end 
```

结尾

# c# - 加载谷歌地图失败

> ID：15285631
> 
> 赞同：0
> 
> 时间：2013-03-08T02:22:48.070
> 
> 标签：c#, google-maps, c#-4.0

在我的 ac# 程序中，我想加载一个谷歌地图，它是一个存储在我本地磁盘中的 html 文件，但它失败了。它说应用程序的互联网连接有问题。这是我的截图和一些代码

```
 private void 加载地图ToolStripMenuItem_Click(object sender, EventArgs e)
        {
            //webBrowser1.Navigate("D:/GoogleMap/GoogleMap.html");
            webBrowser1.Navigate("D:/exercise/源代码/windows监控端/TestGoogleMapGps/TestGoogleMapGps/GoogleMap.html");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:24:22.957

通常，您的本地计算机使用反斜杠，而不是正斜杠，因此请尝试：

```
webBrowser1.Navigate(@"D:\GoogleMap\GoogleMap.html");
webBrowser1.Navigate(@"D:\exercise\源代码\windows监控端\TestGoogleMapGps\TestGoogleMapGps\GoogleMap.html"); 
```

虽然，我不完全确定这是您想要的解决方案。

# angularjs - 如何使用指令定义的`replace`？

> ID：15285635
> 
> 赞同：84
> 
> 时间：2013-03-08T02:23:05.520
> 
> 标签：angularjs, angularjs-directive

在本文档中：[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)，它说有一个`replace`指令配置：

> **模板**- 用 HTML 的内容替换当前元素。替换过程将所有属性/类从旧元素迁移到新元素。有关详细信息，请参阅下面的创建组件部分。

**javascript代码**

```
app.directive('myd1', function(){
  return {
    template: '<span>directive template1</span>',
    replace: true
  }
});

app.directive('myd2', function(){
  return {
    template: '<span>directive template2</span>',
    replace: false
  }
}); 
```

**html代码**

```
<div myd1>
  original content should be replaced
</div>
<div myd2>
  original content should NOT be replaced
</div> 
```

但最后一页看起来像：

```
directive template1
directive template2 
```

似乎`replace`不起作用。我想念什么吗？

现场演示：[http ://plnkr.co/edit/rGIgmjO81X2UxJohL4HM?p=preview](http://plnkr.co/edit/rGIgmjO81X2UxJohL4HM?p=preview)

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-03-08T03:49:40.703

您对`transclude: true`, 会附加内部内容感到困惑。

`replace: true`意味着指令模板的内容将替换声明指令的元素，在本例中为`<div myd1>`标记。

[http://plnkr.co/edit/k9qSx15fhSZRMwgAIMP4?p=preview](http://plnkr.co/edit/k9qSx15fhSZRMwgAIMP4?p=preview)

例如**没有** `replace:true`

```
<div myd1><span class="replaced" myd1="">directive template1</span></div> 
```

并**与** `replace:true`

```
<span class="replaced" myd1="">directive template1</span> 
```

正如您在后一个示例中看到的那样， div 标签确实*被替换了*。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T03:51:27.790

正如文档所述，“替换”确定当前元素是否被指令替换。另一种选择是它是否基本上只是作为一个孩子添加。如果您查看 plnkr 的源代码，请注意对于第二个指令，其中 replace 为 false，div 标记仍然存在。对于第一个指令，它不是。

第一个结果：

```
<span myd1="">directive template1</span> 
```

第二个结果：

```
<div myd2=""><span>directive template2</span></div> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-06T06:42:42.940

替换 [真 | 假（默认）]

> 影响

```
1\.  Replace the directive element. 
```

> 依赖：

```
1\. When replace: true, the template or templateUrl must be required. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-25T16:13:34.177

如果我在模板的顶级模板中与实际的根元素之间有注释，我也会收到此错误。

```
<!-- Just a commented out stuff -->
<div>test of {{value}}</div> 
```

# scala - 使用 2.10.0 在 sbt 中交叉构建

> ID：15285639
> 
> 赞同：4
> 
> 时间：2013-03-08T02:23:35.063
> 
> 标签：scala, sbt

我正在使用 sbt 12.1 交叉构建一个 scala 项目。

```
crossScalaVersions := Seq("2.9.2", "2.10.0") 
```

但是，它找不到依赖项，因为它们被命名为`_2.10`not `_2.10.0`。命名您的库似乎很常见，而`2.10`不是`2.10.0`and 。例如，scalaz 不在[http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.10.0/6.0.4/scalaz-core_2.10.0-6.0.4.pom](http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.10.0/6.0.4/scalaz-core_2.10.0-6.0.4.pom)但在[http:// /repo1.maven.org/maven2/org/scalaz/scalaz-core_2.10/6.0.4/scalaz-core_2.10-6.0.4.pom](http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.10/6.0.4/scalaz-core_2.10-6.0.4.pom)。`scala-language``scala-compiler`

有没有一种简单的方法可以在不为我的所有依赖项编写自定义规则的情况下处理这个问题？

实际的 build.sbt 可以[在线](https://github.com/knowitall/common-scala/blob/master/build.sbt)获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:19:54.367

由于`2.10.x`版本彼此之间是二进制兼容的，因此库只需要使用一个版本的 scala 库来构建——并且它们可以（并且必须）删除该`.0`部分（如果您使用 sbt 发布，它会自动完成）。当一个库的维护者发布一个带有`_2.10.0`标签的库时，这是一个错误，你应该考虑提交一个错误。

顺便说一句，我看了你的`build.sbt`- 运行`+compile`它对我有用（sbt 0.12.1）。您是否遇到一些错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:44:16.440

要以 Scala 方式将 Scala 版本合并到工件名称中，请使用`%%`运算符指定依赖项：

```
libraryDependencies += "io.backchat.jerkson" %% "jerkson" % "0.7.0" 
```

当完全匹配不可用时，您可以明确指定 Scala 版本（但请记住，兼容性仅存在于给定 Scala 主要/次要版本的补丁版本之间）：

```
libraryDependencies += "io.backchat.jerkson" % "jerkson_2.9.2" % "0.7.0" 
```

# java - 如何在随机生成器中获得 50/50 的机会

> ID：15285643
> 
> 赞同：29
> 
> 时间：2013-03-08T02:23:48.277
> 
> 标签：java

我试图在随机生成器中获得 1 或 2 的 50/50 机会。

例如：

```
Random random = new Random();
int num = random.nextInt(2)+1; 
```

此代码将输出 1 或 2。

假设我循环运行它：

```
for ( int i = 0; i < 100; i++ ) {
    int num = random.nextInt(2)+1 ;
} 
```

在这种情况下，如何使生成器为 1 和 2 生成相等的数字？

所以我希望这个循环生成 50 次数字 1 和 50 次数字 2。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-08T02:25:31.473

一种方法：`ArrayList<Integer>`用 50 个 1 和 50 个 2 填充 an，然后调用`Collection.shuffle(...)`它。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-08T10:01:59.080

**使用Random.nextBoolean()**很容易实现 50/50

 **```
private final Random random = new Random();

private int next() {
  if (random.nextBoolean()) {
    return 1;
  } else {
    return 2;
  }
} 
```

测试运行：

```
final ListMultimap<Integer, Integer> histogram = LinkedListMultimap.create(2);
for (int i = 0; i < 10000; i++) {
    nal Integer result = Integer.valueOf(next());
  histogram.put(result, result);
}
for (final Integer key : histogram.keySet()) {
  System.out.println(key + ": " + histogram.get(key).size());
} 
```

结果：

```
1: 5056
2: 4944 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-08T02:28:24.370

你不能用`random`. 如果您**正好**需要50 个 1 和 50 个 2，您应该尝试这样的操作：

```
int[] array = new int[100];
for (int i = 0; i < 50; ++i)
 array[i] = 1;
for (int i = 50; i < 100; ++i)
 array[i] = 2;

shuffle(array); // implement shuffling algorithm or use an already existing one 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-29T15:16:27.227

**编辑：** *我知道，如果您希望完成 50-50 个结果，那么我的回答是不准确的。您应该使用预先填充的集合，因为使用任何类型的随机性都无法实现。考虑到这一点，我的回答对于问题的标题仍然有效，所以，就是这样：*

好吧，您不需要 rnd 生成器来执行此操作。来自 javascript，我会选择一个班轮：

```
return Math.random() > 0.5 ? 1: 2; 
```

解释：**Math.random()**返回一个介于 0（含）和 1（不含）之间的数字，因此，我们只检查天气是否大于 0.5（中间值）。理论上有 50% 的变化。

对于更通用的用途，您只需将**1:2**替换为**true:false**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T07:23:29.873

您可以在此过程中调整概率，以便获得一个的概率随着您获得更多的概率而降低。这样你并不总是有 50% 的机会得到一个，但你可以得到你期望的结果（正好 50 个）：

```
int onesLeft = 50;

for(int i=0;i<100;i++) {
  int totalLeft = 100 - i;
  // we need a probability of onesLeft out of (totalLeft)
  int r = random.nextInt(totalLeft);
  int num;
  if(r < onesLeft) {
    num = 1;
    onesLeft --;
  } else {
    num = 2;
  }
} 
```

这比洗牌有一个优势，因为它以增量方式生成数字，因此不需要内存来存储数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T21:18:07.330

您已经成功创建了一个随机生成器，它返回`1`或`2`以相等的概率返回。

正如（许多）其他人所提到的，您的下一个请求，即在 100 次试验中强制进行**精确的**50/50 分布，不符合随机数生成。[如https://math.stackexchange.com/questions/12348/probability-of-getting-50-heads-from-tossing-a-coin-100-times](https://math.stackexchange.com/questions/12348/probability-of-getting-50-heads-from-tossing-a-coin-100-times)所示，这种情况发生的现实预期仅为 8% 左右. 因此，即使您可能*期望*每个都有 50 个，但*确切的*结果实际上是相当罕见的。

大数定律指出，随着试验次数的增加，您应该接近预期值。

因此，对于您的实际问题：在这种情况下，如何使生成器为 1 和 2 生成相等的数字？

我能想到的最好（幽默）答案是：“无限循环运行”。**

# javascript - 用于用户提供坐标的通用 JavaScript 解析器

> ID：15285644
> 
> 赞同：3
> 
> 时间：2013-03-08T02:23:53.193
> 
> 标签：javascript, parsing, geocoding, latitude-longitude

是否有 JavaScript 库可以帮助解析用户提供的各种格式的坐标？

我有一个带有搜索框的地图站点，可用于搜索地名，但通过查看统计数据，我看到很多人试图直接使用各种格式的坐标，就像他们在谷歌地图上所做的那样.

我看到的纬度和经度的典型变化是：

```
-43 02 42.845 S 172 38 33.790 E
n 19°49'2.30e 41°51'29.20
41°46'57.90"S
172° 1'20.39"E 43 02 42.845 S
42.897S 172.720E
42.31.303 172.23.379
19.817306°, 41.858111° 
```

这是很多变化，这只是一个示例。然后有用户尝试基于 NZTM 和 NZMG 的各种新西兰格式。

理想情况下，我想找到一个库，有人可能从一些基本的纬度和经度开始，然后扩展功能以支持我看到的其他格式。

有人知道那里已经有什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:54:51.663

实际上，我刚刚发布了我的名为 Magellan 的 JavaScript 库，它可以像您上面列出的那样处理纬度/经度坐标的格式化和验证。检查一下，看看它是否是你要找的。

链接在这里：[https ://dbarbalato.github.io/magellan/](https://dbarbalato.github.io/magellan/)

作为一个快速说明，它不会处理您上面列出的每种格式，但如果有足够的兴趣，我愿意扩展功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-13T22:02:05.447

**要从原始文本输入解析数字坐标**，[otto-dev](https://github.com/otto-dev/coordinate-parser)提供了npm 包[坐标解析器](https://www.npmjs.com/package/coordinate-parser)。[对于WGS84](https://en.wikipedia.org/wiki/World_Geodetic_System)纬度-经度对及其分钟和十进制表示而言，它感觉很强大。

```
const CoordinateParser = require('coordinate-parser')
const text = `60 40' 31.35" N, 23 50' 55.75" E`
const pos = new CoordinateParser(text)
const lat = pos.getLatitude() // 60.675374
const lng = pos.getLongitude() // 23.848819 
```

**虽然适用于 WGS84**，但坐标解析器不处理[UTM](https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system)坐标，例如[NZTM](https://epsg.io/2193)或[ETRS89 TM35FIN](https://epsg.io/3067)`N 6730758, E 327874`上的坐标。解析器将大数字视为毫秒或密集格式的 DDMMSS.xxx 而不是米，从而产生无效结果。

**对于 UTM 坐标**，有[utm-coordinate-parser](https://www.npmjs.com/package/utm-coordinate-parser)。它识别常见的东-北对，例如`6730758 N 327874 E`xy 对`x:327874 y:6730758`。免责声明：我是包作者。

```
const utmp = require('utm-coordinate-parser')
const text = 'N 6730758; W -327874'
const pos = utmp.parse(text)
const x = pos.x // 327874
const y = pos.y // 6730758 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-08T02:28:11.967

一般形式应为：

```
var m;
if( m = input.match(/format regex here/)) { /* do stuff with m */ }
else if( m = input.match(/another format/)) { /* do stuff with m */ }
...
else {throw new Error("Format not recognised!");} 
```

构建所需的正则表达式由您决定，但它们应该太难了，因为它们是相对简单的格式。

# c# - .NET 的等效“openssl_seal”？

> ID：15285645
> 
> 赞同：1
> 
> 时间：2013-03-08T02:24:04.877
> 
> 标签：c#, php, encryption, ssl, openssl

我正在拼命寻找与 PHP 的“openssl_seal”（[http://php.net/manual/en/function.openssl-seal.php](http://php.net/manual/en/function.openssl-seal.php)）功能等效的 .NET (C#) 代码。谷歌搜索了几个小时，尝试了 OpenSSL 和 BouncyCastle .NET API 并没有出现太多，或者我没有从正确的方向解决所有问题。

我的理解是 PHP“openssl_seal”命令执行以下操作（这是他们网站的引述）：

1.  生成随机密钥（128 位）
2.  使用随机密钥使用 RC4 对称加密数据
3.  使用公钥/证书使用 RSA 加密随机密钥本身
4.  返回加密数据和加密密钥。

这一切都很好而且很花哨，但留下了很大的解释空间和微妙的不准确之处。通过反复试验来匹配 PHP 和 C# 的结果是一个令人生畏的前景（关键是“随机”，所以这甚至不起作用）:) 有没有人能够成功地通过复制“openssl_seal”机制C＃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:08:56.077

我对这个块的解决方案的咆哮：http: [//geekswithblogs.net/Strenium/archive/2013/01/27/converting-phprsquos-ldquoopenssl_sealrdquo-and-ldquoopenssl_openrdquo-into-.net.aspx](http://geekswithblogs.net/Strenium/archive/2013/01/27/converting-phprsquos-ldquoopenssl_sealrdquo-and-ldquoopenssl_openrdquo-into-.net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:21:09.783

[http://phpseclib.sourceforge.net/interop.html](http://phpseclib.sourceforge.net/interop.html)

这可能会有所帮助。单击 PHP 绑定/openssl_seal()/openssl_open()。然后点击“Seal”下的phpseclib。

你说的听起来很准确。您使用 PKCS1 填充加密 RC4 密钥。

祝你好运！

# c# - DelegateCommand 的重载方法

> ID：15285646
> 
> 赞同：0
> 
> 时间：2013-03-08T02:24:14.767
> 
> 标签：c#, mvvm, properties, overloading, delegatecommand

我有一个 DelegateCommand 类，其中包含 2 个构造函数。当我将我的属性传递给该类的构造函数时，我收到一条错误消息：

```
Error   1   The best overloaded method match for 'QMAC.ViewModels.DelegateCommand.DelegateCommand(System.Action<object>)' has some invalid arguments

Error   2   Argument 1: cannot convert from 'System.Windows.Input.ICommand' to 'System.Action<object>' 
```

对于我的 DelegateCommand，这是我所拥有的（没有注释以保持简短）：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows.Input;

namespace QMAC.ViewModels
{
    class DelegateCommand : ICommand
    {
        private Action<object> _execute;
        private Predicate<object> _canExecute;

        public DelegateCommand(Action<object> execute) : this(execute, null)
        {

        }

        public DelegateCommand(Action<object> execute, Predicate<object> canExecute)
        {
            _execute = execute;
            _canExecute = canExecute;
        }

        public bool CanExecute(object parameter)
        {
            if (_canExecute.Equals(null))
            {
                return true;
            }

            return _canExecute(parameter);
        }

        public void Execute(object parameter)
        {
            _execute(parameter);
        }

        public void RaiseCanExecuteChanged()
        {
            if (CanExecuteChanged != null)
            {
                CanExecuteChanged(this, EventArgs.Empty);
            }
        }
    }
} 
```

这是我要传递的属性和函数：

```
using QMAC.Models;
using System;
using System.Collections.Generic;
using System.Net.NetworkInformation;
using System.Text;
using System.Windows.Input;
using System.Windows.Threading;

namespace QMAC.ViewModels
{
    class MainViewModel: ViewModelBase
    {
        Address address;
        Location location;
        private string _locationPicked;
        private string _ipAddress;
        private DelegateCommand _exportCommand;

        public MainViewModel()
        {
            address = new Address();
            location = new Location();
            _ipAddress = address.IPAddress;
            _exportCommand = new DelegateCommand(ExportCommand);
        }

public ICommand ExportCommand
        {
            get { return _exportCommand; }
        }

        public void ExportList()
        {

        }
    }
} 
```

因为第一个错误必须处理重载方法，所以我知道我只是忽略了一些非常简单的东西。至于第二个错误，什么是更好的处理方法，因为我无法通过该属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:09:31.927

您的构造函数`DelegateCommand`被配置为采用，而`Action<object>`不是您传递一个`ICommand`实例。

你应该用应该发生的动作来构建。例如，我认为您的意思是改为调用“ExportList”：

```
_exportCommand = new DelegateCommand((o) => this.ExportList()); 
```

注意：因为 ExportList 实际上没有对象参数，您需要使用匿名方法进行调用。

# python - python subprocess.Popen.communicate() 关闭 p.stdout 和 p.stderr 文件，但是在哪里？

> ID：15285648
> 
> 赞同：0
> 
> 时间：2013-03-08T02:24:21.987
> 
> 标签：python, subprocess

```
p = subprocess.Popen("sleep 5 ; ls -l", shell=True,stdout=subprocess.PIPE,stderr=subprocess.PIPE)
p.communicate() 
```

我在看`/usr/lib/python2.6/subprocess.py`

我非常清楚地看到，两者`stdout`和`stderr`都`p.communicate()`适用于其中之一`stdout`或`sdterr`之外`None`的情况`stdin`。

但是，我无法弄清楚代码中的哪个位置调用`_communicate()`关闭`p.stdout`和`p.stderr`用于 Popen 对象，只有`stdin`在`None`我上面的示例中？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:02:02.410

在`_communicate_with_poll`中，关闭是在其中完成的，并且`close_unregister_and_remove`有`_communicate_with_select`两行代码可以完成这项工作。还有第三种实现，但它只在 MS Windows 上使用。该实现似乎没有关闭和！`self.stdout.close()``seld.stderr.close()``_communicate``stdout``stderr`

# java - 我在编译时找不到符号错误

> ID：15285652
> 
> 赞同：-1
> 
> 时间：2013-03-08T02:24:51.423
> 
> 标签：java

```
import java.io.File;
 import java.io.BufferedReader;
 import java.io.InputStreamReader;
 import java.io.*;
 import java.io.InputStream;
 class pbdemo {

     static public void main(String[] args) throws Exception {
         String s;
         try {
             ProcessBuilder pb = new ProcessBuilder("cmd", "/f", "dir");
             pb.directory(new File("F:\\WINDOWS"));
             pb.start();
             BufferedReader br = new BufferedReader(new InputStreamReader(pb.getInputStream()));

             while ((s = br.readLine()) != null)
             System.out.println(s);

         } catch (Exception e) {
             System.out.println("sorry" + e);
         }
     }
 } 
```

有什么问题

```
BufferedReader br=new BufferedReader(new InputStreamReader(pb.getInputStream())); 
```

我得到找不到符号错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:30:52.593

你试图`InputStream`从 a中得到一个`ProcessBuilder`，这是错误的。

`ProcessBuilder.start()`返回一个 Process 对象，这就是拥有`getInputStream()`方法的对象。

试着把那条线换成这条线。

`BufferedReader br=new BufferedReader(new InputStreamReader(pb.start().getInputStream()));`

或者

```
Process pro = pb.start();
BufferedReader br=new BufferedReader(new InputStreamReader(pro.getInputStream())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:31:40.913

简单的回答。

`ProcessBuilder`没有`getInputStream`方法。

看到这个：[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

您可以使用：

```
BufferedReader br=new BufferedReader(new InputStreamReader(pb.start().getInputStream())); 
```

# apache - example.com/dir/index.php 有效，但 example.com/dir/ 无效

> ID：15285654
> 
> 赞同：0
> 
> 时间：2013-03-08T02:25:03.470
> 
> 标签：apache, httpd.conf

我在 Linux CENT OS 6.3 上使用最新的 php 和最新的 apache，

在 httpd.conf 我得到了

```
DirectoryIndex index.php

<Directory "/var/www/html">
Options Indexes FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

当我去：

```
example.com/mydir/index.php 
```

它有效，但它不适用于 example.com/mydir/

这对我来说是个问题。

实际上可能与 .htaccess 文件中的某些内容有关：

```
RewriteEngine on
options +FollowSymLinks

RewriteRule    ^([A-Za-z-0-9-_.]+)/pics/([A-Za-z-0-9-_.]*.*)?$ users/$1/pics/$2
#levanta de users/pics

RewriteRule    ^([A-Za-z-0-9-_.]+)/vids/([A-Za-z-0-9-_.]*.*)?$ users/$1/vids/$2
#levanta de users/vids

RewriteCond    %{REQUEST_URI} ^.*\.(html|png|jpg|gif|jpeg|css|js)
RewriteRule ^([^/]+)(/(.*))?$ - [L]

RewriteCond    %{REQUEST_URI} !settingsd
RewriteRule ^settings settingsd/settings.php

RewriteRule ^lists/ master/index.php
RewriteRule ^lists/(.*)$ $1

RewriteRule ^index\.(php) master/index.php
#levanta de master/

RewriteCond    %{REQUEST_URI} !.*\.(css|js|php)|pokes|settings|subgram
RewriteRule   ^([A-Za-z-0-9-_.]+)?$ master/$2

RewriteCond    %{REQUEST_URI} !pokesd
RewriteRule ^pokes(.*)$ pokesd/$1

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond    %{REQUEST_URI} !pokes|subgram
RewriteRule    ^([A-Za-z-0-9-_.]+)/([A-Za-z-0-9-_.]+.php)?$    master/$2
#levanta de master/

RewriteRule   ^messages/ messages.php

RewriteRule    ^notes/me/ notes/notes.php 
RewriteRule    ^notes/drafts/ notes/notes_drafts.php
RewriteRule    ^notes/tagged/ notes/notes_tagged.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !photos_albums|photos_stream
RewriteRule ^([A-Za-z-0-9-_.]+)/photos $1/view_photos.php
RewriteRule ^([A-Za-z-0-9-_.]+)/photos_albums $1/view_photos.php?sk=photos_albums
RewriteRule ^([A-Za-z-0-9-_.]+)/photos_stream $1/view_photos.php?sk=photos_stream

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z-0-9-_.]+)/friends $1/view_friends.php

RewriteCond    %{REQUEST_URI} !listsd
RewriteRule ^bookmarks/lists(.*)$ bookmarks/listsd/$1

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^v(.*)$ v/video_embed.php?sbid=$1

RewriteCond    %{REQUEST_URI} !.*\.(css|js|php)|notes/me/|notes/drafts/|notes/tagged/
RewriteRule    ^notes/ notes/

RewriteRule ^r.php$ gvrrgvrr45.php$1 
```

它与那里的规则有关，因为当我将其全部剥离并上传到服务器时，它突然起作用了，同样的 .htaccess 在 Windows 中工作，但在此配置中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:31:11.017

它与 .htaccess 无关。这是您的 Apache 设置 ( `/etc/httpd.conf`)

检查您的[DirectoryIndex](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)指令设置。它至少`index.php`应该支持您的需求：

```
DirectoryIndex index.html index.htm index.shtm index.shtml index.php 
```

或删除任何不符合您需要的条目。

# lingo - Adobe Director - Lingo 测验

> ID：15285657
> 
> 赞同：0
> 
> 时间：2013-03-08T02:25:28.283
> 
> 标签：lingo, adobe-director

因此，我正在使用 Adob​​e Director 进行测验，但我在整体环境中苦苦挣扎。

我将以下 Lingo 脚本添加到每个按钮，并给出正确答案：

```
 on mouseDown
    global gscore
    set gscore = gscore + 1 
```

在最后阶段，我使用以下 Lingo 脚本来检查获得的点，并为结果显示适当的精灵。

```
on enterFrame
  if gscore = 0 then set the memberNum of sprite (3) to 154
end if
  if gscore = 1 then set the memberNum of sprite (3) to 155
end if
  if gscore = 2 then set the memberNum of sprite (3) to 156
end if
  if gscore = 3 then set the memberNum of sprite (3) to 157
end if
  if gscore = 4 then set the memberNum of sprite (3) to 158
end if
  if gscore = 5 then set the memberNum of sprite (3) to 159
end if
end 
```

所以我的错误似乎是说没有声明的变量，但它是全局的吗？那怎么就认不出来了。第一个脚本附加到与正确答案对应的按钮上，每个按钮都有一个单独的脚本将其发送到下一个问题。旨在显示结果的最后阶段应显示特定的自定义精灵，具体取决于 gscore 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:35:28.567

很高兴您找到了解决方案。另一种方法是根本不使用 if 语句。您的 enterframe 脚本可能是这样的：

在 enterframe sprite(3).memberNum = 154+gscore 结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:26:02.507

想通了，道歉。

我删除了所有结尾 if 以使其成为完整的 if 语句。在第一个使用的脚本上设置全局变量，将值声明为 0。然后在递增时将其添加到先前定义的同名全局变量。

我相信我的问题在于全局变量实例的默认值是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T05:14:29.467

```
on exitframe me
   global gscore 
```

.

```
if gscore = 0 
   set the memberNum of sprite (3) to 154
else  if gscore = 1 then 
    set the memberNum of sprite (3) to 155
else if gscore = 2 then 
   set the memberNum of sprite (3) to 156
else if gscore = 3 then 
    set the memberNum of sprite (3) to 157
else if gscore = 4 then 
    set the memberNum of sprite (3) to 158
else  if gscore = 5 then 
  set the memberNum of sprite (3) to 159
end if

end 
```

# mysql - MySQL：为触发器内的每个 ID 创建一个不同的分区

> ID：15285660
> 
> 赞同：0
> 
> 时间：2013-03-08T02:25:34.860
> 
> 标签：mysql, triggers, partitioning

我阅读了 MySQL 中的分区，并想知道如何在我的情况下使用它：

我有一个项目，我在数据库中存储巨大的 csv 文件。

为此，我有一张桌子`'csvfiles'`和另一张桌子`'csvdata'`。

当时只对一个 csv 文件进行查询，所以我的想法是在每次添加 csv 文件时`csvdata` *为每个不同的主键值*`csvfiles`创建一个新分区。理想情况下，这应该自动完成，在触发器内部会很棒。

谁能告诉我这是否是一个有效的设置，以及如何实现？

# vba - 如何检查单元格在VBA中是否有效？

> ID：15285665
> 
> 赞同：4
> 
> 时间：2013-03-08T02:26:10.223
> 
> 标签：vba, vba, excel

如果

*   `r = 1`， 和
*   `c = 1`

下面的预期代码无效（它试图返回 Column 左侧两列的单元格`A`）

```
Cells(r, c).Offset(0, -2) 
```

如何检查预期的单元格在[vba](/questions/tagged/vba "显示标记为“vba”的问题")中是否有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T03:00:01.787

1.  使用一个`Range`对象来测试它是否有效（通用性优先）
2.  测试该列是否有效（假设您的硬编码`OFFSET`为`(0,2)`

**(1) 代码**

```
Sub Test1()
Dim r As Long
Dim c As Long
r = 1
c = 1
Dim rng1 As Range
On Error Resume Next
Set rng1 = Cells(r, c).Offset(0, -2)
On Error GoTo 0
If Not rng1 Is Nothing Then
'proceed with your code - range exists
Else
MsgBox "Range Error", vbCritical
End If
End Sub 
```

**(2) 代码**

```
Sub Test2()
Dim rng1 As Range
Dim r As Long
Dim c As Long
c = 3
r = 1
If c - 2 <= 0 Then
MsgBox "Error", vbCritical
Else
Set rng1 = Cells(r, c).Offset(0, -2)
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:13:06.077

这是给你的例子。

```
Sub sample()

    Dim r As Integer
    Dim c As Integer
    r = 1
    c = 1

    Dim validRng As Boolean
    validRng = isValidRng(r, c, 0, -2)
    Debug.Print validRng

    validRng = isValidRng(r, c + 5, 0, 2)
    Debug.Print validRng

     validRng = isValidRng(r, c, -1, 0)
    Debug.Print validRng

     validRng = isValidRng(r, c + 2, 0, -1)
    Debug.Print validRng

End Sub

Function isValidRng(row As Integer, col As Integer, offsetrow As Integer, offsetcol As Integer) As Boolean
'Returns if its valid range
    If ((row + offsetrow) > 0) And ((col + offsetcol) > 0) Then
        isValidRng = True
    Else
        isValidRng = False
    End If
End Function 
```

# python - 什么可能导致响应主体被切断（在客户端）？

> ID：15285671
> 
> 赞同：0
> 
> 时间：2013-03-08T02:27:16.523
> 
> 标签：python, json, sockets, response

我正在为调用我们的 Rest API 的活动代码生成器编写一个 python 语言插件。在多次尝试使用 requests 库但[失败](https://stackoverflow.com/questions/14711153/how-to-authenticate-with-requests-module-using-a-trust-store)后，我选择使用更低级别的 socket 和 ssl 模块，这些模块到目前为止运行良好。我正在使用一种非常粗略的方法来解析响应；对于正文中相当短的响应，这很好用，但我现在正在尝试检索更大的 json 对象（用户列表）。响应被截断如下（注意：为简洁起见，我删除了几个用户条目）：
`{"page-start":1,"total":5,"userlist":[{"userid":"jim.morrison","first-name":"Jim","last-name":"Morrison","language":"English","timezone":"(GMT+5:30)CHENNAI,KOLKATA,MUMBAI,NEW DELHI","currency":"US DOLLAR","roles":`
在此之后应该有更多用户，并且响应正文在控制台中的一行上。

这是我用来从 Rest API 服务器请求用户列表的代码：

```
import socket, ssl, json

host = self.WrmlClientSession.api_host
port = 8443
pem_file = "<pem file>"

url = self.WrmlClientSession.buildURI(host, port, '<root path>')

#Create the header
http_header = 'GET {0} HTTP/1.1\n\n'
req = http_header.format(url)

#Socket configuration and connection execution
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
conn = ssl.wrap_socket(sock, ca_certs = pem_file)
conn.connect((host, port))
conn.send(req)

response = conn.recv()
(headers, body) = response.split("\r\n\r\n")

#Here I would convert the body into a json object, but because the response is 
#cut off, it cannot be properly decoded.  
print(response) 
```

任何对此问题的见解将不胜感激！

**编辑：**我忘了提到我在服务器端调试了响应，一切都很正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T10:13:32.220

您不能假设您可以只调用`recv()`一次并获取所有数据，因为 TCP 连接只会缓冲有限的数量。此外，您不会解析任何标题来确定您期望的正文大小。您*可以*使用非阻塞套接字并继续阅读，直到它阻塞，这将主要工作，但根本不可靠且实践非常差，所以我不打算在这里记录它。

正是出于这个原因，HTTP 有方法指示正文的大小，如果您希望代码可靠，正确的方法是使用它们。有两件事要寻找。首先，如果 HTTP 响应有一个`Content-Length`then 表示响应正文中将出现多少字节 - 你需要继续阅读，直到你有那么多。第二个选项是服务器可能会向您发送一个使用[分块编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)的响应- 它通过包含一个`Transfer-Encoding`其值将包含文本的标头来表明这一点`chunked`。我不会在这里进行分块编码，请阅读[维基百科文章](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)详情。本质上，主体包含每个“块”数据的小标题，指示该块的大小。在这种情况下，您必须继续读取块，直到获得一个空块，这表示响应结束。`Content-Length`当服务器开始发送响应主体时，它不知道响应主体的大小，而是使用这种方法。

通常，服务器不会同时使用`Content-Length`分块编码，但实际上没有什么可以阻止它，所以这也是需要考虑的事情。如果您只需要与特定服务器进行互操作，那么您可以只知道它做了什么并使用它，但请注意，您将使您的代码的可移植性降低，并且对未来的更改更加脆弱。

请注意，使用这些标头时，您仍然需要循环读取，因为任何给定的读取操作都可能返回不完整的数据 - TCP 旨在停止发送数据，直到读取应用程序开始清空缓冲区，所以这不是你可以解决的问题。另请注意，每次读取甚至可能不包含完整的块，因此您需要跟踪有关当前块大小的状态以及您已经看到的块的数量。当您看到前一个块头指定的字节数时，您才知道读取下一个块头。

当然，如果您使用 Python 的无数 HTTP 库中的任何一个，您不必担心这些。作为一个之前必须实现一个相当完整的 HTTP/1.1 客户端的人，如果可能的话，您真的希望让其他人来做 - 有很多棘手的极端情况需要考虑，并且您上面的简单代码将会失败很多案例。如果`requests`对您不起作用，您是否尝试过任何标准 Python 库？有[`urllib`](http://docs.python.org/2/library/urllib.html)和[`urllib2`](http://docs.python.org/2/library/urllib2.html)用于更高级别的接口，并[`httplib`](http://docs.python.org/2/library/httplib.html)提供了一种较低级别的方法，您可能会发现它可以让您解决一些问题。

请记住，如果您确实必须修复问题，或者可能只是导入它们并猴子修补您的更改，您可以随时修改这些代码（当然是在复制到本地存储库之后）。您必须非常清楚不过，这是图书馆中的一个问题，而不仅仅是错误使用它。

如果您真的想实现一个 HTTP 客户端，那很好，但请注意它比看起来更难。

最后，我一直使用[`read()`](http://docs.python.org/2/library/ssl.html?highlight=ssl#ssl.SSLSocket.read)SSL 套接字的方法而不是`recv()`- 我希望它们是等效的，但是如果您仍然遇到问题，您可能希望尝试一下。

# javascript - 延迟运行代码（原型）

> ID：15285673
> 
> 赞同：0
> 
> 时间：2013-03-08T02:27:23.967
> 
> 标签：javascript, jquery, prototype, delay

我正在修改一个 Magento 模板，并希望有 1-2 秒的延迟来运行 2 行：popup.style.display = 'none'; $(menuId).removeClassName('active');

我根本不懂javascript，我该怎么做，谢谢

```
function wppHideMenuPopup(element, event, popupId, menuId)
{
    element = $(element.id); var popup = $(popupId); if (!popup) return;
    var current_mouse_target = null;
    if (event.toElement)
    {
        current_mouse_target = event.toElement;
    }
    else if (event.relatedTarget)
    {
        current_mouse_target = event.relatedTarget;
    }
    if (!wppIsChildOf(element, current_mouse_target) && element != current_mouse_target)
    {
        if (!wppIsChildOf(popup, current_mouse_target) && popup != current_mouse_target)
        {
            popup.style.display = 'none';
            $(menuId).removeClassName('active');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:31:03.610

使用 window.setInterval("javascript 函数",毫秒);

用法 > window.setInterval("hidethething()",2000);

只需将它（并用正确的函数替换）放在你想开始计算 2 秒的任何地方。

谢谢，@leo

# javascript - JQuery Sortable ：使可排序元素不可拖动，但可排序

> ID：15285674
> 
> 赞同：0
> 
> 时间：2013-03-08T02:27:38.197
> 
> 标签：javascript, jquery, html, css, jquery-ui

考虑以下**HTML**

```
<div class="sortcontainer">
    <div class="item">  i1</div>
    <div class="item">  i2</div>
    <div class="item nondraggable">  i3</div>
    <div class="item">   i4</div>
    <div class="item">  i5</div>
    <div class="item nondraggable">  i6</div>
    <div class="item nondraggable">  i7</div>
    <div class="item">  i8</div>
</div> 
```

我`sortable`在`sortcontainer` `div`.

**我想让一些项目（这里和`i3`）不可拖动。但它们应该在列表中保持可排序`i6``i7`**。

我尝试禁用对这些项目的排序。如果我这样做，它们将变得不可拖动，但它们的位置将被冻结。例如，一旦我禁用它们，我将无法在它们被禁用时丢弃任何`i6`东西。`i7`

我希望能够使这些元素不可拖动但仍可排序。

有任何想法吗？

**JSFiddle 链接**：[演示](http://jsfiddle.net/neekdamon/pSe9c/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T02:41:01.590

使用`cancel`参数设置不应拖动的元素。

```
cancel: '.nondraggable', 
```

[http://jsfiddle.net/ExplosionPIlls/pSe9c/1/](http://jsfiddle.net/ExplosionPIlls/pSe9c/1/)

# intellij-idea - 导出 IntelliJ 插件列表

> ID：15285681
> 
> 赞同：17
> 
> 时间：2013-03-08T02:28:15.693
> 
> 标签：intellij-idea

我错过了 Eclipse 的一个功能是导出已安装插件的列表。我还没有找到在 IntelliJ 中执行此操作的方法。

对于需要使用不同机器（包括不同操作系统）的开发人员来说，这会很有帮助。除了 availables.xml 和 disabled_plugins.txt 之外，还有其他方法可以获取已安装和激活的插件列表吗？必须使用两个文件来推断答案有点麻烦。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2018-08-27T09:51:37.730

打开设置，转到插件，通过“启用”过滤它们，然后选择整个列表（CTRL+A 可以），然后用 CTRL+C 复制它们。

这将为您提供一个很好的已启用插件列表及其版本。就像是：

```
BashSupport (1.6.13.182)
Behat Support (182.4129.45)
Blade Support (182.4129.45)
Codeception Framework (182.4129.45)
CoffeeScript (182.4129.45)
Command Line Tool Support (182.4129.45)
[...] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T11:20:23.087

现在没有更简单的方法可以做到这一点，请[投票支持此功能请求](http://youtrack.jetbrains.com/issue/IDEA-35331)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-24T03:21:09.013

我认为这里现在有插件： [Intellij plugin export](https://plugins.jetbrains.com/plugin/7891-plugin-importer-exporter/versions)

您可以下载并安装它，重新启动 IDEA 后，您可以在 File -> Export Plugins... 下看到选项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-23T10:14:49.203

我在这个目录中找到了 intellij 插件（Windows 7）：

> C:\Users\{USER_NAME}\.IntelliJIdea{IDEA_VERSION}\config\plugins

# javascript - 我只想显示某个地理位置半径内的标记？

> ID：15285686
> 
> 赞同：1
> 
> 时间：2013-03-08T02:28:55.090
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

在我的页面上，当它加载时它会获取您的位置并在您的位置设置一个标记，然后我希望它从我的数据库中加载所有标记并将它们设置在地图上，但我只想加载距离它们 1 公里以内的标记地点。我正在尝试设置它，但我遇到了一些麻烦。

所以标记是从数据库中加载的，如下所示：

```
<?php while($stmt -> fetch()) { ?>
var longi = "<?php echo $gLongitude; ?>";
var lati = "<?php echo $gLatitude; ?>";
var title = "<?php echo $gTitle; ?>";
setMarker(lati, longi, title);
<?php } $stmt -> close(); $mysqli -> close();?> 
```

然后 setMarker 函数调用如下：

```
function setMarker(lati, longi, title) {
    var latLongMarker = new google.maps.LatLng(lati,longi);
    marker = new google.maps.Marker({
        position: latLongMarker,
        map: map,
        draggable: false,
        title: title
    });
    arrMarkers.push(marker);
} 
```

这一切都很好，花花公子，并将数据库中的所有标记加载到地图上，但我怎么能只加载距离我 1 公里的标记呢？我阅读了有关 computeDistanceBetween() 的信息，但找不到可以挽救生命的示例。提前谢谢大家。

我最终找到了一种方法来完成它，它最终变得更容易和更快地处理在这里你去寻找任何人在未来寻找这个：

```
 <?php while($stmt -> fetch()) { ?>
        var longi = "<?php echo $gLongitude; ?>";
        var lati = "<?php echo $gLatitude; ?>";
        var title = "<?php echo $gTitle; ?>";
        var content = 'Bus arrives at: ' + "<?php echo $gWeekdayDay; ?>";
        database.push({latitude: lati, longitude: longi, markerTitle: title, content: content});
        <?php } $stmt -> close(); $mysqli -> close();?>

for (var i = 0; i < database.length; i++) {
                    createMarker(database[i].latitude, database[i].longitude, database[i].markerTitle, initialLocation, 
                        database[i].content);
                }

function createMarker(lati, longi, title, myPosition, content) {
    var latLongMarker = new google.maps.LatLng(lati, longi);
    distanceCompare.push({position: latLongMarker, markerTitle: title});
    setMarker(myPosition, latLongMarker, title, content);
}

function setMarker(myPosition, latLongMarker, title, content) {

        distance = google.maps.geometry.spherical.computeDistanceBetween(latLongMarker, myPosition);
        console.log('Distance of '+latLongMarker+ 'and original position' + myPosition + 'Is equal to '+distance);
            updateResults();
        if (distance < setDistance) {
            addMarker(latLongMarker, title, content);
            stopsfound++;
            updateResults();
            console.log(content);
        }
}

function addMarker(position, title, content) {
    console.log('Adding Marker ' + content);
    marker = new google.maps.Marker({
        position: position,
        map: map,
        title: title
    });
    bindInfoWindow(marker, content);
    markersArray.push(marker);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:29:43.683

您将需要使用[**Haversine 公式**](http://rosettacode.org/wiki/Haversine_formula)。下面的代码使用此公式使用[**PDO**](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)。您需要将其更改为`$mysqli`.

```
$stmt = $dbh->prepare("SELECT  name, lat, lng, (6372.8 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance FROM mytable HAVING distance < 1 ORDER BY distance ASC LIMIT 0 , 20");
    // Assign parameters
    $stmt->bindParam(1,$center_lat);//Coordinates of location
    $stmt->bindParam(2,$center_lng);//Coordinates of location
    $stmt->bindParam(3,$center_lat); 
```

在这个[**DEMO中使用了这个查询**](http://daviestrachan.co.uk/maps/stationmap8a.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:08:08.083

首先，您需要创建一个表格，例如调用地点，这需要具有 lat 和 long 字段。然后，您需要创建一个查询来获取半径（公里或英里）的位置，这里是查询示例

```
public function getRecents($nro_places, $lat='-33.45287', $lng='-70.58598') {
    $query = Doctrine_Query::create();
    $query->select('p.*, ( 6371 * acos( cos( radians('.$lat.') ) * cos( radians( m.lat ) ) * cos( radians( m.lng ) - radians('.$lng.') ) + sin( radians('.$lat.') ) * sin( radians( m.lat ) ) ) ) AS distance'); //this is all you need
    $query->from('Places p, p.Maps m');
    $query->having('distance < 3'); //3kms
    $query->where('status = 1'); //places enabled
    $query->orderBy('p.created_at DESC, distance ASC');
    $query->limit($nro_places);
    $result = $query->execute(array(), Doctrine_Core::HYDRATE_ARRAY);

    return $result;
} 
```

这是一个带有您需要的查询的查询示例。 [http://wiki.linuxservertech.com/faq/index.php?action=artikel&cat=4&id=7&artlang=en](http://wiki.linuxservertech.com/faq/index.php?action=artikel&cat=4&id=7&artlang=en)

希望这有帮助

# ios - 如何将 UITableViewCell 定位在屏幕底部？

> ID：15285687
> 
> 赞同：26
> 
> 时间：2013-03-08T02:28:56.637
> 
> 标签：ios, cocoa-touch, uitableview

a中有 1 到 3 个`UITableViewCell`s `UITableViewView`。有没有办法在之后始终将单元格定位在屏幕底部`reloadData`？

```
+----------------+     +----------------+     +----------------+
|                |     |                |     |                |
|                |     |                |     |                |
|                |     |                |     |                |
|                |     |                |     | +------------+ |
|                |     |                |     | |   cell 1   | |
|                |     |                |     | +------------+ |
|                |     | +------------+ |     | +------------+ |
|                |     | |   cell 1   | |     | |   cell 2   | |
|                |     | +------------+ |     | +------------+ |
| +------------+ |     | +------------+ |     | +------------+ |
| |   cell 1   | |     | |   cell 2   | |     | |   cell 3   | |
| +------------+ |     | +------------+ |     | +------------+ |
+----------------+     +----------------+     +----------------+ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-08-26T18:14:54.053

我创建了一个新的示例解决方案，因为以前的答案对于现代使用来说并不过时。

最新技术使用自动布局和自动调整单元格，因此以前的答案将不再有效。我重新设计了解决方案以使用现代功能，并创建了一个示例项目以放在 GitHub 上。

此代码不是计算每行的高度，这会导致额外的工作，而是获取最后一行的框架，以便可以计算从顶部插入的内容。它利用了表视图已经在做的事情，因此不需要额外的工作。

此代码还仅在为键盘或其他覆盖设置底部插图的情况下设置顶部插图。

请在 GitHub 上报告任何错误或提交改进，我将更新此示例。

GitHub：[https ://github.com/brennanMKE/BottomTable](https://github.com/brennanMKE/BottomTable)

```
- (void)updateContentInsetForTableView:(UITableView *)tableView animated:(BOOL)animated {
    NSUInteger lastRow = [self tableView:tableView numberOfRowsInSection:0];
    NSUInteger lastIndex = lastRow > 0 ? lastRow - 1 : 0;

    NSIndexPath *lastIndexPath = [NSIndexPath indexPathForItem:lastIndex inSection:0];
    CGRect lastCellFrame = [self.tableView rectForRowAtIndexPath:lastIndexPath];

    // top inset = table view height - top position of last cell - last cell height
    CGFloat topInset = MAX(CGRectGetHeight(self.tableView.frame) - lastCellFrame.origin.y - CGRectGetHeight(lastCellFrame), 0);

    UIEdgeInsets contentInset = tableView.contentInset;
    contentInset.top = topInset;

    UIViewAnimationOptions options = UIViewAnimationOptionBeginFromCurrentState;
    [UIView animateWithDuration:animated ? 0.25 : 0.0 delay:0.0 options:options animations:^{
        tableView.contentInset = contentInset;
    } completion:^(BOOL finished) {
    }];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-28T09:53:25.657

每当添加一行时调用此方法：

```
- (void)updateContentInset {
    NSInteger numRows=[self tableView:_tableView numberOfRowsInSection:0];
    CGFloat contentInsetTop=_tableView.bounds.size.height;
    for (int i=0;i<numRows;i++) {
        contentInsetTop-=[self tableView:_tableView heightForRowAtIndexPath:[NSIndexPath indexPathForItem:i inSection:0]];
        if (contentInsetTop<=0) {
            contentInsetTop=0;
            break;
        }
    }
    _tableView.contentInset = UIEdgeInsetsMake(contentInsetTop, 0, 0, 0);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-08T02:37:40.940

您可以在表格视图中设置标题并使其足够高以将第一个单元格向下推。然后相应地设置 tableView 的 contentOffset 。我不认为有一种快速的内置方法可以做到这一点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-24T22:49:59.987

我不喜欢空单元格`contentInset`或`transform`基于解决方案的解决方案，而是提出了其他解决方案：

[![例子](../Images/3a1dad20557d369a7a4c4345c3dab033.png)](https://i.stack.imgur.com/1IRDg.gif)

`UITableView`的布局是私有的，如果 Apple 愿意，可能会发生变化，最好完全控制，从而使您的代码面向未来且更加灵活。我切换到`UICollectionView`并实现了基于它`UICollectionViewFlowLayout`的特殊布局（Swift 3）：

```
override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
    // Do we need to stick cells to the bottom or not
    var shiftDownNeeded = false

    // Size of all cells without modifications
    let allContentSize = super.collectionViewContentSize()

    // If there are not enough cells to fill collection view vertically we shift them down
    let diff = self.collectionView!.bounds.size.height - allContentSize.height
    if Double(diff) > DBL_EPSILON {
        shiftDownNeeded = true
    }

    // Ask for common attributes
    let attributes = super.layoutAttributesForElements(in: rect)

    if let attributes = attributes {
        if shiftDownNeeded {
            for element in attributes {
                let frame = element.frame;
                // shift all the cells down by the difference of heights
                element.frame = frame.offsetBy(dx: 0, dy: diff);
            }
        }
    }

    return attributes;
} 
```

它适用于我的情况，并且显然可以通过以某种方式缓存内容大小高度来优化。另外，我不确定如果不对大数据集进行优化，它会如何执行，我没有测试过。我已经将示例项目与演示放在一起：[MDBottomSnappingCells](https://github.com/maniak-dobrii/iOS-solutions/tree/master/MDBottomSnappingCells)。

这是Objective-C版本：

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect;
{
    // Do we need to stick cells to the bottom or not
    BOOL shiftDownNeeded = NO;

    // Size of all cells without modifications
    CGSize allContentSize = [super collectionViewContentSize];

    // If there are not enough cells to fill collection view vertically we shift them down
    CGFloat diff = self.collectionView.bounds.size.height - allContentSize.height;
    if(diff > DBL_EPSILON)
    {
        shiftDownNeeded = YES;
    }

    // Ask for common attributes
    NSArray *attributes = [super layoutAttributesForElementsInRect:rect];
    if(shiftDownNeeded)
    {
        for(UICollectionViewLayoutAttributes *element in attributes)
        {
            CGRect frame = element.frame;
            // shift all the cells down by the difference of heights
            element.frame = CGRectOffset(frame, 0, diff);
        }
    }

    return attributes;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-06T17:05:59.743

这可以通过使用以下函数快速完成

```
func updateContentInsetForTableView(tblView: UITableView, animated: Bool) {

    let lastRow: NSInteger = self.tableView(tblView, numberOfRowsInSection: 0)
    let lastIndex: NSInteger = lastRow > 0 ? lastRow - 1 : 0
    let lastIndexPath: NSIndexPath = NSIndexPath(forRow: lastIndex, inSection: 0)
    let lastCellFrame: CGRect = tblView.rectForRowAtIndexPath(lastIndexPath)
    let topInset: CGFloat = max(CGRectGetHeight(tblView.frame) - lastCellFrame.origin.y - CGRectGetHeight(lastCellFrame), 0)
    var contentInset: UIEdgeInsets = tblView.contentInset
    contentInset.top = topInset
    let option: UIViewAnimationOptions = UIViewAnimationOptions.BeginFromCurrentState
    UIView.animateWithDuration(animated ? 0.25 : 0.0, delay: 0.0, options: option, animations: { () -> Void in
        tblView.contentInset = contentInset
    }) { (_) -> Void in }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-12T12:01:42.160

这是@Brennan 接受的解决方案的 Swift 3 版本，经过测试和批准:)

```
func updateContentInsetForTableView( tableView:UITableView,animated:Bool) {

    let lastRow = tableView.numberOfRows(inSection: 0)
    let lastIndex = lastRow > 0 ? lastRow - 1 : 0;

    let lastIndexPath = IndexPath(row: lastIndex, section: 9)

    let lastCellFrame = tableView.rectForRow(at: lastIndexPath)
    let topInset = max(tableView.frame.height - lastCellFrame.origin.y - lastCellFrame.height, 0)

    var contentInset = tableView.contentInset;
    contentInset.top = topInset;

    _ = UIViewAnimationOptions.beginFromCurrentState;
        UIView.animate(withDuration: 0.1, animations: { () -> Void in

    tableView.contentInset = contentInset;
   })

   } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-28T18:52:32.493

用这个。这肯定会有所帮助。

```
- (void)reloadData
{
    [super reloadData];

    [self recalculateContentInset];
    [self recalculateScrollIndicator];
}

- (void)recalculateContentInset
{
    CGFloat contentInsetHeight = MAX(self.frame.size.height - self.contentSize.height, 0);
    CGFloat duration = 0.0;
    [UIView animateWithDuration:duration
                          delay:0
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^{
        [self setContentInset:UIEdgeInsetsMake(contentInsetHeight, 0, 0, 0)];
    }completion:nil];
}

- (void)recalculateScrollIndicator
{
    if(self.contentSize.height >= self.frame.size.height){
        [self setShowsVerticalScrollIndicator:YES];
    } else {
        [self setShowsVerticalScrollIndicator:NO];
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T05:03:42.550

```
if(indexPath.row!=CategoriesArray.count-1)  
{    
    cell.hidden = YES;
}

return cell; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-08T16:44:35.007

我会根据单元格的数量在其父视图中调整 UITableView 的大小并重新定位。我想这是涉及最少变通办法的解决方案。另外，你真的需要使用 UITableView 吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-24T05:59:12.467

在新部分中添加一个空白单元格，并将其设置为索引为零的部分。

```
-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section==0)
    {
        return 1;
    }
    return [self.yourArray count];
} 
```

现在在

```
tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath //method add following in beginnig//

if (indexPath.section == 0 )
{
    UITableViewCell * cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
//    cell.backgroundColor = [UIColor clearColor];
    return cell;
} 
```

现在

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
if (indexPath.section == 0 )
{

    if (self.yourArray.count>0)
    {
        CGFloat totalCellHeight = self.messages.count * yourCellHeight;

        if (totalCellHeight>= self.table.bounds.size.height)
        {
            return 0;
        }
        return self.table.bounds.size.height - totalCellHeight;
    }
    else
        return self.table.bounds.size.height;

}

return yourCellHeight;
} 
```

现在将其粘贴到您要重新加载 tableView 的位置

```
[self.table reloadData];
[self.table scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:[self.yourArray count]-1 inSection:1] atScrollPosition:UITableViewScrollPositionBottom animated:YES]; 
```

它对我有用。希望这可以帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-20T18:11:01.560

无需一行代码的优雅快速的解决方案。

使用容器视图并将 UITableViewController 放入容器（嵌入 segue）。

您可以为此容器设置任何高度。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-14T13:43:11.360

我发现这样做的最佳方法是观察 tableview 的内容大小并在必要时调整插图。例如：

```
static char kvoTableContentSizeContext = 0;

- (void) viewWillAppear:(BOOL)animated
{
    [_tableView addObserver:self forKeyPath:@"contentSize" options:0 context:&kvoTableContentSizeContext];
}

- (void) viewWillDisappear:(BOOL)animated
{
    [_tableView removeObserver:self forKeyPath:@"contentSize"];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (context == &kvoTableContentSizeContext) {

        CGFloat contentHeight = _tableView.contentSize.height;
        CGFloat tableHeight = _tableView.frame.size.height;

        if (contentHeight < tableHeight) {

            UIEdgeInsets insets = _tableView.contentInset;

            insets.top = tableHeight - contentHeight;
            _tableView.contentInset = insets;

        } else {
            _tableView.contentInset = UIEdgeInsetsZero;
        }

    } else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-15T08:35:46.240

所有答案都有一些动态 rowHeight 和/或动画的怪癖。对我来说，最好的工作解决方案是表格的转换（翻转）：

```
tableView.transform = CGAffineTransform (scaleX: 1,y: -1) 
```

里面`cellForRowAt`：

```
cell.contentView.transform = CGAffineTransform (scaleX: 1,y: -1)
cell.accessoryView?.transform = CGAffineTransform (scaleX: 1,y: -1) 
```

您还可以反转您的数据数组，也可以翻转节页眉/页脚。您的页脚也将成为您的新页眉 - 但是，它有效。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-29T12:45:36.100

```
func updateContentInsetForTableView( tableView:UITableView,animated:Bool) {

    let lastRow = tableView.numberOfRows(inSection: 0)
    let lastIndex = lastRow > 0 ? lastRow - 1 : 0;

    let lastIndexPath = IndexPath(row: lastIndex, section: 9)

    let lastCellFrame = tableView.rectForRow(at: lastIndexPath)
    let topInset = max(tableView.frame.height - lastCellFrame.origin.y - lastCellFrame.height, 0)

    var contentInset = tableView.contentInset;
    contentInset.top = topInset;

    _ = UIViewAnimationOptions.beginFromCurrentState;
    UIView.animate(withDuration: 0.1, animations: { () -> Void in

        tableView.contentInset = contentInset;
    })

    if self.commesnts.count > 0 {
        tableView.scrollToRow(at: IndexPath(item:self.commesnts.count-1, section: 0), at: .bottom, animated: true)
    }

} 
```

我使用了@bkokot 解决方案，几乎没有添加。它做了两件事

```
1\. Start showing cells from bottom of UITableView
2\. Scroll cells to bottom so that last inserted row become visible
(just like chat) 
```

# html - 如何在 HTML 中以毫米为单位给出表格的宽度和高度

> ID：15285689
> 
> 赞同：4
> 
> 时间：2013-03-08T02:29:10.510
> 
> 标签：html

有没有办法以毫米为单位给出 HTML 表格的宽度和高度？

```
<table border="1">
 <tr width="17mm">
        <td>gukgu</td>
        <td>gukgu</td>
 </tr>
</table> 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T02:31:58.917

是的，您可以以毫米为单位设置宽度。但是，在元素上设置宽度`<tr>`通常不会做任何事情。相反，请考虑将此样式添加到表中：`width:17mm; table-layout:fixed`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T02:32:14.520

您可以使用`css`，但仅建议用于打印。要在屏幕上显示，请`em`使用`px`或`%`。

```
<table border="1">
 <tr>
        <td style="width: 17mm;">gukgu</td>
        <td style="width: 17mm;">gukgu</td>
 </tr>
</table> 
```

[见手册](http://www.w3.org/Style/Examples/007/units.en.html)

[查看演示](http://jsfiddle.net/tTxUK/)

# python - GoogleMaps API - 坐标地址（纬度，经度）

> ID：15285691
> 
> 赞同：16
> 
> 时间：2013-03-08T02:29:28.640
> 
> 标签：python, google-maps, google-geocoding-api

这真让我抓狂。到目前为止，我已经删除了这个密钥 1000 次。昨天它就像一个魅力，今天不再是python代码：

```
from googlemaps import GoogleMaps
gmaps = GoogleMaps("AIzaSyBIdSyB_td3PE-ur-ISjwFUtBf2O0Uo0Jo")
exactaddress ="1 Toronto Street Toronto"
lat, lng = gmaps.address_to_latlng(exactaddress)
print lat, lng

GoogleMapsError: Error 610: G_GEO_BAD_KEY 
```

它现在无明显原因返回上述错误。我认为我没有达到请求限制或最大速率为了保持安全，我什至引入了延迟（1 秒）......仍然得到同样的错误

有谁知道我该如何解决这个问题？如果您可以指出我当前使用的模块的替代方案，那么必须使用不同的 python 模块就可以了。

谢谢 C

PS：密钥是有效的，它是一个客户端密钥，当我在应用程序控制台中启用 GoogleMAP API3 时自动启用它。对域或 IP 没有限制

**编辑：所以这就是我最终使用的**

```
def decodeAddressToCoordinates( address ):
        urlParams = {
                'address': address,
                'sensor': 'false',
        }  
        url = 'http://maps.google.com/maps/api/geocode/json?' + urllib.urlencode( urlParams )
        response = urllib2.urlopen( url )
        responseBody = response.read()

        body = StringIO.StringIO( responseBody )
        result = json.load( body )
        if 'status' not in result or result['status'] != 'OK':
                return None
        else:
                return {
                        'lat': result['results'][0]['geometry']['location']['lat'],
                        'lng': result['results'][0]['geometry']['location']['lng']
                } 
```

Jason 向我指出的库也很有趣，但由于我的代码旨在修复某些问题（一次性使用），所以我没有尝试过他的解决方案。如果我再次编写代码，我肯定会考虑 :-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-14T08:42:12.683

自 2013 年 9 月起，Google Maps API v2[不再有效](https://developers.google.com/maps/articles/geocodingupgrade)。这是适用于 API v3 的代码（基于[此答案](https://stackoverflow.com/a/14582003/304209)）：

```
import urllib
import simplejson

googleGeocodeUrl = 'http://maps.googleapis.com/maps/api/geocode/json?'

def get_coordinates(query, from_sensor=False):
    query = query.encode('utf-8')
    params = {
        'address': query,
        'sensor': "true" if from_sensor else "false"
    }
    url = googleGeocodeUrl + urllib.urlencode(params)
    json_response = urllib.urlopen(url)
    response = simplejson.loads(json_response.read())
    if response['results']:
        location = response['results'][0]['geometry']['location']
        latitude, longitude = location['lat'], location['lng']
        print query, latitude, longitude
    else:
        latitude, longitude = None, None
        print query, "<no results>"
    return latitude, longitude 
```

有关参数和其他信息的完整列表，请参阅[官方文档](https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-11T20:20:05.913

尽管 Google 弃用了带有 googlemaps 的 V2 调用（这就是您看到中断调用的原因），但他们最近才宣布他们将给予开发人员六个月的延期（直到 2013 年 9 月 8 日），以便从 V2 迁移到 V3 API . 有关详细信息，请参阅[地理编码 API V2 更新](http://googlegeodevelopers.blogspot.com/2013/03/an-update-on-geocoding-api-v2.html)。

同时，查看[pygeocoder](http://code.xster.net/pygeocoder/wiki/Home)作为可能的 Python V3 解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T10:08:14.073

做了一些代码打高尔夫球，最终得到了这个版本。根据您的需要，您可能想要区分更多错误情况。

```
import urllib, urllib2, json

def decode_address_to_coordinates(address):
        params = {
                'address' : address,
                'sensor' : 'false',
        }  
        url = 'http://maps.google.com/maps/api/geocode/json?' + urllib.urlencode(params)
        response = urllib2.urlopen(url)
        result = json.load(response)
        try:
                return result['results'][0]['geometry']['location']
        except:
                return None 
```

# ruby-on-rails - 邮箱 JSON 格式

> ID：15285692
> 
> 赞同：0
> 
> 时间：2013-03-08T02:29:43.673
> 
> 标签：ruby-on-rails, json, messaging

我正在使用mailboxer gem，我想制作对话（show.html.haml）JSON格式以及邮箱（index.html.haml）JSON格式。

我试着像这样把它放在一个普通的 response_to 块中

```
 respond_to do 
   format.json { render :json => @conversation }
 end 
```

但它没有用。它说堆栈级别太深。有什么我想念的吗？

这些是控制器代码

```
 def mailbox
     @mailbox ||= current_user.mailbox
   end

   def conversation
      @conversation ||= mailbox.conversations.find(params[:id])

   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:23:28.813

I ended up figuring out what the problem was, I needed to add a show and index into my conversations controller so that I could then render in json. For anyone else that may have this problem this was what I did and it worked fine.

```
 def index
     @mailbox ||= current_user.mailbox

     respond_to do |format|
       format.html
       format.json { render :json => @mailbox }
     end
   end    

   def show
     @conversation ||= mailbox.conversations.find(params[:id])

     respond_to do |format|
       format.html
       format.json { render :json => @conversation }
     end
   end 
```

Hope this helps!

# algorithm - 最小距离算法

> ID：15285694
> 
> 赞同：4
> 
> 时间：2013-03-08T02:29:45.600
> 
> 标签：algorithm, distance, partitioning

我已经在这里阅读了一段时间，但这是我第一次发布，所以如果没有正确标记或任何内容，我深表歉意。无论如何，我被困在一个我在下面解释的问题上。

在这个问题中，我的工作是安排 n 个 wifi 路由器，以最小化任何房子和最近的 wifi 路由器之间的最长距离。我可以假设房屋被安排在一维空间中。我得到了房屋的位置作为与初始点的距离，并且这些位置按排序顺序给出。此外，我必须在 O(m log L) 中解决这个问题，其中 m 是房屋数量，L 是可以给出的最大位置。

我试图弄清楚这一点，但我想出的算法都无法解决所需的复杂性。感谢您提供有关如何解决此问题的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:04:43.877

这是一个提示。

很容易编写一个`O(m)`函数，该函数采用距离上限，并告诉您所需的最少路由器数量，以确保没有房子在路由器的距离之上。

现在搜索不超过`n`路由器的最大距离。

# ios - 使用约束以编程方式构建 titleView（或通常使用约束构建视图）

> ID：15285698
> 
> 赞同：32
> 
> 时间：2013-03-08T02:30:14.210
> 
> 标签：ios, nslayoutconstraint

我正在尝试构建一个带有如下约束的titleView：

![标题视图](../Images/70a018a79a6de0670a4b2863fff505b7.png)

我知道如何使用框架来做到这一点。我会计算文本的宽度、图像的宽度，创建一个具有该宽度/高度的视图以包含两者，然后将两者作为子视图添加到带有框架的适当位置。

我试图了解如何在约束条件下做到这一点。我的想法是内在的内容大小会在这里帮助我，但我正在疯狂地试图让它发挥作用。

```
UILabel *categoryNameLabel = [[UILabel alloc] init];
categoryNameLabel.text = categoryName; // a variable from elsewhere that has a category like "Popular"
categoryNameLabel.translatesAutoresizingMaskIntoConstraints = NO;
[categoryNameLabel sizeToFit]; // hoping to set it to the instrinsic size of the text?

UIView *titleView = [[UIView alloc] init]; // no frame here right?
[titleView addSubview:categoryNameLabel];
NSArray *constraints;
if (categoryImage) {
    UIImageView *categoryImageView = [[UIImageView alloc] initWithImage:categoryImage];
    [titleView addSubview:categoryImageView];
    categoryImageView.translatesAutoresizingMaskIntoConstraints = NO;
    constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[categoryImageView]-[categoryNameLabel]|" options:NSLayoutFormatAlignAllTop metrics:nil views:NSDictionaryOfVariableBindings(categoryImageView, categoryNameLabel)];
} else {
    constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[categoryNameLabel]|" options:NSLayoutFormatAlignAllTop metrics:nil views:NSDictionaryOfVariableBindings(categoryNameLabel)];
}
[titleView addConstraints:constraints];

// here I set the titleView to the navigationItem.titleView 
```

我不应该硬编码titleView的大小。它应该能够通过其内容的大小来确定，但是......

1.  除非我硬编码一个框架，否则 titleView 确定它的大小为 0。
2.  如果我设置`translatesAutoresizingMaskIntoConstraints = NO`应用程序崩溃并出现此错误：`'Auto Layout still required after executing -layoutSubviews. UINavigationBar's implementation of -layoutSubviews needs to call super.'`

# 更新

我让它与这段代码一起工作，但我仍然必须在 titleView 上设置框架：

```
UILabel *categoryNameLabel = [[UILabel alloc] init];
categoryNameLabel.translatesAutoresizingMaskIntoConstraints = NO;
categoryNameLabel.text = categoryName;
categoryNameLabel.opaque = NO;
categoryNameLabel.backgroundColor = [UIColor clearColor];

UIView *titleView = [[UIView alloc] init];
[titleView addSubview:categoryNameLabel];
NSArray *constraints;
if (categoryImage) {
    UIImageView *categoryImageView = [[UIImageView alloc] initWithImage:categoryImage];
    [titleView addSubview:categoryImageView];
    categoryImageView.translatesAutoresizingMaskIntoConstraints = NO;
    constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[categoryImageView]-7-[categoryNameLabel]|" options:NSLayoutFormatAlignAllCenterY metrics:nil views:NSDictionaryOfVariableBindings(categoryImageView, categoryNameLabel)];
    [titleView addConstraints:constraints];
    constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[categoryImageView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(categoryImageView)];
    [titleView addConstraints:constraints];

    titleView.frame = CGRectMake(0, 0, categoryImageView.frame.size.width + 7 + categoryNameLabel.intrinsicContentSize.width, categoryImageView.frame.size.height);
} else {
    constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[categoryNameLabel]|" options:NSLayoutFormatAlignAllTop metrics:nil views:NSDictionaryOfVariableBindings(categoryNameLabel)];
    [titleView addConstraints:constraints];
    constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[categoryNameLabel]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(categoryNameLabel)];
    [titleView addConstraints:constraints];
    titleView.frame = CGRectMake(0, 0, categoryNameLabel.intrinsicContentSize.width, categoryNameLabel.intrinsicContentSize.height);
}
return titleView; 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2016-01-14T22:09:05.933

我真的需要约束，所以今天玩了一下。我发现有效的是：

```
 let v  = UIView()
    v.translatesAutoresizingMaskIntoConstraints = false
    // add your views and set up all the constraints

    // This is the magic sauce!
    v.layoutIfNeeded()
    v.sizeToFit()

    // Now the frame is set (you can print it out)
    v.translatesAutoresizingMaskIntoConstraints = true // make nav bar happy
    navigationItem.titleView = v 
```

奇迹般有效！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-12T17:06:16.067

an0的答案是正确的。但是，它并不能帮助您获得想要的效果。

这是我构建自动具有正确大小的标题视图的秘诀：

*   创建一个`UIView`子类，例如`CustomTitleView`稍后将用作`navigationItem`'s的子类`titleView`。
*   在里面使用自动布局`CustomTitleView`。如果您希望`CustomTitleView`始终居中，则需要添加显式的 CenterX 约束（请参见下面的代码和链接）。
*   `updateCustomTitleView`每次您的 titleView 内容更新时调用（见下文）。我们需要将 titleView 设置为 nil，然后再次将其设置为我们的视图，以防止标题视图居中偏移。当标题视图从宽变为窄时会发生这种情况。
*   不要禁用`translatesAutoresizingMaskIntoConstraints`

要点：[https ://gist.github.com/bhr/78758bd0bd4549f1cd1c](https://gist.github.com/bhr/78758bd0bd4549f1cd1c)

`CustomTitleView`从您的 ViewController更新：

```
- (void)updateCustomTitleView
{
    //we need to set the title view to nil and get always the right frame
    self.navigationItem.titleView = nil;

    //update properties of your custom title view, e.g. titleLabel
    self.navTitleView.titleLabel.text = <#my_property#>;

    CGSize size = [self.navTitleView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize];
    self.navTitleView.frame = CGRectMake(0.f, 0.f, size.width, size.height);

    self.navigationItem.titleView = self.customTitleView;
} 
```

`CustomTitleView.h`带有一个标签和两个按钮的示例

```
#import <UIKit/UIKit.h>

@interface BHRCustomTitleView : UIView

@property (nonatomic, strong, readonly) UILabel *titleLabel;
@property (nonatomic, strong, readonly) UIButton *previousButton;
@property (nonatomic, strong, readonly) UIButton *nextButton;

@end 
```

样品`CustomTitleView.m`：

```
#import "BHRCustomTitleView.h"

@interface BHRCustomTitleView ()

@property (nonatomic, strong) UILabel *titleLabel;
@property (nonatomic, strong) UIButton *previousButton;
@property (nonatomic, strong) UIButton *nextButton;

@property (nonatomic, copy) NSArray *constraints;

@end

@implementation BHRCustomTitleView

- (void)updateConstraints
{
    if (self.constraints) {
        [self removeConstraints:self.constraints];
    }

    NSDictionary *viewsDict = @{ @"title": self.titleLabel,
                                 @"previous": self.previousButton,
                                 @"next": self.nextButton };
    NSMutableArray *constraints = [NSMutableArray array];

    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-(>=0)-[previous]-2-[title]-2-[next]-(>=0)-|"
                                                                             options:NSLayoutFormatAlignAllBaseline
                                                                             metrics:nil
                                                                               views:viewsDict]];

    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[previous]|"
                                                                             options:0
                                                                             metrics:nil
                                                                               views:viewsDict]];

    [constraints addObject:[NSLayoutConstraint constraintWithItem:self
                                                        attribute:NSLayoutAttributeCenterX
                                                        relatedBy:NSLayoutRelationEqual
                                                           toItem:self.titleLabel
                                                        attribute:NSLayoutAttributeCenterX
                                                       multiplier:1.f
                                                         constant:0.f]];
    self.constraints = constraints;
    [self addConstraints:self.constraints];

    [super updateConstraints];
}

- (UILabel *)titleLabel
{
    if (!_titleLabel)
    {
        _titleLabel = [[UILabel alloc] initWithFrame:CGRectZero];
        _titleLabel.translatesAutoresizingMaskIntoConstraints = NO;
        _titleLabel.font = [UIFont boldSystemFontOfSize:_titleLabel.font.pointSize];

        [self addSubview:_titleLabel];
    }

    return _titleLabel;
}

- (UIButton *)previousButton
{
    if (!_previousButton)
    {
        _previousButton = [UIButton buttonWithType:UIButtonTypeSystem];
        _previousButton.translatesAutoresizingMaskIntoConstraints = NO;
        [self addSubview:_previousButton];

        _previousButton.titleLabel.font = [UIFont systemFontOfSize:23.f];
        [_previousButton setTitle:@"❮"
                         forState:UIControlStateNormal];
    }

    return _previousButton;
}

- (UIButton *)nextButton
{
    if (!_nextButton)
    {
        _nextButton = [UIButton buttonWithType:UIButtonTypeSystem];
        _nextButton.translatesAutoresizingMaskIntoConstraints = NO;
        [self addSubview:_nextButton];
        _nextButton.titleLabel.font = [UIFont systemFontOfSize:23.f];
        [_nextButton setTitle:@"❯"
                     forState:UIControlStateNormal];
    }

    return _nextButton;
}

+ (BOOL)requiresConstraintBasedLayout
{
    return YES;
}

@end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-27T13:38:05.940

感谢@Valentin Shergin 和@tubtub！根据他们的回答，我在 Swift 1.2 中实现了带有下拉箭头图像的导航栏标题：

1.  `UIView`为自定义创建一个子类`titleView`
2.  在您的子类中： a) 对子视图使用自动布局，而不是对其自身。设置`translatesAutoresizingMaskIntoConstraints`为`false`子视图和`true`自身`titleView`。b) 实施`sizeThatFits(size: CGSize)`
3.  如果您的标题可以在文本更改后更改 call`titleLabel.sizeToFit()`和`self.setNeedsUpdateConstraints()`inside的子类`titleView`
4.  在您的 ViewController 调用自定义`updateTitleView()`并确保调用`titleView.sizeToFit()`并`navigationBar.setNeedsLayout()`在那里

这是的最小实现`DropdownTitleView`：

```
import UIKit

class DropdownTitleView: UIView {

    private var titleLabel: UILabel
    private var arrowImageView: UIImageView

    // MARK: - Life cycle

    override init (frame: CGRect) {

        self.titleLabel = UILabel(frame: CGRectZero)
        self.titleLabel.setTranslatesAutoresizingMaskIntoConstraints(false)

        self.arrowImageView = UIImageView(image: UIImage(named: "dropdown-arrow")!)
        self.arrowImageView.setTranslatesAutoresizingMaskIntoConstraints(false)

        super.init(frame: frame)

        self.setTranslatesAutoresizingMaskIntoConstraints(true)
        self.addSubviews()
    }

    convenience init () {
        self.init(frame: CGRectZero)
    }

    required init(coder aDecoder: NSCoder) {
        fatalError("DropdownTitleView does not support NSCoding")
    }

    private func addSubviews() {
        addSubview(titleLabel)
        addSubview(arrowImageView)
    }

    // MARK: - Methods

    func setTitle(title: String) {
        titleLabel.text = title
        titleLabel.sizeToFit()
        setNeedsUpdateConstraints()
    }

    // MARK: - Layout

    override func updateConstraints() {
        removeConstraints(self.constraints())

        let viewsDictionary = ["titleLabel": titleLabel, "arrowImageView": arrowImageView]
        var constraints: [AnyObject] = []

        constraints.extend(NSLayoutConstraint.constraintsWithVisualFormat("H:|[titleLabel]-8-[arrowImageView]|", options: .AlignAllBaseline, metrics: nil, views: viewsDictionary))
        constraints.extend(NSLayoutConstraint.constraintsWithVisualFormat("V:|[titleLabel]|", options: NSLayoutFormatOptions(0), metrics: nil, views: viewsDictionary))

        self.addConstraints(constraints)

        super.updateConstraints()
    }

    override func sizeThatFits(size: CGSize) -> CGSize {
        // +8.0 - distance between image and text
        let width = CGRectGetWidth(arrowImageView.bounds) + CGRectGetWidth(titleLabel.bounds) + 8.0
        let height = max(CGRectGetHeight(arrowImageView.bounds), CGRectGetHeight(titleLabel.bounds))
        return CGSizeMake(width, height)
    }
} 
```

和视图控制器：

```
override func viewDidLoad() {
    super.viewDidLoad()

    // Set custom title view to show arrow image along with title
    self.navigationItem.titleView = dropdownTitleView

    // your code ...
}

private func updateTitleView(title: String) {
    // update text
    dropdownTitleView.setTitle(title)

    // layout title view
    dropdownTitleView.sizeToFit()
    self.navigationController?.navigationBar.setNeedsLayout()
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-19T22:54:34.333

您必须设置框架，`titleView`因为您没有`position`在其父视图中为其指定任何约束。Auto Layout 系统只能从你指定的约束和它的子视图`size`中为你找出。`titleView``intrinsic content size`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-05-10T11:53:22.097

为了结合内部的自动布局约束和内部`titleView`的硬编码布局逻辑，您必须在您自己的自定义类（的子类）`UINavigationBar`中实现方法，如下所示：`sizeThatFits:``titleView``UIView`

```
- (CGSize)sizeThatFits:(CGSize)size
{
    return CGSizeMake(
        CGRectGetWidth(self.imageView.bounds) + CGRectGetWidth(self.labelView.bounds) + 5.f /* space between icon and text */,
        MAX(CGRectGetHeight(self.imageView.bounds), CGRectGetHeight(self.labelView.bounds))
    );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-29T10:45:49.233

这是我对 ImageAndTextView 的实现

```
@interface ImageAndTextView()
@property (nonatomic, strong) UIImageView *imageView;
@property (nonatomic, strong) UITextField *textField;
@end

@implementation ImageAndTextView

- (instancetype)init
{
    self = [super init];
    if (self)
    {
        [self initializeView];
    }

    return self;
}

- (void)initializeView
{
    self.translatesAutoresizingMaskIntoConstraints = YES;
    self.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

    self.imageView = [[UIImageView alloc] init];
    self.imageView.contentMode = UIViewContentModeScaleAspectFit;
    self.textField = [[UITextField alloc] init];
    [self addSubview:self.imageView];
    [self addSubview:self.textField];

    self.imageView.translatesAutoresizingMaskIntoConstraints = NO;
    self.textField.translatesAutoresizingMaskIntoConstraints = NO;
    //Center the text field
    [NSLayoutConstraint activateConstraints:@[
        [self.textField.centerXAnchor constraintEqualToAnchor:self.centerXAnchor],
        [self.textField.centerYAnchor constraintEqualToAnchor:self.centerYAnchor]
    ]];

    //Put image view on left of text field
    [NSLayoutConstraint activateConstraints:@[
        [self.imageView.rightAnchor constraintEqualToAnchor:self.textField.leftAnchor],
        [self.imageView.lastBaselineAnchor constraintEqualToAnchor:self.textField.lastBaselineAnchor],
        [self.imageView.heightAnchor constraintEqualToConstant:16]
    ]];
}

- (CGSize)intrinsicContentSize
{
    return CGSizeMake(CGFLOAT_MAX, CGFLOAT_MAX);
}
@end 
```

# css - CSS 中的 [x*="y"] 和 [x^="y"] 是什么意思？

> ID：15285700
> 
> 赞同：2
> 
> 时间：2013-03-08T02:30:29.430
> 
> 标签：css, css-selectors

我想知道 * 和 ^ 在 css 中创建类的含义是什么？

例如：

```
[class*="sample-"] 
```

和

```
[class^="sample-"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:33:21.787

`*=`意味着找到所有**在类属性中存在文本“sample-”**的元素。例如：

```
<style>
    [class*="sample-"] {}
</style>

<p class="asdsadsample-adas">Matches</p>
<p class="smple-">Doesn't match</p> 
```

`^=`这意味着查找**class 属性以文本 "sample-" 开头的**所有元素。例如

```
<style>
    [class^="sample-"] {}
</style>

<p class="sample-blah">Matches</p>
<p class="ssample-blah">Doesn't match</p> 
```

# php - 如何使数字在居中定位的 CSS 元素上左右扩展？

> ID：15285707
> 
> 赞同：1
> 
> 时间：2013-03-08T02:31:04.817
> 
> 标签：php, css, html, positioning

我一直在努力尝试许多不同的方法来达到健康元素的效果。

我想要发生的是让一个中央中位数向左推一个值，然后向右推另一个值。

我尝试过花车，哪种工作，但没有给我想要的效果。

当超过一定长度时，定位绝对会导致它们与中央中线重叠。

这几乎是正确的。

```
.travel-spacing {
    margin-bottom: 20px;
}

.stat-wrapper {
    height: 170px;
    width: 150px;
}

.stat-label-align {
    float: left;
    width: 150px;
    margin: 0 auto;
    text-align: center;
}

.stat-align {
    float: left;
    width: 150px;
    margin: 0 auto;
    text-align: center;
}

.val-1 {
    float: left;
    position: relative;
    margin-left: 35px;

}

.center-divide-h {
    position: absolute;
    width: 150px;
    margin: 45px auto auto -150px;
    text-align: center;
}

.center-divide-m {
    position: absolute;
    width: 150px;
    margin: 60px auto auto -150px;
    text-align: center;
}

.center-divide-s {
    position: absolute;
    width: 150px;
    margin: 75px auto auto -150px;
    text-align: center;
}

.val-2 {
    float: right;
    margin-right: 35px;
} 
```

这是PHP：

```
<div class="stat-wrapper">
<?php echo "<div class ='stat-label-align'>Level:</div> <span class=\"stat-align\">" . $playerLevel . "</span>"; ?><br />
<?php echo "<div class ='stat-label-align'>Exp:</div> <span class=\"stat-align\">" . $playerExp . "</span>"; ?><br />
<?php echo "<div class ='stat-label-align'>Health:</div> <span class=\"val-1\">" . $maxHealth . " </span><span class='center-divide-h'>/</span><span class='val-2'> " . $maxHealth . "</span>"; ?><br />
<?php echo "<div class ='stat-label-align'>Mana:</div> <span class=\"val-1\">" . $maxMana . " </span><span class='center-divide-m'>/</span><span class='val-2'> " . $maxMana . "</span>"; ?><br />
<?php echo "<div class ='stat-label-align'>Stamina:</div> <span class=\"val-1\">" . $maxStamina . "</span> <span class='center-divide-s'>/</span><span class='val-2'> " . $maxStamina . "</span>"; ?><br />
<?php echo "<div class ='stat-label-align'>Coins:</div> <span class=\"stat-align\">" . $money . "</span>"; ?><br />
</div>
<div class="travel-spacing"></div> 
```

我想要它：

```
 5 / 5000
40 / 5000 
```

它不像我通常做的那样干净，但正在尝试我能想到的一切。感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:45:04.547

我想我明白你在追求什么。像[这样](http://jsfiddle.net/uuBjH/1/)？

如果是这样，请查看更新后的 CSS：

```
.val-1 {
    display:inline-block;
    text-align:right;
    width:65px;
}
.center-divide {
    display:inline-block;
    width: 20px;
    text-align: center;
}
.val-2 {
    display:inline-block;
    width:65px;
} 
```

通过使用`display:inline-block`我可以对元素应用固定宽度`<span>`，并通过使用合适的数字和对齐方式，我可以产生你想要的效果。

# c - 这可能吗？？typedef int 字符？

> ID：15285710
> 
> 赞同：-5
> 
> 时间：2013-03-08T02:31:20.573
> 
> 标签：c, embedded

我知道 typedef 用作别名。但是如果我以这种形式使用 typedef 编译器是否会抛出错误或类型被重新定义为 char 或者它仍然与 int 相同但只是 char 作为它的同义词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:47:56.620

您不能重新定义内置类型。编译器会抱怨语句的语法。如果您没有自己尝试，这里有一个说明性示例：

主.c：

```
typedef int char;
int main() {
    return 0; 
} 
```

gcc 输出，当您尝试编译时：

```
main.c:1: error: two or more data types in declaration specifiers   
main.c:1: warning: useless type name in empty declaration 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:41:24.067

您不能重新定义内置类型，也不能使用关键字作为`typedef`.

# sql - 如何在列名模糊的数据库中定位数据？

> ID：15285713
> 
> 赞同：0
> 
> 时间：2013-03-08T02:31:52.443
> 
> 标签：sql, sql-server, database

在我们的数据库中，我们有许多具有非描述性列名称的表，例如（Attribute1、Attribute2....Attribute60 等）。

我想知道的是，如果给定一条特定的信息，例如我知道工作代码可能是“123456”，但我不知道我们数据库中的哪一列与工作代码相关，是否可以使用查询来查找出哪个表的哪一列包含与123456类似的数据？

我相当有信心我的同事曾经有一个查询来实现这一点，但他已经离开了我们的组织，我似乎找不到他的查询。

感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T04:32:08.547

sp_search_code 用于查找数据库中的任何代码项；但是，您需要的是一个 redgate 工具，它将索引数据库并帮助您搜索其内容。我会像 Just Aguy 一样建议您花一些时间清理这些通用列名和任何 gen 表名，祝您好运。

[http://vyaskn.tripod.com/sql_server_search_stored_procedure_code.htm](http://vyaskn.tripod.com/sql_server_search_stored_procedure_code.htm)

# jquery - jQuery 1.9 将 live() 迁移到 on() 多个事件不起作用

> ID：15285715
> 
> 赞同：2
> 
> 时间：2013-03-08T02:32:04.033
> 
> 标签：jquery

我已将 jquery 升级到 1.9.1 版，但 live() 功能已损坏。我现在正在将 live() 迁移到 on()，如[本文](https://stackoverflow.com/questions/14354040/jquery-1-9-live-is-not-a-function)所述。

但是这个 senario 是行不通的。可能是因为它针对多个事件，即“复制”、“粘贴”和“剪切”。Firefox 控制台中未捕获任何错误。

以前的代码：

```
$('#Password').live('copy paste cut', function (e) {
    e.preventDefault();
    alert("Please do not copy-paste your password");
}); 
```

现在：

```
$('body').on('copy paste cut', '#Password', function (e) {
    e.preventDefault();
    alert("Please do not copy-paste your password");
}); 
```

我想要一个干净而好的解决方案。不要将相同的代码写三遍。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:48:51.043

我终于想通了。这是因为我忘记输入代码

```
$(function (){
    ...
}) 
```

所以这个事件永远不会被注册。粗心的错误:(

# wso2 - 使用用户名令牌从 WSO2 WSF PHP 调用 WSO2 应用程序服务器服务

> ID：15285716
> 
> 赞同：0
> 
> 时间：2013-03-08T02:32:07.603
> 
> 标签：wso2

我尝试使用 WSO2 WSF PHP 作为客户端调用 WSO2 应用程序服务器服务。太棒了！成功！。

下一步，我在启用用户名令牌的情况下配置 WSO2 应用程序服务器服务，但失败了。:(

任何教程如何使用从 WSO2 WSF PHP 启用的用户名令牌访问/调用 WSO2 应用程序服务器服务？

多谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:54:16.993

您是否看到以下有关客户端安全的指南[http://wso2.org/project/wsf/php/2.0.0/docs/manual_content.html#6.6](http://wso2.org/project/wsf/php/2.0.0/docs/manual_content.html#6.6)。

# c - GDB 堆栈输出未显示完整的十六进制地址？

> ID：15285723
> 
> 赞同：1
> 
> 时间：2013-03-08T02:33:01.163
> 
> 标签：c, debugging, gdb

我的堆栈的 GDB 输出如下所示

```
0xffffd688:     0x98    0xd6    0xff    0xff    0x75    0x84    0x04    0x08 
```

我希望它看起来更像这样

```
0xbffff3b0: 0xbffff620 0xbffff3c9 0×00000006 0xbffff3d8 
```

有选择吗？我在这里错过了一些微不足道的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:49:19.577

你确实想要`(gdb) x/4xw $sp`：

```
(gdb) help x
Examine memory: x/FMT ADDRESS.
ADDRESS is an expression for the memory address to examine.
FMT is a repeat count followed by a format letter and a size letter.
Format letters are o(octal), x(hex), d(decimal), u(unsigned decimal),
  t(binary), f(float), a(address), i(instruction), c(char) and s(string).
Size letters are b(byte), h(halfword), w(word), g(giant, 8 bytes).
The specified number of objects of the specified size are printed
according to the format. 
```

在这种情况下，**重复计数**为`4`，**格式字母**为`x`（十六进制），**大小字母**为`w`（字，4 字节）。

# jquery - 在对话框中有多个提交的问题 jquery 和 PHP

> ID：15285726
> 
> 赞同：0
> 
> 时间：2013-03-08T02:33:14.223
> 
> 标签：jquery, forms, jquery-ui, submit, modal-dialog

我不能删除好的评论，它总是删除最后一个。

我的js：

```
 $(function () {          
        $( ".delete" ).click(function() {
            $( "#delete-confirm" ).dialog( "open" );
        });

        $( "#delete-confirm" ).dialog({
            autoOpen: false, modal: true, width: '600px', show: 'fade',
            buttons: {
                "Confimer": function() {

                    $( this ).dialog( "close" );
                    $('.form-comment').append('<input type="hidden" name="delete" />');
                    $(".form-comment").submit();
                },
                "Annuler": function() {
                    $( this ).dialog( "close" );
                }
            }
        });

    }); 
```

在 PHP 中：

```
<?php
 foreach ($commentManager->getList() as $comment) { ?>
     <form class="form-comment" method="post" style="display: inline;">
        <input type="hidden" name="id" value="<?php echo $comment['id']; ?>" />
      </form>
<?php } ?> 
```

我如何提交具有良好 id 的表单而不将我的 jquery 代码放在 php 页面的中间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:47:39.180

我认为如果您对此提出 AJAX 请求，最好只获取当前单击的 DOM

并分配`attr-table-id`给它，然后使用`$(this).data('table-id');`它并通过 AJAX 发送到您的服务器

如果您不想使用 AJAX ，请进行重定向而不是陷入表单提交问题，因为您正在提交带有该类的所有表单`form-comment` `(Use window.location)`

我希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:51:39.840

我希望我正确理解了您的问题，即您只想删除选定的评论。因此，您可以尝试以下操作：

```
var goodId = '';
$( ".delete" ).click(function() {
    goodId = $(this).attr('id');
    $( "#delete-confirm" ).dialog( "open" );
});
// and then later make these changes
$('.form-comment-'+goodId).append('<input type="hidden" name="delete" />');
$(".form-comment-"+goodId).submit();
goodId = ''; 
```

并在您的 php 代码中：

```
<?php
 foreach ($commentManager->getList() as $comment) { ?>
     <form class="form-comment-<?php echo $comment['id']; ?>" method="post" style="display: inline;">
        <input type="hidden" id="<?php echo $comment['id']; ?>" name="id" value="<?php echo $comment['id']; ?>" />
     </form>
<?php } ?> 
```

设置 goodId 如果需要，您可以使用 value 属性来获取评论 ID。

# java - java中的隐藏方法和类（Robotium）

> ID：15285728
> 
> 赞同：0
> 
> 时间：2013-03-08T02:33:18.543
> 
> 标签：java, class, robotium

有没有办法我可以看到一个方法是如何工作的？

```
public void testAddNote() throws Exception {
    solo.clickOnMenuItem("Add note");
    //Assert that NoteEditor activity is opened
    solo.assertCurrentActivity("Expected NoteEditor activity", "NoteEditor"); 
    //In text field 0, add Note 1
    solo.enterText(0, "Note 1");
    solo.goBack(); 
```

有没有办法我可以看到该`goBack()`方法的源代码？`new Solo()`被宣布。有没有办法可以看到 Solo 课程？它隐藏在哪里？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:38:59.080

这取决于单独存储在字段中的类是在您的项目中还是在开源项目中。如果它来自专有库，您可能看不到它的代码。

Java 不是一种解释型语言，它是一种编译型语言（至少可以很好地编译成字节码）。如果该类来自 jar 文件，您可能需要在网络上自行查找源代码。

[http://mvnrepository.com/](http://mvnrepository.com/)

是跟踪 jar 文件及其对应的 source-jar 文件的绝佳资源。

我猜它有一个 Robotium 类，所以你也可以看这里：

[http://code.google.com/p/robotium/wiki/Source?tm=4](http://code.google.com/p/robotium/wiki/Source?tm=4)

也许是这堂课？（或它的子类？）

[https://github.com/jayway/robotium/blob/master/robotium-solo/src/main/java/com/jayway/android/robotium/solo/Solo.java#L691](https://github.com/jayway/robotium/blob/master/robotium-solo/src/main/java/com/jayway/android/robotium/solo/Solo.java#L691)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:41:18.560

Java真的没有任何魔力。“solo”必须在类的某个地方声明。如果您按 ctrl-click on solo，Eclipse 应该能够找到它。也许某些插件对您隐藏了它？如果您查看原始 .java 文件，它必须在其中，可能是您正在处理的类的成员 - 在类定义附近查找它，或者只是在整个文件中进行文本搜索（我不'不知道您是如何查看该方法的，但是单个方法不足以使任何工作正常进行）。

一旦你找到对象“solo”的类型，你就可以找到那个类型——最坏的情况是谷歌它。

# javascript - 使用来自不同页面的数据自动填充表单

> ID：15285735
> 
> 赞同：-1
> 
> 时间：2013-03-08T02:34:07.950
> 
> 标签：javascript, php, jquery

我目前正在开发一个有多个页面的网站。其中一页是生成表格的表格。我希望如果我单击表格中的一个单元格（仅一列），它将带我到另一个带有表单的页面，并使用该单元格中的数据自动填充输入元素我点击了。我想不出一种方法来做到这一点，因为它们是两个不同的页面并且有两个不同的脚本，所以数据不会持续存在。现在，我只是拥有它，以便我的 PHP 脚本创建指向该其他页面的链接。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:42:57.197

*   您可以将ID发送到下一页并在那里进行查询
*   您可以将数据存储在 SESSION 中

对于第一种方式，只需`$_GET['id']`在表格页面中使用并使用它进行查询

```
<a href="url.php?id=your_id">Click</a> 
```

对于第二种方式，您必须设置第一种，`SESSION`然后才能使用它

**但第一种方法是你正在寻找的**

# php - 字符串修改会混淆 PHP 中的格式

> ID：15285738
> 
> 赞同：0
> 
> 时间：2013-03-08T02:34:54.037
> 
> 标签：php, date, formatting

```
$str = date("d")+1 . date("-m") . date("-y");
$date = new DateTime($str);
echo $date->format('y-m-d '); 
```

这工作正常，但是...

```
$str = date("d")+1 . date("-m") . date("-y");
$date = new DateTime($str);
echo $date->format('d-m-Y '); 
```

奇怪的是，两者都给出了不同的日期

我认为这是由于 DateTime 构造函数，但是有一个简单的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:40:57.223

`Y`并且`y`是不同的。

但关键是，如果您只想获取明天的日期，请不要编写这样的代码，只需使用：

```
$date = new DateTime('+1 day');
echo $date->format('Y-m-d'); 
```

如果您不在乎时间，那么您甚至可以使用：

```
$date = new DateTime('tomorrow'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T02:38:22.313

在日期格式中使用大写字母`Y`将为您提供四位数的年份。使用小写字母`y`只会给你两位数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T02:41:41.980

`date()`您可以使用 object代替手动添加字符串函数`modify`：

```
$str = date("d") . date("m") . date("y");
$time = new DateTime($str);
$time->modify("+1 day");
echo $time->format("d-m-y"); 
```

更好的方法：

```
$time = new DateTime("+1 day");
echo $time->format("d-m-y"); 
```

# python - 让 django admin 在列表结果中显示不超过 100 个字符

> ID：15285740
> 
> 赞同：26
> 
> 时间：2013-03-08T02:35:06.700
> 
> 标签：python, django

我正在为我的站点使用 Django admin，并且我想自定义字段在我的一个模型的 list_display 页面上的显示方式。

我的一个模型有一个`TextField`可以是 300 个字符

当模型在 Django admin 中列出时，我想将 Admin 列表显示中显示的文本长度限制为 100 个字符。

有没有办法在 Django Admin 类中做到这一点？

管理员.py：

```
class ApplicationAdmin(admin.ModelAdmin):
    model = Application
    list_display = [ "title1", "title2"] 
```

模型.py：

```
class Application(models.Model):
    title1 = models.TextField(max_length=300)
    title2 = models.TextField(max_length=300) 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-08T02:56:57.360

您可以在 ModelAdmin 类中显示返回字段值的截断版本的属性。利用内置的模板过滤器使这很容易。

```
from django.template.defaultfilters import truncatechars  # or truncatewords

class Foo(models.Model):
    description = models.TextField()

    @property
    def short_description(self):
        return truncatechars(self.description, 100)

class FooAdmin(admin.ModelAdmin):
    list_display = ['short_description'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-19T13:33:45.787

在您的 Admin.py 文件中：

```
class ApplicationAdmin(admin.ModelAdmin):
    list_display = ['titl1','title2'] # titl1 is behalf of title1

    def titl1(self, obj):
        return obj.title1[:100] 
```

# java - 将关键字存储在集合中并使用映射Java读取它们

> ID：15285744
> 
> 赞同：1
> 
> 时间：2013-03-08T02:35:46.137
> 
> 标签：java, map, set

我创建了一个包含文本的文件。

我想读取特定的单词，如“end”、“so”和“because”，用`Set`​​于存储这些关键字，并`Map`用于显示所有关键字和重复次数。

你能告诉我我应该怎么做吗？

```
...
openButton.addActionListener(new ActionListener() { 
    public void actionPerformed(ActionEvent e) { 
    JFileChooser fileChooser = new JFileChooser(); 
    int chosenFile = fileChooser.showOpenDialog(null);
    if(chosenFile == JFileChooser.APPROVE_OPTION){ 
        File selectedFile = fileChooser.getSelectedFile(); 
        if ( selectedFile.canRead()){ 
            Set<String> keywordList = new HashSet<String>();
            keywordList.add("and"); 
            keywordList.add("so"); 
            keywordList.add("because”);
... 
```

我不知道我怎么能从这里去使用`Map`fine 关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:40:28.923

只需使用 a`Map`作为映射形式 a 中的键`Set`。

```
 Map<String, Integer> keywordCount = new HashMap<String, Integer>();

   keywordCount.add("and", 0); 
   keywordCount.add("so", 0); 
   keywordCount.add("because”, 0);

   Set<String> keywords = keywordCount.keySet(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:55:50.870

```
openButton.addActionListener(new ActionListener() { 
    public void actionPerformed(ActionEvent e) { 
    JFileChooser fileChooser = new JFileChooser(); 
    int chosenFile = fileChooser.showOpenDialog(null);
    if(chosenFile == JFileChooser.APPROVE_OPTION){ 
        File selectedFile = fileChooser.getSelectedFile(); 
        if ( selectedFile.canRead()){ 
            Set<String> keywordList = new HashSet<String>();
            Map<String, Integer> keywordCount = new HashMap<String, Integer>();
            keywordList.add("and"); 
            keywordList.add("so"); 
            keywordList.add("because”);
            StringBuffer fileContent = new StringBuffer();
            java.io.BufferedReader br;
            try{
                // Read file content
                br = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(selectedFile)));
                String line = null;
                while((line = br.readLine()) != null){
                    fileContent.append(line).append("\n");
                }
            }catch(java.io.IOException ioe){
                ioe.printStackTrace();
            }finally{
                if(br != null){
                    br.close();
                }
            }
            // Get the number of occurrences for each keyword.
            Iterator<String> iterKeywords = keywordList.iterator();
            while(iterKeywords.hasNext()){
                String currentKeyword = iterKeywords.next();
                Pattern p = Pattern.compile(currentKeyword);
                Matcher m = p.matcher(fileContent.toString());
                int count = 0;
                while(m.find()){
                    count ++;
                }
                keywordCount.put(currentKeyword, new Integer(count));
            }
            System.out.println(keywordCount);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T02:56:01.700

关于从文件中读取文本，您可以遵循[此处](https://stackoverflow.com/questions/4716503/best-way-to-read-a-text-file)介绍的一些方法。

现在关于提取关键字，您可以跳过该`Set`部分并直接从文本转到`Map`.

根据您的问题，我假设您已经拥有关键字。

使用 Apache Commons [commons-lang3-3.1](http://commons.apache.org/proper/commons-lang//download_lang.cgi) StringUtils，您可以执行以下操作：

```
public static Map<String, Integer> countKeywords(String text, List<String> keywords) {

    Map<String, Integer> result = new HashMap<>();
    for (String keyword : keywords) {
        int count = StringUtils.countMatches(text, keyword);
        result.put(keyword, count);
    }
    return result;
} 
```

并像这样测试它：

```
public static void main(String args[]) {

    String text = "Mirror mirror on the wall wall, true hope lies beyond the coast...";

    List<String> keywords = new ArrayList<>();

    keywords.add("mirror");
    keywords.add("wall");
    keywords.add("sword");

    Map<String, Integer> result = countKeywords(text, keywords);

    for (Map.Entry<String, Integer> entry : result.entrySet()) {
        System.out.println("keyword: " + entry.getKey() + " >>> count: " + entry.getValue());
    }
} 
```

我只是将`countKeywords`方法设为静态，以便您可以复制/粘贴来测试它。

不要忘记下载[commons-lang3-3.1.jar](http://commons.apache.org/proper/commons-lang//download_lang.cgi)并将其添加到您的类路径中。

此测试输出如下内容：

```
keyword: mirror >>> count: 1
keyword: wall >>> count: 2
keyword: sword >>> count: 0 
```

我希望它有所帮助。

# ios - NSManagedObjectContext 保存似乎丢失了对象

> ID：15285746
> 
> 赞同：1
> 
> 时间：2013-03-08T02:35:52.707
> 
> 标签：ios, core-data

我正在使用以下代码创建一个对象：

```
 +(Checkin *) newCheckinWithId:(NSString*) checkinID forVenueId:(NSString *)venueId
{
    NSManagedObjectContext * context = [[AppDelegate sharedInstance] managedObjectContext];
    Checkin *ret = (Checkin *)[NSEntityDescription insertNewObjectForEntityForName:@"Checkin" inManagedObjectContext:context];
    ret.checkinID = checkinID;
    ret.forVenueID = venueId;
    ret.date = [NSDate date];
    NSError * error;
    if(![context save:&error]) {
        NSLog(@"Error saving!!!!!: %@", error.userInfo);
    }
    return ret;
} 
```

并且没有错误，但是保存后我再也没有看到该对象的任何记录。

在这个函数上运行调试器我看到它在 unprocessedInserts 中有 1 个对象，并且在上下文中的所有内部集合中保存了 0 个对象（我不确定这是否是预期的。

这是我用来创建商店 + 托管对象上下文的代码（我对所有内容都使用 1 个上下文）它基本上全部来自我发现的堆栈溢出帖子

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil)
    {
        return _managedObjectModel;
    }
    //NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];
    //__managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    //NSArray *testArray = [[NSBundle mainBundle] URLsForResourcesWithExtension:@"momd"subdirectory:nil];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"Model" ofType:@"momd"];

    if( !path ) path = [[NSBundle mainBundle] pathForResource:@"Model" ofType:@"mom"];

    NSURL *modelURL = [NSURL fileURLWithPath:path];

    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    //__managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];

    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if((_persistentStoreCoordinator != nil)) {
        return _persistentStoreCoordinator;
    }

    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];
    NSPersistentStoreCoordinator *psc = _persistentStoreCoordinator;

    // Set up iCloud in another thread:

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // ** Note: if you adapt this code for your own use, you MUST change this variable:
        NSString *iCloudEnabledAppID = @"[MY APP ID]";

        // ** Note: if you adapt this code for your own use, you should change this variable:
        NSString *dataFileName = @"foursquareaugmentation.sqlite";

        // ** Note: For basic usage you shouldn't need to change anything else

        NSString *iCloudDataDirectoryName = @"Data.nosync";
        NSString *iCloudLogsDirectoryName = @"Logs";
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSURL *localStore = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:dataFileName];
        NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

        if (iCloud) {

            NSLog(@"iCloud is working");

            NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

            NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
            NSLog(@"dataFileName = %@", dataFileName);
            NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
            NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);
            NSLog(@"iCloud = %@", iCloud);
            NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);

            if([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
                NSError *fileSystemError;
                [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]
                       withIntermediateDirectories:YES
                                        attributes:nil
                                             error:&fileSystemError];
                if(fileSystemError != nil) {
                    NSLog(@"Error creating database directory %@", fileSystemError);
                }
            }

            NSString *iCloudData = [[[iCloud path]
                                     stringByAppendingPathComponent:iCloudDataDirectoryName]
                                    stringByAppendingPathComponent:dataFileName];

            NSLog(@"iCloudData = %@", iCloudData);

            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
            [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

            [psc lock];
            NSError *error;

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:[NSURL fileURLWithPath:iCloudData]
                                    options:options
                                      error:&error];

            if( error )
            {
                NSLog(@"Error adding persistent store %@, %@", error, [error userInfo]);

                // comment in this line while debugging if get "Can't find model for source store" error in addPersistentStoreWithType.
                // it means the sqlite database doesn't match the new model and needs to be created from scratch.
                // this happens if you change the xcdatamodel instead of creating a new one under Xcode->Editor->Add Model Version...
                // CoreData can only automatically migrate if there is a new model version (it can't migrate if the model simply changes, because it can't see the difference between the two models).
                // be sure to back up the database if needed, because all data will be lost.
                //[fileManager removeItemAtPath:iCloudData error:&error];

                /*// this is another way to verify the hashes for the database's model to make sure they match one of the entries in the momd directory's VersionInfo.plist
                 NSDictionary *sourceMetadata = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType URL:[NSURL fileURLWithPath:iCloudData] error:&error];

                 if( !sourceMetadata )
                 NSLog(@"sourceMetadata is nil");
                 else
                 NSLog(@"sourceMetadata is %@", sourceMetadata);*/
            }

            [psc unlock];
        }
        else {
            NSLog(@"iCloud is NOT working - using a local store");
            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

            [psc lock];
            NSError *error;

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:localStore
                                    options:options
                                      error:nil];

            if( error )
                NSLog(@"Error adding persistent store %@, %@", error, [error userInfo]);
            [psc unlock];
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"SomethingChanged" object:self userInfo:nil];
        });
    });

    return _persistentStoreCoordinator;   
}

/*
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *) managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [_managedObjectContext setPersistentStoreCoordinator: coordinator];
    }
    return _managedObjectContext;
} 
```

我已经为此安静地工作了一段时间，并且无法尝试任何帮助或调试步骤，我们将不胜感激。（也不适用于 icloud 或本地）

也许我取错了，这就是为什么我没有得到对象。这是我的收获：

```
+(NSArray *) checkinsForVenue:(NSString *) venueID
{
    NSManagedObjectContext * context = [[AppDelegate sharedInstance] managedObjectContext];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Checkin" inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    request.entity = entity;

    //NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(forVenueID = %@)", venueID];
    //request.predicate = predicate;

    NSError *error;
    NSArray * ret = [context executeFetchRequest:request error:&error];
    if(ret == nil) {
        NSLog(@"%@", error.description);
    }
    return ret;
} 
```

编辑：我问错了问题。保存工作正在获取不是。仍然无法弄清楚我的获取有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:11:06.660

您是否检查过它是否实际上被持久化到 sqlite？

您的应用程序应该在`~Library/Application Support/iPhone Simulator/6.1/Applications`. 您必须找到属于您的应用程序文件夹（它们都由 UUIDS 命名），然后在`Documents`文件夹中查找 sqlite 文件。在您的代码中，应该是`foursquareaugmentation.sqlite`.

在该目录中打开一个终端窗口并启动`sqlite3 foursquareaugmentation.sqlite`以开始查询数据库。

您应该找到一个名为的表`ZCHECKIN`（如果您有一个名为 的托管对象类`Checkin`），并且每次保存上下文时，它都应该添加到该表中。

因此，`select * from zcheckin;`在每次保存后运行应该会向您显示该表中又添加了一行。

如果这没有发生，则`save`操作中出现问题。如果它在数据库表中，那么它在您的代码中丢失了对对象的引用，将其设置到`nil`某个地方，或者类似的东西。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T06:50:37.687

`create`在我看来，您应该在和中创建两个上下文`fetch`。这将使核心数据混乱，并且不会从托管对象中获取最新的对象，尽管在`insert new object successfully`.

所以我建议，你应该在两种方法之间传递上下文。至少，它对我有用。

# android - Android GC Log消息的含义

> ID：15285750
> 
> 赞同：3
> 
> 时间：2013-03-08T02:36:32.077
> 
> 标签：android, garbage-collection, android-4.0-ice-cream-sandwich, android-3.0-honeycomb, android-logcat

首先，我想在这里为 Honeycomb 粘贴一些 GC 日志消息。

```
03-08 01:31:54.354: D/dalvikvm(258): GC_CONCURRENT freed 196K, 5% free 7078K/7431K, paused 3ms+3ms
03-08 01:31:54.494: D/dalvikvm(258): GC_FOR_ALLOC freed 4K, 5% free 7073K/7431K, paused 75ms
03-08 01:31:54.494: I/dalvikvm-heap(258): Grow heap (frag case) to 7.391MB for 411152-byte allocation 
```

我这里有 4 个问题。

1.  我在 Google i/o 2011 上观看了视频“ [Android 内存管理](http://youtu.be/_CruQY55HOk)”，但我仍然不清楚 5% 的免费 7078K/7431K。这意味着我们在 7431K 堆大小中使用 7078K，但是 7431K 在这里意味着什么？因为我注意到 7431K 会达到一个很大的数量。这个数字有什么政策吗？如果这意味着总堆大小，它应该是 16M 或 32M 或类似的东西。但这里显然不是..

2.  Honeycomb 也有类似`Grow heap (frag case) to 7.391MB for 411152-byte allocation`Gingerbread 没有的消息。这是什么意思？

3.  Honeycomb 及更高版本中的 GC 日志消息不显示“external xxxK/xxxK”之类的外部内存信息，为什么？

4.  我也注意到，在ICS及以后的版本中，GC日志消息也有一个总时间`GC_FOR_ALLOC freed 190K, 13% free 5409K/6164K, paused 67ms, total 71ms`，但是这里alloc gc的总时间大于暂停时间，有时你会注意到总时间会比暂停时间大得多。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T00:07:45.790

关于第 3 点（关于外部内存信息），可能是因为位图是 Dalvik 内存的一部分，而不是现在的外部内存，因此外部内存与垃圾收集器几乎没有相关性。

# amazon-redshift - 从 pgAdmin 连接到 Redshift 集群

> ID：15285752
> 
> 赞同：23
> 
> 时间：2013-03-08T02:36:48.603
> 
> 标签：amazon-redshift, pgadmin

*更新*：也在 PgAdmin 支持邮件列表中[询问](http://www.postgresql.org/message-id/CAAD1YJpBtgvJ+6Wk8NFOJORJVu5YH7Jtg9P-TRy88=Q4DmbPzg@mail.gmail.com)。

* * *

所以我有一个 AWS Redshift 集群启动并运行，我可以从命令行连接到它

`$ psql -h host -d database -p port -U username`

我想通过 pgAdmin III 连接到集群，但是在我连接到集群后，我收到一条错误消息：

> 错误：必须是超级用户才能查看 default_tablespace

请注意，我输入的字段是：名称、主机、端口、维护数据库、用户名和密码，所有这些都与使用 psql 命令输入的相同。

现在，如果我通过 psql 连接，我会检查：

`$ \tu`

这个用户 [AWS 授予的主用户] 实际上是一个超级用户。那么对于可能导致此错误的原因有什么建议吗？

作为后续问题，当我连接到其他远程数据库时，即使我不是超级用户，我也不会收到此错误，那么这里发生了什么？Redshift 在通过 pgAdmin 连接时会导致发生此错误怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-19T11:03:45.290

[PGAdmin 1.6.3（从 2007 年 3 月开始！）](https://www.postgresql.org/ftp/pgadmin/pgadmin3/v1.6.3/osx/)对我来说（在 OS X 上）与 Redshift 一起工作得很好。

我想这是有道理的，因为 Redshift 是从 Postgres 8.0 分叉的。

注意：“很好”是指我想要从 GUI 中获得的东西可以正常工作。仍有一些怪癖和错误消息需要忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T19:28:10.363

试试 SQLWorkbench。我没有尝试过 pgadmin，但是 SqlWorkbench 和 Postgresql jdbc 连接器对我来说非常适合。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-08T17:44:54.157

如果您只需要一种 GUI 方式来编辑复杂的 SQL，并且不想每次进行更改时都复制粘贴，则可以使用编辑快捷方式

```
pguser=> \e 
```

这将打开您选择的编辑器（保存在您的机器上`$EDITOR`）

要仅为会话保留而覆盖它（如果您的默认设置是`vim`但想要使用`gedit`），请运行以下命令：

```
$ EDITOR=gedit psql -h host -d database -p port -U username 
```

`\e`使用然后保存并退出编辑您的 SQL 。它会运行你的代码。然后`\e`再次打开，它会用以前的查询填充您的编辑器。

享受！

# html - 在 IE、Chrome 和 Firefox 中使用浮动时阻止单击事件

> ID：15285758
> 
> 赞同：0
> 
> 时间：2013-03-08T02:37:29.653
> 
> 标签：html, css

我试图理解为什么以下示例不支持单击 Chrome 25.0 或 Firefox 18 中的按钮。它适用于 IE 9/10。

我觉得好像我错过了一些非常基本的东西。Z指数？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style>
        html, body {
            height: 100%;
            margin: 0px;
            overflow: hidden;
            width: 100%;
        }

        .top {
            height: 100%;
            width: 100%;
            overflow: hidden;
            background: gold;
            text-align: center;
            vertical-align: middle;
            z-index: 1;
        }
        .left {
            float: left;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            width: 80%;
        }

        .right {
            float: right;
            height: 100%;
            position: absolute;
            right: 0;
            top: 0;
        }
    </style>
</head>
<body>
    <div class="top">
        <button id="btn" onclick="alert('hello')">Click Me!</button>
    </div>
    <div class="left">
        left
    </div>
    <div class="right">
        right
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:40:25.520

z-index 属性仅适用于定位元素，因此请添加类似`position:relative;`#top div 的内容。

**[jsFiddle 示例](http://jsfiddle.net/gcfjD/)**

另一种方法是应用于`pointer-events:none;`您的#left div，以便单击传递到其下方的元素。

**[jsFiddle 示例](http://jsfiddle.net/j08691/gcfjD/1/)**

# listview - 如何通过单击歌曲列表来播放歌曲

> ID：15285759
> 
> 赞同：0
> 
> 时间：2013-03-08T02:37:40.033
> 
> 标签：listview, android-mediaplayer

我是 Android 编程新手。我想构建 MediaPlayer 应用程序。

实际上，我之前已经构建了一个简单的 MediaPlayer 应用程序。我以前的应用程序只有一个按钮播放、一个按钮暂停和一个按钮停止。当单击播放按钮时，歌曲将播放。

我的新应用程序想要使用 ListLayout 和一些按钮（如播放、暂停和停止）来制作歌曲列表。我想要的是当我单击歌曲列表中的第一首歌曲时，第一首歌曲将播放..

我已经在谷歌进行了一些研究，但没有找到我能理解的简单答案..我希望你们能帮助我..非常感谢..=)

这是我的更新代码..我不知道如何调用歌曲列表..我将我的歌曲 1、歌曲 2、歌曲 3 存储在原始文件中..但是为了播放歌曲，我只能播放一首歌曲..

```
 package com.example.test7;

  import android.media.MediaPlayer;
  import android.os.Bundle;
  import android.app.Activity;
  import android.view.View;
  import android.widget.AdapterView;
  import android.widget.ArrayAdapter;
  import android.widget.ImageButton;
  import android.widget.ListView;
  import android.widget.Toast;
  import android.widget.AdapterView.OnItemClickListener;

  public class MainActivity extends Activity {

MediaPlayer mp;
int position;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mp = MediaPlayer.create(this,R.raw.song1);

    setContentView(R.layout.activity_main);

    ListView list = (ListView) findViewById(R.id.listView1);
    String[] values = new String[] {"song1","song2","song3","song4","song5",
                                    "song6","song7","song8","song9","song10"};

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_list_item_1, android.R.id.text1, values);

    list.setAdapter(adapter);

    list.setOnItemClickListener(new OnItemClickListener () {
          public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {

            ListView list2 = (ListView) findViewById(R.id.listView1);
            String item = (String) list2.getAdapter().getItem(position);
            Toast.makeText(MainActivity.this, item + " selected", 5).show();

            mp.start();
        }
    });

    ImageButton btnPlay = (ImageButton) this.findViewById(R.id.imageButton1);
    ImageButton btnPause = (ImageButton) this.findViewById(R.id.imageButton2);
    ImageButton btnStop = (ImageButton) this.findViewById(R.id.imageButton3);

    btnPlay.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
        if (mp == null) {
                mp = MediaPlayer.create(MainActivity.this, R.raw.song1);

            }
        if (!mp.isPlaying()) {
             mp.start();

           }

        }
    });

    btnPause.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (mp != null)
            {
                mp.pause();
                position = mp.getCurrentPosition();
            }

        }
    });

    btnStop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (mp != null)
            {
                if (mp.isPlaying()) {
                    mp.stop();
                }
                mp.release();
                mp = null;
            }
        }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T04:06:27.327

mp.reset(); 需要在代码中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T16:21:24.937

您可以通过使用将出现在 r.java 中的歌曲的最终 int 值来实现它注意：检查 R.java 文件中所有歌曲的最终 int 值。

```
final int[] mid = new int[] {0x7f040000,0x7f040001,0x7f040002,0x7f040003,0x7f040004,0x7f040005};
mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view, int position,
long id) {
s=MediaPlayer.create(SimpleListViewActivity.this, mid[position]);
s.start();
}
}); 
```

# ios - 空的 UIPickerView 导致应用在滚动时崩溃

> ID：15285765
> 
> 赞同：0
> 
> 时间：2013-03-08T02:37:59.317
> 
> 标签：ios, crash, uipickerview

我已将我的视图控制器设置为我的 UIPickerView 的数据源和委托，它由 IBOutlet 连接。屏幕显示一个空的选择器视图，在滚动时会崩溃。从日志中，似乎没有调用委托和数据源方法：我错过了什么？

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    NSLog(@"test");
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    if ((!self.projectNames) || ([self.projectNames count] == 0)) {
        NSLog(@"no array");
        return 1;
    }
    NSLog(@"there is an array");
    return [self.projectNames count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    if (self.projectNames) {
        return [self.projectNames objectAtIndex:row];
    }
    return @"No Projects";
} 
```

错误是：

```
2013-03-07 22:15:15.929 CamSquad[1128:907] *** Assertion failure in -[UITableViewRowData rectForRow:inSection:], /SourceCache/UIKit/UIKit-2380.17/UITableViewRowData.m:1630
2013-03-07 22:15:15.932 CamSquad[1128:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'request for rect at invalid index path (<NSIndexPath 0x1d097e80> 2 indexes [0, 0])'
*** First throw call stack:
(0x344de2a3 0x3c33797f 0x344de15d 0x34db3ab7 0x36316ffb 0x36334919 0x3649ec63 0x3666e8ef 0x3640923b 0x364226ed 0x36403d89 0x363cb3f5 0x365b8a39 0x362ef82f 0x362ee293 0x362f91e7 0x362f8db3 0x362e6801 0x362e611b 0x37fda5a3 0x37fda1d3 0x344b3173 0x344b3117 0x344b1f99 0x34424ebd 0x34424d49 0x37fd92eb 0x3633a301 0x671d5 0x3c76eb20)
libc++abi.dylib: terminate called throwing an exception 
```

# plone - Plone bin/instance start 和 bin/instance restart 有时会失败

> ID：15285766
> 
> 赞同：3
> 
> 时间：2013-03-08T02:38:09.230
> 
> 标签：plone

有时看起来像 Plone 站点的 bin/instance 启动失败。症状

*   该网站已经运行了一段时间没有维护

*   一个运行构建：`bin/buildout`

*   尝试使用`bin/instance start`或重新启动站点`bin/instance restart`

*   网站无法启动。没有任何内容记录到控制台。

*   但是，如果您`bin/instance fg`先运行该站点确实会启动

这会影响 Plone 3.x 和 Plone 4.x 站点。

以下是该过程如何进行的示例。您可以看到，尽管给出了重新启动和启动，但该站点并没有真正启动，但最终出现了 fg：

```
*************** /PICKED VERSIONS ***************
xxx@yyy:/srv/plone/zzz$ bin/instance restart
.
daemon process restarted, pid=27819
xxx@yyy:/srv/plone/zzz$ bin/instance start

daemon process started, pid=27945
xxx@yyy:/srv/plone/zzz$ bin/instance status
daemon manager not running
xxx@yyy:/srv/plone/zzz$ bin/instance fg
2013-03-08 04:18:11 INFO ZServer HTTP server started at Fri Mar  8 04:18:11 2013
    Hostname: 0.0.0.0
    Port: xxxx 
```

从日志文件看来，它已经到达了 Zope 开始。尽管 bin/instance 状态或上游前端代理服务器都不同意。您可以在日志中看到这一点。

```
 2013-03-08T04:19:21 INFO Zope Ready to handle requests 
```

任何想法如何进一步调试？

可能是某种竞争条件/启动缓慢问题吗？

会不会是进程默默地死了之后`Ready to handle`

其他人是否观察到相同的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T11:30:28.067

如果`bin/buildout`重新构建实例，那么它也会删除并重新构建`parts/instance`目录。

那个目录包含一些`bin/instance restart` *失败*的项目；管理重启的守护进程本身不再完整。

您需要使用`bin/instance stop`来停止实例*和*守护进程，后跟一个`bin/instance start`（创建一个全新的守护进程）。

# css - 类名的 CSS 属性选择器

> ID：15285775
> 
> 赞同：1
> 
> 时间：2013-03-08T02:39:06.757
> 
> 标签：css, css-selectors

全部。我的代码中的 css 选择器有一些问题。请查看以下代码。

假设您具有如下所示的 html 结构。

```
<div id="currentTmpContainer" class="layoutcontainer container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <ul id="sortable1" class="sortableLayoutSection">

                </ul>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <ul id="sortable3" class="sortableLayoutSection">

                </ul>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <ul id="sortable3" class="sortableLayoutSection">

                </ul>
            </div>
        </div>
    </div> 
```

我想选择`div`类名以“span”开头的。所以我在`Attribute selectors`下面写了选择器（），但它不起作用。

```
.layoutcontainer div[class^=”span”]
{
    border:1px solid red;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T02:43:06.733

你这里有一些奇怪的倾斜引用。使用普通的 ASCII 引号，`"`

```
.layoutcontainer div[class^="span"]
{
    border:1px solid red;
} 
```

[http://jsfiddle.net/ExplosionPIlls/YpmUy/](http://jsfiddle.net/ExplosionPIlls/YpmUy/) - 似乎工作得很好

# emacs - 链接时有多个定义。collect2：错误 ld 返回 1 退出状态

> ID：15285776
> 
> 赞同：9
> 
> 时间：2013-03-08T02:39:12.343
> 
> 标签：emacs, compilation, compiler-errors, makefile

我在编译 Emacs 23.3 Release Candidate 2 时遇到问题：

我运行`autogen.sh`, `./configure`，`make`最后`make install`我得到这个错误：

```
 gcc -std=gnu99     -I. -I../src -I../lib -I/home/john/bin/emacs/rc/emacs-24.3/lib-src -I/home/john/opt/emacs/rc/emacs-24.3/lib-src/../src -I/home/
john/bin/emacs/rc/emacs-24.3/lib-src/../lib  -Wl,-znocombreloc   -g3 -O2 -DEMACS_NAME="\"GNU Emacs\"" \
          -DVERSION="\"24.3\"" /home/john/bin/emacs/rc/emacs-24.3/lib-src/etags.c \
          regex.o ../lib/libgnu.a  -o etags
regex.o: In function `stpncpy':
/usr/include/bits/string3.h:160: multiple definition of `stpncpy'
/tmp/ccntBfBN.o:/usr/include/bits/string3.h:160: first defined here
regex.o: In function `realpath':
/usr/include/bits/stdlib.h:37: multiple definition of `realpath'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:37: first defined here
regex.o: In function `ptsname_r':
/usr/include/bits/stdlib.h:53: multiple definition of `ptsname_r'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:53: first defined here
regex.o: In function `wctomb':
/usr/include/bits/stdlib.h:74: multiple definition of `wctomb'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:74: first defined here
regex.o: In function `mbstowcs':
/usr/include/bits/stdlib.h:95: multiple definition of `mbstowcs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:95: first defined here
regex.o: In function `wcstombs':
/usr/include/bits/stdlib.h:114: multiple definition of `wcstombs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:114: first defined here
regex.o: In function `read':
/usr/include/bits/unistd.h:35: multiple definition of `read'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:35: first defined here
regex.o: In function `pread':
/usr/include/bits/unistd.h:57: multiple definition of `pread'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:57: first defined here
regex.o: In function `pread64':
/usr/include/bits/unistd.h:77: multiple definition of `pread64'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:77: first defined here
regex.o: In function `readlink':
/usr/include/bits/unistd.h:99: multiple definition of `readlink'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:99: first defined here
regex.o: In function `readlinkat':
/usr/include/bits/unistd.h:121: multiple definition of `readlinkat'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:121: first defined here
regex.o: In function `getcwd':
/usr/include/bits/unistd.h:136: multiple definition of `getcwd'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:136: first defined here
regex.o: In function `getwd':
/usr/include/bits/unistd.h:150: multiple definition of `getwd'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:150: first defined here
regex.o: In function `confstr':
/usr/include/bits/unistd.h:165: multiple definition of `confstr'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:165: first defined here
regex.o: In function `getgroups':
/usr/include/bits/unistd.h:181: multiple definition of `getgroups'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:181: first defined here
regex.o: In function `ttyname_r':
/usr/include/bits/unistd.h:197: multiple definition of `ttyname_r'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:197: first defined here
regex.o: In function `getlogin_r':
/usr/include/bits/unistd.h:213: multiple definition of `getlogin_r'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:213: first defined here
regex.o: In function `gethostname':
/usr/include/bits/unistd.h:230: multiple definition of `gethostname'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:230: first defined here
regex.o: In function `getdomainname':
/usr/include/bits/unistd.h:248: multiple definition of `getdomainname'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:248: first defined here
../lib/libgnu.a(c-strcasecmp.o): In function `stpncpy':
/usr/include/bits/string3.h:160: multiple definition of `stpncpy'
/tmp/ccntBfBN.o:/usr/include/bits/string3.h:160: first defined here
../lib/libgnu.a(c-strcasecmp.o): In function `realpath':
/usr/include/bits/stdlib.h:37: multiple definition of `realpath'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:37: first defined here
../lib/libgnu.a(c-strcasecmp.o): In function `ptsname_r':
/usr/include/bits/stdlib.h:53: multiple definition of `ptsname_r'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:53: first defined here
../lib/libgnu.a(c-strcasecmp.o): In function `wctomb':
/usr/include/bits/stdlib.h:74: multiple definition of `wctomb'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:74: first defined here
../lib/libgnu.a(c-strcasecmp.o): In function `mbstowcs':
/usr/include/bits/stdlib.h:95: multiple definition of `mbstowcs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:95: first defined here
../lib/libgnu.a(c-strcasecmp.o): In function `wcstombs':
/usr/include/bits/stdlib.h:114: multiple definition of `wcstombs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:114: first defined here
../lib/libgnu.a(c-strncasecmp.o): In function `stpncpy':
/usr/include/bits/string3.h:160: multiple definition of `stpncpy'
/tmp/ccntBfBN.o:/usr/include/bits/string3.h:160: first defined here
../lib/libgnu.a(c-strncasecmp.o): In function `realpath':
/usr/include/bits/stdlib.h:37: multiple definition of `realpath'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:37: first defined here
../lib/libgnu.a(c-strncasecmp.o): In function `ptsname_r':
/usr/include/bits/stdlib.h:53: multiple definition of `ptsname_r'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:53: first defined here
../lib/libgnu.a(c-strncasecmp.o): In function `wctomb':
/usr/include/bits/stdlib.h:74: multiple definition of `wctomb'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:74: first defined here
../lib/libgnu.a(c-strncasecmp.o): In function `mbstowcs':
/usr/include/bits/stdlib.h:95: multiple definition of `mbstowcs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:95: first defined here
../lib/libgnu.a(c-strncasecmp.o): In function `wcstombs':
/usr/include/bits/stdlib.h:114: multiple definition of `wcstombs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:114: first defined here
../lib/libgnu.a(getopt.o): In function `stpncpy':
/usr/include/bits/string3.h:160: multiple definition of `stpncpy'
/tmp/ccntBfBN.o:/usr/include/bits/string3.h:160: first defined here
../lib/libgnu.a(getopt.o): In function `realpath':
/usr/include/bits/stdlib.h:37: multiple definition of `realpath'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:37: first defined here
../lib/libgnu.a(getopt.o): In function `ptsname_r':
/usr/include/bits/stdlib.h:53: multiple definition of `ptsname_r'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:53: first defined here
../lib/libgnu.a(getopt.o): In function `wctomb':
/usr/include/bits/stdlib.h:74: multiple definition of `wctomb'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:74: first defined here
../lib/libgnu.a(getopt.o): In function `mbstowcs':
/usr/include/bits/stdlib.h:95: multiple definition of `mbstowcs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:95: first defined here
../lib/libgnu.a(getopt.o): In function `wcstombs':
/usr/include/bits/stdlib.h:114: multiple definition of `wcstombs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:114: first defined here
../lib/libgnu.a(getopt.o): In function `gets':
/usr/include/bits/stdio2.h:94: multiple definition of `gets'
/tmp/ccntBfBN.o:/usr/include/bits/stdio2.h:94: first defined here
../lib/libgnu.a(getopt.o): In function `fgets':
/usr/include/bits/stdio2.h:109: multiple definition of `fgets'
/tmp/ccntBfBN.o:/usr/include/bits/stdio2.h:109: first defined here
../lib/libgnu.a(getopt.o): In function `fgets_unlocked':
/usr/include/bits/stdio2.h:125: multiple definition of `fgets_unlocked'
/tmp/ccntBfBN.o:/usr/include/bits/stdio2.h:125: first defined here
../lib/libgnu.a(getopt.o): In function `read':
/usr/include/bits/unistd.h:35: multiple definition of `read'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:35: first defined here
../lib/libgnu.a(getopt.o): In function `pread':
/usr/include/bits/unistd.h:57: multiple definition of `pread'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:57: first defined here
../lib/libgnu.a(getopt.o): In function `pread64':
/usr/include/bits/unistd.h:77: multiple definition of `pread64'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:77: first defined here
../lib/libgnu.a(getopt.o): In function `readlink':
/usr/include/bits/unistd.h:99: multiple definition of `readlink'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:99: first defined here
../lib/libgnu.a(getopt.o): In function `readlinkat':
/usr/include/bits/unistd.h:121: multiple definition of `readlinkat'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:121: first defined here
../lib/libgnu.a(getopt.o): In function `getcwd':
/usr/include/bits/unistd.h:136: multiple definition of `getcwd'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:136: first defined here
../lib/libgnu.a(getopt.o): In function `getwd':
/usr/include/bits/unistd.h:150: multiple definition of `getwd'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:150: first defined here
../lib/libgnu.a(getopt.o): In function `confstr':
/usr/include/bits/unistd.h:165: multiple definition of `confstr'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:165: first defined here
../lib/libgnu.a(getopt.o): In function `getgroups':
/usr/include/bits/unistd.h:181: multiple definition of `getgroups'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:181: first defined here
../lib/libgnu.a(getopt.o): In function `ttyname_r':
/usr/include/bits/unistd.h:197: multiple definition of `ttyname_r'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:197: first defined here
../lib/libgnu.a(getopt.o): In function `getlogin_r':
/usr/include/bits/unistd.h:213: multiple definition of `getlogin_r'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:213: first defined here
../lib/libgnu.a(getopt.o): In function `gethostname':
/usr/include/bits/unistd.h:230: multiple definition of `gethostname'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:230: first defined here
../lib/libgnu.a(getopt.o): In function `getdomainname':
/usr/include/bits/unistd.h:248: multiple definition of `getdomainname'
/tmp/ccntBfBN.o:/usr/include/bits/unistd.h:248: first defined here
../lib/libgnu.a(getopt1.o): In function `stpncpy':
/usr/include/bits/string3.h:160: multiple definition of `stpncpy'
/tmp/ccntBfBN.o:/usr/include/bits/string3.h:160: first defined here
../lib/libgnu.a(getopt1.o): In function `realpath':
/usr/include/bits/stdlib.h:37: multiple definition of `realpath'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:37: first defined here
../lib/libgnu.a(getopt1.o): In function `ptsname_r':
/usr/include/bits/stdlib.h:53: multiple definition of `ptsname_r'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:53: first defined here
../lib/libgnu.a(getopt1.o): In function `wctomb':
/usr/include/bits/stdlib.h:74: multiple definition of `wctomb'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:74: first defined here
../lib/libgnu.a(getopt1.o): In function `mbstowcs':
/usr/include/bits/stdlib.h:95: multiple definition of `mbstowcs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:95: first defined here
../lib/libgnu.a(getopt1.o): In function `wcstombs':
/usr/include/bits/stdlib.h:114: multiple definition of `wcstombs'
/tmp/ccntBfBN.o:/usr/include/bits/stdlib.h:114: first defined here
../lib/libgnu.a(getopt1.o): In function `gets':
/usr/include/bits/stdio2.h:94: multiple definition of `gets'
/tmp/ccntBfBN.o:/usr/include/bits/stdio2.h:94: first defined here
../lib/libgnu.a(getopt1.o): In function `fgets':
/usr/include/bits/stdio2.h:109: multiple definition of `fgets'
/tmp/ccntBfBN.o:/usr/include/bits/stdio2.h:109: first defined here
../lib/libgnu.a(getopt1.o): In function `fgets_unlocked':
/usr/include/bits/stdio2.h:125: multiple definition of `fgets_unlocked'
/tmp/ccntBfBN.o:/usr/include/bits/stdio2.h:125: first defined here
collect2: error: ld returned 1 exit status
make[1]: *** [etags] Error 1
make[1]: Leaving directory `/home/john/bin/emacs/rc/emacs-24.3/lib-src'
make: *** [lib-src] Error 2 
```

我以前从未见过这样的错误。这是什么意思？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-16T00:07:10.940

我在较旧的 Linux 版本（RHEL 4.9）上遇到了类似的问题。

按照 Eric Johnson 的链接，像这样配置对我有用：

```
./configure CPPFLAGS="-fgnu89-inline" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-11T19:03:35.943

我试图构建和安装 GNU emacs-24.3：

```
> uname -a
Linux mymachine 2.6.18-274.12.1.el5 #1 SMP Tue Nov 8 21:37:35 EST 2011 x86_64 x86_64 x86_64 GNU/Linux
> pwd
emacs-24.3
> ./configure
> make 
```

并遇到与 user815423426 报告的几乎完全相同的“多重定义”错误。

在完全理解“-fgnu89-inline”的含义之前，我只是使用了 Nemo 的魔法线，瞧，它经历了：

```
> ./configure CPPFLAGS="-fgnu89-inline"
> make
> make install 
```

向我们的专家致敬！

# node.js - 如何编写可在我的 Node.JS 应用程序中全局使用的扩展方法？

> ID：15285778
> 
> 赞同：1
> 
> 时间：2013-03-08T02:39:17.733
> 
> 标签：node.js

以这个“StartsWith”扩展为例：

```
if (typeof String.prototype.startsWith != 'function') {
    String.prototype.startsWith = function (str) {
        return this.slice(0, str.length) == str;
    };
} 
```

如果我正在编写一个 Web 应用程序，我会将该代码粘贴到`ExtensionMethods.js`我在我网站内的网页上导入的页面中。

但是在带有 Node.js的*服务器上使用它的情况呢？*

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:51:11.497

由于`String`全局可用，因此可以将其放置在任何需要的文件中。当一个文件被需要时，它就会被执行。

你甚至不需要导出任何东西。

# php - 将多个数组传递到 URL PHP

> ID：15285780
> 
> 赞同：0
> 
> 时间：2013-03-08T02:39:40.060
> 
> 标签：php, mysql

我正在尝试创建一个表单，该表单允许用户编辑多个成员的信息，获取该信息，并通过 URL 传递它来编辑数据库。到目前为止我有这个：

```
 echo "<form id='memberEditor' method='post' action='massEditor.php'>"
 $result = mysql_query("SELECT * FROM `user_trials` ORDER BY `grade` ASC, `lastName` ASC");

            while($row = mysql_fetch_array($result)){
                $studentID = $row['studentid'];
                $ID = array();
                array_push($ID, $studentID);                                        
                $firstName = $row['name'];
                $lastName = $row['lastName'];
                $fullName = $firstName." ".$lastName;
                $money = $row['money'];
                $moneyValue = array();
                array_push($moneyValue, $money);
                $waiver = $row['waiver'];
                $waiverValue = array();
                array_push($waiverValue, $waiver);
                echo "<tr>";
                echo "<td>$studentID</td>";
                echo "<td>$fullName </td>";                 
                echo "<td><input type='checkbox' name='money' id='money'".(($money == 'yes')?'checked ':' ')."value='yes' /></td>";
                echo "<td><input type='checkbox' name='waiver' id='waiver'".(($waiver == 'yes')?'"checked"':' ')."value='yes' /></td>";
                echo "</tr>";

            }
            $queryID = http_build_query($studentID);
            $queryMoney = http_build_query($moneyValue);
            $queryWaiver = http_build_query($waiverValue); 
```

在页面顶部，我试图获取数组以编辑数据库：

```
 ini_set('display_errors', 'On');
error_reporting(E_ALL);

  $memberNumbers = count($ID);
  for($i = 0; $i < $memberNumbers; $i++) {
      $studentid = $ID[$i];         
      $result = mysql_query("SELECT * FROM `user` WHERE `studentid`='$studentid' LIMIT 1");
      $news = mysql_fetch_array($result);   
      $cash = $moneyValue[$i];
      $permission = $waiverValue[$i];
      mysql_query("UPDATE `user_trials` SET `money`='$cash', `waiver`='$permission' WHERE `studentid`='$studentid' LIMIT 1");
      header("Location: view_members.php"); 
} 
```

我试图将数据从 http_build_query 传递到 URL，然后在顶部检索它，但我不知道应该如何将多个数组添加到 URL 中，然后将三个数组分开以获得三个不同的数组从中获取信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:09:00.257

您可以使用序列化和 urlencoding 通过表单标签的隐藏标签元素发送多个数组，并使用 urldecoding 和反序列化来显示数据。例如：

对于发送数据，您可以尝试：

```
<?php
    $array1["a"] = "Element 1 Of Array 1";
    $array1["b"] = "Element 2 Of Array 1";
    $array1["c"] = "Element 3 Of Array 1";
    $array1["d"] = "Element 4 Of Array 1";
    $str1 = serialize($array1);  //****** To Serialize The Array ****
    $strenc1 = urlencode($str1); //****** For URL Encoding **********

    $array2[1] = "Element 1 Of Array 2";
    $array2[2] = "Element 2 Of Array 2";
    $array2[3] = "Element 3 Of Array 2";
    $array2[4] = "Element 4 Of Array 2";
    $str2 = serialize($array2);  //****** To Serialize The Array ****
    $strenc2 = urlencode($str2); //****** For URL Encoding **********
?>

<form method="post" action="target.php">
    <!-- Passing Array 1 -->
    <input type="hidden" name="arr1" value="<?php echo $strenc1; ?>" /> 
    <!-- Passing Array 2 -->
    <input type="hidden" name="arr2" value="<?php echo $strenc2; ?>" />
    <input type="submit" />
</form> 
```

然后您可以使用以下命令在目标页面上打印数据：

```
<?php
    $a = unserialize(urldecode($_POST['arr1']));
    foreach($a as $x)
        echo $x . "<br />";

    $a = unserialize(urldecode($_POST['arr2']));
    foreach($a as $x)
        echo $x . "<br />";
?> 
```

希望这能解决你的问题。:)

# android - 如何在 JB 上启用带有 GPU 后端的skia

> ID：15285782
> 
> 赞同：0
> 
> 时间：2013-03-08T02:39:45.523
> 
> 标签：android, opengl-es, skia, hwui

我听说在 Android 3.0 中添加了 Skia GPU acc，但似乎自 Android 4.0 以来它被默认禁用，可能是因为转向 HWUI（Canvas 的 openGL 实现）。我怎么能再次启用它只是为了基准测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:03:40.900

我不知道 Skia 的任何其他硬件加速方法。尽管对于 HWUI，开发人员文档在这里对此进行了概述：http: [//developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

如果您已经知道 HWUI 的实现，请致歉。

## 您可以使用四个级别的控制：

应用程序级别、活动级别、窗口级别和视图级别。

## 应用层

在您的清单中，将以下属性添加到您的应用程序：

```
 <application android:hardwareAccelerated="true" ...>` 
```

## 活动水平

在您的清单中，将以下属性添加到您的活动中：

```
<application...>
   <activity android:hardwareAccelerated="true" />
</application> 
```

您还可以混合和匹配应用程序和活动级别以仅在某些活动上启用 HWUI，如下所示：

```
<application android:hardwareAccelerated="true">
   <activity ... />
   <activity android:hardwareAccelerated="false" />
</application> 
```

## 窗位

注意：您只能在窗口级别启用 HWUI，不能禁用。

在您的源代码中：

```
getWindow().setFlags(
WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED); 
```

## 查看级别

注意：您不能从仅禁用视图中启用 HWUI。在您的源代码中：

```
myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

## 您对 HWUI 的看法也是正确的：

Android Honeycomb (3.0) 将 HWUI（硬件加速）添加为所有应用程序的选项，无需任何额外的绘制代码。系统将自动为所有兼容的渲染方法运行预定义的 OpenGL ES 函数，而不是 SKIA。

从 Android Ice Cream Sandwich (4.0) 开始，HWUI 是默认的。因此，所有 4.0+ 设备都必须具有支持 OpenGL ES 2.0 的 GPU。

# activemq - 如何阻止 WSO2 将 ActiveMQ CorrelationID 直接传递给 Websphere MQ

> ID：15285783
> 
> 赞同：1
> 
> 时间：2013-03-08T02:39:48.343
> 
> 标签：activemq, wso2, ibm-mq

我正在尝试从 ActiveMQ 队列中提取消息并将其传递给 Websphere MQ 队列。

我正在使用 WSO2，因为最终我们会想要使用它提供给我们的所有功能。

问题似乎是 WSO2 尝试将 ActiveMQ MessageId 作为 Correlation Id 直接传递给 Websphere MQ - 格式错误。

我试图删除 TRANSPORT_HEADERS 但我一定做错了什么。

我在 inSequence 中添加了一个虚拟属性 JMS_CORRELATION_ID（根据这篇[文章](http://mail-archives.apache.org/mod_mbox/synapse-user/201012.mbox/%3C83B2FA13648D5841982336487CE01FE01DA217E8@DENPXCHMBX01.corp.gds.jeppesen.com%3E)），以查看是否可以验证这一点，但 Websphere MQ 似乎无法识别此标头。

令人高兴的是，将消息从 Websphere MQ 传递到 ActiveMQ 在我创建的另一个代理服务中工作正常。在这种情况下，Websphere MQ 消息 ID 被传递给 Active MQ 相关 ID。

这是例外

```
[2013-03-08 12:18:23,414] ERROR - JMSSender Error creating a JMS message from the message context
com.ibm.msg.client.jms.DetailedJMSException: JMSCMQ1044: String is not a valid hexadecimal number - 'dolguldur-51590-1362693989456-3:4:1:1:4'.
Either an attempt was made to specify a group ID or correlation ID which starts with the prefix ID but is not followed by a well-formed hexadecimal value, or an attempt was made to receive a message w
hich contains an MQRFH2 property of type bin.hex that does not have a well-formed hexadecimal value.
Ensure that a valid hexadecimal value always follows the ID prefix when setting group ID or correlation ID values. Ensure that any MQRFH2 headers generated by non-JMS applications are well-formed.
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.ibm.msg.client.commonservices.j2se.NLSServices.createException(NLSServices.java:319)
        at com.ibm.msg.client.commonservices.nls.NLSServices.createException(NLSServices.java:233)
        at com.ibm.msg.client.wmq.common.internal.WMQUtils.hexToBin(WMQUtils.java:414)
        at com.ibm.msg.client.wmq.common.internal.WMQUtils.stringToId(WMQUtils.java:496)
        at com.ibm.msg.client.wmq.common.internal.messages.WMQMessageHeader.setJMSCorrelationID(WMQMessageHeader.java:314)
        at com.ibm.msg.client.jms.internal.JmsMessageImpl.setJMSCorrelationID(JmsMessageImpl.java:610)
        at com.ibm.jms.JMSMessage.setJMSCorrelationID(JMSMessage.java:1133)
        at org.apache.axis2.transport.jms.JMSSender.createJMSMessage(JMSSender.java:428)
        at org.apache.axis2.transport.jms.JMSSender.sendOverJMS(JMSSender.java:172)
        at org.apache.axis2.transport.jms.JMSSender.sendMessage(JMSSender.java:154)
        at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
        at org.apache.axis2.engine.AxisEngine$TransportNonBlockingInvocationWorker.run(AxisEngine.java:626)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
[2013-03-08 12:18:23,417]  INFO - AxisEngine [MessageContext: logID=a7a3184cd19f3b5ab7a012af40cd7840329dd8fc40d0e9c3] Error creating a JMS message from the message context 
```

WSO2 代理服务配置

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="TestService" transports="jms" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <property name="TRANSPORT_HEADERS" scope="transport" action="remove"/>
         <property name="OUT_ONLY" value="true"/>
         <log level="full"/>
      </inSequence>
      <endpoint>
         <address uri="jms:/QUEUE.OUT?transport.jms.ConnectionFactory=ibmMQQueueConnectionFactory"/>
      </endpoint>
   </target>
   <parameter name="transport.jms.ConnectionFactory">activeMQQueueConnectionFactory</parameter>
   <parameter name="transport.jms.Destination">TESTJMS.IN</parameter>
   <description></description>
</proxy> 
```

axis2.xml 传输接收器

```
 <transportReceiver name="jms" class="org.apache.axis2.transport.jms.JMSListener">
        <parameter name="activeMQQueueConnectionFactory" locked="false">
            <parameter name="java.naming.factory.initial" locked="false">org.apache.activemq.jndi.ActiveMQInitialContextFactory</parameter>
            <parameter name="java.naming.provider.url" locked="false">tcp://localhost:61616</parameter>
            <parameter name="transport.jms.ConnectionFactoryJNDIName" locked="false">QueueConnectionFactory</parameter>
            <parameter name="transport.jms.ConnectionFactoryType" locked="false">queue</parameter>
        </parameter>

        <parameter name="ibmMQQueueConnectionFactory" locked="false">
            <parameter name="java.naming.factory.initial" locked="false">com.sun.jndi.fscontext.RefFSContextFactory</parameter>
            <parameter name="java.naming.provider.url" locked="false">file:/E:/work/MQ-JNDI-Directory</parameter>
            <parameter name="transport.jms.ConnectionFactoryJNDIName" locked="false">ConnectionFactoryTest</parameter>
            <parameter name="transport.jms.ConnectionFactoryType" locked="false">queue</parameter>
        </parameter>

    </transportReceiver> 
```

axis2.xml 传输发送方

org.apache.activemq.jndi.ActiveMQInitialContextFactory tcp://localhost:61616 QueueConnectionFactory 队列

```
<parameter name="ibmMQQueueConnectionFactory" locked="false">
    <parameter name="java.naming.factory.initial" locked="false">com.sun.jndi.fscontext.RefFSContextFactory</parameter>
    <parameter name="java.naming.provider.url" locked="false">file:/E:/work/MQ-JNDI-Directory</parameter>
    <parameter name="transport.jms.ConnectionFactoryJNDIName" locked="false">ConnectionFactoryTest</parameter>
    <parameter name="transport.jms.ConnectionFactoryType" locked="false">queue</parameter>
</parameter> 
```

干杯，史蒂夫

11/3 更多信息

因此，当我在 ActiveMQ 消息中放置一个简单字符串之类的相关 ID 时，我似乎没有收到错误“JMSCMQ1044：字符串不是有效的十六进制数”。

所以从活动 MQ 到 Websphere MQ 相关 ID 的映射是有问题的。

但这是我现在得到的错误 - 看起来类 org.apache.axis2.transport.jms.JMSUtils 正在尝试设置 JMS_DESTINATION 标头而 Websphere MQ 不允许这样做？

我已经通过编写一个简单的 java 客户端验证了这一点，并尝试设置标头 JMS_DESTINATION，我从 Websphere MQ 得到了同样的错误。

我可以让 Websphere MQ 处理这些标头吗？还是让 JMSSender 以不同的方式发布消息？还是 org.apache.axis2.transport.jms.JMSSender 根本不能与 Websphere MQ 一起使用？

顺便说一句，我使用的是最新的 Websphere MQ 7.5。

```
[2013-03-11 09:33:20,378] DEBUG - JMSMessageReceiver Received new JMS message for service :TestService
Destination    : queue://TESTJMS.IN
Message ID     : ID:dolguldur-50398-1362951749472-3:2:1:1:24
Correlation ID : NONE
ReplyTo        : null
Redelivery ?   : false
Priority       : 0
Expiration     : 0
Timestamp      : 1362958400374
Message Type   :
Persistent ?   : false
[2013-03-11 09:33:20,380] TRACE - JMSMessageReceiver
Message : Enter some text here for the message body...
[2013-03-11 09:33:20,381]  INFO - LogMediator To: , WSAction: urn:mediate, SOAPAction: urn:mediate, MessageID: ID:dolguldur-50398-1362951749472-3:2:1:1:24, Direction: request, Envelope: <?xml version=
'1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><axis2ns5:text xmlns:axis2ns5="http://ws.apache.org/commons/ns/payload">Enter some tex
t here for the message body...</axis2ns5:text></soapenv:Body></soapenv:Envelope>
[2013-03-11 09:33:20,388] DEBUG - JMSConnectionFactory Creating a new JMS Session from JMS CF : ibmMQQueueConnectionFactory
[2013-03-11 09:33:20,392] DEBUG - JMSConnectionFactory Creating a new JMS MessageProducer from JMS CF : ibmMQQueueConnectionFactory
[2013-03-11 09:33:20,393] ERROR - JMSSender Error creating a JMS message from the message context
com.ibm.msg.client.jms.DetailedMessageFormatException: JMSCC0050: The property name 'JMS_DESTINATION' is reserved and cannot be set.
The supplied property name begins with the JMS prefix, but is not one of the supported, settable properties.
Check the property name and correct errors.
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.ibm.msg.client.commonservices.j2se.NLSServices.createException(NLSServices.java:319)
        at com.ibm.msg.client.commonservices.nls.NLSServices.createException(NLSServices.java:233)
        at com.ibm.msg.client.jms.internal.JmsErrorUtils.createException(JmsErrorUtils.java:109)
        at com.ibm.msg.client.jms.internal.JmsMessageImpl.checkSettablePropertyName(JmsMessageImpl.java:2125)
        at com.ibm.msg.client.jms.internal.JmsMessageImpl.setStringProperty(JmsMessageImpl.java:1560)
        at com.ibm.jms.JMSMessage.setStringProperty(JMSMessage.java:1496)
        at org.apache.axis2.transport.jms.JMSUtils.setTransportHeaders(JMSUtils.java:278)
        at org.apache.axis2.transport.jms.JMSSender.createJMSMessage(JMSSender.java:441)
        at org.apache.axis2.transport.jms.JMSSender.sendOverJMS(JMSSender.java:172)
        at org.apache.axis2.transport.jms.JMSSender.sendMessage(JMSSender.java:154)
        at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
        at org.apache.axis2.engine.AxisEngine$TransportNonBlockingInvocationWorker.run(AxisEngine.java:626)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
[2013-03-11 09:33:20,399] ERROR - AsyncCallback Error creating a JMS message from the message context
org.apache.axis2.AxisFault: Error creating a JMS message from the message context
        at org.apache.axis2.transport.base.AbstractTransportSender.handleException(AbstractTransportSender.java:226)
        at org.apache.axis2.transport.jms.JMSSender.sendOverJMS(JMSSender.java:174)
        at org.apache.axis2.transport.jms.JMSSender.sendMessage(JMSSender.java:154)
        at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
        at org.apache.axis2.engine.AxisEngine$TransportNonBlockingInvocationWorker.run(AxisEngine.java:626)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: com.ibm.msg.client.jms.DetailedMessageFormatException: JMSCC0050: The property name 'JMS_DESTINATION' is reserved and cannot be set.
The supplied property name begins with the JMS prefix, but is not one of the supported, settable properties.
Check the property name and correct errors.
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.ibm.msg.client.commonservices.j2se.NLSServices.createException(NLSServices.java:319)
        at com.ibm.msg.client.commonservices.nls.NLSServices.createException(NLSServices.java:233)
        at com.ibm.msg.client.jms.internal.JmsErrorUtils.createException(JmsErrorUtils.java:109)
        at com.ibm.msg.client.jms.internal.JmsMessageImpl.checkSettablePropertyName(JmsMessageImpl.java:2125)
        at com.ibm.msg.client.jms.internal.JmsMessageImpl.setStringProperty(JmsMessageImpl.java:1560)
        at com.ibm.jms.JMSMessage.setStringProperty(JMSMessage.java:1496)
        at org.apache.axis2.transport.jms.JMSUtils.setTransportHeaders(JMSUtils.java:278)
        at org.apache.axis2.transport.jms.JMSSender.createJMSMessage(JMSSender.java:441)
        at org.apache.axis2.transport.jms.JMSSender.sendOverJMS(JMSSender.java:172)
        ... 6 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:32:48.553

这是因为 WebSphere MQ 遵循 JMS 规范，该规范声明消息 ID 始终由传输提供者设置。请参阅[JMS 1.1 规范](http://download.oracle.com/otn-pub/jcp/7195-jms-1.1-fr-spec-oth-JSpec/jms-1_1-fr-spec.pdf)：

* * *

**3.4.3 JMSMessageID**
JMSMessageID 头域包含一个唯一标识提供者发送的每条消息的值。

发送消息时，将忽略 JMSMessageID。当 send 方法返回时，该字段包含一个提供者分配的值。

* * *

这在 WMQ 信息中心主题[*Mapping JMS header fields at send() or publish()*](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/jm25470_.htm)中得到证实，其中说：

> 从 JMS 发送的所有消息都具有由 WebSphere® MQ 分配的唯一消息标识符。分配的值在 MQPUT 调用之后在 MQMD.MessageId 字段中返回，并在 JMSMessageID 字段中传递回应用程序。WebSphere MQ messageId 是一个 24 字节的二进制值，而 JMSMessageID 是一个字符串。JMSMessageID 由转换为 48 个十六进制字符序列的二进制 messageId 值组成，前缀为字符 ID:。JMS 提供了一个提示，可以设置为禁用生成消息标识符。忽略此提示，并在所有情况下分配唯一标识符。在 send() 被覆盖之前设置到 JMSMessageId 字段中的任何值。

您可以缓存消息 ID 并在它们通过代理时关联它们，或者可以通过退出 JMS API 并使用 Java 本机 API 发送消息来完成。假设您使用的是现代版本的 WebSphere MQ，JMS 消息不再需要 RFH2 标头，而是将 JMS 属性作为本机 WMQ 消息属性。这意味着在大多数情况下，JMS 应用程序可以读取本机 WMQ 消息，就好像它们是 JMS 消息一样，假设应用程序使用现代 QMgr 和 JMS 类的现代版本。

如果您需要更新，最新的 WMQ 客户端和 JMS 类位于[SupportPac MQC75 。](http://ibm.co/SupptPacMQC75)

# php - 在构造函数中调用类

> ID：15285784
> 
> 赞同：0
> 
> 时间：2013-03-08T02:39:53.510
> 
> 标签：php, class, constructor

我想知道在构造函数中调用一个类来访问该类的某些方法是否正确：

```
class myClass {

    private static $instance;   
    private $header;

    private function __construct() {

       $callAnotherClass = new callAnotherClass();
       $someVariable = $callAnotherClass->someMethod( 'param' );

    }

} 
```

我自愿不发布构造函数的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:56:21.453

没有什么错，只是做类似的事情是不正确的

```
$random = new Random(); 
```

这当然是 100% 有效的。

在这种情况下

```
callAnotherClass() 
```

恰好是您的自制课程之一，而不是内置课程。

只要没有依赖关系被破坏并且您拥有访问 callAnotherClass 的所有权限，那么您就可以了。

# twitter-bootstrap - Twitter Bootstrap 脚手架与 AngularJS

> ID：15285785
> 
> 赞同：1
> 
> 时间：2013-03-08T02:39:56.560
> 
> 标签：twitter-bootstrap, angularjs, scaffolding

我想在由 AngularJS 提供支持的应用程序中使用 twitter Bootstrap。我开始使用 Scaffolding [http://twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)进行网格布局并遇到以下问题：

根据 Bootstrap 上的文档和示例，网格布局必须遵循以下结构：

```
<div class="row">
    <div class="span4">...</div>
    <div class="span8">...</div>
</div>
<div class="row">
    <div class="span4">...</div>
    <div class="span8">...</div>
</div> 
```

...

这意味着具有“跨度”类（列）的标签必须是具有“行”类（行）的标签的子元素。

在我的应用程序中，我有一个简单的对象数组 - 项目，我想在每一行中显示为 3 个项目。当然，我不知道我必须展示的项目数量。据我了解，这种结构需要两个嵌套循环 - 一个用于行，一个用于列，如果我的模型是二维数组但我不想更改我的模型（项目）以适应看法。我最终做的是使用过滤器将模型更改为二维数组，然后使用嵌套的 ngRepeat 创建列：http: [//jsfiddle.net/oburakevych/h4puc/11/](http://jsfiddle.net/oburakevych/h4puc/11/)

它似乎按预期工作，但我在调试控制台中遇到错误：

```
Error: 10 $digest() iterations reached. Aborting! 
```

据我了解，嵌套的 ng-repeat 的摘要正在触发外部 ng-repeat 的摘要？任何人都可以提出正确的实施方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:46:42.600

这里的问题是，当您使用`ng-repeat`Angular 时，会为列表表达式创建一个监视，它是您的项目数组和过滤器的组合。当 Angular 运行一个摘要时，它会一直调用那个 watch，直到表达式的值不再改变。而且由于您的过滤器总是创建一个新数组，因此每次调用它时值都会发生变化，并且 Angular 会陷入无限循环。因此，您的代码与执行此操作基本相同：

```
$scope.myList = [];
$scope.$watch('myList', function() {
    $scope.myList = [];
}); 
```

通过观察范围，您可以告诉 Angular 按值而不是引用进行比较，以避免无休止的摘要问题，如下所示：

```
$scope.myList = [];
$scope.$watch('myList', function() {
    $scope.myList = [];
}, true); // Passing true as the last argument triggers comparison by value instead 
```

但在你的情况下这是不可能的。所以你最好的选择是只在需要时将项目数组拆分为更小的数组，如下所示：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.0.5/angular.min.js"></script>
    <script>
    angular.module('myApp', []).controller('Ctrl', function($scope) {
        $scope.projects = [
            {name: 'My Project 1'},
            {name: 'My Project 2'},
            {name: 'My Project 3'},
            {name: 'My Project 4'},
            {name: 'My Project 5'},
            {name: 'My Project 6'}
        ];

        var splitIntoRows = function(array, columns) {
            if (array.length <= columns) {
                return [array];
            }

            var rowsNum = Math.ceil(array.length / columns);

            var rowsArray = new Array(rowsNum);

            for (var i = 0; i < rowsNum; i++) {
                var columnsArray = new Array(columns);
                for (j = 0; j < columns; j++) {
                    var index = i * columns + j;

                    if (index < array.length) {
                        columnsArray[j] = array[index];
                    } else {
                        break;
                    }
                }

                rowsArray[i] = columnsArray;
            }

            return rowsArray;
        }

        $scope.$watch('projects', function() {
            $scope.projectRows = splitIntoRows($scope.projects, 3);
        });
    });
    </script>
</head>
<body ng-controller="Ctrl">
    <ul class="row" ng-repeat="projectRow in projectRows">
        <li class="span4" ng-repeat="project in projectRow">
            {{project.name}}
        </li>
    </ul>
</body>
</html> 
```

如果您仍想为此使用过滤器，则必须在过滤器内实现缓存，以确保在使用相同参数调用过滤器时始终返回相同的数组引用。但这是一个滑坡，因为您需要使该缓存无效以避免内存泄漏。

# c# - 在数据库中存储有限数量的项目（不可知）C# 代码

> ID：15285786
> 
> 赞同：0
> 
> 时间：2013-03-08T02:40:00.173
> 
> 标签：c#, database, database-design, db4o

我正在为我工​​作的数据中心开发资产管理应用程序。我仍在计划中，但一个沉重的问题是：服务器机架为 42U（每台服务器/设备最小 1U，有些设备更多）。我正在为服务器、驱动器/外围设备和机架设计课程。

1 个机架最多可容纳 42 个设备，一个服务器可以有多个驱动器。我可以处理我认为的驱动器，但是在设计一个类时有没有办法可以说“每个机架不超过 42 个设备，每个 U 不超过 1 个设备？

我查看了一个枚举字段，并且有一种方法可以在每次从机架中放置或移除设备时调整该字段。随着时间的推移，这似乎变得非常难以维持。

理想情况下，这将是有限的客户端/代码端，除非存储过程有能力做到这一点。

我仍在决定使用什么数据库服务器。我对任何更适合需求的人持开放态度。Postgre 具有 CIDR 类型，它允许对 IP 块进行一些方便的操作。db4o 仅存储我的 C# 对象的能力非常有吸引力。MySQL 很有吸引力，因为它存在于我们运营的其他地方。

任何帮助表示赞赏。如果这不符合 Q&A 格式，你能引导我到更合适的地方问这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:46:57.870

我不确定你的问题是什么，所以我不确定这是否是一个答案，但阅读你的问题我觉得你不相信自己的设计。

让我解释。你说你要上服务器、驱动器和机架的课程。

太好了，这是您的设计，现在从那里继续。这些课程必须满足哪些要求？

相反，您似乎正在跳到用例并认为这会很困难。还不要去那个细节……用大笔画出类，然后看细节。

您似乎在没有掌握基础知识的情况下跳到小细节。或者，如果您确实具备这些基础知识，那么您应该将它们与问题一起发布，以便我们为您提供答案。

# c++ - 你可以用数字开始一个类名吗？

> ID：15285787
> 
> 赞同：14
> 
> 时间：2013-03-08T02:40:00.923
> 
> 标签：c++, class, naming

在*C++*中，是否可以以*数字*开头的类名？例如，

```
template <class T> class 2DArray {

public:
    // 1D ARRAY CLASS
    class 1DArray {
    public:
        1DArray() { Create(); }
        1DArray(iterator arr) : array1d_(arr) { }
        explicit 1DArray(size_type cols, const T& t = T()) { Create(cols, t); }
        1DArray(const 1DArray& arr) { Create(arr.begin(), arr.end()); }
        1DArray& operator=(const 2DArray&);
        ~1DArray() { Uncreate(); }

        T& operator[](size_type n) {
            return array1d_[n];
        }
        const T& operator[](size_type n) const {
            return array1d_[n];
        }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-08T02:45:16.323

*C++*中标识符名称的规则是：

1.  不能以数字开头
2.  可由字母、数字、下划线、通用字符名¹和*实现定义*字符组成
3.  不能是[关键字](http://en.cppreference.com/w/cpp/keyword)。

[C++ 标准草案](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCoQFjAA&url=http%3A%2F%2Fwww.open-std.org%2Fjtc1%2Fsc22%2Fwg21%2Fdocs%2Fpapers%2F2012%2Fn3485.pdf&ei=z0bLUfHdNuno0wH744HADQ&usg=AFQjCNHADNpAEY3AIbLLCRGSrJcS5QWcEg&bvm=bv.48340889,d.dmQ&cad=rja)中涵盖这一点的部分是标识符`2.11` *，*其中包括以下语法：

```
identifier:
  identifier-nondigit            <- Can only start with a non-digit
  identifier identifier-nondigit <- Next two rules allows for subsequent 
  identifier digit               <-  characters to be those outlined in 2 above
identifier-nondigit:
  nondigit                       <- a-z, A-Z and _ 
  universal-character-name
  other implementation-defined characters
[...] 
```

和`2.12` *关键字*解释了所有保留用作关键字的*标识符。*

最后，还保留了以下名称：

1.  包含双下划线的名称，或在任何范围内`__`以下划线后跟大写字母（如）开头的名称，`_Apple`
2.  `_apple`在全局命名空间（如在全局命名空间）中以下划线开头的名称是保留的。

*标准草案*中涵盖此内容的部分是`17.6.4.3.2`. [我们可以从Rationale for International Standard-Programming Languages-C](http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf)中找到为什么保留这些的理由，其中说：

> [...]这为编写大量幕后的非外部宏和函数提供了一个名称空间，库需要正确完成其工作 [...]

如本[例](http://en.wikipedia.org/wiki/Name_mangling#Complex_example)所示，在*C++*中，这也适用于 [名称修饰。](http://en.wikipedia.org/wiki/Name_mangling)

* * *

脚注

*   **1.允许通用字符**

允许的通用字符包含在`Annex E.1`：

> E.1 允许的字符范围 [charname.allowed]
> 
> 00A8, 00AA, 00AD,
> 
> 00AF、00B2-00B5、00B7-00BA、00BC-00BE、00C0-00D6、00D8-00F6、00F8-00FF
> 
> 0100-167F、1681-180D、180F-1FFF 200B-200D、202A-202E、203F-2040、2054、
> 
> 2060-206F 2070-218F、2460-24FF、2776-2793、2C00-2DFF、2E80-2FFF
> 
> 3004-3007、3021-302F、3031-303F
> 
> 3040-D7FF F900-FD3D、FD40-FDCF、
> 
> FDF0-FE44、FE47-FFFD
> 
> 10000-1FFFD, 20000-2FFFD, 30000-3FFFD, 40000-4FFFD, 50000-5FFFD, 60000-6FFFD, 70000-7FFFD, 80000-8FFFD, 90000-9FFFD, A0000-AFFFD, B0000-BFFFD-DFFFD-C0000-CF DFFFD, E0000-EFFFD

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T02:44:51.133

简单回答是不。以你为例，为什么不称它为 OneDArray？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T04:01:30.107

因为，令人惊讶的是，我无法找到这个问题的重复或更通用的版本，这里是基于标准（C++11）所说的答案。

首先，根据 §9/1，类名是一个*标识符*（或者在模板专业化的情况下是一个 simple-template- *id*，但一个*simple-template-id*也是由*identifiers*组成的）。

§2.11 定义了有效*标识符*是什么。首先介绍几个基本概念：

数字是其中之一： 非*数字**是*其中之一： 通用*字符名称*是类型序列或（其中每个都是十六进制数字） `0 1 2 3 4 5 6 7 8 9`
*`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`
*`\unnnn``\Unnnnnnnn``n`**

 **然后标准将*标识符非数字*定义为

*   要么*是非数字*
*   或*通用字符名称*
*   或实现定义的特殊字符^((‡))

最后，*标识符*被递归定义为

> *标识符*：
>   *标识符-非数字*
>   *标识符* *标识符-非数字*
>   *标识符* *数字*

**摘要：换句话说，标识符必须以（非数字！）字母字符开头，其后可以是由字母数字字符、下划线和类似`\unnnn`字符引用组成的任何内容。其他任何内容都是特定于实现的。**

* * *

^((‡))是否支持取决于您的编译器，使用它们通常意味着您失去对其他编译器或编译器版本的可移植性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T02:46:39.653

C++ 中的名称必须以“字母”开头，其中字母全部为大写和小写“AZ, az”。'_' 也算作“字母”。然后可以在其后跟字母和数字的任意组合。**

# java - Stack类的搜索方法总是返回-1

> ID：15285789
> 
> 赞同：0
> 
> 时间：2013-03-08T02:40:12.660
> 
> 标签：java, stack, depth-first-search

我有这个类来保存两个值：

```
public class Coord {

    public int x; 
    public int y;

    public Coord(int x, int y) { 
        this.x = x; 
        this.y = y; 
    }
} 
```

我正在尝试在深度优先搜索算法中使用它：

```
x = this.move_to_x;
y = this.move_to_y;

Coord stack = new Coord(0, 0);

Stack<Coord> start = new Stack<Coord>();
Stack<Coord> visited = new Stack<Coord>();

start.push(stack);
visited.push(stack);

while (!start.empty()) {
    Coord tmp = (Coord)start.pop();

    int j,k;

    j = tmp.x;
    k = tmp.y;

    // there is only 8 possible ways to go (the neighbors)
    for (int a = -1; a < 2; a++) {
        tmp.x = j + a;

        for (int b = -1; b < 2; b++) {
            if (a == 0 && b == 0) {
                continue;
            }

            tmp.y = k + b;

            if (tmp.x < 0 || tmp.y < 0) {
                continue;
            }

            if (tmp.x > 5 || tmp.y > 5) {
                continue;
            }

            if (tmp.x == x && tmp.y == y) {
                System.out.println("end!");
                return;
            }

            Coord push = new Coord(tmp.x, tmp.y);

            System.out.println("visited: " + visited);

            if (visited.search(push) == -1) {
                System.out.println("added x " + push.x + " y " + push.y
                        + " " + visited.search(push));

                start.push(push);
                visited.push(push);
            } else {
                System.out.println("visited x " + tmp.x + " y " + tmp.y
                        + " index  " + visited.search(push));
            }
        }
    }
} 
```

问题是该`visited.search`方法总是返回`-1`。这是日志：

```
visited: [Agent.ExampleAgent.Coord@1af6a711]
added x 0 y 1 -1
visited: [Agent.ExampleAgent.Coord@1af6a711, Agent.ExampleAgent.Coord@1c727896]
added x 1 y 0 -1
visited: [Agent.ExampleAgent.Coord@1af6a711, Agent.ExampleAgent.Coord@1c727896, Agent.ExampleAgent.Coord@5fbd8c6e]
added x 1 y 1 -1
visited: [Agent.ExampleAgent.Coord@1af6a711, Agent.ExampleAgent.Coord@1c727896, Agent.ExampleAgent.Coord@5fbd8c6e, Agent.ExampleAgent.Coord@427a8ba4]
added x 0 y 0 -1
visited: [Agent.ExampleAgent.Coord@1af6a711, Agent.ExampleAgent.Coord@1c727896, Agent.ExampleAgent.Coord@5fbd8c6e, Agent.ExampleAgent.Coord@427a8ba4, Agent.ExampleAgent.Coord@262f6be5]
added x 0 y 1 -1
visited: [Agent.ExampleAgent.Coord@1af6a711, Agent.ExampleAgent.Coord@1c727896, Agent.ExampleAgent.Coord@5fbd8c6e, Agent.ExampleAgent.Coord@427a8ba4, Agent.ExampleAgent.Coord@262f6be5, Agent.ExampleAgent.Coord@199d4a86] 
```

请注意，添加到已访问堆栈的第一个元素是`(0,1)`，但是当搜索它时`(0,1)`，该方法稍后会返回`-1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:14:59.070

*（我想我会发布一个答案，概述我们在聊天讨论中取得的进展）*

假设类的以下状态`Coord`：

```
public class Coord {

    public int x; 
    public int y;

    public Coord(int x, int y) { 
        this.x = x; 
        this.y = y; 
    }

    @Override
    public boolean equals(Object obj){

        if (obj == null)
            return false;
        if (obj.getClass() != Coord.class)
            return false;
        if (obj == this)
            return true;

        Coord a = (Coord)obj;
        return (a.x == this.x && a.y == this.y);
    }

    @Override
    public int hashCode() {
        return x*17 + y*31;
    }

    @Override
    public String toString() {
        return "("+x+", "+y+")";
    }
} 
```

...实现：

*   `equals()`因为这是堆栈搜索使用的，根据它的 Javadoc
*   `hashCode()`作为最佳实践，伴随`equals()`
*   `toString()`更清晰的诊断输出

这个想法是在与其余代码隔离的情况下测试堆栈搜索的功能。如果我们可以证明堆栈搜索功能正常，那么问题就出在其他地方。

证明堆栈搜索可以使用测试类来完成，例如这个：

```
public class CoordTest {

public static void main(String[] args) {
    System.out.println("Running tests...");

    System.out.println("Testing: equals");
    Coord c1a = new Coord(2,3);
    Coord c1b = new Coord(2,3);
    check(c1a.equals(c1b));

    System.out.println("Testing: not equals"); 
    Coord c2a = new Coord(2,3);
    Coord c2b = new Coord(6,8);
    Coord c2c = new Coord(2,8); 
    Coord c2d = new Coord(6,3);
    check(!c2a.equals(c2b));
    check(!c2a.equals(c2c));
    check(!c2a.equals(c2d));

    System.out.println("Testing: not found in empty stack"); 
    Stack<Coord> stack1 = new Stack<Coord>();
    int result1 = stack1.search(c1a);
    check(result1 == -1);

    System.out.println("Testing: not found in non-empty stack"); 
    Stack<Coord> stack2 = new Stack<Coord>();
    stack2.push(new Coord(4,5));
    stack2.push(new Coord(6,7));
    int result2 = stack2.search(c1a);
    check(result2 == -1);

    System.out.println("Testing: found in non-empty stack"); 
    Stack<Coord> stack3 = new Stack<Coord>();
    stack3.push(new Coord(4,5));
    stack3.push(new Coord(3,1));
    stack3.push(new Coord(6,7));        
    int result3 = stack3.search(new Coord(3,1));
    check(result3 == 2);        

    System.out.println("All tests completed successfully.");
}

private static void check(boolean condition) {
    if (!condition) {
        throw new RuntimeException("Condition failed!");
    }
}

} 
```

输出：

```
Running tests...
Testing: equals
Testing: not equals
Testing: not found in empty stack
Testing: not found in non-empty stack
Testing: found in non-empty stack
All tests completed successfully. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:49:04.340

您需要重写该`equals()`方法，以便`true`在参数的 x 和 y 等于对象的 x 和 y 值时返回。

您还应该覆盖该`hashCode()`方法，使其“同意”该`equals()`方法。

# delphi - Indy 获取所有本地接口信息（跨平台）

> ID：15285792
> 
> 赞同：0
> 
> 时间：2013-03-08T02:40:27.760
> 
> 标签：delphi, cross-platform, indy, indy10, delphi-xe3

我正在将一个包含网络接口列表的单元转换为跨平台。当前版本使用 raw winsock 获取系统中每个网络接口的地址、掩码和广播地址。

我认为制作这个跨平台的最简单方法是使用 Indy。我发现这`AddLocalAddressesToList`是获取所有接口的 IP 地址的一种非常简单的方法，但我不知道如何获取我需要的其他信息（掩码和广播地址）。我想我可以计算广播地址，所以它实际上只是我无法弄清楚的掩码。

供参考。这是我找到的用于获取所有接口的 IP 地址的代码。

```
TIdStack.IncUsage;
try
  GStack.AddLocalAddressesToList(Memo1.Lines);
finally
  TIdStack.DecUsage;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:32:37.733

WinSock 不支持报告此类信息。您必须改用特定于操作系统的 API。在 Windows 上，这意味着使用 Win32 API`GetAdaptersInfo()`和`GetAdaptersAddresses()`函数。在其他平台上，您可以使用`getifaddrs()`可用的功能。

Indy 目前不支持您的要求。另外，请注意，目前`AddLocalAddressesToList()`仅支持大多数平台（包括 Windows）上的 IPv4 地址。

对检索本地 IPv6 地址以及子网掩码等其他信息的支持目前正在开发中，但尚无关于其可用性的 ETA。

# mongodb - mongodb聚合框架组+项目

> ID：15285795
> 
> 赞同：3
> 
> 时间：2013-03-08T02:40:36.160
> 
> 标签：mongodb, mongodb-query

我有以下问题：

此查询返回 1 个结果，这是我想要的：

```
> db.items.aggregate([ {$group: { "_id": "$id", version: { $max: "$version" } } }])

{
"result" : [
    {
        "_id" : "b91e51e9-6317-4030-a9a6-e7f71d0f2161",
        "version" : 1.2000000000000002
    }
],
"ok" : 1
} 
```

这个查询（我刚刚添加了投影，以便以后可以查询整个文档）返回多个结果。我究竟做错了什么？

```
> db.items.aggregate([ {$group: { "_id": "$id", version: { $max: "$version" } }, $project: { _id : 1 } }])

  {
"result" : [
    {
        "_id" : ObjectId("5139310a3899d457ee000003")
    },
    {
        "_id" : ObjectId("513931053899d457ee000002")
    },
    {
        "_id" : ObjectId("513930fd3899d457ee000001")
    }
],
"ok" : 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:18:33.123

找到了答案

### 1.首先我需要得到所有的_id

```
db.items.aggregate( [ 
  { '$match': { 'owner.id': '9e748c81-0f71-4eda-a710-576314ef3fa' } },
  { '$group': { _id: '$item.id', dbid: { $max: "$_id" } } } 
]); 
```

### 2.然后我需要查询文件

```
db.items.find({ _id: { '$in': "IDs returned from aggregate" } }); 
```

看起来像这样：

```
db.items.find({ _id: { '$in': [ '1', '2', '3' ] } }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T08:48:40.183

（*我知道它迟到了，但仍然回答它，这样其他人就不必去其他地方寻找正确的答案了*）

请参阅[Deka 的答案](https://stackoverflow.com/a/27739662/4394926)，这将完成您的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T23:08:42.647

并非所有蓄能器都在`$project`阶段可用。我们需要考虑在项目中我们可以在累加器方面做什么以及我们可以在小组中做什么。让我们来看看这个：

```
 db.companies.aggregate([{
  $match: {
    funding_rounds: {
      $ne: []
    }
  }
}, {
  $unwind: "$funding_rounds"
}, {
  $sort: {
    "funding_rounds.funded_year": 1,
    "funding_rounds.funded_month": 1,
    "funding_rounds.funded_day": 1
  }
}, {
  $group: {
    _id: {
      company: "$name"
    },
    funding: {
      $push: {
        amount: "$funding_rounds.raised_amount",
        year: "$funding_rounds.funded_year"
      }
    }
  }
}, ]).pretty() 
```

![MongoDB中的$组](../Images/0a3748ac542cb8dcb7fe10e14ddb1c01.png)

我们在哪里检查是否有任何`funding_rounds`不为空。然后它被`unwind`编辑到`$sort`后面的阶段。我们将为`funding_rounds`每个公司的数组的每个元素看到一个文档。所以，我们在这里要做的第一件事是`$sort`基于：

1.  `funding_rounds.funded_year`
2.  `funding_rounds.funded_month`
3.  `funding_rounds.funded_day`

在按公司名称分组的小组赛中，阵列正在使用`$push`. `$push`应该是文档的一部分，指定为我们在小组赛中命名的字段的值。我们可以推送任何有效的表达式。在这种情况下，我们将文档推送到此数组，并且对于我们推送的每个文档，它都被添加到我们正在累积的数组的末尾。在这种情况下，我们正在推动由`raised_amount`and构建的文档`funded_year`。因此，该`$group`阶段是一个文档流，`_id`其中包含我们指定公司名称的位置。

请注意，它`$push`是`$group`分阶段可用的，但不是`$project`分阶段的。这是因为`$group`阶段旨在获取一系列文档并根据该文档流累积值。

`$project`另一方面，一次处理一个文档。因此，我们可以计算项目阶段内单个文档中数组的平均值。但是做这样的事情，一次一个，我们看到文件，对于每一个文件，它通过小组赛阶段推动一个新的价值，这`$project`不是舞台设计要做的事情。对于我们想要使用的那种操作`$group`。

让我们看另一个例子：

```
 db.companies.aggregate([{
  $match: {
    funding_rounds: {
      $exists: true,
      $ne: []
    }
  }
}, {
  $unwind: "$funding_rounds"
}, {
  $sort: {
    "funding_rounds.funded_year": 1,
    "funding_rounds.funded_month": 1,
    "funding_rounds.funded_day": 1
  }
}, {
  $group: {
    _id: {
      company: "$name"
    },
    first_round: {
      $first: "$funding_rounds"
    },
    last_round: {
      $last: "$funding_rounds"
    },
    num_rounds: {
      $sum: 1
    },
    total_raised: {
      $sum: "$funding_rounds.raised_amount"
    }
  }
}, {
  $project: {
    _id: 0,
    company: "$_id.company",
    first_round: {
      amount: "$first_round.raised_amount",
      article: "$first_round.source_url",
      year: "$first_round.funded_year"
    },
    last_round: {
      amount: "$last_round.raised_amount",
      article: "$last_round.source_url",
      year: "$last_round.funded_year"
    },
    num_rounds: 1,
    total_raised: 1,
  }
}, {
  $sort: {
    total_raised: -1
  }
}]).pretty() 
```

![MongoDB中的组与项目](../Images/9e52552e44f630d48549e7f32e832a7c.png)

在`$group`舞台上，我们使用`$first`和`$last`累加器。对，我们可以再次看到`$push`- 我们不能在项目阶段使用`$first`和`$last`。因为同样，项目阶段并非旨在根据多个文档累积价值。相反，它们旨在一次重塑一个文档。使用算子计算总轮数`$sum`。值**1**仅计算通过该组的文档数以及匹配或分组在给定`_id`值下的每个文档的数量。该项目可能看起来很复杂，但它只是使输出变得漂亮。只是它包含`num_rounds`和`total_raised`来自上一个文档。

# java - 在 Java 中使用我的日期验证程序得到不正确的结果

> ID：15285797
> 
> 赞同：0
> 
> 时间：2013-03-08T02:40:51.300
> 
> 标签：java, if-statement

我必须保持程序基本，不要太花哨。这是我的问题：当我输入日期“2013 年 11 月 31 日”时，它返回“30 天的常规月份的日期输入不正确”。我理解这意味着我的 If/Else 语句和/或布尔表达式的结构存在问题。但是我似乎无法弄清楚问题所在。任何帮助表示赞赏，谢谢。

这是我的程序：

```
import java.util.Scanner;

public class DateValidation {

public static void main(String[] args) {

    Scanner keyboard = new Scanner(System.in);
    String date;
    System.out.println("Please enter a date in the following format: mm/dd/yyyy ");
    date = keyboard.next();

    int month = Integer.parseInt(date.substring(0, 2));
    int day = Integer.parseInt(date.substring(3, 5));
    int year = Integer.parseInt(date.substring(6, 10));
    boolean isLeapYear = ((year % 4 == 0) && (year % 100 != 0) || (year % 400 == 0));
    boolean thirtyMonth = (month == 9 || month == 4 || month == 5 || month == 10);
    boolean regMonth = (month == 1 || month == 3 || month == 6 || month == 7 || month == 8 || month == 11 || month == 12);

    if ((month <= 0) || (day <= 0) || (day >= 32)) {
        System.out.println("You entered an incorrect month or day value");
    }
    if ((month == 2) && (isLeapYear == true) && (day > 0) && (day <= 29)) {
        System.out.println("it's a leap year - the date is " + date);
        System.exit(0);
    } else if ((month == 2) && (isLeapYear == false) && (day > 0) && (day <= 28)) {
        System.out.println("it's not a leap year - the date is " + date);
        System.exit(0);
    } else if (month == 2) {
        System.out.println("Your input is invald. Non leap-years only have 28 days");
        System.exit(0);
    }

    if ((thirtyMonth == true) && (day > 0) && (day <= 30)) {
        System.out.println("This is a valid date for a 30 day month  - here is the date " + date);
        System.exit(0);
    } else if ((thirtyMonth == true) && (day < 0) || (day >= 31)) {
        System.out.println("Incorrect day input for a regular month with 30 days");
        System.exit(0);
    }

    if ((regMonth) && (day > 0) && (day <= 31)) {
        System.out.println("This is a valid date for a regular month with 31 days - here is the date " + date);
        System.exit(0);
    } else if ((regMonth) && (day < 0) && (day >= 32)) {
        System.out.println("Incorrect day input for a regular month with 31 days");
        System.exit(0);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:48:45.023

4 月、6 月 9 月和 11 月是 30 天的月份

```
boolean thirtyMonth = (month == 9 || month == 4 || month == 5 || month == 10); 
```

应该

```
boolean thirtyMonth = (month == 9 || month == 4 || month == 6 || month == 11);
boolean regMonth = (month == 1 || month == 3 || month == 5 ||month == 7 || month == 8 || month == 10 || month == 12); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:46:53.960

改变

```
 } else if ((thirtyMonth == true) && (day < 0) || (day >= 31)) { 
```

到

```
 } else if (thirtyMonth && (day < 0 || day >= 31)) { 
```

# ios - 如何检查另一个数组中不存在数组值

> ID：15285798
> 
> 赞同：1
> 
> 时间：2013-03-08T02:40:57.033
> 
> 标签：ios, ipad, cocoa-touch, nsmutablearray

我有两个不同的 NSMutabelArray ArrOne 和 ArrTwo。Letsay ArrOne = A、B、C 和 D ArrTwo = C、D、X 和 Y。所以我需要检查 ArrTwo 的值是否与 ArrOne 相同，如果它与 ArrOne 中的不同，则从 ArrTwo 中删除项目。在这种情况下，我必须从 ArrTwo 中删除 X 和 Y。请给我一个想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:48:23.017

```
NSMutableSet *set = [NSMutableSet setWithArray:arrOne];
[set intersectSet:[NSSet setWithAray:arrTwo];
return [set allObjects]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T04:04:18.930

您可以使用 indexOfObjectsPassingTest 来完成，如下所示：

```
 NSMutableArray *a = [@[@"A",@"B",@"C",@"D"] mutableCopy];
    NSMutableArray *b = [@[@"C",@"D",@"X",@"Y"] mutableCopy];

    NSIndexSet *indxs = [b indexesOfObjectsPassingTest:^BOOL(NSString *obj, NSUInteger idx, BOOL *stop) {
        return ![a containsObject:obj];
    }];

    [b removeObjectsAtIndexes:indxs]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T02:23:49.343

我找到了一个解决方案并且它有效

```
for (int i=0; i< arrTwo.count; i++)
{ 
    if(![arrOne containsObject:[arrTwo objectAtIndex:i]])
    {
         //do action
         NSLog(@"do delete %@",[arrTwo objectAtIndex:i]);
     }
} 
```

谢谢！

# api - Paypal Sandbox - 进入实时生产环境

> ID：15285809
> 
> 赞同：0
> 
> 时间：2013-03-08T02:41:58.987
> 
> 标签：api, testing, live, paypal-sandbox, woocommerce

我有一个带有 paypal express 插件的新 WP，woo-commerce 网站。我已添加我的 paypal API 凭据（不是沙盒凭据）并设置为实时生产模式，但在结帐时仍被定向到 Paypal 沙盒。如何退出我网站上的测试环境

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:51:32.707

[将https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr)的出现更改为[https://www.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-15T20:15:13.810

以下是从 wordpress 管理面板更改**PayPal express 插件环境的步骤。**

1- 在您的管理面板中转到**WooCommerce > 设置 > 结帐。**

2- 输入以下信息以完成您的**WooCommerce Express Checkout**配置：**单击框**

启用 PayPal 快速结帐。 环境 -**设置为实时**，除非使用 PayPal 沙盒环境凭据进行测试。 启用 PayPal 标记 -**检查**。 PayPal API 用户名 - 写下您的**Live API 用户名**。 PayPal API 密码 - 写下您的**Live API 密码**。 PayPal API 签名 - 编写您的**实时 API 签名**。 付款操作 - 从下拉列表中选择 **************出售或授权**。
检查其他选项。************

# django - 使用 Django 进行 Web 开发的虚拟环境的最佳实践？

> ID：15285812
> 
> 赞同：5
> 
> 时间：2013-03-08T02:42:39.070
> 
> 标签：django, web-applications, virtualenv, vagrant

这是一个 Django 和 Python，也许只是一个一般的 Web 开发问题。

使用 virtualenv vs vagrant vs virtual box 等有什么区别...？

我对何时使用哪一个感到有点困惑：/我一直在使用虚拟环境并为不同的项目创建新的虚拟环境......这是正确的方法吗？每个项目一个 virtualenv？

我不确定 vagrant 何时何地发挥作用......我应该设置 vagrant 然后使用 virtualenv 吗？

这可能是一个愚蠢的问题，但是……如果我要和其他人一起做这个项目。他们是否也必须建立一个虚拟环境？只是为了合作？

我们都在本地机器上工作然后将其推送到主分支不是更有意义吗？我只是有点困惑......我觉得我做错了......

谢谢大家的回复！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T02:52:49.440

Virtualenv 设置了一个本地沙箱供您安装 Python 模块。

Vagrant 是一个用于创建虚拟机的自动化工具。

VirtualBox 是一个免费的开源环境，用于运行虚拟机，例如 Vagrant 创建的虚拟机。

Virtualenv 实际上是您在本地机器上进行沙盒开发所需的一切。我们在工作中使用 Vagrant 来自动创建虚拟机。通过这种方式，进入项目的新开发人员基本上只需零配置即可开始工作。

如果您正在与其他开发人员合作，他们*不需要*执行上述任何操作来处理您的 Django 项目，但是如果涉及到很多配置无法使用 pip 和 requirements.txt 完成，那么你可能会看看 Vagrant 来简化一些自动化。

但是你的假设是正确的，你们都可以在本地分支上工作并推回 repo。其他一切都只是锦上添花。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T02:53:26.567

Virtualenv 是一个 python 结构，它包含一组特定的包，与您的系统包分开。操作系统附带或单独安装的 Python 版本及其包是“系统包”。

Virtualbox 完全不同——它是一个虚拟机，一个盒子里的整个操作系统。

我对流浪者不熟悉。

你所需要的只是virtualenv。为每个项目创建一个新的 virtualenv（它们非常轻量级！）您需要这样做，因为 virtualenv 的全部目的是隔离您的项目所需的这些包的确切包和版本。然后激活 virtualenv 并使用`pip install`来安装你需要的包，大概是从 Django 本身开始的。

获得所需的所有包后，使用`pip freeze > requirements.txt`创建一个名为 requirements.txt 的文件，该文件记录您决定使用的所有包。

当其他人在您的项目上进行协作时，他们可以启动一个 virtualenv，将您的代码拉入其中，然后运行`pip install -r requirements.txt`以复制您的环境。他们甚至可以修改 requirements.txt，通过您的版本控制系统将其推送给您，您可以运行`pip install -r requirements.txt`自己来修改您的环境以匹配他们的更改。

这一切都是必不可少的，因为如果没有 virtualenv，例如在您的计算机上拥有一个需要 Django 1.4 的项目和一个需要 Django 1.5 的项目，问题就会变得非常复杂。

Virtualenv 不是一个盒子里的整个操作系统，只是一个 python 环境，所以即使你在使用它，你仍然在本地机器上工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T02:58:49.863

我们使用 virtualenv**和**一个 Ubuntu 虚拟机。原因如下：

*   virtualenv 允许我们在给定的操作系统实例上拥有隔离的 Python 环境
*   在虚拟机中使用 Ubuntu dekstop 进行 Python 开发模拟了它部署在同样是 Ubuntu 的服务器上时的样子。这意味着我们准确地了解了外部 OS 包的依赖关系和配置。当您使用 OSX 或 Windows 进行开发并使用 Linux 进行部署时，您不会轻易做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-17T12:46:15.943

重要的一点是虚拟机是可移植的。您可以拍摄快照并将其轻松部署到其他地方。通过 Vagrant 和 Ansible 的组合，您可以自动化远程部署。

# xcode - 自动拉伸 uitextview、滚动视图和静态单元格

> ID：15285820
> 
> 赞同：0
> 
> 时间：2013-03-08T02:43:46.500
> 
> 标签：xcode, uitextview

我有一个带有四个静态单元格的 uitableview 第一个单元格有一个 uitextview 第二个和第三个和常规单元格第四个单元格有 uitextview

我需要第一个和第四个单元格根据内容大小来增长和缩小。第四个单元格将有更大的文本，因此整个页面应该滚动。

任何想法如何做到这一点？谢谢。

D.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:07:19.800

您可以使用 ：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

if (indexPath.row == 0) {

    // Your code to find height of the text whic will display in UITextView.

}else{

    // your default cell height
} 
```

}

希望这会帮助你。

一切顺利 ！！！

# class - 无法使 String 成为 Haskell 中的类的实例

> ID：15285822
> 
> 赞同：9
> 
> 时间：2013-03-08T02:44:38.700
> 
> 标签：class, haskell

我正在尝试理解 Haskell 中的类。我写了几行愚蠢的代码来掌握它。我写了一个名为的类`Slang`，它有一个功能。当我将 Integer 作为我的类的实例时，它工作正常。但是当我将 String 作为我的类的实例时，它不会编译。我一直在根据错误输出告诉我的内容对程序坐立不安，但无济于事。我知道它为什么起作用...

这是错误后面的代码：

```
module Practice where

class Slang s where
    slangify :: s -> String

instance Slang Integer where
    slangify int = "yo"

instance Slang String where  -- When I take this segment out, it works fine
    slangify str = "bro" 
```

错误：

```
Prelude> :load Practice
[1 of 1] Compiling Practice         ( Practice.hs, interpreted )

Practice.hs:9:10:
    Illegal instance declaration for `Slang String'
      (All instance types must be of the form (T t1 ... tn)
       where T is not a synonym.
       Use -XTypeSynonymInstances if you want to disable this.)
    In the instance declaration for `Slang String'
Failed, modules loaded: none.
Prelude> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T02:54:52.713

问题是 String 不是像 Integer 这样的基本类型。你想要做的实际上是

```
instance Slang [Char] where
    slangify str = "bro" 
```

然而，Haskell98 禁止这种类型的类型类，以使事情变得简单，并使人们更难编写重叠的实例，例如

```
instance Slang [a] where
    -- Strings would also fit this definition.
    slangify list = "some list" 
```

[无论如何，正如错误消息所暗示的，您可以通过启用FlexibleInstances](http://hackage.haskell.org/trac/haskell-prime/wiki/FlexibleInstances)扩展来绕过此限制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T03:48:43.817

我对我的 Haskell 文献（也就是我现在的圣经）进行了一些研究，并找到了一个可以有效解决我的问题的例子。

基本上，在这个解决方法中，您设置`Char`为类的一个实例（在本书的示例中，它被称为`Visible`），然后您可以将`[chars]`aka 字符串设置为该类的一个实例，前提是类型变量`chars`是一个“可见”的实例。如果你看下面的代码会更容易理解：

```
module Practice where

class Visible a where
  toString :: a -> String
  size :: a -> Int

instance Visible Char where
  toString ch = [ch]
  size _ = 1

instance Visible a => Visible [a] where
  toString = concat . map toString
  size = foldr (+) 1 . map size 
```

我的 GHCi 加载和函数调用：

```
*Practice> :l Practice
[1 of 1] Compiling Practice         ( Practice.hs, interpreted )
Ok, modules loaded: Practice.
*Practice> size "I love Stack!"
14
*Practice> 
```

尤里卡！

# objective-c - 手动内存管理 VS ARC

> ID：15285831
> 
> 赞同：4
> 
> 时间：2013-03-08T02:45:24.030
> 
> 标签：objective-c, cocoa

我正在读一本关于 Objective C 的书，我想知道两件事：

1.由于我们主要使用ARC，我现在应该花时间阅读关于内存管理的一整章吗？（只问这个问题以确保我正确地管理时间）

2.如果你在手动管理方面做得很好，你能得到比使用ARC更好的性能吗？（这样您的应用程序会运行得更快）

tnx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T02:52:32.923

1.  您至少应该熟悉手动内存管理的基本概念，因为 ARC 在后台使用它。您至少需要了解三件事：`retain`、`release`和`autorelease`。这将帮助您了解有关 ARC 内部工作的讨论。
2.  ARC 主要是一种编译器技巧（在运行时提供了一些支持）。您可以编写更少的代码，但无法从中获得更好的性能。*本质上，ARC 允许您以声明*方式处理内存管理，而手动管理使用*命令*式风格。但是，两个系统都从运行时调用相同的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:12:58.743

1、当然应该。ARC是基于相同的内存管理，只要让编译器做同样的工作。如果你想掌握一种技术，尝试了解它是如何工作的，是一种更快的方法。

2、实际上，它们的性能是一样的。只是让编译器做你之前做的事情。因为当你在类中保留一个对象（这是一个属性）时，我们总是在dealloc中释放。你在一个对象中分配一个对象方法，分配给本地指针，当这个方法的堆栈内存清理干净时，它会被释放；如果你在方法中保留它到方法的局部变量，你会在同一个地方释放它。然后你会发现它们都是可预测的.为什么不让机器来做呢？

# ios - 如何通过代码打开推送通知？

> ID：15285832
> 
> 赞同：1
> 
> 时间：2013-03-08T02:45:30.630
> 
> 标签：ios, notifications

当一个应用程序支持远程通知时，iOS 将询问用户是否应允许该应用程序在第一次启动时推送远程通知。

如果您点击“DON'T ALLOW”按钮，iOS系统将关闭设置->通知->应用名称中的所有通知选项（显示在通知中心、徽章等）。

但实际上，我发现一些应用程序（例如**愤怒的小鸟**）即使点击了“DON'T ALLOW”按钮，仍然会在 Settings-> Notification-> AppName 中打开一些通知选项，那么，他们是怎么做到的呢？

有没有办法通过代码打开应用程序的通知选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:04:54.140

我不认为你能做到这一点。除了应用程序在 didFinishLaunchingWithOptions 中有 registerForRemoteNotifications 时询问用户：

[[UIApplication sharedApplication] registerForRemoteNotificationTypes:...];

您无法控制用户是接受还是拒绝通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T10:45:50.693

您将推送通知与所有类型的通知混为一谈，其中可能包括本地通知。您引用的设置控制所有类型的通知。

# amazon-s3 - S3 没有及时响应在 IE9 中使用 Flash 运行时 plupload

> ID：15285834
> 
> 赞同：1
> 
> 时间：2013-03-08T02:46:38.477
> 
> 标签：amazon-s3, plupload

好的，所以问题应该从标题就清楚了。

我从 plupload 2 beta 直接上传到 S3。

当然，Chrome/Firefox/Safari 都可以。

IE9完成上传——出现在bucket中，一切正常，但最终plupload返回错误。当我通过 Fiddler2 观察网络活动时，您可以看到对 s3 的请求在很长一段时间内都没有得到响应。在通过plupload的进度达到100％之后。

当响应返回时，plupload 已将该文件标记为“失败”（代码 4），即使该文件实际上已完成。

因此，总而言之，文件上传**确实完成**了，但 plupload 没有从 s3 得到响应（足够快吗？）并出现错误。

[代码在这里](https://gist.github.com/cbiggins/5113812)。

**编辑：**所以看起来进度达到 100 但等待时间是实际上传的文件。问题似乎是 plupload 为正确上传的文件引发错误。

# php - 使用 iframe 的多个域的 Facebook 应用程序身份验证

> ID：15285836
> 
> 赞同：1
> 
> 时间：2013-03-08T02:46:42.127
> 
> 标签：php, facebook, dns

我正在运行多个域并且只想使用一个 Facebook 应用程序。

我了解您可以指定多个域但它们都必须具有相同的基本域的当前限制 - 我的都是不同的。

因此，我正在考虑使用驻留在 1 个域上的 iframe 进行 Facebook 应用程序登录。用户将使用此域进行身份验证，然后具有使用任何或指定域的登录能力。理论上这会起作用。

我本来想问：

*   以前只有一个人这样做过吗？
*   有什么明显的限制吗？
*   这会违反 Facebook 政策等吗？

只寻找一个 facebook 登录和一些基本的细节，如姓名和生日。

谢谢你

# vb.net - 以编程方式与浏览器中的打开文件对话框交互

> ID：15285839
> 
> 赞同：2
> 
> 时间：2013-03-08T02:46:58.437
> 
> 标签：vb.net

我正在尝试从网站中提取高程数据

[http://www.gpsvisualizer.com/convert_input](http://www.gpsvisualizer.com/convert_input)

我已经成功地弄清楚了如何以编程方式单击打开文件对话框的“选择文件”按钮。

```
Private Sub browser_DocumentCompleted() Handles browser.DocumentCompleted
    hDoc = browser.Document
    Dim hInp As HtmlElement = hDoc.GetElementById("uploaded_file_1")

    If hInp IsNot Nothing Then
        hInp.Focus()
        hInp.InvokeMember("Click")
    End If
End Sub 
```

现在我对如何与弹出框进行交互感到困惑。我需要填写我需要转换的文件的文件名，然后在此对话框中单击打开。有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T09:20:33.593

目前，我正在将要上传到列表框的文件的路径添加到列表框中，然后将每个文件复制到剪贴板并使用 sendkeys。我对这种方法并不感到兴奋，但它确实有效。

# git - 如何删除与标签命名相同的git远程分支？

> ID：15285843
> 
> 赞同：2
> 
> 时间：2013-03-08T02:48:16.220
> 
> 标签：git

推送标签名称 v2.3 时出错，我已经有了分支名称 v2.3。当我尝试删除分支 v2.3 时：

```
git push origin :v2.3 
```

它说，

```
qty:ibt-common qrtt1$ git push origin :v2.3 :v2.3_working
error: dst refspec v2.3 matches more than one.
error: failed to push some refs to 'git@github.com:mygit/common.git' 
```

命名冲突时是否可以删除分支？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:56:42.787

您可以像这样消除 refspec 的歧义：

```
git push origin :refs/heads/branchname 
```

[此问题中的](https://stackoverflow.com/questions/4159950/how-do-i-delete-a-remote-branch-in-git)更多信息。

# android - 如何在 onProgress 更新中更新在单声道中为 Android 使用 ASYNCTask 的进度

> ID：15285844
> 
> 赞同：0
> 
> 时间：2013-03-08T02:48:18.793
> 
> 标签：android, for-loop, mono, android-asynctask

我是 Android 编程新手.. 我正在使用 Mono for android.. 我想制作一个进度对话框来显示我导入数据时的进度。我使用 Asynctask .. 任何人都可以帮助如何让我的进度对话框显示进度。或者任何关于其他可能的方法的建议。

```
public class importData : AsyncTask
{

private ProgressDialog _progressDialog;
WebReference.Service1 service = new WebReference.Service1();
private Context _context;

public importData(Context context)

{

_context = context;

}

protected override void OnPreExecute()

{
// i make a horizontal progressdialog, i want to see the progress while importing

base.OnPreExecute();
_progressDialog = new ProgressDialog(_context) { Indeterminate = false };
_progressDialog.SetMessage("Please wait...");
 _progressDialog.SetProgressStyle(ProgressDialogStyle.Horizontal);
_progressDialog.Max = 806;
_progressDialog.Progress = 0;
_progressDialog.Show();

}

protected override Java.Lang.Object DoInBackground(params Java.Lang.Object[] @params)

{
try
{
//My background Code in Importing Data
return true;
}
catch (Exception ex)
{
//When has an error return false
return false;
}

}

protected void OnProgressUpdate()
{
base.OnProgressUpdate();
//What i'm going to put in this part

}

protected override void OnPostExecute(Java.Lang.Object result)

{
base.OnPostExecute(result);
_progressDialog.Hide();
_progressDialog.Dismiss();
bool dd = (bool)result;
if (dd)
{

//Toast.MakeText(this, "Importing data completed", ToastLength.Short).Show();
Android.App.AlertDialog.Builder builder = new AlertDialog.Builder(_context);
AlertDialog ad = builder.Create();
ad.SetTitle("Info");
ad.SetIcon(Android.Resource.Drawable.IcDialogInfo);
ad.SetMessage("Importing deals completed");
ad.SetButton("OK", (s, e) => { });
ad.Show();
}
else {

Android.App.AlertDialog.Builder builder = new AlertDialog.Builder(_context);
AlertDialog ad = builder.Create();
ad.SetTitle("Error");
ad.SetIcon(Android.Resource.Drawable.IcDialogAlert);
ad.SetMessage("Failed");
ad.SetButton("OK", (s, e) => { });
ad.Show();
}
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:18:27.020

我在下面修改了你的代码。希望能帮助到你。或者给你一个想法。在 DoinBackground 循环您的进度对话框并使用 this.publishProgress 将其传递给 onprogressupdate ..

```
public class importData : AsyncTask
{

private ProgressDialog _progressDialog;
WebReference.Service1 service = new WebReference.Service1();
private Context _context;

public importData(Context context)

{

_context = context;

}

protected override void OnPreExecute()

{
// i make a horizontal progressdialog, i want to see the progress while importing

base.OnPreExecute();
_progressDialog = new ProgressDialog(_context) { Indeterminate = false };
_progressDialog.SetMessage("Please wait...");
 _progressDialog.SetProgressStyle(ProgressDialogStyle.Horizontal);
_progressDialog.Max = 806;
_progressDialog.Progress = 0;
_progressDialog.Show();

}

protected override Java.Lang.Object DoInBackground(params Java.Lang.Object[] @params)

{

try
{
for(int i=0; i<_progressDialog.Max; i++) {
    this.PublishProgress(i);
}
//My background Code in Importing Data
return true;
}
catch (Exception ex)
{
//When has an error return false
return false;
}

}

protected override void OnProgressUpdate(params Java.Lang.Object[] values)
{
base.OnProgressUpdate();
//increment the progress of your progrssdialog
_progressDialog.IncrementProgressBy(1);

}

protected override void OnPostExecute(Java.Lang.Object result)

{
base.OnPostExecute(result);
_progressDialog.Hide();
_progressDialog.Dismiss();
bool dd = (bool)result;
if (dd)
{

//Toast.MakeText(this, "Importing data completed", ToastLength.Short).Show();
Android.App.AlertDialog.Builder builder = new AlertDialog.Builder(_context);
AlertDialog ad = builder.Create();
ad.SetTitle("Info");
ad.SetIcon(Android.Resource.Drawable.IcDialogInfo);
ad.SetMessage("Importing deals completed");
ad.SetButton("OK", (s, e) => { });
ad.Show();
}
else {

Android.App.AlertDialog.Builder builder = new AlertDialog.Builder(_context);
AlertDialog ad = builder.Create();
ad.SetTitle("Error");
ad.SetIcon(Android.Resource.Drawable.IcDialogAlert);
ad.SetMessage("Failed");
ad.SetButton("OK", (s, e) => { });
ad.Show();
}
}

} 
```

# python - 解析python类树并应用语法

> ID：15285846
> 
> 赞同：0
> 
> 时间：2013-03-08T02:48:26.213
> 
> 标签：python, class, recursion, tree, grammar

我正在尝试减少以节点女儿结构表示的数据文件。数据格式表示如下：

( { [ GeoNode A, GeoNode B, GeoNode C ], GeoNode D }, { GeoNode E, GeoNode F }, GeoNode G )

其中 GeoNode 是一个 python 对象。我正在尝试在将遍历树的某个方案中应用两个操作。第一个会将当前“级别”中的所有 GeoNode 转换为网格。第二个将网格合并在一起，最后留下一个网格。

以下是上述示例中的步骤。

1.  （{[网格A，网格B，网格C]，GeoNode D}，{GeoNode E，GeoNode F}，GeoNode G）
2.  ( { Mesh ABC, GeoNode D }, { GeoNode E, GeoNode F }, GeoNode G )
3.  （{网格ABC，网格D}，{地理节点E，地理节点F}，地理节点G）
4.  (网格 ABCD, { GeoNode E, GeoNode F }, GeoNode G )
5.  （网格 ABCD，{ 网格 E，网格 F}，GeoNode G）
6.  （网格 ABCD、网格 EF、GeoNode G）
7.  （网格 ABCD、网格 EF、网格 G）
8.  网格 ABCDEFG

我目前将数据结构表示为包含 GeoNode 的嵌套 python 列表。我能够以深度优先的方式遍历树并打印结构。当我确定我目前在 [Mesh A, Mesh B, Mesh C] 时，我不清楚该怎么做。我可以轻松制作 Mesh ABC，但那又如何呢？如何确保它与 GeoNode D 匹配并向上传播。

这类似于尝试评估 ( ( 1 + 1 ) + 2 + ( 3 + 5 ) )，但也将每个 int 转换为浮点数。但是，就我而言，我正在处理这些类，而不是浮点数和整数。是否有现有的方法可以在 Python 或独立于语言的示例中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:52:56.073

您必须使用递归转换函数自下而上地工作。

```
def transform(s):
    ''' Receives a GeoNode structure as nested lists and returns a Mesh.
    '''
    if isinstance(s, list):
       return merge_meshes([transform(e) for e in s])
    else:
       assert isinstance(s, GeoNode)
       return geonode_to_mesh(s) 
```

# linux - 为 bash 编写脚本时遇到问题

> ID：15285850
> 
> 赞同：-2
> 
> 时间：2013-03-08T00:53:29.860
> 
> 标签：linux, bash

我必须用 bash 编写一个程序，并且我在逻辑上理解如何去做，我只是无法进入代码。问题是这个“编写一个名为“乘法”的程序从用户那里获取两个数字并计算第一个数字乘以第二个数字并显示结果。你只能使用循环和加法运算符（+）。你不是允许使用 (*)。”

我知道您必须将一个数字添加到另一个数字第 n 次才能获得“产品”，但我不知道如何。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:43:14.270

将其放入脚本中。调用它`multiply`并`chmod +x multiply`使其可执行。

```
#!/bin/bash
read -p "Enter the first value: " a
read -p "Enter the second value: " b
product=0
for (( i=0; i<b; i++ )); do
  ((product+=a))
done
echo $product 
```

这是一个运行它的示例：

```
bash-4.1$ multiply
Enter the first value: 8
Enter the second value: 7
56
bash-4.1$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:19:21.427

在函数式编程中它看起来像

```
multiply(a,0) -> 0;
multiply(a,b) -> a + multiply(a,b-1). 
```

在 bash 中它看起来像

```
#!/bin/bash
ANS=0
function multiply {
for i in `seq 0 $2`
ANS+=$1
}
echo ANS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:28:04.010

```
#!/bin/bash
SCALE=0;
if [[ $# -eq 0 ]]; then
    printf "Usage:   $0 <simple_math_problem>\n";
    printf "Example: $0 1+1\n";
else
    bc<<EOM
    scale=${SCALE};
    $@;
    quit;
EOM
fi 
```

# ajax - 显示json返回的值

> ID：15285854
> 
> 赞同：0
> 
> 时间：2013-03-08T02:48:56.100
> 
> 标签：ajax, json

我有一个简单的问题要在 html 页面上显示数据。以下代码在屏幕上显示 json 数据数组。但是，我想通过“url”、“img_url”等每个元素来显示它。你能告诉我是谁做的吗？

ajax代码

```
var dataString =  'url=' + pathname + '&img_name=' + img_name + "&tag=" + tag;

    $.ajax({
       type: "POST",
       url: "image_finder.php",
       data: dataString,
       dataType: 'json',
       complete: function (xhr, status) {
        if (status === 'error' || !xhr.responseText) {
            //handleError();

            alert("error");

        } else {
            var data = xhr.responseText;

            $('#tt').html("<div id='message'></div>");
                                $('#message').html(data);

        }
    }
    }); 
```

json返回

```
{"cid":"14","url":"http:\/\/localhost\/","img_url":"http:\/\/static.naver.net\/www\/up\/2013\/0305\/mat_173330634c.jpg","img_name":"mat_173317134c.jpg","html":"<div id=\"hotspot-19\" class=\"hs-wrap hs-loading\">\r\n<img src=\"http:\/\/static.naver.net\/www\/up\/2013\/0305\/mat_173330634c.jpg\">\r\n<div class=\"hs-spot-object\" data-type=\"spot\" data-x=\"95\" data-y=\"64\" data-width=\"30\" data-height=\"30\" data-popup-position=\"left\" data-visible=\"visible\" data-tooltip-width=\"200\" data-tooltip-auto-width=\"true\">\r\nasdf\r\n<\/div>\r\n<div class=\"hs-spot-object\" data-type=\"spot\" data-x=\"168\" data-y=\"53\" data-width=\"30\" data-height=\"30\" data-popup-position=\"left\" data-visible=\"visible\" data-tooltip-width=\"200\" data-tooltip-auto-width=\"true\">\r\nrere\r\n<\/div>\r\n<\/div>\r\n","jscript":""} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:09:00.720

```
$.ajax({
    type: "POST",
    url: "image_finder.php",
    data: dataString,
    dataType: 'json',
    success: function (data) {
        for(var item in data){
            console.info(item);//print key
            console.info(data[item]);//print value
        }
    }
}); 
```

我希望这是你需要的。

# android - 在Android中检测当前音频路由的有效方法？

> ID：15285856
> 
> 赞同：5
> 
> 时间：2013-03-08T02:49:09.797
> 
> 标签：android, audio, android-audiomanager

我的应用程序需要知道用户选择的基本音频路由的能力。在 iOS 上，这很简单，因为您只需注册一个回调，就可以准确地知道音频的去向。

在 Android 上，我很高兴看到`MediaRouter`课程，但令我沮丧的是，没有可预测的方法来确定路线类型。例如，切换到蓝牙A2DP设备时，唯一的识别项是`RouteInfo.getName()`方法，但这会返回A2DP设备的友好名称，因此无法进行比较。

我也尝试过使用以下广播：

```
AudioManager.ACTION_AUDIO_BECOMING_NOISY
Intent.ACTION_HEADSET_PLUG
BluetoothHeadset.ACTION_AUDIO_STATE_CHANGED
BluetoothA2dp.ACTION_PLAYING_STATE_CHANGED
BluetoothA2dp.ACTION_CONNECTION_STATE_CHANGED 
```

但是这种方法容易出错。例如，如果你连接了蓝牙 A2DP，那么你插上耳机，很容易分辨出路线是“耳机”，但在拔下耳机时，你必须猜测哪条路线仍然处于活动状态，通过记录所有蓝牙事件的连接状态。

当您的应用程序启动时，确定初始音频路由也存在困难。HEADSET_PLUG 很粘，所以这很好，但没有其他...

关于如何解决这个问题并准确检测到这个问题有什么建议吗？为什么这在 Android 中是一项如此艰巨的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:19:07.687

这是一种非常骇人听闻的当前路由轮询方式，它还支持检测 A2DP。使用风险自负，因为这些类的内部组件将来很可能会发生变化。不过，它应该适用于 Jellybean 和 Jellybean MR1。

```
String ouputDeviceName;
try {
    MediaRouter mr = (MediaRouter)getSystemService(Context.MEDIA_ROUTER_SERVICE);
    Class mediaRouterClass = Class.forName("android.media.MediaRouter");
    Method getSystemAudioRouteMethod = mediaRouterClass.getMethod("getSystemAudioRoute");
    RouteInfo ri = (RouteInfo)getSystemAudioRouteMethod.invoke(mr);

    Class mediaRouterStaticClass = Class.forName("android.media.MediaRouter$Static");
    Field staticField = mediaRouterClass.getDeclaredField("sStatic");
    Field a2dpField = mediaRouterStaticClass.getDeclaredField("mBluetoothA2dpRoute");
    AccessibleObject.setAccessible(new AccessibleObject[]{staticField}, true);
    AccessibleObject.setAccessible(new AccessibleObject[]{a2dpField}, true);
    Object a2dpRoute = a2dpField.get(staticField.get(null));
    if (a2dpRoute != mr.getSelectedRoute(MediaRouter.ROUTE_TYPE_LIVE_AUDIO)) {
        // Phone, Headphone, HDMI, etc..
        ouputDeviceName = "name: " + ri.getName().toString();
    } else {
        // Audio is routed to A2DP
        ouputDeviceName  = "name: A2DP";
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

# php - php邮件功能和邮件服务器

> ID：15285859
> 
> 赞同：0
> 
> 时间：2013-03-08T02:49:21.813
> 
> 标签：php, email

使用 php 邮件[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)如果邮件发送正常，则返回 true。

但是对于我的网络主机，发送速率是 3000/小时，然后服务器将在达到 3000 限制后存储 450 封电子邮件（这是 3000 限制的 15%）。

我想确认的是，当 php 邮件函数返回 true 时，它​​是否可以处理这些设置。邮件服务器是否向邮件功能确认它发送正常，或者邮件功能对此是否“视而不见”？

邮件服务器是否对功能说，限制达到电子邮件未发送所以返回假？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:55:19.060

使用`mail()`PHP 自带的函数并不是最优的解决方案。使用 SWIFTMAILER [http://swiftmailer.org/](http://swiftmailer.org/)这将用作 SMTP 服务：

使用 swiftmailer 作为 SMTP 服务时的代码示例：

```
require_once 'lib/swift_required.php';

// Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.example.org', 25)
  ->setUsername('your username')
  ->setPassword('your password')
  ;

/*
You could alternatively use a different transport such as Sendmail or Mail:

// Sendmail
$transport = Swift_SendmailTransport::newInstance('/usr/sbin/sendmail -bs');

// Mail
$transport = Swift_MailTransport::newInstance();
*/

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance('Wonderful Subject')
  ->setFrom(array('john@doe.com' => 'John Doe'))
  ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
  ->setBody('Here is the message itself')
  ;

// Send the message
$result = $mailer->send($message); 
```

# apache - Magento 正在缓存 404 URL，以便它们返回“200 OK”状态而不是“404 not found”。我该如何防止这种情况？

> ID：15285860
> 
> 赞同：0
> 
> 时间：2013-03-08T02:49:23.813
> 
> 标签：apache, oop, magento

我在 Apache (Debian) 上运行带有 APC 缓存的 Magento Enterprise 1.9。

如果我浏览到我网站上不存在的 URL，我会收到来自服务器的 404 响应，并按预期显示我的 404 页面。*但是，如果我再次*访问相同的 URL ，这一次（以及所有后续时间）我会从服务器收到“200 OK”状态，尽管 URL 仍然无效并且仍然显示 404 页面。

例子：

```
$ curl -I http://www.example.com/some-nonexistent-URL
$ HTTP/1.1 404 Not Found

$ curl -I http://www.example.com/some-nonexistent-URL
$ HTTP/1.1 200 OK 
```

我*假设*这是因为对该 URL 的响应以某种方式被缓存，因此服务器发送了 404 页面的“200 OK”缓存版本（！）。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:11:30.390

这是 Magento 的全页缓存故障。

我发现 Magento 会检查是否存在名为 的 cookie `NO_CACHE`，所以我只是`$_COOKE["NO_CACHE"] = true;`在调用 404 操作之前放置了点（在我的情况下是`/app/code/core/Mage/Cms/controllers/IndexController.php`）。

我还在`cache-control: no-cache, must revalidate`404 页面模板本身中添加了一个标题和与上面相同的 cookie，以进行良好的衡量。

# azure - Azure 服务总线的基本业务流程？

> ID：15285862
> 
> 赞同：3
> 
> 时间：2013-03-08T02:49:50.833
> 
> 标签：azure, azureservicebus

我想了解 Azure 服务总线支持多少以下场景：

工作服务器将事件通知未知数量的网络服务器 每个网络服务器处理消息（处理需要一些时间 - 10-30 分钟） 当每个网络服务器处理完第一条消息后，所有网络服务器都需要接收一个新的事件。基本上，在对每个 Web 角色执行长时间运行的作业后，我试图同步多个 Web 角色。

我可以从 Azure 服务总线“免费”获得多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:32:47.923

Azure 服务总线具有许多丰富的消息传递功能，可帮助您满足需求的 Pub/Sub 方面以及请求/响应相关性。会话（分组/相关）消息的概念以及会话状态在这里非常有用。以下是一些可能有帮助的特定链接： MSDN 上的会话文章：http: [//msdn.microsoft.com/en-us/magazine/jj863132.aspx](http://msdn.microsoft.com/en-us/magazine/jj863132.aspx)

使用会话的示例： http: [//code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Session-41c43fb4](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Session-41c43fb4)

请求/响应示例：[http ://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Request-0ce8fcaf](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Request-0ce8fcaf)

谈论相关性等：[http ://channel9.msdn.com/Blogs/Subscribe/Service-Bus-Messaging-Deep-Dive](http://channel9.msdn.com/Blogs/Subscribe/Service-Bus-Messaging-Deep-Dive)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T08:02:24.247

您可能还想在[此处](http://nuget.org/packages/ServiceBus.DurableTask)查看最近发布的 Service Bus Durable Task Framework 预览。有关如何使用此框架的一些示例，请参见[此处](http://code.msdn.microsoft.com/windowsazure/Service-Bus-Durable-Task-07330399)。

基本上，在会话等服务总线功能之上使用此框架，您可以编写一些 C# 编排代码，大致如下：

```
 ...
            // phase 1
            List<Task> taskList = new List<Task>();
            foreach (var serverName in serverList)
            {
                taskList.Add(context.ScheduleTask<object>(typeof(ExecutePhase1OnWebServerActivity), serverName));
            }

            // wait for all of the executions to finish
            await Task.WhenAll(taskList);

            // phase 2
            taskList = new List<Task>();
            foreach (var serverName in serverList)
            {
                taskList.Add(context.ScheduleTask<object>(typeof(ExecutePhase2OnWebServerActivity), serverName));
            }

            await Task.WhenAll(taskList);
            ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:08:47.910

根据我对您问题的解释，在我看来，在您确定所有未知数量的服务器都处理了他们的消息之前，复杂的部分不会发送第二条消息。

虽然服务总线将提供 pub/sub 和相关功能，可以在这里为您提供帮助，但对我来说，您描述了一种模式，服务器会注册他们的兴趣并承认他们已经处理了他们的消息，所以一些东西会计算 ack，一旦每个人都有确认将发送第二条消息。

这种编排不是服务总线可以帮助您的。这使您可以在工作人员角色中构建某些东西，或者在 VM 角色中可用时使用 BizTalk。

像一个长时间运行的 BizTalk 编排来处理注册、跟踪确认和发布新消息以及用于 pub sub 到 Web 服务器的服务总线主题可能是一种方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T12:28:20.010

在我看来，这就像 Workflow Foundation 和 Service Bus 的组合。

# asp.net - 在 asp.net 中访问 App_Data 内的资源

> ID：15285864
> 
> 赞同：0
> 
> 时间：2013-03-08T02:50:33.883
> 
> 标签：asp.net

我有一个 asp.net 应用程序，它具有以下结构：

```
App_code
App_Data
   data.mdb
js
css
manager
  App_Data
  App_Code
  web.config
..... 
```

现在我想访问`data.mdb`in `manager/web.config`。

如何访问它？

* * *

我试过这个：

```
<add key="connstr" value="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|datadirectory|\data.mdb" /> 
```

然后我得到了错误：

```
'manager/data.mdb' does not exist. 
```

然后我尝试了这个：`Data Source=|datadirectory|\..\App_Data\data.mdb`。

我收到错误：`connstr not valid.`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T06:47:37.070

您需要访问`manager/`. 我希望有一种方法可以做到这一点。您可以尝试给出数据库文件的完整地址或绝对地址`data.mdb`。我的意思是如果你在本地系统上工作，它应该是你硬盘上的确切地址`C:/Folder/YourProject/Manager/data.mdb`，如果你需要在网络服务器上工作，只需添加你的主机的确切地址，可以从主机面板本身获取否则还有另一种方法。

您可以做的只是创建一个`temp.aspx`文件，然后在`temp.aspx.cs`（我假设它是 C# 用于后面的代码）中，您可以打印服务器的路径，例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Write(Server.MapPath("~").ToString());
} 
```

并将其上传到您的主机上。当您访问它时，您将获得主机的绝对地址。而您现在需要做的只是复制并粘贴`connectionString`web.config 中的地址，同时附加您的 DB 路径，您就可以让应用程序正常工作了。并记住`temp.aspx`从主机中删除。

所以如果你的地址是`D:/Hosting/4232322/Some_directory`

你的完整字符串应该是这样的：

```
<add name="connstr" providerName="Microsoft.Jet.OleDB.4.0" connectionString="Provider=Microsoft.Jet.OleDB.4.0; Data Source=D:/Hosting/4232322/Some_directory/manager/data.mdb; Persist Security Info=True;"/> 
```

# winsock - 单个客户端与多个服务器通信

> ID：15285869
> 
> 赞同：1
> 
> 时间：2013-03-08T02:51:20.730
> 
> 标签：winsock, tcpclient

我正在做一个项目，我有一个客户端需要打开到多个服务器（100）的 Telnet 会话并等待消息。消息很小（< 80 字节）并且会随机出现。

我读过通过为每个“服务器”创建一个线程来做到这一点是不好的形式。我正在寻找有关使用 TCPClient、Winsock 或 Catalyst 或 ??? 处理多个站点的最佳方法的建议

谢谢您的帮助 ！

加里·M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:47:00.357

由于它是 Windows 平台，因此有很多选择。您可以使用 Winsock**选择**函数，或 **WSAPoll**，或**WSAAsyncSelect**，或完成端口。

**select/WSAPoll 的**工作方式几乎与 Posix 中的一样，并且有很多示例，以及一些关于如何使用这些示例的现成库。

**WSAAsyncSelect**将事件发送到 UI 线程（你需要有窗口）。如果您的应用程序有一个窗口，这可能是最简单的选项，因为所有活动都将发生在窗口线程中，并且库负责事件序列化。

也看看（重要的是你有超过 64 个连接）： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms739169 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms739169(v=vs.85).aspx)

使用 Windows 完成端口： http: [//msdn.microsoft.com/en-us/magazine/cc302334.aspx](http://msdn.microsoft.com/en-us/magazine/cc302334.aspx) [http://msdn.microsoft.com/en-us/magazine/ms810436.aspx](http://msdn.microsoft.com/en-us/magazine/ms810436.aspx)

# javascript - 显示（）不起作用

> ID：15285871
> 
> 赞同：-1
> 
> 时间：2013-03-08T02:51:23.303
> 
> 标签：javascript, jquery, asp.net

当用户单击提交按钮时，我试图显示加载微调器。我尝试实施[此处](https://stackoverflow.com/questions/807408/showing-loading-animation-in-center-of-page-while-making-a-call-to-action-method)提供的解决方案，但它不起作用。

我已经验证了该函数正在被调用，并且目标 div 正在被 jQuery 通过抛出一个**alert(spinner.innerHTML)**来找到，如下所示：

```
<script type="text/javascript">
    $(document).ready(function () {
        var spinner = $("div#spinner");
    });
    var spinnerVisible = false;
    function showProgress() {
        if (!spinnerVisible) {
            alert(spinner.innerHTML);
            spinner.show();
            spinnerVisible = true;
        }
    };
    function hideProgress() {
        if (spinnerVisible) {
            spinner.hide();
            spinnerVisible = false;
        }
    };
</script> 
```

正如预期的那样，当我点击我的按钮时，我会看到一个带有文本“正在加载...”的警报窗口，这是来自我的 div 的文本。但是，如果我在调用**spinner.show();****之后添加第二个警报；**它没有弹出，这让我相信对**spinner.show();的调用** 导致jQuery失败。

 ****这是我第一次涉足 jQuery，所以我正在努力解决如何调试它并找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:32:20.720

根据调试程序，您的项目似乎没有包含 jQuery 库。

请在您的项目中启用 jQuery 以使用 jQuery 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:54:07.180

您应该正确定义微调器（即在全局中）

```
<script type="text/javascript">
    var spinner;
    $(document).ready(function () {
        spinner = $("div#spinner");
    });
    var spinnerVisible = false;
    function showProgress() {
        if (!spinnerVisible) {
            alert(spinner.innerHTML);
            spinner.show();
            spinnerVisible = true;
        }
    };
    function hideProgress() {
        if (spinnerVisible) {
            spinner.hide();
            spinnerVisible = false;
        }
    };
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T02:56:32.607

您正在尝试访问 spinner 变量而在函数中没有作用域。

```
<script type="text/javascript">
        $(document).ready(function () {
            var spinner = $("div#spinner");
        });
        var spinnerVisible = false;
        function showProgress() {
            var spinner = $("div#spinner");
            if (!spinnerVisible) {
                alert(spinner.innerHTML);
                spinner.show();
                spinnerVisible = true;
            }
        };
        function hideProgress() {
            var spinner = $("div#spinner");
            if (spinnerVisible) {
                spinner.hide();
                spinnerVisible = false;
            }
        };
    </script> 
```****

# keyboard-shortcuts - 如何在 Chrome OS 中重新映射键？

> ID：15285872
> 
> 赞同：19
> 
> 时间：2013-03-08T02:51:27.277
> 
> 标签：keyboard-shortcuts, remap, google-chrome-os

对于习惯在 vim 中使用 Ctrl-W 绑定的人来说，让 Chrome 操作系统问我“想关闭这个窗口，然后？”是非常烦人的。

如何在 Chrome 操作系统中重新映射键？在任何地方都找不到这个绝密设置。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-03T00:36:48.400

Google 刚刚发布了这些[扩展](https://github.com/google/extra-keyboards-for-chrome-os)，允许您重新映射大多数键，但有一些警告。

此外，Chrome OS 现在* 支持将 、 和 键重新映射`Ctrl`到`Alt`[ `Search`Search/Ctrl/Alt/disabled/Esc] 而无需任何扩展。请参见此处：chrome://settings/keyboard-overlay#keyboard

*至少从 33.0.1750.58（官方版本 247552）测试版开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:04:50.667

目前是不可能的。

讨论主题：[https ://groups.google.com/a/chromium.org/d/msg/chromium-discuss/pfAQrN0-t6c/ADp_Io32DNAJ](https://groups.google.com/a/chromium.org/d/msg/chromium-discuss/pfAQrN0-t6c/ADp_Io32DNAJ)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-01T16:46:45.740

查看[Vimium](https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb)以了解 Chrome 中的 vi 类映射以及重新映射它们的能力。您仅限于它支持的 vim/chrome 命令。

因此，还请查看[keyboard-fu](https://chrome.google.com/webstore/detail/keyboard-fu/cafiohcgicchdfciefpbjjgigbmajndb)，它允许您将键映射到您想要的任何Javascript 片段。

# java - 杀死所有进程，强制一切停止

> ID：15285875
> 
> 赞同：0
> 
> 时间：2013-03-08T02:51:37.170
> 
> 标签：java, swing, object, jframe, jpanel

我有一个游戏，`JPanel`它上面有许多其他的东西，它们有自己的独立计时器等等。似乎当我尝试从我的框架中移除面板以将其替换为另一个`JPanel`时，它实际上拒绝结束它自己的所有进程。因此，即使我能够通过删除它并设置它来将它从面板屏幕上删除`null`，它的进程仍然在后台运行，即音乐和飞来飞去的东西。

我需要知道的是一些关于如何完全杀死它`JPanel`并完全终止它的生命的解决方案。

似乎没有多少人遇到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:09:47.990

试试这个：

```
myFrame.getContentPane().remove(myPanel);
            myFrame.validate(); 
```

确保您的音乐和其他组件在面板内，以便它们也被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:32:20.907

我记得在我自己的游戏中遇到过这个问题..

只需创建一些自定义方法，即`destroy()`停止所有计时器游戏循环音乐等。

IE

```
MyPanel panel=new MyPanel();

...

panel.destory();//stop music, timers etc

frame.remove(panel);

//refresh frame to show changes
frame.revalidate(); 
frame.repaint(); 
```

面板将在哪里：

```
class MyPanel extends JPanel {

    private Timer t1,t2...;

    //this method will terminate the game i.e timers gameloop music etc
    void destroy() {
       t1.stop();
       t2.stop();
    }

} 
```

**或者**，您可以让 Swing Timers成为各种*观察者*，方法是让它每次检查面板是否可见，如果不可见，它应该停止执行。这当然会导致您创建一个计时器，该计时器仅在面板可见时才启动其他计时器：

```
class MyPanel extends JPanel {

    private Timer t1,t2,startingTimer;

    MyPanel() {
       t1=new Timer(60,new AbstractAction() {
           @Override
           public void actionPerformed(ActionEvent ae) {
               if(!MyPanel.this.isVisible()) {//if the panel is not visible
                   ((Timer)(ae.getSource())).stop();
               }
           }
       });
       startingTimer=new Timer(100,new AbstractAction() {
           @Override
           public void actionPerformed(ActionEvent ae) {
               if(MyPanel.this.isVisible()) {//if the panel is visible
                   t1.start();//start the timers
                   t2.start();
                   ((Timer)(ae.getSource())).stop();//dont forget we must stop this timer now

               }
           }
       });
       startingTimer.start();//start the timer which will check when panel becomes visible and start the others as necessary
    }

} 
```

现在你要做的就是：

```
frame.remove(panel);//JPanel timers should also see panel is no more visible and timer will stop

//refresh frame to show changes 
frame.revalidate(); 
frame.repaint(); 
```

# c# - 如何引用 Microsoft.Office.Interop.Excel dll？

> ID：15285880
> 
> 赞同：58
> 
> 时间：2013-03-08T02:52:16.487
> 
> 标签：c#, excel, reference, visual-studio-2012, vsto

我在 2006 年使用 MS VS 2005 开发了一个处理 excel 表的系统。现在，我不能使用与 MS VS 2012 相同的参考。

```
var app = new Microsoft.Office.Interop.Excel.Application();
Workbooks wbs = app.Workbooks; 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-08T02:58:57.253

**使用 NuGet（VS 2013+）：**

在任何最新版本的 Visual Studio 中，最简单的方法就是使用 NuGet 包管理器。*（甚至是 VS2013，带有用于 Visual Studio 2013扩展的[NuGet 包管理器。）](https://marketplace.visualstudio.com/items?itemName=NuGetTeam.NuGetPackageManagerforVisualStudio2013)*

右键单击*“References”*并选择*“Manage NuGet Packages...”*，然后只需搜索 Excel。

[![在此处输入图像描述](../Images/fc734706256793db8729a82ae5c9d4d6.png)](https://i.stack.imgur.com/xlQQx.png)

* * *

**与 2012 年相比：**

旧版本的 VS 无法访问 NuGet。

*   右键单击“引用”并选择“添加引用”。
*   选择左侧的“扩展”。
*   寻找`Microsoft.Office.Interop.Excel`。
    *（请注意，您只需在右上角的搜索框中输入“excel”即可。）*

![VS2012/2013 参考资料](../Images/92525f9a8dccc74361a12b0286f595c5.png "对比 2012 / 2013")

* * *

**对比 2008 / 2010：**

*   右键单击“引用”并选择“添加引用”。
*   选择“.NET”选项卡。
*   寻找`Microsoft.Office.Interop.Excel`。

![VS 2010 参考资料](../Images/c4975319759bd1f26334f00b80dd2e2c.png "对比 2008 / 2010")

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-12-31T08:22:36.410

您也可以尝试通过包管理器在 Visual Studio 中安装它。

`Install-Package Microsoft.Office.Interop.Excel`在包控制台中运行。这将自动将其添加为项目参考。

使用是这样的：

```
Using Excel=Microsoft.Office.Interop.Excel; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-04-20T08:37:32.737

如果你有 VS 2013 Express 并且你找不到 Microsoft.Office 命名空间，试试这个（'Microsoft Excel 12.0 Object Library'，如果你想使用 Office 2007）

![在此处输入图像描述](../Images/26c791686ec8e6223023b9e6065d3fda.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-15T18:08:52.243

根据 Mulfix 的回答，如果您有 Visual Studio Community 2015，请尝试添加参考... -> COM -> 类型库 -> 'Microsoft Excel 15.0 Object Library'。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-11T14:24:09.520

与早期绑定引用不同的是，有一个名为 NetOffice 的开源项目可以将其从您的项目中抽象出来，让生活变得更加轻松。这样，您就不必依赖安装了特定版本的 Office 的用户。

[NetOffice Codeplex 站点。](http://netoffice.codeplex.com/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T05:09:36.987

您必须检查您的目标是哪个版本的 Excel？

如果您的目标是 Excel 2010 使用版本 14（根据 Grant 的屏幕截图答案），Excel 2007 使用版本 12 。您不能使用 vS2012 支持 Excel 2003，因为它们没有安装正确的 Interop dll。

# qt - 带有 QtableWidget 的垂直滚动条

> ID：15285884
> 
> 赞同：1
> 
> 时间：2013-03-08T02:52:46.973
> 
> 标签：qt, qtablewidget

此问题仅在 Mac 中观察到。在 Winows 7 和 XP 中，一切正常。

在 QTable Widget 中，我使用`setCellWidget()`. 然而，要在我正在使用的同一行的其他列中添加项目`setItem()`。当我尝试使用垂直滚动条时，`setItem()`正确使用滚动添加的项目。但是添加的项目`setCellWidget()`根本不滚动。他们被冻结了。我尝试了什么 - [1] 我尝试设置样式表 - QString scrollStyleSheet = “QTableWidget {}”; // 也尝试了一些变化，但这效果最好`ui->deviceGridTable->setStyleSheet(scrollStyleSheet );`

只要我在添加项目时不滚动，它就可以正常工作。在添加新项目之前或添加新项目之后，如果我滚动，它工作正常。但是，如果我滚动，在一个一个添加新项目的同时，它会显示出我刚刚描述的相同的旧丑陋特征。

[2] 我尝试设置`VerticalScrollMode`为`ScrollPerPixel`. 它根本不起作用。

在添加项目时，我还能尝试解决垂直滚动的问题吗？（仅适用于使用`setCellWidget()`.

问题仅出现在 Mac OSX 10.8.1 上。我正在使用 Qt 4.8.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:00:12.697

尝试这个：

```
tableWidget.setVisible(0)
tableWidget.setSortingEnabled(0)
... populate tableWidget here ...
tableWidget.setSortingEnabled(1)
tableWidget.setVisible(1) 
```

如果您不使用排序，则仅尝试使用可见性。

# sas - SAS入门书

> ID：15285887
> 
> 赞同：5
> 
> 时间：2013-03-08T02:52:53.157
> 
> 标签：sas

我只是想知道您是否可以向我推荐任何有关 SAS 入门的书？我有 C++ 和 java 的 OOp 编程背景。有人推荐我：

```
Applied Statistics and the SAS Programming Language
The Little SAS Book: A Primer
SAS Applications Programming
Applied Statistics and the SAS Programming Language 
```

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T03:04:15.850

Little SAS Book 是一个很好的资源。我仍然不时引用它，尤其是在我离开该语言一段时间后。不熟悉列表中的其他书籍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T15:48:48.643

除了您已经拥有的书籍参考资料外，请记住使用 SAS 支持网站上提供的文档。如果您是 SAS 新手，我强烈建议您阅读**SAS 概念**书。 [这是本书的9.3版本](http://support.sas.com/documentation/cdl/en/lrcon/65287/HTML/default/viewer.htm#titlepage.htm)。另请阅读适用于您的操作系统的**SAS Companion 。**

特定的文档可能有点难以找到，因为有很多不同的组件。查看[主要文档站点](http://support.sas.com/documentation/)以了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T23:16:35.897

我强烈推荐 SAS Certification Prep Guide: Base Programming for SAS 9（现在第三版）。

这使您对数据步骤的所有基本概念有一个全面的了解，并为您提供练习题来测试您所学的内容。这也是 SAS 认证考试的重要准备。

# c++ - vs2010用Excel2007SDK创建XLL

> ID：15285888
> 
> 赞同：1
> 
> 时间：2013-03-08T02:53:17.247
> 
> 标签：c++, excel, xll

我跟随[安德鲁](http://blogs.msdn.com/b/andreww/archive/2007/12/09/building-an-excel-xll-in-c-c-with-vs-2008.aspx)在vs2010 c++和Excel2007SDK下创建了XLL，它在Excel2010上运行良好。我在Excel2007上注册XLL后，显示注册成功，但无法调用任何函数。任何人都可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:38:34.707

省点麻烦，试试[http://xll.codeplex.com](http://xll.codeplex.com)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:23:24.253

它失败了，因为我需要安装 Microsoft 的 VC++ 可再发行组件。它现在正在工作。

# android - 升级应用时强制关闭

> ID：15285890
> 
> 赞同：-1
> 
> 时间：2013-03-08T02:53:35.267
> 
> 标签：android, android-emulator

我正在开发我的应用程序的新版本并将另一个表添加到数据库中。在模拟器中它工作得很好，但是如果我安装在旧版本上，手机会强制关闭。

如果我安装了 Play 商店的版本并在她上面安装了我的开发者版本后，该应用程序会强制关闭。如果我从手机中删除该应用程序并仅放置开发版本，则效果很好。

我不知道模拟升级应用程序到模拟器，我无法测试ONUPGRADE方法。但是新表的代码，也有 onCreate（工作），所以不明白为什么会出错。

我需要什么： 1 - 一种查看导致手机强制关闭的异常的方法，以及从设备获取此信息的任何方法；2 - 在模拟器上测试应用程序升级的任何方式；

注意：我更新了清单中的版本，所以我认为手机会升级（或不升级？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:43:47.270

请看下面的链接，希望这会有所帮助

[Android 中的 onUpgrade() sqlite 数据库](https://stackoverflow.com/questions/13159210/onupgrade-sqlite-database-in-android)

# php - 在查询中使用 AND 的 Laravel 查询构建器

> ID：15285892
> 
> 赞同：15
> 
> 时间：2013-03-08T02:53:52.300
> 
> 标签：php, laravel-3

我想在查询生成器的末尾添加一个“AND”子句，代码如下所示：

```
$orderers = DB::table('address')->where(function($query) use ($term) {
                            $query->where('id', 'LIKE', '%' . $term . '%')
                                    ->or_where('name', 'LIKE', '%' . $term . '%')
                                    ->or_where('status', 'LIKE', '%' . $term . '%')
                                    ->and_clause_goes_here('is_orderer', '=', '1');
                        })->paginate($per_page); 
```

但是在 Laravel 中搜索 AND 子句我找不到任何等价物。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-08T19:10:46.633

JCS solution may still yield some unexpected results due to the order of operations. You should group all the OR's together as you would in SQL, explicitly defining the logic. It also makes it easier to understand for the next time you ( or to another team member ), when they read the code.

```
SELECT * FROM foo WHERE a = 'a' 
AND (
    WHERE b = 'b'
    OR WHERE c = 'c'
)
AND WHERE d = 'd'

Foo::where( 'a', '=', 'a' )
    ->where( function ( $query )
    {
        $query->where( 'b', '=', 'b' )
            ->or_where( 'c', '=', 'c' );
    })
    ->where( 'd', '=', 'd' )
    ->get(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-08T03:18:43.307

只需另一个 where 子句就可以了，并且将使用

```
$orderers = DB::table('address')->where(function($query) use ($term) {
                            $query->where('id', 'LIKE', '%' . $term . '%')
                                    ->where('is_orderer', '=', '1');
                                    ->or_where('name', 'LIKE', '%' . $term . '%')
                                    ->or_where('status', 'LIKE', '%' . $term . '%')
                        })->paginate($per_page); 
```

# .net - 如何使用 XSLT 删除属性值与给定值不同的节点？

> ID：15285894
> 
> 赞同：2
> 
> 时间：2013-03-08T02:53:55.887
> 
> 标签：.net, xml, xslt, xpath, web-config

在给定的非常简单和标准的配置中：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration xmlns:env="urn:schemas-test-env">
    <appSettings>
        <add key="Name" value="Value" />
        <add key="Name" value="Value" env:name="Dev" />
        <add key="Name" value="Value" env:name="QA" />
    </appSettings>

    <!-- rest of the config -->

</configuration> 
```

我想删除所有`<add />`使用`@env:name != $env`XSLT 的节点？我的主要问题是保持其余配置不变。

到目前为止我所拥有的：

```
<!-- populated by inline C# code -->
<xsl:variable name="env" select="code:GetEnvironment()" />

<!-- Leave as is -->
<xsl:template match="@* | node()">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
</xsl:template>

<!-- Remove non-matching nodes -->
<xsl:template match="configuration/appSettings/add">
    ???
</xsl:template> 
```

我还有一个存根：

```
<xsl:choose>
    <xsl:when test="not(@env:name)">
        <xsl:value-of select="'no env'" />
    </xsl:when>
    <xsl:when test="./@env:name = $env">
        <xsl:value-of select="'Env eq var'" />
    </xsl:when>
    <xsl:otherwise>
        <xsl:value-of select="'Env neq var'" />
    </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:31:11.550

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:env="urn:schemas-test-env">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:param name="env" select="'QA'"/>

 <xsl:template match="node()|@*" name="identity">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="add">
  <xsl:if test="not(@env:name = $env)">
   <xsl:call-template name="identity"/>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<configuration xmlns:env="urn:schemas-test-env">
    <appSettings>
        <add key="Name" value="Value" />
        <add key="Name" value="Value" env:name="Dev" />
        <add key="Name" value="Value" env:name="QA" />
    </appSettings>
    <!-- rest of the config -->
</configuration> 
```

**产生想要的正确结果：**

```
<configuration xmlns:env="urn:schemas-test-env">
   <appSettings>
      <add key="Name" value="Value"/>
      <add key="Name" value="Value" env:name="Dev"/>
   </appSettings><!-- rest of the config -->
</configuration> 
```

**说明**：

正确使用和覆盖**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

* * *

**二、XSLT 2.0+ 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:env="urn:schemas-test-env">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:param name="env" select="'QA'"/>

 <xsl:template match="node()|@*" name="identity">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="add[@env:name = $env]"/>
</xsl:stylesheet> 
```

**说明**：

XSLT 2.0 与 XSLT 1.0 的不同之处在于它允许将变量引用作为匹配模式的谓词的一部分。此功能使得只有一个空的覆盖模板成为可能。

# actionscript-3 - 是否可以在 flex 4.5 中隐藏 BUTTON 组件的标准灰色圆形框？

> ID：15285897
> 
> 赞同：0
> 
> 时间：2013-03-08T02:54:53.530
> 
> 标签：actionscript-3, apache-flex, flash-builder, flash-builder4.5

我有一组按钮添加到我的 flex 移动应用程序的阶段...我使用“icon”参数在这些按钮上设置了透明的 PNG 图标，但想知道是否有办法隐藏灰色框标准按钮元素？这样我的按钮只会显示为我在按钮上设置的图标......或者是实现按钮皮肤和创建样式的唯一方法（我仍然没有完全掌握。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:58:07.980

有很多方法可以做到这一点。正如 Flextras 所说，您可以删除普通 Spark`ButtonSkin`绘制的所有内容。但是，这并不是那么简单，因为如果您查看`ButtonSkin`该类，它没有`BitmapImage`按钮用来显示您的图标的对象。这`BitmapImage`实际上是在`ButtonSkin`（即`SparkButtonSkin`）的基类中定义的。

幸运的是，解决这个问题很简单。下面是扩展基类并添加 BitmapImage 的皮肤。我加回来的原因是

*   您不能单独使用基类（它没有定义所需的状态并在运行时引发错误
*   您可能想为您的按钮添加一些交互性 - 在鼠标悬停、鼠标按下等时。在下面我的简单示例中，交互性非常俗气，我将由您决定鼠标悬停时应该发生什么，鼠标下等……

延伸的皮肤`SparkButtonSkin`：

```
<?xml version="1.0" encoding="utf-8"?>
<s:SparkButtonSkin xmlns:fx="http://ns.adobe.com/mxml/2009" 
             xmlns:s="library://ns.adobe.com/flex/spark" 
             xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
             minWidth="21" minHeight="21" 
             alpha.disabled="0.5">

    <s:states>
        <s:State name="up" />
        <s:State name="over" />
        <s:State name="down" />
        <s:State name="disabled" />
    </s:states>

    <s:BitmapImage id="iconDisplay" alpha=".75" alpha.over="1" alpha.down=".5" alpha.disabled=".25" />
</s:SparkButtonSkin> 
```

另一种解决方法是根本不使用 Button。您可以通过将 BitmapImage 对象用于您的按钮来制作一个更轻量级的版本，该版本就像一个简单的按钮。你必须添加一些交互性（比如可能换掉它用于鼠标按下的图标等）。

```
<s:BitmapImage source="path/to/my/icon" click="clickHandler()" /> 
```

# c++ - 在 C 按键检查器代码中出现错误

> ID：15285898
> 
> 赞同：0
> 
> 时间：2013-03-08T02:55:00.590
> 
> 标签：c++

当我在 Dev-C++ 4.9.9.2 中运行代码时出现这些错误，是的，我是初学者

In function `int main()':` Do' undeclared (first use this function) (每个未声明的标识符对于它出现的每个函数只报告一次。) `;' before '{' token 'While' undeclared (first use this function)` ;' 在“开”之前

这是我的代码：

```
using namespace std;
int main() 
{
    int on;
    on = 1;
    Do
    {
            GetASyncKeyState(VK_LSHIFT int key);
            cout << key << endl;
    } 
            While on = 1;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:57:16.290

Do/While 应该是 do/while（即小写）。了解/阅读编译器生成的错误和警告消息是个好主意。

# jquery - 单击无序列表 (ul) 时，此显示/隐藏功能不起作用

> ID：15285899
> 
> 赞同：2
> 
> 时间：2013-03-08T02:55:15.717
> 
> 标签：jquery, html-lists, show-hide

我正在使用无序 ( `<ul>`) HTML 列表设置一些 MultiSelect 元素的样式，并且此功能旨在在用户单击文档上除“dropdown_box”或“dropdown_container”之外的任何位置时隐藏元素。

该功能不适用于`<ul>`标签中的任何内容，并且一旦单击列表项，它就会隐藏元素。我已经尝试同时指定 the 和 the 的 id`<div>`并且`<ul>`它仍然会在单击后立即关闭。

**更新 -**我创建了一个 jsfiddle 来演示问题[http://jsfiddle.net/chayacooper/ezxSF/16/](http://jsfiddle.net/chayacooper/ezxSF/16/)

有一个单独的 mouseleave 函数可以在大多数情况下关闭元素，但是如果用户单击以将其打开但未将鼠标悬停在任何“UL Element”项目上，我需要添加此功能以关闭该元素。

JS

```
$('html').click(function (e) {           
    if (e.target.id == 'dropdown_box' || e.target.id == 'dropdown_container') {
        $("#select_colors").show();
    } else {
        $("#select_colors").hide();
    }
}); 
```

HTML

```
<div id="dropdown_box">Select</div>
<div id="dropdown_container"> 
    <ul id="select_colors"> 
        <!-- Several List Item Elements --> 
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:38:51.357

尝试这个：

```
$('html').click(function () {
    $("#select_colors").hide();
});
$('#dropdown_box, #dropdown_container').click(function (e) {
    e.stopPropagation();
    $("#select_colors").show();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ezxSF/17/)**

单击 html 将隐藏列表，而单击 #dropdown_box 或 #dropdown_container 将显示它并停止事件冒泡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:00:04.107

我会以不同的方式做到这一点。将全局单击处理程序附加到隐藏 div 的“body”，并将单击处理程序附加到您的 dropdown_box 和 dropdown_container 以*停止*事件的传播（通过返回 false 并调用 e.stopPropagation）。这样，body 事件处理程序将永远不会看到该事件。

```
$('html').click(function () {$('#select_colors').hide(); });
$('#dropdown_box, #dropdown_container').click(function (e) {
    e.stopPropagation();
    return false;
}); 
```

**UPDATE** 将正文更改为 html，并隐藏“select_colors”而不是 dropdown_container。

[http://jsfiddle.net/KJmtG/](http://jsfiddle.net/KJmtG/)

一些参考资料：

[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

[Javascript 中的事件传播](https://stackoverflow.com/questions/1522941/event-propagation-in-javascript)

# php - AJAX innerHTML PHP 数组和位置不起作用？

> ID：15285904
> 
> 赞同：0
> 
> 时间：2013-03-08T02:55:40.433
> 
> 标签：php, ajax, echo

我正在编写一个代码，其中数据库中的所有注释都在 AJAX 的帮助下得到回显。现在我有两个问题。

1.  位置不工作。这是我打开 xmlHttpRequest 的代码。

    ```
    xmlHttp.open("GET", "location.href.split('/').pop();", true); 
    ```

    当我检查状态 == 200 时，我得到“未找到”错误。但是当我使用我知道它在目录中的文件名时，它可以工作。我必须使用类似上面的东西，因为我在 url 中有一些设置变量，它们会生成唯一的页面。

2.  评论没有回响。这是我的

**PHP**

```
<?php

$showcomment=mysql_query("SELECT * FROM `photosite`.`comments` WHERE `photo_id`='$photo_id'");
echo '<response>';
while($allcomments=mysql_fetch_array($showcomment)){

    echo '<div id="comment"></div>';
}
echo '</response>';
?> 
```

**Javascript**

```
function process(){
    if(xmlHttp){
        try{
            xmlHttp.open("GET", "location.href.split('/').pop();", true);
            xmlHttp.onreadystatechange = handleServerResponse;
            xmlHttp.send(null);     
        }catch(e){
            alert( e.toString() );
        }
    }
}

function handleServerResponse(){
        comment = document.getElementById('comment');
        if(xmlHttp.readyState==4){
            if(xmlHttp.status==200){
                try {
                    comment.innerHTML += "'.$allcomments['firstname'].' '.$allcomments['surname'].' '.$allcomments['comment'].'<br>";
                }catch(e){
                    alert( e.toString() );
        } else {
            alert(xmlHttp.statusText );
            }
        }
    }
} 
```

在 innerHTML 上，我所做的只是回显我在没有 AJAX 的情况下回显的内容。它显示在页面上，但原样。我如何让它识别它们是 PHP 变量？一旦它们在 PHP 页面上回显，它们不应该成为变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:58:20.030

删除 JavaScript 表达式周围的引号，否则只会得到一个字符串。也就是说，您是否尝试向当前页面发送 AJAX 请求？在这种情况下，就`location.href`可以了。

实际上，这可能是您所有问题的根源。

# java - Java中的替代NSSortDescriptor是什么？

> ID：15285909
> 
> 赞同：1
> 
> 时间：2013-03-08T02:56:19.177
> 
> 标签：java, android

我有包含自定义数据类的 ArrayList。

`ArrayList<MyData> list`

自定义数据类有几个字段

```
class MyData {
   private int num;
   private String name;

   etc....

   getter/setter...
} 
```

我想按字段排序列表（例如：num）

Objecitive-C 有 NSSortDescriptor 可以对对象进行排序。

[NSSortDescriptor 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)

有其他选择吗？或其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:48:16.503

您可以使用 Comparable 和 Comparator 接口..以及使用 Collection.sort()。

如果您使用自定义类型的集合（即不是原始类型），则需要实现 Comparable 和 Comparator 接口。

有关详细示例，请查看[http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

希望这篇文章对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:59:53.870

[java.util.Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)加上[java.util.Collection.sort](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)应该可以解决问题。

您也可以`MyData`实现[java.util.Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)并使用其他[排序](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)方法，但这并不那么灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T03:00:03.197

Java中没有类似的东西`NSSortDescriptor`：Java排序使用的风格更类似于类的`sortUsingComparator:`方法`NSMutableArray`：

```
Collections.sort(list, new Comparator<MyData>() {
    // This is similar to the comparator block of Cocoa
    public int compare(MyData o1, MyData o2) {
        // Put the comparison code here
        ...
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T03:00:22.263

实现[Comparable](https://developer.android.com/reference/java/lang/Comparable.html)或[Comparator](https://developer.android.com/reference/java/util/Comparator.html)并使用[Collections.sort()](https://developer.android.com/reference/java/util/Collections.html#sort%28java.util.List%3CT%3E%29)。

## 可比

```
public class MyClass implements Comparable<MyClass>{
    public int x;

    public int compareTo(MyClass mc){
        return x - mc.x;
    }
} 
```

## 比较器

```
public class MyClass{
    public int x;
}

public class MyClassComparator implements Comparator<MyClass>{
    public int compare(MyClass mc1, MyClass mc2){
        return mc1.x - mc2.x;
    }
} 
```

# ios - NSURLConnection 没有响应

> ID：15285916
> 
> 赞同：1
> 
> 时间：2013-03-08T02:57:01.753
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, nsurlconnection

我有以下代码，它应该简单地加载一个带有发布数据的 URL，然后从服务器获取 HTML 响应：

```
// Send log in request to server
NSString *post = [NSString stringWithFormat:@"username=%@&password=%@", text_field_menu_username.text, text_field_menu_password.text];
NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSMutableURLRequest *request;
[request setURL:[NSURL URLWithString:@"http://example.com/test.php"]]; // Example Only
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
{
    // Handle response
    NSString *response_string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"Data 1: %@", response);
    NSLog(@"Data 2: %@", data);
    NSLog(@"Data 3: %@", error);
    NSLog(@"Data 4: %@", response_string);
}]; 
```

这是每个`NSLog`'s 的输出：

```
Data 1: (null)
Data 2: (null)
Data 3: (null)
Data 4: 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:03:55.560

`request`在设置其参数之前，您尚未初始化对象。它应该是：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init]; 
```

# python - 如何返回分位数切割范围的最大值而不是分位数标签

> ID：15285918
> 
> 赞同：2
> 
> 时间：2013-03-08T02:57:10.617
> 
> 标签：python, pandas

我需要将连续数据分成任意数量的分位数。但是，我的应用程序需要返回的分位数 bin 的最大值：

```
import pandas as pd
import numpy as np

In [1]: s = pd.Series(np.random.randint(0,20,20)); s[:5]
Out[1]:
0     0
1    15
2     5
3    19
4    15 
```

假设我使用 pandas.qcut 创建了 5 个分位数：

```
In [2]: bins = pd.qcut(s,5); bins
Out[2]:
Categorical:
array([[0, 1.8], (9.8, 15.2], (1.8, 6.2], (15.2, 19], (9.8, 15.2],
       (1.8, 6.2], (6.2, 9.8], (6.2, 9.8], (15.2, 19], (9.8, 15.2],
       [0, 1.8], (6.2, 9.8], (1.8, 6.2], [0, 1.8], (9.8, 15.2], [0, 1.8],
       (15.2, 19], (15.2, 19], (6.2, 9.8], (1.8, 6.2]], dtype=object)
Levels (5): Index([[0, 1.8], (1.8, 6.2], (6.2, 9.8], (9.8, 15.2],
                   (15.2, 19]], dtype=object) 
```

使用 bin 标签：

```
In [3]: bins.labels
Out[3]: array([0, 3, 1, 4, 3, 1, 2, 2, 4, 3, 0, 2, 1, 0, 3, 0, 4, 4, 2, 1]) 
```

除了返回分位数，有没有办法可以返回每个值所属的上 bin 边缘？这是我想要的输出的一个例子：

```
 original  bin_max
0          0        1
1         15       15
2          5        5
3         19       19
4         15       15
5          2        5
6          7        9
7          7        9
8         16       19
9         12       15
10         0        1
11         8        9
12         5        5
13         1        1
14        11       15
15         1        1
16        18       19
17        16       19
18         9        9
19         3        5 
```

这是我目前正在使用的解决方案，但是当我需要的值已经在 qcut 标签中找到时，对 qcut 进行分组似乎效率低下：

```
In [4]: s.groupby(pd.qcut(s,5)).transform(max)
Out[4]:
0      1
1     15
2      5
3     19
4     15
5      5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T03:19:44.287

您可以使用`retbins=True`将 bin 的边缘作为 numpy 数组获取：

```
import pandas as pd
import numpy as np

np.random.seed(1)
s = pd.Series(np.random.randint(0,20,20))

categories, edges = pd.qcut(s, 5, retbins=True)
df = pd.DataFrame({'original':s,
                   'bin_max': edges[1:][categories.labels]},
                  columns = ['original', 'bin_max'])
print(df) 
```

产量

```
 original  bin_max
0          5      5.0
1         11     11.0
2         12     13.4
3          8      8.6
4          9     11.0
5         11     11.0
6          5      5.0
7         15     18.0
8          0      5.0
9         16     18.0
10         1      5.0
11        12     13.4
12         7      8.6
13        13     13.4
14         6      8.6
15        18     18.0
16         5      5.0
17        18     18.0
18        11     11.0
19        10     11.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T20:28:10.990

对我来说，labels=False 效果更好

```
import pandas as pd
import numpy as np

np.random.seed(1)
s = pd.Series(np.random.randint(0,20,20))

categories, edges = pd.qcut(s, 5, retbins=True, labels=False)
df = pd.DataFrame({'original':s,
                   'bin_max': edges[1:][categories]},
                  columns = ['original', 'bin_max'])
print(df) 
```

# android - 使用 InputMethodManager 手动显示软键盘不会调整窗口

> ID：15285923
> 
> 赞同：3
> 
> 时间：2013-03-08T02:57:35.370
> 
> 标签：android, android-activity, android-edittext, android-softkeyboard

所以我有一个正在使用的活动，`windowSoftInputMode="adjustPan"`我有一个`OnPreDrawListener`调用`EditText`：

```
editText.requestFocus();
inputManager.showSoftInput(editText, 0); 
```

哪个按预期工作并推动`Activity`向上为`EditText`. 但是，如果我使用后退按钮关闭键盘（将窗口平移回原始位置），然后`EditText`再次触摸以显示键盘，键盘显示，但窗口不调整。

我什至尝试`OnClickListener`在 the 中添加一个`EditText`并再次调用相同的两个调用：

```
editText.requestFocus();
inputManager.showSoftInput(editText, 0); 
```

但是在我关闭窗口并再次显示之前，窗口不会平移。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:55:57.017

I think this three steps will solve your problem.

1)in manifest file change windowSoftInputMode="adjustPan" to **windowSoftInputMode="adjustResize"**

2) The layout you are using for EditText , tha change the parent layout to ScroolView.

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <EditText
        android:id="@+id/edittextview"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:inputType="textFilter"
        android:padding="10dp"
        android:imeOptions="actionDone"
        android:scrollbars="vertical"
        android:textSize="14sp" />
</ScrollView> 
```

3) To explicitly showing keyboard to avoid "dismiss the keyboard with the back button and window is not Adjust" in Edittext onclick write

```
edittext.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                InputMethodManager m = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                if (m != null) {
                    m.toggleSoftInput(0, InputMethodManager.SHOW_IMPLICIT);
                    edittext.requestFocus();
                }
            }
        }); 
```

Hope this will solve your problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:15:52.493

因此，这并不是问题的完全*解决方案*，而是我最终采用的解决方法。我创建了一个子类`LinearLayout`来在 IME 接收到它之前拦截后退按钮按下：

```
public class IMEInterceptLinearLayout extends LinearLayout {
    //For some reason, the event seems to occur twice for every back press
    //so track state to avoid firing multiple times
    private boolean notifiedListener = false;
    private OnBackPressedPreIMEListener listener;

    public IMEInterceptLinearLayout(Context context) {
        super(context);
    }

    public IMEInterceptLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public IMEInterceptLinearLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void setOnBackPressedPreIMEListener(OnBackPressedPreIMEListener listener) {
        this.listener = listener;
    }

    private void fireOnBackPressedPreIME() {
        if(listener != null && !notifiedListener) {
            listener.onBackPressedPreIME();
            notifiedListener = true;
        }
    }

    @Override
    public boolean dispatchKeyEventPreIme(KeyEvent event) {
        if(event.getKeyCode() == KeyEvent.KEYCODE_BACK) {
            fireOnBackPressedPreIME();
            return true;
        } else return super.dispatchKeyEventPreIme(event);
    }

    public interface OnBackPressedPreIMEListener {
        public void onBackPressedPreIME();
    }
} 
```

然后从那里我刚刚将我的窗口注册为布局的侦听器，并在我收到事件时关闭窗口和键盘，不允许在窗口可见时关闭键盘。

# javascript - 具有 iframe 不活动重定向的页面

> ID：15285926
> 
> 赞同：1
> 
> 时间：2013-03-08T02:57:58.570
> 
> 标签：javascript, jquery, html, redirect, iframe

我有一个带有 iframe 的页面。我放置了一个代码，如果用户在 x 秒内不活动（没有 keydown 和 mousemove），页面将重定向到主页。我的问题是代码仅在母页中有效，但没有检测到 iframe 中的 mousemove 和 keydown，因此尽管有活动，但它每次都在 iframe 内重定向。我尝试在 iframe 的 onload 事件中调用一个函数，但这不起作用。这是页面的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>SAMPLE</title>
<link href="main.css" rel="stylesheet" type="text/css" media="screen" />
<script language="javascript">
function redirect()
{
var timer;
window.onload= document.onmousemove= document.onkeypress= function(){
clearTimeout(timer);
timer=setTimeout(function(){location= 'index.html'},3000);
}
}
</script>

</head>

<body bgcolor="blue" onLoad="redirect();">
<iframe src="http://tplink.teleperformanceusa.com" frameBorder="0" width="100%" height="800px" onLoad="redirect();"></iframe>

...

</body>
</html> 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:39:06.320

您将 iframe 设置为 100% 宽度和 800px 高度。这几乎是您的所有网页。iframe 旨在将其他网页的响应部分插入页面。在您的代码中，整个页面看起来都是 iframe。所以你要问自己，如果 iframe 几乎是整个页面，为什么还需要 iframe？为什么不直接链接到页面？

基本上，“母页”不会检测到 iframe 中的移动和活动，因为它超出了它的控制范围，因此会执行您编写的脚本。唯一发生的活动是在 iframe 中链接到的网页上。尽量避免使用 iframe。

# unix - 如何在这段代码中使用 epoll 而不是 select？

> ID：15285927
> 
> 赞同：1
> 
> 时间：2013-03-08T02:58:05.107
> 
> 标签：unix, network-programming, epoll

在 UNIX Network Programming Volume 1:Figure 6-22 中有一段代码如下：

```
/* include fig01 */
#include    "unp.h"

int main(int argc, char **argv)
{

int                 i, maxi, maxfd, listenfd, connfd, sockfd;
int                 nready, client[FD_SETSIZE];
ssize_t             n;
fd_set              rset, allset;
char                buf[MAXLINE];
socklen_t           clilen;
struct sockaddr_in  cliaddr, servaddr;

listenfd = Socket(AF_INET, SOCK_STREAM, 0);

bzero(&servaddr, sizeof(servaddr));
servaddr.sin_family      = AF_INET;
servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
servaddr.sin_port        = htons(SERV_PORT);

Bind(listenfd, (SA *) &servaddr, sizeof(servaddr));

Listen(listenfd, LISTENQ);

maxfd = listenfd;           /* initialize */
maxi = -1;                  /* index into client[] array */
for (i = 0; i < FD_SETSIZE; i++)
    client[i] = -1;         /* -1 indicates available entry */
FD_ZERO(&allset);
FD_SET(listenfd, &allset);
/* end fig01 */

/* include fig02 */
for ( ; ; ) {
    rset = allset;      /* structure assignment */
    nready = Select(maxfd+1, &rset, NULL, NULL, NULL);

    if (FD_ISSET(listenfd, &rset)) {    /* new client connection */
        clilen = sizeof(cliaddr);
        connfd = Accept(listenfd, (SA *) &cliaddr, &clilen);
#ifdef  NOTDEF
        printf("new client: %s, port %d\n",
                Inet_ntop(AF_INET, &cliaddr.sin_addr, 4, NULL),
                ntohs(cliaddr.sin_port));
#endif

        for (i = 0; i < FD_SETSIZE; i++)
            if (client[i] < 0) {
                client[i] = connfd; /* save descriptor */
                break;
            }
        if (i == FD_SETSIZE)
            err_quit("too many clients");

        FD_SET(connfd, &allset);    /* add new descriptor to set */
        if (connfd > maxfd)
            maxfd = connfd;         /* for select */
        if (i > maxi)
            maxi = i;               /* max index in client[] array */

        if (--nready <= 0)
            continue;               /* no more readable descriptors */
    }

    for (i = 0; i <= maxi; i++) {   /* check all clients for data */
        if ( (sockfd = client[i]) < 0)
            continue;
        if (FD_ISSET(sockfd, &rset)) {
            if ( (n = Read(sockfd, buf, MAXLINE)) == 0) {
                    /*4connection closed by client */
                Close(sockfd);
                FD_CLR(sockfd, &allset);
                client[i] = -1;
            } else
                Writen(sockfd, buf, n);

            if (--nready <= 0)
                break;              /* no more readable descriptors */
        }
    }
}
}
/* end fig02 */ 
```

我想知道如何在这里使用“epoll”而不是“select”，但是我对epoll知之甚少，所以任何人都可以给我一些积分吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:57:29.497

你可以通过这个[链接](https://suchprogramming.com/epoll-in-3-easy-steps/)。但是，在使用 epoll 之前，您需要确定以下几点 -

1.  您是否希望您的系统定位为跨平台系统（我的意思是可以在多个操作系统下运行？） - 因为 epoll 仅在 Linux 系统中可用。

2.  您的目标 Linux 内核版本是什么？因为 epoll 仅在 Linux 2.6 中可用。如果这两个问题都得到了回答，并且您觉得 epoll 不是限制，您可以继续这样做。

！

# jquery - Kendo UI MVC如何在渲染前更改选择器

> ID：15285935
> 
> 赞同：1
> 
> 时间：2013-03-08T02:58:37.723
> 
> 标签：jquery, jquery-selectors, kendo-ui

我正在使用*Kendo UI MVC Wrappers*，我有这样的代码：

```
@(Html.Kendo().DropDownList()                                                  
    .Name("MyField_Something")
 ) 
```

它会生成一个看起来像这样的 html：

```
<div class="editor-field">
    <span class="k-widget k-dropdown k-header" tabindex="0" style="" unselectable="on">
    <script>
        jQuery(function(){jQuery("#MyField_Something").kendoDropDownList();});
    </script>
    <span class="k-invalid-msg" data-for="MyField.Something"></span>
</div> 
```

我的问题是，是否可以在剑道渲染之前更改该 jQuery 脚本的*选择***器？**而不仅仅是**id**，我希望它的**父元素**也像这样：

 *****```
<script>
        jQuery(function(){jQuery("#ParentElement #MyField_Something").kendoDropDownList();});
</script> 
```

我怎样才能做到这一点？*****

# oracle - Siebel 开放式 UI 环境

> ID：15285936
> 
> 赞同：2
> 
> 时间：2013-03-08T02:58:49.063
> 
> 标签：oracle, crm, environment, siebel

我正在寻找一种快速简便的方法来设置 Siebel Open UI，以便在我的公司环境中实施之前对其进行测试。我们目前使用的是 8.1.1.5，并且有兴趣升级到 8.1.1.9。我们听说 Siebel Open UI 将允许您在 Google chrome 和其他浏览器中使用 CRM。我们还听说可以更自由地更改 UI，而且我们不必坚持使用 SWSE 模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:55:46.923

这是 Oracle Siebel VM 的链接。这将为您提供 Siebel 8.1.1 版本，您必须将其升级到最新的可用 IP。（8.1.1.10 是截至该日期的最新版本）

[http://www.oracle.com/technetwork/server-storage/vm/siebel-092480.html](http://www.oracle.com/technetwork/server-storage/vm/siebel-092480.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:18:42.397

[使用 oracle 提供的 VM 怎么样？](https://blogs.oracle.com/dipock/entry/siebel_811_on_oracle_vm_now_av)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T17:31:55.597

看看[Bloomspire](http://www.bloomspire.com)。他们可以轻松设置 Siebel 环境，包括 8.1.1.9。它们比 Oracle 的云解决方案便宜很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:32:33.850

VM 听起来是个好主意，但我也无法在交付时找到它们。Oracle 现在有累积安装 8.1.1.9，这意味着你只需要安装一次，它就会有 OpenUI。不幸的是，OpenUI 仍在进行中，因此您需要应用很多 HotFixes 才能使其正常工作。不幸的是，Oracle 没有提供任何方法来在无人值守的情况下应用它们，因此无法绕过一些手动修补。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-01T12:47:03.430

我们刚刚完成了 OpenUI 的内部升级，现在正在运行 8.1.1.10

似乎从 .9 到 .10 的跳跃是一个主要障碍。

如果您仍然需要帮助，请随时与我联系。

大卫 - www.crmantra.com

# git - 为什么我可以使用 git-daemon 为我的 git repo 服务？

> ID：15285938
> 
> 赞同：2
> 
> 时间：2013-03-08T02:58:50.003
> 
> 标签：git, git-daemon

目录中有一些 git 裸仓库`/home/git/repositories`。
我使用`git-daemon-run`服务 git 协议来访问这些存储库。
例如`/home/git/repositories/root/spider.git`是一个裸 git repo。

这是命令`ps -ef | grep git`结果。

```
120       9638  1062  0 10:44 ?        00:00:00 /usr/local/libexec/git-core/git-daemon --verbose --reuseaddr --base-path=/home/git/repositories --export-all --max-connections=64 -- /home/git/repositories 
```

当我执行`git clone git://hostname/root/spider.git`时，我得到：

```
Cloning into 'spider'...
fatal: remote error: access denied or repository not exported: /root/spider.git 
```

我检查系统日志`/var/log/git-daemon/current`，我得到：

```
2013-03-08_02:56:02.42145 [9698] Connection from 127.0.0.1:60080
2013-03-08_02:56:02.42149 [9698] Extended attributes (22 bytes) exist <host=hostname>
2013-03-08_02:56:02.42186 [9698] Request upload-pack for '/root/spider.git'
2013-03-08_02:56:02.42189 [9698] '/home/git/repositories/root/spider.git' does not appear to be a git repository
2013-03-08_02:56:02.42221 [9638] [9698] Disconnected (with error) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-08T02:16:29.687

添加 `--enable=receive-pack`到`git daemon`命令行，启用`send-pack`（[手动](https://git-scm.com/docs/git-receive-pack)）支持。然后，您将需要`git reset --hard`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T06:56:19.240

从错误消息中，仔细检查您的路径并确保您执行了

```
cd /home/git/repositories/root/
git init --bare spider 
```

如果该 repo 已经存在，但直接在“ `/home/git/repositories`”中，那么您需要调整您的`git clone`命令：

```
 git clone git://hostname/spider.git 
```

* * *

最后，**确保进程 git-daemon 有权访问存储库**。

运行 git-dameon 的帐户必须能够访问`/home/git/repositories/root/sipder.git`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:34:57.753

在 repo 目录中创建一个名为 git-daemon-export-ok 的空文件。

# php - 图像像素 X,Y 坐标到纬度/经度

> ID：15285940
> 
> 赞同：0
> 
> 时间：2013-03-08T02:59:17.750
> 
> 标签：php, javascript, image, maps, latitude-longitude

我有一个独特的问题：投影和从图像中获取纬度/经度坐标。

我有一张 800 x 600 像素的美国图像，并且我知道图像的投影（原点中心为 -75 lon 的极地立体投影）、左下纬度/经度和右上纬度/经度。我已将图像放入网页中，并且可以将鼠标悬停在图像上并从 div 标签中的图像中获取 x 和 y“像素”坐标。是否有一个简单的公式可以帮助获得 x/y 像素坐标的纬度和经度？

我想要一个简化的流程，因为我有多个地图投影和图像大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:53:22.437

这是如何执行此操作的注释 js 代码：

```
//these define lat/lon at the bounds of the image
var geo_left=-75;
var geo_right=75;
var geo_top=-75;
var geo_bottom=75;

//dimensions of the canvas
//i set it to 400x400 for example purposes
var canvas_width=400;
var canvas_height=400;

//get relative coordinate of pixel, should be on a scale of 0 to 1
var rel_x = pixel_x/canvas_width;
var rel_y = pixel_y/canvas_height;

//linear interpolate to find latitude and longitude
var latitude = geo_left+(geo_right-geo_left)*rel_x;
var longitude = geo_top+(geo_bottom-geo_top)*rel_y; 
```

# c++ - Circle with Triangle strips

> ID：15285944
> 
> 赞同：3
> 
> 时间：2013-03-08T02:59:24.100
> 
> 标签：c++, opengl, 3d

I have been trying to create a circle in OpenGL but I cannot use triangle fans because I have read they are not available in directx anymore and I will also be making directx calls.

I could not really understand how triangle strips work. All my implementations had holes or weird quirks, can anybody help me out here, how can I implement it in the best possible way?

Also is there really any performance difference between triangle strips and seperate triangles, for lets say 10 circles with 1000 triangles each. Will it make a lot of difference?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T14:59:52.237

One way to specify a circle with a triangle strip is as follows:

```
for each step
    add next position on circle
    add circle center 
```

This will include the circle's center position. Another way without including the center is this:

```
add left most vertex
for each phi in (-PI/2, Pi/2) //ommit the first and last one
    x = r * sin(phi)
    y = r * cos(phi)
    add (x, y)
    add (x, -y)
add right most vertex 
```

You may need to adjust the loops depending on your backface culling settings

The topologies require different numbers of vertices. For a triangle list 10 circles á 1000 triangles need 30,000 vertices. With a triangle strip you need 1002 vertices per circle, so overall 10,020 vertices. This is almost three times smaller, which should be a bit faster when transferring to the CPU. If this is reflected in the FPS depends on several things.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-26T07:16:23.923

Here is code using VAO/VBO, and the minimum number of points. Unlike the other answers posted so far, it only needs one `cos()` and one `sin()` call.

Setup:

```
// Number of points used for half circle.
const unsigned HALF_PREC = 10;

const float angInc = M_PI / static_cast<float>(HALF_PREC);
const float cosInc = cos(angInc);
const float sinInc = sin(angInc);

GLfloat* coordA = new GLfloat[2 * HALF_PREC * 2];
unsigned coordIdx = 0;

coordA[coordIdx++] = 1.0f;
coordA[coordIdx++] = 0.0f;

float xc = 1.0f;
float yc = 0.0f;
for (unsigned iAng = 1; iAng < HALF_PREC; ++iAng) {
    float xcNew = cosInc * xc - sinInc * yc;
    yc = sinInc * xc + cosInc * yc;
    xc = xcNew;

    coordA[coordIdx++] = xc;
    coordA[coordIdx++] = yc;

    coordA[coordIdx++] = xc;
    coordA[coordIdx++] = -yc;
}

coordA[coordIdx++] = -1.0f;
coordA[coordIdx++] = 0.0f;

GLuint vaoId = 0;
glGenVertexArrays(1, &vaoId);
glBindVertexArray(vaoId);

GLuint vboId = 0;
glGenBuffers(1, &vboId);
glBindBuffer(GL_ARRAY_BUFFER, vboId);
glBufferData(GL_ARRAY_BUFFER, 2 * HALF_PREC * 2 * sizeof(GLfloat),
             coordA, GL_STATIC_DRAW);

delete[] coordA;

glEnableVertexAttribArray(0);
glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, 0);

glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindVertexArray(0); 
```

Draw:

```
glBindVertexArray(vaoId);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 2 * HALF_PREC);
glBindVertexArray(0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-26T04:33:27.903

```
for each phi in (-PI, Pi) //ommit the first and last one
    x1 = r * sin(phi)
    y1 = r * cos(phi)

    x2 = r * sin(phi + Pi)
    y2 = r * cos(phi + Pi)

    add (x1, y1)
    add (x2, y2) 
```

Instead zigging up and down on one side of the circle as above pseudo code shown, this one will zig zag across the center of the circle. This will have much fuller circle.

# bash - 在一行上打印两个 awk 匹配项

> ID：15285946
> 
> 赞同：1
> 
> 时间：2013-03-08T02:59:36.663
> 
> 标签：bash, shell, awk

我正在尝试为匹配某些文本字段并以某种格式打印它们的分配制作一个 bash 脚本。我正在尝试获取课程编号、标题和学时数（从十进制转换为整数）并将其输出到名为`course_list`.

样本输入：

```
CSC 1010 - COMPUTERS & APPLICATIONS
Computers and Applications. Prerequisite: high school Algebra II. History of computers, hardware components, operating systems, application software, data communication. 
3.000 Credit hours 
```

这是我所拥有的：

```
#!/bin/bash
awk '/CSC/ {print $1$2","$4,$5,$6,$7,$8,$9} /[0-9].(000)/ {print substr(","$1,1,2)}' courses.txt | cat >> course_list 
```

这是我得到的输出：

```
CSC1010,COMPUTERS & APPLICATIONS   
,3 
```

这是我想要的输出：

```
CSC1010,COMPUTERS & APPLICATIONS,3 
```

我在想我已经很接近了，但我无法弄清楚如何在没有`\n`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:39:39.080

```
$ cat file
CSC 1010 - COMPUTERS & APPLICATIONS
Computers and Applications. Prerequisite: high school Algebra II. History of computers, hardware components, operating systems, application software, data communication.
3.000 Credit hours

$ awk '/CSC/{split($0,a,/ - /); gsub(/ /,"",a[1])} /[0-9].000/{printf "%s,%s,%d\n",a[1],a[2],$1}' file
CSC1010,COMPUTERS & APPLICATIONS,3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:07:57.567

使用 sed：

```
sed -n 's/CSC[^-]*-[ ]*\([^\.]*\).*\([0-9][0-9]*\)\.000[ ]*Credit.*/\1,\2/p' input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:41:47.647

@Powdercake，是的，很接近。只需更改`{print substr(","$1,1,2)}`为`{print $1+0}`强制`$1`进入（默认）数字格式（并省略@John Zwinck 提到的管道和猫的东西）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:07:28.850

```
awk '{print $1$2","$4,$5,$6","$(NF-2)}' RS= course_list 
```

**解释：**

`NF`是一个存储字段数量的内部变量。`$NF`保存最后一个字段的值。由于 OP 想要捕获当前`NF-2`位置的课程时间，因此我们将其打印出来。

# javascript - 添加 if-else 语句会导致 JavaScript 停止工作

> ID：15285954
> 
> 赞同：0
> 
> 时间：2013-03-08T03:00:09.670
> 
> 标签：javascript, function, if-statement

我有一个网页设计课的作业，我们得到了一个基本代码，我们需要修改它才能做更多事情。一旦我添加了 if，else if 语句，javascript 就会停止工作。我不知道我哪里错了。如果有人能引导我朝着正确的方向前进，我将不胜感激。这是原始代码（附注一我们需要做的）：

```
<!DOCTYPE html>
<!-- Finish the logic of the Rock Paper Scissors game below. 
     See the comments for instructions. -->
<html>
    <head>
    <title>RPS</title>
    <script>
    function rps() {
        userChoice = prompt("Rock, paper or scissors?");
        userPick.innerHTML = userChoice;
        computerChoice = Math.random();
        if (computerChoice < 0.34) {
            computerChoice = "rock";
        } else if (computerChoice < 0.67) {
            computerChoice = "paper";
        } else {
            computerChoice = "scissors";
        }
        computerPick.innerHTML = computerChoice;
        result = compare(userChoice, computerChoice);
        if (result == 1) {
            // set the outcome entity to say that "Player Wins!"
            // also increment the user's score.
        } else if (result == -1) {
            // set the outcome entity to say that "Computer Wins!"
            // also increment the computer's score.
        } else {
            // set the outcome entity to say "Tie"
        }
    }

    function compare(choice1, choice2) {
        // return 0 if choices are equal,
        // 1 if choice1 wins,
        // -1 if choice2 wins
    }
    </script>
    </head>
    <body>
        <h2>RockPaperScissors</h2>
        <p id="outcome">-</p>   <b> computer picks: </b>
        <p id="computerPick">-</p>  <b> player picks: </b>
        <p id="userPick">-</p>
        <!-- create p blocks to store the computer's score (number of wins)
        and the user's score. These will have to be modified by the rps function
        -->
        <button type="button" onclick="rps()">Go</button>
    </body>
</html> 
```

这就是我更改函数比较方法的方式：

```
function compare(choice1, choice2) {
    // return 0 if choices are equal,
    // 1 if choice1 wins,
    // -1 if choice2 wins

    if (choice1 == "paper" && choice2 == "rock" || 
        choice1 == "rock" && choice2 == "scissors" || 
        choice1 == "scissors" && choice2 == "paper") {
        return == 1;
    }
    else if (choice1 == "paper" && choice2 == "scissors" || 
             choice1 == "rock" && choice2 == "paper" || 
             choice1 == "scissors" && choice2 == "rock") {
        return == -1;
    }
    else {
        return == 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:05:24.437

从您的退货中删除 ==。他们应该就像...

返回 1；

== 用于比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:05:29.017

`compare`将您的功能更改为

```
function compare(choice1, choice2) {
            // return 0 if choices are equal,
            // 1 if choice1 wins,
            // -1 if choice2 wins

            if (choice1=="paper" && choice2=="rock"||choice1=="rock"
&& choice2=="scissors"||choice1=="scissors" && choice2=="paper"){
                return 1;}
            else if (choice1=="paper" &&
choice2=="scissors"||choice1=="rock" && choice2=="paper"||choice1=="scissors" &&
choice2=="rock"){
                return -1;}
            else {
                return 0;}
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T03:03:51.597

```
 return 1 
```

不是

```
 return == 1 
```

Return 是关键字而不是变量。= 是赋值运算符，它将运算符右侧的值放入左侧的变量中。== 是相等运算符。

# php - 如何根据内容控制html模板输出？

> ID：15285955
> 
> 赞同：0
> 
> 时间：2013-03-08T03:00:09.943
> 
> 标签：php, javascript, jquery, html, css

我的网站有一个 HTML 结构，例如：

```
....
<div class="column1">dynamic_content</div>
<div class="column2">dynamic_content</div>
<div class="column3">dynamic_content</div>
... 
```

现在，我想要这个结构，但我想根据每一列的内容来控制结构。例如：

一个。如果“column1”为空，我有两个选择：

1.  仅使用 2 个 div（column2 和 column3）输出 HTML（使用 PHP）。
2.  输出包含所有 div 的 HTML，并通过 CSS (display:none) 隐藏 column1。

你认为什么更好？

第一个选项有些复杂，因为我不知道每列内会有什么样的动态内容，并且使用 PHP 我需要处理整个 HTML 以了解（column1、column2 或 column3）是否为空。我不想使用 Javascript，我只想使用 CSS 或 PHP 这两个选项之一。

现在好吧，也许你在想我可以为每个页面使用一个默认模板。

例如，如果 (pageXYZ) 没有 column1 我将使用类似的模板

```
...
<div class="column2">dynamic_content</div>
<div class="column3">dynamic_content</div>
... 
```

但这是最糟糕的，因为将来如果您需要修改整个模板，您将需要修改每个页面。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:19:12.410

您是否考虑过使用 :empty CSS3 伪选择器？你可以很容易地写：

```
div.column1:empty, div.column2:empty, div.column3:empty {
  display: none;
} 
```

在不使用 PHP 或 Javascript 的情况下完成同样的事情。

此外，它将保留原始模板，而无需在将来进行编辑，并允许在模板之外的一个地方更新规则。

# ruby-on-rails - 带有多态跟随的 Rails public_activity 提要

> ID：15285960
> 
> 赞同：2
> 
> 时间：2013-03-08T03:00:42.553
> 
> 标签：ruby-on-rails, feed, polymorphic-associations

我在我的应用程序中使用了两个 gem，public_activity 和acts_as_follower。我已经很好地设置了acts_as_follower，用户可以在其中关注另一个用户以及乐队。

问题是从您关注的对象中获取活动的信息。使用公共活动，我有一个使用推荐方法的全局提要：

```
@activities = PublicActivity::Activity.order("created_at desc") 
```

这很好用。但是，我还希望有以下提要，这将需要以下内容：

```
@activities = PublicActivity::Activity.order("created_at desc").where(owner_id: current_user.all_following, owner_type: ????????) 
```

如果不指定 owner_type，则仅使用 owner_id 创建提要，这是一个问题，因为用户和乐队可以具有相同的 id。在这种情况下，我该如何指定所有者类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T15:07:00.203

对于用户：

```
@activities = PublicActivity::Activity.where(owner_id: current_user.follows_by_type('User'), owner_type: 'User').order("created_at desc") 
```

对于乐队：

```
@activities = PublicActivity::Activity.where(owner_id: current_user.follows_by_type('Band'), owner_type: 'Band').order("created_at desc") 
```

对于混合物：

```
@activities = PublicActivity::Activity.where("(owner_id IN (?) AND owner_type = 'User') or (owner_id IN (?) AND owner_type = 'Band')", current_user.follows_by_type('User'), current_user.follows_by_type('Band')).order("created_at desc") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:04:05.353

Owen, here you use so called [polymorphic associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations) try to figure out how they work. It is about just putting into the database not only ids, but the types of objects.

# java - 为什么 JUNG 中的 Forest 扩展了 DirectedGraph？

> ID：15285965
> 
> 赞同：1
> 
> 时间：2013-03-08T03:01:09.523
> 
> 标签：java, interface, jung

在开始之前，我不太擅长图论。然而，

引自[维基百科](http://en.wikipedia.org/wiki/Tree_%28graph_theory%29)，

> 任何没有简单环的连通图都是一棵树。森林是树木的不相交的联合体。

在浏览 JUNG 库的源代码时，我注意到森林的定义为

```
public interface Forest<V,E> extends DirectedGraph<V,E> 
```

在纯语义层面上说，这不是不正确的吗？

或者

这样做有什么具体原因吗？（就像在某些算法实现中更有意义/更容易理解）

PS：我知道这`DirectedGraph`只是一个标记接口，并没有声明任何功能。因此，使用`DirectedGraph`代替`UndirectedGraph`确实会产生任何后果（至少我没有看到）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:20:46.673

鉴于 JUNG 将树定义为有向图，因此将森林也定义为有向图当然是有意义的——有向图的联合是有向图。

这将您的问题减少到 Tree 是否应该扩展 DirectedGraph。树是图当然是有道理的：它们肯定有节点和边，你上面引用的定义将它们定义为特定类别的图。那么问题就变成了，树应该被引导吗？

考虑所有边都指向根的有向树（这些在联合查找算法中使用）或所有边都指向远离根的有向树通常是有意义的（搜索树就是一个例子）。但是，考虑无向树（例如无向图的生成树）也是有意义的。

对我来说有点令人惊讶（但不是“错误”），设计师选择指定所有树都是有向的，而没有指定边的方向和树结构之间的关系。也就是说，我认为简单地指定 Tree extends Graph 是合理的，并让特定的实例化进一步指定树是有向还是无向，*或者*我会选择一个约定（指向或远离根）并在 javadoc 中明确指定该约定。开发人员选择的解决方案强制 Tree 实现者指定其边缘的方向，以防止 Tree 用户使用该结构。例如，如果用户知道所有边都指向远离根的，他们可以通过从根开始并访问所有离开根的边来遍历图，但如果他们不知道他们必须考虑两个传入和出边。

由于 Java 的 instanceof 测试，实现没有方法的接口可能会产生后果。例如，图形绘制例程可以检查图形是否是有向图的实例，如果是，则绘制箭头而不是直线。

最后一点，在尝试理解图书馆中使用的术语时，我会在访问 Wikipedia 或任何其他来源时要小心，因为通常不同的人会为事物选择微妙的不同含义。例如，在某些库中，“Graph”实际上意味着“有向加权图”。你最好去javadoc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:42:55.693

JUNG 的`Forest`接口定义`getChildren`和`getParent`方法。这些是人们通常期望与树木和森林相关联的方法，除非图形是有向的，否则这些方法是没有意义的。

此外，没有此类方法签名的 Forest 或 Tree 接口也没有任何意义。确实，在图论中，树只是一个连通的无环图。但是没有任何方法（至少具有通用性）适用于通常不适用于图的无向边的树。也就是说，你当然可以创建一个Graph 的*实现*，它将自己限制为具有无向边的树——你可以自由地这样做。

# ios - kQueue 目录监控

> ID：15285966
> 
> 赞同：4
> 
> 时间：2013-03-08T03:01:11.133
> 
> 标签：ios, c, kqueue

我的应用程序的 Documents 目录中有一个 kQueue 观察者。我正在使用在 Documents 目录内容更改时触发回调的 kQueue。

这是其中的两个设置

```
eventToAdd.flags  = EV_ADD | EV_CLEAR;
eventToAdd.fflags = NOTE_WRITE; 
```

问题是当添加新文件时内容发生更改时我会收到通知，但实际文件尚未完全复制，所以当我尝试处理新文件时，我会遇到 SIGABRT 崩溃。

如何延迟通知直到文件完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:38:09.997

我通过创建 2 个侦听器解决了这个问题……一个在应用程序的 Documents 目录上以监视出现的新文件，以及为每个出现的文件创建的 File 代理对象。File 对象有一个`fileBusy`标志。当数据块写入文件时，File 对象设置一个 2 秒的计时器。如果在计时器到期之前没有更新，我假设文件已完全写入。

文件更改监听器代码在这里：[https ://gist.github.com/nielsbot/5155671](https://gist.github.com/nielsbot/5155671)

我的（部分）代表下面的上述侦听器。（表示磁盘上文件的“文件”对象）

```
@implementation File<FileChangeObserverDelegate>

    -(void)scheduleFileBusyTimeout
    {
        self.fileBusyTimeoutTimer = [ NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector( fileBusyTimeoutTimerFired: ) userInfo:nil repeats:NO ] ;
    }

    -(void)setFileChangeObserver:(FileChangeObserver *)observer
    {
        [_fileChangeObserver invalidate ] ;
        _fileChangeObserver = observer ;
    }

    -(void)fileChanged:(FileChangeObserver *)asset typeMask:(enum FileChangeNotificationType)type
    {
        @synchronized( self )
        {
            if ( ( type & kFileChangeType_Delete ) != 0 )
            {
                // we're going away soon...
                self.fileChangeObserver = nil ;
            }
            else
            {

                self.fileBusy = YES ;
                [ self scheduleFileBusyTimeout ] ;
            }
        }
    }

    -(void)fileBusyTimeoutTimerFired:(NSTimer*)timer
    {
        @autoreleasepool {
            self.fileBusy = NO ;
        }
    }

    -(void)setFileBusyTimeoutTimer:(NSTimer *)timer
    {
        [ _fileBusyTimeoutTimer invalidate ] ;
        _fileBusyTimeoutTimer = timer ;
    }
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:41:20.157

首先，请看：

*   [使用 kqueue() 监视目录更改的最佳方法是什么？](https://stackoverflow.com/questions/2972563/what-is-the-optimal-way-to-monitor-changes-in-a-directory-with-a-kqueue)
*   [iPhone 的 /Documents 目录的更改通知](https://stackoverflow.com/questions/3181821/notification-of-changes-to-the-iphones-documents-directory)。

简短的回答是没有很好的方法来做到这一点。理想情况下，您应该将文件写入其他位置，然后将其移至 Documents。这使它成为一个原子动作。或者把它写成一个特殊的文件名（“.partial”、“.download”等）并在最后重命名（同样，一个原子动作会触发第二个 kqueue 事件）。

# android - Sencha Touch2 Android中工具栏图标的白线

> ID：15285967
> 
> 赞同：0
> 
> 时间：2013-03-08T03:01:13.903
> 
> 标签：android, extjs, sencha-touch-2

Sencha Touch2 问题中的工具栏图标掩码按钮。在 iPhone 上，没有问题。

但是android，工具栏按钮图标中有白线。

并非应用程序中的所有图标。

一些按钮有线，另一个有。虽然相同的 iconCls，在某些视图有线，但在另一个视图没有。

我的测试设备是201HW，Android 4.0.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:36:51.140

首先检查掩码的大小`-webkit-mask-size`是否与容器大小（*宽度高度*）相同。

如果此问题仅在 Android 上：您应该`z-index`为掩码的父容器设置属性。

# c# - 银行账户申请

> ID：15285968
> 
> 赞同：3
> 
> 时间：2013-03-08T03:01:23.777
> 
> 标签：c#

我正在尝试创建一个银行帐户应用程序来跟踪 C# 课程的存款和取款。

我遇到的问题是，帐户余额似乎正在重置（或其他）。

当您输入一个数字并单击按钮时，它（据说）被添加到余额并显示在文本框中。不幸的是，当您输入数字时，数字本身会显示在文本框中。我不知道为什么。

我的代码如下：

```
namespace Assign11
{
using System;

public class BankAccount
{
    private double inValue;
    private double accountBalance;

    public BankAccount()
    {
    }

    public BankAccount(double input)
    {
        inValue = input;
        Deposit();
    }

    public double Invalue
    {
        set
        {
            inValue = value;
        }
        get
        {
            return inValue;
        }
    }

    public double AccountBalance
    {
        get
        {
            return accountBalance;
        }
        set
        {
            accountBalance = value;
        }
    }

    public void Deposit()
    {
        accountBalance = accountBalance + inValue;
    }
  }
} 
```

我也有以下表格：

```
namespace Assign11
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btn_deposit_Click(object sender, EventArgs e)
    {            
        double input;
        input = double.Parse((putin.Text));

        BankAccount anAccount = new BankAccount(input);

        output.Text = anAccount.AccountBalance.ToString();        
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T03:04:56.130

那是因为`BankAccount`每次单击按钮时都会实例化一个对象。这就是为什么 AccountBalance 总是从零开始而不是累加的原因。

在类范围内声明您的`BankAccount`对象，以便保持平衡。更改`Deposit`函数以接受存款金额并将该值添加到帐户余额中

# ubuntu - CMake FIND_LIBRARY：链接到指定库错误

> ID：15285969
> 
> 赞同：5
> 
> 时间：2013-03-08T03:01:27.303
> 
> 标签：ubuntu, cmake

我已经在我的计算机上安装了 FFTW3 库，并且可以在 /usr/lib 中找到以下文件：

```
libfftw3f.so.3          libfftw3l_threads.so.3
libfftw3f.so.3.3.0      libfftw3l_threads.so.3.3.0
libfftw3f_threads.so.3      libfftw3.so.3
libfftw3f_threads.so.3.3.0  libfftw3.so.3.3.0
libfftw3l.so.3          libfftw3_threads.so.3
libfftw3l.so.3.3.0      libfftw3_threads.so.3.3.0 
```

我想安装另一个需要链接这些库的包，但是当我尝试 `FIND_LIBRARY(FFTW3_LIBRARIES fftw3)`and时`FIND_LIBRARY(FFTW3_LIBRARIES fftw3f)`，它就是找不到这些库。

我该如何解决这个问题？谢谢！

CMakeLists.txt 中的代码：

```
FIND_PATH(FFTW3_INCLUDE_DIR fftw3.h)
IF(FFLD_HOGPYRAMID_DOUBLE)
  FIND_LIBRARY(FFTW3_LIBRARIES libfftw3.so.3)
ELSE()
  FIND_LIBRARY(FFTW3_LIBRARIES libfftw3f.so.3)
ENDIF()
#IF(NOT FFTW3_INCLUDE_DIR OR NOT FFTW3_LIBRARIES)
IF(NOT FFTW3_INCLUDE_DIR OR NOT FFTW3_LIBRARIES)
  MESSAGE(FATAL_ERROR "Could not find fftw3.")
ENDIF() 
```

错误信息：

```
CMake Error at CMakeLists.txt:52 (MESSAGE):
  Could not find fftw3. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:45:45.107

您已经安装了动态库，但是您是否安装了“开发”包？您可能需要一个文件或符号链接，名称如下：

```
libfftw3.so 
```

您可能需要安装 fftw3-devel（或 fftw3-dev）包。

另外，尝试删除“lib”前缀和 .so.3 后缀：

```
FIND_LIBRARY(FFTW3_LIBRARIES NAMES fftw3 libfftw3) 
```

如果这不起作用，请尝试添加 PATHS 参数：

```
FIND_LIBRARY(FFTW3_LIBRARIES NAMES fftw3 libfftw3 PATHS /usr/lib <other paths>) 
```

确保 CMAKE_FIND_ROOT_PATH 变量设置正确（大概你没有交叉编译，所以它可能是空的，cmake 将使用合理的位置来查找库）。

有关 find_library 函数的详细用法，请参见 cmake 手册页。

最后，查看此站点以了解如何编写 find_package 脚本： [http ://www.cmake.org/Wiki/CMake:How_To_Find_Libraries](http://www.cmake.org/Wiki/CMake:How_To_Find_Libraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T19:26:52.867

尝试**gui-cmake**，[http://www.cmake.org/cmake/help/runningcmake.html](http://www.cmake.org/cmake/help/runningcmake.html)。

然后您可以手动选择所需的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T01:13:55.363

I would normally expect to see symlinks like `/usr/lib/libfftw.so -> libfftw.so.3`. If those were in place, your `find_library` calls should work OK.

If you don't want to add symlinks, you can change your calls to:

```
find_library(FFTW3_LIBRARIES libfftw3.so.3 /usr/lib)
find_library(FFTW3F_LIBRARIES libfftw3f.so.3 /usr/lib) 
```

# python - 我们如何获得子进程的子进程的输出

> ID：15285970
> 
> 赞同：-3
> 
> 时间：2013-03-08T03:01:48.030
> 
> 标签：python, subprocess

有人可以分享一个 python 脚本示例，显示子进程（启动 file.bin）的子进程（由 file.bin 启动的 java）的输出吗？

子进程（启动 file.bin）的子进程（java 由 file.bin 启动）如下所示：`ps -ef | grep java`

`rrr 26267 26266 0 16:05 pts/12 00:00:03 /tmp/install.dir.26267/Linux/resource/jre/bin/java com.rew.erg.REW /tmp/install.dir.26267/temp.erg /tmp/env.properties.26267 "-i" "console"`

我们如何连接到另一个子进程的子进程并像期望或 pexpect 脚本一样执行与它的交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:12:23.523

有很多方法可以做到这一点，这里只是一个例子：

```
import subprocess
try:
    output = subprocess.check_output(cmd, stderr=subprocess.STDOUT,shell=True)
except subprocess.CalledProcessError, ex:
    ret = ex.returncode 
```

# java - 类型中的方法不适用于参数

> ID：15285975
> 
> 赞同：0
> 
> 时间：2013-03-08T03:02:19.417
> 
> 标签：java, parameters, compiler-errors, arguments, boolean

我收到此错误消息：

发现2个错误：

> 错误：PayCalculator 类型中的方法 determineTaxRate(double) 不适用于参数 ()
> 
> 错误：PayCalculator 类型中的方法 calculateNetPay(double, double) 不适用于参数 ()

你能告诉我该怎么做才能解决这个问题吗？

```
public class PayCalculator
{
    private double hourlyRate;
    private double hoursWorked;

     /**
     * Two parameter constructor
     * Add hourlyRate and hoursWorked
     * @param the hourly rate
     * @param the hours worked
     */
    public PayCalculator(double aHourlyRate, double aHoursWorked)
    {
        hourlyRate = aHourlyRate;
        hoursWorked = aHoursWorked;
    }

    /**
    * sets the hourly rate
    * @return hourlyRate
    */ 
    public void setHourlyRate(double aHourlyRate)
    {
        hourlyRate = aHourlyRate;
    }

    /**
    * gets the hourly rate
    * @param hourlyRate
    */
    public double getHourlyRate()
    {
        return hourlyRate;
    }

    /**
    * sets the hours worked
    * @return hoursWorked
    */ 
    public void setHoursWorked(double aHoursWorked)
    {
        hoursWorked = aHoursWorked;
    }

    /**
    * gets the hours worked
    * @param hours worked
    */
    public double getHoursWorked()
    {
        return hoursWorked;
    }

    public boolean workedOvertime()
    {
        if (hoursWorked > 40)
        {
            return true;
        }
        else 
        {
            return false;
        }
    }

    public double numHoursOvertime()
    {
        if (hoursWorked > 40)
        {
            return hoursWorked - 40;
        }
        else 
        {
            return 0;
        }
    }

    public double calculateGrossPay()
    {
        if (hourlyRate  <= 10.25)
        {
            if (hourlyRate <= 40)
                return hourlyRate * hoursWorked;
        }
        else 
        {  
            double grossPay = ((40 * hourlyRate) + ((hourlyRate * 2) * hoursWorked - 40));
            return grossPay;
        }

        if (hoursWorked <= 60)
        {
            return hourlyRate * hoursWorked;
        }
        else
        {
            return 60 * hourlyRate;
        }
    }

    public double determineTaxRate(double grossPay)
    {
        if (grossPay >= 800)
        {
            double tax = 0;
            tax = grossPay * 0.37;
            return tax;
        }
        else if ( grossPay >= 400)
        {
            double tax = 0;
            tax = grossPay * 0.22;
            return tax;
        }
        else
        {
            double tax = 0;
            tax = grossPay * 0.12;
            return tax;
        }
    }

    public double calculateNetPay(double grossPay, double tax)
    {
        double calculateNetPay = grossPay - tax;
        return calculateNetPay;
    }

    public void printData()
    {
        System.out.println("Hours Worked: " + hoursWorked);
        System.out.println("Hourly rate: " + hourlyRate);
        System.out.println("Number of hours of overtime worked: " + numHoursOvertime());
        System.out.println("Worked overtime? " + workedOvertime());
        System.out.println("Gross pay: " + calculateGrossPay());
        System.out.println("Tax Rate: " + determineTaxRate());
        System.out.println("Net Pay: " + calculateNetPay());
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T03:04:07.173

你在打电话

```
determineTaxRate() 
```

但是您的方法定义为：

```
public double determineTaxRate(double grossPay)
{ 
```

与您的其他错误相同。您需要将 a 传递`double`给该方法。比如这样：

```
determineTaxRate(calculateGrossPay()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:04:34.260

您没有为从方法调用的方法指定参数`printData()`，例如：

```
System.out.println("Net Pay: " + calculateNetPay()); 
```

您`calculateNetPay()`使用 0 个参数进行调用，正如您在方法定义中指定的那样，它需要 2 个双参数。

```
public double calculateNetPay(double grossPay, double tax) { ... } 
```

同样适用于您遇到的其他错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T03:18:26.253

你已经像这样声明了你的方法：

```
public double determineTaxRate(double grossPay) 
```

然后像这样调用它：

```
determineTaxRate() 
```

显然，您在调用该方法时错过了一个参数

通过 determineTaxRate(someDoubleVar) 解决此问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T03:05:04.753

您的方法用一个参数定义。但是您没有传递任何参数。

对于 calculateNetPay() 你也在做同样的事情。

# java - 单击后重命名按钮 - Java JButton

> ID：15285977
> 
> 赞同：7
> 
> 时间：2013-03-08T03:02:42.190
> 
> 标签：java, swing, jframe, jbutton, actionlistener

当我单击它时，我试图将我的按钮从“开始”更改为“停止”。我的尝试如下，我查找并尝试复制指南，但我看不出我做错了什么。我可能遗漏了一些“}”，因为我遗漏了很多不相关的代码。有人可以看到我做错了什么吗？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

public class PipeGameApp extends JFrame implements ActionListener {

    private static int BOARD_SIZE = 11;
    private PipeGame game;      // The model
    private PipeGameView view;      // The view

    // This constructor builds the window
    public PipeGameApp(String title) {
        super(title);

        game = new PipeGame(BOARD_SIZE);
        view = new PipeGameView(game);

        //THE TOP BAR
        JPanel topBar = new JPanel();
        JButton startButton = new JButton("Start");
        startButton.addActionListener(this);

        ButtonGroup bg1 = new ButtonGroup();
        JRadioButton rb1 = new JRadioButton("2 minutes", true);
        rb1.addActionListener(this);

        JRadioButton rb2 = new JRadioButton("10 minutes", false);
        JRadioButton rb3 = new JRadioButton("No Time Limit", false);
        bg1.add(rb1);
        bg1.add(rb2);
        bg1.add(rb3);

        topBar.add(startButton);
        topBar.add(rb1);
        topBar.add(rb2);
        topBar.add(rb3);
        //END OF TOP BAR

        //THE BOTTOM BAR
        JPanel bottomBar = new JPanel();
        JLabel timeLeft = new JLabel("Time Left: ");
        JProgressBar bar = new JProgressBar();
        bottomBar.add(timeLeft);
        bottomBar.add(bar);
        bottomBar.setVisible(false);
        //end of bottom

        /*
         //bottom 2
         int fscore=10;
         JPanel bottomBar2 = new JPanel();
         JLabel score = new JLabel("Final score:" + fscore);
         bottomBar2.add(score);
         bottomBar2.setVisible(false);
         */

        getContentPane().add(view); //CHANGE LOCATION OF BOARD GAME HERE BorderLayout.SOUTH

        getContentPane().add(topBar, BorderLayout.NORTH);
        getContentPane().add(bottomBar, BorderLayout.SOUTH);

        //getContentPane().add(bottomBar2, BorderLayout.SOUTH);

        // Add the listeners to the view's buttons
        for (int r = 0; r < BOARD_SIZE; r++) {
            for (int c = 0; c < BOARD_SIZE; c++) {
                view.getButton(r, c).addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        handleTileSelection(e);
                    }
                });
            }
        }

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        //setSize(446,466);
        setSize(446, 530);
        setResizable(false);
    }

    // Handle a Tile Selection.   Just change the model and update the view.
    private void handleTileSelection(ActionEvent e) {
        // Find the row and column of the pressed button, then make the change
        int r = 0, c = 0;
        for (int i = 0; i < BOARD_SIZE; i++) {
            for (int j = 0; j < BOARD_SIZE; j++) {
                if (e.getSource() == view.getButton(i, j)) {
                    if (game.placePipe(i, j)) {
                        view.update();
                    }
                    return;
                }
            }
        }
    }

    // This is where it all begins
    public static void main(String[] args) {
        new PipeGameApp("The Frantic Pipe Layer").setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        startButton.setText("asdf");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T03:05:19.753

您的问题是有限的变量范围之一。您的 startButton 变量正在构造函数中声明，因此仅在构造函数中可见。您需要在类中声明它而不是在构造函数中重新声明它，从而允许类的其余部分能够“看到”变量并使用它。

即，改变这个：

```
public class PipeGameApp extends JFrame implements ActionListener {

    private static int BOARD_SIZE = 11;
    private PipeGame game;      // The model
    private PipeGameView view;      // The view

    public PipeGameApp(String title) {

        JButton startButton = new JButton("Start");
        startButton.addActionListener(this);
        // etc... 
```

对此：

```
public class PipeGameApp extends JFrame implements ActionListener {

    private static int BOARD_SIZE = 11;
    private PipeGame game;      // The model
    private PipeGameView view;      // The view
    private JButton startButton; // *** note change ***

    public PipeGameApp(String title) {

        startButton = new JButton("Start"); // *** note change ***
        startButton.addActionListener(this);
        // etc... 
```

或者：

*   使用一个 JToggleButton
*   或者使用 ActionEvent 的`getSource()`方法返回的对象，并根据其*当前*状态设置它的新状态。

例如，

```
@Override
public void actionPerformed(ActionEvent ae) {
    Object source = ae.getSource();
    if (source instanceof JButton) {
       if (ae.getText().equals("Start")) {
          ae.setText("Stop");
          // do other stuff
       } else if (ae.getText().equals("Stop")) {
          ae.setText("Start");
          // do more stuff
       }
    }
} 
```

关于`"I might be missing some "}" because I left out a lot of the code that's irrelevant."`请努力避免这种情况发生。缺少的“}”不应该丢失，这会使我们更难理解您的代码并为您提供帮助。如果您要求其他人在空闲时间为您提供帮助，那么不要发布垃圾代码并不是要求您太多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:05:13.713

您在方法之后保留了构造函数的结束大括号`main`。这是更正后的代码。

```
public PipeGameApp(String title) {
    super(title);

    JPanel topBar = new JPanel();
    JButton startButton = new JButton("Start");
    startButton.addActionListener(this);
}

public static void main(String[] args) {
    new PipeGameApp("The Frantic Pipe Layer").setVisible(true);
}

@Override
public void actionPerformed(ActionEvent ae) {
    startButton.setText("asdf");
} 
```

# matlab - 在 Matlab 中采样连续函数

> ID：15285980
> 
> 赞同：2
> 
> 时间：2013-03-08T03:02:56.913
> 
> 标签：matlab, sampling

我是 matlab 新手，在这个学术练习中，他们要求我们从连续函数中进行采样。

我原来的功能是：

```
x = sin(pi * t);
y = cos(2 * pi * t / 3);
z = x + y - 2; 
```

在区间

```
t = -8:0.001:8; 
```

然后他们要求我们在几秒钟内进行一次采样`z(n)`。`z``Ts=0.01`

我的想法是将 的值保存在一个新向量中`z`，跳过`z`十乘十的位置：

```
n = numel(z);
Zd = z(0:10:z); 
```

这个想法来自这样一个事实，即 0.01 秒的准确度是第一个“连续”间隔的十倍`t`。但是matlab说这是不可能的，并给了我错误：

```
??? Subscript indices must either be real positive integers or logicals. 
```

有人可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:39:50.043

正如 2 @Memming 所说，matlab 索引从 1 开始，而不是 0，这是我的问题。

谢谢。

# asp.net - 使用 CSS 对齐多个文本框和标签

> ID：15285982
> 
> 赞同：3
> 
> 时间：2013-03-08T03:03:14.563
> 
> 标签：asp.net, css

我知道这个问题已经被问过了，我已经查看了多个答案，但还没有完全弄清楚这一点。

我想对齐标签，以便它们的最后一个字符对齐在一起（右侧对齐），并且我想对齐与它们一起使用的文本框。这是我的 css 样式表类中的内容：

.postLabel { 显示：块；向左飘浮; 文本对齐：右；填充左：100px；}

.postTextBox { 显示：块；向左飘浮; 文本对齐：右；填充左：400px；}

```
<asp:Label ID="Label1" runat="server" ForeColor="Black" Text="Title: " CssClass = "postLabel"></asp:Label>

<asp:TextBox ID="titleText" runat="server" Width = "213px" CssClass = "postTextBox"></asp:TextBox>

<asp:Label ID="Label2" runat="server" ForeColor="Black" Text="Label2: " CssClass = "postLabel"></asp:Label>

<asp:TextBox ID="Text2" runat="server" Width = "213px" CssClass = "postTextBox"></asp:TextBox> 
```

我看到的问题：这是左对齐的。Title 中的 T 和 Label2 中的 L 对齐。标签和文本框也相互拥抱，因此它似乎不遵守 .CSS 中的填充。

最后，这是我的 .aspx 页面顶部的样子：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Master"     ViewStateEncryptionMode="Always".... %>
  <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
  </asp:Content>
  <asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

<link href="Style.css" rel="stylesheet" type="text/css" /> 
```

这是应该添加 .css 文件的地方吗？我收到一条错误消息，说元素“链接”不能嵌套在元素“div”中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:16:04.013

理想情况下，您的 CSS 应该在文档的头部引用。

如果您想正确对齐这些标签，我强烈建议您执行以下操作：

1.  创建一个 div 来包装标签和文本框：

    ```
    <div class='label-wrapper'>
      <label>Title:</label>
      <input type='text'>
    </div> 
    ```

2.  将以下 CSS 添加到样式表中：

    ```
    div.label-wrapper{
      position:relative;
      width: 400px; /* Set this to however far you want that right align to be from the left */
    }
    div.label-wrapper > label{
      position:absolute;
      right: 0;
      height: 15px; /*Or whatever height you like */
    }
    div.label-wrapper > input[type=text] {
      position:absolute;
      right: 0;
      top: 15px; /* Or whatever you set the label's height to, plus any desired margin */
    } 
    ```

* * *

**更新**

**[小提琴示例](http://jsfiddle.net/p54SE/)**

看到您的示例后，这是您需要的 CSS。您仍然需要像我上面描述的那样将元素包装在 div 中。

```
div.label-wrapper {
  position: relative;
  min-width: 300px;
  max-width: 400px;
  height: 24px;
  display:block;
}
div.label-wrapper > label {
  position: absolute;
  left: 0;
  width: 100px;
  text-align: right; /* not absolutely necessary, but will be if you assign a width to the label */
  white-space: nowrap; /* Again, not totally necessary, but if you run out of space otherwise you'll get multiple lines for your label */
}
div.label-wrapper > input[type=text] {
  position: absolute;
  left: 115px; /* Leaves a 15px gap between end of label and start of textbox.  Increase value if you want more than 15px or decrease if you want less */
} 
```

这会给你你想要的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:06:50.257

将此 css 文件添加到头部内容占位符中以进行尝试

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Master"     ViewStateEncryptionMode="Always".... %>
  <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
 **<link href="Style.css" rel="stylesheet" type="text/css" />**
  </asp:Content>
  <asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server"> 
```

# ruby-on-rails-3 - attr_accessible '意外的参数值'

> ID：15285983
> 
> 赞同：2
> 
> 时间：2013-03-08T03:03:15.447
> 
> 标签：ruby-on-rails-3

我的 RoR 应用程序中有一个模型让我发疯。

我想为其添加一个新属性，但它只是不允许我这样做 这是代码

```
class Issue < ActiveRecord::Base

  attr_accessible :page_count, # -> unexpected parameter value 'page_count'
                  :publication
....
end 
```

有问题的属性在迁移文件中有相应的字段。

如果我手动添加访问器方法，错误就会消失。

```
 attr_reader :page_count
  attr_writer :page_count

  def page_count
    @page_count
  end

  def page_count=(value)
    @page_count = value
  end 
```

问题是，我不明白为什么会发生这种情况，因为我在这个模型类上有许多其他属性并且碰巧没有这个问题。

我正在使用 rails 3.2.9 和 ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11.4.0]

根据要求，这是完整的堆栈跟踪。我正在使用具有大量捆绑宝石的 activeadmin。

```
activemodel (3.2.9) lib/active_model/attribute_methods.rb:407:in `method_missing'
activerecord (3.2.9) lib/active_record/attribute_methods.rb:149:in `method_missing'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:1161:in `value_before_type_cast'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:1149:in `value_before_type_cast'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:1043:in `block in to_input_field_tag'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:1043:in `fetch'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:1043:in `to_input_field_tag'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:692:in `text_field'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:1284:in `text_field'
formtastic (2.2.1) lib/formtastic/inputs/base/stringish.rb:10:in `block in to_html'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:40:in `block in capture'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:187:in `with_output_buffer'
haml (4.0.0) lib/haml/helpers/action_view_xss_mods.rb:5:in `with_output_buffer_with_haml_xss'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:40:in `capture'
haml (4.0.0) lib/haml/helpers/action_view_mods.rb:59:in `capture_with_haml'
formtastic (2.2.1) lib/formtastic/inputs/base/wrapping.rb:11:in `input_wrapping'
formtastic (2.2.1) lib/formtastic/inputs/base/stringish.rb:8:in `to_html'
formtastic (2.2.1) lib/formtastic/helpers/input_helper.rb:240:in `input'
activeadmin (0.5.0) lib/active_admin/form_builder.rb:22:in `block in input'
activeadmin (0.5.0) lib/active_admin/form_builder.rb:173:in `with_new_form_buffer'
activeadmin (0.5.0) lib/active_admin/form_builder.rb:22:in `input'
app/admin/issues.rb:17:in `block (3 levels) in <top (required)>'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:40:in `block in capture'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:187:in `with_output_buffer'
haml (4.0.0) lib/haml/helpers/action_view_xss_mods.rb:5:in `with_output_buffer_with_haml_xss'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:40:in `capture'
haml (4.0.0) lib/haml/helpers/action_view_mods.rb:59:in `capture_with_haml'
formtastic (2.2.1) lib/formtastic/helpers/fieldset_wrapper.rb:32:in `field_set_and_list_wrapping'
formtastic (2.2.1) lib/formtastic/helpers/inputs_helper.rb:292:in `inputs'
activeadmin (0.5.0) lib/active_admin/form_builder.rb:14:in `block in inputs'
activeadmin (0.5.0) lib/active_admin/form_builder.rb:173:in `with_new_form_buffer'
activeadmin (0.5.0) lib/active_admin/form_builder.rb:14:in `inputs'
app/admin/issues.rb:13:in `block (2 levels) in <top (required)>'
activeadmin (0.5.0) lib/active_admin/views/pages/form.rb:23:in `instance_exec'
activeadmin (0.5.0) lib/active_admin/views/pages/form.rb:23:in `block in main_content'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:40:in `block in capture'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:187:in `with_output_buffer'
haml (4.0.0) lib/haml/helpers/action_view_xss_mods.rb:5:in `with_output_buffer_with_haml_xss'
actionpack (3.2.9) lib/action_view/helpers/capture_helper.rb:40:in `capture'
haml (4.0.0) lib/haml/helpers/action_view_mods.rb:59:in `capture_with_haml'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:607:in `fields_for'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:378:in `form_for'
haml (4.0.0) lib/haml/helpers/action_view_mods.rb:135:in `form_for_with_haml'
haml (4.0.0) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
formtastic (2.2.1) lib/formtastic/helpers/form_helper.rb:161:in `block in semantic_form_for'
formtastic (2.2.1) lib/formtastic/helpers/form_helper.rb:192:in `with_custom_field_error_proc'
formtastic (2.2.1) lib/formtastic/helpers/form_helper.rb:160:in `semantic_form_for'
activeadmin (0.5.0) lib/active_admin/view_helpers/form_helper.rb:8:in `active_admin_form_for'
arbre (1.0.1) lib/arbre/element.rb:175:in `method_missing'
activeadmin (0.5.0) lib/active_admin/views/pages/form.rb:22:in `main_content'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:78:in `block (2 levels) in build_main_content_wrapper'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'
arbre (1.0.1) lib/arbre/context.rb:92:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:18:in `div'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:77:in `block in build_main_content_wrapper'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'
arbre (1.0.1) lib/arbre/context.rb:92:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:18:in `div'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:76:in `build_main_content_wrapper'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:60:in `block in build_page_content'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'
arbre (1.0.1) lib/arbre/context.rb:92:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:18:in `div'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:59:in `build_page_content'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:42:in `block (2 levels) in build_page'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'
arbre (1.0.1) lib/arbre/context.rb:92:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:18:in `div'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:39:in `block in build_page'
arbre (1.0.1) lib/arbre/context.rb:92:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:38:in `build_page'
activeadmin (0.5.0) lib/active_admin/views/pages/base.rb:10:in `build'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:30:in `block in build_tag'
arbre (1.0.1) lib/arbre/context.rb:92:in `with_current_arbre_element'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'
arbre (1.0.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'
activeadmin (0.5.0) app/views/active_admin/resource/new.html.arb:1:in `block in ___sers_franciscogindre__rvm_gems_ruby_______p____gems_activeadmin_______app_views_active_admin_resource_new_html_arb__4355196806900018113_70233184752180'
arbre (1.0.1) lib/arbre/context.rb:45:in `instance_eval'
arbre (1.0.1) lib/arbre/context.rb:45:in `initialize'
activeadmin (0.5.0) app/views/active_admin/resource/new.html.arb:1:in `new'
activeadmin (0.5.0) app/views/active_admin/resource/new.html.arb:1:in `___sers_franciscogindre__rvm_gems_ruby_______p____gems_activeadmin_______app_views_active_admin_resource_new_html_arb__4355196806900018113_70233184752180'
actionpack (3.2.9) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.9) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.9) lib/action_view/template.rb:143:in `render'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
actionpack (3.2.9) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.9) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.9) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.9) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.9) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.9) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.9) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.9) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/franciscogindre/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.9) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.9) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:39:in `render'
activeadmin (0.5.0) lib/active_admin/resource_controller/actions.rb:34:in `block (2 levels) in new'
actionpack (3.2.9) lib/action_controller/metal/responder.rb:230:in `call'
actionpack (3.2.9) lib/action_controller/metal/responder.rb:230:in `default_render'
actionpack (3.2.9) lib/action_controller/metal/responder.rb:160:in `to_html'
responders (0.9.3) lib/responders/flash_responder.rb:104:in `to_html'
actionpack (3.2.9) lib/action_controller/metal/responder.rb:153:in `respond'
actionpack (3.2.9) lib/action_controller/metal/responder.rb:146:in `call'
actionpack (3.2.9) lib/action_controller/metal/mime_responds.rb:239:in `respond_with'
inherited_resources (1.3.1) lib/inherited_resources/actions.rb:19:in `new'
activeadmin (0.5.0) lib/active_admin/resource_controller/actions.rb:32:in `new'
actionpack (3.2.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.9) lib/active_support/callbacks.rb:458:in `_run__3461794753324901195__process_action__526321814918135960__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.9) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:601:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.9) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__4545952714989117464__call__1013407512145641246__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.9) lib/rails/engine.rb:479:in `call'
railties (3.2.9) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:55:53.847

原来我做了一个

```
db:drop
db:create
db:migrate
db:seed 
```

红宝石停止显示这些错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:10:47.220

Rails 有一个叫做[计数器缓存](http://railscasts.com/episodes/23-counter-cache-column)的特性。如果您使用计数器缓存，通常，rails 使用*childmodel* _count 字段名称。例如，如果您`User`建模`has_many :songs`并在歌曲模型中启用计数器缓存，如`belongs_to :user, :counter_cache => true`，它将在用户表中使用名称为 的列（您必须创建它）`songs_count`。

这可能是这个问题的原因。您可以尝试没有子字符串“count”的任何其他名称吗？

# twitter - 在 Coldfusion 服务器上实现monkeyTweets

> ID：15285984
> 
> 赞同：1
> 
> 时间：2013-03-08T03:03:18.680
> 
> 标签：twitter, coldfusion

我继承了一个运行 Coldfusion 的站点，我正在尝试在该站点上获取 Twitter 提要。我找到了一个似乎可以完成这项工作的工具，并且我已经在 Twitter 上注册了我的应用程序，并且我有我的客户端和 OAuth 代码。

问题是我对 Coldfusion 不够熟悉，无法确切知道我需要在相关页面上放置什么代码来提取推文。这是我正在使用的库：[https ://github.com/coldfumonkeh/monkehTweets](https://github.com/coldfumonkeh/monkehTweets)

据我所知，我的代码应该是这样的：

```
<cfinvoke 
 component = "component_name" 
 method="method_name" 
 returnvariable="return_variable">
 <cfinvokeargument name="arg1" value="value">
 <cfinvokeargument name="arg2" value="value">
</cfinvoke> 
```

不幸的是，我不知道在这些领域中放什么。似乎没有任何参数列表或您应该在名称、方法和变量字段中输入的内容。我所需要的只是拉三个最近的推文。这可能不是这里问题的标准格式，但非常感谢了解 Coldfusion 的人提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T10:10:39.517

我编写了一个非常基本的演示来从经过身份验证的用户的时间轴中提取和显示信息。

您需要从对象实例化开始，看起来您已经完成了：（显然将您自己的 OAuth / Twitter 详细信息添加到这里的**init**方法中）

```
<cfset objmonkehTweet   =   new monkehTweet.com.coldfumonkeh.monkehTweet(
            consumerKey     =   '',
            consumerSecret      =   '',
            oauthToken      =   '',
            oauthTokenSecret    =   '',
            userAccountName     =   '',
            parseResults        =   true
        ) /> 
```

将**parseResults**值设置为 true 会将响应转换为可以在 ColdFusion 中转储并轻松读取值的结构或 XML 对象。

接下来，调用**getUserTimeline()**方法。如果我们不将任何用户 ID 或屏幕名称值传递给方法调用，它将访问经过身份验证的用户的时间线：

```
<cfset arrStatus = objMonkehTweet.getUserTimeline() /> 
```

由于没有发送有关格式的参数，monkeyhTweet 将返回默认响应为 JSON（将**parseResults**设置为 true，将生成结构数组）。

现在我们可以开始创建循环了。这是*非常*基本的，但会帮助您启动和运行。

定义要返回的最大推文数：

```
<cfset totalTweets = 3 /> 
```

然后检查数组的长度是谨慎的（以防我们的结果少于所需的最大数量）：

```
<cfif arrayLen(arrStatus) LT totalTweets>
    <cfset totalTweets = arrayLen(arrStatus) />
</cfif> 
```

现在定义一个循环，从 1 开始，最大为**totalTweet**值：

```
<cfoutput>
<ul>
<cfloop from="1" to="#totalTweets#" index="tweet">

    <cfset status = objMonkehTweet.entify(arrStatus[tweet]) />      
    <li>#arrStatus[tweet]['user']['name']#: #status#</li>

</cfloop>
</ul> 
```

您现在可以像这样访问每条特定推文：**arrStatus[tweet]**。MonkehTweet 对象包含一个名为**entify**的辅助函数，它将任何 URL、用户提及和主题标签转换为 HTML URL 以供显示。只需传入推文对象，它就会为您返回格式化的状态。您还可以直接引用响应中的任何对象，就像我们在此处使用用户名值一样。

要查看返回的内容，最好将整个响应转储出来，以便您可以在显示中查看可访问和使用的内容：

```
<cfdump var="#arrStatus#" /> 
```

我希望这可以帮助您启动和运行。

# android - 使用 phonegap 捕获网页屏幕并显示它？

> ID：15285985
> 
> 赞同：0
> 
> 时间：2013-03-08T03:03:19.533
> 
> 标签：android, cordova

我正在尝试在我的 android/phonegap 应用程序中实现一个页面翻转器。屏幕显示来自 js 文件的网页，因此我希望能够在单击页面角落的按钮时捕获它，然后将其作为 jpeg 或 bmp 传递到我的页面翻转器以运行其动画。然后从内存中清除图像。

有任何想法吗？谢谢

将要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:15:48.480

如果您的目标设备支持该功能，则对这个翻转动画使用 CSS 3D 转换要容易得多。

网上有很多例子。只需在 Google 上搜索“css3 翻转动画”即可。

# java - 并发只写事务

> ID：15285986
> 
> 赞同：2
> 
> 时间：2013-03-08T03:03:40.413
> 
> 标签：java, google-app-engine, google-cloud-datastore

[数据存储文档](https://developers.google.com/appengine/docs/java/datastore/transactions#What_Can_Be_Done_In_a_Transaction)说：

> 为实体组提交事务后，App Engine 会再次检查事务中使用的实体组的上次更新时间。如果它在我们的初始检查后发生了变化，App Engine 会抛出一个异常

`new Entity("TestEntity",1)`我有三个关于在两个并发事务中执行事务数据存储放置的测试用例。

*   test1：将实体放在第一个事务中，将实体放在第二个事务中，并提交两个事务。该测试在开发服务器和独立单元测试中运行时通过（即抛出`ConcurrentModificationException`），但在生产服务器中运行时失败（即在不抛出异常的情况下执行）。

*   test2：将实体放在第一个事务中并提交，然后将实体放在第二个事务中并提交。这个测试总是失败。

*   test3：尝试在两个事务中获取（不存在的）实体，然后执行 test2。这个测试总是通过 throw `ConcurrentModificationException`。

*从这些测试中，我得出*结论，既不`beginTransaction`也不`put`保证执行“*初始检查*”，我需要支付一笔费用以保证交易的完整性。那是对的吗？

 *```
@Test(expected=ConcurrentModificationException.class)
//put1 put2 commit1 commit2
public void test1() {
    DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
    Transaction txn1 = ds.beginTransaction();
    Transaction txn2 = ds.beginTransaction();
    ds.put(txn1,new Entity("TestEntity",1));
    ds.put(txn2,new Entity("TestEntity",1));
    txn1.commit();
    txn2.commit();
}

@Test(expected=ConcurrentModificationException.class)
//put1 commit1 put2 commit2
public void test2()  {
    DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
    Transaction txn1 = ds.beginTransaction();
    Transaction txn2 = ds.beginTransaction();
    ds.put(txn1,new Entity("TestEntity",1));
    txn1.commit();
    ds.put(txn2,new Entity("TestEntity",1)); 
    txn2.commit(); 
}

@Test(expected=ConcurrentModificationException.class)
//get1 get2 put1 commit1 put2 commit2
public void test3() throws InterruptedException, ExecutionException {
    DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
    ds.delete(KeyFactory.createKey("TestEntity", 1));
    Transaction txn1 = ds.beginTransaction();
    Transaction txn2 = ds.beginTransaction();
    Assert.assertNull(getTestEntity(ds, txn1));
    Assert.assertNull(getTestEntity(ds, txn2));
    ds.put(txn1,new Entity("TestEntity",1));
    txn1.commit();
    ds.put(txn2,new Entity("TestEntity",1));
    txn2.commit();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T03:48:09.730

你在某种意义上是对的。(MVCC)在事务观察到可变数据快照的第一个事件之前，一致性*不需要时间戳。*

想一想：在没有任何读取的情况下改变单个记录的事务怎么会违反一致性？由于它没有发出读取，因此它基本上没有做出任何假设。因此，没有任何假设可以被破坏以导致写-写冲突。

最重要的是，无论如何，您都将获得一致性的安全优势。在您发出第一个事务读取之前，强制执行该一致性根本不需要时间戳。*

# oop - 指针/引用数据成员是否指示 UML 中的关联或聚合关系？

> ID：15285996
> 
> 赞同：1
> 
> 时间：2013-03-08T03:04:47.947
> 
> 标签：oop, uml, aggregation

我有点困惑它是哪一个。

您可以说它通过指针“使用”对象 - 因此是关联。但这听起来也像聚合——“有一个”对象，但是当这个对象死亡时，并不意味着被引用的对象死亡。

哪一个在 UML 中最有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:50:32.810

它可以指示关联、聚合和事件组合。三者之间的区别是语义上的，而不是静态的或特定于实现的。

1.  如果指向的类与拥有类有**生命周期**依赖关系（没有它就不能存在的整体的一部分，如哈希图中的条目类），那么它就是一个组合。
2.  如果指向的类是所属类的**一部分**（语义关系，即在应用程序中的控制器之间共享的数据库连接），那么它就是一个聚合。
3.  如果指针类用于另一件事（缓存、某些计算中的中间值等），那么它可能是一个简单的关联。

但是 UML 为不同的解释留下了很大的空间，所以你永远不会在这里得到“正确”的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:41:34.907

首先，“聚合关系”实际上是一种（二进制）关联，其中一端具有“无”以外的聚合类型。那么聚合只是与精细语义的关联。

聚合可以是**复合**的（全菱形）或**共享**的（空心菱形）。复合聚合意味着*“复合对象对复合对象的存在和存储负责”*（然后在删除复合时引用的对象死亡，但在删除复合之前可能会删除一部分）。

另一方面，共享聚合不绑定聚合对象的生命周期（UML 规范说“*共享聚合的精确语义因应用程序区域和建模者而异*”和“*聚合的精确生命周期语义是一个语义变化点*”）。它们介于朴素的联想和复合的联想之间。

# php - 在 PHP 中，什么更有效？首先声明并覆盖或通过 if / else 声明？

> ID：15285997
> 
> 赞同：0
> 
> 时间：2013-03-08T03:04:50.060
> 
> 标签：php

我经常发现自己在做这样的事情：

```
 $add_class = '';
    if($class){
      $add_class = " abc ";
    } 
```

像这样写是不是更好：

```
 if($class){
      $add_class = " abc ";
    } else {
      $add_class = '';
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:22:23.690

考虑到如果你不定义 PHP 会抛出一个错误`add_class`，你可能应该使用前者。

在性能方面（甚至处理器都不会关心）：

```
//.000010013580322266 ms
$class = 1;
$add_class = '';
if($class){
  $add_class = " abc ";
}

//.000010013580322266 ms
$class = 1;
if($class){
  $add_class = " abc ";
} else {
  $add_class = '';
} 
```

还有第三种选择，使用三元运算符（成本稍高）：

```
//.000010967254638672 ms
$class = 1;
$add_class = $class ? 'abc' : ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:14:33.267

不，这不是更好。

您以前的方法更加干净，更安全，不会犯未来的错误。

例如：你忘记只使用一个 else 并且你决定只使用 else 如果在某个地方，当你需要这个变量时你的代码会崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:27:23.347

两者的区别是显而易见的，但并不显着......在这种情况下，首先分配变量只会在 $class 变量更可能为真时效率较低。