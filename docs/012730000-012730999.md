# StackOverflow 问答 12730000-12730999

# generics - 专门针对关键字的泛型函数

> ID：12730003
> 
> 赞同：3
> 
> 时间：2012-10-04T14:50:54.013
> 
> 标签：generics, common-lisp

Common Lisp 中有没有一种方法可以创建一个泛型函数，其中要专门研究的参数是关键字参数？

例如，而不是这个：

```
CL-USER> (defgeneric tst (a))
#<STANDARD-GENERIC-FUNCTION TST (0)>
CL-USER> (defmethod tst ((a list)) 
           (print a))
#<STANDARD-METHOD TST (LIST) {1004ECC903}> 
```

..它在参数'a'上指定。我想要以下内容：

```
CL-USER> (defgeneric tst (&key a))
#<STANDARD-GENERIC-FUNCTION TST (0)>
CL-USER> (defmethod tst (&key (a list)) 
           (print a))
#<STANDARD-METHOD TST (LIST) {1004ECC903}> 
```

显然，这与设置关键字参数的默认值的语法冲突，所以我有点卡住了。在实际代码中，这个问题与我选择了不同的参数布局有关，所以这不是问题（而且启动起来有点整洁！）但如果我再次遇到这个问题，我想我最好问问专家！

祝大家欢呼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T17:29:01.083

不，这不是 Common Lisp 提供的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:12:32.080

不直接支持它，但您可以通过分派到通用函数来实现相同的效果。

```
(defgeneric foo-impl (bar baz))

(defun foo (&key bar baz)
  (foo-impl bar baz)) 
```

# java - 从字节数组构造的 Java 字符串长度错误

> ID：12730007
> 
> 赞同：3
> 
> 时间：2012-10-04T14:51:06.587
> 
> 标签：java, arrays, string, bytearray, byte

我很难理解 Java String(byte[]) 构造函数（Java 6）语义背后的基本原理。生成的 String 对象的长度通常是错误的。也许这里有人可以解释为什么这是有道理的。

考虑以下小型 Java 程序：

```
import java.nio.charset.Charset;

public class Test {
    public static void main(String[] args) {
        String abc1 = new String("abc");
        byte[] bytes = new byte[32];

        bytes[0] = 0x61; // 'a'
        bytes[1] = 0x62; // 'b'
        bytes[2] = 0x63; // 'c'
        bytes[3] = 0x00; // NUL

        String abc2 = new String(bytes, Charset.forName("US-ASCII"));

        System.out.println("abc1: \"" + abc1 + "\" length: " + abc1.length());
        System.out.println("abc2: \"" + abc2 + "\" length: " + abc2.length());

        System.out.println("\"" + abc1 + "\" " +
                (abc1.equals(abc2) ? "==" : "!=") + " \"" + abc2 + "\"");
    }
} 
```

这个程序的输出是：

```
abc1: "abc" length: 3
abc2: "abc" length: 32
"abc" != "abc" 
```

String byte[] 构造函数的文档指出，“新字符串的长度是字符集的函数，因此可能不等于字节数组的长度。” 确实如此，在 US-ASCII 字符集中，字符串“abc”的长度是 3，而不是 32。

奇怪的是，即使 abc2 不包含空格字符，abc2.trim() 返回相同的字符串，但长度调整为正确的值 3 并且 abc1.equals(abc2) 返回 true...我错过了一些明显的东西吗？

是的，我意识到我可以将显式长度传递给构造函数，我只是想了解默认语义。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-04T14:53:34.007

在 Java 中，字符串不是以空值分隔的。从字节数组构造的字符串使用数组的整个长度。由于 0x00 将一对一转换为字符`'\0'`，因此生成的字符串与整个数组的长度相同——32。当它被打印到 System.out 时，空字符的宽度为零，所以它看起来像“abc”，但实际上是“abc\0\0\0...”（对于 32 个字符）。

解决这个问题的原因`trim()`是它认为`'\0'`是空白。

请注意，如果要将字符串的以 null 分隔的字节表示形式转换为 a `String`，则需要找到要停止的索引。然后（正如@Brian 在他的评论中指出的那样），您可以使用不同的 String 构造函数：

```
String abc2 = new String(bytes, 0, indexOfFirstNull, Charset.forName("US-ASCII")); 
```

但是，必须谨慎行事。您正在为平台使用 US-ASCII 字符集，其中第一个零字节的索引可能是自然停止的地方。但是，在许多字符集（例如 UTF-16）中，零字节可以作为实际文本的正常部分出现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T14:55:22.693

> 生成的 String 对象的长度通常是错误的。

不，这是对的——你只是误解了它的意义。它基本上是基于每个字节一个字符创建一个字符串 - 至少当您使用 US-ASCII 编码时。

> 奇怪的是，即使 abc2 不包含空格字符，abc2.trim() 返回相同的字符串，但长度调整为正确的值 3 并且 abc1.equals(abc2) 返回 true...我错过了一些明显的东西吗？

状态文档[`trim()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim%28%29)（在两个不适用的条件之后）：

> *   否则，设 k 为字符串中编码大于 '\u0020' 的第一个字符的索引，设 m 为字符串中编码大于 '\u0020' 的最后一个字符的索引。创建了一个新的 String 对象，表示这个字符串的子字符串，它以索引 k 处的字符开始，以索引 m 处的字符结束——即 this.substring(k, m+1) 的结果。

所以`trim()`基本上将“空白”视为等同于“U+0000 到 U+0020 包括”。这是“空白”的一种奇怪的不准确（阅读：基本上早于 Unicode）表示，但它确实解释了这种行为。

基本上你看到的是：

```
String trailingNulls = "abc\0\0\0\0\0\0";
String trimmed = trailingNulls.trim();
System.out.println(trimmed.length()); // 3 
```

这与从字节数组构造字符串无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:56:38.617

**-**首先String是java中的Object类型，Object类的equals（）方法来比较它们..

**例如：**

`"abc" .equals("abc")`

**-**您可以`\0`通过 using 方法从结果字符串中删除`trim()`，然后您将得到您想要的结果......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:58:47.283

首先分配的索引是错误的。他们应该是

```
 bytes[0] = 0x61; // 'a'
        bytes[1] = 0x62; // 'b'
        bytes[2] = 0x63; // 'c'
        bytes[3] = 0x00; // NUL 
```

如果你检查上课的`equals`方法，`String`你就会知道原因。它正在迭代`char[]`并检查每个值是否为索引。因此，如果长度不同，`char[]`它将返回您`false.`

```
 while (n-- != 0) {
                if (v1[i++] != v2[j++])
                    return false;
            } 
```

修复是使用`trim`

```
 abc2.equals(abc1.trim()) 
```

[String#trim()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim%28%29)的 Java 文档

> 否则，设 k 为字符串中编码大于 '\u0020' 的第一个字符的索引，设 m 为字符串中编码大于 '\u0020' 的最后一个字符的索引

# jquery - json对象中的撇号添加斜线

> ID：12730011
> 
> 赞同：6
> 
> 时间：2012-10-04T14:51:36.483
> 
> 标签：jquery, json

我得到一个像这样的 json 对象

```
{
    "First": "MyName's",
     "Last": "MyLast"
} 
```

我想对这个对象进行字符串化，以便 ' 的价值变成`\'` 它可以是 's 或 'S 或 'anything

我正在使用 JSON.stringify(json_obj) 但它给了我字符串

```
"{"First":"MyName's","Last":"MyLast"}" 
```

你可以看到 MyName's 我想要这个 MyName\'s

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T14:57:57.010

如果您要拥有不止一次这样的值，请尝试使用正则表达式替换以防万一，

```
.stringify(data).replace(/'/g, "\\'") 
```

**演示：http:** [//jsfiddle.net/qMsyg/2/](http://jsfiddle.net/qMsyg/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T14:55:03.160

字符串化后，`json`只需应用`replace("'", "\'");`

```
JSON.stringify(json).replace("'", "\'"); 
```

或者您可以在方法中使用*[替换参数](https://developer.mozilla.org/en-US/docs/Using_native_JSON#The_replacer_parameter)*`stringify()`

```
JSON.stringify(json, function(key, value) {
   return value.replace("'", "\'");
}) 
```

* * *

**注意：** 正如@vega 所指出的，`replace("'", "\'")`只会**替换第一次出现。**如果您有更多值要转义，请使用正则表达式（如`replace(/'/g, "\\'")`）。

选择最适合您需求的那一款

# javascript - 传递回调时如何避免函数换行

> ID：12730017
> 
> 赞同：0
> 
> 时间：2012-10-04T14:51:55.900
> 
> 标签：javascript, oop, backbone.js

我想像这样将一个函数传递给主干的成功回调

```
this.model.fetch({
    success: this.setup
}); 
```

但是，这行不通，我最终不得不传递整个环境并包装在这样的函数中：

```
var that = this;
this.model.fetch({
    success: function(){
        that.setup();
    }
}); 
```

为什么我不能这样做？即使我像这样将 setup 函数绑定到它的父级`_.bind( this.setup, this );`，它仍然不会使用正确的 this （它的父级）。但前提是它没有包含在函数中......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:12:07.090

`_.bind`返回绑定到对象的函数，它不会修改原始函数（基本上它会创建您编写的包装函数）。

但是，您可以将此绑定函数作为回调传递

```
this.model.fetch({
    success: _.bind(this.setup, this);
}); 
```

或使用[`_.bindAll`](http://underscorejs.org/#bindAll)which 确实修改对象以使用绑定函数：

```
var V = Backbone.View.extend({
    initialize: function() {
        _.bindAll(this, "setup");

        this.model.fetch({
            success: this.setup
        });
    },
    setup: function() {

    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T15:12:39.760

它不起作用，因为“this”是您定义的对象（{成功：this.setup}）试试这个：

```
var that = this;
this.model.fetch({
      success: that.setup
    }
}); 
```

however, i dont like it too much, since event handlers are just that, they handle events, and then do stuff (like setup() method) also, in this case, you may lost object in the closure.

# php - PhpStorm 中的顺序变量赋值格式

> ID：12730019
> 
> 赞同：1
> 
> 时间：2012-10-04T14:52:02.523
> 
> 标签：php, phpstorm

目前在 PhpStorm 中使用“自动格式化”使用空格来对齐变量，例如

```
$objUser = new User();
$arrUserSongs = $objUser->Songs() 
```

至

```
$objUser      = new User();
$arrUserSongs = $objUser->Songs() 
```

是否可以使用“制表符”而不是空格，因为将 DIFF 与存储库一起使用可以使代码清晰 [使用点（空格转换为点）使其看起来很难看]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-05T12:33:34.060

经过几次搜索，我想出了如何调整它；你可以这样做：

**1\. 文件菜单。
1.设置。
2\. 编辑器选项卡。
3\. 代码风格
4\. PHP**

现在选择您要编辑的方案，然后：
转到**Wrapping and Braces**
向下滚动到**Assignment statement**并选中**Align Continuous assignments**

您可以在此处找到有关新更改的更多详细信息：
[PhpStorm 8 中的新的和更改的格式选项](https://blog.jetbrains.com/phpstorm/2014/06/new-and-changed-formatting-options-in-phpstorm-8/)

这是您的问题的副本：
[PHPStorm 9 align assignments in PHP](https://stackoverflow.com/questions/32787223/phpstorm-9-align-assignments-in-php)

# javascript - 对象不支持此属性或方法 javascript 错误

> ID：12730020
> 
> 赞同：1
> 
> 时间：2012-10-04T14:52:05.270
> 
> 标签：javascript, internet-explorer

我在 IE 8 中收到“对象不支持此属性或方法”错误。Firefox 中没有错误。

有人知道是什么原因造成的吗？

```
<script type="text/javascript">
    function callReport() {
      var sPath = $('input[name*="ReportPath"]').val();
      window.open(sPath);
      }
    $('div:last div.active').qtip({
      content: 'This is an active div element',
      show: 'mouseover',
      hide: 'mouseout'
    })
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T17:13:00.900

看起来 qTip 使用了一个名为的全局变量`tooltip`，这可能偶尔会导致 IE8 出现问题（可能只是在严格模式下）。在我的 JS 文件顶部声明`window.tooltip = null`使用 qTip 为我解决了这个问题，并且更清楚地表明该变量存在。

# c# - 将值转换为类型时在 Command.ExecuteScalar 中处理空值

> ID：12730021
> 
> 赞同：0
> 
> 时间：2012-10-04T14:52:08.620
> 
> 标签：c#, c#-4.0, .net-4.0, ado.net

我有一个执行查询并返回这样的标量值的函数：

```
 public T GetScalarValue<T>(string sql)
        {
            T t;
            try {
                SqlConnection conn = new SqlConnection("MY_SQL_SERVER_CONNECTION_STRING");
                conn.Open();
                SqlCommand cmd = new SqlCommand(sql, conn);
                t = (T)cmd.ExecuteScalar();
            }
            catch (Exception ex) {
                throw ex;
            }
            finally{
                if(conn.State == ConnectionState.Open)
                    conn.Close();
            }
            return t;
        } 
```

当我用给定的 SQL 调用这个函数时，我会得到结果：

```
int result = dal.GetScalarValue<int>("SELECT [schema_id] FROM SYS.SCHEMAS WHERE [name] = 'dbo'") 
```

由于查询返回一个 int 值，这可以正常工作，但是当我为不返回任何内容的查询调用相同的值时，我的函数将失败：

```
int result = dal.GetScalarValue<int>("SELECT [schema_id] FROM SYS.SCHEMAS WHERE [name] = 'Foooo'") 
```

由于 cmd.ExecuteScalar() 不返回任何结果，它会给出“对象引用未设置为对象的实例”异常。但我希望此函数返回给定类型的默认值（例如：对于 int，它应该返回 0、十进制 - 0.00，对于字符串 - 一个空值，对于 datetime - '1900-01-01' 等）。

如果您找到更好的解决方案，请告诉我。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:47:48.130

稍微重构您的代码以提高可读性：

```
public T GetScalarValue<T>(string sql) where T : struct
{
    string connectionString = "MY_SQL_SERVER_CONNECTION_STRING";

    using (var connection = new SqlConnection(connectionString))
    using (var command = new SqlCommand(sql, connection))
    {
        connection.Open();
        var obj = command.ExecuteScalar();

        return (obj != null) ? (T)obj : default(T);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:55:31.357

尝试这样的事情：

```
public T GetScalarValue<T>(string sql)
{
    T result = default(T);

    try
    {
        using (SqlConnection conn = new SqlConnection("MY_SQL_SERVER_CONNECTION_STRING"))
        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            conn.Open();

            var scalar = cmd.ExecuteScalar();

            if (scalar != null)
            {
                result = (T)Convert.ChangeType(scalar, typeof(T));

                // or result = (T)scalar    if that works better for you.
            }
        }

        return result;
    }
    catch (Exception ex)
    {
        // Log the exception maybe?
        return result;
    }
} 
```

这里我设置`result`为 type 的默认值`T`。接下来，如果有异常，那么我就返回`result`那里然后。因此，在您失败的示例中，将返回值 0。

编辑：

评论中提出了一个很好的观点。在我给你的异常处理程序中，我只是返回`result`. 最好记录或以某种方式记录异常，以便您知道是否出了问题。一个想法是使用诸如`NLog`或之类的记录器来记录异常`Log4Net`- 有很多选择。

# python - Python：使用已知 URL 访问 Windows 映射网络驱动器，但驱动器号未知

> ID：12730025
> 
> 赞同：6
> 
> 时间：2012-10-04T14:52:27.563
> 
> 标签：python

我正在尝试编写一个可以在远程 Linux 服务器上移动和复制文件的 Python 脚本。但是，我不能假设每个运行脚本（在 Windows 上）的人都会将此服务器映射到同一个字母。与其提示用户输入正确的字母，我只想通过其网络 URL（驱动器号映射到的那个）访问服务器。因此，例如，如果我映射了服务器的 URL

```
\\name-of-machine.site.company.com 
```

要成为驱动器 S:\，我想以与驱动器号无关的方式访问文件 S:\var\SomeFile.txt。我环顾四周，一般建议似乎是使用 UNC 表示法：

```
f = open(r"\\name-of-machine.site.company.com\var\SomeFile.txt", "w") 
```

但是如果我尝试这个，一个 IOError 说没有这样的文件或目录。如果我尝试使用服务器的 IP 地址（不是真实地址，但类似）：

```
f = open(r"\\10.1.123.149\var\SomeFile.txt", "w") 
```

长时间停顿后，我得到一个 IO 错误：“无效模式 ('w') 或文件名”。为什么这些符号不起作用，我如何通过其 URL 访问该服务器（理想情况下，就像它是本地驱动器一样）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-16T21:48:43.940

简单的解决方案是使用正斜杠来指定通用名称约定 (UNC)：

```
//HOST/share/path/to/file 
```

在另一个线程中找到了这个解决方案，并认为它在这里是相关的。请参阅下面的原始线程：

[使用 Python，如何访问 Windows 网络上的共享文件夹？](https://stackoverflow.com/questions/7169845/using-python-how-can-i-access-a-shared-folder-on-windows-network)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T15:54:53.457

不是一个非常优雅的解决方案，但您可以尝试所有驱动器？

从[这里](https://stackoverflow.com/questions/827371/is-there-a-way-to-list-all-the-available-drive-letters-in-python)：

```
import win32api

drives = win32api.GetLogicalDriveStrings()
drives = drives.split('\000')[:-1]
print drives 
```

然后，您可以`os.path.exists()`在每个驱动器上使用：\var\SomeFile.txt，直到找到正确的驱动器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:58:43.110

尝试使用短名称而不是完全限定名称。在你的例子中，那将是`\\name-of-machine\var\SomeFile.txt`.

编辑：

好的，现在我感觉自己像个假人——希望你能和我在一起！;)

机器名是`name-of-machine.site.company.com`，文件夹和文件名是`\var\SomeFile.txt`-- 共享名是什么？换句话说，你的路径应该是这样的：

```
\\name-of-machine.site.company.com\share_name\var\SomeFile.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:01:55.620

如果您可以为此任务保留驱动器号，并且您拥有特权，那么您可以从 python 运行“net use ...”，然后使用该固定驱动器号来读取/写入文件。

[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_use.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_use.mspx?mfr=true)

# java - Rally (Java)：如果测试用例中已经有一个测试结果，我不想添加测试结果

> ID：12730026
> 
> 赞同：0
> 
> 时间：2012-10-04T14:52:29.370
> 
> 标签：java, rally, testcase

我正在发送查询以检查是否存在与测试用例关联的测试用例结果。我正在使用这个：

```
 QueryRequest c = new QueryRequest("testcaseresult");
    c.setFetch(new Fetch("testcase"));
    c.setQueryFilter(new QueryFilter("testcase", "=", testCaseRef));
    QueryResponse cc = r.query(c); 
```

//String testresultRef = cc.getResults().get(0).getAsJsonObject().get("_ref").toString();

仅当到目前为止测试用例中没有测试用例结果时，我才想创建一个新的测试用例结果。我如何使用查询来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:38:53.307

我认为您在进行后续查询时走在了正确的轨道上。但是，您无法查询 Ref。但是，由于您有 ref，并且可能也有 TestCase JsonObject，因此您可以执行以下操作，您可以查询父 TestCase 的 FormattedID：

```
 // Query for Test Case to which we want to add results
    QueryRequest testCaseRequest = new QueryRequest("TestCase");
    testCaseRequest.setFetch(new Fetch("FormattedID","Name"));
    testCaseRequest.setQueryFilter(new QueryFilter("FormattedID", "=", "TC4"));
    QueryResponse testCaseQueryResponse = restApi.query(testCaseRequest);
    JsonObject testCaseJsonObject = testCaseQueryResponse.getResults().get(0).getAsJsonObject();
    String testCaseRef = testCaseQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").toString();
    String testCaseFormattedID = testCaseQueryResponse.getResults().get(0).getAsJsonObject.get("FormattedID").toString();

    // Query for Test Case Results that are associated to this particular Test Case
    QueryRequest testCaseResultsRequest = new QueryRequest("TestCaseResult");
    testCaseResultsRequest.setFetch(new Fetch("Build","TestCase","Verdict","FormattedID"));
    testCaseResultsRequest.setQueryFilter(new QueryFilter("TestCase.FormattedID", "=", testCaseFormattedID));
    QueryResponse testCaseResultResponse = restApi.query(testCaseResultsRequest);
    int numberTestCaseResults = testCaseResultResponse.getTotalResultCount(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:20:31.287

谢谢马克。这就说得通了。但是我找到了另一种方法，如下所示：

```
 try{
    QueryRequest c = new QueryRequest("testcaseresult");
    c.setFetch(new Fetch("testcase"));
    c.setQueryFilter(new QueryFilter("testcase", "=", testCaseRef));
    QueryResponse cc = r.query(c);
    String testresultRef = cc.getResults().get(0).getAsJsonObject().get("_ref").toString();
} catch(IndexOutOfBoundsException e){
    //Create a testcaseresult here.
} 
```

我使用了一个 try-catch 块。我在 try 块中查询测试结果。如果这抛出一个IndexOutofboundexception，则意味着没有这样的测试结果。在这种情况下，我可以在 catch 块中创建一个新的测试结果。

# visual-studio - 是否会像 Moles 一样在 Visual Studio 的“Ultimate”版本之外提供 Fakes？

> ID：12730029
> 
> 赞同：3
> 
> 时间：2012-10-04T14:52:31.807
> 
> 标签：visual-studio, moles, microsoft-fakes

有谁知道是否有意在低于 Ultimate 的 Visual Studio 版本上提供 Fakes？

假货似乎被宣传为取代 Moles，但如果它只能在 Ultimate 中使用，大多数 Moles 用户将无法使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:09:52.690

不。在发布此答案时，Fakes 仅在 Visual Studio 2012 Ultimate 中。这可能会在未来的版本和更新中发生变化。

# r - 调用情节实际上并不产生情节

> ID：12730030
> 
> 赞同：1
> 
> 时间：2012-10-04T14:52:32.653
> 
> 标签：r

请参阅下面的循环 - 它调用 plot k(k-1)/2 次，但实际上没有生成任何图。但是，如果我更改代码以手动调用图（例如 plot(my_tree,c(1,2 ),..)，地块已生成。）

my_tree 是一个 GBM 对象。请参阅下面的完整代码

```
#there is nothing wrong with this code, but yet it does not work
for (i in my_tree$var.names) {
        for (j in my_tree$var.names) {
                if (i < j) plot(my_tree, c(i, j), n.trees=best.iter)
        }
} 
```

==== 下面的完整程序

```
pdf("demo.pdf")

N <- 100000
alldata <- data.frame();
train <- factor( ifelse(runif(N)<0.5, 'T', 'V'))
X1 <- rnorm(N);
X2 <- rnorm(N);
X3 <- runif(N);
X4 <- rpois(N, lambda=4);
linear.pred <- -3 + 0.25*X1 + 0.125*X2 - X3 + X4**abs(X1)
temp <- binomial()
y <- rbinom(N, 1, p=temp$linkinv(linear.pred))

alldata <- data.frame(train,X1,X2,X3,X4,y)
rm(train,X1,X2,X3,X4,y,linear.pred)

train <- alldata[alldata$train=='T',]

library(gbm)
my_tree<-gbm(y ~ X1 + X2 + X3 + X4,
    distribution="bernoulli",
    data=train,
    train.fraction=0.5,
    interaction.depth=8,
    n.trees=300,
    shrinkage=0.1,
    verbose=TRUE)

best.iter <- gbm.perf(my_tree, method="test")
print(best.iter)

summary(my_tree, ntrees=best.iter)

# make one and two ways
for (i in my_tree$var.names) {
        plot(my_tree, i, best.iter)      
}

#there is nothing wrong with this code, but yet it does not work
for (i in my_tree$var.names) {
        for (j in my_tree$var.names) {
                if (i < j) plot(my_tree, c(i, j), n.trees=best.iter)
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:34:22.497

如果您查看帮助页面，`plot.gbm`它提到使用了格子图，那么这很可能是 FAQ 7.22 的一个案例。尝试“打印”这些图。

# streaming - 如何在 RTSPserver 中设置帧速率

> ID：12730039
> 
> 赞同：1
> 
> 时间：2012-10-04T14:53:06.580
> 
> 标签：streaming, live, rtsp, live555

我使用 Live555 创建了 RTSPServer 应用程序。在此应用程序服务器中，从 Live media Streamer 应用程序接收实时流，该应用程序又从数码相机获取流。

有没有办法在服务器端设置帧速率，以便我的服务器可以根据接收器的要求以可变帧速率流式传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:52:56.693

不，帧速率取决于传入的源，即在您的情况下是相机。此外，由于每个接收器可能有不同的要求，您将如何处理多个接收器？

# asp.net-mvc - Azure ACS WIF 从 MVC 客户端访问原始 SSO 令牌

> ID：12730040
> 
> 赞同：0
> 
> 时间：2012-10-04T14:53:13.030
> 
> 标签：asp.net-mvc, azure, wif, acs

我们正在使用带有 MVC4 的 Azure ACS，并通过我们的身份提供者 (IP) 成功地验证了我们的依赖方 (RP)。然后，我必须通过不了解 ACS 的现有接口访问相同的 IP：它需要在协议握手期间提供给 ACS 的原始 SSO 令牌。

当我摆弄这个场景时，我准确地看到这个 SSO 令牌在与 ACS 的身份验证握手的初始阶段被多次发送到我们的 RP，但是当我在我的 MVC 控制器中登录后访问 Thread.CurrentPrincipal.Identity 时，有即使我将 ACS 设置为保留所有 bootsrapToken，在我的请求上下文中的任何地方都没有原始 SSO 令牌的踪迹。ACS 已将初始令牌替换为 FedAuth cookie。我来晚了:-)

所以看起来我需要访问 WS-Federation 管道（WSFAM 或 SAM）的早期阶段之一，以从请求标头中提取原始 IP sso-token 并将其保留以备后用。

谁能给我们一个提示，告诉我们如何在我们的 MVC4 服务器中最好地访问 ACS 握手的适当早期阶段？

非常感谢！R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:43:48.310

好的，我通过设置 MVC 客户端 (RP) 以在没有 Azure-ACS 的情况下使用 WIF-WS-Federation 来解决这个问题。那时，我注意到在声明包中传输了几个声明名称空间。一切都在那里：ACS 很好地为我过滤了除标准名称空间之外的所有内容。因此，在知道命名空间和声明标签之后，我回到 ACS 管理门户，简单地将它们配置到输入和输出规则中，然后将它们传递给我的 RP。

# sql - 要连接的列的位置对性能有影响吗？

> ID：12730048
> 
> 赞同：2
> 
> 时间：2012-10-04T14:53:29.337
> 
> 标签：sql, linq-to-entities, sql-server-2008-r2

执行 LINQ 语句时，要连接的列的位置对性能有影响吗？

例如，以下哪个查询运行最快，为什么？

一种）

```
 var query = from o in entities.orders
                join i in entities.order_items
                on o.OrderId equals i.OrderId
                where o.AddedSalesOrder == 0
                select new
                       {
                           i.ShippingFirstName,
                           i.ShippingLastName,
                           i.Sku,
                           i.Quantity,
                           i.ItemPrice,
                           o.TotalShippingCost,
                           o.OrderId,
                           o.OrderCreateDate
                        }; 
```

二）

```
 var query = from o in entities.orders
                join i in entities.order_items
                on o.OrderId equals i.OrderId
                where o.AddedSalesOrder == 0
                select new
                       {                          
                           o.TotalShippingCost,
                           o.OrderId,
                           o.OrderCreateDate,
                           i.ShippingFirstName,
                           i.ShippingLastName,
                           i.Sku,
                           i.Quantity,
                           i.ItemPrice
                        }; 
```

C）

```
var query = from o in entities.orders
                join i in entities.order_items
                on o.OrderId equals i.OrderId
                where o.AddedSalesOrder == 0
                select new
                       {                        
                           o.OrderCreateDate,
                           i.ShippingFirstName,
                           i.ShippingLastName,
                           o.TotalShippingCost,
                           o.OrderId,                          
                           i.Sku,
                           i.Quantity,
                           i.ItemPrice
                        }; 
```

我期望查询 B 是最有效的，因为连接列的放置导致生成更清晰的 SQL 代码，但我可能错了。

如果重要，查询将在 SQL Server 2008r2 数据库上运行。

**- 编辑 -**

对于它的价值，我通过 C# 运行了一个快速（并且肯定是非绝对的）基准测试，以查看每个场景下的性能表现。我的发现如下：

```
a) 297.61 millisecond avg over 100000 iterations
b) 245.90 millisecond avg over 100000 iterations
c) 304.16 millisecond avg over 100000 iterations 
```

我用来测试的代码如下：

```
var sw = new Stopwatch();
List<long> totalTime = new List<long>();
for (int u = 0; u < 100000; u++)
{
     sw.Start();
     var entities = new Entities();
     var query = from o in entities.orders
                 join i in entities.order_items
                 on o.OrderId equals i.OrderId
                 where o.AddedSalesOrder == 1
                 select new
                        {
                            i.ShippingFirstName,
                            i.ShippingLastName,
                            i.Sku,
                            i.Quantity,
                            i.ItemPrice,
                            o.TotalShippingCost,
                            o.OrderId,
                            o.OrderCreateDate
                        };
     var qc = query.Count();
     sw.Stop();
     totalTime.Add(sw.ElapsedMilliseconds);
     sw.Reset();
}
Console.WriteLine("Average time in Milliseconds: {0}", totalTime.Average()); 
```

似乎连接列的顺序可能会影响执行速度 - 或者正如所指出的，我的数据库可能效率低下:)

无论如何，我想将发现发布给任何觉得这很有趣的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:57:47.767

在 SQL 中，连接和列的顺序*通常*无关紧要：如果你有一个好的 SQL 优化器，并且你的数据库有很好的统计数据，那么数据库引擎会重组你的查询以获得最佳性能。

*一般来说*，对于 LINQ 来说*并非*如此：与 SQL 不同，语句不会重新排序以执行，而是按照它们输入的相同顺序懒惰地执行。如果您正在获取空间分离的数据，或者选择了错误的合并顺序，您的执行速度将会受到影响。

好消息是你应该是安全的。对于 LINQ to SQL 或 LINQ to Entities，虽然生成的 SQL（通常）与您键入的顺序大致相同，但您仍然会使用 SQL 数据库的优化引擎。在这种情况下，连接和列名的顺序*通常*无关紧要。

与往常一样，糟糕的统计数据或糟糕的数据库优化器仍然会咬你一口。在这种情况下，最好不要在 StackOverflow 上询问，而是通过拆分 SQL Profiler 来检查实际使用了哪些查询计划。

# neural-network - Pybrain 中的词分类：输入向量中不同数量的序列

> ID：12730051
> 
> 赞同：0
> 
> 时间：2012-10-04T14:53:35.467
> 
> 标签：neural-network, pybrain

我正在尝试使用 PyBrain 实现一个简单的单个数字分类器。我有许多记录的数字 0 到 9 示例的训练数据，并编写了一个脚本来为每个示例提取 MFCC。为了简单起见（目前），我只计算 13 个系数，并且每 10 毫秒对音频文件进行一次采样。由于每个记录的训练示例都具有不同的持续时间，例如，所有“零”集合的样本数量会根据音频的长度而变化。因此，对于“零”的一些示例，我有一个形状为 (67,13) 的 MFCC 训练向量，而对于其他人，它可能是 (44, 13)。

*问题是在 PyBrain 中创建数据集时，输入向量的维度必须是统一的，并且应该包含与列相同的行数。*

是否有某种方法可以**定义数据集，以便输入向量具有固定数量的列**（13 个 MFCC）**但可变的行数**（取决于从信号中获取的样本数量）？还是我这样做完全错了？

我已经在网上和 Stack Overflow 上进行了搜索和搜索，但无法找到答案。我可以遵循并实现教程中的 Pybrain 示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:23:42.097

哦。显然，我需要使用特定数字的所有向量来估计多维概率密度函数。

# magento - Magento Ajax 登录会话问题

> ID：12730057
> 
> 赞同：0
> 
> 时间：2012-10-04T14:54:01.007
> 
> 标签：magento

我正在尝试创建自己的登录页面，该页面在花式弹出窗口中使用 Ajax。我创建了自己的模块来扩展默认客户 AccountController。它似乎工作正常，但是当用户成功登录时，控制器将客户数据保存在会话中，但是当我返回主页时，客户会话数据不再存在。我需要在返回时设置会话吗？

我的控制器在下面

```
 public function loginPostAction()
{

   $session = Mage::getSingleton('customer/session');

    if ($this->getRequest()->isPost()) {
        $login = $this->getRequest()->getPost('login');

         Mage::log($login['username'].$login['password']);
        if (!empty($login['username']) && !empty($login['password'])) {

            try {
                $session->login($login['username'], $login['password']);
               // Mage::log($session->login($login['username'], $login['password']));
                $this->_welcomeCustomer($session->getCustomer(), true);
                if ($session->getCustomer()->getIsJustConfirmed()) {
                    $this->_welcomeCustomer($session->getCustomer(), true);
                    $response =  "TRUE";
                }
            } catch (Mage_Core_Exception $e) {
                switch ($e->getCode()) {
                    case Mage_Customer_Model_Customer::EXCEPTION_EMAIL_NOT_CONFIRMED:
                        $value = Mage::helper('customer')->getEmailConfirmationUrl($login['username']);
                        Mage::log("EXCEPTION_EMAIL_NOT_CONFIRMED");
                        $message = Mage::helper('customer')->__('This account is not confirmed. <a href="%s">Click here</a> to resend confirmation email.', $value);
                        $response = "This account is not confirmed";
                        break;
                    case Mage_Customer_Model_Customer::EXCEPTION_INVALID_EMAIL_OR_PASSWORD:
                        $message = $e->getMessage();
                        $response = "Invalid email or password";
                        Mage::log("EXCEPTION_INVALID_EMAIL_OR_PASSWORD");
                        break;
                    default:
                        $message = $e->getMessage();
                         Mage::log("EXCEPTION_default");
                }
                //$session->addError($message);
                Mage::log("about setting the username");
                $session->setUsername($login['username']);
            } catch (Exception $e) {
                // Mage::logException($e); // PA DSS violation: this exception log can disclose customer password
            }
        } else {
            Mage::log("in the else");
            $session->addError($this->__('Login and password are required.'));
            $response = 'Login and password are required.';
        }
    }
    Mage::log($session->getCustomer());

    //echo $response;
    //$this->_loginPostRedirect();
} 
```

任何帮助将不胜感激

通过更新 config.xml 文件修复。我没有覆盖客户控制器

```
<router>
    <customer>
            <args>
                <modules>
                    <companyname_loginform before="Mage_Customer">companyname_Loginform</companyname_loginform>
                </modules>
            </args>
        </customer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T22:50:44.850

如果有人还需要magento ajax登录功能，我可以推荐我们公司开发的magento插件。这是链接 - [https://store.plumrocket.com/magento-extensions/popup-login-magento-extension.html](https://store.plumrocket.com/magento-extensions/popup-login-magento-extension.html)

我们也有文档和论坛。随时问我们任何问题。

谢谢！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T18:47:17.863

我发现了这个问题。我只是扩展客户帐户控制器 - 我没有从 config.xml 正确覆盖它

# jquery-mobile - 没有滚动条时隐藏页眉和/或页脚

> ID：12730058
> 
> 赞同：0
> 
> 时间：2012-10-04T14:54:08.500
> 
> 标签：jquery-mobile

在 jQuery Mobile 文档中，我找到了以下代码：

```
$("[data-position='fixed']").fixedtoolbar('show');
$("[data-position='fixed']").fixedtoolbar('hide');
$("[data-position='fixed']").fixedtoolbar('toggle') 
```

这样做的目的是隐藏或显示页面的页眉和/或页脚。

经过一些测试和实验，我发现只有当页面上的内容足够大以在页面上获得垂直滚动条时，此代码才有效。

对于我的项目，我需要能够隐藏和/或显示没有滚动条的页面的页眉和页脚（因为没有足够的内容，或者因为自定义滚动条插件）。有谁知道如何使用最少的额外 CSS/JavaScript 来实现这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:15:22.033

```
 $("div:jqmData(role='footer')").show();
     $("div:jqmData(role='footer')").hide(); 
```

或者简单地使用页脚的 id 并使用 .show() 或 .hide()

希望它有所帮助

# sql - sql全文搜索特定行

> ID：12730060
> 
> 赞同：0
> 
> 时间：2012-10-04T14:54:15.280
> 
> 标签：sql, full-text-search, rows

我正在建立一个网站。我正在使用 sql 来存储我的数据。我可以在特定行上使用全文搜索（由用户偏好动态确定）吗？这意味着我想在自由文本搜索之前使用“where”子句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:18:07.683

不，您不能在对其运行全文查询之前选择行的子集。如果您查看生成的查询计划，您将看到全文执行位于树的底部，结果被过滤到 WHERE 子句。

由于行选择是“动态确定的”，因此在表视图上创建 ft-index 似乎也不是一种选择。

# jquery - 每次用户单击输入按钮时选择输入文件后提交表单

> ID：12730064
> 
> 赞同：0
> 
> 时间：2012-10-04T14:54:33.740
> 
> 标签：jquery, forms, file-upload, submit

我在 iFrame 中有一个无法直接修改的表单（虽然它在同一个域上），所以我使用 jQuery 来做一些事情。这就是我现在正在做的事情：

```
$('#staffels_uploaden_frame', window.parent.document).contents().find("input[type=file]").change(function() { 
        // select the form and submit
        $(this).closest("form").submit();
    }); 
```

我有一个带有文件输入的表单，在您单击输入按钮选择文件后，提交表单并上传文件。但是，这只适用于一次：如果您再次按下输入按钮，则不会提交表单，尽管我认为 .change 事件会涵盖这一点。我可以修改此代码以在您每次浏览文件时提交表单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:50:43.940

我通过将上面的代码放在 .load 方法中解决了这个问题。像这样：

```
$('#staffels_uploaden_frame', window.parent.document).load(function() {
        // select the file input (using a id would be faster)
        $(this).contents().find("input[type=file]").change(function() {
            // select the form and submit
            $(this).closest("form").submit();   
}); 
```

# c++ - 模板赋值运算符和自检

> ID：12730066
> 
> 赞同：1
> 
> 时间：2012-10-04T14:54:39.803
> 
> 标签：c++, templates, variable-assignment

我正在阅读一本关于模板编程的书，其中一个示例具有在模板赋值运算符中进行自检的代码。基本上它是这样的：

```
template <typename T>
class Foo
{
public:

    template <typename O>
    Foo<T> operator= (const Foo<O> & other)
    {
        if ((void *)this == (void *)&other)
        {
            std::cerr << "success" << std::endl;
        }
        else
        {
            std::cerr << "failure" << std::endl;
        }
        return *this
    }
}; 
```

现在，据我了解，由于模板化赋值运算符不会阻止生成默认赋值运算符，因此对于 O = T 的情况，将始终选择默认赋值运算符而不是模板化版本。也就是说，在这种情况下，永远不会出现 O = T。

我想知道的是我对此的理解是否正确。如果是，是否存在某种棘手的层次结构（例如，如果我从其他东西派生 Foo 或者如果它是从其他东西派生的）赋值运算符将打印出“成功”？

我已经尝试了几件事，但我真的无法做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:05:50.353

要么你是对的，要么 MSVC 11 和 g++ 4.7.1 都搞错了。

即，通常不会调用模板化赋值运算符：将调用自动生成的复制赋值运算符。

要输出“成功”，请这样做，并希望编译器使用空基类优化（EBO）：

```
#include <iostream>

template <typename T>
class Foo;

template<> class Foo<void> {};

template <typename T>
class Foo: public Foo< void >
{
public:

    template <typename O>
    void operator=( const Foo<O> & other )
    {
        if ((void *)this == (void *)&other)
        {
            std::cerr << "success" << std::endl;
        }
        else
        {
            std::cerr << "failure" << std::endl;
        }
    }
};

int main()
{
    Foo<int> a, b;

    Foo<void>& v = a;
    a = v;
} 
```

# c4 - 将 C4iOS 与 UIKit 组件和故事板集成

> ID：12730067
> 
> 赞同：2
> 
> 时间：2012-10-04T14:54:41.390
> 
> 标签：c4

C4iOS可以在视图中使用吗？我想在视图中使用 C4 并将其与其他 UIKIT 组件集成。所有模板和示例都使用特殊的窗口和应用程序委托，因此 c4 草图占据了所有窗口。是否可以在 UIView 中显示草图作为应用程序的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:23:44.500

是的，可以。

事实上，C4 中的所有可见对象实际上都是视图（UIControl 的子类），因此您可以使用该`[object addSubview:]`方法将它们添加到其他 UIKit 组件中。

我实际上并没有在自己的窗口或空间中使用 C4Canvas 实现，但由于它本质上是一个 UIView 并且 C4WorkSpace 是一个 UIViewController 那么它当然可以这样做。

* * *

我构建了一个 iOS 选项卡式应用程序，它使用 2 个 C4WorkSpace 对象作为主视图控制器。

[https://github.com/C4Code/tabbed](https://github.com/C4Code/tabbed)

这个项目表明它是可能的，有一点点黑客才能让它工作。我没有时间写下我现在运行它的过程，所以我希望这暂时还可以。

# c# - 如何创建小帮助 - 关于按钮以显示应用程序版本

> ID：12730068
> 
> 赞同：0
> 
> 时间：2012-10-04T14:54:46.017
> 
> 标签：c#, winforms

我有 Winform 应用程序，我想添加带有 about 选项的小帮助按钮以显示我的应用程序版本号（我正在使用 Application.ProductVersion），我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:07:49.703

首先，要激活帮助按钮，请转到您的表单属性。将 MaximizeBox 和 MinimizeBox 设置为 false 并将 HelpButton 设置为 true。这将显示帮助按钮。然后转到表单的事件并双击 HelpButtonClicked。在此函数中，您可以放置​​用于显示版本号的任何代码。

我还建议您使用： System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:59:32.053

我认为您正在寻找 System.Reflection.Assembly.GetExecutingAssembly().GetName().Version

# mysql - 我需要一种在 MySQL 中使用列值作为列名的方法

> ID：12730070
> 
> 赞同：0
> 
> 时间：2012-10-04T14:54:46.567
> 
> 标签：mysql, sql, pivot

我正在尝试创建一个嵌套结构；

```
id | degerAdi    | deger
_____________________________
1  | asd         | 1
2  | asd         | 2
3  | asd         | 345
4  | rty         | 6765
5  | rty         | ljkl
6  | hhh         | 567
7  | hjh         | 5674
8  | ffgu        | 567
9  | qwe         | 345345
10 | qwe         | fghfghfh
11 | qwe         | ghghjghjgj 
```

我需要一种方法来获取结果，例如将 'degerAdi' colmn 的值作为 colmn 名称，并将 'deger' colmn 的关联值作为这些 colms 的值（行）。

（对不起我糟糕的英语语言技能。）我需要这样的结果；

```
asd    | rty   | hhh  | hjh  | ffgu | qwe
-----------------------------------------------------
1      | 6765  | 567  | 5674 | 567  | 345345
2      | 6765  | NULL | NULL | NULL | fghfghfh
345    | NULL  | NULL | NULL | NULL | ghghjghjgj 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:10:41.213

您正在尝试`PIVOT`数据，但 MySQL 没有`PIVOT`功能。同样为了使这更容易，您需要根据`degerAdi`值对数据进行分区以应用行号。如果您有已知数量的列，则可以使用：

```
select rn,
  max(case when DEGERADI = 'asd' then DEGER end) asd,
  max(case when DEGERADI = 'rty' then DEGER end) rty,
  max(case when DEGERADI = 'hhh' then DEGER end) hhh,
  max(case when DEGERADI = 'hjh' then DEGER end) hjh,
  max(case when DEGERADI = 'ffgu' then DEGER end) ffgu,
  max(case when DEGERADI = 'qwe' then DEGER end) qwe
from
(
  select id, degerAdi, deger,
   @num := if(@degerAdi = `degerAdi`, @num + 1, 1) as rn,
   @degerAdi := `degerAdi` as dummy
  from table1
) x
group by rn; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/50770/12)

如果您有未知数量的列，那么您将需要使用准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when degerAdi = ''',
      degerAdi,
      ''' then deger end) AS ',
      degerAdi
    )
  ) INTO @sql
FROM Table1;

SET @sql 
  = CONCAT('SELECT rn, ', @sql, ' 
           from
           (
             select id, degerAdi, deger,
              @num := if(@degerAdi = `degerAdi`, @num + 1, 1) as rn,
              @degerAdi := `degerAdi` as dummy
             from table1
           ) x
           group by rn');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/50770/9)

# sql - 将时间戳截断为任意间隔

> ID：12730072
> 
> 赞同：3
> 
> 时间：2012-10-04T14:54:50.283
> 
> 标签：sql, postgresql, datetime, aggregate-functions

我想`my_values`在时间轴上以比数据库中更低的分辨率进行绘图。我使用类似下面的 SQL 来获取每个时间间隔（例如，一个小时）的平均值：

```
SELECT DATE_TRUNC('hour', my_timestamps) AS my_time_lowres
     , AVG(my_values) 
FROM my_table 
GROUP BY my_time_lowres 
```

* * *

使用`date_trunc()`它可以在一定程度上降低时间戳的分辨率（根据[文档](http://www.postgresql.org/docs/9.2/static/functions-datetime.html)）：

```
select date_trunc('hour', timestamp '2001-02-16 20:38:40') 
-- the output is: 2001-02-16 20:00:00 
```

这样，我可以对以下间隔大小（以及一些更大/更小的大小）执行此操作：

```
...
second
minute
hour
day
week
... 
```

* * *

有没有办法在其他时间间隔内实现这一点，例如 3 小时、6 小时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T16:34:03.933

考虑这个演示，以将时间戳降低到 15 分钟的分辨率并汇总产生的欺骗：

```
WITH tbl(id, ts) AS ( VALUES
    (1::int, '2012-10-04 00:00:00'::timestamp)
   ,(2, '2012-10-04 18:23:01')
   ,(3, '2012-10-04 18:30:00')
   ,(4, '2012-10-04 18:52:33')
   ,(5, '2012-10-04 18:55:01')
   ,(6, '2012-10-04 18:59:59')
   ,(7, '2012-10-05 11:01:01')
   )
SELECT to_timestamp((extract(epoch FROM ts)::bigint / 900)*900)::timestamp
                                                            AS lower_bound
     , to_timestamp(avg(extract(epoch FROM ts)))::timestamp AS avg_ts
     , count(*) AS ct
FROM   tbl
GROUP  BY 1
ORDER  BY 1; 
```

结果：

```
 lower_bound     |       avg_ts        | ct
---------------------+---------------------+----
 2012-10-04 00:00:00 | 2012-10-04 00:00:00 |  1
 2012-10-04 18:15:00 | 2012-10-04 18:23:01 |  1
 2012-10-04 18:30:00 | 2012-10-04 18:30:00 |  1
 2012-10-04 18:45:00 | 2012-10-04 18:55:51 |  3
 2012-10-05 11:00:00 | 2012-10-05 11:01:01 |  1 
```

诀窍是提取像@Michael 已经发布的unix 纪元。整数除法将它们集中在所选分辨率的桶中，因为小数位被截断。

我除以 900，因为 15 分钟 = 900 秒。

乘以相同的数字得到结果`lower_bound`。将 unix 纪元转换回带有[**`to_timestamp()`**](http://www.postgresql.org/docs/current/interactive/functions-formatting.html).

这对于可以在十进制系统中没有小数位表示的间隔非常有用。要获得更多功能，请使用[**`width_bucket()`**](http://www.postgresql.org/docs/current/interactive/functions-math.html)我在[最近密切相关的答案](https://stackoverflow.com/a/12642239/939860)中演示的经常被忽视的功能。那里有更多解释、链接和 sqlfiddle 演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:57:28.610

您可以转换为自纪元以来的秒数，然后将整数除以 3*3600、6*3600 等。

# java - 如何更改 Jersey 创建的错误消息？

> ID：12730078
> 
> 赞同：4
> 
> 时间：2012-10-04T14:55:02.200
> 
> 标签：java, http, jersey

我有一个 Jersey 应用程序，它通过我们公司的网站漏洞工具运行。它带来了一个非常奇怪的漏洞。如果您发送此标头：

```
"*/*'"!@$^*\/:;.,?{}[]`~-_<sCrIpT>alert(81363)</sCrIpT>" 
```

您从球衣的 BODY 中收到一条错误消息：

```
The HTTP header field "Accept" with value "*/*'"!@$^*\/:;.,?{}[]`~-_<sCrIpT>alert(56224)</sCrIpT>" could not be parsed. 
```

这对我们的安全团队来说是不可接受的。它确实以“文本/纯文本”的形式返回，这是正确的，但我需要更改消息。有什么办法可以做到这一点？

这是在 Tomcat 上运行的，我使用的是 Jersey 1.14。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:04:31.290

这是来自泽西队的帕维尔：

您应该能够从您的 servlet 过滤器中清除实体，或者您可以在 Jersey 中注册 ContainerResponseFilter，例如：

```
public class PurgeErrorEntityResponseFilter implements ContainerResponseFilter {
    @Override
    public ContainerResponse filter(ContainerRequest request, ContainerResponse response) {
        if(response.getStatus() == 400) {
            response.setEntity(null);
        }
        return response;
    }
} 
```

和 web.xml：

```
 <init-param>
       <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
       <param-value>x.y.z.PurgeErrorEntityResponseFilter</param-value>
   </init-param> 
```

这对我有用。我这样做了：

```
response.setEntity(StringEscapeUtils.escapeHtml(response.getEntity().toString())); 
```

它逃脱了错误消息。谢谢帕维尔！

# tridion - 在 SDL Tridion 中发布组件/页面

> ID：12730081
> 
> 赞同：1
> 
> 时间：2012-10-04T14:55:06.437
> 
> 标签：tridion, tridion-content-delivery

我有一个关于在 SDL Tridion R5.3 中发布项目的问题。

当我们发布一个项目时，比如说一个组件或页面——所有相关的项目也会被发布。好吧-我的问题是，如果该组件正在旧版本的页面中使用（而不是在当前版本的页面中），那么发布过程会是什么样子？

我可以说该页面现在没有使用该组件，因此不应发布该页面。会在发布的第一阶段（传输中）还是在后期避免此页面？

只是想得到一个专家的想法。我正在尝试提高 Tridion R5.3 中的发布性能。有多达 500 个与单个组件发布相关的相关项目，它也包含相关的旧版本项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:58:54.920

当您发布组件时，您还将重新发布（注意**“重新”**）：

*   使用该组件并与非动态 CT 配对的所有页面都将重新发布。
*   使用已发布组件的所有组件。

您不会重新发布：

*   在旧版本上使用该组件的页面
*   未发布的页面

另请注意，当您发布页面时，默认功能不会重新发布其他页面

就性能而言，此发布传播的主要风险是您发布了一个组件，该组件用于其他组件，而第二个组件用于第三个组件......等等。用一个无辜的组件发布触发整个站点的重新发布。

这就是说，当心组件集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T16:31:45.400

Here is the documentation explains on what get's published or unpublished. Even though the document is for 2011 SP1, applicable for previous Tridion versions.

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_56BCD7B2A1994C76B940751B2458D8E0](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_56BCD7B2A1994C76B940751B2458D8E0)

**Publish/RePublish:**

*   If a Component has already been published and is embedded on a Page, all published Pages in which the Component is used are republished.
*   If a Component is based on an allowed Schema that is used in a dynamic Component Template(s), only the dynamic Component Presentation(s) is/are published.
*   Any Components that link to the Component you publish are also republished.

**Unpublish:**

*   All published Pages which use the Component are unpublished.
*   If a Component is used in one or more dynamic Component Presentations, the dynamic Component Presentations are unpublished.

# jquery - 仅将 div 限制为它自己的父级

> ID：12730082
> 
> 赞同：2
> 
> 时间：2012-10-04T14:55:10.357
> 
> 标签：jquery, html, css

我正在做这个输出，它已经像我想要的那样运行了。这就像`div`使用箭头键移动 a ，但我的问题是当我按箭头键移动时，颜色 gray`div`超过其自己的 parent `div`。我想要实现的是，即使我不断按下箭头键，灰色`div`也无法走出其父级（有红色边框）。`div`

这是演示[jsFiddle](http://jsfiddle.net/4bpgp/15/)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:09:52.977

将您的代码更改为

```
$(function(){
    var spaceship = $('<div id="spaceshipContainer"/>'); // store reference to actual jQuery object
    var cS = $('#centerSpace').append(spaceship);
    var limits = {width: cS.width()-spaceship.width() , height:cS.height()-spaceship.height()}; // pre-calculate the limits

    $(document).keypress(function(e){
        var position = $('#spaceshipContainer').position();

        switch(e.keyCode){

            case 37:
                position.left -= 10;
                break;
            case 38:
                position.top -= 10;
                break;
            case 39:
                position.left += 10;
                break;
            case 40:
                position.top += 10;
                break;
        }

        position.left = Math.max(Math.min(position.left, limits.width),0); // enforce horizontal limits
        position.top = Math.max(Math.min(position.top, limits.height),0); // enforce vertical limits

        spaceship.css({left:position.left, top:position.top});
    });
}); 
```

还添加`position:relative`到`#centerSpace`

**演示在** [http://jsfiddle.net/4bpgp/17/](http://jsfiddle.net/4bpgp/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:05:09.847

为什么不在jQuery上使用[可拖动？](http://jqueryui.com/demos/draggable/#constrain-movement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:05:26.680

您可以获取容器位置并检查灰色框的位置是否不超过它。

这是[jsFiddle](http://jsfiddle.net/mahsa_999/4bpgp/39/)工作示例。

```
$(function(){
var spaceship = '<div id="spaceshipContainer"></div>';
$('#centerSpace').append(spaceship);
var parent_position = $('#centerSpace').position();
var parent_right = parent_position.left + $('#centerSpace').width() -$('#spaceshipContainer').width();
var parent_buttom= parent_position.top + $('#centerSpace').height()-$('#spaceshipContainer').height();
$(document).keypress(function(e){

    var position = $('#spaceshipContainer').position();

    switch(e.keyCode){

        case 37:

            if( position.left - 10 >= parent_position.left)
                $('#spaceshipContainer').css('left', position.left - 10 + 'px');
            break;
        case 38:
            if( position.top - 10 >= parent_position.top)
            $('#spaceshipContainer').css('top', position.top - 10 + 'px');
            break;
        case 39:
            if( position.left  <= parent_right)
            $('#spaceshipContainer').css('left', position.left + 10 + 'px');
            break;
        case 40:
            if( position.top<= parent_buttom)
            $('#spaceshipContainer').css('top', position.top + 10 + 'px');
            break;
    }
 });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:06:59.120

在您的按键回调中，您只需添加一些如下逻辑：

```
var $ship = $('#spaceshipContainer');

if ($ship.offset().top < $ship.parent().offset().top) {
    return false;
}
// repeat for left, right, bottom 
```

我选择`offset`这样 x/y 坐标将相对于文档。

# iphone - 添加 libsqlite3.dylib 时出现 SQLCipher 错误

> ID：12730086
> 
> 赞同：1
> 
> 时间：2012-10-04T14:55:20.523
> 
> 标签：iphone, encryption, sqlcipher

*我正在使用 SQLCipher 通过加密保护 SQLite 数据库。我遵循本教程[http://sqlcipher.net/ios-tutorial](http://sqlcipher.net/ios-tutorial)，一切顺利，直到我添加 libsqlite3.dylib 框架。当我尝试构建它时，它返回以下错误：*

```
/Users/Mac_005/Library/Developer/Xcode/DerivedData/DBEncryption-fdbqkpkwxvqmbpevfwgkwtypioge/Build/Intermediates/openssl.build/Debug-iphonesimulator/crypto.build/Script-9038ACD812DCAC96004FA0D0.sh: line 66: ./config: No such file or directory

Cp: libcrypto.a: No such file or directory

Cp: libssl.a: No such file or directory 
```

*只有当我添加 sqlite 框架时才会发生这种情况。如果需要更多信息，我会在这里提供。这是我第一次尝试这个，所以无法真正猜到问题！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:21:26.377

该教程指出：“确保**未**选择 libsqlite3.dylib 作为链接依赖项。” 换句话说，您不想添加 libsqlite3.dylib。

# jquery - 为什么我会收到错误 TypeError: $("#main-nav").dropmenu is not a function

> ID：12730089
> 
> 赞同：0
> 
> 时间：2012-10-04T14:55:24.953
> 
> 标签：jquery

我在这个页面上遇到了两个 jQuery 脚本之间的冲突：http: [//encoreazalea.com/ee/the-collection/in-the-landscape](http://encoreazalea.com/ee/the-collection/in-the-landscape)

我正在为下拉菜单使用一个脚本，为图片库使用另一个脚本。

在网站的主页上没有错误。但是，在此页面上，我收到以下控制台错误：

```
TypeError: $("#main-nav").dropmenu is not a function
zindex: 100 
```

我的代码如下：

```
<script type="text/javascript">
jQuery(document).ready(function() {
    $("a:has(img.gallery)").click(function() {
        var largePath = $(this).attr("href");
        var caption = $(this).attr("title");
        jQuery(".photo_large").attr({ src: largePath});
        jQuery("#caption1").text(caption);
        return false;
    });
});

</script> 
```

我会很感激一些帮助解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:00:30.870

[http://encoreazalea.com/ee/the-collection/js/jquery.dropmenu.js](http://encoreazalea.com/ee/the-collection/js/jquery.dropmenu.js)未正确加载

# scala - 从类型实例中查找隐式

> ID：12730090
> 
> 赞同：1
> 
> 时间：2012-10-04T14:55:27.167
> 
> 标签：scala, reflection, scala-2.10

是否可以将*Type*实例用作普通的 Scala 类型？例如，在以下代码段中，可以使用*tpe找到**pi*吗？

 *```
import scala.reflect.runtime.universe._

implicit val pi: Double = 3.14159265
val tpe = typeOf[Double]
implicitly[Double] // pi
implicitly[tpe]??? 
```

恐怕没有一个简单的解决方案可以实现我的目标，而且我需要一种工厂来将*tpe*隐式翻译为*[Double]*。无论如何，我认为在 Scala 代码中集成反射类型可能非常强大，因此并不像看起来那么疯狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:25:58.450

我不明白这有多大意义。

让我们谈谈它的意义`implicitly`。如果没有这样的隐含或不止一个 eligeable，它应该无法编译。但是由于由 表示的实际类型`tpe`直到运行时才知道，因此`implicitly`使用类型实例将不可能发出任何类型的编译错误。您可以做的最好的事情是安排对`implicitly`始终编译的任何调用，让编译器在某处存储范围内所有隐式值的列表（对于任何类型），并在运行时在此列表中查找并在不匹配时抛出异常表示的类型`tpe`（或者如果有多个）。`implicitly`如果我们谈论的是 的替代实现，这可能只有某种意义`dynamicImplicitly`。

请注意，这将需要编译器的显式支持（在每次调用时捕获范围内的所有隐式，`dynamicImplicitly`因此这不仅仅是一个简单的函数），并且在空间方面效率非常低（有多少隐式可以在范围在一个给定点？是的，很多，并且在每次调用 ) 时都需要在字节码中以某种方式引用它们`dynamicImplicitly`。

所以我的简短回答是：不要屏住呼吸等待这个功能很快就会实施。从技术上讲，它可能可以实现`dynamicImplicitly`为 scala 宏（前提是可以从 scala 宏中获取范围内的所有隐式，我什至不确定）*

# url - TFS 构建中 Watin 的站点 URL

> ID：12730091
> 
> 赞同：1
> 
> 时间：2012-10-04T14:55:28.497
> 
> 标签：url, build, tfs, watin

我已经设置了一个 TFS 2010 构建服务器，它运行良好。我现在想介绍一些使用 Watin 的 UI 测试。如何设置？

显然，测试发生在构建之后，并且必须反对该构建，但我没有看到任何选项可以在 IIS 中安装构建代码以用于测试。这应该如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:22:33.963

您需要将编译后的站点部署到 Web 服务器。Msdeploy 对此有好处。

在我的 BuildProcessTemplate 中，我首先将网站打包为 MsBuild 任务

CommandLing参数：

```
String.Format("/T:Package /p:DeployOnBuild=False 
    /p:PackageLocation=_PublishedWebsites\YourApp\{0}.zip 
    /p:DeployIisAppPath=YourApp.com/{1}", EnvironmentName, EnvironmentName) 
```

（在发布模式下指定您的 Web 项目）

下一个任务是具有以下文件名的 InvokeProcess

```
SourcesDirectory + "\YourApp\_PublishedWebsites\YourApp\" 
    + EnvironmentName + ".deploy.cmd" 
```

细节会有所不同，但我想你明白了。让 WatiN 运行所有测试还有一些其他挑战。我们可以回到那个，可能是一个更广泛的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:27:17.907

（将代码部署到 IIS 后）

[http://msdn.microsoft.com/en-us/library/dd728093.aspx](http://msdn.microsoft.com/en-us/library/dd728093.aspx)

[http://www.microsoft.com/en-us/download/details.aspx?id=1334](http://www.microsoft.com/en-us/download/details.aspx?id=1334)

WatiN 从 mstest 结合交互式桌面运行效果很好。为远程机器提供交互式桌面的一个好方法是使用测试控制器和测试代理。

# .net - 如何将字体拉伸到 TextBox 大小？

> ID：12730093
> 
> 赞同：1
> 
> 时间：2012-10-04T14:55:36.157
> 
> 标签：.net, xaml

任何线索如何自动拉伸 TextBox 字体大小？

谢谢！

```
<Grid Name="DigitalClock" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Visibility="Collapsed">
    <TextBlock Name="dClock" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"></TextBlock>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:58:10.043

您可以使用 a[`ViewBox`](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)来拉伸内容以适应。

# c - 在 C 中使用 GMP 5.0.2 的斐波那契函数

> ID：12730094
> 
> 赞同：1
> 
> 时间：2012-10-04T14:55:45.227
> 
> 标签：c, fibonacci, gmp

我使用 GMP 5.0.2 库中的类型和函数编写了一个斐波那契函数。但是当我编译它时，我不断收到错误。以下是错误和代码：

```
main.c:4:7: error: ‘fib’ declared as function returning an array
main.c: In function ‘main’:
main.c:21:10: error: incompatible types when assigning to type ‘mpz_t’ from type ‘int’
main.c: At top level:
main.c:32:7: error: ‘fib’ declared as function returning an array
main.c: In function ‘fib’:
main.c:33:28: warning: return makes integer from pointer without a cast [enabled by default]
main.c:44:3: warning: passing argument 2 of ‘__gmpz_set’ makes pointer from integer without a cast [enabled by default]
/usr/local/include/gmp.h:1074:21: note: expected ‘mpz_srcptr’ but argument is of type ‘int’
main.c:45:3: warning: passing argument 2 of ‘__gmpz_set’ makes pointer from integer without a cast [enabled by default]
/usr/local/include/gmp.h:1074:21: note: expected ‘mpz_srcptr’ but argument is of type ‘int’
main.c:47:3: error: too few arguments to function ‘__gmpz_add’
/usr/local/include/gmp.h:696:21: note: declared here 
```

代码是

```
#include <stdio.h>
#include <gmp.h>

mpz_t fib (mpz_t, const mpz_t);

int main (void) {
    printf("Before anything\n"); // debugging

    mpz_t FOUR; mpz_init(FOUR); mpz_add_ui(FOUR, FOUR, 4);

    printf("Declare FOUR, initilize it, set it to 4\n"); // debugging

    mpz_t N; mpz_init(N); mpz_add_ui(N, N, 5);

    printf("Declare N, initilize it, set it to 5\n"); // debugging

    mpz_t fibFive; mpz_init(fibFive);

    printf("Declare fibFive, initilize it\n"); // debugging

    fibFive = fib(N, FOUR);

    printf("After calling the fib function on fibFive\n"); // debugging

    gmp_printf("5th fibonacci number is %Zd\n", fibFive);

    printf("the end\n"); // debugging

    return 0;
}

mpz_t fib (mpz_t n, const mpz_t baseCase) {
    if (mpz(n, baseCase) < 0) return n;
    else {
        mpz_t a, b;
        mpz_t t1, t2;

        mpz_init(a); mpz_init(b);
        mpz_init(t1); mpz_init(t2);

        mpz_sub_ui(t1, n, 2);
        mpz_sub_ui(t2, n, 1);

        mpz_set(a, fib(t1, baseCase));
        mpz_set(b, fib(t2, baseCase));

        return mpz_add(a, b);
    }
} 
```

对于我使用的编译`gcc main.c -lgmp`

注意：我阅读了 GMP 手册，并使用了整数函数手册[GMP 5.0.2 手册 - 整数函数中的代码中的函数](http://gmplib.org/manual/Integer-Functions.html#Integer-Functions)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:34:47.837

`gmp.h`（我不知道我安装的次要版本，但在GMP 4中一直相同，我不希望它很快改变）的相关部分是

```
typedef struct
{
  int _mp_alloc;            /* Number of *limbs* allocated and pointed
                               to by the _mp_d field.  */
  int _mp_size;             /* abs(_mp_size) is the number of limbs the
                               last field points to.  If _mp_size is
                               negative this is a negative number.  */
  mp_limb_t *_mp_d;         /* Pointer to the limbs.  */
} __mpz_struct;

#endif /* __GNU_MP__ */

typedef __mpz_struct MP_INT;    /* gmp 1 source compatibility */
typedef __mpz_struct mpz_t[1]; 
```

所以 an`mpz_t`是一个长度为 one 的数组，其中包含一个`__mpz_struct`。这就是原因

> main.c:4:7：错误：“fib”声明为返回数组的函数

和喜欢。如果没有原型，编译器显然假定隐式 int，因此

```
fibFive = fib(N, FOUR); 
```

原因

> main.c:21:10：错误：从类型“int”分配给类型“mpz_t”时类型不兼容</p>

要修复它，您必须将`mpz_t`s 作为 out-parameters 传递给您的函数，并进行最少的更改（`F(0) = 0`通常不是您的索引关闭）：

```
#include <stdio.h>
#include <gmp.h>

void fib (mpz_t, mpz_t, const mpz_t);

int main (void) {
    printf("Before anything\n"); // debugging

    mpz_t FOUR; mpz_init(FOUR); mpz_add_ui(FOUR, FOUR, 4);

    printf("Declare FOUR, initilize it, set it to 4\n"); // debugging

    mpz_t N; mpz_init(N); mpz_add_ui(N, N, 5);

    printf("Declare N, initilize it, set it to 5\n"); // debugging

    mpz_t fibFive; mpz_init(fibFive);

    printf("Declare fibFive, initilize it\n"); // debugging

    fib(fibFive, N, FOUR);

    printf("After calling the fib function on fibFive\n"); // debugging

    gmp_printf("5th fibonacci number is %Zd\n", fibFive);

    printf("the end\n"); // debugging

    return 0;
}

void fib (mpz_t res, mpz_t n, const mpz_t baseCase) {
    if (mpz_cmp(n, baseCase) < 0){
        mpz_set(res,n);
    } else {
        mpz_t a, b;
        mpz_t t1, t2;

        mpz_init(a); mpz_init(b);
        mpz_init(t1); mpz_init(t2);

        mpz_sub_ui(t1, n, 2);
        mpz_sub_ui(t2, n, 1);

        fib(a, t1, baseCase);
        fib(b, t2, baseCase);

        mpz_add(res, a, b);
    }
} 
```

# c# - 另一个 System.InvalidOperationException：序列不包含任何元素（使用 .Any()）

> ID：12730095
> 
> 赞同：4
> 
> 时间：2012-10-04T14:55:50.267
> 
> 标签：c#, linq, entity-framework, elmah

获取此行的异常：

```
public bool isEngageOn()
    {
line 149  -> return chatUserRepository.Table.Where(c => c.TrackingOn).Any();
    } 
```

`TrackingOn`是布尔类型。

**.Any()**假设“确定天气一个序列包含任何元素”，那么为什么 Elmah 捕获的异常“System.InvalidOperationException Sequence contains no elements”？

错误：

```
System.InvalidOperationException: Sequence contains no elements
 at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
 at System.Linq.Queryable.Any[TSource](IQueryable`1 source)
 at sf2015.Models.DomainModels.Services.ChatServices.isEngageOn() in C:\....\ChatServices.cs:line 149 
```

ps：无法重现错误，但有时会显示在[Elmah](https://code.google.com/p/elmah/)错误日志中。

以下是存储库的一些代码

```
public virtual IQueryable<T> Table
    {
        get
        {
            return this.Entities;
        }
    }

    private DbSet<T> Entities
    {
        get
        {
            if (_entities == null)
                _entities = Context.Set<T>();
            return _entities;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:58:51.230

正确的用途是

`return chatUserRepository.Table.Any(c => c.TrackingOn)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:26:47.777

您提供的堆栈跟踪表明，`.Single`如果未找到任何元素，异常来自哪个异常。您可以将上述代码更改为：

```
 return chatUserRepository.Table.Any(c => c.TrackingOn); 
```

这将与您的线路相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T01:07:30.733

我有完全相同的问题。

正在使用该方法`Any()`，但 StackTrace 在该`Single()`方法上显示错误。

`Configuration`问题的原因是 Entity Framework Code First类的方法 Seed() 。

我的方法是在没有注册表的表上`Seed()`使用该方法。`Single()`

# json - SignalR 解析值时遇到意外字符：<

> ID：12730096
> 
> 赞同：3
> 
> 时间：2012-10-04T14:55:53.397
> 
> 标签：json, asp.net-mvc-4, windows-runtime, signalr

我正在使用 WinRT 客户端。当我尝试发送消息时收到此异常。

***解析值时遇到意外字符：<。***

当您将对象发送到集线器时，会出现此问题，并且该对象未在集线器上定义。该对象是一个可绑定对象 (ViewModel)。我不想在 web 项目中包含所有属性通知更改内容。

客户代码

```
return Proxy.Invoke("PlayerUpdate", sessionData); 
```

尝试一种方法是让集线器接受“对象”参数

```
public async Task PlayerUpdate(string group, object sessionData)
{
 await Clients[group].PlayerUpdate(sessionData);
} 
```

尝试二是让集线器接受一个 (json) 'string' 参数

```
public async Task PlayerUpdate(string group, string sessionData)
{
 await Clients[group].PlayerUpdate(sessionData);
} 
```

尝试三是预序列化对象客户端

```
var str = JsonConvert.SerializeObject(refresh);
return Proxy.Invoke("PlayerUpdate", str); 
```

没有任何工作。方案 4 是在共享库中定义一些数据传输对象进行发送。我真的不想这样做，因为它会使我的代码加倍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:36:14.237

解决了。

我的回购项目很好，所以我得出的结论是其他问题。

经过一些实验，我发现真正的问题是我的 HUB 方法中的参数不正确。简而言之，当我的集线器方法只接受 1 个时，我发送了 2 个参数。

感谢您的关注，很抱歉造成混乱。也许一个更好的异常消息是为了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:40:25.583

这似乎是 SignalR 的内部错误，我认为没有人能够在 StackOverflow 上为您提供帮助。您应该[向 SignalR GitHub 项目提交问题](https://github.com/SignalR/SignalR/issues)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-16T01:08:53.387

仅当站点 URL 包含尾随`Default.aspx`. 以下清理了[HubConnection](https://msdn.microsoft.com/en-us/library/microsoft.aspnet.signalr.client.hubs.hubconnection(v=vs.111).aspx) URL 参数：

```
string serverUri = new Uri(HtmlPage.Document.DocumentUri, ".").ToString();
HubConnection connection = new HubConnection(serverUri, true); 
```

# android - Android 与 iOS：哪个更适合资金追踪应用？

> ID：12730097
> 
> 赞同：-2
> 
> 时间：2012-10-04T14:55:54.673
> 
> 标签：android, ios, mobile

我正在考虑在移动设备上创建一个应用程序，该应用程序将处理“省钱”，跟踪您的支出。像[这个](http://itunes.apple.com/gb/app/spending-log/id428939317?mt=8) （iOS）或[这个](http://www.androlib.com/android.application.jg-finance-moneydroid-nxj.aspx) （android）。

我对这个领域完全陌生（即使我是一个非常有经验的 webapps 程序员，使用 jquery、backbone、html5、couchdb 等），但我猜这两个世界（iOS 和 Android）实际上针对不同的用户。

有没有人知道统计数据（甚至欢迎简单的建议），可以帮助我了解跟踪您的支出的应用程序是否最适合 iOS 或 Android？

这两个世界有什么不同？

iOS更适合娱乐应用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:18:05.737

你的想法听起来不需要大量的计算......那么为什么不使用许多“一块石头，多只鸟”解决方案之一打入这两个市场呢？例如 Phonegap，它使用您已经使用过的 Web 代码。听起来您不需要通过编写本机代码来提高性能。

据我所知，普遍的共识是，iOS 应用程序通常比 Android 应用程序赚得“更多利润”。该声明高度基于情境，并不能真正涵盖所有类型的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:15:28.680

两种操作系统都具有很高的覆盖范围。这不是您要求的，但我建议您开始为 Android 编码，然后将您的应用程序移植到 iOS。多亏了 Play 商店政策，您可以根据应用程序的使用情况对应用程序进行大量微调，并立即推送更新。

# css - twitter 用于其首页（登录/退出页面）的整页背景（封面）图像技术是什么？

> ID：12730099
> 
> 赞同：3
> 
> 时间：2012-10-04T14:55:55.933
> 
> 标签：css, twitter, background-image

看起来像 CSS - 唯一提到的技术 #2：http: [//css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)但事实并非如此。代码略有变化（高度和显示属性）

我尝试复制粘贴他们的html css，但是我无法让它工作。是否可能涉及一些javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:05:39.670

**它只是 CSS 没有 JavaScript** [工作演示](http://jsbin.com/utiduc/1)

**CSS**

```
.front-bg {
position: fixed;
width: 200%;
height: 200%;
left: -50%;
background: black;
}

.front-bg img {
display: block;
margin: auto;
min-width: 50%;
min-height: 50%;
top: 0;
left: 0;
right: 0;
bottom: 0;
} 
```

**HTML**

```
<div class="front-bg"><image src="http://a0.twimg.com/a/1349296073/t1/img/front_page/city-balcony@2x.jpg" /></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:05:12.883

试试这个，

```
html, body {
   margin:0;
   padding:0;
   background-image:url(relative/path/to/image);
   background-repeat:no-repeat;
   background-attachment:fixed;
}

#container {
   margin:0 auto;
   width:900px; /* your fixed width */
} 
```

# java - Java 星号框 - 仅一行

> ID：12730102
> 
> 赞同：2
> 
> 时间：2012-10-04T14:56:17.733
> 
> 标签：java

这是大学作业，我知道我只是遗漏了一些应该很明显的东西，但我对此很陌生，所以对我来说并不明显。我需要使用 Java 和嵌套循环创建一个空框（用星号标出）。没有用户输入。常量设置为 4 宽和 6 长。

我已经完成了所有工作，只是它一直在直线上打印所有正确的东西，而不是制作一个盒子！我做错了什么？

```
final int NUM_ACROSS = 4;   // Number of asterisks to print across.
    final int NUM_DOWN = 6;     // Number of asterisks to print down.
    int row;    // Loop control for row number.
    int column; // Loop control for column number.

    // This is the work done in the detailLoop() method
    {
    for (row = 0; row < NUM_DOWN; row++)        
    for (column = 0; column < NUM_ACROSS; column++) 

        {
            if (column == 0 || column == NUM_ACROSS) 
            System.out.print("*");

            else if (row == 1 || row == NUM_DOWN-1)      
                System.out.print("*");

                else  
                System.out.print (" "); 
        }       
        {       

                System.out.println(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:03:30.337

这就是为什么*总是*用花括号包围块是一种很好的做法，即使它们只有一行。这是您的代码，正确缩进：

```
for (row = 0; row < NUM_DOWN; row++)        
    for (column = 0; column < NUM_ACROSS; column++) {
        if (column == 0 || column == NUM_ACROSS) 
            System.out.print("*");
        else if (row == 1 || row == NUM_DOWN-1)      
            System.out.print("*");
        else
            System.out.print (" "); 
    }       
{       
    System.out.println(); 
```

`System.out.println(" ");`写入新行的Your位于 for 循环*之外*，因此最后只调用一次。

这就是循环的*编写*方式：

```
for (row = 0; row < NUM_DOWN; row++) {
    for (column = 0; column < NUM_ACROSS; column++) {
        if (column == 0 || column == NUM_ACROSS) {
            System.out.print("*");
        } else if (row == 1 || row == NUM_DOWN-1) {   
            System.out.print("*");
        } else {
            System.out.print (" "); 
        }
    } // end inner for  

    System.out.println();
} // end outer for 
```

**大括号的解释**

在 Java 中，如果 for 循环或 if 语句中只有一行，则在技术上可以省略花括号。因此这是发现：

```
if (column == 0 || column == NUM_ACROSS) 
    System.out.print(""); 
```

但是，如果有两行，则需要大括号：

```
if(column == 0 || column == NUM_ACROSS) {
    System.out.print("");
    doSomething();
} 
```

if-else if-else 树算作 for 循环内的单个“行”，因此花括号在技术上不是必需的。这是有效的：

```
for (column = 0; column < NUM_ACROSS; column++)
    if (column == 0 || column == NUM_ACROSS) 
        System.out.print("*");
    else if (row == 1 || row == NUM_DOWN-1)      
        System.out.print("*");
    else
        System.out.print (" "); 
```

同样，整个 for 循环算作外部 for 循环内的一行：

```
for (row = 0; row < NUM_DOWN; row++)        
    for (column = 0; column < NUM_ACROSS; column++)
        if (column == 0 || column == NUM_ACROSS) 
            System.out.print("*");
        else if (row == 1 || row == NUM_DOWN-1)      
            System.out.print("*");
        else
            System.out.print (" "); 

// this line is inside of neither for-loop because of the lack of braces:
System.out.println(); 
```

一般来说，对于*所有程序员*来说，无论水平或能力如何，最好用大括号将他们的代码块括起来，以避免语法上的歧义。这种省略大括号的做法在有多个程序员的情况下会变得很危险，甚至是缩进严重的代码。考虑一下原始帖子中的代码——你能一眼看出什么嵌套在哪个循环中或包含在哪个循环中？

另一个例子，缺少花括号可能会产生意想不到的后果。考虑一种情况，如果日期小于 15，则需要打印“上半年”，如果月份是 11，则需要打印“十一月”。以下代码

```
if ( day < 6 )
    System.out.println("First half.");

if ( month == 11 ) 
    System.out.println("November."); 
```

假设项目需求发生了变化，如果当天少于 15 天，您不再应该打印“上半年”。一些有用的实习生进来并评论了那行：

```
if ( day < 15 )
    // System.out.println("First half.");

if ( month == 11 ) 
    System.out.println("November."); 
```

这个可以吗？不！现在你也打破了 11 月的情况，因为上面的代码在语义上等价于：

```
if (day < 15)
    if (month == 11)
        System.out.println("November."); 
```

如果我们一直使用花括号，我们会很好：

```
if (day < 15) {
    // System.out.println("First half.");
}
if (month == 11) {
    System.out.println("November.");
} 
```

毫无疑问，还有很多其他原因和例子可以*说明为什么*这是最佳实践。养成始终使用花括号的习惯，即使这意味着每隔一段时间输入几个额外的字符，这无疑会帮助您保持代码按预期工作，并减少您可能遇到的编译和其他错误的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:05:13.620

```
for (row = 0; row < NUM_DOWN; row++) {
    for (column = 0; column < NUM_ACROSS; column++) {
        if (column == 0 || column == NUM_ACROSS) 
            System.out.print("*");
        else if (row == 1 || row == NUM_DOWN-1)      
            System.out.print("*");
        else  
            System.out.print (" "); 
    }  
    System.out.println(); 
} 
```

这能解决你的问题吗？（放入第`System.out.println();`一个循环）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:03:18.493

如果您重新格式化代码以使其更具可读性，则错误会变得更加明显：

```
for (row = 0; row < NUM_DOWN; row++)        
    for (column = 0; column < NUM_ACROSS; column++) {
        if (column == 0 || column == NUM_ACROSS)
            System.out.print("*");
        else if (row == 1 || row == NUM_DOWN-1) 
            System.out.print("*");
        else 
            System.out.print (" "); 
    }

{ //What's this brace doing here?      
    System.out.println(); 
```

外部`for`循环（遍历每一行）没有在正确位置定义的左大括号。因为`for`语句后面没有左大括号，所以 for 循环的主体就是下一条*语句*（即内部`for`循环）。

之后的左大括号只是在`println()`语句周围形成一个块。为了避免这个问题，我个人更喜欢将左大括号放在`for`和`if`语句的同一行，以避免在块之前意外插入任何内容。我还建议在单行 if 语句主体周围放置大括号，以避免在以后添加额外的行时造成混淆。有关示例，请参见以下内容：

```
for (row = 0; row < NUM_DOWN; row++) {   
    for (column = 0; column < NUM_ACROSS; column++) {
        if (column == 0 || column == NUM_ACROSS)
            System.out.print("*");
        else if (row == 1 || row == NUM_DOWN-1) 
            System.out.print("*");
        else 
            System.out.print (" "); 
    }           
    System.out.println();
} 
```

# javascript - 是否可以在 FirefoxOS 中进行混搭？

> ID：12730104
> 
> 赞同：2
> 
> 时间：2012-10-04T14:56:29.843
> 
> 标签：javascript, firefox-os

我刚开始做研究，但我假设其他人可能有同样的问题：是否可以从[FirefoxOS](http://www.mozilla.org/en-US/firefoxos/)应用程序的不同来源读取数据，例如从不同域的 RSS 提要读取数据？

您是否受到同源政策的限制，还是有办法绕过它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T18:06:38.790

是的你可以！如果您创建标准 Web 应用程序，只需像通常在 Firefox OS 之外那样构建一个 Web 应用程序。如果您创建打包的应用程序，请`network-http`在您的 Web 应用程序清单中包含对权限的请求。这将为您提供不受限制的 HTTP 访问。

有关权限的更多信息，请参阅清单规范：

> network-http - 发出没有任何来源限制的 HTTP 请求。

[https://developer.mozilla.org/en-US/docs/Apps/Manifest](https://developer.mozilla.org/en-US/docs/Apps/Manifest)

**编辑：**权限已更改为`systemXHR`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T16:03:05.790

当然，您可以像在网站中一样在 Firefox OS 应用程序中从外部域读取数据。您可以使用不安全的 jsonp 读取它，也可以使用更安全的[CORS读取它。](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)如果您遵守内容安全策略 (CSP) 限制（这是最安全的），您将只能使用 CORS 等安全方法。

没有什么能阻止您让 Firefox OS 应用程序像网站一样读取外部数据。但是，如果您要创建[特权打包应用程序](https://wiki.mozilla.org/Apps/PackagingProposal#Privileged_Apps)，则必须遵守 CSP。

（抱歉缺少链接，Stack Overflow 不会让我添加更多。）

# google-maps - 搜索标记信息框

> ID：12730105
> 
> 赞同：-2
> 
> 时间：2012-10-04T14:56:33.353
> 
> 标签：google-maps, search, google-maps-api-3, marker

地图 API 是否可以从信息框中搜索信息，例如标记信息框？

我的信息框显示一些文本信息。我只想搜索此文本并在地图上仅显示包含我要查找的文本的标记。希望这更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:16:06.667

这是你想要的

```
//Build html for Infowindow
      var html = "<b> Text </b> <br>;
      html = html + "<input type=\"text\" id=\"addressInput\" size=\"10\"/>;
      html = html + "<select id=\"radiusSelect\">";
      html = html + "<option value=\"25\" selected>25mi</option>";
      html = html + "<option value=\"100\">100mi</option>";
      html = html + "<option value=\"200\">200mi</option>";
      html = html + "</select>";
      html = html + "<br/><button onclick='doIt()'>Do It</button>";
      var marker = new google.maps.Marker({
       map: map,
        position: point,
      });
      //marker array to allow clearin markers
       markerArray.push(marker);
       bindInfoWindow(marker, map, infoWindow, html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T10:07:56.793

我找不到任何谷歌方法来做到这一点我只是将我的信息窗口副本放入一个数组中，然后搜索数组内容。

# sockets - D语言：UDP客户端没有收到回复

> ID：12730106
> 
> 赞同：4
> 
> 时间：2012-10-04T14:56:36.333
> 
> 标签：sockets, udp, d, udpclient

我为 UDP 回显客户端和服务器创建了一个玩具示例。但是，我没有收到服务器的回复，我想知道我做错了什么。

客户：

```
#!/usr/bin.rdmd
import std.stdio;
import std.socket;
import std.string;
import std.conv;
import std.random;
import std.outbuffer;

int main(string[] args) {
  if (args.length != 3) {
    writefln("usage: %s <server host> <port>",args[0]); 
    return 0;
  }

  auto s = new UdpSocket();

  auto addr = new InternetAddress(args[1], to!ushort(args[2]));
  s.connect(addr);
  scope(exit) s.close();

  for (int i = 0; i < 1000; i++){
    auto r = uniform(int.min,int.max);
    auto send_buf = new OutBuffer();

    send_buf.write(r);

    s.send(send_buf.toBytes());

    ubyte[r.sizeof] recv_buf;
    s.receive(recv_buf);

    assert(r == *cast(int*)(send_buf.toBytes().ptr));
  }

  return 0;
} 
```

服务器：

```
#!/usr/bin.rdmd
import std.stdio;
import std.socket;
import std.string;
import std.conv;

int main(string[] args) {
  if (args.length != 2) {
    writefln("usage: %s <port>",args[0]); 
    return 0;
  }

  auto s = new UdpSocket();

  auto addr = new InternetAddress("localhost", to!ushort(args[1]));
  s.bind(addr);

  while (true){
    ubyte[int.sizeof] recv_buf;
    s.receive(recv_buf);

    writefln("Received: %s\n",recv_buf);

    s.send(recv_buf);

  }

  writeln("sent");

  return 0;
} 
```

如果您执行这些程序，您将看到客户端挂起接收，而服务器已经发送了回复。

你知道我做错了什么吗？

顺便说一句，D 中网络编程的最佳资源是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T01:43:04.617

服务器上的 UDP 套接字未“连接”，因此您无法使用`send`. 它可能返回了一条您没有检查的错误消息。在服务器上，使用`receiveFrom`with`sendTo`回复消息。

Note that while UDP is a connectionless protocol, the socket API supports the concept of a connected UDP socket, which is merely the socket library remembering the target address for when you call `send`. It will also filter out messages not coming from the connected address when calling `receive`. Connected sockets are usually a bad fit for UDP server programs.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:27:19.780

[receive()](http://dlang.org/phobos/std_socket.html#receive)和[receiveFrom()](http://dlang.org/phobos/std_socket.html#receiveFrom)默认会阻塞。这很可能是它挂起的原因。在缓冲区大小不够的情况下，send() 也可能会阻塞。在处理 UDP 时，您应该使用 sendTo() 和 receiveFrom() 方法。

此外，如果您想将一些数据从“服务器”发送到您的“客户端”，那么基本上两者都应该被编码为服务器和客户端，并且都应该知道它们发送数据包的地址，所以你将不得不重构你的考虑到这一点的代码。

很久以前，当我开始网络编程时，[Beej's Guide](https://beej.us/guide/bgnet/html/multi/clientserver.html#datagram)是最好的，我仍然认为它是。您应该能够轻松地将 C 源从该指南移植到 D。

# php - 从 PHP 中的 cURL 请求中获取 Foursquare access_token

> ID：12730109
> 
> 赞同：0
> 
> 时间：2012-10-04T14:56:42.323
> 
> 标签：php, json, curl, foursquare

我正在测试一个 cURL 函数来取回 Foursquare 上给定用户的访问令牌。以下函数以 json 格式将访问令牌打印到屏幕上

```
{"access_token":"5B25GW5LF3L4W04PALHK32X5Z3YGNUUVDHM2TFBQOWZSQ121"} 
```

我在提取访问令牌的值时遇到问题。

这是我正在使用的功能：

> 函数 get_access_token($code){

```
 $url = "https://foursquare.com/oauth2/access_token";

        $fields = array(
            'client_id' => urlencode($this->client_id),
            'client_secret' => urlencode($this->client_secret),
            'grant_type' => 'authorization_code',
            'redirect_uri' => urlencode($this->redirect_url),
            'code' => $code
        );

        //url-ify the data for the POST
        foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
        rtrim($fields_string, '&');

        //open connection
        $ch = curl_init();

        //set the url, number of POST vars, POST data
        curl_setopt($ch,CURLOPT_URL, $url);
        curl_setopt($ch,CURLOPT_POST, count($fields));
        curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

        //execute post
        $result = curl_exec($ch);
        //close connection
        curl_close($ch);

        return var_dump($result) /* prints bool(true) */;
    } 
```

如何将此访问令牌存储在变量中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:49:03.230

默认情况下 curl_exec 不返回响应，而是一个指示成功或失败的值。访问[http://php.net/manual/en/function.curl-exec.php](http://php.net/manual/en/function.curl-exec.php)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:37:11.513

只需再添加一行代码，告诉 curl 将返回值传回 curl_exec 和 $result 变量：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

您可能还想检查数据返回时是否发生错误：例如：

```
$result = curl_exec($ch);
if (curl_errno($ch)) 
   echo (curl_error($ch));
else
   echo $result;
curl_close($ch); 
```

# iphone - 在没有 xcode 的情况下重命名 iOS 应用程序？

> ID：12730113
> 
> 赞同：0
> 
> 时间：2012-10-04T14:56:59.290
> 
> 标签：iphone, ios, xcode, ipad

我只想重命名一个 iOS 项目，包括目标文件、可执行文件、plist 文件和产品名称，而不使用 XCode。

我试图手动重命名 ProjetName.xcodeproj 但是当我打开 XCode 时，只有 XCode 项目名称没有改变其他文件。我已经关闭了项目并删除了构建文件夹。当我在 xcode 中打开项目并再次构建目标文件时，可执行文件和产品名称仍使用旧名称。

我怎么可能做到！

谢谢，伊斯瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:20:08.827

我一直在做一些这样的事情，它可以做到，但你必须狡猾。

在终端中转到`yourApp.xcodeproj`（它只是一个您可以 cd 进入的目录）

然后使用像 Vim 这样的文本编辑器打开`project.pbxproj`

在该文件中，您将看到项目各个部分的名称，例如`productName="yourAppName"`

映射到实际的变量`PRODUCT_NAME`，它将重命名正在构建的应用程序和其中的可执行文件。

我还没有查看该文件中的所有内容，因为我所要做的就是能够更改它，以便我可以切换一些文件，更改名称，使用`xcodebuild`，并使其成为一个全新的应用程序；）

但我敢打赌，您项目的大多数方面的名称都在其中，并且可以进行类似的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:01:11.913

不要认为这是可能的。但是，您可以尝试查找 .plist 文件并对其进行编辑，看看是否可行。无论如何......看不出你不想在xcode中这样做的任何理由，因为很明显，你已经安装了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:02:57.703

你不能，xcproject 有文件在项目所在的位置引用它，如果你背着 Xcode 做这件事，你的项目就无法工作。

你应该使用 Xcode：

要重命名您的应用程序，如果您使用的是 Xcode 4 或更高版本，请修改项目名称字段，或者如果您使用的是 Xcode 3.2.x，请使用重命名功能。

[http://developer.apple.com/library/ios/#qa/qa1625/_index.html](http://developer.apple.com/library/ios/#qa/qa1625/_index.html)

# android - Android 版 Chrome 上的 IndexedDB 写入失败

> ID：12730123
> 
> 赞同：3
> 
> 时间：2012-10-04T14:57:59.560
> 
> 标签：android, google-chrome, indexeddb

我对 Android 版 Chrome 中的 IndexedDB 支持状态感到困惑。

HTML5 Rocks的[Todo 列表演示](http://www.html5rocks.com/en/tutorials/indexeddb/todo/)在我桌面上的 Chrome 23 中运行良好。在 Android 4.0.4 上的 Chrome 18 中，它看起来很有希望：window.webkitIndexedDB 存在，我可以打开一个数据库并创建一个商店。但是，当我尝试写信给商店时，我得到了一个`READ_ONLY_ERR: DOM IDBDatabase Exception 9`.

Chrome for Android 的一些概述表明它支持 IndexedDB，但我找不到任何更深入的讨论或文档，或成功使用它的人的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T06:48:04.740

READ_ONLY_ERR：DOM IDBDatabase 异常 9

错误是说问题是什么。您正在尝试将数据写入只读事务中的对象存储。您需要使用读写打开一个事务。

```
db.transaction(["scope"], "readwrite"); 
```

**我不确定在 android 4 上实现了什么版本的 indexeddb，所以它可能仍然使用整数值。在这种情况下，您应该使用以下内容：window.webkitIDBTransaction.READ_WRITE（如果存在 webkit 版本）或 window.IDBTransaction.READ_WRITE（如果存在本机版本）。**

```
db.transaction(["scope"], window.webkitIDBTransaction.READ_WRITE); 
```

**编辑** 我查看了项目的源代码，发现它已经使用“读写”版本。也许这还没有在android版本中实现？我建议你使用我给你的第二种可能性。

# ios - 即席分发

> ID：12730126
> 
> 赞同：1
> 
> 时间：2012-10-04T14:58:12.413
> 
> 标签：ios, iphone

我想做以下事情：

我开发了一个 iphone 应用程序。我想将它发送给我的团队成员进行测试，而无需将他们的设备 ID 输入苹果开发者程序系统。我有一个企业 Apple 开发者帐户。

我怎样才能做到这一点？

我只想向会员发送一个链接，他们可以点击他们的 iphone 来安装应用程序，而无需使用 Itunes 或任何其他软件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:18:37.490

3 - 步骤

1.  企业存档和分发（选中小框）
2.  在您想要用于此的任何网站上创建一个简单的 Web 链接，如下所示： `itms-services://?action=download-manifest&url=https://www.example.com/apps/myAppManifest.plist"`

3.  更正 xCode 生成的“清单”plist 文件中的应用程序链接。您的 manifest.plist 将如下所示：

> ```
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
> <plist version="1.0">
> <dict>
>   <key>items</key>
>   <array>
>       <dict>
>           <key>assets</key>
>           <array>
>               <dict>
>                   <key>kind</key>
>                   <string>software-package</string>
>                   <key>url</key>
>                   <string>https://www.example.com/apps/myApp.ipa</string>
>               </dict>
>           </array>
>           <key>metadata</key>
>           <dict>
>               <key>bundle-identifier</key>
>               <string>com.mycompany.myapp</string>
>               <key>bundle-version</key>
>               <string>1.0</string>
>               <key>kind</key>
>               <string>software</string>
>               <key>title</key>
>               <string>MyApp</string>
>           </dict>
>       </dict>
>   </array>
> </dict>
> </plist> 
> ```

因此，总而言之：您的用户看到的网络链接将链接到一个 plist，该 plist 描述了 iDevice 的操作系统、软件以及下载位置。现在，请记住，您的企业许可证仅允许您分发给属于您公司的个人。确保网站安全是明智之举。

**更新：**从 iOS 7.1 开始，清单必须托管在 HTTPS 链接上。只是 HTTP 将不再起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:31:02.240

> 一种分发应用程序的方法，无需要求用户将配置文件和应用程序文件复制到 iTunes，然后将 iPhone 与之同步。

现在，他们唯一需要做的就是在手机上点击电子邮件中的链接，这将在设备上打开网站，然后他们可以点击在 iPhone 上安装应用程序和配置文件。

[http://blog.amarkulo.com/ad-hoc-profiles-and-application-distribution-via-web](http://blog.amarkulo.com/ad-hoc-profiles-and-application-distribution-via-web)

其他参考：

[http://support.twixlmedia.com/kb/epublisher-builder-application/how-do-i-create-the-distribution-provisioning-profile-for-my-ad-hoc-build](http://support.twixlmedia.com/kb/epublisher-builder-application/how-do-i-create-the-distribution-provisioning-profile-for-my-ad-hoc-build)

# c - C - fgets 和标准输入的长度

> ID：12730134
> 
> 赞同：0
> 
> 时间：2012-10-04T14:58:32.117
> 
> 标签：c, string, fgets

我用 C 语言编写了一个程序，让用户输入密码以让他进入系统。我正在使用方法 fgets。正确的密码是“letmein”。这是代码：

现在我要验证用户通过stdin输入的密码不超过8个字符。由于程序是（没有空 if 语句），即使用户输入“letmein0000000”，用户也被授予访问权限，因为 fgets 只获取前七个字符。现在我只想在用户输入“letmein”时授予用户访问权限。请问这怎么做？

PS 我必须使用 fgets 因为它是我项目中的要求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:03:07.437

来自文档[`fgets()`](http://en.cppreference.com/w/c/io/fgets)：

> 从给定的文件流中最多读取 count - 1 个字符并将它们存储在 str 中。生成的字符串始终以 NULL 结尾。如果出现文件结尾或找到换行符，则解析停止，在这种情况下 str 将包含该换行符。

请求读取最多`8`字符（这意味着`9`作为第二个参数传递）。如果用户输入了多个`7`字符，那么它可能会被捕获。通知用户失败并跳过`stdin`. 如果用户正确输入`7`并点击返回`fgets()`将在换行符处停止。

检查返回值`fgets()`以确保代码不会尝试处理未初始化的缓冲区。

例如：

```
char password[9];

if (fgets(password, 9, stdin))
{
    /* Strip new-line if present. */
    char* nl = strchr(password, '\n');
    if (nl) *nl = 0;

    if (strlen(password) > 7)
    {
        /* Password too long. 
           Skip remaining input if necessary. */
        int c;
        while ((c = fgetc(stdin)) != EOF && c != '\n');
    }
    else if (0 == strcmp("letmein", password))
    {
        /* Good password. */
    }
    else
    {
        /* Incorrect password. */
    }
} 
```

# vim - vim sass.vim 加载时间

> ID：12730137
> 
> 赞同：0
> 
> 时间：2012-10-04T14:58:38.447
> 
> 标签：vim, time, load, profiling

我在探查器模式下运行 vim`vim --startuptime vim.log`

```
188.898  000.073  000.073: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/perl.vim
188.991  000.063  000.063: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/php.vim
189.069  000.047  000.047: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/puppet.vim
189.143  000.045  000.045: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/python.vim
189.226  000.054  000.054: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/ruby.vim
1516.865  1327.610  1327.610: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/sass.vim
1517.095  000.170  000.170: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/sh.vim
1517.225  000.082  000.082: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/tcl.vim
1517.318  000.061  000.061: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/tex.vim
1517.397  000.048  000.048: sourcing /home/slavik/.vim/bundle/syntastic/syntax_checkers/xhtml.vim
1518.369  1331.773  002.261: sourcing /home/slavik/.vim/bundle/syntastic/plugin/syntastic.vim 
```

并找到很长的加载 sass.vim

它来源：

```
if exists("loaded_sass_syntax_checker")
    finish
endif
let loaded_sass_syntax_checker = 1

"bail if the user doesnt have the sass binary installed
if !executable("sass")
    finish
endif

"use compass imports if available
let g:syntastic_sass_imports = ""
if executable("compass")
    let g:syntastic_sass_imports = system("compass imports")
endif

function! SyntaxCheckers_sass_GetLocList()
    let makeprg='sass '.g:syntastic_sass_imports.' --check '.shellescape(expand('%'))
    let errorformat = '%ESyntax %trror:%m,%C        on line %l of %f,%Z%m'
    let errorformat .= ',%Wwarning on line %l:,%Z%m,Syntax %trror on line %l: %m'
    let loclist = SyntasticMake({ 'makeprg': makeprg, 'errorformat': errorformat })

    let bn = bufnr("")
    for i in loclist
        let i['bufnr'] = bn
    endfor

    return loclist
endfunction 
```

这个文件有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:18:47.987

我想你应该更新 syntastic：在 2.0.0 更新日志条目中有

> 只有需要的源语法检查器 - 而不是在 vim 启动时加载所有这些

# apache - 使用 nginx 服务元图块

> ID：12730138
> 
> 赞同：4
> 
> 时间：2012-10-04T14:58:39.563
> 
> 标签：apache, nginx, openstreetmap, mapnik

是否有可以提供预渲染 mod_tile metatiles 的 nginx 扩展？或者，使用 nginx 服务非元地图图块是否会影响性能？

感谢您的任何帮助。

干杯。

# python - python在函数中使用全局变量

> ID：12730142
> 
> 赞同：-1
> 
> 时间：2012-10-04T14:58:46.463
> 
> 标签：python

我有一个更新变量的脚本，但返回另一个变量。

例如：

```
x = ""
def callMe():

   global x
   x = "test"
   y = "123"

   return y

def main():
   y1 = callMe()
   print y1
   print x

if __name__ == "__main__":
   main() 
```

这里得到 x emtpy 的值，即使它是在 callMe() 函数中更新的。

有任何想法吗？

**更新：**

我之前的脚本错了，这就是我当前脚本的行为方式，并且它没有在 main 中显示 z 的值...

```
x = ""
z = ""
def callMe():

    global x
    x = "test"
    y = "123"
    if y:
        z = y
    else:
        z = "dont know"
    return y

def main():
    y1 = callMe()
    print y1
    print x
    print z

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:12:25.010

如果您要导入此模块而不是直接运行它，则 main() 将不会执行。否则，没有理由这不应该工作。

如果您*将此*代码作为模块导入，`__name__`将返回模块的名称，而不是`'__main__'`. 因此，main() 将永远不会被调用，并且 x 的值将保持不变`""`

# javascript - 为什么这是连接而不是加起来

> ID：12730147
> 
> 赞同：1
> 
> 时间：2012-10-04T14:58:53.773
> 
> 标签：javascript, jquery, html

非常基本的问题，但我有以下 HTML：

```
<input type="text" id="nspcc" value="0" onkeyup="doTotal();" />
<input type="text" id="barnados" value="0" onkeyup="doTotal();" />
<input type="text" id="savethechildren" value="0" onkeyup="doTotal();" />
<input type="text" id="childresnsociety" value="0" onkeyup="doTotal();" />
<input type="text" id="childreninneed" value="0" onkeyup="doTotal();" />
<input type="text" id="total" disabled="disabled"  /> 
```

以及以下 jQuery：

```
function doTotal() {
  var one,two,three,four,five,total;
  one = $('#nspcc').val();
  two = $('#barnados').val();
  three = $('#savethechildren').val();
  four = $('#childresnsociety').val();
  five = $('#childreninneed').val();
  total = one+two+three+four+five;
  $('#total').val(total);
}

doTotal(); 
```

我可能在做一些愚蠢的事情，但为什么要`total`连接而不是添加值？我需要使用`parseInt`什么的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:00:12.213

> 我需要使用 parseInt 什么的吗？

是的。该`.val()`方法返回一个字符串，因此您需要确保您正在对数字进行操作（因为`+`运算符被重载以根据上下文执行加法和连接）：

```
one = parseInt($('#nspcc').val(), 10);
//etc... 
```

不要忘记 ! 的第二个参数（基数`parseInt`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:00:29.223

> 我需要使用 parseInt 什么的吗？

确切地。`val()`将返回*strings*，它们将被连接起来而不是相加。

请注意，使用时`parseInt`您应该为正确的基数提供基数参数（第二个） - 十进制为 10，否则它将*假定*为八进制。

```
one = parseInt( $('#nspcc').val() , 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:00:40.310

简短的回答，是的。您需要 parseInt() 您的 .val() 值，因为它们是值的字符串解释，因此它们将简单地连接。

# php - PHP - 删除字符和单独的数字

> ID：12730150
> 
> 赞同：0
> 
> 时间：2012-10-04T14:58:59.137
> 
> 标签：php

有谁知道 PHP 代码会从字符串中去除除数字之外的任何字符。但是如果数字之间有空格，它会将它们分开。

示例输入：

```
$input = '28  -  200 mm'; 
```

输出：

```
$num1 = 28;
$num2 = 200; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:06:27.417

```
<?php
   $str = '28  -  200 mm';
   $pattern = '#(?P<numbers>\d+)#';
   if(preg_match_all($pattern, $str, $matches)){
       foreach ($matches['numbers'] as $number) {
           echo $number;
       }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:06:14.677

您的基本正则表达式如下所示：

```
#\b(\d+)\b#
        ^^ word boundary
    ^^^ one or more digits 
```

所以像：

```
preg_match_all('#\b(\d+)\b#', $your_string, $results); 
```

结果将存储在`$results`数组中，请参阅[`preg_match_all`](http://php.net/manual/en/function.preg-match-all.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:07:10.980

您将有更好的机会使用正则表达式来解决您的问题。

但这里有一个快速的解决方案：

```
$string = "28 - 100 mm";
$arr = explode(" ",$string);
$numbers = array();
foreach($arr as $value)
{
    if(intval($value))
        $numbers[] = intval($value);
} 
```

这导致`array(2) { [0]=> int(28) [1]=> int(100) }`

# .htaccess - Mod_rewrite 有效，但路径已更改

> ID：12730154
> 
> 赞同：1
> 
> 时间：2012-10-04T14:59:11.757
> 
> 标签：.htaccess, mod-rewrite, friendly-url, seo

我有这样的网址 index.php?section=products&id=12 我想要这样的网址 /products/shirt-12 （其中衬衫是产品的名称）。

所以我有一个 PHP 脚本，当您添加产品时，它会在 .htaccess 中添加一行。这是我添加了 1 个产品的 .htaccess：

```
RewriteEngine On
RewriteRule /products/shirt-12 /index.php?section=products&id=12 
```

问题是，当我在浏览器中编写 www.domain.com/product/shirt-12 时，没有包含脚本/图像，我查看了一个 image-not-loaded-square，它试图从 / 加载图像products/images/img.jpg 安装在 /images/img.jpg 中。我该如何解决这个问题？我尝试了 DocumentRoot，但出现 500 错误。我该怎么办？

**编辑**：如果我把`/index.php?section=products&id=12`浏览器放进去，url 不会被重写，它会像往常一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:00:11.813

> 问题是当我在浏览器中写 www.domain.com/product/shirt-12 时，没有包含任何脚本/图像

这是因为相对 URI 基础已更改。当您有相对的图像/css/脚本的链接（即它们不以`http://`or开头`/`）时，浏览器必须在其前面附加一个**基础**才能请求资源。当浏览器转到：

```
/index.php?section=products&id=12 
```

基本 URI 是`/`，所以它看到的任何相对链接，它都会简单地附加`/`到它们的开头。但是当浏览器看到：

```
/product/shirt-12 
```

基本 URI 是`/product/`，因此它看到的任何相对链接都会附加`/product/`到开头，并且您的所有相对链接都将被破坏。

`/`您可以通过在 URI 前面添加 a 将所有相对链接更改为绝对链接来解决此问题。或者将其添加到页面的标题中：

```
<base href="/"> 
```

> 另外，如果我`/index.php?section=products&id=12`在浏览器中输入 url，则不会重写它，它会像往常一样工作。

当然它不是重写的，你没有它的规则。重写规则的工作方式如下：

```
RewriteRule <match> <target> <flags> 
```

无论传入的 URI 是什么，如果它与正则表达式匹配，`<match>`它就会被重写为`<target>`. 就是这样。没有`<target>`回到模棱两可的正则表达式（这到底是怎么工作的？？）。它不会神奇地改变浏览器 URL 地址栏中显示的内容。它只需要与正则表达式匹配的内容，并*在服务器内部将其*重写为`<target>`.

如果您想更改浏览器中的内容，这与您的图像路径完全不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:33:50.313

我的建议是不要浪费时间学习和创建 mod_rewrite 规则并尝试为您的网站完善每个 url 为什么不采用像 Codeigniter [http://codeigniter.com](http://codeigniter.com)或 Kohana [http:/这样的超级简单、超级轻量级​​的框架/kohanaframework.org](http://kohanaframework.org)并在此基础上构建您的网站

这些框架提供了一个基础，一个可以构建的基础，并让您拥有无限的可能性。

# delphi - 如何使 Windows 按钮表现为网站按钮

> ID：12730155
> 
> 赞同：0
> 
> 时间：2012-10-04T14:59:11.383
> 
> 标签：delphi, paypal, indy

请原谅我确定是一个简单的问题，但我已经搜索了很长时间并且无法弄清楚。

我想从我的程序中启用功能升级。当用户在我的表单上按下按钮时，我希望浏览器启动并直接转到贝宝网站。就好像他们在我的网页上按下了 PayPal 提供的“立即购买”按钮。

我知道我可以使用 ShellExecute 在特定页面上启动浏览器，但我认为我不能通过它发出 POST，可以吗？

我想我需要做一个 HTTPRequest，并且作为一个默认使用 Indy TIdHTTPRequest 组件的 Rad Studio 用户。我发现的所有示例和文档都是关于以编程方式捕获输出的，我只想启动浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:15:14.403

与其将 Web 浏览器作为一个单独的进程启动，不如使用一个`TWebBrowser`或`TEmbeddedWB`组件将 Web 浏览器放置在您的应用程序本身中，然后您可以`POST`使用它发送请求，在应用程序的 UI 中显示结果，甚至在需要时捕获返回的 HTML , 操作浏览器的 DOM 接口等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:44:53.527

看来我想要的不可能了……

我已经确认我无法通过 ShellExecute 方法进行 POST，并且 HTTPRequest 方法仅用于捕获输出。

可能我真正需要做的是深入研究 paypal api 并在我的应用程序中处理整个事情。虽然不确定这是否可能，而且它可能比任务值得付出更多的努力。

干杯

# c# - 在代码片段中获取命名空间

> ID：12730156
> 
> 赞同：5
> 
> 时间：2012-10-04T14:59:18.600
> 
> 标签：c#, visual-studio-2010, visual-studio-2008, code-snippets, visual-studio-sdk

[此处](http://msdn.microsoft.com/en-us/library/ms242312.aspx)的 Microsoft 链接列出了我们可以使用的三种方法。

但是我们如何获得当前的命名空间呢？我看到有一个类似的问题，但答案是使用宏，它不能解决这个特定问题。

NameSpace() 做这样的事情：

```
<CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
    <CodeSnippet Format="1.0.0">
        <Header>
            .
            .
        </Header>
        <Snippet>
            <Declarations>
                <Literal>
                    <ID>namespace</ID> 
                    <Function>NameSpace()</Function>                     
                </Literal>
            </Declarations>
            <Code Language="csharp">
                <![CDATA[
                    $namespace$
                ]]>
            </Code>
        </Snippet>
    </CodeSnippet>
</CodeSnippets> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T11:01:15.420

发现它可以完成，它把类[ExpansionProvider](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.expansionprovider.aspx)和[ExpansionFunction带入画面](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.expansionfunction.aspx)

对于上面的代码片段，我必须这样做：

```
internal class NameSpaceExpansionFunction : ExpansionFunction
    {
        public NameSpaceExpansionFunction(ExpansionProvider provider)
            : base(provider)
        {
        }

        public override string GetCurrentValue()
        {
           //get namespace
           return namespace;
        }
    } 
```

LanguageService 告诉代码片段文件在哪里寻找函数的定义：

```
public class MyLanguageService : LanguageService
    {
        public override ExpansionFunction CreateExpansionFunction(ExpansionProvider provider,
                                                                  string functionName)
        {
            ExpansionFunction function = null;
            if (String.Compare(functionName, "NameSpace", true) == 0)
            {
                function = new NameSpaceExpansionFunction(provider);
            }
            return function;
        }
    } 
```

事实证明这更像是一个教程问题，因此我提供了上面的链接。应该会有所帮助。为我工作:)

# c - 如何计算闰年DAY？

> ID：12730157
> 
> 赞同：-3
> 
> 时间：2012-10-04T14:59:19.327
> 
> 标签：c

所以用户输入年份+它告诉它是否是闰年..但现在我需要帮助让一周中的一天在闰年时弹出。

```
# include <math.h>
# include <stdio.h>

int main (void)
{
    int yearEntered;

    printf("Enter a year: ");

    int read = scanf("%d", &yearEntered);

    if (read == 0 )
    {
        printf("Bad input: requires an integer");
    }
    else if (yearEntered%4==0 && yearEntered%100!=0 || yearEntered%400==0)
    {
        printf("%04d is a leap year and February 29th is on a \n",yearEntered, dayString);

    // Not so sure about this switch statement......
    switch (DayOfWeek)
    {
        case 0:
        {
            dayString("Sunday");
            break;
        }
        case 1:
        {
            dayString("Monday");
            break;
        }
        case 2:
        {
            dayString("Tuesday");
            break;
        }
        case 3:
        {
            dayString("Wednesday");
            break;
        }
        case 4:
        {
            dayString("Thursday");
            break;
        }
        case 5:
        {
            dayString("Friday");
            break;
        }
        case 6:
        {
            dayString("Saturday");
            break;
        }
        default:
        {
            dayString("");
        }

    }

    else if (yearEntered < 1752)
    {
        printf("%04d is not a 4 digit year after 1752.",yearEntered);
    }
    else
    {
        printf("%d is not a leap year.\n",yearEntered);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:15:32.173

如果您的问题只是 2 月 29 日的星期几，您只需要计算 2 月 28 日的星期几并增加它（当然是模 7）。

但我想你的问题是找到星期几，不管是哪一天。

在这种情况下，您可能会对 Wikipedia 所说的内容感兴趣：[Determination of the day of week](http://en.wikipedia.org/wiki/Determination_of_the_day_of_the_week)。

# emacs - Emacs：清理撤消树

> ID：12730158
> 
> 赞同：8
> 
> 时间：2012-10-04T14:59:23.507
> 
> 标签：emacs, undo

我注意到在长时间的编辑会话中，调用`undo-tree`(Cx Cu) 变得越来越慢。我认为原因是随着树变大，解析它需要更长的时间（因为它会跟踪我打开文件以来的所有编辑）

有什么方法可以清除打开文件上的撤消树？我已经尝试过`C-x C-v`（`find-alternate-file`），但这会重新打开重置光标的文件（并且在`org-mode` 折叠我的列表等模式下）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T20:02:37.277

使用重置`buffer-undo-tree`变量`M-: (setq buffer-undo-tree nil)`。这将丢弃缓冲区的整个撤消历史记录，如`undo-tree.el`.

这也可以做成一个命令并绑定到一个键上，代码如下：

```
(defun clear-undo-tree ()
  (interactive)
  (setq buffer-undo-tree nil))
(global-set-key [(control c) u] 'clear-undo-tree) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T19:47:30.537

请注意，此提示在最近的撤消树版本中可能已过时。从 0.6 版开始，undo-tree 默认使用“惰性树绘制”。通过仅绘制可见部分（并在您在树周围移动时根据需要扩展它），这显着加快了大型撤消树的可视化。有关更多详细信息，请参阅`undo-tree-visualizer-lazy-drawing`变量的文档字符串。

如果您仍然想丢弃整个撤消树，手动设置`buffer-undo-tree`为`nil`是一个很好的一次性解决方案。一个长期的解决方案是通过限制在丢弃旧数据之前存储多少撤消历史记录来减小 、 和 的值并限制撤消树的`undo-limit`大小`undo-strong-limit`。`undo-outer-limit`

手动调用`undo-tree-discard-history`是没有意义的。每当您执行任何与撤消相关的操作时，它都会自动调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-03T22:54:12.783

有时我必须刷新缓冲区的撤消树，因为我粘贴了一些包含无法在缓冲区/文件的当前编码中显示的字符的文本。所以我发现@Amelio Vazquez-Reina 的功能很有帮助。但是，我不希望函数被意外调用，所以添加了一个确认提示和一个`buffer-undo-tree`确实是缓冲区局部变量的检查：

```
(defun clean-undo-tree ()
"Clear current buffer's undo-tree.
Undo-tree can cause problems with file encoding when characters
are inserted that cannot be represented using the files current
encoding. This is even the case when characters are only
temporarily inserted, e.g. pasted from another source and then
instantly deleted. In these situations it can be necessary to
clear the buffers undo-tree before saving the file."
  (interactive)
  (let ((buff (current-buffer)))
    (if (local-variable-p 'buffer-undo-tree)
        (if (y-or-n-p "Clear buffer-undo-tree? ")
            (progn
              (setq buffer-undo-tree nil)
              (message "Cleared undo-tree of buffer: %s" (buffer-name buff)))
          (message "Cancelled clearing undo-tree of buffer: %s" (buffer-name buff)))
      (error "Buffer %s has no local binding of `buffer-undo-tree'" (buffer-name buff))))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T22:05:17.017

您可以修剪树而不是丢弃整个东西：

```
undo-tree-discard-history is a compiled Lisp function in
`undo-tree.el'.

(undo-tree-discard-history)

Discard undo history until we're within memory usage limits
set by `undo-limit', `undo-strong-limit' and `undo-outer-limit'. 
```

# visual-studio - Microsoft Visual Studio C 运行时库在 Mypro.exe 中检测到致命错误

> ID：12730159
> 
> 赞同：2
> 
> 时间：2012-10-04T14:59:23.967
> 
> 标签：visual-studio, mfc, managed-c++

我有一个`MCVC++ 2010`MFC 项目，它访问具有 4functions 的第三方 C DLL。我让 DLL 在 Visual Studio 2010 中的 Win32 项目中运行良好。但是当我将它集成到运行良好的 MFC 项目中时，我得到了这个

`"Microsoft Visual Studio C Runtime Library has detected a fatal error"`我尝试从此 DLL 访问函数的那一刻。我在调用堆栈或输出控制台中没有得到任何有用的信息。就在函数调用之后，控制权落在 debughook.c 中，最后`_debugger_hook_dummy = 0;`

**数据库钩子**

```
int __cdecl _CrtDefaultAllocHook(int nAllocType,void * pvData, size_t nSize,int nBlockUse, long lRequest,const unsigned char * szFileName, int nLine )
{
return 1; /* allow all allocs/reallocs/frees */
}

#endif  /* _DEBUG */

int _debugger_hook_dummy;

#ifdef _M_IA64
#undef _CRT_DEBUGGER_HOOK
#define _CRT_DEBUGGER_HOOK __crt_debugger_hook
#endif  /* _M_IA64 */

__declspec(noinline)
void __cdecl _CRT_DEBUGGER_HOOK(int _Reserved)
{
    /* assign 0 to _debugger_hook_dummy so that the function is not folded in retail */
    (_Reserved);
    _debugger_hook_dummy = 0;
} 
```

代码包含在 中`try-catch`，但是当我尝试介入时，控件永远不会到达 catch 块。没有明确的迹象表明问题出在哪里。任何指针？

# grails - 如何从数据库而不是属性中获取验证消息？

> ID：12730160
> 
> 赞同：0
> 
> 时间：2012-10-04T14:59:27.440
> 
> 标签：grails, grails-2.0

**背景**

我们正在迁移一个遗留数据库，该数据库在数据库中具有国际化字段的标签。我们仍然将`messages.properties`用于一些静态资源，例如 css 类（名称）。该表如下所示：

```
ITEMS
-------------------------------------------
code           number(3)      not null PK
language_code  number(3)      not null PK
label          varchar2(90)   not null
hint           varchar2(250)  not null
help           varchar2(4000)
label_client   varchar2(90)   not null
hint_client    varchar2(250)  not null
help_client    varchar2(4000) 
```

对于 html 组件，我们只需在此表中查找项目，设置他的标签（自定义 TagLib），这很有效。请注意，我们还给客户端修改一些标签（*_client 字段）的机会。

**问题**

默认情况下，Grails 将尝试查看带有后缀的 messages.properties，`.label`以便在验证错误消息中使用。例如 ( `Person.name.label=name`)：

```
Property name must not be blank. 
```

如果我在数据库中的项目具有人的标签名称，则在验证中这将是不一致的，因为输入的标签不同。

我们无法将项目与 .properties 同步，因为客户端可以更改它们。所以解决方案是以某种方式修改 Grails 验证消息以返回数据库的内容。

这可能吗？仅对于验证消息，我如何从数据库而不是属性中获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:10:27.920

[这篇博文](http://graemerocher.blogspot.co.uk/2010/04/reading-i18n-messages-from-database.html)建议您可以通过实现自己的`messageSource`Spring bean 并将其注册到`resources.groovy`. 它可以追溯到 2010 年，但仍然值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:16:57.670

您可以使用本地化插件！;)

[http://grails.org/plugin/localizations](http://grails.org/plugin/localizations)

从插件概述：

此插件将从数据库中提取 i18n 定义，而不是从 i18n 文件夹中的标准属性文件中提取。

它将执行以下操作：

创建一个名为 Localization 的域类和相应的表 使用它在 i18n 文件夹中找到的所有消息属性预填充该表 确保 Grails 根据它在数据库中找到的内容而不是 118n 文件夹写入 i18n 消息

此外，该插件还具有以下附加功能来帮助您：

用于添加、删除和更新 i18n 消息的 CRUD UI 用于提高速度的缓存 可用于客户端模板的 JSONP 操作。

# jquery - jQuery组成的属性没有获得价值

> ID：12730161
> 
> 赞同：0
> 
> 时间：2012-10-04T14:59:29.817
> 
> 标签：jquery, custom-attributes, attr

嘿，我正在尝试获取我制作的单击的自定义单选按钮的值。

这是按钮的js：

```
$("#df-opt0,#df-opt1,#df-opt2,#df-opt3,#df-opt4").click(function (input) {
    $('#df-opt0').css("background-image", "url(img/radiobutton-OFF.png)");
    $('#df-opt1').css("background-image", "url(img/radiobutton-OFF.png)");
    $('#df-opt2').css("background-image", "url(img/radiobutton-OFF.png)");
    $('#df-opt3').css("background-image", "url(img/radiobutton-OFF.png)");
    $('#df-opt4').css("background-image", "url(img/radiobutton-OFF.png)");
    //alert($(this).attr('id'));
    $('#' + $(this).attr('id')).css("background-image", "url(img/radiobutton-ON.png)");
    //globalRadioSelected = $(this).attr('id');

    fValue =  $(input).attr("store-id");
    alert('the ID :'+fValue);
}); 
```

这是 HTML：

```
<div id="df-opt0" store-id="100"></div>
<div id="df-opt1" store-id="200"></div>
<div id="df-opt2" store-id="300"></div>
<div id="df-opt3" store-id="400"></div>
<div id="df-opt4" store-id="500"></div>
<div id="df-opt4txt" store-id="600">
    <input type="text" id="df-opt4txt-txt" style="width: 130px;" class="formBoxes">
</div> 
```

当我点击其中任何一个时，我得到的是：**ID：未定义**

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:01:31.550

不要。`fValue = $(this).attr("store-id");`_`fValue = $(input).attr("store-id");`

传递给您的单击处理函数的参数是单击事件本身，它显然没有`store-id`属性。

在这种情况下，该`this`对象将与`input.target`（单击事件的目标 DOM 元素）相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:01:59.857

你应该使用“this”ala：

```
fValue =  $(this).attr("store-id"); 
```

# iphone - iPhone 应用程序在 iOS 4.1 中无法运行

> ID：12730163
> 
> 赞同：0
> 
> 时间：2012-10-04T14:59:31.743
> 
> 标签：iphone, ios, ios4, iphone-sdk-3.0

请帮忙。iPhone App 在 iOS 4.1 中无法运行，但在 iOS 5 和 iOS 6 中运行良好。我在这个应用程序中集成了 Facebook 和 Twitter API。我在 Xcode 4.3 中构建了该应用程序。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:07:27.330

确保在“构建阶段”中将所有 ios5/6 库（如 social.framework、Accounts.framework 等）设置为可选，因为这些在 ios4.3 中不可用。

单击您的项目->在主窗口中选择您的目标->选择构建阶段选项卡->查看“将二进制文件与库链接”部分。

另请提供有关西蒙所说的错误的更多信息。

# java - Android 应用程序可以使用除 Dalvik 之外的其他 VM

> ID：12730165
> 
> 赞同：3
> 
> 时间：2012-10-04T14:59:33.117
> 
> 标签：java, android, oracle, mobile, dalvik

是否可以在应用程序中包含不同的 JVM，并让应用程序在这个 JVM 中运行，而不是在 Android 提供的 Dalvik VM 中运行？我之所以问，是因为 Oracle 的 ADF Mobile 在 Android 和 iOS 上都使用了自己的 JVM，但没有具体说明他们是如何做到的。它应该基于 J2ME CDC VM。

我的同事认为他们在 dalvik VM 中运行它，并将实现 Java ME CDC 规范所需的库添加到 apk 中。

如果它真的是一个完全独立的 JVM，那么理论上，它也应该可以包含一个 Java EE JVM 并从后端扔一些可重用的业务逻辑，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:06:41.650

是的，理论上您甚至可以添加对 C# 的支持，这意味着您可以添加 CLR/CLI 支持，或者您喜欢的任何语言或 VM。

所有的 Android 组件都是真正的模块化，整个操作系统都是可定制的，问题是这需要大量的金钱、时间、技术诀窍，最有可能的是专利拖钓。

[**点击我的 youtube 回复**](http://www.youtube.com/watch?v=TkPiXRNee7A#t=47m20s)

这是来自关于 Android 的官方讨论。

# android - 这是播放重复警报音的正确方法吗？

> ID：12730172
> 
> 赞同：1
> 
> 时间：2012-10-04T15:00:25.173
> 
> 标签：android, android-mediaplayer, android-alarms

我正在制作一个闹钟应用程序。我需要播放我设置的用户选择的音调`RingtoneManager`。当闹钟响起时，这就是我播放闹钟铃声的方式：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
Uri alarmSound = prefs.getString("alarmSound", ""); //alarmSound is the Uri of alarm tone
MediaPlayer mp = MediaPlayer.create(NormalAlarm.this, alarmSound);
try 
{
    mp.setAudioStreamType(AudioManager.STREAM_ALARM);
    mp.setLooping(true);
    mp.start();
} 
catch (IllegalStateException e) 
{
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

它工作正常，但它使用的音量当然是`Media Volume`手机的音量。我如何使它与`Alarm Volume`手机一起使用？我正在使用`MediaPlayer`，因为我希望警报音重复直到用户停止警报。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:25:43.230

[MediaPlayer.setAudioStreamType()](http://developer.android.com/reference/android/media/MediaPlayer.html#setAudioStreamType%28int%29)是您正在寻找的：

```
mp.setAudioStreamType(AudioManager.STREAM_ALARM);
mp.setLooping(true);
mp.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T00:30:09.017

问题是您`MediaPlayer.create()`用于创建 MediaPlayer。`Create`函数调用`prepare()`最终确定您的媒体并且不允许您更改的函数`AudioStreamType`。

解决方案是使用`setDataSource`而不是 create()：

```
MediaPlayer mp = new MediaPlayer();
mp.setAudioStreamType(AudioManager.STREAM_ALARM);
mp.setLooping(true);
try {
   mp.setDataSource(NormalAlarm.this, alarmSound);
   mp.prepare();
} catch (IOException e) {
   e.printStackTrace();
}
mp.start(); 
```

有关更多信息，请参阅[此链接](https://developer.android.com/reference/android/media/MediaPlayer.html#create(android.content.Context,%20int))。

# django - IntegrityError：使用 django 美味派登录用户时重复键值违反唯一约束

> ID：12730177
> 
> 赞同：0
> 
> 时间：2012-10-04T15:00:41.603
> 
> 标签：django, tastypie

这是我的用户登录资源：

```
class UserLoginResource(ModelResource):

    class Meta:
        object_class = User
        queryset = User.objects.all()
        allowed_methods = ['post','get']
        include_resource_uri = False
        resource_name = 'login'
        excludes = ['is_active','is_staff','is_superuser']
        authentication = SillyAuthentication()
        authorization = SillyAuthorization()

    def obj_create(self, bundle, request=None, **kwargs):
        try:
            bundle = super(UserLoginResource, self).obj_create(bundle,request,**kwargs)
            bundle.obj.set_password(bundle.data.get('password'))
            bundle.obj.set_username(bundle.data.get('username'))
            bundle.obj.save() 
            return bundle
        except IntegrityError:
            raise BadRequest('The username exists')

    def dehydrate(self,bundle):
        bundle.data['custom_field'] = "Whatever you want"
        return bundle 
```

当我使用已经存在的用户名和密码发帖时，它会给出 500 错误，提示完整性错误，并且用户名已经存在。

1.  如何登录？
2.  即使有错误（假设用户名不存在，我如何美化错误响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:11:58.457

1.  使用此代码，您正在创建用户对象而不是登录

2.  见 sweetpie.validation

# jquery - 将一堆动画分配给jquery中的变量？

> ID：12730178
> 
> 赞同：0
> 
> 时间：2012-10-04T15:00:49.523
> 
> 标签：jquery

我对 jQuery 相当陌生，所以我问：

我在三个 div 上运行了 3 个条件动画：

```
var viewport = $(window).width();
if ( viewport < 1400 ) { 
     $("#panel").animate({marginLeft:"-175px"}, 500 );
     $("#colleft").animate({width:"0px", opacity:0}, 400 );
     $("#showPanel").show("normal").animate({width:"28px", opacity:1}, 200);
     $("#colright").animate({marginLeft:"50px"}, 500);
}else{
     $("#colright").fadeIn('slow').animate({marginLeft:"200px"}, 200);
     $("#panel").fadeIn('slow').animate({marginLeft:"0px"}, 400 );
     $("#colleft").fadeIn('slow').animate({width:"190px", opacity:1}, 400 );
     $("#showPanel").animate({width:"0px", opacity:0}, 600).hide("slow");
} 
```

如您所见，这是基于视口执行动画。

我必须在`$(window).resize(function() {`和上重复这些条件`$("#hidePanel").click(function(e){`。

我必须重复代码还是可以将它们分配给变量？

**编辑**

以下功能无法在条件下工作。

```
function collapseMenu(){
    $("#panel").animate({marginLeft:"-175px"}, 500 );
    $("#colleft").animate({width:"0px", opacity:0}, 400 );
    $("#showPanel").show("normal").animate({width:"28px", opacity:1}, 200);
    $("#colright").animate({marginLeft:"50px"}, 500);
}

if ( viewport < 1400 ) { 
     collapseMenu();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:06:03.793

如果将动画代码重构为函数，则可以通过以下方式将它们绑定到事件。

```
$(window).resize(animateDivs);
$("#hidePanel").click(animateDivs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:06:04.270

将它全部包装在一个函数中怎么样？

```
function runAnimation(){
    var viewport = $(window).width();
    if ( viewport < 1400 ) { 
        $("#panel").animate({marginLeft:"-175px"}, 500 );
        $("#colleft").animate({width:"0px", opacity:0}, 400 );
        $("#showPanel").show("normal").animate({width:"28px", opacity:1}, 200);
        $("#colright").animate({marginLeft:"50px"}, 500);
    }else{
        $("#colright").fadeIn('slow').animate({marginLeft:"200px"}, 200);
        $("#panel").fadeIn('slow').animate({marginLeft:"0px"}, 400 );
        $("#colleft").fadeIn('slow').animate({width:"190px", opacity:1}, 400 );
        $("#showPanel").animate({width:"0px", opacity:0}, 600).hide("slow");
    }
 } 
```

所以稍后你可以简单地调用：

```
$(window).resize(function() {
    runAnimation();
    //.... 
});

$("#hidePanel").click(function(e){
    runAnimation();
    //.... 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:06:07.333

做

```
function widthHanadler() {
    if ( viewport < 1400 ) { 
         $("#panel").animate({marginLeft:"-175px"}, 500 );
         $("#colleft").animate({width:"0px", opacity:0}, 400 );
         $("#showPanel").show("normal").animate({width:"28px", opacity:1}, 200);
         $("#colright").animate({marginLeft:"50px"}, 500);
    }else{
         $("#colright").fadeIn('slow').animate({marginLeft:"200px"}, 200);
         $("#panel").fadeIn('slow').animate({marginLeft:"0px"}, 400 );
         $("#colleft").fadeIn('slow').animate({width:"190px", opacity:1}, 400 );
         $("#showPanel").animate({width:"0px", opacity:0}, 600).hide("slow");
    }
} 
```

并将此函数绑定到您的事件：

```
$(window).resize(widthHanadler);
$("#hidePanel").click(widthHandler); 
```

# svn - 在 SVN 的分支之间合并单个文件是否“安全”？

> ID：12730180
> 
> 赞同：7
> 
> 时间：2012-10-04T15:00:53.693
> 
> 标签：svn, version-control, merge

之前已经[回答](https://stackoverflow.com/questions/3876854/svn-merge-individual-file-revisions-from-a-branch-into-trunk)了如何在 SVN 中合并单个文件的问题，所以我的问题是：这样做安全吗？如果我最终在某个时候合并整个分支，SVN 会“获取”特定文件已经被合并吗？如果我在合并整个分支之前来回合并更改怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T16:55:47.343

是的，您可以合并单个文件，但这样做通常被认为是*不好的做法*。

问题是 Subversion 使用`svn:mergeinfo`来跟踪合并。如果文件没有此`svn:mergeinfo`属性，则使用`svn:mergeinfo`父目录的 。当您到处合并单个文件时，所有这些文件现在都拥有自己的`svn:mergeifno`属性。

这会导致*真正的*问题吗？不，Subversion 工作正常。问题只是被察觉。每次 Subversion 更新`svn:mergeinfo`属性时，它都会创建该文件的另一个版本，即使该文件的*内容*没有更改。

当您将主干合并到分支时（反之亦然），这是一个问题。你运行这样的命令：

```
$ svn merge http://svn.mycorp.com/svn/project/trunk . 
```

您会看到 100 多个已修改的文件，但您**知道**应该只合并 3 或 4 个文件。

检查这些文件，您会发现唯一的区别是`svn:mergeinfo`属性已更改以表明您已将最新内容合并到这些文件中（即使它不会更改文件本身的内容）。没有真正的问题。只需允许 Subversion在提交时*更新*这些文件的`svn:mergeinfo`属性，一切都很好。是的，如果您执行 a ，合并将显示 100 多个文件在提交中发生了更改`svn log`，但仔细查看会显示只有它们的`svn:mergeinfo`属性发生了更改。

您不应该做的是*还原*这些文件。这将标志着更改没有合并到这些文件中（即使它没有更改它们的内容）。下一次合并将尝试重新合并上一次合并并造成更大的破坏。

有时，当开发人员看到这一点时，他们开始向我抱怨修改。毕竟，如果文件本身没有变化，为什么还要修改这些文件呢？他们对所有的`svn:mergeinfo`变化感到沮丧。

这就是为什么始终在项目的根目录而不是单个文件合并被认为是*最佳实践。*这样，只有项目根目录下的目录才能获得该`svn:mergeinfo`属性，而项目中的所有其他文件都将简单地使用该`svn:mergeinfo`属性。

如果您和您的所有开发人员都理解这一点，并且愿意*忍受*这种行为，那么合并单个文件就没有问题。由于这种并发症，通常不会这样做。

# c# - 在 MVC 应用程序中使用 Microsoft.Web.WebPages.OAuth.OAuthWebSecurity 卡住了

> ID：12730181
> 
> 赞同：5
> 
> 时间：2012-10-04T15:01:06.673
> 
> 标签：c#, asp.net, asp.net-mvc, dotnetopenauth

我不理解`Microsoft.Web.WebPages.OAuth`命名空间中的一些代码，特别是[OAuthWebSecurity](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/a0142d45396d#src/Microsoft.Web.WebPages.OAuth/WebPagesOAuthDataProvider.cs)类。

这是这里的方法：

```
internal static void RequestAuthenticationCore(HttpContextBase context, 
    string provider, string returnUrl)
{
    IAuthenticationClient client = GetOAuthClient(provider);
    var securityManager = new OpenAuthSecurityManager(context, 
        client, OAuthDataProvider);
    securityManager.RequestAuthentication(returnUrl);
} 
```

第一行很好 => 为这个身份验证请求获取提供者数据。让我们假设这是一个`TwitterClient(..)`.

现在，我们需要创建一个`SecurityManager`接受三个参数的类 ..。第三个参数是什么？一个`OAuthDataProvider`？这被定义为静态，这里：

```
internal static IOpenAuthDataProvider OAuthDataProvider =
    new WebPagesOAuthDataProvider(); 
```

这创建了一个`WebPagesOAuthDataProvider`. 这是我的问题。这是什么？为什么它必须紧密耦合到一个`ExtendedMembershipProvider`？什么是`ExtendedMembershipProvider`? 为什么需要这个？

在我的 Web 应用程序中，我尝试使用 RavenDb 数据库和我自己的自定义主体和自定义身份。与 ASP.NET 附带的*Membership*或*SimpleMembership*无关。

那个类是什么，为什么要使用它等？它的目的是什么？这是 DNOA 需要的吗？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T03:48:23.690

我没有写你提到的代码，所以我在这里可能是错的，但我相信你提到的 ASP.NET 代码确实绑定到他们的 Membership 提供程序。

如果您不使用 ASP.NET 成员资格提供程序，我建议您直接使用 DotNetOpenAuth（而不是通过 Microsoft 添加的外观），它没有如此紧密的耦合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:37:31.280

如果您不需要 ASP.NET 会员系统在您的系统上提供本地登录帐户（存储在您的本地会员数据库中的帐户），我不会采用任何基于 WebMatrix 的位（WebSecurity / OAuthWebSecurity）。

它们实际上使与 DNOA 交互变得更加困难，并且或多或少地同时隐藏了所有有趣的部分......

由于我需要本地帐户，我最终将所有源代码都拉到我的源代码中，然后从那里编辑它（我这样做还有其他原因，不仅仅是为了丰富与 DNOA 的交互）。

如果您需要本地帐户 - 使用 WebMatrix 如果您不需要本地帐户 - 直接使用 DNOA。

# jsf-2 - 通过js禁用按钮

> ID：12730188
> 
> 赞同：3
> 
> 时间：2012-10-04T15:01:34.560
> 
> 标签：jsf-2, primefaces

如果文本输入值长度小于 3，我需要禁用按钮。

我试图使用 js，但按钮没有被禁用，它只是改变颜色

```
 <p:autoComplete id="ac"
                    value="#{bean.selectedNetCode}" 
                    completeMethod="#{bean.complete}"
                    maxlength="3"
                    size="3"
                    maxResults="10"
                    onkeyup="checkLength(this.value)">
        <p:ajax event="itemSelect" update="genButton" listener="#{bean.handleNetCodeChange}"/>
    </p:autoComplete> 

 function checkLength(value){
      if(value.length <= 2){
      document.getElementById("genButton").disabled = true;
 } 
```

知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T15:13:47.140

您可以定义 , 的属性`widgetVar`，`p:commandButton`这将使您可以通过 javascript 访问组件。

然后，您可以使用一些方法。[来自 PrimeFaces 3.4 文档](http://www.primefaces.org/documentation.html)：

> *   disable()：禁用按钮
> *   enable()：启用按钮

* * *

例子：

```
<p:autoComplete onkeyup="checkLength(this.value)">/>
<p:commandButton widgetVar="myButton" />

function checkLength(value){
     if(value.length <= 2)
         myButton.disable();
} 
```

* * *

**2021 年 7 月更新**：

正如 dian jin 在评论中指出的那样，使用 PimeFaces 4.0 到 5.0 时，您需要调用`PF('myButton').disable();`以正确引用 widgetVar。

# salesforce - 标记为收藏

> ID：12730189
> 
> 赞同：0
> 
> 时间：2012-10-04T15:01:34.940
> 
> 标签：salesforce, visualforce

我想为 Opportunities 对象创建一个收藏夹字段，用户可以在其中将任何机会标记为收藏，然后通过创建一个名为 My Favorites 的新视图来查看他的所有收藏夹。收藏夹将在用户之间受到限制。请帮助完成此功能。我需要创建一个字段还是可以通过任何其他方式来实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:15:15.543

如何向对象添加一个新的自定义复选框字段，例如“MyFavorite__c”？

# mysql - Rails mysql2未定义方法'accept'用于nil：NilClass

> ID：12730190
> 
> 赞同：13
> 
> 时间：2012-10-04T15:01:46.620
> 
> 标签：mysql, ruby, ruby-on-rails-3, rake, migrate

我知道这是一百万次，但尝试了一切，但我仍然收到此错误：

```
$ rake db:migrate
rake aborted!
undefined method `accept' for nil:NilClass

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

这是宝石列表（不是全部）：

```
activemodel (3.2.8)
activerecord (3.2.8)
activerecord-mysql2-adapter (0.0.3)
builder (3.1.3, 3.0.3)
bundler (1.2.1)
mysql2 (0.3.2)

rails (3.2.8)
rails_apps_composer (2.2.10)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
sqlite3 (1.3.6)
therubyracer (0.10.2)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.10)
twitter-bootstrap-rails (2.1.3)
tzinfo (0.3.33)
uglifier (1.3.0) 
```

我尝试过所有版本的 mysql2（从 0.2.7 到 0.3.2）

编辑（数据库文件）：

```
development:
  adapter: mysql2
  database: tripwall
  username: root
  password: pass
  host: localhost
  pool: 5
  timeout: 5000 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-09T13:15:23.823

肖恩和米奇的两个答案都有助于解决方案：

*   mysql2 gem的版本应该是0.3.11及以上，并且
*   activerecord-mysql2-adapter 应该从 gemfile 中删除。

想明确一点：

1.  您的 gemfile 应该包含以下行（单独删除 activerecord-mysql2-adapter）：

    > 宝石'mysql2'

2.  `gem list`应输出以下行：

    > activerecord-mysql2-适配器 (0.0.3)
    > 
    > mysql2 (0.3.11)

编辑：

当我尝试打开脚手架生成的模型的索引时，我也遇到了以下错误：

```
NoMethodError (undefined method `accept' for nil:NilClass):
app/controllers/posts_controller.rb:5:in `index' 
```

我不得不重新启动 rails 服务器；这解决了问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-04T15:21:00.277

我只记得当我遇到错误时我做了什么来修复错误。

只需删除

> activerecord-mysql2-适配器 (0.0.3)

从你的gemfile！

希望能解决它！

干杯，肖恩

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T15:57:41.933

我不知道为什么，但是当我添加 gem "mysql2", ">= 0.3.11" 并且它起作用了。我已经尝试过 gem "mysql2", '0.3.2' 并且没有用。还是非常感谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:05:14.090

我建议改变`localhost to 127.0.0.1`。请显示您的模型，也许某些字段是mysql的关键字

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T14:07:16.907

请添加`port: 3306`到您的 database.yml，而`127.0.0.1`不是`localhost`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-20T18:37:58.917

除了前面提到的解决方案：

*   摆脱 gem activerecord-mysql2-adapter
*   使用gem mysql2 0.3.11及以上版本

结果发现同时安装了一个较旧的 mysql2 gem，巧妙地抛弃了我的 Rails 应用程序：

```
gem list
mysql2 (0.2.2, 0.3.17)

gem uninstall mysql --version=0.2.2 
```

最后在卸载之后，我的应用程序启动时没有出现这个错误：

> /home/master/.rbenv/versions/2.5.6/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/rubygems_integration.rb:408:in `block (2 levels) in replace_gem': Please install the mysql2 adapter:` gem install activerecord-mysql2-adapter `（无法激活mysql2（~> 0.3.10），已经激活mysql2-0.2.2。确保所有依赖都添加到Gemfile。）（LoadError）

# python - 为什么 Python 属性需要具有相同名称的辅助函数？

> ID：12730191
> 
> 赞同：3
> 
> 时间：2012-10-04T15:01:48.513
> 
> 标签：python, properties, overloading

在解释属性的[文档](http://docs.python.org/library/functions.html#property "文档")中，据说：

> 确保为附加函数提供与原始属性相同的名称（在本例中为 x。）

即，getter、setter 和 deleter 方法都必须具有相同的名称。

为什么？而且，Python 禁止方法重载，不是吗？

编辑：为什么以下代码在 Python 2.6 中运行时会失败？

```
class Widget(object):
    def __init__(self, thing):
        self.thing = thing
        print self.thing

    @property
    def thing(self):
        return self._thing

    @thing.setter
    def set_thing(self, value):
        self._thing = value

if __name__ == '__main__':
    Widget('Some nonsense here') 
```

它的输出是：

```
 Traceback (most recent call last):   
 File "widget.py", line 16, in <module>
     Widget('Some nonsense here')     
 File "widget.py", line 3, in __init__
     self.thing = thing 
 AttributeError: can't set attribute 
```

当 set_thing() 重命名为 thing() 时，代码可以正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:16:54.700

Python 确实不具有方法重载功能，但您是正确的，文档鼓励您以相同的方式命名 getter 和 setter，并演示它以启动。这里发生了什么？

诀窍是了解方法装饰器在 Python 中是如何工作的。每当你看到这样的东西：

```
@foo
def bar():
    frob()
    quux() 
```

Python 在幕后实际上所做的就是以这种方式重写它：

```
def bar():
    frob()
    quux()
bar = foo(bar) 
```

换句话说：定义一个函数`bar`，然后将其替换为调用`foo` *bar 函数*的结果。

虽然这都是正确的，但在解析名称时，评估顺序实际上与上述顺序略有不同。你可能更容易假装实际发生的事情看起来更接近这个：

```
def __secret_internal_function_name__():
    frob()
    quux()
bar = foo(__secret_internal_function_name__) 
```

为什么这很重要？让我们看一下该文档链接中的 Python：

```
class C(object):
    def __init__(self):
        self._x = None

    @property
    def x(self):
        """I'm the 'x' property."""
        return self._x

    @x.setter
    def x(self, value):
        self._x = value

    @x.deleter
    def x(self):
        del self._x 
```

让我们用我们现在知道的来重写它，以了解 Python 实际在做什么：

```
class C(object):
    def __init__(self):
        self._x = None

    def __secret_x_prop__(self):
        """I'm the 'x' property."""
        return self._x
    x = property(__secret_x_prop__)

    def __secret_x_setter__(self, value):
        self._x = value
    x = x.setter(__secret_x_setter__)

    def __secret_x_getter__(self):
        del self._x
    x = x.deleter(__secret_x_getter__) 
```

现在，我们实际上可以看到发生了什么：我们没有重载函数；我们正在逐步构建一个`property`引用其他函数的对象。

还值得注意的是，根据您创建属性的方式，名称不需要匹配。具体来说，如果您使用`property`函数显式创建属性，如文档中的第一个示例中所做的那样，则名称可以是您想要的任何名称；该示例将它们称为`getx`,`setx`和`delx`, 并且工作正常。在我假设的安全预防措施中，`property.setter`,`property.deleter`等*确实*要求传递的函数具有相同的名称，但它们在幕后做的事情与更明确的`property`示例相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:06:15.720

> 在解释属性的文档中，据说：

不正确。那是解释**使用属性名称作为装饰器一部分的**文档。以“经典”方式创建属性时，方法可以具有所需的任何名称。

而且由于装饰器正在拦截方法创建，因此没有重载。

# sql - 获取用户定义对象的属性名称

> ID：12730201
> 
> 赞同：0
> 
> 时间：2012-10-04T15:02:26.063
> 
> 标签：sql, oracle, user-defined-types

我想生成一个 PL/SQL 脚本，它提供用户定义的对象类型的属性名称。我可以看到定义的对象类型，但找不到该对象的属性名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:20:57.583

这适用于 Oracle 11g，并且应该适用于早期版本

```
select attr_name 
from all_type_attrs
where owner = YourSchemaName
and type_name = YourTypeName 
```

如果此对象在另一个用户的架构中，您需要拥有执行权限才能在 all_type_attrs 中看到它。

（为清楚了解 APC 评论中的权限而进行了编辑）

# ios - iOS 6.0需要在ARC下释放GCD队列吗？

> ID：12730202
> 
> 赞同：20
> 
> 时间：2012-10-04T15:02:29.523
> 
> 标签：ios, xcode, automatic-ref-counting, grand-central-dispatch

在 Paul Hegarty 课程上的 iOS 5 教程之后，我们在一个演示 GCD 使用的应用程序中看到了这段代码。显然 GCD 需要发布，因为与多线程有关的问题在仍然需要哪些对象方面有些不可预测。

```
 dispatch_async(dowloadQueue, ^{
    ....
    // do some stuff
   ....
    });
  dispatch_release(dowloadQueue); 
```

我已升级到 iOS 6 和 XCode 4.5，并且收到“ARC 禁止显式发布...”消息

我没有在 iOS5 / XCode 4.2 下尝试过这段代码

这仅仅是因为 ARC 变得更聪明了，我不再需要在 GCD 中发布了吗？还是我刚才误会了？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-04T17:42:58.657

当您以 Mountain Lion 和 iOS 6.0 为目标时，ARC 现在将为您管理调度队列和其他 GCD 类型。如果您针对 OS X 或 iOS 的早期版本，您仍然需要显式保留和释放 GCD 类型（不仅仅是出于线程安全的原因，否则您会泄漏内存），但是仅针对较新的操作系统时会为您处理版本。

这就是为什么您在面向 iOS 6.0 时会在 ARC 下看到这样的编译器错误。

# ruby-on-rails - 拥有_许多孩子的 ActiveRecord 对象是否知道孩子何时属于它？

> ID：12730203
> 
> 赞同：2
> 
> 时间：2012-10-04T15:02:35.283
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个对象模型，例如：

```
class parent < ActiveRecord::Base
    has_many: children
end

class child < ActiveRecord::Base
    belongs_to: parent
end 
```

我的问题是，如果我这样做：

```
a_parent = Parent.create
child = Child.create(parent: a_parent) 
```

父母是否有一种干净的方式来了解新的子对象，以便我可以做一些事情（比如让父母发送出生通知）？我宁愿不让孩子这样做（他们甚至不会拼写，更不用说买邮票了）。:)

我可以想象在孩子中使用观察者或 after_create 来调用父级上的公共方法（调用 parent.look_at_me）。理想情况下，我想要我在父母中定义的东西。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:29:52.703

您可以使用[关联回调](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Association+callbacks)

```
class Parent
  has_many :children, :after_add => :send_birth_announcement

  def send_birth_announcement(child)
    # ...
  end
end 
```

这将在这样的情况下工作：

```
a_parent.children << a_child
a_parent.children.create(child_attributes) 
```

然而，ORM 是有泄漏的抽象，所以不难错过这样的回调。总是可以在不实例化父级的情况下创建一个子级，所以也许`after_create`在 child 中并不是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:00:51.373

基本答案是肯定的，父母知道它的孩子。这是通过`parent_id`在子表中有一个字段来完成的。每当父母想要找到它的孩子时，它所要做的就是向该表询问所有具有正确父母ID的孩子。

这是关系数据库的基本概念，非常值得阅读更多内容，以确保您了解使用模型关联时发生的情况。

编辑：对您的示例进行轻微的代码更正

```
a_parent = Parent.create
child = Child.create(:parent => a_parent) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-04T15:12:23.670

您需要确保进行适当的迁移。见[这里](https://stackoverflow.com/questions/8368580/rails-3-belongs-to-has-one-and-migrations)。既然你已经这样做了，上面的代码将自动关联`a_parent`到它的`child`.

# javascript - 动态生成的文本框字段上的 Jquery Rails 验证

> ID：12730207
> 
> 赞同：0
> 
> 时间：2012-10-04T15:02:51.377
> 
> 标签：javascript, jquery, validation

我有以下动态生成的列表。如果产品的数量输入少于可用数量，我希望能够进行一些简单的 Jquery 验证，我想提醒用户。我想使用的事件很可能是 .change() 事件，因为我希望在用户尝试提交表单之前进行验证。我遇到的问题是我需要一个包罗万象的解决方案，因为 id 是动态驱动的。不知道从哪里开始。

```
<ul>
  <li>
    <input class="shipment_qty_field" id="qty_product_1" type="text" />
  </li>
  <li></li>
  <li></li>
  <li id ="avail_qty_product_1></li>
</ul>
<ul>
  <li>
    <input class="shipment_qty_field" id="qty_product_2" type="text" />
  </li>
  <li></li>
  <li></li>
  <li id="avail_qty_product_2"></li>
</ul>   
<ul>
  <li>
    <input class="shipment_qty_field" id="qty_product_3" type="text" />
  </li>
  <li></li>
  <li></li>
  <li id="avail_qty_product_3"></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:16:09.687

使用 id = "avail_qty_product_xx" 获取所有 li 并将值粘贴到 li 中，将输入标签保存为“data-qty”，例如：

```
 `<li class="qty_container" data-qty="3">
    <input class="shipment_qty_field" type="text" />
  </li>` 
```

`然后您可以为 li 添加更改处理程序`

 ````
`$('li.qty_container input').change(function() {
  threshold = parseInt($(this).closest('li').data('qty'))
   if(parseInt($(this).val()) > threshold) {
      alert('threshold exceeded!')
   }
})` 
````

# c# - 跨多个类存储通用设置的最佳模式

> ID：12730210
> 
> 赞同：4
> 
> 时间：2012-10-04T15:02:56.213
> 
> 标签：c#, inheritance, multiple-inheritance

我正在创建两个单独的类来访问自定义文件。让我们调用我的类`MyReader`和`MyWriter`.

我遵循与 .NET 类（例如`StreamReader`和`StreamWriter`遵循）相同的模式，其中有一个单独的类用于读取和写入。除了遵循既定模式之外，这还为我解决了一些其他问题。

但是，我确实需要一些用于阅读器和编写器类的通用设置。例如，我有一个用户应该能够更改的分隔符。我还有一些固定数据，其中包含用于解析的常用信息。

有人可以提出一个好的模式，尤其是遵循常见的 .NET 框架实践的模式，为这样的多个类创建通用设置吗？我的类已经继承自 .NET 类。似乎多重继承可能是一种方式，但在 C# 中似乎不受支持。

（我使用的是 Visual Studio 2012。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:08:10.117

```
public interface IStreamFilter
{
   string Delimiter {get; private set;}
   List<string> FilterCriteria {get; private set;}
}

public class StreamFilter : IStreamFilter
{
   public string Delimiter {get;}
   public List<string> FilterCriteria {get;}

   public void StreamFilter (string delimiter, List<string> filterCriteria)
   {
       this.Delimiter = delimiter;
       this.FilterCriteria = filterCriteria;
   }
} 
```

您可以在 Reader 和 Writer 类的构造函数中传递 IStreamFilter 的实例。

```
 public class MyReader
 {
      private IStreamFilter _streamFilter;

      public MyReader(IStreamFilter streamFilter)
      {
           this._streamFilter = streamFilter;
      }

      public string ReadString()
      { 
          var readString = reader.GetString(x => x.Contains(this._streamFilter.Delimiter);
           // apply the filter for reading string
      }
 } 
```

在代码中要实例化 MyReader 类的任何位置，您都可以在构造函数中创建 IStreamFilter 的新实例，并根据用户偏好（假设来自用户配置文件）设置分隔符和其他过滤条件。然后将该 StreamFilter 实例传递给 MyReader 实例。这样，您可以在不依赖 Singleton 的情况下即时自定义过滤器设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:08:55.117

尝试使用接口。`interface`像`abstract class`但只能包含将由实现它们的类“充实”的方法或属性定义。然后类可以根据需要实现任意数量的接口。看看如何`IEnumerable`允许列表、字典和数组共享一组公共方法，允许它们在 中使用`foreach`，或者如何`IDisposable`允许在 中声明一个类`using`。

我制作了一组墨迹文本框控件，它们都应该从多个应用程序的用户配置中获取其显示样式设置，因此我让它们从 IInkInputSettings 接口中获取这些设置，并在所有应用程序的 UserConfig 类中实现该接口。

或者，您可以通过单例实现全局配置：

```
public class GlobalConfig{
    /* your configuration properties here */
    private static GlobalConfig instance = null;
    public static GlobalConfig Instance{
        get{
            if(instance == null) instance=new GlobalConfig();
            return instance;
        }
    }
    private GlobalConfig(){ /* set default property values */ }
} 
```

这比具有静态成员的静态类要好，因为它仅在您第一次使用时才被实例化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:20:57.280

[这似乎是单例](http://www.yoda.arachsys.com/csharp/singleton.html)可能有意义的罕见情况之一：

```
public abstract class MyBase
{
    // This is the .NET class you're inheriting from, just putting it as a placeholder.
}

public class MyReader : MyBase
{
    private static readonly IMySettings settings = MySettings.Instance;
}

public class MyWriter : MyBase
{
    private static readonly IMySettings settings = MySettings.Instance;
}

internal interface IMySettings
{
    // Define your setting's properties, such as delimiter character.
}

internal sealed class MySettings : IMySettings
{
    private MySettings()
    {
    }

    public static IMySettings Instance
    {
        get
        {
            return Nested.Instance;
        }
    }

    // Implement your setting's properties, such as delimiter character.

    private static class Nested
    {
        private static readonly IMySettings instance = new MySettings();

        // Explicit static constructor to tell C# compiler not to mark type as beforefieldinit
        static Nested()
        {
        }

        public static IMySettings Instance
        {
            get
            {
                return instance;
            }
        }
    }
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T15:24:18.263

您可以使用基于构造函数的依赖注入将设置类插入到类中。让一个 IoC 容器启动一个设置类（无论是否为单例）并基于基类或接口注入它是很简单的。

# silverlight - 动态创建 Silverlight Prism Shell？

> ID：12730216
> 
> 赞同：0
> 
> 时间：2012-10-04T15:03:09.583
> 
> 标签：silverlight, shell, prism

我想构建一个具有可配置布局的 Silverlight Prism 应用程序。理想情况下，我会有一个配置文件来指定我的 shell 中所有区域的位置。然后在运行时从这个配置文件创建 shell。

这可能吗？

我可以有一个“空”外壳，然后在运行时以编程方式将区域注入其中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:30:00.257

我目前的解决方案是在运行时从 XAML 文件中读取一个新的 shell，并用它替换旧的 shell。

为了使这更加动态，我可以想象在运行时生成带有区域的 XAML 文件，然后再读取它。

# entity-framework - 在 Entity Framework 5 中使用已定义的中间实体映射多对多关系

> ID：12730218
> 
> 赞同：0
> 
> 时间：2012-10-04T15:03:17.477
> 
> 标签：entity-framework, mapping, entity-framework-5

我正在尝试明确定义多对多关系。明确地说，我的意思是我正在定义中间实体并使用 Fluent API 对其进行配置。下面是我的代码：

```
public class ContentType
{
    public Int64 Id { get; set; }
    public Guid SID { get; set; }
    public String Name { get; set; }
    public ContentType Parent { get; set; }
    public Nullable<Int64> ParentId { get; set; }
    public Category Category { get; set; }
    public Nullable<Int64> CategoryId { get; set; }
    public Boolean IsLocked { get; set; }
    public virtual ICollection<ContentTypeColumn> ContentTypeColumns { get; set; }
}

public class Column
{
    public Int64 Id { get; set; }
    public Guid SID { get; set; }
    public String SchemaName { get; set; }
    public DataType DataType { get; set; }
    public Int32 DataTypeId { get; set; }
    public virtual ICollection<ContentTypeColumn> ContentTypeColumns { get; set; }
}

public class ContentTypeColumn
{
    public Int64 Id { get; set; }
    public Int64 ColumnId { get; set; }
    public Column Column { get; set; }
    public ContentType ContentType { get; set; }
    public Int64 ContentTypeId { get; set; }
    public Boolean IsRequired { get; set; }
    public Boolean IsCalculated { get; set; }
    public String Title { get; set; }
    public Boolean IsSystem { get; set; }
    public Expression Expression { get; set; }
    public Int32 ExpressionId { get; set; }
    public virtual ICollection<ColumnRule> Rules { get; set; }
}

public class ContentTypeConfiguration : EntityTypeConfiguration<ContentType>
{
    public ContentTypeConfiguration()
    {
        this.ToTable("ContentType");
        this.Property(x => x.Id).HasColumnName("ContentTypeId").IsRequired();

        this.Property(x => x.Name).HasMaxLength(30);
        this.HasOptional(x => x.Parent)
            .WithMany()
            .HasForeignKey(x => x.ParentId);

        this.Property(x => x.SID).IsRequired();
    }
}

public class ContentTypeColumnConfiguration : EntityTypeConfiguration<ContentTypeColumn>
{
    public ContentTypeColumnConfiguration()
    {
        this.ToTable("ContentTypeColumn");
        this.HasRequired(x => x.ContentType)
            .WithMany()
            .HasForeignKey(x => x.ContentTypeId);
        this.Property(x => x.Title).HasMaxLength(50).IsRequired();
        this.Property(x => x.Id).HasColumnName("ContentTypeColumnId");
    }
} 
```

出于某种原因，在结果`ContentTypeColumn`表上创建了两个外键。一个是可为空的外键，另一个是不可为空的。我只想生成后者，我不知道可空键来自哪里。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:41:33.270

这是错误的：

```
this.HasRequired(x => x.ContentType)
    .WithMany()
    .HasForeignKey(x => x.ContentTypeId); 
```

您具有反向导航属性，因此您必须使用 int in`WithMany`否则 EF 可能会创建两个关系：

```
this.HasRequired(x => x.ContentType)
    .WithMany(y => y.ContentTypeColumns)
    .HasForeignKey(x => x.ContentTypeId); 
```

顺便提一句。根本不需要此映射，因为它是通过默认约定自动发现的。

# sharepoint-2010 - SharePoint 2010 流量将流向应用服务器而不是 WFE

> ID：12730220
> 
> 赞同：0
> 
> 时间：2012-10-04T15:03:21.697
> 
> 标签：sharepoint-2010, webserver, web-traffic

这是我的场配置（1 个应用服务器、1 个 Web 前端和 1 个后端数据库服务器）。我刚刚查看了应用服务器和 WFE 上的 IIS 日志，了解到所有 Web 流量都流向 APP 服务器而不是 WFE 服务器。

如何确保所有流量都需要到达 WFE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:06:32.790

您需要回答的一些问题：

*   您使用什么 URL 来访问您的 Sharepoint 站点？
*   URL 的 DNS 是否指向 WFE？
*   您的备用访问映射配置是否正确？

# arrays - Processing中如何实现DRAWING处理？

> ID：12730225
> 
> 赞同：0
> 
> 时间：2012-10-04T15:03:53.157
> 
> 标签：arrays, arraylist, drawing, processing, linear-algebra

我们都知道如何在 Processing 中画线。

但是当我们画一条线时，这条线会立即显示出来。

如果我想亲眼目睹绘制过程，即看到线条向前移动，逐渐完成一整条线。

这就是我想要实现的：画几条线和曲线，最终变成某种图案。

那么如何实现呢？使用数组？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:37:27.290

在处理过程中，所有的绘图都发生在一个循环中。像您描述的那样创建动画序列的一种简单方法是使用 frameCount 来驱动它，并且使用模数函数 % 是创建循环的好方法。例如，沿 x 轴设置动画：

```
void draw() {
   float x = 50;
   float y = 50;
   float lineLength = 50;
   int framesToAnimate = 60;
   line(x,y,x+float(frameCount % framesToAnimate)/framesToAnimate*lineLength, y);
} 
```

注意：如果您不强制转换/转换为浮点数，将会发生奇怪的事情

我经常使用它来为其他功能设置动画，例如颜色。

```
fill(color(127 + sin(float(frameCount)/90)*127, 0, 0, 127)); 
```

如果您想更高级，请使用[PVector](http://processing.org/reference/PVector.html)设置矢量和坐标。[Daniel Shiffman 的网站](http://www.shiffman.net/teaching/nature/vectors/)上有一个很好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:15:17.730

如果要设置独立于帧速率的动画，可以使用 mills() 代替。这将返回自草图开始以来的当前时间，因此您可以设置在给定时间内以秒为单位发生的事情。例如：

```
long initialTime;

void setup(){
size(400,200);
initialTime = millis();
}
void draw() {
float x = 50;
float y = 50;                              //set the multiplier to adjust speed
line(x,y,x+(millis()-initialTime)*0.01, y);           //10 px/sec
line(x,y+50,x+(millis()-initialTime)*0.05, y+50);     //50 px/sec
line(x,y+100,x+(millis()-initialTime)*0.001, y+100);  // 1 px/sec
 } 
```

还有一些动画库，我已经看到了一些令人印象深刻的结果，但我从未使用过它们。这里有一个[清单](http://processing.org/reference/libraries/#animation)。

# php - 在 Plesk API 中获取特定邮箱设置的数据包结构是什么

> ID：12730228
> 
> 赞同：0
> 
> 时间：2012-10-04T15:04:12.520
> 
> 标签：php, xml, plesk

我正在使用 Plesk API 创建一个邮箱管理器，作为我正在编写的 CMS 的一部分。我已经设法获得了正确的 XML 数据包结构，用于查看域上的所有邮箱并创建新邮箱，正如 Plesk API 文档中所述。

但是，目前，我正在尝试找出是否有办法获取特定邮箱的设置（由邮箱 ID 和/或名称指定）。我需要获取姓名、邮箱配额和任何别名。我可以为域上的每个邮箱获取这些设置，但我想知道是否有办法通过邮箱 ID 作为数据包请求的一部分来细化这些设置（而不是将所有邮箱放入一个数组中并通过 ID 搜索它们） .

希望这是有道理的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:37:05.693

您将需要[在 Plesk API 中使用“过滤器”](http://download1.parallels.com/Plesk/PP11/11.0/Doc/en-US/online/plesk-api-rpc/34498.htm)，即 smth like

```
<packet version="1.6.3.0">
<mail>
<get_info>
   <filter>
      <site-id>12</site-id>
      <mailname>
              <name>ann</name>
      </mailname>
   </filter>
   <mailbox/>
</get_info>
</mail>
</packet> 
```

我没有机会测试这个 API 调用，但是上面的参考应该给你关于这个示例请求的所有缺失的细节

# java - 为所有组件 Java 设置相同的字体

> ID：12730230
> 
> 赞同：8
> 
> 时间：2012-10-04T15:04:14.643
> 
> 标签：java, swing, fonts, jframe, jpanel

我想为 a 中的所有组件设置一个特定的字体，`JPanel`但我更喜欢这个问题仍然更笼统，并且不限于 JPanel。如何将字体设置为容器（JFrame 或 JPanel）中的组件列表？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T16:09:09.720

这是一个简单的方法，它允许您为任何容器下的整个组件树指定字体（或者只是一个简单的组件，没关系）：

```
public static void changeFont ( Component component, Font font )
{
    component.setFont ( font );
    if ( component instanceof Container )
    {
        for ( Component child : ( ( Container ) component ).getComponents () )
        {
            changeFont ( child, font );
        }
    }
} 
```

只需将您的面板和特定字体传递到此方法中，您也将重构所有子项。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-04T15:12:41.560

**-**你可以`UIManager`用来做这个......

**例如：**

```
public class FrameTest {

    public static void setUIFont(FontUIResource f) {
        Enumeration keys = UIManager.getDefaults().keys();
        while (keys.hasMoreElements()) {
            Object key = keys.nextElement();
            Object value = UIManager.get(key);
            if (value instanceof FontUIResource) {
                FontUIResource orig = (FontUIResource) value;
                Font font = new Font(f.getFontName(), orig.getStyle(), f.getSize());
                UIManager.put(key, new FontUIResource(font));
            }
        }
    }

    public static void main(String[] args) throws InterruptedException {

        setUIFont(new FontUIResource(new Font("Arial", 0, 20)));

        JFrame f = new JFrame("Demo");
        f.getContentPane().setLayout(new BorderLayout());

        JPanel p = new JPanel();
        p.add(new JLabel("hello"));
        p.setBorder(BorderFactory.createTitledBorder("Test Title"));

        f.add(p);

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(300, 300);
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T15:09:56.583

[`UIManager`](http://docs.oracle.com/javase/6/docs/api/javax/swing/UIManager.html)为要更改的组件设置字体值。例如，您可以通过执行以下操作设置用于标签的字体：

```
Font labelFont = ... ;
UIManager.put("Label.font", labelFont); 
```

请注意，不同的外观 (L&F) 可能具有不同的`UIManager`类属性，因此如果您从一种 L&F 切换到另一种，您可能会遇到问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-11T14:12:19.123

灵感来自 Mikle Grains Answer 我使用他的代码通过获取旧的字体大小来增加每个组件的字体百分比

```
 public static void changeFont(Component component, int fontSize) {
    Font f = component.getFont();
    component.setFont(new Font(f.getName(),f.getStyle(),f.getSize() + fontSize));
    if (component instanceof Container) {
        for (Component child : ((Container) component).getComponents()) {
            changeFont(child, fontSize);
        }
    }
} 
```

# java - 使用 JPA 标准 API 进行查询

> ID：12730235
> 
> 赞同：0
> 
> 时间：2012-10-04T15:04:29.713
> 
> 标签：java, jakarta-ee, jpa, criteria-api

尝试构建此查询，但我想我遗漏了一些东西。以下是涉及的类：

1.  用户
2.  饮食
3.  日常饮食

以下是我的实体的相关部分（一个非常简单的部分）：

```
public class User {

@Column(name = "User_Name", nullable = false, length = 15, unique = true)
public String userName;

@OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER, optional = true)
@PrimaryKeyJoinColumn
public Diet userDiet;

}

public class Diet {

@OneToOne(optional = false)
@JoinColumn(name = "User_Id")
protected User user;

@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true)
@JoinTable(name = "UsersDiets_DailyDiets", joinColumns = @JoinColumn(name = "User_Id"), inverseJoinColumns = @JoinColumn(name = "DailyDiet_Id"))
protected Collection<DailyDiet> userDailyDiets;
}

public class DailyDiet {

    @Column(name = "Day")
    protected long day;
} 
```

我想简单地提取特定用户在特定日期的用户日常饮食：

```
public UserDiet findByUserNameAndDay(String userName, long day) 
```

但似乎无法使其工作。我应该为此构建 2 个不同的 CriteriaQuery 对象吗？如果我创建 2 个不同的谓词，我该如何使用它们？如果有人可以帮助我完成这个简单的查询，我将不胜感激（我对 JPA 标准 API 很陌生）。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:14:45.267

通过添加到 DailyDiet 类来解决它：

```
@ManyToOne
protected Diet userDiet; 
```

然后在我的 DailyDietDao 中使用以下谓词：

```
Predicate userNameCondition = qb.equal(p.get(DailyDiet_.userDiet).get(UserDiet_.user).get(BaseUser_.userDetails).get(UserDetails_.userName),
        userName); 
```

# jquery - 禁用 IE7 中的功能 - 最佳实践

> ID：12730237
> 
> 赞同：1
> 
> 时间：2012-10-04T15:04:34.130
> 
> 标签：jquery, internet-explorer, optimization

我只想在 IE7 中禁用 JQuery 函数。

最好的方法是什么？

```
select_menu: function() {
            $('select').selectmenu({
                style: 'dropdown',
                appendTo: 'footer#footer form span'
            });

            $('form.filters * select').each(function() {
                $(this).selectmenu({
                    style: 'dropdown',
                    appendTo: $(this).closest('span'),
                    "open": function(){
                        var menu = jQuery('ul#'+$(this).attr('id')+'-menu');
                        menu.hide().slideDown('slow');
                    },
                    "close": function(){
                        var menu = jQuery('ul#'+$(this).attr('id')+'-menu');
                        menu.slideUp('slow');
                    }
                });
            });
        }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:08:21.600

将其直接放在插件脚本之后以禁用 IE7 中的插件

```
<!--[if IE 7]>
<script>
$.fn.selectmenu = function() { return this };
</script>
<![endif]--> 
```

尽管您可以改为修复插件以在 IE7 中工作，但这将是解决问题的最佳方法。

# php - SQLite last_insert_rowid 使用 PHP

> ID：12730239
> 
> 赞同：0
> 
> 时间：2012-10-04T15:04:35.750
> 
> 标签：php, sqlite

我在 PHP 中使用 sqlite_last_insert_rowid 时遇到问题。代码：

```
$database = new SQLiteDatabase('example.db');
$sql_1 = "INSERT INTO ex1(test1, test2) VALUES ('$test1','$test2')";
$database->queryExec($sql_1);

$ex1_ID = sqlite_last_insert_rowid($database);

$sql_2 = "INSERT INTO ex2 (ex1_ID, fname, lname) values ('$ex1_ID','$fname','$lname');";
$database->queryExec($sql); 
```

我想将 ex1 表中的 ID 存储到 ex1_ID 中的表 ex2

```
CREATE TABLE ex1 ( 
ID INTEGER PRIMARY KEY,
test1 LONGTEXT,
test2 LONGTEXT
);

CREATE TABLE ex2 ( 
ID INTEGER  PRIMARY KEY,
ex1_ID INTEGER,
fname LONGTEXT,
lname LONGTEXT,
FOREIGN KEY ( ex1_ID ) REFERENCES ex1 ( ID )
); 
```

完整代码：

```
$database = new SQLiteDatabase('example.db');
    for ($i = 0; $i < 10; $i++) {
        $test1 = "";
        $test2 = "";
        $lenght = rand(300, 400);
        for ($x = 0; $x < $lenght; $x++) {
            $test1 .= rand(0, 9);
            $test2 .= rand(0, 9);
        }
        $sql_1 = "INSERT INTO ex1 (test1,test2) VALUES ('$test1','$test2')";
        $database->queryExec($sql_1);
        $ex1_ID = sqlite_last_insert_rowid($database);

        for ($j = 0; $j < 3; $j++) {
            for ($x = 0; $x < $lenght; $x++) {
                $test1 .= rand(0, 9);
                $test2 .= rand(0, 9);
            }
            $sql_2 = "INSERT INTO ex2 (ex1_ID, fname, lname) values ('$ex1_ID','$test1','$test2');";
            $database->queryExec($sql_2);
        }
    } 
```

我无法从 ex1 表中获取最后一个 ID。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:29:36.140

更新现在我们有更多信息。

由于您使用对象模型方式来查询您的数据库，您是否尝试过

```
$lastid = $database->lastInsertRowid(); 
```

?

# jquery - json 到嵌套无序列表

> ID：12730241
> 
> 赞同：1
> 
> 时间：2012-10-04T15:04:41.017
> 
> 标签：jquery, html, json, html-lists

我正在尝试将 JSON 转换为 jQuery 中的无序列表。这是我的 JSON 数据。

```
var myJSON = "{name:\"Director\",children:[name:\"Exe Director1\",name:\"Exe Director2\",name:\"Exe Director3\",children:[name:\"Sub Director1\",name:\"Sub Director2\",name:\"Sub Director3\",children:[name:\"Cameraman 1\",name:\"Cameraman 2\"]]]}"; 
```

预期的输出是

```
<ul>
    <li>Director
        <ul>
            <li>Exe Director 1</li>
            <li>Exe Director 2</li>
            <li>Exe Director 3
                <ul>
                    <li>Sub Director 1</li>
                    <li>Sub Director 2</li>
                    <li>Sub Director 3
                        <ul>
                            <li>Cameraman 1</li>
                            <li>Cameraman 2</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

我该怎么办！

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:07:34.070

**这正是您需要的：**

使用 jQuery 模板 API。这曾经是 jQuery 的一部分，但目前只能作为插件使用。不过，我认为 jQuery 很快就会再次采用这种或类似的技术。

[http://api.jquery.com/category/plugins/templates/](http://api.jquery.com/category/plugins/templates/)

它超级好用：

```
$.tmpl("template", jsonObject) 
```

这是一个小的基本模板示例：

```
$.tmpl(
    "<li><b>${Id}</b>${Name}</li>", 
    [{Id:1, Name:"Werner"}, {Id:2, Name:"Klaus"}]
); 
```

这将产生以下可以附加到任何地方的 jQuery HTML 元素：

*   **1**维尔纳*   **2**克劳斯

对于您的复杂数据，您还可以使用“{{each}}”模板表示法迭代 JSON 子对象。这里是您的数据和模板的代码：

```
var data = {name:"Director",children:[{name:"Exe Director1"},{name:"Exe Director2"},{name:"Exe Director3", children:[{name:"Sub Director3_1"},{name:"Sub Director3_2"},{name:"Sub Director3_3",children:[{name:"Cameraman3_3_1"},{name:"Cameraman3_3_2"}]}]}]};

var template = '\
    <ul>\
        <li>${name}\
            <ul>\
                {{each(childindex, child) children}}\
                    <li>${child.name}\
                        <ul>\
                            {{each(child2index, child2) child.children}}\
                                <li>${child2.name}</li>\
                            {{/each}}\
                        </ul>\
                    </li>\
                {{/each}}\
            </ul>\
        </li>\
    </ul>\
';

$('body').empty().append($.tmpl(template, data)); 
```

浏览器结果：

*   导向器
    *   执行董事1
    *   exe Director2
    *   exe Director3
        *   副主任3_1
        *   副主任3_2
        *   副主任3_3
        *   ...

这可以通过包含嵌套模板进行调整以支持完全递归......但我是一个懒惰的人，剩下的就是为你做的。

干杯，会

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-18T11:35:59.037

您可以按如下方式使用递归函数。每次调用该函数时，它都会返回一个“UL”及其子“LI”。

```
function generateMenu(data) {

    var ul = $("<ul>");

        $(data).each(function (i, dir) {
             var li = $('<li>' + dir.name + '</li>');
             ul.append(li);

            if (dir.children != null && dir.children.length > 0) {
                li.append(generateMenu(dir.children));
            }

        });

    return ul;
}; 
```

将其用作：

`$("#some-div").append(generateMenu(myJsonData));`

Json是，

```
var myJsonData = JSON.parse('{"name": "Director","children": [{ "name": "Exe Director1" },{ "name": "Exe Director2" },{"name": " Exe Director3","children": [{ "name": "Sub Director1" },{ "name": "Sub Director2" },{"name": "Sub Director3","children": [{ "name" : "摄影师 1" },{ "name": "摄影师 2" }]}]}]}');
```

# objective-c - @property 和 @synthesize

> ID：12730244
> 
> 赞同：9
> 
> 时间：2012-10-04T15:04:48.630
> 
> 标签：objective-c, properties, synthesis

我对Objective C很陌生。（现在两天）。阅读时`@synthesize`，它似乎与我的理解重叠`@property`（我以为我理解）......所以，一些细节需要在我的脑海中解决......这让我很烦恼。

如果我对`@property`和的差异有误，请纠正我`@synthesize`：

如果您在 中声明 a `@property`，`@interface`那么您就是在告诉全世界用户可以期望对该属性使用标准的 getter 和 setter。此外，***XCode 将为您制作通用的 getter 和 setter。*** ...但是，@property 声明会在多大程度上发生*这种*情况？（IE 是否意味着“完全”......就像你的看不见的声明`@interface`，以及你的看不见的代码`@interface`？

-或者-

是否`@property`处理您唯一的看不见的代码声明`@interface`- 而`@synthesize`处理您部分中看不见的代码实现`@implementation`？)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T15:19:25.940

首先，请注意最新版本的 Xcode 不再需要 @synthesize。您可以（并且应该）忽略它。也就是说，这就是这些碎片的作用。

`@property`是访问者的声明。这只是一个声明。以下之间几乎没有区别：

```
@property (nonatomic, readwrite, strong) NSString *something; 
```

对比

```
- (NSString *)something;
- (void)setSomething:(NSString)aSomething; 
```

主要区别在于使用声明这些方法`@property`让编译器自动为您生成（综合）实现。没有要求您让编译器为您做这件事。您完全可以自由地手动实施`something`，`setSomething:`这很常见。但是，如果您不手动实现它们，编译器会自动为您创建一个 ivar，`_something`并为 getter 和 setter 创建一个合理的实现。

在旧版本的 Xcode 中，您必须使用`@synthesize`关键字显式请求自动生成。但这不再需要。今天，使用的唯一原因`@synthesize`是如果您希望 ivar 具有非标准名称（永远不要这样做）。

这里的一个关键点是 methods`something`和`setSomething:`are *just methods*。他们没有什么神奇的。它们不是特殊的“属性方法”。它们只是按照惯例访问一个状态的方法。该状态通常存储在 ivar 中，但不需要。

更清楚一点：`object.something`并不*意味着*`_something`“从`object`.返回命名的 ivar ”。它的意思是“返回 的结果`[object something]`，不管它做什么。” 返回 ivar 的值是很常见的。

您应该使用声明来声明所有状态（内部和外部）`@property`，并且应该避免直接声明 ivars。您还应该始终通过它们的访问器 ( `self.something`) 访问您的属性，除了`init`and`dealloc`方法。在`init`and`dealloc`中，您应该直接使用 ivar ( `_something`)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T15:12:08.310

`@property`使用您提供的任何原子性和 setter 语义在您的类上声明一个属性。

在 Xcode 4.4 中，可以使用自动合成，其中为您提供了来自您的属性的支持 ivar，而无需在`@synthesize`. 此 ivar 的形式为`_propertyName`where your property name is `propertyName`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-16T21:36:57.087

**Objective-C @property 和 @synthesize**

**`@property`**

*   生成 get/set 方法
*   今天（来自 Xcode v4.4 和 LLVM v4.0）`@property`另外使用`@synthesize`inside
    *   @synthesize propertyName = _propertyName

**`@synthesize`**：

*   生成新的 iVar 或与现有 iVar 的链接
*   使用适当的 iVar 生成 get/set 方法的实现

[[可以使用@synthesize 的情况]](https://stackoverflow.com/a/66233088/4770877)

`@property`

```
@interface SomeClass : NSObject
@property NSString *foo;
@end

//generated code
@interface SomeClass : NSObject
- (NSString *)foo;
- (void)setFoo:(NSString)newFoo;
@end 
```

`@synthesize`图案

```
@synthesize <property_name> = <variable_name>;

//Using
//1\. Specify a variable. New variable(variableName) will be generated/linked with existing
@synthesize propertyName = variableName

//if variableName is not exist it generates: 
//NSString *variableName;

//read access
NSString *temp = variableName;

//2\. Default. New variable(propertyName - the same name as a property) will be generated/linked with existing
@synthesize propertyName
//is the same as
//@synthesize propertyName = propertyName

//if propertyName is not exist it generates:  
//NSString *propertyName;

//read access
NSString *temp = propertyName;

//if you specify not-existing <property_name>  you  get
//Property implementation must have its declaration in interface '<class_name>' or one of its extensions 
```

以前您必须使用下一个语法：

```
@interface SomeClass : NSObject
{
    //1\. declare variable
    NSString *_foo;
}
//2\. create property
@property NSString *foo;
@end

@implementation SomeClass
//3\. link property and iVar
@synthesize foo = _foo;
@end 
```

但是今天你可以使用下一个语法

```
@interface SomeClass : NSObject
//1\. create property
@property NSString *foo;
@end 
```

接下来，将为两种情况生成**相同的代码**

```
@interface SomeClass : NSObject
{
    //variable
    NSString *_foo; 
}

//getter/setter
- (void)setFoo:(NSString *)newFoo;
- (NSString *)foo;
@end

@implementation SomeClass
- (void)setFoo:(NSString *)newFoo
{
    _foo = newFoo;
}
- (NSString *)foo
{
    return _foo;
}
@end 
```

# java - Android env下从特定字符串格式解析Java日期

> ID：12730246
> 
> 赞同：1
> 
> 时间：2012-10-04T15:04:52.827
> 
> 标签：java, android, simpledateformat

以下日期格式有什么问题？我收到 java.text.ParseException: Unparseable date Thu, 03 May 2012 14:00:00 CEST

```
String inputDate = "Thu, 03 May 2012 14:00:00 CEST";
SimpleDateFormat DATE_FORMATTER = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss z");
Date parsedDate = DATE_FORMATTER.parse(inputDate); 
```

我尝试了以下组合，但不走运：

```
new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss z");
new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss zzz");
new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss zzz");
new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss z", Locale.US);
new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z", Locale.US);
new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss zzz", Locale.US);
new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss zzz", Locale.US); 
```

如果将 CEST 修改为 CET，我会遇到同样的异常，但对于 PST 则不会。任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:20:44.643

它也适用于我

```
package test.java;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class DateTest {
    public static void main(String[] args) throws ParseException {
        String inputDate = "Thu, 03 May 2012 14:00:00 CEST";
        SimpleDateFormat DATE_FORMATTER = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss z");
        Date parsedDate = DATE_FORMATTER.parse(inputDate);
        System.out.println("Date = " + parsedDate);
    }
} 
```

我得到的输出是：

日期 = 2012 年 5 月 3 日星期四 13:00:00 BST

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:09:53.447

它的工作......看这个..

**-**请更正错字从`inputDateString`到`inputDate``parse()`

它是一个**工作 Java 代码...** 修改它以适合您的 Android 使用...

```
public class CopyArray {

    public static void main(String[] args) {

        String inputDate = "Thu, 03 May 2012 14:00:00 CEST";
        SimpleDateFormat DATE_FORMATTER = new SimpleDateFormat(
                "EEE, d MMM yyyy HH:mm:ss z");
        try {
            Date parsedDate = DATE_FORMATTER.parse(inputDate);
            System.out.println(parsedDate);
        } catch (ParseException e) {

            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:10:44.820

`inputDateString`除了您在实际调用变量时尝试解析的小问题之外`inputDate`，我能够毫无例外地运行您的代码。

# powershell - Powershell Write-Zip 部分文件夹树

> ID：12730248
> 
> 赞同：1
> 
> 时间：2012-10-04T15:04:55.587
> 
> 标签：powershell, zip, pscx

我有一个看起来像这样的文件夹结构：

```
-Daily Logs
  -Script1Logs
  -AnotherScriptLogs
  -ThirdScriptLogs 
```

我想压缩“每日日志”下的所有文件夹并保留相同的文件夹结构。

有没有一种方法可以一次压缩文件夹而不单独浏览每个文件夹？此外，zip 文件是否可以仅包含上面显示的文件结构而不是日志文件夹的整个路径？

这就是我用来压缩 Daily Logs 文件夹的方法，但它不会压缩子文件夹，它包含 Daily Logs 文件夹的整个路径，作为 zip 文件中文件夹结构的一部分。

```
If (!(Test-Path $ARCHIVELOGFOLDER\$ARCHIVELOGFILE)) { 
    Write-Zip $file.FullName $ARCHIVELOGFOLDER\$ARCHIVELOGFILE
    Write-Zip -Path $files -OutputPath $ArchiveFile -Append -FlattenPaths -IncludeEmptyDirectories -Quiet -Level 9
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:37:43.387

`Write-Zip`不是本机 PowerShell cmdlet。您使用的那个看起来像Oisin 编写的[PowerShell 社区扩展版本。](http://pscx.codeplex.com)如果像这样使用，它将保留路径并且不使用完整路径：

```
C:\InetPub> Write-Zip -Path Logs -OutputPath logs.zip -IncludeEmptyDirectories 
```

请注意，在 2.1 和 3.0 的最新候选版本中修复了几个错误。[您可以在此处](http://pscx.codeplex.com/releases/view/94637)和[此处](http://pscx.codeplex.com/releases/view/93945)获取这些版本。

# c# - 将匹配结果从正则表达式转换为字符串列表

> ID：12730251
> 
> 赞同：50
> 
> 时间：2012-10-04T15:05:05.777
> 
> 标签：c#, .net, regex

如何将匹配结果列表从正则表达式转换为`List<string>`？我有这个功能，但它总是会产生异常，

> 无法将“System.Text.RegularExpressions.Match”类型的对象转换为“System.Text.RegularExpressions.CaptureCollection”类型。

```
public static List<string> ExtractMatch(string content, string pattern)
{
    List<string> _returnValue = new List<string>();
    Match _matchList = Regex.Match(content, pattern);
    while (_matchList.Success)
    {
        foreach (Group _group in _matchList.Groups)
        {
            foreach (CaptureCollection _captures in _group.Captures) // error
            {
                foreach (Capture _cap in _captures)
                {
                    _returnValue.Add(_cap.ToString());
                }
            }
        }
    }
    return _returnValue;
} 
```

如果我有这个字符串，

```
I have a dog and a cat. 
```

正则表达式

```
dog|cat 
```

我希望该函数将结果返回到`List<string>`

```
dog
cat 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-10-04T15:21:41.480

使用您拥有的正则表达式，您需要使用它`Regex.Matches`来获取您想要的最终字符串列表：

```
MatchCollection matchList = Regex.Matches(Content, Pattern);
var list = matchList.Cast<Match>().Select(match => match.Value).ToList(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-14T20:41:26.360

要仅获取 Regex 匹配项的列表，您可以：

```
var lookfor = @"something (with) multiple (pattern) (groups)";
var found = Regex.Matches(source, lookfor, regexoptions);
var captured = found
                // linq-ify into list
                .Cast<Match>()
                // flatten to single list
                .SelectMany(o =>
                    // linq-ify
                    o.Groups.Cast<Capture>()
                        // don't need the pattern
                        .Skip(1)
                        // select what you wanted
                        .Select(c => c.Value)); 
```

这会将所有捕获的值“展平”为一个列表。要维护捕获组，请使用`Select`而不是`SelectMany`获取列表列表。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-04T15:15:33.613

使用 Linq 的可能解决方案：

```
using System.Linq;
using System.Text.RegularExpressions;

static class Program {
    static void Main(string[] aargs) {
        string value = "I have a dog and a cat.";
        Regex regex = new Regex("dog|cat");
        var matchesList = (from Match m in regex.Matches(value) select m.Value).ToList();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T15:27:46.180

这是另一个适合您的代码的解决方案。

```
while (_matchList.Success)
{
    _returnValue.Add(_matchList.Value);
    _matchList = _matchList.NextMatch();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-16T07:29:49.147

从历史上看，Regex 集合没有实现泛型集合接口，您使用的 LINQ 扩展方法在泛型接口上运行。MatchCollection 在 .NET Core 中已更新以实现 IList，因此可以与 Selectextension 方法一起使用，但是当您迁移到 .NET Standard 2.0 时，该接口实现不存在，因此您不能只调用 Select。相反，您需要使用`LINQ` `Cast`or`OfType`扩展来转换为`IEnumerable`，然后您可以使用`Select`它。希望有帮助。

例子

```
Regex wordMatcher = new Regex(@"\p{L}+");
return wordMatcher.Matches(text).Cast<Match>().Select(c => c.Value);

Regex wordMatcher = new Regex(@"\p{L}+");
return wordMatcher.Matches(text).OfType<Match>().Select(c => c.Value); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-02-07T08:27:53.817

```
var regex = new Regex("{([A-Za-z])*}");
var result= regex.Matches(text).Where(p => p.Success).Select(p => p.Value).ToList(); 
```

# asp-classic - asp中的组合框更新

> ID：12730257
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:05:14.293
> 
> 标签：asp-classic

我在这里要做的是根据组合框中选择的选项加载图片。但是当我在页面重新加载后从组合框中选择“2011”时，所选选项再次是 2012..请帮帮我....这是我的 ASP 代码

```
!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><
<head><title>Sinhgad Alumni</title>
<script type="text/javascript"></script>
</head>
<link rel="stylesheet" type="text/css" href="theme/gallery.css">
<body>
<%dim conn,rs,alumniyear,rs2
 Response.write(alumniyear)
    Set conn=Server.createObject("ADODB.Connection")
    Set rs=Server.createObject("ADODB.Recordset")
    Set rs2 = server.createObject("ADODB.Recordset")
    conn.open="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" &Server.MapPath("alumni.mdb") & ""
    rs.open "select * from alumni",conn
    %>
<div id="maincontent">
<div class="show">
<form name="form1" method="post"action="gallery.asp">
<h2 style="font:20px SegoeUI, 'Segoe UI', arial, sans-serif;margin: 0 auto;width: 300px;">Pictures of alumni in year:
<select name="drpyear" style="margin: 0 auto;width: 150px;height: 30px;text-align: center" onChange="javascript: document.forms['form1'].submit()" >
<%while NOT rs.EOF%>
<option onclick="javascript: document.forms['form1']">
<%response.write(rs("alumniyear"))%>
</option>
<%rs.MoveNext%>
<%wend%>
</select>
</h2>
</form>
<ul id="gallery">
<%alumniyear=Request("drpyear")
rs2.open "select * from gallery where alumni='"&alumniyear&"'",conn
if rs.EOF then%>
<li><img height="200"width="200" src=<%response.write(rs2("link"))%>></li>
<%else%>
<%while NOT rs2.EOF%>
<li><img height="200"width="200" src=<%response.write(rs2("link"))%>></li>
<%rs.MoveNext
WEND
end if
conn.Close
Set conn =Nothing%>
</ul>
</div>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:33:14.747

您需要在 while 循环内部检查构建选择选项，选择哪个选项。像这样的东西

```
<%while NOT rs.EOF%>       
    <option onclick="javascript: document.forms['form1']"
    <% if (Request.Form("drpyear") = rs("alumniyear")) then response.write "selected='selected'"%>
    >
    <%response.write(rs("alumniyear"))%>
    </option>
<%rs.MoveNext%> 
```

**编辑**：更新代码以使用 Request.Form("drpyear") 而不是 Request("drpyear") 以最小化开销

# android - Android SQLite 中的 setLocale 会发生什么

> ID：12730258
> 
> 赞同：2
> 
> 时间：2012-10-04T15:05:15.423
> 
> 标签：android, sqlite

正如标题所说，当我在 Android SQLite 数据库上调用 setLocale 时实际发生了什么。

*   这是一个耗时的请求吗？
*   setLocale 是否需要重建索引？

谢谢！

# svn - SVN 身份验证/无用户登录

> ID：12730260
> 
> 赞同：1
> 
> 时间：2012-10-04T15:05:26.523
> 
> 标签：svn, apache2

目前我已经设置了一个带有 CollabNet Edge 的 SVN 服务器，它使用 SSL 访问和 LDAP 身份验证。但有一件事是我不明白...

第一个是我无法理解的行。为什么我在日志文件中得到一个不包含用户名的条目。所有其他条目都可以。我通过 svn list [https://example.com/svn/repositoryName访问存储库](https://example.com/svn/repositoryName)

```
www.xx.yy.zz - - [04/Oct/2012:16:49:18 +0200] "OPTIONS /svn/repositoryName HTTP/1.1" 401 401
www.xx.yy.zz - username [04/Oct/2012:16:49:18 +0200] "OPTIONS /svn/repositoryName HTTP/1.1" 200 194
www.xx.yy.zz - username [04/Oct/2012:16:49:18 +0200] "OPTIONS /svn/repositoryName HTTP/1.1" 200 194
www.xx.yy.zz - username [04/Oct/2012:16:49:18 +0200] "PROPFIND /svn/repositoryName/!svn/rvr/12345 HTTP/1.1" 207 1303
www.xx.yy.zz - username [04/Oct/2012:16:49:18 +0200] "PROPFIND /svn/repositoryName/!svn/rvr/12345 HTTP/1.1" 207 4748 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:43:02.557

SVN 仅在需要时才发送凭据，因此它总是首先尝试检索数据而不发送登录数据。当您的服务器回答 HTTP-Code 401（未授权）时，svnclient 将在第二次尝试中添加凭据。

# sql - T-SQL 根据记录集计算阈值

> ID：12730262
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:05:31.760
> 
> 标签：sql, sql-server, tsql, threshold

我有以下结果集：

```
 ContentSendId ContentId   NewsletterId Position    IsConditionMatch SendDate                NumberOfSends IsSendValid
    ------------- ----------- ------------ ----------- ---------------- ----------------------- ------------- -----------
    1             100001      51           1           0                2011-05-14 00:00:00.000 200           0
    2             100001      51           1           0                2011-05-13 00:00:00.000 300           0
    3             100001      51           1           0                2011-05-14 00:00:00.000 100           0
    4             100001      51           1           0                2011-05-13 00:00:00.000 200           0 
```

我需要在 T-SQL 中运行计算，如果给定阈值，则应将记录插入（到临时表中），并且应忽略阈值之外的任何值

所以在这个例子中，假设阈值为 500，应该插入第一条记录和第二条记录。

编辑：在这种情况下，运行总计是需要注意的，因此例如（以上示例已更新）在上述情况下，临时表应插入第一条和第二条记录并停止，因为已达到 500 的阈值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:07:59.283

```
select t1.ContentSendId, t1.ContentId, t1.NewsletterId, t1.Position, t1.IsConditionMatch, t1.SendDate, t1.NumberOfSends, t1.IsSendValid 
into #t
from yourtable t1
    inner join yourtable t2 on t1.ContentSendId>=t2.ContentSendId
group by t1.ContentSendId, t1.ContentId, t1.NewsletterId, t1.Position, t1.IsConditionMatch, t1.SendDate, t1.NumberOfSends, t1.IsSendValid 
having SUM(t2.NumberOfSends) < @threshold 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:08:28.640

看来您只是想过滤结果集。

```
SELECT * FROM t1 
GROUP BY SendDate
HAVING SUM(NumberOfSends) >= 500 
```

# jquery - 没有拇指的图片库

> ID：12730264
> 
> 赞同：1
> 
> 时间：2012-10-04T15:05:34.933
> 
> 标签：jquery, image, gallery, clone, appendto

我正在尝试创建一个 jQuery 图片库（我宁愿创建一个，而不是使用插件）我查看了几个不同的教程和选择器，每个都使用拇指。现在我当前的代码是这样的：

```
$(document).ready(function(){
  $('img').click(function(){
    $(this).clone().appendTo('#imageViewer').css({"opacity":1,"height":"50%"});
  })
}); 
```

问题是，当单击另一个图像时，我无法替换该图像。有没有办法只使用常规图像但使用 CSS 来缩小它们，即 >height: 20%; 不透明度：0.2；但是当点击时，它们会显示在页面上的一个 div 中 >height: 50%; 不透明度：1；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:51:43.700

尝试将所有图像放入包装器 div 中。将 div 设置为“position:relative”，将图像设置为“position:absolute;top:0;left:0”。

然后，JavaScript：

```
var galleryImages = $('#galleryWrapper').find('img');
var firstImage = galleryImages.first(), lastImage = galleryImages.last();
var currentImage=firstImage;

//hide all images but the first
firstImage.siblings().hide();

galleryImages.click(function(){
    //hide the current image
    currentImage.hide();

    //if not last image, show the next
    if (currentImage!=lastImage){
        currentImage=currentImage.next();
        currentImage.show();
    }

    //if last image, go back to the first
    else {
        currentImage=firstImage;
        currentImage.show();
    }
}); 
```

随意调整 CSS 中的图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:03:46.870

看**[演示](http://jsbin.com/ejiseg/2)**

**HTML**

```
<div id="content">
    <div id="mainImg"><img src="http://youchew.net/wiki/images/9/9c/One.png" /></div>
  <div id="allImg">
    <img src="http://youchew.net/wiki/images/9/9c/One.png" >
    <img src="http://seo-hacker.com/wp-content/uploads/2010/04/22.png" >
    <img src="http://webtrafficnews.com/wp-content/uploads/2012/03/3.png" >

  </div>
  </div> 
```

**CSS**

```
#content {width:300px;border:solid 1px #f00;overflow:auto; margin:0 auto;}
#allImg {}
#allImg img{ float:left; width:30%;opacity:.5; cursor:pointer; margin:5px} 
```

**jQuery**

```
$(function(){

  $("#allImg").on("click","img",function(){
    $("#mainImg img").prop("src",$(this).prop("src"));

  });

}); 
```

**编辑：**

[更新了幻灯片演示](http://jsbin.com/ejiseg/3/)

**CSS**

```
#mainImg {width:300px; height:300px;} 
```

**jQuery**

```
$("#allImg").on("click","img",function(){
    newImage = $(this);
    $("#mainImg img").slideUp(500,function()
      {
        $("#mainImg img").prop("src",newImage.prop("src"));

       $("#mainImg img").slideDown(500);
      });

  }); 
```

# iphone - 创建了一个新的 iOS 应用程序。不能更新旧的。Apple 会接受只告诉用户下载新版本的更新吗？

> ID：12730267
> 
> 赞同：1
> 
> 时间：2012-10-04T15:05:41.323
> 
> 标签：iphone, ios

该应用程序具有不同的捆绑标识符，并且旧应用程序未启用推送通知。我们想用一个屏幕和一个按钮来更新旧应用程序，该按钮将用户发送到应用程序商店以下载新应用程序。苹果甚至会批准吗？关于更好的方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:29:13.670

当我们开发的应用程序需要从我们的帐户更改为客户的帐户（以符合他们的内部品牌标准）时，我们必须做类似的事情。我们将旧应用程序更新为“我们已搬家”。并有一个指向 itms 的链接：对于新版本。不过，我们确实让用户忽略了通知并继续使用旧版本。

如果您让用户推迟升级，我相信他们会批准它。如果您按照问题中的建议强制他们升级，也许不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:59:19.987

如果它有不同的捆绑 ID，它可能是可能的。我见过很多应用程序这样做。例如免费应用程序！他们用新功能引诱用户购买完整的应用程序。因此，通过指向 iTunes 的链接连接两个应用程序不会有问题。如果您使用 Push N，请务必正确设置所有内容。我的想法是将旧应用程序设置为免费应用程序并将它们连接起来。你为什么不把小球做成一样的呢？像普通更新一样？

# jquery - 在指定和不同的按钮单击上淡入/淡出

> ID：12730268
> 
> 赞同：0
> 
> 时间：2012-10-04T15:05:43.177
> 
> 标签：jquery, fadein, fadeout

昨天，我在点击每个按钮时很难做出上下移动的东西。

感谢来自stackoverflow“j08691”的用户，这个问题已经解决。但是，我无法弄清楚如何根据每个内容使内容淡入和淡出。

[JS小提琴](http://jsfiddle.net/j08691/H7fPD/4/)

帮助我的用户在我的问题中没有看到这个。也许其他人可以帮助我。

小提琴中添加了 CSS 和 HTML 示例元素。我只是不知道如何使它工作。

例如，在小提琴中，我们有按钮 A、B、C 和 D。

如果单击“A”，它会升起并`<div id="letterA">Letter A opened-content.</div>`出现。如果再次单击按钮 A，它应该会再次消失。（淡入淡出）。

如果按钮“A”处于活动状态并且单击了任何其他按钮 B、C 或 D，则按钮 A 将再次淡出内容并显示其他单击的按钮。

它真的很容易解释，但很难让它发挥作用。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:13:38.633

这是一个解决方案：http: [//jsfiddle.net/KQ3sq/1/](http://jsfiddle.net/KQ3sq/1/)

我不得不稍微改变一下标记。这个想法是将每个`li`与它的目标 div 链接起来。为此，我使用 HTML5 数据属性。您还可以考虑将带有锚点的链接添加到相应的 div（没有 JS 时的回退）。

然后 JS 做魔术是：

```
var target = $(this).data('target');    
$("#content").children(target).fadeIn().siblings().fadeOut(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:56:05.273

更新@MarvinLabs：D

```
var target = $(this).data('target');    
            $("div#collapseContent").children(target).fadeIn().siblings().fadeOut();
            if($(this).height() != 15 ) $("div#collapseContent").children(target).fadeOut(); 
```

它可以工作，但我不确定这是否很好，或者它可以更好。因此，如果有更好的解决方案，请在此处更新您的答案或回复；）

再次欢呼和感谢。

# c# - URI 构造函数

> ID：12730269
> 
> 赞同：0
> 
> 时间：2012-10-04T15:05:44.247
> 
> 标签：c#

编辑：我改写问题以使其更清楚

我试图了解 Uri(Uri, uri) 构造函数的行为：

```
 new Uri(new Uri("http://mydomain.com/some/path"), new Uri("/another/path")) 
```

我得到以下结果：

```
 "http://mydomain.com/another/path" 
```

但是我找不到任何文档清楚地解释创建规则是什么。换句话说，是否保证我永远不会得到以下内容？

```
 "http://mydomain.com/some/path/another/path" 
```

除非我用作第二个参数：

```
new Uri("another/path") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:13:35.303

您的第二个`Uri` `"/another/path"`是植根的（它以 开头`/`），因此`Uri`创建的将具有域后跟它。

如果你的第二个`Uri`是`"another/path"`，结果将是`"http://mydomain.com/some/path/another/path"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:18:59.240

您的第一个 Uri 必须以“/”结尾。第二个应该删除前导 '/' 并设置为`UriKind.Relative`.

```
Uri a = new Uri("http://mydomain.com/some/path/");
Uri b = new Uri("another/path", UriKind.Relative);

Uri c = new Uri(a, b);

Console.WriteLine(c); 
```

这将输出：

> [http://mydomain.com/some/path/another/path](http://mydomain.com/some/path/another/path)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:14:31.480

问题是第一个参数是 BASE，第二个参数是 BASE-RELATIVE url。

请看第二个：它以'/'开头。这意味着第二个是绝对的，因此，只有域名是从基础中获取的，其余的都是从字面上获取的。

如果你想建立相对关系，那么让它成为相对关系：

```
new Uri(new Uri("http://mydomain.com/some/path"), new Uri("another/path")) 
```

请注意，现在缺少前导 / ！

# c# - 如何使用 web api 将根目录映射到 c# 中的控制器？

> ID：12730270
> 
> 赞同：5
> 
> 时间：2012-10-04T15:05:44.987
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我有 ac# web api (.net 4) web 应用程序。我有几个控制器。我想将一个新控制器映射到 Web 应用程序的根目录。

所以我有`http://localhost/listproducts`

我希望网址是`http://localhost`

但我不知道如何告诉控制器使用根目录。它似乎是根据名称配置的。

我采用的解决方案是：

```
config.Routes.MapHttpRoute(
      name: "ListProductsApi",
             routeTemplate: "",
             defaults: new { controller = "ListProducts" } // Parameter defaults
); 
```

诀窍是`defaults: new { controller = "ListProducts" }` 线。（我需要一个 POST 操作，所以我只是省略了操作。显然，当您想要根路由“/”时，您需要明确命名控制器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T15:15:07.317

您只需更改已有的默认路由。它目前应该看起来像这样：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index",
                    id = UrlParameter.Optional }
); 
```

更改`controller = "Home"`为`controller = "listproducts"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T15:15:34.053

这应该相当容易，只需更改 global.asax.cs 中的默认路由，而不是

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

将其更改为

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "ListProducts", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

# jquery - 一键添加2个功能

> ID：12730274
> 
> 赞同：0
> 
> 时间：2012-10-04T15:06:01.193
> 
> 标签：jquery

我有我写的这段代码，它是用于表单的，如果单击复选框，它将信息从表单顶部复制到底部，然后如果顶部表单中的任何信息发生更改，则将其更改。现在，如果单击复选框，我想让用户无法编辑底部的表单，并让顶部的表单可访问，但我想在同一个 click 语句中执行此操作。我编写它的方式完全禁用了该功能，我想知道是否有人可以就如何解决这个问题提出任何想法......

```
 $("#Referral_SameAsAbove_T").click(function(){ 
    if ($("#Referral_SameAsAbove_T").is(':checked')) 
    { 
        // Checked, copy values 
        $("#Referral_PayToAddress_T").val($("#Referral_Address_T").val()); 
        $("#Referral_PayToCity_T").val($("#Referral_City_T").val()); 
        $("#Referral_PayToState_T").val($("#Referral_State_T").val()); 
        $("#Referral_PayToZip_T").val($("#Referral_Zip_T").val()); 
        $("#Referral_PayToAddress_T,#Referral_PayToCity_T,#_Referral_PayToState_T,#Referral_PayToZip_T").val('').attr('editable', false);
    } 
    else 
    { 
        // Clear on uncheck 
        $("#Referral_Address_T").val(""); 
        $("#Referral_City_T").val(""); 
        $("#Referral_State_T").val(""); 
        $('#Referral_PayToAddress_T,#Referral_PayToCity_T,#_Referral_PayToState_T,#Referral_PayToZip_T').attr('editable', true);
    } 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:24:22.203

尝试这个

使用 .attr('readonly', true); AND .attr('readonly', false);

```
 $("#Referral_SameAsAbove_T").click(function() {
        if ($("#Referral_SameAsAbove_T").is(':checked')) {
            // Checked, copy values 
            $("#Referral_PayToAddress_T").val($("#Referral_Address_T").val());
            $("#Referral_PayToCity_T").val($("#Referral_City_T").val());
            $("#Referral_PayToState_T").val($("#Referral_State_T").val());
            $("#Referral_PayToZip_T").val($("#Referral_Zip_T").val());
            $("#Referral_PayToAddress_T,#Referral_PayToCity_T,#Referral_PayToState_T,#Referral_PayToZip_T").prop('readonly', true);
        }
        else {
            // Clear on uncheck 
            $("#Referral_Address_T").val("");
            $("#Referral_City_T").val("");
            $("#Referral_State_T").val("");
            $("#Referral_Zip_T").val("");
            $("#Referral_PayToAddress_T,#Referral_PayToCity_T,#Referral_PayToState_T,#Referral_PayToZip_T").prop('readonly', false);
        }
    }); 
```

[小提琴](http://jsfiddle.net/sushanth009/q7f9a/1/)

[更新的小提琴](http://jsfiddle.net/sushanth009/q7f9a/3/)

# sql - TERADATA：跨多个表聚合

> ID：12730275
> 
> 赞同：1
> 
> 时间：2012-10-04T15:06:03.160
> 
> 标签：sql, join, aggregate-functions, teradata

考虑以下查询，其中聚合发生在两个表中：Sales 和 Promo，并且聚合值再次用于计算。

```
SELECT

  sales.article_id,
  avg((sales.euro_value - ZEROIFNULL(promo.euro_value)) / NULLIFZERO(sales.qty - ZEROIFNULL(promo.qty)))

FROM
(   SELECT 
         sales.article_id,
         sum(sales.euro_value),
         sum(sales.qty)
    from SALES_TABLE sales
    where year >= 2011
    group by article_id
) sales
LEFT OUTER JOIN
(   SELECT 
         promo.article_id,
         sum(promo.euro_value),
         sum(promo.qty)
    from PROMOTION_TABLE promo
    where year >= 2011
    group by article_id
) promo

ON sales.article_id = promo.article_id

GROUP BY sales.article_id; 
```

关于查询的一些注释：

1.  由于大量文章，两个内部查询都返回大量行。在 teradata 上运行解释，内部查询本身花费的时间非常少，但连接需要很长时间。
2.  假设 article_id 上的主键存在并且两个表都按年份分区。
3.  左外连接，因为第二个表包含可选数据。

那么，您能否建议一种更好的方法来编写此查询。感谢您阅读本文：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:49:31.597

不太确定 avg 函数是如何混入其中的，所以我将其删除。

```
SELECT article_id,
       (SUM(sales_value) - SUM(promo_value)) /
       (SUM(sales_qty) - SUM(promo_qty))
FROM (
    SELECT 
         article_id,
         sum(euro_value) AS sales_value,
         sum(qty) AS sales_qty,
         0 AS promo_value,
         0 AS promo_qty
    from SALES_TABLE sales
    where year >= 2011
    group by article_id
    UNION ALL
    SELECT 
         article_id,
         0 AS sales_value,
         0 AS sales_qty,
         sum(euro_value) AS promo_value,
         sum(qty) AS promo_qty
    from SALES_TABLE sales
    where year >= 2011
    group by article_id
) AS comb

GROUP BY article_id; 
```

# asp.net-mvc - 将 JObject 发布到操作

> ID：12730280
> 
> 赞同：0
> 
> 时间：2012-10-04T15:06:08.297
> 
> 标签：asp.net-mvc, json, json.net

我在读瑞克·斯特拉尔斯

[http://www.west-wind.com/weblog/posts/2012/May/08/Passing-multiple-POST-parameters-to-Web-API-Controller-Methods](http://www.west-wind.com/weblog/posts/2012/May/08/Passing-multiple-POST-parameters-to-Web-API-Controller-Methods)

我希望能够在操作中使用 JObject。我写了一个这样的控制器

```
public class AlbumsController : Controller
{
    [System.Web.Http.HttpPost]
    public string PostAlbum(JObject jsonData)
    {
        return "success";
    } 
} 
```

前端看起来像这样

当 ajax 被调用时，我得到一个错误

```
 $("#a").click(function () { 
            var album = {
                AlbumName: "PowerAge",
                Entered: "1/1/1977"
            }
            $.ajax(
            {
                url: "Albums/PostAlbum",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({ Album: album }),
                success: function (result) {
                    alert(result.Result);
                }
            });
        }); 
```

`POST http://localhost:50066/Albums/PostAlbum 500 (Internal Server Error)`jquery-1.7.1.js:8102 发送 jquery-1.7.1.js:8102 jQuery.extend.ajax jquery-1.7.1.js:7580（匿名函数）相册：74 jQuery.event.dispatch jquery-1.7.1 .js:3256 elemData.handle.eventHandle

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:16:52.730

您的控制器应该派生自[`ApiController`](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller.aspx)，而不是派生自[`Controller`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.aspx)：

```
public class AlbumsController : ApiController 
```

此外，如果您使用默认路由设置：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

我建议您使用 RESTful 操作名称：

```
public class AlbumsController : ApiController
{
    [HttpPost]
    public string Post(JObject jsonData)
    {
        return "success";
    } 
} 
```

进而：

```
$('#a').click(function () { 
    var album = {
        AlbumName: "PowerAge",
        Entered: "1/1/1977"
    }
    $.ajax({
        url: 'api/albums',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ Album: album }),
            success: function (result) {
                alert(result);
            }
        });
    });
    return false;
}); 
```

# tridion - SiteEdit 身份验证问题

> ID：12730283
> 
> 赞同：2
> 
> 时间：2012-10-04T15:06:14.003
> 
> 标签：tridion, siteedit

我目前正在安装 SiteEdit 2009 SP3，但遇到了身份验证问题。

我的设置如下：

1.  将 SiteEdit 安装在与 Tridion CME 相同的服务器上，并输入 Tridion CME 的 IP 和登台 URL；即安装期间的“www.mysite.com”
2.  在 IIS 中创建主机；即“se_www.mysite.com”并将主机添加到服务器主机文件
3.  为 LDAP 配置站点编辑

    *   将 LdapAuthenticationHttpModule 添加到 webconfig 的 httpModules 部分
    *   将 tridion.contentmanager.config 添加到 webconfig 的 tridion 配置部分
    *   将 WebUI 位置元素添加到 webconfig
4.  在 IIS 中为 SiteEdit 网站配置了身份验证，并且只启用了匿名访问和基本访问

现在，当我尝试访问“se_www.mysite.com”时，它会正确提示我输入登录凭据，但输入它们后，它会再次提示我输入登录凭据。我再次完成了安装步骤以确保没有遗漏任何内容，但问题仍然存在。有没有人遇到过这样的问题或知道是什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:24:48.027

要启用带有 LDAP 身份验证的 SiteEdit 2009 SP3，IIS 级别您只需要启用匿名访问而不是基本身份验证。此外，我注意到当我们启用 IIS 级别身份验证时，它们并没有渗透到所有子结构。请仔细检查。

此处的文档参考：http: [//sdllivecontent.sdl.com/LiveContent/content/en-US/SiteEdit_2009_SP3/task_8DD08606EDAB48038E0A42D809F3DC58](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SiteEdit_2009_SP3/task_8DD08606EDAB48038E0A42D809F3DC58)

从文档中，双击右侧的身份验证图标并更改如下所示的设置：

*   选择匿名身份验证行，然后单击右侧操作区域中的启用。
*   依次选择其他每一行，对于每一行，单击右侧“操作”区域中的“禁用”。

此外，如果您有以下处理程序映射，您需要从 web.config 中删除它们`[TRIDION_HOME]\web\WebUI\WebRoot`

```
<remove name="ExtensionlessUrl-ISAPI-4.0_64bit" />
<remove name="ExtensionlessUrl-ISAPI-4.0_32bit" />
<remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
<remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" /> 
```

希望这些信息有所帮助。

# ipad - 对 iOS 5.0 和 iOS 6.0 使用 XCode 4.5 的困惑

> ID：12730291
> 
> 赞同：5
> 
> 时间：2012-10-04T15:06:32.520
> 
> 标签：ipad, ios5, ios6, xcode4.5, base-sdk

我对带有 XCode 4.5 的 iOS 5.0 和 iOS 6.0 感到非常困惑。如果我想在 iOS 5.0 及更高版本上支持我的新应用程序，我不太清楚应该使用哪些功能，哪些不应该使用。基本上，Xcode 4.5 为您提供了所有功能，例如故事板中的 Container Views 和 Unwind Segues（……以及更多我可能不知道的功能），这些功能仅在 iOS 6.0 中可用，直到您运行您的应用程序并崩溃后您才会知道！任何人都可以让我知道任何简单的解决方案吗？我必须恢复到 Xcode 4.4 吗？我将部署目标设置为 iOS 5.0，但我无法将 Base SDK 设置为 iOS 5.0，因为它没有出现在列表中。见附图。谢谢。

![基础 SDK](../Images/3ee7111bc7003e246d6966d47df105b0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:27:35.327

如果您仍想支持 5.0 或 5.1，您可能需要进入 Xcode Preferences -> Downloads 并安装 iOS 5.0 或 5.1 模拟器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:01:53.963

我遇到了同样的问题。我正在使用 Xcode 4.5 创建一个针对 iOS 5 的项目，因此项目基础 SDK 是 iOS6。

我通过编辑`MainStoryBoard.storyboard`文件解决了这个问题，并`trigger="accessoryAction"`从以下行中删除了

**前：**

```
< segue destination="f1z-co-5vQ" kind="push" identifier="ShowTestPoints2" trigger="accessoryAction" id="KQV-Ht-eG9"/> 
```

**后：**

```
< segue destination="f1z-co-5vQ" kind="push" identifier="ShowTestPoints2" id="KQV-Ht-eG9"/> 
```

# php - preg_match 与西里尔文字

> ID：12730292
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:06:33.597
> 
> 标签：php, string, preg-match

> **可能重复：**
> [如何将西里尔字符与正则表达式匹配](https://stackoverflow.com/questions/1716609/how-to-match-cyrillic-characters-with-a-regular-expression)

我有一个简单的 php 脚本，它使用 preg_match 将字符串与变量内的一些西里尔文本进行比较（例如 $var = 'страница'）。

但是，当我将西里尔文本输入变量时，它会显示为 ???????? 在我的代码中。

```
$var1 = '/?????????????/'; 
```

运行脚本时收到以下警告：

`preg_match(): Compilation failed: nothing to repeat at offset 0`

任何人都可以提出解决方案吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:13:24.953

更改脚本或所有项目源文件的 UTF 编码，例如在 IDE 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:09:46.100

对 unicode 使用修饰符

```
preg_match('/abcdef/u',$some_string) 
```

也许是因为无效的代码页，哪个代码页有您的解释器，哪个代码页使用与数据库的连接（如果有的话？）

# python - telnet 与原始 tcp 连接有何不同

> ID：12730293
> 
> 赞同：22
> 
> 时间：2012-10-04T15:06:34.790
> 
> 标签：python, sockets, network-programming, telnet

我正在尝试通过 python 脚本向服务器发送命令。我可以看到正在服务器上建立套接字连接。但是我发送的命令似乎没有通过（服务器对套接字进行读取）。服务器当前支持 telnet 命令解释器。即：你telnet到命令地址和端口，你就可以开始发送字符串命令了。我的问题是，与使用 telnet 相比，通过 tcp 套接字发送字符串有什么根本不同。我使用了原始套接字和 Twisted 框架。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-04T15:31:37.053

Telnet 是一种传递有关通信通道的控制信息的方法。它定义了行缓冲、字符回显等，并在连接开始时（以及在极少数情况下，在会话期间）通过一系列 will/wont/do/dont 消息完成。

这可能不是您的服务器文档的意思。相反，这可能意味着您可以使用“Telnet”之类的程序打开一个到端口的 TCP 套接字，并与服务器上的命令解释器进行交互。

当 Telnet 程序连接时，它通常会在实际响应之前侦听这些控制消息，因此将使用实际上不使用 telnet 协议的 TCP/socket 连接，恢复为简单的原始管道。服务器必须执行所有字符回显、行缓冲等。

因此，在*您的*情况下，服务器可能使用没有 telnet 转义序列的原始 TCP 流，因此没有区别。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-04T15:11:55.033

请记住，Telnet 是**应用层**协议，而 TCP 是**传输层协议**。Telnet*使用*TCP 来传输数据。这是 Telnet 和 TCP 之间的一个很大的根本区别。

**请参阅：** [OSI 模型维基百科页面](http://en.wikipedia.org/wiki/OSI_model)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T15:12:30.663

来自telnet 上的[Wikipedia 页面](http://en.wikipedia.org/wiki/Telnet)

> ...用户数据散布在带内与 Telnet 控制信息...

因此，要回答您的问题，是的，telnet 确实与原始套接字不同。

如果您想尝试实现它，[RFC 854](https://www.rfc-editor.org/rfc/rfc854)描述了 telnet 协议，或者如果您更喜欢现有的 python 客户端，您可以使用[telnetlib 。](http://docs.python.org/library/telnetlib.html)

# c# - Dataview.RowFilter - 如何获取特定的结果集

> ID：12730294
> 
> 赞同：0
> 
> 时间：2012-10-04T15:06:39.633
> 
> 标签：c#, linq, asp.net-3.5

我有一个包含两列的 DataTable，这两列都是 ID 列表，具有多对多关系：

```
  资源 ID 属性 ID
  ---------- ------------
  1 1
  1 2
  1 3
  2 1
  2 3
  3 3

```

ETC...

给定一个 AttributeID 列表，我想获得一个包含**所有**提供的 AttributeID 的 ResourceID 列表。

我最初想这样做：

```
 string[] attributes = "....";
    dv.RowFilter = "AttributeID in (" + String.Join(",", attributes) + ")";

    return dv.ToTable(true, "ResourceID").AsEnumerable().Select(x => (int)x[0]).ToList(); 
```

但这给了我一个包含**任何**提供的 AttributeID 的列表。

我的属性列表目前是一个字符串数组，但如有必要可以更改。我的结果集当前作为 ResourceID 列表返回，但这也是可以协商的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:18:55.367

For anybody who is looking to do the same thing, here's the solution that I found - essentially grouping my result set and counting the number of items in each group to check that it matches the number of items in my list of supplied attributes.

```
dv.RowFilter = "AttributeID in (" + String.Join(",", attributes) + ")";

List<int> Resources =  (from a in dv.ToTable().AsEnumerable()
         group a by (int)a["ResourceID"] into grp
         where grp.Count() == attributes.Length
         select grp.Key).ToList<int>(); 
```

# magento - Magento 删除产品比较

> ID：12730297
> 
> 赞同：3
> 
> 时间：2012-10-04T15:06:45.530
> 
> 标签：magento

我使用 magento，我有自己的模板，但在左侧的产品详细信息页面上，我比较了产品。我怎样才能删除这个块？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T11:37:12.703

只需在您的 theme/layout/local.xml 下创建 local.xml 文件并将其放在下面的代码中。

```
<layout version="0.1.0">
    <default>
        <!-- remove compare products -->
        <remove name="catalog.compare.sidebar" />
    </default>
</layout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T05:31:28.727

此块被添加到布局文件中。您可以在原始文件或扩展布局中删除此块。

默认情况下，此块被添加到文件中

```
/app/design/frontend/base/default/layout/catalog.xml
/app/design/frontend/base/default/layout/customer.xml 
```

1）将此文件复制到您的主题文件夹并删除字符串

```
<block type="catalog/product_compare_sidebar" before="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/> 
```

2）在您的布局文件中添加行

```
<default>
    <reference name="right">
        <action method="unsetChild"><name>catalog.compare.sidebar</name></action>
    </reference>
    <reference name="left">
        <action method="unsetChild"><name>catalog.compare.sidebar</name></action>
    </reference>
</default>

<customer_account>
    <reference name="left">
        <action method="unsetChild"><name>catalog.compare.sidebar</name></action>
    </reference>
    <reference name="right">
        <action method="unsetChild"><name>catalog.compare.sidebar</name></action>
    </reference>
</customer_account> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:22:23.347

要完全禁用比较产品功能，您可以使用此[免费扩展](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/16044/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-26T09:28:54.377

只需删除文件 /app/design/frontend/base/default/template/catalog/product/compare/sidebar.html 或重命名即可。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-21T11:55:35.493

只需从中删除此块`layout/catalog.xml`并将`compare products section`消失：

```
<reference name="left">
        <block type="catalog/product_compare_sidebar" after="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/>
</reference> 
```

# filter - 在 Qml ListView 联系人模型中搜索

> ID：12730298
> 
> 赞同：1
> 
> 时间：2012-10-04T15:06:48.497
> 
> 标签：filter, contacts, qml

我拥有的是一个列表视图，用于显示联系人列表。此外，还有一个搜索框和一个标签。根据在搜索框中键入的文本，将过滤联系人列表。

这是我的代码：

```
import QtQuick 1.1
import com.nokia.symbian 1.1
import com.nokia.extras 1.1
import QtMobility.contacts 1.1

Window {
id: window

StatusBar {
    id: statusBar
    anchors.top: window.top
    Text {
        id: statusBarTitle
        text: "Contacts"
        color: "#ffffff"
    }
}

ContactModel {
    id: contactModel

    filter:
        IntersectionFilter {
        DetailFilter {
        detail: ContactDetail.PhoneNumber
        field: PhoneNumber.PhoneNumber
        value: PhoneNumber.Mobile
        }

        UnionFilter {
            DetailFilter {
            detail: ContactDetail.Name
            field: Name.FirstName
            value: searchbox.searchText
            matchFlags: Filter.MatchStartsWith
            }

            DetailFilter {
            detail: ContactDetail.Name
            field: Name.LastName
            value: searchbox.searchText
            matchFlags: Filter.MatchStartsWith
            }

            DetailFilter {
            detail: ContactDetail.DisplayLabel
            field: DisplayLabel.Label
            value: searchbox.searchText
            matchFlags: Filter.MatchStartsWith
            }
        }
    }

    sortOrders:
        SortOrder {
        detail: ContactDetail.Name
        field: Name.FirstName
        direction: Qt.AscendingOrder
    }
}

Component {
    id: contactListDelegate
    ListItem {
        id: listItem

        Image {
            id: avatar
            source: contact.thumbnail
            sourceSize.width: 60
            sourceSize.height: 60
            anchors.verticalCenter: parent.verticalCenter
            anchors.left: parent.left
        }

        ListItemText {
            id: nameText
            text: contact.name.firstName + " " + contact.name.lastName
            color: "white"
            anchors.left: avatar.right
            anchors.leftMargin: 10
            font.family: "Helvetica"
            anchors.verticalCenter: parent.verticalCenter
        }
    }
}

ListView {
    id: listView
    anchors.top: searchbox.bottom
    anchors.right: parent.right
    anchors.left: parent.left
    anchors.bottom: toolBar.top
    clip: true
    model: contactModel
    delegate: contactListDelegate
    visible: true
}

SearchBox {
    id: searchbox
    anchors.top: statusBar.bottom
    placeHolderText: "Search Contact"

    onSearchTextChanged: {
        searchingBusyIndicator.running = true
        searchingBusyIndicator.visible = true
        searchTimeoutTimer.restart()
    }
}

Label {
    id: noMatchesLabel
    anchors.centerIn: listView
    visible: false
    text: "No matches"
}

BusyIndicator{
    id: searchingBusyIndicator
    anchors.centerIn: parent
    platformInverted: window.platformInverted
    width: 80
    height: 80
    visible: false
}

Timer{
    id: searchTimeoutTimer
    interval: 1000

    onTriggered: {
        searchingBusyIndicator.running = false
        searchingBusyIndicator.visible = false
    }
}

ToolBar {
    id: toolBar
    anchors.bottom: window.bottom
    tools: ToolBarLayout {
        id: toolBarLayout
        ToolButton {
            flat: true
            iconSource: "toolbar-back"
            onClicked: {
                Qt.quit()
            }
        }
        ToolButton {
            flat: true
            iconSource: "toolbar-search"
            }
        }
    }
}
} 
```

现在，当列表中没有匹配项时，我需要将列表视图的可见属性更改为 false 并将标签属性更改为 true。如何做到这一点。？

现在发生的情况是，应用程序在没有匹配项时崩溃并终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T14:56:55.543

我花了 2 天时间寻找这个问题的解决方案......

这是我的修复：

```
ContactModel {
     ...........
     onRowsInserted: {
     if(last === 0)
     {
         noMatchesLabel.visible = true;
         listView.model = {};
     }
     else
     {
         noMatchesLabel.visible = false;
         listView.model = contactModel;
     }
} 
```

虽然由于使用过滤器，contactModel 没有联系人，但我们将 listView 的模型交换为空的。这样应用程序就不会崩溃

# python - ValueError：在一个元组中解包的值太多

> ID：12730299
> 
> 赞同：-2
> 
> 时间：2012-10-04T15:06:50.947
> 
> 标签：python, python-2.7

请说明为什么要解包太多（我的 for 循环中的 ValueError）。尝试过 deb

```
 naislist = [('CONTROL FILE', '0', '0', '0'),
            ('REDO LOG', '0', '0', '0'),
            ('ARCHIVED LOG', '.69', '.59', '3'),
            ('BACKUP PIECE', '46.54', '0', '192'),
            ('IMAGE COPY', '0', '0', '0'),
            ('FLASHBACK LOG', '10.15', '6.31', '82'),
            ('FOREIGN ARCHIVED LOG', '0', '0', '0')]
 print "size of naislist is ",len((naislist))
 heading = ('MAIN MENU', 'LEVELS', 'LEVEL2', 'LEVEL3')

 rearrange = dict(zip((0, 1, 2, 3), (len(str(x)) for x in heading)))

 for tu, x in naislist:
     rearrange.update((i, max(rearrange[i], len(str(el))))  for i, el in enumerate(tu))
     rearrange[4] = max(rearrange[4], len(str(x)))
 forkit = '|'. join('%%-%ss' % rearrange[i] for i in xrange(0, 4))
 print '\n'.join((forkit % heading,
                  '-|-'.join(rearrange[i] * '-' for i in xrange(4)),
                  '\n'.join(forkit % (a, b, c, d) for (a, b, c), d in naislist))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:37:38.510

因为 中的每个项目有四个元素`naislist`，而您的循环仅指定两个变量 ( `tu, x`) 将它们解压缩到。

# c# - 在 C# 中编辑 XSL:param

> ID：12730304
> 
> 赞同：1
> 
> 时间：2012-10-04T15:07:05.813
> 
> 标签：c#, xml-parsing, xml-serialization

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:param name="blah">Content 1</xsl:param>
<xsl:param name="blah2">Content 2</xsl:param>
</xsl:stylesheet> 
```

如果我有上面的 XSLT 文件，那么“正确”的方法是什么，不仅可以获取数据，还可以对其进行编辑并将其保存回文件而不进行转换等。

```
XmlDocument xslDoc = new XmlDocument();
      xslDoc.Load(@"C:\params.xslt");

      XmlNamespaceManager nsMgr = new XmlNamespaceManager(xslDoc.NameTable);
      nsMgr.AddNamespace("xsl", "http://www.w3.org/1999/XSL/Transform");

      XmlNode PARAM_blah = xslDoc.SelectSingleNode(@"/xsl:stylesheet/xsl:param[@name='blah']", nsMgr);
      string blah = PARAM_blah.InnerText; 
```

这很容易返回有问题的参数的值，但是如果我想编辑它并将这个更改保存到文件中，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:44:04.710

只需这样做：

```
 PARAM_blah.InnerText = "Content 2";
  xslDoc.Save(@"c:\params.xslt") 
```

# asp.net - 加载页面然后在 Asp.net 中处理行

> ID：12730308
> 
> 赞同：1
> 
> 时间：2012-10-04T15:07:31.230
> 
> 标签：asp.net, ajax, multithreading, loading, webpage

我有一个网页，它是我公司的网站监控工具。基本上，它从数据库中提取 150 个 IP 地址的列表，并检查网页是否为它们加载。加载大约需要 15 分钟，我希望它加载列表并逐个进行，并使用文本或图标更新状态。

这是我的功能块，有什么方法可以解决这个问题或帮助我达到我需要达到的目的吗？

```
Function SiteMonitorResults(ByVal WebAddress As String)
    Try
        'Code Example

        Dim httpReq As HttpWebRequest = DirectCast(WebRequest.Create(WebAddress), HttpWebRequest)
        httpReq.AllowAutoRedirect = False

        Dim httpRes As HttpWebResponse = DirectCast(httpReq.GetResponse(), HttpWebResponse)
        ' Close the response.
        httpRes.Close()
        ' Code for NotFound resources goes here.
        If httpRes.StatusCode = HttpStatusCode.OK Then
            Return "Online"
        Else
            Return "Offline"
        End If
    Catch ex As Exception
        Return "Unknown"
    End Try

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:41:48.277

基本上，我会选择这样的东西，使用 System.Threading.Tasks 和 System.Net.Http （对不起 C# 代码）

为了可读性，我省略了 try catch，但它们是必需的，否则代码将在第一个 DNS 问题上崩溃（例如）

```
 public string CheckAddresses(List<string> addresses)
    {
        List<string> result = new List<string>();
        List<Task> tasks = new List<Task>();
        addresses.ForEach(address =>
        {
            var task = new HttpClient().GetAsync(address).ContinueWith(
                res => result.Add(String.Format("{0} : {1}", address, res.Result.IsSuccessStatusCode)));
            tasks.Add(task);
        });
        Task.WaitAll(tasks.ToArray());

        return string.Join(", ", result.ToArray());
    } 
```

希望这会有所帮助

# directx-11 - 在directx 11中一次渲染到多个纹理

> ID：12730309
> 
> 赞同：11
> 
> 时间：2012-10-04T15:07:32.847
> 
> 标签：directx-11, pixel-shader, render-to-texture, compute-shader

我正在尝试使用 C++ directx 11 SDK 一次性渲染两个纹理。我想要一个纹理包含结果图像的每个像素的颜色（我通常在渲染 3D 场景时在屏幕上看到的颜色），另一个纹理包含每个像素和深度的法线（3 个浮点表示正常，1 个浮点表示深度）。现在，我能想到的是创建两个渲染目标，并将第一遍渲染为颜色，第二遍将法线和深度分别传递给每个渲染目标。但是，这似乎是在浪费时间，因为我可以在第一遍中获得每个像素的颜色、法线和深度的信息。那么有没有办法用像素着色器以某种方式输出两个纹理？

任何帮助，将不胜感激。

PS我正在考虑像素着色器中的RWTexture2D或RWStructuredBuffer。一点背景知识：我需要这两个图像在计算着色器中进行进一步处理。这带来了同步的一个附带问题：由于像素着色器（与计算着色器不同）一次写入每个像素，我怎么知道像素着色器何时完成并告诉计算着色器开始图像后处理？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T15:18:42.640

您需要使用 MRT（多个渲染目标）一次性渲染它。

您可以使用 OMSetRenderTargets 将两个目标绑定为输出

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff476464(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476464(v=vs.85).aspx)

[http://hieroglyph3.codeplex.com/](http://hieroglyph3.codeplex.com/) (DefferedRendering) 中有一个示例，它显示了如何同时写入两个纹理。

这是一个小样本：

```
ID3D11DeviceContext* deviceContext; //Your immediate context

ID3D11RenderTargetView* m_pRenderViews[2]; //Not more than D3D11_SIMULTANEOUS_RENDER_TARGET_COUNT (8)
m_pRenderViews[0] = pRTV1; //First target
m_pRenderViews[1] = pRTV2; //second target

deviceContext->OMSetRenderTargets(2, &m_pRenderViews[0], NULL); //NULL means no depth stencil attached 
```

然后您的像素着色器将需要输出一个结构而不是单一颜色：

```
struct PS_OUTPUT
{
    float4 Color: SV_Target0;
    float4 Normal: SV_Target1;
};

PS_OUTPUT PS(float4 p: SV_Position, float2 uv : TEXCOORD0)
{
      PS_OUTPUT output;
      output.Color = //Set first output
      output.Normal= //Set second output
      return output;
} 
```

同样在 DirectX11 中，您不需要将深度写入普通缓冲区，您可以只使用深度缓冲区。

对于像素/计算着色器同步，您不能在同一设备上同时运行像素着色器和计算着色器，因此当您的绘制调用完成时，纹理已准备好在计算中用于调度。

# crystal-reports - Crystal Reports 9 图形/图表

> ID：12730316
> 
> 赞同：1
> 
> 时间：2012-10-04T15:07:45.187
> 
> 标签：crystal-reports, report

我有一个交叉表，其中包含每天每小时显示客户的数据。因此，行是一周中的几天，列是一天中的小时，值是客户的数量。

现在到重点:)，我想为一周中的每一天生成一个图表，显示当天每小时的客户数量。因此，该报告总共有 8 个图表，每天一个，然后是一个“全天”图表。见图片：

[点击，因为我还不能包含图片](http://i.stack.imgur.com/e9tST.jpg)

任何想法如何做到这一点，因为我找不到过滤器或任何东西，我能得到的唯一图表都是一个，在每个小时块中，每天都有多条条形线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:18:55.853

好的，刚刚想通了：）

我为每个工作日创建了一个公式，其中包含以下内容：

如果 {Command.day} = "Monday" 那么 {Command.kpi1} else 0

然后在图表专家中，将此公式字段用于值...如此简单但被忽视：@

# c++ - 位操作的标准（跨平台）方式

> ID：12730321
> 
> 赞同：11
> 
> 时间：2012-10-04T15:07:51.690
> 
> 标签：c++, c, cross-platform, standards, bit-manipulation

与数字的不同二进制表示一样（例如，采用大/小端），这是跨平台的：

```
// NOTE: FIXED-SIZE unsigned integral type
some_unsigned_type variable = some_number;

// set n-th bit, starting from 1,
// right-to-left (least significant-to most significant)
variable |= ( 1 << ( n - 1 ) );

// clear the same bit:    
variable &= ~( 1 << ( n - 1 ) ); 
```

换句话说，编译器是否总是处理**固定大小**无符号数的不同二进制表示，或者它是特定于平台的？

如果`variable`是有符号整数类型（例如`int`），它的值是

*   零
*   积极的
*   消极的？

*标准*对此有何评论？

[PS 而且，**是**的，我对这两种语言都很感兴趣-`C`而且`C++`，请不要告诉我它们是不同的语言，因为我知道这一点:)]

[如果需要，我可以粘贴真实示例，但帖子会变得太长]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:16:19.127

除非`some_unsigned_type`是固定宽度类型，否则这是您的第一个特定平台。在一个平台上，您可能会转移一些价值本身永远不会重现的信息，而在另一个平台上可能不会。例子：

```
16 bit 'int':

      1000 0000  0000 0000
<<1 = 0000 0000  0000 0000
>>1 = 0000 0000  0000 0000

32 bit 'int':

      0000 0000  0000 0000   1000 0000  0000 0000
<<1 = 0000 0000  0000 0001   0000 0000  0000 0000
>>1 = 0000 0000  0000 0000   1000 0000  0000 0000 
```

`5.8 Shift Operators`在 C++ 标准中也这样说：

> 如果右操作数为负数，或者大于或等于提升的左操作数的位长度，则行为未定义。

因此，如果您将一个整数移动的位数多于实际位数，则会输入未定义的行为。例如，如果您将一个值左移`short`17 位，它可能会在某些机器上为您提供 UB，但不是全部。

C11 在 中说`6.5.7 Bitwise shift operators`，除其他外，这是：

> 结果`E1 >> E2`是`E1`右移的`E2`位位置。如果`E1`有无符号类型或`E1`有符号类型和非负值，则结果的值是 的商的整数部分`E1 / 2`^(`E2`)。**如果`E1`具有带符号类型和负值，则结果值是实现定义的。**

所以有符号数移位是不可移植的。

所以，一般整数的*一般*答案*是* ：

 *## 整数的按位操作是*不可*移植的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T15:35:52.523

**免责声明：**我隐含地假设您正在谈论具有固定宽度的整数类型。否则位移是非常危险的......

**标准：n3337 C++11**

对于无符号类型或有符号类型 (*) 中的正值，移位的定义是数学的，因此不受底层硬件表示的影响。

> **5.8 移位运算符 [expr.shift]**
> 
> *2*的值`E1 << E2`是`E1`左移的`E2`位位置；空出的位用零填充。如果`E1`具有无符号类型，则结果的值为 ，以`E1 × 2`^(`E2`)比结果类型中可表示的最大值大一为模减少。否则，如果`E1`具有带符号类型和非负值，并且`E1×2`^(`E2`)可以在结果类型中表示，那么这就是结果值；否则，行为未定义。
> 
> *3*的值`E1 >> E2`是`E1`右移的`E2`位位置。如果`E1`有无符号类型或`E1`有符号类型和非负值，则结果的值是 的商的整数部分`E1/2`^(`E2`)。如果`E1`具有带符号类型和负值，则结果值是实现定义的。

出于同样的原因，我认为按位`and`,`or`和`negate`是可以的：它们是在数学上定义的。

> **5.3.1 一元运算符 [expr.unary.op]**
> 
> *10*的操作数`˜`应为整数或非范围枚举类型；结果是其操作数的反码。
> 
> **5.11 按位与运算符 [expr.bit.and]**
> 
> *1*执行通常的算术转换；结果是操作数的按位与函数。该运算符仅适用于整数或无范围的枚举操作数。
> 
> **5.13 按位包含 OR 运算符 [expr.or]**
> 
> *1*执行通常的算术转换；结果是其操作数的按位包含 OR 函数。该运算符仅适用于整数或无范围的枚举操作数。

但是我承认我对后两者不太确定，我找不到*按位 XX 函数*的任何定义，所以即使我相信它们指的是数学对应物，我也不能保证。

(*) 感谢 phresnel 指出这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T16:34:47.987

如果您移动负（或有符号）数字（通过大多数实现是相同的 U2 事物），它是特定于实现的。如果您将无符号数字移动的值不超过变量中的位数，它对于大多数用途都是可移植的。*

# javascript - Mouseenter/mouseleave 多个 div

> ID：12730322
> 
> 赞同：2
> 
> 时间：2012-10-04T15:07:55.893
> 
> 标签：javascript, jquery, mouseenter

我在一行中有三个 div，其中包含 .class1、.class2、.class3 等类。

当用户鼠标进入我想显示其他 div（divA 和 divB）的任何一个 div 时，问题是我可以在函数中有多个 div 吗？

这是我到目前为止所拥有的，对于一个效果很好的 div：

```
$(document).ready(function(){
$("body").on("mouseenter", ".class1", function ()
{
$(this).children(".divA").slideDown();
$(this).children(".divB").slideDown();
});

$("body").on("mouseleave", ".class1", function ()
{
$(this).children(".divA").slideUp();
$(this).children(".divB").slideUp();
});
}); 
```

我希望效果发生，但如果使用输入 .class1、.class2 或 .class3

没有类似功能的三遍

我已经尝试过 .class1 && .class2 等但没有快乐，还有 .class1 || .class2 等但也没有快乐

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:10:26.203

在 jQuery 中，您可以`,`在您的情况下使用诸如此类的东西来分隔选择器`".class1, .class2"`。

然后，jQuery 将寻找与这些选择器中的一个或多个匹配的元素。

**更新：**

您可以通过将两个事件绑定到同一个回调来稍微缩短代码，并[`slideToggle()`](http://api.jquery.com/slideToggle/)改用：

```
$(function() {
   $("body").on("mouseenter mouseleave", ".class1, .class2, .class3", function ()
   {
       $(this).children(".divA, .divB").slideToggle();
   });
}); 
```

*没试过，但这在功能上应该等同于你的代码。只是短一点。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:10:10.903

你可以简单地做

```
$(document).ready(function(){
$("body").on("mouseenter", ".class1, .class2, .class3", function ()
{
$(this).children(".divA").slideDown();
$(this).children(".divB").slideDown();
});

$("body").on("mouseleave", ".class1, .class2, .class3", function ()
{
$(this).children(".divA").slideUp();
$(this).children(".divB").slideUp();
});
}); 
```

# api - “容器未定义”谷歌图表

> ID：12730324
> 
> 赞同：30
> 
> 时间：2012-10-04T15:08:07.333
> 
> 标签：api, charts, containers

我已经解决了我的问题，但我自己无法回答，因为我对这个网站太陌生了：

原来我需要使用以下内容：

```
chart = new google.visualization.PieChart(document.getElementById('pie_today_div')); 
```

我正在使用 JQuery 来访问元素， `$('#pie_today_div')`. 到目前为止，证据表明 PieChart 构造函数必须具有标准的 JS 代码，`document.getElementById('pie_today_div')`

也许发生了其他事情，但改变我访问容器元素的方式修复了我的代码

**参考我的解决方案的原始问题**

我在尝试实例化 Google PieChart 对象时收到“未定义容器”错误。

我在[http://validator.w3.org/](http://validator.w3.org/)验证了我的页面，我得到一个漂亮的绿色横幅，说它验证。

页面加载时我没有收到任何 js 错误。我的 Ajax 调用正在使用我想要从数据库中获取的数据进行完整的往返。

**这是我的 HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <link href="/css/note.css?10022012" rel="stylesheet" type="text/css" media="screen">
        <script type="text/javascript" language="javascript" src="/call/js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">google.load('visualization', '1.0', {'packages':['corechart']});</script>
        <script type="text/javascript" language="javascript" src="/call/js/init.js?10042012-2"></script>
        <title>Call Stats</title>
    </head>
    <body>
        <a href="#" id="pie_today_link">Today Stats</a>
        <div id="pie_today_div"></div>
    </body>
</html> 
```

**这是js：**

```
function drawPieChartToday() {

    $.post('/call/ajax.php5',{
        action:'pieToday'
    }, function(ticketData) {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Count');
        data.addColumn('number', 'Topic');
        for (var key in ticketData){
            data.addRow([key, ticketData[key]]);
        }
        options = {
            title: 'Issue Topics'
        };
        alert($('#pie_today_div').attr('id'));
        chart = new google.visualization.PieChart($('#pie_today_div'));
        chart.draw(data, options);
    },'json');     
} 
```

**这是我的调试代码，以确保找到该元素：** `alert($('#pie_today_div').attr('id'));` <-- alerts "pie_today_div"

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-04T15:29:15.097

我不是 jquery 粉丝，但我认为 $('#pie_today_div') 返回一组匹配的元素。属性计算之所以有效，是因为（来自 jquery[文档](http://api.jquery.com/attr/)）它“获取匹配元素集中第一个元素的属性值”。

所以试试

```
chart = new google.visualization.PieChart($('#pie_today_div')[0]); 
```

或直接

```
chart = new google.visualization.PieChart(document.getElementById('pie_today_div')); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-10-07T01:14:47.833

容器错误正是如此，它正在寻找ID示例：

```
var chart = new google.visualization.PieChart(document.getElementById('chart_div')); 
```

如果您缺少该 ID，您将在 Google Charts 中收到此错误“未定义容器”因此具有该 chart_div id 的 Div 将解决此问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T13:33:18.907

必须有一行可以加载您希望在网页中拥有的可视化类型。看起来像这样

```
google.load("visualization", "1", {packages: ["corechart"]}); 
```

我在这里加载包`corechart`。将此行作为第一行`<script>`放在 HTML 页面内的标签（如 index.html）之后。那应该可以解决他的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T11:07:01.593

在 init 之前使用 $timeout ，它工作得很好，否则你需要销毁实例

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-19T23:44:44.460

只是想提一下，这是在一个简单的错误之后发生在我身上的。我变了

```
var data = new google.visualization.DataTable(huh); 
```

为了更改图表类型，请执行以下操作：

```
var data = new google.visualization.BarChart(huh); 
```

但这都是错误的，您更改了提及容器的图表：

```
var chart = new google.visualization.ComboChart(document.getElementById('chart_div')); 
```

# php - 使用 PHP SoapClient 时参数位置错误

> ID：12730327
> 
> 赞同：0
> 
> 时间：2012-10-04T15:08:21.103
> 
> 标签：php, wsdl, soap-client

我正在尝试使用 PHP SoapClient 调用 SOAP WebService，与 WSDL 连接，一切都很好。但是当我传递参数进行调用时，我意识到（使用“__getLastRequest()”）参数没有放在我的“MyFunction”内部，而是放在外部......

PHP代码：

```
$client = new SoapClient("http://wsdlurl.com?WSDL", array("trace" => 1));
$soapMessage = array(
    'DealerCode' =>         'Val0',
    'AscNumber' =>          'Val1',
    'CustOrderNumber' =>    'Val2',
    'OrderDate' =>          'Val3',
    'OrderType' =>          'Val4',
    'ModelCode' =>          'Val5',
    'ObjectName' =>         'Val6',
    'BrandName' =>          'Val7',
    'SerialNumber' =>       'Val8',
    'Name' =>               'Val9',
    'Address' =>            'Val10',
    'PostalCode' =>         'Val11',
    'Town' =>               'Val12',
    'TelephoneNR' =>        'Val13',
    'EmailAddress' =>       'Val14',
    'Company' =>            'Val15',
    'DoorCode' =>           'Val16',
    'CustFaultDescription' => 'Val17',
    'InWarranty' =>         'Val18',
    'PurchaseDate' =>       'Val19',
    'FaultCode' =>          'Val20',
    'GeneralMessage' =>     'Val21'
);

$result = $client->__soapCall('MyFunction', $soapMessage);
$request = $client->__getLastRequest(); 
```

导致此请求被发送？？

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.url.com/">
  <SOAP-ENV:Body>
    <ns1:MyFunction/>
    <param1>Val1</param1>
    <param2>Val2</param2>
    <param3>Val3</param3>
    <param4>Val4</param4>
    <param5>Val5</param5>
    <param6>Val6</param6>
    <param7>Val7</param7>
    <param8>Val8</param8>
    <param9>Val9</param9>
    <param10>Val10</param10>
    <param11>Val11</param11>
    <param12>Val12</param12>
    <param13>Val13</param13>
    <param14>Val14</param14>
    <param15>Val15</param15>
    <param16>Val16</param16>
    <param17>Val17</param17>
    <param18>Val18</param18>
    <param19>Val19</param19>
    <param20>Val20</param20>
    <param21>Val21</param21>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:31:20.927

原来你需要在正文中包含整个调用。现在听起来不言自明！

```
$soapMessage = array(
  'MyFunction' => 
  array(
    'order' =>
    array(
      'DealerCode' => 'Val1',
      'AscCode' => 'Val2',
    ),
  ),
)
$result = $client->__soapCall('MyFunction', $soapMessage); 
```

# android - 带有叠加层的 Android 应用介绍

> ID：12730330
> 
> 赞同：5
> 
> 时间：2012-10-04T15:08:26.653
> 
> 标签：android, user-interface

我想为新用户快速介绍一下我的应用程序。介绍将突出 ui 中的功能并解释功能，类似于 Slices（见下面的屏幕截图）和 Youtube 应用程序。

我想这涉及整个屏幕的透明覆盖，然后在屏幕上获取视图的位置，以便可以在覆盖中圈出或突出显示它。我不确定如何使覆盖的一部分不透明。有任何想法吗？

![在此处输入图像描述](../Images/d7374f1e9c75054fc3537f3f0123c0d1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:34:10.377

为了以最简单的方式获得您想要的效果，您需要创建新资产并让它们覆盖您的不透明背景。这会产生效果的错觉，而不会让动态方式在所有设备上正常工作。

在层中打孔的动态方法包括创建自定义视图、覆盖 dispatchDraw 方法以及将自定义蒙版应用到画布。为了在画布上打孔，您的自定义绘画对象将像这样创建：

```
maskPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN)); 
```

兼容性不是很好，所以我建议伪造它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:19:09.917

只需添加一个新的 View() 并将背景设置为黑色，alpha 为 70%。确保 Fragment 的 Parent ViewGroup 是一个 Relativelayout 并且调用了 bringChildToFront(MyHighlightedView)。

```
overlay=new View();
overlay.setBackgroundColor(#*BLACKWITHALPHAVALUE*);
getView().addView(overlay, new LayoutParams(MATCH_PARENT,MATCH_PARENT);
getView().bringChildToFront(overlay);
getView().bringChildToFront(MyHighlightedView); 
```

# html - 非 webkit 浏览器的 CSS 属性 print-color-adjust

> ID：12730331
> 
> 赞同：14
> 
> 时间：2012-10-04T15:08:27.083
> 
> 标签：html, firefox, css, cross-browser

我正在寻找一个与`-webkit-print-color-adjust`Safari 具有相同效果的属性，但 Firefox 和资源管理器。

如果有这样的房产，你能推荐给我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:31:17.633

目前不存在此类财产。许多浏览器供应商认为所有打印规范都由用户自行决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-07T13:34:53.163

似乎[CSS 工作组的](https://wiki.csswg.org/)颜色模块 4 草案现在包括[color-adjust](https://drafts.csswg.org/css-color-4/#color-adjust "颜色调整")。我希望它会在未来进入浏览器，因为我也一直在寻找`-webkit-print-color-adjust`.

该提案非常符合[-webkit-print-color-adjust](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-print-color-adjust)的行为。它有两个值：

*   `economy`（默认）允许打印机使用其默认的省墨模式。
*   `exact`提示打印机应保留颜色。

# jquery - slideToggle()：没有滑动

> ID：12730337
> 
> 赞同：-3
> 
> 时间：2012-10-04T15:09:06.140
> 
> 标签：jquery

我有一张桌子，当我按下第一行时，我只是想滑动第二行的内容。我正在使用 slideToggle("slow") 但没有幻灯片（没有动画），它只是直接切换第二行并且需要太多时间..

这里是：

[http://jsfiddle.net/7LH3p/4/](http://jsfiddle.net/7LH3p/4/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:13:33.070

你需要`display: block`元素`slide`才能工作。`tr`默认情况下，元素不是块元素，因此您需要在 CSS 中明确指定：

```
tr
{
    display: block;
}​ 
```

# php - 需要正则表达式帮助

> ID：12730338
> 
> 赞同：1
> 
> 时间：2012-10-04T15:09:09.623
> 
> 标签：php, regex

虽然我可以找到很多关于正则表达式的教程，但它仍然超出我的掌握。我想要创建的正则表达式很简单（根据我在一些示例中看到的内容来判断），但我根本想不通。

我想做一个简单的替换，如下所示：

1.  我将图像元数据保存在 MySQL 表中，其中包含以下字段：id、name、title 和 alt。
2.  在我的内容中，我想写`[[IMAGE:1:right]]content here[[image:2:left]].`
3.  我想获取 ID（数字）和浮点数（左或右）的匹配项，并将整个字符串替换为向左或向右浮动的图像，由数据库表中的 ID 检索。

这是我的尝试：

```
preg_match("/^\[\[image:(\d+):(left|right)\]\]+/i", "[[IMAGE:1:right]]content here[[image:2:left]]", $matches); 
```

这给了我以下回报：

```
Array ( [0] => [[IMAGE:1:right]] [1] => 1 [2] => right ) 
```

所以，它找到了一个，但我希望它找到所有这些，因为我可能在帖子中有多个图像。据我所知，+ 应该匹配所有条目，而 i 应该不区分大小写。似乎不区分大小写的方式有效，但我只得到一个回报。

有人可以让我知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:11:43.297

这不是它的工作原理。这`+`仅适用于紧接在它之前的令牌 - `]`. 您想`global`在 Perl 语言中进行匹配，这对于 PHP（我认为您正在使用？）意味着调用 function [`preg_match_all()`](http://php.net/manual/en/function.preg-match-all.php)。您还必须删除`^`，因为只有一个图像出现在字符串的开头。

此外，`[`and`]`是正则表达式中的特殊字符 - 所以当你想要一个文字括号时，请通过编写`\[\[`and来转义它们`\]\]`。

# php - PHP cURL 无法解析主机

> ID：12730339
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:09:24.213
> 
> 标签：php, curl

我从有时似乎无法访问的网站收集数据（或者，也许只是 DNS 主机有时会出现一些问题）。用 PHP 编写的程序（使用 CLI 启动）退出并出现错误：

> 无法解析主机“abcdef.com”

我想拦截这个错误，就像例外一样，因为程序不能退出。

我尝试了“尝试捕获”，但这不起作用。

我想避免使用外部守护程序来重新启动程序...

感谢您的帮助。

编辑：使用的代码：

```
function goToPage($url) {
        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($ch, CURLOPT_COOKIEFILE, realpath("./cookies/cookie.txt"));
        $ret = curl_exec($ch);
        if ($ret === FALSE) {
            die(curl_error($ch));
        }
        curl_close($ch);

        $this->delay();

        return $ret;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:13:22.093

你确定它实际上是在停止你的程序的执行吗？我的意思是，如果它不是异常......它不是异常。据我所知，cURL 不会抛出任何异常或致命错误。您所看到的很可能只是常规通知/警告。要确定是否有 cURL 错误，您可以使用函数 curl_errno() 和 curl_error()：

```
if(curl_errno($ch))
{
    echo 'error:' . curl_error($ch);
} 
```

或者，如果你想抛出一个自定义异常：

```
//you'll probably want to customize this further based on the type of error.
if(curl_errno($ch)){
    throw new Exception( curl_error($ch) );
} 
```

# c# - 如何为 WPF 单选按钮创建布尔到字符串转换器？

> ID：12730340
> 
> 赞同：3
> 
> 时间：2012-10-04T15:09:33.473
> 
> 标签：c#, wpf, radio-button, ivalueconverter

我有一个 DataGridColumn 表示一个条目是否是主要显示值，但该值在数据库中存储为“Y”或“N”。

```
 <Window.Resources>
      <local:BoolToPrimaryConverter x:Key="BoolToPrimaryConverter" />
 </Window.Resources>
 <DataGrid Name="NamingDatagrid" AutoGenerateColumns="False" ItemsSource="{Binding EntityReferences, Mode=TwoWay}"
              CanUserAddRows="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Convention" Binding="{Binding ReferenceType}"/>
            <DataGridTextColumn Header="Value" Binding="{Binding ReferenceValue}" />
            <DataGridTemplateColumn Header="Primary" >
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <RadioButton GroupName="Prime" IsChecked="{Binding Primary, Mode=TwoWay, Converter={StaticResource BoolToPrimaryConverter}, UpdateSourceTrigger=PropertyChanged}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

布尔到字符串转换器

```
 class BoolToPrimaryConverter : IValueConverter {
      public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
           return ((value as string).Equals("Y")) ? true : false;
      }

      public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
           return (bool)value ? "Y" : "N";
      }
 } 
```

即使设置了转换器，它也永远不会被调用（使用调试器检查）。有什么我需要让它工作的东西吗？

编辑：添加了 Primary 来自的类。

```
 [Serializable]
 [EdmEntityType(NamespaceName = "cContainer", Name = "LUREFFORMAT")]
 [DataContract(IsReference = true)]
 public class LUREFFORMAT : EntityObject {
      public LUREFFORMAT();

      [DataMember]
      [EdmScalarProperty(EntityKeyProperty = false, IsNullable = false)]
      public short DISPLAYORDER { get; set; }
      [DataMember]
      [EdmScalarProperty(EntityKeyProperty = false, IsNullable = false)]
      public short ENABLED { get; set; }
      [DataMember]
      [EdmScalarProperty(EntityKeyProperty = true, IsNullable = false)]
      public long ID { get; set; }
      [EdmScalarProperty(EntityKeyProperty = false, IsNullable = false)]
      [DataMember]
      public string ISUNIQUE { get; set; }
      [DataMember]
      [XmlIgnore]
      [EdmRelationshipNavigationProperty("cContainer", "FK_REFS_REFFORMATID", "REFS")]
      [SoapIgnore]
      public EntityCollection<PLATFORMREFS> REFS { get; set; }
      [EdmScalarProperty(EntityKeyProperty = false, IsNullable = false)]
      [DataMember]
      public string PRIMARY { get; set; }
      [DataMember]
      [EdmScalarProperty(EntityKeyProperty = false, IsNullable = false)]
      public string REFFORMAT { get; set; }

      public static LUREFFORMAT CreateLUREFFORMAT(long id, string rEFFORMAT, string pRIMARY, string iSUNIQUE, short dISPLAYORDER, short eNABLED);
 } 
```

编辑 2：添加 EntityRefs 属性

```
 public EntityCollection<PLATFORMREFS> EntityRefs {
      get {
           return entityRefs;
      }
      set {
           entityRefs = value;
           OnPropertyChanged("EntityRefs");
      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:09:51.123

@Bob 因此，如果相同，请将绑定从 Primary 更改为大写 PRIMARY，并且 PRIMARY 是 LUREFFORMAT 中的一个值，不能直接访问，只需从 LUREFFORMAT 类中指向即可。

```
 <DataTemplate>
   <RadioButton GroupName="Prime" IsChecked="{Binding LUREFFORMAT.PRIMARY, Mode=TwoWay, Converter={StaticResource BoolToPrimaryConverter}, UpdateSourceTrigger=PropertyChanged}" />
 </DataTemplate> 
```

# sql-server - 用于审计的 SSIS 2005 转换？

> ID：12730341
> 
> 赞同：0
> 
> 时间：2012-10-04T15:09:36.130
> 
> 标签：sql-server, ssis

我的数据仓库中有两张表，需要在多个级别上进行审计。第一个表的结构如下：

```
CREATE TABLE [dbo].[EnctrAPR](
[EncounterNumber] [varchar](50) NOT NULL,
[MedRec] [varchar](50) NULL,
[AdmitDate ] [datetime] NULL,
[DischargeDate ] [datetime] NULL,
[Age ] [varchar](50) NULL,
[Disposition ] [varchar](50) NULL,
[DRG ] [varchar](50) NULL,
[APRDRG ] [varchar](50) NULL,
[APRDRGWeight] [varchar](50) NULL,
[SOI] [varchar](50) NULL,
[ROM] [varchar](50) NULL,
[Age18] [bit] NULL,
[Age18To64] [bit] NULL,
[Age65] [bit] NULL,
[BowelObstruction] [bit] NULL,
[AMI] [bit] NULL,
[CABG] [bit] NULL,
[Valve] [bit] NULL,
[PCI] [bit] NULL,
[Sepsis] [bit] NULL,
[GSP] [bit] NULL,
[HF] [bit] NULL,
[Stroke] [bit] NULL,
[Pneumonia] [bit] NULL,
[DKA] [bit] NULL,
[GIBleed] [bit] NULL,
[Pancreatitis] [bit] NULL,
[RF] [bit] NULL,
[PE] [bit] NULL,
[COPD] [bit] NULL,
      CONSTRAINT [PK_EnctrAPR] PRIMARY KEY CLUSTERED 
(
[EncounterNumber] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON,
ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我需要对数据仓库中的另一个表进行几次审计。它们是： 识别上表中不在 DWH 表中的记录。识别 DWH 表中不在上表中的记录。记录上面每个位字段为 TRUE 但在 DWH 中为 FALSE 的记录。确认给定日期范围内的总记录数。

我可以使用 SSIS 来完成这些审核吗？或者，存储过程和 SSIS 的组合是最好的选择吗？请向我提供一些关于如何最好地自动化此类审计的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:15:35.720

您可以使用 SSIS 中的查找转换来完成此操作，但此组件有点慢。如果数据库在不同的服务器上，我会倾向于使用 SSIS。如果它们在同一个实例中，我可能会使用没有 SSIS 的存储过程。

如果您确实使用 SSIS 方法，您将有一个 OLEDB 源来读取 ODH 中的行，对上表进行查找转换，然后将结果写入目标。

我认为将 SSIS 和 SP 结合起来完成这项特定任务没有任何好处。

# git - 看不到远程分支

> ID：12730344
> 
> 赞同：18
> 
> 时间：2012-10-04T15:09:50.340
> 
> 标签：git

我仍在学习 git，不确定一些基本的东西是如何工作的。我通过执行以下操作创建了一个本地分支：

```
git branch AppStore 
```

我不记得我是如何将此分支推送到 github.com，但我可以在存储库中看到 MyBranch。当我做

```
git branch -a 
```

我看到这个：

```
 ARC
* AppStore
  Refactoring
  Release3
  master
  remotes/origin/AppStore
  remotes/origin/HEAD -> origin/master 
```

还列出了更多遥控器。因此，在我创建分支的计算机上，我看到了 AppStore 分支。但是，我的同事没有一个可以。当我们尝试

```
git pull origin AppStore 
```

它抓住了变化。但是当我们尝试

```
git checkout AppStore 
or
git checkout origin AppStore 
```

我们没能做到。我们缺少什么？谢谢！

编辑：

我确实根据 VonC 的回答尝试了这个：

```
git push --set-upstream origin AppStore 
```

输入我的凭据后，我得到：

```
Branch AppStore set up to track remote branch AppStore from origin.
Everything up-to-date 
```

但是我的同事仍然看不到分支:-。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-04T15:18:51.743

您需要在上游存储库上发布您的分支，同时在本地跟踪它（确保您的本地分支与新的远程分支保持同步：请参阅“[什么是跟踪分支](https://stackoverflow.com/questions/4693588/git-what-is-a-tracking-branch/4697054#4697054)”）

```
git push --set-upstream origin AppStore 
```

* * *

如评论中所述，其他开发人员需要获取已推送的内容（包括新分支）。
git fetch origin 是一种方法，但如果您不确定远程 repo 的名称，a[`git remote update`](https://stackoverflow.com/questions/1856499/git-remote-update)就可以了。

这将更新他们的远程分支，但不会创建同名的本地分支，详见“[将所有远程 git 分支跟踪为本地分支](https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches)”。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-04T15:16:18.127

当您执行时，它会在您的本地计算机上`git branch xyz`创建一个分支。`xyz`通常，您创建一个新分支，`master branch`以便它具有`master's code`. 创建分支后`xyz`，您进行更改，然后您必须`git push origin xyz`使分支可见`github`。

这样做`git branch -a`会在你的机器上显示你的分支。直到你`push`的分支你无法在远程仓库中找到它。

# ios - 是否可以使用 facebook 服务器端身份验证和 facebook ios sdk

> ID：12730349
> 
> 赞同：-2
> 
> 时间：2012-10-04T15:10:03.033
> 
> 标签：ios, facebook, authentication, server-side

Facebook 有一个服务器端身份验证 - [https://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)。该方法包括三个主要步骤：

1）客户端登录。结果我们得到一个代码（&code=CODE_GENERATED_BY_FACEBOOK）

2）我们将此代码传递给服务器。

3) 服务器使用此请求获取访问令牌 -

```
https://graph.facebook.com/oauth/access_token?
client_id=YOUR_APP_ID&redirect_uri=YOUR_REDIRECT_URI&client_secret=YOUR_APP_SECRET&code=CODE_GENERATED_BY_FACEBOOK 
```

我还没有找到如何在 ios 上使用此方法在客户端获取代码。facebook ios sdk可以吗？正如我现在看到的，FBSession 只返回客户端访问令牌，这是短暂的。

或者有没有其他方法可以在服务器端获取长期访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:06:16.453

所以，我明白了

我需要启用有关offline_access 弃用的选项。它在高级应用设置中被命名为“删除离线访问权限”。

比任何传递到服务器端并扩展的短期令牌都将产生长期令牌。

# c# - 如何避免对象引用未设置为 C# 控制台项目中的对象实例

> ID：12730356
> 
> 赞同：0
> 
> 时间：2012-10-04T15:10:29.313
> 
> 标签：c#

您好我正在尝试创建一个类的数组并将值分配给它的字段。我的代码就像

```
 RecordRef[] referLocation = new RecordRef[1];
        referLocation[0].type = RecordType.location;
        referLocation[0].internalId = "6"; 
```

但是我收到异常错误：对象引用未设置为对象的实例。代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T15:11:54.303

您已经创建了对象数组`RecoredRef`，但尚未在其中创建任何对象。您需要创建要使用的对象的实例：

```
RecordRef[] referLocation = new RecordRef[1];
// create new instance of RecordRef, which is held inside your array
referLocation[0] = new RecordRef();  
referLocation[0].type = RecordType.location;
referLocation[0].internalId = "6"; 
```

您还可以使用[`object initializer`](http://msdn.microsoft.com/en-us/library/bb384062.aspx)：

```
referLocation[0] = new RecordRef
{ 
    type = RecordType.location,
    internalId = "6"
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T15:13:46.303

您只初始化了数组，但 referLocation[0] 仍然为空。你想做的是：

```
RecordRef[] referLocation = new RecordRef[]
{
   new RecordRef()
   {
      type = RecordType.location,
      internalId  = "6"
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:12:24.893

一般建议，而不是针对您的具体情况：

1.  确定发生错误的行号。（Visual Studio 应该告诉你，错误消息也应该告诉你）
2.  将潜在麻烦的代码行封装在`if(whatever == null)`语句中并进行相应处理。

这是需要注意和计划的事情，因为这个错误太常见了，而且太令人沮丧，无法在以后进行故障排除。

# javascript - 使用 Javascript 和 JQuery 创建桌面应用程序？

> ID：12730366
> 
> 赞同：0
> 
> 时间：2012-10-04T15:10:47.017
> 
> 标签：javascript, jquery, html, desktop

我想知道是否可以使用 HTML 5 技术创建桌面应用程序？

我有不错的网络技能，我需要访问的只是用于保存文件、加载文件等的硬盘驱动器。

该应用程序将是一组 HTML 页面，但它会使用浏览器，但它应该允许访问硬盘驱动器。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:14:32.447

[使用HTML Executable](http://www.htmlexe.com/Home)从您的网站、HTML 或 PDF 文档创建安全的电子书和桌面应用程序。将您的网站和演示文稿作为独立的桌面应用程序提供给您的客户和访问者（一个 EXE）。

或者您可以尝试下载[Gecko 引擎](https://wiki.mozilla.org/Gecko%3aHome_Page)或[WebKit 引擎](http://www.webkit.org/)并在其上构建应用程序！:)

或者您会搜索[Awesomium](http://awesomium.com/)，它是 Chromium/WebKit 的无窗口端口。API 可用于 Windows、Mac OSX 和 Linux 上的 C++ 和 .NET。

# mongodb - spring data - Mongodb - findBy 嵌套对象的方法

> ID：12730370
> 
> 赞同：34
> 
> 时间：2012-10-04T15:11:14.037
> 
> 标签：mongodb, spring-data, findby

我有两个域对象，

```
@Document
public class PracticeQuestion {

     private int userId;
     private List<Question> questions;

// Getters and setters
}

@Document
public class Question {

     private int questionID;
     private String type;

// Getters and setters
} 
```

我的 JSON 文档是这样的，

```
{
    "_id" : ObjectId("506d9c0ce4b005cb478c2e97"),
    "userId" : 1,
    "questions" : [
        {
            "questionID" : 1,
            "type" : "optional"

         },
        {
             "questionID" : 3,
             "type" : "mandatory"
        }
    ]
} 
```

我必须根据 userId 和 questionId 更新“类型”，所以我在自定义 Repository 接口中编写了一个 findBy 查询方法，

```
public interface CustomRepository extends MongoRepository<PracticeQuestion, String> {

    List<PracticeQuestion> findByUserIdAndQuestionsQuestionID(int userId,int questionID);       
} 
```

我的问题是，当我使用 userId 为 1 和 questionID 为 3 执行此方法时，它会返回整个问题列表，而与 questionID 无关。查询方法名称是否有效或者我应该如何编写嵌套对象的查询。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-10T14:04:12.393

只需`@Query`在该方法上使用注释即可。

```
public interface CustomRepository extends MongoRepository<PracticeQuestion, String> {

    @Query(value = "{ 'userId' : ?0, 'questions.questionID' : ?1 }", fields = "{ 'questions.questionID' : 1 }")
    List<PracticeQuestion> findByUserIdAndQuestionsQuestionID(int userId, int questionID);

} 
```

通过添加注释的`fields`一部分`@Query`，你告诉 Mongo 只返回文档的那一部分。但请注意，它仍然以相同的格式返回整个文档 - 只是丢失了您未指定的所有内容。所以你的代码仍然需要返回`List<PracticeQuestion>`，你必须这样做：

```
foreach (PracticeQuestion pq : practiceQuestions) {
    Question q = pq.getQuestions().get(0); // This should be your question.
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-01-19T08:51:34.363

属性表达式

属性表达式只能引用托管实体的直接属性，如前面的示例所示。在创建查询时，您已经确保解析的属性是托管域类的属性。但是，您也可以通过遍历嵌套属性来定义约束。假设人员有带有邮政编码的地址。在这种情况下，方法名称为`List<Person> findByAddressZipCode(ZipCode zipCode);` 创建属性遍历 x.address.zipCode。解析算法首先将整个部分 (AddressZipCode) 解释为属性，并检查域类中具有该名称的属性（未大写）。如果算法成功，它将使用该属性。如果不是，该算法将源在驼峰部分从右侧拆分为头部和尾部，并尝试找到相应的属性，在我们的示例中为 AddressZip 和 Code。如果算法找到具有该头部的属性，它将获取尾部并继续从那里向下构建树，以刚才描述的方式将尾部拆分。如果第一个拆分不匹配，则算法将拆分点向左移动（地址、邮政编码）并继续。

虽然这应该适用于大多数情况，但算法可能会选择错误的属性。假设 Person 类也有一个 addressZip 属性。该算法已经在第一轮拆分中匹配，本质上选择了错误的属性并最终失败（因为 addressZip 的类型可能没有 code 属性）。要解决这种歧义，您可以在方法名称中使用 _ 来手动定义遍历点。所以我们的方法名最终会是这样的：

**用户数据存储库：**

```
List<UserData> findByAddress_ZipCode(ZipCode zipCode);

UserData findByUserId(String userId); 
```

**配置文件存储库：**

```
Profile findByProfileId(String profileId); 
```

**UserDataRepositoryImpl：**

```
UserData userData =  userDateRepository.findByUserId(userId);

Profile profile = profileRepository.findByProfileId(userData.getProfileId());

userData.setProfile(profile); 
```

**示例 Pojo：**

```
public class UserData {

    private String userId;
    private String status;
    private Address address;
    private String profileId;

    //New Property
    private Profile profile;

    //TODO:setter & getter
}

public class Profile {

    private String email;
    private String profileId;
} 
```

对于您的存储库类中的上述 Document/POJO：

**UserData findByProfile_Email(String email);**

参考：[http ://docs.spring.io/spring-data/data-commons/docs/1.6.1.RELEASE/reference/html/repositories.html](http://docs.spring.io/spring-data/data-commons/docs/1.6.1.RELEASE/reference/html/repositories.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-26T18:36:23.563

您需要使用 Mongo 聚合框架：

1）为mongo存储库创建自定义方法：[将自定义方法添加到存储库](https://www.mkyong.com/spring-data/spring-data-add-custom-method-to-repository/)

```
UnwindOperation unwind =  Aggregation.unwind("questions");
MatchOperation match = Aggregation.match(Criteria.where("userId").is(userId).and("questions.questionId").is(questionID));
Aggregation aggregation = Aggregation.newAggregation(unwind,match);
AggregationResults<PracticeQuestionUnwind> results = mongoOperations.aggregate(aggregation, "PracticeQuestion",
                PracticeQuestionUnwind.class);
return results.getMappedResults(); 
```

2）你需要创建一个类（因为展开操作改变了类结构），如下所示：

```
public class PracticeQuestionUnwind {
    private String userId;
    private Question questions; 
```

这将只为您提供与提供匹配的结果，`userId`并且 `questionId`

**userId: 1 和 questionId: 111 的结果：**

```
{
    "userId": "1",
     "questions": {
                "questionId": "111",
                "type": "optional"
             }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-09T10:17:27.217

我也有类似的问题。为此，我在嵌套类属性之前添加了 $。试试下面的查询

`@Query(value = "{ 'userId' : ?0, 'questions.$questionID' : ?1 }") List<PracticeQuestion> findPracticeQuestionByUserIdAndQuestionsQuestionID(int userId, int questionID);`

# android - 工作推文解析器但结果为空

> ID：12730372
> 
> 赞同：0
> 
> 时间：2012-10-04T15:11:18.467
> 
> 标签：android, twitter

我的任务是创建可以从 x 帐户获取最新推文的应用程序。这是我所做的代码。但是，只有当我设置（作为搜索字符串）我的帐户名时，我才会得到结果（大于 0）。否则我什么也得不到。有人可以解释我为什么吗？我将不胜感激。

```
private ListView lv;
private EditText et;
private ArrayAdapter<String> adapter;
String[] values;
private Token token = null;
private Credential c = null;
private UserAccountManager m = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    lv = (ListView) findViewById(R.id.listView1);
    et = (EditText) findViewById(R.id.editText1);
    et.setText("twapime");

    doRest();// first run, initialization, first search

}

private void doRest() {
    initAccount();
    initSearching();
}

private void initSearching() {
    ArrayList<String> listax = getSearchResults(et.getText().toString());
    initListViewAdapter(listax);
}

private void initListViewAdapter(ArrayList<String> listax) {
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, listax);
    lv.setAdapter(adapter);

}

private void initAccount() {
    token = new Token("xxxx",
            "xxxx");
    c = new Credential("xxxx",
            "xxxx", token);

    m = UserAccountManager.getInstance(c);
}

private ArrayList<String> getSearchResults(String userTwitter) {
    ArrayList<String> lista = new ArrayList<String>();

    try {
        if (m.verifyCredential()) {

            SearchDevice sd = SearchDevice.getInstance();
            Query q1 = QueryComposer.from(userTwitter);

            Tweet[] ts = sd.searchTweets(q1);
            System.out.println(ts.length);

            for (int i = 0; i < ts.length; i++) {

                lista.add(ts[i].getString(MetadataSet.TWEET_CONTENT));
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    } catch (LimitExceededException e) {
        e.printStackTrace();
    }

    return lista;
}

public void btnSearcher(View w) {//OnClickListener
    initSearching();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:50:34.957

我认为当有人阻止不受信任的用户的公共信息数据时会发生这种情况。

# c#-4.0 - 内容加载 （“圆形的”）; 未找到 Round.png 文件

> ID：12730375
> 
> 赞同：3
> 
> 时间：2012-10-04T15:11:23.913
> 
> 标签：c#-4.0, xna

> **可能重复：**
> [XNA - 找不到文件问题](https://stackoverflow.com/questions/4644325/xna-file-not-found-problem)

在这里，我试图在 windows phone 7 应用程序项目中加载 Round.png 文件。我不知道如何在运行时加载此图像。如果这是一个愚蠢的问题，作为 Windows 应用程序开发的新手，我真的很抱歉。请帮助...提前谢谢！！！

```
 /// <summary>
     /// This is the main type for your game
     /// </summary>
   public class Game1 : Microsoft.Xna.Framework.Game
   {
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Texture2D texRound;
    Rectangle HitRegion;
    bool isSelected = false;

    TouchCollection touches = TouchPanel.GetState();

    //start position of round, in the center of screen
    int positionX = 400;
    int positionY = 240;

    //random number Axis X and Y
    Random randomX;
    Random randomY;

    //the range for random number of start and end of X, Y
    int startX, endX;
    int startY, endY;

    //total time
    float milliseconds = 0f;

    //score count
    int count = 0;

    //game font
    SpriteFont font;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";

        // Frame rate is 30 fps by default for Windows Phone.
        TargetElapsedTime = TimeSpan.FromTicks(333333);

        // Extend battery life under lock.
        InactiveSleepTime = TimeSpan.FromSeconds(1);
    }

    /// <summary>
    /// Allows the game to perform any initialization it needs to before starting to       run.
    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>

     protected override void Initialize()
     {
        // TODO: Add your initialization logic here

        base.Initialize();
     }

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.

        spriteBatch = new SpriteBatch(GraphicsDevice);
        texRound = Content.Load<Texture2D>("Round");
        randomX = new Random();
        randomY = new Random();

        // The X axis bound range of touch for ball
        startX = texRound.Width;
        endX = GraphicsDevice.Viewport.Width - texRound.Width;

        // The X axis bound range of touch for ball
        startY = texRound.Height;
        endY = GraphicsDevice.Viewport.Height - texRound.Height;

        // Define the HitRegion of ball in the middle of touchscreen
        HitRegion = new Rectangle(positionX - texRound.Width / 2,
        positionY - texRound.Height / 2, texRound.Width,
        texRound.Height);

        // Load the font definition file
        font = Content.Load<SpriteFont>("gamefont");

        // TODO: use this.Content to load your game content here
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here

        // Accumulate the elapsed milliseconds every frame
        milliseconds +=
        (float)gameTime.ElapsedGameTime.TotalMilliseconds;
        if (milliseconds > 1000)
        {
            // When the milliseconds greater than 1000 milliseconds,
            // randomly locate a new position for the ball
            HitRegion.X = randomX.Next(startX, endX + 1);
            HitRegion.Y = randomY.Next(startY, endY + 1);
            // Reset the milliseconds to zero for new milliseconds
            // count
            // make the ball not been selected
            milliseconds = 0f;
            if (isSelected)
                isSelected = false;
        }
        base.Update(gameTime);

        Point touchPoint = new Point((int)touches[0].Position.X, (int)touches[0].Position.Y);
        if (HitRegion.Contains(touchPoint))
        {
            isSelected = true;
            count++;
        }
        else
        {
            isSelected = false;
        }
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Green);

        // TODO: Add your drawing code here

        spriteBatch.Begin();
        if (isSelected)
        {
            spriteBatch.Draw(texRound, HitRegion, Color.Red);
        }
        else
        {
            spriteBatch.Draw(texRound, HitRegion, Color.White);
        }
        spriteBatch.DrawString(font, "Score:" + count.ToString(),
        new Vector2(0f, 0f), Color.White);
        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

![错误详情](../Images/f4754fee6a0936fcd0edb88975bd7f47.png)

![这是错误信息](../Images/d48567f86c4c79a89066be27c1c7ef30.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:18:41.827

内部异常中的路径看起来是正确的：`\"Content\\Round.xnb\"`，多余的斜杠只是因为它被转义了。这是来自您的可执行文件的相对路径，默认情况下它类似于：`Visual Studio Projects\MyCoolGame\MyCoolGame\bin\x86\Debug\Content\Round.xnb`. 您应该将此路径与`Round.xnb`文件的真实路径进行比较，而不是 png。

*   如果`Round.xnb`在任何地方都不存在，那么您的 png 文件不是 Content 项目的一部分，或者 Content 项目没有被构建
*   如果文件确实存在，但在子目录中，请在加载纹理时指定子目录的名称，如：`Content.Load<Texture2D>("myDir\\Round");`

由于内部异常不是在寻找“Round.png.xnb”，因此您的名字正确无误，@Ricket 的回答对您没有任何帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:10:02.263

我假设您正确地将 Round.png 文件放在您的内容目录（或项目）中，并且按照默认设置正确编译。

右键单击该文件并打开其属性。检查“名称”字段。这就是`Content.Load<>`所期待的。因此，例如，如果您将名为“Circular.png”的文件拖到 Content 文件夹中，那么它将自动命名为“Circular”，但如果您将文件重命名为“Round.png”，通常它将保持名为“ Circular”，让您手动更改属性中的名称并更新代码中的所有引用。

# r - 缩减具有部分重叠信息的数组

> ID：12730378
> 
> 赞同：0
> 
> 时间：2012-10-04T15:11:47.560
> 
> 标签：r, match

问题：
使用 R，我有两个数组，都具有相同类型的数据（例如，相同的行、列和/或层名称）。但是，它们具有不同的维度。行和列名称部分重叠。也就是说，大多数级别的行和列因子都出现在两个数组中，但有些是每个数组独有的。我想取其中一个数组，并将其削减，以便仅包含两个数组共有的行和列级别。我以前可以通过编写自己的非常复杂的函数来完成此操作，但看起来这确实应该是一个简单的操作。有人可以为此指出正确的方向吗？

这是一些示例代码，我认为这是完成此任务的一种不必要的费力方法。在这种情况下， sp.ixn.core 是一个较小的 2D 数组，我想减少一个 3D 数组，以便行和列与 sp.ixn.core 匹配……最后一点是我仔细检查数字是否加起来正确。

```
temp=table(data$plant,data$Species,data$jdate)
temp2=array(,dim=c(nrow(sp.ixn.core),ncol(temp),dim(temp)[3]))

for (i in 1:length(rownames(sp.ixn.core))){
temp2[i,,] = temp[rownames(temp) == rownames(sp.ixn.core)[i],,]
}

colnames(temp2) = colnames(temp)
temp3=array(,dim=c(nrow(sp.ixn.core),ncol(sp.ixn.core),dim(temp)[3]))
for (i in 1:length(colnames(sp.ixn.core))){
temp3[,i,] = temp2[,colnames(temp2) == colnames(sp.ixn.core)[i],]
}
dim(temp3)

sp.ixn.core.tbl = temp3
dimnames(sp.ixn.core.tbl)[[3]] = dimnames(temp)[[3]]
dimnames(sp.ixn.core.tbl)[[2]] = colnames(sp.ixn.core)
dimnames(sp.ixn.core.tbl)[[1]] = rownames(sp.ixn.core)
dimnames(sp.ixn.core.tbl)

for (i in 1:nrow(sp.ixn.core)){
    if (sum(sp.ixn.core.tbl[i,,]) == rowSums(sp.ixn.core)[i])
        print("yes")
}

for (i in 1:ncol(sp.ixn.core)){
    if (sum(sp.ixn.core.tbl[,i,]) == colSums(sp.ixn.core)[i])
        print("yes")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:51:27.850

我想你可能只需要：

```
newtemp <- temp[ rownames(temp) %in% rownames(sp.ixn.core),
                 colnames(temp) %in% colnames(sp.ixn.core),
                 dimnames(temp)[3] %in% dimnames(sp.ixn.core)[3] ] 
```

自从 dimnames(x)[1] == rownames(x) 起，您就可以使用 'dimnames'。正如 nograpes 建议的那样，最好针对您的实际数据对象进行测试。我有点担心你的表调用可能会返回一个带有 NULL 暗名的对象。

# objective-c - iOS UIImageView 缩小图像在 iPad 2 上产生锯齿图像

> ID：12730384
> 
> 赞同：41
> 
> 时间：2012-10-04T15:12:08.783
> 
> 标签：objective-c, ios, ipad, uiimageview

我正在使用 UIImageView 显示图像的缩略图，然后可以选择以全尺寸查看。UIImageView 将其内容模式设置为宽高比合适。

图像通常从大约 500 像素 x 500 像素缩小到 100 像素 x 100 像素。在视网膜 iPad 上，它们显示得非常好，而在 iPad2 上，它们的锯齿很严重，直到尺寸接近原始图像尺寸。

例子：

![原始图像](../Images/3841cab2f57b4d20ae1d0c3385310cef.png)

原始图像

![视网膜 iPad 100x100](../Images/87e3c971ec7f7e4b290011f8874c268f.png)

100px x 100px 的 Retina iPad 渲染

![iPad 2 100x100](../Images/613e3174c13077e4d4702080f1c0227d.png)

iPad 2 以 100 像素 x 100 像素渲染

iPad 2 和新 iPad 之间的区别可能只是屏幕分辨率，也可能是 GPU 更适合缩放图像。无论哪种方式，iPad 2 的渲染效果都很差。

我首先尝试通过创建一个新的上下文来减小图像大小，将插值质量设置为高并将图像绘制到上下文中。在这种情况下，图像在两台 iPad 上看起来都很好。

在我继续图像复制/调整大小之前，我想检查一下我是否遗漏了一些更简单的东西。我很欣赏 UIImage 不是要缩放的，但我的印象是 UIImageView 可以处理缩放，但目前它似乎并没有很好地缩小。我错过了什么（如果有的话）？

**更新**：注意：在代码中添加了渲染/调整大小图像上的阴影。禁用此功能对缩放质量没有影响。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-05T09:01:24.273

我尝试过的另一种似乎确实可以改善事情的方法是设置 minificationFilter：

```
[imageView.layer setMinificationFilter:kCAFilterTrilinear] 
```

质量肯定有所提高，我没有注意到性能受到影响。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-08T21:46:51.217

如果您不想自己重新采样图像，应用一个小的缩小过滤器偏差可以帮助解决这个问题：

```
imageView.layer.minificationFilter = kCAFilterTrilinear
imageView.layer.minificationFilterBias = 0.1 
```

[![在此处输入图像描述](../Images/bff0ae0082b1b6e2622b6e0ab548d1f8.png)](https://i.stack.imgur.com/WZpC7.png)

左侧图像没有应用过滤。右图的过滤器偏差为 0.1。

请注意，不需要显式光栅化。

使用非常小的值，您通常可以想出一个足够平滑缩放伪影的值，这比自己调整位图的大小要容易得多。当然，随着偏差的增加，您会丢失细节，因此小于 0.1 的值可能就足够了，尽管这完全取决于显示图像的图像视图框架的大小。

只需意识到三线性过滤有效地启用了层上的[mipmapping](https://en.wikipedia.org/wiki/Mipmap)，这基本上意味着它会以越来越小的比例生成位图的额外副本。这是一种非常常见的渲染技术，用于提高渲染速度并减少缩放锯齿。权衡是它需要更多内存，尽管连续下采样位图的内存使用量呈指数级减少。

尽管我自己没有尝试过，但这种技术的另一个潜在优势是您可以为`minificationFilterBias`. 因此，如果您要将图像视图作为动画的一部分大幅缩小，请考虑将过滤器偏差`0.0`设置为您确定适合缩小尺寸的任何小值。

最后，正如其他人所指出的，如果您的源图像非常大，那么过度使用这种技术是不合适的，因为核心动画将始终围绕原始位图。在大多数情况下，最好调整图像大小然后丢弃源图像，而不是使用 mipmapping，但对于一次性或图像视图将被足够快地释放的情况，这很好。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-25T23:06:26.473

If you're not afraid of wasting memory and know what you're doing for a particular case, this works beautifully.

```
myView.layer.shouldRasterize = YES;
myView.layer.rasterizationScale = 2; 
```

The resulting quality is much better than setMinificationFilter.

I am using images that are 256x256 and scaling them to something like 48 px. Obviously a saner solution here would be to downscale the images to the exact destination size.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-04T16:12:02.653

如果您只是将大图像放在小图像视图中，它看起来会很糟糕。

解决方案是正确调整图像大小......我将添加一个可以解决问题的示例函数：

```
- (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize {
    CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
    CGImageRef imageRef = image.CGImage;

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);

    CGContextConcatCTM(context, flipVertical);
    CGContextDrawImage(context, newRect, imageRef);

    CGImageRef newImageRef = CGBitmapContextCreateImage(context);
    UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

    CGImageRelease(newImageRef);
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此功能可能需要一些时间..因此您可能希望将结果保存到缓存文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-05T10:38:42.743

Next helped to me:

```
imageView.layer.minificationFilter = kCAFilterTrilinear
imageView.layer.shouldRasterize = true
imageView.layer.rasterizationScale = UIScreen.mainScreen().scale 
```

**Keep an eye on performance** if used in scroll lists.

# sql - 将表结构复制到sqlite3中的新表

> ID：12730390
> 
> 赞同：45
> 
> 时间：2012-10-04T15:12:25.060
> 
> 标签：sql, database, sqlite, copy

有没有一种简单的方法可以将现有的表结构复制到新的表结构中？（不需要数据，只需要结构 -> 像 id INTEGER，name varchar(20) ...）

谢谢

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-05T20:38:36.760

你可以使用这样的命令：

```
CREATE TABLE copied AS SELECT * FROM mytable WHERE 0 
```

但由于 SQLite 的动态类型，大部分类型信息都会丢失。

如果您只需要一个行为与原始表类似的表，即具有相同数量和名称的列，并且可以存储相同的值，这就足够了。

如果确实需要和原来一模一样的类型信息，可以`CREATE TABLE`从表中读取原来的 SQL 语句`sqlite_master`，如下所示：

```
SELECT sql FROM sqlite_master WHERE type='table' AND name='mytable' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-27T09:28:09.957

SQLite 无法克隆具有 PK、默认值和索引的表。

使用其他工具进行黑客攻击是必要的。

在 shell 中，将表名替换为 sed。

```
sqlite3 dbfile '.schema oldtable' | sed '1s/oldtable/newtable/' | sqlite3 dbfile 
```

你可以检查新表。

```
sqlite3 dbfile '.schema newtable' 
```

将保留主键、默认值和索引。

我希望这个命令可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T13:23:53.583

sqlite> .schema

```
CREATE TABLE [About](
  [id],
  [name],
  [value]); 
```

.schema 命令将为您提供关于表的结构，如何通过手动编写 SQLite 解释器，输入命令来制作它。

粘贴并执行，为表提供新名称的 CREATE 块：

```
sqlite> CREATE TABLE [AboutToo](
  [id],
  [name],
  [value]); 
```

.tables 命令现在将显示您有两个“已复制”的新旧表。

```
sqlite> .tables
About     AboutToo 
```

ps sqlite> 是您在启动 SQLite.exe 解释器后进入控制台的命令提示符。要获得它，请访问 www.sqlite.org

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-26T12:30:51.113

仅作记录-这对我有用：

```
CREATE TABLE mytable (
    contact_id INTEGER PRIMARY KEY,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    email TEXT NOT NULL UNIQUE,
    phone TEXT NOT NULL UNIQUE
);

-- Two variations
INSERT INTO mytable VALUES ( 1, "Donald", "Duck", "noone@nowhere.com", "1234");
INSERT INTO mytable ( contact_id,first_name,last_name,email,phone ) VALUES ( 2, "Daisy", "Duck", "daisy@nowhere.com", "45678");

.output copied.sql
-- Add new table name
.print CREATE TABLE copied ( 
-- Comment out first line from SQL
SELECT "-- " || sql FROM sqlite_master WHERE type='table';
.output 
.read copied.sql
.schema
select * from copied; 
```

请注意，这仅在架构包装在`CREATE TABLE mytable (`. 否则，您将需要使用一些字符串替换`.system`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-23T11:54:40.500

是的，通过使用 SQLiteStudio，您可以使用结构表中的最后一个图标，称为从任何现有表创建类似表。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-13T15:01:37.690

我会选择 ：

```
> sqlite3 <db_file>

sqlite3 > .output <output_file>
sqlite3 > .dump <table_name> 
```

上面的行生成包含 DDL 和 DML 语句的表的转储。

在此文件中进行更改，即查找表名并将其替换为新表名

此外，替换`"CREATE TRIGGER "`为`"CREATE TRIGGER <NEWTABLE>_"`，这将用触发器名称替换现有触发器，并在其上使用新表名。这将使其独一无二，并且不会与现有触发器发生冲突。实施所有架构更改后，使用`.read`

```
sqlite3 > .read output_file 
```

这可以使用 shell 命令在 shell 文件中编写脚本，例如：

```
echo ".dump <table>" | sqlite3 <db_file> > <table_file>
sed -i.bak "s/\b<table_name>\b/<new_table_name>/g" <table_file>
sed -i.bak "s/\bCREATE TRIGGER \b/CREATE TRIGGER <new_table_name_>/g" <table_file>
echo ".read <table_file>" | sqlite3 <db_file>
rm <table_name>.bak 
```

例如 ：

如果您有表 T 并且新表是 db 文件 D 中的 TClone 并且要创建文件 F：然后

```
echo ".dump T" | sqlite3 D.sqlite > F
sed -i.bak "s/\bT\b/TClone/g" F
sed -i.bak "s/\bCREATE TRIGGER \b/CREATE TRIGGER TClone_>/g" F
echo ".read F" | sqlite3 D.sqlite 
rm T.bak 
```

最后，您可以通过创建参数化版本来概括此脚本，您可以在其中将 source_table、destination_table 和 db_file 作为可用于克隆任何表的参数传递。

我对此进行了测试，并且可以正常工作。

测试：

```
sqlite3 <database_file>
sqlite3 > select * from <new_table>; 
```

应该给你与原始表相同的结果。和

```
sqlite3 > .schema <new_table> 
```

应该具有与具有新名称的原始表相同的架构。

# vb.net - 无法检测 Enter 键的 KeyPress 事件

> ID：12730391
> 
> 赞同：3
> 
> 时间：2012-10-04T15:12:28.080
> 
> 标签：vb.net, winforms, keypress

我正在尝试在 VB.NET 2008 中使用 KeyPress 事件，但它不起作用。谁能帮我弄清楚这段代码有什么问题？此消息框不会出现，我的数据库中的我的状态也不会出现。程序说没问题，但它不工作。

```
If e.KeyChar = Chr(Keys.Enter) Then
    tblLogin = Proses.ExecuteQuery("Select * From TblUser where kode_user = '" & KdUserTxt.Text & "'")
    If tblLogin.Rows.Count = 0 Then
        MessageBox.Show("Kode User Not Found!", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information)
        KdUserTxt.Focus()
    Else
        StatusTxt.Text = tblLogin.Rows(0).Item("status")
        PswTxt.Focus()
    End If
End If 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:22:32.523

您不应该使用该`KeyPress`事件来捕获像回车键这样的控制键。相反，您应该使用该`KeyDown`事件。允许您捕获键盘上的`KeyDown`任何物理键。例如：

```
Private Sub TextBox1_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs) Handles TextBox1.KeyDown
    If e.KeyCode = Keys.Enter Then
        MessageBox.Show("Enter key pressed")
    End If
End Sub 
```

然而，完成这样的事情的正常方法是在表单中添加一个按钮，例如“确定”或“提交”按钮。然后，在表单的属性中，将`AcceptButton`属性设置为该按钮。然后，当用户按下 Enter 键时，WinForm 框架会自动为您调用该按钮的单击事件。同样，该`CancelButton`属性设置当用户按下 Escape 键时单击哪个按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-22T09:41:04.917

**如果您设置了WinForm的****AcceptButton**属性，您将无法捕获**Enter**键**KeyDown**事件。

 ****将所需 WinForm的属性**AcceptButton设置为****none**以使您的代码正常工作。****

# java - 通过 API 导出联系人

> ID：12730393
> 
> 赞同：0
> 
> 时间：2012-10-04T15:12:30.520
> 
> 标签：java, exchange-server-2010

有谁知道如何将 Exchange Server 2010 邮箱的联系人导出到 Java 应用程序？最好在 Java 中，或者在基于 SOAP 的 XML 交换中更好，无论如何，我们正在寻找基于 Web 的解决方案。

亲切的问候，杰拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:20:40.010

您是否考虑过使用[Exchange Web 服务](http://msdn.microsoft.com/en-us/library/exchange/dd877045%28v=exchg.140%29.aspx)？[甚至还有Java API](http://archive.msdn.microsoft.com/ewsjavaapi)的源代码。

# asp.net-mvc - 剃刀显示日期MVC

> ID：12730394
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:12:32.247
> 
> 标签：asp.net-mvc, razor, visual-studio-2012

我有 html 作为

@Html.EditorFor(model => model.DateOfBirth})

和财产作为

```
 [DataType(DataType.Date, ErrorMessage = "Invaild date.")]
    [Display(Name = "Date of birth")]
    public DateTime DateOfBirth { get; set; } 
```

控制器代码如下

```
 public ActionResult Edit(int id)
    {
        var member = (MembersViewModel)_db.Members.Single(f => f.Id == id);

        return View(member);
    } 
```

模型为

```
 public class MembersViewModel
{
    public int Id { get; set; }
    public int GymId { get; set; }
    public Gym Gym { get; set; }
    public ICollection<Gym> Gyms { get; set; }
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }
    public Address ShippingAddress { get; set; }
    public Address BillingAddress { get; set; }
    public string PhoneNumber { get; set; }
    public string EmailAddress { get; set; }
    [DataType(DataType.Date, ErrorMessage = "Invaild date.")]
    [Display(Name = "Date of birth")]
    public DateTime DateOfBirth { get; set; }

    public static implicit operator MembersViewModel(Member member)
    {
        return new MembersViewModel
        {
            BillingAddress = member.BillingAddress,
            FirstName = member.FirstName,
            Gyms = member.Gyms,
            Id = member.Id,
            LastName = member.LastName,
            MiddleName = member.MiddleName,
            ShippingAddress = member.ShippingAddress,
            DateOfBirth = member.DateOfBirth

        };

    }

    public static explicit operator Member(MembersViewModel member)
    {
        return new Member
        {
            BillingAddress = member.BillingAddress,
            FirstName = member.FirstName,
            Gyms = member.Gyms,
            Id = member.Id,
            LastName = member.LastName,
            MiddleName = member.MiddleName,
            ShippingAddress = member.ShippingAddress,
            DateOfBirth = member.DateOfBirth

        };

    }
} 
```

它将允许我从日历中选择日期。是的，也将其保存在数据库中。但是当我想填充保存的日期时，文本框仍然为空。我不知道为什么，即使我保存了日期并传递给我的模型。有谁有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:47:01.877

是的，我已经解决了这个问题，不确定是对还是错，但为我工作

```
 @Html.EditorFor(model => model.DateOfBirth)
 @Html.ValidationMessageFor(model => model.DateOfBirth)

 @Html.Hidden("hiddenFieldDateofBirth", Model.DateOfBirth.ToString("yyyy-MM-dd"))

 <script>
    $("#DateOfBirth").val($("#hiddenFieldDateofBirth").val());
</script> 
```

# python - 使用 cairo 在 Python 中绘制大量圆圈

> ID：12730399
> 
> 赞同：6
> 
> 时间：2012-10-04T15:12:42.623
> 
> 标签：python, performance, cairo, pycairo

我目前正在开发一个应用程序，它使用视频投影仪来创建类似于真实激光的效果。可以在 Youtube 上看到我正在尝试存档的一个非常好的[示例](http://www.youtube.com/watch?v=UL7ojzXzCew)。

基本上，该应用程序需要绘制各种颜色的简单移动形状。我有一个使用 pycairo 的非常复杂的设置，允许基元通过一组修改器来更改位置、缩放和旋转。这允许很大的灵活性。

不幸的是，pycairo 在画虚线圆方面似乎很慢。我试着画了 30 个这样的圆圈：

```
# setup, transforms...
# Example color-scheme:
self._colors = [(0.0, 1.0, 0.0)]
# drawing dashes one after another
for count, color in enumerate(self._colors):
    cr.set_dash(dash_len, self._dash_len * count)
    cr.set_source_rgb(color[0], color[1], color[2])

    cr.arc(0, 0, self.radius(), 0, 2 * math.pi)
    cr.stroke() 
```

整个事情看起来像[这样](http://imgur.com/krfD0)。这无法使用 Core2Duo 在 800x600 上维持 25fps。

有没有更快的画圆的方法？质量不是真正的问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T17:46:58.243

Cairo 的目标是高质量渲染 - 它在 2d 事物的静态或准静态渲染中被大量使用。

难怪它会很慢——我想我会在你的位置上做的第一次尝试是使用 pygame + pyopenGL——很抱歉我没有提供一个完整的例子，但这个项目看起来不错开始： http: [//www.willmcgugan.com/blog/tech/2007/6/4/opengl-sample-code-for-pygame/](http://www.willmcgugan.com/blog/tech/2007/6/4/opengl-sample-code-for-pygame/)

# iphone - 如何在 iPhone 应用程序内的 MKMapView 中显示和连接多个位置以及带有注释的路线？

> ID：12730400
> 
> 赞同：3
> 
> 时间：2012-10-04T15:12:46.740
> 
> 标签：iphone, ios, maps, mkmapview, mkannotation

我需要显示一个 MKMapView，其中包含 4 个以上具有不同注释的位置以及连接这些位置的路线。我试图在 MKMapView 中显示多个位置，但我仍然无法找到如何将位置与路线连接起来。如果我以正确的方式实施它，我也试图检查它。我创建了一个**“CLLocationCoordinate2D”**，然后类似地为 4 点添加了纬度和经度。我创建了一个自定义对象，它实现 MKAnnotation 并返回一个 location 。

```
CLLocationCoordinate2D coordinate1 = CLLocationCoordinate2DMake(40.7180583 ,-74.007109);
CLLocationCoordinate2D coordinate2 = CLLocationCoordinate2DMake(40.716355 ,-74.006816);
CLLocationCoordinate2D coordinate3 = CLLocationCoordinate2DMake(40.715281 ,-74.005485);
CLLocationCoordinate2D coordinate4 = CLLocationCoordinate2DMake(40.71559 ,-74.003114);

AnnotationPoints *location1 = [[AnnotationPoints alloc] initWithCoordinate:coordinate1];
AnnotationPoints *location2 = [[AnnotationPoints alloc] initWithCoordinate:coordinate2];
AnnotationPoints *location3 = [[AnnotationPoints alloc] initWithCoordinate:coordinate3];
AnnotationPoints *location4 = [[AnnotationPoints alloc] initWithCoordinate:coordinate4];

NSArray *poiArray = [[NSArray alloc] initWithObjects:location1,location2,location3,location4,nil];
    [mapView addAnnotations:poiArray];

//Inside the Annotation Class initWithCoordinate Method is implemented this way:-
-(id)initWithCoordinate:(CLLocationCoordinate2D) c{
    coordinate=c;
    NSLog(@"%f,%f",c.latitude,c.longitude);
    return self;
} 
```

我在这里担心的是我需要为每个位置创建一个注释点。是否有任何替代方法可以将所有点加载到一个地方。这里的另一个困难是连接所有多个点的路线。对此有什么帮助吗？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:30:19.290

添加注释的方式很好。
不确定您关心的是什么以及“一个地方的所有点”是什么意思。
如果您想在多个位置添加图钉/注释，则必须为每个位置创建一个单独的注释对象。

绘制连接这些位置的路线需要创建叠加层（而不是“注释”）。
您想要添加一个`MKPolyline`地图，您将为其指定坐标列表。

要绘制折线，您不需要在每个坐标处添加注释（但如果您愿意，也可以）。

创建和添加一个`MKPolyline`及其对应的和`MKPolylineView`非常相似。请参阅此问题以获取示例：`MKPolygon``MKPolygonView`

[iPhone MKMapView - MKPolygon 问题](https://stackoverflow.com/questions/5474299/iphone-mkmapview-mkpolygon-issues)

# android - 上下文操作模式自定义行为

> ID：12730404
> 
> 赞同：6
> 
> 时间：2012-10-04T15:13:23.033
> 
> 标签：android, android-actionbar, actionbarsherlock, contextual-action-bar

在 android developer's [menu guide](http://developer.android.com/guide/topics/ui/menus.html#CAB)中提到：

> 当用户取消选择所有项目、按下 BACK 按钮或选择栏左侧的 Done 操作时，操作模式被禁用并且上下文操作栏消失。

从技术上讲，它意味着`mActionMode.finish()`，`BACK`按钮按下，或`Done`动作选择调用`ActionMode.Callback onDestroyActionMode()`方法。

`Toast("Action mode exit by Done select")`我的问题是如何在用户选择时执行自定义操作（例如），以及在用户按下时执行`Done`另一个操作（例如） ？`Toast("Action mode exit by BACK")``BACK`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:44:15.327

解决此问题的一种方法是使用主题从您创建的操作模式中隐藏完成按钮。然后，您只需将自己的完成按钮添加到您创建的每个操作模式。显然，您可以跟踪是否`onDestroyActionMode`因为您的完成按钮被点击或后退按钮而被调用。这是一个主题，您可以将其应用于完成此任务所需的活动。

```
 <style name="HideActionModeCloseTheme" parent="@android:style/Theme.DeviceDefault">
    <item name="android:actionModeCloseButtonStyle">@style/NoCloseButton</item>
</style>

<style name="NoCloseButton" parent="@android:style/Widget.DeviceDefault.ActionButton.CloseMode">
    <item name="android:visibility">invisible</item>
</style> 
```

# svn - svn：中止提交：“file.xpm”仍然存在冲突

> ID：12730408
> 
> 赞同：3
> 
> 时间：2012-10-04T15:13:29.563
> 
> 标签：svn, svncommit

我对 svn 很陌生（基本上，我只知道如何使用 ci、co、rm、add、stat 和 diff 之类的东西，但没有技术细节），我正在尝试检查一大块代码.

我正在从最顶层（使用“.”）进行签入，如下所示：

```
svn ci -m "Major check-in of restructured GUI classes." . 
```

不幸的是，这会使用在某个时候存在的旧图标文件产生以下错误：

```
 Aborting commit: '/users/nvjulian/Research/5prog/trunk/src/gui/icon/Board.xpm' remains in conflict 
```

我试图解决这个问题但没有成功：

```
[nvjulian@dupin trunk]$ svn rm src/gui/icon/Board.xpm
svn: Use --force to override this restriction
svn: 'src/gui/icon/Board.xpm' is not under version control 
```

...即使我这样做了：

```
[nvjulian@dupin trunk]$ svn rm --force src/gui/icon/Board.xpm
svn: 'src/gui/icon/Board.xpm' does not exist 
```

确实，这个文件不存在；它很久以前被删除了，在搜索了我的整个计算机后我没有找到它。我从各种目录位置尝试了这些命令，但仍然无法正常工作。实际上，当我第一次使用 svn stat 为签入做准备时，我遇到了这样的情况：

```
!     C icon/Board.xpm
      >   local delete, incoming delete upon update 
```

所以我试图在那个文件上实际做 svn up（？），但仍然没有成功。我在这里想念什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T16:08:28.213

尝试`svn resolved icon/Board.xpm`将文件标记为已解析。只要 Subversion 认为存在未解决的问题，它就不允许您提交更改。

# xml - JDOM 解析器和命名空间如何获得干净的内容

> ID：12730411
> 
> 赞同：1
> 
> 时间：2012-10-04T15:13:34.563
> 
> 标签：xml, jdom

我的xml：

```
<?xml version="1.0"?>
<company xmlns="http://www.xx.com/xx">
    <staff>
        <firstname>yong</firstname>
        <lastname>mook kim</lastname>
        <nickname>mkyong</nickname>
        <salary>100000</salary>
    </staff>
    <staff>
        <firstname>low</firstname>
        <lastname>yin fong</lastname>
        <nickname>fong fong</nickname>
        <salary>200000</salary>
    </staff>
</company> 

 Reader in = new StringReader(message);
            Document document = (Document)saxBuilder.build(in);
            Element rootNode = document.getRootElement();
            List<?> list = rootNode.getChildren("staff", Namespace.getNamespace("xmlns="http://www.infonova.com/MediationFeed""));

            XMLOutputter outp = new XMLOutputter();
            outp.setFormat(Format.getCompactFormat());

            for (int ii = 0; ii < list.size(); ii++) {
                Element node = (Element)list.get(ii);                 

                StringWriter sw = new StringWriter();
                outp.output(node.getContent(), sw);
                StringBuffer sb = sw.getBuffer();

                String xml = sb.toString();
            } 
```

但我的`xml`对象看起来像这样

```
 <firstname xmlns="http://www.xx.com/xx">yong</firstname>
            <lastname xmlns="http://www.xx.com/xx">mook kim</lastname>
            <nickname xmlns="http://www.xx.com/xx">mkyong</nickname>
            <salary xmlns="http://www.xx.com/xx">100000</salary> 
```

每个元素都有命名空间。为什么这个？我不想要命名空间...我想要与 xml 示例中相同的输出，例如

```
<firstname>yong</firstname>
            <lastname>mook kim</lastname>
            <nickname>mkyong</nickname>
            <salary>100000</salary> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:27:36.687

你得到了正确的结果。所有这些元素都以命名空间“http://www.xx.com/xx”开始，因此在您输出元素时保留它是有意义的。请注意，在 XML 中，默认名称空间（没有前缀的名称空间）适用于所有后代元素，但这些元素本身并未重新定义默认名称空间。

如果这似乎是一个复杂的解释，请尝试命名空间规范：[http](http://www.w3.org/TR/REC-xml-names/) ://www.w3.org/TR/REC-xml-names/或命名空间教程：[http://www.w3schools.com/xml/xml_namespaces。 ASP](http://www.w3schools.com/xml/xml_namespaces.asp)

如果您不想在这些元素上拥有命名空间，您可以使用以下命令删除它们：

```
node.setNamespace(Namespace.NO_NAMESPACE); 
```

罗尔夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:21:33.787

您必须理解 XML（以其文本形式）和节点树之间的区别。在树中，没有继承或默认命名空间之类的东西：每个元素节点都有自己的命名空间，与它的祖先的命名空间无关且独立。要实现您想要的，您必须更改*所有*元素节点的命名空间。在您的情况下，遍历 getContent() 返回的列表并将每个元素的命名空间设置为 NO_NAMESPACE。

# emacs - 鼠标悬停在模式行上时禁用帮助

> ID：12730416
> 
> 赞同：1
> 
> 时间：2012-10-04T15:13:50.077
> 
> 标签：emacs

当鼠标悬停在模式行上时，会出现几行帮助（取决于上下文）。

如何禁用此帮助？我想这样做是因为（至少对于 OS X Lion 上的 Emacs 23），如果我在不移动鼠标的情况下切换到另一个程序，帮助不会消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:16:57.580

如果你的意思是“几行帮助”的工具提示，你可以让帮助字符串显示在回显区域而不是弹出窗口中：

```
(tooltip-mode nil)                      ; one-line help text in the echo area 
```

或者

```
(setq tooltip-use-echo-area t)          ; multi-line help text in the echo area 
```

如果您希望 Emacs 根本不显示帮助字符串，您可以将`show-help-function`变量设置为`nil`：

```
(tooltip-mode nil)
(setq show-help-function nil) 
```

* * *

`C-h``f```tooltip-mode``

> 禁用 Tooltip 模式时，Emacs 在回显区显示一行帮助文本，并且不弹出窗口。

`C-h``v```tooltip-use-echo-area``

> 使用回显区域而不是工具提示框来获取帮助和 GUD 工具提示。要在回显区域显示多行帮助文本，请将其设置为 t 并启用`tooltip-mode`。

[32.19.4 具有特殊含义的属性，GNU Emacs Lisp 参考手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Special-Properties.html#index-inhibit_002dpoint_002dmotion_002dhooks-2977)

> 多变的：`show-help-function`
> 
> 如果此变量不为 nil，则它指定一个调用来显示帮助字符串的函数。这些可能是`help-echo`属性、菜单帮助字符串或工具栏帮助字符串。使用一个参数调用指定的函数，即要显示的帮助字符串。工具提示模式提供了一个示例。

# javascript - jquery 按不同的值对嵌套列表进行排序（不按字母顺序）

> ID：12730418
> 
> 赞同：0
> 
> 时间：2012-10-04T15:14:00.480
> 
> 标签：javascript, jquery

我正在尝试使用不同的变量对嵌套列表进行排序。所以，我有以下内容：

```
<div id="title">
    <h2>AWARDS by TYPE</h2>
    <span>
      <p>Sort by: </p>
      <a href="#" class="sort-by-trophy">Trophy</a>
      <a href="#" class="sort-by-gold">Gold</a>
      <a href="#" class="sort-by-silver">Silver</a>
      <a href="#" class="sort-by-bronze">Bronze</a>
      <a href="#" class="sort-by-other">Other</a>
    </span>
 </div> 
```

和清单：

```
<ul id="accolade-display-list"> 
<li class="accolade-display-list-item"> <img src="/images/us/law/accolades/organisation/27.jpg">
<ul>
  <li class="accolades-org-name"> Argentina Wine Awards </li>
  <li class="accolades-org-details">Silver Medal - 2012, Argentina</li>
</ul>
</li>
<li class="accolade-display-list-item"> <img src="/images/us/law/accolades/organisation/2.jpg">
<ul>
  <li class="accolades-org-name"> Royal Adelaide Wine Show </li>
  <li class="accolades-org-details">Regional Trophy - 2012, Argentina</li>
</ul>
</li>
 <li class="accolade-display-list-item"> <img src="/images/us/law/accolades/organisation/57.jpg">
<ul>
  <li class="accolades-org-name"> Wines of Chile Awards </li>
  <li class="accolades-org-details"> Blue Gold Medal - 2012, Argentina</li>
</ul>
</li>
</ul> 
```

我想要做的是能够单击，说“奖杯”并对顶部带有“奖杯”的项目进行排序，然后单击“黄金”并将这些项目放在顶部，等等。目前有一个每个在我的示例中，但可能有几个“金”项目，“银”项目，等等。我尝试了很多方法，但我最多能够让列表按字母顺序排序，这不是我需要的。这些来自 JSP，我可以根据需要添加额外的类 - 如果需要，我还可以更改列表结构。我有嵌套列表的原因只是为了使与图像的对齐更容易，并且因为将来可能会有额外的行 ( `<li>`)。

如果有帮助，我让列表按字母顺序排序的方式：

```
$("a.sort-by-trophy").click(function(){
console.log('sort-by-trophy clicked');
var list = $("ul#accolade-display-list");
var desc = false;
list.append(list.children().get().sort(function(a, b) {
var aProp = $(a).find(".accolades-org-name").text(),
    bProp = $(b).find(".accolades-org-name").text();
return (aProp > bProp ? 1 : aProp < bProp ? -1 : 0) * (desc ? -1 : 1);
}));
}); 
```

无论如何，如果有人对我可以尝试的东西有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:20:01.553

我建议拥有你应该拥有的值，然后生成输出（检查[underscore.js](http://underscorejs.org)），每次单击排序时，然后再次生成并替换它。

我的意思是，你有原始数据：

```
var list = [{name: 'Argentina Wine Awards', medal: 'silver', ... }, {}, ...]; 
```

然后，当单击排序链接时，您按正确的属性对列表数组进行排序并生成新的 html（使用下划线模板）并用新的 html 替换旧的 html。

# zxing - 如何在 Jdeveloper 11g 上进行 Zxing

> ID：12730419
> 
> 赞同：1
> 
> 时间：2012-10-04T15:14:19.797
> 
> 标签：zxing, jdeveloper, jdeveloper-11g

我正在使用 Jdeveloper 11g ，并想在 java 中开发条形码扫描仪，我通过谷歌搜索找到了 Zxing 以及更多关于它的开源。

我已经下载了 Zxing-2.0.zip 并找到了许多用于 javase、cpp、android 等不同技术的文件夹，我想这些文件夹仅适用于这些技术，如果我想在 java 中开发，我会找到两个文件夹 javase 和 core有专有的 java 代码，但我不知道如何在 Jedeveloper 11g 中使用它们。

有人可以推荐一些教程吗？一些链接，我可以在其中获得有关从哪里开始的有用信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:33:38.003

您从所有需要的 jar 中构建一个库，以便与 zxing 和 af 一起用于您的项目。然后你就可以开始使用 zxing 类了。我相信zxing网站上有一些示例您可以参考。

# ruby-on-rails - 在 Rails 中使用 Paperclip 合成/展平图像

> ID：12730421
> 
> 赞同：0
> 
> 时间：2012-10-04T15:14:28.217
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我正在构建一个 Rails 应用程序，用户可以在其中上传自动裁剪为特定大小的图像，然后他们可以选择与裁剪图像大小完全相同的叠加层。

我想要做的是合成或展平两个图像并将其保存为单个图像 - 我查看了 Image Magick 文档，但我看不到如何应用他们给出的示例：

```
composite -gravity center smile.gif rose: rose-over.png 
```

使用回形针。

此外，该示例引用了两个特定图像，但我想知道如何改为传递变量（用户上传的图像）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:39:26.667

我相信您想使用回形针处理器。

这是高级描述： [https ://github.com/thoughtbot/paperclip#custom-attachment-processors](https://github.com/thoughtbot/paperclip#custom-attachment-processors)

这是使用复合材料的要点示例（在此处推荐[https://github.com/thoughtbot/paperclip/issues/978](https://github.com/thoughtbot/paperclip/issues/978)）：

[https://gist.github.com/708077](https://gist.github.com/708077)

# php - 这个登录脚本有什么问题？

> ID：12730422
> 
> 赞同：0
> 
> 时间：2012-10-04T15:14:29.640
> 
> 标签：php, session, login

我不知道为什么这个 PHP 登录脚本不起作用。当我尝试登录时，它总是返回：“Ongeldig wachtwoord/gebruikersnaam！”。

这是脚本：

```
session_start();
include('connect.php');

// functie voor random key
function make_rand($length) {
  $chars = "aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ1234567890";
  $rand = '';
  for ($i = 1; $i <= $length; $i++) {
    $num = rand(0, strlen($chars));
    $rand .= substr($chars, $num, 1);
    }
 return $rand;
  } 
```

此函数创建一个随机密钥以用作 session_id。

```
// kijk of formulier is verzonden
if ($_SERVER['REQUEST_METHOD'] == "POST") {     // indien verzonden
  $query= mysql_query("SELECT * FROM customers WHERE name = '" .$_POST['inlognaam'] . "'"); 
```

服务器检查用户名是否存在..

```
if (mysql_num_rows($query) > 0) {    // als er een gebruiker is gevonden
    $user = mysql_fetch_object($query);
    if ($user->password == isset($_POST['password'])) {  
      $_SESSION['user_id'] = $user->name;
      $rand_key = make_rand(50);    // maak een random string voor sessie session_id mbv van functie
      $_SESSION['session_id'] = $rand_key;
      // zet de sessie id in de db zodat we hem later kunnen controleren
      mysql_query("UPDATE customers SET session_id = '" . $rand_key . "' WHERE name = '" . $_SESSION['inlognaam'] . "'");
  $_SESSION['user_ip'] = $_SERVER['REMOTE_ADRESS'];
  echo 'Inloggen is gelukt!';
  } 
```

当用户存在时，服务器会创建一个 session_id，将用户的 ip 地址保存在 user_ip 中，同时还保存用户名（user_id）

```
else {  // ongeldig wachtwoord
  echo 'Ongeldig wachtwoord/gebruikersnaam!';
  }
} else {  // ongeldige gebruikersnaam
echo 'Ongeldig wachtwoord/gebruikersnaam!';
}
  } 
```

如果用户不存在，它会回显： Ongeldig gebruikersnaam/wachtwoord"（用户名/密码无效）。

```
 else {
    echo '<table id="loginbox">';
    echo '<tr><td><b>Login:</b></td></tr>';
    echo '<form action="test.php" method=\"post\">';
    echo '<tr><td>Gebruikersnaam:</td></tr><tr><td> &nbsp;<input style="width:120;" name="inlognaam" type="text" id="inlognaam"> </td></tr>';
    echo '<tr><td>Wachtwoord:</td></tr><tr><td> &nbsp;<input type="password" style="width:120;" name="password id="password"> </td></tr>';
    echo '<tr><td><input type="submit" name="Submit" value="Login"></td></tr>';
    echo '</table>';
} 
```

这是登录表单。

**编辑：**我只是注意到它甚至不使用 PHP 脚本，它只是将输入的内容写入 URL ..

前任。：

```
localhost/School/test.php?inlognaam=Thomas&password=british9&Submit=Login 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:18:09.823

问题大概出在这里：

```
if ($user->password == isset($_POST['password'])) 
```

快速解决：

```
if ($user->password == $_POST['password']) 
```

`isset`返回一个布尔值，告诉是否设置了数组项，而不是项的值。

另外，在你的表格中，它说

```
name="password 
```

应该是：

```
name="password" 
```

除此之外，关于您的代码还有一些话要说：

1.  不要`$_POST[]`直接在 SQL 查询中使用，**始终**对其进行转义。
2.  用于`array_key_exists`检查某个键是否存在于`$_POST`. `isset()`会产生警告。
3.  会话有一个唯一的 id，不需要像这样生成它（顺便说一句，这不能保证是唯一的，请查看 UUID 以获得更好的唯一 ID）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:20:32.897

当您检查密码时，您正在将用户密码值与 isset 的 true 或 false 返回值进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T16:03:26.967

你从来没有设置`$_SESSION['inlognaam']`，所以尝试替换：

```
mysql_query("UPDATE customers SET session_id = '" . $rand_key . "' WHERE name = '" . $_SESSION['inlognaam'] . "'"); 
```

和 ：

```
mysql_query("UPDATE customers SET session_id = '" . $rand_key . "' WHERE name = '" . $_POST['inlognaam'] . "'"); 
```

**编辑：** 或`$_SESSION['inlognaam']`在查询之前设置：

```
$_SESSION['inlognaam'] = $_POST['inlognaam'];
mysql_query("UPDATE customers SET session_id = '" . $rand_key . "' WHERE name = '" . $_SESSION['inlognaam'] . "'"); 
```

**编辑 2：** 要调试，我会尝试简化代码：

```
<?php
include('connect.php');  

// kijk of formulier is verzonden
if ($_SERVER['REQUEST_METHOD'] == "POST") {
    // indien verzonden
    $query= mysql_query("SELECT * FROM customers WHERE name = '" .$_POST['inlognaam'] . "'");
    if (mysql_num_rows($query) > 0) {
        // als er een gebruiker is gevonden
        $user = mysql_fetch_object($query);
        if ($user->password == $_POST['password']) {
            echo 'Inloggen is gelukt!';
        } else {
            // ongeldig wachtwoord
            echo 'Ongeldig wachtwoord/gebruikersnaam!';
        }
    } else {
        // ongeldige gebruikersnaam
        echo 'Ongeldig wachtwoord/gebruikersnaam!';
    }
}else {
?>
<form action="test.php" method="post">
    <table id="loginbox">
        <tr><td><b>Login:</b></td></tr>
        <tr><td>Gebruikersnaam:</td></tr>
        <tr><td> &nbsp;<input type="text" style="width:120;" name="inlognaam" id="inlognaam"> </td></tr>
        <tr><td>Wachtwoord:</td></tr>
        <tr><td> &nbsp;<input type="password" style="width:120;" name="password" id="password"> </td></tr>
        <tr><td><input type="submit" name="Submit" value="Login"></td></tr>
    </table>
</form>
<?php
}
?> 
```

# c++ - 在 C++ 中的区域语言设置下获取当前位置值

> ID：12730425
> 
> 赞同：4
> 
> 时间：2012-10-04T15:14:36.817
> 
> 标签：c++, windows, winapi, visual-c++

想从控制面板->区域和语言->位置当前位置值中提取国家名称

我尝试了以下 win32 GetLocaleInfo（返回文化）GetSystemDefaultLCID（返回语言）的功能。还看了GetGeoInfo

但无法提取国家名称。我希望我的问题很清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:09:58.047

可通过以下方式获得：

1.  通过`GEOID`调用获得[`GetUserGeoID()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318138%28v=vs.85%29.aspx)`GEOCLASS_NATION`
2.  传递`GEOID`to[`GetGeoInfo()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318099%28v=vs.85%29.aspx)以`GEO_FRIENDLYNAME`获取`LangId`( `GetUserDefaultLCID()`for current)中指定的语言的字符串

# python - 自动翻译供个人使用

> ID：12730426
> 
> 赞同：0
> 
> 时间：2012-10-04T15:14:41.310
> 
> 标签：python, web-scraping, translation

我想为我正在编写的应用程序翻译几百个单词。这是一个简单的一次性项目，所以我不愿意为谷歌翻译 API 付费。是否有另一个网络服务可以做到这一点？另一个想法是向 Google 发送搜索，然后从第一个结果中抓取结果。例如，谷歌“将食物翻译成西班牙语”。但是，该页面是一堆混淆的 javascript，我需要帮助来抓取结果。我认为 python 会对此有好处，但任何语言都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-15T07:21:36.537

你可以使用 python 和 googletrans 模块做同样的事情：

```
from googletrans import Translator
text = "YOUR TEXT GOES HERE"
destination = "THE LANGUAGE YOU WANT TO TRANSLATE TO GOES HERE"
trans = Translator()
t = trans.translate(text, dest=destination) 
```

它是免费的、无限制的，并且使用 Google Translate Ajax API。

要翻译成西班牙语，请将“destination”设置为“es”。

以下是所有语言及其代码的列表：

> [https://cloud.google.com/translate/docs/languages](https://cloud.google.com/translate/docs/languages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:19:29.317

Use the [Microsoft Translator API](http://www.microsoft.com/en-us/translator/) or use [Google Translator Toolkit](http://translate.google.com/toolkit/list?hl=en#translations/active). And unless this is a toy application, get a real person to translate it, not a machine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:06:17.300

或者访问 MicrosoftTranslator.com，将您的文本粘贴到一个框中，让其翻译并剪切并粘贴结果？

如果做不到这一点，MS Translator API 每月最多可以免费使用 200 万个字符......所以也许可以使用它？

# mysql - 如何使用 CakePHP 模型关联查找所有对象？

> ID：12730428
> 
> 赞同：0
> 
> 时间：2012-10-04T15:14:46.543
> 
> 标签：mysql, cakephp, model, foreign-keys

这是我的数据库架构：

```
create table Personas
(
    id int primary key AUTO_INCREMENT,
    Nombre varchar(255),
    Apellidos varchar(255),
    FechaDeNacimiento date,
    Sexo Bool,
    CarnetDeIdentidad varchar(255)
);

create table Tutors
(
    id int primary key AUTO_INCREMENT,
    persona_id int,
    FOREIGN KEY (persona_id) REFERENCES Personas(id)
);

create table Alumnos
(
    id int primary key AUTO_INCREMENT,
    persona_id int,
    FOREIGN KEY (persona_id) REFERENCES Personas(id)
);

create table CoordinadorDeProgramas
(
    id int primary key AUTO_INCREMENT,
    persona_id int,
    FOREIGN KEY (persona_id) REFERENCES Personas(id)
); 
```

这是我的模型声明：

```
<?php
class Alumno extends AppModel {
    public $belongsTo = 'Persona';
}

<?php
class Coordinadordeprograma extends AppModel {
    public $belongsTo = 'Persona';
}

<?php
class Tutor extends AppModel {
    public $belongsTo = 'Persona';
}

<?php
class Persona extends AppModel {
    public $hasOne = array('Alumno', 'Tutor', 'Coordinadordeprograma');
} 
```

在我的控制器中，我只想获取所有 Persona 记录，如果它们在 Alumnos 中有外键关系（例如）。

这是我的代码，我希望它说明了我正在尝试做的事情：

```
public function filter($type = null) {
    if ($type == "alumno") { // www.app.com/personas/filter/alumno
        $this->set('personas', $this->Alumno->Persona->find('all'));
    }
} 
```

然而，这将返回每一个 Persona 记录，而不仅仅是那些在 Alumno 表中有记录的记录。

你建议我如何解决这个问题？我认为通过使用`$this->Alumno->Persona`我只会接触到 Alumno 表中的 Persona。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:22:51.813

您可以使用可包含的[行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)并在`Alumno`??

```
$this->set('personas', $this->Alumno->find('all')); 
```

它应该检索“Alumno”以及与之关联的所有模型。您还可以选择要检索的模型。例如，此代码将检索所有“Alumno”及其对应的“Persona”

```
$this->set('personas', $this->Alumno->find('all',array('contain'=>array('Persona'))); 
```

当然..就像@Paulo回答的那样，您可以手动进行加入，但使用“containable”更干净。当我没有任何其他解决方案时，我只会手动加入。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:57:15.897

您可以尝试 make `INNER JOIN` *on the fly*，如下所示：

```
$personas = $this->Alumno->Persona->find('all', array(
    'joins' => array(
        array(
            'table' => 'Alumnos',
            'alias' => 'Alumno',
            'type' => 'INNER',
            'conditions' => 'Persona.id = Alumno.persona_id'
        )
    )
));

$this->set('personas', $personas); 
```

# visual-studio-2010 - 书本式网格设计

> ID：12730434
> 
> 赞同：1
> 
> 时间：2012-10-04T15:15:04.547
> 
> 标签：visual-studio-2010, user-interface, grid

我正在研究设计一个类似于书架的网格，它将容纳 PDF 文件的图标。我从 iBooks 界面得到了我的想法，除了我想做一些外观改变。我很好奇有没有可以在 ASP.net 和 Visual Basic 中使用的 Visual Studios 2010 插件，可以让我创建一个类似于书架的网格？

谢谢 ：）

# 3d - Matplotlib 在 3D 表面中绘制非均匀数据

> ID：12730436
> 
> 赞同：8
> 
> 时间：2012-10-04T15:15:14.030
> 
> 标签：3d, plot, matplotlib

我有一个简单的代码来绘制 Matplotlib 的 3D 点，如下所示 -

```
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt
import numpy as np
from numpy import genfromtxt
import csv

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

my_data = genfromtxt('points1.csv', delimiter=',')
points1X = my_data[:,0]
points1Y = my_data[:,1]
points1Z = my_data[:,2]

## I remove the header of the CSV File.
points1X = np.delete(points1X, 0)
points1Y = np.delete(points1Y, 0)
points1Z = np.delete(points1Z, 0)

# Convert the array to 1D array
points1X = np.reshape(points1X,points1X.size)
points1Y = np.reshape(points1Y,points1Y.size)
points1Z = np.reshape(points1Z,points1Z.size)

my_data = genfromtxt('points2.csv', delimiter=',')
points2X = my_data[:,0]
points2Y = my_data[:,1]
points2Z = my_data[:,2]
## I remove the header of the CSV File.
points2X = np.delete(points2X, 0)
points2Y = np.delete(points2Y, 0)
points2Z = np.delete(points2Z, 0)

# Convert the array to 1D array
points2X = np.reshape(points2X,points2X.size)
points2Y = np.reshape(points2Y,points2Y.size)
points2Z = np.reshape(points2Z,points2Z.size)

ax.plot(points1X, points1Y, points1Z, 'd', markersize=8, markerfacecolor='red', label='points1')
ax.plot(points2X, points2Y, points2Z, 'd', markersize=8, markerfacecolor='blue', label='points2')

plt.show() 
```

我的问题是我试图用我拥有的这些数据点制作一个像样的曲面图。我已经尝试使用`ax.plot_surface()`函数让它看起来不错。为此，我消除了一些点，并重新计算了该函数所需的矩阵类型的输入。但是，我生成的图表更难以解释和理解。所以可能有两种可能性：要么我没有正确使用该函数，要么我试图绘制的数据不适合曲面图。

我期待的是 3D 图表，它的效果类似于我们对 3D 饼图的效果。我们看到一块（提取出来的）是另一块的一部分。我没想到它会完全一样，而是某种效果。

我想问的是：

1.  你认为有可能制作这样的 3D 图形吗？
2.  有没有更好的方法，我可以在 3 维中表达我的数据？

这是2个文件-

点1.csv

```
Dim1,Dim2,Dim3
3,8,1
3,8,2
3,8,3
3,8,4
3,8,5
3,9,1
3,9,2
3,9,3
3,9,4
3,9,5
3,10,1
3,10,2
3,10,3
3,10,4
3,10,5
3,11,1
3,11,2
3,11,3
3,11,4
3,11,5
3,12,1
3,12,2
3,13,1
3,13,2
3,14,1
3,14,2
3,15,1
3,15,2
3,16,1
3,16,2
3,17,1
3,17,2
3,18,1
3,18,2
4,8,1
4,8,2
4,8,3
4,8,4
4,8,5
4,9,1
4,9,2
4,9,3
4,9,4
4,9,5
4,10,1
4,10,2
4,10,3
4,10,4
4,10,5
4,11,1
4,11,2
4,11,3
4,11,4
4,11,5
4,12,1
4,13,1
4,14,1
4,15,1
4,16,1
4,17,1
4,18,1
5,8,1
5,8,2
5,8,3
5,8,4
5,8,5
5,9,1
5,9,2
5,9,3
5,9,4
5,9,5
5,10,1
5,10,2
5,10,3
5,10,4
5,10,5
5,11,1
5,11,2
5,11,3
5,11,4
5,11,5
5,12,1
5,13,1
5,14,1
5,15,1
5,16,1
5,17,1
5,18,1
6,8,1
6,8,2
6,8,3
6,8,4
6,8,5
6,9,1
6,9,2
6,9,3
6,9,4
6,9,5
6,10,1
6,11,1
6,12,1
6,13,1
6,14,1
6,15,1
6,16,1
6,17,1
6,18,1
7,8,1
7,8,2
7,8,3
7,8,4
7,8,5
7,9,1
7,9,2
7,9,3
7,9,4
7,9,5 
```

和 points2.csv

```
Dim1,Dim2,Dim3
3,12,3
3,12,4
3,12,5
3,13,3
3,13,4
3,13,5
3,14,3
3,14,4
3,14,5
3,15,3
3,15,4
3,15,5
3,16,3
3,16,4
3,16,5
3,17,3
3,17,4
3,17,5
3,18,3
3,18,4
3,18,5
4,12,2
4,12,3
4,12,4
4,12,5
4,13,2
4,13,3
4,13,4
4,13,5
4,14,2
4,14,3
4,14,4
4,14,5
4,15,2
4,15,3
4,15,4
4,15,5
4,16,2
4,16,3
4,16,4
4,16,5
4,17,2
4,17,3
4,17,4
4,17,5
4,18,2
4,18,3
4,18,4
4,18,5
5,12,2
5,12,3
5,12,4
5,12,5
5,13,2
5,13,3
5,13,4
5,13,5
5,14,2
5,14,3
5,14,4
5,14,5
5,15,2
5,15,3
5,15,4
5,15,5
5,16,2
5,16,3
5,16,4
5,16,5
5,17,2
5,17,3
5,17,4
5,17,5
5,18,2
5,18,3
5,18,4
5,18,5
6,10,2
6,10,3
6,10,4
6,10,5
6,11,2
6,11,3
6,11,4
6,11,5
6,12,2
6,12,3
6,12,4
6,12,5
6,13,2
6,13,3
6,13,4
6,13,5
6,14,2
6,14,3
6,14,4
6,14,5
6,15,2
6,15,3
6,15,4
6,15,5
6,16,2
6,16,3
6,16,4
6,16,5
6,17,2
6,17,3
6,17,4
6,17,5
6,18,2
6,18,3
6,18,4
6,18,5
7,10,1
7,10,2
7,10,3
7,10,4
7,10,5
7,11,1
7,11,2
7,11,3
7,11,4
7,11,5
7,12,1
7,12,2
7,12,3
7,12,4
7,12,5
7,13,1
7,13,2
7,13,3
7,13,4
7,13,5
7,14,1
7,14,2
7,14,3
7,14,4
7,14,5
7,15,1
7,15,2
7,15,3
7,15,4
7,15,5
7,16,1
7,16,2
7,16,3
7,16,4
7,16,5
7,17,1
7,17,2
7,17,3
7,17,4
7,17,5
7,18,1
7,18,2
7,18,3
7,18,4
7,18,5 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-05T16:05:55.870

除了您需要对数据进行网格化之外，我看不出您的问题在哪里。以下是您的数据的`points1.csv`样子：

```
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
from scipy.interpolate import griddata

fig = plt.figure(figsize=plt.figaspect(0.5))
ax = fig.add_subplot(1, 2, 1, projection='3d')
# note this: you can skip rows!
my_data = np.genfromtxt('file1.csv', delimiter=',',skiprows=1)
X = my_data[:,0]
Y = my_data[:,1]
Z = my_data[:,2]

xi = np.linspace(X.min(),X.max(),100)
yi = np.linspace(Y.min(),Y.max(),100)
# VERY IMPORTANT, to tell matplotlib how is your data organized
zi = griddata((X, Y), Z, (xi[None,:], yi[:,None]), method='cubic')

CS = plt.contour(xi,yi,zi,15,linewidths=0.5,color='k')
ax = fig.add_subplot(1, 2, 2, projection='3d')

xig, yig = np.meshgrid(xi, yi)

surf = ax.plot_surface(xig, yig, zi,
        linewidth=0)

plt.show() 
```

![在此处输入图像描述](../Images/5ca9fdb04fae5e0542b9d05e3786dcfa.png) 我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-15T13:06:00.813

In my case the program suggested by Oz123 ran into

> TypeError: genfromtxt() got an unexpected keyword argument 'skiprows'

So I switched the 'skiprows' keyword argument to 'skip_header' and it works like a charm.

```
python -c "import numpy as np;print np.version.version;"
1.14.3
python --version
Python 2.7.15rc1 
```

# php - 当用户单击“返回”时，onClick 不起作用

> ID：12730438
> 
> 赞同：0
> 
> 时间：2012-10-04T15:15:15.090
> 
> 标签：php, javascript

我有确定表单操作的表单元素，如下所示。这很有效，除非他们在浏览器中单击后退按钮并且忘记了该操作。解决此问题的最佳方法是什么？

```
<label>
    <input type="radio" name="proptype" id="RESI" value="RESI" checked="checked" onClick="this.form.action='?frame=TEST&base=fc';" />
                Residential</label>
<label>
    <input type="radio" name="proptype" id="LOTL" value="LOTL" onClick="this.form.action='?frame=TEST1&base=fc';" />
                Land and Lots</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:20:25.803

```
<script>
$(function() {
    if($("#RESI").attr("checked")){
        form.action='?frame=TEST&base=fc';
    }else if($("#LOTL").attr("checked")){
        form.action='?frame=TEST1&base=fc';
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:17:09.543

检查（成功）单选按钮服务器端的值，而不是动态更改操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:17:22.360

添加一个 cookie，该 cookie 将记住每次重新加载页面时重新加载的操作，然后您应该能够创建您想要的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:20:08.763

使用 onLoad javascript 来拉取所有表单元素的当前状态，并据此计算正确的操作

# php - Joomla 2.5 和社区投票错误

> ID：12730439
> 
> 赞同：0
> 
> 时间：2012-10-04T15:15:17.583
> 
> 标签：php, apache, joomla, joomla2.5

我的 Joomla 2.5 安装了一个名为 Community Polls 的扩展，它来自 corejoomla 网站。我有一个菜单项，它是“社区民意调查主页”项。当用户（我，因为该站点尚未上线）进入该菜单项（页面）时，将返回 500 Apache 错误。深入研究 Apache 错误日志：

```
[Thu Oct 04 09:11:34 2012] [error] [client 75.150.17.49] Premature end of script headers:   php5.cgi, referer: http://removedforsecurity.com/administrator/index.php?option=com_communitypolls&view=polls 
```

更深入一点，在管理界面上，我可以查看所有社区投票配置选项，它们工作正常，但类别除外，当我单击类别时，会弹出 500 错误。在数据库中，类别表存在并且其中包含数据。不知道 CP（社区民意调查）的设计我可以告诉你类别中的数据是否破坏了请求。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:02:15.150

我要做的第一件事是卸载该组件并确保删除与其关联的所有数据库表。然后重新安装并重新配置组件，然后重试。

显然也要做好基础工作——确保 Joomla 和 CP 都是最新版本，确保 PHP 足够新（只要你的 PHP 版本不低于 5.2.0，你应该没问题）。

# c# - C# 访问路径被拒绝... Client.Download(filelink, path)

> ID：12730441
> 
> 赞同：1
> 
> 时间：2012-10-04T15:15:26.870
> 
> 标签：c#, asp.net, download, webclient, directory-permissions

我的代码有问题：当我尝试从保管箱下载文件并将其放入我的漫游文件夹时出现问题，这是错误日志：

```
System.Net.WebException: An exception occurred during a WebClient request. --->              System.UnauthorizedAccessException: Access to the path'C:\Users\Marco\AppData\Roaming\.maycraft' is denied.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)
   at System.Net.WebClient.DownloadFile(Uri address, String fileName)
   --- End of inner exception stack trace ---
   at System.Net.WebClient.DownloadFile(Uri address, String fileName)
   at System.Net.WebClient.DownloadFile(String address, String fileName)
   at MayCraftLauncher.Program.downloadExist() in c:\Users\Marco\Desktop\MayCraftLauncher\C# SourceCode\MayCraftLauncher\MayCraftLauncher\Program.cs:line 71 
```

显然，我试图以管理员权限运行 Visual Studio，但什么都没有......

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.Security.Principal;
using System.IO;
using System.IO.Compression;
using Ionic.Zip;

namespace MayCraftLauncher
{
    class Program
    {

        public static System.Threading.Thread existDownloading = new System.Threading.Thread(downloadExist);

        public static string userName = Environment.UserName;
        public static string path = @"C:\Users\" + userName + @"\AppData\Roaming\.maycraft\Exist";
        public static string maypath = @"C:\Users\" + userName + @"\AppData\Roaming\.maycraft";

        static void Main(string[] args)
        {
            folderExist();
        }

        static void check1()
        {
            while (!Directory.Exists(maypath))
            {
                System.Threading.Thread.Sleep(5000);
            }

                existDownloading.Start();
        }

        static void folderExist()
        {
            if (!Directory.Exists(maypath))
            {
                System.Diagnostics.Process.Start(@"C:\Users\Marco\Desktop\MayCraftLauncher.jar");
                check1();
            }
            else
            {
                fileExist();
            }
        }

        static void fileExist()
        {
            if (File.Exists(path)) //Determina se è la prima volta che l'applicazione viene eseguita
            {
                Console.WriteLine("Exist");
                Console.ReadLine();
            }
            else
            {
                existDownloading.Start();
                Console.WriteLine("Downloading...");
            }
        }

        static void downloadExist()
        {
            WebClient Client = new WebClient();
            DateTime btime = DateTime.Now;
            path = @"C:\Users\" + userName + @"\AppData\Roaming\.maycraft\";
            string publicLinkExist = @"https://dl.dropbox.com/u/35356155/minecraft/download/Exist";
            //string publicLinkMods = @"https://dl.dropbox.com/u/35356155/minecraft/download/mods.7z";
            string publicLinkMods = @"https://dl.dropbox.com/u/35356155/minecraft/download/mcp.7z";
            try
            {
                //----------------File downloading-------------------
                Client.DownloadFile(publicLinkExist, path);
                DirectoryInfo dev = Directory.CreateDirectory(path);
                string devpath = @"C:\Users\" + userName + @"\AppData\Roaming\.maycraft";
                Client.DownloadFile(publicLinkMods, devpath);
                DateTime atime = DateTime.Now;
                Console.WriteLine("Downloading time: " + atime.Subtract(btime).TotalSeconds + " sec.");

                //---------------Files Extracion-------------------
                using (ZipFile zip = ZipFile.Read(devpath))
                {
                    zip.ExtractAll(path);
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e);
                System.IO.File.WriteAllText(@"C:\Users\Marco\Desktop\log.txt", e.ToString());
                Console.ReadKey();
            }
            existDownloading.Abort();
        }

    }
} 
```

# jquery - jQuery .animate 宽度：从另一侧“显示”/“隐藏”

> ID：12730450
> 
> 赞同：2
> 
> 时间：2012-10-04T15:16:05.727
> 
> 标签：jquery, jquery-animate

简单的问题。我在右上角有一些窗口工具，我希望它们在悬停时显示。很简单，我已经完成了

```
d.animate({ width: 'show',opacity:0.7},120); 
```

一切正常，但它从左向右滑动。如果它从右到左进行，看起来会更好。是否可以在不扩展代码的情况下简单地更改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:20:58.310

[http://jsfiddle.net/thHZ9/](http://jsfiddle.net/thHZ9/)

如果要绝对定位元素，请确保将其定位在其右侧，而不是左侧：

```
#cool{
    position:absolute;
    right:10px;
    top:10px;

    ...
}​ 
```

# ruby-on-rails - Ruby on Rails：将模型 X 重命名为 Person 模型

> ID：12730453
> 
> 赞同：0
> 
> 时间：2012-10-04T15:16:10.670
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3

我刚刚使用以下命令将我的表**Client**重命名为**Person ：**

```
class RenameClientsToPeople < ActiveRecord::Migration
  def change
    rename_table :clients, :people
  end
end 
```

我小心地将所有实例和文件名从*client*重命名为*person*以及从*clients*重命名为*people*。但由于某种原因，我的应用程序将不再工作。我经常收到这样的错误：

```
SQLite3::SQLException: no such column: projects.person_id: SELECT COUNT(*) FROM "projects" INNER JOIN "people" ON "projects"."person_id" = "people"."person_id" WHERE "people"."user_id" = 1 
```

谁能告诉我如何解决这个问题？

也许我应该从头开始重新创建 Person 模型，而不是仅仅重命名它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:19:04.970

您还需要将所有外键从 to 重命名`client_id`，`person_id`看起来您忽略了这样做。在该迁移中，您需要执行以下操作：

```
class RenameClientsToPeople < ActiveRecord::Migration
  def change
    rename_table :clients, :people
    rename_column :projects, :client_id, :person_id
  end
end 
```

对引用的每一列执行此操作`client_id`。

# sql-server - 为什么空记录集上的 SUM(...) 返回 NULL 而不是 0？

> ID：12730457
> 
> 赞同：11
> 
> 时间：2012-10-04T15:16:21.283
> 
> 标签：sql-server, null

*我理解*为什么`null + 1`or ( `1 + null`) 返回`null`:`null`表示“未知值”，如果一个值是未知的，它的后继也是未知的。大多数其他涉及 null 的操作也是如此。[*]

但是，我*不明白*为什么会发生以下情况：

```
SELECT SUM(someNotNullableIntegerField) FROM someTable WHERE 1=0 
```

此查询返回`null`. 为什么？这里不涉及未知值！WHERE 子句返回*零*条记录，空值集的总和为`0`.[**] 请注意，该集不是*unknown*，而是*已知为 empty*。

我知道我可以使用`ISNULL`or来解决这种行为`COALESCE`，但我试图理解*为什么*选择了这种对我来说似乎违反直觉的行为。

关于为什么这有意义的任何见解？

* * *

[*] 有一些值得注意的例外，例如`null OR true`，其中显然`true`是正确的结果，因为未知值根本无关紧要。

[**] 就像一组空值的乘积是`1`. 从数学上讲，如果我将 $(Z, +)$ 扩展为 $(Z union {null}, +)$，标识元素的明显选择仍然是`0`, not `null`, 因为`x + 0 = x`but `x + null = null`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T15:34:12.373

ANSI-SQL 标准将空集的 SUM 的结果定义为 NULL。他们为什么这样做，我不知道，但至少所有数据库引擎的行为应该是一致的。

参考：[http](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt) ://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt第 126 页：

> b) 如果指定了 AVG、MAX、MIN 或 SUM，则
> 
> ```
>  Case:
> 
>          i) If TXA is empty, then the result is the null value. 
> ```

TXA 是所选列的操作结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T07:06:15.600

当您的意思是空表时，您的意思是只有`NULL`值的表，这就是我们将`NULL`作为聚合函数输出的原因。您可以将其视为 SQL Server 的设计。

**示例 1**

```
CREATE TABLE testSUMNulls
(
    ID TINYINT
)
GO

INSERT INTO testSUMNulls (ID) VALUES (NULL),(NULL),(NULL),(NULL)

SELECT SUM(ID) FROM testSUMNulls 
```

**示例 2**

```
CREATE TABLE testSumEmptyTable
(
    ID TINYINT
)
GO

SELECT SUM(ID) Sums FROM testSumEmptyTable 
```

在这两个示例中，您都将`NULL`作为输出..

# c# - 显式实现的接口中的可选参数

> ID：12730458
> 
> 赞同：3
> 
> 时间：2012-10-04T15:16:22.983
> 
> 标签：c#, optional-parameters, explicit-interface

```
public interface IFoo
{
    void Foo(bool flag = true);
}

public class Test : IFoo
{
    void IFoo.Foo(bool flag = true) //here compiler generates a warning
    {

    }
} 
```

警告说给定的默认值将被忽略，因为它在不允许的上下文中使用。

为什么显式实现的接口不允许可选参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:18:37.827

显式实现的接口方法总是用编译时类型是接口的目标*调用*，而不是特定的实现。编译器查看它“知道”它正在调用的方法声明的可选参数。`Test.Foo`当它只知道目标表达式为 type 时，您如何期望它知道从中获取参数`IFoo`？

```
IFoo x = new Test();
x.Foo(); // How would the compiler know to look at the Test.Foo declaration here? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:19:00.370

我会使用方法重载。

```
public interface IFoo
{
    void Foo(bool flag);
    void Foo();
}

public class Test : IFoo
{
    void Foo() {
        this.Foo(true);
    }

    void Foo(bool flag) {
         // Your stuff here.
    }
} 
```

# java - spring 联系人示例应用程序中的 applicationContext-common-authorization.xml

> ID：12730461
> 
> 赞同：0
> 
> 时间：2012-10-04T15:16:35.490
> 
> 标签：java, spring, spring-security, acl

我对spring框架很陌生。对于我研究中的一些实验，我想使用 spring 框架的示例应用程序，称为联系。我已经从[这里](http://www.jarvana.com/jarvana/archive-details/org/springframework/security/spring-security-samples-contacts/3.0.3.RELEASE/spring-security-samples-contacts-3.0.3.RELEASE.war)下载了战争文件。

我提取了war文件，`web-inf/class/`其中有一个名为的文件`applicationContext-common-authorization.xml`，如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-2.0.1.xsd">

<!--
  - Application context containing the ACL beans.
  -
  -->

  <!-- ========= ACL SERVICE  DEFINITIONS ========= -->

  <bean id="aclCache" class="org.springframework.security.acls.domain.EhCacheBasedAclCache">
    <constructor-arg>
      <bean class="org.springframework.cache.ehcache.EhCacheFactoryBean">
        <property name="cacheManager">
          <bean class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"/>
        </property>
        <property name="cacheName" value="aclCache"/>
      </bean>
    </constructor-arg>
  </bean>

  <bean id="lookupStrategy" class="org.springframework.security.acls.jdbc.BasicLookupStrategy">
    <constructor-arg ref="dataSource"/>
    <constructor-arg ref="aclCache"/>
    <constructor-arg>
        <bean class="org.springframework.security.acls.domain.AclAuthorizationStrategyImpl">
            <constructor-arg>
            <list>
                <bean class="org.springframework.security.core.authority.GrantedAuthorityImpl">
                    <constructor-arg value="ROLE_ADMINISTRATOR"/>
                </bean>
                <bean class="org.springframework.security.core.authority.GrantedAuthorityImpl">
                    <constructor-arg value="ROLE_ADMINISTRATOR"/>
                </bean>
                <bean class="org.springframework.security.core.authority.GrantedAuthorityImpl">
                    <constructor-arg value="ROLE_ADMINISTRATOR"/>
                </bean>
            </list>
            </constructor-arg>
        </bean>
    </constructor-arg>
    <constructor-arg>
      <bean class="org.springframework.security.acls.domain.ConsoleAuditLogger"/>
    </constructor-arg>
  </bean>

  <bean id="aclService" class="org.springframework.security.acls.jdbc.JdbcMutableAclService">
    <constructor-arg ref="dataSource"/>
    <constructor-arg ref="lookupStrategy"/>
    <constructor-arg ref="aclCache"/>
  </bean>

</beans> 
```

在此，有人可以告诉我以下特定部分的作用吗？

```
class="org.springframework.security.core.authority.GrantedAuthorityImpl">
                        <constructor-arg value="ROLE_ADMINISTRATOR"/>
                    </bean>
                    <bean class="org.springframework.security.core.authority.GrantedAuthorityImpl">
                        <constructor-arg value="ROLE_ADMINISTRATOR"/>
                    </bean>
                    <bean class="org.springframework.security.core.authority.GrantedAuthorityImpl">
                        <constructor-arg value="ROLE_ADMINISTRATOR"/>
                    </bean> 
```

1.  我只是想知道如果我更改了`value=ROLE-SUPERVISOR`，它将如何影响应用程序？

2.  如果我想更改用户的权限/角色，我可以通过在此处更改参数来做到这一点吗？

3.  基本上，我正在寻找一些应用程序，如果它是 Web 应用程序，则在配置文件或 xml 文件中，可以更改角色或权限，并且可以尝试通过对应用程序执行未经授权的访问来利用该应用程序。如果有人知道这种免费的应用程序，请告诉我。它应该只在 java/jsp 中。

我想知道 spring 框架示例应用程序，我可以做这样的事情。但是我不确定这个“联系人”应用程序是否可行，因为之前没有弹簧知识。

谢谢。

# java - 如何从运行时加载的类中调用构造函数？爪哇

> ID：12730463
> 
> 赞同：3
> 
> 时间：2012-10-04T15:16:39.433
> 
> 标签：java, constructor, classloader, nosuchmethoderror, dynamic-class-loaders

我有一个类加载器，它从 /plugins 文件夹中的所有 jar 文件加载“主”类，这假设所有 jar 都有包插件。（插件名称）包含名为 main 的类。每个主类都有一个名为 main 的构造函数。

类加载成功，但我需要知道如何从加载的类中调用主构造函数。

（此类/类在运行时加载）

我试过用这个：

```
Constructor c = cls.getConstructor(Integer.class); //line 41

Plugin plug = (Plugin) c.newInstance(0); 
```

但我收到此错误：

```
java.lang.NoSuchMethodException: plugin.myplugin.main.<init>(java.lang.Integer)  
at java.lang.Class.getConstructor0(Unknown Source)  
at java.lang.Class.getConstructor(Unknown Source)  
at hkr.classloader.PluginLoader.loadPlugins(PluginLoader.java:41)  
at hkr.core.startup.InitializeGame.inigame(InitializeGame.java:32)  
at hkr.launcher.main.LauncherMain.main(LauncherMain.java:16)  

package hackers.classloader;

import java.io.File;
import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLClassLoader;

import org.java.plugin.Plugin;

public class PluginLoader 
{
@SuppressWarnings({ "unused", "rawtypes", "resource" })
    public static void loadPlugins() throws NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException
    {
        Class cls = null;
        int x = hackers.core.startup.InitializeGame.map.size();
        for (int i = 1; i<=x;i++)
        {
            String className = hackers.core.startup.InitializeGame.map.get(i + "");

            File file  = new File(System.getProperty("user.dir") + File.separator + "plugins" + File.separator + className + ".jar");
            URL url = null;
            try {
                url = file.toURI().toURL();
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }  
            URL[] urls = new URL[]{url};
            ClassLoader cl = new URLClassLoader(urls);

            try {
                cls = cl.loadClass("plugin." + className + ".main");
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            Constructor c = cls.getConstructor(Integer.TYPE);
            Plugin plug = (Plugin) c.newInstance(0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:22:29.900

如果您的构造函数采用`java.lang.Integer`, 从我所见，您的代码应该可以工作。

但是，如果您的构造函数的唯一参数是`int`,`getConstructor`将失败。在这种情况下，您必须使用 Integer.TYPE 而不是 Integer.class。我是对的，你需要做的是：

```
Constructor c = cls.getConstructor(Integer.TYPE); 
```

编辑：根据您的编辑和评论，有几个问题。

1.  您要加载的类似乎没有任何显式构造函数，这意味着您只需要做`cls.getConstructor()`
2.  您要执行的 ( `public static void main`) 是一个静态方法，您通常不需要类的实例。此外，由于用户@Eric B 解释的原因，我不确定“main”是否是一个好名字。
3.  由于要调用方法，因此必须实例化构造函数并调用该方法。

根据我的理解，您要执行的代码应该是这样的：

```
Constructor c = cls.getConstructor(); // we get the implicit constructor without parameters
Plugin plugin = (Plugin) c.newInstance(); // we instantiate it, no parameters

Method m = cls.getDeclaredMethod("main", Integer.TYPE);
m.invoke(plugin, 0); // we invoke the method "main" on our dynamically loaded class, with the 0 parameter. 
```

# c++ - 在内联汇编中使用函数范围的标签

> ID：12730468
> 
> 赞同：0
> 
> 时间：2012-10-04T15:16:55.540
> 
> 标签：c++, gcc, assembly, label

我正在使用带有 Eclipse CDT 和 gdb 的 64 位小端 Ubuntu 12.04 LTS 上的 gcc-4.7 在 C++ 中使用内联汇编。我正在尝试做的总体方向是为一些深奥的基于堆栈的编程语言制作某种字节码解释器。

在这个例子中，我一次处理 4 位指令（实际上这将取决于指令），当没有更多非零指令时（因为 0 将是 nop）我读取下一个 64 位字.

不过我想问一下，**如何在内联汇编中使用函数范围的标签？**

汇编中的标签似乎是全局的，这是不利的，我找不到从汇编语句跳转到 C++ 函数范围标签的方法。

以下代码是我正在尝试做的一个示例（注意注释）：

```
 ...
  register long ip  asm("r8");
  register long buf asm("r9");
  register long op  asm("r10");
  ...
fetch:
  asm("mov (%r8), %r9");
  asm("add $8, %r8");
control:
  asm("test %r9, %r9");
  asm("jz   fetch"); // undefined reference to `fetch'
  asm("shr  $4, %r9");
  asm("mov  %r9, %r10");
  asm("and  $0xf, %r10");
  switch (op) {
  ...
  }
  goto control; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:00:15.760

请注意 gcc 内联 asm 文档中的以下注释：

> 说到标签，不支持从一个“asm”跳转到另一个。编译器的优化器不知道这些跳转，因此他们在决定如何优化时无法考虑它们。

您也不能依赖在一个`asm`中设置的标志在下一个可用，因为编译器可能会在它们之间插入一些东西

使用 gcc 4.5 及更高版本，您可以`asm goto`用来做您想做的事：

```
fetch:
  asm("mov (%r8), %r9");
  asm("add $8, %r8");
control:
  asm goto("test %r9, %r9\n\t"
           "jz  %l[fetch]" : : : : fetch); 
```

请注意，您的 asm 的所有其余部分都是完全不安全的，因为它直接使用寄存器而不在其读/写/破坏列表中声明它们，因此编译器可能会决定在其中放入其他内容（尽管 vars 上带有`asm`声明 -它可能会决定那些已经死了，因为它们从未被使用过）。因此，如果您希望这实际上可以与 -O1 或更高版本一起使用，则需要将其编写为：

```
 ...
  long ip;
  long buf;
  long op;
  ...
fetch:
  asm("mov (%1), %0" : "=r"(buf) : "r"(ip));
  asm("add $8, %0" : "=r"(ip) : "0"(ip));
control:
  asm goto("test %0, %0\n\t"
           "jz   %l[fetch]" : : "r"(buf) : : fetch);
  asm("shr  $4, %0" : "=r"(buf) : "0"(buf));
  asm("mov  %1, %0" : "=r"(op) : "r"(buf));
  asm("and  $0xf, %0" : "=r"(op) : "r"(op)); 
```

此时，将其编写为 C 代码要容易得多：

```
long *ip, buf, op;

fetch:
  do {
    buf = *op++;
control:
  } while (!buf);
  op = (buf >>= 4) & 0xf;
  switch(op) {
     :
  }  
  goto control; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:45:46.317

你应该能够做到这一点：

```
fetch:
  asm("afetch: mov(%r8), %r9");
  ...
  asm("jz afetch"); 
```

或者，将标签单独放置`asm("afetch:");`也可以。请注意不同的名称以避免冲突 - 我不完全确定这是必要的，但我怀疑它是必要的。

# java - Java解密字符串/处理错误输入的正确方法

> ID：12730470
> 
> 赞同：1
> 
> 时间：2012-10-04T15:17:04.770
> 
> 标签：java, encryption, cryptography

我正在使用教程中的这个简单类来加密我的 Android 应用程序中的字符串并在 Java REST 后端对其进行解密：

```
package classes;

import java.security.NoSuchAlgorithmException;

import javax.crypto.Cipher;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class MCrypt {

        private String iv = "fedcba9876543210"; 
        private IvParameterSpec ivspec;
        private SecretKeySpec keyspec;
        private Cipher cipher;

        private String SecretKey = "0123456789abcdef";

        public MCrypt()
        {
                ivspec = new IvParameterSpec(iv.getBytes());

                keyspec = new SecretKeySpec(SecretKey.getBytes(), "AES");

                try {
                    cipher = Cipher.getInstance("AES/CBC/NoPadding");
                } catch (NoSuchAlgorithmException e) {
                        e.printStackTrace();
                } catch (NoSuchPaddingException e) {
                        e.printStackTrace();
                }
        }

        public String encrypt(String text) throws Exception
        {
                if(text == null || text.length() == 0)
                        throw new Exception("Empty string");

                byte[] encrypted = null;

                try {
                        cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);

                        encrypted = cipher.doFinal(padString(text).getBytes());
                } catch (Exception e)
                {                       
                        throw new Exception("[encrypt] " + e.getMessage());
                }

                return bytesToHex(encrypted);
        }

        public String decrypt(String code) throws Exception
        {
                if(code == null || code.length() == 0)
                        throw new Exception("Empty string");

                byte[] decrypted = null;

                try {
                        cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

                        decrypted = cipher.doFinal(hexToBytes(code));

                } catch (Exception e)
                {
                       System.out.println(e.toString());
                }

                return new String(decrypted);
        }

        public static String bytesToHex(byte[] data)
        {
                if (data==null)
                {
                        return null;
                }

                int len = data.length;
                String str = "";
                for (int i=0; i<len; i++) {
                        if ((data[i]&0xFF)<16)
                                str = str + "0" + java.lang.Integer.toHexString(data[i]&0xFF);
                        else
                                str = str + java.lang.Integer.toHexString(data[i]&0xFF);
                }
                return str;
        }

        public static byte[] hexToBytes(String str) {
                if (str==null) {
                        return null;
                } else if (str.length() < 2) {
                        return null;
                } else {
                        int len = str.length() / 2;
                        byte[] buffer = new byte[len];
                        for (int i=0; i<len; i++) {
                                buffer[i] = (byte) Integer.parseInt(str.substring(i*2,i*2+2),16);
                        }
                        return buffer;
                }
        }

        private static String padString(String source)
        {
          char paddingChar = ' ';
          int size = 16;
          int x = source.length() % size;
          int padLength = size - x;

          for (int i = 0; i < padLength; i++)
          {
                  source += paddingChar;
          }

          return source;
        }
} 
```

它可以很好地解密我的字符串。当我发送一个我篡改过的加密字符串（替换加密字符串中的一个字符，在解密方法中作为“字符串代码”的那个），当我尝试转换字节时出现异常（NumberFormatException）[]到一个字符串。

我对密码学完全陌生，知道我需要学习基础知识。

我想知道的是：这是检查加密字符串是否有效的常用方法吗？没有可以预先检查的布尔方法吗？如果我保持这样，抛出异常会对我的后端服务的性能产生负面影响吗？

编辑：继承堆栈跟踪：

```
java.lang.NumberFormatException: For input string: "zf"
java.lang.NullPointerException
    at java.lang.String.<init>(String.java:601)
    at classes.MCrypt.decrypt(MCrypt.java:71)
    at service.Service.cryptotest(Service.java:340)
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at us.antera.t5restfulws.services.impl.RestfulWSDispatcher.invokeMethod(RestfulWSDispatcher.java:133)
    at us.antera.t5restfulws.services.impl.RestfulWSDispatcher.service(RestfulWSDispatcher.java:76)
    at $RequestHandler_15b88bc6f1e4.service(Unknown Source)
    at $RequestHandler_15b88bc6f1d7.service(Unknown Source)
    at org.apache.tapestry5.services.TapestryModule$HttpServletRequestHandlerTerminator.service(TapestryModule.java:253)
    at org.apache.tapestry5.internal.gzip.GZipFilter.service(GZipFilter.java:53)
    at $HttpServletRequestHandler_15b88bc6f1d9.service(Unknown Source)
    at org.apache.tapestry5.internal.services.IgnoredPathsFilter.service(IgnoredPathsFilter.java:62)
    at $HttpServletRequestFilter_15b88bc6f1d5.service(Unknown Source)
    at $HttpServletRequestHandler_15b88bc6f1d9.service(Unknown Source)
    at org.apache.tapestry5.services.TapestryModule$1.service(TapestryModule.java:852)
    at $HttpServletRequestHandler_15b88bc6f1d9.service(Unknown Source)
    at $HttpServletRequestHandler_15b88bc6f1d4.service(Unknown Source)
    at org.apache.tapestry5.TapestryFilter.doFilter(TapestryFilter.java:171)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

编辑：好的，显然我在“测试场景”中犯了一些新手错误；）。我用一个有效的 16 位十六进制字符串尝试了相同的调用，结果`decrypt`是一些看起来很奇怪的字符串，这是我所期望的。因此，我将首先检查传入的加密字符串是否是有效的十六进制，然后将其发送到解密方法，然后检查解密的字符串是否包含我期望它包含的内容。非常感谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:29:26.997

所以，一般来说，加密/解密并不*关心*底层数据——也就是说，**任何**数据都可以被加密，**任何**数据都可以被解密。

也就是说，您似乎对输出格式感到困惑。它不是这样的字符串，而是以十六进制编码为 ascii 的二进制数据。如果你在不理解的情况下篡改它，你最终会得到一个没有意义的编码。在这种情况下，被篡改的十六进制字符串不再是十六进制字符串，并且无法解码回字节流进行解密。有效的十六进制字符串只能包含字符**[0-9a-f]**

编辑：

您提到您正试图防止请求伪造。听起来您正在以一种相当冗长的方式进行处理，我可能是错的，但如果您能解释您的场景以及您想要实现的目标，我们可能会想出一个更简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:02:32.827

您篡改的问题是您使用的算法我们无法抵抗篡改；它不提供完整性保护。

问题在于您的解密可能会失败（抛出异常），也可能会成功。解密的输出可能与预期的格式兼容，也可能不兼容。现在可接受的格式可能包含正确的值，也可能不包含。

最好的办法是使用签名、HMAC 或经过身份验证的加密模式。那么对密文的任何改动都会导致异常，没有垃圾可以通过密文验证背后的套路。

# javascript - 用 JavaScript 匹配 HTML 字符串中的所有空格

> ID：12730472
> 
> 赞同：2
> 
> 时间：2012-10-04T15:17:14.193
> 
> 标签：javascript, html, regex, replace

假设您有一个这样的 HTML 字符串：

```
<div id="loco" class="hey" >lorem ipsum pendus <em>hey</em>moder <hr /></div> 
```

并且需要`<br/>`在每个空格字符之后放置元素......我正在使用：

```
HTMLtext.replace(/\s{1,}/g, ' <br/>'); 
```

* * *

但是，问题是这也会在标签之间（标签属性之间）的空格字符之后插入中断，我当然只想对标签文本内容执行此操作。不知何故，我对正则表达式总是很糟糕——有人能帮忙吗？

所以基本上我的原始空格匹配但前提是它不在 < 和 > 之间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:23:58.827

正则表达式不是一个很好的工具。您应该使用 DOM，而不是使用原始 HTML 字符串。

对于一个快速而肮脏的解决方案，它假定您的字符串中除了分隔标签的那些之外*没有* `<`或`>`字符，您可以尝试这个，但是：

```
result = subject.replace(/\s+(?=[^<>]*<)/g, "$&<br/>"); 
```

`<br/>`仅当下一个尖括号是左尖括号时，才会插入后面的空格。

**解释：**

```
\s+     # Match one or more whitespace characters (including newlines!)
(?=     # but only if (positive lookahead assertion) it's possible to match...
 [^<>]* #  any number of non-angle brackets
 <      #  followed by an opening angle bracket
)       # ...from this position in the string onwards. 
```

将其替换为`$&`（包含匹配的字符）加号`<br/>`。

这个正则表达式不检查是否有`>`更远的后面，因为这需要一个积极的look*behind*断言，而JavaScript不支持这些。所以你无法检查，但如果你控制了 HTML 并确定我上面提到的条件得到满足，那应该不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T15:39:21.053

请参阅[此答案](https://stackoverflow.com/questions/10416643/highlight-words-in-html-using-regex-javascript-almost-there/10416898#10416898)以迭代 dom 并用`<br />`元素替换空格。修改后的代码将是：

```
(function iterate_node(node) {
    if (node.nodeType === 3) { // Node.TEXT_NODE
        var text = node.data,
            words = text.split(/\s/);
        if (words.length > 1) {
            node.data = words[0];
            var next = node.nextSibling,
                parent = node.parentNode;
            for (var i=1; i<words.length; i++) {
                var tnode = document.createTextNode(words[i]),
                    br = document.createElement("br");
                parent.insertBefore(br, next);
                parent.insertBefore(tnode, next);
            }
        }
    } else if (node.nodeType === 1) { // Node.ELEMENT_NODE
        for (var i=node.childNodes.length-1; i>=0; i--) {
            iterate_node(node.childNodes[i]); // run recursive on DOM
        }
    }
})(content); // any dom node 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/tJ7vc/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:50:03.183

好的，所以您不想匹配 HTML 标记中的空格。仅正则表达式是不够的。我将使用[词法分析器](https://github.com/aaditmshah/lexer "aaditmshah/词法分析器")来完成这项工作。您可以在[此处](http://jsfiddle.net/aaditmshah/f6qSC/)查看输出。

```
var lexer = new Lexer;

var result = "";

lexer.addRule(/</, function (c) { // start of a tag
    this.state = 2; // go to state 2 - exclusive tag state
    result += c; // copy to output
});

lexer.addRule(/>/, function (c) { // end of a tag
    this.state = 0; // go back to state 0 - initial state
    result += c; // copy to output
}, [2]); // only apply this rule when in state 2

lexer.addRule(/.|\n/, function (c) { // match any character
    result += c; // copy to output
}, [2]); // only apply this rule when in state 2

lexer.addRule(/\s+/, function () { // match one or more spaces
    result += "<br/>"; // replace with "<br/>"
});

lexer.addRule(/.|\n/, function (c) { // match any character
    result += c; // copy to output
}); // everything else

lexer.input = '<div id="loco" class="hey" >lorem ipsum pendus <em>hey</em>moder <hr /></div>';

lexer.lex(); 
```

当然，词法分析器是一个非常强大的工具。您也可以跳过标记中属性值内的尖括号。但是，我将把它留给您实施。祝你好运。

# c# - 如何将 AutomationElement.NativeWindowHandle 转换为 IntPtr

> ID：12730474
> 
> 赞同：2
> 
> 时间：2012-10-04T15:17:19.030
> 
> 标签：c#, winapi, microsoft-ui-automation

我有一个`AutomationElement A`（MS UI 自动化），它代表一个组合框。我想使用 Windows API 调用在该组合框中选择第 n 个项目

```
IntPtr ComboBox_SetCurSel(IntPtr hWnd, int index) 
```

`A.NativeWindowHandle`包含组合框的句柄，但为了将其传递给`ComboBox_SetCurSel`，我需要将其从 转换`int`为`IntPtr`。

如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T16:05:11.013

使用`IntPtr(int)`构造函数。

```
IntPtr WindowHandle = new IntPtr(A.Current.NativeWindowHandle); 
```

# c - close() 没有正确关闭套接字

> ID：12730477
> 
> 赞同：29
> 
> 时间：2012-10-04T15:17:32.360
> 
> 标签：c, sockets, tcp, client-server

我有一个多线程服务器（线程池），它使用 20 个线程处理大量请求（一个节点最多 500/秒）。有一个侦听器线程接受传入连接并将它们排队以供处理程序线程处理。一旦响应准备好，线程就会写出到客户端并关闭套接字。一切似乎都很好，直到最近，一个测试客户端程序在读取响应后开始随机挂起。经过大量挖掘，似乎来自服务器的 close() 实际上并没有断开套接字。我已经使用文件描述符编号向代码中添加了一些调试打印，我得到了这种类型的输出。

```
Processing request for 21
Writing to 21
Closing 21 
```

close() 的返回值为 0，否则将打印另一个调试语句。在客户端挂起的此输出之后，lsof 显示已建立的连接。

服务器 8160 根 21u IPv4 32754237 TCP 本地主机：9980->本地主机：47530（已建立）

客户端 17747 根 12u IPv4 32754228 TCP 本地主机：47530->本地主机：9980（已建立）

就好像服务器从不向客户端发送关闭序列，并且此状态一直挂起，直到客户端被杀死，使服务器端处于关闭等待状态

服务器 8160 根 21u IPv4 32754237 TCP localhost:9980->localhost:47530 (CLOSE_WAIT)

此外，如果客户端指定了超时，它将超时而不是挂起。我也可以手动运行

```
call close(21) 
```

从 gdb 在服务器中，然后客户端将断开连接。这可能在 50,000 个请求中发生一次，但可能不会在很长一段时间内发生。

Linux 版本：2.6.21.7-2.fc8xen Centos 版本：5.4（最终版）

套接字动作如下

服务器：

```
int client_socket;
struct sockaddr_in client_addr;
socklen_t client_len = sizeof(client_addr);  

while(true) {
  client_socket = accept(incoming_socket, (struct sockaddr *)&client_addr, &client_len);
  if (client_socket == -1)
    continue;
  /*  insert into queue here for threads to process  */
} 
```

然后线程拾取套接字并构建响应。

```
/*  get client_socket from queue  */

/*  processing request here  */

/*  now set to blocking for write; was previously set to non-blocking for reading  */
int flags = fcntl(client_socket, F_GETFL);
if (flags < 0)
  abort();
if (fcntl(client_socket, F_SETFL, flags|O_NONBLOCK) < 0)
  abort();

server_write(client_socket, response_buf, response_length);
server_close(client_socket); 
```

server_write 和 server_close。

```
void server_write( int fd, char const *buf, ssize_t len ) {
    printf("Writing to %d\n", fd);
    while(len > 0) {
      ssize_t n = write(fd, buf, len);
      if(n <= 0)
        return;// I don't really care what error happened, we'll just drop the connection
      len -= n;
      buf += n;
    }
  }

void server_close( int fd ) {
    for(uint32_t i=0; i<10; i++) {
      int n = close(fd);
      if(!n) {//closed successfully                                                                                                                                   
        return;
      }
      usleep(100);
    }
    printf("Close failed for %d\n", fd);
  } 
```

客户：

客户端使用 libcurl v 7.27.0

```
CURL *curl = curl_easy_init();
CURLcode res;
curl_easy_setopt( curl, CURLOPT_URL, url);
curl_easy_setopt( curl, CURLOPT_WRITEFUNCTION, write_callback );
curl_easy_setopt( curl, CURLOPT_WRITEDATA, write_tag );

res = curl_easy_perform(curl); 
```

没什么特别的，只是一个基本的 curl 连接。客户端在 tranfer.c（在 libcurl 中）中挂起，因为未将套接字视为已关闭。它正在等待来自服务器的更多数据。

到目前为止我尝试过的事情：

关闭前关闭

```
shutdown(fd, SHUT_WR);                                                                                                                                            
char buf[64];                                                                                                                                                     
while(read(fd, buf, 64) > 0);                                                                                                                                         
/*  then close  */ 
```

设置 SO_LINGER 1 秒后强制关闭

```
struct linger l;
l.l_onoff = 1;
l.l_linger = 1;
if (setsockopt(client_socket, SOL_SOCKET, SO_LINGER, &l, sizeof(l)) == -1)
  abort(); 
```

这些没有任何区别。任何想法将不胜感激。

编辑——这最终成为队列库中的线程安全问题，导致套接字被多个线程不恰当地处理。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-04T15:35:29.853

这是我在许多类 Unix 系统（例如 SunOS 4、SGI IRIX、HPUX 10.20、CentOS 5、Cygwin）上使用的一些代码来关闭套接字：

```
int getSO_ERROR(int fd) {
   int err = 1;
   socklen_t len = sizeof err;
   if (-1 == getsockopt(fd, SOL_SOCKET, SO_ERROR, (char *)&err, &len))
      FatalError("getSO_ERROR");
   if (err)
      errno = err;              // set errno to the socket SO_ERROR
   return err;
}

void closeSocket(int fd) {      // *not* the Windows closesocket()
   if (fd >= 0) {
      getSO_ERROR(fd); // first clear any errors, which can cause close to fail
      if (shutdown(fd, SHUT_RDWR) < 0) // secondly, terminate the 'reliable' delivery
         if (errno != ENOTCONN && errno != EINVAL) // SGI causes EINVAL
            Perror("shutdown");
      if (close(fd) < 0) // finally call close()
         Perror("close");
   }
} 
```

但以上内容并不能保证发送任何缓冲的写入。

优雅关闭：我花了大约 10 年的时间才弄清楚如何关闭套接字。但在接下来的 10 年里，我只是懒洋洋地呼吁`usleep(20000)`稍微延迟一下，以“确保”写缓冲区在关闭之前被刷新。这显然不是很聪明，因为：

*   大部分时间延迟太长了。
*   有些时候延迟太短了——也许吧！
*   诸如 SIGCHLD 之类的信号可能会结束`usleep()`（但我通常会调用`usleep()`两次来处理这种情况——黑客攻击）。
*   没有迹象表明这是否有效。但这可能并不重要，如果 a) 硬重置完全没问题，和/或 b) 您可以控制链接的两侧。

但是做一个适当的冲洗是非常困难的。使用`SO_LINGER`显然*不是*要走的路；参见例如：

*   [http://msdn.microsoft.com/en-us/library/ms740481%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms740481%28v=vs.85%29.aspx)
*   [https://www.google.ca/#q=the-ultimate-so_linger-page](https://www.google.ca/#q=the-ultimate-so_linger-page)

并且`SIOCOUTQ`似乎是特定于 Linux 的。

Note`shutdown(fd, SHUT_WR)` *不会*停止写入，与其名称相反，也可能与`man 2 shutdown`.

此代码`flushSocketBeforeClose()`一直等到读取零字节，或直到计时器到期。该函数`haveInput()`是 select(2) 的简单包装器，并设置为阻塞最多 1/100 秒。

```
bool haveInput(int fd, double timeout) {
   int status;
   fd_set fds;
   struct timeval tv;
   FD_ZERO(&fds);
   FD_SET(fd, &fds);
   tv.tv_sec  = (long)timeout; // cast needed for C++
   tv.tv_usec = (long)((timeout - tv.tv_sec) * 1000000); // 'suseconds_t'

   while (1) {
      if (!(status = select(fd + 1, &fds, 0, 0, &tv)))
         return FALSE;
      else if (status > 0 && FD_ISSET(fd, &fds))
         return TRUE;
      else if (status > 0)
         FatalError("I am confused");
      else if (errno != EINTR)
         FatalError("select"); // tbd EBADF: man page "an error has occurred"
   }
}

bool flushSocketBeforeClose(int fd, double timeout) {
   const double start = getWallTimeEpoch();
   char discard[99];
   ASSERT(SHUT_WR == 1);
   if (shutdown(fd, 1) != -1)
      while (getWallTimeEpoch() < start + timeout)
         while (haveInput(fd, 0.01)) // can block for 0.01 secs
            if (!read(fd, discard, sizeof discard))
               return TRUE; // success!
   return FALSE;
} 
```

使用示例：

```
 if (!flushSocketBeforeClose(fd, 2.0)) // can block for 2s
       printf("Warning: Cannot gracefully close socket\n");
   closeSocket(fd); 
```

在上面， my`getWallTimeEpoch()`类似于`time(),`并且`Perror()`是一个包装器`perror().`

**编辑：**一些评论：

*   我的第一次录取有点尴尬。OP 和 Nemo 质疑关闭前清除内部的需要`so_error`，但我现在找不到任何参考。有问题的系统是 HPUX 10.20。在失败之后`connect()`，只是调用`close()`并没有释放文件描述符，因为系统希望向我传递一个未解决的错误。但我和大多数人一样，从不费心检查的返回值，`close.` 所以我最终用完了文件描述符`(ulimit -n),`，这最终引起了我的注意。

*   （非常次要的一点）一位评论员反对硬编码的数字参数`shutdown()`，而不是例如 SHUT_WR 为 1。最简单的答案是 Windows 使用不同的#defines/enums，例如`SD_SEND`。许多其他编写器（例如 Beej）使用常量，许多遗留系统也是如此。

*   另外，我总是，总是在我的所有套接字上设置 FD_CLOEXEC，因为在我的应用程序中，我从不希望它们传递给孩子，更重要的是，我不希望挂起的孩子影响我。

设置 CLOEXEC 的示例代码：

```
 static void setFD_CLOEXEC(int fd) {
      int status = fcntl(fd, F_GETFD, 0);
      if (status >= 0)
         status = fcntl(fd, F_SETFD, status | FD_CLOEXEC);
      if (status < 0)
         Perror("Error getting/setting socket FD_CLOEXEC flags");
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T20:01:55.853

Joseph Quinsey 给出了很好的回答。`haveInput`我对该功能有意见。想知道 select 返回您未包含在集合中的 fd 的可能性有多大。恕我直言，这将是一个主要的操作系统错误。`select`如果我为函数编写单元测试，而不是在普通应用程序中，这就是我要检查的事情。

```
if (!(status = select(fd + 1, &fds, 0, 0, &tv)))
   return FALSE;
else if (status > 0 && FD_ISSET(fd, &fds))
   return TRUE;
else if (status > 0)
   FatalError("I am confused"); // <--- fd unknown to function 
```

我的其他评论与 EINTR 的处理有关。理论上，如果一直返回 EINTR，你可能会陷入无限循环`select`，因为这个错误会让循环重新开始。鉴于非常短的超时 (0.01)，它似乎不太可能发生。但是，我认为处理此问题的适当方法是将错误返回给调用者（`flushSocketBeforeClose`）。`haveInput`只要超时没有过期，调用者就可以继续调用，并声明其他错误失败。

补充 #1

`flushSocketBeforeClose``read`在返回错误的情况下不会快速退出。它将一直循环，直到超时到期。您不能依靠`select`内部`haveInput`来预测所有错误。`read`有自己的错误（例如：）`EIO`。

```
 while (haveInput(fd, 0.01)) 
        if (!read(fd, discard, sizeof discard)) <-- -1 does not end loop
           return TRUE; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T16:16:19.240

在我看来，这听起来像是您的 Linux 发行版中的一个错误。

[GNU C 库文档](http://www.gnu.org/software/libc/manual/html_node/Closing-a-Socket.html)说：

> 当你使用完一个套接字后，你可以简单地关闭它的文件描述符`close`

没有关于清除任何错误标志或等待数据被刷新或任何类似的事情。

你的代码很好；您的操作系统有错误。

# operators - 符号 :=: 是什么意思（冒号等于冒号）

> ID：12730478
> 
> 赞同：4
> 
> 时间：2012-10-04T15:17:41.890
> 
> 标签：operators, clarion, colon-equals

我`:=:`在一些 Clarion 代码中找到了这个符号，但我似乎无法弄清楚它到底是做什么的。该代码是多年前由以前的开发人员编写的，所以我不能问他。我也无法`"colon equals colon"`在 Google 中找到任何结果。

这是代码示例，其中`bufSlcdpaDtl`是文件对象：

```
lCCRecord Like(bufSlcdpaDtl),Pre(lCCRecord)

! ...other stuff...

lCCRecord :=: bufSlcdpaDtl 
```

我想知道它是否类似于[`::=`Python](https://stackoverflow.com/questions/9196066/what-does-a-double-colon-followed-by-an-equals-sign-mean-in-programming-do)或[赋值运算符`:=`](https://stackoverflow.com/questions/5344694/what-does-do)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:36:06.553

在第 561 页的[语言参考手册中，这称为深度赋值运算符。](http://www.softvelocity.com/clarion/pdf/languagereferencemanual.pdf)语法是目标：=：源。Destination 可以是 GROUP、RECORD、QUEUE ds 或数组的标签。源可以是相同的加上数字、字符串 const、变量、过程或表达式。它将执行从一个 ds 到另一个的多个单独的组件变量分配。更多信息可以在该文档以及 clarion 的明显主页中找到：http: [//www.softvelocity.com/](http://www.softvelocity.com/)

深度赋值运算符的一个很好的例子：

```
Group1 GROUP
    S    SHORT
    L    LONG
END

Group2 GROUP
    L    SHORT
    S    REAL
    T    LONG
END

ArrayField SHORT,DIM(1000)

CODE

Group2 :=: Group1   ! Is equivalent to: 
                    !     Group2.S = Group1.S
                    !     Group2.L = Group1.L
                    ! and performs all necessary data conversion 

ArrayField :=: 7    ! Is equivalent to: 
                    !     LOOP I# = 1 to 1000
                    !         ArrayField[I#] = 7
                    !     END 
```

# ipad - iPad应用程序中框架的最大宽度是多少？

> ID：12730479
> 
> 赞同：1
> 
> 时间：2012-10-04T15:17:43.210
> 
> 标签：ipad, ios5, ios4, ios-simulator

我的应用程序（如日历视图），我应该设置所有视图加载，所以应该设置每年 12 个网格视图，但是 iPad（3）在构建 13 个网格视图后让我担心记忆，它应该导致它是一个高数据，所以我搜索另一个方式，我发现一些东西可能是无限的 & StreetScroller 但是当我尝试它时，数据应该是修复的（例如：无法处理明年改变数据加载的位置）是正确的还是我错过了。起来，有一种方法可以使用它，我不知道它？？？请帮我找到解决方案？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:29:07.787

据我了解，您正在实现日历类型的视图，并且您会遇到大量数据的内存问题。

在回答这个问题的标题时，iOS 应用程序中的框架（我假设您的意思是 UIView）没有最大宽度。**但是**，确保正确管理内存很重要。例如，我可以有一个 749202 像素宽的视图，并包含详细的图表/文本/图像/等...如果我在第一次加载时完整填写此视图，应用程序会崩溃；它会使用太多的内存。

为了确保不会发生这种情况，我需要优化我的内存使用。例如，我知道 iPad 纵向的最大宽度为 768 pts，横向为 1024 pts（可通过视图窗口的宽度和高度发现）。因此，我只会在（或即将）在视图中时创建/渲染我的数据。这意味着我一次只需要渲染总宽度的 0.1%，这在内存方面更易于管理。

至于你的具体情况，描述很模糊，也没有任何代码，所以这是我能提供的最好的信息。关于 StreetScroller 示例（如果我记得这是 UIScrollView 的 WWDC 示例项目），我不知道您到底遇到了什么问题。

# visual-studio - TypeScript / Visual Studio 2012 / 编译参数

> ID：12730490
> 
> 赞同：4
> 
> 时间：2012-10-04T15:18:25.387
> 
> 标签：visual-studio, typescript

当从 Visual Studio 2012 执行 TypeScript Compiler 时，我需要生成 Source Maps。在 Sublime Text 2 中，我只需向构建脚本添加一个额外的参数。我迷失在 VS 2012 中。 Build 部分似乎没有将构建参数添加到构建过程的部分。

命令开关是“-sourcemap”。

因此： tsc -sourcemap file.ts

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T19:29:57.983

Mads Kristensen 的 Visual Studio Web Essentials 扩展在 1.3 版中增加了对自动生成源映射的支持。您需要在 Tools -> Options for Web Essentials 中启用它。[http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

Visual Studio 的免费 Express 版本不支持扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T15:32:13.487

还没有用于编辑 TypeScript 构建标志的 VS 2012 UI，但您可以通过编辑项目文件并将`-sourcemap`标志添加到该构建步骤来获得所需的内容。

```
<Target Name="BeforeBuild">
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; -sourcemap @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:30:36.977

按照这个 StackOverflow 答案的指南进行操作。将 --module amd 替换为 --sourcemap。

[Visual Studio TypeScript 选项](https://stackoverflow.com/questions/12710691/visual-studio-typescript-options)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-15T17:41:13.073

在 0.9.5 中，您可以使用以下内容：上传项目并在属性组和以下标签中：

```
<TypeScriptSourceMap>true</TypeScriptSourceMap> 
```

做这份工作。

# asp.net-mvc - LINQ 和 Nhibernate：使用模型属性创建表达式

> ID：12730491
> 
> 赞同：2
> 
> 时间：2012-10-04T15:18:26.500
> 
> 标签：asp.net-mvc, linq, nhibernate

我开始使用 LINQ 和 NHibernate，你能帮我了解一下吗：

我需要将一个 lambda 语句传递给 nhibernate .QueryOver()，它是基于我模型上的一个属性的条件：

```
if (model.PropertyA != String.Empty) {
    var searchResults = nhibSession.QueryOver<type>(x => 
                                             x.propA == model.PropertyA)
                                   .List();
} 
```

有没有更好的方法来使用 C# 表达式而不是 lambda 语句来做到这一点？如何使用 model.PropertyA 创建表达式？我使用 Expression.Property() 还是 Expression.Field()？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:23:59.637

> 如何使用 model.PropertyA 创建表达式？

我怀疑你应该使用[`Expression.Constant`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.constant.aspx)- 即使它不像正常意义上的常量“感觉”，但*对于该表达式*来说它是常量，因为模型不是表达式输入的一部分。

```
Expression foo = Expression.Constant(model.PropertyA); 
```

# php - MySQL ORDER BY 另一个表中用户的总行数

> ID：12730493
> 
> 赞同：0
> 
> 时间：2012-10-04T15:18:29.660
> 
> 标签：php, html, mysql, sql

假设，我想显示一个用户列表，按他们发送的最多消息数排序。

我有 2 张桌子：`Users`和`Messages`

我有 10 个用户

用户 A 发送了 20 条消息（在 Messages 表中有 20 行）

```
SELECT * FROM messages WHERE user='A'

User B sent 17 msgs    
User C sent 19    
User D sent 13 
```

等等。

我想要一个查询，该查询将按用户发送的总消息的顺序列出用户。喜欢：

```
1\. A (20 msgs)
2\. C (19 msgs)
3\. B (17 msgs)
4\. D (13 msgs) 
```

我努力尝试，但找不到任何查询来执行此操作。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:19:45.290

```
SELECT user, COUNT(*) FROM messages GROUP BY user ORDER BY count(*) DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:26:01.053

您可以使用`alias`:

```
SELECT user, COUNT(1) as cnt
FROM Messages 
GROUP BY user 
ORDER BY cnt DESC; 
```

或`position`：

```
SELECT user, COUNT(1) as cnt
FROM Messages 
GROUP BY user 
ORDER BY 2 DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:22:58.277

如果要打印名称加入用户表，

```
select user_name, count(*) from users inner join messages m on users.userid=m.messageid group by userid order by count(*) desc; 
```

# php - 教义 2 findBy* 返回对象

> ID：12730498
> 
> 赞同：4
> 
> 时间：2012-10-04T15:18:39.973
> 
> 标签：php, doctrine, doctrine-orm

是否可以更改`findBy*`方法以返回带有实体而不是数组的对象（我的自定义）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-11-27T09:03:35.737

使用 findOneBy 而不是 findBy。findOneBy 作为对象返回。

[http://www.doctrine-project.org/api/orm/2.2/class-Doctrine.ORM.EntityRepository.html](http://www.doctrine-project.org/api/orm/2.2/class-Doctrine.ORM.EntityRepository.html)

```
$obj = $this
    ->getDoctrine()
    ->getRepository("VendorXXXBundle:EntityName")
    ->findOneBy(array $criteria) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T12:47:34.550

这是我肮脏，低技术的方法。

您的 findBy* 在这里：

```
$entities = $em->getRepository($entclass)->findBy($entFilter, array('id' => 'DESC')); 
```

我在这里的单线转换：

```
$entitiesCollection= new \Doctrine\Common\Collections\ArrayCollection($entities); 
```

然后我确认我可以使用那些方便的 ArrayCollection 方法，如 last()、count()、contains() 等。

```
var_dump($entitiesCollection->count(), $entitiesCollection); print \strftime('%c') . __FILE__ . __LINE__ . __FUNCTION__; die; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T01:02:09.863

在实体存储库中编写自定义函数可能会更好。

# batch-file - 获取输出到 Windows 批处理文件中的文本文件，该文件远程告诉机器安排碎片整理

> ID：12730500
> 
> 赞同：3
> 
> 时间：2012-10-04T15:18:41.797
> 
> 标签：batch-file

我目前正在编写一个批处理文件（第一次这样做）以远程调用我们网络中的机器（所有嵌入式 XP）并安排在晚上 11:00（23:00）进行碎片整理。

当然，事情并没有按计划进行，这是可以理解的。但是，我想获取通常在命令提示符下提供的日志记录信息，例如“磁盘已 -% 碎片整理”或错误等。我当前进行调用的行的阶段是：

```
@FOR /F "Tokens=1" %%a IN (%List%) DO at \\%%a 23:00 defrag C: /A > C:\...\log.txt 
```

注意：C:\ 和 \defraglog.txt 之间的省略号实际上输入了完整的路径名。对于上下文，%List% 是 IP 地址列表。

但是，碎片整理甚至从未启动。根据我正在测试的远程计算机，命令如下所示：

```
defrag C: /A and C:\...\log.txt 
```

当我查看计划任务时。

现在，当我简单地使用：

```
@FOR /F "Tokens=1" %%a IN (%List%) DO at \\%%a 23:00 defrag C: 
```

我确实在远程机器上安排在晚上 11:00 进行碎片整理，所以我假设问题出在我重定向的方式上。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:25:24.937

我会尝试添加引号：

```
@FOR /F "Tokens=1" %%a IN (%List%) DO at \\%%a 23:00 defrag C: /A > %APPDATA%\log.txt 
```

如果这不起作用，请在包含以下内容的网络共享上创建一个批处理文件 defragXP.cmd：

```
@echo off
defrag C: /A > C:\...\log.txt 
```

然后安排批处理：

```
@FOR /F "Tokens=1" %%a IN (%List%) DO at \\%%a 23:00 \\server\batches\defragXP.cmd 
```

# haskell - 我可以加速这个 Haskell 算法吗？

> ID：12730503
> 
> 赞同：23
> 
> 时间：2012-10-04T15:18:46.783
> 
> 标签：haskell

我有这个 haskell 文件，用`ghc -O2`(ghc 7.4.1) 编译，在我的机器上需要 1.65 秒

```
import Data.Bits
main = do
    print $ length $ filter (\i -> i .&. (shift 1 (i `mod` 4)) /= 0) [0..123456789] 
```

使用 (gcc 4.6.3) 编译的 C 语言中的相同算法`gcc -O2`在 0.18 秒内运行。

```
#include <stdio.h>
void main() {
    int count = 0;
    const int max = 123456789;
    int i;
    for (i = 0; i < max; ++i)
        if ((i & (1 << i % 4)) != 0)
            ++count;
    printf("count: %d\n", count);
} 
```

**更新** 我认为这可能是`Data.Bits`速度慢的东西，但令人惊讶的是，如果我取消变速并直接做一个直行`mod`，它实际上运行*速度更慢*，为 5.6 秒！？！

```
import Data.Bits
main = do
    print $ length $ filter (\i -> (i `mod` 4) /= 0) [0..123456789] 
```

而等效的 C 在 0.16 秒时运行稍快：

```
#include <stdio.h>
void main() {
    int count = 0;
    const int max = 123456789;
    int i;
    for (i = 0; i < max; ++i)
        if ((i % 4) != 0)
            ++count;
    printf("count: %d\n", count);
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-04T18:17:04.547

这两段代码做了非常不同的事情。

```
import Data.Bits
main = do
    print $ length $ filter (\i -> i .&. (shift 1 (i `mod` 4)) /= 0) [0..123456789] 
```

创建一个 123456790 的列表**`Integer`**（懒惰地），取每个模 4 的余数（首先检查 是否`Integer`小到足以包装原始机器整数，然后在除法之后进行符号检查，因为`mod`只返回非负结果 -虽然在 ghc-7.6.1 中，有一个 primop，所以它不像以前`mod`那样使用刹车），将`Integer`1 向左移动适当的位数，这涉及到“大”`Integer`的转换和对 GMP 的调用，按位和 with `i`- 又一次调用 GMP - 并检查结果是否为 0，这会导致再次调用 GMP 或转换为小整数，不确定 GHC 在这里做了什么。然后，如果结果不为零，则创建一个新的列表单元格，其中`Integer`被放入，并被 消耗掉`length`。已经完成了**很多**工作，其中大部分工作由于未指定的数字类型默认为`Integer`.

C 代码

```
#include <stdio.h>
int main(void) {
    int count = 0;
    const int max = 123456789;
    int i;
    for (i = 0; i < max; ++i)
        if ((i & (1 << i % 4)) != 0)
            ++count;
    printf("count: %d\n", count);
    return 0;
} 
```

（我冒昧地修复了 的返回类型`main`），做得少得多。它需要 a **`int`**，将其与另一个比较，如果更小，则将第一个`int`与 3 ^((1))相比较，将`int`1 向左移动适当的位数，将其与第一个相比较`int`，如果非零增加另一个`int`，然后增加第一个。这些都是机器操作，在原始机器类型上工作。

如果我们将该代码翻译成 Haskell，

```
module Main (main) where

import Data.Bits

maxNum :: Int
maxNum = 123456789

loop :: Int -> Int -> Int
loop acc i
    | i < maxNum = loop (if i .&. (1 `shiftL` (i .&. 3)) /= 0 then acc + 1 else acc) (i+1)
    | otherwise  = acc

main :: IO ()
main = print $ loop 0 0 
```

我们得到更接近的结果：

```
C, gcc -O3:
count: 30864196

real    0m0.180s
user    0m0.178s
sys     0m0.001s

Haskell, ghc -O2:
30864196

real    0m0.247s
user    0m0.243s
sys     0m0.003s

Haskell, ghc -O2 -fllvm:
30864196

real    0m0.144s
user    0m0.140s
sys     0m0.003s 
```

GHC 的本机代码生成器并不是一个特别好的循环优化器，因此在这里使用 llvm 后端会产生很大的不同，但即使是本机代码生成器也不会做得太差。

好的，我已经完成了用按位和手动替换模数计算的二次幂模数的优化，GHC 的本机代码生成器（还没有）这样做，所以使用 ```rem `4`` instead of`.&。3`，本机代码生成器生成的代码需要（此处）运行 1.42 秒，但 llvm 后端会进行优化，并生成与手工优化相同的代码。

现在，让我们转向[gspr 的问题](https://stackoverflow.com/a/12731688/1011995)

> 虽然 LLVM 对原始代码没有产生巨大影响，但它确实对修改后的代码产生了影响（我很想知道为什么......）。

好吧，使用的原始代码~~`Integer`沙~~列表，llvm 不太清楚如何处理这些，它无法将该代码转换为循环。修改后的代码使用`Int`s 并且`vector`包将代码重写为循环，因此 llvm*确实*知道如何很好地优化它，这表明了。

^((1))假设一台普通的二进制计算机。这种优化是由普通 C 编译器完成的，即使没有任何优化标志，除非在`div`指令比移位快的非常罕见的平台上。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-04T17:50:11.680

很少有东西能比带有严格累加器的手写循环更胜一筹：

```
{-# LANGUAGE BangPatterns #-}

import Data.Bits

f :: Int -> Int
f n = g 0 0
  where g !i !s | i <= n    = g (i+1) (if i .&. (unsafeShiftL 1 (i `rem` 4)) /= 0 then s+1 else s)
                | otherwise = s

main = print $ f 123456789 
```

除了到目前为止提到的技巧之外，这还替换`shift`为`unsafeShiftL`，它不检查其参数。

`-O2`用and编译`-fllvm`，这比我机器上的原始速度快 13 倍。

[**注意：**测试是否设置了位`i`可以`x`更清楚地写为`x `testBit` i`。这将产生与上述相同的组件。]

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-04T16:29:58.660

## Vector instead of list, fold instead of filter-and-length

Substituting the list for an [unboxed vector](http://hackage.haskell.org/packages/archive/vector/0.10/doc/html/Data-Vector-Unboxed.html) and the filter-and-length for a fold (i.e. incrementing a counter) improves the time significantly for me. Here's what I used:

```
import qualified Data.Vector.Unboxed as UV
import Data.Bits

foo :: Int
foo = UV.foldl (\s i -> if i .&. (shift 1 (i `rem` 4)) /= 0 then s+1 else s) 0 (UV.enumFromN 0 123456789)

main = print foo 
```

The original code (with two changes though: `rem` instead of `mod` as suggested in the comments, and adding an `Int` to the signature to avoid `Integer`) gave:

```
$ time ./orig 
30864196

real    0m2.159s
user    0m2.144s
sys     0m0.008s 
```

The modified code above gave:

```
$ time ./new 
30864196

real    0m1.450s
user    0m1.440s
sys     0m0.004s 
```

## LLVM

While LLVM didn't have a massive effect on the original code, it really did on the modified (I'd love to learn why...).

Original (LLVM):

```
$ time ./orig-llvm 
30864196

real    0m2.047s
user    0m2.036s
sys     0m0.008s 
```

Modified (LLVM):

```
$ time ./new-llvm 
30864196

real    0m0.233s
user    0m0.228s
sys     0m0.004s 
```

For comparison, OP's original C code comes in at 0m0.152s user on my system.

This is all GHC 7.4.1, GCC 4.6.3, and vector 0.9.1\. LLVM is either 2.9 or 3.0; I have both but can't seem to figure out which one GHC is actually using.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:54:49.917

尝试这个：

```
import Data.Bits
main = do
    print $ length $ filter (\i -> i .&. (shift 1 (i `rem` 4)) /= 0) [0..123456789::Int] 
```

没有`::Int`，类型默认为`::Integer`。 `rem`与`mod`正值相同，并且与`%`C中相同。`mod`另一方面，在负值上在数学上是正确的，但速度较慢。

*   `int`在 C 中是 32 位
*   `Int`在 Haskell 中是 32 位或 64 位宽，就像`long`在 C中一样
*   `Integer`是一个任意位整数，它没有最小值/最大值，它的内存大小取决于它的值（类似于字符串）。

# entity-framework - EF 4.4 冻结大表查询

> ID：12730506
> 
> 赞同：0
> 
> 时间：2012-10-04T15:18:55.860
> 
> 标签：entity-framework, entity-framework-4

我在带有 SQL 服务器的 ASP.NET MVC 项目上使用 EF 4.4，并且我的以下查询每次运行都会冻结。

`PSSAL`有 426.000 行和`PU_CustProduct`1600 行

有任何想法或提供查询吗？

```
 var model = (from p in dbCont.PU_CustProduct
         where !(from pt in dbCont.PSSAL
        where pt.PSSAL_DATE > d1
        && pt.PSSAL_PSPRP_ID == p.CustProductID
        select pt.PSSAL_PSPRP_ID).Contains(p.CustProductID)

     && p.IsActive == true
     && (!p.IsSleepMode == true)
     && p.ProductType == intId
     && p.CustomerID != null
     && p.IsSychSuspend != true

select new WarningViewModel
{
    PrpName = p.LicenceName,
    CrmID = p.CustomerID.ToString(),
    PsprpId = p.CustProductID.ToString(),
}).Distinct().OrderBy(o => o.PrpName).ToList(); 
```

# java - cerr (c++) 如何在 Stdout (Java) 中出现？

> ID：12730518
> 
> 赞同：6
> 
> 时间：2012-10-04T15:19:15.313
> 
> 标签：java, c++, java-native-interface

我有一个 Java 应用程序，它通过 JNI 调用一个用 C++ 编写的 DLL，然后这个 DLL 动态加载另一个 DLL。在某些情况下，在 Java 部分的 Stdout-Stream 中的某些计算机上，以某种方式写入 C++ 中的 cerr 的消息。无论是 C++ 部分还是 Java 部分，都没有任何标准流（cerr、cout、Stdout、Sterr 等）的显式重定向。

这怎么可能发生？如何确保 C++ 层的 cerr-stream 最终出现在 Java 层的 Stderr-stream 中？

JVM 在所有情况下都是一样的，

JRE 版本：6.0_27-b07，Java VM：Java HotSpot(TM) Client VM（20.2-b06 混合模式 windows-x86）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:40:51.003

要直接回答您的问题，如果 std::cerr 共享相同的描述符，它们只能显示在 System.out 中。

如果它真的发生在某些计算机上而不是其他计算机上，我怀疑默认 System.out 和 System.err 的 Java 实现存在差异。您没有指出相同的 Java 安装，只是不同的计算机。Java 不保证其默认的输出流实现。

现在，由于每一侧的缓冲和文件描述符彼此不协调，所以只存在两种可能性：

1) 您可以访问 DLL 源并且可以更改所有 I/O 以利用您传入的 System.out/err Java 流。

2）你没有。那时，即使您显然通过合作冲洗成功了，除了实验证据表明您的 hack 似乎有效之外，您也无法证明其正确性。很有可能实验不会发现缓冲区完全满、空或共享相同文件描述符的极端情况。

希望您能够选择＃1。

# ios - 检查是否从 JavaScript 安装 iOS 应用程序

> ID：12730520
> 
> 赞同：0
> 
> 时间：2012-10-04T15:19:21.010
> 
> 标签：ios, installation

我的要求是通过 JavaScript 检查 iOS 应用程序是否安装在 iOS 设备上。

有没有办法检查这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:02:23.463

如果您要检查的应用程序具有自定义 URL 方案，则可以执行此操作。

这个答案甚至提供了一个javascript函数： [https ://stackoverflow.com/a/7886755/1691231](https://stackoverflow.com/a/7886755/1691231)

以下是流行应用程序的自定义 URL 方案列表：[http ://wiki.akosma.com/IPhone_URL_Schemes#Registering_your_own_URL_schemes](http://wiki.akosma.com/IPhone_URL_Schemes#Registering_your_own_URL_schemes)

如果您是应用程序的开发人员，您可以通过以下方式实现自定义 URL 方案：http: [//mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-29T03:50:00.207

只需执行此脚本： ideviceinstaller -u "udid" -l 将列出您手机中的所有 bundlesID，然后将其与您的应用程序“bundleId”进行比较，如果已安装匹配的应用程序

# powershell - 在 powershell 脚本中需要帮助。

> ID：12730522
> 
> 赞同：1
> 
> 时间：2012-10-04T15:19:26.533
> 
> 标签：powershell, sharepoint-2010

我有名为 Test 的 sharepoint 2010 顶级站点。在测试中有三个子站点，分别名为 test1、test2、test3。在顶级站点（测试）中有三个自定义组名称是：test1group、test2group 和 test3group。

使用 powershell 脚本，我想将组和权限导出到各自的子站点。例如，如果我们要导出 test1 子站点中的组和权限，那么应该只继承 test1group，而不是 test2group 和 test3group.. 并且在为 test2 子站点执行组导出时类似，应该只继承 test2group...而不是 test1group 和 test2group ....等等（对于 test3 子站点）..

使用以下脚本我试图执行此操作：

```
function AddGroupToSite($url, $groupName, $permLevel)
{
$web = Get-SPWeb $url
#Break permissions inheritance and copy the groups from parent site into this site     (recommended)

 $web.BreakRoleInheritance($true)
 $web.Update()
#Creating a new group:
$web.SiteGroups.Add($groupName, $web.Site.Owner, $web.Site.Owner, "New Group from   powershell 4")
 $newGroup = $web.SiteGroups[$groupName]

#Create role assignment:
$newGroupAssign = New-Object Microsoft.SharePoint.SPRoleAssignment($newGroup)

#Assign a specific role
#The possible enumeration values are: None, Guest, Reader, Contributor, WebDesigner, Administrator
$newGroupAssign.RoleDefinitionBindings.Add($web.RoleDefinitions.GetByType($permLevel))
$web.RoleAssignments.Add($newGroupAssign)

#Update web
$web.Update()
$web.Dispose()
} 
```

但是每次它从顶级站点继承所有组（这是默认行为）....我们可以自定义powershell脚本以便我们可以实现上述功能..任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:39:22.167

当您中断继承时，它会创建最初继承的副本。

我没有方便的 Sharepoint 命令，但你应该能够做类似的事情

```
function Remove-SPGroup ($url, $groupName)
{
  $web = Get-SPWeb $url
  $web.SiteGroups.Remove($GroupName)
  $web.Update()
  $web.dispose()
} 
```

删除最初继承的组。

所以你可以把它添加到你现有的脚本中，并有类似的东西

```
function AddGroupToSite($url, $groupName, $permLevel)
{
$web = Get-SPWeb $url
#Break permissions inheritance and copy the groups from parent site into this site     (recommended)

 $web.BreakRoleInheritance($true)
 $web.Update()
#Creating a new group:
$web.SiteGroups.Add($groupName, $web.Site.Owner, $web.Site.Owner, "New Group from   powershell 4")
 $newGroup = $web.SiteGroups[$groupName]

 foreach ($ExistingGroup in $web.SiteGroups)
 {
   if ($ExistingGroup.name -notlike $groupname)
   {
     $web.SiteGroups.Remove($ExistingGroup.name)
    }
  }

#Create role assignment:
$newGroupAssign = New-Object Microsoft.SharePoint.SPRoleAssignment($newGroup)

#Assign a specific role
#The possible enumeration values are: None, Guest, Reader, Contributor, WebDesigner, Administrator
$newGroupAssign.RoleDefinitionBindings.Add($web.RoleDefinitions.GetByType($permLevel))
$web.RoleAssignments.Add($newGroupAssign)

#Update web
$web.Update()
$web.Dispose()
} 
```

# web-services - JBoss 7.1.1 Web 服务编程 JAAS 身份验证

> ID：12730523
> 
> 赞同：3
> 
> 时间：2012-10-04T15:19:40.730
> 
> 标签：web-services, authentication, jboss, jboss7.x, jaas

我有一个简单的 POJO 作为映射到的 web 服务，可以说 /public/authenticate ：

```
 WebService
 @SOAPBinding(style = SOAPBinding.Style.DOCUMENT)
 public class AuthWS{

   @WebMethod
   public boolean doAuthenticate(String securityToken) {
    ....
   }
} 
```

此 Web 服务不需要身份验证，也不是受保护的资源。

我确实有其他私有网络服务映射到路径：/private/ws/*;

目前，我使用具有数据库登录模块设置的安全域。它工作正常，但用户首先需要通过基于向 /j_security_check 发出发布请求的 Web 表单进行身份验证。只有经过此步骤，用户才能使用其他私有 Web 服务。

我想在客户端调用此 doAuthenticate 方法后以编程方式执行身份验证。以便客户端能够调用其他 /private/ws/* webservice 方法。

我将输入我想要实现的目标：

```
@WebService
@SOAPBinding(style = SOAPBinding.Style.DOCUMENT)
public class AuthWS{

@WebMethod
public boolean doAuthenticate(String securityToken) {
      SomeSecurityManager manager= SomeSecurityManager.getDefaultManager()
      Map<String,Object> map = new HashMap<String, Object>();
      map.put("MY_CUSTOM_SECURITY_TOKEN",securityToken);
      manager.doLogin(map);
    // after webservice method returns, client should now be able to invoke other private webservice
    // this means that the manager should associate with this session an authenticated user.
    // in order that authorization to work.
  }
} 
```

还有我的 CustomLoginModule ：

```
class CustomLogModule implements LoginModule {

  ...
   public void initialize(Subject subject, CallbackHandler callbackHandler, Map<String, ?> sharedState, Map<String, ?> options) {
       // store what's needed
   } 

  public boolean login(){ 
    // get securityToken send from the SomeSecurityManager and validate it.
    // get user information from that token and store into Subject object.
  } 
} 
```

在我的实现 JAAS LoginModule 的 CustomLoginModule 中，使用自定义逻辑检查 securityToken，例如验证它是否使用公钥正确签名。该 securityToken 包含有关主体的信息。

如果您需要更多详细信息，请随时询问。

谢谢。

**已编辑**

1.) 与 module.xml 一起创建 custom-login-module.jar

```
<module xmlns="urn:jboss:module:1.1" name="custom.login.module">
    <resources>
        <resource-root path="custom-login-module.jar"/>
    </resources>

    <dependencies>
        <module name="org.picketbox"/>
        <module name="javax.api"/>
        <module name="org.slf4j"/>
    </dependencies>
</module> 
```

2.) 将 custom-login-module.jar 和 module.xml 添加到 jboss-as-7.1.1.Final\modules\custom\login\module

3.) custom-login-module.jar 包含： public class CustomCallbackHandler implements CallbackHandler {

```
 private static final Logger LOGGER = LoggerFactory.getLogger(CustomCallbackHandler.class);
    private String token;

    public CustomCallbackHandler(String token) {
        this.token= token;
    }

    public String getToken() {
        return token;
    }

    @Override
    public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (Callback callback : callbacks) {
            if (callback instanceof TokenCallback) {
                ((TokenCallback) callback).setToken(token);
            }
        }
    }
} 
```

* * *

```
public class TokenCallback implements Callback {
 private static final Logger LOGGER = LoggerFactory.getLogger(TokenCallback.class);
 private String token;

 public TokenCallback() {
 }

 public String getToken() {
     return token;
 }

 public void setToken(String token) {
     LOGGER.info("Setting token = " + token);
     this.token = token;
 }
} 
```

* * *

```
public class CustomLoginModule extends AbstractServerLoginModule {
 private static final Logger LOGGER = LoggerFactory.getLogger(CustomLoginModule.class);

 @Override
 public boolean login() throws LoginException {
     LOGGER.info("Doing login()");
     boolean login = super.login();
     super.loginOk = true;
     return login;
 }

 @Override
 protected Principal getIdentity() {
     return new UserPrincipal("some user");
 }

 @Override
 protected Group[] getRoleSets() throws LoginException {
     return new Group[]{new MyGroup()}; // that and has name 'dummy'
 }
} 
```

这些只是虚拟实现。

我的 Web 应用程序是从 .war 存档中部署的。它包含以下内容：jboss-web.xml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE jboss-web
    PUBLIC -//JBoss//DTD Web Application 2.3V2//EN
    http://www.jboss.org/j2ee/dtd/jboss-web_3_2.dtd>
 <jboss-web>
    <security-domain>custom-auth</security-domain>
 </jboss-web> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     id="WebApp_ID" version="2.5">
    <display-name>WebApp</display-name>
    <session-config>
        <session-timeout>120</session-timeout>
    </session-config>
    <security-constraint>
        <web-resource-collection>
           <web-resource-name>All resources</web-resource-name>
           <description>Protects all private resources</description>
           <url-pattern>/private/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>dummy</role-name>
        </auth-constraint>
        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>

    <security-role>
        <role-name>dummy</role-name>
    </security-role>

    <servlet>
        <servlet-name>Private</servlet-name>
        <servlet-class>com.company.private.PrivateWs</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Private</servlet-name>
        <url-pattern>/private/PrivateWs</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AuthWS</servlet-name>
        <servlet-class>com.company.auth.AuthWS</servlet-class>
    </servlet>
     <servlet-mapping>
        <servlet-name>AuthWS</servlet-name>
        <url-pattern>/AuthWS</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

```
@WebService
@SOAPBinding(style = SOAPBinding.Style.DOCUMENT)
public class AuthWS{
private static final Logger LOGGER = LoggerFactory.getLogger(AuthWS.class);

@WebMethod
public boolean doAuthenticate(String token) {
    tryProgrammaticLogin(token);
    return true;
}

private void tryProgrammaticLogin(String token) {
    LoginContext loginContext = null;
    try {
        loginContext = new LoginContext("custom-auth", new CustomCallbackHandler(token));
        loginContext.login();
    } catch (LoginException e) {
        LOGGER.info("Some problem occured when trying to custom login.", e);
    }
}
} 
```

从我的 ws 客户端调用 doAuthenticate 有效，但问题是在尝试 ProgrammaticLogin 后发生异常。而且客户无法访问 PrivateWS。

```
17:33:40,901 INFO  [com.mycompany.AuthWS] (http--0.0.0.0-8080-1) Some problem occured when trying to custom login.: javax.security.auth.login.LoginException: Login Failure: all modules ignored
      at javax.security.auth.login.LoginContext.invoke(LoginContext.java:921) [rt.jar:1.6.0_26]
      at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186) [rt.jar:1.6.0_26]
      at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683) [rt.jar:1.6.0_26]
      at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.6.0_26]
      at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680) [rt.jar:1.6.0_26]
      at javax.security.auth.login.LoginContext.login(LoginContext.java:579) [rt.jar:1.6.0_26] 
```

jboss 配置目录中的standalone.xml 包含：

```
<security-domain name="custom-auth">
    <authentication>
         <login-module code="com.mycompany.CustomLoginModule" flag="required" module="custom.login.module"/>
    </authentication>
</security-domain> 
```

请告诉我通过创建新的 LoginContext 对象进行身份验证的方式是否正确。我不明白为什么会出现这个问题。

# python - 使用从函数 A 到函数 B 的 var

> ID：12730524
> 
> 赞同：1
> 
> 时间：2012-10-04T15:19:41.593
> 
> 标签：python, python-2.7

在这个示例代码中，我想使用`function db_properties`函数上的变量`connect_and_query`。为了实现这一点，我选择了`return`. 因此，使用该策略，代码可以完美运行。但是，在这个例子中，db.properties 文件只有 4 个变量。也就是说，如果属性文件有 20 多个变量，我应该继续使用`return`吗？还是有一种最优雅/更清洁/正确的方法来做到这一点？

```
import psycopg2
import sys
from ConfigParser import SafeConfigParser

class Main:

    def db_properties(self):
        cfgFile='c:\test\db.properties'
        parser = SafeConfigParser()
        parser.read(cfgFile)
        dbHost = parser.get('database','db_host')
        dbName = parser.get('database','db_name')
        dbUser = parser.get('database','db_login')
        dbPass = parser.get('database','db_pass')
        return dbHost,dbName,dbUser,dbPass

    def connect_and_query(self):
        try:
            con = None

            dbHost=self.db_properties()[0]
            dbName=self.db_properties()[1]
            dbUser=self.db_properties()[2]
            dbPass=self.db_properties()[3]

            con = None
            qry=("select star from galaxy")
            con = psycopg2.connect(host=dbHost,database=dbName, user=dbUser,
                                   password=dbPass)
            cur = con.cursor()
            cur.execute(qry)
            data = cur.fetchall()
            for result in data:
                qryResult   = result[0]
                print "the test result is : " +qryResult
        except psycopg2.DatabaseError, e:
                print 'Error %s' % e
                sys.exit(1)
        finally:
            if con:
                con.close()

operation=Main()
operation.connect_and_query() 
```

我正在使用 python 2.7 问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:26:12.540

如果有很多变量，或者如果您想轻松更改正在读取的变量，请返回字典。

```
def db_properties(self, *variables):
    cfgFile='c:\test\db.properties'
    parser = SafeConfigParser()
    parser.read(cfgFile)
    return {
        variable: parser.get('database', variable) for variable in variables
    }

def connect_and_query(self):
    try:
        con = None
        config = self.db_properties(
            'db_host',
            'db_name',
            'db_login',
            'db_pass',
        )
        #or you can use:
        #   variables = ['db_host','db_name','db_login','db_pass','db_whatever','db_whatever2',...]
        #   config = self.db_properties(*variables)
        #now you can use any variable like: config['db_host']
        # ---rest of the function here--- 
```

编辑：我重构了代码，以便您可以指定要在调用函数本身中加载的变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T15:24:58.857

您当然不想调用`db_properties()`4 次；只需调用一次并存储结果。

返回字典而不是元组也几乎肯定更好，因为调用者需要知道方法按顺序返回的内容，而不是仅仅通过名称访问值。随着传递的值数量的增加，这变得更加难以维护。

例如：

```
class Main:
    def db_properties(self):
        cfgFile='c:\test\db.properties'
        parser = SafeConfigParser()
        parser.read(cfgFile)
        configDict= dict()
        configDict['dbHost'] = parser.get('database','db_host')
        configDict['dbName'] = parser.get('database','db_name')
        configDict['dbUser'] = parser.get('database','db_login')
        configDict['dbPass'] = parser.get('database','db_pass')
        return configDict

    def connect_and_query(self):
        try:
            con = None
            conf = self.db_properties()

            con = None
            qry=("select star from galaxy")
            con = psycopg2.connect(host=conf['dbHost'],database=conf['dbName'],
                                   user=conf['dbUser'],
                                   password=conf['dbPass']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:56:17.577

注意：未经测试

您可以更改您的 db_properties 以返回一个字典：

```
from functools import partial

# call as db_properties('db_host', 'db_name'...)
def db_properties(self, *args):
    parser = SafeConfigParser()
    parser.read('config file')
    getter = partial(parser.get, 'database')
    return dict(zip(args, map(getter, args))) 
```

但除此之外，最好将解析器保留为实例的属性，并提供一种方便的方法......

类任何（对象）：def **init**（self，*args，**kwargs）：#blah blah blah cfgFile='c:\test\db.properties' self._parser = SafeConfigParser() self._parser.read(cfgFile) @property def db_config(self, key): return self._parser.get('database', key)

然后使用`con = psycopg2.connect(host=self.db_config('db_host')...)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T16:43:33.617

我建议返回一个命名元组：

```
from collections import namedtuple

# in db_properties()
return namedtuple("dbconfig", "host name user password")(
             parser.get('database','db_host'),
             parser.get('database','db_name'),
             parser.get('database','db_login'),
             parser.get('database','db_pass'),
       ) 
```

现在您有了一个可以通过索引或属性访问的对象。

```
config = self.db_properties()
print config[0]     # db_host
print config.host   # same 
```

# jquery-ui - 使用 jQuery 的自动完成功能转换返回的数据

> ID：12730525
> 
> 赞同：0
> 
> 时间：2012-10-04T15:19:42.793
> 
> 标签：jquery-ui, jquery, jquery-ui-autocomplete

我正在尝试使用[Autocomplete 插件](http://docs.jquery.com/UI/Autocomplete)生成一个类似于[IMDB](http://www.imdb.com/)的搜索框，我希望它：

*   在选项中显示的不仅仅是文本。
*   在选择选项时充当链接（因为每个选项都是唯一的记录）。
*   也就是说，如果用户选择，他们按下按钮并在他们的输入上执行搜索。

文档说它可以使用 3 种类型的数据源：

> 数据源可以是：
> 
> 一个带有本地数据的数组
> 一个字符串，指定一个 URL
> 一个回调

我可以让自动完成功能与第二个选项一起使用，但是无法转换返回的数据，它只需要 JSON 并将其直接放在下拉列表中。这意味着源 url 只能返回格式的数据`{label: "blah", value: "blurg"}`。

如果我可以注入一个转换函数，那么我可以让 url 返回我喜欢的任何 JSON，该函数会将数据更改为自动完成所期望的格式，但也可以按照我的意愿进行格式化，并且所有这些都不会更改 url 提供的响应（我不会从那里返回 HTML，只返回 JSON）。

例如，url 可以返回：

```
{ label:"Grosse Point Blank", id: 3, img:"/imgs/gpb.png",...} 
```

并且一个转换函数可以将它变成这样的东西：

```
{ label:"<a href='/films/3/grosse-point-blank'><img src='/imgs/gpb.png' />Grosse Point Blank</a>", value="grosse-point-blank"} 
```

我试过使用选项 3，一个回调，一个`getJSON`电话，但我无法让它工作。我找到的最接近我可能需要的代码在[这里，但它具有当前文档中未列出的 Autocomplete 选项](https://stackoverflow.com/questions/7296411/pass-value-returned-from-jqueryui-autocomplete-to-another-function)，我不明白如何使用响应对象。

如果有人知道在 AJAX 请求中使用回调方法的示例，或者我如何注入转换代码的函数，我将不胜感激。

非常感谢任何见解或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:33:46.440

您可以使用`_renderItem()`自动完成的私有方法来格式化返回数据。它看起来像这样：

```
$("#element").autocomplete({...}).data( "autocomplete" )._renderItem = function( ul, item ) {
    //...
}; 
```

您可以在此处查看方法定义[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L520](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L520)

我使用的代码示例：

```
$("#element").autocomplete({...})
.data("autocomplete")._renderItem = function( ul, item ) {
    return $( "<li></li>" ) // create the list item
        .data( "item.autocomplete", item ) // save the data to the DOM
        .append( "<a>"+ item.label + "</a>" ) // add the HTML
        .appendTo( ul ); // append to the UL
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:41:01.517

这是使用回调方法时的简要结构。

```
 source: function( request, response ) {
    $.ajax({
      ...
      success: function( data ) {
        // do transformation of data here
        response(data);          
      }
    });
  } 
```

引用自您的链接，[http://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)

> 第三种变体，回调，提供了最大的灵活性，可用于将任何数据源连接到自动完成。回调有两个参数：
> 
> 一个请求对象，具有一个名为“term”的属性，它指的是文本输入中当前的值。例如，当用户在城市字段中输入“new yo”时，自动完成项将等于“new yo”。
> 
> 响应回调，它期望单个参数包含要向用户建议的数据。此数据应根据提供的术语进行过滤，并且可以采用上述任何简单本地数据的格式（字符串数组或具有标签/值/两个属性的对象数组）。在请求期间提供自定义源回调以处理错误时，这一点很重要。即使遇到错误，您也必须始终调用响应回调。这确保了小部件始终具有正确的状态。

# java - maven-assembly-plugin 在这种情况下有效吗

> ID：12730527
> 
> 赞同：0
> 
> 时间：2012-10-04T15:19:47.880
> 
> 标签：java, maven-2, junit, maven-assembly-plugin

我有以下项目结构：

1.  项目“parent-project”没有任何源文件，并且有子项目“junit-wrapper”、“child1-test”和“child2-test”。
2.  子项目“junit-wrapper”只有在 src/main/java 中的 java 源代码，这基本上是为了包装层次结构“父项目”下的所有依赖项和二进制文件而创建的。
3.  子项目“child1-test”和“child2-test”没有源文件，只包含子项目“child1-env”和“child2-env”。
4.  子项目“child1-env”和“child2-env”在 src/test/java 中只有 junit。

我想通过构建父 pom.xml 来构建一个超级 jar（在 junit-wrapper 内）

我希望通过使用 maven-assembly-plugin 可以做到这一点，但不知道如何在 pom.xml 中配置它。为了确保实现这一点，我的 pom.xml 或 assembly.xml（使用插件）条目应该是什么？

请建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:40:42.377

要创建一个包含测试类的 jar，最好的解决方案是像这样使用 maven-jar-plugin：

```
<project>
  <build>
    <plugins>
     <plugin>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-jar-plugin</artifactId>
       <version>2.2</version>
       <executions>
         <execution>
           <goals>
             <goal>test-jar</goal>
           </goals>
         </execution>
       </executions>
     </plugin>
    </plugins>
  </build>
</project> 
```

在其他模块中，您可以通过以下依赖项使用 test-jar：

```
<project>
  ...
  <dependencies>
    <dependency>
      <groupId>com.myco.app</groupId>
      <artifactId>foo</artifactId>
      <version>1.0-SNAPSHOT</version>
      <type>test-jar</type>
      <scope>test</scope>
    </dependency>
  </dependencies>
  ...
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:15:20.700

当您将此配置包含在以下 pom 文件中时，您将获得您的“uber-jar” `junit-wrapper`：

```
<build>
  <plugins>
    <plugin>
      <artifactId>maven-assembly-plugin</artifactId>
      <version>2.2.1</version>
      <executions>
        <execution>
          <id>make-assembly</id>
          <phase>package</phase>
          <goals>
            <goal>single</goal>
          </goals>
          <configuration>
            <descriptorRefs>
              <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
          </configuration>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

程序集描述符 (assembly.xml) 不是必需的，因为该`jar-with-dependencies`描述符已在 maven-assembly-plugin 中可用。请注意，您不应在`package`阶段之前执行程序集插件。否则，您的 Maven 模块的代码将不会被打包到您的程序集中。

# jsf - jetty 5 自定义类加载器可以在战争中排除特定的 jar 文件吗？

> ID：12730533
> 
> 赞同：0
> 
> 时间：2012-10-04T15:20:23.910
> 
> 标签：jsf, jetty, classloader

我有一个大型代码库，目前在嵌入式 Jetty 5.1.14 服务器（Servlet 2.4）上的 JSF 1.1 上运行。尽管我预计需要 servlet 2.5，但我已经设法让 JSF 2.0.9 应用程序在此版本的 Jetty 上运行，并且我将 EL 2.1.2 和 JSF jar 添加到 WEB-INF/lib。这适用于不包括 JSF 1.1 的码头配置。

生产环境由单个服务器实例上的大量 war 和 jar 文件组成。

JSF 1.1 当前位于服务器 ext/lib 文件夹中，在单个 war 文件中，我想将 JSF 2 jar 包含在 WEB-INF/lib 中。这是不可能的，因为服务器 JSF 版本将首先加载并导致类路径污染。

但是，是否可以使用自定义类加载器仅在一个 war 文件中消除 JSF 1.1 jar 加载？该文档似乎迎合了将路径添加到类路径而不是排除事物的情况。我不清楚它是在整个服务器的上下文中加载还是只是在战争中加载。

更多信息：另一个潜在的解决方案是简单地升级到 Jetty 8 和 JSF 2.1+。除了让管理层相信这是个好主意之外，我们使用旧的 WebMethods7 版本，它有一个图形布局工具，可以生成一些由组件应用程序框架翻译的 XML，它使用 JSF API 来生成内容（所以只有一个非常很少的 JSP）。这只是一个看看它是否有效的例子，如果因为需要继续支持这个 WebMethods“代码”而没有完全重新考虑。

这里的主要目标是最终运行最新的软件，尽管不一定一步到位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:25:15.150

Jetty5 在这一点上已经非常老了，我建议对 jetty8 进行更新，或者等待几个月并跳转到我们目前正在发布里程碑的 jetty9。仅从那时起更新 jvm 的更改就足以更新您的码头容器。

我不知道 jetty5 是否支持这种方法，但在 jetty6 中，我们可以在 webapp 上下文中修改通过系统和服务器类暴露给上下文的类。如果存在这些钩子，那么您应该能够调整该特定上下文以不暴露 ext/lib 中 jar 中的类。

# c# - ASHX 图像处理程序随机显示/隐藏图像

> ID：12730535
> 
> 赞同：0
> 
> 时间：2012-10-04T15:20:26.157
> 
> 标签：c#, asp.net, httphandler, ashx

我构建了提取存储在 SQL Server 中的图像的 ASHX 图像处理程序。如果我单独显示图像，它会很好地工作。但是如果我尝试在网格中显示它们并同时显示多张图片，则某些图片不会随机显示。

当我尝试刷新页面时，一些图像消失了，而另一些又出现了。它完全随机渲染图像。请参阅下图的 4 个屏幕截图。

![在此处输入图像描述](../Images/65c331e561c50616390a5fa441053e81.png)

以下是我的处理程序代码。我试图改变 IsReusable True & False，但没有运气。你能告诉我如何解决这个问题吗？谢谢。

```
public class Photo : IHttpHandler
{

    #region IHttpHandler Members

    public bool IsReusable
    {            
        get { return true; }
    }

    public void ProcessRequest(HttpContext context)
    {
        HttpRequest request = context.Request;

        if (!string.IsNullOrEmpty(request.QueryString["id"]) && !string.IsNullOrEmpty(request.QueryString["type"]))
        {
            //this hash table contain the SP parameter
            DAMSSQL db = DAMSSQL.GetInstance("DBName");

            SqlCommand cmd = new SqlCommand("dbo.GetImage");
            cmd.Parameters.Add("@ID", SqlDbType.Int).Value = int.Parse(request.QueryString["id"]);
            cmd.Parameters.Add("@Type", SqlDbType.Int).Value = int.Parse(request.QueryString["type"]);

            object obj = db.ExecuteScalar(cmd);

            if (obj != null)
            {
                byte[] imageArray = (byte[])obj;

                //checking byte[] 
                if (imageArray != null && imageArray.Length > 0)
                {   
                    context.Response.ContentType = "image/jpeg";
                    context.Response.BinaryWrite(imageArray);
                }
            }
            else
            {   
                context.Response.StatusCode = 404;
                context.Response.StatusDescription = "The requested image is not found in the system.";
                context.Response.End();

            }
        }
        else
        {
            context.Response.StatusCode = 500;
            context.Response.StatusDescription = "The incoming parameters are not correct.";
            context.Response.End();                
        }
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:25:52.003

我在这里问了一个类似的问题：

[使用 HttpHandler 流式传输数据库图像](https://stackoverflow.com/questions/1507572/streaming-databased-images-using-httphandler)

我最终改用了 DataReader，它解决了我的图像问题，而不是全部渲染。

# c# - 我的应用程序 .config 文件在哪里？

> ID：12730538
> 
> 赞同：2
> 
> 时间：2012-10-04T15:20:34.007
> 
> 标签：c#, winforms, configuration-files

所有，我有一个大型应用程序。此应用程序使用 .config 文件来处理其各种设置。这在开发中很好，.config 文件可以在各自的`\bin`文件夹（Release 和 Debug）中找到并愉快地工作。我已经编写了一个 NSIS 安装程序，我现在正在运行该应用程序；它运行良好，保存设置，恢复设置并且通常是一个很好的 LAD。

但是，“MyApp.exe.config”*不是*设置写入的位置（我已经检查甚至删除了它，以便可以重新创建它）。它也不在`...Users\Me\AppData\Roaming\MyApp`？

我的应用程序配置文件在哪里？

感谢你的宝贵时间。

*编辑。我已经打印出来了`System.Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)`，这指向`Roaming`上面的 AppData 目录。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:27:49.680

.net 的配置系统从多个位置获取其设置。

一般配置来自：

1.  第一个位置是 .net 框架附带的 machine.config 文件。
2.  下一个位置是应用程序的配置文件。

接下来设置 API 从（使用默认提供程序）获取值：

1.  编译应用程序时的硬编码默认值。
2.  应用程序配置文件。
3.  用户的设置文件。

如果应用程序的配置文件不存在，它将不会被自动创建（这样做是没有意义的，因为它只包含应用程序已经知道的默认值）。

但是，保存设置将照常创建一个新的用户设置文件。

# jquery - 为 jQuery 视差调整大小

> ID：12730543
> 
> 赞同：2
> 
> 时间：2012-10-04T15:20:46.680
> 
> 标签：jquery, resize, parallax, jquery-resizable

尝试使用 jQuery 视差创建一个在缩小或放大窗口时可以正确调整大小的站点。当您在下面的 Flash 站点上拖动角/调整大小时，我的目标是相同类型的功能。

[http://www.intersectionpartners.com/](http://www.intersectionpartners.com/)

关于如何用 jQuery 做到这一点的任何建议？

# php - Symfony 2 嵌入式表单集合多对多

> ID：12730544
> 
> 赞同：9
> 
> 时间：2012-10-04T15:20:53.837
> 
> 标签：php, symfony, doctrine

我有 2 个实体 - 用户和组。它们具有多对多关系，组用于存储用户的角色。

我正在尝试通过添加集合来制作用户编辑表单，我希望能够通过从下拉列表中选择来添加新角色（仅限于数据库中已有的内容）

用户类型.php：

```
class UserType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('username')
            ->add('email')
            ->add('forename')
            ->add('surname')
            ->add('isActive')
            ->add('joinDate', 'date', array('input' => 'datetime', 'format' => 'dd-MM-yyyy'))
            ->add('lastActive', 'date', array('input' => 'datetime', 'format' => 'dd-MM-yyyy'))
            ->add('groups', 'collection', array(
                    'type' => new GroupType(),
                    'allow_add' => true,
                    ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Sfox\CoreBundle\Entity\User'
        ));
    }
} 
```

和 GroupType.php：

```
class GroupType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('role');
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
                "data_class" => 'Sfox\CoreBundle\Entity\Group'
                ));
    }
} 
```

这会在基本文本框中显示表单中的角色，但如果我在表单中添加一个条目，它会将一个新条目级联到 Groups 中，如果我要编辑一个条目，它会更改底层 Group 数据。

我尝试制作 GroupSelectType.php：

```
class GroupSelectType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('role', 'entity', array('class'=>'SfoxCoreBundle:Group', 'property'=>'name'));
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
                "data_class" => 'Sfox\CoreBundle\Entity\Group'
                ));
    }
} 
```

将该字段添加为“实体”类型，这将显示正确的选择框（但使用默认值）我似乎无法将其绑定到 UserType 表单！

我想要表单做的就是修改用户实体中的底层“组”ArrayCollection。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T10:11:21.857

好吧，我为其他遇到类似问题的人制定了解决方案......

我必须创建一个自定义表单类型并将其声明为服务，以便可以传入实体管理器。然后我需要制作一个 dataTransformer 将我的组对象更改为表单的整数

自定义组选择类型：

```
class GroupSelectType extends AbstractType

{
    /**
     * @var ObjectManager
     */
    private $om;

    private $choices;

    /**
     * @param ObjectManager $om
     */
    public function __construct(ObjectManager $om)
    {
        $this->om = $om;

        // Build our choices array from the database
        $groups = $om->getRepository('SfoxCoreBundle:Group')->findAll();
        foreach ($groups as $group)
        {
            // choices[key] = label
            $this->choices[$group->getId()] = $group->getName() . " [". $group->getRole() ."]";
        }
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $transformer = new GroupToNumberTransformer($this->om);
        $builder->addModelTransformer($transformer);
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
                "choices" => $this->choices,
                ));
    }

    public function getParent()
    {
        return 'choice';
    }

    public function getName()
    {
        return 'group_select';
    }
} 
```

在构造函数中，我获取所有可用组并将它们放入“选择”数组中，该数组作为选项传递给选择框。

您还会注意到我正在使用自定义数据转换器，这是为了将 groupId（用于呈现表单）更改为 Group 实体。我也将 GroupSelectType 设为服务并传入 [@doctrine.orm.entity_manager]

services.yml（捆绑配置）：

```
services:
    sfox_core.type.group_select:
        class: Sfox\CoreBundle\Form\Type\GroupSelectType
        arguments: [@doctrine.orm.entity_manager]
        tags:
          - { name: form.type, alias: group_select } 
```

GroupToNumberTransformer.php

```
class GroupToNumberTransformer implements DataTransformerInterface
{
    /**
     * @var ObjectManager
     */
    private $om;

    /**
     * @param ObjectManager $om
     */
    public function __construct(ObjectManager $om)
    {
        $this->om = $om;
    }

    /**
     * Transforms an object (group) to a string (number).
     *
     * @param  Group|null $group
     * @return string
     */
    public function transform($group)
    {
        if (null === $group) {
            return "";
        }

        return $group->getId();
    }

    /**
     * Transforms a string (number) to an object (group).
     *
     * @param  string $number
     * @return Group|null
     * @throws TransformationFailedException if object (group) is not found.
     */
    public function reverseTransform($number)
    {
        if (!$number) {
            return null;
        }

        $group = $this->om
        ->getRepository('SfoxCoreBundle:Group')
        ->findOneBy(array('id' => $number))
        ;

        if (null === $group) {
            throw new TransformationFailedException(sprintf(
                    'Group with ID "%s" does not exist!',
                    $number
            ));
        }

        return $group;
    }
} 
```

还有我修改后的 UserType.php - 请注意，我现在正在使用我的自定义表单类型“group_select”，因为它作为服务运行：

```
class UserType extends AbstractType
{
    private $entityManager;

    public function __construct($entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $transformer = new GroupToNumberTransformer($this->entityManager);

        $builder
            ->add('username')
            ->add('email')
            ->add('forename')
            ->add('surname')
            ->add('isActive')
            ->add('joinDate', 'date', array('input' => 'datetime', 'format' => 'dd-MM-yyyy'))
            ->add('lastActive', 'date', array('input' => 'datetime', 'format' => 'dd-MM-yyyy'));
        $builder
            ->add(
                $builder->create('groups', 'collection', array(
                    'type' => 'group_select',
                    'allow_add' => true,
                    'options' => array(
                            'multiple' => false,
                            'expanded' => false,
                            )
                    ))
        );
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Sfox\CoreBundle\Entity\User'
        ));
    }

    public function getName()
    {
        return 'sfox_corebundle_usertype';
    }
} 
```

# java - 更新休眠关联

> ID：12730554
> 
> 赞同：3
> 
> 时间：2012-10-04T15:21:15.083
> 
> 标签：java, spring, hibernate

我正在创建 RESTful Web 服务。允许客户注册`Company`，然后在需要时进行更新。`Company`有`Address`关联。当用户请求`Company`更新时，它会发送`Company`对象 id 并`Company`涉及`Address`没有`Address`es id 的对象。要更新`Company`对象，我使用休眠`merge`方法。它正确设置了新`Company`数据，但它创建了新`Address`行而不是更新它。

我怎么解决这个问题？

我可以`Address`通过`company.getAddress()`获取它的 id 并合并新来获取，`Address`但是当我这样做时，所有`Company`数据都被获取，我认为这不好。

```
 public class Company implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinColumn(name = "address_id")
    private Address address;
} 
```

**更新**

我还可以编写自定义查询

```
UPDATE address SET city='NEW YORK' FROM companies WHERE address.id = companies.address_id 
```

但我希望它成为默认操作。如果您看到任何没有 id 的关联，请使用上述查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:15:53.437

我不太清楚您为什么使用合并而不是直接更新请求的地址对象。

例如。（伪代码）

```
Company c = (Company)query.findbyid(id)
Address a = c.getAddress()

a.setField1(field1);
a.setField2(field2);
a.setField3(field3);

pm.commit(c); 
```

您需要检查两件事是否已设置为使用合并技术： 1\. 地址关联是延迟加载的，这意味着在您请求之前它为空。会不会是您将 Company 对象与 PersistenceManager 分离，然后尝试合并？

1.  另外，我假设您的地址也是一个实体。它会生成 id（主键）。确保不要搞砸了。如果它重新生成一个新的 id，你将得到另一行。

# playframework-1.x - 在数据库中保存播放框架会话？

> ID：12730565
> 
> 赞同：0
> 
> 时间：2012-10-04T15:22:20.047
> 
> 标签：playframework-1.x

在游戏框架网站上，他们说：

> 会话是键/值的散列，已签名但未加密。这意味着只要您的秘密是安全的，第三方就不可能伪造会话。

真的安全吗？

是否可以将会话存储在 mysql 或 postgresql 等数据库中？
换句话说，我需要这样做吗？

如果是，是否有可以从中获得帮助的最佳实践指南？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:38:40.173

在游戏中，会话是客户端的 cookie。值未加密，这意味着使用 firebug 之类的工具，您可以在客户端看到会话的内容。所以你不能把你的会话敏感数据，比如未加密的密码。

会话已签署。这意味着无法在客户端修改 cookie 并将其发送到服务器，因为 play 会检查内容是否与签名同步。

由于会话是客户端对象，我不明白您为什么要将它们存储在数据库中。通常的用例是将用户的标识符放入会话中，并使用此标识符从数据库中检索所有其他需要的数据

# ios - iOS - 如何将信息从 VIEW 传递到控制器？

> ID：12730570
> 
> 赞同：2
> 
> 时间：2012-10-04T15:22:30.453
> 
> 标签：ios, cocoa-touch, cs193p

总的来说，我对编程相当陌生，并且一直在关注 iTunesU 上的 CS193p 视频。我目前正在执行任务 3，并且无法从发送到视图控制器的视图中获取一些信息。

我相信我已经正确设置了整个委托，所以问题实际上是如何让我的 View Controller 看到一些信息（例如`self.bounds.size.width`），这是只有 View 才有的属性。这会涉及使用`self.dataSource`吗？如果是这样，我可以通过什么方式传递这些信息？我的最终目标是让 View Controller 对 View 的属性进行一些转换，然后将其发送回 View`drawRect`以便绘制。

谢谢！！

** 根据要求编辑，我在下面发布了我的 drawRect 代码的一部分

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGFloat scale = 32;

    CGPoint midPoint;
    midPoint.x = self.bounds.origin.x + self.bounds.size.width/2;
    midPoint.y = self.bounds.origin.y + self.bounds.size.height/2;

    // ---- finding the y starting point

    float totalXsInWidth;
    totalXsInWidth = self.bounds.size.width / scale;

    float leftMostX = totalXsInWidth / -2;
    float graphResultY = sin(leftMostX); // ** in theory, I want "leftMostX" to be modifed by the equation entered (in the CONTROLLER)
    NSLog(@"The leftMostX is %f", leftMostX);

    [self.dataSource passingVariable:leftMostX]; //** Here I pass the variable from drawRect to get modifyed in the CONTROLLER

    float graphResultY1;

    graphResultY1 = 5; //this is a test, I want to see if the controller actually effect a change
    graphResultY1 = [self.dataSource calcResult:self]; //this should now be a different number than 5 or 0 (the init value)

    NSLog(@"From graphingview, the result is %f", graphResultY1); //** unfortunately = 0... :( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:36:18.927

阅读了 CS193p 作业 3（[对于任何感兴趣的人，可以在此处以 PDF 格式获得](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/assignments/Assignment%203_2.pdf)），看起来您被要求为您的 UIView 子类创建一个协议，并拥有该协议的委托（视图的管理视图控制器）提供用于绘图的数据。

如果您正确设置了协议，则视图的`drawRect`方法应该通过协议的方法向视图控制器询问数据，例如：

```
DataObject *data = [self.delegate getData];
// It might be [self.dataSource getData]; in your case 
```

那应该调用`getData`您应该写入视图控制器的委托方法（我为此编写了一个方法签名，适应您的协议使用的方法。此外，如果需要，此代码不考虑相关的内存管理） ：

```
- (DataObject *)getData
{
    // Get data from the model, and return
    DataObject *dataObjectToReturn = [Model getRelevantData];

    return dataObjectToReturn;
} 
```

视图`drawRect`现在应该有相关的实例，`DataObject`并且可以继续使用该数据来绘制它需要绘制的内容。

* * *

以下是我的原始答案，与上面的具体问题无关，但确实显示了另一种视图/视图控制器交互的方法。（此方法不适用于上述问题，因为绘图所需的数据不应该归视图本身所有。）

要从该视图的控制器访问该视图的属性，您可以使用`self.view`. 因此，要获得视图的宽度，就像在您的示例中一样，您将使用：

```
CGFloat viewWidth = self.view.bounds.size.width; 
```

您还可以设置控制器的视图，但请注意，对于您的示例，您必须为框架提供整个 CGRect，因为不允许直接操作宽度：

```
// This gets a reference to the view's frame, then uses values from it to create a new
// CGRect that is 10.0 points wider, and sets the frame of the view to the new frame

CGRect viewFrame = self.view.frame;
self.view.frame = CGRectMake(viewFrame.origin.x, viewFrame.origin.y, viewFrame.size.width + 10.0f, viewFrame.size.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:38:34.920

我对分配不熟悉，但如果您在视图控制器中使用视图，则可以像这样访问该视图属性：

```
 SomeView *someView = [SomeView new];

 CGFloat width = someView.bounds.size.width; 
```

# iphone - 我想在对象集合中找到一个 int

> ID：12730572
> 
> 赞同：0
> 
> 时间：2012-10-04T15:22:32.617
> 
> 标签：iphone, objective-c, ios

我有两个对象：

*   “矩阵”具有两个整数作为属性：“somma”和“tono”

和

*   “sello”具有一个 NSArray 和一个 UIImage 作为属性。并有一个 init 方法用 13 个不同的矩阵对象初始化数组。

在我的视图控制器中，我有 20 个不同的“sello”对象的实例变量。以及一个包含这 20 个对象的可变数组。

所以在这 20 个对象中总共有 260 个“矩阵对象”。

如果我有另一个实例变量是 int 并且等于 34（例如），我如何在这 260 个“somma”之间找到 34 并获得位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:46:36.810

像这样的东西？

```
NSNumber * num = [NSNumber numberWithInt:34];
for(Sello * sello in selloArray)
{
    if([sello.matrices valueForKey:@"somma"] containsObject:num])
        return YES;
    if([sello.matrices valueForKey:@"tono"] containsObject:num])
        return YES;
}
return NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:16:18.407

如果数组的名称是指sello对象数组中sello对象的属性名称，我认为下面的代码会起作用。这就是我在视图控制器代码中输入的内容（matrixArray 是 sello 对象中的矩阵对象数组）：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.sello1 = [[Sello alloc] init];
    self.sello2 = [[Sello alloc] init];
    self.sello3 = [[Sello alloc] init];
    self.sello4 = [[Sello alloc] init];
    self.sello5 = [[Sello alloc] init];
    self.sello6 = [[Sello alloc] init];
    self.sello7 = [[Sello alloc] init];
    self.sello8 = [[Sello alloc] init];
    self.sello9 = [[Sello alloc] init];
    self.sello10 = [[Sello alloc] init];
    self.arr = [NSArray arrayWithObjects:self.sello1,self.sello2,self.sello3,self.sello4,self.sello5,self.sello6,self.sello7,self.sello8,self.sello9,self.sello10,nil];
}

-(void)viewDidAppear:(BOOL)animated {
    NSNumber *num = @15;
    for (Sello *aSello in self.arr) {
        for (Matrix *aMatrix in aSello.matrixArray) {
            if (aMatrix.somma == num.intValue) {
               NSInteger indx = [self.arr indexOfObjectPassingTest:^BOOL(Sello *obj, NSUInteger idx, BOOL *stop) {
                   return obj == aSello;
               }];
                NSLog(@"%@", [NSString stringWithFormat:@"sello%d",indx+1]);
            }
        }
    }
} 
```

# php - 将闪存连接到 MYSQL

> ID：12730576
> 
> 赞同：2
> 
> 时间：2012-10-04T15:22:37.653
> 
> 标签：php, mysql, flash

我有一个 mysql 数据库，它全部设置在我的 comp 上的 wamp 服务器上，我编写了一个简单的 PHP 文件，该文件将返回一个 XML，其中包含数据库中的所有数据以闪存。但是，每当我运行我的代码来加载这个 XML 闪存时，都会告诉我它不会与启用 Internet 的位置通信。我尝试过这样的跨域策略：

```
<?xml version="1.0"?>
 <cross-domain-policy>
 <allow-access-from domain="*" />
</cross-domain-policy> 
```

但这似乎也不起作用...对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:53:26.500

[尝试在Adob​​e 的全局设置面板](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)上将本地驱动器添加为受信任位置

![在此处输入图像描述](../Images/1790c64b8ee5274f459e557e74c32488.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:16:12.410

转到文件->发布设置并将“本地播放安全”更改为“仅访问网络”，看看是否可以解决您的问题。

# doctrine-orm - 我在哪里可以找到关于 Doctrine 2 设计的优秀文档？

> ID：12730577
> 
> 赞同：0
> 
> 时间：2012-10-04T15:22:38.520
> 
> 标签：doctrine-orm

我从大约 2007 年开始使用 Doctrine。我最近拿起了 Symfony2，其中包括 Doctrine 2，从我的角度来看，Doctrine 2 比 Doctrine 1 差得多。

似乎特别愚蠢的一件事是我必须做这样的事情才能检索某个记录：

```
$em->getRepository('VNNPressboxBundle:School')->find($id); 
```

在教义 1 中，我相信我会做这样的事情：

```
Doctrine::getTable('School')->find($id); 
```

**冗长不是困扰我的。**问题是任何我想对数据库做任何事情的地方，我都必须有一个`$em`可用的。这意味着我必须有很多这样的方法：

```
public function foo($em, $something, $somethingElse)
{
}

public function bar($em, $thing)
{
}

public function baz($whatever, $whateverElse)
{
} 
```

`$em`拖着这些实例到处乱跑感觉不对。它也与该方法的真正作用无关。此外，我必须记住，每次我调用一个方法时，“这个方法需要`$em`还是不需要？” 这完全是蹩脚的。我想知道我是否做错了，或者这只是他们希望你使用它的方式。肯定感觉不对。

不幸的是，我读过的 Doctrine 文档似乎重于实践而轻于理论。**我在哪里可以找到关于 Doctrine 2 背后的设计决策的一些好的文档**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:40:38.313

似乎如果你想了解 Doctrine 2，了解一点面向服务的架构和依赖注入是有帮助的。

# php - Use this php code to open a pdf in a new tab

> ID：12730581
> 
> 赞同：7
> 
> 时间：2012-10-04T15:22:53.870
> 
> 标签：php, magento, pdf

I have managed to use the below snippet of code, to open a pdf in a browser.Instead of opening in the same page, I would like it to open in a new browser tab.

I am not using an tag. This piece of code invokes a number of actions and at the end it is supposed to display the pdf. It works fine, but i would like it to open in a new tab.

Is this possible? and if so could you please explain to me how to do so.

Im using a Magento (EE 12.02) application and its on php 5.3.

```
$file = $pdf_file_path;
$filename = $file_name;

    header('Content-type: application/pdf');
    header('Content-Disposition: inline; filename="' . $filename . '"');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . filesize($file));
    header('Accept-Ranges: bytes');

    @readfile($file); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T15:26:03.047

You can't do that from that request.

But you can open the link in a new browser window by adding target="_blank" to your a tag, then browsers usually will use a new tab.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-08T23:54:12.977

You can open a new tab while opening your pdf document. Example: if the code that opens your pdf document is on a page called **pdfdocument.php**, that is some code like so

```
 $pdf = file_get_contents($PDFfilename);
    header('Content-Type: application/pdf');
    header('Cache-Control: public, must-revalidate, max-age=0'); // HTTP/1.1
    header('Pragma: public');
    header('Expires: Sat, 26 Jul 1997 05:00:00 GMT'); // Date in the past
    header('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT');
    header('Content-Length: '.strlen($pdf));
    header('Content-Disposition: inline; filename="'.basename($PDFfilename).'";');
    ob_clean(); 
    flush(); 
    echo $pdf; 
```

and you have a link to the page such as [http://www.example.com/pdfdocument.php](http://www.example.com/pdfdocument.php), you can display it in a new tab like so `<a href="http://www.example.com/pdfdocument.php" target="_blank"> click here to show pdf preview </a>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:26:35.360

to open it in other browser tab, you should do it in the html that reference it: `<a href="..." target="_blank">`Download pdf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:24:31.247

Just add exit() at the end:

```
$file = $pdf_file_path;
$filename = $file_name;

header('Content-type: application/pdf');
header('Content-Disposition: inline; filename="' . $filename . '"');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($file));
header('Accept-Ranges: bytes');

@readfile($file);

exit(); 
```

this should just trigger the download of the file.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T15:34:17.087

To open it in a new tab if you are using `<a>` tag you can append a target attribute like this:

`<a href="your_pdf_generator_link" target="_blank" > TEXT </a>`

If you have a button you can apply an inline javascript such as

`<input type="button" onclick="window.open('your_pdf_generator_link','_blank')" />`

Hope this helps..

# sql - 是什么导致这些看似不一致的查询结果？

> ID：12730582
> 
> 赞同：2
> 
> 时间：2012-10-04T15:22:56.547
> 
> 标签：sql, sql-server, compare, match, record

我有一个让我很困惑的问题。我有一半希望你们中的一个人指出我忽略的一些非常愚蠢的错误，但我真的只是没有看到它。

我有一张表格，我们的生产流程已经提供了大约一年的时间，我们刚刚从客户那里得到了一些疯狂的表格，我们正试图将这些表格与这些表格进行匹配。在以下查询中，`tableA`是我的表，`tableB`是我们刚刚导入的表。

基本问题是

```
select *
from tableA
where convert(nvarchar(30),accountNum) not in (
        select CisAC
        from tableB
    ) 
```

在我认为应该返回的时候没有返回任何记录。我认为它应该在 tableA 中找到 accountNum 与 tableB 中的 CisAC 字段匹配的任何记录。对？CisAC 是一个 nvarchar(30) 并且我们的 accountNum 字段是一个 bigint。

指出为什么我认为空返回集是错误的：

```
select * from tableA where convert(nvarchar(30),accountNum) = '336906210032' 
```

返回一条记录，但

```
select * from tableB where CisAC = '336906210032' 
```

才不是。

那么，什么给了？（感谢您的宝贵时间！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:33:10.270

我的怀疑是 tableB 中的空值导致`IN`失败

我会尝试

```
select * 
from tableA 
     left join tableB
     on convert(nvarchar(30),tableA.accountNum) = tableB.CisAC 
where tableB.CisAc is null 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T15:33:46.297

你的查询是正确的。它正在返回预期的结果。

有关 SQL Fiddle，请参见此处：[http ://sqlfiddle.com/#!6/dfb5d/1](http://sqlfiddle.com/#!6/dfb5d/1)

可能发生的情况是您拥有`tableB`的数据与`tableA`.

编辑：

正如@Andomar 回答的那样，如果`tableB`有一个空值，则查询将失败。看这里：

[http://sqlfiddle.com/#!6/05bb1/1](http://sqlfiddle.com/#!6/05bb1/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T15:42:56.513

这可能是典型的`not in`错误。如果表 B 包含任何`null`值，

```
where convert(nvarchar(30),accountNum) not in (
        select CisAC
        from tableB
    ) 
```

永远不会成功。你可以这样写：

```
where convert(nvarchar(30),accountNum) <> null and convert(nvarchar(30),accountNum) <> ... 
```

由于任何与 的比较都会`null`计算为`unknown`，因此该条件永远不会成立。

`join`用podiluska 的回答建议替换查询应该可以解决问题。

# c# - Icmp 协议问题

> ID：12730584
> 
> 赞同：0
> 
> 时间：2012-10-04T15:23:10.080
> 
> 标签：c#, networking

我目前正在试验 Icmp 协议，我想实现一个新的类`IcmpPacket`。我在 Wikipedia 上阅读了该协议，还在 MSDN 上找到了一篇关于使用 Icmp 进行 ping 的文章。由于两个网站之间存在一些差异，我有点困惑。

Wikipedia 将 Icmp 数据包的结构定义如下： 1 字节类型 1 字节代码 2 字节校验和 4 字节剩余头部（无论是什么）

在 MSDN 上有一个针对此类的示例`IcmpPacket`（该类的摘录）

```
public class IcmpPacket { 
    public byte Type;
    public byte SubCode;
    public UInt16 CheckSum;
    public UInt16 Identifier;
    public UInt16 SequenceNumber;
    public byte[] Data;
} 
```

前三个属性很清楚，但是`Identifier`和`SequenceNumber`（=> 标题的其余部分？）

我得到的另一个问题是，如果我想使用ping 服务器，`IcmpPacket`我真的需要`Identifier`,吗？（我的主人说最小的 IcmpPacket 可能是 28Bytes 大，所以如果取and ，我是否必须用 填充剩余的 20 Bytes ？）`SequenceNumber``Data``Identifier``SequenceNumber``Data`

PS：是否有一个网站可以很好地描述 Icmp 的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:14:44.207

> 标识符和序列号呢？

Identifier 和 SequenceNumber 是对您的实现有意义的值，用于将回显请求与相应的回显答复相匹配。RFC 792 提供了使用它们的建议...

```
 For example, the identifier might be used like a port in TCP or UDP to
  identify a session, and the sequence number might be incremented
  on each echo request sent.  The echoer returns these same values
  in the echo reply. 
```

> 如果我想使用 IcmpPacket 来 ping 服务器，我真的需要 Identifier、SequenceNumber 和 Data 吗？

标识符、序列号和数据字段必须存在于框架中...

> 我的主人说最小的 IcmpPacket 可能是 28Bytes 大，所以如果使用 Identifier 和 SequenceNumber，我是否必须用数据填充剩余的 20 Bytes？

如果他们谈论的是一个 28 字节的 IPv4 数据包，那么最小的数据包必须包括最小的 20 字节 IPv4 报头 + 8 字节的 ICMP 报头。

> 是否有一个网站可以很好地描述 Icmp 的结构？

您应该在线阅读[RFC 792](https://www.rfc-editor.org/rfc/rfc792#page-14) ...

# firefox - 权限对话框未在 Firefox v15 中重定向

> ID：12730588
> 
> 赞同：0
> 
> 时间：2012-10-04T15:23:31.710
> 
> 标签：firefox, facebook-authentication, http-redirect

我们只在 Firefox 中遇到了 Facebook 权限对话框的问题。问题是，重定向没有发生。除火狐外，所有其他浏览器都可以正常工作。

未重定向的页面显示一个蓝色的 fb 徽标，其副标题为“转到 facebook.com”。

此链接指向的网址是[https://www.facebook.com/dialog/permissions.request?app_id=287081321311509&display=page&next=https%3A%2F%2Fwww.astrogeography.com%2Ffb%2Ffb_callback&response_type=code&perms=email% 2Cuser_likes&fbconnect=1](https://www.facebook.com/dialog/permissions.request?app_id=287081321311509&display=page&next=https%3A%2F%2Fwww.astrogeography.com%2Ffb%2Ffb_callback&response_type=code&perms=email%2Cuser_likes&fbconnect=1)

但是没有自动重定向到这个页面。firebug 没有显示任何特定错误，只有一些不推荐使用的 js 警告，这些警告对重定向无害。

当我查看页面的源代码时，有一个超级奇怪的 a href onclick 正在重定向到自身？！（见截图）

有人知道可能是什么问题吗？所有其他浏览器显示相同的站点，但重定向对话框。

![在此处输入图像描述](../Images/c4f8254814d47bb01de3686441788346.png)

![在此处输入图像描述](../Images/3881e3e7c6c52864740e4f40601f9ec6.png)

# c++ - 如何在 Qtoolbar 中添加可伸缩间隔？

> ID：12730591
> 
> 赞同：23
> 
> 时间：2012-10-04T15:23:41.447
> 
> 标签：c++, qt, qt-creator

我希望我的一些工具栏操作出现在左边界和右边界。我 Gtk 我记得添加了一个可拉伸（可扩展）的分隔符。我如何在 Qt 中实现这一点？

我使用 Qt Creator，但我不怕编辑源代码，因此非常感谢任何一种解决方案。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-04T16:03:49.033

您可以使用具有自动扩展功能的空小部件，它的工作方式类似于您可以在 Qt Designer 中使用的分隔符：

```
tb = my_toolbar;

QWidget* empty = new QWidget();
empty->setSizePolicy(QSizePolicy::Expanding,QSizePolicy::Preferred);
tb->addWidget(empty);

tb->addWidget(otherWidget); 
```

# php - 构建数组时未初始化的字符串偏移量

> ID：12730593
> 
> 赞同：0
> 
> 时间：2012-10-04T15:23:44.347
> 
> 标签：php, multidimensional-array, foreach

我从下面介绍的方法中收到以下错误：

注意：未初始化的字符串偏移量：第 30 行 /path/to/file.php 中的 5 致命错误：第 30 行无法访问 path/to/file.php 中的空属性

```
private function parse($xml, $index = '') {
    echo count($xml->children()); //outputs 6
    $count = 0;
    foreach ($xml->children() as $key => $value) {

        $this->$key[$count] = array();
        $count++;

    }

} 
```

**任何想法为什么如果我以这种方式构建多维会导致错误？**

如果我将作业更改为：

```
$this->$key = array($count = > array()); 
```

这只是在每个循环中重新分配属性。谢谢丰富

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:28:19.040

您应该在填充之前尝试创建数组。IE`$this->key = array();`

也就是说，在遍历 XML 元素之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:33:31.607

想象一下你有一个字符串：

```
$string = 'abc`; 
```

进行子字符串访问（看起来像数组）将返回字符：

```
echo $string[2]; # c 
```

或者，当您超出索引时会出现错误：

```
echo $string[3]; # null + warning 
```

所以现在动态访问对象的成员`$this`：

```
$this->$string[2]; # access $this->c 
```

然而，这个几乎没有打破：

```
$this->$string[3]; # access $this->null (not possible) 
```

这会给你一个空属性的致命错误，一个没有名称的属性。

这解释了你的代码中发生了什么，你还没有告诉你要做什么，所以我希望这些信息能帮助你继续编写你的解析函数。

# c# - 是否可以指出用于泛型方法的类型应该是接口？

> ID：12730606
> 
> 赞同：6
> 
> 时间：2012-10-04T15:24:48.130
> 
> 标签：c#, generics, generic-programming

这是我的通用方法代码：

```
 public static IT Activate<IT>(string path)
  {
        //some code here....
  } 
```

我想设置通用 IT 必须只是一个接口。

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T15:27:31.460

不，C# 或一般的 .NET 泛型中没有这样的约束。您必须在执行时检查。

```
if (!typeof(IT).IsInterface)
{
    // Presumably throw an exception
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T15:28:14.873

不，您不能`IT`单独限制任何接口类型和接口。最接近的是`class`约束，它适用`to any class, interface, delegate, or array type.`- [http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:31:27.380

我能想到的最接近的事情是静态构造函数中的运行时检查。像这样：

```
static MyClass<IT>()
{
    if(!typeof(IT).IsInterface)
    {
        throw new WhateverException("Oi, only use interfaces.");
    }
} 
```

希望使用静态构造器意味着它会很快失败，因此开发人员会更快地发现错误。

此外，检查只会对每种类型的 IT 运行一次，而不是每个方法调用。所以不会受到性能影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T16:14:56.743

我刚刚对基本接口的使用进行了快速测试。这是可能的，但正如我所说，不确定这是否值得努力，或者即使这是一种好的做法。

```
public interface IBaseInterface
{
}

public interface IInterface1 : IBaseInterface
{
        //some code here.... 
}

public interface IInterface2
{
        //some code here.... 
}

public class Class1
{
    public void Test()
    {
        Activate<IInterface1>("myPath");
        //Activate<IInterface2>("myPath"); ==> doesn't compile
    }

    public static IT Activate<IT>(string path) where IT : IBaseInterface
    {
        //some code here.... 
    }
} 
```

# android - ListView 内的 EditText 不会保持焦点

> ID：12730610
> 
> 赞同：27
> 
> 时间：2012-10-04T15:25:12.193
> 
> 标签：android, listview, focus, android-edittext

我的`EditText`每一行里面都有一个`ListView`. 出于某种原因，当我点击 EditText 时，它会短暂获得焦点，但随后会立即失去焦点。

我已经尝试过这些事情：

```
listView.setItemsCanFocus(true);
editText.setFocusable(true); 
```

虽然`EditText`是（简要地）集中，但`Enter`关键说`Next`并且`auto-correct bar`存在。当它失去焦点时，软键盘保持向上，但`Enter`键变为`Return Arrow`，然后`auto-correct bar`消失。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-09-14T06:52:13.400

如果您希望列表项获得焦点，它非常简单：使列表视图不可获得焦点，并说它的焦点是`afterDescendants`让`EditText`s 和其他可焦点项获得焦点。

```
<ListView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:descendantFocusability="afterDescendants"
    android:focusable="false" /> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-04T15:33:12.277

`EditText`s 中`ListView`的 s 非常棘手。如果可能的话，我建议你像避免瘟疫一样避免它们。当我和他们打交道时，[这个答案](https://stackoverflow.com/a/2680077/642161)很有帮助。如果你只有几个项目，你总是可以只使用`ScrollView`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T01:12:52.757

我知道这个问题很老，但我今天也在与 EditText 和 ListView 斗争。我认为在焦点问题上浪费时间或更新数据集是最后的结果。

所以，我创建了一个 Activity 并动态添加了我需要的控件。在这个例子中，我添加了两个控件：一个 textview 和一个 edittext。

首先，我创建一个类作为控件的“容器”，然后我将控件放在 ScrollView 上。

layout.xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llMain"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ScrollView
        android:id="@+id/svMain"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/llForm"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

“容器”类：

```
import android.widget.EditText;

public class RespostasArray {

    private int pergunta;
    private int formulario;
    private int form_coord;
    private int coordenada;
    private int form_resposta;
    private String questao;
    private String resposta;
    private EditText respostaEdit;

    public RespostasArray() {
        respostaEdit = null;
    }

    public int getPergunta() {
        return pergunta;
    }

    public void setPergunta(int pergunta) {
        this.pergunta = pergunta;
    }

    public int getFormulario() {
        return formulario;
    }

    public void setFormulario(int formulario) {
        this.formulario = formulario;
    }

    public int getForm_coord() {
        return form_coord;
    }

    public void setForm_coord(int form_coord) {
        this.form_coord = form_coord;
    }

    public int getCoordenada() {
        return coordenada;
    }

    public void setCoordenada(int coordenada) {
        this.coordenada = coordenada;
    }

    public int getForm_resposta() {
        return form_resposta;
    }

    public void setForm_resposta(int form_resposta) {
        this.form_resposta = form_resposta;
    }

    public String getQuestao() {
        return questao;
    }

    public void setQuestao(String questao) {
        this.questao = questao;
    }

    public String getResposta() {
        return resposta;
    }

    public void setResposta(String resposta) {
        this.resposta = resposta;
    }

    public EditText getRespostaEdit() {
        return respostaEdit;
    }

    public void setRespostaEdit(EditText respostaEdit) {
        this.respostaEdit = respostaEdit;
    }

} 
```

所以，主要活动：

```
 import java.util.ArrayList;
    import java.util.List;

    import jv.android.getpoint.R;
    import jv.android.getpointlib.data.Formularios;
    import jv.android.getpointlib.data.GetPointDataHelper;
    import jv.android.getpointlib.data.Respostas;
    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.view.WindowManager.LayoutParams;
    import android.widget.EditText;
    import android.widget.LinearLayout;
    import android.widget.TextView;

    public class RespostasActivity extends Activity {

        private Intent intent;
        private ArrayList<RespostasArray> listItems = null;
        private GetPointDataHelper db = null;
        private int coordenada = -1;
        private int formulario = -1;
        private LinearLayout llRespostas;
        private TextView tvRespostasHeader;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.layout.xml);

            llRespostas = (LinearLayout)findViewById(R.id.llRespostas);
            tvHeader = (TextView)findViewById(R.id.tvHeader);

            listItems = new ArrayList<RespostasArray>();
            db = new GetPointDataHelper(this, false);

            intent = getIntent();

            if (intent != null)
            {
                Bundle params = intent.getExtras();

                if (params != null) {
                    coordenada = params.getInt("coordenada");
                    formulario = params.getInt("formulario");

                    tvHeader.setText("Some header");

// Load the fields I need from SQLite. Change it to your needs.
                    List<Respostas> respostas = db.selectAllRespostaDaCoordenada (coordenada, formulario);

                    if (respostas != null && respostas.size() > 0) {
                        for (int i = 0; i < respostas.size(); i++) {
                            TextView tv = new TextView(getApplicationContext());
                            tv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                            tv.setText(respostas.get(i).getQuestao().trim() + (respostas.get(i).getQuestao().trim().endsWith(":") ? "" : ":"));
                            llRespostas.addView(tv);

                            EditText et = new EditText(getApplicationContext());
                            et.setText(respostas.get(i).getResposta().trim());
                            et.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));                      
                            llRespostas.addView(et);

                            RespostasArray ra = new RespostasArray();
                            ra.setCoordenada(respostas.get(i).getCoordenada());
                            ra.setForm_coord(respostas.get(i).getForm_coord());
                            ra.setForm_resposta(respostas.get(i).getForm_resposta());
                            ra.setFormulario(respostas.get(i).getFormulario());
                            ra.setPergunta(respostas.get(i).getPergunta());
                            ra.setQuestao(respostas.get(i).getQuestao());
                            ra.setResposta(respostas.get(i).getResposta());
                            ra.setRespostaEdit(et);                     

                            listItems.add(ra);                      
                        }
                    }
                }
            }               
        }

        @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {    
            if (keyCode == KeyEvent.KEYCODE_BACK) {
                doProcessResult();          
            }    

            return super.onKeyDown(keyCode, event);
        }

        private void doProcessResult() {
            for (int i = 0; i < listItems.size(); i++) {
                if (listItems.get(i).getForm_resposta() == 0) {
                    db.insertResposta(listItems.get(i).getFormulario(), listItems.get(i).getForm_coord(), listItems.get(i).getPergunta(), listItems.get(i).getRespostaEdit().getText().toString());
                } else {
                    db.updateResposta(listItems.get(i).getForm_resposta(), listItems.get(i).getRespostaEdit().getText().toString());                
                }
            }
        }
    } 
```

我希望它可以帮助某人。

# jquery - iOS6 UIWebView 事件处理

> ID：12730612
> 
> 赞同：2
> 
> 时间：2012-10-04T15:25:17.457
> 
> 标签：jquery, events, uiwebview, hyperlink, ios6

我是 Stack Overflow 的新手，但对 Web 开发并不陌生（约 13 年）。我昨天在工作中遇到了一个错误，并决定是时候加入社区了。;) 我没有看到在哪里发布它也是我解决的一个错误，所以我将它作为一个问题发布。请随时添加您自己的评论和解决方案。我只是认为这是一个尽快发布的好消息，因为 iOS6 刚刚问世，你们中的一些人可能会对同样的问题感到恐慌。

问题出在我为 iPad 应用程序的扩展开发的 UIWebView 中。它的内容可通过应用内浏览器查看。好吧，我们注意到 iOS6 用户不再可以点击视频和照片库了。由于某种原因，我们在图像和 div 上的点击事件没有被触发。

解决方案：我在每个未触发的元素周围添加了空白链接标签，它解决了这个问题。

旁注：另外，如果您在通过应用内浏览器内容中的链接打开应用商店时遇到问题，只需通过右键单击应用从 iTunes 商店获取直接链接。

# php - 用户使用 PHP 连接登录连接到 MSSQL 数据库失败

> ID：12730615
> 
> 赞同：0
> 
> 时间：2012-10-04T15:25:24.373
> 
> 标签：php, sql-server

我正在开发一个简单的脚本，该脚本将使用 PHP 脚本登录到 MSSQL 数据库。我在两台服务器之间建立了连接，但不断收到此错误：

警告：mssql_connect() [function.mssql-connect]：消息：用户“$username”登录失败。（严重性 14）在 /directory/ 线上

我用来连接的代码很简单：

$var = mssql_connect('ip:port','$username','$password');

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:30:36.290

从变量中删除引号：

```
 $var = mssql_connect('ip:port',$username,$password); 
```

# asp.net-mvc - ASP.NET MVC 3 注销

> ID：12730623
> 
> 赞同：0
> 
> 时间：2012-10-04T15:26:01.053
> 
> 标签：asp.net-mvc

如果用户当前已登录，我想呈现注销按钮。

我想把按钮放在 _Layout.cshtml 页面中。

如何检查用户是否已登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:27:08.143

```
@if(Request.IsAuthenticated) {
    @Html.ActionLink("Your text goes here.", "LogOff", "YourControllerName", null, null)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:38:56.593

```
If you are using Form Authentication , try 

// Inside Controller

public ActionResult LogOff()
{
    FormsAuthentication.SignOut();
    return RedirectToAction("Index", "Home");
}

// Inside View (Layout Page) Razor Engine

@if(User.Identity.IsAuthenticated){

  @Html.ActionLink("Your text goes here.", "LogOff", "YourControllerName")

} 
```

# r - %op% 运算符是什么意思？例如“%in%”？

> ID：12730629
> 
> 赞同：46
> 
> 时间：2012-10-04T15:26:13.923
> 
> 标签：r, syntax, operators, r-faq

`%`我尝试进行这个简单的搜索，但在 R 中的百分比 ( ) 符号上找不到任何内容。

**以下代码中的含义是什么`%in%`？**

`time(x) %in% time(y)`其中`x`和`y`是矩阵。

**`%in%`**`%stuff%`由于找不到帮助文件，如何查找有关遵循该模式**的**类似**功能的帮助？**

相关问题：

*   [例如 %+% 是做什么的？在 R 中](https://stackoverflow.com/questions/1328903/what-does-eg-do-in-r)
*   [R %*% 运算符](https://stackoverflow.com/questions/22060515/the-r-operator)
*   [%*% 在 R 中是什么意思](https://stackoverflow.com/questions/22865094/what-does-mean-in-r)
*   [%||% 在 R 中做了什么？](https://stackoverflow.com/questions/24190693/what-does-do-in-r)
*   [%>% 在 R 中是什么意思](https://stackoverflow.com/questions/24536154/what-does-mean-in-r)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-04T16:24:19.240

我认为 GSee 或 Sathish 的答案还远远不够，因为“%”*本身确实*具有意义，而不仅仅是在`%in%`运算符的上下文中。它是用户定义新中缀运算符的机制。`%in%`这是一个比中缀运算符或其更一般的前缀祖先的优点更普遍的问题`match`。它可以像制作成对的“s”（um）运算符一样简单：

```
 `%s%` <- function(x,y) x + y 
```

或者它可能更有趣，比如制作一个二阶导数运算符：

```
 `%DD%` <- function(expr, nam="x") { D(D( bquote(.(expr)), nam), nam) }
 expression(x^4) %DD% "x"
 # 4 * (3 * x^2) 
```

-`%`字符在解析日期、日期时间和 C 类型格式函数（如`strptime`、`formatC`和`sprintf`.

自从最初编写以来，我们已经看到了该`magrittr`包的出现，其详细说明了-flanked 运算符`dplyr`的另一种用途。`%`

所以最普遍的答案是`%`符号是由 R 解析器专门处理的。由于解析器用于处理绘图表达式，因此您还将在`?plotmath`帮助页面上看到大量图形注释选项。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-09-14T10:21:42.490

`%op%`表示中**[缀](https://en.wikipedia.org/wiki/Infix_notation) [二元运算符](https://en.wikipedia.org/wiki/Binary_operation)**。有几个内置的运算符使用`%`，您也可以创建自己的。

（单个`%`符号不是 R 中的关键字。您可以在[`?Reserved`](https://www.rdocumentation.org/packages/base/topics/Reserved)帮助页面上查看关键字列表。）

* * *

**如何获得有关二元运算符的帮助？**

与任何非标准变量名一样，您必须将术语括在引号或反引号中。

```
?"%in%"
?`%in%` 
```

学分：[GSee 的回答](https://stackoverflow.com/a/12730667/134830)。

* * *

**做什么`%in%`？**

如`?`%in%``帮助页面（实际上是`?match`帮助页面，因为`%in%`实际上只是 . 的中缀版本`match`）上所述，

> [ `%in%`] 返回一个逻辑向量，指示其左操作数是否匹配

它最常用于分类变量，但也可以用于数字。

```
c("a", "A") %in% letters
## [1]  TRUE FALSE

1:4 %in% c(2, 3, 5, 7, 11)
## [1] FALSE  TRUE  TRUE FALSE 
```

学分：[GSee 的回答](https://stackoverflow.com/a/12730667/134830)，[Ari 的回答](https://stackoverflow.com/a/12731480/134830)，[Sathish 的回答](https://stackoverflow.com/a/12731221/134830)。

* * *

**如何创建自己的中缀二元运算符？**

这些是函数，可以像任何其他函数一样定义，但有一些限制。

1.  它是一个*二元*运算符，因此该函数必须正好有两个参数。
2.  由于名称是非标准的，因此必须用引号或反引号编写。

例如，这定义了一个矩阵幂运算符。

```
`%^%` <- function(x, y) matrixcalc::matrix.power(x, y)

matrix(1:4, 2) %^% 3 
```

学分：[BondedDust 的回答](https://stackoverflow.com/a/12731591/134830)，[Ari 的回答](https://stackoverflow.com/a/12731480/134830)。

* * *

**还有哪些其他`%`运营商？**

在**基础 R 中：**

`%/%`并分别`%%`进行[整数除法](https://en.wikipedia.org/wiki/Division_%28mathematics%29#Of_integers)和[模除法](https://en.wikipedia.org/wiki/Modular_arithmetic)，在[`?Arithmetic`](https://www.rdocumentation.org/packages/base/topics/Arithmetic)帮助页面上有说明。

[`%o%`](https://www.rdocumentation.org/packages/base/topics/outer)给出数组的[外积](https://en.wikipedia.org/wiki/Outer_product).

[`%*%`](https://www.rdocumentation.org/packages/base/topics/matmult)执行[矩阵乘法](https://en.wikipedia.org/wiki/Matrix_multiplication)。

[`%x%`](https://www.rdocumentation.org/packages/base/topics/kronecker)执行数组的[Kronecker 积](https://en.wikipedia.org/wiki/Kronecker_product)。

在**[ggplot2 中](http://ggplot2.org/)：**

[`%+%`](http://docs.ggplot2.org/current/gg-add.html)替换 ggplot 中的数据框。

`%+replace%`修改 ggplot 中的主题元素。

`%inside%`（内部）检查范围内的值。

`%||%`（内部）在值的情况下提供默认`NULL`值。这个函数也出现在 devtools、reshape2、roxygen2 和 knitr 内部。（在 knitr 中称为`%n%`。）

在**[magrittr 中](https://github.com/smbache/magrittr)：**

`%>%`将左侧通过管道传递到右侧的表达式中。

`%<>%`将左侧通过管道传递到右侧的表达式中，然后将结果分配回左侧的对象。

`%T>%`将左侧通过管道传递到右侧的表达式中，它仅用于其副作用，返回左侧。

`%,%`构建功能序列。

`%$%`公开 data.frame 的列或列表的成员。

在**数据表中：**

[`%between%`](https://www.rdocumentation.org/packages/data.table/topics/between)检查范围内的值。

[`%chin%`](https://www.rdocumentation.org/packages/data.table/chmatch)就像`%in%`，针对字符向量进行了优化。

[`%like%`](https://www.rdocumentation.org/packages/data.table/like)检查正则表达式匹配。

在**Hmisc 中：**

`%nin%`返回 的相反数`%in%`。

在**开发工具**中：

`%:::%`(internal) 从作为字符串传递的命名空间中获取变量。

在**[sp](https://cran.r-project.org/web/packages/sp/index.html)**中：

[`%over%`](https://www.rdocumentation.org/packages/sp/over-methods)执行空间连接（例如，哪个多边形对应于某些点？）

在**rebus**中：

`%R%`连接`regex`对象的元素。

* * *

更一般地说，您可以使用以下命令在您的机器上安装的所有软件包中找到所有操作员：

```
library(magrittr)

ip <- installed.packages() %>% rownames
(ops <- setNames(ip, ip) %>% 
  lapply(
    function(pkg)
    {
      rdx_file <- system.file("R", paste0(pkg, ".rdx"), package = pkg)
      if(file.exists(rdx_file))
      {
        rdx <- readRDS(rdx_file)
        fn_names <- names(rdx$variables)
        fn_names[grepl("^%", fn_names)]
      }
    }
  ) %>% 
  unlist
) 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-10-04T15:28:27.003

在它周围加上引号以找到帮助页面。这些工作中的任何一个

```
> help("%in%")
> ?"%in%" 
```

进入帮助页面后，您会看到

> '%in%' 当前定义为
> 
> '"%in%" <- function(x, table) match(x, table, nomatch = 0) > 0'</p>

* * *

由于`time`是通用的，所以我不知道`time(X2)`返回的是什么而不知道返回`X2`的是什么。但是，`%in%`告诉您左侧的哪些项目也在右侧。

```
> c(1:5) %in% c(3:8)
[1] FALSE FALSE  TRUE  TRUE  TRUE 
```

也可以看看，`intersect`

```
> intersect(c(1:5), c(3:8))
[1] 3 4 5 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-10-04T16:17:09.670

更一般地说，`%foo%`是二元运算符的语法。R中的二元运算符实际上只是变相的函数，并带有两个参数（运算符之前的一个和运算符之后的一个成为函数的前两个参数）。

例如：

```
> `%in%`(1:5,4:6)
[1] FALSE FALSE FALSE  TRUE  TRUE 
```

虽然`%in%`在基础 R 中定义，但您也可以定义自己的二进制函数：

```
`%hi%` <- function(x,y) cat(x,y,"\n")
> "oh" %hi% "my"
oh my 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-04T16:00:55.867

`%in%`是一个运算符，用于在矩阵或数据框中查找和子集多个相同名称或值的出现。

例如1：同名子集

```
set.seed(133)
x <- runif(5)
names(x) <- letters[1:5]
x[c("a", "d")]
#  a         d 
#  0.5360112 0.4231022 
```

现在您将“d”的名称更改为“a”

```
 names(x)[4] <- "a" 
```

如果您尝试使用前面的下标提取相似的名称及其值，它将不起作用。注意结果，它没有 [1] 和 [4] 的元素。

```
x[c("a", "a")]

#        a         a 
#    0.5360112 0.5360112 
```

`%in%`因此，您可以使用二元运算符从变量中的不同位置提取两个“a” 。

```
names(x) %in% "a"
#  [1]  TRUE FALSE FALSE  TRUE FALSE

#assign it to a variable called "vec"
 vec <- names(x) %in% "a"

#extract the values of two "a"s
 x[vec]
 #         a         a 
 #  0.5360112 0.4231022 
```

示例 2：将列中的多个值设置为子集 请参阅[此站点](http://www.ats.ucla.edu/stat/r/faq/subset_R.htm)以获取示例

# android - 无法在 Android 4.1.1 中的 WebView 上接收 KEYCODE_DEL

> ID：12730635
> 
> 赞同：3
> 
> 时间：2012-10-04T15:26:38.490
> 
> 标签：android, android-4.2-jelly-bean

我想`WebView`通过创建一个复杂的 javascript 来处理键盘事件来使其可编辑。**除4.1**之外的所有 Android 版本都可以正常工作。在**4.1**中，我可以处理除`KeyEvent.KEYCODE_DEL`. 似乎我们无法在 Android 4.1 中处理`KEYCODE_DEL`事件？`WebView`如果有人可以帮助我解决这个问题，我将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:12:19.293

看起来像一个Android错误。一个对我有用的简单解决方法是设置

```
android:targetSdkVersion="15" 
```

在你的 AndroidManifest.xml

## **编辑：**

经过更多研究，我现在认为这不是错误，而是故意更改。`KeyEvent`文档说：

> 由于软输入法可以使用多种创造性的文本输入方式，因此无法保证软键盘上的任何按键都会产生按键事件：这由 IME 自行决定，实际上不鼓励发送此类事件。您永远不应该依赖接收 KeyEvents 来获取软输入法上的任何键。特别是，默认的软件键盘永远不会向任何针对 Jelly Bean 或更高版本的应用程序发送任何键事件，并且只会向针对 Ice Cream Sandwich 或更早版本的应用程序发送某些按下删除键和返回键的事件。

但实际上，除了 Delete 键之外，它仍然会为大多数按键发送事件。因为我真的需要所有关键事件，所以我想出了这个解决方案：

首先，像这样创建自己的`View`（在我的情况下它是从 派生的`TextView`）：

```
public class MyTextView extends TextView {

  ...

    @Override
    public InputConnection onCreateInputConnection(EditorInfo editorInfo) {
        editorInfo.actionLabel = null;
        editorInfo.inputType   = InputType.TYPE_NULL;
        editorInfo.imeOptions  = EditorInfo.IME_ACTION_NONE;

        return new MyInputConnection(this, false);
    }

    @Override
    public boolean onCheckIsTextEditor() {
        return true;
    }
} 
```

其次，通过这样`MyInputConnection`的子类创建`BaseInputConnection`：

```
public class MyInputConnection extends BaseInputConnection { 

    ...

    // From Android 4.1 this is called when the DEL key is pressed on the soft keyboard (and
    // sendKeyEvent() is not called). We convert this to a "normal" key event.
    @Override
    public boolean deleteSurroundingText(int beforeLength, int afterLength) {
        long eventTime = SystemClock.uptimeMillis();
        sendKeyEvent(new KeyEvent(eventTime, eventTime,
                KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL, 0, 0, KeyCharacterMap.VIRTUAL_KEYBOARD, 0,
                KeyEvent.FLAG_SOFT_KEYBOARD | KeyEvent.FLAG_KEEP_TOUCH_MODE | KeyEvent.FLAG_EDITOR_ACTION));
        sendKeyEvent(new KeyEvent(SystemClock.uptimeMillis(), eventTime,
                KeyEvent.ACTION_UP, KeyEvent.KEYCODE_DEL, 0, 0, KeyCharacterMap.VIRTUAL_KEYBOARD, 0,
                KeyEvent.FLAG_SOFT_KEYBOARD | KeyEvent.FLAG_KEEP_TOUCH_MODE | KeyEvent.FLAG_EDITOR_ACTION));
        return true;
    } 
```

在你的`InputConnection`课堂上，你可以很好地控制正在发生的事情。例如，您可以覆盖该`commitText()`方法以获取有关外语字母等键的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:53:08.220

我认为您可以扩展 webview 并覆盖`public boolean onKeyPreIme(int keyCode, KeyEvent event)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T04:32:12.230

尝试在 KEYCODE_DEL 上捕获“输入”事件。

```
$('#textBox').on('input', function(event) {
    console.log(event, event.keyCode, event.which);
    // it will capture the event, but you will not get the event.keyCode 
    // and event.which.
}); 
```

有关更多详细信息 - [backSpace 未在 android mobile](https://stackoverflow.com/questions/22503559/backspace-not-firing-the-keyup-event-in-android-mobile) 或[JQuery 中触发 keyup 事件：检测输入字段中的更改](https://stackoverflow.com/questions/12797700/jquery-detect-change-in-input-field)

# asp.net - 如何使用 VB.Net 在公共属性中创建会话变量

> ID：12730638
> 
> 赞同：0
> 
> 时间：2012-10-04T15:26:51.150
> 
> 标签：asp.net, vb.net, session

我之前已经问过一个类似的问题，但这让我很头疼！在 ASPX 页面上，我有这个属性：

```
Public ReadOnly BreadQuestionnaire as Bread 
                          Implements IQuestionnaire.BreadQuestionnaire
       Get
           If Me.Session("BreadQuestionnaire") Is Nothing Then
              Me.Session("BreadQuestionnaire") = New Bread()
           End If
       Return TryCast(Me.Session("BreadQuestionnaire"),Bread)
      End Get
End Property 
```

我遇到的问题如下：

*   停留在页面上，当我第一次输入属性时，检查会话是否存在返回 true 并且永远不会创建会话变量
*   这会导致我出现问题，因为我无法根据该对象为会话设置值
*   我还注意到，当我刚刚在页面上设置会话时，在页面上播放会话没有被回发。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:31:44.827

试试这个：

```
Public ReadOnly BreadQuestionnaire as Bread 
                          Implements IQuestionnaire.BreadQuestionnaire
       Get
           Dim obj = TryCastMe.Session("BreadQuestionnaire"), Bread)
           If (obj IsNot Nothing) Then
              obj = new Bread()
              Me.Session("BreadQuestionnaire") = obj
           End If

           return obj
      End Get
End Property 
```

每当您更改面包对象的属性时，您必须在会话中使用新属性值恢复该对象。更新属性时会话不会更新。所以你需要一个二传手来做到这一点。

# visual-studio - 如何配置 VS2012 测试运行器以获取并运行 Gallio 单元测试？

> ID：12730640
> 
> 赞同：5
> 
> 时间：2012-10-04T15:26:54.597
> 
> 标签：visual-studio, unit-testing, visual-studio-2012, gallio, test-runner

我最近升级到 VS2012 以解决我团队之前的问题。我们使用 Gallio 3.3 作为单元测试框架，并编写了许多在 VS2010 中运行的测试。但是，VS2012 似乎无法识别它们。

VS2012 测试资源管理器窗口显示“构建您的解决方案以发现所有可用测试”。我做了几次干净的构建，系统在VS2012中运行，但没有出现任何测试。

是否需要进行任何配置，或者我可以通过什么方式让这些测试在 VS2012 中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:37:12.723

VS2012 UnitTestExplorer 提供了一个平台，允许测试框架发现/执行测试。目前，有 xUnit、nUnit、MSTest 和其他一些适配器可用于 VS2012。

为了让您的 Gallio 测试与 UnitTestExplorer 一起使用，您将需要一个 MBUnit 适配器来发现/执行测试。

目前，有一个 MBUnitTest 适配器仅适用于 VS2012 beta（今年 2 月左右推出）。它带有源代码。你可以

1.  下载代码，进行更改，使其适用于 VS2012
2.  向适配器编写者提出请求并要求进行必要的更改。

# c# - 在打开另一个 wpf 窗口之前销毁所有线程

> ID：12730641
> 
> 赞同：0
> 
> 时间：2012-10-04T15:27:01.333
> 
> 标签：c#, wpf

我在 wpf 窗口中使用多线程。

我`this.Close()`用来关闭窗口，并使用打开另一个窗口`newWindow.Show().`

代码：

```
// open new windows
newWindow newWindow = new newWindow();
                this.Close();
                newWindow.Show();

// close window
    private void OnClosed(object sender, EventArgs e)
            {
                // stop some events
                d.StopEvents();
        } 
```

需要很长时间才能到达`StopEvents`。

如果我使用`Environment.Exit(0)`; 它会关闭应用程序，我不希望这样。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:25:32.907

你的线程在做什么？一种常见的模式是工作线程定期检查标志以查看它们是否需要关闭自己。每个线程都这样做比另一个线程中止它要安全得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:08:28.783

您可能还想考虑使用并行扩展 (TPL)，因为这使得线程更容易，并且包含了诸如取消之类的概念。

[.NET 4 取消框架](http://blogs.msdn.com/b/pfxteam/archive/2009/05/22/9635790.aspx)

# c# - 仅当元素为第一个时查询才返回结果

> ID：12730643
> 
> 赞同：0
> 
> 时间：2012-10-04T15:27:09.963
> 
> 标签：c#, linq-to-xml

我有这个 XML 文件：

```
<MyFile>
    <PossibleResponses>
        <Response text="response1"/>
        <Response text="response2"/>
    </PossibleResponses>
</MyFile> 
```

我正在尝试检索其中一个回复：

```
var selectedResponse = (from i in XElement.Load("MyFile.xml").Elements("PossibleResponses")
where i.Element("Response").Attribute("text").Value == parameter
select i.Element("Response")).Single(); 
```

现在，如果我试图获得第一个响应（参数 = response1），那么它可以工作。如果我试图获得第二个响应（参数 = response2），那么它不会返回任何结果。

如果我在 XML 文件中切换它们的顺序，则返回 response2 但不返回 response 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:03:23.607

我得到了这个[回应](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/4294d4e0-9bcb-4980-9f9f-6f441d81f9d7)的帮助，但做了一些修改：

```
var result = from i in XElement.Load("MyFile.xml").Descendants("Response")
    where i.Attribute("text").Value == "response2"
    select i; 
```

根据我对 Linq 的有限理解，我认为这里的关键是***'XElement.Load("MyFile.xml").Descendants("Response")'***返回一个元素列表，所以：
1\. 'Where' 子句应该直接引用到元素级别，无需“重新提及”它的元素。
2\. 'Select' 子句也一样。

欢迎任何其他澄清:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:33:06.743

将查询更改为：

```
var selectedResponse = (from p in XDocument.Load("MyFile.xml") where p.Descendents("MyFile").Descendents("PossibleResponses").Descendents("Response").Any(k=>k.Attribute("text").Value == parameter) select p).Single(); 
```

我是直接写在这里的，所以可能有语法错误。这个想法是使用“后代”方法，为您提供具有指定名称的所有元素，过滤具有您希望的特定值的元素并选择它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:30:55.090

发生这种情况是因为在您的 select 子句中您`i.Element("Response")`再次调用，根据文档返回文档顺序中的第一个元素（即 response1）。

# git - 无法推送到github

> ID：12730645
> 
> 赞同：0
> 
> 时间：2012-10-04T15:27:12.940
> 
> 标签：git, github

我正在尝试将一个分支（名为“grails-1.3”）推送到我的 github 存储库。这是正在发生的事情

```
> git push origin grails-1.3
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

这是我第一次尝试推送到我的 git 存储库，所以我想我没有正确设置用户名/密码/SSH。我的`.git/config`文件包含以下内容：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = ssh://git@github.com/domurtag/airbrake-grails.git
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

## 更新

我查看了我的 GitHub 帐户的“SSH 密钥”部分，它说：

> 没有 SSH 密钥可以访问您的帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:35:40.283

您是否已将 SSH it github 配置为使用您的公共 RSA 密钥？您是否制作了 RSA 密钥？看看这里的一半：

[https://help.github.com/articles/error-permission-denied-publickey](https://help.github.com/articles/error-permission-denied-publickey)

如果您使用的是 Eclipse 之类的 IDE，则可以通过 Preferences->General->Network Connections->SSH2 来设置密钥。在那里，您可以看到密钥在本地存储的位置，并且在“密钥管理”选项卡下，您可以创建一个新密钥。生成新密钥后，将密钥文本原样复制到您的 github 帐户中（Github->Account Settings->SSH Keys）。

这一切都来自命令行：

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T15:36:40.770

您必须生成一个 rsa 密钥对：

```
ssh-keygen -t rsa 
```

然后在github上注册你的公钥指纹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T19:06:51.067

如果您使用的是[Windows](http://windows.github.com/)（或[MacOS](http://mac.github.com/)，但我自己没有尝试过），我强烈建议您安装官方 GitHub 客户端，即使您打算坚持使用命令行。

客户端正确设置了所有内容，例如 SSH 密钥和您的存储库的初始克隆。它还带有一个很好的 shell 集成，因此您可以直接在 shell 上查看某些文件是否已过时等。

# c# - 用c#、memorystream、图形和图像切割图像

> ID：12730646
> 
> 赞同：1
> 
> 时间：2012-10-04T15:27:12.910
> 
> 标签：c#, image, memory, graphics

我在剪切图像时遇到问题。

我想要做的是，在一些切片中切割图像，主要是二次的。该代码尚未针对边界值进行细化，不应将整个图像切割成适当的大小，但这目前不是问题。

我的问题是，被剪切的第一张图像实际上是原始图像的一部分，但第二张图像（或之后的所有图像）只有黑色。我只是在死胡同，我不知道问题是什么。

```
 var sourceImg = System.Drawing.Image.FromFile(args[numcount]);

                int cutsizeHeight = sourceImg.Height < cutsize ? sourceImg.Height : cutsize;
                int cutsizeWidht = sourceImg.Width < cutsize ? sourceImg.Width : cutsize;

                int cutPassesHeight = (int)(sourceImg.Height / cutsize) == 0 ? 1 : (int)(sourceImg.Height / cutsize);
                int cutPassesWidth = (int)(sourceImg.Width / cutsize) == 0 ? 1 : (int)(sourceImg.Width / cutsize);

                for (int i = 0; i < cutPassesHeight; i++)
                {
                    for (int j = 0; j < cutPassesWidth; j++)
                    {
                        var mem = new MemoryStream();
                        var sourcePositionX = i * cutsizeHeight;
                        var sourcePositionY = j * cutsizeWidht;
                        var cutRectangle = new System.Drawing.Rectangle(0, 0, cutsizeWidht, cutsizeHeight);

                        var newImage = new Bitmap(cutRectangle.Width, cutRectangle.Height);
                        Graphics g = Graphics.FromImage(newImage);
                        g.DrawImage(sourceImg, cutRectangle, sourcePositionX, sourcePositionY, cutsizeWidht, cutsizeHeight, GraphicsUnit.Pixel);
                        newImage.Save(mem, ImageFormat.Png);

                        var saveImage = System.Drawing.Image.FromStream(mem);
                        var fileName = System.IO.Path.GetFileName(args[numcount]);
                        var pureName = fileName.Split('.');
                        fileName = pureName[0] + i.ToString() + "_" + j.ToString() + ".png";
                        saveImage.Save(@"C:\usr\test\" + fileName);
                    }
                } 
```

这是我的代码片段。目前我正在使用图像大小 5906 * 1773 对其进行测试。每个切割图像的切片尺寸应为 2096 * 1773。因此上面的代码忽略了宽度中 1714 的其余部分（2096 * 2 = 4192，其余 5906 - 4192 = 1714 ）。不过没关系。

问题是，第二个不是图像，而是黑色的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:32:53.100

问题是您将绘制的图像向右和向下移动，而不是向左和向上移动。您将在新图像之外完全绘制源图像：

```
First image:  Second image:     Third image:
+---+----+    +---+--------+    +---+    +--------+
| d |    |    | d |        |    | d |    |        |
+---+    |    +---+    s   |    +---+    |    s   |
|     s  |        |        |             |        |
+--------+        +--------+             +--------+ 
```

使用负坐标：

```
var sourcePositionX = -i * cutsizeHeight;
var sourcePositionY = -j * cutsizeWidht; 
```

* * *

附带说明；您将图像保存到内存流中，然后从内存流中加载它并将其保存到文件中。直接保存到文件就行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:27:08.783

好的，解决方案是：使用原始代码，但这是错误的，所以不要使用：

```
var sourcePositionX = i * cutsizeHeight;
var sourcePositionY = j * cutsizeWidht; 
```

使用是正确的：

```
var sourcePositionY = i * cutsizeHeight;
var sourcePositionX = j * cutsizeWidht; 
```

坐标系中的 X 代表宽度，我只是在这里犯了一个小 X/Y 错误。现在它可以工作了。

# delphi - 使用 TScrollBox 包含 TExpander 组件

> ID：12730647
> 
> 赞同：0
> 
> 时间：2012-10-04T15:27:14.563
> 
> 标签：delphi, firemonkey, tscrollbox

好吧，我有一个与表单左侧对齐的滚动框，在滚动框中我有与顶部对齐的 TExpander 组件，此扩展器超出了滚动框的区域，所以我猜滚动条必须是可见的，但它们不是。我认为问题在于 Texpanders 顶部的对齐方式，因为如果我更改 Texpander 的对齐方式，则超出滚动框的边距以 alNone 滚动条出现，但我需要将 Texpander 对齐在顶部，因为他的尺寸恒定变化。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:33:00.507

不知道它为什么起作用，但是将“ **TExpander.Align** ”设置为“ **alTop** ”，然后将“ **TExpander.Anchors** ”设置为：

```
akLeft = True
akTop = True
akRight = False
akBottom = False 
```

为我工作；）

# php - !in_array 在 PHP 中的使用 - 条件语句

> ID：12730648
> 
> 赞同：1
> 
> 时间：2012-10-04T15:27:17.873
> 
> 标签：php, arrays

我想看看如何使用 !in_array。

我有这段代码，但它不起作用：

```
while ($row = mysql_fetch_assoc($result)) {

        if (!in_array($row['item'], $output)) {
            $output[] = $row;
        }

      }

   print(json_encode($output));  // need all rows, not just ['item'] 
```

是的，我知道我使用的是较旧的 mysql，并且代码不是很“安全”。只想知道检查一个项目是否在数组中。如果不是，我希望它存储。如果是，我希望循环跳过......

**编辑：这是一个额外的想法：**

```
$items[] = "";
while ($row = mysql_fetch_assoc($result)) {
    $item[] = $row['item'];

        if (!in_array($row['item'], $items)) {
            $output[] = $row;
        }
 }
print(json_encode($output)); 
```

此代码将所有项目放入数组中，甚至重复；我这样做是为了防止重复

**我的 SQL：**

```
 $result = mysql_query("
    SELECT b.item, a.rate_id, a.review, c.category, u.username
    FROM comments a
    INNER JOIN items b
        ON a.item_id = b.items_id
    INNER JOIN master_cat c
        ON c.cat_id = b.cat_id
    INNER JOIN users AS u
        ON u.user_id = a.user_id
    ORDER BY rate_id DESC LIMIT 15;"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:28:45.167

```
 while ($row = mysql_fetch_assoc($result)) {

    if (!in_array($row['item'], $output)) {
        $output[] = $row['item'];
    }

  } 
```

或者

```
 while ($row = mysql_fetch_assoc($result)) {

    if (!in_array($row['item'], $output))  continue;
    $output[] = $row['item'];

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:31:38.740

看起来你想要类似的东西：

```
while ($row = mysql_fetch_assoc($result)) {

   if (!isset($output[$row['item']])) {
     $output[$row['item']] = $row;
   }

} 
```

# forms - 从 Sharepoint Designer 2010 开始，是否可以创建 html/jquery 表单并将数据发送到另一台服务器？

> ID：12730649
> 
> 赞同：0
> 
> 时间：2012-10-04T15:27:24.060
> 
> 标签：forms, sharepoint-2010, sharepoint-designer

我正在学习如何从 SharePoint Designer 2010 创建一个基本的 SharePoint HTML 表单。我需要让这个表单在 .aspx 页面上可供公众使用。我可以自定义布局吗？提交时，将表单数据发送到另一台服务器。数据不需要保存到我当前的服务器。所有这些都可以在 SharePoint Designer 2010 中完成吗？如果是这样，这个过程的起始教程是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:54:25.853

好，我知道了。这不是最优雅的，但可行的。通过 SharePoint Designer，在 .HTML 页面上创建您的自定义 HTML 表单。如果它涉及 javaScript 或将数据发布到另一个 URL，请将适当的代码放在同一页面上。保存。然后在您的发布 .aspx 页面上，该页面将包含一个 Web 部件，加载一个页面查看器以调用您刚刚创建的自定义 HTML 表单。如果您在 DOM 准备好后需要额外的 JavaScript 来修改表单，那么 jQuery 非常适合这项工作。

# gcc - 链接器声明库未找到，strace 显示它尝试访问有效路径

> ID：12730652
> 
> 赞同：5
> 
> 时间：2012-10-04T15:27:33.193
> 
> 标签：gcc, compiler-construction, android-ndk, linker, shared-libraries

我正在尝试为 Android 交叉编译一些东西，所以我使用了一个单独的工具链。链接器抱怨它找不到一个库：

```
arm-eabi-gcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not found 
```

该库肯定存在于此路径中：

```
$ ls -l /mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/libexec/gcc/arm-eabi/4.6.x-google
total 70053
-rwxr-xr-x 1 501 dialout 47040814 Oct  3 14:29 cc1
-rwxr-xr-x 1 501 dialout 50903764 Oct  3 14:29 cc1plus
-rwxr-xr-x 1 501 dialout   423914 Oct  3 14:29 collect2
drwxr-xr-x 1 501 dialout      204 Oct  3 14:29 install-tools
-rwxr-xr-x 1 501 dialout     1090 Oct  3 14:29 libfunction_reordering_plugin.la
lrwxr-xr-x 1 501 dialout       38 Oct  3 14:29 libfunction_reordering_plugin.so -> libfunction_reordering_plugin.so.0.0.0
lrwxr-xr-x 1 501 dialout       38 Oct  3 14:29 libfunction_reordering_plugin.so.0 ->  libfunction_reordering_plugin.so.0.0.0
-rwxr-xr-x 1 501 dialout    89427 Oct  3 14:29 libfunction_reordering_plugin.so.0.0.0
-rwxr-xr-x 1 501 dialout      994 Oct  3 14:29 liblto_plugin.la
lrwxr-xr-x 1 501 dialout       22 Oct  3 14:29 liblto_plugin.so -> liblto_plugin.so.0.0.0
lrwxr-xr-x 1 501 dialout       22 Oct  3 14:29 liblto_plugin.so.0 -> liblto_plugin.so.0.0.0
-rwxr-xr-x 1 501 dialout   238575 Oct  3 14:29 liblto_plugin.so.0.0.0
-rwxr-xr-x 1 501 dialout 44647203 Oct  3 14:29 lto1
-rwxr-xr-x 1 501 dialout   114284 Oct  3 14:29 lto-wrapper 
```

因此，在我的编译行中，我包含了“-L/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/libexec/gcc/arm- eabi/4.6.x-google”，然后指定“-lliblto_plugin”......但我仍然继续收到此错误。

这是我的整行和错误：

```
arm-eabi-gcc -o test \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/../android-ndk-r8b-linux/platforms/android-14/arch-arm/usr/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/../ported-deps/jni/libgcrypt/src \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/../ported-deps/jni/libgpg-error/src \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/system/core/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/hardware/libhardware/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/hardware/ril/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/dalvik/libnativehelper/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/frameworks/base/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/external/skia/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/out/target/product/generic/obj/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libc/arch-arm/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libc/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libstdc++/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libc/kernel/common \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libc/kernel/arch-arm \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libm/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libm/include/arch/arm \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libthread_db/include \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libm/arm \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/bionic/libm \
-I/mnt/hgfs/Documents/thesis/android-wmon/core/os/out/target/product/generic/obj/SHARED_LIBRARIES/libm_intermediates \
-D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__ -DANDROID -DSK_RELEASE -DNDEBUG \
-include /mnt/hgfs/Documents/thesis/android-wmon/core/os/system/core/include/arch/linux-arm/AndroidConfig.h \
-UDEBUG -march=armv5te -mtune=xscale -msoft-float -mthumb-interwork \
-fpic -fno-exceptions -ffunction-sections -funwind-tables -fstack-protector -fmessage-length=0 \
test.c \
-Bdynamic -Wl,-T,/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/arm-eabi/lib/ldscripts/armelf.x \
-Wl,-dynamic-linker,/system/bin/linker -Wl,--gc-sections -Wl,-z,nocopyreloc \
-Wl,--no-undefined -Wl,-rpath-link=/mnt/hgfs/Documents/thesis/android-wmon/core/os/../android-ndk-r8b-linux/platforms/android-14/arch-arm/usr/lib \
-L/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/libexec/gcc/arm-eabi/4.6.x-google \
-L/mnt/hgfs/Documents/thesis/android-wmon/core/os/../android-ndk-r8b-linux/platforms/android-14/arch-arm/usr/lib \
-nostdlib /mnt/hgfs/Documents/thesis/android-wmon/core/os/../android-ndk-r8b-linux/platforms/android-14/arch-arm/usr/lib/crtend_android.o \
/mnt/hgfs/Documents/thesis/android-wmon/core/os/../android-ndk-r8b-linux/platforms/android-14/arch-arm/usr/lib/crtbegin_dynamic.o \
/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/lib/gcc/arm-eabi/4.6.x-google/libgcc.a \
-lc -lliblto_plugin -lm
arm-eabi-gcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not found 
```

* * *

编辑： strace 与编译一起运行，我看到读取共享库的访问失败：

```
access("/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin/../libexec/gcc/arm-eabi/4.6.x-google/liblto_plugin.so", R_OK) = -1 ENOENT (No such file or directory)
access("/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin/../libexec/gcc/liblto_plugin.so", R_OK) = -1 ENOENT (No such file or directory)
access("/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin/../lib/gcc/arm-eabi/4.6.x-google/../../../../arm-eabi/bin/arm-eabi/4.6.x-google/liblto_plugin.so", R_OK) = -1 ENOENT (No such file or directory)
access("/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin/../lib/gcc/arm-eabi/4.6.x-google/../../../../arm-eabi/bin/liblto_plugin.so", R_OK) = -1 ENOENT (No such file or directory) 
```

但有趣的是，它尝试的第一条路径确实存在，但它是一个链接：

```
$ file /mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin/../libexec/gcc/arm-eabi/4.6.x-google/liblto_plugin.so 
/mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin/../libexec/gcc/arm-eabi/4.6.x-google/liblto_plugin.so: symbolic link to `liblto_plugin.so.0.0.0' 
```

该链接也有效：

```
 $ ls -l /mnt/hgfs/Documents/thesis/android-wmon/core/os/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin/../libexec/gcc/arm-eabi/4.6.x-google/
total 70053
-rwxr-xr-x 1 501 dialout 47040814 Oct  3 14:29 cc1
-rwxr-xr-x 1 501 dialout 50903764 Oct  3 14:29 cc1plus
-rwxr-xr-x 1 501 dialout   423914 Oct  3 14:29 collect2
drwxr-xr-x 1 501 dialout      204 Oct  3 14:29 install-tools
-rwxr-xr-x 1 501 dialout     1090 Oct  3 14:29 libfunction_reordering_plugin.la
lrwxr-xr-x 1 501 dialout       38 Oct  3 14:29 libfunction_reordering_plugin.so -> libfunction_reordering_plugin.so.0.0.0
lrwxr-xr-x 1 501 dialout       38 Oct  3 14:29 libfunction_reordering_plugin.so.0 -> libfunction_reordering_plugin.so.0.0.0
-rwxr-xr-x 1 501 dialout    89427 Oct  3 14:29 libfunction_reordering_plugin.so.0.0.0
-rwxr-xr-x 1 501 dialout      994 Oct  3 14:29 liblto_plugin.la
lrwxr-xr-x 1 501 dialout       22 Oct  3 14:29 liblto_plugin.so -> liblto_plugin.so.0.0.0
lrwxr-xr-x 1 501 dialout       22 Oct  3 14:29 liblto_plugin.so.0 -> liblto_plugin.so.0.0.0
-rwxr-xr-x 1 501 dialout   238575 Oct  3 14:29 liblto_plugin.so.0.0.0
-rwxr-xr-x 1 501 dialout 44647203 Oct  3 14:29 lto1
-rwxr-xr-x 1 501 dialout   114284 Oct  3 14:29 lto-wrapper 
```

* * *

另一个编辑：如果我进入包含共享库的目录并删除从 liblto_plugin.so 到 liblto_plugin.so.0.0.0 的链接，然后是“cp liblto_plugin.so.0.0.0 liblto_plugin.so”，那么它会正确链接并且我的程序编译。当这个文件是一个链接时，为什么它会被破坏？（对不起，这里使用“链接”来指代两个不同的东西）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:03:59.290

事实证明，这是在我的虚拟机上使用跨 HGFS 的共享目录时出现的错误。如果我从共享目录中提取代码并进入本机文件系统，我不会遇到这些构建问题。

[这是在这里](http://www.linuxquestions.org/questions/programming-9/compiler-fails-to-link-to-library-that-exists-strace-shows-no-such-file-though-4175430516/#post4797318)向我暗示的

# jquery - keydown 事件上的 jQuery trigger() 和 stopPropagation()

> ID：12730657
> 
> 赞同：6
> 
> 时间：2012-10-04T15:27:54.017
> 
> 标签：jquery, jquery-ui, keydown, preventdefault, stoppropagation

我在按键和停止传播方面遇到了困难

我不希望我的页面刷新，我已经尝试了我能想到的所有方法，我当前的代码是

```
 <script>
 $(document).ready(function() {
 var e = jQuery.event( 'keydown', { which: $.ui.keyCode.ENTER } );

 $('#id_number').trigger(e, function(event){
event.preventDefault();
event.stopPropagation();
});

 });
 </script> 
```

关于我在这里做错了什么的任何想法？我认为该事件被正确调用，我正确链接了 jquery 和 jquery ui，并且没有收到控制台错误

**更新** 它工作正常，现在我得到对象函数 (a,b){return new e.fn.init(a,b,h)} 的属性“事件”不是下面代码的函数错误

```
 $(document).ready(function() {
 var e = jQuery.event( 'keydown', { which: $.ui.keyCode.ENTER } , function(event){
  event.preventDefault();
  event.stopPropagation();
}); 

 $('#id_number').trigger(e);

 }); 
```

**更新 #2 - 已修复**

我学到的东西

1.  文档中不需要触发器（）（准备好）
2.  让 $.ui.keyCode 工作很困难（至少对我来说）
3.  始终查看输入附加了哪些其他功能（onblur、onfocus 等）又名 doh

重写它，工作得很好

```
 $(document).ready(function() {
    $('#id_number').keydown(OnKeyDown);
 });    

function OnKeyDown(e){
var code = (e.keyCode ? e.keyCode : e.which); //to support both methods
if(code == 13) { //the Enter keycode

    //my actions
 return false;
 }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T15:32:13.110

停止默认操作的代码必须转到事件适用的元素。

```
$('#id_number').keydown(function(event){
  event.preventDefault();
  event.stopPropagation();
}); 
```

第二[`.trigger()`](http://api.jquery.com/trigger/)个论点是`extraParameters`

# java - 为什么在 JSTL 中使用此枚举作为选项时会出错

> ID：12730658
> 
> 赞同：1
> 
> 时间：2012-10-04T15:27:54.423
> 
> 标签：java, spring, jstl, el

枚举定义为：

```
public enum Country {
    US("United States"),
    CA("Canada"),
    AUS("Australia");

    private String fullName;

    private Country(String fullName) {
        this.fullName = fullName;
    }

    public String getFullName() {
        return fullName;
    }

    public void setFullName(String fullName) {
        this.fullName = fullName;
    }
} 
```

模型是：

```
public class Workspace implements Serializable {
    // ...
    @Valid
    @NotNull
    private Address address;
    //...
}

public class Address implements Serializable {
    // ...
    private Country country;
    //...
} 
```

我有一个这样的视图对象：

```
public class WorkspaceVO implements Serializable {
    //..
    private Workspace workspace;
    //...
} 
```

最后在我的jsp中我想做：

```
<form:select id="country"  path="workspace.address.country">
  <form:options items="${workspace.address.country}" itemLabel="fullName"/>
</form:select> 
```

我在我的代码的其他位置重复了这种确切的情况，并且工作正常。我没有看到任何区别，但是，当我访问 jsp 时出现错误...

javax.servlet.jsp.JspException：类型 [com.mycompany.web.Country] 对选项项无效

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:00:34.287

这是一个简单的错误：`form:options items`是包含所有选项的列表的值！

所以在控制器中，添加一个变量到你的模型图

```
modelMap.add("aviableCountries", Country.values); 
```

然后在jsp中使用它：

```
<form:select id="country"  path="workspace.address.country">
   <form:options items="${aviableCountries}" itemLabel="fullName"/>
</form:select> 
```

* * *

**编辑**：另一种解决方案是完全删除`items`属性

```
<form:select id="country"  path="workspace.address.country">
   <form:options itemLabel="fullName"/>
</form:select> 
```

那么您不需要在控制器中添加枚举值。`spring-form:options`这是因为-Tag的一个不为人知的特性。在该`items`值的 tld 中，您可以阅读：

> ...除非包含选择的数据绑定属性是枚举，否则此属性*（项目）是必需的，在这种情况下使用枚举的值。*

在你的代码中`org.springframework.web.servlet.tags.form.OptionsTag`会发现这个 if 语句：

```
if (items != null) {
    itemsObject = ...;
} else {
     Class<?> selectTagBoundType = ((SelectTag) findAncestorWithClass(this, SelectTag.class))
            .getBindStatus().getValueType();
      if (selectTagBoundType != null && selectTagBoundType.isEnum()) {
            itemsObject = selectTagBoundType.getEnumConstants();
      }
} 
```

# java - 将 HQL 转换为标准

> ID：12730659
> 
> 赞同：2
> 
> 时间：2012-10-04T15:27:57.493
> 
> 标签：java, hibernate, criteria

我需要将以下 HQL 转换为 CRITERIA：

```
Query query = bd.getSession().createQuery(
            "from Booking as b " + 
                "   where " + 
                "       b.cadimp.cdCadimp = :cdCadimp AND "+ 
                "       b.dtEntrada >= :dateParam AND " + 
                "       b.idCancelado <> 'S' AND " + 
                "       b.cdNavio <> 141 AND " + 
                "       0 = (select count(*) from Item i2 where " +
                "           (" +
                "               i2.pk.cdEmpresa = b.pedido.cdEmpresa " +
                "               AND i2.pk.nrPedido = b.pedido.nrPedido " +
                "               AND" +
                "                   (i2.cdTaxa >= 101 " +
                "                   AND i2.cdTaxa < 110) " +
                "                   AND i2.flag = 'R'" +
                "                   AND i2.dtPagto <> '0001-01-01'" +
                "           )" +
                "       )"
                + " ORDER BY b.dtInformacao asc"); 
```

我的标准：

```
Criteria c = getSession()
                .createCriteria(Booking.class, "b")
                .add(Restrictions.eq("cadimp.cdCadimp",
                        (Integer) restrictionsValues[0]))
                .add(Restrictions.gt("dtEntrada", calendar.getTime()))
                .add(Restrictions.ne("idCancelado", "S"))
                .add(Restrictions.ne("cdNavio", (short) 141))
                .add(Subqueries.eq(
                        0,
                        DetachedCriteria.forClass(Item.class, "i")
                                .add(Restrictions.eqProperty("cdEmpresa", "b.pedido.cdEmpresa"))
                                .add(Restrictions.eqProperty("nrPedido", "b.pedido.nrPedido"))
                                .add(Restrictions.conjunction()
                                        .add(Restrictions.ge("cdTaxa",101))
                                        .add(Restrictions.lt("cdTaxa", 110))
                                        .add(Restrictions.eq("flag", "R"))
                                        .add(Restrictions.ne("dtPagto", defaultDb2Date)))
                                        .setProjection(
                                            Projections
                                                    .projectionList()
                                                    .add(Projections.rowCount())
                                )

                ))
                .addOrder(Order.asc("dtInformacao")); 
```

我收到以下错误（任何想法？）：

```
org.hibernate.HibernateException: Unknown entity: null
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getPropertyMapping(CriteriaQueryTranslator.java:638)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getColumns(CriteriaQueryTranslator.java:523)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.findColumns(CriteriaQueryTranslator.java:538)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.findColumns(CriteriaQueryTranslator.java:543)
    at org.hibernate.criterion.PropertyExpression.toSqlString(PropertyExpression.java:51)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getWhereCondition(CriteriaQueryTranslator.java:419)
    at org.hibernate.loader.criteria.CriteriaJoinWalker.<init>(CriteriaJoinWalker.java:110)
    at org.hibernate.criterion.SubqueryExpression.toSqlString(SubqueryExpression.java:71)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getWhereCondition(CriteriaQueryTranslator.java:419)
    at org.hibernate.loader.criteria.CriteriaJoinWalker.<init>(CriteriaJoinWalker.java:123)
    at org.hibernate.loader.criteria.CriteriaJoinWalker.<init>(CriteriaJoinWalker.java:92)
    at org.hibernate.loader.criteria.CriteriaLoader.<init>(CriteriaLoader.java:93)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1603)
    at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:374)
    ---
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:38:32.783

我冒险限制超过`b.cadimp.cdCadimp`有问题。

你写了一个 Restriction ，`cadimp.cdCadimp`但我猜 Criteria 不知道它是 inside 的一个属性`cadimp`。因此，您应该为该属性创建一个别名以允许条件遍历它。

首先，取消一开始的限制。

然后，在最后添加：

```
createCriteria("cadimp"). // add a criteria over the entity represented by this property
add(Restrictions.eq(cdCadimp, ...);` 
```

我建议在最后添加它，因为这个 createCriteria 不返回主要标准（用于方法链接），而是返回属性的标准。

# iphone - 使用日文键盘时锁定应用程序崩溃

> ID：12730660
> 
> 赞同：3
> 
> 时间：2012-10-04T15:27:57.667
> 
> 标签：iphone, objective-c, ios6

该问题出现在 iOS 6 上。要重现它，您需要使用日语（假名）键盘输入文本，并在出现建议时按“锁定”按钮。解锁后，用户在应用程序仪表板而不是应用程序上。如果按下应用程序图标，它会再次加载 - 按下锁定时应用程序崩溃。即使对于像 Notes 这样的苹果应用程序也是如此

崩溃日志：

```
Application Specific Information:
YOUR_APP was suspended with locked system files: 
/private/var/mobile/Library/Keyboard/PhraseLearning_ja_JP.db/sqlite.db
/private/var/mobile/Library/Keyboard/BigramLearning_ja_JP.db/sqlite.db 
```

似乎 iOS 试图将用户的选择保存在 db 中以使建议更智能，但是当它无法写入时它会写入 db。

我已经向 Apple 发布了错误，但没有人知道他们何时修复它

你可以对使用你的应用程序的人说这是 Apple 的问题——你需要解决它。我尝试在 applicationWillResignActive 上隐藏键盘并在应用程序加载时显示它，但它并没有太大帮助。有什么建议么？

更新。我希望他们能在 6.0.1 中修复它，但不幸的是没有 :-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:02:03.530

使用“任务完成”延迟进入后台。
在额外时间（10 分钟）内隐藏键盘。这是解决方法。

例子：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Acquired additional time
    UIDevice *device = [UIDevice currentDevice];
    BOOL backgroundSupported = NO;
    if ([device respondsToSelector:@selector(isMultitaskingSupported)]) {
        backgroundSupported = device.multitaskingSupported;
    }

    if (backgroundSupported) {
        backgroundTask = [application beginBackgroundTaskWithExpirationHandler:^{
            [application endBackgroundTask:backgroundTask];
            backgroundTask = UIBackgroundTaskInvalid;
        }];
    }

    // Hide keyboard 
    [self.textField resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:47:39.323

扩展其他答案及其评论，我发现这对我有用。它的优点是您不需要知道哪个文本字段处于活动状态：

```
if ([[[UIDevice currentDevice] systemVersion] compare:@"6.0" options:NSNumericSearch] != NSOrderedAscending) {
    if (backgroundTask != UIBackgroundTaskInvalid)
        [application endBackgroundTask:backgroundTask];

    backgroundTask = [application beginBackgroundTaskWithExpirationHandler:^{
        [application endBackgroundTask:backgroundTask];
        backgroundTask = UIBackgroundTaskInvalid;
    }];
} 
```

# php - 如何将 Div 内容实时复制到输入值？

> ID：12730662
> 
> 赞同：0
> 
> 时间：2012-10-04T15:28:09.090
> 
> 标签：php, javascript, jquery, forms

我需要将实时 div 内容复制到输入值。这里我有代码： http: [//jsfiddle.net/dainis/Xjsp5/](http://jsfiddle.net/dainis/Xjsp5/) 我需要#preces_slug 中的文本会实时出现在url_slug 中。我需要它，因为在 url 中有我需要的 id 的 php 代码，这就是为什么我不能使用friendurl 直接将标题更改为 url。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:37:19.460

您将需要编写一个由某个事件调用的处理程序 js 函数。当调用该函数时，从 div 中获取内容（使用 jquery）并将其设置为输入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:36:25.137

您可以附加一个`keydown`事件，它会在您想要的任何地方复制出音译的值。

```
$(function() {
    $('.preces_nosaukums').friendurl({
        id: 'url_slugs',
        transliterate: true
    });

    $('.preces_nosaukums').keydown(function() {
        $('#url_slug').val($('#url_slugs').text());
    });
}) 
```

[http://jsfiddle.net/3zE3p/](http://jsfiddle.net/3zE3p/)

# string - 如何在 ksh 中的某个字符串之后提取子字符串？

> ID：12730664
> 
> 赞同：1
> 
> 时间：2012-10-04T15:28:14.087
> 
> 标签：string, substring, ksh, solaris-10

如果我有这样的字符串：

```
The important variable=123 the rest is not important. 
```

我想提取 ksh 中的“123”部分。

到目前为止，我已经尝试过：

```
print awk ' {substr($line, 20) }' | read TEMP_VALUE 
```

（这`20`部分只是暂时的，直到我弄清楚如何提取字符串的起始位置。）

但这只是打印`awk ' {substr($line, 20) }' | read TEMP_VALUE`（尽管这种格式*确实*适用于这样的代码：）`print ${line} | awk '{print $1}' | read SINGLE_FILE`。

我是否缺少执行此操作的简单命令（即其他语言）？

运行 Solaris 10。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T16:59:25.250

您的命令因多种原因而失败：您需要类似的东西

```
TEMP_VALUE=$(print "$line" | awk '...') 
```

您可以使用 ksh 参数扩展：

```
line="The important variable=123 the rest is not important."
tmp=${line#*=}   # strip off the stuff up to and including the equal sign
num=${tmp%% *}   # strip off a space and all following the first space
print $num       # ==> 123 
```

在 ksh 手册页中查找“参数替换”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-26T15:06:06.893

我们是否假设我们想要的部分之前的内容总是相同的长度？然后：

```
echo ${variable:23:3} 
```

还是我们假设我们可以使用`=`符号的位置和 123 之后的空格作为分隔符？我们知道它总是 3 个字符吗？如果你知道你想要的部分以 and 开头，`=`长度为 3 个字符：

```
variable=${variable#*=} # strip off everything up to and including the '=' sign
${variable:0:3} # get the next three characters. 
```

确实需要有关变量长度和结构的更多信息。

如果你只知道你想要任何跟随`=`到下一个空间的东西，那么格伦的解决方案看起来是正确的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-12T09:22:35.070

（对不起，这个有点晚了！）你打算如何确定“123”是要提取的部分？如果标准只是它是“=”符号之后的第一个字段，您可以这样做：

echo "The important variable=123 the rest is not important."|cut -f2 -d=|cut -f1 -d " "

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-04T16:18:19.320

使用 sed，内联编辑器：

```
x='The important variable=123 the rest is not important.'
echo $x | sed "s/.* important variable=\(\d\d\d\) .*/\1 
```

sed 匹配 x 中的字符串：

. s/ 替换命令和测试正则表达式的开始 - .* 匹配任何东西，从零开始的任意次数 - 重要变量 = 完全匹配“重要变量 =”，包括前面的空格 - (\d\d\d) 三个 \d匹配 3 位数字，封闭的转义括号启用反向引用实际匹配的 3 位数字 - .* 一个空格和 .* （任何东西）再次 - / 测试正则表达式结束 - \1 替换字符串

匹配的文本（实际上是所有 $x）将被替换字符串替换，即 $x 中的 3 位数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T16:54:11.490

```
$ x='The important variable=123 the rest is not important.'
$ print -r -- "${x/*=+([[:digit:]])[[:space:]]*/\1}"
123 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-28T16:36:01.090

我过去用过这个。

回声“var=123”| awk 'BEGIN{FS="="} {打印 $2}'

然后，如果需要，您也可以使用 $1 符号获取变量。

# qt - 当没有实例化 QCoreApplication 时，为什么 QString 不能正确处理特殊字符？

> ID：12730668
> 
> 赞同：8
> 
> 时间：2012-10-04T15:28:31.940
> 
> 标签：qt, special-characters

我开始在 Qt 中编写一个非常基本的文本操作应用程序，没有 GUI。我的文本包含特殊字符，但不知何故，无论我做什么，我都无法打印这些特殊字符。然后我注意到，在添加了一个`QCoreApplication`实例（我之前删除了它，因为我认为我不需要它）之后，一切都正常工作了。

这是代码：

```
#include <QCoreApplication>
#include <QString>
#include <QDebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QString s(QString::fromUtf8("aä\xc3\xa4")); // aää

    qDebug() << s;
    qDebug() << s.toAscii();
    qDebug() << s.toLatin1();
    qDebug() << s.toUtf8();
    qDebug() << s.toLocal8Bit();
    qDebug("%s", qPrintable(s));

    qDebug("%i", s.length());
    qDebug("%i", strlen(qPrintable(s)));

    return 0;
} 
```

输出`QCoreApplication`（一切正常）：

```
"aää" 
"aää" 
"aää" 
"aÃ¤Ã¤" 
"aÃ¤Ã¤" 
aää
3
5 
```

注释掉`QCoreApplication`定义的行后的输出（不再显示特殊字符）：

```
"a" 
"a" 
"a" 
"a" 
"a" 
a
3
1 
```

请注意，在调用之后`qPrintabable(s)`，特殊字符已经被删除。我对此进行了测试以确保，这`QDebug`不是问题。

我还检查了文件是否真的以 UTF-8 编码。

为什么`QCoreApplication`在实例化 no 时 QString 不能正确处理特殊字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T17:02:58.863

在浏览了 Qt 的源代码之后，我偶然发现了这段代码叫做 when`QCoreApplication`被构造：

```
#ifdef Q_OS_UNIX
    setlocale(LC_ALL, "");                // use correct char set mapping
    qt_locale_initialized = true;
#endif 
```

换句话说，在“Unix”系统上，`QCoreApplication`构造函数正在调用`setlocale`（在 中找到`locale.h`），它用于设置程序的当前语言环境。这最终会影响 的输出`qDebug`，它依赖于`QTextStream`，它最终使用它认为是系统定义的语言环境来创建其输出。

当我在 Linux 系统上测试你的代码时，我遇到了和你一样的结果。在 Windows 系统上，注释掉`QCoreApplication`结构对结果没有影响。我还注意到，`printf`无论是否`QCoreApplication`构造，打印出原始字符串都会给出正确的结果。

# ruby - 无法通过 ruby gem 安装特定版本的 Susy

> ID：12730670
> 
> 赞同：1
> 
> 时间：2012-10-04T15:28:42.423
> 
> 标签：ruby, gem, susy-compass

我需要用 gem安装[susy 。](https://github.com/ericam/susy)当我输入

```
sudo gem install susy --version 0.9 
```

这将导致一条错误消息：

```
ERROR:  Could not find a valid gem 'susy' (= 0.9) in any repository 
```

但是我已经检查了 github 的源代码并且 0.9 标签确实存在。

这怎么可能发生？如何强制 ruby​​gem 下载那些特定版本而不是最新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:40:20.127

当我运行时：

```
gem install susy --version 0.9 -V 
```

我看到有`gem`问题的宝石会去 ruby​​gems.org。

*但是*，当我`susy`在该服务器上查找 gem 时，我发现的只是[1.0.1](http://rubygems.org/search?utf8=%E2%9C%93&query=susy)版本。

在您的 Gemfile 中，您可以尝试从 git repo 中指定 gem 的来源，就像他们在[this question](https://stackoverflow.com/questions/2577346/how-to-install-gem-from-github-source)中所做的那样。

通常，您会将要使用的所有 gem 放在一个 Gemfile 中，然后`bundle install`从包含该 Gemfile 的目录中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:41:53.550

Susy gem 的 0.9 版本被称为`compass-susy-plugin`. 你想要的是：

```
gem install compass-susy-plugin 
```

# vb.net - 寻找 .Net 颜色对话框下拉菜单

> ID：12730674
> 
> 赞同：1
> 
> 时间：2012-10-04T15:29:01.897
> 
> 标签：vb.net, drop-down-menu, colordialog

我想要 Visual Studio 中的属性颜色下拉菜单。不过，我似乎找不到任何工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:26:43.990

恐怕您不会在 .NET 上“本地”找到它。PropertyGrid 控件根据专门设计用于在其中以自己的方式呈现/编辑每个属性类型的 Editors 类显示其值，这不是您所需要的。除此之外，您只会找到[ColorDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.colordialog.aspx)，这不是您想要的 - 我猜。

您将需要从 Web 上可用的内容中获取并引用自定义控件。以下是我在快速搜索中找到的一些免费选项：

[http://www.codeproject.com/Articles/1484/NET-Color-Picker-Controls](http://www.codeproject.com/Articles/1484/NET-Color-Picker-Controls) [http://www.codeproject.com/Articles/8305/The-ColorPicker-WinForms-Control-Revisited](http://www.codeproject.com/Articles/8305/The-ColorPicker-WinForms-Control-Revisited)

PS：如果你正在开发一个对 UI 有很多要求的商业应用程序，你应该考虑[为 Winforms 购买一个完整的控件/组件集](https://www.google.com/search?q=.NET%20winforms%20controls&oq=.NET%20winforms%20controls&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8#hl=en&sugexp=les;cqn,fixedpos=false,boost_normal=40,boost_high=40,cconf=1.2,min_length=2,rate_low=0.035,rate_high=0.035,second_pass=false,ignore_bad_origquery=true&gs_nf=1&cp=22&tok=WaXiHKO44Bfad-U0wjrwmw&pq=.net%20winforms%20controls&gs_id=1&xhr=t&q=.NET%20winforms%20controls&pf=p&sclient=psy-ab&oq=.NET%20winforms%20controls&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=190c66b37009a7&biw=1440&bih=802)，它带来了很多不错的控件（ColorPicker 就是其中之一）。从我自己的经验来看，这是值得的。

# service - 在服务的当前活动中显示 toast

> ID：12730675
> 
> 赞同：2
> 
> 时间：2012-10-04T15:29:13.157
> 
> 标签：service, toast, android

如果服务有一些更新，我需要在当前活动中显示 Toast。所以服务调用服务器，如果是一些更新，我需要通知用户，不管他在哪个活动。我尝试像这样实现它：

```
 Toast.makeText(ApplicationMemory.getInstance(), "Your order "+progress+"was updated", 
                     Toast.LENGTH_LONG).show(); 
```

在哪里

```
public class ApplicationMemory extends Application{
static ApplicationMemory instance;

   public static ApplicationMemory getInstance(){
        return instance;
    }
} 
```

它不起作用。我还尝试使用

```
ActivityManager am = (ActivityManager) ServiceMessages.this.getSystemService(ACTIVITY_SERVICE);
List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1);
ComponentName  componentInfo = taskInfo.get(0).topActivity;
componentInfo.getPackageName();
Log.d("topActivity", "CURRENT Activity ::"  + componentInfo.getClassName()); 
```

但不知道如何从 ComponentName 中获取上下文对象。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T16:04:16.200

* * *

尝试使用处理程序。关于 Toasts 的事情是，您必须在 UI 线程上运行 makeText，而 Service 不会在该线程上运行。处理程序允许您发布可在 UI 线程上运行的可运行对象。在这种情况下，您将在 onStartCommand 方法中初始化一个处理程序。

```
private Handler mHandler;

@Override
onStartCommand(...) {
  mHandler = new Handler();
}

private class ToastRunnable implements Runnable {
    String mText;

    public ToastRunnable(String text) {
        mText = text;
    }

    @Override
    public void run(){
         Toast.makeText(getApplicationContext(), mText, Toast.LENGTH_SHORT).show();
    }
}

private void someMethod() {
    mHandler.post(new ToastRunnable(<putTextHere>);
} 
```

# wordpress - 在 Wordpress 中创建网站联系方式

> ID：12730680
> 
> 赞同：0
> 
> 时间：2012-10-04T15:29:38.070
> 
> 标签：wordpress, customization

我正在涉足 Wordpress，但并不真正知道我要去哪里。

我不确定这是否是正确的方法，但我需要为网站标题中显示的网站（电子邮件、电话号码等）创建联系人详细信息列表。

我不确定在 Wordpress 中将这种全局信息存储在哪里，所以我创建了一个自定义帖子类型（联系人）以允许网站所有者编辑详细信息。

但现在我似乎无法在联系页面以外的任何其他页面上提取信息（我还必须从导航和视图中删除。）

有人对如何做到这一点有任何提示吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:34:31.007

WordPress 有其优点和缺点……您最好通过查看 WP 必须提供的所有支持文档来了解它们，包括在他们的论坛上提问。要执行您所描述的操作，请查看您网站的主题文件夹并找到头文件[http://wordpress.org/support/topic/finding-the-header-file](http://wordpress.org/support/topic/finding-the-header-file)然后编辑它以包含您想要的文本或图像显示在网站的每个页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:43:36.180

如果您希望使联系信息可编辑（仅限网站所有者），您将需要查看主题选项面板。[在 youtube 或http://wp-ask.me](http://wp-ask.me)上查找 wp-ask.me ，他有一个主题选项面板，您可以将其添加到任何主题，并提供有关如何操作的视频教程。祝你好运

# sql - 如何通过 sql 查询在 Oracle 中更新类型为 TIMESTAMP 的列？

> ID：12730681
> 
> 赞同：9
> 
> 时间：2012-10-04T15:29:40.227
> 
> 标签：sql, database, oracle, timestamp

我有专栏：

```
"LASTTOUCH" TIMESTAMP(9) NOT NULL ENABLE 
```

我必须将当前日期设置为此列。

但我不知道我该怎么做。

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T15:33:38.797

插入：

```
insert into tablename (LASTTOUCH) values (CURRENT_TIMESTAMP); 
```

更新：

```
update tablename set LASTTOUCH=CURRENT_TIMESTAMP; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T15:44:59.330

如果您想要当前时间（包括时间戳精度），您可以使用 systimestamp 或 current_timestamp

```
SQL> select systimestamp from dual;

SYSTIMESTAMP
---------------------------------------------------------------------------
04-OCT-12 11.39.37.670428 AM -04:00

SQL> select CURRENT_TIMESTAMP from dual;

CURRENT_TIMESTAMP
---------------------------------------------------------------------------
04-OCT-12 11.39.51.021937 AM -04:00

update table_name set column_name = SYSTIMESTAMP where id = 100; 
```

如果您只是将值设置为 sysdate，则时间戳的小数秒部分将归零，因为日期会隐式转换为时间戳。

```
SQL> create table t1(
  2     time1 timestamp
  3  );

Table created.

SQL> insert into t1 values (sysdate);

1 row created.

SQL> commit;

SQL> select to_char(time1,'MM/DD/YYYY HH24:MI:SS.FF6') result from t1;

RESULT
-----------------------------
10/04/2012 11:43:07.000000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T16:46:05.543

```
INSERT INTO tableName VALUES (SYSDATE); 
```

或者

```
UPDATE tableName SET COLUMN = SYSDATE; 
```

# java - JOGL 程序无法编译 - 带有类路径的 javac

> ID：12730682
> 
> 赞同：1
> 
> 时间：2012-10-04T15:30:04.120
> 
> 标签：java, opengl, classpath, javac, jogl

我想在命令行上运行一个 HelloWorld JOGL 程序。我从 jogamp.org 下载了 .jars 并将

```
gluegen-rt.jar , 
jogl.all.jar , 
gluegen-java-src.zip , 
jogl-java-src.zip , 
gluegen-rt-natives-macosx-universal.jar , 
jogl-all-natives-macosx-universal.jar 
```

在我的 HelloWorld 文件夹中的目录“jar”中 - 如 [http://jogamp.org/wiki/index.php/Downloading_and_installing_JOGL](http://jogamp.org/wiki/index.php/Downloading_and_installing_JOGL)中所述。

现在我尝试编译

```
javac -classpath "jar/gluegen-rt.jar:jar/jogl.all.jar" HelloWorld.java 
```

如[https://jogamp.org/wiki/index.php/Setting_up_a_JogAmp_project_in_your_favorite_IDE](https://jogamp.org/wiki/index.php/Setting_up_a_JogAmp_project_in_your_favorite_IDE)所述。

然后它给我抛出了 14 个错误，从

```
HelloWorld.java:7: package javax.media.opengl does not exist
import javax.media.opengl.GL;
                         ^ 
```

当我尝试使用绝对路径编译时

```
javac -classpath "/Users/jonas/Desktop/cool_jogl/helloworld/jar/gluegen-rt.jar:/Users/jonas/Desktop/cool_jogl/helloworld/jar/jogl-all.jar" HelloWorld.java 
```

它仍然向我抛出 12 个错误，从

```
HelloWorld.java:9: cannot find symbol
symbol  : class GLCanvas
location: package javax.media.opengl
import javax.media.opengl.GLCanvas;
                         ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-14T19:40:04.613

尝试替换`javax.media`为`com.jogamp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:25:13.297

您应该使用 javax.media.opengl.awt.GLCanvas 更改了一些包名称。使用 IDE 自动完成功能或查看 sources.zip 来查找新名称。

# javascript - javascript替换没有类的p标签的div标签

> ID：12730683
> 
> 赞同：1
> 
> 时间：2012-10-04T15:30:06.043
> 
> 标签：javascript, replace

我想将 div 标签替换为 p 标签，但前提是 div 标签没有类。

所以这：

```
<div class="myDiv">
   <div>sdfglkhj sdfgkhl sdfkhgl sdf</div>
   <div>dsf osdfghjksdfg hsdfg</div>
</div> 
```

会成为：

```
<div class="myDiv">
   <p>sdfglkhj sdfgkhl sdfkhgl sdf</p>
   <p>dsf osdfghjksdfg hsdfg</p>
</div> 
```

我试过`.replace("<div>", "<p>").replace("</div>","</p>")`了，但这用一个类替换了一个结束标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:43:08.253

这可以通过 jQuery 使用[`:not()`](http://api.jquery.com/not-selector/)选择器轻松完成，并且[`.unwrap()`](http://api.jquery.com/unwrap/) [`.wrap()`](http://api.jquery.com/wrap/)

```
$('div:not([class])').contents().unwrap().wrap('<p/>'); 
```

[http://jsfiddle.net/matthewbj/ujLHk/](http://jsfiddle.net/matthewbj/ujLHk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:36:27.043

```
$(document).ready(function () {

  $('div').each(function () {
    var html = this.innerHTML;
    if (! $(this).attr('class')) {
       $(this).replaceWith('<p>' + html + '</p>');
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:35:19.787

```
$(document).ready(function()
{
    $('.myDiv div').contents().unwrap().wrap('<p/>');
}); 
```

**或者**

```
$(document).ready(function()
{
    $('.myDiv div').each(function()
    {
        $(this).replaceWith($('<p>' + $(this).html() + '</p>'))
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:32:56.940

这可能会帮助您使用 jQuery 选择器来获取没有类的 div：

[jQuery获取所有没有类属性的div](https://stackoverflow.com/questions/1962247/jquery-get-all-divs-which-do-not-have-class-attribute)

# java - 从字符串创建 URL

> ID：12730685
> 
> 赞同：38
> 
> 时间：2012-10-04T15:30:16.107
> 
> 标签：java, http, url

这是一个非常基本的问题。但是我无法在 Java 文档中找到答案，也无法对其进行测试，因为我不知道这种方法是否存在。

我可能会收到一个 URL 字符串，它可能是

`http://www.example1.com`

或者

`http://www.example1.com/`

然后我会得到可能开始的资源路径，`/api/v1/status.xml`或者它会像`api/v1/status.xml`

我在看`URL`课，我可以处理第一部分，即获取 hostURL 以使其成为 HTTPS 或 HTTP 请求。问题是附加资源路径。要么我必须手动检查第一个字母是否是`/`。我想知道这个功能是否已经在某个类中。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-04T15:38:29.800

```
URL url = new URL(yourUrl, "/api/v1/status.xml"); 
```

根据 javadocs，这个构造函数只是将任何资源附加到域的末尾，因此您需要创建 2 个 url：

```
URL domain = new URL("http://example.com");
URL url = new URL(domain + "/files/resource.xml"); 
```

来源：[http ://docs.oracle.com/javase/6/docs/api/java/net/URL.html](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)

# c# - ResourceManager.GetString() 方法从不同的程序集中返回错误的字符串

> ID：12730690
> 
> 赞同：18
> 
> 时间：2012-10-04T15:30:40.427
> 
> 标签：c#, resources, resourcemanager

我有 2 个资源文件，一个是英文的，另一个是外文的。当我打电话

```
ResourceManager.GetString("Hello") 
```

从 .Designer.cs 文件中，它总是返回英文翻译。我检查了我的语言环境和语言等，一切都是正确的。

它从我的主程序集中返回正确翻译的字符串，但从加载的程序集中它总是返回英文。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T16:11:53.663

这是发生了什么。我有一个包含几个翻译资源文件的程序集。这些都是嵌入式资源。

当我编译程序集时，它会将默认英语放入其 .dll 中。至于其他语言，它正在使用其中的语言创建文件夹，fr、da、de 等。

如果我希望它们被加载到所有其他程序集中的主应用程序拾取，我也必须移动所有这些。当我告诉程序集它们都是嵌入式资源文件时，我想它实际上会嵌入它们！

我现在有一个`AssemblyLoader`加载所有必需的 .dll 的工具，当它无法从当前位置找到它们时，打包它将取决于我是要包含所有语言还是在构建项目之前选择我想要的语言。工作量超出了我的预期，但最终解决了。

大家有什么问题，欢迎提问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-28T14:22:13.890

GetString 的第一个重载`ResourceManager.GetString(string)`使用当前线程的 CurrentUICulture ( `Thread.CurrentThread.CurrentUICulture`)。

参考[MSDN](http://msdn.microsoft.com/en-us/library/d17ax2xk%28v=vs.100%29.aspx)：-

> 返回的资源针对当前线程的 UI 区域性进行本地化，由 CurrentUICulture 属性定义。

在后台线程中，不要假设线程的 CurrentUICulture 与主（或 UI）线程的 CurrentUICulture 相同。

从后台线程访问资源的更好方法是使用以下内容来获取正确的本地化字符串：-

```
var localString = Properties.Resources.ResourceManager.GetString("ResourceKey", CultureInfo.CurrentCulture); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T15:58:35.413

不确定如何实例化 ResourceManager，但是当您调用 ResourceManager.GetString() 时，您可以指定 CultureInfo，它可以帮助您在正确的语言环境中获取字符串。因此，您可以执行以下操作：

```
var string = ResourceManager.GetString("ResourceKey", new CUltureInfo("en-GB")); 
```

这将确保字符串键来自 en-GB 特定的资源文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-27T13:49:47.057

尝试将构建操作更改为“嵌入式资源”我最近在添加泰米尔语资源时遇到了这个问题。花了几个小时后，我发现添加资源文件后错过了这个简单的步骤。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-01T13:58:25.480

我发现动态解决此问题的最简单快捷的方法是获取当前在运行应用程序的操作系统中使用的语言，并调用适当的资源这是完成此操作的代码。

```
string lg = CultureInfo.CurrentCulture.TwoLetterISOLanguageName;
            return resourceManager.GetString(text, new CultureInfo(lg)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-04T10:22:24.380

就我而言，问题出在 resx 文件上。无效的资源字符串在 resx 文件中的格式不正确：

```
<data name="HeaderColumnsCountGreaterThenDataColumnsCountTestData" xml:space="preserve">
  <settings>
    Month   Date    Department
    01.05.2015  01.05.2015  OIR
    01.05.2015  02.05.2015  OIR
  </settings>
</data> 
```

正确格式：

```
<data name="HeaderColumnsCountGreaterThenDataColumnsCountTestData" xml:space="preserve">
  <value>
    Month   Date    Department
    01.05.2015  01.05.2015  OIR
    01.05.2015  02.05.2015  OIR
  </value>
</data> 
```

# android - 如何在图片选择器对话框中添加额外的字段？

> ID：12730691
> 
> 赞同：0
> 
> 时间：2012-10-04T15:30:43.557
> 
> 标签：android, android-intent, android-camera

在我的 android 应用程序中，我允许用户使用以下代码从图库或其他来源中选择图片：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(
    intent, "Select Picture"), PICTURE_CHOOSER); 
```

当用户单击按钮时，会出现一个对话框，用户可以在其中选择应用程序来加载图像（fe、文件管理器或图库）。我可以在该对话框中添加一个额外的按钮，以便用户能够从相机捕获图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:50:27.217

我认为您不能将 Button 添加到 Android 提供的用于选择图片的默认 Intent 中。

但是，您可以创建一个包含两个按钮的**自定义对话框。**一个执行选择图片操作，另一个执行相机。

这是在 Android 中实现 CustomDialog的[教程。](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

因此，通过添加两个按钮，然后将每个按钮与您需要执行的操作相关联，您可以开发您的应用程序。希望能帮助到你！

# javascript - jQuery/JavaScript 循环遍历 json 数据结果

> ID：12730694
> 
> 赞同：2
> 
> 时间：2012-10-04T15:31:15.180
> 
> 标签：javascript, jquery, json

我有一个表单，用户可以在其中从多选选择框 (A) 中选择一个项目。如果该项目未列出，用户可以从另一个输入文本框 (B) 添加它。在 (B) 中输入的值将执行 ajax 调用，该调用会将项目保存到数据库中。保存项目后，将创建一个 json 对象，然后需要使用更新的列表填充 (A)。我有所有这些与选项一起工作。我现在需要包括保存过程是否通过或失败。如果过程通过，那么我需要包含选项，但如果失败，我只需要失败状态。这是我想出的：

```
{
    "process": [{
        "status":"pass" ,
        "message":"The Contributors list has been refreshed to contain the entry you just saved." }
    ],
    "newoptions": [
        {"optionValue":"Item 1" , "optionDisplay":"Item 1"},
        {"optionValue":"Item 2" , "optionDisplay":"Item 2" },
        {"optionValue":"Item 3" , "optionDisplay":"Item 3" }
    ]    
} 
```

这就是我在 .ajax 例程中使用的内容：

```
success: function(j){
    if (j.process.status == 'pass'){
        var options = '';
        for (var i = 0; i < j.newoptions.length; i++) 
            {
                options += '<option value="' + j.newoptions[i].optionValue + '">' + j.newoptions[i].optionDisplay + '</option>';
            }
        $('#misc_userID').val('');  // reset value back to null 
        $("#misc_userID").effect("transfer", { to: $("#group_misc_available") }, 500);  //visual showing item added to select
        $('#group_misc_available').html(options);
    }
    else if (j.status == 'fail'){
        alert(j.process.message);   
    }
} 
```

我没有收到错误，但它也没有处理 j.process.status 所以选择列表（A）没有被刷新..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:33:31.190

你有`array`如此`process`需要访问它`index`

```
if (j.process.status == 'pass'){ 
```

将会

```
if (j.process[0].status == 'pass'){ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T15:33:39.530

您没有正确访问您的 json 数据。尝试这个

```
if (j.process[0].status == 'pass'){ 
```

# c++ - C++ 将文件权限添加到 Zip 文件

> ID：12730698
> 
> 赞同：1
> 
> 时间：2012-10-04T15:31:25.580
> 
> 标签：c++, zip, file-permissions, zlib

我正在使用 C++ 开发一个压缩程序。我想添加安全描述符，以便在压缩时保留我的文件权限。我正在使用 Zlib 的 Minizip 压缩文件，我知道 Minizip 没有保存文件权限的能力。我认为我可能必须手动将安全描述添加到额外的字段中。

如何获得文件的安全权限？

如何格式化 zip 文件的安全描述符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:24:01.387

查看[Info-ZIP 的 zip 和 unzip](http://www.info-zip.org/)实用程序。它们为各种操作系统提供比基本 minizip 功能更广泛的支持。

自己动手，可以参考[Info-ZIP appnote](http://www.info-zip.org/doc/appnote-20040908-iz.zip)。Windows 额外字段在那里定义，复制到这里：

```
 -PKWARE Win95/WinNT Extra Field (0x000a):
          =======================================

          The following description covers PKWARE's "NTFS" attributes
          "extra" block, introduced with the release of PKZIP 2.50 for
          Windows. (Last Revision 20001118)

          (Note: At this time the Mtime, Atime and Ctime values may
          be used on any WIN32 system.)
         [Info-ZIP note: In the current implementations, this field has
          a fixed total data size of 32 bytes and is only stored as local
          extra field.]

          Value         Size        Description
          -----         ----        -----------
  (NTFS)  0x000a        Short       Tag for this "extra" block type
          TSize         Short       Total Data Size for this block
          Reserved      Long        for future use
          Tag1          Short       NTFS attribute tag value #1
          Size1         Short       Size of attribute #1, in bytes
          (var.)        SubSize1    Attribute #1 data
          .
          .
          .
          TagN          Short       NTFS attribute tag value #N
          SizeN         Short       Size of attribute #N, in bytes
          (var.)        SubSizeN    Attribute #N data

          For NTFS, values for Tag1 through TagN are as follows:
          (currently only one set of attributes is defined for NTFS)

          Tag        Size       Description
          -----      ----       -----------
          0x0001     2 bytes    Tag for attribute #1
          Size1      2 bytes    Size of attribute #1, in bytes (24)
          Mtime      8 bytes    64-bit NTFS file last modification time
          Atime      8 bytes    64-bit NTFS file last access time
          Ctime      8 bytes    64-bit NTFS file creation time

          The total length for this block is 28 bytes, resulting in a
          fixed size value of 32 for the TSize field of the NTFS block.

          The NTFS filetimes are 64-bit unsigned integers, stored in Intel
          (least significant byte first) byte order. They determine the
          number of 1.0E-07 seconds (1/10th microseconds!) past WinNT "epoch",
          which is "01-Jan-1601 00:00:00 UTC". 
```

# android - 在滚动之前无法选择列表中的项目

> ID：12730700
> 
> 赞同：0
> 
> 时间：2012-10-04T15:31:30.010
> 
> 标签：android, android-layout

我在扩展`ListActivity`. 在我滚动列表之前，似乎无法“单击”列表中的项目。稍微滚动列表后，“点击”工作正常。如果列表根本不可滚动（没有足够的项目等），那么一切都会正常运行。

由于活动扩展`ListActivity`，我只是覆盖`onListItemClick`：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id)
{
   Log.e(TAG, "Click fired");
} 
```

列表中的行是由自定义 XML 定义的，在阅读了此处几乎所有的帖子后，我认为它与可聚焦元素有关，但我似乎无法让它发挥作用。从下面的 XML 列表中可以看到，所有项目都有`focusable="false"`，但这没有帮助。

我也尝试了所有选项`android:descentFocusability`——但没有一个能正常工作。

这个问题在 Froyo 的所有 Android 版本上都很明显 --> ICS

**编辑**

我已经确定如果我删除附加到同一列表的 onScroll 侦听器，这个问题就会消失。但是，我真的需要它，并且我已经将日志信息放在两者中`onScroll`，`onScrollStateChanged`并且没有显示任何信息（例如，滚动也没有被触发。）这是一个已知的冲突吗？

**相关活动的布局 XML：**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:focusable="false"
    android:focusableInTouchMode="false">
   <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:focusable="false"
        android:focusableInTouchMode="false">
     <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Search Results: "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_gravity="left" 
            android:focusable="false"
            android:focusableInTouchMode="false" />
         <TextView android:id="@+id/query_type"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="context sensitive"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_gravity="right" 
            android:textStyle="italic"
            android:focusable="false"
        android:focusableInTouchMode="false" />
       </FrameLayout>
       <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:minHeight="1dip"
        android:background='@color/grey'
        android:focusable="false"
        android:focusableInTouchMode="false" />
<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:cacheColorHint="#00000000"
    android:descendantFocusability="blocksDescendants" />
<TextView
    android:id="@+id/prodcutdb_results_empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="5dip"
    android:paddingTop='4dip'
    android:text="No results"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:visibility="gone"/>
</LinearLayout> 
```

**自定义列表项 XML：（**在此 XML 中添加可聚焦标签`LinearLayout`无效）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:orientation="horizontal"
    android:paddingRight="4dip"
    android:cacheColorHint="#00000000">
<TextView 
    android:id="@+id/list_item_label"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:paddingLeft="20dip"
    android:textSize="16dp" 
    android:layout_weight="1"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false" />
    <view  
        android:layout_width="wrap_content"
        android:id="@+id/list_item_image"
        android:layout_height="fill_parent"
        android:src="@drawable/right"
        android:maxHeight="50dp"
        android:maxWidth="50dp"
        android:layout_gravity="right"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:48:15.597

在您的自定义列表项 XML 中，您是否打算将第三个标签设为 ImageView？我不确定这是否是导致您的问题的原因，但如果 sdk 发现您的 XML 格式不正确，则可能会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:47:15.920

你应该把你的列表放在一个普通的 LayoutView 中（不要使用滚动视图），它可以出现并使你的其余布局消失，反之亦然，这样列表就可以拥有完整的屏幕。这就是它对我有用的方式。

编辑我这样使用它

```
 <RelativeLayout
    android:id="@+id/NewsListLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" android:visibility="gone">

    <ListView
        android:id="@+id/mylistView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:16:17.127

为了简短起见——没有任何效果。我为每个自定义视图添加了一个 onClick 侦听器。

# android - 尝试填充 mapView 时发出警告

> ID：12730701
> 
> 赞同：0
> 
> 时间：2012-10-04T15:31:30.753
> 
> 标签：android, google-maps, android-mapview

我正在尝试构建一个在地图视图中显示位置的 android 应用程序。这是我的代码：

```
import android.os.Bundle;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.overblog.R;

public class EditMapSectionActivity extends MapActivity{

    private MapView _mapView;

    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.edit_section_map_activity);

        _mapView = (MapView) findViewById(R.id.map_view);

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/fragment_background_color" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="@dimen/scroll_view_padding_left"
        android:paddingRight="@dimen/scroll_view_padding_right"
        android:paddingTop="@dimen/scroll_view_padding_top" >

        <EditText
            android:id="@+id/edit_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/search_for_location" />

        <com.google.android.maps.MapView
            android:id="@+id/map_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="@dimen/section_padding_top"
            android:apiKey="0t8UnajIfX1hZH27u-DCH40YuglmW1-1U51_wQA"
            android:background="@drawable/default_image_background"
            android:clickable="true" />

        <CheckedTextView
            android:id="@+id/check_box"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:checkMark="?android:attr/listChoiceIndicatorMultiple"
            android:gravity="center_vertical"
            android:minHeight="?android:attr/listPreferredItemHeight"
            android:text="@string/section_cover_picture" >
        </CheckedTextView>
    </LinearLayout>

</ScrollView> 
```

我确信我的调试 apiKey 因为我在其他应用程序中使用它，我还确定我在 manifest.xml 中添加了互联网权限

当我运行我的应用程序时，我的 mapView 不会加载地图。

我检查了我的 logcat，我收到了这个警告：

```
10-04 17:33:10.511: W/MapActivity(21034): Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@40c5edd0 
```

有谁知道这个警告是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:37:39.880

我的建议是删除所有额外的东西，验证它是否在最简单的状态下工作，然后如果你需要在你的 xml 中声明背景、边距等，然后一次插入一个并运行你的应用程序。这将允许您缩小空白地图和警告消息的罪魁祸首。

假设您有一个有效的 API 密钥，我知道以下代码有效：

**xml端：**

```
<com.google.android.maps.MapView
        android:id="@+id/map_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="InsertYourAPIKeyHERE"
        android:clickable="true"
        android:state_enabled="true" /> 
```

**java端：**

```
public class EditMapSectionActivity extends MapActivity {

    private MapView _mapView;

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.edit_section_map_activity);

        _mapView = (MapView) findViewById(R.id.map_view);

    }
} 
```

**清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package=""
    android:versionCode=""
    android:versionName="" >

    <!-- Network Permissions -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:alwaysRetainTaskState="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".EditMapSectionActivity"
            android:label="@string/app_name"
            android:noHistory="false" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# java - 如何以编程方式访问 JTA 事务？

> ID：12730708
> 
> 赞同：0
> 
> 时间：2012-10-04T15:31:41.067
> 
> 标签：java, jakarta-ee, jta

到目前为止，我看到的唯一的**JTA**`@TransactionAttribute`接口是注释。我在 Oracle Java EE 教程或使用搜索引擎中没有发现任何可用的东西......

我想与容器提供的事务交互 - 以编程方式检查是否存在当前事务 - 以及它是否是嵌套事务。

这是可能吗？

谢谢你。

编辑：再次澄清 - 我对容器管理的 JTA 事务感兴趣，而不是用户/Bean 控制的事务。我不想创建事务，只是查看/控制容器生成的事务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:40:23.970

JTA 是一个 API——它不提供实现。有关特定信息，您应该解决有关使用实现的文档，例如[http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html](http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html)用于 Spring 管理或[https://community.jboss.org/ wiki/HowToUseJBossJTAStandaloneTransactionManager](https://community.jboss.org/wiki/HowToUseJBossJTAStandaloneTransactionManager) for Hibernate (JBoss)

# jquery - jQuery 显示/隐藏在 IE 上不起作用

> ID：12730710
> 
> 赞同：2
> 
> 时间：2012-10-04T15:31:44.780
> 
> 标签：jquery, show, show-hide

我制作了简单的 jQuery 脚本，当鼠标悬停在另一个 div（图像）上时应该显示 div 元素。

这是我的代码：

```
jQuery(document).ready(function(){
    jQuery("#slider").hover(function(){
        jQuery("#slider .hovercontent").fadeTo('fast', 1);
    },function(){
        jQuery('#slider .hovercontent').fadeTo('slow', 0);
    });
}); 
```

这在 FF、Chrome、Safari 和 Opera 上完美运行，但在`#slider`div 中使用 IE8 或 9 时图像消失。怎么了？试图为此搜索答案，但没有运气。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:26:49.300

也许你应该尝试淡入淡出或显示和隐藏而不是淡入淡出。

# command-line - 从命令行运行 UIAutomation 仪器会导致 NSInvalidArgumentException

> ID：12730712
> 
> 赞同：3
> 
> 时间：2012-10-04T15:32:01.347
> 
> 标签：command-line, instruments, xcode4.5, ios-ui-automation, ios6

这是正在发生的事情：

我在 Xcode 4.5.1 中创建了一个全新的“单一视图”应用程序，使用以下命令在命令行上构建它：

```
xcodebuild -sdk iphonesimulator6.0 clean build CONFIGURATION_BUILD_DIR=/tmp/AutomationBugRepro 
```

[这将导致此输出](https://gist.github.com/3834304)和成功构建。现在，当我使用 运行 UIAutomation 脚本时`instruments`，出现以下错误：

```
2012-10-04 11:27:33.930 instruments[4707:f07] Automation Instrument ran into an exception while trying to run the script.  NSInvalidArgumentException
2012-10-04 15:27:33 +0000 Fail: An error occurred while trying to run the script. 
```

而我用来运行它的命令：

```
instruments -t /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate -D ./trace /tmp/AutomationBugRepro/AutomationBugRepro2.app -e UIARESULTSPATH ./automation_results -e UIASCRIPT automation.js 
```

`automation.js`仅包含这一行：

```
UIALogger.logMessage("Testing UIAutomation from the command line"); 
```

尝试在仪器 GUI 中执行任何自动化操作时，我也遇到了一个未指定的错误，我在这个苹果开发论坛帖子中详细说明了这一点：

[https://devforums.apple.com/thread/169338](https://devforums.apple.com/thread/169338)

任何帮助将不胜感激，谢谢。

# c# - 一种引发事件以便其订阅者同时运行的方法？

> ID：12730713
> 
> 赞同：0
> 
> 时间：2012-10-04T15:32:05.570
> 
> 标签：c#, .net, events, asynchronous, .net-4.5

> **可能重复：**
> [并行事件处理程序](https://stackoverflow.com/questions/4302090/parallel-eventhandler)

如果我有这样的课程：

```
class Foo
{
    public void Fire() { if (Fired != null) Fired.Invoke(EventArgs.Empty); }
    public event EventHandler Fired;
} 
```

如果我向`Tested`事件添加多个方法：

```
var foo= new Foo();
foo.Tested += FirstMethod;
foo.Tested += SecondMethod;
foo.Fire(); 
```

我可以做些什么来调用`FirstMethod`和`SecondMethod`并行吗？

# ruby-on-rails-3 - redis欧姆慢性能

> ID：12730716
> 
> 赞同：0
> 
> 时间：2012-10-04T15:32:13.623
> 
> 标签：ruby-on-rails-3, performance, redis, ohm

在过去的几天里，我们一直在摸索，试图理解为什么在我们的 Rails 项目中使用 redis/ohm 时有些事情看起来有点太慢了。

它的要点是对 ohm/redis 的一些请求大约需要 100-200 毫秒，考虑到我们对超快性能的高期望，这似乎相当高。

我们正在运行的命令如下所示：

`Stats::TermStats.find(term_slug: 'term_slug', user_id: 123).to_a`

在我们看来，我们并没有做任何极其复杂或疯狂的事情。到目前为止，我们对这个单一命令的分析（使用[miniprofiler](https://github.com/SamSaffron/MiniProfiler/tree/master/Ruby)）揭示了以下内容：

*   其中一些调用在大约 2-4 毫秒内完成（这是好的/好/坏的吗？）
*   然而，有些需要 100-200 毫秒（这肯定感觉很糟糕）
*   在 redis-client 上使用`slowlog get`不会在 redis 上显示任何特别慢的东西。大多数 redis 命令在不到 20**微秒**（0.02 毫秒）内完成
*   使用 rails 控制台并在循环中使用完全相同的 slug/id 运行快速基准测试，观察到相同的行为，即其中一些（相同的）请求似乎比大多数其他请求花费的时间要长得多

我们的 redis 配置几乎是开箱即用的，基本上没有任何调整。在测试期间，服务器没有做太多其他事情。

有什么建议可以提高性能/测试什么会减慢redis和ohm/rails之间的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:47:14.687

万一有人感兴趣，我们似乎找到了这个问题的原因，甚至找到了解决方案

TL;DR：[使用hiredis + 调整ruby GC 参数](http://gist.io/3993155)。

# c# - 如何将数组/列表中的多行数据插入 SQL Server（DataSet、DataTable）

> ID：12730717
> 
> 赞同：0
> 
> 时间：2012-10-04T15:32:13.723
> 
> 标签：c#, sql-server, visual-studio-2008, .net-3.5, dataset

在将数据从变量、数组、列表传输到我的 SQL Server 时，我几乎不需要任何帮助。

我的 SQL 还不错，但我不熟悉 DataSet、DataTable 对象。

我的数据现在存储在字符串列表（列表）中。该列表中的每个字符串都与此类似：

> QWERTY,19920604,0.91,0.35,0.34,0.35,343840

这样的行大约有 900000 行，但大导入只会发生一次。

SQL Server 中的目标数据类型：

```
BIGINT (primary key, im not inserting it, its identity(1,1))
VARCHAR(10), 
DATE, 
DECIMAL(10,2), 
DECIMAL(10,2), 
DECIMAL(10,2), 
DECIMAL(10,2), 
INT 
```

1.  如何将该数据转换为 SQL Server 数据类型？

2.  如何将该数据插入 SQL Server？我还需要插入之间的一些进度条更新。

我可以使用老式 SQL 命令来做到这一点，但我终于学会了更现代的方式，**通过使用 DataTable**对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:36:32.333

你可以使用 sqlbulkcopy，这里有一些例子：http: [//msdn.microsoft.com/en-us/library/7ek5da1a.aspx](http://msdn.microsoft.com/en-us/library/7ek5da1a.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:08:53.420

我刚开始转向实体框架，它大大降低了我的代码复杂性。为此，我通过以下步骤使用实体框架添加了一个新数据源：

1.  添加新数据源
2.  在数据源配置向导中，选择数据库
3.  选择实体数据模型
4.  选择从数据库生成
5.  创建新连接
6.  选择您的表格并单击完成

编译您的项目，以便您可以使用您的对象，然后在您的代码中，您可以通过以下方式创建您的访问权限：

`var entity = new DatabaseEntity();`

在实体中，您现在将看到一系列表格和各种使用方法。要执行，您可以使用 linq，例如：

```
var order = new entity.fulfilled_shipments_data
                    {
                         addedCustomer = 0,
                         addedFulfillment = 0,
                         addedInvoice = 0,
                          ...
                     }
entity.fulfilled_shipments_data.AddObject(order);
entity.SaveChanges(); 
```

请记住，您的分配现在可以是您拥有的任何对象，并且还可能包括对其他方法的调用（例如，`price = Convert.ToDecimal(price),`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:53:24.127

使用 ADO.NET，可能最简单和最安全的方法是使用循环：

```
private void InsertList(IEnumerable<String> list)
{
    String sql = "INSERT INTO dbo.Table VALUES(@varcharCol,@dateCol,@decCol1,@decCol2,@decCol3,@decCol4,@intCol);";
    using (var con = new SqlConnection(Properties.Settings.Default.ConnectionString))
    {
        con.Open();
        foreach (String str in list)
        {
            String[] fields = str.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
            if (fields.Length == 7)
            { 
                DateTime dateCol;
                if (DateTime.TryParseExact(fields[1], "yyyyMMdd", null, System.Globalization.DateTimeStyles.None, out dateCol))
                {
                    decimal d1, d2, d3, d4;
                    int i1;
                    if(decimal.TryParse(fields[2], out d1)
                        && decimal.TryParse(fields[3], out d2)
                        && decimal.TryParse(fields[4], out d3)
                        && decimal.TryParse(fields[5], out d4)
                        && int.TryParse(fields[6], out i1))
                    {
                        using(var cmd = new SqlCommand(sql, con))
                        {
                            cmd.Parameters.AddWithValue("@varcharCol", fields[0]);
                            cmd.Parameters.AddWithValue("@dateCol", dateCol);
                            cmd.Parameters.AddWithValue("@decCol1", d1);
                            cmd.Parameters.AddWithValue("@decCol2", d2);
                            cmd.Parameters.AddWithValue("@decCol3", d3);
                            cmd.Parameters.AddWithValue("@decCol4", d4);
                            cmd.Parameters.AddWithValue("@intCol", i1);
                            int inserted = cmd.ExecuteNonQuery(); // should be 1
                        }
                    }
                }
            }
        }
    }
} 
```

您应该添加日志记录（解析问题）和异常处理（连接问题）。

这种方法还可以轻松添加进度条。因此，您可以使用 a [`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)which update a `Progressbar`via [`ReportProgress`](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)。

这是一个教程： http: [//www.dotnetperls.com/progressbar](http://www.dotnetperls.com/progressbar)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:35:45.057

我做了这样的事情：

```
foreach (string currentrow in buffer) // List<string> buffer - contains csv data
{
                // table name is Import
                dataset.ImportRow row = dataset.Import.NewImportRow();
                string[] fields = new string[7];

                // Field names
                // <Nm>,<Date>,<Open>,<High>,<Low>,<Close>,<Vol>
                fields = currentrow.Split(',');

                // ticker
                row.Nm = fields[0];

                DateTime data;
                DateTime.TryParseExact(fields[1], "yyyyMMdd", null, System.Globalization.DateTimeStyles.None, out data);
                row.Date = data;

                decimal open;
                Decimal.TryParse(fields[2], out open);
                row.Open = open;

                decimal high;
                Decimal.TryParse(fields[3], out high);
                row.High = high;

                decimal low;
                Decimal.TryParse(fields[4], out low);
                row.Low = low;

                decimal close;
                Decimal.TryParse(fields[5], out close);
                row.Close = close;

                int vol;
                Int32.TryParse(fields[6], out vol);
                row.Vol = vol;

                dataset.Import.AddImportRow(row);

            }

        importTableAdapter.Update(dataset);
        MessageBox.Show("Done"); 
```

它可以工作并且看起来很优雅。我必须处理异常。

# java - 通过反射在不同包中的类上调用公共方法

> ID：12730721
> 
> 赞同：0
> 
> 时间：2012-10-04T15:32:54.013
> 
> 标签：java, reflection, class-visibility

我遇到了以下问题。

我在包中有两个不同的包`a`我想在包中调用接口的实现方法，`b`但实现类具有包可见性。

所以一个简化的代码如下所示：

```
package b;

public final class Factory {
    public static B createB() {
        return new ImplB();
    }

    public interface B {
        void method();
    }

    static class ImplB implements B {
        public void method() {
            System.out.println("Called");
        }
    }
} 
```

和调用者：

```
package a;

import java.lang.reflect.Method;
import b.Factory;
import b.Factory.B;

public final class Invoker {
    private static final Class<?>[] EMPTY_CLASS_ARRAY = new Class<?>[] {};
    private static final Object[] EMPTY_OBJECT_ARRAY = new Object[] {};

    public static void main(String... args) throws Exception {
        final B b = Factory.createB();
        b.method();

        final Method method = b.getClass().getDeclaredMethod("method", EMPTY_CLASS_ARRAY);
        method.invoke(b, EMPTY_OBJECT_ARRAY);
    }
} 
```

当我启动程序时，它按预期打印`Called`并抛出异常，因为包可见性禁止调用发现的方法。

所以我的问题是有什么办法可以解决这个问题？我是否遗漏了 Java 文档中的某些内容，或者这根本不可能，尽管无需反射就可以简单地调用已实现的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:36:22.607

由于类具有包可见性，因此其方法的可见性实际上是包级别，而不是您想象的公共。因此，您必须`method.setAccessible(true)`在方法调用之前调用：

```
 final Method method = b.getClass().getDeclaredMethod("method", EMPTY_CLASS_ARRAY);
 method.setAccessible(true);
 method.invoke(b, EMPTY_OBJECT_ARRAY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:35:22.347

我发现了。我需要`getDeclaredMethod`在实现的接口上调用，而不是在类上。

例子：

```
final Method method = B.class.getDeclaredMethod("method", EMPTY_CLASS_ARRAY);
method.invoke(b, EMPTY_OBJECT_ARRAY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:40:24.463

请参阅[setAccessible](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29)的文档。不过，SecurityPolicy 可能会阻止您访问它。

但不清楚你是否需要反思。多态性的好处之一是客户端可以调用`B.method()`而无需访问（甚至担心）实现接口的具体类。

# asp.net - ModalPopupExtender 覆盖

> ID：12730729
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:33:16.977
> 
> 标签：asp.net, css, ajaxcontroltoolkit, modalpopupextender

全部，

记住：我的覆盖使用绝对定位。

当我的自动建议菜单位于`ModalPopup`（使用 Ajax 控制工具包的`ModalPopupExtender`）内部时，我正在尝试修复它的覆盖问题。当用户键入时，覆盖出现在弹出窗口下方，但我希望它出现在它上面。

所以简单的事情是改变`z-index`我的自动建议菜单覆盖，但覆盖仍然出现在模式弹出窗口下方。所以我打开了它的源代码`ModalPopupExtender`并查看了它`z-index`，并将我的使用设置为更高（他们使用的是 10,000；我使用了 20,000）。我以为这会解决它，但无济于事；我的叠加层仍在弹出窗口下方。当我的叠加层高于他们的叠加层`div`时，怎么会这样？`z-index``z-index`

我将不胜感激这方面的任何帮助。

经过进一步调查，我认为这条线导致模态弹出窗口出现在所有内容之前：

```
this._foregroundElement.parentNode.appendChild(this._backgroundElement); 
```

“前景元素”是弹出窗口，而背景元素是我认为跨越整个页面`div`的临时元素。`div`

好的，因为我无法更改这一点，有什么建议可以解决我`textbox`在模式弹出窗口中附加到 a 的叠加层吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:42:22.287

问题已解决。

问题的原因是用于显示具有低 z-index 值的叠加层的 IFRAME。

# ios - 按钮、序列和 If/Else 语句

> ID：12730731
> 
> 赞同：0
> 
> 时间：2012-10-04T15:33:27.227
> 
> 标签：ios, xcode, button, segue

我有一个按钮，按下时将确定输入的文本是否等于字符串。如果是，那么它将转换到下一个视图。如果不正确，它会将标签文本更改为错误消息。它不工作。有人可以批评并让我知道我做错了什么吗？这是我的代码： - (IBAction)submitButton:(UIButton *)sender {

```
if ([_pinTextField.text isEqualToString:@"1234"]) {
    _errorLabel.text = @"PIN Accepted";
    sleep(1);
    [self performSegueWithIdentifier:@"ShowDetail" sender:self];
}

else _errorLabel.text = @"Incorrect PIN"; 
```

}

无论 if else 语句为真，segue 都会发生。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:43:50.093

如果调试器显示它不执行...

```
[self performSegueWithIdentifier:@"ShowDetail" sender:self]; 
```

...线，那么它可能是故事板中定义的segue开头的问题。（如果你想在代码中触发它，它应该从视图控制器而不是按钮开始。）

（如果该行**确实**被执行，那么`isEqualToString:`测试就有问题......但这看起来不太可能。）

# java - Java Struts 中 HTML 下拉列表的动态数量

> ID：12730740
> 
> 赞同：1
> 
> 时间：2012-10-04T15:33:47.033
> 
> 标签：java, html, struts

我有这个表单，我想在其上创建动态数量的下拉列表。我有一个未分类的应用程序列表，我希望每个应用程序都有自己的下拉列表来选择其类别。我不确定如何将唯一数据传递给服务器。每个下拉选项都是相同的。

```
<html:form action="/CategorizeApps.do">
    <h3>Uncategorized</h3>
    <br/>
    Categorize each application using the dropdown menu then click categorize.<br/>
    <table class="list">
        <thead>
            <tr class="controls">
                <td><input type="submit" name="btnAction" value="Categorize"/></td>
            </tr>
            <tr class="fields">
                <td>ID</td>
                <td>Name</td>
                <td></td>
            </tr>
        </thead>
        <tbody>
            <logic:iterate id="uncat" name="appsUncat" scope="session">
                <tr class="hlist">
                    <td><bean:write property="id" name="uncat" scope="page"/></td>
                    <td><bean:write property="name" name="uncat" scope="page"/></td>
                    <td>
                        <select id="category" name="category">
                            <logic:iterate id="categories" name="Categories" scope="session">
                                <option value="<bean:write name="categories" property="id" scope="page"/>"><bean:write name="categories" property="name" scope="page"/></option>
                            </logic:iterate>
                        </select>
                    </td>
                </tr>
            </logic:iterate>
        </tbody>
    </table>
</html:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:53:42.167

一旦您选择了该值，它将传递给 Form(category) 并将其设置在 Category 中。它由自己的struts完成。但是您应该对值和选项使用相同的名称或 ID。或设置您的下拉值以选择值。

# cron - RRDTool：无法弄清楚如何更新数据库

> ID：12730741
> 
> 赞同：2
> 
> 时间：2012-10-04T15:33:46.287
> 
> 标签：cron, rrdtool, rrd

我正在尝试设置 RRD，但我似乎无法让数据库存储任何值。

以下是我创建数据库的方式：

```
rrdtool create test.rrd -s 60 \
DS:local_alloc_procs:GAUGE:10:0:U \
RRA:AVERAGE:0.5:1:10080 
```

我有一个脚本，cron 每分钟运行一次来​​更新数据库：

```
* * * * * /home/A01113531/Documents/scripts/Cluster/rrdtool/updatescript 
```

更新脚本：

```
#!/bin/bash

export LD_LIBRARY_PATH=/home/A01113531/rrdtool/lib:/rc/tools/free/redhat_6_x86_64/moab-7.0.1/lib:/rc/tools/free/redhat_6_x86_64/torque-4.1.2/lib:/rc/tools/free/redhat_6_x86_64/pbs-drmaa-1.0.12/lib:$LD_LIBRARY_PATH
export PATH=/home/A01113531/rrdtool/bin:/rc/tools/free/redhat_6_x86_64/moab-7.0.1/bin:/rc/tools/free/redhat_6_x86_64/torque-4.1.2/bin:/rc/tools/free/redhat_6_x86_64/pbs-drmaa-1.0.12/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:$PATH
export MOABHOMEDIR=/rc/moab/server

RRDTOOL='/home/A01113531/rrdtool/bin/rrdtool'
FILE='/home/A01113531/Documents/scripts/Cluster/rrdtool/test.rrd'
COMMAND=$(/home/A01113531/Documents/scripts/Cluster/rrdtool/parser.py -t cluster | grep LocalAllocProcs | awk '{print $2}')
$RRDTOOL update $FILE N:$COMMAND 
```

这是 rrdtool 信息输出的输出：

```
filename = "test.rrd"
rrd_version = "0003"
step = 60
last_update = 1349364541
header_size = 584
ds[local_alloc_procs].index = 0
ds[local_alloc_procs].type = "GAUGE"
ds[local_alloc_procs].minimal_heartbeat = 10
ds[local_alloc_procs].min = 0.0000000000e+00
ds[local_alloc_procs].max = NaN
ds[local_alloc_procs].last_ds = "1217"
ds[local_alloc_procs].value = NaN
ds[local_alloc_procs].unknown_sec = 1
rra[0].cf = "AVERAGE"
rra[0].rows = 10080
rra[0].cur_row = 3827
rra[0].pdp_per_row = 1
rra[0].xff = 5.0000000000e-01
rra[0].cdp_prep[0].value = NaN
rra[0].cdp_prep[0].unknown_datapoints = 0 
```

从这里可以看出，last_ds 得到了一个有效数字，但由于某种原因，值没有从 NaN 更改。

我已经坚持了一段时间了，非常感谢任何帮助或提示。

丹佛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:01:03.463

我刚刚遇到了这个确切的问题，几乎把我所有的头发都扯掉了试图解决它。

似乎 rrd 在不期望数据的时候接受数据非常有趣。在我的情况下，我将步长设置为 3600（每小时），但心跳设置为 10 秒。基本上，如果 rrd 在一小时的前 10 秒内没有得到更新，它将忽略我的更新。

在您的情况下，您似乎每 60 秒有一步，但心跳为 10 秒。尝试将您的心跳更改为 60 秒，看看它们是否有帮助。

# java - 无法创建 ArrayList 的数组 elements, passing list of Objects as a parameter This is my code and it works: Value[] params2 = {val}; Class clazz = Class.forName("package." + className); Method[] thisMethod = clazz. 问问题 问问题 2012-10-04T15:33:51.267 117 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. This is my code and it works: Value[] params2 = {val}; Class clazz = Class.forName("package." + className); Method[] thisMethod = clazz.getMethods(); thisMethod[0].invoke(clazz.newInstance(), new Object[]{params2}); However when I try to send list of 'val' objects as a parameter, List<value>[] params2 = {valList}; I get: 'Cannot create a generic array of List error' How can I pass list of val objects as a paramter? You need to pass an array of arguments to invoke a method reflectively, not a List of arguments. If you have a List, use its toArray() method. java 4 2 回答 2 This answer is useful 0 List<value>[] means array where members of this array are lists. Ie. {new ArrayList<value>()} is the instance. If your methods takes as an argument a list, this is the way. Otherwise you should convert the list of params to array, because that is how the Java reflection API was designed. 于 2012-10-04T16:15:31.670 回答 This answer is useful 0 您需要传递参数数组来反射调用方法，而不是List参数。如果你有一个List，使用它的toArray()方法。 于 2012-10-04T15:45:33.557 回答 Related 2 xml - 使用 xml web 服务并解析它 2 c - 当 linux 内核将页面写回内存映射文件时捕获？ 1 javascript - 在 EmberJS 路由器中使用绑定？ 0 php - 使用变量作为参数调用 $this->lang->line (CodeIgniter) 2 android - 编辑文本字段所需的建议 3 facebook - Facebook FQL 无法正常用于照片/相册 3 c# - 减少实例化对象数量的策略 1 silverlight - 模块化 Silverlight 应用程序的重组问题 2 linq - 使用 Linq 检查列表中间是否包含空值 1 internet-explorer - 子域上的 ssl 自签名通配符证书 - Internet Explorer 和 chrome 无法显示页面 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</value></value></value>

> ID：12730742
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java

This is my code and it works:

```
Value[] params2 = {val};
Class<?> clazz = Class.forName("package." + className);
Method[] thisMethod = clazz.getMethods();
thisMethod[0].invoke(clazz.newInstance(), new Object[]{params2}); 
```

However when I try to send list of 'val' objects as a parameter,

```
List<Value>[] params2 = {valList}; 
```

I get: 'Cannot create a generic array of List error'

How can I pass list of val objects as a paramter?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:15:31.670

`List<Value>[]` means array where members of this array are lists. Ie. `{new ArrayList<Value>()}` is the instance. If your methods takes as an argument a list, this is the way. Otherwise you should convert the list of params to array, because that is how the Java reflection API was designed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:45:33.557

您需要传递参数数组来反射调用方法，而不是`List`参数。如果你有一个`List`，使用它的`toArray()`方法。

# jboss - 从 JBoss 调用 Webservice 客户端的异常

> ID：12730743
> 
> 赞同：2
> 
> 时间：2012-10-04T15:33:52.703
> 
> 标签：jboss, jax-ws, jdk1.6, atg

我在使用最新的 jaxws-ri 创建的 Web 服务时遇到问题。我为 SVS Web 服务 API 创建了一个客户端。

我正在 ATG 10.0.3/JBoss 5.1 EA/JDK 1.6_22/RedHat 5.4 下部署这个 Web 服务客户端。我创建了一个[自我证书](https://community.jboss.org/wiki/SSLSetup)。

当我以独立模式（未部署到 JBoss）运行客户端时，它工作得很好。

现在在服务器下运行，我得到以下堆栈跟踪，此时我不确定问题是什么。我已经联系了供应商，看看他们是否看到我敲门，以确定它是否会死在我的尽头

```
10:37:36,780 WARN  [WSDL11Reader] UsingAddressing extensibility element not supported yet. 
```

和

```
 10:37:40,074 ERROR [CommonClient] Exception caught while (preparing for) performing the invocation: 
java.io.IOException: Could not transmit message
        at org.jboss.ws.core.client.HTTPRemotingConnection.invoke(HTTPRemotingConnection.java:253)
        at org.jboss.ws.core.client.SOAPProtocolConnectionHTTP.invoke(SOAPProtocolConnectionHTTP.java:71)
        at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:360)
        at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:231)
        at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:171)
        at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:157)
        at $Proxy153.balanceInquiry(Unknown Source)
        at com.scvl.giftcard.SVSGiftCardService.balanceInquiry(SVSGiftCardService.java:87)
        at com.scvl.giftcard.GiftCardBalanceInquiryFormHandler.handleBalanceInquiry(GiftCardBalanceInquiryFormHandler.java:65)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at atg.droplet.EventSender.sendEvent(EventSender.java:582)
        at atg.droplet.FormTag.doSendEvents(FormTag.java:800)
        at atg.droplet.FormTag.sendEvents(FormTag.java:649)
        at atg.droplet.DropletEventServlet.sendEvents(DropletEventServlet.java:523)
        at atg.droplet.DropletEventServlet.service(DropletEventServlet.java:550)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.commerce.order.CommerceCommandServlet.service(CommerceCommandServlet.java:128)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.commerce.promotion.PromotionServlet.service(PromotionServlet.java:191)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.AccessControlServlet.service(AccessControlServlet.java:655)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.sessionsaver.SessionSaverServlet.service(SessionSaverServlet.java:2425)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.PageEventTriggerPipelineServlet.service(PageEventTriggerPipelineServlet.java:169)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.multisite.SiteSessionEventTriggerPipelineServlet.service(SiteSessionEventTriggerPipelineServlet.java:139)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.SessionEventTrigger.service(SessionEventTrigger.java:477)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.ProfilePropertyServlet.service(ProfilePropertyServlet.java:208)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.search.servlet.SearchClickThroughServlet.service(SearchClickThroughServlet.java:415)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.ProfileRequestServlet.service(ProfileRequestServlet.java:437)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.projects.store.servlet.pipeline.ProtocolSwitchServlet.service(ProtocolSwitchServlet.java:290)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.ondemand.servlet.pipeline.NetscalerServlet.service(NetscalerServlet.java:86)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.DynamoPipelineServlet.service(DynamoPipelineServlet.java:469)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.URLArgumentPipelineServlet.service(URLArgumentPipelineServlet.java:280)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.PathAuthenticationPipelineServlet.service(PathAuthenticationPipelineServlet.java:370)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.sso.PassportServlet.service(PassportServlet.java:554)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.security.ThreadUserBinderServlet.service(ThreadUserBinderServlet.java:91)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.dtm.TransactionPipelineServlet.service(TransactionPipelineServlet.java:212)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.multisite.SiteContextPipelineServlet.service(SiteContextPipelineServlet.java:383)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.HeadPipelineServlet.passRequest(HeadPipelineServlet.java:1174)
        at atg.servlet.pipeline.HeadPipelineServlet.service(HeadPipelineServlet.java:857)
        at atg.servlet.pipeline.PipelineableServletImpl.service(PipelineableServletImpl.java:250)
        at atg.filter.dspjsp.PageFilter.doFilter(PageFilter.java:263)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:183)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:95)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:451)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.jboss.remoting.CannotConnectException: Can not connect http client invoker after 1 attempt(s)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.makeInvocation(HTTPClientInvoker.java:250)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.transport(HTTPClientInvoker.java:162)
        at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:167)
        at org.jboss.remoting.Client.invoke(Client.java:2034)
        at org.jboss.remoting.Client.invoke(Client.java:877)
        at org.jboss.ws.core.client.HTTPRemotingConnection.invoke(HTTPRemotingConnection.java:232)
        ... 80 more
**Caused by: java.lang.ClassCastException: com.sun.xml.messaging.saaj.soap.ver1_1.Envelope1_1Impl cannot be cast to org.jboss.ws.core.soap.SOAPElementImpl**
        at org.jboss.ws.core.soap.SOAPEnvelopeImpl.<init>(SOAPEnvelopeImpl.java:57)
        at org.jboss.ws.core.soap.EnvelopeBuilderDOM.build(EnvelopeBuilderDOM.java:136)
        at org.jboss.ws.core.soap.EnvelopeBuilderDOM.build(EnvelopeBuilderDOM.java:96)
        at org.jboss.ws.core.soap.MessageFactoryImpl.createMessage(MessageFactoryImpl.java:294)
        at org.jboss.ws.core.soap.SOAPMessageUnMarshallerHTTP.read(SOAPMessageUnMarshallerHTTP.java:82)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.readResponse(HTTPClientInvoker.java:584)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.useHttpURLConnection(HTTPClientInvoker.java:381)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.makeInvocation(HTTPClientInvoker.java:232)
        ... 85 more
10:37:40,079 ERROR [SOAPFaultHelperJAXWS] SOAP request exception
java.io.IOException: Could not transmit message
        at org.jboss.ws.core.client.HTTPRemotingConnection.invoke(HTTPRemotingConnection.java:253)
        at org.jboss.ws.core.client.SOAPProtocolConnectionHTTP.invoke(SOAPProtocolConnectionHTTP.java:71)
        at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:360)
        at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:231)
        at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:171)
        at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:157)
        at $Proxy153.balanceInquiry(Unknown Source)
        at com.scvl.giftcard.SVSGiftCardService.balanceInquiry(SVSGiftCardService.java:87)
        at com.scvl.giftcard.GiftCardBalanceInquiryFormHandler.handleBalanceInquiry(GiftCardBalanceInquiryFormHandler.java:65)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at atg.droplet.EventSender.sendEvent(EventSender.java:582)
        at atg.droplet.FormTag.doSendEvents(FormTag.java:800)
        at atg.droplet.FormTag.sendEvents(FormTag.java:649)
        at atg.droplet.DropletEventServlet.sendEvents(DropletEventServlet.java:523)
        at atg.droplet.DropletEventServlet.service(DropletEventServlet.java:550)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.commerce.order.CommerceCommandServlet.service(CommerceCommandServlet.java:128)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.commerce.promotion.PromotionServlet.service(PromotionServlet.java:191)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.AccessControlServlet.service(AccessControlServlet.java:655)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.sessionsaver.SessionSaverServlet.service(SessionSaverServlet.java:2425)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.PageEventTriggerPipelineServlet.service(PageEventTriggerPipelineServlet.java:169)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.multisite.SiteSessionEventTriggerPipelineServlet.service(SiteSessionEventTriggerPipelineServlet.java:139)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.SessionEventTrigger.service(SessionEventTrigger.java:477)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.ProfilePropertyServlet.service(ProfilePropertyServlet.java:208)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.search.servlet.SearchClickThroughServlet.service(SearchClickThroughServlet.java:415)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.ProfileRequestServlet.service(ProfileRequestServlet.java:437)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.projects.store.servlet.pipeline.ProtocolSwitchServlet.service(ProtocolSwitchServlet.java:290)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.ondemand.servlet.pipeline.NetscalerServlet.service(NetscalerServlet.java:86)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.DynamoPipelineServlet.service(DynamoPipelineServlet.java:469)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.URLArgumentPipelineServlet.service(URLArgumentPipelineServlet.java:280)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.PathAuthenticationPipelineServlet.service(PathAuthenticationPipelineServlet.java:370)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.sso.PassportServlet.service(PassportServlet.java:554)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.security.ThreadUserBinderServlet.service(ThreadUserBinderServlet.java:91)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.dtm.TransactionPipelineServlet.service(TransactionPipelineServlet.java:212)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.multisite.SiteContextPipelineServlet.service(SiteContextPipelineServlet.java:383)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.HeadPipelineServlet.passRequest(HeadPipelineServlet.java:1174)
        at atg.servlet.pipeline.HeadPipelineServlet.service(HeadPipelineServlet.java:857)
        at atg.servlet.pipeline.PipelineableServletImpl.service(PipelineableServletImpl.java:250)
        at atg.filter.dspjsp.PageFilter.doFilter(PageFilter.java:263)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:183)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:95)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:451)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.jboss.remoting.CannotConnectException: Can not connect http client invoker after 1 attempt(s)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.makeInvocation(HTTPClientInvoker.java:250)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.transport(HTTPClientInvoker.java:162)
        at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:167)
        at org.jboss.remoting.Client.invoke(Client.java:2034)
        at org.jboss.remoting.Client.invoke(Client.java:877)
        at org.jboss.ws.core.client.HTTPRemotingConnection.invoke(HTTPRemotingConnection.java:232)
        ... 80 more
**Caused by: java.lang.ClassCastException: com.sun.xml.messaging.saaj.soap.ver1_1.Envelope1_1Impl cannot be cast to org.jboss.ws.core.soap.SOAPElementImpl**
        at org.jboss.ws.core.soap.SOAPEnvelopeImpl.<init>(SOAPEnvelopeImpl.java:57)
        at org.jboss.ws.core.soap.EnvelopeBuilderDOM.build(EnvelopeBuilderDOM.java:136)
        at org.jboss.ws.core.soap.EnvelopeBuilderDOM.build(EnvelopeBuilderDOM.java:96)
        at org.jboss.ws.core.soap.MessageFactoryImpl.createMessage(MessageFactoryImpl.java:294)
        at org.jboss.ws.core.soap.SOAPMessageUnMarshallerHTTP.read(SOAPMessageUnMarshallerHTTP.java:82)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.readResponse(HTTPClientInvoker.java:584)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.useHttpURLConnection(HTTPClientInvoker.java:381)
        at org.jboss.remoting.transport.http.HTTPClientInvoker.makeInvocation(HTTPClientInvoker.java:232)
        ... 85 more
10:37:40,093 ERROR [[jsp]] Servlet.service() for servlet jsp threw exception
**javax.xml.ws.WebServiceException: java.lang.ClassCastException: com.sun.xml.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl cannot be cast to org.jboss.ws.core.soap.MessageFactoryImpl**
        at org.jboss.ws.core.jaxws.client.ClientImpl.handleRemoteException(ClientImpl.java:310)
        at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:243)
        at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:171)
        at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:157)
        at $Proxy153.balanceInquiry(Unknown Source)
        at com.scvl.giftcard.SVSGiftCardService.balanceInquiry(SVSGiftCardService.java:87)
        at com.scvl.giftcard.GiftCardBalanceInquiryFormHandler.handleBalanceInquiry(GiftCardBalanceInquiryFormHandler.java:65)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at atg.droplet.EventSender.sendEvent(EventSender.java:582)
        at atg.droplet.FormTag.doSendEvents(FormTag.java:800)
        at atg.droplet.FormTag.sendEvents(FormTag.java:649)
        at atg.droplet.DropletEventServlet.sendEvents(DropletEventServlet.java:523)
        at atg.droplet.DropletEventServlet.service(DropletEventServlet.java:550)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.commerce.order.CommerceCommandServlet.service(CommerceCommandServlet.java:128)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.commerce.promotion.PromotionServlet.service(PromotionServlet.java:191)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.AccessControlServlet.service(AccessControlServlet.java:655)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.sessionsaver.SessionSaverServlet.service(SessionSaverServlet.java:2425)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.PageEventTriggerPipelineServlet.service(PageEventTriggerPipelineServlet.java:169)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.multisite.SiteSessionEventTriggerPipelineServlet.service(SiteSessionEventTriggerPipelineServlet.java:139)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.SessionEventTrigger.service(SessionEventTrigger.java:477)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.ProfilePropertyServlet.service(ProfilePropertyServlet.java:208)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.search.servlet.SearchClickThroughServlet.service(SearchClickThroughServlet.java:415)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.ProfileRequestServlet.service(ProfileRequestServlet.java:437)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.projects.store.servlet.pipeline.ProtocolSwitchServlet.service(ProtocolSwitchServlet.java:290)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.ondemand.servlet.pipeline.NetscalerServlet.service(NetscalerServlet.java:86)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.DynamoPipelineServlet.service(DynamoPipelineServlet.java:469)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.URLArgumentPipelineServlet.service(URLArgumentPipelineServlet.java:280)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.PathAuthenticationPipelineServlet.service(PathAuthenticationPipelineServlet.java:370)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.userprofiling.sso.PassportServlet.service(PassportServlet.java:554)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.security.ThreadUserBinderServlet.service(ThreadUserBinderServlet.java:91)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.dtm.TransactionPipelineServlet.service(TransactionPipelineServlet.java:212)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.multisite.SiteContextPipelineServlet.service(SiteContextPipelineServlet.java:383)
        at atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:135)
        at atg.servlet.pipeline.HeadPipelineServlet.passRequest(HeadPipelineServlet.java:1174)
        at atg.servlet.pipeline.HeadPipelineServlet.service(HeadPipelineServlet.java:857)
        at atg.servlet.pipeline.PipelineableServletImpl.service(PipelineableServletImpl.java:250)
        at atg.filter.dspjsp.PageFilter.doFilter(PageFilter.java:263)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:183)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:95)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:451)
        at java.lang.Thread.run(Thread.java:662)
**Caused by: java.lang.ClassCastException: com.sun.xml.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl cannot be cast to org.jboss.ws.core.soap.MessageFactoryImpl**
        at org.jboss.ws.core.jaxws.SOAPFaultHelperJAXWS.createSOAPMessage(SOAPFaultHelperJAXWS.java:298)
        at org.jboss.ws.core.jaxws.SOAPFaultHelperJAXWS.toSOAPMessage(SOAPFaultHelperJAXWS.java:257)
        at org.jboss.ws.core.jaxws.SOAPFaultHelperJAXWS.exceptionToFaultMessage(SOAPFaultHelperJAXWS.java:188)
        at org.jboss.ws.core.jaxws.handler.HandlerChainExecutor.handleFault(HandlerChainExecutor.java:194)
        at org.jboss.ws.core.jaxws.client.ClientImpl.callFaultHandlerChain(ClientImpl.java:161)
        at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:432)
        at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:231)
        ... 77 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:14:29.573

我能够解决问题，但使用来自[这里](https://stackoverflow.com/questions/11048655/jaxws-classcastexception-on-jboss)和[这里的信息](https://stackoverflow.com/questions/7842286/providerimpl-not-found-jboss-5-1)

稍作修改。

我在 $JBOSS_HOME/server//lib/endorsed 下创建了一个背书文件夹。然后我复制了 streambuffer.jar、stax-ex.jar、policy.jar、jaxws-rt.jar、jaxws-api.jar、jaxb-impl.jar、jaxb-api.jar 和 gmbal-api-only.jar。

我单独留下了 $JBOSS_HOME/lib/endorsed。

这样做，我能够让它正常工作

# javascript - Javascript：有没有办法使对象属性只读

> ID：12730746
> 
> 赞同：1
> 
> 时间：2012-10-04T15:34:02.037
> 
> 标签：javascript, object

我希望能够做类似的事情

```
foo.x = 7; 
```

然后做一些事情使该属性只读，以便没有其他代码可以更改它。IE 我想要

```
foo.x = 10; //should do nothing 
```

无论如何，在 JS 中什么都不做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:40:07.043

使用 ECMAScript5，您可以实现：

```
var foo = {};

Object.defineProperty(foo, 'x', {
    value: 7,
    writable: false,
    configurable: false,
    enumerable: true
}); 
```

您可能想查看[MDN JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)以了解 ECMAScript5 的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:37:30.243

我想[这](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)就是你要找的。检查*可写属性下的示例*

不过，它仅适用于提供*ECMA5*支持的浏览器。对于较旧的浏览器，您不能定义不可写的属性，但您*可以*设置一个可以与*getter*一起使用的私有变量：

```
var foo = (function(x)
{
    var getX = function()
    {
        return x;
    };
    getX.valueOf = function()
    {
        return this();
    };
    return {x:x,getX:getX};
})(7);//pass constant value
foo.x === 7;//true
foo.x = 5;//will work
//BUT:
foo.getX();//returns 7, always
foo.getX;//returns 7, so can be used as though it weren't a method
//WARNING:
foo.getX = 213;//x is lost forever... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:43:39.197

您可以使用[Object.defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)来执行此操作。

`Object.defineProperty(foo, "x", {writable:false})`

看到这个[小提琴](http://jsfiddle.net/rRQ2b/)

如果你想让整个 Object 不可写，你也可以使用 Objects [freeze](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/freeze)方法

`Object.freeze(foo);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:45:24.307

这是 John Resig 撰写的一篇很棒的博客文章。请注意只读、可配置和可扩展的属性：

[http://ejohn.org/blog/ecmascript-5-objects-and-properties/](http://ejohn.org/blog/ecmascript-5-objects-and-properties/)：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T13:20:48.973

好吧，为了向后兼容旧浏览器，您可能需要定义访问器函数。[或者，您可以使用各种框架（例如bob.js](http://www.bobjs.com)）提供的现成功能：

```
var obj = { };
//declare read-only property.
bob.prop.namedProp(obj, 'name', 'Bob', true);
//declare read-write property.
bob.prop.namedProp(obj, 'age', 1);

//get values of properties.
console.log(bob.string.formatString('{0} is {1} years old.', obj.get_name(), obj.get_age()));
//set value of read-write property.
obj.set_age(2);
console.log(bob.string.formatString('Now {0} is {1} years old.', obj.get_name(), obj.get_age()));

//cannot set read-only property of obj. Next line would throw an error.
// obj.set_name('Rob');

//Output:
//========
// Bob is 1 years old.
// Now Bob is 2 years old. 
```

- 滕吉兹

# ios - 停止 UITableView 消耗触摸事件，因此父视图中的滑动菜单可以检测到水平滑动

> ID：12730747
> 
> 赞同：7
> 
> 时间：2012-10-04T15:34:02.820
> 
> 标签：ios, uitableview, cocoa-touch, menu, swipe

我快要绝望了，试图实现如此简单的事情。

我有一个带有菜单的视图，当它使用水平滑动手势时，使用 touchEvents 从左侧滑动。我不使用手势识别器，我只是使用 touchesBegan、touchesMoved 等。并跟踪开始触摸位置、中间位置和结束触摸位置之间的 x 坐标差。它工作得很好。

但是，当我在 body 中有一个 UITableView 时，触摸事件不再沿着层次结构向上到达管理菜单的视图。我试图通过将触摸传递给 superview/nextResponder 来解决这个问题，这种方法很有效，但我看到了一个 touchesBegan 和 2 个 touchesMoved 调用，然后它才停止在层次结构中进一步处理。

具体来说，我有一个 SlideMenuView，其中有一个菜单视图和一个正文视图。在正文视图中，我在某些时候有 UITableView。我看到（通过 NSLog）touches* 方法从头到尾都被调用得很好。我将它们传递给 nextResponder 并开始在 SlideMenuView 中看到它们 - 但在两次调用 touchesMoved 之后，它们似乎在 SlideMenuView 中停止，但在我的 UITableView 中继续。

我正在重写 UITableView 来执行此操作，但我在其中没有进行任何更改。

我知道这一定是可能的，就像在 Facebook 应用程序中一样。您可以在身体的任何地方滑动，可以水平滚动并显示菜单。我希望同样的事情在这里自然发生，但看起来好像发生了一些奇怪的事情，并且 UITableView 正在消耗或破坏这些事件。

有人可以帮我解决这个问题吗？一定有人以干净的方式实现了这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T10:22:33.667

好的，对于任何感兴趣的人 - 我找到了一个干净的解决方案。

苹果知道他们在做什么。回到我们过去常常覆盖的那一天`touchesBegan`，......但后来他们推出了`GestureRecognizers`。对于某些控件，例如`UIScrollView`（以及任何子类，例如`UITableView`），它们似乎会破坏它们的事件响应器系统。我假设`Gesture Recognizers`不做任何特别的事情，只是简单地使用这些`touchesBegan`, ... 方法，这是错误的——这是不正确的。

最安全的方法是使用`Gesture Recognizers`. 具体来说，它们上有一些选项可以使一切变得不同。比如`.cancelsTouchesInView = YES`我的情况。

所以我所做的是`PanGestureRecognizer`在菜单视图上使用 a ，设置`.cancelsTouchesInView`为`YES`，它可以工作。我要避免`touchesBegan`，......像瘟疫一样，并为任何复杂的东西编写自定义手势识别器。

我希望这可以帮助有人像我一样把头发拉出来！

# java - 项目中缺少 Java 类路径文件夹，但项目的 Windows 目录结构中存在

> ID：12730748
> 
> 赞同：3
> 
> 时间：2012-10-04T15:34:04.513
> 
> 标签：java, eclipse, classpath, buildpath, i2b2

我从 i2b2.org 站点下载了应用程序服务器 Java 源代码，并对其进行了编译以进行部署。这个应用程序运行在 JBoss 之上。我在 Eclipse 中切换到的工作区中有 8 个项目文件夹（这 8 个项目所在的根目录）。有几个错误。

看起来其他人遇到了同样的问题：

[https://www.i2b2.org/software/augrepo.html](https://www.i2b2.org/software/augrepo.html)

以下是编译时错误的完整列表：

![在此处输入图像描述](../Images/ddc941c9356b544210e9359ca561176f.png)

这是一个：

`Project 'edu.harvard.i2b2.common' is missing required source folder: 'gensrc'`

如果我右键单击“edu.harvard.i2b2.common”项目，然后选择“构建路径”，然后选择“配置构建路径”，然后导航到“源”选项卡，我看到我们缺少一个文件夹。

![在此处输入图像描述](../Images/12035102136e9b7a9d480b83eb622e17.png)

在 Windows 中，我看到该文件夹​​存在。看起来我的 CLASSPATH 需要该文件夹，但该项目没有包含它。在 Eclipse 中解决此问题的正确方法是什么？

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src/core"/>
    <classpathentry kind="src" path="gensrc"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry kind="lib" path="lib/commons/commons-codec-1.3.jar"/>
    <classpathentry kind="lib" path="lib/commons/commons-collections-2.1.1.jar"/>
    <classpathentry kind="lib" path="lib/commons/commons-httpclient-3.0.jar"/>
    <classpathentry kind="lib" path="lib/commons/commons-logging-1.0.4.jar"/>
    <classpathentry kind="lib" path="lib/jdbc/ojdbc14.jar"/>
    <classpathentry kind="lib" path="lib/dom4j/dom4j-1.6.1.jar"/>
    <classpathentry kind="lib" path="lib/hibernate/hibernate3.jar"/>
    <classpathentry kind="lib" path="lib/j2ee/jbossall-client.jar"/>
    <classpathentry kind="lib" path="lib/jaxb/jaxb-api.jar"/>
    <classpathentry kind="lib" path="lib/jaxb/jaxb-impl.jar"/>
    <classpathentry kind="lib" path="lib/jaxb/jaxb-xjc.jar"/>
    <classpathentry kind="lib" path="lib/spring/spring-2.0.jar"/>
    <classpathentry kind="lib" path="lib/jaxb/jaxb1-impl.jar"/>
    <classpathentry kind="lib" path="lib/jaxb/jsr173_1.0_api.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axiom-api-1.2.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axiom-dom-1.2.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axiom-impl-1.2.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axis2-adb-1.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axis2-adb-codegen-1.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axis2-codegen-1.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axis2-java2wsdl-1.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axis2-jibx-1.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axis2-kernel-1.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/axis2-saaj-1.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/mail-1.4.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/neethi-2.0.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/stax-api-1.0.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/woden-1.0.0M6.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/wsdl4j-1.6.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/wstx-asl-3.0.1.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/xml-apis-1.3.03.jar"/>
    <classpathentry kind="lib" path="lib/axis2-1.1/XmlSchema-1.2.jar"/>
    <classpathentry kind="lib" path="lib/junit/junit-4.4.jar"/>
    <classpathentry kind="lib" path="lib/jaxb/activation-1.1.jar"/>
    <classpathentry kind="output" path="classes"/>
</classpath> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:12:00.330

**经过一番调查和故障排除后的新答案（特定于 i2b2）：**

1.  您必须先运行 Apache Ant 脚本...按照 i2b2 文档中的 CRC_Installation_Guide.pdf

2.  然后通过进入 Eclipse > File > Switch Workspace > Other（选择 8 个项目文件夹的父文件夹）来打开所有项目文件夹的父文件夹......通常称为“服务器”。C:\i2b2\服务器

3.  正如我之前提到的，您将再次看到 19 个错误。那是因为 Apache Ant 脚本应该已经创建了文件夹和更多文件，所以引用被搞砸了。

4.  刷新所有项目文件夹以获取最新的文件夹和文件。如果您有 Eclipse 自动编译，那么您就完成了。否则，您必须构建您的工作区。

5.  然后显然去更新 7 个文件的 JDBC 连接字符串...... 5 个 *-ds.xml 文件以及 CRCApplicationContext.xml 和 CRCLoaderApplicationContext.xml。

**旧答案（不正确，但可能会在类似问题上帮助其他人）：**

（用几个不同的来源解决）

1.  请按照以下步骤操作： [http ://www.bradjanke.com/2011/04/12/project-%E2%80%98project-name%E2%80%99-is-missing-required-source-folder-%E2% 80%98gen%E2%80%99/](http://www.bradjanke.com/2011/04/12/project-%E2%80%98project-name%E2%80%99-is-missing-required-source-folder-%E2%80%98gen%E2%80%99/)

2.  单击项目文件夹>源（菜单）>清理...

3.  右键单击项目文件夹 > 刷新 .. 这会拉取 Windows 在该项目的目录结构中拥有的文件

... 为其中 2 个项目做到了这一点，并解决了原来的 19 个。现在我有更多错误，但更容易修复。

# jquery - 在后退按钮单击时呈现的原始 javascript

> ID：12730754
> 
> 赞同：12
> 
> 时间：2012-10-04T15:34:18.570
> 
> 标签：jquery, ruby-on-rails, ajax

我们的团队最近遇到了一个最初的边缘案例问题，当用户从具有某种 javascript 呈现（例如 Ajax、选项卡等）的页面单击浏览器的后退按钮时，将显示原始 javascript。要重新创建，我们按照以下步骤操作：

*   访问用户工作申请索引
*   单击一个按钮到管理职位发布页面
*   单击一个选项卡（使用 bettertabs gem）
*   单击浏览器的返回按钮

前面的步骤将显示：

```
(function() {

  $(".job_applications").html("<li class=\"job_posting_application\">\n
    ...
    ...
    ...
    ...
  );

}).call(this); 
```

在某些偶然发生的情况下，您无需在返回上一页之前单击选项卡，但它仍会呈现原始 javascript。归根结底，似乎最后渲染的模板正在被缓存，这在浏览器方面是正常的和预期的，但会导致我认为是一个更大的问题。

Rails 指南在[**Layouts and Rendering**](http://guides.rubyonrails.org/layouts_and_rendering.html)部分中指出，特别是关于模板的 MIME 类型：

> *默认情况下，Rails 将使用 text/html 的 MIME 内容类型（或 application/json 如果您使用 :json 选项，或 application/xml 用于 :xml 选项）提供渲染操作的结果。*

基于 Rails 的默认设置，我们的控制器的 index 动作应该会渲染我们的`index.html.slim`模板。但是，在跟踪服务器日志的同时对该页面进行非远程调用（例如，直接导航到浏览器中的页面）时，我们注意到它实际上呈现`index.js.coffee`. 下面是我们的控制器操作，请注意我们没有明确响应 html 或 js 格式，因为我们可能应该考虑此页面中的覆盖功能：

```
def index
  @company_id, @division_id, @job_posting_id = params[:company_id], params[:division_id], params[:job_posting_id]

  # API requests are made here to instantiate @job_posting, et al.,
  # but are not shown for brevity

  authorize! :manage, @job_posting

  @survey = @job_posting.survey
  @job_applications = @job_posting.job_applications(sort_column, sort_direction)
end 
```

但是，鉴于此设置，`index.html.slim` *应*根据 Rails 默认值进行渲染。添加`respond_to`块时，缓存似乎仍然有效，控制器可能不太关心`respond_to`块的存在：

```
def index
  ...
  ...
  respond_to do |format|
    format.html
    format.js
  end
end 
```

即使明确地，虽然很臭，告诉每种格式呈现不同的模板，模板似乎`js.coffee`优先于`html.slim`模板：

```
def index
  ...
  ...
  respond_to do |format|
    format.html { render template: "users/job_posting_applications/index" }
    format.js { render template: "users/job_posting_applications/ajax" }
  end
end 
```

在上述情况下，直接导航到浏览器中的页面（换句话说，不进行远程 Ajax 调用），服务器日志将呈现`ajax.js.coffee`，即使 Rails 默认为 html，除非另有说明。

说了这么多，这里有一些其他的发现：

```
Started GET "/users/companies/1/divisions/18/job_postings/349421/applications" for 127.0.0.1 at 2012-10-03 19:55:26 -0400
Processing by Users::JobPostingApplicationsController#index as JSON 
```

（您可以***[在此粘贴](http://pastie.org/4905407)******中引用上面显示的整个请求***）

考虑到我们没有在此请求上提供任何 JSON，并且在路由中没有针对`:json`此路由的默认格式的路由规范，为什么它以 JSON 格式处理超出了我的理解。

此外，在调试`request.format`此操作中的值时，它会返回`application/json`.

另一个场景是在另一个`users/company_admin_metrics#index`仅包含一个`index.html.slim`模板的控制器 ( ) 中。导航到此页面时，服务器日志显示它`users/company_admin_metrics/index.html.slim`在`layouts/users`. 当我创建一个空白 js.coffee 模板时：

```
$ touch app/views/users/company_admin_metrics/index.js.coffee 
```

并直接导航到该索引页面，服务器日志显示它已渲染`users/company_admin_metrics/index.js.coffee`，这进一步暴露了某处有关模板渲染优先级的潜在问题。

有没有人遇到过类似的问题，可能会为此提供潜在的解决方案？

## 我们的堆栈

以下是这个特定问题的基本参与者的分钟列表：

*   导轨 3.2.6
*   Coffee-Rails 3.2.1
*   更好的标签 1.2.6

此请求取决于通过解析 JSON 并返回 Ruby 对象的客户端 gem 对我们的职位发布 API 的请求，但这些请求与此特定应用程序的耦合方式不会发生冲突并导致*此*应用程序的内容类型为`application/json`对于上述请求。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T08:05:03.710

我认为您需要将格式扩展附加`.js`到您的 ajax 请求中的 URL。

可能发生的情况是用户正在通过请求 html 来执行`index`操作。然后 ajax 访问相同的 URL/动作，但请求 javascript。当用户单击后退按钮时，浏览器无法分辨两者之间的区别，因此使用最新的（javascript 响应）。`/job_applications``GET`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-06T02:17:42.120

最近开始在带有 Rails 4.2.4 的 Chrome 中看到这个确切的问题。似乎是一个众所周知且备受争议的问题。我们的团队通过在请求中添加`Vary`标头来解决它：`xhr`

```
class ApplicationController < ActionController::Base
  after_action :set_vary_header

  private

  # Fix a bug/issue/by-design(?) of browsers that have a hard time understanding
  # what to do about our ajax search page. This header tells browsers to not cache
  # the current contents of the page because previously when someone filtered results,
  # went to the listing's external site, then hit Back, they'd only see the last
  # ajax response snippet, not the full listings page for their search.
  #
  # Heated multi-year discussion on this issue in Chrome
  # https://code.google.com/p/chromium/issues/detail?id=94369
  #
  # And continued by the Rails team:
  # https://github.com/rails/jquery-ujs/issues/318
  # https://github.com/rails/jquery-rails/issues/121
  def set_vary_header
    if request.xhr?
      response.headers["Vary"] = "accept"
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-09T02:06:18.277

自从提出这个问题以来已经有几个月了，但自从我遇到这个问题以来，我会插话并给我两美分。

正如 carbo 所说，浏览器可以分辨 html 和 js 请求之间的区别，因此当单击后退按钮时，它会看到相同的 url，并且只提供发生在 js 代码中的缓存数据。我遇到了一些问题，但是使用推送状态 javascript 来修改 ajax 请求的浏览器历史记录。我找到的最简单的解决方案是告诉浏览器不要缓存请求。因此，当返回上一页时，它会被迫重新加载它。

您可以全局禁用缓存： $.ajaxSetup({ cache: false });

或者您可以尝试在特定的 ajax 请求上指定 cache false 。

# sql - 使用可为空的外键选择表中不在另一个表中的行

> ID：12730756
> 
> 赞同：0
> 
> 时间：2012-10-04T15:34:31.627
> 
> 标签：sql, database, sqlite, select, android-sqlite

我有以下数据库可以在 Android 3.0 平板电脑应用程序中使用它。

![在此处输入图像描述](../Images/4e00d3a9dce58395c696de31f3f6e32f.png)
我想选择它不在的每个缺陷`EReportDefect`。如您所见`EReportDefect.defectId` **，可能为 null**。

此选择返回 0 行。但也有一些没有摆在`EReportDefect`桌面上的缺陷。

```
SELECT 
  Defect.defectId,
  Defect.description
FROM 
  Defect 
WHERE 
   qapId = ? AND
   defectId NOT IN 
     (SELECT defectId FROM EReportDefect WHERE eReportId = ?); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:37:51.537

`defectID`您可以使用`LEFT JOIN`,在列上加入两个表

```
SELECT  a.*
FROM    Defect a
        LEFT JOIN EReportDefect b
            ON a.defectID = b.defectID
WHERE   b.defectID IS NULL 
```

`b.defectID``NULL`如果在 上没有匹配项，则将具有值`a.defectID`。

**更新 1**

```
SELECT a.*
FROM    Defect a
        LEFT JOIN EReportDefect b
            ON a.defectID = b.defectID
WHERE  b.defectID IS NULL AND
        a.qapID = ? 
       -- AND b.ReportID = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:09:21.980

这就是我制作作品的方式：

```
SELECT
   Defect.defectId,
   Defect.description
FROM
   Defect
WHERE
   qapId = ? AND
   defectId NOT IN 
     (SELECT
        defectId
      FROM
        EReportDefect
      WHERE eReportId = ? AND defectId IS NOT NULL); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T15:48:10.860

也许我遗漏了一些东西，但对我来说，如果你删除“qapId = ？AND”和“WHERE eReportId =？” 它应该只返回 EReportDefect 表中没有条目的结果

```
SELECT 
  Defect.defectId,
  Defect.description
FROM 
  Defect 
WHERE 
   defectId NOT IN 
     (SELECT defectId FROM EReportDefect); 
```

# c# - XML 不断更新值

> ID：12730759
> 
> 赞同：2
> 
> 时间：2012-10-04T15:34:40.023
> 
> 标签：c#, xml, linq

我试图让一个程序不断地将数据写入文件中的 XML 节点，但我不确定如何实现它。XML 文件是一个 Google 地球 kml 文件，需要坐标才能绘制路径：

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <Style>
      <LineStyle>
        <color>7f00ffff</color>
        <width>4</width>
      </LineStyle>
    </Style>
    <Placemark>
      <LineString>
        <altitudeMode>clampToGround</altitudeMode>
        <coordinates>0,0,0</coordinates>
      </LineString>
    </Placemark>
  </Document>
</kml> 
```

我只需要修改坐标节点并添加后续行。这将使用计时器来完成，以每秒写入一组新坐标。这可能有数百行：

```
<coordinates> 
      -112.2550785337791,36.07954952145647,2357
      -112.2549277039738,36.08117083492122,2357
      -112.2552505069063,36.08260761307279,2357
      -112.2564540158376,36.08395660588506,2357
      -112.2580238976449,36.08511401044813,2357
      -112.2595218489022,36.08584355239394,2357

(...etc)

</coordinates> 
```

我不太了解如何仅访问坐标节点并在值之后写入值。我已经尝试过这样的事情，但它不工作：

```
 XmlDocument dataFile = new XmlDocument();
  dataFile.Load("gpsData.kml");

  XmlNode node = dataFile.SelectSingleNode("kml/Document/Placemark/LineString/coordinates");

  node.InnerText (?) <- how do I append new text instead of replacing the whole thing? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:15:48.380

刚刚把这个搞砸了。不确定是否有更快的方法来完成同样的事情。不过，对我有用。

```
using System;
using System.Timers;
using System.Xml.Linq;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1 {
    class Program {
        static void Main(string[] args) {

            var fileName = "C:\\gpsData.kml";

            var xml = XDocument.Load(fileName);
            var xmlns = xml.Root.Name.Namespace;
            var document = xml.Root.Element(xmlns.GetName("Document"));
            var placemark = document.Element(xmlns.GetName("Placemark"));
            var lineString = placemark.Element(xmlns.GetName("LineString"));
            var coordinates = lineString.Element(xmlns.GetName("coordinates"));

            var inc = 0;
            var timer = new Timer();
            var timer_Elapsed = new ElapsedEventHandler((s, e) => {

                // get the new coordinate here
                var newCoordinate = "-112.2550785337791,36.07954952145647,2357";
                var oldValue = coordinates.Value;
                var newValue = oldValue + Environment.NewLine + newCoordinate;
                coordinates.Value = newValue;

                xml.Save(fileName);

                inc++;
            });

            timer.Interval = 1000;
            timer.Elapsed += timer_Elapsed;
            timer.Start();

            while (10 > inc) ;

            timer.Stop();
            timer.Elapsed -= timer_Elapsed;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:10:46.613

您每次都必须重写整个 XML 文件。没有办法只更新 XML 文件的一部分。随着文件的增长，该过程将逐渐变慢。考虑改用纯文本文件。

```
File.AppendAllText(path, newText); 
```

或（从 .NET 4.0 开始）

```
File.AppendAllLines(path, stringEnumeration); 
```

您还可以从 XML 文件中引用此文本文件

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:xlink="http://www.w3.org/1999/xlink">
  <Document>
    <Style>
      <LineStyle>
        <color>7f00ffff</color>
        <width>4</width>
      </LineStyle>
    </Style>
    <Placemark>
      <LineString>
        <altitudeMode>clampToGround</altitudeMode>
        <coordinates xlink:href="http://mysite.com/data/coordinates.txt"/>
      </LineString>
    </Placemark>
  </Document>
</kml> 
```

# zend-framework - 添加 HTML 元素到 zend 导航

> ID：12730760
> 
> 赞同：0
> 
> 时间：2012-10-04T15:34:42.657
> 
> 标签：zend-framework, nav

所以我写了一个这样的类：

```
class Users_Navigation_Page_Notification extends Zend_Navigation_Page_Mvc{

    public function setLabel($label){
        if(substr($label, 0 , 1) == ':'){
            $label = 'Notification';
        }

        return parent::setLabel($label);
    }
} 
```

如果我尝试类似：

```
$label = 'Notification' . '<span>test</span>'; 
```

它呼应了Notificationtest

它不应该。

如何让它呈现 HTML 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:53:38.343

渲染导航时，视图助手被硬编码以转义默认使用的每个导航页面的标签`htmlspecialchars`。这将有效地禁用 HTML，因为标签被替换为 HTML 实体。

您可以尝试作弊并在输出导航之前更改转义机制：

```
$view->setEscape('trim'); // will allow html and remove escaping
echo $view->navigation()->menu(); // output navigation
$view->setEscape('htmlspecialchars'); // restore escaping mechanism 
```

在上面的代码中，您可以更改`$view`为`$this`是否在视图脚本中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-04T11:40:58.447

在这里回答[https://stackoverflow.com/a/32823280/3684315](https://stackoverflow.com/a/32823280/3684315)建议使用`escapeLabels(false)`函数来禁用转义，这似乎是一个更好的解决方案。

`<?= $this->navigation()->menu()->escapeLabels(false) ?>`

# javascript - 如何使用 pidCrypt 进行 AES CBC 加密，然后使用 phpseclib 解密？

> ID：12730761
> 
> 赞同：1
> 
> 时间：2012-10-04T15:34:43.927
> 
> 标签：javascript, php, aes, phpseclib, pidcrypt

我需要使用 Javascript ( [pidCrypt AES CBC](https://sourceforge.net/projects/pidcrypt/) ) 加密一个短字符串，然后使用 PHP ( [phpseclib Crypt_AES CBC](http://phpseclib.sourceforge.net/crypt/examples.html) ) 对其进行解密。

各种库之间有很多不兼容的地方（尝试了很多，有些由于缺乏文档我什至无法开始使用），以至于我试图理解和克服它们（当前的“标准”只是不'不包括调试，乱码或简单的 a`false`将返回不正确的使用）。

pidCrypt AES CBC 表示它使用的是 OpenSSL 兼容编码。

到目前为止，我不明白为什么 pidCrypt 的输出不会在 phpseclib 中被解密：

**pidCrypt**

```
var aes=new pidCrypt.AES.CBC();
aes.encryptText("abcdefg", "secret", {nBits: 128});

console.log(aes.pidcrypt.getParams());
/**
A0_PAD: true
UTF8: true
blockSize: 16
clear: true
dataIn: "abcdefg"
dataOut: "U2FsdGVkX19p8dJctoZSgamat+UBHMWM/Zx64fBDYJY="
decryptIn: ""
decryptOut: ""
encryptIn: Array[16]
encryptOut: "©·åÅýzáðC`"
iv: "e314f8ebbcc5a1e0ae6c27033dd6725f"
key: "49f9bd99b7952b68b3bfa47404455fa7"
nBits: 128
salt: "69f1d25cb6865281"
*/ 
```

**phpseclib**

```
function hex2raw($strHexString)
{
    $strRawBytes="";
    $arrChunks=str_split($strHexString, 2);
    for($i=0; $i<count($arrChunks); $i++)
        $strRawBytes.=chr(hexdec($arrChunks[$i]));
    return $strRawBytes;
}

require_once("Crypt/AES.php");

$aes=new Crypt_AES(CRYPT_AES_MODE_CBC);

$aes->setPassword("secret");
$aes->setIV(hex2raw("e314f8ebbcc5a1e0ae6c27033dd6725f"));

var_export($aes->decrypt(base64_decode("U2FsdGVkX19p8dJctoZSgamat+UBHMWM/Zx64fBDYJY=")));
/**
false
*/ 
```

我还尝试了 phpseclib AES CBC 模式“密钥派生：无”示例（setKey 和 setIV 而不是 setPassword），结果相同。

**如何让 phpseclib 解码上述 pidCrypt AES CBC 输出？**

或者

**是否有 phpseclib 的替代品可以解密上述 pidCrypt 输出（具有代码 API；不允许使用 OpenSSL 使用示例）？**

拜托，没有关于 Javascript 安全和网络安全的讲座。这并不是为了防止互联网/网络嗅探。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:22:58.353

[在 php.net 上的评论](http://www.php.net/manual/en/function.openssl-decrypt.php#107210)中找到了使用 OpenSSL 进行解密的解决方案，删除了 OpenSSL 部分并将其替换为 phpseclib（后者又使用 php 的 mcrypt，或者它自己的仅软件实现）。

```
require_once("Crypt/AES.php");

//https://www.pidder.com/pidcrypt/?page=demo_aes-cbc
//"U2FsdGVkX18KqDRV4bSqJCauxP7004rQmPu3HD1FUrgbXEGpjJAKAfgYvxtWJ6iJ"
//Used the password: "password".
var_export(pidCryptAESCBCDecrypt("U2FsdGVkX18KqDRV4bSqJCauxP7004rQmPu3HD1FUrgbXEGpjJAKAfgYvxtWJ6iJ", "password"));
//Outputs: "Some text to encrypt..."

function pidCryptAESCBCDecrypt($strBase64OpenSSLCompatibleCipher, $strPassword)
{
    $data=base64_decode($strBase64OpenSSLCompatibleCipher);
    $salt=substr($data, 8, 8);
    $ct=substr($data, 16);

    /**
    * From https://github.com/mdp/gibberish-aes
    *
    * Number of rounds depends on the size of the AES in use
    * 3 rounds for 256
    *        2 rounds for the key, 1 for the IV
    * 2 rounds for 128
    *        1 round for the key, 1 round for the IV
    * 3 rounds for 192 since it's not evenly divided by 128 bits
    */

    $rounds = 3;
    $data00 = $strPassword.$salt;
    $md5_hash = array();
    $md5_hash[0] = md5($data00, true);
    $result = $md5_hash[0];
    for ($i = 1; $i < $rounds; $i++) {
    $md5_hash[$i] = md5($md5_hash[$i - 1].$data00, true);
    $result .= $md5_hash[$i];
    }
    $key = substr($result, 0, 32);
    $iv  = substr($result, 32,16);

    $aes=new Crypt_AES(CRYPT_AES_MODE_CBC);
    $aes->setKey($key);
    $aes->setIV($iv);
    echo $aes->decrypt($ct);
} 
```

**更新**：更简单（不敢相信我没看到），发送到phpseclib`pidCryptUtil.encodeBase64(aes.pidcrypt.getParams().encryptOut)`和.`aes.pidcrypt.getParams().iv``aes.pidcrypt.getParams().key`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T06:23:54.437

**好的**，所以在多次**挠头**和撞墙之后，我想我终于设法找到了一个双向有效的解决方案，但我仍然遇到了一个奇怪的异常情况，想知道我是否真的做错了什么。我一直在努力实现的是能够使用 AES 256 加密 PHP 中的字符串（我想只使用 MCrypt 来做到这一点，但是唉），然后使用 PidCrypt (JQuery) 解密相同的字符串。在我发现这个线程之前，几乎不可能找到满足我需求的解决方案。

**但是**，即使在成功实现**DECRYPT**函数（同时使用 Crypt_AES PHP 库以及仅使用 openssl_decrypt/encrypt）之后，我仍然无法正确解密在 PHP 中加密的 PidCrypt 中的消息。

这是我所得到的（请注意，我一直在使用[https://sourceforge.net/projects/pidcrypt/](https://sourceforge.net/projects/pidcrypt/)上的 AES 演示页面通过 PidCrypt - 256 AES 加密/解密消息）。

这是对我有用的 PHP 代码：

```
//for those who can't use openssl_encrypt because they don't have PHP >= 5.3.X
//the only solution I've found is to install phpseclib.sourceforge.net/crypt
require_once("Crypt/AES.php");

echo decrypt('TEST', 'U2FsdGVkX1/yPcPIrEGSGvkII+qMeyrOY+l3t09Gylc1td80g0VFtzRw1MbjYJZ3I1JJOW9G6wMlUxpu2gjHq68fwxo3Bds+PlpCnjgDBwL+VZe8QSOwS/CMPh9A+cOkyGQ+fCNp/KnKwgkqTziCpSWjgbFSlcOHtMWPoy1ecMM+CjhzyUZQ6SfJs+K8x9tj');
echo '<br />';
echo encrypt('TEST', 'TESTING RANDOM DATA PLEASE EXPLAIN WHY I HAVE TO PUT AN ADDITIONAL BYTE ON THE END OF THE DATA TO DECRYPT THE ORIGINAL STRING?');

function decrypt($password, $edata) {
    $data = base64_decode($edata);
    $salt = substr($data, 8, 8);
    $ct = substr($data, 16);
    $rounds = 3;
    $data00 = $password . $salt;
    $md5_hash = array();
    $md5_hash[0] = md5($data00, true);
    $result = $md5_hash[0];
    for($i = 1; $i < $rounds; $i++) {
      $md5_hash[$i] = md5($md5_hash[$i - 1] . $data00, true);
        $result .= $md5_hash[$i];
    }
    $key = substr($result, 0, 32);
    $iv  = substr($result, 32, 16);

    //phpseclib specifics
    $aes = new Crypt_AES(CRYPT_AES_MODE_CBC);
    $aes->setKey($key);
    $aes->setIV($iv);
    return $aes->decrypt($ct);

    //instead of using phpseclib with openssl_decrypt you would do the following
    //return openssl_decrypt($ct, 'aes-256-cbc', $key, true, $iv);
}

function encrypt($password, $data) {
    //my randomly generated 8 byte salt
    $salt = substr(time(), -8);
    //alternatively with openssl you would use
    //$salt = openssl_random_pseudo_bytes(8);
    $salted = '';
    $dx = '';
    while(strlen($salted) < 48) {
      $dx = md5($dx . $password . $salt, true);
      $salted .= $dx;
    }
    $key = substr($salted, 0, 32);
    $iv  = substr($salted, 32, 16);

    //phpseclib specifics
    $aes = new Crypt_AES(CRYPT_AES_MODE_CBC);
    $aes->setKey($key);
    $aes->setIV($iv);
    $encrypted_data = $aes->encrypt($data . "\n");

    //alternatively with openssl you would do the following
    //$encrypted_data = openssl_encrypt($data . "\n", 'aes-256-cbc', $key, true, $iv);

    return base64_encode('Salted__' . $salt . $encrypted_data);
} 
```

**现在****请**有人告诉我为什么我必须包含一个额外的字符，不管它是什么，只需要添加到我要加密的 $data 的末尾，否则当我去解密字符串时PidCrypt 站点，如果我没有包含附加字符（我的情况是换行符），那么它会切断加密字符串的最后一个字符吗？

只要我没有做错什么，我就可以忍受添加一个额外的角色。如果它是 PHP 和 PidCrypt 之间的错误，那么只要它可以工作，我就会不理它......

# .net - 有区别的联合和让绑定

> ID：12730763
> 
> 赞同：2
> 
> 时间：2012-10-04T15:34:47.467
> 
> 标签：.net, f#, functional-programming

```
let ``one`` x = One(x)
type Number = 
| One of int
| Two
with 
    member this.Hi x = ``one`` x 
```

基本上，我想定义一个引用可区分联合的绑定，并且我想在该联合的扩展之一中使用它，因为我知道由于某些奇怪的原因`let`您不能在联合内定义绑定。`let`双勾是为了强调。

实际上，我想要的是为工会成员制作一种简洁的构造函数。我知道有区别的联合不能有构造函数，但是有没有办法做到这一点，也许不使用`let`上面的绑定？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T15:41:25.277

您可以使用[类型扩展](http://msdn.microsoft.com/en-us/library/dd233211.aspx)来定义类型，然后编写一些 let 绑定（顶级或在模块中），然后将`member`声明添加到类型：

```
type Number =  
  | One of int
  | Two 

let one x = One(x) 

type Number with
  member this.Hi x = one x 
```

如果你把它写在一个文件中，那么这是一个*内在*类型扩展，这意味着代码将被编译为带有成员的标准类型（并且这些成员将可以直接从 C# 中使用）。如果您在另一个文件中添加了扩展名，那么情况会有所不同（更像是 C# 扩展方法）。

对于 F# 类声明，您还可以`let`在类内部使用本地绑定（在声明成员之前），但遗憾的是，这不支持可区分联合。

# c# - 使用 C# 代码在 netsuite 中搜索 bin 编号

> ID：12730767
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:35:06.230
> 
> 标签：c#, netsuite

我正在尝试从给定位置（仓库）搜索 bin 编号 =“1”。我的代码就像

```
 RecordRef[] referLocation = new RecordRef[1] { new RecordRef { } };
        referLocation[0].type = RecordType.location;
        referLocation[0].internalId = "6";

        BinSearch bSearch = new BinSearch();
        BinSearchBasic bSBasic = new BinSearchBasic();
        SearchStringField strField = new SearchStringField ();
        SearchMultiSelectField multiSelect = new SearchMultiSelectField();

        multiSelect.searchValue = referLocation;
        bSBasic.location = multiSelect;
        strField.searchValue = "1";
        bSBasic.binNumber = strField;
        bSearch.basic = bSBasic;

        var response = _service.search(bSearch);
        if (response.status.isSuccess)
            Console.WriteLine(strField.searchValue + "exists");
        else
            Console.WriteLine(strField.searchValue + "Not exists"); 
```

但即使 bin 编号 = 1 在 te netsuite 中，它也会给出 Not Exists。谁能帮我指出代码中的错误或缺失？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T07:41:36.133

您没有在任何搜索条件中提供运算符，请在基本搜索中传递搜索值之前将这些行添加到您的代码中：

```
multiSelect.@operator = SearchMultiSelectFieldOperator.anyOf;
multiSelect.operatorSpecified = true;

strField.@operator = SearchStringFieldOperator.@is;
strField.operatorSpecified = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:21:00.800

我发现的一件事是，如果一条记录在 NetSuite 中被标记为“非活动”，则它不会在任何 API 搜索中返回，并且任何传递该 ID 的添加/更新调用都将失败。

# iphone - monotouch 集合视图 iOS 5

> ID：12730768
> 
> 赞同：2
> 
> 时间：2012-10-04T15:35:11.350
> 
> 标签：iphone, ios5, xamarin.ios, monotouch.dialog

我知道在 iOS6 中有一个新的集合视图，它允许我创建一种具有多列的表格视图或有效的网格视图。

我希望达到相同的效果，但在 iOS5 上，我们将不胜感激。

因此，我想创建一个“单元格”4 网格，非常类似于当您查看相册时照片在 iOS 上的工作方式。

我的第一个想法是使用 Monotouch.dialog 并创建一个包含 4 个 uivew“单元格”的 uiview 的元素

或者只是将单元格添加到滚动视图中，以编程方式计算它们的位置到 4x(max) 网格中

网格将根据动态数据列表构建，因此它可以包含大量单元格，因此我试图选择最佳的预成型方法。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:55:29.613

在过去，我刚刚`UITableViewCell`使用 4 个按钮（或您需要的任意数量的列）进行了自定义，然后手动设置`UITableView`和`UITableViewSource`.

当然，您必须计算行数：

`(int)Math.Ceiling (yourListOrArray.Count / 4d)`

而且您必须一遍又一遍地编写同一行代码来设置每一列。

这很烦人，但对我来说效果很好，请确保利用`UITableView`' 重用行的能力。

# sql - MDX 不太正确..需要过滤父母和他们的兄弟姐妹

> ID：12730772
> 
> 赞同：0
> 
> 时间：2012-10-04T15:35:19.213
> 
> 标签：sql, reporting-services, ssas, mdx, business-intelligence

**目标**：删除指定用户访问级别以上的所有级别。

**示例**：我在 where 子句中有一个用户可以访问 3717 区。在那个区下，有几个部门（图中涂黑）。我正在尝试进行查询，列出 3717 区、3717 区下列出的部门，以及该地区的同级区（区 3701 至 3718）。

**我现在**所拥有的：我有一个查询，列出了 3717 区、3717 区下列出的部门，以及该地区的兄弟姐妹仅适用于该地区（3701 至 3718 区）。此外，它还列出了该区域（区域 3）、区域 3 及其兄弟区域（区域 3、4、5）、公司、已删除、无效和全部的父区域、所有区域。

我正在尝试修改查询的聚合部分，但没有得到任何结果。

**屏幕截图中突出显示**的是我唯一感兴趣的内容。如果用户可以访问 Region 35，我希望结果集有 Region 30 到 39，Districts only 在 Region 35 下，所有 Districts 下的部门只在 Region 35 下. 请参考图片。请帮忙

```
WITH
MEMBER [Measures].[ParameterValue] AS
    [Organization].[Organization Hierarchy].CurrentMember.UniqueName
MEMBER [Measures].[ParameterCaption] AS
    iif([Organization].[Organization Hierarchy].CurrentMember.Level.Ordinal =1,"",[Organization].[Organization Hierarchy].CurrentMember.Properties( "Organization Id" ) + " - ") +
    [Organization].[Organization Hierarchy].CurrentMember.Name  
MEMBER [Measures].[ParameterLevel] AS
        [Organization].[Organization Hierarchy].CurrentMember.Level.Ordinal
MEMBER [Measures].[User Count] AS
    [Measures].[User Organization Count]
    -
    Aggregate(
        {[Organization].[Organization Hierarchy].parent
        ,DESCENDANTS([Organization].[Organization Hierarchy])}
        ,[Measures].[User Organization Count]
    )
SELECT 
{
    [Measures].[ParameterValue]
    ,[Measures].[ParameterCaption]
    ,[Measures].[ParameterLevel]
}
ON COLUMNS,
FILTER
(
    DESCENDANTS([Organization].[Organization Hierarchy],5, SELF_AND_BEFORE)
    ,[Measures].[User Count]
)
ON ROWS
FROM [Cube]
WHERE
(
[Users].[User Name].&       [User_with_access_to_district_level__this_user_is_assgined_to_district_3718],
[Organization].[Organization Hierarchy Name].&[typeofhierarchy]
) 
```

![请参考这张图片。](../Images/986baf40b2af3e250786fb80c554400b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:46:07.167

我相信您需要使用 UNION 构建您想要的集合。

```
UNION
(
    //This bit gets you the children (districts)
    DESCENDANTS([Organization].[Organization Hierarchy].&[35],1, AFTER),
    //This bit gets you the siblings, including self
    [Organization].[Organization Hierarchy].&[35].SIBLINGS
)
ON ROWS 
```

# exception - 无法在 Windows8 Release Preview 中执行 VS2012 Express 或 Ultimate 的空白应用程序

> ID：12730777
> 
> 赞同：0
> 
> 时间：2012-10-04T15:35:30.850
> 
> 标签：exception, windows-8, visual-studio-2012, xamlparseexception

我在 VS Express 2012 或 Ultimate 中创建了一个新的 C# 空白应用程序 (XAML)。该应用程序编译但执行时我总是得到一个异常：

消息：XAML 解析失败。找不到具有名称/密钥 ApplicationHeaderForegroundThemeBrush 的资源

有谁知道为什么会这样？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:40:23.007

我安装了 Windows 8 RTM，现在它可以工作了。

# html - 查看显示不同输出的源代码和 Chrome 开发人员工具

> ID：12730786
> 
> 赞同：4
> 
> 时间：2012-10-04T15:36:04.820
> 
> 标签：html, css, xhtml

在 Chrome 和 Firefox 中查看页面时，它们会显示一个非常小的 h1 标题，并且它会像链接一样改变颜色。生成所有内容的模板看起来应该是这样的。在诊断问题时，当我查看源代码时，相关代码部分如下所示：

```
<div class="page-heading">
    <h1>Title Here</h1>
</div> 
```

但是，当我在 Chrome 的开发者工具中查看它时，它会抛出无关的格式错误的锚标签，这显然是导致悬停行为的原因。这是开发工具的样子：

```
<div class="page-heading">
<h1>
    <a style="font-family: arial; font-size: 9px" <="" a="">Title Here</a>
</h1>                
</div> 
```

此外，在查看站点的本地副本时，开发工具中显示的输出与查看源相同，并且它们都在本地正确呈现。

奇怪的是，所有版本的 IE 都能正确渲染它。Chrome 和 Firefox 的当前版本都以奇怪的方式呈现它。最初我认为这可能是用户代理样式表问题，但如果 CSS 没有问题，那就是 HTML 格式错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T15:42:49.757

在 Chrome 的开发者工具中查看时，结果是 javascript 修改后的结果。 *（这意味着您可以看到由 javascript 动态添加的内容）*

当您将其视为视图源时，它是原始 html 源。

# php - PHP if 语句 - 我可以这样使用它吗？

> ID：12730787
> 
> 赞同：-2
> 
> 时间：2012-10-04T15:36:04.547
> 
> 标签：php

```
if(!isset($_GET['set']) && (($_GET['set'] != 'on') || ($_GET['set'] != 'off'))){
    header('Location: http://google.com');
    exit;
} 
```

我要检查的是 set 是否未设置且 value 未打开或关闭。这是正确的还是有其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:38:23.840

不，你只需要这个：

```
if(!isset($_GET['set'])){
    header('Location: http://google.com');
    exit;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T15:39:30.787

你交换了`&&`和`||`：

```
if (!isset($_GET['set']) || (($_GET['set'] != 'on') && ($_GET['set'] != 'off'))){
    header('Location: http://google.com');
    exit;
} 
```

这些错误不容易发现。它可以帮助划分问题：

```
$isSet   = isset($_GET['set']);
$isOn    = $isSet && $_GET['set'] === 'on';
$isOff   = $isSet && $_GET['set'] === 'off';
$isOnOff = $isOn || $isOff;

if (!$isOnOff) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:41:03.590

您无需再检查`!isset()`。如果`$_GET['set']`未设置，它将没有任何值。

```
if(!isset($_GET['set'])) {
    header('Location: http://google.com');
    exit;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:41:14.040

我认为最好定义你的变量来避免`Notice: Undefined variable:` ，因为你仍然想确保 `$_GET['set']`必须是`on`or `off`;

```
$_GET['set'] = isset($_GET['set']) ? $_GET['set'] : null ;

if(!($_GET['set'] == "on" || $_GET['set'] == "off")){
    header('Location: http://google.com');
    exit;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T15:47:43.267

试试这个

```
if(!isset($_GET['set']))?header('Location: http://google.com'): exit; 
```

# text - 区域相交时两个文件之间的 awk 匹配（欢迎任何解决方案）

> ID：12730800
> 
> 赞同：2
> 
> 时间：2012-10-04T15:36:30.597
> 
> 标签：text, awk, filtering, intersect

这是基于较早的问题[Awk 条件过滤一个文件基于另一个（或其他解决方案）](https://stackoverflow.com/questions/12727108/awk-conditional-filter-one-file-based-on-another-or-other-solutions)

**问题底部的快速总结**

我有一个 awk 程序，如果该行中的值与另一个文本文件中的 3 个值中的 2 个匹配，则从文本文件 'refGene.txt 中的行输出一列。

我需要包含一个额外的标准来查找两个文件之间的匹配项。如果文件 1 中每一行中指定的 2 个数字值的范围与 refGene.txt 中一行中的两个值的范围重叠，则该标准为包含。文件 1 中的一行示例：

```
chr1 10 20
chr2 10 20 
```

以及匹配列 ($3, $5, $ 6) 的文件 2(refGene.txt) 中的示例行：

```
chr1 5 30 
```

当前 awk 程序不将此视为匹配项，因为尽管第一列与第二列或第三列都不匹配，但不匹配。但我想要一种将其视为匹配的方法，因为文件 1 中的区域 10-20 在 refGene.txt 中的 5-30 范围内。但是，文件 1 中的第二行不应匹配，因为第一列不匹配，这是必要的。如果有一种方法可以包含文件 1 中的任何范围与 refGene.txt 中的任何范围重叠的情况，这将非常有用（因此部分重叠也算作匹配）。它还应该替换下面的条件语句，因为它还可以找到下面当前描述的所有情况。

***总结一下***：希望 awk 在以下情况下打印匹配项：file1 中的 $1 与文件 2 中的 $3 匹配并且：file1 中的 $2-$3 范围与 file2 中的 $5-$6 范围完全相交

如果我的问题不清楚，请告诉我。非常感谢任何帮助，谢谢！（解决方案不必在 awk 中）

鲁巴尔

```
FILES=/files/*txt   
for f in $FILES ;
do

    awk '
        BEGIN {
            FS = "\t";
        }
        FILENAME == ARGV[1] {
            pair[ $1, $2, $3 ] = 1;
            next;
        }
        {
            if ( pair[ $3, $5, $6 ] == 1 ) {
                print $13;
            }
        }
    ' $(basename $f) /files/refGene.txt > /files/results/$(basename $f) ;
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:47:44.170

您只需要使用 2 个数组：

```
awk -F '\t' '
  NR == FNR {min[$1] = $2; max[$1] = $3; next}
  ($3 in min) && (min[$3] >= $5) && (max[$3] <= $6) {print $13}
' 
```

`NR==FNR`只是另一种编写方式`FILENAME == ARGV[1]`——它查看行号而不是文件名。

# facebook - 如何在 PHP 中结合 Twitter 和 Facebook Post 并按时间排序？

> ID：12730805
> 
> 赞同：0
> 
> 时间：2012-10-04T15:37:06.000
> 
> 标签：facebook, codeigniter, twitter

如何组合来自 Facebook 和 Twitter 的两个不同数据。并在 PHP 中按 created_time 对它们进行排序？

假设我已经从他们各自的 API 调用中获得了这两个数据。但我似乎无法弄清楚如何将它们组合并正确排序。

例子 ：

```
FB[1] TW[1]
FB[2] TW[2]
FB[3] TW[3] 
```

如果 FB[1] 的 created_time 远早于 TW[1]，则 FB[1] 早于 TW[1]。如果 FB[2] 的 created_time 晚于 TW[2]，则 FB[2] 晚于 TW[1]。如果 FB[3] 的 created_time 与 TW[3] 相同，则帖子将首先来自 FB，然后是 TW。

我把这个伪代码卡在了我的脑海里，我只是不知道如何对其进行排序。

我的项目需要这个。请帮忙。

编辑：我正在使用 CodeIgniter .. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:49:40.587

我不知道您从 fb 和 tw 检索到哪种数据，但如果两者都是数字索引，并且下一个维度具有 created_time 字段，则应该是这样的：

```
function cbSort($a, $b) {
   return $a['created_time]>$b['created_time'];
}

$res=array_merge($fb, $tw);
usort($res, 'cbSort');    
var_dump($res); 
```

无论如何，您要完成的最佳选择是将帖子标准化为通用自定义类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:48:55.050

组合数组 - 然后排序？

```
 function cmp($a, $b) {
    return $a["created_time"] > $b["created_time"];
 }

 $combined = array_merge ($FB, $TW);
 usort($combined , "cmp"); 
```

# asp.net-mvc - 当我从我的网络表单中单击一个按钮时，它永远不会进入 MVC 视图

> ID：12730807
> 
> 赞同：2
> 
> 时间：2012-10-04T15:37:11.630
> 
> 标签：asp.net-mvc, webforms

尝试将 MVC 4 Razor 集成到 Webforms 网站中，遵循 [http://ofps.oreilly.com/titles/9781449320317/ch_MVCandWebForms.html](http://ofps.oreilly.com/titles/9781449320317/ch_MVCandWebForms.html) 在我的 WebForms 应用程序的 web.config

```
<configuration>
<configSections>
    <sectionGroup name="system.web.webPages.razor"
        type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup,System.Web.WebPages.Razor,Version=2.0.0.0,Culture=neutral,PublicKeyToken=31BF3856AD364E35">
        <section name="host"
          type="System.Web.WebPages.Razor.Configuration.HostSection,System.Web.WebPages.Razor,Version=2.0.0.0,Culture=neutral,PublicKeyToken=31BF3856AD364E35"
          requirePermission="false" />
        <section name="pages"
          type="System.Web.WebPages.Razor.Configuration.RazorPagesSection,System.Web.WebPages.Razor,Version=2.0.0.0,Culture=neutral,PublicKeyToken=31BF3856AD364E35"
          requirePermission="false" />
    </sectionGroup>
</configSections>

<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory,System.Web.Mvc,Version=4.0.0.0,Culture=neutral,PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
        <namespaces>
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Routing" />
        </namespaces>
    </pages>
</system.web.webPages.razor>
<connectionStrings>
<add name="ApplicationServices"
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
     providerName="System.Data.SqlClient" />
</connectionStrings>
<appSettings>
    <add key="webpages:Enabled" value="false" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings>
<system.web>

  <httpHandlers>
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
  </httpHandlers>
  <pages validateRequest ="false"
    pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
    pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
    userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
          <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
      <namespaces>
          <add namespace="System.Web.Helpers" />
          <add namespace="System.Web.Mvc" />
          <add namespace="System.Web.Mvc.Ajax" />
          <add namespace="System.Web.Mvc.Html" />
          <add namespace="System.Web.Routing" />
          <add namespace="System.Web.WebPages"/>
      </namespaces>
  </pages>
  <compilation debug="true" targetFramework="4.0">    
      <assemblies>
          <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
          <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
          <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
          <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
          <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
  </compilation>

<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
</authentication>

<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
  </providers>
</membership>

<profile>
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
  </providers>
</profile>

<roleManager enabled="false">
  <providers>
    <clear/>
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
  </providers>
</roleManager>

</system.web>

<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <modules runAllManagedModulesForAllRequests="true"/>

  <handlers>
      <remove name="BlockViewHandler"/>
      <add  name="BlockViewHandler" path="*" verb="*"
            preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
  </handlers>
</system.webServer>
</configuration> 
```

我也遵循了其他博客的完全相同的程序，但没有成功。全球.asax

```
namespace MVCWebFormIntegrate
{
public class Global : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    void Application_Start(object sender, EventArgs e)
    {
        // Code that runs on application startup
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

    }

    void Application_End(object sender, EventArgs e)
    {
        //  Code that runs on application shutdown

    }

    void Application_Error(object sender, EventArgs e)
    {
        // Code that runs when an unhandled error occurs

    }

    void Session_Start(object sender, EventArgs e)
    {
        // Code that runs when a new session is started

    }

    void Session_End(object sender, EventArgs e)
    {
        // Code that runs when a session ends. 
        // Note: The Session_End event is raised only when the sessionstate mode
        // is set to InProc in the Web.config file. If session mode is set to StateServer 
        // or SQLServer, the event is not raised.

    }

}
} 
```

在我的 webform 项目中引用了 Dll

```
System.web.Mvc
System.web.Routing
System.web.Abstractions 
```

但是当我从我的网络表单中单击一个按钮时，它永远不会进入 MVC 视图

```
Response.Redirect("~/Home/Index"); 
```

# windows - Windows CMD 检查变量是否只有大写字母

> ID：12730810
> 
> 赞同：1
> 
> 时间：2012-10-04T15:37:22.677
> 
> 标签：windows, batch-file, cmd

我有一个变量，我需要检查它是否只有大写字母。例如：

ABCDEF 应该匹配

但是 ABcdef 不应该

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:21:22.697

使用 findstr 和 errorlevel。请参见下面的示例。请注意，您可能希望作为模式工作，但[这里](https://stackoverflow.com/questions/2635740/why-does-findstr-not-handle-case-properly-in-some-circumstances)`"^[A-Z]*$"`没有提到。

`%X%`还要注意字符和字符之间没有空格`|`，这很重要。

```
C:\>SET X=ABCDEF
C:\>SET Y=ABcdef
C:\>echo %X%| findstr "^[ABCDEFGHIJKLMNOPQRSTUVWXYZ]*$"
ABCDEF

C:\>echo %errorlevel%
0

C:\>echo %Y%| findstr "^[ABCDEFGHIJKLMNOPQRSTUVWXYZ]*$"

C:\>echo %errorlevel%
1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T17:33:50.417

lessthanideal 有一个解决方案，可以严格验证字符串是否只包含大写字母。但我想知道是否应该允许标点符号和/或数字？如果是这样，那么最好检查是否存在小写字母。

此外，您不需要查看 FINDSTR 命令的输出，因此可以将其重定向为 NUL。并且您可以使用`&&`and`||`运算符来检测成功和失败。

我正在使用`echo(`，以便在变量未定义而不是`ECHO is on.`. 大多数人使用`echo.`，但这种形式在某些情况下可能会失败，并且`echo(`永远不会失败。

```
@echo off
setlocal
set x=ABC_123
set y=AbC_123
echo(%x%|findstr /v "[abcdefghijklmnopqrstuvwxyz]" >nul && (
  echo %x% is Valid
) || (
  echo %x% is Invalid
)
echo(%y%|findstr /v "[abcdefghijklmnopqrstuvwxyz]" >nul && (
  echo %y% is Valid
) || (
  echo %y% is Invalid
) 
```

# c# - 在 XAML + Windows 8 中渲染 Html

> ID：12730813
> 
> 赞同：2
> 
> 时间：2012-10-04T15:37:30.693
> 
> 标签：c#, wpf, xaml, windows-runtime

我的模型中有一个包含 HTML ex 的属性：

```
public class watch
{
public string description=<div>hello<br/> world</div>
} 
```

我需要在 xaml 代码的视图中将此描述与合成物绑定。我应该使用哪种合成器（RichTextblock 或 ...）来呈现这个 html？如果我使用`<textblock text={binding="descrption"}/>`的 html 标签仍然可见，我需要返回到 ligne 并且不显示 html 标签

请问有什么想法吗？？

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:47:47.873

> WebView 控件为我们提供了一种在应用程序中托管 HTML 数据的方法。但是如果我们查看它的 Source 属性，我们会发现它需要网页的 Uri 来显示。我们的 HTML 数据只是一个 HTML 字符串。它没有我们可以绑定到 Source 属性的 Uri。幸运的是，有一个 NavigateToString 方法可以将我们的 HTML 字符串传递给它。

这样做：

```
ContentView.NavigateToString(w.description); 
```

[http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:42:56.873

看一下[WebView](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview)控件。有一种`NavigateToString`方法可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-20T23:59:05.977

还有另一种方法，即`RichTextBlock`从 Html 文本构建 XAML 的部分（块）。它比 WebView 涉及更多的工作，并且很难支持所有标签，但如果您只需要有限的 html 标签子集并且想要更多格式控制，它非常方便。看看[这个回购](https://github.com/xleon/XAMLHtml)

您基本上绑定了您的描述属性：

```
<RichTextBlock html:Properties.Html="{Binding description}"/> 
```

这是一个例子：

[![在此处输入图像描述](../Images/54fe4494126128caf9f238a3bc57a985.png)](https://i.stack.imgur.com/lKgWm.png)

# silverlight - 需要 Silverlight 模板重新加载

> ID：12730816
> 
> 赞同：0
> 
> 时间：2012-10-04T15:37:43.333
> 
> 标签：silverlight, mvvm, datatemplate, master-detail

我正在实现一个主从视图（也尝试使用 MVVM）。Master 是一个`ListBox`包含 5 种不同类型的项目（所有在 Master 中的格式相同）。根据在 Master 中选择的对象类型，Detail 具有不同的表单字段。我正在使用一个`DataTemplateSelector`，遵循这个[CodeProject 教程](http://www.codeproject.com/Articles/92439/Silverlight-DataTemplateSelector "代码项目教程")。根据中选择的项目选择了正确的模板`ListBox`，但是存在一个奇怪的引用问题。

如果我从`Type1`master 中的一个项目转到另一个项目`Type1`，它们都将使用完全相同的模板。这听起来不错，但由于它是同一个引用，因此第一项中正在进行的任何动画都将显示在第二项中。**如何强制单独应用模板，以便一个视图中的动画与另一个视图对模板的使用分开？**

代码示例：（`ContentControl`呈现细节）

```
<ContentControl Content="{Binding Path=CVS.View.CurrentItem}">
    <ContentControl.ContentTemplate>
        <DataTemplate>
            <vms:MyTemplateSelector Content="{Binding}">
                <vms:MyTemplateSelector.Template1>
                    <DataTemplate>
                        <views:Type1View />
                    </DataTemplate>
                </vms:MyTemplateSelector.Template1>
                <vms:MyTemplateSelector.Template2>
                    <DataTemplate>
                        <views:Type2View />
                    </DataTemplate>
                </vms:MyTemplateSelector.Template2>
                <vms:MyTemplateSelector.Template3>
                    <DataTemplate>
                        <views:Type3View />
                    </DataTemplate>
                </vms:MyTemplateSelector.Template3>
                <vms:MyTemplateSelector.Template4>
                    <DataTemplate>
                        <views:Type4View />
                    </DataTemplate>
                </vms:MyTemplateSelector.Template4>
                <vms:MyTemplateSelector.Template5>
                    <DataTemplate>
                        <views:Type5View />
                    </DataTemplate>
                </vms:MyTemplateSelector.Template5>
            </vms:MyTemplateSelector>
        </DataTemplate>
    </ContentControl.ContentTemplate>
</ContentControl> 
```

**编辑**- 添加动画代码

此动画代码通过作用于 SelectionChanged 事件的行为在 ComboBoxes 上执行。在运行它之前，我会检查 ComboBox 是否有焦点。此动画仅在未聚焦时才会发生，作为必须修改其先前选择的视觉提示。

```
public void AnimateComboBox(ComboBox cbo)
{
    LinearGradientBrush myBrush = new LinearGradientBrush();
    myBrush = Extensions.Clone<LinearGradientBrush>(cbo.BorderBrush as LinearGradientBrush);
    cbo.BorderBrush = myBrush;

    Storyboard sb = new Storyboard();
    sb.Duration = new Duration(TimeSpan.FromMilliseconds(3000));

    foreach(GradientStop s in myBrush.GradientStops)
    {
        ColorAnimation anim = new ColorAnimation();
        anim.To = Colors.Red;
        anim.Duration = new Duration(TimeSpan.FromSeconds(0.5));
        anim.AutoReverse = true;
        anim.RepeatBehavior = RepeatBehavior.Forever;

        Storyboard.SetTarget(anim, s);
        Storyboard.SetTargetProperty(anim, new PropertyPath(GradientStop.ColorProperty));

        sb.Children.Add(anim);
    }

    sb.Begin();
} 
```

Extensions.Clone 来自[Silverlight 论坛](http://forums.silverlight.net/p/1730/51694.aspx "Silverlight 论坛")

# c# - 动态会话变量存储（表在第三次尝试时不起作用）

> ID：12730818
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:37:46.793
> 
> 标签：c#, asp.net, dynamic, textbox

我以前从某人那里得到了代码，并根据自己的喜好对其进行了修改。但是，我可能误解了他们的代码，但是在第三次单击按钮时，表格变得异常。我正在制作一个带有表格的动态文本框，并在每次单击“单击此处添加事故”后将其保存到会话中。

第二次点击：

![第二次点击](../Images/31184ec22de20ec254d723372acff1b6.png)

第三次点击：

![第三次点击](../Images/b0deeb906aa79d9f6daab0280b2bf0f6.png)

我已经尝试过调试它，但它为什么会这样做是没有意义的。我相信我的代码是正确的，我不确定出了什么问题。

```
public partial class employment_driversapplication_History : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}

protected int TotalNumberAdded
{
    get { return (int)(ViewState["TotalNumberAdded"] ?? 0); }
    set { ViewState["TotalNumberAdded"] = value; }

}

protected void AccidentButton_Click(object sender, EventArgs e)
{
    TotalNumberAdded++;
   // AddControls(TotalNumberAdded);
    BuildControls();

}
protected void PrevPage_Click(object sender, EventArgs e)
{

    Response.Redirect("employment_driversapplication_personalinfo.aspx");

}

private IList<TextBox> AddedControls = new List<TextBox>();
private IList<Label> AddedControlsLabel = new List<Label>();
protected override void CreateChildControls()
{
    BuildControls();
    base.CreateChildControls();
}

private void BuildControls()
{

    AccidentPlaceHolder.Controls.Add(new LiteralControl("<table><tr>"));
    AccidentPlaceHolder.Controls.Add(new LiteralControl("<br />"));

    for (var Nl = 0; Nl < TotalNumberAdded; Nl++)
    {
        var idNL = String.Format("NatureLabel{0}", Nl);

        //Check if control was already added 
        //only create controls that are new for this postback
        if (AccidentPlaceHolder.FindControl(idNL) == null)
        {
            var NLabel = new Label() { ID = idNL };
            NLabel.Text = "Nature Of Accident: ";
            AccidentPlaceHolder.Controls.Add(new LiteralControl("<td class='title-text'>"));
            AccidentPlaceHolder.Controls.Add(NLabel);

            AddedControlsLabel.Add(NLabel);

        }
    }

    for (var x = 0; x < TotalNumberAdded; x++)
    {
        var idN = String.Format("NatureTextBox{0}", x);

        //Check if control was already added 
        //only create controls that are new for this postback
        if (AccidentPlaceHolder.FindControl(idN) == null)
        {
            var NtextBox = new TextBox() { ID = idN };

            AccidentPlaceHolder.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px'>"));
            AccidentPlaceHolder.Controls.Add(NtextBox);

            AddedControls.Add(NtextBox);

        }
    }

    for (var DL = 0; DL < TotalNumberAdded; DL++)
    {
        var idDL = String.Format("DateLabel{0}", DL);

        //Check if control was already added 
        //only create controls that are new for this postback
        if (AccidentPlaceHolder.FindControl(idDL) == null)
        {
            var DLabel = new Label() { ID = idDL };
            DLabel.Text = "Date: ";
            AccidentPlaceHolder.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
            AccidentPlaceHolder.Controls.Add(DLabel);

            AddedControlsLabel.Add(DLabel);

        }
    }

    for (var d = 0; d < TotalNumberAdded; d++)
    {
        var idD = String.Format("DateTextBox{0}", d);
        if (AccidentPlaceHolder.FindControl(idD) == null)
        {

            var DtextBox = new TextBox() { ID = idD };

            AccidentPlaceHolder.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px'>"));
            AccidentPlaceHolder.Controls.Add(DtextBox);
            AddedControls.Add(DtextBox);
            AccidentPlaceHolder.Controls.Add(new LiteralControl("</td></tr>"));

        }

    }

    for (var FL = 0; FL < TotalNumberAdded; FL++)
    {
        var idFL = String.Format("FatalLabel{0}", FL);

        //Check if control was already added 
        //only create controls that are new for this postback
        if (AccidentPlaceHolder.FindControl(idFL) == null)
        {
            var FLabel = new Label() { ID = idFL };
            FLabel.Text = "Fatalities: ";
            AccidentPlaceHolder.Controls.Add(new LiteralControl("<tr><td class='title-text'>"));
            AccidentPlaceHolder.Controls.Add(FLabel);

            AddedControlsLabel.Add(FLabel);

        }
    }
    for (var f = 0; f < TotalNumberAdded; f++)
    {
        var idF = String.Format("FatalTextBox{0}", f);
        if (AccidentPlaceHolder.FindControl(idF) == null)
        {

            var FtextBox = new TextBox() { ID = idF };
            AccidentPlaceHolder.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px'>"));
            AccidentPlaceHolder.Controls.Add(FtextBox);
            AddedControls.Add(FtextBox);

        }

    }

    for (var IL = 0; IL < TotalNumberAdded; IL++)
    {
        var idIL = String.Format("InjuryLabel{0}", IL);

        //Check if control was already added 
        //only create controls that are new for this postback
        if (AccidentPlaceHolder.FindControl(idIL) == null)
        {
            var ILabel = new Label() { ID = idIL };
            ILabel.Text = "Injuries: ";
            AccidentPlaceHolder.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
            AccidentPlaceHolder.Controls.Add(ILabel);

            AddedControlsLabel.Add(ILabel);

        }
    }
    for (var i = 0; i < TotalNumberAdded; i++)
    {
        var idI = String.Format("InjuryTextBox{0}", i);
        if (AccidentPlaceHolder.FindControl(idI) == null)
        {

            var ItextBox = new TextBox() { ID = idI };

            AccidentPlaceHolder.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px'>"));
            AccidentPlaceHolder.Controls.Add(ItextBox);
            AddedControls.Add(ItextBox);
            AccidentPlaceHolder.Controls.Add(new LiteralControl("</td></tr>"));

        }

    }
    AccidentPlaceHolder.Controls.Add(new LiteralControl("</table>"));
}

protected override void OnPreRender(EventArgs e)
{
    foreach (var ctrl in AddedControls)
    {
        var key = ctrl.ID.Replace("TextBox", String.Empty);
        Session[key] = ctrl.Text;
    }

    foreach (string session in Session.Keys)
    {
        System.Diagnostics.Debug.WriteLine(String.Format("{0} = {1}", session, Session[session]));
    }
    base.OnPreRender(e);
}

} 
```

任何帮助将不胜感激......我一直在寻找和调试它几个小时，但没有任何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:54:39.927

Have you tried implementing a repeater for this? It would be a lot easier that adding literal controls, as it can quickly get out of hand and makes it more difficult to debug.

One of the uses of a repeater control is to repeat an output of html for each data item. In your case you would repeat the output of the table for each accident.

For example, this would be your code on the front-end:

```
<asp:Repeater ID="rptAccidents" runat="server">
    <ItemTemplate>
        <table>
            <tr>
                <td class="title-text">
                    Nature Of Accident
                </td>
                <td class='title-text' width='180px'>
                    <asp:TextBox ID="txtNature" runat="server" />
                </td>
                <td class="title-text">
                    Date
                </td>
                <td class='title-text' width='180px'>
                    <asp:TextBox ID="txtDate" runat="server" />
                </td>
            </tr>
            ....NEXT ROWS
        </table>
    </ItemTemplate>
    <SeparatorTemplate>
        <br />
    </SeparatorTemplate>
</asp:Repeater> 
```

And this would be in your code-behind:

```
 //HERE YOU ARE ATTACHING TO THE REPEATER'S ITEMDATABOUND EVENT
    //THIS ALLOWS YOU TO CONTROL THE OUTPUT FOR EACH ACCIDENT
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        this.rptAccidents.ItemDataBound += rptAccidents_ItemDataBound;
    }

    //THIS IS THE CODE THAT WILL RUN FOR EACH DATA ITEM IN THE REPEATER'S DATA SOURCE
    void rptAccidents_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        //in this case, you only care about the item templates
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            //cast your dataitem here
            Accident data = (Accident)data;
            //find the appropriate textbox (or any other control that is runat="server", and set the value.
            ((TextBox)e.Item.FindControl("txtNature")).Text = data.Nature;
            ((TextBox)e.Item.FindControl("txtDate")).Text = data.Date;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.rptAccidents.DataSource = //I AM NOT SURE WHERE YOU ARE STORING THE DATA. BUT HERE IS WHERE YOU WOULD SET THE REPEATERS DATA SOURCE
            this.rptAccidents.DataBind(); //THIS LINE CAUSES THE REPEAT TO BIND ITSELF TO YOUR DATA SOURCE
        }
    } 
```

# django - Django用L返回用户模型ID

> ID：12730819
> 
> 赞同：3
> 
> 时间：2012-10-04T15:37:47.360
> 
> 标签：django, model

这个问题直到现在才出现 - 这里是：当我尝试从 User 模型中获取用户 ID 时，它返回用户 ID 和字母 L。

```
>>> from django.contrib.auth.models import User

>>> u = User.objects.get(username='testuser')

>>> u.id

1L 
```

我相信当我尝试在另一个表中使用用户 ID 作为外键时，这就是问题所在。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T15:40:42.843

“L”后缀只是 python 告诉你它使用一个大整数来表示 ID。它只会影响您在控制台上看到的内容，并且完全不应该干扰 python 将该数字用于其他目的的方式。

# javascript - for 循环中的 appendChild 仅添加 1 个孩子

> ID：12730824
> 
> 赞同：12
> 
> 时间：2012-10-04T15:38:09.767
> 
> 标签：javascript, appendchild

在 JavaScript 中，我正在创建一个带有 HTML 表格的网格（您在 Photoshop 中看到的网格类型）。网格大小将是可变的，即可由用户更改，因此必须计算每个网格正方形的大小并除以可用像素数以获得精确大小的网格。

我已经完成了所有这些，但是在添加必要的表格元素来创建网格时遇到了问题。我的代码处于完整的工作状态，除了当我`appendChild()`在 for 循环中使用该函数时，它只附加一个子级，而它应该附加到几百个。

我的代码：

```
grid.show = function(event)
{
    var e = event;

    if(grid.show_grid == false)
    {
        grid.show_grid = true;

        parent.document.getElementById("grid_table").style.display = "block";

        // Get grid (table) and create some elements.
        grid.get_grid = parent.document.getElementById("grid_table");
        grid.tr       = parent.document.createElement("tr");
        grid.td       = parent.document.createElement("td");

        // Clear the grid of all squares so we don't have to worry about subtracting anything.
        grid.get_grid.innerHTML = "";

        // Calculate the number of horizontal and vertical squares.
        var horizontal = Math.ceil(grid.total_width / grid.size);
        var vertical   = Math.ceil(grid.total_height / grid.size);

        // This was a nested loop, removed for demonstration.
        // Attempting to add 10 "<tr><td></td></tr>" to the table.
        for(var j = 0; j < 10; j++)
        {
            grid.tr.appendChild(grid.td);
        }

        //console.log(grid.tr);

        // Add the elements to the table.
        grid.get_grid.appendChild(grid.tr);

    }
    else
    {   
        grid.show_grid = false;
        parent.document.getElementById("grid_table").style.display = "none";
    }
} 
```

这只会返回一个包含单个表数据的表行，如下所示：

```
<tr>
    <td></td>
</tr> 
```

我已经看过[这个页面](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)和[这个页面](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)，它们听起来很有希望，但我就是不知道如何使它工作。

*编辑*：代码现在工作，解决方案：

```
grid.show = function(event)
{
    var e = event;

    if(grid.show_grid == false)
    {
        grid.show_grid = true;

        parent.document.getElementById("grid_table").style.display = "block";

        grid.get_grid           = parent.document.getElementById("grid_table");
        grid.tr                 = null;
        grid.td                 = null;
        grid.get_grid.innerHTML = "";

        var horizontal = Math.ceil(grid.total_width / grid.size);
        var vertical   = Math.ceil(grid.total_height / grid.size);

        for(var i = 0; i < vertical; i++)
        {
            grid.tr = parent.document.createElement("tr");

            for(var j = 0; j < horizontal; j++)
            {
                grid.td = parent.document.createElement("td");

                grid.td.width = grid.size;
                grid.td.height = grid.size;

                grid.tr.appendChild(grid.td);
            }
            grid.get_grid.appendChild(grid.tr);
        }
    }
    else
    {   
        grid.show_grid = false;
        parent.document.getElementById("grid_table").style.display = "none";
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-04T15:40:04.953

您一遍又一遍地附加相同的元素。`document.createElement`每次您希望拥有一个新元素时都需要调用。

编辑：如果元素设置非常复杂并且可能包含子元素，那么您也可以使用[Node.cloneNode](https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-04T15:42:46.763

如果要制作元素的一份副本，则需要克隆它。使用[克隆节点（）](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)

所以改变

```
grid.tr.appendChild(grid.td); 
```

到

```
grid.tr.appendChild(grid.td.cloneNode(true)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-04T15:42:35.460

```
for(var j = 0; j < 10; j++)
{
        grid.tr.appendChild(grid.td);
} 
```

应该

```
for(var j = 0; j < 10; j++) {
    var newTd = parent.document.createElement('td');
    grid.tds.push(newTd); // if you need it, not sure why though
    grid.tr.appendChild(newTd);
} 
```

# sql-server - 一个打开表单中的计时器能否在其他打开表单上中断代码

> ID：12730825
> 
> 赞同：0
> 
> 时间：2012-10-04T15:38:16.583
> 
> 标签：sql-server, vb.net, timer

我知道描述有点模糊，因此更好的描述。

我有 1 个打开的 Form1，上面有一个计时器，每分钟更新一次。

但是我在另一个form2上工作并且Form1是打开的，如果我在form2上按下一个按钮将数据发送到SQL（插入语句），计时器会中断代码，因此数据不会保存在SQLserver中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:46:43.253

不会。WinForm 框架在单线程上运行。因此，如果 Form2 当前正在执行数据库命令，则 UI 线程将一直忙到该命令完成。在线程空闲之前，不会处理其他 UI 活动。您可以使用`System.Timers.Timer`or`System.Threading.Timer`代替，因为它们在单独的线程上运行，但是，如果计时器的目的是以某种方式修改 UI，例如显示状态或进度，那么 UI 的更改将不会发生，直到无论如何，UI线程是免费的。处理这种情况的最佳方法是，在单独的线程上执行耗时的工作，以便 UI 线程在工作完成时是空闲的。在表单中执行此操作的最简单方法是使用`BackgroundWorker`零件。它是一个组件，因此您可以从表单设计器工具箱中将一个组件拖到您的表单上。

# java - 如何初始化在封闭类型中定义的变量

> ID：12730829
> 
> 赞同：0
> 
> 时间：2012-10-04T15:38:23.980
> 
> 标签：java, wicket

它应该很简单，但我无法弄清楚..我有这个代码：

```
Form<?> form2 = new Form<Void>("form2") {
    @Override
    protected void onSubmit() {
        ...
    dataView = new DataView("listview", new ListDataProvider(list));
        ...
    }
}
add(dataView); 
```

如何定义dataView以及在哪里？如果我尝试`final DataView dataView = null;`发生错误：`The final local variable dataView cannot be assigned, since it is defined in an enclosing type`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:46:59.383

您不能分配给最终变量，并且只能从封闭类型内部引用最终变量。但是，您可以从封闭类型内部改变最终变量。

如果`DataView`不是立即可用，您可能需要一个阻塞队列，该队列将阻塞直到可用：

```
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue; 

final BlockingQueue<DataView> dataViews = new ArrayBlockingQueue<DataView>();
Form<?> form2 = new Form<Void>("form2") {
   @Override
   protected void onSubmit() {
      ...
      dataViews.offer(new DataView("listview", new ListDataProvider(list)));
      ...
   }
};
//form is submitted in a different thread somewhere between here and add
...
add(dataViews.take()); 
```

现在不可能从你给我们的上下文中分辨出来，但最简单的解决方案，不需要任何最终变量，就是`add(dataView)`像这样在 submit 内部调用：

```
Form<?> form2 = new Form<Void>("form2") {
   @Override
   protected void onSubmit() {
      ...
      DataView dataView = new DataView("listview", new ListDataProvider(list));
      add(dataView); 
      ...
   }
}; 
```

# ruby - Haml + Markdown 不起作用

> ID：12730834
> 
> 赞同：1
> 
> 时间：2012-10-04T15:38:40.783
> 
> 标签：ruby, haml, markdown

我是 Haml 的新手，发现我可以将 Markdown 用于我的内容，但是每当我尝试在我的 Haml 中使用 Markdown 时，我都会收到此错误：

```
Haml::Error at /
Can't run Markdown filter; required 'rdiscount' or 'peg_markdown' or 'maruku' or 'bluecloth', but none were found 
```

我发现了这个问题： [haml with markdown claims rdiscount not found](https://stackoverflow.com/questions/5424504/haml-with-markdown-claims-rdiscount-not-found)，但是，这对我不起作用。我使用出色的[Fire.app](http://fireapp.handlino.com)作为观察者/编译器/服务器，并且创建了一个 Gemfile（并运行 bundle install）：

```
gem 'rdiscount' # Markdown
gem 'RedCloth'  # Textile 
```

所以我很难过。我已经重置了 Fire.app，甚至我的机器，但我就是无法让这个错误消失。

我在 Mac OS X 10.8.2、ruby ruby​​ 1.8.7、rdiscount 1.6.8、haml 3.1.7 上，而且我没有使用 rails。

有任何想法吗？

*** 更新 1 *** 从命令行执行 haml 工作：| markdown 按预期处理，这意味着 Fire.app 一定有问题。我会继续调查...

*** 更新 2 *** 我提交了一份错误报告，看起来它已被修复（手指交叉...）：[https ://github.com/handlino/FireApp/issues/66](https://github.com/handlino/FireApp/issues/66)

*** 更新 3 *** 是的，我可以确认 Fire.app 的新版本（尚未发布）有效 :)

# wpf - MSBuild 在 C# WPF 应用程序项目上失败

> ID：12730835
> 
> 赞同：4
> 
> 时间：2012-10-04T15:38:40.923
> 
> 标签：wpf, visual-studio-2010, c#-4.0, msbuild

我已经被难住了大约 3 天，现在试图解决我一直遇到的 MSBuild 问题。在我的解决方案中，我有 10 个项目。9 个项目是 C# 类项目，1 个作为主要 EXE 的项目是 C# WPF 应用程序项目。

我创建了一个门控 MSBuild，它在签入 TFS 服务器时触发。到目前为止，MSBuild 中只包含了 9 个 C# 类项目，因为 C# WPF 应用程序项目仍在构建中。C# WPF 应用程序项目现已完成并在多台计算机上完全正常工作（运行时和编译时），没有问题。

我更改了构建以包含新的 C# WPF 应用程序项目，以便可以签入它。问题在于现在包含此 C# WPF 应用程序项目，MSBuild 失败并出现以下两个错误：

```
 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.WinFX.targets (269): File 'Properties\DesignTimeResources.xaml' cannot be found.
 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.WinFX.targets (269): The project file contains a property value that is not valid. 
```

考虑到整个解决方案在多台计算机上构建和工作，MSBuild 因此失败似乎很奇怪。如果我从 MSBuild 中删除 C# WPF 应用程序项目，一切都会再次正常，因此 C# WPF 应用程序项目有些奇怪，导致 MSBuild 失败。

我在这里变得绝望，所以非常感谢任何帮助。提前感谢您提供的任何帮助或见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:01:10.470

这看起来好像您在签入时包含了文件“Properties\DesignTimeResources.xaml”。

如果您之前只是在多台机器上复制或压缩文件，只需检查以确保它包含在进入 TFS 的文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-05T15:03:14.370

MS Expression Blend 喜欢将`Properties\DesignTimeResources.xaml`文件添加到您的项目中，以便它知道在哪里可以找到通用资源，例如您的全局 styles.xaml 文件。

如果您在 Expression Blend 中打开一个项目，它会将此文件添加到项目中，但它可能不会将该文件添加到源代码控制中。Visual Studio 中的修复是转到解决方案资源管理器，导航到属性，然后右键单击 DesignTimeResources.xaml。如果您不再使用 Blend，那么只需删除该文件，否则将其添加到源代码控制中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-01T02:04:28.737

我在一个 VS2017 WPF 项目中遇到了类似的错误（BG1002：找不到文件），该项目无法构建，因为尽管我不再使用该图标，但缺少某个图标文件。我通过手动编辑 csproj 文件以重命名记事本中的引用解决了这个问题。

# internet-explorer - FireBreath 从 Internet Explorer 写入 AppData LocalLow

> ID：12730836
> 
> 赞同：0
> 
> 时间：2012-10-04T15:38:46.137
> 
> 标签：internet-explorer, npapi, firebreath, userappdatapath

我有一个 FireBreath 插件源，有人写道，我试图使其与 Internet Explorer 兼容。在这个插件中，`.flv`下载视频，然后在 Windows CMD.EXE 中执行 FFMPEG 以将其转换`.flv`为另一种媒体格式。该命令从`CreateProcess(...)`.

我的问题是该`CreateProcess`命令总是返回错误代码 5，我认为这是拒绝访问。该命令在命令行上工作（FFMPEG 正确地进行了转换），但不是来自插件。

请注意，我已经获得了 AppData 路径：

```
string appDataPath = FB::System::getLocalAppDataPath("My Company Name LLC") 
```

是否必须在某处添加注册表项才能“初始化”此路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:58:40.557

假设它也不适用于 Chrome/Firefox。

1.  如果您尝试运行自己的可执行文件 - 指定绝对路径。
2.  尝试使用在同一文件夹中加载 DLL `LoadLibrary`- 我认为这可以提供有关路径是否正确的更好信息。

如果 IE 是您遇到问题的唯一浏览器，请阅读[理解和在保护模式下工作 Internet Explorer](http://msdn.microsoft.com/en-us/library/bb250462%28v=vs.85%29.aspx)。

另请参阅[FireBreath 提示和技巧](http://www.firebreath.org/display/documentation/Tips+and+Tricks)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:55:28.993

getLocalAppDataPath 只返回用户配置文件中 localLow 区域的路径；在这种情况下，它很可能会给你：

```
C:\Users\YourUser\AppData\LocalLow\My Company Name LLC 
```

它不能确保已经创建了目录或类似的东西。如果你想这样做，我建议[使用 boost::filesystem](https://stackoverflow.com/questions/5981947/)，因为那将是跨平台的，但你真的可以使用任何东西。

[如何确定文件夹是否存在以及如何创建文件夹？](https://stackoverflow.com/questions/5621944)还有一些其他的好主意，主要使用系统 API 调用（仅限 Windows）。

# ios - 使用自定义覆盖从 plist 加载多个注释

> ID：12730839
> 
> 赞同：1
> 
> 时间：2012-10-04T15:38:52.583
> 
> 标签：ios, mkannotation

我似乎无法弄清楚为什么我会收到这个错误并且很难过自己：

> PlaceMark 类的实例 0x7c763e0 已被释放，而键值观察者仍向其注册。观察信息被泄露，甚至可能被错误地附加到其他对象上。在 NSKVODeallocateBreak 上设置断点以在调试器中停止。这是当前的观察信息：`<NSKeyValueObservationInfo 0x7c77220> ( <NSKeyValueObservance 0x7c77070: Observer: 0x7ba10c0, Key path: coordinate, Options: <New: NO, Old: NO, Prior: YES> Context: 0x0, Property: 0x7c76b00>)`

我的 Plist 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>caloosahatchee</key>
<array>
    <dict>
        <key>name</key>
        <string>Punta Rassa Boat Ramp</string>
        <key>latitude</key>
        <string>26.48444444444444</string>
        <key>longitude</key>
        <string>-82.010277777777778</string>
        <key>coordinates</key>
        <string>N26 29 04 W81 00 37</string>
        <key>description</key>
        <string>Boat ramp with fish cleaning station and several long docks.\n(239) 533-7275</string>
        <key>icons</key>
        <string>CFILH</string>
    </dict>
    <dict>
        <key>name</key>
        <string>Cape Harbour</string>
        <key>latitude</key>
        <string>26.48015</string>
        <key>longitude</key>
        <string>-81.96936</string>
        <key>coordinates</key>
        <string>N26 32 38 W82 00 28</string>
        <key>description</key>
        <string>Marina with bait/tackle shop, kayak rentals and access to restaurant and shops. Boat docks and paddle craft landing.\n(239) 945-4330</string>
        <key>icons</key>
        <string>FNLJI</string>
    </dict>
    <dict>
        <key>name</key>
        <string>Tarpon Point</string>
        <key>latitude</key>
        <string>26.53922222222222</string>
        <key>longitude</key>
        <string>-82.00027777777777778</string>
        <key>coordinates</key>
        <string>N26 32 21.2 W82 00 01</string>
        <key>description</key>
        <string>Full-service marina and resort with special kayak launch (fee), boat/kayak rentals, charters and ship’s store.\n(239) 542-6222</string>
        <key>icons</key>
        <string>FMNLJI</string>
    </dict>
</array>
</dict>
</plist> 
```

这是我的 viewForAnnotation 和 CallOutAccessory：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation: (id <MKAnnotation>)annotation {
MKPinAnnotationView *pinView = nil;
if(annotation != mapview.userLocation)
{
    static NSString *defaultPinID = @"pin";
    pinView = (MKPinAnnotationView *)[mapview dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
    if ( pinView == nil ) pinView = [[[MKPinAnnotationView alloc]
                                      initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];
    pinView.pinColor = MKPinAnnotationColorGreen;
    pinView.canShowCallout = YES;
    pinView.animatesDrop = YES;
    pinView.rightCalloutAccessoryView = [[UIButton buttonWithType:UIButtonTypeDetailDisclosure] retain];
    pinView.backgroundColor = [UIColor clearColor];

} else {

    CLLocationCoordinate2D userLoc;
    userLoc.latitude = mapview.userLocation.location.coordinate.latitude;
    userLoc.longitude = mapview.userLocation.location.coordinate.longitude;

    int degrees = userLoc.latitude;
    double decimal = fabs(userLoc.latitude - degrees);
    int minutes = decimal * 60;
    double seconds = decimal * 3600 - minutes * 60;
    NSString *lat = [NSString stringWithFormat:@"%d° %d' %1.4f\"", degrees, minutes, seconds];

    degrees = userLoc.longitude;
    decimal = fabs(userLoc.longitude - degrees);
    minutes = decimal * 60;
    seconds = decimal * 3600 - minutes * 60;
    NSString *longt = [NSString stringWithFormat:@"%d° %d' %1.4f\"", degrees, minutes, seconds];

    NSString *coordinate_l = [NSString stringWithFormat:@"%@ %@ %@",lat,@", ",longt];

    [mapview.userLocation setSubtitle:coordinate_l];
    [mapview.userLocation setTitle:@"Coordinates:"];
}
return pinView;
}

- (void)mapView:(MKMapView *)mapView pinView:(MKAnnotationView *)pinView calloutAccessoryControlTapped:(UIControl *)control {
dViewController = [[detailViewController alloc] initWithNibName:@"detailViewController" bundle:nil];

PlaceMark *theAnnotation = (PlaceMark *) pinView.annotation;

dViewController.descriptiontext = theAnnotation.description;
dViewController.titletext = theAnnotation.title;
dViewController.icontext = theAnnotation.text;

[self presentModalViewController:dViewController animated:true];
[dViewController release];
} 
```

这是我的 PlaceMark 课程：

```
@interface PlaceMark : NSObject <MKAnnotation> {
CLLocationCoordinate2D coordinate;

NSString *currentSubTitle;
NSString *currentTitle;
NSString *currentDescription;
NSString *currentText;
}

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *currentTitle;
@property (nonatomic, copy) NSString *currentSubTitle;
@property (nonatomic, copy) NSString *currentDescription;
@property (nonatomic, copy) NSString *currentText;

- (NSString *)title;
- (NSString *)subtitle;
- (NSString *)description;
- (NSString *)text;

-(id)initWithCoordinate:(CLLocationCoordinate2D) c;

@end

@implementation PlaceMark
@synthesize coordinate,currentTitle,currentSubTitle,currentDescription,currentText;

- (NSString *)subtitle{
return currentSubTitle;
}
- (NSString *)title{
return currentTitle;
}
- (NSString *)description{
return currentDescription;
}
- (NSString *)text{
return currentText;
}

-(id)initWithCoordinate:(CLLocationCoordinate2D) c{
coordinate=c;
NSLog(@"%f,%f",c.latitude,c.longitude);
return self;
}

- (void)dealloc
{
self.currentDescription=nil;
self.currentText=nil;
self.currentSubTitle=nil;
self.currentTitle=nil;

[super dealloc];
}

@end 
```

注释的自定义加载功能：

```
- (void)loadLeeAnnotations{
//retrieve path of plist file and populate relevant types with its information
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"Coordinates" ofType:@"plist"];
NSDictionary *rootPlistDict = [[NSDictionary alloc] initWithContentsOfFile:plistPath];
NSMutableArray *arboAnnotations = [[NSMutableArray alloc] init];

//NSMutableDictionary *arboDict = [rootPlistDict objectForKey:key];
NSArray *annotationsArray = [rootPlistDict objectForKey:@"lee"];

CLLocationCoordinate2D workingCoordinate;
for(NSDictionary *annotationContainerDict in annotationsArray){

    workingCoordinate.latitude = [[annotationContainerDict objectForKey:@"latitude"] doubleValue];
    workingCoordinate.longitude = [[annotationContainerDict objectForKey:@"longitude"] doubleValue];
     //NSLog(@"latitude: %f Longitude %f",workingCoordinate.latitude,workingCoordinate.longitude);
    PlaceMark *addAnn = [[[PlaceMark alloc] initWithCoordinate:workingCoordinate] autorelease];
    [addAnn setCurrentTitle:[annotationContainerDict objectForKey:@"name"]];
    [addAnn setCurrentSubTitle:[annotationContainerDict objectForKey:@"coodinates"]];
    [addAnn setCurrentText:[annotationContainerDict objectForKey:@"icons"]];
    [addAnn setCurrentDescription: [annotationContainerDict objectForKey:@"description"]];
    [arboAnnotations addObject:addAnn];

}//for
//NSLog(@"The content of array is %@",arboAnnotations);
mapview.delegate = self;
[mapview addAnnotations:arboAnnotations];
[arboAnnotations release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:57:18.520

我把它修好了谢谢安娜！关于删除的评论

```
[addAnn release]; 
```

从自定义注释加载类似乎已经解决了这个问题。现在我需要让我的注释弹出窗口显示它们似乎不可点击并且当我点击它们时什么也不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:55:52.560

该错误通常意味着坐标无效。
纬度必须介于 -90 到 90 之间，经度必须介于 -180 到 180 之间。

也许代码使用纬度的经度值，反之亦然（或者 plist 中的值可能是向后的）？

# ruby-on-rails - 如何检查对象是否具有时间值？

> ID：12730840
> 
> 赞同：1
> 
> 时间：2012-10-04T15:38:52.767
> 
> 标签：ruby-on-rails, ruby

```
a = '12' 
```

我想检查这个对象是否有时间值。假设我愿意`a.try(:to_time)`。这将返回一个`ArgumentError`. 我可以检查一个值是否是接收`true`或`false`响应的时间值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:48:29.850

您可以使用`respond_to?`来检查对象是否响应该方法。

```
a.respond_to?(:to_time) 
```

* * *

编辑

它提出`ArgumentError`了我之前错过的问题。`respond_to?`有帮助`NoMethodError`，但不是`ArgumentError`。

您应该查看 的`to_time`定义，以了解该方法有多少个参数以及哪些参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T15:57:38.250

```
a = "12"
p a.is_a?(Time)      #false
p a.class  == String #true
p a.is_a?(Object)    #true (a's class or superclass) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T15:50:46.500

要解析时间，请尝试使用`Time.parse`：

```
irb(main):002:0> Time.parse('12:00')
=> 2012-10-04 12:00:00 -0700
irb(main):003:0> Time.parse('the time is 12:00')
=> 2012-10-04 12:00:00 -0700
irb(main):005:0> Time.parse('jan 1, 1970 11:11')
=> 1970-01-01 11:11:00 -0700 
```

请注意，这会默默地失败：

```
irb(main):004:0> Time.parse('12 noon')
=> 2012-10-12 00:00:00 -0700 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-04T15:51:28.277

似乎没有内置的方法可以做到这一点。但是你总是可以重载 String 模型。就像是 -

```
 class String
       def to_time
          begin
             Time.parse(self)
          rescue Exception => exception
             return false
          end
          return true
       end
    end 
```

# jquery - jQuery，克隆选择，禁用以前选择的选项

> ID：12730841
> 
> 赞同：0
> 
> 时间：2012-10-04T15:38:54.350
> 
> 标签：jquery, select, clone, selecteditem

我正在这个网站上工作，用户可以在其中创建自己的捆绑包。基本上他们有一个课程列表，他们可以选择 5 个并创建一个捆绑包。

我正在采用的方法是所有课程的下拉列表，然后在点击时被克隆。

我想做的是禁用下一个克隆列表中任何先前选择的项目。

这可能吗？

这是我的代码：http: [//jsfiddle.net/Y4fLM/](http://jsfiddle.net/Y4fLM/)

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:42:28.290

我不得不处理与您的要求有些相似的要求，但是，我没有动态创建选择，而是在页面上有 3 个。

检查这个[FIDDLE](http://jsfiddle.net/sushanth009/a3yrQ/) .. 它可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:01:51.660

这是你要找的吗？
[http://jsfiddle.net/VLrpn/](http://jsfiddle.net/VLrpn/)

关键代码在附加新元素之前就出现了：

```
$('.hidden-itemname').each(function(index) {
       newElem.children('.hidden-itemname').children('option[value="'+$(this).val()+'"]').remove()
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T16:22:16.253

你也可以试试这个

[http://jsfiddle.net/Y4fLM/3/](http://jsfiddle.net/Y4fLM/3/)

与您的问题一样，这似乎对您有所帮助。

# c# - 解析看似正确的日期时间时抛出异常

> ID：12730844
> 
> 赞同：1
> 
> 时间：2012-10-04T15:39:15.173
> 
> 标签：c#, parsing, datetime

我正在使用该`DateTime.ParseExact`方法来解析日期时间。但是，为什么以下失败并抛出异常？

```
string input = "100206 2330";
string format = "ddMMyy hhmm";
DateTime parsed = DateTime.ParseExact(input, format, CultureInfo.InvariantCulture); 
```

从 MSDN 上的[Custom Date and Time Format Strings](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)文章来看，这个输入字符串的格式是正确的。我很困扰。

提前致谢，

斯特伦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:40:13.720

[“hh”](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#hhSpecifier)是一个 12 小时制小时说明符 (01-12)。您希望[“HH”](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#HH_Specifier)应对“23”。

```
string format = "ddMMyy HHmm"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:41:27.243

对于 24 小时制，您必须使用`HH`而不是`hh`

```
string format = "ddMMyy HHmm"; 
```

# spring - 使用 REQUIRES_NEW 进行传播也回滚外部事务。为什么？

> ID：12730850
> 
> 赞同：1
> 
> 时间：2012-10-04T15:39:34.830
> 
> 标签：spring, transactions, spring-transactions

我看到一种与文档不一致的奇怪行为。这就是我正在做的事情：从我的测试类中，我调用一个@Transactional 服务，该服务在数据库中创建一行，然后调用另一个引发 RunTimeException 的@Transactional 服务（标记为 REQUIRES_NEW）。我希望在我的测试中看到我的记录，但我不是。想法？

我的测试课：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"classpath:**/jdbc-beans.xml","classpath:**/jdbc-infrastructure.xml","classpath:**/jdbc-infrastructure-test.xml" })
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
public class TransactionalTest {

   @Autowired
   FeedManagerOne feedManagerOne;

   @Test
   public void test_propagation_REQUIRES_to_REQUIRES_NEW() {
      Feed anotherFeed = new Feed("AnotherRSS", "http://www.anotherfeedlink.com", true);
      assertFalse(feedManagerOne.exists(anotherFeed)); // EVALUATES TO FALSE

      try { 
         feedManagerOne.createFeed(anotherFeed, true);
      } catch (RuntimeException e) {
         e.printStackTrace();
      }

      // EVALUATES TO FALSE. WRONG! IT SHOULD BE TRUE.
      assertTrue(feedManagerOne.exists(anotherFeed)); 
   }
} 
```

服务一：

```
@Service
public class FeedManagerOne {

   @Autowired
   FeedManagerTwo feedManagerTwo;

   @Autowired
   JdbcTemplate jdbcTemplate;

   @Transactional(readOnly = true)
   public boolean exists(Feed feed) {
      String query = "SELECT COUNT(*) FROM feed WHERE name = ? AND url = ? AND is_active = ?";
      int total = jdbcTemplate.queryForInt(query, feed.getName(), feed.getUrl(), feed.isActive());
      boolean found = (total == 1);
      return found;
   }

   @Transactional
   public boolean createFeed(Feed feed, boolean invokeFeedManagerTwo) {
      String query = "INSERT INTO feed (name, url, is_active) values (?, ?, ?)";
      int rowsChanged = jdbcTemplate.update(query, feed.getName(), feed.getUrl(), feed.isActive());
      boolean created = (rowsChanged == 1);

      // WHEN THE THE FOLLOWING METHOD THROWS A RUNTIME EXCEPTION,
      // THE JUST CREATED RECORD WILL BE LOST FROM THE DB (SEE TEST)
      feedManagerTwo.throwRuntimeExceptionFromRequiresNew();

      return created;
   }        
} 
```

服务二

```
@Service
public class FeedManagerTwo {
   @Transactional(propagation = Propagation.REQUIRES_NEW,  isolation = Isolation.READ_COMMITTED)
   public void throwRuntimeExceptionFromRequiresNew() {
      if (true) {
         throw new RuntimeException("From REQUIRES_NEW");
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:57:38.007

它与文档完全一致。内部服务抛出异常，所以它的事务被回滚。然后异常传播到外部服务，这导致外部事务也回滚。

在外部服务中捕获异常，它不会再回滚。

# javascript - 为 Prototype 调用不带括号的方法

> ID：12730852
> 
> 赞同：1
> 
> 时间：2012-10-04T15:39:35.883
> 
> 标签：javascript, prototypejs

我希望扩展`String`类并添加一个简单的方法：

```
String.prototype.world = function(){
  return " world";
} 
```

我想做类似的事情：

```
"hello".world 
```

然后回来`"hello world"`。而不是这样做：

```
"hello".world() 
```

调用不带括号的函数将返回函数对象。

我正在寻找的是执行函数而不是返回它（不指定括号）。

我可以在 JavaScript 中以某种方式做到这一点吗？

**编辑**：据此[，](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineGetter)使用`__defineGetter__`是非标准的并且已弃用。寻找替代品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:49:58.090

您可以使用 setter getter 来做到这一点。[jsfiddle](http://jsfiddle.net/nYBRY/)。但是 IE < 9 不支持 setter getter；

```
 function getter(){
    return this + " world";
  }
  if(Object.__defineGetter__){ // chrome 
  String.prototype.__defineGetter__('world', getter);
}else{
 Object.defineProperty(String.prototype, 'world', { // IE
                    get : getter
                });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T15:47:28.760

您可以像这样定义一个吸气剂：

```
String.prototype.__defineGetter__("world", function() {
    return this + ' world';
});

'hello'.world // 'hello world' 
```

[小提琴](http://jsfiddle.net/qEKFP/)

# objective-c - 可本地化的自动完成（NSLocalizedString）

> ID：12730862
> 
> 赞同：2
> 
> 时间：2012-10-04T15:40:16.257
> 
> 标签：objective-c, ios, xcode, localization, autocomplete

简单的问题：有没有办法为 NSLocalizedString 键设置自动完成“ON”？

进入localized.strings，然后进入我的应用程序文件，然后再回到本地化等等，这很无聊......

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T02:53:48.087

试试林。[https://github.com/questbeat/Lin](https://github.com/questbeat/Lin)

这是一个 Xcode4 插件，显示 NSLocalizedString 和 localizedStringForKey:value:table 的完成：

![林的例子](../Images/3fd0b9cfa7eec8db39035065bbff5cea.png)

# javascript - 在 iframe 中而不是 div 中显示结果

> ID：12730863
> 
> 赞同：0
> 
> 时间：2012-10-04T15:40:18.427
> 
> 标签：javascript, iframe

所以，我得到了我需要的结果，但我需要创建一个 iframe 或显示结果。我需要改变什么才能做到这一点？我假设它与 scopedetails div 有关，但我不是 100% 的。

```
 function getscope(id){
            var id = id

            var txt = 'Click generate to generate the scope of work now';

            $.prompt(txt,{ 
                buttons:{Confirm:true, Cancel:false},
                submit: function(v,m,f){
                    var flag = true;
                    if (v) { }
                    return flag;
                },
                callback: function(v,m,f){

                    if(v){      
                        $.post('getscope',{sid:id},
                               function(data){
                               $("div#scopedetails").html(data);                                   
                               }
                        );
                    }
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:44:00.350

您不能只在 iframe 上设置 .innerHTML 属性。首先，您需要确保将 iframe 加载到属于您的域的虚拟空白页面，您曾经可以使用“about:blank”，但不能再使用安全限制。然后你需要获取 iframe 的 /document/body 元素并操作它的 DOM。使用 .

# msbuild - 如何在 msbuild 脚本之间共享动态创建的全局项或属性

> ID：12730864
> 
> 赞同：0
> 
> 时间：2012-10-04T15:40:18.650
> 
> 标签：msbuild

如何在相互引用的多个 c# 项目脚本之间共享动态状态？

我在 project.targets 文件中创建了一个目标并将其导入到每个项目中。这个目标使用当前的 svn 版本生成一个程序集信息文件，并将其动态添加到编译的源中。

这一切都很好，但现在我想改进目标，以便它只创建一次程序集信息文件（如果它不存在）并在所有涉及的项目中共享生成文件的路径。

如果我自己构建了引用的项目，我只会通过 MSBuild 任务 Properties 属性传递共享路径属性，但由于引用的项目是由 Microsoft.Common.targets 文件中的目标解析的，所以我不会知道该怎么做。

此外，只允许传递属性，如何共享项目？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-09T17:37:16.653

您可以使用 TFS API 并将所有常用配置存储在数据库中。编写代码以从 DB 或 XML 获取配置数据并动态生成脚本或即时更新。

# css - 动态空间填充 DIV 宽度

> ID：12730866
> 
> 赞同：0
> 
> 时间：2012-10-04T15:40:21.873
> 
> 标签：css, css-float, width

我正在一个由 EE 驱动的客户站点上工作。

他们有一页技术文件，每一个都有不同长度的标题，以及不同长度的简短描述。在两者之间，他们的设计需要一个带前导点的垫片：

![s 从 PDF 中抓取屏幕](../Images/dc247774cdf067987885d7d5802f208a.png)

对于每个行项目，我都有一个容器和浮动 DIV，用于标题和描述：

```
<div class="cv-lit-lineitem">           
    <div class="cv-lit-title"><h3>Title</h3></div>
    <div class="cv-lit-linespacer"></div>
    <div class="cv-lit-info"><p>Info</p></div>
</div> 
```

title 和 info 分别左右浮动，宽度由内容定义：

```
.cv-lit-lineitem {
    height: 40px;
    width: 940px;
}

.cv-lit-title {
    height: 16px;
    float: left;
}

.cv-lit-linespacer {
    background-image: url("whitedots.png");
    background-repeat: repeat-x;
    height: 40px;
    display: block;
}

.cv-lit-info {
    height: 16px;
    float: right;
} 
```

我似乎无法让间隔 div 填充中间的空间。将其设置为 100% 会填充整个容器宽度，其他所有内容都会导致宽度为 0。

我需要使用 javascript，还是我遗漏了一些明显的东西？

谢谢你的帮助，

泰

PS：这是一个小提琴：http: [//jsfiddle.net/tylonius/zC8jZ/](http://jsfiddle.net/tylonius/zC8jZ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:55:56.960

`display:table;`你可以用和来实现它`display:table-cell;`

[**检查这个演示**](http://jsfiddle.net/gionaf/p8xaz/)

HTML

```
<div class="cv-lit-lineitem">             
    <div class="cv-lit-title"><h3>Title</h3></div>
    <div class="cv-lit-linespacer"></div>
    <div class="cv-lit-info"><p>Info</p></div>
</div>​ 
```

CSS

```
.cv-lit-lineitem {
    height: 40px;
    width: 940px;
    display:table;
}
.cv-lit-lineitem > div {
    display:table-cell;
}   
.cv-lit-title {
    height: 16px;
}
.cv-lit-linespacer {
    background-image: url("whitedots.png");
    background-repeat: repeat-x;
    width:100%;
    height:40px;
}    
.cv-lit-info {
    height: 16px;
}​ 
```

不幸的是，这不适用于 IE8 及更低版本。

* * *

另一个简单的解决方法是将点放在容器的背景中，然后用标题和信息的背景覆盖它。但这仅在您具有单色页面背景时才有效。

[**演示**](http://jsfiddle.net/gionaf/2mxCh/)

# c# - 获取 SP 参数列表

> ID：12730867
> 
> 赞同：1
> 
> 时间：2012-10-04T15:40:22.777
> 
> 标签：c#, .net, linq-to-sql, stored-procedures, parameters

我正在编写一个函数来调用给定`IDictionary`参数的存储过程。

```
[Function(Name = "dbo.GetTrackingInfo")]
[ResultType(typeof(Shipment))]
[ResultType(typeof(Piece))]
[ResultType(typeof(Item))]
public IMultipleResults GetTrackingInfo(IDictionary<string, object> arguments)
{
    var method = (MethodInfo)MethodInfo.GetCurrentMethod();

    var argumentsArr = this.Mapping.GetFunction(method).Parameters
        .Select(p => arguments.ContainsKey(p.Name)
            ? NullableExtensions.Convert(arguments[p.Name], p.ParameterType)
            : null)
        .ToArray();

    return (IMultipleResults)this.ExecuteMethodCall(this, method, argumentsArr);
} 
```

我希望`Mapping.GetFunction(method).Parameters`返回 SP 的参数，但它返回了这个方法的参数。有没有简单的方法来获取底层SP的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:07:27.033

该[`Name`属性](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.metaparameter.name.aspx)（如您所见）返回 CLR 空间中函数的名称。

您要使用的是[`MappedName`属性](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.metaparameter.mappedname.aspx)，定义为（强调我的）：

> 获取**数据库函数中参数**的名称。

请注意，对类[属性](http://msdn.microsoft.com/en-us/library/bb548787.aspx)[`Parameters`的调用](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.metafunction.parameters.aspx)*确实会*返回有关基础 SP 参数的信息；它是一个映射，因此它既有 SP 信息，也有关于 CLR 表示的信息，与同一个实例相关联。[`MetaFunction`](http://msdn.microsoft.com/en-us/library/bb548787.aspx) *[`MetaParameter`](http://msdn.microsoft.com/en-us/library/bb534371.aspx)*

# javascript - 允许接受更大的词

> ID：12730873
> 
> 赞同：2
> 
> 时间：2012-10-04T15:40:52.783
> 
> 标签：javascript, jquery

我正在为儿童创建一个拼写游戏，其中空格在网格中突出显示，并通过拖动网格一侧的相应字母给出正确拼写单词的线索。

如果你得到正确的单词，网格中的空间会随着“wordglow2”的使用而消失。如果你弄错了，它会用“wordglow4”发红光。

这适用于 3 个字母的单词，因为我认为这些将是我将在网格中使用的唯一单词。现在我被告知它需要在某个点上扩展它，当我添加更大的单词时，脚本会在 3 个丢弃的字母后确认它们，即使它是 5 个长。

这是当前说 if (word == 3) 然后应用样式的代码...

```
 if (guesses[word].length == 3) {
            if (guesses[word].join('') == word) {

                $('td[data-word=' + word + ']').addClass('wordglow2');
                $(right).val('Right!');
                $(right).show();
                audioS.play();
                $('.counter').html(completeWords + '/6').show();
                $(wrong).hide();
                $('.minibutton').prop('disabled', false); 
```

我需要它考虑到单词的大小，然后如果它是正确的，那就做剩下的。

[http://jsfiddle.net/smilburn/cTGGA/20/](http://jsfiddle.net/smilburn/cTGGA/20/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:39:29.533

如果我正确理解您的问题，您可以根据单词的长度检查数组长度。例如：

```
if (guesses[word].length == word.length) { 
```

这将验证guesses 数组的长度是否与他们试图解决的单词的长度相同，无论该单词是否有 3、4、5 或更多字母。

# ntp - 运行 ntpdate ntp.ubuntu.com 时，supervisord 经常崩溃

> ID：12730879
> 
> 赞同：1
> 
> 时间：2012-10-04T15:41:12.177
> 
> 标签：ntp, supervisord

我在我的一台服务器上运行 supervisord。我有一个 cronjob 每隔几个小时使用 ntpdate 更新时钟，因为在 EC2 上，时钟往往会经常滞后。

我注意到当 ntpdate 命令运行时，supervisord 会经常崩溃并且必须重新启动。

我检查了 supervisord 日志，但我什么也没看到。我打开了信息级别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T12:33:48.780

我在所有 3.0、3.0a、3.0b 版本中也遇到了这个问题。有一个 100% 的重现路径：

1.  将系统时间设置为比实时时间早 1 年。
2.  killall one_program_under_supervisoring。
3.  你会看到 supervisord 崩溃了。

Supervisor 在计算程序状态时严重依赖系统时间，如果系统时间发生变化，状态可能是错误的，就会出现 Assertion。我做了一个解决方法（参见[https://github.com/lifsong/supervisor](https://github.com/lifsong/supervisor)）。

主管开发人员最好从设计角度进行改进。创建了一个问题：[https ://github.com/Supervisor/supervisor/issues/281](https://github.com/Supervisor/supervisor/issues/281)

# php - 菜单链接中的 Wordpress 3.4 PHP 代码

> ID：12730883
> 
> 赞同：0
> 
> 时间：2012-10-04T15:41:22.110
> 
> 标签：php, wordpress, menu, blogs

我想将 PHP 代码添加到我的 WordPress 博客菜单的一些链接中。我用

```
Dashboard > Appearance > Menus 
```

组成菜单。如果我在那里添加 PHP 代码，它似乎不起作用。

我需要这样的链接：

```
<a href="http://domain.com/signup.php?user=<?PHP code goes here?>&session=2"> 
```

有没有办法在那里添加 PHP 代码并保留内置的 WordPress 菜单生成方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:59:26.700

您将需要为此设置一个自定义步行器。只需将其添加到您的 functions.php 文件中：

```
class Query_Nav extends Walker_Nav_Menu
{
    function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {
        global $wp_query;
        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $class_names = $value = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;
        $classes[] = 'menu-item-' . $item->ID;

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
        $class_names = $class_names ? ' class="' . esc_attr( $class_names ) . '"' : '';

        $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
        $id = $id ? ' id="' . esc_attr( $id ) . '"' : '';

        $output .= $indent . '<li' . $id . $value . $class_names .'>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';

        //ADD YOUR PHP HERE TO DETERMINE WHATEVER IT IS YOU NEED FOR YOUR LINK
        $addedStuff = 'some added stuff to append to your URL';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url.$addedStuff) .'"' : '';
        ////////////////////

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
        $item_output .= '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }
} 
```

我不确定您要添加到 URL 的内容是什么，但这应该可以帮助您开始修改内容。一旦你完成了你想要的 URL 外观，你需要调整对[WP Nav Menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)的调用以将新的 Walker 类添加到任何现有参数中：

```
wp_nav_menu(array('walker' => new Query_Nav())); 
```

有关 Nav Walkers 的更多文档：

[https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu/14039#14039](https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu/14039#14039)
[http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output](http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output)

# sql - 返回数据而不在比较中包含该数据

> ID：12730892
> 
> 赞同：1
> 
> 时间：2012-10-04T15:41:50.477
> 
> 标签：sql

我正在使用以下代码：

```
SELECT l_name, f_name, user_id
FROM (SELECT a.l_name, a.f_name, count(*)
      FROM shema.emp_table1 a, schema2.emp_table2 b
     WHERE     a.emp_id = b.emp_id2
           AND b.office_num = '4017'
           AND a.email IS NULL
    HAVING COUNT (a.l_name) > 1
    group by a.l_name, a.f_name
    ORDER BY a.l_name, a.f_name)
GROUP BY l_name, f_name; 
```

...我想要做的是返回用户姓氏、名字和用户 ID，如果数据库中的用户在姓氏上“匹配”（可能重复）。我遇到的问题是 USER_ID 字段对于每个用户都是唯一的......所以即使他们可能共享姓氏和名字，用户 ID 也是唯一的......这导致我的查询返回零行。如果我从搜索条件中删除用户 ID 字段，我会得到我正在寻找的列表：共享姓氏和名字的用户......（例如 Doe，John，计数为 4）。但即使我不希望针对用户 ID 进行查询，我确实希望它作为“返回字段”之一......但我似乎无法让它这样做。

任何帮助将不胜感激。我已经尝试了上述查询的许多不同变体，有/没有内部和外部计数，有/没有内部和外部的 user_id 等等，到目前为止，我没有找到我想要的东西。

我想要的输出是这样的：

```
L_NAME                 F_NAME                  USER_ID               COUNT(*)
SMITH                  JOHN                    ABC123                2
SMITH                  JOHN                    BCD234                2 
```

...虽然，现在我正在寻找它，查询可能无法正常工作，因为对于用户 ID 为 ABC123 的 Smith，John，“count(*)”不会是 2 ...“用户 ID”导致它比我想要的更困难。我需要写一个异常的块来满足这种请求吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:34:19.703

如果您从子查询返回数据，并在子查询和外部查询中使用相同的限定符将其连接到外部查询，它应该可以工作。我没有你的表，所以我不能测试这个，所以你可能需要稍微调整一下。

```
SELECT x.l_name, x.f_name, a1.emp_id, x.cnt
FROM  (
        SELECT a.l_name, a.f_name, count(*) as CNT
        FROM   schema.emp_table1 a, schema2.emp_table2 b
        WHERE  a.emp_id = b.emp_id2
          AND  b.office_num = '4017'
          AND  a.email IS NULL
        HAVING COUNT (a.l_name) > 1
        GROUP BY a.l_name, a.f_name
        ORDER BY a.l_name, a.f_name
      ) as x
      INNER JOIN schema.emp_table1 a1 on x.l_name = a1.l_name
      INNER JOIN schema2.emp_table2 b1 on x.l_name = b1.l_name and a1.emp_id = b1.emp_id2
WHERE  b1.office_num = '4017'
  AND  a1.email IS NULL 
```

# node.js - nodejs net 模块，流数据，如何释放内存

> ID：12730893
> 
> 赞同：0
> 
> 时间：2012-10-04T15:41:54.540
> 
> 标签：node.js

我正在使用网络模块，打开连接并下载（流式传输）数据。代码很简单：

```
connection = net.Socket();
connection.setNoDelay(true);
connection.connect(url.port || 80, url.hostname);
connection.on("connect", function() {
      console.log(process.pid.toString().bold.red + ' connected'.green);
      connection.write(generateRequest(url));
}); 
```

内存（缓冲区）正在增长。有没有办法释放它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:46:42.933

Node.js 使用 Google V8 JavaScript 运行时，它是[垃圾回收](https://developers.google.com/v8/design#garb_coll)的，因此除了删除对不再需要的值的引用之外，无需通过任何方式“释放内存”。

具体来说，确保您的代码（例如`generateRequest(...)`函数）不保留任何无限增长的集合。如果您必须无限期地保留大量数据（例如，用于日志记录或统计），请考虑将它们写入磁盘以避免无限期地增加内存。

# less - 在运行时将动态变量提供给较少的文件

> ID：12730896
> 
> 赞同：1
> 
> 时间：2012-10-04T15:42:07.120
> 
> 标签：less, skinning, dotless

我们有一个带有大量 CSS 的大型 ASP.NET MVC 应用程序，大约 105 个不同的文件。这些文件由组件分隔，这使得它们更易于管理。在运行时，我们使用处理程序缩小/组合这些。

此外，我们的应用程序使用皮肤设置；管理员可以自定义站点的字体和颜色。这些皮肤设置使用 NVelocity 注入到 CSS 文件中，虽然它很旧，但性能相当不错。

我想将 CSS 改为使用更少，这将允许更多代码重用和 CSS 文件内部的清洁度。我正在为执行此操作的最佳选择而苦苦挣扎。我目前的思路是这样的：

1.  管理员进行皮肤修改，并保存
2.  保存时，应用程序会在磁盘上生成一个 skin.less 文件，该文件是包含所有变量的 masterless 文件
3.  需要较少变量的后续 CSS 文件在 skin.less 上执行 @import
4.  更少的文件在处理程序中被处理和缩小/组合，并提供给客户端。

我的问题是，这似乎是将动态变量提供给较少文件的最佳方法吗？在磁盘上生成 skin.less 文件是我唯一的选择，还是 @import 语句可以引用处理程序本身，因此不需要在磁盘上生成文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:24:41.243

我认为你可以这样做。与您所说的不太一样，但我在这里做了一些使用 LESS 和蒙皮的概念证明：

[https://github.com/aguyawry/less_tests](https://github.com/aguyawry/less_tests)

我认为一个区别是，在这个 POC 中，标记的 less 文件是加载在标记中的文件，它导入基本应用程序样式，然后指定新的变量来覆盖基本的初始值。

这个 POC 都是客户端，但实际上我们也做这个服务器端。实际上，我们正在构建一个 UI 供客户自己选择样式（背景颜色、边框颜色……），然后将其中的皮肤样式表渲染到系统中。

我认为 TheZ 的评论不适用，因为您在服务器端进行所有操作。只有在您执行此客户端时才会发生阻塞。

# algorithm - 通过重叠或缺乏对一维线进行分组

> ID：12730897
> 
> 赞同：0
> 
> 时间：2012-10-04T15:42:10.550
> 
> 标签：algorithm, math, language-agnostic, geometry, occlusion

编辑：层次结构不适合我的目标。留下原始请求，但我回答了满足以下核心请求（重叠/非重叠规则）的内容。

假设有一组 1D 线，每条线由 2 个无符号整数描述：start 和 end，start < end。我想根据它们是否重叠来创建组，但我不希望组包含任何不重叠的行。在一条线在多个组中的情况下，我想我需要某种层次结构来跟踪组中的组......

这是规则：

*   重叠的线必须在层次结构中尽可能低地组合在一起。
*   不重叠的线不能在同一组中。

无论如何，这是一个示例图片：

![线条](../Images/90eb07bb54520622f5005eb09ccd8d28.png)

快速浏览一下，我可以说`Line A`and `Line C`form `Group 0`，`Line H`and `Line I`form `Group 1`， and `Line B`is `Group 2`。其他所有内容都是重叠的组，`Line D`在`Group 1`and中`Group 2`，`Line E`在`Group 0`and中`Group 1`，并且`Line F`and`Line G`都在这三个组中。所以这里有两层分组，但我很确定可能有 N 取决于问题的复杂性。而且我也很确定我的示例没有代表一些问题。

处理这个问题的典型算法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:18:40.330

我意识到我的重叠和不重叠两条规则与层次结构不兼容。这是我确定的算法，用漂亮的图片来解释。

![重铸的线条](../Images/d7406cfa62f123b8e5302c50ab870ee7.png)

基本思想最终归结为找到“重叠最大值”。这些行需要按开始升序排序，然后从左到右循环。您从“关闭”状态开始，这意味着没有“开放”组等待被关闭。当前正在迭代的线被认为是“活动线”。

**规则 1：** 如果处于关闭状态并且遇到线路启动，则切换到打开状态。发生这种情况的点用绿点表示。如果多行在同一步骤中打开一个组，我将它们全部用绿点表示，因为不知道首先遇到哪一行。

继续收集线，直到到达终点。

**规则 2：** 如果处于打开状态且活动线路正在结束，则将所有活动线路（包括任何结束活动线路）放入一个新组中。算法切换到关闭状态。形成组时的步骤以蓝色突出显示。触发此操作的线端用红点表示。一步多点的规则与之前相同。

例如，形成的第一组是`Line A`、`Line C`、`Line F`和`Line G`。上面两条规则足以处理这个例子。

有一个最终规则，在此示例中不会起作用。

**规则 3：** 如果算法在打开状态下结束迭代，则将所有活动线放入一个新组中。

以下是该算法产生的 4 个组：

![线组](../Images/c19aea92c65981e278780412083a4ada.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:47:27.527

我想说一些[层次聚类](http://en.wikipedia.org/wiki/Hierarchical_clustering)的变体符合要求。相似度函数可以是两条线段之间的重叠程度。

# c++ - 使用 wxwidgets 未在 C++ 中引发事件

> ID：12730898
> 
> 赞同：1
> 
> 时间：2012-10-04T15:42:17.293
> 
> 标签：c++, events, wxwidgets

我已经使用[wxFormBuilder制作了一个](http://sourceforge.net/projects/wxformbuilder/)[wxwidgets](http://www.wxwidgets.org/)表单，并且我试图在对象上抛出一个鼠标滚轮事件。问题是事件没有抛出，所以我想问你是否应该有一些额外的设置。该对象有一个像这样的事件表

```
BEGIN_EVENT_TABLE(MyObj, wxScrolledWindow)
  EVT_MOUSEWHEEL(MyObj::OnMouseWheel)
END_EVENT_TABLE(); 
```

它是这样初始化的：

```
myObjInstance = new MyObj(this, ID_MYOBJ, wxPoint(10, 10), wxSize(30,30), 0); 
```

我注意到在 wxFormBuilder 中，当从 GUI 添加一个事件时，使用了[函数 Connect](http://docs.wxwidgets.org/2.8/wx_wxevthandler.html#wxevthandlerconnect)来生成这个输出

```
myObjInstance ->Connect( wxEVT_MOTION, wxMouseEventHandler( MyFrame::TestMouseOnverTheEdit ), NULL, this ); 
```

但我不能使用它，因为我的事件处理函数 OnMouseWheel 在 MyObj 类中并且它受到保护。

我还在[wxDev-C++](http://wxdsgn.sourceforge.net/)中用这个对象和事件制作了一个框架，并引发了事件。不同之处在于 wxFormBuilder 创建的表单有多个尺寸器和面板，而 wxDev-C++ 中的表单没有。解决了[类似的问题](https://stackoverflow.com/questions/2510313/not-catching-all-mouse-events-with-wxwidgets)，但我仍然不知道该怎么办。谢谢。

编辑：处理程序的签名：

```
void OnMouseWheel(wxMouseEvent & AwxEvent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:03:38.440

“问题是事件没有被抛出，”

我想这个事件确实被抛出了。你的问题是它没有被抓住！

以下是您需要研究的一些事项。

1.  您的事件处理程序应该是公开的。

2.  什么是 MyObj？它应该是 wxFrame 或其他一些标准 wxWidgets 窗口的特化。

    BEGIN_EVENT_TABLE(MyObj, wxScrolledWindow)

    这意味着 MyObj 是 wxScrolledWindow 的一个特化。如果不是，正如您在评论中建议的那样，那么事件表将无法捕捉事件。 [http://wiki.wxwidgets.org/Events#Inheriting_Event_Tables_.28Events_in_Derived_Classes.29](http://wiki.wxwidgets.org/Events#Inheriting_Event_Tables_.28Events_in_Derived_Classes.29)

3.  目前尚不清楚您使用的是事件表还是 Connect() 方法。你不能同时使用！

4.  如果您确实使用了连接，则需要小心使用正确的对象来调用它。简单来说，需要调用生成事件的框架上的 connect 方法，而不是调用正在处理事件的对象。 [http://wiki.wxwidgets.org/Events#Using_Connect.28.29](http://wiki.wxwidgets.org/Events#Using_Connect.28.29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:44:59.570

我找到了解决方案。问题是，我有一个 wxPanel（在主框架内）

```
m_panel = new wxPanel( this, wxID_ANY, wxDefaultPosition, wxDefaultSize, wxTAB_TRAVERSAL ); 
```

然后我像这样将 myObj 添加到应用程序中：

```
myObjInstance = new MyObj(this, ID_MYOBJ, wxPoint(10, 10), wxSize(30,30), 0); 
```

这不起作用，所以我将第一个参数（父窗口）设置为 m_panel：

```
myObjInstance = new MyObj(m_panel , ID_MYOBJ, wxPoint(10, 10), wxSize(30,30), 0); 
```

现在它可以与事件表一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:42:13.303

如果你使用`Connect()`你需要指定`wxEVT_MOUSEWHEEL`，不是`wxEVT_MOTION`。

# html - 如何处理 iframe 的 popstate 事件或禁用 iframe 上的浏览 器后退按钮？

> ID：12730899
> 
> 赞同：4
> 
> 时间：2012-10-04T15:42:25.733
> 
> 标签：html, iframe, browser, back-button, popstate

我正在尝试在我的网站上使用 soundcloud 的 html5 小部件，它会将小部件加载到 iframe 中。跟踪完成后，我通过使用他们的[javascript api](http://developers.soundcloud.com/docs/api/html5-widget)将另一个 url 加载到小部件并重新加载 iframe，如我所见。然后浏览器的后退按钮变为启用。当我按下后退按钮时，它会将小部件加载到上一个 url。但我也在我的页面上使用 ajax，并且后退按钮会将活动扳手投入工作。我想知道是否有一种方法可以防止 iframe 在按下后退按钮时推送历史记录或处理操作。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-03T07:39:56.587

这在所有浏览器中都可以正常工作以禁用后退按钮

```
 history.pushState(null, null, url);
         window.addEventListener('popstate', function(event) {
            history.pushState(null, null, url);
        }); 
```

# iphone - 调整 UIImage 大小时读取错误的 RGB 值

> ID：12730907
> 
> 赞同：1
> 
> 时间：2012-10-04T15:42:49.547
> 
> 标签：iphone, objective-c, ios, resize, uiimage

我正在读取我的 UIImage (inputImage) 的 RGB 值，这样：

```
CGImageRef imageRef = inputImage.CGImage;
NSData *data = CFBridgingRelease(CGDataProviderCopyData(CGImageGetDataProvider(imageRef)));
unsigned char *pixels = (unsigned char *)[data bytes];

for(int i = 0; i < [data length]; i += 4) {
    int r = i;
    int g = i+1;
    int b = i+2;

    int rValue = (int)pixels[r];
    int gValue = (int)pixels[g];
    int bValue = (int)pixels[b];
} 
```

它工作完美。但是，如果我在那段代码之前使用一个函数来调整图像大小，那么值就会出错。例如，他们说一个像素是 255 蓝色，而它是 255 红色。我觉得是在我使用函数的时候，红蓝RGB通道发生了变化（我知道，没有意义）。

这是我用于调整图像大小的函数：

```
- (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
//UIGraphicsBeginImageContext(newSize);
UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
[image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
UIImage *newImage2 = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return newImage2;
} 
```

这就是我所说的：

```
inputImage = [self imageWithImage:inputImage scaledToSize:CGSizeMake(inputImage.size.width, inputImage.size.height)]; 
```

即使我将大小调整到与我相同的大小，也会发生这种情况。数据发生了一些奇怪的事情，但结果是正确的，图像的大小调整正确。有谁知道有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T20:56:55.603

它默认为 RGB 中的 BGR。OpenCV 对通道进行相同的转置。

# android - 如何在 android 中使用 bulkInsert() 函数？

> ID：12730908
> 
> 赞同：8
> 
> 时间：2012-10-04T15:42:50.513
> 
> 标签：android, android-contentprovider, bulkinsert

在数据库中完成所有批量插入后，我只需要一个通知。请提供一个使用 bulkInsert() 函数的示例。我在互联网上找不到合适的例子。请帮忙！！！！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-04T17:10:44.590

这是使用 ContentProvider 的 bulkInsert。

```
public int bulkInsert(Uri uri, ContentValues[] values){
    int numInserted = 0;
    String table;

    int uriType = sURIMatcher.match(uri);

    switch (uriType) {
    case PEOPLE:
        table = TABLE_PEOPLE;
        break;
    }
    SQLiteDatabase sqlDB = database.getWritableDatabase();
    sqlDB.beginTransaction();
    try {
        for (ContentValues cv : values) {
            long newID = sqlDB.insertOrThrow(table, null, cv);
            if (newID <= 0) {
                throw new SQLException("Failed to insert row into " + uri);
            }
        }
        sqlDB.setTransactionSuccessful();
        getContext().getContentResolver().notifyChange(uri, null);
        numInserted = values.length;
    } finally {         
        sqlDB.endTransaction();
    }
    return numInserted;
} 
```

当 ContentValues[] values 数组中有更多 ContentValues 时，只调用一次。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-18T20:01:40.913

我一直在寻找一个教程来在活动方面和内容提供者方面实现这一点。我从上面使用了“术士”的答案，它在内容提供商方面效果很好。我使用[这篇文章](https://stackoverflow.com/questions/9395021/duplicated-contentvalues-in-contentvalues-array)的答案在活动结束时准备了 ContentValues 数组。我还修改了我的 ContentValues 以从一串逗号分隔值（或新行、句点、分号）中接收。看起来像这样：

```
ContentValues[] bulkToInsert;
List<ContentValues>mValueList = new ArrayList<ContentValues>();

String regexp = "[,;.\\n]+"; // delimiters without space or tab
//String regexp = "[\\s,;.\\n\\t]+"; // delimiters with space and tab
List<String> splitStrings = Arrays.asList(stringToSplit.split(regexp));

for (String temp : splitStrings) {
    Log.d("current student name being put: ", temp);
    ContentValues mNewValues = new ContentValues();
    mNewValues.put(Contract.KEY_STUDENT_NAME, temp );
    mNewValues.put(Contract.KEY_GROUP_ID, group_id);
    mValueList.add(mNewValues);
}
bulkToInsert = new ContentValues[mValueList.size()];
mValueList.toArray(bulkToInsert);
getActivity().getContentResolver().bulkInsert(Contract.STUDENTS_CONTENT_URI, bulkToInsert); 
```

我找不到更简洁的方法将划定的拆分字符串直接附加到 bulkInsert 的 ContentValues 数组。但是这个功能直到我找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-26T15:46:02.020

试试这个方法。

```
public int bulkInsert(@NonNull Uri uri, @NonNull ContentValues[] values) {
    final SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    switch (sUriMatcher.match(uri)) {
         case CODE_WEATHER:
            db.beginTransaction();
            int rowsInserted = 0;
            try {
                for (ContentValues value : values) {
                    long _id = db.insert(WeatherContract.WeatherEntry.TABLE_NAME, null, value);
                    if (_id != -1) {
                        rowsInserted++;
                    }
                }
                db.setTransactionSuccessful();
            } finally {
                db.endTransaction();
            }
            if (rowsInserted > 0) {
                getContext().getContentResolver().notifyChange(uri, null);
            }
            return rowsInserted;
        default:
            return super.bulkInsert(uri, values);
    }
} 
```

术士的答案插入全部或不插入行。此外，在这两个函数调用之间做最少的任务`setTransactionSuccessful()`，当然没有数据库操作。`endTransaction()`

代码来源：Udacity

# php - .htaccess 在 chrome 中导致会话/cookie 问题

> ID：12730910
> 
> 赞同：0
> 
> 时间：2012-10-04T15:42:56.153
> 
> 标签：php, .htaccess, codeigniter, session, cookies

好吧，伙计，我遇到了一个问题，我已经困扰了几天，但仍然找不到解决方案。基本上正在发生的事情是.. 我正在使用 CodeIgniter 框架，当我使用 .htaccess 从引导程序中删除 index.php 时，只有在 chrome 中没有设置会话。它在其他任何地方都可以正常工作。如果我在没有 .htaccess 的情况下执行此操作，只需使用 mysite.com/index.php/controller 即可。

我很困惑，尝试了很多不同的解决方案/修复等，但什么也没有。我找不到其他人有这个问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:43:30.060

谁会认为这整个问题是由头部丢失的文件 favicon.gif 引起的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T09:10:45.480

我有同样的问题，最后很明显，问题出在我的 htaccess 中，我留下评论以防它对任何人有帮助。我正在缓存 html、css 等。如果将其放在 .htaccess 文件的末尾：

```
<ifModule mod_headers.c> 
<filesMatch "\\.(html|htm|php)$"> 
Header set Cache-Control "max-age=1, private, must-revalidate" 
</filesMatch> 
</ifModule> 
```

你会得到你的会话确定。这是因为例如：

*   您进入您的站点，但您没有登录。但是您已经为未登录的用户提供了页面视图。
*   然后你会登录
*   但是当您返回上一页时，您会看到与上一页相同的内容，就好像您没有登录一样。这是因为浏览器会向您显示上一个和缓存的页面，即使您的会话存在......但是如果您重新加载，您将看到正确的页面。

# javascript - 点击事件中的 Javascript 代码执行两次

> ID：12730913
> 
> 赞同：-2
> 
> 时间：2012-10-04T15:42:58.813
> 
> 标签：javascript, jquery

我有以下代码：

```
$('selector').on('click', 'target', function(e){
    e.stopPropagation();
    $('span').empty();
    $('span2').append('something');
}); 
```

最后一行执行了两次，为什么会这样？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T15:49:09.553

这里的目标是什么

```
'target' 
```

它应该是

```
'#target'   // If ID

'.target'  // If Class 
```

看起来你没有选择正确的选择器..

与这 2 个选择器相同 `$('selector') $('span2')`

# java - 执行（）不返回任何警告

> ID：12730917
> 
> 赞同：2
> 
> 时间：2012-10-04T15:43:18.557
> 
> 标签：java, jdbc, sybase

我有这段代码可以使用 JDBC 对 Sybase DB 运行存储过程：

```
CallableStatement stmt = connection.prepareCall("{ ? = call mysproc(?,?,?) }");
// call setXXX for each input param
stmt.registerOutParameter("return", Types.INTEGER);
stmt.execute();

StringBuilder builder = new StringBuilder();
SQLWarning warn = stmt.getWarnings();
while (warn != null) {
   builder.append(warn.getMessage());
   warn = warn.getNextWarning();
} 
```

存储过程被执行，但没有返回任何警告，即使存储过程调用 PRINT，如果我手动运行它，我可以看到它。

如果我更改`execute()`为`executeUpdate()`then 我会收到警告，但可能发生的情况是存储过程也返回 a `ResultSet`，在这种情况下，由于意外结果，调用失败。不幸的是，无法预先知道调用将返回什么，但同时我需要收集更新的行数和警告。

有什么建议么？

# javascript - window.focus() 在 Chrome 中不起作用

> ID：12730921
> 
> 赞同：0
> 
> 时间：2012-10-04T15:43:42.007
> 
> 标签：javascript, google-chrome

这是我的代码：

```
var myWindow = window.open('','zzz','width=600,height=700');
myWindow.document.write('test');
myWindow.blur();
myWindow.focus();
window.onfocus=function(){
    this.document.write('<br />Focused!');
}
var w = window;
myWindow.onfocus=function(){
    this.blur();
    this.document.write('<br />Focusing on main window!');
    w.focus();
};
myWindow.focus(); 
```

这是小提琴：http: [//jsfiddle.net/maniator/nMGNS/](http://jsfiddle.net/maniator/nMGNS/)

当弹出窗口**聚焦**时，它应该在弹出窗口上打印`Focusing on main window!`，然后聚焦在主窗口上并`Focused!`在那里打印。

但事实并非如此。

以下是有关我的浏览器的信息：

```
Google Chrome   22.0.1229.79 (Official Build 158531) m
OS  Windows
WebKit  537.4 (@129177)
JavaScript  V8 3.12.19.11
Flash   11.3.31.331
User Agent  Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4 
```

* * *

*旁白*：

我知道`alert(...)`黑客攻击，我想避免它。​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:08:29.637

通过@epascarello 的评论，更改`document.write`为`alert`，它可以在 chrome 中工作：

```
var myWindow = window.open('','zzz','width=600,height=700');
myWindow.document.write('test');
myWindow.blur();
window.onfocus=function(){
    alert('Focused!');
}
var w = window;
myWindow.onfocus=function(){
    this.blur();
    alert('Focusing on main window!');
    w.focus();
};
myWindow.focus(); 
```

# spring - 如何在创建/更新表单中添加“静态”下拉列表框

> ID：12730926
> 
> 赞同：1
> 
> 时间：2012-10-04T15:44:01.943
> 
> 标签：spring, jstl, tagx

我有一个 Spring Roo 项目。我想在创建/更新表单中添加一个带有静态值的下拉列表框。

这是 create.jspx 文件。见`srvEnco`场。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<div xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:field="urn:jsptagdir:/WEB-  INF/tags/form/fields" xmlns:form="urn:jsptagdir:/WEB-INF/tags/form" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:spring="http://www.springframework.org/tags" version="2.0">
<jsp:directive.page contentType="text/html;charset=UTF-8"/>
<jsp:output omit-xml-declaration="yes"/>
<form:create id="fc_fr_mediapost_domain_Srv" modelAttribute="srv" path="/srvs" render="${empty dependencies}">
    <field:input field="srvNom" id="c_fr_mediapost_domain_Srv_srvNom" max="30" required="true"/>
    <field:textarea field="srvDesc" id="c_fr_mediapost_domain_Srv_srvDesc"/>
    <field:select field="modId" id="c_fr_mediapost_domain_Srv_modId" itemValue="modId" items="${modsrvs}" path="/modsrvs" required="true"/>
    <field:select field="mntId" id="c_fr_mediapost_domain_Srv_mntId" itemValue="mntId" items="${mntsrvs}" path="/mntsrvs"/>
    <field:select field="opsId" id="c_fr_mediapost_domain_Srv_opsId" itemValue="opsId" items="${opses}" path="/opses" required="true"/>
    <field:select field="prcId" id="c_fr_mediapost_domain_Srv_prcId" itemValue="prcId" items="${prcs}" path="/prcs"/>
    <field:input field="srvSeri" id="c_fr_mediapost_domain_Srv_srvSeri" max="15"/>
    <field:input field="srvLoca" id="c_fr_mediapost_domain_Srv_srvLoca" max="30"/>
    <field:input field="srvImmo" id="c_fr_mediapost_domain_Srv_srvImmo" max="5"/>
    <field:input field="srvIp" id="c_fr_mediapost_domain_Srv_srvIp" max="15"/>
    <field:select field="srvEnco" id="c_fr_mediapost_domain_Srv_srvEnco" itemValue="Key" itemLabel="Value" items="${srvEnco}" path="" required="true"/>
    <field:datetime field="srvDateDebuVali" id="c_fr_mediapost_domain_Srv_srvDateDebuVali" dateTimePattern="${srv_srvdatedebuvali_date_format}"/>
    <field:datetime field="srvDateFinVali" id="c_fr_mediapost_domain_Srv_srvDateFinVali" dateTimePattern="${srv_srvdatefinvali_date_format}"/>
</form:create>
<form:dependency dependencies="${dependencies}" id="d_fr_mediapost_domain_Srv" render="${not empty dependencies}"/> 
```

我在我的类控制器 (SrvController;java) 中添加了这个源代码。

```
@ModelAttribute ("srvEnco")
public Collection<KeyValue> populateSrvEnco() {
    int max=42;
    Collection<KeyValue> result = new ArrayList<KeyValue>(max);

for (int i = 1; i <= max; i++) {
    String keyValue = new Integer(i).toString();
        result.add(new DefaultKeyValue(keyValue, keyValue));            
    }
    return result;
} 
```

问题是当我运行我的应用程序时，该`srvEnco`字段就像一个`<field:input>`标签，而不是一个`<field:select>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:47:23.690

好的，找到了。

我没有修改正确的 tagx 文件。使用正确的文件一切正常。

# c# - 将文件从一台服务器复制到另一台服务器时设备未准备好

> ID：12730935
> 
> 赞同：2
> 
> 时间：2012-10-04T15:44:35.710
> 
> 标签：c#, asp.net, device

我在这里做错了什么？

![](../Images/f4dfdaf8b0182ce3c4f28705710b06b1.png)

我已经检查了变量，它们是它们应该是的，所以那里没有问题。

我在这里错过了什么吗？为什么我会收到“设备未准备好”异常？

代码 -

```
if (ddlPublisherServer.Text != ddlSubscriberServer.Text)
{
   try
   {
       if (File.Exists("\\\\" + ddlSubscriberServer.Text + "\\SQLServerBackups\\" + txtSubscriberDatabaseName.Text + ".bak"))
       {
           File.Delete("\\\\" + ddlSubscriberServer.Text + "\\SQLServerBackups\\" + txtSubscriberDatabaseName.Text + ".bak");
       }

       File.Copy(@"D:\SQLServerBackups\" + txtSubscriberDatabaseName.Text, "\\\\" + ddlSubscriberServer.Text + "\\SQLServerBackups\\" + txtSubscriberDatabaseName.Text + ".bak");
       }
       catch (Exception ex)
       {
            ClientScript.RegisterStartupScript(GetType(), "Error!", "alert('" + ex.Message + "');", true);
            Logger.LogError(ex.Source, ex.TargetSite.ToString(), ex.Message);
            return;
       }
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:49:52.227

问题是您正在访问未映射的网络位置。访问网络位置时，您需要映射它（在某些情况下，如果您有权限，它会自动发生。但如果您没有权限，您必须自己做）。你有几个选择：

1.  使用映射的网络驱动器并确保它始终被映射（例如使用组策略或启动脚本）
2.  使用 Process.Start 运行“net use”命令（打开 cmd，输入“net use”并查看需要提供的内容）。例如：`Process.Start("c:\\windows\\system32\\net.exe", "use \\\\servername\\location /user:domain\\username password");`
3.  在尝试访问网络位置之前，在您的代码中使用模拟来模拟具有足够权限的用户。

# python - 如何在 sqlobject 中进行“选择”操作

> ID：12730936
> 
> 赞同：1
> 
> 时间：2012-10-04T15:44:36.740
> 
> 标签：python, sql, sqlobject

我想写一个这样的 SQL 语句：

```
select * from 'table' t where t.id in (1,2,4) 
```

但我不知道如何使用 SQLObject 的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:32:14.127

尝试：

```
from sqlobject.sqlbuilder import IN
TableClass.select(IN(TableClass.q.id, [1, 2, 4])) 
```

这将返回一个[SelectResults](http://www.sqlobject.org/SelectResults.html)对象实例。因此，要获取实例列表，您必须：

```
resultList = list(TableClass.select(IN(TableClass.q.id, [1, 2, 4]))) 
```

# javascript - Javascript 替换为正则表达式模式问题

> ID：12730937
> 
> 赞同：1
> 
> 时间：2012-10-04T15:44:38.093
> 
> 标签：javascript, jquery

请考虑下面的 javascript 和 html。
第一次运行时`addAnotherAddress()`，我希望里面**的所有 1**`<div class="previous_address1">`都将替换为**2**，然后将附加 html，`<div id="previous_addresses">`但运行时不会发生这种情况`html.replace(pattern, current_address + 1)`。

我在这里做错了什么？

**Javascript**

```
var current_address = 1; // Used when adding in previous address entries

function addAnotherAddress() {
    var pattern = '/' + current_address + '/g';
    var html = $('.previous_address' + current_address).html();

    html = html.replace(pattern, current_address + 1);

    $('#previous_addresses').append(
        '<div class="previous_address' + (current_address + 1) + '">' + html + '</div>' 
    );
    current_address += 1;
} 
```

**html**

```
<div id="previous_addresses">
    <span class="text_line">
    <u>Previous Addresses for Past 5 Years</u>
    </span>
    <div class="previous_address1">
    <span class="text_line">
        <i>Address 1</i>
    </span>
    <span class="text_line">
        <label for="previous_street1">Street:</label>
        <input type="text" id="previous_street1" />
    </span>
    <span class="text_line">
        <label for="previous_city1">City:</label>
        <input type="text" id="previous_city1" />
    </span>
    <span class="text_line">
        <label for="previous_state1">State:</label>
        <input type="text" id="previous_state1" />
    </span>
    <span class="text_line">
        <label for="previous_zip1">Zip:</label>
        <input type="text" id="previous_zip1" />
    </span>
    <span class="text_line">
        <label for="previous_county1">County:</label>
        <input type="text" id="previous_county1" />
    </span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:56:11.333

您不能直接使用字符串格式的正则表达式模式，您必须对其进行评估：

```
html = html.replace(new RegExp(current_address, "g"), current_address + 1); 
```

# php - 将控制台输出重定向到浏览器

> ID：12730940
> 
> 赞同：1
> 
> 时间：2012-10-04T15:44:46.427
> 
> 标签：php, mysql, windows, linux, unix

我正在寻找一种从程序中获取文本输出并将其用于 PHP Web 应用程序的好方法（可能进入表单字段，最终用于 mysql 数据库。说实话，它可能完全跳过表单字段）。

有问题的程序是zbarcam。它使用您的网络摄像头将条形码中的文本输出到控制台（unix 或 windows）。

我考虑过简单地将程序的输出重定向到文本文件（zbarcam > ~/randomfile），然后使用 ajax 每隔一段时间扫描文件以将其带入表单字段，但这似乎非常低效。

你会怎么做呢？如果可能的话，我想避免 perl 或 python 的额外开销——但我也愿意接受使用它们的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:47:21.660

看看[system()](http://php.net/manual/en/function.system.php)和[exec()](http://php.net/manual/en/function.exec.php)函数。

它们允许您在控制台的上下文中运行程序并返回其输出以供您放入变量并使用。

```
<?php
// outputs the username that owns the running php/httpd process
// (on a system with the "whoami" executable in the path)
echo exec('whoami');
?> 
```

# c# - MdiLayout 没有产生所需的输出

> ID：12730948
> 
> 赞同：1
> 
> 时间：2012-10-04T15:45:34.600
> 
> 标签：c#, winforms, mdi

我有一个 MDI 容器，它允许用户在打开时选择是让表单的子项平铺还是层叠。用户可以通过单击并选中菜单中的项目来选择此选项。但是，在检查项目并打开表单后，它们会出现在另一个之上，而不是平铺或层叠。我试图在打开表单后调用布局方法[在下面的方法中的 dlg.Show() 之后]，但它仍然没有产生正确的布局。

有任何想法吗？

菜单事件处理程序

```
private void titledToolStripMenuItem_Click(object sender, EventArgs e)
    {
        cascadingToolStripMenuItem.Checked = false;
        this.LayoutMdi(MdiLayout.TileHorizontal);
    }

    private void cascadingToolStripMenuItem_Click(object sender, EventArgs e)
    {
        titledToolStripMenuItem.Checked = false;
        this.LayoutMdi(MdiLayout.Cascade);
    } 
```

表单打开方法

```
private void openTallChildToolStripMenuItem_Click(object sender, EventArgs e)
    {
        TallChild dlg = new TallChild(this.height);
        dlg.MdiParent = this;
        dlg.Show();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T16:26:15.330

当孩子的 FormBorderStyle 未设置为 Sizable 时，可能会发生这种情况。

尝试：

```
dlg.FormBorderStyle = FormBorderStyle.Sizable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T02:25:40.683

我必须将 this.LayoutMdi 放入 protected override void OnShown 以使布局正常工作[https://stackoverflow.com/a/2836353/74585](https://stackoverflow.com/a/2836353/74585)

# java - 服务器使用者的 java rabbitmq 超时

> ID：12730949
> 
> 赞同：1
> 
> 时间：2012-10-04T15:45:37.220
> 
> 标签：java, timeout, rabbitmq, consumer

我正在使用 java 和 rabittmq 进行 RPC 实现。

我希望能够通过超时停止消费者，这意味着在消费者处理的超时结束后，我希望消息向客户端发送响应消息以通知消费者无法处理请求.

例如，如果我的消费者由于某种原因挂起，那么超时将通知并向客户端发送错误消息。

# javascript - 将ajax更改为淡入淡出

> ID：12730950
> 
> 赞同：0
> 
> 时间：2012-10-04T15:45:41.077
> 
> 标签：javascript, ajax

我正在使用 javascript 和 ajax 将我的内容加载到我的 div 中，这一切正常。但目前它有点静态，有点难看。

我试图让它淡入淡出，所以当点击一个新标签时，前一个标签会淡出，然后新标签会淡入。

我发现要使用的语法是，`$(selector).fadeIn(speed,callback)`但我不知道在哪里添加它，因为我读过的所有地方都说在你的点击功能之后添加它，但我的代码没有。

```
 var bustcachevar=1 //bust potential caching of external pages after initial request? (1=yes, 0=no)
    var loadedobjects=""
    var rootdomain="http://"+window.location.hostname
    var bustcacheparameter=""

    function ajaxpage(url, containerid){
    var page_request = false
    document.getElementById(containerid).style.display = 'none';
    if (window.XMLHttpRequest) // if Mozilla, Safari etc
    page_request = new XMLHttpRequest()
    else if (window.ActiveXObject){ // if IE
    try {
    page_request = new ActiveXObject("Msxml2.XMLHTTP")
    } 
    catch (e){
    try{
    page_request = new ActiveXObject("Microsoft.XMLHTTP")
    }
    catch (e){}
    }
    }
    else
    return false
    page_request.onreadystatechange=function(){
    loadpage(page_request, containerid)
    }
    if (bustcachevar) //if bust caching of external page
    bustcacheparameter=(url.indexOf("?")!=-1)? "&"+new Date().getTime() : "?"+new Date().getTime()
    page_request.open('GET', url+bustcacheparameter, true)
    page_request.send(null)
    }

    function loadpage(page_request, containerid){
        if (page_request.readyState == 4 && (page_request.status==200 || window.location.href.indexOf("http")==-1)) {
            document.getElementById(containerid).innerHTML=page_request.responseText;
            document.getElementById(containerid).style.display = 'block';
        }
    }

    function loadobjs(){
    if (!document.getElementById)
    return
    for (i=0; i<arguments.length; i++){
    var file=arguments[i]
    var fileref=""
    if (loadedobjects.indexOf(file)==-1){ //Check to see if this object has not already been added to page before proceeding
    if (file.indexOf(".js")!=-1){ //If object is a js file
    fileref=document.createElement('script')
    fileref.setAttribute("type","text/javascript");
    fileref.setAttribute("src", file);
    }
    else if (file.indexOf(".css")!=-1){ //If object is a css file
    fileref=document.createElement("link")
    fileref.setAttribute("rel", "stylesheet");
    fileref.setAttribute("type", "text/css");
    fileref.setAttribute("href", file);
    }
    }
    if (fileref!=""){
    document.getElementsByTagName("head").item(0).appendChild(fileref)
    loadedobjects+=file+" " //Remember this object as being already added to page
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:24:52.447

我会使用 JQuery 来简化您的 AJAX 代码。它还具有用于淡入和淡出的本机功能。

这是一个例子

```
function ajaxpage(url, containerid){
   $.get(url, function(response) {
      $('#'+containerid).fadeOut('slow', function() { 
         $('#'+containerid).html($.trim(response));
         $('#'+containerid).fadeIn('slow'); 
      });
   });
} 
```

**function(response){}**部分是 AJAX GET 调用的回调，然后$ **('#'+containerid).fadeOut() 中**的 function()在淡出完成后运行，然后调用fadeIn( ）。

因为淡出，然后填充新的 HTML，然后淡入是在回调中，这一切都以正确的事件顺序发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:01:46.527

对于 javascript 动画，我会包含 jQuery，但如果您不介意遗漏一些较旧的浏览器，您也可以使用 css3。

只需将其添加到您隐藏/显示的元素的 css 中：

```
-o-transition: all 1s ease-in-out;
-moz-transition: all 1s ease-in-out;
-webkit-transition: all 1s ease-in-out;
transition: all 1s ease-in-out; 
```

有了这个，当你改变一个像`display`from `block`to这样的 CSS 属性时`none`，它会淡出。

**编辑：**在 js 中隐藏和显示您的元素：

```
// you would put this in your click handler, so I guess in your ajaxpage function
document.getElementById(containerid).style.display = 'none';

// you would put this in the callback like
function loadpage(page_request, containerid){
    if (page_request.readyState == 4 && (page_request.status==200 || window.location.href.indexOf("http")==-1)) {
        document.getElementById(containerid).innerHTML=page_request.responseText;
        document.getElementById(containerid).style.display = 'block';
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T15:57:50.057

淡入仅在您使用 jQuery 对象时有效。

```
var ele = document.querySelector('div');
ele.fadeIn(); // Fail
$(ele).fadeIn(); // Works 
```

所以如果你有原始的 dom 对象（没有 jQuery），你可以通过`$`函数运行它，然后你可以使用fadeIn。

# 更新

* * *

此外，fadeIn 不必在 click 函数中，但这只是一个示例。您可以（几乎）在代码中的任何位置运行它。

# extjs - 发送数据后自动清理面板 extjs

> ID：12730951
> 
> 赞同：1
> 
> 时间：2012-10-04T15:45:42.423
> 
> 标签：extjs, panel, cleaned-data

我想用 extjs 4 解决一个问题。我有一个包含多个字段（文本字段、文本区域等）的面板。将数据库中的数据以“结束”发送后，我希望所有字段都被自动清理并且所有事件（包括由任何空字段触发的事件等）。

我尝试使用 doLayout () 但不起作用。

怎么解决，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:37:12.253

我假设您有一个要重置的表单面板。尽管表单上有一个重置方法，但我认为这不是您所说的清理的意思。但是，如果这就是您想要的，那么您的答案就是。

继续假设您希望您的表单反映来自服务器的更改，但没有直接的方法可以做到这一点。最简单的方法是销毁当前表单，创建一个新实例，使用 loadRecord 设置字段，瞧，您有一个更新了服务器端更改的表单。有点痛吧？

# actionscript-3 - as3 - 在动态文本字段中的逗号后添加空格

> ID：12730958
> 
> 赞同：0
> 
> 时间：2012-10-04T15:46:11.863
> 
> 标签：actionscript-3, dynamic, text

我正在输入这样的城市和州名 - 德克萨斯州达拉斯。我需要在逗号后添加一个空格。有没有办法找到逗号并在后面添加空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:48:29.390

尝试替换：

```
var cityName:String = "Dallas,TX";
cityName.replace(",",", ");
trace(cityName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:50:45.390

您可以使用`String.replace`“，”替换任何出现的“，”，例如：

```
var example:String = "Dallas,TX";
example.replace(",", ", ");
// example now reads "Dallas, TX" 
```

您可以在此处查看有关 String 及其成员函数的更多信息：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:56:32.130

```
package  {
    public class Main extends Sprite {      
        private var _txt:TextField;
        public function Main() {
            // constructor code
            _txt = new TextField();
            _txt.type = TextFieldType.INPUT;
            _txt.border = true;
            addChild(_txt);               
            _txt.addEventListener(TextEvent.TEXT_INPUT,onTextChange);
        }
        //onTextChange function will fire in every key press except for the Delete or Backspace keys.
        private function onTextChange(e:TextEvent):void{
             if(_txt.text.charAt(_txt.text.length-1) == ","){
                       //Appends the string specified by the _txt parameter to the end of the text field.
                        _txt.appendText("  ");
                        //setSelection - I have used for move the text cursor to end of the textField.
                            _txt.setSelection(_txt.length,_txt.length);
                        }
                    }
                }

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-20T00:31:58.820

这是一个两年前的帖子，但这是未来访客的答案。

使用带空格的引号并在字符之间使用加号。

例如：

```
trace("Dallas," + " " + "TX"); 
```

或者

```
this.location_text_field.text = String("Dallas," + " TX"); 
```

在第一个示例中，中间的两个引号之间有一个空格 在第二个示例中，空格位于 Dallas 之后和 TX 之前

# python - 使用自定义比较删除重复项

> ID：12730961
> 
> 赞同：19
> 
> 时间：2012-10-04T15:46:19.203
> 
> 标签：python, python-3.x

从列表中删除重复项最方便的“Pythonic”方法基本上是：

```
mylist = list(set(mylist)) 
```

但是假设您计算重复项的标准取决于`mylist`.

好吧，一种解决方案是只为 中的对象定义`__eq__`和，然后经典将起作用。`__hash__``mylist``list(set(mylist))`

但有时您的要求需要更多的灵活性。能够创建动态 lambda 以使用自定义比较例程以不同方式识别重复项将非常方便。理想情况下，类似：

```
mylist = list(set(mylist, key = lambda x: x.firstname)) 
```

当然，这实际上不起作用，因为`set`构造函数不采用比较函数，并且还`set`需要可散列键。

那么实现这样的事情的最接近的方法是什么，以便您可以使用任意比较函数删除重复项？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-04T15:51:35.820

您可以使用字典而不是集合，其中字典的键将是唯一值：

```
d = {x.firstname: x for x in mylist}
mylist = list(d.values()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:50:47.010

我会这样做：

```
duplicates = set()
newlist = []
for item in mylist:
    if item.firstname not in duplicates:
        newlist.append(item)
        excludes.add(item.firstname) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-18T13:58:48.207

如果您需要使用“in”运算符获得更大的灵活性

```
def is_in(value, value_list, comparer_function):
    """ checkes whether "value" already in "value_list" """
    for vi in value_list:
        if comparer_function(vi, value):
            return True
    return False

def make_unique_set(in_list, comparer_function=lambda a, b: a == b):
    """ retusn unique set of "in_list" """
    new_list = []
    for i in in_list:
        if not is_in(i, new_list, comparer_function):
            new_list.append(i)
    return new_list

make_unique_set(mylist, comparer_function=lambda a, b : a.firstname == b.firstname) 
```

# brightcove - Brightcove 智能播放器 - 多个视频作为播放列表

> ID：12730963
> 
> 赞同：0
> 
> 时间：2012-10-04T15:46:24.290
> 
> 标签：brightcove

我正在升级我的纯 Flash 代码以支持 Brightcove 智能播放器，以便它在 HTML5 之间自动切换。

我已经能够毫无问题地切换单个视频播放器。在现有代码中，我可以通过在 javascript 中加载多个 videoID 来模拟播放列表。我的用户不在 Brightcove 中创建播放列表。他们可以在我们的 CMS 中输入 videoID，然后我动态加载它们。

这是旧代码：

```
function onTemplateReady(e) {
    videoList = exp.getElementByID("videoList");
    if (videoList != null) {
        var mediaIdsToRequest = videoIDs;
        content.getMediaInGroupAsynch(mediaIdsToRequest);
    }
    videoLoading = false;

}

function onMediaCollectionLoad(e) {

    if (e.mediaCollection != null) { // This means the mediaCollection is a Playlist or group of videos
        var mediaDTOs = new Array();
        for (var i = 0; i < e.mediaCollection.mediaCount; i++) {
            mediaDTOs[i] = content.getMedia(e.mediaCollection.mediaIds[i]);
        }
        videoList.setData(mediaDTOs);

        // Visually selects the first video in the list
        videoList.setSelectedIndex(0);

        // Cues up the first video of the list in the videoPlayer component but doesn't start playing it
        video.cueVideo(mediaDTOs[0].id);
    }

} 
```

我们基本上包含一个名为 videoList 的参数，它是一个逗号分隔的 videoID 列表。问题似乎是 MEDIA_COLLECTION_LOAD 事件不在新 API 中。现在推荐的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:12:22.197

根据 Brightcove 支持，新的智能播放器 API 似乎不支持此功能。您现在可以在 HTML 中构建自己的播放列表，但是您不能将单个视频馈送到现有的播放列表播放器中。

# android - 当我打开带有持续通知的活动时，具有“持续通知”的 Android 服务以及一次性通知停止工作

> ID：12730964
> 
> 赞同：1
> 
> 时间：2012-10-04T15:46:24.600
> 
> 标签：android, service, notifications

所以我在创建从服务打开活动的通知时遇到了一个小问题。我已将问题缩小到似乎是“正在进行的”未决意图和“通知”未决意图之间的冲突。

所以让我描述一下我正在尝试做的事情。

我有一个应用程序，它有一个后台服务轮询来自数据服务器的新数据。即使没有焦点活动，应用程序也会继续轮询数据以允许应用程序通知用户特定事件。（类似于每 10 分钟对新邮件进行一次后台服务轮询）。

我希望用户始终知道应用程序正在运行，因为如果忘记了应用程序，轮询确实会给用户数据计划带来风险。出于这个原因，我在服务的 onCreate 函数中创建了一个“持续”通知。当用户点击正在进行的通知时，该服务应该将主应用程序活动置于最前面或创建一个。这是使用以下代码完成的：

```
@Override
public void onCreate()
{
    super.onCreate();
    // the Data object is the actual polling object runnable
    data = new Data();
    // ui and data intents are used to send data from the service to the activities that need them
    ui_intent = new Intent(BROADCAST_ACTION);
    data_intent = new Intent(BROADCAST_ACTION);

    res = getResources();

    // the intent to start the main activity
    Intent notificationIntent = new Intent(this, Spectrum.class);
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            notificationIntent, PendingIntent.FLAG_ONE_SHOT);

    Notification notification = new Notification(
            R.drawable.notification_icon, "", System.currentTimeMillis());
    notification.setLatestEventInfo(this, "App Name", "Open App",
            contentIntent);

    notification.flags |= Notification.FLAG_NO_CLEAR;
    startForeground(APP_NOTIFICATION, notification);
} 
```

到目前为止，这段代码运行良好。如果我按下主页按钮，然后点击正在进行的通知，它会调出主要活动（Spectrum.class）

现在除了正在进行的通知之外，我还想要不时发生的特定事件通知。当用户点击这些通知之一时，应用程序将创建一个新的频谱层并将一些信息传递给该活动以显示。（再次非常类似于启动主程序并突出显示新电子邮件的邮件应用程序）。

要创建这些通知，我使用以下代码 private void alert(int alert_id) { String ns = Context.NOTIFICATION_SERVICE; 字符串名称 = data.getData()[alert_id];

```
 NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

    int icon = R.drawable.notification_icon;
    CharSequence tickerText = name + " has an event";
    long when = System.currentTimeMillis();

    Notification notification = new Notification(icon, tickerText, when);

    Context context = getApplicationContext();
    CharSequence contentTitle = "New Event!";
    CharSequence contentText = name;

    Intent notificationIntent = new Intent(this, Spectrum.class);

    notificationIntent.putExtra(Spectrum.CURRENT_IDX, alert_id);

    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    if (PreferenceManager.getDefaultSharedPreferences(getBaseContext())
            .getBoolean("vibrate", false))
    {
        notification.defaults |= Notification.DEFAULT_VIBRATE;
    }
    if (PreferenceManager.getDefaultSharedPreferences(getBaseContext())
            .getBoolean("chirp", false))
    {
        notification.defaults |= Notification.DEFAULT_SOUND;
    }

    PendingIntent contentIntent = PendingIntent.getActivity(this, alert_id,
            notificationIntent, PendingIntent.FLAG_ONE_SHOT);

    notification.setLatestEventInfo(context, contentTitle, contentText,
            contentIntent);
    // I want multiple alerts, up to 1 for every event id so simply set the
    // notification id to be the event id.
    mNotificationManager.notify(alert_id, notification);
} 
```

这段代码再次运行良好。当事件发生时，将显示通知。如果点击通知，则创建频谱活动并正确处理意图扩展。更具体地说，我已经通过创建多个事件并以各种顺序点击它们进行了测试，并且一切正常

当我按下主页按钮时，问题就出现了，将应用程序带回前面并显示正在进行的通知，然后尝试点击其中一个事件通知。一旦我按下正在进行的通知，事件通知就会停止工作。它们仍然被创建，当我点击它们时，它们被清除，但没有创建新的频谱活动，并且不处理正在传递的数据 (event_id)。（之前的活动保持不变）。

有谁知道为什么事件通知停止工作？

我注意到的一件事是，在我点击事件通知时点击正在进行的服务通知之前，我在 LogCat 中收到一条信息消息，看起来像

```
10-04 11:39:07.153: W/ActivityManager(102): startActivity called from non-Activity context; forcing Intent.FLAG_ACTIVITY_NEW_TASK for: Intent { cmp=android.package.test/.Spectrum bnds=[0,369][480,465] (has extras) } 
```

但是在我按下正在进行的服务通知后，我得到了上面的行加上下面的行

```
10-04 11:42:44.953: W/InputManagerService(102): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4085c650 
```

编辑：忘了提到我正在使用 Eclipse 在 Windows 机器上编码。针对 android 3.2 编译，并在物理 Nexus One 设备上进行测试

有任何想法吗？

# iphone - 如何确定 UIView 方向/标题？

> ID：12730971
> 
> 赞同：0
> 
> 时间：2012-10-04T15:46:46.623
> 
> 标签：iphone, uiview, rotation, cllocationmanager

在我的应用程序中，我正在根据 Iphone 标题（来自 CLLocationManager 的标题）旋转 UIView。我用这个函数旋转这个 UIView：

```
[UIView setTransform:CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(theHeading))] 
```

某处有问题，我的观点旋转错误。我正在寻找方法来检查我现在的视图标题并更正它，或者另一种更好的旋转它的方法。谢谢你的帮助！

# javascript - 正则表达式在 cshtml 文件中捕获 Javascript.js

> ID：12730978
> 
> 赞同：1
> 
> 时间：2012-10-04T15:47:08.737
> 
> 标签：javascript, regex

我看了看，我得到的最接近的答案是[从没有扩展名的 url 捕获文件名](https://stackoverflow.com/questions/3671522/regex-capture-filename-from-url-without-file-extention)

所以我有这个cshtml：

```
<script src="@Url.Content("~/Scripts/javascript.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/javascript2.js")" type="text/javascript"></script> 
```

我尝试使用这个正则表达式：

```
(?!.+[Ss]cripts+\/)\/+.+\.js 
```

但是，使用 Rad 正则表达式设计器我得到了这个结果

*   /javascript.js
*   /javascript2.js

我怎么能捕捉到这个

*   javascript（不带 .js）
*   javascript2（不带 .js）

然后我将使用替换表达式

```
$&.min. 
```

得出最终结果

```
<script src="@Url.Content("~/Scripts/javascript2.min.js")" type="text/javascript"></script> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:57:34.090

添加捕获组应该可以完成您想要的：

`((?!.+[Ss]cripts+\/)\/+.+)\.js`

这仍将包括一`/`开始的，但这应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:38:09.367

只想添加以下组合：

所以我有一个带有一些脚本标签的cshtml文件，如下所示：

```
<script src="@Url.Content("~/Scripts/javascript.js")" type="text/javascript"></script> 
```

然后我使用正则表达式替换使用 MSbuild 目标作为：

```
<MSBuild.ExtensionPack.FileSystem.File TaskAction="Replace" RegexPattern="((?!.+[Ss]cripts+\/)\/+.+)\.js" Replacement="$1.min.js" Files="@(CSHTML)" /> 
```

那时和那里的替换表达式`$1.min.js`

导致更换

```
<script src="@Url.Content("~/Scripts/javascript.min.js")" type="text/javascript"></script> 
```

# java - ftp 客户端上的 noClassDefFound 错误：org.apache.commons.net.ftp.FTPClient

> ID：12730984
> 
> 赞同：3
> 
> 时间：2012-10-04T15:47:30.570
> 
> 标签：java, android, ftp, apache-commons, ftp-client

我正在开发一个将文件发送到 url 数据库的应用程序。我开始只是试图发送一张图片。目前我在我的 java 中收到 noclassDefFound 错误。我已经尝试更新 java，再次删除和添加 jar 文件，并且我仔细检查了我的清单以获得正确的权限，所以我来这里寻求帮助。我正在发布 LogCat，但我将问题缩小到两行代码：FTP 类中的 24 行和uploadmedia 类中的 82 行。我还包括有问题的课程和我的清单。

日志猫

```
 10-04 11:33:36.028: E/AndroidRuntime(5013): FATAL EXCEPTION: main
10-04 11:33:36.028: E/AndroidRuntime(5013): java.lang.NoClassDefFoundError: org.apache.commons.net.ftp.FTPClient
10-04 11:33:36.028: E/AndroidRuntime(5013):     at com.cameratest.UploadFTP.FTPUpload(UploadFTP.java:23)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at com.cameratest.UploadMedia.onActivityResult(UploadMedia.java:80)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at android.app.Activity.dispatchActivityResult(Activity.java:5192)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3137)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3184)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at android.app.ActivityThread.access$1100(ActivityThread.java:130)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1243)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at android.os.Looper.loop(Looper.java:137)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at java.lang.reflect.Method.invokeNative(Native Method)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at java.lang.reflect.Method.invoke(Method.java:511)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-04 11:33:36.028: E/AndroidRuntime(5013):     at dalvik.system.NativeStart.main(Native Method) 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.cameratest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="sate2012.avatar.android.UploadMedia"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="sate2012.avatar.android.MailSenderActivity"
            android:label="Upload Data Point" >
            <intent-filter>
                <action android:name="android.intent.action.MAILSENDERACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="sate2012.avatar.android.GMailSender"
            android:label="@string/title_mail_sender_activity"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="sate2012.avatar.android.GMAILSENDER" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="sate2012.avatar.android.UploadData"
            android:label="UploadData" >
            <intent-filter>
                <action android:name="sate2012.avatar.android.UPLOADDATA" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".UploadMedia"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.UPLOAD_MEDIA" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Photographer"
            android:label="photoclass" >
            <intent-filter>
                <action android:name="android.intent.action.PHOTOGRAPHER" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".UploadFTP"
            android:label="photoclass" >
            <intent-filter>
                <action android:name="android.intent.action.UPLOAD_FTP" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

FTP类

```
package com.cameratest;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.content.Context;
import java.io.IOException;
import java.io.BufferedInputStream;
import java.io.FileInputStream;
import java.net.InetAddress;
import org.apache.commons.net.ftp.FTPClient;

public class UploadFTP extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    public static String FTPUpload(String filepath, String extension, Context thisContext) {
        FTPClient ftpClient = new FTPClient();
        long time = (System.currentTimeMillis());
        String filename = "T" + time;
        try {
            ftpClient.connect(InetAddress.getByName("24.123.68.146"));
            ftpClient.login("opensim", "widdlyscuds");
            ftpClient.changeWorkingDirectory("../../var/www/avatar/Uploaded");
            if (ftpClient.getReplyString().contains("250")) {
                Handler progressHandler = new Handler();
                ftpClient.setFileType(org.apache.commons.net.ftp.FTP.BINARY_FILE_TYPE);
                BufferedInputStream buffIn = null;
                buffIn = new BufferedInputStream(new FileInputStream(filepath));
                ftpClient.enterLocalPassiveMode();
                ProgressInputStream progressInput = new ProgressInputStream(buffIn, progressHandler);
                ftpClient.storeFile(filename + extension, progressInput);
                buffIn.close();
                ftpClient.logout();
                ftpClient.disconnect();
            }
        } catch (IOException e) {
        }
        return filename + extension;
    }
} 
```

上传媒体：调用 ftp 类

```
package com.cameratest;

import java.io.File;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;

/**
 * The Upload Menu Allows the user to select different media types to upload to
 * the server
 */
public class UploadMedia extends Activity implements OnClickListener {
    private File sd;
    private File storageFolder;
    private File mediaFolder;
    private ImageButton pictureB;
    private String dataType;
    private String media_filepath;
    private String media_filename;
    private String media_extension;
    private static String image_filepath;
    public static Context thisContext;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        thisContext = getApplicationContext();
        setContentView(R.layout.upload_menu);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        createStorageDirectory();
        pictureB = (ImageButton) findViewById(R.id.cameraButton);
        pictureB.setOnClickListener(this);

    }

    /**
     * Responds to whatever button is pressed
     * 
     * @param View
     *            v - the button clicked
     */
    public void onClick(View v) {
        Intent i;
        switch (v.getId()) {
        case (R.id.cameraButton):
            dataType = getResources().getString(R.string.type_picture);
            i = new Intent(UploadMedia.this, Photographer.class);
            startActivityForResult(i, Globals.CAMERA_REQUEST);
            break;
        }
    }

    public void onBackPressed() {
        finish();
    }

    /**
     * Called when the individual activities (picture, video, audio) finish.
     */
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        // super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == Activity.RESULT_OK) {

            if (requestCode == Globals.CAMERA_REQUEST) {
                media_filepath = getImage_filepath();
                media_extension = "_P.png";
            }
            media_filename = UploadFTP.FTPUpload(media_filepath,
                    media_extension, thisContext);
            Intent MailIntent = new Intent(getApplicationContext(),
                    MailSenderActivity.class);
            MailIntent.putExtra("Type", dataType);
            MailIntent.putExtra("Filename", media_filename);
            startActivity(MailIntent);
            finish();
        }
    }

    public static void setImage_filepath(String fp) {
        image_filepath = fp;
    }

    public String getImage_filepath() {
        return image_filepath;
    }

    @Override
    public void onDestroy() {
        finish();
        super.onDestroy();
    }

    public void createStorageDirectory() {
        sd = Environment.getExternalStorageDirectory();
        storageFolder = new File(sd, Globals.STORAGE_DIRECTORY);
        if (sd.canWrite()) {
            if (!storageFolder.exists())
                storageFolder.mkdir();
            mediaFolder = new File(sd, Globals.STORAGE_DIRECTORY
                    + Globals.MEDIA_DIRECTORY);
            if (!mediaFolder.exists())
                mediaFolder.mkdir();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:55:53.463

在 Application 的 libs 文件夹中添加 commons-net-3.1.jar 文件[。点击这里](http://commons.apache.org/net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:36:47.487

如果由于`jar`文件而出现此错误，此解决方案将解决您的问题。在 android 中查看这个[ClassDefNotFound 错误](https://stackoverflow.com/a/12511271/964741)

# mysql - 如何让Ruby等待mysqldump？

> ID：12730986
> 
> 赞同：2
> 
> 时间：2012-10-04T15:47:42.817
> 
> 标签：mysql, ruby, console, terminal, mysqldump

我想将 mysqldump 的输出分配给一个变量，然后使用生成的输出。

### 尝试1：

```
 > 1.9.3-p125 :020 > x = `mysqldump falala` mysqldump: Got error: 1045: Access denied for user 'root'@'localhost' (using password: NO) when
    > trying to connect  
    => "" 
    > 1.9.3-p125 :021 > x  
    => "" 
```

没有。X 返回为空，甚至无法检查是否有错误

### 尝试2：

```
> 1.9.3-p125 :022 > x = system("mysqldump falala") mysqldump: Got error: 1045: Access denied for user 'root'@'localhost' (using password: NO)
> when trying to connect  
=> false
1.9.3-p125 :023 > x
 => false 
```

更好的。这样，如果命令成功，x 就会得到信息，但仍然没有控制台输出。

我还是 Ruby 的新手，但我认为 Ruby 会继续运行而不等待 mysqldump 执行它的操作，但我真的需要该输出（因为如果发生错误，脚本会发送错误/控制台输出）

我需要运行的完整命令是这样的
`mysqldump --host=#{host} --user=#{user} --password=#{pass} #{name} | gzip -9 > #{name}.sql.gz`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T16:07:37.117

反引号和#system 都会阻塞父进程，直到子进程退出。#system 只返回退出状态码。反引号仅返回标准输出。所以你也想得到stderr。一种方法是使用[Open3](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html)：

```
require 'open3'

stdout, stderr, status = Open3.capture3('mysqldump', 'falala')

fail "An error happened: #{stderr}" unless status.exitstatus == 0 
```

这种方法显然不适用于大型转储，因为整个转储都被放入 stdout 变量中。要将 mysqldump 的输出重定向到文件，我建议查看[Process.spawn](http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-spawn)。

# delphi - 如何覆盖 AdvancedCustomDrawItem - TreeView

> ID：12730989
> 
> 赞同：2
> 
> 时间：2012-10-04T15:47:50.043
> 
> 标签：delphi

我正在尝试覆盖 AdvancedCustomDrawItem 方法，因为我想让我的所有者 TreeView 这是我的尝试：

```
type TTreeView=class (Vcl.ComCtrls.TTreeView )
  protected
  procedure AdvancedCustomDrawItem(
  Node: TTreeNode; State: TCustomDrawState; Stage: TCustomDrawStage;
  var PaintImages, DefaultDraw: Boolean);override;

 end; 
```

但我收到此错误：[dcc32 Error] Unit1.pas(10): E2137 Method 'AdvancedCustomDrawItem' not found in base class

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:58:03.307

您不能覆盖该方法，因为它不存在。该`OnAdvancedCustomDrawItem`事件被触发`CustomDrawItem`，您可以覆盖该事件。它是这样声明的`TCustomTreeView`：

```
function CustomDrawItem(Node: TTreeNode; State: TCustomDrawState;
  Stage: TCustomDrawStage; var PaintImages: Boolean): Boolean; virtual; 
```

基本实现同时触发`OnCustomDrawItem`和`OnAdvancedCustomDrawItem`事件。

如果您想通过这项工作取得任何进展，您需要查阅此控件的源代码。

# iphone - 所有区域格式的 NSDate 格式

> ID：12730990
> 
> 赞同：0
> 
> 时间：2012-10-04T15:47:54.127
> 
> 标签：iphone, ios, localization, nsdate

NSDateFormatter 是否有适用于所有区域格式的日期格式。这可以工作：

```
NSDateFormatter *dateformat = [[NSDateFormatter alloc]init];
[dateformat setDateFormat:@"?"];
NSDate *testDate = [dateformat dateFromString:@"%@ %@",dateStr,timeStr];
NSLog(@"%@",testDate); 
```

有人知道这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:19:57.483

您可以使用特殊格式属性`dateStyle`和`timeStyle`. 它们适用于所有区域格式，但您必须自己找出适合您特定情况的格式。这些 s 的输入与日期和时间相同。例如：

```
formatter.dateStyle = NSDateFormatterMediumStyle;
formatter.timeStyle = NSDateFormatterMediumStyle; 
```

这是可用的：

```
typedef NS_ENUM(NSUInteger, NSDateFormatterStyle) {    // date and time format styles
    NSDateFormatterNoStyle = kCFDateFormatterNoStyle,
    NSDateFormatterShortStyle = kCFDateFormatterShortStyle,
    NSDateFormatterMediumStyle = kCFDateFormatterMediumStyle,
    NSDateFormatterLongStyle = kCFDateFormatterLongStyle,
    NSDateFormatterFullStyle = kCFDateFormatterFullStyle
}; 
```

# asp.net-mvc-3 - 如何用另一个替换部分视图？

> ID：12730991
> 
> 赞同：5
> 
> 时间：2012-10-04T15:48:02.540
> 
> 标签：asp.net-mvc-3, partialviews

我想显示“最新消息”文章列表，并单击“阅读更多”链接，以显示单击文章的全部内容。为此，我在 Index.cshtml 视图中使用了局部视图。第一次显示索引视图时，部分视图会填充文章列表。我想要的是：在点击时重用相同的局部视图来显示全文。

出于某种原因，我无法做到这一点，我不明白为什么。使用调试器和 Firebug，我不能捕获任何错误。此外，应用程序经过所有步骤，似乎甚至显示了 _Details 部分视图，但实际上，屏幕上仍然是列表。

谢谢你指出我的错误。

*编辑：*

我在 _Layout.cshtml 中引用了所有必要的脚本：*jquery-1.8.2.min.js、jquery-ui-1.8.24.custom.min.js、jquery.ui.core.min.js、jquery.validate。 min.js、jquery.validate.unobtrusive.min.js*和*jquery.unobtrusive-ajax.js*，而且我在 web.config 中有*“UnobtrusiveJavaScriptEnabled”=“true” 。*

**索引.cshtml**

```
@model MyApp.ViewModels.NewsViewModel

<div id="content" class="content_style"> 
   <text>Some static content</text>
   <div class="active_part">
        @Html.Partial("_List", Model.NewsList)
   </div><!-- end active_part -->
</div><!-- end content --> 
```

**_List.cshtml**

```
@model IEnumerable<MyApp.Models.News>
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "active_part", InsertionMode = InsertionMode.Replace }))
{
    foreach (var item in Model)
    {
    <h2 class='title">
    @Ajax.ActionLink(item.Title, "Details", "News", new { id = item.News_ID }, new AjaxOptions { UpdateTargetId = "active_part" }, null)
        </h2>

        <div class="body">
            @Html.Raw(item.Body)
            @Ajax.ActionLink("Read more", "Details", "News", new { id = item.News_ID }, new AjaxOptions { UpdateTargetId = "active_part" }, null)
    </div>
    }
} 
```

**_Details.cshtml**

```
@model MyApp.Models.News
@using (Ajax.BeginForm(new AjaxOptions{ UpdateTargetId = "active_part", InsertionMode = InsertionMode.Replace }))
{

    <div class="single">
        <h2 class="title">@Model.Title</h2>
        <div class="entry-content">
            @Html.Raw(Model.Body)
        </div>
    <div class="clear"></div>    
    </div>
} 
```

**视图模型**

```
public class NewsViewModel
{
    // Properties
    public News CurrentNews { get; set; }
    public List<News > NewsList {get; set;}

    // Constructor
    public NewsViewModel() { }

    public NewsViewModel(News pCurrentNews , List<News> pNewsList)
    {
        CurrentNews = pCurrentNews ;
        NewsList = pNewsList;
    }
} 
```

**控制器**

```
 public ViewResult Index()
    {
        return View( new NewsViewModel(null, repository.FindAllNews()));
    }

    public ActionResult Details(long id)
    {
        News article = repository.FindAnArticleByID(id);
        return PartialView("_Details", article);
    }

    public ActionResult ListNews()
    {
        return PartialView("_List", repository.FindAllNews());
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T16:12:00.750

在您`Index.cshtml`看来：

```
<div class="active_part"> 
```

应该：

```
<div id="active_part"> 
```

当您`UpdateTargetId = "active_part"`在 AjaxOptions 中指定时，它正在寻找带有`id="active_part"`，而不是的 DOM 元素`class="active_part"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:06:55.990

确保您在页面中导入了正确的 .js 脚本。

与 Microsoft Ajax 脚本相比，我对 jquery 脚本的运气要好得多：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

# jquery - 将 a 设置为块会在同一列中显示 's 的内容

> ID：12730996
> 
> 赞同：-1
> 
> 时间：2012-10-04T15:48:20.937
> 
> 标签：jquery, html, css

> **可能重复：**
> [表格行中的slideToggle](https://stackoverflow.com/questions/5126704/slidetoggle-in-table-row)

我有一张桌子，我正在使用 jquery`slideToggle()`来显示和隐藏一些行。

`<tr>`如果您不将要切换的元素显示为块 ( ) ，则 Slidetoggle 无法正常工作（它不动画`display:block`）。

问题：如果我将 's 设置`<tr>`为一个块，它会`<td>`在同一列（第一列）中显示 's 的内容。

在这里你有：

[http://jsfiddle.net/7LH3p/6/](http://jsfiddle.net/7LH3p/6/)

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:06:34.263

要为 TR 设置动画，我建议您将 TD 内容包含在 div 中，然后为 div 设置动画，请参阅我的工作[**演示**](http://jsfiddle.net/F6Vw2/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:54:10.693

我认为这可能是因为您只制作了 ONE tr 具有块样式。当我将它们全部设置为块时，看起来一切正常：

[http://jsfiddle.net/yuadX/](http://jsfiddle.net/yuadX/)