# StackOverflow 问答 12951000-12951999

# java - 安卓 cocos2d

> ID：12951000
> 
> 赞同：0
> 
> 时间：2012-10-18T09:08:30.007
> 
> 标签：java, android

我是 android cocos2d 的新手，我后来使用 player1 和 player2 CCSprites n 创建了一个游戏，以便将 player1 和 player2 移动到精灵位置，它变得复杂。请提供我需要的文档或解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:05:15.967

您必须使用 move to 动作来移动精灵，然后在播放器上运行该动作

```
 CCMoveTo moveTo = CCMoveTo.action(0.5f, CGPoint.ccp(x, y));
    mPlayer1.runAction(moveTo); 
```

其中 x 和 y 是您想要移动精灵的点，0.ff 是完成该动作的时间间隔。

# android - 我在开发安卓应用的时候，想用搜索栏调节音乐的音量，怎么做？

> ID：12951001
> 
> 赞同：0
> 
> 时间：2012-10-18T09:08:29.467
> 
> 标签：android, volume, seekbar

当我开发一个 Android 应用程序时，我想用搜索栏来调整音乐的音量。如何才能做到这一点？另外，当我调整音乐的音量时，我不想显示 Toast。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:41:37.113

请检查此代码......

```
 SeekBar ring = null;
AudioManager mgr = null;
    mgr = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
     ring = (SeekBar) findViewById(R.id.seekBar1);
    initBar(ring, AudioManager.STREAM_RING); 
```

请使用您的搜索栏视图实例调用函数 initbar 并流式传输它将在您增加或减少搜索栏时设置音乐音量...

```
private void initBar(SeekBar bar, final int stream) {
    bar.setMax(mgr.getStreamMaxVolume(stream));
    bar.setProgress(mgr.getStreamVolume(stream));

    bar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        public void onProgressChanged(SeekBar bar, int progress,
                boolean fromUser) {
            mgr.setStreamVolume(stream, progress,
                    AudioManager.FLAG_PLAY_SOUND);
        }

        public void onStartTrackingTouch(SeekBar bar) {
            // no-op
        }

        public void onStopTrackingTouch(SeekBar bar) {
            // no-op
        }
    });
} 
```

# android - 从 ICS 4.0 中的最近应用程序启动时，为什么用户会话会过期？

> ID：12951008
> 
> 赞同：0
> 
> 时间：2012-10-18T09:09:03.413
> 
> 标签：android, sqlite, usersession

在我的应用程序中，我有 sqlite db。当用户第一次登录时，我将（登录信息如用户 ID）写入 SQLite 数据库。我正在检查用户是否登录的所有活动。

我的问题是，当用户关闭这个应用程序然后从最近的应用程序按钮打开它时，它一直重定向到登录活动。

我的错误是什么？

最近的应用程序按钮像强制停止一样工作？

有人可以给我任何建议吗？

（项目流程类似于当这个应用程序下载一次并登录时，用户必须不需要再登录一次）

# dhtml - OpenLaszlo DHTML 从 4.9 迁移到 5.0 问题

> ID：12951016
> 
> 赞同：1
> 
> 时间：2012-10-18T09:09:25.010
> 
> 标签：dhtml, openlaszlo, lzx

我正在尝试将我的 4.9 DHTML 应用程序迁移到 5.0。当我这样做时，我收到了一个错误

```
ReferenceError: EVENT_OBJECT_FOCUS is not defined
[Break On This Error]   

this.sendAAEvent(0,EVENT_OBJECT_FOCUS) 
```

在这一行中，我看到了这组代码。从类名看来，它是一个单选按钮类。

```
 $lzc$class_baselistitem,["tagname","radiobutton","children",[{attrs:{$CSSDescriptor:{},$attributeDescriptor:{types:LzNode.mergeAttributeTypes(lz.ClassAttributeTypes["accessible"],{EVENT_OBJECT_FOCUS:"number",EVENT_OBJECT_NAMECHANGE:"number",EVENT_OBJECT_SELECTION:"number",EVENT_OBJECT_STATECHANGE:"number"})},$classrootdepth:1,$delegates:["onselected","$mb5",null,"ontext","$mb6",null],$mb5:function($0){
if(!this.isinited){
return
};if(this.selected){
this.sendAAEvent(0,EVENT_OBJECT_FOCUS)
};this.sendAAEvent(0,EVENT_OBJECT_STATECHANGE,true)
},$mb6:function($0){
this.sendAAEvent(0,EVENT_OBJECT_NAMECHANGE)
},EVENT_OBJECT_FOCUS:32773,EVENT_OBJECT_NAMECHANGE:32780,EVENT_OBJECT_SELECTION:32774,EVENT_OBJECT_STATECHANGE:32778,name:"accessible",updateFocus:function($0){
if($0){
this.sendAAEvent(0,EVENT_OBJECT_SELECTION);this.sendAAEvent(0,EVENT_OBJECT_FOCUS)
};this.sendAAEvent(0,EVENT_OBJECT_STATECHANGE,true)
}},"class":LzState} 
```

这是因为 radio.lzx 发生的。有没有人遇到过这样的问题。

我目前正在使用 FF 16.0 windows xp sp 3 和 Openlaszlo 5.0.x 修订版 19830

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:02:42.930

我会尝试在不同的操作系统上使用不同的 Firefox 版本或 Firefox。我觉得这可能是某个特定版本的 Firefox 中的 Firefox 错误。

唯一提到的`EVENT_OBJECT_FOCUS`可以在 OpenLaszlo 的 JIRA 问题[LPP-7594 Jaws Accessibility support required for Radioboxes 中找到](http://jira.openlaszlo.org/jira/browse/LPP-7594)。似乎没有提交任何错误。

# html - 原始语言的国家选择器

> ID：12951018
> 
> 赞同：0
> 
> 时间：2012-10-18T09:09:29.470
> 
> 标签：html, forms

我需要知道网络中是否存在原始语言的某些国家/地区选择器。例如，

```
<select>
.
.
.
<option value="España"> España</option>
<option value="United States">United States</option>
.
.
.
</select> 
```

谢谢！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:14:10.667

还有更多选项，因此我建议您尝试演示并查看[baymard.com/labs/country-selector](http://baymard.com/labs/country-selector)上的文档。开源代码在 MIT 许可下发布，可在 GitHub 上获得。

**“使用渐进增强的原则，我们将标准下拉菜单转变为高级自动完成字段。这意味着下拉菜单仍然可以访问，同时在现代浏览器中提供更好的体验——处理拼写错误、多个拼写序列、同义词和优先级。”**

# java - 在 Java 中使用 ASM 监控对象创建

> ID：12951020
> 
> 赞同：5
> 
> 时间：2012-10-18T09:09:34.917
> 
> 标签：java, instrumentation, java-bytecode-asm

我正在使用 ASM 来监视 Java 中的对象创建。**目前，我将对init**的调用作为创建新对象的指标，并从

```
invoke XXX.init 
```

至

```
dup;  
invoke XXX.init;  
call_my_method(Object) 
```

我的想法是复制一个 newObjectReference 的副本，并且在这个对象的**初始化**之后，我调用我的方法来保留这个对象。

但是，在运行时，有一个例外：

```
java.lang.VerifyError, Expecting to find unitialized object on stack. 
```

当我使用“-noverify”选项时，在运行时，如果有线程实例，则会引发第二个异常：

```
Exception in thread "main" java.lang.IllegalThreadStateException
at java.lang.Thread.start(Unknown Source)
at test.ThreadTest.test 
```

对于第二种情况，我确信除了原始程序中没有调用线程的**start () 。**

有没有更好的方法来监控新对象的创建？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:00:04.337

尝试，将调用 XXX.init 转换为

`invoke XXX.init;
dup;
call_my_method(Object)`

基本上在init方法返回后调用副本。

解释:: 鉴于您想跟踪新对象的创建，我猜您正在查看诸如**new XXX()**之类的语句。现在，它转换为字节码的方式如下：-

`NEW XXX
DUP
INVOKESPECIAL <init>`

换句话说，**NEW**字节码指令用于创建对象本身。它在堆栈顶部复制，因此您有一个对象的附加副本。此时请注意，对象的 2 个副本未初始化。然后在堆栈顶部的第一个未初始化对象上调用 init 方法。到构造函数返回时，对象已初始化，因此位于堆栈顶部的对象也已初始化。（那是因为位于堆栈顶部的“对象”实际上是指向位于堆上某处的实际对象的对象引用。我使用单词对象而不是对象引用，因为它更易于解释。抱歉，如果这引起了任何混乱。）

# eclipse - Maven 项目导入效果不佳

> ID：12951021
> 
> 赞同：0
> 
> 时间：2012-10-18T09:09:40.187
> 
> 标签：eclipse, m2e

这是一个奇怪的问题，可能它有一个愚蠢的解决方案，但仍然如此。

我最近在 VBOX 上安装了一台 Windows 32 位机器（最初在 linux 上运行）。我不知道这是否重要，但也许。

我用 m2e 和 m2e-wtp 安装了一个新的 eclipse Juno。

我从 SVN 签出了一个 maven 项目（多模块），然后我尝试将它作为 maven 项目导入到 eclipse，只需右键单击 --> 导入 --> maven --> 现有的 maven 项目。到目前为止，我已经完成了数百万次，没有任何问题。

Eclipse 导入所有项目，但它们都有这个错误：项目构建错误：不可解析的父 POM：找不到工件 com.xx.xx:parent-pom:pom:1.0.0-SNAPSHOT 和 'parent.relativePath' 点在错误的本地 POM。

此外，当我右键单击一个 java 项目并检查它的属性时，eclipse 似乎无法将其识别为 java 项目（我添加了一个屏幕截图）。 ![在此处输入图像描述](../Images/480455dc8c675019ba570878959002f2.png)

我想声明我是这里唯一遇到这个问题的人，所以我认为这是一个日食问题。

请帮忙。

问候， 伊多布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:22:12.980

您确定 parent-pom 在正确的版本中可用吗？错误消息告诉您 parent-pom 不可用。它要么必须作为 Eclipse 项目可用，要么必须在您的存储库中可用。默认情况下，您可以在 WinXP 计算机中的 Documents and Settings\.m2\repository 中找到本地存储库。

# windows - 通过 Win7 上的应用程序无法成功访问 IBDA_DigitalDemodulator 接口

> ID：12951022
> 
> 赞同：1
> 
> 时间：2012-10-18T09:09:41.403
> 
> 标签：windows, driver, directshow, bda

我需要构建一个应用程序来配置一些解调器参数（如符号率、调制类型等），我通过 Microsoft BDA 架构完成了这些事情；但是，这是我的代码如下：

```
CComPtr <IBDA_Topology> pITopology;
CComPtr <IBDA_AutoDemodulate>   m_pIAutoDemod;
CComPtr <IBDA_DigitalDemodulator>   m_pIDigiDemod;

hr = m_pTunerDevice->QueryInterface(IID_IBDA_Topology,
reinterpret_cast<void**>(&pITopology) );

ULONG   nNodesTypeNum = 0;
ULONG   NodesType[10];

hr = pITopology->GetNodeTypes(&nNodesTypeNum, 10, NodesType);

CComPtr <IUnknown> pIUknow;

// NodesType[1] is the Demod node
hr = pITopology->GetControlNode(0, 1, NodesType[1], &pIUknow);

ULONG   nInterfacesNum = 0;
GUID    InterfacesGUID[10];

// After this call, we sure that InerfacesGUID[0] == IID_IBDA_AutoDemodulate
// and InerfacesGUID[1] == IID_IBDA_DigitalDemodulator
hr = pITopology->GetNodeInterfaces(NodesType[1], &nInterfacesNum, 10,
InerfacesGUID);

// Call this success
hr = pIUknow->QueryInterface(IID_IBDA_DigitalDemodulator, (void
**)&m_pIDigiDemod);

ModulationType type = BDA_MOD_NOT_DEFINED;
hr = m_pIDigiDemod->get_ModulationType(&type);//failed here 
```

我可以毫无问题地获取接口对象；但是当我调用任何方法（获取调制类型，获取符号率）时，它总是返回 E_HANDLE；我还检查了我的 BDA 驱动程序是否良好。

任何将我指向正确方向的想法都值得赞赏。

# vb.net - 解析、转换和 CType() 之间的区别

> ID：12951023
> 
> 赞同：1
> 
> 时间：2012-10-18T09:09:42.573
> 
> 标签：vb.net, casting

`Int32.Parse(a)`和`CType(a,int)`和有什么区别 `Convert.ToInt32(a)`？我们什么时候可以使用它们？C# 中 CType 的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:12:05.303

**Int32.parse(字符串)**

> Int32.Parse (string s) 方法将数字的字符串表示形式转换为其等效的 32 位有符号整数。当 s 为空引用时，会抛出 ArgumentNullException。如果 s 不是整数值，则会抛出 FormatException。当 s 表示小于 MinValue 或大于 MaxValue 的数字时，会抛出 OverflowException。

**Convert.ToInt32(字符串)**

> Convert.ToInt32(string s) 方法将指定的字符串表示形式转换为等效的 32 位有符号整数。这又调用了 Int32.Parse() 方法。当 s 为空引用时，它将返回 0 而不是抛出 ArgumentNullException。如果 s 不是整数值，则会抛出 FormatException。当 s 表示小于 MinValue 或大于 MaxValue 的数字时，会抛出 OverflowException。

# flash - 处理 AMFPHP 执行错误（非异常）

> ID：12951028
> 
> 赞同：2
> 
> 时间：2012-10-18T09:09:51.493
> 
> 标签：flash, cakephp, exception, amf, amfphp

我们使用*CakeAMF*。它优雅地处理代码中的异常并返回`FaultEvent`到闪存端。但是，如果会发生一些 PHP 错误（致命错误） - 无法从客户端处理此问题 - 我们只会收到错误 500 而没有任何解释。在请求解析器中（`Service Capture`或者`Charles`我看到关于错误描述的 HTML 文本，由*CakePHP*编写）。

有没有办法在 AMF 类中捕获和处理此错误并返回`FaultEvent`，而不是 Cake HTML 文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:12:07.283

您可以尝试设置一个自定义错误处理程序，将其变成异常。AmfPHP 2.0 中有一个插件，但我记得 CakeAMF 仍在使用 1.9，所以你必须自己编写代码

尝试一些类似 set_error_handler('custom_warning_handler');

function custom_warning_handler($errno, $errstr, $errfile, $errline, $errcontext) { throw new Exception("$errstr . \n
file: $errfile \n
line: $errline \n
context: " . print_r($errcontext,真), $errno); }

# iphone - 带有“完成”和“登录”按钮的 FBGraph 登录页面问题

> ID：12951032
> 
> 赞同：1
> 
> 时间：2012-10-18T09:09:59.497
> 
> 标签：iphone, uiwebview, fb-graph

我正在使用 FBGraph 在我的应用程序中获取用户的朋友列表，在 Facebook 的登录页面中输入用户凭据后，当我点击键盘上的“完成”按钮并再次点击“登录 Facebook”按钮时，它正在移动到 webview 中的用户个人资料页面.

我的要求是成功登录 FaceBook 后，webview 必须关闭并在 tableview 中打开用户的好友列表。

如果我点击这两个按钮中的任何一个，我已经达到了我的要求，但是当我同时点击两个按钮时我需要相同的输出。

现在输出屏幕截图如下图所示。

![在此处输入图像描述](../Images/70b5266a5f5f3cde80c41f59ebbcb3dc.png)

# magento-1.7 - 管理员创建订单页面缺少“添加产品”按钮 - magento

> ID：12951033
> 
> 赞同：0
> 
> 时间：2012-10-18T09:10:01.747
> 
> 标签：magento-1.7, magento

我们刚刚将站点从 1.6.X 升级到 1.7.0.2 并遇到了这个问题，99% 的站点运行良好。

当您去销售/订单并创建新订单时，“添加产品”按钮不见了？我检查了样式，按钮应该在的地方只有一个空白 div -

```
<div class="form-buttons"></div> 
```

我已经尝试卸载扩展，从 magento connect 重新安装 magento 1.7.0.2 并且我还手动下载/覆盖了 adminhtml 文件夹，这些都没有任何效果。

我们还在同一台服务器上安装了一个新的带有空白数据库的 magento 副本，并且该按钮存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:11:05.783

更改位于此处的文件中：

/app/code/core/Mage/Adminhtml/Block/Sales/Order/Create/Items.php 在第 55 行附近

在以前的版本中，getButtonsHtml() 函数是：

```
public function getButtonsHtml()
{
    $addButtonData = array(
        'label' => Mage::helper('sales')->__('Add Products'),
        'onclick' => "order.productGridShow(this)",
        'class' => 'add',
    );
    return $this->getLayout()->createBlock('adminhtml/widget_button')->setData($addButtonData)->toHtml();
} 
```

新版本是：

```
public function getButtonsHtml()
{
    $html = '';
    // Make buttons to be rendered in opposite order of addition. This makes "Add products" the last one.
    $this->_buttons = array_reverse($this->_buttons);
    foreach ($this->_buttons as $buttonData) {
        $html .= $this->getLayout()->createBlock('adminhtml/widget_button')->setData($buttonData)->toHtml();
    }

    return $html;
} 
```

所以现在您可以拥有多个按钮，但第一个默认按钮不再存在。

我不确定如何在不覆盖此块的情况下添加它。

# android - 无法从 AsyncThread 设置微调器适配器

> ID：12951035
> 
> 赞同：0
> 
> 时间：2012-10-18T09:10:06.487
> 
> 标签：android

我正在从 php 中获取一些数据并尝试通过 arrayadater 在微调器中显示该数据，但是有一个概率可以

```
**DownloadDetails downloaddeatils = new DownloadDetails(this);
        downloaddeatils.execute(url);

    public class DownloadDetails extends AsyncTask<String, Void, String> {
        Context context;
        ProgressDialog progressDialog;
        public DownloadDetails(Context context) {
            this.context = context;
            progressDialog = new ProgressDialog(context);
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog.setMessage("Fetching Data, please wait...");
            progressDialog.setCancelable(false);
            progressDialog.show();
        }

        @Override
        protected String doInBackground(String... urls) {
            String output = null;
            for(String url: urls) {
                output = getOutputFromUrl(url);
            }
            return output;
        }**
 private String getOutputFromUrl(String url) {
                try {
                    DefaultHttpClient httpClient = new DefaultHttpClient();
                    HttpPost httpPost = new HttpPost(url);
                    JSONObject object = null;
                    JSONObject object1 = null;
                    JSONObject object2 = null;
                    HttpPost httppost = new HttpPost(url);
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
                    nameValuePairs.add(new BasicNameValuePair("speciality_id", sid));
                    nameValuePairs.add(new BasicNameValuePair("type",type)); 
                    nameValuePairs.add(new BasicNameValuePair("condition_id", cid));
                    nameValuePairs.add(new BasicNameValuePair("locality", locality));
                    nameValuePairs.add(new BasicNameValuePair("city_name", city_name));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));       
                    ResponseHandler<String> responseHandler = new BasicResponseHandler();
                    String responseBody = httpClient.execute(httpPost,
                            responseHandler);
                    Log.d("Respone",responseBody);
                    if(!responseBody.equals(null))
                    {

                    JSONObject jsonResponse = new JSONObject(responseBody);
                    object = jsonResponse.getJSONObject("firstarray");
                    object1 = jsonResponse.getJSONObject("secondarray");
                    object2 = jsonResponse.getJSONObject("thirdarray");
                    try {

                        if (!object.toString().trim().contains("null")) {
                            Log.d("Inside ","count"+count);
                            if (count == 0) {
                                JSONArray jArray = object.getJSONArray("values");
                                for (int i = 0; i < jArray.length(); i++) {
                                    String str = jArray.getString(i).substring(0,
                                            jArray.getString(i).length());
                                    String[] data = str.split("_");
                                    specialistList.add(data[0]);
                                    specialistNameList.add("" + data[1]);
                                    //specialistAdapter.add("" + data[1]);
                                }
                                //specialistAdapter.setNotifyOnChange(true);
                                count = 1;

                            }
                        }
                        if (!object1.toString().trim().contains("null")) {
                            JSONArray JArray1 = object1.getJSONArray("values1");
                            for (int i = 0; i < JArray1.length(); i++) {
                                String str = JArray1.getString(i).substring(0,
                                        JArray1.getString(i).length());
                                String[] data = str.split("_");
                                conditionList.add(data[0]);
                                //conditionAdapter.add(data[1]);
                                conditionNameList.add(data[1]);
                            }
                            //conditionAdapter.setNotifyOnChange(true);
                            Log.d("Inside","SecondArray");
                        }
                        if (!object2.toString().trim().contains("null")) {
                            JSONArray JArray1 = object2.getJSONArray("values2");
                            for (int i = 0; i < JArray1.length(); i++) {
                                String str = JArray1.getString(i).substring(0,
                                        JArray1.getString(i).length());
                                String[] data = str.split("_");
                                doctorIdList.add(data[0]);
                                doctorNameList.add(data[1]);
                            //  adapter.add(data[1]);
                            }
                        //  adapter.setNotifyOnChange(true);
                        }

                    } catch (Exception e) {
                        Log.d("Unknown exception",""+e);
                        e.printStackTrace();
                        } 
                    }
                    else
                    {
                        Toast.makeText(getApplicationContext(),"Unable to fetch data from server",Toast.LENGTH_LONG).show();
                    }
               }
                catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (JSONException e1) {
                    e1.printStackTrace();
                }
                return null;
            }

            @Override
            protected void onPostExecute(String output) {
                super.onPostExecute(output);
                if (progressDialog.isShowing()) {
                    progressDialog.dismiss();
                                    for(int i=0;i<specialistNameList.size();i++)
                    specialistAdapter.add(specialistNameList.get(i));
                for(int j=0;j<conditionNameList.size();j++)
                    conditionAdapter.add(conditionNameList.get(j));
                for(int k=0;k<doctorNameList.size();k++)
                    adapter.add(doctorNameList.get(k));

                }

                if(output != null) {
                    Toast.makeText(getApplicationContext(), "Cannot connect to Server",Toast.LENGTH_LONG).show();
                }
                else {

                }        
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:13:46.767

您应该编写修改事件线程的代码，在`onPostExecute()`、 或`onPreExecute()`、 或`onPublishedProgress()`方法中，而不是在`doInBackground()`方法中。

# ios - AFNetworking：重试操作时访问完成处理程序

> ID：12951037
> 
> 赞同：7
> 
> 时间：2012-10-18T09:10:10.527
> 
> 标签：ios, networking, afnetworking

给出一些上下文：我正在尝试为身份验证错误实现一个全局错误处理程序（使用令牌身份验证，而不是基本的），它应该尝试重新进行身份验证，然后重复原始失败的请求（请参阅我之前的问题：[AFNetworking：Handle全局错误并重复请求](https://stackoverflow.com/questions/12893837/afnetworking-handle-error-globally-and-repeat-request)）

当前的方法是为`AFNetworkingOperationDidFinishNotification`执行重新身份验证的观察者注册一个观察者，并且（如果身份验证成功）重复原始请求：

```
- (void)operationDidFinish:(NSNotification *)notification
{
    AFHTTPRequestOperation *operation = (AFHTTPRequestOperation *)[notification object];

    if(![operation isKindOfClass:[AFHTTPRequestOperation class]]) {
        return;
    }

    if(403 == [operation.response statusCode]) {
        // try to re-authenticate and repeat the original request
        [[UserManager sharedUserManager] authenticateWithCredentials...
            success:^{
                // repeat original request

                // AFHTTPRequestOperation *newOperation = [operation copy]; // copies too much stuff, eg. response (although the docs suggest otherwise)
                AFHTTPRequestOperation *newOperation = [[AFHTTPRequestOperation alloc] initWithRequest:operation.request];

                // PROBLEM 1: newOperation has no completion blocks. How to use the original success/failure blocks here?

                [self enqueueHTTPRequestOperation:newOperation];
            }
            failure:^(NSError *error) {
                // PROBLEM 2: How to invoke failure block of original operation?
            }
        ];
    }
} 
```

但是，我偶然发现了一些关于请求操作完成块的问题：

*   重复原始请求时，我显然希望执行其完成块。但是，`AFHTTPRequestOperation`不保留对传递的成功和失败块的引用（请参阅 参考资料`setCompletionBlockWithSuccess:failure:`），并且复制`NSOperation`'s`completionBlock`可能不是一个好主意，因为`AFURLConnectionOperation`状态的文档：

    > 操作副本不包括`completionBlock`. `completionBlock`通常强烈地捕获对 的引用，也许令人惊讶的是，它在复制时`self`会指向*原始操作。*

*   如果重新认证失败，我想调用原始请求的失败块。所以，再一次，我需要直接访问它。

我在这里错过了什么吗？关于替代方法的任何想法？我应该提交功能请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:55:23.407

我在[Art.sy](http://art.sy)的投资组合应用程序中提出了这个问题。我最终的结论是创建一个 NSOperationQueue 子类，该子类具有在各种 AFNetworking HTTP 操作失败时创建副本的功能（并且在放弃之前每个 URL 最多执行 3 次。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:42:20.733

您是否尝试过以下操作？

```
// set success / failure block of original operation
[newOperation setCompletionBlock:[operation.completionBlock copy]];
[operation setCompletionBlock:nil]; 
```

请注意，如果您在原始完成/失败块中捕获 self（即访问任何 ivars），则在执行 newOperation 的完成块时您实际上访问的是原始操作实例。但这实际上是你想要的，对吧？

通知处理程序在操作的完成块之前执行。所以你应该将原始操作的完成块设置为nil，以防止它执行两次。

请注意，完成块在执行后设置为 nil（请参阅 AFURLConnectionOperation）。

在 authenticateWithCredentials 失败块中，您不应该做任何事情。原始操作在那个时候已经完成并且已经执行了它的失败块。

# ajax - Magento 在退出时填充编辑框

> ID：12951038
> 
> 赞同：0
> 
> 时间：2012-10-18T09:10:13.617
> 
> 标签：ajax, magento, jquery, magento-1.7

这应该是一个非常简单的问题，但找不到如何去做。在前端，我有一个带有一些编辑框或`input-text`字段的表单。在其中一个中，用户将编写/粘贴博客网址。当用户退出我想要的框时：

1.  获取此 url 并从该博客解析/搜索/获取与[OpenGraph 协议](http://ogp.me/)相关的标签（如果存在）。如果没有此类标签，`title`则将使用通常和相关的标签。
2.  ~~然后使用标签的值来填充当前表单、标题、评论、描述、图像等上的其他编辑字段~~

这些动作如何才能完成，也许是**AJAX ？**与**jQuery**一起使用？还是其他解决方案？现在我已经搜索过了，这里有一些我认为可能有用的链接：

*   [需要在magento中实时显示用户的选择](https://stackoverflow.com/questions/8391049/need-to-display-users-choices-realtime-in-magento)
*   [在 Magento 中使用基本 AJAX 调用](https://stackoverflow.com/questions/8835146/using-basic-ajax-calls-within-magento)
*   [Magento 和 AJAX.Updater](https://stackoverflow.com/questions/10713794/magento-and-ajax-updater)
*   [使用 AJAX 刷新 DIV 内容](http://www.aleixcortadellas.com/main/2009/02/11/232/)

我有一个完整的工作模块，有几个不同的模型、布局、控制器、后端管理、几个前端功能等。但在这种情况下，我什至不知道从哪里开始，要修改哪些文件以及要添加什么首先形成。

**编辑**

设法完成第二点，使用来自 Ajax 请求的答案填充其他输入文件`XMLHttpRequest`。这是不同的文件，以防万一有人有不同的解决方案或一些建议。没有显示所有代码，因为它太长了。

.phtml 文件：

```
<div id="blog_link_block">
    <input class="input-text required-entry" onchange="showHint(this.value)"
            name="blog_link" id="blog_link_field" type="text"  style="width: 210px;"
            value="" />
</div>
<div>
    <label for="title_field"><?php echo $this->__('Title'); ?>
        <span class="required">*</span>
    </label><br />
    <input class="input-text required-entry" name="title" id="title_field" type="text"
           style="width: 450px;" value="" />
</div>

<script type="text/javascript">
    function showHint(str)
    {
        <?php $block = Mage::getBlockSingleton('blogtest/product_view');
        $temp = $block->getUrl('blogtest/blogtagsajax/index');?>

        if (str.length==0)
        { 
            document.getElementById("title_field").innerHTML = "";
            return;
        }
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function()
        {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("title_field").value = xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","<?php echo $temp ?>?q="+str,true);
    xmlhttp.send();
}
</script> 
```

布局文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
    <blogtest_blogtagsajax_index>
        <reference name="root">
            <remove name="root"/>
        </reference>
        <block type="blogtest/product_ajax" name="product.ajax" output="toHtml" />
    </blogtest_blogtagsajax_index>
</layout> 
```

控制器：

```
<?php
class Dts_Blogtest_BlogtagsajaxController extends Mage_Core_Controller_Front_Action {

    public function indexAction() {
        $this->loadLayout();
        $this->renderLayout();
    }
} 
```

php 文件来处理请求：

```
<?php
class Dts_Blogtest_Block_Product_Ajax extends Mage_Core_Block_Template {

    public function __construct(){
        echo self::myFunc();
    }

    public function myFunc() {
        $a[]="Anna";
        $a[]="Brittany";
        $a[]="Cinderella";
        $a[]="Diana";

        //get the q parameter from URL
        $q=$_GET["q"];

        //lookup all hints from array if length of q>0
        if (strlen($q) > 0)
        {
            $hint="";
            for($i=0; $i<count($a); $i++){
                if (strtolower($q)==strtolower(substr($a[$i],0,strlen($q)))){
                    if ($hint==""){
                        $hint=$a[$i];
                    }
                    else{
                        $hint=$hint." , ".$a[$i];
                    }
                }
            }
        }

        if ($hint == ""){
            $response="no suggestion";
        }
        else{
            $response=$hint;
        }

        //output the response
        return $response;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:44:23.763

要回答第一点，尝试使用[OpenGraphNode](http://buzzword.org.uk/2010/opengraph/#php)库但遇到[一些错误](https://stackoverflow.com/questions/12972049/php-and-opengraph-protocol-errors)。

然后我[在 SO 上找到了这个问题/答案](https://stackoverflow.com/questions/3711357/get-title-and-meta-tags-of-external-site)，所有问题都消失了。已接受答案的建议功能与`og:`标签完美配合。这是我的修改版本：

```
function file_get_contents_curl($url)
{
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        $data = curl_exec($ch);
        curl_close($ch);
        return $data;
}

public function myFunc() {
    // get the q parameter from URL
    $q = $_GET["q"];

    $html = self::file_get_contents_curl($q);

    //parsing begins here:
    $doc = new DOMDocument();
    @$doc->loadHTML($html);
    $nodes = $doc->getElementsByTagName('title');
    $title = $nodes->item(0)->nodeValue;
    $metas = $doc->getElementsByTagName('meta');

    for ($i = 0; $i < $metas->length; $i++){
        $meta = $metas->item($i);
        if($meta->getAttribute('name') == 'og:title')
            $title = $meta->getAttribute('content');
        if($meta->getAttribute('name') == 'og:description')
            $description = $meta->getAttribute('content');
        if($meta->getAttribute('name') == 'keywords')
            $keywords = $meta->getAttribute('content');
    }

    $title = trim($title);
    if ($title  == ""){
        $response = "no title";
    }
    else{
        $response = $title;
    }
    //output the response
    return $response;
} 
```

# iphone - 使用情节提要时如何继承导航控制器？

> ID：12951039
> 
> 赞同：8
> 
> 时间：2012-10-18T09:10:14.333
> 
> 标签：iphone, uinavigationcontroller, storyboard, uiinterfaceorientation, subclassing

我正在使用 Xcode 菜单“编辑器...嵌入...导航控制器”在界面构建器中使用情节提要。

似乎在 iOS 6 中，您必须将 UINavigationController 子类化以允许所有方向，使用

```
- (NSUInteger)supportedInterfaceOrientations {
    return (UIInterfaceOrientationMaskAll   );
} 
```

但是，由于代码中没有对它的引用，我如何使用故事板应用程序对 UINavigationController 进行子类化？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-21T15:04:37.943

您可以从情节提要中选择导航控制器场景的导航控制器：

![在此处输入图像描述](../Images/bce184068bbbd42da1d9590404f6717c.png)

然后使用右侧的身份检查器更改类：

![在此处输入图像描述](../Images/5f7fa582bfb26a70d0b7a3ab3bf97479.png)

例如，将“类”更改为`MyCustomNavigationController`，然后在您的项目中创建一个名为`MyCustomNavigationController`：

**MyCustomNavigationController.h**：

```
#import <UIKit/UIKit.h>

@interface MyCustomNavigationController : UINavigationController
@end 
```

**MyCustomNavigationController.m**：

```
@implementation MyCustomNavigationController

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

... any other methods you want ...

@end 
```

# spring - Spring MVC jsp 映射

> ID：12951047
> 
> 赞同：1
> 
> 时间：2012-10-18T09:10:41.620
> 
> 标签：spring, jsp, http-status-code-404

您好，我是 Spring 新手，卡在我的 jsp 映射上 - 我的页面发出 404 - Page not found 错误。

**我的项目结构是**

```
 WebContent
     + META-INF
     - WEB-INF
      - jsp
        index.jsp
        login.jsp
      +lib
      springMVC-servlet.xml
      web.xml 
```

Web.xml

```
 <display-name>spring</display-name>
        <servlet>
             <servlet-name>springMVC</servlet-name>
             <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>  
        </servlet>

     <servlet-mapping>
      <servlet-name>springMVC</servlet-name>
      <url-pattern>/</url-pattern>
     </servlet-mapping>
     <welcome-file-list> 
      <welcome-file>index.jsp</welcome-file> 
    </welcome-file-list>
    </web-app> 
```

springMVC-servlet.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:context="http://www.springframework.org/schema/context"
     xmlns:mvc="http://www.springframework.org/schema/mvc"
     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

        <context:component-scan
            base-package="web.controller" />

     <!-- Enabling Spring MVC configuration through annotations -->
     <mvc:annotation-driven />

        <bean id="viewResolver"
            class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="prefix" value="/WEB-INF/jsp/" />
            <property name="suffix" value=".jsp" />
        </bean>
    </beans> 
```

家庭控制器

```
 @RequestMapping(method=RequestMethod.GET, value="/")
            public String index(){
                    return "index";
            }

            @RequestMapping(value="/login")
            public String login() {
                return "login";
            } 
```

我能够加载`http://localhost:8080/Spring3/`

index.jsp 具有以下代码 -

```
 <%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
       pageEncoding="UTF-8"%>
    <html>
    <head>
    <title>Login</title>
    </head>
    <body>
    <c:url value="login.jsp" var="somevar" />
    <h1>Click here to </h1> <a href= "${somevar}">Login</a>   
    </body>
    </html> 
```

但是，当我单击登录页面的链接时 - 我得到了 404 页面。

我不确定出了什么问题 - 谁能帮我确定我的映射出了什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T09:16:36.750

在 index.jsp 中，您应该编写`<c:url value="login" var="somevar" />`为具有映射的控制器`@RequestMapping(value="/login")`

# phalcon - 如何在多模块 Phalcon 应用程序中使用“主布局”视图？

> ID：12951048
> 
> 赞同：5
> 
> 时间：2012-10-18T09:10:41.753
> 
> 标签：phalcon

我正在为我的 PhalconPHP 应用程序使用“多模块”MVC 结构。

我想弄清楚的一个问题是如何将我的“主布局”视图配置为位于模块视图文件夹*之上。*

换句话说，我想要一个主“主布局”（[如此处所述](http://docs.phalconphp.com/en/latest/reference/views.html#using-views)），并且我希望我的所有模块在该主布局视图中的“控制器视图”级别输出它们的视图。

默认情况下，主布局视图似乎取自

```
[app]
 [module1]
    [controllers]
    [models]
    [views]
        (main layout is coming from here)
 [module2]
    [controllers]
    [models]
    [views]
        (main layout is coming from here)
 [views]
    (master main layout should come from here?) 
```

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:21:30.443

您正在寻找的内容无法在此版本（0.5.0 稳定版）或下一个 0.6.0 版（因为它已冻结，待发布）中完成。

在您的模块中，您注册您的视图

```
// /module1/Module.php

// Registering the view component
$di->set(
    'view', 
    function () {
        $view = new \Phalcon\Mvc\View();
        $view->setViewsDir('../apps/module1/views/');
        return $view;
    }
);

// /module2/Module.php

// Registering the view component
$di->set(
    'view', 
    function () {
        $view = new \Phalcon\Mvc\View();
        $view->setViewsDir('../apps/module2/views/');
        return $view;
    }
); 
```

等等。

您还可以拥有一个对所有模块都通用的主视图，但不是两者的组合。

```
//Registering a shared view component
$di->set(
    'view', 
    function() {
    $view = new \Phalcon\Mvc\View();
    $view->setViewsDir('../apps/views/');
    return $view;
    }
); 
```

请参阅Github 上的[此示例](https://github.com/phalcon/mvc/tree/master/multiple-shared-views)。

这很可能是 0.7 版本的 NFR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T11:57:22.110

在 Phalcon 1.2.4 版（也可能在早期版本中），一个主“主布局”是可能的。Phalcon 相对于 ViewsDir 构建 lauout 的路径，设置如下

```
$view->setViewsDir('../apps/views/'); 
```

所以，如果相对地设置 lauout 的路径，它会起作用

```
$view->setLayoutsDir('./../../views/'); 
```

也许是组织该结构以在应用程序初始化时以及在 Module.php 中设置 ViewsDir 时声明视图对象的最佳方式：

```
// Application.php
$di->set('view', function() use ($config) {
    $view = new View();
    $view->setLayoutsDir('./../../views/');
    $view->setLayout('index');
}, true); 
```

和

```
// /module1/Module.php
$di->get('view')->setViewsDir('../apps/module1/views/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T11:39:07.773

你可以使用multiple-shared-layouts Demo或者下载看看它是如何工作的 [https://github.com/phalcon/mvc/tree/master/multiple-shared-layouts/apps](https://github.com/phalcon/mvc/tree/master/multiple-shared-layouts/apps)

或者只需为每个 Module.php 添加 t

```
 $di['view'] = function () {
            $view = new View();
            $view->setViewsDir(__DIR__ . '/views/');
            $view->setLayoutsDir('../../common/layouts/');
            $view->setTemplateAfter('main');
            return $view;
        }; 
```

# iis - 带有冒号的 URL 的 URL 重写模块 IIS 7 重定向不起作用

> ID：12951049
> 
> 赞同：1
> 
> 时间：2012-10-18T09:10:43.307
> 
> 标签：iis, redirect, url-rewriting

我正在尝试使用 IIS 将旧网站的内容重定向到新网站。我的重写地图如下所示：

```
<rewriteMaps>
  <rewriteMap name="Redirects">
<add key="/q/R.208-9899.aspx" value="/bla/garden/childrens-gardening/cat3376588.cat"/>
<add key="/store/dvd/lego-the-adventures-of-clutch-powers/8%3a939022" value="/bla/entertainment-books/dvd/cat12590010.cat" />
<add key="/store/dvd/world-steam-today--north-central-and-south-america/8:470831" value="/bla/entertainment-books/dvd/cat12590010.cat" />
</rewriteMap>
</rewriteMaps> 
```

我的`web.config`样子是这样的：

```
<rule name="Redirect rule1 for Redirects" enabled="true">
    <match url=".*" />
          <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{Redirects:{REQUEST_URI}}" pattern="(.+)" />
          </conditions>
          <action type="Redirect" url="http://www.example.com{C:1}" appendQueryString="false" />
     </rule> 
```

第一个 url 工作正常，但后两个无法工作。

任何指针都会很有用。

# iframe - 从弹出窗口登录后如何在 iframe 上执行操作？

> ID：12951054
> 
> 赞同：1
> 
> 时间：2012-10-18T09:10:54.837
> 
> 标签：iframe, selenium, webdriver, selenium-webdriver

Web 驱动程序需要执行以下操作：

1.  单击 iFrame 中的按钮会打开一个弹出窗口。
2.  输入凭据，然后弹出窗口会自动关闭并且用户已登录。
3.  在 iFrame 中以登录用户身份执行一些操作。

我能够执行前两个步骤，但是当我尝试以登录用户身份在 iFrame 上执行时，遇到以下错误：

com.thoughtworks.selenium.SeleniumException：会话 [38d070ab-dde8-4b7a-8f19-043ef05dc1cc] 没有驱动程序。浏览器窗口可能已关闭。

请提及是否有任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:03:13.680

弹出窗口关闭后，您需要切换回原始窗口以执行操作。

正如桑托什所说，使用`driver.switchTo.defaultContent()`！

# c# - 代码隐藏文件无法识别 aspx 控件

> ID：12951059
> 
> 赞同：3
> 
> 时间：2012-10-18T09:11:04.537
> 
> 标签：c#, asp.net, visual-studio-2010, code-behind

我得到了一个用 aspx/c# 编写的 webproject。当我将它加载到 Visual Studio 2010 中时，我收到很多错误，告诉我代码隐藏文件中的某些控件在当前上下文中不存在。

我检查了常见的陷阱，例如错误的代码隐藏文件名、缺少`runat`-attribute、重新启动 VS、重新加载项目，但没有任何方法可以解决错误。

我还能做些什么来检查问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:07:06.887

尝试将代码隐藏更改为 CodeFile="where code locate"，然后它可能会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:19:03.937

标记文件的继承类和文件后面的代码应该匹配，并确保这些控件不是第三方并且可能需要引用它们的 dll 或其他东西。如果这些控件是用户控件（ascx）控件，请确保它们使用在顶部的寄存器行中正确标记名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:05:58.147

感谢@03Usr，以下链接带来了答案：

[ASP.NET 控件无法在 Visual Studio 2008 的代码隐藏中引用](https://stackoverflow.com/questions/38670/asp-net-controls-cannot-be-referenced-in-code-behind-in-visual-studio-2008)

删除所有设计器文件并将项目转换为 Web 应用程序会带回设计器文件，从而有效地使控件再次可引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-02T18:14:43.697

这是一个非常烦人的hack，但是如果您从aspx页面中删除控件然后保存页面，然后将控件粘贴回页面并再次保存后面的代码，那么似乎可以识别控件。每当我更改像 ID 这样的属性时，我都会遇到这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-16T05:05:39.923

在我的例子中，aspx 文件位于名为 XYZ 的文件夹中，类名是 ABC。所以 ASP 将 C# 文件的类名命名为 XYZ_ABC 将文件重命名为 ABC 后，错误已修复

希望能帮助到你！

# python - 在 matplotlib 中使用 hexbin 获取 bin 坐标

> ID：12951065
> 
> 赞同：14
> 
> 时间：2012-10-18T09:11:16.580
> 
> 标签：python, matplotlib, histogram

我使用 matplotlib 的方法`hexbin`来计算我的数据的 2d 直方图。但我想获得六边形中心的坐标，以便进一步处理结果。

我在结果上使用方法得到了值`get_array()`，但我不知道如何获取箱坐标。

我试图在给定箱数和数据范围的情况下计算它们，但我不知道每个方向上的确切箱数。 `gridsize=(10,2)`应该可以解决问题，但它似乎不起作用。

任何的想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T23:19:38.580

我认为这行得通。

```
from __future__ import division
import numpy as np
import math
import matplotlib.pyplot as plt

def generate_data(n):
    """Make random, correlated x & y arrays"""
    points = np.random.multivariate_normal(mean=(0,0),
        cov=[[0.4,9],[9,10]],size=int(n))
    return points

if __name__ =='__main__':

    color_map = plt.cm.Spectral_r
    n = 1e4
    points = generate_data(n)

    xbnds = np.array([-20.0,20.0])
    ybnds = np.array([-20.0,20.0])
    extent = [xbnds[0],xbnds[1],ybnds[0],ybnds[1]]

    fig=plt.figure(figsize=(10,9))
    ax = fig.add_subplot(111)
    x, y = points.T
    # Set gridsize just to make them visually large
    image = plt.hexbin(x,y,cmap=color_map,gridsize=20,extent=extent,mincnt=1,bins='log')
    # Note that mincnt=1 adds 1 to each count
    counts = image.get_array()
    ncnts = np.count_nonzero(np.power(10,counts))
    verts = image.get_offsets()
    for offc in xrange(verts.shape[0]):
        binx,biny = verts[offc][0],verts[offc][1]
        if counts[offc]:
            plt.plot(binx,biny,'k.',zorder=100)
    ax.set_xlim(xbnds)
    ax.set_ylim(ybnds)
    plt.grid(True)
    cb = plt.colorbar(image,spacing='uniform',extend='max')
    plt.show() 
```

![在此处输入图像描述](../Images/2bcdfd4e8366e9379cecb3eae30799b2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-01T01:25:54.973

我很想确认 Hooked 使用 get_offsets() 编写的代码有效，但我尝试了上述代码的多次迭代来检索中心位置，正如 Dave 提到的，get_offsets() 仍然为空。我发现的解决方法是使用非空的 'image.get_paths()' 选项。我的代码平均查找中心，但这意味着它只是稍微长一点，但它确实有效。

get_paths() 选项返回一组嵌入的 x,y 坐标，可以循环遍历然后平均返回每个六角星的中心位置。

我拥有的代码如下：

```
counts=image.get_array() #counts in each hexagon, works great
verts=image.get_offsets() #empty, don't use this
b=image.get_paths()   #this does work, gives Path([[]][]) which can be plotted

for x in xrange(len(b)):
    xav=np.mean(b[x].vertices[0:6,0]) #center in x (RA)
    yav=np.mean(b[x].vertices[0:6,1]) #center in y (DEC)
    plt.plot(xav,yav,'k.',zorder=100) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-29T19:08:44.387

我有同样的问题。我认为需要开发的是一个具有 HexagonalGrid 对象的框架，然后可以将其应用于许多不同的数据集（对于 N 维这样做会很棒）。[这是可能的，令我惊讶的是 Scipy 或 Numpy 都没有任何东西（此外，除了binify](https://github.com/kevinschaul/binify)之外似乎没有其他类似的东西）

也就是说，我假设您想使用 hexbinning 来比较多个分箱数据集。这需要一些共同的基础。我通过以下方式使用 matplotlib 的 hexbin 让它工作：

```
import numpy as np
import matplotlib.pyplot as plt

def get_data (mean,cov,n=1e3):
    """
    Quick fake data builder
    """
    np.random.seed(101)
    points = np.random.multivariate_normal(mean=mean,cov=cov,size=int(n))
    x, y = points.T
    return x,y

def get_centers (hexbin_output):
    """
    about 40% faster than previous post only cause you're not calculating the 
    min/max every time 
    """
    paths = hexbin_output.get_paths()
    v = paths[0].vertices[:-1] # adds a value [0,0] to the end
    vx,vy = v.T

    idx = [3,0,5,2] # index for [xmin,xmax,ymin,ymax]    
    xmin,xmax,ymin,ymax = vx[idx[0]],vx[idx[1]],vy[idx[2]],vy[idx[3]]

    half_width_x = abs(xmax-xmin)/2.0
    half_width_y = abs(ymax-ymin)/2.0

    centers = []
    for i in xrange(len(paths)):
        cx = paths[i].vertices[idx[0],0]+half_width_x
        cy = paths[i].vertices[idx[2],1]+half_width_y
        centers.append((cx,cy))

    return np.asarray(centers)

# important parts ==>

class Hexagonal2DGrid (object):
    """
    Used to fix the gridsize, extent, and bins
    """
    def __init__ (self,gridsize,extent,bins=None):
        self.gridsize = gridsize
        self.extent = extent
        self.bins = bins

def hexbin (x,y,hexgrid):
    """
    To hexagonally bin the data in 2 dimensions
    """
    fig = plt.figure()
    ax = fig.add_subplot(111)

    # Note mincnt=0 so that it will return a value for every point in the 
    # hexgrid, not just those with count>mincnt

    # Basically you fix the gridsize, extent, and bins to keep them the same
    # then the resulting count array is the same
    hexbin = plt.hexbin(x,y, mincnt=0,
                        gridsize=hexgrid.gridsize, 
                        extent=hexgrid.extent,
                        bins=hexgrid.bins)
    # you could close the figure if you don't want it
    # plt.close(fig.number)

    counts = hexbin.get_array().copy() 
    return counts, hexbin

# Example ===>
if __name__ == "__main__":
    hexgrid = Hexagonal2DGrid((21,5),[-70,70,-20,20])
    x_data,y_data = get_data((0,0),[[-40,95],[90,10]])
    x_model,y_model = get_data((0,10),[[100,30],[3,30]])

    counts_data, hexbin_data = hexbin(x_data,y_data,hexgrid)
    counts_model, hexbin_model = hexbin(x_model,y_model,hexgrid)

    # if you want the centers, they will be the same for both 
    centers = get_centers(hexbin_data) 

    # if you want to ignore the cells with zeros then use the following mask. 
    # But if want zeros for some bins and not others I'm not sure an elegant way
    # to do this without using the centers
    nonzero = counts_data != 0

    # now you can compare the two data sets
    variance_data = counts_data[nonzero]
    square_diffs = (counts_data[nonzero]-counts_model[nonzero])**2
    chi2 = np.sum(square_diffs/variance_data)
    print(" chi2={}".format(chi2)) 
```

# c# - 如何确定当前的输入语言？

> ID：12951067
> 
> 赞同：5
> 
> 时间：2012-10-18T09:11:21.247
> 
> 标签：c#, winapi, keyboard, keyboard-hook

我正在设计一个屏幕键盘，

我需要确定用户设置的语言以及他现在在其他线程中使用的语言，

即我需要知道任务栏语言切换器中选择的语言：

![语言切换器](../Images/f9bdf576cc5f3d007ee376b7de18f7cf.png)

PS当前文化返回屏幕键盘应用程序中使用的语言，这不是我正在寻找的情况..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T12:11:34.093

解决方案是获取前台窗口的键盘布局，然后将其应用于屏幕键盘，并以通常的方式检查语言。

```
 IntPtr fore = GetForegroundWindow();
            uint tpid = GetWindowThreadProcessId(fore, IntPtr.Zero);
            IntPtr hKL = GetKeyboardLayout(tpid);
            hKL = (IntPtr)(hKL.ToInt32() & 0x0000FFFF);
            InputLanguageManager m = InputLanguageManager.Current;
            m.CurrentInputLanguage = new System.Globalization.CultureInfo(hKL.ToInt32());
            //IntPtr i = LoadKeyboardLayout(hKL.ToString(), 1);

            InputLanguage = InputLanguageManager.Current.CurrentInputLanguage.ToString(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T12:41:21.490

您还可以使用[WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)：

```
using System;
using System.Management;
using System.Windows.Forms;

namespace WMISample
{
    public class MyWMIQuery
    {
        public static void Main()
        {
            try
            {
                ManagementObjectSearcher searcher = 
                    new ManagementObjectSearcher("root\\CIMV2", 
                    "SELECT * FROM Win32_BIOS"); 

                foreach (ManagementObject queryObj in searcher.Get())
                {
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("Win32_BIOS instance");
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("CurrentLanguage: {0}", queryObj["CurrentLanguage"]);
                }
            }
            catch (ManagementException e)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

# java - XmlPullParser 删除正则表达式中的“\”

> ID：12951072
> 
> 赞同：0
> 
> 时间：2012-10-18T09:11:35.070
> 
> 标签：java, android, regex, xmlpullparser

我解析以下段落：

```
<group start="372" name="Russia" max-len="11" regex="^\d{8}$" curnpay="RUR" capacity="false" inccode="true">

String regExpValue = parser.getAttributeValue(null, GROUP_TAG_ATT_REGEXP); 
```

结果，我得到`regExpValue = "^d{8}$"`了“\”消失的地方。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:21:34.190

您需要在 Java 中进行双重转义。因为Java不知道rawstrings之类的东西，并且首先处理字符串并执行所有转义序列。由于`\d`不是字符串转义序列，因此仅删除了反斜杠。

所以试试：

```
<group start="372" name="Russia" max-len="11" regex="^\\d{8}$" curnpay="RUR" capacity="false" inccode="true"> 
```

# c# - 在 C# 中使用 .Replace 方法时添加额外的 "

> ID：12951073
> 
> 赞同：3
> 
> 时间：2012-10-18T09:11:37.500
> 
> 标签：c#

我的问题是当我尝试向链接添加 url 时，`"`总是在字符串的末尾附加一个额外的。

当前错误代码：

`Label add_url = "<a href=\"/test/\">link</a>";`// 生成指向 /test/ 的链接

`Label rep_url = add_url.Replace("\"/", "http://mysite.com/");`// 生成指向[http://mysite.com/test/](http://mysite.com/test/)的错误链接“<- 注意！额外的”在这里

我错过了什么吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:16:28.467

您可能错过了公开报价，因为您要替换它：

```
Label rep_url = add_url.Replace("\"/", "\"http://mysite.com/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:17:06.610

尾随报价很好，它应该在那里。它是等号后面缺少的那个。

引号不平衡是因为您删除了初始引号，而不是因为您插入了尾随引号：

```
Label rep_url = add_url.Replace("\"/", "\"http://mysite.com/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:23:46.317

请试试这个

```
Label rep_url = add_url.Replace("\"","\"http://mysite.com/"); 
```

# fancybox - 自定义 Fancybox 画廊

> ID：12951074
> 
> 赞同：0
> 
> 时间：2012-10-18T09:11:46.333
> 
> 标签：fancybox

我正在使用 fancybox 来加载我的应用程序中的所有图像。截至目前，我正在为下一个和上一个链接创建自己的方法，而不是使用花式框的方法。输出是这样的。

[http://imgur.com/a/TFq2N#0](http://imgur.com/a/TFq2N#0)（所需输出）

但唯一的问题是，点击后，我正在更改图像，这需要一些时间。

现在，我想使用 fancybox 库，因为我在一个 json 数组中拥有所有 URL 和标题。所以我做了这样的事情，现在我把它作为输出。(http://i.imgur.com/JNfmz.png)

我想要的是，带有图像的（期望的输出）更容易加载。

```
$.fancybox([{href : 'image.jpg', title : 'Lorem lipsum'},{href : 'image.jpg', title : 'Lorem lipsum'}]); 
```

我可以让它看起来像我想要的输出，意味着我可以添加自定义内容吗？

# javascript - 如何直接链接到由 innerHTML 生成的 div？

> ID：12951078
> 
> 赞同：1
> 
> 时间：2012-10-18T09:11:58.967
> 
> 标签：javascript, innerhtml

所以当我想生成一系列类似于下面的 div 时，我开始使用 innerHTML。

```
<div id="123233"></div>
<div id="123234"></div>
<div id="123235"></div> 
```

现在我意识到我想直接链接到这些 div。

例如：www.example.com/page#123234

我发现了一些场景。

1.  如果我直接访问 www.example.com/page#123234，它的行为就好像 #123234 不存在一样。
2.  如果我首先访问 www.example.com/page 然后在 url 中添加 #123234 ，它会按需要工作。
3.  如果我去 www.example.com/page#123234 然后再次写入相同的 url 它不起作用。
4.  如果我执行方案 2，然后重新加载页面，它会保持在相同的位置。
5.  如果我执行方案 2 并再次写入相同的 url，它就不起作用。

所以考虑到这一点，我有我的问题......

如何直接链接到由 innerHTML 生成的 div？

附加信息：

我希望该链接可以在任何地方工作。可以是外部域或只是另一个页面，如 www.example.com/startpage。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:23:05.487

在您的 JavaScript 中，您必须要么使用某种类型`onload`的脚本，要么将所有脚本放在最后，以便您可以使用 innerHTML。我假设前者。所以你有了：

```
window.onload = function () {
    document.body.innerHTML += "<div id="123233"></div>";
}; 
```

如果您添加一行来刷新哈希（# 之后的位），那么它应该滚动到您期望的位置：

```
window.onload = function () {
    document.body.innerHTML += "<div id=\"123233\"></div>";
    window.location.hash = window.location.hash;
}; 
```

所做的只是将散列设置为已经设置的值，但不同之处在于它在设置时是有效的散列，而在页面首次加载时不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:24:04.543

由于您为每个元素分配了一个 ID，因此您可以在创建元素后通过其 ID 找到该元素，并在从查询字符串中获取它之后，然后将页面向下滚动到其位置。

我建议使用 javascript 命令而不是使用 innerHTML 创建元素，因为您已经通过这种方式引用了它们。

此外，据我所知，ID 应该以 HTML 规范的字母开头。

# ios6 - iOS6 layoutIfNeeded doesn't trigger layoutSubViews for UITableViewCell

> ID：12951085
> 
> 赞同：2
> 
> 时间：2012-10-18T09:12:22.747
> 
> 标签：ios6, layoutsubviews

In my app I have a table view with customised table view cells. In **iOS5** i use the following snippet of code to get the correct height for my customised cells. In iOS6 after doing a [tableView reloadData] the [cell layoutIfNeeded] will not trigger the cells layoutSubViews method. And because of that the cells heights are wrongly calculated. Any good suggestions to why this is? Or maybe alternative ways of doing it?

```
- (CGFloat)tableView:(UITableView *)aTableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [self tableView:aTableView cellForRowAtIndexPath:indexPath];
    [cell setNeedsLayout];
    [cell layoutIfNeeded];
    [cell sizeToFit];

    return cell.frame.size.height;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:32:33.580

Your code snippet has fundamental errors regarding table view life cycle. If it works on iOS 5 or anywhere as you claimed, you might just being lucky.

First of all, `tableView:heightForRowAtIndexPath:` is called BEFORE `tableView:cellForRowAtIndexPath:`. At this point, NO cell exists. You are not supposed to call `UITableViewCell *cell = [self tableView:aTableView cellForRowAtIndexPath:indexPath];` here.

For laying out subviews of tableView (suppose it is the top level view of view controller), you could override `viewWillLayoutSubviews` method of view controller. That's what Apple recommends.

For laying out subviews of table view cell, you could subclass UITableViewCell and override its `layoutSubviews` method.

# java - 创建日历 3 年

> ID：12951088
> 
> 赞同：1
> 
> 时间：2012-10-18T09:12:36.847
> 
> 标签：java, android, calendar

> **可能重复：**
> [如何在 Java 中将日期增加一天？](https://stackoverflow.com/questions/428918/how-can-i-increment-a-date-by-one-day-in-java)

```
public static ArrayList<Calendar> getCalendarsForThreeYears() {
        if (calendars == null) {
            calendars = new ArrayList<Calendar>();
            final Calendar moving = Calendar.getInstance();
            final int targetYear = moving.get(Calendar.YEAR) + 1;
            moving.set(moving.get(Calendar.YEAR) - 1, Calendar.JANUARY, 1);
            final SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yy");
            while (!(moving.get(Calendar.YEAR) == targetYear
                    && moving.get(Calendar.MONTH) == Calendar.DECEMBER && moving
                    .get(Calendar.DAY_OF_MONTH) == 31)) {
                final Calendar c = (Calendar) moving.clone();
                calendars.add(c);
                moving.roll(Calendar.DAY_OF_MONTH, 1);
                System.out.println(sdf.format(c.getTime()));
            }
        }
        return calendars;
    } 
```

我希望它可以创建*3*年的`Calendar`对象（*当前之前的那个，当前的和下一个*）。

 **然而，这是一个无限循环，因为`Calendar.DAY_OF_MONTH`在月底滚动不会滚动`Calendar.MONTH`

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:19:31.047

您应该使用`moving.add(Calendar.DAY_OF_MONTH, 1);`，因为 roll 会添加天数，但不会在您到达一个月的最后一天时再添加一个月，然后再添加新的一天。换句话说，如果您的月份是“六月”，您将获得 6 月 1 日、2 日、3 日...... 30 日，那么您会期望 7 月 1 日，但您将在 6 月 1 日重新开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:21:22.800

```
moving.add(Calendar.DATE, 1); 
```

会做你想做的。

见[`Calendar#add(int, int)`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#add%28int,%20int%29)：

> 根据日历的规则，在给定的日历字段中添加或减去指定的时间量。

并且[`Calendar.DATE`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DATE)：

> get 和 set 的字段编号，指示月份中的哪一天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:29:52.683

它是一个简单的使用`add()`日历的方法。如果要添加年份，请使用 like`calendar.add(Calendar.YEAR, 1);`或减少 year `calendar.add(Calendar.YEAR, -1);`。设置正确的日期时间后，您可以使用`SimpleDateFormat`.**

# iphone - 在 iPhone 应用程序中使用 tabBar 时出现黑屏

> ID：12951091
> 
> 赞同：3
> 
> 时间：2012-10-18T09:12:38.950
> 
> 标签：iphone, uitabbarcontroller

我在我的 iPhone 应用程序中添加了 UITabBarController。我在我的 TabsAppDelegate.h 中提到了它，就像这样

```
#import <UIKit/UIKit.h>

@interface TabsAppDelegate : NSObject <UIApplicationDelegate,   UITabBarControllerDelegate> {
    UIWindow *window;
    UITabBarController *tabBarController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;

@end 
```

和我的 TabsAppDelegate.m didFinishLaunchingWithOptions 方法

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions {    

    // Add the tab bar controller's view to the window and display.
    [window addSubview:tabBarController.view];
    [window makeKeyAndVisible];

    return YES;
} 
```

现在在 MainWindow.xib 中我添加了 Tab Bar 控制器并与 tabBarController 建立连接。后来我创建了两个 ViewController 的 FirstViewController 和 SeconViewController。现在在第一个选项卡上我添加了我的 FirstViewController.xib，在第二个选项卡上我使用构建器界面添加了 SecondViewController.xib 文件。

但是当我运行该项目时，它显示黑屏。需要你的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:21:23.340

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {

        UIViewController *viewController1 = [[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
                UINavigationController *navviewController1=[[UINavigationController alloc]initWithRootViewController:viewController1];
                navviewController1.title = @"FirstTitle";
        //        navviewController1.navigationBarHidden=YES;

        UIViewController *viewController2 = [[[yourviewController2 alloc] initWithNibName:@"yourviewController2" bundle:nil] autorelease];
                UINavigationController *navviewController2=[[UINavigationController alloc]initWithRootViewController:viewController2];
        //        navviewController2.navigationBarHidden=YES;
                navviewController2.title = @"SecondTitle";

        UIViewController *viewController3 = [[[yourviewController3 alloc] initWithNibName:@"yourviewController2" bundle:nil] autorelease];
                UINavigationController *navviewController3=[[UINavigationController alloc]initWithRootViewController:viewController3];
        //        navviewController3.navigationBarHidden=YES;
                navviewController3.title = @"ThirdTitle";

               //..... and so on depend on your requirement 

        self.tabBarController = [[[UITabBarController alloc] init] autorelease];
        self.tabBarController.viewControllers = [NSArray arrayWithObjects:navviewController1, navviewController2 , navviewController3 ,nil];
        self.window.rootViewController = self.tabBarController;
        [self.window makeKeyAndVisible];
    } 
```

试试这个你只是忘了添加 rootViewController

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:19:22.133

I have created a project with "SignleView" Template for you question I converted it programmatically to tabBarViewCongtroller. Please note that. only for example I created viewCongtroller.xib instance four time to view on four tab you can add separate viewControllers.

Here is my code and it tested on iPhone Simulater 5.1.

```
@implementation AppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;
@synthesize tb;
- (void)dealloc
{
    [_window release];
    [_viewController release];
    [tb release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSMutableArray *arr=[[NSMutableArray alloc]init];
    ViewController *vc1=[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    vc1.title=@"View1";
    vc1.tabBarItem=[[[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemDownloads tag:1]autorelease];
    UINavigationController *nv1=[[UINavigationController alloc]initWithRootViewController:vc1];
    [arr addObject:nv1];
    [vc1 release];
    [nv1 release];

    ViewController *vc2=[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    vc2.title=@"View2";
    UINavigationController *nv2=[[UINavigationController alloc]initWithRootViewController:vc2];
    vc2.tabBarItem=[[[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:2]autorelease];
    [arr addObject:nv2];
    [vc2 release];
    [nv2 release];

    ViewController *vc3=[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    vc3.title=@"View3";
    UINavigationController *nv3=[[UINavigationController alloc]initWithRootViewController:vc3];
    vc3.tabBarItem=[[[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFeatured tag:3]autorelease];
    [arr addObject:nv3];
    [vc3 release];
    [nv3 release];

    ViewController *vc4=[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    vc4.title=@"View4";
    vc4.tabBarItem=[[[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemHistory tag:4]autorelease];
    UINavigationController *nv4=[[UINavigationController alloc]initWithRootViewController:vc4];
    [arr addObject:nv4];
    [vc4 release];
    [nv4 release];

    self.tb=[[[UITabBarController alloc]init]autorelease];
    tb.delegate=self;
    tb.viewControllers=arr;
    [arr release];
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
//    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.tb;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

# objective-c - Objective-C：为什么自定义对象会成为僵尸

> ID：12951093
> 
> 赞同：3
> 
> 时间：2012-10-18T09:12:46.023
> 
> 标签：objective-c, uiviewcontroller, automatic-ref-counting, parameter-passing, nszombie

我正在使用 ARC 在 Objective-C 中开发一个应用程序。

我的简化代码如下所示：

***A 类 (.m)***

```
MyCustomClass *obj = [[MyCustomClass alloc] initWithValue1:@"abc" value2:1000];
MyViewController *vc = [[MyViewController alloc] initWithObject:obj];
// "vc" will become the first item of a UITabBarController 
```

***我的视图控制器 (.h)***

```
- (id)initWithObject:(MyCustomClass *)obj {
    ...
    localReferenceToOjbect = obj;
    ...
}

- (void)viewWillAppear:(BOOL)animated {
    // do something with "localRefernceToObject" <---
} 
```

启动应用程序将导致对僵尸的调用：当显示 ViewController 时，“obj”将已被释放，因此我不能再使用它了。

**我的解决方法是：**

***A 类 (.h)***

```
@interface ClassA : UIViewController {
    MyCustomClass *obj;
} 
```

***A 类 (.m)***

```
obj = [[MyCustomClass alloc] initWithValue1:@"abc" value2:1000];
MyViewController *vc = [[MyViewController alloc] initWithObject:obj];
// "vc" will become the first item of a UITabBarController 
```

这是正确的方法吗？！我不这么认为：为什么我要存储一个对*ClassA*无用的对象的 istance ？
我无法解释实际发生的事情。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:19:08.503

你是对的，在 ClassA 中保留对 obj 的引用是不合逻辑的。

但是，如果您需要保留对 obj 的引用以供 MyViewController 使用它，请将其保留在 MyViewController 中，而不是 ClassA 中，因为将使用它的是 MyViewController。

最简单的方法是将`localReferenceToObject`您使用的 in`MyViewController`转换为`@property(retain) propertyToObject;`（或者`@property(strong) propertyToObject`如果您使用 ARC）并在您的`MyViewController.m`with中访问它`self.propertyToObject`（而不是`localReferenceToObject`，以确保调用属性的设置器，从而真正保留对象）。

这样，当您的`MyViewController`实例仍然存在时，该对象将被保留并保留。

* * *

*[编辑]*如果您希望此属性是私有的，您可以在类扩展中声明它，以便其他类无法访问它，如下例所示。有关更多详细信息，请参阅[Apple 文档中的此处。](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW2)

### 在您的 MyViewController.h 头文件中

```
@interface MyViewController : UIViewController
// Here you write the public API in the .h / public header
// If you don't want your property to be visible, don't declare it there
@end 
```

### 在您的 MyViewController.m 文件中

```
@interface MyViewController ()
// This is the private API, only visible inside the MyViewController.m file and not from other classes
// Note the "()" to declare the class extension, as explained in Apple doc
@property(nonatomic, retain) MyCustomClass* referenceToObject; // Note: use strong (which is a synonym of retain) if you use ARC
@end

@implementation MyViewController
@synthesize referenceToObject = _referenceToObject; // not even needed with modern ObjC and latest LLVM compiler

- (id)initWithObject:(MyCustomClass *)obj
{
    self = [super init];
    if (self) {
        ...
        self.referenceToOjbect = obj;
        ...
    }
    return self;
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    // do something with "self.refernceToObject"
}

// This memory management code is only needed if you don't use ARC
-(void)dealloc
{
    self.referenceToObject = nil; // release memory
    [super dealloc];
} 
```

就个人而言，正如 Apple 在一些 WWDC 会议中所建议的那样，我现在真的很少使用实例变量，而是更喜欢使用属性，无论是 .h 中的公共还是 .m 中的私有。

* * *

*如果您使用 ARC，您仍然可以使用实例变量而不是属性，因为 ARC 会为您保留它，但只要您确保您的实例变量声明为`strong`而不是`weak`.*

# sharepoint - 如何在 Microsoft Infopath 中将用户名作为参数发送？

> ID：12951094
> 
> 赞同：0
> 
> 时间：2012-10-18T09:13:09.780
> 
> 标签：sharepoint, sharepoint-2010, ms-office, infopath, infopath2010

您好我正在设计一个使用 Web 服务并加载一些组合框的信息路径表单，该服务需要用户的用户名作为参数。

我需要表单在 formload 方法中加载数据

如何将用户名设置为 infopath 中的默认参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T17:56:02.673

InfoPath 有一个内置函数，[`userName()`](http://blogs.msdn.com/b/infopath/archive/2006/05/26/608092.aspx)您可以使用它来获取当前登录的用户。您可以在表单加载等规则中使用此功能。

# javascript - jQuery图像淡入淡出放大顶部和底部px

> ID：12951104
> 
> 赞同：0
> 
> 时间：2012-10-18T09:13:43.740
> 
> 标签：javascript, jquery

我想让效果像，单击框后，框在展开顶部和底部后消失，我做了一些工作，但只在底部展开。而且效果不太好，我想把盒子做大点。[http://jsfiddle.net/wY8Wb/](http://jsfiddle.net/wY8Wb/) 如果有人可以帮助我吗？谢谢

![](../Images/132cb572f19b4d480e7ada67f7ff7aa8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:19:45.243

检查这个**演示**：http: [//jsfiddle.net/wY8Wb/3/](http://jsfiddle.net/wY8Wb/3/)

**代码：**

```
$('#videoimg').click(function(){
    $(this).fadeOut('slow');
    $('#color')
        .css({
            top: ($(this).offset().top + $(this).height()/2) + 'px',
            height: 0
        })
        .animate({
            // the hard-coded "9" you see below is half of the 
            // difference between the final heights of the 2 divs == (300-282)/2\. 
            // Given here so as to have the color div expand out 
            // equally at top and bottom
            top: ($(this).offset().top - 9) + 'px',
            height: '300px'
        }, 'slow');
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:25:45.283

JSFiddle：http: [//jsfiddle.net/wY8Wb/17/](http://jsfiddle.net/wY8Wb/17/)

```
$(document).ready(function(){
    $('#videoimg').click(function(){
    $(this).fadeOut('slow');
        $('#color').animate({height: '300px', top: '0px'}, 'slow');

})
});​ 
```

也改变了css

# asp.net-mvc - Telerik MVC Grid 列定义中的“EditorViewData”是什么？

> ID：12951110
> 
> 赞同：13
> 
> 时间：2012-10-18T09:14:02.070
> 
> 标签：asp.net-mvc, telerik, kendo-ui

我有一个telerik网格如下：

```
Html.Telerik().Grid<MatchViewModel>().Name("Matches").Columns(cols =>
             {
                 cols.Bound(e => e.Name);
                 cols.Bound(e => e.Date);
                 cols.Bound(e => e.GuestTeamId);
                 cols.Bound(e => e.HostTeamId);
                 cols.Bound(e => e.PostponedDate);
             ==> cols.Bound(e => e.RefereeId).EditorViewData(new { RefereeName = '' });
                 cols.Bound(e => e.StatusId);
             }) 
```

在箭头所指的列中，我想将裁判名称作为 EditorTemplate 的附加数据发送。我从`EditorViewData`方法名称推断它可以帮助我这样做。但我无法让它工作。有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-05T00:26:30.590

如果您的页面有一个定义明确的模型，那么您永远不需要使用 ViewBag 或 ViewData，它们是草率的。EditorViewData 允许您即时创建 ViewData 以将额外数据传递给您的 EditorTemplate。

例如，假设您希望在 EditorTemplate 中为网格中的每个项目设置不同的 DropDownList 值，您将需要传递额外的数据来执行此操作。使用 EditorViewData，你可以从你的模型中添加额外的值来达到这个目的，而无需在你的控制器中编写任何 ViewBag 或 ViewData 对象。

我使用它的第一个地方是人员网格，它允许编辑添加到嵌套 TabStrip 内的资格网格中的已定义资格。诀窍是我不希望每个人的 DropDownList 包含他们已经获得的任何资格。像这样...

## 人员网格

```
@using Kendo.Mvc.UI
@model PeopleViewModel
@(Html.Kendo().Grid<PersonModel>()
    .Name("PersonGrid")
    .Columns(columns => {
        columns.Bound(b => b.LastName).EditorTemplateName("_TextBox50");
        columns.Bound(b => b.FirstName).EditorTemplateName("_TextBox50");
...
        columns.Command(cmd => { cmd.Edit(); cmd.Destroy(); }).Width(180);
    })
    .ClientDetailTemplateId("personTemplate")
    .ToolBar(toolbar => toolbar.Create())
    .Selectable()
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model =>
            {
                model.Id(a => a.Id);
            })
        .Create(create => create.Action("CreatePerson", "People"))
        .Read(read => read.Action("ReadPeople", "People"))
        .Update(update => update.Action("UpdatePerson", "People"))
        .Destroy(destroy => destroy.Action("DestroyPerson", "People"))
    )
    .Events(events => events.DataBound("dataBound"))
)
<script type="text/javascript">
    function dataBound() {
        this.expandRow(this.tbody.find("tr.k-master-row").first());
    }
</script>
<script id="personTemplate" type="text/kendo-tmpl">
    @(Html.Kendo().TabStrip()
        .Name("TabStrip_#=Id#")
        .Items(items =>
                    {
...
                        items.Add().Text("Edit Qualifications")
                        .LoadContentFrom("PersonQualifications", "People", new {personId = "#=Id#"});
...
                    })
        .ToClientTemplate()
    )
</script> 
```

## 人员视图模型

忽略继承的东西，它超出了这个讨论。但请注意，我在与此顶级视图相关的所有子视图上使用相同的模型。

```
public class PeopleViewModel : PageViewModel
{
    public int PersonId { get; set; }
    public PersonModel Person { get; set; }
    public IList<QualificationModel> AllQualifications { get; set; }
...

    public PeopleViewModel(BaseViewModel baseViewModel) : base(baseViewModel)
    {}
} 
```

## 人员资格控制员

数据提供者在其他地方注入，但请注意模型展平的 POCO - 只是将 List 应用于模型构造函数的静态方法。

```
public ActionResult PersonQualifications(int personId)
{
    SetBaseContext(HttpContext);
    var model = new PeopleViewModel(BaseViewModel)
                     {
                        PersonId = personId,
                        AllQualifications = QualificationModel.FlattenToThis(_qualificationDataProvider.Read())
                     };
    return View(model);
} 
```

## 嵌套网格（在 TabStrip 内加载的视图）

```
@using Kendo.Mvc.UI
@model PeopleViewModel
@{
    Layout = null;
}
@(Html.Kendo().Grid<PersonQualificationModel>()
    .Name("QualificationEditGrid_" + Model.PersonId)
    .Columns(columns =>
    {
        columns.ForeignKey(f => f.QualificationId, Model.AllQualifications, "Id", "Display")
===>        .EditorViewData(new {personId = Model.PersonId})
            .EditorTemplateName("PersonQualificationDropDownList");
        columns.Command(cmd =>
                            {
                                cmd.Edit();
                                cmd.Destroy();
                                }).Width(180);
    })
    .ToolBar(toolbar => toolbar.Create())
    .DataSource(dataSource => dataSource
        .Ajax()
        .Events(events => events.Error("error_handler"))
        .Model(model => {
            model.Id(a => a.Id);
        })
        .Create(create => create.Action("CreatePersonQualification", "People"))
        .Read(read => read.Action("ReadPersonQualifications", "People", new {personId = Model.PersonId}))   
        .Destroy(destroy => destroy.Action("DestroyPersonQualification", "People"))
    )
) 
```

## 编辑器模板（终于！）

忽略有助于共享此 EditorTemplate 的第一个 ViewData 引用。我们感兴趣的是更远一点。

```
@using Kendo.Mvc.UI
@(Html.Kendo().DropDownList()
    .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
    .DataValueField("Id")
    .DataTextField("Name")
    .OptionLabel("Select...")
    .DataSource(dataSource => dataSource
===>    .Read(read => read.Action("ReadDdlQualifications", "People", new {personId = ViewData["personId"]}))
    )
) 
```

## 控制器方法（只是为了彻底）

```
public JsonResult ReadDdlQualifications(int personId)
{
    var qualification = _qualificationDataProvider.ReadAvailableToPerson(personId);
    IList<IdNamePair> results = IdNamePair.FlattenToThis(qualification);
    return Json(results, JsonRequestBehavior.AllowGet);
} 
```

显然，在这个例子中还有很多其他的东西（我希望我留下了足够的代码让它变得有意义），但它应该跨越需要它的点——而且它确实是需要的。

享受。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-24T16:18:25.283

我遇到了与 Chad 相同的问题，正如 Trey 所提到的，这不能通过将信息传递给**EditorViewData**来完成。没有办法传递行数据项，只能传递页面数据。

作为替代方案，您可以将此脚本添加到编辑器模板中。然后，您可以从网格行访问字段值并将其传递给数据源调用，**根据每行数据过滤下拉列表。**

```
<script type="text/javascript">

    function getParentId() {
        var row = $(event.srcElement).closest("tr");
        var grid = $(event.srcElement).closest("[data-role=grid]").data("kendoGrid");
        var dataItem = grid.dataItem(row);
        return { EmployeeId: dataItem.EmployeeId };
    }

</script> 
```

然后将数据项添加到数据源上的读取方法中。

```
@(Html.Kendo().DropDownList()
        .Name("Product")
        .DataValueField("ProductId")
        .DataTextField("ProductName")
        .DataSource(ds => ds
            .Read(read => read.Action("ProductsRead", "Home")
                .Data("getParentId")
                ))
) 
```

# java - 在 Java 中运行基于 cpu 的任务的简单程序的最佳线程池大小是多少

> ID：12951112
> 
> 赞同：13
> 
> 时间：2012-10-18T09:14:17.890
> 
> 标签：java, concurrency, threadpool, executor

我使用线程池来执行任务，这些任务主要基于 cpu，带有一点 I/O，大小比 cpu 的数量大一。

```
Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors() + 1) 
```

假设一个简单的程序将其所有任务提交给这个执行程序并且几乎不做其他事情，我认为拥有一个更大的线程池会减慢速度，因为操作系统必须更频繁地对它的 CPU 进行时间切片，从而有机会让线程池中的每个线程都有机会跑。

这是正确的，如果是这样，这是一个真正的问题还是主要是理论上的问题，即如果我将线程池大小增加到 1000，我会注意到一个巨大的差异。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T09:22:19.860

如果您有 CPU 密集型任务，随着线程数量的增加，您会增加开销并降低性能。注意：拥有比等待任务更多的线程只是浪费资源，但可能不会减慢任务的速度。

我会使用 CPU 数量的倍数（例如 1 或 2），而不是只添加一个，因为有一个太多线程会产生惊人的开销。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T09:34:25.020

作为参考，请查看此说明。

[http://codeidol.com/java/java-concurrency/Applying-Thread-Pools/Sizing-Thread-Pools/](http://web.archive.org/web/20150415140634/http://codeidol.com/java/java-concurrency/Applying-Thread-Pools/Sizing-Thread-Pools/)

简而言之，平均而言，您拥有的（No. CPU + 1）是最佳的。

# icalendar - 我可以在我的 iPhone 应用程序中向 Kal 或 Tapku 提供 ical 日历吗？

> ID：12951115
> 
> 赞同：-2
> 
> 时间：2012-10-18T09:14:25.800
> 
> 标签：icalendar, tapku

实际上，我正在使用 Xcode 4.5.1 并希望合并 Kal 或 Tapku 以在我的应用程序中提供日历。但是，我不想编辑或添加任何事件，我只想让日历显示来自 xml/ical 公共日历的事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:53:54.447

看看 eventkit 和 google api objective-c 客户端

[http://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Examples/CalendarSample/CalendarSampleWindowController.m](http://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Examples/CalendarSample/CalendarSampleWindowController.m)

# connection - 如何为每个会话连接到不同的数据库

> ID：12951116
> 
> 赞同：1
> 
> 时间：2012-10-18T09:14:27.470
> 
> 标签：connection, entitymanager

我有一个 Web 应用程序（Netbeans 7.2、Glassfish 3.1、PostgreSQL 9.1），我的每个客户都有自己的数据库（所有数据库的结构都相同）。

我需要在登录时应用程序将数据库连接（和 entityManager）更改为客户的相关连接。

初始（默认）连接参数在“glassfish-resources.xml”中定义，关联 Customer-DatabaseName 在文本文件中定义（所有数据库位于同一服务器中）。

如何为每个客户管理不同的连接？如何关闭默认 entityManager 并使用新的数据库连接创建新的？

非常感谢。

# c# - C# Web 表单列表框 OnSelectedIndexChanged

> ID：12951118
> 
> 赞同：1
> 
> 时间：2012-10-18T09:14:40.453
> 
> 标签：c#, webforms

我的网站上有一个列表框，其中包含一些元素。

我做了一个事件，OnSelectedIndexChanged，所以当用户按下一个元素时，这个值将被放入一个文本框

```
protected void Page_Load(object sender, EventArgs e)
{

    listbox = new Listbox();

    // Add to page etc.

    listbox.SelectedIndexChanged += new EventHandler(listbox_SelectedIndexChanged);

}

void listbox_SelectedIndexChanged(object sender, EventArgs e)
{
    try
    {
        textbox_name.Text = listbox.SelectedItem.ToString();
    }
    catch
    {
        textbox_info.Text = "Choose employee";
    }
} 
```

它适用于 c# windows 窗体，但由于某种原因不适用于 Web 窗体。

有可能让它工作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:32:12.490

将列表框的 autopostback 属性设置为 true

# emacs - YADR 看 Emacs

> ID：12951119
> 
> 赞同：0
> 
> 时间：2012-10-18T09:14:49.230
> 
> 标签：emacs, macvim

我刚刚发现[yadr](http://skwp.github.com/dotfiles)具有令人惊叹的外观和感觉，这使得 macvim 看起来真的很像 Emacs：

![YADR 截图](../Images/753923cd4c500e4cbce2978aa3a1bbcd.png)

我想知道是否有人知道使emacs缓冲条具有相似外观的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T22:52:54.697

最初将此作为评论发布，因为我不确定您在屏幕截图中到底在说什么，但由于它回答了您的问题，所以我将其发布为答案。

您看到的效果是 vim 的[Powerline](https://github.com/Lokaltog/vim-powerline)插件。这个想法已经被移植到 Emacs 并且可以在[EmacsWiki](http://www.emacswiki.org/emacs/PowerLine)上找到。GitHub 上也有一些这样的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:44:47.883

Powerline 的 Emacs 端口有很多，但最值得注意的是[这个](https://github.com/milkypostman/powerline)，[它](https://github.com/jonathanchu/emacs-powerline)是 Emacs 的原始端口。一个谨慎的世界 - 像电力线这样的酷玩具往往在某些模式下表现不佳，而且大多是漂亮而不是实用。

# ruby-on-rails - 使用 rails 启动 WEBrick 服务器时出错

> ID：12951121
> 
> 赞同：0
> 
> 时间：2012-10-18T09:14:49.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, webrick

我有一个已准备好数据库的现有应用程序我已在 database.yml 中进行了所有更改，并在尝试使用 rails s 启动 WEBrick 服务器时进行了捆绑安装我收到以下错误

```
/usr/lib/ruby/1.9.1/fileutils.rb:247:in `mkdir': File exists - /home/username/appname/app/releases/20120831125545/tmp (Errno::EEXIST)
from /usr/lib/ruby/1.9.1/fileutils.rb:247:in `fu_mkdir'
from /usr/lib/ruby/1.9.1/fileutils.rb:221:in `block (2 levels) in mkdir_p'
from /usr/lib/ruby/1.9.1/fileutils.rb:219:in `reverse_each'
from /usr/lib/ruby/1.9.1/fileutils.rb:219:in `block in mkdir_p'
from /usr/lib/ruby/1.9.1/fileutils.rb:205:in `each'
from /usr/lib/ruby/1.9.1/fileutils.rb:205:in `mkdir_p'
from /home/username/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands/server.rb:62:in `block in start'
from /home/username/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands/server.rb:61:in `each'
from /home/username/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands/server.rb:61:in `start'
from /home/username/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands.rb:30:in `block in <top (required)>'
from /home/username/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands.rb:27:in `tap'
from /home/username/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands.rb:27:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我错过了一些步骤，我是否必须重新运行迁移（我已经准备好数据库，其中包含数据）有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:20:39.343

显然，Rails 用于会话存储的 tmp 目录已经存在。尝试删除发布目录中的 /tmp 文件夹。

# c++ - 是否可以使用 c++ 获取与 WinCE 中指定进程关联的所有 Dll 的内存使用情况？

> ID：12951122
> 
> 赞同：2
> 
> 时间：2012-10-18T09:15:03.917
> 
> 标签：c++, process, windows-mobile, windows-ce, taskmanager

我创建了**TaskManagerUtility**应用程序，它将为我提供当前在 Windows 移动设备中运行的所有进程的信息。

目前我能够收集如下信息：-

```
 1\. Process Name
 2\. Process ID
 3\. Thread ID (associated with the specified process)
 4\. Thread Count (total number of threads associated with the specified process)
 5\. DLL Name (associated with the specified process)
 6\. Process Memory Usage
 7\. Process Peak Memory Usage
 8\. Process CPU Time
 9\. Process CPU utilization 
```

**有什么方法可以找出与指定进程关联的所有单个 Dll 的总内存使用量？**

**是否有可能实现相同的？是否有任何 API 可以做到这一点？**

**如果“否”，那为什么不可能呢？**

请指导我，因为我对此一无所知。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:17:37.017

从内核的角度来看，DLL 不会分配进程所分配的内存，因此无法知道哪个 DLL 分配了哪些内存块。[您可以使用ToolHelp 函数确定](http://msdn.microsoft.com/en-us/library/aa915058.aspx)*进程*在堆中分配了多少内存，特别是和。`Heap32ListFirst``Heap32ListNext`

# java - 创建对话框时出现不兼容类型错误

> ID：12951124
> 
> 赞同：0
> 
> 时间：2012-10-18T09:15:21.663
> 
> 标签：java, swing, compiler-errors, joptionpane

我正在尝试使用 JOptionPane 的静态方法创建一个输入对话框：

```
public static Object showInputDialog(Component parentComponent,
                                     Object message,
                                     String title,
                                     int messageType,
                                     Icon icon,
                                     Object[] selectionValues,
                                     Object initialSelectionValue)
                              throws HeadlessException 
```

我的代码如下：

```
String username = JOptionPane.showInputDialog(null, 
                                              "Username", 
                                              "Pick a name",    
                                              JOptionPane.PLAIN_MESSAGE,
                                              null, 
                                              null, 
                                              "default_name"); 
```

这让我得到了错误：

```
ChatController.java:49: incompatible types
found   : java.lang.Object
required: java.lang.String 
```

一定有一些简单的东西我错过了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:18:33.080

`JOptionPane.showInputDialog()`返回一个对象，[如 doc 中指定的那样](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html#showInputDialog%28java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int,%20javax.swing.Icon,%20java.lang.Object%5B%5D,%20java.lang.Object%29)，但您需要一个字符串。注意选择选项

```
 Object[] selectionValues 
```

是 的数组`Objects`，因此您将获得其中一个对象。没有什么可以说它们被指定为字符串。如果值*是*字符串，那么您可以/应该适当地转换。

另请注意，您正在传递一个空数组。从文档：

> 用户将能够从 selectionValues 中进行选择，其中 null 意味着用户可以输入他们想要的任何内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:17:35.313

```
String username =(String) JOptionPane.showInputDialog(null, 
                                          "Username", 
                                          "Pick a name",    
                                          JOptionPane.PLAIN_MESSAGE,
                                          null, 
                                          null, 
                                          "default_name"); 
```

也许这会解决它

# html - 在 HTML 元素（如段落）上使用 margin-bottom 而不是顶部和底部的 margin 的基本原理是什么？

> ID：12951127
> 
> 赞同：0
> 
> 时间：2012-10-18T09:15:47.013
> 
> 标签：html, css, twitter-bootstrap, margins

Twitter Bootstrap 和其他项目是否有充分的理由覆盖段落等元素的默认浏览器边距？

浏览器默认（顶部和底部 1em 边距）：

```
p { margin: 1em 0; } 
```

Twitter Bootstrap（仅底部 10px 边距）：

```
p { margin: 0 0 10px; } 
```

我的偏好（顶部和底部 10px 边距或垂直节奏长度）：

```
p { margin: 10px 0; } 
```

以下是我的想法：

使用顶部和底部的边距，我可以依靠边距折叠来确保元素之间的边距不会太大。我有信心应该与其他元素隔开的元素。

仅使用底部边距，我必须将段落和类似内容放置在带有填充的容器中，或者冒着让它们与它们上方的元素齐平的风险，或者将 margin-bottom 应用于可能在它们上方的任何东西，以确保设计被间隔开。

总的来说，我更喜欢浏览器的默认设置。有什么我想念的吗？是否有讨论此主题的博客或文章？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:23:15.050

这个小提琴应该说明原因：http: [//jsfiddle.net/men62/1/](http://jsfiddle.net/men62/1/)

这是关于文本相对于其容器和其他元素的一致布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:31:59.197

我自己也不太确定，但我想是因为在写作规则和印刷设计中我们都习惯了这套规则：每个段落的底部都应该有一些空白。

我记得在我前段时间参加的写作课上，每段的下边距表示新段落的开始。如果不能应用下边距，也可以使用缩进作为新段落的标记。[维基百科对此有一些解释](http://en.wikipedia.org/wiki/Paragraph)，基于罗伯特·布林赫斯特的书，*印刷风格的元素*：

> *Elements of Typographic Style*声明“至少一个 en [space]”应该用于在第一个段落之后缩进段落，并指出这是“实际最低限度”。
> 
> ...
> 
> 其他技术是可能的。可以将行缩进以表示新段落的开始。另一种技术是在段落之间插入垂直空间。这会创建有时称为“块段落”的内容。

在 Microsoft Word 等文字处理器软件上，默认情况下还设置每个段落的底部有一定的间距（通常为 10pt）。当它被应用到网络上时，似乎底部边距技术占了上风。

[Marco Dugonjic 的一篇博文](http://www.maratz.com/blog/archives/2007/05/12/quick-tip-bottom-margins-of-paragraphs-and-lists/)似乎暗示“将下边距设置为等于元素的行高可确保正确的垂直节奏。”

# ios - 使用我自己的 UIButton 获取用户 Facebook 信息

> ID：12951135
> 
> 赞同：2
> 
> 时间：2012-10-18T09:16:05.960
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在尝试创建一个 Facebook 连接按钮，当我连接时我需要为此获取 FBGraphUser。我的 Button 上有以下代码：

```
-(IBAction)fbButtonClickHandler:(id)sender {
    mainDelegate = (AppDelegate*)[[UIApplication sharedApplication]delegate];

  if (mainDelegate.fbSession.isOpen) { 
    [mainDelegate.fbSession closeAndClearTokenInformation]; // FB delog
  }
  else {
    if (mainDelegate.fbSession.state != FBSessionStateCreated) {
        mainDelegate.fbSession = [[FBSession alloc] initWithPermissions:[NSArray arrayWithObjects:@"email", @"publish_actions", @"user_birthday",nil]];
    }
     // loggin on facebook
    [mainDelegate.fbSession openWithCompletionHandler:^(FBSession *session,
                                                     FBSessionState status,
                                                     NSError *error) {

        [fbButton setTitle:[self updateFbButtonLabel] forState:UIControlStateNormal];
        // reading the documentation i'm trying this to get the FBGraphUser
        if(session.isOpen) {
            [FBRequestConnection startForMeWithCompletionHandler:^(FBRequestConnection *connection, id<FBGraphUser> user, NSError *error) {

                  if (!error) {
                    NSString *userInfo = @"";

                    // Example: typed access (name)
                    // - no special permissions required
                    userInfo = [userInfo
                                stringByAppendingString:
                                [NSString stringWithFormat:@"Name: %@\n\n",
                                 user.name]];

                    // Example: typed access, (birthday)
                    // - requires user_birthday permission
                    userInfo = [userInfo
                                stringByAppendingString:
                                [NSString stringWithFormat:@"Birthday: %@\n\n",
                                 user.birthday]];
                    // Display the user info
                    NSLog(@"%@", userInfo);
                  }
                  NSLog(@" error: %@" , error);
                }];
        }
       }
    }];
}
} 
```

问题是当我打电话时它失败了`startForMeWithCompletionHandler`：

```
    错误：HTTP 状态码：400
    FBSDKLog：响应：
    操作无法完成。（com.facebook.sdk 错误 5。）
    （空值）
    错误：错误域=com.facebook.sdk 代码=5“操作无法完成。                   
    （com.facebook.sdk 错误 5。）“UserInfo=0x925f760 {com.facebook.sdk:ParsedJSONResponseKey=
    {type = 可变字典，count = 2，
     条目 =>
      1：{内容=“代码”}=  
      {值 = +400，类型 = kCFNumberSInt32Type}
      2 : {contents = "body"} = {type = mutable dict, count = 1,
       条目 =>
       11 : {contents = "error"} = {type = mutable dict, count = 3,
       条目 =>
    2 : {contents = "type"} = {contents = "OAuthException"}
        3 : {contents = "message"} = {contents = "必须使用活动访问令牌来查询有关信息         
       当前用户。"}
    6 : {内容 = "代码"} = 2500

```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:14:17.983

显然， FBRequestConnection 在 FBSession 中使用了一个名为 active session 的变量来使其在之后工作

```
 [mainDelegate.fbSession openWithCompletionHandler:^(FBSession *session,
                                                     FBSessionState status,
                                                     NSError *error) { 
```

放 ：

```
FBSession.activeSession = session; 
```

# java - 取消先前的请求

> ID：12951137
> 
> 赞同：4
> 
> 时间：2012-10-18T09:16:17.500
> 
> 标签：java, multithreading, tomcat, tomcat6, threadpool

对于每个请求，都会发生大量计算。平均而言，回复需要大约 10 分钟的时间来处理。与此同时，如果用户发送新请求；先前的请求绝对没有继续的意义。

所以我写了一个代码，我基本上中断了前面执行它的线程。在tomcat环境中这是一个好习惯吗？是否有更好的解决方案来处理它。中断tomcat线程可以吗。或者我应该管理自己的线程池并让池为我进行计算？

* * *

更多信息：基本上整个任务都包含在 FutureTask 中。对于每个请求，都会执行此任务，并且对任务的引用由 ConcurrentHashMap 存储。对于每个请求，映射中的所有未来都被“取消”，然后继续执行最新的请求。从而取消先前的请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:41:31.203

**Q>**我基本上中断了之前执行它的线程。在tomcat环境中这是一个好习惯吗？
**A>**我认为只要您愿意让 HTTP 线程阻塞 10 分钟就可以了。这意味着没有其他用户能够处理 HTTP 请求。否则创建自己的线程池并管理它。

**Q>**在tomcat环境下是不是一个好习惯？
**A>**中断`Runnable`s 或`Callable`s 可能很棘手。例如，如果您的线程处于 I/O 操作的中间，中断可能会使数据处于损坏状态。除此之外，这是很正常的做法。我还建议使用您自己的线程池，以使您的服务器容量可预测。

你能把你的大任务分解成许多小任务吗？坚持有条件并提前退出可能是中断的一个很好的选择。

或者，等待/确保第一个任务完成操作而其他任务只返回相同的值在您的环境中是否有意义？如果是这样，我宁愿这样，而不是你的方法。来自番石榴库的`LoadingCache`正是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:27:38.467

我不确定我是否完全理解你的问题......

但是，如果您正在谈论在 tomcat 应用程序中运行线程池并取消其未来的任务，我认为这没有问题。

我不会中断由 tomcat 分配的线程，除非我会编写代码来亲自处理中断（例如在 servlet 类中）

# c++ - 读取和写入 size_t 到二进制文件

> ID：12951145
> 
> 赞同：2
> 
> 时间：2012-10-18T09:16:36.847
> 
> 标签：c++

免责声明：这只是初学者的另一项任务，所以我很高兴在不同的编译器和不同的架构上我可能会得到不同的（不兼容的）二进制文件。所以没关系，它只适用于这台特定的机器。

我正在写入和读取`size_t`二进制文件。写作看起来像：

```
std::string result;
result.append((char *)&block_size_, sizeof(block_size_)); 
```

不久之后将`result`其写入文件。

但是当我以同样的方式阅读它时：

```
map_binary.copy((char *)&block_size_, sizeof(block_size_), offset); 
```

我收到警告

```
warning C4996: 'std::basic_string<_Elem,_Traits,_Alloc>::copy': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Alloc=std::allocator<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(1777) : see declaration of 'std::basic_string<_Elem,_Traits,_Alloc>::copy'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Alloc=std::allocator<char>
1>          ] 
```

我不明白为什么这段代码不安全并寻找解决方案，而不是假装根本没有问题（使用`-D_SCL_SECURE_NO_WARNINGS`）。

那么，我错过了什么？

PS：现在我只使用标准库学习 C++，所以使用`boost`或其他东西的解决方案是不可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:21:35.660

你没有错过任何东西。如果您将任何内容复制到指针，VC++ 会非常热衷于警告您。在这种情况下，无法保证您将获得正确的目的地大小。毕竟，您可能会编写类似这样的内容`map_binary.copy((char *)&block_size_, 4, offset);`，然后发现您的代码在 64 位编译器中失败。

如果您对避免此类错误的能力感到满意，请禁用或忽略该警告。

# galleria - Galleria - pauseOnInteraction

> ID：12951146
> 
> 赞同：1
> 
> 时间：2012-10-18T09:16:44.367
> 
> 标签：galleria

我正在使用 Galleria 1.2.8，到目前为止一切都很好。[`pauseOnInteraction`](http://galleria.io/docs/options/pauseOnInteraction/)使动画在下一张图片上停止。

是否有机会通过单击当前图片来停止当前图片上的动画？

# python - Python 2.6 - 解析参数

> ID：12951150
> 
> 赞同：2
> 
> 时间：2012-10-18T09:16:50.263
> 
> 标签：python, arguments, python-2.6, argparse

问题：需要解析一些可以按任何顺序排列的特定参数，非可选参数：-h -d -src -dst

我是 Python 的新手，并且已经查看了诸如 getopt 和 argparse 之类的替代方案，但无法获得工作示例，因此按如下方式进行了自定义；

```
argv=sys.argv[1:]
args=[]
for idx, arg in enumerate(argv):
    # if is arg
    if arg.startswith("-"):
        # find arg match
        for i in ("-h","-d:","-src:","-dst:"):
            # requires var
            if i == arg + ':' and idx < len(argv)-1:
                if not argv[idx+1].startswith("-"):
                    args.append((arg,argv[idx+1]))
                    break
            # no var
            elif i == arg:
                args.append((arg,""))
                break
    else:
        continue
# may contain duplicates
print(args)
# no dupes
print(set(args)) 
```

任何人都可以提出改进和/或更好的例子来实现问题目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:18:06.647

在 python 2.6 中有一个名为[optparse的模块](http://docs.python.org/library/optparse.html)

哪个做你想要的。

文档中的示例：

```
from optparse import OptionParser
[...]
parser = OptionParser()
parser.add_option("-f", "--file", dest="filename",
                  help="write report to FILE", metavar="FILE")
parser.add_option("-q", "--quiet",
                  action="store_false", dest="verbose", default=True,
                  help="don't print status messages to stdout")

(options, args) = parser.parse_args() 
```

另一个例子：

```
usage = "usage: %prog [options] arg1 arg2"
parser = OptionParser(usage=usage)
parser.add_option("-v", "--verbose",
                  action="store_true", dest="verbose", default=True,
                  help="make lots of noise [default]")
parser.add_option("-q", "--quiet",
                  action="store_false", dest="verbose",
                  help="be vewwy quiet (I'm hunting wabbits)")
parser.add_option("-f", "--filename",
                  metavar="FILE", help="write output to FILE")
parser.add_option("-m", "--mode",
                  default="intermediate",
                  help="interaction mode: novice, intermediate, "
                       "or expert [default: %default]") 
```

# jsf - JSF 视图参数和 h:form 动作

> ID：12951158
> 
> 赞同：0
> 
> 时间：2012-10-18T09:17:30.460
> 
> 标签：jsf

这个问题是“扩展”以下帖子

[发布后在 JSF 中处理视图参数](https://stackoverflow.com/questions/10352641/handling-view-parameters-in-jsf-after-post)

假设我正在创建一个在对话框中打开的自定义 URL。URL 示例“test.html?id=123”

我想将“id=123”部分插入到 h:form 操作中，以便它返回到带有额外参数“id=123”部分的相同视图。

我遵循了上面的帖子并研究了第三个解决方案，即扩展 ViewHandlerWrapper 的自定义 ViewHandler。

我正在修改操作，并且表单被重定向到相同的来源（直到现在它可以工作）。

第一个问题假设我有以下 xhtml 页面。

```
<f:metadata>
    <f:event type="preRenderView" listener="#{bean.init}" />
    <f:viewParam name="id" value="#{bean.id}"/>
</f:metadata>

<h:form>
    ...
    ...
</h:form> 
```

1.  当我发布上述内容时，我在后端获得了正确的 id 值。
2.  如果我重新提交帖子，我会得到空值，但 url 保持不变（test.html?id=xxx）
3.  无法弄清楚为什么我在第二次提交时得到空值

第二个问题是，当我验证表单并且一切正常时，我的提交方法返回一个新的 url “test.html?force-redirect=true...”，但这不会发生，而是 URL 与在 h:form 操作中输入的那个，（如果我使用新 URL 进行自定义重定向，那么它可以工作，我被重定向到“test.html?faces-redirect=true ...”）。

我的问题，我想是一个理论上的问题，这是假定的行为吗？

谢谢，迪曼

# ios - ipad闪屏不旋转

> ID：12951159
> 
> 赞同：1
> 
> 时间：2012-10-18T09:17:32.400
> 
> 标签：ios, splash-screen

我希望能够将我的 ipad 上的启动画面旋转到左右横向。我在我的 .plist 文件中启用了横向左右方向。我为 LandscapeRight 和 LandscapeLeft 添加了 4 个文件：

```
Default-LandscapeRight@2x~ipad.png
Default-LandscapeLeft@2x~ipad.png
Default-LandscapeRight~ipad.png 
Default-LandscapeLeft~ipad.png 
```

虽然这无关紧要，但在我的 rootviewcontroller 中，我有：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft); 
    return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) );
} 
```

启动画面会加载，但不会旋转。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:39:34.300

据我所知，设备在 Splash Image 期间无法识别方向。这些 SPlash 图像 Def​​ault-LandscapeRight@2x~ipad.png Default-LandscapeLeft@2x~ipad.png Default-LandscapeRight~ipad.png 识别应用程序何时启动设备然后设备获取适当的启动图像。默认-LandscapeLeft~ipad.png。

如果你有兴趣，你可以做替代解决方案。这只是我的概念而已

1 为此目的创建 UIIMageView 并将其作为 SUBview 添加到 Window。

2 将 iamge 设置为该 UIIMageView。

3 将睡眠方式设置为 3-4 秒。像睡眠（4）。

4 调用 RootViewController 管理图像的方向。

像下面的方法，这是假设您在 AppDelegate 类中定义的方法将管理图像方向。

```
 -(void)checkOrientationforSplash:(UIInterfaceOrientation)interfaceOrentaion
    {
if (splashImageView.hidden==FALSE) {
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
    if (interfaceOrentaion==UIInterfaceOrientationPortrait|| interfaceOrentaion==UIInterfaceOrientationPortraitUpsideDown) {
        UIImage *image=[UIImage imageNamed:@"Default-Portrait.png"];
        splashImageView.frame=CGRectMake(0.0, 0.0, image.size.width, image.size.height);
        [splashImageView setImage:image];

    }
    else {
        UIImage *image=[UIImage imageNamed:@"Default-Landscape.png"];
        splashImageView.frame=CGRectMake(0.0, 20.0, image.size.width, image.size.height);
        [splashImageView setImage:image];
    }
       } 
```

}

5 您可以在应用程序安装过程中的 RoortViewController 中管理该图像表单。

6 在特定点删除该启动图像。

```
 -(void)removeSplash
   {
     [splashImageView setHidden:YES];
   } 
```

我希望它会帮助你。

# c++ - 错误：'std::ios_base::ios_base(const std::ios_base&)' 是私有的

> ID：12951162
> 
> 赞同：4
> 
> 时间：2012-10-18T09:17:36.673
> 
> 标签：c++, stream

```
#include <iostream>
#include <fcntl.h>
#include <fstream>

using namespace std;

 class Logger
 {
    private:
            ofstream debug;
            Logger()
            {
                    debug.open("debug.txt");
            }
            static Logger log;
    public:
            static Logger getLogger()
            {
                    return log;
            }

            void  writeToFile(const char *data)
            {
                    debug << data;
            } 

            void close()
            {
                    debug.close();
            }               
};

Logger Logger::log; 
```

通过这个类，我试图创建一个记录到文件中的 Logger 类。但它给出了错误

```
error: ‘std::ios_base::ios_base(const std::ios_base&)’ is private 
```

我用谷歌搜索它，发现它是因为复制流。据我了解，在这段代码中没有复制 ofstreams。

你们能帮帮我吗？提前致谢。

~

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T09:20:05.567

```
static Logger getLogger()
{
   return log;
} 
```

尝试`Logger`按值返回 a，这需要一个复制构造函数。编译器生成的复制构造函数尝试制作成员的副本`debug`。这就是您收到错误的原因。

您可以实现复制构造函数（可能没有意义，因为`debug`成员会不同）或通过引用返回：

```
static Logger& getLogger()
{
   return log;
} 
```

在这种情况下这是安全的，因为`log`具有**静态存储持续时间**。

正确的调用如下所示：

```
Logger& l = Logger::getLogger(); 
```

在这种情况下`l`指`Logger::log`.

# unit-testing - linux上的Corona单元测试

> ID：12951166
> 
> 赞同：0
> 
> 时间：2012-10-18T09:17:53.207
> 
> 标签：unit-testing, coronasdk

我想在每次推送到 git 存储库时为 Corona 创建自动单元测试。这些单元测试应该在 Linux 服务器上运行。但是，没有 Linux 版本的 Corona SDK。是否可以在 Linux 上为 Corona 运行单元测试？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:50:15.733

Corona 仅在移动设备或其模拟器（仅在 Windows 或 Mac 上运行）上运行。

即使你有企业版，它仍然是闭源的，企业唯一比普通版更多的是允许你自己制作一个原生程序并链接corona库。

因此，您只能对可以使用普通命令行 lua 解释器运行的东西进行单元测试，任何需要 Corona 东西的东西都不能按照您想要的方式进行单元测试。

# php - PHP测试array_walk结果

> ID：12951167
> 
> 赞同：0
> 
> 时间：2012-10-18T09:17:53.017
> 
> 标签：php

我确信这是一个简单的解决方案 - 我~~写了~~这个函数，并认为我会尝试使用 array_walk 函数而不是单独测试每个字符串。我假设 array_walk 函数的结果是假的，但它返回 1...如果它没有找到匹配项，我如何让它测试所有字符串并返回假？谢谢

```
class {    
    function endsWith($value,$key,$haystack)
    {
        $length = strlen($value);
        if ($length == 0) {
            return true;
        }

        return (substr($haystack, -$length) === $value);    
    }

    function thing()
    {
        $email = "should@returnfalse.info";
        $arr = array("@test.net","@test.org.uk","@test.co.uk","@test.com");

        echo array_walk($arr,array($this,"endsWith"),$email);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:35:50.463

的返回值[`array_walk`](http://php.net/manual/en/function.array-walk.php)不是由回调函数决定的；它只会通知您遍历整个阵列是否成功完成。

您可能想研究一些替代方案。

这将返回匹配元素的数量，也将用作布尔测试，但无论如何它都会评估每个元素：

```
echo count(array_filter($arr,array($this,"endsWith"))); 
```

`endsWith`一旦检测到匹配，这将停止评估元素，`true`如果有匹配将返回，`false`否则：

```
$self = $this;
// cast to int because false is printed as the empty string
echo (int)array_reduce($arr, 
                       function($result, $v) use ($email, $self) {
                          return $result || $self->endsWith($v, null, $email);
                       }, 
                       false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:28:20.920

`array_walk()`只需遍历数组的元素并返回`true`，如果它能够做到的话。（`echo`将 boolea`true`转换为字符串`'1'`）看看`array_recude()`

```
$that = $this; // Cannot access $this directly before PHP 5.4
var_dump(
  array_reduce (
    $arr, 
    function($result, item) use ($email, $that) { return $result || $that->endsWith($item, null /* not used anyway */, $email);}, 
    false
  )
); 
```

附加`$key`在 中未使用且无用`endsWith()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:28:04.997

尝试这个

```
class {    
    function thing()
    {
        $email = "should@returnfalse.info";
        $arr   = array("@test.net","@test.org.uk","@test.co.uk","@test.com");

        foreach ($arr as $domain) {
            $length = strlen($value);
            if ($length != 0) {
               if (substr($email, -$length) === $domain) { echo $domain; break; }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:38:58.640

自 PHP 5.3 起，您可以使用匿名函数：

```
class {
    function thing()
    {
        $email = "should@returnfalse.info";
        $arr = array("@test.net","@test.org.uk","@test.co.uk","@test.com");
        $match = '';
        $found = false;
        array_walk($arr,function($value) use (&$match, &$found, $email) {
            $length = strlen($value);
            if ($length == 0) {
                $found = true;
                return;
            }

        if (substr($email, -$length) === $value) {
            $match = $value;
            $found = true;
        }
        });
        if ($found) {
            echo 'Found match: ' . $match;
        } else {
            echo 'No match found :(';
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T09:28:31.977

如果要将函数应用于所有值并返回单个结果，则应使用`array_reduce`.

# c - 如何使用gdb进入while循环？

> ID：12951170
> 
> 赞同：0
> 
> 时间：2012-10-18T09:18:13.680
> 
> 标签：c, gdb

我有一个`while`循环如下。

```
while (*d++ = *sc++) 
```

由于我希望了解部门中的指针，因此我想进入`while`循环并了解`while`循环如何使用指针。

我用过`step`，`gdb`但它没有完全进入`while`循环。有没有办法进入`while`循环并理解**每**一步的操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:31:36.053

`*`绑定得比后缀更紧`++`。`++`右侧将最后应用，因此：

```
while (*d++ = *sc++) 
```

是相同的：

```
while (*d = *sc)
{
  d++;
  sc++; 
```

修改要好得多`gdb`。

**更新：**

不要像这样的 OP 编码！

虽然它可能看起来很酷，并证明你很聪明。普通人脑难以解析，容易出错？我们不想要，是吗？

最好选择上面提出的更清晰的替代方案，让编译器打乱代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:33:13.823

选项 1：查看Olaf Dietsche 建议的[汇编代码调试。](https://stackoverflow.com/questions/589653/switching-to-assembly-in-gdb)

选项 2：`gcc -S test.c`在汇编后使用停止编译器以查看程序的汇编代码。理解汇编代码可能有点困难。更多信息[在这里](http://www.delorie.com/djgpp/v2faq/faq8_20.html)

选项 3：将您的程序重写为类似

```
while(1)
{
    if(*d++ != *sc++)
    {
        break;
    }
} 
```

这样您就可以放置断点并查看值的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:56:18.383

编写代码的另一种但相同的方法是：

```
*d = *sc;
while (*d > 0)
{
  d++;
  sc++;
  *d = *sc;
} 
```

# java - Smartgwt：刷新树组件上的数据

> ID：12951172
> 
> 赞同：1
> 
> 时间：2012-10-18T09:18:30.063
> 
> 标签：java, gwt, tree, refresh, smartgwt

我正在使用 smartgwt 树组件。我试图将它扩展到用户树，如下面的类：

```
public UserTree() { 

    final List<NewNode> lista = new ArrayList<NewNode>();
    lista.add(new NewNode(4,"333"));
    setModelType(TreeModelType.PARENT);  
    setIdField("UserViewId");  
    setParentIdField("ReportsTo");  
    setNameProperty("Uzytkownicy");
    zapelnijListeUzytkownikow(lista);
    setRootValue(1);
    setData(userViewData);

    administrationService.zapelnijListeWezlow(token, new AsyncCallback<List<NewNode>>() {
        @Override
        public void onSuccess(List<NewNode> result) {

            zapelnijListeUzytkownikow(result);  
            setData(userViewData);
        }

        @Override
        public void onFailure(Throwable caught) {
            Window.alert("fail");
        }
    };  
}

protected TreeNode[] zapelnijListeUzytkownikow(List<NewNode> result) {

    userViewData = new TreeNode[12];
    /*  userViewData = new TreeNode[result.size() + 4];

    userViewData[0] = new UserViewTreeNode("2", "1", "Administratorzy");
    userViewData[1] = new UserViewTreeNode("3", "1", "Uprzywilejowani");
    userViewData[2] = new UserViewTreeNode("4", "1", "Uzytkownicy");
    userViewData[3] = new UserViewTreeNode("5", "1", "Pozostali");
    int i = 4;
    for(NewNode nn : result) {
       userViewData[i] = new UserViewTreeNode(String.valueOf(nn.getId()), "2", nn.getName());
       i++;
    }*/
    userViewData[0] = new UserViewTreeNode("2", "1", "Administratorzy");
    userViewData[1] = new UserViewTreeNode("3", "1", "Uprzywilejowani");  
    userViewData[2] =new UserViewTreeNode("4", "1", "Uzytkownicy");
    userViewData[3] =new UserViewTreeNode("5", "1", "Pozostali");  
    userViewData[4] = new UserViewTreeNode("18", "2", "Fasola Jan");
    userViewData[5] =new UserViewTreeNode("19", "2", "Puchatek Jakub");
    userViewData[6] =new UserViewTreeNode("20", "3", "Klapouchy");
    userViewData[7] =new UserViewTreeNode("21", "3", "Król Lew");
    userViewData[8] =new UserViewTreeNode("22", "4", "Bolek");
    userViewData[9] =new UserViewTreeNode("23", "4", "Lolek");
    userViewData[10] =new UserViewTreeNode("24", "5", "Gargamel");
    userViewData[11] =new UserViewTreeNode("25", "5", "Ciamajda");

    return userViewData;
} 
```

我想使用 asyncallback 将数据库中的数据放到这棵树中。它运行良好，但如果我想在 onSuccess 方法中使用 setData 方法，我得到一个错误：

“创建组件后，无法将配置属性 'data' 更改为 [Lcom.smartgwt.client.widgets.tree.TreeNode;@3c01807。”

创建树后如何刷新树上的数据？我想清理树上的所有值并放置由 ZapelnijListeWezlow 方法生成的值感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:06:35.443

我想我找到了答案。树组件是只读的。但树网格不是。所以我决定将 TreeGrid 扩展到 UserTreeGrid，并且总是当我想刷新树时，我只是做这样的事情：

UserTreeView ust = new UserTreeView(); ... ... ... ust.setData(tree) <-- 我无法将新值放入树中，因此我使用新数据创建新树并将其放在这里而不是旧树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:46:57.837

没有“正确”数据源（即客户端）创建的数据绑定元素（例如 TreeGrid 和 ListGrid）只能在创建时加载数据，我相信您已经知道。您收到的消息准确地说明了这一点。另一种解决方案，也是正确的 IMO，虽然更复杂，但创建一个不依赖于 SC 服务器的数据源，从而使用 smartgwt 库的 LGPL 版本，但利用 GWT 的传输方法（即 GWT-RPC或 RequestBuilder。这将允许您通过简单的 fetch() 重新加载树。您可以在以下论坛[主题](http://forums.smartclient.com/showthread.php?t=10850)中找到这种方法的详细信息。它讨论了 GWT-RPC 方法，但您可以推断它来创建 RequestBuilder一。

# reporting-services - 组字段中的占位符值

> ID：12951188
> 
> 赞同：0
> 
> 时间：2012-10-18T09:19:18.200
> 
> 标签：reporting-services, ssrs-2008, placeholder, reportbuilder3.0

我有一个报告，我在其中按货币分组，并且我还按货币添加了总计，所以如果我生成我的报告，与每种货币相关的数据会被排序，并且在每个货币类型的行集之后，我有总计货币

听众信息（文本框和 PlaceHolder 值）重复到每种货币

此外，当我导出到 excel 时，我调整了报告以将每种货币的结果保存在不同的工作表上，并将工作表名称重命名为 Currency

我的问题是，在报告的标题中，我有一个 PlaceHolder 应该显示货币。但是在 PlaceHolder 表达式中，它只允许我输入“=First(Fields!Currency1.Value, "dataSet")”。

但是当我生成报告时，即使是其他货币的数据和表格，它也只显示第一个货币“AED”

如何在占位符表达式的 excel 工作表名称中显示正确的货币？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T19:39:14.403

哦，你离得太近了！当您使页面名称依赖于货币名称时，您就为成功做好了准备。

不要直接使用数据集中的任何内容，使用您已经传递给报表结构的数据集中的信息。您已经通过将货币名称设置为页面名称，将货币名称放在您的标题可以找到它的位置。

```
=Globals!PageName 
```

作为占位符的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:54:38.230

我有坏消息要告诉你。`First`除了使用SSRS 中的页眉等函数之外，您无法以任何方式访问数据集，并且无法让页眉“响应”正文中发生的事情。

也许我在[其他问题](https://stackoverflow.com/a/12767211/419956)中的建议也可以帮助您。这归结为不使用标题，而是在正文中“伪造”标题。不漂亮，但它可能适用于您的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:07:03.870

我确实找到了解决方案：

1.  在报表中插入一个标题。
2.  将货币字段从数据集中拖到标题中。
3.  编辑表达式
4.  将 "=First(Fields!Currency1.Value, "dataSet")" 更改为 "=First(ReportItems!Currency1.Value)"

另请注意，以上仅适用于标题，它不适用于文本框中的占位符表达式

问候

# c - 动态分配的结构中的字符数组存储在哪里？

> ID：12951190
> 
> 赞同：2
> 
> 时间：2012-10-18T09:19:19.817
> 
> 标签：c, struct, dynamic-memory-allocation

> **可能重复：**
> [C 数组实例化 - 堆栈或堆分配？](https://stackoverflow.com/questions/12874604/c-array-instantiation-stack-or-heap-allocation)

当动态分配包含 char 指针的结构时，实际的 char 指针会发生什么情况？它存储在哪里？

一旦结构被释放，char 指针是否也随之被释放？

例如考虑以下结构：

```
struct mix
{
    int a;
    float b;
    char *s;
};

typedef struct mix mix; 
```

然后为它分配内存的以下代码：

```
int main()
{
    mix *ptr = (mix*)malloc(sizeof(mix));

    ptr->a = 3;
    ptr->b = 4.5f;
    ptr->s = "Hi, there, I'm just a really long string.";

    free(ptr);

    return 0;
} 
```

在堆栈上分配，`*s`然后与? `*ptr`我可以想象它确实是在堆栈上分配的，因为它不是以任何方式动态分配的（除非 malloc 有一些我不知道的功能）。而且我想“超出范围”`*s`将是释放的点`*ptr`。还是我完全错了？:)

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T09:23:12.367

`char*`命名成员的空间与调用后`s`的其余成员一起在堆上分配（您不需要转换其返回值）。分配给的字符串文字不是在堆或堆栈上分配的，而是实际二进制文件的一部分并具有静态存储持续时间。所以这：`mix``malloc()``s`

```
ptr->s = "Hi, there, I'm just a really long string."; 
```

将字符串文字的地址分配给`ptr->s`. 如果你想`ptr->s`指向字符串文字以外的东西，那么你需要`malloc()`记住它。并且对于每一个都`malloc()`必须有一个`free()`so`ptr->s`需要在 is`free()`之前是 d `ptr`（如果`ptr->s`只是指向动态分配内存）。

在调用 之后`free()`，取消引用`ptr`是未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T09:24:26.223

当您使用 动态分配`mix`时`malloc()`，您实际上是在分配一块内存来存储`mix`结构数据成员，即

*   一个`int`( `a`)
*   一个`float`( `b`)
*   *指向*( `char`)的`s`指针

当你打电话时`free()`，你只需释放*那个*块。

所以，你不分配字符串，你只分配字符串*指针*。

如果要动态分配字符串，则必须显式执行（通过另一个调用`malloc()`），并且为避免内存泄漏，您还应该显式释放字符串，使用`free()`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T09:24:28.267

当您 malloc for 时`ptr`，将为结构的所有成员分配内存，包括与为结构`s`的任何其他成员分配的内存没有什么不同的指针。

您正在为 分配一个字符串文字`s`，所以它通常存储在只读部分中很好。否则，您还需要`malloc`for`ptr->s`和`free`. 因为，它是一个字符串文字，所以这里没有必要释放`s`（这样做是 UB）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T09:25:17.447

`mix* ptr`在栈上分配。ptr 指向的内容，mix 类型的变量，在堆上动态分配，包括指针`s`。

请注意，`s`它没有指向任何东西，指针没有做任何有用的事情。您必须将其设置为指向可以分配到任何地方的东西。当你的结构被释放时，它指向的任何东西都不会被释放。在这种情况下，您将其设置为指向在 ROM 中分配的常量字符串文字，因此您无需担心这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-18T09:34:59.073

> *s 是否在栈上分配

`*s`（即，取消引用指针的结果`s`）根本没有分配。`malloc`,之后`ptr->s`是一个未初始化的指针。它不指向任何东西，并且表达式`*(ptr->s)`具有未定义的行为，直到您执行`ptr->s = "Hi, etc"`.

一旦您初始化`ptr->s`指向字符串文字，`*(ptr->s)`它就是字符串文字的第一个字符，因此它可能存在于可执行文件的某些数据部分中。`sizeof(mix)`除了结构的字节（在 32 位实现上可能是 12 个字节）之外，没有任何东西是动态分配的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-18T09:46:22.927

```
what happens with the actual char pointer? Where is it stored? 
```

char* 也和其他成员一样，占用一些字节（在 64 位机器中占用 8 个字节，类似于其他指针）。在您的情况下，您正在为堆中的该结构实例分配内存。因此该指针的内存也将分配在为该结构实例分配的同一堆块中。

考虑这段代码。这给出了 char* 的位置：

```
#include <stdio.h>    
typedef struct
{
    int a;
    float b;
    char *s;
}mix;    
int main()
{

printf("\n%d ,float:%d, int:%d, char*:%d", sizeof(mix), sizeof(float), sizeof(int), sizeof(char*));

return 0;
} 
```

所以这个结构的大小是 16 字节。由 4 字节整数、4 字节浮点数和 8 字节字符*组成。（在 64 位操作系统中，如果操作系统为 32 位，则 char* 将为 4 个字节。）

```
And once the struct is freed, is the char pointer freed along with it? 
```

通常 char* 指向的块不会被释放（如果它指向 malloc() 分配的块）。只有结构块将被释放。我们知道 free() 需要在分配期间返回的有效地址以进行和平解除分配。如果您在没有释放该 char* 的情况下释放，则会导致内存泄漏。

但是你的情况`"Hi, there, I'm just a really long string.";`

上面给出的字符串是在程序的只读部分中分配的字符串文字。

采用`gcc -S Yourprogram.c`

这将生成 .s 文件。您可以查看`.read_only`此字符串的部分。所以即使你删除了你的结构实例，也不会有内存泄漏。因为您只是指向一个只读地址。您根本没有为此字符串分配内存。

# facebook - Facebook API不使用friends_birthday权限返回朋友的生日

> ID：12951191
> 
> 赞同：1
> 
> 时间：2012-10-18T09:19:26.157
> 
> 标签：facebook

```
$fb_friends = $f1->getFacebookFriends();
$fb_friends_Count = $f1->displayFriendCount(array('users'=>$fb_friends, 'nb_display'=>1));

//get current date
$date_now=getdate();
$current_day=$date_now['mday'];
$current_month=$date_now['mon'];
$current_year=$date_now['year'];

//get friends' details  
for($u=0; $u<$fb_friends_Count; $u++) {
    $fb_friends_id=$fb_friends[$u]['id'];
    $friend_profile1="http://graph.facebook.com/".$fb_friends_id."/";
    $friend_profile = @file_get_contents($friend_profile1);
    $friend_profile = json_decode($friend_profile,true);    
    $gender=$friend_profile['gender'];
    print_r($friend_profile);

    //get birthday
    $birthday=$friend_profile['birthday']; 
```

这是我的代码。我已经拥有 user_birthday,friends_birthday 权限，但`print_r($friend_profile);`唯一显示的是：`Array ( [id] => xxxxxxx [name] => Joye Tanay Lipata [first_name] => Joye [middle_name] => Tanay [last_name] => Lipata [link] => http://www.facebook.com/joye.lipata [username] => joye.lipata [gender] => female [locale] => en_US )`

生日不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:35:31.173

您必须在图形 API 调用中使用当前的 access_token 参数

```
$friend_profile1 = "http://graph.facebook.com/".$fb_friends_id."/?access_token=".$access_token; 
```

# android - 如何将图像放入另一个图像视图

> ID：12951194
> 
> 赞同：0
> 
> 时间：2012-10-18T09:19:36.993
> 
> 标签：android, android-imageview

我有一个已经从 xml 设置的默认图像的图像视图，我想务实地更改它的图像，以便新图像将缩放到以前的图像大小，两个图像都是四舍五入的。

在设置新图像之前，我尝试将 scaleType 属性设置为不同的值，但它不起作用。

这是xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/up_right_circle_firstiv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:scaleType="fitXY"
    android:src="@drawable/circle_medium_up" /> 
```

这是活动代码：

```
public class MainActivity extends Activity {
ImageView middleCircle;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    middleCircle = (ImageView) findViewById(R.id.up_right_circle_firstiv);
    middleCircle.setImageResource(R.drawable.round_pic_one);
} 
```

}

活动内。

我已经上传了截图：

[http://imgur.com/OM79T](http://imgur.com/OM79T)

[http://imgur.com/G7y3Q](http://imgur.com/G7y3Q)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:57:49.017

我找到的解决方案是将 layout_width 和 layout_height 设置为默认大小。

首先我获取了原始图像文件的大小，然后将其转换为 dp。

[http://labs.skinkers.com/content/android_dp_px_calculator/](http://labs.skinkers.com/content/android_dp_px_calculator/)

每种分辨率都有不同的图像尺寸。

然后我的 xml 看起来像这样：

```
<ImageView
android:id="@+id/up_right_circle_firstiv"
android:layout_width="33dp"
android:layout_height="33dp"
android:src="@drawable/circle_medium_up" /> 
```

我只更改了每个布局的 dp 值。

我知道这不是最好的解决方案，但它对我有用。

# visual-studio-debugging - 在 Visual C# Express 中调试 xUnit 测试？

> ID：12951198
> 
> 赞同：1
> 
> 时间：2012-10-18T09:19:48.950
> 
> 标签：visual-studio-debugging, visual-c#-express-2010, xunit, xunit.net

我已经为我的 C# 解决方案编写了[xUnit](http://xunit.codeplex.com)测试。

[Visual C# Express 没有与单元测试工具集成](https://stackoverflow.com/questions/3424229/unit-testing-in-visual-c-sharp-2010-express)，所以人们通常使用外部工具，而且到目前为止我确实使用过外部 xUnit 测试运行器。

但是现在我想在 Visual C# Express 中调试一个特定的测试，因为这个测试会使 xUnit 测试运行程序崩溃。

我正在考虑创建一个仅引用单元测试项目并调用测试的虚拟可执行项目。
有什么更聪明的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:51:39.347

如果您愿意升级到[适用于 Windows Desktop 的 Visual Studio 2012 Express](http://www.microsoft.com/visualstudio/eng/downloads#d-express-windows-desktop)，您可以使用[适用于 Visual Studio 2012 的 xUnit.net 运行器](http://visualstudiogallery.msdn.microsoft.com/463c5987-f82b-46c8-a97e-b1cde42b9099)。否则，您可能能够附加到测试运行程序的进程（**Debug** -> **Attach to process...**）并以这种方式进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:01:12.587

我不确定 Express 版本中是否存在此功能，但您应该可以这样做`Tools -> Attach To Process`，然后附加到 xunit 测试运行程序应用程序（确保它正在运行）。在您的一个测试中放置一个断点，当您在 xUnit Test Runner 中运行测试时，您应该能够像往常一样进行调试。

# database - 使用 Liferay 配置 Postgres 数据库

> ID：12951201
> 
> 赞同：0
> 
> 时间：2012-10-18T09:20:03.910
> 
> 标签：database, postgresql, hook, liferay

我想将我的 liferay 连接到另一个 Postgres 数据库，并从该数据库中恢复用户的用户名和登录名，并使用此数据连接到 liferay。我正在使用钩子，但我不知道要修改哪个文件或 jsp 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:54:00.680

参见`portal.properties`配置：

```
# PostgreSQL
#
#jdbc.default.driverClassName=org.postgresql.Driver
#jdbc.default.url=jdbc:postgresql://localhost:5432/lportal
#jdbc.default.username=sa
#jdbc.default.password= 
```

# java - 更改微调器标题栏样式

> ID：12951203
> 
> 赞同：0
> 
> 时间：2012-10-18T09:20:05.080
> 
> 标签：java, android, title, android-spinner, custom-titlebar

如何更改微调器标题栏样式。

![在此处输入图像描述](../Images/4c2300e3e839bae53c3087ad20e66145.png)

我希望更改以下项目的标题栏：

```
icon
title textsize,textColor and
background color 
```

我怎样才能做到这一点？

请帮助我...我已经搜索了谷歌和更多网站。我没有得到任何解决方案。所以请让我知道它的可能。如果可能意味着我该如何开发这个????请解释我。

**编辑：**

这是我的代码：

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.row, R.id.country, list);
    spinner.setPrompt("Choose a Status");
  //  spinner.setTextColor("#FF0000");
    spinner.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:36:00.483

您必须创建 CustomSpinner，

为此，请尝试以下方式，它对我来说效果很好

**第 1 步：创建自定义 Spinner 类**

```
 class CustomSpinnerAdapter extends CursorAdapter {
        LayoutInflater mInflater;

        private int cocktailname; 

        CustomSpinnerAdapter(Context context, Cursor cursor)
        {
            super(context, cursor);
            mInflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);  

          cocktailname = cursor.getColumnIndex(YourDatabase.CK_NAME);  

        }

        @Override
        public View newDropDownView (Context context, Cursor cursor, ViewGroup parent)
        {
             return mInflater.inflate(R.layout.dropdownspinnertext, parent, false); 
        }
        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent)
        {
            return mInflater.inflate(R.layout.spinnertext, parent, false); 
        }

       @Override
        public void bindView(View row, Context context, Cursor cursor)
        { 
                    //Setting the Value here
            TextView paymentname = (TextView) row.findViewById(R.id.text1);    
            paymentname.setTypeface(textFont);
            String cocktail = cursor.getString(cocktailname);
            paymentname.setText(cocktail); 

        }  

     } 
```

**第 2 步：调用此适配器**

```
 CustomSpinnerAdapter custom_spinneradapter = new CustomSpinnerAdapter(this,youcursor);  
  spnListCocktails.setAdapter(custom_spinneradapter); 
  spnListCocktails.setOnItemSelectedListener(this); 
```

**dropdownspinnertext 的 XML**

我正在使用 Checked Dropdown Spinner

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/text1" 
style="?android:attr/spinnerDropDownItemStyle" 
android:singleLine="true" 
android:layout_width="fill_parent" 
android:layout_height="?android:attr/listPreferredItemHeight"
android:textColor="#FFFFFF"
android:textSize="18sp"
android:background="@drawable/background_image"
/> 
```

**对于 spinnertext.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/text1" 
style="?android:attr/spinnerItemStyle"
android:singleLine="true" 
android:layout_width="fill_parent"
android:layout_height="wrap_content"  
android:textColor="#FFFFFF" 
android:gravity="center"
android:padding="4dip"
android:layout_marginLeft="10dip"
android:textSize="20sp"/> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:27:29.247

**使用 Java（代码）：**

`spinner.setPrompt("Title")`

或者

**来自 XML：**

`android:prompt="@string/spinner_title`

[看到这个改变风格](https://stackoverflow.com/a/12914526/1581147)

# ruby - Mocha：为什么我不能存根 #caller 方法？

> ID：12951204
> 
> 赞同：1
> 
> 时间：2012-10-18T09:20:07.590
> 
> 标签：ruby, ruby-mocha

在简单的代码中使用`Mocha`以意想不到的方式打开。你能解释一下出了什么问题吗？

```
require 'test-unit'
require 'mocha'

class A
  def m
    caller.first
  end
end 
```

所以使用这个简单的类，我们可以得到最新的调用者：

```
A.new.m #=> "(irb):32:in `irb_binding'" (for example) 
```

但是如果我想存根`caller`调用，事情就会出错。

```
a = A.new
a.stubs(:caller)

Mocha::ExpectationError: unexpected invocation: #<A:0x6aac20>.caller() 
```

我的猜测是查看`Mocha`来源，但我稍后会这样做；）

* * *

*   红宝石 1.9.3p194
*   测试单元 2.5.0、2.4.8
*   摩卡咖啡 0.12.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:16:46.267

这是部分解释，但我希望它仍然有用。

正如您所建议的，了解这里发生的事情的一种方法是检查 Mocha 来源。我认为问题的关键在于`Expectation`创建存根时[使用的类利用了`caller`方法本身](https://github.com/freerange/mocha/blob/177e9cc6a5fa4d16cd8a2dbddfc18cb4ba964542/lib/mocha/expectation.rb#L512)。

一种解决方法是使用`alias_method`例如

```
class A
  alias_method :my_caller, :caller # allow caller to be stubbed

  def m
    my_caller.first
  end
end

a = A.new
a.stubs(:my_caller) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:44:53.360

您`caller`从`m`. `caller.first`呼叫的线路总是如此，`m`这可能是无用的。可能您想要的是`caller[1]`，而不是`caller.first`（或`caller[0]`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T21:53:26.677

这个怎么样？

```
allow_any_instance_of(Kernel)
  .to receive(:caller)
  .and_return(["anything_you_want.rb"]) 
```

# c++ - 将具有 const 成员的对象复制到非 const 对象

> ID：12951206
> 
> 赞同：1
> 
> 时间：2012-10-18T09:20:15.087
> 
> 标签：c++

我有以下数据容器：

```
struct Node
{
    explicit Node(const std::vector<Data>& _data, const Value& _value): data(_data), value(_value)
    {
    }

    const std::vector<Data> data;
    const Value value;
}; 
```

我希望按照这些思路写一个模拟：

```
class MockVisitor: public IVisitor
{
public:
    virtual void operator()(const Node& _node)
    {
        node = _node;
    }

    Node node;
}; 
```

但是，我收到了错误：

```
error C2582: 'operator =' function is unavailable in 'Node'. 
```

我假设这是因为我只能分配给一个 const 节点。无论如何我可以摆脱这个错误吗？请记住，这只是一个模拟类。我只是想记录传递给 operator()() 的值，以便在单元测试中检查它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:26:38.250

由于成员变量`data`和`value`被声明为常量，因此`operator=`被删除。这就是您不能使用它的原因，因此会出现编译错误。

这应该工作：

```
class MockVisitor: public IVisitor
{
public:
    virtual void operator()(const Node& _node)
    {
        node.reset( new Node( _node ) );
    }

    std::unique_ptr< Node > node;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:23:36.183

您的 Node 类是不可变的。执行此操作没有任何意义，因为您正在尝试更改 MockVisitor 中已有的节点的值。如果你想这样做考虑`boost::optional<Node>`。

# python - 存储数百万 HTML 文件的位置

> ID：12951208
> 
> 赞同：1
> 
> 时间：2012-10-18T09:20:24.520
> 
> 标签：python, http, nosql

我有多达 1 亿个 HTML 静态文件。我的软件需要它们。我可以在哪里存储这么多 HTML 文件并在需要时访问它们？

**解决方案#1**。就在某个文件夹里。这个可以吗？硬盘很难吗？我应该创建许多子文件夹吗？

**解决方案#2**。[雷迪斯](http://redis.io/)。

请帮我决定。我需要每月阅读这些文件一次，很少见。什么解决方案可以带来最佳性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T11:20:29.347

“需要每个月阅读一次”意味着完全没有性能压力。并且由于 OP“需要简单性”，一个明显的选择是将这些文件存储到文件系统中，分布在许多分层目录中。

像这样的东西：[https ://serverfault.com/questions/95444/storing-a-million-images-in-the-filesystem](https://serverfault.com/questions/95444/storing-a-million-images-in-the-filesystem)

# ruby-on-rails - Papertrail 版本控制和存储当前版本？

> ID：12951209
> 
> 赞同：0
> 
> 时间：2012-10-18T09:20:26.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paper-trail-gem

在创建了大约 1000 条记录后，我已将 Papertrail gem 添加到我的应用程序中。

有谁知道如何用我的数据的当前版本填充版本表？

如果不这样做，似乎只有每个的第二个更改才能让我正确地进行比较/标记通过差异等更改的内容。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:08:16.620

一种快速而肮脏的方法是只创建一个更新单个字段的循环，例如在字符串字段中添加一个空格或一些无害的东西。

# android - 使用哪种服务来根据时间创建通知（Android）

> ID：12951216
> 
> 赞同：0
> 
> 时间：2012-10-18T09:20:54.750
> 
> 标签：android

我有一个数据库，用户在其中保存他想做的事情。在每件事中，他可以设置到期日期。关键是，我想创建一个列表（通知列表），其中“要做的事情”将出现将要过期。例如，用户想要创建一个列表，其中包含将在两天后过期的东西。我已经使用了 IntentService 并有意传递了用户每次选择的时间，但我什么也没得到。在这种情况下我必须使用服务还是绑定服务？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:38:11.593

像这样使用 AlarmManager 技术，..

```
 AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.YEAR, yearFromDB);
    calendar.set(Calendar.MONTH, monthFromDB);
    calendar.set(Calendar.DAY_OF_MONTH, dateFromDB);
    calendar.set(Calendar.HOUR_OF_DAY, hourFromDB);
    calendar.set(Calendar.MINUTE, minuteFromDB);
    calendar.set(Calendar.SECOND, 0); 
```

使用 PendingIntent 在特定时间唤醒并执行此任务..

```
 alarmManager.set(AlarmManager.RTC_WAKEUP,calendar.getTimeInMillis(), ObjPendingIntent); 
```

您可以通过以下链接获取特定时间的待办事项列表、阅读 PendingIntents 和 Alarmmanager 的内容。

[http://developer.android.com/reference/android/app/PendingIntent.html](http://developer.android.com/reference/android/app/PendingIntent.html)

和

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:29:14.357

您可以使用[AlarmManager](https://developer.android.com/reference/android/app/AlarmManager.html)类在给定时间触发事件，在这些事件中您可以使用[NotificationManager](https://developer.android.com/reference/android/app/NotificationManager.html)触发通知。

在此处查看警报管理器示例： [警报管理器示例](https://stackoverflow.com/questions/4459058/alarm-manager-example)

在此处查看通知指南： [https ://developer.android.com/guide/topics/ui/notifiers/notifications.html](https://developer.android.com/guide/topics/ui/notifiers/notifications.html)

# php - Drupal 视图幻灯片

> ID：12951217
> 
> 赞同：0
> 
> 时间：2012-10-18T09:20:57.310
> 
> 标签：php, javascript, jquery, ajax, drupal-7

我有这样的设计：

[http://i.stack.imgur.com/P6spc.jpg](http://i.stack.imgur.com/P6spc.jpg)

EG 单击“结构”标题，打开内容并来到 img。

创建内容类型并安装视图。通过块分隔图像、标题、内容字段。

[http://i.stack.imgur.com/Rhgmz.png](http://i.stack.imgur.com/Rhgmz.png)

喜欢我们的设计，但网站现在是静态的。我想要动态结构，但我不知道。好吧，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:28:30.253

您可以使用视图幻灯片模块：[http ://drupal.org/project/views_slideshow](http://drupal.org/project/views_slideshow)

# javascript - 如何将现有的 html5 游戏导出到 IOS 游戏应用程序

> ID：12951224
> 
> 赞同：0
> 
> 时间：2012-10-18T09:21:20.903
> 
> 标签：javascript, cordova, cocos2d-iphone, cross-platform

我有一个用 html5 编写的游戏（主要是用 JavaScript 编写的），使用 cocos2d-html5 游戏引擎；

现在我想把它做成一个IOS游戏应用，这样我就可以把它提交到苹果应用商店，然后用户可以下载并安装到他们的iPhone或Ipad上；

所以，我的问题是，我怎样才能将它导出到 IOS？

我已经尝试过使用PhoneGap——一个很好的跨平台应用引擎——来包装我的游戏，但是对于游戏应用来说太慢了；

有没有人对类似的事情有一些想法或经验？如果有人可以分享一些想法，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:50:36.527

Have a look at this [tutorial](http://www.raywenderlich.com/32970/how-to-make-a-cross-platform-game-with-cocos2d-javascript-tutorial-getting-started), it creates a simple HTML-5 game using cocos2d & after that it ports it to coco2d-iphone, so it runs natively using the JSBinding for Objective-C & you'll get the best performance.

# mysql - mysql 在结果集的底部移动行

> ID：12951227
> 
> 赞同：1
> 
> 时间：2012-10-18T09:21:28.160
> 
> 标签：mysql, rows, shift

我正在尝试在结果集底部移动值小于当前日期的行。我有这个查询

```
SELECT 
r_id AS Id,
f_title AS Title,
f_desc AS Description,
f_upload_file AS File,
ABS(DAYOFYEAR(f_valid_date)- DAYOFYEAR(CURDATE())) AS Deadline,
f_added_on as 'Added On'
FROM t_documents
WHERE 
f_rec_status= TRUE
ORDER BY Deadline ASC 
```

它给出了这个结果：

![在此处输入图像描述](../Images/19e314d424ab6163ae989253fd2b1975.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:23:38.360

尝试这个，

```
ORDER BY (CASE WHEN Deadline IS NULL
               THEN 1 ELSE 0 END) ASC, Deadline ASC 
```

# c# - 当我点击按钮时，图像可以放置在骨骼关节上吗？我应该在编码中写什么？

> ID：12951232
> 
> 赞同：0
> 
> 时间：2012-10-18T09:21:36.670
> 
> 标签：c#, kinect

我能知道如何解决这个问题吗？我正在创建一个 kinect 将图像放置在骨骼关节上。

[http://i860.photobucket.com/albums/ab166/season04/Untitled_zps8781ac62.png](http://i860.photobucket.com/albums/ab166/season04/Untitled_zps8781ac62.png)

代码如下：

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        foreach (SkeletonData data in e.SkeletonFrame.Skeletons)
        {
            foreach (Joint joint in data.Joints)
            {
                if (joint.Position.W < 0.6f) return;
                switch (joint.ID)
                {
                    case JointID.Head:
                        var heanp = getDisplayPosition(joint);

                        Canvas.SetLeft(imgHead, heanp.X);
                        Canvas.SetTop(imgHead, heanp.Y);
                        break;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:57:28.117

那是因为`SkeletonFrameReadyEventArgs`有一个属性`SkeletonFrame`，但您的按钮单击事件`RoutedEventArgs`没有`SkeletonFrame`属性

# java - 如果抛出 RuntimeException，是否可以将其作为 Exception 捕获？

> ID：12951236
> 
> 赞同：4
> 
> 时间：2012-10-18T09:21:45.013
> 
> 标签：java, exception

如果我有一个`try`抛出`RuntimException`子类的块，后续`catch`块能否将其捕获为`Exception`? 具体来说：

```
public class MyAppException extends RuntimeException {
    // ....
}

// In some other part of the code:
try {
    // Executing this results with doSomething() throwing a MyAppException.
    int x = doSomething();
} catch(Exception exc) {
    // Does the thrown MyAppException get caught here?
} 
```

我的想法是*肯定*的，因为 a `RuntimeException`extends `Exception`。但是我有一些生产代码不是这样的。很明显，如果答案是否定的，那么这就是我的答案；否则我需要深入研究，看看为什么我的代码很糟糕。提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T09:23:29.750

`RuntimeException`派生自`Exception`，所以它会被抓住。

说了这么多，**千万别做**！应该防止而不是捕获运行时异常。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T09:22:56.137

是的。它会捕获`RuntimeException`，但万一`Exception`出现在 catch 块中，您必须再次捕获。

*我建议您进行本地部署并调试代码。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-18T09:24:31.280

如果 catch(Exception) 没有捕获您的 RuntimeException，那么您的应用程序的行为方式与您的想法不同。

```
try {
    throw new RuntimeException();
} catch (Exception e) {
    System.out.println("Caught "+e);
} 
```

印刷

```
Caught java.lang.RuntimeException 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T09:25:06.380

是的。可以捕获 RuntimeExceptions。Throwable 的所有子类都可以被捕获。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T11:39:11.627

是的，你可以捕捉 RuntimeException ......但我认为这不是一个好方法，如果你捕捉到它，你应该妥善管理它。否则结果将不在你的掌控之中。最好的方法是将它留给 JVM 。JVM 会处理它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T09:36:20.167

是的，你的想法是正确的，我认为最好的方法是知道“只写代码”的答案，让代码告诉你答案。您可以看到以下简单的示例代码：

```
 package own;

public class MyExceptionTest {

    public void testRuntimeException (){
        throw new MyException();
    }

    public static void main(String[] args) {
        try{
            new MyExceptionTest().testRuntimeException();
        }catch(Exception e){
            System.out.println(e.getClass().getName());
        }
    }
}    

class MyException extends RuntimeException{
    public MyException(){
        super();
    }
} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2015-03-19T22:34:57.543

我是 IT 部门的项目经理，我和我的开发人员一遍又一遍地争论，他们根本不在乎。浏览网络，甚至大多数人都主张捕获并抛出 RuntimException ......每次看到它，我都会对 10 年经验后的无能感到难以置信的愤怒......

规则 1：

**如果您没有捕获 RuntimeException，则永远不要在 Program 中抛出 runtimeexception。**

规则二：

**只有捕获一个运行时异常才能真正导入与您的软件无关的东西**：例如发送邮件到操作紧急转移、记录异常、重新启动服务器......

这样做的原因是，在好的软件中，日志文件中没有堆栈跟踪。当开始编码感到不舒服时，请执行以下操作：

创建新类 DevelopmentException 扩展异常。然后继续编写代码并最初捕获异常。然后你把它作为你自己的开发例外重新抛出。在捕获它的方法中，您记录它。

现在：每天 grep 为您非常个人的 DevelopmentException。如果你找到了，这意味着还有工作要做。进入您的代码并查看异常来自何处并事先捕获它。

理想情况下，您将再也不会在程序的这一部分中看到 DevelopmentException。重复直到您的软件中剩下 0 个 Stacktraces 并且您已经完善了异常处理。

抛出和捕获运行时异常的最大问题是编译会忽略它。因此，这意味着当您的一位同事编写预订界面并在缺少值时抛出 RuntimeException（是的，ppl 确实如此）... ...编译器不会向您显示可能存在运行时异常。现在，当您没有捕获它时，您的程序可能会在没有任何日志记录的情况下关闭。

为什么叫RuntimeException？许多人将此误认为是程序运行时的错误，但它实际上意味着“一个异常具有完全破坏性，以至于需要停止 Java 运行时环境”。换句话说，它的意思是：OutOfMemory、BrokenRam、JRE 的 FaultyImplementation 等......基本上是告诉你的东西：程序无法运行，因为 PC 正在崩溃......

只是我的2美分。有没有人经历过同样的事情？

**PS：**关于不断删除堆栈跟踪：

一旦你看到一个异常尝试用例如 NullpointerException 来捕捉它。当您看到 Nullpointerexception 转到您的代码并删除堆栈跟踪时，只需 log.WARN(NullpointerOccured) 并编写您的程序以重试左右......

理想情况下，您会重复，直到您再也看不到 Stacktrace。当您永远看不到堆栈跟踪时，这意味着**所有可能出错的问题都已处理**（当然除了 RuntimeException）

# sql - 如何在选择语句中包含双引号？

> ID：12951239
> 
> 赞同：3
> 
> 时间：2012-10-18T09:22:00.573
> 
> 标签：sql, oracle10g

我有一张像

```
 id    name 
 10    bob
 20    bill 
```

我想用双引号在输出中只选择名称列

就像`select '"'||name||'"' from table` 它给了我正确的输出但是有没有其他方法不使用连接......

谢谢..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-29T08:32:40.503

使用这个你可以得到双引号的结果

> ' " ' + 列名 + ' " '

例子

### 询问

```
SELECT '"'+Name+'"' , Age
FROM customer 
```

### 结果

> “维拉尼亚” | 27

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:26:25.910

创建一个添加引号的虚拟列：

```
CREATE TABLE
....
quoted_name VARCHAR2 GENERATED ALWAYS AS ('"' || name || '"') VIRTUAL,
... 
```

浏览此处获取更多信息：

[http://www.oracle-base.com/articles/11g/virtual-columns-11gr1.php](http://www.oracle-base.com/articles/11g/virtual-columns-11gr1.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:21:15.220

如果您的意图是能够将结果“导出”到空格或逗号分隔的文本文件中，请使用视图来“格式化”您的数据。您的日期列也需要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:24:48.880

这将检查任何名称至少有一个双引号

```
select * from table
where name like '%"%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-27T12:11:29.790

在我看来，有两种情况需要在 sql 中使用双引号。

1.  更新包含单个多引号的字符串列。（你必须逃避它）
2.  在“编辑前 200 行”中更新您无法编辑的列中的博客内容

    所以，如果你想使用双引号，请遵循此。

    SET QUOTED_IDENTIFIER OFF
    BEGIN
    DECLARE @YourSqlStmt AS VarChar(5000) -- 声明一个变量。
    SET @YourSqlStmt = "ok"
    PRINT @YourSqlStmt -- 在此处执行操作
    END

    这可以节省时间，并且您无需在列的现有字符串内容中转义单引号。

# jquery - 隐藏标题栏 jquery UI 对话框

> ID：12951257
> 
> 赞同：0
> 
> 时间：2012-10-18T09:22:55.857
> 
> 标签：jquery, jquery-ui

> **可能重复：**
> [jquery UI 对话框：如何在没有标题栏的情况下进行初始化？](https://stackoverflow.com/questions/1023072/jquery-ui-dialog-how-to-initialize-without-a-title-bar)

```
 $("<div id='divLoading1' >Loading...<div>").dialog({
        modal: true,
        resizable: false,
        width: 200,
        height: 100
    });

$("#divLoading1").prev().remove();//won't remove title
$("#divLoading1").prev().hide(); 
```

我想从对话框中获得标题，但这不起作用，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:27:00.797

你可以用这个...

```
$("#divLoading1 .ui-dialog-titlebar").hide(); 
```

但你最好在css中做。

```
#divLoading1 .ui-dialog-titlebar
{
    display:none;
} 
```

# python - 将变量分配给列表元素，而不知道它的长度

> ID：12951259
> 
> 赞同：0
> 
> 时间：2012-10-18T09:23:02.980
> 
> 标签：python, list, variable-assignment

不知道如何正确形成，但问题与写入新行的 shapefile（python 库）函数有关，这需要写入变量。从我的数据中，我正在创建一个列表，我认为我可以将其转换为tuple 并且会解决我的问题，但是不...我没那么容易...

该函数在问这个： `w.record(a, b, c, d....)`或者`w.record('a', 256, 25.2444, 'd'....)` 我的数据在一个列表中，但列表长度不知道我的默认值，它取决于输入数据，正确的长度很重要！

我也可以写`w.record(list[0], list[1]...list[len(list)-1])`，但是我必须自动创建它，不知道我该怎么做。

顺便说一句，我使用旧的 python：2.5...（不是我的选择）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:25:31.893

`argument`函数声明中有 4 种类型：-

*   位置论据
*   默认参数（或关键字参数 - 形式： - `a = 5`）
*   非关键字参数
*   关键字参数（或字典类型关键字参数）

**一个典型的函数声明是这样的：-**

```
func(positional_args, keyword_args,
                     *tuple_grp_nonkw_args, **dict_grp_kw_args) 
```

您需要`non-keyword`参数，它需要额外的参数并将它们存储为`tuple`：

```
w.record(*yourvalues) 
```

同样`keyword`的参数，`dictionary`作为输入。它们用 表示`**kwarg`。

*   非关键字参数之后的所有关键字参数进入`**kwarg`
*   并且非关键字参数之前的所有关键字参数都是默认参数

**对于 EG：-**

```
// nkwarg takes a list
// kwarg takes a dictionary
def foo(arg, defaultarg = 5, *nkwarg, **kwarg):
    print arg
    print defaultarg
    print nkwarg
    print kwarg

foo("hello", ["how", "are", "you"], a = 3, b = 4) 
```

**输出**： -

```
hello
5
(['how', 'are', 'you'],)
{'a': 3, 'b': 4} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:25:26.877

```
def foo(hello, *args):
 print hello

 for each in args:
     print each

if __name__ == '__main__':
 foo("LOVE", ["lol", "lololol"]) 
```

# objective-c - 为什么使用 Try/Catch 而不是测试 NSError

> ID：12951260
> 
> 赞同：1
> 
> 时间：2012-10-18T09:23:03.750
> 
> 标签：objective-c, cocoa-touch, exception, try-catch

有时你会看到一段 iOS - Objective-C 代码使用了 Try/Catch 结构。

例如这个例子来自：[http ://docs.xrtml.org/2-1-0/pubsub/ios/ortcclient.html](http://docs.xrtml.org/2-1-0/pubsub/ios/ortcclient.html)

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Instantiate OrtcClient
    ortcClient = [OrtcClient OrtcClientWithConfig:self];

    // Post permissions
    @try {
        NSMutableDictionary* myPermissions = [[NSMutableDictionary alloc] init];

        [myPermissions setObject:@"w" forKey:@"channel1"];
        [myPermissions setObject:@"w" forKey:@"channel2"];
        [myPermissions setObject:@"r" forKey:@"channelread"];

        BOOL result = [ortcClient saveAuthentication:@"http://ortc-developers.realtime.co/server/2.1/" isCLuster:YES authenticationToken:@"myAuthenticationToken" authenticationTokenIsPrivate:NO applicationKey:@"myApplicationKey" timeToLive:1800 privateKey:@"myPrivateKey" permissions:myPermissions];

        if (result) {
            // Permissions correctly posted
        }
        else {
            // Unable to post permissions
        }
    }
    @catch (NSException* exception) {
        // Exception posting permissions
    }

    // Set connection properties
    [ortcClient setConnectionMetadata:@"clientConnMeta"];
    [ortcClient setClusterUrl:@"http://ortc-developers.realtime.co/server/2.1/"];

    // Connect
    [ortcClient connect:@"myApplicationKey" authenticationToken:@"myAuthenticationToken"];
} 
```

为什么要使用这样的结构，难道你不能`saveAuthentication:isCLuster:authenticationToken:...`像“常规”Cocoa-Touch 代码那样检查来自方法的 NSError（间接）返回吗？例如读取 JSON 时：

```
NSError *error = nil;
id result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

if (error == nil){
    NSLog(@"%@", result);
}else{
    NSLog(@"%@", [error localizedDescription]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:31:29.433

在您期望**无法从中恢复或可能导致未定义行为****（**例如***crash*** ）的情况下使用 try catch，在期望可恢复错误（例如来自 json 对象或 xml 的错误值）的情况下使用 NSError 。

 **您可以浏览有关异常编程的[Apple 文档。](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Exceptions/Exceptions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:30:26.610

一般来说，try-catch 更健壮，不需要您定义测试位置的确切位置（可能是一个块）并提供有关异常的信息。**

# java - 是否有 Intellij 插件来对齐 .properties 文件中的值？

> ID：12951264
> 
> 赞同：11
> 
> 时间：2012-10-18T09:23:11.577
> 
> 标签：java, ide, intellij-idea

是否有允许在 IntelliJ 中格式化属性文件的插件？基本上我想格式化

```
prop1 = thing
some.otherprop = other thing 
```

成为

```
prop1          = thing
some.otherprop = other thing 
```

IntelliJ 中是否有为此设置或插件来执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T13:11:37.903

我不知道可以做到这一点的插件。请[向 YouTrack 提交请求](http://youtrack.jetbrains.net/issues/IDEA)，此功能可能会出现在更高版本的 IntelliJ IDEA 中（目前没有任何可用于`.properties`文件的代码样式配置）。

# sql-server - 多列上的非集群索引 VS 单个索引中的多列

> ID：12951268
> 
> 赞同：1
> 
> 时间：2012-10-18T09:23:18.987
> 
> 标签：sql-server, azure-sql-database

我正在向 SQL Azure DB 添加非聚集索引，我想知道在单个非聚集索引中包含多个列与在每个非聚集索引中包含一个列的多个非聚集索引有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:36:08.207

> 在单个非聚集索引中具有多个列与在其中具有多个非聚集索引且每个具有单个列之间的区别？

考虑一个`T`具有聚集 PK`Id`列的表，以及另外的列`A`、`B`、`C`。

包含`A`、`B`和的单个非聚集索引`C`可以支持快速查找查询，例如：

```
WHERE A > @a
WHERE A = @a AND @b1 < B AND B < @b2
WHERE A = @a AND B = @b AND C < @c 
```

但不是

```
WHERE B = @b
WHERE C = @c 
```

在这两种情况下，我们都不能做得比表扫描更好

但是，如果我们有多个索引，`IX_A`on`A`等：

```
WHERE A = @a
WHERE B = @b
WHERE C = @c 
```

都将受益于索引和复合查询，例如

```
WHERE A = @a AND B = @b AND C < @c 
```

也会有一点好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:27:57.483

那些将优化的`SELECT`查询是不同的。

您不应该在不需要查询性能优化的情况下添加索引。

如果您有要优化的查询，那么您可以开始考虑添加与您要优化的查询相对应的索引。

假设您有一个包含以下结构的表：

```
create table emp
(
    id int identity primary key clustered,
    name nvarchar(200),
    dep_id int,
    salary int
); 
```

您的聚集索引（`primary key clustered`子句）将加快使用`id`列作为过滤器的查询的查找和行数据检索，例如：

```
select id, name, dep_id, salary
from emp
where id = @id 
```

任何（唯一）列上的任何非聚集索引都将使用同一列作为过滤器来加速查找（而不是行数据检索）。

```
create index emp_name_idx on emp(name);
-- will speed up look-up for 
select id, dep_id
from emp
where name = @name 
```

如果您还想使用相同的索引加快行数据检索，则需要将`SELECT`子句中存在的列添加到包含的列中。

```
create index emp_name_idx on emp(name) include(id, dep_id);
-- will speed up look-up and data row retrieval for 
select id, dep_id
from emp
where name = @name 
```

任何包含多个列的非聚集索引都将使用前 n 列以与它们在索引中出现的顺序相同的顺序加快查询的查找速度（只要过滤器是相等比较，列优化条纹将作为第一个不等式结束比较满足）。

```
create index emp_namesalary_idx on emp(dep_id, salary);
-- will speed up look-up and data row retrieval for 
select id, dep_id
from emp
where dep_id = @dep_id
  and salary > @salary 
```

对于单列索引，也为了优化行数据检索，使用`include`子句指定`SELECT`子句中尚未出现在索引列列表中的每一列。

请记住，对于您添加到表中的每个索引，您也会增加`INSERT`该表的开销。因此，您应该始终平衡报表索引的收益和索引的`SELECT`损失之间的性能`INSERT`。还要记住，索引使用磁盘（和缓存）空间，这也应该计入决策过程。

# algorithm - 使用旋转卡尺的凸多边形的直径

> ID：12951273
> 
> 赞同：1
> 
> 时间：2012-10-18T09:23:24.197
> 
> 标签：algorithm, computational-geometry

我正在尝试解决找到凸多边形直径的问题，即它们之间具有最大距离的一对点。

> [http://cgm.cs.mcgill.ca/~orm/diam.html](http://cgm.cs.mcgill.ca/~orm/diam.html)

我试图实现这里提到的算法/伪代码。但是对于使用这些点 (-3,-4) (2,-3) (4,3) (0,5) 制作的多边形，我得到了错误的答案

显然多边形的直径是 (-3,-4) (4,3)。但根据这里提到的伪代码，我得到的直径为 (-3,-4) (0,5)

```
struct vert
{
    long long int x,y,idx;
    double rad;
    int next;
    vert()
    {}
    vert(long long int _x,long long int _y)
    {
        x=_x;
        y=_y;
        rad=atan2(double(y),double(x));
    }
};
long long int dist(vert a,vert b)
{
    vert ab=b-a;
    return (ab.x*ab.x+ab.y*ab.y);
}
int cross(vert a,vert b,vert c)
{
    vert ab,ac;
    ab=b-a;
    ac=c-a;
    return ab.x*ac.y-ab.y*ac.x;
}
double area(vert a,vert b,vert c)
{
    double x=cross(a,b,c);
    x=abs(x/2.00);
    return x;
}
struct ret
{
    vert a,b;
    double dist;
};
ret comp(ret ans,vert a,vert b)
{
    if(dist(a,b)>ans.dist)
    {
        ans.a=a;
        ans.b=b;
        ans.dist=dist(a,b);
    }
    return ans;
}

ret rc_diameter(vector<vert> &v)
{
    int i,j,k,l,n;
    n=v.size();
    int a,b;
    int p,q,p0,q0;
    p0=p=0;
    q=1;
    ret ans;
    ans.dist=0;
    while(area(v[p],v[v[p].next],v[v[q].next])>area(v[p],v[v[p].next],v[q]))
    {
        q=v[q].next;
    }
    q0=q;
    ans=comp(ans,v[p],v[q]);
    while(q!=p0)
    {
        p=v[p].next;
        ans=comp(ans,v[p],v[q]);
        while(area(v[p],v[v[p].next],v[v[q].next])>area(v[p],v[v[p].next],v[q]))
        {
            q=v[q].next;
            if(p!=q0&&q!=p0)
                ans=comp(ans,v[p],v[q]);
            else
                return ans;
        }
        if(area(v[p],v[v[p].next],v[v[q].next])==area(v[p],v[v[p].next],v[q]))
        {
            if(p!=q0&&q!=p0)
                ans=comp(ans,v[p],v[v[q].next]);
            else
                ans=comp(ans,v[v[p].next],v[q]);
        }
    }
    return ans;
} 
```

因此，任何人都可以告诉我伪代码或我的实现中是否存在问题，当我手动将此算法应用于给定的一组点时，我仍然得到 (-3,-4) (0,5) 为直径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:40:19.407

可能有点晚了，但我看到您的 p0 初始值不正确。p0 应该是列表中的最后一个点 (pn)，而不是列表中的第一个点 (0)。换句话说，p0 是多边形 P 中第一个点的前一个点，p 是多边形 P 中的第一个点，q 是 p 之后的下一个点。

# facebook - 如何为 FB 用户获取最多互动的朋友？

> ID：12951278
> 
> 赞同：1
> 
> 时间：2012-10-18T09:23:31.887
> 
> 标签：facebook, facebook-graph-api

有什么方法可以让 FB 用户的互动最多的朋友（比如前 10 位朋友）？我试图寻找任何可用的 Graph api，但我找不到。

如果没有这样的 api，有没有人知道任何替代方法来至少获得最近交互的用户？

互动可能是点赞、分享、评论或接受新朋友请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:55:43.940

您可以使用最近的 X 提要和按朋友 ID 分组来获取家庭提要。在您的主页上活动最多的朋友，他们将是最（也是最近）互动最多的朋友。

# hdmi - 通过 HDMI 使用电视遥控器作为控制 GUI

> ID：12951282
> 
> 赞同：1
> 
> 时间：2012-10-18T09:23:38.360
> 
> 标签：hdmi

我想将带有 HDMI 输出的 linux PC 连接到我的（三星）电视。这允许在电视上显示屏幕。

如何使用电视遥控器作为输入设备，通过 HDMI 发送来控制 PC？

或者换句话说，我可以制作一个简单的用户界面，在电视上显示并用遥控器控制吗？我主要想象使用 4 个箭头按钮和 OK 来导航和选择内容。

欢迎任何指向文档或库的链接（首选 Java）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:28:32.173

用于发送遥控信号的协议称为[CEC](http://en.wikipedia.org/wiki/Consumer_Electronics_Control#CEC)。为了使用它，您将需要支持它的硬件，并拥有该硬件的驱动程序。

缺少有关您正在使用的硬件的更多具体信息，我建议[从此页面开始，了解 Raspberry Pi 上的 CEC 支持](http://elinux.org/CEC_%28Consumer_Electronics_Control%29_over_HDMI)

# macos - mac上怎么知道usb设备节点和音量的关系

> ID：12951287
> 
> 赞同：2
> 
> 时间：2012-10-18T09:23:46.737
> 
> 标签：macos, usb, media, volume, mount

例如，我有一个闪存盘（KingStone Mass Storage），并且只有一个分区，所以当我将它插入 mac 时。我会看到一个 Volume（它可能是 /Volumes/KingStone）被自动挂载了。我们可以看到卷（/Volumes/Kingstone）属于金士顿磁盘。

但现在我插入了另一个磁盘，例如 AData 磁盘。并安装了另一个卷。我怎么知道哪个卷属于金石磁盘。（我们可以通过 VenderID 知道哪个磁盘是 kongston）。

现在在代码中，我们可以通过调用`[[NSWorkspace sharedWorkspace] mountedRemovableMedia]`或`[[NSFileManager defaultFileManager] mountedVolumeURLsInclud.....]`

我们还可以通过将 kIOUSBDeviceClassName 与 IOServiceMatching 和 IOServicesGetMatchingServices 一起使用来了解所有 USB 设备

甚至 kIOMediaClassName 与这两个函数我们将知道卷媒体，

我们可以通过路径确定每个卷媒体属于哪个 USB 设备。

但我不知道卷媒体的挂载点。

或者其他有用的东西。

对不起我的泳池英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:38:09.370

其他方式。

使用 kIOMediaClass 创建匹配字典

```
matchingDict = IOServiceMatching(kIOMediaClass); 
```

如果您只想获取可移动存储卷，请使用 kIOMediaRemovableKey 和 kCFBooleanTrue 设置字典

```
CFDictionarySetValue(matchingDict, CFSTR(kIOMediaRemovableKey), kCFBooleanTrue); 
```

并立即获得匹配服务，

```
IOServiceGetMatchingService(kIOMasterPortDefault, matchingDict, &iterator); 
```

您现在可以枚举您的设备。

```
while((removableMedia = IOteratorNext(iterator)))
{
    IORegistryEntryGetName(removableMedia, deviceName); 
    // and something else you can do   

    kr = IORegistryGetPath(removableMedia, kIOServicePlane, devicePath);
    // compare the path with path you get in device.
    // if one device's path is the substring of this media
    // we could simply think this media is belong to the device

    // you could get mount point by following code
    DASessionRef sessionRef = DASessionCreate(kCFAllocatorDefault);
    if (sessionRef) {
        DADiskRef diskRef - DADiskCreateFromIOMedia(kCFAllocatorDefault, sessionRef, removableMedia);
        if (diskRef) {
            CFDictionaryRef *diskProperty=DADisCopyDescription(diskRef);
            if (property) {
                NSURL *mountURL = [(NSDictionary*)property objectForKey:(NSString*)kDADiskDescriptionVolumePathKey];
                // mountURL or [mountURL path] is the mount point you want

                CFRelease(diskProperty);
            }
            CFRelease(diskRef);
        }
        CFRelease(sessionRef);
    }

    // don't forget to release
    IOObjectRelease(removableMedia);
} 
```

你可以像下面这样观察挂载/卸载事件

```
[[[NSWorkSpace sharedWorkspace] notificationCenter] addObsever:self selector:@selector(volumeMounted:) name:NSWorkspaceDidMountNotification object:nil];
[[[NSWorkSpace sharedWorkspace] notificationCenter] addObsever:self selector:@selector(volumeUnmounted:) name:NSWorkspaceDidUnmountNotification object:nil]; 
```

# apache-karaf - 无法在 Apache Karaf 中启动子实例

> ID：12951291
> 
> 赞同：1
> 
> 时间：2012-10-18T09:24:14.087
> 
> 标签：apache-karaf

在 Apache Karaf 2.3.0 中创建“实例”时可能会遇到问题。

```
karaf@root> admin:create FOO
...<some verbose lines on file copy activity>...
karaf@root> admin:list 
```

这就是我得到的：

```
 SSH Port   RMI Ports         State       Pid  Name
[    8101] [1099/44444     ] [Started ] [ 5168] root
[    8107] [1105/44450     ] [Stopped ] [    0] FOO
karaf@root> 
```

我试过`admin:start FOO`但没有任何反应。Karaf.log 没有指出任何错误。

我错过了什么吗？我正在关注 karaf.apache.org 上的“入门”指南。这可能是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:43:50.040

您需要启动新实例

管理员：启动 FOO

干杯

# node.js - 是否可以让 Heroku 使用 C++ BSON 解析器安装 mongodb NPM 包？

> ID：12951292
> 
> 赞同：5
> 
> 时间：2012-10-18T09:24:16.783
> 
> 标签：node.js, mongodb, heroku, npm, bson

在本地，我可以运行`npm install --mongodb:native`npm 来编译和安装 C++ BSON 解析器，但我无法在 Heroku 上复制相同的操作。

我尝试添加预安装命令`npm install mongodb --mongodb:native`，`package.json`但`npm`在 Heroku 环境中的路径上实际上不可用。

查看mongodb 包[的源代码](https://github.com/christkv/node-mongodb-native/blob/master/install.js)，它看起来像是在寻找一个环境变量（我猜是由 npm 基于命令行参数创建的）。也许有一种方法可以将其注入 Heroku 构建环境？

BSON（反）序列化正在成为我的应用程序的大型 CPU + 内存占用，而 C++ 解析器有助于缓解这种情况。

# ruby-on-rails - 返回 NoMethodError 的类方法：未定义的方法 Rails

> ID：12951298
> 
> 赞同：0
> 
> 时间：2012-10-18T09:24:29.950
> 
> 标签：ruby-on-rails, datamapper, ruby-datamapper

我正在编写一个类方法来在我的数据库中查找某些数据，但是我收到了 NoMethodError: undefined method 错误。我正在使用 Datamapper 而不是 ActiveRecord。这是我的错误输出：

```
NoMethodError: undefined method `get_courses_starting_in' for Course:Class
    from /Users/hugo/.rvm/gems/ruby-1.9.2-p318/gems/dm-ar-finders-1.2.0/lib/dm-ar-finders.rb:155:in `method_missing_with_find_by'
    from /Users/hugo/Web Development/Rails/connectedtrips/lib/ct_gems/dm-core-1.2.0/lib/dm-core/model/relationship.rb:372:in `method_missing'
    from /Users/hugo/Web Development/Rails/connectedtrips/lib/ct_gems/dm-core-1.2.0/lib/dm-core/model/property.rb:249:in `method_missing'
    from (irb):24
    from /Users/hugo/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
    from /Users/hugo/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
    from /Users/hugo/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

这是我的课堂方法：

```
def self.get_courses_starting_in
    courses = []
    Course.all.each{ |course| courses << course if course.days_till_course_starts == 7}
    return courses
  end 
```

我希望有人能帮帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:19:28.493

启动控制台后有没有写代码？重新启动控制台并再次检查。

# bash - 如何获取定时命令的返回类型？

> ID：12951301
> 
> 赞同：0
> 
> 时间：2012-10-18T09:24:39.387
> 
> 标签：bash

我正在尝试使用内置的 bash`time`来测量命令的执行需要多长时间。

问题是从定时命令中获取返回码。调查后

```
help time 
```

似乎时间总是返回 0 而不是执行命令的返回码。有没有办法获取定时命令的返回状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:26:23.567

`man time`给我：

> 如果程序正常退出，time的返回值就是它执行和测量的程序的返回值。否则，返回值为 128 加上导致程序停止或终止的信号编号。

注意有一个 shell-builtin`time`和一个`/usr/bin/time`

```
/usr/bin/time false
/usr/bin/time true 
```

给我适当的（1 和 0）错误代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:50:25.267

我检查`help time`并显示帮助消息`time`和`times`

为了`time`

```
Exit Status:
The return status is the return status of PIPELINE. 
```

为了`times`

```
Exit Status:
Always succeeds. 
```

有没有可能是你看错了？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:26:48.227

```
time lsa
-bash: lsa: command not found

real    0m0.001s
user    0m0.000s
sys 0m0.000s

echo $?
127

time ls
aa.aa

real    0m0.564s
user    0m0.000s
sys 0m0.001s

echo $?
0 
```

127如果失败

# cakephp - 型号组和顺序

> ID：12951302
> 
> 赞同：0
> 
> 时间：2012-10-18T09:24:48.400
> 
> 标签：cakephp, cakephp-2.0

我有订单模型，它通过字段 user_id 属于用户模型。现在我想为每个用户获得 1 个最旧的订单。例如：

```
id = 0, user_id = 1, created = 2012-10-10 20:36:42
id = 1, user_id = 1, created = 2012-10-10 19:36:42
id = 2, user_id = 1, created = 2012-10-10 21:36:42

id = 3, user_id = 2, created = 2012-10-10 22:36:42
id = 4, user_id = 2, created = 2012-10-10 21:36:42
id = 5, user_id = 2, created = 2012-10-10 23:36:42 
```

所以结果应该是：

```
id = 1, user_id = 1, created = 2012-10-10 19:36:42
id = 4, user_id = 2, created = 2012-10-10 21:36:42 
```

我现在使用以下查找选项：

```
array(
    'group' => 'user_id',
    'order' => array('MIN(created) DESC'),
) 
```

并尝试过`'order' => array('created DESC')`

但它不起作用 - 似乎 GROUPING 订单总是在 ORDERING 之前完成。如何在分组之前强制 find 方法按创建的字段对记录进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:04:01.813

您可以使用该`HAVING`子句来过滤组。要使用 CakePHP 构造查询，您需要在子句中包含`ORDER`子句。

```
$this->Order->find('all', array(
  'group' => 'user_id HAVING created = MIN(created)',
  'order' => array('created DESC')
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:13:01.793

我会使用 CakePHP 的[Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)：

```
//User model
public $actsAs = array('Containable');

public function oldestOrderPerUser() {
    $this->recursive = -1;

    $this->find('all', array(
        'contain' => array(
            'Order' => array(
                'order' => array('created asc'),
                'limit' => 1
            )
        )
    ));
} 
```

这会找到所有用户（随意添加“条件”以将其限制为特定用户，并为每个用户获取第一个/最旧的订单。

您返回的数据将如下所示：

```
0 => array(
    'User' => array(
        'id' => 1,
        'name' => 'John Doe',
        'email' => 'johndoe@awesome.com',
        'Order' => array(
            0 => array(
                'id' => '4',
                'user_id' => 1,
                'created' => '2012-10-10 19:36:42'
            )
        )
    )
1 => array(
    'User' => array(
        ... 
```

您可以限制每个用户和订单中返回的字段，设置任一/两者的条件，限制任一/两者...等。

我建议将`$this->recursive=-1;`AppModel 设置为默认值 - 如果这样做，则不必在每个查询之前或在每个模型中指定它......等等。无论如何，使用 -1 以外的任何东西都是不好的做法，所以......效果很好。

我也在`public $actsAs = array('Containable');`我的 AppModel 中设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:39:18.543

我现在无法测试它，但试试这种方式：

```
$this->Order->find('all', array(
  'fields' => array('MIN(Order.Created) as min_created'),
  'group' => 'user_id',
  'order' => array('min_created DESC')
)); 
```

# hadoop - hbase.HServerAddress：无法解析 slave1 的 DNS 名称：主机名不能为空

> ID：12951304
> 
> 赞同：1
> 
> 时间：2012-10-18T09:24:49.980
> 
> 标签：hadoop, tomcat7, hbase, java-7, apache-zookeeper

有谁知道为什么会出现这个错误？...该代码以前可以工作，但现在它不能在我的系统中工作，但可以在其他系统中成功工作。错误日志如下...请帮助我...

我认为可能有任何版本不兼容...但我不知道究竟是什么？...

```
 12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.3.1-942149, built on 05/07/2010 17:14 GMT
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:host.name=User-PC
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:java.version=1.7.0
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Oracle Corporation
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:java.home=C:\Program Files\Java\jdk1.7.0\jre
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:java.class.path=D:\apache-tomcat-7.0.30\bin\bootstrap.jar;D:\apache-tomcat-7.0.30\bin\tomcat-juli.jar
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:java.library.path=C:\Program Files\Java\jdk1.7.0\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\TortoiseSVN\bin;D:\apache-maven-3.0.4\bin;.
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=D:\apache-tomcat-7.0.30\temp
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:os.name=Windows 7
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:os.arch=x86
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:os.version=6.1
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:user.name=User
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:user.home=C:\Users\User
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Client environment:user.dir=D:\apache-tomcat-7.0.30\bin
    12/10/18 14:21:59 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.1.240:2222 sessionTimeout=180000 watcher=hconnection
    12/10/18 14:21:59 INFO zookeeper.ClientCnxn: Opening socket connection to server /192.168.1.240:2222
    12/10/18 14:22:00 INFO zookeeper.ClientCnxn: Socket connection established to JAI-3/192.168.1.240:2222, initiating session
    12/10/18 14:22:00 INFO zookeeper.ClientCnxn: Session establishment complete on server JAI-3/192.168.1.240:2222, sessionid = 0x13a6d1375aa0244, negotiated timeout = 40000
    12/10/18 14:22:02 ERROR hbase.HServerAddress: Could not resolve the DNS name of slave1
    java.lang.IllegalArgumentException: hostname can't be null
    Error while establishing connection to HBASE
        at java.net.InetSocketAddress.<init>(InetSocketAddress.java:139)
        at org.apache.hadoop.hbase.HServerAddress.getResolvedAddress(HServerAddress.java:108)
        at org.apache.hadoop.hbase.HServerAddress.<init>(HServerAddress.java:64)
        at org.apache.hadoop.hbase.MasterAddressTracker.getMasterAddress(MasterAddressTracker.java:63)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getMaster(HConnectionManager.java:354)
        at org.apache.hadoop.hbase.client.HBaseAdmin.<init>(HBaseAdmin.java:94)
        at com.wlu.orm.hbase.connection.HBaseConnection.<init>(HBaseConnection.java:28)
        at com.project.common.HBaseConnectionWrapper.<init>(HBaseConnectionWrapper.java:31)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:110)
        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

# android - 如何从资产文件夹中的 mp4 文件创建视频缩略图

> ID：12951306
> 
> 赞同：3
> 
> 时间：2012-10-18T09:24:51.570
> 
> 标签：android

我从资产文件夹中的 mp4 文件创建缩略图时遇到问题。尝试输入不同的资产路径但没有效果。我该如何解决？

那是我的一段适配器代码：

```
VideoEntry video = videos.get(position);
    holder.txtTitle.setText(video.getTitle());
    holder.imgIcon.setImageBitmap(ThumbnailUtils.createVideoThumbnail("file:///android_asset/videos/Core/Superman.mp4", Thumbnails.MICRO_KIND)); 
```

怎么了？

**解决方案：**

```
 AssetManager am = getAssets();
 InputStream ims = am.open("images/" + category + "/" + item.replace(" ", "_").replace(".mp4", ".png").toLowerCase());
 Drawable d = Drawable.createFromStream(ims, null);
 holder.imgIcon.setImageDrawable(d); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T09:38:55.517

`ThumbnailUtils.createVideoThumbnail()`只需从现有的缩略图中查询`MediaStore`或强制`MediaStore`创建它，如果它不存在。这意味着您不能为不适用于 的视频文件创建缩略图`MediaStore`，因为它是您的应用程序的资产，而不是 SD 卡上的实际文件。您可以将文件提取到 SD 卡中，或者只提供您自己在另一个应用程序中创建的缩略图。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-14T18:25:43.263

**这对我有用**

```
Bitmap getThumbnailOf(AssetFileDescriptor afd, int atTime) {
    Bitmap bitmap = null;
    MediaMetadataRetriever retriever = null;
    if (afd != null && afd.getFileDescriptor().valid()) try {
        retriever = new MediaMetadataRetriever();
        retriever.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O_MR1) {
            bitmap = retriever.getScaledFrameAtTime(atTime, MediaMetadataRetriever.OPTION_CLOSEST, 1280, 720);
        } else {
            bitmap = retriever.getFrameAtTime(atTime);
        }
        afd.close();
        retriever.release();
        Log.i("TAG", "getting bitmap process done");
    } catch (Exception e) {
        e.printStackTrace();
    }
    return bitmap;
} 
```

**通过将输入作为**

```
getThumbnailOf(getAssets().openFd("videos/Core/Superman.mp4"), 500000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:48:02.163

资产它是应用程序静态资源的文件夹。您可以手动为此视频创建缩略图，也可以将其放入资产中。

# iphone - 解析具有相同标签的 XML 文件

> ID：12951309
> 
> 赞同：1
> 
> 时间：2012-10-18T09:25:00.063
> 
> 标签：iphone, objective-c, ios, xml, xcode

我有一个需要解析的 XML 文件。我之前解析过一个 XML，但它更简单。因为这个文件有类似的标签，我不知道如何解析它。

xml 文件如下所示：

```
<resource classname="Quote">
<field name="name">USD/KRW</field>
<field name="price">1104.319946</field>
<field name="symbol">KRW=X</field>
<field name="ts">1350544190</field>
<field name="type">currency</field>
<field name="utctime">2012-10-18T07:09:50+0000</field>
<field name="volume">-56144</field>
</resource> 
```

我想获取价格字段并将其添加到数组中。我从一些在线示例中尝试了下面的代码，但它显示了所有字段的值，我只想要该`price`字段。

```
- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

    if ([[attributeDict objectForKey:@"name"] isEqualToString:@"price"])
    {

        currencyValuesString = [[NSMutableString alloc]init];
    }

}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementname isEqualToString:@"field"]) 
    {
        [currencyValuesArray addObject:currencyValuesString];
    }
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currencyValuesString = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:54:38.090

您的代码存在多个问题：

*   `currencyValuesString`你在输入标签时分配/初始化`<field name="price">`，但你永远不会释放它（如果你不使用 ARC，它会泄漏），更重要的是你不使用这个分配的实例，因为你用`-parser:foundCharacters:`你**替换**这个变量的值不同的字符串。
*   因此，先前分配`NSMutableString`的完全没有用。此外，如果您的字段包含多个文本块而不是一个（`<field name="price">1.234<b>€&lt;/b></field>`例如），`-parser:foundCharacters:`将被多次调用，但您的代码将始终丢弃前一个值并仅保留最后一个块而不是将它们添加到`NSMutableString`.
*   如果事实上，使用您的代码没有意义，`NSMutableString`因为您不将其用作可变字符串，而是每次将每个值替换为新值而不是附加它。

而且，每次遇到结束`</field>`标签时，无论这个标签是什么，您都会执行`[currencyValuesArray addObject:currencyValuesString];`但不释放`currencyValuesString`（仅当您使用 ARC 时这很好，但如果您使用手动引用计数会泄漏），更重要的是，您将添加**每次**遇到结束`</field>`标签时，无论开始标签是什么，都会将此字符串添加到数组`name`中。因此，您将价格添加到数组中的次数与`</field>`价格之后的结束标签一样多。

所以正确的方法是：

*   将 foundCharacters 附加到您的`NSMutableString`而不是替换它
*   当您遇到结束标签时，将价格添加到数组中，然后立即释放并将价格字符串设置回`nil`。这种方式`currencyValuesString`只会在`<field name="price">`开始标签和相应的`</field>`结束标签之间，而不是在解析其他`<field>`标签时
*   `currencyValuesString`如果不是，仅将价格添加到结束标记中的数组中`nil`

* * *

```
- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([[attributeDict objectForKey:@"name"] isEqualToString:@"price"])
    {
        currencyValuesString = [[NSMutableString alloc]init];
    }
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [currencyValuesString appendString:[string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementname isEqualToString:@"field"] && (currencyValuesString != nil)) 
    {
        [currencyValuesArray addObject:currencyValuesString];
        [currencyValuesString release]; // Only needed if not using ARC. Remove this line if you use ARC
        currencyValuesString = nil; // so that the next closing tag won't readd the price
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:54:17.997

试试这个 ：

在.h

NSXMLParser *rssParser;

NSDictionary *myAttrDict;

NSString *当前元素；

NSMutableArray *prizeArr;

以 .m 为单位：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"field"])
    {        
        if([[attributeDict objectForKey:@"name"] isEqualToString:@"price"])
        {
            currentElement = @"price";
        }
        else{
            currentElement = nil;
        }
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if([currentElement isEqualToString:@"price"])
    {
        [prizeArr addObject:string];
    }
    NSLog(@"prizeArr :%@",prizeArr);
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
    {
    }

- (void)parserDidEndDocument:(NSXMLParser *)parser
{
} 
```

# heroku - 在 Heroku Not Behave 上设计登录和注册自定义表单

> ID：12951313
> 
> 赞同：2
> 
> 时间：2012-10-18T09:25:09.470
> 
> 标签：heroku, devise, spree

所以在我的本地主机上，自定义设计表单效果很好！没有任何问题 - 当我从不同页面上的自定义表单登录时，它会登录用户并按预期重定向到主页。

但是，当我部署到 Heroku 时，应用程序停止运行 - 自定义表单将用户定向到实际登录页面，而无需登录。

这是我的 Heroku 日志上的输出：

```
2012-10-18T09:08:08+00:00 app[web.1]: Started POST "/user/sign_in" for 116.15.222.245 at 2012-10-18 09:08:08 +0000
2012-10-18T09:08:08+00:00 app[web.1]: cache: [POST /user/sign_in] invalidate, pass
2012-10-18T09:08:08+00:00 app[web.1]:   Processing by UserSessionsController#create as HTML
2012-10-18T09:08:08+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"4WDTRkX842UVz7nFuGbWbA3z47+rraKXQgl3PRYuWJY=", "user"=>{"email"=>"spree@example.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log In"}
2012-10-18T09:08:08+00:00 app[web.1]: Redirected to https://example.com/user/sign_in
2012-10-18T09:08:08+00:00 app[web.1]: Completed 302 Found in 11ms
2012-10-18T09:08:08+00:00 heroku[router]: POST example.com/user/sign_in dyno=web.1 queue=0 wait=0ms service=16ms status=302 bytes=101
2012-10-18T09:08:08+00:00 heroku[nginx]: 108.162.225.233 - - [18/Oct/2012:09:08:08 +0000] "POST /user/sign_in HTTP/1.1" 302 101 "http://example.com/referral_login" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:15.0) Gecko/20100101 Firefox/15.0.1" example.com
2012-10-18T09:08:10+00:00 app[web.1]: 
2012-10-18T09:08:10+00:00 app[web.1]: Started GET "/user/sign_in" for 116.15.222.245 at 2012-10-18 09:08:10 +0000
2012-10-18T09:08:10+00:00 app[web.1]: 
2012-10-18T09:08:10+00:00 heroku[router]: GET example.com/user/sign_in dyno=web.1 queue=0 wait=0ms service=16ms status=200 bytes=7835
2012-10-18T09:08:10+00:00 app[web.1]: cache: [GET /user/sign_in] miss
2012-10-18T09:08:10+00:00 app[web.1]:   Processing by UserSessionsController#new as HTML
2012-10-18T09:08:10+00:00 app[web.1]: Rendered shared/_error_messages.html.erb (0.1ms)
2012-10-18T09:08:10+00:00 app[web.1]: Rendered shared/_login.html.erb (2.3ms)
2012-10-18T09:08:10+00:00 app[web.1]: Rendered user_sessions/new.html.erb within layouts/spree_application (3.0ms)
2012-10-18T09:08:10+00:00 app[web.1]: Rendered shared/_head.html.erb (1.0ms)
2012-10-18T09:08:10+00:00 app[web.1]: Rendered shared/_store_menu.html.erb (0.7ms)
2012-10-18T09:08:10+00:00 app[web.1]: Rendered shared/_top_menu_bar.html.erb (0.5ms)
2012-10-18T09:08:10+00:00 heroku[nginx]: 108.162.225.233 - - [18/Oct/2012:09:08:10 +0000] "GET /user/sign_in HTTP/1.1" 200 3412 "http://example.com/referral_login" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:15.0) Gecko/20100101 Firefox/15.0.1" example.com 
```

这是我在本地主机上的输出：

```
Started POST "/user/sign_in" for 127.0.0.1 at 2012-10-18 17:21:36 +0800
  Processing by UserSessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"m38Y47hk4UyGYAMnd76y5Qo2nK1Nv//v7s2+XdNHCbU=", "user"=>{"email"=>"spree@example.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log In"}
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'spree@example.com' LIMIT 1
   (23.6ms)  SELECT COUNT(DISTINCT "users"."id") FROM "users" LEFT OUTER JOIN "roles_users" ON "roles_users"."user_id" = "users"."id" LEFT OUTER JOIN "roles" ON "roles"."id" = "roles_users"."role_id" WHERE "roles"."name" = 'admin'
   (0.5ms)  UPDATE "users" SET "last_sign_in_at" = '2012-10-18 05:56:54.897695', "current_sign_in_at" = '2012-10-18 09:21:39.033308', "sign_in_count" = 75, "updated_at" = '2012-10-18 09:21:39.081684' WHERE "users"."id" = 1
Redirected to http://localhost:3000/
Completed 302 Found in 227ms

Started GET "/" for 127.0.0.1 at 2012-10-18 17:21:39 +0800
  Processing by LandingController#index as HTML
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Rendered landing/index.html.erb within layouts/spree_application (1.7ms)
Rendered shared/_head.html.erb (2.0ms)
Rendered shared/_store_menu.html.erb (2.6ms)
Rendered shared/_top_menu_bar.html.erb (1.7ms)
  Tracker Load (0.3ms)  SELECT "trackers".* FROM "trackers" WHERE "trackers"."active" = 't' AND "trackers"."environment" = 'development' LIMIT 1
Rendered shared/_google_analytics.html.erb (14.1ms)
Completed 200 OK in 183ms (Views: 148.1ms | ActiveRecord: 1.9ms) 
```

任何人都可以帮助阐明为什么会这样以及如何解决这个问题？我浏览了 Devise wiki，做了一堆谷歌搜索并尝试了一些没有成功的事情。将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T19:42:25.890

Spree 在生产环境中默认需要 SSL，因此如果您的 POST 请求不是 https，它将重定向到登录页面。

# java - 使用 asyncTask 和线程获取数据

> ID：12951314
> 
> 赞同：0
> 
> 时间：2012-10-18T09:25:09.613
> 
> 标签：java, android, multithreading, rss, android-asynctask

我正在尝试从 RSS 提要中获取数据以将其显示在片段（11 个片段）中，但是每次我传递给一个新片段时，UI 都会阻塞几秒钟，因为它正在获取数据，所以我尝试使用 asyncTask 在后台执行此操作但似乎它不起作用。

```
public class AndroidSaxFeedParser extends AsyncTask<String, Long, ArrayList<Article>>{

String dt;
String bb;
String nameCat;
RootElement root;
Element item;

static final String RSS = "rss";
static final String FEED = "feed";
static final String ENTRY = "entry";
static final String CHANNEL = "channel";
static final String PUB_DATE = "pubDate";
static final  String DESCRIPTION = "description";
static final  String LINK = "link";
static final  String TITLE = "title";
static final  String ITEM = "item";
static final  String CATEGORY = "category";
static final  String DURATION = "itunes:duration";

ArrayList<Article> rssItems = new ArrayList<Article>();

public URL feedUrl;

Context mContext;

public AndroidSaxFeedParser(Context context)
{
    mContext = context;

}

//  ProgressDialog pd = new ProgressDialog(mContext);

@Override
protected void onPostExecute(ArrayList<Article> result) {
//      pd.dismiss();       
    super.onPostExecute(result);
}

@Override
protected void onPreExecute() {
//      ProgressDialog.show(mContext, "", "Chargement...");
    super.onPreExecute();
}

@Override
protected ArrayList<Article> doInBackground(String... params) {

    try {
        feedUrl = new URL(params[0]);
    } catch (MalformedURLException e1) {
        e1.printStackTrace();
    }

    final Article currentRssItem = new Article();
    root = new RootElement(RSS);
    Element channel = root.getChild(CHANNEL);
    item = channel.getChild(ITEM);

    item.getChild(TITLE).setEndTextElementListener(new EndTextElementListener(){
        public void end(String body) {
            currentRssItem.setTitle(body); 
            Log.i("Title Article", " "+currentRssItem.getTitle());
        }
    });

    item.getChild(CATEGORY).setEndTextElementListener(new EndTextElementListener(){
        public void end(String body) {
            currentRssItem.setCategorie(body);
            Log.i("Category Article", " "+currentRssItem.getCategorie());
        }
    });

    item.getChild(DESCRIPTION).setEndTextElementListener(new EndTextElementListener(){
        public void end(String body) {
            String imgUrl, desc;
            try {imgUrl = body.substring(body.indexOf("src=")+5,body.indexOf("\"", body.indexOf("src=")+6));} 
            catch (Exception e) 
            {imgUrl = "";}
            try {desc=body;} 
            catch (Exception e) 
            { desc = "";}
            currentRssItem.setImageUrl(imgUrl);
            currentRssItem.setDescription(desc);

            Log.i("Image URL Article", " "+currentRssItem.getImageUrl());
            Log.i("Description Article", " "+currentRssItem.getDescription());
        }
    });

    item.getChild(PUB_DATE).setEndTextElementListener(new EndTextElementListener(){
        public void end(String body) {
            currentRssItem.setPubDate(body);
            Log.i("Date Article", " "+currentRssItem.getPubDate());
        }
    });

    item.setEndElementListener(new EndElementListener(){
        public void end() {
            rssItems.add(currentRssItem.copy());
        }
    });
    try {
        Xml.parse(feedUrl.openConnection().getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
    } catch (IOException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    }   
    return rssItems;
} 
```

我在每个片段中都这样称呼它

```
ArrayList<Article> feeds ;
    try {
        feeds=AndroidSaxFeedParser.execute(url).get();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:49:50.523

`String`在要求`XML`类解析它之前，您应该始终下载该文件并将其另存为。

```
public String getXml(String url) {
HttpGet request = new HttpGet(url);
HttpResponse response = client.execute(request);

// HTTP OK 200
if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
    HttpEntity entity = response.getEntity();
    // NOTE: Here need to set the default charset to be UTF-8
    content = EntityUtils.toString(entity, "UTF-8");
    return content;
}
} catch (IOException e) {
    e.printStackTrace();
} catch (IllegalStateException e) {
    content = null;
}
} 
```

这样就不太可能因为连接问题而中断。另外，请告诉我们更多关于“似乎它不起作用”的含义。是解析xml失败，运行任务失败，还是失败了什么？

另外，你不应该打电话

`feeds=AndroidSaxFeedParser.execute(url).get();`

在你的片段中。你应该修改你的这个功能`AndroidSaxFeedParser`：

```
@Override
protected void onPostExecute(ArrayList<Article> result) {
    feeds = result;
    // Do whatever you wanna do to set up things with the feeds
} 
```

要完成这项工作，您必须将您的`AndroidSaxFeedParser`作为片段的内部类。

# c# - 弹出控件在触发事件时关闭

> ID：12951315
> 
> 赞同：0
> 
> 时间：2012-10-18T09:25:12.113
> 
> 标签：c#, winforms, popup, devexpress

我有两个控件。首先是评论控件，它允许用户创建、更新和删除评论。它有自己的带有添加、安全、删除按钮的菜单栏。如果有人想在他的表单中添加这个控件，它可能会很大。所以我有第二个控件，它只是一个带有 PopupControl 的 PopupContainerEdit。在弹出控件中，我添加了注释控件。所以我有一个popupcommentcontrol，如果有人想在他的表单中添加它，他只需要一个popupcontaineredit 的小按钮的地方。

我的问题是，如果我在评论控件中更改评论者列表（保存、删除），我会触发一个事件，以便弹出窗口可以检查列表的更改。所以 Popupcontrol 知道是否有评论，我可以交换按钮的图标。最终用户直接在按钮的图标上看到是否有评论。但是，如果我触发事件以告诉我的弹出窗口“嘿，列表更改”，则弹出窗口将关闭。

如果我触发事件，是否有可能停止关闭？

问候

# java - Tomcat 7 未在浏览器上运行 (http://localhost:8080/ )

> ID：12951317
> 
> 赞同：10
> 
> 时间：2012-10-18T09:25:20.437
> 
> 标签：java, apache, tomcat

实际上，在 Eclipse 上运行的 apache-tomcat 7 服务器。但在浏览器中出现错误“请求的资源不可用。” .任何原因请..？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T09:58:45.457

当你独立启动tomcat并输入`[http://localhost:8080/](http://localhost:8080/)`时，tomcat会显示它的默认页面（tomcat的默认页面位于`TOMCAT_ROOT_DIRECTORY\webapps\ROOT\index.jsp`）。

当您从 eclipse 启动 tomcat 时，eclipse 没有任何默认的 url 页面，`[http://localhost:8080/](http://localhost:8080/)`因此它会显示错误消息。这并不意味着 tomcat7 没有运行。当您输入项目特定的 url时，`[http://localhost:8080/PROJECT_NAME_YOU_HAVE_CREATE_USING_ECLIPSE](http://localhost:8080/PROJECT_NAME_YOU_HAVE_CREATE_USING_ECLIPSE)`将显示您的 web 项目的默认页面。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-13T06:39:55.113

我有同样的问题，对我来说，我尝试更改选项

*   服务器位置

    它奏效了。

    1.  双击 Eclipse 服务器选项卡下的 Tomcat 服务器
    2.  这样做会在编辑器中打开一个窗口，顶部标题为“概览”（有 2 个选项卡 - 概览和模块）。
    3.  在那更改服务器位置下的选项，并给出 Ctrl+S（保存配置）对我来说，**使用 Tomcat 安装（控制 Tomcat 安装）**有效
    4.  尝试启动服务器并检查 localhost 是否在浏览器中打开。否则选择不同的选项。

我不明白为什么会出现这个问题。我进行了搜索，但没有找到相关答案（也许我没有使用正确的关键字）。如果有人知道**为什么会这样**，请分享。

谢谢。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-18T09:30:07.110

可能有很多原因，将其作为清单并仔细检查

您的服务器是否在 8080 上运行？我的意思是这是默认端口，但它可以配置为在其他端口上运行。

此外，默认应用程序有可能被删除/卸载，这就是它给出“请求的资源不可用”的原因

也可能是代理问题。确保您没有在浏览器中使用任何代理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-30T04:56:33.550

1）转到服务器选项卡2）在服务器上右键->常规->单击切换位置。3）双击服务器->在服务器位置下->选择tomcat安装。4) 重启服务器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T09:31:42.097

它将是您浏览器的代理配置。在网络设置中，使用`no proxy`

对于`Manual proxy configuration`添加异常（在 Firefox 中没有代理），如`localhost:8080, localhost`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-20T04:55:18.287

在测试 tomcat 服务器启动时，您可能会遇到两个错误。

1.  **Eclipse 内置浏览器出错**- 无法显示此页面 在高级设置中打开 TLS 1.0、TLS 1.1 和 TLS 1.2 并尝试再次连接到[https://localhost:8080](https://localhost:8080) 。如果此错误仍然存​​在，则该站点可能使用了不受支持的协议。请联系网站管理员。
2.  **在普通浏览器中**出现 404 错误。****

 ****修复 -**

1.  对于 eclipse 浏览器错误，请检查您是否使用安全 URL - [https://localhost:8080](https://localhost:8080)。这应该是[http://localhost:8080](http://localhost:8080)
2.  对于 404 错误：在控制台中转到 Tomcat 服务器。右键单击，选择属性。在属性窗口中，单击“切换位置”，然后单击“确定”。然后，在控制台中转到 Tomcat 服务器，双击它，在“服务器位置”下选择“使用 Tomcat 安装”单选按钮。保存。

选择此选项的原因是，当默认选项作为 eclipse 位置给出时，我们会看到 404 错误，因为它会更改 Catalina 参数（有时）。但是，如果我们将其更改为 Tomcat 位置，它就可以正常工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-28T15:53:54.773

有时另一个软件可能会抓住这个门，这可能是导致此冲突的原因，请尝试更改 server.xml 上的门。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-06T10:36:03.010

双击 Eclipse 中 Servers 选项卡下的 Tomcat Server 这样做会在编辑器中打开一个窗口，顶部标题为 Overview opens（有 2 个选项卡-Overview 和 Modules）。在那更改服务器位置下的选项，然后 g

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-20T01:23:37.850

您可以运行以下命令。

```
 ./catalina.sh run 
```

**注意**：确保端口 8080 已打开。如果没有，请使用 8080 端口杀死正在使用的进程`sudo kill -9 $(sudo lsof -t -i:8080)`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-07-30T15:44:25.243

我们中的许多人在第一次设置 Eclipse 和服务器后都会遇到这个错误。这个解决方案是 -

> 1.  转到**服务器选项卡**
>     
>     
> 2.  选择您各自服务器的**属性选项**并展开它
>     
>     
> 3.  在属性窗口中，选择**常规**选项卡->单击**切换位置**->单击**应用** ->单击**确定**。

这可能会奏效。**

# mysql - MySQL LEFT JOIN 语法错误

> ID：12951320
> 
> 赞同：1
> 
> 时间：2012-10-18T09:25:27.190
> 
> 标签：mysql, sql, syntax, left-join

快速提问，只是想知道是否有人可以看到语法错误在`LEFT JOIN`哪里？

```
SELECT
...
FROM table1 AS t1, table2 AS t2, table3 AS s3
table4 AS t4, table5 AS t5 LEFT JOIN table6 AS t6 ON t5.id = t6.t5_id
AND t6.etc
ORDER BY ... 
```

我只能假设它不喜欢`t1,t2,t3,t4`前面`LEFT JOIN`的`t5 & t6`

错误描述

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'table4 AS t4, table5 AS t5  LEFT JOIN table6 AS t6 ON ON t5.id = t6' at line 26* 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:27:23.577

你后面没有逗号“，”`table3 as s3`

```
table3 as s3, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:27:19.873

在 table3 AS s3 后面加逗号

```
table3 AS s3, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:43:08.360

```
SELECT * FROM t1 LEFT JOIN (t2, t3, t4)
                 ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:29:30.837

查询应该是这样的，你错过了附近的逗号`table3 AS s3,`

```
SELECT
...
FROM table1 AS t1, table2 AS t2, table3 AS s3,
table4 AS t4, table5 AS t5 LEFT JOIN table6 AS t6 ON t5.id = t6.t5_id
AND t6.etc
ORDER BY ... 
```

如果错了请纠正我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T09:33:31.327

如前所述，在“table3 AS s3”之后加一个逗号：

```
table3 AS s3, 
```

以及完成表达式“AND t6.etc”，例如：

```
AND t6.etc = 1 
```

或使用 WHERE 子句，例如：

```
WHERE t6.etc = 1 
```

HTH (Y)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T09:39:33.460

请参考以下博客，附上您的问题答案和语法示例： [这里](http://mssql-mysql.blogspot.in)

# javascript - Javascript表单验证onSubmit未触发

> ID：12951324
> 
> 赞同：0
> 
> 时间：2012-10-18T09:25:43.480
> 
> 标签：javascript, forms, validation

请有人帮忙。这个表单验证没有触发..这真的让我很沮丧。我是一名 PHP 开发人员而不是 JS，所以我在这方面有点挣扎，尽管这显然很简单。我只是想根据选中的删除框来验证表单。

单击提交时没有任何显示。它只是提交表单，所以它必须返回 true。

```
function deleteVal(chk) {

    var chk;

    // If the checkbox has been set to delete
    if (chk.checked == "delete") {

        var ok=confirm("You are about to delete the selected images below.\nAre you sure you want to do this?");

        if (ok) {

            // Submit
            return true;

        } else {

            // Don't submit
            return false;

        }

    }

    // Delete box was not ticked so return true and submit form
    return true;

}

</script>

<form action="" method="POST" onSubmit="return deleteVal(delete)">
  <label>Delete images?</label><input type="checkbox" name="delete" value="delete" />
  <input type="submit" name="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:41:49.217

您需要`checked`像这样正确获取值，看看它是真还是假。

```
var chk = document.getElementById('delete');

// If the checkbox is checked
if (chk.checked == true) { 
```

然后您不需要将变量传递给函数，但是，您确实需要为您的复选框提供一个 id。

```
<form action="" method="POST" onSubmit="return deleteVal();">
  <input type="checkbox" name="delete" id="delete"/>
  <input type="submit" name="submit" value="Submit" />
</form> 
```

测试代码 - [http://pastebin.com/FdWdeSCN](http://pastebin.com/FdWdeSCN)

# objective-c - Objective-C 为什么有些鼠标事件会触发而有些则不会

> ID：12951326
> 
> 赞同：1
> 
> 时间：2012-10-18T09:25:45.087
> 
> 标签：objective-c, macos, mouseevent

到目前为止，我的 View 控制器工作正常，除了一件事：我有几个 MouseEvents 和一些火，而另一些则没有。

```
- (void)mouseWasHeld: (NSTimer *)tim {
    **// this works not**
}

- (void) mouseMoved:(NSEvent*)someEvent {
    **// this works not**
}

-(void)mouseDown:(NSEvent *)event {
    // this works
}

-(void)mouseDragged:(NSEvent *)event {
    // this works
}

-(void)mouseUp:(NSEvent *)event {
// this works
} 
```

我不明白为什么两个事件没有触发任何线索？

非常感谢罗纳德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:40:30.763

1.  `mouseWasHeld:`似乎是其他任何地方的计时器设置的回调。在您的代码中查找`@selector(mouseWasHeld:)`并找出未安排计时器的原因。
2.  `mouseMoved:`仅[在](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/EventOverview/MouseTrackingEvents/MouseTrackingEvents.html)使用`-[NSWindow setAcceptsMouseMovedEvents:]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:32:44.730

`mouseMoved:`除非您添加跟踪区域，否则不会调用。

```
 NSTrackingAreaOptions options = NSTrackingMouseEnteredAndExited | NSTrackingActiveAlways;
 NSTrackingArea *trackingArea = [[NSTrackingArea alloc] initWithRect:self.frame options:options owner:self userInfo:nil];
 [self addTrackingArea:trackingArea]; 
```

# windows - Inno Setup - 检查文件是否存在于目标中，否则是否不中止安装

> ID：12951327
> 
> 赞同：17
> 
> 时间：2012-10-18T09:25:48.453
> 
> 标签：windows, installation, inno-setup

我需要我的安装程序检查目标位置是否存在文件，如果不存在，则安装中止。我的项目是一个更新补丁，所以如果应用程序的主 exe 不在目标位置，我希望安装程序避免安装更新文件。我怎样才能做到这一点？

有人可以举一个代码示例来通过 Windows 注册表检查文件版本吗？

```
[Files]
Source C:\filename.exe; DestDir {app}; Flags: ignoreversion; BeforeInstall: CheckForFile;

[code]

procedure CheckForFile(): Boolean;
begin
  if (FileExists('c:\somefile.exe')) then
  begin
    MsgBox('File exists, install continues', mbInformation, MB_OK);
    Result := True;
  end
  else
  begin
    MsgBox('File does not exist, install stops', mbCriticalError, MB_OK);
    Result := False;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-19T05:47:19.803

只是不要让用户继续，直到他们选择正确的文件夹。

```
function NextButtonClick(PageId: Integer): Boolean;
begin
    Result := True;
    if (PageId = wpSelectDir) and not FileExists(ExpandConstant('{app}\yourapp.exe')) then begin
        MsgBox('YourApp does not seem to be installed in that folder.  Please select the correct folder.', mbError, MB_OK);
        Result := False;
        exit;
    end;
end; 
```

当然，尝试自动为他们选择正确的文件夹也是一个好主意，例如。通过从注册表中检索正确的位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-18T20:27:01.773

另一种解决方案是[`InitializeSetup()`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptevents&anchor=InitializeSetup)：

学分：[曼弗雷德](http://news.jrsoftware.org/read/article.php?id=104196&group=jrsoftware.innosetup#104196)

```
[code]
   function InitializeSetup(): Boolean;
   begin
     if (FileExists(ExpandConstant('{pf}\{#MyAppName}\somefile.exe'))) then
     begin
       MsgBox('Installation validated', mbInformation, MB_OK);
       Result := True;
     end
     else
     begin
       MsgBox('Abort installation', mbCriticalError, MB_OK);
       Result := False;
     end;
   end; 
```

# mysql - MySQL - TIMESTAMP 字段类型自动转换为 UTC？

> ID：12951329
> 
> 赞同：4
> 
> 时间：2012-10-18T09:26:02.273
> 
> 标签：mysql

TIMESTAMP 字段类型与时区相关的行为是什么？

是否有任何时间戳值按原样插入到该字段中？

或者它是否假设插入的时间戳值的时区是服务器本地时间并将其转换为 UTC？

编辑：

这是我的测试

*   我同时运行了 PHP date() 和 MySQL 的 SELECT NOW()，它们输出的时间戳大致相同。两者的结果都不是UTC时间。

*   我尝试通过从 PHP date() 获取的 TIMESTAMP 字段的值插入到测试表中

*   PHP date() 中的值应该已经转换为 UTC。但是，我在数据库中看到的不是 UTC。TIMESTAMP 字段的值按原样插入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:29:33.143

TIMESTAMP 值始终保存为 UTC。

MySQL 将 TIMESTAMP 从当前时区转换为 UTC 进行存储，然后从 UTC 转换回当前时区进行检索。

默认时区将是服务器时区，可以在连接上设置。看到[这个](http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html)。

有关更多详细信息，请参阅[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)

我可以通过一个例子来解释这一点。请在 mysql 控制台中执行查询：

```
mysql> CREATE TABLE `testtable` (
         `date_timestamp` TIMESTAMP NOT NULL,
         `date_datetime` DATETIME NOT NULL
       )
       ENGINE = InnoDB;
Query OK, 0 rows affected (0.06 sec)

mysql> SET time_zone = '+00:00';
Query OK, 0 rows affected (0.00 sec)

mysql> insert into testtable values(now(),now());
Query OK, 1 row affected (0.03 sec)

mysql> select * from testtable;
+---------------------+---------------------+
| date_timestamp      | date_datetime       |
+---------------------+---------------------+
| 2012-10-19 05:01:38 | 2012-10-19 05:01:38 |
+---------------------+---------------------+
1 row in set (0.00 sec)

mysql> SET time_zone = '+05:30';
Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> insert into testtable values(now(),now());
Query OK, 1 row affected (0.03 sec)

mysql> select * from testtable;
+---------------------+---------------------+
| date_timestamp      | date_datetime       |
+---------------------+---------------------+
| 2012-10-19 10:31:38 | 2012-10-19 05:01:38 |
| 2012-10-19 10:31:47 | 2012-10-19 10:31:47 |
+---------------------+---------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-18T09:39:49.937

TIMESTAMPT 值按原样插入。

# msbuild - TeamCity MSBuild 指的是构建计数器

> ID：12951331
> 
> 赞同：1
> 
> 时间：2012-10-18T09:26:09.617
> 
> 标签：msbuild, continuous-integration, version, teamcity

我有一个属性组，其中包含 build_number 的属性，该属性是从 TeamCity 传入的，仅作为构建计数器。在 TeamCity 中将内部版本号格式设置为计数器的简单 {0}。

```
<PropertyGroup>
  <Major>10</Major>
  <Minor>1</Minor>
  <Build>$(BUILD_NUMBER)</Build>
  <Release>0</Release>
   ...
</PropertyGroup> 
```

然后根据源代码管理中文件中的值更新 Major、Minor 和 Release 属性。

为了让 TeamCity 将构建记录为完整的 4 部分构建参考（不仅仅是计数器），我将其设置为：

```
<TeamCitySetBuildNumber BuildNumber="$(Major).$(Minor).$(Build).$(Release)" /> 
```

但是，现在当我引用我的 $(Build) 属性时，它现在设置为 4 部分构建引用，并且在使用 TeamCitySetBuildNumber 设置之前我所做的任何引用 $(BUILD_NUMBER) 的属性也会被 4 部分引用覆盖.

注意，我还使用系统消息对其进行了更改：

```
<Message Text="##teamcity[buildNumber '$(Major).$(Minor).$(Build).$(Release)']" /> 
```

但整体效果是一样的。

在我设置了上面的 BuildNumber 之后，我如何才能参考构建计数器（仅）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:05:34.733

如果您使用的是项目文件，您可以尝试在 *.vbproj 或 *.csproj 文件的 AfterBuild 部分调用 TeamCitySetBuildNumber 命令：

```
<Target Name="AfterBuild">
    <TeamCitySetBuildNumber BuildNumber="$(Major).$(Minor).$(Build).$(Release)" />
</Target> 
```

如果您使用的是解决方案文件，我会创建一个 *.proj 文件来调用您的解决方案文件，然后调用 TeamCitySetBuildNumber 命令（不确定您是否可以像这样在目标中调用 TeamCitySetBuildNumber 命令... ):

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="SetBuildNumber">

<PropertyGroup>
  <Major>10</Major>
  <Minor>1</Minor>
  <Build>$(BUILD_NUMBER)</Build>
  <Release>0</Release> 
</PropertyGroup>

  <Target Name="Build">
    <Message Text="Build task called... " Importance="high"/>
    <MSBuild Projects="$(teamcity_build_checkoutDir)\your_solution.sln" Properties="Configuration=Release"/>
  </Target>

  <Target Name="SetBuildNumber" DependsOnTargets="Build">
    <Message Text="Setting build number back to TeamCity... " Importance="high"/>
    <TeamCitySetBuildNumber BuildNumber="$(Major).$(Minor).$(Build).$(Release)" />
  </Target>

</Project> 
```

# objective-c - 在委托方法中获取值而不是在该方法之外

> ID：12951332
> 
> 赞同：0
> 
> 时间：2012-10-18T09:26:21.997
> 
> 标签：objective-c, mapkit

```
-(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{

    //[_mapview setMapType:MKMapTypeStandard];
    CLLocationCoordinate2D center = _mapview.centerCoordinate;
    double lat = center.latitude;
    double lng = center.longitude;
    NSString *str = [NSString stringWithFormat:@"%f",lat];
    NSString *str1 = [NSString stringWithFormat:@"%f",lng];
    _newlat = str;
    _newlong=str1;

    NSLog(@"%@ %@",_newlat,_newlong);
} 
```

我在这个方面得到了很长的纬度值，但在这个委托方法之外没有。当我跳到上一课时，我想要上一课中的这个值。

我确实声明了委托，但每次我拖动地图时它都会被调用，并且我没有在上一课中获得价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:10:36.200

据我了解，您需要设置观察坐标的观察者对象，并在新坐标到来时得到通知。

在您的 CLLocationManagerDelegate 类 .m

```
-(void) setLocationObserver:(id) observer
{
   self.locationObserver = observer
}

-(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{

    //[_mapview setMapType:MKMapTypeStandard];
    CLLocationCoordinate2D center = _mapview.centerCoordinate;
    double lat = center.latitude;
    double lng = center.longitude;
    NSString *str = [NSString stringWithFormat:@"%f",lat];
    NSString *str1 = [NSString stringWithFormat:@"%f",lng];
    _newlat = str;
    _newlong=str1;

    if ([self.locationObserver respondsToSelector:@selector(setNewCoords:)
        [self.locationObserver setNewCoords:center];

    NSLog(@"%@ %@",_newlat,_newlong);
} 
```

在你以前的课.m中：

```
-(void)-(void) setNewCoords:(CLLocationCoordinate2D*) location
{
    self.myLocation = location;
    [self doSeomethingWithNewLocation]; // if you wish
}

-(void) doSomethingWithNewLocation
{
    NSString * _newlat = [NSString stringWithFormat:@"%f",self.myLocation.latitude];
    NSString * _newlong = [NSString stringWithFormat:@"%f",self.myLocation.longitude];
} 
```

粗略的例子，但可能会有所帮助。

# python - CSV文件到Python中的JSON文件

> ID：12951337
> 
> 赞同：2
> 
> 时间：2012-10-18T09:26:31.027
> 
> 标签：python, json, csv

我在这里和其他地方阅读了很多帖子，但我似乎无法找到解决方案。而且我不想在线转换它。

我想使用我在[这里找到的代码将](http://johntron.com/creations/csv-to-json/)[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)文件转换为[JSON](http://en.wikipedia.org/wiki/JSON)文件（没有嵌套，即使我将来可能需要它）：

```
import csv
import json

f = open( 'sample.csv', 'r' )
reader = csv.DictReader( f, fieldnames = ( "id","name","lat","lng" ) )
out = json.dumps( [ row for row in reader ] )
print out 
```

很棒，很简单，而且很有效。但是我没有得到一个 .csv 文件，而是一个文本输出，如果我复制和粘贴，它是一长行。

我需要一个可读的 .json 并且最好保存到 .json 文件中。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:32:18.397

要获得更具可读性的 JSON，请尝试以下`indent`参数`dumps()`：

```
print json.dumps(..., indent=4) 
```

但是 - 为了看起来更像原始 CSV 文件，您可能想要分别编码每一行，然后使用 JSON 数组语法将它们全部连接起来：

```
out = "[\n\t" + ",\n\t".join([json.dumps(row) for row in reader]) + "\n]" 
```

那应该给你类似的东西：

```
[
    {"id": 1, "name": "foo", ...},
    {"id": 2, "name": "bar", ...},
    ...
] 
```

如果您需要帮助将结果写入文件，请尝试[本教程](http://anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/files.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T13:50:36.143

如果您想要更易读的 JSON 文件格式，请像这样使用它：

```
json.dump(output_value, open('filename','w'), indent=4, sort_keys=False) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-12T20:26:46.510

这是一个完整的脚本。此脚本使用第一行的逗号分隔值作为 JSON 输出的键。输出 JSON 文件将使用与输入 CSV 文件名相同的文件名自动创建或覆盖，只是将 .csv 文件扩展名替换为 .json。

CSV 文件示例：

```
id,longitude,latitude
1,32.774,-124.401
2,32.748,-124.424
4,32.800,-124.427
5,32.771,-124.433 
```

Python脚本：

```
csvfile = open('sample.csv', 'r')
jsonfile = open('sample.csv'.replace('.csv', '.json'), 'w')

jsonfile.write('{"' + 'sample.csv'.replace('.csv', '') + '": [\n') # Write JSON parent of data list
fieldnames = csvfile.readline().replace('\n','').split(',')        # Get fieldnames from first line of csv
num_lines = sum(1 for line in open('sample.csv')) - 1              # Count total lines in csv minus header row

reader = csv.DictReader(csvfile, fieldnames)
i = 0
for row in reader:
  i += 1
  json.dump(row, jsonfile)
  if i < num_lines:
    jsonfile.write(',')
  jsonfile.write('\n')
jsonfile.write(']}') 
```

# objective-c - 如何在 Objective-C 中关闭文件

> ID：12951338
> 
> 赞同：0
> 
> 时间：2012-10-18T09:26:30.947
> 
> 标签：objective-c, file

我正在尝试将一些数据存储在文件中。我在第一次迭代时打开文件，然后添加信息。但是，当算法结束时，文件大小是 5kbs，它必须是 2,5 Mbs。

```
if (!isopen)
{
    NSArray *paths;
    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    // Check DD
    if ([paths count] > 0)
    {
        NSLog(@"Found a path");
        fichero2 = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"out2.raw"];

        NSLog(@"path %@",fichero2);
    } else {
        //d'oh, something went really wrong
        NSLog(@"ERROR: could not open %s\n", "out.raw");
        return -1;
    }
    isopen = 1;
}
else 
{   
    // Write file
    NSMutableData *data = [NSMutableData dataWithLength:1152*2];
    [data appendBytes:((SInt16 *)[audioProcessor audioBuffer].mData) length:1152*2];
    [data writeToFile:fichero2 atomically:YES]; 
} 
```

真的需要关闭文件吗？它会自动关闭吗？那么，为什么不存储数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:33:41.960

我认为您正在创建一个新的 NSData 每个循环，

应该超出迭代的范围，不是吗？

```
 NSMutableData *data = [NSMutableData dataWithLength:1152*2]; 
```

那么对于

```
 [data appendBytes:((SInt16 *)[audioProcessor audioBuffer].mData) length:1152*2];
      [data writeToFile:fichero2 atomically:YES]; 
```

# git - 提交确定，但同步将所有内容恢复到以前的状态

> ID：12951339
> 
> 赞同：0
> 
> 时间：2012-10-18T09:26:36.440
> 
> 标签：git, sync, github-for-mac

今天早上我用 github for mac。在本地提交了大量更改，工作正常。然后尝试同步出现问题的地方
我未同步的提交不再显示在列表中，但是在线存储库没有更新，我的本地文件已恢复到以前的在线存储库的状态

我只是简单地点击一下就可以放松几天的工作吗？或者我可以真正恢复我所做的，因为本地提交有效！但它看起来像消失了，它没有出现在软件的任何地方

就像我所做的所有工作从未发生过，消失了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:38:38.887

我不认为你失去了所有的工作。如果你在本地提交，你的工作应该保留在 git repo 中。请参考[`git log`](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)命令。尝试类似的东西

```
git log --full-history 
```

或者

```
git log --sparse 
```

如果你找到了 SHA1 ID，你可以尝试 git cherry-pick 来获取这个提交并将它放在你的实际状态之上。

# jquery - 带有 MVC 的 jQuery.post

> ID：12951344
> 
> 赞同：0
> 
> 时间：2012-10-18T09:26:53.120
> 
> 标签：jquery, asp.net-mvc, post

我有一个`jQuery.post()`语法问题。

我有控制器`ExampleController.cs`，有一个动作：

```
public ActionResult TestPost(Guid fileId) { //do something } 
```

和视图`Example.cshtml`，在这里我尝试加载这个动作：

```
function foo(fileGuid) {      
    $.post("Example/TestPost?fileId=" + fileGuid, function () {
        alert("success");
    });
} 
```

但是没有警报，我认为这种语法有问题。谁能帮我吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:30:04.487

尝试添加以下 3 个回调，看看是否收到错误警报，

```
var jqxhr = $.post("example.php", function() {
   alert("success");
})
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:33:14.677

您还应该检查 Chrome 控制台中的网络选项，看看服务器端是否有任何错误。这也可能是功能可能失败的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:36:03.890

我认为您需要在您的位置添加反斜杠：

```
$.post("/Example... 
```

如果这不起作用，请尝试使用 post annotation 注释您的方法：

```
[HttpPost]
public ActionResult TestPost(Guid fileId) { //do something } 
```

**编辑：**

它没有找到您的操作，因为您将参数指定为 Guid。如果将其更改为字符串：

```
 public ActionResult TestPost(string fileId)
 {
       return View();
 } 
```

并运行：

```
$.post('/Example/TestPost?fileId=123', function () {
  alert('here');
}); 
```

它应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:00:26.127

好的，我找到了这种方式：

```
$.post('@Url.Action("TestPost", "Example")', {fileId : fileGuid} , function () {
        alert("success");
    }); 
```

它有效。:)

# .net - 如何在 .NET 4.5 上使用 .NET 4.0 应用程序？

> ID：12951345
> 
> 赞同：3
> 
> 时间：2012-10-18T09:26:55.970
> 
> 标签：.net, wpf, .net-4.0

我是依赖 .NET 4.0 中的 WPF 的程序的最终用户。安装 .NET 4.5 会导致 CAD 崩溃，但我真的很想使用 Visual Studio 2012。

有没有办法在拥有 .NET 4.5 的同时保持与依赖 .NET 4.0 的应用程序的兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:16:02.097

事实上 .NET 4.5 更新了您现有的 .NET 4.0 安装，因此您将无法单独安装它们。.NET 人员打算让 .NET 4.5 不破坏任何 .NET 4 应用程序，并针对出现问题的情况实施修复（即使是现在，在 .NET 4.5 发布之后）。

检查您是否安装了最近的更新以提高兼容性 ( [http://support.microsoft.com/kb/2748645](http://support.microsoft.com/kb/2748645) )。如果这不能修复您的应用，请将问题报告给*netfx45compat@microsoft.com*。

总而言之 - 除非供应商或 Microsoft 提供帮助，否则您无能为力。.NET 4.5 中有一些方法可以提高与 .NET 4 的向后兼容性，Microsoft 似乎热衷于在持续更新中解决这些问题，因此请务必向他们报告您的情况。

[这里](http://blogs.msdn.com/b/dotnet/archive/2012/10/17/net-framework-4-5-off-to-a-great-start.aspx)有更多关于 .NET 4.5 推出的详细信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T09:30:43.990

您需要同时安装 .Net 4.0*和*4.5。

编辑：显然不是。对于以前的版本，这是正确的（例如 3.5 和 4），但对于 4 和 4.5 似乎不是。

但是 4.5 确实有一些更改，可能会影响 4.0 应用程序，导致它们崩溃。您应该联系应用程序供应商以获取更新。如果失败了，你可以尝试在 XP 兼容模式下运行它。

# linux - Linux - Kickstart 停止并显示有关哪个网络设备的对话框 - 如何避免

> ID：12951347
> 
> 赞同：1
> 
> 时间：2012-10-18T09:26:59.733
> 
> 标签：linux, installation, altiris

使用以对话框“您在此系统上有多个网络设备。您想通过哪个安装？”停止的 kickstart 文件。

使用 PXEboot 配置的机器有两个以太网接口。下面的网络条目缺少什么？我希望在不询问哪个以太网接口的情况下继续进行此安装。

PXE 使用 DHCP 开始安装，因此 Kickstart 应该已经知道要使用 eth0、eth1 等中的哪一个。

这是`ks.cfg`文件中的以太网行：

```
network --onboot yes --device eth0 --bootproto dhcp --noipv6 
```

任何想法表示赞赏。

注意：我已经尝试了以下选项，但它不起作用：

在 pxelinux 配置文件中：

添加`ksdevice=bootif`

还将“IPAPPEND 2”添加到文件末尾

在 kickstart 文件中，不要指定设备：“network --bootproto dhcp”

如何强制在特定以太网设备上进行 kickstart 安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:18:16.077

也许您的网络设备的名称已被重命名，例如戴尔服务器中的 em1、em2 ...。

在这种情况下，您可以添加`**biosdevname=0**`内核启动参数，这将阻止 biosdevname 被调用。

# linux - 如何在linux中杀死多个进程？

> ID：12951348
> 
> 赞同：12
> 
> 时间：2012-10-18T09:27:10.817
> 
> 标签：linux

我想在 Linux 中杀死一些 Apache 服务器进程。

请帮助我。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-18T09:28:54.587

如果您有要杀死的进程的 pid，请使用`kill`命令。

```
kill pid1 [pid2 pid3 ...] 
```

如果这不会终止进程，您可以在命令中添加`-9`标志`kill`以强制终止进程，例如

```
kill -9 pid1 [pid2 pid3 ...] 
```

要获取进程的 pid，您可以使用`ps`命令作为

```
ps ax | grep apache 
```

输出的第一列是进程的 pid。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T09:29:06.900

尝试以下操作：

```
killall apache2 
```

如果你想杀死所有 apache 进程。

```
ps aux | grep apache2 
```

将显示 apache 服务器及其 PID。然后你可以有选择地杀死：

```
kill -9 pid1 pid5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:29:43.533

注意 Linux 命令`killall`。您可以按名称杀死进程，从而做一些比使用 pid 更粗粒度的事情。您可以使用名称或正则表达式（带有`-r`选项）来指定您的受害者。

使用普通`SIGTERM`（默认）开始。这将使进程捕获信号，如果它们表现良好，它们将正确清除/关闭资源然后退出。只有当进程没有响应时，您才应该使用`SIGKILL`(-9) 信号。

# groovy - Groovy - 编写类似闭包的 unix grep 的更短方法

> ID：12951349
> 
> 赞同：5
> 
> 时间：2012-10-18T09:27:13.397
> 
> 标签：groovy, closures

我有一个闭包来查找名称与模式匹配并包含给定字符串的所有文件：

```
def path = "path/to/logs"
def namePatten = ~/.*.log/
def contentPattern ~/.*ERROR.*/
def result = []

new File(path).eachDirRecurse { File dir ->
  dir.eachFileMatch(namePattern) { File f ->    
    f.eachLine { String l ->      
      if(l.matches(contentPattern)) {        
        result.add(f)
        return
      }
    }
  } 
```

但我很确定我可以有一些更短的东西（嘿，否则我可以使用普通的 java :)）
我试图找到一种方法来写这个有点像这样：

`result = new File(path).eachFileRecurse.filter(filePattern).grep(contentPattern)`

就像我使用 guava 或类似的流利界面收集工具所做的那样。

您将如何以简洁但仍然可读的方式编写此闭包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:51:45.237

目前我能做到的最小的就是使用递归扫描根文件夹的[`File.traverse`方法：](http://groovy.codehaus.org/groovy-jdk/java/io/File.html#traverse%28java.util.Map,%20groovy.lang.Closure%29)

```
new File( path ).traverse( nameFilter: namePattern ) { f ->
  if( f.filterLine( { it ==~ contentPattern } ) as String ) result << f
} 
```

Using[`filterLine`](http://groovy.codehaus.org/groovy-jdk/java/io/File.html#filterLine%28groovy.lang.Closure%29)返回一个[Writable](http://groovy.codehaus.org/api/groovy/lang/Writable.html)，我将其转换为 String，然后我们可以利用 Groovy 的真相来查看是否将文件添加到其中`result`。

* * *

### 编辑：

你也可以使用`AntBuilder`做类似的事情：

```
def result = new AntBuilder().fileset( dir:'path/to/logs', includes:'**/*.log' ) {
  containsregexp expression:'.*ERROR.*'
}*.file 
```

我更喜欢它一次生成列表，而不是将结果添加到已定义的`results`列表中。

# wordpress - Wordpress 永久链接结构更改问题

> ID：12951357
> 
> 赞同：7
> 
> 时间：2012-10-18T09:27:30.323
> 
> 标签：wordpress, .htaccess, permalinks

我在 SO 上看到了一些关于这个问题的其他帖子，但是没有一个建议的解决方案对我有用，所以我重新发布。

将我的永久链接结构更改为 后`/%postname%/`，所有链接都不起作用。我得到以下404：

```
Not Found

The requested URL /my-post-name/ was not found on this server.

Apache/2.2.20 (Ubuntu) Server at mysite.com Port 80 
```

当我回到永久链接结构时，它又开始工作了，但无论如何`default`我都想拥有结构。`/%postname%/`

我`.htaccess`的文件`chmod`是777。

将我的永久链接结构更新为 后， Wordpress 生成`/%postname%/`的文件如下：`.htaccess`

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

有什么想法吗？

## 编辑：

我试图将永久链接结构更改为以下内容：

```
/index.php/%postname%/ 
```

它很高兴地工作。然而，问题是现在，毫不奇怪，链接采用以下形式：

```
www.mysite.com/index.php/my-page.com 
```

我的问题是如何`index.php`从我的链接中删除。当我从永久链接结构（即`/%postname%/`）中删除它时，我的链接不再起作用。

PS：我不使用博客条目，而是只使用我网站中的页面。如果有必要，我的网站是：mll.sehir.edu.tr。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-09T12:07:47.493

如果您知道问题的根源，有很多方法可以解决此问题。

### 问题 1

首先，您的 apache 没有安装或启用 mod_rewrite.c 模块可能是个问题。

因此，您必须按如下方式启用它

打开你的控制台并输入它，这个：

```
sudo a2enmod rewrite 
```

重新启动您的 apache 服务器。

```
service apache2 restart 
```

### 问题 2

除了上述之外，如果它不起作用，您可能还必须更改 apache conf 文件（或文件）`apache2.conf`中的覆盖规则。`http.conf``000-default`

定位`Directory /var/www/`

更改`Override None`为`Override All`

### 问题 3

如果您收到一条错误消息，指出未找到重写模块，则可能您的 userdir 模块未启用。因此，您需要启用它。

在控制台中输入：

```
sudo a2enmod userdir 
```

如果仍未启用（如上所述），则尝试启用重写模块。

要进一步阅读此内容，您可以访问此网站：[http ://seventhsoulmountain.blogspot.com/2014/02/wordpress-permalink-ubuntu-problem-solutions.html](http://seventhsoulmountain.blogspot.com/2014/02/wordpress-permalink-ubuntu-problem-solutions.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T20:01:29.233

听起来像是服务器上的符号链接有问题。在您的 .htaccess 中尝试此操作，并在进行更改后将其更改为 644：

```
Options +FollowSymlinks
RewriteEngine on

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:53:50.480

我有同样的问题，但我正在使用其他 url 结构 /%category%/%postname%/

de 404 错误的问题在于，即使您设置了某种结构，wordpress 总是试图在 url 上创建带有单词“category”的 url。

尝试像这样输入您的网址：yoursite.com/category/postname，如果您现在没有收到任何错误是因为我们即将解决错误。现在尝试安装这个 wordpress 插件[http://wordpress.org/extend/plugins/no-category-base-wpml/](http://wordpress.org/extend/plugins/no-category-base-wpml/)从 url 中删除“类别”基础

让我知道你的进步

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:07:42.123

用这个替换并尝试你的 .htaccess：

# 选项 +FollowSymlinks

# 重写引擎开启

# RewriteCond %{HTTP_HOST} ^hostname.com$

# RewriteRule ^(.*)$ [http://www.hostname.com/](http://www.hostname.com/) $1 [R=permanent,L]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T14:49:45.950

每当我尝试启用我的网站对 mod_rewrite 的永久链接时，我都会遇到这个问题：“Pretty Permalinks”。我的站点是 AWS EC2 上的一个实例。

```
404 Errors 

Page Not Found
The requested URL .... was not found on this server.
Apache/2.4.7 (Ubuntu) Server at mydomain.com Port 80 
```

我尝试了以上所有方法，但没有被修复。

最后，我检查了 /etc/apache2/sites-available/wordpress.conf，我发现我使用了 AWS 分配给每个实例的公共 IP 地址。一旦我将它更改为当前的 mydomain.com，它就可以工作了。

有时，wordpress.conf 会被 httpd (web sser) 锁定，我们需要在编辑后停止并启动它。我们还需要使用： sudo service apache2 stop/start 以便 wordpress.conf 可以重新加载。

希望我的经验可以帮助其他人。

# android - PhoneGap / Android 自定义键盘

> ID：12951358
> 
> 赞同：6
> 
> 时间：2012-10-18T09:27:30.573
> 
> 标签：android, android-layout, cordova

我正在开发一个包含多个`input[type=numer]`元素的应用程序。暂时只有安卓。

内置数字键盘有两个问题：

```
 * it's inconsistent (different on different versions of Android)
 * it has unnecessary keys (space, dash, comma and "next") which add confusion. 
```

我想要一个只有`numbers, comma and backspace`. 那可能吗？

**编辑 2013 年 10 月 3 日**。第三个问题出现了，这是迄今为止最严重的问题。看起来三星决定从他们的数字键盘中跳过十进制字符（“。”），至少是`input[type=numer]`在浏览器中获得焦点时弹出的那个。似乎所有 Galaxy S4 设备都受到了影响（我在 S4 Mini 上看到过，我无法使用很多三星设备……我看到的都是 Nexus 爱好者 :-)）。我在谷歌上找不到太多关于这个问题的信息，但我看到 Galaxy S4 用户在 2012 年抱怨过这个问题（几周前我在一台 S3 上尝试过，没问题）。

长话短说，经过仔细考虑后，我决定在 html/javascript 中实现我自己的键盘（三星太重要了，我正因为它而受到不好的评论，我认为我无法做任何事情来修复它）。我正在重写我的应用程序，我会在完成后尝试记住并讲述这个故事。

**编辑 2013 年 12 月 3 日**。我当前的解决方案（仍处于 alpha 阶段，应用程序重写花费的时间比我预期的要长）是一个完全用 javascript 实现的键盘。我使用常规 <span> 元素而不是 <input> 来防止操作系统键盘弹出。作为一个额外的好处，我可以控制键盘的所有内容，所以我添加了一些算术键（x、-、*、/、（和）），用户可以输入表达式，例如“3x(2+5.5 )”而不是“15”。准备好后（至少还有几周），我会链接到该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T10:35:28.347

是的。

首先，将您的活动配置为从不显示键盘（尝试 android:windowSoftInputMode = "stateAlwaysHidden"）。如果 EditText 坚持把它拉起来，你可能会遇到一些问题，但是你可以基于 TextView 制作一个 mock EditText 来解决这个问题，或者继承 EditText 并覆盖一些方法。有多个指南，例如这里：[关闭/隐藏 Android 软键盘](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)

其次，创建您自己的 UI 键盘元素，使用您想要的任何按钮以任何您想要的布局，并在此键盘上捕获按钮按下，对于每次按下，将适当的字符附加到 EditText/TextView 的显示文本。

也就是说，用户可能不喜欢它。尽管您讨厌每个设备的键盘看起来不同，但每个用户都*习惯*了自己的键盘，并希望在编辑文本时看到它。我敦促你重新考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T11:13:27.583

感谢更新。这是我实施它的方式。它可能与您的操作方式相似。我很好奇你到目前为止遇到了什么问题。

我还没有把它转移到生产中，所以还在测试，但到目前为止它似乎运行良好。我已经从下面的代码中删除了一些验证，以使其更短......

基本上键盘是 iPad 上的 1 行和手机上的 2 行。它支持任何具有“键盘”类的输入字段并突出显示整个“.keyboard-item”，因此用户可以清楚地知道他们正在更新哪个字段。

```
 <div id="stuff">
        <ul>
            <li> <label for="name">Name</label> </li>
            <li> <input type="text" id="name" class="required"/> </li>
        </ul>
        <ul class="keyboard-item">
            <li> <label for="number">#</label> </li>
            <li> <input type="text" id="number" class="keyboard required" pattern="[0-9]*" readonly="readonly" onkeypress="dosomething(this)"/> </li>
        </ul>
    </div>

    <div class="mobile-number-keyboard">
        <div class="mobile-number-keyboard1"> <span style="padding-left: 20px;">0</span> <span>1</span> <span>2</span> <span>3</span> <span>4</span> <span style="padding-right: 20px;">5</span> </div>
        <div class="mobile-number-keyboard2"> <span style="padding-left: 20px;">6</span> <span>7</span> <span>8</span> <span>9</span> <span style="width: 8px;">.</span> <span style="padding-right: 20px;"><</span> </div>
    </div>

<style>
    .mobile-number-keyboard { width: 101%; height: 40px; margin: auto; margin-bottom: 20px; }
    body.phone .mobile-number-keyboard { height: 80px; }
    .mobile-number-keyboard span { float: left; padding: 8px 22px; border: 1px outset White; cursor: pointer; background-color: #4F81BD; color: White; }
    .mobile-number-keyboard span:hover { background-color: #87CEFA; }
    .mobile-number-keyboard span:active { border-style: inset; background-color: #00E5EE; }
    body.phone .mobile-number-keyboard2 { clear: both; height: 40px; }
    .keyboard-focus { background: #FFC1C1; border: 1px solid red; }
    .keyboard-item-focus { background: #00E5EE; }
</style>

<script>
    function initCustomKeyboard(jContainer) {
            jContainer.find('input, select, textarea').click(function() {
                $('.keyboard-focus').removeClass('keyboard-focus');
                $('.keyboard-item-focus').removeClass('keyboard-item-focus');

                var me = $(this);

                if (me.hasClass('keyboard')) {
                    me.addClass('keyboard-focus');
                    var parent = me.parent();

                    if (parent.hasClass('keyboard-item')) {
                        parent.addClass('keyboard-item-focus');
                    } else {
                        parent = parent.parent();

                        if (parent.hasClass('keyboard-item')) {
                            parent.addClass('keyboard-item-focus');
                        } else {
                            parent = parent.parent();

                            if (parent.hasClass('keyboard-item')) {
                                parent.addClass('keyboard-item-focus');
                            }
                        }
                    }
                }
            });

            jContainer.find('.mobile-number-keyboard').find('span').click(function() {
                var me = $(this);
                var val = me.text();
                var box = jContainer.find('.keyboard-focus');

                var bval = box.val();
                var blen = bval.length

                if (box.length > 0) {
                    if (val === '<') {
                        if (blen === 0) { return; }

                        if (blen > 1 && bval.substring(blen-2, blen-1) === ' ') {
                            box.val( bval.substring(0, blen - 2) );
                        } else {
                            box.val( bval.substring(0, blen - 1) );
                        }

                        var whichCode = 8;
                    } else {
                        var max = box.attr('maxlength');
                        var whichCode = val.charCodeAt(0);

                        if (max === undefined || parseInt(max) > blen) {
                            box.val(bval + val);
                        } else {
                            return;
                        }
                    }

                    var ev = $.Event('keydown');
                    ev.which = whichCode;
                    box.trigger(ev);

                    ev = $.Event('keypress');
                    ev.which = whichCode;
                    box.trigger(ev);

                ev = $.Event('keyup');
                    ev.which = whichCode;
                    box.trigger(ev);
                }
            });
        }

    $(function() { initCustomKeyboard('#stuff'); }
</script> 
```

# javascript - 查找 jQuery 结果的 obj 类型

> ID：12951359
> 
> 赞同：0
> 
> 时间：2012-10-18T09:27:34.160
> 
> 标签：javascript, jquery

我有以下代码从 console.log 生成 ["AM123","DR2","F","99"]。现在我想看看结果的类型是什么。

产生结果的代码是：

```
$(".stock_splitdata").each(function() {
var $table = $(this);

var values = $("td", $table).map(function() {
return $(this).text();
}).get();
$table.replaceWith(values.join(" "));

}); 
```

我查看对象类型的目的是我想将结果分成四个并使用不同的填充将它们连接起来，例如 ["AM123","DR2","F","99"] 变成 AM123-----DR2- F--99------

更新：2012 年 19 月 10 日：

我找到了如下解决方案。但是如果有人可以优化代码，请随意这样做。

```
if(subtableName == 'stock_splitdata'){

               $(".stock_splitdata").each(function() {
                    var $table = $(this);

                    var values = $("td", $table).map(function() {
                        return $(this).text();
                    }).get();

                    var tmpSKU = padRight(10, values[0], '&nbsp;');
                    tmpSKU = tmpSKU + padRight(4, values[1], '&nbsp;');
                    tmpSKU = tmpSKU + padRight(4, values[2], '&nbsp;');
                    tmpSKU = tmpSKU + padRight(4, values[3], '&nbsp;');

                    $table.replaceWith(tmpSKU);

                });

           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:32:18.007

用户`$.type()` [jquery 文档](http://api.jquery.com/jQuery.type/)

`$.type(values)`你也应该试试`values instanceof Array`；

```
jQuery.type(true) === "boolean"
jQuery.type(3) === "number"
jQuery.type("test") === "string"
jQuery.type(function(){}) === "function"
jQuery.type([]) === "array"
jQuery.type(new Date()) === "date"
jQuery.type(/test/) === "regexp"
Everything else returns "object" as its type. 
```

[小提琴](http://jsfiddle.net/pintu31/cKNWr/1/)

了解[更多信息](http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/)

# google-app-engine - GAE CDI jpa primefaces

> ID：12951362
> 
> 赞同：0
> 
> 时间：2012-10-18T09:27:46.873
> 
> 标签：google-app-engine

我会写一个应用程序：GAE CDI (weld) JPA JSF2 facelets primefaces。

有可能进入GAE吗？我如何在 GAE 上使用焊缝？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:36:48.803

是的。见：http: [//java.dzone.com/articles/weld-101-runs-gae](http://java.dzone.com/articles/weld-101-runs-gae)

这是一个分步示例（不过从 2010 年开始）： [http ://relation.to/Bloggers/WeldJSF20AndGoogleAppEngineNavigatingTheMinefieldPart1](http://relation.to/Bloggers/WeldJSF20AndGoogleAppEngineNavigatingTheMinefieldPart1)

# javascript - 带有主干样板的 PubSub？

> ID：12951363
> 
> 赞同：1
> 
> 时间：2012-10-18T09:27:47.890
> 
> 标签：javascript, backbone.js, requirejs, underscore.js, publish-subscribe

**问题：**

我在屏幕上有 3 个 UI 组件：

1.  **顶部菜单**：选项（真或假）
2.  **左侧菜单**：A、B、C、D 等项目列表
3.  **表单内容**：一个表单。根据 的值，它是**可见**的还是**隐藏**`Top menu's Option`的。其内部内容因`Left menu's item`所选内容而异。例如，A selected 将显示 2 个输入框，而 B 将显示 3 个输入框，等等...

它的工作方式是用户将选择左侧菜单项，然后单击顶部菜单的选项，然后将显示表单内容。

**顶部菜单**有`TopMenu`型号

```
{
isSelected: false
} 
```

**左侧菜单**中`LeftMenuCollection`包含此类模型

```
{
id: 0
label: "No label yet"
} 
```

**表单内容**太长`FormContentModel`，无法放在这里。

我有 2 种观点：`TopMenuView`and `LeftMenuView`for`TopMenu`和`LeftMenuCollection`. 但是表单内容视图（let call）的视图必须从两者中`FormContentView`获取值，以便知道**何时**可见以及可见后显示**什么。**`TopMenu``LeftMenuCollection`

 ******目前的想法：**

1.  用户的操作`LeftMenuView`将触发事件并`FormContentView`根据选择的内容在隐藏的 DOM 中填充 HTML。

2.  `TopMenuView``FormContentView`将触发**可见**。

3.  然后`FormContentView`会被存入自己的`FormContentCollection`。

对于#1 和#2，我只使用了像这里这样的 PubSub 模型：[在主干中从一个视图触发一个事件到另一个视图](https://stackoverflow.com/questions/7843278/fire-an-event-from-one-view-to-another-in-backbone)

但由于我使用 Backbone Boilerplate [https://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)。我打算这样做是因为 app 对象已经在 app.js 中创建：

```
app.PubSub = _.extend({}, Backbone.Events) 
```

**问题：**

如何以及在哪里创建该 PubSub 对象？它在router.js中吗？

PubSub 是正确的方法吗？我也在考虑通过组合`TopMenu`和`LeftMenuCollection`在另一个下的“复合模型”，`FormContentCollection`但互联网上的大多数人都说使用 PubSub。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:32:47.063

定义“app”变量后立即创建 pubsub。

我更喜欢将 PubSub 直接附加到 Backbone 对象，并且在主干加载后立即执行此操作。（我之前写过：[Backbone.js 全局通知](http://berzniz.com/post/19351578959/backbone-js-global-notifications)）

**这是另一个可能更简单的想法：**

创建一个新模型并在所有视图之间共享它。

（请注意，您可以向视图添加第二个模型，它们不必设置为 view.model）

Left 和 Top 视图可以 .set() 其属性，Form 视图可以使用 .on('change', function...) 绑定到更改，并通过显示/隐藏视图来响应。****

# java - Swing 桌面应用程序 - 如何组织我的代码

> ID：12951366
> 
> 赞同：3
> 
> 时间：2012-10-18T09:27:56.637
> 
> 标签：java, swing, frameworks

我们将在我们的下一个项目中使用 Swing，这将是一个轻量级桌面应用程序。

我一直在阅读 Oracle 网站上的 Swing 教程并开始掌握它。

有人告诉我，`JFrame`我需要在一个 JFrame 和 switch 中工作，而不是切换`JPanels`。

我对你的问题如下。

我可以在设计模式（所见即所得编辑器）中创建 JPanel 设计（或其模板）并调用`jframe.setContentPane(nameOfJPanel)`还是以编程方式在代码中执行它们？

其次，我如何构建我的代码......如果我动态添加新的 JPanel 并将它们的事件绑定到事件处理程序......我所有的逻辑和代码都将在一个拥有数十种方法的巨大类中。我只是不知道如何继续，我在互联网上找不到一个包含多个（比方说超过 6 个）面板的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:42:08.790

## 所见即所得或不所见即所得

在最好的情况下，这是一个值得商榷的问题。

我鼓励我所有的初级开发人员开始手动编写 UI，因为它教给他们有关如何使用布局管理器和如何处理复合布局的重要基础知识。

这往往需要更长的时间，因为您需要在每次更改时验证布局。

我个人使用 Netbeans 中的表单编辑器来完成我的大部分日常工作，但会手动调整 UI

## 结构

考虑责任边界、重用和减少策略。

你不想要的是什么都能做的大型大师班。维护和更新将很困难（我每天都生活在这种恐怖中）。

相反，确定不同的责任区域，并使用 getter 和 setter 或模型在应用程序中移动数据。您可以将代码解耦得越多，更新和修改就越容易。

尽可能识别类似的工作并将其建模为接口和抽象类。基本上，无论您何时开始考虑应对代码，都可能很好地表明您的设计已关闭，您应该考虑实现抽象类以覆盖重叠。

利用`Action`API 来复制常用概念（复制和粘贴就是一个示例。您可能需要菜单项、可能的工具栏项，甚至可能是弹出项，这些都可以由同一个`Action`类处理）。

将数据与视图分开。正如我之前所说，利用模型。数据不应该关心它是如何收集或修改的，只要它可以。同样，视图不应该关心数据是如何管理的，只关心它是如何管理的。

如果可能，请在应用程序的不同区域之间定义接口。通过这种方式，您可以进一步解耦应用程序，并且没有任何部分依赖于任何一种实现（你好，我的世界：P）

不要试图简单地挖掘组件层次结构来访问该字段，如果您需要更改代码，它将产生一场噩梦！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:46:44.503

JFrame 将是您的应用程序的主窗口，面板将是组成它的砖块。

您应该在自己的类中创建每个面板，并且可以按包中的功能排列它们。您将拥有用于保存应用程序逻辑部分内容的面板和包含真实内容的面板。逻辑面板可以是主视图和菜单栏。应用程序面板可以是表单、菜单、画布……

您必须将应用程序面板放在逻辑面板中，并根据用户的操作更改逻辑的内容。

您应该研究布局是如何工作的，以便在 JFrame 内构成视图并在面板内布局组件。

例如，在定义应用程序的主要区域时，BorderLayout 是经典的： - 顶部的菜单和工具栏 - 左侧的浏览器 - 底部的状态栏 - 中心的主面板

您可以使用 WYSIWYG 编辑器，但避免在同一个类中进行所有设计。否则你将有一个可怕的巨大的类。在单独的类中创建面板并在主视图中组合它们。
您可以使用空面板作为占位符来帮助您创建应用程序的结构。

您必须将域数据绑定到视图，以免将两层混合在一起。绑定意味着您将编写一种从 java bean 到表单的方法，反之亦然。基本绑定是手写的，但存在一些工具可以做到这一点。如果它是一个小型应用程序，那么手写所有内容可能会更好。

构建 Swing 应用程序可能非常棘手（您必须了解事件调度线程、布局管理、事件管理、小部件（标签很简单，但 JTable 处理起来可能非常复杂）；

我建议在开始项目之前找一本关于该主题的书，并找到一些开源的 Swing 应用程序来研究它的结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T09:34:16.383

这就是我组织代码的方式：

```
class Panel1 extends JPanel{
   //code for panel1 and its Components
}

class Panel2 extends JPanel{
   //code for panel2 and its components
}
// and it follows. 
class ApplicationFrame extends JFrame{
    /// LOGIC to switch between panels
}

class Main{
  //contains main() function
} 
```

任何手工制作的 GUI 代码都比计算机生成的 WYSIWYG -APP 代码更好。

# java - Spring：Spring 可以访问 Spring 托管 bean 中私有创建的对象吗？

> ID：12951368
> 
> 赞同：3
> 
> 时间：2012-10-18T09:27:59.153
> 
> 标签：java, spring, spring-aop

我有一个类似于以下的 Java 类：

```
public class Foo{
   public void doSomething(){
     StageA a = new StageA();
     StageB b = new StageB();
     StageC c = new StageC();
     a.execute();
     b.execute();
     c.execute();
   }
} 
```

现在，假设我不能真正编辑这个类本身，我还可以使用*spring AOP*`around`来应用记录`execute`方法吗？（大概不使用*aspect4j*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:37:08.683

**已编辑：** 我认为在您的情况下，如果不更改 Foo 或 Stage 类，就不可能记录每个“执行”方法的执行。因为 Stage... 类不是由容器管理的。您只能记录 doSomething 方法何时开始执行（如果 Foo 类由 Spring 容器管理），您无法控制它的执行流程。

如果您的类将由 Spring 容器管理，那么您可以轻松做到这一点。您应该简单地为 Stage... 类而不是 Foo 类编写 Spring AOP“围绕”方面。

这是一个简单的日志记录方面的示例：

```
@Component
@Aspect
@Order(value=2)
public class LoggingAspect {

    @Around("execution(* com.blablabla.server..*.*(..))")
    public Object logMethod(ProceedingJoinPoint joinPoint) throws Throwable{
        final Logger logger = LoggerFactory.getLogger(joinPoint.getTarget().getClass().getName());
        Object retVal = null;

        try {
            StringBuffer startMessageStringBuffer = new StringBuffer();

            startMessageStringBuffer.append("Start method ");
            startMessageStringBuffer.append(joinPoint.getSignature().getName());
            startMessageStringBuffer.append("(");

            Object[] args = joinPoint.getArgs();
            for (int i = 0; i < args.length; i++) {
                startMessageStringBuffer.append(args[i]).append(",");
            }
            if (args.length > 0) {
                startMessageStringBuffer.deleteCharAt(startMessageStringBuffer.length() - 1);
            }

            startMessageStringBuffer.append(")");

            logger.trace(startMessageStringBuffer.toString());

            StopWatch stopWatch = new StopWatch();
            stopWatch.start();

            retVal = joinPoint.proceed();

            stopWatch.stop();

            StringBuffer endMessageStringBuffer = new StringBuffer();
            endMessageStringBuffer.append("Finish method ");
            endMessageStringBuffer.append(joinPoint.getSignature().getName());
            endMessageStringBuffer.append("(..); execution time: ");
            endMessageStringBuffer.append(stopWatch.getTotalTimeMillis());
            endMessageStringBuffer.append(" ms;");

            logger.trace(endMessageStringBuffer.toString());
        } catch (Throwable ex) {
            StringBuffer errorMessageStringBuffer = new StringBuffer();

             // Create error message 
             logger.error(errorMessageStringBuffer.toString(), e)

            throw ex;
        }

        return retVal;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:30:29.737

好吧，您可以记录方法并且它需要时间（用于性能），但我认为您无法记录方法正在做什么。

来自[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-introduction-defn)：

> 围绕建议：围绕连接点的建议，例如方法调用。这是最有力的建议。环绕通知可以在方法调用之前和之后执行自定义行为。它还负责选择是继续到连接点还是通过返回自己的返回值或抛出异常来缩短建议的方法执行。

如果您在方法内部使用 log4j 记录器，则可以通过配置 log4j 记录方法正在执行的操作。

> （大概没有使用aspect4j）

--> Spring 内部使用`aspectJ`

检查[here](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-ataspectj-around-advice)以获取参考和示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:40:45.863

是的，您可以使用名称如下的切入点定位方法编写`@Around`建议：`execution``execute()`

```
@Around("execution(* execute(..))")
public Object execute(ProceedingJoinPoint pjp) throws Throwable
{
    // Log statements before the call;

    Object obj = pjp.proceed();

    // Log statements after the call;

    return obj;
} 
```

# ruby-on-rails-3 - 如何在 Rails 3 中自定义活动管理员评论功能

> ID：12951370
> 
> 赞同：3
> 
> 时间：2012-10-18T09:28:02.947
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, activeadmin

每当管理员向用户添加评论时，我都需要发送电子邮件。我正在使用活动管理员 0.4.3

![在此处输入图像描述](../Images/2b5d02ec0c6ebaa84b108f367568e1a1.png)

如何获取此活动并发送电子邮件。当我发表评论时，在我的控制台中，我可以看到执行了以下操作

```
Started POST "/admin/comments"
Redirected to http://localhost:3000/admin/comments/182
Started GET "/admin/comments/182"
Started GET "/admin/accounts/227" 
```

我不知道如何访问这些功能。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:12:46.127

我通过将此代码添加到您的 config/initializers/...

```
module ActiveAdmin

  class Comment  < ActiveRecord::Base

    after_create :send_email

    def send_email
      AdminMailer.comment_created(self.id).deliver
    end

  end

end 
```

请注意，您必须编写 AdminMailer，并且我们只传递 id，因为我们的邮件程序使用 redis 异步发送邮件。如果你没有这个，你可以传递对象。

我试图以`Admin::CommentsController`相同的方式覆盖的创建操作，但没有奏效。在控制器中包含它会更好，因为发送电子邮件更多的是控制器的业务而不是模型的业务。任何想法如何做到这一点？

...好的...评论了一个[活跃的管理问题](https://github.com/gregbell/active_admin/issues/1727)，该问题解决了相同的问题并得到了一些很好的答案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T14:57:38.453

由于这是控制器逻辑，因此最好将其放入控制器中。你可以看看[https://github.com/activeadmin/activeadmin/issues/2493#issuecomment-24892236](https://github.com/activeadmin/activeadmin/issues/2493#issuecomment-24892236)

基本上，要修改 Comment 控制器，您必须在加载后进行：

```
ActiveAdmin.after_load do
  ActiveAdmin.register ActiveAdmin::Comment, as: 'Comment' do
    controller do
      after_action :send_email, only: [:create]

      def send_email
        AdminMailer.comment_created(self.id).deliver
      end
    end
  end
end 
```

# php - 使用书面 ajax 函数提交表单两次

> ID：12951372
> 
> 赞同：0
> 
> 时间：2012-10-18T09:28:10.547
> 
> 标签：php, jquery, ajax

我写了一个 JQuery AJAX 提交脚本，它将通过 AJAX 提交一个带有类 ajax 的表单，并对其进行序列化等等等等 继承该脚本：

```
$("form.ajax").submit(function(){
   alert('a');
    var url = $(this).attr('action');
    if($(this).attr("element") != null)
    {
        var element = $(this).attr("element");
    }
    else if($(this).attr("element") == 'undefined')
    {
        var element = "render";
    }
    $("#"+element).html("<div id='loader'>Laden...<br /><img src=\"/site/templates/img/ajax-loader.gif\"/></div>");
    $.post(url, $(this).serialize(), function(data){

        $("#"+element).html(data);
    });
    return false;
}); 
```

好吧，当我提交表单时，任何带有 ajax 类的表单都会被提交两次，我可以在 Chrome 控制台的网络选项卡中看到这一点。

怎么了，我不明白（我把警报（'a'）放在那里检查它是否会弹出两次，但它没有）。

请帮我？

编辑：HTML，我之前发布了几次，但我们开始吧：

```
<form  class='ajax' element='make-payment' action='/statistieken/maak-betaling'  method='post'>
<input type='hidden' name='charity_id' value='1749'>
<li class='form-item'><label for='amount'>Bedrag:</label></li>
<li class='form-item'><input type='text' id='amount' name='amount' /></li>
<li class='form-item'><input type='submit' value='Betalen' /></li>
</form> 
```

问候，哈维亚克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:42:52.183

尝试这样的事情

```
$("form.ajax").submit(function(){
   alert('a');
    var element;
    var url = $(this).attr('action');
    if($(this).attr("element") != null)
    {
        element = $(this).attr("element");
    }
    else if($(this).attr("element") == 'undefined')
    {
        element = "render";
    }
    $("#"+element).html("<div id='loader'>Laden...<br /><img     src=\"/site/templates/img/ajax-loader.gif\"/></div>");
    $.post(url, $(this).serialize(), function(data){

        $("#"+element).html(data);
    });
    return false;
}); 
```

# visual-studio-2010 - Visual Studio 2010 / TFS 设置“本地”注释？

> ID：12951376
> 
> 赞同：0
> 
> 时间：2012-10-18T09:28:16.183
> 
> 标签：visual-studio-2010, tfs, comments

我在 VS 2010 中工作并连接到 Team Foundation Server。

为了编辑源文件，我必须从服务器中检出它们。完成编辑后，我必须将它们重新签入（以使更改对其他人可见）或放弃更改。

我目前正在熟悉架构和系统，所以我想在玩弄一切的同时添加很多个人评论。

但是，我不想让其他人看到这些评论。（而且我不想在每次通过签入提交更改时删除它们）

是否有我尚未发现的 VS 功能或允许我输入未提交到 TFS 的评论的插件？也许像虚拟便利贴之类的东西，只是让我在某些代码块上附加愚蠢的提醒？

（是的，我知道，适当的文档会使它过时，但系统保持原样且庞大，我不是记录这一切的人，只是想习惯代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:41:04.347

VS2010/TFS2010 没有我所知道的内置功能，对于 TFS2012，您可能会使用代码审查。

也许 Visual Studio 扩展[StickyNotes](http://visualstudiogallery.msdn.microsoft.com/69b3d5fa-5ad6-4064-a943-4dc7b87a4c80)就是您想要的。

# php - 使用 jquery、php 编辑 html 表并将记录保存到 mysql

> ID：12951377
> 
> 赞同：0
> 
> 时间：2012-10-18T09:28:18.557
> 
> 标签：php, jquery, html, ajax

我有一个 html**表（网格）**，它为我显示了一些记录。我希望它是可编辑的，即用户可以编辑这些值并在按 Enter 时保存它们。我的表是这样的。我使用 php 动态显示记录。

```
 <a class="grayBucketBtn noMargin none" id="unpublish" href="#.">Unpublish</a>
 <a class="grayBucketBtn" id="publish" href="#.">Publish</a>
 <a class="grayBucketBtn" id="delete" href="#.">Delete</a>
 <a class="grayBucketBtn" id="modify" href="#.">Modify</a>
<?php while ()//loop through ?>
<tr>  
    <td class="tableRadioBtn"><input type="checkbox" class="checkRowBody" id="checkRowBody" name="check"/></td>
    <td class="tableShape">Round</td>
    <td class="tableCarst">0.30</td>
    <td class="tableColor">j</td>
    <td class="tableClarity">SI1</td>
    <td class="tableDimension">4.35x4.33x2.62mm</td>
    <td class="tableDeptd">60.3%</td>
    <td class="tableTablePer">60.3%</td>
    <td class="tablePolish">Excellent</td>
    <td class="tableSymmetry">Excellent</td>
    <td class="tableCut">Very Good</td>
</tr>
<?php } ?> 
```

每行（tr）都有一个关联的复选框。如果我选​​中复选框，我会得到一个编辑按钮。当我点击编辑按钮时，选定的行将变成可编辑的。
所以我想要一个编辑按钮上的功能，

```
 $("#modify").click(function(){
      //check if only one check box is selected.
      //make it editable.
      //save the content on pressing enter of the edited row.
    }); 
```

我遇到了一些问题，但没有得到解决方案，因为大多数人建议一些不符合我要求的插件。所以，一些帮助会很有用。
谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:43:02.630

这应该包括将它们从文本转换为输入并返回到文本

```
 $('#modify').click(function(){
  $.each($(".checkRowBody:checked"),function(){
   $.each($(this).parent('td').parent('tr').children('td:not(.tableRadioBtn)'),function() {
     $(this).html('<input type="text" value="'+$(this).text()+'">');
   });
  });
});​​​​​​​​​
    $('input[type="text"]').live('keyup',function(event) {
        if(event.keyCode == '13') { 
            // do $.post() here
        $.each($('input[type="text"]'),function(){
            $(this).parent('td').html($(this).val());
        });
        }
    }); 
```

​ ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:01:47.643

1.  使用复选框时，用户假设可以选择多个，如果每次只需要一个，则只需使用单选按钮
2.  我不能给你一个完整的解决方案，但我可以给你一个方向：

    首先像这样更改标记：

    ```
    <tr>  
    <td class="tableRadioBtn"><input type="checkbox" class="checkRowBody" id="checkRowBody" name="check"/></td>
    <td class="tableShape">Round<input class="hidden" value="Round" name="shape"/></td>
    <td class="tableCarst">0.30 <input class="hidden" value="0.30" name="tableCarst"/></td>
    ...
    //Do the same for all the columns
    </tr> 
    ```

    `hidden`将类定义`display:none`为隐藏所有输入。

    一旦用户单击一行，您将删除所有`td`元素的文本并`hidden`从所有输入中删除类：

    ```
    $(".tableRadioBtn").click(function(){          
      //find the parent tr, then find all td's under it, empty the text and remove hidden class
      $(this).closest('tr').addClass('editable').find('td').each(function(){
          $(this).text('').removeClass('hidden');
      });         
    });

    //set a keypress event to detect enter
    $(document).keypress(function(){   
      //if enter was pressed , hide input  and set text
      if(e.which == 13) {
          var $editable = $('.editable');
          $editable.find('input').addClass('hidden');
          $editable.find('td').each(function(){
              //set the text back
              $(this).text($(this).find('input').val());
          }); 

          //post data via ajax.
      }
    } 
    ```

请注意，我尚未测试此代码，因此可能存在一些错误，但这是一个可能的解决方案。

**更新：**

为了检测是否选中了多个复选框，请使用以下命令：

```
if ($(':checked').length > 1){//do something} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:41:55.807

所以你想做出选择，然后对选中的行调用一个操作？

```
$('#delete').click(function() {
  $.each($('.checkRowBody:checked').parent('td').parent('tr'),function() {
    // probably want to carry out a $.post() here to delete each row using an identifier for the rows related record. 
   //I suggest applying an id or other attribute to the tr element and using that to pass a value with your $.post() data.
    $(this).hide();
  });
}); 
```

# c++ - 您选择的 cpu 不支持 x86-64 指令集

> ID：12951385
> 
> 赞同：1
> 
> 时间：2012-10-18T09:28:38.050
> 
> 标签：c++, gcc, ubuntu, 64-bit, wubi

我知道这个问题已经有几个答案，但我似乎无法理解为什么我不断收到这个错误。

所以这里是解释：我有 64 位机器，我在其中安装了 Windows 7 x64。我正在 Windows 上的 GCC (CodeBlocks) 下编译我的代码，完全没有任何问题。然后我决定我的应用程序必须是可移植的，我决定在 Linux 上在 GCC 下编译它。在我的另一台 32 位机器上，代码编译没有任何问题。但是，在我的 64 位机器上，我决定将 Ubuntu 安装为 Wubi。当然我也安装了五笔x64版本。

我在 Wubi 下成功安装了 Ubuntu，我安装了所有必要的东西，但是当我尝试编译我的项目时，我在第一行得到错误“你选择的 cpu 不支持 x86-64 指令集”。好吧，这对我来说听起来完全没有意义，考虑到我已经在 64 位机器上安装了 Wubi x64，在 Windows 7 x64 上。那么为什么我会收到一条错误消息，说我的 CPU 不支持 x86-64 指令集呢？

难道仅仅是因为我安装了 WUBI 而不是以正常方式在 root 上安装 Ubuntu 吗？这个东西我真的看不出来。

非常感谢你

**编辑**：好的，在 Codeblocks 的某个地方，我找到了为“Pentium M”架构检查的选项。我没有选中它，现在我得到了几个错误，例如：

错误：从 void* 转换为 int 会丢失精度。

出于什么原因，这应该只发生在 Linux 而不是 Windows 上？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T09:56:44.153

基于此评论：

> 编辑：好的，在 Codeblocks 的某个地方，我找到了为“Pentium M”架构检查的选项。我没有选中它，现在我得到了几个错误，例如：

这就是编译问题的原因——“Pentium M”是 32 位架构。CodeBlocks 下的 gcc 默认会在 Windows 上生成 32bit*代码*

错误：

> 错误：从 void* 转换为 int 会丢失精度。

是因为 linux x64 上 64 位的模型是`LP64`, where `sizeof(long) == sizeof(pointer) == 64bits`,`sizeof(int) == 32bits`并且您试图将指针 ( `void *`)(64 位) 推入`int`( 32 位 ) 中，这会导致指针信息丢失。

对于这样的编译错误，很可能代码不是 64 位干净的。

> 出于什么原因，这应该只发生在 Linux 而不是 Windows 上？

x64 上的 Linux 默认生成 64 位应用程序，您需要添加`-m32`程序的构建选项以使其生成 32 位代码（可能有一个 CodeBlocks 目标选项来执行此操作）

# c# - 在 Windows 7 中通过 C# 访问 Sybase :ERROR [IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified

> ID：12951387
> 
> 赞同：2
> 
> 时间：2012-10-18T09:28:38.680
> 
> 标签：c#, sap-ase

我有一个像这样的连接字符串

> Driver={SYBASE ASE ODBC 驱动程序};Srvr= ***;Uid=*** ;Pwd= ***;Database=dbname;
> 端口=* *** ;WorkstationID={WorkstationID};ApplicationName=Wingman

每当我尝试使用打开连接时`Conn.open()`，都会收到以下错误：

> :ERROR [IM002] [Microsoft][ODBC 驱动程序管理器]
> 
> 未找到数据源名称且未指定默认驱动程序

此问题是否特定于 Windows 7？

我尝试了多种方法，例如在 ODBC 数据源管理器（64 位）中创建系统 DSN，但代码指的是 ODBC 数据源管理器（32 位）。

我在 ODBC 管理器（32 位）中找不到 Sybase 的驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:33:46.007

如果您使用的是 Win7 64 位系统，则可以手动浏览到 32 位驱动程序的 ODBC 管理器

```
%systemdrive%\Windows\SysWoW64\ODBCAD32.EXE 
```

控制面板/管理工具内的图标是指 64 位版本。

32 位版本的 ODBC 管理员工具仅显示 32 位系统/用户 DSN，而 64 位版本（位于 %systemdrive\Windows\System32\ODBCAD32.exe）仅显示 64 位系统/用户 DSN。您应该为您的驱动程序使用正确的版本。

保持现状，如果您的代码是为 AnyCPU 平台编译的并且它在 64 位系统上运行，那么它会查看由 ODBCAD32.exe 的 x64 版本定义的数据源，并且该数据源不能使用 32 位驱动程序。另一方面，如果您的代码针对 x86 平台编译并在 64 位系统上运行，它会查看由 x86 版本的 ODBCAD32.exe 定义的数据源。您可以在正确的位置定义数据源。

# php - 加密非敏感客户端数据并在服务器端解密

> ID：12951388
> 
> 赞同：0
> 
> 时间：2012-10-18T09:28:41.760
> 
> 标签：php, javascript, jquery, google-maps

我们正在使用 Google 地图地理编码器服务器端来获取地址的纬度和经度，但需要远离该地址并在客户端进行地理编码以避免 API 限制。

所以在表格中我们有 3 个隐藏值：`address`、`lat`、`lon`。

有没有办法可以将其更改为可以在 PHP 中解密的加密表单字段？

问题是有人可能篡改地址，然后我们在错误的地方有一个经纬度。

有没有办法保证用户不会篡改字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:30:55.603

> 有没有办法可以将其更改为可以在 PHP 中解密的加密表单字段？

是的……但是由于您首先在客户端上生成数据，因此用户仍然可以使用未加密的版本……就像他们加密它所需的一切一样，因此不值得付出努力。

> 有没有办法保证用户不会篡改字段？

不。

# ios - xib 无法从包中加载图像资源

> ID：12951389
> 
> 赞同：3
> 
> 时间：2012-10-18T09:28:41.940
> 
> 标签：ios, xcode, resources, bundle, xib

好的。情况就是这样。我觉得很奇怪。我不知道出了什么问题。

我创建了一个静态库项目。在该项目中，我创建了一个名为 Common 的包来放置图像资源。

我有 2 个应用程序项目。一个用于 ipad，另一个用于 iphone。在两个应用程序项目中，我将包拖到它。所以两个应用程序项目都可以使用包 Common 中的图像资源。

例如，我将一个名为clock.png的png放在bundle Common中。在ipad应用程序项目中，我创建了一个login.xib，在xib中有一个UIImageView，我选择clock.png作为它的图像。时钟。 png 可以在 xib 中看到。我在 iphone app 项目中做同样的事情。

奇怪的是当我运行 ipad 应用程序时。clock.png 图像可以加载并显示在屏幕上。但是当谈到 iphone 应用程序时，它说“无法加载从 a 引用的“clock.png”图像带有标识符“xx”的捆绑包中的笔尖。

我对此感到非常困惑。正如我所见，这两个应用程序项目之间没有太大区别。我应该添加任何设置吗？

# api - 有没有办法提取 AWS EC2 账单使用情况？亚马逊是否为我们提供了任何 REST API 来获取这些数据

> ID：12951390
> 
> 赞同：0
> 
> 时间：2012-10-18T09:28:42.350
> 
> 标签：api, amazon-ec2, amazon-web-services, billing

我们希望管理 AWS 用户的计费周期。AWS 是否提供 API 以编程方式获取此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:40:13.180

使用 Cloudwatch，您可以获得账单提醒。当您的帐单超出您定义的限制时，您将收到 SNS 通知。[在此博客文章](http://aws.typepad.com/aws/2012/05/monitor-estimated-costs-using-amazon-cloudwatch-billing-metrics-and-alarms.html)或[文档](http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/monitor_estimated_charges_with_cloudwatch.html)中阅读有关此内容的更多信息。当然，您也可以使用[CloudWatch API](http://aws.amazon.com/de/documentation/cloudwatch/)来获取使用此数据的自定义报告。

# web-services - 带有“距离矩阵”服务的肥皂

> ID：12951394
> 
> 赞同：0
> 
> 时间：2012-10-18T09:28:58.120
> 
> 标签：web-services, soap, google-maps-api-3

我想研究“距离矩阵”服务

我可以将“距离矩阵”服务加载到肥皂吗？

我尝试将此 URL 放在 Initial 中，但它不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:39:31.940

最后它奏效了

我**能够**将距离矩阵放入肥皂中

# php - 带有 JS 输出的 PHP 文件的标头过期

> ID：12951402
> 
> 赞同：3
> 
> 时间：2012-10-18T09:29:22.550
> 
> 标签：php, .htaccess, header, expires-header

如何将过期标头放在超出 JS 文件的 PHP 文件上？

# .htaccess

```
ExpiresActive on
ExpiresByType image/gif A29030400
ExpiresByType image/jpeg A29030400
ExpiresByType image/png A29030400
ExpiresByType text/css A29030400
ExpiresByType application/javascript A29030400 
```

# JS文件头

```
Cache-Control   max-age=29030400
Connection  Keep-Alive
Date    Thu, 18 Oct 2012 09:23:16 GMT
Etag    "300000002c8ba-15f-4cc3069c72d00"
Expires Thu, 19 Sep 2013 09:23:16 GMT
Keep-Alive  timeout=5, max=94
Server  Apache/2.2.22 (Win32) PHP/5.4.3 
```

# 输出 JS 文件的 PHP 文件的标头

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  Keep-Alive
Content-Length  1195
Content-Type    application/javascript
Date    Thu, 18 Oct 2012 09:23:16 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive  timeout=5, max=100
Pragma  no-cache
Server  Apache/2.2.22 (Win32) PHP/5.4.3
X-Powered-By    PHP/5.4.3 
```

# 代码 PHP 文件

```
<?php
header('Content-Type: application/javascript');
$js_output = array('something' => 'some value');
?>
var <?=json_encode($js_output)?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:06:10.133

您可以设置缓存标头：

```
<?php
header('Content-Type: application/javascript');
header("Cache-Control: max-age=29030400");
header("Cache-Control: public", false); 
$js_output = array('something' => 'some value');
?>
var <?=json_encode($js_output)?> 
```

另见： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:26:55.450

此解决方案将返回正确的 304 响应并停止 php 执行，从而允许客户端使用缓存的副本。您不能使用 mod_rewrite 在 htaccess 中完全做到这一点，因为 php 处理器总是会妨碍您。

## .htaccess

```
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType application/javascript   "access plus 1 year"
</IfModule>
<IfModule mod_headers.c>
    Header append Cache-Control "public"
</IfModule> 
```

## 例子.js.php

```
<?php
header('Content-Type: application/javascript');

if (false === ($timestamp = getlastmod())) {
    if (false === ($timestamp = @filemtime(__FILE__))) {
        if (false === ($timestamp = @filemtime($_SERVER['SCRIPT_FILENAME']))) {
            trigger_error('Failed to retrieve timestamp', E_USER_ERROR);
        }
    }
}
$timestamp_string = gmdate('r', $timestamp);

// Check if the client has the same page cached
if (isset($_SERVER["HTTP_IF_MODIFIED_SINCE"]) &&
    ($_SERVER["HTTP_IF_MODIFIED_SINCE"] == $timestamp_string)) {
    header("HTTP/1.1 304 Not Modified");
    exit;
}

// Inform the user agent what is our last modification date
header("Last-Modified: ".$timestamp_string);

$js_output = array('something' => 'some value');
echo 'var json = '.json_encode($js_output).PHP_EOL;
exit;
?> 
```

## 第一个 GET 响应

```
HTTP/1.1 200 OK
Date: Wed, 24 Oct 2012 16:20:05 GMT
Server: Apache/2.2.16 (Win32) PHP/5.3.3
X-Powered-By: PHP/5.3.3
Last-Modified: Wed, 24 Oct 2012 16:16:34 GMT
Cache-Control: max-age=31536000
Expires: Thu, 24 Oct 2013 16:20:05 GMT
Content-Length: 39
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: application/javascript 
```

## 第二个和后续的 GET 响应

```
HTTP/1.1 304 Not Modified
Date: Wed, 24 Oct 2012 16:21:31 GMT
Server: Apache/2.2.16 (Win32) PHP/5.3.3
Connection: Keep-Alive
Keep-Alive: timeout=5, max=100
Expires: Thu, 24 Oct 2013 16:21:31 GMT
Cache-Control: max-age=31536000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:48:45.067

您需要在 .htaccess 中保持几乎相同的 Expire 设置，即：

```
ExpiresActive on
ExpiresByType image/gif A29030400
ExpiresByType image/jpeg A29030400
ExpiresByType image/png A29030400
ExpiresByType text/css A29030400
ExpiresByType application/javascript A29030400
ExpiresDefault "access plus 1 month" 
```

然后在编写 JS 文件的 PHP 代码中使用正确的`Content-Type`和：

```
<?php
header('Content-Type: application/javascript');
exitIfNotModifiedSince(setLastModified());

function setLastModified($lastModified=NULL) {
    $pageModified = getlastmod();

    if(empty($lastModified) || ($lastModified < $pageModified))
        $lastModified = $pageModified;
    $headerModified = filemtime(__FILE__);
    if($headerModified > $lastModified)
        $lastModified = $headerModified;
    header('Last-Modified: ' . date("r",$lastModified));
    return $lastModified;
}

function exitIfNotModifiedSince($lastModified) {
    if(array_key_exists("HTTP_IF_MODIFIED_SINCE",$_SERVER)) {
        $ifModifiedSince = strtotime(preg_replace('/;.*$/', '',
                                     $_SERVER["HTTP_IF_MODIFIED_SINCE"]));
        if($ifModifiedSince >= $lastModified) { 
            header("HTTP/1.0 304 Not Modified");
            exit();
        }
    }
}
$jsData  = array('foo' => 'bar');
?>
var <?=json_encode( $jsData );?> 
```

在顶部。在 Firebug 中监控您的标题，它应该会显示如下内容：

```
HTTP/1.1 304 Not Modified
Cache-Control:max-age=29030400
Connection:close
Date:Wed, 24 Oct 2012 19:10:43 GMT
Expires:Wed, 25 Sep 2013 19:10:43 GMT
Server:Apache/2.2.9 (Unix) mod_ssl/2.2.9 OpenSSL/0.9.8h DAV/2 PHP/5.2.6
Content-Length: 31
Content-Type: application/javascript 
```

# delphi - 对 Outlook 文件夹中的项目进行排序时出现问题

> ID：12951408
> 
> 赞同：1
> 
> 时间：2012-10-18T09:29:34.197
> 
> 标签：delphi, automation, outlook

我在 Outlook 文件夹上调用 sort ，尝试**按接收时间排序**。但是，当文件夹包含非电子邮件项目 ( *a`Task`* ) 时，我收到一条错误消息，指出该`ReceivedTime`属性不存在。

```
oFolderItems := oFolder.Items;
oFolderItems.sort('ReceivedTime',2);  //2 = Descending 
```

排序的原因是，对于某些用户来说，我正在访问的文件夹中可能有数千封电子邮件，他们只想查看最新一封的 x 个。

关于如何避免非电子邮件项目的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:18:37.230

您可以使用[**DASL 过滤器**](http://msdn.microsoft.com/en-us/library/office/bb147579%28v=office.12%29.aspx)来限制给定`View`或`Items`集合中显示的项目。对于仅过滤邮件消息，您可以使用[**Message Class**](http://msdn.microsoft.com/en-us/library/office/aa171490%28v=office.11%29.aspx)属性（*MAPI 名称`PR_MESSAGE_CLASS`*）并将其限制为 just [`IPM.Note`](http://msdn.microsoft.com/en-us/library/office/bb176446%28v=office.12%29.aspx)。该[`_Items.Restrict`](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.outlook._items.restrict.aspx)方法将帮助您应用 DASL 过滤器。

```
string messageClassFilter = "@SQL=" + "\"" + "http://schemas.microsoft.com/mapi/proptag/0x001a001e" + "\"" + " LIKE 'IPM.Note%'";
oFolderItems := oFolder.Items.Restrict(messageClassFilter); // filter by Message Class
oFolderItems.sort('ReceivedTime',2);  //2 = Descending 
```

# c# - xpath 显示来自不同级别节点的数据

> ID：12951409
> 
> 赞同：1
> 
> 时间：2012-10-18T09:29:38.187
> 
> 标签：c#, xpath

```
<?xml version="1.0"?>

-<bookstore>            
        <book > 
            <title>aaaa</title> 
            -<author > 
                <first-name>firts</first-name> 
                <last-name>last</last-name> 
            </author> 
            <price>8.23</price> 
            <otherbooks>
                    <book > 
                        <title>bbb</title>      
                        <price>18.23</price> 
                    </book>     
                    <book > 
                        <title>ccc</title>      
                        <price>11.22</price> 
                    </book>     
            </otherbooks>
        </book> 
</bookstore> 
```

我想选择不同级别的所有书籍，然后显示每本书的信息（作者、标题和价格）。目前，代码还将显示第一本书的其他书籍。仅显示所需信息的最佳方式是什么。我需要使用 XPath。

```
xPathDoc = new XPathDocument(filePath);
xPathNavigator = xPathDoc.CreateNavigator();
XPathNodeIterator xPathIterator = xPathNavigator.Select("/bookstore//book");
foreach (XPathNavigator navigator in xPathIterator)
{
     XPathNavigator clone = navigator.Clone();
     clone.MoveToFirstChild();

     Console.WriteLine(clone.Name + " : " + clone.Value);
     while (clone.MoveToNext())
     {
         Console.Write(clone.Name + " : " + clone.Value + " | ");
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:31:59.770

双斜杠 ( `//`) 指定[所有后代](http://www.tizag.com/xmlTutorial/xpathdescendant.php)，而不仅仅是直接的后代。怎么样

```
/bookstore/book 
```

? 那只会让你达到最高水平`book`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:54:37.390

如果您愿意尝试 Linq To Xml ：

```
var xDoc = XDocument.Parse(xml); //or XDocument.Load(filename)
var books = xDoc.Root.Elements("book")
            .Select(b => new
            {
                Author = b.Element("author").Element("first-name").Value + " " +
                            b.Element("author").Element("last-name").Value,
                Books = b.Descendants("book")
                            .Select(x => new 
                            {
                                Title = x.Element("title").Value,
                                Price = (decimal)x.Element("price"),
                            })
                            .Concat(new[] { new { Title = b.Element("title").Value, 
                                                Price = (decimal)b.Element("price") } 
                                        })
                            .ToList()

            })
            .ToList(); 
```

# c# - 替换 DataColumn 中的值

> ID：12951411
> 
> 赞同：3
> 
> 时间：2012-10-18T09:29:42.557
> 
> 标签：c#, linq, datatable

循环行时如何替换列值？

我的 DataTable 有两列，我想替换每一行第一列的值。我无法获取或设置列值。到目前为止，我只能访问 DefaultValue 和 ColumnName 等。

即使创建新的 DataColumn()，我也无法设置它的值。

感觉好像我在这里遗漏了一些基本的东西......

```
 foreach (var row in dataTable.Rows)
        {
            foreach (DataColumn column in dataTable.Columns)
            {
                // column Unable to get or set value
            }

        } 
```

运行 .NET Framework 3.5，我应该使用 linq 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T09:38:42.770

```
for (int rowIndex = 0; rowIndex < dataTable.Rows.Count; rowIndex++)
{
  dataTable.Rows[rowIndex][0] = "Replacing value";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T09:35:38.403

由于`DataTable.Rows`仅实现`IEnumerable`而不是`IEnumerable<T>`您需要将其强制转换`DataRow`为`foreach`并且您不能使用 var：

```
foreach (DataRow row in dataTable.Rows)
{
    foreach (DataColumn column in dataTable.Columns)
    {
        row.SetField(column, newValue);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T10:59:21.937

你可以这样做

```
foreach (DataRow row in table.Rows)
{
    row.SetField(table.Columns.Cast<DataColumn>().Single(column => column.Ordinal == 0), "new");
} 
```

# php - 突然从“localhost”更改为“www.localhost.com”PHP

> ID：12951417
> 
> 赞同：0
> 
> 时间：2012-10-18T09:29:53.563
> 
> 标签：php, wordpress, xampp

我有各种应用程序和单个脚本在 XAMPP 中成功运行 - 简单的模式根文件夹（htdocs）==`http://localhost/`或者只是`localhost/`

我已经下载了一些 Wordpress 站点并将其移至适当的文件夹：它是 www.example.com/blog，我已将其移至 htdocs/blog。我做得很好（文件和文件夹递归搜索和替换，searchandreplacedb2.php 例程），结果是：

**键入：`http://localhost/blog/`**

**得到： `http://www.localhost.com/blog/`**

与 Firefox 通知：

> 连接被重置
> 
> 加载页面时重置与服务器的连接。

*注意：* 1.我尝试删除现有的.htaccess，2.递归搜索和替换wordpress文件没有任何情况（通常有）`www.example.com/blog/`。`localhost/blog`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:43:55.067

将此行添加到您的 .htaccess 怎么样

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^www.yourdomain.com [NC]
RewriteRule ^(.*)$ http://yourdomain.com/$1 [L,R=301] 
```

另外，检查您的数据库。您可能在某些表格中使用了错误的 URL。

干杯

# jquery - jQuery Ajax：等到第一次调用结束，发送另一个请求 $.Deferrent

> ID：12951436
> 
> 赞同：1
> 
> 时间：2012-10-18T09:30:50.060
> 
> 标签：jquery, jquery-deferred

我正面临 Deferrent 以及如何在这种特定情况下使用它的问题。

情景如下。

我有一个循环，我将一些数据发送到服务器。例如：

```
var array = [{"effect":"save","params":["login_0_form_form_login"],"url":"http://www.example.local/login"},{"effect":"redirect","params":["index"],"url":"http://www.example.local/index"}];

$.each(array,function(key,payload) {

 $.post(payload.url,payload);

}); 
```

然后是一个成功的方法来处理来自 ajax 调用的结果。

```
App.success = function(result){
   //Here I am deciding what to do with the result and checking for errors or warnings

   if(result.notification.success) {
      //Everything is good
   }
   else if(result.notification.error) {
      //Something is wrong, somehow stop the other ajax call  
   }
} 
```

尽管如此，我面临的问题是，服务器可能会返回错误，例如登录数据错误。在这种情况下，尽管服务器返回了错误的登录数据，它还是会重定向。我需要以某种方式控制上一个请求是否返回错误。如果是，请不要跟帖。

我试图在 $.when 函数中并使用 $.then 来返回 $.post。但我没有达到我所希望的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:39:52.070

您不应该使用循环 - AJAX 调用将立即（并行）开始，而不是一次运行一个。

我会使用递归回调循环来依次处理每个动作，并结合一个单独的`$.Deferred`对象来通知您发生了什么：

```
function processActions(actions) {
    var def = $.Deferred();

    (function nextAction() {
        var action = actions.shift();  // dequeue the next action
        if (action) {
            $.ajax(...).done(nextAction).fail(function() {
                def.reject();  // there was an error
            });
        } else {
            def.resolve();     // all done
        }
    })();  // invoke this function immediately

    return def.promise();
} 
```

# android - 使用 html5 中的 base64 数据播放音频

> ID：12951438
> 
> 赞同：14
> 
> 时间：2012-10-18T09:31:00.233
> 
> 标签：android, base64, android-mediaplayer, html5-audio

我创建了一个应用程序来使用本机 mediaPlayer 录制音频，将此音频文件转换为 base64 数据，并将其传递给 html5 音频标签，如下所示，

```
File file = new File(Environment.getExternalStorageDirectory()+"/"+ "audiofile"+"/"+"myAudio.mp3");
byte[] FileBytes =getBytesFromFile(file);
String base64 = Base64.encodeToString(FileBytes, Base64.NO_WRAP).toString();

public static byte[] getBytesFromFile(java.io.File file) throws IOException 
{
        InputStream is = new FileInputStream(file);
        long length = file.length();
        if (length > Integer.MAX_VALUE)
                         {

        }
        byte[] bytes = new byte[(int)length];
        int offset = 0;
        int numRead = 0;
        while (offset < bytes.length
               && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
            offset += numRead;
        }
        if (offset < bytes.length) {
            throw new IOException("Could not completely read file "+file.getName());
        }
        is.close();
        return bytes;
} 
```

将此 base64 值传递给网页（此处为 base64 数据示例），

```
<div id="audiodiv" >
<audio id="audio_player" src="data:audio/mp3;base64,AAAAGGZ0eXAzZ3A0AAAAAGlzb20zZ3A0AAARTG1kYXQEYzzH8GMEOf/gAAAABDcYx/BtBDP/4AAAAAQ2PMfwZwQ1/+AAAAAE/xjH8G0EM//gAAAABDY8x/BnBDX/4AAAAAT/GMfwbQQz/+AAAAAENjzH8GcENf/gAAAABP8Yx/BtBDP/4AAAAAQ2PMfwZwQ1/+AAAAAE/xjH8G0EM//gAAAABDY8x/BnBDX/4AAAAAT/GMfwbQQz/+AAAAAENjzH8GcENf/gAAAABP8Yx/BtBDP/4AAAAAQ2PMfwZwQ1/+AAAAAE/xjH8G0EM//gAAAABDY8x/BnBDX/4AAAAAT/GMfwbQQz/+AAAAAENjzH8GcENf/gAAAABP8Yx/BtBDP/4AAAAAQ2PMfwZwQ1/+AAAAAE/xjH8G0EM//gAAAABDY8x/BnBDX/4AAAAAT/GMfwbQQz/+AAAAAENjzH8GcENf/gAAAABP8Yx/BtBDP/4AAAAAQ2PMfwZwQ1/+AAAAAE/xjH8G0EM//gAAAABDY8x/BnBDX/4AAAAAT/GMfwbQQz/+AAAAAENjzH8GcENf/gAAAABP8Yx/BtBDP/4AAAAASPCWsPXrX5ouEbbAAENGyiU5X2xZzNHj4iBEIRVzOdk6EF/hbyygQjQr/InZhwEOS20kYEPHPUd4yo/tqiBipkBCMKwb2tqCq7rnzViAQ8QuQ5jWjgx8h0mawENI2vs427cY2VGMigBEJzkNuNLnGZsCL2XASW5sM8lD3naIrIGBwEoEI3+Ycp0L+6ktGkBI5z+306MT4dnojwfgQ8c+YJlDp2NBxx2JIEPOaoObLMsbDPF0BWBI4RYDmAuVddtQZ6ygSWEbwojehB8KdGgZAEPEKgyo1PUU4FIQKoBKAz9iiNKpHMMbACHASPc49o3QfOe119PLAENArZ843X4Rt+8EaoBNZzGdidz1GWxoIjAgT45q8IkL2GBoDkDRYEG42qPJ2GPoZdEaFuBJbmRAiCwXpUKAJqpASOa6rIrava30sHQroElubDg407QAQ4uJLKBBARvvqtdHsN9Or0QAQ8QorJkWkJliKk+WgElmu3ypHcWY8CmeHWBDzwrDiEYrFduN6mcgSO5qlz0kPZj40UjQQElmzj6cImOAxzb3+aBJFzscimpMZYdl02IAQ8Cot6gllI+cwINHIEkhkoOIF96SYi7G6eBJYmbxmNttE6WwuksgRVCqM4jXOxtDzILd4EPPDADDjFMIZ1+B+YBCMmlAmNu8BmWJp4DgROGmwdiuRhByze92oEaiWVPthCM7edfP10BJEHXr3ATyRJ7hArWATZKis8hYZLFotWQVAE2XM4GI1J8MLV+kK2BI5sPOydBrEPOMbiLAQ8QkvMkhEVng5ELlwETnPizKpY/ksVTTHSBFtCLzidsjHBnUnrDASGCrcImsCuNUEdsAAEI0IseJaxBvuKxGV4BI9CKOk7Ndgc7UWCrAQQMx+sMn0FXRrEO7IE2RCU3ojAdw6HbkycBBAR8um8TatTi0Vv7ATzCTQ7hmUGK4GIpmwEPDOWOLOOvz1uztyiBE4UnMyKuEg+2SpE7gT4YqP8i2k1lujmaJIEjia0PsgDTUnTYw64BMwKkP6KO19I/gCAKARCKi8siMEtxKxtDfIEVf433MSFu4Zaw9rABB6yQDiGKOatkQzYBARVbOaMuHtXvOjHajgEjyo0/FrZCLDtCnAkBE4RPzuUqGOZ2JxgHAQ8QvY7w0saq7EeGkAETmbjA8RE8+aaALTEBKDwYzm4RHAGKi7ONASOCfe8jKAkG9kC2/AEQhFhWIJPRXPPjzXUBDxC0uGUX8fZLDOPWARHCVyphll3kN9N3X4EUhRvw8sh/POQqwmyBB4RYUqKWS5wRDrr+ASWCouJhEz3giwOOzYEPDRlyVY9ttwWRzcSBDxswAmWgyaukzyRSgRCSbcIiNERwl1ydm4Elubn04Azeyxhd/lcBK0qXOiIwMc89TFHxgQQMyzJjGYSyoy9AIgEj9w0GIgLoT/nt4AQBFQRNIvGjpYCYzYfSATZsis8PNgBA0J9eIAEj0LzOLMsukT5UehuBPNJj0mKoU+DQqJjpARUQqD4gq36n6Ib3fQE2XM2CJbFNr+tYuj0BOdzqAiNUMDHXWkYlASGjej42i4uPq1drBgEVPApw45G4yhgCNTsBMwe97ydTF33pyPhHATTm4domEnsoDogKqYEjnMv2FjLoeMsDoJSBCP2pTvQ2Vq6N75XkASPc7sjiOTdngVsdZoEEPZYjI5lEhICUQXQBI7mUHysJAsnibqC2gSgBzJ4ivHuhsAtZ/YEPBq4yIbPJ3jhpVXKBDxz7YmKWl+Lmwsp6ATzbC9L1A4myetmnNoEVHNA2KNGimU8YqZKBOecI7LpW/eNlukyxgTZazz4gmhUNN0GZSoE8xAjOYpUed24MO6GBI6NJ7m4ghWrw7WAvAQ8QtwzjRLw6646hNIEjp78aJ4tqVPJUl4iBFRzLts44tHNUDD2OgSOczUKrSaAa4jeg8QE2cAqzhb49pjgCqGmBI4JNmyZSSarTghkVgQ8aLsIvNFeLwl7gngEEPDnyt4aONI6MNSABOcRKlg5vufHWKsHRAS1dC+6oGEKzHQhsmgE55w72Zamly9MTzygBLUJR8qmxeZa0IWVZgTnnEW6hnJXMo1fJpgE83Mu88MWqq+zk+BEBFScK/rNGmE0LaEAbATncziYukJOuOURYHIEjkonedAN4dGzBwVWBPPc+PmFYSPFolKcHATzETj6jFx1BzW0N64E5/pE+oqxLh+4hmZ+BPMRO+ga9u7pQYQvIgTnc0DrhCgnOtjLK5QE2RE3K41egTtuYSZ6BI9sovmJzyc7VmNfZAROQ0g7ynkgM7UM+BYEoL1I+z2+UI5EltISBFUZUT6HbicByeG4oAROOuM8m32paM3hGJ4EW0o8f4zs5c+LzJhwBJV4MRyOU1/fvIMtZgSSiuP4nn2PhXPIQAIEQuZLjYxGB6AyWDcgBFMg54mZYk8IdG89bgSHQ1rolRLAQsd2AZwEPCayyclX5tky2uIaBDzp/7yNXJHfOuturgSP8LFJzBW1lUOlqQwEVDeod62o5Y9q9cWMBI8KuDm9QOUb8eM3zgRUEGWKjLVE3iIheNwETiC3OMUSxfEs2SIwBI9C7IjZCU8qQFKXygQ8bEHIjWWR6Pn0EVQEj2xQyLlN7nzPK3YmBI4KtzmOZY+ho10W7ARUFDjJmW2i21562BIEQrroPc5TNCfYD72GBB7nUIy9jyStPAWY5gTTfEWqnexE7F0tzjAEVMJHOr7HJRytEG9+BNkUUMiZZv4fNyOSUgSOJ0T8iczHRF1EXGQEW/BPyIS+56hgw4B0BI4RQMiITEDfvaCDQgQe5cDpkCHGej3uF8YEAh5E+Z25kFuRYM+eBI8XXYidSOSxff+wjATn/DPMrAHnLfBW4DYE02BB7aklQ07ZZKcABLVgRdt1FhAL/yWAUARUnD/5uRMOzgWnaCAEQsDzio0ccV4aWzBIBKDTl/mdWaA2EIAoPAQ8X9zYiK7mF01B/cQEoGyoCZZF9h/DQ5xMBDxK2+iZcT+jEIzEsgRb8HM8jTQvwfDf3EIEPL3wOINERukx5mKCBFRf4Pi+v68xsYLnygTz5TN7vIIV08UBDpwE5zc7i7mCD3lvSP3GBOfwSK3OFG9UQxwYagTzQkT43AklCrxJmvgE5/BC6ZgRaMs8c4niBOcqR3qs3PQCSnsZMATnnEl7piwXkcqEtwIEtRE/2neN8SOFDU16BOd0SNuqGH/YUtg5jASVD0LKvb016jzP4fwE02FKbaZIDtcWOUhSBNOQSnndZ7SA6fEFvATTYcrGWeDiVlO2C0YE0ypYPHk9oiXcArjsBFRzVLOIWtDPu0RwFASg5mwIqHBdk+63BAQEW3NmSYl4ppBltDRaBAMz9PhdNIC/fXKvIgRb8NQIjUXBJhhpFsIErQmnsYmr7jl84gnQBLVAL/udV3GP1pWVgARU/EBZndcvnFkDgSQE55DEq6AdJSj5ZJWYBNN0Rdutkg/zShEf3gTn/Es9dYBA+DzKI1oE5/xMfaxodzmxcH9KBOdzUJu5gS8qx0LlggTnnEp9oAgWxzcEewwE5wlJOroZjzkwbk4GBOdgRnq4TnVMxmx0KgTzc0zlqpevMexJMZAEWyr1OY0d4Enks4ngBI8RssPIFuV4h9ATOASgszl/Hvhd0bKj/lwE5+U/yb2xZTYYeJoSBFQQP9qjo1a8p0IndgTnEEqnkPknTKStKo4E55xLW6OKFjQKIkkMBOcJUMW7R/6fxkHojgTnnFCawKGnp11JD9IE59xRWqkctrrHXCD6BLWcTamiBYVxW7AHGATnc09pPeeg5D+7YZoE85xDzVnfBsfaOms4BNk6Uci19TFFBBE8pgTnCU8MqRQflrZJeZYEHuVQ6Z1j1ISTyI2ABFRzRpupei+/Xt2p7gTT8E6coAFmsSa3pN4E89xOq7BMduppD6DyBOfwT3mpkY5UTiIOSATnCVGDhnPn65dnNdwE55xO+j32UMaoG0mSBOcRUDebmE+hciIMyARU607KOLWgnseFrCwEj+b7xZmXJrRgxxxgBFvwPzyNwoDU8HmYHARV4+TPNTX2z0yhFEoEHtw7eaOuZ8lklFgeBPMTTMXpEOPwMcp2mASVwUT9qWyH8kQwk9AE2RFOya51notXh9MCBJWcS6uKxn6MjMNlwgRUa09tOex3I9pfBxIEj+VU3ZZIF6KFEpc2BI4R/8iNPzDtpcL1agRCc1RcjWTg7ZyWAQYEVQBe2duYkIHlOtnOBFRzV46JNZdQdkIUBgQeCET9mVNWHZbHB5gEHtzJrNAJZuopPHCeBJXcTe2rFi8COjgHggTZSVNJs4Cq30EPghwEjkL1+J0GgPmnliGEBFtJTYw6dX6iNwmEQAQ8i4yp7G6TsypHmEoEjjS8+N0JuArMFPJwBKYISd25BpdkBUErCATnm0czlubHutCK4b4EtQlLvakIJoZ9ncUQBPOcS8qWaZbZVhqg8ASWJ/oqvU4UdJlQATgEluY9PsstlKFN4HLgBI5rTzmKWb/HGx722ARVJ8vMimKu/JbAChoEjxHJHYcgEeBHZcK6BNmNO/mG52eE727m/gQeSUS9kh9FLD5K4eoEjpxDPDi/FaRPEQqKBFtrWHmJdqa/8Qz5bgQrMLvtttUEUa3xmCIEq+srvK1J67X5pbTOBB5hVNl5q2cvXn2wEgTn8FK9fhYZSFAQgDAEtZRQ/DO9WmjH4CuOBOecU3fSAQRz9gUp3gTzc1NqyK0WJYd5w6oEVWZPG81nO8glgfSoBI8mpHiE9KphKJaHWgSgF6vJx2VB/kgtUggEECfcuJjRZxfrkPBiBEVs4HOXn1wFe2eIvAT4Qlg5t7IRYz9G6MwE00JEvbeNcR1HIm+iBPgnUMyKbVjcUpEI/gQ8c2isiGSwDRYslNQEPOYfhYlM5g6iCZHOBI8Rc3itL7GM6yINKARbc+bpPbUA9OiTVyAEANU4yPxfFjsEJfO8BOd8IPmdnDQ+5dmCkASVNDr9nm2ega5DBU4EtQ9Mva0cJczQB3yEBPMRVJo8+rXZHBL7ZgS13Fw6lMJ3FOcTaeQE8xFaRdkqprD/fprsBFR0YDidGUADB6be3gRUM1X1zZDRnOl4miIEPPBXeji4kRPFIXtsBI5zKCWl+NQUZWAfTgRCCTj5iK0F+e2UWv4EPHMnyJRAh/RgUJvwBEIR+0jdAYGwfydp5gSPQlbIPeCBeLQ4KyIEoCr0y4ahBnRCsz0sBI8KiNWdG5G7wbpQAAQ8CVPtOCohQDtzEIwErUKgOTwyRHivGZgWBPgRR4uIzlFhsgyf3gRCc4ZINLD2mnBPEUwEThFfOF1+YSqxQ7g6AAACMW1vb3YAAABsbXZoZAAAAABQf8UMUH/FDAAAA+gAABqQAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAGldHJhawAAAFx0a2hkAAAAB1B/xQxQf8UMAAAAAQAAAAAAABqQAAAAAAAAAAAAAAAAAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAABQW1kaWEAAAAgbWRoZAAAAABQf8UMUH/FDAAAH0AAANSAAAAAAAAAACxoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU291bmRIYW5kbGUAAAAA7W1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAAsXN0YmwAAABFc3RzZAAAAAAAAAABAAAANXNhbXIAAAAAAAAAAQAAAAAAAAAAAAEAEAAAAAAfQAAAAAAAEWRhbXIgICAAAIP/AAEAAAAgc3R0cwAAAAAAAAACAAAAAQAAAKAAAAFTAAAAoAAAABRzdHN6AAAAAAAAAA0AAAFUAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAFUAAAAAQAAABRzdGNvAAAAAAAAAAEAAAAgAAAAGHVkdGEAAAAQU0RMTlNFUV9QTEFZ"  controls="controls" autobuffer="autobuffer">
</audio>
</div> 
```

但**音频没有播放**。你能告诉我我犯了什么错误吗？

> 注意：myAudio.mp3 是存储在 sdcard 中的录制音频文件

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-28T05:26:14.753

请尝试以下代码..

检查android支持的音频编解码器..

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

<audio controls="controls" autobuffer="autobuffer" autoplay="autoplay">
    <source src="data:audio/wav;base64,UklGRhwMAABXQVZFZm10IBAAAAABAAEAgD4AAIA+AAABAAgAZGF0Ya4LAACAgICAgICAgICAgICAgICAgICAgICAgICAf3hxeH+AfXZ1eHx6dnR5fYGFgoOKi42aloubq6GOjI2Op7ythXJ0eYF5aV1AOFFib32HmZSHhpCalIiYi4SRkZaLfnhxaWptb21qaWBea2BRYmZTVmFgWFNXVVVhaGdbYGhZbXh1gXZ1goeIlot1k6yxtKaOkaWhq7KonKCZoaCjoKWuqqmurK6ztrO7tbTAvru/vb68vbW6vLGqsLOfm5yal5KKhoyBeHt2dXBnbmljVlJWUEBBPDw9Mi4zKRwhIBYaGRQcHBURGB0XFxwhGxocJSstMjg6PTc6PUxVV1lWV2JqaXN0coCHhIyPjpOenqWppK6xu72yxMu9us7Pw83Wy9nY29ve6OPr6uvs6ezu6ejk6erm3uPj3dbT1sjBzdDFuMHAt7m1r7W6qaCupJOTkpWPgHqAd3JrbGlnY1peX1hTUk9PTFRKR0RFQkRBRUVEQkdBPjs9Pzo6NT04Njs+PTxAPzo/Ojk6PEA5PUJAQD04PkRCREZLUk1KT1BRUVdXU1VRV1tZV1xgXltcXF9hXl9eY2VmZmlna3J0b3F3eHyBfX+JgIWJiouTlZCTmpybnqSgnqyrqrO3srK2uL2/u7jAwMLFxsfEv8XLzcrIy83JzcrP0s3M0dTP0drY1dPR1dzc19za19XX2dnU1NjU0dXPzdHQy8rMysfGxMLBvLu3ta+sraeioJ2YlI+MioeFfX55cnJsaWVjXVlbVE5RTktHRUVAPDw3NC8uLyknKSIiJiUdHiEeGx4eHRwZHB8cHiAfHh8eHSEhISMoJyMnKisrLCszNy8yOTg9QEJFRUVITVFOTlJVWltaXmNfX2ZqZ21xb3R3eHqAhoeJkZKTlZmhpJ6kqKeur6yxtLW1trW4t6+us7axrbK2tLa6ury7u7u9u7vCwb+/vr7Ev7y9v8G8vby6vru4uLq+tri8ubi5t7W4uLW5uLKxs7G0tLGwt7Wvs7avr7O0tLW4trS4uLO1trW1trm1tLm0r7Kyr66wramsqaKlp52bmpeWl5KQkImEhIB8fXh3eHJrbW5mYGNcWFhUUE1LRENDQUI9ODcxLy8vMCsqLCgoKCgpKScoKCYoKygpKyssLi0sLi0uMDIwMTIuLzQ0Njg4Njc8ODlBQ0A/RUdGSU5RUVFUV1pdXWFjZGdpbG1vcXJ2eXh6fICAgIWIio2OkJGSlJWanJqbnZ2cn6Kkp6enq62srbCysrO1uLy4uL+/vL7CwMHAvb/Cvbq9vLm5uba2t7Sysq+urqyqqaalpqShoJ+enZuamZqXlZWTkpGSkpCNjpCMioqLioiHhoeGhYSGg4GDhoKDg4GBg4GBgoGBgoOChISChISChIWDg4WEgoSEgYODgYGCgYGAgICAgX99f398fX18e3p6e3t7enp7fHx4e3x6e3x7fHx9fX59fn1+fX19fH19fnx9fn19fX18fHx7fHx6fH18fXx8fHx7fH1+fXx+f319fn19fn1+gH9+f4B/fn+AgICAgH+AgICAgIGAgICAgH9+f4B+f35+fn58e3t8e3p5eXh4d3Z1dHRzcXBvb21sbmxqaWhlZmVjYmFfX2BfXV1cXFxaWVlaWVlYV1hYV1hYWVhZWFlaWllbXFpbXV5fX15fYWJhYmNiYWJhYWJjZGVmZ2hqbG1ub3Fxc3V3dnd6e3t8e3x+f3+AgICAgoGBgoKDhISFh4aHiYqKi4uMjYyOj4+QkZKUlZWXmJmbm52enqCioqSlpqeoqaqrrK2ur7CxsrGys7O0tbW2tba3t7i3uLe4t7a3t7i3tre2tba1tLSzsrKysbCvrq2sq6qop6alo6OioJ+dnJqZmJeWlJKSkI+OjoyLioiIh4WEg4GBgH9+fXt6eXh3d3V0c3JxcG9ubWxsamppaWhnZmVlZGRjYmNiYWBhYGBfYF9fXl5fXl1dXVxdXF1dXF1cXF1cXF1dXV5dXV5fXl9eX19gYGFgYWJhYmFiY2NiY2RjZGNkZWRlZGVmZmVmZmVmZ2dmZ2hnaGhnaGloZ2hpaWhpamlqaWpqa2pra2xtbGxtbm1ubm5vcG9wcXBxcnFycnN0c3N0dXV2d3d4eHh5ent6e3x9fn5/f4CAgIGCg4SEhYaGh4iIiYqLi4uMjY2Oj5CQkZGSk5OUlJWWlpeYl5iZmZqbm5ybnJ2cnZ6en56fn6ChoKChoqGio6KjpKOko6SjpKWkpaSkpKSlpKWkpaSlpKSlpKOkpKOko6KioaKhoaCfoJ+enp2dnJybmpmZmJeXlpWUk5STkZGQj4+OjYyLioqJh4eGhYSEgoKBgIB/fn59fHt7enl5eHd3dnZ1dHRzc3JycXBxcG9vbm5tbWxrbGxraWppaWhpaGdnZ2dmZ2ZlZmVmZWRlZGVkY2RjZGNkZGRkZGRkZGRkZGRjZGRkY2RjZGNkZWRlZGVmZWZmZ2ZnZ2doaWhpaWpra2xsbW5tbm9ub29wcXFycnNzdHV1dXZ2d3d4eXl6enp7fHx9fX5+f4CAgIGAgYGCgoOEhISFhoWGhoeIh4iJiImKiYqLiouLjI2MjI2OjY6Pj46PkI+QkZCRkJGQkZGSkZKRkpGSkZGRkZKRkpKRkpGSkZKRkpGSkZKRkpGSkZCRkZCRkI+Qj5CPkI+Pjo+OjY6Njo2MjYyLjIuMi4qLioqJiomJiImIh4iHh4aHhoaFhoWFhIWEg4SDg4KDgoKBgoGAgYCBgICAgICAf4CAf39+f35/fn1+fX59fHx9fH18e3x7fHt6e3p7ent6e3p5enl6enl6eXp5eXl4eXh5eHl4eXh5eHl4eXh5eHh3eHh4d3h4d3h3d3h4d3l4eHd4d3h3eHd4d3h3eHh4eXh5eHl4eHl4eXh5enl6eXp5enl6eXp5ent6ent6e3x7fHx9fH18fX19fn1+fX5/fn9+f4B/gH+Af4CAgICAgIGAgYCBgoGCgYKCgoKDgoOEg4OEg4SFhIWEhYSFhoWGhYaHhoeHhoeGh4iHiIiHiImIiImKiYqJiYqJiouKi4qLiouKi4qLiouKi4qLiouKi4qLi4qLiouKi4qLiomJiomIiYiJiImIh4iIh4iHhoeGhYWGhYaFhIWEg4OEg4KDgoOCgYKBgIGAgICAgH+Af39+f359fn18fX19fHx8e3t6e3p7enl6eXp5enl6enl5eXh5eHh5eHl4eXh5eHl4eHd5eHd3eHl4d3h3eHd4d3h3eHh4d3h4d3h3d3h5eHl4eXh5eHl5eXp5enl6eXp7ent6e3p7e3t7fHt8e3x8fHx9fH1+fX59fn9+f35/gH+AgICAgICAgYGAgYKBgoGCgoKDgoOEg4SEhIWFhIWFhoWGhYaGhoaHhoeGh4aHhoeIh4iHiIeHiIeIh4iHiIeIiIiHiIeIh4iHiIiHiIeIh4iHiIeIh4eIh4eIh4aHh4aHhoeGh4aHhoWGhYaFhoWFhIWEhYSFhIWEhISDhIOEg4OCg4OCg4KDgYKCgYKCgYCBgIGAgYCBgICAgICAgICAf4B/f4B/gH+Af35/fn9+f35/fn1+fn19fn1+fX59fn19fX19fH18fXx9fH18fXx9fH18fXx8fHt8e3x7fHt8e3x7fHt8e3x7fHt8e3x7fHt8e3x7fHt8e3x8e3x7fHt8e3x7fHx8fXx9fH18fX5+fX59fn9+f35+f35/gH+Af4B/gICAgICAgICAgICAgYCBgIGAgIGAgYGBgoGCgYKBgoGCgYKBgoGCgoKDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KCgoGCgYKBgoGCgYKBgoGCgYKBgoGCgYKBgoGCgYKBgoGCgYKBgoGCgYKBgoGBgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCAgICBgIGAgYCBgIGAgYCBgIGAgYCBgExJU1RCAAAASU5GT0lDUkQMAAAAMjAwOC0wOS0yMQAASUVORwMAAAAgAAABSVNGVBYAAABTb255IFNvdW5kIEZvcmdlIDguMAAA" />
</audio>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-03T01:57:41.310

是的，没有。

除非用户事件（按钮点击等）提示，否则 Android 不会播放音频。

你可以想象如果人们可以让其他人的手机随时随地说什么，那会是多么快乐的混乱。

但是，一旦用户提示音频样本，显然可以在没有提示的情况下再次播放它。

我希望 Base64 也能解决这个问题，但没有雪茄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-27T17:13:07.177

您错过了**音频标签中的****源**标签，请在此处查看有关它的更多信息[https://www.w3schools.com/tags/tag_audio.asp](https://www.w3schools.com/tags/tag_audio.asp)

 **DATA URL是在线base64转换器的嵌入音频文件的简单方法。我使用[Base64 Online](https://base64.online/encoders/encode-audio-to-base64)，您可以选择文件并获得多个结果，选择 Audio TAG 并获得这样的结果

```
<audio controls><source src="data:audio/mpeg;base64,SUQzAwAAAAA2PVRDT04AAAAFAAAAKDApAFRZRVIAAAA..."></audio> 
```**

# oauth - Youtube API - BadAuthentication 尽管登录正确

> ID：12951443
> 
> 赞同：1
> 
> 时间：2012-10-18T09:31:26.000
> 
> 标签：oauth, youtube-api

我有一个谷歌帐户，可以通过 www.youtube.com 登录。但是，当我通过 Youtube API 使用以下代码时：

```
$httpClient = Zend_Gdata_ClientLogin::getHttpClient(

          $username = 'EXAMPLE@EXAMPLE.COM',
          $password = 'EXAMPLE',
          $service = 'youtube',
          $client = null,
          $source = 'EXAMPLE', // a short string identifying your application
          $loginToken = null,
          $loginCaptcha = null,
          "https://www.google.com/accounts/ClientLogin"); 
```

我收到以下错误：`'Authentication with Google failed. Reason: BadAuthentication'`

为什么我可以使用完全相同的凭据登录 google 和 youtube，但不能登录 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:36:50.970

也许您在您的 gmail 帐户上启用了两步验证，请注意此页面顶部的消息：

[https://developers.google.com/accounts/docs/AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T10:15:24.027

问题是您使用的是 clientLogin，witch 是为已安装的应用程序设计的，而不是 Web 应用程序。您应该将其更改为 AuthSub 以获取令牌以进行 API 调用。

也就是说，我们有同样的问题并且我们没有改变它（没有足够的时间来改变谷歌、Twitter 和 Facebook 中的 aaaall auth 更改，不是吗？）。我们的解决方案是通知有该问题的客户，他们必须通过单击此链接并按照说明禁用验证码：[http ://www.google.com/accounts/DisplayUnlockCaptcha](http://www.google.com/accounts/DisplayUnlockCaptcha)

这不是正确的方式，但这是一种方式

# java - 如何在列表中找到最大和最小的日期？

> ID：12951445
> 
> 赞同：10
> 
> 时间：2012-10-18T09:31:28.250
> 
> 标签：java, date, datetime

我有对象的集合，`Collection basics = periodic.getGeneratedBasic();` 当迭代这个集合并获取每个对象并转换它时，我可以提取每个对象的日期。现在在这一点上，我想在这个对象集合中检查哪一个是最小和最大的日期。

**有谁知道这是怎么做到的吗？**

```
Date max;
Date min;
for(Object o:basics){
      Basic b = (Basic) o;
      Date temp;
      if(b.State=='U'){
           basicAList.add(ba);
           dateCollection.add(b.firstDateTime);
           temp= ;
           if(b.firstDateTime <)
     }
  } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-09-18T06:08:47.780

在 Java 8 中，您可以执行以下操作：

```
final Date maxDate = dates.stream()
    .max(Date::compareTo)
    .get(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-18T09:48:29.060

这是一个经典的**最小和最大**问题。无论您的对象是日期、字符串还是数字。重要的是它们具有可比性。

**排序然后取最大值/最小值**

最直接的方法就像其他人的答案一样，使用 java 内置的 Sort 方法对集合进行排序。然后将第一个和最后一个元素作为您的最小/最大对象。然而，它将线性时间`O(n)`问题变成了`O(nlgn)`. 好吧，如果性能问题不是您正在考虑的问题。你可以跳过阅读我的休息文本。我会赞成@Quoi 的回答。

**线性时间的简单方法：**

保留两个变量最小值和最大值，然后查找集合中的每个元素。与您当前的最小值和最大值进行比较并获得正确的值。直到结束。

**线性时间的优化方式**

上面的方法很简单，但它带来了更多的比较`(2n)`。我们可以稍微优化一下。和上面一样，你有 min 和 max 两个变量。在循环中，您采用一对元素而不是单个元素。您首先比较该对中的两个元素。取较大的与您的最大变量进行比较，将较小的与您的最小变量进行比较。现在我们只需要进行`3(n/2)`比较。

希望能帮助到你

**编辑**

我认为代码并不难写。正如 Quoi 所建议的，如果代码可以使答案完整，我会添加它们。

请注意，在示例中，我使用了一个 int 数组。基本上它与 Date 对象相同。代码以单元测试方法编写。它看起来很长，因为我试图清楚地解释上面的想法。

```
@Test
    public void testx() {
        final int size = 300000;
        final int[] array = new int[size];
        final Random random = new Random();
        // fill a huge array for testing
        for (int i = 0; i < array.length; i++) {
            array[i] = random.nextInt();
        }

        int min1 = array[0], max1 = array[1], cmp1 = 0;
        int min2 = array[0], max2 = array[1], cmp2 = 0;

        for (int i = 2; i < array.length; i++) {
            min1 = array[i] < min1 ? array[i] : min1;
            cmp1++;
            max1 = array[i] > max1 ? array[i] : max1;
            cmp1++;
        }

        LOG.debug("linear time to find Max & Min simultaneously");
        LOG.debug("Size: {}", size);
        LOG.debug("Max : {}", max1);
        LOG.debug("Min : {}", min1);
        LOG.debug("Total comparisons : {}", cmp1);

        // optimized linear
        int bigger, smaller;
        final boolean odd = array.length % 2 == 1;
        final int till = odd ? array.length - 1 : array.length;
        for (int i = 2; i < till; i += 2) {

            if (array[i] >= array[i + 1]) {
                bigger = array[i];
                smaller = array[i + 1];
            } else {
                bigger = array[i + 1];
                smaller = array[i];
            }
            cmp2++;
            min2 = smaller < min2 ? smaller : min2;
            cmp2++;
            max2 = bigger > max2 ? bigger : max2;
            cmp2++;
        }
        if (odd) {
            min2 = array[size - 1] < min2 ? array[size - 1] : min2;
            max2 = array[size - 1] > max2 ? array[size - 1] : max2;
        }
        LOG.debug("====================================================");
        LOG.debug("optimized linear time to find Max & Min simultaneously");
        LOG.debug("Size: {}", size);
        LOG.debug("Max : {}", max2);
        LOG.debug("Min : {}", min2);
        LOG.debug("Total comparisons : {}", cmp2);
    } 
```

输出

```
DEBUG:  linear time to find Max & Min simultaneously
DEBUG:  Size: 300000
DEBUG:  Max : 2147475519
DEBUG:  Min : -2147446732
DEBUG:  Total comparisons : 599996
DEBUG:  ====================================================
DEBUG:  optimized linear time to find Max & Min simultaneously
DEBUG:  Size: 300000
DEBUG:  Max : 2147475519
DEBUG:  Min : -2147446732
DEBUG:  Total comparisons : 449997 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-18T09:33:38.193

为什么不使用[Collections.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)然后取第一个/最后一个条目？您可以使用*自然*排序，也可以指定您自己的[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)。

请注意，这将对集合*进行就地*排序。它不会给你一个新的排序集合。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-18T09:32:34.953

[`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)是`Comparable`，因此您可以使用 比较两个`Date`s [`compareTo()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)：

```
dateOne.compareTo(dateTwo); 
```

> **返回**： 如果参数 Date 等于此 Date，则值为 0；如果此 Date 在 Date 参数之前，则值小于 0；如果此 Date 在 Date 参数之后，则值大于 0。

您还可以`Collection`使用[`Collections.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)(O(n logn)) 对整体进行排序：

```
Collections.sort(dateCollection); 
```

或者得到最大值[`Collections.max()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#max%28java.util.Collection%29)和最小值[`Collections.min()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#min%28java.util.Collection%29)（都在线性时间 O(n) 中）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T09:36:32.963

```
Date max = new Date(0);
Date min = new Date(0);
for(Object o:basics){
    Basic b = (Basic) o;
    if(b.State=='U'){
        basicAList.add(ba);
        dateCollection.add(b.firstDateTime);
        if(min.compareTo(b.firstDateTime) > 0) min = b.firstDateTime;
        else if(max.compareTo(b.firstDateTime) < 0) max = b.firstDateTime;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T09:33:10.407

您可以根据日期对您的收藏进行排序并获取它。如果按升序排列，您将首先获得最小日期，最后获得最大日期，如果按降序排序，则在顶部获得最大日期，最后获得最小日期。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-18T09:33:40.683

你可以看看[这个](https://stackoverflow.com/questions/5927109/sort-objects-in-arraylist-by-date)以前的 SO 帖子。您可以按日期对对象进行排序，然后选择集合中的第一个和最后一个项目。

# android - 发送文件已完成，但实际上在 Asmack android 中失败

> ID：12951451
> 
> 赞同：0
> 
> 时间：2012-10-18T09:31:44.473
> 
> 标签：android, xmpp, file-transfer, asmack

这就是我尝试使用`asmack`lib（[来自 GtalkSms 项目](http://code.google.com/r/fschmaus-gtalksms/source/browse/)）和 Ejabberd 服务器通过 XMPP 发送文件的方式：

```
//Configure provider in onCreate()
 configure(ProviderManager.getInstance());

// Configure function
private void configure(ProviderManager pm){
    pm.addIQProvider("si","http://jabber.org/protocol/si", new StreamInitiationProvider());
    pm.addIQProvider("query","http://jabber.org/protocol/bytestreams", new BytestreamsProvider());
    pm.addIQProvider("open","http://jabber.org/protocol/ibb", new OpenIQProvider());
    pm.addIQProvider("close","http://jabber.org/protocol/ibb", new CloseIQProvider());
    pm.addExtensionProvider("data","http://jabber.org/protocol/ibb", new DataPacketProvider());
}

// This is how I send file after login to server (I put everything below in a 
function, inside a Thread and call thread.start() at the end of function):

// set the serviceDiscoveryManager
ServiceDiscoveryManager sdm = ServiceDiscoveryManager.getInstanceFor(xmppConn);
if (sdm == null){
    sdm = new ServiceDiscoveryManager(xmppConn);
}
sdm.addFeature("http://jabber.org/protocol/disco#info");
sdm.addFeature("jabber:iq:privacy");

 // Create the file transfer manager
 FileTransferManager manager = new FileTransferManager(connection);
 FileTransferNegotiator.setServiceEnabled(connection, true);
 OutgoingFileTransfer transfer = manager
                    .createOutgoingFileTransfer(Receiver
                            + "@MyDomain");
 transfer.sendFile(new File(myFilePath), "myDescription"); 
```

如果我使用另一个客户端来测试文件传输（[http://coccinella.im/](http://coccinella.im/)），那么我可以在（2 个 coccinella 客户端）之间通过我的 Ejarbberd 服务器聊天并发送文件。如果我在 android 中使用 coccinella 客户端和我的客户端，我可以在他们之间聊天，我可以接收从 coccinella 客户端发送到我的 android 客户端的文件。但是，当我尝试将文件从我的 android 客户端发送到 coccinella 客户端时，`transfer.isDone()`总是返回`true`并且`transfer.getStatus() == Status.error`还返回`true`.

那么我的安卓客户端怎么了？我使用了错误的库吗？还是我错过了什么？

**编辑：**这是我从调试器得到的：`<iq id="QgJIb-29" to="phuocdh@localhost/Smack" from="phuoctest@localhost/Coccinella@phuocdh-pc" type="error"><error code="404" type="CANCEL"><item-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/><query xmlns="http://jabber.org/protocol/bytestreams"><streamhost></streamhost></query></error></iq>`

# arrays - 在 MATLAB 中，什么时候最适合使用 bsxfun？

> ID：12951453
> 
> 赞同：136
> 
> 时间：2012-10-18T09:31:53.397
> 
> 标签：arrays, matlab, bsxfun

我注意到很多关于 Stack Overflow 上 MATLAB 问题的好答案经常使用这个函数`bsxfun`。为什么？

**动机：**在 MATLAB 文档中`bsxfun`，提供了以下示例：

```
A = magic(5);
A = bsxfun(@minus, A, mean(A)) 
```

当然，我们可以使用以下方法执行相同的操作：

```
A = A - (ones(size(A, 1), 1) * mean(A)); 
```

事实上，一个简单的速度测试表明第二种方法快了大约 20%。那么为什么要使用第一种方法呢？我猜在某些情况下使用`bsxfun`会比“手动”方法快得多。我真的很想看到这种情况的一个例子以及为什么它更快的解释。

此外，这个问题的最后一个元素，再次来自 MATLAB 文档`bsxfun`：“C = bsxfun(fun,A,B) 将函数句柄 fun 指定的逐元素二元运算应用于数组 A 和 B，单例启用扩展。”。“启用单例扩展”这句话是什么意思？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-10-18T13:19:42.440

我使用的三个原因`bsxfun`（[文档](http://www.mathworks.com/help/matlab/ref/bsxfun.html)、[博客链接](http://blogs.mathworks.com/loren/2008/08/04/comparing-repmat-and-bsxfun-performance/)）

1.  `bsxfun`比`repmat`（见下文）更快
2.  `bsxfun`需要更少的打字
3.  Using`bsxfun`和 using 一样`accumarray`，让我对自己对 MATLAB 的理解感觉良好。

`bsxfun`将沿着它们的“单一维度”复制输入数组，即数组大小为 1 的维度，以便它们与另一个数组的相应维度的大小相匹配。这就是所谓的“[单例扩展](https://www.mathworks.com/help/parallel-computing/gpuarray.bsxfun.html)”。顺便说一句，如果您调用`squeeze`.

对于非常小的问题，该`repmat`方法可能更快 - 但在该数组大小下，两种操作都非常快，以至于它可能不会对整体性能产生任何影响。更快有两个重要原因`bsxfun`：（1）计算发生在编译代码中，这意味着数组的实际复制永远不会发生，以及（2）`bsxfun`是多线程 MATLAB 函数之一。

我在我相当快的笔记本电脑上运行了 MATLAB R2012b之间`repmat`的速度比较。`bsxfun`

![在此处输入图像描述](../Images/ce54888e4325851856ebebf8deb78a4a.png)

对我来说，`bsxfun`大约比`repmat`. 如果数组变大，差异会变得更加明显：

![在此处输入图像描述](../Images/65a36b2ef85a8062fa495dbec7a96133.png)

运行时的跳跃`repmat`发生在 1 MB 的数组大小附近，这可能与我的处理器缓存的大小有关 -`bsxfun`跳跃并没有那么糟糕，因为它只需要分配输出数组。

您可以在下面找到我用于计时的代码：

```
n = 300;
k=1; %# k=100 for the second graph
a = ones(10,1);
rr = zeros(n,1);
bb = zeros(n,1);
ntt = 100;
tt = zeros(ntt,1);
for i=1:n;
   r = rand(1,i*k);
   for it=1:ntt;
      tic,
      x = bsxfun(@plus,a,r);
      tt(it) = toc;
   end;
   bb(i) = median(tt);
   for it=1:ntt;
      tic,
      y = repmat(a,1,i*k) + repmat(r,10,1);
      tt(it) = toc;
   end;
   rr(i) = median(tt);
end 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-10-18T19:54:27.287

就我而言，我使用`bsxfun`它是因为它避免了我考虑列或行问题。

为了写你的例子：

```
A = A - (ones(size(A, 1), 1) * mean(A)); 
```

我必须解决几个问题：

1.  `size(A,1)`或者`size(A,2)`

2.  `ones(sizes(A,1),1)`或者`ones(1,sizes(A,1))`

3.  `ones(size(A, 1), 1) * mean(A)`或者`mean(A)*ones(size(A, 1), 1)`

4.  `mean(A)`或者`mean(A,2)`

当我使用 时`bsxfun`，我只需要解决最后一个：

a)`mean(A)`或`mean(A,2)`

你可能会认为它是懒惰的，但是当我使用 时`bsxfun`，我**的错误更少**并且我的**编程速度更快**。

此外，它更短，从而提高了**打字速度**和**可读性**。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-18T09:45:29.577

非常有趣的问题！[我最近在回答这个问题](https://stackoverflow.com/questions/12867524/matlab-calculation-on-subset-of-vector-then-shift-and-repeat/12872704#12872704)时偶然发现了这种情况。考虑以下代码，它通过向量计算大小为 3 的滑动窗口的索引`a`：

```
a = rand(1e7, 1);

tic;
idx = bsxfun(@plus, [0:2]', 1:numel(a)-2);
toc

% Equivalent code from im2col function in MATLAB
tic;
idx0 = repmat([0:2]', 1, numel(a)-2);
idx1 = repmat(1:numel(a)-2, 3, 1);
idx2 = idx0+idx1;
toc;

isequal(idx, idx2)

Elapsed time is 0.297987 seconds.
Elapsed time is 0.501047 seconds.

ans =

 1 
```

在这种情况下`bsxfun`几乎快两倍！它有用且快速，因为它**避免了**为矩阵显式分配内存，`idx0`并将`idx1`它们保存到内存中，然后再次读取它们以添加它们。由于内存带宽是一项宝贵的资产，并且通常是当今架构的瓶颈，因此您希望明智地使用它并减少代码的内存需求以提高性能。

`bsxfun`允许您这样做：基于将任意运算符应用于两个向量的所有元素对来创建矩阵，而不是对通过复制向量获得的两个矩阵进行显式操作。那是*单例扩展*。您也可以将其视为[BLAS](https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)的**外部产品**：

```
v1=[0:2]';
v2 = 1:numel(a)-2;
tic;
vout = v1*v2;
toc
Elapsed time is 0.309763 seconds. 
```

您将两个向量相乘以获得一个矩阵。只是外积只执行乘法，并且`bsxfun`可以应用任意运算符。附带说明一下，看到它`bsxfun`与 BLAS 外部产品一样快是非常有趣的。BLAS 通常被认为是提供**性能**...

多亏了 Dan 的评论，[Loren 写了一篇很棒的文章来](http://blogs.mathworks.com/loren/2008/08/04/comparing-repmat-and-bsxfun-performance/)讨论这个问题。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-10-07T20:27:53.040

从 R2016b 开始，MATLAB 支持多种运算符的[*隐式扩展*](https://uk.mathworks.com/help/matlab/release-notes.html#bu90yi3-1)`bsxfun`，因此在大多数情况下不再需要使用：

> 以前，此功能可通过该`bsxfun`功能使用。现在建议您将大多数使用替换为`bsxfun`直接调用支持*隐式扩展*的函数和运算符。与 using 相比`bsxfun`，*隐式扩展*提供了**更快的速度**、 **更好的内存使用**和**更高的代码可读性**。

Loren 的博客上有关于*隐式扩展*及其性能的[详细讨论。](http://blogs.mathworks.com/loren/2016/10/24/matlab-arithmetic-expands-in-r2016b/)[引用](http://blogs.mathworks.com/loren/2016/10/24/matlab-arithmetic-expands-in-r2016b/#comment-46516)[MathWorks](https://en.wikipedia.org/wiki/MathWorks)的 Steve Eddins 的话：

 *> 在 R2016b 中，*隐式扩展*的工作速度与大多数情况下一样快或更快`bsxfun`。*隐式扩展*的最佳性能增益是使用较小的矩阵和数组大小。对于大矩阵大小，隐式扩展的速度往往与`bsxfun`.

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-10-19T10:52:31.927

事情并不总是与 3 种常用方法一致：`repmat`、按索引扩展和`bsxfun`. 当您进一步增加矢量大小时，它会变得更加有趣。见情节：

![比较](../Images/537d4d596eb5b20389ae0dd5ee744d5a.png)

`bsxfun`实际上在某些时候变得比其他两个稍慢，但令我惊讶的是，如果你进一步增加向量大小（>13E6 个输出元素），bsxfun 突然又变得快了大约 3 倍。他们的速度似乎在逐步跳跃，并且顺序并不总是一致的。`bsxfun`我的猜测是它也可能取决于处理器/内存大小，但通常我认为我会尽可能坚持。*

# asp.net - ASP.Net 部署错误：无法加载文件或程序集

> ID：12951454
> 
> 赞同：0
> 
> 时间：2012-10-18T09:31:54.510
> 
> 标签：asp.net, .net

我有一个 .Net 4.0 中的 asp.net 网站，在我们的暂存环境中运行良好。当我们将其投入生产时，我们收到以下错误

“/mysite”应用程序中的服务器错误。

无法加载文件或程序集“SupportSite.UI”或其依赖项之一。访问被拒绝。异常详细信息：System.IO.FileLoadException：无法加载文件或程序集“SupportSite.UI”或其依赖项之一。访问被拒绝。

我认为这是一个安全问题。它使用**IIS WAS**设置进行部署。

1.  我需要为哪些用户授予权限（以及所有文件夹）？

2.  aspnet_wp.exe或w3wp.exe对应的用户是什么？

参考

1.  [无法加载文件或程序集或其依赖项之一。访问被拒绝。问题是随机的，但发生一次后，它会继续](https://stackoverflow.com/questions/11096225/could-not-load-file-or-assembly-or-one-of-its-dependencies-access-is-denied-th)

2.  [无法加载文件或程序集“Telerik.Web.UI”或其依赖项之一](https://stackoverflow.com/questions/8754626/could-not-load-file-or-assembly-telerik-web-ui-or-one-of-its-dependencies)

3.  [临时 Asp.Net 文件的 ApplicationPoolIdentity 权限](https://stackoverflow.com/questions/2996556/applicationpoolidentity-permissions-on-temporary-asp-net-files)

4.  [无法加载文件或程序集，尝试了网上的所有解决方案](https://stackoverflow.com/questions/11539323/could-not-load-file-or-assembly-tried-all-solution-on-net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:09:54.983

我假设您使用 IIS 7.5 ..

您有两个选择：将您的库添加到 GAC，或授予应用程序池帐户读取权限。

请参阅有关应用程序池帐户权限的信息： [http ://www.iis.net/learn/manage/configuring-security/application-pool-identities](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:36:02.730

您需要将**lib**文件夹的读取权限授予**IIS_IUSRS**帐户。

# animation - 一个简单的过渡动画

> ID：12951455
> 
> 赞同：0
> 
> 时间：2012-10-18T09:31:57.643
> 
> 标签：animation, windows-8, microsoft-metro

尝试创建一个简单的纸牌游戏，我想制作一个**过渡动画**，将一个点`Image`从一个`Canvas`点移动到另一个点。我怎样才能做到这一点？

我想知道这样的动画是否可以开箱即用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:36:15.447

您可以只使用故事板并提供开始/结束位置。

我显示/隐藏文本等，更改不透明度等没有问题。事实上，我使用的所有动画都是 WPDev 的直接端口，它们工作得很好。

更多关于他们在这里 [http://msdn.microsoft.com/en-us/magazine/cc721608.aspx](http://msdn.microsoft.com/en-us/magazine/cc721608.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:06:48.720

I recommend a Microsoft website named [.toolbox](http://www.google.com.tw/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCAQFjAA&url=http%3A%2F%2Fwww.microsoft.com%2Fdesign%2Ftoolbox%2F&ei=WF6FUNgPh-eYBaSvgMgC&usg=AFQjCNE9tDBllVxDSAJ0pwhWtOldNmxRhQ&sig2=WvUKEGqQ-laAwrc0_gJWzA) which contains lots of video tutorial and sample code teaching you how to create animation by Blend and visual studio 2010. Those code samples mostly are written by Silverlight in vs 2010\. I tried to compile them under vs 2012, but it failed.

# c# - SQLiteConnection DisposedObject

> ID：12951457
> 
> 赞同：3
> 
> 时间：2012-10-18T09:31:59.753
> 
> 标签：c#, sqlite, exception

```
class SQLiteDatabase
    {
        String dbConnection;
        static SQLiteConnection cnn;
        static int connections = 0;
        /// <summary>
        ///     Default Constructor for SQLiteDatabase Class.
        /// </summary>
        public SQLiteDatabase()
        {
            dbConnection = "Data Source=SQLiteOphthaMetrics.db;foreign keys=true;";
            if (connections == 0)
            {
                cnn = new SQLiteConnection(dbConnection);
                cnn.Open();
                this.ExecuteNonQuery("CREATE TABLE IF NOT EXISTS patients ( id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, birthday TEXT, gender TEXT, iriscolor INTEGER);");
                this.ExecuteNonQuery("CREATE TABLE IF NOT EXISTS images ( nameRed TEXT NOT NULL PRIMARY KEY, checksumRed TEXT NOT NULL, "
                    + "nameGreen TEXT NOT NULL, checksumGreen TEXT NOT NULL, state INTEGER, cvalue REAL, sharpness REAL, deviation REAL, area REAL, redExposure REAL, "
                    + "redGain REAL, greenExposure REAL, greenGain REAL, zfocus INTEGER, flipped INTEGER, patientID INTEGER, FOREIGN KEY (patientID) REFERENCES patients(id));");
            }
            connections++;
        }

        ~SQLiteDatabase()
        {
            connections--;
            if (connections == 0)
            {
                cnn.Close();
                cnn.Dispose();
            }
        }
    } 
```

此代码引发 DisposedObjectException

```
System.ObjectDisposedException was unhandled
  Message=Auf das verworfene Objekt kann nicht zugegriffen werden.
Objektname: "SQLiteConnection".
  Source=System.Data.SQLite
  ObjectName=SQLiteConnection
  StackTrace:
       bei System.Data.SQLite.SQLiteConnection.CheckDisposed()
       bei System.Data.SQLite.SQLiteConnection.Close()
       bei EyeScanner.SQLiteDatabase.Finalize()
  InnerException: 
```

我目前只在代码中调用 SQLiteDatabase 一次，因此在析构函数中连接 = 1，但我不明白为什么它会在类析构函数完成之前处理对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T09:36:51.663

我相信您正在尝试在类实例准备好处置后处置连接。如果您`using`在 SQLiteConnection 中使用语句会更好。SQLiteConnection 类实现了 IDisposable，您将能够执行以下操作：

```
using(cnn = new SQLiteConnection(dbConnection))
{
     cnn.Open();
     this.ExecuteNonQuery("...your query");
} 
```

这将充当一个`try/finally`块，即使发生异常，连接也会在该`using`块之后关闭并释放。

**对于数据库连接，最好的方法是尽可能晚打开和尽可能早关闭。**

# opengl - NV_path_rendering 替代方案

> ID：12951459
> 
> 赞同：10
> 
> 时间：2012-10-18T09:32:00.003
> 
> 标签：opengl, gpu, bezier

我刚刚观看了 Siggraph 2012 上的一个非常令人印象深刻的演示：

[http://nvidia.fullviewmedia.com/siggraph2012/ondemand/SS106.html](http://nvidia.fullviewmedia.com/siggraph2012/ondemand/SS106.html)

我的问题是，这是一个专有的 Nvidia 扩展，在 GPU 上快速渲染贝塞尔路径的其他可能性是什么？或者，是否有希望最终成为 OpenGL 标准的一部分？是否有可能给出最终发生的时间估计？

你知道处理 GPU 路径渲染的任何其他（最好是开源）项目吗？

编辑：原始论文现在有一个新的“附件”：

[https://developer.nvidia.com/sites/default/files/akamai/gamedev/files/nvpr_annex.pdf](https://developer.nvidia.com/sites/default/files/akamai/gamedev/files/nvpr_annex.pdf)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-06T10:17:11.377

## 现成的替代品

**NanoVG**（[https://github.com/memononen/nanovg](https://github.com/memononen/nanovg)）似乎有一点吸引力（[http://www.reddit.com/r/opengl/comments/28z6rf/whats_a_popular_vector_c_library_for_opengl/](http://www.reddit.com/r/opengl/comments/28z6rf/whats_a_popular_vector_c_library_for_opengl/)）。所以你可以看看他们的实现。不过，我自己并没有使用过 NanoVG，而且我对它的内部结构也很陌生。我所知道的是他们已经明确拒绝使用`NV_path_rendering`：[https ://github.com/memononen/nanovg/issues/25](https://github.com/memononen/nanovg/issues/25)

正如我在上面的评论中已经提到的那样，NV_path_rendering 现在已经在 Skia 中实施，并且似乎也受到了 cairo 的青睐，请参阅上面 tjklemz 答案下方的评论以获取有关这些详细信息的链接。NV_path_rendering 的一个问题是它在某种程度上依赖于固定功能管道，因此与 OpenGL ES 2.0 有点不兼容。但是有一种解决方法[https://code.google.com/p/chromium/issues/detail ?id=344330](https://code.google.com/p/chromium/issues/detail?id=344330)

我会远离任何与 OpenVG 相关的东西。从事这项工作的委员会于 2011 年解散；它现在基本上是一个遗留产品/API。OpenVG 的大多数实现（包括 ShivaVG）也很古老，并且根据[https://github.com/memononen/nanovg/issues/113](https://github.com/memononen/nanovg/issues/113)使用固定功能的 OpenGL如果你真的必须使用类似 OpenVG 的库，**MonkVG**看起来最好在免费的（代码：[https](https://github.com/micahpearlman/MonkVG) ://github.com/micahpearlman/MonkVG ；2010 年公告[http://www.khronos.org/message_boards/showthread.php/6776-MonkVG -an-OpenSource-implementation-available](http://www.khronos.org/message_boards/showthread.php/6776-MonkVG-an-OpenSource-implementation-available)）。他们声称它可以通过 OpenGL ES 1.1 和 2.0 在 Windows、MacOS X、iOS 和 Android 上运行。[相当大的] 警告是 MonkVG 不是 OpenVG 的完整实现。有关缺少的内容，请参阅其代码页上的“TODO”部分。

我还发现 cairo (& pango) 开发人员 Behdad Esfahbod 编写了一个新的字形（即字体）渲染**库**（[https://code.google.com/p/glyphy/）：“GLyphy](https://code.google.com/p/glyphy/)**是使用 OpenGL ES2 着色语言的有符号距离场 (SDF) 文本渲染器。[...] GLyphy [...] 使用提交给 GPU 的实际向量来表示 SDF。这导致了非常高质量的渲染。”据我所知，它还没有在开罗使用。（Behdad [从 Red Hat] 搬到了谷歌，而且 cairo 已经有一段时间没有看到发布了，所以也许 GLyphy 会去转而使用 Skia，谁知道...）我不确定该解决方案对任意路径的推广程度。（在另一个方向上，NV_path_rendering 也可以渲染字体和字距调整，以防你不知道。）那里是 Linux.conf.au 2014 上的一次演讲，如果您对 GLyphy 感兴趣，您绝对应该观看：[https](https://www.youtube.com/watch?v=KdNxR5V7prk) ://www.youtube.com/watch?v=KdNxR5V7prk如果您不熟悉（原始）SDF方法见[http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf](http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf)**

 **我发现了一个 Mozilla 开发人员的演讲，总结了当今使用的常用方法：[https](https://www.youtube.com/watch?v=LZis03DXWjE#t=828) ://www.youtube.com/watch?v=LZis03DXWjE#t=828 （时间戳是跳过他告诉你什么的介绍部分GPU 是。）

## DYI（可能）

顺便说一句，很多路径渲染的东西都是命令/状态更改密集型的。我认为 Mantle、DX12 和它的 OpenGL 等价物（主要是扩展[http://gdcvault.com/play/1020791/](http://gdcvault.com/play/1020791/)）可能会改善这一点。

我想我还应该提到，Nvidia 已获得（至少）四项与 NV_path_rendering 相关的专利：

*   [https://www.google.com/patents/US8698837](https://www.google.com/patents/US8698837)
*   [https://www.google.com/patents/US8698808](https://www.google.com/patents/US8698808)
*   [https://www.google.com/patents/US8704830](https://www.google.com/patents/US8704830)
*   [https://www.google.com/patents/US8730253](https://www.google.com/patents/US8730253)

请注意，还有大约 17 份与这些相关的 USPTO 文件“也发布为”，其中大部分是专利申请，因此完全有可能从这些文件中授予更多专利。对此的更新：谷歌并没有将*所有*这些链接在一起，所以肯定还有一些被授予：

*   [https://www.google.com/patents/US8786606](https://www.google.com/patents/US8786606)
*   [https://www.google.com/patents/US8773439](https://www.google.com/patents/US8773439)

我不确定他们愿意在什么条件下许可这些...

我发现 Kilgard 自己的一个非常好的常见问题解答，关于“矢量图形/路径渲染的特别之处”，不幸的是它被埋在 OpenGL 论坛[http://www.opengl.org/discussion_boards/showthread.php/175260-GPU的某个地方-加速路径渲染？p=1225200&viewfull=1#post1225200](http://www.opengl.org/discussion_boards/showthread.php/175260-GPU-accelerated-path-rendering?p=1225200&viewfull=1#post1225200)。对于任何考虑快速/破解替代解决方案的人来说，这都是一本非常有用的读物​​。

Direct3D 11.1 中还有一项新功能可能很有用，因为 Microsoft 使用它来改进他们在 Windows 8 中的 Direct2D 实现；它被称为*目标独立光栅化*（TIR）。除了微软有一个专利申请外，我对此知之甚少。[http://www.google.com/patents/US20120086715](http://www.google.com/patents/US20120086715)问题是只有 AMD GPU 似乎真正支持它，因为这个“口水战” [http://www.hardwarecanucks.com/news/war-of-words-在-nvidia-and-amd-over-directx-11-1-support-continues/之间](http://www.hardwarecanucks.com/news/war-of-words-between-nvidia-and-amd-over-directx-11-1-support-continues/)

## 采用

我不知道 NVpr 何时会被非 Nvidia 采用，但我认为他们正在努力推动它。[OpenGL 4.5 Nvidia 演示文稿](http://www.ustream.tv/recorded/51255959/)几乎已经被它取代了——至少就演示软件而言，我认为这有点愚蠢（因为它不是 OpenGL 4.5 核心的一部分）。Neil Trevett 还不止一次地介绍了 NVpr（例如[https://www.youtube.com/watch?v=eTdLwfOLoG0#t=2095](https://www.youtube.com/watch?v=eTdLwfOLoG0#t=2095)）， Adobe Illustrator beta 2014和 Google 的 Skia 也在[使用它。](http://on-demand.gputechconf.com/gtc/2014/video/S4867-path-fast-lines-adobe-illustrator.mp4)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T22:26:40.740

[ShivaVG](http://ivanleben.blogspot.com/2007/07/shivavg-open-source-ansi-c-openvg.html "湿婆VG")是路径渲染的开源替代方案。有关 OpenVG 实现的列表，请参阅此 Stack Overflow 问题：[Best OpenVG Implemenatation](https://stackoverflow.com/questions/401422/best-openvg-implementation "最佳 OpenVG 实施")

基本上，您有几个选择：使用**OpenVG**实现（如**ShivaVG**），使用 OpenGL 实现或扩展（如**NV_path_rendering**），或完全使用其他东西，如**Direct2D**。

但是，NV_path_rendering 的其他替代方案甚至无法接近其功能集和渲染质量。NV_path_rendering 可以原生处理字体（这很*重要*- 没有字体，你是吐司），以真实视角缩放等等（在 Illustrator 中尝试！），与 3D 混合，使用 sRGB，使用片段着色器，并且确实这一切都快得令人难以置信。它还实现了用户交互，OpenVG 没有指定 AFAIK。

独特的是，NV_path_rendering*没有*发明新标准。相反，它实现了几个行业标准，例如**PostScript**和**SVG**，重点是质量和速度（很少同时拥有这两者），这是您目前在其他任何地方都找不到的。

（另外，Mark Kilgard 是项目负责人。来吧。这家伙很聪明。）

* * *

会成为标准吗？很难知道。至于使用什么，这实际上取决于您此时的目的/需求。寻找应用程序的高质量路径渲染？NV_path_rendering 肯定。在应用程序（尤其是移动设备）中寻找基本分辨率无关的图形？OpenVG 可能会更好。Nvidia 的解决方案不是完全可移植的，这太糟糕了，但我不会回避使用它。我更喜欢有质量的解决方案；有时可移植性并不是一切。

Nvidia 将他们的解决方案与 OpenVG 进行了比较，不幸的是，OpenVG 并没有提供太多好处。所以，是的，它可能有希望成为一个标准。但是，因为根据 IBM 的说法，未来一切都将被嵌入，也许希望它是开放的，而不是想要更多的标准。

*“标准的好处是你有很多可供选择。” ——《计算机网络》，第 2 版，p。254*

* * *

有关**NV_path_rendering 功能**的更多信息，我建议您查看：[An Introduction to NV_path_rendering](http://developer.download.nvidia.com/assets/gamedev/files/An_Introduction_to_NV_path_rendering.pdf "NV_path_rendering 简介")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:04:11.077

> 在 GPU 上快速渲染贝塞尔路径的其他可能性是什么？

使用细分和/或几何着色器将一组控制点原位细分为凸块，由三角形外壳定义。然后将曲率参数传递给片段着色器，如果片段在每个补丁的边界内，则执行每个片段的测试，否则将其丢弃。

如果近似是有序的，那么只需镶嵌成三角形网格就可以了。**

# javascript - Javascript函数不适用于单选按钮列表

> ID：12951460
> 
> 赞同：1
> 
> 时间：2012-10-18T09:32:07.870
> 
> 标签：javascript, asp.net

我有一个 javascript 函数，其中基于选择我必须启用一行并禁用同一页面上的按钮。早些时候，它是通过后面的代码处理的，并且使用相同的逻辑可以正常工作。现在它不起作用。

**JS函数：**

```
function ValidateRadioButtonList()
{         
   var RBL = document.getElementById('<%=rbListExamShot.ClientID%>');
   var radiobuttonlist = RBL.getElementsByTagName("input");
   var counter = 0;
   var atLeast = 1
   for (var i = 0; i < radiobuttonlist.length; i++) {
   if (radiobuttonlist[i].checked) {

   counter++;
   var selected = i;
   }
   }
   if (atLeast = counter) {
   // return arguments.IsValid;
   var RowMessage = document.getElementById  ('<%                               =RowCliamMessage.ClientID%>');
   RowMessage.style.display = "block";
   }
   else {

   RowMessage.style.display = "none";
   }
   if (selected == 1) {

   var Submit = document.getElementById('<%=Save.ClientID%>');
   Submit.disabled = true;
   return false;
   }
   else {
   return true;
   }
 } 
```

asp.net 控制和验证器：

```
 <td  align="left">
            <asp:RadioButtonList CssClass="label" ID="rbListExamShot" runat="server" AutoPostBack="true"
                RepeatDirection="Horizontal" ValidationGroup="Save"  
                onselectedindexchanged="rbListExamShot_SelectedIndexChanged">
                <asp:ListItem Text="Single Shot" Value="1"></asp:ListItem>
                <asp:ListItem Text="Double Shot" Value="2"></asp:ListItem>
            </asp:RadioButtonList>
            </td>
            <td>
              <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" Text="Please select voucher type"
                Display="Dynamic" ControlToValidate="rbListExamShot" ValidationGroup="Save"
                ForeColor="Red" Font-Bold="False"></asp:RequiredFieldValidator>
                 <asp:CustomValidator ID="CustomValidator1" runat="server" ValidationGroup="Save"
                Display="Dynamic" ErrorMessage=".Double Shot Vouchers cannot be reimbursed."
                ControlToValidate="rbListExamShot" ClientValidationFunction="ValidateRadioButtonList"
                ForeColor="Red" Font-Bold="False"></asp:CustomValidator>
        </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:55:01.110

感谢大家的评论..问题是我在 var 中获取客户端 ID，然后尝试设置属性..现在我正在做类似的事情：document.getElementById('<%=Save.ClientID%>')。 disabled = true ..它对我有用！谢谢大家

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T10:10:25.727

```
<td  align="left">
        <asp:RadioButtonList CssClass="label" ID="rbListExamShot" runat="server" AutoPostBack="true"
            RepeatDirection="Horizontal" ValidationGroup="Save"  
            onselectedindexchanged="rbListExamShot_SelectedIndexChanged();">
            <asp:ListItem Text="Single Shot" Value="1"></asp:ListItem>
            <asp:ListItem Text="Double Shot" Value="2"></asp:ListItem>
        </asp:RadioButtonList>
        </td>
        <td>
          <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" Text="Please select voucher type"
            Display="Dynamic" ControlToValidate="rbListExamShot" ValidationGroup="Save"
            ForeColor="Red" Font-Bold="False"></asp:RequiredFieldValidator>
             <asp:CustomValidator ID="CustomValidator1" runat="server" ValidationGroup="Save"
            Display="Dynamic" ErrorMessage=".Double Shot Vouchers cannot be reimbursed."
            ControlToValidate="rbListExamShot" ClientValidationFunction="ValidateRadioButtonList"
            ForeColor="Red" Font-Bold="False"></asp:CustomValidator>
    </td> 
```

# authentication - Tortoise Hg 如何对用户进行身份验证？

> ID：12951462
> 
> 赞同：0
> 
> 时间：2012-10-18T09:32:09.360
> 
> 标签：authentication, version-control, mercurial, dvcs, tortoisehg

我正在使用**Tortoise Hg**来管理我的*Mercurial*存储库（克隆、推送等）。但我不清楚 Tortoise Hg 如何对用户进行身份验证。如果我*克隆*或*推送*受保护的存储库，**Tortoise Hg**将要求提供用户凭据。如果我输入凭据，Tortoise hg 如何对用户进行身份验证（我的意思是后台进程）？如何像在**Tortoise SVN中一样在****Tortoise Hg**中创建用户。谁知道答案请帮忙。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:35:33.083

您不能“在 TortoiseHG 中创建用户”。

THG 只是问你服务器问了什么，仅此而已。除非您完成了一些额外的步骤，否则它不会在任何地方持续存在。

> 如果我输入凭据，Tortoise hg 如何对用户进行身份验证（我的意思是后台进程）？

THG 不会对您的用户进行身份验证，它只是将凭据按原样发送到服务器。

在您的情况下，它只是一个基本的身份验证，如果您想保留它 - 您可以在您的（存储库级别一级或全局）的`[auth]`部分中对其进行硬编码或使用扩展。后者是优选的。`hgrc``mercurial_keyring`**

# jquery - fullcalendar.js：一次拖动多个事件

> ID：12951469
> 
> 赞同：0
> 
> 时间：2012-10-18T09:32:33.433
> 
> 标签：jquery, ruby-on-rails, jquery-ui, drag-and-drop, fullcalendar

要求如下：

1.  我们将元素 X 拖放到（比如说）2012 年 10 月 19 日
2.  我们在同一天（2012 年 10 月 19 日）拖放元素 Y
3.  直观地指示日历上的元素已“连接”
4.  将元素对保存到数据库

框架：Ruby on Rails 3.2.8、jQuery-1.8.1、fullcalendar.js 1.5.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:15:00.510

我会在 FullCalendar 事件中创建一个非标准字段，名为`linkedto`. 对于事件 A，这将包含它所链接到的事件 B 的事件 ID，反之亦然。您使要拖放到 Fullcalendar 上的元素可拖放。一旦一个元素被拖放到某一天（使用 Fullcalendar 拖放回调），您就可以在内存 ( `clientEvents`) 中的 FullCalendar 事件中搜索当天的事件。如果没有找到，则在当天使用来自 drop 回调的详细信息创建一个新事件（称为 A）。如果找到一个事件，则使用`linkedto`链接事件 ID (A.id) 和链接事件的`linkedto`字段使用新的事件 ID (B.id) 进行更新。创建事件 B 后，使用 ajax post 将两个事件保存回服务器（确保保存事件的所有详细信息，包括`linkedto`详细信息）。

不确定您希望如何直观地链接这两个事件。这对事件在每个月的每一天都共享一种独特的颜色就足够了吗？您可以为每个月的每一天设置一组颜色（1 到 31），并`backgroundColor`在创建事件时将事件对设置为该颜色。

# sql - 如何在sql server中查看图片

> ID：12951472
> 
> 赞同：0
> 
> 时间：2012-10-18T09:32:43.800
> 
> 标签：sql, sql-server

> **可能重复：**
> [在 SSMS 中查看图像？](https://stackoverflow.com/questions/2669952/see-images-in-ssms)

有什么方法可以查看存储在 sql server 数据库表中的图像。当然，我们可以从应用程序（.net，java）中查看它，但我想从 sql server managements studio 中查看它。有没有设置或任何。请建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:42:37.500

SQL Server Management Studio 仅支持图像的导入和导出，不支持 lob（图像）数据类型的查看和编辑功能。

`SqlLobEditor`将支持这些功能的[参考](http://www.withdata.com/sqllobeditor.html)

# java - Android，viewpager，每个布局都有自己的activity

> ID：12951473
> 
> 赞同：0
> 
> 时间：2012-10-18T09:32:47.070
> 
> 标签：java, android, android-viewpager, multiscreen

我有 4 个屏幕（4 个布局和 4 个活动）。这是我如何切换它的代码：

```
@Override
public Fragment getItem(int position) {
    switch (position) {
    case 0:
        return new DetailFragment();
    case 1:
        return new ImageFragment(R.drawable.ic_launcher);
    case 2:
        return new ImageFragment(R.drawable.b);
    case 3:
        return new CompFragment(R.drawable.b);

    default:
        return null;
    }
} 
```

但是，当我在 comp 布局和 CompFragment 活动中添加 onClick 方法时，它仍然尝试从 MainActivity 执行方法（并且找不到显示错误方法）：

```
<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="onClick"
    android:text="Button" /> 
```

我想布局有自己的活动。这个怎么做 ？

**编辑：** CompFragment 扩展 Fragment 而不是 FragmentActivity

```
public class CompFragment extends Fragment {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:41:34.183

> 我想布局有自己的活动。这个怎么做 ？

您不这样做，因为这不受支持。如果您不希望按钮单击转到活动，请摆脱该属性，并让您的`android:onClick`片段调用代替。`setOnClickListener()``Button`

# ms-access - 如何通过传递查询将数据从 Access 表附加到 SQL Server 表？

> ID：12951475
> 
> 赞同：1
> 
> 时间：2012-10-18T09:32:53.747
> 
> 标签：ms-access, sql-server-2008-r2, append, pass-through

似乎只能使用**传递查询**从 SQL Server 表中检索数据并进入 MS Access。但是另一种方式呢？从 Access 表到 SQL Server 表。

当我需要高性能时，我在 MS Access 中有哪些选择？
*（将附加查询附加到链接表的正常方法**太慢了**）*

在传递查询中，我无法引用 MS Access 表或查询，因此我的 INSERT INTO 语句无法工作。是否可以通过 VBA 解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:12:31.390

您可以在直通查询中使用 OPENROWSET。

```
SELECT id,
       atext
INTO   anewtable
FROM   OPENROWSET('Microsoft.ACE.OLEDB.12.0',
                  'z:\docs\test.accdb'; 'admin';'',table1); 
```

您可能需要以下部分或全部选项：

```
sp_configure 'show advanced options', 1;
RECONFIGURE;
GO
sp_configure 'Ad Hoc Distributed Queries', 1;
RECONFIGURE;
GO

EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0',
     N'AllowInProcess', 1
GO
EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', 
     N'DynamicParameters', 1
GO 
```

我怀疑它会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T14:11:32.037

在 Access 中可以使用宏来使用 SetValue 动态创建传递查询定义（我认为这现在称为 SetProperty）。基本上，您可以更新现有直通查询的查询定义，然后运行它。我这样做过一次，速度要快得多，但那是很久以前的事了。我可能有一段 VB 循环通过一个表来创建查询。

# wordpress - wp-ecommerce 产品链接指向错误的 url

> ID：12951476
> 
> 赞同：2
> 
> 时间：2012-10-18T09:32:57.043
> 
> 标签：wordpress, e-commerce, permalinks

嗨，我最近在我正在开发的网站上安装了 wp-ecommerce。我之前曾尝试通过创建一个新页面并将短代码从原始“产品页面”复制到我的新页面“我们的产品”来更改商店出现的页面。我现在意识到毫无意义。我决定不这样做，只使用原始页面 - 但是现在当我转到“产品页面”时，包括结帐等在内的所有内容都可以正常工作，除非您单击产品在其自己的页面上查看它。它跳转到 domain/our-products/... 页面已损坏。

我试图将 wp-options 中的所有设置更改为原始页面，但没有任何区别。我进入 phpmyadmin，发现对“我们的产品”的引用，例如 wp-options 表中的错误页面。如果我将这些更改为正确的页面，它应该可以工作吗？

不过也很奇怪的是，当我删除“我们的产品”页面时，整个商店都停止工作了。

这是网站产品页面：[http ://www.nuvogadgets.com/products-page/](http://www.nuvogadgets.com/products-page/)

当您单击产品时会发生以下情况：[http ://www.nuvogadgets.com/our-products/product-category/test-product/](http://www.nuvogadgets.com/our-products/product-category/test-product/)

干杯保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:47:58.683

进行备份（！），然后[从 Visser Labs 安装 Store Toolkit](http://www.visser.com.au/wp-ecommerce/plugins/store-toolkit/)，并从中重新链接损坏的页面。

# javascript - jquery 弹出窗口总是显示

> ID：12951481
> 
> 赞同：0
> 
> 时间：2012-10-18T09:33:10.367
> 
> 标签：javascript, jquery, cookies, popup

嗨，我正在尝试在页面加载显示弹出窗口后创建一个 cookie，但不知何故，弹出窗口仍然显示，因为我认为 cookie 没有创建。谁能告诉我为什么会这样，我的错误在哪里？

所以这是我的 popup.js 文件内容

```
//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;

//loading popup with jQuery magic!
function loadPopup(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact").fadeIn("slow");
        popupStatus = 1;
    }
}

//disabling popup with jQuery magic!
function disablePopup(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $("#popupContact").fadeOut("slow");
        popupStatus = 0;
    }
}

//centering popup
function centerPopup(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("#popupContact").height();
    var popupWidth = $("#popupContact").width();
    //centering
    $("#popupContact").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}
//---------------cookies-------------------//

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
  {
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
}

function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
alert(c_value);
document.cookie=c_name + "=" + c_value;
}

function checkCookie()
{
var username=getCookie("shoppingKatalog");
if (username!=null && username!="")
  {
    alert(username);
  }
else 
  {
    //centering with css
    centerPopup();
    //load popup
    loadPopup();    
    setCookie("shoppingKatalog","istekuva-za-eden-den",321);
  }
}

//--------------end cookies---------------//

//CONTROLLING EVENTS IN jQuery
$(document).ready(function(){

    checkCookie();
    //LOADING POPUP
    //Click the button event!
    $("#button").click(function(){
        //centering with css
        centerPopup();
        //load popup
        loadPopup();
    });

    //CLOSING POPUP
    //Click the x event!
    $("#popupContactClose").click(function(){
        disablePopup();
    });
    //Click out event!
    $("#backgroundPopup").click(function(){
        disablePopup();
    });
    //Press Escape event!
    $(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup();
        }
    });

}); 
```

和我的 index.html 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>yensdesign.com - How to create a stuning and smooth popup in jQuery</title>
    <link rel="stylesheet" href="http://www.mywebsite.com/templates/it_theshop/popup/general.css" type="text/css" media="screen" />
    <script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"></script>
    <script src="http://www.mywebsite.com/templates/it_theshop/popup/popup.js" type="text/javascript"></script>
    <script type="text/javascript">
    </script>
</head>
<body>

    <center>
        <a href="http://www.yensdesign.com"><img src="logo.jpg" alt="Go to yensdesign.com"/></a>
    </center>
    <div id="popupContact">
        <div id="popup_wrap" style="background-image:url('http://www.mywebsite.com/templates/it_theshop/images/popup/shopping-popup1.jpg');height:380px;width:800px;">
<div style="float:left;width:490px;padding:5px;">
<h1 style="margin:0px;">Заштеди до <span style="color:#981A32;">90%</span></h1>
<h2 style="margin:0px;">Имајте ја информацијата - <span style="color:#981A32;">ПРВИ!</span></h2>
<p style="margin:0px;">Дознај каде може да добиеш огромен попуст на чевли, облека, накит, козметика, производи за дома, услуги, патувања... Се она што го плаќаш во секојдневниот живот.</p>
<h4 style="margin:0px;">Нашиот Newsletter е БЕСПЛАТЕН!</h4>
<form method="post">

<table class="acymailing_form">
<p style="color:#981A32;margin:0px;">Одберете ја типот на информација што сакате да ја добивате:</p>
<tr>
<td align="left"><input type="checkbox" class="acymailing_checkbox" name="subscription[]" checked="checked" value="1" /><b style="color:#981A32;">СИТЕ ПОПУСТИ И ПРОИЗВОДИ</b></td>
</tr>
<tr>
<td align="left"><input type="checkbox" class="acymailing_checkbox" name="subscription[]" value="2" />
<b style="color:#981A32;">САМО НОВИ ПРОИЗВОДИ</b></td>
</tr>
<tr>
<td align="left"><input type="checkbox" class="acymailing_checkbox" name="subscription[]" value="4" /><b style="color:#981A32;">САМО ПОПУСТИ</b></td>
</tr>
<tr style="color:#981A32;">
<td><label for="user_name">Име</label><input id="user_name" type="text" name="user[name]" value="" /></td>
</tr>
<tr>
<td style="color:#981A32;"><label for="user_email">E-мејл</label><input id="user_email" type="text" name="user[email]" value="" /></td>
</tr>
<tr>
<td><div style="display:none;"><label for="user_html">Добивај</label></div></td>
<td><div style="display:none;"><input type="radio" name="user[html]" value="0" id="user_html_0" /><label for="user_html_0">Text</label></div><div style="display:none;"><input type="radio" name="user[html]" value="1" id="user_html_1" checked="checked" /><label for="user_html_1">HTML</label></div></td>
</tr>

<tr>
<td colspan="2">
<div style="display:none;">
<input type="radio" name="task" value="optin" checked="checked" id="optin" /><label for="optin">Subscribe</label>
<input type="radio" name="task" value="optout" id="opftout" /><label for="optout">Unsubscribe</label> </div>
<input class="button" type="submit" value="Пријави се БЕСПЛАТНО!" name="Submit" style="color: white;background-color: orange;border: 0;border-radius: 5px;height: 30px;font-weight: bold;margin-top:5px;" onclick="setCookie('mywebsite','istekuva-za-godina',364);" /></td>
</tr>
</table>
<input type="hidden" name="gtask" value="sub" style="color:#981A32;" />
<input type="hidden" name="redirect" value="http://www.mywebsite.com" />
<input type="hidden" name="option" value="com_acymailing" />
<input type="hidden" name="visiblelists" value="1,2,4" />
<input type="hidden" name="hiddenlists" value="YOUR_LISTS" />
</form>
</div>
<img src="http://www.mywebsite.com/templates/it_theshop/images/popup/popust.png" style="float:right;padding-right:-10px;position: absolute;margin-left: 260px;" />
</div>
    </div>
    <div id="backgroundPopup"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:59:28.580

弹出窗口正在显示，因为默认情况下它不隐藏。尝试通过 css 隐藏它：

```
#backgroundPopup { display:none } 
```

那应该最初隐藏它，然后在需要时显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:14:20.690

您的 cookie 已创建。因为在您的函数 checkCookie() 中，您正在使用

```
if (username!=null && username!="")
{
 alert(username);
} 
```

这里的条件不等于空。所以创建了cookie

# windows - Windows 更新代理 API - 按名称搜索更新

> ID：12951484
> 
> 赞同：0
> 
> 时间：2012-10-18T09:33:13.957
> 
> 标签：windows, api

我想使用 Windows 更新代理 API 来搜索根证书 (KB931125) 的更新，但我不知道从目录中搜索特定更新。您能否告诉我如何通过 Windows 更新代理 API 根据名称（KB931125）搜索特定更新？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:19:54.847

IUpdateSearcher [::Search 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386526%28v=vs.85%29.aspx)不支持根据名称进行搜索，或者至少不支持根据文档进行搜索。您可以搜索相关的更新 ID（尽管如果稍后重新发布更新，这些 ID 可能会更改），或者您可以搜索适当类型的所有更新，然后自己过滤结果。

# java - 如何在 JSP 中调用 Java 方法？

> ID：12951486
> 
> 赞同：1
> 
> 时间：2012-10-18T09:33:19.390
> 
> 标签：java, jsp, servlets

我正在做学校项目，我需要从 jsp 文件中的数据库中以下拉格式动态显示学年、部分和介质。我正在从 java 类中获取数据库值并尝试在 jsp 中调用 tat java 方法来显示这些值，但我没有得到任何结果，我不想在 jsp 文件中写入查询。请帮助我从过去 3 天开始尝试。 ..我的java类

```
public class EmpBean {
    public java.util.List dataList(){
         ArrayList list=new ArrayList();
         try {
             Class.forName("driver");
             Connection con = DriverManager.getConnection("url", "user", "pwd");
             Statement st = con.createStatement();
             System.out.println("hiiiii");
             ResultSet rs = st.executeQuery("select * from employee");

             while(rs.next()){
                 list.add(rs.getString("name"));
                 list.add(rs.getString("address"));
                 list.add(rs.getString("contactNo"));
                 list.add(rs.getString("email"));
             }

             System.out.println(rs.getString("contactNo"));
         }

         catch(Exception e){}

         return   list;
     }
 } 
```

和我的jsp文件：

```
<%@page language="java" import="java.util.*" %>
<html>
    <body> 
        <table border="1" width="303">
            <tr>
                <td width="119"><b>Name</b></td>
            </tr>

           <%Iterator itr;%>
           <%
                EmpBean p = new EmpBean();
                List list= (List) p.dataList(); 
           %>

                for (itr=list.iterator(); itr.hasNext(); ) {
           %>
           <tr>
               <select name="" id="" style="width: 150px;"">
                   <option value="-1"><%=itr.next()%></option>
               </select>
           </tr>
           <%
               }
           %>
        </table>
    </body>
</html> 
```

**编辑1：**

错误信息：

```
> The server encountered an internal error () that prevented it from
> fulfilling this request. exception org.apache.jasper.JasperException:
> An exception occurred processing JSP page
> /Administrative/collectFees.jsp at line 93 90: <td colspan="4"><div
> id="fndiv"> 91: <%Iterator itr;%> 92: <% List data=
> (List)request.getAttribute("data"); 93: for (itr=data.iterator();
> itr.hasNext(); ){ 94: %> 95: <select name="year1" id="yr1"
> style="width: 150px;" onclick="showDetails()"> 96: <option
> value="-1">><%=itr.next()%></option> root cause
> java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T09:38:15.377

尝试

```
<%
java.util.List list = new EmpBean().dataList();
%> 
```

迭代你可以使用

```
<select>
<%for(String txt : new EmpBean().dataList()){%>
    <option><%=txt%></option>
<%}%>
</select> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:42:40.730

坚持良好的编码约定是件好事。

总结以下线程：“确实非常不鼓励在 JSP 中使用 scriptlet（那些 <% %> 东西）”

[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:38:16.910

```
<tr>
    <td><select name="" id="" style="width: 150px;"">
            <option value="-1"><%=itr.next()%></option>
    </select></td>
</tr> 
```

你忘记了 td 标签

# flex4 - 从 Flex SDK 4.0.0 迁移到 Flex SDK 4.1.0（或更高版本）时可能会遇到哪些陷阱？

> ID：12951487
> 
> 赞同：0
> 
> 时间：2012-10-18T09:33:21.267
> 
> 标签：flex4, migration

我们有一个使用 Flex SDK 4.0.0 构建的大型游戏，使用 Flex 4 作为 GUI 框架和（主要）PureMVC 作为架构框架。

由于我们需要在不久的将来为游戏添加从右到左的文本/布局支持，并且该`layoutDirection`属性仅在 Flex SDK 4.1.0 或更高版本中可用，我们显然需要更改我们构建项目所用的 SDK。

在进行转换时，我们是否会遇到任何已知的陷阱和问题？哪些事情需要密切关注（ANT 任务？命名空间？自定义组件？图表？），因为它们可能会在迁移过程中中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:16:21.330

我们最终决定迈出更大的一步，直接使用 SDK 4.6.0/FP11.1，在这样做的同时，无论如何我们都会重构很多东西。

# ruby - Ruby Mocking IO - 选择问题

> ID：12951493
> 
> 赞同：1
> 
> 时间：2012-10-18T09:33:30.347
> 
> 标签：ruby, testing, rspec, io, mocking

我一直在学习 Ruby，遇到了一个问题。我正在建造一个战舰游戏来学习语言。

游戏将 2 个输入和 2 个输出流带入构造函数（允许两个客户端从同一个终端玩，都来自网络连接，或者每个客户端一个）

这对游戏本身来说很好，但是因为我也在练习以测试驱动的开发方式工作。这导致了一个问题——为了测试（rspec）我模拟了一个输入和输出的 IO 对象

```
@outputIO = mock("io")
@inputIO = mock("io") 
```

这对大部分工作都很有效，但是某些部分需要使用 select 命令，以便两个玩家可以同时输入信息：

```
result = select([@p1_input,@p2_input], nil, nil)
for r in result[0]
  if r == @p1_input || r == @p2_input
    input = r
  end
end 
```

@p1_input 和 @p2_input 在构造函数中设置。运行 rspec 测试时，我得到：

```
TypeError: can't convert RSpec::Mocks::Mock into IO 
```

如何模拟 IO 以使其正常运行？我应该创建一个新的 IO 实例并覆盖 gets 方法，而不是模拟？这样就够了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T12:26:30.310

在进行 IO 测试时，我喜欢使用 StringIO：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html)

当您依赖像 select 这样的低级方法时，我认为模拟或删除这些部分并不是一个好主意。你不会得到任何形式的东西。尝试在您的测试中做真正的事情，但从那里重构所有逻辑，以便您可以对此进行正常测试。

# java - 优化低于 O(n²) 的圆内圆检测算法

> ID：12951500
> 
> 赞同：5
> 
> 时间：2012-10-18T09:33:42.443
> 
> 标签：java, algorithm, optimization

我正在尝试做一个函数，它需要一个圆圈列表，并且只返回一个完全重叠的圆圈列表（一个在另一个里面）。问题在于该算法至少为**O(n²)**，这是由于 getConcentricCircles 函数中的嵌套 for 以及大型数据集需要很长时间。有什么办法可以优化吗？

**编辑：**我不知道这是否有帮助，但我使用该算法来检测虹膜和瞳孔检测中的误报。如果一个圆圈完全在另一个圆圈内，那很可能是瞳孔，而外面是虹膜。它们应该是同心的，这会简化很多，但是人眼中的瞳孔恰好不在虹膜的中心，这就是我这样做的原因。

**编辑 2：**我已经用 Peter Lawrey 的解决方案替换了 isCircleInCircle，我的在某些情况下不正确

检查圆是否在圆内的函数：

```
private static boolean isCircleInCircle(Circle a, Circle b) {
    // the circle is inside if the distance between the centre is less than the difference in the radius
    double dx = a.getX() - b.getX();
    double dy = a.getY() - b.getY();
    double radiusDifference = a.getRadius() - b.getRadius();
    double centreDistanceSquared = dx*dx + dy*dy; // edited
    return radiusDifference * radiusDifference > centreDistanceSquared;
} 
```

然后我检查列表中的每个元素，并只保存重叠的圆圈（和重叠的圆圈）：

```
public HashSet<Circle> getConcentricCircles(List<Circle> circleList) {
    HashSet<Circle> toReturn = new HashSet<Circle>();

    for (Circle circle : circleList) {
        for (Circle toCheck : circleList) {
            // if the circles are not the same and one is inside another,
            if (!toCheck.equals(circle) && isCircleInCircle(circle, toCheck)) {
                // add both to the hashset
                toReturn.add(circle);
                toReturn.add(toCheck);
            }
        }
    }
    return toReturn;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:44:55.890

我看到一个圆圈是否在另一个圆圈内的第一印象是知道

1.  两个圆的中心点。
2.  圆的两个半径。
3.  如果 C1 到 C2 + R2 > R1 则为外部，否则为内部。

这应该会大大简化您的逻辑。

编辑：为了提高复杂性，

1.  按半径排序（从大到小）
2.  第一个 for 循环从大到小
3.  第二个for循环从大到小
4.  一旦你在外圈内找到一个内圈，你就可以从外圈中删除这个圈子
5.  原因是因为第一个外圈封装了这个内圈，你不在乎是否有其他东西落在这个圈子里，只要它随后在更大的那个之外。

这将得到你的圆圈列表，这些圆圈被一个更大的圆圈包围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:06:20.190

你的数据集是什么样的？检查每个圆圈与其他圆圈本质上是 O(n^2)，为了降低复杂性，您需要一些度量来防止必须检查每个圆圈。

根据圆的分布，有各种可能有用的宽相位算法。例如，如果圆所占据的空间远大于典型半径，并且圆在该空间中分布相对均匀，则[使用四叉树](https://stackoverflow.com/questions/5994778/how-to-implement-a-quadtree-for-spatial-partitioning)进行空间划分有助于最大限度地减少检查彼此相距较远的对象之间的包容性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:13:54.543

该算法的复杂度不能降低到以下`O(n^2)`。想象一个规则网格，其点是圆心，圆的半径是`1`，相邻网格点之间的距离是`2`。任何其他圈子中都不包含任何圈子。为了证明这一点，您必须检查每个圆圈。如果你不证明每个组合，那么存在圆圈`a`和`b`，它们没有相互测试。所以现在让矩阵看起来有点不同：圆比圆`a`小一点`b`，它们共享同一个中心。所以你没有发现它`a`包含在里面`b`，因此你的算法是不正确的。这么多复杂性的证明。

为了帮助加快您的程序，您必须专注于平均情况：这意味着小圆圈包含在较大的圆圈中。建立一个有向图，其节点表示圆，其边表示源圆包含目标圆。从半径最大的圆开始。使用深度优先搜索构建图形。如果您知道该圈子`a`包含在另一个圈子中。然后尝试找到一个`b`包含在`a`. 如果`b`存在，首先继续`b`。当没有更多内容时`b`，请退后一步，继续处理所有未包含在另一个找到的圈子中的圈子。这给你一个复杂的`O(nlog(n))`在最好的情况下。这是由于在搜索包含的节点和按半径排序时对剩余节点的管理。这里最好的情况是所有圆都具有相同的中心和不同的半径。

**编辑：**[Aki](https://stackoverflow.com/a/12952412/1466267)
的回答让我想起了另一种加快速度的方法。在一般情况下，圆圈会形成簇，其中一个圆圈与其他圆圈部分重叠。因此，您可以首先计算依赖集的分区（不，我不是指独立集，因为这将是-hard）。这减少了上述算法必须使用的数据大小。`NP`

然后，在寻找可能完全重叠的候选人时，还有另一个可能的改进。由于圆包含在一个平面中，因此可以使用 R 树或四叉树之类的空间数据结构来查找可以完全重叠的候选者，效率更高。

但是我认为这不会降低最坏情况的复杂性，即使这些建议也会提高上述最坏情况下的性能。新的最坏情况可能是圆，其中心是规则网格的点，但与规则网格中的点之间的距离相比，其半径非常大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:54:44.130

虽然不是您问题的答案，但您可以使用以下方法更快地进行检查。

```
private static boolean isCircleInCircle(Circle a, Circle b) {
    // the circle is inside if the distance between the centre is less than the difference in the radius
    double dx = a.getX() - b.getX();
    double dy = a.getY() - b.getY();
    double radiusDifference = a.getRadius() - b.getRadius();
    // double centreDistance = Math.sqrt(dx*dx + dy+dy);
    // return radiusDifference > centreDistance;
    double centreDistanceSquared = dx*dx + dy+dy;
    return radiusDifference * radiusDifference > centreDistanceSquared;
}

private static boolean isPointInCircle(Point center, int outsideRadius, Point toCheck) {
    // distance between two points is sqrt((x1-x2)²+(y1-y2)²)
    double dx = center.getX() - toCheck.getX();
    double dy = center.getX() - toCheck.getY();
    double distSquared = dx * dx + dy * dy;
    // if the distance is less than the radius, then the point is inside
    return distSquared < outsideRadius * outsideRadius;
} 
```

注意：第一种方法不再需要第二种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T10:21:03.313

如果圆圈的分布允许，可以根据它们的位置将圆圈分成几个或多个槽——然后将测试限制在相同或附近的槽中。

事实证明，问题在于眼睛数量足够少的实时眼睛检测，复杂性不会成为问题。可以轻松地在 RT 中每帧花费 10M 次浮点运算，这表明数据集小于 1000 个圆（具有优化的内循环）。

优化的内循环将计算：

```
(x0-x1)^2 + (y0-y1)^2 < (r0-r1)^2 
```

对于每一对圆圈，检查其中一个是否完全包含另一个。该公式非常适合并行性，并且可以通过为通过上述测试的每个圆圈增加一个计数器来排除奇怪的情况。最后应该是1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T10:23:47.757

两点：

1.  您的算法不正确。考虑下图中的圆圈：

    ![小圆圈重叠但不被大圆圈包含](../Images/bd32a89a591fae177f8fb5b6d909883d.png)

    小圆的四个罗盘点在大圆内，但不包含在大圆内。这个问题可以通过 Alan 和 Peter 描述的更好的圆环测试来解决。

2.  您的问题描述并不完全清楚。输出应该是：

    1.  第一个包含在第二个中的每对圆的列表。
    2.  至少一个完全重叠的每个圆圈的列表。
    3.  *与其他圆圈的某种组合*完全重叠的每个圆圈的列表。

    其中第一个显然没有比 O(N^2) 更好的最坏情况运行时间，因为所有圆圈可能同心排列，所以第一个圆圈包含彼此，第二个圆圈包含除第一个之外的所有其他圆圈，依此类推. 并且由于输出为 (N^2)，因此运行时间再好不过了。

    第二个可能有更好的最坏情况运行时间，但我对此不太有信心。

    第三个听起来像是要解决的噩梦。

如果您可以保证重叠量很低，那么您可以通过创建每个圆的最小（最左边）和最大（最右边）x 位置的列表并对其进行排序来获得更好的运行时间。遍历列表，在遇到左边缘时将圆圈添加到工作集中，并在遇到右边缘时将其删除。当每个圆圈都添加到集合中时，仅将其与当前在集合中的其他圆圈进行比较。

这仍然是最坏情况的 O(n^2)，除非你可以对圆的分布和大小做出足够的保证，但这应该是一个很大的进步。

# c# - 通过 WLAN 将字体文件 (.cpf) 发送到 zebra Qln320 打印机

> ID：12951503
> 
> 赞同：1
> 
> 时间：2012-10-18T09:33:54.067
> 
> 标签：c#, fonts, zebra-printers

我需要使用 C# 通过 WLAN 将 .cpf（字体类型）文件发送到 QLN 320 斑马打印机。有人可以帮忙吗？

谢谢米顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:15:46.217

尝试这个：

```
string sFileName; //file name in DOS format (8.3)
byte[] baBody; //byte array of font file
string PacketHeader = "! CISDF\r\n{0}\r\n{1}\r\n{2}\r\n";
//************************
int CheckSum = 0;
foreach (byte b in baBody)
  CheckSum += b;

PacketHeader = String.Format(PacketHeader, sFileName, Convert.ToString(baBody.Length, 16).PadLeft(8, '0').ToUpper(), Convert.ToString(65536 - (CheckSum % 65536), 16).PadLeft(4, '0').ToUpper());

List<byte> list = new List<byte>();
list.AddRange(Encoding.Default.GetBytes(PacketHeader.ToCharArray()));
list.AddRange(baBody);
list.AddRange(new byte[] { 0x1B, 0x68, 0x1B, 0x68, 0x1B, 0x68, 0x1B, 0x70, 0x00 });

int PacketSize = list.Count;
byte[] tmp;
int sourceIndex = 0;

while (PacketSize / 512 >= 1)
{
  tmp = list.GetRange(sourceIndex, 512).ToArray();
  int BytesSent = bt.WriteBytesToSerialPort(tmp);
  tmp = null;
  sourceIndex += BytesSent;
  PacketSize -= BytesSent;
  Sleep(100);
}

if (PacketSize > 0)
{
  tmp = list.GetRange(sourceIndex, list.Count - sourceIndex).ToArray();
  PacketSize -= bt.WriteBytesToSerialPort(tmp);
  tmp = null;
}

list.Clear();
list = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:57:32.680

如果您已经创建了 .CPF 文件，您只需将文件的内容发送到打印机，它就会正确保存字体。

只需打开一个套接字并将`write`所有字节输出

# java - 更改 JFreeChart 条形图中的条形颜色

> ID：12951505
> 
> 赞同：3
> 
> 时间：2012-10-18T09:34:03.173
> 
> 标签：java, jfreechart

我正在制作一个需要一些数据的应用程序，它需要制作一个条形图，但条形图的颜色必须与它所代表的数据相关。

想象一下，我有这样的数据：BANANA 430 WATER MELLON 300

现在我应该做一个条形图，我想用黄色油漆画 BANANA 条，用绿色油漆画 WATER MELLON 条。我在 java 中使用 JFreeChart 库。我的研究使我制作了自定义渲染器，但是如果我制作自定义渲染器，颜色将随机出现在条形图上。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:43:56.173

也许这个[http://www.java2s.com/Code/Java/Chart/JFreeChartBarChartDemo3differentcolorswithinaseries.htm](http://www.java2s.com/Code/Java/Chart/JFreeChartBarChartDemo3differentcolorswithinaseries.htm)可以提供帮助。

看看下面的代码是如何使用的：

```
 final CategoryItemRenderer renderer = new CustomRenderer(
        new Paint[] {Color.red, Color.blue, Color.green,
            Color.yellow, Color.orange, Color.cyan,
            Color.magenta, Color.blue}
    ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:51:50.067

[这](http://www.java2s.com/Code/Java/Chart/JFreeChartBarChartDemo.htm)是一个演示，您可以在其中看到如何执行此操作。如上面的评论，您必须在介绍它们时将颜料添加到系列中（0 是第一个，1 是第二个，依此类推）。

# android - 媒体播放器在android中播放暂停

> ID：12951506
> 
> 赞同：3
> 
> 时间：2012-10-18T09:34:03.473
> 
> 标签：android, android-mediaplayer, android-xml, android-button, android-progressbar

如何使播放和暂停图像按钮看起来像单个图像按钮。我特此附上我的代码。这些是使用的图像。i 将播放重命名为开始。

![](../Images/6b2949b8aebe0dbd6bc43472aefc4bda.png) ![](../Images/ddc26f92670ffbbf4644e404cf93b642.png)

```
import android.app.Activity;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ProgressBar;

public class AudioView extends Activity{

 MediaPlayer mp;

    Button p,pu,s,b,f,h,v,c,bu;

     ProgressBar myProgressBar;

        Uri uri=Uri.parse("http://player.trackitdown.net/preview/289245/preview_c-90-feat-red-monkey-yo-dj-original-mix-dos-or-die-traxx.mp3");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.audio_main);

        Log.v("Start Of OnCreate","++");
        mp=MediaPlayer.create(this,uri);

        final Button play = (Button) findViewById(R.id.play);
        play.setBackgroundResource(R.drawable.start);
        final Button pause = (Button) findViewById(R.id.pause);
        pause.setBackgroundResource(R.drawable.pause);
        final Button back = (Button) findViewById(R.id.back);
        back.setBackgroundResource(R.drawable.backward);
        final Button fwd = (Button) findViewById(R.id.fwd);
        fwd.setBackgroundResource(R.drawable.forward);

        p=(Button)findViewById(R.id.play);
        pu=(Button)findViewById(R.id.pause);
        pu.setVisibility(View.INVISIBLE);
        //s=(Button)findViewById(R.id.stop);
        b=(Button)findViewById(R.id.back);
        f=(Button)findViewById(R.id.fwd);

        Log.v("Button Objects","getting man");

        play.setOnClickListener(mListener);
        pause.setOnClickListener(mListener);
        back.setOnClickListener(mListener);
        fwd.setOnClickListener(mListener);

        myProgressBar=(ProgressBar)findViewById(R.id.progressbar_Horizontal);

        myProgressBar.setProgress(0);
        myProgressBar.setMax(mp.getDuration());

        Log.v("End Of OnCreate","--");

    }
    private Runnable myThread = new Runnable(){

          public void run() {
           // TODO Auto-generated method stub
           while ( mp.getCurrentPosition()<mp.getDuration()){
            try{
             //myHandle.sendMessage(myHandle.obtainMessage());
                  myProgressBar.setProgress( mp.getCurrentPosition()); 
                //Thread.sleep(1000);
            }
            catch(Throwable t){
            }
           }
          }

            };

    View.OnClickListener mListener = new View.OnClickListener(){

        public void onClick(View v) {

            switch(v.getId()){

            case R.id.play:

                try {
                    mp.prepare();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                mp.start();
                p.setVisibility(View.INVISIBLE);
                pu.setVisibility(View.VISIBLE);
                pu.setClickable(true);
                p.setClickable(false);
                   //seekBar.setProgress(mp.getCurrentPosition());
                   new Thread(myThread).start();

                break;
            case R.id.pause:
                mp.pause();
                pu.setClickable(false);
                p.setVisibility(View.VISIBLE);
                pu.setVisibility(View.INVISIBLE);
                p.setClickable(true);
                break;

            case R.id.back:
                int dur = mp.getCurrentPosition();
                int pos = (dur>10000 ? dur-5000:0);
                mp.seekTo(pos);
                break;
            case R.id.fwd:
                int curpos = mp.getCurrentPosition();
                int dur2 = mp.getDuration();

                int pos2 = (curpos+5000>dur2 ? dur2: curpos+5000);
                mp.seekTo(pos2);
                break;

            }

        }

    };

   } 
```

XML是

```
<?xml version="1.0" encoding="UTF-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<LinearLayout android:orientation="vertical"

    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:gravity="center"
    >

    <ImageView android:layout_width="176dp"
               android:layout_height="208dp"
               android:src="@drawable/audio_icon"/> 

       <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center">

        <Button 
        android:id="@+id/play"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

        <Button
            android:id="@+id/pause"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="4dp" />

        <Button 
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="4dp"
        />
        <Button 
        android:id="@+id/fwd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="4dp"
        />

    </LinearLayout>

    <ProgressBar
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    style="?android:attr/progressBarStyleHorizontal"
    android:id="@+id/progressbar_Horizontal"
    />

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:52:14.330

将您的按钮更改为首先说“播放”。将播放和暂停代码合二为一。设置并检查标志以查看是否按下了播放或暂停并相应地更改文本。

因此，您将只有一个按钮和两个布尔字段：

```
 boolean play=true, pause=false;

    final Button playPause = (Button) findViewById(R.id.play);
            playPause.setBackgroundResource(R.drawable.start);

    playPause.setOnClickListener(mListener); 
```

现在，在您的侦听器代码中，执行以下操作：

```
case R.id.play:

            if(play)
            {
                play=false;
                pause=true;

                //change image for button
                playPause.setBackgroundResource(R.drawable.start);

                try {
                    mp.prepare();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                mp.start();
                p.setVisibility(View.INVISIBLE);
                pu.setVisibility(View.VISIBLE);
                pu.setClickable(true);
                p.setClickable(false);
                   //seekBar.setProgress(mp.getCurrentPosition());
                   new Thread(myThread).start();

                }
            if(pause)
            {
                play=true;
                pause=false;

                 //change image for button
                playPause.setBackgroundResource(R.drawable.pause);

                mp.pause();
                pu.setClickable(false);
                p.setVisibility(View.VISIBLE);
                pu.setVisibility(View.INVISIBLE);
                p.setClickable(true);
            }
            break; 
```

相应地更改按钮上的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:37:57.343

您可以使用以下代码：

```
if(!mp.isPlaying() || isCompleted) {
  isCompleted = false;
  mp.start();
} else {
  mp.pause();
} 
```

添加一个变体：

```
private boolean isCompleted = true; 
```

添加监听器：

```
mp.setOnCompletionListener(new OnCompletionListener(){

        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
            isCompleted = true;
        }}
    ); 
```

# c# - 过时的库类

> ID：12951507
> 
> 赞同：16
> 
> 时间：2012-10-18T09:34:07.070
> 
> 标签：c#

防止 C# 程序员使用特定库类的最佳方法是什么？

类来自外部程序集，因此不可能`[Obsolete]`在其上使用属性。我尝试使用 Resharper 自定义模式，但它似乎不支持泛型类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:51:22.223

修补库方法/类（Reflector 有几个插件） -`DeprecatedAttribute`例如，添加或修改其代码以引发异常。

您还可以进行特殊的单元测试，该测试在 CI 服务器上运行，如果指示特定的已弃用项目使用情况则失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:54:40.477

您可以使用 ildasm 反汇编库，添加`[Obsolete(true)]`属性并使用 ilasm 重新组装。

您也许可以找到一些程序集编辑工具，例如[Reflexil](http://reflexil.net/)以及 Reflector 的试用版。

请注意，如果您编辑程序集，您将丢失所有签名和内容。

# c++ - GetLastError() != 奇怪

> ID：12951508
> 
> 赞同：0
> 
> 时间：2012-10-18T09:34:11.110
> 
> 标签：c++, visual-studio, winapi, error-handling

作为我的 C++ 项目的一部分，我使用带有 WinAPI 文件管理功能的文件管理结构。在搜索临时文件名时，我有一个函数`OpenNewTempFile()`将生成一个名称，尝试通过调用结构中的另一个函数来打开它，简单地说`OpenFile()`，如果文件已经存在，请静默重试不同的名称（并且无限地因为它循环）。这是`OpenFile()`，如果它不是作为临时文件打开，它应该只报告文件已经存在的错误。

![GetLastError() 异常](../Images/7d2141f5e07cae8cb866096dfbe685b2.png)

有人可以解释为什么该`if`块正在执行吗？第二部分不`&&`应该是真的。当块被击中时，您可以在下面的 VS Dock 中看到当前变量，以及`GetLastError()`在上面的控制台窗口中返回的内容。这让我感到困惑。

编辑：由于建议，我将 GetLastError 存储在一个变量中。

![使用存储的 GetLastError() 捕捉](../Images/a6fc8f4c03b9973110a259a2eb779ebf.png)

...嗯，这只会引发更多问题。为什么现在是80？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:22:28.697

我认为问题在于 Windows 中有两个“文件已存在”代码。从[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)文档：

> ## CREATE_ALWAYS
> 
> 总是创建一个新文件。
> 
> 如果指定的文件存在且可写，则该函数覆盖该文件，该函数成功，并且最后一个错误代码设置为 **ERROR_ALREADY_EXISTS (183)**。
> 
> 如果指定的文件不存在并且是有效路径，则创建一个新文件，函数成功，最后错误代码设置为零。
> 
> 有关详细信息，请参阅本主题的备注部分。
> 
> ## 创建新的
> 
> 仅当它不存在时才创建一个新文件。
> 
> 如果指定的文件存在，则函数失败并且最后一个错误代码设置为**ERROR_FILE_EXISTS (80)**。
> 
> 如果指定的文件不存在并且是可写位置的有效路径，则创建一个新文件。

您使用了`CREATE_NEW`标志（正确），因此您应该期望 80 代码出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:14:20.557

> 为什么现在是80？

80 表示“文件存在”，您正在尝试`CREATE_NEW`如果`AsTemp == true`并且`AsTemp`在`true`您的情况下。

# css - CSS 样式表类

> ID：12951512
> 
> 赞同：0
> 
> 时间：2012-10-18T09:34:21.900
> 
> 标签：css, xhtml

有没有办法让你拥有一个类的 CSS 文件让我们说 p.one{color:red;}

并将其应用于不同的标签？如果可能的话，有没有办法我可以得到一个例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:35:37.800

> 一堂课

那不是一堂课。它是一个带有一个选择器的规则集，该选择器由一个类型选择器和一个类选择器组成。

> 并将其应用于不同的标签？

不要指定元素类型。单独使用类选择器。

```
.one { color: red; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:36:41.627

使用易于使用的颜色名称创建一个类。

```
.redText { color: red; } 
```

# sql - 如何向 MDS 中的成员添加额外数据？

> ID：12951515
> 
> 赞同：0
> 
> 时间：2012-10-18T09:34:29.917
> 
> 标签：sql, wcf, master-data-services

我在虚拟机上运行 MDS 并尝试从我的主机操作系统访问该服务。我已经能够向数据库添加一些内容，但是我的数据到处都是，并且在主数据管理器（网站）中我看不到新成员。我想我不应该使用 Attributes 而是其他东西，但是什么和如何？是否有教程，因为我找不到任何...？

这是我正在使用的代码：

```
International international = new International();

EntityMembers entityMembers = new EntityMembers();

// Set the modelId, versionId, and entityId.
entityMembers.ModelId = new Identifier { Name = modelName };
entityMembers.VersionId = new Identifier { Name = versionName };
entityMembers.EntityId = new Identifier { Name = entityName };
entityMembers.MemberType = memberType;

Collection<Member> members = new Collection<Member>();
Member aNewMember = new Member();
aNewMember.MemberId = new MemberIdentifier() { Name = employee.FullName, Code = aNewCode, MemberType = memberType };

Collection<MDS.Attribute> attributes = new Collection<MDS.Attribute>();

MDS.Attribute attrOrgUnit = new MDS.Attribute();
attrOrgUnit.Identifier = new Identifier() { Name = "OrganizationalUnit" };
attrOrgUnit.Value = employee.OrganizationalUnit;
attrOrgUnit.Type = AttributeValueType.String;
attributes.Add(attrOrgUnit);

aNewMember.Attributes = attributes.ToArray();
members.Add(aNewMember);
entityMembers.Members = members.ToArray();

// Create a new entity member
OperationResult operationResult = new OperationResult();
clientProxy.EntityMembersCreate(international, entityMembers, false, out operationResult);
HandleOperationErrors(operationResult); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:31:10.043

我已经能够解决我自己的问题。

首先：没有必要使用集合创建单独的变量并将它们转换为数组。教程中的代码有效，但没有提到，在添加服务引用时，您必须对其进行配置（右键单击服务引用 -> 配置）以使用集合作为“集合类型”而不是数组并生成消息合同。

其次，上面带有属性的代码是正确的并且可以完美运行。我无法添加带有属性的消息的问题是无关的。这是我的主机操作系统和来宾操作系统之间的连接/身份验证问题。

希望这可以帮助某人。

# machine-learning - 神经网络分类器

> ID：12951519
> 
> 赞同：3
> 
> 时间：2012-10-18T09:34:48.997
> 
> 标签：machine-learning, neural-network, pattern-recognition

当您在任何配置中在一维空间中有 2 个类 A 和 2 个元素和 B 类时有一个元素。任务是区分这两个类，对它们进行分类。如果您可以选择任意激活函数，那么可以解决此问题的最少神经元数量是多少。

我在想你总是必须使用至少两个神经元还是我错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:09:14.947

您的问题与感知器的经典 XOR 问题有些相关。让我们假设一下，它是关于具有特定激活函数的神经网络 - 二元阈值 - 感知器具有。然后任务变成一维异或问题，然后确实需要隐藏层中的 2 个神经元和输出层中的 1 个神经元来解决它。但是您提到可以选择任意激活函数。在这种情况下，我们可以选择[径向基函数](http://en.wikipedia.org/wiki/Radial_basis_function)(RBF) 网络。如果可以将 A 类表示为大于 T 的输出值，将 B 类表示为小于 T 的输出值，则只需 1 个 RBF 神经元就足以区分这些类。如果您希望每个类都有自己的输出（该值可以视为属于相应类的输入数据的概率度量），那么您需要 2 个 RBF 神经元。

# javascript - 从 html 标签中删除 javascript 事件的方法？

> ID：12951521
> 
> 赞同：1
> 
> 时间：2012-10-18T09:34:54.560
> 
> 标签：javascript, html

有没有办法从 html 标签中删除所有 javascript 事件？

例如

```
<img src=" " onclick="" />
<img src=" " onerror="" /> 
```

我想从这些标签中去除 onclick 和 onerror 。如示例中所示，我想从 html 标记中删除所有 javascript 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:38:57.733

您可以这样做来清除事件：

```
// get all img elements
var imgElements = document.getElementsByTagName('img');
// loop elements
for (var i = 0; i < imgelements.length; i++) { 
  // clear handler
  imgElements[i].onclick = null;
  // add other handlers here
  // imgElements[i].<here> = null;
} 
```

[`getElementsByTagName()`这里的文档](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)

**更新 1 - 文档上的所有元素**

如果要获取文档上的所有元素，请使用`document.getElementsByTagName('*')`

**更新 2 - 所有事件**

要清除所有事件，请查看[此答案](https://stackoverflow.com/a/6434924/572939)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:38:40.213

您可以查看 jquery `.unbind()`。

参考：[http ://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

当您需要使用事件处理程序时，它也很容易放回`.bind()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:47:28.980

通过使用jQuery：

```
$('*').each(function(){      
    if ($(this).is('img')) {
        $(this).unbind('click');
    }
}); 
```

如果您只想删除特定功能 onclick 事件，您可以这样做..

```
 $(this).unbind('click', FunctionName); 
```

从**jQuery 1.7**开始，您还可以`$.on() and $.off()`用于事件绑定，因此要取消绑定 click 事件，您可以使用更简单、更整洁的方法：

```
$(this).off('click'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T09:40:55.580

在 document.onload 事件中尝试这个 javascript（未经测试）：

```
var all = document.getElementsByTagName('*');
for (var i = 0; i < all.length; i++) {
    all[i].onclick = undefined;
    all[i].onerror = undefined;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T09:45:52.633

如果您的意思是“删除”，就像从页面源中物理删除它们一样，您可能可以使用正则表达式来获取其中的大部分，用`on(\w+?)="(.*?)"`空白字符串替换模式。（我没有测试，可能需要调整）

如果您的意思是“删除”，就像通过解除绑定从逻辑上删除它们一样，您可以使用 jQuery 中的 unbind() 方法，或者将每个事件设置为通过 DOM 循环的空值。

# android - ontouch 事件同时出现在两个图像上

> ID：12951528
> 
> 赞同：0
> 
> 时间：2012-10-18T09:35:17.093
> 
> 标签：android

在我的应用程序中，我想同时移动、拖动和缩放两个图像，但我只能在屏幕上移动一个图像。如果我试图选择或触摸第二个图像...第一个图像正在选择并执行移动、拖动和缩放操作。下面是我的代码。

```
import android.app.Activity;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.os.Bundle;
import android.util.FloatMath;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

import com.example.multotouch.R.id;

public class MainActivity extends Activity implements OnTouchListener, OnClickListener{
     private static final String TAG = "Touch" ;
     Matrix matrix = new Matrix();
       Matrix savedMatrix = new Matrix();
       ImageView view1,view2;
       Button b1;

       // We can be in one of these 3 states
       static final int NONE = 0;
       static final int DRAG = 1;
       static final int ZOOM = 2;
       PointF start = new PointF();
        PointF mid = new PointF();
        float oldDist = 1f;
       int mode = NONE;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        view2 = (ImageView) findViewById(R.id.imageView);
        view2.setOnTouchListener(this);
        b1=(Button)findViewById(id.button1);
        b1.setOnClickListener(this);

        view1 = (ImageView) findViewById(R.id.imageView2);
        view1.setOnTouchListener(this);
     }
     public boolean onTouch(View v, MotionEvent event) {

         switch(v.getId())
         {
         case R.id.imageView :
                view2.bringToFront();

              switch (event.getAction() & MotionEvent.ACTION_MASK) {
                    case MotionEvent.ACTION_DOWN:
                            savedMatrix.set(matrix);
                            start.set(event.getX(), event.getY());
                            Log.d(TAG, "mode=DRAG" );
                            mode = DRAG;
                            break;
               case MotionEvent.ACTION_UP:
               case MotionEvent.ACTION_POINTER_UP:
                            mode = NONE;
                            Log.d(TAG, "mode=NONE" );
                            break;
               case MotionEvent.ACTION_MOVE:
                            if (mode == DRAG) {
                                matrix.set(savedMatrix);
                                matrix.postTranslate(event.getX() - start.x,
                                        event.getY() - start.y);
                            }
                            else if (mode == ZOOM) {
                                float newDist = spacing(event);
                                Log.d(TAG, "newDist=" + newDist);
                                if (newDist > 10f) {
                                    matrix.set(savedMatrix);
                                    float scale = newDist / oldDist;
                                    matrix.postScale(scale, scale, mid.x, mid.y);
                                }
                            }
                            break;
               case MotionEvent.ACTION_POINTER_DOWN:
                            oldDist = spacing(event);
                            Log.d(TAG, "oldDist=" + oldDist);
                            if (oldDist > 10f) {
                                savedMatrix.set(matrix);
                                midPoint(mid, event);
                                mode = ZOOM;
                                Log.d(TAG, "mode=ZOOM" );
                            }
                            break;
              }
               view2.setImageMatrix(matrix);
               dumpEvent(event);
              return true; // indicate event was handled

         case R.id.imageView2 :
                view2.bringToFront();
                Toast.makeText(getApplicationContext()," Hii image22",Toast.LENGTH_LONG).show();
                switch (event.getAction() & MotionEvent.ACTION_MASK) {
                case MotionEvent.ACTION_DOWN:
                    savedMatrix.set(matrix);
                    start.set(event.getX(), event.getY());
                    Log.d(TAG, "mode=DRAG" );
                    mode = DRAG;
                    break;
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    Log.d(TAG, "mode=NONE" );
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {
                        matrix.set(savedMatrix);
                        matrix.postTranslate(event.getX() - start.x,
                                event.getY() - start.y);
                    }
                    else if (mode == ZOOM) {
                        float newDist = spacing(event);
                        Log.d(TAG, "newDist=" + newDist);
                        if (newDist > 10f) {
                            matrix.set(savedMatrix);
                            float scale = newDist / oldDist;
                            matrix.postScale(scale, scale, mid.x, mid.y);
                        }
                    }
                    break;
                case MotionEvent.ACTION_POINTER_DOWN:
                    oldDist = spacing(event);
                    Log.d(TAG, "oldDist=" + oldDist);
                    if (oldDist > 10f) {
                        savedMatrix.set(matrix);
                        midPoint(mid, event);
                        mode = ZOOM;
                        Log.d(TAG, "mode=ZOOM" );
                    }
                    break;

          }

           view2.setImageMatrix(matrix);
           dumpEvent(event);
          return true; // indicate event was handled

         }
        return true;

     }

    private void dumpEvent(MotionEvent event) {
        String names[] = { "DOWN" , "UP" , "MOVE" , "CANCEL" , "OUTSIDE" ,
                  "POINTER_DOWN" , "POINTER_UP" , "7?" , "8?" , "9?" };
               StringBuilder sb = new StringBuilder();
               int action = event.getAction();
               int actionCode = action & MotionEvent.ACTION_MASK;
               sb.append("event ACTION_" ).append(names[actionCode]);
               if (actionCode == MotionEvent.ACTION_POINTER_DOWN
                     || actionCode == MotionEvent.ACTION_POINTER_UP) {
                  sb.append("(pid " ).append(
                  action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
                  sb.append(")" );
               }
               sb.append("[" );
               for (int i = 0; i < event.getPointerCount(); i++) {
                  sb.append("#" ).append(i);
                  sb.append("(pid " ).append(event.getPointerId(i));
                  sb.append(")=" ).append((int) event.getX(i));
                  sb.append("," ).append((int) event.getY(i));
                  if (i + 1 < event.getPointerCount())
                     sb.append(";" );
               }
               sb.append("]" );
               Log.d(TAG, sb.toString());
            }
    private float spacing(MotionEvent event) {
           float x = event.getX(0) - event.getX(1);
           float y = event.getY(0) - event.getY(1);
           return FloatMath.sqrt(x * x + y * y);
        }
    private void midPoint(PointF point, MotionEvent event) {
           float x = event.getX(0) + event.getX(1);
           float y = event.getY(0) + event.getY(1);
           point.set(x / 2, y / 2);
        }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public void onClick(View v) {
        if (v == b1){
            Toast.makeText(getApplicationContext(), "haii",Toast.LENGTH_SHORT).show();
            view1.setEnabled(false);
            view1.setEnabled(true);
            view1.setEnabled(false);
            view1.setEnabled(true);

        }

    }

}
main.xml
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <ImageView android:id="@+id/imageView"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:src="@drawable/ic_launcher"
         android:scaleType="matrix" >
   </ImageView>
     <ImageView android:id="@+id/imageView2"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:src="@drawable/ic_launcher"

         android:scaleType="matrix" >
   </ImageView>
</RelativeLayout>
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

     <Button
         android:id="@+id/button1"
         android:layout_width="25dp"
         android:layout_height="25dp"
         android:layout_alignParentBottom="true"
         android:layout_centerHorizontal="true"
         android:layout_marginBottom="36dp"
         android:text="Button" 
         />
</RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:38:33.947

`false`处理完每个图像后返回。这表明事件没有被消费，将事件转发给下一个事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:40:11.210

我猜你得到了相同的 ImageView！你打了两次电话

```
 view1 = (ImageView) findViewById(R.id.imageView);
 view2 = (ImageView) findViewById(R.id.imageView); 
```

这两个 ImageView 在您的布局中具有相同的 Id，并且没有嵌套在 ViewGGroup 中。因此，Android 会遍历您的 View Hierarchy 并返回具有给定 id 的第一个 View。`layout.activity_main` 在您的情况下，无论是否有两个具有相同的 id，它都会在您的布局中返回完全相同的 ImageView 。

尝试

```
view2 = (ImageView) findViewById(R.id.imageView2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:44:32.743

在您给定的代码中，您创建了相同图像的两个不同对象，而不是不同的图像。

作为，

```
 view2 = (ImageView) findViewById(R.id.imageView); 
```

和

```
 view1 = (ImageView) findViewById(R.id.imageView); 
```

imageView 是您在两者中使用的图像优先 ID。请检查并更改后检查代码。

# linq - 我如何找到与类相关的接口？

> ID：12951530
> 
> 赞同：0
> 
> 时间：2012-10-18T09:35:19.277
> 
> 标签：linq, c#-4.0

我有一个问题，我需要列出所有与该类相关的接口？– 例如：

```
class Test : interface1
{
    public int var1;

    classA obj1;
    classB obj2;
    classC obj3;
}

class classA: interface2
{
    testclass obj;
}

class classB: interface3
{
}

class classC: interface4
{
}

class testclass: testinterface
{ 
   myinterface objInterface;
}
interface myinterface{} 
```

我的问题是如何列出类 Test 的所有接口（它应该返回与类 ex:.interface1、interface2 等相关的所有接口）。

有人帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:55:42.883

使用您当前的代码（几乎没有公共内容，字段而不是属性等），您可以执行以下操作：

```
var type = typeof(Test);
var interfaces = type.GetInterfaces().ToList();
interfaces.AddRange(type.GetFields(BindingFlags.NonPublic|BindingFlags.Instance)
     .SelectMany(x => x.FieldType.GetInterfaces())); 
```

这不会检索 的接口`public int var1`，因为它是...公开的。

这可能不符合您的确切需求，但是如果没有真实的代码和真实的预期结果，很难给出更好的答案。

**编辑**

使用递归和您的示例，在控制台应用程序中：

```
private static void Main()
 {
     var type = typeof(Test);
     var interfaces = type.GetInterfaces().ToList();
     GetRecursiveInterfaces(type, ref interfaces);

 }

 private static IList<Type> GetFieldsType(Type type)
 {
     return type.GetFields(BindingFlags.NonPublic | BindingFlags.Instance).Select(m => m.FieldType).ToList();
 }

 private static void GetRecursiveInterfaces(Type type, ref List<Type> interfaces)
 {
     foreach (var innerType in GetFieldsType(type))
     {
         interfaces.AddRange(innerType.IsInterface 
                             ? new[] { innerType } 
                             : innerType.GetInterfaces());
         GetRecursiveInterfaces(innerType, ref interfaces);
     }
 } 
```

# php - 根据国家重定向用户-HTACCESS？

> ID：12951531
> 
> 赞同：1
> 
> 时间：2012-10-18T09:35:23.577
> 
> 标签：php, .htaccess, url-rewriting

. 考虑我的域名是 www.example.com 。它是英文的

我有荷兰语 www.example.com/nl 的一种语言版本

我只想将 url 重定向到 www.example.com/nl 给从荷兰请求的人。

我的网站在共享主机中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:41:18.887

您可以根据来自用户的浏览器语言设置进行重定向：

```
RewriteCond %{HTTP:Accept-language} nl [NC]
RewriteRule ^$ /nl [L,R=301] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:54:00.477

您必须使用 GeoIP 服务并确定访问者所在的国家/地区，然后进行正确的重定向。

在此处下载适用于 PHP 的 Geo API [http://geolite.maxmind.com/download/geoip/api/php/](http://geolite.maxmind.com/download/geoip/api/php/)

有示例如何使用代码。

会是这样的

```
include("geoipcity.inc");
include("geoipregionvars.php");

$gi = geoip_open("/usr/local/share/GeoIP/GeoIPCity.dat",GEOIP_STANDARD);
$record = geoip_record_by_addr($gi,$_SERVER['REMOTE_ADDR']);

if ( $record->country_code == "NL" ) {
    header('Location: http://www.yoursite.com/nl');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T09:39:42.340

看看 apache 模块 mod_geoIP，可能会做你想做的事，但否则你将不得不依赖脚本来获取地理位置信息并基于此重定向。

作为一个附带主题，IP 查找在获取地理位置信息方面并不是 100% 准确的，所以要小心。通常最好让用户第一次选择，然后保存一个 cookie 来记住这个选择。

编辑：是的，@Pekka 有一个很好的观点，谷歌上有大量关于它的信息。

# php - WordPress灰度特定图像大小

> ID：12951539
> 
> 赞同：0
> 
> 时间：2012-10-18T09:35:41.980
> 
> 标签：php, wordpress, image-processing, grayscale

**怎么做：**添加一个新的图像大小和灰度这个特定的大小。

**到目前为止我所做的：** 我一直在四处搜索，发现这个有用的 URL： [wpbeginner](http://www.wpbeginner.com/wp-tutorials/how-to-grayscale-images-in-wordpress/)，[Ryan Berry](https://coderwall.com/p/z6l8ba)。第二种解决方案为每个新图像上的每个尺寸创建一个灰度图像，这几乎是我正在寻找的。

**问题：**我知道如何添加新的图像尺寸以及创建灰度图像的上述功能。我不知道如何将此过滤器添加*到*特定大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:44:59.837

使用来自 wpbeginner 的代码，它似乎只对指定为 的图像进行灰度化`themename-bw-image`，如从此处（第 04 行）看到的：

```
$file = trailingslashit($file['path']).$meta['sizes']['themename-bw-image']['file']; 
```

所以我想如果你不希望图像被灰度化，你可以添加一个新的图像大小：

```
add_action('after_setup_theme','themename_bw_size');
function themename_bw_size() {
    add_image_size('themename-bw-image', 100, 100, true);
    add_image_size('other-nongrayscaled-image', 150, 150, true);
    // etc...
} 
```

# lucene - 如何运行 Luke（Lucene 工具）？

> ID：12951549
> 
> 赞同：14
> 
> 时间：2012-10-18T09:36:13.573
> 
> 标签：lucene, luke

我在[http://code.google.com/p/luke/downloads/list](http://code.google.com/p/luke/downloads/list)上下载了“Lukeall-3.5.0” 这是一个 JAR 文件，但我不知道如何让它工作？有人可以告诉我运行卢克的详细步骤吗？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-18T09:38:47.303

你可以运行例如。从命令行发出`java -jar lukeall-3.5.0.jar`命令

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-18T18:42:48.373

如果您希望 .jar 在双击时运行，那么您必须在 .jar 文件和需要打开它们的程序 javaw.exe 之间建立关联。您可以按照以下步骤手动执行此操作，或查看[此](http://johann.loefflmann.net/en/software/jarfix/index.html)站点以获取名为 Jarfix 的自动工具。

*   右键单击 .jar 并转到“属性”
*   点击“更改”
*   点击“浏览...”
*   导航到您的 Java 安装文件夹
*   在“bin”文件夹中，您应该看到“javaw”
*   选择“javaw”并单击“打开”
*   点击“确定”
*   点击“申请”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-21T20:51:10.453

尝试了一切，包括 jarfix ， javaW 命令行，但没有运行。

[然后我从这个链接https://code.google.com/archive/p/luke/downloads](https://code.google.com/archive/p/luke/downloads)下载了 jar 。有很多 .jar 和 .tgz 文件。我尝试了带有“类型可执行”标签的最新版本。一旦以某种方式下载，扩展名就会更改为 .zip。1) 将扩展名改回 .jar 2) 右键单击​​打开方式 -> Java（这是之前安装的）

答对了！卢克开口了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-12T05:46:17.173

首先，您需要下载[Java Runtime](https://www.java.com/en/download/manual.jsp)并将其安装到您的 PC 上。
然后打开命令提示符：按`Windows Key + R`，`cmd`在文本框中输入并点击`Ok`。
将目录更改为您的 jar 文件定位文件夹（使用`cd`命令），键入`java -jar .\yourFileName.jar`并按 Enter。

希望这会奏效。

# python - 如果已经在运行，请退出 VLC

> ID：12951551
> 
> 赞同：1
> 
> 时间：2012-10-18T09:36:15.820
> 
> 标签：python, wxpython, vlc

我在 Python 中对 VLC 有一个奇怪的问题。使用以下内容。

```
import vlc

self.Instance = vlc.Instance()
self.List = self.Instance.media_list_new()
self.Player_d = self.Instance.media_list_player_new() 
```

我`self.List.add_media(address of video)`用来填充媒体列表。

然后`self.Player_d.set_media_list(self.List)` 和 `self.Player_d.play()`

问题是 VLC 从一个奇怪的（YUV 东西）窗口开始，没有任何控件。然后在播放列表后冻结。我必须使用任务管理器将其关闭。

有人可以指出问题吗？我想用所有控件播放 VLC。

其次，是否有检查 VLC 是否已经在运行，如果正在运行，则退出并启动 VLC 的新实例。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:46:34.890

我在您的问题中没有看到任何有关 wxPython 的信息，但是如果您将它与 vlc 模块一起使用，那么这可能是您的问题。我猜他们在一起玩得不太好。您可能需要在单独的线程中而不是在 wx 的主循环中运行所有 vlc 内容。

# find - 无法使用 Mongoose 获取但使用 Mongo shell

> ID：12951553
> 
> 赞同：2
> 
> 时间：2012-10-18T09:36:19.783
> 
> 标签：find, mongoose, fetch

我正在玩猫鼬和节点。

希望能够保存一个 Backbone 模型，并通过 Mongoose 从 Mongo 获取保存的模型。

我可以保存模型，但无法通过 Mongoose 获取它们。我可以通过 Mongo shell 毫无问题地访问它们：

```
db.users.find() 
```

我的代码是：

```
var mongoose = require('mongoose'),
userschema = mongoose.Schema({name: 'string', email: 'string'}),
db = mongoose.createConnection('localhost', 'test'),
User = db.model('User', userschema);

exports.save = function(req, res){
var userobj = req.body,
    newuser = new User(userobj);

newuser.save(function(err){
    if(err){
        res.send(err);
    }
    else{
        res.send(newuser);
    }
});
};

exports.fetch = function(req, res){
var users = User.find();
res.send(users);
} 
```

当我发送请求并执行我的 fetch 函数时，服务器会响应

```
{
  "options": {
    "populate": {}
  },
  "_conditions": {},
  "_updateArg": {},
  "op": "find"
} 
```

就像我不在正确的收藏夹上一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:13:30.590

`User.find()`不返回查询结果；这些将传递给您作为参数提供的回调`find`。

```
exports.fetch = function(req, res) {
    User.find(function(err, users) {
        res.send(users);
    });
}; 
```

如果您不提供回调，则[`Query`](http://mongoosejs.com/docs/api.html#query-js)返回一个对象（这是您在响应中看到的）。

# actionscript-3 - 在 ActionScript 3 中检测 uint、int 和 Number 之间的区别

> ID：12951555
> 
> 赞同：1
> 
> 时间：2012-10-18T09:36:21.853
> 
> 标签：actionscript-3, flash, actionscript, types, numbers

我想获得我的号码的声明类型，但我不知道如何获得它们。所以我用可能的检测方法写了一个测试：

```
logNumber(Number(3.5), "Number");
logNumber(Number(3), "Number");
logNumber(Number(-3), "Number");
logNumber(uint(3), "uint")
logNumber(int(3), "int")
logNumber(int(-3), "int")

function logNumber(value:*, expected:String):void
{
    trace("\n\n\n ");
    trace("** Input value: " + value + "\n** Expected: " + expected + "\n")
    trace("getQualifiedClassName: ", getQualifiedClassName(value) + check(getQualifiedClassName(value), expected));

    switch (value)
    {
        case value as uint:
        {
            trace('as: uint' + check('uint', expected));
            break;
        }
        case value as int:
        {
            trace('as: int' + check('int', expected));
            break;
        }
        case value as Number:
        {
            trace('as: Number' + check('Number', expected));
            break;
        }
    }

    if(value is uint) trace("is: uint" + check('uint', expected));
    else if(value is int) trace("is: int" + check('int', expected));
    else if(value is Number) trace("is: Number" + check('Number', expected));

    trace("describeType name:" + describeType(value).@name + check(describeType(value).@name, expected));

    trace("typeof: ", typeof(value)  + check(typeof(value), expected));

    trace("\n" + describeType(value))
}

function check(type:String, expectedType:String):String
{
    return "\n  » " + (type == expectedType ? "good" : (type.toLowerCase() == expectedType.toLowerCase() ? "almost good" : "wrong"))
} 
```

这会将以下结果输出到我的跟踪面板：

3.5 作为数字

```
** Input value: 3.5
** Expected: Number

getQualifiedClassName:  Number
  » good
as: Number
  » good
is: Number
  » good
describeType name:Number
  » good
typeof:  number
  » almost good

<type name="Number" base="Object" isDynamic="false" isFinal="true" isStatic="false">
  <extendsClass type="Object"/>
  <constructor>
    <parameter index="1" type="*" optional="true"/>
  </constructor>
</type> 
```

3 作为数字

```
** Input value: 3
** Expected: Number

getQualifiedClassName:  int
  » wrong
as: uint
  » wrong
is: uint
  » wrong
describeType name:int
  » wrong
typeof:  number
  » almost good

<type name="int" base="Object" isDynamic="false" isFinal="true" isStatic="false">
  <extendsClass type="Object"/>
  <constructor>
    <parameter index="1" type="*" optional="true"/>
  </constructor>
</type> 
```

-3 作为数字

```
** Input value: -3
** Expected: Number

getQualifiedClassName:  int
  » wrong
as: int
  » wrong
is: int
  » wrong
describeType name:int
  » wrong
typeof:  number
  » almost good

<type name="int" base="Object" isDynamic="false" isFinal="true" isStatic="false">
  <extendsClass type="Object"/>
  <constructor>
    <parameter index="1" type="*" optional="true"/>
  </constructor>
</type> 
```

3 作为单位

```
** Input value: 3
** Expected: uint

getQualifiedClassName:  int
  » wrong
as: uint
  » good
is: uint
  » good
describeType name:int
  » wrong
typeof:  number
  » wrong

<type name="int" base="Object" isDynamic="false" isFinal="true" isStatic="false">
  <extendsClass type="Object"/>
  <constructor>
    <parameter index="1" type="*" optional="true"/>
  </constructor>
</type> 
```

3 作为整数

```
** Input value: 3
** Expected: int

getQualifiedClassName:  int
  » good
as: uint
  » wrong
is: uint
  » wrong
describeType name:int
  » good
typeof:  number
  » wrong

<type name="int" base="Object" isDynamic="false" isFinal="true" isStatic="false">
  <extendsClass type="Object"/>
  <constructor>
    <parameter index="1" type="*" optional="true"/>
  </constructor>
</type> 
```

-3 作为整数

```
** Input value: -3
** Expected: int

getQualifiedClassName:  int
  » good
as: int
  » good
is: int
  » good
describeType name:int
  » good
typeof:  number
  » wrong

<type name="int" base="Object" isDynamic="false" isFinal="true" isStatic="false">
  <extendsClass type="Object"/>
  <constructor>
    <parameter index="1" type="*" optional="true"/>
  </constructor>
</type> 
```

有很多要分析的，但有些事情正在弹出：

*   如果一个 Number 等于 3.5，它将作为 Number 输出，但如果它是 3，它将作为 int/uint 输出。
*   很难检测它是 uint 还是 int，结果令人困惑且不一致。

出于调试目的（并且只是为了了解其工作原理），我想要我声明的类型。如何创建一个返回正确类型的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:41:09.350

我会解释为什么你的每一个测试都会给你他们的结果。

## 作为

```
var value:Number = 3;
trace(value as int); // 3 
```

`as`算子是弱铸造算子。它接受左边的值并将其转换为右边的类型，并作为结果进行评估。如果它无法进行强制转换，则评估为`null`。在这种情况下，`Number`成功地转换为`int`，并`3`随后评估 的结果。

```
var value:Number = 3.5;
trace(value as int); // null 
```

在此示例中，`3.5`无法将 的值强制转换为 an，`int`因此该语句的计算结果为`null`。

## 是

```
var value:Number = 3.5;
trace(value is int); // false 
```

`is`运算符建立在运算符的基础上`as`，但计算为一个`Boolean`值而不是一个强制转换对象。上面的代码是一样的，

```
trace((value as int) != null) 
```

因此，出于您的目的，`is`并`as`完成大致相同的事情。它们都将左侧值转换为右侧值。*转换类型与语句的相关性与值的类型一样。*

## 类型

```
var value:Number = 3;
trace(typeof value); // number 
```

该`typeof`运算符是 JavaScript（ActionScript 3 是其扩展）的保留，并计算为`String`JavaScript*原语*的表示。因此，`typeof`它在 ActionScript 3 类型系统中的用途有限，因为它永远不会评估为 ActionScript 3 类名。例如，

```
var mc:MovieClip = new MovieClip();
trace(typeof mc); // object

var value:int = 3;
trace(typeof value); // number 
```

`MovieClip`确实是`Object`，考虑到这一点，为什么`typeof value`评估为就很明显了`number`。`Number`ActionScript 3使用自己的类型`int`和扩展了 JavaScript 原语，`uint`编译器随后会强制执行和优化。这就是为什么在检查一个`int`or`uint`是否是一个`Number`;时你会得到令人困惑的结果。从技术上讲，*它们是*。ActionScript 3 原语根本不是真正的原语，至少在强类型语言的意义上不是。

## 描述类型

这些是我最不确定的结果，因为它不是语言功能，而是 Adob​​e 功能。看看这个：

```
var value:Number = 3;
trace(describeType(value)); // int
value += 0.1;
trace(describeType(value)); // Number 
```

`value`当它是一个`int`整数时，Flash Player 似乎正在优化。这可能是为了让他们可以进行性能优化，例如在将 a`Number`用作对象`int`的索引时将其视为 an `Array`。同样有趣的是：

```
var value:int = 3;
trace(describeType(value)); // int
value += 0.1;               // value is still 3
trace(describeType(value)); // int 
```

在这种情况下，因为我们明确定义`value`为`int`，编译器避免了运行时强制转换并忽略了浮点运算。

## 结论

我认为没有单一的好方法可以找到 ActionScript 3 原语的编译时类。这些操作员中的每一个都会告诉您*您可以做什么*，但不会告诉您您做*了什么*。语言不坏；它是动态的，但有时具有欺骗性。最大的教训是你不应该总是相信 AS3 中的类型系统会按照你的想法去做。有一个我能想到的解决方案，但是当使用`uint`or `int`on `Array`or时，ypu 会丢失所有 Adob​​e 优化`Vector`。您可以创建自己的类型化对象，并在其上使用`getQualifiedClassName`或`describeType`。

```
class UnsignedInteger
{
    private var v:uint = 0;

    public function UnsignedInteger(value:uint) { v = value }
    public function get value():uint { return v }
    public function set value(value:uint):void { v = value; }
 }

 var value:UnsignedInteger = new UnsignedInteger(3);
 trace(getQualifiedClassName(value)); // UnsignedInteger 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:47:24.537

据我所知，目前还没有办法让编译器得到它，播放器会优化它并为你隐式转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:16:05.133

> （如果有人想知道，我自己找到了解决方案。确保你也阅读了@antonpaker 的答案，它有有用的信息）

似乎有一个可靠的解决方案可以找到正确的号码类型。但是有一些限制；只有公共变量才有可能，并且您必须传递父对象。如果您使用`describeType`父对象给出了类属性的确切类型，而不是它在运行时的优化方式。您必须找到对象内部的属性才能找到它的正确类型。

```
function getNameOfTypeOfProperty(object:*, property:String):String
{
    return describeType(object)..*.(hasOwnProperty('@name') && @name == property).@type;
} 
```

如果你在一个简单的 MovieClip 上试试这个：

```
trace("x:" + getNameOfTypeOfProperty(this, "x"));
// Number

trace("currentFrame:" + getNameOfTypeOfProperty(this, "currentFrame"));
// int 
```

这些价值观似乎（总是）正确。

（注意：*这个函数将被添加到[Temple 库](https://code.google.com/p/templelibrary/)内部版本的新反射模块中，并且可能会在下一个版本中可用。这个类也很好地缓存了 describeType，用于优化 describeType 调用*）

# vb.net - 如何在 VB .Net App 中制作联系表格？

> ID：12951563
> 
> 赞同：1
> 
> 时间：2012-10-18T09:36:51.337
> 
> 标签：vb.net, contact-form, ticket-system

我想将票证或支持集成到我的 VB .NET 应用程序中，但我不知道如何正确执行。我希望当有人打开支持票时，他们可以像普通电子邮件一样发送到我的电子邮件。

我只需要有关如何将电子邮件从应用程序发送到我的电子邮件地址的帮助。

这可能吗，您将如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:44:33.380

看看使用[`System.NET.Mail`](http://msdn.microsoft.com/en-us/library/system.net.mail.aspx)命名空间。发送将通过[`SMTPClient`](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx).NET Framework 中内置的类完成。

我猜你必须使用像 GMail 这样的邮件服务器，除非他们有自己的 SMTP 服务器（但你可能不希望为不同客户的服务器设置和存储详细信息的麻烦）。

这里有一个很好的例子，其中包括 VB.NET 和 C# 示例： http: [//www.codeproject.com/Articles/20546/How-to-Send-Mails-from-your-GMAIL-Account-through](http://www.codeproject.com/Articles/20546/How-to-Send-Mails-from-your-GMAIL-Account-through)

# delegates - C# 委托实例化

> ID：12951566
> 
> 赞同：1
> 
> 时间：2012-10-18T09:37:08.427
> 
> 标签：delegates

```
class Program
{
    delegate void StringProcessor(string input);

    class Person
    {
        string name;

        public Person(string name) { this.name = name; }

        public void Say(string message)
        {
            Console.WriteLine("{0} says: {1}", name, message);
        }
    }

    class Background
    {
        public static void Note(string note)
        {
            Console.WriteLine("({0})", note);
        }
    }

    static void Main(string[] args)
    {
        Person jon = new Person("Jon");
        Person tom = new Person("Tom");

        StringProcessor jonsVoice, tomsVoice, background;

        jonsVoice = new StringProcessor(jon.Say);
        tomsVoice = new StringProcessor(tom.Say);
        background = new StringProcessor(Background.Note);

        StringProcessor p = new StringProcessor(jonsVoice);
        p += tomsVoice;
        p -= jonsVoice;
        p("Hello");

    }
} 
```

该程序打印

```
Jon says: Hello
Tom says: Hello 
```

代替

```
Tom says: Hello 
```

此删除不起作用：`p -= jonsVoice;`

但为什么？

您能否澄清这一点或获得一些有关与另一个委托的委托实例化的有用链接。我对卧底信息很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:59:08.467

[委托是一个对象，它代表一个方法，并且可以选择与该方法关联的“this”对象。](http://msdn.microsoft.com/en-us/library/orm-9780596516109-03-09.aspx)

当您使用 += 运算符组合委托时，结果是表示要调用的委托列表的[多播委托。](http://msdn.microsoft.com/en-US/library/ms173175%28v=vs.80%29.aspx)（实际上所有的委托都是多播委托，创建一个像这样的委托：

```
jonsVoice = new StringProcessor(jon.Say); 
```

导致在其 InvocationList 中具有单个委托的多播委托）。

您可以使用 -= 运算符从调用列表中删除委托。

那么为什么你上面的例子没有工作呢？因为 p 的调用列表中没有匹配 jonsVoice 的委托。

p 有一个由两个委托组成的调用列表：

*   一个指向 tomObject 的 Say 方法
*   一个指向 StringProcessor 对象的 Invoke 方法

那是因为您通过向 StringProcessor 构造函数传递另一个 StringProcessor 来初始化 p：

```
jonsVoice = new StringProcessor(jon.Say);
...
StringProcessor p = new StringProcessor(jonsVoice); 
```

导致指向另一个 StringProcessor 委托的 StringProcessor 委托。

[您可以通过调用委托的GetInvocationList](http://msdn.microsoft.com/en-us/library/system.delegate.getinvocationlist.aspx)方法来检查委托的调用列表。这将按照调用顺序返回一个委托数组。

```
StringProcessor p = new StringProcessor(jonsVoice);
p += tomsVoice;
p -= jonsVoice;

foreach (var delegateItem in p.GetInvocationList())
{
    Console.WriteLine("Delegate of {0}.{1}", delegateItem.Target.GetType().Name, delegateItem.Method.Name);
} 
```

结果是：

```
Delegate of StringProcessor.Invoke
Delegate of Person.Say 
```

当您调用 p -= jonsVoice 时，调用列表不包含指向 jon 对象的 Person.Say 方法的委托（如 jonsVoice 所做的那样），因此无需删除任何内容。

如果您像这样初始化 p： StringProcessor p = jonsVoice;

你应该得到你期望的结果。

# android - 获取 Android ACTION_TIME_CHANGED 广播的问题

> ID：12951567
> 
> 赞同：1
> 
> 时间：2012-10-18T09:37:17.000
> 
> 标签：android, datetime, broadcastreceiver, broadcast

`Date/Time`当用户手动更改而不是系统更新时需要获得广播`Date/Time`。我正在使用`ACTION_TIME_CHANGED`它并且它可以工作，但它甚至会通知正常的日期/时间更改（即，无需用户干预）。

请建议如何处理这个问题。

谢谢

# silverlight - 使用 XamlReader.Load() 从文件创建 Prism 区域时出错？

> ID：12951573
> 
> 赞同：0
> 
> 时间：2012-10-18T09:37:28.330
> 
> 标签：silverlight, prism, mef, xamlreader

我将 Silverlight 5 与 Prism 和 MEF 一起使用。

我试图通过读取 XAML 文件在运行时替换我的 shell，从中创建一个 UIElement 并用新的 UIElement 替换旧 shell 的内容。我正在使用`XamlReader.Load()`这个。

这有效，直到我尝试创建 Prism 区域。

我可以创建一个只有一个棱镜区域的新外壳，但是当我在新外壳中有两个或更多区域时，我得到的只是浏览器中的一个空白屏幕，并且没有错误消息。

有没有办法调试这个？为什么会这样？

代码：

创建 UIElement 并替换 shell（在 Shell.xaml.cs 中）：

```
 DependencyObject rootObject = XamlReader.Load(XAMLFileString) as DependencyObject;
 UIElement customShell = rootObject as UIElement;
 this.Content = customShell; 
```

这有效（一个地区）：

```
<UserControl 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:prism="http://www.codeplex.com/prism">

    <StackPanel>            
        <ContentControl  prism:RegionManager.RegionName="Region1"/>
    </StackPanel>

</UserControl> 
```

这也有效（两个常规内容控件）：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:prism="http://www.codeplex.com/prism">

    <StackPanel>
        <ContentControl Content="C1"/>
        <ContentControl Content="C2"/>
    </StackPanel>
</UserControl> 
```

但这给了我一个空白屏幕（两个棱镜区域）：

```
<UserControl 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:prism="http://www.codeplex.com/prism">

    <StackPanel>            
        <ContentControl  prism:RegionManager.RegionName="Region1"/>
        <ContentControl  prism:RegionManager.RegionName="Region2"/>
    </StackPanel>

</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:43:30.750

我弄清楚了问题所在：实际上有一个异常，但它在 App.xaml.cs 中被静默处理：

```
Microsoft.Practices.Prism.Regions.Behaviors.RegionCreationException: An exception occurred while creating a region with name 'Region1'. The exception was: System.ArgumentException: Region with the given name is already registered: 
```

抛出异常是因为我试图创建一个名称已存在于我的原始 Shell 中的区域。更改区域名称后，一切正常。

我仍然不知道为什么我得到一个有两个区域但没有一个区域的白屏（两个区域都抛出了相同的异常，所以一个区域也不应该工作）。

要将一个 shell 替换为另一个具有相同区域名称的 shell，可以在替换 shell 之前取消注册这些区域：

```
_regionManager.Regions.Remove(regionname) 
```

# excel - 重置表单但将单个字段设置为某个值

> ID：12951574
> 
> 赞同：0
> 
> 时间：2012-10-18T09:37:29.247
> 
> 标签：excel, vba

我创建了一个重置​​按钮，该按钮当前清除了我创建的整个 VBA 表单。但是，我希望它清除整个表单并将名为**cbo_deptCode**的下拉列表的值设置为“CO - 计算机科学”。我将如何实现这一目标？

到目前为止，这是我的代码：

```
Private Sub btn_Reset_Click()

    ' Reset form
    Dim ctl As MSForms.Control
    For Each ctl In Me.Controls
        Select Case TypeName(ctl)
            Case "TextBox"
                ctl.Text = ""
            Case "CheckBox", "OptionButton", "ToggleButton"
                ctl.Value = False
            Case "ComboBox", "ListBox"
                ctl.ListIndex = -1
        End Select
    Next ctl

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:07:13.853

为什么不添加：

```
cbo_deptCode.Value = "CO - Computer Science" 
```

在你的循环之后？

# perl - 发送响应而不从 Mojolicious::Lite 应用程序调用 render()

> ID：12951576
> 
> 赞同：1
> 
> 时间：2012-10-18T09:37:33.113
> 
> 标签：perl, mojolicious

我正在写一个“部分代理” `Mojolicious::Lite`。某些请求（取决于查询路径和参数值）向另一台服务器生成请求，而其他请求则在本地处理。

有一个[很好的代理示例](https://gist.github.com/42c32258713b34f3604e)，但它完全覆盖了请求/响应处理，因此不适合我的需要。

目前，我正在通过

```
$self->render(data => $res->body, code => $res->code); 
```

不幸的是，这没有考虑到不同的内容类型。使用`Mojolicious::Type`没有帮助，因为我需要从内容类型 in`$res`到`format`in的反向映射`render()`；此外，可能的渲染格式的数量明显少于可能的内容类型的数量。

所以理想情况下，`$self->render()`我需要一种方式来表达“这里，我收到了回复`$res`；请按原样将其返回给客户”，而不是上面的调用。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:56:58.980

好的，诀窍是`render()`用

```
$self->tx->res($res);
$self->rendered($res->code); 
```

# iphone - 固定项目 - 非续订订阅

> ID：12951579
> 
> 赞同：0
> 
> 时间：2012-10-18T09:37:48.857
> 
> 标签：iphone, ios, ios4

我对实现应用内购买有以下疑问。实际上我的内容是歌曲，总共包含 500 首歌曲。我可以通过非续订订阅提供此内容吗？

通过非续订订阅提供内容是否有任何限制？是否有任何规则，例如定期更新的内容只能使用非续订订阅？

这真的让我很困惑，请告诉我。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:09:51.853

我认为非续订订阅没有任何限制。它基于您提供服务的方式。[Spotify](http://www.spotify.com/int/)是您的场景的完美示例。

但是作为用户认为我购买了一套 500 首歌曲，应该在 30 天内更新？我更喜欢非消耗性 IAP。

# github - 在 github，我可以在线克隆/合并分支吗？

> ID：12951588
> 
> 赞同：28
> 
> 时间：2012-10-18T09:38:24.583
> 
> 标签：github

我想在 github 中为我的 git 存储库克隆/合并分支，例如合并`draft`分支中的更新以`gh-pages`进行发布。

在某些情况下，我无法访问 git 命令的命令行。

是否有可能在网上实现这一目标？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-19T04:40:33.683

只要合并不会产生任何冲突，您就可以使用拉取请求合并 GitHub 中的分支。

**要在 GitHub 上合并拉取请求：**

1.  创建一个拉取请求以将`draft`分支 合并到`gh-pages`分支中。
2.  如果它可以在线合并，你会看到***This pull request can be automatic merge***。和一个`Merge pull request`按钮。
3.  单击按钮，您将有机会`Cancel`合并或添加提交消息和`Confirm Merge`.
4.  如果您选择`Confirm Merge`，Pull Request 将自动关闭。

有关更多信息，请访问[Github 的合并拉取请求帮助页面](https://help.github.com/articles/merging-a-pull-request)。

# windows - 在 Windows 上使用 python 库进行 GIST 特征提取

> ID：12951591
> 
> 赞同：5
> 
> 时间：2012-10-18T09:38:35.457
> 
> 标签：windows, windows-7, python-2.7, gist

我刚开始在 Windows 7 上使用 Python（2.7.2 版）。我想在我的 Python 项目中使用 GIST 功能。我一直在寻找 GIST python 库。有一个著名的库叫做 pyleargist (http://pypi.python.org/pypi/pyleargist/1.0.1#downloads)。

但是，我已经尝试了很多方法来在 Windows7 上构建和安装这个库。不幸的是，它根本没有成功。因此，我想在这里问两个问题。

1.  GIST 图像描述符是否有任何其他替代 python 库（除了 pyleargist 或自己编写）？

2.  你们有没有人能够在 Windows7 上为任何 Python 2.7 代码使用 pyleargist 库？

谢谢

# c# - 如何从 C# 中匹配 XPath 查询的 XML 文件中获取值

> ID：12951593
> 
> 赞同：1
> 
> 时间：2012-10-18T09:38:38.233
> 
> 标签：c#, xml, xpath

我想知道是否有一种方法使用 C# 使我能够返回与给定 XPath 查询匹配的 XML 文件中的所有内部值。

假设我们有以下名为 exampleWithFruits.xml 的 XML 文件：

```
<fruits>
   <bananas>
      <banana id="1" color="yellow" price="0.5" />
      <banana id="2" color="yellow" price="0.4" />
      <banana id="3" color="yellow" price="0.6" />
   </bananas>
   <apples>
      <apple id="1" color="red" price="0.5" />
      <apple id="2" color="red" price="0.4" />
      <apple id="3" color="green" price="0.6" />
      <apple id="4" color="yellow" price="0.4" />
   </apples>
   <oranges>
      <orange id="1" color="orange" price="0.5" />
      <orange id="2" color="orange" price="0.5" />
   </oranges>
</fruits> 
```

如下所示：

```
string xmlFilePath = "exampleWithFruits.xml";
string xPathQuery = "//fruits/apples//@color"
string[] matchingValues = interestingFunction(xmlFilePath, xPathQuery);
//for instance we would get something like : matchingValues = {red, red, green, yellow} 
```

总结一下，我想知道如何创建一个函数，比如**interestingFunction**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:54:33.523

一种方法是使用`System.Xml.XPath.Extensions.XPathEvaluate`.

例如

```
string xmlFilePath = "exampleWithFruits.xml";
string xPathQuery = "//fruits/apples//@color";

var doc = XDocument.Load(xmlFilePath);
IEnumerable att = (IEnumerable)doc.XPathEvaluate(xPathQuery);
string[] matchingValues = att.Cast<XAttribute>().Select(x => x.Value).ToArray(); 
```

或者，如果您更喜欢 XmlDocument：

```
var doc = new XmlDocument();
doc.Load(xmlFilePath);
string[] matchingValues = doc.SelectNodes(xPathQuery).Cast<XmlAttribute>().Select(x => x.Value).ToArray(); 
```

# r - 如何使用子集仅从 R 中的数据集中获取前 xx 个观察值？

> ID：12951595
> 
> 赞同：1
> 
> 时间：2012-10-18T09:26:11.917
> 
> 标签：r, regression, dataset

如果我有一个包含 4137 个观测值的数据集，并且我想在 hsperc 上对 colga 进行回归，并且只使用前 2070 个观测值，我该怎么做？

我试过类似的东西：

```
# loading data
GPA2 <- read.table("GPA2.raw", header=TRUE, na.strings=".")

# fitting model 
mfit1 <- lm( formula = colgpa ~ hsperc + sat, data=GPA2, subset=(rownum<2071) ) 
```

但是`subset`使用`rownum`失败。有什么建议么？？

我没有计算行数的变量，我应该有吗？在这种情况下，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:09:58.350

一个简单的、可重现的例子：

```
dat = data.frame(A = runif(100), B = runif(100))
lm(A~B, dat) 
```

正如您发现的那样，这失败了：

```
> lm(A~B, dat, subset = (rownum < 50))
Error in eval(expr, envir, enclos) : object 'rownum' not found 
```

那是因为您的数据中没有`rownum`列。有两种解决方案：

1.  添加一`rownum`列：

    ```
    dat[["rownum"]] = 1:nrow(dat) 
    ```

2.  或者在分析之前进行子集操作：

    ```
    dat_subset = dat[1:2070,]
    lm(A~B, dat_subset) 
    ```

正如评论者所提到的，选择选项 2 可能是最好的。

# sencha-touch-2 - 如何使用 sencha Touch2 中的提要播放 youtube 视频

> ID：12951596
> 
> 赞同：1
> 
> 时间：2012-10-18T09:38:39.853
> 
> 标签：sencha-touch-2

我想使用 youtube 供稿播放 youtube 视频，例如`http://www.youtube.com/rss/user/userName/videos.rss`

```
xtype: 'nestedlist',
    title: 'Blog',
    iconCls: 'star',
    displayField: 'title',

    store: {
        type: 'tree',

        fields: [
            'title', 'link', 'author', 'contentSnippet', 'content',
            {name: 'leaf', defaultValue: true}
        ],

        root: {
            leaf: false
        },

        proxy: {
            type: 'jsonp',
            url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://www.youtube.com/rss/user/JustinBieberVEVO/videos.rss',
            reader: {
                type: 'json',
                rootProperty: 'responseData.feed.entries'
            }
        }
    },

    detailCard: {
        xtype: 'video',
        scrollable: true,
        styleHtmlContent: true
    },

    listeners: {
        itemtap: function(nestedList, list, index, element, post) {
            this.getDetailCard().setHtml(post.get('content'));
        }
    }
}, 
```

当用户单击提要列表然后应用程序播放直接视频
请帮助我。

# php - 移动多维数组中的元素。

> ID：12951599
> 
> 赞同：1
> 
> 时间：2012-10-18T09:38:44.270
> 
> 标签：php, arrays, multidimensional-array

我有一个包含父母和孩子的多维数组，我想更改数组键

它看起来像这样：

```
Array
(
    [0] => stdClass Object
    (
        [id] => 108
        [parent_id] => 0
        [children] => Array
        (
            [0] => stdClass Object
            (
                 [id] => 71
                 [parent_id] => 108
                 [children] => Array
                 (
                     [0] => stdClass Object
                     (
                         [id] => 107
                         [parent_id] => 71
                         [children] => Array
                         (
                             [0] => stdClass Object
                             (
                                 [id] => 78
                                 [parent_id] => 107
                             )
                         )
                    )
                )
            )
        )
    )

    [1] => stdClass Object
    (
        [id] => 82
        [parent_id] => 0
    )

    [2] => stdClass Object
    (
        [id] => 84
        [parent_id] => 0
    )

    [3] => stdClass Object
    (
        [id] => 88
        [parent_id] => 0
    )

    [4] => stdClass Object
    (
        [id] => 92
        [parent_id] => 0
    )
) 
```

例如，我想移动数组 [id] => 88 下方 id 为 108 的数组。问题是将数组移动到新位置但同时移动子数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:51:19.200

```
function array_remove($array, $index) {
    array_splice($array, $index, 1, array());
    return $array;
}

function array_insert($array, $element, $index) {
    array_splice($array, $index, 0, array($element));
    return $array;
}

function array_move($array, $from, $to) {
    $element = $array[$from];
    $array = array_remove($array, $from);
    $array = array_insert($array, $element, $to - 1);
    return $array;
}

$array = array_move($array, 0, 4);
print_r($array); 
```

# php - 使用 javascript/jquery 隐藏 div 的 PHP 函数

> ID：12951607
> 
> 赞同：1
> 
> 时间：2012-10-18T09:39:13.990
> 
> 标签：php, javascript, jquery

我有一个php函数：

```
function myfunc() {

//then I have a div...

echo '<div class="overlay">';
echo "<button onclick=\"$('.overlay').hide();\">Close</button>";
echo '</div>';

} 
```

我的问题是，当我单击关闭按钮时，div 没有隐藏。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:41:38.237

避免在 php 代码的输出中硬编码 javascript 处理程序和内联事件：改为执行

```
echo '<div class="overlay">';
echo "<button>Close</button>";
echo '</div>'; 
```

并且之前在您的页面中插入此代码，该代码使用事件委托检测您的按钮单击

```
<script>
  $(document).on('click', '.overlay button', function() {
      $(this).parent().hide()
  });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:42:09.713

尝试：

```
<button onclick="this.parentNode.style.display = 'none'; return false;">Close</button> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T09:51:11.593

试试这个代码：

```
function myfunc() {

//then I have a div...

echo '<div class="overlay"  id="overlay" >';
echo "<button onclick=\"hide()\">Close</button>";
echo '</div>';

}
//using the javascript code:
function hide()
{
    document.getElementById("overlay").style.display="none";

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T12:31:56.360

尝试：

```
$('.overlay button').live('click',function(
    $('.overlay').css({'display': 'none'});
)); 
```

# c# - 如何区分从服务器返回的 NotFound 和由于连接不良而导致的 NotFound？

> ID：12951610
> 
> 赞同：5
> 
> 时间：2012-10-18T09:39:17.783
> 
> 标签：c#, windows-phone-7

在 Windows Phone 上，我可以`WebException`使用`StatusCode == HttpStatusCode.NotFound`if

1.  服务器返回 404
2.  由于连接不良，无法找到服务器。

在 Windows Phone 上`WebException`的状态`WebExceptionStatus.UnknownError`适用于这两种情况。

我如何区分`1`案例`2`？

我观察到的是连接不良（未找到服务器）`ResponseUri`为 null 并且`WebResponse`'s Headers 包含`0`项目。

**EDIT**
`ResponseUri`不为空，而是为`OriginalString`空

这样做是否安全：

```
catch (WebException ex)
{
    switch (ex.Response.StatusCode)
    {
        ...
        case HttpStatusCode.NotFound:
            if (ex.Response.ResponseUri == null
                || string.IsNullOrEmpty(httpWebResponse.ResponseUri.OriginalString))
                DoServerNotFound();
            else
                DoServerReturned404(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:13:57.467

为什么不使用`NetworkInterface.GetIsNetworkAvailable()`在进行网络呼叫之前查看是否有活动的网络连接。否则，您最终什么都没有等待并浪费了一个电话。如果有连接但呼叫仍然失败，则您知道这是 Web 服务的问题。

我在我的应用程序中使用它，如果没有连接，我不会打电话。

谢谢马克斯
_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T13:53:31.780

如果您收到床位请求的“未找到”异常，这将有所帮助。

```
 catch (WebException ex)
       {                     
         using (WebResponse webResponse = ex.Response)
              {
                HttpWebResponse httpResponse = (HttpWebResponse)webResponse;
                using (Stream data = webResponse.GetResponseStream())
                using (var reader = new StreamReader(data))
                    {
                      string string = reader.ReadToEnd();

                      }
              }
          } 
```

# apache - 当使用 Apache Commons Exec 调用的进程停止时如何获得通知？

> ID：12951613
> 
> 赞同：1
> 
> 时间：2012-10-18T09:39:25.427
> 
> 标签：apache, exec

我正在使用 Apache exec 库调用 java 进程。如果进程被强制停止（使用任务管理器或其他方式），我需要做一些操作。exec 库中是否有任何可用选项？我在 ResultHandler 中发现了一个 waitfor() 操作，它正在忙着等待。有没有可用的通知机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:42:05.797

我希望*退出状态*能够反映进程是否被强制终止。

请参阅[教程](http://commons.apache.org/exec/tutorial.html)，特别是参考您的评论，本节：

> 您的工作线程将阻塞，直到打印过程完成或被看门狗杀死。因此，异步执行打印作业就可以了。在此示例中，我们创建了一个“ExecuteResultHandler”实例并将其传递给“Executor”实例，以便异步执行流程。“resultHandler”获取任何有问题的异常或进程退出代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-19T13:07:27.683

很久以前就有人问过这个问题，但我今天偶然发现了它...

这是解决方案：您只需设置一个[ExecuteResultHandler](https://commons.apache.org/proper/commons-exec/apidocs/org/apache/commons/exec/ExecuteResultHandler.html)并将其传递给[execute 方法](https://commons.apache.org/proper/commons-exec/apidocs/org/apache/commons/exec/DefaultExecutor.html#execute(org.apache.commons.exec.CommandLine,%20org.apache.commons.exec.ExecuteResultHandler))。然后不涉及主动等待。像这样：

```
DefaultExecuteResultHandler resultHandler = new DefaultExecuteResultHandler() {
    @Override
    public void onProcessComplete(int exitValue) {
        super.onProcessComplete(exitValue);
        log.info("Process finished");
    }

    @Override
    public void onProcessFailed(ExecuteException e) {
        super.onProcessFailed(e);
        log.info("Process failed miserably");
    }
};

String process = "C:\\Program Files (x86)\\Adobe\\Acrobat Reader DC\\Reader\\AcroRd32.exe";
CommandLine cmdLine = new CommandLine(process);
cmdLine.addArgument("C:\\Users\\francois.marot\\Downloads\\UtiliserLesDernieres DLL.pdf");

DefaultExecutor executor = new DefaultExecutor();
// the watchdog purpose is to kill the process after a specified timeout
SphereExecutionWatchdog watchdog = new SphereExecutionWatchdog(5000);
executor.setWatchdog(watchdog);
executor.execute(cmdLine, resultHandler); 
```

# java - 如何传递所选 CommandLink 的 id

> ID：12951617
> 
> 赞同：0
> 
> 时间：2012-10-18T09:39:42.400
> 
> 标签：java, jsf, commandlink

我有一个数据表，其中一列包含特定项目的状态。状态在列中显示为 commandLink。如果从数据库中检索到的项目的状态是逗号分隔的值，例如 Status1，Status 2，我必须在同一项目的列中显示 2 个命令链接，即一个带有 Status1，另一个带有 Status 2。

```
<h:commandLink id="status1Link" value="#{pc_test.status1}"
                            onclick="showAssignKeyRvPopup(#{plist.t3Id},'#{plist.t3FileName}','#{plist.status}');return false;"
                            rendered="#{plist.status == 'Status1,Status2'}"
                            update="assignKeyRvDialog">
                        </h:commandLink> 
```

以上是我用来显示 commandLink 的代码。单击时，它会显示一个弹出窗口，如果我单击 OK，我必须执行一个再次更新状态的操作。我在同一列中有 2 个 commandLink，我的问题是当我单击一个 commandLink 并执行操作时，我希望该 commandLink 的文本只更改，而不是另一个。所以，我需要传递我单击的 commandLink 的 id。请让我知道我该怎么做。

我按照您的建议尝试了-

```
<p:remoteCommand name="doSubmit" actionListener="#{pc_testmaps.doAssignUser}" />

<p:commandButton id="assignUser" value="Submit" onclick="doSubmit();"> </p:commandButton>

function doSubmit() {
            document.getElementById('nonMCLink') = commandLinkId;
            doAssignUser([{name:'commandLinkId', value:commandLinkId}]);
        }

And in the bean, 

public void doAssignUser() throws DelegateException {

        FacesContext context = FacesContext.getCurrentInstance();
        Map<String, String> map = context.getExternalContext().getRequestParameterMap();
        String linkStatus = (String) map.get("commandLinkId");
        System.out.println(linkStatus);
} 
```

它似乎仍然不起作用，当我打印 linkStatus 值时，我将其设为空。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:03:23.357

如果您使用 primefaces，则可以使用 [p:remoteCommand轻松完成](http://www.primefaces.org/showcase-labs/ui/remoteCommand.jsf)

首先，获取`commandLink`使用 javascript 的 id，然后您可以使用 action 将其放入您的 bean。

这是一个简单的例子。检查一下。

[使用远程命令](https://stackoverflow.com/questions/12908693/primefaces-remotecommand-tag-is-not-working-when-passing-html-of-my-current-page/12922502#12922502)

**更新**

```
 <p:remoteCommand name="doSubmit"
        actionListener="#{yourBean.doSubmit}" />

<script type="text/javascript">
function onOKclick() {
$(document).ready(function() {
    var commandLinkID = "yourcommandlinkId" //or get id using javascript with name          
doSubmit([{name:'commandLinkID', value:commandLinkID}]);
    });         
}
</script> 
```

弹出窗口中的 OK 按钮

```
 <h:commandButton onclick="onOKclick();" /> 
//calling onOKclick js function is important.you can call onOkclikc js function where you want 
```

你的 bean 中的 doSubmitMethod；

```
public void doSubmit(){
  FacesContext context = FacesContext.getCurrentInstance();
            Map<String, String> map = context.getExternalContext().getRequestParameterMap();
           String value = (String) map.get("commandLinkID");
System.out.print(value);

} 
```

也许对你有帮助。

# asp.net - 将 ID 添加到 GridView 行

> ID：12951618
> 
> 赞同：9
> 
> 时间：2012-10-18T09:39:46.500
> 
> 标签：asp.net

如何将 ID 添加到 GridView 行（应呈现 ID）？

我正在使用 .NET (C#)。我有 GridView 控件。

我有一些处理表行的 javascript 函数，但必须有这些行的 ID：

```
<table>
    <tr id=1> ...  
    <tr id=2> ...  //id should come from database
.. 
```

我的 GridView 是从数据库中的数据生成的。重要的是不要有 FAKE ROW IDS，而是真正来自 DB 的行 id（有一些 ajax javascript 函数可以根据这些 ID 和用户对表的操作来更新 DB）。

我的 GridView 的一部分如下：

```
 <asp:GridView ID="grdNews" runat="server" BorderStyle="None" RowStyle-BorderStyle="None"
                GridLines="None" CssClass="table" Style="white-space: nowrap" AutoGenerateColumns="False"
                DataKeyNames="ID" AllowSorting="True" AllowPaging="true" OnSorting="grdNews_Sorting" OnRowDataBound="grdNews_RowDataBound">
                <RowStyle BorderStyle="None" />
                <HeaderStyle CssClass="nodrag" />
                <Columns>
                .... 
```

我尝试了以下方法：

```
 protected void grdNews_RowDataBound(object sender, GridViewRowEventArgs e)
{
     if (e.Row.RowType == DataControlRowType.DataRow)
     {
         e.Row.ID = grdNews.DataKeys[e.Row.RowIndex].Value.ToString();
     }
} 
```

这为 e.Row.ID 提供了正确的值，但这不会呈现此 ID。

那么，如何从数据库中为 GridView 中的行渲染 ID？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T09:46:14.163

尝试跟随....

```
protected void grdNews_RowDataBound(object sender, GridViewRowEventArgs e)
 {
      if (e.Row.RowType == DataControlRowType.DataRow)
      {
        GridViewRow row = e.Row;
        row.Attributes["id"] =grdNews.DataKeys[e.Row.RowIndex].Value.ToString();

      }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:46:36.890

最简单的方法是使用可以从客户端和服务器端访问的隐藏字段。

```
<Columns>
      <asp:TemplateField >
           <ItemTemplate>
               <asp:HiddenField ID="HiddenID" runat="server" Value='<%#Eval("ID") %>' />
           </ItemTemplate>
      </asp:TemplateField>
      ....
</Columns> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-25T01:55:54.073

VB.net代码

```
 Private Sub gvPayments_RowDataBound(ByVal sender As Object, ByVal e As     System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvPayments.RowDataBound

    Dim counter As Integer = 0

    For Each oItem As GridViewRow In gvPayments.Rows

        counter += 1
        oItem.Cells(1).Text = counter.ToString()
        oItem.Attributes("id") = "tr_" + counter.ToString

    Next

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-21T19:06:36.593

确保：

1.  您在 IsPOstback 事件之外调用数据库绑定函数。

2.  您没有在网格定义中提到您的 RowDatabound 事件签名

# jquery - prettyPhoto：如何动态添加照片以打开图库

> ID：12951619
> 
> 赞同：0
> 
> 时间：2012-10-18T09:39:46.267
> 
> 标签：jquery, ajax, api, photo-gallery

我有一个使用 prettyPhoto 的图片库。我使用 api 在其中加载照片。第一张照片在缩略图上的数据属性中可用。其余图像是通过 AJAX 调用获取的。

相册的第一张照片（已经在 DOM 中的那张）正在完美显示。但是在 AJAX 调用的成功功能中，我正在用新图像重新加载图库。那部分不工作。

我究竟做错了什么？

**HTML：（**我删除了不必要的元素）

```
<a href="/images/test.jpg" class="albumTrigger" rel="129">
  <img src="/images/test.jpg?rwidth=100&quality=100" id="thumbImage5418" class="thumbImage" data-album='[{"description":"","name":"test.jpg","id":5418,"url":"\/images\/test.jpg"}]'>
</a> 
```

**JAVASCRIPT：**

```
$('#gallery').on('click','.albumTrigger',function(e) {
  // initialize gallery
  $.fn.prettyPhoto({ 
    slideShow: 3000, 
    theme: 'dark_rounded',
    social_tools: ''
  });

  var api_images = [];
  var api_titles = [];
  var api_descriptions = [];
  var albumData = $(this).find('.thumbImage').data('album');
  $.each(albumData,function(index,item) {
    api_images.push(item.url);
    api_titles.push(item.name);
    api_descriptions.push(item.wf_description);
  });
  $.prettyPhoto.open(api_images,api_titles,api_descriptions);

  // Get rest of images via ajax
  $.get('/gallery',{
    'id': $(this).attr('rel'),
    'method': 'getAlbumImages'
  },function(albumData) {
    // I did console.log(albumData); here, and there was data
    // add images to gallery
    $.each(albumData,function(index,item) {
      api_images.push(item.url);
      api_titles.push(item.name);
      api_descriptions.push(item.description);
    });
    $.prettyPhoto.open(api_images,api_titles,api_descriptions);

  });

  e.preventDefault();

}); 
```

**编辑：**

如果我删除打开 prettyPhoto 的第一块代码，它就可以完美运行。但现在画廊在 ajax 调用运行后打开。这个想法有点像在运行 ajax 调用时，用户已经看到了相册照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:05:28.837

尝试将您的第二个 .open 调用更改为首先关闭图库，然后再次打开它：

```
$.prettyPhoto.close();
$.prettyPhoto.open(...); 
```

# c# - .NET 配置文件的专有软件问题

> ID：12951622
> 
> 赞同：2
> 
> 时间：2012-10-18T09:40:03.383
> 
> 标签：c#, .net, config, user.config

我为大型专有平台 - DocsVision 编写了一个扩展。这个平台使用 .NET 3.5 SP1 工作，但我使用 .NET 4 编写了我的扩展（我想，为什么不呢？）

后来，当 DocsVision 使用 Internet Explorer 作为主机时 - 我被添加到带有启动标记的 IE 目录中的 .config 文件以支持 .NET 4 的运行时并且一切正常。

但是现在，在新版本中，有新的主机 - Navigator.exe 有自己的 .config 文件：

**导航器.exe.config**

```
<?xml version="1.0" encoding="utf-8" ?>
 <configuration>
  <configSections>
   <sectionGroup name="docsvision.platform.wpf.navigator" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
    <section name="navigator" type="DocsVision.Platform.Wpf.Navigator.Configuration.NavigatorConfigurationSection, DocsVision.Platform.Wpf.Navigator, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7148afe997f90519"  allowExeDefinition="MachineToLocalUser" />
   </sectionGroup>
  </configSections>
  <docsvision.platform.wpf.navigator>
   <navigator>
    <connection />
   </navigator>
  </docsvision.platform.wpf.navigator>
  <runtime>
   <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <!-- Probing path is used for fast loading of ngen assembly images -->
    <probing privatePath="Components;SystemCards;BaseObjects;Workflow;TakeOffice" />
   </assemblyBinding>
  </runtime>
 </configuration> 
```

**用户配置**

```
<?xml version="1.0" encoding="utf-8"?>
 <configuration>
  <docsvision.platform.wpf.navigator>
   <navigator>
    <connection DisableVersionMismatchNotification="false" LangName="" />
    <view ShowArchivedItems="false" ShowColorLabels="true" ShowDeletedItems="false"
            ShowNavigationPane="true" ShowPreviewPane="false" ShowStatusBar="true" />
   </navigator>
  </docsvision.platform.wpf.navigator>
 </configuration> 
```

因此，由于混合模式，我的 .dll .NET 4 无法加载。如果我添加到 Navigator.exe.config 以下经典行：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
 <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

我的 .dll 将正确加载并且我的所有扩展都可以正常工作，但它会在 GUI 和平台的其他部分出现异常（在加载其他一些 DLL 时）出现一些问题。

我做错了什么以及如何使用我的扩展而没有平台中的错误？

PS我的DLL首先使用COM加载，所以我有这个： ![带有所有 DLL 的 Navigator.exe](../Images/358ef0fbf33444a262c2ecd4cc2bf343.png)

因此，有两个应用领域。但是当我尝试对我的扩展执行 smthng 操作时 - 加载 .NET 4 dll 时出错。为什么？？？

# php - 关于 PHP、Jquery 和 Ajax 的问题。

> ID：12951623
> 
> 赞同：2
> 
> 时间：2012-10-18T09:40:09.060
> 
> 标签：php, jquery, mysql, ajax

我目前有一个关于 PHP、Jquery 和 Ajax 的问题。

我的页面底部有一个 div，其中包含来自数据库的数据，现在对于数据的每次迭代，都会形成一个新的 div，该 div 的 id 为“pagestatus”，并且旁边有一个自动增量所以每个 div 的 id 更改如下：“pagestatus0”、“pagestatus1”等。

现在我对 Jquery 并不完全陌生，因为我使用它来使页面更具交互性，并且我使用 Ajax 来更新 MySQL 数据库。

不过，我的代码有问题，我希望它是这样的：

*   按钮在 div 中被点击
*   按钮淡入（或 div，哪个更容易）
*   带有加载 gif 的隐藏 div 出现在下方
*   Ajax 调用 php 文件对数据库进行更改
*   jquery 然后淡出加载 gif 并淡入按钮

我已经为它编写了一些代码，但我认为我在某个地方出错了，有人可以看到我做错了什么并让我知道如何解决它。

这是我的jQuery：

```
$(document).ready(function(){
    for(i=0;i<$('#changestatusoff').val();i++){
        (function(x){
            $('#changestatusoff'+x).click(function(){
                $('#changestatusoff'+x).fadeOut('slow',function(){
                    $('#loadingstatus').fadeIn('slow',function(){
                        $.ajax
                        ({
                            type: "POST",
                            url: '.php',
                            data: {'changestatusoff': changestatusoff}, 
                            success: function(data) {
                                return data;
                            },
                            error: function() {
                                alert('Error occured');
                            }
                            $('#loadingstatus').fadeOut('slow',function(){
                                $('#changestatusoff'+x).fadeIn('slow',function();
                            });
                        });
                    });
                });
            });
        });         
    }
})(i);
}); 
```

这是 div 中的按钮：

```
<input type='button' value='Offline' id='changestatusoff".$count."' style='background: none repeat scroll 0% 0% rgb(0, 118, 188); color: rgb(255, 255, 255); border: 1px solid rgb(0, 0, 0); font-weight: bold; cursor: pointer; margin:5px;'/> 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:52:07.310

正如其他人提到的，我们不知道您提交的是什么;-)

使用一个类，这意味着它不必为每个项目创建一个新的绑定，它可以一次完成所有工作。

您可以执行以下操作：

```
$(function() {
    //set loading
    var $loading = $('#loadingstatus');

    //on changeStatus click
    $('.changeStatus').click( function(e) {
        //since we dont have a form, disable default behaviour
        e.preventDefault();
        //set $this as the item clicked
        var $this = $(this);
        //fadeIn loading, fadeout the item
        $this.fadeOut();
        $loading.fadeIn();
        //make ajax request
        $.ajax
            ({
            type: "POST",
            url: 'yourPhpFile.php',
            data: {'changestatusoff': $(this).val()}, 
            success: function(data) {
                //Do something with data?
                $loading.fadeOut();
                $this.fadeIn();
            },
            error: function() {
                //Do nothing, and tell an error happened
                alert('An error occured');
                $loading.fadeOut();
                $this.fadeIn();
            }
        });
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:47:22.943

我认为您需要检查`data: {'changestatusoff': changestatusoff}`并尝试将其更改为`data: {changestatusoff: 'changestatusoff'}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:52:05.333

尝试以下

```
$(function(){
   $('#Your_Event_Source').click(function(){
      $(this).fadeOut(600);
      $('#loadingstatus').fadeIn(600);
      $.post('you_file.php',{changestatusoff: 'yourValue'},function(data){
         if(data.success == 'yes'){
             alert(data.message);
             $('#Your_Event_Source').fadeIn(600);
             $('#loadingstatus').fadeOut(600);
         }else{
             alert('failed'+ data.message);
             $('#Your_Event_Source').fadeIn(600);
             $('#loadingstatus').fadeOut(600);
         }
      },'json');
   });
}); 
```

我建议在 php 中使用“成功”：

```
$data = array('success'=>'yes','message' => 'your meaasage',...);
echo json_encode($data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:03:45.760

如果你想改变加载 gif，那么你应该把最后两行：

```
$('#loadingstatus').fadeOut('slow',function(){
$('#changestatusoff'+x).fadeIn('slow',function(); 
```

在完成的回调中，而不是在 ajax 调用之后。

```
$.ajax
({
type: "POST",
url: '.php',
data: {'changestatusoff': changestatusoff}, 
success: function(data) {
    return data;
},
error: function() {
    alert('Error occured');
},
completed: function() {
    $('#loadingstatus').fadeOut('slow',function(){
    $.('#changestatusoff'+x).fadeIn('slow',function();
} 
```

# apache - 牛墙.htaccess

> ID：12951629
> 
> 赞同：-1
> 
> 时间：2012-10-18T09:40:29.500
> 
> 标签：apache, .htaccess, mod-rewrite, oxwall

这是我的 .htaccess 文件

```
Options +FollowSymLinks
RewriteEngine On

AddEncoding gzip .gz
AddEncoding gzip .gzip
<FilesMatch "\.(js.gz|js.gzip)$">
  ForceType text/javascript
</FilesMatch>
<FilesMatch "\.(css.gz|css.gzip)$">
  ForceType text/css
</FilesMatch>

RewriteCond %{REQUEST_URI} .*/http-bind
RewriteRule (.*) /http-bind [L]

RewriteCond %{REQUEST_URI} !^/index\.php
RewriteCond %{REQUEST_URI} !/ow_updates/index\.php
RewriteCond %{REQUEST_URI} !/ow_updates/
RewriteCond %{REQUEST_URI} !/ow_cron/run\.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.xml|\.feed|robots\.txt|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php 
```

牛墙版本 1.4.1。当我浏览到 localhost 时，它会将我重定向到 localhost/install/requirements/ 并显示消息 - 在此服务器上找不到请求的 URL /install/requirements。当我浏览到 localhost/index.php 安装开始但安装后 oxwall 无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:51:18.543

“在此服务器上找不到请求的 URL /install/requirements。”

我猜你需要先在你的服务器中[激活。`mod_rewrite`](https://stackoverflow.com/questions/8628907/how-to-activate-mod-rewrite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T15:16:22.387

1.  在 Web 服务器中启用 mod_rewrite。
2.  将您的 Oxwall 文件和文件夹保存在您的 Web 根目录中。
3.  试试这个网址：localhost/install。

这对我有用。

# c# - 使用 SQL 过程替换文件中的字符串

> ID：12951638
> 
> 赞同：3
> 
> 时间：2012-10-18T09:40:41.497
> 
> 标签：c#, sql-server, clr, .net-assembly

我有一种方法可以从用 C# 为 SQL Server 编写的文件中删除字符串：

```
[SqlProcedure]
public static void fileReplace(string path, string patternToReplace, string stringForReplace)
{
    using (SqlConnection connection = new SqlConnection("context connection=true"))
    {
        connection.Open();
        try
        {
            File.WriteAllText(path, Regex.Replace(File.ReadAllText(path), patternToReplace, stringForReplace));
        }
        catch (Exception e)
        {
        }
    }
} 
```

SQL Server 中的程序集和过程是这样创建的：

```
CREATE ASSEMBLY FileUtils 
  FROM '<path>\<name>.dll'
  WITH PERMISSION_SET = EXTERNAL_ACCESS
GO

CREATE PROCEDURE fileReplace (
         @path             nvarchar(max)  
       , @patterToReplace  nvarchar(max)  
       , @stringForReplace nvarchar(max)  
      )
AS EXTERNAL NAME FileUtils.FileUtils.fileReplace;
GO 
```

C# 中的方法工作正常，但是当我从 SQL Server 调用它时，什么也没有发生（文件没有改变）。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:42:21.400

您的 SQLServer 登录需要对该文件具有权限。当它尝试读取/写入文件时，它可能会因异常而失败，但异常被`try catch`

# java - 检查构造函数/方法参数

> ID：12951640
> 
> 赞同：3
> 
> 时间：2012-10-18T09:40:45.220
> 
> 标签：java, guava

我通常通过 Guava 的 Precondition 方法检查几乎所有的构造函数和公共方法参数。私有方法参数通常带有断言。但是，现在我正在考虑替换“内部”前提条件检查，即构造函数/工厂方法/通用方法（不是公共 API/应用程序 API 的一部分）中的检查......用断言，你怎么看? 也许这样会快一点，因为我有很多检查;-)

编辑：我的意思也是公共构造函数和工厂，它们*不应该*是公共 API 的一部分，只是在内部使用，例如：

```
/**
 * Constructor with both, complete and modifying page.
 * 
 * @param complete
 *          to be used as a base for this container
 * @param modifying
 *          to be used as a base for this container
 */
public NodePageContainer(final @Nonnull NodePage complete,
    final @Nonnull NodePage modifying) {
  assert complete != null;
  assert modifying != null;
  mComplete = complete;
  mModified = modifying;
} 
```

在我拥有之前`mComplete = checkNotNull(complete);`......但它只是从另一个包中的一个类中调用，甚至不应该是公共 API 的一部分。如果 Java 允许降低此类类的可见性，那就太好了；-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T09:48:16.557

断言和前提条件不是一回事。

断言检查不变量是否得到尊重：它检查**您**自己的算法是否按预期工作。例如，随机生成器生成的数字始终为正数。一旦您检查了一切正常并且您没有断言失败，它们就可以被停用。

Guava 前置条件检查**调用者**没有传递无效参数或不调用不应调用的方法。例如，作为参数传递给`nextInt()`方法的限制大于 0，或者`setSeed()`在随机生成器启动后未调用。

如果您的目标是强制 API 的调用者尊重其合同，那么我将使用 Guava 前置条件，而不是断言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:34:02.643

根据`Effective Java`您的说法，应该对 API 公开的方法使用检查 ( `Preconditions`)，对非 API 方法使用断言。这意味着任何不使用`private`或`package private`应该使用检查的方法/构造函数。WRT，`private`并且`package private`，使用断言更有效，建议在部署早期启用断言以帮助调试，然后随着信心的增长和性能成为问题，然后选择在生产周期的后期禁用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:52:10.667

我同意你的推理，但我会`Precondition`在你的例子中使用。构造函数从外面是可见的，所以你可以打赌总有一天有人会调用它。而且测试很便宜，所以不值得麻烦。

实际上，这是我的辅助标准：我主要根据 API / 非 API 原则来决定，但有时会为非常便宜或非常昂贵的检查例外（也取决于上下文和由于缺少检查而可能造成的伤害量）。

# powershell - COMAdmin - 安装代理后强制刷新应用程序

> ID：12951642
> 
> 赞同：0
> 
> 时间：2012-10-18T09:40:55.220
> 
> 标签：powershell, com+

我正在通过 Powershell 以编程方式安装 COM+ 代理组件，在 msi 上使用 msiexec，然后使用 COMAdmin.COMAdminCatalog 对象在代理上设置远程服务器。

问题是新安装的代理需要一段时间才能在 COMAdminCatalog 的“应用程序”集合中可用。有没有办法在获取应用程序列表之前强制刷新目录？

本质上，我所做的是：

1.  `msiexec /q /i $appName.msi`

2.  使用`COMAdmin.COMAdminCatalog`枚举应用程序。

```
 function Set-Remote-Server-For-Complus-Application($appName, $remoteServer) {
    $comAdmin = New-Object -comobject COMAdmin.COMAdminCatalog
    $apps = $comAdmin.GetCollection("Applications")
    $apps.Populate();

```
$app = $apps | Where-Object {$_.Name -eq $appName}

if ($app -eq $null) {
    Write-Warning "Unable to find COM+ app ""$appName""."
    Return
}

$app.Value("ApplicationProxyServerName") = $remoteServer
$result = $apps.SaveChanges()
$apps = $null

if ($result -eq 1) {
    Write-Output "Successfully set complus remote server ""$remoteServer"" on ""$appName"""
} 
```

} 
```

问题是未找到该应用程序。如果我`Start-Sleep -Seconds 2`在调用之间添加一个，它会起作用。但是，睡眠不好，因为有时可能需要超过 2 秒，有时可能只需要 200 毫秒，因此等待时间过长。

有什么方法可以确保在我尝试枚举应用程序之前 COMAdmin.COMAdminCatalog 实际更新，而不是求助于睡眠并只希望获得最好的结果？

# r - zoo 和 UTC 时间（微秒）

> ID：12951646
> 
> 赞同：1
> 
> 时间：2012-10-18T09:41:18.237
> 
> 标签：r, time, utc, xts, zoo

数据集的 UTC 时间为微秒

```
TIME,DATA1,DATA2
1350359123.325330,661.00,765.00
1350359123.491836,661.00,765.50 
```

但是，我无法同时进行 utc 格式转换和微秒。

我已经问过一个[类似的问题](https://stackoverflow.com/questions/11136340/r-zoo-xts-microsecond-read-issue)，但时间格式不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:18:40.600

不需要`zoo`或`xts`不需要*解析*时间：

```
R> as.POSIXct(c(1350359123.325330, 1350359123.491836), 
+             origin="1970-01-01", tz="UTC")
[1] "2012-10-16 03:45:23.325330 UTC" "2012-10-16 03:45:23.491836 UTC"
R> 
```

现在，`POSIXct`作为时间对象，您可以为数据部分创建`xts`或`zoo`对象。

# .net - Caliburn Micro Capture 鼠标位置

> ID：12951648
> 
> 赞同：2
> 
> 时间：2012-10-18T09:41:20.213
> 
> 标签：.net, wpf, user-interface, mvvm, caliburn.micro

我是 Caliburn Micro 的新手，每当左键在 Viewport3D 控件上时，我都会尝试捕获鼠标位置。

在 XAML 中使用它；

```
cal:Message.Attach="[Event MouseLeftButtonUp] = [Action MouseUp($eventArgs, $source)] 
```

在 ViewModel 中：

```
public void MouseUp(MouseEventArgs args, IInputElement elem)
{
    Point pt = args.GetPosition(elem);
    //do something with pt
} 
```

我可以得到鼠标点击位置。但是，我想在 ViewModel 中拥有的是：

```
public void MouseUp(Point pt)
{
    // do something with pt
} 
```

我不想在我的 ViewModel 中有 IInputElement 参数等——该事件由 Viewport 引发，因此它应该被视为 IInputElement。

我能做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:26:56.067

是的，你可以这样做。您要做的是使用 MessageBinder.SpecialValues 创建您自己的特殊值，该值将解析该点并返回它。

因此，在您设置 Caliburn.Micro 的地方，添加以下代码：

```
 MessageBinder.SpecialValues.Add("$mousepoint", ctx =>
        {
            var e = ctx.EventArgs as MouseEventArgs;
            if (e == null)
                return null;

            return e.GetPosition(ctx.Source);
        }); 
```

然后你可以像这样在 Message.Attach 中使用它：

```
cal:Message.Attach="[Event MouseLeftButtonUp] = [Action MouseUp($mousepoint)] 
```

好了，更干净的 ViewModel :)。

# php - 使用 access_token 的 php facebook graph api 查询

> ID：12951652
> 
> 赞同：1
> 
> 时间：2012-10-18T09:41:25.327
> 
> 标签：php, android, facebook, facebook-graph-api

我有一个 android 应用程序，用户在其中使用 facebook 进行身份验证。现在，我向我的服务器发出一个 post 请求，并将 facebook 的 access_token 发送到该服务器。在服务器上，我现在想通过将 access_token 传递给 facebook graph api 来访问用户信息。有什么解决办法吗？问题是用户只使用应用程序，而网络服务器必须仅使用 access_token 进行身份验证。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T09:48:28.193

是的——它实际上非常“简单”（就 Facebook 而言）。

带您完成以下步骤：

1.  设置：在 Facebook 开发者应用程序中，确保您已为同一应用程序设置了移动设备 (Android) 和网站设置。他们需要共享 App ID 和密码
2.  设置：下载[Facebook 的 PHP SDK](https://github.com/facebook/facebook-php-sdk/)。这使得对抗原始的“Graph”调用变得更加简单。
3.  流程：当用户登录您的手机时，您将获得“访问令牌”。这是您要传递给 PHP 服务器的项目。
4.  过程：在 PHP 中，当您初始化 Facebook 类时，告诉它不要使用 cookie。
5.  流程：在 PHP 中，初始化类后，使用`SetAccessToken`SDK 中的函数来使用您在移动应用中获得的访问令牌。
6.  流程：然后，当您`/me`拨打电话时，您将是在移动设备上获得令牌的同一用户。

代码示例：

```
$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOUR_APP_SECRET',
  cookie : false
));

// Use the token you sent
$facebook->setAccessToken($sentToken);

// Get User ID
$user = $facebook->getUser(); 
```

# eclipse-cdt - Eclipse CDT 4.2 调试远程外部程序

> ID：12951655
> 
> 赞同：2
> 
> 时间：2012-10-18T09:41:35.537
> 
> 标签：eclipse-cdt, remote-debugging, gdbserver

我想调试以使用 GDB 调试远程应用程序。

我的目标系统是一个正在运行的 FreeBSD 8.3 机器`gdbserver`。该应用程序已在该框中成功编译。我的 Eclipse CDT 4.2 在安装了最新 MinGW 的 Windows 7 上运行。

这是我要调试的外部程序。它既不是我写的，也不是我的图书馆。我不打算编写自己的程序。在这种情况下，我要调试的是 Subversion 1.8.0-dev。

我创建了一个简单的 C 项目，附上 Subversion 的源代码。创建了一个远程调试配置并将源附加到`gdbserver`.

现在，eclipse 进入了`main`Subversion 的功能，但是当我在另一个附加的源文件中设置断点时，Eclipse 说：没有命名的源文件`ra_loader.c`或者它只是说“没有可用的源”。

然后它只是存在应用程序。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T06:59:52.470

尝试在[此线程上提出的建议](http://www.eclipse.org/forums/index.php/t/275262/)

引用 ：

*   1) 运行调试会话并在 Eclipse 中打开 gdb 控制台
    （'Console' 选项卡 -> 'Display Selected Console' 按钮 -> 选择以 'gdb' 结尾的那个）

*   2) 在控制台中使用命令 'pwd' 打印 gdb 的当前工作目录

*   3) 使用命令 'info line main' 获取 gdb 期望在其中找到我的“int main(...)”函数的源文件

*   4）将步骤2的结果与步骤3的结果（应该是相对路径）连接起来，看看它是否匹配我想要的正确源文件

*   5）在gdb中使用'cd'命令（更改当前工作目录）直到我在步骤4中得到正确的匹配知道gdb的初始工作目录（2）和正确的工作目录（5），我有2个选项: 1) 每次启动调试会话时使用 gdb 的“cd”命令（我可以在 gdb 初始工作目录中设置一个 .gdbinit 文件以自动执行此操作）或 2) 在“调试配置”中设置“源”选项卡，使 Eclipse 使用与 gdb 的初始工作目录匹配的路径（“项目 - 相对于源文件夹的路径”对我有用）

# javascript - 如何使用javascript从文件夹中获取最新图像？

> ID：12951659
> 
> 赞同：-1
> 
> 时间：2012-10-18T09:41:36.653
> 
> 标签：javascript, jquery, asp.net, image, uploadify

我正在使用 jquery 的 Uploadify 在服务器上上传图像。现在当用户成功上传图片时我在做什么，我想用旧图片替换这张图片。为此我绑定了uploadify的图像**onsuccess**方法，如果图像的名称总是与前一个不同，它工作正常，但如果图像的名称与旧的相同，它不会刷新图像，它仍然显示旧的image.here是我的代码：

```
 var WishId = "";
   var ImagePath = $('[id$=hdnImgPath]').val();
   var DefaultImagePath = $('[id$=hdnDefaultImagePath]').val();
   $("[id$=fpFiles]").uploadify({
       'swf': 'Swf/uploadify.swf',
       'uploader': 'Resources/Handlers/UploadProfilePic.ashx',
       'progressData': 'speed',
       'cancelImg': 'Images/Grid_ActionDelete.gif',
       'fileSizeLimit': '1MB',
       'fileTypeExts': '*.gif; *.jpg; *.png',
       'auto': true,
       'multi': false,
       'buttonText': 'Select',

       'onSelect': function () {
           WishId = $('[id$=hdnWishId]').val();
           $('#lnkUpload' + WishId).show(250);
       },
       'onUploadStart': function (file) {
           $("[id$=fpFiles]").uploadify('settings', 'formData', { 'WishID': "'" + WishId + "'" });
    },
    'onUploadSuccess': function (file, data, response) {
        data = data.replace('"', '').replace('"', '');
        if (data != '') {
            alert(data);
            $('[id$=imgUsersProfilePic]').attr('src', ImagePath + data);
            // $('#hdnImageName' + WishId).val(data);
        } else {
            $('#img' + WishId).attr('src', DefaultImagePath + 'defaultProfile.png');
        }
    }
}); 
```

请让我知道我必须做什么才能显示最新图像而不回发，当我刷新页面时，它显示最新图像时还有一件事。让我知道我错在哪里。

**更新：** 我知道这张图片来自缓存，但我无法删除缓存，如果我也会删除用户会话。所以我需要一些替代品...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:46:45.103

更改图像后，您可以尝试对图像进行版本控制。

例如：对于 defaultProfile.png，将其替换为 javascript 代码中的 defaultProfile.png?v=1。这将从服务器而不是从缓存中获取最新图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:49:56.120

您可以在显示图像后立即在图像末尾添加一个随机数，因此目前仍在加载并使用它，总是强制再次加载它。

```
$('[id$=imgUsersProfilePic]')
     .attr('src', ImagePath + data + '?' + Math.random()); 
```

# c# - 使用 CLR 在 C# 中执行 SQl 查询

> ID：12951661
> 
> 赞同：3
> 
> 时间：2012-10-18T09:41:45.970
> 
> 标签：c#, sql, sql-server, clr

我正在使用 SQl CLR 来解析一些表列。我也想在 C# 用户定义函数中执行查询。有人可以举个例子在函数中执行选择和插入查询吗？

先感谢您。

```
 SqlConnection objSqlConn;
    string connString = string.Empty;
    connString = "Data Source=(local);Initial Catalog=DB;User ID=uname;pwd=pass;Password=pass";
    objSqlConn = new SqlConnection(connString);
    objSqlConn.Open();

    string query = "Select count(*) FROM [DB].[dbo].[TableName]";
    SqlCommand cmdTotalCount = new SqlCommand(query, objSqlConn);
    cmdTotalCount.CommandTimeout = 0;
    string TotalCountValue = cmdTotalCount.ExecuteScalar().ToString();
    return TotalCountValue; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T15:46:36.380

在 CLR 中，您可以使用现有连接来运行查询。

**简单，向客户端返回数据：**

```
var cmd = new SqlCommand("select * from [table]");
SqlContext.Pipe.ExecuteAndSend(cmd); 
```

**通过 SqlDataReader 返回数据：**

```
var con = new SqlConnection("context connection=true"); // using existing CLR context connection
var cmd = new SqlCommand("select * from table", con);
con.Open();
var rdr = cmd.ExecuteReader();
SqlContext.Pipe.Send(rdr);
rdr.Close();
con.Close(); 
```

**运行其他命令：**

```
var con = new SqlConnection("context connection=true"); // using existing CLR context connection
var cmd = new SqlCommand("insert into [table] values ('ahoj')", con);
con.Open();
var rsa = cmd.ExecuteNonQuery();
con.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:45:03.177

一旦切换到 C#，您就可以像通常在应用程序中那样执行查询（使用 ADO.NET 的 SqlConnection 和 SqlDataReader，使用 LINQ to SQL 或使用您的自定义构建数据层）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-18T10:16:19.493

要连接数据库，您必须在 web.config 文件的连接字符串中提及数据库用户名和密码。

# python - Python - 删除具有特定键的重复行

> ID：12951669
> 
> 赞同：0
> 
> 时间：2012-10-18T09:42:18.153
> 
> 标签：python, file, tokenize, duplicate-removal

我在文本文件（示例片段）中有大约 500k 行，如下所示 -

```
1,Party-120273.gif,16256,23ss423
2,Party-120275.gif,16456,23423
3,Party-120273.gif,12656,232423
4,Party-120273.gif,165236,2312423
5,Party-120276.gif,165236,2312423 
```

如何根据第二个值列删除文件中重复出现的行。例如，在上面的行中，删除重复出现的包含*Party-120273.gif*的行。第一次出现的一个应该保留不删除。因此输出应该是 -

```
1,Party-120273.gif,16256,23ss423
2,Party-120275.gif,16456,23423
5,Party-120276.gif,165236,2312423 
```

我必须对整个文件执行此操作，并删除第二列中具有重复值的重复行。我将如何在 python 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:49:43.880

它必须是Python吗？为什么不使用`sort(1)`：

```
sort --field-separator=, --key=2,2 --unique < file 
```

如果您仍想在 Python 中执行此操作，请查看[`csv`模块](http://docs.python.org/library/csv.html)以解析行：

```
seenKeys = set()
for row in reader:
    if row[1] in seenKeys: continue

    seenKeys.add( row[1] )
    print ', '.join(row) 
```

# android - ActivityTab 内的 Android MasterDetail 布局避免嵌套片段

> ID：12951670
> 
> 赞同：2
> 
> 时间：2012-10-18T09:42:18.123
> 
> 标签：android, android-layout, android-fragments, android-actionbar, android-fragmentactivity

我对 android 的 Fragment 不是很熟悉。在我的上一个项目中，我使用的是 TabActivity，但由于它现在被弃用，我开始使用 Fragments 实现一个 ActionBar。

这是我的选项卡类的代码：

```
public class TabInterventoClass extends FragmentActivity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowTitleEnabled(false);

    Tab tab = actionBar.newTab()
            .setText("Dati")
            .setTabListener(new TabListener<DatiFragment_>(this, "dati", DatiFragment_.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab()
            .setText("Sistemi alimentazione")
            .setTabListener(new TabListener<SistemaAlimentazioneFragment_>(this, "Sistemi alimentazione", SistemaAlimentazioneFragment_.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab()
        .setText("Home")
        .setTabListener(new TabListener<HomeFragment_>(this, "home", HomeFragment_.class));
    actionBar.addTab(tab);
} 
```

我以这种方式实现了 ActionBar.TabListener ：

```
public class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final FragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(FragmentActivity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            //ft.attach(mFragment);
            ft.show(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            //ft.detach(mFragment);
            ft.hide(mFragment);
        }
    }
} 
```

请注意关于附加/分离方法的评论，以支持显示/隐藏。这是因为在我的第二个选项卡中，我第二次进入它时遇到了异常（肯定是因为第二个选项卡片段的设计不好）。这里例外：

```
10-18 11:10:13.093: E/AndroidRuntime(3777): Caused by: java.lang.IllegalArgumentException: Binary XML file line #38: Duplicate id 0xffffffff, tag sistemiList, or parent id 0x0 with another fragment for it.cpmapave.mt.ui.intervento.SistemaAlimentazioneListFragment_ 
```

（删除标签和`<fragment android:name="it.cpmapave.mt.ui.intervento.SistemaAlimentazioneListFragment_" />`解决问题的ID..但我需要一种方法来获取它以刷新他的适配器！所以我显示/隐藏片段而不是附加/分离）。幸运的是，我必须修复方向，所以当使用显示/隐藏改变方向时，我没有重叠片段的问题。

这是 FIRST 选项卡显示 DatiFragment，它扩展了 Fragment 类。

![第一个片段](../Images/1a7a756408e6e113cf8e5fd6a4ec7780.png)

这似乎没问题！

这是在 SECOND 选项卡上，它显示 StrumentiFragment。这是布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_marginLeft="16dp"
android:layout_marginRight="16dp"
android:divider="?android:attr/dividerHorizontal"
android:showDividers="middle">
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView
       android:layout_height="fill_parent"
       android:layout_width="wrap_content"
       android:gravity="center_vertical"
       android:text="Sistema di alimentazione:" />

    <Spinner 
        android:id="@+id/sistemiDiAlimentazione"
        android:layout_height="fill_parent"
        android:layout_width="wrap_content" />

     <Button 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="Aggiungi"
        android:id="@+id/addSistemaAlimentazione" />           

</LinearLayout>
<LinearLayout
    android:baselineAligned="false"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">
    <fragment android:name="it.cpmapave.mt.ui.intervento.SistemaAlimentazioneListFragment_"
        android:layout_width="0dp"
        android:tag="sistemiList"
        android:layout_height="match_parent"
        android:layout_weight="1" />
    <FrameLayout android:id="@+id/item_detail_container"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="3" />
</LinearLayout> 
```

![在此处输入图像描述](../Images/3ea988c8bec997ead954c3f1ec658e6b.png)

在 Fragment A 中从 Spinner 添加一个元素会更新 FragmentList B。从 Fragment List B 中选择一个元素会更新 Fragment C 中的详细信息。

我认为问题可能是由嵌套的片段引起的..但我不知道我如何以不同的方式设计它..也许我让它变得比实际更难..

我省略了说明并在代码中显示我正在使用 ActionBarSherlock，只是因为我认为这不是我的问题的原因！

所以最后..问题是：

**我需要获得第二张图片中显示的功能布局。但是我只能通过嵌套片段来获得它。我必须避免这样做。我能怎么做？**

感谢您的任何回复马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:22:59.043

我已经解决了将每个 Frame 放入 FrameLayout 的问题，并在需要时显示/隐藏。

我还为创建 ActionTab 的类定义了自定义布局：

```
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="1"/>

    <LinearLayout
        android:baselineAligned="false"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <FrameLayout
            android:id="@+android:id/navtabcontent"
            android:layout_width="0dp"
            android:layout_height="600dp"
            android:layout_weight="1"/>
        <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="0dp"
            android:layout_height="600dp"
            android:layout_weight="3"/>
    </LinearLayout>
</LinearLayout> 
```

我希望这对某人有用！

# oracle - 使用 %TYPE 属性的 Oracle Cast

> ID：12951673
> 
> 赞同：9
> 
> 时间：2012-10-18T09:42:29.043
> 
> 标签：oracle, oracle11g

我想在我的 SQL 语句中使用 %TYPE 属性转换一个值。%TYPE 属性允许您在自己的声明中使用字段、记录、嵌套表、数据库列或变量的数据类型，而不是硬编码类型名称。

这有效：

```
insert into t1  select cast(v as varchar2(1)) from t2; 
```

但我想

```
insert into t1  select cast(v as t1.v%TYPE) from t2;

Error starting at line 16 in command:
insert into t1  select cast(v as t1.v%TYPE) from t2
Error at Command Line:16 Column:37
Error report:
SQL Error: ORA-00911: Ongeldig teken.
00911\. 00000 -  "invalid character"
*Cause:    identifiers may not start with any ASCII character other than
           letters and numbers.  $#_ are also allowed after the first
           character.  Identifiers enclosed by doublequotes may contain
           any character other than a doublequote.  Alternative quotes
           (q'#...#') cannot use spaces, tabs, or carriage returns as
           delimiters.  For all other contexts, consult the SQL Language
           Reference Manual.
*Action: 
```

可以这样做（或类似的事情）吗？

编辑：我想要实现的是：当 t2.v 太大时，我想截断它。我试图避免使用带有硬编码字段长度的 substr 。所以 cast(v as t1.v%TYPE) 而不是 substr(v,1,1)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T10:12:13.683

[`%TYPE`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/type_attribute.htm)仅在 PL/SQL 中可用，并且只能在[block 的声明部分中使用](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/fundamentals.htm#i27306)。所以，你不能做你正在尝试的事情。

您可能认为您可以声明自己的 PL/SQL（子）类型并在语句中使用它：

```
declare
    subtype my_type is t1.v%type;
begin
    insert into t1 select cast(v as my_type) from t2;
end;
/ 
```

...但这也行不通，因为[`cast()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions023.htm)SQL 函数不是 PL/SQL 函数，并且只识别内置和模式级别的集合类型；并且您不能使用任何一个创建[SQL 类型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_8001.htm)`%TYPE`。

* * *

作为一个讨厌的黑客，你可以这样做：

```
insert into t1 select substr(v, 1,
    select data_length
    from user_tab_columns
    where table_name = 'T1'
    and column_name = 'V') from t2; 
```

如果您可以将该长度存储在一个变量中——SQL*Plus 中的替换或绑定变量，或者 PL/SQL 中的局部变量，那么这会稍微好一些。例如，如果它是通过 SQL*Plus 的直接 SQL 更新，您可以使用绑定变量：

```
var t1_v_len number;
begin
    select data_length into :t1_v_len
    from user_tab_columns
    where table_name = 'T1' and column_name = 'V';
end;
/
insert into t1 select substr(v, 1, :t1_v_len) from t2; 
```

在其他设置中可以进行类似的操作，这取决于执行插入的位置。

# javascript - 计算 javascript (simplecart) 购物车总数，将随机小数添加到总数中

> ID：12951675
> 
> 赞同：0
> 
> 时间：2012-10-18T09:42:40.210
> 
> 标签：javascript, shopping-cart, calculated-columns

我有一个独特的问题，即将失去理智。

我使用的是 js 购物车（simplecart），当我向购物车添加一些东西时，它会在小数点后 15 位从价格中添加 2 或减去 3：

这是产品的成本：35,99 这是当我添加这个单一产品时它计算的总数：

€ 35,990000000000002

我认为这可能与运费或税收有关，但即使禁用了这些模块，它仍然是一样的。此价格也显示为购物车中的商品价格。

这是我的jsfiddle：

[http://jsfiddle.net/dJYNk/](http://jsfiddle.net/dJYNk/)

我应该如何解决这个问题？我不知道这是什么时候偷偷溜进来的，已经剥离了整个项目试图隔离问题，但即使在这个最小的设置中也会发生，我似乎记得这辆推车工作得很好。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:48:52.820

这是浮点精度的问题。Javascript 没有十进制类型，因此所有数字都以浮点数处理，这意味着您得到的是近似值而不是精确表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:51:24.900

```
simpleCart.currency({
    code: "EUR" , 
      name: "Euro" ,
    symbol: " € " ,
    delimiter: " " , 
    decimal: "," , 
    after: false ,
    accuracy: 2
}); 
```

将精度更改为两个位置。您应该使用服务器端验证来计算最终成本，并且只使用 javascript 向用户指示成本。

# iphone - 如何在 iOS5 设备中从 iOS6 启用 Emoji 2

> ID：12951677
> 
> 赞同：0
> 
> 时间：2012-10-18T09:42:41.803
> 
> 标签：iphone, ios, ios5, emoji, emoticons

我曾经做过一个 Emoji 启用应用程序，非常简单：

从 /User/Library/Preferences/com.apple.Preferences.plist 中获取字典，并将键的 BOOL 值：“KeyboardEmojiEverywhere”设置为 true。

然而，在 iOS6 中发布了一组新的表情符号，名为“Emoji 2”，据说它们也可以在 iOS6 之前的设备上解锁，特别是从 iOS5.1 开始。但是，如果在同一个 plist 中有另一个键，你应该设置为 TRUE 来解锁新集合，我找不到任何地方。

所以我的问题是，这些新的 Emoji 2 可以使用 iOS5.1 的 xCode 解锁吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:43:55.143

不，他们不能。我创建了“Emoji 2”，当新的 unicode 字符以黑白创建时，我创造了这个术语。我制作的 app wand 是第一个推向市场的，Apple 重新设计了所有新的彩色 unicode 字符，我的 app 大受欢迎。许多仿冒品很快就出现了，但我的应用程序和其他应用程序从未解锁键盘，它们只索引 unicode 字符（包括我的一些，允许用户通过罗马字键盘在各种“自定义”键盘上访问它们和联系编辑）。资料来源：CEO Apps4Life, LLC。

# flash - 什么是闪存域存储器？

> ID：12951679
> 
> 赞同：0
> 
> 时间：2012-10-18T09:42:51.107
> 
> 标签：flash

几天以来，我一直在努力寻找域记忆的含义和目的的答案。我发现的每一个地方都是许可/费用的东西，而不是定义。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:48:46.913

引用第[一个 Google 结果`flash domain memory`](http://www.adobe.com/devnet/flashplayer/articles/premium-features-licensing-faq.html#u)

> **什么是域内存 API？**
> 2009 年，Adobe 发布了代号为“Alchemy”的项目预览版，这是一个针对 Flash Player 的 C/C++ 交叉编译器的原型。作为研究项目的一部分，我们引入了一个新的域内存 API 来支持编译器。2011 年 9 月，我们宣布了对该技术进行投资并将其作为商业开发付费产品的一部分发布的计划。我们现在将项目重命名为“Alchemy”，即 Flash 运行时 C++ 编译器 (flascc)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:54:49.633

从[链接](http://www.informationweek.com/development/mobility/adobe-upgrades-flash-player-adds-gaming/232700429)

> Adobe 的更新软件为开发人员提供了在其基于 Flash 的游戏中使用硬件加速图形和/或沙盒原生 C/C++ 代码（Adobe 称之为“域内存”）的选项。

**编辑**:: 另一个[链接](http://ncannasse.fr/blog/virtual_memory_api)，AFAIK，这些是 Flash 提供给开发人员的 API。

# xml - 在 XML 中选择行

> ID：12951685
> 
> 赞同：0
> 
> 时间：2012-10-18T09:43:05.567
> 
> 标签：xml, loops, for-loop, row

我有以下 XML，“gXML”从一个页面传递到另一个发送电子邮件的页面。

```
<root>
<Lease>
<Row resmid="10435" EmailAdd="none@nowhere.com" FirstName="Alex" LastName="Choobineh" leaid="6960" reshid="4203" OptInBit="1"/>
<Row resmid="10434" EmailAdd="none@nowhere.com" FirstName="Dan" LastName="Morseman" leaid="6960" reshid="4203" OptInBit="1"/>
<Row resmid="10440" EmailAdd="none@nowhere.com" FirstName="Belinda" LastName="Becerril" leaid="6968" reshid="4205" OptInBit="1"/>
<Row resmid="10456" EmailAdd="almigraso@gmail.com" FirstName="Danaedz" LastName="dupe" leaid="6968" reshid="4205" OptInBit="1"/>
</Lease>
</root> 
```

我希望能够向每一行发送一封电子邮件。我希望它是这样的

```
for (each row){

blah blah blah (send email function)

} 
```

我只是不确定如何在 xml 中选择行。你怎么做呢？

语言是javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:54:45.843

```
function emailRowValues(xml) {
  var root = xml.getElementsByTagName("root")[0];
  if (root) {
    var lease = xml.getElementsByTagName("Lease")[0];
    var rows = lease.childNodes;
    if (rows) {
      for (var i = 0; i < rows.length; i++) {
        var resmid = rows[i].getAttribute("resmid");
        var EmailAdd = rows[i].getAttribute("EmailAdd");
        var FirstName = rows[i].getAttribute("FirstName");
        var LastName = rows[i].getAttribute("LastName");
        var leaid = rows[i].getAttribute("leaid");
        var reshid = rows[i].getAttribute("reshid");
        var OptInBit = rows[i].getAttribute("OptInBit");
    //send email function
      }
    }
  }
} 
```

# sql - 确保最大最小列不重叠

> ID：12951687
> 
> 赞同：0
> 
> 时间：2012-10-18T09:43:08.920
> 
> 标签：sql, oracle10g

假设我有以下类别表：

```
Category  MinValue  MaxValue
A         1         2
B         3         9
C         10        0 
```

上面我使用 0 表示没有最大值。这些值可由最终用户配置。他们将能够添加和删除类别，并修改最大值和最小值。我可以在表格上放置任何类型的约束以确保没有两个范围重叠？

该表将使用 Web 应用程序进行修改，因此我可以使用 Javascript 预先验证对表的更改，因此即使是防止重复的算法也可能就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:54:41.133

也许我在这里遗漏了明显的东西，但我认为这在 Oracle 中并不容易。

我见过使用物化视图的解决方案

*   包含类别表中的重叠
*   提交时刷新
*   有一个检查约束，它不包含任何行。这可以通过在物化视图中具有“rownum”列和该“rownum”列的值始终为 0 的检查约束来实现。

如果用户输入任何重叠数据，则*在提交*时将违反对物化的检查约束。

您需要编写前端以允许 Oracle 在提交时引发异常并向用户显示适当的消息。

例如，现在在最新版本的 Postgresql 中，使用排除约束非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:01:03.780

我不认为你可以通过约束来做到这一点，但你应该能够创建一个`before insert/update`触发器并`raise_application_error`在它违反条件时使用它来中止插入。

就像是...

```
if exists (select * from yourtable where :new.minvalue<maxvalue and :new.maxvalue>minvalue)
begin
   raise_application_error(...)
end 
```

# .net - .NET 使用长日期格式

> ID：12951688
> 
> 赞同：0
> 
> 时间：2012-10-18T09:43:11.663
> 
> 标签：.net, date, formatting, cultureinfo

在我的应用程序中，我有一个绑定到对象的网格。此对象具有 DateTime 类型的属性，它以在 中指定的短日期格式显示我的日期`Control Panel`。如何强制它使用长日期格式？

我想应该创建新的 CultureInfo，但我不想更改格式，我仍然想使用 中指定的格式`Control Panel`，但不是默认情况下的短格式。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:21:30.070

好的。

我找到了 DevExpress.Utils.FormatInfo 并将其应用于所有日期/时间字段。我真的不喜欢这个解决方案，但是我现在没有看到更好的东西:(

# sql - 使用参数创建 INSERT 语句

> ID：12951690
> 
> 赞同：1
> 
> 时间：2012-10-18T09:43:27.937
> 
> 标签：sql, sql-server, stored-procedures

我需要使用参数创建一个 INSERT 语句。假设我有两个变量名`@DestinationFields`, `@InsertValues`。

这里`@DestinationFields`包含列名，例如：`product,price`并`@InsertValues`包含这两个列的值，例如：`Book,100`。

现在，我如何创建一个插入命令来插入那些每个值都需要添加引号的值。我已经尝试过

我已经试过了

```
EXEC('INSERT into tbl_test('+@DestinationFields+')values('+@InsertValues+')') 
```

但它返回一个错误。

> *在这种情况下，不允许使用名称“书”。有效表达式是常量、常量表达式和（在某些情况下）变量。不允许使用列名。*

我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:47:00.070

这里假装没有SQL注入的问题^*，你可以通过在周围加引号来快速修复你的代码`Book`。的值`@ InsertValues`应该是

```
'Book', 100 
```

而不是简单地

```
Book, 100 
```

您需要在每个字符串值周围添加引号；否则，字符串将被解释为无效的名称。

**编辑：（**作为对评论的回应）如果所有列都是`varchar`类型，您可以在整个字符串周围加上引号，并将所有逗号替换为 quote-comma-quote 模式，如下所示：

```
values('''+REPLACE(@InsertValues,',',''',''')+''')' 
```

* * *

^*你不应该把这样的代码投入生产，因为它可以被操纵来相当严重地损害你的系统。这是问题的一个很好的说明（[链接](http://xkcd.com/327/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:46:14.007

尝试：

```
DECLARE @DestinationFields VARCHAR(200);
SET @DestinationFields = 'Col1, Col2, Col3'

DECLARE @InsertValues VARCHAR(200);
SET @InsertValues = '1, 2, 3'

DECLARE @SQLString VARCHAR(1000);

SET @SQLString = 'INSERT INTO tbl_test (' + @DestinationFields + ') VALUES (' + @InsertValues + ')';

EXEC (@SQLString) 
```

但是，这很容易受到 SQL 注入攻击。但是，它会做你需要的。

[动态 SQL 的祸与福](http://www.sommarskog.se/dynamic_sql.html)

# magento - Magento 1.4 - nginx 服务器 | 302 到永久 301？

> ID：12951693
> 
> 赞同：1
> 
> 时间：2012-10-18T09:43:41.320
> 
> 标签：magento, url-rewriting, nginx, rewrite

我们有一个旧版本的 Magento (1.4) 在 nginx 服务器上运行。我们在网站上有一些临时重定向（302）需要转换为永久 301 重定向。在 1.4 中无法通过管理面板执行此操作 :(

任何人都可以向我提供 nginx 配置指令来执行此操作吗？

这是我的域配置文件：

```
 rewrite ^/minify/([0-9]+)(/.*.(js|css))$ /lib/minify/m.php?f=$2&d=$1 last;
    rewrite ^/skin/m/([0-9]+)(/.*.(js|css))$ /lib/minify/m.php?f=$2&d=$1 last;

    location / {
       # First attempt to serve request as file, then
       # as directory, then fall back to index.html

       try_files $uri $uri/ @handler; ## If missing pass the URI to Magento's front handler
       expires 30d; ## Assume all files are cachable
    }

    location /app/                { deny all; }
    location /includes/           { deny all; }
    location /lib/                { deny all; }
    location /media/downloadable/ { deny all; }
    location /pkginfo/            { deny all; }
    location /report/config.xml   { deny all; }
    location /var/                { deny all; }

    location /lib/minify/ {
        allow all;
    }

    location /var/export/ { ## Allow admins only to view export folder
        auth_basic           "Restricted"; ## Message shown in login window
        auth_basic_user_file htpasswd; ## See /etc/nginx/htpassword
        autoindex            on;
    }

    location  /. { ## Disable .htaccess and other hidden files
        return 404;
    }

    location @handler { ## Magento uses a common front handler
        rewrite / /index.php;
    }

    location ~ .php/ { ## Forward paths like /js/index.php/x.js to relevant handler
        rewrite ^(.*.php)/ $1 last;
    }

    location ~* ^(.+\.php)(.*) {

        if (!-e $request_filename) { rewrite ^(.*)$ /index.php break;  } 
        ## Catch 404s that try_files miss

            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_param  HTTPS $fastcgi_https;
            #fastcgi_param  MAGE_RUN_CODE default; ## Store code is defined in administration > Configuration > Manage Stores
            #fastcgi_param  MAGE_RUN_TYPE store;                                                                            
            fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/luxuryleathergoods.com/public_html$fastcgi_script_name;
            fastcgi_split_path_info      ^(.+\.php)(.*)$;
            include        fastcgi_params;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:34:07.000

对于每个重定向，您可以将以下行添加到您的 nginx 配置中，在`location /`块内（第一个）：

```
rewrite /old/url.html /new/url.html 
```

# java - Android模拟器没有启动应用程序

> ID：12951695
> 
> 赞同：1
> 
> 时间：2012-10-18T09:43:45.657
> 
> 标签：java, android, windows, eclipse, android-emulator

> **可能重复：**
> [Android Emulator 不会运行从 Eclipse 启动的应用程序](https://stackoverflow.com/questions/2793956/android-emulator-wont-run-application-started-from-eclipse)

我有 Eclipse 和 Android 的问题。当我在 Eclipse 中单击运行按钮时，它会启动模拟器，但不会启动应用程序。如果我在模拟器仍在运行时再次点击运行按钮，它只会启动模拟器的新实例，并且再次不会启动应用程序。

这是我得到的所有控制台输出：

```
[2012-10-18 11:36:55 - FTS Live] Android Launch!
[2012-10-18 11:36:55 - FTS Live] adb is running normally.
[2012-10-18 11:36:55 - FTS Live] Performing com.robinj.fts.stream.MainActivity activity launch
[2012-10-18 11:36:55 - FTS Live] Automatic Target Mode: Preferred AVD 'Froyo' is not available. Launching new emulator.
[2012-10-18 11:36:55 - FTS Live] Launching a new emulator with Virtual Device 'Froyo' 
```

我试过设置它，让它总是尝试使用正在运行的 AVD/设备，但它只是说没有运行，而有。

--

Windows XP、Eclipse Juno、Android SDK、x86（并不是说它在带有 Eclipse Indigo 的 Lubuntu 12.04 上更好；我什至无法启动 AVD）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:28:48.867

1> 从任务管理器中删除所有 adb.exe 实例。

2>运行 kill-server 然后运行 ​​start-server 命令。

3>重启eclipse。

# java - 如何在 jpa 监听器中获取实体管理器或事务

> ID：12951701
> 
> 赞同：9
> 
> 时间：2012-10-18T09:44:10.760
> 
> 标签：java, hibernate, jpa, jpa-2.0, jboss7.x

我正在使用 Hibernate 事件侦听器，喜欢`PostDeleteEventListener, PostInsertEventListener, PostUpdateEventListener`在插入、删除和更新期间执行一些操作。现在我想使用 JPA 侦听器来执行此操作，因为如果我想从 Hibernate 移动到任何其他 JPA 提供程序，我的侦听器应该可以工作。Hibernate 监听器给了我`event`，我可以从中获取事务并检查它是提交还是回滚。JPA 侦听器只为我提供实体对象。现在如何在 JPA 侦听器中获取事务或会话或实体管理器？提前致谢！！我使用 Jboss 作为我的 CMT。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T23:26:40.613

从 JPA 2.0 开始不支持此功能。

在 JPA 2.1（计划在 Java EE 7 中）中，持久性提供程序将在托管环境（例如 JBoss 应用程序服务器）中将实体侦听器视为 CDI bean。来自[JPA 2.1 规范的提议最终草案](http://java.net/downloads/jpa-spec/JavaPersistencePFD.pdf)，第 96 页：

> 当包含档案是 bean 档案时，Java EE 环境中的实体侦听器类支持通过上下文和依赖注入 API (CDI) [10] 进行依赖注入。使用 CDI 注入的实体侦听器类还可以定义使用 PostConstruct 和 PreDestroy 注释注释的生命周期回调方法。这些方法将分别在注入发生后和实体侦听器实例被销毁之前调用

因此，在 JPA 2.1 中，如果您创建一个提供 EntityManager 的 CDI 生产者（只需使用 @Produces 注释 @PersistenceContext 字段），您只需将 EntityManager @Inject 注入侦听器即可。

同时，我不知道有任何干净或令人愉快的解决方法。我能想到的“最糟糕”的事情是将 EntityManager 配置为绑定在 JNDI 中，然后通过从侦听器中的 JNDI 查找来获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T05:24:57.317

就我而言，我正在使用以下代码：

```
ApplicationContext ctx = ContextLoader.getCurrentWebApplicationContext();
auditLogService = (AuditLogService) ctx.getBean("auditLogService"); 
```

这对我很有效。

此应用程序的代码可在[https://bitbucket.org/macielbombonato/apolo下载](https://bitbucket.org/macielbombonato/apolo)

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-06T12:57:38.947

您可以通过两种方式在 JPA 中使用所有预/后加载、插入、更新或删除侦听器：

1.  通过使用注释。使用侦听器的一个简单示例可能是实体有一个瞬态变量，该变量需要在实体被持久化、更新或加载后填充，例如：

    ```
    public class AvailableCreditListener {
        @PostLoad
        @PostPersist
        @PostUpdate
        public void calculateAvailableCredit(Account account) {
            account.setAvailableCredit(
                account.getBalance().add(
                account.getOverdraftLimit()));
        }
    } 
    ```

    实体类将使用@EntityListeners 进行注释：

    ```
    @EntityListeners({AvailableCreditListener.class})
    public class Account extends BaseEntity {
        private BigDecimal balance;
        private BigDecimal overdraftLimit;
        @Transient
        private BigDecimal availableCredit;
        // getters and setters
    } 
    ```

2.  通过使用 persistence.xml 配置文件。

最后，可以使用 XMl 映射文件代替注释，并将其与应用程序一起部署以指定默认侦听器。（此映射文件由 persistence.xml 文件引用。）但是，如果实体不想使用默认侦听器，则可以使用 @ExcludeDefaultListeners 注释。

```
@ExcludeDefaultListeners
@Entity
public class Account extends BaseEntity {
    ....
} 
```

在您的 persistence.xml 中：

```
<persistence-unit-metadata>
    <persistence-unit-defaults>
      <entity-listeners>
        <entity-listener class="samples.AvailableCreditListener"/>      
      </entity-listeners>
    </persistence-unit-defaults>
  </persistence-unit-metadata> 
```

# mysql - MySQL 的 EntityFunctions.AddSeconds 的替代方案

> ID：12951714
> 
> 赞同：1
> 
> 时间：2012-10-18T09:44:59.077
> 
> 标签：mysql, entity-framework-4

我需要执行一个 EF LINQ 查询，使用 Oracle 提供的标准 dot net 连接器对 MySQL 的日期时间增加几秒钟。不幸的是，它不支持 EntityFunctions.AddSeconds 方法。有替代方法吗？

```
var result = (from rec in db.Records where EntityFunctions.AddSeconds(rec.SomeDate, rec.SomeSeconds) select rec).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:16:46.613

```
DELIMITER $$
drop function IF EXISTS AddSeconds$$
create function AddSeconds(theDate datetime, seconds int)
RETURNS datetime
DETERMINISTIC
begin
 return DATE_ADD(theDate, INTERVAL seconds SECOND);
end$$ 
```

# c# - 如何在c#中触发自动隐藏图标？

> ID：12951717
> 
> 赞同：1
> 
> 时间：2012-10-18T09:45:07.920
> 
> 标签：c#, show-hide, notifyicon

我有一个应用程序。如果应用程序在一定时间内没有被使用，它应该隐藏。当应用程序被隐藏并且我们将鼠标悬停在图标上时，它应该被恢复。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:49:47.747

您必须在应用程序中定义一个计时器，该计时器将计算鼠标不在窗体/窗口上的时间。然后只需隐藏您的应用程序。

下载[WPF NotifyIcon](http://www.hardcodet.net/projects/wpf-notifyicon) 并处理 MouseOver 事件，这将显示 Form/Window

**编辑：**

如果您不需要将应用程序最小化到托盘并隐藏窗口以将其保留在桌面上 -> 使用相同的算法，但不隐藏窗口，只需将透明度设置为 0% 或 10%。当鼠标悬停时 - 将透明度设置为 100%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:25:41.643

就像 JesseJames 说的，使用计时器来测量应用程序的非活动时间，并在一段时间后将其隐藏。当鼠标悬停在 NotifyIcon 上时重新激活它。这是一个完成这项工作的示例***WindowsForms解决方案：***

```
private Timer _timer;
private int _ticks;

public Form1()
{
    _timer = new Timer { Interval = 1000, Enabled = true };
    _timer.Tick += TimerTick;

    Activated += Form1_Activated;
    MouseMove += Form1_MouseMove;
    //notifyIcon1 is an icon set through the designer
    notifyIcon1.MouseMove += NotifyIcon1MouseMove;
}

protected void TimerTick(object sender, EventArgs e)
{
    //After 5 seconds the app will be hidden
    if (_ticks++ == 5)
    {
        WindowState = FormWindowState.Minimized;
        Hide();
        _timer.Stop();
        _ticks = 0;
    }
}

protected void NotifyIcon1MouseMove(object sender, MouseEventArgs e)
{
    WindowState = FormWindowState.Normal;
    Show();
    _ticks = 0;
    _timer.Start();
}

protected void Form1_MouseMove(object sender, MouseEventArgs e)
{
    _ticks = 0;
} 
```

也许可能存在一个更清洁的解决方案，我不知道，但它会让你上路。WPF 的原理相同，只是代码略有不同。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:50:36.023

要查看用户是否进行了任何输入，您可以使用类似的[方法](http://www.codeproject.com/Articles/13384/Getting-the-user-idle-time-with-C)。要让您的应用程序再次可见，您需要一种方法来获取全局鼠标和键盘输入，为此您可以使用挂钩，您可以在[此处](http://support.microsoft.com/default.aspx?scid=kb;en-us;318804)找到一个解决方案。如果钩子被触发，它真的只取决于你使用什么样的 UI，但调用特定的`hide`或`show`方法就足够了。

# selenium - 可以在 Sonar 中分离集成测试和单元测试报告吗？

> ID：12951720
> 
> 赞同：0
> 
> 时间：2012-10-18T09:45:31.047
> 
> 标签：selenium, junit, sonarqube

我知道可以在 Sonar 中分离集成和单元测试代码覆盖率，但是是否可以为集成和单元测试检索单独的通过/失败结果？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:53:22.263

不，很遗憾，目前这是不可能的。

随意在 Sonar 用户邮件列表上开始讨论这个主题。

# asp.net - 如何从 Silverlight 中的 ViewModel 访问 View 中的数据网格？

> ID：12951723
> 
> 赞同：0
> 
> 时间：2012-10-18T09:45:40.230
> 
> 标签：asp.net, silverlight, mvvm

海我正在做一个使用 MVVM 架构的 silverlight 应用程序。情景是这样的。我在同一页面中有一个组合框和数据网格。我已经使用 ObservableCollection 来绑定 Datagrid 中的值，并且在该集合中我有三个字段，即 Fname、Sname 和 Dept。我在 Combobox 中绑定 Dept，但是如果我选择任何一个部门意味着 DataGrid 中的值不会更新。即，我已经在 ViewModel 中创建了代码，并且我使用 LINQ 查询，并且我还在其中获取了值，

var semp = from s in Employees where s.Dept.Equals(Names.Dept) select s;

我需要将此 semp 数据源发送到 View 中的 Datagrid。数据网格语法是：

```
<my:DataGrid x:Name="McDataGrid" ItemsSource="{Binding Employees,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" Margin="130,151,0,0" Height="137" VerticalAlignment="Top" RowBackground="#AA5D9324" AutoGenerateColumns="True" HorizontalAlignment="Left" Width="196">
        </my:DataGrid> 
```

如果你知道，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:16:35.497

这是视图模型代码：

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;
using System.ComponentModel;
using Silverlight_MVVM.Model;
using Silverlight_MVVM.Utils;
using System.Linq;
using System.Collections.Generic;

namespace Silverlight_MVVM.ViewModel
{
    public class EmployeeListViewModel:INotifyPropertyChanged
    {
        public ObservableCollection<Employee> Employees { get; private set; }

        public EmployeeListViewModel()
        {
            Employees = Silverlight_MVVM.DataHelper.EmployeeDataHelper.EmployeeData ();

        }
        private string _fname;
        public string Fname
        {
            get
            {
                return _fname;
            }
            set
            {
                _fname = value;
                RaisePropertyChanged("Fname");
            }
        }
        private string _sname;
        public string Sname
        {
            get
            {
                return _sname;
            }
            set
            {
                _sname = value;
                RaisePropertyChanged("Sname");
            }
        }
        private string _dept;
        public string Dept
        {
            get
            {
                return _dept;
            }
            set
            {
                _dept = value;
                RaisePropertyChanged("Dept");
            }
        } 
        private Employee _SelectedEmployee;
        public Employee  SelectedEmployee
        {
            get
            {
                return _SelectedEmployee;
            }
            set
            {
                _SelectedEmployee = value;
                RaisePropertyChanged("SelectedEmployee");
            }
        }
        private string _demp;
        public string demp
        {
            get
            {
                return _demp;
            }
            set
            {
                _demp = value;
                RaisePropertyChanged("demp");
            }
        }

        private Employee _Names;
        public Employee Names
        {
            get
            {
                return _Names;
            }
            set
            {
                _Names = value;

                List<Employee> myList = new List<Employee>();
                IEnumerable<Employee> myEnumerable = myList;
              //  List<Employee> listAgain = myEnumerable.ToList();
               // Employees = (ObservableCollection<Employee>)Employees.Where(_ => _.Dept.Equals(Names.Dept));
                RaisePropertyChanged("Names");
            }
        }

        public void HandleShowMessage()
        {
           // MessageBox.Show("Hello " + Names + ",Welcome to EventTrigger for MVVM.");

        }
        public RelayCommand _AddEmployeeCommand;
        /// <summary>
        /// Returns a command that show the customer.
        /// </summary>
        public ICommand AddEmployeeCommand
        {
            get
            {
                if (_AddEmployeeCommand == null)
                {
                    _AddEmployeeCommand = new RelayCommand(
                        param => this.AddEmployee(),
                        param => this.CanAddEmployee
                        );
                }
                return _AddEmployeeCommand;
            }
        }

        public bool CanAddEmployee
        {
            get
            {
                 return true;
            }
        }

        public void AddEmployee()
        {
            Employee newEmployee = new Employee();
            if (Names == null)
            {
                newEmployee.Fname = this.Fname;
                newEmployee.Sname = this.Sname;
                newEmployee.Dept = this.Dept;
                Employees.Add(newEmployee);
                //SelectedEmployee = newEmployee.ToString();
            }
            else //This is the event for getting selected item through combobox and the linq query fetching
            {
             Employees = Silverlight_MVVM.DataHelper.EmployeeDataHelper.EmployeeData();

             var semp = from emp in Employees where emp.Dept.Equals(Names.Dept) select emp;

            }
        }

        #region INotifyPropertyChanged
        // [field: NonSerialized]
        public event PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        #endregion

    }
} 
```

# sql - 按 has_many 关联的计数排序

> ID：12951724
> 
> 赞同：0
> 
> 时间：2012-10-18T09:45:44.297
> 
> 标签：sql, ruby-on-rails-3, sql-order-by, activeadmin

我的模型是：

service_provider has_many questions, question belongs_to service_provider

在 Activeadmin 中，我想索引我的 service_providers 并按他们的 questions_count 对它们进行排序。

所以，要获得一个字段，我可以排序，我定义我的 default_scope 如下：

```
scope "all", :default => true do |sp|
  sp.joins("LEFT JOIN questions on questions.service_provider_id = service_providers.id")
    .select("service_providers.*, COUNT(service_provider_id) as questions_count")
    .group("service_providers.id")
end 
```

我的列定义如下所示：

```
column :questions, :sortable => "questions_count" do |sp|
  sp.questions_count
end 
```

索引我的服务提供商时，一切看起来都很好。但是，当我按他们的 questions_count 进行排序时，我收到以下错误：

```
 SQLite3::SQLException: no such column: service_providers.questions_count: SELECT  service_providers.*, COUNT(service_provider_id) as questions_count FROM "service_providers" LEFT JOIN questions on questions.service_provider_id = service_providers.id GROUP BY service_providers.id ORDER BY "service_providers"."questions_count" desc LIMIT 30 OFFSET 0 
```

因此，他尝试 ORDER BY "service_providers"."questions_count" desc。事实上，他应该 ORDER BY "questions_count" desc。

有什么建议，我怎么能告诉他在他的订单声明中使用正确的字段名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-10T04:58:22.787

它应该是

```
ServiceProvider.joins(:questions).group("service_providers.id").order("count(service_providers.id) DESC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:48:14.623

```
.order("COUNT(service_provider_id)") 
```

要不就

```
.order("questions_count") 
```

# android - 如何在不着色 alpha 像素的情况下以编程方式更改 Drawable 的颜色

> ID：12951730
> 
> 赞同：0
> 
> 时间：2012-10-18T09:46:06.347
> 
> 标签：android, colors, drawable, alpha

我的 Drawables 有一个透明背景，中间有一个白色图标。我想要做的是仅以编程方式为白色部分着色，而透明像素保持不变。

我尝试了很多不同的方法，但我总是得到一个完全彩色的 Drawable。

有谁知道该怎么做？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:58:02.003

我不知道它是否符合您的要求，但请将一张图像分成两张，一张全背景透明图像，另一张是单个白色图像图标，并将其放在布局的中心并仅更改该图像图标的颜色。

# c# - 如何将 CanExecute 与 Mvvmcross 一起使用

> ID：12951733
> 
> 赞同：10
> 
> 时间：2012-10-18T09:46:13.217
> 
> 标签：c#, data-binding, xamarin.android, mvvmcross

我有一个按钮

```
<Button 
      android:id="@+id/ButtonConnect"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:text="Disconnect"
      local:MvxBind="{'Click':{'Path':'DisconnectCommand'}}" /> 
```

我有一个命令

```
public IMvxCommand DisconnectCommand
{
    get
    {
        return new MvxRelayCommand(this.GetService<IConnectionService>().Disconnect);
    }
} 
```

然后我想启用/禁用 DisconnectCommand 使用

```
DisconnectCommand.CanExecute(this.GetService<IConnectionService>().UsbConnected); 
```

但这显然是错误的（它不起作用），我将检查作为 aa 参数放入，但通常我会这样做

```
DisconnectCommand.CanExecute = someBool; 
```

但是没有要设置的属性，那么该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T09:57:49.120

要了解如何使用`CanExecute`，请查看 Silverlight 或 WPF - 有很多博客讨论如何使用`ICommand`- 例如[http://weblogs.asp.net/nmarun/archive/2009/12/02/using -icommand-silverlight-4.aspx](http://weblogs.asp.net/nmarun/archive/2009/12/02/using-icommand-silverlight-4.aspx)或[http://blog.galasoft.ch/archive/2009/09/26/using-relaycommands-in-silverlight-and-wpf.aspx](http://blog.galasoft.ch/archive/2009/09/26/using-relaycommands-in-silverlight-and-wpf.aspx)

一个例子是这样的：

```
private MvxRelayCommand _disconnectCommand;
public IMvxCommand DisconnectCommand
{
    get
    {
        if (_disconnectCommand == null)
            _disconnectCommand = new MvxRelayCommand(this.GetService<IConnectionService>().Disconnect, item => this.IsItemConnected(item));
        return _disconnectCommand;
    }
}

private void SomeServiceNotificationHandler()
{
    _disconnectCommand.RaisePropertyChanged();
}

private bool IsItemConnected(object thing)
{
    return /* your code */;
} 
```

* * *

不过有一个小问题......

`CanExecute`并没有真正在所有平台上的所有 MvxBindings 上完全实现......它适用于其中一些，但对于其中一些它不会 - 我真的不知道目前哪些！如果您遇到问题，请让我知道（通过 GitHub 问题），他们会得到解决...

* * *

就个人而言......我不倾向于使用`CanExecute`- 我倾向于使用单独的布尔属性，然后我将其绑定到控件上可用的任何属性 - 例如，大多数控件都有类似`Enabled`, `IsEnabled`, `Disabled`,`IsDisabled`等的东西。

我通常发现设置布尔属性而不是调用更容易（并且更具可读性）`RaiseCanExecuteChanged`

例如我会使用类似的东西：

```
<Button 
  android:id="@+id/ButtonConnect"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:text="Disconnect"
  local:MvxBind="{'Click':{'Path':'DisconnectCommand'},'Enabled':{'Path':'UsbConnected'}}" /> 
```

您可以肯定地说该`CanExecute`方法具有优势 - 因为它将 Command 逻辑全部保存在一个对象中，并且因为它可用于防止`Execute`在`RelayCommand`. `CanExecute`这就是为什么我很高兴在我们发现 mvvmcross 绑定时尝试修复它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-23T17:45:00.153

为了跟进 Stuart 的回答，很容易同时支持同时`ICommand.CanExecute`公开属性以支持 Android 和 iOS Mvx 绑定。

为此，请将您的典型`CanExecute(`) 方法转换为属性，然后将处理程序添加到对关联属性的`CanExecuteChanged`调用中。`RaisePropertyChanged`然后`RaiseCanExecuteChanged`正常使用，`PropertyChanged`事件也会被触发。

```
 ...

    // constructor
    public SomeClass()
    {

        DoSomethingCommand = new MvxCommand(OnDoSomething, () => CanDoSomething);
        DoSomethingCommand .CanExecuteChanged += (sender, args) => RaisePropertyChanged(() => CanDoSomething);
    }

    public bool CanDoSomething
    {
        get { ... }
    }

    ... 
```

# android - android相机闪光灯在改变方向时关闭

> ID：12951738
> 
> 赞同：2
> 
> 时间：2012-10-18T09:46:28.127
> 
> 标签：android, flash, camera, onconfigurationchanged

> **可能重复：**
> [闪光灯在改变方向时关闭](https://stackoverflow.com/questions/12637377/flash-light-is-getting-switch-off-while-changing-the-orientation)

我正在构建一个安卓应用程序。在配置更改时，闪光灯会熄灭。然后我需要再次单击 ON 按钮以使其打开。如何在我的应用程序中保持开启状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:57:03.173

当你改变方向时，整个活动被破坏并创建一个新活动。所以发生的事情是活动正在失去闪存的当前状态并关闭。

尝试禁用清单中的方向更改。并在 Onstop 中保存 flsh 的当前状态并在 OnStart 中重置状态。

我相信这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:49:01.833

`android:configChanges="keyboardHidden|orientation"`在 android 清单文件中添加到您的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:03:03.617

基本问题是默认情况下配置更改会重新创建 Activity，因此如果您在 Activity 中进行一些递归管理，则必须记住这一点。

有两种相反的解决方案：

1.  通过添加您将手动处理的配置更改的 Activity 列表的清单属性来禁用配置更改时的 Activity 重新创建[`android:configChanges`](http://developer.android.com/guide/topics/manifest/activity-element.html#config)，例如`"keyboardHidden|orientation|screenSize"`（`screenSize`从 Adnroid 3.1 开始需要）。在这种情况下，您可以通过覆盖方法[onConfigurationChanged](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)来处理配置更改。

2.  通过覆盖方法[onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)并在 bundle 内保存活动状态来处理活动的重新创建。然后在设置`onCreate`参数时`savedInstanceState`（不为空），您应该从该捆绑包中恢复状态（恢复闪光灯状态）。

方法的选择取决于您的活动设计。

# html - 如何将文本拖放到html5中的圆角矩形中

> ID：12951740
> 
> 赞同：1
> 
> 时间：2012-10-18T09:46:31.927
> 
> 标签：html, css, rounded-corners

我是 HTML5 的新手。我在 HTML5 中创建了一个圆角矩形。这是矩形的代码。

```
<div style="position:absolute; width:148px; height:44px; left:255px; -webkit-border-radius: 22px;-moz-border-radius: 22px;border-radius: 22px; border:2px solid #FFFFFF; background-color:#4D0C00;  top: 98px;"> </div> 
```

我需要做的是我必须在该矩形上方显示一系列单词。在这些单词中，我必须将一个单词拖放到圆角矩形中。如果我选择其他单词并删除，那么旧单词必须回到它原来的位置。任何人都可以在这方面帮助我。

# maven - 如何在 Maven 中解决这种奇怪的依赖关系？

> ID：12951741
> 
> 赞同：0
> 
> 时间：2012-10-18T09:46:33.863
> 
> 标签：maven

有3个项目。B依赖于A，C依赖于A和B。A和B都依赖于版本1的包P，即P1。现在C引入P的另一个版本，命名为P2。

依赖树可能看起来像

```
 P1   P1
  ^     ^
  |     |
  A  <- B
  ^     ^
   \   /
    \ /
     C -> P2 
```

为了避免 P 冲突，我决定通过修改`pom.xml`A 和 B 来修剪 P1。但是奇怪
的事情发生了：当我`mvn eclipse:eclipse`在 C 中运行时，我发现它仍然试图解决 P1 的依赖关系！

然后我仔细检查了每个项目。

```
In A:  Re-check the pom.xml -> NO dependency of P1 , it won't resolve P1 !

In B:  Re-check the pom.xml -> NO dependency of P1 , it won't resolve P1 !

In C:  Re-check the pom.xml -> NO dependency of P1 itself , but it DOES resolve P1!
  |
  | -  Comment out dependency of A:  Resolve P1 !
  |
  | -  Comment out dependency of B:  Resolve P1 !
  |  
  | -  Comment out dependency of both A & B: Won't resolve P1 !

Finally, I make sure that other packages of A , B and C that depend on do not
 depend on  P1(Actually, P1 is a small SDK with limited usage, I'm sure other
 packages won't denpend on it) 
```

所以这是奇怪的事情：从检查来看，似乎 A 或 B 都引入了 P1，但分别在 A 和 B 中，我检查并得出结论，两者都不会引入 P1。

哪里不对了？

**更新**

我终于弄清楚出了什么问题：请参阅答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:58:26.300

我终于弄清楚出了什么问题：

在`mvn dependency:tree`C 中，我发现 P1 存在于 B.jar 的子级别中。于是我跑到 B 跑到`mvn clean install`update `B.jar`，然后又回到 C ，现在一切正常。

我认为这可能会发生：

由于 B 是依赖于 P1 的项目，因此`B.jar`其中记录了 B 的依赖关系的旧文件（实际上我提取**了 B.jar**并发现它被称为`META-INF/maven/path/to/B/pom.xml`）**不会**像`pom.xml`in`B`那样更新。因此，当我`mvn eclipse: eclipse`在 C 中运行时，它解析 B（C 也是依赖于 B 的项目，因此它解析 B.jar），然后它通过**脏 pom.xml**`B.jar`解析 P1 ，而不是新的pom.xml **in**）`B`。我认为这是一个糟糕的设计并且容易出现模棱两可的错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:58:35.597

尝试在项目 C 上运行 mvn dependency:tree，您应该会看到 P1 的来源。

# overlay - 带有前置链接的 jquery 工具覆盖

> ID：12951744
> 
> 赞同：1
> 
> 时间：2012-10-18T09:46:38.920
> 
> 标签：overlay, jquery-tools, prepend

我想在 prepend 之后运行这个覆盖函数。

```
$(".modal-link a[rel]").overlay({mask: '#000', effect: 'apple'}); 
```

通过这样做，我能够让它工作：

```
$(function() {
    $("body").on("click", ".modal-link a", function() {
        $(this).overlay({ mask: '#000', effect: 'apple', load: true });
        return false;
    });
}); 
```

对我来说，这似乎不是将覆盖功能分配给前置链接的正确方法。

有没有更好的方法来解决这个问题？

这是我的完整来源[http://jsfiddle.net/gv93L/](http://jsfiddle.net/gv93L/)

# xcode - Xcode：在项目中找到的不仅仅是整个单词？

> ID：12951745
> 
> 赞同：2
> 
> 时间：2012-10-18T09:46:38.933
> 
> 标签：xcode, full-text-search

当我尝试`⇧</kbd>`⌘</kbd>`F` for `convertPoint` in my project, it does not find existing `convertPointFromBase:`, but shows only `convertPoint:toView:` etc.``

如何让它不仅搜索整个单词？我找不到任何有关搜索的设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:52:06.973

在查找栏中单击放大镜旁边的小三角形。在弹出窗口中选择“显示查找选项”。在显示的选项中选择“命中必须包含搜索词”。

# javascript - Greasemonkey 脚本自动选择并单击值/选择器中带有非英文字符的特定按钮？

> ID：12951746
> 
> 赞同：3
> 
> 时间：2012-10-18T09:46:43.180
> 
> 标签：javascript, firefox, character-encoding, greasemonkey

我正在尝试让 Greasemonkey 脚本每隔 XY 秒单击一次特定按钮。我想点击的按钮有这个 HTML：

```
<input value="CSV保存" onclick="getCSVData()" type="submit"> 
```

我搜索了一个解决方案，发现：

```
setInterval(click, 5000);

function click()
{
 $("#button id").click();
} 
```

但是我的“按钮ID”是什么？

**该脚本基本上应该每 5 分钟**下载一个 CSV 文件。

**编辑：**我尝试的最新代码：

```
// ==UserScript==
// @name        autoclick
// @namespace   yy
// @description yy
// @include     http://...
// @version     1
// ==/UserScript==

setInterval(click, 1000);

function click()
{
 $("[value = 'CSV保存']").click();
} 
```

由于中文表意文字，我还使用带有“Big5（繁体）”编码的notepad ++。（也许是一个错误？）

再次感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:23:59.017

几件事：

1.  语言编码可能是一个因素，下面会详细介绍。

2.  jQuery`.click()`无法在各种 Greasemonkey 脚本场景中工作。`MouseEvents`在[这个答案](https://stackoverflow.com/a/12256847/331508)中使用。

3.  警惕 AJAX。这是`<input>`动态添加或修改的吗？如果是这样，请使用`waitForKeyElements`之前[链接的答案](https://stackoverflow.com/a/12256847/331508)。

4.  由于输入实际上触发了一个javascript函数，而不是试图点击，通常直接调用该函数就足够了。像这样：

    ```
    unsafeWindow.getCSVData(); 
    ```

    另请参阅[GM 文档中的“生成点击事件”](http://wiki.greasespot.net/Generate_Click_Events)。

5.  而不是依赖像`CSV保存`您的 jQuery 选择器这样的有问题的字符，而是使用更多页面的周围结构（您的问题应该显示）。例如，也许：

    ```
    var targSubmit  = $("form.foo div.bar input[type=submit]:eq(2)"); 
    ```

    链接到目标页面和/或提供实际的 HTML 以帮助选择选择器。

6.  正如其他答案中提到的，这是 5 分钟的错误间隔。使用 5 x 60 x 1000，或`300000`.

7.  不要使用通用或关键字作为函数或全局变量名。`click`太通用了，`function click(){...`可能会`window.click`根据您的脚本注入而覆盖。

8.  不要忘记[指令](http://wiki.greasespot.net/@grant)[。`@grant`](http://wiki.greasespot.net/@grant)

把它们放在一起，这应该可以工作：

```
// ==UserScript==
// @name        autoclick
// @namespace   yy
// @description yy
// @include     http://...
// @version     1
// @grant       none
// ==/UserScript==

setInterval (clickSpecialSubmit, 5 * 60 * 1000); // 5 minutes

function clickSpecialSubmit () {
    unsafeWindow.getCSVData ();
} 
```

或者可能替换`clickSpecialSubmit`为：

```
function clickSpecialSubmit () {
    // THIS NEXT LINE MUST BE TUNED TO MATCH YOUR ACTUAL PAGE!
    var targSubmit  = $("form.foo div.bar input[type=submit]:eq(2)");

    var clickEvent  = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    targSubmit[0].dispatchEvent (clickEvent);
} 
```

* * *

* * *

* * *

* * *

我无法让 Greasemonkey 脚本使用`Big5(traditonal)`和包含这些字符。Firefox 在错误控制台中报告“非法字符”。

它可能只是我的测试系统，但请注意 Greasemonkey 脚本必须是有效的 UTF-8。从[源代码](https://github.com/greasemonkey/greasemonkey/blob/master/locale/es-ES/greasemonkey.properties)：

```
error.scriptCharset=Error reading script: All Greasemonkey scripts MUST be encoded with UTF-8. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:51:18.510

`setInterval`电话绝对是您的基础设施的基础。它设置了一个函数，每*n*毫秒重复调用一次，所以这正是您想要做的（尽管您想在持续时间内传递 300000 - 5000 是每*五秒*一次）。

您给出的示例使用 jQuery，并假设所讨论的 HTML 元素将有一个方便的`id`属性来标识它，而您的标签没有。因此，根据页面的布局以及识别您感兴趣的元素的独特而稳定的方式，您需要使用[适当的选择器](http://api.jquery.com/category/selectors/)来指向它。

也许`$("[value = 'CSV保存']")`取决于这是否足够独特，并且不会随着时间而改变。

选择它后，`.click()`呼叫将按预期单击它。并且以间隔运行，这将每 5 分钟发生一次（或您指定的任何超时）

# linux - 使用命令 find，查找不包括某些元素的目录

> ID：12951749
> 
> 赞同：1
> 
> 时间：2012-10-18T09:46:50.383
> 
> 标签：linux, shell

我必须找到一个目录“ **Dir1** ”，不包括“ **Dir2** ”和“ **Dir3** ”，使用命令 find

```
$ find . -name Dir1 -type d \( -name Dir2 -o -name Dir3 \) \
         -prune -o -print 
```

不工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T09:51:48.590

移到`-prune`开头：

```
find . \( -name Dir2 -o -name Dir3 \) -prune -o -name Dir1 -type d 
```

# html - 托管应用程序图像不显示后，不应用css

> ID：12951753
> 
> 赞同：0
> 
> 时间：2012-10-18T09:46:59.347
> 
> 标签：html, css, image, deployment

在我在 Apache tomcat 上托管我的 HTML5 应用程序之后。我的页面没有显示任何背景图像。我已将我的项目文件夹（MyExpert）放在根文件夹中，并且在 MyExpert 文件夹中有一个图像文件夹和一个 css 文件夹。我将背景图像作为

> 背景图像：url（../images/myprofile_on.png）

在我的 css 文件中，但图像没有出现在我的页面上，除了主页。虽然应用程序在 localhost 上运行良好。我尝试了各种方法，但没有取得丰硕的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:57:06.237

看起来这将是一个简单的引用或权限问题，请尝试直接导航到浏览器中的图像，看看您是否可以手动导航到它，所以根据您的描述，这种情况是：

[http://www.yourdomain.com/MyExpert/images/myprofile_on.png](http://www.yourdomain.com/MyExpert/images/myprofile_on.png)

如果可行，那么它是来自您的 css 文件的简单引用问题，如果它返回一个禁止访问页面，您知道它的权限，如果它返回一个未找到的文件，我建议检查您的 CSS url 上的大小写以确保它与文件路径匹配就好像你的盒子是 linux 那么文件路径很可能区分大小写。

# integer - 如何使用 VHDL 将无符号整数解码为 BCD

> ID：12951759
> 
> 赞同：3
> 
> 时间：2012-10-18T09:47:27.127
> 
> 标签：integer, vhdl, bcd

我们可以看到，在VHDL中，MOD和REM只能模拟，不能合成。那么我们如何从无符号整数中得到BCD呢？比如整数是23，怎么得到BCD:0b0010和0b0011呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:02:27.400

我在下面提供了两个 VHDL 函数。这是从二进制转换为压缩 BCD，反之亦然。我已经在 Xilinx Spartan 3AN 系列上验证了这些，它们可以合成。使用**ieee.numeric_std.all；**和**ieee.std_logic_1164.all；**图书馆

**功能1：二进制转**BCD--来源 ：http: [//vhdlguru.blogspot.com.es/2010/04/8-bit-binary-to-bcd-converter-double.html](http://vhdlguru.blogspot.com.es/2010/04/8-bit-binary-to-bcd-converter-double.html)（所以用户Peque找到了原来的url）

```
 function to_bcd ( bin : unsigned(7 downto 0) ) return unsigned is
        variable i : integer:=0;
        variable bcd : unsigned(11 downto 0) := (others => '0');
        variable bint : unsigned(7 downto 0) := bin;

        begin
        for i in 0 to 7 loop  -- repeating 8 times.
        bcd(11 downto 1) := bcd(10 downto 0);  --shifting the bits.
        bcd(0) := bint(7);
        bint(7 downto 1) := bint(6 downto 0);
        bint(0) :='0';

        if(i < 7 and bcd(3 downto 0) > "0100") then --add 3 if BCD digit is greater than 4.
        bcd(3 downto 0) := bcd(3 downto 0) + "0011";
        end if;

        if(i < 7 and bcd(7 downto 4) > "0100") then --add 3 if BCD digit is greater than 4.
        bcd(7 downto 4) := bcd(7 downto 4) + "0011";
        end if;

        if(i < 7 and bcd(11 downto 8) > "0100") then  --add 3 if BCD digit is greater than 4.
        bcd(11 downto 8) := bcd(11 downto 8) + "0011";
        end if;

    end loop;
    return bcd;
    end to_bcd; 
```

**功能2：BCD转二进制**

```
 --(c)2012 Enthusiasticgeek for Stack Overflow. 
    --Use at your own risk (includes commercial usage). 
    --These functions are released in the public domain and 
    --free to use as long as this copyright notice is retained.

    --multiplication by 10 is achieved using shift operator   X<<3 + X<<1
    --input should be packed BCD.
    function to_binary ( bcd : unsigned(11 downto 0) ) return unsigned is
        variable i : integer:=0;
        variable binary : unsigned(7 downto 0) := (others => '0');  
        variable temp : unsigned(6 downto 0) := (others => '0');
        variable bcdt : unsigned(11 downto 0) := bcd;   
        variable tens : unsigned(7 downto 0) := (others => '0');
        variable hundreds_stepI : unsigned(7 downto 0) := (others => '0');
        variable hundreds_stepII : unsigned(7 downto 0) := (others => '0');

       begin

         for i in 0 to 11 loop  -- repeating 12 times.

         if(i >=0 and i<4) then
            binary := ((temp&bcdt(i) ) sll i ) + binary;
         end if;         

         if(i >=4 and i<8) then         
            tens := (((temp&bcdt(i) ) sll (i-4) ) sll 3) + (((temp&bcdt(i) ) sll (i-4) ) sll 1); --multiply by 10           
            binary := tens + binary;
         end if;         

         if(i >=8 and i<12) then         
            hundreds_stepI := (((temp&bcdt(i) ) sll (i-8) ) sll 3) + (((temp&bcdt(i) ) sll (i-8) ) sll 1); --multiply by 10
            hundreds_stepII := (hundreds_stepI sll 3) + (hundreds_StepI sll 1); -- multiply by 10 again so the effect is now multiply by 100                
            binary := hundreds_stepII + binary;
         end if;

         end loop;     

       return binary;
    end to_binary; 
```

注意：您可以使用以下链接中的信息将整数转换为无符号数，[将整数转换为 std_logic](https://stackoverflow.com/questions/7290298/convert-integer-to-std-logic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:15:40.857

这已在其他地方介绍过：

[https://electronics.stackexchange.com/questions/22611/binary-to-bcd-converison](https://electronics.stackexchange.com/questions/22611/binary-to-bcd-converison)

*   查找表是一种选择
*   一个大的 case 语句是另一个（它将变成一个查找表）
*   或者一种迭代方法，您不断减去 10 直到余数 < 10 - 减法计数是您的十位数，余数是您的个位数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-10T20:19:30.983

您可能有兴趣查看“双重涉猎”算法：

[http://en.wikipedia.org/wiki/Double_dabble](http://en.wikipedia.org/wiki/Double_dabble)

基本上，您所做的是为 BCD 表示创建一个寄存器，将其放在整数表示的“左侧”。这是一个示例，我们希望将数字转换`23`为其 BCD 表示形式：

```
BCD_1  BCD_0      Original
0000   0000       10111 
```

现在创建一个 for 循环，在其中将原始位向左移动（将这些位推入 BCD 寄存器）。在这个循环中，您必须检查每个`BCD_X`数字是否大于 4；在这种情况下，您将 3 添加到该数字：

```
shift_iteration   BCD_1  BCD_0      Original
0                 0000   0000       10111
1                 0000   0001       01110       (no digit greater than 4)
2                 0000   0010       11100       (no digit greater than 4)
3                 0000   0101       11000       (5 in BCD_0! we add 3...)
still 3...        0000   1000       11000       (after addition, shift again)
4                 0001   0001       10000       (no digit greater than 4)
5                 0010   0011       00000       (no digit greater than 4) 
```

一旦将所有原始位推入 BCD 寄存器（使用`+3`任何数字大于 4 时的规则），BCD 表示`0010 0011`(23)。

有关更多详细信息，请参阅维基百科文章。您甚至可以找到 VHDL 实现的示例。

# jquery - 在函数之间传递 $(this)

> ID：12951760
> 
> 赞同：1
> 
> 时间：2012-10-18T09:47:27.813
> 
> 标签：jquery, function, this

我希望能够声明一个可以与任何选择器或方法一起使用的函数，因此我认为可以像下面这样完成，但它不起作用！

这是为什么？:)

```
$(document).ready(function() {

    $('img').hover(function(){
        imageClass();
    });

    function imageClass() {
        var thisClass = $(this).attr('class');
        console.log(thisClass)
    }

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T09:48:32.630

您可以将悬停`$(this)`事件作为.`argument``imageClass method to receive a parameter`

```
$(document).ready(function() {

    $('img').hover(function(){
        imageClass($(this));
    });

    function imageClass(obj) {
        var thisClass = obj.attr('class');
        console.log(thisClass)
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:48:17.357

但是，这也将起作用：

```
$('img').hover(imageClass);

function imageClass() {
    var thisClass = $(this).attr('class');
    console.log(thisClass)
} 
```

还有一个选择：

```
$('img').hover(imageClass);

function imageClass(e) {
    var thisClass = $(e.target).attr('class');
    console.log(thisClass)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:51:14.130

你可以试试[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)。它会让你通过`this`

如果您无法弄清楚，请告诉我。

# wcf - WCF 中超出最大请求长度

> ID：12951763
> 
> 赞同：4
> 
> 时间：2012-10-18T09:47:30.480
> 
> 标签：wcf, wcf-binding, wshttpbinding

我目前正在使用 Wcf 应用程序并在跟踪日志中遇到上述错误。

下面是 Wcf 服务的 Web.Config。

```
<bindings>
          <wsHttpBinding>
              <binding name="NewBinding0" closeTimeout="00:50:00" openTimeout="00:50:00" sendTimeout="00:50:00" receiveTimeout="00:50:00" maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647">
                  <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                  <reliableSession enabled="true" />
                  <security mode="None">
                      <transport clientCredentialType="None" />
                      <message clientCredentialType="Windows" negotiateServiceCredential="true" establishSecurityContext="false" />
                  </security>
              </binding>
          </wsHttpBinding>
      </bindings>       

<diagnostics wmiProviderEnabled="true">
  <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" />
</diagnostics>
<services>
  <service behaviorConfiguration="DBSyncWcfService.Service1Behavior" name="DBSyncWcfService.DBSyncService">
    <endpoint binding="wsHttpBinding" bindingConfiguration="NewBinding0" name="ABC" contract="DBSyncWcfService.IDBSyncContract" address="http://192.168.5.170:9999/" />
    <host>
      <baseAddresses> 
```

下面是客户端配置。

```
 WSHttpBinding binding = new WSHttpBinding();
        //binding.ReaderQuotas.MaxArrayLength = 10485760;

        //binding.MaxReceivedMessageSize = 10485760;
        binding.Security.Mode = SecurityMode.None;
        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
        binding.Security.Message.ClientCredentialType = MessageCredentialType.Windows;
        binding.Security.Message.EstablishSecurityContext = false;
        //binding.Security.Message.NegotiateServiceCredential = true;
        binding.ReliableSession.Enabled = true;
        binding.ReaderQuotas.MaxArrayLength = 2147483647;
        binding.ReaderQuotas.MaxDepth = 2147483647;
        binding.ReaderQuotas.MaxNameTableCharCount = 2147483647;
        binding.ReaderQuotas.MaxBytesPerRead = 2147483647;
        //binding.MaxReceivedMessageSize = 20000000;2147483647
        binding.MaxReceivedMessageSize = 2147483647;
        //binding.MaxReceivedMessageSize = Int32.MaxValue;
        binding.ReaderQuotas.MaxStringContentLength = 2147483647; 

        //binding.MaxBufferPoolSize = 20000000;
        binding.MaxBufferPoolSize = 2147483647;

        //binding.MaxBufferPoolSize = Int32.MaxValue;
        binding.ReaderQuotas.MaxArrayLength = 2147483647;
        binding.ReaderQuotas.MaxDepth = 2147483647;
        binding.SendTimeout = TimeSpan.FromMinutes(50);
        binding.CloseTimeout = TimeSpan.FromMinutes(50);
        binding.OpenTimeout = TimeSpan.FromMinutes(50);
        binding.ReceiveTimeout = TimeSpan.FromMinutes(50); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T09:49:55.050

在 web.config 中更改以下设置

```
 <configuration> 
    <system.web> 
        <httpRuntime maxRequestLength="xxxx" /> 
    </system.web> 
</configuration> 
```

xxxx 是您要设置为 KB 的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:19:28.653

您可能必须为绑定设置 readerQuotas，如下所示：

```
 WSHttpBinding binding1 = new WSHttpBinding();
            binding1.MaxBufferPoolSize = 2147483647;
            binding1.MaxReceivedMessageSize = 2147483647;            

            var myReaderQuotas1 = new XmlDictionaryReaderQuotas();
            myReaderQuotas1.MaxStringContentLength = 2147483647;
            myReaderQuotas1.MaxDepth = 2147483647;
            myReaderQuotas1.MaxArrayLength = 2147483647;
            myReaderQuotas1.MaxBytesPerRead = 2147483647;
            myReaderQuotas1.MaxNameTableCharCount = 2147483647;
            binding1.GetType().GetProperty("ReaderQuotas").SetValue(binding1, myReaderQuotas1, null); 
```

原因是对已创建的绑定设置配额无效。

此外，您还需要考虑将客户端和服务器上的 DataContractSerializer 的“MaxItemsInObjectGraph”值增加到一个较大的值。

# objective-c - 是否可以窃取外国应用程序 iCloud 首选项？

> ID：12951764
> 
> 赞同：0
> 
> 时间：2012-10-18T09:47:38.807
> 
> 标签：objective-c, icloud

我借助`[NSUbiquitousKeyValueStore defaultStore]`. 外国应用程序可以使用我的应用程序 cloudURL`[[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil]`或其他方式从我的应用程序云中获取数据吗？如果是，我该如何保护我的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:13:24.077

据我所知，每个应用程序都在自己的沙箱中运行，因此无法从其他（第 3 方）应用程序获取数据——无论它们是将内容存储在 iCloud 中还是设备上都无关紧要。

如果您想从您的某个应用程序中为其他应用程序提供一些数据，那么您需要在您自己的服务器上提供这些数据，以便其他应用程序可以下载他们需要的内容。

当然，拥有实际设备的人如果在他们的计算机上使用允许人们访问 iPhone 文件系统的程序，就可以访问设备上存储的所有信息。

# google-app-engine - 如果来自刚刚加载的列表，则 Ref.get() 不起作用 >

> ID：12951766
> 
> 赞同：1
> 
> 时间：2012-10-18T09:47:41.227
> 
> 标签：google-app-engine, objectify

我对 Objectify 感到很疯狂，因为我遇到了`List<Ref<?>>`这样的问题：

`@Index @Load private LinkedList<Ref<Post>> diary = new LinkedList<Ref<Post>>();`

当我保存这个`Profile`实体时，`diary`参考列表是好的，并且： `getDiary().get(0).get()`给我正确的`Post`实体。

当我加载两个`Profile`然后第一个`Post`像这样： `ofy().load().key(myProfileKey).get().getDiary().get(0).get()`应该加载`Post`列表中的第一个时，我得到了`null`，即使正确加载了`Profile`和（包含正确的）。`diary``diary``Ref<Post>`

有任何想法吗？提前致谢！

**更新：** 在我之前的问题中，我忘了告诉它`Post`有一个`@Parent`字段：`Profile`. 删除`@Parent`所有作品......即使我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:06:19.673

我将所有内容简化为一个TestCase：

```
public class StandaloneTestCase {

    protected static LocalServiceTestHelper helper = null;
    protected static Objectify ds = null;

    @BeforeClass
    public static void setUp() {
        LocalDatastoreServiceTestConfig config = new LocalDatastoreServiceTestConfig();
        helper = new LocalServiceTestHelper(config);
        helper.setUp();
        ds = ObjectifyService.ofy();

        ObjectifyService.register(Post.class);
        ObjectifyService.register(Profile.class);
    }

    @Test
    public void test() {
        Profile p = new Profile();
        p.setEmail("user1@email.com");
        p.setPassword("user1pwd");
        p.setRegistrationDate(new Date(0L));
        p.setSex("Male");
        p.setName("Name1");
        p.setSurname("Surname1");
        p.setFullName("Name1 Nick1 Surname1");
        Key<Profile> pKey = ds.save().entity(p).now();

        Profile pro = ds.load().type(Profile.class).filter("name", "Name1").first().get();
        Assert.assertEquals(0, ds.load().key(pro.getRef().getKey()).get().getFriends().size());

        Post newPost = new Post();
        newPost.setDate(new Date());
        newPost.setTitle("New Post p1");
        newPost.setDescription("New Descr p1");
        newPost.setAuthor(pro.getRef());

        ds.save().entity(newPost).now();
        Ref<Post> postRef = newPost.getRef();

        pro.getDiary().addFirst(postRef);
        pro.getMessages().addFirst(postRef);
        ds.save().entity(pro).now();

        newPost.getReceivers().addAll(pro.getFriends());

        Collection<Profile> friends = ds.load().refs(pro.getFriends()).values(); 
        for (Profile friend : friends) {
            friend.getMessages().addFirst(newPost.getRef());
        }
        ds.save().entities(friends).now();
        ds.save().entity(newPost).now();

        Assert.assertEquals(1, ds.load().key(pro.getKey()).get().getDiary().size());
        Assert.assertEquals(1, ds.load().key(pro.getKey()).get().getMessages().size());
        Assert.assertEquals(newPost.getRef(), ds.load().key(pro.getKey()).get().getDiary().get(0));
        // BIG FAT WARNING
        Assert.assertEquals(newPost, ds.load().key(pro.getKey()).get().getDiary().get(0).get());
    }

    @AfterClass
    public static void tearDown() {
        ds.clear();
        helper.tearDown();
    }

}

//

@Entity
class Identifable<T> {

    @Id 
    private Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((id == null) ? 0 : id.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        return equals((Identifable<?>) obj);
    }

    public boolean equals(Identifable<?> other) {
        if (id == null) {
            if (other.id != null)
                return false;
        } else if (!id.equals(other.id))
            return false;
        return true;
    }

}

@Entity @Cache
class Post extends Identifable<Post> {

    @Index(IfNotNull.class)
    @Load
    @Parent
    private Ref<Profile> author = null;

    @Index(IfNotNull.class)
    private Date date = null;

    @Index(IfNotNull.class)
    private String title = null;
    private String description = null;

    @Index(IfNotEmpty.class)
    @Load
    private Set<Ref<Profile>> receivers = new HashSet<Ref<Profile>>();

    public Set<Ref<Profile>> getReceivers() {
        return receivers;
    }

    public Ref<Profile> getAuthor() {
        return author;
    }

    public void setAuthor(Ref<Profile> author) {
        this.author = author;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    @Override
    public String toString() {
        return "Post [author=" + author + ", date=" + date + ", title=" + title
                + ", description=" + description + "]";
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = super.hashCode();
        result = prime * result + ((author == null) ? 0 : author.hashCode());
        result = prime * result + ((date == null) ? 0 : date.hashCode());
        result = prime * result
                + ((description == null) ? 0 : description.hashCode());
        result = prime * result + ((title == null) ? 0 : title.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (!super.equals(obj))
            return false;
        if (getClass() != obj.getClass())
            return false;
        Post other = (Post) obj;
        if (author == null) {
            if (other.author != null)
                return false;
        } else if (!author.equals(other.author))
            return false;
        if (date == null) {
            if (other.date != null)
                return false;
        } else if (!date.equals(other.date))
            return false;
        if (description == null) {
            if (other.description != null)
                return false;
        } else if (!description.equals(other.description))
            return false;
        if (title == null) {
            if (other.title != null)
                return false;
        } else if (!title.equals(other.title))
            return false;
        return true;
    }

    public Key<Post> getKey() {
        return Key.create(Post.class, getId());
    }

    public Ref<Post> getRef() {
        return Ref.create(getKey(), this);
    }

}

//

@Entity @Cache
class Profile extends Identifable<Profile> {

    @Index
    private String email = null;
    @Index
    private String password = null;

    private Date registrationDate = null;

    @Index(IfNotNull.class)
    private String name = null;
    @Index(IfNotNull.class)
    private String surname = null;
    @Index(IfNotNull.class)
    private String fullName = null;

    @Index
    private String sex = null;

    @Index
    private Date dateOfBirth = null;

    @Index(IfNotEmpty.class)
    @Load
    private LinkedList<Ref<Post>> diary = new LinkedList<Ref<Post>>();

    @Index(IfNotEmpty.class)
    @Load
    private Set<Ref<Profile>> friends = new HashSet<Ref<Profile>>();

    @Index(IfNotEmpty.class)
    @Load
    private LinkedList<Ref<Post>> messages = new LinkedList<Ref<Post>>();

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public Date getRegistrationDate() {
        return registrationDate;
    }

    public void setRegistrationDate(Date registrationDate) {
        this.registrationDate = registrationDate;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getSurname() {
        return surname;
    }

    public void setSurname(String surname) {
        this.surname = surname;
    }

    public String getFullName() {
        return fullName;
    }

    public void setFullName(String fullName) {
        this.fullName = fullName;
    }

    public String getSex() {
        return sex;
    }

    public void setSex(String sex) {
        this.sex = sex;
    }

    public Date getDateOfBirth() {
        return dateOfBirth;
    }

    public void setDateOfBirth(Date dateOfBirth) {
        this.dateOfBirth = dateOfBirth;
    }

    public Set<Ref<Profile>> getFriends() {
        return friends;
    }

    public LinkedList<Ref<Post>> getDiary() {
        return diary;
    }

    public LinkedList<Ref<Post>> getMessages() {
        return messages;
    }

    @Override
    public String toString() {
        return "Profile [email=" + email + ", password=" + password
                + ", registrationDate=" + registrationDate + ", name=" + name
                + ", surname=" + surname + ", fullName=" + fullName + ", sex="
                + sex + ", dateOfBirth=" + dateOfBirth + ", diary=" + diary
                + ", friends=" + friends + ", messages=" + messages + "]";
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result
                + ((dateOfBirth == null) ? 0 : dateOfBirth.hashCode());
        result = prime * result + ((diary == null) ? 0 : diary.hashCode());
        result = prime * result + ((email == null) ? 0 : email.hashCode());
        result = prime * result + ((friends == null) ? 0 : friends.hashCode());
        result = prime * result
                + ((fullName == null) ? 0 : fullName.hashCode());
        result = prime * result
                + ((messages == null) ? 0 : messages.hashCode());
        result = prime * result + ((name == null) ? 0 : name.hashCode());
        result = prime * result
                + ((password == null) ? 0 : password.hashCode());
        result = prime
                * result
                + ((registrationDate == null) ? 0 : registrationDate.hashCode());
        result = prime * result + ((sex == null) ? 0 : sex.hashCode());
        result = prime * result + ((surname == null) ? 0 : surname.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Profile other = (Profile) obj;
        if (dateOfBirth == null) {
            if (other.dateOfBirth != null)
                return false;
        } else if (!dateOfBirth.equals(other.dateOfBirth))
            return false;
        if (diary == null) {
            if (other.diary != null)
                return false;
        } else if (!diary.equals(other.diary))
            return false;
        if (email == null) {
            if (other.email != null)
                return false;
        } else if (!email.equals(other.email))
            return false;
        if (friends == null) {
            if (other.friends != null)
                return false;
        } else if (!friends.equals(other.friends))
            return false;
        if (fullName == null) {
            if (other.fullName != null)
                return false;
        } else if (!fullName.equals(other.fullName))
            return false;
        if (messages == null) {
            if (other.messages != null)
                return false;
        } else if (!messages.equals(other.messages))
            return false;
        if (name == null) {
            if (other.name != null)
                return false;
        } else if (!name.equals(other.name))
            return false;
        if (password == null) {
            if (other.password != null)
                return false;
        } else if (!password.equals(other.password))
            return false;
        if (registrationDate == null) {
            if (other.registrationDate != null)
                return false;
        } else if (!registrationDate.equals(other.registrationDate))
            return false;
        if (sex == null) {
            if (other.sex != null)
                return false;
        } else if (!sex.equals(other.sex))
            return false;
        if (surname == null) {
            if (other.surname != null)
                return false;
        } else if (!surname.equals(other.surname))
            return false;
        return true;
    }

    public Key<Profile> getKey() {
        return Key.create(Profile.class, getId());
    }

    public Ref<Profile> getRef() {
        return Ref.create(getKey(), this);
    }

} 
```

我使用 Objectify 4.0a4 和 App Engine SDK 1.7.2 如果您尝试`@Parent`从`author` `Post`现场移除测试是可以的。

这可能不是 Objectify 错误（很确定），可能是我的概念错误。

# extjs4 - Sencha Combo DisplayTpl

> ID：12951767
> 
> 赞同：2
> 
> 时间：2012-10-18T09:47:52.807
> 
> 标签：extjs4, extjs

在我的组合框中，我有这样的东西：

```
displayTpl: Ext.create('Ext.XTemplate',
                                    '<tpl for=".">',
                                        '{Nome} ({Valor})', 
                                    '</tpl>') 
```

它工作正常，除了如果组合没有预先选择的值，它会显示这个“（）”

因此，我尝试创建一个模板，当值为空时，它不会显示如下内容：

```
displayTpl: Ext.create('Ext.XTemplate',
                                    '<tpl for=".">',
                                        '<tpl if="this.isEmpty({Nome})">',
                                            '',
                                        '<tpl else>',
                                            '{Nome} ({Valor})',
                                        '</tpl>',
                                    '</tpl>',
                                    {
                                        isEmpty: function (value) {
                                            return value == '';
                                        }
                                    }) 
```

但是当评估 tpl (extjs-all-debug) 时，我不断收到错误消息“预期：”

```
compile: function (tpl) {
    var me = this,
        code = me.generate(tpl);

    return me.useEval ? me.evalTpl(code) : (new Function('Ext', code))(Ext); 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:20:09.023

tpl 标记中的表达式不需要 { }。所以试试这个模板：

```
'<tpl for=".">',
    '<tpl if="this.isEmpty(Nome)">',
        '',
    '<tpl else>',
        '{Nome} ({Valor})',
    '</tpl>',
'</tpl>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:01:56.740

我已经解决了：）

```
displayTpl: Ext.create('Ext.XTemplate',
            '<tpl for=".">',
                '<tpl if="Nome != \'\'">',
                    '{Nome} ({Valor})',
                '<tpl else>',
                    '',
                '</tpl>',
            '</tpl>'
        ) 
```

因为我似乎无法理解传递给组合的值是什么，所以我认为如果它与空不同，则返回我想要的结构，如果不是，则返回''

# jquery - 使用切片功能限制结果自动完成 jquery ui

> ID：12951773
> 
> 赞同：2
> 
> 时间：2012-10-18T09:48:11.493
> 
> 标签：jquery, autocomplete, limit, slice

我需要在这个自动完成 jquery ui 脚本中限制结果（最多 10 个）。我知道我必须使用 slice 函数，但我无法将其正确放置在脚本中。在此先感谢您的帮助。

```
$(document).ready(function() {
    var myArr = [];

    $.ajax({
        type: "GET",
        url: "events.xml", // change to full path of file on server
        dataType: "xml",
        success: parseXml,
        complete: setupAC,
        failure: function(data) {
            alert("XML File could not be found");
            }
    });

    function parseXml(xml)
    {
        //find every query value
        $(xml).find("topevent").each(function()
        {
            //you are going to create an array of objects 
        var thisItem = {}; 
        thisItem['label'] = $(this).attr("label"); 
        thisItem['value'] = $(this).attr("value");
        myArr.push(thisItem); 

        }); 
    }

    function setupAC() {
    $("input#searchBoxEv").autocomplete({
    source: myArr,
    minLength: 3,
    select: function(event, ui) {
    var urlString = "http://mysite.com/" +  "eventi/" + (ui.item.value) + ".html";
    $("input#searchBoxEv").val(urlString);
    location.href=urlString;

                           }
    });
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:02:00.817

```
$("#auto").autocomplete({
    source: function(request, response) {
        var results = $.ui.autocomplete.filter(myarray, request.term);

        response(results.slice(0, 10));
    }
}); 
```

你可以在这里找到更多文档..

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:33:26.920

最后我解决了在 jquery.ui css 中添加两个参数的问题：最大高度和溢出：隐藏。自动完成初始化为 3° 字母，为了获得更好的结果，人们必须输入更多。它适用于五种不同的浏览器（IE、Chrome、Opera、Firefox、Safari）。

.ui-autocomplete { 位置：绝对；光标：默认；文本对齐：左；最大高度：245px；溢出：隐藏；}

# visual-studio - 如何在我的 MS Visual Studio 2012 中的控制台中运行单个类

> ID：12951776
> 
> 赞同：3
> 
> 时间：2012-10-18T09:48:13.817
> 
> 标签：visual-studio, visual-studio-2012

我有以下课程：-

```
public Class test{
public void testmethod(int i)
        {
            i = 56789121;
            //code ges here
            Console.WriteLine(i);
     }   } 
```

但我需要运行这个类来查看 Console.writeline 的结果，但我不确定我该怎么做。我通常使用 MS Visual Studio 构建一个 Web 应用程序并通过单击“开始”按钮运行该应用程序，但我从未尝试使用 Console.writeline 输出结果。BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:23:13.863

而是构建一个控制台应用程序。

File -> Add -> New Project... 并选择 Console Application

将 VS 生成的 .cs 文件更改为这样的

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication2
{
    class Test
    {
        public void MyMethod()
        {
            Console.WriteLine("Hello World!");
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            new Test().MyMethod();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:06:40.940

正如 Nigel 建议的那样，通常的方法是制作一个控制台应用程序来测试东西。

但是，正如您所说，您不能从 VS Web 执行此操作。我个人已经开始使用 LINQPad 对我的对象进行一次性测试：

[http://www.linqpad.net/](http://www.linqpad.net/)

打开它后，将“语言”下拉菜单切换为“C# 语句”或“C# 程序”。按 F4，浏览并添加对 DLL 的引用和命名空间的 Import。现在您可以调暗对象并直接从 LINQPad 调用其方法。LINQPad 不会锁定任何文件，因此如果您从 VS 重建，您可以 Alt-Tab 回到 LINQPad 并重新运行，它将使用您刚刚构建的库的副本。

我几乎完全切换到了这个，因为 LINQPad 有一个非常好的界面来探索你已经 .Dump()'ed 到输出窗口的对象和异常。

（不，我不隶属于 LINQPad，我只是一个非常满意的客户。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T08:34:22.303

或者....

由于 C# 编译器是 .Net 框架的一部分，而不是 Visual Studio，因此您可以在命令行上编译程序。

以 C# 中的标准 HelloWorld 程序为例

```
using System;

public class HelloWorld
{
    public static void Main(string[] args)
    {
         Console.WriteLine("Hello world!");
    }
} 
```

在记事本中创建它，并保存为 HelloWorld.cs，打开命令提示符并将 .net 框架文件夹添加到您的路径（如果还没有的话）：

```
C:\> PATH=%PATH%;C:\Windows\Microsoft.NET\Framework\v4.0.30319 
```

（请注意您上面的 .net 版本可能会有所不同）

然后使用以下命令编译：

```
C:\> csc HelloWorld.cs 
```

创建 HelloWorld.exe。

# php - 在 Symfony 2.1 中设置语言环境

> ID：12951792
> 
> 赞同：6
> 
> 时间：2012-10-18T09:48:51.527
> 
> 标签：php, symfony, locale, symfony-2.1

我想在我的 symfony 2.1 网站上安装一个语言切换器。

我按照[官方文档](http://symfony.com/doc/current/book/translation.html)，设置翻译文件，但使用 $request->setLocale('en_US'); 设置语言环境 似乎不起作用。经过一些研究，我发现[了这个问题](https://stackoverflow.com/questions/12146282/changing-locale-with-symfony-2-1)，它提供了这个[监听器技术](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#httpfoundation-1)的答案的开始。

但是，我仍然无法让它工作，我不太确定我的听众声明，有什么问题吗？

我的控制器：

```
public function englishAction(Request $request)
{
    $this->get('session')->set('_locale', 'en_US');
    return $this->redirect($request->headers->get('referer'));
} 
```

config.yml 中的服务声明：

```
services:
    my_listener:
        class:        "FK\MyWebsiteBundle\Listener\LocaleListener" 
```

我的路由：

```
homepage:
    pattern:  /{_locale}
    defaults: { _controller: FKMyWebsiteBundle:Default:index, _locale: en }
    requirements:
        _locale: en|fr|cn
about:
    pattern:  /{_locale}/about
    defaults: { _controller: FKMyWebsiteBundle:Default:about, _locale: en }
    requirements:
        _locale: en|fr|cn 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T10:54:28.837

yml 中 LocaleListener 的声明（受新 LocaleListener 的当前声明启发：\vendor\symfony\symfony\src\Symfony\Bundle\FrameworkBundle\Resources\config\web.xml）

```
services:
    my_listener:
        class: "FK\MyWebsiteBundle\Listener\LocaleListener"
        arguments: [%locale%]
        tags:
            -  { name: kernel.event_subscriber } 
```

一些片段：

模板中的语言切换器：

```
{% for locale in ['en', 'fr', 'cn'] %}
    <li {% if locale == app.request.locale %}class="active"{% endif %}>
        <a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'_locale' : locale})) }}">{{ locale }}</a>
    </li>
{% endfor %} 
```

从控制器更改区域设置的重定向：

```
$LocalizedUrl = $this->get('router')->generate(
    $request->attributes->get('_route'), 
    ['_locale' => $locale] + $request->attributes->get('_route_params')
);

return new \Symfony\Component\HttpFoundation\RedirectResponse($LocalizedUrl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-21T10:41:18.267

你应该得到链接到你的 symfony 内核容器的翻译器实例：

```
$this->container->get('translator')->setLocale('fr'); 
```

# objective-c - XCode 4.5.1 中不提供用于添加本地化字符串的“+”

> ID：12951797
> 
> 赞同：1
> 
> 时间：2012-10-18T09:49:03.087
> 
> 标签：objective-c, xcode4, localization, interface-builder

我正在开发一个使用本地化支持的项目，几天前我已经将我的 xcode 4.3.2 更新到 4.5.1，这是最新的，现在客户刚刚添加了新语言，这就是为什么当我去添加新文件时按照这些步骤

1.  选择 Localizable.strings 文件，您可以看到“本地化”窗格。
2.  我可以在那里看到我的其他语言文件

但是没有“+”或“-”，不知道如何添加新语言或者它不再支持或者苹果忘记在这里添加按钮？

任何帮助，将不胜感激

# asp.net - 使用 GooglemapforAsp.net 控件的路由方向

> ID：12951799
> 
> 赞同：0
> 
> 时间：2012-10-18T09:49:26.127
> 
> 标签：asp.net, google-maps, google-maps-markers

我正在尝试使用谷歌地图研究路由方向以进行 asp.net 控制。这是我的代码。

```
GoogleMapForASPNet1.GoogleMapObject.APIKey = ConfigurationManager.AppSettings["GoogleAPIKey"];         
GoogleMapForASPNet1.GoogleMapObject.Width = "1100px"; 
GoogleMapForASPNet1.GoogleMapObject.Height = "600px";       
GoogleMapForASPNet1.GoogleMapObject.ZoomLevel = 10;        
GoogleMapForASPNet1.GoogleMapObject.CenterPoint = new GooglePoint("1", 1.352083, 103.819836);

GoogleMapForASPNet1.GoogleMapObject.ShowTraffic = true;         
int count=0;
bool flag = false;   
GoogleMapForASPNet1.GoogleMapObject.Points.Clear();
foreach (var gitem in tblG)
{          
    foreach (var item in tblDT)
    {
        if (item.Latitude==gitem.Latitude && item.Longitude==gitem.Longitude && flag!=true)
        {
            count += 1;
            GooglePoint GP1 = new GooglePoint();
            GP1.ID = "GP" + count.ToString();                       
            GP1.Latitude = Convert.ToDouble(gitem.Latitude);//latitude;
            GP1.Longitude = Convert.ToDouble(gitem.Longitude);
            GP1.InfoHTML = " Name:<b>" + Name + "</b></br>Point:<b>" + "GP" + count.ToString() + "</b></br>Time:<b>" + gitem.CDate.ToString() + "</b></br>";//stime;
            GoogleMapForASPNet1.GoogleMapObject.Points.Add(GP1);
            string address = gitem.Latitude + "," + gitem.Longitude;
            GoogleMapForASPNet1.GoogleMapObject.Directions.Addresses.Add(address);

            flag = true;
        }  
    }
    flag = false;               
} 
```

我想要它，因为路由方向仅在起点和终点之间。

但我得到的结果看起来像驾驶方向。我不想得到那个结果。如何解决这个问题？

# jquery - serialize() 在 ajax html 之后返回空

> ID：12951802
> 
> 赞同：0
> 
> 时间：2012-10-18T09:49:36.213
> 
> 标签：jquery, serialization, find

我正在尝试重新绑定单击事件以发布表单并 ajax html

```
$('.btnSave').addClass('yui3-button').click(function() {
    var $this =  $(this);
    var id = $(this).parent().attr('id');

    $.post(
        "MTrades/save", 
        $.param({ mycase: 1 }) + '&' + $(this).parent().parent().serialize(),
        function(data) {
            alert("page - " + data);
            $this.parent().fadeOut("fast").load(
                "MTrades/index/"+id+"/options", 
                function() {
                    //rebind the click event
                    BindClick();
                }).fadeIn("fast");
            });
            return false;
        }); 
```

表单参数发送第一次但不是第二次（在我保存并重新加载 html 之后） .serialize() 返回空。

html（缩短）：

```
<form id="Form2">
    <button>
    <div>
        <button>save
        <form>
            <table>
            </table>
        </form>
    </div>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:23:20.960

我已将外部形式替换为，`<div>` 并将内部形式`<form>`替换`$(this).parent().find('form').serialize()` 为`$(this).parent().parent().serialize()`

# javascript - 如何使用数组和 JQuery 创建可过滤菜单？

> ID：12951809
> 
> 赞同：0
> 
> 时间：2012-10-18T09:49:49.980
> 
> 标签：javascript, jquery, arrays, filter, filtering

请您帮我创建一个过滤器，使用下面的过滤器菜单来过滤菜单列表？

过滤器菜单：

*   土豆
*   鸡
*   白饭
*   黄瓜
*   鱼
*   火腿
*   牛奶

膳食清单：

```
<div class="potato chicken rice cucumber fish">Meal 1</div>
<div class="ham milk cucumber fish">Meal 2</div>
<div class="chicken">Meal 3</div>
<div class="potato  fish">Meal 4</div>
<div class="potato rice cucumber fish">Meal 5</div> 
```

所以基本上，例如，如果用户选择“鸡”，我希望它添加`chicken`到数组（过滤器）中，这样它只会显示菜单列表中与过滤器数组类似的类的饭菜，在这种情况下是“鸡” ”。然后，如果用户选择“鱼”，我希望重复相同的内容，以便它只显示数组中共享类的饭菜，在本例中为“鱼”和“鸡”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:27:48.837

此示例使用复选框作为过滤器选项。希望这会有所帮助...... [http://jsfiddle.net/ahmon_abilar/yVNP6/](http://jsfiddle.net/ahmon_abilar/yVNP6/)

```
$('input[name=filter]').on('click', function(){
    var strFilter = "";
    $.each($('input[name=filter]:checked'), function(i){
        strFilter += "." + $(this).val();
    });
    $('div').hide();
    $('div'+strFilter).show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:12:55.773

这是更新的示例：http: [//jsfiddle.net/Jn67S/7/](http://jsfiddle.net/Jn67S/7/)

单击按钮将元素添加/删除到过滤器数组。结果是包含数组中至少一个元素的菜单。

我希望你能用这个做点什么。

编辑：这是代码：

```
var filterarray = [];
$(".filterbutton").click(function() {
    var tempFilter = $(this).attr("value");
    if (filterarray.indexOf(tempFilter) == -1) {
    filterarray.push(tempFilter);
    } else {      
     filterarray.splice(filterarray.indexOf(tempFilter),1); 
    }
    if (filterarray.length > 0) {
        filter();
    } else {
        showAllElements();
    }
});

function filter() {
    var selector = "";
    for (i = 0; i < filterarray.length; i ++) {
        selector += "." + filterarray[i];
        if (i!=filterarray.length - 1) {
         selector += ", "; // Remove this line if you want results contain all ingredients in filter array
        }
    }
    if (filterarray.length > 0) {
        hideAllMenus();
        $("#menus").find(selector).show(); 
    }    
}

function hideAllMenus() {
    $(".menu").hide();
}

function showAllElements() {
    $(".menu").show();
} 
```

和 HTML：

```
<input type="button" value="potato" class="filterbutton"></input>
<input type="button" value="chicken" class="filterbutton"></input>
<input type="button" value="rice" class="filterbutton"></input>
<input type="button" value="cucumber" class="filterbutton"></input>
<input type="button" value="fish" class="filterbutton"></input>
<input type="button" value="ham" class="filterbutton"></input>
<input type="button" value="milk" class="filterbutton"></input>   

<div id="menus">
<div class="menu potato chicken rice cucumber fish">Meal 1</div>
<div class="menu ham milk cucumber fish">Meal 2</div>
<div class="menu chicken">Meal 3</div>
<div class="menu potato  fish">Meal 4</div>
<div class="menu potato rice cucumber fish">Meal 5</div>
</div> 
```

# eclipse - Eclipse：在 Project Explorer 中搜索文件夹和资源

> ID：12951812
> 
> 赞同：7
> 
> 时间：2012-10-18T09:50:02.120
> 
> 标签：eclipse, eclipse-plugin

我正在寻找一种方法来轻松搜索项目资源管理器中显示的任何内容。使用打开资源对话框只允许我搜索资源。我发现了这个问题[如何按名称查找 Eclipse 项目和文件夹？](https://stackoverflow.com/questions/1786563/how-to-find-eclipse-projects-folders-by-name)但是那里描述的插件看起来不能在 Eclipse Juno 中正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T10:04:46.153

不完全是，但总比没有好：

展开您要搜索的所有内容（尝试使用 shift+numpad *）。一旦它真正可见，您就可以开始输入关键字，它就会被定位。

像 eclipse Glance 这样的插件允许高亮、移动、通配符、正则表达式。

您还可以使用`Ctrl`++ ，它允许您`Shift`直接`R`定位资源，甚至无需浏览项目资源管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-11T07:42:29.120

使用[Eclipse 4.14](https://www.eclipse.org/eclipse/news/4.14/)（[Eclipse 2019-12](https://www.eclipse.org/eclipseide/2019-12/)同步发布的一部分，2019 年 12 月 18 日可用），您可以使用**Find Actions**

请参阅“[查找操作列出工作区文件](https://www.eclipse.org/eclipse/news/4.14/platform.php#open-file-find-actions)”

> 查找操作现在可以列出工作区中匹配的文件名（类似于“打开资源”对话框）。选择后，文件将在编辑器中打开。

[![https://www.eclipse.org/eclipse/news/4.14/images/find-actions-resources.png](../Images/9428f8c2f236660888071e0b66f0ebeb.png)](https://i.stack.imgur.com/FGhPN.png)

注意：“查找操作”（和快速访问）的名称在[issue 547755](https://bugs.eclipse.org/bugs/show_bug.cgi?id=547755#c82)中进行了辩论。

# c++ - platform::string Windows 8/RT C++ 中的函数

> ID：12951815
> 
> 赞同：4
> 
> 时间：2012-10-18T09:50:23.660
> 
> 标签：c++, string, winapi, visual-c++, c++-cx

> **可能重复：**
> [Platform::String 有点没用](https://stackoverflow.com/questions/12533883/platformstring-is-kind-of-useless)

我是 Windows 开发的新手，新的 Visual C++ API 让我抓狂。我最近遇到了一个似乎缺少字符串函数的问题。是否有可用的基本功能，例如：

*   子串
*   strpos 或类似的
*   常用表达

我的最终目标是采用“C:\foo\bar\baz.jpg”之类的文件路径并提取最深的目录。在这个例子中，我正在寻找“bar”。

也许更令人担忧的是，我发现要找到 Win 8 API 的当前文档非常困难。寻找此类问题的最佳地点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:57:00.400

substring 是标准 C++ 库的一部分。

```
string x = "abc";
string y = x.substr(1, 2); 
```

不完全确定我知道 strpos 做什么，但假设它是关于在字符串或类似物中查找字符的位置，那么它也是标准的。

```
string x = "abc";
string::size_type p = x.find('b'); 
```

正则表达式可以在跨平台 boost 库[http://boost.org](http://boost.org)中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:41:08.203

WinRT C++/CX 类`Platform::String`应该只在你的应用程序/组件**的边界使用。***在*您的应用程序/组件中，您应该只使用普通的 ISO C++ 类。

所以你可以只使用`std::wstring`（因为`Platform::String`是 Unicode）它的方法和 Boost 的助手，然后在边界处转换 from/to `std::wstring`to/from 。`Platform::String`

# paypal - 我如何处理非经常性的 Paypal 订阅？订阅立即到期

> ID：12951818
> 
> 赞同：0
> 
> 时间：2012-10-18T09:50:34.223
> 
> 标签：paypal, sandbox, subscription

我正在一个进行非经常性订阅的网站上工作，目前在 Paypal Sandbox 上对其进行测试。假设持续时间为 1 周（t3 = W，p3 = 1）。我没有在表单中包含 src 和 srt 变量。根据我所阅读的与此相关的少量信息，非经常性订阅被视为一次性订阅并立即使订阅到期。我希望它仍然会失效，并且 subscr_eot 在一周后被调用。该应用程序在 Java/JSP 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:13:36.293

因此，我现在将费用分为两部分：例如，一年的费用为 10 美元，而我收取 9.95 美元作为一年试用金额 a1，以及 0.05 美元作为仅一天的非经常性每日费用 (a3)。似乎是这样......至少EOT不会立即发送......

只需要向您的客户解释这种尴尬的付款计划是因为 Paypal 的特殊性......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:57:31.773

这听起来像是需要在您这边处理，而不是在 PayPal 那边处理。

您收到服务付款，并在数据库中为该用户附加到期*日期*。他只能在帐户到期之前登录您的网站。

# c# - 当没有子窗口打开时，MdiWindowListItem 之后的额外分隔符

> ID：12951820
> 
> 赞同：1
> 
> 时间：2012-10-18T09:50:35.783
> 
> 标签：c#, winforms, menu, mdi, mdichild

我有一个 MDI 应用程序。我有一个`ToolStripMenuItem`标记为“Window”的设置为`MdiWindowListItem`我的 main `MenuStrip`。Window 菜单有几个项目，例如“Cascade”和“Arrange Icons”。

当我运行我的应用程序时，窗口菜单以我的“排列图标”项目结束。正如预期的那样，当我打开一个或多个 MDI 子窗体时，它们会自动附加到`ToolStripSeparator`. 当我关闭所有子表单时，它们会按预期从“窗口”菜单中消失，但`ToolStripSeparator`仍然存在。我本来希望菜单恢复到原来的状态，即没有分隔符。

就目前而言，分隔符会自动添加但不会自动删除。当然，我可以尝试以编程方式消除额外的分隔符，但我没有看到其他人抱怨这一点，这让我怀疑这可能是因为我做错了什么而发生的。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:39:06.437

尝试在“排列图标”菜单项之后添加您自己的 ToolStripSeparator 菜单项，并将 Visible 属性设置为 false。

打开 MDI 子窗体时，使其可见：

```
 Form f = new Form();
  f.Text = "Test Form";
  f.MdiParent = this;
  f.FormClosed += ChildClosed;
  f.Show();
  ts.Visible = true; 
```

然后在 ChildClosed 方法中：

```
void ChildClosed(object sender, FormClosedEventArgs e) {
  this.BeginInvoke((Action)delegate 
                      { ts.Visible = (this.MdiChildren.Count() > 0); }
                  );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:18:42.513

`ts.Visible = (this.MdiChildren.Count() > 1)`
在孩子的封闭事件中就足够了。不需要 BeginInvoke

# php - 将当前类别的过滤器应用于 productCollection

> ID：12951821
> 
> 赞同：0
> 
> 时间：2012-10-18T09:50:37.093
> 
> 标签：php, magento

我知道我可以获得产品收藏

`$collection = Mage::getResourceModel('catalog/product_collection');`.

如何使用 categoryId 及其过滤器过滤此产品集合？

我说的过滤器是当我们点击分层导航侧边栏（属性选项..）时的过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:54:22.147

您可以`->addCategoryFilter(Mage::registry('current_category'));`在您的收藏中使用（检查您在此之前是否有 current_cateogry）

# c# - Windows Store 应用程序的线程模型

> ID：12951824
> 
> 赞同：0
> 
> 时间：2012-10-18T09:50:49.827
> 
> 标签：c#, multithreading, xaml, windows-8, windows-store-apps

我正在创建 Windows Store 应用程序，它从 Web 服务异步检索数据，然后使用数据更新 UI。在代码（RPC_E_WRONG_THREAD）中访问 Application.Current.Resources 时遇到了几个问题。

我可以在哪里找到有关应用程序如何启动、在应用程序生命周期内产生哪些线程以及我可以做什么和访问什么以及不能做什么的解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:18:15.273

Windows 应用商店应用程序遵循 WPF 线程模型，其中有一个称为 Dispatcher 的 UI 线程。所有 UI 更新/修改/等都必须发生在调度程序线程上。您得到的错误是您试图在后台线程上更新 UI。

.Net 4.5 使用新的 async/await 机制来管理异步调用。所以：

```
public async List<Foo> GetMyFooData()
{
    return await _myWebService.GetFooData();
} 
```

幕后发生的事情是编译器正在生成一个异步方法，这样您就不会阻塞 UI 线程。

我怀疑您正在尝试访问期望由 Dispatcher 检索的 Access 项目，这就是您出错的原因。

# android - Android：获取错误 java.lang.NullPointerException

> ID：12951825
> 
> 赞同：0
> 
> 时间：2012-10-18T09:50:52.350
> 
> 标签：android, android-tabhost

我是 android 新手，我创建了一个项目。在我的活动中，我有 ListView 和 Tabhost 以及我的活动范围 listactivity。当我运行我的项目时，它会给出错误

```
10-18 14:26:13.053: E/AndroidRuntime(278): FATAL EXCEPTION: main
10-18 14:26:13.053: E/AndroidRuntime(278): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.shareslab/com.example.shareslab.MessageList}: java.lang.NullPointerException
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-18 14:26:13.053: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 14:26:13.053: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
10-18 14:26:13.053: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-18 14:26:13.053: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-18 14:26:13.053: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method)
10-18 14:26:13.053: E/AndroidRuntime(278): Caused by: java.lang.NullPointerException
10-18 14:26:13.053: E/AndroidRuntime(278):  at com.example.shareslab.MessageList.onCreate(MessageList.java:107)
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-18 14:26:13.053: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

我的活动在这里

```
package com.example.shareslab;

import java.util.ArrayList;
import java.util.Arrays;

import com.example.shareslab.R;

import android.app.Dialog;
import android.app.ListActivity;
import android.app.LocalActivityManager;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;

import android.os.Bundle;
import android.preference.PreferenceManager;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TabHost;

import android.widget.TabHost.TabSpec;
import android.widget.TextView;

public class MessageList extends ListActivity {
    LocalActivityManager mLocalActivityManager;

    public static String singleDescription;
    public static String title,URLToPost,imageURL;
    public static ArrayList<String> galleryImages;
    private static class EfficientAdapter extends BaseAdapter 
    {    
        private LayoutInflater mInflater;
        public EfficientAdapter(Context context)
        {
            mInflater = LayoutInflater.from(context);
        }
        @Override
        public int getCount() {
            System.out.println("description COUNT : "+SplashActivity.description.size());
            return SplashActivity.description.size();
        }
        @Override
        public Object getItem(int position) {
            return position;
        }
        @Override
        public long getItemId(int position) {
            return position;
        }
        @Override
        public View getView(final int position, View convertView, ViewGroup parent) 
        {

            ViewHolder holder;
            if (convertView == null)
            {
                convertView = mInflater.inflate(R.layout.inflate_list_item, null);
                holder = new ViewHolder();              
                holder.title = (TextView) convertView.findViewById(R.id.inflate_title);
                holder.des = (TextView) convertView.findViewById(R.id.inflate_description);
                holder.im=    (ImageView) convertView.findViewById(R.id.inflate_image);
                convertView.setTag(holder);           
            }
            else 
            {
                holder = (ViewHolder) convertView.getTag();

            }   

            UrlImageViewHelper.setUrlDrawable(holder.im, SplashActivity.imageURLAmit.get(position),null);
            holder.title.setText(SplashActivity.titles.get(position));
            holder.des.setText(SplashActivity.description.get(position));

            return convertView;
        }   

        public static class ViewHolder {
            TextView title,des;
            ImageView im;
        }

    } // close class Efficent adapter

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        ListView listView = getListView();
        listView.setTextFilterEnabled(true);
        this.setListAdapter(new EfficientAdapter(this));
        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // When clicked, show a toast with the TextView text
                galleryImages=new ArrayList<String>();
                singleDescription=SplashActivity.description.get(position);
                title=SplashActivity.titles.get(position);
                URLToPost=SplashActivity.link.get(position);
                imageURL=SplashActivity.imageURLAmit.get(position);
                System.out.println("ON CLICK URL: "+URLToPost);
                galleryImages.addAll(Arrays.asList(SplashActivity.arrays[position]));               
                startActivity(new Intent(MessageList.this,MessageListDetail.class));
            }
        });

        TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost);
        mLocalActivityManager = new LocalActivityManager(this, false);
        tabHost.setup(mLocalActivityManager);
        mLocalActivityManager.dispatchCreate(icicle); //after the tab's setup is called, you have to call this or it wont work

        TabHost.TabSpec spec;
        Intent intent;

        tabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider);

        intent = new Intent().setClass(this, Home.class);
        spec = tabHost.newTabSpec("tagname1").setIndicator("HOME").setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, SocialMedia.class);
        spec = tabHost.newTabSpec("tagname2").setIndicator("SOCIAL MEDIA").setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Tech.class);
        spec = tabHost.newTabSpec("tagname3").setIndicator("TECH").setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, USWorld.class);
        spec = tabHost.newTabSpec("tagname4").setIndicator("US & WORLD").setContent(intent);
        tabHost.addTab(spec);
        intent = new Intent().setClass(this, Business.class);
        spec = tabHost.newTabSpec("tagname5").setIndicator("BUSINESS").setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Fashion.class);
        spec = tabHost.newTabSpec("tagname6").setIndicator("FASHION").setContent(intent);
        tabHost.addTab(spec);
        intent = new Intent().setClass(this, People.class);
        spec = tabHost.newTabSpec("tagname7").setIndicator("PEOPLE").setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Political.class);
        spec = tabHost.newTabSpec("tagname8").setIndicator("POLITICAL").setContent(intent);
        tabHost.addTab(spec);
}

@Override
protected void onPause() {
        super.onPause();
        mLocalActivityManager.dispatchPause(isFinishing()); //you have to manually dispatch the pause msg
}

@Override
protected void onResume() {
        super.onResume();
        mLocalActivityManager.dispatchResume(); //you have to manually dispatch the resume msg
}

    private static View createTabView(final Context context, final String text) {
        View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(text);
        return view;
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:00:13.300

您的主要 xml 是否包含 tabhost 视图？

# git - SVN 和 Git 中的发布管理

> ID：12951826
> 
> 赞同：4
> 
> 时间：2012-10-18T09:51:01.273
> 
> 标签：git, svn, release-management

我们使用与 SVN 集成的内部发布管理系统，该系统执行以下操作：

开发者在svn repo中给出title、repository、change set，选择code reviewer的名字、QA的名字和changeset并提交审批

QA 和代码审查员批准发布，并以 zip 格式提供下载。zip 存档中的文件通过 svn 变更集进行跟踪。

现在的问题是：是否有更好的测试发布管理系统的开源实现可以为我们完成上述任务？我们还计划将我们的 SVN 存储库迁移到 GIT，因此如果发布者支持这两个系统，那将是一个巨大的优势。

PS 我读过关于 Jenkins 和 Maven 的文章，但不确定他们是否会做我们想做的所有事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:19:47.773

好吧，您基本上希望自动执行以下步骤，并且为此需要一个 CI。

*“开发人员在 svn repo 中给出标题、存储库、变更集、选择代码审阅者的姓名、QA 的姓名和变更集并提交审批”*

**要求您的开发人员在提交代码之前正确标记并添加所有必需的信息**

如果您已经阅读过有关 Hudson/Jenkins 的信息，那么

*   您可以设置一个 Hudson 作业 (CI) 以从 SVN/GIT 提交历史中获取上述信息，并且测试人员/审阅者应该得到相关信息。有很多插件可以实现这一点，请参见[release mange plugin](http://wiki.hudson-ci.org/display/HUDSON/Subversion+Release+Manager)，[email-ext](http://wiki.hudson-ci.org/display/HUDSON/Email-ext+plugin)应该足以实现这一点。

*“QA 和代码审查员批准发布，并以 zip 格式提供下载。zip 存档中的文件通过 svn 变更集进行跟踪”*

为此，您需要自动审查/测试。首先，弄清楚审查是如何完成的，然后您可以在 Hudson/Jenkins 中添加一个构建步骤来运行执行任务的脚本。如果脚本失败，它将再次向提交代码的人发送电子邮件（请参阅 email-ext 插件）。最后，您可以压缩构建并发送存档。可能你甚至不需要为“哈德森代码审查”或“詹金斯代码审查”编写审查脚本。

相信我，所有这些都有可用的插件。你只需要多读一点，然后通过 Jenkins/Hudson。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:43:19.893

*“开发人员在 svn repo 中给出标题、存储库、变更集、选择代码审阅者的姓名、QA 的姓名和变更集并提交审批”*

既然您提到您正在考虑迁移到 Git，您可以考虑[Gerrit](https://code.google.com/p/gerrit/ "格里特")。Gerrit 可以托管您的 Git 存储库，还可以管理提交/审查/合并工作流程。

Alex Blewitt的[视频](http://vimeo.com/20084957)展示了如何将 Gerrit 与 Jenkins 一起使用。我推荐这个视频，但它的速度相当快。

我们使用的工作流程是这样的：

*   开发人员将更改提交给 Gerrit 以供审核。
*   Jenkins 构建更改，并在审查项目上指示它是否构建。
*   审阅者从 Jenkins 获取构建的工件并对其进行测试。
*   审阅者还进行代码审查，并在 Gerrit 上用他们希望修复的任何内容标记更改。
*   开发人员根据评论评论更新更改。
*   根据需要重复上述步骤。
*   审阅者批准更改，并将它们合并到主分支中。

Gerrit 用于一些大型项目，包括 Android 项目。[你可以在这里](https://android-review.googlesource.com/#/q/status%3aopen,n,z)看到它的使用。

**编辑：**您需要一个 Jenkins 插件来提供 Gerrit 和 Jenkins 之间的集成。Jenkins 至少有两个 Gerrit 相关的插件。以上是指[Gerrit Trigger](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger)插件。

另请参阅：[Gerrit 文档](http://gerrit-documentation.googlecode.com/svn/Documentation/2.5/index.html)。

# javascript - 用于自动检查在 IE 中中断的事物（如 const）的 JS 分析工具

> ID：12951827
> 
> 赞同：2
> 
> 时间：2012-10-18T09:51:02.553
> 
> 标签：javascript, internet-explorer, build-automation, static-analysis

我最近注意到并修复了我们软件中的一个非常糟糕的 JS 错误，它影响了所有 IE 版本，这是由 .js 文件中的一个简单错误引起的：

```
const foo = "..." 
```

现在，[IE 不支持 const](https://stackoverflow.com/questions/130396/are-there-constants-in-javascript)；这是一个语法错误。`var`应改为使用。（有问题的关键字实际上是由 IntelliJ IDEA 的“引入变量... -> 引入常量”重构无意中插入的。）

我们的自动化 Selenium 测试是*在 Linux 上*使用 Firefox 运行的，现在让它们在 IE 上运行可能太麻烦了。

无论如何，我的问题是，**是否有任何静态 JS 代码分析**工具

1.  会发现`const`错误（和类似的常见问题），并且
2.  可以很容易地从 CI 工具 (Jenkins) 中针对代码库中的某些 .js 文件触发？

[我知道](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#JavaScript)JSHint、JSLint 和 Google Closure Tools，但我不知道它们是否符合我的上述标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:03:39.557

JSHint 或 JSLint 会及时发现错误。您可以[配置 IntelliJ](http://blogs.jetbrains.com/idea/2012/05/lint-your-javascript-with-jslintjshint-in-real-time/)以实时显示此类问题。还有一个可用的[Jenkins 插件](https://github.com/boxuk/jslint-jenkins-plugin)。我希望你觉得这些有用。:)

# android - 填充页眉文本框后，ListView 页脚元素不可点击

> ID：12951828
> 
> 赞同：1
> 
> 时间：2012-10-18T09:51:02.850
> 
> 标签：android, listview, button, header, footer

我有`ScrollView`很多元素的 listView 的标题。和带有 2 个按钮的页脚。当我填充页眉元素并按下页脚按钮时，它不会触发。当我点击标题的项目时

```
 btnSubmitOrder.setOnClickListener(new View.OnClickListener() {

       public void onClick(View view) {
           header.clearFocus();
           btnSubmitOrder.setFocusable(true);
           Log.i("new order button","fires");

    }
 }); 
```

Log 项目的文本在我推送它的同时显示在 LogCat 中。那么为什么会这样呢？如何让页脚的按钮立即做出反应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:57:00.987

我通过使用解决了问题

```
btnSubmitOrder.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                 if (event.getAction() == MotionEvent.ACTION_DOWN)
                        {
                     header.clearFocus();
                        }
                   }
         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:56:45.767

将 android:onClick="onYourClick" 和 android:clickable="true" 添加到您的页脚 xml

在您的 ListActivity 添加功能：

```
 public void onYourClick(View v){
     header.clearFocus();
     btnSubmitOrder.setFocusable(true);
     Log.i("new order button","fires");
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:18:27.163

可能是列表视图和页脚视图正在争夺焦点试试这个：

```
 mylistView.addFooterView(footerView, null, false); 
```

其中 false 告诉页脚其不可选择。我自己对此进行了测试，页脚内的按钮现在可以响应触摸。我希望这是一个可以接受的答案。

否则，您将不得不使用您提到的 ontouchlistener，因为列表视图和按钮正在争夺焦点，而列表视图正在获胜。

# email - Joomla 2.5 编辑器中的站点 URL

> ID：12951829
> 
> 赞同：0
> 
> 时间：2012-10-18T09:51:04.750
> 
> 标签：email, joomla, joomla2.5

**是否可以在joomla 2.5**的 HTML 编辑器上获取站点 URL 。我需要为电子邮件正文提供图像 URL。

代码

```
<img src="<?php JURI::base()?>/templates/dayo/images/sign.png" width="200" /> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:04:20.583

我认为您可以在电子邮件正文中使用字符串替换功能。

在编辑器中，您必须放置一个代码`[image]`。在获取 Post 值时，您必须将字符串替换`[image]`为图像 url。

字符串替换的示例代码：

```
$mailbody = "mail body value [image] and description";
$imageurl = '';
$body     = str_replace("[image]", $imageurl, $mailbody); 
```

# c# - 如何在 VB6 中订阅实例对象的事件？

> ID：12951832
> 
> 赞同：2
> 
> 时间：2012-10-18T09:51:13.723
> 
> 标签：c#, .net, events, vb6, com-interop

我用 C# 编写了一个类库，我试图在 VBA (VB6) 中使用它。

创建我的类型库，使用 regasm 在计算机上注册类型库，在 VB6 中创建 .Net 对象的实例，访问属性和调用方法，一切都很好。

但我正在尝试订阅我的类型库中的实例级对象引发的一些事件。

下面是我在 C# 类中声明的一个事件处理程序（它们都是通用事件处理程序）的示例：

```
public event EventHandler<Events.NewCall> NewCall; 
```

**Events.NewCall**是继承自 EventArgs 的类，如下所示：

```
using System;

namespace MySolution.Events
{
    /// <summary>
    /// A call has been created ready for use
    /// </summary>
    public class NewCall : EventArgs
    {
        /// <summary>
        /// An automatic property
        /// </summary>
        public string AutoProperty { get; private set; }

        public NewCall(string rawData)
        {
            //Some logic here
            autoProperty = rawData;
        }
    }
} 
```

我在课堂上提出了这个事件，如下所示：

```
var checkNewCall = NewCall;
if (checkNewCall != null) { checkNewCall(this, new Events.NewCall("my raw data")); } 
```

在 C# 中，我可以实例化我的电话对象并订阅事件，如下所示：

```
MySolution.Phone _phone = new MySolution.Phone();
_phone.NewCall += AnEventHandler; 
```

事件处理程序如下所示：

```
void AnEventHandler(object sender, Splicecom.Events.NewCall e)
{
    //Do stuff with e
} 
```

在 VB6 中，我可以像这样实例化我的 Phone 对象：

```
Dim thisPhone As New MySolution.Phone 
```

键入**此电话。**没有给我任何智能感知，但我已经习惯了，我的类中的其他方法没有智能感知，但我仍然可以在没有编译/运行时错误的情况下调用它们。

如下所示，我可以看到我想要处理的事件：

![事件](../Images/e0a71d83a58f45ebf2b6621da8848a12.png)

但这是**MySolution**库的智能感知，而不是**Phone**类的实例**thisPhone**。

在 VB6 中，如何订阅**MySolution.Phone**对象的**thisPhone**实例上的**NewCall**事件。

 ****我试过这个：

```
Option Compare Database

Dim WithEvents thisPhone As MySolution.Phone

Private Sub Command0_Click()

    thisPhone = New MySolution.Phone
    thisPhone.NewCall = MyFunction()

End Sub

Private Sub MyFunction()

    'Do stuff

End Sub 
```

当我单击 Command0 时，我收到此错误：

![错误](../Images/14dd98b5fcdbbc6dc1c17fcd64d695e8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:29:22.043

VB6 事件处理程序在编译时完全基于例程的名称绑定到事件。尝试这个：

```
Option Compare Database

Dim WithEvents thisPhone As MySolution.Phone

Private Sub Command0_Click()

    thisPhone = New MySolution.Phone

End Sub

' Name of this routine is <withEventsVariableName>_<eventName> '
Private Sub thisPhone_NewCall()

    ' Do stuff '

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:04:32.717

提示：如果可能，请避免互操作。完全用 C# 编写 VB6 代码通常更容易。

您的 C# 必须有一个可共享的属性（设置为 true）和一个 GUID。建立一个界面`IPhone`，VB6需要这个。

您的 VB6 代码应如下所示：

```
Dim thisPhone As MySolution.IPhone
Set thisPhone = new MySolution.Phone 
```

然后，如果接口公开它，您就可以访问您的事件处理程序。****

# php - PHP 登录脚本和 SQL 查询总是返回相同的用户 ID

> ID：12951839
> 
> 赞同：3
> 
> 时间：2012-10-18T09:51:25.580
> 
> 标签：php, mysql, authentication, login, pdo

我发布了一个问题寻求帮助以解决我遇到的问题，它已关闭，因为它是本地化的。我现在已经缩小了我的问题。

我问的原始问题可以看到[PHP Login Script Returning Same user id?](https://stackoverflow.com/questions/12931693/php-login-script-returning-same-user-id "PHP登录脚本返回相同的用户ID？") .

我的登录脚本有问题。一切似乎都很好，我没有收到任何错误或任何东西。

基本上，当我登录时，从数据库中检索到的**user_uid**（用户 uid）始终为 3，由于某种原因，它没有得到正确的**user_uid**，但是存储在会话中的所有其他详细信息都是正确的。

导致问题的查询是这个

```
$stmt = $dbh->prepare("
     SELECT
         *
     FROM
         users, users_roles, users_profiles
     WHERE
         user_login = :username
     OR
         user_email = :email

     LIMIT 1"); 
```

如果我从 SQL 查询中删除**users_roles**和**users_profiles并仅从****users**表中检索它会得到正确的**user_uid**，这一定与我从多个表中检索并且查询在某处搞砸的事实有关。

这是 SqlFiddle 的链接，其中包含我的架构和 SQL 查询[http://sqlfiddle.com/#!2/3cc32/1/0](http://sqlfiddle.com/#!2/3cc32/1/0)

下面是回显的值数组，出于某种原因，即使在以测试帐户**phplover登录时****user_uid**假设为**6**，它也显示**user_uid** '3' 这是表中的第一行，似乎在某处发生冲突。

 ****经过进一步测试，它似乎从**users**表中获取了除**user_uid**之外的正确数据，但它从**users_profiles**和**users_roles**中检索数据库第一行的信息，可能是从 users 表中正确获取**user_uid**，但查询可能是覆盖它。

我运行的查询是 phpMyAdmin，它仍然做同样的事情，肯定与我的 SQL 查询有关，我怎样才能修复我的查询，以便它检索正确的**user_uid**？

```
Array
(
    [user_uid] => 3 // should be 6, 3 is the user_uid of the first row in database, seems to just fetch first row :/
    [user_status] => 1 
    [user_login] => PhpLover
    [user_pass] => 5e79a29e6292e7690a6bf56484140114f1374933081d499b8cc5034685950a16668868cd0886d93f9bc634a5649a6037022a5ef62e9b5d13cda24619bbdf610b;507a7ea891f609.84619944
    [user_email] => smaple@sample.com
    [user_registered] => 2012-10-14 09:58:16
    [user_display_name] => 
    [user_failed_logins] => 0
    [id] => 3 // not sure where this is coming from  but should be 6 like user_uid
    [user_role] => subscriber
    [user_gender] => 
    [user_url] => 
    [user_msn] => 
    [user_aim] => 
    [user_yim] => 
    [user_twitter] => 
    [user_facebook] => 
) 
```

这是我的登录脚本，无需显示它，因为我已将问题缩小到我的 SQL 查询，但我想我会发布它以帮助人们进一步了解正在发生的事情。

```
<?php
// ob_start()
ob_start();

// Include config.php
require_once("".$_SERVER['DOCUMENT_ROOT']."/de-admin/config.php");

// if user is logged in redirect them to control panel
// an already logged in user cannot login whilst already logged in!
alreadyloggedin();

// top.inc.php
require_once($top_inc);
?>

<!-- Meta start -->
<title><?php echo SITE_NAME; ?> - Member Login</title>
<meta name="description" content="<?php echo SITE_NAME; ?> - Member Login, Sign in" />
<meta name="keywords" content="sign up, member, login, signin, account, membership, <?php echo SITE_NAME; ?>" />
<!-- Meta end -->

<?php
// sidebar.inc.php
require_once($sidebar_inc);

// main.inc.php
require_once($main_inc);
?>

<?php

    if(isset($_POST['username_email'], $_POST['password'], $_POST[BOT_TEST], $_POST['token'])){

        // check if form token is valid
        IsValidFormTokenHash();

        // initialize form errors array
        $error    = array();

        // fetch form data
        $username_email = trim($_POST['username_email']);
        $password       = trim($_POST['password']);
        $bottest        = $_POST[BOT_TEST];

        // validate form data
        if(empty($username_email)){
            $error[] = 'Please enter your username or email address';
        }
        if(empty($password)){
            $error[] = 'Please enter your password';
        }
        if(!empty($bottest)){
            $error[] = 'Spambot detected, if your human please try again';
        }
        if(!empty($username_email) && !empty($password)){
            try{

                // connect to database
                $dbh = sql_con();

                // prepare query
                $stmt = $dbh->prepare("
                            SELECT
                                *
                            FROM
                                users, users_roles, users_profiles
                            WHERE
                                users.user_login = :username
                            OR
                                users.user_email = :email
                            AND
                                users.user_uid = users_roles.user_uid
                            AND
                                users.user_uid = users_profiles.user_uid
                            LIMIT 1");

                // execute query
                $stmt->execute(array(':username' => $username_email, ':email' => $username_email));

                if ($stmt->rowCount() > 0) {

                    $result = $stmt->fetch(PDO::FETCH_ASSOC);
                    echo '<pre>';
                    print_r($result);
                    echo '</pre>';
                    $user_db_pass = $result['user_pass'];

                    if(!ValidatePassword($password, $user_db_pass)){
                        $error[] = 'Invalid Login Details';
                    } else {

                        $user_status = $result['user_status'];

                        if($user_status == USER_STATUS_VERIFY){
                            $error[] = 'You must verify your account before you can log in';
                        }elseif($user_status == USER_STATUS_SUSPENDED){
                            $error[] = 'This account has been suspended';
                        }elseif($user_status == USER_STATUS_SPAM){
                            $error[] = 'This account has been marked as potentially spam';
                        } else {

                            // user valid

                            // fetch user details and assign there details to there sessions
                            $_SESSION['user_uid']          = $result['user_uid'];
                            $_SESSION['user_status']       = $result['user_status'];
                            $_SESSION['user_login']        = $result['user_login'];
                            $_SESSION['user_email']        = $result['user_email'];
                            $_SESSION['user_registered']   = $result['user_registered'];
                            $_SESSION['user_display_name'] = $result['user_display_name'];
                            $_SESSION['user_role']         = $result['user_role'];
                            $_SESSION['user_gender']       = $result['user_gender'];
                            $_SESSION['user_url']          = $result['user_url'];
                            $_SESSION['user_msn']          = $result['user_msn'];
                            $_SESSION['user_aim']          = $result['user_aim'];
                            $_SESSION['user_yim']          = $result['user_yim'];
                            $_SESSION['user_twitter']      = $result['user_twitter'];
                            $_SESSION['user_facebook']     = $result['user_facebook'];

                            // unset (destroy) form token
                            UnsetFormToken();

                            // On successful login get URI user was on
                            // so we can redirect them back to URI they was on
                            /*if(isset($_SESSION['redirect_to'])){
                                // if session redirect_to is found this means
                                // they tried to access a membersarea()
                                // so we get the URI and redirect to the
                                // secure page they tried accessing before logged in
                                $redirect_to = $_SESSION['redirect_to'];
                                // unset the session var
                                unset($_SESSION['redirect_to']);
                                // redirect
                                header("Location: ".SITE_URL."$redirect_to");
                                exit();
                            } else {
                                header("Location: /member/control-panel");
                                exit();
                            }*/

                            // now logged in redirect to control panel
                            //header("Location: /member/control-panel");
                            exit;
                        }
                    }

                } else {
                    $error[] = 'Incorrect login details';
                }

                // close database connection
                $dbh = null;

            }
            catch (PDOException $e){
                ExceptionErrorHandler($e);
                require_once($footer_inc);
                exit;
            }
        }

        // If errors found display errors
        if(!empty($error)){
            $SiteErrorMessages = '';
            foreach($error as $msg){
                $SiteErrorMessages .= "$msg <br />";
            }
        }
    }

    // display error messages
    if(isset($SiteErrorMessages)){
        SiteErrorMessages();
    }

    // the below values is to replace placeholders in tpl
    $TemplateReplacementValues = array(
        'SITE_NAME'         => SITE_NAME,
        'FORM_TOKEN_HASH'   => GenerateFormTokenHash(),
        'BOT_TEST'          => BotTest()
    );

    // signup.tpl template location
    $tpl = DOCUMENT_ROOT.'inc/tpl/login.tpl';

    // load signup template
    PageContentTemplate($tpl, $TemplateReplacementValues);

?>

<?php
// footer.inc.php
require_once($footer_inc);

// ob_end-flush
ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:55:23.297

重写这个：

```
FROM users, users_profiles, users_roles 
```

对此：

```
FROM users
INNER JOIN users_profiles USING (user_uid)
INNER JOIN users_roles USING (user_uid) 
```

...否则您的查询会产生一个[CROSS JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)（至少可以说这是非常低效的）。

如果某些`users`记录可能没有对应的记录，`users_profiles`则应在此处将 INNER JOIN 替换为 LEFT OUTER JOIN `users_roles`（对于这些用户，在返回的行集中相应的列值将设置为 NULL）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:56:08.593

```
$stmt = $dbh->prepare("
     SELECT
         *
     FROM
         users, users_roles, users_profiles
     WHERE
         (user_login = :username OR user_email = :email)
         AND users.user_uid = users_roles.user_uid
         AND users.user_uid = users_profiles.user_uid

     LIMIT 1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:58:59.583

尝试

```
SELECT users.*,users_roles.*,users_profiles.* FROM  users
LEFT OUTER JOIN user_roles ON users.user_uid=users_roles.user_uid
LEFT OUTER JOIN  users_profiles ON  users.user_uid = users_profiles.user_uid 
WHERE users.user_login = :username OR users.user_email = :email LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:08:45.297

您正在尝试加入 2 个以上的表，这就是它在小提琴中的工作方式：

```
SELECT *
FROM users 
INNER JOIN users_roles ON users.user_uid=users_roles.user_uid
INNER JOIN users_profiles ON users.user_uid = users_profiles.user_uid
WHERE (users.user_uid=6) AND (users.user_login='phplover') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T10:10:07.203

使用这个查询

“SELECT * FROM users as u left join users_roles as us on u.user_uid = us.user_uid left join users_profiles as up u.user_uid = up.user_uid WHERE u.user_login= :username OR u.user_email =:email LIMIT 1”****

# html - IE中列表之间的差距

> ID：12951844
> 
> 赞同：0
> 
> 时间：2012-10-18T09:52:02.897
> 
> 标签：html, css, internet-explorer, list

我创建了一个垂直导航，它包含在我创建的按钮中。IE 中的每个按钮之间都有很大的差距，我不知道为什么，因为所有边距都是 0！非常困惑，因为它在 Chrome 和 FF 中运行良好。

```
#buttons {
    float: left;
    padding: 0;
    margin: 0px 10px 10px 20px;
}
#buttons ul {
    display: inline;
}
#buttons ul li  {
    list-style: none;
    text-decoration: none;
    margin: 1px 0;
    clear:both;
}
#buttons ul li #quote{
    width: 270px;
    height: 53px;
    list-style: none;
    background-image: url('buttons.png');
}

#buttons ul li a:hover #quote{
    width: 270px;
    height: 53px;
    background-image: url('buttons.png');
    background-position: 270px 0px;
}
#buttons ul li #sample{
    width: 270px;
    height: 53px;
    list-style: none;
    background-image: url('buttons.png');
    background-position: 0px 53px;
}

#buttons ul li a:hover #sample{
    width: 270px;
    height: 53px;
    background-image: url('buttons.png');
    background-position: 270px 53px;
}
#buttons ul li #plan{
    width: 270px;
    height: 53px;
    list-style: none;
    background-image: url('buttons.png');
    background-position: 0px 106px;
}

#buttons ul li a:hover #plan{
    width: 270px;
    height: 53px;
    background-image: url('buttons.png');
    background-position: 270px 106px;
}
#buttons ul li #callback{
    width: 270px;
    height: 53px;
    list-style: none;
    background-image: url('buttons.png');
    background-position: 0px 159px;
}

#buttons ul li a:hover #callback{
    width: 270px;
    height: 53px;
    background-image: url('buttons.png');
    background-position: 270px 159px;
}

        <div id="buttons">
            <ul>
                <li><a href="#" onClick="openForm()"><div id="quote"></div></a></li>
                <li><a href="#"><div id="sample"></div></a></li>
                <li><a href="#"><div id="plan"></div></a></li>
                <li><a href="#"><div id="callback"></div></a></li>
            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:56:46.480

`<li>`一些旧版本的 IE 不喜欢标签之间的空白。

如果您可以访问 HTML，那么您可以通过几种方式解决这个问题。

要么评论：

```
<li>element One</li><!--
--><li>element Two</li><!--
--><li>element Three</li>... 
```

或单行列表：

```
<li>element One</li><li>element Two</li><li>element Three</li>... 
```

或者您可以尝试添加`vertial-align: bottom;`到所有`<li>`标签。

# ajax - rich:tabPanel 不适用于 textarea

> ID：12951850
> 
> 赞同：0
> 
> 时间：2012-10-18T09:52:16.163
> 
> 标签：ajax, jsf-2, richfaces, textarea, tabpanel

我想我遇到了richFaces 的错误。

我有一个带有 switchType='ajax' 和 2 个（空）选项卡的 tabPanel 的简单页面，第一个选项卡仅包含一个 textarea，其值绑定到 bean 属性，而 tabPanel 不起作用。尝试更改选项卡时成为以下日志消息：

```
info [11:31:56.919]: Received 'begin' event from <div id=form:j_id2114509110_7e08d99f ...>
info [11:31:56.953]: Received 'beforedomupdate' event from <div id=form:j_id2114509110_7e08d99f ...>
info [11:31:56.957]: Element error
<error><error-name>javax.faces.component.UpdateModelException</error-name><error-message><![CDATA[org.apache.myfaces.view.facelets.el.ContextAwarePropertyNotWritableException: javax.el.PropertyNotWritableException: ResourceBundles are read-only]]></error-message></error>
error[11:31:56.959]: Received 'error@serverError' event from <div id=form:j_id2114509110_7e08d99f ...>
error[11:31:56.961]: [200] undefined: undefined
info [11:31:56.962]: Received 'complete' event from <div id=form:j_id2114509110_7e08d99f 
```

当我删除值绑定时，一切都按预期工作。 ~~通过输入框更改文本区域也可以正常工作~~ .

更新：我还收到一个带有 switchType='server' 的服务器错误：

```
javax.el.PropertyNotWritableException: ResourceBundles are read-only
    org.apache.myfaces.el.unified.resolver.ResourceBundleResolver.setValue(ResourceBundleResolver.java:69)
    javax.el.CompositeELResolver.setValue(CompositeELResolver.java:68)
    org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.setValue(FacesCompositeELResolver.java:229)
    org.jboss.el.parser.AstPropertySuffix.setValue(AstPropertySuffix.java:73)
    org.jboss.el.parser.AstValue.setValue(AstValue.java:84)
    org.jboss.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)
    org.apache.myfaces.view.facelets.el.ContextAwareTagValueExpression.setValue(ContextAwareTagValueExpression.java:151)
    javax.faces.component.UIInput.updateModel(UIInput.java:402)
    javax.faces.component.UIInput.processUpdates(UIInput.java:324)
    javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1332)
    org.richfaces.component.AbstractTogglePanel.processUpdates(AbstractTogglePanel.java:302)
    javax.faces.component.UIForm.processUpdates(UIForm.java:217)
    javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1332)
    javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1332)
    javax.faces.component.UIViewRoot._processUpdatesDefault(UIViewRoot.java:1311)
    javax.faces.component.UIViewRoot.access$600(UIViewRoot.java:74)
    javax.faces.component.UIViewRoot$UpdateModelPhaseProcessor.process(UIViewRoot.java:1413)
    javax.faces.component.UIViewRoot._process(UIViewRoot.java:1272)
    javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:782)
    org.apache.myfaces.lifecycle.UpdateModelValuesExecutor.execute(UpdateModelValuesExecutor.java:38)
    org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:171)
    org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:392)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:359)
    org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
    org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:67)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
    org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
    org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
    org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:271)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
    org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
    org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
    org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:174)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

这是工作代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich" >

  <h:head><title>Test</title></h:head>
  <h:body>
    <h:form id="form" >
      <h1>Test</h1>
      <rich:tabPanel switchType="ajax" >
        <rich:tab name="tab1" header="tab1">
          <h:inputTextarea value="#{testBean.text}" />
        </rich:tab>
        <rich:tab name="tab2" header="tab2">
          Tab2
        </rich:tab>
      </rich:tabPanel>
    </h:form>
    <a4j:log style="text-align:left;height:auto;" />
  </h:body>    
</html> 
```

这里是我的环境：Tomcat 6.0.18、Java 1.6.0_25、Win6.1 build 7601

和依赖项：

```
<dependency>
  <groupId>org.apache.myfaces.tomahawk</groupId>
  <artifactId>tomahawk20</artifactId>
  <version>1.1.10</version>
</dependency>
<dependency>
  <groupId>taglibs</groupId>
  <artifactId>standard</artifactId>
  <version>1.1.2</version>
</dependency>
<dependency>
   <artifactId>myfaces-impl</artifactId>
   <groupId>org.apache.myfaces.core</groupId>
   <version>2.0.9</version>
</dependency>
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jstl</artifactId>
  <version>1.1.0</version>
</dependency>
<dependency>
  <groupId>org.richfaces.core</groupId>
  <artifactId>richfaces-core-impl</artifactId>
  <version>4.2.2.Final</version>
</dependency>
<dependency>
  <groupId>org.richfaces.ui</groupId>
  <artifactId>richfaces-components-ui</artifactId>
  <version>4.2.2.Final</version>
</dependency>
<dependency>
  <groupId>org.jboss.seam</groupId>
  <artifactId>jboss-el</artifactId>
  <version>2.0.0.GA</version>
  <scope>runtime</scope>
  <exclusions>
    <exclusion>
      <artifactId>javax.el</artifactId>
      <groupId>el-api</groupId>
    </exclusion>
  </exclusions>
</dependency> 
```

有人遇到过这样的问题吗，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:39:05.543

所以，我明白了！

这是一个错误，但在`org.apache.myfaces.el.unified.resolver.ResourceBundleResolver`2.0.9 版本中。

关键是我的财产被命名为“文本”，而且我还有一个名为“文本”的资源包。另外在`javax.el.CompositeELResolver`前面`org.apache.myfaces.el.unified.resolver.ResourceBundleResolver`是`javax.el.BeanELResolver`。

并且该`org.apache.myfaces.el.unified.resolver.ResourceBundleResolver.setValue(ELContext context, Object base, Object property, Object value)`方法不检查基础对象，只是查找名为属性的资源包，在我的情况下，它找到了一些东西和 peng！例外！

它应该检查`(base != null)`并离开。

# ruby-on-rails - 当嵌套对象是 ActiveRecord 子类时，嵌套属性更新失败

> ID：12951861
> 
> 赞同：0
> 
> 时间：2012-10-18T09:53:06.343
> 
> 标签：ruby-on-rails, activerecord, subclass, nested-attributes

我有一个带有子类的 ActiveRecord，它与另一个 ActiveRecord 对象相关联。我可以使用具有嵌套属性的表单创建具有嵌套属性的对象，这对于新对象没有问题（遵循 Ryan Bates rails cast - 顺便感谢 :)）。但是，当我进行更新时，提交时无法将更改保存到主对象或相关对象

我有以下 Activerecord 类和子类。

```
class Room < ActiveRecord::Base

 attr_accessible :name, :type, room_headers_attributes

 has_many :room_headers, dependent: :destroy

 accepts_nested_attributes_for :room_headers , :allow_destroy => true

end 
```

子类是

```
class BigRoom < Room

end 
```

相关类是

```
class RoomHeader < ActiveRecord::Base

  attr_accessible :key, :room_id, :value

  belongs_to :room
end 
```

在我的房间控制器中，我创建了嵌套对象。请注意，我使用 :type 来指定子类类型

```
def new
    @room = current_user.passes.build(params[:room])
    @room.type = params[:type]    

    3.times do
        room_header = @room.room_headers.build
      end

    ....
 end

 ....

def edit
  @room = Room.find(params[:id])
end

def update
    @room = Room.find(params[:id])

 if @room.update_attributes(params[:room])
 ... 
```

用于创建和编辑的表格是一样的

```
<%= form_for(@room) do |f| %>

<div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
</div>

<%= f.fields_for :room_headers do |builder| %>
   <%= render 'room_header_fields', f: builder %>
<% end %>

<div class="actions">

    <%= f.submit %>
  </div> 

<% end &> 
```

而 _room_headers.html.erb 部分是

```
<p class="fields">
  <%= f.label :key, "Key" %>
  <%= f.text_field :key %>
  <%= f.label :value, "Value" %>
  <%= f.text_field :value %>
  <%= f.check_box :_destroy %>
  <%= f.label :_destroy, "Remove Header" %>
</p> 
```

回顾一下这个问题。我可以成功创建一个新的 BigRoom。在我创建 BigRoom 的新表单中，我可以成功设置 RoomHeader 类的值，并且这些值都已成功保存。

但是，当我编辑记录并提交更改以进行更新时，什么都没有保存。对于 Bigroom 属性或关联的 RoomHeader 记录的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:15:42.567

首先尝试

```
 if @room.update_attribute(params[:room])

     rather
   if @room.update_attributes(params[:room]) 
```

如果这可行，那么它们是您的验证的一些错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:42:19.137

好的，嵌套属性是一个红鲱鱼。问题在于 STI

Rails 表单助手指南说您不能依赖 STI 的记录识别。

在 form_for 中，我们需要将 id 强制为基本类型 id，否则编辑会失败

所以

```
<%= form_for(@room) do |f| %> 
```

应该

```
<%= form_for(@room.becomes(Room) do |f| %> 
```

如果您查看 html 输出的差异

问题 html 在编辑模式下使用 .becomes 时会创建像 big_room_fieldname 这样的 id，我们会得到像 room_fieldname 这样的 id。在这种情况下，它可以保存和更新

# iphone - 本地化 UITextView

> ID：12951865
> 
> 赞同：1
> 
> 时间：2012-10-18T09:53:42.677
> 
> 标签：iphone, ios, localization, internationalization, uitextview

如何本地化 UITextView？我看到了很多关于 UITextField 的示例，但没有看到 UITextView 的示例。

我需要在 about 部分本地化我的应用程序的描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:55:37.397

如果您已将描述直接写入 XIB 中的 UITextView，则需要复制 XIB（只需使用 Xcode 的本地化工具），然后将翻译后的文本复制并粘贴到新的 XIB 中。

如果有多个 XIB 或者您需要将文本发送给翻译人员，只需在所有 XIB 上使用 GENSTRINGS。见这里： http: [//kb.applingua.com/2011/07/extracting-strings-from-your-m-class-files/](http://kb.applingua.com/2011/07/extracting-strings-from-your-m-class-files/)

# shopify - shopify结帐中的脚本标签

> ID：12951866
> 
> 赞同：6
> 
> 时间：2012-10-18T09:53:48.120
> 
> 标签：shopify

我正在考虑为 Shopify 开发一个应用程序，它将向商店的结帐页面添加功能。如果用户不必自己将代码复制并粘贴到文件中，那将是理想的，因此我正在考虑使用 ScriptTag API ( [http://api.shopify.com/scripttag.html](http://api.shopify.com/scripttag.html) ) 来包含自定义 javascript 文件。

我已经完成了上述 API 页面上的一些示例，并且可以在我的测试商店的每个页面上包含一个自定义脚本，但结帐页面除外。我已按照教程的建议将 src 更改为以“https://”开头，但我的脚本仍然没有运行，甚至没有出现在结帐的页面源中。

有没有人知道我如何才能让这个结账工作？我想要做的甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T19:46:50.337

脚本标签加载到的唯一结账页面是订单完成后出现的感谢页面。

出于安全原因，结帐步骤 1 和 2 的页面不能添加脚本标签。

# c# - 从另一个应用程序调用 Exe

> ID：12951868
> 
> 赞同：0
> 
> 时间：2012-10-18T09:53:51.630
> 
> 标签：c#, assemblies, exe

我在 c# 中有一个完整的命令行应用程序，它具有不同的模块并依赖于多个 dll 等。

现在，我想用另一个 UI 应用程序调用该 CLI 应用程序。但问题是 CLI 应用程序的 Thread 部分不起作用，控件只是跳到最后。那么，有什么办法可以处理这种情况吗？

例如：我有我想调用的应用程序 CLI.exe，所以我编写了以下代码：

```
Process proc = new Process();
proc.StartInfo.FileName = CLI.exe;
proc.StartInfo.Arguments = args;
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.CreateNoWindow = false;
proc.StartInfo.RedirectStandardOutput = true;
proc.StartInfo.RedirectStandardError = true;
proc.StartInfo.RedirectStandardInput = true;
proc.Start();
proc.WaitForExit(); 
```

现在这调用了我想调用的应用程序。以下代码在我的应用程序 CLI.exe 中

```
System.Console.WriteLine("Start app {0}", args);
       do
       {
            System.Threading.Thread.Sleep(1000);
       } while (model.Exited == false);
System.Console.WriteLine("Finish app"); 
```

现在，在 do while 循环之间，我做了很多 pf 处理，而 model.exit 不会出错。但它会启动应用程序，写入启动应用程序消息，然后它会写入完成应用程序，而其间的处理从未发生过。

model.Exit 也没有处理就成立了。

此外，如果我使用批处理命令运行 C​​LI.exe 或在 cmd 上运行 CLI.exe，它会完美运行。

那么，任何想法如何管理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:13:09.290

`proc.WaitForExit();`冻结您的进程，直到子进程完成。删除它并以另一种方式处理进程退出，例如，使用事件：

```
proc.EnableRaisingEvents = true;
proc.Exited += OnExit; 
```

# powershell - 任何重启 WebRole 的 PowerShell 命令

> ID：12951869
> 
> 赞同：1
> 
> 时间：2012-10-18T09:53:52.227
> 
> 标签：powershell, azure

是否有任何 PowerShell 命令来重新启动 WebRole 或 Worker Role 。请告诉我

-马亨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:24:16.453

如果您正在查看 Windows Azure PowerShell Cmdlet，您要使用的命令是 Reset-AzureRoleInstance ( [http://msdn.microsoft.com/en-us/library/jj152835.aspx](http://msdn.microsoft.com/en-us/library/jj152835.aspx) )。如果您正在寻找第 3 方 Cmdlet，也可以查看 Cerebrata 的 Azure 管理 Cmdlet。在那里使用的 Cmdlet 是“Restart-Role”（[http://www.cerebrata.com/Products/AzureManagementCmdlets/Details.aspx?t1=0&t2=3](http://www.cerebrata.com/Products/AzureManagementCmdlets/Details.aspx?t1=0&t2=3)）

希望这可以帮助。

# c# - MVC4 忽略 [HttpGet] 和 [HttpPost] 属性

> ID：12951870
> 
> 赞同：2
> 
> 时间：2012-10-18T09:53:56.733
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, http-post, http-get

我正在尝试制作一个简单的测试网站，以允许我使用 MVC4 列出、创建、编辑和删除客户对象。

在我的控制器内部，我有 2 个创建方法，一个用于在表单加载控件时使用的 Get，以及一个用于实际保存数据的 Post。

```
 //
    // GET: /Customer/Create

    [HttpGet]
    public ActionResult Create()
    {
        return View();
    }

    //
    // POST: /Customer/Create

    [HttpPost]
    public ActionResult Create(Customer cust)
    {
        if (ModelState.IsValid)
        {
            _repository.Add(cust);
            return RedirectToAction("GetAllCustomers");
        }

        return View(cust);
    } 
```

但是，当我运行项目并尝试访问创建操作时，我收到一个错误：

```
The current request for action 'Create' on controller type 'CustomerController' is ambiguous between the following action methods:
System.Web.Mvc.ActionResult Create() on type [Project].Controllers.CustomerController
System.Web.Mvc.ActionResult Create([Project].Models.Customer) on type [Project].Controllers.CustomerController 
```

我知道它看不到我的 Get 和 Post 方法之间的区别，但我已经添加了属性。这可能是什么原因，我怎样才能让它再次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:24:31.697

MVC 未授权您拥有 2 个同名的操作方法。

但是当 http 动词不同（GET、POST）时，您可以有 2 个具有相同 URI 的操作方法。使用 ActionName 属性设置操作名称。不要使用相同的方法名称。您可以使用任何名称。一个约定是添加 http 动词作为方法后缀。

```
[HttpPost]
[ActionName("Create")]
public ActionResult CreatePost(Customer cust)
{
    if (ModelState.IsValid)
    {
        _repository.Add(cust);
        return RedirectToAction("GetAllCustomers");
    }

    return View(cust);
} 
```

# visual-studio-2010 - 为什么 VS 2010 监听 UDP 端口 8976？

> ID：12951874
> 
> 赞同：1
> 
> 时间：2012-10-18T09:54:12.473
> 
> 标签：visual-studio-2010, resharper

为什么 VS 2010 监听 UDP 端口 8976？在我的 Win 7 操作系统上，我看到“devenv.exe”在 UDP 端口 8976 上侦听，但我似乎在文档中找不到任何关于它的用途的内容。

编辑：它可能是我的附加组件之一，也许？

*   VS GIT 扩展
*   锐器
*   .NET 反射器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:43:28.880

罪魁祸首似乎是 JetBrains Resharper 插件，当我卸载它时，监听端口消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-09T10:06:58.577

仅供参考，Resharper 一直在使用此端口来验证许可证信息，例如同时使用相同许可证的多个程序。

# java - 使用截断的时区信息解析 Java 日期

> ID：12951875
> 
> 赞同：3
> 
> 时间：2012-10-18T09:54:14.907
> 
> 标签：java, regex, date, date-format, simpledateformat

考虑以下日期字符串

*   `2012-10-01 01:02:03.004+0500`

这在 Java 中使用以下`SimpleDateFormat`模式识别：

*   `yyyy-MM-dd HH:mm:ss.SSSZ`

但是，如果上面的时区信息被截断为 2 位数字，即像

*   `2012-10-01 01:02:03.004+05`

日期字符串不符合任何有效格式，因此没有`SimpleDateFormat`可用于正确解析它的模式。

是否有任何解决方法可以在**不进行字符串预处理**的情况下正确解析截断的时区？

如果不是，哪个正则表达式最适合**在 1 轮中对****大量**此类日期字符串进行预处理，例如使用调用，如在这个[类似的问题](https://stackoverflow.com/questions/10614771/java-simpledateformat-pattern-for-w3c-xml-dates-with-timezone)中？**`replaceFirst()`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:02:27.990

我不知道没有字符串预处理的好解决方案，但如果`replaceFirst`可以接受，您可以使用以下代码片段：

```
dateStr.replaceFirst("(?<=[+-]\\d\\d)$", "00") 
```

此代码将两个零附加到以`<plus|minus><digit><digit>`([链接到 ideone](http://ideone.com/A5Zj6) ) 结尾的字符串。**

# objective-c - NSURLConnection 无法 http 发布大文件

> ID：12951878
> 
> 赞同：0
> 
> 时间：2012-10-18T09:54:21.340
> 
> 标签：objective-c, ios, post, nsurlconnection, nsurl

我们正在尝试在我们的应用程序中添加功能，以允许它向我们的 Web 服务发布一个大约 50kb 的大文件，该文件本身是一个 HTML 模板，但是使用下面的代码，我们发现数据似乎被切断了当 Web 服务保存它时。

Web 服务当前旨在检查 $_POST['html'] 变量并将其写入文件。

有没有更好的方法来做到这一点，有没有人知道为什么上传不完整？

谢谢亚伦

```
 NSString *myText;
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"template" ofType:@"htm"];  
    if (filePath) {  
        myText = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil]; 
    } 

    NSURL *URL = [NSURL URLWithString:@"http://mywebsiteurl.com/receiveData.php"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];
    request.HTTPMethod = @"POST";
    NSString *params = [NSString stringWithFormat:@"html=%@", myText];

    NSData *data = [params dataUsingEncoding:NSASCIIStringEncoding];
    [request addValue:@"8bit" forHTTPHeaderField:@"Content-Transfer-Encoding"];
    [request addValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request addValue:[NSString stringWithFormat:@"%i", [data length]] forHTTPHeaderField:@"Content-Length"];    
    [NSURLConnection connectionWithRequest:[request autorelease] delegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:17:27.907

我认为这是因为您的服务器设置了发布限制。请检查服务器端有关发布数据限制的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:55:35.403

当我重新检查这个问题时，我想也许我发现了问题所在。当我做 HTTP post 时，我通常不会`content-length`自己设置。我只是将我的帖子数据编码为`key=value&..`表单并使用该`[NSMutableURLRequest setHTTPBody:data]`方法将数据添加到`NSMutableURLRequest`. 我认为它会为您完成剩下的工作，包括为您设置内容长度。尽管我对 HTTP 协议不是很熟悉，但我认为它可能`content-length`代表了整个 post 数据长度，但这里你将值设置`content-length`为键值数据长度的长度。

# iphone - ios中模态视图的过渡

> ID：12951898
> 
> 赞同：0
> 
> 时间：2012-10-18T09:55:08.233
> 
> 标签：iphone, objective-c, ios, ios5, model-view

iOS 中的模态视图从屏幕底部到顶部出现，从屏幕顶部到底部消失。我想知道，有什么方法可以恢复上面的内容并使模型视图从屏幕顶部显示到屏幕底部。因此，当它被关闭时，它将从下到上进行动画处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:05:33.470

是的，为什么不我想我可以为您提供一种解决方法:) .... 首先进行自定义`UIView`并将其坐标设置为

```
View.frame=CGRectMake(0, 0, 320, 0); 
```

然后使用动画将其从上到下移动，反之亦然，如下所示：-

为了使它出现，请使用以下代码：-

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:0.25];
View.frame = CGRectMake(0, 0, 320, 460);
[UIView commitAnimations]; 
```

对于解雇它使用： -

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:0.25];
View.frame = CGRectMake(0, 0, 320, 0);
[UIView commitAnimations]; 
```

# php - 获取异常的“友好”错误消息

> ID：12951899
> 
> 赞同：3
> 
> 时间：2012-10-18T09:55:14.173
> 
> 标签：php, exception

我正在尝试连接到数据库，如果有任何问题，我会抛出异常：

```
class Ex_cnt extends Exception{}
class Ex_slct extends Exception{}
$server = "localhost";
$usr = "root";
$pss = "*******";
$db = "learn";
try{
        $cnt = mysqli_connect($server,$usr,$pss);
        if(!$cnt){
            throw new Ex_cnt("wrong in database details");
        }
        $dbslct = mysql_select_db($db);
        if(!$dbslct){
            throw new Ex_slct("wrong database name");
        } 
}
catch(Ex_cnt $error_cnt){
        echo $error_cnt->getMessage();
}
catch(Ex_slct $error_slct){
        echo $error_slct->getMessage();
} 
```

问题是此代码显示以下错误

> 警告：mysqli_connect() [function.mysqli-connect]: (28000/1045): D:\xampp\htdocs\learn\index.php 中用户 'root'@'localhost' 的访问被拒绝（使用密码：YES） 10号线无法连接

我希望它只是显示

> 无法连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:58:49.413

您应该关闭`display_errors`生产环境。

```
ini_set('display_errors', 0);  
error_reporting(E_ALL); // While error reporting should remain at full force 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T09:56:51.517

尝试并使用：

```
$cnt = @mysqli_connect($server,$usr,$pss); 
```

# mysql - MySQL #1054 未知列

> ID：12951903
> 
> 赞同：3
> 
> 时间：2012-10-18T09:55:30.180
> 
> 标签：mysql, phpmyadmin, mysql-error-1054

运行下面的查询时，我最终在 PHPMyAdmin 中出现 MYSQL 错误：

```
#1054 - '有子句'中的未知列'wd.Datum'
```

此查询属于时间报告应用程序，用户在该应用程序中报告每天在项目上工作的时间。有一个表示预计工作日天数的表格、一个包含所有员工的表格和一个包含有关当前工作率信息的表格。最后一个表也用于确定用户何时被雇用。这个想法是获取所有工作日和所有用户，以便（在以后的查询中）选择用户忘记报告时间的日期。我想将结果集限制为用户受雇的天数。这是我的查询：

```
SELECT emp.ID AS user
FROM (workdays wd, employees emp)
     INNER JOIN workrates wr ON (emp.ID=wr.UserId)
WHERE (wd.Datum<'2012-11-15')
GROUP BY WEEK(wd.Datum, 3), user
HAVING wd.Datum>=MIN(wr.FromDate) 
```

（可能与[http://bugs.mysql.com/bug.php?id=13551](http://bugs.mysql.com/bug.php?id=13551)有关，这是关于 MySQL 版本 5 中引入的语法更改，如果您忘记某些括号，则会导致此消息）

MySQL 服务器在 Debian 上运行版本“5.1.63-0+squeeze1”。

**编辑**：我将第一个查询行更改为

```
选择 emp.ID 作为用户，wd.Datum
```

正如 Vijay 所建议的那样，查询有效！虽然我不明白为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:37:03.157

您在查询子句中使用的每一列都`HAVING`必须出现在选定的列中。`HAVING`适用于计算值（例如，如果您使用该函数，则可以在子句`SUM()`中使用计算的总和。）`HAVING`

另请注意，如果为列指定别名，则必须在`HAVING`子句中使用别名。

有关隐藏列的更多信息和`HAVING`：[http ://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:00:01.957

尝试在您的选择中使用 wd.Datum。

它在sql中很常见，如果您在have子句中使用列，则必须在select中添加该列。发生的情况就像它将创建一个包含您选择的列的虚拟表，并使用 having 子句中的条件进行过滤。

--- 如果它真的回答了您的问题，则将其设为已回答。

# android-layout - 如何创建相同大小列的表格布局

> ID：12951904
> 
> 赞同：1
> 
> 时间：2012-10-18T09:55:33.317
> 
> 标签：android-layout

我是安卓新手。我想创建一个布局，具有**线性布局->**由**两个文本视图组成-->**比**表格视图。** **表格视图 -> 两列****大小相等**。 **1**st 列有 **大量数据****。所以它应该是自动**换行和垂直滚动**。 **2*** ***nd 列包含一个 **image**。

我该怎么做。正如**我所尝试**的，但我**无法**创建**2 列大小相等**，第 1 列具有垂直滚动条...

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:53:57.943

将该属性用作：

```
android:streachColumn="*"; 
```

和

```
android:weight="*"; 
```

财产。这将对您有所帮助。

# sql - SQL语句的结构不正确？

> ID：12951907
> 
> 赞同：-1
> 
> 时间：2012-10-18T09:55:52.657
> 
> 标签：sql, oracle

我有一个有 4 张桌子的数据库：预订、酒店、客人和房间。我试图让我的 SQL 语句（在 Oracle 中）生成每家酒店的平均房价。这是我目前拥有的：

```
SELECT HOTEL.H_NAME "HOTEL NAME", ROUND(AVG (R_PRICE), 1) "AVERAGE ROOM PRICE"
FROM ROOM, HOTEL
WHERE HOTEL.H_NAME = 'Shangra_La'
OR HOTEL.H_NAME = 'Hilton'
OR HOTEL.H_NAME = 'Sheraton'
GROUP BY HOTEL.H_NAME
ORDER BY HOTEL.H_NAME; 
```

根据我的想法，该语句将选择“Shangra_la”、“Hilton”和“Sheraton”中所有房间的酒店名称和平均价格，并按酒店名称排序，但是当我这样做时，我得到了每个酒店的平均值相同，这是错误的。这是我的输出：

```
H_NAME      AVG. R_PRICE
Hilton      253.5
Shangra_La  253.5
Sheraton    253.5 
```

以下是 ROOM 的表格数据：

```
insert into room values
('1','H100','S',220.00);
insert into room values
('2','H100','D',230.00);
insert into room values
('3','H100','F',310.00);
insert into room values
('1','H200','S',260.00);
insert into room values
('2','H200','D',170.00);
insert into room values
('3','H200','S',250.00);
insert into room values
('4','H200','F',180.00);
insert into room values
('5','H200','F',295.00);
insert into room values
('1','H300','D',200.00);
insert into room values
('2','H300','S',420.00); 
```

和酒店：

```
insert into hotel values
('H100','Sheraton','Melbourne');
insert into hotel values
('H200','Shangra_La','Sydney');
insert into hotel values
('H300','Hilton', 'Perth'); 
```

我的陈述结构是否不正确？我可以做些什么来解决这个问题？希望我提供了足够的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:58:59.493

您需要将 2 个表连接在一起：

```
SELECT HOTEL.H_NAME "HOTEL NAME", ROUND(AVG (R_PRICE), 1) "AVERAGE ROOM PRICE"
FROM ROOM, HOTEL
WHERE HOTEL.H_NAME = 'Shangra_La'
OR HOTEL.H_NAME = 'Hilton'
OR HOTEL.H_NAME = 'Sheraton'
AND HOTEL.R_NUM = ROOM.R_NUM -- Here (guessing at your column names)
GROUP BY HOTEL.H_NAME
ORDER BY HOTEL.H_NAME; 
```

编辑：

```
SELECT H.H_NAME "HOTEL NAME", ROUND(AVG (R.R_PRICE), 1) "AVERAGE ROOM PRICE"
FROM ROOM R INNER JOIN HOTEL H ON R.HOTEL_NO = H.HOTEL_NO
WHERE H.H_NAME = 'Shangra_La'
OR H.H_NAME = 'Hilton'
OR H.H_NAME = 'Sheraton'
GROUP BY H.H_NAME
ORDER BY H.H_NAME; 
```

否则，您看到的平均数字将是所有房间和价格的笛卡尔平均值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:59:46.697

您没有连接条件，因此它采用`room`和的叉积`hotel`。

```
SELECT HOTEL.H_NAME "HOTEL NAME", ROUND(AVG (R_PRICE), 1) "AVERAGE ROOM PRICE"
FROM ROOM JOIN HOTEL ON HOTEL.HOTEL_NO = ROOM.HOTEL_NO
WHERE HOTEL.H_NAME = 'Shangra_La'
OR HOTEL.H_NAME = 'Hilton'
OR HOTEL.H_NAME = 'Sheraton'
GROUP BY HOTEL.H_NAME
ORDER BY HOTEL.H_NAME; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:01:11.770

我还没有测试过，但你的第一行应该是这样的：

```
HOTEL.H_NAME "HOTEL NAME", ROUND(AVG (HOTEL.R_PRICE), 1) 
```

我认为您是在对所有价格进行平均，而不是 *针对特定酒店的*价格 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:01:48.710

该查询缺少一个重要信息： 和 之间的`hotel`链接`room`。数据库不知道那`H100`是一家酒店；你必须告诉。这称为“加入”（因为您以某种方式加入两组）。

添加`AND ROOM.R_HOTEL_ID = HOTEL.H_ID`到`WHERE`子句（您必须使用正确的列名，但您明白了）。

# android - 在 android 上使用 SoX

> ID：12951908
> 
> 赞同：1
> 
> 时间：2012-10-18T09:55:57.573
> 
> 标签：android, effects, flow, sox

我在android上使用SoX。但是当运行该方法时它无法继续。有人可以帮助我吗？

```
/* Flow samples through the effects processing chain until EOF is reached */
sox_flow_effects(chain, NULL, NULL); 
```

运行该方法时，它是停止。

# regex - 匹配除某些字符串之外的所有字符串的 Javacc 正则表达式

> ID：12951909
> 
> 赞同：2
> 
> 时间：2012-10-18T09:55:59.417
> 
> 标签：regex, javacc

**什么是匹配任何东西**的正则表达式，除了这些字符串： `=>`, `|`?

如果您熟悉 javacc，我正在尝试定义我的`ANYTHING`令牌，如下所示：

```
TOKEN :
{
 <ARROW: "=>" >
|
 <ANYTHING: (["\u0001" - "\uffdc"])+>
|
 <PIPE: "|">
|
 <UPPER_CHAR: (["A"-"Z"])>
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:30:36.907

尝试这样的事情：

## 测试.jj

```
options {
    STATIC = false ;
}

PARSER_BEGIN(Test)
public class Test {
  public static void main(String[] args) throws Exception {
    Test parser = new Test(new java.io.StringReader("foo=>bar=baz|done"));
    parser.Parse();
  }
}
PARSER_END(Test)

TOKEN :
{
     < ARROW    : "=>" >
  |  < PIPE     : "|" >
  |  < ANYTHING : (~["=", "|"] | "=" ~[">"])+ >
}

void Parse() : 
{} 
{
  (Any())* <EOF>
}

void Any() :
{Token t;}
{
  ( t=<ARROW>    {System.out.println("ARROW    = '" + t.image + "'");}
  | t=<PIPE>     {System.out.println("PIPE     = '" + t.image + "'");}
  | t=<ANYTHING> {System.out.println("ANYTHING = '" + t.image + "'");}
  )  
} 
```

生成解析器类：

```
javacc 测试.jj
```

并运行该`main`方法：

```
java测试
```

将为输入打印以下内容`"foo=>bar=baz|done"`：

```
任何东西='foo'
箭头 = '=>'
任何东西='bar=baz'
管道 = '|'
任何东西='完成'
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:03:12.517

你可能最好使用词法状态。这是一个可能有效的 RE 解决方案

```
 ("=")+    |     ( ~["=","|"]  |  ("=")* ~["=","|",">"] )+  ("=")* 
```

顺便说一句，我稍微改变了问题，以便空字符串不是“任何东西”，所以这个 re 应该匹配任何非空且不包含任何“|”或任何“=>”的字符串。

# javascript - 如何在 xpages 的 ssjs 中包含客户端 JavaScript

> ID：12951911
> 
> 赞同：3
> 
> 时间：2012-10-18T09:56:02.337
> 
> 标签：javascript, xpages, xpages-ssjs

我想将来自客户端 JavaScript (csjs) 的一些结果包含在 XPages 中的服务器端 JavaScript (ssjs) 中。

例如，在 csjs 上，我通过 window.screen.availWidth 收集设备的屏幕宽度

我想在我的 ssjs 中进一步使用结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:02:20.520

您需要将屏幕宽度和高度从客户端脚本发送到服务器脚本。

使用 QueryString (location.href=...../?open&width=xxxx&height=yyyyy)，在您的 xpage 上设置一个字段并设置为部分刷新或使用 extlib 远程服务。

可能还有其他几种方法可以做到这一点;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:09:57.743

另一种方法可能是，您可以将 CSJS 计算的结果放在隐藏的输入字段中，然后在 SSJS 代码中获取这些值。

您也可以[在 StackOverflow 中查看此讨论以](https://stackoverflow.com/questions/9769674/how-do-i-call-an-ssjs-method-with-parameters-from-javascript)获取更多想法。它基本上使用部分刷新并将来自 CSJS 的值作为参数传递。

`XSP.partialRefreshPost('#{id:_element_to_refresh_}', {params: p});`

然后，您可以在 SSJS 代码中访问这些参数。

我会重复 Fredrik，“可能还有其他几种方法可以做到这一点”;-)

# ios - 加载大型 UIImage 时如何改善用户体验？

> ID：12951915
> 
> 赞同：0
> 
> 时间：2012-10-18T09:56:10.800
> 
> 标签：ios, ipad, cocoa-touch, uiview, uiviewcontroller

我使用一张大图片（2000x2000，500kb）作为我 iPad 应用程序中大多数视图控制器的背景图像。

问题是应用程序似乎在第一次使用这样的图像加载子 ViewController 时冻结在父 ViewController 上（后来由于缓存我假设它更快）。

我会在一个单独的线程中加载它，并在加载时显示一些指示器，但是我知道所有与 UI 相关的操作都应该在主线程上完成。

有没有办法可以改善用户体验，所以应用程序似乎不会冻结大约。2秒？（在我的情况下，平铺图像不是一种选择）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:06:32.997

UIKit 的所有操作都应该在主线程上完成是错误的！只有绘制的操作应该在主线程上执行。在单独的线程中加载 UIImage 并在此之后将其交给主线程是完全节省的。但是我不认为加载需要那么长时间。我认为这可能是需要时间的绘图。

但是：由于 a`UIActivityIndicatorView`在它自己的线程中运行（与所有 CoreAnimation 动画一样），它会保持动画，即使在添加指示器后阻塞主线程也是如此。尝试这个：

```
UIActivityIndicatorView* activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
[activityIndicator startAnimating];
[self addSubview:activityIndicator];

dispatch_async(dispatch_get_main_queue(), ^{
    UIImage* image = [UIImage imageNamed:@"MyImage"];
    UIImageView* imageView = [[UIImageView alloc] initWithImage:image];
    [self addSubview:imageView];

    [activityIndicator removeFromSuperview];
}); 
```

这将启动`UIActivityIndicator`并开始在下一个运行循环循环中加载图像。添加图像后，它会删除超级视图。也许您必须再次调度活动指示器的移除，以便 UIKit 有时间绘制图像。在这种情况下，但`[activityIndicator removeFromSuperview]`在另一个`dispatch_async`到主队列的第一个块内。

# jquery - 获取以前的 LI 条件

> ID：12951919
> 
> 赞同：1
> 
> 时间：2012-10-18T09:56:19.977
> 
> 标签：jquery

我无法理解这一点。似乎很容易。

```
<ul class="steps anchor">
<li><a href="#step-1" class="done" isdone="1" rel="1"><label class="stepNumber">1</label></a></li>
<li><a href="#step-2" class="disabled" isdone="0" rel="2"><label class="stepNumber">2</label></a></li>
<li><a href="#step-3" class="selected" isdone="1" rel="3"><label class="stepNumber">3</label></a></li>
<li><a href="#step-4" class="disabled" isdone="0" rel="4"><label class="stepNumber">4</label></a></li>
</ul> 
```

我想要什么：我想选择当前的 Li (class="selected") (=3) 然后想获得前一个 LI 的 rel，它的 class="done"。

> $('ul.steps li a.selected').prev('li').hasClass('done').html()

我被困在这种想法中。也许有人可以在正确的方向上帮助我？谢谢

编辑：我用 class="done" 说 Li。但这必须是：我想要什么：我想选择当前的 a (class="selected") (=3) 然后想要获得前一个具有 class="done" 的 a 的 rel。

编辑2：

> ```
> <ul class="steps anchor">
> <li><a href="#step-1" class="done" isdone="1" rel="1"><label class="stepNumber">1</label></a></li>
> <li><a href="#step-2" class="done" isdone="1" rel="2"><label class="stepNumber">2</label></a></li>
> <li><a href="#step-3" class="done" isdone="1" rel="3"><label class="stepNumber">3</label></a></li>
> <li><a href="#step-4" class="disabled" isdone="0" rel="4"><label class="stepNumber">4</label></a></li>
> <li><a href="#step-5" class="disabled" isdone="0" rel="5"><label class="stepNumber">5</label></a></li>
> <li><a href="#step-6" class="selected" isdone="1" rel="6"><label class="stepNumber">6</label></a></li>
> </ul> 
> ```

我已经更新了我的 Li 结构。现在假设我在 LI 6。我想用 [class='done'] 转到上一个 LI。所以一个[rel = 3]。您的 anwsers 总是返回第一个 LI (1)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:04:49.213

如果你想以*效率不高*的方式选择元素，你可以使用`prevAll`all 方法：

```
$('a.selected').parent().prevAll('li:has("a.done")').find('a').attr('rel'); 
```

[http://jsfiddle.net/pn72t/](http://jsfiddle.net/pn72t/)

或者：

```
$('a.selected').closest('ul').find("a.done:first").attr('rel') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:06:20.993

```
$('ul.steps li a.selected').closest("ul").find("a.done").attr('rel') 
```

在这里看小提琴：http: [//jsfiddle.net/CnkNX/1/](http://jsfiddle.net/CnkNX/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:59:14.100

您可以使用`get`方法从“a.done”中检索任何元素

```
 $($('a.selected').closest('ul').find("li a.done").get(0)).attr('rel') 
```

jsfiddle：http: [//jsfiddle.net/gpznn/2/](http://jsfiddle.net/gpznn/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T10:08:26.230

你可以这样做：

```
$('ul.steps li a.selected').closest('ul').find("li a.done:first").attr('rel') 
```

**小提琴：http :** [//jsfiddle.net/zwLaG/1/](http://jsfiddle.net/zwLaG/1/)

# android - onNmeaReceived 的任何替代方案？

> ID：12951920
> 
> 赞同：2
> 
> 时间：2012-10-18T09:56:26.280
> 
> 标签：android, nmea

我编写了一个使用 NMEA 数据的应用程序，由 NmeaListener 提供。此应用程序可在以下设备上完美运行：

*   华硕 Nexus 7，安卓 4.1.1
*   三星 Nexus S，安卓 4.1.2
*   索尼爱立信 Xperia Mini，Android 2.3.4
*   索尼爱立信 Xperia X10 Mini，Android 2.1.1

在所有这些设备上，调用 onNmeaReceived() 没有问题。

但在低成本设备上

*   华为/沃达丰 858，安卓 2.2.2

onNmeaReceived() 根本没有被调用。至少 onLocationChanged() 在所有设备上被调用，包括华为。但我不需要位置，我需要 NMEA 数据。

那么，我能做些什么呢？

在此先感谢您的帮助！

```
public class Main extends Activity implements NmeaListener, LocationListener {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LocationManager location = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    location.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1l, 1l, this);
    location.addNmeaListener(this);
}

@Override
public void onNmeaReceived(long timestamp, String nmea) {
}

@Override
public void onLocationChanged(Location arg0) {
}

@Override
public void onProviderDisabled(String arg0) {
}

@Override
public void onProviderEnabled(String arg0) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:37:08.180

如果您查看此线程，这似乎是一个已知问题：

[问题 7321：NmeaListener 不接收 nmea 语句](http://code.google.com/p/android/issues/detail?id=7321)

如果这对您有影响，那么除了从位置更新生成假 NMEA 之外，可能没有其他解决方案，至少在受影响的手机上是这样。

[编辑]

从您的评论看来，您似乎认为您需要 NmeaListener 来显示信号强度和卫星等信息，但我认为您可以在没有 NmeaListener 的情况下执行此操作，只需查看以下答案：

[如何在 Android 上测量 GPS 信号强度？](https://stackoverflow.com/questions/3551697/how-to-measure-gps-signal-strength-on-android)

# mysql - SQL 创建表中的语法错误

> ID：12951921
> 
> 赞同：0
> 
> 时间：2012-10-18T09:56:26.793
> 
> 标签：mysql, sql

嗨，我正在尝试更熟悉 SQL，并且我正在使用 MySql 来测试我的 SQL 查询。我似乎在这个语句中遇到了一个 sintax 错误：

```
CREATE TABLE dog
(
  id int(11) NOT NULL auto_increment,
  name varchar(255),
  descr text,
  size enum('small','medium','large'),
  date timestamp(14),
  PRIMARY KEY (id)
)ENGINE = InnoDB; 
```

**错误：**

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 7 行的 '(14), PRIMARY KEY (id) )ENGINE = InnoDB' 附近使用正确的语法

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:04:03.440

尝试这样提及

```
CREATE TABLE dog

(
  id int NOT NULL auto_increment,
  name varchar(255),
  descr text,
  size enum('small','medium','large'),
  date timestamp,
  PRIMARY KEY (id)
)
ENGINE = InnoDB; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:00:05.293

' `TIMESTAMP(14)`' 已弃用；改用' `TIMESTAMP`'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:08:11.287

试试这个 ：

```
CREATE TABLE dog

(
  id int NOT NULL auto_increment PRIMARY KEY,
  name varchar(255),
  descr text,
  size enum('small','medium','large'),
  date timestamp
)
ENGINE = InnoDB; 
```

PRIMARY KEY 语句必须与字段声明一起精确

# xml - E4X 中的语法错误

> ID：12951922
> 
> 赞同：1
> 
> 时间：2012-10-18T09:56:33.393
> 
> 标签：xml, actionscript-3, flash, e4x

我正在做一个 Flash 项目，在其中我试图从这个 xml 树中检索信息，使用 for 循环：

```
<game playGame="true" name="peopleNames" id="1">
      <category publish="pubTrue" categoryName="guys" categoryNumber="1">
        <word wordName="ross"/>
        <word wordName="chandler"/>
        <word wordName="joey"/>
      </category>
    <category publish="pubTrue" categoryName="girls" categoryNumber="2">
        <word wordName="rachel"/>
        <word wordName="monica"/>
        <word wordName="phoebe"/>
    </category>
</game> 
```

我写了这个查询来检索数据：

```
var insQuery4b:String = xmlData.game.(@id=='1').category.(@categoryNumber=='1').(@publish=='pubTrue').word.@wordName[0]; 
```

但我想在循环中使用它，所以对于这个查询中的数字 (1, 0)，我将使用循环的索引（例如 i）。我写了不同版本的查询，其中之一是：

```
var i:Number = 2;
var insQuery4a:String = xmlData.game.((@id=="'") + i + ("'")).category.((@categoryNumber=="'") + i + ("'")).(@publish=='pubTrue').word.@wordName[0]; 
```

但它们都不起作用......对查询语法有任何建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:36:23.697

首先`xml`总是从根节点开始，所以这里你不必包含**游戏**节点，你只需要做`xmlData.(@id=='1')`...

所以第一个查询是：

```
var insQuery4b:String = xmlData.(@id=='1').category.(@categoryNumber=='1').(@publish=='pubTrue').word.@wordName[0]; 
```

对于第二个查询，您不必在变量 i 周围添加引号，您希望将其转换`i`为`String`用于比较的`toString`函数。此外，如果`i`是`int`使用`int`类型而不是`Number` 您的第二个示例可能是：

```
var i:int = 2;
var insQuery4a:String = xmlData.(@id==i.toString()).category.(@categoryNumber==i.toString()).(@publish=='pubTrue').word.@wordName[0]; 
```

现场示例： [http ://wonderfl.net/c/ltN2](http://wonderfl.net/c/ltN2)

PS 它也可以在不强制转换为 String 的情况下工作，因为玩家会隐式执行此操作，但制作显式转换类型很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:37:32.210

语法比这更容易，你不需要搞乱那些花哨的引号......只需使用：

```
var i:uint = 2;
var insQuery4b:String = xmlData.(@id==1).category.(@categoryNumber==i).(@publish=='pubTrue').word.@wordName[0];

trace(insQuery4b);
//output: rachel

//the loop (for example)
var l:uint = xmlData.(@id==1).category.length();

for(i=1; i<=l ;i++)
    trace(xmlData.(@id==1).category.(@categoryNumber==i).(@publish=='pubTrue').word.@wordName[0]);

//ouput: 
//ross
///rachel 
```

编辑：

Patrick 是对的，您不需要将`game`节点与您展示给我们的 XML 数据一起使用。通常 XML 数据有一个父节点`<xml>`，像这样：

```
<xml>
  <game ... >
     rest of XML tree here
  </game>
</xml> 
```

在这种情况下，您需要`xmlData.game`跳转到游戏节点。

# windows-phone-7 - 此硬件是否适用于 Android 模拟器和 Windows Phone 7 模拟器

> ID：12951923
> 
> 赞同：-1
> 
> 时间：2012-10-18T09:56:36.467
> 
> 标签：windows-phone-7, android-emulator

这是一个硬件问题，但来自 PC 论坛的孩子不会知道答案。

这次我有不同的问题。我需要购买一台支持 Windows Phone Emulator（需要 DirectX11 或 10）和虚拟 Windows（vmWare）的计算机。这个真的很便宜，大约 380 美元，但我担心它能否很好地处理 Android 和 Windows Phone 模拟器。

LCD - 15.6" AMD E E300 (1.3 GHz, 1MB) RAM - 4 GB HDD - 320 GB AMD Radeon HD 6310M [http://www.komputronik.pl/index.php/product/171620/Komputery/Laptopy_i_netbooki/Toshiba_Satellite_C660D_1H2.html](http://www.komputronik.pl/index.php/product/171620/Komputery/Laptopy_i_netbooki/Toshiba_Satellite_C660D_1H2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:10:18.167

**WindowsPhone 7**有 WP 512 和 WP 256 两种类型。WP
512 意味着它以 512MB 或 ram 运行，WP7 256 相同。WP
模拟器占用更多内存，但在我的 PC 上运行非常流畅。
WP-512 高达 1 Gb，WP-256 仿真器高达 600MB

**Android**在我的电脑上运行非常缓慢，需要几分钟才能启动。它需要大约 350MB 的内存，但必须消耗 CPU 周期。

**我的电脑配置是：
Windows 7 Professional - 32 位
Intel i3 @ 3.07GHz 处理器和 4MB 缓存
板载显卡
4GB RAM
500GB HDD**

# javascript - 如何使用 jQuery 单击链接

> ID：12951924
> 
> 赞同：0
> 
> 时间：2012-10-18T09:56:41.007
> 
> 标签：javascript, jquery, click

如果要使用 jQuery 单击链接，可以使用以下方法之一：

```
$('a').click();

$('a').trigger('click'); 
```

哪个更好？（性能，浏览器支持，即）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:59:32.377

似乎没有，性能明智。

请参阅：http: [//forum.jquery.com/topic/a-trigger-click-vs-a-click](http://forum.jquery.com/topic/a-trigger-click-vs-a-click)

> 此方法是第一个变体中 .bind('click', handler) 和第二个变体中 .trigger('click') 的快捷方式。

除非您可以扩展触发命令。

* * *

好像我弄错了。

由于点击实际上是调用触发器，如果​​没有调用函数。请参阅：[.trigger() 与 .click() 中的 jQuery 优势/差异](https://stackoverflow.com/questions/9666471/jquery-advantages-differences-in-trigger-vs-click)

对于性能结果，@VisioN 链接到此：http: [//jsperf.com/click-vs-trigger-click](http://jsperf.com/click-vs-trigger-click)

所以，基本上使用触发器是最快的方法，我认为它实际上告诉你在做什么，而不是仅仅做它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:59:08.810

[http://forum.jquery.com/topic/a-trigger-click-vs-a-click](http://forum.jquery.com/topic/a-trigger-click-vs-a-click)

> 在这种形式下，它们是相同的。正如 api 参考所述：
> 
> 这种方法是`.bind('click', handler)`第一种变体和`.trigger('click')`第二种变体的捷径。
> 
> 第二个也可用于将函数附加到事件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-18T10:01:03.667

完全相同的。但我更喜欢 $('a').bind('click', function(){});

# java - Java DatagramSocket 在初始化时冻结

> ID：12951925
> 
> 赞同：2
> 
> 时间：2012-10-18T09:56:43.113
> 
> 标签：java, sockets, udp

我正在编写一个 UDP 网络程序（客户端 - 服务器），我遇到了一些麻烦。

我想对 I/O 数据使用流，所以我用谷歌搜索“udp inputstream”并找到[UDPInputStream](http://www.java2s.com/Code/Java/Network-Protocol/UDPInputStream.htm)和[UDPOutputStream](http://www.java2s.com/Code/Java/Network-Protocol/UDPOutputStream.htm)。但是，当我尝试使用这些时，程序在尝试初始化 UDPOutputStream 时卡住了。

这是我的代码中冻结的行：

```
outStream = new UDPOutputStream(InetAddress.getByName("127.0.0.1"), port);
System.out.println("UDP output stream initialized."); // <-- doesn't get called 
```

我检查了 UDPOutputStream 的来源，代码卡在这一行：

```
dsock = new DatagramSocket(); 
```

为什么执行会挂在这条线上？在服务器端，我仍然使用我的“旧”、非流版本的简单 UDP 代码，它可以工作。套接字以相同的方式初始化并且它不会挂断。我试图在初始化时输入一个端口号，但它并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:34:20.240

主机有多个网络接口（例如，127.0.0.1 用于环回接口，其他地址用于网卡；可能有多个网卡）。

如果您绑定到环回地址*127.0.0.1*，那么您将只能接收本地发送的数据包。如果要接收从远程机器通过网络发送的数据包，您必须绑定到本地 IP 地址（例如 192.168.1.100）。

尝试以下操作：

```
InetAddress addr = InetAddress.InetAddress.getLocalHost();
outStream = new UDPOutputStream(addr, port); 
```

# sql-server-2005 - 从 SQL Server 2005 中的单个查询中按总计和按详细信息获取月度记录

> ID：12951931
> 
> 赞同：0
> 
> 时间：2012-10-18T09:56:48.980
> 
> 标签：sql-server-2005, subquery

我正在使用 SQL Server 2005。

我想在单个结果中获取`monthlyTotalAppoinment`和`monthlyEmployeewiseTotal`从表中获取。`appointment`

**预约表**

```
appoinmentId
appoinmentDate
employeeId 
```

我可以成功获取`monthlyTotalAppoinment`并`employeewisetotaappoinment`从以下查询中获取，但我想要每月`employeewiseappoinment`.

```
SELECT * 
  FROM (SELECT Datename(M, Dateadd(M, NUMBER - 1, 0)) AS month 
          FROM MASTER..SPT_VALUES 
         WHERE TYPE = 'p' 
               AND NUMBER BETWEEN 1 AND 12) months 
       LEFT JOIN (SELECT Datename(MM, APPOINMENTDATE) month, 
                         Count(APPOINMENTID)          AS TotalAppointment 
                    FROM APPOINTMENT 
                   GROUP BY Datename(MM, APPOINMENTDATE)) appoinment 
              ON months.MONTH = appoinment.MONTH 
```

我得到以下输出。

![在此处输入图像描述](../Images/83ceea2725d8beb5958dde042e781c19.png)

但我想要以下输出

![在此处输入图像描述](../Images/6c3b3cbb45fbba08c5185999b6f151ae.png)

```
 appoinementId   employeeId   appoinemntDate  
   -------------  -----------   ---------------
    1                 4         8/25/2012 12:00:00 AM
    2                 4         8/25/2012 12:00:00 AM
    3                 4         8/25/2012 12:00:00 AM
    4                 4         8/25/2012 12:00:00 AM
    5                 4         8/25/2012 12:00:00 AM
    6                 4         9/25/2012 12:00:00 AM
    7                 2         9/25/2012 12:00:00 AM
    8                 2         9/25/2012 12:00:00 AM
    9                 2         9/25/2012 12:00:00 AM
    10                4         9/25/2012 12:00:00 AM
    11                4         10/25/2012 12:00:00 AM
    12                2         10/25/2012 12:00:00 AM
    13                4         10/25/2012 12:00:00 AM 
```

对于上述数据cuming输出（对于EmployeeId 4）

```
 Month           MonthData   Totalappoinemnt TotalEmployeewiseAppointmemt  
   -------------  -----------   -------------- ------------------------------
     January..      NULL..       NULL..          NULL..
     Augest         Augest         5             9
     September      September      5             9
     October        October        3             9 
```

但我想关注

```
 Month           MonthData   Totalappoinemnt TotalEmployeewiseAppointmemt  
   -------------  -----------   -------------- ------------------------------
    January..      NULL..       NULL..          NULL..
     Augest         Augest         5             5
     September      September      5             2
     October        October        3             2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:34:21.737

我在您的问题中遗漏了一些小问题，但在此查询中处理了大问题：

```
SELECT t1.*, 
       t2.EMP_COUNT 
  FROM (SELECT Datename(MONTH, APPOINEMNTDATE) Month_Name, 
               Count(*)                        app_count 
          FROM APPOINTMENTTABLE 
         GROUP BY Datename(MONTH, APPOINEMNTDATE))T1 
       LEFT JOIN (SELECT Count(*)                        emp_count, 
                         Datename(MONTH, APPOINEMNTDATE) Month_Name 
                    FROM APPOINTMENTTABLE 
                   WHERE EMPLOYEEID = 4 
                   GROUP BY Datename(MONTH, APPOINEMNTDATE))T2 
              ON t1.MONTH_NAME = t2.MONTH_NAME 
```

可以在[此处](http://sqlfiddle.com/#!3/a459f/15)找到一个工作示例。

什么不见​​了？

1.  无法弄清楚为什么几个月有 2 列。如果有这个原因，我会修改代码。
2.  我只列出了提供详细信息的月份。我看到一月也在这个例子中。如果您希望即使没有可用数据也能显示所有 12 个月，请告诉我，我们会添加它。
3.  没有使用完全相同的列名。如果需要，我相信您可以更改它们:-)

# jquery - 带有 jquery 的简单 AJAX

> ID：12951935
> 
> 赞同：0
> 
> 时间：2012-10-18T09:56:54.847
> 
> 标签：jquery, ajax, servlets

我需要做一些相当简单的事情：

我有一个 servlet，它获取请求，然后联系数据库，从中获取信息并将其显示为 HTML 表（到目前为止，所有这些都运行良好）。这是 servlet 中的命令：

```
RequestDispatcher requestDispatcher = req.getRequestDispatcher("index.jsp");
requestDispatcher.forward(req, resp); 
```

index.jsp 是我编写 HTML 和 javascript 来显示数据的地方。

现在，我需要通过 AJAX 每隔 30 秒左右刷新一次数据，这样我就不会重新加载整个页面。另外，我应该在整个操作中使用 jquery。

最简单的方法是什么？我一直在网站上查看一些示例，但我没有设法让它们工作，所以我发布了我自己的问题。我不需要它花哨，我只希望它显示我的表并每 30 秒刷新一次其中的数据（以防有人同时在数据库中放入一些新数据）......

谢谢你们！:)

编辑：

这是整个代码：

```
public class IndexServlet extends HttpServlet {

    MoodService moodService;

    public IndexServlet() {
        moodService = new MoodService();
    }

    /**
     * Accepts the request and sends it to the dispatcher which takes the database data and presents it as HTML
     */
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        List<Mood> moodList = moodService.findLastMoods(25); //my way of getting data from database

        req.setAttribute("moodList", moodList);

        RequestDispatcher requestDispatcher =req.getRequestDispatcher("index.jsp");
        requestDispatcher.forward(req, resp);

    }

} 
```

和 index.jsp：

```
<html>

<head>
    <title>Previous 25 entries:</title>
    <style type="text/css">
        #container {width:1200px; margin-left:auto; margin-right: auto;}
        #tableheader {width:900px; text-align: center;}
     .field {text-align:center; width:300px;}
    </style>

</head>

<body style="background-color: black;">
<div id="container">

    <table border="1" bordercolor="#FFCC00"  width="900" height="80" cellpadding="3" cellspacing="3" style="border-top-left-radius: 15px; border-top-right-radius: 15px; text-align: center; margin-left:auto; margin-right: auto; background-color:#FFFFCC; font-size: 33px; font-family: Monotype Corsiva ">

        <tr>
            <td style="border-top-left-radius: 10px; border-top-right-radius: 10px;">PREVIOUS 25 ENTRIES:</td>
        </tr>

    </table>

    <%
        List<Mood> moodList = (List<Mood>) request.getAttribute("moodList");
        for (Mood mood : moodList) {

            Integer a = mood.getMoodId();
            String moodId = new String();

            switch (a) {

                case 1:
                    moodId = "Happy";
                    break;

                case 2:
                    moodId = "Sad";
                    break;

                case 3:
                    moodId = "Lonely";
                    break;

                case 4:
                    moodId = "Angry";
                    break;

                case 5:
                    moodId = "In Love";
                    break;

                case 6:
                    moodId = "Content";
                    break;
            } %>

    <table id="table" border="1" bordercolor="#FFCC00"  width="900" cellpadding="3" cellspacing="3" style="text-align: center; margin-left:auto; margin-right: auto; background-color:#FFFFCC;">

        <tr>
            <td class="field"> <%=mood.getUserId()%></td>
            <td  class="field"> <%=moodId%></td>
            <%Date date = new Date(mood.getTime());
                SimpleDateFormat sdf = new SimpleDateFormat("dd:MM:yyyy hh:mm:ss");
                String sDate = sdf.format(date);
            %>
            <td  class="field"> <%=sDate%></td>

        </tr>

    </table>
    <%
        }
    %>

</div>
</body>

</html> 
```

现在，我希望每 30 秒重新加载整个表格部分（连同可能已放入数据库的新数据）并显示为 html，浏览器可以读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:02:04.017

将您的 jquery ajax 代码添加到其中一个 javascript 函数说

```
drawDataTable(); 
```

然后为此设置间隔

```
setInterval(drawDataTable, 30000); //30 sec 
```

**再次更新**
发布确切的代码，这将更清楚地解释我的观点。
还是你不明白，请先贴出你的代码。

```
<script type="text/javascript">

function drawDataTable(){
 $.ajax({
      url : "NameServlet",
      dataType : 'json',
      error : function(){
      alert("Error Occured");
      },
      success : function(data) {
      //here you will get your data from servlet
      //set data to your table  
      }     
    });
}

setInterval(drawDataTable, 30000);

<script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:14:16.380

由于您希望每 30 秒发出一次请求，因此您使用 AJAX 的方法非常完美。

您必须每 30 秒向同一个 servlet 发送一个虚拟请求；servlet 可以返回 JSON 格式的响应。[使用 jquery 的 Ajax 调用](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)

您也可以使用 Jquery（或纯 javascript）计时器定期发送请求。

所以它的工作方式是：浏览器每 30 秒向 servlet 发送一次请求，并在收到请求后；servlet 将执行适当的业务逻辑，然后将响应异步返回给客户端。

# ios - 我支持BLE 4.0的iOS设备是否可以连接所有支持BLE 4.0的设备？

> ID：12951942
> 
> 赞同：5
> 
> 时间：2012-10-18T09:57:06.403
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy

关于低功耗蓝牙。我知道带有 iOS 5.1 及更高版本的 iPhone 4S、iPhone 5、iPad 3 支持 BLE 4.0。我从 Apple 阅读了示例代码 TemperatureSensor。我的问题是对传感器有什么要求？换句话说，在这个应用程序中可以连接什么样的传感器？我支持BLE 4.0的iOS设备是否可以连接所有支持BLE 4.0的设备？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T16:26:21.953

BLE通信基于GATT（General Attributes），本质上是一个服务下不同特征值的交换。如果您阅读过 TemperatureSensor 示例代码，您一定已经看到它开始根据服务 UUID 发现设备，然后在服务下仍然基于 UUID 读/写特征。因此，只要传感器支持 BLE 并且您了解它的服务（它的 UUID、它的特性和属性），您就可以对您的 iOS 应用程序进行编程以与之通信。[一些服务是蓝牙 SIG 的“预定义”，因此您可以在蓝牙 SIG 网站](http://developer.bluetooth.org/gatt/Pages/GATT-Specification-Documents.aspx)上找到这些服务的信息 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T22:15:55.567

是的，您可以将任何 BLE 设备连接到支持 BLE 的 iOS 设备。

关于您正在谈论的示例代码，它会查找温度传感器的特定服务 UUID：

```
[centralManager scanForPeripheralsWithServices:uuidArray options:options]; 
```

由于市场上没有我能找到的温度传感器，您可能希望使用 nil 来扫描任何和所有设备：

```
[centralManager scanForPeripheralsWithServices:nil options:options]; 
```

要对此进行试验，您可以使用[LightBlue](http://blog.punchthrough.com/post/34242179806/simulate-ble-peripherals-with-lightblue-1-2)或[iTunes Link](http://itunes.apple.com/us/app/lightblue/id557428110?mt=8&ign-mpt=uo%3D4)应用程序，它可以让您将 iPhone 变成具有您定义的任何服务/特征的外围设备。

# ios - 使用 ARMv7 指令的 iPhone 是否支持 ARMv6 编译的二进制文件？

> ID：12951943
> 
> 赞同：0
> 
> 时间：2012-10-18T09:57:06.847
> 
> 标签：ios, iphone, armv7, armv6

是否可以在支持 armv7 (iPhone 3GS+) 的设备上运行 armv6 编译的二进制文件？

例如，我可以在 iPhone 5 上使用使用 armv6 指令编译的库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:01:35.483

当然可以。ARMv7 向后兼容 ARMv6。

# vba - Excel VBA 打开工作簿，执行操作，另存为，关闭

> ID：12951946
> 
> 赞同：10
> 
> 时间：2012-10-18T09:57:23.553
> 
> 标签：vba, excel, automation, userform

由于对建议答案的冗长评论和更新，此问题已被编辑。

这里要求的是模块 13；

```
Sub SaveInFormat()
Application.DisplayAlerts = False
Workbooks.Application.ActiveWorkbook.SaveAs Filename:="C:\Documents and Settings\jammil\Desktop\AutoFinance\ProjectControl\Data\" & Format(Date, "yyyymm") & "DB" & ".xlsx",   leFormat:=51
Application.DisplayAlerts = True
End Sub 
```

错误处理也存在问题，我知道我做错了，但我更感兴趣的是在我进入它之前修复关闭功能。这是需要一些工作的错误处理代码

```
Sub test()

Dim wk As String, yr As String, fname As String, fpath As String
Dim owb As Workbook

wk = ComboBox1.Value
yr = ComboBox2.Value
fname = yr & "W" & wk
fpath = "C:\Documents and Settings\jammil\Desktop\AutoFinance\ProjectControl\Data"
owb = Application.Workbooks.Open(fpath & "\" & fname)
On Error GoTo ErrorHandler:
ErrorHandler:
If MsgBox("This File Does Not Exist!", vbRetryCancel) = vbCancel Then Exit Sub Else Call Clear

'Do Some Stuff

Call Module13.SaveInFormat

owb.Close 
```

这是您的测试代码加上我更改的文件路径和名称

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T13:25:17.037

讨论后发布更新的答案：

```
Option Explicit
Sub test()

    Dim wk As String, yr As String
    Dim fname As String, fpath As String
    Dim owb As Workbook

    With Application
        .DisplayAlerts = False
        .ScreenUpdating = False
        .EnableEvents = False
    End With

    wk = ComboBox1.Value
    yr = ComboBox2.Value
    fname = yr & "W" & wk
    fpath = "C:\Documents and Settings\jammil\Desktop\AutoFinance\ProjectControl\Data"

    On Error GoTo ErrorHandler
    Set owb = Application.Workbooks.Open(fpath & "\" & fname)

    'Do Some Stuff

    With owb
        .SaveAs fpath & Format(Date, "yyyymm") & "DB" & ".xlsx", 51
        .Close
    End With

    With Application
        .DisplayAlerts = True
        .ScreenUpdating = True
        .EnableEvents = True
    End With

Exit Sub
ErrorHandler: If MsgBox("This File Does Not Exist!", vbRetryCancel) = vbCancel Then

Else: Call Clear

End Sub 
```

**错误处理：**

您可以尝试这样的方法来捕获特定错误：

```
 On Error Resume Next
    Set owb = Application.Workbooks.Open(fpath & "\" & fname)
    If Err.Number = 1004 Then
    GoTo FileNotFound
    Else
    End If

    ...
    Exit Sub
    FileNotFound: If MsgBox("This File Does Not Exist!", vbRetryCancel) = vbCancel Then

    Else: Call Clear 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:07:25.070

我会尝试回答几个不同的问题，但是我的贡献可能无法涵盖您的所有问题。也许我们中的几个人可以从中提取不同的部分。但是，此信息应该对您有所帮助。开始了..

**打开一个单独的文件：**

```
ChDir "[Path here]"                          'get into the right folder here
Workbooks.Open Filename:= "[Path here]"      'include the filename in this path

'copy data into current workbook or whatever you want here

ActiveWindow.Close                          'closes out the file 
```

* * *

**打开具有指定日期的文件（如果存在）：**

我不确定如何搜索您的目录以查看文件是否存在，但在我的情况下，我不会费心搜索它，我只是尝试打开它并进行一些错误检查，以便如果它不存在'不存在然后显示此消息或执行 xyz。

***一些常见的错误检查语句：***

```
On Error Resume Next   'if error occurs continues on to the next line (ignores it)

ChDir "[Path here]"                         
Workbooks.Open Filename:= "[Path here]"      'try to open file here 
```

***或者（更好的选择）：***

> *如果文件不存在，则弹出消息框或对话框说“文件不存在，您要创建一个新文件吗？*

您很可能希望使用`GoTo ErrorHandler`下面显示的方法来实现这一点

```
On Error GoTo ErrorHandler:

ChDir "[Path here]"                         
Workbooks.Open Filename:= "[Path here]"      'try to open file here

ErrorHandler:
'Display error message or any code you want to run on error here 
```

* * *

更多关于错误处理的信息：[http ://www.cpearson.com/excel/errorhandling.htm](http://www.cpearson.com/excel/errorhandling.htm)

* * *

此外，如果您想了解更多或需要更全面地了解 VBA，我会推荐 Siddharth Rout 的网站，他在这里有很多教程和示例代码： [http ://www.siddharthout.com/vb-dot-net-and-优秀/](http://www.siddharthrout.com/vb-dot-net-and-excel/)

希望这可以帮助！

* * *

**有关如何确保错误代码不会每次都运行的示例：**

如果您在没有`Exit Sub`BEFORE 错误处理程序的情况下通过代码进行调试，您很快就会意识到错误处理程序每​​次都会运行，无论是否有错误。代码示例下方的链接显示了此问题的先前答案。

```
 Sub Macro

    On Error GoTo ErrorHandler:

    ChDir "[Path here]"                         
    Workbooks.Open Filename:= "[Path here]"      'try to open file here

    Exit Sub      'Code will exit BEFORE ErrorHandler if everything goes smoothly
                  'Otherwise, on error, ErrorHandler will be run

    ErrorHandler:
    'Display error message or any code you want to run on error here

  End Sub 
```

另外，看看这个其他问题，你需要更多参考它是如何工作的： [goto block not working VBA](https://stackoverflow.com/questions/12536836/goto-block-not-working-vba)

* * *

# ruby - 搜索 Ruby 哈希值？

> ID：12951948
> 
> 赞同：0
> 
> 时间：2012-10-18T09:57:36.470
> 
> 标签：ruby

尝试在哈希中搜索一个值，我以前尝试过的任何方法都没有奏效。

```
def input
  @search_term = STDIN.gets.chomp
end

def execute
  @reader.searchKey(@search_term).each{|b| puts b}
end

def searchKey(search_term)
  puts books_catalogue.has_value?(search_term)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:01:04.110

```
hash = {foo: 'val', bar: 'other_val', bak: 'val'}
selected_hash = hash.select { |k,v| v == 'val' } # => {foo: 'val', bak: 'val'}
selected_hash.keys # => [:foo, :bak] 
```

所以方法看起来像：

```
def search_key(value)
  @hash.select { |k, v| v == value }.keys
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:02:11.527

尝试这个：

```
hash = {a: 1, b: 2, c: 2}
value_to_search_for = 2
hash.select {|_,value| value == value_to_search_for}
# output is {b: 2, c: 2} 
```

# backlight - 为许多单独的纹理渲染“背光”效果

> ID：12951950
> 
> 赞同：1
> 
> 时间：2012-10-18T09:57:53.127
> 
> 标签：backlight

我想知道是否可以就解决此问题的最佳方法获得一些建议。

我正在编写一个模拟器，运行具有“功能板”的老式英国街机水果机游戏。这些机器类似于美国老虎机。实际的棋盘由许多从后面照亮的半透明方块组成（参见图片示例）。[图片](http://media04.viva-images.com/classifieds/37/d/43387232/large/1.jpg?dt=19790dc6d82cc49d9443a5cdcdef5ba0)

我要做的是通过（最好）使用开源 3D 引擎来渲染机器的 3D 表示。我不确定如何最好地处理功能板各个方块的“背光”效果。一个正方形可以单独打开或关闭，也可以调暗到任何级别。我对 C++ 和程序集非常有经验，但对 directx/opengl 还是很陌生。

请记住，可能有多达 512 个灯单独闪烁/变暗，我猜在半透明纹理后面使用“普通”灯会过于密集？我已经阅读了有关像素和顶点着色器的信息，并且想知道这是否是实现效果的最佳方法？（例如，将功能板拆分为每个正方形的单独纹理多边形，但将它们全部连接在一起，使其看起来像一个）

感谢您的任何建议

# php - PHP中的简单数组操作

> ID：12951952
> 
> 赞同：1
> 
> 时间：2012-10-18T09:58:03.080
> 
> 标签：php, arrays

假设我有以下数组：

```
Array
(
[0] => Array
    (
        [0] => a
        [1] => 1
    )

[1] => Array
    (
        [0] => b
        [1] => 8
    )

[2] => Array
    (
        [0] => c
        [1] => 16
    )

[3] => Array
    (
        [0] => d
        [1] => 21
    )
....

) 
```

内部数组中的数字是从范围 (0, 100) 中随机生成的，它们不会重复。

我想创建一个循环，它将从 0 迭代到 100 并检查循环迭代是否等于上述数组的内部数。例外结果是包含 100 个元素的数组：

```
Array
(
  [0] => const
  [1] => a
  [2] => const
  [3] => const
  [4] => const
  [5] => const
  [6] => const
  [7] => const
  [8] => b
  [9] => const
  [10] => const
  .
  .
  [16] => c
  [17] => const
  .
  .
  [21] => d
  [22] => const
  [23] => const
  .
  .
) 
```

我需要的是这样的：

```
for ($i=0; $i < 100; $i++) {
  if($i === $name[$i][1]) {
    $new_array[] = $name[$i][0];
  } else {
    $new_array[] = 'const';
  }
} 
```

但我无法让它工作，因此我需要一些帮助。

我不是以英语为母语的人，所以希望你能理解我想要达到的目标。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:38:40.330

它不起作用的原因是因为每次`$i`递增您都试图在 中进行匹配`$name[$i]`，而不是检查 中的所有数组`$name`，这是我能想到的最简单的解决方案（并且执行最少的迭代次数）会要做类似的事情：

```
$new_array = array();

foreach ($name as $n) {
  $new_array[$n[1]] = $n[0];
}

for ($i=0; $i<100; $i++) {
  if (!isset($new_array[$i])) {
    $new_array[$i] = 'const';
  }
}
ksort($new_array); 
```

所以首先，遍历你的数组，并使用=>对（例如）`$name`设置你的，然后在循环中检查是否已经设置，如果没有，使用'const'设置它。最后，按其键排序。`$new_array``key``value``[1] => 'a', [8] => 'b'``for``key ($i)``value``$new_array`

此示例中的迭代次数为`count($name) + 100`，而嵌套循环示例为`100 * count($name)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:05:44.987

你需要一个嵌套循环，如：

```
for ($i=0; $i < 100; $i++):
   $found = false;
   foreach($name as $array):
      if($array[1] === $i):
         $found = true;
         $new_array[] = $array[0];
       endif;
   endforeach;
  if(!$found):
    $new_array[] = 'const';
  endif;
endfor; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:03:30.660

利用

```
for ($i=0; $i < 100; $i++) {
 if($i === $name[$i][1]) {
   $new_array[$i] = $name[$i][0];
  }
  else{
    $new_array[$i] = 'const';
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:04:34.520

```
for ($i = 0; $i < count($name); ++$i) {
    if ($name[$i][1] === $i) {
        $name[$i] = $name[$i][0];
    } else {
        $name[$i] = 'const';
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T10:05:33.363

为什么你使用`Identical`运算符而不是`Equal`

```
for ($i=0; $i < 100; $i++) {
  if($i == $name[$i][1]) {
    $new_array[] = $name[$i][0];
  } else {
    $new_array[] = 'const';
  }
} 
```

# c# - 间歇性 WCF 服务超时异常

> ID：12951953
> 
> 赞同：2
> 
> 时间：2012-10-18T09:58:03.857
> 
> 标签：c#, wcf

我们有一个托管在 Windows 服务中的 WCF 服务和一个访问该服务的非线程客户端。该服务正在执行对 SQL Server 2008 数据库的数据访问。客户端偶尔会出现以下异常：

```
System.TimeoutException: The request channel timed out while waiting for a reply after 00:01:00\. Increase the timeout value passed to the call to Request or increase the SendTimeout value on the Binding. The time allotted to this operation may have been a portion of a longer timeout. 
```

我知道这个错误对于 WCF 问题可能有点笼统，但我确信错误没有发生，因为操作需要一分钟以上（我已经将超时增加了三倍，但它仍然会发生）。

该问题发生在多个端点上，并且发生在对客户端代理的调用上。我将崩溃发生时服务到达的各个点记录到一个文本文件中，并看到服务的返回语句已到达。

客户端和服务已经以某种形式使用了两年多，这个问题似乎只是最近才发生，并且在对服务重要的领域没有任何明显的变化（尽管在调试问题时依赖这两个陈述都是危险的）。

任何关于调查的建议、想法或建议将不胜感激。

这是服务绑定：

```
<binding name="WSHttpBinding_IDataService" closeTimeout="00:01:00"
    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
    maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
    allowCookies="false">
  <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
      maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
  <reliableSession ordered="true" inactivityTimeout="00:10:00"
      enabled="false" />
  <security mode="Message">
    <transport clientCredentialType="Windows" proxyCredentialType="None"
        realm="" />
    <message clientCredentialType="Windows" negotiateServiceCredential="true"
        algorithmSuite="Default" establishSecurityContext="true" />
  </security>
</binding> 
```

这是客户端绑定：

```
<binding name="WSHttpBinding_IAssessmentDataAccessContract"
         closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
         bypassProxyOnLocal="false" transactionFlow="false"
         hostNameComparisonMode="StrongWildcard"
         maxBufferPoolSize="2147483647"  maxReceivedMessageSize="2147483647"
         messageEncoding="Text" textEncoding="utf-8"
         useDefaultWebProxy="true" allowCookies="false">
    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
    <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false"/>
    <security mode="Message">
        <transport clientCredentialType="Windows" proxyCredentialType="None" realm="">
            <extendedProtectionPolicy policyEnforcement="Never"/>
        </transport>
        <message clientCredentialType="Windows" negotiateServiceCredential="true" 
                 algorithmSuite="Default" establishSecurityContext="true"/>
    </security> 
</binding> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:12:05.123

我对连接到 Oracle 数据库的服务也有类似的问题。我花了一些时间才找到罪魁祸首，但我要做的第一步是在服务器和客户端上启用跟踪。 [这是有关如何执行此操作的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms733025.aspx)。 [跳转到生产环境中跟踪的推荐设置](http://msdn.microsoft.com/en-us/library/aa702726.aspx)

听起来像是您在数据库中有一个 WCF 不知道如何序列化的值 TYPE，或者它不包含在您的 ServiceContract 的 KnownTypes 属性中。当我遇到这个问题时，它非常相似，但我需要挖掘跟踪以发现调用中的某些内容没有被正确序列化（或反序列化）。我的问题是返回数据集而不是特定值，很难准确找到罪魁祸首的数据。

如果您没有自定义错误处理程序，WCF 很容易锁定异常并且您的客户端会获得“超时”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:25:22.177

> 当崩溃发生时，看到服务的返回语句已经到达。

这有帮助，但并不意味着服务器端不会导致/添加问题。您的方法是否可能返回一个非常大的有效负载并且下载时间过长或超过 WCF 绑定的最大大小？

现在，您可能直到现在才看到这一点的原因是现在您拥有 2 年的数据，因此您返回的内容可能比最初更多。只是一个猜测。

例如

```
public string GetStuff()
{
     return //large payload
} 
```

*两端*的绑定是什么样的？W 的价值是`maxStringContentLength`多少？

# xslt - 如何输出存储在 xsl:variable 中的 html 标记

> ID：12951956
> 
> 赞同：1
> 
> 时间：2012-10-18T09:58:24.327
> 
> 标签：xslt, xslt-grouping

我正在尝试渲染存储在变量中的标记，但我没有得到任何乐趣。它被缓存的原因是因为我在页面中多次使用它

```
<xsl:variable name="imgHtml">
    <figure>
        <img src="{$img}" alt="" class="" />
        <figcaption>
            <p><xsl:value-of select="name" /></p>
            <a href="#">Enlarge Image</a>
        </figcaption>
    </figure>
</xsl:variable> 
```

然后我使用 value-of elment 引用该变量， `<xsl:value-of select="$imgHtml" />`但由于某种原因，HTML 没有呈现。别害羞，我需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:20:12.163

Use `<xsl:copy-of select="$imgHtml"/>`, `value-of` always creates a plain text node.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-21T22:16:17.027

其他答案对我不起作用，但是确实如此：

```
<xsl:value-of select="$variable" disable-output-escaping="yes"/> 
```

# wpf - 如何为在代码中动态更改属性的切换按钮创建独特的样式

> ID：12951962
> 
> 赞同：0
> 
> 时间：2012-10-18T09:58:45.103
> 
> 标签：wpf, styles

我想为我的应用程序中的所有切换按钮创建一个样式。除了加载不同的图像外，它们具有所有相同的行为。我的想法是在按下按钮时更改代码中的资源“ToggleButtonImg_Disabled”、“ToggleButtonImg_IsMouseOver”、“ToggleButtonImg_IsPressed”和“ToggleButtonImg_IsChecked”。但是它不起作用......有人可以帮助我！提前致谢！

XAML

```
<Image Width="20" Source="Resources/Images/icon_stop.png" x:Key="ToggleButtonImg_Disabled" />
<Image Width="20" Source="Resources/Images/icon_stop.png" x:Key="ToggleButtonImg_IsMouseOver" />
<Image Width="20" Source="Resources/Images/icon_stop.png" x:Key="ToggleButtonImg_IsPressed" />
<Image Width="20" Source="Resources/Images/icon_stop.png" x:Key="ToggleButtonImg_IsChecked" />

<Style TargetType="{x:Type ToggleButton}" x:Key="ToggleButtonStyle">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="Content" Value="{DynamicResource ToggleButtonImg_Disabled}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Border 
                  x:Name="CustomControlTemplate"  
                  CornerRadius="2" 
                  BorderThickness="1">
                      <ContentPresenter 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        RecognizesAccessKey="True"/>
                </Border>
                <ControlTemplate.Triggers>

                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter Property="Content" Value="{DynamicResource ToggleButtonImg_IsMouseOver}" />
                    </Trigger>
                    <Trigger Property="IsPressed" Value="true">
                        <Setter Property="Content" Value="{DynamicResource ToggleButtonImg_IsPressed}" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter Property="Content" Value="{DynamicResource ToggleButtonImg_IsChecked}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

代码

//设置按钮按下时的图片

```
 BitmapImage img = new BitmapImage();
                img.BeginInit();
                img.UriSource = new Uri(@"Resources/Images/icon_play.png", UriKind.Relative);
                img.EndInit();
                _receiver.Resources["ToggleButtonImg_IsChecked"] = img; 
```

我的代码已更新（仅 XAML）：

```
<Style TargetType="{x:Type ToggleButton}" x:Key="ToggleButtonStyle">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="Content" Value="{DynamicResource ToggleButtonImg_Disabled}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Image x:Name="CustomControlTemplate" 
                       Width="20" 
                       Source="Resources/Images/icon_stop.png"
                />
                <ControlTemplate.Triggers>

                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter TargetName="CustomControlTemplate" Property="Source" Value="{DynamicResource ToggleButtonImg_IsMouseOver}" />
                    </Trigger>
                    <Trigger Property="IsPressed" Value="true">
                        <Setter TargetName="CustomControlTemplate" Property="Source" Value="{DynamicResource ToggleButtonImg_IsPressed}" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="CustomControlTemplate" Property="Source" Value="{DynamicResource ToggleButtonImg_IsChecked}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:05:00.080

在您想要的 ControlTemplate 中添加一个 Image-Control 并将触发器的设置器更改为：

```
<Setter TargetName="imageName" Property="Source" Value="{DynamicResource resourceKey}" /> 
```

编辑：而不是图像，使用 BitmapImages 作为源：

```
<BitmapImage Width="20" UriSource="Resources/Images/icon_stop.png" x:Key="ToggleButtonImg_Disabled" />
<BitmapImage Width="20" UriSource="Resources/Images/icon_stop.png" x:Key="ToggleButtonImg_IsMouseOver" />
<BitmapImage Width="20" UriSource="Resources/Images/icon_stop.png" x:Key="ToggleButtonImg_IsPressed" />
<BitmapImage Width="20" UriSource="Resources/Images/icon_stop.png" x:Key="ToggleButtonImg_IsChecked" /> 
```

# c# - C#.net 批处理

> ID：12951964
> 
> 赞同：0
> 
> 时间：2012-10-18T09:58:56.917
> 
> 标签：c#, concurrency, batch-file

如果我想同时执行两个任务，我想知道如何在 C#.net 中进行编程？它是一个批处理作业，因此性能也很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:11:55.113

如果您使用的是 .NET 框架 4 或 4.5....最好使用 Task 类而不是 Thread。Task 使用 TPL 并根据底层硬件创建适当数量的线程，如果您运行多核机器的程序，它会给您带来性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:03:50.730

为此，您有两个工具：任务和线程。在大多数情况下，Thread 就足够了。

它很简单：

```
Thread myThread = new Thread(delegateMethod);
myThread.Start(); 
```

您可以根据需要启动任意多个，它们将并行运行，只要您的硬件可以提供它们。

# ruby-on-rails - 将搜索逻辑从控制器移动到模型

> ID：12951967
> 
> 赞同：1
> 
> 时间：2012-10-18T09:59:06.260
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

现在我在控制器中搜索逻辑：

```
def index
    @title = "All cars"
    #show manufacturers only with cars
    @manufacturers = Manufacturer.select('*')
    @manufacturers = @manufacturers.where('count_cars > ?', 0)

    @cars = Car.select('*')
    #manufacturer
    @cars = @cars.where('manufacturer_id = ?', params[:filter_manufacturer]) if not params[:filter_manufacturer].blank?
    #model
    @models = Model.select('*')
    @models = @models.where('manufacturer_id = ?', params[:filter_manufacturer]) if not params[:filter_manufacturer].blank? and not params[:filter_model].blank?
    @models = @models.where('count_cars > ?', 0)

    @cars = @cars.where('model_id = ?', params[:filter_model]) if not params[:filter_model].blank?
    #years
    @cars = @cars.where('year >= ?', params[:filter_year_from]) if not params[:filter_year_from].blank?
    @cars = @cars.where('year <= ?', params[:filter_year_to]) if not params[:filter_year_to].blank?
    #district
    @cars = @cars.where('district_id = ?', params[:filter_district]) if not params[:filter_district].blank?
    #body type
    @cars = @cars.where('car_body_type_id = ?', params[:filter_body_type]) if not params[:filter_body_type].blank?
    #fuel
    @cars = @cars.where('car_fuel_id = ?', params[:filter_fuel]) if not params[:filter_fuel].blank?
    #transmission
    @cars = @cars.where('car_transmission_id = ?', params[:filter_transmission]) if not params[:filter_transmission].blank?
    #wheel drive
    @cars = @cars.where('car_drive_wheel_id = ?', params[:filter_drive_wheel]) if not params[:filter_drive_wheel].blank?
    #doors
    @cars = @cars.where('doors = ?', params[:filter_doors]) if not params[:filter_doors].blank?
    #without damage
    @cars = @cars.where('damage = ?', false) if params[:filter_damage]
    #with customs
    @cars = @cars.where('customs = ?', true) if params[:filter_customs]
    #not crashed
    @cars = @cars.where('crash = ?', false) if params[:filter_crash]
    #price
    @cars = @cars.where('price >= ?', params[:filter_price_from]) if not params[:filter_price_from].blank?
    @cars = @cars.where('price <= ?', params[:filter_price_to]) if not params[:filter_price_to].blank?

    @cars = @cars.paginate(:page => params[:page], :per_page => 20)
end 
```

我必须将此逻辑移动到模型中吗？如果是，请帮助我进行标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:11:41.100

是的，您可以将此逻辑移动到模型中。

您需要为此添加范围

```
@manufacturers = @manufacturers.where('count_cars > ?', 0) 
```

转换成范围

```
scope :count_car, where("count_cars > ?", 0) 
```

然后你可以打电话给

```
 @manufacturers = @manufacturers.count_car 
```

与为此创建其他范围相同

或者

您还可以在模型中定义一个方法，例如

```
@cars = @cars.where('manufacturer_id = ?', params[:filter_manufacturer]) if not params[:filter_manufacturer].blank? 
```

转换为

```
def cars(manufacture_id=nil)
  where('manufacturer_id = ?',manufacture_id ) if manufacture_id.present?
end 
```

您可以调用此方法与范围相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:16:10.483

在控制器中

```
@cars = Car.search(params) 
```

在汽车模型中

```
def self.search(params)
    cars = Car.select('*')
    cars = cars.where('manufacturer_id = ?', params[:filter_manufacturer]) if not params[:filter_manufacturer].blank?
    cars = cars.where('model_id = ?', params[:filter_model]) if not params[:filter_model].blank?
    #years
    cars = cars.where('year >= ?', params[:filter_year_from]) if not params[:filter_year_from].blank?
    cars = cars.where('year <= ?', params[:filter_year_to]) if not params[:filter_year_to].blank?
    #district
    cars = cars.where('district_id = ?', params[:filter_district]) if not params[:filter_district].blank?
    #body type
    cars = cars.where('car_body_type_id = ?', params[:filter_body_type]) if not params[:filter_body_type].blank?
    #fuel
    cars = cars.where('car_fuel_id = ?', params[:filter_fuel]) if not params[:filter_fuel].blank?
    #transmission
    cars = cars.where('car_transmission_id = ?', params[:filter_transmission]) if not params[:filter_transmission].blank?
    #wheel drive
    cars = cars.where('car_drive_wheel_id = ?', params[:filter_drive_wheel]) if not params[:filter_drive_wheel].blank?
    #doors
    cars = cars.where('doors = ?', params[:filter_doors]) if not params[:filter_doors].blank?
    #without damage
    cars = cars.where('damage = ?', false) if params[:filter_damage]
    #with customs
    cars = cars.where('customs = ?', true) if params[:filter_customs]
    #not crashed
    cars = cars.where('crash = ?', false) if params[:filter_crash]
    #price
    cars = cars.where('price >= ?', params[:filter_price_from]) if not params[:filter_price_from].blank?
    cars = cars.where('price <= ?', params[:filter_price_to]) if not params[:filter_price_to].blank?
    cars
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:16:24.817

对于所有的@cars.where 查询，请查看 Ransack： [https ://github.com/ernie/ransack](https://github.com/ernie/ransack)

这个 Gem 允许您根据参数名称轻松构建查询。请参阅他们的 wiki 以获取一些不错的示例：[https ://github.com/ernie/ransack/wiki/Basic-Searching](https://github.com/ernie/ransack/wiki/Basic-Searching)

# ruby-on-rails - 使用回形针将视频上传到 s3

> ID：12951971
> 
> 赞同：0
> 
> 时间：2012-10-18T09:59:18.340
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

嗨，我正在尝试将视频上传到 s3 并使用 flowplayer 显示它

我的 flowplayer 崩溃了，因为数字被添加到 video src 的 url 后面

```
<div class="flowplayer" style="width: 624px; height: 260px; ">
   <video src="http://s3-ap-southeast-1.amazonaws.com/psyched-sg-store/624x260.mp4?1350552718"></video>
</div> 
```

这打破了我的 flowplayer ，但是在查看源代码后单击链接将我带到视频

```
<div class="flowplayer" style="width: 624px; height: 260px; ">
   <video src="http://s3-ap-southeast-1.amazonaws.com/psyched-sg-store/624x260.mp4"></video>
</div> 
```

这行得通

我像这样设置我的回形针

```
# /config/initializer/s3.rb
# if you're using sg buckets
Paperclip.interpolates(:s3_sg_url) { |attachment, style|
   "#{attachment.s3_protocol}//s3-ap-southeast-1.amazonaws.com/#{attachment.bucket_name}/#{attachment.path(style).gsub(%r{^/},
   "")}"
   } 
```

在我的模型中..

```
 has_attached_file :attached_video,:storage => :s3,
       :s3_credentials => "#{Rails.root}/config/s3.yml",
       :path => "/:filename",
       :url  => ":s3_sg_url"

       def attached_video_url
           if attached_video.file?
            attached_video.url
          else
            nil
        end    
      end 
```

我还设置了我的 s3.yml

```
development:
  bucket: psyched-sg-store
  access_key_id: xx
  secret_access_key: xx
test:
  bucket: psyched-sg-store
  access_key_id: xx
  secret_access_key: x
production:
  bucket: psyched-sg-store
  access_key_id: xx
  secret_access_key: xx 
```

怎么了？为什么数字出现在网址后面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:31:03.220

这些数字是反缓存时间戳。如果您想摆脱它们，请添加`:use_timestamp => false`到模型的附件设置中，如下所示：

```
has_attached_file :attached_video,:storage => :s3,
       :s3_credentials => "#{Rails.root}/config/s3.yml",
       :path => "/:filename",
       :url  => ":s3_sg_url",
       :use_timestamp => false 
```

# powershell - PowerShell 中的动态参数问题

> ID：12951972
> 
> 赞同：3
> 
> 时间：2012-10-18T09:59:20.277
> 
> 标签：powershell, powershell-2.0

我对动态参数有疑问：

```
function get-foo {
 [cmdletBinding()]
 param(
  [parameter(Mandatory=$true)]
  $Name
 )
 DynamicParam { 
if($Name -like 'c*') {
$Attributes = New-Object 'Management.Automation.ParameterAttribute' 
$Attributes.ParameterSetName = '__AllParameterSets'            
$Attributes.Mandatory = $false
$AttributesCollection = New-Object 'Collections.ObjectModel.Collection[Attribute]' 
$AttributesCollection.Add($Attributes) 
$Dynamic = New-Object -TypeName 'Management.Automation.RuntimeDefinedParameter' -ArgumentList @('pattern','system.object',$AttributeCollection)
$ParamDictionary = New-Object 'Management.Automation.RuntimeDefinedParameterDictionary'          
$ParamDictionary.Add("pattern", $Dynamic) 
$ParamDictionary 
 } 
}
 end {
   if($test) {
       return $Name -replace '\b\w',$test
   }
   $name
 }
} 
```

它正在检测我的模式参数，但它返回一个错误；

```
ps c:\> get-foo -Name cruze -pattern 123
get-foo : Le paramètre « pattern » ne peut pas être spécifié dans le jeu de paramètres « __AllParameterSets 
».
Au niveau de ligne : 1 Caractère : 8
+ get-foo <<<<  -Name cruze -pattern u
    + CategoryInfo          : InvalidArgument: (:) [get-foo], ParameterBindingException
    + FullyQualifiedErrorId : ParameterNotInParameterSet,get-foo 
```

如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:37:44.777

替换`$AttributeCollection`为`$AttributesCollection`（缺少's'）。

用于`Set-StrictMode`捕捉此类错别字:)

* * *

至于剧本，我认为还有其他问题。这是更正和工作的版本：

```
function get-foo {
    [cmdletBinding()]
    param(
        [parameter(Mandatory=$true)]
        $Name
    )
    DynamicParam {
        if ($Name -like 'c*') {
            $Attributes = New-Object 'Management.Automation.ParameterAttribute'
            $Attributes.ParameterSetName = '__AllParameterSets'
            $Attributes.Mandatory = $false
            $AttributesCollection = New-Object 'Collections.ObjectModel.Collection[Attribute]'
            $AttributesCollection.Add($Attributes)
            $Pattern = New-Object -TypeName 'Management.Automation.RuntimeDefinedParameter' -ArgumentList @('pattern', [string], $AttributesCollection)
            $ParamDictionary = New-Object 'Management.Automation.RuntimeDefinedParameterDictionary'
            $ParamDictionary.Add("pattern", $Pattern)
            $ParamDictionary
        }
    }
    end {
        if ($Name -like 'c*') {
            if ($Pattern.IsSet) {
                return $Name -replace '\b\w', $Pattern.Value
            }
        }
        $name
    }
} 
```

# java - 页面未在 targetFrame 中加载

> ID：12951973
> 
> 赞同：1
> 
> 时间：2012-10-18T09:59:23.707
> 
> 标签：java, javascript, html, struts, frame

我有一个页面设计，其中涉及一些框架，在左侧框架上我有菜单，如果我单击它必须转到其他框架，但它没有加载到指定的框架，而是加载到同一个框架指定链接的位置。

我在java代码中创建如下超链接。

```
left_menu_HTML.append("<a href=\"#\" target=\"workFrame\" onclick=\"getMenuRequest('"+model.getResource_name()+"','goToHome')\">"+model.getMenu_name()+"</a>"); 
```

当用户单击链接时，我使用 struts 1.2.9 我调用这样的操作

```
function getMenuRequest(actionName,methodName){
   document.forms[0].action=actionName+".htm";
   document.forms[0].method.value=methodName;
   document.forms[0].submit();
} 
```

并且动作类中的方法看起来像这样

```
public ActionForward goToHome(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
        throws Exception {
    //call method to verify Pagetoken
    forwardRequestTo = "departmentHome";
    return mapping.findForward(forwardRequestTo);
} 
```

并为此映射

```
<action path="/common/DepartmentAction"  name="SecurEyesForm" type="com.secureyes.eswastha.struts.action.DepartmentAction" scope="request" parameter="method" validate="false">
    <forward name="departmentHome" path="/WEB-INF/Masters/DepartmentMaster.jsp"></forward>            
</action> 
```

这就是框架的对齐方式；

```
</head>
    <frameset border="0" frameborder="0" framespacing="0" rows="64,*">
            <frame border="0" frameborder="0" framespacing="0" id="topFrame" name="topFrame" src="<%=resourcePath%>/common/header.jsp" marginheight="0" marginwidth="0" noresize="noresize" scrolling="no">
            <frameset border="0" frameborder="0" framespacing="0" id="MainFrameSet" cols="209,*">
                    <frame noresize="noresize" border="0" frameborder="0" framespacing="0" id="leftFrame" name="leftFrame" src="<%=resourcePath%>/common/left_menu.jsp" scrolling="auto">
                    <frame border="0" frameborder="0" framespacing="0" id="workFrame" name="workFrame" src="<%=resourcePath%>/common/WelcomePage.jsp" marginheight="7" marginwidth="7" noresize="noresize" scrolling="auto">
            </frameset>
    </frameset>
</html> 
```

请帮我解决这个问题，

不知道也不明白为什么它被加载到同一个框架中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:15:51.963

代码看起来不错。

您使用的是哪种 DTD？因为，根据[W3C 规范](http://www.w3schools.com/TAGS/att_form_target.asp)，

1) HTML5 支持目标属性。

2) 目标属性在 HTML 4.01 中已弃用。

3) **HTML5 不支持框架和框架集，因此 _parent、_top 和 framename 值现在主要与 iframe 一起使用。**

编辑：

您应该（您最好这样做；）在您的 jsp 页面的第一行中定义了一个 DTD 来说明浏览器如何解释您的代码。如果您不指定它，浏览器将进入 Quirks 模式，并尝试通过其内容“预测”页面的 DTD（结果很奇怪）。如果您确实指定了它，那么您必须遵守该 DTD 的“规则”，您可以在 W3C 站点上找到该规则。顺便说一句，它们都在维基百科上列出：

[http://en.wikipedia.org/wiki/Document_Type_Definition](http://en.wikipedia.org/wiki/Document_Type_Definition)

这就是 DTD 的样子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

仅供参考，您可以根据所选的 DTD 在官方 W3C 验证器页面上验证您的页面：http: [//validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)

希望有帮助

# shell - 传递参数时shell脚本中的花括号

> ID：12951974
> 
> 赞同：1
> 
> 时间：2012-10-18T09:59:24.877
> 
> 标签：shell

嗨，我是 shell 脚本的新手。我想将参数传递给 shell 脚本。我知道怎么做。我写了一个简单的shell脚本

```
#!/bin/bash
parameter=$1
whatispased=${parameter:-"nothing"}
echo $whatispassed 
```

如果某些东西作为第一个参数传递，则打印它，否则打​​印“无”。我见过一些人在写。

```
parameter=${1,,} 
```

我尝试用上面的替换第一行，但我得到了一个错误的替换错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:06:22.840

首先，您可以将其简化为：

```
#!/bin/bash
whatispassed=${1:-"nothing"}
echo $whatispassed 
```

甚至：

```
#!/bin/bash
echo ${1:-"nothing"} 
```

为了`${parameter,,pattern}`查看[`Shell Parameter Expansion`](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

有关 bash 或 shell 脚本的更多信息，请参阅[info:bash](https://stackoverflow.com/tags/bash/info)和[https://stackoverflow.com/q/6798269/1741542](https://stackoverflow.com/q/6798269/1741542)。

# android - 无法在文本视图标题中显示选定的列表视图项目标题代替菜单

> ID：12951979
> 
> 赞同：0
> 
> 时间：2012-10-18T09:59:34.390
> 
> 标签：android, android-widget, android-listview

我使用Textview作为标题，但没有使用ListView项目行获取所选项目的名称，每当我运行我的应用程序时，第一个listview将菜单显示为标题中的文本，因为我已经在xml中给出，但在第二个活动的标题中我只是将“标题”作为标题而不是选定项目标题，请查看我缺少的地方：-

header.xml

```
<TextView
android:id="@+id/actionbar"
android:layout_width="fill_parent"
android:layout_height="50dip"
android:background="@drawable/header"
android:gravity="center_vertical|center_horizontal"
android:shadowColor="@android:color/black"
android:shadowDx="1"
android:shadowDy="1"
android:shadowRadius="1"
android:text="Menu"
android:textColor="#FFFFFF"
android:textSize="25dp"
android:textStyle="bold" /> 
```

代码：-

```
static final String KEY_TITLE = "title";
@Override
     protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
                TextView lblTitle = (TextView) findViewById(R.id.actionbar); 
                lblTitle.setText(KEY_TITLE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:21:09.493

这个TextView是直接加在你的xml里的吗？或者你有包括它吗？如果包含它，您需要查看该布局

```
TextView lblTitle = (TextView) header.findViewById(R.id.actionbar); 
```

您也是从异步任务中执行此操作的吗？UI 操作总是必须从 ui 线程执行。用这个：

```
runOnUiThread(new Runnable() {
   public void run() {
      TextView lblTitle = (TextView) header.findViewById(R.id.actionbar);
      lblTitle.setText(KEY_TITLE);
   }
}); 
```

# c# - RESTFul WCF 服务 C#.Net

> ID：12951980
> 
> 赞同：1
> 
> 时间：2012-10-18T09:59:34.983
> 
> 标签：c#, .net, wcf

我正在尝试制作一个简单的 RESTFul WCF 服务。

这是我的界面

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace RestService
{
    [ServiceContract]
    public interface IRestServiceImpl
    {

        [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Xml,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "xml/{id}")]
        string XMLData(string id);

        [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "json/{id}")]
        string JSONData(string id);
    }
} 
```

我的类实现了这个接口

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace RestService
{
    public class RestServiceImpl : IRestServiceImpl
    {
        #region IRestService Members

        public string XMLData(string id)
        {
            return "Requested XML: " + id; 
        }

        public string JSONData(string id)
        {
            return "Requested JSON: " + id;
        }
        #endregion
    }
} 
```

这是我的 Web.config

```
<?xml version="1.0"?>
<configuration>

  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings/>
  <connectionStrings/>
  <system.web>
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <!--
        The <authentication> section enables configuration 
        of the security authentication mode used by 
        ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows" />
    <!--
        The <customErrors> section enables configuration 
        of what to do if/when an unhandled error occurs 
        during the execution of a request. Specifically, 
        it enables developers to configure html error pages 
        to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
         <error statusCode="403" redirect="NoAccess.htm" />
         <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
    -->
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>

    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4"
                type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
  <!-- 
      The system.webServer section is required for running ASP.NET AJAX under Internet
      Information Services 7.0\.  It is not necessary for previous version of IIS.
  -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <remove name="ScriptModule" />
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <remove name="ScriptHandlerFactory" />
      <remove name="ScriptHandlerFactoryAppServices" />
      <remove name="ScriptResource" />
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
           type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
           type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </handlers>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
  <runtime>
    <assemblyBinding appliesTo="v2.0.05727" xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="RestService.Service1Behavior"
        name="RestService.Service1">
        <endpoint address="" binding="webHttpBinding" contract="RestService.IService1">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
      <service behaviorConfiguration="RestService.RestServiceImplBehavior"
        name="RestService.RestServiceImpl">
        <endpoint address="" binding="basicHttpBinding" contract="RestService.IRestServiceImpl">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="RestService.Service1Behavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
        <behavior name="RestService.RestServiceImplBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

当我在浏览器中启动此服务时，我可以看到来自这个 URL的`.svc file`和，但是当我尝试去`wsdl file``http://localhost:55149/RestServiceImpl.svc`

`http://localhost:55149/RestServiceImpl.svc/xml/123`或者`http://localhost:55149/RestServiceImpl.svc/json/123`

没有任何内容输出到浏览器。另一方面，如果我使用 进行测试`WCF Test Client`，添加一些值，例如`123`XML 的输出将是

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
    <XMLDataResponse xmlns="http://tempuri.org/">
      <XMLDataResult>Requested XML: 123</XMLDataResult>
    </XMLDataResponse>
  </s:Body>
</s:Envelope> 
```

我在这里做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:25:15.063

您的配置显示您没有在“RestService.RestServiceImpl”服务上公开 webHttBinding。

添加以下端点元素和行为并启用您的服务以进行休息

```
<endpoint address="rest" binding="webHttpBinding" behaviorConfiguration="web" contract="RestService.IRestServiceImpl">
</endpoint>

<behaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
</behaviors> 
```

# html - 将 HTML 文件导入另一个 HTML 文件

> ID：12951982
> 
> 赞同：7
> 
> 时间：2012-10-18T09:59:39.323
> 
> 标签：html, django, include

我想知道如何将 HTML 文件导入其他 HTML 文件。

这两个文件都引用了很多不同的文件，因此我更愿意将它们保存在两个不同的文件夹中，而不是将一个文件复制到另一个文件中。

* * *

目前，我正在使用 Django 进行本地开发。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T10:39:11.503

`{% include 'file.html' %}`应该管用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:08:05.660

我以前没有使用过 Django，但是他们在这里有关于他们的模板语言的文档。

[https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:06:24.637

我不太确定这个问题，但这[可能](http://webdesign.about.com/od/ssi/a/aa052002a.htm)会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:09:43.003

包括只有 HTML 的页面：

```
<!--#include virtual="pagetoinclude.html" --> 
```

# javascript - Google Places Autocomplete：选择一个后格式化显示结果（仅显示街道名称+号码）

> ID：12951983
> 
> 赞同：0
> 
> 时间：2012-10-18T09:59:40.383
> 
> 标签：javascript, jquery, google-maps-api-3, autocomplete, google-places-api

在用户选择地址后，我拼命尝试将谷歌自动完成的输入值设置为所选的“街道名称”，而不是“街道名称、城市、国家”。

可以在用户按 Enter 后设置该值，但只要自动完成输入字段失去焦点，该值就会跳回建议的（太长）字符串。

必须有一个简单的技巧来做到这一点，但我没有想法..

有人遇到过这个问题或知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:46:53.080

很抱歉回答晚了，但我可以通过使用一些 jquery 来修复它。

```
$("#autocomplete_input_display_just_streetname").focusout(function () {
  document.getElementById("autocomplete_input_display_just_streetname").value = "currentPlace.name;";
}); 
```

# iphone - iPhone 中的自定义 Segue

> ID：12951984
> 
> 赞同：0
> 
> 时间：2012-10-18T09:59:42.413
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用 Push 导航到不同的页面。如您所知，它总是从右向左移动。我希望它像这样工作：

1 - 当我单击当前页面左侧的按钮时，它从左到右。

2 - 当我单击当前页面右侧的按钮时，它从右到左。

3 - 当我点击加载当前页面的按钮时，它归结为向上。（如模态）

这是我通过实现`UIStoryboardSegue`和创建自定义 Segue 所尝试的：

```
- (void) perform {

    UIViewController *src = (UIViewController *) self.sourceViewController;
    [src.navigationController popViewControllerAnimated:YES];
} 
```

或者：

```
- (void) perform {

    UIViewController *src = (UIViewController *) self.sourceViewController;
    [UIView transitionWithView:src.navigationController.view duration:0.5
                       options:UIViewAnimationOptionTransitionFlipFromBottom
                    animations:^{
                        [src.navigationController popToViewController:[src.navigationController.viewControllers objectAtIndex:0] animated:NO];;
                    }
                    completion:NULL];
} 
```

但他们并没有以我想要的方式工作。我希望他们像 Push Segue 一样工作（我想要 viewDidLoad，......再次被调用）你能给我一些帮助吗？（请在您的答案中分享一些代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:48:17.147

这是我需要做的：

```
-(void)perform {  
   UIViewController *sourceViewController = (UIViewController*)[self sourceViewController];
   UIViewController *destinationController = (UIViewController*)[self destinationViewController];                    

   CATransition* transition = [CATransition animation];
   transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
   transition.type = kCATransitionPush;
   transition.subtype = kCATransitionFromLeft; 
   [sourceViewController.navigationController.view.layer addAnimation:transition forKey:kCATransition];
   [sourceViewController.navigationController pushViewController:destinationController animated:NO];    
} 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:13:07.000

`IIViewDeckController`是你想要的东西..

看这个演示..

[IIViewDeckController 开源](http://mattters.com/iphone-development/videos/open-source-iphone-component-for-elegant-sliding-views-inspired-by-pat)

[来自 scoop.it 的 IIViewDeck](http://www.scoop.it/t/dev-various/p/2320132348/iiviewdeckcontroller)

# dart - 如何在 Dart 中引用另一个文件？

> ID：12951989
> 
> 赞同：91
> 
> 时间：2012-10-18T10:00:01.860
> 
> 标签：dart

我知道您可以使用`library`,`import`和 even `#import`，但哪个是正确的？

我有两个文件，`MainClass.dart`和`Library.Dart`，我想添加对`Library.dart`in的引用`MainClass.dart`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-10-18T13:15:49.477

首先，让我先说请不要在导入或库或其他任何东西之前使用井号。这是一种已被弃用的旧语法。所以我们不再想使用`#import('...')`正确的语法是：

```
import 'some_file.dart'; 
```

也就是说，我们可以做两种不同的事情来访问当前文件中的不同 dart 源文件。首先是`import`文件。当您想将不同的库带入当前文件（或更准确地说是当前库）时，我们会使用此方法。

通常，如果您的文件位于同一目录或当前目录的子目录中，我们将像这样导入它们：

```
import 'lib/library.dart'; 
```

但是，如果您使用的是 pub 包布局，您还可以使用一些特殊的快捷方式引用来导入文件（特别是从您导入的其他包中）。我强烈建议阅读[pub 站点上的文档](http://pub.dartlang.org/doc "入门 |  发布包管理器")，因为大多数应用程序和库的设计都考虑到了这一点。它还提供有关最佳命名约定的建议，例如所有小写的文件名，以及使用下划线表示空格和目录布局。

关于将 dart 文件放入另一个文件的另一件重要的事情是，我们可以使用`part`and`part of`指令。这曾经被称为`#source`但已更改（删除了井号）以减少混淆。`part`当我们想要编写跨多个文件的单个库时使用该指令。例如，假设您有一个*Awesome Library*，对于单个文件，它开始变得有点大。我们将创建库的主文件（不要与 main 方法混淆）。该文件通常与库本身具有相同的名称。

```
// awesome_library.dart
library awesome_library;

import 'dart:math';
import '...';

// this injects all the content of secret_file.dart
// into this file right here almost as if it was
// here in the first place.
part 'src/secret_file.dart';

// The rest of our file here
// ... 
```

part 指令基本上从我们的 src/secret_file.dart 中获取所有内容并将其插入到文件的该部分中。这使我们能够将庞大的*Awesome 库*拆分为多个更易于维护的较小文件。虽然没有特别要求，但使用`part of`我们的 secret_file.dart 中的指令来帮助编辑器知道它是库的“一部分”会很有帮助。

```
// secret_file.dart
part of awesome_library;

// ... Rest of our secret_file code below. 
```

请注意，当使用这样的零件文件时，零件（即不是库的主文件的所有内容）本身不能导入或使用库声明。他们将导入到主文件中的任何内容导入，但不能添加任何额外的导入。

[有关库的更多信息，请参阅此链接。](https://www.dartlang.org/docs/dart-up-and-running/contents/ch02.html#libraries "飞镖：启动并运行")

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-18T10:33:40.443

导入您自己创建的库：您将导入`filename.dart`库的名称而不是名称。因此，如果您的库的名称是：`myLib`并且它保存在文件中：`someDartFile.dart`您将不得不

```
import 'someDartFile.dart'; 
```

如果您在 Windows 上有一个库，位于：K:\SomeDir\someFile.dart，您将需要编写：

```
import '/K:/SomeDir/someFile.dart'; 
```

例子：

```
import 'LibraryFile.dart'; //importing myLib

void main(){ 
  //a class from myLib in the LibraryFile.dart file
  var some = new SomeClassFromMyLibrary(); 
} 
```

LibraryFile.dart 中的 myLib：

```
library myLibrary;
import 'dart:math';

class SomeClassFromMyLibrary{
  String _str = "this is some private String only to myLibrary";
  String pubStr = "created instances of this class can access";
} 
```

这里有一个完整的例子。

```
//TestLib.dart
import 'LibFile.dart'; //SomeLibrary

void main() {
  print("Hello, World!");

  LibFile l = new LibFile();
  print(l.publicString);//public
  print(l.getPrivateString);//private  
  print(l.getMagicNumber); //42
}

//LibFile.dart
library SomeLibrary;
part 'LibFile2.dart';

class LibFile {
  String _privateString = "private";
  String publicString = "public";

  String get getPrivateString => _privateString;

  int get getMagicNumber => new LibFile2().number;
}

//LibFile2.dart
part of SomeLibrary;

class LibFile2 {
  int number = 42;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-04-09T10:32:00.213

虽然我回答得很晚，但答案可能对新开发人员有所帮助。

始终在 dart 包（应用程序/库）中使用 pubspec.yaml 文件。

一旦你运行 pub get 命令，它会将你的本地库添加到 .packages 文件的依赖项列表中。

考虑我有以下项目结构。

[![在此处输入图像描述](../Images/b01ce1e04ec298cab686ff3266aee993.png)](https://i.stack.imgur.com/8nqvv.png)

要在我的 main.dart 文件中引用 greeting.dart 的内容，我应该添加如下库

```
import 'package:my_project_name/greeting.dart' 
```

导入后，我们可以在 main.dart 文件中使用 greeting.dart 文件的内容。注意：我们没有使用实际路径，因为您可以看到缺少“lib”目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-20T12:06:04.650

首先确保您提到的名称`pubspec.yaml` 和您要导入的文件共享完全相同的名称

例子：

```
pubspec.yaml

name: flutter_wordpress_app
description: flutter wordpress app
...
.... 
```

```
// dirOne/dirTwo/greeting.dart

class FavArticleBloc {
   // Your code goes here
} 
```

```
 import 'package:flutter_wordpress_app/dirOne/dirTwo/greeting.dart'

void main(){ 
  var some = new FavArticleBloc(); 
} 
```

但是在`main.dart`您不需要指定 的情况`import 'package:flutter_wordpress_app` 下，只需执行以下操作

```
import 'dirOne/dirTwo/greeting.dart 
```

# xml - 在eclipse中保存时格式化XML？

> ID：12951992
> 
> 赞同：1
> 
> 时间：2012-10-18T10:00:08.870
> 
> 标签：xml, eclipse, formatting

> **可能重复：**
> [Eclipse：保存时自动格式化 XML 文件](https://stackoverflow.com/questions/1677110/eclipse-auto-format-xml-files-on-save)

我知道这可以通过 Java 文件来完成，而较新的 ADT 版本会更新 XML。但是对于非 Android 开发人员，是否可以为 XML 制定一套规则（例如删除空格），可以在保存时应用？

# objective-c - 尝试从字节创建 NSString。它总是返回一个空字符串

> ID：12951998
> 
> 赞同：0
> 
> 时间：2012-10-18T10:00:21.490
> 
> 标签：objective-c, cocoa

我正在尝试从通过网络接收的字节创建一个字符串。我het 的 NSString 总是一个空的。

```
if (stringLength > 0) {
        NSData *bytes = [[NSData alloc] initWithBytes:data+1 length:stringLength];
        result = [[NSString alloc] initWithData:bytes encoding:NSUTF8StringEncoding];
        //result = [[NSString alloc] initWithBytes:data+1 length:stringLength encoding:NSASCIIStringEncoding];
    } 
```

正如我所说，我得到一个空的 NSString。该字符串是一个 base64 编码值，因此它应该是有效的 utf-8，因为它只包含 ascii 符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:25:12.620

也许您的原始字节毕竟不是 UTF-8。或者，也许是因为您传递`data+1`而不是传递`data`自身，所以导致编码尝试失败，因为该进程认为存在不正确的 UTF-8 编码序列。（如果我冒昧的话，请原谅我，但你必须考虑到一切。）无论如何，你严重依赖于你的假设，这是我们不时陷入的陷阱。

这是适合您的策略。如果您尝试使用创建 NSString 实例`NSUTF8StringEncoding`返回 nil，请尝试使用`NSISOLatin1StringEncoding`. 如果返回 nil，则尝试使用`NSMacOSRomanStringEncoding`.

即使在所有这些之后，你得到一个不太正确的字符串，它仍然比一个 nil 字符串更好，因为它可以帮助你显示你是否在其他一些地方犯了错误。

祝你在你的努力中好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:54:05.950

检查它是否真的是base64编码的..

```
CFErrorRef error = NULL;
CFDataRef decodedData;
SecTransformRef decoder;

decoder = SecDecodeTransformCreate(kSecBase64Encoding, &error);
if (error) {
    CFShow(error);
    exit(-1);
}

SecTransformSetAttribute(decoder,
                         kSecTransformInputAttributeName,
                         (CFDataRef *)bytes,
                         &error);

if (error) {
    CFShow(error);
    exit(-1);
}

decodedData = SecTransformExecute(decoder, &error);

if (error) {
    CFShow(error);
    exit(-1);
} 
```