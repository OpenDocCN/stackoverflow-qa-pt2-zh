# StackOverflow 问答 13780000-13780999

# vb.net - 如何检测是否找不到文件

> ID：13780002
> 
> 赞同：2
> 
> 时间：2012-12-08T17:34:40.050
> 
> 标签：vb.net

我对 VB.NET 有点陌生。我想知道是否有办法检测正在打开的文件是否不存在，然后会发生一些事情。这可能吗？是否可以使用“If”语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T20:10:10.093

您可以`file.exists(filename)`在打开它之前使用检查，或者使用 try-catch 块：

```
If not System.IO.File.Exists(filename) Then
  ' file does not exist
  end if 
```

或者

```
Try
  open ...
Catch ex As Exception
  MsgBox(ex.Message)  ' not-found error handling goes here
End Try 
```

您可以`imports system.io`在文件顶部添加使用`File.Exists`而不是`System.IO.File.Exists`.

# java - 评估布尔字符串表达式？

> ID：13780003
> 
> 赞同：0
> 
> 时间：2012-12-08T17:34:41.797
> 
> 标签：java

> **可能重复：**
> [评估以字符串形式给出的数学表达式](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)

如何布尔评估包含布尔表达式的字符串？像：

```
String userVar[] = {"a = 1", "b = 1", "c = 0"};
String expr = "a & b & c";
boolean result = evaluate(expr); //would evaluate to false 
```

用户应该能够定义自己的变量 ( `a = 1`)，并定义自己的布尔表达式 ( `a & b & c`)。因此，我将所有表达式仅作为字符串。我该如何评价它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T18:04:38.560

您可以使用 Nambari 评论的 ScriptEngine：

```
ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript");
String userVar[] = {"a = 1", "b = 1", "c = 0"};

for (String s : userVar) {
    engine.eval(s);
}

String expr = "a & b & c";
System.out.println(engine.eval(expr)); 
```

打印 0。

另请注意，该表达式不是布尔表达式，而是按位运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:00:25.197

最后我为解决上述问题编写了代码。

```
public static void main(String[] args) {
        String userVar[] = { "a = 1", "b = 0", "c = 1" };
        String expr = "a & b & c";

        // System.out.println(Boolean.valueOf("true"));
        Map<String, Boolean> booleanMap = getBooleanMap(userVar);
        // System.out.println(booleanMap);
        boolean evaluate = evaluate(booleanMap, expr);
        System.out.println("Final Result = " + evaluate);

    }

    public static boolean evaluate(Map<String, Boolean> operVal, String eq) {
        String[] split = eq.split(" ");
        boolean orgVal = false;
        boolean prevVal = false;
        boolean firstTime = true;
        String lastOpr = "&";
        for (String exp : split) {
            // System.out.println(orgVal + "  " + exp);
            // System.out.println(exp);
            if (exp.equals("&")) {
                lastOpr = "&";
                orgVal = orgVal && prevVal;
            } else if (exp.equals("|")) {
                lastOpr = "|";
                orgVal = orgVal || prevVal;
            } else {
                prevVal = operVal.get(exp);
                if (firstTime) {
                    orgVal = prevVal;
                    firstTime = false;
                }
            }
        }
        if (lastOpr.equals("&")) {
            lastOpr = "&";
            orgVal = orgVal && prevVal;
        } else if (lastOpr.equals("|")) {
            lastOpr = "|";
            orgVal = orgVal || prevVal;
        }

        // System.out.println(orgVal);
        return orgVal;
    }

    public static Map<String, Boolean> getBooleanMap(String[] val) {
        Map<String, Boolean> result = new HashMap<String, Boolean>();

        for (String exp : val) {
            String[] split = exp.split("=");
            // System.out.println(split[0].trim());
            // System.out.println(split[1].trim());
            String opr = split[0].trim();
            int intVal = Integer.valueOf(split[1].trim());
            boolean boolVal = false;

            if (intVal == 1) {
                boolVal = true;
            }

            result.put(opr, boolVal);

        }

        return result;

    } 
```

**测试用例 - 1**

```
String userVar[] = {"a = 1", "b = 1", "c = 0"}; 
```

*   **输出**最终结果 = false

**测试用例 - 2**

```
String userVar[] = { "a = 1", "b = 1", "c = 1" }; 
```

*   **输出**最终结果 = true

# c - 内存不足故障处理方法

> ID：13780008
> 
> 赞同：0
> 
> 时间：2012-12-08T17:35:13.007
> 
> 标签：c, memory, memory-management, out-of-memory

我正在实现一个函数，我希望它是一个“库质量”函数：

```
char** str_cat(char** const  str, const char * const other ){

    if(str==NULL) 
        return NULL;
    if(other==NULL) 
        return str;
    if(*str==NULL) 
        return str_cpy(str,other);

    char* tmp=(char*)calloc(1,strlen(*str)+strlen(other)+1);
    if(tmp==NULL) 
            return NULL;
    strcat(strcpy(tmp,*str),other); 
    *str=tmp;
    return str;     
} 
```

这是 strcat() 函数的一个版本（不同的签名），可以处理任何极端用例。但是，我的内存不足故障处理方法不适用于大量使用丰富的 str_xxx() API 库的大型应用程序。

问题：有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:00:06.370

我会建议一个包装器`malloc`，比如说`xmalloc`（或一些等效的`calloc`），它返回`NULL`，使内存不足的情况成为应用程序的责任 - 或终止应用程序。对于健壮的、可移植的库来说，前者是一个不错的选择。然而，在现代操作系统的背景下，后者是相当合理的。当发生 OOM 错误时，应用程序会遇到严重问题，并且可能无论如何都无法恢复。`xmalloc`可能会尝试执行一些清理、保存关键数据等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:32:43.403

最好不要更改或释放参数，而是返回一个新分配的字符串：

```
char * mycatcat(char *one, char *two)
{
size_t len1, len2;
char *new;

if (!one && !two) return NULL;
len1 = (one) ? strlen (one) : 0;
len2 = (two) ? strlen (two) : 0;

new = malloc(1+ len1+ len2);
if (!new) return NULL;

if (len1) memcpy (new, one, len1);
if (len2) memcpy (new+len1, two, len2);
new[len1+len2] = 0;

return new;
} 
```

*顺便说一句：如果 malloc()没有*获得字符串一或二，这个函数也应该起作用；因此*不应该被释放*。这样

```
char *onetwo;
onetwo = my_catcat( "eins", "zwo"); 
```

应该管用。（将 const 添加到参数中以获得额外的乐趣）

# java - 在 JEditorPane 中显示可点击的 HTML 链接

> ID：13780010
> 
> 赞同：1
> 
> 时间：2012-12-08T17:35:28.257
> 
> 标签：java, html, swing, hyperlink, jeditorpane

我做了一些谷歌搜索，所有在 html 中实现可点击链接的方法都没有太多解释它们是如何工作的（至少不足以让我理解）。有人愿意详细说明吗？

我的代码：

```
import javax.imageio.ImageIO;
import javax.swing.*;
import java.io.*;
import java.awt.*;
import java.awt.event.*;
import java.net.*;

public class WebBrowser extends JFrame {
    public JPanel
        address_panel, window_panel;

    public JLabel
        address_label;

    public JTextField
        address_tf;

    public JEditorPane
        window_pane;

    public JScrollPane
        window_scroll;

    public JButton
        address_b;

    private Go go = new Go();

    public WebBrowser() throws IOException {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException e1) {
            e1.printStackTrace();
        } catch (InstantiationException e1) {
            e1.printStackTrace();
        } catch (IllegalAccessException e1) {
            e1.printStackTrace();
        } catch (UnsupportedLookAndFeelException e1) {
            e1.printStackTrace();
        }
        Image image = null;
        try {
            image = ImageIO.read(new File("images/icon.gif"));
        } catch (IOException e) {
            e.printStackTrace();
        }
        address_label = new JLabel(" address: ", SwingConstants.CENTER);
        address_tf = new JTextField("");
        address_tf.addActionListener(go);
        address_b = new JButton("Go");
        address_b.addActionListener(go);

        window_pane = new JEditorPane("http://(server):(port)/");
        window_pane.setContentType("text/html");
        window_pane.setEditable(false);

        address_panel = new JPanel(new BorderLayout());
        window_panel = new JPanel(new BorderLayout());

        address_panel.add(address_label, BorderLayout.WEST);
        address_panel.add(address_tf, BorderLayout.CENTER);
        address_panel.add(address_b, BorderLayout.EAST);

        window_scroll = new JScrollPane(window_pane);
        window_panel.add(window_scroll);

        Container pane = getContentPane();
        pane.setLayout(new BorderLayout());

        pane.add(address_panel, BorderLayout.NORTH);
        pane.add(window_panel, BorderLayout.CENTER);

        setIconImage(image);
        setTitle("web browser");
        setSize(800,600);
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

    }

    public class Go implements ActionListener{

        public void actionPerformed(ActionEvent ae){

            try {

                window_pane.setPage("http://(server):(port)/"+address_tf.getText());

            } catch (MalformedURLException e) {
                window_pane.setText("MalformedURLException: " + e);
            } catch (IOException e) {              
                window_pane.setText("IOException: " + e);
            }

        }

    }

} 
```

在此先感谢（请随时指出我的代码中可以改进的任何内容）

艾里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:37:34.717

您需要添加一个`HyperlinkListener`，而不是`ActionListener`。

[请参阅此处](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JEditorPane.html)的教程。

# r - 来自 RScript 中 csv 文件的平淡奥特曼图

> ID：13780012
> 
> 赞同：1
> 
> 时间：2012-12-08T17:35:41.590
> 
> 标签：r, rscript

我有一个简单的 csv 文件，其中包含 2 列数字，标题为“Colli_On”和“Colli_Off”。我编写了一个简单的 Rscript，它传递了 3 个参数——文件名和列名——并且想生成一个平淡无奇的奥特曼图。但是我收到以下错误消息

```
> Error in plot.window(...) : need finite 'xlim' values
Calls: baplot ... do.call -> plot -> plot.default -> localWindow -> plot.window
In addition: Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf
3: In min(x) : no non-missing arguments to min; returning Inf
4: In max(x) : no non-missing arguments to max; returning -Inf 
```

我哪里错了？

```
 #!/usr/bin/Rscript
# -*- mode: R =*-

#script passes 3 arguments filename and 2 columns and does bland altman analysis
#Example BA /home/moadeep/Data/sehcat.csv Colli_on Colli_off

args <- commandArgs(TRUE)
mydata <- read.csv(file=args[1],head=TRUE,sep="\t")

baplot = function(x,y){

  bamean = (x+y)/2
  badiff = (y-x)

  plot(badiff~bamean, pch=20, xlab="mean", ylab="difference")
# in the following, the deparse(substitute(varname)) is what retrieves the
# name of the argument as data
  title(main=paste("Bland-Altman plot of collimator x and y\n",
    deparse(substitute(x)), "and", deparse(substitute(y)),
    "standardized"), adj=".5")
#construct the reference lines on the fly: no need to save the values in new 
# variable names
  abline(h = c(mean(badiff), mean(badiff)+1.96 * sd(badiff),
    mean(badiff)-1.96 * sd(badiff)), lty=2)
} 

pdf(file="test.pdf")
baplot(mydata$args[2],mydata$argss[3])
dev.off() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T01:06:07.417

问题在于这一行：

```
baplot(mydata$args[2],mydata$argss[3]) 
```

更别提错字了...当您要求 时`mydata$args[2]`，R 会在您的 data.frame 中查找名为“args”的列。显然，没有这样的列，所以你得到`NULL`. 从 data.frame 中提取列的编程方式是使用`[`. 正确的语法应该是：

```
baplot(mydata[args[2]],mydata[args[3]]) 
```

那应该可以解决您的问题。

(Also note that the `[` operator, unlike `$`, will throw an error if you are trying to extract a column that does not exist: a preferable feature IMHO.)

# iphone - SIGABRT 错误“未设置查看出口”

> ID：13780016
> 
> 赞同：0
> 
> 时间：2012-12-08T17:36:09.457
> 
> 标签：iphone, view, sigabrt

尝试在我的 iPhone 5 上运行我的应用程序时收到 SIGABRT 错误。我的应用程序基本上需要 3 个视图，并且取决于您正在运行的设备（iPhone 4、iPhone 5 或 iPad），它将启动特定于视图到您的设备类型。

SIGABRT 错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "ViewController_Portrait5" nib but the view outlet was not set.' 
```

我几乎肯定设置了视图出口，但我想我错了。

这是 Xcode 窗口的屏幕截图：

![Xcode 窗口](../Images/d52fa773e3ab76b62642555b09711ba4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:41:02.847

只需将“webView”上方“view”旁边的小圆圈拖到第一个视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:41:22.543

您需要连接“视图”插座。查看该列表“视图”中的项目如何没有连接？您需要确保每个 UIViewController 都连接到一个视图。

由于您将文件命名为“portrait”，我猜您希望视图成为纵向视图，因此将“view”出口与“对象”下的“Portrait”对象连接起来。

# objective-c - 如何使用 NSTask 运行 find cmd

> ID：13780019
> 
> 赞同：1
> 
> 时间：2012-12-08T17:36:49.887
> 
> 标签：objective-c, nstask

我试图让以下 find 命令通过 NSTask 工作：

```
find /Users/user/projects ! -path '*.git*' -ctime -1 
```

但是，我无法让忽略路径部分正常工作。在终端它工作正常。我得到了过去 24 小时的修改文件，不包括 .git 目录。使用 NSTask 时，.git 目录不会被忽略，导致太多的积极因素......我正在使用以下参数：

```
NSArray *args = @[@"/Users/user/projects", @"!", @"-path", @"'*.git*'", @"-ctime", @"-1"]; 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:24:12.933

您可能还会发现这样做更容易。

```
NSString *argString = @"/Users/user/projects ! -path '*.git*' -ctime -1";
[nsTaskName setArguments: [argString componentsSeparatedByString: @" "]]; 
```

当你在终端中调试你的参数时，你可以做一个复制和过去并在它前面添加'find'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:42:57.200

我认为你必须替换论点

```
@"'*.git*'" 
```

经过

```
@"*.git*" 
```

否则 find 将仅忽略命名`'*.git*'`（逐字）的文件。请注意，当您在终端中执行命令时，shell 会删除单引号。

# javascript - 如何将 Javascript 添加到 simple_form？

> ID：13780023
> 
> 赞同：2
> 
> 时间：2012-12-08T17:37:32.900
> 
> 标签：javascript, ruby-on-rails, ruby, simple-form

我在 Rails 3.2.5 中使用 simple_form。我有一个看起来像这样的表格：

```
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-vertical' }, :html => {:name => "new_user"}) do |f| %>
    <%= f.error_notification %>
    <%= f.input :field_one,
                :placeholder => '30000',
            :autofocus => true,
            :required => true,
            :html => {:onFocus => 'startCalc();'},
            :html => {:onBlur => 'stopCalc();'} %>
# More form fields

<% end %> 
```

当用户在表单字段中输入数字时，我试图调用 Javascript 驱动的计算，但 Javascript 未显示在输出的 HMTL 中：

```
<input autofocus="autofocus" class="numeric decimal required" id="field_one" name="user[field_one]" placeholder="30000" step="any" type="number" /> 
```

有谁知道如何让 simple_form 添加这些 Javascript 位？

谢谢！

格雷格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:44:35.247

我现在看到了我的错误。根据[simple_form 文档](https://github.com/plataformatec/simple_form)，我需要使用：

```
:input_html => {:onFocus => 'startCalc();'},
:input_html => {:onBlur => 'stopCalc();'} 
```

这行得通！

# php - 重新声明 file_get_html simple_html_dom.php

> ID：13780025
> 
> 赞同：2
> 
> 时间：2012-12-08T17:37:37.807
> 
> 标签：php, simple-html-dom, simpledom

我正在使用简单的 html dom 来解析 iTunes 预览页面

当我将 URL 放入代码 [download]url[/download] 时，一切正常，但是当我有 2 个或更多 [download]url[/download] 代码时，出现错误

致命错误：无法在第 80 行的 /var/.../simple_html_dom.php 中重新声明 file_get_html()（之前在 /var/.../simple_html_dom.php:65 中声明）

```
function download_link($link){
$file=ROOT_DIR."/engine/data/obmennik.php";
include '/var/.../simple_html_dom.php'; //ПАРСИНГ
require($file);
$site=parse_url($link);
$domain=$site['host'];
$itunes = file_get_html($link); //ПАРС
$image = $itunes->find('img.artwork[width=175]',0); //ПАРС
$e = $itunes->find("div.price", 0);
$u = $itunes->find("h1", 0);
$star = $itunes->find("div.rating", 0);
$un = $itunes->find("div.fat-binary-blurb", 0);
$dt=date('Y-m-d [H:00]');

if(array_key_exists($domain,$link_arr)){
       $link="\n".'<br><a title="Скачать файл c '.$domain.'" rel="nofollow" target="_blank" href="http://li.ru/go?'.$link.'"><div style="-webkit-border-radius: 8px;-moz-border-radius: 8px;border-radius: 8px;background: #DCDCDC;"><table><tr><td width="35%"><img class="its_small" src=\"'.$image->src.'\"  /></td><td width="65%" valign="middle" align="center"><span  style="font-size:16px; font-weight: bold;"> '.iconv("UTF-8","cp1251",$u->plaintext). '<br> [iTunes Link, '.iconv("UTF-8","cp1251",$e->plaintext).']</span><br><br>'.iconv("UTF-8","cp1251",$un->outertext).'<br>Рейтинг на: '.$dt.' '.$star->outertext.'</td></tr></table></div></a>';

} return $link; }

function decode_base64($code){
$code="[download]".trim(base64_decode($code))."[/download]";
return $code;
$itunes->clear();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T17:41:28.207

将您的更改`include`为`include_once`. 这是因为您两次包含同一个文件 - 每次包含它时，您都在声明该`file_get_html`函数。

**编辑**：您可能希望`require`在下一行中对您执行相同操作，将其更改为`require_once`

# c# - 无法设法将列表传递给另一个方法

> ID：13780028
> 
> 赞同：0
> 
> 时间：2012-12-08T17:37:58.297
> 
> 标签：c#, list

我在返回一个列表时遇到问题，这样我就可以将它保存在一个文件中，然后加载它，以便保存权重并再次检索。抱歉这个愚蠢的问题，但我如何从 SaveNetwork 方法调用和保存权重列表，我无法真正掌握我能做些什么来解决这个问题。我知道我还没有创建列表权重的新实例，但是如果我这样做，我将丢失存储在此列表中的当前权重。

```
public class Neuron
{
    private double bias;                       // Bias value.
    private double error;                      // Sum of error.
    private double input;                      // Sum of inputs.
    private double gradient = 5;               // Steepness of sigmoid curve.
    private double learnRate = 0.01;           // Learning rate.
    private double output = double.MinValue;   // Preset value of neuron.

    public List<Weight> weights;              // Collection of weights to inputs.      

    public Neuron() { }

    public Neuron(Layer inputs, Random rnd)
    {
       weights = new List<Weight>();

        foreach (Neuron input in inputs)
        {
            Weight w = new Weight();
            w.Input = input;
            w.Value = rnd.NextDouble() * 2 - 1;
            weights.Add(w);                    
        }          
    }

public static void SaveNetwork(string path)
    {

        FileStream FS = new FileStream(path, FileMode.Create);
        BinaryFormatter BF = new BinaryFormatter();

        BF.Serialize(FS,/* The List in this case is List weights ***/        );
        FS.Close();
    }

    public void LoadNetwork(string path)
    {
        FileStream FS = new FileStream(path, FileMode.Open);
        BinaryFormatter BF = new BinaryFormatter();
        weights = (List<Weight>)BF.Deserialize(FS);
        FS.Close();
    } 
```

对此进行更新——我使用了与下面的代码类似的层次结构，该代码取自 Dynamic Notions 博客，该博客解释了如何创建神经网络。我想要实现的是，在神经网络学会之后，我希望能够保存列表权重，以便在程序停止时我能够加载权重以跳过网络的训练。所以基本上从类网络我想访问这个在神经类中的列表，而不用新方法创建一个新实例，否则我只会得到一个空列表。希望它更清楚，因为我不知道如何更好地解释它......非常感谢

```
public class Network{

//some variables.. 

    [STAThread]
    static void Main()
    {
        new Network();
    } 
    public Network()
    {
        LoadPatterns();
        Initialise();
        Train();
        Test();
    } 

    private void Train()
    {
       double error;
       do
       {
       error = 0;
       foreach (Pattern pattern in _patterns)
        {
            double delta = pattern.Output - Activate(pattern);
            AdjustWeights(delta);
            error += Math.Pow(delta, 2);
        }

        Console.WriteLine("Iteration {0}\tError {1:0.000}", _iteration, error);
        _iteration++;
        if (_iteration > _restartAfter) Initialise();

    } while (error > 0.1);
} 

private void Test()
{
} 

 // Must be able to call and save the List<Weight> From here

private double Activate(Pattern pattern)
{
} 

 private void AdjustWeights(double delta)
 {
    _output.AdjustWeights(delta);

    foreach (Neuron neuron in _hidden)
    {
        neuron.AdjustWeights(_output.ErrorFeedback(neuron));
    }
 } 

 private void Initialise()
 {
    _inputs = new Layer(_inputDims);
    _hidden = new Layer(_hiddenDims, _inputs, _rnd);
    _output = new Neuron(_hidden, _rnd);
    _iteration = 0;
    Console.WriteLine("Network Initialised");
} 

private void LoadPatterns()
{
}

} 

public class Layer : List<Neuron>
{

public Layer(int size)
{
    for (int i = 0; i < size; i++)
        base.Add(new Neuron());
}

 public Layer(int size, Layer layer, Random rnd)
    {
        for (int i = 0; i < size; i++)
        base.Add(new Neuron(layer, rnd)); //this is where Neuron class is instantiated
   }

 }

public class Neuron
 {

    //some other vars 
    private List<Weight> _weights;              // This is the list in question. 

    public Neuron() { } 

    public Neuron(Layer inputs, Random rnd)
    {
      _weights = new List<Weight>();
      foreach (Neuron input in inputs)
        {
        Weight w = new Weight();
        w.Input = input;
        w.Value = rnd.NextDouble() * 2 - 1;
        _weights.Add(w);
        }
    }

}
public class Weight
{
 public Neuron Input;
 public double Value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:41:39.097

从您有评论的地方删除`static`关键字`SaveNetwork()`并使用。`weights`

# c# - 使用接口连接到 SQL Server 数据库

> ID：13780032
> 
> 赞同：1
> 
> 时间：2012-12-08T17:38:15.737
> 
> 标签：c#, sql-server, interface, asp.net-4.0

```
interface IDbInteraction
{
    int GetValueAsInt(string sql);
}

class SQLDbInteraction : IDbInteraction
{
    private string _connStr;

    public SQLDbInteraction (string connStr)
    {
         _connStr = connStr;
    }

    public int GetValueAsInt(string sql)
    {
        int value;

            using(SqlConnection conn=new SqlConnection(_connStr))
            {
                SqlCommand command = new SqlCommand(sql, conn);
                conn.Open();
                value = Convert.ToInt32(command.ExecuteScalar());

            }

        return value;
    }
} 
```

`interface`这是一个关于如何在需要访问 SQL Server 数据库时进行编程的简单示例。

它被提供给我作为替换我在问题中提出的旧代码的建议。

**所以......**，因为我是新的开发人员和`interface`概念/方法/方法的新手，并且因为我并没有真正***连接***到这个术语，`Repository`所以我重命名了......

您能否举一个关于如何使用这两个：`class` &`interface`以上的广泛示例？

如果你可以请提供替代`IRepository`（原名）

你会用**什么**来代替它（如果你不介意的话）？

作为这篇文章的重点，是关于从`obsolete`我使用的不安全和有点技术的转变，现在在尝试转向“*下一代*”编码方法时，

我可以在此示例代码上使用您的帮助来学习用法。

## 更新

我现在所做的是研究网络..仍然，我有这个问题：

是调用/调用的方式 `GetValueAsInt("select aColumn ...")`

现在......当`interface`添加到“方程”时，

**就调用行为而言，它是否改变了任何东西？**

你还`GetValueAsInt()`像现在一样打电话吗？

是不是真的以这种方式并没有真正改变..至于实际使用情况

你现在打电话吗

```
IDbInteraction.GetValueAsInt("select aColumn from...") 
```

或者

```
SQLDbInteraction.GetValueAsInt("select aColumn from...") 
```

或者现在可以同时调用两种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:45:26.023

基于接口的编程基本上用于定义一个类在使用时必须遵守的契约。由于您不熟悉这种术语，我会阅读面向对象编程和设计模式，在那里您将了解存储库模式.. IRepository 只是一个接口名称，您可以随意命名接口。存储库是一种设计模式，在业务逻辑中非常常用到数据访问层。我不确定我是否会将此代码定义为不安全和过时的，但您可能决定使用设计模式和面向对象技术来实现此逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T23:13:39.983

好的，因为我期待一个答案......虽然仍在搜索，但我得出了结论

这就是我要实施的

（说应用的主题是颜色）

```
IDbInteraction colorsData = new SQLDbInteraction("server=(local);Initial Catalog=...");
int colorId= colorsData.GetValueAsInt("SELECT colorId FROM colors WHERE name='jade'")); 
```

因为我将继续寻找正确的答案。如果您在我的实施中发现有问题，请发布您的答案，如果它是正确的，可以请大家投票或其他什么吗？

# jquery - 需要帮助了解 $this 和用户定义值之间的区别

> ID：13780034
> 
> 赞同：0
> 
> 时间：2012-12-08T17:38:31.910
> 
> 标签：jquery, class, this

我快速询问有关 jquery 变量“this”的值的问题。

我采用了一些示例代码，如下所示...

```
function blockHighlite()
{
//  alert ('block ' + $gCurrentClass + ' index ' + $gIndex);

        $(this).data('bgcolor', $(this).css('border-color'));
        $(this).css('border-color','rgba(255,128,0,.5)');
        $(this).css('border-color', $(this).data('bgcolor'));
  }; 
```

此代码可以很好地突出元素边框，但是当我将代码更改为指向这样的特定元素时，使用全局变量来表示所选元素它失败了。我不理解“this”变量的使用吗？变量 $gCurrentClass 和 $gIndex 只是我选择的元素的类和索引。

```
function blockHighlite()
{
    alert ('block ' + $gCurrentClass + ' index ' + $gIndex);
        $gCurrentClass.eq[$gIndex].data('bgcolor', $gCurrentClass.eq[$gIndex].css('border-color'));
        $gCurrentClass.eq[$gIndex].css('border-color','rgba(255,128,0,.5)');
        $gCurrentclass.eq[$gIndex].css('border-color', $gCurrentClass.eq[$gIndex].data('bgcolor'));
  }; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:42:33.407

假设包含一个表示类名的字符串，您需要将其作为查询选择器`$gCurrentClass`传递给 jQuery 构造函数 ( )。`$`尝试以下操作：

```
function blockHighlite()
{
    alert ('block ' + $gCurrentClass + ' index ' + $gIndex);
    $('.'+$gCurrentClass).eq($gIndex).data('bgcolor', $('.'+$gCurrentClass).eq($gIndex).css('border-color'));
    $('.'+$gCurrentClass).eq($gIndex).css('border-color','rgba(255,128,0,.5)');
    $('.'+$gCurrentclass).eq($gIndex).css('border-color', $('.'+$gCurrentClass).eq($gIndex).data('bgcolor'));
}; 
```

# java - 如何在局域网上与客户端建立连接

> ID：13780036
> 
> 赞同：0
> 
> 时间：2012-12-08T17:38:38.480
> 
> 标签：java

我创建了一个可以工作的服务器和客户端应用程序。但是客户端或服务器无法正常工作。如果您运行服务器并在同一台机器上运行客户端它可以工作。但是如果你在一台机器上运行服务器并在另一台机器上运行客户端它就不起作用。如果您能帮助我找出为什么它不允许连接或如何在两台计算机之间建立连接，那就太好了。谢谢你的负载。代码如下：

```
server-----------------------------------------------------------------

import java.io.*;
import java.net.*;

import javax.swing.*;

public class AdditionalServer extends JFrame {
    private JTextArea textWindow= new JTextArea();
    private int port;

    // the constructor
    public AdditionalServer(int portIn)
    {
        port = portIn;
        setTitle("Addition Sever");
        add("Center",textWindow);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(400,300);
        setVisible(true);
        startServer();
    }

    private void startServer() {
        // TODO Auto-generated method stub
        // declare a "general" socket and a server socket
        Socket connection;
        ServerSocket listenSocket;
        //declare low level and high level objects for input
        InputStream inStream;
        DataInputStream inDataStream;

        // declare low level and high level objects for output
        OutputStream outStream;
        DataOutputStream outDataStream;

        // declare other variables
        String client;

        boolean connected;

        while(true){
            try{
                // create a server socket
                listenSocket= new ServerSocket(port,0, InetAddress.getLocalHost());
            //  listenSocket= new ServerSocket(port);
                textWindow.append("Listening on port "+ port +"\n");

                //listen for a connection from the client 
                connection =listenSocket.accept();
                connected = true;

                // create an input stream from the client
                inStream = connection.getInputStream();
                inDataStream = new DataInputStream(inStream);

                // create an output stream from the client
                outStream = connection.getOutputStream();
                outDataStream = new DataOutputStream(outStream);

                // wait for a string from the client
                client = inDataStream.readUTF();
                textWindow.append("Connection esablished with "+ client+ "\n");

                int first, second,sum1;
                String sum = "hi";
                while(connected){
                    //read an integer from the client
                    first = inDataStream.readInt();
                    textWindow.append("First number receievd: "+ first + "\n");

                    //read an integer from the client
                    second = inDataStream.readInt();
                    textWindow.append("Second number receievd: "+ second + "\n");

                    sum1 = first + second;
                    textWindow.append("Sum returned: " + sum1 +"\n");

                    // send the sum to the client 
                    outDataStream.writeInt(sum1);
                    //outDataStream.writeUTF("hi");
                }
            }catch(IOException e){
                connected = false;
            }
        }
    }

    public static void main (String args []){
        new AdditionalServer(8900);

    }
}

client----------------------------------------------------------------------
import java.net.*;
import java.io.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class AdditionClient extends JFrame implements ActionListener {

    // declare the visual components

    private JTextField firstNumber = new JTextField(3);
    private JLabel plus = new JLabel("+");
    private JTextField secondNumber = new JTextField(3);
    private JLabel equals = new JLabel("=");
    private JLabel sum= new JLabel();
    private JTextField msg = new JTextField(20);
    private JButton addButton= new JButton("Press to see the sum of the two numbers");

    // declare low level and high level objects for input
    private InputStream inStream;
    private DataInputStream inDataStream;

    // declare low level and high level objects for output
    private OutputStream outStream;
    private DataOutputStream outDataStream;

    // declare socket
    private Socket connection;

    // declare attribute to told details of remote machine and port
    private String remoteMachine;
    private int port;

    // constructor

    public AdditionClient(String remoteMachineIn, int portIn){
        remoteMachine = remoteMachineIn;
        port= portIn;

        //add the visual components
        add(firstNumber);
        add(plus);
        add(secondNumber);
        add(equals);
        add(sum);
        add(msg);
        add(addButton);

        // configure the frame
        setLayout(new FlowLayout());
        setTitle("Addtion Client");
        msg.setHorizontalAlignment(JLabel.CENTER);
        addButton.addActionListener(this);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(300,150);
        setVisible(true);

        //start the helper method that starts the client
        startClient();
    }

    private void startClient() {
        // TODO Auto-generated method stub
        try{
            // attempt to create a connection to the server
            connection = new Socket(remoteMachine,port);
            msg.setText("connection establish");

            // create an input stream from the server
            inStream = connection.getInputStream();
            inDataStream = new DataInputStream(inStream);

            //create output stream to the server
            outStream = connection.getOutputStream();
            outDataStream = new DataOutputStream(outStream);

            //send the host IP to the server
            outDataStream.writeUTF(connection.getLocalAddress().getHostAddress());

        }catch (UnknownHostException e){
            msg.setText("Unknow host");
        }
        catch (IOException except){
            msg.setText("Network Exception");
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub
        try{
            // send the two integers to the server
            outDataStream.writeInt(Integer.parseInt(firstNumber.getText()));
            outDataStream.writeInt(Integer.parseInt(secondNumber.getText()));

            //read and display the results sent back from the server
            //String results= inDataStream.readUTF();
            int results= inDataStream.readInt();
            sum.setText(""+results);
        }catch(IOException ie){
            ie.printStackTrace();
        }
    }

    public static void main (String args[]){
        new AdditionClient("192.168.07", 8900);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:47:33.617

我想你的问题就在这里。

```
listenSocket= new ServerSocket(port,0, InetAddress.getLocalHost()); 
```

InetAddress.getLocalHost() 应该是您的绑定 ip。在此处提供您的机器 ip，您的客户也应该可以看到它。我建议您`ping`从客户端计算机发送请求。

尝试`ping "your bind ip"`检查您的服务器计算机是否可以通过网络访问。

或者尝试只提供端口。

```
listenSocket= new ServerSocket(port) 
```

# c - C中的整数溢出

> ID：13780039
> 
> 赞同：1
> 
> 时间：2012-12-08T17:39:02.567
> 
> 标签：c, integer-overflow

我有这段代码需要修改以演示整数溢出漏洞。我以前从未这样做过，需要一个良好的开端。

```
#include <stdio.h>

int myprintf(char* argv){
    printf("%s\n", argv);
    return 0;
}

int myprintf2(char* argv){
    printf("hello world\n");
    return 0;
}

int main(int argc, char** argv){
    struct foodata{
        int (*fptr)(char*);
        int buf[4];
    } foo;
    foo.buf[0] = 0xdeadbeef;
    foo.fptr = myprintf;
    foo.buf[0xffffffff] = myprintf2;
    foo.fptr(argv[1]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:32:46.260

行。因此，至少在某些 32 位平台上，您的代码会打印`hello world\n`而不是来自用户的参数。我们通过操作其他数组来更改函数指针。现在我们想将它用于恶意目的。

第一件事 - 我们`myprintf2`用一些危险的东西代替，当调用时没有进行一些检查，比如：

```
void set_authorized(void) {
    authorized = 1;
} 
```

现在，我们需要从用户那里获得一些输入。例如`buf`，当输入看起来有效时，我们将读取四个数字并将它们的总和用作 的索引。

```
int a, b, c, d;
do {
    scanf("%d%d%d%d", &a, &b, &c, &d);
} while (a < 0 || b < 0 || c < 0 || a + b + c > 4);
buf[a+b+c] = d; 
```

看起来我们永远不能在数组之外写，对吧？不，攻击者可以使用数据

```
a = INT_MAX;
b = 1;
c = INT_MAX;
d = (int)set_authorized 
```

INT_MAX + 1 + INT_MAX = INT_MIN + INT_MAX = -1 ( `0xffffffff`)。所以我们基本上有你的例子中的行为，但这次它授予非特权用户一些权限。

注意：要让此示例在 64 位平台上运行，请将 0xffffffff 和 0xffffffffffffffff 替换`int buf[4];`为`long buf[4]`0xffffffffffffff。

# java - 建造雷达

> ID：13780042
> 
> 赞同：1
> 
> 时间：2012-12-08T17:39:43.233
> 
> 标签：java, math, vector, angle

我想尝试在 Java OpenGL 中构建雷达。基本上在该方法中，您传入玩家的当前位置、玩家面对的角度和敌人的位置。如果敌人在正前方，红点（象征敌人）应该在圆圈（雷达）的顶部，可以说是 0 度。如果直接在右侧，红点将是 90 度，等等。基本上，我试图找到直接在玩家面前射出的矢量与从玩家到敌人的矢量之间的角度。我该怎么做呢？我环顾四周，发现了 atan2() 的建议，但还不确定如何使用它。如果有更快，更有效的做事方式，也请告诉我。

编辑：我使用了绘制点的方法而不是点积和cos等，并且我使用玩家的位置作为原点。但是，如果距离大于使用距离公式选择的数字 70，我将如何让敌方点出现在雷达边缘？小于 70 的任何东西都会在雷达内，但任何超过 70 的敌人，我希望敌人只是在雷达边缘盘旋，而不是让敌人的点消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:48:31.543

假设你的玩家和敌人用坐标表示在某个 2D 空间（甚至是 3D 空间，但他们在 2D 平面上移动，例如平地），我认为更简单的方法是直接映射到玩家/敌人实体到雷达上，然后根据玩家当前相对于真北的角度在雷达上应用旋转变换，以玩家为原点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:48:32.950

如果你使用向量，你可以使用两个向量的点积等于它们的大小和它们之间夹角余弦的乘积的性质：

```
你。v = |u| |v| 余弦（θ）
```

`u`你的玩家的方向在哪里，`v`是从你的玩家到敌人的矢量。

你正在寻找`theta`，所以你只需要使用：

```
theta = acos((v . u) / (|v| |u|))
```

请注意，这只会给您角度，而不是向左还是向右。为了找到它，我们可以取叉积，看看它是正还是负：

```
is_left = |u X v| < 0
```

# delphi - 如何在不使用存储过程的情况下使用 dbExpress 框架更改生成器值？

> ID：13780045
> 
> 赞同：2
> 
> 时间：2012-12-08T17:39:57.097
> 
> 标签：delphi, firebird, dbexpress

如何使用 dbExpress 框架更改生成器值？我想直接使用 dbExpress 更改生成器值，而不是在 RDBMS 端等中编写存储过程。请帮助我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:07:00.763

AFAIK DBExpress 没有任何专门处理序列/生成器的类。

您仍然可以使用标准 TSQLQuery 来指示 dbEngine 更改生成器值，如下所示：

```
procedure TMyDataModule.RestartMyGenerator;
begin
  Q := TSQLQuery.Create;
  try
    Q.SQLConnection := MyConnection;
    //compatible with firebird 1.x and 2.x
    //Q.SQL.Text := 'set generator mygenerator to 0';  
    //better alternative, but compatible only with firebird 2.x
    Q.SQL.Text := 'alter sequence mygenerator restart with 0';
    Q.ExecSQL;
  finally
    Q.Free;
  end;
end; 
```

（未经测试的代码，直接写在这个窗口）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:33:11.673

带有参数**TableName**的函数返回下一个生成器值

```
function TDM.GenID(TableName: string): Integer;
var
  Qry: TSQLQuery;
begin
  Qry := TSQLQuery.Create(Self);
  try
    Qry.SQLConnection := SQLConnection;
    Qry.SQL.Add('SELECT GEN_ID(GEN_' + TableName + '_ID' + ', 1) ' +
                'FROM RDB$DATABASE');
    Qry.Open;
    Result := Qry.Fields[0].AsInteger;
  finally
    Qry.Free;
  end;
end; 
```

# android - Phonegap 低性能问题

> ID：13780049
> 
> 赞同：4
> 
> 时间：2012-12-08T17:40:30.927
> 
> 标签：android, performance, cordova, jquery-mobile

我使用包含几个 html 和 js 页面的 PhoneGap 和 JqueryMobile 框架构建了一个 android 应用程序。

第一次加载时间非常长（5-10 秒后与原生应用程序相比）并且页面导航太慢。

从一个屏幕导航到另一个屏幕需要花费大量时间。

是否有任何提示/操作方法/技巧来提高速度？对于经常使用的应用程序，它确实无法使用。

另一个问题是应用程序的内存使用量（一个简单的应用程序大约 50mb）

欢迎所有技巧和提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T19:43:19.670

A few optimization tips I have found to be helpful on slow devices:

*   Try changing the default page transition. Many Android devices do not support hardware accelerated features of the handset in the browser, which means that the CSS3 transitions that JQueryMobile tries to use by default are very slow. You can use:

    ```
    $.mobile.defaultPageTransition = 'none'; 
    ```

    to turn off all of the default transitions.

*   As far as script load time, there is not much you can do besides perhaps examining the individual load times for your dependencies and figuring out alternatives - but you can ensure that your app doesn't look wonky while it loads. Here's a quick hack I use:

    ```
    <style type="text/css">
      .doc {display: none;} /* don't show body by default */
    </style>

    <body id="main_body" class="doc"> 
    ```

    Once everything loads, I call

    ```
    $("#main_body").removeClass("doc"); 
    ```

    to show the application. I use a Javascript preloader (LABjs) in order to ensure all of my dependencies get loaded in order.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:07:15.020

首先，不要使用像 jQuery 这样的重型框架，试试[xuijs](http://xuijs.com/)！

# google-maps - 在 setZoom 之后检测可见的谷歌地图标记

> ID：13780050
> 
> 赞同：0
> 
> 时间：2012-12-08T17:40:34.720
> 
> 标签：google-maps

我正在使用谷歌地图 fitBounds，然后我使用 map.setZoom 放大一个级别（在谷歌找到适合我的标记的最佳缩放级别之后），然后我想检查我的标记在视口中是否可见，如何我可以这样做吗？似乎 map.getBounds().contains 不起作用，请看一下这个小提琴：[fiddle](http://jsfiddle.net/Npu36/2/)

我想检查我的标记是否可见：

```
google.maps.event.addListenerOnce(map, "zoom_changed", function() {
        map.setZoom(map.getZoom()+2);
        if( map.getBounds().contains("35.700592","51.394773"))
alert('ok');   

         but there seems to be an error   
        //alert("the zoom level is now "+map.getZoom());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:30:23.050

为什么你认为`"35.700592","51.394773"`是 google.maps.LatLng？它是用逗号分隔的两个字符串。

这不起作用：

```
google.maps.event.addListenerOnce(map, "zoom_changed", function() {
    map.setZoom(map.getZoom()+2);
    if( map.getBounds().contains("35.700592","51.394773"))
    alert('ok');   
}); 
```

这是使用“包含”（使用 LatLng 对象）的正确方法：

```
google.maps.event.addListenerOnce(map, "zoom_changed", function() {
    map.setZoom(map.getZoom()+2);
    if( map.getBounds().contains(new google.maps.LatLng(35.700592,51.394773)))
    alert('ok');                
}); 
```

您可能想要创建一个包含标记的数组并在标记上使用 .getPosition()

[http://jsfiddle.net/Npu36/10/embedded/result/](http://jsfiddle.net/Npu36/10/embedded/result/)

# jms - Oracle Service Bus (OSB) 代理服务端点 URI 更改

> ID：13780063
> 
> 赞同：0
> 
> 时间：2012-12-08T17:41:20.583
> 
> 标签：jms, osb

我们有一个 OSB 代理服务，当前设置为从外部 jms 队列端点 URI 接收消息。我们的任务是创建一个用于接收外部消息的 JMS 桥。

为此，我们创建了一个带有本地 jms 输入/输出队列的网桥，并继续将 OSB 代理服务的端点 URI 从旧的外部 jms 队列编辑到我们新的本地网桥的 jms 队列。但是，当我们尝试激活更改时，我们得到：`Exception in AppMerge flows' progression`消息。

作为对所有 OSB 的新事物，我不确定此错误的含义以及将代理服务的端点 URI 从远程 jms 队列重新指向本地网桥的 jms 队列是否足以满足我们的要求。

对此事的任何想法将不胜感激！

我们的 OSB 版本是 10gR3。

问候，下午。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:15:30.930

我认为您的代理未正确部署。我认为在创建网桥和队列后，重新启动服务器然后尝试工作。

# r - 按组将数据框转换为部分“宽”和部分摘要

> ID：13780067
> 
> 赞同：0
> 
> 时间：2012-12-08T17:41:50.093
> 
> 标签：r, plyr, reshape, reshape2

我有以下数据框

```
id datestamp hrofday val1 val2 val3
a  20120401 0 3.2 0 1
a  20120401 1 3.3 4 0
a  20120401 2 3.4 6 0
...
a  20120401 23 7.3 0 2 
```

它表示一个用户 ID，后跟一天中的小时，val1 val2 & val3。我想使用 cast 使用 reshape 或 base R 将数据框置于以下形状。对于每个 id，我希望 24 个字段中的每个字段中的 val1 中的值，并同时找到 val2 和 val3 的总数。例如如下所示

```
id datestamp val1.0 val1.1 val1.2 ... val1.23 total.val2 total.val3
a  20120401 3.2 3.3 3.4 ... 7.3 10 3
... 
```

非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T18:17:28.540

不正是您想要的（列名略有不同）：

```
vecs <-  by(dfrm, dfrm$id, FUN= function(dfr) 
return(data.frame(id = dfr$id[1], val1=matrix(dfr$val1, ncol=24), 
                   total.val2=sum(dfr$val2), total.val3=sum(dfr$val3) ) )
         )  

dfvecs <- do.call(rbind, vecs) # Not really needed for single group 
                       # .. but it is the standard way to recombine by() results

> dfvecs
  id val1.1 val1.2 val1.3 val1.4 val1.5 val1.6 val1.7 val1.8 val1.9 val1.10 val1.11
a  a   6.94   5.45   2.83   9.23   2.92   8.37   2.86   2.67   1.87    2.32    3.17
  val1.12 val1.13 val1.14 val1.15 val1.16 val1.17 val1.18 val1.19 val1.20 val1.21
a    3.03    1.59     0.4    2.19    8.11    5.26    9.15    8.31    0.46    4.56
  val1.22 val1.23 val1.24 total.val2 total.val3
a    2.65    3.05    5.07     118.44      99.02 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:00:37.520

我把它分成两部分：`val1`和 总结其余部分。

对于`val1`：

```
require(reshape2)
d <- read.table(file='clipboard', header=TRUE)
#   id hrofday val1 val2 val3
# 1  a       0  3.2    0    1
# 2  a       1  3.3    4    0
# 3  a       2  3.4    6    0
d.m <- melt(d,id.vars = 1:2)
d.val1 <- dcast(d.m,id + variable ~ hrofday)
  # id variable   0   1   2
# 1  a     val1 3.2 3.3 3.4
# 2  a     val2 0.0 4.0 6.0
# 3  a     val3 1.0 0.0 0.0
d.val1.format <- d.val1[d.val1$variable == "val1",-2]
  # id   0   1   2
# 1  a 3.2 3.3 3.4 
```

如果 val1 的观察次数总是固定的（一天中的每个小时），您也可以这样做[（来自这个答案）](https://stackoverflow.com/a/12968332/697568)：

```
aggregate(val1 ~ id, d, c)
  #id val1.1 val1.2 val1.3
#1  a    3.2    3.3    3.4 
```

对其他变量求和：

```
d.others <- aggregate(d[,-(1:3)],by=list(d$id),FUN=sum)
  # Group.1 val2 val3
# 1       a   10    1 
```

然后合并：

```
d.new <- merge(d.val1.format,d.others,by.x="id",by.y="Group.1")
  # id   0   1   2 val2 val3
# 1  a 3.2 3.3 3.4   10    1
colnames(d.new) <- gsub("^(\\d+)$","val1.\\1",colnames(d.new))
  # id val1.0 val1.1 val1.2 val2 val3
# 1  a    3.2    3.3    3.4   10    1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T08:30:30.240

您可以在坚持使用基本 R 的 、 和 函数的同时做到`reshape()`这`aggregate()`一点`merge()`。

这是一个最小的例子：

首先，一些示例数据：

```
set.seed(1) # So you can get the same results that I do
myDF <- data.frame(id = rep(c("a", "b", "c"), each = 48),
                   datestamp = rep(c("20120101", "20120102"), each = 24),
                   hrofday = rep(0:23, times = 6),
                   val1 = runif(144, min = 0, max = 10),
                   val2 = runif(144, min = 5, max = 15),
                   val3 = runif(144, min = 0, max = 5))
list(head(myDF), tail(myDF))
# [[1]]
#   id datestamp hrofday     val1      val2      val3
# 1  a  20120101       0 2.655087 12.293096 0.6611409
# 2  a  20120101       1 3.721239  9.525708 1.1065296
# 3  a  20120101       2 5.728534  6.751268 1.1319040
# 4  a  20120101       3 9.082078 12.466983 0.6570827
# 5  a  20120101       4 2.016819  6.049876 4.9078173
# 6  a  20120101       5 8.983897 13.645449 1.6350686
# 
# [[2]]
#     id datestamp hrofday     val1      val2      val3
# 139  c  20120102      18 9.850952 13.803191 0.4265550
# 140  c  20120102      19 5.076418  8.730634 4.6628596
# 141  c  20120102      20 6.827881  5.479591 4.1919203
# 142  c  20120102      21 6.015412  6.386282 4.3971665
# 143  c  20120102      22 2.388687  8.214921 4.6785623
# 144  c  20120102      23 2.581659  6.548316 0.3623032
# 
```

二、创建要合并的对象：

```
## Use `aggregate` to get the totals for `val2` and `val3`. I used the 
##   `list` structure to be able to define my desired column names
myAggregates <- aggregate(list(total.val2 = myDF$val2, total.val3 = myDF$val3), 
                          list(id = myDF$id, datestamp = myDF$datestamp), 
                          sum, na.rm = TRUE)
myAggregates
#   id datestamp total.val2 total.val3
# 1  a  20120101   229.0276   46.44113
# 2  b  20120101   234.9122   61.15198
# 3  c  20120101   238.5162   61.95309
# 4  a  20120102   269.6523   70.49336
# 5  b  20120102   238.5868   61.07377
# 6  c  20120102   198.4762   67.97553

## Use `reshape()` to change from long to wide. Drop `val2` and `val3`
##   before reshaping (can be done many ways, I did it here by name matching)
myDFwide <- reshape(myDF[!names(myDF) %in% c("val2", "val3")], direction="wide", 
                    idvar=c("id", "datestamp"), timevar="hrofday") 
```

第三，`merge()`用来组合这两个`data.frame`s。我已经发布了 的输出，`str()`因此您可以看到变量名称和它们包含的内容类型。

```
myDF2 <- merge(myDFwide, myAggregates)
str(myDF2)
# 'data.frame':    6 obs. of  28 variables:
#  $ id        : Factor w/ 3 levels "a","b","c": 1 1 2 2 3 3
#  $ datestamp : Factor w/ 2 levels "20120101","20120102": 1 2 1 2 1 2
#  $ val1.0    : num  2.66 2.67 7.32 3.47 4.55 ...
#  $ val1.1    : num  3.72 3.86 6.93 3.34 4.1 ...
#  $ val1.2    : num  5.729 0.134 4.776 4.764 8.109 ...
#  $ val1.3    : num  9.08 3.82 8.61 8.92 6.05 ...
#  $ val1.4    : num  2.02 8.7 4.38 8.64 6.55 ...
#  $ val1.5    : num  8.98 3.4 2.45 3.9 3.53 ...
#  $ val1.6    : num  9.447 4.821 0.707 7.773 2.703 ...
#  $ val1.7    : num  6.608 5.996 0.995 9.606 9.927 ...
#  $ val1.8    : num  6.29 4.94 3.16 4.35 6.33 ...
#  $ val1.9    : num  0.618 1.862 5.186 7.125 2.132 ...
#  $ val1.10   : num  2.06 8.27 6.62 4 1.29 ...
#  $ val1.11   : num  1.77 6.68 4.07 3.25 4.78 ...
#  $ val1.12   : num  6.87 7.94 9.13 7.57 9.24 ...
#  $ val1.13   : num  3.84 1.08 2.94 2.03 5.99 ...
#  $ val1.14   : num  7.7 7.24 4.59 7.11 9.76 ...
#  $ val1.15   : num  4.98 4.11 3.32 1.22 7.32 ...
#  $ val1.16   : num  7.18 8.21 6.51 2.45 3.57 ...
#  $ val1.17   : num  9.92 6.47 2.58 1.43 4.31 ...
#  $ val1.18   : num  3.8 7.83 4.79 2.4 1.48 ...
#  $ val1.19   : num  7.774 5.53 7.663 0.589 0.131 ...
#  $ val1.20   : num  9.347 5.297 0.842 6.423 7.156 ...
#  $ val1.21   : num  2.12 7.89 8.75 8.76 1.03 ...
#  $ val1.22   : num  6.517 0.233 3.391 7.789 4.463 ...
#  $ val1.23   : num  1.26 4.77 8.39 7.97 6.4 ...
#  $ total.val2: num  229 270 235 239 239 ...
#  $ total.val3: num  46.4 70.5 61.2 61.1 62 ... 
```

# c# - 运行网站时看不到网格视图

> ID：13780080
> 
> 赞同：-1
> 
> 时间：2012-12-08T17:43:16.467
> 
> 标签：c#, asp.net

在我的 asp.net 网站项目中，我需要使用从我的访问数据库中获取数据的网格视图。我虽然知道该怎么做。但显然缺少了什么。我将 AccessDataSource 配置为我在数据库中的表，并做了一个网格视图来显示该表的内容。但是当我运行网站时，我仍然无法显示网格。我的代码可能有什么问题？

和另一个问题。当我让它运行时，我需要在单击它时获取该网格中单元格的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:49:26.023

您需要检查的第一件事是您的数据库表是否有数据。如果从 access 数据库中获取的记录为空，那么您将看不到任何 gridview，因为不会有任何记录。第二件事是再次检查数据源 if 并检查访问查询以查看它提供的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:21:18.080

按 F11 调试代码。也许您甚至没有调用执行数据网格数据绑定的函数。

# java - 在Java中将字符串与正则表达式匹配

> ID：13780086
> 
> 赞同：1
> 
> 时间：2012-12-08T17:43:50.290
> 
> 标签：java, regex, finite-automata, automata, dfa

我有一个 DFA，但我不知道它是否接受状态。我只知道它接受的正则表达式。我试图找出它是否是接受状态，所以我查看了 DFA 的每个状态，我想将接受正则表达式与当前状态生成的单词进行比较。

所以我正在寻找可以将这个词与正则表达式进行比较并告诉我它是否匹配的东西，这样我就可以将 DFA 的这个状态标记为接受状态，然后进入另一个状态。我试图实现一些算法，但事实证明这对我来说是一个相当复杂的问题。你能给我建议吗？谢谢！

字母：{a,b,c}

正则表达式示例：ab.(a|c)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:07:15.677

看看这个页面： [http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)

看起来你正在寻找的是：

```
boolean isMatch = Pattern.matches("ab.(a|c)*", str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:10:19.273

这是关于正则表达式模式匹配的 Java 教程：http: [//docs.oracle.com/javase/tutorial/essential/regex/intro.html](http://docs.oracle.com/javase/tutorial/essential/regex/intro.html)

您的问题是正则表达式还是 DFA？

这是您可能想要做的一些示例代码：

```
String state = WHATEVER THE DFA's state is

Pattern p = Pattern.compile("ab.(a|c)*");

Matcher m = p.matcher(state);

boolean isMatch = m.matches(); 
```

# c# - SendEmailAsync 的好处值得怀疑

> ID：13780092
> 
> 赞同：0
> 
> 时间：2012-12-08T17:44:24.037
> 
> 标签：c#

我在 MSDN 文档上阅读了这个，**这似乎暗示在我的代码中调用 SendAsync 方法后我仍然需要等待，该方法粘贴在下面。这是正确的吗？** 如果是，那我还不如直接使用Send的同步方法，而不是SendAsync。我的目标是转到循环中的下一封电子邮件并发送它，而无需等待上一封电子邮件被发送，这将使我能够比使用 Send 方法更快地处理 emailMessages 集合。但这似乎不是真的。

> 调用 SendAsync 后，您必须等待电子邮件传输完成，然后再尝试使用 Send 或 SendAsync 发送另一封电子邮件。

我正在使用 C# 和 .Net 框架 4.5。在我的代码中，我尝试使用 SendAsync 方法从循环中发送多封电子邮件，如下面的代码所示。

```
List<EmailMessage> emailMessages = DAL.GetEmailsToBeSent();
SmtpClient client = new SmtpClient(); 

foreach(EmailMessage emailMessage in emailMessages)
{
  //create a message object from emailMessage object and then send it asynchronously
  client.SendAsync(message);
 //client.Send(message);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:55:15.893

该`async`方法优于非异步替代方法的优点是您不需要阻塞当前线程。这在您不想阻塞 UI 线程的 UI 环境中特别有用，并且还可以防止阻塞线程池线程的需要。

如果您只是对结果进行阻塞等待，那么与非异步替代方案相比，它没有优势。

# delphi - TButton + VK_Return

> ID：13780093
> 
> 赞同：2
> 
> 时间：2012-12-08T17:44:27.890
> 
> 标签：delphi

在这里，我复制了我遇到过几次的情况。我有两种形式。表格 1 和表格 2。Form1 有一个编辑字段并连接了 OnKeyup 事件。Form2 只有一个按钮，并且连接了 OnClick。当 Form1 用户在 TEdit 类型的字段中按 VK_Retrun 时，执行 Form2.Show。Form2 显示在按钮上。OnClick 事件与内部的代码“关闭”相关联。如果用户按下键盘上的 VK_RETURN 键，Form2 会按预期关闭。但问题来了，Form2 再次被直接触发。似乎当 Form1 获得焦点时，密钥仍在“队列”中，并且编辑字段将继续使用 VK_RETURN。

以下是这种情况的完整列表：

```
 unit UTestButton;

    interface

    uses
      Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
      Dialogs, StdCtrls;

    type
      TForm1 = class(TForm)
        Edit1: TEdit;
        procedure Edit1KeyUp(Sender: TObject; var Key: Word;
          Shift: TShiftState);
      private
        { Private declarations }
      public
        { Public declarations }
      end;

    var
      Form1: TForm1;

    implementation

    uses UTestButton2;

    {$R *.dfm}

    procedure TForm1.Edit1KeyUp(Sender: TObject; var Key: Word;
      Shift: TShiftState);
    begin
      if (Key = VK_Return) THEN
        Form2.Show;
    end;

    end. 
```

这是第二单元。

```
 unit UTestButton2;

    interface

    uses
      Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
      Dialogs, StdCtrls;

    type
      TForm2 = class(TForm)
        Button1: TButton;
        procedure Button1Click(Sender: TObject);
      private
        { Private declarations }
      public
        { Public declarations }
      end;

    var
      Form2: TForm2;

    implementation

    {$R *.dfm}

    procedure TForm2.Button1Click(Sender: TObject);
    begin
      Close;
    end;

    end. 
```

在实践中，我有时会使用带有标签或信息的简单表单，但只有一两个按钮并专注于按钮。用户可以按预期按键盘上的键。如果他使用 vk_return 并且底层控件使用密钥，我必须做一些解决方法来清除缓冲区的密钥

```
 PeekMessage(Mgs, 0, WM_CHAR, WM_CHAR, PM_REMOVE); 
```

这对我来说并不完全令人满意。有没有人解决这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:51:04.540

只需处理[`OnKeyDown`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TWinControl.OnKeyDown)事件而不是[`OnKeyUp`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TWinControl.OnKeyUp)初始编辑框：

```
procedure TForm1.Edit1KeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if (Key = VK_RETURN) then
    Form2.Show;
end; 
```

# c# - Json.net：JObject.SelectToken 可以做 XPath 可以做的同样的事情吗？如果是，语法是什么？

> ID：13780097
> 
> 赞同：6
> 
> 时间：2012-12-08T17:44:36.140
> 
> 标签：c#, xml, regex, xpath, json.net

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-16T16:53:54.980

来自 JSON.NET 的作者：

由于 Json.NET 6.0 使用对 JSONPath 的完全支持来支持 SelectToken，JSONPath 是一种类似于 XPath 的 JSON 查询语言。

```
JObject o = JObject.Parse(@"{
  ""Manufacturers"": [
    {
      ""Name"": ""Acme Co"",
      ""Products"": [
        {
          ""Name"": ""Anvil"",
          ""Price"": 50
        }
      ]
    },
    {
      ""Name"": ""Contoso"",
      ""Products"": [
        {
          ""Name"": ""Elbow Grease"",
          ""Price"": 99.95
        },
        {
          ""Name"": ""Headlight Fluid"",
          ""Price"": 4
        }
      ]
    }
  ]
}");

// manufacturer with the name 'Acme Co'
var acme = o.SelectToken("$.Manufacturers[?(@.Name == 'Acme Co')]"); 
```

[有关博客文章的](http://james.newtonking.com/archive/2014/02/01/json-net-6-0-release-1-%E2%80%93-jsonpath-and-f-support)更多详细信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T22:01:43.550

> JObject.SelectToken 可以做 XPath 可以做的同样的事情吗？
> 
> SelectToken 函数的 Path 参数的语法是什么？

我相信它只支持单个令牌的字符串路径，例如`"branches[0].employees[0].name"`

> 如何选择 Name=”Name1” 的所有员工 EmpId？

我不确定`SelectToken`能否做到这一点，并且您的问题的限制排除了最常见的解决方案。

> 我找不到太多关于要传递给 SelectToken 函数的路径字符串的文档（基本上是语法）。

[这里的](http://james.newtonking.com/projects/json/help/index.html?topic=html/SelectToken.htm)一些文档：

> 路径由用句点分隔的属性名称和数组索引组成。数组索引可以使用方括号或圆括号。

# android - setTextureRegion AnimatedSprite

> ID：13780102
> 
> 赞同：0
> 
> 时间：2012-12-08T17:45:12.377
> 
> 标签：android, andengine, animated

I'm developping a game which implements gif sprites... After start with gif I used png image and for change the TextureRegion of my sprite I followed this guide: [Sprite.setImage() in andengine](https://stackoverflow.com/questions/11667668/sprite-setimage-in-andengine) and it worked very well.

Now I want to do the same thing with AnimatedSprite. Can someone tell me How i can edit the org.anddev.andengine.entity.sprite.AnimatedSprite.java to create:

`sprite.setAnimatedTextureRegion(PixelPerfectTiledTextureRegion textureRegion)`

P.S I use also [PixelPerfect](https://github.com/MakersF/AndEngineCollisionsExtension)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:19:28.900

The `AnimatedSprite` class uses the same texture region declared in `BaseSprite`, so the code in the link you gave will work - just paste it in the AnimatedSprite.java file:

```
public void setTiledTextureRegion(TiledTextureRegion textureRegion) {
    this.mTextureRegion = textureRegion;
} 
```

*Note:* If the different tiled textures have different number of tiles (So each has a different animation parameters associated with it) you should handle it in your code. It may get complicated, so I'd just create a new `AnimatedSprite` instead of replacing the texture region.

# java - 如何删除jinternal框架标题栏java上的左侧下拉菜单

> ID：13780107
> 
> 赞同：0
> 
> 时间：2012-12-08T17:45:21.513
> 
> 标签：java, swing, netbeans-7, jinternalframe

1.  如何仅在内部框架标题栏上删除或隐藏左侧下拉菜单，而不是删除或隐藏整个标题栏。

2.  如何通过在 jdesktop 窗格中按住鼠标来设置不移动 jinternal 框架。

检查下面的快照以更好地理解我的问题我想要什么：

[http://i49.tinypic.com/1zfned2.jpg](http://i49.tinypic.com/1zfned2.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:04:16.380

据我所知，唯一的方法是将您自己的 UI 委托用于内部框架。请参阅[http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)了解 UI 委托如何工作的文章。

由于您似乎使用 Synth 的外观感觉，您应该能够轻松创建`SynthInternalFrameUI`自己`createNorthPane()`的`SynthInternalFrameTitlePane`.

此自定义标题窗格将依次覆盖该`addSubComponents()`方法，以便不添加`menuButton`. 我还没有测试过所有这些，所以也许你需要重写其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:22:16.140

**1.**如何仅在内部框架标题栏上删除或隐藏左侧下拉菜单，而不是删除或隐藏整个标题栏。**源代码：**

```
BasicInternalFrameUI ui = (BasicInternalFrameUI)internalFrame.getUI();
Container north = (Container)ui.getNorthPane();
north.remove(0);
north.validate();
north.repaint(); 
```

**2.**如何在jdesktop窗格中设置不通过鼠标按住移动内部框架。**源代码：**

```
 for(MouseListener listener : ((javax.swing.plaf.basic.BasicInternalFrameUI) internalFrame.getUI()).getNorthPane().getMouseListeners()){
        ((javax.swing.plaf.basic.BasicInternalFrameUI) internalFrame.getUI()).getNorthPane().removeMouseListener(listener);
        } 
```

谢谢

# opengl - gl_bitmap texture mode behavior doesn't follow spec?

> ID：13780109
> 
> 赞同：0
> 
> 时间：2012-12-08T17:45:44.537
> 
> 标签：opengl

For reasons detailed [here](https://stackoverflow.com/questions/13716855/opengl-opencl-interop-transfer-times-texturing-from-bitmap) I need to texture a quad using a bitmap (as in, 1 bit per pixel, not an 8-bit pixmap).

Right now I have a bitmap stored in an on-device buffer, and am mounting it like so:

```
glBindBuffer(GL_PIXEL_UNPACK_BUFFER, BFR.G[(T+1)%2]);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, W, H, 0, GL_COLOR_INDEX, GL_BITMAP, 0); 
```

The OpenGL spec has this to say about glTexImage2D: *"If type is GL_BITMAP, the data is considered as a string of unsigned bytes (and format must be GL_COLOR_INDEX). Each data byte is treated as eight 1-bit elements..."*

Judging by the spec, each bit in my buffer should correspond to a single pixel. **However, the following experiments show that, for whatever reason, it doesn't work as advertised:**

1) When I build my texture, I write to the buffer in 32-bit chunks. From the wording of the spec, it is reasonable to assume that writing 0x00000001 for each value would result in a texture with 1-px-wide vertical bars with 31-wide spaces between them. However, it appears blank.

2) Next, I write with 0x000000FF. By my apparently flawed understanding of the bitmap mode, I would expect that this should produce 8-wide bars with 24-wide spaces between them. Instead, it produces a white 1-px-wide bar.

3) 0x55555555 = 1010101010101010101010101010101, therefore writing this value ought to create 1-wide vertical stripes with 1 pixel spacing. However, it creates a solid gray color.

4) Using my original 8-bit pixmap in GL_BITMAP mode produces the correct animation.

**I have reached the conclusion** that, even in GL_BITMAP mode, the texturer is still interpreting 8-bits as 1 element, despite what the spec seems to suggest. The fact that I can generate a gray color (while I was expecting that I was working in two-tone), as well as the fact that my original 8-bit pixmap generates the correct picture, support this conclusion.

**Questions:**

1) Am I missing some kind of prerequisite call (perhaps for setting a stride length or pack alignment or something) that will signal to the texturer to treat each byte as 8-elements, as it suggests in the spec?

2) Or does it simply not work because modern hardware does not support it? (I have read that GL_BITMAP mode was deprecated in 3.3, I am however forcing a 3.0 context.)

3) Am I better off unpacking the bitmap into a pixmap using a shader? This is a far more roundabout solution than I was hoping for but I suppose there is no such thing as a free lunch.

# javascript - select2，如何格式化元素呢？

> ID：13780113
> 
> 赞同：2
> 
> 时间：2012-12-08T17:46:18.070
> 
> 标签：javascript, jquery, yii, jquery-select2

我已经阅读了官方 API 文档，但我并没有真正理解。

```
 function format(state) {
            if (!state.id) return state.text; // optgroup
            return "<img class='flag' src='images/flags/" + state.id.toLowerCase() + ".png'/>" + state.text;
        }
        $("#e4").select2({
            formatResult: format,
            formatSelection: format
        }); 
```

以下是 select2 关于如何格式化元素的代码。

但是，我不太明白这到底是`format(state)`什么`state`意思？

* * *

我有一个下拉列表（来自关联数组的数据，user_id=>username），现在我想格式化下拉结果元素，这样用户不仅可以选择用户名，还可以在用户名旁边看到用户的头像。

这是我的一些代码......**但它不起作用。**

```
<script>
$(document).ready(function(){
        $("#s2id2").select2({
            formatResult: function(){return "<img width='25px' height='25px' src='<?php echo $avatar;?>'/>" + "<?php echo $friend->username;?>";},
            formatSelection: function(){return "<img width='25px' height='25px' src='<?php echo $avatar;?>'/>" + "<?php echo $friend->username;?>";},
        });
});
</script> 
```

同样，我的数据结构是“ `user_id=>username`”......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:16:44.280

原来我放弃了使用 javascript，而是使用以下函数：

```
foreach($friends as $friend){
$avatar = Profile::model()->findByPk($friend)->avatar;
array_push_assoc($list,$friend2->sender,"<img width='20px;' height='20px;' style='float:left; margin-left:10px; margin-right:10px;' src='".$avatar2."'/>".$friend2->senderx->username);
} 
```

# webview - 加载具有特定偏移量的 WebView

> ID：13780116
> 
> 赞同：1
> 
> 时间：2012-12-08T17:46:47.287
> 
> 标签：webview

我正在构建一个应该加载 html 呈现的网页的应用程序，它可以工作，但是，它应该从页面顶部加载视图，如果我希望它从特定偏移量加载怎么办？我试图在布局中添加参数 ScrollX 和 ScrollY，但它只是让应用程序崩溃......那么我怎样才能实现这样的行为呢？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T08:20:33.363

您可以设置`contentOffset`您的`WEbView`- 代码将是这样的 -

```
[webView setContentOffset:CGPointMake(0,-20) animated:YES]; 
```

# objective-c - 重启到训练营（xcode OSX）

> ID：13780118
> 
> 赞同：0
> 
> 时间：2012-12-08T17:47:06.660
> 
> 标签：objective-c, xcode, macos, cocoa

我有点卡在我的代码中，我有一个带有 1 个按钮的 gui，而那个按钮只需要重新启动我的 mac 到我的训练营。任何人都可以帮我处理这段代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:56:31.703

你需要一个具有root权限的帮助工具，`/usr/sbin/bless`然后运行`shutdown`（仅供参考：这不会进入应用商店。）

# wpf - .toFixed(2) 的 XAML 等效项是什么？

> ID：13780120
> 
> 赞同：1
> 
> 时间：2012-12-08T17:47:35.697
> 
> 标签：wpf, xaml, binding, string-formatting

我想在 a 中显示一个数字`Label`，它应该被格式化为 2 位小数（总是）。

**例子：**

```
<Label Content="{Binding MyMoneyAmount}" /> 
```

如果`MyMoneyAmount`= 100，那么它应该显示为：*100.00*而不是*100*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:52:13.217

```
<Label Content="{Binding MyMoneyAmount, StringFormat={0:F2}}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:14:45.613

根据这个 SO [Does StringFormat work on Label Content](https://stackoverflow.com/questions/4782914/does-stringformat-feature-of-wpf-xaml-work-on-label-content)以及我自己的测试，StringFormat 不会在标签上工作，因为 Content 是 Object 类型，这反映在本页的另一个答案中。

您可以使用此解决方法（例如显示为货币）：

```
<Label><TextBlock Text="{Binding Source={myValue}, StringFormat={}{0:N2}}" /></Label> 
```

# internet-explorer - IE 9 中带有渐变背景的 CSS 菜单上的 Z 索引或溢出问题

> ID：13780124
> 
> 赞同：2
> 
> 时间：2012-12-08T17:48:11.623
> 
> 标签：internet-explorer, hover, z-index, css

当尝试在菜单容器上使用渐变背景显示`css:hover`菜单时`<ul>`， IE 会出现另一个问题。`<li>`

悬停 li 在使用渐变背景时被截断，并且在没有渐变背景的情况下正确显示。

它适用于 Chrome 和 FF ......

[**带渐变的演示**](http://jsfiddle.net/hXVTG/1/)

[**没有渐变的演示**](http://jsfiddle.net/hXVTG/2/)

带有渐变的源（无需删除 .bg 类）

HTML

```
<div class="header bg">
<div id="menu">
    <ul>
       <li><a href="#">Menu</a>
            <ul>
               <li><a href="#">Sub-menu 1</a></li>
               <li><a href="#">Sub-menu 2</a></li>
               <li><a href="#">Sub-menu 3</a></li>
               <li><a href="#">Sub-menu 4</a></li>                
               <li><a href="#">Sub-menu 5</a></li>
            </ul>
        </li>
    </ul>
</div>
</div> 
```

CSS

```
.header {position:fixed;top:0px;right:0px;left:0px;z-index:10;height:110px;}
.bg {background-image: -moz-linear-gradient(top, #CCCCCC, #888888);
    background-image: -webkit-gradient(linear, left top, left bottom, from(#CCCCCC), to(#888888));
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#CCCCCC,endColorstr=#888888);
    -ms-filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#CCCCCC,endColorstr=#888888);    
}

#menu {width:960px;z-index:20;position:relative;height:40px;}
#menu ul {
 margin:0;
 padding:0;
 list-style-type:none;
 text-align:center;
 }
#menu li {
background:#009966;
 float:left;
 padding:0;
 margin-right:1px;
}
#menu li a {
font-size:16px;display:block;width:191px;line-height:40px;color:#FFF;text-decoration:none;
 }
#menu li:hover{background:#FF6600;}
#menu ul li ul {display:none;}
#menu ul li:hover ul {display:block;}
#menu li:hover ul li {float:none;margin:0;padding-bottom:0px;}
#menu li ul li a  {text-align:left;text-indent:10px;font-size:12px;background:none;color:#000;}
#menu li ul li a:hover {} 
```

任何人都可以帮助我如何使它与 IE 一起工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:17:34.240

没有人找到解决方案？;-)

该问题是通过使用 z-index 属性产生的。

太疯狂了，但是IE在这种情况下不喜欢它，我不知道为什么，如果有人能找到一个好的理由，请告诉我......

[**带有渐变且没有 z-index 的演示。**](http://jsfiddle.net/hXVTG/8/)

线路变了

```
.header {position:fixed;width:100%;left:0px;height:110px;} 
```

# php - 文件意外结束错误 - 删除功能修复问题

> ID：13780131
> 
> 赞同：1
> 
> 时间：2012-12-08T17:49:00.143
> 
> 标签：php, syntax-error

好的，我一遍又一遍地查看了这段代码，但我似乎找不到问题以及为什么会出现这个错误，这是文件的结尾：

```
function ouputMainSlider() {

    global $USER;

    // Get details
    $query = "SELECT id, bigimage, heading, fullarticle, dateadded FROM news WHERE status = 1 ";
    $query .= "AND (state = '" . $USER->state . "' OR state = 'ALL') AND newstype != 1 and bigimage != '' ";
    $query .= "ORDER BY dateadded DESC LIMIT 10";
    $restresult = mysql_query($query);

    while ($restaurant = mysql_fetch_array($restresult)) :

        // Trim article for preview
        $preview = trim_str($restaurant['fullarticle'], 270);

        ?>

        <li>

            <img alt="<?=fixup($restaurant['heading'])?>" src="images/frontpage/<?=$restaurant['bigimage']?>" width="615" height="309" />
            <a href="#" class="read-more">Read More</a>
            <p>         
                <strong><a href="#"><?=fixup($restaurant['heading'])?></a></strong>
                <em><?=fixup($preview)?></em>               
            </p>

        </li>

    <?php endwhile; ?>

}

?> 
```

如果我取出该功能，问题就会消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:51:38.940

这是由于您的`<?php endwhile; ?>`，它`?>`在关闭功能之前关闭`}`，而无需重新打开`<?php`。由于内部没有后续代码`<?php ?>`，PHP 解析器将外部的剩余内容视为纯文本输出，并假定您没有正确关闭`}`. 碰巧那是文件的结尾，这就是报告错误的方式。

```
while ($restaurant = mysql_fetch_array($restresult)) :

        // Trim article for preview
        $preview = trim_str($restaurant['fullarticle'], 270);

        ?>

        <li>

            <img alt="<?=fixup($restaurant['heading'])?>" src="images/frontpage/<?=$restaurant['bigimage']?>" width="615" height="309" />
            <a href="#" class="read-more">Read More</a>
            <p>         
                <strong><a href="#"><?=fixup($restaurant['heading'])?></a></strong>
                <em><?=fixup($preview)?></em>               
            </p>

        </li>

    <?php
     endwhile; // Don't close ?> here! 
```

该`while: / endwhile`语法对于*主要*将 HTML 与 PHP 代码混合的模板很有用，但在这样的函数中使用时可能会造成混淆，因为您会失去开放组和封闭`{}`组提供的视觉提示。我有点建议不要以这种方式混合语法。

真的，我建议不要`<?php ?>`在函数内关闭和重新打开，但这是风格问题。相反，构造函数输出的字符串和`echo`/或`return`它们。

```
function ouputMainSlider() {
    global $USER;

    // Get details
    $query = "SELECT id, bigimage, heading, fullarticle, dateadded FROM news WHERE status = 1 ";
    $query .= "AND (state = '" . $USER->state . "' OR state = 'ALL') AND newstype != 1 and bigimage != '' ";
    $query .= "ORDER BY dateadded DESC LIMIT 10";
    $restresult = mysql_query($query);

    $html = "";
    while ($restaurant = mysql_fetch_array($restresult)) {
        // Trim article for preview 
        // You can't call functions in the HEREDOC, so call them here first
        $preview = fixup(trim_str($restaurant['fullarticle'], 270));
        $heading = fixup($restaurant['heading']);

        // Build the string with a HEREDOC, insead of directly sending it to the output buffer
        // by closing ?> and reopening <?php
        $html .=<<<HTMLSTRING
        <li>
            <img alt="$heading" src="images/frontpage/{$restaurant['bigimage']}" width="615" height="309" />
            <a href="#" class="read-more">Read More</a>
            <p>         
                <strong><a href="#">$heading</a></strong>
                <em>$preview</em>               
            </p>
        </li>
HTMLSTRING;
// No whitespace before the closing of the HEREDOC!
    }
    // Then echo the HTML output
    echo $html;
} 
```

# .net - Swagger.net - 如何在 xml 注释中指定 UI 注释

> ID：13780132
> 
> 赞同：1
> 
> 时间：2012-12-08T17:49:07.960
> 
> 标签：.net, asp.net-mvc-4, asp.net-web-api, swagger

我刚开始第一次使用 swagger，似乎无法弄清楚如何让实现说明通过 Xml Documention 注释显示任何内容。

我已经搜索了几个小时的文档，但没有看到任何关于如何填充 json 输出中的特定字段的内容。

我希望动态完成此操作，并且不想为此数据创建静态 json 文件是否有关于指定哪些字段以获得特定输出的教程或其他文档。

还有一种方法可以根据输入模型在 UI 输出中的操作方法上显示示例 json 请求，而无需手动显示这些请求

编辑：

我遇到的另一个问题是，如果我有一个标记为 Authorize Swagger UI 的简单 get 方法完全中断，并且当我尝试将 Authorize 标头（我正在使用 Bearer 令牌）添加到 javascript api 中的 headers 选项时，授权令牌永远不会被发送代码如下

```
 $(function () {
        window.swaggerUi = new SwaggerUi({
            discoveryUrl: "/api/swagger",
            dom_id: "swagger-ui-container",
            docExpansion: 'list',
            headers: { "Authorization":"Bearer Y2xtY2dyYXRoX2ZhY19jcmRJQ1RHV1MuQ29vcmRpbmF0b3IsRmFjdWx0eS42RC1BMi02Mi03Mi00Qi00Mg=="},
            supportHeaderParams: true,
            supportedSubmitMethods: ['get', 'post', 'put', 'delete']

        });

        window.swaggerUi.load();

    }); 
```

当我在我的消息处理程序中收到请求时，authHeader 为空，并且在标头集合中根本不存在，并且承载令牌一直运行良好，直到现在使用 Fiddler 是否在 swagger api 中发生了什么我需要做的事情我错过了我几乎完全按照文档进行操作，上面的功能除了身份验证之外工作正常，我无法弄清楚如何填充实施说明

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:01:33.533

从[源代码](https://github.com/miketrionfo/Swagger.Net/blob/master/Swagger.Net/XmlCommentDocumentationProvider.cs#L79)中，您的注释中的 <remarks/> 元素似乎提供了实现说明。例如：

```
/// <summary>
/// Gets the resource by the specified ID.
/// </summary>
/// <param name="id">The id.</param>
/// <remarks>These remarks end up in the implementation notes of swagger</remarks>
public string Get(int id)
{
    return "my resource at " + id;
} 
```

# android - 使用 yawcam 在 android 中流式传输网络摄像头

> ID：13780134
> 
> 赞同：1
> 
> 时间：2012-12-08T17:49:22.603
> 
> 标签：android, webcam

我已经创建了一个 android 应用程序。使用安装在我的电脑上的 yawcam 作为服务器来浏览我的 android 应用程序中的网络摄像头提要。但是，我得到的是，实际上就像在浏览器中的视频一样，有更多的白色未使用空间这是我的代码：

公共类 ViewVideo 扩展 Activity{

```
@SuppressLint("NewApi")
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);  

       //String ipAddress = getIntent().getStringExtra("ipAddress");
       // String portNumber= getIntent().getStringExtra("portNumber");
      SharedPreferences app_preferences1 = PreferenceManager.getDefaultSharedPreferences(this);
      String ip = app_preferences1.getString("ip", "null");

      SharedPreferences app_preferences2 = PreferenceManager.getDefaultSharedPreferences(this);
      String port = app_preferences2.getString("port", "null");

        WebView engine = (WebView) findViewById(R.id.web_engine);
        engine.setInitialScale(1);
        engine.getSettings().setLoadWithOverviewMode(true);
        engine.getSettings().setUseWideViewPort(true);
        engine.getSettings().setJavaScriptEnabled(true);
        engine.loadUrl("http://"+ip+":"+port);

Button btnBack = (Button) findViewById(R.id.btnBack);
//Listening to button event
btnBack.setOnClickListener(new View.OnClickListener() {
public void onClick(View arg0) {
Intent myIntent = new Intent(ViewVideo.this,CameraActivity.class);
startActivity(myIntent); 
```

} });

我想要做的是想以全屏模式查看网络摄像头流而没有空白，我知道这是因为我正在使用 webview() 方法。有没有可能在不使用 webview 的情况下查看 yawcam 提要的方法？如果我的问题有任何弱点，我很抱歉。提前致谢

# c - 有效计算 nCk mod p

> ID：13780137
> 
> 赞同：0
> 
> 时间：2012-12-08T17:49:34.263
> 
> 标签：c, performance, overflow, combinatorics

我多次遇到这个问题，但我无法解决它。会发生一些情况或其他情况会错误答案，否则我编写的程序会太慢。正式地说，我在谈论计算

`nCk mod p`其中 p 是素数 n 是一个大数，并且 1<=k<=n。

我尝试了什么：

我知道阶乘的递归公式，然后将其建模为动态规划问题，但我觉得它很慢。递归公式是`(nCk) + (nCk-1) = (n+1Ck)`。我在将值存储在数组中以避免溢出时处理了模数，但我不确定仅对`mod p`结果执行 a 是否会避免所有溢出，因为可能会发生需要删除的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-25T23:10:34.533

要计算 nCr，有一个基于规则的简单算法`nCr = (n - 1)C(r - 1) * n / r`：

```
def nCr(n,r):
  if r == 0:
    return 1
  return n * nCr(n - 1, r - 1) // r 
```

现在在模算术中，我们没有除法，但我们有模逆（当用素数模数时）同样好

```
def nCrModP(n, r, p):
  if r == 0:
    return 1
  return n * nCrModP(n - 1, r - 1) * modinv(r, p) % p 
```

这是rosettacode上modinv的一种[实现](https://rosettacode.org/wiki/Modular_inverse#Python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:35:16.420

首先，让我们处理 p 相对较小的情况。取 n 和 k 的基数展开式：写 n = n_0 + n_1 p + n_2 p^2 + ... + n_m p^m 和 k = k_0 + k_1 p + ... + k_m p^m 其中每个n_i 且每个 k_i 至少为 0 但小于 p。一个定理（我认为这是由于 Edouard Lucas）指出 C(n,k) = C(n_0, k_0) * C(n_1, k_1) * ... * C(n_m, k_m)。这简化为在下面的“n 相对较小”的情况下取数字的 mod-p 乘积。

其次，如果 n 相对较小，您可以使用公式 C(n,k) = C(n-1,k-1) + C(n-1,k) 的动态规划计算二项式系数，减少 mod p在每一步。或者做一些更聪明的事情。

第三，如果 k 相对较小（并且小于 p），您应该能够通过计算 n!/(nk)! 来计算 n!/(k!(nk)!) mod p！作为 n * (n-1) * ... * (n-k+1)，在每个乘积后减少模 p，然后乘以 1 和 k 之间每个数字的模逆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:21:11.807

不确定“*将值存储在数组中*”是什么意思，但我假设它们数组在运行时用作查找表，以避免冗余计算以加快速度。这应该解决速度问题。关于溢出-您可以在计算的任何阶段执行模运算并根据需要重复它-结果将是正确的。

# iphone - 在 UICollectionView 上动态设置布局导致莫名其妙的 contentOffset 变化

> ID：13780138
> 
> 赞同：71
> 
> 时间：2012-12-08T17:49:34.437
> 
> 标签：iphone, ios, ios6, uicollectionview

根据 Apple 的文档（并在 WWDC 2012 上吹捧），可以`UICollectionView`动态设置布局，甚至可以为更改设置动画：

> 您通常在创建集合视图时指定布局对象，但您也可以动态更改集合视图的布局。布局对象存储在 collectionViewLayout 属性中。设置此属性会立即直接更新布局，而不会对更改进行动画处理。如果您想为更改设置动画，则必须调用 setCollectionViewLayout:animated: 方法。

然而，在实践中，我发现这`UICollectionView`会对`contentOffset`. 为了说明这个问题，我将以下示例代码放在一起，这些代码可以附加到放入故事板中的默认集合视图控制器：

```
#import <UIKit/UIKit.h>

@interface MyCollectionViewController : UICollectionViewController
@end

@implementation MyCollectionViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"CELL"];
    self.collectionView.collectionViewLayout = [[UICollectionViewFlowLayout alloc] init];
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@"CELL" forIndexPath:indexPath];
    cell.backgroundColor = [UIColor whiteColor];
    return cell;
}

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"contentOffset=(%f, %f)", self.collectionView.contentOffset.x, self.collectionView.contentOffset.y);
    [self.collectionView setCollectionViewLayout:[[UICollectionViewFlowLayout alloc] init] animated:YES];
    NSLog(@"contentOffset=(%f, %f)", self.collectionView.contentOffset.x, self.collectionView.contentOffset.y);
}

@end 
```

控制器设置默认值并`UICollectionViewFlowLayout`在`viewDidLoad`屏幕上显示单个单元格。当单元格被选中时，控制器会创建另一个默认值`UICollectionViewFlowLayout`并将其设置在带有`animated:YES`标志的集合视图上。预期的行为是单元格不移动。然而，实际行为是单元格滚动到屏幕外，此时甚至不可能将单元格滚动回屏幕上。

查看控制台日志显示 contentOffset 发生了莫名其妙的变化（在我的项目中，从 (0, 0) 到 (0, 205)）。我发布了[针对非动画案例](https://stackoverflow.com/questions/13716825/setting-a-new-collectionviewlayout-for-uicollectionview-giving-blank-screen/13775364#13775364)（`i.e. animated:NO`

作为旁注，我已经测试了自定义布局并获得了相同的行为。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-08-20T23:48:59.553

`UICollectionViewLayout`包含可覆盖的方法，该方法[`targetContentOffsetForProposedContentOffset:`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout/1617724-targetcontentoffset)允许您在更改布局期间提供适当的内容偏移量，这将正确设置动画。这在 iOS 7.0 及更高版本中可用

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-25T15:34:02.727

几天来，我一直在努力解决这个问题，并找到了可能对我的情况有所帮助的解决方案。就我而言，我有一个折叠的照片布局，就像在 ipad 上的照片应用程序中一样。它显示相册，照片彼此叠放，当您点击相册时，它会展开照片。所以我所拥有的是两个独立的 UICollectionViewLayouts 并在它们之间切换，`[self.collectionView setCollectionViewLayout:myLayout animated:YES]`我在动画之前遇到了单元格跳跃的确切问题，并意识到它是`contentOffset`. 我尝试了一切，`contentOffset`但它仍然在动画过程中跳跃。上面泰勒的解决方案有效，但它仍然与动画混淆。

然后我注意到只有当屏幕上有几张专辑，不足以填满屏幕时才会发生这种情况。我的布局`-(CGSize)collectionViewContentSize`按照建议覆盖。当只有几个相册时，集合视图内容大小小于视图内容大小。当我在集合布局之间切换时，这会导致跳转。

所以我在布局上设置了一个名为 minHeight 的属性，并将其设置为集合视图父级的高度。然后我在返回之前检查高度，`-(CGSize)collectionViewContentSize`确保高度 >= 最小高度。

不是一个真正的解决方案，但它现在工作正常。我会尝试将`contentSize`您的集合视图设置为至少它包含视图的长度。

**编辑：** 如果您从 UICollectionViewFlowLayout 继承，Manicaesar 添加了一个简单的解决方法：

```
-(CGSize)collectionViewContentSize { //Workaround
    CGSize superSize = [super collectionViewContentSize];
    CGRect frame = self.collectionView.frame;
    return CGSizeMake(fmaxf(superSize.width, CGRectGetWidth(frame)), fmaxf(superSize.height, CGRectGetHeight(frame)));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-17T00:29:46.353

对我自己的问题的回答迟到了。

TLLayoutTransitioning库通过重新分配[iOS7](https://github.com/wtmoose/TLLayoutTransitioning)的交互式转换 API 以执行非交互式布局到布局转换，为这个问题提供了一个很好的解决方案。它有效地提供了替代方案`setCollectionViewLayout`，解决了内容偏移问题并添加了几个功能：

1.  动画时长
2.  30 多条缓动曲线（由 Warren Moore 的[AHEasing 库](https://github.com/warrenm/AHEasing)提供）
3.  多种内容偏移模式

自定义缓动曲线可以定义为`AHEasingFunction`函数。最终内容偏移量可以根据一个或多个索引路径指定，具有最小、中心、顶部、左侧、底部或右侧放置选项。

要了解我的意思，请尝试在示例工作区中运行[调整大小演示并使用选项。](https://github.com/wtmoose/TLLayoutTransitioning/blob/master/Examples/Examples/ResizeSettingsTableViewController.m)

用法是这样的。首先，配置您的视图控制器以返回以下实例`TLTransitionLayout`：

```
- (UICollectionViewTransitionLayout *)collectionView:(UICollectionView *)collectionView transitionLayoutForOldLayout:(UICollectionViewLayout *)fromLayout newLayout:(UICollectionViewLayout *)toLayout
{
    return [[TLTransitionLayout alloc] initWithCurrentLayout:fromLayout nextLayout:toLayout];
} 
```

然后，在类别中定义的`setCollectionViewLayout`call不是 call ，而是：`transitionToCollectionViewLayout:toLayout``UICollectionView-TLLayoutTransitioning`

```
UICollectionViewLayout *toLayout = ...; // the layout to transition to
CGFloat duration = 2.0;
AHEasingFunction easing = QuarticEaseInOut;
TLTransitionLayout *layout = (TLTransitionLayout *)[collectionView transitionToCollectionViewLayout:toLayout duration:duration easing:easing completion:nil]; 
```

此调用启动交互式转换，并在内部启动一个`CADisplayLink`回调，该回调使用指定的持续时间和缓动函数驱动转换进度。

下一步是指定最终内容偏移量。您可以指定任意值，但 中`toContentOffsetForLayout`定义的方法`UICollectionView-TLLayoutTransitioning`提供了一种优雅的方法来计算相对于一个或多个索引路径的内容偏移量。例如，为了使特定单元格尽可能靠近集合视图的中心，请在 之后立即进行以下调用`transitionToCollectionViewLayout`：

```
NSIndexPath *indexPath = ...; // the index path of the cell to center
TLTransitionLayoutIndexPathPlacement placement = TLTransitionLayoutIndexPathPlacementCenter;
CGPoint toOffset = [collectionView toContentOffsetForLayout:layout indexPaths:@[indexPath] placement:placement];
layout.toContentOffset = toOffset; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-28T20:21:08.100

这个问题也困扰着我，它似乎是转换代码中的一个错误。据我所知，它试图专注于最接近过渡前视图布局中心的单元格。但是，如果在视图转换前的中心没有碰巧有一个单元格，那么它仍然会尝试将单元格置于转换后的中心位置。如果你将 alwaysBounceVertical/Horizo​​ntal 设置为 YES，这一点非常清楚，使用单个单元格加载视图，然后执行布局转换。

在触发布局更新后，我可以通过明确告诉集合关注特定单元格（在本例中为第一个单元格可见单元格）来解决此问题。

```
[self.collectionView setCollectionViewLayout:[self generateNextLayout] animated:YES];

// scroll to the first visible cell
if ( 0 < self.collectionView.indexPathsForVisibleItems.count ) {
    NSIndexPath *firstVisibleIdx = [[self.collectionView indexPathsForVisibleItems] objectAtIndex:0];
    [self.collectionView scrollToItemAtIndexPath:firstVisibleIdx atScrollPosition:UICollectionViewScrollPositionCenteredVertically animated:YES];
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-09-26T02:47:02.877

# 2019实际解决方案

假设您的“汽车”视图有许多布局。

假设你有三个。

```
CarsLayout1: UICollectionViewLayout { ...
CarsLayout2: UICollectionViewLayout { ...
CarsLayout3: UICollectionViewLayout { ... 
```

当您在布局之间制作动画时，它***会跳转。***

这只是苹果不可否认的错误。毫无疑问，它会在您制作动画时跳跃。

修复是这样的：

您必须有一个全局浮点数，以及以下基类：

```
var avoidAppleMessupCarsLayouts: CGPoint? = nil

class FixerForCarsLayouts: UICollectionViewLayout {

    override func prepareForTransition(from oldLayout: UICollectionViewLayout) {
        avoidAppleMessupCarsLayouts = collectionView?.contentOffset
    }

    override func targetContentOffset(
        forProposedContentOffset proposedContentOffset: CGPoint) -> CGPoint {
        if avoidAppleMessupCarsLayouts != nil {
            return avoidAppleMessupCarsLayouts!
        }
        return super.targetContentOffset(forProposedContentOffset: proposedContentOffset)
    }
} 
```

以下是“汽车”屏幕的三种布局：

```
CarsLayout1: FixerForCarsLayouts { ...
CarsLayout2: FixerForCarsLayouts { ...
CarsLayout3: FixerForCarsLayouts { ... 
```

而已。现在可以了。

* * *

1.  令人难以置信的是，您可能有不同的“组”布局（用于汽车、狗、房屋等），它们可能（可以想象）发生碰撞。出于这个原因，每个“集合”都有一个全局和一个基类，如上所述。

2.  这是多年前通过上面的用户@Isaacliu 发明的。

3.  添加了一个细节，即 Isaacliu 代码片段中的 FWIW `finalizeLayoutTransition`。事实上，这在逻辑上是没有必要的。

事实上，在 Apple 改变它的工作方式之前，每次你在集合视图布局之间制作动画时，你都必须这样做。这就是生活！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-06T05:35:31.537

简单的。

在同一个动画块中为您的新布局和 collectionView 的 contentOffset 设置动画。

```
[UIView animateWithDuration:0.3 animations:^{
                                 [self.collectionView setCollectionViewLayout:self.someLayout animated:YES completion:nil];
                                 [self.collectionView setContentOffset:CGPointMake(0, -64)];
                             } completion:nil]; 
```

它将保持`self.collectionView.contentOffset`不变。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-06T19:49:01.767

如果您只是想在从布局转换时不改变内容偏移量，您可以创建自定义布局并覆盖几个方法来跟踪旧的 contentOffset 并重用它：

```
@interface CustomLayout ()

@property (nonatomic) NSValue *previousContentOffset;

@end

@implementation CustomLayout

- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset
{
    CGPoint previousContentOffset = [self.previousContentOffset CGPointValue];
    CGPoint superContentOffset = [super targetContentOffsetForProposedContentOffset:proposedContentOffset];
    return self.previousContentOffset != nil ? previousContentOffset : superContentOffset ;
}

- (void)prepareForTransitionFromLayout:(UICollectionViewLayout *)oldLayout
{
    self.previousContentOffset = [NSValue valueWithCGPoint:self.collectionView.contentOffset];
    return [super prepareForTransitionFromLayout:oldLayout];
}

- (void)finalizeLayoutTransition
{
    self.previousContentOffset = nil;
    return [super finalizeLayoutTransition];
}
@end 
```

所有这一切都是在布局转换之前保存先前的内容偏移量`prepareForTransitionFromLayout`，覆盖新的内容偏移量`targetContentOffsetForProposedContentOffset`，并清除它`finalizeLayoutTransition`。很简单

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-02-13T21:16:58.860

如果它有助于增加体验：无论我的内容大小，我是否设置了内容插入或任何其他明显因素，我都会遇到这个问题。所以我的解决方法有点激烈。首先，我将 UICollectionView 子类化并添加以对抗不适当的内容偏移设置：

```
- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated
{
    if(_declineContentOffset) return;
    [super setContentOffset:contentOffset];
}

- (void)setContentOffset:(CGPoint)contentOffset
{
    if(_declineContentOffset) return;
    [super setContentOffset:contentOffset];
}

- (void)setCollectionViewLayout:(UICollectionViewLayout *)layout animated:(BOOL)animated
{
    _declineContentOffset ++;
    [super setCollectionViewLayout:layout animated:animated];
    _declineContentOffset --;
}

- (void)setContentSize:(CGSize)contentSize
{
    _declineContentOffset ++;
    [super setContentSize:contentSize];
    _declineContentOffset --;
} 
```

我并不为此感到自豪，但唯一可行的解​​决方案似乎是完全拒绝集合视图设置其自己的内容偏移量的任何尝试，这些偏移量是调用`setCollectionViewLayout:animated:`. 从经验上看，这种变化似乎直接发生在即时调用中，界面或文档显然不能保证这一点，但从核心动画的角度来看是有道理的，所以我可能只有 50% 对这个假设感到不舒服。

然而还有第二个问题：UICollectionView 现在在新的集合视图布局中为那些停留在同一位置的视图添加了一个小跳转——将它们向下推约 240 点，然后将它们动画化回到原始位置。我不清楚为什么，但我修改了我的代码以通过切断`CAAnimation`已添加到实际上没有移动的任何单元格的 s 来处理它：

```
- (void)setCollectionViewLayout:(UICollectionViewLayout *)layout animated:(BOOL)animated
{
    // collect up the positions of all existing subviews
    NSMutableDictionary *positionsByViews = [NSMutableDictionary dictionary];
    for(UIView *view in [self subviews])
    {
        positionsByViews[[NSValue valueWithNonretainedObject:view]] = [NSValue valueWithCGPoint:[[view layer] position]];
    }

    // apply the new layout, declining to allow the content offset to change
    _declineContentOffset ++;
    [super setCollectionViewLayout:layout animated:animated];
    _declineContentOffset --;

    // run through the subviews again...
    for(UIView *view in [self subviews])
    {
        // if UIKit has inexplicably applied animations to these views to move them back to where
        // they were in the first place, remove those animations
        CABasicAnimation *positionAnimation = (CABasicAnimation *)[[view layer] animationForKey:@"position"];
        NSValue *sourceValue = positionsByViews[[NSValue valueWithNonretainedObject:view]];
        if([positionAnimation isKindOfClass:[CABasicAnimation class]] && sourceValue)
        {
            NSValue *targetValue = [NSValue valueWithCGPoint:[[view layer] position]];

            if([targetValue isEqualToValue:sourceValue])
                [[view layer] removeAnimationForKey:@"position"];
        }
    }
} 
```

这似乎不会抑制实际移动的视图，或者导致它们不正确地移动（好像他们期望周围的一切都下降大约 240 点并与它们一起动画到正确的位置）。

所以这是我目前的解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-23T22:28:59.203

我现在可能已经花了大约两个星期的时间来尝试让各种布局在彼此之间顺利过渡。我发现覆盖建议的偏移量在 iOS 10.2 中有效，但在之前的版本中我仍然遇到问题。让我的情况更糟的是我需要由于滚动而转换到另一个布局，因此视图同时滚动和转换。

在 10.2 之前的版本中，汤米的回答是唯一对我有用的东西。我现在正在做以下事情。

```
class HackedCollectionView: UICollectionView {

    var ignoreContentOffsetChanges = false

    override func setContentOffset(_ contentOffset: CGPoint, animated: Bool) {
        guard ignoreContentOffsetChanges == false else { return }
        super.setContentOffset(contentOffset, animated: animated)
    }

    override var contentOffset: CGPoint {
        get {
            return super.contentOffset
        }
        set {
            guard ignoreContentOffsetChanges == false else { return }
            super.contentOffset = newValue
        }
    }

    override func setCollectionViewLayout(_ layout: UICollectionViewLayout, animated: Bool) {
        guard ignoreContentOffsetChanges == false else { return }
        super.setCollectionViewLayout(layout, animated: animated)
    }

    override var contentSize: CGSize {
        get {
            return super.contentSize
        }
        set {
            guard ignoreContentOffsetChanges == false else { return }
            super.contentSize = newValue
        }
    }

} 
```

然后，当我设置布局时，我会这样做......

```
let theContentOffsetIActuallyWant = CGPoint(x: 0, y: 100)
UIView.animate(withDuration: animationDuration,
               delay: 0, options: animationOptions,
               animations: {
                collectionView.setCollectionViewLayout(layout, animated: true, completion: { completed in
                    // I'm also doing something in my layout, but this may be redundant now
                    layout.overriddenContentOffset = nil
                })
                collectionView.ignoreContentOffsetChanges = true
}, completion: { _ in
    collectionView.ignoreContentOffsetChanges = false
    collectionView.setContentOffset(theContentOffsetIActuallyWant, animated: false)
}) 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-08-29T02:08:01.727

这终于对我有用（Swift 3）

```
self.collectionView.collectionViewLayout = UICollectionViewFlowLayout()
self.collectionView.setContentOffset(CGPoint(x: 0, y: -118), animated: true) 
```

# parsing - Scala中解析器成功的模式匹配

> ID：13780139
> 
> 赞同：7
> 
> 时间：2012-12-08T17:49:38.197
> 
> 标签：parsing, scala, pattern-matching

我是 Scala 的新手，一直在尝试使用其出色的组合解析器库。我一直试图让这段代码编译：

```
import scala.util.parsing.combinator._
...
val r:Parsers#ParseResult[Node] = parser.parseAll(parser.suite,reader)
r match {
  case Success(r, n) => println(r)
  case Failure(msg, n) => println(msg)
  case Error(msg, n) => println(msg)
}
... 
```

但我不断收到这些错误：

```
TowelParser.scala:97: error: not found: value Success
  case Success(r, n) => println(r)
       ^
TowelParser.scala:98: error: not found: value Failure
  case Failure(msg, n) => println(msg)

TowelParser.scala:99: error: object Error is not a case class constructor, nor does it have an unapply/unapplySeq method
  case Error(msg, n) => println(msg) 
```

我尝试了很多不同的方法，例如：

```
case Parsers#Success(r, n) => println(r) 
```

和

```
case Parsers.Success(r, n) => println(r) 
```

和

```
import scala.util.parsing.combinator.Parsers.Success 
```

但我似乎无法编译它。我确信我可能缺少一些明显的东西，但我已经做了一段时间了，谷歌似乎没有任何好的例子。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-08T18:01:47.407

您需要为 指定完整路径`ParseResult`，其中包括您的`Parsers`实例。例如：

```
import scala.util.parsing.combinator._

object parser extends RegexParsers { def digits = "\\d+".r ^^ (_.toInt) }

val res = parser.parseAll(parser.digits, "42")

res match {
  case parser.Success(r, n) => println(r)
  case parser.Failure(msg, n) => println(msg)
  case parser.Error(msg, n) => println(msg)
} 
```

请注意，如果您想要一些额外的语法便利，您也可以导入这些：

```
import parser.{ Error, Failure, Success } 
```

现在您的原始版本将按预期工作。

# c# - 程序不会关闭并且伪造相机继续运行，线程问题

> ID：13780141
> 
> 赞同：8
> 
> 时间：2012-12-08T17:50:30.590
> 
> 标签：c#, multithreading, aforge

我有一个奇怪的问题，我发现很难调试有时我无法关闭我的程序，当我尝试关闭它时它会冻结。

我做了一个视频图像识别的大程序。我做了一个特殊的按钮来关闭相机。这个按钮通过调用下面的函数来工作，它确实有效。

```
 private void exitcamera()
 { 
 FinalVideo.SignalToStop();
 FinalVideo.WaitForStop();
 FinalVideo = null;
 } 
```

请注意，原始视频是这样开始的

```
 private void buttonStartCamera_Click(object sender, EventArgs e) 
 {
 FinalVideo = new VideoCaptureDevice(VideoCaptureDevices[comboBox1.SelectedIndex].MonikerString);
 FinalVideo.DesiredFrameSize = new System.Drawing.Size(640, 480);
 FinalVideo.DesiredFrameRate = 90;
 FinalVideo.NewFrame += new NewFrameEventHandler(FinalVideo_NewFrame);
 FinalVideo.ProvideSnapshots = true;  //snapshots
 FinalVideo.Start(); 
 } 
```

现在我的问题似乎（这是一个猜测，因为我现在无法调试）某个线程仍然处于活动状态，想要用数据更新主窗体。但是，它可能无法这样做，因为那个正在关闭。我认为类似的事情正在发生，所以我在主申请表上写了

```
 private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
    {
     // Thread.Sleep(1000); // not sure about these delays might help syncing threads
     ExitCamera();
     Thread.Sleep(1000);
    } 
```

然而，有了最后一个代码，程序退出的麻烦就更大了。

我想向子线程发送退出，但我不知道它们的名称（如果它们有名称），我不知道如何列出它们或指示它们停止它们在另一个 dll 中，而不是我的代码部分。从一些dll我没有代码。

那么有没有办法列出子线程，然后一一关闭，如果按右上角的右叉退出应用程序呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T13:53:03.597

好吧，我设法调试了程序，终于找到了导致问题的原因。这有点奇怪，因为作为一个按钮，我可以使用该`exitcamera`功能停止相机。

但是，在`a _formclosing`事件内部，尽管在我标记出该`waitforstop`功能后它起作用了，但相同的例程却不起作用。

```
 private void exitcamera()
 { 
  FinalVideo.SignalToStop();
  // FinalVideo.WaitForStop();  << marking out that one solved it
  FinalVideo.NewFrame -= new NewFrameEventHandler(FinalVideo_NewFrame); // as sugested
  FinalVideo = null;
 } 
```

我仍然对此感到有些困惑，为什么这在结束事件的情况下不起作用。但这似乎可以解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T19:33:47.513

也许您有由事件引起的内存泄漏问题。您可以尝试在退出程序时取消挂钩事件：

```
FinalVideo.NewFrame -= new NewFrameEventHandler(FinalVideo_NewFrame); 
```

也许这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T06:35:17.880

当我想显示预览时，这有助于解决另一个问题，单击“抓取”按钮，将相机的分辨率从低分辨率更改为高分辨率，抓取图像，然后改回低分辨率进行预览。这是有效的，即使我不得不放弃它，因为停止和启动相机会重置自动曝光，所以在抓取的图像上图片很糟糕：

```
using AForge.Video;
using AForge.Video.DirectShow;

public partial class Form1 : Form

{
    private int PreviewRefreshDelayMS = 40;
    private FilterInfoCollection VideoCaptureDevices;

    private VideoCaptureDevice CustomerWebcam;
    private int CustomerWebcam_CapabilitiesIndexMin;
    private int CustomerWebcam_CapabilitiesIndexMax;
    private bool bCustomerWebcam_capture;
    private Bitmap CustomerWebcam_bitmap;
    private System.DateTime CustomerWebcam_nextframetime = DateTime.Now;

    public Form1()
    {
        InitializeComponent();
    }

    // Some good info to make this more robust
    // http://haryoktav.wordpress.com/2009/03/21/webcam-in-c-aforgenet/
    //
    private void button1_Click(object sender, EventArgs e)
    {            
        CustomerWebcam = new VideoCaptureDevice(VideoCaptureDevices[comboBox1.SelectedIndex].MonikerString);
        CustomerWebcam.NewFrame += new NewFrameEventHandler(CustomerWebcam_NewFrame);

        int indexMin = -1;
        int MinPixels = 0;
        int indexMax = -1;
        int MaxPixels = 0;
        for (int i = 0; i < CustomerWebcam.VideoCapabilities.Length; i++)
        {
            int pixels = CustomerWebcam.VideoCapabilities[i].FrameSize.Height * CustomerWebcam.VideoCapabilities[i].FrameSize.Width; 
            if (indexMin == -1) { indexMin = i; MinPixels = pixels; }
            if (indexMax == -1) { indexMax = i; MaxPixels = pixels; }
            if (pixels < MinPixels) { indexMin = i; MinPixels = pixels; }
            if (pixels > MaxPixels) { indexMax = i; MaxPixels = pixels; }
        }
        CustomerWebcam_CapabilitiesIndexMin = indexMin;
        CustomerWebcam_CapabilitiesIndexMax = indexMax;

        CustomerWebcam.VideoResolution = CustomerWebcam.VideoCapabilities[indexMin];
        CustomerWebcam.DisplayPropertyPage(IntPtr.Zero);
        CustomerWebcam.Start();
    }

   void CustomerWebcam_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
        if (CustomerWebcam_bitmap != null)
        { 
            CustomerWebcam_bitmap.Dispose();
            CustomerWebcam_bitmap = null;
        }

        if (bCustomerWebcam_capture)
        {
            CustomerWebcam_bitmap = (Bitmap)eventArgs.Frame.Clone(); 
            System.Random rnd = new Random();
            CustomerWebcam_bitmap.Save("img" + Convert.ToString((int)(rnd.NextDouble() * 10000000)) + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
            bCustomerWebcam_capture = false;
            ((Bitmap)eventArgs.Frame).Dispose();
        }
        else
            if (DateTime.Now > CustomerWebcam_nextframetime)
        {
            CustomerWebcam_bitmap = (Bitmap)eventArgs.Frame.Clone();
            pictureBox1.Image = CustomerWebcam_bitmap;
            CustomerWebcam_nextframetime = DateTime.Now.AddMilliseconds(PreviewRefreshDelayMS);
            ((Bitmap)eventArgs.Frame).Dispose();
        }          
    }       

    private void Form1_Load(object sender, EventArgs e)
    {
        VideoCaptureDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);
        foreach (FilterInfo VideoCaptureDevice in VideoCaptureDevices)
        {
            comboBox1.Items.Add(VideoCaptureDevice.Name);
        }
        comboBox1.SelectedIndex = 0;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        CustomerWebcam.SignalToStop();
        CustomerWebcam = null;
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (!(CustomerWebcam == null))
            if (CustomerWebcam.IsRunning)
            {
                CustomerWebcam.SignalToStop();
                CustomerWebcam = null;
            }
    }

    private void button4_Click(object sender, EventArgs e)
    {
        bCustomerWebcam_capture = true;
    }

} 
```

还有一件事要提... AForge 库是我能够找到的最一致的方式，它可以使用网络摄像头抓取静止图像并保存为 JPEG，而无需深入研究 Windows 8 Metro 应用程序的世界。我希望使用 OpenCV.NET，或者只是使用 DirectShow 或 WIA 的常规 .NET API，但这是最简单的，它对我有用。

这里有一些很难找到但非常有用的好样本： [https ://github.com/mdavid/aforge.net](https://github.com/mdavid/aforge.net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-13T14:40:45.013

在我的情况下，需要 WaitForStop() ，但代码执行在方法内部停止。我在调用 SignalToStop() 后立即将其替换为：

```
while (m_Device.IsRunning) { } 
```

这是 AForge 库中涉及的代码：

```
public bool IsRunning
{
    get
    {
        if (this.thread != null)
        {
            if (!this.thread.Join(0))
            {
                return true;
            }
            this.Free();
        }
        return false;
    }
}

public void WaitForStop()
{
    if (this.thread != null)
    {
        this.thread.Join();
        this.Free();
    }
} 
```

编辑：这并没有解决 100% 的问题。有时，对 WorkerThread() 方法上的 com 对象 (mediaControl.Stop();) 的调用只需要很长时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-08T14:52:45.167

我正在处理这个问题。这是停止相机并关闭 Win Form 的简单方法。

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    if (FinalVideo != null)
    {
        if (FinalVideo.IsRunning)
        {
            FinalVideo.SignalToStop();
            FinalVideo = null;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-26T04:02:49.060

避免与表单直接交互 - 希望有比计时器更好的解决方案但解决问题。我

静态助手类

```
public static Bitmap StaticBitmap = new Bitmap(100,100); 
```

形式

```
public void Cam_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {

        lock (StaticHelper.StaticBitmap)
        {
            using (Bitmap b = (Bitmap)eventArgs.Frame)
            {
                StaticHelper.StaticBitmap = (Bitmap)b.Clone();
            }

        }

    }

private void timer1_Tick(object sender, EventArgs e)
    {
        lock (StaticHelper.StaticBitmap)
        {
            pictureBox1.Image = (Bitmap)StaticHelper.StaticBitmap.Clone();
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-27T20:48:49.943

这会破坏你的问题（我有这个问题，我试过了）

```
using System.Threading;

bool photo_was_taken = false;

private void buttonStartCamera_Click(object sender, EventArgs e) 
 {

Thread thread = new Thread(new ThreadStart(exitcamera));
thread.Start(); 
 FinalVideo = new VideoCaptureDevice(VideoCaptureDevices[comboBox1.SelectedIndex].MonikerString);
 FinalVideo.DesiredFrameSize = new System.Drawing.Size(640, 480);
 FinalVideo.DesiredFrameRate = 90;
 FinalVideo.NewFrame += new NewFrameEventHandler(FinalVideo_NewFrame);
 FinalVideo.ProvideSnapshots = true;  //snapshots
 FinalVideo.Start(); 
 }
private void FinalVideo_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
        // what you want to do ( your code is here )
        photo_was_taken = true; 

    }
 private void exitcamera()
 { 
        while (!photo_was_taken)
        {
            Thread.Sleep(5); // you can change wait milliseconds
        }
        FinalVideo.SignalToStop();
        FinalVideo.NewFrame -= new NewFrameEventHandler(FinalVideo_NewFrame);
        //FinalVideo.WaitForStop();
        while (FinalVideo.IsRunning)
        {
            FinalVideo.Stop();
            // FinalVideo = null; >> // that is not condition
        }
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-29T21:00:00.620

这就是您所需要的，100% 有效的解决方案：

```
private void FormMain_FormClosing(object sender, FormClosingEventArgs e)
{
    Invoke((MethodInvoker) delegate
    {
        _videoSource.SignalToStop();
        _videoSource.WaitForStop();
    });
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-09-23T10:48:55.383

我尝试了一些解决方案，但没有任何效果。我部分解决了在 WaitForStop 之后添加线程睡眠

```
if (FinalVideo != null)
    {
        if (FinalVideo.IsRunning)
        {
            FinalVideo.SignalToStop();
            Thread.Sleep(1000);
        }
    } 
```

如果我尝试调用停止应用程序将被冻结

# vim - Vim 脚本中的代码硬包装和高级缩进/对齐

> ID：13780144
> 
> 赞同：1
> 
> 时间：2012-12-08T17:50:48.210
> 
> 标签：vim, alignment, indentation

**代码硬包装。**我已经将 Vim 配置为自动（在我键入时）在 80 列上自动硬包装长行注释。效果很好。但是，它似乎不会自动包装代码。我认为添加`set formatoptions+=t`（目前我有`set formatoptions=c,r,q,a,n`）可以解决问题，但事实并非如此。`\`此外，在 Vim 脚本中，如果 Vim 可以在由于硬包装而需要续行时自动放置反斜杠，那就太好了。那么有没有办法实现代码和这些高级功能的硬包装？

**高级缩进/对齐。**我喜欢使用`gg=G`- 我什至将它作为预挂钩附加到写入文件。我已`cindent`启用。现在我想知道是否可以编写`indentexpr`或调整一些其他变量来实现以下 Vim 脚本代码，例如：

```
" Before gg=G
let g:SuperTabNoCompleteAfter = ['^', '\s', ',', '(', ')', '[', ']', '{',
  \'}', '<', '>', '''', '"']

" After gg=G
let g:SuperTabNoCompleteAfter = ['^', '\s', ',', '(', ')', '[', ']', '{',
                                \'}', '<', '>', '''', '"'] 
```

我尝试将`vim.vim`文件添加到`~/.vim/after/ftplugin/`以下内容：

```
setlocal indentexpr=IndentExpression()

fun IndentExpression()
  let indent = cindent(v:lnum)
  let match = matchstr(getline(v:lnum - 1), '^\s*\S\+\s\+\S\+\s*=\s*\[\ze.*$')

  if !empty(match)
    let indent = len(match)
  endif

  return indent
endf 
```

但我运气不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:11:42.183

关于`'formatoptions'`: 当你`a`在里面时，就不需要`t`; 前者会在您键入时自动换行，因此无论如何都会在达到文本宽度时换行（后者会这样做）。导致问题的是`c`, 因为这将自动格式限制为注释。CP。`:help fo-table`：

> a 段落的自动格式化。每次插入或删除文本时，都会重新格式化段落。见 |自动格式化|。当存在“c”标志时，这只发生在已识别的评论中。

所以，一个`:set fo-=c`应该做的伎俩。

# html - 将图像从 XML 插入 XSL 文档

> ID：13780145
> 
> 赞同：4
> 
> 时间：2012-12-08T17:50:47.447
> 
> 标签：html, xml, image, templates, xslt

我想知道是否有任何方法可以使用元素或属性在 XML 文件中声明图像，然后在 XSL 文件中使用此图像将其输入到表中，而不必在 XSL 中创建表并输入图像一个一个地放入表格单元格中。这是我当前的 XML 文档（不完整，因为我只是在测试它）。

```
<?xml version= "1.0"?>
<?xml-stylesheet type="text/xsl" href="stylesheet4.xsl"?>
    <countries>
        <country> 
            <countryname>United States</countryname>
            <countryflag>bg_locale.jpg</countryflag>
        </country>

        <country>
            <countryname>United Kingdom</countryname>
        </country>

        <country>
            <countryname>Deutschland</countryname>
        </country>
        </countries> 
```

这是我创建的 XSL 文件和我尝试使用的方法：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/countries">
<html>
<body bgcolor="black">

<div id="container" style="100%">

<div id="header" style="background-color:black; height:60px"></div>

<div id="content_container" align="center">
    <div id="content" align="left" style="background: url('bg_locale.jpg');height:845px;width:848px">
    Content goes here
    <img src="logo_timber.jpg" align="left"/><br/>
<br/>
<br/>
<br/>
<table border="1">

<tr>
<xsl:apply-templates/>
</tr>

</table>
</div>

</div>

</div>
</body>
</html>

</xsl:template>

<xsl:template match="country">
<tr><td><xsl:value-of select="countryflag"/></td></tr>
</xsl:template>

</xsl:stylesheet> 
```

如您所见，我创建了一个表，并希望 XSL 从 XML 文件中获取图像，然后将其获取，以便每个国家/地区标志图像都在表中一一显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:35:36.753

这不是确切的解决方案，但我正在向您展示如何使用 for-each 来复制不同的标志！

```
 <xsl:template match="/countries">
    <table>
      <xsl:for-each select="country">
        <tr>
          <td>
            <xsl:value-of select="countryname"/>
          </td>
          <td>
            <xsl:element name="img">
              <xsl:attribute name="src">
                <xsl:value-of select="countryflag"/>
              </xsl:attribute>
              <xsl:attribute name="align">left</xsl:attribute>
            </xsl:element>
          </td>
        </tr>
      </xsl:for-each>
    </table>
  </xsl:template> 
```

这将在不同的行中复制不同国家标志的值！

Ps：这只是一个示例代码！我没有检查国家标志是否存在。我假设它会一直在那里.. 在创建 img 标签之前，您需要检查 countryflag 是否存在/null 在更安全的一端，否则它可能会创建 src 为 null 的 img 标签。

**编辑：**没有标签的更简单的解决方案`<xsl:element>`..

```
 <xsl:template match="/countries">
    <table>
      <xsl:for-each select="country">
        <tr>
          <td>
            <xsl:value-of select="countryname"/>
          </td>
          <td>
            <img src="{countryflag}" align="left"/>
          </td>
        </tr>
      </xsl:for-each>
    </table>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T02:23:35.227

您应该为您的 apply-templates 元素提供一个 select 属性。也丢弃包含它的 tr-tags：

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
```

```
<xsl:template match="/countries">
    <html>
    <head></head>
        <body bgcolor="black">
            <div id="container" style="100%">
                <div id="header" style="background-color:black; height:60px"></div>
                <div id="content_container" align="center">
                    <div id="content" align="left" style="background: url('bg_locale.jpg');height:845px;width:848px">
                    Content goes here
                    <img src="logo_timber.jpg" align="left"/><br/>
                    <br/>
                    <br/>
                    <br/>
                    <table border="1">
                        <xsl:apply-templates select="country" />
                    </table>
                    </div>
                </div>
            </div>
        </body>
    </html>
</xsl:template>

<xsl:template match="country">
    <tr>
        <td>
            <xsl:value-of select="countryflag"/>
        </td>
    </tr>
</xsl:template> 
```

# visual-studio-2012 - WebAPI 项目在 Visual Studio 2012 Update 1 中停止工作

> ID：13780147
> 
> 赞同：0
> 
> 时间：2012-12-08T17:51:01.060
> 
> 标签：visual-studio-2012

在我升级到更新 1 后，完美运行的项目停止运行。更令人沮丧的是 - 它完美地重建。但是当我尝试运行时，我得到一个模态消息框，其中只有“System.Exception”。

![在此处输入图像描述](../Images/9a4a7fe49f82526987a8edce3feaa5a0.png)

现在我什至尝试创建一个新的 webAPI 项目——即使这样也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:48:59.407

我不得不卸载 VS 2012 并重新安装它。当我尝试安装需要 VS2010 SP1 并且没有安装的 SQL 2012 Express 时，我遇到了类似的问题。所以我决定重建所有，现在一切都在工作。

# ios - UICollectionView：选择时动画单元格大小变化

> ID：13780153
> 
> 赞同：66
> 
> 时间：2012-12-08T17:51:08.893
> 
> 标签：ios, swift, uicollectionview

我想要做的是更改 UICollectionViewCell 的大小，并在选择单元格时为该更改设置动画。我已经设法通过将单元格标记为已选中`collectionView: didSelectItemAtIndexPath:`然后调用`reloadData`我的 UICollectionView 以不同大小显示所选单元格来做到这一点。

然而，这一切都是同时发生的，我不知道如何让大小的变化变成动画。有任何想法吗？

我已经[在 selection 上找到了 Animate uicollectionview 单元格](https://stackoverflow.com/questions/12885003/animate-uicollectionview-cells-on-selection)，但答案对我来说是不确定的，我还没有弄清楚它是否也可以帮助我。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-12-08T22:58:28.957

在 Chase Roberts 的帮助下，我现在找到了解决问题的方法。我的代码基本上是这样的：

```
// Prepare for animation

[self.collectionView.collectionViewLayout invalidateLayout];
UICollectionViewCell *__weak cell = [self.collectionView cellForItemAtIndexPath:indexPath]; // Avoid retain cycles
void (^animateChangeWidth)() = ^()
{
    CGRect frame = cell.frame;
    frame.size = cell.intrinsicContentSize;
    cell.frame = frame;
};

// Animate

[UIView transitionWithView:cellToChangeSize duration:0.1f options: UIViewAnimationOptionCurveLinear animations:animateChangeWidth completion:nil]; 
```

进一步解释：

1.  最重要的步骤之一是对您正在使用的`invalidateLayout`调用。`UICollectionView.collectionViewLayout`如果你忘记了它，细胞很可能会在你的集合边界上生长——这是你很可能不希望发生的事情。还要考虑您的代码应该在某些时候将单元格的新大小呈现给您的布局。就我而言（我使用的是`UICollectionViewFlowLayout`），我调整了`collectionView:layout:sizeForItemAtIndexPath`方法以反映修改后的单元格的新大小。`invalidateLayout`忘记那部分，如果您首先调用然后尝试为大小的变化设置动画，那么您的单元格大小根本不会发生任何事情。

2.  最奇怪（至少对我来说）但重要的是你`invalidateLayout` *不在*动画块内调用。如果这样做，动画将不会显示流畅，而是会出现故障和闪烁。

3.  您必须使用单元格作为参数调用`UIView`s`transitionWithView:duration:options:animations:completion:`方法`transitionWithView`，而不是整个集合视图，因为它是您想要动画的单元格，而不是整个集合。

4.  我使用`intrinsicContentSize`单元格的方法来返回我想要的大小 - 在我的情况下，我会根据单元格的选择状态来扩大和缩小单元格的宽度以显示按钮或隐藏它。

我希望这会帮助一些人。对我来说，我花了好几个小时才弄清楚如何让动画正常工作，所以我试图让其他人摆脱这种耗时的负担。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-02-11T20:29:46.577

对单元格的大小进行动画处理对集合视图的工作方式与对表格视图的工作方式相同。如果您想为单元格的大小设置动画，请拥有一个反映单元格状态的数据模型（在我的情况下，我只使用一个标志 (CollectionViewCellExpanded, CollectionViewCellCollapsed) 并相应地返回一个 CGSize。

当您调用并清空 performBathUpdates 调用时，视图会自动生成动画。

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    [collectionView performBatchUpdates:^{
        // append your data model to return a larger size for
        // cell at this index path
    } completion:^(BOOL finished) {

    }];
} 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-06-16T22:44:47.197

`-setCollectionViewLayout:animated:`通过使用创建相同集合视图布局的新实例，我已经成功地为更改设置动画。

例如，如果您使用的是`UICollectionViewFlowLayout`，那么：

```
// Make sure that your datasource/delegate are up-to-date first

// Then animate the layout changes
[collectionView setCollectionViewLayout:[[UICollectionViewFlowLayout alloc] init] animated:YES]; 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-12-08T18:03:19.730

```
[UIView transitionWithView:collectionView 
                  duration:.5 
                   options:UIViewAnimationOptionTransitionCurlUp 
                animations:^{

    //any animatable attribute here.
    cell.frame = CGRectMake(3, 14, 100, 100);

} completion:^(BOOL finished) {

    //whatever you want to do upon completion

}]; 
```

`didselectItemAtIndexPath`在你的方法中按照这些思路玩一些东西。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2016-03-14T19:18:52.283

这是我找到的最简单的解决方案 - 就像一个魅力。流畅的动画，并且不会弄乱布局。

迅速

```
 collectionView.performBatchUpdates({}){} 
```

对象-C

```
 [collectionView performBatchUpdates:^{ } completion:^(BOOL finished) { }]; 
```

块（Swift 中的闭包）应该故意留空！

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-09-05T13:24:45.350

为单元格大小设置动画的一个好方法是在 collectionViewCell 本身中覆盖 isHighlighted。

```
class CollectionViewCell: UICollectionViewCell {

    override var isHighlighted: Bool {
        didSet {
            if isHighlighted {
                UIView.animate(withDuration: 0.2, delay: 0, options: .curveEaseOut, animations: {
                    self.transform = CGAffineTransform(scaleX: 0.95, y: 0.95)
                }, completion: nil)
            } else {
                UIView.animate(withDuration: 0.2, delay: 0, options: .curveEaseOut, animations: {
                    self.transform = CGAffineTransform(scaleX: 1, y: 1)
                }, completion: nil)
            }
        }
    }

} 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-12-14T20:38:28.200

使用 performBatchUpdates 不会为单元格内容的布局设置动画。相反，您可以使用以下内容：

```
 collectionView.collectionViewLayout.invalidateLayout()

    UIView.animate(
        withDuration: 0.4,
        delay: 0.0,
        usingSpringWithDamping: 1.0,
        initialSpringVelocity: 0.0,
        options: UIViewAnimationOptions(),
        animations: {
            self.collectionView.layoutIfNeeded()
        },
        completion: nil
    ) 
```

这给出了一个非常流畅的动画。

这类似于 Ignatius Tremor 的回答，但过渡动画对我来说无法正常工作。

完整的解决方案参见[https://github.com/cnoon/CollectionViewAnimations](https://github.com/cnoon/CollectionViewAnimations)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-12-02T13:36:16.780

这对我有用。

```
 collectionView.performBatchUpdates({ () -> Void in
        let ctx = UICollectionViewFlowLayoutInvalidationContext()
        ctx.invalidateFlowLayoutDelegateMetrics = true
        self.collectionView!.collectionViewLayout.invalidateLayoutWithContext(ctx)
    }) { (_: Bool) -> Void in
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-30T20:26:06.290

```
class CollectionViewCell: UICollectionViewCell {
   override var isHighlighted: Bool {
       if isHighlighted {
            UIView.animate(withDuration: 0.2, delay: 0, options: .curveEaseInOut, animations: {
                self.transform = CGAffineTransform(scaleX: 0.95, y: 0.95)
            }) { (bool) in
                UIView.animate(withDuration: 0.2, delay: 0, options: .curveEaseInOut, animations: {
                    self.transform = CGAffineTransform(scaleX: 1, y: 1)
                }, completion: nil)
            }
        }
   }
} 
```

只需检查 isHighlighted 变量是否更改为 true，然后在完成处理程序中使用 UIView 动画和动画。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-09T22:11:52.517

信不信由你

```
func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPat`h: IndexPath) {

            // Make your item selected in your data source here

             UIView.animate(withDuration: 0.5) {
            // call reload cells in the animation block and it'll update the selected cell's height with an animation 
                        collectionView.reloadItems(at: [indexPath])
                    }
    } 
```

顺便说一句，我正在使用自动单元格高度，即`(collectionView.collectionViewLayout as? UICollectionViewFlowLayout)?.estimatedItemSize = UICollectionViewFlowLayout.automaticSize`

# rdf - 如果我有一个注解属性，并且每个子 (Y,Z) 都有属性 canDo，那么 Y 如何继承所有 canDo？

> ID：13780155
> 
> 赞同：3
> 
> 时间：2012-12-08T17:51:19.010
> 
> 标签：rdf, owl, rdfs, turtle-rdf

我正在与 Turtle 和 OWL 合作。

假设 X 是一个类，它包含许多属性。如何使 X 具有与其所有子类（Y 和 Z）相同的属性？

```
:has a owl:ObjectProperty
:canDo a owl:ObjectProperty

:X :has :Y
:X :has :Z

:Y :canDo :thingA
:Y :canDo :thingB

:Z :canDo :thingC
:Z :canDo :thingD 
```

我希望推理者推断：X：canDo：thingA。

即使类不同，这是一个传递属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:44:08.777

我找到了答案。您可以使用[属性链接](http://www.w3.org/2007/OWL/wiki/Syntax#Object_Subproperties)。

```
[] rdfs:subPropertyOf :canDo;
   owl:propertyChain (
     :has
     :canDo
). 
```

见[OWL 2 in Action – Property Chains](http://semwebprogramming.org/?p=175)

# javascript - 如何在 Aptana 中使用闭包类型注释？

> ID：13780156
> 
> 赞同：6
> 
> 时间：2012-12-08T17:51:34.887
> 
> 标签：javascript, aptana, google-closure-compiler

如果我在 Aptana Studio 3 中输入以下 JavaScript 代码，那么我预计会出现一些错误，但它什么也没显示。

```
/**
 * @type {string}
 */
var abc = 23;
abc.doesNotExists(); 
```

如何启用对闭包类型注释的支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T23:55:15.873

目前 Aptana 仅支持注解，但不支持实际的类型检查。为了进行类型检查，您必须使用 google 闭包编译器编译该代码。如果您将编译器设置为完全优化模式，它会大声警告 abc 是一个字符串（正如您将它放在注释注释中一样），但您已经设置了一个数字值。为了能够从闭包编译器的命令行中获取它并将其集成到 aptana 中，您需要一个插件，但据我所知，eclipse/aptana 的闭包插件在最近 1 或2 年，而且您想要的这个功能在该插件的最新版本中也没有实现。

换句话说，您可以单独运行闭包编译器并检查某些文件中的警告或错误，或者您 fork eclipse 闭包插件的 repo 并自己实现此功能。

我和你有同样的问题，但是有太多的工作要做，促使我选择了第一个解决方案（在控制台中单独运行闭包编译器）。我什至放了一个钩子，所以每次我在那个项目中保存一个文件时，它都会在 aptana 的控制台视图中运行编译器，这样我就可以检查我是否引入了新的错误或警告。

# spring - BoneCP 与 JSF Spring Hibernate 配置

> ID：13780164
> 
> 赞同：2
> 
> 时间：2012-12-08T17:52:19.613
> 
> 标签：spring, hibernate, bonecp

我尝试将 BoneCP 与我的 JSF-Spring-Hibernate 组合一起使用，遵循他们网站上的 BoneCP 配置。

我使用 Intellij 作为 IDE，并且我将框架支持直接添加到项目中，但 BoneCP 及其所需的库来自 maven。

这是我的简单 spring-config.xml

```
<context:component-scan base-package="user" />

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <!-- Don't forget to list all your entity classes here -->
    <property name="annotatedClasses">
        <list>
            <value>user.model.User</value>
        </list>
    </property>

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean>

<!-- Spring bean configuration. Tell Spring to bounce off BoneCP -->
<bean id="dataSource"
      class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
    <property name="targetDataSource">
        <ref local="mainDataSource" />
    </property>
</bean>

<!-- BoneCP configuration -->
<bean id="mainDataSource" class="com.jolbox.bonecp.BoneCPDataSource" destroy-method="close">
    <property name="driverClass" value="com.mysql.jdbc.Driver" />
    <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/ch?characterEncoding=utf8" />
    <property name="username" value="root"/>
    <property name="password" value="1234"/>
    <property name="maxConnectionsPerPartition" value="60"/>
    <property name="minConnectionsPerPartition" value="20"/>
    <property name="partitionCount" value="3"/>
    <property name="acquireIncrement" value="10"/>
    <property name="statementsCacheSize" value="50"/>
    <property name="releaseHelperThreads" value="3"/>
</bean>

<!-- Enable the configuration of transactional behavior based on annotations -->
<tx:annotation-driven transaction-manager="txManager"/>

<!-- Transaction Manager is defined -->
<bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

当我在 Tomcat 7 上运行项目时，它给了我这些错误：

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-config.xml]: Cannot resolve reference to bean 'dataSource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]: Cannot resolve reference to bean 'mainDataSource' while setting bean property 'targetDataSource'; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.jolbox.bonecp.BoneCPDataSource] for bean with name 'mainDataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]; nested exception is java.lang.ClassNotFoundException: com.jolbox.bonecp.BoneCPDataSource
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:655)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1628)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]: Cannot resolve reference to bean 'mainDataSource' while setting bean property 'targetDataSource'; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.jolbox.bonecp.BoneCPDataSource] for bean with name 'mainDataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]; nested exception is java.lang.ClassNotFoundException: com.jolbox.bonecp.BoneCPDataSource
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 29 more
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.jolbox.bonecp.BoneCPDataSource] for bean with name 'mainDataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]; nested exception is java.lang.ClassNotFoundException: com.jolbox.bonecp.BoneCPDataSource
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:433)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 39 more
Caused by: java.lang.ClassNotFoundException: com.jolbox.bonecp.BoneCPDataSource
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:257)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 45 more

Ara 09, 2012 5:24:34 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-config.xml]: Cannot resolve reference to bean 'dataSource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]: Cannot resolve reference to bean 'mainDataSource' while setting bean property 'targetDataSource'; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.jolbox.bonecp.BoneCPDataSource] for bean with name 'mainDataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]; nested exception is java.lang.ClassNotFoundException: com.jolbox.bonecp.BoneCPDataSource
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:655)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1628)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]: Cannot resolve reference to bean 'mainDataSource' while setting bean property 'targetDataSource'; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.jolbox.bonecp.BoneCPDataSource] for bean with name 'mainDataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]; nested exception is java.lang.ClassNotFoundException: com.jolbox.bonecp.BoneCPDataSource
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 29 more
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.jolbox.bonecp.BoneCPDataSource] for bean with name 'mainDataSource' defined in ServletContext resource [/WEB-INF/spring-config.xml]; nested exception is java.lang.ClassNotFoundException: com.jolbox.bonecp.BoneCPDataSource
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:433)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 39 more
Caused by: java.lang.ClassNotFoundException: com.jolbox.bonecp.BoneCPDataSource
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:257)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 45 more 
```

未找到 BoneCP 类。我该如何解决？我正在使用 bonecp-provider 0.8.0-alpha1 hibernate 4 spring 3 jsf 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:05:22.557

您不仅需要-provider，还需要bonecp-version.jar（例如[这个](http://repo1.maven.org/maven2/com/jolbox/bonecp/0.7.1.RELEASE/bonecp-0.7.1.RELEASE.jar)）。我不确定你从哪里得到 .8 alpha 版本，但那里也必须有一个类似的 jar。

编辑：错过了您使用 Maven。然后简单地复制你的依赖定义

```
<dependency>
  <groupId>com.jolbox</groupId>
  <artifactId>bonecp-provider</artifactId>
  <version>0.8.0-alpha1</version>
</dependency> 
```

进入

```
<dependency>
  <groupId>com.jolbox</groupId>
  <artifactId>bonecp</artifactId>
  <version>0.8.0-alpha1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:56:33.660

com.jolbox.bonecp.BoneCPDataSource 位于核心 jar 文件中，因此您根本不需要 -provider jar。

还要使用-rc1 而不是-alpha1。

# javascript - 在 Locomotive 框架中使用连接会话中间件和 Redis

> ID：13780168
> 
> 赞同：0
> 
> 时间：2012-12-08T17:52:29.037
> 
> 标签：javascript, node.js, locomotivejs

我正在使用 Locomotive 框架来创建 nodejs Web 应用程序。

在`config/environments/all.js`我有：

```
 var express = require('express')
, poweredBy = require('connect-powered-by')
, util = require('util')
, connectAssets = require('connect-assets')
, redis = require('redis')
, RedisStore = require('connect-redis')(express)
, sessionStore = new RedisStore();

........
........

  this.use(express.cookieParser());
  this.use(express.bodyParser());
..........
..........
  this.use(express.session({
    secret: 'LoremIpsumDolorSit_Amet',
    store: sessionStore
  })); 
```

但是，请求对象中不存在会话对象。IE。在控制器实例中： `this.req.session`未定义。我缺少什么以及如何配置连接会话中间件以使用 redis 数据存储？

我的 redis 服务器在默认端口上运行，当我运行我的服务器时，它显示一个连接的客户端。只有当我终止服务器时，客户端才会断开连接。

我在 Fedora 16 上使用 Node 0.6.18、redis 服务器版本 2.4.8、机车版本 0.3.3 和 express 3.0.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:37:04.430

要使会话快速工作，以下三个必须按此顺序排列：

```
 this.use(express.cookieParser());
this.use(express.session(...));
this.use(this.router); 
```

在我的实现中，我在第二个语句之上有第三个语句。

显然，这是 Express 的一个已知特性，我对 Express 的内部运作了解不足，无法解释为什么会这样。可能对 NodeJS 有更多经验的人可以详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:16:42.947

使用`this.use()`，您将中间件添加到 Express 的请求/响应处理中：传入请求在到达您的应用程序之前通过所有中间件，而传出响应在发送回客户端之前返回中间件链。

安装中间件的顺序很重要：如果您有一个中间件（如`express.session`）依赖于另一个中间件（如`express.cookieParser`，用于解析会话 cookie），则首先安装依赖项。

在大多数情况下，`this.router`应该最后安装，或者几乎最后安装（通常后跟错误处理中间件），因为它取决于在调用它之前已经处理过的 cookie 和会话。

# c++ - 在一组三角形中找到所有可能的毕达哥拉斯三角形

> ID：13780170
> 
> 赞同：0
> 
> 时间：2012-12-08T17:52:34.580
> 
> 标签：c++, iteration, cout, pythagorean, triangle-count

**修订版 1**
我看过这个线程：[所有可能的毕达哥拉斯三元组](https://stackoverflow.com/questions/12500037/all-possible-pythagorean-triples)
看起来与我的相似，但由于某种原因我无法让我的工作......这是我的代码：

```
#include <iostream>
#include <cmath>
using namespace std;

class Labb2_uppg1 {
public:
    void run() {
        compute();
    }
private:
void compute() {                                                            // performs the computations
    int a, b, c, counter = 0, counter_pyth = 0;                             // a = cathetus of triangle
                                                                            // b = cathetus of triangle
                                                                            // c = hypotenuse of triangle
                                                                            // counter = used to determine the amount of iterated triangles
                                                                            // counter_pyth = used to determine the subset of pythagorean triangles in the total amount of iterated triangles
    for (a = 1; a <= 500; a++) {
        for (b = a; b <= 500; b++) {                                        // starts from the same index as 'a' to omit duplicate results
            counter++;
            c = int_sqrt((a*a)+(b*b));
            if (c == 100 || c == 200 || c == 300 || c == 400 || c == 500)   // prints the triangles whose hypotenuse matches the integers 100, 200, 300, 400 and 500
                cout << "Triangel med hypotenusan " << c << ": a = " << a << ", b = " << b << endl;
            if (((a*a)+(b*b))==(c*c)) {
                cout << "DEBUG_01: a = " << a << ", b = " << b
                     << ", c = " << c << endl;
                counter_pyth++;
            }
        }
    }
    cout << "\nAntal itererade trianglar: " << counter;                     // prints the number of triangles that the program has iterated through
    cout << "\nAntal pytagoreiska trianglar: " << counter_pyth << "\n\n";   // prints the number of Pythagorean triangles that the program has iterated through
}

int int_sqrt(int r) {                                                       // simplification of the Bakhsali Approximation method to calculate square roots
                                                                            // only integers may be used when invoking this function
                                                                            // returns the integer square root if it was successfully calculated using the radicand r
    int i = 0;                                                              // initiates 'i' to a value of 0
    while ((i*i) <= r)                                                      // approximates the square of 'i' to the radicand 'r'
        i++;
    i--;

    if ((i*i) == r)                                                         // if the square of 'i' is exactly 'r'
        return i;                                                           // then the integer root of 'r' has successfully been found
    else
        return -1;                                                          // else -1 is returned, no real number (radicand) can have -1 as its root
    }

}; 
```

* * *

输出：

DEBUG_01：a = 95，b = 228，c = 247

DEBUG_01：a = 96，b = 110，c = 146
DEBUG_01：a = 96，b = 128，c = 160
DEBUG_01：a = 96，b = 180 , c = 204
DEBUG_01: a = 96, b = 247, c = 265
DEBUG_01: a = 96, b = 280, c = 296
DEBUG_01: a = 96, b = 378, c = 390
DEBUG_01: a = 98, b = 336, c = 350
DEBUG_01: a = 99, b = 132, c = 165
DEBUG_01: a = 99, b = 168, c = 195
DEBUG_01: a = 99, b = 440, c = 451
DEBUG_01: a = 100 , b = 105, c = 145
DEBUG_01: a = 100, b = 240, c = 260
DEBUG_01: a = 100, b = 495, c = 505
DEBUG_01: a = 102, b = 136, c = 170
DEBUG_01: a = 102，b = 280，c = 298
DEBUG_01：a = 104，b = 153，c = 185
DEBUG_01：a = 104，b = 195，c = 221
DEBUG_01：a = 104，b = 330，c = 346
DEBUG_01：a = 105，b = 140，c = 175
DEBUG_01：a = 105，b = 208，c = 233
DEBUG_01：a = 105，b = 252，c = 273
DEBUG_01：a = 105，b = 360，c = 375
DEBUG_01：a = 108，b = 144，c = 180
DEBUG_01：a = 108，b = 231 , c = 255
DEBUG_01: a = 108, b = 315, c = 333
DEBUG_01: a = 108, b = 480, c = 492
DEBUG_01: a = 110, b = 264, c = 286
DEBUG_01: a = 111, b = 148, c = 185
DEBUG_01: a = 112, b = 180, c = 212
DEBUG_01: a = 112, b = 210, c = 238
Triangel med hypotenusan 400: a = 112, b = 384
DEBUG_01: a = 112, b = 384，c = 400
DEBUG_01：a = 112，b = 441，c = 455
DEBUG_01：a = 114，b = 152，c = 190
DEBUG_01：a = 114，b = 352，c = 370
DEBUG_01：a = 115，b = 252，c = 277
DEBUG_01：a = 115，b = 276，c = 299
DEBUG_01：a = 117，b = 156，c = 195
DEBUG_01：a = 117，b = 240，c = 267
DEBUG_01：a = 119，b = 120，c = 169
DEBUG_01：a = 119，b = 408 , c = 425
DEBUG_01: a = 120, b = 126, c = 174
Triangel med hypotenusan 200: a = 120, b = 160
DEBUG_01: a = 120, b = 160, c = 200
DEBUG_01: a = 120, b = 182, c = 218
DEBUG_01: a = 120, b = 209, c = 241
DEBUG_01: a = 120, b = 225, c = 255
DEBUG_01: a = 120, b = 288, c = 312
DEBUG_01: a = 120, b = 350，c = 370
DEBUG_01：a = 120，b = 391，c = 409
DEBUG_01：a = 120，b = 442，c = 458
DEBUG_01：a = 123，b = 164，c = 205
DEBUG_01：a = 125，b = 300，c = 325
DEBUG_01：a = 126，b = 168，c = 210
DEBUG_01：a = 126，b = 432，c = 450
DEBUG_01：a = 128，b = 240，c = 272
DEBUG_01：a = 129，b = 172，c = 215
DEBUG_01：a = 130，b = 144 , c = 194
DEBUG_01: a = 130, b = 312, c = 338
DEBUG_01: a = 132, b = 176, c = 220
DEBUG_01: a = 132, b = 224, c = 260
DEBUG_01: a = 132, b = 351，c = 375
DEBUG_01：a = 132，b = 385，c = 407
DEBUG_01：a = 132，b = 475，c = 493
DEBUG_01：a = 133，b = 156，c = 205
DEBUG_01：a = 133 , b = 456, c = 475
DEBUG_01: a = 135, b = 180, c = 225
DEBUG_01：a = 135，b = 324，c = 351
DEBUG_01：a = 135，b = 352，c = 377
DEBUG_01：a = 136，b = 255，c = 289
DEBUG_01：a = 136，b = 273，c = 305
DEBUG_01：a = 138，b = 184，c = 230
DEBUG_01：a = 140，b = 147，c = 203
DEBUG_01：a = 140，b = 171，c = 221
DEBUG_01：a = 140，b = 225 , c = 265
DEBUG_01: a = 140, b = 336, c = 364
Triangel med hypotenusan 500: a = 140, b = 480
DEBUG_01: a = 140, b = 480, c = 500
DEBUG_01: a = 141, b = 188，c = 235
DEBUG_01：a = 144，b = 165，c = 219
DEBUG_01：a = 144，b = 192，c = 240
DEBUG_01：a = 144，b = 270，c = 306
DEBUG_01：a = 144， b = 308，c = 340
DEBUG_01：a = 144，b = 420，c = 444
DEBUG_01：a = 145，b = 348，c = 377
DEBUG_01：a = 145，b = 408，c = 433
DEBUG_01：a = 147，b = 196，c = 245
DEBUG_01：a = 150，b = 200，c = 250
DEBUG_01：a = 150，b = 360，c = 390
DEBUG_01：a = 152，b = 285，c = 323
DEBUG_01：a = 152，b = 345，c = 377
DEBUG_01：a = 153，b = 204 , c = 255
DEBUG_01: a = 153, b = 420, c = 447
DEBUG_01: a = 155, b = 372, c = 403
DEBUG_01: a = 155, b = 468, c = 493
DEBUG_01: a = 156, b = 208, c = 260
DEBUG_01: a = 156, b = 320, c = 356
DEBUG_01: a = 156, b = 455, c = 481
DEBUG_01: a = 156, b = 495, c = 519
DEBUG_01: a = 159 , b = 212, c = 265
DEBUG_01: a = 160, b = 168, c = 232
DEBUG_01：a = 160，b = 231，c = 281
DEBUG_01：a = 160，b = 300，c = 340
DEBUG_01：a = 160，b = 384，c = 416
DEBUG_01：a = 161，b = 240，c = 289
DEBUG_01：a = 162，b = 216，c = 270
DEBUG_01：a = 165，b = 220，c = 275
DEBUG_01：a = 165，b = 280，c = 325
DEBUG_01：a = 165，b = 396 , c = 429
DEBUG_01: a = 168, b = 224, c = 280
DEBUG_01: a = 168, b = 270, c = 318
DEBUG_01: a = 168, b = 315, c = 357
DEBUG_01: a = 168, b = 374，c = 410
DEBUG_01：a = 168，b = 425，c = 457
DEBUG_01：a = 168，b = 490，c = 518
DEBUG_01：a = 170，b = 264，c = 314
DEBUG_01：a = 170 , b = 408, c = 442
DEBUG_01: a = 171, b = 228, c = 285
DEBUG_01：a = 174，b = 232，c = 290
DEBUG_01：a = 175，b = 288，c = 337
DEBUG_01：a = 175，b = 420，c = 455
DEBUG_01：a = 176，b = 210，c = 274
DEBUG_01：a = 176，b = 330，c = 374
Triangel med hypotenusan 500：a = 176，b = 468
DEBUG_01：a = 176，b = 468，c = 500
DEBUG_01：a = 177，b = 236， c = 295
DEBUG_01：a = 180，b = 189，c = 261
Triangel med hypotenusan 300：a = 180，b = 240
DEBUG_01：a = 180，b = 240，c = 300
DEBUG_01：a = 180，b = 273 , c = 327
DEBUG_01: a = 180, b = 299, c = 349
DEBUG_01: a = 180, b = 385, c = 425
DEBUG_01: a = 180, b = 432, c = 468
DEBUG_01: a = 183, b = 244，c = 305
DEBUG_01：a = 184，b = 345，c = 391
DEBUG_01：a = 185，b = 444，c = 481
DEBUG_01：a = 186，b = 248，c = 310
DEBUG_01：a = 189，b = 252，c = 315
DEBUG_01：a = 189，b = 340，c = 389
DEBUG_01：a = 190，b = 336，c = 386
DEBUG_01：a = 190，b = 456，c = 494
DEBUG_01：a = 192，b = 220，c = 292
DEBUG_01：a = 192，b = 256 , c = 320
DEBUG_01: a = 192, b = 360, c = 408
DEBUG_01: a = 192, b = 494, c = 530
DEBUG_01: a = 195, b = 216, c = 291
DEBUG_01: a = 195, b = 260, c = 325
DEBUG_01: a = 195, b = 400, c = 445
DEBUG_01: a = 195, b = 468, c = 507
DEBUG_01: a = 196, b = 315, c = 371
DEBUG_01: a = 198 , b = 264, c = 330
DEBUG_01: a = 198, b = 336, c = 390
DEBUG_01：a = 200，b = 210，c = 290
DEBUG_01：a = 200，b = 375，c = 425
DEBUG_01：a = 200，b = 480，c = 520
DEBUG_01：a = 201，b = 268，c = 335
DEBUG_01：a = 203，b = 396，c = 445
DEBUG_01：a = 204，b = 253，c = 325
DEBUG_01：a = 204，b = 272，c = 340
DEBUG_01：a = 205，b = 492 , c = 533
DEBUG_01: a = 207, b = 224, c = 305
DEBUG_01: a = 207, b = 276, c = 345
DEBUG_01: a = 208, b = 306, c = 370
DEBUG_01: a = 208, b = 390, c = 442
DEBUG_01: a = 210, b = 280, c = 350
DEBUG_01: a = 210, b = 416, c = 466
DEBUG_01: a = 213, b = 284, c = 355
DEBUG_01: a = 216 , b = 288, c = 360
DEBUG_01: a = 216, b = 405, c = 459
DEBUG_01：a = 216，b = 462，c = 510
DEBUG_01：a = 217，b = 456，c = 505
DEBUG_01：a = 219，b = 292，c = 365
DEBUG_01：a = 220，b = 231，c = 319
DEBUG_01：a = 220，b = 459，c = 509
DEBUG_01：a = 222，b = 296，c = 370
DEBUG_01：a = 224，b = 360，c = 424
DEBUG_01：a = 224，b = 420 , c = 476
DEBUG_01: a = 225, b = 272, c = 353
DEBUG_01: a = 225, b = 300, c = 375
DEBUG_01: a = 228, b = 304, c = 380
DEBUG_01: a = 228, b = 325, c = 397
DEBUG_01: a = 231, b = 308, c = 385
DEBUG_01: a = 231, b = 392, c = 455
DEBUG_01: a = 232, b = 435, c = 493
DEBUG_01: a = 234 , b = 312, c = 390
DEBUG_01: a = 234, b = 480, c = 534
DEBUG_01：a = 237，b = 316，c = 395
DEBUG_01：a = 238，b = 240，c = 338
DEBUG_01：a = 240，b = 252，c = 348
DEBUG_01：a = 240，b = 275，c = 365
Triangel med hypotenusan 400：a = 240，b = 320
DEBUG_01：a = 240，b = 320，c = 400
DEBUG_01：a = 240，b = 364，c = 436
DEBUG_01：a = 240，b = 418， c = 482
DEBUG_01：a = 240，b = 450，c = 510
DEBUG_01：a = 243，b = 324，c = 405
DEBUG_01：a = 246，b = 328，c = 410
DEBUG_01：a = 248，b = 465，c = 527
DEBUG_01：a = 249，b = 332，c = 415
DEBUG_01：a = 252，b = 275，c = 373
DEBUG_01：a = 252，b = 336，c = 420
DEBUG_01：a = 252， b = 405，c = 477
DEBUG_01：a = 255，b = 340，c = 425
DEBUG_01：a = 255，b = 396，c = 471
DEBUG_01：a = 256，b = 480，c = 544
DEBUG_01：a = 258，b = 344，c = 430
DEBUG_01：a = 260，b = 273，c = 377
DEBUG_01：a = 260，b = 288，c = 388
DEBUG_01：a = 261，b = 348，c = 435
DEBUG_01：a = 261，b = 380，c = 461
DEBUG_01：a = 264，b = 315 , c = 411
DEBUG_01: a = 264, b = 352, c = 440
DEBUG_01: a = 264, b = 448, c = 520
DEBUG_01: a = 264, b = 495, c = 561
DEBUG_01: a = 266, b = 312，c = 410
DEBUG_01：a = 267，b = 356，c = 445
DEBUG_01：a = 270，b = 360，c = 450
DEBUG_01：a = 273，b = 364，c = 455
DEBUG_01：a = 276 , b = 368, c = 460
DEBUG_01: a = 276, b = 493, c = 565
DEBUG_01：a = 279，b = 372，c = 465
DEBUG_01：a = 279，b = 440，c = 521
DEBUG_01：a = 280，b = 294，c = 406
DEBUG_01：a = 280，b = 342，c = 442
DEBUG_01：a = 280，b = 351，c = 449
DEBUG_01：a = 280，b = 450，c = 530
DEBUG_01：a = 282，b = 376，c = 470
DEBUG_01：a = 285，b = 380 , c = 475
DEBUG_01: a = 288, b = 330, c = 438
DEBUG_01: a = 288, b = 384, c = 480
DEBUG_01: a = 291, b = 388, c = 485
DEBUG_01: a = 294, b = 392，c = 490
DEBUG_01：a = 297，b = 304，c = 425
DEBUG_01：a = 297，b = 396，c = 495
DEBUG_01：a = 300，b = 315，c = 435
Triangel med hypotenusan 500： a = 300，b = 400
DEBUG_01：a = 300，b = 400，c = 500
DEBUG_01：a = 300，b = 455，c = 545
DEBUG_01：a = 303，b = 404，c = 505
DEBUG_01：a = 306，b = 408，c = 510
DEBUG_01：a = 308，b = 435，c = 533
DEBUG_01：a = 308，b = 495，c = 583
DEBUG_01：a = 309，b = 412，c = 515
DEBUG_01：a = 312，b = 416，c = 520
DEBUG_01：a = 312，b = 459 , c = 555
DEBUG_01: a = 315, b = 420, c = 525
DEBUG_01: a = 318, b = 424, c = 530
DEBUG_01: a = 319, b = 360, c = 481
DEBUG_01: a = 320, b = 336，c = 464
DEBUG_01：a = 320，b = 462，c = 562
DEBUG_01：a = 321，b = 428，c = 535
DEBUG_01：a = 322，b = 480，c = 578
DEBUG_01：a = 324 , b = 432, c = 540
DEBUG_01: a = 325, b = 360, c = 485
DEBUG_01：a = 327，b = 436，c = 545
DEBUG_01：a = 330，b = 440，c = 550
DEBUG_01：a = 333，b = 444，c = 555
DEBUG_01：a = 336，b = 377，c = 505
DEBUG_01：a = 336，b = 385，c = 511
DEBUG_01：a = 336，b = 448，c = 560
DEBUG_01：a = 339，b = 452，c = 565
DEBUG_01：a = 340，b = 357 , c = 493
DEBUG_01: a = 341, b = 420, c = 541
DEBUG_01: a = 342, b = 456, c = 570
DEBUG_01: a = 345, b = 460, c = 575
DEBUG_01: a = 348, b = 464，c = 580
DEBUG_01：a = 351，b = 468，c = 585
DEBUG_01：a = 352，b = 420，c = 548
DEBUG_01：a = 354，b = 472，c = 590
DEBUG_01：a = 357 , b = 360, c = 507
DEBUG_01: a = 357, b = 476, c = 595
DEBUG_01：a = 360，b = 378，c = 522
DEBUG_01：a = 360，b = 480，c = 600
DEBUG_01：a = 363，b = 484，c = 605
DEBUG_01：a = 366，b = 488，c = 610
DEBUG_01：a = 368，b = 465，c = 593
DEBUG_01：a = 369，b = 492，c = 615
DEBUG_01：a = 372，b = 496，c = 620
DEBUG_01：a = 375，b = 500 , c = 625
DEBUG_01: a = 380, b = 399, c = 551
DEBUG_01: a = 384, b = 440, c = 584
DEBUG_01: a = 390, b = 432, c = 582
DEBUG_01: a = 396, b = 403，c = 565
DEBUG_01：a = 399，b = 468，c = 615
DEBUG_01：a = 400，b = 420，c = 580
DEBUG_01：a = 414，b = 448，c = 610
DEBUG_01：a = 420 , b = 441, c = 609
DEBUG_01: a = 429, b = 460, c = 629
DEBUG_01：a = 432，b = 495，c = 657
DEBUG_01：a = 440，b = 462，c = 638
DEBUG_01：a = 460，b = 483，c = 667
DEBUG_01：a = 476，b = 480，c = 676

Antal itererade 三角：125250 Antal pytagoreiska 三角：456

* * *

如您所见，每当我运行此程序时，我都会从“counter_pyth”中得到答案“456”，根据我的老师的说法，正确答案是“386”，但我不知道我做错了什么..

* * *

**修订版 2**

代码：

```
.
.
.

for (a = 1; a <= 500; a++) {
        for (b = a; b <= 500; b++) {                                        // starts from the same index as 'a' to omit duplicate results
            counter++;
            c = int_sqrt((a*a)+(b*b));
            if (c == 100 || c == 200 || c == 300 || c == 400 || c == 500)   // prints the triangles whose hypotenuse matches the integers 100, 200, 300, 400 and 500
                cout << "Triangel med hypotenusan " << c << ": a = " << a << ", b = " << b << endl;
            if (((a*a)+(b*b))==(c*c)) {
                if (!((a > 500 ) || (b > 500) || (c > 500))) {
                    cout << "DEBUG_01: a = " << a << ", b = " << b
                    << ", c = " << c << endl;
                    counter_pyth++;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:01:14.313

（与您链接的问题一起）尝试`c`改为计数，因为`c`必须最多为 500，并且对`a`or没有限制`b`：

```
for(int c = 1; c <= 500; c++) {
    for(int a = 1; a < c; a++) {
        int b = int_sqrt(c * c - a * a);
        if(b > 0) {
            //you've found a right triangle with c at most 500
        }
    }
} 
```

您可能计算了超过 386 个三角形，因为您计算的是`c > 500`.

# android - 压缩内存中的位图

> ID：13780172
> 
> 赞同：0
> 
> 时间：2012-12-08T17:52:36.320
> 
> 标签：android

我正在创建一个从设备读取所有图像的活动。我使用以下代码

```
ContentResolver crThumb = context.getContentResolver();
            BitmapFactory.Options options = new BitmapFactory.Options();
            b = MediaStore.Images.Thumbnails.getThumbnail(
                    crThumb,
                    Long.parseLong(url),
                    MediaStore.Images.Thumbnails.MINI_KIND, options);
            return b; 
```

我在 GridView 中显示这些位图，但是由于内存不足，有时我的活动崩溃了。在读取之前如何压缩内存中的位图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:20:49.460

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

你调用 BMP.docodeStream() 两次

第一次调用数字压缩多少

第二次调用根据调用 #1 的结果将压缩实例存储到内存中

# android - Listview 项目的背景与片段中的渐变

> ID：13780178
> 
> 赞同：0
> 
> 时间：2012-12-08T17:52:51.067
> 
> 标签：android, android-fragments, android-ui, android-listfragment, android-fragmentactivity

我遇到了一个问题，在片段活动中（使用 ABS）对 listview 的项目使用背景渐变。

所以，首先我有一个背景，可以在其他应用程序中成功使用。它具有从 (r = g = b = 91) 到 (r = g = b = 81) 的梯度。

![bg](../Images/3af536eabeee119ff4b6430ee0c4f3fd.png)

这就是它在简单活动中的样子： ![在此处输入图像描述](../Images/b303f67df8678e7ebb37a0c7a2858dfa.png)

这就是它在片段活动中的样子： ![在此处输入图像描述](../Images/875642f015b2f8dd39925db9fa9eff30.png)

起初我认为这是一个非常大的梯度，我只做了 2 个点的梯度，从 (r = g = b = 80) 到 (r = g = b = 78)。

![在此处输入图像描述](../Images/f05c0f041379609c3e5b6c6497f080a3.png)

这就是我得到的：

![在此处输入图像描述](../Images/5cb88b70b55b4e9f8300be1ca1b23e20.png)

我仍然想在列表视图的项目背景中使用渐变，以便项目似乎不是平面的。

**那么，为什么我得到如此糟糕的图像，在片段内的列表视图项目的背景中使用渐变？**

# android - 如何克服这个错误？

> ID：13780179
> 
> 赞同：0
> 
> 时间：2012-12-08T17:52:53.900
> 
> 标签：android, sms, syntax-error

我使用了通过 android 应用程序发送短信的代码。

```
android.telephony.SmsManager sms = android.telephony.SmsManager.getDefault();
sms.android.telephony.SmsManager.sendTextMessage(phoneNumber, null, message, pi, null); 
```

我在第二行得到一个错误

> 令牌“（”上的语法错误，删除此令牌 - 令牌“null”上的语法错误，无效的 VariableDeclarator - 令牌上的语法错误，应改为 ConstructorHeaderName

使用 android sdk 版本 2.3.3 API 10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:54:01.513

将您的代码更改为：

```
android.telephony.SmsManager sms = android.telephony.SmsManager.getDefault();
sms.sendTextMessage(phoneNumber, null, message, pi, null); 
```

最好的方法是：

```
SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage(phoneNumber, null, message, pi, null); 
```

并从键盘按**`CTRL`+ `SHIFT`+`O`**以导入所有必要的包

# cocos2d-iphone - 我应该对我的 cocos2d-iphone 1.0.1 项目进行哪些更改才能在 iPhone 5 上运行它？

> ID：13780181
> 
> 赞同：1
> 
> 时间：2012-12-08T17:52:57.010
> 
> 标签：cocos2d-iphone, ios6, iphone-5

我一直在开发一个 cocos2d-iphone 1.0.1 游戏项目，并一直在 iPhone 4 上对其进行测试。

我很快就会拿到 iPhone 5。我刚刚将 Xcode 更新到 4.5.2。

我的项目至少可以立即在 iPhone 5 上运行吗？还是我必须在我的项目中进行重大更改？如，当我尝试运行它时会崩溃吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:06:47.220

它应该能够立即在 iphone 5 上运行，但它可能会被加装，因为我猜它还不支持更高的屏幕尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:30:38.537

如果您不执行任何操作，该应用程序将以原始分辨率在 iPhone 5 上运行。这意味着两侧将有空白（黑色）空间。

添加`Default-586h@2x.png`尺寸为 640x1136 的图像后，您的应用程序将使用 iPhone 5 屏幕的整个宽度。您必须调整布局以支持 iPhone 5 屏幕尺寸。

# php - 用数组更新 mysql 表

> ID：13780182
> 
> 赞同：1
> 
> 时间：2012-12-08T17:53:01.687
> 
> 标签：php, mysql, arrays, foreach

我有桌子：平台

此表列内：1\. first_scan_date, 2\. next_scan_date 3\. scan_frequency

现在，我从基于网络的公式中得到了这样的数组：

```
Array
(
    [scan_freq1] => Array
        (
            [0] => 0
            [1] => 0
            [2] => 0
            [3] => 0
        )

    [first_scan_date1] => Array
        (
            [0] => 0000-00-00
            [1] => 0000-00-00
            [2] => 0000-00-00
            [3] => 0000-00-00
        )

    [next_scan_date1] => Array
        (
            [0] => 
            [1] => 
            [2] => 
            [3] => 
        )

) 
```

如何使用来自 PHP 数组的内容在数据库中更新它？我想我需要像 foreach 这样的东西，但不知道......

更新平台 (first_scan_date,next_scan_date,scan_frequency) 值 (?,?,?)...

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:59:25.663

试试下面的方法

```
$cnt = count($arr['scan_freq1']);
for($i=0;$i<$cnt;$i++){
  echo $arr['scan_freq1'][$i];
  echo $arr['first_scan_date1'][$i];
  echo $arr['next_scan_date1'][$i];

//now you have three values make query and update into db

$db->prepare(
     "UPDATE `platforms` SET `first_scan_date`=?, `next_scan_date`=?,
     `scan_frequency`= ? WHERE platformtype='os'"
 )->execute(array($arr['first_scan_date1'][$i],$arr['next_scan_date1'][$i],$arr['scan_freq1'][$i]));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:03:42.133

我将遍历数组以准备一个要插入到单个查询中的字符串，如下所示：

```
$sql = "INSERT INTO table (first_scan_date,next_scan_date,scan_frequency)
VALUES ('0000-00-00','0000-00-00',1),('0000-00-00','0000-00-00',1),('0000-00-00','0000-00-00',1)
ON DUPLICATE KEY UPDATE first_scan_date=VALUES(first_scan_date),next_scan_date=VALUES(next_scan_date),scan_frequency=VALUES(scan_frequency);"; 
```

你可以这样做：

```
$freq = $arr['scan_freq1'];
$date1 = $arr['first_scan_date1'];
$date2 = $arr['next_scan_date1'];
foreach ($date1 as $key => $value){
    $row[] = "('".$value."','".$date2[$key]."',".$freq[$key].")";
}
$list = implode(',', $row);
$sql = "INSERT INTO table (first_scan_date,next_scan_date,scan_frequency)
VALUES ".$list."
ON DUPLICATE KEY UPDATE first_scan_date=VALUES(first_scan_date),next_scan_date=VALUES(next_scan_date),scan_frequency=VALUES(scan_frequency);"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-09T00:26:53.140

这可能为时已晚，但可能会在现在或将来对某人有所帮助我相信这是实现这一目标的最短方法

```
public function update($table,$values,$where_clause)
{
  foreach ($values as $key => $val)
  {
    $valstr[] = $key." = '$val'";
  }

 $update_query = 'UPDATE '.$table.' SET '.implode(', ', $valstr)
 ." WHERE ".$where_clause; 
  return $update_query;
} 
```

在一个codeigniters核心文件中找到了它，它只是循环遍历所有值，将它们存储在一个数组中，然后将数组转换为一个字符串并将其添加到查询中，最后一个where子句..我希望这对某人有所帮助

# objective-c - 当 NSString 更改时，即使更改后，`do something` 也只会被调用一次

> ID：13780184
> 
> 赞同：0
> 
> 时间：2012-12-08T17:53:24.080
> 
> 标签：objective-c, macos, cocoa, nsstring

这是我的代码：

。H

```
@interface AppDelegate : NSObject <NSApplicationDelegate>{
    NSString *lastValue;
} 
```

.m

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    lastValue = nil; 
}

- (void) fullDMXReceived:(NSString*)finalData {

    if (finalData != lastValue) {
        lastValue = finalData;

        // doing something
     }
} 
```

出于某种原因，“做某事”只被调用一次，然后就停止了。

一些背景信息：“fullDMXReceived”每 100 毫秒左右调用一次，并提供新信息。有时（实际上很多次）数据是相同的，因此，我不想“做某事”运行。如果它不同，我确实希望“做某事”发生。

我不确定为什么即使 finalData 发生变化它也只运行一次“做某事”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:31:39.800

如果`buffer`in`fullDMXReceived:`是一个`NSMutableString`被重用的实例，您将需要复制实际的字符串而不是仅仅分配实例，请尝试以下操作：

```
- (void) fullDMXReceived:(NSString*)finalData {
    if (finalData != nil &&
        ![finalData isEqualToString:lastValue]) {
        [lastValue release]; // only needed if you don't use ARC
        lastValue = [finalData copy];
        // doing something
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:24:11.747

我想知道您的 lastValue 没有 setter/getter / @property ..尝试实现它，然后检查是否存在问题。

编辑：

将您的代码更改为：

```
.h

@interface AppDelegate : NSObject <NSApplicationDelegate>
@property(strong)  NSString *lastValue;
@end

.m

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
   _lastValue = nil; 
}

- (void) fullDMXReceived:(NSString*)finalData {

    if (![finalData isEqualToString:_lastValue]) {
        _lastValue = finalData;

        // doing something
     }
} 
```

# c - 如何修复在 Dev C 和 Netbeans 中有效但在 Eclipse 中无效的生成文件？

> ID：13780185
> 
> 赞同：4
> 
> 时间：2012-12-08T17:53:24.697
> 
> 标签：c, netbeans, makefile, eclipse-cdt

好吧，这是一个学校项目，我应该完成教授提供的骨架程序。这是提供给我的makefile：

```
db: db.o students.o courses.o enrolls.o
    cc db.o students.o courses.o enrolls.o -o db
db.o: db.c types.h students.h courses.h enrolls.h db.h
    cc -c db.c
students.o: students.c types.h students.h
    cc -c students.c
courses.o: courses.c types.h courses.h
    cc -c courses.c
enrolls.o: enrolls.c types.h students.h courses.h enrolls.h
    cc -c enrolls.c 
```

现在，这在命令行（使用 gcc）和 Dev C++ 中运行良好，但是当我尝试使用 Netbeans 时，它抛出了一个错误，说明了有关 clean 命令的内容。所以，我添加了这一行：

```
clean:
    rm -f *.exe *.o 
```

到文件的末尾，它工作正常（在 Netbeans 中）。但是，它仍然不能在 Eclipse CDT 中工作。它给出了这个错误：

```
Description Resource    Path    Location    Type
make: *** No rule to make target `all'.  Stop.  Course Project          C/C++ Problem 
```

所以，我尝试添加

```
all:db 
```

到顶部，但随后会引发此错误：

```
Description Resource    Path    Location    Type
make: *** [db] Error 1  Course Project          C/C++ Problem 
```

所以，现在我不知道该怎么办。我已经用谷歌搜索了，但似乎还没有任何效果。关于如何更改此生成文件以使其在 Eclipse 中工作的任何想法？

这是当前（非功能性）形式的生成文件：

```
all:db

db: db.o students.o courses.o enrolls.o
    cc db.o students.o courses.o enrolls.o -o db
db.o: db.c types.h students.h courses.h enrolls.h db.h
    cc -c db.c
students.o: students.c types.h students.h
    cc -c students.c
courses.o: courses.c types.h courses.h
    cc -c courses.c
enrolls.o: enrolls.c types.h students.h courses.h enrolls.h
    cc -c enrolls.c
clean:
    rm -f *.exe *.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:13:35.610

据我所知，Eclipse 使用 gnu make/gcc 作为默认构建工具链。因此，如果您的 makefile 在 shell 中工作，它应该在 Eclipse 中工作。您提到的第一个错误只是指出 Eclipse 使用默认命令“make all”构建。添加 'all: db' 应该可以纠正这个问题。正如@Bug Catcher 所说，你应该在'all：'和'db'之间留一个空格。您还可以添加 .PHONY 语句：

```
.PHONY: all db clean

all: db
    @echo "Done !"

# [...] 
```

# python - python格式化浮点数以打印0.123而不是0.123

> ID：13780187
> 
> 赞同：1
> 
> 时间：2012-12-08T17:54:39.940
> 
> 标签：python

我有一个简单的问题，我觉得应该有一个简单的解决方案。如何格式化浮点数，以便只显示小数点后的数字？我更喜欢使用 '{}'.format 来完成此操作。

```
>>> n = 0.12345
>>> n
0.12345
>>> str(n)[1:]
'.12345'
>>> '{}'.format(n)
'0.12345'
>>> '{}'.format(str(n)[1:])
'.12345' 
```

我知道我可以使用 str(n)[1:]，但我不想将数字转换为字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:58:00.070

我认为没有删除零的格式字符串。但是，您可以使用`lstrip`：

```
In [25]: n = 0.12345
In [26]: '{:.3f}'.format(n).lstrip('0')
Out[26]: '.123' 
```

至少这比 更安全，如果等于大于 1 或小于 -1 的`str(n)[1:]`数字，它将删除一个有效数字。`n`

# javascript - 在php中检测浏览器、版本和平台的可靠方法

> ID：13780188
> 
> 赞同：21
> 
> 时间：2012-12-08T17:54:47.963
> 
> 标签：javascript, php, browser, owasp

我一直在寻找一种可靠的方式来拥有（至少是不那么晦涩的方式）：

1.  浏览器的名称
2.  版本
3.  以及它所在的平台（OS）
4.  也许更多信息，但上面的 3 个信息就足够了。

我想根据这些信息显示自定义内容，例如：

> 如果用户想知道如何清除浏览器上的 cookie。假设我已经为许多浏览器提供了许多内容。版本我想自动加载适当的内容

**有没有办法不涉及 Javascript 来获取这些值？**

我有没有找到浏览器或不准确的用例。所以我想有最可靠的解决方案。

这里有 2 个网站可以满足我的需要：

1.  [www.whatismybrowser.com](http://www.whatismybrowser.com/)（联系所有者了解如何在 PHP 中进行操作）
2.  [HawkBrowser](http://www.cyscape.com/showbrow.aspx)真的是详尽的测试，不是免费的

与部分解决方案的其他链接：

1.  [upgrademybrowser.org](http://updatemybrowser.org/)使用 2012 年 8 月的旧 browsercap（[来源](https://github.com/hongaar/updatemybrowser)）
2.  谷歌的[www.whatbrowser.org](http://www.whatbrowser.org/)

花了很多天尝试，寻找，但没有成功。我从 Stackoverflow 社区发现了很多提示：

1.  [browsercap](http://tempdownloads.browserscap.com/)带有[get_browser](http://php.net/manual/en/function.get-browser.php) ()。该项目已停止（目前为 2012 年 8 月 8 日）并且没有检测到一些现代流行的手持设备。
2.  Javascript 检测特征方法：[Modernirz](http://modernizr.com/)。对于我想做的事情来说，这不是一个好方法，时间太长了，而且必须经常更新。
3.  [jQuery.browser](http://api.jquery.com/jQuery.browser/)不够好没有足够的可能性。
4.  [quirksmode.org](http://www.quirksmode.org/js/detect.html) javascript，目前在移动设备上不准确，更喜欢 PHP 版本。

其他有用的链接：

1.  [Stakoverflow 答案 1](https://stackoverflow.com/questions/2257597/reliable-user-browser-detection-with-php)
2.  [堆栈溢出答案 2](https://stackoverflow.com/questions/2142030/any-php-code-to-detect-the-browser-with-version-and-operating-system)
3.  [PHP移动检测](http://code.google.com/p/php-mobile-detect/)
4.  [PIWIK](http://piwik.org/)分析报告

**编辑 1** 到目前为止，我已经测试了答案和评论。这些解决方案非常令人满意：

*   **[PHP mobile 检测](https://github.com/serbanghita/Mobile-Detect)**最后一个版本非常好，如果您正在使用它，最好将示例中的表单提供给客户端，以便他们可以为项目做出贡献。（感谢@Pekka）
*   **[WURFL](http://wurfl.sourceforge.net/php_index.php)**不太新，但也很好。（感谢@Ian Roberts）

    **编辑 2** PHP 移动检测使用 WURFL

**更新**

确保您收到的标头未被任何其他库修改。

例如，像**[OWASP PhpSec](https://github.com/OWASP/phpsec)** ***[ABANDONED]***之类的一些安全库将标头结构更改为自定义对象，并且 **[PHP 移动检测](https://github.com/serbanghita/Mobile-Detect)**不再能够访问它需要的所有信息

对于那些使用**[OWASP PhpSec](https://github.com/OWASP/phpsec)** ***[ABANDONED]***的人， **http 库**正在修改全局标头对象结构。（2013 年 12 月）因此，如果您有问题，只需在使用**http 库包含任何****[OWASP PhpSec](https://github.com/OWASP/phpsec)**类之前使用**[PHP 移动检测](https://github.com/serbanghita/Mobile-Detect)**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T18:12:28.677

你考虑过[WURFL](http://wurfl.sourceforge.net/php_index.php)吗？它的主要目的是对移动设备浏览器进行分类，但它声称也有一种识别桌面浏览器的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:12:56.897

您从 get_browser() 获得的 PHP 中的浏览器信息

因此您可以使用 ajax 调用 PHP 站点，提供有关用户代理的信息

例如

PHP

```
$info = get_browser(null, true);
echo json_encode($info); 
```

get_browser 提供的数组看起来像

```
Array
(
    [browser_name_regex] => ^mozilla/5\.0 (windows; .; windows nt 5\.1; .*rv:.*) gecko/.* firefox/0\.9.*$
    [browser_name_pattern] => Mozilla/5.0 (Windows; ?; Windows NT 5.1; *rv:*) Gecko/* Firefox/0.9*
    [parent] => Firefox 0.9
    [platform] => WinXP
    [browser] => Firefox
    [version] => 0.9
    [majorver] => 0
    [minorver] => 9
    [cssversion] => 2
    [frames] => 1
    [iframes] => 1
    [tables] => 1
    [cookies] => 1
    [backgroundsounds] =>
    [vbscript] =>
    [javascript] => 1
    [javaapplets] => 1
    [activexcontrols] =>
    [cdf] =>
    [aol] =>
    [beta] => 1
    [win16] =>
    [crawler] =>
    [stripper] =>
    [wap] =>
    [netclr] =>
) 
```

这当然不是一个可靠的解决方案，因为您可以根据需要更改浏览器字符串。**

# arrays - 元组案例映射不适用于 Scala 中的通用 Array[T]

> ID：13780189
> 
> 赞同：2
> 
> 时间：2012-12-08T17:54:49.367
> 
> 标签：arrays, scala, pattern-matching, manifest, implicit

我不明白为什么`case`当我尝试使用泛型时编译器无法理解元组上的指令映射`Array[T]`。

```
class Variable[T](val p: Prototype[T], val value: T)

class Prototype[T](val name: String)(implicit m: Manifest[T])

  // Columns to variable converter
implicit def columns2Variables[T](columns:Array[(String,Array[T])]): Iterable[Variable[Array[T]]] = {
    columns.map{
      case(name,value) =>
      new Variable[Array[T]](new Prototype[Array[T]](name), value)
     }.toIterable
  } 
```

错误说：

```
error: constructor cannot be instantiated to expected type;
found   : (T1, T2)
required: fr.geocite.simExplorator.data.Variable[Array[T]]
case(name,value) => 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:48:36.560

我也不确定错误的措辞，但首先，您将需要清单，`T`因为它是构造所必需的`new Prototype[Array[T]]`（如果其类型参数的清单在范围内，则可以自动生成数组清单）。

有什么理由绝对需要数组吗？它们带有 Java 类型系统的不规则性，它们是可变的，并且它们提供的优势非常小，例如`Vector`. 最后，这可能就是为什么要随身携带清单，与数组不同，标准集合不需要清单来构建。

```
class Variable[T](val p: Prototype[T], val value: T)
class Prototype[T](val name: String)

implicit def cols2v[T](cols: Vector[(String,Vector[T])]): Vector[Variable[Vector[T]]] =
  cols.map {
    case (name, value) => new Variable(new Prototype(name), value)
  } 
```

# r - 打破长公式 R 文档

> ID：13780190
> 
> 赞同：1
> 
> 时间：2012-12-08T17:54:56.120
> 
> 标签：r

我有一个很长的公式，我需要打破一个包的 R 文档，否则它会拖到页面的右侧。这是 roxygen2 风格的公式：

```
#' \deqn{Cov(r_{ist}, r_{iuv})= [.5\rho_{ist}\rho_{iuv}(\rho_{isu}^2 + 
#' \rho_{isv}^2 + \rho_{itu}^2 + \rho_{itv}^2) + \rho_{isu}\rho_{itv}+ \newline 
#' \indent \rho_{isv}\rho_{itu}-(\rho_{ist}\rho_{isu}\rho_{isv} + 
#' \rho_{its}\rho_{itu}\rho_{itv}) + \rho_{ius}\rho_{iut}\rho_{iuv} + 
#' \rho_{ivs}\rho_{ivt}\rho_{ivu}]/n_i} 
```

请注意，我尝试使用 \new line 和 indent 但这不起作用，它仍然落后于边缘。

如何打破公式并缩进？也许缩进不合适（不确定）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:04:21.567

这是有关此问题的链接：

[http://yihui.name/en/2007/12/line-breaks-for-latex-code-in-r-documentation-files/](http://yihui.name/en/2007/12/line-breaks-for-latex-code-in-r-documentation-files/)

# c++ - 从套接字非阻塞winsock2接收数据？

> ID：13780197
> 
> 赞同：0
> 
> 时间：2012-12-08T17:55:49.943
> 
> 标签：c++, arrays, winsock

我对cpp相当陌生。我希望能够通过 sock_stream 接收数据。我想将接收到的数据从 SocketInfo->DataBuf.buf 传递到在程序开始时初始化的 char recvArray[1024] 缓冲区。我需要能够从我的 recvArray[] 中检查/解析和组合数值。我如何使这个副本工作？我尝试过的几件事得到编译器错误“从 char* 到 char 的无效转换”

```
//check sockets for for read or write notification
for(int i=0; Total>0 && i<TotalSockets; i++){
    LPSOCKET_INFORMATION SocketInfo = SocketList[i];

    //check if data incomming on each socket
    if( FD_ISSET(SocketInfo->Socket, &Reader)){
        Total--;
        SocketInfo->DataBuf.buf = SocketInfo->Buffer;
        SocketInfo->DataBuf.len = BUFFERSIZE;
        Flags = 0;
        //receive data
        SocketInfo->RecvBytes = sizeof(SocketInfo->DataBuf);
        check = WSARecv(SocketInfo->Socket, &(SocketInfo->DataBuf), 1, &(SocketInfo->RecvBytes), &Flags, NULL, NULL);
        //error checking
        if( check == SOCKET_ERROR){
            if( WSAGetLastError() != WSAEWOULDBLOCK){
                printf("base station client receive failed with error %d \n", WSAGetLastError());
                FreeSocketInformation(i); //shuts down client socket if no data
            }
            continue;
        }
        else{
            //receive bytes into array

            //print received bytes on screen
            printf("%s \n", SocketInfo->DataBuf.buf);
            //otherwise deal with data
            //need to copy to recvArray

            //if no bytes received then connection is closed.
            if( SocketInfo->RecvBytes == 0){
                FreeSocketInformation(i); //shuts down client socket if no data
                continue;
            }
        }
    } //end of read data from socket
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:39:58.277

```
//recieve data
SocketInfo->RecvBytes = sizeof(SocketInfo->DataBuf);
check = WSARecv(SocketInfo->Socket, &(SocketInfo->DataBuf), 1, &(SocketInfo->RecvBytes), &Flags, NULL, NULL); 
```

尝试声明一个 WSABUF 类型的新变量让我们说，

```
WSABUF tempDataBuf;
check = WSARecv(SocketInfo->Socket, &(tempDataBuf), 1, &(SocketInfo->RecvBytes), &Flags, NULL, NULL);
 SocketInfo->DataBuf = tempDataBuf; 
```

# objective-c - Objective-C：stringByReplacingOccurrencesOfStringwithString 和 stringByAppendingString 不起作用

> ID：13780198
> 
> 赞同：0
> 
> 时间：2012-12-08T17:55:56.067
> 
> 标签：objective-c, xcode

我有一个 NSString，我试图用它在 XCode 中的 Web 视图上加载网页。但是，我需要将 NSString 中的空格替换为下划线，并且我还需要将所有撇号替换为“%27”。然后，我需要附加到 fullURL NSString 的末尾。每当它执行进行 NSString 替换的代码部分时，什么都不会被替换。它与原始的 NSString 保持一致。当我尝试追加时，它不会追加。

**.h 文件：**

```
@interface WikipediaViewController : UIViewController

@property (weak, nonatomic) NSString* artistName;
@property (weak, nonatomic) IBOutlet UIWebView *webView;

@end 
```

**带有 NSString 替换并附加在其中的方法：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *fullURL = @"en.wikipedia.org/wiki/";

    [artistName stringByReplacingOccurrencesOfString:@" " withString:@"_"];
    [artistName stringByReplacingOccurrencesOfString:@"'" withString:@"%27"];
    [fullURL stringByAppendingString:artistName];

    NSURL *url = [NSURL URLWithString:fullURL];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];
} 
```

哦，还有，artistName 变量是从不同的类初始化的，所以假设它已经包含信息。

谁能告诉我为什么这不起作用？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:00:00.900

```
[artistName stringByReplacingOccurrencesOfString:@" " withString:@"_"]; 
```

实际上返回一个您需要捕获的字符串，所以这样做。

```
NSString *myNewString = [artistName stringByReplacingOccurrencesOfString:@"    " withString:@"_"]; 
```

字符串在许多语言中是不可变的，因此方法实际上不会修改底层字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:07:57.767

首先，您的属性是一个弱属性，这很可能是错误的。让它复制而不是弱。然后，不用写 artistName 来访问 iVar，而是使用 self.artistName 来访问 getter（这是最佳实践）。

其次 - 也是最重要的 - 通过 setter（即 self.artistName 再次）将 stringByReplacing... 的返回值分配给您的 iVar。现在你只需调用什么都不做的方法，因为它本身并没有改变字符串，它给出了一个带有所做更改的字符串的新实例。在您的情况下，从不使用返回值。

所以，使用

```
self.artistName = [self.artistName stringByReplacing.....]; 
```

和

```
fullURL = [fullURL stringByAppending....]; 
```

但由于 ArtistName 是一个弱属性，该字符串将消失，因此不会附加到您的 fileURL。

所以制作你的财产副本

```
@property (nonatomic, copy) NSString *artistName; 
```

（我想知道为什么您的代码首先可以工作，因为使用最新的 Xcode 和编译器版本，您的属性应该自动合成为具有下划线前缀的 iVar（即在您的情况下为 _artistName）。所以只写 ArtistName 不应该工作，除非你是这样合成的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T18:03:27.207

我已编辑您的代码以使其正常工作

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSString *fullURL = @"en.wikipedia.org/wiki/";

artistName = [artistName stringByReplacingOccurrencesOfString:@" " withString:@"_"];
artistName = [artistName stringByReplacingOccurrencesOfString:@"'" withString:@"%27"];
fullURL = [fullURL stringByAppendingString:artistName];

NSURL *url = [NSURL URLWithString:fullURL];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];
} 
```

请记住， stringByReplacingOccurrencesOfString 返回一个字符串，您必须将其保存在某处，在您的情况下用新字符串替换旧的 artistName 字符串是有意义的。

# java - 如何使用泛型参数扩展非静态类？

> ID：13780201
> 
> 赞同：4
> 
> 时间：2012-12-08T17:56:02.873
> 
> 标签：java, generics, intellij-idea, inner-classes

在我的应用程序中，这行代码引起了麻烦：

```
public class DisplayListing<R extends Listing<R, L>, L extends Listing<R, L>.Loader> extends SherlockListFragment { ... } 
```

使用 Eclipse 一切正常。但是在切换到 IntelliJ IDEA 之后会弹出错误：

> 范围内没有“com.app.Listing”类型的封闭实例。

此错误消息指的是部分`Listing<R, L>.Loader`（Loader 是一个非静态类）。

当我转到 IntelliJ 的首选项并将编译器从 Javac 更改为 Eclipse 时，我又回到了正题：应用程序将成功编译并再次运行。

但是指示错误的红色标记将保留（我想摆脱它）。所以我想知道我是否真的做错了什么，我的通用参数应该被修复，或者是否可以依赖 Eclipse 编译器并忽略错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:37:22.383

这是一个合法的错误，它可以在没有任何复杂泛型的情况下重现：

```
public class Foo<T extends Bar.Baz> {}

class Bar {
    class Baz {}
} 
```

似乎 IntelliJ 解析器（不是它的编译器，它是`javac`or `ecj`）误认为是`extends Bar.Baz`声明的一部分`Foo`，而不是`T`. 换句话说，当你这样做时，你（正确地）得到同样的错误：

```
public class Foo extends Bar.Baz {} 
```

这是[IDEA 问题 #94011](http://youtrack.jetbrains.com/issue/IDEA-94011)。您可以对该问题进行投票以给予更大的关注。

# python - 使用 time.delay 函数的多线程回声处理程序的 python 程序

> ID：13780203
> 
> 赞同：-1
> 
> 时间：2012-12-08T17:56:16.773
> 
> 标签：python

任何人都可以帮助解决以下问题的代码

```
Write a multi-threaded Echo Handler in Python. 
```

每个线程应该能够处理来自客户端的连接，而其他线程同时处理来自其他客户端的连接。要进行测试，请使用 time.sleep() 调用来确保并发性。使用 3 到 5 个线程。每个线程应该处理不同的端口号。

我尝试了以下代码：

```
 ` #!/usr/bin/python

   import socket

    import thread

    import time

     def Child_thread(clientsocket, (ip,port), id ):

    data = "anonymous data"
    print "Client with ID %d is now alive" %id
    while len(data) > 0:
    data = clientsocket.recv(2048)
    print "data received from client with ID %d" %id
    print "Data recieved is %s" %data
    clientsocket.send(data)
    print "Closing the connection.... of client with ID %d" %id
    print "and port number %d" %port
    clientsocket.close()
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    sock.bind( ("0.0.0.0", 8001) ) 
    sock.listen(2) 
    for i in range(5):
    print "Server is listening for clients"  
    (clientsocket, (ip,port) )  =  sock.accept()
    print "received connection from %s" %ip
    print "Received connection from port number %d" %port
    print "Starting Echo Server"
    thread.start_new_thread(Child_thread, (clientsocket, (ip,port), (i,)))
    time.sleep(10)
    print "Server is shutting down"
    sock.close()` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:24:16.073

[Twisted](http://twistedmatrix.com/trac/)是一个事件驱动的网络引擎，您可能想看看。看看能不能解决你的问题。

# c++ - C++ Vector Accessor Method

> ID：13780204
> 
> 赞同：0
> 
> 时间：2012-12-08T17:56:19.697
> 
> 标签：c++, vector

I'm playing around with Vectors, trying to better my knowledge of them. I created (i think) an empty vector: `vector<string> contents;` I created (i think) an accessor method: `vector<string> getContents();` The method looks like this:

```
 vector<string> Album::getContents()
    {
        cout << "\nAlbum Contents:\n\n" << endl;
        for(vector<string>::iterator iter = contents.begin(); 
                                     iter !=contents.end(); iter++)
           {
               cout << *iter << endl;
           }
    } 
```

Is this a suitable accessor method or am I over thinking something? Because my `getContents` doesn't return anything but prints it instead...

Assuming this is a valid method, what would be a better way to return the contents of a vector collection? Thanks.

Edit: I've just compiled it and my method needs to return something... So now im assuming my method is pointless and you should be able to return the vectors collection item by item similar to a Java array using a for-loop? I dunno.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:59:14.560

It is almost suitable. But your method needs to return something. It is defined to return a copy of a vector, so it could work by returning a copy of `contents`:

```
vector<string> Album::getContents()
{
    cout << "\nAlbum Contents:\n\n" << endl;
    for(vector<string>::iterator iter = contents.begin(); 
                                 iter !=contents.end(); iter++)
    {
           cout << *iter << endl;
    }
    return contents;  // return a copy of contents
} 
```

You need to decide whether you want the caller to get a copy of the vector, or whether you want to allow them to get a *reference* to it. If you wanted to do so, your method would have to be one or both of

```
vector<string>& getCOntents();    // caller can get a read-write reference to contents
const vector<string>& getContents() const; // caller can get a read only reference to contents. 
```

But beware, providing references to the internals of a class can be tricky to manage. At the very least, you must be sure that a `Album` object whose reference is taken by a caller lives at least as long as the reference.

# c - 用户输入 C 编程

> ID：13780209
> 
> 赞同：5
> 
> 时间：2012-12-08T17:56:32.750
> 
> 标签：c, user-input

我正在尝试运行需要用户输入的 C 程序。

该程序应该提示用户输入某些单词，我应该在数据结构中搜索这些单词。

所以命令行应该是这样的：

提示>

用户将输入多个单词进行搜索，我需要分别访问这些单词中的每一个。程序执行完这些单词后，程序需要重新启动并继续运行，直到用户在提示符中键入“退出”。

例如：prompt> .....（程序将根据输入的单词运行）

提示> .....

提示> .....

提示>退出

我不知道如何在 C 中提示用户输入，有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T18:01:37.720

1）vi hello.c：

```
#include <stdio.h>

#define MAX_LEN 80

int 
main (int argc, char *argv[])
{
  char a_word[MAX_LEN];

  printf ("Enter a word: ");
  scanf ("%s", a_word);
  printf ("You entered: %s\n", a_word);
  return 0;
} 
```

2) gcc -G -Wall -pedantic -o hello hello.c

3) ./你好

笔记：

根据您的平台和编译器，语法会有所不同。

这是另一个链接：

*   [http://www.codingunit.com/c-tutorial-first-c-program-hello-world](http://www.codingunit.com/c-tutorial-first-c-program-hello-world)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:00:23.100

这可能有助于 [http://en.wikibooks.org/wiki/C_Programming/Simple_input_and_output](http://en.wikibooks.org/wiki/C_Programming/Simple_input_and_output)

基本上是scanf

# linux - Linux 设备驱动开发：2012 年是什么样子？

> ID：13780213
> 
> 赞同：0
> 
> 时间：2012-12-08T17:57:15.887
> 
> 标签：linux, ubuntu, linux-device-driver

我正在运行 Ubuntu 12.04，我*假设*我在运行时看到的所有项目`ls /dev`实际上都是连接到（或能够连接到）我的机器的所有设备/硬件组件的设备驱动程序。它是否正确？如果没有，Linux 将所有设备驱动程序存储在哪里？

驱动程序是用什么写的，C？C++？汇编？设备驱动程序开发人员使用什么现代 IDE/技术堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:34:23.187

不，你不正确。`/dev`是一个充满特殊设备文件的文件夹，这些文件代表设备驱动程序。因此，当我做某事时，`/dev/sda`我不是在使用 SATA 驱动程序的文件，而是在碰巧加载任何 SATA 驱动程序的接口。设备文件是驱动程序将其设备暴露给用户空间的方式（以及调用驱动程序的系统调用）。

通常驱动程序存储在`/lib/modules`.

驱动程序是用 C 编写的，除非您想将工作量增加三倍并用汇编语言编写。由于技术和政治原因，整个 Linux 内核中没有一行 C++（Linus Torvalds 讨厌看到它）。

IDE？我怀疑任何内核开发人员都使用 IDE。他们中的大多数只使用 Vim 或 EMACS。然后 git 提交到内核源代码，以及 GDB/KDB 进行调试。以及需要任何其他命令行工具（例如。`diff`）。

# parsing - 为什么编译器不能有“移位/移位”冲突？

> ID：13780216
> 
> 赞同：12
> 
> 时间：2012-12-08T17:57:45.110
> 
> 标签：parsing, compiler-construction, compilation, lr

我目前正在研究编译器，据我所知，在 LR(0) 中存在“移位/减少”或“减少/减少”冲突的情况，但不可能发生“移位/移位”冲突！为什么我们不能有“班次/班次”冲突？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-08T18:52:30.187

当解析器无法判断是移位（将下一个输入令牌推入解析堆栈顶部）还是减少（从解析堆栈中弹出一系列终端和非终端）时，就会发生移位/归约冲突。归约/归约冲突是解析器知道归约，但不知道要执行哪个归约。

如果您要发生移位/移位冲突，解析器会知道它需要将下一个令牌推入其解析堆栈，但不知道如何去做。由于只有一种方法可以将令牌推入解析堆栈，因此通常不会出现这种形式的任何冲突。

也就是说，如果您有一个奇怪的设置，其中有两个或多个转换从给定的解析状态引出并标有相同的终端符号，那么理论上可能存在移位/移位冲突。在这种情况下，冲突将是是否转移并进入一个状态或转移并进入另一个状态。如果您尝试将自动机压缩为更少的状态并且操作不正确，或者您尝试构建非确定性解析自动机，则可能会发生这种情况。在实践中，这永远不会发生。

希望这可以帮助！

# c - 检查用户输入的条件

> ID：13780218
> 
> 赞同：0
> 
> 时间：2012-12-08T17:57:50.703
> 
> 标签：c

我需要一个 do-while 循环的条件，这意味着循环重复（要求用户再次输入数据），直到它是一个整数并且介于 1 和 25 之间。

```
while (!isdigit(data) || data < 1 || data > 25); 
```

这只是抛出一个运行时错误，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:03:30.620

试试这个：

```
do {

   /* Read from input and store it in data */

} while( !isdigit(data) || !( data > 1 && data < 25 ) ); 
```

# gcc - 在 Linux 上将 libquadmath 与 c++ 链接

> ID：13780219
> 
> 赞同：6
> 
> 时间：2012-12-08T17:57:54.293
> 
> 标签：gcc, floating-point

我有一个示例代码：

```
#include <quadmath.h>

int main()
{
    __float128 foo=123;
    cosq(foo);
    return 0;
} 
```

我尝试使用以下命令对其进行编译：

```
g++ f128.cpp -lquadmath
g++ f128.cpp /usr/lib64/gcc/x86_64-suse-linux/4.6/libquadmath.a
g++ f128.cpp /usr/lib64/gcc/x86_64-suse-linux/4.6/libquadmath.a /usr/lib64/libquadmath.so.0
g++ f128.cpp /usr/lib64/gcc/x86_64-suse-linux/4.6/libquadmath.a /usr/lib64/libquadmath.so.0 /usr/lib64/gcc/x86_64-suse-linux/4.6/libquadmath.a 
```

所有这些命令都会产生一个相同的错误：

```
f128.cpp:(.text+0x1b): undefined reference to `cosq(__float128)' 
```

我也尝试声明`cosq`如下，不包括`quadmath.h`. 这种风格的声明在 C++ 接口中用于其他程序中的 fortran 子例程，并且它们运行良好。

```
extern "C" __float128 cosq_(__float128 *op);
extern "C" __float128 cosq_(__float128 op);
extern "C" __float128 cosq(__float128 *op);
...and so on... 
```

结果是一样的。

然后我尝试`cosq`在 Fortran 中使用：

```
PROGRAM test

        REAL*16 foo
        REAL*16 res

        foo=1;
        res=cos(foo)
        PRINT *,res
END 
```

这个程序编译和执行得很好（打印出很多数字的答案），所以`cosq`可以在其中工作。该程序是在没有选项的情况下编译的：`gfortran f128.f90`.

操作系统为 OpenSUSE 12.1，gcc 版本为 4.6.2。提到的 *.h、*.a 和 *.so 文件由`gcc46-fortran`和`libquadmath46`包提供。

`cosq`在 C++ 中使用和其他 quadmath 函数的正确方法是什么？我不想为他们编写 Fortran 包装器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T20:38:58.213

首先，根据 Nikos C. 的建议，我在另一台机器上启动 OpenSUSE 12.2 liveCD（它有 gcc 4.7.1），但得到了同样的错误。

然后我将这个问题发布到[OpenSUSE 论坛](https://forums.opensuse.org/english/other-forums/development/programming-scripting/481261-linking-quadmath-c.html)。

Martin_helm 的回答表明问题与发行版无关，解决方案很简单：

```
extern "C" {
#include <quadmath.h>
} 
```

这在我所有的机器上都可以正常工作。程序可以用`g++ prog.cpp -lquadmath`.

# mysql - MySQL Select 语法给我两行每个 id 输出有什么问题？

> ID：13780222
> 
> 赞同：0
> 
> 时间：2012-12-08T17:58:03.187
> 
> 标签：mysql, select, phpmyadmin

**表结构：** ![在此处输入图像描述](../Images/dd927f98d856b2f7cb1aa4d5b9c52451.png)

```
SELECT p.id id, p.type
    TYPE , v.provider provider, v.video_id video_id, NULL content, NULL url, NULL posted_by
    FROM post p
    INNER JOIN p_video v ON p.id = v.id
    AND p.type =  'video'
    UNION 
    SELECT p.id, p.type, NULL , NULL , t.content, NULL , NULL 
    FROM post p
    INNER JOIN p_text t ON p.id = t.id
    AND p.type =  'text'
    UNION 
    SELECT p.id, p.type, NULL , NULL , NULL , i.url, NULL 
    FROM post p
    INNER JOIN p_image i ON p.id = i.id
    AND p.type =  'image'
    UNION 
    SELECT p.id, p.type, NULL , NULL , NULL , l.url, NULL 
    FROM post p
    INNER JOIN p_link l ON p.id = l.id
    AND p.type =  'link'
    UNION 
    SELECT p.id, NULL , NULL , NULL , NULL , NULL , u.name
    FROM post p
    LEFT JOIN user u ON p.user_id = u.id
    ORDER BY id DESC 
    LIMIT 0 , 30 
```

![我的 SQL 输出](../Images/df1fefdb9fa609a1db22cabaaf7337c5.png)

我的语法错误是什么？它只做 2 行.. 但我希望所有输出都在单独的 1 行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:11:19.143

尝试这个

```
SELECT p.id id, p.type
TYPE , v.provider provider, v.video_id video_id, NULL content, NULL url, u.name posted_by
FROM post p
LEFT JOIN user u ON p.user_id = u.id
INNER JOIN p_video v ON p.id = v.id
AND p.type =  'video'
UNION 
SELECT p.id, p.type, NULL , NULL , t.content, NULL , u.name
FROM post p
LEFT JOIN user u ON p.user_id = u.id
INNER JOIN p_text t ON p.id = t.id
AND p.type =  'text'
UNION 
SELECT p.id, p.type, NULL , NULL , NULL , i.url, u.name
FROM post p
LEFT JOIN user u ON p.user_id = u.id
INNER JOIN p_image i ON p.id = i.id
AND p.type =  'image'
UNION 
SELECT p.id, p.type, NULL , NULL , NULL , l.url, u.name
FROM post p
LEFT JOIN user u ON p.user_id = u.id
INNER JOIN p_link l ON p.id = l.id
AND p.type =  'link'
ORDER BY id DESC 
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:12:24.057

这是您的最后一个联合选择，它添加了第二行。如果您想在每一行中添加左连接，则将左连接添加到每个联合选择部分并省略最后一个联合选择

```
SELECT p.id id, p.type
TYPE , v.provider provider, v.video_id video_id, NULL content, NULL url, u.name posted_by
FROM post p
INNER JOIN p_video v ON p.id = v.id
AND p.type =  'video'
LEFT JOIN user u ON p.user_id = u.id
UNION 
SELECT ...
...
ORDER BY id DESC 
LIMIT 0 , 30 
```

# php - 小的php代码块不将值存储到sql数据库

> ID：13780223
> 
> 赞同：0
> 
> 时间：2012-12-08T17:58:18.320
> 
> 标签：php, sql

我有一个小程序，其中有一个带有汽车名称的下拉列表，具体取决于选择的下拉项目我想将其值存储在数据库中。我想我知道如何做到这一点，但我的代码没有将值存储到我的数据库中。

我的数据库有三个字段：'id'（type int（11）），'car_val'（type int（11）），'name'（type text）

```
<?php

//////connecting to our sql server
$db_connect=mysql_connect("xxxxx", "xxxxxx", "xxxxxx")     or die("not logged in");
//////now selecting our database
$db_select=mysql_select_db("xxxxxx") or die(mysql_error());
////this query is used the first time the page loads
$query = mysql_query("SELECT * FROM car "); 

echo '<form action="drop_down_car_test.php?" method="GET">';
echo '<table border = \"1\">';
echo '<tr><td>id</td><td>car</td><td>name</td>';

while($row=mysql_fetch_array($query)){
$currentID=$row['id'];

echo "<tr><td>";
echo $row['id'];

echo "</td><td>";
echo "<select name='carDropDown".$row['id']."' >;
<option value=\"1\">ford</option>;
<option value=\"2\">toyota</option>;
<option value=\"3\">gmc</option>;
</select>";

$carVal=$_GET['carDropDown'.$row['id']];
echo $carVal;

mysql_query("INSERT INTO car (car_val) VALUE ($carVal) WHERE id=$currentID ");

echo "</td><td>";
echo $row['name'];
echo "</td><td>";
}////end while
echo"<table>";

echo '<td bgcolor=#7FFF00><input type="submit" value="Update"></td>';
echo "</form>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:03:16.203

您在插入时使用了 where 子句，这是不正确的。

您应该为 id 使用自动增量字段，在这种情况下您不提供它，或者您应该自己提供它。无论哪种方式，插入语句总是如下所示

`insert into tablename (column1name, col2name) values (value1, value2)`等等

除了您以正确的顺序为所有列提供数据的情况外，在这种情况下您可以缩短它，但我总是建议使用上述语法。

如果您不使用自动增量字段，那么您可以提供 id，但要使用我之前的句子中提到的格式。

# actionscript-3 - 如何访问 AIR 中动态创建的元素的值

> ID：13780225
> 
> 赞同：1
> 
> 时间：2012-12-08T17:58:33.200
> 
> 标签：actionscript-3, apache-flex, air

我必须动态添加多个 HBoxw，其中包含以下一组组件...

我正在尝试访问每个动态创建的元素的值？怎么办？

```
 var myHBox:HBox=new HBox();             

            var txt1:ComboBox=new ComboBox();
            var txt2:TextInput=new TextInput();
            var txt3:TextInput=new TextInput();
            var txt4:TextInput=new TextInput();
            var txt5:TextInput=new TextInput();
            var txt6:TextInput=new TextInput(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:42:00.603

正常的 RTTI 顺序是 parentName.parentName.(等等等等).objectName 但如果您已经拥有对象名称，则不需要复杂的 RTTI 访问。

如果这只是一个示例，我建议您使用一个负责存储对象的对象，然后再轻松访问它们。- 像 HashMap 或 Dictionary 这样的对象，或者甚至像 Vector 数组这样的不那么复杂的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:23:20.073

请参考以下链接，它将对您有所帮助..

[Adobe 容器简介](http://livedocs.adobe.com/flex/3/html/help.html?content=containers_intro_6.html)

# c# - 如果可用，请使用异步方法

> ID：13780226
> 
> 赞同：0
> 
> 时间：2012-12-08T17:58:38.070
> 
> 标签：c#, file-io, asynchronous, windows-8, windows-runtime

是否可以根据用户是否运行 Windows 8 在 System.IO 和 StorageFile 方法之间切换，而无需创建两个单独的项目？我知道我可以在 Windows 8 中使用 System.IO，但如果可能的话，我想利用内置的异步方法（即用户在 Win8 上）。

我目前没有要测试的 Windows 7 机器，但我担心程序启动时可能会抛出缺少库的错误。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:03:03.867

[StorageFile](http://msdn.microsoft.com/sl-SI/library/windows/apps/windows.storage.storagefile.aspx)类不是 .NET 4.5 的一部分，它是 Windows 运行时的一部分。这样的类可以很容易地被它们的根命名空间识别`Windows`。Windows 运行时 API 仅在 Windows 8 上可用，主要设计用于`Windows Store apps`. 虽然我自己没有尝试过，但它们[也可以在桌面应用程序](http://www.hanselman.com/blog/HowToCallWinRTAPIsInWindows8FromCDesktopApplicationsWinRTDiagram.aspx)中使用。我仍然不确定文件 IO 类的效果如何，因为 Windows 商店应用程序在沙盒环境中运行，并且基于其清单中声明的​​功能只能有限地访问文件系统。

对于桌面应用程序中的文件 IO，我会坚持使用`System.IO`命名空间中的 .NET 类。在 .NET 4.5 中也有几种可用的异步方法，主要在[Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)、[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)和[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)类中，可用于通过 async/await 范例读取和写入文件。它们不仅仅绑定到 Windows 8，但它们确实需要安装 .NET 4.5，[不包括 Windows XP](http://msdn.microsoft.com/en-us/library/8z6watww.aspx)。

不幸的是`StorageFile.GetBasicPropertiesAsync`，据我所知，没有与 .NET 4.5 等效的异步方法。如果您确实还需要使这些调用异步，则始终可以将同步调用包装到您自己的异步方法中，您可以从 UI 线程调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:05:40.933

异步 StorageFile 方法是 .net 4.5 框架的一部分。您的应用应将框架部署为安装的依赖项 - 请参阅[面向开发人员的 .NET Framework 部署指南](http://msdn.microsoft.com/en-us/library/ee942965.aspx ".NET Framework 开发人员部署指南")

# c# - 如何像 c# 中的 html 解析器一样解析 asp.net mvc razor view (cshtml)

> ID：13780232
> 
> 赞同：2
> 
> 时间：2012-12-08T18:00:12.553
> 
> 标签：c#, asp.net-mvc-3, razor, html-parsing, html-agility-pack

我想在 c# 中解析剃刀视图文件。我还使用 Html Agility Pack 来解析 razor view 文件，但它未能保存正确的文件内容。

基本上我想通过服务器端使用 c# 更改一些 html 元素内部 html

```
<div id="content1">
<p>this contents i want to change </p>
<span>contes</span>
</div> 
```

我想通过 c# 像这样更改 content1 内部 html

```
<div id="content1">
    <span>@Function.gethtml()</span>
    </div> 
```

我已经使用 html 敏捷包来更改内部 html 内容，但它没有解析 razor 语法函数，例如

@Url.Content("abc.css") 等函数

**了解更多信息**

我在 asp.net mvc3 中为鞋类和服装店创建了一个项目。现在我想动态更改 css 和 html。我想从元素 id 为“ **content1 ”的任何****html 模板文件**中提取内部 html并放置这个内部 html在元素 id 为“ **content1 ”的****cshtml 文件中**

 ********只是我想要可以解析 html 和 razor 语法的 razor 文件解析器，如 html 解析器**

有没有办法解析剃刀视图文件和它的html元素。任何其他解决方案

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-09T04:30:43.200

您想使用服务器端内容访问/修改 razor 内容。

但是 MVC 是一种将网站/应用程序构建到 Web 表单的不同方式。

现在有服务器端控件或 web 控件。您可以使用 JQuery 来做同样的事情。******

# javascript - 如何/在哪里保存 javascript 中的复式表？

> ID：13780237
> 
> 赞同：0
> 
> 时间：2012-12-08T18:00:43.757
> 
> 标签：javascript, html, canvas, matrix, html5-canvas

我正在构建一个`javascript - html5` `canvas`横向卷轴游戏。地形基本上包含在一个像这样的复式表上：

```
 -1   2   10  
-----------------
0     b    a    c
-----------------
2     a    b    a
-----------------
5     a    a    b
----------------- 
```

（列和行代表地图上的位置，`a`,`b`并`c`说明该空间的内容）。

我不知道如何保存这个表，以便以后可以快速检索它的任何范围。我也想不出任何可以帮助我搜索解决方案的术语，因此任何信息和标记问题的帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:16:13.187

使用 JSON 保存此类数据：

```
var map = {
    '0': {
        '-1': 'b',
        '2': 'a',
        '10': 'c'
    },
    '2': {
        '-1': 'a',
        '2': 'b',
        '10': 'a'
    },
    '5': {
        '-1': 'a',
        '2': 'a',
        '10': 'b'
    }
}; 
```

并像这样检索您的数据：`map['2']['-1']`.

你也可以这样改变它`map['2']['-1'] = 'c'`。

如果您愿意，可以编写一些更容易操作此对象的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:20:11.370

试试 JSON：JavaScript 对象表示法。幸运的是，您也可以使用它来标记数组。

我不知道您是否要存储“保存”之类的数据 - 这样如果用户离开页面，他可以从他离开的地方继续 - 或者您是否要将数据存储为地图的内部表示。

“保存”：
您可以为此使用 sessionStorage，但我相信这是 HTML5 功能（不确定）。无论如何，这里是它的 caniuse 页面：[http](http://caniuse.com/#search=sessionStorage) ://caniuse.com/#search=sessionStorage 。
例子：

```
window.sessionStorage.setItem("map", "{'-1': {0:b, 2:a, 5:a}, '2': {0:a, 2:b, 5:a}, '10':{0:c, 2:a, 5:b}}"); 
```

然后稍后使用以下命令检索它：

```
var map = window.sessionStorage.getItem("map");
map = JSON.parse(map);
map[-1][0]; // Should be 'b' 
```

缺点是您只能将字符串存储在 sessionStorage 中，但看看我是如何使用`JSON.parse()`. 如果要对对象进行字符串化，可以使用`JSON.stringify()`.

内部表示：

yabol 在这方面打败了我，但我打算提出同样的建议：

```
var map = {'-1': {0:b, 2:a, 5:a}, '2': {0:a, 2:b, 5:a}, '10':{0:c, 2:a, 5:b}}; 
```

这次不是字符串。它会被 JS 编译器解析为一个对象（也许你已经知道了）。

# forms - symfony2 形成自定义字段

> ID：13780238
> 
> 赞同：0
> 
> 时间：2012-12-08T18:00:47.280
> 
> 标签：forms, symfony, doctrine

所以，我有一个用于编辑博客文章的表格。

除其他外，我需要能够编辑文章**标签**。它们作为 ArrayCollection 存储在我的 Blog 实体中。（多对多级联：坚持，删除）

现在，Simfony 使用标签处理这种类型的数据，`<select>`它可以很好地选择，但我也希望能够删除和添加标签。

这也是可能的，并且在这篇食谱文章中得到了很好的解释：[如何嵌入表单集合](http://symfony.com/doc/current/cookbook/form/form_collections.html)

但是，本教程的结果仍然不是很优雅，我希望有类似于 StackOverflow 标签框的输入框。

由于在免费许可下有许多已经完成的解决方案，我决定只使用其中一个，例如[jQuery Tags Input](http://xoxco.com/projects/code/tagsinput/)。

基本上，我需要做的就是运行 $('#tags_input_box').tagsInput() 并将其转换为类似 SO 的标签框。

**现在，我正在寻找最简单的方法来将一些自定义输入绑定到我的表单，并将其与其他“真正”字段一起提交回 Symfony2 可以理解的形状**。

任何人都可以向我推荐一些文件或给我一些开始信息，我应该从哪里开始我对这个问题的研究？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:00:54.633

It appears that plugin sends it in as a comma-separated string value.

Probably the easiest way would be to simply treat it as a single input in your form, and then split it up when you process the form.

```
// Entity to hold it in string form.
namespace Some\Entity;

class TagStringEntity {
    protected $tagString;

    // getTagString and setTagString
}

// Custom form type.
// Use this AbstractType in your form.
namespace Some\Form;

Symfony\Component\Form\AbstractType;

class TagType extends AbstractType {
     public buildForm(FormBuilder $builder, array $options) {
         $builder->add('tagString'); // will default to text field.
     }
}

// In Controller
public function displayFormAction() {
    // Join the tags into a single string.
    $tagString = implode(',', $article->getTags()); // assuming it returns an array of strings.

    $tagStringType = new TagStringType();
    $tagStringType->setTagString($tagString);

    // build form, etc...
}

public function checkFormAction() {
    // ...
    if ($form->isValid()) {
        // Get the tag string, split it, and manually create your separated tag objects to store.
    }
} 
```

That's probably the cleanest and simplest way to do it using that jQuery plugin. Takes a bit of working around since you are turning multiple items into many and vice versa, but not too bad.

# android - 如何将 POST 方法重写为 GET 方法？

> ID：13780242
> 
> 赞同：0
> 
> 时间：2012-12-08T18:01:17.113
> 
> 标签：android, post, get, httpclient

我想知道 POST 方法而不是 GET 方法。发送值怎么写。我在 GET 示例中找不到发送要放置的值的位置

朋友可以示范给我看看吗？

我写 POST 方法

POST 方法示例：

```
private POST()

    {
    HttpPost httpRequest2 = new HttpPost("ip");

    List<NameValuePair> params2 = new ArrayList<NameValuePair>();
    params2.add(new BasicNameValuePair("Q1","b"));
    //Ready to send the value of the
    try
    {

    httpRequest2.setEntity(new UrlEncodedFormEntity(params2, HTTP.UTF_8));

    httpResponse2 = new DefaultHttpClient()
    .execute(httpRequest2);

    if (httpResponse2.getStatusLine().getStatusCode() == 200)
    {

    String strResult2 = EntityUtils.toString(httpResponse2.getEntity());

    return strResult2;
    }
    } catch (Exception e)
    {
    e.printStackTrace();
    }

    return null;
    } 
```

网络上找到的GET教学方法。

GET 方法示例：

```
public StringGet() throws Exception {  
            String strResult = "";  

            String httpUrl = "ip";  
            HttpGet httpRequest = new HttpGet(httpUrl);  

            HttpClient httpclient = new DefaultHttpClient();  

            HttpResponse httpResponse = httpclient.execute(httpRequest);  

            if (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {  

                strResult = EntityUtils.toString(httpResponse.getEntity());  

                tv.setText(strResult);  
            } else {  
                tv.setText("fail");  
            }  
            return strResult;  
        }  

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:24:24.417

这是一个通过 HttpGet 方法发送数据的示例代码，

```
String webserviceurl                    = "your_webservice_URL";
InputStream is;

List<NameValuePair> lstAddToken         = new ArrayList<NameValuePair>();
lstAddToken.add(new BasicNameValuePair("parameter1",value1));
lstAddToken.add(new BasicNameValuePair("parameter2",value2));

//add parameters to the URL
webserviceurl                           += "?";
String paramString                      = URLEncodedUtils.format(lstAddToken, "utf-8");
webserviceurl                           += paramString;

//Call the webservice using HttpGet with parameters and get the response from webservice 
try 
{
    HttpGet loginHttpget     = new HttpGet(webserviceurl);
    HttpClient objHttpClient = new DefaultHttpClient();
    HttpResponse response    = objHttpClient.execute(loginHttpget);
    HttpEntity entity    = response.getEntity();
    is           = entity.getContent();
    String result= convertStreamToString(is);
} 
catch (Throwable t) 
{
     Log.e("log_tag", "Error converting result "+t.toString());
} 
```

# c - 为什么 GCC 编译这个错误的代码？

> ID：13780247
> 
> 赞同：1
> 
> 时间：2012-12-08T18:01:50.743
> 
> 标签：c

我试图编译类似：

```
struct A
{   int a;
    struct B
    {    int c;
    };
}; 
```

现在，当我编译此代码时，编译器会给我一条警告消息：

```
declaration does not declare anything [enabled by default] 
```

我知道我没有定义任何`struct B`. 这将意味着我将无法访问 variable `c`。仍然编译器编译此代码并发出警告。重点是什么？为什么编译器不给出编译错误呢？

**添加信息：**
的大小`struct A`等于`int`我机器上的大小！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T18:10:17.620

因为你可以这样做：

```
struct A
{   int a;
    struct B
    {    int c;
    };
};

int main()
{
    struct A a = {1};
    struct B b = {2};

    return a.a + b.c;
} 
```

笔记：

*   声明后需要一个分号`B`，而您的代码缺少该分号
*   这不是特别*有用*，但我想它可能有一些记录目的（即，建议类型之间的关系或分组）
*   在 C++ 中，第二个变量将具有 type `A::B`，但 C 没有相同的作用域规则（实际上所有结构都属于全局结构命名空间）

* * *

至于允许它的动机......

```
struct Outer {
    struct {
        int b;
    } anon;
    /* this ^ anonymous struct can only be declared inside Outer,
       because there's no type name to declare anon with */

    struct Inner {
        int c;
    } named;
    /* this ^ struct could be declared outside, but why force it to be
       different than the anonymous one? */

    struct Related {
        double d;
    };
    /* oh no we have no member declared immediately ... should we force this
       declaration to be outside Outer now? */

    struct Inner * (*function_pointer)(struct Related *);
    /* no member but we are using it, now can it come back inside? */

    struct Related excuse;
    /* how about now? */
}; 
```

一旦您允许这样的嵌套类型声明，我怀疑是否有任何特殊动机要求立即存在该类型的成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T18:10:11.100

这样做是合法的（但非常糟糕的风格）：

```
struct A {   
    int a;
    struct B {    
        int c;
    };
};
struct B B_instance;
struct A A_instance; 
```

而且编译器不知道后面使用结构类型的变量，所以它真的不应该出错。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T19:05:23.267

通常，警告意味着代码可能没有按照您的意图执行，但在该语言中是合法的。编译器在说：“这可能不是你真正想做的，但我必须允许你这样做，因为语言说它是允许的。” 由于 C 标准允许，编译器**无法**为您提供此代码的错误，因此必须允许（除非您专门针对此类事情要求错误，例如使用 GCC 的 -Werror 选项将警告转换为错误）。

C 标准并不试图定义在程序中有意义的所有内容。例如，这些东西在 C 中是合法的：

```
3;
if (x) then foo(); else foo();
x = 4*0; 
```

第一条语句没有副作用，也没有使用它的返回值。但它在 C 中是合法的，因为语句可能只是一个表达式。第二个语句只是调用`foo()`，所以`if`没有意义。在第三个语句中，乘以四是没有意义的。

编写一个禁止所有没有意义的事情的 C 标准将是极其困难的。这当然不值得付出努力。所以这是你回答的一部分：当编写 C 标准的委员会构建语言时，他们是否想花大量时间重写技术规范以排除没有意义的东西？有时是的，如果避免某些可能导致严重错误的事情似乎很有价值。但大多数时候，这不值得他们花时间，而且会使规范不必要地复杂化。

但是，编译器可以识别其中一些内容并警告您。这有助于发现许多印刷错误或其他错误。

另一方面，有时这些结构是由不寻常的情况引起的。例如，一个程序可能有预处理器语句，这些语句`struct A`在为不同的目标或不同的特性构建时以不同的方式定义。在其中一些目标中，可能不需要`struct B`成员 in `struct A`，因此没有声明它，但是`struct B`（类型，而不是对象）的声明仍然存在，只是因为这样更容易编写预处理器语句。

所以编译器需要允许这些事情，以避免干扰程序员编写各种各样的程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T18:06:41.120

实际上，您在`struct B`这里声明，但您没有声明该类型的变量。

这是一个警告，但您应该修复它。也许你的意思是：

```
struct A
{   int a;
    struct B
    {
        int c;
    } c;
}; 
```

# sql - Access 中的 SQL 查询

> ID：13780249
> 
> 赞同：0
> 
> 时间：2012-12-08T18:01:53.663
> 
> 标签：sql

基本上，我一直在尝试让这个查询在 Access 中工作一段时间，这真的让我很沮丧，所以我没有玩弄标准，而是决定只在 SQL 中做，但我不太清楚如何做到这一点。

我需要做的是创建一个查询，显示哪些成员没有归还他们当前借出的项目。如果可能的话，我想包括一个计算字段来说明日期是到期日期以及晚了多少天。

我使用的字段如下；

### 表 = 贷款

```
Toy Name
Hire Date
Duration (in days)
Returned Date (if it hasn't been returned, the cell is blank) 
```

### 表 = 玩具

```
Purchase Price
Hire Price 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:19:44.023

你写了：

```
a query that shows which members haven't returned an item 
```

您的表中没有成员。其次，桌上玩具与玩具名称之类的玩具没有任何关系。请提供表格的更多细节。还有一个问题，空白是什么意思？它是**Null**还是空白字符串？

# c - 用opencv播放视频

> ID：13780251
> 
> 赞同：1
> 
> 时间：2012-12-08T18:02:34.520
> 
> 标签：c, opencv

我在这里有这段代码来播放视频。当我编译它时，它做得很好，但是当我运行时，它什么也没做。可能是什么问题呢？是代码吗？还是我的视频依赖项没有正确安装？

```
#include <highgui.h>

int main(int argc, char** argv) {
     /* Create a window */
     cvNamedWindow("Example2", CV_WINDOW_AUTOSIZE);
     /* capture frame from video file */
     CvCapture* capture = cvCreateFileCapture( argv[1]);
     /* Create IplImage to point to each frame */
     IplImage* frame;
     /* Loop until frame ended or ESC is pressed */
     while(1)
     {
        /* grab frame image, and retrieve */
        frame = cvQueryFrame(capture);
        /* exit loop if fram is null / movie end */
        if(!frame) break;
        /* display frame into window */
        cvShowImage("Example2", frame);
        /* if ESC is pressed then exit loop */
        char c = cvWaitKey(33);
        if(c==27) break;
     }

     /* destroy pointer to video */
     cvReleaseCapture(&capture);
     /* delete window */
     cvDestroyWindow("Example2");

     return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:51:24.410

不要直接通过命令行给出文件名，而是尝试在参数中传递文件名，看看视频是否显示，在参数中提供文件的完整路径。如果没有，那么我们将尝试找出操作系统或视频依赖项是否有问题。

目前在我看来，好像您没有为文件提供正确的路径。

您使用的视频格式是什么？

还要检查视频文件是否正在加载。

`if(!capture)`

`{`

`//Just to check if the video gets loaded or not`

`printf("Video Can't be loaded");` `getch();`

`System.exit(0);`

`}`

希望有帮助。

# actionscript-3 - 什么是围绕一个点定位 8 个圆圈的优雅方式

> ID：13780252
> 
> 赞同：3
> 
> 时间：2012-12-08T18:02:37.687
> 
> 标签：actionscript-3, actionscript

```
var circles:Array = new Array();

for(var i:int = 0; i < 8; i++)
{

    var ball:Ball = new Ball();
        ball.x = ???
        ball.y = ???
        circles.push(ball);
} 
```

将球定位在某个点周围的最佳方法是什么，可以说彼此相距 5-10，有什么公式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T18:06:34.700

```
for(var i:int = 0; i < 8; i++)
{
    var ball:Ball = new Ball();

    // Point has a useful static function for this, it takes two parameters
    // First, length, in other words how far from the center we want to be
    // Second, it wants the angle in radians, a complete circle is 2 * Math.PI
    // So, we're multiplying that with (i / 8) to place them equally far apart
    var pos:Point = Point.polar(50, (i / 8) * Math.PI * 2);

    // Finally, set the position of the ball
    ball.x = pos.x;
    ball.y = pos.y;

    circles.push(ball);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:15:40.040

我不知道 actionscript3，所以这个确切的代码不起作用，但它应该给你一个基本的想法

```
for(int c = 0; c < 8; c++)
{
   Ball ball;
   ball.x = point.x;
   ball.y = point.y;
   ball.x += sin(toRadians((c/8) * 360));
   ball.y += cos(toRadians((c/8) * 360));
   circles.add(ball);
} 
```

如果您不知道“sin”和“cos”的作用，或者“toRadians”的含义，只需谷歌一下：“Sine Cosine Trigonometry”。你会发现很多教程。

在这里，我找到了这个。它将教你什么是“sin”、“cos”和“radians”。 [http://www.khanacademy.org/math/trigonometry](http://www.khanacademy.org/math/trigonometry)

显然你可以坚持grapefrukt的回答，它有效，但如果你想知道“Point.polar”的幕后真正发生了什么，请查看这些视频。

# c# - 在 DataGrid 中显示二维数组

> ID：13780266
> 
> 赞同：0
> 
> 时间：2012-12-08T18:04:18.653
> 
> 标签：c#, wpf, datagrid, multidimensional-array

我创建了一个 2D 数组来保存这个问题[“从远程 XML 文件中检索数据并添加到数据网格”中引用的数据](https://stackoverflow.com/questions/13757760/retrieving-data-from-a-remote-xml-file-and-add-to-datagrid)

**我的数组：**

```
string[,] myData = new string[i,6]; 
```

字符串填充得很好，我可以从中检索数据并能够使用以下方法进行确认：

```
MessageBox.Show(myData[0, 0], "Title");
MessageBox.Show(myData[0, 2], "Description"); 
```

现在，我有一个`DataGrid`名字`projects`

```
<Grid>
    <DataGrid Name="projects" AutoGenerateColumns="False" Height="264" HorizontalAlignment="Left" Margin="12,12,0,0" VerticalAlignment="Top" Width="479" />
</Grid> 
```

如何将二维数组绑定到 DataGrid？

# symfony - symfony2 学说 FormType - 用来自另一个实体的值填充选择字段

> ID：13780268
> 
> 赞同：1
> 
> 时间：2012-12-08T18:04:47.577
> 
> 标签：symfony, doctrine, associations, entity

我有一个包含三个实体的系统：用户、作者和主题。主题 {id}<---> 作者{topic_id,user_id} <---> 用户 {id,name}

实体/Author.php

```
class Author
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\OneToOne(targetEntity="User", inversedBy="Authors")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    protected $user_id;

    /**
     * @ORM\ManyToOne(targetEntity="Topic")
     * @ORM\JoinColumn(name="topic_id", referencedColumnName="id")
     */
    protected $topic_id; 
```

实体/主题.php

```
/**
 * @ORM\Entity(repositoryClass="my\myBundle\Repository\TopicRepository")
 * @ORM\Table(name="topic")
 * @ORM\HasLifecycleCallbacks()
 */
class Topic
{
    public function __construct()
    {
        $this->author = new ArrayCollection();
        $this->setStartDate(new \DateTime());
    }
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;
     /**
     * @ORM\Column(type="integer")
     */
    protected $state = '0';
     /**
     * @ORM\Column(type="string", length=250)
     */
    protected $subject;
     /**
     * @ORM\Column(type="string", length=300, nullable=true)
     */
    protected $comment;
    /**
    * @ORM\OneToMany(targetEntity="Author", mappedBy="topic_id")
    */
    protected $authors; 
```

实体/用户.php

```
/**
 * @ORM\Entity(repositoryClass="my\myBundle\Repository\UserRepository")
 * @ORM\Table(name="users")
 */
class User
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     * @ORM\OneToOne(targetEntity="Author", inversedBy="user_id")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    protected $id; 
```

如您所见，有这样的关联路径

主题 <---> 作者 <---> 用户

现在我有一个表格来添加新主题。我想在那里显示一个选择字段，其中将填充 USER 表中的名称。我这样做是这样的：

```
class TopicType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
    $builder->add('subject')
            ->add('authors', 'entity', array(
                'class' => 'MyBundle:User',
                'query_builder' => function($repository) { return $repository->createQueryBuilder('p'); },
                'property' => 'name',
                'multiple' => true,
                ));
    } 
```

这确实会使用正确的值填充该字段。但是，当我提交表单时出现错误：

> 可捕获的致命错误：传递给 ...\Entity\Topic::setAuthors() 的参数 1 必须是 ...\Entity\User 的实例，给定的 Doctrine\Common\Collections\ArrayCollection 的实例，在 /var/www 中调用/Symfony/vendor/symfony/symfony/src/Symfony/Component/Form/Util/PropertyPath.php 在第 538 行并在 .../Entity/Topic.php 第 192 行定义

而且我确实理解我传递了不正确的论点，但我不知道如何解决这个问题。我需要从实体 User 中获取用户名的原则，将其放入字段中，将 id 与名称相关联，一旦我提交表单，它必须引用方法 Topic.addAuthors($ids)。

请指教...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:17:24.237

这是因为您有`$autors`定义为的属性设置器

```
public function setAuthors(User $author) ... 
```

但是您的属性和`multiple = true`表单字段具有 OneToMany 关系，因此必须将 setter 定义为：

```
public function setAuthors($authors) ... 
```

# php - 将 .tmp 文件而不是所需文件上传到服务器

> ID：13780269
> 
> 赞同：0
> 
> 时间：2012-12-08T18:04:50.997
> 
> 标签：php, curl

我正在将文件上传到 box.net。我正在使用 Curl 发送文件，

但我面临的问题是它不上传我选择的文件，而是上传一些 .tmp 文件。

以下是我的代码：

```
<?php
$upload_url = 'Server-Url';

$tmpfile = $_FILES['new_file1']['tmp_name'];
$_POST['new_file1'] = '@'.$tmpfile;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $upload_url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $_POST); 

$response = curl_exec($ch);
curl_close($ch);
echo $response;     
?>

<form action=""
  enctype="multipart/form-data" accept-charset="utf-8" method="POST">
<input type="file" name="new_file1" />
<input type="text" name="share" value="1" />
<input type="submit" name="upload_files" value="Upload File" />
</form> 
```

难道我做错了什么？请任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:08:47.733

`tmp_name`应该包含一个临时名称*。*实际文件名在`name`元素中。请参阅[手册](http://php.net/manual/en/features.file-upload.post-method.php)。

但是，对于您拥有的代码，如果您使用该`name`元素，则会在您的代码中引入一个巨大的漏洞，因为攻击者可能能够使您的脚本从您的服务器上传本地文件。用来 `move_uploaded_file()`防止这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:04:40.560

据我所见，curl 不提供选择一个文件，但在上传期间为其发送不同的名称。除非您想自己制作整个 HTTP 请求以实现这种灵活性，否则您必须重命名磁盘上的文件以赋予正确的名称。**但是，将文件重命名为用户提供的任意名称始终是一个巨大的安全风险。**下面我将创建一个唯一的临时目录，并仔细检查该文件是否将被移动到该目录中，以避免路径注入攻击并避免覆盖其他文件。可能有也可能没有更多我没有考虑的攻击向量！

```
do {
    $tmpDir = sys_get_temp_dir() . DIRECTORY_SEPARATOR . uniqid('upload');
} while (file_exists($tmpDir));
$uploadFile = realpath($tmpDir . DIRECTORY_SEPARATOR . basename($_FILES['new_file1']['name']));

if (strpos($uploadFile, $tmpDir) !== 0) {
    trigger_error('File path not within expected directory', E_USER_ERROR);
    exit;
}

mkdir($tmpDir, 0600);
move_uploaded_file($_FILES['new_file1']['tmp_name'], $uploadFile);

...
curl_setopt($ch, CURLOPT_POSTFIELDS, array('file' => "@$uploadFile"));
...

unlink($uploadFile);
rmdir($tmpDir); 
```

# ios - 与模拟器相比，自定义 iOS InAppSettingsKit 在 iPhone 上会产生不同的结果

> ID：13780276
> 
> 赞同：1
> 
> 时间：2012-12-08T18:06:13.977
> 
> 标签：ios, inappsettingskit

我正在尝试更改 InAppSettingKit 视图控制器的背景颜色。

我已经尝试子类化和覆盖 cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [super tableView:tableView cellForRowAtIndexPath:indexPath];
    cell.textLabel.backgroundColor = [UIColor redColor];
    cell.detailTextLabel.backgroundColor = [UIColor redColor];
    return cell;
} 
```

我尝试为 UIColor 创建一个类别：

```
+ (UIColor *)groupTableViewBackgroundColor {
    return [UIColor redColor];
} 
```

无论我尝试什么，模拟器都会显示正确的（预期的）行为，但我的 iPhone 会显示默认的组表背景。

关于如何解决这个问题的任何想法？也许这是我在我的应用程序委托中创建我的 InAppSettingsViewController 实例的方式......？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    IASKAppSettingsViewController *iaskvc = [[IASKAppSettingsViewController alloc] init];
    i = [UIImage imageNamed:@"20-gear-2.png"];
    [[iaskvc tabBarItem] setImage:i];
    [[iaskvc tabBarItem] setTitle:@"Settings"];

    // Create the Toolbar
    UITabBarController *tabBarController = [[UITabBarController alloc] init];
    NSArray *viewControllers = [NSArray arrayWithObjects:iaskvc, nil];
    [tabBarController setViewControllers:viewControllers];

    [[self window] setRootViewController:tabBarController];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

XCode：版本 4.5.2 (4G2008a) iOS 部署目标：5.1 iPhone 上的 iOS：6.0.1 (10A523)

![模拟器 - 预期](../Images/ce78fa0ba44ea3dab5ae0df3039bdb01.png) ![iPhone——自定义不起作用](../Images/983d3f868950cc607e139cee67465b07.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:09:59.797

好的，所以我在阅读了关于 SO 的其他内容后找到了答案，这让我想得更远。

初始化我的子类 IASKAppSettingsViewController ：

```
MyAppSettingsViewController *iaskvc = [[MyAppSettingsViewController alloc] initWithNibName:@"MyAppSettingsViewController" bundle:nil]; 
```

并添加我自己的 xib 文件（以前我没有）允许我自定义我需要的一切，然后它在 iPhone 上运行良好。

# cakephp - cakephp 日期“dmy”验证不起作用

> ID：13780283
> 
> 赞同：0
> 
> 时间：2012-12-08T18:06:47.713
> 
> 标签：cakephp, cakephp-2.0

我想用`dmy`格式验证。这是我在模型中写的：

```
'birthdate' => array(
    'date' => array(
        'rule' => array('date','dmy'),
        'message' => 'Solo data valida',
        'allowEmpty' => true,
    )
) 
```

但是，当我提交带有日期的表单时，出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:02:40.400

您应该验证的一件事是在验证之前直接“生日”的值。在调用 $this->Model->save 或 $this->Model->validate 之前尝试在控制器中调试 $this->request->data。您很有可能在将该日期值传递给验证之前对其进行了转换，因此它可能会失败。

例如，我通常使用 beforeSave 和 afterFind 回调来转换进入和来自 MySQL 的日期，或者您的 appController 或 beforeFilter 回调中可能有一些东西无意中转换了数据。

# php - PSR-0 参数通过

> ID：13780284
> 
> 赞同：0
> 
> 时间：2012-12-08T18:06:50.857
> 
> 标签：php, psr-0

```
Catchable fatal error: Argument 1 passed to Core\Model\Mapper\PostMapper::save() must be an instance of Core\Model\Mapper\Post, instance of Core\Model\Post given, called in C:\wamp\www\Test\index.php on line 16 and defined in C:\wamp\www\Test\Core\Model\Mapper\PostMapper.php on line 15 
```

索引.php

```
<?php
require_once 'Core/Library/SplClassLoader.php';

$loader = new SplClassLoader('Core', '');
$loader->register();

use Core\Model\Post,
    Core\Model\Mapper\PostMapper;

$db = false;

$postMapper = new PostMapper($db);

$post = new Post;

$postMapper->save($post); 
```

PostMapper 接口和 PostMapper 确实有“Post”

```
<?php
namespace Core\Model\Mapper;

interface PostMapperInterface
{

    public function save(Post $post);
} 
```

我不明白为什么它抱怨不是“帖子”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:08:42.433

它是一个`Post`，但不是`Post`它正在寻找的。

您似乎对命名空间感到困惑。在一个场合，`Post`指的是`Core\Model\Mapper\Post`，但你传递的是 type `Core\Model\Post`。

```
namespace Core\Model\Mapper;

interface PostMapperInterface
{

    public function save(Post $post);
} 
```

您首先声明您现在位于 namespace 内`Core\Model\Mapper`，因此当您`Post`在方法声明中引用时，它`Post` **是相对于该 namespace**，这就是它想要一个 type 的实例的原因`Core\Model\Mapper\Post`。

您需要像这样更改代码：

```
public function save(\Core\Model\Post $post); 
```

# dotnetnuke - DNN 模块中的 CSS

> ID：13780285
> 
> 赞同：6
> 
> 时间：2012-12-08T18:06:52.603
> 
> 标签：dotnetnuke

我如何在 DotnetNuke 中包含特定模块的自定义 css 和 JavaScript？

我知道它不像普通的 ASP.Net 页面。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-08T20:57:16.060

如果您的模块在模块文件夹的根目录中有一个名为`module.css`的文件，它将自动包含在该模块所在的页面中。

对于其他 CSS 和 JavaScript，您应该使用[客户端资源管理框架](http://bdukes.github.com/Making-Full-Use-of-the-Client-Resource-Management-Framework/#/title)来包含您想要的资源。像这样的东西：

```
<%@ Register TagPrefix="dnn" 
    Namespace="DotNetNuke.Web.Client.ClientResourceManagement" 
    Assembly="DotNetNuke.Web.Client" %>

<dnn:DnnCssInclude runat="server"
    FilePath="~/DesktopModules/MyModule/css/the-style.css" />
<dnn:DnnJsInclude runat="server"
    FilePath="~/DesktopModules/MyModule/js/the-script.js"
    ForceProvider="DnnFormBottomProvider" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-05T19:49:12.793

你也可以使用这个：

```
<link rel="stylesheet" type="text/css" href="<%= ControlPath %>/module.css" /> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-11T05:44:54.970

要将外部 JavaScript 添加到自定义模块：

```
string externaJs= "externaJs";
Type cstype = System.Reflection.MethodBase.GetCurrentMethod().GetType();
string cstext = "<script src=\"" +
                ResolveUrl("~/DesktopModules/ModuleName/js/JsName.js") +
                "\" type=\"text/javascript\"></script>";

if (!Page.ClientScript.IsClientScriptBlockRegistered(externaJs))
   Page.ClientScript.RegisterClientScriptBlock(cstype, externaJs, cstext, false); 
```

# android - 使相对布局中的两个文本视图占据高度的 50%

> ID：13780288
> 
> 赞同：4
> 
> 时间：2012-12-08T18:07:32.557
> 
> 标签：android, android-layout

我有一个具有以下项目布局的自定义列表视图：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:paddingBottom="2dip"
    android:paddingTop="2dip" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:paddingLeft="6dip" />

    <TextView
        android:id="@android:id/text1"
        android:layout_width="50sp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/icon"
        android:ellipsize="marquee"
        android:gravity="center"
        android:paddingLeft="6dip"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/start_point"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@android:id/text1"
        android:ellipsize="marquee"
        android:paddingLeft="6dip"
        android:paddingRight="6dip"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/end_point"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_below="@id/start_point"
        android:layout_toRightOf="@android:id/text1"
        android:ellipsize="marquee"
        android:gravity="center_vertical"
        android:paddingLeft="6dip"
        android:paddingRight="6dip"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</RelativeLayout> 
```

它显示的大部分都是我想要的，除了`start_point`高度`end_point`不相等。我尝试了很多事情，但以语法错误或布局损坏而告终。有没有可行的解决方案来实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:23:52.423

> 除了 start_point 和 end_point 的高度不相等之外，它显示的大部分都像我想要的那样。我尝试了很多事情，但以语法错误或布局损坏而告终。有没有可行的解决方案来实现这一目标？

在布局中像这样在两个之前插入一个额外的视图，`TextViews`这将作为一个锚，为`TextViews`:

```
<RelativeLayout>
    // the icon and the first TextView here

    <View android:id="@+id/anchor" android:layout_centerVertical="true" android:layout_alignParentRight="true"      
        android:layout_width="2dp"
        android:layout_height="0dp"/>

    // the two TextView below it
   <TextView
       android:id="@+id/start_point" android:layout_above="@id/anchor" // the rest of the attributes />

   <TextView
       android:id="@+id/end_point" android:layout_below="@id/anchor" // the rest of the attributes />
</RelativeLayout> 
```

# c# - 一个模型粘合剂来统治他们全部或一堆？

> ID：13780290
> 
> 赞同：1
> 
> 时间：2012-12-08T18:07:47.563
> 
> 标签：c#, asp.net-mvc

我需要一些帮助来理解！

我想了解如何最好地让我的 asp 控制器使用模型绑定。基本上，我想在我的会话中引用主对象（购物车）的某些内容，并且我的用户将以他们请求的形式编辑模型（editingModel1）。

基本上我正在考虑开设这样的课程：

```
 public class customModelBinder : IModelBinder {
        private const string sessionKey = "Cart";

        public object BindModel(ControllerContext controllerContext, 
            ModelBindingContext bindingContext) {

            // get the Cart from the session 
            Cart cart = (Cart)controllerContext.HttpContext.Session[sessionKey];
            // create the Cart if there wasn't one in the session data
            if (cart == null) {
                cart = new Cart();
                controllerContext.HttpContext.Session[sessionKey] = cart;
            }
            // return the cart
            return cart;
        }
    } 
```

并像这样在我的控制器中使用它

```
 public ActionResult Edit(int id, Cart cb)
        {
            Company c = _companyProvider.Read(id);
            cb.editingModel1 = c
            return View(c);
        } 
```

如果我希望用户与诸如 editingModel2 之类的其他事物进行交互，我是否也应该将其放入购物车

希望这能解释我的问题！

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:34:18.737

我会放弃自定义模型活页夹。ASP.NET 的默认模型绑定器与强类型`Html.____For`控件的功能相结合非常强大，应该加以利用。

我假设 a`Cart`本质上是一个包含在包含一些元数据的类中的列表。我要做的是创建一个包含表单和`for`控件的强类型视图，以编辑包含您感兴趣的数据的对象。让我们将此对象类型称为`MyItem`。然后，将表单提交给一个控制器，该控制器将采用 type 的参数`MyItem`。此参数将填充表单中的数据。然后你可以做的是使用`Session`变量来访问`cart`对象，以及`MyItem`它的类型对象。

总的来说，这需要很少的逻辑，因为大部分都直接融入了 MVC 框架。在控制器中处理这个问题，可能会根据您的架构使用帮助程序类，并将模型绑定的担忧留给 MVC。

* * *

不要使用隐藏字段！你不需要它们。我认为您可能不理解的是，当您`Session`在 MVC 中拥有变量时，您实际上是在使用它，就好像它是单个用户的单个会话一样。如果您`Session["MyCart"]`在会话中使用代码访问购物车，则运行该代码的用户将自动访问他或她的购物车。这是因为会话唯一性由 MVC 以安全的方式自动管理。作为开发人员，您无需担心用户访问与其对应的服务器端项目。只需将它们放在会话中，MVC 会处理其余的事情，确保用户只能访问属于他们的会话数据。

# java - 使用 Jsoup，我如何获取每个链接中的每一个信息？

> ID：13780291
> 
> 赞同：3
> 
> 时间：2012-12-08T18:07:50.870
> 
> 标签：java, jsoup

```
 package com.muthu;
     import java.io.IOException;
     import org.jsoup.Jsoup;
     import org.jsoup.helper.Validate;
     import org.jsoup.nodes.Document;
     import org.jsoup.nodes.Element;
     import org.jsoup.select.Elements;
     import org.jsoup.select.NodeVisitor;
     import java.io.BufferedWriter;
     import java.io.File;
     import java.io.FileWriter;
     import java.io.IOException;
     import org.jsoup.nodes.*;
     public class TestingTool 
     {
        public static void main(String[] args) throws IOException
        {
    Validate.isTrue(args.length == 0, "usage: supply url to fetch");
            String url = "http://www.stackoverflow.com/";
            print("Fetching %s...", url);
            Document doc = Jsoup.connect(url).get();
            Elements links = doc.select("a[href]");
            System.out.println(doc.text());
            Elements tags=doc.getElementsByTag("div");
            String alls=doc.text();
            System.out.println("\n");
            for (Element link : links)
            {
        print("  %s  ", link.attr("abs:href"), trim(link.text(), 35));
            }
            BufferedWriter bw = new BufferedWriter(new FileWriter(new File("C:/tool                 
            /linknames.txt")));        
         for (Element link : links) {
            bw.write("Link: "+ link.text().trim());
        bw.write(System.getProperty("line.separator"));       
       }    
      bw.flush();     
      bw.close();
    }           }
    private static void print(String msg, Object... args) {
        System.out.println(String.format(msg, args));
    }

    private static String trim(String s, int width) {
        if (s.length() > width)
            return s.substring(0, width-1) + ".";
        else
            return s;
    }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:52:05.550

如果您连接到一个 URL，它只会解析当前页面。但是您可以 1.) 连接到 URL，2.) 解析您需要的信息，3.) 选择所有进一步的链接，4.) 连接到它们，并且 5.) 只要有新链接就继续。

**考虑因素：**

*   您需要一个列表 (?) 或其他存储已解析链接的内容
*   您必须决定是否只需要此页面的链接或外部链接
*   您必须跳过“关于”、“联系”等页面。

* * *

**编辑：（**
*注意：您必须添加一些更改/错误处理代码）*

```
List<String> visitedUrls = new ArrayList<>(); // Store all links you've already visited

public void visitUrl(String url) throws IOException
{
    url = url.toLowerCase(); // now its case insensitive

    if( !visitedUrls.contains(url) ) // Do this only if not visted yet
    {
        Document doc = Jsoup.connect(url).get(); // Connect to Url and parse Document

        /* ... Select your Data here ... */

        Elements nextLinks = doc.select("a[href]"); // Select next links - add more restriction!

        for( Element next : nextLinks ) // Iterate over all Links
        {
            visitUrl(next.absUrl("href")); // Recursive call for all next Links
        }
    }
} 
```

您必须在选择下一个链接的部分添加更多限制/检查（也许您想跳过/忽略一些）；和一些错误处理。

* * *

**编辑2：**

要跳过忽略的链接，您可以使用：

1.  创建一个集合/列表/任何东西，您可以在其中存储被忽略的关键字
2.  用这些关键字填充它
3.  在使用新链接调用该`visitUrl()`方法进行解析之前，请检查此新 Url 是否包含任何被忽略的关键字。如果它包含至少一个，它将被跳过。

为此，我稍微修改了示例（但*尚未*经过测试！）。

```
List<String> visitedUrls = new ArrayList<>(); // Store all links you've already visited
Set<String> ignore = new HashSet<>(); // Store all keywords you want ignore

// ...

/*
 * Add keywords to the ignorelist. Each link that contains one of this
 * words will be skipped.
 * 
 * Do this in eg. constructor, static block or a init method.
 */
ignore.add(".twitter.com");

// ...

public void visitUrl(String url) throws IOException
{
    url = url.toLowerCase(); // Now its case insensitive

    if( !visitedUrls.contains(url) ) // Do this only if not visted yet
    {
        Document doc = Jsoup.connect(url).get(); // Connect to Url and parse Document

        /* ... Select your Data here ... */

        Elements nextLinks = doc.select("a[href]"); // Select next links - add more restriction!

        for( Element next : nextLinks ) // Iterate over all Links
        {
            boolean skip = false; // If false: parse the url, if true: skip it
            final String href = next.absUrl("href"); // Select the 'href' attribute -> next link to parse

            for( String s : ignore ) // Iterate over all ignored keywords - maybe there's a better solution for this
            {
                if( href.contains(s) ) // If the url contains ignored keywords it will be skipped
                {
                    skip = true;
                    break;
                }
            }

            if( !skip )
                visitUrl(next.absUrl("href")); // Recursive call for all next Links
        }
    }
} 
```

通过以下方式解析下一个链接：

```
final String href = next.absUrl("href");
/* ... */
visitUrl(next.absUrl("href")); 
```

但可能你应该在这部分添加更多的停止条件。

# spreadsheetgear - 存储电子表格单元的元数据

> ID：13780296
> 
> 赞同：2
> 
> 时间：2012-12-08T18:08:00.327
> 
> 标签：spreadsheetgear

有没有办法使用 SpreadsheetGear 控件存储单元格的自定义元数据？保存到 XLSX 文件时，我需要保留元数据。（我想存储一些基本上是任意字符串的数据绑定信息）。我可以使用评论，但这不是最佳选择，因为它显示了一个视觉标记。

同样，有没有办法为 WorkSheet 或 WorkBook 存储自定义元数据？图表？

我可以使用 excel SmartTag 吗？（我没有看到电子表格对 SmartTags 的支持）。

*   约瑟夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T14:25:44.920

为了存储 [电子表格报告应用程序](http://mytracefinder.com/plugins/reporting/getting-started/)的元数据，我将 .metadata 文件与 .xlsx 文件一起保存。我为电子表格上的每个图像保留了一个元数据字典，键是图像 ID。我还保留了每个工作表的元数据，工作表的名称是关键。这样做的好处是您可以存储任意元数据，缺点是您必须使两者保持同步（例如，如果图像被删除或工作表被重命名）。

# c#-4.0 - 在 C# 代码后面处理 SQL Server 数据表的性能方式

> ID：13780298
> 
> 赞同：0
> 
> 时间：2012-12-08T18:08:14.943
> 
> 标签：c#-4.0, sql-server-2008-r2, dataset, dataview

好吧，现在这个问题可能对你来说很模糊，所以我会尽可能多地解释。

例如，我在一个名为 的数据表中有 10 列和 5000 行`tblNpc`。

所以在工作的时候我会在这张表上做很多过滤。我在这里使用这种方法，但这是处理它的最佳方法吗？

这里是一个小例子

```
 string srQuery = "select * from tblNpc";
    DataSet dsNPC = DbConnection.db_Select_Query(srQuery);

    DataView dvNPC = new DataView(dsNPC.Tables[0]);

    dvNPC.RowFilter = "npcId=32";
    string srExampleData = dvNPC[0]["npcName"].ToString(); 
```

C# 4.0，SQL Server 2008 R2

重要提示：我将使用整个表格，并且将过滤等于整个表格的行数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:29:15.727

根据评论，如果你是为了完成这项工作而设计的`@Andormar's`，它会更快，并且`hand over the filtering job to the SQL Server``bring over only what you needed.`

如果您需要在后面的代码中使用 DataTable，那么`LINQ would be quicker I think`. 最重要的是，您可以使用 LINQ 而不是 RowFilter 对 DataTable 进行复杂查询。

例如，您的查询可以完成为

```
var results = (from r in dsNPC.Tables[0].AsEnumerable()
               where r.Field<int>("npcId")) ==32
               select new { npcName = r.Field<string>("npcName")})
              .FirstOrDefault(); 
```

# c# - 在“使用”块中的“foreach”之后没有触发语句

> ID：13780306
> 
> 赞同：0
> 
> 时间：2012-12-08T18:09:03.070
> 
> 标签：c#, event-handling, foreach, using

我正在尝试在块内的`foreach`迭代器中连接一些数据。`using`不幸的是，由于某种原因，我在失败后插入（或之后）`using`块中的任何语句`foreach`都无法触发。

来源：

```
static void sensor_DepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
{
    using (var depthFrame = e.OpenDepthImageFrame())
    {          
        if (depthFrame == null)
            return;
        short[] bits = new short[depthFrame.PixelDataLength];
        string bitString = "0";
        depthFrame.CopyPixelDataTo(bits);
        foreach (var bit in bits)
        {
            bitString += bit.ToString();
            Console.Write("This fires.");
        }
        Console.Write("This never fires and I don't know why.");
        Program.Broadcast(bitString); //this also fails to fire.
    }
    Console.Write("This never fires either.");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:35:06.070

查看代码没有明显的原因使它不起作用。`using()`我怀疑它与块有什么关系。

也许检查以下内容：

1.  你的`foreach`循环终止了吗？数组中有多少个元素，`bits`“This Fires”被写了多少次？
2.  控制台输出可能会被缓冲，并且在刷新之前您看不到任何打印内容。如果替换为 会发生`Console.Write()`什么`Console.WriteLine()`？
3.  执行可能在没有到达的情况下跳出循环的唯一另一种方法`Program.Broadcast(bitString)`是抛出异常。尝试将整个函数包装在一个`try`//构造`catch`中`finally`并打印发生的任何异常，并可能在`finally`块中打印一条消息，无论发生什么都应该打印。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:16:17.480

也许 foreach 需要太长时间？尝试使用 StringBuilder。

```
 StringBuilder bitString = new StringBuilder("0");
        depthFrame.CopyPixelDataTo(bits);
        foreach (var bit in bits)
        {
            sb.Append(bit.ToString();
        }
        Program.Broadcast(bitString.ToString()); 
```

# jquery - 使用 jQuery 从输入 [type='file'] 获取文件名

> ID：13780309
> 
> 赞同：43
> 
> 时间：2012-12-08T18:09:42.137
> 
> 标签：jquery

这是上传的表格。

```
<form class="alert alert-info">
    <div>
        <b id = "select_file" class="span3" style="font-weight: bold; cursor: pointer; ">Please select image</b>
        <input class="span3" type="file" name="image_file" id="image_file" style="display:none " />
        <input disabled="true" type="button" value="Upload image" class="btn" />
    </div>
</form> 
```

我使用以下脚本打开一个包含文件的窗口。我想在`<b id = 'select_file'>`.

我怎样才能做到这一点？

```
$('#select_file').click(function(){
    var _this = $(this);
    $('#image_file').show().focus().click().hide();

    var filename = $('#image_file').val();
    _this.html(filename);

    $('.btn').attr('disabled', false);
}); 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-08T18:16:43.877

获取文件名相当容易。正如 matsko 指出的那样，出于安全原因，您无法获取用户计算机上的完整文件路径。

```
var file = $('#image_file')[0].files[0]
if (file){
  console.log(file.name);
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-12-08T18:22:29.577

您必须对`input type file`这种方式的更改事件执行此操作：

```
$('#select_file').click(function() {
    $('#image_file').show();
    $('.btn').prop('disabled', false);
    $('#image_file').change(function() {
        var filename = $('#image_file').val();
        $('#select_file').html(filename);
    });
});​ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-20T13:04:40.260

没有用于此的 jQuery 函数。您必须访问[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)元素并检查 files 属性。

```
document.getElementById("image_file").files[0]; 
```

或者

```
$('#image_file')[0].files[0] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-06-10T15:29:00.563

这对我来说是一个非常重要的问题，以便我的网站支持多语言。所以这是我在 Firefox 和 Chrome 中测试的结论。

jQuery 触发器派上用场了。

所以这隐藏了标准的无聊`type=file`标签。您可以放置​​任何您想要的标签并格式化。[我从http://demo.smarttutorials.net/ajax1/](http://demo.smarttutorials.net/ajax1/)定制了一个脚本。该脚本允许通过缩略图预览上传多个文件，并使用 PHP 和 MySQL。

```
<form enctype="multipart/form-data" name='imageform' role="form"    ="imageform" method="post" action="upload_ajax.php">
    <div class="form-group">
        <div id="select_file">Select a file</div>
        <input class='file' type="file" style="display: none " class="form-control" name="images_up" id="images_up" placeholder="Please choose your image">
        <div id="my_file"></div>
        <span class="help-block"></span>
    </div>
    <div id="loader" style="display: none;">
        Please wait image uploading to server....
    </div>
    <input type="submit" value="Upload" name="image_upload" id="image_upload" class="btn"/>
</form>

$('#select_file').click(function() {
    $('#images_up').trigger('click');
    $('#images_up').change(function() {
        var filename = $('#images_up').val();
        if (filename.substring(3,11) == 'fakepath') {
            filename = filename.substring(12);
        } // Remove c:\fake at beginning from localhost chrome
        $('#my_file').html(filename);
   });
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-01T11:59:13.647

尝试使用 jQuery 从输入 [type='file'] 获取文件名。

```
<script type="text/javascript">
    $(document).ready(function(){
        $('input[type="file"]').change(function(e){
            var fileName = e.target.files[0].name;
            alert('The file "' + fileName +  '" has been selected.');
        });
    });
</script> 
```

取自[@jQueryPot](http://www.jquerypot.com/get-filename-from-input-type-file-using-jquery/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-10T09:24:23.240

**使用引导**

从输入字段中删除**form-control-file**类以避免不需要的水平滚动条

试试这个！！

```
$('#upload').change(function() {
    var filename = $('#upload').val();
    if (filename.substring(3,11) == 'fakepath') {
        filename = filename.substring(12);
    } // For Remove fakepath
    $("label[for='file_name'] b").html(filename);
    $("label[for='file_default']").text('Selected File: ');
    if (filename == "") {
        $("label[for='file_default']").text('No File Choosen');
    }
});
```

```
.custom_file {
  margin: auto;
  opacity: 0;
  position: absolute;
  z-index: -1;
}
```

```
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="form-group">
   <label for="upload" class="btn btn-sm btn-primary">Upload Image</label>
    <input type="file" class="text-center form-control-file custom_file" id="upload" name="user_image">
    <label for="file_default">No File Choosen </label>
    <label for="file_name"><b></b></label>
</div>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-05T13:47:29.060

```
$("#filetosend").prop('files')[0] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-12T07:11:51.787

您可以访问要将参数传递给回调函数的属性（例如`evt`），然后使用它访问文件（`evt.target.files[0].name`）：

```
$("document").ready(function(){
  $("main").append('<input type="file" name="photo" id="upload-photo"/>');
  $('#upload-photo').on('change',function(evt) {
    alert(evt.target.files[0].name);
  });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-21T21:31:00.633

`var file = $('#YOURID > input[type="file"]'); file.value; // filename will be,`

在 Chrome 中，这将类似于`C:\fakepath\FILE_NAME`或`undefined`如果没有选择文件。

浏览器不显示本地机器的文件结构是一种限制或意图。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-09-07T11:04:22.080

如果选择更多 1 个文件：

```
$("input[type="file"]").change(function() {
   var files = $("input[type="file"]").prop("files");
   var names = $.map(files, function(val) { return val.name; });
   $(".some_div").text(names);
}); 
```

`files`将是一个`FileList`对象。`names`是一个字符串数组（文件名）。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-12-08T18:15:08.217

由于安全原因，这是不可能的。至少不是在现代浏览器上。这是因为任何访问文件路径的代码都可能被视为危险和安全风险。要么你得到一个未定义的值，要么是一个空字符串，要么会抛出一个错误。

提交文件表单时，浏览器会将文件临时缓冲到上传目录中，并且仅提交该文件的临时文件名和该文件的基本名称。

# ruby - Ruby 简单的 Web 服务客户端执行对 Solr 的调用

> ID：13780311
> 
> 赞同：2
> 
> 时间：2012-12-08T18:10:02.150
> 
> 标签：ruby, solr, webservice-client

我需要一些帮助：我必须构建以下 URL 才能执行针对 Apache Solr 实例的查询：

```
http://localhost:8080/solr/select?q=*%3A*&fq=deal_discount%3A[20+TO+*]&fq=deal_price%3A[*+TO+100]&fq={!geofilt+pt%3D45.6574%2C9.9627+sfield%3Dlocation_latlng+d%3D600} 
```

如您所见，URL 包含名为“fq”的参数的 3 倍。我只是想知道如何使用 URI.parse() 方法，如果我需要在作为 parse() 方法的第二个参数的哈希中传递三倍的参数“fq”。

这是一个简单的片段：

```
path = 'http://localhost:8080/solr/select'
pars = { 'fq' => 'deal_price [* TO 100]', 'fq' => '{!geofilt pt=45.6574,9.9627 sfield=location_latlng d=600}' } # This is obviously wrong!
res = Net::HTTP::post_form( URI.parse(path), pars ) 
```

解决方案是将完整的 URL 作为字符串传递，但我找不到提供这种签名的方法。

您能否为我的问题发布一个简单的解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:56:11.490

谢谢你的帮助。是的，你是对的......我需要一个 get 方法。无论如何，我不得不对您的代码进行一些更改，因为 Net:HTTP.get() 抛出异常“未知方法主机名”

```
uri = URI(solrUrl)
req = Net::HTTP::Get.new(uri.request_uri)
res = Net::HTTP.start(uri.hostname, uri.port) {|http|
   http.request(req)
} 
```

这解决了我的问题。确实谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:17:27.503

您的 URL 建议您应该使用 HTTP GET 来查询 solr，而您的代码片段使用 POST，这是需要更改的一件事。但我认为您的主要问题在于参数，哈希可能只包含一个键条目，因此在这种情况下您不能使用哈希。一种简单的方法是手动构建 URL。

```
params_array = ['deal_price [* TO 100]', 
  '{!geofilt pt=45.6574,9.9627 sfield=location_latlng d=600}']
base_url = "http://localhost:8080/solr/select"
query_string = "?fq=#{params_array.join('&fq=')}"
url = base_url + query_string
result = Net::HTTP.get url 
```

可能有点紧凑 - 更易读的版本可能是（根据口味）：

```
params_array = ['deal_price [* TO 100]', 
  '{!geofilt pt=45.6574,9.9627 sfield=location_latlng d=600}']
url = "http://localhost:8080/solr/select&"
params_array.each do |param|
  url << "&fq=#{param}"
end
result = Net::HTTP.get url 
```

# linux - 无法在 64 位 Linux 上构建 32 位 Wine

> ID：13780319
> 
> 赞同：12
> 
> 时间：2012-12-08T18:10:24.417
> 
> 标签：linux

我正在尝试这样做：
[使用 automake 配置脚本在 64 位 Linux 上构建 32 位？](https://stackoverflow.com/questions/3261909/build-32bit-on-64-bit-linux-using-a-configure-script)
对我不起作用 :( 编译酒。我在 config.log 中找到了这个：

```
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "Wine"
| #define PACKAGE_TARNAME "wine"
| #define PACKAGE_VERSION "1.5.19"
| #define PACKAGE_STRING "Wine 1.5.19"
| #define PACKAGE_BUGREPORT "wine-devel@winehq.org"
| #define PACKAGE_URL "http://www.winehq.org"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| } 
```

配置失败：`Cannot build a 32-bit program, you need to install 32-bit development libraries.`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-06T10:56:42.483

```
apt-get install gcc-multilib libasound2-dev:i386 libgsm1-dev:i386 libjpeg8-dev:i386 liblcms2-dev:i386 libldap2-dev:i386 libmpg123-dev:i386 libopenal-dev:i386 libv4l-dev:i386 libx11-dev:i386 libxinerama-dev:i386 libxml2-dev:i386 zlib1g-dev:i386 
```

和

```
apt-get install libcapi20-dev:i386 libcups2:i386 libdbus-1-3:i386 libfontconfig:i386 libfreetype6:i386 libglu1-mesa:i386 libgnutls26:i386 libgphoto2-2:i386 libncurses5:i386 libosmesa6:i386 libsane:i386 libxcomposite1:i386 libxcursor1:i386 libxi6:i386 libxrandr2:i386 libxslt1.1:i386 ocl-icd-libopencl1:i386 
```

让我过去了 X 错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-14T13:06:31.327

要在 64 位机器上构建 32 位 wine，您可以使用 LXC（Linux 容器），它是一个操作系统级虚拟化环境，用于运行多个隔离的 Linux 系统。这是迄今为止最简单的解决方案，因为 Linux（例如 Ubuntu 或 Debian）使构建 32 位 wine 变得困难，因为 64 位系统没有配备完整的 32 位开发库（参见：[Bug #990982](https://bugs.launchpad.net/ubuntu/+source/freetype/+bug/990982)） .

所以编译 32 位和 64 位 wine 的基本方法是：

1.  构建 64 位 wine
2.  在 lxc 中构建 32 位工具
3.  lxc中构建32位wine，参考64位wine和32位工具 1.前面步骤中构建
4.  安装 32 位 wine
5.  安装 64 位 wine

在 Ubuntu 上的[Building Biarch (Shared WoW64) Wine](http://wiki.winehq.org/BuildingBiarchWineOnUbuntu)页面上，我们可以阅读以下说明：

1.  安装 64 位先决条件：

    ```
    sudo apt-get update
    sudo apt-get build-dep wine 
    ```

2.  构建 64 位酒：

    ```
    mkdir $HOME/wine64
    cd $HOME/wine64
    ../wine-git/configure --enable-win64
    make -j4 
    ```

3.  安装 lxc：

    ```
    sudo apt-get install lxc 
    ```

4.  使用 Ubuntu 模板创建一个名为“my32bitbox”的 32 位容器，并将您的主目录绑定到容器中的 /home 目录：

    ```
    sudo lxc-create -t ubuntu -n my32bitbox -- --bindhome $LOGNAME -a i386 
    ```

5.  将 apt 配置从主机复制到 lxc 容器：

    ```
    sudo cp -R /etc/apt /var/lib/lxc/my32bitbox/rootfs/etc 
    ```

6.  启动容器；在它给您的控制台登录提示符处，使用您的用户名和密码登录。

    ```
    sudo lxc-start -n my32bitbox 
    ```

7.  现在您在容器内，在您真正的主目录中。如果您不在容器中（您没有提示用户名@my32bitbox），则打开一个新终端并：

    ```
    sudo lxc-attach -n my32bitbox
    login yourusername+password 
    ```

8.  现在，您在容器中。像往常一样对 Wine 进行树外构建，只是为了获取工具。您必须先安装所有必需的先决条件。例如：

    ```
    sudo apt-get update
    sudo apt-get install python-software-properties git-core
    sudo apt-get build-dep wine
    mkdir $HOME/wine32-tools
    cd $HOME/wine32-tools
    ~/wine-git/configure
    make -j4 
    ```

9.  还是在容器内，再做一次，这次指向 64 位构建数据，32 位工具构建工具：

    ```
    mkdir $HOME/wine32
    cd $HOME/wine32
    ~/wine-git/configure --with-wine64=$HOME/wine64 --with-wine-tools=$HOME/wine32-tools
    make -j4 
    ```

10.  还是在容器里面，安装 32-bit wine 来强制构建最后一点：

    ```
    cd $HOME/wine32
    sudo make install 
    ```

11.  仍在容器内时，将其关闭：

    ```
    sudo shutdown -h now 
    ```

    这会让你回到你的真实机器中。接下来，您需要删除所有现有的 Wine 包。您可以从命令行执行此操作，但使用 aptitude 或 GUI 包管理工具之一可能更容易。您将需要 wine-mono、wine-gecko 和可选的 winetricks 来编译您的 wine 版本。但是，这些软件包可能依赖于现有的 wine 安装，这可能会迫使您删除它们。

12.  将新建的wine安装到你的真机中：

    ```
    cd $HOME/wine32
    sudo make install
    cd $HOME/wine64
    sudo make install 
    ```

    警告：当你安装本地构建的 Wine 版本时，包管理系统不会知道它的存在，因为它不是来自一个包。因此，以后可能会破坏其依赖关系或安装冲突的 wine 版本，而不会收到包管理工具的警告。您可以通过创建一个包或通过为包设置“Pin-Priority: -1”来阻止具有 apt-pinning 的冲突包来防止这种情况。

13.  接下来，安装 Mono、Gecko 和可选的 winetricks，如果由于依赖于冲突的 wine 包而必须删除它们的包。

笔记：

*   上述许多命令都需要 root 权限。您的用户帐户需要有权访问 root via，`sudo`或者您需要切换到用户帐户。
*   无需删除您的发行版并“安装”您的编译版本（32 位、64 位）您只需调用适合 Windows 应用程序的个人版本的 wine。例如：`~/wine32/wine32 ~/.wine/path_to_winapp/my_app`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-31T21:54:33.150

在 Debian Wheezy 上对我有一定作用的东西：

```
dpkg --add-architecture i386
apt-get update 
```

启用从 i386 存储库安装

```
apt-get install ia32-libs libc6-dev-i386 lib32z1-dev lib32bz2-dev 
```

安装 32 位库。我实际上仍然遇到X libs的问题：

```
configure: error: X 32-bit development files not found. Wine will be built
without X support, which probably isn't what you want. You will need
to install 32-bit development packages of Xlib/Xfree86 at the very least.
Use the --without-x option if you really want this. 
```

但它在技术上是可选的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-05T13:37:36.130

您可以解决 X 错误：

```
sudo apt-get install xorg-dev 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T18:15:16.120

不要那样做。即使在 64 位系统上，Wine 默认为 32 位构建（因为它必须运行 32 位 Windows 程序。）它还同时构建 64 位 Wine。如果要禁用它，请使用以下命令进行配置：

```
./configure --disable-win64
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-09T02:42:17.437

我猜你使用现在支持多架构的 Ubuntu x64。换句话说，在 64 位系统上，您只能构建 Wine-x64 版本。目前在 Ubuntu 12.04 x64 上构建 32bit Wine 似乎有问题。

所以只需运行：

```
./configure --enable-win64 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-12T15:59:45.773

Wine wiki 有一种简单的方法可以在 64 位系统上安装所需的 32 位开发库，使用 chroot：[http ://wiki.winehq.org/WineOn64bit](https://web.archive.org/web/20150730054943/http://wiki.winehq.org/WineOn64bit)

# c# - 如何改变扬声器的声音？

> ID：13780320
> 
> 赞同：1
> 
> 时间：2012-12-08T18:10:25.827
> 
> 标签：c#, text-to-speech

我试图用它做类似的事情[，](http://www.codeproject.com/Articles/182881/Text-to-Speech)但它没有改变声音......我怎么能改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:49:36.913

如果我理解正确，您应该创建一个 SpeechSynthesizer 对象：

```
SpeechSynthesizer voice = new SpeechSynthesizer(); 
```

然后您可以使用下面的方法来选择具有特定语音特征的语音

```
voice.SelectVoiceByHints (VoiceGender, VoiceAge, Int32, CultureInfo) 
```

# php - 表单与 HTML 标记一起返回（用作模板）

> ID：13780321
> 
> 赞同：0
> 
> 时间：2012-12-08T18:10:31.013
> 
> 标签：php, html, forms, output

我想制作一个用户可以输入文本的表单，当提交表单时，它将返回 HTML 输出。该表格仅供我和我的同事使用，而不是最终用户。我们正在寻找这种解决方案，以便更好地设计我们网站内容的样式。我们使用 Wordpress，但未能找到解决此问题的方法。（我们目前使用一个基本的 HTML 模板，但是当您查看下面的示例时，这会导致工作耗时）。这是我设想这种形式的方式：

```
<form>
Artist name: <input type="text" name="artist"><br />
Track name: <input type="text" name="track"><br />
Artist link: <input type="text" name="artistlink"><br />
Lyrics name: <input type="text" name="lyrics">br />
</form> 
```

我可以很好地完成上述部分。然后更复杂的是使输出包含 HTML 标记。我想要这样的东西：

```
<strong>Artist:</strong> <div id="artistname">artist's name</div>
<strong>Track:</strong> <div id="trackname>track name</div>
<strong>Lyrics:</strong> <div id="lyricstext" style="overflow: auto; height: 360px;    width: 640px;">
<ul>
<ul>
<li>Its the two kids</li>
<li>New shit improving the movement</li>
<li>We prove this with music</li>
<li>Words for the chosing</li>
</ul>
</ul>
</div> 
```

这样，我可以像这样添加一个 jQuery 片段：

```
<script type="text/javascript">
  $(function() {
    $("ul li:nth-child("odd")").addClass("even");
  });
</script> 
```

能够设计出奇特甚至`<li>`不同的风格。通过为每个部分创建 div，我还可以更好地控制输出的各个方面。我基本上需要这个作为将我们的内容放到网站上的模板。希望我的问题可以理解！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:25:42.070

你在寻找这样的东西吗？

```
<form method="POST" action="">
  Artist name: <input type="text" name="artist"><br />
  Track name: <input type="text" name="track"><br />
  Artist link: <input type="text" name="artistlink"><br />
  Lyrics name: <input type="text" name="lyrics"><br />
  <input type="submit" value="OK" />
</form> 

<?php
  //check if the submit button has been pressed and if the artist value is not empty 
  if(isset($_POST['artist']) && $_POST['artist'] != "") {
    echo '<strong>Artist:</strong><div id="artistname>"'.$_POST['artist'].'</div>';
  }
?> 
```

# algorithm - 最先进的图形着色元启发式

> ID：13780323
> 
> 赞同：3
> 
> 时间：2012-12-08T18:10:37.437
> 
> 标签：algorithm, graph, genetic-algorithm, heuristics, tabu-search

我有一个图形着色问题，涉及数千个顶点，每个顶点有 10 到 50 条边。我一直在研究许多图形着色启发式（GA，禁忌搜索......），但我发现它们很难比较并决定哪个最适合我。有没有人有大规模图形着色的经验来推荐一种技术或告诉我该领域当前的状态或最先进的算法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:40:42.573

在像[Drools Planner](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html#quickStart)这样的优化引擎中实现它并运行它的[基准测试](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html#d0e7084)以确定哪种元启发式方法效果最好。

特别是如果您没有*纯*图形着色问题（因此您有额外的约束），则无法提前判断哪种元启发式方法最有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T07:41:47.807

我知道的一个很好的解决方案是将模拟退火与 Kempe 链一起使用。基本上，您使用标准模拟退火，当您想对解决方案进行随机更改时，您选择两个相邻节点并根据 Kempe 链规则改变它们的颜色。

# css - 更改禁用输入字段的背景颜色

> ID：13780327
> 
> 赞同：26
> 
> 时间：2012-12-08T18:11:20.500
> 
> 标签：css

我正在尝试找到一种方法来禁用禁用的输入字段的背景颜色。我想知道是否有人可以帮助我解决这个问题？

这是我尝试过的，但没有奏效：

```
 input[type="text"][disabled]{background-color:red;} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-08T18:13:28.330

试试这个：

```
input[type="text"]:disabled{background-color:red;} 
```

资料来源：[W3学校](http://www.w3schools.com/cssref/sel_disabled.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-21T09:35:17.917

您可以使用它来捕获所有输入类型

```
input:disabled {
   background-color: red;
} 
```

# perl - Perl 简单循环

> ID：13780329
> 
> 赞同：2
> 
> 时间：2012-12-08T18:12:00.780
> 
> 标签：perl, loops, for-loop

有人可以解释为什么我的循环不起作用吗？

```
#!/usr/bin/perl -w
use warnings;
use strict;
use URI;
use Web::Scraper;

my $url = "http://example.com";

# prepare data
my $scrapedata = scraper {
 process "div.something", 'pages[]' => '@rel';
};

# scrape the data
my $res = $scrapedata->scrape(URI->new($url));

# Get number of pages and define as var
for my $j (0 .. $#{$res->{pages}}) {
 my $varpages = $res->{pages}[$j];
  print "$varpages\n";
}

for ( my $count = 2; $count <= $varpages; $count++) {

print "$varpages\n";
print "$count\n";

} 
```

这是错误：

```
# perl oli
Global symbol "$varpages" requires explicit package name at oli line 25.
Global symbol "$varpages" requires explicit package name at oli line 27.
Execution of oli aborted due to compilation errors. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T18:14:02.963

`$varpages`词法范围为代码块：

```
# Get number of pages and define as var
for my $j (0 .. $#{$res->{pages}}) {
 my $varpages = $res->{pages}[$j];
  print "$varpages\n";
} 
```

稍后引用它的尝试引用了不同的变量。如果您想`$varpages`拥有全局范围，请在分配给它的块之外声明它。例如：

```
my $varpages;
# Get number of pages and define as var
for my $j (0 .. $#{$res->{pages}}) {
  $varpages = $res->{pages}[$j];
  print "$varpages\n";
} 
```

# java - 无法从 IntelliJ Idea 打开网页

> ID：13780330
> 
> 赞同：1
> 
> 时间：2012-12-08T18:12:22.560
> 
> 标签：java, intellij-idea

我在 IntelliJ Idea 的 Javadoc 注释中插入了一些 Url，如下所示

```
 /**
 * @see <a href="http://stackoverflow.com/q/10173996/932307</a>
 * @see <a href="http://stackoverflow.com/a/9118564/932307"</a>
 */ 
```

我下载了超链接插件。这个想法是当 Ctrl+单击链接时在默认浏览器中打开网页。

当我按下 Ctrl 并将鼠标悬停在 url 上时，鼠标指针会发生变化，但是当我单击链接时，会出现一条消息**“找不到要前往的减速”**，并且 url 未在默认浏览器中打开。

我怎样才能使这项工作？

**[编辑1]**

我将标签更改为

```
/**
 * @see <a href="http://stackoverflow.com/q/10173996/932307">http://stackoverflow.com/q/10173996/932307</a>
 * @see <a href="http://stackoverflow.com/a/9118564/932307">http://stackoverflow.com/a/9118564/932307</a>
 */ 
```

点击它仍然给出**“找不到减速去”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:08:36.923

超链接插件可能与最新的 IDEA 版本不兼容，请联系插件供应商寻求帮助。

请注意，IntelliJ IDEA 尚不支持开箱即用，请投票支持以下功能请求：

*   [IDEA-64131](http://youtrack.jetbrains.com/issue/IDEA-64131)支持评论中的链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:18:55.863

请注意，您的开始标签缺少末尾的“>”，并且开始和结束标签之间没有可显示的文本。

更正后，链接在生成的 html 中工作正常。在 intelliJ 本身中，它们似乎不起作用。然而，它确实适用于对对象和方法的引用。

这里 ：

```
/**
 * <a href="http://stackoverflow.com/q/10173996/932307">http://stackoverflow.com/q/10173996/932307</a>
 * @see java.lang.String#compareTo(Object) 
 */ 
```

ctrl click 可以很好地单击包、类或方法。但是，stackoverflow 链接在源代码中不起作用。

# c# - 将聚合 SQL 查询转换为 LINQ

> ID：13780334
> 
> 赞同：0
> 
> 时间：2012-12-08T18:12:32.803
> 
> 标签：c#, linq, entity-framework-5

我决定在 LINQ 上尝试一下，但到目前为止它是一个悲惨的失败。我需要将以下 SQL 查询转换为 LINQ：

```
SELECT 
MAX(A.NEXTPAYMENTDATE) as NextPaymentDate
, SUM(B.PurchasePrice) - SUM(A.Amount) AS BALANCE
, c.FirstName
, c.LastName
, b.[year]
, b.make
, b.model
FROM Payments A
JOIN Vehicles B ON A.VehicleId = B.Id
JOIN Customers C ON  b.CustomerId = c.Id
GROUP BY VehicleId, c.FirstName, c.LastName, b.[year], b.make, b.model
HAVING SUM(B.PurchasePrice) - SUM(A.Amount) > 0 
```

这就是我到目前为止所拥有的。它似乎在一定程度上起作用，但我不知道如何从这里进步。

```
var groupedpayments = 
    from payments in db.Payments
    group payments by new { payments.VehicleId }
    into paymentGroup
        let maxDate = paymentGroup.Max(x => x.NextPaymentDate)
        let paid = paymentGroup.Sum(x => x.Amount)
    select 
    new { Payments = paymentGroup.Where(x => x.NextPaymentDate == maxDate)}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:29:16.087

我认为这就是你所需要的。

```
var query =
    Payments.Join(Vehicles, p => p.VehicleId, v => v.Id, (p, v) => new {p, v})
        .Join(Customers, d => d.v.CustomerId, c => c.Id, (d, c) => new {d, c})
        .GroupBy(r => 
                   new {
                           r.d.p.VehicleId,
                           r.d.v.year,
                           r.d.v.make,
                           r.d.v.model,
                           r.c.FirstName,
                           r.c.LastName
                       },
                 (g, data) =>
                   new {
                           FirstName = g.FirstName,
                           LastName = g.LastName,
                           Year = g.year,
                           Make = g.make,
                           Model = g.model,
                           NextPaymentDate = data.Max(dd => dd.d.p.NEXTPAYMENTDATE),
                           Balance = data.Sum(dd => dd.d.v.PurchasePrice)
                                      - data.Sum(dd => dd.d.p.Amount)})
         .Where(r => r.Balance > 0); 
```

# solr - 将 wget html 页面发布到 Solr

> ID：13780337
> 
> 赞同：0
> 
> 时间：2012-12-08T18:13:00.843
> 
> 标签：solr, wget

使用 wget 下载 html 网页时，如何将它们发布到 Solr 索引？如何修改以下示例以使其同时被索引？wget -P /var/myserver/archive [http://www.somesite/products.html](http://www.somesite/products.html)

我在 Solr 文档中找不到一个明显的例子，如果有任何指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:24:30.893

您可以查看[Apache Nutch](http://wiki.apache.org/nutch/NutchTutorial)，它是一个开源网络爬虫。
您可以为 Nutch 提供一个基本页面，它将帮助您索引页面以及其中的链接。
Nutch 与 Solr 集成，因此页面将被 Solr 索引并可以搜索。

但是，如果它只是几个没有蜘蛛功能的页面，您可以下载 html 页面并通过客户端代码将其提供给 solr。
Solr 具有 HTML 过滤器，可以从该页面中提取内容并将它们作为文本进行索引。

# algorithm - 在未排序的序列中找到大于给定数字的第一个数字

> ID：13780342
> 
> 赞同：5
> 
> 时间：2012-12-08T18:13:22.373
> 
> 标签：algorithm, data-structures

给定一个正整数序列和一个整数 M，返回序列中大于 M 的第一个数（如果不存在则返回 -1）。

示例：序列 = [2, 50, 8, 9, 1], M = 3 -> 返回 = 50

每个查询所需的 O(log n)（预处理后）。

我想到了 BST，但是给定一个升序，我只会得到一条很长的路径，这不会给我 O(logn) 时间......

编辑：使用的结构也应该易于修改，即应该可以用给定的元素替换找到的元素并重复搜索另一个 M（一切 - 除了预处理 - O（logn））。当然，如果我可以将“第一个更大”更改为“第一个更小”并且不必在算法中进行太多更改，那就太好了。如果有帮助，我们可以假设所有数字都是正数并且没有重复。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T18:17:23.973

创建第二个数组（让它成为`aux`），其中每个元素`i`：（原始数组中`aux[i] = max { arr[0],arr[1], ... ,arr[i]}`具有索引的所有元素的最大值）。`j <= i`

很容易看出这个数组是按性质排序的，简单的二分搜索`aux`就会产生所需的索引。（如果元素不存在，通过二分搜索很容易获得大于请求元素的第一个元素）。

时间复杂度是`O(n)`预处理（只做一次）和`O(logn)`每个查询。

# javascript - 基于时间的图像显示

> ID：13780344
> 
> 赞同：0
> 
> 时间：2012-12-08T18:13:42.463
> 
> 标签：javascript, html, datetime, image-rotation

我正在尝试创建一个图像旋转器，它在特定时间显示特定图像，但也在一天中的其他时间旋转。

当我第一次创建它时，我只是让它每三秒旋转一次。那工作得很好。但是一旦我添加了代码以在不同的时间显示不同的图像，它就不再一起工作了。部分问题是我对应该将 setInterval 和 clearInterval 放在哪里感到困惑。无论如何，这里是代码。

```
 <img id="mainImage" src="/arts/rotatorpics/artzone.jpg" /> 
```

JS：

```
 var myImage = document.getElementById("mainImage");
    var imageArray = ["arts/rotatorpics/artzone.jpg",
         "arts/rotatorpics/bach.jpg",
         "arts/rotatorpics/burns.jpg"];
    var imageIndex = 0;
    var changeImage = function() {
        mainImage.setAttribute("src", imageArray[imageIndex]);
        imageIndex++;
        if (imageIndex >= imageArray.length) {
            imageIndex = 0;
        }

    }

    var newDay = new Date(); //create a new date object
    var dayNight = newDay.getHours(); //gets the time of day in hours

    function displayImages() {
        if (dayNight >= 10 && dayNight <= 12) {
            mainImage.setAttribute("src", imageArray[1]);
        } else if (dayNight >= 17 && dayNight <= 19) {
            mainImage.setAttribute("src", imageArray[2]);
        } else {
            var intervalHandle = setInterval(changeImage, 3000);
        }
        myImage.onclick = function() {
            clearInterval(intervalHandle);
        };
    }​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:33:01.443

首先，你所有的变量似乎都是全局的，请不要那样做，使用匿名函数包装器来执行你的代码（立即（阅读关于[IIFE 这里](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。这不是你的问题的一部分，但只是好的和干净的编码风格。

```
(function() {
  // your code here
})(); 
```

那么我认为你的问题之一是你的 displayImages 函数，你声明但从不调用它！

只是应该在代码末尾调用它（或者直接忽略它）

```
displayImages(); 
```

如果您希望您的图像不在 10-12 和 17-19 之间交换，那么您的代码应该可以按预期工作。如果图像即使在这个时候也应该交换，你不应该把 setInterval 放到最后一个 else （在你的 displayImages-function

# facebook-c#-sdk - 如何在 Win Store 应用中保持登录 Facebook？

> ID：13780348
> 
> 赞同：1
> 
> 时间：2012-12-08T18:14:22.033
> 
> 标签：facebook-c#-sdk

我正在使用 Facebook C# SDK 构建一个与 Facebook 中的数据交互的 Windows Store 应用程序。我关注了示例项目，我可以构建一个应用程序。但我有一个问题。登录页面显示一个复选框“让我保持登录状态”。我选中该框并登录 Facebook。但是每次我启动应用程序时，都会显示登录页面，我必须输入我的帐户。

我使用 Facebook C# SDK 为 Windows Phone7 开发了类似的应用程序。使用该应用程序，我只需登录一次。从第二次开始，它会自动进入内容页面。

如何为 Windows Store App 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:03:52.397

您可以在文件上注册您的 AccessToken 并重复使用它。

我已将 fb 客户端包装在 Singleton 对象中并使用此代码

```
 if (!string.IsNullOrEmpty((string)Windows.Storage.ApplicationData.Current.LocalSettings.Values["AccessToken"]))
        {
            FbClient.Instance.AccessToken = (string)Windows.Storage.ApplicationData.Current.LocalSettings.Values["AccessToken"];
            Frame.Navigate(typeof(FBHomePage)); 
        }
        else
        {
            var s = FbClient.Instance.Login(); //as Sdk example...
        }
        FbClient.Instance.LoginSucced += Instance_LoginSucced; 
```

并在 Instance_LoginSucced

```
 void Instance_LoginSucced(object sender, EventArgs e)
    {

        Windows.Storage.ApplicationData.Current.LocalSettings.Values.Add
        (
            new KeyValuePair<string, object>("AccessToken", FbClient.Instance.AccessToken)
        );

        Frame.Navigate(typeof(FBHomePage));   
    } 
```

# java - 有没有办法在不初始化的情况下创建原始数组？

> ID：13780350
> 
> 赞同：12
> 
> 时间：2012-12-08T18:14:36.590
> 
> 标签：java, arrays

正如我们所知，Java 总是在创建时初始化数组。即`new int[1000000]`总是返回一个所有元素 = 0 的数组。我知道这对于对象数组是必须的，但对于原始数组（可能是布尔值除外），在大多数情况下，我们并不关心初始值。

有人知道避免这种初始化的方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-09T06:32:01.690

我做了一些调查。在 Java 中没有合法的方法来创建未初始化的数组。甚至 JNI NewXxxArray 也会创建初始化数组。所以不可能确切地知道数组归零的成本。尽管如此，我还是做了一些测量：

1) 1000 字节数组创建不同数组大小

```
 long t0 = System.currentTimeMillis();
        for(int i = 0; i < 1000; i++) {
//          byte[] a1 = new byte[1];
            byte[] a1 = new byte[1000000];
        }
        System.out.println(System.currentTimeMillis() - t0); 
```

在我的 PC 上，字节 [1] 的时间 < 1 毫秒，字节 [1000000] 的时间约为 500 毫秒。对我来说听起来很令人印象深刻。

2）我们在JDK中没有快速（原生）的方法来填充数组，Arrays.fill太慢了，所以让我们看看用原生System.arraycopy复制1,000,000大小的数组至少需要多少1000次

```
 byte[] a1 = new byte[1000000];
    byte[] a2 = new byte[1000000];
    for(int i = 0; i < 1000; i++) {
        System.arraycopy(a1, 0, a2, 0, 1000000);
    } 
```

它是 700 毫秒。

它让我有理由相信 a) 创建长数组很昂贵 b) 由于无用的初始化，它似乎很昂贵。

3）让我们以 sun.misc.Unsafe [http://www.javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/misc/Unsafe.html](http://www.javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/misc/Unsafe.html)为例。它可以防止外部使用，但不会太多

```
 Field f = Unsafe.class.getDeclaredField("theUnsafe");
    f.setAccessible(true);
    Unsafe unsafe = (Unsafe)f.get(null); 
```

这是内存分配测试的成本

```
 for(int i = 0; i < 1000; i++) {
        long m = u.allocateMemory(1000000);
    } 
```

如果您还记得的话，它需要 < 1 毫秒，对于新字节 [1000000]，它需要 500 毫秒。

4) Unsafe 没有直接的方法来处理数组。它需要知道类字段，但反射显示数组中没有字段。关于数组内部的信息不多，我猜它是 JVM / 平台特定的。尽管如此，它与任何其他 Java 对象一样，是标头 + 字段。在我的 PC/JVM 上，它看起来像

```
header - 8 bytes
int length - 4 bytes
long bufferAddress - 8 bytes 
```

现在，使用 Unsafe，我将创建 byte[10]，分配一个 10 字节的内存缓冲区并将其用作我的数组元素：

```
 byte[] a = new byte[10];
    System.out.println(Arrays.toString(a));
    long mem = unsafe.allocateMemory(10);
    unsafe.putLong(a, 12, mem);
    System.out.println(Arrays.toString(a)); 
```

它打印

```
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[8, 15, -114, 24, 0, 0, 0, 0, 0, 0] 
```

您可以看到 thay 数组的数据未初始化。

现在我将更改我们的数组长度（尽管它仍然指向 10 字节内存）

```
 unsafe.putInt(a, 8, 1000000);
    System.out.println(a.length); 
```

它显示 1000000。这只是为了证明这个想法有效。

现在进行性能测试。我将创建一个空字节数组 a1，分配一个 1000000 字节的缓冲区，将此缓冲区分配给 a1 并设置 a1.length = 10000000

```
 long t0 = System.currentTimeMillis();
    for(int i = 0; i < 1000; i++) {
        byte[] a1 = new byte[0];
        long mem1 = unsafe.allocateMemory(1000000);
        unsafe.putLong(a1, 12, mem);
        unsafe.putInt(a1, 8, 1000000);
    }
    System.out.println(System.currentTimeMillis() - t0); 
```

它需要 10 毫秒。

5）C++中有malloc和alloc，malloc只是分配内存块，calloc也用零初始化。

cpp

```
...
JNIEXPORT void JNICALL Java_Test_malloc(JNIEnv *env, jobject obj, jint n) {
     malloc(n);
} 
```

爪哇

```
private native static void malloc(int n);

for (int i = 0; i < 500; i++) {
    malloc(1000000);
} 
```

结果 malloc - 78 毫秒；calloc - 468 毫秒

**结论**

1.  由于无用的元素归零，Java 数组的创建似乎很慢。
2.  我们无法改变它，但 Oracle 可以。无需更改 JLS 中的任何内容，只需将本机方法添加到 java.lang.reflect.Array 之类的

    public static native xxx[] newUninitialziedXxxArray(int size);

对于所有原始数字类型（字节 - 双）和字符类型。它可以在整个 JDK 中使用，例如 java.util.Arrays

```
 public static int[] copyOf(int[] original, int newLength) {
        int[] copy = Array.newUninitializedIntArray(newLength);
        System.arraycopy(original, 0, copy, 0, Math.min(original.length, newLength));
        ... 
```

或 java.lang.String

```
 public String concat(String str) {
        ...   
        char[] buf = Array.newUninitializedCharArray(count + otherLen);
        getChars(0, count, buf, 0);
        ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T18:31:40.247

我将把它移到一个答案，因为它可能应该是。

java中的“数组”不是你想象的那样。它不仅仅是指向堆栈或堆上一块连续内存的指针。

Java 中的数组是一个对象，就像其他所有东西（除了原语）一样，位于堆上。当您调用时，`new int[100000]`您正在创建一个新对象，就像其他所有对象一样，它会被初始化，等等。

JLS 提供了有关此的所有特定信息：

[http://docs.oracle.com/javase/specs/jls/se5.0/html/arrays.html](http://docs.oracle.com/javase/specs/jls/se5.0/html/arrays.html)

所以不行。你不能避免“初始化”一个数组。这不是Java的工作方式。根本不存在未初始化的堆内存。许多人称其为“功能”，因为它会阻止您访问未初始化的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-15T22:25:11.013

Java 9 实际上开始暴露这个 via`jdk.internal.misc.Unsafe.allocateUninitializedArray`方法。它实际上需要 JDK.Unsupported 模块[声明](https://dzone.com/articles/using-sunmiscunsafe-in-java-9-1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-03T17:38:55.533

我可以想象 new int[n] 的 O(n) 成本可能是某些数据结构或算法的负担。

在 Java 中为大小为 n 的原始数组分摊 O(1) 内存分配成本的一种方法是使用对象池或其他策略回收分配的数组。对于下一次分配，回收的数组可以被认为是“未初始化的”。

# php - 自动滚动不适用于 Chrome 中的 iframe

> ID：13780352
> 
> 赞同：2
> 
> 时间：2012-12-08T18:14:39.737
> 
> 标签：php, facebook-graph-api

我正在开发一个 Facebook 应用程序，如果用户收到错误弹出窗口，页面应该自动滚动到页面的某个部分（阅读中心）。我已经让它在 Firefox、IE、Safari 上运行，但无法在 Google Chrome 上运行。

现在我正在使用这段代码：

*   document.getElementById('banner').scrollIntoView(true);

    --> 适用于除 Chrome 以外的所有主流浏览器

我已经尝试了以下所有功能以使其在 Chrome 上运行，但没有运气：

*   1.window.scrollTo(100,500);
*   2.parent.window.scroll(0,0);
*   3.parent.frames.window.scrollTo(200,300);
*   4.var rowpos = jQuery('#banner').position();
*   5.jQuery('#iframe_canvas').animate({ scrollTop: jQuery('#banner').offset().top }, { duration: 'slow', easing: 'swing'});

由于这是为了在 Facebook 应用程序上工作，该应用程序由 Facebook 在类似于沙盒的 iframe 中呈现，因此最外面的父窗口无法控制 iframe 内的元素，因此我用完了想法。

如果有人能提出任何意见来帮助我解决这个问题，我将不胜感激，因为它阻碍了我的整个项目的交付:(

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:18:11.963

使用Facebook JS-SDK的[FB.Canvas.scrollTo函数](http://developers.facebook.com/docs/reference/javascript/FB.Canvas.scrollTo/)

# javascript - li项目上的jQuery触摸滑动效果

> ID：13780358
> 
> 赞同：0
> 
> 时间：2012-12-08T18:15:26.277
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 触摸滑动来单击每个 li 项目。这是我的html

```
<div class="slider-active" id="active_885">
<label for="slide1-885"></label>
<label for="slide2-885"></label>
<label for="slide3-885"></label>        
</div> 
```

这是我的脚本

```
jQuery("#slides_885").swipe({
  swipeRight:function(event, direction, distance, duration, fingerCount) {
  jQuery("#active_885 label:first").click();
  },
  swipeLeft:function(event, direction, distance, duration, fingerCount) {
  jQuery("#active_885 label:last").click();
  }
}); 
```

凭借我对 javascript 的一点了解，我可以使上面的脚本在向右滑动时单击第一个标签，并在向左滑动时单击最后一个标签。但我想要的是让脚本单击标签（显示在我上面的 html 中）依次向下，每次向右滑动，向左滑动向上。

希望我能解释这一点。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:32:03.347

您可以创建一个`<label>`项目数组并根据滑动进行迭代。

像这样的东西：

HTML：

```
<div class="slider-active" id="active_885">
    <label class="swipeLabel" for="slide1-885"></label>
    <label class="swipeLabel" for="slide2-885"></label>
    <label class="swipeLabel" for="slide3-885"></label>        
</div> 
```

JavaScript：

```
var active885Labels = jQuery('label.swipeLabel'),
    current885Label = -1;

jQuery("#slides_885").swipe({
    swipeRight: function(event, direction, distance, duration, fingerCount) {
                    if (current885Label < active885Labels.length) {
                        current885Label++;
                        active885Labels[current885Label].click()
                    }
                    else
                    {
                        //we are already at the last label, either wrap around or do nothing, or click the last label again, or do something else
                    }
                },
    swipeLeft: function(event, direction, distance, duration, fingerCount) {
                    if (current885Label > 0) {
                        current885Label--;
                        active885Labels[current885Label].click()
                    }
                    else
                    {
                        //we are already at the first label, either wrap around or do nothing, or click the first label again, or do something else
                    }
                }
}); 
```

# android - onCreate() 在调用 getWritableDatabase() 时没有收到回调

> ID：13780362
> 
> 赞同：0
> 
> 时间：2012-12-08T18:15:33.547
> 
> 标签：android, sqlite, nullpointerexception

当我期待 SQLiteOpenHelper 的 onCreate() 回调时，我遇到了问题。我已经解决了许多相关问题，并尝试实施该建议，但问题仍然存在。

问题是：当我调用 getWritableDatabase() 时出现 NullPointerException。我试图把登录放在onOpen()、onUpgrade()、onCreate()。

我也使用了断点，但除了异常之外什么也没有。

日志如下。12-08 22:05:47.193: D/@gaurav(417): java.lang.NullPointerException 12-08 22:05:47.193: D/@gaurav(417): at com.gaurav.contactmanager.DataBaseHelper.addContact( DataBaseHelper.java:63) 12-08 22:05:47.193: D/@gaurav(417): at com.gaurav.contactmanager.ContactManager.onClick(ContactManager.java:95) 12-08 22:05:47.193: D /@gaurav(417): 在 android.view.View.performClick(View.java:2485) 12-08 22:05:47.193: D/@gaurav(417): 在 android.view.View$PerformClick.run( View.java:9080) 12-08 22:05:47.193: D/@gaurav(417): 在 android.os.Handler.handleCallback(Handler.java:587) 12-08 22:05:47.193: D/@ gaurav(417): 在 android.os.Handler.dispatchMessage(Handler.java:92) 12-08 22:05:47.193: D/@gaurav(417): 在 android.os.Looper.loop(Looper.java: 123) 12-08 22:05:47.193: D/@gaurav(417): 在 android.app.ActivityThread。

代码：DataBaseHelper.java

```
package com.gaurav.contactmanager;
import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DataBaseHelper extends SQLiteOpenHelper {
    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "contactsManager";

    // Contacts table name
    private static final String TABLE_CONTACTS = "contacts";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_PH_NO = "phone_number";

    public DataBaseHelper(Context context) {        
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        Log.d("@gaurav", "database object created but not database...");
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {       
        Log.d("@gaurav", "database creating...");
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER ," + KEY_NAME + " TEXT," + KEY_PH_NO
                + " TEXT PRIMARY KEY" + ")"; // TEXT PRIMARY KEY
        db.execSQL(CREATE_CONTACTS_TABLE);
        Log.d(ContactManagerUtil.TAG_EXIT, ContactManagerUtil.getInstance().getMehtodName());
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.d("@gaurav", "database upgrading...");
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

        // Create tables again
        onCreate(db);
        Log.d(ContactManagerUtil.TAG_EXIT, ContactManagerUtil.getInstance().getMehtodName());
    }

    /**
     * All CRUD(Create, Read, Update, Delete) Operations
     */
    SQLiteDatabase db;
    // Adding new contact
    void addContact(MyContact contact) {
        Log.d(ContactManagerUtil.TAG_ENTER, ContactManagerUtil.getInstance().getMehtodName());

         db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName()); // Contact Name
        values.put(KEY_PH_NO, contact.getNumber()); // Contact Phone

        // Inserting Row
        db.insert(TABLE_CONTACTS, null, values);
        Log.d("@gaurav", "Insert completed..");
        db.close(); // Closing database connection
    }

    public void onOpen(SQLiteDatabase db) {
        Log.d("@gaurav", "onOpen database");
    };
    // Getting single contact
    MyContact getContact(int id) {
        Log.d("@gaurav", "getting contact");

         db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
                KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        MyContact contact = new MyContact(
                Integer.parseInt(cursor.getString(0)), cursor.getString(1),
                cursor.getString(2));
        // return contact
        Log.d("@gaurav", "got contact, now returning ...");
        return contact;
    }

    // Getting All Contacts
    public List<MyContact> getAllContacts() {
        Log.d(ContactManagerUtil.TAG_ENTER, ContactManagerUtil.getInstance().getMehtodName());

        List<MyContact> contactList = new ArrayList<MyContact>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

         db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                MyContact contact = MyContact.getInstance();
                contact.setId(Integer.parseInt(cursor.getString(0)));
                contact.setName(cursor.getString(1));
                contact.setNumber(cursor.getString(2));
                // Adding contact to list
                contactList.add(contact);
            } while (cursor.moveToNext());
        }
        Log.d(ContactManagerUtil.TAG_EXIT, ContactManagerUtil.getInstance().getMehtodName());

        // return contact list
        return contactList;
    }

    // Updating single contact
    public int updateContact(MyContact contact) {
        Log.d(ContactManagerUtil.TAG_ENTER, ContactManagerUtil.getInstance().getMehtodName());

         db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName());
        values.put(KEY_PH_NO, contact.getNumber());
        Log.d(ContactManagerUtil.TAG_EXIT, ContactManagerUtil.getInstance().getMehtodName());

        // updating row
        return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getId()) });
    }

    // Deleting single contact
    public void deleteContact(MyContact contact) {
        Log.d(ContactManagerUtil.TAG_ENTER, ContactManagerUtil.getInstance().getMehtodName());

         db = this.getWritableDatabase();
        db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getId()) });
        db.close();
        Log.d(ContactManagerUtil.TAG_EXIT, ContactManagerUtil.getInstance().getMehtodName());

    }

    // Getting contacts Count
    public int getContactsCount() {
        Log.d(ContactManagerUtil.TAG_ENTER, ContactManagerUtil.getInstance().getMehtodName());

        String countQuery = "SELECT  * FROM " + TABLE_CONTACTS;
         db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();
        Log.d(ContactManagerUtil.TAG_EXIT, ContactManagerUtil.getInstance().getMehtodName());

        // return count
        return cursor.getCount();
    }

} 
```

这是发生异常的方法，可能是因为 db 为空，因为 onCreate() 没有自动调用。

调用完成的活动代码：

```
 public void onClick(View v) {
        Log.d(TAG_ENTER, getMehtodName());
        switch (v.getId()) {
        case R.id.submit:
            try {
                if (contact == null) {
                    contact = MyContact.getInstance();
                }
                contact.setId(id++);
                contact.setName(name.getText().toString());
                contact.setNumber(number.getText().toString());
                if (dbHandler != null) {
                    dbHandler.addContact(contact);
                } else {
                    dbHandler = new DataBaseHelper(getApplicationContext());
                    dbHandler.addContact();
                }
            } catch (Exception ex) {
                Log.d("@gaurav", "Problem while cerating contact", ex);
                Log.wtf("@gaurav", "what ...... :)");
            } finally {
                contact.flush();
                name.setText("");
                number.setText("");
            }
            break;
        case R.id.view:
            // Intent intent = new Intent(this, ContactView.class);
            // startActivity(intent);

            break;
        default:
            break;
        }
        Log.d(TAG_EXIT, getMehtodName());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:50:20.083

> 这是第 63 行：
> 
> ```
> Log.d(ContactManagerUtil.TAG_ENTER, 
>       ContactManagerUtil.getInstance().getMehtodName()); 
> ```

Logcat 声明`ContactManagerUtil.getInstance()`返回 null ...您应该在方法内部开始调试`getInstance()`。此外，您在此方法的名称中有错字：`getMehtodName()`.

（`ContactManagerUtil.getInstance()`如果您仍然需要帮助，请发布。）

# video-streaming - 从网络摄像头流式传输到 RTMP (Mistserver)

> ID：13780364
> 
> 赞同：1
> 
> 时间：2012-12-08T18:15:41.897
> 
> 标签：video-streaming, html5-video, rtmp, flash-video

我已经安装了 Mistserver 并尝试查找如何将视频从网络摄像头发送到 RTMP 的任何教程。许多教程只显示如何接收视频而不是如何发送：-/这里有人工作示例或链接到工作教程吗？HTML5 或 Flash。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:01:17.493

最简单的方法可能是使用 ffmpeg 拉入网络摄像头流并通过 RTMP 传送。

像这样的东西，例如：

ffmpeg -i *<webcam source here>* -acodec aac -ac 2 -strict experimental -ab 160k -vcodec libx264 -preset slow -profile:v baseline -level 30 -maxrate 10000000 -bufsize 10000000 -b 1000k -f flv rtmp:// *<服务器地址>* /play/ *<流名>*

# c++ - 通过 COM 端口与 ModEEG 通信

> ID：13780365
> 
> 赞同：-1
> 
> 时间：2012-12-08T18:15:44.020
> 
> 标签：c++, c, serial-communication

我想与[那里描述固件的设备通信](http://openeeg.sourceforge.net/doc/modeeg/firmware/modeeg-p2.c)

[这](https://gist.github.com/4241153)是我的代码。但在那段代码中，我收到了空值、负数和其他垃圾。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:22:56.673

您应该首先检查以查找消息结构中的第一个同步字节。查找值 0xA5 和 0x5A。当你找到那些你可以开始解码消息的其余部分。

看起来 ModEEG 只是输出稳定的字节流，所以你必须寻找消息开始标记。在解码任何消息之前检查这些可能会很好。

# scala - 如果过滤太多，Scala 的理解？

> ID：13780369
> 
> 赞同：0
> 
> 时间：2012-12-08T18:16:02.940
> 
> 标签：scala, for-comprehension

我有以下程序：（Scala 2.9.2，Java6）

```
object Forcomp {
  def main(args: Array[String]): Unit = {
    val xs = List(-1, 0, 1)
    val xss = for (a <- xs; b <- xs if a != 0 && b != 0) yield (a,b)
    println(xss)
  }
} 
```

它会产生这个输出：`List((-1,-1), (-1,1), (1,-1), (1,1))` 我本来希望它只过滤掉`a`和`b`都是0 的值 - 不是所有的值都是*0**或* 0。`a``b`

我可以通过将 if 子句更改为以下内容来获得我想要的行为：`if (a,b) != (0,0)`– 但是，我真的必须这样做吗？这是一个错误还是这是故意的行为？一方面，我对此感到惊讶。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T18:41:40.373

您拥有的过滤器的真值表是这样的：

```
 a==0  |  b==0 | (a!=0 && b!=0)
--------------------------------
  0    |   0   |      0
  0    |   1   |      0
  1    |   0   |      0
  1    |   1   |      1 
```

而你说你想要的行为是：

```
 a==0  |  b==0 | !(a==0 && b==0)
--------------------------------
  0    |   0   |      0
  0    |   1   |      1
  1    |   0   |      1
  1    |   1   |      1 
```

# java - Java，用嵌入式derby数据库编译程序

> ID：13780370
> 
> 赞同：0
> 
> 时间：2012-12-08T18:16:10.023
> 
> 标签：java, compilation, derby

我在编译使用嵌入式 Derby 数据库的 java 程序时遇到问题。我正在使用 Netbeans，并使用了“清理和构建”选项，它创建了一个 dist 文件夹。我将数据库添加到 dist/resources 文件夹中，我有 derby 连接指向的文件夹：

```
System.setPropert("derby.system.home", System.getProperty("user.dir") + "//resources" 
```

问题是，有些人无法运行该程序。对于某些人来说，只需单击 dist 文件夹中的 .jar 文件即可。对于其他人，它根本不会运行。另外，我已经给了人们整个包，他们在从 Netbeans 运行它时遇到了以下错误：

> -do-compile: [javac] 将 11 个源文件编译到 /home/bull/Desktop/asdfasd/build/classes [javac] 注意：一些输入文件使用未经检查或不安全的操作。[javac] 注意：使用 -Xlint:unchecked 重新编译以获取详细信息。[copy] 复制81个文件到/home/bull/Desktop/asdfasd/build/classes [copy] 复制4个空目录到/home/bull/Desktop/asdfasd/build/classes下1个空目录
> 
> -编译后：
> 
> 编译：
> 
> 运行：[java] java.sql.SQLException：没有为 jdbc:derby:CS242 找到合适的驱动程序 [java] 在 customeremailmanager.CustomerDB.getCustomers(CustomerDB) 的线程“AWT-EventQueue-0”java.lang.NullPointerException [java] 中出现异常.java:105) [java] 在 customeremailmanager.CustomerEmailFrame.(CustomerEmailFrame.java:26) [java] 在 customeremailmanager.CustomerEmailFrame$11.run(CustomerEmailFrame.java:450) [java] 在 java.awt.event.InvocationEvent.dispatch (InvocationEvent.java:251) [java] 在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721) [java] 在 java.awt.EventQueue.access$200(EventQueue.java:103) [java] 在 java. awt.EventQueue$3.run(EventQueue.java:682) [java] 在 java.awt.EventQueue$3.run(EventQueue.java:680) [java] 在 java.security.AccessController.doPrivileged(Native Method) [java] at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) [java] at java.awt.EventQueue.dispatchEvent(EventQueue.java:691) [java] at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) [java] 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) [java] 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) [java] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) [java] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.爪哇：97）doPrivileged(Native Method) [java] at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) [java] at java.awt.EventQueue.dispatchEvent(EventQueue.java:691) [java] at java.awt。 EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) [java] at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) [java] at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) [java] at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) [java] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)doPrivileged(Native Method) [java] at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) [java] at java.awt.EventQueue.dispatchEvent(EventQueue.java:691) [java] at java.awt。 EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) [java] at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) [java] at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) [java] at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) [java] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)doIntersectionPrivilege(ProtectionDomain.java:76) [java] 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:691) [java] 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) [java] 在 java. awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) [java] at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) [java] at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) [java ] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)doIntersectionPrivilege(ProtectionDomain.java:76) [java] 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:691) [java] 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) [java] 在 java. awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) [java] at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) [java] at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) [java ] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)pumpOneEventForFilters(EventDispatchThread.java:244) [java] 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) [java] 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) [java] 在 java. awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) [java] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)pumpOneEventForFilters(EventDispatchThread.java:244) [java] 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) [java] 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) [java] 在 java. awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) [java] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)147) [java] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)147) [java] 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) [java] 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)

那么我可能在这个程序中做错了什么？这是整个包：[http ://wikisend.com/download/969374/CustomerEmailManagerGUI.zip](http://wikisend.com/download/969374/CustomerEmailManagerGUI.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:42:14.287

消息“没有为 jdbc:derby: 找到合适的驱动程序：”通常意味着在 CLASSPATH 中找不到 derby.jar 文件。

您是否将 derby.jar 文件作为应用程序的一部分重新分发？如果是这样，也许该过程没有正确安排 jar 在您的应用程序的 CLASSPATH 中。

# java - 为什么 toString() 方法在 Java 中的 Array 和 ArrayList 对象之间的工作方式不同

> ID：13780374
> 
> 赞同：15
> 
> 时间：2012-12-08T18:16:33.533
> 
> 标签：java, arrays, arraylist, tostring

```
 String[] array = {"a","c","b"};
    ArrayList<String> list = new ArrayList<String>();
    list.add("a");
    list.add("b");
    list.add("c");
    System.out.println(array);
    System.out.println(list); 
```

for`list` `[a, b, c]`是输出，而对于`array`某些地址是输出。当我们想要输出`array`值时，我们可以使用`Arrays.toString(array);`which 就像`list`.

我只是想知道为什么我们不能`toString()`直接调用`array`来获取值。这样做不是更直观方便吗？`Array`和的不同处理会导致什么结果`ArrayList`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-08T18:21:09.747

数组和数组列表之间的主要区别在于，数组列表是一个用 Java 编写的类，并且有自己的实现（包括覆盖的决定`toString`），而数组是语言规范本身的一部分。特别是，[JLS 10.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7)规定：

> 数组类型的成员全部如下：
> 
> *   公共最终字段长度
> *   公有方法clone，覆盖Object类中的同名方法，不抛出检查异常。
> *   继承自类Object的所有成员；Object 唯一不被继承的方法是它的 clone 方法。

换句话说，语言规范防止`toString`数组的方法被覆盖，因此它使用定义的默认实现，`Object`其中打印类名和哈希码。

为什么做出这个决定是一个应该问语言设计者的问题......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T18:20:31.047

> 我只是想知道为什么我们不能直接在数组上调用 toString() 来获取值。

实际上`toString`方法是在数组对象上调用的。但是，由于数组类型不会覆盖类中的`toString`方法`Object`，因此会调用默认实现`toString`，这将返回您看到的表单的表示形式。

表示形式为： -

```
[typeOfArray@hashCode 
```

在你的情况下，它是这样的： -

```
[Ljava.lang.String;@3e25a5 
```

而在实例的情况下，将调用类中`ArrayList`的覆盖`toString`方法。`ArrayList`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-08T15:37:34.040

简短的回答是因为 toString 是在几个不同的地方定义的，具有不同的行为。

Arrays 类将 toString 定义为静态方法，可以像这样调用

```
Arrays.toString(arr_name); 
```

但是 Arrays 类也继承了 Object 类的非静态方法 toString。因此，如果在实例上调用，它会调用 Object.toString，它返回对象的字符串表示形式（例如：[Ljava.lang.Object;@4e44ac6a）

因此 Arrays.toString() 和 MyObject.toString() 正在调用具有相同名称的不同方法。

ArrayList 类继承自 AbstractCollection 类的 toString，它是一个非静态方法，因此可以像这样在对象上调用：

```
MyArrayList.toString(); 
```

因为它是集合而不是对象的字符串表示形式，所以结果是可读格式的值，例如 [一，二]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T18:21:33.313

因为当你打印时`toString()`，它会默认打印`className@HashCode`。

因此，当您打印时`array` ，将打印上面的内容。

但是`ArrayList`被`AbstractCollection`类扩展并且`toString()`方法被覆盖如下

```
 public String toString() {
        Iterator<E> it = iterator();
        if (! it.hasNext())
            return "[]";

        StringBuilder sb = new StringBuilder();
        sb.append('[');
        for (;;) {
            E e = it.next();
            sb.append(e == this ? "(this Collection)" : e);
            if (! it.hasNext())
                return sb.append(']').toString();
            sb.append(',').append(' ');
        }
    } 
```

它打印对象的可读格式`ArrayList`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T18:23:26.203

这是 ArrayList 的 toString 方法调用。但是对于数组你找不到这样的。

```
 /**
 * Returns a string representation of this collection.  The string
 * representation consists of a list of the collection's elements in the
 * order they are returned by its iterator, enclosed in square brackets
 * (<tt>"[]"</tt>).  Adjacent elements are separated by the characters
 * <tt>", "</tt> (comma and space).  Elements are converted to strings as
 * by {@link String#valueOf(Object)}.
 *
 * @return a string representation of this collection
 */
public String toString() {
    Iterator<E> it = iterator();
    if (! it.hasNext())
        return "[]";

    StringBuilder sb = new StringBuilder();
    sb.append('[');
    for (;;) {
        E e = it.next();
        sb.append(e == this ? "(this Collection)" : e);
        if (! it.hasNext())
            return sb.append(']').toString();
        sb.append(',').append(' ');
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-08T18:23:23.027

对于`array` **toString()**方法，它打印内存地址。但是在 `ArrayList`这个类中覆盖了`Object` **toString()**方法。

**ArrayList 的 toString() 实现**

```
 public String toString() {
    Iterator<E> i = iterator();
    if (! i.hasNext())
        return "[]";

    StringBuilder sb = new StringBuilder();
    sb.append('[');
    for (;;) {
        E e = i.next();
        sb.append(e == this ? "(this Collection)" : e);
        if (! i.hasNext())
        return sb.append(']').toString();
        sb.append(", ");
    }
} 
```

# algorithm - 最小差分补丁算法

> ID：13780381
> 
> 赞同：3
> 
> 时间：2012-12-08T18:17:35.030
> 
> 标签：algorithm, levenshtein-distance, delta

我试图传达两个字节流之间的区别。我想尽量减少补丁中的字节数。

（我不一定要最小化差异中的“变化”数量，这是 levenshtein 距离计算中的最佳补丁会给我的。）

理想情况下，补丁的格式应使得在给定源字节流和差异的情况下，很容易重建目标字节流。

有没有一个很好的算法来做到这一点？

* * *

编辑：为了记录，我尝试发送“在点 506，插入以下字节......”形式的更改，我从 levenshtein 距离算法创建一个更改列表。

我遇到的问题是 levenshtein 距离算法给了我很多变化，例如：

```
at spot 506 substitute [some bytes1]
at spot 507 do nothing
at spot 508 substitute [some bytes2]
at spot 509 do nothing
at spot 510 substitute [some bytes3]
... 
```

这是因为 lev 距离算法试图最小化变化的数量。然而，就我的目的而言，这个指令集是浪费的。如果算法只是说，可能会更好，

```
At spot 506 substitute [some bytes1, [byte at spot 507], some bytes2, [byte at spot 509], some bytes3, ...] 
```

可能有一些方法可以修改 lev 距离以支持这些类型的更改，但这似乎有点棘手。我可以在获得变更列表后合并替换（我将尝试这样做），但也可能有机会合并删除/插入，而且如何正确地做到这一点不太明显。

只是想知道是否有专门的算法来解决这个问题（或者是否有人已经对 lev 距离进行了修改以支持这些类型的更改）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:47:00.043

您可以使用**具有仿射间隙成本的成对对齐**来执行此操作，这两个长度分别为 n 和 m 的字符串需要 O(nm) 时间。

*首先是一件事：就使用的位或字节而言，*无法找到可证明的最小补丁。那是因为如果有这样的方法，那么`shortest_patch(x, y)`计算它的函数可以`s`通过调用它来找到任何给定字符串的可证明最小压缩`shortest_patch('', s)`，并且 Kolmogorov 复杂性告诉我们给定字符串的最短可能压缩在形式上是不可计算的. 但是，如果编辑倾向于在空间中聚集，就像它们似乎在这里一样，那么肯定有可能找到比使用通常的 Levenshtein 距离算法生成的更小的补丁。

## 编辑脚本

补丁在 CS 中通常称为“编辑脚本”。`x`找到用于将一个字符串转换为另一个字符串的最小（就插入次数加上删除次数而言）编辑脚本`y`等效于找到最佳*成对对齐方式*，其中每对相等的字符都有值 0，每对不相等的字符都有值-inf，并且一个字符串中的字符与`-`间隙字符对齐的每个位置的值都为 -1。对齐很容易可视化：

```
st--ing    st-i-ng
stro-ng    str-ong 
```

这些是字符串`sting`和的 2 个最佳对齐方式`strong`，每个在模型下的成本为 -3。如果不等字符对的值是 -1 而不是 -inf，那么我们得到的对齐成本等于 Levenshtein 距离（插入的数量，加上删除的数量，加上替换的数量）：

```
st-ing    sti-ng
strong    strong 
```

这些是新模型下的 2 个最佳对齐方式，每个的成本为 -2。

要查看它们如何与编辑脚本对应，我们可以将顶部字符串视为“原始”字符串，将底部字符串视为“目标”字符串。包含不相等字符对的列对应于替换，`-`顶行包含 a 的列对应于字符的插入，`-`底行包含 a 的列对应于字符的删除。您可以使用“指令”(C)opy、(D)elete、(I)nsert 和 (S)ubstitute 从对齐创建编辑脚本。每条指令后跟一个数字，表示从对齐中消耗的列数，在 I 和 S 的情况下，相应的插入或替换字符数。例如，前 2 个对齐的编辑脚本是

```
C2, I1"r", S1"o", C2     and     C2, S1"r", I1"o", C2 
```

## 增加聚束

现在如果我们有像`mississippi`and这样的字符串`tip`，我们会发现这两个对齐

```
mississippi
------tip--

mississippi
t---i----p- 
```

两者都具有相同的 -9 分：它们都需要相同的插入、删除和替换总数。但是我们更喜欢上面那个，因为它的编辑脚本可以更简洁地描述：`D6, S1"t", C2, D2`. 第二个的编辑脚本是`S1"t", D3, C1, D4, C1, D1`.

为了让对齐算法也“更喜欢”第一个对齐，我们可以调整间隙成本，以便*开始一个间隙块的成本高于继续一个现有的间隙块*。如果我们使包含间隙的列在前一列不包含间隙时花费 -2 而不是 -1，那么我们实际上正在做的是惩罚连续的间隙块的数量（因为每个连续的间隙块显然必须有第一个位置）。在这个模型下，上面的第一个对齐现在花费 -11，因为它包含两个连续的间隙块。第二个对齐现在花费 -12，因为它包含三个连续的间隙块。IOW，该算法现在更喜欢第一次对齐。

这个模型，其中每个对齐的位置包含一个间隙成本 g 并且任何连续的间隙列块中的第一个位置成本 g + s，被称为仿射间隙成本模型，Gotoh 给出了一个 O(nm) 算法1982 年：[http](http://www.genome.ist.i.kyoto-u.ac.jp/~aln_user/archive/JMB82.pdf) ://www.genome.ist.i.kyoto-u.ac.jp/~aln_user/archive/JMB82.pdf 。增加间隙开放成本 s 将导致对齐的段聚集在一起。您可以使用各种成本参数，直到获得经验上看起来正确且足够小的对齐（对应于补丁）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:45:27.223

解决此类问题有两种方法：

1）为（在这种情况下编辑脚本）建立一种语言`X`，并弄清楚如何最小化适用句子的长度；或者，

2）计算（字符串差异）的某种最小表示`Y`，然后想出一种以最短形式表示的方法。

Myers 论文表明，对于特定语言，找到最小变化集和找到变化表示的最小长度是同一个问题。

显然，更改语言可能会使该假设无效，并且正确应用某些更改可能非常复杂（例如，假设语言包含原语`kP`，这意味着删除`k`索引为素数的下一个字符。对于某些差异，使用该原语可能结果证明是一个巨大的胜利，但应用程序可能很少见。这是一个荒谬的例子，我知道，但它表明了从一门语言开始的困难。

所以我建议从最小更改列表开始，它标识插入和删除。我们以直接的方式将其转换为一串命令，其中正好有三个。这里没有索引。这个想法是我们从原始字符串开头的光标开始，然后依次执行命令。命令是：

```
=  Advance the cursor without altering the character it points to
Ic Insert the character `c` before the cursor.
D  Delete the character at the cursor. 
```

虽然我说只有三个命令，但这并不完全正确；实际上，字母表的大小在`A+2`哪里。`A`

这可能会导致这样的字符串：

```
=========================IbIaInIaInIaDD=D=D============================ 
```

现在，让我们尝试压缩它。首先，我们运行长度编码（RLE），这样每个命令前面都有一个重复计数，并且我们删除了尾随`=`的 s

```
27=1Ib1Ia1In1Ia1In1Ia2D1=1D1=1D 
```

（实际上，RLE 重新创建了索引，尽管它们是相对的而不是绝对的）。

最后，我们使用 zlib 来压缩生成的字符串。我不打算在这里这样做，只是为了说明它可能会产生的压缩类型：

```
27=1Ib1Ia1In||2D1=1D|
      ______+|  ____+
      ___<---+ 
```

（试图显示反向引用。这不是很好的 ascii 艺术，抱歉。）

Liv-Zempell 非常擅长发现和优化意外重复。事实上，我们可以直接使用它而不是执行中间 RLE 步骤，但经验表明，在 RLE 非常有效的情况下，LZ 比源更好。但是值得尝试两种方法来查看对您的应用程序更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:41:13.007

使用很少字节（尽管不一定是理论上的最佳字节数）的常见方法如下：

1.  用一些字符（可能为零）填充字节，直到它们具有相同的长度。
2.  XOR 两个流在一起。这将导致字节流在所有字节相同的地方为零，否则为非零。
3.  使用任何压缩算法压缩 XORed 流，可能类似于 LZW。

假设您拥有的补丁是对文件一小部分的本地化更改集，这将导致一个非常短的补丁，因为文件的大部分将为零，可以有效地压缩。

要应用补丁，您只需解压缩 XORed 字符串，然后将其与字节流 XOR 以进行补丁。这计算

原始异或（原始异或新）=（原始异或原始）异或新=新

因为 XOR 是关联和自反转的。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T07:17:33.797

有一种新的有前途的变化检测方法。序列对齐问题被认为是协作文本编辑中变化检测的抽象模型，旨在最小化合并冲突的概率。一个新的成本函数被定义为检测到的变化和随机字符串之间的交叉概率。结果应该比其他已知方法更类似于补丁长度最小化。它避免了 LCS 和其他方法的已知缺点。三次算法已被提出。 [http://psta.psiras.ru/read/psta2015_1_3-10.pdf](http://psta.psiras.ru/read/psta2015_1_3-10.pdf)

# php - 数据持有者应该有什么可见性？

> ID：13780382
> 
> 赞同：0
> 
> 时间：2012-12-08T18:17:49.137
> 
> 标签：php, design-patterns

我想知道什么样的可见性会给使用数据映射模式提供最佳实践？

私有/公共/受保护

受保护时，我需要在映射器类的 save() 方法中使用 getters()。

如果私有和公共我将能够做 $user->id; 在映射器类中。什么最有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:24:00.780

在我看来，我经常以这种方式使用它，属性受到保护，我的类对 getter 和 setter 使用魔术方法。我这样做的方式你可以做到这两点。我最喜欢使用`setter`-methods 的地方是使用流畅的接口。

```
/**
 * Handling non existing getters and setters
 *
 * @param string $name
 * @param array $arguments
 * @throws Exception
 */
public function __call($name, $arguments)
{
    $type = substr($name, 0, 3);

    // Check if this is a getter or setter
    if (in_array($type, array('get', 'set'))) {
        $property = lcfirst(substr($name, 3));

        // Only if the property exists we can go on
        if (property_exists($this, $property)) {
            switch ($type) {
                case 'get':
                    return $this->$property;
                    break;

                case 'set':
                    $this->$property = $arguments[0];
                    return $this;
                    break;
            }
        } else {
            throw new \Exception('Unknown property "' . $property . '"');
        }
    } else {
        throw new Exception('Unknown method "' . $name . '"');
    }
}

/**
 * Magic Method for getters
 *
 * @param string $name
 * @return mixed
 */
public function __get($name)
{
    $method = 'get' . ucfirst($name);
    return $this->$method();
}

/**
 * Magic Method for setters
 *
 * @param string $name
 * @param mixed $value
 */
public function __set($name, $value)
{
    $method = 'set' . ucfirst($name);
    return $this->$method($value);
} 
```

使用流畅的接口看起来像这样：

```
$post->setTitle('New Post')
     ->setBody('This is my answer on stackoverflow.com'); 
```

关于单一可能性的一些想法：

## 私人的

使用私有属性会阻止我扩展我的模型类和重用某些功能。

## 上市

将无法拦截对变量的更改。有时需要在设置上做一些事情。

## 受保护

对我来说最好的方式。这些属性不可公开更改，我强迫其他开发人员为其具有附加功能的属性编写 getter 和 setter。同样在我看来，这样可以防止其他人在滥用您的模型类时犯错误。

# c++ - 将任何 Unicode 字符串转换为 int

> ID：13780391
> 
> 赞同：1
> 
> 时间：2012-12-08T18:18:41.897
> 
> 标签：c++, qt, unicode, numbers

我有一个表示数字的任意 Unicode 字符串，例如“2”、“٢”（U+0662，阿拉伯印度数字二）或“Ⅱ”（U+2161，罗马数字二）。我想将该字符串转换为int。我不关心特定的语言环境（输入可能不在当前语言环境中）；如果它是一个有效的数字，那么它应该被转换。

我试过`QString.toInt`and `QLocale.toInt`，但他们似乎没有完成工作。例子：

```
bool ok;
int n;
QString s = QChar(0x0662); // ARABIC-INDIC DIGIT TWO

n = s.toInt(&ok); // n == 0; ok == false

QLocale anyLocale(QLocale::AnyLanguage, QLocale::AnyScript, QLocale::AnyCountry);
n = anyLocale.toInt(s, &ok); // n == 0; ok == false

QLocale cLocale = QLocale::C;
n = cLocale.toInt(s, &ok); // n == 0; ok == false

QLocale arabicLocale = QLocale::Arabic; // Specific locale. I don't want that.
n = arabicLocale.toInt(s, &ok); // n == 2; ok == true 
```

有我缺少的功能吗？

我可以尝试所有语言环境：

```
QList<QLocale> allLocales = QLocale::matchingLocales(QLocale::AnyLanguage, QLocale::AnyScript, QLocale::AnyCountry);
for(int i = 0; i < allLocales.size(); i++)
{
    n = allLocales[i].toInt(s, &ok);
    if(ok)
        break;
} 
```

但这感觉有点骇人听闻。此外，它不适用于所有字符串（例如罗马数字，但这是可以接受的限制）。这样做是否有任何陷阱，例如不同语言环境中的冲突规则（参见土耳其语与非土耳其语字母大小写规则）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T19:38:05.323

我不知道有任何现成的包可以做到这一点（但也许 ICU 支持它），但如果你真的想这样做并不难。[首先，您应该从http://www.unicode.org/Public/UNIDATA/UnicodeData.txt](http://www.unicode.org/Public/UNIDATA/UnicodeData.txt)下载 UnicodeData.txt 文件。这是一个易于解析的 ASCII 文件；确切的语法在[http://www.unicode.org/reports/tr44/tr44-10.html](http://www.unicode.org/reports/tr44/tr44-10.html)中进行了描述，但出于您的目的，您只需要知道文件中的每一行都由分号分隔的字段组成. 第一个字段包含十六进制的字符代码，第三个字段是“一般类别”，如果第三个字段是“Nd”（数字，十进制），第七个字段包含十进制值。

可以使用 Python 或许多其他脚本语言轻松解析此文件，以构建映射表。您将需要某种稀疏表示，因为有超过一百万个 Unicode 字符，其中很少（几百个）是十进制数字。以下 Python 脚本将为您提供一个 C++ 表，该表可用于初始化 `std::map<int, int>`;。如果字符在映射中，映射的元素就是它的值。

这是否足够取决于您的应用程序。它有几个弱点：

*   当两个连续的数字在不同的字母表中时，它需要额外的逻辑来识别。据推测，一个序列`"1١"` 应该被视为两个数字（1 和 1），而不是一个（11）。（因为所有的十进制数字集都在 10 个连续的代码中，一旦你知道了数字，就很容易检查前面的数字字符是否在同一个集合中。）

*   它会忽略非十进制数字，例如 ௰ 或 ൱（泰米尔语 10 和马来语 100）。它们的数量并不多，而且它们也在 UnicodeData.txt 文件中，因此可以手动找到它们并将它们添加到表中。但是，我不知道自己在组成数字时如何与其他数字结合。

*   如果你正在转换数字，你可能不得不担心方向。我不确定这是如何处理的（但 Unicode 站点上有文档）；通常，文本会以其自然顺序出现。在阿拉伯语和相关语言的情况下，当以自然顺序阅读时，低位数字首先出现：类似`"١٢"`（字面意思是`"12"`，但由于书写是从右到左，数字将按顺序出现`"21"`）应该解释为12，而不是 21。除了我不确定是否存在更改方向标记。（确切的规则在 Unicode 站点的文档中进行了描述；在 UnicodeData.txt 文件中，第五个字段——索引 4——给出了这个信息。我想如果它不是`"AN"`，您可以假设欧洲使用的大端标准，但我不确定。）

只是为了说明这是多么简单，这是用于解析 UnicodeData.txt 文件以获取数字值的 Python 脚本：

```
print('std::pair<int, int> initUnicodeMap[] = {')
for line in open("UnicodeData.txt"):
    fields = line.split(';')
    if fields[2] == 'Nd':
        print('    {{{:d}, {:d}}},'.format(int(fields[0], 16), int(fields[7])))
print('};') 
```

如果您正在使用 Unicode 进行任何工作，那么此文件是生成各种有用表格的金矿。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T19:25:10.700

您可以使用以下方法获取 unicode 字符的数字等价物`QChar::digitValue`：

```
int value = QChar::digitValue((uint)0x0662); 
```

`-1`如果字符没有数值，它将返回。

如果您需要更多帮助，请参阅[文档](http://doc.qt.digia.com/qt/qchar.html#digitValue)，我对 c++/qt 不太了解

* * *

那篇维基百科文章中提到的中文数字属于`0x4E00-0x9FCC`. 此范围内没有关于单个字符的有用元数据：

```
4E00;<CJK Ideograph, First>;Lo;0;L;;;;;N;;;;;
9FCC;<CJK Ideograph, Last>;Lo;0;L;;;;;N;;;;; 
```

所以如果你想把中国数字映射成整数，你必须自己做映射，就这么简单。

这是维基百科文章中符号的简单映射，其中单个符号映射到某个单个数字：

```
0x96f6,0x3007 = 0
0x58f9,0x4e00,0x5f0c = 1
0x8cb3,0x8d30,0x4e8c,0x5f0d,0x5169,0x4e24 = 2
0x53c3,0x53c1,0x4e09,0x5f0e,0x53c3,0x53c2,0x53c4,0x53c1 = 3
0x8086,0x56db,0x4989 = 4
0x4f0d,0x4e94 = 5
0x9678,0x9646,0x516d = 6
0x67d2,0x4e03 = 7
0x634c,0x516b = 8
0x7396,0x4e5d = 9
0x62fe,0x5341,0x4ec0 = 10
0x4f70,0x767e = 100
0x4edf,0x5343 = 1000
0x842c,0x842c,0x4e07 = 10000
0x5104,0x5104,0x4ebf = 100000000

0x5e7a = 1
0x5169,0x4e24 = 2
0x5440 = 10
0x5ff5,0x5eff = 20
0x5345 = 30
0x534c = 40
0x7695 = 200

0x6d1e = 0
0x5e7a = 1
0x4e24 = 2
0x5200 = 4
0x62d0 = 7
0x52fe = 9 
```

# java - Java 构造函数脚本

> ID：13780394
> 
> 赞同：1
> 
> 时间：2012-12-08T18:19:08.107
> 
> 标签：java, object, constructor, declaration

有人知道基于构造函数创建 java 对象的现有脚本吗？

我正在考虑写一个，但决定看看是否已经存在，因为它看起来很简单。

基本上java对象的一个​​常见组件涉及编写

1.  `public class nameofObject`IDE 通常会处理 package 语句和 class 语句。

2.  创建私有变量

3.  使用传入的那些变量的相同名称创建构造函数

4.  制作 getter 和 setter

5.  决定将私有变量分配给构造函数中的局部变量，即

    ```
    public nameofObject(String a, String b, String c){
        this.a = a;
        this.b = b;
        this.c = c;
    } 
    ```

这个过程非常可预测（非常适合脚本）并且可能很乏味（也适合计算机）

该示例只有 3 个变量，但对象可以有 20 个或数百个变量。

我还没有看到 IDE 或脚本根据其构造函数自动创建整个对象，但这会非常方便，我正在考虑用 python 或 ant 或 bash 编写脚本来执行此操作。

但在我重新发明轮子之前，你见过这样做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:36:16.873

只要您为构造函数创建参数，[Eclipse就可以帮助您。](http://eclipse.org/)

可以使用新建类向导 (1) 创建新类（带有包定义）。

`Ctrl`+`1`或`Command`+`1`可以：

*   当光标位于构造函数参数中时按下时，创建包括私有变量的字段分配 (2, 5)

*   在光标位于字段中时按下时创建 setter/getter (4)

这需要多个动作/按键，但非常快速和方便，并且非常灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:36:18.853

每个像样的 IDE 都应该在很大程度上帮助您。IntelliJ IDEA 中的示例：

# 使用构造函数创建一个类

IDE 显示未使用构造函数参数的警告。点击`Alt`+ `Enter`：

![创建字段](../Images/72048898f6bbfae2fd972fc997cd34ea.png)

# 选择字段

哪些构造函数参数应该转换为字段？

![参数](../Images/1e0a402b5415b0d58067828254d3faec.png)

# 获取器和可选的设置器

在课堂上的任何地方点击`Alt`+ ：`Insert`

![创建获取/设置](../Images/5d8030b5732fa7aaac10734d02f9452c.png)

# 选择字段以创建 getter 和 setter

![选择字段](../Images/f516ad63e8d1b085374a4a8e9b4287db.png)

IntelliJ还可以帮助您编写`toString()`和.`equals()``hashCode()`

* * *

...或考虑[scala](/questions/tagged/scala "显示标记为“scala”的问题")？

```
case class NameOfObject(var a: String, var b: String, var c: String) 
```

上面的声明创建了`NameOfObject`具有三个字段的类，getter setter（用于`@BeanProperty`遵循 POJO 约定）`toString()`，`equals()`并且`hashCode()`已经实现。在一条线上。

# compiler-errors - 无法安装 omentpp 4.1

> ID：13780395
> 
> 赞同：4
> 
> 时间：2012-12-08T18:19:17.500
> 
> 标签：compiler-errors, omnet++

我正在尝试安装 omnetpp 4.1（无法安装新版本）。无论如何，运行`./configure`不会报告错误或警告，但是当我运行时，`make`我会得到以下信息：

```
make MODE=release
make[1]: Entering directory `/home/yotam/omnetpp-4.1'
***** Configuration: MODE=release, TOOLCHAIN_NAME=gcc, LIB_SUFFIX=.so ****
===== Checking environment =====
mkdir -p /home/yotam/omnetpp-4.1/bin
===== Compiling utils ====
cd /home/yotam/omnetpp-4.1/src/utils && make
make[2]: Entering directory `/home/yotam/omnetpp-4.1/src/utils'
g++ abspath.cc -o /home/yotam/omnetpp-4.1/out/gcc-release/src/utils/abspath
abspath.cc: In function ‘std::string toAbsolutePath(const char*)’:
abspath.cc:62:38: error: ‘getcwd’ was not declared in this scope
make[2]: *** [/home/yotam/omnetpp-4.1/out/gcc-release/src/utils/abspath] Error 1
make[2]: Leaving directory `/home/yotam/omnetpp-4.1/src/utils'
make[1]: *** [utils] Error 2
make[1]: Leaving directory `/home/yotam/omnetpp-4.1'
make: *** [allmodes] Error 2 
```

如果重要的话，我正在运行 ununtu 12.10。似乎是代码错误，对吧？

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-30T07:06:50.787

编辑文件`src/utils/abspath.cc`并手动添加以下内容：

```
#include <unistd.h> 
```

保存并再次编译。问题解决了。

# android - 制作 Freehand Cropping Android

> ID：13780398
> 
> 赞同：0
> 
> 时间：2012-12-08T18:19:27.910
> 
> 标签：android

如何在android中实现图像的徒手裁剪而不是使用通常的矩形裁剪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:54:11.603

您可以通过以下方式进行操作。

```
 BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();
        Bitmap bitmap = drawable.getBitmap();

        ArrayList<Point> regionPoints = new ArrayList<Point>();  // the output region to be filled affter the crop;

       int h  = bitmap.getHeight();
       int w  =  bitmap.getWidth();
       boolean isInsideRegion = false;
        for (int i = 0; i < h; i++) {
            for (int j = 0; j < w; j++) {
               if(bitmap.getPixel(j, h) == Color.WHITE){
                   regionPoints.add(new Point(j, h)); // the points where pixel color is white 
               }                                      // as pixels are replaced in orinal image while the finger is mover overe the image
            }                                         // write the pixel replacement code your self Google for it :)
        } 
```

获得路径数组列表后，您可以创建一个新位图，并通过从原始图像中读取像素来用该路径中的像素填充该位图。

# html - HTML Favicon.ico 不会在 Google Chrome 上显示

> ID：13780402
> 
> 赞同：66
> 
> 时间：2012-12-08T18:19:34.207
> 
> 标签：html, google-chrome, hyperlink, favicon

我正在制作一个 HTML 页面，我想要的一件事是在标题旁边出现一个图标。

我正在使用谷歌浏览器，我看到网站图标在其他网站上工作，但我网站上的网站图标不会显示。该站点位于我桌面上名为站点的文件夹中。

该`favicon.ico`文件为 16x16，我使用在线生成器制作。

这是代码：

```
<!DOCTYPE html>
<html> 
    <head>
        <title></title>
        <link rel="shortcut icon" href="/favicon.ico" />
    </head>
    <body>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-08T18:23:53.040

由于您的 href 中有前导`/`，因此您引用的文件将位于根文件夹中。如果您将页面放在计算机上的文件夹中，而不是从本地网络服务器提供它，则引导`/`将告诉浏览器查看文件系统的根文件夹。所以浏览器期望文件是等于`C:/favicon.ico`或相似的，这可能不是你所期望的。

如果您`favicon.ico`与网页位于同一文件夹中，则可以删除前导斜杠，并且该图标应该可见。

```
<link rel="shortcut icon" href="favicon.ico" /> 
```

**更新：**

作为调试选项，您可以尝试添加一个您知道有效的标签。我从 StackOverflow 源中借用了这个片段。尝试用这个替换你的链接标签，看看你是否将 SO 标志作为你的图标。

```
<link rel="shortcut icon" 
      href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico"> 
```

**更新 2：**

似乎在 Chromium 上[报告了一个错误](http://code.google.com/p/chromium/issues/detail?id=51270)，如果文件在本地加载，而不通过网络服务器提供服务，则不会显示网站图标。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-04-02T21:43:52.517

我发现（在 Chrome 56，OSX 上）favicon 状态似乎在浏览器的生命周期内被缓存，所以如果没有加载 favicon，直到**重新启动 Chrome 后**才会加载。它似乎没有出现在开发工具的“应用程序”选项卡中，也没有被硬重新加载或“清除站点数据”清除。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-04-21T05:40:38.100

如果您的 .htaccess 例如读取： `ExpiresByType image/x-icon "access plus 1 month"`

然后只需将随机值添加到您的 favicon 参考： `<link rel="shortcut icon" href="https://example.com/favicon.ico?r=31241" type="image/x-icon" />`

即使有大量缓存，每次都对我有用。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-08-16T09:50:14.570

Chrome 不显示 favicon 的另一个原因是它仍然记得相关站点没有 favicon 或 favicon 配置不正确的时间。

您将要完全擦除 favicon 缓存：

1.  退出所有正在运行的 Chrome 进程。

2.  删除`Favicons`用户数据文件夹中的文件。例如：

    ```
    C:\Users\me\AppData\Local\Google\Chrome\User Data\Default\Favicons 
    ```

这无法通过清除浏览器缓存来解决，因为它不会影响`Favicons`容器。

另请注意，与您可能[在线](https://bugs.chromium.org/p/chromium/issues/detail?id=110449)[阅读](https://plus.google.com/+FrancoisBeaufort/posts/WcjHyBQ7APh) 的内容相反，对网站图标资源的请求*不会*显示在 DevTools 的网络面板中。在极少数情况下，*可能会*出现一个这样的请求，但这种可能性极小，并且 DevTools 不会帮助您解决 favicon 问题。

 *** * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-11T18:59:14.173

1）清除你的chache。[http://support.google.com/chrome/bin/answer.py?hl=en&answer=95582](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95582)并测试另一个浏览器，比如说 safari。你是如何导入网站图标的？

2）你应该如何添加它：

正常的网站图标：

```
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /> 
```

PNG/GIF 图标：

```
<link rel="icon" type="image/gif" href="favicon.gif" />
<link rel="icon" type="image/png" href="favicon.png" /> 
```

3）另一件事可能是**chrome无法显示**网站图标的问题，**如果它是本地的**（未上传到网络服务器）。

4）尝试将其重命名为`favicon.{whatever}`to`{yourfaviconname}.{whatever}`但我建议您仍然使用正常的图标。这解决了我在 IE 上的问题。

5）找到另一个解决方案，效果很好！我只是将我的网站图标添加为 Base64 编码图像直接在标签内，如下所示：

```
<link href="data:image/x-icon;base64,AAABAAIAEBAAAAEAIABoBAAAJgAAACAgAAABACAAqBAAAI4EAAAoAAAAEAAAACAAAAABACAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AIaDgv+Gg4L/hoOC/4aDgv+Gg4L/hoOC/4aDgv+Gg4L/hoOC/4aDgv////8A////AP///wD///8A////AP///wCGg4L/////AP///wD///8A////AP///wD///8A////AP///wCGg4L/////AP///wD///8A////AP///wD///8AhoOC/////wCGg4L/hoOC/4aDgv+Gg4L/hoOC/4aDgv////8AhoOC/////wD///8A////AP///wD///8A////AIaDgv////8A////AP///wD///8A////AP///wD///8A////AIaDgv////8A////AP///wD///8A////AP///wCGg4L/////AHCMqP9wjKj/cIyo/3CMqP9wjKj/cIyo/////wCGg4L/////AP///wD///8A////AP///wD///8AhoOC/////wBTlsIAU5bCAFOWwgBTlsIAU5bCM1OWwnP///8AhoOC/////wD///8A////AP///wD///8A////AP///wD///8AU5bCBlOWwndTlsLHU5bC+FOWwv1TlsLR////AP///wD///8A////AP///wD///8A////AP///wD///8A////AFOWwvtTlsLuU5bCu1OWwlc2k9cANpPXqjaT19H///8A////AP///wD///8A////AP///wD///8A////AP///wBTlsIGNpPXADaT1wA2k9dINpPX8TaT1+40ktpDH4r2tB+K9hL///8A////AP///wD///8A////AP///wD///8A////ADaT1wY2k9e7NpPX/TaT16AfivYGH4r23R+K9u4tg/WQLoL1mP///wD///8A////AP///wD///8A////AP///wA2k9fuNpPX5zaT1zMfivYGH4r23R+K9uwjiPYXLoL1+S6C9W7///8A////AP///wD///8A////AP///wD///8ANpPXLjaT1wAfivYGH4r22x+K9usfivYSLoL1oC6C9esugvUA////AP///wD///8A////AP///wD///8A////AP///wD///8AH4r2zx+K9usfivYSLoL1DC6C9fwugvVXLoL1AP///wD///8A////AP///wD///8A////AP///wD///8A////AB+K9kgfivYMH4r2AC6C9bEugvXhLoL1AC6C9QD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAugvXyLoL1SC6C9QAugvUA////AP//AADgBwAA7/cAAOgXAADv9wAA6BcAAO+XAAD4HwAA+E8AAPsDAAD8AQAA/AEAAP0DAAD/AwAA/ycAAP/nAAAoAAAAIAAAAEAAAAABACAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AISEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/////wD///8AhISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP8AAAAA////AISEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AISEhP+EhIT/////AP///wCEhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/wAAAAD///8AhISE/4SEhP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP/4+vsA4ujuAOLo7gDi6O4A4ujuAN3k6wDZ4OgA2eDoANng6ADZ4OgA2eDoANng6ADW3uYAJS84APj6+wCEhIT/hISE/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/9Xd5QBwjKgAcIyoRnCMqGRwjKhxcIyogHCMqI9wjKidcIyoq3CMqLlwjKjHcIyo1HCMqLhogpwA/f7+AISEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AISEhP+EhIT/xtHcAHCMqABwjKjAcIyo/3CMqP9wjKj/cIyo/3CMqP9wjKj/cIyo/3CMqP9wjKj/cIyo4EdZawD///8AhISE/4SEhP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP+2xNMAcIyoAHCMqJhwjKjPcIyowHCMqLFwjKijcoymlXSMpIh0jKR6co2mbG+OqGFqj61zXZO4AeXv9gCEhIT/hISE/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/6i5ygDF0dwAIiozACQyPQAoP1AALlBmADhlggBblLkGVJbBPFOWwnxTlsK5U5bC9FOWwv9TlsIp3erzAISEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAALztHAAAAAAAuU2sAU5bCClOWwkNTlsKAU5bCwFOWwvhTlsL/U5bC/1OWwv9TlsL/U5bC/ViVvVcXOFAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAALDhEALVFoAFOWwjpTlsL6U5bC/1OWwv9TlsL/U5bC/1OWwvxTlsLIV5W+i2CRs0xHi71TKYzUnyuM0gIJHi4AAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAACtNZABTlsIAU5bCD1OWwv1TlsL6U5bCxFOWwoRVlsBHZJKwDCNObAA8icJAKYzUwimM1P8pjNT/KYzUWCaCxgALLUsAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAApS2EAU5bCAFOWwgBTlsIAU5bCNVOWwgg+cJEAIT1QABU/XQA1isg4KYzUuymM1P8pjNT/KYzU/ymM1LAti9E0JYvmDhdouAAAAAAAAAAAAP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AFyk1AE+PuQBTlsIAU5bCAER7nwAmRVoADBojABRFaQAwi80xKYzUsymM1P8pjNT/KYzU/ymM1LgsjNE2MovXFB+K9MUfivbBH4r2BgcdNAARQH8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAQIDABIgKgAPGiIABRMcABdQeQAti9AqKYzUrCmM1P8pjNT/KYzU/ymM1MAqjNM9HmqmACWK7SIfivbZH4r2/x+K9vsuiudAFE2YACB69AD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAABhQfABtejgAoitEAKYzUACmM1JQpjNT/KYzU/ymM1MgpjNREH2mgABlosQAfivY0H4r26R+K9v8fivbyKIrtR0CB1SggevTQIHr0Nv///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAACBwsAJX2+ACmM1AApjNQAKYzUGSmM1MYpjNRMInWxABNHdQAcfuEAH4r2Sx+K9vUfivb/H4r25iGK9DE2gt4EIHr0yyB69P8gevTQ////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAAAAAAAAOMUsAKYzUACmM1AApjNQAJX6/ABE7WgAUWJwAH4r2AB+K9mYfivb9H4r2/x+K9tYfivYfG27RACB69HsgevT/IHr0+yB69DL///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAAfaJ4AJ4XKABVGagAKKkoAG3raAB+K9gEfivaEH4r2/x+K9v8fivbCH4r2EB133wAgevQsIHr0+SB69P8gevSAIHr0AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAUSGwAFERwAElCOAB+J9QAfivYAH4r2lx+K9v8fivb/H4r2qR+K9gYefuoAIHr0BSB69M4gevT/IHr00CB69AUgevQA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAkqSgAfivYAH4r2AB+K9gAfivZLH4r2/R+K9osfivYBH4PwACB69AAgevSAIHr0/yB69PkgevQwIHr0ACB69AD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAEEiAAB+K9gAfivYAH4r2AB+K9gAfivYsH4r2AB+G8wAge/QAIHr0MCB69PsgevT/IHr0eyB69AAgevQAIHr0AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAXZrYAH4r2AB+K9gAfivYAH4r2AB+K9gAfifUAIHz0ACB69AcgevTQIHr0/yB69MwgevQEIHr0ACB69AAgevQA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAAAAAAAAAAAAAAAIDAB6E6gAfivYAH4r2AB+K9gAfivYAH4r2ACB+9QAgevQAIHr0fCB69P8gevT5IHr0LCB69AAgevQAIHr0ACB69AD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAABBAcAEUqDAB6E6wAfivYAH4r2AB+K9gAggPUAIHr0ACB69AAgevQTIHr0qCB69HYgevQAIHr0ACB69AAgevQAIHr0AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP////////////////wAAH/8AAB//P/+f/z//n/8wAZ//MAGf/z//n/8wAZ//MAGf/zAAn/8/gJ//+AD///AAf//wEH//+cA///8AH//8BB///BgH//xwB///4If//4EP//+CD///hh///9w////4P///+H////j////////////" rel="icon" type="image/x-icon" /> 
```

为此使用此页面：[http ://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-02T12:09:37.023

对我来说，问题是它上面有一个 div （当然不应该在头脑中，但它确实发生了）。Firefox 不介意，但 Chrome 不介意。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-08T18:42:19.370

看起来 Chrome 不允许您在地址栏中显示网站图标...

[http://en.wikipedia.org/wiki/Favicon#Use_of_favicon](http://en.wikipedia.org/wiki/Favicon#Use_of_favicon)

我也见过这样做。不知道会不会有影响。

```
<link rel="icon" href="/favicon.ico" /> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-16T13:49:28.573

这只是 Chrome 和 Chrome 中的错误。要触发错误：

1.  在您的 HTML`<head>`块中设置：`<link rel="shortcut icon" type="image/ico" href="favicon.ico">`
2.  使用一个 favicon.ico 图像加载页面，然后用另一个图像替换 favicon.ico 文件。[即使您使用Classic Cache Killer](https://chrome.google.com/webstore/detail/classic-cache-killer/kkmknnnjliniefekpicbaaobdnjjikfp?hl=en)或使用隐身模式（安全漏洞，有人吗？），您将无法显示新的。您可以使用其他浏览器进行确认。

*解决错误：* **按 强制重新加载`shift + F5`。**

这是 Chrome 中的一个非常大的错误，已经报告给他们的开发人员，他们建议使用这种方法来解决他们的错误。（来源： [谷歌支持](https://support.google.com/chrome/thread/16531954/clear-cache-for-specific-website-in-google-chrome?hl=en)。）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-25T08:29:09.377

这个技巧有效：例如在 header 或 masterPage 中添加这个脚本

```
 var link = document.createElement('link');
    link.type = 'image/x-icon';
    link.rel = 'shortcut icon';
    link.href = '/favicon.png'; 
```

并将被缓存。这不是最佳的，但它有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-09T12:25:29.853

路径必须通过 URI（完整）。

喜欢：[http ://example.com/favicon.png](http://example.com/favicon.png)

所以在你的情况下：

```
<!DOCTYPE html>
<html> 
    <head profile="http://www.w3.org/2005/10/profile">
        <title></title>
        <link rel="shortcut icon" 
              type="image/png" 
              href=" http://example.com/favicon.png" />
    </head>
    <body>
    </body>
</html> 
```

参考： [http ://www.w3.org/2005/10/howto-favicon](http://www.w3.org/2005/10/howto-favicon)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-25T08:07:31.143

请注意，如果您打开的标签太多以至于 Google Chrome 只显示网站图标，那么 Google Chrome 将不会显示所选标签的网站图标，因此如果您在加载页面的情况下继续重新加载标签以查看新的网站图标，您将只看到页面标题的文本。

您需要重新加载页面，然后选择不同的选项卡才能看到您的网站图标。

[![在此处输入图像描述](../Images/0904a50ed39f1cb848de573488cee650.png)](https://i.stack.imgur.com/O0X4t.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-13T13:13:39.303

我将 ico 文件移动到根文件夹并链接它。它对我有用。此外，在 chrome 中，我必须等待 30 分钟才能清除缓存并使新更改生效。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-07T09:39:33.433

这些是浏览器在 Linux 中存储临时数据的位置：

> 注意：您可以使用 Ctrl + H 在文件管理器中查看隐藏文件
> 
> 对于终端使用命令 ls -la

铬

```
~/.cache/chromium/[profile]/Cache/ 
```

谷歌浏览器

```
~/.cache/google-chrome/[profile]/Cache/ 
```

此外，Chromium 和 Google Chrome 将一些额外的缓存存储在

```
~/.config/chromium/[profile]/Application Cache/Cache/ 
```

和

```
~/.config/google-chrome/[profile]/Application Cache/Cache/ 
```

通常在这里：

```
/tmp/ 
```

所以应用新的 FAVICON 或尝试显示它就是清理它们

确保你在这些目录中，使用命令：

```
rm -rf * 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-31T23:34:29.860

还有另一种似乎没有人提到的可能性：您可能导出了`.ico`带有 Chrome 不支持的设置的文件。

另一种可能性是您`.ico`缺少 16 像素的图像，因此即使您有其他分辨率，也可能什么也不显示。

我建议在您的`.ico`导出器上尝试不同的设置，或者完全尝试另一种设置。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2017-08-21T14:28:49.717

这个问题快把我逼疯了！解决方案实际上很简单，只需在标题标签中添加以下内容：

```
<link rel="profile" href="http://gmpg.org/xfn/11"> 
```

例如：

```
<!DOCTYPE html>
<html> 
    <head>
        <title></title>
        <link rel="profile" href="http://gmpg.org/xfn/11">
        <link rel="icon" href="/favicon.ico" /> 
```

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2012-12-08T18:24:02.280

您的 html 对于初学者来说是完全错误的，您的头部不应该有 div，也不应该在您的身体部分之后。我建议您在开始使用网站图标等之前先查看正确的 html。**

# iphone - 无法将标签栏应用程序添加到 popToRootViewController

> ID：13780407
> 
> 赞同：0
> 
> 时间：2012-12-08T18:20:18.893
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uitabbarcontroller

我有一个带有导航栏和横幅视图委托的程序化标签栏委托。对于我的生活，我似乎无法让标签在点击时弹出根视图。我知道我需要使用类似 [self.navigationController popToRootViewControllerAnimated:NO]; 但我不知道把它放在我的应用程序委托中的哪里。

```
@implementation AppDelegate {
UITabBarController *_tabBarController;
  }

 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:      (NSDictionary *)launchOptions
{
NSError *setCategoryError = nil;

CGRect bounds = [[UIScreen mainScreen] bounds];
self.window = [[UIWindow alloc] initWithFrame:bounds];
self.window.backgroundColor = [UIColor whiteColor];

NSMutableArray * viewControllers = [[NSMutableArray alloc] init];

NSString * subscriptionListFile = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"Subscription.plist"];

NSDictionary * subscriptionList = [[NSDictionary alloc] initWithContentsOfFile:subscriptionListFile];

NSArray * subscriptionFolders = subscriptionList[@"Folders"];

NewsListViewController * newsController = nil;
UINavigationController * newsNavigationController = nil;
BannerViewController * bannervcs = nil;

for (NSDictionary * folderDetails in subscriptionFolders) {

    NSArray * newsItems = folderDetails[@"Items"];
    NSString * folderTitle = folderDetails[@"FolderName"];
    NSString * folderIcon = folderDetails[@"FolderIcon"];
    UIImage * folderIconImage = [UIImage imageNamed:folderIcon];

    newsController = [[NewsListViewController alloc] initWithNewsSourceList:newsItems];
    [newsController setTitle:folderTitle];

    newsNavigationController = [[UINavigationController alloc] initWithRootViewController:newsController];
    [newsNavigationController setTitle:folderTitle];

    bannervcs = [[BannerViewController alloc] initWithContentViewController:newsNavigationController];
    [bannervcs.tabBarItem setImage:folderIconImage];
    [viewControllers addObject:bannervcs];

  }

_tabBarController = [[UITabBarController alloc] init];
_tabBarController.viewControllers = viewControllers;

   self.window.rootViewController = _tabBarController;
   [self.window makeKeyAndVisible];

    return YES;
}

 @end 
```

知道我在哪里添加 popToRootViewController 吗？我最后试过了，但它似乎没有抓住任何控制器......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:28:40.830

您需要设置一些东西作为您的 UITabBarControllerDelegate。假设您想在 AppDelegate 上尝试此操作，请将以下行添加到您的方法中：

```
_tabBarConroller.delegate = self; 
```

然后，将此方法添加到您的 AppDelegate（因为它现在也被视为 UITabBarControllerDelegate）

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    viewController.navigationController popToRootViewControllerAnimated:NO];
} 
```

这是假设，无论用户在选项卡上离开导航堆栈的状态如何，点击另一个选项卡总是将用户带到导航堆栈的根视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:27:21.437

如果你想在你的 tabBar 中添加导航控制器，那么你必须添加你的导航控制器而不是 viewController。因此，在您的情况下，您没有将 navigationControllers 添加到 tabBarControllers 数组中。

```
[viewControllers addObject:bannervcs]; 
```

所以而不是添加`bannervcs`添加`newsNavigationController`

```
[viewControllers addObject:newsNavigationController]; 
```

有关更多信息，请阅读并获取[UITabBarController 类参考中的示例代码](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)

# sql - 表格设计更多的行、更多的列，还是更多的表格？

> ID：13780408
> 
> 赞同：0
> 
> 时间：2012-12-08T18:20:22.117
> 
> 标签：sql, sql-server

有更多列的更少表还是更少列的更多表更好？

例如，假设我有一张表，其中的列是日期、小时、市场、价格

小时仅表示一天中的小时（即 1-24）。市场是一个三字符代码，可以是 DAM 也可以是 RTM。价格是跟踪的重要价值。

将两个表改为只有三列，其中一个表是市场是 DAM 而另一个是 RTM 的子集会更好吗？

另一个想法是用 Date、Hour、DAMPrice、RTMPrice 制作表格。考虑到使用这种方法大多数选择会更简单，这会是最好的吗？

最常用的 SELECT 是从 RTMPrice 中获取 DAMPrice 的差异，RTMPrice 现在适用于同一张表上的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T01:46:11.117

从设计的角度来看，通常最好对数据进行规范化以减少冗余。通常这意味着更多的表和更少的列。

然而，在实践中，如果您将连接操作的数量降至最低，您将获得更好的性能。因此，如果您想加快读取速度，拥有冗余数据可能是可以接受的。在这种情况下，您将拥有更少的表和更多的列。

我建议先选择更好的设计，然后在必要时优化性能。

# c++ - 重写代码：从文件输出到 char* ~> FILE* 到 RAM 中的虚拟文件可能吗？

> ID：13780410
> 
> 赞同：0
> 
> 时间：2012-12-08T18:20:28.337
> 
> 标签：c++, c, file-descriptor

我有一些旧的 3rd 方代码使用,`C++`写入/读取文件。我需要重写它，以便将序列化的整个内容作为.`fopen()``fprintf()/fscanf()``char*`

是否可以在内存中“打开”一个虚拟文件（大小未知），然后将输出复制到 a `char*`，这样我就不必触摸`fprintf()`-with-`filedescriptor`部分了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:40:22.803

是的。您可以`mmap`在 Linux 和其他 UNIX 上使用。

# go - request.Post 表单提交时数组为空

> ID：13780414
> 
> 赞同：13
> 
> 时间：2012-12-08T18:20:46.910
> 
> 标签：go

我正在尝试在 go 中处理一个简单的 html 表单。但是，我在提交时无法获得任何帖子数据。r.Form 映射始终为 []。不知道我哪里出错了。

提前致谢。

这是代码[http://play.golang.org/p/aZxPCcRAVV](http://play.golang.org/p/aZxPCcRAVV)

```
package main

import (
    "html/template"
    "log"
    "net/http"
)

func rootHandler(w http.ResponseWriter, r *http.Request) {
    t, _ := template.New("form.html").Parse(form)
    t.Execute(w, "")
}

func formHandler(w http.ResponseWriter, r *http.Request) {
    log.Println(r.Form)
    rootHandler(w, r)
}

func main() {
    http.HandleFunc("/", rootHandler)
    http.HandleFunc("/login", formHandler)
    http.ListenAndServe("127.0.0.1:9999", nil)
}

var form = `
<h1>Login</h1>
<form action="/login" method="POST">
<div><input name="username" type="text"></div>
<div><input type="submit" value="Save"></div>
</form>
` 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T18:41:29.260

看起来你需要先调用 ParseForm 。从 go 文档

```
// Form contains the parsed form data, including both the URL
// field's query parameters and the POST or PUT form data.
// This field is only available after ParseForm is called.
// The HTTP client ignores Form and uses Body instead.
Form url.Values 
```

还有一些代码可以让您的示例正常工作。

```
func formHandler(w http.ResponseWriter, r *http.Request) {
    err := r.ParseForm()
    if err != nil {
       //handle error http.Error() for example
       return
    }
    log.Println(r.Form)
    rootHandler(w, r)
} 
```

# c++ - 在 C++ 中将 char 分配给 int 引用和 const int 引用

> ID：13780417
> 
> 赞同：10
> 
> 时间：2012-12-08T18:21:09.143
> 
> 标签：c++, reference, casting, constants, c++03

我注意到将 a 分配`char`给 a`const int&`编译，但将其分配给 a`int&`会产生编译错误。

```
char c;
int& x = c;    // this fails to compile
const int& y = c;    // this is ok 
```

我知道这样做不是一个好习惯，但我很想知道它发生的原因。

我通过查找“分配给不同类型的引用”、“将 char 分配给 int 引用”和“const 引用和非 const 引用之间的区别”来寻找答案，并且遇到了许多有用的帖子（[int vs const int&](https://stackoverflow.com/questions/4705593/int-vs-const-int)，[将 char 分配给 int 变量时的奇怪行为](https://stackoverflow.com/questions/10716894/weird-behaviour-when-assigning-a-char-to-a-int-variable)，[在 C 和 C++ 中将 char 转换为 int ，](https://stackoverflow.com/questions/5029840/convert-char-to-int-in-c-and-c)引用[和 const 引用作为函数参数之间的区别？](https://stackoverflow.com/questions/1719818/difference-between-reference-and-const-reference-as-function-parameter)），但它们似乎没有解决我的问题。

如果之前已经回答过，我深表歉意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T18:23:28.320

```
int& x = c; 
```

在这里，编译器正在执行从`char`to的隐式转换。`int`结果临时`int`只能绑定到一个`const`引用。绑定到 a`const int&`还将延长临时结果的生命周期以匹配它所绑定的引用的生命周期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-04T17:16:57.163

这种行为在标准[N4527](http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/n4527.pdf)的*8.5.3/p5.2 参考文献 [dcl.init.ref]中是合理的*

> 5 对“cv1 T1”类型的引用由“cv2 T2”类型的表达式初始化，如下所示：
> 
> ...
> 
> 5.2 否则，引用应为对非易失性 const 类型的左值引用（即 cv1 应为 const），或者引用应为右值引用。[ 例子：
> 
> ```
> double& rd2 = 2.0; // error: not an lvalue and reference not const
> int i = 2;
> double& rd3 = i; // error: type mismatch and reference not const 
> ```
> 
> —结束示例]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-04T17:18:34.320

这条线的事实

```
const int& y = c; 
```

创建临时并`y`绑定到临时可以通过以下方式验证：

```
#include <iostream>

int main()
{
   char c = 10;
   const int& y = c;

   std::cout << (int)c << std::endl;
   std::cout << y << std::endl;

   c = 20;

   std::cout << (int)c << std::endl;
   std::cout << y << std::endl;

   return 0;
} 
```

输出：

```
10
10
20
10 
```

当 的值`y`改变时， 的值没有`c`改变。

# javascript - 在iOS中使用弹性滚动确定元素上方的空间？

> ID：13780421
> 
> 赞同：0
> 
> 时间：2012-12-08T18:21:17.267
> 
> 标签：javascript, jquery

我正在尝试在 Javascript for iOS 中创建一个简单的*拉动刷新功能，但遇到了一些问题。*

主要问题是我想使用`-webkit-overflow-scrolling:touch`它，以便元素可以平滑滚动。然后，如果元素向下滚动太远，它将显示将“刷新”的元素。

在 iOS 上，使用弹性滚动，如果你下拉一个元素，它上面会有空间。是否可以计算这个空间的高度？如果是，我将能够查看它是否超过了某个限制，如果是，则运行一个函数来处理“刷新”。

还有其他方法可以做到这一点吗？我不会使用 iScroll 或 jQuery Mobile（不过我使用的是常规 jQuery），因为它们会给我的应用程序添加不必要的功能，这些功能不会被使用。

# firefox - 如何更改Firefox的检查元素的背景颜色

> ID：13780427
> 
> 赞同：5
> 
> 时间：2012-12-08T18:21:37.517
> 
> 标签：firefox, colors, background, inspect-element

希望是一个简单的。我在 Win 7 上使用 Firefox 17.0.1。一切正常，但现在当我使用“检查元素”时，检查元素窗格的背景为深蓝色，html 元素的前景色为深色，因此很难阅读. 我已经搜索和搜索，但自然大多数搜索结果都是关于更改页面背景颜色而不是检查器本身的背景颜色。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:01:29.560

我看到的一个答案是创建一个“用户”样式来强制背景为白色。

链接： http: [//support.mozilla.org/en-US/questions/943857](http://support.mozilla.org/en-US/questions/943857)

为此，您需要为 Firefox 安装一个名为“Stylish”的插件

链接：[https ://addons.mozilla.org/en-US/firefox/addon/stylish/](https://addons.mozilla.org/en-US/firefox/addon/stylish/)

并使用它通过以下代码创建用户样式：

```
@namespace url(http://www.w3.org/1999/xhtml);

@-moz-document url("chrome://browser/content/devtools/markup-view.xhtml") {
body { background: white !important }
} 
```

我已经这样做了，它对我有用。

时尚插件的文档链接：http: [//userstyles.org/help/stylish_firefox](http://userstyles.org/help/stylish_firefox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:34:37.267

我不确定你可以改变这个，但你可以使用仍然有白色背景的 Firebug

# c# - 如何避免 Telerik OpenAccess Addin 对我的 Visual Studio 2010 Addin Commandbar 的干扰？

> ID：13780430
> 
> 赞同：0
> 
> 时间：2012-12-08T18:21:53.460
> 
> 标签：c#, visual-studio-2010, visual-studio-addins, telerik-open-access

请告诉我如何避免 Telerik OpenAccess ORMs Visual Studio 菜单与我的插件菜单在 Visual Studio 2010 SP1 的工具菜单选项下的干扰。

我正在用 C# 为 Visual Studio 2010 开发一个简单的 Visual Studio 插件。

我安装了 Telerik OpenAccess ORM。

## Telerik OpenAccess ORM 版本

它的版本是：**Telerik-OpenAccess-ORM-2011.3.1129.2**

我的插件在 Visual Studio 的工具菜单下创建了一个命令栏及其子菜单。请看下面的结构：

## 正确的菜单结构：

> 工具
> 
> > 我的插件菜单
> > 
> > > 子菜单 1
> > > 
> > > 子菜单 2

当插件安装在“%ALLUSERSPROFILE%\Application Data\Microsoft\MSEnvShared\Addins”下时，第一次启动时一切正常，工具选项正确显示我的插件菜单及其子菜单。

但是如果我删除我的插件并重新安装，情况就是这样：

## 使用 OpenAccess ORM

> 工具
> 
> > 开放存取
> > 
> > > OpenAccess相关子菜单1
> > > 
> > > > > 子菜单1
> > > > > 
> > > > > 子菜单2
> > 
> > 开放存取
> > 
> > > OpenACCESS相关子菜单1
> > > 
> > > > OpenAccess 相关子菜单 2 OpenAccess 相关子菜单 3 我的插件菜单
> > > > 
> > > > > 子菜单1
> > > > > 
> > > > > 子菜单2
> > 
> > 开放存取
> > 
> > > OpenACCESS相关子菜单1
> > > 
> > > > OpenAccess 相关子菜单 2 OpenAccess 相关子菜单 3> 我的插件菜单
> > > > 
> > > > > 子菜单1
> > > > > 
> > > > > 子菜单2

## 预后

如果我卸载了所有 Telerik 产品，例如“Telerik Rad Controls for Silverlight、WPF、Winforms 和 Telerik Reporting”，无论我安装或卸载插件的次数，我的插件菜单都会出现在正确的位置。

## 环境细节

1.  Windows 7 终极版 SP1 x64 / Windows 7 家庭高级版 SP1 x64
2.  Visual Studio 2010 Ultimate SP1 Rel/Visual Studio Professional SP1 Rel

## 测试

1.  Resharper 和/或 DevXPress 工具的存在对我的插件菜单选项没有负面影响
2.  Telerik ORM 的存在干扰了我的插件的菜单选项

请注意，**我也安装了 Resharper 和 DevXpress 控件**，它们根本不会干扰 mhy 插件。

**我能够在其他两台仅安装 Telerik 产品的基于 Windows 7 的机器上重现相同的问题**

由于公司许可、产品创意保护和 NDA，我可能无法提供我的插件样本进行测试。

## 代码源

但是我使用此处提供的相同代码来创建命令栏并添加到 Visual Studio 工具菜单 [http://www.mztools.com/articles/2005/mz2005003.aspx](http://www.mztools.com/articles/2005/mz2005003.aspx)

我仍在尝试调查该问题并尝试确定它是否是 Telerik ORM 或我的代码中的错误。问题最好出现在我的代码中，因为更新 Telerik ORM 会非常不愉快，因为正在为开发人员开发插件并且许多开发人员仍然使用上述版本的 Telerik Open Access ORM。

## 更新

Telerik OpenAccess ORM 的最新（免费）版本仍然存在此问题。

## Telerik_OpenAccess_ORM_Free_Edition_2012_3_1012.zip

请帮忙。

谢谢

史蒂夫

# php - 使用文本文件的特定部分创造价值

> ID：13780432
> 
> 赞同：0
> 
> 时间：2012-12-08T18:22:16.527
> 
> 标签：php, variables, flat-file

好的，我正在开发一个平面文件的喊话框，我正在尝试实现一种从平面文件中获取用户名并将其设为变量的方法，以便我可以使用它来调用数据库以检查用户是否是管理员所以他们可以直接从喊话框中删除/禁止用户。

这是平面文件中的示例行

```
<div><i><div class='date'>12/08/2012 18:56 pm&nbsp;&nbsp;</div></i> <div class='groupAdmin'><b>Admin</b></div><b><a href='javascript:;' onclick="shout_insert('@kira423- ')">kira423</a>:</b> hiya :D</div> 
```

所以我想使用`kira423`这种情况下的用户名并创建一个变量，例如`$shoutname`并使其相等`kira423`

我已经尝试过谷歌搜索并在此处查看，但无法找到答案，所以我希望我可以在这里解决我自己的问题。

谢谢，

基拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:40:19.337

我认为您应该将平面文件中的每一行解析为 HTML（使用了简单的 HTML 标签），就像[PHP Parse HTML 代码](https://stackoverflow.com/questions/3627489/php-parse-html-code)中描述的那样（或在 google 中键入“php parse HTML”）。然后您可以从数组或其他任何地方访问用户名（kira123）。

PS HTML 不是存储要显示的消息的最佳方式。甚至 CSV 似乎也更好——它会是“kira123;date;some text”——它更容易阅读和访问每个部分。显示时，使用标准装饰器模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:40:41.760

你应该使用`preg_match`这样的任务：

```
preg_match_all('|<div class=\'date\'>(?P<date>.*?)&nbsp;.*<a.*>(?P<user>.*)</a>|i', $data, $matches);
var_dump($matches); 
```

**遍历所有数组元素**：

```
foreach ($matches['user'] as $key => $user) {
    var_dump($user);
} 
```

# sql - 为财务报表构建数据库

> ID：13780436
> 
> 赞同：3
> 
> 时间：2012-12-08T18:22:35.333
> 
> 标签：sql, sql-server, database-design

我正在寻找构建数据库的最佳方式。我有 1997-2012 年 1000 家公司的季度财务报表。每家公司都有三张不同的报表，即损益表、资产负债表和现金流量表。

我希望能够对数据进行计算，例如将每个季度相加以获得每个报表上每个行项目的年度总计。

到目前为止，我尝试了两种方法：

1）将每个语句的每个行项目存储在它自己的表中，即销售将是一个表，并且只有我正在跟踪的所有公司的销售数据，公司作为主键，每个季度数据作为单独的列。这似乎是处理数据的最简单方法，但每个季度更新数据非常耗时，因为有数百个表。

```
销售表
公司 q32012 q22012 q12012
ABC 公司 500 100 202
XYZ 公司 230 302 202

```

2) 另一个更容易更新但更难处理数据的选项是为每家公司的每条语句创建一个单独的表。例如，皇家银行的损益表会有它自己的表，主列是行项目。

```
皇家银行损益表
Line_Item q32012 q22012 q12012
销售量            
净利           

```

这里的问题是，当我尝试对这些数据进行年度化时，由于 group by，我得到了一个非常丑陋的输出

```
SELECT    
(CASE WHEN Line_Item = 'Sales' THEN SUM(q4 + q3 + q2 + q1) ELSE '0' END) AS Sales2012, 
(CASE WHEN Line_Item = 'NetProfit' THEN SUM(q4 + q3 + q2 + q1) 
      ELSE '0' END) AS Inventories2012
FROM            dbo.[RoyalBankIncomeStatement]
GROUP BY Line_Item 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T06:47:42.170

每当我必须按财政季度、月份或年份或其他任何时间为财政报告构建数据库时，我发现从星型模式设计和数据仓库中借用一个概念很方便，即使我并没有真正构建一个德威。

借用的概念是有一个表，我们称之为 ALMANAC，每个日期有一行，以日期为键。在这种情况下，自然键效果很好。此处的相关属性可以是日期所属的财政月份和季度，日期是否是企业营业的日期（真或假），以及公司日历中的任何其他怪癖。

然后，您需要一个计算机程序来从无到有地生成此表。公司日历的所有奇怪规则都嵌入在这个程序中。年历可以涵盖 3,650 多行的十年时间。那是一张小桌子。

现在，操作数据中的每个日期都可以用作 ALMANAC 表中的外键，前提是您始终使用 Date 数据类型作为日期。例如，每笔销售都有销售日期。然后按财政季度、财政年度或任何您喜欢的方式进行汇总，只需将运营数据与 ALMANAC 结合起来，并使用 GROUP BY 和 SUM() 即可获得所需的汇总。

这很简单，它使生成大量时间段报告变得轻而易举。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:41:58.873

我对您的建议是考虑不使用 SQL 数据库来执行此操作。相反，请考虑使用 SQL Server Analysis Services (SSAS) 之类的东西。如果您想快速开始使用 SSAS，我建议您快速了解 PowerPivot for Excel。您可以使用您在 PowerPivot 中开发的模型，并在准备好后将其导入 SSAS。

为什么我不推荐 SQL？因为您将在 SQL Server 中聚合帐户时遇到问题。例如，您的资产负债表不会是您能够在 SQL 中轻松汇总的东西——例如，向 SQL Server 询问 2010 年的“现金”意味着您想要获取2010 年 12 月结束，并不是说您想对那一年的所有现金条目求和（这将是一个无意义的数字）。另一方面，对于出现在损益表上的收入和支出账户，您*可能*希望将这些值相加。更糟糕的是，一些报告将包含多种帐户类型，这将使​​报告变得相当困难。

SSAS 在产品内部有规定，它“知道”如何根据帐户类型汇总您的报告，并且有许多教程可以向您展示如何进行设置。

无论哪种方式，您都需要在数据进入报告系统或 Analysis Services 多维数据集之前将其存储在某处。为此，您应该像这样构建数据。假设您将数据存储在名为 Reports 的表中：

```
Reports
--------
[Effective Date]
[CompanyID]
[AccountID]
[Amount] 
```

您的 Account 表将包含您尝试存储的内容（收入、支出等）的描述。您的 [Effective Date] 列将链接回一个`Dates`表格，该表格描述您的数据所属的年份、季度等。本质上，我所描述的是一种用于报告数据库的经典形状，称为[星型模式](http://en.wikipedia.org/wiki/Star_schema)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T18:50:15.937

我可能会在一个数据表中使用以下结构：

```
Company
StatementType 
LineItem
FiscalYear
Q1, Q2, Q3, Q4 
```

StatementType 可以是损益表、资产负债表或现金流量表。行项目将是报表上项目的编码/未编码文本，财政年度是 2012 年、2011 年等等。您仍然需要确保 Line Items 在公司之间保持一致。

这种结构可以让您查询平面语句 -

```
select
LineItem, Q1, Q2, Q3, Q4
from Data
where 
Company = 'RoyalBank'
and FiscalYear = 2012
and StatementType = 'Income Statement' 
```

或者

环比

```
select
FiscalYear,
Q1
from Data
where 
Company = 'Royal Bank'
and 
StatementType = 'Income Statement'
and
LineItem = 'Sales'
order by FiscalYear 
```

除了聚合。您可能希望有另一个带有某种索引引用的行项目表，以确保您可以将语句拉回行项目的原始顺序。

# java - 在for循环中匹配两个char类型数组，for循环无法正确执行

> ID：13780437
> 
> 赞同：1
> 
> 时间：2012-12-08T18:22:36.493
> 
> 标签：java, for-loop, multidimensional-array, compare

有点难以解释这里发生了什么。我正在用 java 制作刽子手以获得额外的学分任务。我想检查用户输入的字母是否在随机单词中。我有一个二维字符数组。0 列是答案的每个字母，1 列是正确猜测的字母。

```
 char[] usedLetters =new char[guesses];
    char[][] checker = new char[wordSize][2];
    char[] answer = new char[wordSize];
    String tempAnswer=word.randomWord();
    System.out.println(tempAnswer);
    answer=tempAnswer.toCharArray();
    for(int i = 0;i<wordSize;i++)
    {
        checker[i][0]=answer[i];
    }

    System.out.println("Enter your first guess!");
    char let=scan.next().charAt(0);

    for(int i = 0; i<wordSize; i++)
    {
        if(checker[i][0]==let)
        {
            checker[i][1]=let;
            System.out.println("found in" + i);
        }
        else
        {
            System.out.println("not found in" + i);
        }
    }

    usedLetters[g]=let;
    System.out.println("Guesses so far: " +g);
    System.out.print("Letters used so far: "); 
```

问题出现在第二个 for 循环中。没有 if else 语句正在打印到控制台。我无法解决这个问题。这是我在控制台中得到的：

有127142字可供选择

你想猜的单词多长？

9

你想猜几个？

10

丁酮类

输入您的第一个猜测！

b

到目前为止的猜测：1

目前使用的字母：

注意它是如何完全跳过 if else 输出的！我尝试了很多不同的方法，但它一直忽略我的匹配 for 循环。有什么建议么？

按照要求，这是 Hangman 课程的开始。对于任何有超过 6 个月编程经验的人来说，这看起来很可怕。

```
public class Hangman
{
    private Scanner scan;
    private int wordSize;
    private Words word;
    private int guesses;
    private boolean winner;
    public void setup()
    {
        scan = new Scanner(System.in);
        word = new Words();
        System.out.println("How long is the word you would like to guess?");
        int wordSize=scan.nextInt();
        word.setGameWordList(wordSize);
        System.out.println("How many guesses would you like?");
        guesses=scan.nextInt();
    }
public void play()
    {
        int g = 1;
        char[] usedLetters =new char[guesses];
        char[][] checker = new char[wordSize][2];
        char[] answer = new char[wordSize];
        String tempAnswer=word.randomWord();
        System.out.println(tempAnswer);
        answer=tempAnswer.toCharArray();
        for(int i = 0;i<wordSize;i++)
        {
            checker[i][0]=answer[i];
        }

        System.out.println("Enter your first guess!");
        char let=scan.next().charAt(0);

        for(int i = 0; i<wordSize; i++)
        {
            if(checker[i][0]==let)
            {
                checker[i][1]=let;
                System.out.println("found in" + i);
            }
            else
            {
                System.out.println("not found in" + i);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:46:57.977

在您的设置方法中，只需取出`int`in `int wordSize=scan.nextInt();`。

一个新变量`wordSize`成为本地变量，`setup()`并且不会将其值保留在`play()`. 您需要设置实例变量`wordSize`。

# asp.net - 使用一个数据库的两个相同的asp.net应用程序之间的速度差异

> ID：13780440
> 
> 赞同：0
> 
> 时间：2012-12-08T18:22:44.793
> 
> 标签：asp.net, sql-server, performance, iis, pagespeed

我有一个 asp.net Web 应用程序，它与我们称为服务器“A”的一台服务器中的 SQL Server 数据库一起使用。在我们的城域网中应用速度很好

我将我们的 Web 应用程序发布到使用服务器“A”上的数据库的另一台服务器（服务器“B”）。

从服务器“B”调用应用程序时，我们的速度非常慢。

网络没有问题，当我从服务器“B”调用服务器“A”应用程序时，我们没有任何减速

两个 Web 应用程序绝对相同并且使用一个数据库

我真的很困惑；是什么原因？

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:11:12.510

有各种各样的东西在这里起着至关重要的作用。

*   当您从托管数据库的同一台服务器上运行 asp.net 应用程序时，sql server 连接很可能是通过“命名管道”或“共享内存”进行的。与 tcp ip 相比，这两者都是与服务器通信的非常快速的方法。当您在另一台服务器上托管 asp.net 应用程序时，它被迫使用 tcp-ip 进行通信。

*   网络可能很好，但您还应该检查其他因素，例如网络上的帧大小和 MSS。拥有更大的帧大小有助于 sql server 有效地利用整个可用速度。连接在网络中的交换机和路由器等设备也起着至关重要的作用。

*   除此之外，我怀疑您的应用程序使用了不适当的架构或遵循了错误的做法。例如，如果您想要列出产品，您可以进行查询以从数据库中获取所有产品并将结果过滤到特定页面，这是错误的做法。理想情况下，查询应该只获取您想要显示的那些记录。使用数据适配器而不是读取器也会导致这样的问题，因为他们尝试读取整个内容并创建内存表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:12:41.687

我关闭了所有服务器上的防火墙，但没有看到任何变化。但是当我转到 Windows FireWall 时，在高级选项卡中，在网络连接设置部分（在 Windows Server 2003 中）并取消选中所有连接。

我的速度问题解决了。

# scala - 混入时，scala编译器可以强制实现抽象特征方法吗？

> ID：13780441
> 
> 赞同：2
> 
> 时间：2012-12-08T18:22:46.660
> 
> 标签：scala, compiler-construction, mixins, traits, abstract-methods

我有一个抽象方法和具体实现方法的特征，所以是这样的：

```
trait MyTrait extends BaseClass {
    def myAbstractMethod: MyReturnType
    def myConcreteMethod = { /*implementation*/ }
} 
```

现在我混合特征：

```
class MyClass extends BaseClass with MyTrait {

} 
```

BaseClass 不实现抽象方法。当我混合特征时，我希望 scala 编译器强制执行抽象方法（就像 Java 接口一样）。但是没有编译器错误。

我的特殊情况更复杂。我还无法测试运行时会发生什么。

1.  为什么scala编译器不强制执行抽象方法？
2.  我可以让 scala 编译器强制执行抽象方法吗？
3.  我必须在某处添加抽象或覆盖吗？
4.  当我尝试创建和使用 MyClass 的实例时，运行时会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T18:32:22.423

你肯定会得到一个编译器错误......

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

trait MyTrait extends BaseClass {
    def myAbstractMethod: MyReturnType
    def myConcreteMethod = { /*implementation*/ }
}

class MyClass extends BaseClass with MyTrait {    
}

// Exiting paste mode, now interpreting.

<console>:14: error: class MyClass needs to be abstract, since method myAbstractMethod in trait MyTrait of type => MyReturnType is not defined
       class MyClass extends BaseClass with MyTrait {

 ^ 
```

# unix - 如何删除指向我自己文件夹的符号链接？

> ID：13780444
> 
> 赞同：2
> 
> 时间：2012-12-08T18:23:05.580
> 
> 标签：unix, symlink

我觉得自己很傻，并且为我缺乏unix知识而感到尴尬......

在实验内核中...

```
[root@gala Project2]# ll
...
lrwxrwxrwx.  1 jt jt        17 Nov  5 23:36 Project2 -> /usr/src/Project2
... 
```

A`rm -r`给我这个..

```
rm: cannot remove `Project2': Too many levels of symbolic links 
```

我知道总的指关节移动/问题，但我在任何地方都找不到答案..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-18T16:12:57.020

```
# this works
rm foo
# versus
rm foo/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:29:20.063

看起来您想删除实际目录。

```
rm -r /usr/src/Project2 
```

# git - 我怎么知道哪些补丁不包含在与上游 git 存储库相同的分支中提交的 git 存储库中？

> ID：13780446
> 
> 赞同：2
> 
> 时间：2012-12-08T18:23:16.193
> 
> 标签：git

我知道一个 git 存储库，他们的作者在与上游存储库相同的分支中提交更改，并且有时会与上游合并。

我怎么知道哪些补丁不包含在与上游 git 存储库相同的分支中提交的 git 存储库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:42:06.153

你可以试试`git cherry`

```
 git-cherry - Find commits not merged upstream

SYNOPSIS
       git cherry [-v] [<upstream> [<head> [<limit>]]]

DESCRIPTION
       The changeset (or "diff") of each commit between the fork-point and
       <head> is compared against each commit between the fork-point and
       <upstream>. The commits are compared with their patch id, obtained from
       the git patch-id program.

       Every commit that doesn't exist in the <upstream> branch has its id
       (sha1) reported, prefixed by a symbol. The ones that have equivalent
       change already in the <upstream> branch are prefixed with a minus (-)
       sign, and those that only exist in the <head> branch are prefixed with
       a plus (+) symbol: 
```

# java - 类之间的Java面向对象函数调用

> ID：13780448
> 
> 赞同：0
> 
> 时间：2012-12-08T18:23:22.347
> 
> 标签：java, oop, class, function-calls, message-passing

我是 OOD 的新手，正在从事学术项目。我在编程时遇到问题。

场景是我有一个主类，我在其中创建了一个“登录”类的对象并调用它的函数。

现在在那个“登录”类函数中，我创建了一个 jFrame 类的对象来显示登录视图，用户在其中输入登录信息并按下登录按钮。

现在我希望当用户按下登录按钮时，我应该将该信息传递给我的“登录”类中的身份验证函数。

问题是我如何调用该函数（它是一个非静态函数），并根据无效信息调用 jFrame 类的函数以显示错误消息。

我想在我的项目中调用这个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:40:41.053

也许你需要重新设计你的程序。登录类不应创建 JFrame。让登录类专注于验证用户及其相关功能。所以是这样的：

```
 public class Login{

      public boolean authenticate(String uname, String pword){
           return .......
      }

  } 
```

每当需要使用Login的功能时，都可以实例化并调用该功能。例如，您可以创建一个 JFrame，提示用户输入用户名和密码，并在按钮的操作中：

```
 loginBtn.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e){

                      Login login = new Login();
                      if(login.authenticate(txtUname.getText(), txtPWord.getText())){
                              //display success on JFrame
                      }else{
                              //display failure on JFrame
                      }
                }
          }); 
```

其中 txtUname 和 txtPWord 可能是 JFrame 上的 2 个 JTextField，而 lginBtn 可能是 JFrame 上的一个按钮。

如果您需要在其他地方执行相同的功能，那么您再次实例化 Login 并调用该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:44:09.657

这是[How-to-create-a-login-form-in-javax.swing 的一个很好的工作示例](http://www.daniweb.com/software-development/java/code/216754/how-to-create-a-login-form-in-javax.swing#)

[Java 初学者 Swing](http://www.javabeginner.com/java-swing/java-swing-tutorial)的 Swing 教程链接

# ms-access - Access 2010：在拆分数据库架构上实施用户级安全性的推荐安全机制是什么

> ID：13780454
> 
> 赞同：2
> 
> 时间：2012-12-08T18:23:40.997
> 
> 标签：ms-access, ms-access-2010

我知道 Access 不是实现安全性的方法 - 但就目前而言，在使用拆分数据库架构的 access 2010 数据库上实现用户级安全性的推荐安全机制是什么？任何评论/指向教程的指针将不胜感激。

编辑（问题结束后）：很抱歉管理员认为这会促进辩论。我不知道关于 Access 2010 中安全性的讨论会做到这一点。对于那个很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:45:32.853

如果您使用 mdb 格式而不是 2010 格式，那么您可以使用内置的用户级安全性。如前所述，这是一个基于文件的系统，因此永远不可能真正安全。

另一种方法是使用 SQL Server 甚至 MySql 的众多免费版本中的一个作为后端数据库部分。因此，您在 Access 中进行开发，但为表使用免费的数据库服务器。

所以 Access 2010 仍然支持文件的用户级别安全性，但您必须使用 + 创建 mdb 文件而不是 accDB 文件。

不清楚您所说的安全性是什么意思？对于某些人来说，这意味着发布登录名和用户密码。对于其他人来说，这仅仅意味着锁定应用程序的设计部分并限制用户对应用程序进行更改。请记住，限制对应用程序的更改并不是真正的某种“用户”安全。您可以在不使用内置安全系统的情况下锁定并防止更改应用程序。因此，请保留阻止用户使用特定表单或表格（基于登录的用户安全）的概念，而不是阻止用户进行设计更改或查看代码的想法（不是用户安全，而只是一个锁定的应用程序）不需要用户登录和权限设置）。

# android - 将 Android 手机中的 SQLite 数据同步到 Windows PC MySql 数据库

> ID：13780458
> 
> 赞同：3
> 
> 时间：2012-12-08T18:23:54.687
> 
> 标签：android, sqlite, synchronization, data-synchronization

我正在开发一个应用程序，该应用程序需要将 SQLite 数据从 Android 设备同步到桌面 Windows PC 上的 MySQL 数据库，我不知道该怎么做。

请给我一些示例代码或教程的参考。我在互联网上搜索，但没有找到教程或源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:33:48.680

您必须在服务器端创建一个 Web 服务（使用任何语言，例如 PHP、Java 或 .Net），然后`HttpUrlConnection`在您的 Android 应用程序中使用（您可以谷歌如何连接或发送数据到 Web 服务）。

# css - 添加与最后一个单词断开的链接图标？

> ID：13780461
> 
> 赞同：1
> 
> 时间：2012-12-08T18:24:05.000
> 
> 标签：css

是否可以在与最后一个单词断开的链接之后添加一个图标？

`:after`并且`content`都在 Chrome 中中断。

测试：http: [//jsfiddle.net/V32Wd/1/](http://jsfiddle.net/V32Wd/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T22:18:56.477

对于标记`<a class="after" href="#">The icon should not break alone</a>`，请使用以下 CSS 代码：

```
a.after:after {
    content: '\feff' url('...');
    padding-left: 4px;
    white-space: nowrap;
} 
```

添加`'\feff'`意味着添加了U+FEFF ZERO WIDTH NO-BREAK SPACE，一个不可见的控制字符，防止前后换行。这对 Chrome 和 IE 有帮助，但对 Firefox 没有帮助。在 Firefox 上添加`white-space: nowrap`处理该问题的交易；这是不合逻辑的，因为根据定义，它只防止伪元素内部的换行，问题是正常内容和伪元素之间的换行——无论如何，因为它有帮助，让我们在这里使用它。

更常见的方法是添加一个图标作为`a`元素的背景图像，放置在右侧。这避免了换行问题。

# java - 带有actionListeners的多个选择列表？

> ID：13780466
> 
> 赞同：0
> 
> 时间：2012-12-08T18:24:26.710
> 
> 标签：java, jsf, tree, components

我想实现以下目标：

*   应该可以创建条目，并且这些条目（字符串）应该显示为列表。列表条目应该可以通过单击来选择（每个条目上都有侦听器方法），而无需按住任何键盘按钮。单击已选择的条目也应取消选择它。

*   此外，一个条目应该有一个维度，它将指定子条目的数量。这些应该在条目之前通过某种展开按钮可见。同样，子条目也应该是多选的。

是否有已经提供此类功能的组件？如果没有，我应该如何构建这样的组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:16:40.303

我不知道有任何组件可以做到这一点。

话虽如此，[OmniFaces](http://omnifaces.org)有一个允许为分层元素自定义标记的[树组件，它可能值得研究。](http://showcase.omnifaces.org/components/tree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:22:23.757

我现在找到了 GWT Tree Cell 组件： http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#! [CwCellTree](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTree)

# ruby-on-rails - `Model.first(:order => 'random()')` 总是返回相同的对象

> ID：13780469
> 
> 赞同：0
> 
> 时间：2012-12-08T18:24:47.820
> 
> 标签：ruby-on-rails, ruby, activerecord, random

当我尝试这样做时：

```
questions = Array.new
2.times do
  question = Question.first(:order => 'random()')
  questions << question
end 
```

并检查元素：

```
raise questions.inspect 
```

它返回一个包含两个相同对象的数组，但我希望我的`questions`数组中有两个不同的对象。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:21:06.007

您可以尝试在 Question 上创建一个返回随机记录的方法：

```
class Question < ActiveRecord::Base

...

  def self.random
    if (c = count) != 0
      find(:first, :offset =>rand(c))
    end
  end

...

end 
```

然后使用：

```
questions = Array.new
2.times do
  question = Question.random
  questions << question
end 
```

# css - 如何使 twitter bootstrap 导航栏固定宽度？

> ID：13780471
> 
> 赞同：2
> 
> 时间：2012-12-08T18:25:02.153
> 
> 标签：css, twitter-bootstrap, css-float

如何使 twitter bootstrap 导航栏固定宽度，同时保持居中？

我尝试在 .navbar 中添加宽度参数，但导航栏未对齐。

```
.navbar {
overflow: visible;
margin-bottom: 20px;
color: #956362;
*position: relative;
*z-index: 2;
width: 650px; 
} 
```

我也试过

```
<div class="span6 offset3"> 
```

但这也使它错位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T18:51:28.233

用 div 包围它。给那个 div 一个固定的宽度。

就像是：

```
<div class="navbar-outer">
  <div class="navbar">
     <!--here goes the rest of the code-->
  </div>
</div> 
```

CSS：

```
.navbar-outer {
  width:500px;
} 
```

# c++ - 在 Windows NDIS 的 passthru 示例中，如何发送带有特定适配器的 NDIS_PACKET？

> ID：13780472
> 
> 赞同：0
> 
> 时间：2012-12-08T18:25:09.620
> 
> 标签：c++, windows, device-driver, ndis

我正在通过修改 Windows WDK 中的原始 passthru 示例，在 Windows 平台上开发类似 NAT 的软件。

这是我机器中的几个网络适配器，我想分析我收到的每个数据包，然后决定将数据包转发到哪个适配器。问题来了：调用 NdisSend 函数时不知道如何指定发送的适配器。

如下，在 NdisSend 中有一个 BindingHandle arg，但据我了解，它应该代表 passthru 中的所有适配器（可能不对:)

NdisSend(&Status, pAdapt->BindingHandle, MyPacket);

那么如何在调用 NdisSend 时指定这样的适配器：{62E9DB05-88D3-479D-A194-22D6A591DB96}？

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:29:21.547

我认为线索是`pAdapt->BindingHandle`，`pAdapt`指向包含所有适配器特定信息的结构的指针也是如此，包括`BindingHandle`. 所以每个适配器都有不同`BindingHandle`的 ，这就是您控制哪个适配器获取数据包的方式。

此外，您可能想调查是否可以为您的驱动程序使用 WFP 而不是 NDIS。

# database - 在数据库中存储年份

> ID：13780481
> 
> 赞同：29
> 
> 时间：2012-12-08T18:27:48.443
> 
> 标签：database, postgresql, database-design, postgresql-9.1

年份数据的最佳 PostgreSQL 数据类型是什么，例如 2006 年或 1847 `TEXT`年。 , `SMALLINT`, `DATE`? 理想情况下，我希望能够使用第二个年月日列（`DATE`格式）查询该列。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-08T18:49:41.910

一年是一个整数，甚至以有意义的方式支持整数运算，所以`text`没有意义。你没有一个月或一天，所以`date`就在窗外。[精美](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-INT)的手册有这样的说法`smallint`：

> 该`smallint`类型通常仅在磁盘空间非常宝贵的情况下使用。

这`integer`是一个自然的选择。如果您打算将此值与`date`s 和结合起来`timestamps`，那么[`interval`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html#DATATYPE-DATETIME-TABLE)可能是有意义的，因为[日期和时间函数以及运算符](http://www.postgresql.org/docs/current/interactive/functions-datetime.html)对 s 有很好的理解`interval`。

所以这取决于你计划用这个“年”做什么，以及它到底是什么。听起来简单`integer`是合适的，但您可能需要花点时间将其与“第二年-月-日列”（`date`大概是一列）结合起来，具体取决于它们需要如何协同工作。

# javascript - 在 DIV 中配对数组元素

> ID：13780482
> 
> 赞同：2
> 
> 时间：2012-12-08T18:28:21.123
> 
> 标签：javascript, html, css, arrays

我有从文本文件读取并插入元素的脚本，以便它们可以被设置样式和显示。但是，我现在想在一个 DIV 中配对两个元素。这是代码：

```
var lines = request.responseText.replace(/\r/g, "").split("\n");    // Remove carriage returns (\r) and place text into an array, split at the newline character (\n)
        for (var i = 0; i < lines.length; i++) {    // Cycle through each line in the array
            if (lines[i].length >= 57) {    // Check if the current line is lengthy, and if so.....separate function
            }
            var coup = document.createElement("div");    // Create a div element
            coup.id = "line" + i;    // Give the div an ID in the form of line0, line1, etc.
            coup.innerText = coup.textContent = lines[i];    // Place the current line of text in the div
            el_status.appendChild(coup);    // Append the div to the status box
        } 
```

我希望 line0 和 line1 进入一个 DIV。然后我希望 line2 和 line 3 进入另一个 DIV ......

var coup 不必是 div，我不介意将其更改为 ap、span 或 li。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:33:14.880

```
var lines = request.responseText.replace(/\r/g, "").split("\n");
for (var i = 1; i < lines.length; i += 2) {
    var coup = document.createElement("div");
    coup.id = "line" + i;
    coup.textContent = lines[i - 1] + lines[i];

    el_status.appendChild(coup);
}​ 
```

每次只需迭代两个，然后将它们放在同一个 DIV 中，或者它的一些变体中，这取决于你所追求的结构？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:36:56.263

尝试`document.createTextNode();`在迭代的每一步添加两条线的基本方法。

```
var lines = request.responseText.replace(/\r/g, "").split("\n");    // Remove carriage returns (\r) and place text into an array, split at the newline character (\n)
        for (var i = 0, l = lines.length; i < l; i += 2) {    // Cycle through each line in the array
            if (lines[i].length >= 57) {    // Check if the current line is lengthy, and if so.....separate function
            }
            var coup = document.createTextNode(lines[i-1] + lines[i]);    // Create a div element
            coup.id = "line" + i;    // Give the div an ID in the form of line0, line1, etc.
            coup.innerText = coup.textContent = lines[i];    // Place the current line of text in the div
            el_status.appendChild(coup);    // Append the div to the status box
        } 
```

此外，DOM 操作非常昂贵，并且在 for 循环中进行附加可能会减慢速度。所以我宁愿这样做：

```
var lines = request.responseText.replace(/\r/g, "").split("\n");    // Remove carriage returns (\r) and place text into an array, split at the newline character (\n)
var appendedLines = [];//create a new array.
        for (var i = 0, l = lines.length; i < l; i += 2) {    // Cycle through each line in the array
            if (lines[i].length >= 57) {    // Check if the current line is lengthy, and if so.....separate function
            }
            var coup = document.createTextNode(lines[i-1],lines[i]);    // Create a div element
            coup.id = "line" + i;    // Give the div an ID in the form of line0
            appendedLines.push(coup);   // Append the div to the status box
        }
el_status.appendChild(appendedLines.join(''));// this uses a single append statement. 
```

此外，重点`l = lines.length`是进一步加快速度。当您使用带有`i < someArray.length`条件的 for 循环时，JS 解释器将查找`someArray.length`迭代的每一步。存储对`someArray.length`修复该问题的引用。

# sql - 在 Oracle 中记录范围

> ID：13780485
> 
> 赞同：1
> 
> 时间：2012-12-08T18:28:27.977
> 
> 标签：sql, oracle, oracle11g

我想将有关“可接受的环境温度范围”的数据插入 Oracle。我可以这样做 - 创建两个字段： 但是我很感兴趣是否可以将这两个值存储到一个表行中`Acceptable minimum ambient temperature`？`Acceptable maximum ambient temperature`是否有一些合适的表格行类型可以使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:39:27.833

首先，我认为您的第一种方法没有任何问题 - 将 min 和 max 存储为单独的列。但是如果你觉得你希望它被存储在一个中，你总是可以定义你自己的对象类型——你可以在网上找到许多关于自定义类型的链接，例如，[http://www.stanford.edu/dept/itss/docs /oracle/10g/appdev.101/b10807/10_objs.htm](http://www.stanford.edu/dept/itss/docs/oracle/10g/appdev.101/b10807/10_objs.htm)；在这里发布它是一个很大的话题。

另一种方法是使用 XMLType（就我个人而言，在这种情况下我永远不会使用它，但值得一提）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:45:20.943

当然可以“将两个值存储到一个表行中”。数据库关系管理系统都是关于每行存储多个值！一种适当的行“类型”是`(MIN_AAT integer, MAX_AAT integer)`

也许您考虑将两个值存储到一个列中？

# java - 通过读取配置文件使用石英在预定时间运行脚本

> ID：13780486
> 
> 赞同：1
> 
> 时间：2012-12-08T18:28:31.950
> 
> 标签：java, quartz-scheduler

我可以知道是否可以创建一个可以读取配置文件并使用石英触发一些脚本（例如 shell 脚本）的程序？我想不时添加新任务，是否可以通过仅更改配置文件而不更改代码本身来做到这一点？如果可能的话，如果有人能教我如何做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:40:02.447

在运行时添加作业和触发器的方法很少：

*   使用 API（您可以将其包装在一些 Web 服务或 GUI 中）

*   使用 JMX（与上面类似，但为您提供 JMX 上的 API）

*   使用[`XMLSchedulingDataProcessorPlugin`](http://quartz-scheduler.org/api/2.1.0/org/quartz/plugins/xml/XMLSchedulingDataProcessorPlugin.html)它在启动时从任意 XML 文件读取作业（因此需要重新启动。有关更多详细信息并探索 XML 格式，请参阅[我的文章](http://nurkiewicz.blogspot.no/2012/04/quartz-scheduler-plugins-hidden.html)[`job_scheduling_data_1_8.xsd`](http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd)

# visual-studio - 有关 Visual Studio Express 2012、xaml 对象的文档

> ID：13780489
> 
> 赞同：0
> 
> 时间：2012-12-08T18:28:49.723
> 
> 标签：visual-studio, xaml

我整天在 Google 上搜索，但没有找到包含所有对象列表的文档，以在 Visual Studio Express 2012 for Windows8 中创建可视化应用程序。我在“MainPage.xaml”中，但不知道“Grid”“Button”“TextBlock”控件及其属性...在哪里可以找到它们？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:15:06.123

文档位于[此处](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465351.aspx)。此外，所有控件都应在工具箱视图中列出。它通常位于窗口的左侧。

# apache - apache2 无法访问文件

> ID：13780490
> 
> 赞同：0
> 
> 时间：2012-12-08T18:28:54.357
> 
> 标签：apache, ubuntu

我有一个可怕的问题。

昨天，我安装了 LAMP，并使用`sudo chown`和`sudo chmod`设置了所有 www 文件的权限。现在，我不知道如何将其重置为默认权限。

可能 apache2 没有文件权限（403 错误“禁止”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:31:33.633

没有足够的信息来了解这里发生了什么，但一种方法可能只是卸载（清除），清除所有 apache 文件，然后重新安装......

这些是我要运行的命令：

```
# apt-get purge apache2
# rm -rf /var/log/apache2
# rm -rf /var/cache/apache2
# rm -rf /var/www/*
# rm -rf /etc/apache2
# apt-get install apache2 
```

请注意，它们需要以 root 身份运行（即使用`sudo`）-`#`表示 root 提示。另外，请务必备份您更改的任何内容（尽管如果您刚刚安装它，那不应该太多）

编辑：

如果您所做的只是破坏 上的权限`/var/www`，那么只需：

```
sudo chown -R www-data:www-data /var/www
find /var/www/ -type f -exec sudo chmod 644 {} \;
find /var/www/ -type d -exec sudo chmod 755 {} \; 
```

请注意，它工作所需要的只是让`www-data`apache*用户*（`www-data`

# java - 使用 oAuth 对 javascript 小部件进行身份验证

> ID：13780491
> 
> 赞同：2
> 
> 时间：2012-12-08T18:28:55.197
> 
> 标签：java, javascript, oauth, widget

我正在建立一项营销服务，我们在其中为各种公司提供小部件以将其托管在他们的网站上。这些小部件应该使用 javascript 直接从浏览器与我的服务器中的其余 API 对话，以获取和发布信息。最终用户可能需要也可能不需要授权，具体取决于他们访问的数据类型。我们需要使用流行的社交网络（如 facebook、twitter 等）对最终用户进行身份验证。实际上，我们的服务器端 api 需要验证两件事 1\. 呼叫来自各自公司的网站 2\. 呼叫由适当的端进行用户。

我不确定我必须在这里使用哪种身份验证。我认为，我不能使用 oauth(1.0, 2.0)，因为它需要无法安全存储在 javascript 中的消费者密钥和秘密。是否有任何可以使用的修改后的 oauth 流程？已经有人解决了这个问题。如果我有人在服务器端有一个基于弹簧的解决方案，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:14:20.693

您无法验证呼叫是否来自相应公司的网站。呼叫将来自最终用户的浏览器，而不是站点。

此外，浏览器不能直接调用您的站点（至少不使用`XMLHTTPRequest`，因为您的小部件和服务器不在同一个域中。您可以使用 JSONP 解决此问题。

您可以使用 OAuth2，以及此处规范中所述的隐式授权流程：[https ://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.2](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.2)

# jquery - ajax返回后提交表单

> ID：13780496
> 
> 赞同：1
> 
> 时间：2012-12-08T18:29:18.300
> 
> 标签：jquery, ajax, forms

当用户提交表单时，我希望 ajax 使用以下命令检查电子邮件地址是否存在

```
$.post("checkemail.php", {email: email}) 
```

根据我将选择提交或不提交的值（preventdefault）

但是，表单在返回值之前提交。我尝试了以下方法：

```
$.when($.post("inc/checkemail.php", {email: email})).done(function(result) {
 // code here
} 
```

但是我似乎无法做到这一点。我究竟做错了什么？

提前感谢您的帮助，你们总是很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T18:37:01.287

无论帖子返回什么，都应该始终停止默认行为。只有在“完成”时您才决定提交表单：

```
$('form').on('submit', function(e) { 
  e.preventDefault()
  $.post('checkemail.php', {email: email})
  .done( function(result){
    // check response to see if the email does not exist
    $('form').off('submit') // We don't want to stop the submission anymore.
    $('form').submit()
  })
}) 
```

**编辑：**另外，请注意 $.post 返回一种延迟对象，因此 $.when 调用是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:32:28.510

将依赖于响应的代码放入`checkmail.php`回调中`$.post`：

```
$.post("checkemail.php", {email: email}, function(result){
    // "result" = response from checkmail.php
    ...
}); 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:33:46.853

```
$.post("checkemail.php", {email: email}, function(data, textStatus, jqXHR) {
    // this gets executed when the AJAX has finished and had succes.
}); 
```

直接来自文档：[http](http://api.jquery.com/jQuery.post/) ://api.jquery.com/jQuery.post/ 。

# iphone - 频繁切换视图导致卡顿

> ID：13780498
> 
> 赞同：1
> 
> 时间：2012-12-08T18:29:50.737
> 
> 标签：iphone, xcode, performance

我制作了一个运行非常流畅的应用程序。但是，每次我切换视图时，它都会变得更加滞后，最终（在大约 5 次切换之后）它显示出令人难以置信的滞后量。视图切换似乎导致它。我能做些什么来防止它？是因为我没有正确切换视图，还是 ARC？

注意：我使用 IB 来切换视图（ctrl + 单击 -> 画一条线，然后选择模态）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:38:29.920

使用 Instruments 中的分配工具，验证您是否正确管理内存。

两个考虑

1.  如果您在每次切换时创建视图的新实例，请确保正确释放旧视图（以及与其关联的所有对象）。
2.  更好的方法是，如果您只是更改视图中的数据，而不是显示完全不同的视图，请使用视图的单个实例，然后使用新数据对其进行更新。

无论哪种方式，听起来您的问题是您不断分配视图的新实例（以及随之而来的对象）并且没有正确释放过时的副本。

Instruments 中的分配将准确告诉您内存中有多少副本。您应该看到当您切换视图时，实例的数量不会持续增加。

# iphone - 对于 TableViewController 和向下钻取的 UI 决策

> ID：13780501
> 
> 赞同：0
> 
> 时间：2012-12-08T18:30:26.290
> 
> 标签：iphone, ios

不像设计问题那样是编程问题......

我有一个 tableviewcontroller，我想显示艺术家和专辑列表。

很简单，但我想为艺术家和专辑显示一个“详细信息”页面。

使用（艺术家->专辑）的层次结构，您选择一个艺术家，然后显示专辑列表。然后您可以选择专辑详细信息。

但是，我也希望能够看到艺术家的详细信息。

所以，我有两个想法，想得到一些建议。

1.  在专辑详细信息中，包括一个按钮/链接/某些内容，然后说“显示艺术家详细信息”。虽然我不太喜欢这个...

2.  不要使用层次结构并有很长的列表：（抱歉，此处无法正确格式化：） LINE1：艺术家 ABC LINE2：艺术家 ABC 的专辑 123
    LINE3：艺术家 ABC 的专辑 234 LINE4：等。

这有点长，但有点喜欢它。

或三：使用#2 的想法，但稍微缩进专辑文本以表明它们与父级相关。

在我拥有的应用程序中，我还没有看到一个通用的用户界面……有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:24:08.387

我的想法是使用通常的 UINavigationViewController 层次结构并将这些典型的 ⓘ-info-buttons 添加到每个艺术家/专辑单元格的右侧。现在，当您在艺术家列表中时，仅在用户点击 ⓘ 时显示详细信息页面，并在用户点击单元格中的任何其他位置时显示艺术家专辑列表。

另一种可能性是在艺术家专辑列表的 UINavigationItem 中显示艺术家详细信息的 UIBarButton。

希望这可以帮助

# php - zend 框架子表单isValidPartial？

> ID：13780502
> 
> 赞同：1
> 
> 时间：2012-12-08T18:30:36.603
> 
> 标签：php, zend-framework, subforms

我有一个表格，上面有几个子表格。我有一种`isValid`用于检查是否只有一个特定子表单有效的表单方法。例如，我必须检查是否`subform2`正确验证。如果子表单验证成功，则整个表单都应该验证成功，即使其他子表单的值错误。他们只是不应该被验证。我试过这样的事情：

```
if($subform->isValidPartial($_POST))
    return true;
}else{
    return false;
} 
```

但没有成功。此代码始终返回 true。当整个表单在没有被`isValid`覆盖的情况下正常验证时，子表单会被正确验证，但你都会被验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:36:46.007

`isSubFormValid`如果至少有一个子表单有效，则返回 true。您可以指定子表单名称或 pass `null`。

```
class My_Form extends Zend_Form
{
    public function isSubFormValid($name = null, array $data = null)
    {
        if (is_null($name)) {
            $subForms = $this->getSubForms();
        } else {
            $subForms = array($this->getSubForm($name));
        }

        foreach ($subForms as $subForm) {
            if ($subForm->isValid($data)) {
                return true;
            }
        }    

        return false;
    }    
} 
```

使用示例：

```
class Example extends My_Form
{
    public function init()
    {
        $subForm1 = new Zend_Form_SubForm();
        $subForm1->addElement($this
            ->createElement('text', 'name')
            ->setRequired(true));

        $subForm2 = new Zend_Form_SubForm();
        $subForm2->addElement($this
            ->createElement('text', 'name')
            ->setRequired(true));

        $this->addSubForm($subForm1, 'form1');
        $this->addSubForm($subForm2, 'form2');

        $this->addElement($this->createElement('submit', 'send'));
    }    
}

/* ... */
public function indexAction()
{
     $form = new Example();

     if ($this->_request->isPost()) {
         if ($form->isSubFormValid(null, $this->_request->getPost())) {
             die('is valid');
         }
     }

     $this->view->form = $form;
}

/* ... */ 
```

# php - PHP中的Json加post加curl

> ID：13780509
> 
> 赞同：0
> 
> 时间：2012-12-08T18:31:08.383
> 
> 标签：php, json, curl

在阅读我的实际问题之前，请不要关闭这个问题。我已经看到了许多相关的问题，但我仍然有。只是我想通过在 PHP 中使用的方法发送一个`json_encoded`数组。当我设置数据不发布。我收到空数组。当我删除内容类型行时，数据被发布但不是 json。这是我的代码`POST``CURL``content-type as application/json``post`

```
 $data = array('id' => $post['id'], 'action' => $post['action']);
 $post_data = http_build_query($data);
 curl_setopt($ch, CURLOPT_URL, $url);
 curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
 curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
 curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($post_data)); 
```

在这种情况下，我收到空帖子。如果我注释掉该行`curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));`，我将收到帖子数据，但不会收到 json 编码。我想要 json_encoded 数组。有人会告诉我我做错了什么吗？

最好的祝福：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:41:52.370

您正在将查询字符串编码为 json 而不是数组删除`$post_data = http_build_query($data);`并传递`$data`给 json_encode。

```
 $data = array('id' => $post['id'], 'action' => $post['action']);
 curl_setopt($ch, CURLOPT_URL, $url);
 curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
 curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
 curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data)); 
```

当然，这可以让服务 nedds 支持 json 帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:42:08.420

尝试 send-n-accept RAW POST 请求，通过

```
<?php $postdata = file_get_contents("php://input"); ?> 
```

[原始帖子](http://php.net/manual/ru/reserved.variables.httprawpostdata.php)

# iphone - 使用 Google Analytics（分析）iOS SDK 进行应用内购买跟踪

> ID：13780510
> 
> 赞同：13
> 
> 时间：2012-12-08T18:31:12.827
> 
> 标签：iphone, ios, google-analytics, in-app-purchase, storekit

我想使用适用于 iOS v2 的 Google Analytics SDK 跟踪应用内购买，如他们的[电子商务跟踪](https://developers.google.com/analytics/devguides/collection/ios/v2/ecommerce)指南中所述。

`SKPaymentTransactionStatePurchased`收到交易更新后，我目前正在执行以下操作：

```
- (void) trackTransaction:(SKPaymentTransaction*)transaction
{
    NSString *transactionIdentifier = transaction.transactionIdentifier;
    GAITransaction *gaiTransaction = [GAITransaction transactionWithId:transactionIdentifier withAffiliation:@"App Store"];

    SKPayment *payment = transaction.payment;
    NSString *productIdentifier = payment.productIdentifier;
    SKProduct *product = [self productForIdentifier:productIdentifier];
    NSString *productTitle = product.localizedTitle;
    int64_t priceInMicros = product.price.floatValue * 1000000; // FIXME: Doesn't consider different currencies
    [gaiTransaction addItemWithCode:productIdentifier name:productTitle category:nil priceMicros:priceInMicros quantity:payment.quantity];

    gaiTransaction.revenueMicros = priceInMicros * payment.quantity; // FIXME: doesn't consider Apple's cut

    id<GAITracker> tracker = [GAI sharedInstance].defaultTracker;
    [tracker trackTransaction:gaiTransaction];
} 
```

以上是跟踪应用内购买的正确方法吗？我至少发现了两个问题：

1.  `SKProduct`返回本地化价格，如果我按原样跟踪它，收入汇总将不正确。有没有办法使价格正常化？
2.  返回的收入没有考虑苹果的削减，这并不总是 30%。是否有可能在应用程序内获得净收入？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-09T09:53:13.483

> SKProduct 返回本地化价格，如果我按原样跟踪它，收入汇总将不正确。有没有办法使价格正常化？

[适用于 iOS v3 的 Google Analytics SKD](https://developers.google.com/analytics/devguides/collection/ios/v3/ecommerce)添加了对货币的支持。跟踪事务如下所示：

```
- (void)storePaymentTransactionFinished:(NSNotification *)notification
{
    SKPaymentTransaction *paymentTransaction = notification.transaction;
    if (paymentTransaction.transactionState == SKPaymentTransactionStateRestored) return;

    SKPayment *payment = paymentTransaction.payment;
    NSString *sku = payment.productIdentifier;
    SKProduct *product = [[RMStore defaultStore] productForIdentifier:sku];
    NSLocale *priceLocale = product.priceLocale;
    NSString *currencyCode = [priceLocale objectForKey:NSLocaleCurrencyCode];
    NSString *transactionId = paymentTransaction.transactionIdentifier;
    NSNumber *productPrice = product.price;
    {
        NSNumber *revenue = @(productPrice.floatValue * payment.quantity);
        GAIDictionaryBuilder *builder = [GAIDictionaryBuilder createTransactionWithId:transactionId
                                                                          affiliation:@"App Store"
                                                                              revenue:revenue
                                                                                  tax:0
                                                                             shipping:0
                                                                         currencyCode:currencyCode];
        NSDictionary *parameters = [builder build];
        [_tracker send:parameters];
    }
    {
        GAIDictionaryBuilder *builder = [GAIDictionaryBuilder createItemWithTransactionId:transactionId
                                                                                     name:product.localizedTitle
                                                                                      sku:sku
                                                                                 category:@"In-App Purchase"
                                                                                    price:productPrice
                                                                                 quantity:@(payment.quantity)
                                                                             currencyCode:currencyCode];
        NSDictionary *parameters = [builder build];
        [_tracker send:parameters];
    }
} 
```

为方便起见，上面的代码使用[了 RMStore](https://github.com/robotmedia/RMStore)。

> 返回的收入没有考虑苹果的削减，这并不总是 30%。是否有可能在应用程序内获得净收入？

不。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T15:29:38.083

好问题，很遗憾你没有答案，因为我刚刚遇到了同样的问题。

因此，为了激发对这个主题的讨论，我想提出这个“解决方法”。

```
NSString *affiliation = [product.priceLocale objectForKey:NSLocaleCurrencyCode];  
GAITransaction *gaiTransaction = [GAITransaction transactionWithId:transactionIdentifier withAffiliation:affiliation]; 
```

这个想法是你不能对应用内的不同货币做任何事情。相反，您需要将问题转移到分析并使用它的过滤来计算每个国家应用商店的收入。

因此，如果是美国交易，则*关联公司*将是“美元”。

至于

> 考虑到苹果的削减，并不总是 30%

这对我来说是个新闻。我的印象是 30% 是苹果公司一成不变的。所以我只是将收入乘以 0.7

# ruby-on-rails - Rails - 多态关联失败

> ID：13780512
> 
> 赞同：1
> 
> 时间：2012-12-08T18:31:18.600
> 
> 标签：ruby-on-rails, activerecord, associations, has-many, belongs-to

这应该很容易解决，但我是 Rails 新手。现在深入[研究有关关联的 Rails 指南](http://guides.rubyonrails.org/association_basics.html)，但不断遇到障碍。

我有一个可以向其他用户发送消息的用户模型。为此，所有线程都有一个对话模型，每个单独的消息都有一个对话项模型。

这些是现在的协会：

## 用户.rb

```
has_many :received_messages, as: :recipient, class_name: 'Conversation', foreign_key: :recipient_id
has_many :sent_messages, as: :sender, class_name: 'Conversation', foreign_key: :sender_id
has_many :received_messages, as: :recipient, class_name: 'Conversation_item', foreign_key: :recipient_id
has_many :sent_messages, as: :sender, class_name: 'Conversation_item', foreign_key: :sender_id 
```

## 对话.rb

```
has_many :conversation_items, dependent: :destroy
belongs_to :sender, polymorphic: true
belongs_to :recipient, polymorphic: true 
```

## 对话项目.rb

```
belongs_to :conversation
belongs_to :sender, polymorphic: true
belongs_to :recipient, polymorphic: true 
```

我正在尝试通过他的对话项目访问用户，如下所示：

```
<%= conversation_item.sender.inspect %> 
```

这返回`nil`- 属性 sender 似乎确实有效，但不知何故不包含任何内容。但是，对话项目确实有一个 sender_id。

我在上面的关联中缺少什么？还是其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:24:03.510

在我看来，您不需要在这里使用多态关系。你应该能够做到这一点：

```
class User < ActiveRecord::Base
  has_many :participations, class_name: 'Participant'
  has_many :conversations, through: :participations
  has_many :conversation_items, through: :conversations
end

class Participant < ActiveRecord::Base
  belongs_to :user
  belongs_to :conversation
end 

class Conversation < ActiveRecord::Base
  has_many :participants
  has_many :conversation_items
end

class ConversationItem < ActiveRecord::Base
  belongs_to :conversation
  belongs_to :sender, class_name: 'User', foreign_key: 'sender_id'
end 
```

对我来说，这作为一个领域模型更有意义，其中一个对话有很多参与者。您可以将发件人附加到对话项目，并且对话中的每个参与者（不是发件人）都是隐含的收件人。对话有发送者和接收者是没有意义的，因为对话是双向或多向对话。

多态关系在这里不起作用的原因是多态关系适用于表可以引用不同类型项目的情况。例如，假设您的 ConversationItem 有很多附件，并且附件也可以应用于帖子。你会有类似的东西：

```
class ConversationItem < ActiveRecord::Base
  #...
  has_many :attachments, as: :attachable
  #...
end

class Post < ActiveRecord::Base
  has_many :attachments, as: :attachable
end

class Attachment < ActiveRecord::Base
  belongs_to :attachable, polymorphic: true
end 
```

附件将具有字段`attachable_id`和`attachable_type`. 当您从对话项目中查询附件时，您将有一个类似的查询`SELECT * FROM attachments where attachable_id = <id of the conversation item> and attachable_type = 'ConversationItem'`。因此，多态关联使您能够将模型附加到许多不同类型的其他模型。

在这种情况下，您可以看到拥有多态关系是如何没有意义的，除非您将拥有许多不同类型的模型来发送和接收对话项目，因为在您的 conversation_items 表中，您将拥有`sender_type`, `sender_id`, `recipient_type`, `recipient_id`。

您的模型遇到的另一个问题是您尝试使用不同的参数两次定义相同的关系。当您调用 时`has_many :foo`，Rails 会生成一堆不同的方法，例如`foos`、`foos=`等等。如果您再次调用它，您只是使用新参数重新定义这些方法。

**跟进**

您不一定需要有 Participant 模型。拥有它使您能够让多个用户参与，并且可以避免为同一模型创建多个关系。您可以通过关系实现相同的目的`has_and_belongs_to_many`，但是如果需要，您将失去将额外属性附加到连接表的能力。

例如，您希望允许人们退出对话而不删除他们曾经是参与者的信息，使用加入模型，您可以添加一个布尔字段调用`active`，设置为`false`某人退出的时间。使用 HABTM，您无法做到这一点。让参与者离开需要从连接表中完全删除该对。我通常更喜欢加入模型，比如这里的参与模型，因为你永远不知道你的模式会如何演变。

也就是说，这里是 HABTM 的一个例子：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :conversations
end

class Conversation < ActiveRecord::Base
  has_and_belongs_to_many :users
end 
```

在这里，您没有连接模型，但您需要创建一个连接表才能使其工作。一个迁移的例子是：

```
create_table :conversations_users, :id => false do |t|
  t.integer :conversation_id
  t.integer :user_id
end

add_index :conversations_users, [:conversation_id, :user_id], unique: true 
```

连接表的组成部分的名称按字母顺序排列，即`conversations_users`不是`users_conversations`。

**进一步跟进**

如果您使用 Participant 表，外键将为 on`participants`和`conversation_items`。

```
participants
  user_id
  conversation_id

conversation_items
  conversation_id
  sender_id 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T18:47:48.210

你模型的逻辑似乎很好。我的建议是控制器和视图结构。当您在 Rails 中创建关联时，嵌套资源的常用方法（在您的 routes.rb 中）：

资源 :conversations 做资源 :conversation_items 结束

然后你的 Conversation_items 控制器应该在 new 和 create actions 中有这样的东西：

```
def new
  @conversation = Conversation.find(params[:conversation_id]
  @conversation_item = Conversation_item.new
end

def create
  @conversation = Conversation.find(params[:conversation_id]
  @conversation_item = @conversation.conversation_items.build(params[:conversation_items]
end 
```

最后，在您的 _form.html.erb （同时提供创建和更新操作）中：

```
 <%= form_for [@conversation, @conversation_item] do |f| %>

     # your code here

  <%= end %> 
```

我在那里，正如你[在这里看到](https://stackoverflow.com/questions/5207038/the-better-way-to-pass-the-foreign-key-value-to-the-rails-controller)的那样......它是苦乐参半的:)

# matlab - 如何在 MATLAB 上从 parfor 检索变量？

> ID：13780519
> 
> 赞同：2
> 
> 时间：2012-12-08T18:31:49.643
> 
> 标签：matlab, parallel-processing

我正在尝试检索我在 MATLAB 上的 parfor（并行）上执行的变量，但我不能。这是我的代码：

```
clear all
clc    
matlabpool open 4

parfor i = 1:4
    a = 2^i;
end

matlabpool close 
```

我希望能够恢复对不同工作人员执行的不同值。例如，我想访问值为 2^1 的 a(1)，访问值为 2^2 的 a(2)，依此类推。非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:35:56.590

覆盖单个变量时不能有多个值`a`，请尝试：

```
clear; clc;
matlabpool open 4

a = zeros(4,1); 
parfor i = 1:4
    a(i) = 2^i;
end

matlabpool close 
```

并且有很好的例子说明如何[在](http://www.mathworks.com/help/distcomp/parfor.html)`parfor`matlab 文档中使用它。

# mysql - mongo 或 sql 标记系统

> ID：13780522
> 
> 赞同：1
> 
> 时间：2012-12-08T18:31:56.153
> 
> 标签：mysql, mongodb, tagging

我脑子里有一个标签系统，这是我的想法，

1，我可以制作一个mongodb数据库并将标签添加到嵌入字段并将它们全部索引

2，我可以使用SQL，我可以将标签作为新条目添加到表中

3，我可以在 mongodb 上创建另一个集合并这样做

例如标签是“鸡”，这是文档

```
tag:"chicken",
id:"1200000,32555,8787888888" 
```

标签是鸡，id 是与鸡相关的其他文件，我认为这些系统会让我很头疼。尤其是第一个。你有什么适合我需要的标签系统想法吗？顺便说一下，会有超过一百万个不同的标签，在打开这个问题之前搜索了这个标签系统，

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:32:50.550

MongoDB 非常适合此类标记，这要归功于它索引列表的方式。考虑这样一个文档：

```
{_id: 42, name: "someName", tags: ["chicken", "parrot", "hovercraft"]} 
```

如果为`tags`字段添加索引，则可以有效地执行如下查询：

```
{tags: "chicken"} 
```

`"chicken"`此查询将查找其列表中包含的所有文档`tags`- 即所有带有`chicken`标签的文档。

我不确定这是否是您在第一点中的意思。如果是这样，我不明白为什么它会让你头疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:32:20.243

如果你想在 mongo 中实现这一点，我会创建看起来像

```
{
    tag: "chicken",
    ids : [ 12345,23456,34567 ]
},
... 
```

然后是两个索引，一个在“tag”上，一个在“ids”上（http://docs.mongodb.org/manual/core/indexes/#multikey-indexes）。

```
db.tags.ensureIndex( { "tag": 1 } );
db.tags.ensureIndex( { "ids": 1 } ); 
```

根据您需要执行的查询，在这两个属性上创建复合索引可能很有价值。 [http://docs.mongodb.org/manual/core/indexes/#compound-indexes](http://docs.mongodb.org/manual/core/indexes/#compound-indexes)

例如

```
db.tags.ensureIndex( { "ids": 1, "tag" : 1 } ); 
```

100 万个标签文档不会成为问题，我有类似的集合，大约 300 万个文档，每个文档在多键索引中平均有 15 个项目，性能非常好（来自 dev vm）。

我希望这有帮助

# java - 重新阅读该方法应该是什么，我的代码看起来对吗？

> ID：13780523
> 
> 赞同：-1
> 
> 时间：2012-12-08T18:32:01.177
> 
> 标签：java

我只是重新阅读了该方法应该做什么：

*   在末尾添加给图片，方法将其插入“where”参数值给定的位置。值应介于 0 - nPictsInAlbum
*   为 0 时，图片插入开头，其他图片右移，为图片腾出空间。
*   nPictsInAlbum 在末尾添加给定的图片

```
public boolean addPicture(Picture thePicture, int where) {
    int index = where;
    while (index < nPictsInAlbum) {
        pictArray[index - 1] = thePicture;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:34:34.283

您不会`index`在循环中更新，因此它是一个无限循环（如果输入的话）。

`index = nPictsInAlbum`从;开始 分配`pictArray[index] = pictArray[index-1]`. 一边做；一边做`index > where`；然后结束`pictArray[where] = thePicture`。

不要忘记更新`nPictsInAlbum++`！

# django - 在 Django Admin 界面中，我们可以在没有外键关系的情况下进行自动完成查找吗？

> ID：13780529
> 
> 赞同：1
> 
> 时间：2012-12-08T18:32:30.443
> 
> 标签：django, django-admin

django 管理员中有没有办法定义一个自动完成字段，该字段从另一个模型中查找值，它与之没有任何外键/多对多关系？我已经尝试过`django-grappelli`, 和`django-ajax-selects`，但似乎两者都希望我定义我想要查找的外键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:05:32.917

尝试使用 jquery 的自动完成功能： [jquery autocomplete](http://jqueryui.com/autocomplete/)

在 jquery 自动完成中，您必须准备具有适当值的列表：

*   第一种可能的方法（我总是在标准模板中使用它）是将查询集传递给上下文并在模板中的 javascript 中准备列表，如下所示：

    var some_list=[{% for element in some_list_from_context %}{"label":"{{element.name}}"}{% if not forloop.last %},{% endif %}{% endfor %}];

    问题是，我不知道扩展管理模板并将变量传递给上下文的方法。

*   第二种可能性是尝试将 javascript 文件添加到管理员：

    类媒体：js =（“路径/到/js/文件”，）

    并在该文件中对某些方法进行ajax调用，该方法提供带有对象的列表

# serial-port - 串行 COM 端口使用什么 USB 类？

> ID：13780534
> 
> 赞同：11
> 
> 时间：2012-12-08T18:32:54.797
> 
> 标签：serial-port, usb, cdc

处理与在 Windows 设备管理器中显示为 COM 端口的 USB 设备进行通信的 USB 类的名称是什么？对于 linux（至少对于 Fedora 17 和 Ubuntu 12.04），这些端口显示为 ACM（抽象控制模型，/dev/ttyACM#）。

我知道从历史上看，串行通信主要是通过现在已弃用的 RS-232 串行端口完成的。我相信今天的标准是使用 HID 通过 USB 进行通信。

谷歌搜索 ACM 显示它是 CDC（通信设备类）的一部分，CDC（通信设备类）是与 HID 相对的 USB 通信类（即 USB 设备可能使用 HID 或 CDC）。[这篇维基百科文章](http://en.wikipedia.org/wiki/USB_communications_device_class)揭示了 CDC/ACM 是一种通过 USB 模拟 RS-232 通信的方法。

有了这些信息，这种形式的串行通信不应该被称为“CDC”或“CDC/ACM”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:31:45.373

据此[，](http://www.tracesystemsinc.com/USB_Tutorials_web/USB/B1_USB_Classes/Books/A1_USB_Classes_for_Microcontrollers/slide10.htm) USB 连接的“虚拟 COM 端口”确实使用 USB CDC 类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T17:42:39.797

> 处理与在 Windows 设备管理器中显示为 COM 端口的 USB 设备通信的协议名称？

在大多数情况下，使用专有协议，例如在 FTDI/PL2303/SiLabs Serial2USB 芯片中。它们使用 Windows 特定的界面显示为 COM 端口，但这与 ACM 无关。

如果您有选择 - 例如在您自己的 USB 微控制器上 - 我建议放弃 COM 端口并使用 WINUSB 或 LibUSB 直接与您的设备通信，即使您每个只有一个 Bulk-In 和 Bulk-Out 端点。

# c++ - c++中实方法和虚方法的区别

> ID：13780538
> 
> 赞同：0
> 
> 时间：2012-12-08T18:33:12.077
> 
> 标签：c++

我在维基百科上读过这个定义，但我想用简单的英文理解它们这些是我在维基百科上读到的定义

A `virtual function`or`virtual method`是`function`or `method`，其行为可以在继承类中被具有相同签名的函数覆盖”

“A `pure virtual function`or `pure virtual method`is a`virtual function`需要由非抽象派生类实现”

我的另一个问题是`virtual method`，`class A`如果`class B`我有`class A`并且`class B`……我读过很多书，我知道有人说这可能与这里的一些问题重复，但我真的想用简单的英语理解因为那是我如何轻松快速地了解事物的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:40:58.667

基类的非虚方法不能被继承自它的子类覆盖。（请注意，这与在子类中“重新定义”方法不同）

基类的虚方法可以被子类覆盖。（参见@juanchopanza 关于`private`可见性的评论）

基类中的纯虚方法意味着它是“抽象”（仅将其视为接口） - 因为它不应该按原样直接使用，而是基类期望子类覆盖该方法给出一个实际的实现。

# php - android.os.networkonmainthreadexception 在尝试从 mysql 服务器获取数据到 sqlite 时出现异常

> ID：13780539
> 
> 赞同：0
> 
> 时间：2012-12-08T18:33:12.327
> 
> 标签：php, android, mysql, sqlite

使用下面的 php 代码，我的连接和从服务器获取成功

```
 <?php

    define('DB_USER', "root"); // db user
    define('DB_PASSWORD', ""); // db password (mention your db password here)
    define('DB_DATABASE', "Test"); // database name
    define('DB_SERVER', "localhost"); // db server

    // array for JSON response
      $response = array();

class DB_CONNECT {

 // constructor
 function __construct() {
    // connecting to database
    $this->connect();
}

// destructor
function __destruct() {
    // closing db connection
    $this->close();
}

/**
 * Function to connect with database
 */
function connect() {
    // import database connection variables
  //  require_once __DIR__ . '/db_config.php';

    // Connecting to mysql database
    $con = mysql_connect(DB_SERVER, DB_USER, DB_PASSWORD) or die(mysql_error());

    // Selecing database
    $db = mysql_select_db(DB_DATABASE) or die(mysql_error()) or die(mysql_error());

    // returing connection cursor
    return $con;
}

/**
 * Function to close db connection
 */
function close() {
    // closing db connection
    mysql_close();
}

}

  // connecting to db
 $db = new DB_CONNECT();

 // get all test from BF table
   $result = mysql_query("SELECT *FROM BF") or die(mysql_error());

  // check for empty result
  if (mysql_num_rows($result) > 0) {
  // looping through all results
// Airnet node
$response["BF"] = array();

while ($row = mysql_fetch_array($result)) {
    // temp user array
    $product = array();
    $product["C"] = $row["C"];
    $product["B"] = $row["B"];
    $product["I"] = $row["I"];
    $product["It"] = $row["It"];
    $product["CurDate"] = $row["CurDate"];
    $product["Value"] = $row["Value"];

    // push single product into final response array
    array_push($response["BF"], $product);
}
// success
$response["success"] = 1;

// echoing JSON response
echo json_encode($response);
  } else {

$response["success"] = 0;
$response["message"] = "No Test Database Found";

// echo no users JSON
echo json_encode($response);
 }
?> 
```

在 DBHelper 我有

```
 package com.s.t.android;

  import java.io.FileOutputStream;
  import java.io.IOException;
  import java.io.InputStream;
  import java.io.OutputStream;
  import java.util.ArrayList;
  import java.util.HashMap;
  import java.util.List;

  import org.apache.http.NameValuePair;
   import org.json.JSONArray;
   import org.json.JSONException;
   import org.json.JSONObject;

   import android.app.Dialog;
   import android.app.ProgressDialog;
   import android.content.Context;
   import android.content.Intent;
   import android.database.Cursor;
   import android.database.SQLException;
   import android.database.sqlite.SQLiteDatabase;
   import android.database.sqlite.SQLiteException;
   import android.database.sqlite.SQLiteOpenHelper;
   import android.net.wifi.WifiManager;
   import android.os.AsyncTask;
   import android.os.Bundle;
   import android.util.Log;
   import android.view.View;
   import android.view.View.OnClickListener;
   import android.widget.Button;
   import android.widget.TextView;
   import android.content.BroadcastReceiver;
   import android.app.Activity;

  //class database helper

public class DBHelper extends SQLiteOpenHelper{

public SQLiteDatabase DB;
public String DBPath;
public static String DBName = "Test";
public static final int version = '2';
public static Context currentContext;
public static String tableName = "BF";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCTS = "products";

//private static final String TAG_ID = "Id";
private static final String TAG_C = "C";
private static final String TAG_B = "B";
private static final String TAG_I = "I";
private static final String TAG_IT = "It";
private static final String TAG_CUR_DATE = "Cur_Date";
private static final String TAG_VALUE = "Value";

//String id;
String c;
String b;
String i;
String it;
String cur_date;
String value;

// products JSONArray
JSONArray products = null;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();
ArrayList<HashMap<String, String>> productsList;

// url to get all products list
private static String url_all_products = "http://192.168.0.5/android_connect/fetchdata.php";

public DBHelper(Context context) {
    super(context, DBName, null, version);
    currentContext = context;
    DBPath = "/data/data/" + context.getPackageName() + "/databases/";
    createDatabase();

    //new WIFIStatistics();
   }

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}

private void createDatabase() {
        boolean DbExists =  checkDbExists();

    if (DbExists) {

    }
    else {

        DB = currentContext.openOrCreateDatabase(DBName, 0, null);
            DB.execSQL("CREATE TABLE IF NOT EXISTS " +
                    tableName +
                    " (C TEXT, B TEXT, I TEXT, It TEXT, " +
                    "Cur_Date DATE, Value DOUBLE);");

                        updateDB();

}
}

private boolean checkDbExists() {
    SQLiteDatabase checkDB = null;

        try {

                 if(countRows() == 10043){
                 String myPath = DBPath + DBName;
                    checkDB = SQLiteDatabase.openDatabase(myPath, null,
                            SQLiteDatabase.OPEN_READONLY);

                                }

                        }

        catch (SQLiteException e) {

        // database does't exist yet.
            e.printStackTrace();

    } 
        /*catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }*/

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
     * getting All Data from url
     * */
    protected String updateDB(String... args) {

        new WIFIStatistics();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                products = json.getJSONArray(TAG_PRODUCTS);

                // looping through All Products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each json item in variable
                     //id = c.getString(TAG_ID);
                     c = c.getString(TAG_C);
                     b = c.getString(TAG_B);
                     i = c.getString(TAG_I);
                     it = c.getString(TAG_IT);
                     cur_date = c.getString(TAG_CUR_DATE);
                     value = c.getString(TAG_VALUE);

                     String myPath = DBPath + DBName;
                     SQLiteDatabase myDB = SQLiteDatabase.openDatabase(myPath, null,
                                SQLiteDatabase.OPEN_READWRITE);

                     myDB.execSQL("INSERT INTO " +
                        tableName +
                    " VALUES ('"+c+"','"+b+"','"+i+"','"+it+"','"+cur_date+"','"+value+"');");

                }
            } else {
                // no products found
                                }
        }   catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

public double countRows(){
    double rows = 0;

     String myPath = DBPath + DBName;
     SQLiteDatabase myDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);

     Cursor count = myDB.rawQuery("SELECT * FROM BF", null);
        rows += count.getCount();

    return rows;
}

public String checkDate(){
    String maxDate = "0000-00-00";

     String myPath = DBPath + DBName;
     SQLiteDatabase myDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);

     Cursor c = myDB.rawQuery("SELECT MAX(Cur_Date) FROM BF Limit 1", null);

     maxDate = c.getString(0);

    return maxDate;
}

/*
 public void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = currentContext.getAssets().open("Airnet");

        // Path to the just created empty db
        String outFileName = DBPath + DBName;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[10240];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

            }

  */

class WIFIStatistics extends Activity{

    WifiManager wifi;
    public Device device;
    public TChart chart;
    Dialog dialog;
    TextView description;
    Button okButton, scanButton, cancelButton;
    BroadcastReceiver receiver;

    @SuppressWarnings("static-access")
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);

    while (wifi.getWifiState() == wifi.WIFI_STATE_ENABLING) {

    }

    if (wifi.isWifiEnabled()) {

    } 
    else {
        dialog = new Dialog(WIFIStatistics.this);
        dialog.setContentView(R.layout.acceptcancel);
        dialog.show();
        dialog.setTitle("Wifi not enabled");
        description = (TextView) dialog.findViewById(R.id.descriptionText1);
        description
                .setText("Wifi is not enabled\nWould you like to enable WiFi? OK/CANCEL");
        description.setTextColor(0xFFFFFFFF);
        okButton = (Button) dialog.findViewById(R.id.okButton);
        okButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                wifi.setWifiEnabled(true);
                dialog.cancel();
                Intent myIntent = new Intent(v.getContext(),
                        DBHelper.class);
                startActivityForResult(myIntent, 0);
                finish();
            }

        });
        cancelButton = (Button) dialog.findViewById(R.id.buttonCancel);
        cancelButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                dialog.cancel();
                finish();
            }

        });

    }
}
}

 } 
```

我知道我应该使用 ASYNCTASK 但我不确定我将如何实现该类，或者它们是否是任何其他更简单的方法我可以将我的数据从 mysql 加载到 sqlite 数据库中，记住数据由 10 个表组成，每个表都有30000 行。上面的代码我只是在测试一张桌子。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:08:11.583

> ```
>  android.os.NetworkOnMainThreadException 
> ```

这个错误来自**HoneyComb（3.0 或更高版本）。**

**如文档所述，您无法在其主线程上执行网络操作。**要解决这个问题，您必须使用处理程序或异步任务。AFAIK 没有其他方法可以做到这一点。

您可以查看此内容以了解更多详细信息[为什么 ICS 会导致您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

尝试使用下面的代码片段

```
new Thread(){
    public void run(){
        //do your Code Here    
    }
}.start(); 
```

# objective-c - TableView 交互阻止单元格中的动画

> ID：13780541
> 
> 赞同：3
> 
> 时间：2012-12-08T18:33:18.310
> 
> 标签：objective-c, ios, uitableview

我在 tableview 单元格中有一个进度指示器，当用户与 tableview 交互时，它不会更新其进度。当交互停止时，指示器会跳转到它应该在的位置。

如何避免这种情况，以便即使用户正在滚动表格视图，动画也会继续？

可以将它们添加到运行循环中吗？如果交互和动画都需要在主线程上发生，可以做些什么变通？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:02:30.090

首先，您应该确保您确实希望更新这些进度指示器 -`UIScrollView`滚动时类型类的默认行为是暂停其中的任何 UI 更新以保持响应。我发现每当我尝试做任何额外的事情时，滚动速度之类的东西会以惊人的速度下降，尤其是在旧设备上。

除了警告，我们如何做到这一点？好吧，看起来[这个问题对你有一个解决方案](https://stackoverflow.com/questions/4109898/my-custom-ui-elements-are-not-being-updated-while-uiscrollview-is-scrolled)。一个简短的总结是：

*   滚动将运行循环置于[UITrackingRunLoopMode](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/constant_group/Run_Loop_Mode_for_Tracking)
*   当 runloop 处于此模式时，您的更新代码不会触发
*   解决方案：`NSTimer`触发您的进度指示器更新，运行该计时器，`NSRunLoopCommonModes`使其在滚动时仍会触发。

而已。`UIView`滚动时更新不是问题，运行触发更新的代码是。通过使用“防滚动”的计时器，您的指标应该会更新得很好。链接问题中有一些很好的示例代码[，所以请点击阅读](https://stackoverflow.com/questions/4109898/my-custom-ui-elements-are-not-being-updated-while-uiscrollview-is-scrolled)！

# linux-kernel - 使用 Lttng 的内核跟踪

> ID：13780546
> 
> 赞同：4
> 
> 时间：2012-12-08T18:33:54.190
> 
> 标签：linux-kernel, trace, lttng

一段时间以来，我一直在使用 linux 跟踪工具（Lttng，[http](http://lttng.org/) ://lttng.org/ ）。目前，我正在使用带有 Lttng 插件的 Eclipse 解释跟踪。虽然使用这个工具我可以检索与系统调用、上下文切换相关的日志，但我找不到一种方法来跟踪在特定位置发生的特定事件，比如外围设备引发的中断。我还尝试在 KProbes 进行动态跟踪，但徒劳无功。任何建议/指导都将很有用并受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:18:05.903

如果您知道要检测哪个功能，我建议您尝试使用“--function”lttng 选项来检测特定功能的进入/退出。“--probe”允许您在特定符号和偏移处或特定地址处放置断点。有关详细信息，请参见 lttng(1) 联机帮助页。

实现目标的另一种方法是使用针对 IRQ 条目的跟踪点。您可以使用 lttng list -k 列出内核跟踪点，然后专门启用 irq 入口跟踪点。然后，您必须使用例如 grep 来查找您在跟踪中寻找的适当的 IRQ 号。从 lttng 2.1 开始，“grep”方法是唯一允许过滤事件内容（字段内容）的方法。在不久的将来，我们计划将过滤器字节码解释器从 LTTng 用户空间跟踪器 (UST) 移植到 lttng 内核跟踪器 (lttng-modules)。

最好的祝福，

马修

# javascript - 获取旋转图像的尺寸

> ID：13780548
> 
> 赞同：1
> 
> 时间：2012-12-08T18:34:13.317
> 
> 标签：javascript, html, canvas

我有一个画布，可以在上面绘制图像。图像可以在绘制之前旋转一定的度数（EG：30）。

我需要绘制一个框来包含绘制的图像；这很容易，但宽度和高度会根据图像旋转的角度而变化。

我在这里看到了一些非常相似的问题，但我无法将答案实现到我的代码中，因为它们要么是用另一种语言（如 ActionScript）编写的，要么它们正在旋转 div 或不在画布内的其他元素。我无法弄清楚它背后的主要数学原理。

我创建了一个 JSFiddle 供您适应：

[http://jsfiddle.net/ZY7Ux/](http://jsfiddle.net/ZY7Ux/)

我在这个 JSFiddle 中创建了两个函数：

```
drawImageToCanvasRotated(URL, X, Y, Angle);
drawRectangle(X, Y, Width, Height); 
```

您应该注意，位置值适用于图像/矩形的中心。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:37:47.520

您旋转图像，因此新宽度变为以下组合：

*   宽度的 x 尺寸，比全宽略小（使用余弦）
*   高度的 x 维度，略高于 0（使用正弦）

类似的计算适用于新高度。[http://jsfiddle.net/ZY7Ux/1/](http://jsfiddle.net/ZY7Ux/1/)

```
var a = Width * Math.cos(Angle);
var b = Height * Math.sin(Angle);
var c = a + b;

var p = Width * Math.sin(Angle);
var q = Height * Math.cos(Angle);
var r = p + q;

context.strokeRect(
    X - c / 2,
    Y - r / 2,
    c,
    r
); 
```

# ruby - 如何将 Jekyll 站点推送到已经构建的 GitHub？

> ID：13780556
> 
> 赞同：2
> 
> 时间：2012-12-08T18:34:58.870
> 
> 标签：ruby, github, jekyll

我有一个在本地构建的站点，但是由于它在 _plugins GitHub 中有条目，因此无法在提交时构建它。我知道您可以离线构建您的网站，然后提交构建的版本 - 这可能吗？如果是这样，我如何在检查源代码的同时实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:44:30.797

我相信这里描述了一切：http: [//octopress.org/docs/deploying/github/](http://octopress.org/docs/deploying/github/)你见过这个吗？如果是并且某些东西对您不起作用，请告诉我，我会尽力为您提供进一步的帮助！

# java - Android - 我应该使用什么来从远程数据库获取数据？

> ID：13780558
> 
> 赞同：2
> 
> 时间：2012-12-08T18:35:12.800
> 
> 标签：java, android, database

我正在开发一个使用存储在远程数据库中的数据的 Android 应用程序。我现在正在使用 Parse.com 进行数据存储，但我可能会更改为 mysql。我应该使用什么结构将数据加载到我的屏幕上？数据是我想在地图上精确定位的对象。因此，从从数据库加载对象的那一刻起，我想尽快将其放置在我的地图上。因此，在从数据库中加载所有对象之前，地图上应该已经显示了一些对象。

我应该使用 AsyncTask、Loader、Content provider、Service 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:37:41.040

一般来说，如果您希望您的 Android 应用程序与远程数据库交互，您必须开发一个 Web 服务，该服务具有您想要在您的 android 应用程序中使用的所有方法，如插入、选择、更新和删除，这是一个很好的入门教程和。[请单击此处](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)您还可以使用 SQL Server 的 JDBC 驱动程序库，它允许您直接连接到数据库而无需使用数据库[请单击此处](http://amitku.wordpress.com/2011/08/03/how-to-connect-and-access-sql-database-server-from-android-app/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T21:11:17.463

简单数据的 Web 服务听起来像是用火箭筒杀死苍蝇。听说过 REST 吗？使用 REST，您只能使用 http 协议和 http 方法（GET、PUT、POST...）来操作数据。您需要处理ofc 的身份验证，但这也不是什么大问题。如果您的数据是超级机密，您可以随时使用 https。

# html - 悬停时让滑块箭头“发光”

> ID：13780564
> 
> 赞同：0
> 
> 时间：2012-12-08T18:35:43.493
> 
> 标签：html, css, slider

所以，我试图让我的导航箭头在悬停时“变亮”。图像本身有两种“状态”，一种被点亮，一种未被点亮。当前始终处于活动状态的是未点亮的，`.png`当它们悬停时，我在某个地方看到了一些关于改变图像位置的东西（发光的在 中更下方）。这会是什么样子（当注意到我有 .hero-carousel-nav 和所有这些时）？

实现类似这样的东西？这会`.png`在悬停时移动，使其显示“发光”箭头？如果是这样，我应该在下面放什么而不是“something.here”？

`.something.here-arrow-right:hover { background-position: 0 -40px; }`

这是我向右箭头的示例。

**CSS**

```
.hero-carousel-nav li.next a { 
background: url('../images/deadmau5/large-arrow-right.png') -5px -7px no-repeat;
display: inline-block;
width: 105px;        /*width of your img*/
height: 105px;      /*height of your img*/
font-size: 0px; 
right: -15px;  /*this is better than 1px*/
bottom: 100px;
overflow:hidden;
outline:none;
z-index: 3; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:40:57.657

```
.hero-carousel-nav li.next a:hover{
    background-position: 0 -40px;
} 
```

# php - 从 4.2 升级到 4.4 时，HTMLPurifier Linkify 中断

> ID：13780565
> 
> 赞同：1
> 
> 时间：2012-12-08T18:35:43.800
> 
> 标签：php, composer-php, htmlpurifier

今天我安装了[Composer](http://getcomposer.org "作曲家")并安装了[HTMLPurifier](https://packagist.org/packages/ezyang/htmlpurifier)，它取代了我旧的压缩下载。这将我的版本从 4.2 移动到 4.4

此代码现在不再有效：

```
$config = HTMLPurifier_Config::createDefault();
$config->set('HTML.Allowed', 'a[href|title],em,strong,b,i,s,p'); 
$config->set('AutoFormat.Linkify', true); 
$purifier = new HTMLPurifier($config);

$do = is_null($comment) ? $this->comment : $comment;
$clean = $purifier->purify($do);

debug($clean); 
```

如果我删除作曲家自动加载，并引用回旧库，它就可以工作。这是一个包含`http://www.google.com`在其中的字符串。但是`$clean`等同于`$do`

**编辑** 显然，通过作曲家下载，`HTMLPURIFIER_PREFIX`没有创建常量，也没有加载 *.ser 文件（即使它存在。这是在 中定义的`library/HTMLPurifier/Bootstrap.php`，但该文件不包含在任何地方（因此没有定义，因此不工作）。

**edit2**看起来在我的情况下它与 Composer 不兼容。它根本不包括该`Bootstrap.php`文件。不得不`HTMLPurifier_Bootstrap::registerAutoload();`从我的应用程序手动调用，它工作得更好。干得好我。更多信息[在这里](https://github.com/ezyang/htmlpurifier/pull/10)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:05:55.130

事实证明，正如我上面所说，问题与 Composer <-> HTMLPurifier 交互有关，并且没有正确加载`Bootstrap.php`文件。手动调用`HTMLPurifier_Bootstrap::registerAutoload();`现在似乎已经修复了它。

# binary - 十进制到 2 的补码二进制转换（表示十进制数所需的最少位）

> ID：13780567
> 
> 赞同：1
> 
> 时间：2012-12-08T18:35:55.920
> 
> 标签：binary

我在课堂上被问到：

将以下十进制数表示为 2 的补码二进制数所需的最少位数是多少？-64 31 128

1.  那么，首先，1 和 2 的补码二进制有什么区别？如何将十进制数转换为 2 的补码二进制表示？

2.  我也想知道，是否可以有该十进制数的多种表示形式？如何找出所需的最少位数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T18:47:24.637

1.  1的补码和2的补码的区别：

    *   在 1 的补码中，负数表示为所有位翻转的正数。因此，例如 -6 将是 ..111001，因为 6 是 ..000110。
    *   在 2 的补码中，负数表示为所有位都翻转的正数*加一*。因此，例如 -6 将是 ..111001 + 1 = ..111010
2.  二进制十进制数的多种表示：二进制数的表示是唯一的，但有一个例外：在 1 的补码中，数字 0 可以写为 0 和 ..111。

请注意，在这两种情况下，负数都表示左侧有无限的 1 字符串。实际上，可用的位数是有限的，所以我们只使用最右边的一些位。惯例是，如果最左边的位是 1，我们假设该数字在第一个位之前的左边有一个无限的字符串。这意味着最左边的位给出了数字的符号：如果是 1，则数字为负，如果为 0，则数字为正。其余位给出幅度。（当然，还有其他方法可以表示不成立的有[符号数字。）](http://en.wikipedia.org/wiki/Signed_number_representations)

表示一个数字所需的最少位数可能在 1 和 2 的补码之间有所不同。例如，1 的补码需要至少 5 位来表示 -8，而 2 的补码可以使用 4：

```
 +8 in binary:  1000
-8 in 1's complement: 10111
-8 in 2's complement:  1000 
```

# java - Jmeter：如何在单个请求中传递数组值？

> ID：13780578
> 
> 赞同：3
> 
> 时间：2012-12-08T18:37:13.520
> 
> 标签：java, javascript, jmeter

我必须做的：
1\. 从之前的响应中提取所有客户 ID。
2.**洗牌**所有ID。**3\. 在一个请求**
中传递所有 id 。（如：custPref - 9768,7651,3215,....）

 **我使用正则表达式将所有客户 ID 放入一个变量 (custID) 中（设置匹配号 = -1）

通过使用 For Each 控制器，我可以在一个请求中传递一个客户 ID。
但是现在我必须在一个请求中传递所有客户 ID，以在使用逗号分隔值对客户 ID 进行洗牌后设置客户的偏好。

此外，**客户 ID 的数量不固定**，因此无法将变量用作 ${custID}_g1、${custID}_g0...

您能否建议任何方式来洗牌客户 ID 并在一个请求中传递所有 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:14:36.607

提示：您可以[使用](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor) `custID_matchNr`.

因此，您的完整 Beanshell 脚本可能如下所示：

```
import java.util.ArrayList;
import java.util.Collections;

ids = new ArrayList();
idCount = Integer.parseInt(vars.get("custID_matchNr"));
for (int i=0; i<idCount; i++){
  ids.add(vars.get("custID_" + String.valueOf(i+1)));
}

Collections.shuffle(ids);

builder = new StringBuilder();
for (String id: ids){
  builder.append(id);
  builder.append(",");
}
builder.deleteCharAt(builder.length()-1);
vars.put("custPref", builder.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T14:39:06.003

如果您需要通过 jmeter 将整数数组传递给 web 方法或类似方法，这就是解决方案！

1.  在 http 请求中使用 Post Body。

2.  在帖子正文中，您需要传递 json！像这样： {"language":"en", "translationIds":[10254, 3071, 3072, 3073, 3074, 3075, 3076, 3077, 3078, 3079, 3080, 3081, 3082, 3083, 3084, 3085, 3086 ，3087,3088,3089,3090,3091,3092,3093,3094,3095,30996,3097,3098,3099,31100,3101,3102,3103,3104,3105,3106,3107,3108,3109,3110,3108,3109,3110,3111 , 3112, 3113, 3114, 3115, 3116, 3117, 3118, 3513]}"

3.  您需要 HTTP 标头管理器：Content-Type application/json

![图片1](../Images/81ceab428b66ea454050ec21ce842a23.png)

![第二张图片](../Images/4dd22896434f9e7b7388f7c29987dcbb.png)

(CODE) 4\. 最后，您需要将 [ScriptService] 属性 (C#) 放在包含该方法的类上。**

# html - 以百分比理解 CSS 数字属性

> ID：13780581
> 
> 赞同：1
> 
> 时间：2012-12-08T18:38:29.467
> 
> 标签：html, css, fonts

我在理解以百分比表示的 CSS 数字属性时遇到了一些问题。

在这种特殊情况下，为了始终正确显示我的页面，我认为最好的方法是始终以 % 定义数字属性，例如宽度、高度或字体大小。

现在让我吃惊的是以下几点：

在分辨率为 1920x1080 且浏览器处于全屏模式时，放大和缩小仅影响`font-size`. 为什么？我认为百分比值总是指 的值`parent node`，因为我从

```
html{
    width:100%;
    height:100%;
} 
```

缩放时`font-size`也应该是静态的，因为相应的大小`html`。没有`body`改变。

在分辨率 800x600 和浏览器处于全屏模式时，显然内容会被缩放，因为`html`resp。`body`本身不太高，但是`font-size`太大了。让我告诉你这个比较：

![在此处输入图像描述](../Images/b0e24fd1c156fd1dcc5105c5be84a565.png)

现在很明显，这让我认为 in 的百分比值`font-size`并不是指`parent node`. 所以基本问题是：如果我想实现页面的元素和字体在普通笔记本和分辨率较低的上网本上显示良好，我应该如何处理这些值？另外，当用户缩放时页面的行为也很可爱？

**附录**：我没有粘贴任何代码，因为这对我来说似乎是一个普遍的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:42:20.543

`small`您可以使用、`large`、等值组来定义文本大小`x-small`，`x-large`而不是直接在 px 中定义它们。这会给你一个更“相对”的结果。

我倾向于使用的另一种选择是 pt。CSS 中的 1pt 相当于 1/72 英寸。如何为给定屏幕定义一英寸是另一回事，但在可能成为问题的电话等设备上的浏览器往往会解决这些问题。

最后要记住的一点是，CSS 像素与屏幕像素不同。这并不简单：

> 如果输出设备的像素密度与典型的计算机显示器的像素密度有很大不同，用户代理应该重新调整像素值。建议参考像素为像素密度为96dpi、距离阅读器一臂远的设备上一个像素的视角。

不完全科学吧？基本上，这意味着您不必担心视网膜显示器之类的东西，与普通计算机屏幕相比，它具有巨大的像素密度。所有这一切都说明几乎所有的 CSS 测量值在某种程度上都是相对的。编写代码要健壮并且在大多数情况下都能正常工作，但是当你遇到像你这样的奇怪问题时不要感到惊讶。

# google-maps - 在谷歌地图上获取当前位置

> ID：13780583
> 
> 赞同：25
> 
> 时间：2012-12-08T18:38:30.307
> 
> 标签：google-maps, google-maps-api-3

当我想获取当前位置时，我遇到了一些麻烦。

这是我第一次使用这个GM API，还有很多我不明白的东西。

这是我的代码，我想要

```
var geocoder = new google.maps.Geocoder();

function initialize() {
  var latLng = new google.maps.LatLng(-7.7801502, 110.3846387);
  var map = new google.maps.Map(document.getElementById('mapCanvas'), {
    zoom: 15,
    center: latLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var marker = new google.maps.Marker({
    position: latLng,
    title: 'Ambarrukmo Plaza Yogyakarta',
    map: map,
    draggable: true
  });
} 
```

问题是，我想根据用户的当前位置自动更改 -7.7801502 和 110.3846387 值。我可以这样做吗？

之前感谢您的帮助和解释。

另一个问题：-> 如果我要根据嵌入 GPS 的设备更改这些值怎么办？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-08T20:23:56.840

您无法使用 Google 地图获取当前用户的位置。但是，如果您使用[Google Loader](https://developers.google.com/loader/)获取 Google Maps ，则可以使用[google.loader.CurrentLocation](https://stackoverflow.com/a/4919754/634863)获取基于 IP 的位置。

另一种方法是使用[HTML5 GeoLocation API](http://dev.w3.org/geo/api/spec-source.html)。

```
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    alert("Geolocation is not supported by this browser.");
  }
}
function showPosition(position) {
  var lat = position.coords.latitude;
  var lng = position.coords.longitude;
  map.setCenter(new google.maps.LatLng(lat, lng));
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-13T22:20:10.217

对于未来寻找解决方案的人，谷歌现在在谷歌地图页面上有一个地理定位示例 > [https://developers.google.com/maps/documentation/javascript/examples/map-geolocation](https://developers.google.com/maps/documentation/javascript/examples/map-geolocation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-02T01:44:30.053

如果您想留在 google maps API 的世界中，并假设您有可以使用的 map 变量，

```
var map = new google.maps.Map(document.getElementById("map-canvas"),
        mapOptions);

var myLat = map.center.k;
var myLng = map.center.B; 
```

或者你可以使用，

```
alert("Lat="+map.center.k);
alert("Lng="+map.center.B); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-11T08:04:22.450

```
import UIKit
import GoogleMaps
import GooglePlaces
import CoreLocation

class ViewController: UIViewController,CLLocationManagerDelegate,GMSMapViewDelegate {

@IBOutlet weak var currentlocationlbl: UILabel!

var mapView:GMSMapView!

var locationManager:CLLocationManager! = CLLocationManager.init()

var geoCoder:GMSGeocoder!

var marker:GMSMarker!

var initialcameraposition:GMSCameraPosition!

override func viewDidLoad() {
    super.viewDidLoad()
    // Do any additional setup after loading the view, typically from a nib.

    self.mapView = GMSMapView()
    self.geoCoder = GMSGeocoder()
    self.marker = GMSMarker()
    self.initialcameraposition = GMSCameraPosition()

    // Create gms map view------------->
    mapView.frame = CGRect(x: 0, y: 150, width: 414, height: 667)
    mapView.delegate = self
    mapView.isMyLocationEnabled = true
    mapView.isBuildingsEnabled = false
    mapView.isTrafficEnabled = false
    self.view.addSubview(mapView)

    // create cureent location label---------->

    self.currentlocationlbl.lineBreakMode = NSLineBreakMode.byWordWrapping
    self.currentlocationlbl.numberOfLines = 3
    self.currentlocationlbl.text = "Fetching address.........!!!!!"

    locationManager.delegate = self
    locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation
    if locationManager.responds(to: #selector(CLLocationManager.requestAlwaysAuthorization))
    {
        self.locationManager.requestAlwaysAuthorization()
    }
    self.locationManager.startUpdatingLocation()

    if #available(iOS 9, *)
    {
    self.locationManager.allowsBackgroundLocationUpdates = true
    }
    else
    {
        //fallback earlier version
    }
    self.locationManager.startUpdatingLocation()

    self.marker.title = "Current Location"
    self.marker.map = self.mapView

    // Gps button add mapview

    let gpbtn:UIButton! = UIButton.init()
    gpbtn.frame = CGRect(x: 374, y: 500, width: 40, height: 40)
    gpbtn.addTarget(self, action: #selector(gpsAction), for: .touchUpInside)
    gpbtn.setImage(UIImage(named:"gps.jpg"), for: .normal)
    self.mapView.addSubview(gpbtn)
    }

func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation])
{
    var location123 = CLLocation()

    location123 = locations[0]

    let coordinate:CLLocationCoordinate2D! = CLLocationCoordinate2DMake(location123.coordinate.latitude, location123.coordinate.longitude)

    let camera = GMSCameraPosition.camera(withTarget: coordinate, zoom: 16.0)

    self.mapView.camera = camera
    self.initialcameraposition = camera
    self.marker.position = coordinate
    self.locationManager.stopUpdatingLocation()

}

func mapView(_ mapView: GMSMapView, idleAt position: GMSCameraPosition)
{
    self.currentAddres(position.target)
}

func currentAddres(_ coordinate:CLLocationCoordinate2D) -> Void
{
    geoCoder.reverseGeocodeCoordinate(coordinate) { (response, error) in

        if error == nil
        {
            if response != nil
            {

                let address:GMSAddress! = response!.firstResult()

                if address != nil
                {
                   let addressArray:NSArray! = address.lines! as NSArray

                    if addressArray.count > 1
                    {
                        var convertAddress:AnyObject! = addressArray.object(at: 0) as AnyObject!
                        let space = ","
                        let convertAddress1:AnyObject! = addressArray.object(at: 1) as AnyObject!
                        let country:AnyObject! = address.country as AnyObject!

                        convertAddress = (((convertAddress.appending(space) + (convertAddress1 as! String)) + space) + (country as! String)) as AnyObject

                        self.currentlocationlbl.text = "\(convertAddress!)".appending(".")
                    }
                    else
                    {
                        self.currentlocationlbl.text = "Fetching current location failure!!!!"
                    }

                }

            }
        }
    }
} 
```

...

# javascript - 在 Chrome 扩展中执行 jQuery.ajax 请求时更改 cookie

> ID：13780589
> 
> 赞同：2
> 
> 时间：2012-12-08T18:39:21.090
> 
> 标签：javascript, jquery, google-chrome-extension

我为 facebook 编写了一个插件，可以将数据发送到`testing-fb.local`. 如果用户登录，请求就会通过。

这是工作流程：

1.  用户登录自`testing-fb.local`
2.  存储 Cookie
3.  何时`$.ajax()`从 Chrome 扩展程序中触发
    *   Chrome 扩展程序监听`chrome.webRequest.onBeforeSendHeaders`
    *   Chrome 扩展程序检查来自`chrome.cookies.get`
    *   Chrome 更改`Set-Cookies`要发送的标头

请求通过。

我写的这部分代码应该是这样的：

```
function getCookies (callback) {
  chrome.cookies.get({url:"https://testing-fb.local", name: "connect.sid"}, function(a){
    return callback(a)
  })
}

chrome.webRequest.onBeforeSendHeaders.addListener(
  function(details) {
    getCookies(function(a){

// Here something happens

    })
  },
  {urls: ["https://testing-fb.local/*"]},
  ['blocking']); 
```

这是我的`manifest.json`：

```
{
  "name": "test-fb",
  "version": "1.0",
  "manifest_version": 1,
  "description": "testing",
  "permissions": [
    "cookies",
    "webRequest",
    "tabs",
    "http://*/*",
    "https://*/*"
  ],    
  "background": {
    "scripts": ["background.js"]
  },
  "content_scripts": [
        {
          "matches": ["http://*.facebook.com/*", "https://*.facebook.com/*"],
          "exclude_matches" : [
            "*://*.facebook.com/ajax/*",
            "*://*.channel.facebook.tld/*",
            "*://*.facebook.tld/pagelet/generic.php/pagelet/home/morestories.php*",
            "*://*.facebook.tld/ai.php*"
          ],
          "js": ["jquery-1.8.3.min.js", "allthefunctions.js"]
        }
      ]
} 
```

在`allthefunction.js`我有 $.ajax 调用，并且`background.js`是我将代码放在上面但看起来不运行的地方..

总而言之，我还不清楚：

*   我应该写什么在*这里发生了一些事情*
*   如果这个策略行得通
*   我应该把这段代码放在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T04:58:52.203

`Chrome changes the Set-Cookies header to be sent`，我相信您想为 HTTP 请求发送自定义 Cookie 标头，因为[Set-Cookie 标头](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384321%28v=vs.85%29.aspx) 是服务器响应 HTTP 请求而发送的，该请求用于在用户系统上创建 cookie。

请注意所有[Cookie API() 方法](https://developer.chrome.com/extensions/cookies.html#methods)都是[异步](https://developer.chrome.com/extensions/overview.html#sync)的，确保您的回调驱动您的功能；

我尝试使用此示例演示复制您的工作流程

**示范**

后台页面查找对[http://www.w3schools.com/html/default.asp](http://www.w3schools.com/html/default.asp)的所有请求并修改 cookie 详细信息

***背景.js***

```
// Adding Event Listener for Changing Cookie Details in Header
chrome.webRequest.onBeforeSendHeaders.addListener(function (details) {

    // Look for header details here
    detail = "requestHeaders";
    headers = details[detail];

    // Iterate through all headers information
    for (header in headers) {

        // Stop at Cookie Information
        if (headers[header].name == "Cookie") {

            // Do your desired functionality either modifying/delet cookies etc

            //chrome.cookies.get({url:"<your url>", name: "<your parameter>"}, function(Cookies){
            //console.log("Cookies  "+Cookies);
            return {
                requestHeaders: details.requestHeaders
            };
            //});

        }
    }

},
//Sample URL used
{
    urls: ["http://www.w3schools.com/html/default.asp"]
},

// Block Web Request and request for header information

['blocking', "requestHeaders"]); 
```

***allfunctions.js***

[对asp页面](http://www.w3schools.com/html/default.asp)的简单AJAX调用

```
 //Do an AJAX Call
 function ajaxCall() {
     $.post("http://www.w3schools.com/html/default.asp", function (data) {
         console.log("POST Completed " + data);
     });
 }
 ajaxCall(); 
```

***清单.json***

确保清单具有所有权限

```
{
  "name": "test-fb",
  "version": "1.0",
  "manifest_version": 2,
  "description": "testing",
  "permissions": [
    "cookies",
    "webRequest",
    "tabs",
    "<all_urls>",
    "webRequestBlocking" 
  ],    
  "background": {
    "scripts": ["background.js"]
  },
  "content_scripts": [
        {
          "matches": ["<all_urls>"],
          "js": ["jquery.js", "allthefunctions.js"]
        }
      ]
} 
```

有了这个，我能够跟踪 AJAX 调用的请求标头并修改 cookie 信息，如果您需要更多信息，请告诉我。

# c - 字符串与 char *foo[] 连接

> ID：13780591
> 
> 赞同：-1
> 
> 时间：2012-12-08T18:39:32.527
> 
> 标签：c, arrays, string, unix, pointers

这是以下代码的输出，但我希望它是正确的路径。patharray[1] = ls/ls 等奇数索引的输出有什么问题？

```
---/usr/lib/lightdm/lightdm/ls
---ls/ls
---/usr/local/bin/ls
---ls/ls
---/usr/bin/ls
---ls/ls
---/bin/ls
---ls/ls 
```

 *```
char *pathsarray[MAXARGS];//path
char *path=getenv("PATH");
tokenizeEnvPaths(path);

int i;

for(i=0;i<MAXARGS;i++)
{
    if(pathsarray[i] != NULL)
    {
        strcat(pathsarray[i],"/");
        strcat(pathsarray[i],"ls");
        fprintf(stderr,"---%s\n",pathsarray[i]);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:51:04.720

看起来每个字符串的末尾都没有多余的空间 in `pathsarray`，这意味着没有可用空间将任何内容连接到它们的末尾。由于您不进行边界检查，因此您`strcat`会踩踏字符串末尾的内存并破坏其他内存（包括同一数组中的其他字符串）。

字符串是如何`pathsarray`分配和分配的？你没有展示那部分。他们被`malloc`教育了吗？

如果您打算在创建字符串后将 3 个字符附加到字符串，则需要确保为字符串分配的字节数至少比其初始内容所需的多 3 个字节......否则您需要重新分配更大的缓冲区稍后当您想向其附加内容时使用该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:34:20.517

这是一个 SSCCE（[简短、独立、正确的示例](http://sscce.org/)）。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

enum { MAXARGS = 32 };
enum { MAXPATHLEN = 1024 };

char *pathsarray[MAXARGS];

static void add_path(char **dir, const char *begin, const char *end)
{
    if (end == begin)
    {
        begin = ".";
        end = begin + 1;
    }
    size_t len = end - begin;
    *dir = malloc(len + 1);
    memmove(*dir, begin, len);
    (*dir)[len] = '\0';
    printf("Found: %s\n", *dir); // Debug
}

/* Split path into components - ignore empty elements */
static size_t tokenizeEnvPaths(const char *path, char **dirs, size_t max_dirs)
{
    const char *begin = path;
    const char *end;
    size_t num_dirs = 0;

    while (num_dirs < max_dirs && (end = strchr(begin, ':')) != 0)
    {
        add_path(&dirs[num_dirs++], begin, end);
        begin = end + 1;
    }
    if (num_dirs < max_dirs && *begin != '\0')
        add_path(&dirs[num_dirs++], begin, begin + strlen(begin));
    return num_dirs;
}

int main(void)
{
    const char *path = getenv("PATH");
    size_t ndirs = tokenizeEnvPaths(path, pathsarray, MAXARGS);

    for (size_t i = 0; i < ndirs; i++)
    {
        if (pathsarray[i] != NULL)
        {
            char buffer[MAXPATHLEN];
            snprintf(buffer, sizeof(buffer), "%s/%s", pathsarray[i], "ls");
            fprintf(stderr, "---%s\n", pathsarray[i]);
        }
    }
    return(0);
} 
```

示例输出：

```
$ PATH=:$PATH ./sp
Found: .
Found: /Users/jleffler/bin
Found: /usr/informix/11.70.FC6/bin
Found: /usr/gcc/v4.7.1/bin
Found: /usr/informix/11.70.FC6
Found: /Users/jleffler/perl/v5.16.0/bin
Found: /usr/local/bin
Found: /usr/bin
Found: /bin
Found: /usr/gnu/bin
Found: /usr/sbin
Found: /sbin
---./ls
---/Users/jleffler/bin/ls
---/usr/informix/11.70.FC6/bin/ls
---/usr/gcc/v4.7.1/bin/ls
---/usr/informix/11.70.FC6/ls
---/Users/jleffler/perl/v5.16.0/bin/ls
---/usr/local/bin/ls
---/usr/bin/ls
---/bin/ls
---/usr/gnu/bin/ls
---/usr/sbin/ls
---/sbin/ls
$ 
```*

# android-emulator - 将英特尔的 Android 映像升级到更新的 API 级别？

> ID：13780596
> 
> 赞同：1
> 
> 时间：2012-12-08T18:40:09.860
> 
> 标签：android-emulator

我想使用 Intel Accelerated Android Emulator 映像。我注意到 API 16 有一个`Intel x86 Atom System Image`但 API 17 没有。这是设计使然，还是他们根本还没有开始生成它？

有没有办法升级 API 16 映像以使用 17 级 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:01:59.860

我记得，API 16 也是如此。有一天，英特尔发布了他们的图像。所以，正如你所说：

> 他们只是还没来得及生成它

我没有足够的能力回答您的第二个问题，但我认为这不可行或不值得（如果可能的话，我认为我们已经拥有超过 3 个 API 的英特尔系统映像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T16:17:35.420

API 17 支持 x86 系统映像。![API 17 的 x86 系统映像](../Images/b3d561d44058de42ac7d226901f668d8.png)

# .net - 找不到名为“ContentPicker”的“脚本”

> ID：13780600
> 
> 赞同：-1
> 
> 时间：2012-12-08T18:40:22.197
> 
> 标签：.net, content-management-system, orchardcms, orchardcms-1.6

我通过复制该站点，用 Orchard 1.6 升级了 Orchard 1.4 站点。我以前没有菜单，但现在正在添加菜单，并且正在尝试添加内容菜单项。当我单击管理应用程序导航区域中的添加按钮时，出现以下错误。知道如何解决这个问题吗？

```
A 'script' named 'ContentPicker' could not be found.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: A 'script' named 'ContentPicker' could not be found.

Source Error: 

Line 13:     <meta charset="utf-8" />
Line 14:     <title>@Html.Title(title, siteName)</title> 
Line 15:     @Display(Model.Head)
Line 16:     <script>(function(d){d.className="dyn"+d.className.substring(6,d.className.length);})(document.documentElement);</script> 
Line 17: </head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:47:06.307

Since you upgraded by copying over the site and leaving the same database, some of the modules that would be enabled by default installation are left disabled.

One of those modules is `ContentPicker`. So, you just need to enable the module..

# javascript - Facebook API 的 FB 对象在初始化后为空

> ID：13780604
> 
> 赞同：0
> 
> 时间：2012-12-08T18:40:33.617
> 
> 标签：javascript, jquery, facebook

Facebook API 的 FB 对象在初始化后似乎为空。这是我正在使用的代码，非常简单。问题是它说我的“/me”响应是未定义的。我已登录，只是仔细检查了一遍，所以情况并非如此。我已经允许它使用我的数据。

为什么我的“/me”响应未定义？

另外，有没有办法可以移动我的代码：

```
function testAPI() {
                        console.log('Welcome!  Fetching your information.... ');
                        FB.api('/me', function(response) {
                            console.log('Good to see you, ' + response.name + '.');
                        });
                    }

                    testAPI(); 
```

放入一个单独的 .js 文件（将代码包装在一个函数中），并在 window.fbAsyncInit 中调用函数时加载它？因为我尝试过的每一种方式都导致了失败。

```
<!doctype html>  
<html lang="en">  
    <head>  
        <meta charset="utf-8">
        <title>FB-Stuff</title>
        <link rel="stylesheet" href="style.css">
        <script type="text/javascript" src="jquery.js"></script>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>
            window.fbAsyncInit = function() {
                FB.init({
                  appId      : '[my code]', // App ID
                  channelUrl : '//[my channel]', // Channel File
                  status     : true, // check login status
                  cookie     : true, // enable cookies to allow the server to access the session
                  xfbml      : true  // parse XFBML
                });

                function testAPI() {
                    console.log('Welcome!  Fetching your information.... ');
                    FB.api('/me', function(response) {
                        console.log('Good to see you, ' + response.name + '.');
                    });
                }

                testAPI();
            };

            // Load the SDK Asynchronously
            (function(d){
                var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                d.getElementsByTagName('head')[0].appendChild(js);
            }(document));
        </script>
    </body>
</html> 
```

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ------

现在我根本没有收到任何函数调用/错误消息。这是新代码：

```
<!doctype html>  
<html lang="en">  
    <head>  
        <meta charset="utf-8">
        <title>FB-Stuff</title>
        <link rel="stylesheet" href="style.css">
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="mycode.js"></script>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>
            window.fbAsyncInit = function() {
                FB.init({
                  appId      : 'xxx', // App ID
                  channelUrl : '//xxx/channel.html', // Channel File
                  status     : true, // check login status
                  cookie     : true, // enable cookies to allow the server to access the session
                  xfbml      : true  // parse XFBML
                });

                FB.getLoginStatus(function(response) {
                  if (response.status === 'connected') {
                        facebookInit();
                    }
                });
            };

            // Load the SDK Asynchronously
            (function(d){
                var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                d.getElementsByTagName('head')[0].appendChild(js);
            }(document));
        </script>
    </body>
</html> 
```

在 mycode.js 里面是：

```
function facebookInit(){
    function testAPI() {
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.name + '.');
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:54:50.183

您需要将调用推迟到`FB.api`解决状态*之后*- 为此使用`FB.getLoginStatus`或收听其中一个事件。

不确定移动代码是什么意思 - 只要在 JS SDK 之前加载此代码，您就可以将其放在任何地方。

# bit-shift - 如何创建和使用按位移位函数

> ID：13780606
> 
> 赞同：2
> 
> 时间：2012-12-08T18:40:39.717
> 
> 标签：bit-shift, brightscript

我正在使用的语言（[Brightscript](http://sdkdocs.roku.com/display/RokuSDKv48/BrightScript+Language+Reference)）中没有 << 或 >> 运算符。我想创建一个按 c 中 << 和 >> 运算符的方式工作的按位移位函数。以下是正确的，如果不是，有人可以提出更好的方法：

```
Function ShiftRight(InitNum as float, bitsright as integer) as float
  return InitNum / (2 ^ BitsRight)
End Function

function ShiftLeft(InitNum As float, BitsLeft As float) as float

   return InitNum * (2 ^ BitsLeft)

End Function 
```

如果这些是正确的，那么等效的函数调用将是什么：

```
x = (x<<13) 
```

可不可能是

```
x = shiftleft(x,13) 
```

还是会

```
for i = 1 to 13
    x = shiftleft(x,1) 
end for 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T23:31:12.323

我现在也在思考这个问题。关于代码的几个注释，右移 - 因为除法返回浮点数，应该去掉小数部分；将参数声明为整数，左右移动对浮点数没有意义：

```
function shl(num as Integer, nBits as Integer) as Integer:
   return num * 2^nBits
end function

function shr(num as Integer, nBits as Integer) as Integer:
  return int(num / 2^nBits)
end function 
```

不过，我不喜欢在这里使用幂 2^x，因为它是一个缓慢的操作。我相当肯定他们通过对数/指数函数（即`a^b := exp(b * log(a))`. 因此，当考虑性能时，最好`x << 13`使用预乘常数`x / 8192`而不是`x / 2^13`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T20:11:02.503

BrightScript 中**有**整数位移操作，见[语言参考第 3.7.8 节](http://sdkdocs.roku.com/display/sdkdoc/BrightScript+Language+Reference#BrightScriptLanguageReference-378IntegerBitshiftOperators)

例子：

```
print 2 << 10 '= 2048
print 7 >> 1 '= 3 
```

# xaml - 在 Windows 8 中过滤 GridView

> ID：13780608
> 
> 赞同：3
> 
> 时间：2012-12-08T18:40:44.850
> 
> 标签：xaml, windows-8, winrt-xaml

我目前有一个 GridView，其中 ItemsSource 设置为 ObservableCollection。对基础数据的更新会反映在 UI 中，而我无需付出任何努力。事情进展顺利。

将过滤器应用于 ObservableCollection 以便仅显示某些项目的最干净的方法是什么？理想情况下，我不想真正从 ObservableCollection 中删除项目，也不想维护两个不同的集合，因为这会使保持同步更具挑战性。CollectionViewSource 看起来很有希望，但 Windows Store App 实现似乎缺乏过滤功能（为什么是 MS????）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:31:23.303

我刚刚在自己的 C# + XAML Windows 8 应用程序中解决了同样的问题。这三个开源项目中的任何一个都将为您提供您所追求的功能：[Bindable LINQ](http://bindablelinq.codeplex.com/)、[Obtics](http://obtics.codeplex.com/)和[Continuous LINQ](http://clinq.codeplex.com/)。

CollectionViewSource 不包括 Windows 8 中的过滤功能也很好，因为无论如何最好将此类功能放入视图模型中。这样做的主要优点是，打包为可移植类库 (PCL)，您的视图模型（包括过滤）将可移植到您的 WPF、Silverlight 和 Windows 8 项目中。

尽管上述三个开源项目对我来说看起来很有趣，但我通过在自己的[MVVM 框架](http://www.qnomad.com/wpf/uimodel/)之上构建来完成这项任务。我的框架已经支持排序，所以过滤是一个自然的补充。使用我上个月实现的[Reactive API](http://happynomad121.blogspot.com/2013/01/data-binding-among-complex-expressions.html)时，添加它很容易。我尚未上传包含过滤的 MVVM 框架的最新版本。如果以上三个开源项目都不适合您，请告诉我，这样我可以尽快上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:51:59.923

假设您正在使用某种 MVVM 模板，使用 LINQ：

```
this.DefaultViewModel["GreaterThan10Items"] = originalList.Where(c => c.SomeProperty > 10)
    .Select(c => new {c.SomeProperty, c.OtherProperty}); 
```

或者可能：

```
this.DefaultViewModel["Children"] = from query in originalList
                                     where query.age <10
                                     select new Person
                                     {
                                      age= query.age,
                                      name = query.Name
                                     }; 
```

当然，ItemViewSource 必须链接到 GreaterThan10Items 并且您的 GridView 绑定到该 ItemViewSource

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-21T13:06:10.490

你可以使用我的[ObservableComputations](https://github.com/IgorBuchelnikov/ObservableComputations)库。例如，如果您希望按特定类型订单过滤到 GridView 的 bing：

```
GridView.ItemsSource = OrdersObservableCollection
    .Filtering(o => o.Type == OrdersFilter.SelectedType) 
```

现在 GridView 会在 OrdersObservableCollection 更改或 Order.Type 属性更改时自动刷新。确保 Oreder 类实现 INotifyPropertyChanged。

# javascript - `precision mediump float`是什么意思？

> ID：13780609
> 
> 赞同：66
> 
> 时间：2012-12-08T18:40:46.513
> 
> 标签：javascript, opengl-es, webgl, terminology, fragment-shader

在[learningwebgl tutorial1](http://learningwebgl.com/blog/?p=28)中，我在片段着色器中发现了一条有趣的线。

```
precision mediump float; 
```

我在[这里](http://updates.html5rocks.com/2011/12/Use-mediump-precision-in-WebGL-when-possible)找到了一篇关于它的文章，但我仍然无法理解它是什么意思？

如果我删除这条线，什么都不会改变。一切都是一样的。那么是什么`precision mediump float`意思呢？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-08T18:57:12.533

这决定了 GPU 在计算浮点数时使用的精度。`highp`是高精度的，当然比`mediump`（中精度）和`lowp`（低精度）更密集。

有些系统根本不支持`highp`，这将导致代码在这些系统上根本无法运行。

在确实支持的系统上，`highp`您会看到性能下降，应该尽可能使用。我看到的一个好的经验法则是： -顶点位置， -纹理坐标， -颜色。`mediump``lowp`
`highp`
`mediump`
`lowp`

希望有帮助！

# c - 如何生成不从 0 ( 50 - 100) 等开始的随机数？

> ID：13780616
> 
> 赞同：-5
> 
> 时间：2012-12-08T18:41:14.630
> 
> 标签：c, random, numbers

请告诉我他们有什么方法可以用c语言生成随机数程序，它生成**“50到100”的**随机数不是从**0到100**？？？不使用**if else**条件？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:06:36.590

'%' 运算符返回整数除法的余数。因此，如果您说 number%5，则该值可能在 0 和 4（包括在内）之间。
所以 rand()%51 返回一个从 0 到 50 的数字，加上 50，你就会得到你想要的。
定义一个宏：

```
#define RandomNumberInInterval(min,max) rand()%(max-min+1)+min 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:54:47.760

生成它`0 - 50`并求和 50。

```
number = ( rand() % 51 ) + 50; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:43:48.327

是的，因为您始终可以替换`if (foo) { ... }`为`while (foo) { ... break; }`.

# monodevelop - 在 MonoDevelop 中为应用程序签名

> ID：13780622
> 
> 赞同：1
> 
> 时间：2012-12-08T18:41:58.140
> 
> 标签：monodevelop, ssl-certificate, code-signing

据我所知，我已经创建并安装了所有必需的证书。如果我查看证书的详细信息，它们都是有效的。

我已将配置设置为在 monodevelop 中发布。

在 MonoDevelop 的选项中，我选择了“签署应用程序包”

在 Identity 中，我选择了我创建的“Mac Developer”证书。

我创建了一个与 info.plist 中的“配置文件包”匹配的配置文件。

但是，monodevelop 在规定中找不到它：“找不到匹配的配置文件”

我错过了什么？

真的希望有人知道我哪里出错了。我非常接近最终让这个愚蠢的应用程序正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:52:20.030

听起来您的机器上没有安装在 Apple 的 Mac 开发人员网站上创建的配置文件。

如果您打开 Xcode 的 Organizer 窗口并选择顶部的“设备”选项卡，窗口左侧应该有一个列表，其中包含以下项目：

```
Library
  Provisioning Profiles
  Software Images
  Device Logs
  Screenshots 
```

选择“配置文件”。

在屏幕底部，您应该会看到 4 个按钮：新建、导入、导出（左侧）和刷新（最右侧）。

单击 Refresh 按钮，它将查询 Apple 的开发人员站点并下载您的所有 Provisioning Profiles。

# mysql - MySQL友谊关系计数？

> ID：13780632
> 
> 赞同：0
> 
> 时间：2012-12-08T18:42:43.977
> 
> 标签：mysql

表 - 朋友

```
 friend_id     | friend_one    | friend_two   | role 
+--------------------------------------------------------------------------------------------+
|1:    44               34              34          me
|2:    45               35              35          me
|3:    46               35              34          fri
+--------------------------------------------------------------------------------------------+ 
```

我需要计算，谁在关注，谁是关注者.. 差不多了，我在下面得到了一些答案，但大多只是给我静态数字，但到目前为止感谢您的帮助，它给了我一个开始的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:52:56.293

看来您只想这样：

```
select friend_one, count(*) as count
from friends
where friend_one != friend_two -- fyi such rows shouldn't exist
group by friend_one; 
```

如果您想要特定用户的计数，请执行以下操作：

```
select count(*) as count
from friends
where friend_one != friend_two -- fyi such rows shouldn't exist
and friend_one = $uid 
```

我的评论`friend_one != friend_two`是因为您似乎对每个用户都有“自动自我朋友”条目。恕我直言，这是一个坏主意，因为它没有增加任何价值 - 考虑没有这样的行。

# wpf - WPF - 如何使用 Caliburn.Micro 绑定到资源中的颜色

> ID：13780634
> 
> 赞同：1
> 
> 时间：2012-12-08T18:42:57.810
> 
> 标签：wpf, data-binding, dependency-properties, caliburn.micro

如何`<Color x:Key="SomeColor" />`使用 Caliburn Micro 将类似的东西绑定到依赖属性？

我需要能够`Color`在运行时进行更改，并在所有使用它的东西中立即更新它。

# 解决方案：

* * *

SomeClassView.xaml 中的 XAML

```
<SomeControl.Resources>
    <SolidColorBrush x:Key="ControlBrush" />
</SomeControl.Resources> 
```

* * *

SomeClassViewModel.cs 中的 C#

```
[Export(typeof(MainWindowViewModel))]
public class MainWindowViewModel : PropertyChangedBase
{
    private SolidColorBrush _controlBrush;

    public SolidColorBrush ControlBrush
    {
        get { return _controlBrush; }
        set
        {
            _controlBrush = value;
            NotifyOfPropertyChange(() => ControlBrush);
        }
    }
} 
```

* * *

问题正是 Charleh 所说的，我完全忘记了并非 WPF 中的所有内容都可以是 DependencyProperty。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:02:11.197

您通常不能直接绑定`Color`对象，您需要使用 a `SolidColorBrush`（用于纯色），因为这是大多数 UI 对象所期望的。

例如

`TextBox.Background`期望`Brush`，它`SolidColorBrush`是的子类。还有其他类型的刷子可以产生不同的填充，例如`LinearGradientBrush`

看看这里：

[如何在 WPF/XAML 中绑定背景颜色？](https://stackoverflow.com/questions/1962149/how-can-i-bind-a-background-color-in-wpf-xaml)

您能否提供一些您所期望的和 XAML 的屏幕截图？

**编辑：**

好吧，你想要的很容易实现，与 Caliburn.Micro 完全没有关系:)

像往常一样创建你的样式，但是`Color`使用动态绑定画笔属性`DynamicResource`。当您更新颜色本身时，将再次评估资源绑定并且颜色将发生变化。

示例 XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Color x:Key="TestColor" A="255" R="255" G="0" B="0"></Color>
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Background">
                <Setter.Value>
                    <SolidColorBrush Color="{DynamicResource TestColor}"></SolidColorBrush>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <StackPanel>
            <Button Click="Button_Click" Style="{StaticResource ButtonStyle}">Red</Button>
            <Button Click="Button_Click_1" Style="{StaticResource ButtonStyle}">Blue</Button>
        </StackPanel>
    </Grid>
</Window> 
```

代码隐藏：

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            Resources["TestColor"] = Color.FromArgb(255, 255, 0, 0);
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            Resources["TestColor"] = Color.FromArgb(255, 0, 0, 255);
        }
    }
} 
```

# c# - 如何在 xaml 中连接按钮内容？

> ID：13780636
> 
> 赞同：8
> 
> 时间：2012-12-08T18:43:10.293
> 
> 标签：c#, wpf, xaml, button, concatenation

我试图将两个字符串连接为`Button`XAML 中的内容。但它不起作用。我尝试如下：

```
<Button Content=""String1"+{DynamicResource String2}"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T07:39:27.013

XAML 中的代码如下：

```
 <Button>
        <TextBlock>
            <Run Text="String1"/>
            <Run Text="{DynamicResource String2}"/>
        </TextBlock>
 </Button> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:14:17.610

使用多重绑定概念。 [这](http://web.archive.org/web/20160116171455/http://www.blogs.intuidev.com/post/2010/04/12/ConcatenateFieldsMultiValueConverter.aspx)会很好地帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T19:10:24.867

您可以使用`MultiBinding`with`StringFormat`参数：

```
<Button>
    <MultiBinding StringFormat="{}{0}{1}">
        <Binding>
            <Binding.Source>
                <sys:String> String1 </sys:String>
            </Binding.Source>
        </Binding>
        <Binding Path="{DynamicResource String2}" />
    </MultiBinding>
</Button> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T03:59:18.400

处理此问题的一种简单但扩展性不强的方法是：

```
<Window x:Class="AdHocWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:System="clr-namespace:System;assembly=mscorlib"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <System:String x:Key="String2">String2</System:String>
</Window.Resources>
<Grid>
    <Button>
        <TextBlock>
            <System:String>String1 </System:String>
            <TextBlock Text="{DynamicResource String2}"/>
        </TextBlock>
    </Button>
</Grid>
</Window> 
```

TextBlocks 基本上是小的流文档，所以它们非常灵活。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T19:12:26.447

如何将内容绑定到视图模型或模型中的值，然后您可以更轻松地将其设置为您想要的动态并对其进行更多控制。当然你必须使用MVVM ..

但是，2kay 的答案更好...

# facebook-opengraph - Open Graph Linter 错误

> ID：13780637
> 
> 赞同：2
> 
> 时间：2012-12-08T18:43:24.567
> 
> 标签：facebook-opengraph

我正在尝试调试为什么图像未显示在右侧面板 Facebook 共享框中。我曾尝试使用 og linter 进行调试，但无法正确使用。

URL 示例在这里[http://pluba.com/Classified/DisplayAd.asp?id=24096](http://pluba.com/Classified/DisplayAd.asp?id=24096)

在 facebook 框的右侧，您只能看到发布的文字，但没有图像。否则，该图像在 Facebook 新闻源上显示得很好。

Linter 调试：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fpluba.com%2FClassified%2FDisplayAd.asp%3Fid%3D24096](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fpluba.com%2FClassified%2FDisplayAd.asp%3Fid%3D24096)

我在想我的 og 标签中有一些奇怪的东西。这是报告的两个错误

推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。

推断属性：应显式提供“og:description”属性，即使可以从其他标签推断出值。

任何帮助，将不胜感激。我试图研究openstack，但仍然无法弄清楚。谢谢。维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:08:48.217

你所拥有的一切看起来都是正确的。我认为喜欢框不会在帖子附件旁边显示图像，因为我们没有太多空间。

# matlab - MATLAB 中的 SOM 内存不足

> ID：13780643
> 
> 赞同：1
> 
> 时间：2012-12-08T18:44:04.550
> 
> 标签：matlab, out-of-memory, self-organizing-maps

我正在尝试使用 SOM 来学习 80000X10 个样本（每个样本都是一个大小为 10 的向量）。但我什至不能用 10000X1 样本配置 8x8 网络。它抛出“内存不足”错误。

这是我的代码（数据是 80000X10 矩阵）：

```
net=selforgmap([8 8])
net=configure(net,data(1:10000,1)) 
```

Matlab 帮助：“未配置的网络在第一次调用 train 时会自动配置和初始化。”

即使是 8000X1 的数据集，也需要很多时间。我注意到一个巨大`numWeightElements: 512000`的`net`变量（8 * 8 * 8000 = 512000）。重量应为 8*8。SOM 训练算法不应该使用这么多内存。怎么了？

内存命令的输出：

```
>> memory
Maximum possible array:               3014 MB (3.160e+009 bytes) 
Memory available for all arrays:      3014 MB (3.160e+009 bytes) 
Memory used by MATLAB:                1154 MB (1.210e+009 bytes)
Physical Memory (RAM):                4040 MB (4.236e+009 bytes) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:34:00.003

我认为您配置错误的输入结构。每个输入向量必须是一列而不是一行。引用此“[聚类数据 - MATLAB & Simulink](http://www.mathworks.com/help/nnet/gs/clustering-data.html) ”

> 要定义聚类问题，只需将要聚类的 Q 个输入向量排列为输入矩阵中的列（有关静态和时间序列数据的数据格式的详细描述，请参阅“[数据结构”）。](http://www.mathworks.com/help/nnet/ug/data-structures.html)例如，您可能希望对这组 10 个二元素向量进行聚类：
> 
> 输入 = [7 0 6 2 6 5 6 1 0 1；6 2 5 0 7 5 5 1 2 2]

如您所见，每个输入向量都是一列。您有 10 个二元素输入向量作为 2x10 数组。

# c# - 方法无法正常运行

> ID：13780645
> 
> 赞同：-1
> 
> 时间：2012-12-08T18:44:11.513
> 
> 标签：c#, methods

此方法是一个更大程序的一部分，该程序从 .txt 文件中提取员工数据，然后使用该数据计算净工资。我的 CalcPay 方法应该计算小时 > 40 和小时 < 40 的工资，但是当它到达超过 40 小时的员工时，它计算他们的工资只是小时 * 工资，而不是花费时间 > 40 并制作他们的时间和一个半......有什么建议吗？

```
public double CalcPay()
    {

        double pay = hoursWorked * hourlyWage;
        double overTimeHours = hoursWorked - FULL_TIME;

        if (overTimeHours > 0)
        {
            pay += overTimeHours * (hourlyWage * OVER_TIME_RATE);
        }
        double tax1 = pay * FED_TAX;
        double tax2 = pay * STATE_TAX;
        return ((pay - tax1) - tax2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:49:28.067

我可能会做这样的事情。

```
 public double CalcPay()
    {
        double regularHours = Math.Min(hoursWorked, FULL_TIME);
        double overTimehours = Math.Max(hoursWorked - FULL_TIME, 0);

        double regularPay = regularHours * hourlyWage;
        double overTimePay = overTimehours * hourlyWage * OVER_TIME_RATE;
        double pay = regularPay + overTimePay;

        double tax1 = pay * FED_TAX;
        double tax2 = pay * STATE_TAX;
        return ((pay - tax1) - tax2);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:19:04.477

我已经解决了这个问题，正如许多人指出的那样，该方法应该有效，我正在无序地读取输入，这导致在超时的情况下输出错误。感谢所有提供帮助的人。

# html - 将文本与图像垂直对齐

> ID：13780652
> 
> 赞同：0
> 
> 时间：2012-12-08T18:44:30.843
> 
> 标签：html, css, image, vertical-alignment

我正在尝试在图像中间对齐一些文本，并且尝试了几种不同的垂直对齐方式，但似乎无法使其正常工作。

目前，布局看起来是这样的： ![当前布局](../Images/99a09b72e48ee7062bcfc7c83ff5c0fc.png)

用于此的 HTML/CSS 是：

```
<p id="searchresults">Search Results</p>

        <ul id="posted_results">
            <?php
                foreach($search_result['movies'] as $sr){
                    echo '<li class="search_item"><a href="/ug10/cs10aer/screening/movie.php?title=' . $sr['title'] . '" alt="' . $sr['title'] . ' (' . $sr['year'] . ')"><img src="' . $sr['posters']['thumbnail'] . '" title="' . $sr['title'] . ' poster" alt="' . $sr['title'] . ' poster" /></a><a href="/ug10/cs10aer/screening/movie.php?title=' . $sr['title'] . '" alt="' . $sr['title'] . ' (' . $sr['year'] . ')">' . $sr['title'] . ' (' . $sr['year'] . ')</a></li>';
                }
            ?>
        </ul> 
```

![当前的 CSS](../Images/32166f06a0bd7e4dd4ae160159d889f3.png)

**更新** 只是为了进一步的指导，我想获得每个列表对象的文本以显示如下： ![想要的布局](../Images/ef76b70044720f861ddc5053d15bc3de.png)

**更新 2** 根据要求，这是 Firefox 看到的 HTML 代码：

```
<div id="content">

        <p id="searchresults">Search Results</p>

        <ul id="posted_results">
            <li class="search_item"><a href="/ug10/cs10aer/screening/movie.php?title=Star Wars: Episode III - Revenge of the Sith 3D" alt="Star Wars: Episode III - Revenge of the Sith 3D (2005)"><img src="http://content8.flixster.com/movie/10/94/47/10944718_mob.jpg" title="Star Wars: Episode III - Revenge of the Sith 3D poster" alt="Star Wars: Episode III - Revenge of the Sith 3D poster" /></a><a href="/ug10/cs10aer/screening/movie.php?title=Star Wars: Episode III - Revenge of the Sith 3D" alt="Star Wars: Episode III - Revenge of the Sith 3D (2005)">Star Wars: Episode III - Revenge of the Sith 3D (2005)</a></li>
            <li class="search_item"><a href="/ug10/cs10aer/screening/movie.php?title=Star Wars: Episode II - Attack of the Clones 3D" alt="Star Wars: Episode II - Attack of the Clones 3D (2002)"><img src="http://content7.flixster.com/movie/10/94/47/10944721_mob.jpg" title="Star Wars: Episode II - Attack of the Clones 3D poster" alt="Star Wars: Episode II - Attack of the Clones 3D poster" /></a><a href="/ug10/cs10aer/screening/movie.php?title=Star Wars: Episode II - Attack of the Clones 3D" alt="Star Wars: Episode II - Attack of the Clones 3D (2002)">Star Wars: Episode II - Attack of the Clones 3D (2002)</a></li>
            <li class="search_item"><a href="/ug10/cs10aer/screening/movie.php?title=Star Wars: Episode IV - A New Hope" alt="Star Wars: Episode IV - A New Hope (1977)"><img src="http://content9.flixster.com/movie/10/94/47/10944715_mob.jpg" title="Star Wars: Episode IV - A New Hope poster" alt="Star Wars: Episode IV - A New Hope poster" /></a><a href="/ug10/cs10aer/screening/movie.php?title=Star Wars: Episode IV - A New Hope" alt="Star Wars: Episode IV - A New Hope (1977)">Star Wars: Episode IV - A New Hope (1977)</a></li>
            <li class="search_item"><a href="/ug10/cs10aer/screening/movie.php?title=Star Wars: Episode VI - Return of the Jedi" alt="Star Wars: Episode VI - Return of the Jedi (1983)"><img src="http://content7.flixster.com/movie/10/94/47/10944709_mob.jpg" title="Star Wars: Episode VI - Return of the Jedi poster" alt="Star Wars: Episode VI - Return of the Jedi poster" /></a><a href="/ug10/cs10aer/screening/movie.php?title=Star Wars: Episode VI - Return of the Jedi" alt="Star Wars: Episode VI - Return of the Jedi (1983)">Star Wars: Episode VI - Return of the Jedi (1983)</a></li>
        </ul>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:17:51.620

从图像中删除浮动并使用垂直对齐：

```
.search_item img {
    vertical-align: middle;  
    margin-right: 30px;
} 
```

[http://jsfiddle.net/tNhyj/](http://jsfiddle.net/tNhyj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:01:33.607

如果图像总是相同的高度 + 描述长度总是相似的，你可以使用 line-height 或/和 margin-top 来破解它，或者可以在此处找到使用垂直对齐的图像示例上的垂直对齐：[https ://stackoverflow.com/a/13780959/1134615](https://stackoverflow.com/a/13780959/1134615)

使用行高的简单小提琴：

[http://jsfiddle.net/BrFga/](http://jsfiddle.net/BrFga/)

html

```
 <ul>
        <li>
            <img src=""/>       
            <p>Sample text</p>
    </li>
    </ul>​ 
```

css

```
ul {
    height: 120px;
    width: 600px;
    outline: red 1px solid; 
}

img {
    height: 120px;
    width: 120px;
    float: left;
}

p {
    height: 120px;
    line-height: 120px;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:17:01.303

您可以将 vertical-align:middle 添加到图像中。

```
li img {
 vertical-align:middle;
padding-right:10px;    
} 
```

检查这个 jsfiddle 看看它是否是你想要的。 [http://jsfiddle.net/3ETDj/](http://jsfiddle.net/3ETDj/)

对我来说，它适用于 Firefox、IE8、Chrome 和 Opera。

# c++ - 为什么迭代器运算符 + 返回一个副本？

> ID：13780653
> 
> 赞同：3
> 
> 时间：2012-12-08T18:44:43.947
> 
> 标签：c++, iterator

如果您有一个迭代器`vector<int>::iterator i = vector.begin()`，`i++`则将实际的迭代器向下移动。但是为什么会这样

`i = i + 3`

给你一个新的迭代器三个门？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:46:32.830

模仿人们期望的自然行为`+`。同样的方式：

```
int x = 0;
int y = x + 3; 
```

第二行没有改变`x`，它只是计算为 3 的值。但是，`x++` *会*修改`x`.

如果你想推进一个通用迭代器，你应该使用`std::advance(i, 3)`（它会`i += 3`在随机访问迭代器上做，`i++`在任何其他迭代器上做三遍）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T18:47:04.013

使用 时`operator+`，您不希望修改任何一个操作数。这意味着必须创建一个新对象。就像你这样做：

```
int a = 5;
int b = a + 3; 
```

您仍然希望 a 等于 5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T18:59:44.760

这是因为**不**`x + n`应该改变的值不管是什么，无论是还是。想法是一样的。**`x``x``int``iterator`**

 **但是，如果您不想这样写：

```
it = it + 3; 
```

那么你有一个替代方案，你可以这样写：

```
std::advance(it, 3); 
```

请注意，对于一些不支持**随机访问迭代器**¹的标准容器，您**无法**编写`it = it + 3`，但您仍然**可以**`std::advance(it,3)`编写。例如：

```
std::list<int>::iterator it = lst.begin();

it  = it + 3; //COMPILATION ERROR. `it` is not random access iterator

std::advance(it,3); //okay 
```

所以在这种情况下，`std::advance(it,3)`是唯一的方法*（否则你必须自己编写这样的功能）*。

^(1.注意这`std::vector<T>::iterator`是随机访问迭代器，这就是你可以写的原因`it+3`。)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T18:46:57.990

这样你就可以写：

```
j = i + 3; 
```

如果`operator+`不创建新副本，它*会*做什么？修改`i`？**

# c# - 提取两个字符串之间的所有字符串

> ID：13780654
> 
> 赞同：12
> 
> 时间：2012-12-08T18:44:58.067
> 
> 标签：c#

我正在尝试开发一种方法来匹配两个字符串之间的所有字符串：

我已经尝试过了，但它只返回第一个匹配项：

```
string ExtractString(string s, string start,string end)
        {
            // You should check for errors in real-world code, omitted for brevity

            int startIndex = s.IndexOf(start) + start.Length;
            int endIndex = s.IndexOf(end, startIndex);
            return s.Substring(startIndex, endIndex - startIndex);
        } 
```

假设我们有这个字符串

```
String Text = "A1FIRSTSTRINGA2A1SECONDSTRINGA2akslakhflkshdflhksdfA1THIRDSTRINGA2" 
```

我希望 ac# 函数执行以下操作：

```
public List<string> ExtractFromString(String Text,String Start, String End)
{
    List<string> Matched = new List<string>();
    .
    .
    .
    return Matched; 
}
// Example of use 

ExtractFromString("A1FIRSTSTRINGA2A1SECONDSTRINGA2akslakhflkshdflhksdfA1THIRDSTRINGA2","A1","A2")

    // Will return :
    // FIRSTSTRING
    // SECONDSTRING
    // THIRDSTRING 
```

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-08T18:57:16.040

```
 private static List<string> ExtractFromBody(string body, string start, string end)
    {
        List<string> matched = new List<string>();

        int indexStart = 0;
        int indexEnd = 0;

        bool exit = false;
        while (!exit)
        {
            indexStart = body.IndexOf(start);

            if (indexStart != -1)
            {
                indexEnd = indexStart + body.Substring(indexStart).IndexOf(end);

                matched.Add(body.Substring(indexStart + start.Length, indexEnd - indexStart - start.Length));

                body = body.Substring(indexEnd + end.Length);
            }
            else
            {
                exit = true;
            }
        }

        return matched;
    } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-08T19:18:44.783

这是使用 RegEx 的解决方案。不要忘记包含以下 using 语句。

`using System.Text.RegularExpressions`

它只会正确返回给定的开始和结束字符串之间的文本。

**不会退还：**

```
akslakhflkshdflhksdf 
```

**将被退回：**

```
FIRSTSTRING
SECONDSTRING
THIRDSTRING 
```

它使用正则表达式模式`[start string].+?[end string]`

如果开始和结束字符串包含正则表达式特殊字符，则它们会被转义。

```
 private static List<string> ExtractFromString(string source, string start, string end)
    {
        var results = new List<string>();

        string pattern = string.Format(
            "{0}({1}){2}", 
            Regex.Escape(start), 
            ".+?", 
             Regex.Escape(end));

        foreach (Match m in Regex.Matches(source, pattern))
        {
            results.Add(m.Groups[1].Value);
        }

        return results;
    } 
```

你可以把它变成 String 的扩展方法，如下所示：

```
public static class StringExtensionMethods
{
    public static List<string> EverythingBetween(this string source, string start, string end)
    {
        var results = new List<string>();

        string pattern = string.Format(
            "{0}({1}){2}",
            Regex.Escape(start),
            ".+?",
             Regex.Escape(end));

        foreach (Match m in Regex.Matches(source, pattern))
        {
            results.Add(m.Groups[1].Value);
        }

        return results;
    }
} 
```

用法：

```
string source = "A1FIRSTSTRINGA2A1SECONDSTRINGA2akslakhflkshdflhksdfA1THIRDSTRINGA2";
string start = "A1";
string end = "A2";

List<string> results = source.EverythingBetween(start, end); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T19:00:16.657

```
text.Split(new[] {"A1", "A2"}, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-08T18:54:29.027

您可以使用以下代码中的起始标识符将字符串拆分为数组：

```
String str = "A1FIRSTSTRINGA2A1SECONDSTRINGA2akslakhflkshdflhksdfA1THIRDSTRINGA2";

String[] arr = str.Split("A1"); 
```

然后遍历您的数组并删除每个字符串的最后 2 个字符（以删除 A2）。您还需要丢弃第一个数组元素，因为假设字符串以 A1 开头，它将为空。

代码未经测试，目前在手机上

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-25T09:47:47.853

**这是一个通用的解决方案**，我相信更可读的代码。没有测试，所以要小心。

```
public static IEnumerable<IList<T>> SplitBy<T>(this IEnumerable<T> source, 
                                               Func<T, bool> startPredicate,
                                               Func<T, bool> endPredicate, 
                                               bool includeDelimiter)
{
    var l = new List<T>();
    foreach (var s in source)
    {
        if (startPredicate(s))
        {
            if (l.Any())
            {
                l = new List<T>();
            }
            l.Add(s);
        }
        else if (l.Any())
        {
            l.Add(s);
        }

        if (endPredicate(s))
        {
            if (includeDelimiter)
                yield return l;
            else
                yield return l.GetRange(1, l.Count - 2);

            l = new List<T>();
        }
    }
} 
```

在你的情况下，你可以打电话，

```
var text = "A1FIRSTSTRINGA2A1SECONDSTRINGA2akslakhflkshdflhksdfA1THIRDSTRINGA2";
var splits = text.SplitBy(x => x == "A1", x => x == "A2", false); 
```

当您不希望在结果中包含分隔符（如您的情况）时，这不是最有效的，但对于相反的情况则有效。为了加快您的案例，可以直接调用 GetEnumerator 并使用 MoveNext。

# javascript - spin.js 与 jquery 依赖关系的困难

> ID：13780655
> 
> 赞同：1
> 
> 时间：2012-12-08T18:45:03.583
> 
> 标签：javascript, node.js, spine.js

我试图给 spin.js 一个旋转，但是在将 jQuery 包含为依赖项时我遇到了困难。基本上我引用`"jquery": "~1.8.3"`in`package.json`和`"jquery"`in `slug.json`，然后我运行`npm install .`

启动 hem 服务器，但是当我加载我的应用程序时，它会在我身上崩溃，并显示以下输出：

```
 /usr/local/lib/node_modules/hem/lib/resolve.js:43
      throw "Cannot find module: " + request + ". Have you run `npm install .`
                                             ^
Cannot find module: url. Have you run `npm install .` ? 
```

这似乎与node.js`url`模块有关，hem如何使用[node/lib/module.js](https://github.com/visionmedia/node/blob/master/lib/module.js#L160 "节点/lib/module.js")来解析/加载？依赖？

您将在下面找到崩溃的特定代码`hem/lib/resolve.js`

```
module.exports = function(request, parent) {
var dir, filename, id, paths, _, _ref1;
if (parent == null) {
  parent = repl;
}
_ref1 = Module._resolveLookupPaths(request, parent), _ = _ref1[0], paths = _ref1[1];
filename = Module._findPath(request, paths);
dir = filename;
if (!filename) {
  throw "Cannot find module: " + request + ". Have you run `npm install .` ?";
}
while (__indexOf.call(invalidDirs, dir) < 0 && __indexOf.call(modulePaths, dir) < 0) {
  dir = dirname(dir);
}
if (__indexOf.call(invalidDirs, dir) >= 0) {
  throw "Load path not found for " + filename;
}
id = filename.replace("" + dir + "/", '');
return [modulerize(id, filename), filename]; 
```

};

调用`Module._findPath(request, paths)`返回 false 是 request = "url" 和 paths="."

我尝试手动安装 node.js url 模块，在本地甚至全局使用 npm，但仍然以同样的方式失败。我也尝试在 lib 下包含 jquery 而不是自动管理，但它给出了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:21:48.287

NPM 不适用于前端开发，就 Spine.js 而言 :) 你应该安装 Twitter Bower - [https://github.com/twitter/bower](https://github.com/twitter/bower)。您可以在系统范围内 ( `npm install bower -g`) 或本地`{"devDepencies": {"bower": "0.6.6"}}`对您的`package.json`和`npm install`. 然后`component.json`使用脊柱和 jquery 的依赖项创建。运行`bower install`或`./node_modules/.bin/bower install .`之后。您会在`components`文件夹中找到 spin 和 jquery。

# objective-c - 如何在开始时以最小比例设置滚动视图？

> ID：13780656
> 
> 赞同：0
> 
> 时间：2012-12-08T18:45:04.377
> 
> 标签：objective-c, uiscrollview, zooming, scale

我必须`UIScrollView`从 0.28 `scale`（当前刻度）开始设置。我怎样才能正确地做到这一点？

现在缩放我正在使用这种方法：

```
#pragma mark - UIScrollViewDelegate Methods

-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
return imageView;
}

-(void)scrollViewDidZoom:(UIScrollView *)scrollView {
[self centerScrollViewContent];
}

-(void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale {

}

- (void)centerScrollViewContent {
CGSize boundsSize = self.scrollView.bounds.size;
CGRect contentsFrame = imageView.frame;

if (contentsFrame.size.width < boundsSize.width) {
    contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
} else {
    contentsFrame.origin.x = 0.0f;
}

if (contentsFrame.size.height < boundsSize.height) {
    contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
} else {
    contentsFrame.origin.y = 0.0f;
}

imageView.frame = contentsFrame;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:53:03.237

**加载滚动视图内容后**，您可以设置缩放比例：

```
self.scrollView.zoomScale = 0.28; 
```

# php - 在php中上传表单max_size

> ID：13780657
> 
> 赞同：0
> 
> 时间：2012-12-08T18:45:04.580
> 
> 标签：php, file, file-upload

我有一个像这样的上传表格。

```
<body>
<form action="upload.php" method="post" enctype="multipart/form-data">
<input type="file" name="file" value="file"/>
<input type="submit" value="UPLAOD" name="upload"/><br/>
</body> 
```

和 upload.php 为：

```
if($_FILES["file"]["error"]>0)
     echo "ERROR: ".$_FILES["file"]["error"]."<br/>";
else{
     if(file_exists("./".$_FILES["file"]["name"]))
        echo "File already exists.";
    else
    {
        move_uploaded_file($_FILES["file"]["tmp_name"],"./".$_FILES["file"]["name"]);
        echo "File Uploaded.";
    }
    } 
```

我更改了`upload_max_filesize=10M , post_max_size=8M`但`php.ini` 我仍然无法上传 5MB 大小的文件。可能出了什么问题？

当我运行时`phpinfo()`，它仍然显示`upload_max_size=2M`我将其更改为之前的值`10M`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:20:20.453

如需上传大型文件，请参考以下步骤。

1) 在 Web 服务器的根文件夹中创建一个 .htaccess 文件。

2) 将以下代码放入 .htaccess 文件中。

**php_value upload_max_filesize 20M**

**php_value post_max_size 20M**

**php_value max_execution_time 200**

**php_value max_input_time 200**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:54:49.467

试试这个[链接](http://drupal.org/node/97193)

> 将上传文件的限制增加到 10 MB：
> 
> 将以下内容添加到相关的 php.ini 文件中（推荐，如果您有权访问）。请注意，对于某些主机，这是系统范围的设置。但是，对于使用 suexec（例如）将 PHP 作为 CGI 脚本运行的主机，您可以将这些指令放在 Drupal 根目录中的 php.ini 文件中。
> 
> *   upload_max_filesize = 10M
>     
>     
> *   post_max_size =10M
>     
>     
> 
> 将以下内容添加到 Drupal 根目录中的 .htaccess 文件中。
> 
> *   php_value upload_max_filesize 10M
> *   php_value post_max_size 10M

有很多关于这个的文章

# jquery - JQuery 隐藏的内容超出了应有的范围

> ID：13780658
> 
> 赞同：0
> 
> 时间：2012-12-08T18:45:06.427
> 
> 标签：jquery

我一直在对我的论坛页面类别列表进行一些更新。

我已经进行了广泛的结构更改以使用 HTML5，这使得有必要更改显示/隐藏每个标题类别的 JQuery。

这是新的 JQuery 和 HTML5 结构：

[http://jsfiddle.net/LYoung/JLVEs/1/](http://jsfiddle.net/LYoung/JLVEs/1/)

```
<div class="t">
    <h2><a href="#" class="sh">-</a> Gaming</h2>
</div>
<section>
    <div class="cat">
        <p><a class="catlnk" href="display.php?cat=General-Gaming&page=1">General Gaming</a><span>No work here, just play!</span></p>
    </div>
    <div class="cat">
        <p><a class="catlnk" href="display.php?cat=World-of-Warcraft&page=1">World of Warcraft</a><span>WOW specific discussion. No other games please.</span></p>
    </div>
</section> 
```

我正在使用的 JQuery：

```
$(".sh").click(function() {
    var show = ($(this).text() === "+");

    if (show) {
        $(this).parent().parent("div").siblings("section").fadeIn(500);
    }
    else {
        $(this).parent().parent("div").siblings("section").fadeOut(500);
    }
    $(this).text(show ? "-" : "+");
}); 
```

奇怪的是，这在 jsfiddle 上工作得很好。它完全符合我的预期，但在[我的网页上](http://loganyoung.za.net/forum/)，它显示/隐藏了所有类别。

谁能帮我找出原因并提供解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:59:31.010

问题是您的真实页面没有包装各个类别的 <div class="title"> 。因此，当您使用兄弟姐妹方法时，它会选择列表中的每个 <section> 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:46:47.150

您可能只想隐藏 div 后面的部分，而不是隐藏所有兄弟姐妹。而且您不需要使用 parent 两次：

```
if (show) {
    $(this).closest("div").next("section").fadeIn(500); // if possible make the selector it more specific using "div.t"
} else {
    $(this).closest("div").next("section").fadeOut(500);
} 
```

# java - 导入自定义 tagLib 而不使用像 <%@ 这样的指令

> ID：13780661
> 
> 赞同：1
> 
> 时间：2012-12-08T18:45:10.680
> 
> 标签：java, jsp, jakarta-ee, taglib, scriptlet

我在 web.xml 中的所有 JSP 中都禁用了 scriptlet：

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <scripting-invalid>true</scripting-invalid>
    </jsp-property-group>
</jsp-config> 
```

但是我需要导入一些像这样使用的自定义标签库：

```
<%@ taglib prefix="utils" uri="/tags-utils" %> 
```

如何在不使用 scriptlet 的情况下导入它？另外，如何避免使用以下内容？

```
<%@ page language="java" contentType="text/html; charset=UTF-8" %> 
```

删除 scriptlet 的决定是为了避免由多个开发人员编写的项目中的 scriptlet 混乱。

如果不使用 scriptlet 就无法更改导入，那么我将如何禁用它以用于除`<%@ taglib`or 之外的任何用途`<%@ page`？

试图从

```
<%@ taglib prefix="s" uri="/struts-tags" %> 
```

到

```
<jsp:directive.tagLib prefix="s" uri="struts-tags" /> 
```

但是 Servlet 给我一个错误：

> [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/portal].[jsp]] (http-localhost-127.0.0.1-80-3) Servlet.service() for servlet jsp throw exception: org.apache.jasper.JasperException: /index.jsp(2,18) <jsp:directive.tag 指令只能在标签文件中使用

我还有什么需要做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T02:08:55.120

**JSP 2.2 规范**

**用于 JSP 语法的 JSP 1.3.10.1 EBNF 语法**

```
ScriptlessBody ::= ( ( ‘&lt;%--’ JSPCommentBody )
                   | ( ‘&lt;%@’ DirectiveBody )
                   | ( ‘&lt;jsp:directive.’ XMLDirectiveBody )
                   | ( ‘&lt;%!’ <TRANSLATION_ERROR> )
                   | ( ‘&lt;jsp:declaration’ <TRANSLATION_ERROR> )
                   | ( ‘&lt;%=’ <TRANSLATION_ERROR> )
                   | ( ‘&lt;jsp:expression’ <TRANSLATION_ERROR> )
                   | ( ‘&lt;%’ <TRANSLATION_ERROR> )
                   | ( ‘&lt;jsp:scriptlet’ <TRANSLATION_ERROR> )
                   | ( ‘${‘ ELExpressionBody )
                   | ( ‘#{‘ ELExpressionBody )
                   | ( ‘&lt;jsp:text’ XMLTemplateText )
                   | ( ‘&lt;jsp:’ StandardAction )
                   ( ( ‘&lt;/’ ExtraClosingTag )
                   | ( ‘&lt;‘ CustomAction CustomActionBody )
                   | TemplateText
                   )* 
```

* * *

所以，当`scripting-invalid=true`：

**非法的**

```
<%
<%!
<%=
<jsp:scriptlet
<jsp:declaration
<jsp:expression 
```

**合法的**

```
<%@
<jsp:directive.
<jsp: 
```

**以下是合法的：**

```
 <%@ taglib prefix="utils" uri="/tags-utils" %> 
```

**只要“app context uri”+“/tags-utils”（taglib 的上下文相对路径）映射到“taglib absolute uri”。**

**或者，您可以尝试：**

```
 <%@ taglib prefix="utils" uri="http://www.mycorp/utiltags" %>  // use your absolute taglib URI 
```

或者

```
 <%@ taglib prefix="utils" uri="uri_path_relative_to_jsp_uri" %>  // no leading "/" 
```

或者

```
 <%@ taglib prefix="utils" tagdir="/WEB-INF/tags" %> // include subdir if approp 
```

**发明如下。没有`jsp:directive.tagLib`定义标签。不要使用。**

```
 <jsp:directive.tagLib prefix="s" uri="struts-tags" /> 
```

**代替：**

```
 <%@ page language="java" contentType="text/html; charset=UTF-8" %> 
```

**尝试：**

```
 <%@ page contentType="text/html; charset=UTF-8" %>  // language is for scriptlets 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T18:49:25.103

`<%@taglib`并且`<%@page`是指令，而不是小脚本。

Scriptlet 会有`<%`.

或者你可以这样写

```
<jsp:directive.taglib uri="uri" prefix="prefixOfTag" /> 
```

# prolog - 序言：对某些属性进行排序

> ID：13780666
> 
> 赞同：0
> 
> 时间：2012-12-08T18:45:45.040
> 
> 标签：prolog

我的数据库与此类似：

```
% happy(Person,Happiness)
happy(1,10).
happy(2,5).
happy(3,8).
happy(4,1). 
```

我想对人们的幸福进行分类。

我编写了以下代码，它可以满足我的要求。然而它对我来说看起来很麻烦。有什么改进吗？

```
? - sortPeople(Ts).
Ts = [1, 3, 2, 4]. 
```

我的解决方案：

```
getFirst([],R,R).
getFirst([[H1,_]|T],F,R) :-
    append([H1],F,R1),
    getFirst(T,R1,R).

compareHappiness(X, [_,S1], [_,S2]) :- compare(X, S1, S2).

sortPeople(Ts) :-
    findall([X,Y], happy(X,Y), List), 
    predsort(compareHappiness, List, SortedList),
    getFirst(SortedList,[],Ts). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:19:32.473

考虑使用更具描述性和声明性的谓词名称，例如：

```
person_happiness(1, 10).
person_happiness(2, 5).
person_happiness(3, 8).
person_happiness(4, 1). 
```

要按幸福度对人进行排序，请考虑使用内置的`keysort/2`，它比`predsort/3`. 您只需要构建键值对，按照惯例使用函子 -/2 ，而不是辅助谓词，请考虑使用 SWI-Prolog 内置插件`pairs_values/2`和`reverse/2`：

```
descending_happiness(Ps) :-
        findall(H-P, person_happiness(P, H), HPs),
        keysort(HPs, HPs1),
        pairs_values(HPs1, Ps1),
        reverse(Ps1, Ps). 
```

示例查询：

```
?- descending_happiness(Ps).
Ps = [1, 3, 2, 4]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:34:01.303

- 这是我得到的：

```
sort(Rez) :- findall([Happiness,PId],happy(PId,Happiness),List),
             msort(List,LSorted),
             findall(PersonID,member([_,PersonID],LSorted),Sorted),
             reverse(Sorted,Rez). 
```

# javascript - 捕获 iframe jQuery 中的所有事件并复制

> ID：13780667
> 
> 赞同：1
> 
> 时间：2012-12-08T18:45:48.263
> 
> 标签：javascript, javascript-events, event-handling, jquery

这是问题：

我有一个显示任何网页的 iframe（不一定由我开发）。此页面上可能附有事件（大概我不知道）。

如何动态拦截这些事件并存储它们以供以后复制？

例如：假设当鼠标移动到某个 div 上时，它会改变颜色。我想确保当您触发将颜色更改为 div 的事件时，它会“注册”所有一系列信息，这些信息将允许我（无需用户交互）在以后复制它。

想法？用于录制和后续复制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:17:11.410

简短的回答是：**你不能**。

如果页面上的“任何网页”位于不同的域中，您将无法访问“任何网页”的文档对象，如果您说“任何网页”，我假设它是因为[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)。您需要 IFRAME 中的网站与您的脚本配合才能实现这一点，而“任何网页”都不会发生这种情况。

**同一域上的 IFRAME**
如果您的网页位于同一域上，那么您可以通过为您想要捕获的每个事件添加一个侦听器来访问 IFRAME 正文元素的事件，如下[所述](https://stackoverflow.com/questions/5848598/jquery-how-can-i-bind-all-events-on-a-dom-element)。这对于[冒泡](http://www.quirksmode.org/js/events_order.html)到身体的所有事件都是可能的。因此，如果您有阻止向上冒泡到主体的事件，则此解决方案将不会捕获它们。

```
jQuery('#website body').on('click mouseover mouseout', function(event) {
    console.log(event.type);
}); 
```

假设您有一个带有 id 的 IFRAME，`website`您可以通过将它们与上面的空格分开列出来捕获您希望的事件。该示例捕获`click`,`mousover`和`mouseout`.

也许这更接近你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:51:43.337

将事件处理程序添加到您的 div。对于您的示例，您可以使用

```
$('#div').mouseover(function(e) { ... }) 
```

或者

```
('#div').on('mouseover', function(e) { ... }) 
```

对于“复制”，您必须将有关过去事件的信息存储在某个对象中。您甚至可以存储事件对象本身。

# verilog - verilog，参数的二进制长度

> ID：13780668
> 
> 赞同：3
> 
> 时间：2012-12-08T18:45:59.430
> 
> 标签：verilog

我的模块获取了一个参数，我想在我的代码中设置一个针对该值的计数器。比如说，`parameter n=16`我想定义`reg [x:0] i`，所以我可以数到 n。我怎样才能找到 x ？应该有一个真正简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:31:41.127

有几个选项，具体取决于您的工具支持什么。

*   编写自己的`log2`函数
*   利用`$clog2`

这里有一个冗长的讨论：[http ://www.rhinocerus.net/forum/lang-verilog/646074-how-get-bit-width-value-verilog-compile-time.html](http://www.rhinocerus.net/forum/lang-verilog/646074-how-get-bit-width-value-verilog-compile-time.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T19:26:54.730

你必须使用生成语句这里有一些示例 [http://www.rhinocerus.net/forum/lang-verilog/431130-using-generate-statement-verilog.html](http://www.rhinocerus.net/forum/lang-verilog/431130-using-generate-statement-verilog.html)

# ios - TableView indexPathForRowAtPoint 返回行索引 0

> ID：13780669
> 
> 赞同：1
> 
> 时间：2012-12-08T18:46:03.090
> 
> 标签：ios, uitableview, uigesturerecognizer

我`NSIndexPath`在手势识别器选择器中接收权限有问题。在`UITableViewController:viewDidLoad`我初始化手势识别器时

```
UISwipeGestureRecognizer* rightSwipeGestureRecognizer = 
        [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeRight:)];
rightSwipeGestureRecognizer.direction = UISwipeGestureRecognizerDirectionRight;
[self.tableView addGestureRecognizer:rightSwipeGestureRecognizer]; 
```

在手势处理程序中，我试图获取行索引：

```
- (void) swipeRight: (UISwipeGestureRecognizer *)gestureRecognizer
{
if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
    CGPoint swipeLocation = [gestureRecognizer locationInView:self.tableView];
    NSIndexPath *swipedIndexPath = [self.tableView indexPathForRowAtPoint:swipeLocation];
    NSInteger row = swipedIndexPath.row;
    NSLog(@"Row %d", swipedIndexPath.row);
} 
```

CGPoint 是正确的，但行总是 0。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T00:59:49.883

将**UISwipeGestureRecognizer**添加到每个**UITableViewCell**（具有相同的选择器）。然后，当调用选择器时，您可以通过以下方式获取单元格：`sender.view`。

# javascript - 使用javascript包含文件

> ID：13780682
> 
> 赞同：0
> 
> 时间：2012-12-08T18:47:50.040
> 
> 标签：javascript, include

我需要始终包含一个屏幕浏览器大于或等于 699px 的文件，为此我尝试使用以下脚本：

```
<script type="text/javascript">
<!--
if (screen.width >= 699) {
document.write (" <!--#include virtual="/menu.asp"-->");
}
//-->
</script> 
```

但它什么也没做。有谁知道如何让它工作？

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:51:01.943

JavaScript 在页面传递到浏览器后触发。ASP 包括需要在服务器端完成，在呈现页面之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:52:00.853

include 指令需要在进入 Web 浏览器*之前*成为页面的一部分，并且由于 JavaScript*在*Web 浏览器中执行，因此已经为时已晚。您可能会考虑将 include 放在页面中，但将其隐藏在`div`with`style="display:none;"`中，然后在页面加载时使用 JavaScript 将其删除：

```
<script type="text/javascript">
window.addEventListener('load', function(){
    if (screen.width >= 699)
        document.getElementById('myHiddenElement').style.display = null;
});
</script> 
```

[或者，您可以对CSS Media Queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)使用相同的策略。

**编辑：**示例：

```
<style type="text/css">
#myHiddenElement {
    display: none;
}
@media screen and (min-width: 699px) {
    #myHiddenElement {
        display: block;
    }
}
</style> 
```

这将为您提供更好的性能，并且会在用户调整浏览器窗口大小时自动隐藏和显示内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T18:52:30.687

`<!--#include virtual="/menu.asp"-->`是 SSI 语法（我认为 ASP Classic 也借用了该语法）。无论哪种方式，如果服务器支持它，它就会在服务器上进行处理并替换为文件的内容。

在所有服务器端处理完成后，将结果传递给客户端。

很可能无论文件的内容是什么，它都会包含`"`字符和换行符，其中任何一个都会破坏 JavaScript 字符串文字。

根据经验，如果您想在更宽的屏幕上显示额外的内容，您应该：

*   始终在页面中包含内容
*   比屏幕大小更关心窗口大小
*   使用 CSS[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)根据大小重新设置样式
*   在较窄的窗口上一个接一个地显示内容，而不是完全隐藏一些

如果您真的想完全避免在较窄的屏幕上加载内容，请使用 JavaScript 测试屏幕/窗口大小，然后使用[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)加载其他内容并使用 DOM 将其添加到页面中。

# android - Android Facebook SDK 3.0 读取通知

> ID：13780686
> 
> 赞同：4
> 
> 时间：2012-12-08T18:48:04.823
> 
> 标签：android, facebook-graph-api

我遇到了 Facebook 图形 API 没有返回任何请求以获取用户通知的问题。我是通过批处理请求来完成的，使用相同的语法来获取用户的新闻提要，并且新闻提要请求工作正常。我也启用了“manage_notifications”权限。当我尝试将图形调用的结果解析为通知时，我的代码中总是出现空指针异常。

请注意，当我在 Internet 浏览器中进入图形资源管理器并键入“me/notifications?include_read=true”时，我确实得到了适当的数据。

这是我的请求的代码。

```
static Request notificationsRequest = Request.newGraphPathRequest(fbSession, "me/notifications?include_read=true", new Request.Callback() {

    @Override
    public void onCompleted(Response response) {
        GraphObject object = response.getGraphObject();
        if(object != null){
            notifications = object.getProperty("data").toString();
        }
        else{
            notifications = "Notifications returns null";
        }

    }
}); 
```

有任何想法吗？谢谢。

**编辑：**我更新了代码，发现 GraphObject 对象返回 null，这就是为什么它无法从中解析任何内容。图形请求似乎有问题，但我无法弄清楚它是什么。就像我说的，获取用户新闻提要（“我/家庭”）的完全相同的方法工作得非常好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:58:36.890

不要在 Graph 路径中传递参数，而是将其作为参数添加到请求中：

我/通知？include_read=true

```
static Request notificationsRequest = Request.newGraphPathRequest(fbSession, "me/notifications", new Request.Callback() {

    @Override
    public void onCompleted(Response response) {
        GraphObject object = response.getGraphObject();
        if(object != null){
            notifications = object.getProperty("data").toString();
        }
        else{
            notifications = "Notifications returns null";
        }

    }
});

Bundle params = new Bundle();
params.putString("include_read", "true");

notificationsRequest.setParameters(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T21:14:25.380

我找到了另一种方法。我会发布它以防有人发现它有帮助

```
 private void onSessionStateChange(Session session, SessionState state, Exception exception) {
    if (state.isOpened()) {
        InboxMessage.setVisibility(View.VISIBLE);

        new Request(session,"/me/notifications", null,HttpMethod.GET,new Request.Callback() {

                    public void onCompleted(Response response) {
                        GraphObject object = response.getGraphObject();
                            if (object != null) {
                                InboxMessage.setText(object.getProperty("data").toString());
                            } else {
                                InboxMessage.setText("Notifications returns null");
                            }
                    }
                }
            ).executeAsync();
    } else {
        InboxMessage.setVisibility(View.INVISIBLE);
        Log.i(TAG, "Logged out...");
    }
} 
```

# algorithm - 学生选择科目的公平算法

> ID：13780690
> 
> 赞同：-1
> 
> 时间：2012-12-08T18:48:41.160
> 
> 标签：algorithm, combinatorics, choice

这是一个简单的问题。假设我们有 n 个科目和 m 个学生（m<=n）。我正在寻找相当公平的算法，允许为每个学生选择不同的科目。我想避免“先到先得”的情况。感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:54:03.207

找到最大[二分匹配](http://www.mcs.csueastbay.edu/~simon/handouts/4245/hall.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:56:12.110

如果您的输入是每个学生对所有科目的排名，您可以使用**[稳定婚姻](http://en.wikipedia.org/wiki/Stable_marriage_problem)**算法来解决它

# java - 以编程方式设置 MongoDb 转换器

> ID：13780692
> 
> 赞同：25
> 
> 时间：2012-12-08T18:48:55.273
> 
> 标签：java, mongodb, spring-data-mongodb

我正在尝试使用带有 spring-data-mongodb 的自定义转换器。我想以编程方式创建它，但出现以下错误：

```
org.springframework.core.convert.ConverterNotFoundException: No converter found capable of     converting from type org.joda.time.LocalDate to type java.lang.String
at org.springframework.core.convert.support.GenericConversionService.handleConverterNotFound(GenericConversionService.java:475)
at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:175)
at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:154)
....
.... 
```

以下是失败的代码片段：

```
 Mongo mongo = new Mongo();
    MongoDbFactory mongoDbFactory = new SimpleMongoDbFactory(mongo, "database");

    List<Converter> converters = new ArrayList<>();
    converters.add(new LocalDateWriteConverter());
    converters.add(new LocalDateReadConverter());
    CustomConversions customConversions = new CustomConversions(converters);

    MappingContext mappingContext = new SimpleMongoMappingContext();
    MappingMongoConverter mappingMongoConverter = new MappingMongoConverter(mongoDbFactory, mappingContext);
    mappingMongoConverter.setCustomConversions(customConversions);

    MongoTemplate mongoTemplate = new MongoTemplate(mongoDbFactory, mappingMongoConverter);

    MongoDbEvent mongoEvent = new MongoDbEvent(new LocalDate(2012, 12, 8));
    mongoTemplate.insert(mongoEvent); 
```

这是我的转换器类：

```
class LocalDateReadConverter implements Converter<String, LocalDate> {
    @Override
    public LocalDate convert(String s) {
        // Conversion code omitted.
    }
}

class LocalDateWriteConverter implements Converter<LocalDate, String> {

    @Override
    public String convert(LocalDate localDate) {
        // Conversion code omitted.
    }
} 
```

我试图坚持的课程如下所示：

```
import org.joda.time.LocalDate;

public class MongoDbEvent {

    private String id;
    private LocalDate date;

    public MongoDbEvent(LocalDate date) {
        this.date = date;
    }

    public String getId() {
        return id;
    }

    public LocalDate getDate() {
        return date;
    }

    @Override
    public String toString() {
        return "MongoDbEvent{" +
                "id='" + id + '\'' +
                ", date=" + date +
                '}';
        }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-16T23:50:53.713

对于OP来说，这个答案可能有点晚了，但我今天遇到了同样的问题并找到了解决方案......

要以编程方式设置它，您需要`MongoMappingConverter.afterPropertiesSet()`在使用它之前调用它。我通过阅读`MongoTemplate.getDefaultMongoConverter(MongoDbFactory)`.

这是一个例子：

```
MappingMongoConverter converter = new MappingMongoConverter(mongoDbFactory, context);
converter.setTypeMapper(mapper);
converter.setCustomConversions(new CustomConversions(
        Arrays.asList(
                new TimeZoneReadConverter(),
                new TimeZoneWriteConverter()
        )
));
converter.afterPropertiesSet();
MongoTemplate template = new MongoTemplate(mongoDbFactory, converter); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-07-29T01:30:06.033

只是一个抬头。我在`spring-data-mongodb 1.5.1.RELEASE`使用 Java Configuration 时遇到了这个问题。由于某些课程发生了变化，我正在发布我的解决方案。

在带有注释的配置类中添加以下定义`@Configuration`：

```
@Bean
public Mongo mongo() throws Exception {
    MongoPropertiesResolver resolver = mongoResolver();
    return new MongoClient(resolver.getUrl());
}

@Bean
public MongoDbFactory mongoDbFactory() throws Exception {
    return new SimpleMongoDbFactory(mongo(), "database");
}

@Bean
public MongoTemplate mongoTemplate() throws Exception {
    return new MongoTemplate(mongoDbFactory(), mongoConverter());
}

@Bean
public CustomConversions customConversions() {
    List<Converter<?, ?>> converters = new ArrayList<Converter<?, ?>>();
    converters.add(new TimeZoneReadConverter());
    converters.add(new TimeZoneReadConverter());
    return new CustomConversions(converters);
}

@Bean
public MappingMongoConverter mongoConverter() throws Exception {
    MongoMappingContext mappingContext = new MongoMappingContext();
    DbRefResolver dbRefResolver = new DefaultDbRefResolver(mongoDbFactory());
    MappingMongoConverter mongoConverter = new MappingMongoConverter(dbRefResolver, mappingContext);
    mongoConverter.setCustomConversions(customConversions());
    return mongoConverter;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-17T07:13:51.573

这里详细描述了如何使用自定义转换器自定义 mongo：

[http://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mapping-configuration](http://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mapping-configuration)

我注入了默认配置值，因此我可以从 application.properties 配置设置中受益。

```
 @Configuration
  public class MongoConfiguration extends AbstractMongoConfiguration {
    @Value("${spring.data.mongodb.database:test}")
    String database;

    @Value("${spring.data.mongodb.host:localhost}:${spring.data.mongodb.port:27017}")
    String host;

    @Override
    protected String getDatabaseName() {
      return database;
    }

    @Override
    public Mongo mongo() throws Exception {
      return new MongoClient(host);
    }

    @Bean
    @Override
    public CustomConversions customConversions() {
      List<Converter<?, ?>> converterList = new ArrayList<Converter<?, ?>>();
      converterList.add(new MongoColorWriter());
      converterList.add(new MongoColorReader());
      return new CustomConversions(converterList);
    }
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-23T10:48:08.037

随着 java.time 包在 java 8 中的引入，我在新包中使用新的 LocalDate 和 LocalDateTime 类时遇到了类似的问题。这就是我解决它的方法：

我为所有 4 个转换选项编写了一个转换器：

*   DateToLocalDateTime 转换器
*   日期到本地日期转换器
*   LocalDateTimeToDateConverter
*   LocalDateToDateConverter

这是一个例子

```
public class DateToLocalDateTimeConverter implements Converter<Date, LocalDateTime> {

    @Override 
    public LocalDateTime convert(Date source) { 
        return source == null ? null : LocalDateTime.ofInstant(source.toInstant(), ZoneId.systemDefault()); 
    }
} 
```

然后通过将其包含在 mongodb 连接的 xml 配置中，我能够使用 mongodb 在 java 8 日期中工作（记得添加所有转换器）：

```
<mongo:mapping-converter>
    <mongo:custom-converters>
        <mongo:converter>
            <bean class="package.DateToLocalDateTimeConverter" />
        </mongo:converter>
    </mongo:custom-converters>
</mongo:mapping-converter> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-28T12:15:24.753

对我来说，它是将我的转换器注册为读者而不是作家。要解决此问题，您需要将 @WritingConverter 注释添加到转换器类

```
@Component
@WritingConverter
public class NoteWriterConverter implements Converter<Note, DBObject> {

@Override
public DBObject convert(Note source) {
    DBObject obj = new BasicDBObject();

    obj.put("title", source.getTitle());
    obj.put("reviewDate", source.getReviewDate());

    obj.removeField("_class");
    return obj;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-13T08:27:25.677

既然`org.springframework.data:spring-data-commons:1.13.3.RELEASE`，这里是如何以编程方式创建一个`MongoTemplate`自定义转换器

```
public MongoTemplate mongoTemplate(String mongoUri) throws Exception {
    MongoDbFactory factory = new SimpleMongoDbFactory(new MongoClientURI(mongoUri));
    CustomConversions conversions = new CustomConversions(
            Arrays.asList(new FooWriteConverter(), new FooReadConverter()));
    MongoMappingContext mappingContext = new MongoMappingContext();
    DbRefResolver dbRefResolver = new DefaultDbRefResolver(factory);
    MappingMongoConverter mongoConverter = new MappingMongoConverter(dbRefResolver, mappingContext);
    mongoConverter.setCustomConversions(conversions);
    mongoConverter.afterPropertiesSet();
    return new MongoTemplate(factory, mongoConverter);
} 
```

转换器（省略实现）

```
class FooWriteConverter implements Converter<Foo, DBObject> { ... }
class FooReadConverter implements Converter<DBObject, Foo> { ... } 
```

# android - Android：尝试在 HttpClient 向服务器发送消息时显示正在发送的文本

> ID：13780693
> 
> 赞同：0
> 
> 时间：2012-12-08T18:48:58.910
> 
> 标签：android

我有一个简单的程序，它会提出问题，然后调用一个 php 文件来说明答案是肯定的还是否定的。

现在它可以工作，但是在发送信息时会有轻微的停顿。我想要一些消息或指示器来显示计算机正忙。

现在，当我更改 textvue 的文本时，在发送数据之前，textView 不会更改，我也尝试将其称为更新方法

代码

```
case R.id.butYes:
                mSend .setText("Sending your vote to server");
                mSend.invalidate();
                 TalkToServer( mYes[mPes-1] );
                UpdateScreen(); 
                mSend .setText("");
                break;

       String TalkToServer( String addr)
       {   
           HttpClient httpclient = new DefaultHttpClient();
           HttpPost  httppost = new HttpPost(addr);

            HttpResponse response;
            String responseBody=new String("");
            try {
                response = httpclient.execute(httppost);

responseBody = EntityUtils.toString(response.getEntity());
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

           return responseBody;
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:56:18.187

在向服务器发送数据时使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)避免 UI 挂起只需将代码更改为：

```
case R.id.butYes:
  new SendTextOperation().execute("");  
  break;

private class SendTextOperation extends AsyncTask<String, Void, String> {

      @Override
      protected void onPreExecute() {

        //Update UI here
        mSend.setText("Sending your vote to server");
        mSend.invalidate();
      }

      @Override
      protected String doInBackground(String... params) {
            // Talk to server here to avoid Ui hanging 
            TalkToServer( mYes[mPes-1] );
            return null;
      }      

      @Override
      protected void onPostExecute(String result) {  
            // Update screen here after talk to server end
                UpdateScreen(); 
                mSend .setText("");
      }

} 
```

# jquery - Internet Explorer 8 上的 Jquery / css 错误

> ID：13780694
> 
> 赞同：-1
> 
> 时间：2012-12-08T18:49:12.397
> 
> 标签：jquery, css, internet-explorer-8, cross-browser

我有一个运行良好的 jquery / CSS 代码，但不适用于 Internet Explorer 8。

这是一个滑块。但是，当您使用 Internet Explorer 8 时，它就不起作用了。在所有其他浏览器中，它都运行良好。任何人都可以帮助提供代码吗？

**[JsFiddle 演示](http://jsfiddle.net/tobbecokta/Uum8j)**

```
 /* slider */
.range {
float:left;
margin-top: 12px;
width: 125px;
}

.ui-slider-wrapper {
position: relative;
padding: 16px 0 0 0;
height: 212px;
width: 24px;
text-align: left;
background: #1f8fb5;
/* CSS3 */
-moz-border-radius: 12px;
-webkit-border-radius: 12px;
border-radius: 12px;
-moz-text-shadow: 0 1px 0 #267f9d;
-webkit-text-shadow: 0 1px 0 #267f9d;
text-shadow: 0 1px 0 #267f9d;
}

.ui-slider {
position: relative;
float: left;
padding-right: 104px;
height: 196px;
width: 24px;
}

.ui-slider .ui-slider-tooltip {
display: none;
}

.ui-slider .screenReaderContext {
position: absolute;
width: 0;
height: 0;
overflow: hidden;
left: -999999999px;
}

.ui-slider ol {
position: relative;
left: 55px;
top: -4px;
width: 88px;
}

.ui-slider li {
width: 88px;
margin-bottom: 9px;
}

.ui-slider-handle {
position: absolute;
left: 0;
display: block;
margin-bottom: -16px; /*offset*/
height: 32px;
width: 24px;
text-indent: -9999em;
background: red;
z-index: 1;
}

.ui-slider-range {
position: absolute;
left: 0;
width: 24px;
background: #ccc;
} 
```

​</p>

兄弟，托拜厄斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:50:52.190

在我的脑海中，我记得阅读了保持`padding`和`margin`0px 以实现跨浏览器兼容性。

# actionscript-3 - 高级坐标旋转

> ID：13780696
> 
> 赞同：0
> 
> 时间：2012-12-08T18:49:21.593
> 
> 标签：actionscript-3, actionscript, rotation, trigonometry

```
package  {
    import flash.display.Sprite;
    import flash.geom.Point;
    import flash.events.Event;

    public class Game2 extends Sprite {

        var balls:Array;
        var radius:Number = 50;
        var centerX:Number = stage.stageWidth / 2;
        var centerY:Number = stage.stageHeight / 2;
        var i:int = 0;
        var angle:Number = 0.1;
        var sin:Number = Math.sin(angle);
        var cos:Number = Math.cos(angle);
        public function Game2() {
            init();
        }

        function init():void
        {
            balls = new Array();
            for(i = 0; i < 8; i++)
            {
                var ball:Ball = new Ball(10, 0x00FF00);
                var xposition = centerX + Math.cos(i / 8 * Math.PI * 2) * radius;
                var yposition = centerY + Math.sin(i / 8 * Math.PI * 2) * radius;
                ball.x = xposition;
                ball.y = yposition;
                addChild(ball);
                balls.push(ball);
            }

            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        function onEnterFrame(e:Event):void
        {
            for(i = 0; i < balls.length; i++)
            {
                var ball:Ball = balls[i];
                var x1:Number = ball.x - stage.stageWidth / 2;
                var y1:Number = ball.y - stage.stageHeight / 2;
                var x2:Number = cos * x1 - sin * y1;
                var y2:Number = cos * y1 + sin * x1;
                ball.x = stage.stageWidth / 2 + x2;
                ball.y = stage.stageHeight / 2 + y2;
            }

        }

    }

} 
```

有人可以解释这个公式的工作吗？：

```
var x2:Number = cos * x1 - sin * y1;
var y2:Number = cos * y1 + sin * x1; 
```

我只是想不通，如果我们像这样编辑它：

```
var x2:Number = x1 - y1;
var y2:Number = x1 + y1; 
```

所有的球都移动得如此之快并且超出了屏幕边界，以及为什么我们要这样改变它：

```
var x2:Number = cos * x1 - sin * y1;
var y2:Number = cos * y1 + sin * x1;

or

var x2:Number = cos * x1 - sin * y1;
var y2:Number = cos * y1 + sin * x1; 
```

据我了解，它的工作原理是相同的，如果我们在左侧或右侧，速度 x == 0 并且 y 处于其位置的最大速度，y 每次都会减慢他靠近顶部或底部，如果我们在顶部或底部，速度 y == 0 并且 x 处于他位置的最大速度，然后每次他靠近右侧或左侧时也会减慢，我追踪它，但我不明白为什么我们必须将它乘以 cos 和 sin，我已经追踪了这个时刻但仍然无法弄清楚，任何人都可以解释这个时刻吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:00:39.923

这两个公式表示一个[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)乘以一个向量。

# scala - 为什么值类仅限于 AnyVal？

> ID：13780697
> 
> 赞同：4
> 
> 时间：2012-12-08T18:49:23.933
> 
> 标签：scala, haskell, wrapper, primitive-types, newtype

据我了解，Scala 中的值类只是将原始类型包装`Int`成`Boolean`另一种类型，而不会引入额外的内存使用。所以它们基本上被用作普通类的轻量级替代品。

这让我想起了 Haskell 的`newtype`表示法，它也用于将现有类型包装在新类型中，从而在不占用额外空间的情况下为某些数据引入新接口（要查看两种语言的相似性，请考虑例如对一个“构造函数”的限制）[Haskell](http://learnyouahaskell.com/functors-applicative-functors-and-monoids#the-newtype-keyword)和[Scala](http://docs.scala-lang.org/sips/pending/value-classes.html)中的字段）。

我想知道为什么引入由编译器内联的新类型的概念没有推广到 Haskell 为任何类型提供零开销类型包装器的方法。为什么 Scala 的人`AnyVal`在这里坚持使用原始类型（又名）？

或者 Scala 中是否已经有一种方法可以为`Scala.AnyRef`类型定义此类包装器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T18:58:02.733

它们不限于`AnyVal`.

```
implicit class RichOptionPair[A,B](val o: Option[(A,B)]) extends AnyVal {
  def ofold[C](f: (A,B) => C) = o map { case (a,b) => f(a,b) }
}

scala> Some("fish",5).ofold(_ * _)
res0: Option[String] = Some(fishfishfishfishfish) 
```

值类有各种限制，使它们像轻量级包装器一样，但只能包装原语不是其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T09:18:40.087

推理记录为[Scala Improvement Process (SIP)-15](http://docs.scala-lang.org/sips/pending/value-classes.html)。正如 Alexey Romanov 在他的评论中指出的那样，这个想法是使用现有的关键字来寻找一个表达式，以允许编译器确定这种情况。

为了让编译器执行内联，需要应用几个约束，例如包装类是“短暂的”（没有字段或对象成员、构造函数主体等）。您关于自动生成内联类的建议至少有两个问题：

1.  编译器需要遍历每个类的整个约束列表。并且由于作为值类的状态是隐式的，它可能会在稍后通过向类添加成员来翻转，从而破坏二进制兼容性
2.  编译器添加了更多约束，例如值类变为`final`禁止继承。因此，您必须将这些约束添加到任何想要以这种方式进行内联的类，然后除了额外的冗长之外，您什么也得不到。

可以考虑其他假设结构，例如`val class Meter(underlying: Double) { ... }`，但 IMO 的优点`extends AnyVal`是不需要句法扩展。此外，所有原始类型都是扩展的`AnyVal`，所以有一个很好的类比（无引用、无继承、有效表示等）

# git - 如何仅对暂存内容运行 git pre-commit 检查？

> ID：13780700
> 
> 赞同：17
> 
> 时间：2012-12-08T18:49:25.937
> 
> 标签：git, pre-commit-hook, pre-commit

假设`git status`给出这个：

```
# On branch X
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   modified:   file1.cc
#   modified:   file1.h
#   modified:   file1_test.cc
#   modified:   SConscript
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   file1.cc
#   modified:   tinyxml2 (untracked content)
# 
```

在这种情况下，**只有对 file1.cc 所做的一些更改已**为下一次提交暂存/索引。

我运行一个预提交脚本来运行一个样式检查器：

```
#!/bin/bash                                                                                                                                                                     

git stash -q --keep-index

# Do the checks                                                                                                                                                                 
RESULT=0
while read status file
do
    if python ~/python/cpplint.py "$file"; then
        let RESULT=1
    fi
done < <(git diff --cached --name-status --diff-filter=ACM | grep -P  '\.((cc)|(h)|(cpp)|(c))$' )

git stash pop -q

[ $RESULT -ne 0 ] && exit 1
exit 0 
```

正如[这里](http://codeinthehole.com/writing/tips-for-using-a-git-pre-commit-hook/)所建议的，我在运行样式检查之前存储未暂存的文件，然后将它们弹出。但是，在仅暂存文件中的某些更改的情况下，当我在预提交挂钩的末尾弹出存储时，这会导致合并冲突。

有什么更好的方法来做到这一点？我想对即将提交的文件的暂存版本运行样式检查。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-04T16:56:51.570

我会避免`git stash`在钩子中自动使用。我发现可以`git show ':filename'`用来获取隐藏文件的内容。
相反，我使用了下一种方法：

```
git diff --cached --name-only --diff-filter=ACMR | while read filename; do
    git show ":$filename" | GIT_VERIFY_FILENAME="$filename" verify_copyright \
        || exit $?
done \
    || exit $? 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T08:19:47.843

替换`git stash -q --keep-index`为：

```
git diff --full-index --binary > /tmp/stash.$$
git stash -q --keep-index 
```

...并`git stash pop -q`与：

```
git apply --whitespace=nowarn < /tmp/stash.$$` && git stash drop -q
rm /tmp/stash.$$ 
```

这会将差异保存到一个临时文件并`git apply`在最后重新应用它。更改仍然冗余保存到存储区（稍后将被删除），因此如果重新应用出现问题，您可以使用检查它们`git stash show -p`而无需查找临时文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-21T01:35:21.107

## 如何在不存储的情况下控制提交

我们用它`.git/hooks/pre-commit`来检查原子语法包

### 关键位

1.  `git checkout-index -a --prefix={{temp_dir}}`

它可能/可能不会比存储慢得多/占用更多空间，但是与索引混淆的自动化似乎天生就很脆弱。也许需要一个 git contrib 脚本来制作软/硬链接树、最小空间只读、临时索引签出、促进更好/更快`.git/hooks/pre-commit`（或者说，`.git/hooks/pre-commit-index`）脚本，以便完整的第二份工作副本不需要 dir，只是 working-dir->index 发生了变化。

```
#!/usr/bin/env ruby
require 'tmpdir'
autoload :FileUtils,  'fileutils'
autoload :Open3,      'open3'
autoload :Shellwords, 'shellwords'

# ---- setup

INTERACTIVE         = $stdout.tty? || $stderr.tty?
DOT                 = -'.'
BLOCK_SIZE          = 4096
TEMP_INDEX_DIR      = Dir.mktmpdir
TEMP_INDEX_DIR_REAL = File.realpath(TEMP_INDEX_DIR)

def cleanup
  FileUtils.remove_entry(TEMP_INDEX_DIR) if File.exist? TEMP_INDEX_DIR
end

at_exit { cleanup }

%w[INT TERM PIPE HUP QUIT].each do |sig|
  Signal.trap(sig) { cleanup }
end

# ---- functions

def fix_up_dir_output(data)
  data.gsub! TEMP_INDEX_DIR_REAL, DOT
  data.gsub! TEMP_INDEX_DIR, DOT
  data
end

def sh(*args)
  Open3.popen3(*args) do |_, stdout, stderr, w_thr|
    files = [stdout, stderr]
    until files.empty? do
      if ready = IO.select(files)
        ready[0].each do |f|
          begin
            data = f.read_nonblock BLOCK_SIZE
            data = fix_up_dir_output data
            if f.fileno == stderr.fileno
              $stderr.write data
            else
              $stdout.write data
            end
          rescue EOFError
            files.delete f
          end
        end
      end
    end
    if !(done = w_thr.value).success?
      exit(done.exitstatus)
    end
  end
end

def flags(args)
  skip = false
  r = []
  args.each do |a|
    if a[0] == '-' && !skip
      a.slice! 0
      if a[0] == '-'
        skip ||= a[1].nil?
        a.slice! 0
        r << a unless a.empty?
      else # -[^-]+
        r += a.split ''
      end
    end
  end
  r
end

def less_lint
  args = %w[lessc --lint]
  args << '--no-color' unless INTERACTIVE
  args << 'index.less'
  sh(*args)
end

def ensure_git_commit_signed
  pcmd = `ps -wwp#{Process.ppid} -ocommand=`.chop
  args = flags(Shellwords.split(pcmd)[1..-1])
  return unless (args & %w[gpg-sign S]).empty?
  $stderr.puts 'All git commits must be GPG-signed'
  $stderr.puts "    command: #{pcmd}"
  exit 1
end

# ---- main

# 1\. make sure all commits are signed
ensure_git_commit_signed

# 2\. check files that are in the index
sh 'git', 'checkout-index', '-a', "--prefix=#{TEMP_INDEX_DIR}/"
Dir.chdir TEMP_INDEX_DIR do
  # 3\. make sure all commits contain only legal .less files
  less_lint
end 
```

# jquery - jquery 代码在加载的外部 html 文件中不起作用

> ID：13780701
> 
> 赞同：0
> 
> 时间：2012-12-08T18:49:29.160
> 
> 标签：jquery

我正在使用此代码将外部 html 文件加载到主`index.php`文件中。

```
$(document).ready(function(){
    $(".fld").click(function(){
        $("#collection").load($(this).attr("name"));
    });
}); 
```

代码从此 html 文件中获取数据，
`<a class="fld" name="external.html" href="#">Folder 1</a>`

这是 external.html 文件
`<a class="song" href="#" name="http://impk.co.in/sound/sound1.mp3">Song1</a>`

现在将该`external.html`文件加载到`index.php`jquery 后，函数`external.html`仅适用于该文件。其余的 jquery 函数仍在工作。

[这是网站的演示链接](http://impk.co.in/error/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:59:26.490

这听起来像是一个事件委托问题。当您第一次使用`.click`等绑定到元素时，事件会立即绑定到现有元素。如果 DOM 中不存在元素，则事件不会绑定到它。如果稍后添加该元素（例如通过 Ajax），它不会自动绑定。

您可以通过绑定到存在的元素（甚至最多`document`）并指定应该匹配的选择器来进行委托，例如：

```
$("#collection").on('click', '.song', function () { ... 
```

注意第二个论点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:59:57.130

jQuery 的 load() 函数不复制事件绑定有几个原因。它只处理将目标元素附加到当前 DOM。您必须重新绑定它们，或使用 on()。

# javascript - 坚持 JavaScript 日期标准格式？

> ID：13780706
> 
> 赞同：1
> 
> 时间：2012-12-08T18:49:55.683
> 
> 标签：javascript, date

*在阅读[了这个问题](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)之后- 它还提供了文档链接，我仍然对文档有疑问。*

MDN：`Date.parse`

> 表示 RFC2822 或 ISO 8601 日期的字符串。

好的，[RFC2282](https://www.rfc-editor.org/rfc/rfc2822#page-14)：

```
date-time       =       [ day-of-week "," ] date FWS time [CFWS]
day-of-week     =       ([FWS] day-name) / obs-day-of-week
day-name        =       "Mon" / "Tue" / "Wed" / "Thu" /
                       "Fri" / "Sat" / "Sun"

date            =       day month year
year            =       4*DIGIT / obs-year
month           =       (FWS month-name FWS) / obs-month
month-name      =       "Jan" / "Feb" / "Mar" / "Apr" /
                        "May" / "Jun" / "Jul" / "Aug" /
                        "Sep" / "Oct" / "Nov" / "Dec"

day             =       ([FWS] 1*2DIGIT) / obs-day 
```

现在 - [ISO8601](http://www.w3.org/TR/NOTE-datetime)

```
 Year:
      YYYY (eg 1997)
   Year and month:
      YYYY-MM (eg 1997-07)
   Complete date:
      YYYY-MM-DD (eg 1997-07-16) 
```

好的。

问题 ：

*   MDN 提供了一个在 2282 和 ISO 中`"Dec 25, 1995"`都**找不到**的模式示例（正在工作） 。这个样本是如何工作的？顺序必须是`day month year` （根据 2282）。

*   标准中的分隔符是`[space]`（在 2282 中）和`[-]`ISO。

    那么为什么这个示例有效（跨浏览器）？`Date.parse("2011/11/23")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:01:26.260

对于`Date.parse`，请查看[EcmaScript 规范，第 15.9.4.2 节](http://es5.github.com/#x15.9.4.2)：

> 根据字符串的内容，字符串可能被解释为本地时间、UTC 时间或其他时区的时间。该函数*首先尝试根据*[日期时间字符串格式 (15.9.1.15)](http://es5.github.com/#x15.9.1.15)中调用的规则解析字符串的格式。如果字符串不符合该格式，则函数可能会*退回到任何特定于实现的启发式或特定于实现的日期格式*。无法识别的字符串或包含格式字符串非法元素值的日期将导致`Date.parse`返回`NaN`。

因此，MDN 的 Mozilla 特定文档与此非常接近。官方的“EcmaScript 日期时间字符串格式”是 ISO 8601 的子集，否则 Gecko 浏览器会尝试将其解释为 RFC 2822 甚至其他内容（这可能包括`"Dec 25, 1995"`）。我强烈怀疑这`"2011/11/23"`确实适用于跨浏览器，尽管对于最近的版本可能是正确的。

# jquery - Jquery：将任何 CSS 颜色转换为 rgb

> ID：13780709
> 
> 赞同：2
> 
> 时间：2012-12-08T18:50:16.290
> 
> 标签：jquery, rgb

有没有一种快速的方法可以将任何 css 颜色（例如`#ffe`,`whitesmoke`或`hsl(20,50%,80%)`, ）转换为 rgb 颜色之类的`rgb(140,75,20)`？

我可以`.css()`在变量上使用该方法以某种方式将颜色转换为 rgb 吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-08T18:53:25.703

这可能会回答您的问题 - [RGB 到 Hex 和 Hex 到 RGB](https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb)

```
function hexToRgb(hex) {
   var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
   return result ? {
       r: parseInt(result[1], 16),
       g: parseInt(result[2], 16),
       b: parseInt(result[3], 16)
   } : null;
}

alert( hexToRgb("#0033ff").g ); // "51"; 
```

# java - Java变量socpe：访问变量值问题

> ID：13780712
> 
> 赞同：-1
> 
> 时间：2012-12-08T18:50:24.023
> 
> 标签：java, variables, scope

你好我是初学者，这个问题可能很愚蠢，请指导我，我正在做小代码，我在其中读取文件，文本存储在这样的字符串中。

```
ReadFile()
{
   String s;
   String end="$";

   BufferedReader br= new  BufferedReader(newFileReader("c:\\users\\sikander\\desktop\\hi.txt"));
   while((s=br.readLine())!=null)
    {
        s=s+end;

    } 

} 
```

现在我想要的是 `s` 用另一种方法访问的值但是当我访问它时没有得到更新的值，请帮助我解决这个简单的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:53:35.210

任何其他方法都不能访问局部变量，而是可以

```
return s; 
```

形成一个方法。将您的方法更改为：

```
public String ReadFile() {} 
```

在另一个字符串变量中，您可以这样做。

```
String j = ReadFile(); 
```

# java - 如何显示嵌套的复选框？

> ID：13780713
> 
> 赞同：0
> 
> 时间：2012-12-08T18:50:37.910
> 
> 标签：java, jsf, gwt, tree, components

我在页面上显示很多布尔值作为带有标签的复选框。对于其中一些，“复选框对象”本身可以包含其他几个子级别的复选框。

因此，我想将它们显示为某种树：选择具有子框的复选框时，只能显示它们。当取消选择最上面的复选框时，所有嵌套的框/条目都应该消失。

我如何使用 JSF 或 GWT 实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:42:25.100

This seems a typical usage of the GWT CellTree, take a look to the [ShowCase](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTree) example.

# jquery - MySQL：简单的 LIKE 语句与预期的模式不匹配

> ID：13780714
> 
> 赞同：0
> 
> 时间：2012-12-08T18:50:49.757
> 
> 标签：jquery, mysql, ajax

我正在使用 AJAX 执行 mysql LIKE 查询并使用 html 显示结果集数据。

从查询返回的结果似乎总是使用存储在`searchword`变量中的任何内容减去最后一个字符，我不知道为什么。

**MySQL：** `("SELECT * FROM products WHERE prod_name LIKE '".$searchword."%'")`

var_dump 当搜索词 var 包含 'bab' =`string(49) "SELECT * FROM products WHERE prod_name LIKE 'ba%'"`

**jQuery/AJAX：**

```
function search(searchword) {      
    $('.smart-suggestions').load('invoice-get-data.php?searchword=' + searchword); 
} 
```

**标记**

```
<input onKeyPress="search(this.value)" type="text" class="prod-name-input"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:11:25.647

问题是 onkeypress 在文本字段的值更新之前触发。这就是您看到一个字符延迟的原因。要解决此问题，您可以改用**onkeyup**。

```
<input onKeyUp="search(this.value)" type="text" class="prod-name-input"/> 
```

# sql - SQL 查询的过程需要 (Oracle)

> ID：13780715
> 
> 赞同：1
> 
> 时间：2012-12-08T18:50:56.970
> 
> 标签：sql, database, oracle, stored-procedures

老实说，我有点坚持这一点，我找不到一个好的解决方案。根本没有解决办法。

我有这张表 actor(id,Actor_Name) ，其中名称的格式为 Actor-01 .. 等：

```
id        Actor_Name    
--------------------
01        Actor-01 
02        Actor-02 
03        Actor-03 
```

我需要的是，使用一个过程将每个演员的名字加一个。像这样：

```
id        Actor_Name    
--------------------
01        Actor-02 
02        Actor-02 
03        Actor-04 
```

可能我需要某种迭代，并且我已经尝试过使用游标，但它主要是一场灾难。如果任何人都可以提供一些简洁的解决方案，或者我会非常高兴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:20:48.893

以下是一些可能指向可行解决方案的概念。

您可以使用 INSTR 查找减号的位置。

```
SELECT INSTR('ACTOR-74','-') FROM DUAL 
```

您可以使用 SUBSTR 拉出 DIGITS

```
SELECT SUBSTR('ACTOR-74', 6) FROM DUAL 
```

您可以使用 TO_NUMBER 将数字转换为数字

```
SELECT TO_NUMBER('1234') FROM DUAL 
```

您可以使用串联来构建替换值

```
SELECT SUBSTR('ACTOR-74',1,6) || 
       TO_CHAR(74 + 1, '09') FROM DUAL 
```

这会产生一个可以在更新中使用的值。

```
UPDATE TABLE
    SET ACTOR_NAME = the-replacement-value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:39:45.523

另一种方法：

```
update (select id
             , replace( Actor_name
                      , substr(actor_name, -2)
                      , To_char(to_number(substr(actor_name, -2)) + 1, 'fm00')
                      ) as New_Actor_name
             , Actor_name
         from actor
        ) a
set a.actor_name = a.new_actor_name; 
```

[**SQLFiddle 演示**](http://sqlfiddle.com/#!4/4d225/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T19:32:23.283

无需手续。

```
merge into actor
using (
  select id, 
         substr(actor_name, 1, instr(actor_name, '-')) as name,
         to_number(substr(actor_name, instr(actor_name, '-') + 1)) as nr
  from actor
) t on (t.id = actor.id)
when matched then update
   set actor_name = t.name || to_char(nr + 1, 'FM09'); 
```

SQLFiddle 示例：[http ://sqlfiddle.com/#!4/93c02/1](http://sqlfiddle.com/#!4/93c02/1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T19:07:11.917

我认为您不需要光标。我不是 100% 确定所需的格式，但 `select CAST(REGEXP_SUBSTR('Actor-01','[[:digit:]]+')as int) from dual;`返回 1 之类的东西可以递增和存储（例如`UPDATE table1 set col1 = 'Actor-0' || CAST(REGEXP_SUBSTR(col1,'[[:digit:]]+')as int)+1 WHERE ....`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T19:13:49.850

尝试类似（未测试）

```
update actor set actor_name = 'Actor-' || lpad( to_char( id + 1), 2, '0' );
commit; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T19:59:16.760

为这样一个简单的任务使用存储过程似乎有点过头了。

```
update ACTOR
set substr(ACTOR_NAME,1,length(ACTOR_NAME)-2)||to_number(substr(ACTOR_NAME,-2,2))+1
where substr(ACTOR_NAME,-2,2) between '00' and '99' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T20:21:47.297

您可能已经使用游标关闭了，但可能不知道游标默认为只读。要切换此行为，请使用`for update`光标定义中的选项：

[http://www.techonthenet.com/oracle/cursors/for_update.php](http://www.techonthenet.com/oracle/cursors/for_update.php) （该条款的附加说明`for update`）

然后在遍历游标时，您还需要使用一个子句，该子句允许您更新游标最后获取的记录：`where current of`

[http://www.techonthenet.com/oracle/cursors/current_of.php](http://www.techonthenet.com/oracle/cursors/current_of.php) （“当前的”示例）

这应该适用于匿名 pl/sql 块或存储过程定义。

# php - 正则表达式 - 重置子匹配编号

> ID：13780721
> 
> 赞同：1
> 
> 时间：2012-12-08T18:51:21.447
> 
> 标签：php, regex, notepad++

假设我们有以下表达式

```
(?x) ((a  b) (c) | (d) (e f) | (g) h (i) ) 
```

我们将获得以下反向引用：

```
\1 abc, def, ghi
\2 ab
\3 c
\4 d
\5 ef
\6 g
\7 i 
```

Notepad++ 正则表达式引擎支持一个奇妙的构造：

```
(?|expression using the alternation | operator) 
```

该表达式使子表达式 counter 不会被交替的其他分支中的内容更改。它工作得很好。所以

```
(?x) (?| (a  b) (c) | (d) (e f) | (g) h (i) ) 
```

创建以下组

```
\1 ab, d, g
\2 c, ef, i 
```

但是当我尝试在 PHP 中使用这个结构时，我得到了一个错误。

> 警告：preg_match_all()：编译失败：在 (? 或 (?- 在偏移 11 处 ...

那么，在 PHP 中是否可以为交替的不同分支使用相同的编号（如前面提到的构造）？

* * *

### 解决方案

问题是我在“？”之间放了一个换行符。和 '！'。我使用了 'x' 修饰符，并认为可以在表达式中的任何位置使用换行符。但事实证明你不能打破“？|” 部分不管使用的修饰符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:03:08.640

[PCRE 中子模式](http://php.net/manual/en/regexp.reference.subpatterns.php)的文档说它是受支持的。该页面底部有一个示例。

***编辑：***刚刚在 PHP 5.3.15 中尝试过，它可以工作。

# jquery - jquery onclick 事件不起作用

> ID：13780723
> 
> 赞同：0
> 
> 时间：2012-12-08T18:51:34.880
> 
> 标签：jquery, events, onclick

该脚本不起作用..错误在哪里？使用 .onload 就可以了

```
$(document).ready(function() {

var img = new Image();
img.onClick = function() {
$("div").animate({width:this.width, height:this.height});
}
img.src = 'http://www.google.com/intl/en_ALL/images/logo.gif';
}); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T18:53:54.533

它`.onclick`不是`.onClick`，javascript 是区分大小写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:55:20.620

既然您无论如何都在使用 jQuery，为什么不坚持使用它：

```
$(function(){  // this is a shortcut for $(document).ready
   var img = $('<img src="http://www.google.com/intl/en_ALL/images/logo.gif>');
   img.on('click', function(){
     $('div').animate(...)
   })
   img.appendTo('body')
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:04:40.897

尝试这个：

```
var img = new Image();
img.src = 'http://www.google.com/intl/en_ALL/images/logo.gif';

$(img).live("click", function() {
    $("div").animate({
        width: $(this).width(),
        height: $(this).height()
    }, 1000);
}).appendTo('body');​ 
```

# xcode - NSMutableDictionary 条目未由 init 完成，带有键和对象数组

> ID：13780726
> 
> 赞同：0
> 
> 时间：2012-12-08T18:51:47.410
> 
> 标签：xcode, nsmutablearray, key, nsdictionary

将两个 NSMutableArrays 添加到 NSMutableDictonary 中，我有点困惑，
一个用于键，一个用于对象。
只要键不相同，这就是有效的。
如果有偶数，我只会得到我的字典中的最后一个对象。
如果我将键更改为对象并将对象更改为键，则一切正常。
任何人都可以帮助我吗？

这是我的输出：

```
2012-12-08 19:30:40.906 Test[12015:c07] myKeys: (
"Bauchumfang & Gewicht",
"Bauchumfang & Gewicht",
"Stress & Entspannung",
"Stress & Entspannung",
"Mein Rauchverhalten",
"Mein Rauchverhalten",
"Blutdruck & Puls",
"Blutdruck & Puls",
"Blutzucker & Diabetes",
"Blutzucker & Diabetes",
"Meine Stimmung",
"Meine Stimmung",
"R\U00fccken & Bewegung",
"R\U00fccken & Bewegung",
"R\U00fccken & Bewegung",
Schlafrhythmus,
Schlafrhythmus,
"Schrittz\U00e4hler"
)
2012-12-08 19:30:40.907 Test[12015:c07] myObjects: (
"Mein Bauchumfang",
"Mein Gewicht",
"Mein Entspannungsniveau",
"H\U00e4ufigkeit der Entspannungsmomente",
Rauchverhalten,
"Verlangen nach einer Zigarette",
"Systolischer Wert",
"Diastolischer Wert",
"Meine bewusste Ern\U00e4hrung mit Diabetes",
"Meine Blutzucker-Werte",
"Mein Befinden",
"Meine Aktivit\U00e4ten",
"Umsetzung meiner R\U00fccken\U00fcbungen",
"Das Befinden meines R\U00fcckens",
"Meine sportlichen Aktivit\U00e4ten",
"Meine Schlafqualit\U00e4t",
"Mein Energieniveau",
"Meine Schritte"
)
2012-12-08 19:30:40.907 Test[12015:c07] myDictionary: {
"Bauchumfang & Gewicht" = "Mein Gewicht";
"Blutdruck & Puls" = "Diastolischer Wert";
"Blutzucker & Diabetes" = "Meine Blutzucker-Werte";
"Mein Rauchverhalten" = "Verlangen nach einer Zigarette";
"Meine Stimmung" = "Meine Aktivit\U00e4ten";
"R\U00fccken & Bewegung" = "Meine sportlichen Aktivit\U00e4ten";
Schlafrhythmus = "Mein Energieniveau";
"Schrittz\U00e4hler" = "Meine Schritte";
"Stress & Entspannung" = "H\U00e4ufigkeit der Entspannungsmomente";
} 
```

和我的实现：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader
didLoadObjects:(NSArray *)objects {

  menuItems = [[NSMutableArray alloc]init];
  for (Trackers *trackers in objects) {

    if ([trackers.assigned isEqualToString:@"true"]) {
        [menuItems addObject:[trackers name]];
        [groups addObject:[trackers category]];
    }

  }
  NSLog(@"myKeys: %@", groups);
  NSLog(@"myObjects: %@", menuItems);
  NSMutableDictionary *menuGroups = [[NSMutableDictionary alloc]
  initWithObjects:menuItems forKeys:groups];
  NSLog(@"myDictionary: %@", menuGroups);
  [menuList addObject:menuGroups];
  contentLoaded = YES;
  [settingsTable reloadData];
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T18:55:59.437

好吧，每个定义的字典在查看代码时不允许重复键，您希望将 N 个项目存储在同一个键下。

为此，您需要为每个键存储一组项目.. UNTESTED 示例（内联编写）

```
- (void)objectLoader:(RKObjectLoader *)objectLoader
didLoadObjects:(NSArray *)objects {
  NSMutableDictionary *menuGroups = [[NSMutableDictionary alloc] init];
  for (Trackers *trackers in objects) {

    if ([trackers.assigned isEqualToString:@"true"]) {
        NSMutableArray *array = [menuGroups objectForKey:[trackers category]];
        if(!array) {
            array = [NSMutableArray array];
            [menuGroups setObject:array forKey:[trackers category]];
        }
        [array addObject:[trackers name]];
    }

  }

  contentLoaded = YES;
  [settingsTable reloadData];
} 
```

# java - 如何为ARM交叉编译Java程序？

> ID：13780727
> 
> 赞同：0
> 
> 时间：2012-12-08T18:51:48.277
> 
> 标签：java, arm, javac, armv7

我正在尝试从命令行为 ARMv7 目标交叉编译一个简单的 java 示例。

我需要为交叉编译添加哪些 javac 选项？

这是在主机上编译的标准 javac 命令：

```
javac -d bin -sourcepath src src/TextPanel.java 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T19:05:03.840

`javac`将您的代码编译为字节码，然后可以在 JVM 上运行。字节码本身是跨平台的：只有 JVM（解释该字节码）是平台相关的。您需要的是在 ARMv7 目标上运行的 JVM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T19:07:02.637

没有任何。

大多数 Java 编译器生成针对特定 JVM 规范的 Java 字节码。生成的代码将在任何此类 VM 上运行，您无需关心机器架构，只需要“是否有运行在其上的 JVM 实现？”。

当然，有些编译器会生成其他东西（例如 gjc），但同样，`javac`前端应该是相当标准的 javac。比较：当您使用 GCC 工具链交叉编译 C 代码时，命令行中的唯一区别在于选择要调用的编译器二进制文件。编译器的标志和参数保持不变，只是名称发生了变化（例如 from`gcc`到`i686-w64-mingw32-gcc`）。

# python - Django - 如何设置异步长时间后台数据处理任务？

> ID：13780732
> 
> 赞同：4
> 
> 时间：2012-12-08T18:52:20.000
> 
> 标签：python, django, background-process, backend

关于 Django 应用程序设计的新手问题：

我正在为我的网站构建报告引擎。而且我有大量（并且随着时间的推移越来越大）的数据，以及一些必须应用于它的算法。计算承诺会占用大量资源，如果它们是由用户请求执行的，那就太愚蠢了。因此，我认为将它们放入后台进程，该进程将连续执行并不时返回结果，这可以提供给 Django 视图例程，以根据需要生成 html 输出。

我的问题是——构建这样的系统有什么合适的设计方法？有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T13:06:16.127

芹菜是你最好的选择之一。我们正在成功使用它。它具有强大的调度机制 - 您可以将任务安排为定时作业，也可以在用户（例如）请求时在后台触发任务。

它还提供了查询此类后台任务状态的方法，并具有许多流控制功能。它允许非常轻松地分配工作 - 即您的 celery 后台任务可以在单独的机器上运行（这对于例如 heroku web/workers 拆分非常有用，其中 web 进程限制为每个请求最多 30 秒）。它提供了各种队列后端（它可以使用数据库、rabbitMQ 或许多其他队列机制。通过最简单的设置，它可以使用您的 Django 站点已经使用的相同数据库（这使得设置变得容易）。

如果您使用自动化测试，它还有一个有助于测试的功能——它可以设置为“急切”模式，后台任务不在后台执行——从而提供可预测的逻辑测试。

更多信息在这里：[http ://docs.celeryproject.org:8000/en/latest/django/](http://docs.celeryproject.org:8000/en/latest/django/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:21:10.323

你的意思是结果被返回到数据库中，或者你想直接从你独立运行的代码中创建 django-views？

如果您有大量数据，我喜欢使用 Pythons `multiprocessing`。您可以创建一个生成器，其中填充了`JoinableQueue`要执行的不同任务和使用不同任务的工人池。这样，您应该能够最大限度地利用系统上的资源。

多处理模块还允许您通过网络执行多项任务（例如`multiprocessing.Manager()`）。考虑到这一点，如果您需要第二台机器及时处理数据，您应该能够轻松地扩大规模。

## 例子：

这个例子展示了如何产生多个进程。生成器函数应该查询数据库中所有需要繁重的新条目。消费者从队列中取出单个项目并进行实际计算。

```
import time 

from multiprocessing.queues import JoinableQueue
from multiprocessing import Process

QUEUE = JoinableQueue(-1)

def generator():
    """ Puts items in the queue. For example query database for all new, 
    unprocessed entries that need some serious math done.."""
    while True: 
        QUEUE.put("Item")
        time.sleep(0.1)

def consumer(consumer_id):
    """ Consumes items from the queue... Do your calculations here... """
    while True: 
        item = QUEUE.get()
        print "Process %s has done: %s" % (consumer_id, item)
        QUEUE.task_done()

p = Process(target=generator)
p.start()

for x in range(0, 2): 
    w = Process(target=consumer, args=(x,))
    w.start()

p.join()
w.join() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T00:25:17.647

为什么你没有一个 url 或 python 脚本来触发你每次运行时需要完成的任何类型的计算，然后获取该 url 或通过服务器上的 cronjob 运行该脚本？从您的问题来看，您似乎不需要更多。

# ffmpeg - ffmpeg：无法为“-i”找到合适的输出格式

> ID：13780736
> 
> 赞同：8
> 
> 时间：2012-12-08T18:52:54.897
> 
> 标签：ffmpeg

我不知道为什么，但我似乎无法使用 ffmpeg 在视频的右下角呈现水印。

我正在使用以下命令：

```
$ ffmpeg –i faded.mov -vf "movie=logo2.png [watermark]; [in][watermark] overlay=(main_w-overlay_w-10)/2:(main_h-overlay_h-10)/2 [out]" outputvideo3.mov
...
[NULL @ 0x7fa2ec001000] Unable to find a suitable output format for '–i'
–i: Invalid argument 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-10T01:43:31.410

# javascript - jQuery DataTables：如何按自定义参数值而不是单元格的内容进行排序？

> ID：13780739
> 
> 赞同：3
> 
> 时间：2012-12-08T18:52:59.470
> 
> 标签：javascript, jquery, html, datatable, datatables

我有一个非常常见的用例，我在价格列中显示格式化的价格，例如。“20,000.00”。因此，当我尝试对其进行排序时，它会将其视为字符串并且排序不好：

*   10.00
*   20,000.00
*   5,000.00

我可以让它按数据参数值排序，这将是非格式化的浮点数吗？

与这个问题相关：如何禁用给定列的排序？我正在使用 DataTables 1.9.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:40:11.980

使用此页面[http://datatables.net/plug-ins/sorting](http://datatables.net/plug-ins/sorting)查看您可以添加的所有排序类型。那里有很多并且易于使用。基本上，您需要包含它在每种类型的显示详细信息部分下显示的代码。数据表初始化后需要包含此代码。就我个人而言，因为我在我的网站上使用了很多东西，所以我制作了一个名为 datatables.sorting.js 的单独文件，并在包含数据表之后将其包含在内。这样，我可以根据需要添加尽可能多的各种排序类型。

添加代码后，您可以使用 aoColumns 参数告诉数据表将该排序方法应用于您想要的任何列：

```
$('#myTable').dataTable({
"aoColumns": [
            null,
            null,
            { "sType": "formatted-num" }
        ]
}); 
```

[http://jsfiddle.net/davidstetler/5Z8fZ/](http://jsfiddle.net/davidstetler/5Z8fZ/)

我添加了用于对格式化数字进行排序的代码，您可以像我一样将其包含在内，也可以将其包含在单独的文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T19:04:12.990

要回答您的第一个问题，您可以使用 DataTables 插件页面上提供的 Formatted Numbers 插件。我会在此处发布代码，但由于它们经常更新，因此我将仅发布链接。

[http://datatables.net/plug-ins/type-detection](http://datatables.net/plug-ins/type-detection)

您有几个选项可以禁用对特定列的排序。您可以采用传统路线并在您的 init 对象中添加一行，例如...

```
"aoColumns": [
   null,null,null,{ "bSortable": false },null,null
] 
```

其中 null 是您不想对其执行任何操作的列，而 bSortable 对象是您想要影响的列。

由于您运行的是 1.9+，因此您可以执行以下操作。

```
"aoColumnDefs": [
    { "bSortable": false, "aTargets": [ 4 ] }
], 
```

在此示例中，4 是您要禁用排序的列。请记住，第一列是 0，所以这在技术上是第 5 列。

# r - 在R中按组合并两个表

> ID：13780741
> 
> 赞同：0
> 
> 时间：2012-12-08T18:53:12.433
> 
> 标签：r

我正在尝试组合两个表并按两个表之间的组提取值。

我有 test1 表：

```
structure(list(Similarity = c(999L, 888L, 756L, 879L, 567L, 567L), Peak = c(797L, 833L,999L, 798L, 834L, 444L), Name = structure(c(2L, 5L, 6L, 1L, 3L, 4L), .Label = c("Benzene", "Cyclopentane", "Hexadecane", "Nafhtalene", "Tetradecene", "dodecadiene"), class = "factor"),Sample1 = c(22237L, 86032349L, NA, NA, NA, 3333L), Sample2 = c(444567L, 
NA, NA, NA, 115127L, 22222L)), .Names = c("Similarity", "Peak", "Name", "Sample1", "Sample2"), class = "data.frame", row.names = c(NA, -6L)) 
```

和 test2 表：

```
structure(list(Similarity = c(757L, 859L, 999L, 879L, 577L), 
Peak = c(798L, 797L, 999L, 834L, 833L), Name = structure(c(1L, 2L, 5L, 3L, 4L), .Label = c("Benzene", "Cyclopentane", "Hexadecane","Tetradecene", "dodecadiene"), class ="factor"),Sample3 = c(NA, 115127L, NA, NA, 86032349L), Sample4 = c(NA, 43359706L, NA,115127L, NA)),.Names = c("Similarity", "Peak", "Name", "Sample3", "Sample4"), class = "data.frame",row.names = c(NA, -5L)) 
```

当我合并两个表时：

```
cbind(test1,test2)

structure(list(Row.names = structure(c("1", "2", "3", "4", "5"), class ="AsIs"),Similarity.x = c(999L, 888L, 756L, 879L, 567L), Peak.x = c(797L, 833L, 999L, 798L, 834L), Name.x = structure(c(2L, 5L, 6L, 1L, 3L),.Label=c("Benzene","Cyclopentane","Hexadecane", "Nafhtalene", "Tetradecene", "dodecadiene"), class = "factor"), Sample1 = c(22237L, 86032349L, NA, NA, NA), Sample2 = c(444567L, NA, NA, NA, 115127L), Similarity.y = c(757L, 859L, 999L,879L, 577L), Peak.y = c(798L, 797L, 999L, 834L, 833L), Name.y = structure(c(1L,2L, 5L, 3L, 4L), .Label = c("Benzene", "Cyclopentane", "Hexadecane", "Tetradecene", "dodecadiene"), class = "factor"), Sample3 = c(NA, 115127L, NA, NA, 86032349L), Sample4 = c(NA, 43359706L, NA,115127L, NA)), .Names = c("Row.names", "Similarity.x", "Peak.x","Name.x", "Sample1", "Sample2", "Similarity.y", "Peak.y", "Name.y","Sample3", "Sample4"), row.names = c(NA, -5L), class = "data.frame") 
```

我需要合并具有相同名称的行，维护对应的样本并提取最大相似度。

像这样的东西：

```
structure(list(Similarity = c(757L, 859L, 999L, 879L, 577L, 567L), Peak = c(798L, 797L, 999L, 834L, 833L, 444L), Name = structure(c(1L, 2L, 6L, 3L, 5L, 4L), .Label = c("Benzene", "Cyclopentane", "Hexadecane","Nafhtalene", "Tetradecene", "dodecadiene"), class = "factor"), Sample1 = c(NA, 22237L, NA, NA, 86032349L, 3333L), Sample2 = c(NA,444567L, NA, 115127L, NA, 22222L), Sample3 = c(NA, 115127L,NA, NA, 86032349L, NA), Sample4 = c(NA, 43359706L, NA, 115127L,NA, NA)), .Names = c("Similarity", "Peak", "Name", "Sample1", "Sample2", "Sample3", "Sample4"), class ="data.frame", row.names = c(NA,-6L)) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:04:44.793

```
> x <- merge(test1, test2, by='Name', all=TRUE)
> x$Similarity <- pmax(x$Similarity.x, x$Similarity.y, na.rm=TRUE)
> x$Peak <- x$Peak.x

> x[c('Name','Similarity', 'Peak', 'Sample1', 'Sample2', 'Sample3', 'Sample4')]
          Name Similarity Peak  Sample1 Sample2  Sample3  Sample4
1      Benzene        879  798       NA      NA       NA       NA
2 Cyclopentane        999  797    22237  444567   115127 43359706
3   Hexadecane        879  834       NA  115127       NA   115127
4   Nafhtalene        567  444     3333   22222       NA       NA
5  Tetradecene        888  833 86032349      NA 86032349       NA
6  dodecadiene        999  999       NA      NA       NA       NA 
```

# sprite - 精灵和演员之间的libgdx区别

> ID：13780742
> 
> 赞同：34
> 
> 时间：2012-12-08T18:53:14.613
> 
> 标签：sprite, libgdx, actor

我只是在浏览 javadoc 和关于 libgdx 的各种教程，我正处于试图找出与我相似或在 libgdx 中提供类似功能的各种概念之间的差异的阶段。

起初我认为scene2d是关于创建交互式项目，如菜单等，但我正在阅读的各种教程使用scene2d/actors作为主要游戏项目（即玩家等）而其他人只使用精灵。

在游戏中使用Sprite 和Actor（即scene2D）究竟有什么区别？什么时候应该选择？

谢谢。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-20T23:06:19.143

A`Sprite`基本上是具有位置、大小和旋转的图像。你使用 绘制它[`SpriteBatch`](http://libgdx.badlogicgames.com/nightlies/docs/api/index.html?com/badlogic/gdx/graphics/g2d/SpriteBatch.html)，一旦你有了你的`Sprite`s 和你的`SpriteBatch`，你就有了一种简单的、低级的方法来在屏幕上任何你想要的地方获取 2D 图像。剩下的就看你了。

`Actor`另一方面，它是场景图的一部分。它是更高级别的，场景图中的内容不仅仅是定位图像。场景图的根是`Stage`，它本身不显示。是您添加到其中`Stage`的容器，`Actors`用于组织场景。特别是，输入事件通过 传递`Stage`给适当的`Actor`，并且`Stage`知道何时告诉`Actor`自己绘制。例如，触摸事件只会发送到`Actor`被触摸的对象。

但请注意，`Actor`它不包含类似的纹理`Sprite`。相反，您可能想要使用[`Image`](http://libgdx.badlogicgames.com/nightlies/docs/api/index.html?com/badlogic/gdx/scenes/scene2d/ui/Image.html)，它的子类`Actor`可能`Sprite`比普通的`Actor`. 其他子类`Actor`包含文本，等等。

s 的另一个大优点`Actor`是它们可以有`Action`s。这些是一个[很大的话题](https://github.com/libgdx/libgdx/wiki/Scene2d#actions)，但它们本质上允许您为此计划一系列事件`Actor`（如淡入、移动等），一旦您设置它们，这些事件就会自行发生。

所以基本上`Actor`做的不仅仅是`Sprite`因为它是图形框架的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:51:17.630

这或多或少是口味问题。如果要使用动作和舞台，请使用演员。Actor 不能直接绘制，需要重写 draw 方法。在里面你可以使用精灵。

# django - Django DRY List 迭代

> ID：13780743
> 
> 赞同：0
> 
> 时间：2012-12-08T18:53:22.423
> 
> 标签：django, list, iteration, dry

作为一个刚开始在我稀缺的时间使用 Django 的人，我提前感谢您花时间帮助我学习如何使我的代码更清晰和正确。

我有两个列表，由两个查询集组成，如下所示：

```
company_list = [Company_stats.objects.filter(period__exact=P, company_name__in=master_names)]
industry_list = [Industry_stats.objects.filter(period__exact=P, industry_name__in=master_names)] 
```

我遍历模板中的两个列表以创建一个小表。

```
{%for c in company_list%}
    {%for z in c %}
         {{ z.company_name }}                  
         {{ z.nxt_m_ret_est }} 
         {{ z.nxt_m_ret_rat }} 
    {% endfor %}
{% endfor %}

{%for c in industry_list%}
    {%for z in c %} 
         {{ z.industry_name }}                  
         {{ z.nxt_m_ret_est }} 
         {{ z.nxt_m_ret_rat }}  
    {% endfor %}
{% endfor %} 
```

但是，这很好用，因为除了 z.industry_name 与 z.company_name 之外，我使用的是相同的代码，我想知道您是否可以帮助我找出更好的方法来做到这一点。

我尝试将列表合并到一个列表中，其中包含两个查询集，除了明显的问题，我不知道如何告诉它检索 z.company_name 或 z.industry_name，具体取决于数据来自的查询集从，因为一切都成为同一个列表的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:12:08.170

一旦您将字段更改为`name`两个模型上的字段，您就可以将两个查询集放入同一个列表中，然后对其进行迭代。

```
master_list = [model.objects.filter(period__exact=P, name__in=master_names) for model in (Company_stats, Industry_stats)] 
```

...

```
{% for l in master_list %}
    {% for i in l %}
         {{ i.name }}                  
         {{ i.nxt_m_ret_est }} 
         {{ i.nxt_m_ret_rat }} 
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:04:32.660

如果您想让代码更通用，这将有助于使您的名称更通用。您是否有可能在整个系统中进行更改和更改`industry_name`？`company_name``name`

# asp.net - Asp.net Membership 中的 Salt Key 是什么？

> ID：13780745
> 
> 赞同：0
> 
> 时间：2012-12-08T18:53:33.333
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, cryptography

什么是 Asp.net Membership 中的 Salt 密钥以及为什么使用此密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:04:17.520

加盐是使用附加值（在您的情况下为盐键）对密码进行哈希处理以使其更难破解的过程。这有几个原因。其中两个是：

1.  没有随机密钥散列的给定密码将散列为给定值，`x`. 存在许多查找（彩虹）表，其中列出了常见密码及其未加盐的哈希值。如果您的数据库遭到破坏，只需在线查找弱密码哈希就可以很容易地破解它们。
2.  如果你不散列你的密码并且你的数据库被盗了，就会有一群拥有相同弱密码的用户拥有相同的散列。这为黑客提供了一个开始破解的地方，因为一旦他们破解了公共哈希，他们就可以访问多个帐户。

请记住最后一件事：加盐是一种安全措施，但它不会使数据库安全。大多数散列函数旨在快速散列数据。这意味着暴力破解这些函数相对容易，因为这些函数针对速度进行了优化。保护密码的最佳方法之一是使用处理时间较长的函数对密码进行哈希处理。这使得暴力破解它们变得更加困难。一个需要 100 毫秒而不是 5 毫秒来散列的密码将对您的最终用户产生不明显的性能影响，但黑客暴力破解需要 20 倍的时间。这种技术与散列相结合，有助于确保用户数据的安全。

* * *

这是我最喜欢的关于该主题的文章之一：http: [//crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:59:21.690

它可以防止字典攻击，请参阅 [http://en.wikipedia.org/wiki/Salt_(cryptography](http://en.wikipedia.org/wiki/Salt_(cryptography) )

更多细节参见

[http://blog.nerdbank.net/2009/06/reverse-engineering-aspnet-membership.html](http://blog.nerdbank.net/2009/06/reverse-engineering-aspnet-membership.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:00:59.623

盐只是一个随机数，您可以使用框架库中的 RNGCryptoServiceProvider 类生成好的随机数用作盐

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T19:05:12.970

Salt用于随机化哈希。因此，查找表、反向查找表和彩虹表等攻击变得无效。

为了更好地理解，我建议您阅读[http://crackstation.net/hashing-security.htm上的文章](http://crackstation.net/hashing-security.htm)

# c++ - 使用 boost 递归地将给定目录中每个最低级别文件夹的文件复制到另一个目录 - C++

> ID：13780754
> 
> 赞同：2
> 
> 时间：2012-12-08T18:54:21.977
> 
> 标签：c++, boost, file-io, recursion, filesystems

我有一个包含许多子文件夹的文件夹，其中还包含许多子文件夹，我试图将混合文件复制到其他地方的一个目录中。

它看起来像这样 GrandParent/Parents/Children/files.*

我听说 boost 是处理递归文件夹操作的方法。但是，我对boost不是很熟悉。我应该如何处理这个？

编辑：请举一个使用boost的例子！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:59:48.860

一个简单的谷歌搜索带我到这个 - [http://warpedvisions.org/2008/04/howto-directory-recursion-in-boost-and-other-tips/](http://warpedvisions.org/2008/04/howto-directory-recursion-in-boost-and-other-tips/)

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:11:32.973

谷歌搜索[提升文件系统](http://www.google.com/search?q=boost%20filesystem)首次命中

*   [提升文件系统主页](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/index.htm)
*   [boost文件系统教程目录迭代](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/tutorial.html#Directory-iteration)
*   [提升文件系统参考 copy_directory 和 copy_file](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/reference.html#copy_directory)

boost 文件系统最近更改为版本 3。注意不要遵循 V2 教程。

# c++ - openssl 椭圆曲线

> ID：13780759
> 
> 赞同：0
> 
> 时间：2012-12-08T18:54:48.837
> 
> 标签：c++, cryptography, openssl, elliptic-curve

我有一条椭圆曲线 EC，我需要找到 EC 的这样一个点 G，其坐标是曲线上所有点中最小的非负整数。我需要它来实现ECOH散列算法。我试图使用 openssl 来实现这个目标，但到目前为止我还没有弄清楚如何找到这样一个点。我试图这样做：

```
EC_POINT *G = EC_POINT_new(ec);
for(int i = 1; i < 1024; i++)
{
    itoa(i, str, 10);
    BN_dec2bn(&x, str);
    EC_POINT_set_affine_coordinates_GFp(ec, G, x, y, ctx);
    if(EC_POINT_is_on_curve(ec, G, ctx))
        printf("%s\n", str);
} 
```

但它只检查坐标为 (x, y) 的点是否在曲线上。我怎样才能找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:05:09.617

首先，如果`ec`没有提供生成器，请查找生成器。我想您想要具有最小 x 坐标的生成器。你可以这样做：

```
// Suppose you've found a generator point G, and a BIGNUM context bn_ctx 
// has been created and initialized

BIGNUM x, y, x_min, y_min;
BN_init(&x); BN_init(&x_min);
BN_init(&y); BN_init(&y_min);

EC_POINT *P = EC_POINT_new(ec);
EC_POINT_copy(P,G);
EC_POINT_get_affine_coordinates_GFp(ec,P,x_min,y_min,bn_ctx);
do{
    EC_POINT_add(ec,P,P,G,bn_ctx);
    EC_POINT_get_affine_coordinates_GFp(ec,P,x,y,bn_ctx);
    if (x < x_min) {
        BN_copy(x_min, x);
        BN_copy(y_min, y);
    }
}while(!EC_POINT_is_at_infinity(ec,P)); 
```

然后您将拥有具有最小 x 坐标的生成器 (x,y)。至于如何首先找到发电机，那就是另一回事了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:38:22.177

而不是 using `EC_POINT_set_affine_coordinates_GFp`，它需要`x`和`y`，而 use `EC_POINT_set_compressed_coordinates_GFp`，而不是 a ，它`y`表示`y_bit`两个`y`值（偶数或奇数）中的哪一个用于给定`x`（如果`x`在曲线的域内）。

然后你应该能够遍历前几个`x`以找到最小的坐标`x`，就像你试图做的那样。

# android - 关于“没有这样的表”SQLite 的 Eclipse LogCat 错误

> ID：13780762
> 
> 赞同：0
> 
> 时间：2012-12-08T18:54:54.147
> 
> 标签：android, eclipse

我正在尝试编写一个种族数据库，您可以在其中输入种族名称，然后单击该种族名称，然后编辑/删除它。所以我的 logcat 中出现错误（错误代码=1）。它告诉我没有创建表，所以我认为我没有正确调用我的变量。

```
//LogCat
12-08 12:46:21.019: I/INFORMATION(650): You entered the insert method
12-08 12:46:21.019: I/Database(650): sqlite returned: error code = 1, msg = no such table: Note
12-08 12:46:21.062: E/Database(650): Error inserting note=ft
12-08 12:46:21.062: E/Database(650): android.database.sqlite.SQLiteException: no such table:     Note: , while compiling: INSERT INTO Note(note) VALUES(?);
12-08 12:46:21.062: E/Database(650):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
12-08 12:46:21.062: E/Database(650):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
12-08 12:46:21.062: E/Database(650):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65) 
```

```
//View races java code
package com.CIS2818.tritracker;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.CursorAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
public class View_races extends Activity {

NoteAdapter adapter=null;
RaceHelper helper2=null;
Cursor dataset_cursor=null;
EditText editNote2=null;
String noteId2=null;

String TAG = "INFORMATION";

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try
    {
        setContentView(R.layout.activity_view_races);

        ListView list2=(ListView)findViewById(R.id.list2);
        editNote2 = (EditText)findViewById(R.id.myEditText2);

        helper2=new RaceHelper(this);

        dataset_cursor=helper2.getAll();

        startManagingCursor(dataset_cursor);

        adapter=new NoteAdapter(dataset_cursor);

        list2.setAdapter(adapter);

        Button btnSimple2 = (Button) findViewById(R.id.btnSimple2);

        btnSimple2.setOnClickListener(onSave);

        Button btnDelete2 = (Button) findViewById(R.id.btnDelete2);

        btnDelete2.setOnClickListener(onDelete);

        list2.setOnItemClickListener(onListClick);

    }
    catch (Exception e)
    {

        Log.e("ERROR", "ERROR IN CODE: " + e.toString());

        e.printStackTrace();
    } 
}
@Override
public void onDestroy() {
    super.onDestroy();
    helper2.close();
}

private View.OnClickListener onSave=new View.OnClickListener() {
    @SuppressWarnings("deprecation")
    public void onClick(View v) {
        Log.i(TAG,"You passed through the save method");
        if (noteId2==null) {
            helper2.insert(editNote2.getText().toString());
        }
        else{
            helper2.update(noteId2, editNote2.getText().toString());

            noteId2=null;

        }
        dataset_cursor.requery();

        editNote2.setText("");
    }
};    

private View.OnClickListener onDelete=new View.OnClickListener() {
    @SuppressWarnings("deprecation")
    public void onClick(View v) {

        if (noteId2==null) {
            return;
        }
        else{

            helper2.delete(noteId2);

            noteId2=null;

        }
        dataset_cursor.requery();

        editNote2.setText("");
    }
};    

private AdapterView.OnItemClickListener onListClick=new AdapterView.OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent,
                            View view, int position,
                            long id2) 
    {

        noteId2 =String.valueOf(id2);

        Cursor c=helper2.getById(noteId2);

        c.moveToFirst();

        editNote2.setText(helper2.getNote(c));

    }
};

class NoteAdapter extends CursorAdapter {
    @SuppressWarnings("deprecation")
    NoteAdapter(Cursor c) {
        super(View_races.this, c);
    }

    @Override
    public void bindView(View row, Context ctxt,Cursor c) {
        NoteHolder2 holder=(NoteHolder2)row.getTag();

        holder.populateFrom(c, helper2);
    }

    @Override
    public View newView(Context ctxt, Cursor c,ViewGroup parent) {
        LayoutInflater inflater=getLayoutInflater();
        View row=inflater.inflate(R.layout.row2, parent, false);
        NoteHolder2 holder=new NoteHolder2(row);

        row.setTag(holder);

        return(row);
    }
}

static class NoteHolder2 {
    private TextView noteText2=null;

    NoteHolder2(View row) {
        noteText2=(TextView)row.findViewById(R.id.note2);
    }

    void populateFrom(Cursor c, RaceHelper helper) {
        noteText2.setText(helper.getNote(c));

    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_view_races, menu);
    return true;
}
//Button Method to return to the main Menu
public void Menu(View v){
    Intent intent = new Intent(this, MainMenuActivity.class);
    startActivity(intent);
}
//Button Method to go to the Race Activity
public void Races(View v){
    Intent intent = new Intent(this, UpComingRaceActivity.class);
    startActivity(intent);
}} 
```

```
//RaceHelper java code
package com.CIS2818.tritracker;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

class RaceHelper extends SQLiteOpenHelper {
private static final String DATABASE_NAME="note2.db";
private static final int SCHEMA_VERSION=1;
String TAG ="INFORMATION";
public RaceHelper(Context context) {
    super(context, DATABASE_NAME, null, SCHEMA_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE Note (_id INTEGER PRIMARY KEY AUTOINCREMENT, note TEXT);");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}
public void insert(String note2) {
    Log.i(TAG,"You entered the insert method");
    ContentValues cv2=new ContentValues();
    cv2.put("note", note2);

    getWritableDatabase().insert("Note", "note", cv2);

}
public void update(String id, String note2) {
    ContentValues cv2=new ContentValues();
    String[] args={id};

    cv2.put("note", note2);

    getWritableDatabase().update("Note", cv2, "_id=?", args);

}
public void delete(String id2) {

    getWritableDatabase().delete("Note", "_id=?", new String[] {id2});
}

public Cursor getAll() {
    return(getReadableDatabase()
                    .rawQuery("SELECT _id, note FROM Notes",
                                        null));
}

public String getNote(Cursor c2) {
    return(c2.getString(1));
}

public Cursor getById(String id2) {
    String[] args={id2};

    return(getReadableDatabase()
                    .rawQuery("SELECT _id, note FROM Note WHERE _id=?",
                                        args));
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:00:20.230

看来您已经在 J​​ava 代码中更改了 SQL 架构，但尚未通知 SQLite。为了让您的 SQLiteOpenHelper 类使用您在 中提供的新模式`onCreate()`，您需要升级您的数据库。这是最基本的方法。

首先添加一些功能`onUpgrade()`：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS Note");
    onCreate(db);
} 
```

现在递增`SCHEMA_VERSION`以触发升级：

```
private static final int SCHEMA_VERSION=2; 
```

了解 SQLiteOpenHelper 不会`onCreate()`为您检查内部代码，*您*必须通过递增来告诉 SQLite 有更改`SCHEMA_VERSION`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:02:08.100

在您的插入方法中，将第二个值设为空。例如`getWritableDatabase().insert("Note",null,cv2);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T15:57:47.237

我和你有同样的问题。我解决了。起初我重命名了我创建的表，但对 CREATE_DATABASE 订单什么也不做。然后我注意到了。虽然我更正了它不起作用的顺序。所以我添加了 onUpgrade 方法，并将 DATABASE_VERSION 增加到更高的数字，它有效！！！希望它也适用于你。

# django - Django-allauth facebook 连接 JS SDK

> ID：13780765
> 
> 赞同：1
> 
> 时间：2012-12-08T18:55:25.070
> 
> 标签：django, facebook, facebook-javascript-sdk, facebook-authentication, django-allauth

我可以成功地使用 django-allauth 让用户通过 facebook 的 OAuth2 机制登录。现在我想通过 facebook 的 JS sdk 启用登录。

[文档](https://github.com/pennersr/django-allauth#facebook)说_

> Facebook 支持 OAuth2 和 Facebook Connect Javascript SDK。您甚至可以将两者混合使用。

不幸的是，示例代码没有显示如何使用 js sdk。通过阅读代码我发现我需要设置

```
SOCIALACCOUNT_PROVIDERS = {
    'facebook': {
        'SCOPE': ['email', 'publish_stream'],
        'METHOD': 'js_sdk'  # instead of 'oauth2'
    }
} 
```

`body`并在我的 html 模板的标签中包含以下代码段

```
{% include "facebook/fbconnect.html" %} 
```

我还在我的中添加了以下内容`TEMPLATE_CONTEXT_PROCESSORS`：

```
allauth.account.context_processors.account
allauth.socialaccount.context_processors.socialaccount 
```

由于某种原因，这似乎还不够，因为似乎没有设置要替换的变量`facebook/fbconnect.html`，导致它们被空字符串替换。另外，由`{% provider_login_url 'facebook' method='js_sdk' %}`is just生成的链接`javascript:FB_login('')`显然是错误的。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:47:43.293

我刚刚发现如何做到这一点。而不是做

```
{% include "facebook/fbconnect.html" %} 
```

我应该做

```
{% providers_media_js %} 
```

# c++ - 使用模板类型调用的模板仿函数

> ID：13780770
> 
> 赞同：0
> 
> 时间：2012-12-08T18:56:03.827
> 
> 标签：c++, templates, functor

我有这两个函子：

```
template<typename T>
struct identity {
    const T &operator()(const T &x) const {
        return x;
    }
};

template<typename KeyFunction>
class key_helper {

public:
    key_helper(const KeyFunction& get_key_) : get_key(get_key_) { }

    template<typename T, typename K>
    const K operator()(const T& x, const int& n) {
        return get_key(x);
    }

private:
    KeyFunction get_key;
}; 
```

但是，如果我在模板函数中使用第二个仿函数。我收到错误：

```
template<typename T, typename K>
void test(T item, K key) {

    identity<T> id;
    key_helper<identity<T> > k(id);

    K key2 = k(item, 2); // compiler cannot deduce type of K
    key2 = k.operator()<T, K>(item, 2); // expected primary-expression before ',' token
} 
```

我如何`operator()`从函数中调用仿`test`函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T19:04:02.897

它无法以任何方式推断 , 的返回类型`operator()`，`K`因此您需要显式指定模板参数。您的第二次尝试不起作用的原因是您需要包含`template`关键字：

```
K key2 = k.template operator()<T,K>(item, 2); 
```

# python - Pip 识别 virtualenv 中的链接站点包

> ID：13780772
> 
> 赞同：1
> 
> 时间：2012-12-08T18:56:13.047
> 
> 标签：python, virtualenv, pip

出于多种原因，例如当包需要很长时间编译 (lxml) 时，似乎建议将此类包从系统 sitepackages 目录符号链接到 virtualenv。

一些示例问题：

[对 virtualenv 使用单个站点包（作为例外）](https://stackoverflow.com/q/13703074/708221)

[如何从本地系统将 lxml 安装到 virtualenv 中？](https://stackoverflow.com/q/7117361/708221)

但是这样的包不能被 pip 识别，它会很高兴地尝试重新安装它们。如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:47:05.123

好的，看来诀窍是也链接 egg-info 目录。

# android - 在调试模式下未检测到设备？

> ID：13780781
> 
> 赞同：0
> 
> 时间：2012-12-08T18:57:19.190
> 
> 标签：android

我有一个 iBall 平板电脑型号。i9702 我还安装了该设备的设备驱动程序。但是，当我运行（我的项目）时，运行方式->目标->始终提示选择设备。我的设备没有出现。另外我已经检查了开发人员选项选项卡中的调试模式。有人可以告诉我可能是什么原因。

# javascript - JQuery 查找和更改字符串的样式

> ID：13780784
> 
> 赞同：3
> 
> 时间：2012-12-08T18:57:26.597
> 
> 标签：javascript, jquery, html, css

我需要编写一个函数，在我的 HTML 页面中的所有内容中搜索特定字符串，如果找到，则更改文本的颜色。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T18:59:10.517

你可以这样做：

CSS：

```
.someclass {
    color: red;
} 
```

Javascript：

```
$('p:contains('+yourstring+')', document.body).each(function(){
  $(this).html($(this).html().replace(
        new RegExp(yourstring, 'g'), '<span class=someclass>'+yourstring+'</span>'
  ));
}​);​ 
```

请注意，如果您的字符串在标签或属性中，这会产生问题。

[示范](http://jsfiddle.net/G7jm3/)

在将处理程序附加到段落（或其中可能包含您的字符串的元素，例如链接）之前，请小心运行此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:23:15.503

dystroy 的答案的问题是它会覆盖整个 HTML，因此如果您在包含文本的节点中有任何处理程序，它们将被删除。

正确的解决方案是使用[文本范围](https://developer.mozilla.org/en-US/docs/DOM/range)仅更新文本本身，而不是其周围的所有 HTML。请参阅[使用 JavaScript 突出显示文本范围](https://stackoverflow.com/questions/6240139/highlight-text-range-using-javascript)

为了好玩，有一个内置的方法[window.find](https://developer.mozilla.org/en-US/docs/DOM/window.find)可以在[FF 和 Chrome](http://jsfiddle.net/tZZeN/)中使用。但它不在标准中，一次只能找到一个。就像 ctrl+f 一样。

```
window.find("anything"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T10:46:18.063

> **JQuery 查找和更改字符串的样式>>仅复制粘贴并运行:)**

```
 $('#seabutton').click(function()
        {
            var sea=$('#search').val();
            var cont=$('p').val();
            alert(cont);
            $('p:contains('+sea+')').each(function()
                 {
    /*          $(this).html($(this).html().replace(new RegExp(sea, 'g'),'<span class=someclass>'+sea+'</span>'));
     */            $(this).html($(this).html().replace(
                        new RegExp(sea, 'i'), '<span class=someclass>'+sea+'</span>'
                  )); 
            });

        });
        $('p').click(function()
        {
            $(".someclass").css("color", "black");
        });
        $('#search').blur(function()
        {
            $(".someclass").css("color", "black");

        });

    })

    </script>
    <style type="text/css">
    .someclass {
        color: red;
    }
    </style>
    </head>
    <body>
    <!-- Select Country:<select id="country" name="country">
    </select>
    <table id="state" border="1">

    </table> -->
    <br>
    Enter Text:<input type="text" id="search"/><input type="button" id="seabutton" value="Search"/>
    <div id="serach">
    <p>This is ankush Dapke
    </p>

    </div>
    </body>
    </html> 
```

# java - Java：仅删除标题栏按钮

> ID：13780785
> 
> 赞同：4
> 
> 时间：2012-12-08T18:57:34.313
> 
> 标签：java, swing, jframe, titlebar

我只找到了完全删除标题栏+边框的方法。我想在 Swing 中创建一个没有标题栏按钮但仍保留默认系统边框的窗口。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T19:49:49.023

以下链接有一个`remove()`在按钮上使用的完整工作示例：

[http://www.coderanch.com/t/344419/GUI/java/deactivate-close-minimise-resizable-window](http://www.coderanch.com/t/344419/GUI/java/deactivate-close-minimise-resizable-window)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T19:37:44.707

您可以使用框架的`setUndecorated()`方法并渲染自己的装饰。您可能想要利用`JInternalFrame`UI 默认值，这些默认值通常是对平台默认外观的概括，如此处[所示](https://stackoverflow.com/a/10360374/230513)。这些似乎特别相关：

```
InternalFrame.activeTitleBackground
InternalFrame.activeTitleForeground
InternalFrame.inactiveTitleBackground
InternalFrame.inactiveTitleForeground

```

# html - HTML属性中的AngularJS条件

> ID：13780788
> 
> 赞同：19
> 
> 时间：2012-12-08T18:57:38.663
> 
> 标签：html, angularjs

您将如何`html`根据模型更改属性？

我正在尝试根据数组的长度更改输入的占位符文本：

```
<input placeholder="{{todos.length ? 'Insert todo' : 'Insert your first todo'}}" /> 
```

但这似乎不起作用...

[JS Bin 代码示例](http://jsbin.com/evohip/1)。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-08T21:06:00.350

三元运算符在这种情况下似乎不起作用，而不是这样做

```
{{cond ? true : false}} 
```

将其更改为

```
{{ exp && true || false }} 
```

所以你的`placeholder`属性看起来像这样（为了演示目的，我已经缩短了它）

```
placeholder="{{todos.length > 0 && 'Insert' || 'Insert first'}}" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-18T15:58:31.823

对于遇到这种情况的其他人（就像我刚刚通过 Google 所做的那样），看起来 Angular 最近在表达式中添加了对三元运算符的支持。我刚刚在 1.2.16 中成功使用它来动态更新一个工具提示（标题）属性。它似乎首先出现在 1.2.17 的文档中，尽管他们仍然普遍不鼓励使用它：

来自：[AngularJS：开发者指南：表达式](https://code.angularjs.org/1.2.17/docs/guide/expression#no-control-flow-statements)

> 除了三元运算符 (a ? b : c)，您不能在表达式中编写控制流语句。这背后的原因是 Angular 哲学的核心，即应用程序逻辑应该在控制器中，而不是视图中。如果您需要真正的条件、循环或从视图表达式中抛出，请改为委托给 JavaScript 方法。

# javascript - 谷歌地图路线点击事件

> ID：13780789
> 
> 赞同：1
> 
> 时间：2012-12-08T18:57:58.963
> 
> 标签：javascript, google-maps, google-maps-api-3

当我点击谷歌地图时，我想在该位置添加一个标记。这适用于一个例外：当我单击我绘制的其中一条路线时，它不起作用。因为点击事件只在地图本身而不是路线上。但我找不到我绘制的路线的任何点击事件。（我检查了文档）。

有没有人有关于如何做到这一点的建议？

所以我不仅需要地图，还需要路线的点击功能。

```
google.maps.event.addListener(map, 'click', function(event) {
placeMarker(event.latLng);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:36:07.360

任何一个：

1.  向添加标记的路由添加点击侦听器
2.  使路由的可点击属性为 false {clickable:false}。

顺便说一句 - 如果我拒绝地理定位，您的地图将不起作用。

# android - 如何检测蓝牙鼠标滚轮在And roid应用程序上向上或向下

> ID：13780792
> 
> 赞同：0
> 
> 时间：2012-12-08T18:58:23.373
> 
> 标签：android, android-widget

我想检测蓝牙鼠标滚轮的变化，我知道鼠标滚轮变化的动作代码是什么，但不知道它是向上还是向下。

```
 public boolean onGenericMotion(View v, MotionEvent event) {
        if (event.getActionMasked() == MotionEvent.ACTION_SCROLL) {
        //how to detect mouse wheel being up or down?
        }
        return false;
    } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:37:44.373

我认为可以在这个问题中找到答案：[我的视图如何响应鼠标滚轮？](https://stackoverflow.com/questions/11024809/how-can-my-view-respond-to-a-mousewheel)

我已经从那里复制了代码示例：

```
@Override
public boolean onGenericMotionEvent(MotionEvent event) {
  if (0 != (event.getSource() & InputDevice.SOURCE_CLASS_POINTER)) {
    switch (event.getAction()) {
      case MotionEvent.ACTION_SCROLL:
        if (event.getAxisValue(MotionEvent.AXIS_VSCROLL) < 0.0f)
          selectNext()
        else
          selectPrev();
        return true;
    }
  }
  return super.onGenericMotionEvent(event);
} 
```

# android - 从通知中打开 Activity -Android

> ID：13780795
> 
> 赞同：1
> 
> 时间：2012-12-08T18:58:35.180
> 
> 标签：android, android-intent, android-activity, google-cloud-messaging

我`GCMBaseIntentService`在我的服务类中使用它扩展`GCMBaseIntentService`了我覆盖的方法`onMessage(Context,Intent)`。代码在这里：

```
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");

    //String message = getString(R.string.gcm_message);
    String id=intent.getExtras().getString("event_id");
    String message=intent.getExtras().getString("title");
    String eventname=intent.getExtras().getString("event_name");

    generateNotification(getApplicationContext(), id, message, eventname);  
}

private static void generateNotification(Context context, String id, String message, String eventname) 
{
    int icon = R.drawable.ic_stat_gcm;
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);

   //new intent
    Intent notificationIntent = new Intent(context, EventDescription.class);
    notificationIntent.putExtra("event_id", id);//need this id in the eventdescription activity

    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, eventname, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(0, notification); 
} 
```

问题是，当我单击此通知并在`Eventdescription`活动中并从意图中提取额外内容并打印 ID 时。它仅在第一次显示正确的值，之后对于每个通知，它始终显示第一个值。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:22:24.713

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.notificationsfinal);

    start=1;
    end=15;

    next=(Button)findViewById(R.id.nextbtn);
    prev=(Button)findViewById(R.id.prevbtn);
    statusview=(TextView)findViewById(R.id.status);

    notification_list_view=(ListView)findViewById(R.id.not_listview);
    updatestatus();
    getNotifications();

}
private void getNotifications()
{
    eventnotifierapp app=(eventnotifierapp)getApplication();

    id=getIntent().getExtras().getString("event_id");
    db=new MyDB(this);
    } 
```

这是我正在检索此 event_id 的 EventDescription 活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:40:10.543

您后续`Intent`的 s 不够不同，因此它们正在被回收。具体来说，`extras`从系统的角度来看，更改并不会产生明显的意图。

[Intent.filterEquals](http://developer.android.com/reference/android/content/Intent.html#filterEquals(android.content.Intent))的文档说明您需要更改以下一项或多项：操作、数据、类型、类和类别。因此，一种方法是将一些区别信息（在您的情况下为`event_id`）粘贴到数据 URI 中；您不必将此 URI 用于任何事情，但它可以确保您的意图是不同的。

[此相关问题](https://stackoverflow.com/questions/2514750)中有更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:05:16.707

尝试这个

```
PendingIntent intent = PendingIntent.getActivity(context, **uniqueKey**, notificationIntent, 0); 
```

请注意 Pending Intent 的 getActivity 的 requestCode 应该是唯一的。所以只需通过

每个通知的唯一值。您可以放置​​时间戳甚至是您收到的 id

从服务器。我已经尝试过了，这很有效。请分享您的反馈

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T19:07:49.443

```
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

# jsp - JSP 编译期间出现“找不到符号”的错误

> ID：13780808
> 
> 赞同：-2
> 
> 时间：2012-12-08T18:59:49.063
> 
> 标签：jsp, servlets, javabeans

我是 Java-EE 的新手（从今天开始）。我一边看书一边做例子。起初，我编写了一个非常简单的程序，它通过表单获取用户信息（在 index.jsp 中），然后在 output.jsp 中显示它们。然后我尝试将其转换为基于 MVC 的架构，使用 Beans 作为模型。因此，用户的数据首先进入一个名为 ControllerServlet.java 的 servlet，数据在 Bean 中是 SET，在视图 (output.jsp) 中数据是从 bean 中获取。但它给了我关于错误使用 Beans 的错误。

这是我的代码：

索引.jsp

```
 <%-- 
    Document   : index
    Created on : Dec 8, 2012, 4:16:48 PM
    Author     : mohsen
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Developer survey</title>
    </head>
    <body>
        <h1>Welcome to SHIT</h1>
        <p>Please indicate shit, so we could be able to do further shit later.</p>
        <form action="output.jsp">
            <table border="0">
                <tbody>
                    <tr>
                        <td>Full Name:</td>
                        <td><input type="text" name="fullName" value="" /></td>
                    </tr>
                    <tr>
                        <td>Java</td>
                        <td><input type="checkbox" name="progLang" value="Java" /></td>
                    </tr>
                    <tr>
                        <td>Groovy</td>
                        <td><input type="checkbox" name="progLang" value="Groovy" /></td>
                    </tr>
                    <tr>
                        <td>Scala</td>
                        <td><input type="checkbox" name="progLang" value="Scala" /></td>
                    </tr>
                    <tr>
                        <td>C#</td>
                        <td><input type="checkbox" name="progLang" value="C#" /></td>
                    </tr>
                    <tr>
                        <td>Ruby</td>
                        <td><input type="checkbox" name="progLang" value="Ruby" /></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><input type="submit" value="Submit" /></td>
                    </tr>
                </tbody>
            </table>

        </form>
    </body>
</html> 
```

这是 SurveyData.java（Bean）

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import java.beans.*;
import java.io.Serializable;

/**
 *
 * @author mohsen
 */
public class SurveyData implements Serializable {

    public static final String PROP_SAMPLE_PROPERTY = "sampleProperty";
    private String fullName;
    private String[] progLang;
    private PropertyChangeSupport propertySupport;

    public SurveyData() {
        propertySupport = new PropertyChangeSupport(this);
    }

    public String getFullName() {
        return fullName;
    }

    public String[] getProgLang() {
        return progLang;
    }

    public void setProgLang(String[] value) {
        String[] oldValue = progLang;
        progLang = value;
        propertySupport.firePropertyChange(PROP_SAMPLE_PROPERTY, oldValue, progLang);
    }

    public void setFullName(String value) {
        String oldValue = fullName;
        fullName = value;
        propertySupport.firePropertyChange(PROP_SAMPLE_PROPERTY, oldValue, fullName);
    }

    public void addPropertyChangeListener(PropertyChangeListener listener) {
        propertySupport.addPropertyChangeListener(listener);
    }

    public void removePropertyChangeListener(PropertyChangeListener listener) {
        propertySupport.removePropertyChangeListener(listener);
    }
} 
```

这是 ControllerServlet.java：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author mohsen
 */
@WebServlet(name = "ControllerServlet", urlPatterns = {"/ControllerServlet"})
public class ControllerServlet extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        SurveyData surveyData = new SurveyData();
        surveyData.setFullName(request.getParameter("fullName"));
        surveyData.setProgLang(request.getParameterValues("progLang"));
        request.setAttribute("surveyData", surveyData);

        request.getRequestDispatcher("output.jsp").forward(request, response);

    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

最后，这里是 output.js：

```
<%-- 
    Document   : output
    Created on : Dec 8, 2012, 4:42:59 PM
    Author     : mohsen
--%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<jsp:useBean id="surveyData" scope="request" class="SurveyData" />
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Thanks for doing the shit we asked you!</h1>
        <P>
            <%--=request.getParameter("fullName")--%>,
            <jsp:getProperty name="surveyData" property="fullName" />
            you have said that you know these shit:
        </P>
        <ul>
            <% 
                //String[] selectedLanguages = request.getParameterValues("progLang");
                String[] selectedLanguages = surveyData.getProgLang();
                if (selectedLanguages != null){
                    for(int i = 0; i < selectedLanguages.length; i++){
                        %>
                        <li>
                            <%= selectedLanguages[i]%>
                        </li>
                        <%
                    }
                }
            %>
        </ul>
    </body>
</html> 
```

这些是输出错误：

```
Compiling 1 source file to C:\Users\mohsen\Documents\NetBeansProjects\simplewebapp\build\generated\classes
C:\Users\mohsen\Documents\NetBeansProjects\simplewebapp\build\generated\src\org\apache\jsp\output_jsp.java:47: cannot find symbol
symbol  : class SurveyData
location: class org.apache.jsp.output_jsp
      SurveyData surveyData = null;
      ^
C:\Users\mohsen\Documents\NetBeansProjects\simplewebapp\build\generated\src\org\apache\jsp\output_jsp.java:49: cannot find symbol
symbol  : class SurveyData
location: class org.apache.jsp.output_jsp
        surveyData = (SurveyData) _jspx_page_context.getAttribute("surveyData", PageContext.REQUEST_SCOPE);
C:\Users\mohsen\Documents\NetBeansProjects\simplewebapp\build\generated\src\org\apache\jsp\output_jsp.java:51: cannot find symbol
symbol  : class SurveyData
location: class org.apache.jsp.output_jsp
          surveyData = new SurveyData();
C:\Users\mohsen\Documents\NetBeansProjects\simplewebapp\build\generated\src\org\apache\jsp\output_jsp.java:67: cannot find symbol
symbol  : class SurveyData
location: class org.apache.jsp.output_jsp
      out.write(org.apache.jasper.runtime.JspRuntimeLibrary.toString((((SurveyData)_jspx_page_context.findAttribute("surveyData")).getFullName())));
                                                                        ^
4 errors
C:\Users\mohsen\Documents\NetBeansProjects\simplewebapp\nbproject\build-impl.xml:930: The following error occurred while executing this line:
C:\Users\mohsen\Documents\NetBeansProjects\simplewebapp\nbproject\build-impl.xml:284: Compile failed; see the compiler error output for details.
BUILD FAILED (total time: 1 second) 
```

顺便说一句，我正在使用 NetBeans。它看起来很长，但老实说，它只是一些基本的 noobie 代码。我想我的问题是我还不太了解 Beans。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:49:13.460

默认包中的类对于包中自身的类是不可见的。

自己尝试一下：

```
// No package!

public class Foo {
} 
```

```
package com.example;

public class Bar {
    public static void main(String... args) {
        Foo foo = new Foo(); // compile fail, cannot find symbol
    }
} 
```

这与在幕后苦苦挣扎的问题完全相同`<jsp:useBean>`。如果您希望它们对外部可见（因此可以导入），请将所有公共类放在一个包中。

* * *

**与具体问题无关**，您根本不需要`<jsp:useBean>`此构造。您已经使用 servlet 创建并设置了 bean。完全摆脱`<jsp:useBean>`标签。另外请确保您正在阅读正确的教程。`<jsp:useBean>`仅用于无控制器（阅读：无 servlet）MVC 方法。另请参阅[如何在 Session 的帮助下通过 Bean 将参数从 Servlet 传递到 JSP 页面？](https://stackoverflow.com/questions/5798057/how-to-pass-parameters-from-servlet-via-bean-to-jsp-page-with-the-help-of-sessio/5799033#5799033)和[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)。

# web-services - SaaS 的 Web 应用程序 - 如何与 Office 集成

> ID：13780810
> 
> 赞同：0
> 
> 时间：2012-12-08T18:59:58.530
> 
> 标签：web-services, web-applications, vb6, saas

我正在寻找针对某个行业的网络应用程序和市场。我想提供灵活性，让行业中的每家公司都有一个独特的解决方案。大多数事情都是相似的，但对于相同的数据，它们的外观可能会大不相同。我认为为每家公司制作一个新的网络应用程序是唯一的方法，因为会有很多变化。但是，我需要使用 MS Office 导入和导出数据，最好的方法是什么？视觉基础？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:29:08.270

参考**VB6**标签具体回答这一点：

> 我需要使用 MS Office 导入和导出数据

长期以来，VB6 是通过 OLE 自动化与 Office 应用程序交互的绝佳方式。但是，没有人会建议您现在使用它。可以通过其 API 以 VB.NET 或许多其他语言访问 Office 应用程序。请参阅[Office 开发人员网站](http://msdn.microsoft.com/en-us/office/ee513173.aspx)作为学习的起点，或尝试搜索“microsoft office automation vb.net”之类的内容

# wordpress - 访问本地主机上的文件的权限被拒绝（wordpress 安装）

> ID：13780815
> 
> 赞同：1
> 
> 时间：2012-12-08T19:00:28.700
> 
> 标签：wordpress, localhost

我有一个奇怪的问题......我已经在本地安装了 Wordpress（我在 Ubuntu 上），我现在在访问图像文件时遇到了麻烦......在 css 中我有：

```
.sprites{ background:url("sprites.png") top left no-repeat; }
._r3_c5{ width:210px; height:204px; background-position:-10px -10px; } 
```

当我尝试这样做时：

```
<div class="sprites _r3_c5">
</div> 
```

我什么都没看到。如果我然后检查我的来源，并尝试在新选项卡中打开（损坏的）图像，我会收到以下消息：

```
Forbidden

You don't have permission to access /current/alex/wp-content/themes/starkers/sprites.png on this server. 
```

有人知道这是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:16:37.610

听起来像是 Apache 用于网站的 Ubuntu 帐户的权限问题（这通常与您的用户帐户不同）。检查文件/文件夹的所有者、组和权限，并根据需要进行调整。

这是来自 WordPress codex 关于安全性的链接。[http://codex.wordpress.org/Hardening_WordPress](http://codex.wordpress.org/Hardening_WordPress)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:17:31.597

这似乎是目录权限问题，因为您正在尝试使用 http 获取文件。

将目录权限设置为 755 或 777 怎么样？

# php - 使用 codeigniter 访问存储到文件中的计数器

> ID：13780817
> 
> 赞同：1
> 
> 时间：2012-12-08T19:00:31.900
> 
> 标签：php, codeigniter, file-io

嗨，我想知道如何做一个简单的访问计数器，将信息存储到文件中，格式可能类似于：日期 | # 访问，这只是一个 POC，我在这里尝试做的没什么复杂的，我只是想使用这个框架。

我试图使用[文件助手](http://ellislab.com/codeigniter/user-guide/helpers/file_helper.html)和[字符串助手](http://ellislab.com/codeigniter/user-guide/helpers/string_helper.html)来读取文件，然后减去日期或拆分内容并使用循环来迭代和更新当前日期

这是到目前为止的代码......

命名空间库；

```
class VisitCounter {

    function __construct() {
        $this->load->library('file');
        $this->load->helper('string');
    }

    function trackVisit(){
        $file= read_file('./visits.txt');

        if ( ! write_file('./visits.txt', $file)){
            echo 'Unable to write the file';
        }
    }
} 
```

任何想法，我需要知道如何拆分字符串，或者是否有人有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:14:13.240

我为此创建了一个模型：

```
class Count_model extends CI_Model{

    function __construct(){
        parent::__construct();
    }

    function increment(){
        $this->db->set('total', 'total+1', FALSE);
        $this->db->update('count');
    }

    function get_total(){
        $query = $this->db->get('count');
        if($query->num_rows()>0){
            $row = $query->row();
            return str_pad($row->total, 6 , "0", STR_PAD_LEFT);
        } else {
            return FALSE;
        }
    }

} 
```

继承人的结构：

```
CREATE TABLE IF NOT EXISTS `count` (
  `total` int(10) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`total`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:13:25.910

我认为最简单的解决方案是使用数据库。

无论如何，如果要写入文本文件，可以使用[序列化](http://be1.php.net/manual/en/function.serialize.php)将数组转换为可以保存到文件中的字符串，并使用反[序列化](http://be1.php.net/manual/en/function.unserialize.php)将字符串转换回数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-17T05:14:20.737

这是对我有用的代码：

```
function increment($id){
    $this->db->set('page_opens', 'page_opens+1', FALSE);
    $this->db->where('id', $id);
    $this->db->update('page');
} 
```

# python - gnupg解密python

> ID：13780830
> 
> 赞同：1
> 
> 时间：2012-12-08T19:01:45.143
> 
> 标签：python, python-3.x, pickle, gnupg

python和编程新手。目前正在编写一些 python 3 代码来保存我的银行帐户登录详细信息等。我已经通过打开和关闭文件并使用 gnupg 模块的 out='filename' 让它工作，但理想情况下我希望它写入记忆，因为如果可以避免的话，我不希望磁盘上的解密信息。

该文件由程序中的另一个函数创建，该函数腌制字典并将其加密为文件。但是，当我尝试用这个解密并打开它时：

```
def OpenDictionary():
    """ open the dictionary file """
    if os.path.isfile(SAVEFILE):
        f = open(SAVEFILE, 'rb')
        print('opening gpg file')
        buf = io.BytesIO()
        decrypted_data = gpg.decrypt_file(f, passphrase=PASSWORD)
        buf.write(decrypted_data.data)
        print ('ok: ', decrypted_data.ok)
        print ('status: ', decrypted_data.status)
        print ('stderr: ', decrypted_data.stderr)
        f.close()
        dictionary = pickle.load(buf)
        buf.close()
        return dictionary 
```

我得到：

```
Traceback (most recent call last):   File "C:\Users\Josh Harney\Dropbox\Python-pys\gpg-banks.py", line 179, in <module>
    main(sys.argv[1:])   File "C:\Users\Josh Harney\Dropbox\Python-pys\gpg-banks.py", line 173, in main
    dictionary = OpenDictionary()   File "C:\Users\Josh Harney\Dropbox\Python-pys\gpg-banks.py", line 87, in OpenDictionary
    dictionary = pickle.load(buf) EOFError 
```

我的 Linux 机器上的结果相同。我已经尝试了很多东西来完成这项工作，到目前为止还没有运气。谁能建议一个更好的方法来做到这一点？基本上我需要让 gpg.decrypt_file 输出到缓冲区或变量，然后 pickle.load 将其读回字典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:51:38.100

```
def OpenDictionary():
""" open the dictionary file """
try:
    if os.path.isfile(SAVEFILE):
        f = open(SAVEFILE, 'r')
        enc_data = f.read()
        print('opening gpg file')
        decrypted_data = gpg.decrypt(enc_data, passphrase=PASSWORD)
        print ('ok: ', decrypted_data.ok)
        print ('status: ', decrypted_data.status)
        print ('stderr: ', decrypted_data.stderr)
        f.close()
        dictionary = pickle.loads(decrypted_data.data)
        return dictionary
except Exception as e:
    print('Something Snaggy happened in the call OpenDictionary(), it looks like: ', e)

def SaveDictionary(dictionary):
    savestr = pickle.dumps(dictionary)
    status = gpg.encrypt(savestr, recipients=['my@email'])
    if status.ok == True:
        print('scrap buffer')
        f = open(SAVEFILE, 'w')
        f.write(str(status))
        f.close()
    else:
        print('Something went wrong with the save!!!')

    print ('ok: ', status.ok)
    print ('status: ', status.status)
    print ('stderr: ', status.stderr) 
```

感谢@senderle

# javascript - 在点击文本的同时打开 js 文件

> ID：13780831
> 
> 赞同：0
> 
> 时间：2012-12-08T19:01:49.840
> 
> 标签：javascript, execute

我有问题。我需要在单击文本时打开 js 文件。

我有：

```
<script src="http://www.domain.com/file.js" type="text/javascript"></script> 
```

当我单击出现的图像时，js 脚本被执行并被重定向到`http://www.domain.com/`.

所以

单击 js -> 执行的 js 脚本 -> 重定向到 url（在 js 文件中编写脚本以使其生成）

* * *

**现在我想让它想在没有图像的情况下只用文字来做**

所以

单击文本-> 从执行的 js 脚本`http://www.domain.com/file.js`-> 重定向。

* * *

我试着这样做：

```
<a href="http://www.domain.com/file.js">text</a> 
```

但它不能正常工作：

点击文本->重定向到`http://www.domain.com/file.js`地址->点击执行js->重定向

* * *

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:12:20.607

使用 jQuery

```
<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">
    <html xmlns=\"http://www.w3.org/1999/xhtml\">
    <head>
 <title>YOUR_SITE</title>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<a id='test' href="#">text</a>

<script>
$(document).ready(function() {

$('#test').live('click', function() 
{
     $.getScript('your_script_file.js', function() {
alert('Load was performed.');
     });

}); 

}); 
```

jquery [http://jquery.com/的链接](http://jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:06:03.040

如果我理解正确，您希望在用户单击某些文本时执行一些 JavaScript。

将 JS 包装在一个函数中，在我的示例中我将调用它`doSomething()`。
JS：

```
function doSomething() {
    // your JS (this can be in another file too)
} 
```

HTML：

```
<span onclick="doSomething()">text</span> 
```

或者：

```
<a href="#" onclick="doSomething">text</a> 
```

# android - 在 Android 中使用 Facebook API 发布文本状态 - 最简单的方法

> ID：13780833
> 
> 赞同：-1
> 
> 时间：2012-12-08T19:02:07.937
> 
> 标签：android, facebook-android-sdk

我一直在寻找很多方法来做到这一点。但似乎没有什么对我有用。有人可以帮忙吗？

这是我的 Facebook 状态帖子的图像按钮：

```
<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/hoributtons"
    android:layout_alignTop="@+id/imageButton2"
    android:background="#00000000"
    android:contentDescription="@string/facebook"
    android:onClick="shareOnFacebook"
    android:src="@drawable/facebookbutton" /> 
```

这是我的 mainactivity.java 文件的对应部分：

```
public class MainActivity extends FacebookActivity {

    private static final String APP_ID = "xxxxxxxxxxxxx";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

public void shareOnFacebook(View v) {
        //mfacebook = new Facebook("xxxxxxxxxxxxx");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

有人可以指出正确的方向吗？:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T09:49:15.193

假设您想在自己的墙上发帖（因为问题不清楚），这应该适合您。

```
public class MainActivity extends Activity {
        private static final String APP_ID = "xxxxxxxxxxxxx";
        private Facebook mFacebook;
        private AsyncFacebookRunner mAsyncRunner;
        private EditText yourEditText;
        private String toShare;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            mFacebook = new Facebook();
            mAsyncRunner = new AsyncFacebookRunner(mFacebook);
            SessionEvents.addAuthListener(new SampleAuthListener());
            SessionEvents.addLogoutListener(new SampleLogoutListener());
            yourEditText = (EditText) findViewById(R.id.<youreditTextId>);
            toShare = yourEditText.getText().toString();
        }

        public void shareOnFacebook(View v) {
            Bundle params = new Bundle();
            params.putString("message", toShare);

            mAsyncRunner.request("me/feed", params, "POST", new RequestListener() {
                public void onMalformedURLException(MalformedURLException e) {}
                public void onIOException(IOException e) {}
                public void onFileNotFoundException(FileNotFoundException e) {}
                public void onFacebookError(FacebookError e) {}
                public void onComplete(String response) {
            }
        }); 

        Toast.makeText(MainActivity.this, "Posting to your Wall", Toast.LENGTH_SHORT).show();  

          }

     } 
```

有关将图片发布到墙上的详细信息，[Facebook](https://developers.facebook.com/blog/post/526/)有一个很好的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T15:56:28.837

使用您的android应用程序成功登录的用户墙上发布消息的最简单方法是（我的工作代码）_

```
public class AndroidFacebookWallPost extends Activity {

// Your Facebook APP ID:
private static String APP_ID = "your App ID here"; //

// Instance of Facebook Class:
private Facebook facebook;
private AsyncFacebookRunner mAsyncRunner;

// Your ImageButton that Post Message to Facebook Wall:
ImageButton btnPostToWall;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnPostToWall = (ImageButton) findViewById(R.id.imageButton1);// Your image button...

    facebook = new Facebook(APP_ID);
    mAsyncRunner = new AsyncFacebookRunner(facebook);
    // set listener for Post Message button
    btnPostToWall.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            postToWall();
        }
    });

}

/**
 * Method that Post a Text Status using Facebook API on user`s wall.
 */
public void postToWall() {
    // post on user's wall.
    facebook.dialog(this, "feed", new DialogListener() {

        @Override
        public void onFacebookError(FacebookError error) {
            Toast.makeText(AndroidFacebookWallPost.this, "Post fail "+error, Toast.LENGTH_LONG).show();
        }

        @Override
        public void onError(DialogError error) {
            Toast.makeText(AndroidFacebookWallPost.this, "Post fail due to "+error, Toast.LENGTH_LONG).show();
        }

        @Override
        public void onComplete(Bundle values) {
            Toast.makeText(AndroidFacebookWallPost.this, "Post success.", Toast.LENGTH_LONG).show();
        }

        @Override
        public void onCancel() {
            Toast.makeText(AndroidFacebookWallPost.this, "Cancle by user!", Toast.LENGTH_LONG).show();
        }
    });

}

} 
```

有关更多信息，请参阅[Android 版 Facebook SDK 入门](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T04:33:18.513

这是您可以捆绑销售的变量的详细信息 `Bundle params = new Bundle();`

```
params.putString("message", "This string will appear as the status message");
    params.putString("link", "This is the URL to go to");
    params.putString("name", "This will appear beside the picture");
    params.putString("caption", "This will appear under the title");
    params.putString("description", "This will appear under the caption");
    params.putString("picture", "This is the image to appear in the post"); 
```

并使用 AsyncFacebookRunner 将数据发布到 facebook ：

```
mAsyncRunner.request("me/feed", params, "POST", new RequestListener() {
            public void onMalformedURLException(MalformedURLException e) {}
            public void onIOException(IOException e) {}
            public void onFileNotFoundException(FileNotFoundException e) {}
            public void onFacebookError(FacebookError e) {}
            public void onComplete(String response) {
        }
    }); 
```

# web-applications - 如何使动态网站能够从鲜为人知的语言中获取输入？

> ID：13780836
> 
> 赞同：0
> 
> 时间：2012-12-08T19:02:33.387
> 
> 标签：web-applications, browser, unicode, encoding, web

Web 开发人员如何使动态网站能够从鲜为人知的语言的非拉丁 Unicode 字符中获取输入？是否可以添加代码以允许此类功能，或者我是否必须为主要浏览器开发自定义插件？针对 Web 开发包（如（ASP.Net、php...））存在哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T19:34:38.497

您应该对处理字符串/文本的服务器的每个部分使用 unicode 编码（例如 UTF-8）。可能涉及多个应用程序和连接，所有这些都需要单独配置。例如：

*   网络服务器：接受 unicode 参数，使用 unicode 字符集 ( `charset=utf-8`)提供内容
*   服务器端语言：使用 unicode 操作字符串。使用 unicode 编码打开文件流和数据库连接。
*   数据库：为字段内容设置了适当的编码。

# .htaccess - htaccess mod_rewrite 用于 Opencart 搜索页面 URL

> ID：13780840
> 
> 赞同：1
> 
> 时间：2012-12-08T19:03:25.877
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, opencart, seo

我在创建 htaccess mod_rewrite 规则时遇到了一些困难，该规则将采用以下 URL：

[http://www.mydomain.com/index.php?route=product/search&filter_name=SEARCH%20CRITERIA](http://www.mydomain.com/index.php?route=product/search&filter_name=SEARCH%20CRITERIA)

并使其更像以下内容：

[http://www.mydomain.com/search/SEARCH-CRITERIA](http://www.mydomain.com/search/SEARCH-CRITERIA)

甚至

[http://www.mydomain.com/search?filter_name=SEARCH%20CRITERIA](http://www.mydomain.com/search?filter_name=SEARCH%20CRITERIA)

我尝试过的一切似乎都破坏了 Opencart 框架自动生成的对 SEO 友好的 URL。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:34:25.523

在您的`.htaccess`文件中，将规则直接放在用于重写 sitemap.xml 和 googlebase.xml 的行之后以及最后一条一般规则之前。

规则可能如下所示：

```
RewriteRule ^search\/(.*)$ index.php?route=product/search&filter_name=$1 
```

- 没有测试它，这只是一个猜测。

还向我们展示您尝试过的内容将不胜感激。

# ruby-on-rails - 加快 Rails 开发部署

> ID：13780841
> 
> 赞同：0
> 
> 时间：2012-12-08T19:03:33.200
> 
> 标签：ruby-on-rails, deployment

我有一个 Rails 应用程序，在开始之前需要 redis、mongod 和 postgres `rails s`。我不喜欢在我的终端上打开几个选项卡并一个一个地打开这些服务。有没有办法用一个命令/脚本运行所有东西？是否有特定的宝石可能对此有所帮助？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:19:08.037

@Tres 提到了一种使用[工头 gem](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)的方法。如果您使用的是[rvm](https://rvm.io/) ，您可以在项目中使用[.rvmrc](https://rvm.io/workflow/rvmrc/)文件。在那里你可以简单地定义一些 shell 命令，比如

```
mongod --port 23017
postgresql start 
```

之类的...

# postgresql - PostgreSQL 通过 2 个父/子表递归

> ID：13780843
> 
> 赞同：6
> 
> 时间：2012-12-08T19:03:47.320
> 
> 标签：postgresql, common-table-expression, recursive-query

我想为树木育种项目创建一个线性祖先列表。父母是雄性/雌性对，不能有血缘关系（没有近亲繁殖），因此跟踪和可视化这些谱系很重要......

下面是使用 Postgresql 9.1 的测试表/数据：

```
DROP TABLE if exists family CASCADE;
DROP TABLE if exists plant CASCADE;

CREATE TABLE family (   
  id serial,
  family_key VARCHAR(20) UNIQUE,
  female_plant_id INTEGER NOT NULL DEFAULT 1,  
  male_plant_id INTEGER NOT NULL DEFAULT 1,   
  filial_n INTEGER NOT NULL DEFAULT -1,  -- eg 0,1,2...  Which would represent None, F1, F2... 
  CONSTRAINT family_pk PRIMARY KEY (id)
);

CREATE TABLE plant ( 
  id serial,
  plant_key VARCHAR(20) UNIQUE,
  id_family INTEGER NOT NULL,  
  CONSTRAINT plant_pk PRIMARY KEY (id),
  CONSTRAINT plant_id_family_fk FOREIGN KEY(id_family) REFERENCES family(id) -- temp may need to remove constraint...
);

-- FAMILY Table DATA:
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (1,'NA',1,1,1); -- Default place holder record
-- Root level Alba families
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (2,'family1AA',2,3,1);
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (3,'family2AA',4,5,1);
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (4,'family3AA',6,7,1);
-- F2 Hybrid Families
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (5,'family4AE',8,11,0); 
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (6,'family5AG',9,12,0);
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (7,'family6AT',10,13,0); 
-- F3 Double Hybrid family:
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (9,'family7AEAG',14,15,0);
-- F3 Tri-hybrid backcross family:
insert into family (id, family_key, female_plant_id, male_plant_id, filial_n) VALUES (10,'family8AEAGAT',17,16,0);

-- PLANT Table DATA:
-- Root level Alba Parents: 
insert into plant (id, plant_key,  id_family) VALUES (1,'NA',1);      -- Default place holder record
insert into plant (id, plant_key,  id_family) VALUES (2,'female1A',1); 
insert into plant (id, plant_key,  id_family) VALUES (3,'male1A',1);
insert into plant (id, plant_key,  id_family) VALUES (4,'female2A',1);
insert into plant (id, plant_key,  id_family) VALUES (5,'male2A',1);
insert into plant (id, plant_key,  id_family) VALUES (6,'female3A',1); 
insert into plant (id, plant_key,  id_family) VALUES (7,'male3A',1);
-- Female Alba progeny:
insert into plant (id, plant_key,  id_family) VALUES (8,'female4A',2);
insert into plant (id, plant_key,  id_family) VALUES (9,'female5A',3);
insert into plant (id, plant_key,  id_family) VALUES (10,'female6A',4);
-- Male Aspen Root level parents:
insert into plant (id, plant_key,  id_family) VALUES (11,'male1E',1); 
insert into plant (id, plant_key,  id_family) VALUES (12,'male1G',1);  
insert into plant (id, plant_key,  id_family) VALUES (13,'female1T',1);
-- F1 Hybrid progeny:
insert into plant (id, plant_key,  id_family) VALUES (14,'female1AE',5); 
insert into plant (id, plant_key,  id_family) VALUES (15,'male1AG',6);  
insert into plant (id, plant_key,  id_family) VALUES (16,'male1AT',7);
-- Hybrid progeny
insert into plant (id, plant_key,  id_family) VALUES (17,'female1AEAG',9);
-- Tri-hybrid backcross progeny:
insert into plant (id, plant_key,  id_family) VALUES (18,'female1AEAGAT',10);
insert into plant (id, plant_key,  id_family) VALUES (19,'female2AEAGAT',10); 
```

下面是我从[Postgres WITH Queries](http://www.postgresql.org/docs/9.2/static/queries-with.html)文档中得出的递归查询：

```
WITH RECURSIVE search_tree(
      family_key
    , female_plant
    , male_plant
    , depth
    , path
    , cycle
) AS (
    SELECT 
          f.family_key
        , pf.plant_key
        , pm.plant_key
        , 1
        , ARRAY[ROW(pf.plant_key, pm.plant_key)]
        , false
    FROM 
          family f
        , plant pf
        , plant pm
    WHERE 
        f.female_plant_id = pf.id
        AND f.male_plant_id = pm.id
        AND f.filial_n = 1 -- Include only F1 families (root level)
        AND f.id <> 1      -- omit the default first family record

    UNION ALL

    SELECT  
          f.family_key
        , pf.plant_key
        , pm.plant_key
        , st.depth + 1
        , path || ROW(pf.plant_key, pm.plant_key)
        , ROW(pf.plant_key, pm.plant_key) = ANY(path)
    FROM 
          family f
        , plant pf
        , plant pm
        , search_tree st
    WHERE 
        f.female_plant_id = pf.id
        AND f.male_plant_id = pm.id
        AND f.family_key = st.family_key
        AND pf.plant_key = st.female_plant
        AND pm.plant_key = st.male_plant
        AND f.filial_n <> 1  -- Include only non-F1 families (non-root levels)
        AND NOT cycle
)
SELECT * FROM search_tree; 
```

以下是所需的输出：

```
F1 family1AA=(female1A x male1A) > F2 family4AE=(female4A x male1E) > F3 family7AEAG=(female1AE x male1AG) > F4 family8AEAGAT=(female1AEAG x male1AT)  
F1 family2AA=(female2A x male2A) > F2 family5AG=(female5A x male1G) > F3 family7AEAG=(female1AE x male1AG) > F4 family8AEAGAT=(female1AEAG x male1AT) 
F1 family3AA=(female3A x male3A) > F2 family6AT=(female6A x female1T) > F3 family8AEAGAT=(female1AEAG x male1AT) 
```

上面的递归查询显示 3 行具有适当的 F1 父级，但路径不显示下游族/父级。我会很感激帮助使递归输出类似于上面列出的所需输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T15:16:52.170

我已经根据我的理解调整了查询​​，不一定是需要的:-)

查询从定义的三个给定族开始，`f.id != 1 AND f.filial_n = 1`并递归地扩展可用的子级。

在什么情况下只选择最后三场比赛是我无法理解的。也许对于每个起始家庭来说，最长的祖先链？

```
WITH RECURSIVE expanded_family AS (
    SELECT
        f.id,
        f.family_key,
        pf.id           pd_id,
        pf.plant_key    pf_key,
        pf.id_family    pf_family,
        pm.id           pm_id,
        pm.plant_key    pm_key,
        pm.id_family    pm_family,
        f.filial_n
    FROM family f
        JOIN plant pf ON f.female_plant_id = pf.id
        JOIN plant pm ON f.male_plant_id = pm.id
),
search_tree AS (
    SELECT
        f.*,
        1 depth,
        ARRAY[f.family_key::text] path
    FROM expanded_family f
    WHERE
        f.id != 1
        AND f.filial_n = 1
    UNION ALL
    SELECT
        f.*,
        depth + 1,
        path || f.family_key::text
    FROM search_tree st
        JOIN expanded_family f
            ON f.pf_family = st.id
            OR f.pm_family = st.id
    WHERE
        f.id <> 1
)
SELECT
    family_key,
    depth,
    path
FROM search_tree; 
```

结果是：

```
 family_key   | depth |                      path                       
---------------+-------+-------------------------------------------------
 family1AA     |     1 | {family1AA}
 family2AA     |     1 | {family2AA}
 family3AA     |     1 | {family3AA}
 family4AE     |     2 | {family1AA,family4AE}
 family5AG     |     2 | {family2AA,family5AG}
 family6AT     |     2 | {family3AA,family6AT}
 family7AEAG   |     3 | {family1AA,family4AE,family7AEAG}
 family7AEAG   |     3 | {family2AA,family5AG,family7AEAG}
 family8AEAGAT |     3 | {family3AA,family6AT,family8AEAGAT}
 family8AEAGAT |     4 | {family1AA,family4AE,family7AEAG,family8AEAGAT}
 family8AEAGAT |     4 | {family2AA,family5AG,family7AEAG,family8AEAGAT} 
```

技术资料：

*   我已经删除了`cycle`这些东西，因为对于干净的数据，它不应该是必要的（恕我直言）。

*   `expanded_family`如果出现一些奇怪的性能问题，可以内联，但现在它使递归查询更具可读性。

**编辑**

查询的轻微修改可以过滤这些行，对于每个“根”族（即查询开始的那些），存在最长的路径。

我只显示 中的更改部分`search_tree`，因此您必须从上一节中复制头部：

```
-- ...
search_tree AS
(
    SELECT
        f.*,
        f.id            family_root,   -- remember where the row came from.
        1 depth,
        ARRAY[f.family_key::text] path
    FROM expanded_family f
    WHERE
        f.id != 1
        AND f.filial_n = 1
    UNION ALL
    SELECT
        f.*,
        st.family_root,    -- propagate the anchestor
        depth + 1,
        path || f.family_key::text
    FROM search_tree st
        JOIN expanded_family f
            ON f.pf_family = st.id
            OR f.pm_family = st.id
    WHERE
        f.id <> 1
)
SELECT
    family_key,
    path
FROM
(
    SELECT
        rank() over (partition by family_root order by depth desc),
        family_root,
        family_key,
        depth,
        path
    FROM search_tree
) AS ranked
WHERE rank = 1; 
```

结果是：

```
 family_key   |                      path                       
---------------+-------------------------------------------------
 family8AEAGAT | {family1AA,family4AE,family7AEAG,family8AEAGAT}
 family8AEAGAT | {family2AA,family5AG,family7AEAG,family8AEAGAT}
 family8AEAGAT | {family3AA,family6AT,family8AEAGAT}
(3 rows) 
```

**编辑2**

根据评论，我添加了`pretty_print`路径的一个版本：

```
WITH RECURSIVE expanded_family AS (
    SELECT
        f.id,
        pf.id_family    pf_family,
        pm.id_family    pm_family,
        f.filial_n,
        f.family_key || '=(' || pf.plant_key || ' x ' || pm.plant_key || ')' pretty_print
    FROM family f
        JOIN plant pf ON f.female_plant_id = pf.id
        JOIN plant pm ON f.male_plant_id = pm.id
),
search_tree AS
(
    SELECT
        f.id,
        f.id            family_root,
        1 depth,
        'F1 ' || f.pretty_print  path
    FROM expanded_family f
    WHERE
        f.id != 1
        AND f.filial_n = 1
    UNION ALL
    SELECT
        f.id,
        st.family_root,
        st.depth + 1,
        st.path || ' -> F' || st.depth+1 || ' ' || f.pretty_print
    FROM search_tree st
        JOIN expanded_family f
            ON f.pf_family = st.id
            OR f.pm_family = st.id
    WHERE
        f.id <> 1
)
SELECT
    path
FROM
(
    SELECT
        rank() over (partition by family_root order by depth desc),
        path
    FROM search_tree
) AS ranked
WHERE rank = 1; 
```

结果是

```
 path                                                                           
----------------------------------------------------------------------------------------------------------------------------------------------------------
 F1 family1AA=(female1A x male1A) -> F2 family4AE=(female4A x male1E) -> F3 family7AEAG=(female1AE x male1AG) -> F4 family8AEAGAT=(female1AEAG x male1AT)
 F1 family2AA=(female2A x male2A) -> F2 family5AG=(female5A x male1G) -> F3 family7AEAG=(female1AE x male1AG) -> F4 family8AEAGAT=(female1AEAG x male1AT)
 F1 family3AA=(female3A x male3A) -> F2 family6AT=(female6A x female1T) -> F3 family8AEAGAT=(female1AEAG x male1AT)
(3 rows) 
```

# c++ - 不使用虚函数的动机

> ID：13780845
> 
> 赞同：1
> 
> 时间：2012-12-08T19:04:11.970
> 
> 标签：c++, inheritance, virtual

我希望这个问题不是太含糊，但是来自 java，我想不出任何理由为什么我会在 C++ 中使用非虚拟函数。有没有一个很好的例子来展示 C++ 中非虚拟函数的好处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T19:17:08.683

虚函数具有与之相关的运行时成本。它们在运行时调度，因此调用速度较慢。它们类似于通过函数指针调用常规函数，其中地址是在运行时根据对象的实际类型确定的。这会产生开销。

C++ 设计决策之一一直是您不应该为不需要的东西付费。相比之下，Java 本身并不太关心这种低级优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:17:14.450

嗯，C++ 语言所依据的原则之一是，您不应该为不使用的东西付费。

虚函数调用比非虚函数调用更昂贵，因为在典型的实现中它通过两个（或三个）额外的间接级别来实现。虚拟调用不能被内联，这意味着由于我们必须调用一个完整的函数，费用可能会变得更高。

向一个类添加虚函数使其具有多态性，从而在该类的对象内部创建了一些不可见的内部结构。这些结构会产生额外的家庭开支，并排除对类对象的低级处理。

最后，将功能分为虚拟和非虚拟（即分为可覆盖和不可覆盖）是您的设计问题。无条件地使我们类中的所有函数在派生类中都可以重写是没有任何意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T19:27:38.557

的确，调用虚函数可能会更慢，但并不像大多数 C++ 程序员想象的那么慢。

现代 CPU 在分支预测方面已经相当出色。如果每次执行对虚拟函数的特定调用时，实际上是在调用相同的实现，CPU 会在计算地址之前找出并开始“猜测”（推测性地执行）调用。这通常可以完全隐藏虚拟呼叫的成本，使其与非虚拟呼叫一样快。（如果您对此表示怀疑，请在当前的处理器上亲自尝试。）

如果您没有调用相同的实现，那么您实际上是依赖于虚拟调度，因此无论如何您都不能直接用非虚拟函数替换它。

唯一常见的例外是内联函数，编译器可以在调用者和被调用者之间执行常量传播、CSE 等。显然，如果它在编译时不知道调用的目的地，它就无法做到这一点。

但根据经验，你总是想使用虚函数的直觉并没有那么糟糕。性能差异明显的时候很少见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T19:29:12.610

标准库中很少有成员函数是虚拟的。

我只能记住`what`标准异常的析构函数和函数。

截至 2012 年，拥有虚拟成员函数的唯一充分理由是支持在派生类中覆盖该成员函数，即**自定义点**，这通常可以通过其他方式实现（例如参数化、模板化）。

然而，我记得有一次，就像 15 年前一样，对微软的 MFC 类框架的设计感到非常沮丧。我希望每个成员函数都是虚拟的，以便能够覆盖功能并能够更轻松地调试事物，作为*不存在或质量非常低的文档的替代方案*。因此，我认为虚拟应该是默认设置，在其他软件中也是如此。

从那以后，我了解到 MFC 不具有代表性，也不能代表一般的 C++ 软件，因此特定于 MFC 的原因并不普遍适用。:-)

* * *

虚拟功能的效率成本几乎不存在。:-) 例如，参见国际标准化委员会[关于 C++ 性能的技术报告](http://www.stroustrup.com/performanceTR.pdf)。然而，为派生类提供这种自由是有实际成本的，因为自由意味着责任：任何派生类都必须确保覆盖成员函数尊重基类的约定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T19:34:54.547

C++ 既要像 C 一样快，又要支持 OO 和泛型编程（模板）。为了实现这两个目标，默认情况下不能初始化 C++ 成员函数，除非您将它们标记为虚拟，在这种情况下，虚拟表开始工作。因此，您可以在不需要时构建不涉及虚函数的类。

虽然不如非虚拟调用高效，但使用虚拟表的虚拟函数调用非常快。您可能会注意到只有在除了调用成员函数之外什么都不做的紧密循环中有所不同。所以Java方式——所有成员都是“虚拟的”——确实是更实用的IMO。

# java - 分布式事务mysql java连接器

> ID：13780853
> 
> 赞同：0
> 
> 时间：2012-12-08T19:04:42.660
> 
> 标签：java, mysql, distributed-transactions

我们有一个应用程序，我们需要从表中读取并更新其状态并将读取的值插入另一个远程数据库。在这种情况下，这两个表都是基于 mysql 的。如何确保两者都通过事务进行控制，因此如果插入失败，那么更新应该在本地机器上回滚？

# maven - Maven、JUnit、OpenEJB、ApplicationComposer 导致 java.lang.NoSuchMethodError

> ID：13780860
> 
> 赞同：0
> 
> 时间：2012-12-08T19:05:33.390
> 
> 标签：maven, jpa, junit, openejb

在执行测试时（测试看起来像这样：[http](http://tomee.apache.org/examples-trunk/application-composer/README.html) ://tomee.apache.org/examples-trunk/application-composer/README.html ），我总是得到：

```
java.lang.NoSuchMethodError: org.apache.openejb.jee.ManagedBean.<init>(Ljava/lang/String;Ljava/lang/String;Z)V
    at org.apache.openejb.junit.ApplicationComposer$DeployApplication.evaluate(ApplicationComposer.java:194)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

我尝试使用 Maven 来获得所有依赖项。以下是依赖项列表：

```
<dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0-4</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>openejb-jee</artifactId>
            <version>4.0.0-beta-1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-persistence-jdbc</artifactId>
            <version>2.2.0</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>openejb-junit</artifactId>
            <version>4.5.0</version>
        </dependency>
 <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0.2</version>
        </dependency>
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.4.2</version>
        </dependency> 
```

测试应该检查 EJB-DAO。它用于在数据库中写入实体并再次将其取出。这是测试代码：

```
 import com.dlrg.dao.impl.RadioMessageDAOImp;
import com.dlrg.entity.RadioMessage;
import org.apache.openejb.jee.EjbJar;
import org.apache.openejb.jee.StatefulBean;
import org.apache.openejb.jee.jpa.unit.PersistenceUnit;
import org.apache.openejb.junit.ApplicationComposer;
import org.apache.openejb.junit.Configuration;
import org.apache.openejb.junit.Module;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import javax.annotation.Resource;
import javax.ejb.EJB;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.transaction.UserTransaction;
import java.util.List;
import java.util.Properties;

@RunWith(ApplicationComposer.class)
public class RadioMessageDAOTest {

    @EJB
    private RadioMessageDAOImp radioMessageDAO;

    @Resource
    private UserTransaction userTransaction;

    @PersistenceContext
    private EntityManager entityManager;

    @Configuration
    public Properties config() throws Exception {
        Properties p = new Properties();
        p.put("MySQLtest", "new://Resource?type=DataSource");
        p.put("MySQLtest.JdbcDriver", "org.hsqldb.jdbcDriver");
        p.put("MySQLtest.JdbcUrl", "jdbc:hsqldb:file:data/hsqldb/hsqldb");
        return p;
    }

    @Module
    public PersistenceUnit persistence() {
        PersistenceUnit unit = new PersistenceUnit("radio-unit");
        unit.setJtaDataSource("MySQLtest");
        unit.setNonJtaDataSource("radioDatabaseUnmanaged");
        unit.getClazz().add(RadioMessage.class.getName());
        unit.setProperty("openjpa.jdbc.SynchronizeMappings", "buildSchema(ForeignKeys=true)");
        return unit;
    }

    @Module
    public EjbJar beans() {
        EjbJar ejbJar = new EjbJar("radio-beans");
        ejbJar.addEnterpriseBean(new StatefulBean(RadioMessageDAOImp.class));
        return ejbJar;
    }

    @Test
    public void test() throws Exception {

        userTransaction.begin();

        try {
            entityManager.persist(new RadioMessage());

            List<RadioMessage> list = radioMessageDAO.getAll();
            Assert.assertEquals(1, list.size());

            for (RadioMessage movie : list) {
                radioMessageDAO.delete(movie);
            }

            Assert.assertEquals(0, radioMessageDAO.getAll().size());

        } finally {
            userTransaction.commit();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:25:34.090

而是使用

org.apache.openejb openejb-jee 4.5.0

您正在混合 OpenEjb 的 beta 版本和 4.5.0 版本。那是行不通的。

# user-interface - 用于试验 OpenCV 的 GUI 发生了什么变化？

> ID：13780864
> 
> 赞同：2
> 
> 时间：2012-12-08T19:06:03.673
> 
> 标签：user-interface, opencv, image-processing, code-generation

曾经有一个用于试验 OpenCV 图像处理管道（包括代码生成）的 gui 工具包。我认为它以“h”开头。它叫什么，它发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T23:27:09.383

我想我过去看到了一个很好的工具来测试 opencv 函数，但对代码生成不太确定。

现在我找到了这个，它看起来不错：

[http://code.google.com/p/piaf/](http://code.google.com/p/piaf/)

这个看起来不错，但实验性的：

[http://siggiorn.com/videopipe/](http://siggiorn.com/videopipe/)

而这些，但看起来又穷又古老：

[http://code.google.com/p/cvpreprocessor/](http://code.google.com/p/cvpreprocessor/)

[http://code.google.com/p/open-rtvision/](http://code.google.com/p/open-rtvision/)

**编辑：**

这个专用于特征检测模块：

[http://introlab.github.io/find-object/](http://introlab.github.io/find-object/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:27:17.413

这称为 HighGUI。您可以在网络上找到许多文档。这是其中之一：[加载和显示图像](http://docs.opencv.org/doc/tutorials/introduction/display_image/display_image.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T23:43:06.837

我想你指的是[Harpia](http://s2i.das.ufsc.br/harpia/en/home.html)。如果您在 SW 存储库（Ubuntu 软件中心）搜索框中输入 OpenCV，它可以在 Ubuntu 应用程序中使用

# ruby-on-rails - Capybara 为什么不填写这些表单元素？

> ID：13780866
> 
> 赞同：3
> 
> 时间：2012-12-08T19:06:05.117
> 
> 标签：ruby-on-rails, capybara, integration-testing

我一直在尝试设置 Capybara 来测试表单，但我一直收到错误消息
`cannot fill in, no text field, text area or password field with id, name, or label 'Name' found`

以下是我的看法：

```
<%= form_for(@user) do |f| %>
  <%= f.label :name %>
  <%= f.text_field :name %>
  ...
  <%= f.submit "Create Account", class: "btn btn-large btn-primary" %>
<% end %> 
```

呈现以下html：

```
<label for="user_name">Name</label>
<input id="user_name" name="user[name]" size="30" type="text" /> 
```

因此，它似乎应该根据标签查找字段。

这是我的 user_pages_test.rb 文件的内容（我正在使用 Test::Unit 和 shoulda-context）：

```
context "sign up page" do
  should "add user to database when fields are filled in" do
    fill_in "Name", with: "Bubbles"
    ...
    click_button "Create Account"
  end
end 
```

这是我迄今为止尝试过的：

1）将调用更改`fill_in`为与 id 匹配`fill_in "user_name", with: "Bubbles"`
2）将调用更改`fill_in`为与[文档](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#fill_in-instance_method)`page.fill_in "Name", with: "Bubbles"`中的示例匹配 3）更改视图以手动添加 id （[此](https://stackoverflow.com/a/13165829/1543283)答案） 4）将调用更改为（以防万一这是路由的问题）
`"Name"``<%= f.text_field :name, id: "Name" %>`
`get sign_up_path``get "/sign_up"`

所有这些仍然给我同样的错误，这让我认为页面由于某种原因没有正确加载。但是，我在同一上下文中有一个不同的（通过）测试，它断言页面具有正确的标题，所以我知道页面确实被正确加载（在 中`setup`）。

基于此（并根据[此](https://stackoverflow.com/a/11356353/1543283)答案），问题似乎只是该`fill_in`方法在尝试访问字段之前没有等待页面加载。根据[这个](https://stackoverflow.com/a/12671639/1543283)建议，我`puts page.body`在测试中添加了该行，以查看 HTML 在尝试填写字段之前已完全加载，并得到以下输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> 
```

所以，我很确定这`fill_in`只是没有等待页面加载。然后我尝试了

5）`Capybara.default_wait_time`根据[这个](https://stackoverflow.com/a/11356353/1543283)答案改变，但这没有效果。我尝试`ActionDispatch::IntegrationTest`在 test_helper 文件（其中包括 Capybara）的类中以及测试本身中设置它。

然后我尝试添加`puts page.body`通过测试（在它断言正确标题之前和之后），我得到了相同的输出。然后，我找到[了这个](https://stackoverflow.com/a/1852563/1543283)答案，终于让控制台打印出页面的 HTML。我又尝试了一件让 Capybara 填写字段的方法：

6）将调用更改`fill_in`为 say `@response.fill_in`，因为`@response`似乎做了我认为`page`变量应该做的事情。

所以，我对此有两个问题：

1）`page`变量实际上指的是什么？我的应用程序的 doctype 声明是 just `<!DOCTYPE html>`，所以我不知道它从哪里得到旧的。

2) 为什么 Capybara 不能找到/填写这些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:19:51.500

您需要使用该`visit`方法正确设置页面对象。capybara[文档](https://github.com/jnicklas/capybara)表明默认情况下会访问“/”，如果您想访问其他页面，则需要进行显式调用。[了解一下和](https://stackoverflow.com/questions/11090038/rspec-and-capybara-difference-between-visit-and-get-methods-with-regards-to-th)[之间的区别`visit``get`](https://stackoverflow.com/questions/11090038/rspec-and-capybara-difference-between-visit-and-get-methods-with-regards-to-th)也可能会有所帮助。

# symfony - JMS\SecurityExtraBundle 抱怨 Fedora 18 下的权限错误

> ID：13780873
> 
> 赞同：0
> 
> 时间：2012-12-08T19:07:15.000
> 
> 标签：symfony, fedora, selinux

我刚刚将我的开发系统升级到 Fedora 18-Beta。就在这之后，我的 Symfony 2 项目停止工作，指出 JMSSecurityExtraBundle 正在尝试运行 grep，它以非成功状态代码 2 退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:07:15.000

似乎 Fedora 的家伙已经更改了 httpd 包的一些上下文默认值。根据`/etc/selinux/targeted/contexts/files/file_contexts`：

```
/var/www(/.*)?/logs(/.*)?   system_u:object_r:httpd_log_t:s0 
```

他们更改了 . 下调用的任何目录中所有文件的默认`logs`上下文`/var/www`。由于某些供应商目录包含`.git`dirs，最终包含一个名为 的目录`logs`，因此它们将自动标记为`httpd_log_t`.

更改此问题的解决方案是发出以下命令：

```
# semanage fcontext -a -t httpd_sys_content_t '/var/www(/.*)?/\.git/logs(/.*)?' 
```

# css - 几乎就在那里：使用 CSS 技巧实现完全平滑的梯形

> ID：13780875
> 
> 赞同：2
> 
> 时间：2012-12-08T19:07:38.060
> 
> 标签：css, mobile, responsive-design

我想创建一个所有角都变圆的梯形。我已经走了 2/4 的路，但无法让底角看起来不错。这是我到目前为止所拥有的：http: [//jsfiddle.net/w8rHk/2/](http://jsfiddle.net/w8rHk/2/)

色差仅供参考。最后会是同一个颜色。

**问题：**我如何完成这个并创建一个所有圆边都很好的梯形？

100 万点，如果你可以让它在不破坏屏幕尺寸的情况下放大和缩小。那是我还没有接近的忍者水平。

**问题 2：**有什么方法可以在这个坏男孩上设置渐变？

谢谢您的帮助！

# 代码：

```
.trapezoid{
vertical-align: middle;
position:relative;
border-bottom: 120px solid blue;
border-left: 200px solid transparent;
border-top-left-radius:30px;
border-top-right-radius:30px;
*border-bottom-right-radius:3px;
height: 0;
width: 150px;}

.trapezoid:after {
content:' ';
left:-14px;
top:-10px;
position:absolute;
background:red;
border-radius:40px 30px 0 0;
width:164px;
height:40px;
display:block;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:39:32.050

这是我的尝试哈哈

```
.trapezoid{
    position:relative;
    border-bottom: 100px solid blue;
    border-right: 12px solid transparent;
    border-left: 180px solid transparent;
    width: 122px;
}

.trapezoid:before{
    content:' ';
    left:-184px;
    top:98px;
    position:absolute;
    background:blue;
    border-radius:80px 20px 80px 80px;
    width:318px;
    height:20px;
}

.trapezoid:after {
    content:' ';
    left:-11px;
    top:-7px;
    position:absolute;
    background:blue;
    border-radius:150px 50px 90px 0px;
    width:133px;
    height:30px;
}

<div style="margin:30px">
    <div class="trapezoid">
    </div>
</div> 
```

[http://jsfiddle.net/Bzj3h/](http://jsfiddle.net/Bzj3h/)

# angularjs - AngularJS 自定义指令，你如何绑定和接受鼠标事件？

> ID：13780878
> 
> 赞同：2
> 
> 时间：2012-12-08T19:07:53.277
> 
> 标签：angularjs

我需要一个接受鼠标点击并且其状态取决于模型的自定义 DOM 元素：-

```
<card ng-repeat="card in cards" x="card.x"
    y="card.y" color="card.color" on-click="test_click('b')">
</card> 
```

我能够构建一个自定义指令，该指令通过其 DOM 属性绑定到控制器的范围变量，并使用它们来更改其视图。我通过允许指令继承其父范围来实现此目的：

```
app.directive('card', function ($timeout) {
    return {
        restrict:'E',
        link:function (scope, element, attrs) {
            element.addClass('card');

            element.click(function(){
                scope.onClick()
            });

            scope.$watch(attrs.x, function (x) {
                element.css('left', x + 'px');
            });
            scope.$watch(attrs.y, function (y) {
                element.css('top', y + 'px');
            });
            scope.$watch(attrs.color, function (color) {
                element.css('backgroundColor', color);
            });
        }
        /*
        ,scope:{
            x:'=',
            y:'=',
            color:'=',
            onClick: "&"
        }
        */
    };
}); 
```

通过创建一个隔离的范围并进行一些重新布线（通过在上面评论范围），我可以让鼠标单击事件传播到控制器。

但是，我无法让这两种行为同时发挥作用。

我想我需要将 x 变量绑定到属性值，这是我试图做的。但即使尝试了我能想到的每一种语法组合，我似乎也无法让它发挥作用。

这是完整的案例[jsfiddle](http://jsfiddle.net/5a2ec/8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:43:38.963

如果我了解您要做什么，您可以使用 ng-style 代替 $watch()es，并使用 ng-click 代替 element.click()：

```
<card ng-repeat="card in cards" ng-click="test_click('b')"
  ng-style="{left: card.x, top: card.y, 'background-color': card.color}" > 
```

[小提琴](http://jsfiddle.net/mrajcok/jgD26/)

当我们使用任何预先构建的 Angular 指令——例如，ngStyle、ngRepeat、ngClass、ngSwitch、ngShow——并将它们绑定到模型时，Angular 会为我们执行 watch()。

（我不明白为什么它只在我包含 jQuery 时才有效。我没有看到任何 jQuery 特定的方法被调用。）

**更新**：我想出了如何在没有 jQuery 的情况下让它工作——将 'px' 添加到 ng 样式：

```
<card ng-repeat="card in cards" ng-click="test_click('b')
  ng-style="{left: card.x + 'px', top: card.y + 'px', 'background-color': card.color}" "> 
```

[更新了小提琴](http://jsfiddle.net/mrajcok/jgD26/2/)。

我猜如果我们不使用“px”，jQuery 会更加宽容。

对于第二个小提琴，我还添加了一个“将卡片 #1 向下移动 200 像素”ng-click/hyperlink，以证明更改模型会导致 Angular 自动为我们更新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:20:18.097

啊啊啊，我的方法是正确的，但是观察者已经坏了。显然我不完全理解 $watch 的语义，因为我不完全理解解决方案。我只是通过打印范围并检测孤立范围案例中存在的正确变量来实现它。

无论如何，解决方案：我将 $watch 调用更改为：-

```
scope.$watch("x", function (x) {
    element.css('left', scope.x + 'px');
}); 
```

这跟踪了绑定变量的变化

# common-lisp - 如何使用 sbcl 隔离内存泄漏/丢失

> ID：13780879
> 
> 赞同：1
> 
> 时间：2012-12-08T19:07:56.613
> 
> 标签：common-lisp, sbcl

我的应用程序将给定的数据转换为树表示，它使用了太多的内存。因为它设法在崩溃之前将大约 200-300MB 的内存变成大约 3GB。

我现在想弄清楚泄漏在哪里，程序的哪一部分导致了泄漏。

*因此，我现在想知道在 common-lisp 中使用 sbcl 进行内存分析最常见和最有效的技术是什么？*

我已经看过了`(room)`，`(time)`但是它的输出很冗长，我需要的只是一个包装器，它会说“执行后整体内存使用量为 +1000Byte”，这可以解决问题，因为我只想知道内存在哪里用过的。另一个标准是它必须“即时”工作，因为应用程序很可能会崩溃，因为没有剩余的 RAM。

看起来像这样的东西：

```
(dotimes (i 4)
  (profiler-wrapper :messg "After execution memory ~a~%"  (execute-me i) ))

After execution memory +100Mb
After execution memory +100Mb
After execution memory +100Mb
After execution memory +100Mb
NIL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:49:57.693

试试确定性分析器，它在 Slime 中通过[`slime-profile*`命令](http://common-lisp.net/project/slime/doc/html/Profiling.html)或在[REPL](http://www.sbcl.org/manual/#Deterministic-Profiler)中可用。它为您进行包装，并且可以报告每个函数的 CPU 和内存使用情况，但会产生一些包装开销。

SBCL 还附带一个统计分析器，它的开销更少，如果需要分析长时间运行的流程并且关于问题区域的先验信息很少或不存在，则它会更有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T21:41:53.227

我编写了我自己的这样一个宏的版本，它很可能并不优雅，并且它确实会显着降低代码速度，`(sb-ext:gc :full t)`但它确实给出了执行给定主体后内存使用的一些观点。

```
(defparameter *last-profile-step* 0)

(defmacro profile-it ((name gc-on) &body body)
    `(let ((*last-profile-step* ,(if gc-on
                     `(progn
                    (sb-ext:gc :full t)
                    (sb-kernel::dynamic-usage))
                     `(sb-kernel::dynamic-usage))))
       (unwind-protect 
        (progn
          ,@body)
     (progn
       (FORMAT t "After execution of ~a : ~a byte~%" ,name
           (- ,(if gc-on
               `(progn
                  (sb-ext:gc :full t)
                  (sb-kernel::dynamic-usage))
               `(sb-kernel::dynamic-usage))
              *last-profile-step* )))))) 
```

# sql - 通过 SQL / PhpMyAdmin 为多篇文章添加签名

> ID：13780880
> 
> 赞同：0
> 
> 时间：2012-12-08T19:08:03.340
> 
> 标签：sql, phpmyadmin

我有一百多篇不同的文章，我想在每篇文章的末尾（不删除现有内容）添加一个相同且独特的评论：

```
<br/>signature blabla<br/> 
```

我想使用 PhpMyAdmin 和 SQl 在 introtext 列中的表 xxx_content 中执行此操作（在内容的末尾）所有文章都来自不同的类别（catid=778,779,780）

代码应该是这样的：

```
INSERT INTO introtext FROM xxx_content(WHERE catid=778,779,780) THIS (<br/>signature blabla<br/>) at the end of the content 
```

这`<br/>signature blabla<br/>`将可以从文章编辑器中编辑。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:37:20.377

我理解它就像您实际上想要更新现有内容一样：

```
UPDATE yourTable 
SET yourTextColumn = CONCAT(yourTextColumn, '<br/>signature blabla<br/>') 
WHERE catid IN (778, 779, 780); 
```

# javascript - Javascript - 日期范围验证

> ID：13780881
> 
> 赞同：1
> 
> 时间：2012-12-08T19:08:24.630
> 
> 标签：javascript, date, range

我有一个表单用户可以输入任何日期，但我想设置一个日期范围验证。例如：从 2012 年 1 月 12 日到 2013 年 1 月 1 日，系统无法接受来自用户的任何不在该范围内的日期。我试过这个 javascript 代码，但它甚至没有给我任何警报当日期不在范围内时..

这是我的表格的一部分：

```
 echo "<tr><th bgcolor='FF6600'> Date <font size='4' color='red'>* </font></th>
        <td> <input type='date' name='v2' value=''   ></td></tr>";

echo "<tr><th bgcolor='FF6600'> Time <font size='4' color='red'>* </font></th>
        <td> <input type='time' name='v3' value=''   ></td></tr>";

        echo "<tr><th bgcolor='FF6600'> Place <font size='4' color='red'>* </font></th>
        <td> <input type='text' name='v4' value=''   ></td></tr>"; 
```

这是javascript代码

```
 <script language="javascript">

    function validation(form)
 {

 var v2 = document.getElementById('v2');
 var date = v2.value;
 if ( (v2 > new date('12/12/2012')) && 
    (v2 < new date('1/1/2013')) ){
    // date is in your valid range
     return true;
} else {
    // date is not in your valid range

    alert("date is not in valid range")
    return false;
}

}

    </script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T19:14:34.207

要比较日期，您应该使用 unix 时间戳，现在您从值中获得的第一个日期是一个字符串，您不能将它与日期对象进行比较？

确保您有 unix 时间的时间戳，然后比较它们：

```
function validation(form) {
    var v2 = document.getElementById('v2'),
      date = new Date(v2.value),
      d1   = date.getTime(),
      d2   = new Date('12/12/2012').getTime(),
      d3   = new Date('1/1/2013').getTime();

   if (d1 > d2 || d1 < d3) {
       return true;
   }else{
       alert("date is not in valid range")
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:57:44.943

您可以制作这样的功能：

```
function checkMyDateWithinRange(myDdate){
    var startDate = new Date(2012, 11, 1);
    var endDate = new Date(2012, 0, 1);     
    if (startDate < myDate && myDate < endDate) {
       return true; 
    }
   return false;
} 
```

并测试任何日期，例如调用此函数：

```
var inputDate= document.getElementById('tbDate'),
date = new Date(inputDate.value);
if(!checkMyDateWithinRange(date)){
    alert('Date is not in range!!!');
} 
```

这是[工作演示](http://jsfiddle.net/5GQfe/)

# ruby-on-rails - 第一人称写作时如何理解黄瓜测试指的是哪些用户？

> ID：13780883
> 
> 赞同：3
> 
> 时间：2012-12-08T19:08:32.623
> 
> 标签：ruby-on-rails, testing, cucumber, bdd

我正在尝试以第一人称编写我当前的应用程序黄瓜功能，例如：

```
Given I am logged in as a user
And Mark is a user
When I send him a friend request
Then he should have a friend request from me
And he should receive an email 
```

我正在努力正确编写步骤以确保我用“他”、“他”和“我”来引用正确的用户。

我可以处理：

```
When I send Mark a friend request 
```

通过使用：

```
When /^I send (.+) a friend request$/ do |user|
  @user = User.find_by_email(user.downcase + "@test.org")
  visit '/users/' + @user.id.to_s
  click_button "Add Friend"
end 
```

但宁愿能够使用“他”或“他”。

我正在考虑实现我应该在步骤“（。+）是用户”中真正分配@second_user或其他一些变量。

那是对的吗？

对此的任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:41:20.620

老实说，我认为这最终会带来更多的麻烦而不是它的价值。坐在这里试图想出一个解决方案，我想不出任何最终不会成为负担的事情，以防在未来场景中重新使用这些步骤定义，甚至是未来读者的心理负担试图弄清楚执行的流程。

我实际上*更喜欢*在每一步都使用名称而不是代词的明确性。以我的经验，特别是当实体之间的交互变得更加复杂时，为了遵循什么是正在发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:52:26.990

你需要在第二步赶上马克：

```
And Mark is a user 
```

这一步必须经过验证，即Mark必须存在。然后你可以在第三步推荐他。

如何在功能：

```
Given I am logged in as a user
And A user exists with name "Mark"
When I send him a friend request 
```

然后在`user_steps.rb`

```
Given /^I am logged in as a user$/ do
    pending #blah blah
end

Given /^A user exists with name "([^"]+)"$/ |username| do
    @user = User.find_by_email(username.downcase + "@test.org")
    @user.should be_true
end

When /^I send (\w+) a friend request$/ do |user|
    user = @user
    # visit blah blah
end 
```

# iphone - 如何将一组视频打包在多个目录中并在 iPhone 应用中播放？

> ID：13780884
> 
> 赞同：0
> 
> 时间：2012-12-08T19:08:39.063
> 
> 标签：iphone, ios, file-io, directory-structure, resourcebundle

我正在制作一个视频交付应用程序并在以下目录结构中发送一堆文件：

主页/第 1 周/第 1 天/123.mp4,abc.mp4,42343.mp4 主页/第 1 周/第 2 天/123.mp4,xyz.mp4

等我需要维护目录结构并播放相应的文件。注意：不同文件夹中有多个同名文件。

当前代码：我将 Home 文件夹拖入 xcode 到其他源文件夹中 > 该操作将文件复制到项目目录中并添加了引用。这是我为在家中第 1 周的第 1 天播放视频“abc”而编写的代码。

```
NSString* p = @"home/Week 1/Day 1/abc";

NSString* moviePath2 = [[NSBundle mainBundle] pathForResource:@"Home/Week 1/Day 1/abc" ofType:@"mp4"];
NSURL* movieURL2=[NSURL fileURLWithPath:moviePath2]; 
```

在这种情况下，我将 moviePath2 设为 Empty。

如果我运行此代码：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *docsDirectory = [NSSearchPathForDirectoriesInDomains(NSApplicationDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filePath = [docsDirectory stringByAppendingPathComponent:p];
    if(![fileManager fileExistsAtPath:filePath])
    {
        NSLog(@"exists");
    } 
```

它在控制台上打印存在。

您能否为此提供解决方案？我将目录结构与视频打包的方法是否正确？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:55:14.580

只需电影名称即可访问您的电影

```
NSURL* movieURL2=[NSURL fileURLWithPath: p]; 
```

或者您想从主包访问它，然后您必须将您的电影复制到该路径

```
[fileManager copyItemAtPath:moviePath2 toPath:filePath error:nil]; 
```

# c++ - 如果在多图中与其关联的向量为空，则删除该键

> ID：13780886
> 
> 赞同：0
> 
> 时间：2012-12-08T19:09:03.010
> 
> 标签：c++, stl

最终，如果我尝试删除与键关联的向量的所有元素，则会遇到分段错误。我的预期输出是新 b 新 c 新 d 新 a，但我得到新 b 新 c 新 d 分段错误。

```
 #include <iostream>
#include <vector>
#include <map>
#include <algorithm>

using namespace std;

int main ()
{
  map<char,vector<char> > mmap; //multimap 
  char mychar[] = { 'b','c', 'd'};
  vector<char> vec (mychar,mychar+3);
  vector<char> newvec; 

  mmap.insert (pair<char,vector<char> >('a',vec)); //insert to multimap
  mmap.insert (pair<char,vector<char> >('b',vector<char>()));
  mmap.insert (pair<char,vector<char> >('c',vector<char>()));
  mmap.insert (pair<char,vector<char> >('d',vector<char>()));

  vector<char>::iterator veciter; 
  map<char,vector<char> >::iterator mapiter;

  for(int i=0;i<6;i++)
  {  
  for ( mapiter = mmap.begin(); mapiter != mmap.end(); ++mapiter) 
  {
    //if elements associated with vector of a key are empty the store the key in a new vector
    if(mapiter->second.empty()) 
    {
      newvec.push_back (mapiter->first);
      mmap.erase(mapiter);
    }
    else
    {
       for (veciter = mapiter->second.begin(); veciter != mapiter->second.end(); ++veciter)
       {
         //if an element of a vector of key is found in new vector, erase the element
         if (find(newvec.begin(), newvec.end(), *veciter)!=newvec.end())   
         {
            mapiter->second.erase(veciter);
         }

       }
    }
    // to display values of new vector     
    for (unsigned i=0; i<newvec.size(); ++i)
    cout << "new " << newvec[i]<<' ';
    cout << '\n'; 
  }  
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:26:13.180

当您将迭代器传递给容器的擦除函数时，该迭代器将失效。你需要考虑到这一点。假设，由于某种原因，既不`std::remove`也不`std::remove_if`适合你的情况，标准的成语是这样的：

```
for (it = container.begin(); it != container.end(); /* no increment here */)
{
    if (should_be_removed(*it))
    {
        // possibly other operations involving the element we are about to remove
        it = container.erase(it);
    }
    else
    {
        // possibly other operations involving the element we chose not to remove
        ++it;
    }
} 
```

当我们擦除一个元素时，我们会捕获擦除操作的返回值，即下一个迭代器。否则，我们增加。请注意我为其他可能的操作留出空间的地方。如果没有其他操作，您应该可以只使用`std::remove`or `std::remove_if`，并结合容器的范围擦除功能（需要两个迭代器的功能）。

# iphone - 在 Xcode 中运行模拟器时，数据未与 MVC 模型一起显示

> ID：13780890
> 
> 赞同：0
> 
> 时间：2012-12-08T19:09:16.947
> 
> 标签：iphone, objective-c, model-view-controller, ios-simulator, xcode4.5

我一直致力于编写一个简单的程序，该程序将在 MVC 模型中显示用户信息。当所有数据都在 View Controller 上时，应用程序运行良好，但是，当尝试将数据移动到 Profile 模型时，应用程序将成功构建，但是不会显示任何信息。这是我现在正在使用的代码。

配置文件视图控制器标头：

```
DefaultProfileViewController.h

#import <UIKit/UIKit.h>
#import "Profile.h"

@interface DefaultProfileViewController : UIViewController

@property (strong, nonatomic) IBOutlet UILabel *fullNameLabel;
@property (nonatomic, strong) Profile *profile;

@end 
```

配置文件视图控制器实现

```
#import "DefaultProfileViewController.h"

@class Profile;

@interface DefaultProfileViewController ()

@end

@implementation DefaultProfileViewController

@synthesize profile = _profile;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
        // Do any additional setup after loading the view.

    _fullNameLabel.text = _profile.fullName;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

Profile 模型标头

```
#import <Foundation/Foundation.h>

@interface Profile : NSObject

@property (nonatomic, copy) NSString *fullName;

- (void)loadProfile:(NSString *)fullName;

@end 
```

和 Profile 模型实现

```
#import "Profile.h"

@implementation Profile

@synthesize fullName = _fullName;

- (void)loadProfile:(NSString *)fullName
{
    _fullName = @"Full Name";
}

@end 
```

如前所述，如果在控制器中使用 _fullName = @"Full Name" 部分，这没有问题，并且文本 Full Name 将显示在模拟器中。如果使用 Profile 模型，将构建应用程序，不会出现错误或警告，但不会显示任何信息。我确信我忽略了一些非常简单的东西，所以任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:05:34.247

您的代码示例声明了该属性`profile`，但您实际上没有设置配置文件。

请记住，Objective-C 2.0 中声明的属性只做**一件事**——即“在你背后”为你创建访问器方法。（在“过去”中，我们不得不手动编写访问器方法。费力；但是您非常擅长内存管理！）

在您的情况下，任何实例化的类都可能`DefaultProfileViewController`需要创建一个`Profile`对象并调用`setProfile`新`DefaultProfileViewController`实例。

像这样的东西：

```
// create Profile object
Profile *aProfile = [[Profile alloc] init];
[aProfile loadProfile:@"John Doe"];
DefaultProfileViewController *vc = [[DefaultProfileViewController alloc] initWithNibName:@"your nib name" bundle:nil];

// set the profile on your view controller
vc.profile = aProfile;

// add your view controller's view to the view hierarchy
// however you are doing that now... 
```

注意，假设为 ARC。

# perl - 在 Perl 中获取文件校验和的紧凑方法

> ID：13780892
> 
> 赞同：6
> 
> 时间：2012-12-08T19:09:38.627
> 
> 标签：perl, checksum

我正在寻找在 Perl 中获取文件校验和的方法，但不是通过执行系统命令`cksum`——我想在 Perl 本身中进行，因为脚本需要在 UNIX 和 Windows 之间移植。`cksum <FILENAME> | awk '{ print $1 }'`适用于 UNIX，但显然不适用于 Windows。我已经探索过[MD5](http://perldoc.perl.org/Digest/MD5.html)，但似乎获取文件句柄是必要的，而且通常它似乎不是一种非常紧凑的获取数据的方法（最好是单行）。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T19:14:05.403

以下是三种不同的方式，具体取决于您可用的模块：

```
use Digest::MD5 qw(md5_hex);

use File::Slurp;
print md5_hex(read_file("filename")), "\n";

use IO::All;
print md5_hex(io("filename")->all), "\n";

use IO::File;
print md5_hex(do { local $/; IO::File->new("filename")->getline }), "\n"; 
```

不完全是一条线，但非常接近。

替换`Digest::MD5`为您想要的任何哈希算法，例如 SHA1。

`IO::File`是核心，应该随处可用，但这是我个人最不喜欢的解决方案。无论如何，它有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-18T01:07:08.740

我无法在 Windows 中为我完成上述任何工作，我总是会得到一个不正确的 MD5。我怀疑它是由换行符的差异引起的，但是将文件转换为 DOS 或 unix 没有任何区别。具有相同文件的相同代码将在 linux 上给我正确的答案，而在 windows 中给我错误的答案。阅读文档，我终于找到了适用于 windows 和 linux 的东西：

```
use Digest::MD5;
open ($fh, '<myfile.txt');
binmode ($fh);
print Digest::MD5->new->addfile($fh)->hexdigest; 
```

我希望这可以帮助其他在 Windows 上遇到困难的人，我觉得这很奇怪，以至于我没有发现任何关于 Windows 问题的提及......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:40:08.367

这也有效：

```
use Digest::MD5 qw(md5_base64);
...
            open(HANDLE, "<", $dirItemPath);
            my $cksum = md5_base64(<HANDLE>);
            print "\nFile checksum = ".$cksum; 
```

# objective-c - 关闭窗口时视图不起作用 - 如何解决此问题？

> ID：13780895
> 
> 赞同：1
> 
> 时间：2012-12-08T19:09:56.957
> 
> 标签：objective-c, xcode, macos, cocoa, view

您好，我有一个视图，当按下按钮时显示，这工作正常，如果我打开第二个窗口，该视图工作正常，我可以返回前一个窗口并使用我使用 removeFromSuperview 的视图。

但是，我的问题是，如果我关闭最后一个打开的窗口，则视图不再适用于第一个窗口，但是如果我打开一个新窗口，它会再次适用于第一个窗口。

当其中一个窗口关闭时，如何让视图继续工作？

谢谢你的帮助！

这是我正在使用的代码：

```
-(IBAction) ShowView:(id) sender{
    [myView setHidden:FALSE];

    if ([myView isInFullScreenMode]){
        [myView exitFullScreenModeWithOptions:nil];

    }
    else{   
        [myView enterFullScreenMode:[[myView window] screen] withOptions:nil];

        for (NSView *view in [NSArray arrayWithArray:[myView subviews]]){
            [view removeFromSuperview];
            [myView addSubview:view];
        }
    }
} 
```

# ios - 并非所有 UITextField 都在调用所有委托方法

> ID：13780898
> 
> 赞同：1
> 
> 时间：2012-12-08T19:10:01.513
> 
> 标签：ios, delegates, uitextfield, xib, viewcontroller

我有一个包含多个视图的视图控制器 xib 文件。我正在构建一个向导类型的界面。我只是在视图之间做一个简单的淡入淡出，我已经在主界面上使用了导航控制器。我不想为这个向导使用一个。无论如何，在视图中，每个面板至少有一个按钮、某种输入字段（通常是 a `UITextField`）和一些硬编码在 a 中的帮助文本`UILabel`。

问题是并非所有`UITextField`对象都在调用`textFieldDidChange`委托中的方法（文件所有者 - 与 xib 关联的 .m 文件），但所有`UITextField`对象都在调用该`textFieldDidBeginEditing`方法。

对我来说毫无意义。我觉得我在设置屏幕的方式上一定遗漏了一些简单的东西，但如果我能弄明白的话，我会很高兴的。每个屏幕在属性表中看起来都相同（在 Xcode 的右侧），并且在 File's Owner 属性表中的所有内容都正确连接，在`IBOutlet`和`IBActions`.

这是一些正在发生的事情的照片......

想法？谢谢。

以下是重要部分的屏幕截图的链接。（作为一个新成员，很难用屏幕帽添加我需要的所有信息！）

![](../Images/c1a0a05a5742d3e785a8643f5c073627.png) ![](../Images/0cf98a8a6d83ec37bb94c1c4ea6459ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:53:12.693

这解决了。我是个傻瓜。:-)

我附上了我自己的通知者/观察者，并没有为最后几个 UITextField 对象这样做。很抱歉打扰大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:31:48.117

没有这样的方法`UITextFieldDelegate`

您可能会混淆`textViewDidChange`，这是 a 的委托方法`UITextView`，但它传递的`UITextView`是生成事件的方法，而不是`NSNotification`.

好像你想要`textField:shouldChangeCharactersInRange:replacementString:`的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:26:41.510

就我现在而言，没有带有 header 的委托方法`textFieldDidChange`。你已经创建了一个你自己的方法，它依赖于一个 NSNotification。确保所有`UITextField`s 都发送正确的通知。

# soundcloud - 在 SoundCloud 自定义播放器中获取当前曲目信息

> ID：13780899
> 
> 赞同：0
> 
> 时间：2012-12-08T19:10:12.777
> 
> 标签：soundcloud

我几乎完成了我的声音云流自定义播放器的创建，但我想要添加当前正在播放的歌曲的标题和艺术家的选项。

现在我有这个：[http ://hellkeepers.com/music/examples/sc-player-minimal.html](http://hellkeepers.com/music/examples/sc-player-minimal.html)

但我似乎无法弄清楚在哪里可以找到当前的曲目信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T11:38:02.887

要获取图像和标题，您可以使用以下代码：

```
//get element by id from your iframe
var widget = SC.Widget(document.getElementById('soundcloud_widget'));
widget.getCurrentSound(function(music){
    artwork_url = music.artwork_url.replace('-large', '-t200x200');
    $('#song1').css('background', 'url(\"'+artwork_url+'\") ');
    //write the title in a div with the id "title"
    document.getElementById('title').innerHTML = music.title;
}); 
```

通常，您最后会得到一个带有“-large”的链接，大小为100x100。如果你想要其他尺寸，你必须像我一样用“.replace”改变结尾。您可以在此处找到包含可用尺寸的列表：

[https://developers.soundcloud.com/docs/api/reference#tracks](https://developers.soundcloud.com/docs/api/reference#tracks)（我的尺寸 200x200 未列出但有效。也许每百像素有更多尺寸。）

和：

```
widget.getDuration(function(duration) {
    alert(duration);
} 
```

你有歌曲的长度（以毫秒为单位）

和：

```
widget.getPosition(function(position) {
    alert(position);
} 
```

您以毫秒为单位获得歌曲的实际位置。您必须运行一个循环才能获得每秒的实际时间。并且可能您必须将毫秒计算为秒和分钟。

迟到但比我的答案更好：D

# uml - 用例的类图

> ID：13780902
> 
> 赞同：0
> 
> 时间：2012-12-08T19:10:29.593
> 
> 标签：uml, class-diagram, use-case

我正在尝试为我的项目制作一个用例，但我在绘制用例时遇到了一些问题 他们是否有任何软件可以将类图转换为用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:15:00.973

可以使用这个软件视觉范式 [http://www.visual-paradigm.com/solution/freeumldesigntool/?src=google&kw=uml%20diagram%20software&mt=p&net=g&plc=&gclid=CJjz79jBi7QCFStgMgodcVEANw](http://www.visual-paradigm.com/solution/freeumldesigntool/?src=google&kw=uml%20diagram%20software&mt=p&net=g&plc=&gclid=CJjz79jBi7QCFStgMgodcVEANw)

或者您可以使用 MS visio [http://office.microsoft.com/en-ca/visio/http://office.microsoft.com/en-ca/visio/](http://office.microsoft.com/en-ca/visio/http://office.microsoft.com/en-ca/visio/)

或查看此[http://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools](http://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools)

# python - 是否可以 np.concatenate 内存映射文件？

> ID：13780907
> 
> 赞同：18
> 
> 时间：2012-12-08T19:11:44.747
> 
> 标签：python, arrays, numpy, memory-mapped-files

我用 np.save() 保存了几个 numpy 数组，它们放在一起非常大。

是否可以将它们全部加载为内存映射文件，然后在不将任何内容加载到内存的情况下将它们连接起来并切片？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-31T23:38:20.487

显然使用`numpy.concatenate`将数组加载到内存中。为避免这种情况，您可以轻松地`memmap`在新文件中创建一个第三数组，并从您希望连接的数组中读取值。以更有效的方式，您还可以将新阵列附加到磁盘上已经存在的文件中。

对于任何情况，您都必须为数组选择正确的顺序（行优先或列优先）。

以下示例说明了如何沿轴 0 和轴 1 连接。

* * *

1) 连接在一起`axis=0`

```
a = np.memmap('a.array', dtype='float64', mode='w+', shape=( 5000,1000)) # 38.1MB
a[:,:] = 111
b = np.memmap('b.array', dtype='float64', mode='w+', shape=(15000,1000)) # 114 MB
b[:,:] = 222 
```

`a`您可以定义第三个数组，该数组读取与要在模式（读取和追加）中连接的第一个数组（此处）相同的文件`r+`，但具有您想要在连接后实现的最终数组的形状，例如：

```
c = np.memmap('a.array', dtype='float64', mode='r+', shape=(20000,1000), order='C')
c[5000:,:] = b 
```

串联`axis=0`不需要通过`order='C'`，因为这已经是默认顺序。

* * *

2) 连接在一起`axis=1`

```
a = np.memmap('a.array', dtype='float64', mode='w+', shape=(5000,3000)) # 114 MB
a[:,:] = 111
b = np.memmap('b.array', dtype='float64', mode='w+', shape=(5000,1000)) # 38.1MB
b[:,:] = 222 
```

保存在磁盘上的数组实际上是展平的，因此，如果您在更改数组顺序和不更改数组顺序的情况下创建，则 in 中第二行的`c`第一个元素将转到in 中的第一个元素。但是您可以轻松避免这种传递（主要列）到：`mode=r+``shape=(5000,4000)``1000``a``c``order='F'``memmap`

```
c = np.memmap('a.array', dtype='float64', mode='r+',shape=(5000,4000), order='F')
c[:, 3000:] = b 
```

* * *

在这里，您有一个带有连接结果的更新文件“a.array”。您可以重复此过程以成对连接两个。

相关问题：

*   [在 python 和 numpy 中处理大数据，没有足够的内存，如何将部分结果保存在磁盘上？](https://stackoverflow.com/q/16149803/832621)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-26T00:59:24.980

也许是一个替代解决方案，但我也有一个多维数组，分布在我只想**读取**的多个文件中。我用[dask concatenation](https://docs.dask.org/en/latest/array-stack.html)解决了这个问题。

```
import numpy as np
import dask.array as da

a = np.memmap('a.array', dtype='float64', mode='r', shape=( 5000,1000))
b = np.memmap('b.array', dtype='float64', mode='r', shape=(15000,1000))

c = da.concatenate([a, b], axis=0) 
```

这样可以避免 hacky 的附加文件句柄。然后可以像任何 numpy 数组一样对 dask 数组进行切片和处理，并且在计算结果时调用`compute`.

请注意，有两个警告：

1.  不可能进行就地重新分配，例如`c[::2] = 0`不可能，因此在这些情况下需要创造性的解决方案。
2.  这也意味着无法再更新原始文件。要保存结果，`store`应使用 dask 方法。此方法可以再次接受一个`memmapped`数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T11:49:45.070

如果你使用`order='F'`，会导致另一个问题，当你下次加载文件时，它会退出一团糟，甚至通过`order='F`。所以我的解决方案如下，我已经测试了很多，它工作正常。

```
fp = your old memmap...
shape = fp.shape
data = your ndarray...
data_shape = data.shape
concat_shape = data_shape[:-1] + (data_shape[-1] + shape[-1],)
print('cancat shape:{}'.format(concat_shape))
new_fp = np.memmap(new_file_name, dtype='float32', mode='r+', shape=concat_shape)
if len(concat_shape) == 1:
    new_fp[:shape[0]] = fp[:]
    new_fp[shape[0]:] = data[:]
if len(concat_shape) == 2:
    new_fp[:, :shape[-1]] = fp[:]
    new_fp[:, shape[-1]:] = data[:]
elif len(concat_shape) == 3:
    new_fp[:, :, :shape[-1]] = fp[:]
    new_fp[:, :, shape[-1]:] = data[:]
fp = new_fp
fp.flush() 
```

# javascript - 无法通过 JavaScript 从页面标题更改 UILabel

> ID：13780912
> 
> 赞同：0
> 
> 时间：2012-12-08T19:12:40.963
> 
> 标签：javascript, iphone, uiwebview, uilabel, page-title

我正在尝试将 UILabel 更改`pageTitle`为 UIWebView 上显示的页面标题。我没有返回任何警告或错误，它只是没有改变。

**视图控制器.h**

```
@interface ViewController : UIViewController <UITextFieldDelegate, UIWebViewDelegate, UIActionSheetDelegate> {
    UIWebView *_webView;
    UILabel *_pageTitle;

}

@property (nonatomic, retain) IBOutlet UIWebView *webView;
@property (nonatomic, retain) IBOutlet UILabel *pageTitle;

@end 
```

**视图控制器.m**

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {

    _pageTitle.text = [_webView stringByEvaluatingJavaScriptFromString:@"document.title"];
} 
```

**IB截图**

![界面生成器](../Images/5a53ec1fb52b2cacf387ab135c689daf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:13:06.793

有几件事：

1.  尝试 self.pageTitle.text = [_webView ...];
2.  在委托回调方法中，将参数名称更改为 webView1 并尝试使用 webView1 javaScript ...
3.  确保您已设置 [webView.setDelegate:self]
4.  标签是否从 xib 文件连接到类

可能是以上任何一个原因

# .net - 为什么附加属性存储为类变量？

> ID：13780916
> 
> 赞同：1
> 
> 时间：2012-12-08T19:12:54.277
> 
> 标签：.net, wpf, attached-properties

例如，在 WPF 中，要设置椭圆的垂直位置，可以使用 方法 `Canvas.SetTop(ellipseObj, y)`。也就是说，位置存储在*类*Canvas 中，而*不是*存储在包含椭圆的*画布对象中！*

我想明白为什么！那么，*为什么*附加属性存储为类变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:45:37.687

WPF 的重点是，UI`Panels`决定其子元素的绘制位置。因此，控件本身对它们的位置没有发言权。在 UI 布局的度量传递中，仅考虑控件的大小。

在您的情况下，您正在使用`Canvas`作为示例，这是非常短视的。Canvas 只是为数不多的布局子控件的可能方法之一，并且只有它被设计为允许精确定位它的子元素。因此，能够为每个孩子设置 Top 和 Left 值是有意义的。需要注意的是，Canvas 是最不明智的 UI 布局方式。

但是在 中`Grid`，不可能有这样的事情。在这里，您设置了 which `Row`、`Column`what`RowSpan`和`ColSpan`should child 。在 中`DockPanel`，您有不同的方式来停靠子元素。

而其他面板喜欢`StackPanel`并且`WrapPanel`没有这样的选项。

要解决此问题，您有 2 个选项：

1.  保存每个元素中的所有内容。这将导致许多未使用的属性和缺乏可扩展性。如果有人想要实现他们自己的 Panel，它以不同的方式布局子元素并且需要为每个子元素设置其他类型的属性怎么办？
2.  将这些属性保存在容器本身中。这为您节省空间和扩展整个事物的选项。

此外，[附加属性](http://msdn.microsoft.com/en-us/library/ms749011.aspx)可用于许多其他方面，而不是面板布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:04:54.200

附加属性以这种方式实现，因此任何框架元素（例如 Line 或 TextBox）都可以与另一个对象（例如 Canvas 或 Grid）建立关系，而它对此一无所知。属性 like`Left`并且`Top`正确地属于容器控件，容器控件负责排列其子元素。

您可以将其视为[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)—— Canvas 容器能够有效地修改任何子元素的行为，而无需实际更改这些元素的结构。

以下是[关于附加属性的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms749011.aspx)如何解释它：

> 附加属性的一个目的是允许不同的子元素为在父元素中实际定义的属性指定唯一值。

# drag-and-drop - 在 WinRT 中的 Grid 内拖放自定义控件

> ID：13780919
> 
> 赞同：0
> 
> 时间：2012-12-08T19:13:19.397
> 
> 标签：drag-and-drop, grid, windows-runtime, custom-controls

在 Metro 风格的应用程序中，我定义了一个自定义控件并将它们的几个实例放置在一个 Grid 中。使用户能够将控件从网格的一个单元格拖放到另一个单元格的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:34:35.033

这取决于你想要达到的目标。从我的角度来看 - 最好的方法是实现一个行为，以便您可以在 UI 的不同位置重用它，并可能与其他人共享它。从您的角度来看 - 最好的方法可能是您执行自定义实现的最简单方法，该实现将绑定到承载您的网格的 Page/UserControl。

如果您询问如何进行拖放部分 - 您可以将自定义控件上的 ManipulationMode 设置为 TranslateX、TranslateY 并处理 ManipulationStarted 事件，您可以将控件移动到全屏或网格大小的弹出窗口并移动它在 ManipulationDelta 事件中通过更新 Margin、Canvas 或 RenderTransform 属性，然后最后在 ManipulationCompleted 上 - 将其放入符合您的条件的单元格中。

您将使用 Popup 来确保您的自定义控件被拖到其他任何东西上。

要计算 Grid 和 Popup 之间的位置，您可以使用 grid.TransformToVisual(popup).TranformPoint() 之类的东西。

您还可以做一些事情来突出显示控件在释放时将下降的网格中的候选目标单元格。

# javascript - 滑块没有填满 100% 的屏幕

> ID：13780920
> 
> 赞同：-1
> 
> 时间：2012-12-08T19:13:22.133
> 
> 标签：javascript, jquery, html, css, slider

因此，在我决定删除包含我的菜单的某个 .css 文件之后，由于我正在制作一个新菜单，因此在屏幕末端与我拥有的滑块之间存在这个空间/间隙，例如 5px 宽。我以前没有遇到过，所以我不知道在哪里看！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:13:55.083

添加`body { margin: 0px 0px 0px 0px; }`到我的 .css 样式表中，解决了问题！

# php - 如何防止：“文件不存在”被记录在 .htaccess ErrorDocuments 的 error_log 中？

> ID：13780922
> 
> 赞同：0
> 
> 时间：2012-12-08T19:13:31.380
> 
> 标签：php, linux, apache

目前我们正在为用户头像使用 .htaccess 规则，如果他们没有上传头像，则会出现 404 并显示默认头像图像。

然而，这种情况每天发生数千次，并且`error_log`几乎不断被写入。

.htaccess 规则位于`/avatar/`仅包含图像文件的目录中。

**PHP图像代码**

```
<img src="/avatar/<?=$userId?>.png" /> 
```

**图片目录中使用的 .htaccess 代码**

```
ErrorDocument 404 /unknown.gif 
```

有没有其他快速的方法可以阻止 404 错误的发生或什至被记录？

目录中关闭错误报告的`php.ini`文件会起作用吗？`/avatar/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:18:31.500

简单的。如果图像存在，则仅显示图像。

```
<?php

if(file_exists("/avatar/" . $userId . ".png")) {
    print('<img src="/avatar/' . $userId . '.png" />');
}
else {
    print('<img src="/avatar/unknown.gif" />');
}

?> 
```

# iphone - 触发 addSubview 方法

> ID：13780923
> 
> 赞同：0
> 
> 时间：2012-12-08T19:13:37.717
> 
> 标签：iphone, objective-c, ios, uiview, addsubview

我正在寻找一种方法 - 如何检测：我`UIView`作为子视图添加到其他视图以使其框架适应超级视图。

Fe我应该把我`UIView`的父母视图的底部（但我不知道哪个父母会......：|）

我能看到的唯一方法是覆盖父`addSubview`方法，但我无权访问它。

我想有像这样的委托方法：

```
- (void)viewDidAddedAsSubview:(UIView)parentView 
```

或者那样的

也许，有人知道如何做到这一点。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:18:25.657

如果您要添加的视图是自定义`UIView`类，则覆盖`willMoveToSuperview:`或`didMoveToSuperView`方法。考虑到这些在视图被移除时也会被调用。

如果您添加的视图不是自定义的，那么您可以在视图的属性`UIView`上添加观察者。`superview`

# html - 使用 CSS 获取图像的宽度和高度似乎是错误的

> ID：13780929
> 
> 赞同：0
> 
> 时间：2012-12-08T19:14:09.850
> 
> 标签：html, css

我不太擅长 CSS 设计，但我只是在为网站设计内容显示布局。我基本上想通过将图像放在容器 div 中来制作一条细线。并如下设置所有维度属性。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title></title>
    <style>
       #thinLineWrap{
            width: 510px; 
            height: 3px;
            background-color: #000000;
       }  
       #thinLineWrap img{
           width: 170px;
           height: 3px;
           background-color: #000000;
           margin-top: 0px;
           float:left
       }
    </style>
</head>
<body>
     <div id="thinLineWrap">
        <img src="images/thin_line.gif" border="0">
    </div>
</body>
</html> 
```

但是在 Chrome 检查中查看输出时，输出结果似乎无法达到预期的指定大小，如下面的快照所示。

![在此处输入图像描述](../Images/578dfa25ac1afdf9f9e7a48de1faf247.png)

您可能还注意到我的图像宽度和高度分别变为 171px 和 4px，这与样式表部分中的设置不同。我可能犯的任何错误？为什么图像元素变得比应有的大 1 个像素？任何建议将不胜感激。

**编辑：** 原始有问题的细线图像的副本在这里。不确定图像本身是否有任何问题。

[https://lh5.googleusercontent.com/-kDRsR493dZU/UMOXRBbty9I/AAAAAAAAAh8/g58GnqQZ3pk/s128/thin_line.gif](https://lh5.googleusercontent.com/-kDRsR493dZU/UMOXRBbty9I/AAAAAAAAAh8/g58GnqQZ3pk/s128/thin_line.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:23:23.353

您在 #thinlinewrap 中定义了一个 Img 以具有这些属性。

```
div#thinLineWrap{
   border:0px;
}

#thinlineWrap img{
   height:3px;
} 
```

可能是您正在寻找的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:29:35.043

我发现了。你的 img 从另一种风格继承了它的边框，尝试像这样覆盖它：

```
#thinLineWrap img{
           border:none;
           width: 170px;
           height: 3px;
           background-color: #000000;
           margin-top: 0px;
           float:left
       } 
```

# c++ - 如何从 Clang 获取 LLVM 类型？

> ID：13780931
> 
> 赞同：3
> 
> 时间：2012-12-08T19:14:10.443
> 
> 标签：c++, llvm, clang

我正在寻找使用 Clang 编写工具。细节相当无关紧要，但我想做的是从 Clang 获得一个 llvm 类型。例如，我想从 "printf" 到`llvm::Function*`，和 "size_t" 到 a `llvm::Type*`。但是我在 Clang 中找不到任何提供这些功能的功能。我决定我可以要求 Clang 修改名称，然后要求`llvm::Module*`提供数据 - 但我找不到`llvm::Module*`与 Clang 调用相对应的方法。

如何从 Clang 获取内部 LLVM 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T19:01:09.683

最终，代码生成 API 不是 Clang 的公共 API 的一部分。这是有充分理由的，因为它们很糟糕。

但是，您可以创建一个`clang::CodeGen::CodeGenModule`，您可以使用它来将给定的 TU 代码生成为提供的`llvm::Module`. 然后，您可以`getMangledName`使用`CodeGenModule`.

但是，不要尝试使用提供的函数将 a 转换`clang::QualType`为 an `llvm::Type*`- 它们已无法使用。我发现可靠地执行此转换的唯一可行策略是找到具有签名的函数，例如成员函数，然后在模块中查询该参数的类型，例如`this`. 但这是非常特定于 ABI 和令人讨厌的 hack。您还可以计算 Clang 为给定类型生成的 LLVM 类型名称并在模块中搜索它，但这并不总是成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:23:41.703

一般来说，你不能。clang 的内部结构也是分层制作的。所以，你不能简单地拿一块 AST 说“嘿，给我一个函数”。AST 在 IR 生成步骤模块中一次转换为 LLVM IR。通过这种方式，我们可以确保所有内容都已解析并且语义正确且完整。

因此，如果您真的需要所有这些东西，那么您需要在 IR 生成之后很晚才开始使用 clang，并尝试在那时对松散耦合的 AST 和 LLVM IR 进行操作。

# symfony - 在没有注释的 Doctrine 中生成 getter 和 setter

> ID：13780936
> 
> 赞同：2
> 
> 时间：2012-12-08T19:14:41.963
> 
> 标签：symfony, doctrine-orm

我正在使用 Symfony2 和 Doctrine，所以要创建 getter 和 setter 方法，我会这样做：

```
php app/console doctrine:generate:entities org/StoreBundle/Entity/Product 
```

这很好用，但我想生成不带注释的 getter 和 setter。我认为它们太明显和多余，例如：

```
 /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    { 
        return $this->name;
    } 
```

五行！有什么选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T21:35:39.827

查看 Doctrine GenerateEntitiesCommand 的源代码，看起来没有任何方法可以做到这一点：[https ://github.com/doctrine/DoctrineBundle/blob/master/Command/GenerateEntitiesDoctrineCommand.php](https://github.com/doctrine/DoctrineBundle/blob/master/Command/GenerateEntitiesDoctrineCommand.php)

但是，您为什么要删除评论？这不像 PHP 中有行数限制，就评论的性能影响而言，它对您的编译几乎没有影响（差异是如此之小，您无法在计算机上实际测量它）。

此外，如果您使用 PHPDoc 为您的代码生成文档，那么 @return 字符串比您想象的更有用，因为您会知道每个 getter 的返回类型（这并不总是很明显）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T21:30:20.733

[您可以使用Netbeans](http://netbeans.org/) IDE 而不是 Doctrine 命令行生成 getter/setter 。

# php - 如何在 PHP 中检测可用的数组槽？

> ID：13780937
> 
> 赞同：0
> 
> 时间：2012-12-08T19:14:53.547
> 
> 标签：php, arrays, math

这是一个奇怪的问题，因为我不知道该怎么称呼它！我有一个带有数字列表的数组。这些数字是自动检测的，所以我无法设置它们。

这些数字的范围为“ **001、002、003、004、005、006** ”或“ **001、003、004** ”。 *请注意，在第一个数字列表中，它们都上升 (1,2,3,4,5,6)，但在第二个数字列表中，它们的顺序较低 (1, 3, 4)。*

我的复杂问题是：如何检测第一个可用的数组条目？对于第一个，我想要“ **007** ”和第二个“ **002** ”。我到底如何检测到这一点并添加一个数组元素来填充插槽？？！

系统支持无限插槽，因此没有实际的插槽列表可供比较。

到目前为止，这是我的代码：

```
$currentunits = array("001", "003", "004", "006");
$currentunits = array_diff($currentunits, range("001", "999"));
echo "<pre>";
print_r($currentunits); 
```

在此先感谢您，希望我没有让您感到困惑！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T19:34:20.617

假设您的**001**是字符串`"001"`而不是数字`1`（等）：

```
function findNextSlot($array) {
    $counter = +$array[0];
    foreach ($array as $current) {
        if (sprintf("%03d", $counter) != $current) {
            return sprintf("%03d", $counter);
        }
        $counter++;
    }
    return sprintf("%03d", $counter);
}
echo findNextSlot(array("001", "002", "003", "004", "005", "006")); // "007"
echo findNextSlot(array("001", "003", "004")); // "002" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:29:17.770

如果数组不是很大，我可能会检测数组的最小和最大元素，创建一个包含完整范围的数组，然后将其与原始元素进行比较。

```
$array = [3,1,4];

sort($array);

$min = $array[0];
$max = end($array);

$comparison = range($min, $max);

$diff = array_diff($comparison, $array);

if ($diff) {
    var_dump(current($diff));
}
else {
    var_dump(count($array) + 1);
} 
```

结果

```
int(2) 
```

示例： [http ://codepad.viper-7.com/EIjI3I](http://codepad.viper-7.com/EIjI3I)

# php - Magento 单元测试如何模拟/加载/使用产品

> ID：13780941
> 
> 赞同：5
> 
> 时间：2012-12-08T19:15:13.673
> 
> 标签：php, unit-testing, magento, phpunit

我在magento模块中使用了一些非常基本的单元测试，并且不想使用magento的两个主要测试模块/框架中的任何一个。

我的问题虽然相对简单。在单元测试中，我如何加载产品以检查它是否具有特定属性并且该值不为空？

在我的测试中，我已经初始化了 Mage，但由于该模块可能用于不同的项目，因此我无法真正硬编码要加载的产品 ID。

那么，如何实现呢？

到目前为止，我能想到的最好的方法是加载一个完整的产品集合并遍历每个检查所需的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:52:29.717

您最好的选择是在事务中创建一个产品，然后在获得单元测试结果后将事务回滚。

至少我尝试了类似于你正在做的事情，结果是这样的：

```
try {
    $write = Mage::getSingleton('core/resource')->getConnection('core_write');
    $write->beginTransaction();

// 1\. create your product
// 2\. test it. 
// 3\. important: Throw an exception with the test results for example:
//               throw new Exception("Test <{$testName}> : {$result}"); 
// NOTE: Throwing the exception is important to end this with a rollback, always.

    $write->commit();
} catch (Exception $e) {
    mage::log(__METHOD__ . ':' . __LINE__ . ": {$e->getMessage()}");
    $write->rollback();
} 
```

祝你好运！

# vb.net - 显示过去条目的文本框

> ID：13780942
> 
> 赞同：2
> 
> 时间：2012-12-08T19:15:23.627
> 
> 标签：vb.net, textbox, visual-web-developer-2010

我无法使用 aspx.vb 后面的页面让文本框过去的条目消失（可以在 aspx 页面上执行）下面的示例

![例子](../Images/d865a8647ddb50699900b338acf74a97.png)

我都试过了

```
 txt.AutoCompleteType = AutoCompleteType.Disabled
        txt.ViewStateMode = UI.ViewStateMode.Disabled 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:19:58.497

将 autocomplete="off" 属性添加到文本框

```
<asp:TextBox Runat="server" ID="Textbox1" autocomplete="off"></asp:TextBox> 
```

或添加到 from 标签

```
<form id="Form1" method="post" runat="server" autocomplete="off"> 
```

使用后面的代码

```
Textbox1.Attributes.Add("autocomplete", "off"); 
```

# ruby-on-rails - ActiveAdmin 中的 gmap4rails：地图不出现

> ID：13780944
> 
> 赞同：4
> 
> 时间：2012-12-08T19:15:35.733
> 
> 标签：ruby-on-rails, activeadmin, gmaps4rails

尝试在我的 ActiveAdmin / Rails 应用程序中使用 gmaps4rails。为此，我在 Gemfile 中添加了以下内容：

```
gem 'gmaps4rails' 
```

并运行了一个“捆绑包”。我更新了 app/admin/device.rb 文件中的“显示”方法：

```
show do 
  attributes_table do
    row :name
  end

  # Get device location
  @markers = Location.all.to_gmaps4rails
  div do
    render "map"
  end
end 
```

在 app/views/admin/devices/_map.html.erb 我有以下代码：

```
<%= stylesheet_link_tag 'gmaps4rails' %>
<%= gmaps4rails(@markers) %>
<%= yield :scripts %> 
```

在 app/assets/javascripts/application.js 中：

```
//= require gmaps4rails/gmaps4rails.googlemaps
//= require gmaps4rails/gmaps4rails.base
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

在我的 app/models/location.rb 中：

```
class Location < ActiveRecord::Base
  acts_as_gmappable

  attr_accessible :latitude, :longitude

  def gmaps4rails_address
    "#{self.latitude}, #{self.longitude}" 
  end

  def location
    [:latitude, :longitude]
  end
end 
```

当我进入设备的显示页面时，地图不显示（全为空白）。有没有我错过的配置？

**更新**

我已经检查了 chrome 开发人员工具并注意到以下错误：

```
Uncaught SyntaxError: Unexpected token ; 
```

引用该行：

```
Gmaps.map.markers = ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:12:47.443

使用以下方法修复：

```
div do
  markers = Location.all.to_gmaps4rails
  render "map", { :markers => markers }
end 
```

和 ：

```
<%= stylesheet_link_tag 'gmaps4rails' %>
<%= gmaps({
        "map_options" => { "zoom" => 2, "auto_adjust" => false},
        "markers"     => { "data" => markers }
        })
%>
<%= yield :scripts %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:58:51.723

您必须在**/config/initializers/active_admin.rb 中加载 Javascript 文件；**搜索部分：

```
# To load a javascript file:
#   config.register_javascript 'my_javascript.js' 
```

另外，我认为您应该将 CSS 文件（如果没有出现）添加到同一个文件中。

请记住，ActiveAdmin 管理自己的 Javascript 文件，名为**active_admin.js**；您可以尝试在此 JS 中加载 Javascript 文件；前段时间我遇到了类似的问题，我只能在初始化程序中添加文件来解决它。

# java - 掷骰子的所有可能排列

> ID：13780947
> 
> 赞同：2
> 
> 时间：2012-12-08T19:15:39.913
> 
> 标签：java, math, permutation, variations

我想编写一个模拟以下内容的程序：我有 6 个骰子，每次都掷一些骰子。

当我不掷骰子时，我只是假设我掷骰子是 0。

我想列出我可以通过这种方式获得的所有可能的变化。几个例子：

1,2,4,6,0,1

3,5,1,0,0,4

6,6,4,2,0,0 等

关于如何做到这一点的任何想法？（我使用的是java，但当然我只对一般概念感兴趣。）

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:18:51.123

由于您特别要求*“仅一般概念”*，因此这里有两种一般方法：

*   使用 6 级嵌套 for 循环，只需对所有可能的滚动进行详尽的枚举`0-6`（更有效）
*   只需使用 1 个 for 循环生成 之间的所有数字`0-66666`，并丢弃任何包含`7, 8, 9`; 然后使用一些格式化的填充和逗号打印数字（如果您不关心小的效率差异，请查看更清晰的代码）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T19:27:37.430

您可以使用递归方法，跟踪深度：编辑，也许这种方法会更好：

```
class Main {
    public static void roll(String s, int depth) {
        if(depth == 0)
            System.out.println(s.substring(1));
        else
            for(int i = 0; i <= 6; i++)
                roll(s + "," + i, depth - 1);
    }
    public static void main(String[] args) {
        roll("", 6); //2nd parameter > 0
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T19:28:58.680

只是为了优雅起见，我会编写一个递归方法，通过 0-7 为给定索引调用循环，然后自己初始化下一个索引。

然后它可以初始化一个数组或 abritrary 大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-05T03:24:46.930

简单的 Python 实现。

这是你刚刚打印的时候。

```
def PrintAllPerms(n, str_):
    if (n == 0):
        print str_
    else:
        for i in ["1","2","3","4","5","6"]:
            str_ = str_ + i
            PrintAllPerms(n-1, str_)
            str_ = str_[:-1]

PrintAllPerms(2,"") 
```

这是您想要返回整个排列的时候。

```
def PrintAllPerms(n, arr, str_):
    if (n == 0):
        arr.append(str_)
        return arr
    else:
        for i in ["1","2","3","4","5","6"]:
            str_ = str_ + i
            arr = PrintAllPerms(n-1,arr,str_)
            str_ = str_[:-1]
        return arr

PrintAllPerms(2,[],"") 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-12-19T16:18:23.560

```
public class DiceTest {
    public static void main(String[] args) {
        int[] dice = {0, 1, 2, 3, 4, 5, 6 };
        for (int i : dice) {
            for (int j : dice) {
                System.out.println("Printing dice values : " + i + " " + j);
            }
        }
    }
} 
```

# c# - 没有 SQL Server 的 Visual Studio 2012 安装

> ID：13780948
> 
> 赞同：6
> 
> 时间：2012-12-08T19:15:49.560
> 
> 标签：c#, .net, visual-studio, visual-studio-2012

我有一个关于 Visual Studio Express 2012 for Desktop 的问题。它在我的 PC 上安装了许多“SQL Server (...)”项目。由于我在使用 c# 编程时不使用任何 SQL 服务器，我想知道我是否可以安全地卸载这些服务器（或者安装一个新的 vs 没有它们的副本）。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T19:18:29.963

是的，Visual Studio 不需要 SQL Server。如果你不使用它，就把它吹走——特别是如果你甚至不访问任何数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-29T15:13:08.687

在这里小心。Visual Studio 的 IntelliSense（非常重要的工具，在没有因其他原因损坏时必须具备..）将需要 Microsoft SQL Server Compact（VS 2012 的 4.0）才能正常运行。

至少不要卸载 Microsoft SQL Server Compact。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T04:33:39.750

如果你装的是 Professional 或更高版本，它还会安装 SQL Server Compact Edition，即 Windows CE 版本。那时你真的有两个实例，Express 和 Compact。

可能更好的做法是将这些服务设置为手动，这样当您打开计算机时它们不会自动启动。否则，别管他们。您很可能会在某个时候需要它们，并且到那时您可能不得不花费几个小时下载和执行安装周期。

# .net - WPF Grid不随窗口拉伸

> ID：13780951
> 
> 赞同：0
> 
> 时间：2012-12-08T19:16:24.050
> 
> 标签：.net, wpf, user-interface

我正在动态地绘制到我的 WPF 网格内的画布，但画布或网格都没有适当地拉伸。这是我的一些代码....

```
 <Window x:Class="WPFNimGame.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Game of Nim" Height="auto" Width="auto"  PreviewKeyDown="Window_PreviewKeyDown_1" Name="Window">
<Grid Name="Grid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.RowDefinitions>
        <RowDefinition Height="33"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Border BorderBrush="Black" BorderThickness="10" Grid.RowSpan="2"/>
    <!--<Grid.Background>--> 
        <!--<ImageBrush ImageSource=".\Properties\black-diamond-plate.bmp" -->
        <!-- </Grid.Background>-->
    <DockPanel VerticalAlignment="Top" Height="20" Width="{Binding ElementName=Window,Path=Width}" Grid.RowSpan="2" >
        <Menu IsMainMenu="True" Margin="0" >
            <MenuItem Name="File" Header="File" Click="File_Click_1">
                <MenuItem Name="NewGame" Header="New Game" />
            </MenuItem>
        </Menu>
    </DockPanel>
    <Canvas  Name="paintCanvas"  Width="{Binding ElementName=Grid,Path=ActualWidth}" Height="{Binding ElementName=Grid,Path=ActualHeight}" MouseLeftButtonDown="paintCanvas_MouseLeftButtonDown" Grid.Row="1" >
        <Border BorderBrush="Blue" BorderThickness="10" ></Border>
    </Canvas>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T07:34:18.653

请检查答案[尝试设置行高*](https://stackoverflow.com/questions/8641456/wpf-grid-is-not-stretching-vertically)

```
<Grid Name="gridMain" > 
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinition>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:05:49.237

如果宽度或高度 a`Grid`等于“NaN”，它们将根据其大小确定`Children`。问题是您已将大小设置`Children`为与网格大小相同。这将不起作用，结果将始终为 0。

子项的大小取决于其内容或子项。如果您希望它们具有确定的大小，则将高度和宽度设置为等于特定的双精度值。

# java - 如何在 Jersey 实现中应用 JBoss AOP？

> ID：13780960
> 
> 赞同：0
> 
> 时间：2012-12-08T19:17:04.500
> 
> 标签：java, jboss, jersey, aop

我正在尝试在 Java 服务器实现上应用面向方面的编程概念。我在 Eclipse EE 上创建了一个项目，并通过 Jersey 开发了一个简单的 REST API 服务器。然后，我搜索了一个可以独立使用的面向方面的编程框架，并找到了 JBoss AOP。

我将所有 jar 添加`jboss-aop-2.1.8.GA/lib`到类和构建路径中。然后，我创建了一个简单的`TestInterceptor`类，只打印出一个哑文本。然后在`WebContent/META-INF/`我下面放`jboss-aop.xml`

```
<aop>
    <bind pointcut="execution(* *->*(..))">
        <interceptor class="com.rest...TestInterceptor"/>
    </bind>
</aop> 
```

另外，我在运行参数中添加了以下内容：

```
-javaagent:/.../workspace/com.rest.aspect.todo/WebContent/WEB-INF/lib/jboss/jboss-aop.jar 
-Djboss.aop.path="/.../workspace/com.rest.aspect.todo/WebContent/META-INF/jboss-aop.xml" 
```

但是，项目无法编译并引发错误（检查[http://pastebin.com/TPM1e2pj](http://pastebin.com/TPM1e2pj)）。到目前为止，我所做的事情会遗漏或错误吗？

# c# - 定义一个使用动态值构造的名称的对象

> ID：13780967
> 
> 赞同：1
> 
> 时间：2012-12-08T19:17:54.193
> 
> 标签：c#, variables, for-loop

好的，我有这段代码：

```
int arrPanelsRequired = 4;
string airport;
int arrPanelsMade = 0;
for (; arrPanelsMade <= arrPanelsRequired; arrPanelsMade++)
{
    Panel arrPanelXXX = new Panel(); 
```

我需要`XXX`用 的值替换`arrPanelsMade`。我找到了几种在变量值之后命名对象的方法，但是，我无法在这里应用它们中的任何一个:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:22:39.973

我认为这通常不是一个好主意，更不用说在 C# 中了。我可以看到很多`arr`前缀，这导致我使用数组。我想你可能正在寻找这样的东西：

```
int arrPanelsRequired = 4;
Panel[] panels = new Panel[arrPanelsRequired];
for (int arrPanelsMade = 0; arrPanelsMade < arrPanelsRequired; arrPanelsMade++)
{
    panels[arrPanelsMade] = new Panel();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:21:32.130

您正在尝试做的是不好的做法。它在弱类型语言中传递，但在 C# 等强类型语言中，需要显式声明变量。这有助于编译器捕获可能由拼写错误或一般开发错误引起的错误。例如，如果您有一个变量`arrPanel089`，您/编译器如何知道它是否已被声明？当来自弱类型语言时，强类型似乎是一种约束，但它确实是一个很棒的工具，可以为开发人员省去很多麻烦。

如果您想创建一组面板，请将它们存储在数组/列表/等中并通过它们的索引访问它们。如果您想给它们一个键，请将它们存储在一个字典中，这样您就可以通过键访问值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T19:21:39.770

您应该将面板添加到列表或数组中，然后通过索引访问它们：

```
arrPanel = new Panel[arrPanelsRequired];
for( int idx = 0 ; idx < arrPanelsRequired ; idx++)
    arrPanel[idx] = new Panel(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T19:24:04.927

这里有几件事会引发危险信号。我会稍微偏离你的问题，因为我认为你可能在几个方面走错了路。

1.  去掉“arr”前缀，直接调用你的变量——除非你有充分的理由这样做，否则不要试图模仿[匈牙利符号。](https://stackoverflow.com/questions/111933/why-shouldnt-i-use-hungarian-notation)

2.  如果您不打算在循环头中执行初始化，请考虑使用`while`循环而不是循环。`for`

3.  现在回答你的问题。不，语言不是那样工作的。改用一个`List<Panel>`类。这将允许您动态添加更多面板，而无需预定义所需的数量，例如在数组中。

# razor - 在 Razor 视图中输入的 onclick 事件中注入模型字段

> ID：13780968
> 
> 赞同：1
> 
> 时间：2012-12-08T19:18:11.740
> 
> 标签：razor, asp.net-mvc-4

我的客户端脚本很粗糙，我刚开始使用 Razor。我无法找到执行以下操作的方法，我想在 onclick 确认消息中注入模型字段值：

```
@using (Html.BeginForm("Delete", "ManageLocations", new { id = @Model.Location.Id }))
                   { <input type="submit" onclick="return confirm('Are you sure you wish to delete @Model.Location.DisplayLocation ?');" value="Delete">} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:25:17.690

糟糕，愚蠢的错误……我将这个 BeginForm 嵌入到另一个中……这不起作用的原因是您不能将一个表单嵌套在另一个表单中。

# ruby - 如何：将 cvCanny 与 ruby -opencv 一起使用

> ID：13780969
> 
> 赞同：2
> 
> 时间：2012-12-08T19:18:16.557
> 
> 标签：ruby, opencv

我想知道如何将 cvCanny 与 ruby​​-opencv 一起使用。我找不到任何合适的文档。这就是我必须要做的……</p>

```
require "rubygems"
require "opencv"
include OpenCV

original_window = GUI::Window.new "original"
hough_window = GUI::Window.new "hough circles"

image = IplImage::load "stuff.jpg"
gray = image.canny(0.3, 0.8)

hough_window.show gray
GUI::wait_key 
```

**错误：**

```
$ ruby houghcircle.rb
houghcircle.rb:11:in `canny': /Users/someuser/Development/Workspaces/2012/Libs/OpenCV-2.4.3/modules/imgproc/src/canny.cpp:282: error: (-215) src.size == dst.size && src.depth() == CV_8U && dst.type() == CV_8U in function cvCanny (OpenCV::CvStsAssert)
    from houghcircle.rb:11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:24:17.037

```
error: (-215) src.size == dst.size && src.depth() == CV_8U && dst.type() == CV_8U in function cvCanny (OpenCV::CvStsAssert) 
```

`cvtColor`那是因为您应该使用with 参数将图像转换为灰度（单通道图像）`CV_BGR2GRAY`。Canny 只能应用于此类图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-26T00:51:14.200

受到stackoverflow.com 上的@ArtemStorozhuk 和github.com 上的@ser1zw 提供的解决方案的启发。
我在 Ruby 2.3、opencv 2.4.13 和 ruby​​-opencv 0.0.16 的环境中尝试了以下解决方案。

```
mat = OpenCV::CvMat.load("image.jpg") # load a image in 3ch    
gray = mat.BGR2GRAY  # same as cvCvtColor(mat, gray, CV_BGR2GRAY) 
```

参考：
1.@ArtemStorozhuk 提供的解决方案。
2\. [https://github.com/ruby-opencv/ruby-opencv/issues/9](https://github.com/ruby-opencv/ruby-opencv/issues/9)由@ser1zw 在github.com 提供。

# html - 页面滚动后在导航栏中呈现不同的字体粗细

> ID：13780977
> 
> 赞同：2
> 
> 时间：2012-12-08T19:18:48.343
> 
> 标签：html, fonts, twitter-bootstrap

希望有人可以帮我解决这个问题。我已经尝试了无数的事情，我似乎无法弄清楚这一点。

使用谷歌浏览器，这就是我所看到的。值得注意的部分是导航栏的图标： ![滚动到顶部](../Images/ba022cf3cf7312adef25d7395888eb57.png)

并滚动到底部：

![滚动到底部](../Images/9fea4aba26792f152841f5b212a2b941.png)

如您所见，字体粗细完全不同，仅受滚动影响。这种行为似乎只发生在 OSX 上的 Chrome 上，目前运行 23.0.1271.95（最新）

我试图强制字体上的重量，甚至 !important - 它会改变重量，但是一旦我滚动它就会无缘无故地降低重量。有关可能导致此问题的原因以及如何解决此问题以确保我的网站在任何地方都能正确呈现的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:21:49.607

很可能是某些原因导致浏览器在滚动文本后禁用亚像素字体抗锯齿。这可以是任何类型的 CSS 转换、透明度等。在 OSX 上，这将使文本看起来不那么粗体（有关此内容的更多信息，请参见此处：[Unwanted Bolding added to font in browsers](https://stackoverflow.com/questions/13260431/unwanted-bolding-added-to-font-in-browsers/13371737#13371737)）

解决方案是先发制人地禁用子像素字体抗锯齿。将此应用于导航栏的 CSS：

```
#navbar {
  -webkit-font-smoothing: antialiased;
} 
```

# emacs - emacs 中的语义找不到 fopen

> ID：13780997
> 
> 赞同：1
> 
> 时间：2012-12-08T19:21:29.727
> 
> 标签：emacs

当我在 C 源文件中键入“f”时，我的已安装语义的 emacs 将显示 25 个完成匹配，用于 fclose、fread 等函数（仅包括 stdio.h）......但不包括 fopen！为什么？另外，opendir 和 readdir 也有同样的问题，包括 sys/types.h 和 dirent.h。

PS 语义得到了我所有的同情，因为我个人阅读 glibc 头文件时显示为#ifnded 之类的可怕混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:12:04.703

'fopen' 对我来说很好。你有机会在 OS X 上工作吗？我记得那里有一些预处理器宏混淆了语义。否则，您寻求帮助的最佳机会是发布到 CEDET-devel 邮件列表，说明您正在使用的 CEDET 版本并发布显然无法解析的“fopen”函数的确切定义。