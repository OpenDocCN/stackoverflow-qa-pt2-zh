# StackOverflow 问答 13050000-13050999

# python - 将函数应用于可以返回多行的 pandas DataFrame

> ID：13050003
> 
> 赞同：19
> 
> 时间：2012-10-24T13:14:11.267
> 
> 标签：python, pandas, dataframe

我正在尝试转换 DataFrame，以便某些行将被复制给定次数。例如：

```
df = pd.DataFrame({'class': ['A', 'B', 'C'], 'count':[1,0,2]})

  class  count
0     A      1
1     B      0
2     C      2 
```

应转化为：

```
 class 
0     A   
1     C   
2     C 
```

这是带有计数功能的聚合的逆向。有没有一种简单的方法可以在 pandas 中实现它（不使用 for 循环或列表推导）？

一种可能性可能是允许`DataFrame.applymap`函数返回多行（类似于`apply`的方法`GroupBy`）。但是，我认为现在在熊猫中是不可能的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-24T15:25:40.213

您可以使用 groupby：

```
def f(group):
    row = group.irow(0)
    return DataFrame({'class': [row['class']] * row['count']})
df.groupby('class', group_keys=False).apply(f) 
```

所以你得到

```
In [25]: df.groupby('class', group_keys=False).apply(f)
Out[25]: 
  class
0     A
0     C
1     C 
```

您可以根据需要修复结果的索引

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-04T21:25:03.923

我知道这是一个老问题，但我无法让 Wes 的答案适用于数据框中的多个列，所以我让他的代码更通用一些。以为我会分享，以防其他人在这个问题上遇到同样的问题。

您基本上只需指定其中包含计数的列，然后您会得到一个扩展的数据框作为回报。

```
import pandas as pd
df = pd.DataFrame({'class 1': ['A','B','C','A'],
                   'class 2': [ 1,  2,  3,  1], 
                   'count':   [ 3,  3,  3,  1]})
print df,"\n"

def f(group, *args):
    row = group.irow(0)
    Dict = {}
    row_dict = row.to_dict()
    for item in row_dict: Dict[item] = [row[item]] * row[args[0]]
    return pd.DataFrame(Dict)

def ExpandRows(df,WeightsColumnName):
    df_expand = df.groupby(df.columns.tolist(), group_keys=False).apply(f,WeightsColumnName).reset_index(drop=True)
    return df_expand

df_expanded = ExpandRows(df,'count')
print df_expanded 
```

回报：

```
 class 1  class 2  count
0       A        1      3
1       B        2      3
2       C        3      3
3       A        1      1 

  class 1  class 2  count
0       A        1      1
1       A        1      3
2       A        1      3
3       A        1      3
4       B        2      3
5       B        2      3
6       B        2      3
7       C        3      3
8       C        3      3
9       C        3      3 
```

关于速度，我的基本 df 是 10 列 x 约 6k 行，当扩展为约 100,000 行时需要约 7 秒。在这种情况下，我不确定分组是必要的还是明智的，因为它会将所有列都分组，但是无论如何只有 7 秒。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-01T12:55:13.990

甚至还有一个更简单且显着更有效的解决方案。我不得不对大约 350 万行的表进行类似的修改，并且之前建议的解决方案非常慢。

更好的方法是使用numpy的*repeat*过程生成一个新索引，其中每个行索引根据其给定的计数重复多次，并使用*iloc*根据该索引选择原始表的行：

```
import pandas as pd
import numpy as np

df = pd.DataFrame({'class': ['A', 'B', 'C'], 'count': [1, 0, 2]})
spread_ixs = np.repeat(range(len(df)), df['count'])
spread_ixs 

array([0, 2, 2])

df.iloc[spread_ixs, :].drop(columns='count').reset_index(drop=True)

  class
0     A
1     C
2     C 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-29T19:16:40.563

这个问题很老了，答案并不反映熊猫的现代能力。您可以使用`iterrows`循环遍历每一行，然后使用 DataFrame 构造函数创建具有正确行数的新 DataFrame。最后，用于`pd.concat`将所有行连接在一起。

```
pd.concat([pd.DataFrame(data=[row], index=range(row['count'])) 
           for _, row in df.iterrows()], ignore_index=True)

  class  count
0     A      1
1     C      2
2     C      2 
```

这具有使用任何大小的 DataFrame 的好处。

# actionscript-3 - 基于时间的评分系统 NAN

> ID：13050005
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:14:16.293
> 
> 标签：actionscript-3, flash, timer

我在我的 Flash Quiz 游戏中创建了一个评分系统，您回答问题的速度越快，您获得的分数就越多。但目前，当我运行游戏时，我的追踪器显示“NAN”。谁能明白这是为什么？

```
var score:int = 0;
var count:int = 0;
var mTimer:Timer;
mTimer = new Timer(100, 70);

function processScore():void {   
    var count:int = mTimer.currentCount;
    var score:int = score +  (700 - (count * 10));
    trace("score registered");
}

trace(aUserAnswers[numLoops] + " " + returnedNumber);
if(aUserAnswers[numLoops] == returnedNumber){
    processScore();
} 
```

`returnedNumber`是单击按钮时，如果数字与数组中的数字匹配，则问题是正确的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:02:40.613

您正在重新声明`count`和`score`inside `processScore()`。这使它们成为函数的局部变量，与先前声明的同名变量无关。这意味着当函数完成并且之前的变量不变时，它们的值会丢失。我猜在某些时候你将某物除以其中之一，因为你总是被零除，所以你得到`NAN`.

# python - jinja2：包含文件中的块

> ID：13050009
> 
> 赞同：3
> 
> 时间：2012-10-24T13:14:25.423
> 
> 标签：python, templates, jinja2

> **可能重复：**
> [使用包含文件中的块作为 jinja2 中的父级](https://stackoverflow.com/questions/9624953/use-blocks-from-included-files-for-parent-in-jinja2)

1.  一个基本模板：

    ```
    {% include "include.html" %} 
    ```

2.  包含文件

    ```
    {% block somethingnew %}{% endblock somethingnew %} 
    ```

3.  一个模板

    ```
    {% extends "basictemplate.html" %}
    {% block somethingnew %} HEY LOOK AT ME {% endblock somethingnew %} 
    ```

3 不会从布局中渲染包含文件的块。我有一个更复杂的例子，例如我试图将我的主要布局分解为几个包含自己的块的包含文件，例如导航块或内容块，但是扩展该布局的模板不能将信息放入包含文件的块中。我可以理解为什么会这样，但是周围有吗？我的主要布局文件变得越来越大，我想减少成更易于管理的部分，每个部分都包含自己的块。如果可以的话，我该怎么做？

# java - 使用 Lucene 从非常大的文件中获取随机行

> ID：13050010
> 
> 赞同：0
> 
> 时间：2012-10-24T13:14:24.800
> 
> 标签：java, spring, postgresql, lucene

我有一个基于 Spring 的 Java webapp。我的问题是：

我有一个 34MB 和 270 万行的文件。行只是一个接一个的单词：

```
abc
abcdfg
xyz
etc 
```

我需要从这个文件中选择 15 个随机的唯一行，这些行并不以非常快的方式**彼此相邻。**我知道要搜索这么大的文件，我可以使用 Apache Lucene。你知道 Lucene 能不能帮我弄到这些随机线。或者，也许您有其他想法可以帮助我解决这个问题。

我真的很感激任何帮助

提前致谢

编辑：

或者也许只是把这个文件放入数据库[PostgreSQL]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:43:14.730

Lucene 不适合你。

相反，只需生成随机数（确保它们不相邻），然后从文本文件中读取这些行。

这是执行此操作的代码：

```
 public static void main(String[] args) throws IOException
  {
    BufferedReader reader = new BufferedReader(new FileReader(
        "MyFile.txt"));
    try
    {
      final int MAX_NUM = <ENTER-YOUR-MAX-NUMBER-OF-LINES>;
      Set<Integer> randomLines = new HashSet<Integer>();
      Random rnd = new Random(System.currentTimeMillis());
      for (int i = 0; i < 15; i++)
      {
        int aNum = rnd.nextInt(MAX_NUM);
        // to make sure no lines next to each other...
        if (!randomLines.contains(aNum) && !randomLines.contains(aNum+1) && !randomLines.contains(aNum-1))
        {
          randomLines.add(aNum);
        }
      }
      List<String> result = new ArrayList<String>();
      String aLine;
      int lineNo = 0;
      while ((aLine = reader.readLine()) != null)
      {
        if (randomLines.contains(lineNo))
        {
          result.add(aLine);
        }
        lineNo++;
      }
      System.out.println("Result: " + result);
    }
    finally
    {
      reader.close();
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:49:46.350

我建议使用 Mongo DB（它不如 RMDBS 可靠，但速度极快）。

[http://www.mongodb.org/display/DOCS/Quickstart](http://www.mongodb.org/display/DOCS/Quickstart) 我会将文本文件解析为 Mongo 文档，然后从 Mongo db 中检索随机 3 个文档，这将产生 3 个随机短语。

1）在Java中读取文本文件并在mongo中将每一行保存为单独的doc，或者像在mongo中直接执行命令

```
> doc = { phrase : 'uniquephrase'}
> db.posts.insert(doc); 
```

2）在你的java中连接到mongo，获取集合大小并从中选择随机3个数字，然后提供3个文档......（或其他任何东西）

# ruby-on-rails - 从数组中删除空白元素

> ID：13050011
> 
> 赞同：9
> 
> 时间：2012-10-24T13:14:32.987
> 
> 标签：ruby-on-rails, arrays

当我从 ruby​​ on rails 表单中保存多项选择时，它似乎在前面添加了一个空白元素。如何删除它？该字段是 selected_player。

```
{"utf8"=>"✓",
 "authenticity_token"=>"H8W7qPBezubyeU0adnTGZ4oJqYErin1QNz5oK0QV6WY=",
 "schedule"=>{"event"=>"1",
 "result_id"=>"",
 "time"=>"26/10/2012",
 "duration"=>"15",
 "arrival_time"=>"14",
 "location_id"=>"25",
 "selected_players"=>["", "38", "41"],
 "team_id"=>"1",
 "opponent_id"=>"7",
 "home_or_away"=>"Home"},
 "commit"=>"Save Event"} 
```

控制器

```
def update
  @schedule = Schedule.find(params[:id])
  @user = User.find(current_user)
  @players = User.where(:team_id => current_user[:team_id]).all

  respond_to do |format|
    if @schedule.update_attributes(params[:schedule])
      Notifier.event_added(@user,@schedule).deliver
      format.html { redirect_to(@schedule,
                                :notice => "#{event_display_c(@schedule.event)} vs #{@schedule.opponent.name} was successfully updated.") }
      format.json { head :no_content }
    else
      format.html { render :action => "edit" }
      format.json { render :json => @schedule.errors, :status => :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-23T15:24:26.607

这适用于空字符串：

```
array.delete_if(&:empty?) 
```

要过滤掉空字符串和 nil 值，请使用：

```
array.delete_if(&:blank?) 
```

例子：

```
>> a = ["A", "B", "", nil]
=> ["A", "B", "", nil]
>> a.delete_if(&:blank?)
=> ["A", "B"] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T13:18:38.303

[`reject!`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject)Array 类的Ref

```
params["schedule"]["selected_players"] = ["", "38", "41"]
params["schedule"]["selected_players"].reject!{|a| a==""} #gives params["selected_players"] = ["38", "41"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T17:14:16.753

这也应该有效。

```
params["schedule"]["selected_players"].reject!(&:blank?) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:17:20.250

就像是：

```
params["selected_players"].select!{|val| !val.empty?} 
```

应该管用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T14:18:24.807

什么是“selected_players”？是不是类似于集合协会的“collection_singular_ids”？如果是这样，您可以保持原样，因为 ActiveRecord 将使用以下代码从数组中删除空白元素：

```
ids = Array.wrap(ids).reject { |id| id.blank? } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-25T01:22:09.033

If you want to handle this in the **model** rather than the **controller** you can add a setter method like this

```
def selected_players=(param_array)
  write_attribute(:selected_players, param_array.reject(&:blank?))
end 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-10-24T14:53:56.020

我认为`params["selected_players"].compact`是最简洁的。

文档在这里：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-compact](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-compact)

# javascript - 如何根据两个变量获取变量值

> ID：13050016
> 
> 赞同：1
> 
> 时间：2012-10-24T13:14:51.900
> 
> 标签：javascript, variables

我需要一些有关 javascript 原理的帮助。我有一个变量，其中部分变量名是“动态的”。让我试着解释一下；

```
var name_city = "London";
var name_code = "500"; 
```

从网页我得到一个名为“类型”的值。这将是“城市”或“代码”。

（为了这个例子，我只是在这里手动制作）

```
var type = "city"; 
```

所以用“city”作为类型的值，我现在想提醒“name_city”。但我不知道如何用 javascript 做到这一点。

有人知道吗？

在php中我认为它会是这样的：

```
$type = "city";

$varname = 'name_'. $type;
echo ${$varname}; 
```

我很感激任何帮助或一些正确方向的线索:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:19:27.930

为了实现这一点，您需要将数据存储在*对象文字*中，您可以在其中动态访问其键。如果您在`global`/`window`对象中写入这些变量，您可以以相同的方式访问它们。

```
// global scope
var name_city = "London";

var type = "city";

console.log( window[ "name_" + type ] ); 
```

* * *

如果您不在全局范围内，这将不起作用（实际上，根本不应该是这种情况）。所以你应该将数据存储在自定义对象中

```
var data = {
    "name_city":  "London",
    "name_code":  "500"
}; 
```

然后做同样的事情，只需通过

```
console.log( data[ "name_" + type ] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:53:26.527

如果您有几个“平行”变量都描述了同一实体的不同方面，那么使用对象几乎总是会更好，即

```
var name = {city: "London", code: 500}; 
```

You can then access the individual attributes by indexing with a variable, e.g. `name[type]` or by property name, e.g. `name.code`. A big advantage is that you can treat the object as a unit for purposes like passing it to a function rather than having to pass several different variables.

# java - 将 Selenium-Server-standalone 作为 Windows 服务运行时遇到高 CPU 消耗

> ID：13050017
> 
> 赞同：1
> 
> 时间：2012-10-24T13:14:56.733
> 
> 标签：java, windows-services, cpu, selenium-webdriver, selenium-server

感谢您查看我的帖子。

我正在运行 selenium-server-standalone 作为 Windows 服务，使用 nssm（- 非吸盘服务管理器 | [http://nssm.cc/](http://nssm.cc/)），使用此 stackoverflow 帖子中提到的相同过程@：[https：// stackoverflow.com/a/10656979/956863](https://stackoverflow.com/a/10656979/956863)。帖子快速摘要：下载并解压 nssm.exe 安装 NSSM 并从命令行运行：nssm install Selenium-Server "C:\Program Files\Java\jre6\bin\java.exe" "-jar C:\Selenium\ selenium-server-standalone-2.24.1.jar"

我正在运行此进程的机器正在运行 Windows XP，Service Pack 3。这个将 selenium 服务器作为服务运行的解决方案就像一个魅力，当 selenium 服务器正在运行并由于某种原因崩溃时，selenium 服务器成功重启而没有人工干预。

但是我开始工作了，系统管理员通知我正在抛出高 CPU 警报。系统日志再次没有提供任何信息......所以我想知道硒是否真的是这个问题的原因，并且想要消除将 selenium 作为服务运行的可能性，因为这个 cpu 峰值被归咎于服务。

谁能想到一个解决方案，也许是一种在 cpu 利用率达到 X 量时停止 selenium 服务的方法？或者？

同时，我将设置某种长期 CPU 利用率监视器，看看它是否可以看到 xp 中的系统监视器可能缺少的东西。（如果有人知道实现这一目标的好方法，我也愿意接受建议）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:24:41.373

我在 Windows 2008 服务器上将 selenium 作为服务运行，并注意到它无法清理无头浏览器实例。我的测试是用 JavaScript 和 Soda 编写的，所以我启动并关闭了浏览器实例，但作为服务运行它不会在任务管理器中关闭这些实例。

实际上，我有两种运行服务的方法，一种是使用 bat 文件运行 selenium，另一种是直接从注册表项运行。

在我刚刚向 teamcity 添加了另一个步骤过程以在测试完成时在任何打开的浏览器上自动运行 taskkill 之后，我能够修复浏览器问题。这解决了我的 CPU 峰值问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-24T15:04:40.777

尽管有关于 Selenium 作为服务的 CPU 峰值的模糊报告，但我还没有亲眼看到。您使用的是哪个版本的 Java？

我们的商业 run-anything-as-a-service 产品支持 CPU 跟踪，并且可以在 Selenium 占用 CPU 时重新启动它。我建议您下载 30 天免费试用版并使用它，看看您是否可以确认或排除 Selenium 在该时间范围内的问题。[按照本指南将 Selenium 设置为服务。](http://www.coretechnologies.com/products/AlwaysUp/Apps/RunSeleniumServerAsAService.html)

# ios - 为什么添加的子图层不显示在屏幕截图中？

> ID：13050020
> 
> 赞同：3
> 
> 时间：2012-10-24T13:15:04.563
> 
> 标签：ios

我正在尝试查找 iPad 应用程序的某些 iOS 代码中的错误。在我们的一个视图中，我们添加了具有阴影的子层，并确保视图的底部具有圆形边缘。这是我们添加子层的代码：

```
 UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds
                                                   byRoundingCorners:(UIRectCornerBottomLeft|UIRectCornerBottomRight)
                                                         cornerRadii:CGSizeMake(12.0f, 12.0f)];

    // Create the shadow layer
    shadowLayer = [CAShapeLayer layer];
    [shadowLayer setFrame:self.bounds];
    [shadowLayer setMasksToBounds:NO];
    [shadowLayer setShadowPath:maskPath.CGPath];
    shadowLayer.shadowColor = [UIColor blackColor].CGColor;
    shadowLayer.shadowOffset = CGSizeMake(0.0f, 0.0f);
    shadowLayer.shadowOpacity = 0.5f;
    shadowLayer.shadowRadius = 6.0f;

    roundedLayer = [CALayer layer];
    [roundedLayer setFrame:self.bounds];
    [roundedLayer setBackgroundColor:[UIColor colorFromHex:@"#e4ecef"].CGColor];

    [self.layer insertSublayer:shadowLayer atIndex:0];

    // Add inner view (since we're rounding corners, parent view can't mask to bounds b/c of shadow - need extra view)
    maskLayer = [CAShapeLayer layer];
    maskLayer.frame = self.bounds;
    maskLayer.path = maskPath.CGPath;
    innerView = [[UIView alloc] initWithFrame:self.bounds];
    innerView.backgroundColor = [UIColor whiteColor];
    innerView.layer.mask = maskLayer;
    [self addSubview:innerView]; 
```

它在 iPad 的屏幕上显示良好，但我想以编程方式截取屏幕截图。我用这种方法向 UIView 添加了一个类别：

```
- (UIImage*)screenshot {
    UIGraphicsBeginImageContext(self.frame.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);
    return viewImage;
} 
```

当我查看截取的屏幕截图时，它不再有圆角或我视野后面的阴影。他们为什么不出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:45:03.227

在这里找到了解释：[CALayer renderInContext](https://stackoverflow.com/questions/1740953/calayer-renderincontext)

> 此外，不会渲染使用 3D 变换的图层，也不会渲染指定 backgroundFilters、filters、compositingFilter 或掩码值的图层。

看起来某些子层无法由 renderInContext 处理，这就是它们没有出现在我的屏幕截图中的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T20:34:52.400

## 渐变子层

快照中没有任何`gradient layers`通道`alpha`。从颜色中删除 alpha，对我有用

# matlab - Matlab：使用==> mpower时出错

> ID：13050023
> 
> 赞同：1
> 
> 时间：2012-10-24T13:15:13.220
> 
> 标签：matlab

我正在尝试`fsolve`在 matlab 中使用数值求解非线性方程组。这是我的程序的测试样本，`k1`是`R`参数，`x0`是起点。

```
function y=f(k1, R, x0)

pair=fsolve(@system,x0);

y=pair(1);

    function r=system(v)

        int1=@(x) exp(k1*x);
        int2=@(x) exp(k1*x^2)/(x^4);

        r(1)=exp(v(1))*quadl(int1,0,v(1));     
        r(2)=exp(k1*v(2))*quadl(int2,v(1),20)*k1*R;

    end

end 
```

奇怪的是，当我运行这个程序时，matlab 一直告诉我应该使用`.^`而不是`^`in `int2=@(x) exp(k1*x^2)/(x^4)`。我很困惑，因为该`x`函数句柄在被`quadl`. 为什么我必须`.^`在这种情况下使用？

此外，我看到在线文档中提供的许多示例也使用了`.^`，即使它们显然具有标量的功能，如[这里](http://www.mathworks.com/help/matlab/ref/quadl.html)。谁能帮忙解释一下为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:23:53.780

在内部，MATLAB 将评估函数`fun`的必要值`x`，该值大于一个并且`x`是一个向量。`a`并且`b`仅用于描述积分的极限。从[文档](http://www.mathworks.se/help/matlab/ref/quadl.html)

> fun 是一个函数句柄。它接受向量 x 并返回向量 y，函数 fun 在 x 的每个元素处求值。限制 a 和 b 必须是有限的。

因此，您必须使用`.^`对 vector 的各个元素进行操作`x`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:27:27.057

在`int2`您使用矩阵幂 ( `^`) 的函数中，您应该使用逐元素幂 ( `.^`)。此外，您使用了矩阵右除法 ( `/`)，您应该使用逐元素除法 ( `./`)。这是必要的，因为（和朋友）出于效率的原因将一次评估整个数组`quadl`的被积函数。`int2``x`

所以，使用这个：

```
function y = f(k1, R, x0)

    pair = fsolve(@system,x0);

    y = pair(1);

    function r = system(v)

        int1 = @(x) exp(k1*x);
        int2 = @(x) exp(k1*x.^2)./(x.^4);

        r(1) = exp(   v(1)) * quadl(int1,0,v(1));     
        r(2) = exp(k1*v(2)) * k1*R*quadl(int2,v(1),20);

    end

end 
```

另外，请查看`quadgk`或`integral`（如果您使用的是较新的 Matlab）。

顺便说一句，我假设您的实际功能是不同的功能吗`int1`？`int2`因为这些函数对于解析求解当然是[微不足道的......](http://integrals.wolfram.com/index.jsp?expr=Exp%5bk1%2ax%5d%2F+x%2a%2a4&random=false)

# intellij-idea - 在 Intellij Idea 中播放 2 对本地模块的依赖

> ID：13050028
> 
> 赞同：1
> 
> 时间：2012-10-24T13:15:32.407
> 
> 标签：intellij-idea, playframework-2.0, sbt

我是 PlayFramework 2 的新手，不知道如何解决 play 2 应用程序依赖项。我需要添加对 IntellijIdea 中加载的本地模块的依赖，而不是 jar 文件或存储库。

虽然在 Idea 项目设置中添加模块依赖项工作得很好，并且 ide 本身能够解决它们（自动完成、导入等工作），但当尝试在 play2 中运行时，它的编译器无法解析任何依赖项。

我手动配置了 Build.scala（添加 val appDependencies = Seq("" % "" % "")），但我不知道应该使用什么解析器。我不能指向一个 jar 文件，因为它正在进行中，并且这样的文件应该经常更新。这样做会破坏托管依赖项的全部目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:23:54.253

Play 的主要构建机制使用 SBT，它需要知道如何找到构建所需的所有源。有几种选择：

*   使您的模块本身成为 SBT 项目并将其发布到您的本地常春藤存储库。然而，在这个阶段这可能有点复杂，并且需要将您的本地常春藤存储库添加到解析器并在每次更改模块中的某些内容时重新发布

*   将您的模块声明为[子项目](https://github.com/harrah/xsbt/wiki/Getting-Started-Multi-Project)。Play 的文档描述了[使用子项目](http://www.playframework.org/documentation/2.0.4/SBTSubProjects)的过程，我认为这是您想尝试的方式，因为那时`idea`Play 控制台上的命令将为主应用程序和模块生成 IntelliJ 配置。

# java - 如何在正则表达式中进行块重复

> ID：13050030
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:15:43.700
> 
> 标签：java, regex

假设源字符串是

```
(Adam)/NNP Apple/NN Orange/NN banana/NN tall/JJ 
```

我的正则表达式是检测 NNP，后跟任意数量的 NN，不管多少

如果我做了以下事情，

```
[a-zA-z]*/NNP\s[a-zA-z]*/NN\s[a-zA-z]*/NN\s[a-zA-z]*/NN\s[a-zA-z]*/JJ 
```

我会在 NNP 之后将自己限制为三个名词，而我希望它是任意数量的 NN 甚至为零

我怎样才能在正则表达式中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:18:36.400

使用组

```
[a-zA-z]*/NNP(\s[a-zA-z]*/NN)+\s[a-zA-z]*/JJ 

(any character sequence)+
+ - repeat this sequence one or more time. 
```

有关更多详细信息，请参阅文档： [http ://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#cg](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#cg)

# assembly - 自动组装 x86 混淆工具

> ID：13050035
> 
> 赞同：3
> 
> 时间：2012-10-24T13:16:05.857
> 
> 标签：assembly, obfuscation

我有一些应用程序的汇编代码，有人知道可以自动混淆代码的工具吗？

谢谢。

# c++ - 这个返回语句是做什么的？

> ID：13050038
> 
> 赞同：1
> 
> 时间：2012-10-24T13:16:15.650
> 
> 标签：c++, function, return

下面是一个虚拟函数。我在某处看到了类似的东西。我不明白退货部分。

```
int SomeFunction(int SomeVar)
{
    //do the calculations
    ...
   return SomeVar != 0
} 
```

最后一行是如何工作的？它返回什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:17:28.620

如果非零，此函数返回 1，如果`SomeVar`为零，则返回`SomeVar`0。

表达式的结果`SomeVar != 0`是`bool`（`false`或`true`）类型。类型被隐式`bool`转换为`int`（分别为 0 或 1）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:18:15.497

它返回布尔值的整数表示。如果语句评估为假，则为 0，否则为 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:18:24.490

当 SomeVar 不为零时，这将返回 1，反之亦然。

# iphone - iOS 6 MKMapView 搜索地点

> ID：13050051
> 
> 赞同：1
> 
> 时间：2012-10-24T13:17:20.770
> 
> 标签：iphone, ios, maps, mapkit

我想搜索诸如“Apple Store”、“Italian Restaurant”等地点以及诸如“5th Ave, New York, NY, United States”之类的地址。

如何搜索地点并为我找到的每个地点设置 MKPlacemark？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:40:20.833

如果您担心 Google Maps API 的请求限制，您可以改用一些开源地图 API，例如 Nominatim API，请查看[http://wiki.openstreetmap.org/wiki/Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:19:38.393

从 iOS 6.1 Apple 引入了一个新的搜索 API - `MKLocalSearch`. 您创建一个`MKLocalSearchRequest`使用字符串和区域进行搜索（该区域只是搜索的提示，它不保证结果会在该区域内）并使用此请求来初始化 a `MKLocalSearch`，这会异步为您提供`MKLocalSearchResponse`对象中的结果. 它是在一月份才推出的，所以它在这个阶段存在问题——每次搜索只能得到 10 个结果，而且有些结果很奇怪，但绝对值得一试。也无法指定您正在搜索的对象类型（城镇/商业/地标等），这很遗憾。这是一个很酷的[教程](http://jeffreysambells.com/2013/01/28/mklocalsearch-example)。请注意，您提供的区域越精确，结果就越好。

# android - 删除 ListItems 后刷新 ListView

> ID：13050053
> 
> 赞同：1
> 
> 时间：2012-10-24T13:17:21.293
> 
> 标签：android, listview, adapter

我有一个列表视图，其中填充了几个 ListItem。我还有一个选项菜单，其中包括“删除所有项目”按钮。当我点击这个按钮时，它会调用一个方法来删除除默认值之外的所有项目，并且还应该刷新 ListView。这是菜单代码：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId())
    {
        ...
        case R.id.optMenuDeleteAllCategories:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure you want to delete all categories?")
            .setCancelable(false)
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    **deleteAllCategories();**
                } 
```

这是`deleteAllCategories()`方法：

```
 public void deleteAllCategories()
{
    manager.deleteAllCategories();
    adapter.notifyDataSetChanged();
} 
```

所以它确实会删除所有内容，但 ListView 不会刷新。我必须退出应用程序并重新打开它才能看到更改。我也尝试`adapter.notifyDataSetChanged();`在调用`deleteAllCategories`方法后立即放置该行，但 ListView 仍然没有刷新。

那么如何在不退出应用程序的情况下刷新它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:58:47.390

在 deleteAllCategories 方法中调用 adapter.clear() 也可以从列表中删除项目。

编辑： ArrayAdapter 内部将在不同的列表实例上工作，然后是您传入的那个。因此，虽然将反映对原始列表中对象的更改，但您传入的 ArrayList 的更改对适配器不可见。

需要使用 ArrayAdapter 的 add、insert、remove 和 clear 方法来修改适配器中的列表。

# javascript - 强制 TinyMCE 重新加载插件

> ID：13050056
> 
> 赞同：2
> 
> 时间：2012-10-24T13:17:28.853
> 
> 标签：javascript, tinymce, http-caching

我正在开发一个 TinyMCE 插件，但是我对插件所做的更改在第一次加载后并没有加载到 TinyMCE 中（它正在被缓存）。这发生在 FF 和 Chrome 上。

如果我在 Firefox 中搜索缓存，我会找到对插件的 editor_plugin.js 文件的引用，该文件的缓存到期时间为 6 天 23 小时。

我可以解决这个问题的唯一方法是每次我想测试更改时清除浏览器上的缓存 - 还有其他人得到这种行为吗？我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-10-15T12:41:24.240

为了在客户端强制重新加载缓存，tinyMce 使用 cache_suffix 实现了解决方案。如果您更改后缀，它将重新加载所有文件。

```
tinymce.init({
  selector: 'textarea',  // change this value according to your HTML
  cache_suffix: '?v=4.1.6'
}); 
```

[https://www.tiny.cloud/docs/configure/integration-and-setup/#cache_suffix](https://www.tiny.cloud/docs/configure/integration-and-setup/#cache_suffix)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:52:32.610

Firefox 有一种简单的方法可以消除每次新页面加载时的卡痛。您需要安装 Firebug。转到网络选项卡并选择“停用浏览器缓存”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-16T06:33:00.677

通常我会*操纵*已更改脚本的引用 url，例如：

```
ed.windowManager.open({
    file : url + '/image.htm?v1',...}); 
```

文件名没有改变，但脚本也会在生产时重新加载。

# coffeescript - 编译和加入咖啡脚本文件

> ID：13050060
> 
> 赞同：1
> 
> 时间：2012-10-24T13:17:39.473
> 
> 标签：coffeescript, cakefile

我有以下结构：

```
/lib
  / myfile.js.cofee
  / secondfile.js
/src 
```

我想把它们编译成

```
/lib
  / myfile.js.cofee
  / secondfile.js
/src
  / awesomefile.min.js 
```

我已经阅读过 Cakefiles，但我不确定如何准确地做到这一点。

谢谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:36:54.833

如果您碰巧使用基于连接的东西（例如快递），我建议使用[connect-assets](https://github.com/TrevorBurnham/connect-assets)。如果没有，那么[grunt](http://gruntjs.com/)可能是一个不错的选择，正如之前所建议的那样。如果您想自己使用 a 来执行此操作`Cakefile`，可以使用以下一种方法：

请注意，约定是从 src 构建到 lib （这与您在问题中所说的相反）。我将在下面使用该约定，但如果需要，您可以轻松地将其切换回来。

`$ npm install snockets`

将以下内容放入`src/awesomefile.coffee`：

```
#= require secondfile.js
#= require myfile.js.coffee 
```

使用以下内容创建一个`Cakefile`：

```
fs = require 'fs'
Snockets = require 'snockets'

NAME = 'awesomefile'
INPUT_FILE = "src/#{NAME}.coffee"
OUTPUT_FILE = "lib/#{NAME}.min.js"

task 'build', 'Build lib/ from src/', ->
  snockets = new Snockets()
  js = snockets.getConcatenation INPUT_FILE, async: false, minify: true
  fs.writeFileSync OUTPUT_FILE, js

task 'clean', "remove #{OUTPUT_FILE}", ->
  fs.unlinkSync OUTPUT_FILE 
```

现在你可以这样做：

`$ cake build`

这将创建一个`lib/awesomefile.min.js`.

您可以让文件`src`跟踪它们自己的依赖关系，或者您可以列出要包含在单个文件中的顺序，就像我在上面所做的那样。有关更多信息，您可以查看[snockets](https://github.com/TrevorBurnham/snockets)存储库。另请注意，[The Little Book on CoffeeScript的](http://arcturo.github.com/library/coffeescript/)[编译章节](http://arcturo.github.com/library/coffeescript/05_compiling.html)是学习蛋糕文件的好资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:45:51.560

可能不是您预期的确切答案。

www.gruntjs.com 上的 Grunt.js 是一个非常有用的构建工具，它当然包含很多您需要在 Web 项目中每天完成的工作。

# python - python 线程安全锁在循环上

> ID：13050061
> 
> 赞同：0
> 
> 时间：2012-10-24T13:17:45.563
> 
> 标签：python, multithreading

有人可以告诉我以下是否是线程安全的，如果不是，我必须做什么才能做到这一点。

**注意：**这只是一个小样本，不确定它是否运行。

```
TIMER = True
time_lock = threading.Lock()
def timing():
    while TIMER:
        # some logic will be here for now print time
        print time.time()

timer = threading.Thread(target=timing)
timer2 = threading.Thread(target=timing)
timer.start()
timer2.start()

while True:
    time_lock.aquire()
    if doSomeStuff():
        TIMER = True
    if otherThings():
        break
    time_lock.aquire()
    TIMER = False
    time_lock.release()

time_lock.aquire()
TIMER = False
time_lock.release() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:08:41.307

这在一定程度上取决于您使用的是哪种实现，以及您在做什么。

首先，在 python 的*事实上*的标准实现（“cpython”）中，一次只允许运行一个线程，因为 python 解释器的某些内部结构不是线程安全的。这是由全局解释器锁（又名“GIL”）控制的。所以在 cpython 中，你根本不需要额外的锁；GIL 确保一次只有一个线程在运行 python 代码并可能更改变量。这是实现的一个特性，而不是语言的特性。

其次，如果只有*一个线程写入*一个简单的变量而*其他线程只读取它*，那么出于显而易见的原因，您也不需要锁。但是，作为程序员，您可以确保情况确实如此，并且很容易出错。

即使分配给一个简单的变量也可能不需要锁。在 python 中，变量更像是用于引用对象的标签，而不是可以放入某些内容的框。所以简单的赋值是原子的（从某种意义上说，它们不能被中途中断），当您查看生成的python字节码：

```
In [1]: import dis

In [2]: x = 7

In [3]: def setx():
    global x
    x = 12
   ...:     

In [4]: dis.dis(setx)
  3           0 LOAD_CONST               1 (12)
              3 STORE_GLOBAL             0 (x)
              6 LOAD_CONST               0 (None)
              9 RETURN_VALUE 
```

唯一改变 x 的代码是单个`STORE_GLOBAL`操作码。所以变量要么改变，要么不改变；之间没有不一致的状态。

但是，如果您想测试某个变量的某个值，并在该测试仍然成立时执行一项操作，您确实需要一个锁。因为另一个线程可能在您测试后更改了变量。

诸如附加到列表或交换变量之类的事情不是原子的。但同样在 cpython 中，这些将受到 GIL 的保护。在其他实现中，您需要锁定此类操作以防止可能的不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:23:24.450

如果我对您的理解正确，您想在停止时向您的线程发出信号。由于这是一种只有一个线程写入共享变量且仅一次的情况，因此您不需要锁。

当您对无法以原子方式读取的共享数据结构进行并发修改时，锁是必需的。

# vb.net - 仅反映 VB.NET 上派生类的子属性

> ID：13050064
> 
> 赞同：4
> 
> 时间：2012-10-24T13:17:55.323
> 
> 标签：vb.net, oop, reflection

我正在尝试使用反射序列化从另一个继承的类的属性，但我只想序列化子类的属性，而不是父类的属性。我怎样才能做到这一点？

这就是我正在做的事情，不幸的是它也得到了父类的所有属性，正如人们所期望的那样：

```
 Public Function SaveData() As System.Collections.Generic.List(Of System.Xml.Linq.XElement) Implements Interfaces.ICustomXMLSerialization.SaveData

        Dim elements As New List(Of System.Xml.Linq.XElement)
        Dim ci As CultureInfo = CultureInfo.InvariantCulture

        With elements

            Dim props As PropertyInfo() = Me.GetType.GetProperties()
            For Each prop As PropertyInfo In props
                If TypeOf Me.GetType.GetProperty(prop.Name).PropertyType Is IList Then
                    .Add(New XElement(prop.Name, DWSIM.App.ArrayToString(Me.GetType.GetProperty(prop.Name).GetValue(Me, Nothing), ci)))
                ElseIf TypeOf Me.GetType.GetProperty(prop.Name).GetValue(Me, Nothing) Is Double Then
                    .Add(New XElement(prop.Name, Double.Parse(Me.GetType.GetProperty(prop.Name).GetValue(Me, Nothing)).ToString(ci)))
                Else
                    .Add(New XElement(prop.Name, Me.GetType.GetProperty(prop.Name).GetValue(Me, Nothing)))
                End If
            Next

        End With

        Return elements

    End Function 
```

在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:23:42.280

您需要指定`BindingFlags.DeclaredOnly`为`GetProperties`调用的参数。

但是，在使用这些标志时经常会遇到一些问题，因此可能需要进行一些试验才能找到您需要的标志的确切组合。枚举的 MSDN 描述在[这里](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)。

# c# - 通过命令行为 Visual Studio 安装程序发送自定义操作数据

> ID：13050068
> 
> 赞同：1
> 
> 时间：2012-10-24T13:18:02.037
> 
> 标签：c#, visual-studio-2010, command-line, installation, custom-action

我有一个 Visual Studio 安装程序，它有一个自定义 UI，其中一个文本框恢复设置为`QUEUEDIRECTORY`属性的值。然后我有一个自定义操作（一个安装程序类），它通过这一行传入该属性值`/queuedir="[QUEUEDIRECTORY]"`- 安装程序工作得很好。

现在，我需要通过命令行发送该值，以便整个组织的系统管理员都可以运行此安装程序。因此，我尝试了以下命令行语句，但它不起作用。

```
msiexec /i Setup.msi QUEUEDIRECTORY="D:\temp"
Setup.msi QUEUEDIRECTORY="D:\temp"
Setup.msi queuedir="D:\temp"
msiexec /i Setup.msi queuedir="D:\temp" 
```

此外，我似乎无法在网上找到任何不觉得他们破解它的东西，因为他们只是找不到解决方案。我的意思是我已经找到了一些解决方案，他们正在编辑 MSI 数据库和所有内容，但是看起来这不是**正确**的解决方案 - 特别是因为我使用的是 Visual Studio 2010 - 微软肯定已经做了一些改进，因为它此产品的初始版本。

这是[一篇](http://blogs.msdn.com/b/helloworld/archive/2009/02/06/how-to-add-command-line-support-with-your-msi.aspx)看似**可行**但仍然感觉像黑客的文章。

无论如何，我希望你能帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-07T18:39:44.913

这就是我在 Visual Studio 2010 中向我的 MSI 添加仅命令行属性值所做的。它类似于接受的答案，但不那么 hacky。在安装项目 (.vdproj) 目录中创建`CommandLineSupport.js`，使用以下代码：

```
//This script adds command-line support for MSI installer
var msiOpenDatabaseModeTransact = 1;

if (WScript.Arguments.Length != 1)
{
    WScript.StdErr.WriteLine(WScript.ScriptName + " file");
    WScript.Quit(1);
}

WScript.Echo(WScript.Arguments(0));
var filespec = WScript.Arguments(0);
var installer = WScript.CreateObject("WindowsInstaller.Installer");
var database = installer.OpenDatabase(filespec, msiOpenDatabaseModeTransact);

var sql
var view

try
{

    sql = "INSERT INTO `Property` (`Property`, `Value`) VALUES ('MYPROPERTY', 'MYPROPERTY=\"\"')";
    view = database.OpenView(sql);
    view.Execute();
    view.Close();

    database.Commit();
}
catch(e)
{
    WScript.StdErr.WriteLine(e);
    WScript.Quit(1);
} 
```

然后在 Visual Studio 中单击您的部署项目以查看项目的属性，并将其设置`PostBuildEvent`为：

`cscript.exe "$(ProjectDir)CommandLineSupport.js" "$(BuiltOuputPath)"`

然后使用自定义操作设置开发项目。单击主输出以进入自定义操作属性，并将该`CustomActionData`字段设置为`/MYPROPERTY="[MYPROPERTY]"`

然后，您可以在自定义操作安装程序类中访问该属性，如下所示：

```
public override void Install(IDictionary stateSaver)
{
     base.Install(stateSaver);

     string the_commandline_property_value = Context.Parameters["MYPROPERTY"].ToString();
} 
```

最后你可以运行cmd。 `C:\>Setup.msi MYPROPERTY=VALUE`

这不需要在 Orca 中进行任何处理，也不需要像在接受的答案中那样使用任何自定义对话框控件。您也不必修改 PostBuildEvent 以具有正确的 .msi 名称。等也可以像这样添加任意数量的属性：

```
INSERT INTO `Property` (`Property`, `Value`) VALUES ('MYPROPERTY', 'MYPROPERTY=\"\"'),('MYPROPERTY2', 'MYPROPERTY2=\"\"', ('MYPROPERTY3', 'MYPROPERTY3=\"\"')) "; 
```

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:45:41.113

好的，所以我最终选择了我在问题中链接到的解决方案。但为了完整起见，让我把脚本放在这里。我需要做的第一件事是构建一个包含以下代码的 JS 文件（我将其`CommandLineSupport.js`命名**为`.vdproj`**.

```
//This script adds command-line support for MSI build with Visual Studio 2008\. 
var msiOpenDatabaseModeTransact = 1;

if (WScript.Arguments.Length != 1)
{
    WScript.StdErr.WriteLine(WScript.ScriptName + " file");
    WScript.Quit(1);
}

WScript.Echo(WScript.Arguments(0));
var filespec = WScript.Arguments(0);
var installer = WScript.CreateObject("WindowsInstaller.Installer");
var database = installer.OpenDatabase(filespec, msiOpenDatabaseModeTransact);

var sql
var view

try
{
    //Update InstallUISequence to support command-line parameters in interactive mode.
    sql = "UPDATE InstallUISequence SET Condition = 'QUEUEDIRECTORY=\"\"' WHERE Action = 'CustomTextA_SetProperty_EDIT1'";
    view = database.OpenView(sql);
    view.Execute();
    view.Close();

    //Update InstallExecuteSequence to support command line in passive or quiet mode.
    sql = "UPDATE InstallExecuteSequence SET Condition = 'QUEUEDIRECTORY=\"\"' WHERE Action = 'CustomTextA_SetProperty_EDIT1'";
    view = database.OpenView(sql);
    view.Execute();
    view.Close();

    database.Commit();
}
catch(e)
{
    WScript.StdErr.WriteLine(e);
    WScript.Quit(1);
} 
```

您当然需要通过在 Orca 中打开 MSI 并将其与您创建的自定义对话框上的`Action`匹配来确保您替换了正确的。`Property`

接下来，既然我的 JS 文件可以正常工作，我需要添加一个`PostBuildEvent`，`.vdproj`您可以通过单击 Visual Studio 中的设置项目并点击`F4`. 然后找到该`PostBuildEvent`属性并单击省略号。在那个`PostBuildEvent`地方这个代码：

```
cscript "$(ProjectDir)CommandLineSupport.js" "$(BuildOutputPath)Setup.msi" 
```

确保替换`Setup.msi`为您的 MSI 文件的名称。

虽然我仍然觉得这是一个黑客......因为它是......它可以工作并且现在可以完成这项工作。这是一个足够小的项目，它真的没什么大不了的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T10:55:17.463

这是一个旧线程，但有一个更简单、有效的解决方案似乎仍然很难找到，因此我将其发布在这里。

在我的场景中，我们正在使用 VS2013（社区版）和[VS 2013 安装程序项目](https://visualstudiogallery.msdn.microsoft.com/9abe329c-9bba-44a1-be59-0fbf6151054d)扩展。我们的安装程序项目有一个自定义 UI 步骤收集两个用户文本，以及一个绑定到*Install\Start*步骤的自定义操作来接收这些文本。

我们可以通过 GUI 设置向导完成这项工作，但不能通过命令行完成。最后，按照[这个解决方法](https://blogs.technet.microsoft.com/alipka/2007/04/20/how-to-use-custom-actions-in-visual-studio-setup-project-msi-from-command-line/)，我们能够使命令行也工作，**而无需任何 MSI 文件 Orca 编辑**。

事情的要点是直接从 Visual Studio 为所有需要的自定义对话框属性设置一个值，并且这样的值应该是`[YOUR_DIALOG_PROPERTY_NAME]`. 此外，似乎此类“公共”属性必须全部大写。

这是最终设置：

**自定义对话框属性**
注意例如*Edit1Property*和*Edit1Value*。

[![在此处输入图像描述](../Images/785fa27629dbcc6a0fd87b70096358a4.png)](https://i.stack.imgur.com/bsCz3.png)

**自定义动作属性**
注意，后面在代码中使用的属性键可以用驼峰式命名。

[![在此处输入图像描述](../Images/7ba6f98d0632278c1ed827f48ed67993.png)](https://i.stack.imgur.com/i43JP.png)

**自定义操作代码**

```
string companyId = Context.Parameters["companyId"];
string companyApiKey = Context.Parameters["companyApiKey"]; 
```

**命令行**

```
> setup.exe COMPANYID="Some ID" COMPANYAPIKEY="Some KEY" /q /l mylog.txt 
```

高温高压

# java - CORBA 测试自动化

> ID：13050070
> 
> 赞同：1
> 
> 时间：2012-10-24T13:18:10.197
> 
> 标签：java, c++, corba

假设有一个使用`C++`& others 构建的大型应用程序并`CORBA`作为与之交互的一种方式，是否有任何可行的方式来模拟用户交互，以运行任何类型的自动化测试（自动化不是问题）？首选方法将涉及使用 JAVA，但这也不是什么大问题。

谷歌对此几乎一无所获。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:26:04.233

我假设该产品提供了一个 CORBA API，并且我假设存在一个仅使用该 API 与服务器交互的现有客户端（这称为吃你自己的狗粮）。CORBA 设计为与语言无关，因此您当然可以编写一个 Java 客户端与之交互。

鉴于这些假设，您可以使用 CORBA 接口测试服务器，但您将无法测试客户端代码，例如按钮和对话框等。您可以使用 UI 测试框架来测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T19:22:43.627

IONA（现在由 Progress 拥有）构建了一个名为[Orbix 代码生成工具包](http://documentation.progress.com/output/Iona/orbix/gen3/33/html/orbixcgt33_pguide/chap_overview.html)的产品，它正是这样做的。它在 Orbix v3 到 v6 中可用。

它遍历您的 IDL 文档并生成客户端（甚至服务器）代码，以完全练习和调用每个可用的方法，每个参数具有随机但有效的值，每次都将它们打印出来。

您需要获得[Orbix](http://www.progress.com/en/orbix/index.html)才能使用它，但也许您可以通过联系 Progress Software 获得评估许可证来试用它。不用担心，您可以生成可以在任何 CORBA 兼容服务器上运行的客户端代码，而不仅仅是 Orbix 的。

# drools - 如何使用drools fusion识别和验证简单的事件序列

> ID：13050071
> 
> 赞同：0
> 
> 时间：2012-10-24T13:18:11.043
> 
> 标签：drools, complex-event-processing, drools-fusion

我找不到在“B”事件（STREAM 模式）之间计算“A”事件的最佳方式（实际上是流口水融合方式）。序列的一个例子可能是：

```
B A A A B A A B A... 
```

一个用例可能是

> 验证序列有效性，即每个“B”事件之间总是有 3 个“A”事件

我不知道“窗口结束”的概念在这种情况下是否合适。感谢您的帮助，我在 CEP 方式上思考仍然有些困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:50:22.140

两个 Drools 版本会导致两种不同的行为（相同的单元测试）。所以我认为我的误解来自“windows”行为中的一个错误。这次我不能说得更具体了。

# java - Android通过php连接mysql

> ID：13050072
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:18:12.850
> 
> 标签：java, php, android, mysql, connect

我是 android 新手，我想创建一个从 mysql 服务器读取数据的应用程序。[我从网上拿了一个关于这个的例子](http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/)，但我不能让它工作

我为此使用 eclipse，而另一部分使用 php 和 mysql。首先，这是我运行正常的 php 脚本（[city.php](http://steagu.ro/android/city.php)）：

```
<?php
//connecting to database
$sql=mysql_query("select * from city");
$output = array();
while(list($id,$name)=mysql_fetch_array($sql)){
    $output[$id]=$name;

}
print(json_encode($output));
mysql_free_result($sql);

?> 
```

这是返回：

```
{"1":"Brasov","2":"Bucuresti"} 
```

在我来自 Eclipse 的 android 项目中，我在 MainActivity.java 中有：

```
package com.example.mycity;

import android.os.Bundle;
import android.app.Activity;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.net.ParseException;
import android.util.Log;
import android.widget.Toast;

public class MainActivity extends Activity {

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb=null;

@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://www.steagu.ro/android/city.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
     HttpResponse response = httpclient.execute(httppost);
     if (response.getStatusLine().getStatusCode() != 200) {
            Log.d("MyApp", "Server encountered an error.");

     }
     HttpEntity entity = response.getEntity();
     is = entity.getContent();
     }catch(Exception e){
         //e.printStackTrace();
         Log.e("log_tag", "Error in http connection: "+e.toString());
    }

  }

} 
```

但是当我运行它时，我在 logcat 上收到一个错误：它没有连接到文件：http 连接中的错误：android.os.NetworkOnMainThreadException

```
10-24 13:04:34.429: I/dalvikvm(982): threadid=3: reacting to signal 3
10-24 13:04:34.649: I/dalvikvm(982): Wrote stack traces to '/data/anr/traces.txt'
10-24 13:04:34.859: E/log_tag(982): Error in http connection: android.os.NetworkOnMainThreadException
10-24 13:04:34.919: I/dalvikvm(982): threadid=3: reacting to signal 3
10-24 13:04:34.949: I/dalvikvm(982): Wrote stack traces to '/data/anr/traces.txt'
10-24 13:04:35.151: D/gralloc_goldfish(982): Emulator without GPU emulation detected.
10-24 13:04:35.479: I/dalvikvm(982): threadid=3: reacting to signal 3
10-24 13:04:35.499: I/dalvikvm(982): Wrote stack traces to '/data/anr/traces.txt' 
```

我在 AndroidManifest.xml 中拥有 Internet 权限：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mycity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我不知道问题出在哪里。有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:20:12.063

问题是这样的：

```
10-24 13:04:34.859: E/log_tag(982): Error in http connection: 
                    android.os.NetworkOnMainThreadException 
```

您需要在不同的线程上进行网络访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:59:46.730

您可以使用 AsyncTask 类来执行您的网络操作，因为 strictmode 不允许它在主 UI 示例上完成，如下所示

```
 public class MainActivity extends Activity {

         JSONArray jArray;
         String result = null;
         InputStream is = null;
          StringBuilder sb=null;

         @Override
        public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

       new httpRequest().execute();

        }

         private class httprRequest extends AsyncTask<String, Integer, String>{

                @override
                public String doInBackground(String.... params){
                   ArrayList<NameValuePair> nameValuePairs = new             ArrayList<NameValuePair>();
        //http post
          try{
           HttpClient httpclient = new DefaultHttpClient();
           HttpPost httppost = new HttpPost("http://www.steagu.ro/android/city.php");
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           HttpResponse response = httpclient.execute(httppost);
           if (response.getStatusLine().getStatusCode() != 200) {
               Log.d("MyApp", "Server encountered an error.");

              }
          HttpEntity entity = response.getEntity();
          is = entity.getContent();
          }catch(Exception e){
          //e.printStackTrace();
          Log.e("log_tag", "Error in http connection: "+e.toString());
           }

                }
              }

           }
       } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T07:37:55.500

谢谢kabuto178，我进行了更改并且正在连接。我还编写了用于从 mysql 检索数据的代码，所以谁需要这个，可以使用我的示例

这是代码：

```
package com.example.mycity;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.net.ParseException;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

String result = "";
InputStream is = null;
StringBuilder sb=null;
//String ct_name = null;

@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
new httprRequest().execute();

int ct_id=0;
String ct_name="";

//Toast.makeText(getBaseContext(), "This is "+result, 3000).show();

try {
Thread.sleep(1000L);
} catch (Exception te) {}

try{
    //ct_name = result;
    JSONArray jArray = new JSONArray(result);

    for(int i=0;i<jArray.length();i++){
           JSONObject json_data= jArray.getJSONObject(i);
           ct_id=json_data.getInt("CITY_ID");
           ct_name += json_data.getString("CITY_NAME")+":";
       }

    }
    catch(JSONException e1){
      e1.printStackTrace();
    } catch (ParseException e1) {
            e1.printStackTrace();
    }

TextView tv1 = (TextView) findViewById(R.id.textView1);
tv1.setText(ct_name);

}

private class httprRequest extends AsyncTask<String, Integer, String>{

    @Override 
    public String doInBackground(String... params){
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
try{
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.steagu.ro/android/city.php");
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost);
if (response.getStatusLine().getStatusCode() != 200) {
   Log.d("MyApp", "Server encountered an error.");

  }
HttpEntity entity = response.getEntity();
is = entity.getContent();
}catch(Exception e){
//e.printStackTrace();
Log.e("log_tag", "Error in http connection: "+e.toString());
}

//convert response to string

try{
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
       sb = new StringBuilder();
       sb.append(reader.readLine() + "\n");

       String line="0";
       while ((line = reader.readLine()) != null) {
                      sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
}catch(Exception e){
        //Toast.makeText(getBaseContext(), "Am eroare aici", 3000).show();
        Log.e("log_tag", "Error converting result "+e.toString());
}

/*
Toast.makeText(getBaseContext(), "Here i am", 3000).show();
*/

return result;
    }

  }

} 
```

我必须更改一点代码，因为我放了一个thread.sleep。而不是它，我必须检查我是否有一个值到结果中（在一个while循环中）。我认为这种情况正在发生，因为在我尝试解析值的那一刻，我没有结果值。

php代码是：

```
<?php
//connecting to database
$sql=mysql_query("select * from city where CITY_NAME like '%'");
$output = array();
while($row=mysql_fetch_assoc($sql)){
    $output[]=$row;
}

echo json_encode($output);
mysql_free_result($sql);

?> 
```

表“city”有两列，CITY_ID 和 CITY_NAME。

# android - 为什么在运行 Android 应用程序的 Eclipse 中调试窗口为空？

> ID：13050073
> 
> 赞同：0
> 
> 时间：2012-10-24T13:18:14.170
> 
> 标签：android, eclipse, debugging

为什么调试一个不包含 MAIN 和 LAUNCH 活动，而只有一个接收器的 Android 应用程序的调试窗口是空的？是正常的还是有什么问题？

当我在调试模式下启动应用程序时，这是 LogCat：

```
10-24 13:02:52.998: D/AndroidRuntime(5782): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
10-24 13:02:52.998: D/AndroidRuntime(5782): CheckJNI is ON
10-24 13:02:53.108: D/dalvikvm(5782): Trying to load lib libjavacore.so 0x0
10-24 13:02:53.118: D/dalvikvm(5782): Added shared lib libjavacore.so 0x0
10-24 13:02:53.159: D/dalvikvm(5782): Trying to load lib libnativehelper.so 0x0
10-24 13:02:53.168: D/dalvikvm(5782): Added shared lib libnativehelper.so 0x0
10-24 13:02:54.324: D/AndroidRuntime(5782): Calling main entry com.android.commands.pm.Pm
10-24 13:02:54.398: D/AndroidRuntime(5782): Shutting down VM
10-24 13:02:54.418: D/dalvikvm(5782): GC_CONCURRENT freed 102K, 78% free 466K/2048K, paused 1ms+3ms, total 22ms
10-24 13:02:54.448: D/dalvikvm(5782): Debugger has detached; object registry had 1 entries
10-24 13:04:07.651: E/ThrottleService(159): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory)
10-24 13:05:07.188: E/MP3Extractor(39): Unable to resync. Signalling end of stream.
10-24 13:05:08.118: I/AudioService(159):  AudioFocus  abandonAudioFocus() from android.media.AudioManager@412af538
10-24 13:06:00.370: D/dalvikvm(220): GC_CONCURRENT freed 386K, 57% free 9099K/20743K, paused 74ms+10ms, total 195ms 
```

这是控制台窗口

```
[2012-10-24 15:02:53 - SMSApp] ------------------------------
[2012-10-24 15:02:53 - SMSApp] Android Launch!
[2012-10-24 15:02:53 - SMSApp] adb is running normally.
[2012-10-24 15:02:53 - SMSApp] No Launcher activity found!
[2012-10-24 15:02:53 - SMSApp] The launch will only sync the application package on the device!
[2012-10-24 15:02:53 - SMSApp] Performing sync
[2012-10-24 15:02:53 - SMSApp] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'NFC-Smartphone-1'
[2012-10-24 15:02:55 - SMSApp] Application already deployed. No need to reinstall.
[2012-10-24 15:02:55 - SMSApp] \SMSApp\bin\SMSApp.apk installed on device
[2012-10-24 15:02:55 - SMSApp] Done! 
```

如您所见，该应用程序已安装在模拟器上，但在第一次安装该应用程序时会出现同样的问题。让我知道查看代码是否有用。

我尝试使用稍微不同版本的同一应用程序，只是为了强制 Eclipse 在模拟器中重新安装该应用程序（添加了一个空格）。这是重新安装的LogCat：

```
10-25 12:43:14.628: D/AndroidRuntime(701): >>>>>> AndroidRuntime START     com.android.internal.os.RuntimeInit <<<<<<
10-25 12:43:14.628: D/AndroidRuntime(701): CheckJNI is ON
10-25 12:43:14.687: D/dalvikvm(701): Trying to load lib libjavacore.so 0x0
10-25 12:43:14.707: D/dalvikvm(701): Added shared lib libjavacore.so 0x0
10-25 12:43:14.747: D/dalvikvm(701): Trying to load lib libnativehelper.so 0x0
10-25 12:43:14.747: D/dalvikvm(701): Added shared lib libnativehelper.so 0x0
10-25 12:43:15.647: D/AndroidRuntime(701): Calling main entry  com.android.commands.pm.Pm
10-25 12:43:15.707: W/ActivityManager(148): No content provider found for permission revoke: file:///data/local/tmp/SMSApp.apk
10-25 12:43:15.737: W/ActivityManager(148): No content provider found for permission revoke: file:///data/local/tmp/SMSApp.apk
10-25 12:43:15.917: I/PackageManager(148): Removing non-system package:com.storassa.android.smsapp
10-25 12:43:15.917: I/ActivityManager(148): Force stopping package com.storassa.android.smsapp uid=10044
10-25 12:43:15.967: I/dalvikvm(148): Jit: resizing JitTable from 4096 to 8192
10-25 12:43:16.088: I/PackageManager(148): Package com.storassa.android.smsapp codePath changed from /data/app/com.storassa.android.smsapp-2.apk to /data/app/com.storassa.android.smsapp-1.apk; Retaining data and using new
10-25 12:43:16.098: I/PackageManager(148): Running dexopt on: com.storassa.android.smsapp
10-25 12:43:16.948: D/dalvikvm(715): DexOpt: load 124ms, verify+opt 526ms, 730780 bytes
10-25 12:43:16.977: I/ActivityManager(148): Force stopping package com.storassa.android.smsapp uid=10044
10-25 12:43:16.977: W/PackageManager(148): Code path for pkg : com.storassa.android.smsapp changing from /data/app/com.storassa.android.smsapp-2.apk to /data/app/com.storassa.android.smsapp-1.apk
10-25 12:43:16.977: W/PackageManager(148): Resource path for pkg : com.storassa.android.smsapp changing from /data/app/com.storassa.android.smsapp-2.apk to /data/app/com.storassa.android.smsapp-1.apk
10-25 12:43:17.067: D/PackageManager(148): New package installed in /data/app/com.storassa.android.smsapp-1.apk
10-25 12:43:17.337: D/dalvikvm(148): GC_CONCURRENT freed 664K, 8% free 11375K/12231K, paused 77ms+12ms, total 180ms
10-25 12:43:17.337: D/dalvikvm(148): WAIT_FOR_CONCURRENT_GC blocked 100ms 
```

另一个提示：LogCat 中不会出现已保存的过滤器。

# internet-explorer-8 - Highcharts Internet Explorer 8.0.6 问题

> ID：13050084
> 
> 赞同：1
> 
> 时间：2012-10-24T13:18:38.070
> 
> 标签：internet-explorer-8, highcharts

我正在使用 Highcharts Master-Details 图表，它在 IE 8.0.6 上隐藏标题和子标题文本，在缩放时隐藏轴标签。highcharts [Master-Details Chart 的](http://www.highcharts.com/demo/dynamic-master-detail)示例具有输出：

**适用于 IE 8.0.7（不支持 HTML5）和 Firefox、Chrome 和其他支持 HTML 5 的浏览器 **

![在此处输入图像描述](../Images/2ed66d9b64bf9aa226d33c7d9a411f1e.png)

和缩放：

![在此处输入图像描述](../Images/7a8288bf45ea9f8ee47af4bd0d3cd63a.png)

**对于 IE 8.0.6 **

不显示标题和副标题文本：

![在此处输入图像描述](../Images/a559e2a37d7976e5121bf13d54b64109.png)

缩放时，隐藏详细图表的轴标签：

![在此处输入图像描述](../Images/f4ad98a3e0122019a32b958af6bf8449.png)

有什么建议么？

# c# - .net 4 中的 AsyncBridge 无法等待任务

> ID：13050086
> 
> 赞同：3
> 
> 时间：2012-10-24T13:18:43.843
> 
> 标签：c#, .net-4.0, async-await, async-ctp

我有一个 .net 4 项目，我想在其中使用异步功能。

所以我添加了 Async .net 4 桥。

我的方法被声明为

```
public async Task<string> Foo(string value1, string value2) 
```

消费者这样调用消息

```
private static async void run()
{
    string result = await adapter.Foo();
} 
```

但编译器告诉我

> 错误 1 ​​无法等待 'System.Threading.Tasks.Task' C:\dev\TestRunner\Program.cs 34 29 TestRunner。

当我将项目切换到 4.5 时，它可以工作任何提示出了什么问题？

Foo 方法本身包含一个等待 HttpClient.Get 的工作。

这里是有效的 FOO 方法的代码：

```
 HttpClient client = new HttpClient();
  string url = ServerUrl + @"/api/test";    
  var content = getjsonContent();
  var result = await client.PostAsync(); 
```

# typo3 - 无法在 RTE 中选择文本样式

> ID：13050092
> 
> 赞同：0
> 
> 时间：2012-10-24T13:19:08.490
> 
> 标签：typo3, rte, tsconfig

在`Page TSConfig`根页面上，我有以下代码：

```
/////////////////////////////////////////////////////////////
//    RTE
///////////////////////////////////////////////////////////// 
RTE.classes{
  highlight{
      name = highlight
      value = color:#636466; font-size:15px;
  } 
  brown{
      name = braun
      value = color:#9A3811;
  }
}

RTE.default{
  ignoreMainStyleOverride = 1 
  useCSS = 1
  contentCSS = fileadmin/templates/css/rte.css
  classesCharacter := addToList(highlight, brown)
  classesParagraph := addToList(highlight, brown)
  proc.allowedClasses := addToList(highlight, brown)
  showTagFreeClasses = 1
} 
```

在我的`rte.css`我有这个：

```
/* content of rte.css */

.highlighthighlight {
    font-size: 15px;
    color: #636466;
}

.brown {
    color: #9A3811;
} 
```

前端采用相同的样式`style.css`。如果我在编辑器中，我无法选择文本样式。它总是被禁用。我想在一段中标记一些单词。我尝试使用不同的浏览器（IE、FF、Opera ...），但在所有浏览器中都禁用了文本样式。我能做些什么？

我有 Typo3 4.7.5

**编辑**

问题是由于不推荐使用的属性（请参阅[此处](http://jweiland.net/typo3/anleitung/rte/rte-fuer-zusaetzliche-klassen-anpassen.html)））。我当前的代码看起来像

```
/////////////////////////////////////////////////////////////
//    RTE
///////////////////////////////////////////////////////////// 
RTE.default{
  ignoreMainStyleOverride = 1 
  useCSS = 1
  contentCSS = fileadmin/templates/css/rte.css
  proc.allowedClasses := addToList(highlight, brown)
  buttons {
    blockstyle.tags.div.allowedClasses := addToList(highlight, brown)
    textstyle.tags.span.allowedClasses := addToList(highlight, brown)
  }
  showTagFreeClasses = 1
}

RTE.classes{
  highlight{
      name = highlight
      value = color:#636466; font-size:15px;
  } 
  brown{
      name = braun
      value = color:#9A3811;
  }
} 
```

现在我可以选择一种文本样式，但只能选择其中一种。还有一种块样式的名称是错误的...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T14:04:31.937

我的 rte.css 中有错误。这似乎有效。

**rte.css**

```
div.highlight, span.highlight, p.highlight, .brown {
    font-size: 15px;
    color: #636466;
}

div.brown, span.brown, p.brown, .brown {
    color: #9A3811;
} 
```

**页面 TSConfig**

```
/////////////////////////////////////////////////////////////
//    RTE
///////////////////////////////////////////////////////////// 
RTE.classes{
  highlight{
      name = highlight
      value = color:#636466; font-size:15px;
  } 
  brown{
      name = braun
      value = color:#9A3811;
  }
}

RTE.default{
  ignoreMainStyleOverride = 1 
  useCSS = 1
  showTagFreeClasses = 1
  contentCSS = fileadmin/templates/css/rte.css
  buttons {
    blockstyle.tags.div.allowedClasses := addToList(highlight, brown)
    blockstyle.tags.p.allowedClasses := addToList(highlight, brown)
    textstyle.tags.span.allowedClasses := addToList(highlight, brown)
  }
  proc.allowedClasses := addToList(highlight, brown)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-14T09:24:37.610

**适用于 TYPO3 版本 7.6.X**

> 将以下 TS 配置放入**页面 TSConfig**（在您站点的根目录中），这将添加类作为块样式和文本样式的选项。

```
RTE {
    default {
        proc.allowedClasses >
        proc.allowedClasses = btn, btn-default, infoRow
        buttons {
            blockstyle.tags {
                div.allowedClasses = btn, btn-default, infoRow
            }
            textstyle.tags {
                span.allowedClasses = btn, btn-default
            }
        }
        contentCSS = fileadmin/templates/rte.css
        showTagFreeClasses = 0
        enableWordClean = 1
        useCSS = 0
    }
}

RTE.default.FE < RTE.default
RTE.default.FE.FE >
RTE.config.tt_content.bodytext
RTE.config.tt_content.bodytext.proc.allowedClasses = btn, btn-default, infoRow 
```

> 在提到的路径创建 CSS 文件，即**fileadmin/templates/rte.css**，它将包含以下代码

```
p.btn-default, span.btn-default{
    color:green;
    background-color:yellow ;
}
p.btn, span.btn{

}
p.infoRow{
    color:grey;
} 
```

# c# - webBrowser 检查 jquery 对话框是否处于活动状态

> ID：13050093
> 
> 赞同：0
> 
> 时间：2012-10-24T13:19:08.383
> 
> 标签：c#, browser

是否有任何可能的方法来检查 webBrowser1 中是否有任何 jquery 对话框处于活动状态？这是我想 **使用 c# webBrowser 类检查的对话框的外观，这不是在简单的 html 网页中**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:22:42.737

你试过这个 -

```
if($(".ui-dialog").is(":visible"))
{
//dialog is open
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:25:35.060

用这个：

```
$("#mydialog").dialog( "isOpen" ) 
```

# spring - Hibernate 4 对 org.joda.time.contrib.hibernate.PersistentDateTime 的持久性支持的解决方法是什么

> ID：13050094
> 
> 赞同：1
> 
> 时间：2012-10-24T13:19:10.153
> 
> 标签：spring, hibernate

大家好，我是 Spring 新手，正在使用以下依赖项构建应用程序

```
 <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time-hibernate</artifactId>
            <version>1.3</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.7.Final</version>
        </dependency>
                <spring.framework.version>3.1.2.RELEASE</spring.framework.version> 
```

我无法使用 org.joda.time.contrib.hibernate.PersistentDateTime 类中数据类型为 DateTime 的字段来持久化对象。

```
@Column(name = "LAST_MODIFIED_DATE")
    @Type(type = "org.joda.time.contrib.hibernate.PersistentDateTime")
    public DateTime getLastModifiedDate() {
        return lastModifiedDate;
    } 
```

任何人都可以建议如何使用 joda DateTime。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:51:13.007

我一整天都在尝试这个，终于得到了如下的解决方案。更高版本的 hibernate 不支持 org.joda.time.contrib.hibernate.PersistentDateTime 类持久性。相反，我们使用一些非常具体的库，比如

```
<dependency>
    <groupId> org.jadira.usertype </groupId>
    <artifactId> usertype.core </artifactId>
    <version> 3.0.0.CR3 </version>
</dependency> 
```

这就是我们如何将数据保存在数据库中以用于审计目的。

```
@Column(name = "CREATED_DATE")
    @Type(type = "org.jadira.usertype.dateandtime.joda.PersistentDateTime")
    public DateTime getCreatedDate() {
        return createdDate;
    } 
```

# android - 如何在android中预填充Web表单？

> ID：13050096
> 
> 赞同：1
> 
> 时间：2012-10-24T13:19:21.500
> 
> 标签：android, forms, web

这是我正在尝试做的事情：

我想创建一个 android 应用程序来捕获 android 手机的电子邮件地址和电话号码。

然后，使用这些信息预填充多提交 Web 表单。

比如说，我有一个表单[http://unlimited-trials.com/mobijob/search.php](http://unlimited-trials.com/mobijob/search.php)（只需将其视为电子邮件地址和电话号码的文本框）。如果此链接在我的手机中打开，则应填写我的电子邮件地址和电话号码。

我已经有一个表格，我已经可以使用下面的代码在我的应用程序中捕获电话号码和电子邮件添加：

```
tMgr =(TelephonyManager)this.getSystemService(Context.TELEPHONY_SERVICE);
        mPhoneNumber = tMgr.getLine1Number(); 
```

我的问题是如何将这些数据填充到我的表单中。如果我在正确的轨道上，请告诉我。谢谢

编辑：

我尝试了米洛斯爵士的想法：

HTML 代码：

```
<input class="ui-input-text ui-body-a ui-corner-all ui-shadow-inset" data-theme="a" id="location" name="location" type="text"> 
```

安卓代码：

```
webView.loadUrl("javascript: document.forms['location'].value ='" + somevalue+ "')"); 
```

但它没有用。我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:25:38.273

你可以使用你的 formand 的 id 尝试这样的事情：

```
mWebView.loadUrl("javascript: document.forms['myform_id'].value ='" + newValue + "')"); 
```

或者

```
document.getElementById('element_id').value = '" + "stringvalue" +"'; 
```

# jquery - jquery click() 不起作用

> ID：13050097
> 
> 赞同：0
> 
> 时间：2012-10-24T13:19:26.213
> 
> 标签：jquery, ajax, asp.net-mvc-3

我对 jQuery click() 函数有疑问。

我使用此函数以编程方式单击一个链接，该链接调用一个将新对象添加到数据库的 ajax 函数。

当我提交表单时，在对象数据表中为我的新对象添加了一个带有新链接的 tr，我想以编程方式单击这个新链接来加载对象属性并显示它们。

问题是带有 td 和 link 的新 tr 在 DOM 中不存在并且该函数`$.('#elem').click')`不起作用。

我在其他帖子中看到我必须将点击事件与新的 .on 函数绑定，如下所示：

```
$('#parent-items').on('click', 'elem', function() {
   // [...]
}); 
```

我不知道我必须写什么来代替 [...]，在我的 javascript 代码的末尾，我这样调用 click 函数：

```
$('#myelem').click(); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:22:55.543

其实没那么难。:)

```
<table id="list">
    <tr>
        <td>John</td>
        <td><a class="btn-hi">Say Hi!</a></td>
        <td><a class="btn-bye">Say Goodbye!</a></td>
    </tr>
    <tr>
        <td>Lucy</td>
        <td><a class="btn-hi">Say Hi!</a></td>
        <td><a class="btn-bye">Say Goodbye!</a></td>
    </tr>
    <tr>
        <td>Sam</td>
        <td><a class="btn-hi">Say Hi!</a></td>
        <td><a class="btn-bye">Say Goodbye!</a></td>
    </tr>
</table>

<script>
$('#list').on('click', 'a', function() {
    // Wrap the clicked <a> element with jQuery
    var $this = $(this);

    // Get the parent <tr> element
    var $tr = $this.closest('tr');

    // Get all (direct) children elements (<td>) that are inside the current <tr> element
    var $tds = $tr.children();

    // Get the text from the first <td> element in the current row
    var name = $tds.eq(0).text();

    // Get the type (class name) of clicked link
    var type = $this.attr('class');

    if (type == 'btn-hi') {
            alert( 'Hi, ' + name + '!' );
    } else if (type == 'btn-bye') {
            alert( 'Goodbye, ' + name + '!' );
    }
});
</script> 
```

看看 JSBin 中的这个演示：http: [//jsbin.com/welcome/38776/edit](http://jsbin.com/welcome/38776/edit)

每次用户单击`<a>`元素内部的任何元素时，都会执行单击事件`<table id="list">`。它被称为“事件委托” - [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

因此，您可以动态地向表中添加更多行，一切仍然有效。

# asp.net - ASP.Net UpdatePanel 不做回发

> ID：13050107
> 
> 赞同：0
> 
> 时间：2012-10-24T13:19:47.840
> 
> 标签：asp.net, updatepanel, postback

我有一个 ASP.Net 页面，它的功能很长，很耗时。我希望它在计算时显示“加载”字样，并在完成后显示结果。这是代码：

```
<asp:UpdatePanel UpdateMode="Always" runat="server" ID="upanel1">
        <ContentTemplate>
            <asp:Button ID="btnGetInfo"  runat="server" Text="Lekérés" OnClick="btnGetInfo_Click" />
        </ContentTemplate>
        <Triggers>
           <asp:AsyncPostBackTrigger ControlID="btnGetInfo" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
</div>
<asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="upanel1">
    <ProgressTemplate>
        <div>
            LOADING</div>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

它几乎可以工作（我可以看到“LOADING”并且在 btnGetInfo_Click 函数结束后，“LOADING”disapperrs）。完成后我只需要一个 PostBack。

我发现了一些类似的问题，但解决方案对我没有帮助。

谢谢你的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:37:18.350

单击 btnGetInfo 时发生的是部分页面回发，它会刷新 UpdatePanel ContentTemplate 中的内容。调用 DataBind() 时 GridView 未更新的原因是它不在 UpdatePanel ContentTemplate 中。

触发整页回发违背了 UpdatePanel 的目的。我建议您将 GridView 放在 ContentTemplate 中以解决问题。

# php - 我可以从 php 文件中读取 xml 吗？

> ID：13050108
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:19:51.767
> 
> 标签：php

我有读取在线设置的应用程序，直到现在这些设置都存储在 xml 中。所以我的应用程序读取了它的设置：

```
"http://foo.net/app/setting.xml" 
```

但我希望它更容易维护，并在数据库中存储大量数据，所以我想用我在 php 文件中的地方替换`../app/setting.xml`类似的东西`../setting.php`

```
<?php

include mysql stuff ..

$bookid = $_GET['id'];
read database based on $bookid;

?>

<?xml version="1.0" encoding="utf-8"?>
<book>
<name><?php echo $row['name']; ?></name>
<published><?php echo $row['published']; ?></published>
</book> 
```

可行吗？我是否必须关心诸如标头过期和缓存之类的标头内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:30:15.683

这是可行的。您可以通过以下方式发送您的 XML 标头

```
header("Content-Type: application/xml"); 
```

在任何输出之前。

```
<?php
header("Content-Type: application/xml");

...
$bookid = $_GET['id'];
...

?>

**here your XML.** 
```

现在您可以将其作为普通的 xml 文件处理。

# facebook - 用于撰写 Facebook 消息的 URL（新布局）

> ID：13050113
> 
> 赞同：2
> 
> 时间：2012-10-24T13:20:05.420
> 
> 标签：facebook, url, message

我使用以下 URL 发送带有预填充文本的消息。
http://www.facebook.com/messages/[user]?msg_prefill=[message]
例如。[http://www.facebook.com/messages/facebook?msg_prefill=hello](http://www.facebook.com/messages/facebook?msg_prefill=hello)

但是 msg_prefill 参数似乎在新的 Facebook 消息布局上被贬低了。
[http://mashable.com/2012/08/22/facebook-revamps-messages-to-look-more-like-email/](http://mashable.com/2012/08/22/facebook-revamps-messages-to-look-more-like-email/)

有谁知道如何为新布局添加预填充消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:47:40.097

我仍然无法发送带有预填充文本的消息。但我找到了另一种使用发送对话框发送链接的方法。
[https://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

前任。1
[https://www.facebook.com/dialog/send?app_id=123050457758183&to=zuck&name=Hello&link=http://www.google.com/&redirect_uri=http://www.facebook.com/](https://www.facebook.com/dialog/send?app_id=123050457758183&to=zuck&name=Hello&link=http://www.google.com/&redirect_uri=http://www.facebook.com/)

但是，这可能对某些人（包括我）不起作用，因为在“链接”参数中使用某些域会导致错误，因为这个错误。
[http://developers.facebook.com/bugs/284149695026014?browse=search_509788e98cb627971133933](http://developers.facebook.com/bugs/284149695026014?browse=search_509788e98cb627971133933)

前任。2
[https://www.facebook.com/dialog/send?app_id=123050457758183&name=People+Argue+Just+to+Win&link=http%3A%2F%2Fwww.facebook.com%2FCili.Pica%2Fapp_469715143040257&redirect_uri=http%3A %2F%2Fwww.example.com%2Fresponse](https://www.facebook.com/dialog/send?app_id=123050457758183&name=People+Argue+Just+to+Win&link=http%3A%2F%2Fwww.facebook.com%2FCili.Pica%2Fapp_469715143040257&redirect_uri=http%3A%2F%2Fwww.example.com%2Fresponse)

此外，发送对话框链接不能在 iPhone 应用程序、Android 应用程序和移动版 facebook 上使用。

前任。3
[https://m.facebook.com/dialog/send?app_id=123050457758183&to=zuck&name=Hello&link=http://www.google.com/&redirect_uri=http://www.facebook.com/](https://m.facebook.com/dialog/send?app_id=123050457758183&to=zuck&name=Hello&link=http://www.google.com/&redirect_uri=http://www.facebook.com/)

# javascript - 通过 JavaScript 添加 -webkit -moz -ms -o css 规则？

> ID：13050115
> 
> 赞同：0
> 
> 时间：2012-10-24T13:20:07.710
> 
> 标签：javascript, css

好的，我用简单的 css 规则理解 JavaScript addRule：

```
firstRule.style.color = "red"; 
```

但是我该如何添加例如：

```
-webkit-transform:translateX(16em) perspective(600px) rotateY(10deg)"; 
```

像这样的东西？：

```
firstRule.style.-webkit-transform = "translateX(16em) perspective(600px) rotateY(10deg)"; 
```

因为它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:26:33.577

骆驼化它（用破折号后面的大写字符替换任何破折号）：

```
firstRule.style.WebkitTransform = "translateX(16em) perspective(600px) rotateY(10deg)"; 
```

您还可以使用`.setProperty`：

```
firstRule.style.setProperty( "-webkit-transform", "translateX(16em) perspective(600px) rotateY(10deg)" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:30:43.430

你可以这样做：

```
firstRule.style["-webkit-transform"] = firstRule.style["-moz-transform"] = "translateX(16em) perspective(600px) rotateY(10deg)"; 
```

只是添加“-moz”前缀的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:29:06.260

```
document.getElementById('firstRule').setAttribute('style','xxxxxx'); 
```

干净简单

# java - 返回空值和空字符串之间的区别？

> ID：13050118
> 
> 赞同：8
> 
> 时间：2012-10-24T13:20:13.897
> 
> 标签：java, servlets

假设您有一个名为“adminNo”的输入字段。调用 getParameter("adminNo") 方法返回 null 值和返回空字符串 "" 有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:21:45.677

如果调用的参数存在但没有值，则调用`getParameter("adminNo")`返回空，如果没有这样的参数，则返回。`String``adminNo``null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:25:41.113

从[JavaDoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)：

> 返回请求参数的值作为 a `String`，或者`null`如果参数不存在。

这实际上意味着：

*   当返回值为`null`HTML 表单时，没有包含参数名称的输入
*   当值为空时`String`，HTML 表单确实有一个带有参数名称的输入，但没有设置任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:25:07.053

如果方法返回空字符串，它返回一个对象（对它的引用），你可以使用它，当它返回 null 时，你就不能使用它，因为没有什么可使用的。

```
String s = "";
s.isEmpty(); // returns true

String s = null;
s.isEmpty(); // throws null pointer exception. 
```

当您想要拥有更健壮的代码时，返回一个空字符串会更好，但如果您返回 null，那么空指针将帮助您找到逻辑中的某种错误。可能不适合使用空字符串，然后 null 值将帮助您找到不需要检查的地方。

# .htaccess - 需要使用 htaccess 帮助的测试站点

> ID：13050120
> 
> 赞同：0
> 
> 时间：2012-10-24T13:20:18.380
> 
> 标签：.htaccess

我的网站位于根网站 .com/ 我想设置一个像这个网站 .com/us/ 这样的文件夹

文件夹 /us/ 是空的，当有人访问该文件夹时，该文件夹显示的内容与网站 .com 中的内容相同，但仍保留在网站 .com/us/ 上。

这是一个转折点，如果我想显示不同的 header.php 或 js 或 css 文件并将其加载到域网站 .com/us/ 中，我需要使用 htaccess 来使用它而不是网站 .com/ 上的内容。我将使用相同的目录结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:00:21.470

这是您可以解决的许多方法之一。这是一个使用 mod_rewrite 和 php5 的粗略示例，希望能让您朝着想要的方向前进。

使用下面的示例导航到应该如下所示

*   [http://example.com/](http://example.com/)应该显示带有 header-default.php 标头的“内容”
*   [http://example.com/us/](http://example.com/us/)应该显示带有 header-us.php 标头的“内容”
*   [http://example.com/some-other-directory/file.php](http://example.com/some-other-directory/file.php)应显示带有 header-default.php 标头的“其他目录中的不同内容”
*   [http://example.com/us/some-other-directory/file.php](http://example.com/us/some-other-directory/file.php)应显示带有 header-us.php 标头的“其他目录中的不同内容”

## .htaccess

```
<IfModule php5_module>
    php_value auto_prepend_file /var/www/vhosts/example.com/httpdocs/header.php
    php_value auto_append_file  /var/www/vhosts/example.com/httpdocs/footer.php
</IfModule>

<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^us/?$    /index\.php?tpl=us    [QSA,L]

    RewriteCond %{DOCUMENT_ROOT}/$1 !-f
    RewriteRule ^us/(.*)$    /$1?tpl=us    [QSA,L]
</IfModule> 
```

## /header.php

```
<?php 
$tpl = $_GET['tpl'];
if ($tpl === 'us') {
    require_once $_SERVER['DOCUMENT_ROOT'].'/header-us.php';
}
else {
    require_once $_SERVER['DOCUMENT_ROOT'].'/header-default.php';
}
?> 
```

## /header-us.php

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
  <title>USA</title>
  <meta name="description" content="Welcome to the US section">
  <link rel="stylesheet" href="/css/us/style.css">
  <script src="/js/us/scripts.js"></script>
</head>
<body> 
```

## /header-default.php

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
  <title>Welcome to index</title>
  <meta name="description" content="Welcome to the DEFAULT section">
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/scripts.js"></script>
</head>
<body> 
```

## /页脚.php

```
<p>user contributions licensed under cc-wiki with attribution required</p>
</body>
</html> 
```

## /index.php

```
Content 
```

## /some-other-directory/file.php

```
Different Content in some other directory 
```

# jquery - jQuery 在我的服务器上不起作用，但在 jsfiddle 中起作用

> ID：13050121
> 
> 赞同：6
> 
> 时间：2012-10-24T13:20:21.523
> 
> 标签：jquery

这现在开始吓到我了。这里发生了什么事？

[在http://www.mauricekappelhof.nl/work/TemplateTest/Backend/menu.php?page=1](http://www.mauricekappelhof.nl/work/TemplateTest/Backend/menu.php?page=1)上看不到结果在[http://jsfiddle.net/x7bgF/ 上看](http://jsfiddle.net/x7bgF/) 工作结果

哦，我想用下划线替换空格。因此，如果您在“Titel”字段中键入空格，“link”字段会显示相同的内容，但会带有下划线。

这是关于这段 jQuery

```
 $(document).ready(function(){
        $('#title').keyup(function(e){
            var e = e || window.event;
            $('#link').val($(this).val().replace(/\s/g, '_'));
        });​
    });
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T13:23:20.917

你有一个非法字符

```
$(document).ready(function(){
    $('#title').keyup(function(e){
        var e = e || window.event;
        $('#link').val($(this).val().replace(/\s/g, '_'));
    });? // <--  delete this and rewrite it
}); 
```

你可以在记事本++中看到它

它来自 jsfiddle 的复制和粘贴

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T13:23:26.103

我得到：

> 语法错误：非法字符
> 
> });?
> 
> menu.php?page=1（第 50 行，第 5 列）

在我的日志上（请注意，我的萤火虫上没有显示 ?，似乎您的 php 文件中有隐藏字符或其他内容）。

当您更改源代码的编码时，您将获得：

```
$(document).ready(function(){
    $('#title').keyup(function(e){
        var e = e || window.event;
        $('#link').val($(this).val().replace(/\s/g, '_'));
    });â€‹
}); 
```

如果您使用它作为编码，您可能希望将您的 php 文件更改为 UTF-8，firefox 说您使用的是 ISO-8859-1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:39:09.477

我已经测试了您的代码并做了一些更改：

```
$(document).ready(function(){
    $('#title').keyup(function(e) {
        var e = e || window.event;
        $('#link').val($(this).val().replace("/\s/g", '_'));
    });
}); 
```

# ruby-on-rails - 使用 Grape（或 Sinatra）实现超媒体驱动的 API

> ID：13050122
> 
> 赞同：4
> 
> 时间：2012-10-24T13:20:35.017
> 
> 标签：ruby-on-rails, api, sinatra, hypermedia, grape-api

我正在尝试使用直接安装在 Rack 顶部的[Grape](https://github.com/intridea/grape)来实现超媒体驱动的 API 。Grape 支持演示者（“实体”），这似乎是提供所有相关超媒体的合适场所。

如果我有可用的 Rails 路由器，我可以简单地通过它的耳朵选择路由并将其扔到我的演示者逻辑中。例如（[ROAR](https://github.com/apotonick/roar)方法）：

```
link :self do
  article_url(self)
end 
```

但是 Grape 本身并不提供对路由的轻松访问，因为它们没有类似于`article_url`.

有人遇到过 Grape 或 Sinatra 的类似问题吗？有没有一种干净简单的方法来暴露资源链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-03T17:21:16.883

这是可能的，但不像 Rails url 助手那么简单。

来自[https://github.com/intridea/grape#describing-and-inspecting-an-api](https://github.com/intridea/grape#describing-and-inspecting-an-api)：

```
TwitterAPI::versions # yields [ 'v1', 'v2' ]
TwitterAPI::routes # yields an array of Grape::Route objects
TwitterAPI::routes[0].route_version # yields 'v1'
TwitterAPI::routes[0].route_description # etc. 
```

# c# - 以编程方式将表添加到 Microsoft SQL Server Compact 3.5 数据库

> ID：13050123
> 
> 赞同：6
> 
> 时间：2012-10-24T13:20:40.290
> 
> 标签：c#, sql, database, datamodel

我们想以编程方式将一个表添加到我们本地存储的 Microsoft SQL Server Compact 3.5 数据库中。下面的代码创建表。

```
using (SqlCeConnection con = 
          new SqlCeConnection("Data Source=|DataDirectory|\\Database.sdf"))
{
   con.Open();

   using (SqlCeCommand com = 
             new SqlCeCommand("create table test (id int not null)", con))
   {
      Console.WriteLine("Response: " + com.ExecuteNonQuery());
   }

   con.Close();
} 
```

代码工作正常，但该表未在指定数据库表的服务器资源管理器中列出。我们可以将值插入表中并从表中读取数据。

你知道这个问题的任何解决方案吗？

之后我们想添加一个动态数据模型，我们想将其用作我们的表的提供者。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:24:27.637

的使用`|DataDirectory|`意味着您的项目文件夹中有 2 个文件副本。

您的应用程序正在使用`Root\bin\debug`.

你的工具正在寻找`\Root`。

# mysql - 将 MySQL 数据库连接到 Mac 应用程序

> ID：13050133
> 
> 赞同：0
> 
> 时间：2012-10-24T13:21:14.453
> 
> 标签：mysql, macos, cocoa, database-connection

这个问题很简单，但是答案似乎有一百万种变化，因此尽管这个问题之前肯定已经被问过，但我想再问一次，希望可以寻求最新的答案.

基本上我正在创建一个 Mac 应用程序，其中一部分将由我在远程 MySQL 数据库中作为我网站的一部分的数据提供支持。我的问题是：连接到该数据库以便可以在我的应用程序中使用数据的最佳方式是什么？

我已经阅读了许多建议使用 Web 服务将数据库转换为 JSON 或等效的答案，然后将其转换为可通过 Core Data 使用的对象是最好的方法，但是我想要的数据是“哑”的，即我无论如何都不会改变或操纵它，因此我认为 Core Data 对于我需要的东西可能是矫枉过正的。

还有其他更直接的方法来完成这项任务吗？

# elasticsearch - 在 ElasticSearch 中注册和调用查询

> ID：13050136
> 
> 赞同：3
> 
> 时间：2012-10-24T13:21:26.493
> 
> 标签：elasticsearch

是否可以注册查询（如渗透过程）并按名称调用它们来执行它们。我正在构建一个应用程序，让用户保存与标签关联的搜索查询。我想将过滤器生成的查询保存在 ES 中。

如果我将查询保存在索引中，我必须先调用 ES 来检索查询，提取包含查询的字段，然后再次调用 ES 来执行它。我可以一次通话吗？

另一种解决方案是注册查询（带有用户标识符的_percolator标签：/_percolate/transaction/user1_label1

```
{
  "userId": "user1",
  "query":{
     "term":{"field1":"foo" }
   }
} 
```

当有一个新文档时，在非索引模式下使用过滤器（根据 userId 过滤）来检索哪个查询匹配，然后通过添加字段 "label":["user1_label1", "user1_label2"] 来更新文档，最后索引文档。所以标签是在索引时完成的。

你怎么看 ？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:21:59.597

尝试[过滤别名。](http://www.elasticsearch.org/guide/reference/api/admin-indices-aliases.html)

```
curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
         {
            "add" : {
                 "index" : "the_real_index",
                 "alias" : "user1",
                 "filter" : { "term" : { "field1" : "foo" } }
            }
        }
    ]
}' 
```

# c++ - 三元运算符和函数签名

> ID：13050138
> 
> 赞同：10
> 
> 时间：2012-10-24T13:21:28.807
> 
> 标签：c++, ternary-operator, function-signature

假设我有一个具有两个函数的 C++ 类，例如

```
class MyClass
{
    bool Foo(int val);
    bool Foo(string val);
} 
```

是否可以像这样使用三元运算符

```
MyClassInstance->Foo(booleanValue?24:"a string"); 
```

并根据?`MyClass`的值调用不同的函数`booleanValue`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-24T13:23:41.907

不使用三元运算符。三元表达式的类型是它的第二个和第三个操作数的通用类型；如果他们没有共同的类型，你就不能使用它。所以只需使用一个普通的`if`语句：

```
if (booleanValue)
    MyClassInstance->Foo(24);
else
    MyClassInstance->Foo("a string"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T13:23:54.730

三元条件表达式的类型是两个操作数都可转换的常见类型二。正如您似乎暗示的那样，您绝对*不能执行“动态重载解决方案”。*

`int`由于and没有通用类型`char const *`，因此代码甚至无法编译（正如您在测试时肯定注意到的那样）。

（您可能会很高兴知道使用三元条件正是因为这些语义在`std::common_type`trait 类模板的实现中，以及`decltype`.）

（如果条件是*静态*已知的，例如`sizeof(int) != 7`，那么您可以使用模板特化来编写看起来相似的代码来*执行*条件重载决议，但当然是静态的。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T13:23:03.140

不。要执行重载解析，编译器会询问“什么是类型`booleanValue?24:"a string"`？”。这个问题无法回答。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-24T13:23:55.000

不，这是不允许的。

重载是编译时的，因此它不能以这种方式在运行时工作。

在您想要完全这样做的代码中并不常见，但是有时使用 iostream 时希望执行以下操作：

`os << ( condition ? var1 : var2 )`

其中 var1 和 var2 具有不同的类型。那也行不通。

你可以这样做：

```
MyClassInstance->Foo( booleanValue ? boost::any(24) : boost::any("a string") ); 
```

# vb.net - 查找数组中单词的长度 - Visual Basic

> ID：13050145
> 
> 赞同：2
> 
> 时间：2012-10-24T13:22:06.417
> 
> 标签：vb.net, visual-studio-2010

我有一个richtextbox，我将单词转换为一个数组，然后我的代码将获取长度并输出它......唯一的问题是我不知道如何遍历数组的所有不同值来检查数组的每个单独部分的长度。

（我在 TextChanged 上有这个设置）

```
 Dim len1, len2, len3, len4, len5, len6, len7, len8, len9, len10, len11, len12, len13, len14, len15 As Integer
    Dim input As String
    Dim words As String()
    Dim length As Integer

    input = RichTextBox1.Text

    words = input.Split(New String() {" "}, StringSplitOptions.RemoveEmptyEntries)

    For Each w In words

        length = Len(w)

        Select Case length

            Case 1
                len1 = len1 + 1
            Case 2
                len2 = len2 + 1
            Case 3
                len3 = len3 + 1
            Case 4
                len4 = len4 + 1
            Case 5
                len5 = len5 + 1
            Case 6
                len6 = len6 + 1
            Case 7
                len7 = len7 + 1
            Case 8
                len8 = len8 + 1
            Case 9
                len9 = len9 + 1
            Case 10
                len10 = len10 + 1
            Case 11
                len11 = len11 + 1
            Case 12
                len12 = len12 + 1
            Case 13
                len13 = len13 + 1
            Case 14
                len14 = len14 + 1
            Case 15
                len15 = len15 + 1

        End Select

    Next

    letcount.onelet.Text = Val(len1)
    letcount.twolet.Text = Val(len2)
    letcount.threelet.Text = Val(len3)
    letcount.fourlet.Text = Val(len4)
    letcount.fivelet.Text = Val(len5)
    letcount.sixlet.Text = Val(len6)
    letcount.sevenlet.Text = Val(len7)
    letcount.eightlet.Text = Val(len8)
    letcount.ninelet.Text = Val(len9)
    letcount.tenlet.Text = Val(len10)
    letcount.elevenlet.Text = Val(len11)
    letcount.twelevelet.Text = Val(len12)
    letcount.thirteenlet.Text = Val(len13)
    letcount.fourteenlet.Text = Val(len14)
    letcount.fifteenlet.Text = Val(len15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:26:41.690

Bendataclear 向您展示了如何使用 For Next 循环。如果可以使用 LINQ，则可以使用以下代码：

```
Sub Main
    Dim words As String() = {"One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten" }

    Dim lengthsOnly = words.Select(Function(w) w.Length).ToArray()

    Dim wordsAndLengths = words.Select(Function(w) New With { .Word = w, .Length = w.Length }).ToArray()

End Sub 
```

第一个 Select 只获取单词长度，第二个返回一个包含每个单词及其长度的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:39:01.903

您可以忽略双空格并输入，因为它们被认为是空的：

```
 'HOW CAN I EXCLUDE DOUBLE SPACES 
    'AND INCLUDE IF SOMEBODY PRESSES ENTER?
    words = input.Split(New String() {" "}, StringSplitOptions.RemoveEmptyEntries) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:36:55.807

大卫，

给你一些澄清：

w 是一个字符串。编译器在设计时确定类型。请参阅此 SO 线程 [What does VB.Net For Each Loop 查看以推断类型](https://stackoverflow.com/questions/9369803/what-does-vb-net-for-each-loop-look-at-to-infer-the-type)

```
Dim words() As String = {"0", "1", "2"}
For Each w In words
    System.Windows.Forms.MessageBox.Show(w)
Next 
```

编译器通过查看 IEnumerable 集合（数组、列表等）中的元素来推断类型。智能感知甚至在设计时知道它是一个字符串，即使 w 看起来它被定义为泛型。自己试试...

但。您当然可以显式添加类型

```
Dim words() As String = {"0", "1", "2"}
For Each w As String In words
    System.Windows.Forms.MessageBox.Show(w)
Next 
```

字符串数组示例并没有真正展示速记的便利性。见下文

```
Dim dictionaryOfDictionaries As New Dictionary(Of String, Dictionary(Of String, String))
For Each d As KeyValuePair(Of String, Dictionary(Of String, String)) In dictionaryOfDictionaries
    ' do something with each dictionary d
Next
' is identical to
For Each d In dictionaryOfDictionaries
    ' do something with each dictionary d
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:54:53.823

你可以使用另一个数组吗？

```
Dim arr(14) as integer

Dim input As String
Dim words As String()
Dim length As Integer

input = RichTextBox1.Text

words = Split(input, " ")

For Each w in words

    Dim l as Integer = Math.Min(Len(w) - 1,14)
    arr(l) = arr(l) + 1

Next 
```

**编辑**

回答评论中的问题：

`w`是一个变量，在快捷方式代码中声明`For Each w in words`

快捷方式声明一个变量`w`，然后用数组的每个成员填充它并运行和`words`之间的代码。`For``next`

没有捷径的更长的方法是这样的：

```
Dim i as Integer

For i = 0 to words.GetUpperBound(0) -1

    Dim w as string

    w = words(i)

    i = i + 1

    'Rest of code

Next i 
```

下一部分`Dim l as Integer = Math.Min(Len(w) - 1,14)`将`l`单词的长度设置为最多 14 个，就好像我们有一个长度超过 15 个字母的单词它不适合数组一样。

另一种方法是：

```
Dim l as Integer 

l = Len(w) - 1

If l > 14 then
    l = 14
End If

arr(l) = arr(l) + 1 
```

# node.js - https中的node.js + express + secureConnection事件

> ID：13050151
> 
> 赞同：1
> 
> 时间：2012-10-24T13:22:16.203
> 
> 标签：node.js, https, express, ssl

我是 node.js 的初学者。这是我正在尝试使用 express + https 做的事情。
- 端口 443 上的 node.js https 服务器
- C 客户端连接到服务器
- 移动客户端连接到服务器并执行 GET
- node.js 服务器向 C 客户端发送 GET 请求并将响应发送回移动设备

从 node.js 向 C 客户端发送 GET 请求时，我无法获取 TLS 套接字实例。

node.js https 文档说

```
Class: https.Server# 

This class is a subclass of tls.Server and emits events same as http.Server. See
http.Server for more information. 
```

存放插座后

```
https.on('connection', function(socket) {
global_https_obj[0]=socket;
}); 
```

并且做`global_https_obj[0].write("DEADBEEF")`..它发送没有SSL标头和客户端块的纯文本流量`SSL_read() [openSSL]`[C客户端确实收到GET请求，但openSSL提供解密警报并且无法解密它]

似乎 TLS 套接字可通过`secureConnection`事件访问，而不是由 https 发出。

伙计们有什么办法掌握TLS套接字吗？或者是否可以在 https 中添加 secureConnection 事件监听器？

# ruby-on-rails - Rails 3虚拟属性不保存

> ID：13050152
> 
> 赞同：1
> 
> 时间：2012-10-24T13:22:16.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个具有虚拟属性的模型：

```
attr_accessible :published_at

def published_at_text
  I18n.localize(published_at, format: :long_no_day_with_seconds) if published_at
end

def published_at_text=(text)
  self.published_at = Chronic.parse(text)
end 
```

这在单元测试中工作正常，但在视图中更改了 published_at_text 字段时不会保存。我试过使用`attr_accessible :published_at_text`, 并添加`published_at_will_change!`到 setter 方法，但我无法让它工作。

这`development.log`表明已将 published_at_text 的更改值传入，但在 setter 中添加对 Rails.logger 的调用似乎表明它甚至没有被调用。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:26:57.990

好吧，您没有提供使用 params 哈希创建对象的控制器方法，但我可以猜测。

您应该使用传递给控制器​​的参数显式调用 setter。

然后检查值是否在您的模型上更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:01:48.627

找到它：虚拟属性的字段没有作为文章的一部分传回，因此它们没有显示在 params 哈希中。

替换这个：

```
<%= text_field_tag 'article_published_at_text', @article.published_at_text, class: 'text_date show_seconds' %> 
```

有了这个：

```
<%= text_field_tag 'article_published_at_text', @article.published_at_text, name: 'article[published_at_text]', class: 'text_date show_seconds' %> 
```

解决了这个问题。

# python - 在 Python 中从字母数字字符串中解析整数

> ID：13050157
> 
> 赞同：0
> 
> 时间：2012-10-24T13:22:19.913
> 
> 标签：python, regex

我有一个字母数字代码，如下所示：

```
"PRODUCTNAME600COUPON50" 
```

哪里`PRODUCTNAME`是长度不一致的变量

我希望能够将字符串的整数值提取到一个列表中——在这种情况下`[600, 50]`。

我正在寻找一种巧妙的 Pythonic 方式来实现它——我从[这个解决方案](https://stackoverflow.com/q/4510709/165673)开始，用于查找字符串中第一个数字的索引，但在这种情况下它不够用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:23:18.087

使用以下正则表达式：

```
In [67]: strs="PRODUCTNAME600COUPON50"

In [68]: re.findall(r'\d+',strs)
Out[68]: ['600', '50'] 
```

获取整数：

```
In [69]: map(int,re.findall(r'\d+',strs))
Out[69]: [600, 50] 
```

# ios - 调用 ReleaseDesignerOutlets 对 MonoTouch GC 有影响吗？

> ID：13050163
> 
> 赞同：4
> 
> 时间：2012-10-24T13:22:40.080
> 
> 标签：ios, memory-management, xamarin.ios, garbage-collection

我正在编写的应用程序需要支持 iOS5+。最近，Apple 过时`ViewDidUnload`了，因为我们被告知在发布内存警告视图时没有显着的内存增益。

在我的应用程序中，我有一个`UIViewController`管理非常重的`UIWebView`.
此视图控制器以模态方式呈现，因此经常被创建和关闭。

通过使用 Instruments，我发现它所占用的内存`UIWebView`在其控制器被解除后并没有立即被释放。

我假设控制器最终会被 Mono GC 收集，它会调用`Dispose`控制器及其视图，这将处理`UIWebView`和释放底层的原生对象。

我无法测试是否是这种情况：不幸的是，在展示和关闭控制器大约十次后，我收到内存警告，应用程序在下一秒崩溃。我不确定 Mono GC 是否有机会运行。

所以我所做的是`GC.Collect`在控制器被解雇后立即添加呼叫。
我还必须添加`ReleaseDesignerOutlets`.`ViewDidDisappear`

这似乎是免费`UIWebView`的。

> 更新：我已经发现`ReleaseDesignerOutlets`调用`ViewDidDisappear`显然是在释放 web 视图，但是 GC 调用没有任何好处。事实上，**GC 从未收集过我的控制器，因为按钮单击处理程序使整个控制器保持活动状态**。

现在，我完全迷失在某种 Cargo 内存管理中。

1.  在我的情况下强制垃圾收集是否合理？
2.  为什么我必须打电话`ReleaseDesignerOutlets`？当然，如果没有对“死”控制器的引用，它的视图也应该被认为有资格被收集？
3.  从 Instruments 的 heapshot diff 来看，看起来从代码“等待”到控制器创建的视图也是如此。我必须处理它们吗？取消他们？
4.  我需要手动调用`Dispose`刚刚解散的控制器吗？
5.  我需要在我的控制器 `ReleaseDesignerOutlets`的方法中包含调用吗？`Dispose`
6.  `UIView`我是否需要在我的自定义子类中取消对子视图的引用`Dispose`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:15:01.623

您应该`Dispose()`在控制器关闭时调用它。

所以像：

```
private YourModalController modalController;

//When your button is clicked
partial void YourButtonClick() {
  modalController = new YourModalController();
  PresentViewController(modalController, true, delegate {
    modalController.Dispose();
    modalController = null;
  });
} 
```

在`YourModalController`中，确保您有：

```
public override void Dispose(bool disposing) {
  ReleaseDesignerOutlets();
  base.Dispose(disposing);
} 
```

在这种情况下，您不必担心`ViewDidUnload`，因为此控制器在解除时被释放。

在 iOS 6 之前：

*   `ViewDidUnload`在应用程序的内存不足警告中被调用
*   在仍在内存中的控制器上，但不在屏幕上，例如在堆栈中`UINavigationController`
*   在此事件中，您应该处置您有 C# 引用的所有视图并将它们设置为 null
*   对于 iOS 6，这不再发生

同样，如果你有这个：

```
private UIButton buttonIMadeFromCode; 
```

您应该检查 null，处理它，并将其设置为 null in `Dispose()`and `ViewDidUnload()`（但只有`ViewDidUnload`在您的目标小于 iOS 6 时才会弄乱）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:17:28.053

首先：MonoTouch 中的内存管理是一个非常复杂的话题，因为 MonoTouch（垃圾回收）必须与 ObjectiveC（引用计数）共存。

正如您现在发现的那样，很容易陷入循环，并且当这些越过 MonoTouch/ObjectiveC 边界时，GC 无法准确判断发生了什么并释放整个循环。

如果您对更深入的解释感兴趣，[请查看此线程](http://forums.xamarin.com/discussion/comment/535/#Comment_535)。

# eclipse-cdt - 记住我选择在 Eclipse C/C++ 中显示为数组

> ID：13050168
> 
> 赞同：6
> 
> 时间：2012-10-24T13:22:45.260
> 
> 标签：eclipse-cdt

在 Eclipse for C/C++ 的调试模式下，您可以右键单击任何作为指针的监视表达式，然后选择“显示为数组”。然后系统会提示您输入数组边界，并且在*此*调试运行的其余部分中，监视的表达式将根据这些边界显示为数组。

当我终止进程并再次开始调试时，它会记住我监视的表达式，但是以前显示为数组的指针现在将再次成为指针，因此，我必须在每次调试运行中重新转换所有指针。在最近的一个项目中，这变得非常令人厌烦。

有没有办法让 Eclipse 记住监视表达式的“显示为数组”选项？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T04:12:50.087

您必须能够将您希望将指针视为**表达式字符串本身中**的数组这一事实进行编码。

假设您有一个数组 as`int*`并且您想查看（最多）它的前 4 个元素。

在选项卡中，使用[GDB 支持的](http://sourceware.org/gdb/onlinedocs/gdb/Arrays.html)`Expressions`以下两种语法之一：

*   `(*arr @ 4)`
*   `((int[4])*arr)`

**上面周围的`(...)`括号很重要。**

您可以在`Expressions`选项卡（手表）中执行此操作，但不能在`Variables`选项卡中执行此操作。

![将指针视为数组](../Images/cac83ffed4fcf80c1fc77218ffeeafae.png)

# session - Cakephp：选择登录后要保存的数据

> ID：13050169
> 
> 赞同：0
> 
> 时间：2012-10-24T13:22:47.803
> 
> 标签：session, cakephp, login

我不明白如何选择登录后保存哪些用户数据。我注意到我只能更改模型的递归性，但不能选择要使用的单个字段。

例如，通常Cakephp 会在会话中保存除密码之外的所有用户字段，甚至是我不需要且不想存储的数据。如果我增加递归，Cakephp 会保存相关模型的所有字段。

模型查找方法的“字段”参数有什么方法吗？

我知道登录后我可以恢复我错过的数据并将它们添加到会话中，合并到那些已经存储的数据，但我想避免进行另一个查询并找到一个更优雅的解决方案（如果存在）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:55:09.357

从 Cake 2.2 开始，您可以`contain`在身份验证选项中添加密钥以提取相关数据。由于`contain`密钥接受`fields`密钥，您可以限制那里的字段：

```
public $components = array(
  'Auth' => array(
    'authenticate' => array(
      'Form' => array(
        'contain' => array(
          'Profile' => array(
            'fields' => array('name', 'birthdate')
          )
        )
      )
    )
  )
); 
```

如果您想更改用户模型搜索的字段，您可以扩展您正在使用的身份验证对象。通常 users 表包含的信息量很少，因此通常不需要。

不过，我还是举个例子吧。我们将在这里使用 FormAuthenticate 对象，并使用`_findUser`BaseAuthenticate 类中的大部分方法代码。这是 Cake 的身份验证系统用来识别用户的功能。

```
App::uses('FormAuthenticate', 'Controller/Component/Auth');
class MyFormAuthenticate extends FormAuthenticate {

  // overrides BaseAuthenticate::_findUser()
  protected function _findUser($username, $password) {
    $userModel = $this->settings['userModel'];
    list($plugin, $model) = pluginSplit($userModel);
    $fields = $this->settings['fields'];

    $conditions = array(
      $model . '.' . $fields['username'] => $username,
      $model . '.' . $fields['password'] => $this->_password($password),
    );
    if (!empty($this->settings['scope'])) {
      $conditions = array_merge($conditions, $this->settings['scope']);
    }
    $result = ClassRegistry::init($userModel)->find('first', array(
      // below is the only line added
      'fields' => $this->settings['findFields'],
      'conditions' => $conditions,
      'recursive' => (int)$this->settings['recursive']
    ));
    if (empty($result) || empty($result[$model])) {
      return false;
    }
    unset($result[$model][$fields['password']]);
    return $result[$model];
  }
} 
```

然后使用该身份验证并传递我们的新设置：

```
public $components = array(
  'Auth' => array(
    'authenticate' => array(
      'MyForm' => array(
        'findFields' => array('username', 'email'),
        'contain' => array(
          'Profile' => array(
            'fields' => array('name', 'birthdate')
          )
        )
      )
    )
  )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T08:59:14.260

我只是在这个问题上花了一段时间，才发现从 Cake 2.6 开始已经实现了一个 'userFields' 选项

看看这里的文档：http: [//book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

# git - 如何找出我的哪些本地分支机构正在跟踪哪些远程分支机构？

> ID：13050180
> 
> 赞同：1
> 
> 时间：2012-10-24T13:23:16.260
> 
> 标签：git

当我做'git分支'时，我得到

```
* (no branch) 
```

当我做'git remote'时，我得到

```
test-mirror
test-dev
test-git 
```

但是我看不到我的哪个本地分支是如何跟踪哪个远程分支的？

我认为它必须在我的本地分支与远程分支之间有一些映射。否则，当我执行“git pull”时，我什么也得不到。但是我已经完成了'git pull'，我确实看到了新的变化。如何查看本地分支和远程分支之间的映射？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:01:23.393

目前您不在任何分支上，因此它无法跟踪任何内容；-) 这也称为分离头。

这意味着您签出了特定的提交，而不是分支的尖端，并且由于提交是不可变的（固定 sha1）git 将无法更新它。

如果它位于分支的尖端，您将获得一个链接到分支的前一个尖端的新提交。

正如“没人”评论/链接的那样 - 使用`git branch -vv # doubly verbose!`

# java - Java CardLayout：是否可以在两张不同的卡上使用相同的对象？

> ID：13050184
> 
> 赞同：0
> 
> 时间：2012-10-24T13:23:23.453
> 
> 标签：java, swing, user-interface, cardlayout

我正在创建一个包含地图的程序。对于 GUI，我使用 CardLayout cus 我在窗口之间交换。我程序中的一个窗口带有较小的地图，而另一个窗口带有较大的地图。

当我在这两个窗口之间切换时，我希望将刚刚查看的地图上的信息（缩放、航点等）转移到第二张地图。但我认为做到这一点的最好方法（考虑到我需要几千个航点供我使用（为什么不相关））就是让同一个对象出现在两张卡片上。

这可能吗？我将简单地调整位置和大小，但其他所有内容（如缩放和航点）都将保持不变！

-非常感谢 ：）

PS：我正在使用 JXMapViewer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:37:40.607

您应该将模型和视图分开。

创建一个包含所有信息（缩放、航点等）的自定义模型。创建两个视图 - 面板保持对同一模型对象的引用并具有自己的参数 - 位置和大小。

放置在`CardLayout`两个视图中并在必要时交换。

# javascript - 如何在js中为简单的计算器应用程序编写测试用例

> ID：13050187
> 
> 赞同：0
> 
> 时间：2012-10-24T13:23:26.160
> 
> 标签：javascript, jquery, tdd, jasmine

我是一名尝试学习测试驱动开发的前端开发人员。我使用 jQuery/jasmine 构建了一个简单的 js 计算器。

根据我所学到的，我首先开始编写我的测试用例（在 jasmine 中）。

```
describe("calculator", function() {         
  it("add correctly", function() {      
     expect(add(2,3)).toEqual(5);   
    });

  it("subtract correctly", function() {         
      expect(sub(2,3)).toEqual(-1);     
    });         

  describe("divide", function(){
       it("divided correctly", function(){ 
        expect (divide(2,3)).toEqual(0.6666666666666666);       
        });

       it("divided by 0 gives infite", function(){           
         expect (divide(2,0)).toEqual(Infinity);        
        });

  });   

 describe("toggle sign", function(){
    it("toggle to - sign", function() { 
              expect (toggleSign(2)).toEqual(-2);       
      });

    it("toggle to + sign", function() { 
             expect (toggleSign(-2)).toEqual(2);        
      });   
  });

}); 
```

然后用最少的代码传递它们

> （函数（窗口，文档，未定义）{“使用严格”；
> 
> window.add = function(a,b){ return a+b; };
> 
> window.sub = function(a,b){ return ab; };
> 
> window.divide =function(a,b){ 返回 (a/b); };
> 
> window.toggleSign = function(a){ return -a; };
> 
> }（窗口，文档））；

在我真正开始构建应用程序之前，我都很开心和满足

这是它的样子 [http://niteshsharma.com/jscalc/](http://niteshsharma.com/jscalc/)

我能想到的最明智的方法是编写一个计算器，是创建一个完整操作的简单字符串并在执行时对其进行评估

```
window.press = function(a){
    $("#display").html(function(i, oldHtml){
        return oldHtml+a;
    });
};

window.execute= function(){
    try{
        $("#display").html( new Function( "return " + $("#display").html())() );
    }
    catch(err){
        alert("error");
    }
}; 
```

我怎么能为这样的代码写一个测试用例？如果有人可以向我解释做 TDD 的正确过程（以我的计算器为例），我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:02:45.100

这是你的答案。通过 jQuery，您可以将您的“显示”元素动态添加到页面中，然后执行您的 press 和 execute 函数并根据显示元素的内容进行断言。这里有一些测试。

```
describe("press", function(){
        it("add-remove display element", function(){
            // Dynamically add a span element with id="display"
            $('body').append($('<span id="display">').text('0'));
            expect($('#display').length).toEqual(1);
            // Clean up after yourself here - tests should be atomic
            $('#display').remove();
            expect($('#display').length).toEqual(0);
        });

        it("add-remove display element", function(){
            $('body').append($('<span id="display">').text('0'));
            // With the display element present, run the press function
            press('2');
            expect($('#display').html()).toEqual('02');
            $('#display').remove();
        });
     });

     describe("execute", function(){
        it("execute a couple presses and run a calculation", function(){
            $('body').append($('<span id="display">').text('0'));
            // With the display element present, run the press function
            press('2');
            press('+');
            press('3');
            execute();
            expect($('#display').html()).toEqual('5');
            $('#display').remove();
        });
     }); 
```

如果我也建议，将计算器功能添加到窗口对象不是一个好主意。你也许可以做这样的事情（未经测试的存根代码）：

```
 function Calculator(){
    // Private members
    var firstNumber = 0;
    var secondNumber = 0;
    function toggleSign(){}

    // Public members
    return {
        press: function(){},
        execute: function(){}
    };
}

// To use it, instatiate a new calculator and call its public methods
var calc = new Calculator();
calc.press('2');
calc.press('+');
calc.press('3');
calc.execute(); 
```

此外，您应该避免像在执行方法中那样执行字符串......在您的 Calculator 类中，您应该有私有变量来存储第一个数字和第二个数字，然后只需对它们进行数学运算而无需执行字符串.

希望这可以帮助。

安迪

# internet-explorer-9 - 使用 Font Squirrel 生成的字体在 IE 9 中不显示

> ID：13050190
> 
> 赞同：5
> 
> 时间：2012-10-24T13:23:36.777
> 
> 标签：internet-explorer-9, font-face

我使用 Fontsquirrel [@fontface 生成器](http://www.fontsquirrel.com/fontface/generator)为我正在使用的三种字体创建 CSS。字体在包括其他版本的 IE 在内的每个浏览器中都能正常显示——但 IE 9 没有显示字体。

**这是CSS：**

```
 @font-face {
    font-family: "OswaldBold";
    src: url("../fonts/oswald-bold-webfont.eot");
    src: url("../fonts/oswald-bold-webfont.eot?#iefix") format("embedded-opentype"),
         url("../fonts/oswald-bold-webfont.woff") format("woff"),
         url("../fonts/oswald-bold-webfont.ttf") format("truetype"),
         url("../fonts/oswald-bold-webfont.svg#OswaldBold") format("svg");
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: "OswaldRegular";
    src: url("../fonts/oswald-regular-webfont.eot");
    src: url("../fonts/oswald-regular-webfont.eot?#iefix") format("embedded-opentype"),
         url("../fonts/oswald-regular-webfont.woff") format("woff"),
         url("../fonts/oswald-regular-webfont.ttf") format("truetype"),
         url("../fonts/oswald-regular-webfont.svg#OswaldRegular") format("svg");
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: "OswaldLight";
    src: url("../fonts/oswald-light-webfont.eot");
    src: url("../fonts/oswald-light-webfont.eot?#iefix") format("embedded-opentype"),
         url("../fonts/oswald-light-webfont.woff") format("woff"),
         url("../fonts/oswald-light-webfont.ttf") format("truetype"),
         url("../fonts/oswald-light-webfont.svg#OswaldLight") format("svg");
    font-weight: normal;
    font-style: normal;
} 
```

**...这是我在 IE 开发人员控制台中遇到的错误：**

> CSS3111：@font-face 遇到未知错误。
> oswald-light-webfont.eot?#iefix
> 
> CSS3111：@font-face 遇到未知错误。
> oswald-bold-webfont.eot?#iefix
> 
> CSS3111：@font-face 遇到未知错误。
> oswald-light-webfont.woff
> 
> CSS3111：@font-face 遇到未知错误。
> oswald-bold-webfont.woff
> 
> CSS3114：@font-face 未能通过 OpenType 嵌入权限检查。权限必须是可安装的。
> oswald-light-webfont.ttf
> 
> CSS3114：@font-face 未能通过 OpenType 嵌入权限检查。权限必须是可安装的。
> oswald-bold-webfont.ttf

我所做的搜索没有任何运气，任何见解将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T23:39:27.830

[我通过使用Font Squirrel generator](http://www.fontsquirrel.com/fontface/generator)再次生成字体文件解决了这个问题 。

我选择了“专家”控制选项并从“EOT 压缩”更改为“EOT Lite”

这些字体现在可以在每个浏览器中使用。

![在此处输入图像描述](../Images/3ac9debbf12060d4a38ff45789c3e64c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T12:48:31.203

我有一个类似的问题。我收到以下错误

```
CSS3114: @font-face failed OpenType embedding permission check. Permission must be Installable. File: IcoMoon.ttf 
```

我的 CSS 语法是：

```
@font-face {
    font-family: 'IcoMoon';
    src: url('font/IcoMoon.eot');
    src: url('font/IcoMoon.eot?#iefix') format('embedded-opentype');
    src: url('font/IcoMoon.woff') format('woff');
    src: url('font/IcoMoon.svg#IcoMoon') format('svg');
    src: url('font/IcoMoon.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

我通过像这样重新排列它来解决它：

```
@font-face {
    font-family: 'IcoMoon';
    src: url('font/IcoMoon.eot');
    src: url('font/IcoMoon.eot?#iefix') format('embedded-opentype'),
        url('font/IcoMoon.woff') format('woff'),
        url('font/IcoMoon.svg#IcoMoon') format('svg'),
        url('font/IcoMoon.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T23:10:08.070

要修复 CSS114，请使用这个小应用程序：[Truetype embedding-enabler](http://carnage-melon.tom7.org/embed/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T14:26:27.243

我遇到了类似的问题，图标不会出现在任何带有 Font Awesome 的 IE 版本中。我只是将 IE 的格式从“eot”更改为“embedded-opentype”，从而纠正了问题。

示例：旧 - src: url('./font/fontawesome-webfont.eot?#iefix') 格式('eot') 新 - src: url('./font/fontawesome-webfont.eot?#iefix')格式（'嵌入式开放式'）

# css - CSS 在 Chrome 和 Firefox 中不起作用

> ID：13050191
> 
> 赞同：3
> 
> 时间：2012-10-24T13:23:39.347
> 
> 标签：css, google-chrome, firefox

CSS 在 Chrome 和 Firefox 中不起作用

原始 CSS

```
background: url("../images/shortcut-button-bg.gif") no-repeat scroll left top #F7F7F7;
border: 1px solid green;
display: -moz-inline-stack;
margin: 0 0 20px;
width: 201px; 
```

Firefox FireBug 显示为

```
 background: url("../images/shortcut-button-bg.gif") no-repeat scroll left top #F7F7F7;
    border: 1px solid green;
    display: -moz-inline-stack;
    margin: 0 0 20px;
    width: 201px; 
```

在 Chrome Firebug 中

```
 background: url("../images/shortcut-button-bg.gif") no-repeat scroll left top #F7F7F7;
    border: 1px solid green;
    display: -moz-inline-stack;
    margin: 0 0 10px;
    width: 140px; 
```

请回复我并告诉我使用 CSS 的浏览器兼容性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:29:47.553

当您使用供应商特定的前缀（如`display: -moz-inline-stack;`）时，它针对特定的浏览器。**在这里，正如您可能已经通过-moz**前缀猜到的那样，它只有 firefox 才能理解。这可能就是发生这种情况的原因。

**[尝试像这样的](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)**跨浏览器解决方案。

您可能需要添加的内容是：

```
 display: -moz-inline-stack; //for firefox
    display: inline-block; //for other browsers
    *display: inline;  //for IE6 & 7
    zoom: 1; //for IE6 & 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:32:47.990

不确定这是否是答案，但 Chrome 不知道`display: -moz-inline-stack;`。也可以`display: inline-block;`在`display: -moz-inline-stack;`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:35:19.643

我自己试过，但 Chrome 和 Firefox 都显示 width:201px; 140px 应该在您的样式中定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:37:15.650

尝试从样式声明中删除 -moz- 位。随着 HTML5 的出现，大多数现代浏览器现在不应该需要它们。可能的 CSS 显示值是：-

```
 none    The element will not be displayed at all
    block   The element is displayed as a block element (like paragraphs and headers). A block element has some whitespace above and below it and does not tolerate any HTML elements next to it
    inline  This is default. The element is displayed as an inline element (like span). An inline element has no line break before or after it, and it tolerates HTML elements next to it
    inline-block    The element is placed as an inline element (on the same line as adjacent content), but it behaves as a block element
    inline-table    The element is displayed as an inline table
    list-item   The element is displayed as a list-item, which means that it has a bullet in front of it
    table   The element is displayed as a table
    table-caption   The element is displayed as a table caption
    table-cell  The element is displayed as a table cell
    table-column    The element is displayed as a table column
    table-column-group  The element is displayed as a table column group (like <colgroup>)
    table-footer-group  The element is displayed as a table footer row group
    table-header-group  The element is displayed as a table header row group
    table-row   The element is displayed as a table row
    table-row-group     The element is displayed as a table row group
    inherit     The value of the display property will be inherited from the parent element 
```

由于没有“inline-stack”值，您应该使用“inline”，或者完全删除“display”项。它应该是：-

```
 display: inline; 
```

# php - 从 PHP 数组中获取特定值

> ID：13050194
> 
> 赞同：1
> 
> 时间：2012-10-24T13:23:47.093
> 
> 标签：php, regex, arrays

我想从数组中获取一些值并将它们打印在页面上。

对于 [1]，应提取以下内容：`USD 7.0269 6.4119 0.14231 0.15596`

数组如下所示：

```
print_r($arr);
[1] => USD United States of America 7.0269  6.4119  Dollars 0.14231 0.15596  � Copyright 2003-2011\. Powered by CurrencyXchanger 3.580 
[2] => EUR  Euro Member Countries 9.0373    8.3253  Euro    0.1107  0.1201   � Copyright 2003-2011\. Powered by CurrencyXchanger 3.580 
```

实现这一目标的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:31:38.233

这是一个正则表达式解决方案：

```
foreach($arr as $key => $item)
{
    preg_match('/^([A-Z]){3}[\sA-Za-z]+(\d+\.\d+)\s+(\d+\.\d+)\s+[A-Za-z]+\s+(\d+\.\d+)\s+(\d+\.\d+)/', $item, $matches);
    $result[$key] = array_shift($matches);
} 
```

正则表达式对应于您的模式，并在`$matches`. 由于`$matches[0]`代表完全匹配，我们删除第一个元素并将其分配给您的结果数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:32:13.277

`preg_match_all()`在我修剪掉感兴趣的区域后我会使用：

```
foreach ($arr as $line) {
    // currency is in the first four characters (apparently)
    $currency = substr($line, 0, 4);

    // we use everything left of 'Copyright'
    $rest = strstr($line, 'Copyright', true);

    // match each occurrence of nn.nnnn
    if (preg_match_all('/\d+\.\d+/', $rest, $matches)) {
        // $matches[0] contains all the amounts
        echo $currency, ' ', join(' ', $matches[0]), PHP_EOL;
    }
} 
```

对于 PHP < 5.2，您需要此行来计算`$rest`：

```
$rest = substr($line, 0, strpos($line, 'Copyright')); 
```

[演示](http://codepad.viper-7.com/2tTmDd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:27:58.990

尝试

```
 foreach($arr as $v) {
  $items = explode(' ', $v);
  $new_arr[] = $items[0]; //Getting the currency type
  foreach($items as $k => $m) {
    if(is_numeric($m) && floor($m) != $m && $k != (count($items) - 1))
      $new_arr[] = $m;
  }
 }

 //displaying the $new_arr
 foreach($new_arr as $n) {      
  if(is_numeric($n) === FALSE)
    echo "\n";     
    echo $n . ' ';
 } 
```

[在此处](http://codepad.org/QSXNRwzu)查看实际操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:42:16.177

使用正则表达式，您可以获得它。

```
foreach($arr as $key => $value) {
    preg_match_all('/(\d+\.\d+)/', $value, $matches);
    $result[substr($value, 0, 3)] = array_shift($matches);
} 
```

你得到一个这样的数组

```
var_dump($result);
array (
    'USD' => array( 7.0269, 6.4119, 0.14231,  0.15596 )
    'EUR' => array( 9.0373, 8.3253, 0.1107,  0.1201 )
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T13:56:08.163

快速完成：

```
$result = array_map(
    function ($string) {
        preg_match_all('/(\d+\.\d+)\s/', $string, $matches);
        return substr($string, 0, 3) . ' ' . implode(' ', $matches[1]);
    },
    $arr
); 
```

结果：

```
Array
(
    [0] => USD 7.0269 6.4119 0.14231 0.15596
    [1] => EUR 9.0373 8.3253 0.1107 0.1201
) 
```

# shell - 如何在引导时自动将启动参数发送到初始化脚本？

> ID：13050196
> 
> 赞同：0
> 
> 时间：2012-10-24T13:23:48.370
> 
> 标签：shell, unix, debian

我正在使用 debian 系统并希望为 myapplication 提供一个 init 启动脚本。在脚本中，我有一个用于不同 (start|stop|restart) 参数的案例主体。当脚本在启动时启动时，它会进入无限循环，因为它会遍历所有参数。这是我的脚本

```
#! /bin/sh
### BEGIN INIT INFO
# Provides:          skeleton
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Example initscript
# Description:       This file should be used to construct scripts to be
#                    placed in /etc/init.d.
### END INIT INFO

 PATH should only include /usr/* if it runs after the mountnfs.sh script
 PATH=/sbin:/usr/sbin:/bin:/usr/bin
 DESC="Studio-service"
 NAME=application-studio
 automatey_nodetype=development
 vmargs="-DencryptorCredentials=currentPass|oldPass|1 -Xms512m -Xmx2048m
 - DLOGGING_HOME=configuration/ -Djava.io.tmpdir=/var/tmp 
 - Dorg.osgi.service.http.port=8081 -Declipse.ignoreApp=true 
 -Dosgi.noShutdown=true -Xdebug -Xnoagent -Djava.compiler=NONE 
  -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n 
  -Djava.net.preferIPv4Stack=true -DapplyDbMigrations=true -XX:MaxPermSize=128m 
  -XX:- HeapDumpOnOutOfMemoryError "
 SCRIPTNAME=/etc/init.d/$NAME
 DAEMON=start.sh
 STUDIO=/opt/application

case "$1" in
start)  
    set -e -x
    cd /opt/application
    ./firewall.sh
    ${STUDIO}/${DAEMON} ${automatey_nodetype} "$echo $vmargs"

;;
stop)
    screen -SX application-studio kill
;;

restart)
    set -e -x
    ${STUDIO}/${DAEMON} ${automatey_nodetype} "$echo $vmargs"
;;
esac 
```

出口 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:11:06.537

在启动时，初始化脚本使用`start`参数运行。无需指定任何内容。也许你需要评论这一行：

> PATH 应该只包含 /usr/* 如果它在 mountnfs.sh 脚本之后运行

# jquery - 如何定位弹出 div，如本网站上的个人资料信息

> ID：13050197
> 
> 赞同：-2
> 
> 时间：2012-10-24T13:23:48.857
> 
> 标签：jquery, html, ajax, css

我正在尝试制作一个弹出 div，就像您将鼠标悬停在您的用户名上或单击此站点最顶部工具栏上的 StackExchange 单词时显示的那样。

我不是要 ajax 代码等。只是如何定位它。我使用 firebug 查看了他们的代码，但他们没有指定 x 250 y 500 之类的位置。那么这些人如何让它出现在用户名或 StackExchange 字母下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:05:07.867

Stackoverflow 显然使用 JavaScript 来实现弹出窗口如何出现的效果。一个小 jQuery（ $('#mydiv').show(100); ）会为你做这件事）。您可以仅使用带有相邻兄弟选择器的 CSS 来实现类似的效果，如下所示：

```
div {display: none;}

a:hover + div { display: block;} 
```

'popup' 元素的定位是在中心页面 div 中实现的，其边距设置为“0 auto”。顶栏放置在该元素内，其宽度设置为“100%”，位置设置为“相对”。将 div 的位置声明为相对位置允许您绝对定位子元素相对于父元素的位置，而不是相对于整个页面。

要让您的绝对定位弹出 div 出现在您的 topbar 链接下方，只需将 div 的“top”属性设置为 topbar div 的像素高度，并将其“right”属性设置为适当的像素值以将其放置在您的链接下方。您可以像这样使用 jQuery 动态执行此操作，假设您的链接是块级元素：

```
var offset = $('#myLink').offset(); 

var newLeft = offset.x; 

var newRight = offset.y + $('#myLink').width(); 

$('#popup').css({

   left : newLeft,
   right : newRight
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:32:51.960

他们所做的是绝对位置，当您单击或悬停元素时，弹出窗口会从显示无变为显示块。定位由浮动（向左浮动）控制。x 定位是相对于其他元素进行的。在这种情况下，标题元素是 960 像素宽，然后使用 margin:auto 居中。因此弹出窗口将出现在标题元素的左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:33:13.950

`position: absolute`在实际弹出窗口上使用，并在`position: relative`放置它的父容器上使用。这样您就可以将它定位到容器中，这将是您放置实际点击事件 div 的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:37:56.133

检查这个[小提琴](http://jsfiddle.net/v27kT/)。它有帮助吗？

实际上，你完全可以不使用 JavaScript，使用 javascript 的目的是暂停`hide`弹出窗口的

# java - Eclipse 与 Jenkins 中的 TestNG 继承行为

> ID：13050201
> 
> 赞同：2
> 
> 时间：2012-10-24T13:23:56.713
> 
> 标签：java, eclipse, inheritance, jenkins, testng

我目前遇到问题。我创建了 2 个类，一个是抽象的，另一个是从第一个继承的：

```
public abstract class A {
        @BeforeClass
        protected void setUp() {
            Object o = new Object();
        }

        @AfterClass
        protected void tearDown() {
            o = null;
        }

        @Test
        public void T1() {
            // whatever is done here
        }

        @Test(dependsOnMethod={"T1"})
        public void T2() {
            // whatever is done here
        }
}

@Test(singleThreaded=true)
public class B extends A {

        @Test(dependsOnMethod={"T2"})
        public void T3() {
            System.out.println(o.toString());
        }
} 
```

实际上，我在 Eclipse 和 Jenkins 之间有两种不同的行为。

当我在 Eclipse 下运行测试时，执行顺序是：

```
setUp()
T1()
T2()
T3()
tearDown() 
```

但是在 Jenkins 下，执行顺序是：

```
setUp()
T1()
T2()
tearDown()
T3() 
```

结果，在第二种情况下，T3() 显然失败了，因为对象 o 已被 tearDown() 方法销毁，因此出现 NullPointerException。Jenkins 通过使用 maven-surefire-plugin 通过指定 testng.xml 文件调用 TestNG。这里是：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="TestSuite" parallel="classes" thread-count="1" verbose="1">
    <test name="Test B">
       <classes>
        <class name="main.pkg.B" />
       </classes>
   </test>
</suite> 
```

有没有办法让 Jenkins 和 Eclipse 都具有相同的行为？如果是这样，任何帮助将不胜感激。

问候，

塞德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:19:05.227

可能是您在 Eclipse 中的 testng 插件版本与您项目中的版本不同。

当您使用 maven 通过 jenkins 运行时，它会使用您的 pom.xml 中的 testng 依赖项。而在 eclipse 中，您可能已经配置了一些其他用于 eclipse 运行的 testng 插件版本。

我有 6.5.1 作为 pom 中的 testng 依赖版本和 6.5.2 的插件版本，我从两者都得到了正确的输出。我之前将 testng 6.2.1 作为我的 maven 依赖项，我可以看到您所看到的问题。所以可能匹配两个版本可能会有所帮助。

# keyboard-shortcuts - 如何在 Sublime Text 2 中创建用于显示标尺的键盘快捷键？

> ID：13050202
> 
> 赞同：3
> 
> 时间：2012-10-24T13:23:57.760
> 
> 标签：keyboard-shortcuts, sublimetext2, rulers

我想要的是使用键盘快捷键**切换** *Sublime Text 2* **标尺的可见性。**

我得到的关于该主题的唯一信息是，可以通过在 Preferences 中遵循 JSON 代码来控制标尺：

```
{
"rulers": [80, 120],
} 
```

是否可以创建这样的键盘快捷键？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T15:33:30.173

您可以在您的用户键绑定设置（菜单`Sublime Text 2/Preferences/Key Bindings - User`）中添加它：

```
{ 
  "keys": ["YOUR_ENABLE_RULERS_SHORTCUT"],
  "command": "set_setting",
  "args":
  {
    "setting": "rulers",
    "value": [80, 120]
  }
} 
```

要禁用标尺：

```
{ 
  "keys": ["YOUR_DISABLE_RULERS_SHORTCUT"],
  "command": "set_setting",
  "args":
  {
    "setting": "rulers",
    "value": []
  }
} 
```

如果你真的想要一个切换，你可以创建一个新插件 ( `Tools/New Plugin...`)，代码类似于：

```
import sublime, sublime_plugin

class ToggleRulersCommand(sublime_plugin.TextCommand):
    def run(self, edit, **kwargs):
        rulers = kwargs["values"] if self.view.settings().get("rulers") == [] else []
        self.view.settings().set("rulers", rulers) 
```

将插件保存在您的`Packages/User`目录中，名称为`ToggleRulers.py`.

然后，添加此键绑定：

```
{ 
    "keys": ["YOUR_TOGGLE_RULERS_SHORTCUT"], "command": "toggle_rulers", 
    "args": { "values": [80, 120] } 
} 
```

# sql - 在 sql 列中找到几个文本

> ID：13050203
> 
> 赞同：2
> 
> 时间：2012-10-24T13:24:02.547
> 
> 标签：sql, sql-server-2005

我有一列，其中包含 html 详细信息，并且在每一列中，html 包含不同的 http 链接。我需要找出每列中的所有 http 链接。

例如：第 1 列第 1 行

```
html 
... 
a href = http://www.column1.com....... 
img src=http://www.pic1.com/images/im.jpg...
...
/html 
```

第 1 列第 2 行

```
html 
...
a href = http://www.column2.com.......  
img src="http://www.pic2.com/images/im.jpg".... 
/html 
```

结果我需要得到以下列表：

*   第一列中的链接1 第一列中的href域中的链接1 img链接
*   第二列中的链接 2 第二列中的 href 域中的链接 2 img2 链接

谁能帮我找到这个，因为我完全不知道该怎么做，而且我不擅长使用 sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:30:01.897

好吧，您可以`charindex`尝试查找索引，`http://`然后您需要找到 URL 的结尾（这取决于您的数据、空格或“）。

你也可以写CLR标量函数，实现正则表达式find

```
using System;
using System.Collections;
using System.Text.RegularExpressions;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;

public class CLR
{
    [SqlFunction(FillRowMethodName = "FillRow")]
    public static IEnumerable RegexMatch(string pattern, string text)
    {
        var r = new Regex(pattern);
        return r.Matches(text);
    }

    public static void FillRow(Object obj, out SqlInt32 index, out SqlString match)
    {
        var m = (Match)obj;
        index = new SqlInt32(m.Groups[0].Index + 1);
        match = new SqlString(m.Groups[0].Value);
    }
} 
```

然后你需要从这个类库在你的 SQL Server 上创建程序集

```
create assembly CLR from 'C:\CLR.dll' with permission_set = safe 
```

然后你可以创建函数

```
create function RegexMatch(@pattern nvarchar(4000), @text nvarchar(4000))
returns table ([index] int, match nvarchar(4000))
as external name CLR.CLR.RegexMatch 
```

# javascript - 在Phonegap（或类似）环境中使用js提示密码值有什么危险

> ID：13050206
> 
> 赞同：1
> 
> 时间：2012-10-24T13:24:06.983
> 
> 标签：javascript, forms, cordova, passwords, password-protection

我想知道使用 js 提示从用户那里获取密码值并将其放在表单字段中是否有很多/任何危险？

我知道我可以使用模态或类似的东西，但我只是想知道后果可能是什么（除了用户可能会觉得奇怪）记住该应用程序是通过 Phonegap 作为本机安装的（如果它有所作为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:33:07.803

如果您指的是`window.prompt(message,default);`JS 提示符，则存在一些问题。

1.) 在桌面 IE 的支持很弱——它不支持所有字符集，消息大小有限，不能正确居中，对话框非常丑陋。（错误信息[链接1](http://webbugtrack.blogspot.ca/2007/10/bug-109-javascript-prompt-in-ie-how-did.html)，[链接2](http://webbugtrack.blogspot.ca/2008/02/bug-139-javascript-dialogs-dont-center.html)）

2.) 在 Windows 8 上，在“Metro 模式”浏览器`window.prompt`中定义，但尝试调用它完全失败（浏览器只是忽略它）并且您希望填充的变量获得`null`分配的值

由于#2**可能会**影响 Windows 8 手机（我不确定有多少代码库是直接为手机移植的），因此您需要注意这种潜在的不兼容性。

# javascript - 在Android webview上，当我执行javascript时，sotfkeyboard消失了

> ID：13050211
> 
> 赞同：7
> 
> 时间：2012-10-24T13:25:00.693
> 
> 标签：javascript, android, webview, focus, android-softkeyboard

在 WebView 中，当我通过 webview.loadUrl() 执行 JavaScript 时，如果软键盘可见，它就会消失。当我尝试在 html 文本字段中键入一些文本时，软键盘消失（如果执行 JavaScript）并且我无法键入所有文本。

文本字段没有失去焦点，因此提示仍在文本字段上，但软键盘下降。

有人能告诉我如何解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-08T21:33:23.097

最简单的方法是将 javascript 调用存储在插件或 JavascriptInterface 中，并在您的 javascript 端执行它的重复方法。这种方式`loadUrl`永远不会被调用。

就像是：

```
StringBuilder sb = null;
private final Object LOCK = new Object();
public void sendJavascript(String js){
  synchronized(LOCK) {
  if (sb == null){
     sb = new StringBuilder();
     sb.append("javascript:");
  }
   sb.append(js):    
  }  
} 
```

然后使用 javascriptInterface：

```
private class JsInterface  {

@JavascriptInterface
    public String getJavascript(){
       synchronized(LOCK) {
        String javascriptToRun = sb.toString();
        sb = new StringBuilder();
        sb.append("javascript:");
        return javascriptToRun;
        }
      }
 } 
```

将您的 javascript 界面添加到您的 webview：

```
JsInterface  jsInterface = new JavascriptInterface();
webview.addJavascriptInterface(jsInterface, "JsInterface"); 
```

并在您的 javascript 代码上设置检索存储函数的时间间隔。

**编辑**

我刚刚找到[这个答案](https://stackoverflow.com/questions/9303836/webview-hides-soft-keyboard-during-loadurl-which-means-a-keyboard-cannot-stay)，它表明我的问题很大，方法不同步。这意味着当你调用`getJavascript()`我们的变量时`sb`可能还没有准备好被读取。我已将相关位添加到上面的源代码中。

**使用锁**，否则您的代码将不可靠

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T16:09:51.713

这是一种预期的行为：通过调用`WebView.loadUrl()`您基本上是在重新加载页面，因此软键盘被解除。

或者，您可以尝试确定是否显示软键盘并延迟 JS 执行直到它被隐藏。有关检查软键盘状态的一般方法，请参阅[如何检查 Android 中软键盘的可见性？](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)

# jquery - Google Maps API V3 打印地图

> ID：13050215
> 
> 赞同：4
> 
> 时间：2012-10-24T13:25:12.287
> 
> 标签：jquery, google-maps, google-maps-api-3, fancybox

我正在寻找一种方法来有效地打印已使用谷歌地图 api v3 在网站上实施的谷歌地图。

我见过一些人只使用 window.print js，然后

```
@media print
{
    body * { visibility: hidden; }
    #map * { visibility: visible; }
    #map {visibility: visible;position:absolute; top: 5px; left: 5px;}
} 
```

目前，使用 fancybox 的用户会看到一个更大的地图，我为此添加了一个打印按钮。理想情况下，我只想添加一些 jquery 或类似的东西来打印地图。

然而，这似乎并没有真正起作用。有没有人对最好的方法有任何建议

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-11-18T15:58:50.837

我想通过简单而微妙的 DOM 操作，您可以获得 Google 地图（好吧，理论上 - 任何地图 :)）查看器的“快照”，并在任何浏览器中完美打印。假设`$mapContainer`是您的地图的主要容器，相关代码是：

```
// printAnyMaps ::
function printAnyMaps() {
  const $body = $('body');
  const $mapContainer = $('.map-container');
  const $mapContainerParent = $mapContainer.parent();
  const $printContainer = $('<div style="position:relative;">');

  $printContainer
    .height($mapContainer.height())
    .append($mapContainer)
    .prependTo($body);

  const $content = $body
    .children()
    .not($printContainer)
    .not('script')
    .detach();

  /**
   * Needed for those who use Bootstrap 3.x, because some of
   * its `@media print` styles ain't play nicely when printing.
   */
  const $patchedStyle = $('<style media="print">')
    .text(`
      img { max-width: none !important; }
      a[href]:after { content: ""; }
    `)
    .appendTo('head');

  window.print();

  $body.prepend($content);
  $mapContainerParent.prepend($mapContainer);

  $printContainer.remove();
  $patchedStyle.remove();
} 
```

请注意，您可以灵活地替换`$printContainer`为任何打印模板。在这里，我只使用一个简单`<div>`的用作快照的占位符。

这里的工作代码：http: [//jsfiddle.net/glenn/6mx21ted](http://jsfiddle.net/glenn/6mx21ted)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-19T01:20:14.997

请注意，如果您还使用 Bootstrap，它将为您中断地图打印。添加此代码：

```
@media print {
  img {
    max-width: auto !important;
  }
} 
```

请参阅[影响 Google 地图的 Twitter Bootstrap CSS](https://stackoverflow.com/questions/9141249/twitter-bootstrap-css-affecting-google-maps/36096750#36096750)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T12:12:13.997

在 HTML 中，#Gmap 是您显示谷歌地图的 div，打印按钮一旦被点击就会调用函数 gmapPrint()。

```
<!-- HTML -->
<div id="Gmap"></div> 
<div onclick="gmapPrint();">Print Button</div> 
```

在 JavaScript 中，gmapPrint() 函数读取地图详细信息并将其写入新窗口。然后打印新窗口。

```
<!-- JS Script -->
function gmapPrint() {
    var content = window.document.getElementById("Gmap"); // get you map details
    var newWindow = window.open(); // open a new window
    newWindow.document.write(content.innerHTML); // write the map into the new window
    newWindow.print(); // print the new window
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-23T10:04:38.093

如果您想为每个浏览器打印完整大小的地图，请尝试以下操作：

```
function printMap() {
$('<style media="print">')
    .text(`
   body {
    width: ${screen.width}px;
    height: ${screen.height}px;
  }
  body { zoom: 50% !important;}
`)
    .appendTo('head');

window.print();
return false; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-15T07:56:04.980

您可以使用[html2canvas.js](https://html2canvas.hertzen.com/)将地图 div 转换为画布元素，然后您可以将其打印为图像。下面的代码非常适合我：

HTML

```
<div id="map" style="width:500px;height:500px;"></div>
<input type="button" value="Print Map" class="printBtn" /> 
```

JavaScript

```
var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 13,
            center: defLocation,
            mapTypeId: 'satellite',
            streetViewControl: false
        });      
$(document).on('click', '.printBtn', function () {
            map.setOptions({
                mapTypeControl: false,
                zoomControl: false,
                streetViewControl: false,
                panControl: false
            });
            var printWin = window.open('', '', 'width=1000,height=700');
            var windowContent = '<!DOCTYPE html>';

            html2canvas($("#map"), {
                useCORS: true,
                onrendered: function (canvas) {
                    windowContent += '<html>'
                    windowContent += '<head><title>Print canvas</title></head>';
                    windowContent += '<body>'
                    windowContent += '<img src="' + canvas.toDataURL() + '">';
                    windowContent += '</body>';
                    windowContent += '</html>';
                    printWin.document.open();
                    printWin.document.write(windowContent);
                    printWin.document.close();
                    printWin.focus();
                    setTimeout(function () { printWin.print(); printWin.close(); }, 500);

                    map.setOptions({
                        mapTypeControl: true,
                        zoomControl: true,
                        streetViewControl: true,
                        panControl: true
                    });
                }
            });
        }); 
```

# asp.net - 为什么标签宽度在 ChangePassword 控件中不起作用？网

> ID：13050217
> 
> 赞同：3
> 
> 时间：2012-10-24T13:25:16.573
> 
> 标签：asp.net, vb.net, label, change-password

我有一个`ChangePassword`控件，并将其转换为模板。我删除了所有表格代码并尝试自己格式化所有内容。当我设置控件的`Width`属性时`Label`，我发现它不起作用。谁能看到我可能做错了什么？

代码示例（精简）：

```
 <asp:ChangePassword ID="ChangePassword1" runat="server">
    <ChangePasswordTemplate>
    <asp:Label ID="CurrentPasswordLabel" runat="server" AssociatedControlID="CurrentPassword" Width="250">Password:</asp:Label>

    <asp:Button ID="CancelPushButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />                                                   
    </ChangePasswordTemplate>
</asp:ChangePassword> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:14:46.263

查看[asp:label width - 这是一个错误吗？](http://forums.asp.net/t/1160671.aspx)

它建议使用`CSS`来解决您遇到的相同问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:09:46.437

只是让`label`浮动左。

```
<label id="pwd">Password:</label> 
```

的CSS：

```
#pwd {
     float:left;    // This will make the width works.
     width:100px;
} 
```

# ruby-on-rails - ActionMailer 有时不发送？

> ID：13050224
> 
> 赞同：3
> 
> 时间：2012-10-24T13:25:47.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

我有一个问题，ActionMailer 有时不发送电子邮件。它是可重现的，并且在某些时候会影响某些人，尽管造成它的原因是个谜。

它静默失败，尽管`config.action_mailer.raise_delivery_errors = true`已设置。

它进入 mail() 例程，声称它已经渲染了模板：

```
Rendered notifier/notify_comment.html.erb (0.9ms) 
```

然后跳过交付并移动到下一个交付。下一个渲染和交付没有问题。发送电子邮件时，它们也会打印到控制台，所以我可以看到它。每封邮件的内容都是一样的，只是收件人不同。

我不明白为什么这会是断断续续的。

我该如何调试呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:46:39.740

每个邮件程序实例只能发送 1 封电子邮件。

您在邮件程序中是否有类似这样的代码？

```
@subscribers.each do |s|
  mail(
    :to => s.email,
    :subject => "Foo Foo",
    :from => "someone@example.com", 
    :template_name => 'template_name'
  ).deliver
end 
```

这似乎不起作用。遍历邮件程序之外的订阅者，并调用一次：

在控制器或模型中：

```
@subscribers.each do |s|
  Notifier.send_to_subscriber(s, @comment)
end 
```

这是我在 Rails 3.2.2 中的经验。FWIW，我认为发生的事情是邮件对象超出范围。

这种方法可能会很慢，因此请务必在单独的线程中发送电子邮件。

参考与思路：[如何使用 SendGrid 发送多封邮件？](https://stackoverflow.com/questions/12414506/how-to-send-multiple-emails-with-sendgrid/12992496#12992496)

# python - 打印图像中小于 10,10,10 的像素

> ID：13050225
> 
> 赞同：0
> 
> 时间：2012-10-24T13:25:48.227
> 
> 标签：python, python-imaging-library

我是 python 新手，想指出下一个方向。我正在使用 PIL。做了相当多的研究，我仍然卡住了！

我需要从 0,0 开始获取每个像素的 rgb，并沿着每行一直向下 y 坐标。它是一个 bmp，只有黑白，但我只希望 python 打印介于 10、10、10 和 0、0、0 之间的像素。有人可以给我一些智慧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:29:55.763

如果您确定`r==g==b`对于所有像素，那么这应该有效：

```
from PIL import Image

im = Image.open("g.bmp")       # The input image. Should be greyscale
out = open("out.txt", "wb")    # The output.

data = im.getdata()            # This will create a generator that yields
                               # the value of the rbg values consecutively. If
                               # g.bmp is a 2x2 image of four rgb(12, 12, 12) pixels, 
                               # list(data) should be 
                               # [(12,12,12), (12,12,12), (12,12,12), (12,12,12)]

for i in data:                   # Here we iterate through the pixels.
    if i[0] < 10:                # If r==b==g, we only really 
                                 # need one pixel (i[0] or "r")

        out.write(str(i[0])+" ") # if the pixel is valid, we'll write the value. So for
                                 # rgb(4, 4, 4), we'll output the string "4"
    else:
        out.write("X ")          # Otherwise, it does not meet the requirements, so
                                 # we'll output "X" 
```

如果由于某种原因不能保证，`r==g==b`请根据需要调整条件。例如，如果您想要*平均*10，您可以将条件更改为类似

```
if sum(i) <= 30: # Equivalent to sum(i)/float(len(i)) <= 10 if we know the length is 3 
```

另请注意，对于灰度格式的文件（与彩色文件格式的灰度图像相反）`im.getdata()`将仅将灰度级作为单个值返回。因此，对于 的 2x2 图像`rgb(15, 15, 15)`，`list(data)`将输出，`[4, 4, 4, 4]`而不是`[(4, 4, 4), (4, 4, 4), (4, 4, 4), (4, 4, 4)]`。在这种情况下，在分析时，只参考`i`而不是`i[0]`

# ruby-on-rails - rails route 与 pdf 格式不匹配

> ID：13050227
> 
> 赞同：0
> 
> 时间：2012-10-24T13:25:51.937
> 
> 标签：ruby-on-rails, routes

我已经为我的上传文件夹设置了访问控制路径。该路由捕获除 pdf 文件之外的所有格式（.jpg 等）。

```
match '/uploads/*path' => 'uploads#show' 
```

它是 routes.rb 文件中的第一条路线。

你知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:22:27.300

查看 Rails 指南中的 11.2 [RESTful 下载](http://guides.rubyonrails.org/action_controller_overview.html)了解更多详细信息，但您可能需要添加`Mime::Type.register "application/pdf", :pdf`到`config/initializers/mime_types.rb`文件中

# x11 - 在 VirtualBox 中，在控制台和 X11 Windows 之间进行交换

> ID：13050228
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:25:53.797
> 
> 标签：x11, virtualbox

我正在运行一个 VirtualBox Image，但它只显示一个控制台窗口，我怎样才能获得 X11 窗口环境？

我自己没有构建图像，我使用的是预先提供的图像，并且完全不清楚它是否可以在 Gui 环境中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:03:53.553

似乎我刚刚安装的虚拟机只包含一个服务器，没有安装任何图形包，所以问题是 linux 安装的一个功能，而我认为我需要在虚拟机本身中启用一个选项。

仅供参考

```
sudo apt-get install ubuntu-desktop 
```

可能会奏效，但在我的特殊情况下运行了很长时间，将我的机器停顿然后放弃。

任务中止。

# android - 将用户发送到简历上的主要活动

> ID：13050229
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:25:54.907
> 
> 标签：android, xamarin.android

在我的应用程序中，我将登录活动作为主启动器。当用户第一次打开应用程序时，用户需要输入凭据才能进入主要活动。在用户登录时，我已经在首选项中保存了主要活动所需的一些信息。现在我想要的是，当用户再次打开应用程序时，假设用户尚未注销，应借助保存在首选项中的信息将用户直接发送到主要活动。

下面是登录活动中创建新会话的代码。

```
 if (res.carExists != true)
            {
                MyMessageBox.SetAlertBox("Opps!!!!!!!!", "This Car Number Was Wrong!!!!", "OK", m_context);
            }
            else
            {
                string carType = res.carType;
                string seatNum = res.numOfSeats.ToString();
                // MainActivity act = new MainActivity( result.driverId );
                session = new SessionManger(m_context);
                session.createLoginSession(result.driverId.ToString());
                var mact = new Intent(m_context, typeof(MainActivity));
                mact.PutExtra("driverID", result.driverId.ToString());
                MyMessageBox.SetAlertBox("Comfirm!", "Your car is a: " + carType + " with " + seatNum + " seats??", "Yes", "No", mact, m_context);
        } 
```

下面是会话管理器的代码，它将用户信息保存在登录中。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Preferences;

namespace NorthStar.Driver
{
    public class SessionManger
    {
        ISharedPreferencesEditor editor;
        ISharedPreferences pref;

        // Context
        Context _context;

        // Shared pref mode
        int PRIVATE_MODE = 0;

        // Sharedpref file name
        private static readonly String PREF_NAME = "AndroidHivePref";

        // All Shared Preferences Keys
        private static readonly String IS_LOGIN = "IsLoggedIn";

        // User name (make variable public to access from outside)
        public static readonly String KEY_NAME = "driver";

        // Constructor
        public SessionManger(Context context)
        {
            this._context = context;
            pref = _context.GetSharedPreferences(PREF_NAME, Android.Content.FileCreationMode.Private);
            editor = pref.Edit();
        }

        public void createLoginSession(String driverID)
        {
            // Storing login value as TRUE
            editor.PutBoolean(IS_LOGIN, true);

            // Storing name in pref
            editor.PutString(KEY_NAME, driverID);

            editor.Commit();
        }

        public void  checkLogin()
        {
            if (!this.isLoggedIn())
            {
                Intent i = new Intent(_context, typeof(Activity1));
                i.AddFlags(ActivityFlags.ClearTop);
                i.SetFlags(ActivityFlags.NewTask);
                _context.StartActivity(i);
            }

        }

        public string getDriver()
        {
            return pref.GetString(KEY_NAME, "");
        }

        public Boolean isLoggedIn()
        {
            return pref.GetBoolean(IS_LOGIN, false);
        }

    }
} 
```

有人可以给我一些提示，我如何在共享首选项中保存信息的帮助下将用户引导到主要活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:09:03.790

由于您在用户登录时在共享首选项中保存了一些值，因此下次打开应用程序时，请在登录活动中检查该共享首选项值（在进行登录之前）。如果其为真（例如），则开始主要活动（完成登录活动，以便用户在按下返回按钮后不应返回登录活动）否则继续登录活动。当用户注销时，再次将共享首选项值替换为 false，以便下次打开应用程序时，控制应该首先进入登录活动。

# validation - 淘汰赛验证插件和可见

> ID：13050231
> 
> 赞同：0
> 
> 时间：2012-10-24T13:26:02.843
> 
> 标签：validation, knockout.js, visible

有没有办法说验证插件只验证带有“：可见”选择器的字段？表格上有 2 个方块。并且在一瞬间只能看到其中的一个。对于不可见块，我不需要验证隐藏数据。它是验证插件中的解决方案，例如 jQuery 验证插件中的解决方案吗？

> 忽略：“输入[类型='文本']：隐藏”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:16:13.280

谢谢，[丹路德维希](https://stackoverflow.com/users/304832/danludwig)。使用 ko.validation.group() - 是一个答案。小组是解决问题。我不明白，为什么这个功能没有在文档中描述。

# c++ - 这是 ->> 一个旧的运算符还是一个错字/错误？

> ID：13050234
> 
> 赞同：50
> 
> 时间：2012-10-24T13:26:03.903
> 
> 标签：c++, c, operators, history

在我阅读的过程中，我遇到了写于 1993 年（或者可能是 1893 年，他们离开了世纪和千年）的[WG14 Defect Report #51 。](http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_051.html)在那里的代码示例中，显然`->>`在指向`struct`. 我在我找到的任何运算符优先级表中都找不到它，所以我想知道，它是否曾经是一个运算符，如果是这样，这个运算符是做什么的（或做了什么，视情况而定）？

起初我认为这是一个错字，但它在文本中又被复制了两次，在对问题的响应中又在代码示例中被复制了一次，我很难相信它只是滑过至少两名 C 专家而没有被注意到，当它跳出像我这样的新手时。它也是代码的焦点，很容易注意到，并且从未被纠正过。

这是添加了缩进的代码：

```
#include <stdlib.h>

struct A {
    char x[1];
};

main()
{
    struct A *p = (struct A *) malloc(sizeof(struct A) + 100);
    p->>x[5] = '?';  /* This is the key line [for both them and us] */
    return 0;
} 
```

我尝试使用 C 和 C++ 编译器编译此代码，但在任何一个中都无法解析。也许这是 C 的早期版本中不再使用的某个运算符？

这感觉很可疑[，这个运算符的名称是什么：“-->”？](https://stackoverflow.com/questions/1642028/what-is-the-name-of-this-operator)问题，但我认为这不是其他两个运算符的组合，我看不出它如何划分并有效。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-24T14:26:07.907

这看起来像是转录过程中的一个问题。在 DR 42 中也有类似的问题，其中大于号加倍： [http ://www.open-std.org/jtc1/sc22/wg14/docs/rr/dr_042.html](http://www.open-std.org/jtc1/sc22/wg14/docs/rr/dr_042.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-24T13:29:42.797

我在 1992 年学习了 C，我 100% 确定当时没有这样的运算符。

从上下文中`p->>x[5]`，我们可以推断它似乎与更熟悉的箭头运算符 完全相同`->`。因此，它很可能是一个错字。

* * *

或者，这可能是将代码转录为 HTML 时的编码问题。如果您查看该页面的源代码，您会发现它有转义码、文字`<`和`>`字符的奇怪混合：

```
<TT><B>#include &lt;stdlib.h><BR> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T23:25:16.863

这似乎确实可能是一个转录错误，但我认为写出一个真正的 C 编译器如何解释这个结构会很有用，无论如何，只是为了明确这不是一个聪明的把戏。首先重要的是要知道这句话，来自 C11 §6.5.4p4（技术上，N1570；这种语言自 C89 以来没有变化，尽管节号可能不同；强调我的）：

> 如果输入流已被解析为直到给定字符的预处理标记，则下一个预处理标记是可以构成预处理标记的*最长字符序列。*

这意味着必须将六个字符的字符串`" p->>x"`标记为`p -> > x`、 not`p - >> x`或`p - > > x`。（在这种情况下实际上并不重要，无论哪种方式都将是语法错误，但是此规则*可能*是程序按预期解析与否之间的区别；标准给出了示例`x+++++y`，它被解释为`x++ ++ +y`，而不是`x++ + ++y`，尽管只有后者是一个格式良好的表达式。）

接下来要知道的是，`->`运算符的右侧参数必须是一个*标识符，根据第 6.5.2 节中**后缀表达式*的语法规则。显然`>`不是标识符，所以我们有一个明确的语法错误。

# cuda - NVIDIA Tesla 和 CUDA 到底是什么？

> ID：13050235
> 
> 赞同：3
> 
> 时间：2012-10-24T13:26:07.743
> 
> 标签：cuda, gpgpu, nvidia, tesla

我正在对 GPGPU 进行一些研究，目前正在努力解决特斯拉和 CUDA 到底是什么的问题。在论文“NVIDIA Tesla：统一的图形和计算架构”中，它说 Tesla 架构是在 GeForce 8800 中引入的。通过进一步阅读，我确信它是 NVIDIA 显卡的整体架构。不幸的是，事实并非如此。在[http://www.nvidia.com/object/why-choose-tesla.html](http://www.nvidia.com/object/why-choose-tesla.html)上，他们明确区分了 GeForce、Quadro 和 Tesla。这一切与 CUDA 有什么关系？它只是 Cuda-C 硬件支持的 GPU 上一般计算的扩展吗？SM、SIMT、线程同步、共享内存、Warp 等的概念与它有什么关系？库达？特斯拉？此外[http://nvidia.custhelp.com/app/answers/detail/a_id/2133/~/what-is-the-difference-between-tesla-and-cuda%3F](http://nvidia.custhelp.com/app/answers/detail/a_id/2133/~/what-is-the-difference-between-tesla-and-cuda%3F)提到特斯拉是为高性能计算和 CUDA 只是软件。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:41:43.263

不幸的是，英伟达将“特斯拉”这个名字用于两件不同的事情：

*   [它是GeForce 200 系列 GPU](http://en.wikipedia.org/wiki/GeForce_200_Series)使用的架构的代号。

*   英伟达还将其[高性能计算产品线](http://www.nvidia.com/object/tesla-supercomputing-solutions.html)归入了特斯拉的营销名称中。

[CUDA](http://www.nvidia.com/object/cuda_home_new.html)是允许在 Nvidia GPU 上进行通用计算的软件的名称。

SM、SIMT、线程同步、共享内存、Warp 等确实指的是过去 10 年左右 Nvidia GPU 使用的硬件架构的各个方面。但是，在使用 CUDA 进行编程时，您会经常遇到它们，因为编程模型紧密地反映了这些硬件方面以获得最大性能。

# c++ - 重新定义公共/私有接口的枚举

> ID：13050236
> 
> 赞同：2
> 
> 时间：2012-10-24T13:26:08.963
> 
> 标签：c++

如何使用`enum state_t`方法中的成员`bar::install`而不在 的公共类部分重新定义它`foo`？班员`_state`必须留下`protected`。

为成员使用另一个具有相似名称的枚举是个好主意吗？

```
class foo
{
protected:
    int         _bla
    volatile enum state_t { _REC, _LIN, _OFF } _state;
public
    volatile enum { REC, LIN, OFF };
    state_t get_state(void) { return _state };
}; 
```

在另一个类的方法中：

```
void bar::install(foo *ptr)
{
    switch(ptr->get_state()) {
        case foo::REC: break;
        case foo::LIN: break;
        case foo::OFF: break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:31:19.753

不，当您复制枚举时，您在修改它们时会付出额外的努力，您还会遇到与其类型相关的错误/警告。我会通过分离它们的定义来`state_t`公开并保持保护，如下所示：`_state`

```
class foo
{   
public:
    enum state_t { REC, LIN, OFF };
protected:
    int         _bla
    volatile state_t _state;
public:
    state_t get_state(void) { return _state };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:29:56.840

您可以定义`bar`为朋友类`foo`

# asp.net - 在 ASP.NET Web 窗体中收集输入值的推荐方法是什么

> ID：13050240
> 
> 赞同：4
> 
> 时间：2012-10-24T13:26:24.873
> 
> 标签：asp.net, mvp

我正在尝试“按书”开发一个 ASP.NET 应用程序；我的 Web 窗体实现了 MVP 模式，我的演示者只与服务层对话，而不是与一堆共享我自己的 EF ObjectContext 的存储库对话。到目前为止，一切都很好。现在我正在处理前端，我有一个困境......

假设我有一个名为 txtDateOfBirth 的 asp:TextBox 控件和提交按钮。当用户单击按钮时，我需要将数据从 ASPX 发送到 Presenter 到 Service 到 .... 但问题是最后我不需要 String，而是 DateTime？而且**我不知道进行转换的最佳位置**：

*   我应该在 ASPX 页面中放置一个验证器，然后在代码隐藏中进行转换吗？
*   或者我应该从表单中收集一堆字符串，为只包含字符串的服务创建一个请求，然后让我的业务模型执行尝试/转换并报告错误？

你有什么建议吗？任何见解表示赞赏...

**编辑：**好的，在阅读并尝试了您的所有建议后，我决定采用以下方法：

1.  代码隐藏和 APSX 负责数据类型转换。我决定使用简单的 CompareValidator 并检查适当的类型，以便代码隐藏可以肯定地转换它。
2.  从演示者到服务层的请求是适当类型的。
3.  所有其他验证都由业务层完成（包括字符串长度、是否需要、范围等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:31:40.377

我会说表示层将原始类型转换为业务层想要处理的任何内容是合法的。

例如，在 ASP.NET MVC 框架中（我知道您没有使用它），业务层使用“模型”与视图层通信，这些模型是简单的、特定于业务的 .NET 对象，旨在与三个 MVC 层通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:15:17.593

1）代码隐藏应该进行转换

*   例如，输入字符串（从 txtDateOfBirth）到 DateTime 还是 DateTime？

2）业务逻辑要检查业务规则

*   例如，用户必须年满 16 岁

3）方法应该是

*   `InsertUser(User user) {}`或者
*   `InsertUser(string firstName, string lastName, DateTime or DateTime? dateOfBirth) {}`

您可以看到 .Net Framework 主要使用强类型参数，而不是字符串和对象。

如果您不想传递可为空的值，可以使用 [DotNetNuke](http://dotnetnuke.codeplex.com/)中使用的以下方法。

```
public class Null
{    
    public static int NullInteger
    {
        get { return -1; }
    }    

    public static decimal NullDecimal
    {
        get { return decimal.MinValue; }
    }

    public static DateTime NullDate
    {
        get { return DateTime.MinValue; }
    }

    ...
} 
```

**已编辑**- 根据您的要求，我在代码后面添加了代码。这不是一个真正的模式。这只是个人喜好。

```
public string FirstName
{
  get { return FirstNameTextBox.Text; }
}

public string LastName
{
  get { return LastNameTextBox.Text; }
}

public DateTime DateOfBirth
{
  get
  {
    DateTime d;
    return DateTime.TryParse(DateOfBirthTextBox.Text, out d) ? 
      d : Null.NullDate;
  }
}

protected void SaveButton_Click(object sender, EventArgs e)
{
  try
  {
    var user = new Users()
    {
      FirstName = this.FirstName,
      LastName = this.LastName,
      DateOfBirth = this.DateOfBirth
    };
    UserService.InsertUser(user);
    ... 
  }
  Catch (Exception ex)
  {
    // Log error
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:37:00.893

如果我理解正确，您的 WebForm 中有一个文本框，用户可以在其中写一些应该是日期的东西，对吧？

你可以做一些事情：

*   您可以为文本框使用掩码，为您的日期格式设置格式。这将向您发送一个看起来像日期的字符串（稍后检查）。我认为 asp:textbox 有这个选项；无论如何，MaskedEdit 控件也有它：[http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx)
*   您可以使用模型类，然后根据该模型中字段的自定义决策验证输入。请参阅此处：[是否可以在 ASP.NET WEBFORM 业务对象类中使用 MVC 的数据注释？](https://stackoverflow.com/questions/6971079/is-it-possible-to-use-data-annotations-for-mvc-in-an-asp-net-webform-business-ob)
*   您可以通过 WebForm 中的 Javascript 进行验证，然后再将其发回。无论如何，这有点乱。
*   或者，您可以在代码隐藏中验证这一点，如果某处出现错误消息，则重新加载页面。这就是 MVC 中 DataAnnotations 自动执行的操作。

# clock - 未定义的参考clock_gettime

> ID：13050247
> 
> 赞同：0
> 
> 时间：2012-10-24T13:26:37.667
> 
> 标签：clock

我不知道怎么弄`clock_gettime()`。我使用`-irt`了选项。但我得到错误。其他问题？请帮我。

```
root@c405:/home/c405/workspace/rpy/Beremiz_120730/EtherLAB/tool# make
/bin/sh ../libtool --tag=CXX   --mode=link g++ -I../include -I../master -Wall -DREV=`if test -s ../revision; then cat ../revision; else hg id -i .. 2>/dev/null || echo "unknown"; fi` -fno-strict-aliasing -g -O2    -o ethercat soe_errors.o ethercat-Command.o ethercat-CommandAlias.o ethercat-CommandCStruct.o ethercat-CommandConfig.o ethercat-CommandData.o ethercat-CommandDebug.o ethercat-CommandDomains.o ethercat-CommandDownload.o ethercat-CommandFoeRead.o ethercat-CommandFoeWrite.o ethercat-CommandGraph.o ethercat-CommandMaster.o ethercat-CommandPdos.o ethercat-CommandRegRead.o ethercat-CommandRegWrite.o ethercat-CommandRescan.o ethercat-CommandSdos.o ethercat-CommandSiiRead.o ethercat-CommandSiiWrite.o ethercat-CommandSlaves.o ethercat-CommandSoeRead.o ethercat-CommandSoeWrite.o ethercat-CommandStates.o ethercat-CommandUpload.o ethercat-CommandVersion.o ethercat-CommandXml.o ethercat-DataTypeHandler.o ethercat-FoeCommand.o ethercat-MasterDevice.o ethercat-NumberListParser.o ethercat-SdoCommand.o ethercat-SoeCommand.o ethercat-main.o ethercat-sii_crc.o ethercat-CommandEoe.o  -irt 
libtool: link: g++ -I../include -I../master -Wall -DREV=unknown -fno-strict-aliasing -g -O2 -o ethercat soe_errors.o ethercat-Command.o ethercat-CommandAlias.o ethercat-CommandCStruct.o ethercat-CommandConfig.o ethercat-CommandData.o ethercat-CommandDebug.o ethercat-CommandDomains.o ethercat-CommandDownload.o ethercat-CommandFoeRead.o ethercat-CommandFoeWrite.o ethercat-CommandGraph.o ethercat-CommandMaster.o ethercat-CommandPdos.o ethercat-CommandRegRead.o ethercat-CommandRegWrite.o ethercat-CommandRescan.o ethercat-CommandSdos.o ethercat-CommandSiiRead.o ethercat-CommandSiiWrite.o ethercat-CommandSlaves.o ethercat-CommandSoeRead.o ethercat-CommandSoeWrite.o ethercat-CommandStates.o ethercat-CommandUpload.o ethercat-CommandVersion.o ethercat-CommandXml.o ethercat-DataTypeHandler.o ethercat-FoeCommand.o ethercat-MasterDevice.o ethercat-NumberListParser.o ethercat-SdoCommand.o ethercat-SoeCommand.o ethercat-main.o ethercat-sii_crc.o ethercat-CommandEoe.o -irt 
ethercat-CommandSlaves.o: In function `CommandSlaves::listSlaves(MasterDevice&, std::list<ec_ioctl_slave_t, std::allocator<ec_ioctl_slave_t> > const&, bool)':
/home/c405/workspace/rpy/Beremiz_120730/EtherLAB/tool/CommandSlaves.cpp:176: undefined reference to `clock_gettime'
collect2: ld returned 1 exit status
make: *** [ethercat] 오류 1
root@c405:/home/c405/workspace/rpy/Beremiz_120730/EtherLAB/tool# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:07:53.340

使用`-lrt`而不是`-irt`. 拼写错误？

# c# - 将 C# 字符串生成器传递给 C DLL 的 C++ 包装器

> ID：13050249
> 
> 赞同：2
> 
> 时间：2012-10-24T13:26:57.447
> 
> 标签：c#, c++, dll

我获得了已编译为 DLL 的 C 代码。然后，我在 VC++ 中创建了一个包装器，它调用此代码中的函数。到目前为止一切正常。我无法将 C# stringbuilder (char*) 从使用此包装器的 C# 代码传递给 C++ 代码。

到目前为止，我有一个用 VC++ 编写的包装类，它有这个函数调用：

```
void Wrapper::ReadStream(char* buffer, int* size)
{
    int req_sz;
    read_stream(opts, req_sz, req, buffer); //This calls the C DLL, this part works.
} 
```

在尝试调用 C++ 包装函数 ReadStream 时，我的 C# 代码出现问题。在四处寻找类似问题后，我发现为了将字符串从 C# 传递到 C++（它将寻找一个 char*），应该传递一个 stringbuilder，所以我尝试了：

C#代码：

```
...
Wrapper wrap = new Wrapper()
...

int bufferSize = 48;
StringBuilder buffer = new StringBuilder(bufferSize);
wrap.ReadStream(buffer, ref bufferSize); 
```

但是代码不会编译，因为 C# 认为函数定义需要 sbyte*。我读过这是因为 C# 字符是 unicode（2 个字节），而 C++ 字符是单字节字符，但建议的解决方案是传递一个 StringBuilder。

我见过很多解决方案，其中 C# 代码将 stringbuilder 直接传递给 DLL，但找不到将 stringbuilder 传递给 C++ 包装类的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:30:47.567

您绝对可以将 StringBuilder 传递给 C++ 端，只需将 Wrapper::ReadStream 签名更改为：

```
void Wrapper::ReadStream(LPWSTR buffer, int* size) 
```

顺便说一句，既然你说你有 C 代码，我建议修改它以便你可以直接从 C# 调用它（因为 C 是 C++ 的子集，C 代码通常也是 C++ 代码，你可以添加 C++ 功能像上课一样）。这样你就可以避免使用包装器，这总是很痛苦。

当您使用它时，我还建议将其修改为使用 Unicode 字符串而不是 ANSI 字符串（除非有些东西需要 ANSI 字符串）。

最后，我建议使用 COM 让 C# 端和 C++ 端相互通信。然后 ReadStream 方法将位于 IDL 接口中，例如：

```
[object, uuid(2C5B0D36-0B34-4FEE-A0B8-B10F7A019A6D)]
interface ISomeObject : IUnknown
{
    HRESULT ReadStream([out, retval] BSTR* pbstrBuffer);
} 
```

BSTR 是 COM 的字符串类型（它是 Unicode）。C#端会看到如下界面：

```
interface ISomeObject
{
    string ReadStream();
} 
```

不需要“大小”参数，因为您正在返回一个新字符串，而不是填充传入的缓冲区（存在缓冲区可能太小而无法容纳结果的问题）。

如果您以前没有使用过 COM，那么它的学习曲线可能会很陡峭，但如果您打算像这样进行大量互操作，那么它是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:57:51.437

您可以将 C# unicode 字符串传递给[std::wstring](http://msdn.microsoft.com/en-us/library/wt3s3k55%28v=vs.71%29.aspx)，然后在 c++ 代码中您可以将[std::wstring 转换为 std::string](https://stackoverflow.com/questions/4804298/c-how-to-convert-wstring-into-string)并传递给 C-API。

或者您可以使用[Encoding ASCII GetBytes](http://msdn.microsoft.com/en-us/library/system.text.encoding.ascii.aspx)并在 C# 代码中获取 Byte[]，将数组传递给 c++，将其转换为以空字符结尾的字符串并将其传递给 C-API。我可能会选择第二种选择。

# ios - IOS 设备上未显示嵌入式 Youtube 播放列表

> ID：13050250
> 
> 赞同：1
> 
> 时间：2012-10-24T13:27:00.337
> 
> 标签：ios, ipad, youtube-api, playlist

*原始帖子已编辑以添加更多信息并添加示例链接*

我创建了一个 YouTube 播放列表，并使用 youtube 生成的 iframe 代码将其嵌入到一个网站中，它通过所有浏览器在 Windows 上运行良好。这里的例子...

[http://www.youtube.com/embed/videoseries?list=PLRvvIcA_sgWo3bMuhjLsoruYMue05LSOK&hl=en_US;showinfo=1](http://www.youtube.com/embed/videoseries?list=PLRvvIcA_sgWo3bMuhjLsoruYMue05LSOK&hl=en_US;showinfo=1)

但是在 iOS 设备上（在 ipad3 和 iPhone 4 上试用过），API 只显示第一个视频，没有播放列表缩略图或控件。它允许视频一个接一个地播放，但您无法控制它们或无法选择播放哪个视频。

我已经尝试研究了几天，但似乎没有明确的答案。我可能在 6 个月前看到有人提到它正在研究或处理，但我想知道这是否仍然是一个问题，是否会得到解决，或者我如何才能解决它。很高兴看到这适用于所有操作系统。我还注意到我生成的代码使用了 videoseries?list 参数，而之前我所读到的只是播放列表。我认为这是 HTML5 相关的？请提供任何帮助或建议。

* * *

ios 设备上的播放列表似乎有了一些进展，我认为它现在差不多了，但还不完全。使用上面的同一页面[http://www.youtube.com/embed/videoseries?list=PLRvvIcA_sgWo3bMuhjLsoruYMue05LSOK&hl=en_US;showinfo=1](http://www.youtube.com/embed/videoseries?list=PLRvvIcA_sgWo3bMuhjLsoruYMue05LSOK&hl=en_US;showinfo=1)自第一篇文章以来我没有改变。该播放列表在 Windows 上运行良好，最初通过 Safari 和 Chrome 在 IOS 上运行正常。但是，如果您点击播放列表链接，它会显示列表并允许您播放视频，但仅限于第一次。之后，如果您暂停视频并尝试再次使用播放列表按钮，它只会显示播放栏或再次隐藏它。返回播放列表的唯一方法是刷新页面，这很痛苦。有没有人对此有任何想法，或者是否可以或将对其进行研究？

谢谢马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:10:56.963

这只是 YouTube 团队尚未开始构建的东西。HTML5 播放器有一个播放列表的 UI，但它缺少 Flash 播放器中的一些功能。最终，用户界面也将使其成为移动版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:37:31.267

请谷歌，默认情况下在 HTML5Player 中包含并激活播放列表控件和播放列表缩略图。见[https://stackoverflow.com/a/15727789/2228853](https://stackoverflow.com/a/15727789/2228853)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T22:54:22.883

这是 Google 的一个[已知问题](https://code.google.com/p/gdata-issues/issues/detail?id=5397)。并不是说它不是尚未建成的东西。此功能一直有效到 2013 年 10 月 17 日左右。该问题已由开发团队“提交”，这让那些在支持线程上发表评论的人非常愤怒。除了“提交”评论之外，没有任何解释、评论或 eta 宣布修复。

# ruby-on-rails - rails app 将如何从迁移文件或模式在服务器中创建数据库？

> ID：13050253
> 
> 赞同：0
> 
> 时间：2012-10-24T13:27:03.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个rails `app`，到目前为止我在本地系统中运行，现在我必须将它移动到，`server`所以我需要知道的是它将如何`database`使用迁移文件或架构创建一个？

另外我想知道是否从迁移中，我添加了新字段并删除了一些迁移文件，那么它将如何创建丢失的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:37:02.267

Rails 应用程序通常使用 git 存储库部署到服务器。还有其他方法可以做到这一点，但这是我更喜欢的方式。看看 capistrano (https://github.com/capistrano/capistrano)。

它是一组任务（也称为接收），您可以从控制台运行以将您的应用程序部署到您的服务器。它还可以在服务器上运行您的迁移。

基本上，您必须自己创建数据库。当迁移在服务器上运行时，它们将创建与在本地计算机上创建的完全相同的数据库。因此，如果您删除了迁移，它们将不会运行（惊喜，惊喜！）

# c# - c#泛型。 ，以编程方式分配 T 从读取字符串值？

> ID：13050256
> 
> 赞同：3
> 
> 时间：2012-10-24T13:27:22.690
> 
> 标签：c#, generics, instantiation

我有两个类（即`Customer`和`Employee`）和一个通用存储库`GenericRepository<T> where T : class`。

是否可以在从字符串分配 T 的值时实例化一个新的 GenericRepository 实例？

像这样：

```
string x  = "Customer";
var repository = new GenericRepository<x>(); 
```

（从而创建类型的存储库实例`GenericRepository<Customer>`）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T13:35:02.613

是的，但这很尴尬。

```
string name = "MyNamespace.Customer";

Type targetType = Type.GetType(name);

Type genericType = typeof(GenericRepository<>).MakeGenericType( targetType );

object instance = Activator.CreateInstance(genericType); 
```

在 linqpad 中，`instance.Dump();`：

```
GenericRepository<Customer> 
UserQuery+GenericRepository`1[UserQuery+Customer] 
```

# 编辑

您可以将`CreateInstance`结果分配给动态，而不必通过反射调用方法。

```
dynamic instance = Activator.CreateInstance(genericType);
instance.SomeInstanceMethod(someParameter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:51:16.260

你当然可以。您可能还需要一个到您的存储库的接口。这有两个目的。首先，您可以以类型安全的语言绑定方式调用方法，而不必动态调用，其次，它允许您轻松地模拟它以进行测试。

```
using System;
using System.Collections.Generic;

namespace QuickTest
{
    public interface IRepository
    {
        void test();
    }
    public class GenericRepositoryFactory
    {
        static public IRepository CreateInstance(params Type[] p)
        {
            Type genericType = typeof(GenericRepository<>).MakeGenericType(p);
            return Activator.CreateInstance(genericType) as IRepository;
        }
    }

    public class GenericRepository<t> : IRepository
    {
        public void test() { Console.WriteLine(this.GetType().ToString()); }
    }

    class Program
    {
        public static void Main(string[] argv)
        {
            var repo = GenericRepositoryFactory.CreateInstance(new[] { typeof(string) });
            repo.test();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:36:18.007

您可以使用反射来创建通用对象，例如，您可以使用字符串来查找类型（使用 System.Type.GetType）。一旦你有了一个类型对象，你就可以使用它从反射 API 中找到一个构造函数 - 请参阅

[http://msdn.microsoft.com/en-us/library/ms172334.aspx](http://msdn.microsoft.com/en-us/library/ms172334.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T13:56:50.657

是的，有可能。下面的示例代码，但是我会推荐一个工厂模式。

```
 internal class Program {

        private static void Main() {

            string customerString = @"Customer";
            string employeeString = @"Employee";

            object customerRepository = GetGenericRepository(customerString);
            object employeeRepository = GetGenericRepository(employeeString);

            System.Console.WriteLine();
        }

        public static object GetGenericRepository(string typeName) {

            // get the type from the string
            System.Type type = GetTypeFromName(typeName);

            System.Type repositoryOpenType = typeof(GenericRepository<>);
            System.Type repositoryClosedType = repositoryOpenType.MakeGenericType(type);

            return System.Activator.CreateInstance(repositoryClosedType);
        }

        // there are better methods for getting the type by name
        private static System.Type GetTypeFromName(string typeName) {

            System.Type type = System.Type.GetType(typeName, false);

            if (type == null) {

                var types = from assemblyType in System.Reflection.Assembly.GetExecutingAssembly().GetTypes()
                            where assemblyType.Name == typeName
                            select assemblyType;

                type = types.FirstOrDefault();
            }

            return type;
        }
    }

    public class Customer {
    }

    public class Employee {
    }

    public class GenericRepository<T> where T : class {
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T13:31:09.350

您不能像示例希望的那样直接执行此操作，但您可以实现工厂模式来帮助您。只需将字符串传递到您的工厂即可返回存储库。

编辑：工厂将拥有存储库中所有类（即客户和员工）的字典，这些类将在实例化时加载。我建议使用属性和反射，以便您可以动态地填充字典。然后，您有一个方法接收返回类型为 GenericRepository 的字符串的方法，其中字符串对应于字典中的一种类型。然后，您创建该 GenericRepository 的一个实例并将其返回给您的调用者。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T13:38:04.887

您可以使用`Type.GetType(string)`来获取“客户”的类型定义。调用它时，它通常至少需要完整的命名空间。然后您可以在调用中使用该类型`Type.MakeGenericType(params Type[])`来创建泛型类型的类型定义。最后，`Invoke(object[])`对您新创建的类型的调用应该会创建一个 this 的实例。

```
using System;

class Foo<T> where T : class { }

class Bar { }

class Program {
    static void Main(string[] args) {
        var barType = Type.GetType("ConsoleApplication29.Bar");
        var fooType = typeof(Foo<>).MakeGenericType(barType);
        var fooCtor = fooType.GetConstructor(Type.EmptyTypes);
        var instance = fooCtor.Invoke(new object[] { });
        Console.WriteLine(instance.GetType().FullName);
        Console.ReadLine();
    }
} 
```

# sql - 使用 SQL 2008 EXPRESS/Visual Web Developer 2008 创建 .MDF

> ID：13050262
> 
> 赞同：2
> 
> 时间：2012-10-24T13:27:29.847
> 
> 标签：sql, visual-web-developer, mdf

我正在尝试使用 SQL server 2008 express 和 Visual Web Developer 2008 Express 创建登录功能。
我尝试使用登录状态和登录控件/运行页面而不进行调试，然后尝试登录。有人告诉我这将创建一个 ASPNETDB.MDF。文件; 相反，它给了我一个错误。然后我尝试在 Visual web developer 的 AppData 部分创建一个数据库，它给了我这个错误：

> 与 sql server 文件 (.mdf) 的连接需要 sql server 2005 才能正常运行。请验证组件的安装或从 (url) 下载。

我安装了 sql 2008 express 并且（据我所知）需要 ASPNETDB.MDF 在我的站点上创建登录系统。我是否必须降级我的 sql 服务器才能在我的网站上正常登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:13:48.510

ASPNETDB.MDF 是使用 ASP.NET 应用程序服务的默认数据库，其中包括配置文件、角色、成员资格等。您可以使用 .NET Framework 中提供的成员资格提供程序，也可以实现自己的提供程序。

您无需降级 SQL Server 即可在您的站点上正常登录。要解决该错误消息，请验证 SQL Server Express Edition 是否已正确安装并且当前正在系统上运行。您可以使用 SQL Server 配置管理器检查并启动系统上安装的 SQL 实例。

如果 SQL Server Express 实例正在运行，请检查 Visual Studio 是否指向正确的 SQL 实例。您可以通过导航到 Visual Studio IDE 中工具 -> 选项下的数据连接来执行此操作。

链接：

1.  [微软支持文章](http://support.microsoft.com/kb/2009225)
2.  [实现成员资格提供程序](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29.aspx)

# php - 是否可以在程序（非 oo）函数上使用模拟？

> ID：13050263
> 
> 赞同：3
> 
> 时间：2012-10-24T13:27:35.543
> 
> 标签：php, unit-testing, mocking, phpunit

> **可能重复：**
> [PHP - 覆盖现有函数](https://stackoverflow.com/questions/4725194/php-override-existing-function)

我想使用模拟对我的一些具有外部依赖项的函数进行单元测试。

所以这里是......下面是我正在使用的简化模型。我继承的很多代码都是这样写的，所以我希望能够编写一些简单的测试，而不必尽可能重写：

```
function display_tasks($id)
{
    $tasks = call_some_function_that_runs_a_database_query($id);

    $html = "<some html>";

    foreach ($tasks as $task)
    {
        // Some operations here
    }

    $html .= "</some html>";

    return $html;
} 
```

我的函数调用的代码没有包装在对象中，因此我无法将各种示例付诸实践，因为互联网上 99% 的示例都是基于面向对象的代码。甚至可以直接从 PHPunit 模拟程序函数吗？

我希望能够模拟`call_some_function_that_runs_a_database_query`返回的任何内容。我尝试过使用内置的 PHPunit 模拟方法，但这样做不会覆盖我函数中原始调用的结果。

任何帮助或示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:37:40.303

您可以使用[runkit PHP 扩展](http://php.net/manual/en/book.runkit.php)将一个函数替换为在测试期间返回所需内容的函数。它比模拟对象更麻烦，因为在所有情况下（通过、失败、错误）测试后，您必须注意将原始对象换回。

**被测功能**

```
function getTasksFromDatabase($id) {
    // call to database...
} 
```

**测试用例**

```
function stub_getTasksFromDatabase($id) {
    return array('one', 'two', 'three');
}

class getUserTest extends PHPUnit_Framework_TestCase {
    public static function setUpBeforeClass() {
        runkit_function_rename('getTasksFromDatabase', 'orig_getTasksFromDatabase');
        runkit_function_rename('stub_getTasksFromDatabase', 'getTasksFromDatabase');
    }

    public function tearDownAfterClass() {
        runkit_function_rename('getTasksFromDatabase', 'stub_getTasksFromDatabase');
        runkit_function_rename('orig_getTasksFromDatabase', 'getTasksFromDatabase');
    }

    public function setUp() {
        $html = getTasks(1);
        self::assertEquals('<some html>...one...two...three...</some html>', $html);
    }
} 
```

# wpf - 更改列表框的整行颜色

> ID：13050267
> 
> 赞同：0
> 
> 时间：2012-10-24T13:27:50.300
> 
> 标签：wpf

所以我已经尝试了几个小时来解决我的问题。在互联网上，我们可以找到一种据说有效的方法（[链接](http://blogs.msdn.com/b/wpfsdk/archive/2007/08/31/specifying-the-selection-color-content-alignment-and-background-color-for-items-in-a-listbox.aspx)）。

但是在尝试之后，每当我选择列表框中的一个条目时，只有文本变为蓝色（通过 Foreground 属性），但该行不是红色。你知道我做错了什么吗？

```
<Style x:Key="BPFStandardListBoxItem" TargetType="{x:Type ListBoxItem}">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Purple"/>
    </Style.Resources>
    <Setter Property="Control.Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                <Border Name="Border" Padding="2" SnapsToDevicePixels="true">
                    <ContentPresenter />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Foreground" Value="Blue" />
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Cursor" Value="Hand" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter> 
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:44:35.333

由于您拥有`override`listboxItem `default template`，因此在此过程中您必须拥有`broken`一些东西，可能是一些触发器或一些默认属性，因为它们已被您的模板完全覆盖。

您可以在不覆盖这样的模板的情况下实现您想要实现的目标（使用画笔`HighlightTextBrushKey`设置前景） -

```
<Style x:Key="BPFStandardListBoxItem" TargetType="{x:Type ListBoxItem}">
   <Style.Resources>
      <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                       Color="Red"/>
      <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" 
                       Color="Blue"/>
      <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                       Color="Purple"/>
   </Style.Resources>
   <Style.Triggers>
       <Trigger Property="IsMouseOver" Value="True">
           <Setter Property="Cursor" Value="Hand" />
       </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T13:46:36.153

嗯，我不确定 - 我以前从未这样做过 - 你总是可以尝试在触发器上设置边框背景

..就像是

```
 <Trigger Property="IsSelected" Value="true">
                <Setter TargetName="Border" Property="Background"
                     Value="Red"/>
   </Trigger> 
```

更多信息可以在这里找到[http://blogs.vbcity.com/xtab/archive/2009/06/29/9344.aspx](http://blogs.vbcity.com/xtab/archive/2009/06/29/9344.aspx)

# ruby-on-rails-3.2 - 如何在铁轨上使用带有小胡子和红宝石的 rabl

> ID：13050269
> 
> 赞同：2
> 
> 时间：2012-10-24T13:27:56.493
> 
> 标签：ruby-on-rails-3.2, mustache, rabl

我正在使用 ruby​​ 1.9.3p125 和 rails 3.2.8 并将 rabl 添加到我的 gemfile 中，所以它应该是最新的。

我在一个简单的情况下使用了 RABL，我希望将 json 直接发送给请求者。现在我有一种情况，我想使用 rabl 生成 json，然后用 mustache 渲染它。

在此之前，我一直在使用 as_json （在模型中被覆盖）来生成 json，因此：

```
 <%= render 'scrollable', :mustache=>{photos: @page.photos.as_json} %> 
```

_scrollable.html.mustache 中有一个合适的模板，我仍然希望使用它。

我已经为这些照片编写了 RABL 模板：

```
# _photo.json.rabl
object @photo do
  attributes :src, :name, :height
  attributes :drawing

  node do |p|
    { :label => p.caption || p.name }
  end

  child :components do
    attributes :name, :height
  end

end 
```

和

```
# _photos.json.rabl
collection @photos do
  extend 'photos/photo'
end 
```

如何调用这些模板？

```
 <%= render 'scrollable', :mustache =>render(@page.photos, template: 'photos', formats: '[json]', handlers: ['rabl'])  %> 
```

返回

```
Missing partial ..../photos/photo with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :mustache, :rabl]} 
```

有趣的是，它似乎已经失去了我想要**格式的事实：json**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:16:02.873

我正在做类似的事情，但直接调用 Rabl 渲染器并要求它提供哈希而不是 json 字符串，然后将其用作胡子数据......

```
render 'posts.mustache', :mustache=>Rabl::Renderer.new('posts.rabl', @posts, :view_path => 'app/views', :format => 'hash').render 
```

我认为 mustache 期待一个对象而不是字符串。

# php - 使用 preg_match 获取图像

> ID：13050271
> 
> 赞同：-2
> 
> 时间：2012-10-24T13:28:02.923
> 
> 标签：php, html, image, preg-match, src

我必须遵循代码：

```
<div class="beeldengeluid-infobox" style="float: right; margin: 0em 0em 1em 1em; border: 1px #999 solid; background-color: #ffffff;">
<table border="0" cellspacing="0" cellpadding="5" width="300" summary="samenvattend persoonsoverzicht">
      <tr><td colspan="2" style="font-size:8pt;text-align:center;padding:4pt;line-height:1.25em"><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:252px;"><img alt="" src="http://www.beeldengeluidwiki.nl//images/thumb/c/c8/Claudia_de_Breij_%28c%29_Corbino.jpg/250px-Claudia_de_Breij_%28c%29_Corbino.jpg" width="250" height="333" class="thumbimage" />  <div class="thumbcaption"><div class="magnify"><img src="http://www.beeldengeluidwiki.nl//skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></div>Claudia de Breij<br>Foto: <a rel="nofollow" target="_blank" class="external text" href="http://www.corbino.nl/">Corbino</div></div></div></div></td></tr>
      <tr><th>Naam</th><td>Claudia de Breij</td></tr>
      <tr><th>Geboren</th><td>Utrecht, 13 maart 1975</td></tr>
      <tr><th>Functies</th><td>Presentator, Cabaretier</td></tr>
      <tr><th>Bekend van</th><td><i>VARA laat</i>, <i>De wereld draait door</i>, <i>VARA live</i>, <i>De kunst van het maken</i>, <i>Claudia d'r op</i></td></tr>
      <tr><th>Periode actief</th><td>1995 - heden</td></tr>
      <tr><th>Werkt samen met</th><td>Dolf Jansen, Jan Mulder</td></tr>
      <tr><th>Trivia</th><td>Is getrouwd met presentatrice Conny Kraaijeveld</td></tr>
      <tr><th>Media</th><td><div><map name="ImageMap_1_902718077"><area href="http://www.beeldengeluidwiki.nl/index.php/Audio:_Claudia_de_Breij" class="plainlinks" rel="nofollow" shape="rect" coords="0,4,26,25" alt="Audio fragmenten" title="Audio fragmenten"/></map><img alt="Audio.png" src="http://www.beeldengeluidwiki.nl//images/7/72/Audio.png" width="25" height="23" usemap="#ImageMap_1_902718077"/></div></td></tr>
      <tr><th>Externe info</th><td><a rel="nofollow" target="_blank" class="external text" href="http://www.claudiadebreij.nl/">officiÃ«le site</td></tr>
      <tr><td colspan="2"><br/>Claudia de Breij in de media<br/>Oeuvre van Claudia de Breij</td></tr>
      </table>
    </div>
   <p>Claudia de Breij is cabaretiÃ¨re, zangeres en radio- en televisiepresentatrice.     
   </p>
   <hr /> 
```

现在我想获取可变的图像 url。为此，我有以下代码：

```
 <div class="thumbinner" style="width:252px;"><img alt="" src="/images/thumb/0/03/HettyBlok.jpg/250px-HettyBlok.jpg" width="250" height="278"           class="thumbimage" /></div> 
```

但我不知道如何得到这个。

如何获取图片网址？

我试过这个：

```
preg_match('@<img.+src="(.*)".*>@Uims', $cm->rev, $matches);
$src = $matches[0];
echo $src; 
```

这对我有用，但现在我想用 div 获取 i，因为源中有多个图像，我想要正确的图像。

我试过这个：

```
preg_match('/<div class = "thumbinne" style="width:252px;"><img.+src="(.*)".*><\/div>/s',$cm->rev,$matches);
$src = $matches[0];
echo $src; 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:29:47.667

您可以使用 DOM 解析：

```
$dom = new DOMDocument;
$dom->loadHTML('<div class="thumbinner" style="width:252px;"><img alt="" src="/images/thumb/0/03/HettyBlok.jpg/250px-HettyBlok.jpg" width="250" height="278" class="thumbimage" /></div>');
$x = new DOMXPath($dom); 

foreach($x->query("//img") as $node) 
{
    echo $node->getAttribute("src");
} 
```

工作示例：[http ://codepad.org/szqI92Z8](http://codepad.org/szqI92Z8)

另一种方式：

```
$dom = new DOMDocument;
$dom->loadHTML('<div class="beeldengeluid-infobox" style="float: right; margin: 0em 0em 1em 1em; border: 1px #999 solid; background-color: #ffffff;">
<table border="0" cellspacing="0" cellpadding="5" width="300" summary="samenvattend persoonsoverzicht">
      <tr><td colspan="2" style="font-size:8pt;text-align:center;padding:4pt;line-height:1.25em"><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:252px;"><img alt="" src="http://www.beeldengeluidwiki.nl//images/thumb/c/c8/Claudia_de_Breij_%28c%29_Corbino.jpg/250px-Claudia_de_Breij_%28c%29_Corbino.jpg" width="250" height="333" class="thumbimage" />  <div class="thumbcaption"><div class="magnify"><img src="http://www.beeldengeluidwiki.nl//skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></div>Claudia de Breij<br>Foto: <a rel="nofollow" target="_blank" class="external text" href="http://www.corbino.nl/">Corbino</div></div></div></div></td></tr>
      <tr><th>Naam</th><td>Claudia de Breij</td></tr>
      <tr><th>Geboren</th><td>Utrecht, 13 maart 1975</td></tr>
      <tr><th>Functies</th><td>Presentator, Cabaretier</td></tr>
      <tr><th>Bekend van</th><td><i>VARA laat</i>, <i>De wereld draait door</i>, <i>VARA live</i>, <i>De kunst van het maken</i>, <i>Claudia d\'r op</i></td></tr>
      <tr><th>Periode actief</th><td>1995 - heden</td></tr>
      <tr><th>Werkt samen met</th><td>Dolf Jansen, Jan Mulder</td></tr>
      <tr><th>Trivia</th><td>Is getrouwd met presentatrice Conny Kraaijeveld</td></tr>
      <tr><th>Media</th><td><div><map name="ImageMap_1_902718077"><area href="http://www.beeldengeluidwiki.nl/index.php/Audio:_Claudia_de_Breij" class="plainlinks" rel="nofollow" shape="rect" coords="0,4,26,25" alt="Audio fragmenten" title="Audio fragmenten"/></map><img alt="Audio.png" src="http://www.beeldengeluidwiki.nl//images/7/72/Audio.png" width="25" height="23" usemap="#ImageMap_1_902718077"/></div></td></tr>
      <tr><th>Externe info</th><td><a rel="nofollow" target="_blank" class="external text" href="http://www.claudiadebreij.nl/">officiÃ«le site</td></tr>
      <tr><td colspan="2"><br/>Claudia de Breij in de media<br/>Oeuvre van Claudia de Breij</td></tr>
      </table>
    </div>
   <p>Claudia de Breij is cabaretiÃ¨re, zangeres en radio- en televisiepresentatrice.     
   </p>
   <hr />');
$x = new DOMXPath($dom); 

$images = array();

foreach($x->query("//div[contains(@class,'thumbinner')]/img") as $node) 
{
  $images[]=$node->getAttribute("src");
}

echo "<pre>";
print_r ($images); 
```

# gwt - StackTraceElement 中没有行号

> ID：13050274
> 
> 赞同：1
> 
> 时间：2012-10-24T13:28:06.010
> 
> 标签：gwt

我添加了一个带有以下代码的 UncaughtExceptionHandler：

```
 GWT.setUncaughtExceptionHandler(new   
          GWT.UncaughtExceptionHandler() {  
          public void onUncaughtException(Throwable e) {  

              StackTraceElement[] elements = e.getStackTrace();

              String stackTrace = "";
              for (int i = 0; i < elements.length; i++)
              {
                  stackTrace += elements[i] + "\n";
              }

              PlatformServices.instance().log().debug("caught unhandled exception: " + e + " ; Stack:\n" + stackTrace);
          }
        }); 
```

问题是只有每个 StackTraceElement 的函数名是有效的。所有其他信息都是默认的，例如 -1 表示行号或未知的类名。

我想知道我是不是做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:51:43.113

此信息可能只是在 GWT 应用程序执行期间不可用。检查核心`StackTraceElement.java`类，方法`toString()`。的值`lineNumber`仅在 >= 零的情况下才打印出来。它也不是不可能的，它可以是负面的。

我的测试`UncaughtExceptionHandler`给了我完全相同的结果（在运行时没有引用行号）。在混淆模式下编译时，我什至无法获取文件名，因此输出如下所示：

```
com.google.gwt.core.client.JavaScriptException: (TypeError): Cannot read property 'g' of null 
Unknown.iPb(Unknown Source) 
Unknown.gPb(Unknown Source) 
Unknown.npd(Unknown Source) 
... 
```

不是真正的解决方案，但至少你并不孤单:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:27:34.447

尝试在您的模块文件中设置它

```
<set-property name="compiler.stackMode" value="emulated" /> 
```

# javascript - javascript赋值运算符数组

> ID：13050279
> 
> 赞同：1
> 
> 时间：2012-10-24T13:28:44.540
> 
> 标签：javascript

分配对象（例如数组）时，我不理解赋值运算符。我被告知，作为赋值运算符复制**参考**。但是，它似乎复制了数据。例如：

```
var globArray = [];

function test() {
  var names = ["craig", "silva"];
  globArray = names;
}//endFunction test

function test2() {
  console.log("el1: ", globArray[0], "el2: ", globArray[1]);
}//endFunction test2 
```

当我调用 TEST 时，它会创建数组 NAMES 并将全局数组“globArray”分配给 NAMES。现在它超出了范围，所以“名称”消失了，对吧？后来我打电话给 test2，但它确实显示了元素！所以它必须复制整个对象，而不是仅仅处理引用。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:30:32.750

当您的“测试”函数返回时，您是正确的，“名称”已“消失”。但是，它的*值*不是，因为它被分配给一个全局变量。“names”局部变量的**值**是对数组对象的**引用。**该引用被复制到全局变量中，因此现在该全局变量还包含对数组对象的引用。

对象分配是全局性的。**当一个对象被一个局部变量分配和引用时，除非**存在对该对象的其他引用（直接或间接），否则当局部变量在其范围变为非活动时消失时，它将被垃圾收集。直接参考将是像您这样的案例。如果局部范围“泄漏”包含对局部变量的引用的函数，则可能发生间接引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T13:38:29.837

这里有两件事在起作用：激活记录和堆上的对象。

您从全局变量的激活框架开始：

```
globArray : undefined 
```

并且堆包含出现在您的代码中的文字

```
ptr0      : "craig"
ptr1      : "silva" 
```

where `ptr0`,`ptr1`等只是引用内存中特定位置的地址或标签。

当您调用`test()`时，解释器会推送一个新的激活框架，其中包含局部变量的框。

```
globArray : undefined
---------------------
names     : undefined 
```

然后解释器评估`["craig", "silva"]`哪个在堆上创建了一个对象。

```
ptr0      : "craig"
ptr1      : "silva"
ptr2      : [ &ptr0, &ptr1 ] 
```

所以`ptr2`now 是内存中的一个位置，其中包含一个指向两个值的数组。

这个内存位置现在存储在`names`激活记录中的位置，所以你的调用堆栈看起来像

```
globArray : undefined
---------------------
names     : &ptr2 
```

赋值`names = ...`不会改变堆，只会改变激活记录。

接下来`globArray = names`将一个激活记录条目的内容复制到另一个。

```
globArray : &ptr2
---------------------
names     : &ptr2 
```

然后调用`test`结束，激活记录被丢弃，留下

```
globArray : &ptr2 
```

全局`globArray`指向在调用`test`. 函数的结尾只是改变了活动的激活记录，而不是堆，所以堆看起来仍然像

```
ptr0      : "craig"
ptr1      : "silva"
ptr2      : [ &ptr0, &ptr1 ] 
```

所以`ptr2`仍然是同一个数组。

> 所以“名字”不见了，对吧？

`names`（激活记录中的条目）消失了，但它指向的对象没有，因为它仍然被`globArray`活动激活记录中的条目指向。

> 后来我打电话给 test2，但它确实显示了元素！所以它必须复制整个对象

不，它只是复制了对该对象占用的堆中位置的引用。由于堆没有更改，因此没有创建新对象，并且堆是创建所有对象的地方。

[堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)可能会感兴趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T13:31:12.080

Javascript 对象是垃圾收集的。

变量引用的对象在退出`names`后会继续存在`test()`，因为它仍然被全局变量引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T13:32:08.317

names 和 globalArray 都引用同一个对象。只要在范围内至少有一个对它的引用，这个对象就不会“消失”。你知道什么消失了吗？globalArray 引用的初始数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T13:39:25.757

该对象与持有对它的引用的变量是分开的。即使变量消失后，对象可能仍然存在。这就是您的代码中发生的事情，即使`names`变量消失了，它引用的对象仍然独立于变量而存在`name`。只有当没有对对象的引用时，它才会从内存中删除。

您可以验证在分配对象时未复制数据。将对象分配给另一个变量后，您可以使用第一个变量更改对象，并且在使用另一个变量时它会更改：

```
function test() {
  var names = ["craig", "silva"];
  globArray = names;
  names[0] = 'peter';
} 
```

现在，当您显示 的内容时`globArray`，您将看到`peter`和`silva`，因为这两个变量都引用了同一个数组对象。

# ios - 检测视图上的触摸和多点触控手势并将它们发送到正确的接收器

> ID：13050281
> 
> 赞同：1
> 
> 时间：2012-10-24T13:28:54.823
> 
> 标签：ios, xcode, uiview, uigesturerecognizer

我的观点面临一个复杂的问题，我会尽量做到清晰和具体，如果有什么不清楚的地方请说出来。

我有一个包含更大视图（ContentView）的 ScrollView。我希望这个 ScrollView 使用两个（或更多）手指滑动来滚动。在 contentView 中，我有几个名为 barView 的自定义视图实例。这些 barview 类似于 uislider，但有一些自定义。为了能够滑动这些条形视图，我使用“touchesMoved”方法来跟踪触摸。但是，每当我想使用多点触控滑动浏览视图时，它也会触发 barviews 上的方法。如何防止 barviews 被多点触控滑动操作？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:36:03.070

您可以使用 PanGestureRecognizers 来跟踪 barViews 上的触摸。设置它们时，您设置：

```
[panGestureRecognzer requireGestureRecognizerToFail:scrollViewSwipeGestureRecognizer] 
```

这确保了 bar 视图上的gestureRecognizers 只能在滚动视图上的滑动手势失败时触发。

或者，如果您的 scrollView 仅在使用 2 个手指时滚动，您可以将以下内容添加到 barView 的 touchesMoved 方法中：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([touches count] > 1)
        return;
    /...
} 
```

# asp.net - 如何为asp.net中的文件夹创建http授权？

> ID：13050283
> 
> 赞同：0
> 
> 时间：2012-10-24T13:28:59.397
> 
> 标签：asp.net, authorization

在我的项目中，我有 asp.net (webform) 站点，可以说，在文件夹中`/site/...` 我创建了一个附加服务：`/service/file.ashx` 我需要通过 http 授权来保护这个文件。

我在 IIS7 中为文件夹 «service» 选择了身份验证部分，并关闭了匿名和基本打开。

所以，现在，如果我去，`/service/`那没关系，标准 http auth 对话框出现，但它不起作用`/service/file.ashx`- 它会将我重定向到站点的 auth 表单（如果我已经获得授权，那么它只是处理 file.ashx 与不要求授权）

我必须做些什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:41:49.630

我发现了如何解决我的问题：我无法关闭表单身份验证，因为它是从根 web.config 继承的，所以我将 web.config 复制到文件夹 /site/ 中只有 auth 部分，并从根 web.config 中删除。它允许我调整 /Dod/ 文件夹的 web.config，然后它解决了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:30:54.463

`location section with path property`您可以添加`system.web section`并定义`deny and allow sections`

```
<configuration>
   <location path="....">
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

链接： http: [//msdn.microsoft.com/en-us/library/b6x6shw7 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7(v=vs.71).aspx)

# android - 无法实例化接收器类notfoundexception

> ID：13050285
> 
> 赞同：1
> 
> 时间：2012-10-24T13:29:03.563
> 
> 标签：android, classnotfoundexception, receiver

我是 android 编程的新手，对出现的意外错误有点恼火。

我正在尝试制作一个有两个按钮并从教程开始的小部件。我在路上遇到了一些颠簸，但它的表现相当不错。现在我正在尝试调整小部件的高度和宽度并尝试添加更多组件。但我不断收到此错误：

```
10-24 09:33:40.941: E/AndroidRuntime(280): FATAL EXCEPTION: main
10-24 09:33:40.941: E/AndroidRuntime(280): java.lang.RuntimeException: Unable to instantiate receiver com.example.world.knowledge.agenda.MainActivity: java.lang.ClassNotFoundException: com.example.world.knowledge.agenda.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.world.knowledge.agenda.widget-1.apk]
10-24 09:33:40.941: E/AndroidRuntime(280):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2789)
10-24 09:33:40.941: E/AndroidRuntime(280):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
10-24 09:33:40.941: E/AndroidRuntime(280):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
10-24 09:33:40.941: E/AndroidRuntime(280):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 09:33:40.941: E/AndroidRuntime(280):  at android.os.Looper.loop(Looper.java:123)
10-24 09:33:40.941: E/AndroidRuntime(280):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-24 09:33:40.941: E/AndroidRuntime(280):  at java.lang.reflect.Method.invokeNative(Native Method)
10-24 09:33:40.941: E/AndroidRuntime(280):  at java.lang.reflect.Method.invoke(Method.java:521)
10-24 09:33:40.941: E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-24 09:33:40.941: E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-24 09:33:40.941: E/AndroidRuntime(280):  at dalvik.system.NativeStart.main(Native Method)
10-24 09:33:40.941: E/AndroidRuntime(280): Caused by: java.lang.ClassNotFoundException: com.example.world.knowledge.agenda.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.world.knowledge.agenda.widget-1.apk]
10-24 09:33:40.941: E/AndroidRuntime(280):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
10-24 09:33:40.941: E/AndroidRuntime(280):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
10-24 09:33:40.941: E/AndroidRuntime(280):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
10-24 09:33:40.941: E/AndroidRuntime(280):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2780)
10-24 09:33:40.941: E/AndroidRuntime(280):  ... 10 more 
```

看来我为解决这个问题所做的所有努力都是徒劳的。也许你们中的一个人知道我该如何解决这个问题。（请尝试写下“虚拟证明”，这对我来说都是全新的 :)）

这是我的安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.world.knowledge.agenda.widget"
      android:versionCode="1"
      android:versionName="1.0">
      <uses-sdk android:minSdkVersion="4"/>
    <application android:icon="@drawable/ic_launcher" 
        android:label="@string/app_name"
        android:debuggable="true">

                <!-- this activity will be called, when we fire our self created ACTION_WIDGET_CONFIGURE -->
        <activity android:name="com.example.world.knowledge.agenda.ClickOneActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.example.world.knowledge.agenda.MainActivity.ACTION_WIDGET_CONFIGURE"/>
                <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <!-- Broadcast Receiver that will process AppWidget updates -->
        <receiver android:name=".MainActivity" 
            android:label="@string/app_name" 
            android:exported="false">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <intent-filter>
                <!-- Broadcast Receiver that will also process our self created action -->
                <action android:name="com.example.world.knowledge.agenda.MainActivity.ACTION_WIDGET_RECEIVER"/>
            </intent-filter>
            <meta-data android:name="android.appwidget.provider" android:resource="@xml/button_widget_provider" />
        </receiver>
    </application>
</manifest> 
```

也许解决方案非常简单，但在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:27:16.940

不太确定，但您可以尝试将部分更改 `package="com.example.world.knowledge.agenda.widget"` 为 `package="com.example.world.knowledge.agenda"` 清单文件声明中的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:27:45.033

显然我的模拟器本身已损坏，一直在寻找一个不存在的错误......无论如何，我重新安装了它，它现在工作正常。

# android - TELEPHONY_SERVICE 的机会返回 null

> ID：13050292
> 
> 赞同：2
> 
> 时间：2012-10-24T13:29:15.887
> 
> 标签：android, telephonymanager

有没有机会让 TELEPHONY_SERVICE 为 null ？

```
 TelephonyManager teleman = (TelephonyManager) getBaseContext()
            .getSystemService(Context.TELEPHONY_SERVICE); 
```

我的意思是有没有机会在上面的行中让 teleman 为 null ？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:35:49.863

是的，你可以检查这个：

```
 getPackageManager().hasSystemFeature(PackageManager.FEATURE_TELEPHONY) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T13:42:52.900

是的，它可以。正如[getSystemService()](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)的手册所说：

> **退货**
> 
> 如果名称不存在，则服务或 null。

对于一些基本服务来说，这是不太可能的，但是电话不是其中之一。不要指望它会出现在 GoogleTV 或某种平板电脑上。[您可以使用hasSystemFeature()](http://developer.android.com/reference/android/content/pm/PackageManager.html#hasSystemFeature%28java.lang.String%29)检查某些功能是否可用

# apache - Web 应用程序可以在 Apache Web 服务器上运行吗？

> ID：13050293
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:29:19.473
> 
> 标签：apache, tomcat

我们可以在 Apache 服务器上运行包含 jsp servlet 的 Web 应用程序吗？

还是我们需要与tomcat集成？

我已经研究过，有一些方法可以在 apache 上运行 jsp servlet，但我想知道哪一个表现良好： **1\. 仅在 Apache 上？2\. 将tomcat与apache集成？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:41:24.937

正如@BalusC 提到的，我猜你的意思是“Apache Tomcat”（这是一个 Java 应用程序服务器）和“Apache HTTPD”（这是一个 Web 服务器）。

基本上，您不能将“Apache HTTPD”与 JSP 一起使用，因为它们需要由 JSP 编译器编译。该 JSP 编译器是“Apache Tomcat”（或任何其他 Java 应用程序服务器，如 Jetty）的一部分。

# c# - 如何让 xsd2code 创建 XmlArrayAttribute 和 XmlArrayItemAttribute 而无需创建额外的类

> ID：13050294
> 
> 赞同：1
> 
> 时间：2012-10-24T13:29:24.950
> 
> 标签：c#, xsd, xsd2code

我有一个 xsd，我想以某种方式序列化。我可以通过以下方式实现我想要的，但问题是，xsd2code 生成了一个在任何地方都完全未使用的额外类。我做错了吗？我还缺少另一个技巧吗？

```
<xsd:schema 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
elementFormDefault="qualified" >

    <xsd:element name="UITranslatorConfiguration" >
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="Queries" minOccurs="0" />
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

    <xsd:element name="Queries">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="Query" minOccurs="0" maxOccurs="unbounded"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

    <xsd:element name="Query">
        <xsd:complexType>
            <xsd:simpleContent>
                <xsd:extension base="xsd:string">
                    <xsd:attribute name="QueryID" type="xsd:string" />
                </xsd:extension>
            </xsd:simpleContent>
        </xsd:complexType>
    </xsd:element>

</xsd:schema> 
```

我想要的xml输出：

```
<UITranslatorConfiguration>
    <Queries>
        <Query QueryID="queryID1">someQueryText</Query>
        <Query QueryID="queryiq2">someQueryText2</Query>
        <Query QueryID="queryiq3">someQueryText3</Query>
    </Queries>
<UITranslatorConfiguration> 
```

它生成的代码：

这可以：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("Xsd2Code", "3.4.0.38968")]
[System.SerializableAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class UITranslatorConfiguration {

    [EditorBrowsable(EditorBrowsableState.Never)]
    private List<Query> queriesField;

    private static System.Xml.Serialization.XmlSerializer serializer;

    public UITranslatorConfiguration() {
        this.queriesField = new List<Query>();
    }

    [System.Xml.Serialization.XmlArrayAttribute(Order=0)]
    [System.Xml.Serialization.XmlArrayItemAttribute("Query", IsNullable=false)]
    public List<Query> Queries {
        get {
            return this.queriesField;
        }
        set {
            this.queriesField = value;
        }
    }
} 
```

这可以：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("Xsd2Code", "3.4.0.38968")]
[System.SerializableAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class Query {

    [EditorBrowsable(EditorBrowsableState.Never)]
    private string queryIDField;

    [EditorBrowsable(EditorBrowsableState.Never)]
    private string valueField;

    private static System.Xml.Serialization.XmlSerializer serializer;

    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string QueryID {
        get {
            return this.queryIDField;
        }
        set {
            this.queryIDField = value;
        }
    }

    [System.Xml.Serialization.XmlTextAttribute()]
    public string Value {
        get {
            return this.valueField;
        }
        set {
            this.valueField = value;
        }
    }
} 
```

**这不好。这是从哪里来的，为什么？它根本不在任何地方使用。如何使 xsd2code 不生成此类。**

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("Xsd2Code", "3.4.0.38968")]
[System.SerializableAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class Queries {

    [EditorBrowsable(EditorBrowsableState.Never)]
    private List<Query> queryField;

    private static System.Xml.Serialization.XmlSerializer serializer;

    public Queries() {
        this.queryField = new List<Query>();
    }

    [System.Xml.Serialization.XmlElementAttribute("Query", Order=0)]
    public List<Query> Query {
        get {
            return this.queryField;
        }
        set {
            this.queryField = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:15:30.383

我对生成的代码有类似的“问题”（例如，难看的字段名称等）。我最终创建了漂亮而干净的实体类，并使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)从生成的类中的数据初始化它们。这意味着我不必直接处理生成的类，它还提供了一个[反腐败层](http://www.markhneedham.com/blog/2009/07/07/domain-driven-design-anti-corruption-layer/)。即使生成的类具有世界上最漂亮的代码，这也是我的建议，只是为了保护您的应用程序免受架构中任何意外更改的影响。

但是，我刚刚在我的版本`xsd2code`（3.5.3 直接从源代码构建，带有一些额外的补丁来解决我遇到的各种问题）中对此进行了测试，并确认这种行为仍在发生。我建议您在[xsd2code 站点上](http://xsd2code.codeplex.com/workitem/list/basic)打开一个问题，但不幸的是，似乎并没有太多关注修复它们（我已经提交了几个尚未实施的补丁），所以我不希望任何时候都能修复很快。值得庆幸的是，您已经能够解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T03:45:41.227

您的架构包含显式的“查询”元素。这导致了类的生成。要实现没有“查询”类的代码集，只需将查询元素的类型指定为 type="Query"。

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="XMLSchema1"
    targetNamespace="http://tempuri.org/XMLSchema1.xsd"
    elementFormDefault="qualified"
    xmlns="http://tempuri.org/XMLSchema1.xsd"
    xmlns:mstns="http://tempuri.org/XMLSchema1.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
>

  <xs:element name="UITranslatorConfiguration">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Queries" type="Query" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:complexType name="Query">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="QueryID" type="xs:string"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

</xs:schema> 
```

这将产生所需的结果，如图所示

```
namespace Schemas1
{
    using System;
    using System.Diagnostics;
    using System.Xml.Serialization;
    using System.Collections;
    using System.Xml.Schema;
    using System.ComponentModel;
    using System.Collections.Generic;

    public partial class UITranslatorConfiguration
    {

        private List<Query> queriesField;

        public UITranslatorConfiguration()
        {
            this.queriesField = new List<Query>();
        }

        public List<Query> Queries
        {
            get
            {
                return this.queriesField;
            }
            set
            {
                this.queriesField = value;
            }
        }
    }

    public partial class Query
    {

        private string queryIDField;

        private string valueField;

        public string QueryID
        {
            get
            {
                return this.queryIDField;
            }
            set
            {
                this.queryIDField = value;
            }
        }

        [System.Xml.Serialization.XmlTextAttribute()]
        public string Value
        {
            get
            {
                return this.valueField;
            }
            set
            {
                this.valueField = value;
            }
        }
    }
} 
```

根据我将 xsd 文件转换为自动生成的类（无论工具如何）的经验，我发现最好尽可能避免使用“ref”，而在这些情况下直接使用该类型。

希望这可以帮助。

# insert - 将空整数插入 Google bigquery

> ID：13050296
> 
> 赞同：3
> 
> 时间：2012-10-24T13:29:34.780
> 
> 标签：insert, google-bigquery

我正在尝试将记录导入从 mysql 导出的 bigquery 表。

数据以 csv 格式导出，但必须用制表符 '\t' 分隔，因为某些字段将 json 文件存储为字符串，因此普通分隔符不起作用。

在 mysql 中，某些字段 ( `integer`, `float`)`null`在导出时显示为 \N。

例如：

> 123 456 '2.2.0.159' '星期一' '伦敦' 'GB' \N 1026 0

我正在尝试将 \N 替换为`null`（也尝试过`NULL`, `Null`，它们都不起作用）并上传到大查询，但我收到以下错误：

> 行：1 / 字段：7，值无法转换为预期类型

bigquery 中允许我将值导入为 null 的语法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:20:55.270

尝试一个空字段 - 例如对于 csv，只需`,,`. 或对于 tsv `\t\t`，. 如果这是 MySql 使用的语法，我们可能应该添加对 \N 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T11:14:11.540

我可以看到这还没有处理，因为 NULL 或 \N 被捕获为错误，但 GBQ 导入器。

# ruby-on-rails - 太阳黑子可搜索中 ignore_attribute_changes_of 的逆

> ID：13050298
> 
> 赞同：2
> 
> 时间：2012-10-24T13:29:36.027
> 
> 标签：ruby-on-rails, ruby, solr, sunspot

在 Sunspot Solr 中，我有一个模型`Contact`，我在 Solr 中建立索引。该`Contact`模型有很多属性，但我对其中两个进行了索引，`:name`并且`:email`. 为了防止每次`Contact`我们联系 Solr 中的字段发生更改时，我都会`:ignore_attribute_changes_of`在可搜索项上使用。

实际上，我只是想在更改`:name`or时更新我的​​索引`:email`。我这样做：

```
fields = (Contact.attribute_names - ["name", "email"]).map{|o| o.to_sym}

searchable :ignore_attribute_changes_of => fields do
  text :name
  text :email
end 
```

这对我来说似乎是错误的方式。有没有办法告诉 Sunspot searchable*只*更新某些属性的变化？也就是说，是否存在`ignore_attribute_changes_of`这种方式的反面或者是否有原因？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-15T17:30:55.973

我想，您可以禁用模型中的自动索引并以这种方式将索引操作移动到控制器

# 在模型中

```
searchable :auto_index => false do
  text :name
  text :email
end 
```

# 在控制器中

```
def update
  ...
  if @contact.name_changed?||@contact.email_changed?
    Sunspot.index(@contact)
  end
end 
```

# mfc - 通过使用添加方法向导添加新方法来更改 Odl 文件

> ID：13050299
> 
> 赞同：3
> 
> 时间：2012-10-24T13:29:37.350
> 
> 标签：mfc, activex

这是我的问题：

1- 我有一个 activeX 项目，我需要在其中添加一个方法以向我的库的用户公开。
2- 我添加了我的方法，在 .odl 文件中添加方法向导。
3- 我按要求编译了 odl 文件。
4-我编译了activeX项目。
5-我取消注册然后在我的机器上注册了activeX。--> 我的新方法没有出现在公开方法列表中。

我搜索了一下，发现我所做的是向odl文件添加方法的正确方法。我没有找到解决我的问题的方法，请帮助。

PS：我对一个有 IDL 文件的 activeX 做了同样的事情，它可以工作。两种类型（idl vs odl）有什么区别？

# java - 当 Package Explorer 固定打开时，Eclipse 需要很长时间才能在恢复时重绘自身

> ID：13050300
> 
> 赞同：1
> 
> 时间：2012-10-24T13:29:38.303
> 
> 标签：java, eclipse, performance, windows-7, scala-ide

我没有想法，所以我向 StackOverflow 提出了这个问题。我最近开始了一个 scala 项目。我在 Windows 7 上安装了 Eclipse 3.7.2 并下载了[Scala IDE](http://scala-ide.org/) 2.0.2 的最新稳定版本。我遇到的问题是，当包资源管理器窗格在我的工作区中固定打开并且我将上下文从 Eclipse 切换到 Eclipse 时，Eclipse 需要很长时间才能重绘自身。完全重绘可能需要 2 到 10 秒。我知道它与包资源管理器有关，因为当它没有打开时我根本没有遇到这个问题。我不确定它与 Scala IDE 是否特别相关，但我最近使用 Eclipse 的只是 Scala 项目，到目前为止我都遇到过这个问题。

到目前为止，我已经尝试优化我的 JVM 设置，如[下面的帖子](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse)所述。我也尝试过恢复到 Java 6 JVM。

我愿意接受有关如何进一步解决此问题的新建议或建议。

编辑：

从那以后，我发现有许多类似于包资源管理器的视图，它们允许您通过项目的目录或包结构导航项目。有包资源管理器、项目资源管理器和导航视图。现在我正在使用导航视图，我不再遇到原始帖子中提到的任何性能问题。但是，问题仍然存在：为什么使用包资源管理器会对 Eclipse 性能产生如此不利的影响。

编辑2：从头开始，即使在使用其他“项目导航”类型的视图时我仍然有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:30:12.483

I know this doesn't properly explain what the problem was (at least not one that I can think of), but it is a solution of sorts. I was using the Windows 7 classic theme (think Windows Server 2003 or XP). When I switched back to the default Windows 7 theme my performance problems in eclipse disappeared. An interesting note I failed to mention earlier is that I was having similar redrawing performance problems with Gimp, also a java application, and those have stopped happening as well.

I won't mark this as an answer because I don't feel it genuinely addressed the root cause of the problem. If anyone can tell me why this solved my problem or offer an alternative solution that doesn't involve switching themes please feel free to create an additional answer.

# javascript - 使用 Ajax 请求下载文件 Extjs4

> ID：13050311
> 
> 赞同：1
> 
> 时间：2012-10-24T13:30:05.230
> 
> 标签：javascript, extjs4, download

我有这个问题。在综合中，我有一个下载按钮，单击该按钮时，会执行如下 Ajax 请求：

```
Ext.Ajax.request({
url: 'DownloadServlet',
method: 'GET',      
}); 
```

此请求由读取默认文件的 servlet 处理。文件读取成功，其实在firebug中，GET的状态是“200”。

问题是前端（extjs）似乎无法下载文件。我希望浏览器显示经典的更多窗口来下载文件。

会是什么呢？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:05:03.153

尝试这个

```
downloadWhatever : function() {
    Ext.core.DomHelper.append(document.body, {
            tag : 'iframe',
            id : 'downloadIframe',
            frameBorder : 0,
            width : 0,
            height : 0,
            css : 'display:none;visibility:hidden;height:0px;',
            src : '/your/restful/url/'
        });
    }, 
```

服务器端弹簧（以防您想知道）

```
@RequestMapping(value = "/url", method = RequestMethod.GET)
public void download(HttpServletRequest request,
        HttpServletResponse response) throws ServletRequestBindingException, IOException {
    String tempFile = .. get your file
    File file = new File(tempFile);
            // in case you have zipped it ...
            // else set the correct ContentType
    response.setContentType("application/zip");
    response.setContentLength((int) file.length());
    response.setHeader("fileName", file.getName());
    response.setHeader("Content-Disposition", "attachment; filename="+ file.getName());

    InputStream in = new FileInputStream(file);
    OutputStream out = response.getOutputStream();
    byte[] buffer = new byte[1024];
    int read = 0;
    while ((read = in.read(buffer, 0, buffer.length)) != -1) {
        out.write(buffer, 0, read);
    }

    in.close();
    out.flush();
    out.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:45:04.300

您不能使用 AJAX 调用下载文件。基本上有两种解决方案：困难和简单。

简单：只需使用 window.popup 或 document.location.href 重定向到存储文件的 url，您将获得正常的浏览器下载方法。只要确保您发送的是浏览器不会呈现的 mimetype，例如**application/octet-stream**

难：您可以通过 AJAX 调用获取二进制或 base64 编码的文件内容，并使用 base64 编码的 href 创建下载链接。在 Chrome 中，它看起来像这样：

```
<a href="base64,mime-type,...encoded trash..." download="download"> 
```

有一些适用于其他浏览器的解决方案，但目前它只在 Chrome 中运行良好。对于其他浏览器，我正在使用这样的代码：

```
var showSave;

// Feature test: Does this browser support the download attribute on anchor tags? (currently only Chrome)
var DownloadAttributeSupport = 'download' in document.createElement('a');

// Use any available BlobBuilder/URL implementation:
var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;
var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;

// IE 10 has a handy navigator.msSaveBlob method. Maybe other browsers will emulate that interface?
// See: http://msdn.microsoft.com/en-us/library/windows/apps/hh441122.aspx
navigator.saveBlob = navigator.saveBlob || navigator.msSaveBlob || navigator.mozSaveBlob || navigator.webkitSaveBlob;

// Anyway, HMTL5 defines a very similar but more powerful window.saveAs function:
// http://www.w3.org/TR/file-writer-api/#the-filesaver-interface
window.saveAs = window.saveAs || window.webkitSaveAs || window.mozSaveAs || window.msSaveAs;
// However, this is not supported by any browser yet. But there is a compatibility library that
// adds this function to browsers that support Blobs (except Internet Exlorer):
// http://eligrey.com/blog/post/saving-generated-files-on-the-client-side
// https://github.com/eligrey/FileSaver.js

// mime types that (potentially) don't trigger a download when opened in a browser:
var BrowserSupportedMimeTypes = {
    "image/jpeg": true,
    "image/png": true,
    "image/gif": true,
    "image/svg+xml": true,
    "image/bmp": true,
    "image/x-windows-bmp": true,
    "image/webp": true,
    "audio/wav": true,
    "audio/mpeg": true,
    "audio/webm": true,
    "audio/ogg": true,
    "video/mpeg": true,
    "video/webm": true,
    "video/ogg": true,
    "text/plain": true,
    "text/html": true,
    "text/xml": true,
    "application/xhtml+xml": true,
    "application/json": true
};

// Blobs and saveAs (or saveBlob)   :
if (BlobBuilder && (window.saveAs || navigator.saveBlob)) {
    // Currently only IE 10 supports this, but I hope other browsers will also implement the saveAs/saveBlob method eventually.
    showSave = function (data, name, mimeType) {
        var builder = new BlobBuilder();
        builder.append(data);
        var blob = builder.getBlob(mimetype||"application/octet-stream");
        if (!name) name = "Download.bin";
        // I don't assign saveAs to navigator.saveBlob (or the other way around)
        // because I cannot know at this point whether future implementations
        // require these methods to be called with 'this' assigned to window (or
        // naviagator) in order to work. E.g. console.log won't work when not called
        // with this === console.
        if (window.saveAs) {
            window.saveAs(blob, name);
        }
        else {
            navigator.saveBlob(blob, name);
        }
    };
}
else if (window.Blob && URL && window.atob) {
    // atob to base64_decode the data-URI
    showSave = function (data, name, mimetype) {
        var image_data = atob(data);
        // Use typed arrays to convert the binary data to a Blob
        var arraybuffer = new ArrayBuffer(image_data.length);
        var view = new Uint8Array(arraybuffer);
        for (var i=0; i<image_data.length; i++) {
            view[i] = image_data.charCodeAt(i) & 0xff;
        }
        var blob = new Blob([arraybuffer], {type: 'application/octet-stream'});

        // Use the URL object to create a temporary URL
        var url = URL.createObjectURL(blob);
        //window.open(url, '_blank', '');
        document.location.href = url
    }
}
// Blobs and object URLs:
else if (BlobBuilder && URL) {
    // Currently WebKit and Gecko support BlobBuilder and object URLs.
    showSave = function (data, name, mimetype) {
        var blob, url, builder = new BlobBuilder();
        builder.append(data);
        if (!mimetype) mimetype = "application/octet-stream";
        if (DownloadAttributeSupport) {
            blob = builder.getBlob(mimetype);
            url = URL.createObjectURL(blob);
            // Currently only Chrome (since 14-dot-something) supports the download attribute for anchor elements.
            var link = document.createElement("a");
            link.setAttribute("href",url);
            link.setAttribute("download",name||"Download.bin");
            // Now I need to simulate a click on the link.
            // IE 10 has the better msSaveBlob method and older IE versions do not support the BlobBuilder interface
            // and object URLs, so we don't need the MS way to build an event object here.
            var event = document.createEvent('MouseEvents');
            event.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
            link.dispatchEvent(event);
        }
        else {
            // In other browsers I open a new window with the object URL.
            // In order to trigger a download I have to use the generic binary data mime type
            // "application/octet-stream" for mime types that browsers would display otherwise.
            // Of course the browser won't show a nice file name here.
            if (BrowserSupportedMimeTypes[mimetype.split(";")[0]] === true) {
                mimetype = "application/octet-stream";
            }

            blob = builder.getBlob(mimetype);
            url = URL.createObjectURL(blob);
            //window.open(url, '_blank', '');
            document.location.href = url
        }
        // The timeout is probably not necessary, but just in case that some browser handle the click/window.open
        // asynchronously I don't revoke the object URL immediately.
        setTimeout(function () {
            URL.revokeObjectURL(url);
        }, 250);

        // Using the filesystem API (http://www.w3.org/TR/file-system-api/) you could do something very similar.
        // However, I think this is only supported by Chrome right now and it is much more complicated than this
        // solution. And chrome supports the download attribute anyway.
    };
}
// data:-URLs:
else if (!/\bMSIE\b/.test(navigator.userAgent)) {
    // IE does not support URLs longer than 2048 characters (actually bytes), so it is useless for data:-URLs.
    // Also it seems not to support window.open in combination with data:-URLs at all.
    showSave = function (data, name, mimetype) {
        if (!mimetype) mimetype = "application/octet-stream";
        // Again I need to filter the mime type so a download is forced.
        if (BrowserSupportedMimeTypes[mimetype.split(";")[0]] === true) {
            mimetype = "application/octet-stream";
        }
        // Note that encodeURIComponent produces UTF-8 encoded text. The mime type should contain
        // the charset=UTF-8 parameter. In case you don't want the data to be encoded as UTF-8
        // you could use escape(data) instead.
        window.open("data:"+mimetype+";base64,"+data, '_blank', '');
    };
}
// Internet Explorer before version 10 does not support any of the methods above.
// If it is text data you could show it in an textarea and tell the user to copy it into a text file. 
```

更新：如果您可以使用 Flash，这里是非 Chrome 浏览器的后备解决方案： [https ://github.com/dcneiner/Downloadify](https://github.com/dcneiner/Downloadify)

# c# - 无法读取 GridView 中的复选框

> ID：13050314
> 
> 赞同：0
> 
> 时间：2012-10-24T13:30:12.260
> 
> 标签：c#, gridview, checkbox

在我[之前的帖子](https://stackoverflow.com/questions/13046385/a-javascript-doesnt-work-to-check-all-checkboxes-with-one-in-a-gridview-row#comment17715542_13046385) 中，我使用 javascript 来检查一些工作正常的复选框。但是我有一个按钮，可以将一些记录放入数据库。使用以下代码，复选框是否被选中并不重要，它总是给我错误。

```
 bool first = true;
        bool _IsPhone = false;
        bool _IsLotus = false;
        bool _IsRelationship = false;
        bool _IsAdmin = false;
        string _Country;

        foreach (GridViewRow row in CountryAccessGrid.Rows)
        {
            CheckBox ch = ((CheckBox)row.FindControl("chkPhones"));

            _Country = ((Label)row.FindControl("lblCountryShort")).Text;
            _IsPhone = ((CheckBox)row.FindControl("chkPhones")).Checked;
            _IsLotus = ((CheckBox)row.FindControl("chkLotus")).Checked;
            _IsRelationship = ((CheckBox)row.FindControl("chkRelationship")).Checked;
            _IsAdmin = ((CheckBox)row.FindControl("chkIsAdmin")).Checked;

            if (_IsPhone == true || _IsLotus == true || _IsRelationship == true || _IsRelationship == true || _IsAdmin == true)
            {
                cntr = cntr + 1;

                if (!first)
                {
                    insertaccess += " UNION ALL ";
                }
                insertaccess += " SELECT " + _UserID + ", '" + _Country + "', " + _IsPhone + ", " + _IsLotus + ", " + _IsRelationship + ", " + _IsAdmin;

                first = false;
            }
        } 
```

请问如何获得复选框的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:37:44.907

为了能够回答这个问题，我们必须知道以下内容：

*   这段代码从哪里来
*   是什么`DataSource`
*   你在哪里/什么`DataBind`时候去`GridView`？

但是我认为即使是回发，您也始终`DataBind`会使用它。`Page_Load`这将覆盖这些值并防止触发事件。

所以你必须使用该[`IsPostBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)属性：

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        DataBindGridView();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:38:33.493

我建议你使用`RowDataBound event`

```
void GridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
         var ch = (CheckBox)row.FindControl("chkPhones");
    }
  }

<asp:gridview id="GridView"  onrowdatabound="GridView_RowDataBound" runat="server">
      </asp:gridview> 
```

# xml - 用逗号连接两个节点值

> ID：13050318
> 
> 赞同：4
> 
> 时间：2012-10-24T13:30:19.890
> 
> 标签：xml, xslt

我需要转换 XML 并且遇到了一些问题......

**当前的 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
 <Employees>
  <Employee>
   <ManagerFirstName>Joe</ManagerFirstName>
   <ManagerLastName>Schmoe</ManagerLastName>
  </Employee>
 </Employees> 
```

**期望的输出：**

```
<?xml version="1.0" encoding="utf-8"?>
 <Employees>
  <Employee>
   <supervisorName>Schmoe, Joe</supervisorName>
  </Employee>
 </Employees> 
```

**当前 XSL：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" >
  <xsl:template match="/">
    <xsl:apply-templates select="*"/>
  </xsl:template>
  <xsl:template match="node()">
    <xsl:copy><xsl:apply-templates select="node()"/></xsl:copy>
  </xsl:template>
  <xsl:template match="ManagerFirstName">
        <supervisorName>
        <xsl:apply-templates select="node()"/>
        <xsl:value-of  select="/ManagerLastName"/>
        <xsl:text>, </xsl:text>
        <xsl:value-of select="/ManagerFirstName"/>
        </supervisorName>
  </xsl:template>
</xsl:stylesheet> 
```

这不起作用，我无法弄清楚。它现在输出的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
 <Employees>
  <Employee>
   <supervisorName>Joe, </supervisorName>
   <ManagerLastName>Schmoe/ManagerLastName>
  </Employee>
 </Employees> 
```

我觉得我离我很近...

**更新** 我将如何确保如果 ManagerFirstName 和 ManagerLastName 为空白，supervisorName 里面没有逗号？

**更新 2**

```
<?xml version="1.0" encoding="UTF-8" ?>
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
<xsl:output indent="yes"/> <xsl:strip-space elements="*"/>
 <xsl:template match="/">
   <xsl:apply-templates select="*"/>
 </xsl:template>
 <xsl:template match="@*|node()">
   <xsl:copy>
     <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
 </xsl:template>
 <xsl:template match="Employee">
   <tbl_EmployeeList><xsl:apply-templates select="@*|node()"/></tbl_EmployeeList>
 </xsl:template>
 <xsl:template match="tbl_EmployeeList">
   <xsl:copy>
     <xsl:apply-templates select="@*|node()"/>
       <supervisorName>
         <xsl:value-of select="(ManagerLastName,ManagerFirstName)" separator=", "/>
       </supervisorName>
   </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:06:07.190

由于您使用的是 XSLT 2.0，因此您可以`separator`在`xsl:value-of`...

**XML 输入**

```
<Employees>
    <Employee>
        <ManagerFirstName>Joe</ManagerFirstName>
        <ManagerLastName>Schmoe</ManagerLastName>
    </Employee>
</Employees> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Employee">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <supervisorName>
                <xsl:value-of select="(ManagerLastName,ManagerFirstName)" separator=", "/>
            </supervisorName>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<Employees>
   <Employee>
      <supervisorName>Schmoe, Joe</supervisorName>
   </Employee>
</Employees> 
```

注意：如果没有`ManagerLastName`or `ManagerFirstName`，则不会输出分隔符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T13:37:31.813

您可以通过以下方式执行此操作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="Employee">
        <Employee>
            <supervisorName><xsl:value-of select="concat(ManagerLastName, ', ', ManagerFirstName)"/></supervisorName>
        </Employee>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T13:39:23.643

你很亲密。在`ManagerFirstName`模板中，您需要一个稍微不同的 XPath 来提取姓氏：

```
<xsl:template match="ManagerFirstName">
    <supervisorName>
        <xsl:value-of select="../ManagerLastName"/>
        <xsl:text>, </xsl:text>
        <xsl:apply-templates select="node()"/>
    </supervisorName>
</xsl:template> 
```

（`apply-templates`足以为您提供 的值`ManagerFirstName`，您不需要特定`value-of`的值）。然后，您需要一个无操作模板来阻止它独立复制姓氏

```
<xsl:template match="ManagerLastName" /> 
```

另请注意，通常的身份模板将匹配和应用模板，`@*|node()`而不仅仅是`node()`- 它在您的示例文档中没有任何区别，因为您没有使用任何属性，但如果您的原始 XML 具有属性，那么您的身份模板版本将放下它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T14:27:00.620

**这是一个完全“推式”的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Employee">
  <supervisorName><xsl:apply-templates/></supervisorName>
 </xsl:template>

 <xsl:template match="Employee/*">
  <xsl:value-of select="concat(', ', .)"/>
 </xsl:template>
 <xsl:template match="Employee/*[1]"><xsl:apply-templates/></xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T15:39:52.907

所有的反应似乎都不错，但我认为这种方法更干净（只需用这个替换你的 ManagerFirstName 模板）：

```
<xsl:template match="Employee">
    <supervisorName>
        <xsl:value-of select="concat(ManagerLastName,', ',ManagerFirstName)"/>
    </supervisorName>
</xsl:template> 
```

**更新：**

如果您想让逗号仅在两个节点都存在且不为空时出现，您可以使用带有字符串长度的 if ：

```
<xsl:template match="Employee">
    <supervisorName>
        <xsl:value-of select="ManagerLastName"/>
        <xsl:if test="string-length(ManagerLastName) and string-length(ManagerFirstName)">
            <xsl:text> ,</xsl:text>
        </xsl:if>
        <xsl:value-of select="ManagerFirstName"/>
    </supervisorName>
</xsl:template> 
```

**更新 2：** 遵循 xslt 2.0 方法的更清洁的解决方案，但也涵盖了空节点的情况。

```
<xsl:template match="Employee">
    <supervisorName>
        <xsl:value-of select="(ManagerLastName[text()],ManagerFirstName[text()])" separator=", "/>
    </supervisorName>
</xsl:template> 
```

# algorithm - nodejs中开放图的抓取算法

> ID：13050320
> 
> 赞同：2
> 
> 时间：2012-10-24T13:30:27.683
> 
> 标签：algorithm, node.js, logic, metadata, facebook-opengraph

我正在尝试使用以下代码从使用 nodejs （带有cheerio）的 URL 获取打开的图形元数据。

我有这个东西要填写： `var result={};`

```
 for (var ogCounter = 0; ogCounter < metalist.length; ogCounter++) {
    if (!utils.isEmpty(metalist[ogCounter].attribs.property) && !utils.isEmpty(metalist[ogCounter].attribs.content)) {
        if (metalist[ogCounter].attribs.property.indexOf('og') == 0) {
            var ogname = metalist[ogCounter].attribs.property.split(':');
            var property = ogname[1];
            var content = metalist[ogCounter].attribs.content;

            if (utils.isEmpty(result[property])) {
                result[property] = content;
            } else {
                if (result[property].push) {
                    result[property].push(content);
                } else {
                   result[property] = [result[property], content];
                }
            }

        }
    }
} 
```

填充结果后，我在 JSon 中进行了转换，并使用此代码得到如下信息：

```
type: "video",
image: "http://i3.ytimg.com/vi/fWNaR-rxAic/mqdefault.jpg",
video: [
"http://www.youtube.com/v/fWNaR-rxAic?version=3&amp;autohide=1",
"application/x-shockwave-flash",
"1920",
"1080"
] 
```

但我想要的东西是这样的：

```
type: "video",
image: "http://i3.ytimg.com/vi/fWNaR-rxAic/mqdefault.jpg",
video: {
"http://www.youtube.com/v/fWNaR-rxAic?version=3&amp;autohide=1",
{ 
type:"application/x-shockwave-flash",
width:"1920",
height:"1080"
}
} 
```

我正在尝试这个“如果”，但它不起作用：

```
 if (utils.isEmpty(result[property])) {
                    result[property] = content;
                } else {
                    if (result[property].push) {
                        result[property].push(content);
                    } else {
                        var subresult={};
                        subresult[name[2]]=content;
                        subresult[property]=result[property] ;

                        result[property] = subresult;
                    }
                } 
```

我不想循环所有元 2 次，而且我不擅长 javascript 和 nodejs 功能......有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:00:24.907

这是我的答案。@phwd 完全回答了这个问题，但我认为最好制定一个更通用的解决方案，将所有`meta`标签解析为`n`级别。

```
var cheerio = require('cheerio'),
  request = require('request'),
  url = 'http://philippeharewood.com/facebook/video.html',
  result = {},
  attr = function( tag, prop ){ return tag.attribs && tag.attribs[prop] || ""; }

request( url, function( err, res, body ) {

  var metas = cheerio.load(body)('meta')
  var keys = Object.keys(metas)

  keys.forEach(function(i){
    var meta = metas[i],
      property = attr(meta,'property'),
      parts = property.split(":");

    if ( property ) {
      var og = property.split(':'),
        parent = result;

      for ( var j = 0; j < og.length; j++ ){
        var token = og[j],
          current = parent[token],
          name;

        if ( j+1 == og.length ) { // leaf node

          // expected leaf is already a branch so append a name attr
          if ( current instanceof Object ) name = token;
          // leaf should take the value given
          else parent[token] = attr(meta,'content');

        } else { // branch node

          // if no such branch exists, make one
          if ( !(current instanceof Object) ) {
            // if the branch is already a leaf, move value to name attr
            if ( typeof current == "string" ) name = current;
            current = {};
            parent[token] = current;  
          }
        }
        if ( name ) current["name"] = name;
        name = undefined
        parent = current;
      }
    }
  });

  console.log(JSON.stringify( result.og, undefined, 2));

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:52:57.817

这很棘手，因为您希望如何显示`og:video`. 我不认为你可以那样做。例如，最简单的方法是为其分配一个标识符`name`并将其与`og:video:width`

示例结果

```
{
  "type": "video.other",
  "url": "http://philippeharewood.com/facebook/video.html",
  "title": "Simple Plan",
  "video": {
    "name": "http://www.youtube.com/v/Y4MnpzG5Sqc?version=3&amp;autohide=1",
    "type": "application/x-shockwave-flash",
    "width": "398",
    "height": "224",
    "release_date": "2012-05-29T21:30"
  }
} 
```

怎么可能做到，

```
var cheerio = require('cheerio')
var request = require('request')

var url = 'http://philippeharewood.com/facebook/video.html';
var result = {};

request(url, function(error, response, body) {
  var $ = cheerio.load(body);

  var meta = $('meta')
  var keys = Object.keys(meta)

  keys.forEach(function(key){
    if ( meta[key].attribs 
         && meta[key].attribs.property 
         && meta[key].attribs.property.indexOf('og') == 0
       ) 
    {
      var og = meta[key].attribs.property.split(':');

      if(og.length > 2) {
        if(result[og[1]]) {
          if (typeof result[og[1]] == 'string' 
             || result[og[1]] instanceof String
             ) 
          {
            var set = {};
            set['name'] = result[og[1]];
            set[og[2]] = meta[key].attribs.content;
            result[og[1]] = set;
          }
          else {
            ex_set = result[og[1]];
            ex_set[og[2]] = meta[key].attribs.content;
            result[og[1]] = ex_set;
          }
        }
        else {
          var set = {};
          set[og[2]] = meta[key].attribs.content;
          result[og[1]] = set;
        }
      }
      else {
        result[og[1]] = meta[key].attribs.content;
      }
    }
  });

  console.log(JSON.stringify(result, undefined, 2));

}); 
```

# resources - unity：获取资源路径

> ID：13050324
> 
> 赞同：2
> 
> 时间：2012-10-24T13:30:39.607
> 
> 标签：resources, path, unity3d

我在 Unity3D 工作。

我使用 Resources.LoadAll(path); 加载文件夹和子文件夹中的所有项目。完成此操作后，我想获取对象的子文件夹名称或完整路径。这可能吗？

并且不建议使用 AssetDatabase，因为它是一个编辑器类，我在构建中需要它。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T18:26:06.013

如果我需要在运行时在 Resources 文件夹中查找文件/子文件夹，我所做的是在我加载到游戏中的编辑器中写出一个“Resources/manifest.txt”文件。可以在编辑器中自动创建此 manifest.txt，以便它始终是最新的。

然后在运行时而不是 Resources.LoadAll，我加载 manifest.txt，在其中查找文件夹/资产并使用 Resources.Load 它。

# r - 如何在行中搜索相等的变量（以智能方式）并将相应的行存储为子集？

> ID：13050330
> 
> 赞同：7
> 
> 时间：2012-10-24T13:31:04.043
> 
> 标签：r

我有一个巨大的数据框。一列是从 1 到 2 的整数。我需要一种方法来查找在该列中具有多个特定值的连续行，对这些行进行子集化，然后将它们处理成图表。

我附上了一个小例子，它至少完成了一些所需的工作：我能够打印出我正在寻找的子集。但还有两个问题：

*   我想 R 中有更聪明的方法，然后在整个 data.frame 上应用“for”循环。有什么提示吗？
*   我必须将哪个命令放在现在“打印”命令用于存储临时 data.frame 的位置？我想我需要一个列表，因为子集的长度不同......

我已经查看了聚合或 ddply，但无法提出解决方案。

非常感谢任何帮助。

```
test<-c(rep(1,3),rep(2,5),rep(1,3),rep(2,3),rep(1,3),rep(2,8),rep(1,3)) 
letters<-c("a","b","c","d")
a1<-as.data.frame(cbind(test,letters))

BZ<-2   #The variable to look for
n_BZ=4  #The number of minimum appearences

k<-1  # A variable to be used as a list item index in which the subset will be stored

for (i in 2:nrow(a1)){
  if (a1$test[i-1]!=BZ & a1$test[i]==BZ)      # When "test" BECOMES "2"
    {t_temp<-a1[i,]}                            #... start writing a temporary array
  else if (a1$test[i-1]==BZ & a1$test[i]==BZ) # When "test" REMAINS "2"
    {t_temp<-rbind(t_temp,a1[i,])}              #... continue writing a temporary array 
  else if (a1$test[i-1]==BZ & a1$test[i]!=BZ) # When "test" ENDS BEING "2"
    {if (nrow(t_temp)>n_BZ)                     #... check if the temporary array has more rows then demanded
      {print(t_temp)                              #... print the array (desired: put the array to a list item k)
       k<-k+1}}                                   #... increase k
    else                                      # If array too small
    {t_temp<-NULL}                              # reset
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:51:57.413

该`rle`功能对于这样的东西非常方便。它接受一个原子向量并返回一个`list`带有元素的`lengths`和`values`，其中`lengths`包含 中每个值的运行长度`values`。

由于`cbind`在您的示例中调用 to 将`test`列强制转换为`factor`，因此我首先将其转换为`numeric`：

```
a1 <- within(a1, test <- as.numeric(as.character(test))) 
```

然后可以在一个很好的（基本上）单行中获得结果：

```
with(rle(a1$test),
    split(a1, rep(seq_along(lengths), lengths))[values == BZ & lengths >= n_BZ]
) 
```

# php - PHP 流/文件上传和 max_input_vars

> ID：13050331
> 
> 赞同：7
> 
> 时间：2012-10-24T13:31:07.680
> 
> 标签：php, upload, stream

当我执行从 Java 到 PHP 的流上传时，有时会收到一个 PHP 错误，提示输入变量超出`max_input_vars`.

起初，我不明白为什么。我先解释一下：

正在使用类似于以下的方法上传文件：

```
// get file data from input stream
$putdata = fopen("php://input", "r");
$tmp = tmpfile();
filesize = stream_copy_to_stream ($putdata, $tmp);
fclose ($putdata);

// copy temp stream into destination stream
$target = fopen('myfile.dwg', "w");        
fseek($tmp, 0, SEEK_SET);
stream_copy_to_stream($tmp, $target);
fclose($target);
fclose ($tmp); 
```

为了了解为什么 PHP 会给我这样的警告，我转储了正在发送的数据：

```
file_put_contents ('input_vars.log', print_r ($_REQUEST, true));
file_put_contents ('php_input.log', file_get_contents ('php://input')); 
```

这是有趣的部分：正在上传的文件是 1.8 兆字节。生成的日志是：

*   `input_vars.log`=> 5 兆字节，90,000 行
*   `php_input.log` => 20 兆字节，283,000 行

现在错误消息突然看起来是合法的。仅包含字节码，`php_input.log`但`input_vars.log`格式如下：

```
Array
(
    [filename] => 0018-101-001_67.dwg
    [versionId] => 11253
    [filetype] => dwg
    [‘á‹Úê-8øFj–sÙ/ghÔ÷JJÐWhvPV] => ...
    ....
) 
```

前三个密钥是通过 GET 发送的，其余的都是文件数据。如果我搜索并计算 的匹配项`=>`，我会得到 25,954 个匹配项。然后我假设它`REQUEST`拥有 26,000 个密钥。

现在，回到我的问题：我已经`max_input_vars`多次提高了价值，现在它的价值为`30000`. 我是否应该忽略此安全设置，并将其设置为尽可能高？我担心的是 PHP 会从 REQUEST 数组中删除大于 的部分`30000`，从而导致文件损坏。

将此值设置得太高是否存在任何安全问题？是否有更好的方法将文件上传到 PHP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:45:27.157

也许尝试将**enable_post_data_reading**指令设置为“false”（或“Off”）以防止 PHP 解析文件正文？

顺便说一句，如果您使用的是 PHP 5.3.9，您应该修补 max_input_vars[漏洞](http://thexploit.com/sec/critical-php-remote-vulnerability-introduced-in-fix-for-php-hashtable-collision-dos/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:12:01.757

您想要做的是[PUT upload](http://php.net/manual/en/features.file-upload.put-method.php)，您不应该将其作为 POST 处理；或 - 至少 - 将`Content-Type`HTTP 标头设置为`application/octet-stream`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:30:18.920

就其本身“php.net”（[PHP.NET - max_input_vars](http://www.php.net/manual/en/info.configuration.php#ini.max-input-vars)）而言，他们报告说您增加此设置的值没有问题，但是，这是“使用此指令减轻拒绝服务的可能性的一种形式使用哈希冲突的攻击。”。

为了解决这个僵局，你可以尝试在运行时设置变量值，使用下面的函数：

```
ini_set("max_input_vars", 30000); 
```

我最近遇到了这个问题，以及调用是如何远程的，而不是配置运行时，所以不幸的是我们不得不增加这个值。

到目前为止，我们没有问题，但想法是未来，修改代码以按部分发送数据，从而使代码保持在语言的标准当前配置内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T14:25:50.300

您没有展示如何用 Java 上传文件。PHP 将普通的 POST 请求视为来自表单并尝试从中解析字段 - 如果数据是二进制数据，这是个坏主意。您最好模拟 HTML 文件上传表单的功能并发送“多部分帖子”（[示例](https://stackoverflow.com/questions/5071568/multi-part-post-with-file-and-string-in-httpclient-4-1)）。然后使用[PHP 的标准文件上传处理功能](http://php.net/manual/en/features.file-upload.php)，就像从表单接收一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-08T03:21:53.967

接受的答案是有效的，但您必须意识到关闭也`enable_post_data_reading`意味着关闭自动填充`$_POST`和数组。由于我广泛使用这些数组，我决定限制为专用于文件上传的特定文件：`$_GET``$_REQUEST``enable_post_data_reading`

```
<Files "UploadFile.php">
    php_value enable_post_data_reading Off
</Files> 
```

因为我使用 ajax 请求上传，所以可以这样设置用户定义的标头：

```
oXhr.setRequestHeader("X-File-Name", I_sFileName);
oXhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
```

通过这样做，您绕过了使用`$_REQUEST`or的需要`$_POST`，因为您在 php 中获取信息：

`$fileName = $_SERVER['HTTP_X_FILE_NAME'];`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-31T10:01:43.020

尝试通过增加大小 post_max_size ， upload_max_filesize 和 max_file_uploads 在 php.ini

# spring - spring 3上传文件问题-MultipartException，连接重置

> ID：13050333
> 
> 赞同：5
> 
> 时间：2012-10-24T13:31:08.693
> 
> 标签：spring, file-upload, multipart

我有一个属于 Web 应用程序的表单，其中包含一个“文件”字段来上传 pdf 文件。（spring 3 环境，多部分文件上传）上传文件在测试环境（所有浏览器）中工作正常，并且仅适用于生产中的 Firefox环境（文件上传导致连接重置异常，尤其是低互联网连接客户端浏览器）

按下提交按钮几秒钟后抛出以下异常：（浏览器是在 windows 环境中运行的 IE/Chrome，但不是 Firefox）

```
org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is org.apache.commons.fileupload.FileUploadBase$IOFileUploadException: Processing of multipart/form-data request failed. null
    at org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:162)
    at org.springframework.web.multipart.commons.CommonsMultipartResolver.resolveMultipart(CommonsMultipartResolver.java:138)
    at org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:887)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:750)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:162)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at fr.ifma.utils.FiltreUTF8.doFilter(FiltreUTF8.java:21)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.commons.fileupload.FileUploadBase$IOFileUploadException: Processing of multipart/form-data request failed. null
    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:371)
    at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:126)
    at org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:155)
    ... 38 more
Caused by: java.io.IOException
    at org.apache.jk.common.JkInputStream.receive(JkInputStream.java:205)
    at org.apache.jk.common.JkInputStream.refillReadBuffer(JkInputStream.java:265)
    at org.apache.jk.common.JkInputStream.doRead(JkInputStream.java:183)
    at org.apache.coyote.Request.doRead(Request.java:427)
    at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:304)
    at org.apache.tomcat.util.buf.ByteChunk.substract(ByteChunk.java:419)
    at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:327)
    at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:193)
    at org.apache.commons.fileupload.MultipartStream$ItemInputStream.makeAvailable(MultipartStream.java:976)
    at org.apache.commons.fileupload.MultipartStream$ItemInputStream.read(MultipartStream.java:886)
    at java.io.InputStream.read(InputStream.java:82)
    at org.apache.commons.fileupload.util.Streams.copy(Streams.java:96)
    at org.apache.commons.fileupload.util.Streams.copy(Streams.java:66)
    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:366)
    ... 40 more
24 oct. 2012 10:40:38 org.apache.jk.core.MsgContext action
ATTENTION: Unable to send headers
java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at org.apache.jk.common.ChannelSocket.send(ChannelSocket.java:539)
    at org.apache.jk.common.JkInputStream.appendHead(JkInputStream.java:324)
    at org.apache.jk.core.MsgContext.action(MsgContext.java:266)
    at org.apache.coyote.Response.action(Response.java:183)
    at org.apache.coyote.Response.sendHeaders(Response.java:379)
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:314)
    at org.apache.catalina.connector.OutputBuffer.close(OutputBuffer.java:274)
    at org.apache.catalina.connector.CoyoteWriter.close(CoyoteWriter.java:108)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:394)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:162)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at fr.ifma.utils.FiltreUTF8.doFilter(FiltreUTF8.java:21)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662)
24 oct. 2012 10:40:38 org.apache.jk.common.ChannelSocket processConnection 
```

这是网络应用程序代码和配置：

spring 多部分解析器配置：

控制器 ：

```
/**      
 * this controller handles file upload and save files to dao.
     * @author Christophe.Dumonet@ifma.fr
     * @param request
 * @param documentFormBean
 * @param result
 * @param file
 * @return
 */
@RequestMapping(value = "/save", method = RequestMethod.POST)
public ModelAndView save(HttpServletRequest request,
        @Valid DocumentFormBean documentFormBean,BindingResult result,
        @RequestParam("file") MultipartFile file) {
    ResourceBundle bundle = ResourceBundle.getBundle("messages", request.getLocale());

    Map<String,Object> map = new HashMap<String, Object>();

    map.put("documentFormBean", new DocumentFormBean());
    map.put("documentList", documentDao.findAllForaDepot(Long.parseLong((String) request.getParameter("depot"))));
    map.put("depot", depotDao.find(Long.parseLong((String) request.getParameter("depot"))));

    //Handle too many documents attached : how many documents attached to this depot now ? throw an error to UI.
    @SuppressWarnings("rawtypes")
    List documentAttached = documentDao.findAllForaDepot(Long.parseLong((String) request.getParameter("depot")));
    if (documentAttached != null && documentAttached.size() >= Integer.parseInt(SpringPropertiesUtil.getProperty("Depot.maximum.file.number.authorized"))){
        map.put("MaximumFileNumberReached", bundle.getString("Depot.maximum.file.number.errormessage"));
        return new ModelAndView("ajoutDocumentsRapport", map);
    }

    //handle file empty or not pdf
    if (result.hasErrors() || (file.isEmpty()) || !file.getContentType().contains("pdf")) {
        map.put("errors", result);

        if (file.isEmpty()) map.put("ErrorMessageFileEmpty", bundle.getString("view.addrapport.error.fileisempty"));

        if (!file.getContentType().contains("pdf")) map.put("ErrorMessageFileTypeNotPDF", bundle.getString("view.addrapport.error.filetype.onlypdf"));
        return new ModelAndView("ajoutDocumentsRapport", map);
    } else{

    try {
        //Blob blob = Hibernate.createBlob(file.getInputStream());
        //cause Hibernate.createBlob is deprecated, use a LobHelper interface instead.
        org.hibernate.Session se = (org.hibernate.Session)depotDao.getHibernateTemplate().getSessionFactory().getCurrentSession();
        LobHelper lh = se.getLobHelper();
        Blob blob = lh.createBlob(file.getBytes());

        Document newDocument = new Document();
        newDocument.setDescription(documentFormBean.getDescription());
        newDocument.setContentType(file.getContentType());
        newDocument.setFilename(file.getOriginalFilename());
        newDocument.setContent(blob);
        newDocument.setDepot(depotDao.find(Long.parseLong((String) request.getParameter("depot"))));
        documentDao.save(newDocument);
        map.put("documentList", documentDao.findAllForaDepot(Long.parseLong((String) request.getParameter("depot"))));
        } catch (IOException e) {
        e.printStackTrace();
    }

    return new ModelAndView("ajoutDocumentsRapport",map);
    }
} 
```

Tomcat 6 AJP 连接器连接器配置：（原始配置为：）

```
<Connector port="8009" protocol="AJP/1.3" redirectPort="8443"/> 
```

（也试过这个：）

```
<Connector port="8009" protocol="AJP/1.3" redirectPort="8443"
             connectionTimeout="120000" maxThreads="1000"
            minSpareThreads="50" maxSpareThreads="100" enableLookups="false"
            acceptCount="150" address="127.0.0.1"
            useBodyEncodingForURI="true"
            compression="on"
            compressionMinSize="1024"
            compressableMimeType="text/html,text/xml"
            connectionUploadTimeout="3600000"
            disableUploadTimeout="true"
    /> 
```

Apache 2 虚拟主机配置：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www
    Timeout 3600
    ProxyPass / ajp://localhost:8009/
    ProxyPassReverse / ajp://localhost:8009/
    ProxyTimeout 3600

    <Proxy *>
    Order deny,allow
    Allow from all
    </Proxy>

    <Directory /var/www/>
            Options -Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

     ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
     ErrorLog ${APACHE_LOG_DIR}/error.log
     LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

html格式：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ page isELIgnored="false" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<base
href="<%=request.getScheme() + "://" + request.getServerName()
                + ":" + request.getServerPort() + request.getContextPath()
                + "/"%>" />

<link href="css/style1.css" rel="stylesheet" type="text/css" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link type="text/css" rel="stylesheet" href="css/solid.css" />
<link type="text/css" rel="stylesheet" href="css/errors.css" />
<script type="text/javascript" src="script/jquery-1.6.2.min.js"></script> 
<script type="text/javascript" src="script/jquery.validate.js"></script>

</head>
<body>  

<form:form id="myform" method="post" action="save.html" commandName="documentFormBean" enctype="multipart/form-data">

<c:set var="depot" value="${depot.id}" scope="session" />
<input type="hidden" name="depot" value="${depot.id}" /> 
<table id="gradient-style">
    <tr>
        <th colspan="8"><h3>Fichiers joints au rapport</h3>
        </th>
    </tr>

    <tr><td>->Ajouter un document</td>
        <td><form:textarea path="description" />
        <br/>
         <span style="color:red">*</span>description du fichier
        <form:errors path="description" cssClass="error" />
        </td>
        <td colspan="3">
        <input type="file" name="file" />
        <br/><span class="error" >${ErrorMessageFileEmpty}</span>
        <br/><span class="error" >${ErrorMessageFileTypeNotPDF}</span>
        <br/><span class="error" >${MaximumFileNumberReached}</span>
        </td>
        <td colspan="3"><input type="submit" id="upload" value="Ajouter le document" /></td>
    </tr>
    <tr > <td colspan="8"> <div style="color:red">Attention : le document doit comporter obligatoirement une description et un fichier PDF (taille maximum : 20Mo) </div></td></tr>
    <tr > <td colspan="8"> <div >Note : Si vous le déposant n'est pas autorisé à publier son rapport pour des raisons de confidentialité, déposer simplement la page de garde en pdf du rapport </div></td></tr>
</table>

<span class="error">${msg}</span>

    <c:if test="${!empty documentList}">    
    Liste des documents associés au rapport : 
    <table id="gradient-style">
    <tr>
        <th>Description</th>
        <th>Nom du fichier</th>
        <th>type de contenu</th>
        <th>T&eacute;l&eacute;charger</th>
        <th>Supprimer</th>
    </tr>

    <c:forEach items="${documentList}" var="document">
        <tr>

            <td width="250px">${document.description}</td>
            <td width="250px">${document.filename}</td>
            <td width="250px">${document.contentType}</td>
            <td width="20px"><a
                href="${pageContext.request.contextPath}/download/${document.id}.html"
                target="_blank"><img
                    src="${pageContext.request.contextPath}/images/save-icon.jpg"
                    width="20px" height="20px"
                    border="0" title="Download this document" />T&eacute;l&eacute;charger</a>
            </td>
            <td width="20px"><a
                href="${pageContext.request.contextPath}/remove/document/${document.id}/depot/${depot.id}.html"
                onclick="return confirm('Etes vous certain de vouloir supprimer ce fichier ?')"><img
                    width="20px" height="20px" src="${pageContext.request.contextPath}/images/delete-icon.jpg"
                    border="0" title="Delete this document" />Supprimer</a></td>
        </tr>
    </c:forEach>

    </table>
    </c:if>
    <script>
    function disp_warning()
    {
      alert("Vous devez ajouter au moins un document SVP !")
    }
    </script>
    <table id="gradient-style">
        <tr>
        <th colspan="6">
            <c:choose>
                 <c:when test="${fn:length(documentList) gt 0}">
                    <button type="button" onclick="location.href='endAdd.html'"><spring:message code="application.add.end.title"/>  </button>
                </c:when>
                <c:otherwise>
                    <button type="button" onclick="disp_warning()"><spring:message code="application.add.end.title"/></button>
                </c:otherwise>
            </c:choose>
        </th>
    </tr>

    </table>
</form:form>
</body>
</html> 
```

此异常的可能原因是什么？
文件上传时连接重置通常意味着客户端中止发送......那又怎样？任何帮助将不胜感激。克里斯托夫 D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T20:15:32.197

您能否捕获客户端和服务器之间的 tcpdump 并查看谁在重置连接。我们在我们的应用程序中遇到了类似的问题，它是一个正在断开连接的防火墙。apache [LimitRequestBody] 中有另一个设置在文件上传达到该限制后中止上传。在这两种情况下，来自 apache 和 mod-jk 的日志在这些情况下调试起来并不那么清楚。

# objective-c - 从 plist 导入的 nsdictionary 生成随机句子

> ID：13050339
> 
> 赞同：1
> 
> 时间：2012-10-24T13:31:24.807
> 
> 标签：objective-c, ios, xcode, plist, nsdictionary

我将此 plist 创建为字典，以将书名作为键：

```
<dict>
    <key>Frankestein</key>
        <dict>
        <key>0</key>
        <string>his name was frank</string>
        <key>1</key>
        <string>he was a monster</string>
    </dict>
    <key>dracula</key>
    <dict>
        <key>0</key>
        <string>his name was dracula</string>
        <key>1</key>
        <string>he was a vampire</string>
    </dict>
</dict>
</plist> 
```

然后将 plist 加载到字典中：

```
NSDictionary *plisttext2 = [NSDictionary dictionaryWithContentsOfFile:@"text2.plist"]; 
```

我如何能够从字典中生成和显示随机句子，并显示句子编号和书名（键）？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:41:55.617

一方面，`NSDictionary *plisttext2 = [NSDictionary dictionaryWithContentsOfFile:@"text2.plist"];`行不通。该`ContentsOfFile`参数需要一个完整路径，而不是相对路径文件名。为此，请使用：

```
NSBundle* bundle = [NSBundle mainBundle];
NSString* plistPath = [bundle pathForResource:@"text2" ofType:@"plist"];
NSDictionary* plisttext2 = [NSDictionary dictionaryWithContentsOfFile:plistPath]; 
```

现在要生成和显示随机句子，您需要跟踪所有键：

```
NSArray* keys = [plisttext2 allKeys] 
```

然后使用索引选择一个随机键：

```
int randomIndex = arc4random() % (keys.count);
NSString* key = [plisttext2 objectForKey:[keys objectAtIndex:randomIndex]]; 
```

Using the randomly selected key, you can then access the book's sentences, and use the same method to select them at random. After selection, add them all together, and you have your result.

This means you can generate random sentences from different books, whilst still being able to show the sentence number + book name (as you've kept ahold of their indices that refer to them).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:37:28.647

您可以遍历 plist 以确定每个字典的最大键值，然后执行类似于以下代码的操作以从每个字典中随机选择一个句子。

```
int min = 0; 
int max = iterationResult;
int randNum = rand() % (max-min) + max; //create the random number.
NSLog(@"RANDOM NUMBER: %i", randNum); 
```

# excel - 计算一次（每年）的名字，不管每年有多少

> ID：13050341
> 
> 赞同：2
> 
> 时间：2012-10-24T13:31:27.973
> 
> 标签：excel

问题是：

有一个表格，每个月都会向其中添加数据。我将此数据用于许多不同的数据透视表和报告，因此我无法对其进行修改。用户已请求如果可能（我向他保证确实如此），他希望在列表中看到今年和去年医生的两 (2) 个单一值。

数据看起来像这样：医生、进/出、日期、数字

`John Deaux Out 10/1/11 8`
`John Deaux Out 11/1/11 3`
`John Deaux Out 01/1/12 5`
`John Deaux Out 05/1/12 3`
`John Deaux Out 09/1/12 1`
`Billy White In 02/1/12 2`
`Mike Adams Out 06/1/11 6`
`Mike Adams Out 10/1/11 9`
`Mike Adams Out 01/1/12 1`
`Mike Adams Out 04/1/12 6`

2011 年我会有 1 个 John Deaux，2012 年有 1 个。Mike Adams 也是如此。

```
TY    2
LY    2 
```

现在我只需要计算“Out”，所以我必须小心。此外，我有可能必须在前 12 个月内构建它，同时让它变得更加困难。

1 为 John Deaux 过去 12 个月。

```
TY    2
LY    1 
```

***TY：今年 - LY：去年**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:13:20.873

选中此项，这将检查 2012/2013 年的 B 列并计算 A 列中不同的唯一值。

```
=SUM(IF(FREQUENCY(IF(YEAR(B1:B11)=2013;A1:A11);A1:A11)>0;1)) + CONTROL + SHIFT + ENTER

=SUM(IF(FREQUENCY(IF(YEAR(B1:B11)=2012;A1:A11);A1:A11)>0;1)) + CONTROL + SHIFT + ENTER 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:36:32.940

要手动执行此操作：

1.  由于您无法对现有表进行任何编辑，请将所有内容复制到新表中。
2.  在新表中，添加一个名为 Year 的列。使用 Year() 函数从日期单元格中获取年份。
3.  制作另一个名为 Count 的列。使用`If(A2="Out",1,0)`其中 A2 是 In/Out 列中的单元格。
4.  将 Doctor、Year 和 Count 列复制到新表中。
5.  Excel 2007 及更高版本在数据功能区中有一个名为“删除重复项”的便捷工具。使用它来删除重复项。这将使您不必在同一年两次计算同一位医生。
6.  创建一个数据透视表，使用 Doctor 作为行，Year 作为列，sum(count) 作为值。

# eclipse-emf - Xtext - 生成对象 - 生成更多数据

> ID：13050348
> 
> 赞同：1
> 
> 时间：2012-10-24T13:31:43.683
> 
> 标签：eclipse-emf, xtext, generated-code, xtend

我有类似于此处描述的 xtext 的 xtext 文件：（www.ebpml.org/blog2/index.php/2010/11/05/mde-xtext-and-json）

```
JSONDataSource: root = Object ;
Object: '{' firstObject=TerminalObject (',' objects+=TerminalObject)* '}';
Array: '['firstItem=ObjectValue (',' items+=ObjectValue)* ']';
EmptyObject: isEmpty?= '{}' ;
EmptyArray: isEmpty?= '[]' ;
ObjectValue: value=STRING | Object | Array | EmptyObject | EmptyArray ;
TerminalObject: element=STRING ':' (content = ObjectValue) ; 
```

因此，在生成代码后，我拥有了在 java 中生成的所有对象。现在我想在那些生成的 java 文件中有更多的方法。

最好的方法是什么？
谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:39:19.590

好吧，没有简单的方法来定制这些类。你基本上可以做两件事：

1.  创建您自己的 EMF (Ecore) 模型，并以重用您的 Ecore 模型的方式创建您的语法。这样，您可以定义新的操作，并手动创建它们的实现。
2.  您还可以为填充内容的 Ecore 模型生成器设置后处理器。有关详细信息，请参见[http://christiandietrich.wordpress.com/2011/07/22/customizing-xtext-metamodel-inference-using-xtend2/](http://christiandietrich.wordpress.com/2011/07/22/customizing-xtext-metamodel-inference-using-xtend2/) - 但要有所不同，因为模型推理不能直接输出自定义代码；有一些基于 EMF genmodel-annotation 的方法来创建生成的代码主体（有关详细信息，请参阅[http://jevopisdeveloperblog.blogspot.hu/2011/03/implement-tostring-with-xtexts.html](http://jevopisdeveloperblog.blogspot.hu/2011/03/implement-tostring-with-xtexts.html)的最后部分）。

总之，自定义生成的 EMF 模型非常困难，我不建议这样做。尽管似乎没有必要引入新的辅助类，但从技术上讲，这样做要容易得多。

# mysql - 更快地执行“WHERE IN (SELECT)”或“WHERE x = (SELECT)”

> ID：13050351
> 
> 赞同：1
> 
> 时间：2012-10-24T13:32:03.450
> 
> 标签：mysql

哪个选择语句更好？

```
SELECT *
FROM  aTable
WHERE aField in (
    SELECT xField 
    FROM   bTable
    WHERE  yField > 5
); 
```

或者

```
SELECT *
FROM  aTable
WHERE (
    SELECT yField
    FROM   bTable
    WHERE  aTable.aField = bTable.xField
) > 5; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:50:20.587

它们产生非常相似的执行计划*（在我的测试表上，它们很小；YMMV，总是分析真实数据）*，您可能需要考虑第三种选择：

首先：

```
EXPLAIN SELECT * FROM aTable WHERE aField in (SELECT xField FROM bTable WHERE yField > 5); 
```

```
+----+--------+--------+--------+------ ---------+---------------+---------+------+------+ -------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+--------+--------+--------+------ ---------+---------------+---------+------+------+ -------------+
| 1 | 初级 | 表 | 全部 | 空 | 空 | 空 | 空 | 4 | 使用位置 |
| 2 | 依赖子查询 | 表 | 范围 | bTable_y 字段 | bTable_y 字段 | 5 | 空 | 2 | 使用位置 |
+----+--------+--------+--------+------ ---------+---------------+---------+------+------+ -------------+
```

第二：

```
EXPLAIN SELECT * FROM aTable WHERE (SELECT yField FROM bTable WHERE aTable.aField = bTable.xField) > 5; 
```

```
+----+--------+--------+------+-------- --------+------+---------+------+------+---------- ---+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+--------+--------+------+-------- --------+------+---------+------+------+---------- ---+
| 1 | 初级 | 表 | 全部 | 空 | 空 | 空 | 空 | 4 | 使用位置 |
| 2 | 依赖子查询 | 表 | 全部 | 空 | 空 | 空 | 空 | 4 | 使用位置 |
+----+--------+--------+------+-------- --------+------+---------+------+------+---------- ---+
```

两者都导致依赖子查询；在我的示例表中，第一个获得了索引的好处（我假设`bTable.yField`是索引），而第二个没有。

您可以避免依赖子查询并使用以下方式获得更好的预先过滤`JOIN`：

第三种选择：

```
EXPLAIN SELECT * FROM aTable INNER JOIN bTable On aTable.aField = bTable.xField WHERE bTable.yField > 5; 
```

```
+----+-------------+--------+--------+------------- --+----------------+----------+------+------+----- -------------------------------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+--------+--------+------------- --+----------------+----------+------+------+----- -------------------------------------+
| 1 | 简单 | 表 | 范围 | bTable_y 字段 | bTable_y 字段 | 5 | 空 | 2 | 使用位置 |
| 1 | 简单 | 表 | 全部 | 空 | 空 | 空 | 空 | 4 | 使用哪里；使用连接缓冲区 |
+----+-------------+--------+--------+------------- --+----------------+----------+------+------+----- -------------------------------------+
```

但是，您确实必须再次使用**您的**模式和**您的**代表性真实数据进行概要分析，因为优化器可能会做出不同的决定。

[在quassnoi的](https://stackoverflow.com/users/55159/quassnoi)[这篇优秀文章](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)中对这些技术进行了更多比较。

* * *

作为参考，这是我创建`aTable`和`bTable`（因为您没有提供定义）和测试您的查询的方式：

```
mysql> 创建表 aTable (aField INT, aMore VARCHAR(200));
查询正常，0 行受影响（0.01 秒）

mysql> 创建表 bTable (xField INT, yField INT);
查询正常，0 行受影响（0.02 秒）

mysql> INSERT INTO aTable (aField, aMore) VALUES (1, '一'), (2, '二'), (3, '三'), (4, '四');
查询正常，4 行受影响（0.00 秒）
记录：4 重复：0 警告：0

mysql> INSERT INTO bTable (xField, yField) 值 (1, 10), (2, 2), (3, 20), (4, 4);
查询正常，4 行受影响（0.02 秒）
记录：4 重复：0 警告：0

mysql> 创建索引 bTable_yField ON bTable(yField);
查询正常，0 行受影响（0.05 秒）
记录：0 重复：0 警告：0

mysql> SELECT * FROM aTable WHERE aField in (SELECT xField FROM bTable WHERE yField > 5);
+--------+--------+
| 场 | a更多 |
+--------+--------+
| 1 | 一 |
| 3 | 三 |
+--------+--------+
2 行（0.00 秒）

mysql> SELECT * FROM aTable WHERE (SELECT yField FROM bTable WHERE aTable.aField = bTable.xField) > 5;
+--------+--------+
| 场 | a更多 |
+--------+--------+
| 1 | 一 |
| 3 | 三 |
+--------+--------+
2 行（0.00 秒）
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:36:47.750

我认为第二个转换为相关的子查询语义，因此与第一个相比成本很高。最好的办法是只加入这两个表，如下所示：

```
SELECT 
    a.* 
FROM 
    aTable a
    JOIN bTable b
    ON aTable.aField = bTable.xField
WHERE 
    b.xField > 5 
```

这将使您避免 IN 子句中出现大量结果，如果是第一次查询，这会使查询执行速度变慢，并且有时会导致溢出错误（SQL Server 曾经在 IN 中有 32767 个值的限制）子句，之后它会抛出此溢出错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:47:35.670

Alot 取决于表的索引以及是否在连接条件中使用索引列。这些的组合将在某种程度上决定 SQL 引擎如何“决定”在内部构造查询，并最终影响查询性能。在 MySQL 上不太确定，但 SQL Server 肯定会允许创建一个执行计划，这将显示潜在的瓶颈。

# ios - 向 App Store 提交应用程序，情节提要包含无效的文件名

> ID：13050354
> 
> 赞同：1
> 
> 时间：2012-10-24T13:32:04.433
> 
> 标签：ios, app-store-connect

当我的应用被 Apple 拒绝时，我得到了这个解释：

> 文件名无效 - 您的包中包含一个文件“XXXX.app/en.lproj/MainStoryboard.storyboardc/.nib”，其名称包含无效字符。避免在文件名中使用控制字符。还要避免文件名中的前导或尾随空格字符。

这个 .nib 文件是什么，我该如何解决这个错误？

我确实`cd`进入了`MainStoryboard.storyboardc`文件夹，并且有一个文件`?.nib`，但是当我按下时，`cat <tab>`我必须输入`^V.nib`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-09T16:36:21.440

我可以确认@PPCC 的回答有效。我在找到文件夹时遇到了一些麻烦，所以我想在这里分享。我认为找到它的最简单方法是转到您项目的派生数据。在 Xcode 中，转到 Window->Projects，然后您可以查看派生数据在您的项目中所在的位置。

所以我的 .nib 文件位于 /Build/Products/Debug-iphoneos/.app/.storyboardc

在那里我找到了一个名为“??.nib”的文件。我使用“cat”命令在命令行中打开它，然后扫描其中的信息以查找 .nib 文件所属的视图控制器。然后我从情节提要中删除了该视图控制器并再次创建它。我确保指定了故事板 ID。然后我清理了项目并重建了它。它没有再次创建那个 .nib 文件，之后我没有任何问题。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:34:58.867

我最终重建了我的整个故事板。谢天谢地，我的课完好无损，所以只花了大约 15 分钟

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T14:47:05.217

我遇到了同样的问题，我不想重新制作所有的故事板文件，因为这非常困难。

最后我解决了它，如下所示：

问题是在自动创建的“myAppName.app/MainStoryboard_iPhone.storyboardc”目录中有一个名为“.nib”的文件。假设在编译应用程序时，会自动创建此目录，并且在其中创建了许多与我的故事板中包含的所有视图相关的文件。

文件“.nib”很难找到，因为 MacO 认为它是一个隐藏文件，因为它以点开头。

在能够打开 .nib 文件后，我看到它就像一个 xml 文件，并且我认出了我的故事板上的其中一个视图的故事板标识符。

之后，我删除了 .nib 文件并删除了故事板中的视图。重新编译应用程序后，未创建文件 .nib。

所以，我在我的故事板中添加了另一个视图，并像以前一样重新设计了它，并放置了相同的故事板标识符。只有一种观点。

之后应用程序编译良好，.nib 文件没有创建，并且应用程序已通过 Apple 第一次修订（现在正在等待审核）。

因此，可能在 XCode 中存在一个错误，它错误地创建了一些故事板视图的 .nib 文件。

如果有人遇到同样的问题，我希望这可以在将来有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-18T23:22:42.020

I believe I might have solved mine by removing 'compile with bitcode' option. Further testing required

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-12T23:21:53.133

作为所有其他答案的补充：在我的情况下，故事板文件中有一个带有换行符的“storyboardIdentifier”。删除此标识符解决了问题。

# razor - 为什么这个链接不渲染？

> ID：13050357
> 
> 赞同：0
> 
> 时间：2012-10-24T13:32:11.233
> 
> 标签：razor, asp.net-mvc-4

我的详细信息视图中有一个 if/else 语句，如下所示：

```
 @if (Model.SomeProperty != null)
    {
        Html.RenderAction("MethodName", "ContollerName", new {id=stuff});
    }
    else
    { 
        <span>Is this showing?</span>
        Html.ActionLink("Link Text", "MethodName", "ContollerName", new { Id = something}, null);
    } 
```

跨度渲染，所以我知道 else 块被击中，但 ActionLink 没有出现。但是，如果我像这样将它移出 else 块，它可以工作：

```
@Html.ActionLink("Link Text", "MethodName", "ContollerName", new { Id = something}, null) 
```

我猜这是我的语法有问题，但我没有看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:33:14.420

`Html.ActionLink()``IHtmlString`返回一个包含`<a>`标签的字符串（实际的 an ）。

你没有对那个字符串做任何事情。

您需要通过编写将字符串打印到页面`@Html.ActionLink(...)`。（您仍然可以在代码块中执行此操作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:34:48.200

答案就在`@`！只需添加它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:37:00.740

它应该是：

```
@if (Model.SomeProperty != null)
{
    Html.RenderAction("MethodName", "ContollerName", new {id=stuff});
}
else
{
    <span>Is this showing?</span>
    @Html.ActionLink("Link Text", "MethodName", "ContollerName", new { Id = something}, null);
} 
```

直接与流一起使用`Html.RenderAction`，因此它不需要它，但`Html.ActionLink`返回`MvcHtmlString`需要“就地”输出的内容。

# c++ - 在循环中创建唯一的对象指针

> ID：13050360
> 
> 赞同：2
> 
> 时间：2012-10-24T13:32:14.987
> 
> 标签：c++

我需要在循环中创建对象指针，但我正在努力创建唯一指针。这是我的代码：

```
class DatClass{
  public:

  int m;

  DatClass(int i):m(i){}
};

class OtherClass{
  public:
  DatClass* dc;
};

void Test(std::vector<OtherClass> v){
  std::vector<OtherClass>::iterator it;
  int i = 1;
  for(it = v.begin(); it != v.end(); it++){
    DatClass dc = DatClass(i);
    std::cout << &dc << std::endl;
    it->dc = &dc;
    i++;
  }
}

int main(){
  std::vector<OtherClass> v;
  v.push_back(OtherClass());
  v.push_back(OtherClass());
  v.push_back(OtherClass());
  Test(v);
} 
```

这并没有给我唯一的指针。输出内容如下：

```
0xbf94d72c
0xbf94d72c
0xbf94d72c 
```

我是否需要使用 new 才能获得唯一的指针？如果是这样，我会将相应的删除放在哪里？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:33:41.383

是的，您应该使用它`new`来获取唯一地址。 应该是当循环完成时 - 否则（删除在同一个循环内） - 操作系统可以再次给你相同的地址
。（或者准确地说——当你完成了在这个地址中分配的对象时）`delete`

您的代码中发生的事情是您使用了自动分配的内存。该内存通常在堆栈上分配 - 并且在每次迭代中 - 相同的内存被重新用于变量 - 因此它为您提供相同的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:36:20.273

`DatClass dc = DatClass(i);`在堆栈上创建类的实例。它的地址在循环中保持不变，这就是输出相同的原因。

您可能需要执行以下操作：

```
void Test(const std::vector<OtherClass>& v){
  std::vector<OtherClass>::iterator it;
  for(it = v.begin(); it != v.end(); it++){
    const DatClass& dc = *it;
    std::cout << &dc << std::endl;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:35:36.930

内部循环的每次迭代都会在堆栈上`Test`创建一个新实例并打印其地址。`DatClass`在下一次迭代之前，该对象的生命周期结束，这使编译器能够在下一次迭代中重用相同的内存。

这就是为什么您总是看到相同的地址的原因（当然，这是可能的，因为标准特别允许编译器这样做）。

如果您想查看对象的不同地址，那么您应该将它们全部分配在循环外的函数范围内（在这种情况下，它们将驻留在堆栈上但位于不同的地址），或者将它们分配在堆上。

当然，很明显它`vector`本身包含的内容没有任何区别，因为这只会影响循环执行的迭代次数。如果您更改代码以打印实际内部对象的地址，`vector`您还将看到不同的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:42:12.667

简而言之，您正在尝试动态执行此操作。这意味着 nu 不在堆栈上，而在堆上。因此，仅当您需要或在程序启动时不使用它时才会分配更多内存。

所以`int a = 5; <<< stack`和`new int* b = 55`（当完成使用它时，你必须释放内存，`delete b;`或者你以后会得到错误的分段错误错误。）；

```
`cout<< &b;` prints the value  stored at the pointer ` 55`
`cout<< *b` prints the pointers value in memory `#1234` i think this is called offset 
```

我向您推荐此类基本问题： [http ://www.cplusplus.com/doc/tutorial/](http://www.cplusplus.com/doc/tutorial/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T14:37:22.407

我认为您可能正在尝试将一个*新*的 DatClass 分配给 OtherClass，但是您分配的是一个*自动*（在堆栈上）DatClass，它在每次循环迭代时被销毁，因为它是一个自动对象（并且编译器正在重用它的地址在堆栈上，这就是为什么你总是看到相同的地址）

我宁愿替换这个：

```
for(it = v.begin(); it != v.end(); it++){
    DatClass dc = DatClass(i);           // auto object destroyed and address reused
    std::cout << &dc << std::endl;
    it->dc = &dc; 
```

有了这个：

```
for(it = v.begin(); it != v.end(); it++){
    DatClass *dc = new DatClass(i);      // new object on heap
    std::cout << dc << std::endl;
    it->dc = dc; 
```

所以现在您正在创建*新的*DatClass 对象以分配给 OtherClass 对象。（此外，您还应该将`delete`那些新的 DatClass 对象放在某个地方，以避免资源泄漏）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-24T13:35:59.307

您打印的地址`dc`。`dc`每次都在同一位置的堆栈上。这就是为什么你每次都得到相同的地址。

您可以将循环更改为：

```
for (auto it = v.begin(); it != v.end(); ++it){
    OtherClass *oc = &(*it);
    std::cout << oc << std::endl;
} 
```

它为您提供了所有对象的地址`v`

# c# - 无法生成动态复选框

> ID：13050380
> 
> 赞同：0
> 
> 时间：2012-10-24T13:33:16.537
> 
> 标签：c#, .net, wpf, mvvm, checkbox

我正在开发一个 WPF，我需要在其中动态生成 16 次复选框。

**XAML：**

```
<Checkboxes Height="14" Command="{Binding CheckboxesGen}" Margin="0" Name="checkBox1" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Center" /> 
```

使用上述方式，如果我写下此复选框 16 次并为它们设置单独的按钮单击命令，效率会很低。理想情况下，我希望生成它们 16 次，并在我的 viewmodel 类中使用一种通用方法，如下所示：

```
private ICommand mCheckboxesGen;
    public ICommand CheckboxesGen
    {
        get
        {
            if (mCheckboxesGen== null)
                mCheckboxesGen= new DelegateCommand(new Action(mCheckboxesGenExecuted), new Func<bool>(mCheckboxesGenCanExecute));

            return mCheckboxesGen;
        }
        set
        {
            mCheckboxesGen= value;
        }
    }

    public bool mCheckboxesGenCanExecute()
    {
        return true;
    }

    public void mCheckboxesGenExecuted(some INDEX parameter which gives me selected Checkboxes )
    {
        // Have a common method here which performs operation on each Checkboxes click based on INDEX which determines which Checkboxes I have selected
    } 
```

我在我的 C++ 应用程序中遇到了同样的情况。我在我的 C++ 应用程序中完成了如下操作：

```
for(int j = 0; j < 16; j ++)
    {
        m_buttonActiveChannels[j] = new ToggleButton();
        addAndMakeVisible(m_buttonActiveChannels[j]);
        m_buttonActiveChannels[j]->addButtonListener(this);
    }

//Checking which Checkboxes is clicked
unsigned bit = 0x8000;
for(int i = 15; i >= 0; i--)
{
    if(0 != (value & bit)) //Value has some hardcoded data
    {
        m_buttonActiveChannels[i]->setToggleState(true);
    } 
    else
    {
        m_buttonActiveChannels[i]->setToggleState(false);
    }

    bit >>= 1;
} 
```

因此，使用它会生成 16 次，并且有一种基于`index i`.

使用类似的方法或任何其他方法，如何在我的 wpf 应用程序中实现它？：） 请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:55:31.817

这样的事情怎么样？

```
<ItemsControl ItemsSource="{Binding CollectionOfObjectsThatRepresentYourCheckBox}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"
                        IsItemsHost="True" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Checkbox Content="{Binding DisplayText }" Checked="{Binding Checked}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

您需要在加载对象或执行命令时填充您的集合，然后您可以对在您为其创建的模型中检查的项目做出反应。

```
public class CheckBoxClass
{
 public int Index {get; set;}
 public string DisplayText {get; set}
 private bool _checked;
 public bool Checked 
 {
   get { return _checked;}
   set {
        _checked = value
        doSomethingWhenChecked();
       }
}

ObservableCollection<CheckBoxClass> CollectionOfObjectsThatRepresentYourCheckBox = SomeMethodThatPopulatesIt(); 
```

这是一种更简洁的方法，您只需绑定到将由复选框表示的对象列表，而不是生成控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:44:46.440

为复选框定义一个视图模型，这个类将有一个 Index 属性和基于它的命令实现。将复选框视图模型的 ObservableCollection 添加到当前视图模型。在视图中添加一个 ItemsControl，并使用适当的 ItemTemplate 绑定到此集合。您现在可以在视图模型中动态添加任意数量的复选框。

# html - 全长标题标签图像？

> ID：13050383
> 
> 赞同：0
> 
> 时间：2012-10-24T13:33:39.193
> 
> 标签：html, image, title

这次我有一个简单的问题，我知道这听起来可能有点傻，但我想知道在某种程度上是否有可能；

是否可以在`<title>`html 文档的字段中包含图像？例如，你可以让一张图片占据整个页面的标题吗？（我假设没有很多俗气的网站会有它，但我想问）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:34:18.210

不; 那是完全不可能的。

但是，您可以使用不常见的 Unicode 字符。（然后您可以希望您的用户拥有包含这些字符的字体）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:36:17.667

不，您不能在标题中包含图像，但我想您可以通过使用 favicons 来实现类似的效果（例如，您可以使用 JavaScript 更改它们）。

# c# - 如何在服务器端控制器代码中获取过滤后的网格结果

> ID：13050388
> 
> 赞同：1
> 
> 时间：2012-10-24T13:33:51.833
> 
> 标签：c#, c#-4.0, razor, telerik, asp.net-mvc-4

我的代码：

```
 [GridAction]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult SearchUserByFilter(string filterString, bool loadData)
    {
            // code..
            return View(new GridModel { Data = advanceSearchCaching });
    } 
```

**返回视图（新 GridModel { 数据 = AdvanceSearchCaching }）；**代码包含初始搜索条件的结果集，如文本框（名字，姓氏..）。但它没有来自网格的过滤结果（即使用过滤器选项从网格中过滤）。如何在服务器端控制器代码中获取过滤后的网格结果。谢谢。

# python - 遍历一个矩阵，对一些行求和并将结果添加到另一个数组

> ID：13050394
> 
> 赞同：2
> 
> 时间：2012-10-24T13:34:11.033
> 
> 标签：python, matrix, numpy, matplotlib

您好，我有以下矩阵

```
 [[ 47  43  51  81  54  81  52  54  31  46]
  [ 35  21  30  16  37  11  35  30  39  37]
  [  8  17  11   2   5   4  11   9  17  10]
  [  5   9   4   0   1   1   0   3   9   3]
  [  2   7   2   0   0   0   0   1   2   1]
  [215 149 299 199 159 325 179 249 249 199]
  [ 27  49  24   4  21   8  35  15  45  25]
  [100 100 100 100 100 100 100 100 100 100]] 
```

我需要遍历矩阵，将第 0、1、2、3、4 行中的所有元素相加，仅示例：我需要

```
 row_0_sum = 47+43+51+81....46 
```

此外，我需要将每行总和存储在这样的数组中

```
 [row0_sum, row1_sum, row2_sum, row3_sum, row4_sum] 
```

到目前为止，我已经尝试过这段代码，但它没有完成这项工作：

```
 mu = np.zeros(shape=(1,6))

  #get an average 
  def standardize_ratings(matrix):
 sum = 0
 for i, eli in enumerate(matrix):
     for j, elj in enumerate(eli):
        if(i<5):
         sum = sum + matrix[i][j]
         if(j==elj.len -1):
           mu[i] = sum
           sum = 0
           print "mu[i]="
           print mu[i] 
```

这只是给了我一个`Error`： `numpy.int32 object has no attribute 'len'`

所以有人可以帮助我。执行此操作的最佳方法是什么，以及我应该使用 Python 中的哪种类型的数组来存储它。我是 Python 新手，但已经完成了编程......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:37:11.733

使您的数据 ,`matrix`成为一个`numpy.ndarray`对象，而不是列表列表，然后执行`matrix.sum(axis=1)`.

```
>>> matrix = np.asarray([[ 47,  43,  51,  81,  54,  81,  52,  54,  31,  46],
  [ 35,  21,  30,  16,  37,  11,  35,  30,  39,  37],
  [  8,  17,  11,   2,   5,   4,  11,   9,  17,  10],
  [  5,   9,   4,   0,   1,   1,   0,   3,   9,   3],
  [  2,   7,   2,   0,   0,   0,   0,   1,   2,   1],
  [215, 149, 299, 199, 159, 325, 179, 249, 249, 199],
  [ 27,  49,  24,   4,  21,   8,  35,  15,  45,  25],
  [100, 100, 100, 100, 100, 100, 100, 100, 100, 100]])

>>> print matrix.sum(axis=1)
[ 540  291   94   35   15 2222  253 1000] 
```

要从结果中获取前五行，您可以执行以下操作：

```
>>> row_sums = matrix.sum(axis=1)
>>> rows_0_through_4_sums = row_sums[:5]
>>> print rows_0_through_4_sums
[540 291  94  35  15] 
```

或者，您也可以选择只选择那些开始的行，并且只对它们应用总和：

```
>>> rows_0_through_4 = matrix[:5,:]
>>> print rows_0_through_4.sum(axis=1)
[540 291  94  35  15] 
```

一些有用的链接将是：

[Matlab 用户的 NumPy](http://www.scipy.org/NumPy_for_Matlab_Users)，如果您熟悉 Matlab/Octave 中的这些内容

[NumPy 中的切片/索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)

# asp.net-mvc-4 - ASP.NET MVC 4.0 RTM 的符号在哪里？

> ID：13050395
> 
> 赞同：38
> 
> 时间：2012-10-24T13:34:16.217
> 
> 标签：asp.net-mvc-4

我正在尝试配置 Visual Studio 2012 以允许我进入 ASP.NET MVC 4.0 源代码。( `System.Web.Mvc.dll`)。我遵循[了 SymbolSource 的推荐配置](http://www.symbolsource.org/Public/Home/VisualStudio)，但是当我尝试加载符号时，Visual Studio 找不到它们。

> **推荐配置**
> 
> 要配置 Visual Studio 以使用符号/服务器，请按照以下说明操作：
> 
> 1.  转到工具 -> 选项 -> 调试器 -> 常规。
> 2.  取消选中“仅启用我的代码（仅限托管）”。
> 3.  取消选中“启用 .NET Framework 源单步执行”。是的，它具有误导性，但如果您不这样做，那么 Visual Studio 将忽略您的自定义服务器顺序（请参阅下文）。
> 4.  勾选“启用源服务器支持”。
> 5.  取消选中“要求源文件与原始版本完全匹配”</li>
> 6.  转到工具 -> 选项 -> 调试器 -> 符号。为本地符号/源缓存选择一个文件夹。
> 7.  在“符号文件 (.pdb) 位置”下添加符号服务器。请注意正确的顺序，因为某些服务器可能包含相同二进制文件的符号：有或没有源。我们推荐以下设置：
>     *   [http://referencesource.microsoft.com/symbols](http://referencesource.microsoft.com/symbols)
>     *   [http://srv.symbolsource.org/pdb/Public](http://srv.symbolsource.org/pdb/Public)或经过身份验证的变体（见上文）
>     *   [http://srv.symbolsource.org/pdb/MyGet](http://srv.symbolsource.org/pdb/MyGet)或经过身份验证的变体（见上文）（具有源的其他符号服务器）
>     *   [http://msdl.microsoft.com/download/symbols](http://msdl.microsoft.com/download/symbols)（其他无源符号服务器）

我知道源代码[在 CodePlex](http://aspnetwebstack.codeplex.com)上可用，但是我对使用符号服务器单步执行代码特别感兴趣，而不必从 GAC 中取消引用 Mvc 并引用本地构建的程序集。

有人用 MVC 4.0 成功过吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T05:09:38.367

只需添加一个提供更多服务的符号服务器，而不仅仅是主要版本。

试试这个，包含大多数次要版本。

```
http://srv.symbolsource.org/pdb/Public 
```

核实：

以管理员身份运行 VS。

检查是否已将某些内容下载到您的符号缓存目录中。

转到仅选择指定的模块。添加“System.Web.Mvc.dll”

在代码中设置断点。开始调试。当断点在任何 mvc.dll 行上的调用堆栈中单击右键时。验证是否已加载符号。如果已加载，请尝试对一个调用堆栈行进行 dubbleclick 以打开 mvc 源。

回到你遇到麻烦的地方。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T15:32:13.510

我将对 Luke Gumbley 的回答进行一些改进。

微软试图让开发人员的生活更轻松。每当它发布一个 MVC 版本的安装程序时，也应该有一个可以下载的源。因此人们可以使用源代码来探索安装程序安装了什么，以及调试 MVC。

回到下载 MVC 调试信息的方式。如果您的系统上安装了 MVC4，您的 Visual Studio（我使用 2010）将永远不会尝试从上述服务器下载 MVC PDB 文件。在这种情况下，您的 Visual Studio 将在您运行调试器时使用 GAC 中的 MVC。

我已经尝试过 Luke Gumbley 建议的方式。但是，一旦您卸载 MVC，您的 MVC 项目将不会被加载，并且您无法创建新的 MVC 项目，因为模板已经消失。所以请不要卸载MVC。如果这样做，您仍然需要重新安装它。这很浪费时间。

你真正需要做的是退出你的 Visual Studio，运行命令

```
gacutil /u System.Web.Mvc 
```

然后转到`C:\Windows\Microsoft.NET\assembly\GAC_MSIL`，删除或重命名有问题的`System.Web.Mvc`文件夹。在此之后，启动您的 Visual Studio，并从 NuGet 获取 MVC 包。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T10:33:12.587

我无法直接回答您的问题并为您提供`System.Web.Mvc.dll`用于 ASP.NET MVC 4.0 的带有符号 (.pdb) 的 URL，但也许我可以帮助您以另一种方式解决问题。

众所周知（例如，请参见[此处](http://weblogs.asp.net/scottgu/archive/2012/03/27/asp-net-mvc-web-api-razor-and-open-source.aspx)）Microsoft 在[http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)上提供了当前的 .NET 源代码。在[帖子](http://blogs.msdn.com/b/webdev/archive/2012/08/30/getting-symbols-and-source-with-asp-net-nightly-nuget-packages.aspx)中，它描述了如何使用 ASP.NET 的*Nightly 版本*（代码的当前开发状态​​）。*如果您在下载RTM 版本*的 ASP.NET 4.5（带有 ASP.NET MVC 4.0）之前没有使用 Git ，您可能更喜欢使用它而不是 Nightly 版本。尽管如此，下载 RTM 版本的完整源代码还是很容易的。您只需要知道 Git 允许将代码副本保存在分支或标记版本中。通过这种方式，您可以访问（并下载）完整代码的某些先前版本。[链接](https://github.com/jquery/jquery/tree/1.8.2)例如，为您提供 jQuery 1.8.2 而不是[另一个链接](https://github.com/jquery/jquery/tree/)，为您提供可能不稳定的最新开发人员版本。所以要下载*RTM版本*的源代码你只需要选择“v2-rtm”分支然后点击“下载”：

![在此处输入图像描述](../Images/9d7fb9851e89903ab03a332a99d61930.png)

您可以使用[链接](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/75b5e7ea58d2)直接选择“v2-rtm”分支。

我可以重复一遍，*这并不完全符合您的要求*，而且我知道编译 ASP.NET 源代码也可能有点棘手，但我决定写下这些信息。如果有人会建议你更好的解决方案，那对我来说也会很有趣。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-03T21:06:34.753

我遇到了完全相同的问题（正确的版本，但没有符号），但是经过一天左右的尝试，我已经能够让它工作。这些是对我有用的包罗万象的说明，它们可能包含不必要的步骤：

1.  注册 SymbolSource 并使用经过身份验证的 URL 表单按照[VS 说明进行操作](http://www.symbolsource.org/Public/Home/VisualStudio "遵循 VS 说明")
2.  使用添加/删除程序卸载所有版本的 MVC
3.  [从 GAC 中删除 MVC 程序集](https://stackoverflow.com/questions/1633146/installing-a-modified-version-of-asp-net-mvc "从 GAC 中删除 MVC 程序集")（问题是关于修改 MVC，但 GAC 的答案很好）
4.  使用 NuGet 删除然后重新安装对您的项目的 MVC 4 引用
5.  开始调试，打开模块窗口，当它出现时，'Symbols loaded' 就在 System.Web.MVC 旁边。

（在你认为合适的时候重新启动，对我来说，关键的最后一步是重新安装 NuGet 参考）

我的理论是，由于在运行时使用 GAC 库而不是本地引用，因此在搜索符号时找不到符号。通过从 GAC 中删除 MVC，然后重新安装 NuGet 引用，似乎使用了本地引用并找到了符号。这是违反直觉的，因为 System.Web.MVC.dll 文件在 NuGet 和 GAC 之间是二进制等效的，尽管它们的日期不同。

我并不完全相信，因为我试图为 Razor 做同样的事情，但没有奏效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-28T10:24:32.107

我刚刚解决了同样的问题。

问题是存储在 GAC 中的 dll 与 symbolsource.org 上发布的 pdb 不完全对应。符号源上的那个显然对应于通过 Nuget 提供的最新版本，而 GAC 中的那个必须与 .NET Framework 4.5 一起安装。（.Net 在尝试使用本地项目之前使用 GAC 上的任何内容，您可以看到这一点，在调试时，转到 Debug->Windows->Modules，System.Web.Mvc.dll 来自GAC 根据其路径）

我所做的是在 GAC 中包含我的解决方案包文件夹中的 System.Web.Mvc.dll，即通过 Nuget 下载的那个。这可以通过在 VS 命令提示符上使用 gacutil 来完成（以管理员身份运行 VS Cmd）。

您可以检查相同的模块 Windows，右键单击 System.Web.Mvc.dll，然后单击符号加载信息。使用“旧”GAC dll，您会收到类似（部分）的消息

> SYMSRV： [http](http://srv.symbolsource.org/pdb/Public/System.Web.Mvc.pdb/1E540B87149F4031B9CDEACAD8D771231/System.Web.Mvc.pdb) ://srv.symbolsource.org/pdb/Public/System.Web.Mvc.pdb/1E540B87149F4031B9CDEACAD8D771231/System.Web.Mvc.pdb未找到

注意这里的子文件夹 1E540B87149F4031B9CDEACAD8D771231 （你的可能不同）

替换最近通过 Nuget 下载的 GAC dll 后，消息为

> SYMSRV：来自[http://srv.symbolsource.org/pdb/Public](http://srv.symbolsource.org/pdb/Public)的 System.Web.Mvc.pdb ：336067 字节
> 
> [http://srv.symbolsource.org/pdb/Public](http://srv.symbolsource.org/pdb/Public)：从符号服务器下载的符号。
> 
> C:\Users\\AppData\Local\Temp\SymbolCache\System.Web.Mvc.pdb\68B2330E48624B6C9DE05BED1C8C320F1\System.Web.Mvc.pdb：符号已加载。

请注意子文件夹 68B2330E48624B6C9DE05BED1C8C320F1，这是在 symbolsource.org 中搜索的正确找到的。

希望这可以帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-04T10:41:39.937

让我从 ReSharper 提供一个方便的对话框开始，以便随时单步执行代码：

![在此处输入图像描述](../Images/349f80899670fa688a404a7b957d8854.png)

因此，如果您深入查看源代码，您会看到以下代码屏幕：

![在此处输入图像描述](../Images/83ae7b8f69abb44dc66cfec48c7b5de2.png)

但我开始好奇要手动完成这个。我从正确的 pdb 配置开始：

![在此处输入图像描述](../Images/a6f5ea2ba34669e357e20349f7489e7c.png)

之后我收到以下错误：

![在此处输入图像描述](../Images/54e5d85bb185d12fe302f5407bebd046.png)

接下来我将其复制`C:\Users\Andrew\AppData\Local\Temp\SymbolCache\MicrosoftPublicSymbols\System.Web.pdb\CA49C4332DE847FA967F58AFF370B70E1\System.Web.pdb`到`C:\Users\Andrew\AppData\Local\Temp\SymbolCache\System.Web.pdb`（以匹配查找路径）。之后我遇到了这个：

![在此处输入图像描述](../Images/5c6f14ea928d6a5d24625eea4041e841.png)

事实证明，不匹配的构建只适用于浏览源代码，而不是调试。（当前机器有 VS2012 RC，因此 MVC 库不是 RTM）。如果它们匹配，您将成为来源。

我仍然不知道为什么查找路径不适应符号配置。希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T19:34:18.097

这里有一些相关信息：[http](http://aspnetwebstack.codeplex.com/discussions/399312) ://aspnetwebstack.codeplex.com/discussions/399312 在这里：[使用 Symbolserver 调试 ASP.NET MVC4 的夜间构建](https://stackoverflow.com/questions/12333706/debug-into-nightly-build-of-asp-net-mvc4-using-symbolserver)

# jquery - fb.ui apprequests 给我错误代码 2

> ID：13050400
> 
> 赞同：4
> 
> 时间：2012-10-24T13:34:33.550
> 
> 标签：jquery, facebook, api, sdk

所以我有一个使用 facebook javascript SDK 的应用程序（这不是画布应用程序，它是独立的，只是使用 fb api 发送一些邀请）我目前正在通过 localhost 运行它，它允许人们授权应用程序并在jQuery onclick 处理程序它向登录的 fb 用户显示以下函数。

```
function sendRequestViaMultiFriendSelector() {
  FB.ui({
        method: 'apprequests',
        show_error: true,
        title: 'Title here',
        message: 'I\'ve sent you a message'
  }, function(result){
        alert(result);
  });
} 
```

FB.ui 请求有效，出现对话框我选择一个用户，然后我收到以下错误消息：

```
API Error Code: 2
API Error Description: Service temporarily unavailable
Error Message: User can't send this request: Unknown error 
```

我目前以测试用户身份登录，该用户已与另一个测试用户成为朋友，他们都已授权该应用程序。

对于如何继续的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:04:38.977

已经有关于此的错误报告：[https ://developers.facebook.com/bugs/540196825997304](https://developers.facebook.com/bugs/540196825997304)

请去那里添加您的复制品，以便 Facebook 可以更好地调查该问题。

他们回答错误报告后，我将立即更新此答案。

# facebook - Facebook 聊天返回“未授权”

> ID：13050401
> 
> 赞同：2
> 
> 时间：2012-10-24T13:34:35.780
> 
> 标签：facebook, xmpp, chat

我正在开发一个 Facebook 聊天客户端，我正在使用 QXmpp 连接到聊天服务器。

```
QString user = ... // This is the Facebook's user id, not the user's email 
QString passwd = ...
QXmppClient *xmppClient = new QXmppClient();
xmppClient->connectToServer(user + "@chat.facebook.com", passwd); 
```

只有少数“随机”用户无法连接。检查我刚刚得到的日志：

```
vie 12\. oct 21:02:58 2012 RECEIVED <failure xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><not-authorized/></failure>
vie 12\. oct 21:03:03 2012 WARNING Authentication failure 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:05:34.770

问题是用户名大写。Facebook 允许使用大写字母的用户名，但为了使用 XMPP 连接到 Facebook Chat，用户名必须规范化为小写。例如：

```
QString user = ... // This is the Facebook's user id, not the user's email 
QString passwd = ...

QString normUser = user.toLower(); // Normalized username

QXmppClient *xmppClient = new QXmppClient();
xmppClient->connectToServer(normUser + "@chat.facebook.com", passwd); 
```

# android - 安卓 GCM 推送通知

> ID：13050407
> 
> 赞同：3
> 
> 时间：2012-10-24T13:35:09.207
> 
> 标签：android, cordova, push-notification, phonegap-plugins, android-c2dm

我已成功设置代码以在 Android 应用程序上通过 phonegap 运行 GCM。我设法保护了手机注册 ID，并能够在 PHP 脚本中使用此 ID 向应用程序发送消息。我唯一的问题是在应用程序打开时消息显示为 javascript 警报，我希望将消息发送到手机但未在顶部通知栏上显示图标。

**> 可以在 android 设备的顶部栏上显示图标

> 有谁知道 Phonegap 的 GCM 插件是否能够做到这一点？**

我有使用 C2DM-Phonegap。 [https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

请帮助我的朋友...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-07T08:50:13.770

您正在使用的库指定收到消息时需要执行的操作。你可以修改他们的代码来做你想做的事，或者推出你自己的 GCMIntentService。

请参考此链接：

[https://github.com/phonegap-build/PushPlugin](https://github.com/phonegap-build/PushPlugin)

[https://build.phonegap.com/plugins/324](https://build.phonegap.com/plugins/324)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:18:08.113

您正在使用的库指定收到消息时需要执行的操作。你可以修改他们的代码来做你想做的事，或者推出你自己的 GCMIntentService。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:13:40.123

最快的方法是将以下代码添加到 GCMIntentService.java 到 onMessage 函数中。您使用的 GCM 插件只接收 GCM 消息，但您必须自己触发通知。您还可以尝试使用 cordova 插件来获取状态栏通知。

```
 protected void onMessage(Context context, Intent intent) {
Log.d(TAG, "onMessage - context: " + context);

// Extract the payload from the message
Bundle extras = intent.getExtras();
if (extras != null) {
    String message = extras.getString("message");
    String title = extras.getString("title");

    Notification notif = new Notification(R.drawable.ic_launcher, message, System.currentTimeMillis() );
    notif.flags = Notification.FLAG_AUTO_CANCEL;
    notif.defaults |= Notification.DEFAULT_SOUND;
    notif.defaults |= Notification.DEFAULT_VIBRATE;

    Intent notificationIntent = new Intent(context, SomeActivity.class);
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

    notif.setLatestEventInfo(context, "Title of notification", message, contentIntent);
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);
    mNotificationManager.notify(1, notif); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T09:52:30.107

请检查此代码

私有静态无效生成通知（上下文上下文，字符串消息）{ **int icon = R.drawable.ic_launcher;**

```
 // here is your icon drawable instead of ic_launcher

    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);
    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context.getApplicationContext(), devicephp.class);
    // set intent so it does not start a new activity

    notificationIntent.putExtra("msg", message);
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent =
            PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification);

} 
```

# powershell - 导入-CSV GroupBy Sum

> ID：13050408
> 
> 赞同：3
> 
> 时间：2012-10-24T13:35:10.580
> 
> 标签：powershell, scripting, powershell-2.0

我一直试图从 csv 文件中获取有意义的输出。

原始输入如下所示。

```
Col1,Col2,Col3,Col4
a,2,b,z
a,2,c,x
a,1,d,y
e,1,f,s
e,2,g,t
h,1,k,r 
```

我正在尝试实现以下输出（不包括 col4）并导出到文件以使用 PowerShell 2 进行进一步报告。

```
a  5  b,c,d
e  3  f,g
h  1  k 
```

我的脚本函数中的代码是：

```
    $data = 导入-csv $filename.csv | 选择对象-属性 Col1、Col2、Col3
    $查看 | 组 Col1 | `
    选择姓名，@{  
      名称="Col2Sum";
       表达式 = {  
         [数学]::round(($_.Group | Measure-Object -Sum Col2).Sum/60,2)
       }
      } | `
    排序“Col2Sum”-desc | ft -auto -GroupBy Col | 输出文件 $file.txt

```

我被卡住的地方是如何在一行中从 Col3 生成数组并正确输出它们。

如果有人有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:58:44.823

你可以试试这个：

```
 $a = import-csv C:\temp\F.csv |Group-Object -Property col1 | `
         % {$_.name + " "  + $_.count + " " + `
         ($_.group | % {$i=0;$j=$_.count}{$i++ ; $_.col3 + ","*($j-$i -gt 0)})}
    $a

a 3 b, c, d
e 2 f, g
h 1 k 
```

接着

```
 $a = import-csv C:\temp\F.csv |Group-Object -Property col1 | `
         % {$_.name + " "  + ($_.group | %{$i=0}{$i+=$_.col2}{$i}) + " " + `
         ($_.group | % {$i=0;$j=$_.count}{$i++ ; $_.col3 + ","*($j-$i -gt 0)})}
    $a

a 5 b, c, d
e 3 f, g
h 1 k 
```

# php - 使用angular使用php和usort将多维数组变成多级列表

> ID：13050409
> 
> 赞同：1
> 
> 时间：2012-10-24T13:35:16.163
> 
> 标签：php

我已经为此工作了一段时间。我看到 php 中的多级数组并不容易。这是我的代码：

```
Array
(
[0]=array(
   "level"=>'Level1',
   "id"=>1,
   "title"=>"Home",
   "order"=>"0"
    );
[1]=array(
    "level"=>'Level1',
    "id"=>"355",
    "title"=>"About Us", 
    "order"=>"21"
  );
 [2]=array(
    "level"=>'Level1',
    "id"=>"10",
    "title"=>"Test",
    "order"=>"58"
 );
[3]=array(
    "level"=>'Level2',
    "id"=>13,
    "title"=>"Our Team",
    "order"=>"11",
    "parent_id"=>"355"
 );
  [4]=array(
    "level"=>'Level2',
    "id"=>12,
    "title"=>"The In Joke",
    "order"=>"12",
    "parent_id"=>"355"
  );
  [5]=array(
    "level"=>'Level2',
    "id"=>11,
    "title"=>"Our History",
    "order"=>"13",
    "parent_id"=>"355"
  ));
> 

   1-Home
   2-about us
   3-Our Team
   4-The In Joke
   5-Our History
   6-Test 
```

我有多级父子数组，需要根据关于结果排序不明白如何使用`usort()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:38:18.800

要使用`usort()`对数组进行排序，您需要编写自定义排序函数。因为您想查看`$array['title']`比较的值，所以您将在比较函数中使用此数组索引：

```
$array = array(
    array(
       "level"=>'Level1',
       "id"=>1,
       "title"=>"Home",
       "order"=>"0"
    ),
    // your additional multidimensional array values...
);

// function for `usort()` - $a and $b are both arrays, you can look at their values for sorting
function compare($a, $b){
    // If the values are the same, return 0
    if ($a['title'] == $b['title']) return 0;
    // if the title of $a is less than $b return -1, otherwise 1
    return ($a['title'] < $b['title']) ? -1 : 1;
}

usort($array, 'compare'); 
```

# java - 使用 JUnit 理论时会出现异常

> ID：13050412
> 
> 赞同：3
> 
> 时间：2012-10-24T13:35:26.530
> 
> 标签：java, testing, exception-handling, junit, junit4

`@Test(expected = SomeException.class)`在 JUnit 4 中，您可以使用注释声明预期的异常。但是，当使用 Theories 进行测试时，`@Theory`注释没有*预期*的属性。

测试理论时声明预期异常的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:35:26.530

我更喜欢使用[ExpectedException](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/ExpectedException.html) [规则](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TestRule.html)：

```
import org.junit.rules.ExpectedException;

<...>

@Rule
public ExpectedException thrown = ExpectedException.none();

@Theory
public void throwExceptionIfArgumentIsIllegal(Type type) throws Exception {
    assumeThat(type, equalTo(ILLEGAL));
    thrown.expect(IllegalArgumentException.class);
    //perform actions
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:51:38.663

您也可以使用普通的`assert`. 您可以在旧版本的 JUnit（4.9 之前）上使用它。

```
@Test
public void exceptionShouldIncludeAClearMessage() throws InvalidYearException {
    try {
        taxCalculator.calculateIncomeTax(50000, 2100);
        fail("calculateIncomeTax() should have thrown an exception.");
    } catch (InvalidYearException expected) {
        assertEquals(expected.getMessage(),
                     "No tax calculations available yet for the year 2100");
    }
} 
```

# opencv - SURF 描述符实现

> ID：13050414
> 
> 赞同：0
> 
> 时间：2012-10-24T13:35:28.690
> 
> 标签：opencv, implementation, surf, haar-wavelet, feature-descriptor

我想生成**SURF 描述符**（长度为 64 的向量）。
在[原始论文](http://www.vision.ee.ethz.ch/~surf/eccv06.pdf)中，这里说：

> 该区域定期分成较小的 4*4 方形子区域。对于每个子区域，我们在 5*5 规则间隔的样本点处计算 Haar 小波响应。

在**OpenCV**的帮助下，我可以获得关键点及其相关区域（通过使用`KeyPoint::size`and `angle`），但我的问题是：
1\. 如何计算 Haar 小波响应？
2\. 什么是*“在 5 x 5 规则间隔的采样点”*是什么意思？

我已经阅读了有关 Harr 小波的[wiki](http://en.wikipedia.org/wiki/Wavelet#Discrete_wavelets)和[介绍](http://cva.stanford.edu/classes/ee482a/docs/lect01_sample.pdf)，但仍然不知道如何编写代码。
我知道如何使用 OpenCV `SurfDescriptorExtractor`，但我不能使用它，因为我需要放大或缩小原始区域并获取新的描述符。

感谢您提供有关如何生成 SURF 描述符的任何提示。

# c# - 检查用户是否为组成员时，如何克服“无法解析成员的 SID”错误？

> ID：13050428
> 
> 赞同：8
> 
> 时间：2012-10-24T13:36:21.733
> 
> 标签：c#, active-directory

我们有一个过程需要检查特定用户是否是本地管理员组的成员。

检查的代码如下所示：

```
using (PrincipalContext context = new PrincipalContext(ContextType.Machine, null))
{
    UserPrincipal user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, sUserName);
    if (user != null)
    {
         SecurityIdentifier adminsGroupSID = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null);
         GroupPrincipal group = GroupPrincipal.FindByIdentity(context, IdentityType.Sid, adminsGroupSID.Value);
         if (group != null)
         {
             if (user.IsMemberOf(group))
                 return 0;
         }
    }
} 
```

当组中的帐户（例如域帐户）被删除时，我们会收到 PrincipalOperationException 和消息“枚举组成员身份时发生错误 (1332)。无法解析成员的 SID。”

有没有办法克服这个问题：a）从组中手动删除孤立的 SID b）不忽略它？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-08-17T23:22:43.037

这很大程度上基于我在[http://www.seirer.net/blog/2013/9/12/how-to-deal-with-localized-or-renamed-administrators-in-net](http://www.seirer.net/blog/2013/9/12/how-to-deal-with-localized-or-renamed-administrators-in-net)上由 Michael Seirer 撰写的发现。他试图获取本地管理员帐户的 SID，而我们只需要该组中的名称。错误“无法解析成员的 SID”的原因。是因为 Active Directory 中不再识别某些帐户 - 可能是指向已删除用户帐户的遗物。您可以按照微软所说的去做，然后删除它们，并希望您的应用程序永远不会再次崩溃（尽管它会，下次删除该管理员组中的帐户时），或者使用我稍微修改的这段代码永久解决它麦克风。

```
using System.DirectoryServices;
using System.Collections;
using System.Runtime.InteropServices;

[DllImport("advapi32", CharSet = CharSet.Auto, SetLastError = true)]
static extern bool ConvertSidToStringSid(IntPtr pSid, out string strSid);

private static string GetTextualSID(DirectoryEntry objGroup)
{
    string sSID = string.Empty;
    byte[] SID = objGroup.Properties["objectSID"].Value as byte[];
    IntPtr sidPtr = Marshal.AllocHGlobal(SID.Length);
    sSID = "";
    System.Runtime.InteropServices.Marshal.Copy(SID, 0, sidPtr, SID.Length);
    ConvertSidToStringSid((IntPtr)sidPtr, out sSID);
    System.Runtime.InteropServices.Marshal.FreeHGlobal(sidPtr);
    return sSID; 
}

public static List<string> GetLocalAdministratorsNames()
{
    List<string> admins = new List<string>();
    DirectoryEntry localMachine = new DirectoryEntry("WinNT://" + Environment.MachineName);
    string adminsSID = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null).ToString();

    string localizedAdmin = new System.Security.Principal.SecurityIdentifier(adminsSID).Translate(typeof(System.Security.Principal.NTAccount)).ToString();

    localizedAdmin = localizedAdmin.Replace(@"BUILTIN\", "");

    DirectoryEntry admGroup = localMachine.Children.Find(localizedAdmin, "group");
    object adminmembers = admGroup.Invoke("members", null);

    DirectoryEntry userGroup = localMachine.Children.Find("users", "group");
    object usermembers = userGroup.Invoke("members", null);

    //Retrieve each user name.
    foreach (object groupMember in (IEnumerable)adminmembers)
    {
        DirectoryEntry member = new DirectoryEntry(groupMember);

        string sidAsText = GetTextualSID(member);
        admins.Add(member.Name);            
    }
    return admins;
} 
```

它将返回`List<string>`本地计算机上本地管理员组的成员。`Environment.MachineName`如果您不想要本地计算机，您甚至可以更改为域中的任何计算机名称。

然后您可以迭代列表以查看它们是否在其中：

```
private static bool isAdmin(string user)
{
    //string user = @"DOMAIN\doej";
    user = user.Split(@'\')[1];

    List<string> admins = GetLocalAdministratorsNames();
    foreach (string s in admins)
    {
        if (s == user)
            return true; // admin found
    }
    return false;  // not an admin
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-09T14:04:37.833

差不多十年后，即使在 .NET 4.x 和 5.x 中，这仍然是一个问题。解决此错误的另一种方法是从根本上解构`foreach`语句背后的代码并制作自己的搜索列表。您需要获取枚举器，然后在 Try/Catch 中调用 MoveNext。我最初担心如果它抛出异常它**不会**移动到下一个，但它确实如此，所以这行得通。它不漂亮，但我已经对其进行了测试，它对我有用。

```
PrincipalContext principalContext;
GroupPrincipal groupPrincipal;
UserPrincipal userPrincipal;
bool hasItem;

// `members` is the new list that can be searched without errors.
List<Principal> members = new List<Principal>();

using (principalContext = new PrincipalContext(ContextType.Machine))
{
    SecurityIdentifier adminsGroupSID = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null);
    using (groupPrincipal = GroupPrincipal.FindByIdentity(principalContext, IdentityType.Sid, adminsGroupSID.Value))
    {
        /*
         * We will get our Enumerator. At this point, we are positioned before 
         * the current item, so we have to call MoveNext to get a valid Current
         */
        var e = groupPrincipal.Members.GetEnumerator();
        hasItem = false;

        do
        {
            try
            {
                /*
                 * Try and move next. If it failes, it will be caught by the catch
                 * and ignored. At which point, we can try and call MoveNext again
                 * and get to the next one.
                 */
                hasItem = e.MoveNext();
                if (hasItem)
                {
                    members.Add(e.Current);
                }
            }
            catch (PrincipalOperationException)
            {
                // We don't care about doing anything here--we just want to ignore the error
            }
        } while (hasItem);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T13:58:15.820

避免错误的一种方法是另辟蹊径。不要检查用户是否是组的成员，而是首先检索所有组并检查目标组的列表。缺点之一：速度较慢......

```
var groups = UserPrincipal.Current.GetAuthorizationGroups();
var found = groups.FirstOrDefault(principal => principal.Name == "Administrators");
var isMemberOfAdminGroup = found != null; 
```

感[谢阿鲁斯](https://stackoverflow.com/users/497423/arus)的帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-12T06:35:14.213

```
public static bool UserHasLocalAdminPrivledges(this UserPrincipal up)
{
   SecurityIdentifier id = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null);
   return up.GetAuthorizationGroups().Any(g => g.Sid == id)
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-24T14:53:45.657

有三种可能的解决方案（全部未经测试，对所有类型的域组使用最后一个自己）：
1）加载组并自己枚举成员
2）加载组的底层对象并使用属性[“Members”]，其中是一个 SID 列表。
3) 使用用户的 GetAuthorizationGroups() （这也将使用您的非直接组，服务帐户最终必须是“Windows 授权组”和“PreWindows 2000 兼容...”的成员）并使用组列表查找您的管理员组。

# c# - 有条件地将 CSS 类添加到 Web 网格列项

> ID：13050430
> 
> 赞同：2
> 
> 时间：2012-10-24T13:36:27.433
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, encoding

是否可以为某个 Web 网格列有条件地设置 CSS 类或将字符串编码为 html？我能够使用格式将跨度标签附加到项目：在列中，但现在我需要基于剃刀视图中的辅助函数或控制器/模型中的布尔表达式向跨度标签添加一个类。**我不想用 JS 做这个，C# 就足够了**。

这是我在视图模型中尝试的：

```
 @grid.GetHtml(
 headerStyle:"reviewGridHeader",
    columns: grid.Columns(
    ...[other columns]...
    grid.Column(columnName: "FeedBack", format: @<span>@CheckFeedBack(item.FeedBack)</span>)
)) 
```

视图模型中的辅助函数（拆分和比较字符串）：

```
 static string CheckFeedBack(string item) {
        String[] feedbacks = System.Text.RegularExpressions.Regex.Split(item, "of");

        //if feedback complete
        if((Convert.ToInt32(feedbacks[0]) == (Convert.ToInt32(feedbacks[1]))))
        {
            string newFeedback = @"<span class=""feedBackComplete"">"+ item +"</span>";
            string encodedFeedback = System.Web.HttpUtility.HtmlEncode(newFeedback);

            return encodedFeedback;
        }
        return item;
    } 
```

这是演示文稿，它在反馈完成时有条件地起作用：

![反馈栏](../Images/6694bd4f54ac720455a744a1254e44bc.png)

**更新：**在 Zach 提供返回 MvcHtmlString 的指导后，我在 WebGrid 列中使用上述辅助方法时遇到了一些问题。下面显示了正确的语法：

```
grid.Column(columnName: "FeedBack", format: (item) => CheckFeedBack(item.FeedBack), style: "webGridAlignment") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:25:45.613

您必须返回 html 而不是字符串...对于这种情况，您可以使用 MvcHtmlString 并在视图中使用 raw

```
static System.Web.Mvc.MvcHtmlString CheckFeedBack(string item) {
        String[] feedbacks = System.Text.RegularExpressions.Regex.Split(item, "of");

        //if feedback complete
        if((Convert.ToInt32(feedbacks[0]) == (Convert.ToInt32(feedbacks[1]))))
        {
            string newFeedback = @"<span class=""feedBackComplete"">"+ item +"</span>";

            return MvcHtmlString.Create(newFeedback);
        }
        return MvcHtmlString.Create(item);
    } 
```

# assembly - 显示 asm 文件的结果

> ID：13050433
> 
> 赞同：1
> 
> 时间：2012-10-24T13:36:42.263
> 
> 标签：assembly, tasm

我正在尝试在 Windows 7 64 位上使用 Tasm 组装以下程序：

```
.model small
.stack 100h
.data
a db 09H
b db 02H
.code 
start:
mov ax, @data
mov ds, ax
mov al, a
mov bl, b
add al, bl
mov ah, 4CH
int 21H
end start 
```

文件名是`prog4.asm`

我确实遵循了以下步骤：

```
tasm prog4.asm
tlink prog4.obj
prog4 
```

我可以在 EMU8086 模拟器上运行它，但是我无法在 DOSBOX 上看到命令的执行。

添加命令后如何显示寄存器值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:55:52.840

您基本上必须编写一些代码，将`al`其逐个字符地输出到屏幕上。

这可以通过按下 ax，将其除以 100，然后加上 48（ascii 表示“0”）来完成。然后将其复制到 dl 并使用 int 21/ah=2 输出它。那是100s的数字。

同样，对于 10 位和 1 位，您也需要使用模数来摆脱较高的位置。

如果您想了解所有可用的中断，请参阅[ralf brown 的中断列表](http://www.cs.cmu.edu/~ralf/files.html)，这是此类内容的真正出色参考。

# regex - 替换 abcde[Backspace][Backspace] -> abc

> ID：13050435
> 
> 赞同：2
> 
> 时间：2012-10-24T13:36:43.813
> 
> 标签：regex

我将如何构造正则表达式，以便可以执行如下替换：

*   `abcdef[Backspace][Backspace][Backspace]`->`abc`
*   `[Backspace][Backspace]`->（空字符串）

目前，我正在尝试在循环中一个接一个地替换退格键。还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:44:21.557

首先想到的是`.\[Backspace\]`，只要有匹配项，就在循环中用空字符串替换。然后`\[Backspace\]`全局替换为空字符串。

编辑：正如评论中提出的，当我们有太多退格时，答案不会很好。

作为一种解决方案，我们可以`^\[Backspace\]`在每次替换迭代之前用空字符串 替换所有内容`.\[Backspace\]`。

假设用于分组的 Perl 规则，`s/^(?:\[Backspace\])*//`就可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:11:59.947

只是为了完整起见，这里是一个使用负面后视的解决方案（您可能打算自己使用的解决方案）：

```
(^|.(?<!\[Backspace]))\[Backspace] 
```

并替换为空字符串。循环执行此操作。如果您使用的是 Java 或其他一些需要转义反斜杠的情况，请将两个反斜杠加倍。

# c++ - 给出对象的指针作为参数

> ID：13050436
> 
> 赞同：3
> 
> 时间：2012-10-24T13:36:44.217
> 
> 标签：c++, pointers, reference

假设我有

```
void func(foo & obj) 
```

我有

```
foo * object; 
```

我如何`object`成为一个论点`func`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:38:14.310

只需取消引用它：

```
func( *object ); 
```

# android - Findall / FindAllAsync 在 android 4.1 果冻豆上无法正常工作

> ID：13050438
> 
> 赞同：3
> 
> 时间：2012-10-24T13:36:45.323
> 
> 标签：android, webview

我有一个带有 webview 的小型 android 应用程序。在 android 2.2、2.3 中，我可以使用 findAll 在这个 webview 上执行搜索，效果很好，突出显示正在搜索的单词并滚动到匹配的位置。

在 android 4.0.X 中，搜索工作和滚动正常，但没有突出显示（使用 findAll）。

在 android 4.1 中，使用 findAll 或 findAllAsync 并不重要，搜索根本无法正常工作。在我的测试中，它执行搜索，但不滚动到匹配的位置，而是返回到页面顶部，这很荒谬。它甚至可以突出显示匹配，但如果不转到 webview 上的位置，从可用性的角度来看，它和无用一样好。

以下是源代码：

```
//////////////////////////////
// for android 2.2, 2.3, 4.0.x
//////////////////////////////
myContent.findAll(findBox.getText().toString());
try{
    //Can't use getMethod() in android 4.0.3 as it's a private method
    for(Method m : WebView.class.getDeclaredMethods()){
        if(m.getName().equals("setFindIsUp")){
            m.setAccessible(true);
            m.invoke(myContent, true);
            break;
        }
    }
}catch(Exception ignored){} 
```

然后，使用目标 api 16 的另一种方法：

```
/////////////////////////////
// for android 4.1
/////////////////////////////
myContent.findAllAsync(findBox.getText().toString());
try{
    //Can't use getMethod() in android 4.0.3 as it's a private method
    for(Method m : WebView.class.getDeclaredMethods()){
        if(m.getName().equals("setFindIsUp")){
            m.setAccessible(true);
            m.invoke(myContent, true);
            break;
        }
    }
}catch(Exception ignored){} 
```

关于如何在果冻豆上进行搜索的任何想法？非常感谢。

# regex - 用其他特殊字符替换非字母字符和数字

> ID：13050440
> 
> 赞同：0
> 
> 时间：2012-10-24T13:36:48.270
> 
> 标签：regex, vb.net, replace

我正在使用以下代码取出*除* **字母字符**、**数字**、**问号**、**感叹号**、**句**点、**括号**、**逗号**和**连字符**以外的任何内容：

```
MsgBox(System.Text.RegularExpressions.Regex.Replace("hello to you's! My # is (442) 523-5584\. @$%^*<>{}[]\|/?,+-=:;`~", "[^A-Za-z0-9]", "")) 
```

我想出了这个：**hellotoyousMy#is4425235584**

它应该是这样**的：你好！我的号码是 (442) 523-5584.?,**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:40:04.247

在正则表达式中添加空格和其他符号：

```
MsgBox(System.Text.RegularExpressions.Regex.Replace("hello to you's! My # is (442) 523-5584\. @$%^*<>{}[]\|/?,+-=:;`~", "[^A-Za-z0-9 \(\)\!\.,\-\?]", "")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:40:08.770

只需将所有字符添加到您的否定字符类（注意空格字符！）：

```
MsgBox(System.Text.RegularExpressions.Regex.Replace("hello to you's! My # is (442) 523-5584\. @$%^*<>{}[]\|/?,+-=:;`~", "[^A-Za-z0-9 ?!.(),#-]+", "")) 
```

（我还在你的正则表达式中添加了一个重复`+`，所以它可以一次性替换连续的不允许的字符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:40:18.287

```
Regex.Replace("your text", "[^A-Za-z0-9 ?!.(),-]+", "") 
```

它 [^A-Za-z0-9 ?!.(),-]+ 将一个接一个地抓取所有不需要的字符并将它们替换为 ""

# flash - 如何在不损失质量的情况下将文本转换为图形

> ID：13050444
> 
> 赞同：0
> 
> 时间：2012-10-24T13:36:55.577
> 
> 标签：flash, actionscript

```
 ex = new TextField();
        ex.styleSheet = styleSheet; //some custom fonts
        ex.htmlText = '<p>EX</p>';
        ex.autoSize = 'left';
        //ex.embedFonts = true;
        //var exbitmap:Bitmap;
        //exbitmap = new Bitmap( new BitmapData(ex.width,ex.height,true,0x000000));
        //exbitmap.bitmapData.draw(ex);
        var bitmapdata:BitmapData = new BitmapData(ex.width, ex.height, true, 0x00000000);
        bitmapdata.draw(ex);

        graphics.beginBitmapFill(bitmapdata);
        graphics.drawRect(0, 0, ex.width, ex.height);
        graphics.endFill(); 
```

问题是当我将文本绘制为图形时，它会失去质量，如何在不失去质量的情况下做到这一点？

![在此处输入图像描述](../Images/c31ffb02d78a9037e529eb23dbc814c6.png)

![在此处输入图像描述](../Images/03125ddd1322f754a931716255e4e099.png)

看到区别了吗？

这个第一个被转换为图像，第二个是原始的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:25:52.820

确保文本字段的坐标是整数。

```
ex.x = int(/*your formula*/);
//or
ex.x = Math.round(/*your formula*/); 
```

# jquery - 具有依赖关系的 JQuery 日期选择器

> ID：13050445
> 
> 赞同：1
> 
> 时间：2012-10-24T13:36:56.463
> 
> 标签：jquery, html

是否有任何 JQuery 预定义代码可以在一个页面中设置两个日期选择器并具有依赖性？

例如：“To date”和“From date”，其中“From date”必须大于或等于“To date”。

如果不是，那么这种情况的代码是什么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T13:39:13.580

看看 jqueryui 网站 - [http://jqueryui.com/datepicker/#date-range](http://jqueryui.com/datepicker/#date-range)

```
$(function() {
    $( "#from" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onSelect: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onSelect: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:45:34.227

```
$('.datepick').each(function(){
    $(this).datepicker();
}); 
```

任意数量的日期选择器到带有类 .datepick 的 html 元素，现在比较日期你需要检查`var date1= new date($('#dateinput').val());`大于 `var date1= new date($('#dateinput2').val());`

# postgresql - 通过表单提交更新数据库表中的单个值

> ID：13050457
> 
> 赞同：0
> 
> 时间：2012-10-24T13:37:38.037
> 
> 标签：postgresql, playframework

这是我在数据库中的表：

```
编号 | 帐户名 | 帐号 | 帐户类型 | 地址 | 电子邮件 | ifsc_code | is_default_account | 电话号码 | 用户
-----+--------------+----------------+------------ --+---------+------------------+------ -----+--------+-------------+--------- -
 201 | helloi32irn | 55265766432454 | 储蓄 | | mypal.appa99721989@gmail.com | 5545 | f | 98654567876 | 美国广播公司
 195 | 你好 | 55265766435523 | 储蓄 | | mypal.1989@gmail.com | 5545 | 吨 | 98654567876 | 轴心
 203 | 什么| 01010101010101 | 当前 | | guillaume@sample.com | 6123 | f | 09099990 | 美国广播公司
```

在视图中提交表单时，它只发布一个参数，在我的例子中是 name=“activate”，它对应于表中的“is_default_account”列。我想将“is_default_account”的值从“t”更改为“f”。例如，在表中，对于 account_name “hello”，它是“t”。我想停用它，即将它设为“f”并激活通过表单发送的任何其他

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:43:16.697

这将更新您的表格并使帐户“what”默认（假设 is_default_account 是 BOOLEAN 字段）：

```
UPDATE table
SET is_default_account = (account_name = 'what') 
```

如果表不仅仅是您列出的几行，您可能需要限制更新，如下所示：

```
UPDATE table
SET is_default_account = (account_name = 'what')
WHERE is_default_account != (account_name = 'what')
  AND <limit updates by some other criteria like user name> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:11:27.730

我认为要完成您想做的事情，您应该从表单中发送至少两个值。一个用于您要更新的帐户的 ID，另一个用于操作（在此处激活）。您也可以只发送 id 并让它切换。有很多方法可以做到这一点，但我无法确切地知道您要做什么以及您是否想要 SQL 或 Playframework 代码。如果不将您的更新限制在某处（如 id），您将无法精确控制要更新哪些特定行。如果您需要 playframework 方面的帮助，请澄清您的问题并添加更多代码，我认为您会这样做。

# php - 登录脚本中的会话问题

> ID：13050460
> 
> 赞同：0
> 
> 时间：2012-10-24T13:37:43.310
> 
> 标签：php, mysql

在此站点的帮助下，我现在的登录脚本基本上可以正常工作，但是当我尝试在受限页面上检查会话时出现问题，完整代码如下。

登录脚本本身

```
 <?php

function validateUser()
{

    session_regenerate_id (); //this is a security measure
    $_SESSION['valid'] = 1;
    $_SESSION['userid'] = $userid;
}

?>

<?php

ob_start(); // Start output buffering

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

session_start(); //must call session_start before using any $_SESSION variables
$username = $_POST['username'];
$password = $_POST['password'];
//connect to the database here

$hostname_PropSuite = "localhost";
$database_PropSuite = "propsuite";
$username_PropSuite = "root";
$password_PropSuite = "root";
$PropSuite = mysql_pconnect($hostname_PropSuite, $username_PropSuite, $password_PropSuite) or trigger_error(mysql_error(),E_USER_ERROR); 
mysql_select_db($database_PropSuite, $PropSuite);

$username = mysql_real_escape_string($username);

$query = "SELECT password, salt FROM admin_users WHERE username = '$username';";

$result = mysql_query($query) or die(mysql_error());

if(mysql_num_rows($result) < 1) //no such user exists
{
    header('Location: http://localhost/PropSuite/index.php?login=fail');

    die();
}
$userData = mysql_fetch_array($result, MYSQL_ASSOC);
$hash = hash('sha256', $userData['salt'] . hash('sha256', $password) );
if($hash != $userData['password']) //incorrect password
{
    header('Location: http://localhost/PropSuite/index.php?login=fail');

    die();
}
else
{
   validateUser(); //sets the session data for this user
}
//redirect to another page or display "login success" message
header('Location: http://localhost/PropSuite/main');
die()

//redirect to another page or display "login success" message

?> 
```

我试图限制的页面。

```
<?php

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

function isLoggedIn()
{
    if(isset($_SESSION['valid']) && $_SESSION['valid'])
        return true;
    return false;
}

//if the user has not logged in
if(!isLoggedIn())
{
    header('Location: http://localhost/PropSuite/index.php');
    die();
}
//page content follows
?> 
```

当我按下登录时会发生什么，它把我带回登录页面，所以它似乎通过了登录脚本，然后当它到达主页时，我又回到了登录页面。我很困惑.com :-(

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:44:36.663

在您尝试限制的页面中，我看不到 session_start

```
<?php 
  session_start();
  error_reporting(E_ALL & ~E_NOTICE);
  ini_set('display_errors', TRUE);
  ini_set('display_startup_errors', TRUE);
  .....
?> 
```

顺便说一下，在你的其他脚本中，你应该写这个

```
 <?php
     .....
     $username = isset($_POST['username'])?$_POST['username']:'';
     $password = isset($_POST['password'])?$_POST['password']:'';
    ...
  ?> 
```

# c# - C# Windows 8 Metro 游戏开发

> ID：13050465
> 
> 赞同：3
> 
> 时间：2012-10-24T13:37:46.900
> 
> 标签：c#, microsoft-metro

我一直在寻找用 C# 为 Windows 8 开发 Metro 风格游戏的方法。我能找到的只是解释如何用 C++ 或 JS/HTML5 构建游戏的 tuts。

我真的很想继续使用 C#，因为我真的很喜欢这种语言。围绕这个主题有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:40:53.777

我会研究[SharpDX](http://sharpdx.org/)或[MonoGame](http://monogame.codeplex.com/)，它们都支持 Windows 8 Metro 风格的应用程序。

我不确定这些天 XNA 的状态如何。

# javascript - 无法在我的翻转视图中使用鼠标滚轮滚动

> ID：13050469
> 
> 赞同：2
> 
> 时间：2012-10-24T13:38:07.363
> 
> 标签：javascript, html, windows-8, windows-runtime

我正在使用 HTML5 和 Javascript 开发 Windows 8 应用程序。我决定使用`FlipView`. 我的模板由几个`div`包含 HTML 的模板组成。

一切正常，除了一件事，我`div`包含我添加选项的 HTML `overflow: scroll`，出现滚动条，但我的问题是我无法滚动按`ScrollBar`. 无法检索鼠标滚轮事件。

用鼠标滚轮成功滚动（水平滚动）的解决方案是什么？（不用担心用手指浏览）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:33:05.927

我通过使用事件来滚动鼠标滚轮解决了这个问题。

# ios - iOS 上的推文/分享样式文本框

> ID：13050470
> 
> 赞同：1
> 
> 时间：2012-10-24T13:38:11.097
> 
> 标签：ios, facebook, cocoa-touch, twitter, share

点击 Twitter 和 Facebook 的 Tweet 或 Share 时出现的“文本框”。那些是什么做的？可以制作类似的东西吗？我正在尝试自定义它们，以便它将作为 tableView 的“评论”。我说的是这两个：

![在此处输入图像描述](../Images/78c3889beacb9c1cb8bc23a7ca79a4ba.png)

我试图让它说“评论”而不是“推文”和“Facebook”。然后是“完成”，上面写着“发送”和“发布”。知道如何/在哪里可以创建/自定义这些吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:54:39.460

这些是私有视图控制器。你不能（好吧，不应该）自定义它们——你必须自己重新实现它们。

但是，您可以使用私有方法`-recursiveDescription`来了解视图层次结构的构造方式。创建一个简单的应用程序，使用`UIActivityViewController`. 展示它，选择 Twitter 或 Facebook，然后在调试器中暂停应用程序。在控制台中键入`po [[[UIApplication sharedApplication] keyWindow] recursiveDescription]`以列出当前视图层次结构。

**编辑：**好的，我很好奇……</p>

```
 | <UIImageView: 0x75c7830; frame = (0 0; 320 568); opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0x75c7890>>
   | <UIView: 0x75c7900; frame = (0 20; 320 548); opaque = NO; autoresize = LM+W+RM+H; layer = <CALayer: 0x75c7960>>
   |    | <SLTwitterSheetCardView: 0x75b4950; frame = (-9 25; 337 188); opaque = NO; autoresize = W+H; layer = <CALayer: 0x75b4a40>>
   |    |    | <UIView: 0x75c86b0; frame = (13 0; 311 188); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x75c8710>>
   |    |    |    | <UIImageView: 0x767b680; frame = (0 3; 311 184); clipsToBounds = YES; alpha = 0.75; opaque = NO; autoresize = W+TM+H; userInteractionEnabled = NO; layer = <CALayer: 0x767e4a0>>
   |    |    |    | <UIImageView: 0x7678a50; frame = (0 0; 311 188); opaque = NO; autoresize = W+H+BM; userInteractionEnabled = NO; layer = <CALayer: 0x767b8b0>>
   |    |    |    | <UIView: 0x75c8770; frame = (0 0; 311 188); autoresize = W+H; layer = <CALayer: 0x75c87d0>>
   |    |    |    |    | <SLTwitterExpandedHitTestView: 0x767d950; frame = (6 155; 303 26); opaque = NO; autoresize = RM+TM; layer = <CALayer: 0x767da00>>
   |    |    |    |    |    | <SLTwitterExpandedHitTestImageView: 0x767ea60; baseClass = UIImageView; frame = (30 -6; 272 42); alpha = 0; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x767eb10>>
   |    |    |    |    |    | <SLTwitterExpandedHitTestButton: 0x767a4e0; baseClass = UIButton; frame = (5 5; 21 21); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x767a5a0>>
   |    |    |    |    |    |    | <UIImageView: 0x7176770; frame = (0 0; 21 21); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x719cb70>>
   |    |    |    |    |    |    | <UIButtonLabel: 0x767c680; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x767bbe0>>
   |    |    |    |    |    | <SLTwitterExpandedHitTestButton: 0x7193d10; baseClass = UIButton; frame = (120 7; 17 17); alpha = 0; opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x7193660>>
   |    |    |    |    |    |    | <UIImageView: 0x7172000; frame = (0 0; 17 17); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x719da50>>
   |    |    |    |    |    |    | <UIButtonLabel: 0x7194900; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x71949a0>>
   |    |    |    |    |    | <SLTwitterExpandedHitTestButton: 0x767d1a0; baseClass = UIButton; frame = (29 -1; 84 37); alpha = 0.8; opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x767d260>>
   |    |    |    |    |    |    | <UIButtonLabel: 0x767d580; frame = (0 9; 84 16); text = 'Add Location'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x767d620>>
   |    |    |    | <UIView: 0x7678160; frame = (0 0; 311 188); opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0x76781c0>>
   |    |    | <UIImageView: 0x7680aa0; frame = (0 -34; 337 255); opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0x7680b00>>
   |    |    | <UILabel: 0x75b4bb0; frame = (282 157; 29 29); text = '132'; clipsToBounds = YES; alpha = 0.7; opaque = NO; autoresize = LM+TM; userInteractionEnabled = NO; layer = <CALayer: 0x75b4c40>>
   |    |    | <UIView: 0x75b5da0; frame = (14 41; 309 3); opaque = NO; autoresize = W+BM; layer = <CALayer: 0x75b5e00>>
   |    |    | <UIButton: 0x75b33e0; frame = (20 7; 64 30); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x75b34a0>>
   |    |    |    | <UIImageView: 0x719c910; frame = (0 0; 64 30); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x716f230>>
   |    |    |    | <UIButtonLabel: 0x75b37d0; frame = (12 7; 40 15); text = 'Cancel'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75b3870>>
   |    |    | <UIButton: 0x75b3a60; frame = (265 7; 52 30); alpha = 0; opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x75b3b20>>
   |    |    |    | <UIImageView: 0x767dc40; frame = (0 0; 52 30); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x76890a0>>
   |    |    |    | <UIButtonLabel: 0x75b3c20; frame = (6 7; 40 15); text = 'Cancel'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75b3cc0>>
   |    |    | <UIButton: 0x75b3ef0; frame = (263 7; 54 30); opaque = NO; autoresize = LM+BM; layer = <CALayer: 0x75b3fb0>>
   |    |    |    | <UIImageView: 0x768f4f0; frame = (0 0; 54 30); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x768eb60>>
   |    |    |    | <UIButtonLabel: 0x75b40e0; frame = (12 7; 30 15); text = 'Send'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75b4180>>
   |    |    | <UILabel: 0x75c6d40; frame = (139 5; 59 32); text = 'Tweet'; clipsToBounds = YES; opaque = NO; autoresize = W+BM; userInteractionEnabled = NO; layer = <CALayer: 0x75c6a10>>
   |    |    | <UIView: 0x7191800; frame = (14 43; 311 112); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x71952a0>>
   |    |    |    | <UITextView: 0x8227400; frame = (0 0; 311 112); text = 'NSString'; opaque = NO; autoresize = W+H; gestureRecognizers = <NSArray: 0x75b6ff0>; layer = <CALayer: 0x75b6990>; contentOffset: {-0, 10}>
   |    |    |    |    | <UITextSelectionView: 0x75b6bf0; frame = (0 0; 0 0); userInteractionEnabled = NO; layer = <CALayer: 0x75b6ca0>>
   |    |    |    |    | <UIImageView: 0x75b71e0; frame = (0 105; 217 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x75b7280>>
   |    |    |    |    | <UIImageView: 0x75b7320; frame = (304 70; 7 37); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x75b73c0>>
   |    |    |    |    | <UIWebDocumentView: 0x8227800; frame = (0 0; 311 45); text = 'NSString'; opaque = NO; userInteractionEnabled = NO; gestureRecognizers = <NSArray: 0x75bc490>; layer = <UIWebLayer: 0x75bb0d0>>
   |    |    |    |    |    | <TileHostLayer: 0x75bb770> (layer)
   |    |    |    |    |    |    | <TileLayer: 0x75c7270> (layer)
   |    |    |    |    | <UITextSelectionView: 0x75c6220; frame = (0 0; 0 0); userInteractionEnabled = NO; layer = <CALayer: 0x75c62a0>>
   |    |    |    |    |    | <UIView: 0x75a09b0; frame = (75 9; 3 24); alpha = 0; userInteractionEnabled = NO; layer = <CALayer: 0x75bde40>>
   |    |    |    |    | <UIView: 0x75b5f10; frame = (-1 41; 311 3); alpha = 0; opaque = NO; autoresize = W+BM; layer = <CALayer: 0x75b5f70>>
   |    |    |    |    | <UIView: 0x8a6ebc0; frame = (0 -216; 313 1); opaque = NO; layer = <CALayer: 0x8a6e750>>
   |    |    |    |    | <UIView: 0x8a6ec50; frame = (0 -188; 313 1); opaque = NO; layer = <CALayer: 0x8a6e600>>
   |    |    |    |    | <UIView: 0x8a6e630; frame = (0 -160; 313 1); opaque = NO; layer = <CALayer: 0x8a6e690>>
   |    |    |    |    | <UIView: 0x8a6e6c0; frame = (0 -132; 313 1); opaque = NO; layer = <CALayer: 0x8a6ecd0>>
   |    |    |    |    | <UIView: 0x8a6ed00; frame = (0 -104; 313 1); opaque = NO; layer = <CALayer: 0x8a6ed60>>
   |    |    |    |    | <UIView: 0x8a6ed90; frame = (0 -76; 313 1); opaque = NO; layer = <CALayer: 0x8a6edf0>>
   |    |    |    |    | <UIView: 0x8a6ee20; frame = (0 -48; 313 1); opaque = NO; layer = <CALayer: 0x8a6ee80>>
   |    |    |    |    | <UIView: 0x8a6ef10; frame = (0 -20; 313 1); opaque = NO; layer = <CALayer: 0x8a6eeb0>>
   |    |    |    |    | <UIView: 0x8a6ef70; frame = (0 8; 313 1); opaque = NO; layer = <CALayer: 0x8a6efd0>>
   |    |    |    |    | <UIView: 0x8a6f000; frame = (0 36; 313 1); opaque = NO; layer = <CALayer: 0x8a6f060>>
   |    |    |    |    | <UIView: 0x8a6f090; frame = (0 64; 313 1); opaque = NO; layer = <CALayer: 0x8a6f0f0>>
   |    |    |    |    | <UIView: 0x8a6f120; frame = (0 92; 313 1); opaque = NO; layer = <CALayer: 0x8a6f180>>
   |    |    |    |    | <UIView: 0x8a6f1b0; frame = (0 120; 313 1); opaque = NO; layer = <CALayer: 0x8a6f210>>
   |    |    |    |    | <UIView: 0x8a6f240; frame = (0 148; 313 1); opaque = NO; layer = <CALayer: 0x8a6f2a0>>
   |    |    | <UIImageView: 0x75b5110; frame = (251 43; 79 34); alpha = 0; autoresize = LM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x75b5170>> 
```

基本上，这就是您所期望的：一堆背景图像、一个标签和按钮来伪造导航栏样式和一个大文本视图的内容。

# python - 使用结构和主管部署 Web 应用程序 - SIGHUP 导致服务器终止

> ID：13050472
> 
> 赞同：4
> 
> 时间：2012-10-24T13:38:14.230
> 
> 标签：python, deployment, fabric, supervisord

我们正在使用 supervisor 来部署一个 python web 应用程序。在部署时，Web 应用程序通过 buildout 安装在服务器上，并使用collective.recipe.supervisor 创建运行主管的脚本。此脚本在部署过程结束时由结构脚本调用。问题是，当部署脚本完成时，会向进程发送 SIGHUP 信号，这会导致主管重新启动（根据这一行：[https ://github.com/Supervisor/supervisor/blob/master/supervisor/supervisord .py#L300](https://github.com/Supervisor/supervisor/blob/master/supervisor/supervisord.py#L300)），但由于某种原因，Web应用程序在终止后没有重新启动。以下之后没有日志输出：

```
2012-10-24 15:23:51,510 WARN received SIGHUP indicating restart request
2012-10-24 15:23:51,511 INFO waiting for app-server to die
2012-10-24 15:23:54,650 INFO waiting for app-server to die
2012-10-24 15:23:57,653 INFO waiting for app-server to die
2012-10-24 15:24:00,657 INFO waiting for app-server to die
2012-10-24 15:24:01,658 WARN killing 'app-server' (28981) with SIGKILL
2012-10-24 15:24:01,659 INFO stopped: app-server (terminated by SIGKILL) 
```

所以我有两个问题。第一个是，有人知道为什么主管会在 SIGHUP 上重新启动吗？我找不到任何解释，也没有命令行选项可以关闭此行为。第二个问题是，我们如何解决我们面临的问题？我们尝试使用 nohup 启动主管，但仍然收到 SIGHUP。奇怪的是，当我登录服务器、手动启动主管并注销时，这不会发生。

这是 buildout 生成的主管脚本：

```
#!/usr/bin/python2.6

import sys
sys.path[0:0] = [
'/home/username/.buildout/eggs/supervisor-3.0b1-py2.6.egg',
'/home/username/.buildout/eggs/meld3-0.6.9-py2.6.egg',
'/home/username/.buildout/eggs/distribute-0.6.30-py2.6.egg',
]

import sys; sys.argv.extend(["-c","/home/username/app_directory/parts/supervisor/supervisord.conf"])

import supervisor.supervisord

if __name__ == '__main__':
sys.exit(supervisor.supervisord.main()) 
```

这是主管的配置文件，也是由 buildout 生成的：

```
[supervisord]
childlogdir = /home/username/app_directory/var/log
logfile = /home/username/app_directory/var/log/supervisord.log
logfile_maxbytes = 50MB
logfile_backups = 10
loglevel = info
pidfile = /home/username/app_directory/var/supervisord.pid
umask = 022
nodaemon = false
nocleanup = false

[unix_http_server]
file = /home/username/app_directory/supervisor.sock
username = username
password = apasswd
chmod = 0700

[supervisorctl]
serverurl = unix:///home/username/app_directory/supervisor.sock
username = username
password = apasswd

[rpcinterface:supervisor]
supervisor.rpcinterface_factory=supervisor.rpcinterface:make_main_rpcinterface

[program:app-server]
command = /home/username/app_directory/bin/gunicorn --bind 0.0.0.0:5000 app:wsgi
process_name = app-server
directory = /home/username/app_directory/bin
priority = 50
redirect_stderr = false
directory = /home/username/app_directory 
```

在真正理解问题之前，我们不想安装补丁版本的主管，因此任何信息都将受到高度赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:35:09.930

You might have run into this bug: [https://github.com/Supervisor/supervisor/issues/121](https://github.com/Supervisor/supervisor/issues/121)

The workaround would be to downgrade supervisord until that is fixed in a released version.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:55:04.107

重新启动或重新加载`SIGHUP`是 linux 系统编程中的常见做法。问题是为什么你`SIGHUP`在部署结束后得到。由于 supervisor 正确地守护了自己（因为你可以启动它并注销它会工作），reload 信号可能会通过构建 bot 发送给 supervisor，表明 webapp 需要重新启动，因为代码已经改变。

因此主管启动应用程序关闭，以便使用新代码启动应用程序。但是应用程序不会在给定的超时时间内停止，并且主管决定该应用程序挂起并使用`SIGKILL`.

要解决问题，您需要教应用程序在主管要求时关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T23:32:37.117

supervisord 文档明确指出，将 SIGHUP 发送到 supervisord 进程将“停止所有进程，从它找到的第一个配置文件重新加载配置，然后重新启动所有进程”。

参考 - [http://supervisord.org/running.html#signal-handlers](http://supervisord.org/running.html#signal-handlers)

也许您的流程行为不端；看起来主管多次尝试很好地关闭它，但后来决定它需要一个硬杀：

```
process.py:560
# kill processes which are taking too long to stop with a final
# sigkill.  if this doesn't kill it, the process will be stuck
# in the STOPPING state forever.
self.config.options.logger.warn(
    killing %r (%s) with SIGKILL' % (self.config.name, self.pid))
self.kill(signal.SIGKILL) 
```

也许杀死电话失败了？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T13:48:56.933

遇到完全相同的问题，降级到 3.0a10 解决了它。

# css - 使用 rtl 和 ltr 的 compass 最小化重复 css 的最佳实践

> ID：13050474
> 
> 赞同：3
> 
> 时间：2012-10-24T13:38:22.520
> 
> 标签：css, compass-sass, right-to-left, susy-compass

当您的布局同时适用于 rtl 和 ltr 语言时，compass/sass 有什么方法可以帮助减少重复的 css 代码的数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:59:50.633

[Bi-App-Sass](http://anasnakawa.github.com/bi-app-sass/)似乎完全符合我的要求：

> 通常在为双向站点/应用程序编写样式表时，ltr 和 rtl 样式表大部分看起来都是一样的，除了与方向相关的属性（float、text-align、padding、margin ..etc），所以当你写一个浮点数时：留在一些 ltr 样式表中，您必须再次将其写为 float: right for the rtl one
> 
> 使用 bi-app-sass 时，您所要做的就是为那些与方向相关的属性使用预定义的 mixins 编写一次样式表，并且一旦您编译了样式表，您就会为您的双向应用准备好两个样式表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:32:56.743

您可以利用 Sass 3.2 的 @content 块功能编写一个 mixin。

像这样：

```
@mixin rtl {
    [dir="rtl"] & {
        @content;
    }
}

.module {
    float: left;
    margin-left: 2em;    

    // Change directions and reverse the margin
    @include rtl {
        float: right;
        margin-left: 0;
        margin-right: 2em;
    }
} 
```

# iphone - 触摸按钮时显示提示

> ID：13050477
> 
> 赞同：0
> 
> 时间：2012-10-24T13:38:28.567
> 
> 标签：iphone, ios

当用户触摸 iPhone 本机应用程序中的按钮时，我想向用户显示一些提示，就像 Web 应用程序中的工具提示一样。

我有大量应该与信息按钮相关联的 TextField，以让用户知道有关在该 TextField 中捕获的数据的详细描述。

任何人都可以发布步骤来实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:21:37.860

同意贾斯汀，但如果你真的必须：

1.  向在 Touch Down 事件上启动的 UIButton 添加一个动作，例如`UIButton * button = [[UIButton alloc] init]; [button addTarget:self action:@selector(doSomething:) forControlEvents:UIControlEventTouchDown];`

2.  将“doSomething”操作方法定义为显示锚定到按钮位置的自定义“工具提示”视图。被触摸的`UIButton`将被传递给 action 方法，您可以从中访问它的位置，从而知道将工具提示锚定在哪里。

如果这一切听起来很费力，请查看“ [Is it possible to show a tooltip in an iOS app?](https://stackoverflow.com/questions/9731371/is-it-possible-to-show-a-tooltip-in-an-ios-app) ”，它链接到 CMPopTipView ( [https://github.com/chrismiles/CMPopTipView#readme](https://github.com/chrismiles/CMPopTipView#readme) )，这是一个有用的包全都是你的。不过我自己没用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:42:44.787

我不确定如何实现这一点，但对于移动应用程序来说，这听起来像是一个糟糕的用户界面创意。

我这么说是因为经典应用程序中的工具提示通常发生在鼠标悬停时。移动界面没有等效的手势。当你触摸一个按钮时，就像点击一样。

如果您查看大多数需要向用户解释某些内容的移动应用程序，通常是通过在应用程序加载时显示的视觉元素来完成的（它们会指向不同的按钮，解释它们的用途，然后在第一次使用该按钮）。

# iis - 如何在传输到存储之前过滤 Azure 中的 IIS 日志？

> ID：13050482
> 
> 赞同：1
> 
> 时间：2012-10-24T13:38:36.403
> 
> 标签：iis, azure

首先我想过滤 IIS 日志，在本地机器上，我可以`applicationHost.config`像这样编辑我的文件：

```
 <logFile logExtFileFlags="Date, Time, ClientIP, UserName, ServerIP, Method, UriStem, UriQuery, HttpStatus, Win32Status, BytesSent, TimeTaken, ServerPort, UserAgent, Referer, ProtocolVersion, Host, HttpSubStatus" /> 
```

但在 Azure 中，我怎么能做到这一点？

第二个我用

```
config.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(10); 
```

要转移，我想知道我可以先编辑这个文件（删除一些无用的日志），然后转移到 blob 吗？任何答案将不胜感激。谢谢

更新：使用角色启动脚本可以编辑 applicationHost.config，这将帮助我完全控制 IIS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:14:11.590

在将日志传输到 Azure Blob 存储之前，您无法编辑文件 -[传输过程被烘焙到 WAD](https://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/#step3)中。

最好的办法是在从 Azure Blob 存储本地下载日志后，使用[Azure 角色启动脚本](http://blogs.msdn.com/b/avkashchauhan/archive/2011/03/17/using-startup-task-in-windows-azure-detailed-summary.aspx)来选择希望 IIS 记录或筛选日志的正确字段。

> %windir%\system32\inetsrv\appcmd set config -section:sites -siteDefaults.logfile.logExtFileFlags:Date,Time,ClientIP,UserName,SiteName,ComputerName,ServerIP,Method,UriStem

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T08:22:54.817

您可能需要查看以下链接：http: [//blogs.msdn.com/b/sriharsha/archive/2012/10/26/how-to-transfer-iis-logs-to-storage-account-in-a -custom-format.aspx](http://blogs.msdn.com/b/sriharsha/archive/2012/10/26/how-to-transfer-iis-logs-to-storage-account-in-a-custom-format.aspx)

# ruby-on-rails - 按钮提交 rails form 两次

> ID：13050484
> 
> 赞同：1
> 
> 时间：2012-10-24T13:38:52.357
> 
> 标签：ruby-on-rails, jquery, ruby-on-rails-3.2

使用导轨代码：

```
= button_to "-", availability_time_span_path(ts) ,:method  =>  :delete, :remote  =>  true 
```

我生成 html 表单，应该通过 ajax 发布：

```
<form action="/availability_time_spans/175" class="button_to" data-remote="true" method="post">
  <div>
    <input name="_method" type="hidden" value="delete">
    <input type="submit" value="-">           
    <input name="authenticity_token" type="hidden" value="n962qRxizeXeoEwWYv2AlMfT4nKxxp9ITUxm5wp1nZo=">
  </div>
</form> 
```

当我单击提交按钮时，它会发布两次。一次为：来自 jquery.js:8417 的 text/javascript，第二次为：来自 Other 的 text/html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:52:59.377

# 解决了

问题是我之前使用 ajax 注入代码，但渲染器响应布局，所以整个 jquery 被第二次初始化。

```
respond_with @ra 
```

如果我在没有布局的情况下呈现对 ajax 调用的响应，那就没问题了。

```
respond_with @ra, :layout => false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:18:15.410

这可能有几个原因

1.  您可能在浏览器中缓存了 Javascript。尝试清除缓存或在其他浏览器中打开页面。
2.  您可能正在提供预编译的资产。确保您`config.serve_static_assets = false`的配置文件中有。

# javascript - extjs 将项目添加到单选按钮

> ID：13050485
> 
> 赞同：0
> 
> 时间：2012-10-24T13:38:54.293
> 
> 标签：javascript, extjs, radio-button, extjs3

我想将项目添加到单选按钮，
但文档似乎没有单选按钮的项目配置。
有没有办法实现下面的代码？

```
var rb = new Ext.form.Radio({

 boxLabel: 'Parent',
 items: [{
   title: 'child1'
}]

}); 
```

# database - 将 Amazon RDS 与托管在其他托管托管服务（不是亚马逊）上的应用程序一起使用是否有意义

> ID：13050487
> 
> 赞同：0
> 
> 时间：2012-10-24T13:39:00.610
> 
> 标签：database, amazon-web-services, hosting, managed, rds

我正在开发一个移动应用程序，现在我想要将我的所有后端服务器代码放到线上以用于生产版本（我实际上想发布我的应用程序）。后端由两部分组成：

*   MySQL 数据库
*   用于应用程序访问的实际 PHP 文件。

在寻找一种流行、高度可扩展且经过验证的服务时，我遇到了 Amazon Web Services。现在，虽然 RDS 似乎非常直接地用于数据库部分，但 EC2 对我来说太复杂了，我决定使用托管解决方案，这使它成为问题。

鉴于简单的 PHP 页面可以随时轻松地移动到任何服务（不像在没有停机的情况下更难移动的数据库），我决定暂时为 PHP 页面使用更便宜的解决方案。

我的问题是：将 Amazon RDS 与托管在其他托管服务（rackspace、azure、godaddy 等）上的应用程序一起使用是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:45:03.433

虽然这在技术上是可行的，但通常是否可以这样做取决于您的应用程序。请记住，RDS 实例和您的服务器之间的通信会有额外的延迟 - 这将发生在您执行的每个数据库请求中。`ping`例如，您可以使用或等简单工具检查网络延迟`traceroute`。通常，您正在为数据库查询寻找尽可能低的延迟。

但是，如果您的应用程序几乎不从数据库中读取任何内容，那么这可能会起作用。如果没有，我强烈建议不要这样做。在这种情况下，您要么必须在托管服务器上安装 MySQL 数据库，要么开始使用 EC2。

# c# - 从 xml 到带有不规则 xml 的 c# 的信息

> ID：13050493
> 
> 赞同：2
> 
> 时间：2012-10-24T13:39:14.603
> 
> 标签：c#, xml, arrays, xmlreader

我需要从 C# 中的 XML 文件中获取信息。

这是来自 XML 的一些片段。

```
<Surface id="su-62" surfaceType="InteriorWall">
    <Name>S-3-7-I-W-62</Name>
    <AdjacentSpaceId spaceIdRef="sp-3-TUIN">
    </AdjacentSpaceId>
    <AdjacentSpaceId spaceIdRef="sp-7-huizen">
    </AdjacentSpaceId>
    <CADObjectId>Basic Wall: _omgevingsmuur [184610]</CADObjectId>
</Surface>
...
<Surface id="su-63" surfaceType="ExteriorWall">
    <Name>N-4-E-W-63</Name>
    <AdjacentSpaceId spaceIdRef="sp-4-onthaal">
    </AdjacentSpaceId>
    <Opening id="su-63-op-1" openingType="NonSlidingDoor">
    </Opening>
    <CADObjectId>Basic Wall: _detentiemuur [193431]</CADObjectId>
</Surface>  
...
<Surface id="su-282" surfaceType="Shade">
    <Name>X-S-282</Name>
    <CADObjectId>Basic Roof: Generic - 400mm [190976]</CADObjectId>
</Surface> 
```

如您所见，有些表面没有其他表面的所有信息。我必须知道哪些表面与哪个空间相邻，以及是否有开口。

（最终目标是制作一个 2d 阵列，您可以在其中看到哪个 SPACE 与哪个 SPACE 相邻，另一个阵列可以查看是否有连接的开口。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:30:25.327

假设您拥有 .NET 3.5 或更高版本，那么这对于[LINQ2XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)来说是一个很好的用途。

您可以编写一个查询，该查询将获取相关区域并确定哪些空间彼此相邻。

```
// Load your XML File into an XDocument object
var xDoc = XDocument.Load(xmlPath);

// this is your query, in the end result with my a Dictionary with the Surface 
//  Id attribute as the key and the AdjacentSpaceId as the value
var result = (from x in xDoc.Descendants("AdjacentSpaceId")
              select new
              {
                  SurfaceId = (String)x.Parent.Attribute("id"),
                  SurfaceName = (String)x.Parent.Element("Name"),
                  AdjacentSpace = (String)x
              }).GroupBy(sp => sp.SurfaceId)
                .ToDictionary(grp => grp.Key,
                              grp => grp.Select(value => value.AdjacentSpace)); 
```

如果您不熟悉任何 LINQ 变体，我将尝试更详细地解释该查询。包含查询结果的本地字段被称为`results`. 该`var`类型是另一个 .NET 3.5 添加的内容，它告诉编译器在表达式的右侧识别类型。在这种情况下，`result`将是一个`Dictionary<String, IEnumerable<String>>`.

在查询的第一行：

```
from x in xDoc.Descendants("AdjacentSpaceId") 
```

您基本上是在告诉 LINQ 遍历名为`AdjacentSpaceId`. 这些节点的位置或父节点的名称无关紧要。由于这个原因，LINQ 中的`Descendants()`方法可能非常强大，因为这意味着您不需要知道特定节点的确切 XML 路径来选择它，您只需要名称（请参阅最后的注释）

查询的下一行准确定义了您希望从查询中返回的内容：

```
 select new
  {
      SurfaceId = (String)x.Parent.Attribute("id"),
      SurfaceName = (String)x.Parent.Element("Name"),
      AdjacentSpace = (String)x
  }) 
```

所有使用这种语法的 LINQ 查询都必须有一个`select`语句（还有一种方法语法可以代替或另外使用，它也不需要 select，但我认为这种语法更容易学习）。

在 select 子句中，您基本上是在定义一个新的[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)，它具有 3 个属性：`SurfaceId`、`SurfaceName`和`AdjacentSpace`。我将解释其中一项作业，它应该让你理解所有这些：

```
SurfaceId = (String)x.Parent.Attribute("id") 
```

在此行中，`x`指的是您迭代所有`AdjacentSpaceId`节点的 LINQ 查询的初始行，因此`x`类型为`XElement`.

的`Parent`属性`x`将选择父节点，在本例中为`Surface`。（注意：如果您的 XML 中的根节点恰好被调用`AdjacentSpaceId`，那么这一行将引发异常，因为根节点的父节点将为空，但似乎是一个安全的假设，它不会成为问题在这种情况下）。上的`Parent`属性`XElement`也将是另一个`XElement`。

下一部分是 的`Attribute`方法`XElement`，您正在选择节点的第一个属性，称为`id`。

因此，您正在`id`为每个节点选择所有父节点的属性`AdjacentSpaceId`。

最后，我将其转换为字符串。有一个`Value`可以代替使用的属性，但我个人的偏好是强制转换为字符串，因为如果`Attribute("id")`方法失败（如果没有名为“id”的属性可能会发生这种情况），调用该`Value`属性将引发异常，而强制转换在这些情况下，字符串只会返回 null 。

此 select 子句的其他部分几乎相同。

该查询的其余部分实际上是单独的查询。我只是把它们拴在一起，但它们很容易被拆开并自己穿上。

下一段：

```
GroupBy(sp => sp.SurfaceId) 
```

`SurfaceId`正在按属性对 LINQ 查询的结果进行分组。这是一个关键步骤，因为听起来您想知道每个表面与空间相邻的位置，这将有效地将所有相邻空间按表面组合在一起。

如果您不熟悉，`sp => sp.SurfaceId`这是一个用于快速轻松地创建匿名函数或委托的[Lambda 表达式。](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

最后一部分将把你的分组结果转换成更有用的东西，通常是 a `Dictionary<>`，或者在这种情况下是 a`Dictionary<String, IEnumerable<String>>`

```
ToDictionary(grp => grp.Key,
             grp => grp.Select(value => value.AdjacentSpace)); 
```

只是关于 Linq-to-Xml 对象的扩展方法的一个侧面说明`Descendants()`，虽然正如我上面提到的它可能非常有用，但它也可能非常危险。当您在同一个 XML 中有多个具有相同名称但用途不同的节点或在树的不同父级中时，`Descendants()`将返回 ALL 对象。如果你只想返回*一些*匹配特定名称的节点，你需要先使用`Element()`or`Elements()`扩展方法过滤它，然后选择合适的父节点，然后你可以安全地调用`Descendants()`.

# java - List 上的泛型类型兼容性错误 T 是一个接口

> ID：13050494
> 
> 赞同：2
> 
> 时间：2012-10-24T13:39:15.537
> 
> 标签：java

我有这个java代码：

```
tgia = new ThumbsGalleryAdapter(this, profilePositionsOverlay.items); 
```

我得到这个错误：

> 构造函数 ThumbsGalleryAdapter(SharePositionMapActivity, List) 未定义 SharePositionMapActivity.java /com.shopzeus.android.majorforms.activity.MainActivity/src/com/shopzeus/android/majorforms/activity line 114 Java 问题

的构造函数`ThumbsGalleryAdapter`是：

```
public ThumbsGalleryAdapter(Activity aActivity, List<ThumbsGalleryItem> aItems) 
```

类型`profilePositionsOverlay.items`：

```
List<SharedPositionMapItem> 
```

该名称`ThumbsGalleryItem`指的是一个接口：

```
public interface ThumbsGalleryItem {
    public String getTitle();
    public String getRemotePath();
} 
```

最后，SharedPositionMapItem 是一个实现 ThumbsGalleryItem 的类：

```
private static class SharedPositionMapItem extends OverlayItem implements ThumbsGalleryItem 
```

当然，问题是：为什么`List<SharedPositionMapItem>`类型不兼容`List<ThumbsGalleryItem>`？因为`SharedPositionMapItem implements ThumbsGalleryItem`，我希望它们是兼容的。解决办法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:40:57.583

```
public ThumbsGalleryAdapter(Activity aActivity, List<? extends ThumbsGalleryItem> aItems) 
```

有关更多详细信息，请参阅： [http](http://codeidol.com/java/javagenerics/Subtyping-and-Wildcards/The-Get-and-Put-Principle/) ://codeidol.com/java/javagenerics/Subtyping-and-Wildcards/The-Get-and-Put-Principle/ 以及 [get-put 原理的解释](https://stackoverflow.com/questions/1292109/generics-get-and-put-rule)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T13:41:12.487

泛型是`invarant`自然的，这意味着它`List<Integer>`不是`List<Object>`

您需要的是**任何类型的 ThumbsGalleryItem 列表**，您可以像下面这样声明

```
 List<? Extends ThumbsGalleryItem> 
```

您可以阅读有关[通配符的更多信息](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)

# sql - 根据开始和结束日期时间字段选择记录

> ID：13050499
> 
> 赞同：0
> 
> 时间：2012-10-24T13:39:26.917
> 
> 标签：sql, delphi, delphi-2010

我正在使用 delphi 2010 和 Firebird（本地）进行测试，但最终将针对 MS Sql Server 或 Oracle 运行我的应用程序。

如果我有日期时间字段（开始时间和结束时间），并且我想选择过去 30 天的所有记录，或者一系列日期，我该怎么做，考虑到上面提到的三个数据库（firebird、sql server、甲骨文）

示例日期时间字段如下所示：10/15/2012 9:20:49 AM

以下是一个示例 sql 语句，我想在其中添加一个额外的 where 子句：

```
 SQL.Text:= 
      'SELECT J.id, MIN(p.start_Time) as startTime, MAX(p.end_Time) as endTime, ' 
      +  'SUM(p.duration) as TotalDuration ' 
      + 'FROM phases p ' 
      + 'JOIN jobs j ON j.id = p.jobs_Id ' 
      + 'WHERE j.id=:jobId ' 
      + 'GROUP BY j.id'; 
```

1.  如何从开始时间或结束时间在过去 30 天内的阶段中选择所有记录？

2.  如何从开始时间或结束时间在某个日期范围内的阶段中选择所有记录（例如，我正在使用参数：beginDateRange & :endDateRange）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:17:32.710

如果您的列（start_time 和 end_time）被声明为相应 DB 的适当日期类型，您应该能够简单地使用 AsDateTime 函数设置参数。

```
Query1.ParamByName('start_time').AsDateTime := Date-30
Query1.ParamByName('end_time').AsDateTime := Date; 
```

这应该适用于不同的数据库——例如，如果它们在 Firebird 中声明为时间戳，在 Oracle 中声明为日期。根据您构建查询的方式，您可以使用相同的 SQL 语句，并根据结果集的要求设置 start_time 和 end_times。根据您实际要检索的内容，以下内容应根据 start_time 返回最近 30 天的记录。

例如：

```
SQL.Text:= 
      'SELECT J.id, MIN(p.start_Time) as startTime, MAX(p.end_Time) as endTime, ' 
      +  'SUM(p.duration) as TotalDuration ' 
      + 'FROM phases p ' 
      + 'JOIN jobs j ON j.id = p.jobs_Id ' 
      + 'WHERE j.id=:jobId '
      + '  and Trunc(p.start_time) >= :beginDateRange and Trunc(p.start_time) <= :endDateRange '
      + 'GROUP BY j.id';
ParamByName('beginDateRange').AsDateTime := Date - 30;
ParamByName('endDateRange').AsDateTime := Date; 
```

Firebird 和 Oracle 将处理*between*语法，但不确定 SQL Server（但可能会处理）。在这种情况下，您可以将*and*子句更改为：

```
and Trunc(p.start_time) between :beginDateRange and :endDateRange 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:56:25.363

确保数据库是根据日期和时间排序的，然后你可以运行一个循环来找到日期超过 31 的第一个条目。然后你知道你可以从那个字段索引号向上循环....切掉第一个循环使用 adotable。当它检索所有数据时，在while循环中添加sql。

虽然不可爱。BOF 做

........还有很多其他方法和更好的方法，特别是如果使用 oracle。只考虑这背后的概念和逻辑，因为 adotable 不会

# vba - 没有命名范围的嵌套下拉列表

> ID：13050506
> 
> 赞同：0
> 
> 时间：2012-10-24T13:39:59.783
> 
> 标签：vba, drop-down-menu, excel

我是新手，感谢您的耐心等待。我在一张纸上有一长串案例编号和相关名称，每个案例编号有几个名称。在工作簿的各个位置，我希望用户从下拉列表中选择一个案例编号（可以使用动态命名范围），然后在另一个下拉列表中选择一个关联名称。

因为案例编号太多，而且它们会发生变化，所以我不能在第二个下拉列表中使用命名范围。有没有一种 VBA 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:03:55.747

假设您的案例编号位于 Sheet2 的第 1 行，其关联名称位于每个案例编号下方，您的案例编号下拉列表位于单元格中`B1`，并且您的关联名称下拉列表位于单元格中`B2`（定义为列表 ListNames 的数据验证），请使用以下工作表更新数据验证的宏`B2`

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim rgNames As Range, rgFoundCase As Range

If Not Intersect(Target, [B1]) Is Nothing Then

    'turn off updates to speed up code execution
    With Application
        .ScreenUpdating = False
        .EnableEvents = False
        .Calculation = xlCalculationManual
        .DisplayAlerts = False
    End With

    Set rgFoundCase = Sheets("Sheet2").Rows(1).Find(What:=[B1], After:=Sheets("Sheet2").Cells(1, 1), LookIn:=xlFormulas, LookAt _
        :=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
        False, SearchFormat:=False)

    Set rgNames = rgFoundCase.Offset(1).Resize(rgFoundCase.End(xlDown).Row - 1)

    ActiveWorkbook.Names.Add Name:="ListNames", RefersTo:=rgNames

    With Application
        .ScreenUpdating = True
        .EnableEvents = True
        .Calculation = xlCalculationAutomatic
        .DisplayAlerts = True
    End With

End If

End Sub 
```

# java - 使用 Hibernate 映射整数列表

> ID：13050507
> 
> 赞同：2
> 
> 时间：2012-10-24T13:40:02.130
> 
> 标签：java, hibernate

如何在 Hibernate 中映射整数列表？

像这样的东西：

```
@Entity 
class A{
    List<Integer> p;
    @OneToMany
    getP(...){..};
    setP(...){..};
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T13:45:03.973

使用@ElementCollection 映射。查看[文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#d5e5405)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:48:16.523

您可以使用元素集合而不是创建单独的实体，这将具有真正的组合。参考[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/ElementCollection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:43:07.247

创建一个包含整数作为字段值的新实体，然后映射到该实体的列表而不是整数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T13:43:29.077

您将必须发明一个新表来存储这些 ID 并将该表链接为常规 @OneToMany 关系。

```
@Entity 
class A{
 List<MyRefTable> p;
 @OneToMany
 getP(...){..};
 setP(...){..};
}

@Entity MyRefTable {
  long myRefTableId;
  int p;
} 
```

就像与 A 实体具有 OneToMany 关系的任何其他表一样。数据库中没有“列表”结构。

塞巴斯蒂安

# php - 如果表单有效则重定向 Zend Framework

> ID：13050512
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:40:11.817
> 
> 标签：php, zend-framework

在下面的代码中，我检查表单是否有效，如果是，我希望它重定向到下一页，但是它给出了以下错误：AN ERROR OCCURRED PAGE NOT FOUND EXCEPTION INFORMATION: Message: Invalid controller specified (undefined )

这是代码：

```
public function indexAction()
    {
        global $current_user;

        if ( is_user_logged_in() ) {
            $mapper = new Site_Model_WpTerms();
            $main_categories = $mapper->fetchTerms(0,'ptype',true);
            $sizes = $mapper->fetchTerms(0,'size',true);
            $genders = $mapper->fetchTerms(0,'gender',true);
            $seasons = $mapper->fetchTerms(0,'season',true);
            $decades = $mapper->fetchTerms(0,'decade',true);
            $colors = $mapper->fetchTerms(0,'color',true);
            $styles = $mapper->fetchTerms(0,'style',true);
            $materials = $mapper->fetchTerms(0,'material',true);
            $patterns = $mapper->fetchTerms(0,'pattern',true);
            $others = $mapper->fetchTerms(0,'other',true);
            $condition = $mapper->fetchTerms(0,'condition',true);
            $shipping = $mapper->fetchTerms(0,'shipping',true);
            $this->view->colors = $colors;
            $form = new Site_Form_Submission($main_categories,$sizes,$genders,$seasons,$decades,$colors,$styles,$materials,$patterns,$others,$condition,$shipping);
            $this->view->form = $form;
            $this->view->finished_settings = self::finishedStep('finished_settings');

            if ($this->getRequest()->isPost()) {
                if (!$form->isValid($this->getRequest()->getParams())) {
                    $form->populate($this->getRequest()->getParams());
                }else{
                    $this->_helper->redirector('getpaid');
                }
            }
        }
        else{
            $this->_redirect('http://' . $_SERVER['HTTP_HOST'] . PHOTO_GUIDE);
        }
    } 
```

我必须提到我在我的应用程序中使用模块。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:56:52.527

试试下面的代码：

```
$redirector = $this->_helper->getHelper('Redirector');

$this->_redirector->setCode(303)
    ->setExit(false)
    ->setGotoSimple("this-action", "some-controller"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:00:17.127

尝试这个`$this->_helper->redirector('action','controller','module');`

# php - 获取用户 facebook 登录状态但不希望重定向

> ID：13050515
> 
> 赞同：0
> 
> 时间：2012-10-24T13:40:18.877
> 
> 标签：php, facebook, api, curl, https

我正在构建一个使用 php facebook 库的网站。在每个页面的开头，我都会使用 $facebook->getLoginStatusUrl($params) 函数检查用户是否已登录（或尝试）。我遇到的问题是，检查该函数的唯一真正方法是让用户根据他们的状态重定向到一个页面（通过将他们引导到该函数返回的 url）。我不能使用 file_get_contents 或 cURL，因为该函数返回的 URL 使用 https。他们无论如何我可以使用服务器端方法获取该 URL 的内容吗？或者是通过重定向做到这一点的绝对唯一方法？我更希望不要将此作为客户端操作（通过 Javascript）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:51:18.240

您可以使用 facebook getUser() 函数来检查用户是否已登录并已授予您网站的权限。之后，您可以使用 getLoginUrl() 或 getLogoutUrl() 向用户显示右键：

```
$user = $facebook->getUser();    

if (!$user)
{
  $loginUrl = $facebook->getLoginUrl(array(
    'redirect_uri' => REDIRECT_URL,
    'scope' => APP_PERMS,
    'display' => 'page'
  ));

  //do something with $loginUrl, for example:
  echo '<a href="'.$loginUrl.'">Login with facebook</a>';
}
else
{
  //check that this user is still valid
  $realUser = $facebook->api('me');

... 
```

您可以在 facebook 文档中了解有关此功能的更多信息：

[https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:50:34.460

> 他们无论如何我可以使用服务器端方法获取该 URL 的内容吗？

这对您没有帮助，因为客户端用于登录 Facebook 的不是您的服务器，而是他的浏览器。

因此，必须在他们的浏览器中检查用户是否登录——这就是浏览器被重定向到 Facebook 的原因，因为这是读取 Facebook 域下设置的 cookie 的唯一方法。

> 我更希望不要将此作为客户端操作（通过 Javascript）。

由于重定向，它已经是一种客户端操作。

绝对没有办法让您的服务器单独判断用户是否在浏览器中登录 Facebook。

# r - 如何使geom_bar中的闪避与geom_errorbar中的闪避一致，geom_point

> ID：13050516
> 
> 赞同：26
> 
> 时间：2012-10-24T13:40:36.223
> 
> 标签：r, plot, ggplot2

我有一个数据集，其中在不同日期对不同组进行测量。

我想要并排的条形图表示不同组在不同日期的测量值，其中条形图组根据测量日期间隔开，误差条覆盖在它们上面。

我在使闪避`geom_bar`与闪避一致时遇到了麻烦`geom_errorbar`。

这是一段简单的代码：

```
days          = data.frame(day=c(0,1,8,15));
groups        = data.frame(group=c("A","B","C","D", "E"), means=seq(0,1,length=5));

my_data       = merge(days, groups);

my_data$mid   = exp(my_data$means+rnorm(nrow(my_data), sd=0.25));
my_data$sigma = 0.1;

png(file="bar_and_errors_example.png", height=900, width=1200);
plot(ggplot(my_data, aes(x=day, weight=mid, ymin=mid-sigma, ymax=mid+sigma, fill=group)) +
     geom_bar      (position=position_dodge(width=0.5))                                   +
     geom_errorbar (position=position_dodge(width=0.5), colour="black")                   +
     geom_point    (position=position_dodge(width=0.5), aes(y=mid, colour=group)));
dev.off(); 
```

在图中，errorsegments 出现在其栏的固定偏移量（对不起，即使 ggplot2 是主题，也不允许新手使用图）。

调整 binwidth 时`geom_bar`，偏移量不固定，每天都在变化。

请注意，这`geom_errorbar`和`geom_point`闪避一前一后。我如何才能`geom_bar`同意其他两个？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-24T15:14:55.130

对齐问题部分是由于您的条不代表您想要的数据。以下排列正确：

```
ggplot(my_data, aes(x=day, weight=mid, ymin=mid-sigma, ymax=mid+sigma, fill=group)) +
     geom_bar      (position=position_dodge(), aes(y=mid), stat="identity") +
     geom_errorbar (position=position_dodge(width=0.9), colour="black") +
     geom_point    (position=position_dodge(width=0.9), aes(y=mid, colour=group)) 
```

![在此处输入图像描述](../Images/97d2f6925825d029cdc75b3d0c82cdc6.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-03-26T12:46:19.907

这是一个老问题，但是由于我今天遇到了问题，所以我想添加以下内容：

在

```
 geom_bar(position = position_dodge(width=0.9), stat = "identity") + 
   geom_errorbar( position = position_dodge(width=0.9), colour="black") 
```

`width`-argument inside控制要`position_dodge`相互躲避的事物的躲避宽度。然而，这会产生与条一样宽的晶须，这可能是不希望的。position_dodge 之外的附加宽度参数控制胡须（和条）的宽度：

```
 geom_bar(position = position_dodge(width=0.9), stat = "identity", width=0.7) + 
   geom_errorbar( position = position_dodge(width=0.9), colour="black", width=0.3) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-27T20:05:01.013

第一个更改我根据[高级 R 样式指南](http://adv-r.had.co.nz/Style.html)重新格式化了代码。

```
days <- data.frame(day=c(0,1,8,15))

groups <- data.frame(
    group=c("A","B","C","D", "E"), 
    means=seq(0,1,length=5)
    )

my_data <- merge(days, groups)

my_data$mid <- exp(my_data$means+rnorm(nrow(my_data), sd=0.25))
my_data$sigma <- 0.1 
```

现在，当我们查看数据时，我们看到那天是一个因素，其他一切都是一样的。

```
str(my_data) 
```

为了从图中删除空白，我将天列转换为因子。在继续之前检查级别的顺序是否正确。

```
my_data$day <- as.factor(my_data$day) 
levels(my_data$day) 
```

我所做的下一个更改是在您的`aes`论点中定义 y。我相信你知道，这让 ggplot 知道在哪里寻找 y 值。然后我将位置参数更改为“闪避”并添加了`stat="identity"`参数。该`"identity"`参数告诉 ggplot 在 x 处绘制 y。`geom_errorbar`继承闪避位置，`geom_bar`因此您可以不指定它，但`geom_point`没有，因此您必须指定该值。默认闪避是`position_dodge(.9)`。

```
ggplot(data = my_data, 
 aes(x=day,
     y= mid, 
     ymin=mid-sigma, 
     ymax=mid+sigma,       
     fill=group)) +
   geom_bar(position="dodge", stat = "identity") + 
   geom_errorbar( position = position_dodge(), colour="black") +
   geom_point(position=position_dodge(.9), aes(y=mid, colour=group)) 
```

[![在此处输入图像描述](../Images/eac3344cb1579df83ed13b79bbfd6285.png)](https://i.stack.imgur.com/4fiRm.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-29T03:28:23.903

有时你`aes(x=tasks,y=val,fill=group)`输入`geom_bar`而不是`ggplot`. 这会导致问题，因为 ggplot 向前看`x`并且您通过每个组的位置指定它。

# php - 创建表

> ID：13050517
> 
> 赞同：1
> 
> 时间：2012-10-24T13:40:41.640
> 
> 标签：php, mysql

可能是一个简单的忽略，但我似乎无法用我的 PHP 脚本创建一个表。我的第一个问题是我想向现有数据库添加一个表。如何告诉服务器在哪个数据库中创建表？创建表的代码非常简单，但是在这里..

> CREATE TABLE Countr(ID INT IDENTITY(1,1) PRIMARY KEY,Page VARCHAR(50), Month INT, Always INT);

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:53:46.420

在您的 PHP 服务器中，您应该连接到您的数据库。你的代码可能是这样的：

```
mysqli_connect("sqlserver.mysite.com", "username", "password") or die("SQL Error: Cant connect to database."); 
```

那么你应该这样做：

```
mysqli_select_db("database_name") or die("SQL Error: Cant select database"); 
```

在执行任何其他 sql 语句之前选择数据库。比如创建表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:50:11.453

[http://dev.mysql.com/doc/refman/5.0/en/use.html](http://dev.mysql.com/doc/refman/5.0/en/use.html)

```
USE my_db1;
CREATE TABLE ...
USE my_db2;
CREATE TABLE ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:53:59.517

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
mysql_select_db('database_name', $link);
CREATE TABLE Countr(ID INT IDENTITY(1,1) PRIMARY KEY,Page VARCHAR(50), Month INT, Always INT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:59:06.583

尝试使用此代码在任何数据库中创建表。

```
CREATE TABLE db_name.Countr(ID INT IDENTITY(1,1) PRIMARY KEY,Page VARCHAR(50), Month INT, Always INT); 
```

注意：当前数据库用户在其他数据库中具有创建表权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T10:57:08.230

```
$sql = "CREATE TABLE wp_shifts (
    user_id bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT,
    transact_id int(64),
    hours decimal(10,2), 
    date varchar(64),
    time1 varchar(64),
    PRIMARY KEY (user_id)
)";
$results = $wpdb->query($sql); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-27T05:35:40.157

创建表 CREATE TABLE 语句用于在 MySQL 中创建表。

我们必须将 CREATE TABLE 语句添加到 mysqli_query() 函数来执行命令。

以下示例创建一个名为“Persons”的表，其中包含三列：“FirstName”、“LastName”和“Age”：

```
<?php
$con=mysqli_connect("example.com","peter","abc123","my_db");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

// Create table
$sql="CREATE TABLE Persons(FirstName CHAR(30),LastName CHAR(30),Age INT)";

// Execute query
if (mysqli_query($con,$sql))
  {
  echo "Table persons created successfully";
  }
else
  {
  echo "Error creating table: " . mysqli_error($con);
  }
?> 
```

# android - 如何在运行时隐藏选项菜单按钮

> ID：13050518
> 
> 赞同：0
> 
> 时间：2012-10-24T13:40:41.627
> 
> 标签：android, view, options-menu

在我的应用程序中，我有一个选项菜单。它有 2 个按钮。根据布尔值，我想显示/隐藏其中一个按钮。我有以下代码，但它没有隐藏按钮。我怎样才能做到这一点？

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.layout.menushowmoredetails, menu);
        return true;

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        if(displayRotaDetails.equalsIgnoreCase("false")){
            if(item.getItemId() == R.id.moredetails)
            item.setVisible(false);
            }

        switch (item.getItemId()) {

    case R.id.back:

        onBackPressed();

        return true;

    case R.id.moredetails: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:46:29.987

您必须像这样使用 onPrepareOptionMenu 方法：

```
@Override
 public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);

// add your conditions here and change 0 with the R.id.moredetails item postion.
if(displayRotaDetails.equalsIgnoreCase("false")){
menu.getItem(1).setVisible(false);
}
} 
```

# jquery - jquery cookie 每次访问都会增加？

> ID：13050523
> 
> 赞同：1
> 
> 时间：2012-10-24T13:40:55.047
> 
> 标签：jquery, jquery-cookie

我正在使用 jquery cookies 插件，以便在每次用户访问页面时增加 cookie 的值。我这样做是为了在第一次访问时显示一些东西，然后在第二次访问时显示一些不同的东西，然后什么都没有。

所以我需要确定它是用户的第一次访问，他们的第二次访问以及之后的所有访问。

```
var cookieTime = jQuery.cookie('shownDialog');
cookie_value = parseInt(cookieTime);

if (cookieTime != 'true') {         
    jQuery.cookie('shownDialog', '1', 'true', {expires: 7});
    cookie_value ++;
}

else if (cookieTime == 'true' && cookie_value > 0){
    cookie_value ++;
} 
```

每次刷新页面时，我一直使用的这段代码都会重置。而不是将值保存在 cookie 中。我不确定保留 cookie 的值并在每次刷新页面时增加它的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:07:22.060

我不认为

```
jQuery.cookie('shownDialog', '1', 'true', {expires: 7}); 
```

是有效的形式。它应该是

```
jQuery.cookie(cookiename, cookieval, extra); 
```

来源：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

如果要检查是否设置了 cookie，请检查它是否为空。

```
// Check if the cookie exists.
if (jQuery.cookie('shownDialog') == null) {
    // If the cookie doesn't exist, save the cookie with the value of 1
    jQuery.cookie('shownDialog', '1', {expires: 7});
} else {
    // If the cookie exists, take the value
    var cookie_value = jQuery.cookie('shownDialog');
    // Convert the value to an int to make sure
    cookie_value = parseInt(cookie_value);
    // Add 1 to the cookie_value
    cookie_value++;

    // Or make a pretty one liner
    // cookie_value = parseInt(jQuery.cookie('shownDialog')) + 1;

    // Save the incremented value to the cookie
    jQuery.cookie('shownDialog', cookie_value, {expires: 7});
} 
```

# javascript - Javascript 图像库

> ID：13050531
> 
> 赞同：5
> 
> 时间：2012-10-24T13:41:24.127
> 
> 标签：javascript, html, image-gallery

（我的编码经验有限）

我有一个网站的模板文件，目前该网站的图片库在新页面中打开，我希望图片库不打开其他页面/选项卡，而是包含五行的图片和一个大的主图片在同一页面内的所有行下，我想要用鼠标滚动时的主图像，它会放大图片此外，当您单击较小的附加图像（五行）时，它会将主要的较大图像更改为单击的图像并允许放大功能。

我需要在模板文件中放置哪些标签（在下面的链接中），我应该在哪里放置标签？

下面显示的是模板中的当前标签

这是网站模板文件中的图片库标签：

```
<!-- picture gallery -->
<script type="text/javascript">myThumbs = ##CST_ITEM_IMAGE_ARRAY_T##;myPix = ##CST_ITEM_IMAGE_ARRAY_M##;</script> 
```

这是模板文件的链接和我要完成的pdf

[http://sdrv.ms/UCHk8z](http://sdrv.ms/UCHk8z)

这是当前图片库现在的样子，需要更改为不打开新窗口

[http://www.ebay.com/itm/4-Behringer-B208D-Active-800-Watt-2-Way-PA-Speaker-Systems-8-Woofer-/390478326914?pt=US_Pro_Audio_Speakers_Monitors&hash=item5aea526c82](http://www.ebay.com/itm/4-Behringer-B208D-Active-800-Watt-2-Way-PA-Speaker-Systems-8-Woofer-/390478326914?pt=US_Pro_Audio_Speakers_Monitors&hash=item5aea526c82)

我不精通编程，我了解一些事情，但不知道它们是如何一起流动的，我只知道基本的链接和标签，所以谢谢大家的帮助，我非常感谢所有的回复。我一直在谷歌搜索一切都没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:53:05.107

根据我对您的问题的理解，我认为您需要 Thumbnail Gallery 之类的东西，如果是这样，请参考以下网址

[http://www.queness.com/post/3141/10-image-galleries-jquery-script-with-thumbnail-filmstrip](http://www.queness.com/post/3141/10-image-galleries-jquery-script-with-thumbnail-filmstrip)

所以我选择了一个（[http://www.robertnyman.com/picture-slides/](http://www.robertnyman.com/picture-slides/)）来用于您的目的，这样就完成了 80% 的工作，只需下载它的演示，它会很容易理解吗？在您的情况下，您可以在演示中看到 3 个链接单击您喜欢的链接并下载并使用它

所以你已经使用图片库链接下载了文件，所以你会得到一个包含画廊和 _Macosx 的 zip 文件，不用担心 Macosx。

现在进入图库文件，其中将有一个 index.html，css 和所需的 js，将它们复制到您需要的位置，如果您看到 index html，将有一个 div 包含图片滑块容器类 div，完成复制div并将其粘贴到您需要的位置....就是这样：D

注意：确保为图像、缩略图、css 和 js 提供正确的路径

希望这可以帮助

# java - JPA 和关系映射的新手问题

> ID：13050534
> 
> 赞同：0
> 
> 时间：2012-10-24T13:41:27.067
> 
> 标签：java, jpa

我正在尝试使以下类型的映射起作用

```
Table event has the following columns:
id (PK)
prodgroup
errandtype

table errandtype : errandtype

table prodgroup: prodgroup 
```

我有相应的 JPA 类

```
@Entity
@Table(name="event")
public class MyEvent {
    @Id
    int id;

    // what mapping should go here?
    Prodgroup prodgroup;

    // what mapping should go here?
    ErrandType errandtype;
} 

@Entity
public class Prodgroup {
    @Id
    private String prodgroup;
}

@Entity
public class ErrandType {
    @Id
    private String errandtype;
} 
```

好的，所以问题在代码中被标记为注释，但无论如何我都会尽量明确。

在上面的示例中，我希望将 MyEvent 类中的 Prodgroup 和 ErrandType 字段设置为相应的 Prodgroup 和 Errandtype 实例

我已经尝试过 @OneToOne 与 @joincolumns 和 mappedby 属性的关系，但我就是无法让它工作，而且我已经失去了所有逻辑方法的感觉。我对 JPA 实体映射的掌握显然很薄弱。

那么任何人都可以带来一些清晰度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:48:01.067

它应该是：

```
@Entity
@Table(name="event")
public class MyEvent {
    @Id
    int id;

    // what mapping should go here?
    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @JoinColumn(name = "prodgroup_id", insertable = true, updatable = true)
    Prodgroup prodgroup;

    // what mapping should go here?
    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @JoinColumn(name = "errandtype_id", insertable = true, updatable = true)
    ErrandType errandtype;
} 

@Entity
public class Prodgroup {
    @Id
    private String prodgroup;
}

@Entity
public class ErrandType {
    @Id
    private String errandtype;
} 
```

FetchType Eager 表示该对象将始终被加载（如果未指定，则默认为“Lazy”）。
CascadeType.ALL 意味着 mearge/persist/remove 也将对链接表进行。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:47:58.030

您的表列是各个表`event.prodgroup`的`event.errandtype`外键（prodgroup、errandtype）。所以你需要[@ManyToOne](http://en.wikibooks.org/wiki/Java_Persistence/ManyToOne)关联（因为许多事件可能共享一个prodgroup 或errantype）。

# c# - 如何使用 C# 检查文件的读取访问权限

> ID：13050535
> 
> 赞同：-2
> 
> 时间：2012-10-24T13:41:26.807
> 
> 标签：c#, windows, security

给定一个文件，我需要使用 C# 和 .NET 框架 4 列出对该文件具有读取权限的所有用户。对添加或列出任何其他权限不感兴趣。假设目录是本地目录，本地用户就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:54:53.903

我不确定是否有一种简单的方法可以获取该列表，但这里有一个想法。您可以遍历访问控制规则并检查哪些用户可以读取文件。请注意，某些规则**允许**访问，而其他规则则**拒绝**访问。这是一个起点：

```
using System.IO;
using System.Security.AccessControl;

...

FileSecurity security = File.GetAccessControl(@"C:\MyFolder\My File.txt");

AuthorizationRuleCollection acl = security.GetAccessRules(
   true, true, typeof(System.Security.Principal.NTAccount));
foreach (FileSystemAccessRule ace in acl)
{
   var user = ace.IdentityReference.Value;
   var rights = ace.FileSystemRights;
   var allowOrDeny = ace.AccessControlType;
   // ...
} 
```

检查[FileSystemAccessRule](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.filesystemaccessrule.aspx)以获取更多信息。

# sql-server - 显示来自联接查询的不同数据

> ID：13050536
> 
> 赞同：3
> 
> 时间：2012-10-24T13:41:31.200
> 
> 标签：sql-server, join, distinct, case

基本上我有2张桌子。让我们说A和B。

A 具有 id(PK)、pin、name、address 等列

```
id(PK)  pin             name    address
1        aaa-111-aaa    AAA ------
2        bbb-222-bbb    BBB ------
3        ccc-333-ccc    CCC -------- 
```

B 有 appName、apprequestTime、appAccectTime、id(FK) 等列。

```
appName apprequestTime  appAccectTime    id(FK).
LLL          2012-4-01  2012-4-01    1
NNN          2012-4-08  2012-5-01    2
QQQ          2012-4-05  2012-4-01    1
MMM          2012-4-02  2012-4-02    2
PPP          2012-5-01  2012-5-01    1 
```

B表中可以有多个id行，因为它是外键。

现在，问题是我正在尝试获取某个 apprequestTime 的一个引脚的所有记录。

我正在尝试内部连接，但由于表 B 中的 id，它显示了 pin。

```
pin         apprequestTime
aaa-111-aaa     2012-4-01
aaa-111-aaa     2012-4-05
bbb-222-bbb     2012-4-08
bbb-222-bbb     2012-4-02 
```

但我期待的结果应该是：

```
pin            apprequestTime
aaa-111-aaa    2012-4-01
               2012-4-05
bbb-222-bbb    2012-4-08
               2012-4-02 
```

任何人都可以帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:56:05.160

在 SQL Server 2005+ 中，您可以使用`row_number()`这种类型的请求：

```
;with cte as
(
  select a.pin, b.apprequestTime,
    row_number() over(partition by a.pin 
                      order by b.apprequestTime) rn
  from tablea a
  inner join tableb b
    on a.id = b.id
) 
select case when rn = 1 then pin else '' end pin, 
  apprequestTime
from cte; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/22a98/8)

或没有 CTE：

```
select case when rn = 1 then pin else '' end pin, 
  apprequestTime
from 
(
  select a.pin, b.apprequestTime,
    row_number() over(partition by a.pin 
                      order by b.apprequestTime) rn
  from tablea a
  inner join tableb b
    on a.id = b.id
) t1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/22a98/10)

# android - 某些设备上的错误

> ID：13050537
> 
> 赞同：0
> 
> 时间：2012-10-24T13:41:33.557
> 
> 标签：android

我从某些设备收到此错误报告，而在其他应用程序上运行良好！！！

```
java.lang.NullPointerException
at com.hamoosh.birdseffects.De7katGrid$1.onItemClick(De7katGrid.java:44)
at android.widget.AdapterView.performItemClick(AdapterView.java:292)
at android.widget.AbsListView.performItemClick(AbsListView.java:1359)
at android.widget.AbsListView$PerformClick.run(AbsListView.java:2988)
at android.widget.AbsListView$1.run(AbsListView.java:3783)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

源代码哪里没有错误？？

这部分代码中显示的错误行是 44

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    GridView gridView = (GridView) findViewById(R.id.grid_view);

    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            stopPlaying();
            mp = MediaPlayer.create(De7katGrid.this, mSongsIds[position]);
            mp.start();// << here is line 44 !!!
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:07:18.490

当设备不支持资源 ID 处的声音文件、不存在或已损坏时，MediaPlayer.create 返回 null。

在这种情况下，您使用的 .wav 文件可能在某些设备上不受支持。如果您是文件的采样率。它们只保证在设备 4.1+ 上受支持。以下是支持的格式列表：

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

# amazon-ec2 - 将使用 puppet 预置的 vagrant box 转换为 EC2 AMI 并将其上传到 AWS

> ID：13050541
> 
> 赞同：2
> 
> 时间：2012-10-24T13:41:44.730
> 
> 标签：amazon-ec2, amazon-web-services, puppet, vagrant

将使用 puppet 预置的 vagrant box 转换为 EC2 AMI 并将其上传到 AWS 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:22:32.707

将 Vagrant VM 转换为 AMI 将是有问题的。在这种情况下，最简单的做法是：

*   准备你的 Puppet 清单并使用 Vagrant 在本地进行测试
*   启动 EC2 实例，并使用 Puppet 配置该实例。您可以使用 cfn-init 脚本，或在实例上手动运行 Puppet
*   从此实例创建 AMI

该过程与在本地 VM 或物理硬件上运行 Puppet 完全相同，只是在配置实例后您需要创建一个 AMI。

# android - 如何使用 PhoneGap 在 Androids Navite Image Gallery 中打开图像目录？

> ID：13050543
> 
> 赞同：1
> 
> 时间：2012-10-24T13:41:46.413
> 
> 标签：android, jquery, cordova

我开发了一个应用程序，想要一个打开图片库的链接。图像在本地捆绑并包含在我的 assets/www/img 目录中。我希望它能够无缝地类似于原生图片库。这可能吗？

我尝试使用以下内容，但无法得到回复。

```
document.addEventListener("deviceready", onDeviceReady, false);

        // PhoneGap is ready
        //
        function onDeviceReady() {
            window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, fail);
        }

        function onFileSystemSuccess(fileSystem) {
            fileSystem.root.getDirectory("img/china", {create: false, exclusive: false}, getDirSuccess, fail);
        }

        function getDirSuccess(dirEntry) {
            // Get a directory reader
            var directoryReader = dirEntry.createReader();

            // Get a list of all the entries in the directory
            directoryReader.readEntries(readerSuccess,fail);
        }

        var numDirs = 0;
        var numFiles = 0;

        var readerTimeout = null, millisecondsBetweenReadSuccess = 100;

        function readerSuccess(entries) {
            var i = 0, len = entries.length;
            for (; i < len; i++) {
                if (entries[i].isFile) {
                    numFiles++;
                    entries[i].file(fileSuccess,fail);
                } else if (entries[i].isDirectory) {
                    numDirs++;
                    getDirSuccess(entries[i]);
                }
                if (readerTimeout) {
                    window.clearTimeout(readerTimeout);
                }
            }
            if (readerTimeout) {
                window.clearTimeout(readerTimeout);
            }
            readerTimeout = window.setTimeout(weAreDone, millisecondsBetweenReadSuccess);
        }

        // additional event to call when totally done
        function weAreDone() {
           // do something
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:40:01.553

问题是您正在尝试使用 File API 来读取应用程序资产目录中的文件。该目录实际上不是文件系统的一部分。当您执行 window.requestFileSystem(LocalFileSystem.PERSISTENT, ...) 时，您实际上正在获取 /sdcard （很可能）。因此，当您尝试加载“img/china”时，该目录不存在。

您需要在主 Java 类的 onCreate 方法期间将文件从资产目录复制到本地文件系统。然后您可以使用 DirectoryReader 获取所有文件的列表。

或者，如果您提前知道所有图像，您可以创建自己的 JSON 文件来列出所有图像。然后加载该文件并能够遍历所有条目以创建您自己的画廊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:35:45.573

相机文档涵盖了这一点。这不适合你吗？

如果 Camera.sourceType = Camera.PictureSourceType.PHOTOLIBRARY 或 Camera.PictureSourceType.SAVEDPHOTOALBUM，则会显示照片选择器对话框，从中可以选择相册中的照片。

[http://docs.phonegap.com/phonegap_camera_camera.md.html](http://docs.phonegap.com/phonegap_camera_camera.md.html)

也可以参考...

使用 PhoneGap 和 Android 浏览图片库

我正在将我为 iphone 编写的应用程序移植到 Android 上，我想从相机功能开始。我环顾四周并用谷歌搜索，但找不到有关如何在 Android 设备上浏览图片库的文档。我决定暂时对现有的 Camera 对象进行一些简单的修改以支持该功能。我的未来，希望 PhoneGap 的人能更好地实现这一点，我可以把这段代码放到牧场上。

此代码需要添加到 phoneGap.js 文件中。它为在设备上浏览画廊的新方法创建原型

```
1   //
2   // add the new prototype to support the browse function
3   //
4   // i have created a new class 'PixCameraLauncher' so I did not have to modify
5   // the original class file provided by PhoneGap
6   //
7   com.phonegap.CameraLauncherProxy.prototype.browseImages = function(quality) {
8       return PhoneGap.exec("com.phonegap.gapTest.PixCameraLauncher", "browseImages", [quality]);
9   }; 
```

这是我对 PhoneGap 提供的 CameraLauncher 类所做的修改。添加新意图以启动图片库

```
01  /**
02   * Get a picture from the Image Gallery.
03   *
04   * in DroidGap.onActivityResult, which forwards the result to
05   * this.onActivityResult.
06   *
07   * @param quality
08   *            Compression quality hint (0-100: 0=low quality & high
09   *            compression, 100=compress of max quality)
10   */
11  public void browseImages(int quality) {
12      this.mQuality = quality;
13   
14      // Display camera
15      Intent intent = new Intent(Intent.ACTION_PICK,
16              android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
17   
18      this.ctx.startActivityForResult((Plugin) this, intent);
19  } 
```

我们还需要处理返回的文件。我把它简单化了，但这可以稍微清理一下我所做的是假设如果数据字段中有一个 URI，那么一个图像已经被挑选出来并且应该由实用程序处理。在开始时

```
1   void onActivityResult(int requestCode, int resultCode, Intent intent) 
```

添加下面的代码。这将处理将 URI 重新分配给所选文件

```
1   // If image available
2   if (resultCode == Activity.RESULT_OK) {
3    
4       //
5       // this means the user selected an image, so just pass it back!!
6       //
7       if (intent.getData() != null) {
8           imageUri = intent.getData();
9       } 
```

经过更多的测试和代码清理后，我将为 android 工作和 iphone 工作提供完整的项目。如果有任何问题，请在下方留言。

# ios - 查找粘贴板是如何使用的？

> ID：13050546
> 
> 赞同：2
> 
> 时间：2012-10-24T13:41:53.467
> 
> 标签：ios, cocoa-touch, copy-paste, uipasteboard

我正在阅读 的文档`UIPasteboard`，它说有两种主要类型的粘贴板，“通用粘贴板”，用于系统范围的复制和粘贴，以及“查找粘贴板”（`UIPasteboardNameFind`）。[从文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPasteboard_Class/Reference.html)：

> 查找粘贴板，用于搜索操作，在搜索栏中保存最新的字符串值

如果我在 Safari 的搜索栏中输入文本，它不会被放入另一个应用程序的查找粘贴板中。我想知道查找粘贴板是如何工作的，以及它的用途。我想象它的范围是在一个应用程序或应用程序系列中，但是与仅使用`UISearchbar`'`text`属性有什么区别？

这是我用来检查它的代码：

```
UIPasteboard *findPasteboard = [UIPasteboard pasteboardWithName:UIPasteboardNameFind create:NO];
NSLog(@"Find Pasteboard: %@", findPasteboard);
NSLog(@"Find Pasteboard items: %@", [findPasteboard items]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-16T08:02:19.257

iOS 10 弃用了除通用剪贴板之外的所有剪贴板；这是 macOS 的答案：

查找粘贴板保留在查找栏中输入的最新查找字符串。（但不是地址栏！）它旨在补充通用的 Command + F 快捷方式。

这是一个示例场景：

*   用户打开 TextEdit 的查找栏并输入一个字符串
*   TextEdit 将字符串复制到查找粘贴板
*   用户打开 Safari 的查找栏
*   查找栏打开，其中包含从查找粘贴板粘贴的字符串

对于开发人员，这些是实施指南：

*   在查找栏字符串更改时，应将新字符串复制到查找粘贴板
*   查找栏字符串必须与查找粘贴板保持同步（通过时间循环检查“每 N 秒”，如 Safari 或当应用程序像 TextEdit、Firefox、Chrome 一样激活时）

# gcc - 多核 AMD 上的并行代码较慢

> ID：13050549
> 
> 赞同：0
> 
> 时间：2012-10-24T13:42:06.503
> 
> 标签：gcc, intel, amd-processor

并行代码（openmp），在英特尔（linux）上使用 gcc 编译，在英特尔计算机上的运行速度比在具有两倍内核的 AMD 上运行得快得多。我看到所有内核都在使用中，但在 AMD 上需要大约 10 倍的 CPU 时间。我在 intel 编译器中听说过“cripple AMD”，但我使用的是 gcc！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:59:00.993

英特尔在其现代处理器内核中拥有超线程技术，这实质上意味着您在单个内核上同时运行多个硬件上下文，您在进行比较时是否考虑到了这一点？

# expressionengine - 如何在表达式引擎中重复插入 HTML？

> ID：13050550
> 
> 赞同：5
> 
> 时间：2012-10-24T13:42:10.437
> 
> 标签：expressionengine

我有一个条目循环，我想对每个第二个条目应用格式 - 不仅应用一个类，还应用一些基本的 HTML 标记。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T13:42:10.437

这个问题似乎出现了很多，所以我想我会发布一个简单的例子：

```
{exp:channel:entries channel="whatever"}
{switch="<div class='entry'>|"}
<h2>{title}</h2>
{if count != total_results}{switch="|</div>"}{/if}
{if count == total_results}</div>{/if}
{/exp:channel:entries} 
```

在此示例中，具有“条目”类的 div 围绕每个第二个条目进行包装。前端的开关变量非常简单。后端使用两个条件：如果条目是循环中的最后一个条目，则关闭 DIV。如果该条目不是循环中的最后一个条目，则仅在每第二个条目时关闭 DIV（在循环开始时反映 switch 变量）。

需要注意的是，switch 变量对引号非常敏感——所以当以这种方式插入 HTML 时，在 switch 变量中，您必须使用单引号而不是双引号。这对于简单的插入很好，但如果您考虑到更复杂的格式，可能会有点不友好。希望这可以帮助一些人，并随时扩展这个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:56:53.823

还有一个插件可能有助于在这种情况下[GWcode Alternate](http://devot-ee.com/add-ons/gwcode-alternate)。我自己没有使用它，因为我更喜欢使用另一个答案中提到的本机 switch 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:41:01.333

我使用的示例专门针对那些不需要在每个条目上都使用 DIV 而是在特定间隔周围包装 DIV 的实例 - 例如，当您想要一个一次包含 3 个条目的 jQuery 滑块时很常见。这就是我的例子的明确目的。每个条目都不是我会考虑的间隔，这就是我的示例的目的。当然，这是一个边缘情况——但这种情况经常发生，足以捕获一个简单的解决方案来解决仍然使用仅具有简单条件的本机功能的挑战。

# c++ - 在 O(1) 中访问模板参数包的背面

> ID：13050555
> 
> 赞同：7
> 
> 时间：2012-10-24T13:42:17.957
> 
> 标签：c++, c++11, variadic-templates, template-meta-programming

在boost 开发人员邮件列表上[最近的一封](http://article.gmane.org/gmane.comp.lib.boost.devel/235351)邮件中，Eric Niebler 提到可以在`O(1)`实例化中获取模板参数包的最后一个元素。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:25:29.773

您可以查看[https://github.com/ericniebler/proto-0x/blob/master/boost/proto/utility.hpp](https://github.com/ericniebler/proto-0x/blob/master/boost/proto/utility.hpp)，如帖子中所述，了解`get_nth`元功能的实现方式。本质，经过很多简化：

```
#include <type_traits>
#include <cstdlib>

// A template to store a variadic list.
template <typename...>
struct List;

// Concatenate two variadic lists together. Should be O(1).
template <typename Left, typename Right>
struct Concat;

template <typename... Lefts, typename... Rights>
struct Concat<List<Lefts...>, List<Rights...>> {
    typedef List<Lefts..., Rights...> Type;
};

// Construct List<void, void, void, ...> with 'n' elements.
// Uses "bisection" method, which should instantiate O(log n) templates
template <size_t n>
struct RepeatVoid : Concat<typename RepeatVoid<n/2>::Type,
                           typename RepeatVoid<n - n/2>::Type> {};

template <>
struct RepeatVoid<0> {
    typedef List<> Type;
};

template <>
struct RepeatVoid<1> {
    typedef List<void> Type;
}; 
```

```
template <typename>
struct GetNthAux;

// This would create a function of the form:
//
//   T eval(cv void*, cv void*, cv void*, ..., cv void*, T*, ...)
//
// where there are 'n' const volatile void*. These will be used to absorb
// the first 'n' template arguments. The actual one can be extracted from
// the return type.
//
template <typename... Ts>
struct GetNthAux<List<Ts...>> {
    template<typename T>
    static constexpr T eval(const volatile Ts*..., T*, ...);
};

// Run the whole thing.
template<size_t n, typename... Ts>
using GetNth = decltype(
    GetNthAux<typename RepeatVoid<n>::Type>::eval((Ts*)nullptr...)
);

// Example:
int main() {
    static_assert(std::is_same<GetNth<0, int, float, char>, int>::value, "");
    static_assert(std::is_same<GetNth<1, int, float, char>, float>::value, "");
    static_assert(std::is_same<GetNth<2, int, float, char>, char>::value, "");
} 
```

实际上它是 O(log N)，而不是 O(1)，因为花费的时间`RepeatVoid`。

但是这种方法确实比线性方法（如`tuple_element<>`. 我试图比较`GetNth`with`tuple_element<>`在获取列表的第 899 项时的性能，后者快一个数量级：

```
 tuple_element<>   GetNth<>
g++ 4.7 with libstdc++   0.7s              0.1s
clang++ 3.1 with libc++  0.9s              0.1s 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T08:56:17.377

我认为 Eric Niebler 指的是 Richard Smith 在这个 clang 错误报告中首先展示的技巧（见最后一个附件，评论 9）

[http://llvm.org/bugs/show_bug.cgi?id=13263](http://llvm.org/bugs/show_bug.cgi?id=13263)

这是代码，我只是清理了一下以删除一些未使用的参数。
警告：大约有 2000 个“1”，后跟一个“2”，因此编译可能需要一段时间:)

```
namespace detail {
  struct any { template<typename T> any(T &&) {} };
  template<typename T, typename U> struct fst { typedef T type; };
  template<typename ...Ts> struct select_impl {
    template<typename U>
    static U&& select(typename fst<any, Ts>::type..., U &&u) {
      return static_cast<U&&>(u);
    }
  };
}

template<typename T, typename ...Ts>
auto back(T &&t, Ts &&...ts) -> decltype(detail::select_impl<Ts...>::select(static_cast<T&&>(t), static_cast<Ts&&>(ts)...)) {
  return detail::select_impl<Ts...>::select(static_cast<T&&>(t), static_cast<Ts&&>(ts)...);
}

int main()
{
    int in = ::back(
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2
            );
    return in;
} 
```

# c# - SqlBulkCopy ColumnMappings 不起作用

> ID：13050556
> 
> 赞同：0
> 
> 时间：2012-10-24T13:42:33.450
> 
> 标签：c#, asp.net, sql-server, sqlbulkcopy

> **可能重复：**
> [无法比较 SqlBulkCopy 中的列](https://stackoverflow.com/questions/13044772/unable-to-compare-the-columns-in-sqlbulkcopy)

我有一个带有列的 excel 表：

```
excelid | exceldata
1       | cat
2       | bat
3       | rat 
```

我的数据库表：

```
id (int) | varchar(50) 
```

以下是我的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    string strFileType = System.IO.Path.GetExtension(FileUpload1.FileName).ToString().ToLower();
    string strFileName = FileUpload1.PostedFile.FileName.ToString();

    FileUpload1.SaveAs(Server.MapPath("~/Import/" + strFileName + strFileType));
    string strNewPath = Server.MapPath("~/Import/" + strFileName + strFileType);

    string excelConnectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source="+strNewPath +"; Extended Properties=Excel 8.0;");

    //string excelConnectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=C:\\myFolder\\Book1.xls;" + "Extended Properties=Excel 8.0;"); 

        // Create Connection to Excel Workbook
        using (OleDbConnection connection = new OleDbConnection(excelConnectionString))
        {
            OleDbCommand command = new OleDbCommand("Select ID,Data FROM [Sheet1$]", connection);

            connection.Open();

            // Create DbDataReader to Data Worksheet
            using (DbDataReader dr = command.ExecuteReader())
            {
                // SQL Server Connection String
                string sqlConnectionString = "Data Source=ARBAAZ-1B14C081;Initial Catalog=abc;Integrated Security=True";

                con.Open();
                DataTable dt1 = new DataTable();
                string s = "select count(*) from ExcelTable"; 
                string r = ""; 
                SqlCommand cmd1 = new SqlCommand(s, con);
                try 
                { 
                    SqlDataAdapter da1 = new SqlDataAdapter(cmd1); 
                    da1.Fill(dt1);
                }
                catch { } 
                int RecordCount; 
                RecordCount = Convert.ToInt32(cmd1.ExecuteScalar());
                r = RecordCount.ToString(); 
                Label1.Text = r;
                con.Close();
                int prv = Convert.ToInt32(r);

                // Bulk Copy to SQL Server
                using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
                {

                    bulkCopy.DestinationTableName = "ExcelTable";

                    SqlBulkCopyColumnMapping mapping1 = new SqlBulkCopyColumnMapping("id", "id");
                    SqlBulkCopyColumnMapping mapping2 = new SqlBulkCopyColumnMapping("data", "data");

                    bulkCopy.ColumnMappings.Add(mapping1);
                    bulkCopy.ColumnMappings.Add(mapping2);

                    bulkCopy.WriteToServer(dr);

                }
                con.Open();

                DataTable dt = new DataTable(); 
                s = "select count(*) from ExcelTable";  r = ""; 
                SqlCommand cmd = new SqlCommand(s, con); 
                try { SqlDataAdapter da = new SqlDataAdapter(cmd);
                    da.Fill(dt); 
                }
                catch { } 
                RecordCount = Convert.ToInt32(cmd.ExecuteScalar()); 
                r = RecordCount.ToString(); Label1.Text = r;
                con.Close();
                int ltr = Convert.ToInt32(r);
                if (prv == ltr)
                {
                    Label1.Text = "No records Added";
                }
                else
                {
                    Label1.Text = "Records Added Successfully !";
                }

            }
        }

    }
//protected void Button2_Click(object sender, EventArgs e)
//{
//    string fileName = FileUpload1.PostedFile.FileName.ToString();
//    Response.Write(fileName);
//}
protected void Button2_Click(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:55:09.523

您的 Excel 电子表格列是：

```
excelid  |  exceldata 
```

你的数据库列是（我猜你实际上并没有说）：

```
id       |  data 
```

因此，您的映射应该是

```
SqlBulkCopyColumnMapping mapping1 = new SqlBulkCopyColumnMapping("excelid", "id");
SqlBulkCopyColumnMapping mapping2 = new SqlBulkCopyColumnMapping("exceldata", "data"); 
```

# apache - 网页的最后修改日期未知

> ID：13050557
> 
> 赞同：1
> 
> 时间：2012-10-24T13:42:39.280
> 
> 标签：apache

我想在网页中查看文档的年龄，但没有显示！这是远程登录到服务器的结果：

```
telnet av.hostoi.com 80 
Connected to av.hostoi.com. HEAD / HTTP/1.0

HTTP/1.1 200 OK Date: Tue, 23 Oct 2012 16:55:40 GMT 
Server: Apache 
X-Powered-By: PHP/5.2.17 
Connection: close 
Content-Type: text/html

Connection closed by foreign host. 
```

在另一台服务器上，还包括以下两行，但上面没有：

```
Last-Modified: Fri, 17 Jun 2011 11:17:45 GMT 
ETag: "2ce392-b1-4a5e688eae840" 
```

所以我搜索了互联网，据我所知，Apache中应该有一个配置可以在htaccess中设置headers和etag。但我找不到任何地方可以向我展示这一点。

如果有帮助，这里是 Apache 中加载的模块：

```
core mod_authn_file mod_authn_default mod_authz_host mod_authz_groupfile mod_authz_user mod_authz_default mod_auth_basic mod_include mod_filter mod_log_config mod_env mod_expires mod_headers mod_setenvif mod_version prefork http_core mod_mime mod_status mod_autoindex mod_asis mod_info mod_vhost_alias mod_negotiation mod_dir mod_actions mod_alias mod_rewrite mod_so mod_php5 mod_ruid2 
```

据我所知，`mod_header`必须启用这似乎是这种情况。

对此有什么帮助吗？

编辑：尝试了建议的解决方案：将一个 .htaccess 文件放在 / 文件夹中，即使有一个名为 do not upload here 的文件。.htaccess 的内容：

```
 <code>
    # Do not remove this line, otherwise mod_rewrite rules will stop working
    RewriteBase /
    Options -Indexes
    SSILastModified on

    <IfModule mod_expires.c>
    FileETag MTime Size
    ExpiresActive on

    ExpiresDefault "access plus 10 days"

    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType application/x-javascript "access plus 1 week"
    ExpiresByType application/x-shockwave-flash "access plus 1 week"

    ExpiresByType text/css "access plus 1 week"

    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/x-icon "access plus 6 month"
    ExpiresByType image/ico "access plus 6 month"

    </IfModule>
     </code> 
```

我将此文件放在 public_html 文件夹和文件 update.ver 所在的子文件夹 nod_update3 中。然后我执行检查文档年龄的脚本，如下所示： ./check_http -H av.hostoi.com -u /nod_update3/update.ver -M 2d HTTP CRITICAL: HTTP/1.1 200 OK - 文档修改日期未知 - 0,159 秒响应时间内 26316 个字节 |time=0,158965s;;;0,000000 size=26316B;;;0

如您所见，即使在 ftp 客户端上显示上次修改日期为 25.10.2012，也没有显示修改日期

我尝试检查同一文件夹中的另一个文件，如下所示：./check_http -H av.hostoi.com -u /nod_update3/em000_32_l0.nup -M 2d HTTP CRITICAL: HTTP/1.1 200 OK - Last modified 13,5 days以前 - 1,059 秒响应时间内 56472 字节 |time=1,059014s;;;0,000000 size=56472B;;;0 srvmon plugins #

如您所见，日期修改是已知的。那么为什么ver文件有问题？该文件可以在这个网址中检查：http: [//av.hostoi.com/nod_update3//update.ver](http://av.hostoi.com/nod_update3//update.ver)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:56:58.380

问题是您在第一台服务器上启用了静态内容缓存，而在第二台服务器上却不是这样。

如果您有类似以下内容，请查看第二台服务器上的 apache 主配置文件、虚拟主机或 .htacess：

```
<IfModule mod_expires.c>
FileETag MTime Size
ExpiresActive on

<filesMatch "\.ver$">
ExpiresDefault "modification plus 2 week"
</filesMatch>
</IfModule> 
```

您还需要启用 apache 模块 mod_expires。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-24T00:43:08.760

通过追溯 Apache 的源代码，我们可以看到这种错误配置的根本原因是“Xbithack Full”启用的语义隐式覆盖了“SSILastModified On”启用的语义。

```
if (conf->lastmodified > 0) {
  ... {
   ap_update_mtime(r, r->finfo.mtime);
   ap_set_last_modified(r);}}

else if (((conf->xbithack == XBITHACK_FULL ||
         (conf->xbithack == XBITHACK_UNSET &&
                DEFAULT_XBITHACK == XBITHACK_FULL))
        ...)) {
        ap_update_mtime(r, r->finfo.mtime);
        ap_set_last_modified(r);
} 
```

一种可能的解决方案是将“SSILastModified on”替换为“Xbithack Full”。

# regex - 使用 perl one-liner 使用正则表达式分隔符获取第一个和最后一个字段

> ID：13050558
> 
> 赞同：1
> 
> 时间：2012-10-24T13:42:41.267
> 
> 标签：regex, perl

我需要解析一个文件并使用正则表达式作为分隔符的一部分从中获取某些字段。我以为我可以使用 perl 来做到这一点（？）。问题是我无法让它正常工作。这是一个我认为可以让我打印由一个空格分隔的字段（在本例中为一个或多个空格）的单行：

```
bash_prompt> perl -anF'/ +/' -e 'print "$F[0], $F[-1]\n"' build_outputfile 
```

输出文件来自生成文件。

在这里，我想打印出第一个令牌和最后一个令牌。因此，在我的情况下，使用了哪个编译器以及编译了哪个文件。也许有更好的方法可以做到这一点，但现在我对为什么我的 perl one 班轮不起作用感到困扰。

无论如何，正则表达式 '/ +/ 似乎不起作用。我得到了一些意想不到的输出。也许 F 实际上并不想要正则表达式？当我用包含一个空格的“/ /”替换 F 的参数时，我仍然没有得到预期的输出。

任何人都可以帮忙吗？谢谢。

这里有一些测试代码供您尝试。将其保存在文件中：

```
g++ -c  -g  -Wall -I/codedir/src/CanComm/include -I/home/codemonkey/workspace/thirdparty/Boost -Wno-deprecated SCMain.cpp
g++ -c -g  -Wall -I./object/include -I./wrapper/include -I./Properties/include -I./Messaging/include -I/codedir/src/Logging/sclog/include ./object/SCObject.cpp ./object/RandNumGenerator.cpp ./object/ScannerConstraints.cpp ./object/ThreadSync.cpp ./object/SCData.cpp ./object/AirScanData.cpp ./object/ClusterData.cpp ./object/WarmupData.cpp ./object/SCCommand.cpp ./object/ScanCommands.cpp ./object/RCCommands.cpp ./object/ReconData.cpp ./object/UICommTool.cpp ./object/UIMsg.cpp ./object/UI2SCConversion.cpp ./object/RCMsg.cpp ./object/RCMessageInfo.cpp ./object/Utils.cpp ./object/ZBackupTable.cpp ./object/ZBackupFactory.cpp
g++ -c -g  -Wall -I./Properties/include -I/codedir/src/Logging/sclog/include -I./object/include -I/home/codemonkey/workspace/thirdparty/Boost  ./Properties/PropertyMap.cpp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:56:17.557

根据`perldoc perlrun`：

> -F模式
> 
> 如果 -a 也有效，则指定要拆分的模式。模式可以用“//”、“”或''包围，否则将被放在单引号中。**您不能在模式中使用文字空格。**

我不得不承认：这是多么武断的限制！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:25:37.750

对于您的问题，您实际上不需要将模式指定为默认模式，即空格可能对您足够好。

```
perl -anle 'print "$F[0], $F[-1]"' build_outputfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:46:09.800

您的正则表达式模式应该是这样的：

```
'/\s+/' 
```

**\s**表示匹配任何空格

# android - Android：用犀牛罐子做proguard？

> ID：13050561
> 
> 赞同：1
> 
> 时间：2012-10-24T13:42:44.483
> 
> 标签：android

我已将 Rhino js-14.jar 添加到我的项目中，并且不再能够使用 proguard 进行构建。当我尝试构建时，我收到许多消息，例如：

> 警告：org.mozilla.javascript.tools.debugger.ContextWindow：找不到超类或接口 javax.swing.JPanel

然后构建失败并显示消息：

> Proguard 返回错误代码 1。请参阅控制台。

有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:23:04.577

只需从 js-14.jar 文件中删除 tools 目录

# mysql - MySQL Sum 不正确并加入

> ID：13050562
> 
> 赞同：1
> 
> 时间：2012-10-24T13:42:49.487
> 
> 标签：mysql, sql, aggregate-functions

我正在构建一个假期系统，其中一个功能是能够购买额外的假期，您可以在一年中的几个时间点进行，所以我想查看假期的总天数，预订了多少和每个用户购买了多少。

我正在查询

```
SELECT  hr_user.name AS username, 
        hr_user.user_id,
        SUM(working_days) AS daysbooked, 
        sum(hr_buyback.days) AS daysbought 
FROM hr_leave 
inner join hr_user on hr_user.user_id = hr_leave.user_id
left outer join hr_buyback on hr_buyback.user_id = hr_user.user_id
where    active = 'y' 
     and hr_leave.start_date between '2012-01-01' and '2012-12-31' 
     and (hr_leave.status = 'approved' OR hr_leave.status = 'pending')
GROUP BY hr_user.name, hr_user.user_id 
```

现在，这使 daysbought 列中的结果 waaaay 比我预期的要高，这很奇怪，因为当我去掉总和而只有 hr_buyback.days 时，它显示了我期望的所有单个值（除了我会更确切地说，它们是相加的）

其次，在 MySQL 中你能做你在 MSSQL 中能做的事吗？

```
left outer join hr_buyback on (select hr_buyback.user_id where buy_sell = 'buy') = hr_leave.user_id 
```

?

相关表定义（我假设这就是你的意思？）：

hr_buyback

```
buyback_id  int(11) NO  PRI     auto_increment
user_id     int(11) NO          
days        int(11) NO          
buy_sell    varchar(10) NO          
status      varchar(10) NO      pending 
year        int(11) NO 
```

hr_user

```
user_id     int(11) NO  PRI     auto_increment
name        varchar(40) NO          
email       varchar(40) NO  UNI     
level       int(5)  YES         
manager_id  int(11) NO          
team_id     int(11) YES         
active      varchar(2)  NO      y   
holidays_day    int(11) NO          
start_date  timestamp   NO      CURRENT_TIMESTAMP   
password    varchar(60) NO          
division_id int(11) YES         
day_change  int(5)  NO      0   
priv_hours  varchar(2)  NO      n   
po_level    int(2)  YES     0   
po_signoff  int(10) YES 
```

hr_leave

```
leave_id    int(11) NO  PRI     auto_increment
user_id     int(11) NO          
start_date  date    NO          
end_date    date    NO          
day_type    varchar(10) NO          
status      varchar(20) NO      pending 
working_days    varchar(5)  NO          
leave_type  int(11) NO          
cancel      int(11) NO      0   
date        timestamp   NO      CURRENT_TIMESTAMP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:55:35.197

问题可能是您将从`hr_buyback`中的每个匹配行中获取每行的一个副本`hr_leave`。

我假设每个用户可能有不止`hr_buyback`一行，并且可能有`hr_buyback`一行没有`hr_leave`一行。如果是这样，您可能会想要这样的东西：

```
SELECT  hr_user.name AS username, 
    hr_user.user_id,
    SUM(working_days) AS daysbooked, 
        (SELECT SUM(days) 
        FROM hr_buyback 
        WHERE hr_buyback.user_id = hr_user.user_id) AS daysbought 
FROM  hr_user  
left join hr_leave on hr_user.user_id = hr_leave.user_id
where    active = 'y' 
 and hr_leave.start_date between '2012-01-01' and '2012-12-31' 
 and (hr_leave.status = 'approved' OR hr_leave.status = 'pending')
GROUP BY hr_user.name, hr_user.user_id 
```

# jquery-mobile - ThemeRoller Mobile - 将底部边框添加到标题

> ID：13050571
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:43:11.233
> 
> 标签：jquery-mobile, themeroller

我正在尝试向 ThemeRoller Mobile 模板的标题添加一个 4 像素的底部边框。我看到了设置边框颜色的选项，但它只是在四周应用边框。ThemeRoller 内部有没有办法将其设置为仅底部并设置宽度，或者任何人都可以在 css 文件中提供适当的位置来调整它？提前致谢！

编辑：我尝试将css文件中的.ui-bar-a类从border：更改为border-bottom：并链接像素宽度，但是当文件以chrome呈现时，这些更改不会显示出来。但是如果我在 web 检查器中更改它，更改确实有效，我可以在该元素上获得 4 像素的底部边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:57:17.753

试试这个：

```
ui-header {
     border-bottom:4px solid #000;
} 
```

你可以把它放在你自己的 css 文件中，以保持干净和有条理。但是请记住，在 head 部分中定义所有 css 文件时。确保首先加载 jquerymobile css 文件，然后再加载 css 文件。这是因为现在您的 css 声明将覆盖 jquerymobile 声明。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" /> 
<link rel="stylesheet" href="your-css-file.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:02:03.073

试试这个

$(".ui-header").css("border-bottom", "4px solid #000000");

只需将它放在您想要更改边框的页面上，或者包含它的 js 文件中

# c++ - Superclass::method 或 this-> 方法之间的区别

> ID：13050575
> 
> 赞同：5
> 
> 时间：2012-10-24T13:43:25.677
> 
> 标签：c++

我将如何以及何时调用超类方法？两个选项请参考代码段：

```
class SuperClass {
public:
 void method();
};

class SubClass : public SuperClass {
public:
 void someOtherMethdo(){
   this->method();
   SuperClass::method();
 }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:45:11.167

使用`this->method()`您调用一个在您的超类中实现的函数，或者由您自己的类实现。

使用时`superClass::method()`，请确保调用父级实现的那个。

```
#include <iostream>
#include <string>

class A {
    public:
    void func() {
        std::cout << "A func" << std::endl;
    }
};

class B : A {
    public:                                   
    void func() {
        std::cout << "B func" << std::endl;
    }

    void exec() {
        this->func();
        A::func();
    }
};

int main() {
    B b;

    b.exec();
    return 0;
} 
```

此示例代码将输出

```
B func
A func 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T13:47:22.383

```
this->method(); 
```

...调用`method`派生类（与简单编写相同`method();`）。这可以调用从父类继承的方法（在示例中如此），或者它可以调用子类中的覆盖版本（如果存在，将会调用）。

```
SuperClass::method(); 
```

...将始终调用父级的方法。当您想要保留和扩展父类方法的功能时，通常在子类的覆盖中使用此语法。例如

```
Class SubClass: public SuperClass {
  //...
  void method() {
    SuperClass::method();
    //...
  }
}; 
```

请注意，如果您在第二种情况下使用第一种语法，您将获得递归。

`virtual`另请注意，这与方法无关。将方法标记为`virtual`意味着，当通过基类指针调用该方法时，将调用可用的最派生类方法。在上面的代码中，任何方法是否为虚拟方法都没有区别，因为没有涉及基类指针。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T13:46:02.350

```
this->method 
```

首先将默认为派生类中的本地实现，如果不存在，它将采用超类方法。如果那个不存在，它将给出编译错误。

```
superClass::method() 
```

将始终指向超类中的方法

在大多数情况下，您想要`this->method`. `superClass::method()`当方法的一部分在超类中实现并且您想在派生类中扩展它时很有用。就像是：

```
Class SubClass : public SuperClass {
public:
 void someOtherMethdo(){
   SuperClass::someOtherMethdo();
   //Rest of the method
 }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-24T13:45:37.193

`this->method()`在某些情况下留有歧义的空间（例如，如果多个祖先`method`使用此签名定义），但同时允许`method`调用，无论它在哪里定义。如果`method`是`virtual`，它将调用最衍生的版本。

`SuperClass::method()`是明确的。它将调用该特定方法或给出编译器错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-24T13:46:28.317

在这个特定的例子中，没有区别。

如果方法是`virtual`：

*   `this->method()`将动态调用函数（调用类的最高实现版本）
*   `SuperClass::method()`导致静态调用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T13:47:38.087

`this->method();`在您的情况下调用父级，或者如果它是虚拟的 - 调用 vtable 中已实现函数的顶部。`SuperClass::method();`将调用父母的方法。

# xml - 使用 XmlAttributeOverrides 覆盖 XmlSerializers 标准 DateTime 序列化格式

> ID：13050581
> 
> 赞同：0
> 
> 时间：2012-10-24T13:43:39.747
> 
> 标签：xml, xml-serialization, xmlserializer

是否可以更改 DateTime 的序列化格式。

基本上我希望序列化后在我的 xml 文件中输出这个 DateTime：

yyyyMMddHHmmss

...以及反序列化后的正确 DateTime 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:00:53.923

你不能。

但是，如果您同时控制序列化器和反序列化器，则可以使用`[XmlIgnore]`DateTime 字段上的属性，并创建一个自定义属性，将字符串格式化（和解析）为所需格式。

# jquery - 如何只选择顶部 使用 jQuery

> ID：13050582
> 
> 赞同：1
> 
> 时间：2012-10-24T13:43:42.747
> 
> 标签：jquery

这是一个html。我不在乎它是否有效，我只想使用 jQuery 从中查询“要选择的标题”，仅此而已。

```
<div class="my class1213">
    <h3> just title, no selection</h3>
    <ul>
        <li>title to select</li>
        <li>title to select
            <ul>
                <li>nonono</li>
            </ul>
        </li>
        <li>title to select
           <ul>
             <li>
                 <ul>
                     <li>no selection</li>
                 </ul>
             </li>                 
          </ul>     
        </li>    
    </ul>    

</div>​​​​ 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:44:52.283

```
$('.my ul li:first'); 
```

应该够了

备择方案：

```
$('.my ul li:eq(0)');

$('.my ul li:nth-child(1)'); 
```

根据未定义的评论进行编辑：

你可以使用他的解决方案，或者类似的东西：

```
$('.my ul li').filter(function(){
    return $(this).text === 'title to select';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:46:38.333

您可以使用 CSS 选择器，也可以使用[jQuery 遍历](http://api.jquery.com/category/Traversing/?rdfrom=http://docs.jquery.com/mw/index.php?title=Traversing&redirect=no)函数。

选项一：

```
$('.class1213 ul li:first-child')
// selects only the first li child of ul 
```

选项 b：

```
$('.class1213 ul li').first()
// first selects all li's, then only uses the first element found 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:45:55.277

```
$('div.my > ul > li:first-child'); 
```

# php - URL 更短，preg_match 未验证

> ID：13050583
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:43:46.537
> 
> 标签：php, regex

我们又来了，我需要一些帮助。preg_match 没有按我的意愿工作，它没有验证任何站点链接。我需要第二双眼睛来帮助我了解我的代码有什么问题。

```
if (!empty($_POST["url"]))
      {
          if (filter_var($_POST["url"], FILTER_VALIDATE_URL))
          {
              if (!preg_match('/^http(s)?:\/\/(?:[a-z\d-]+\.)*mysite.com(?:(?=\/)|$)/i', $url))
              {
                echo "<strong>Error</strong>: Not a valid Mysite.com link or could shorten link";
              } else {
                  $result = $sql->query("SELECT `id` FROM `shortcuts` WHERE `url`='{$_POST["url"]}'");
                  $id = $result[0]["id"];
                  if (empty($id))
                  {
                      $result = $sql->query("INSERT INTO `shortcuts` (`url`) VALUES ('{$_POST["url"]}')");
                      if ($result)
                      {
                          $id = $sql->get_increment();
                          if (empty($id))
                          {
                              echo "FAILED ENCODE";
                              exit(1);
                          }
                      }
                      $shorturl = "http://mysite.com/".encode($id);
                  }
              }
          }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:48:50.130

既然您已经验证了 URL，为什么不直接使用`parse_url()`它来提取主机名呢？

```
if (false === stristr(parse_url($_POST['url'], PHP_URL_HOST), 'mysite.com')) {
    // not valid url
} 
```

或者，如果“mysite.com”必须是主机名的最后一位：

```
if (0 !== substr_compare(parse_url($_POST['url'], PHP_URL_HOST), 'mysite.com', -10, 10, true)) {
    // invalid url
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:07:05.180

让自己的代码不那么复杂，这样更容易调试。如果我理解正确，您会在这里关注一个特定问题：

```
if (matches_shorturl_pattern($url) {
    // go on ...
} 
```

为自己创建一个函数。好处是，您可以在不提交任何内容或访问数据库的情况下对其进行隔离测试。

```
/**
 * is URL a valid shorturl by syntax?
 *
 * @param string $url
 * @return bool
 */
function matches_shorturl_pattern($url) {
    $pattern = '/^http(s)?:\/\/(?:[a-z\d-]+\.)*mysite.com(?:(?=\/)|$)/i';
    $result = preg_match($pattern, $url);
    if ($result === FALSE) {
        throw new Exception('The regex did a poop.');
    }
    return (bool) $result;
} 
```

使用要再次测试的输入单独测试此功能要容易得多。然后，您正在正确检查错误情况。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:20:28.063

我找到了！，

```
if (!preg_match('/^http(s)?:\/\/(?:[a-z\d-]+\.)*mysite.com(?:(?=\/)|$)/i', **$url**)) 
```

新的

```
if (!preg_match('/^http(s)?:\/\/(?:[a-z\d-]+\.)*mysite.com(?:(?=\/)|$)/i', **$_POST["url"]**)) 
```

# spring-mvc - 试图将 JSF 添加到我的 Spring WebFlow 项目中，现在我的 WebFlow 将无法正常工作

> ID：13050584
> 
> 赞同：1
> 
> 时间：2012-10-24T13:43:49.227
> 
> 标签：spring-mvc, jsf-2, spring-webflow

我正在尝试将一些 JSF 添加到我的 Spring WebFlow 项目中，并且我进行了一些更改以尝试遵循以下详细信息：

[http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch13s07.html](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch13s07.html)

但现在我的 webflow 项目将无法正常工作。

**这是我的旧 flow.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:flow="http://www.springframework.org/schema/webflow-config"
 xmlns:p="http://www.springframework.org/schema/p"
 xmlns:context="http://www.springframework.org/schema/context"
 xsi:schemaLocation="http://www.springframework.org/schema/webflow-config 
   http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd
   http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />

  <!-- Executes flows: the entry point into the Spring Web Flow system -->
  <flow:flow-executor id="flowExecutor" />

  <!-- The registry of executable flow definitions -->
  <flow:flow-registry id="flowRegistry" 
           flow-builder-services="flowBuilderServices"
           base-path="/WEB-INF/flows">
     <flow:flow-location-pattern value="/**/*-flow.xml" />
  </flow:flow-registry>

 <flow:flow-builder-services id="flowBuilderServices" 
           view-factory-creator="mvcViewFactoryCreator"
           validator="validator"
           /> 

  <bean id="mvcViewFactoryCreator" class=
      "org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
     <property name="defaultViewSuffix" value=".jsp" />   
  </bean>

  <!--Maps request paths to flows in the flowRegistry-->
  <bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <property name="flowRegistry" ref="flowRegistry" />
  </bean>

  <!--
   Dispatches requests mapped to flows to FlowHandler implementations
  -->
  <bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
    <property name="flowExecutor" ref="flowExecutor" />
  </bean>

</beans> 
```

**现在这是我的新 flow.xml 文件，它不起作用：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:webflow="http://www.springframework.org/schema/webflow-config"
    xmlns:faces="http://www.springframework.org/schema/faces"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/webflow-config
        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd
        http://www.springframework.org/schema/faces
        http://www.springframework.org/schema/faces/spring-faces-2.2.xsd">

    <!-- Executes flows: the central entry point into the Spring Web Flow system -->
    <webflow:flow-executor id="flowExecutor">
        <webflow:flow-execution-listeners>
            <webflow:listener ref="facesContextListener"/>
        </webflow:flow-execution-listeners>
    </webflow:flow-executor>

    <!-- The registry of executable flow definitions -->
    <webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices" base-path="/WEB-INF">
        <webflow:flow-location-pattern value="**/*-flow.xml" />
    </webflow:flow-registry>

    <!-- Configures the Spring Web Flow JSF integration -->
    <faces:flow-builder-services id="flowBuilderServices" />

    <!-- A listener maintain one FacesContext instance per Web Flow request. -->
    <bean id="facesContextListener" 
        class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener" />  

</beans> 
```

**现在对于我的 faces-config.xml 文件：**

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>

</faces-config> 
```

**所以有人可以告诉我为什么 webflow 停止工作！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:44:16.733

我认为您正在尝试将 faces-config.xml 作为 Spring 配置文件加载。JSF 配置文件 (faces-config.xml) 是您注册 JSF 应用程序资源的地方，它不是 Spring 配置文件，因此不要将其包含在其他 Spring 配置文件中。此外，/WEB-INF 文件夹是放置 faces-config.xml 的默认位置。如果您在 /WEB-INF/spring 文件夹中有它，那么您需要在 web.xml 中提及路径，如下所示：

```
<context-param>
  <param-name>javax.faces.CONFIG_FILES</param-name>
  <param-value>
   /WEB-INF/faces/faces-config.xml
  </param-value>
</context-param> 
```

与具体问题无关，您还需要 faces-config.xml 中的“SpringBeanFacesELResolver”来解析任何 Spring bean，然后再将它们注入任何 JSF 托管 bean。

```
<faces-config>
  <application>
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
  </application>
<faces-config> 
```

# android - 条码扫描器ZXing在Android Error中的集成

> ID：13050585
> 
> 赞同：0
> 
> 时间：2012-10-24T13:43:54.137
> 
> 标签：android, zxing, classnotfoundexception

我从这个网站了解到： http: [//damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)

我在集成 Zxing 时遇到了两个小问题：

1.  我的应用程序名称现在是“条形码扫描仪”
2.  当我想使用集成条形码扫描仪时出现此错误：`java.lang.ClassNotFoundException : android.preference.set`

但是，当我选择使用条形码扫描仪（以前安装在我的智能手机上）时，没有错误！你有什么想法吗？

我的代码是：

显现 ：

```
 <activity
        android:name="com.google.zxing.client.android.CaptureActivity"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

    </activity> 
```

活动 ：

```
 /* -- LISTENER CLICK SCAN PRODUCT -- */
View.OnClickListener bScanProduct = new View.OnClickListener() {
    public void onClick(View v) {
        LayoutInflater inflater = getLayoutInflater();
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
        startActivityForResult(intent, 0);

    }
};

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
            String contents = intent.getStringExtra("SCAN_RESULT");
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
            Log.w("SuggestionActivity", "Scan receved : "+contents+" format : "+format);
            // Handle successful scan
        } else if (resultCode == RESULT_CANCELED) {
            // Handle cancel
            Log.w("SuggestionActivity", "Cancel scan");
        }
    }
}

/*----------------------------------*/ 
```

项目“CaptureActivity”被设置为库，并包含在我的项目中。core.jar 也作为“外部 JAR”包含在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:53:29.113

不要关注这篇博文。它向您展示了如何复制和粘贴我们的应用程序，强烈建议不要这样做，因为您在此处突出显示的原因。有意或无意，人们创建了使用相同图标、*名称*和清单设置的克隆应用程序，这会干扰应用程序与 Intent 的真实条形码扫描仪集成。

*在您自己的应用程序*中重用部分代码是可以的，如果您知道自己在做什么，但如果您对名称感到惊讶，我怀疑情况是否如此。

实际上，在您的编辑中，您表明您正在尝试通过`Intent`. 这要容易得多，不需要任何`core/`or`android/`代码。

在项目本身中可以找到正确的集成说明：[http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

如果您不确定如何负责任地重用 Barcode Scanner 的源代码，请以这种方式集成。

# iphone - 播放 MPMoviePlayer 时如何截屏？

> ID：13050586
> 
> 赞同：0
> 
> 时间：2012-10-24T13:44:04.490
> 
> 标签：iphone, ios

在 MPMoviePlayer 中播放视频时如何截屏？我正在使用下面的代码进行截图，但播放器屏幕是黑色的。1)

```
- (UIImage*)captureScreenshot:(UIView *)view {
        CGRect screenRect = [[UIScreen mainScreen] bounds];
        UIGraphicsBeginImageContext(screenRect.size);

        CGContextRef ctx = UIGraphicsGetCurrentContext();
        [self.view.layer renderInContext:ctx];

        UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        UIImageWriteToSavedPhotosAlbum(viewImage, self, nil, nil);
        return viewImage;
    } 
```

2)`CGImageRef originalImage = UIGetScreenImage();`

这是苹果禁止的。

请提供任何其他方式从电影播放器​​获取屏幕截图。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:10:38.580

有点骇人听闻，但您可以截取屏幕截图，从电影播放器​​中获取缩略图（例如，[此处](https://stackoverflow.com/questions/1347562/getting-thumbnail-from-a-video-url-or-data-in-iphone-sdk)建议）并将第二个覆盖在第一个上。

# xml - Magento 限制新产品块中显示的产品数量

> ID：13050587
> 
> 赞同：4
> 
> 时间：2012-10-24T13:44:06.340
> 
> 标签：xml, magento, limit, product

如何限制新产品块中显示的产品数量？通过 cms/pages/design/Layout 更新 XML

```
<block type="catalog/product_new" name="home.catalog.product.new" template="catalog/product/new.phtml" >
   <action method="setColumnCount"><count>5</count></action> 
   <action method="setLimit"><limit>5</limit></action>
</block> 
```

setLimit 不起作用，也不起作用

```
<action method="setDefaultGridPerPage"><limit>5</limit></action> 
```

或者：

```
<action method="setData"><key>limit</key><value>3</value></action> 
```

或者：

```
<action method="setProductLimit"><count>5</count></action> 
```

或者：

```
<action method="setProductsLimit"><count>5</count></action> 
```

或者：

```
<action method="setProductsCount"><count>5</count></action> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:01:47.000

尝试

```
 <action method="setProductsCount"><count>5</count></action> 
```

见/app/code/core/Mage/Catalog/Block/Product/New.php

```
/**
 * Set how much product should be displayed at once.
 *
 * @param $count
 * @return Mage_Catalog_Block_Product_New
 */
public function setProductsCount($count)
{
    $this->_productsCount = $count;
    return $this;
} 
```

阅读更多@ [http://www.magentocommerce.com/wiki/groups/248/display_products_on_home_page](http://www.magentocommerce.com/wiki/groups/248/display_products_on_home_page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:02:26.073

不要随意尝试。您正在尝试对`block/product_new`. 所以进入课堂`Mage_Catalog_Block_Product_Abstract`，看看什么功能可以完成这项工作（eclipse中的双Ctrl+O）

在这里，我看到了一个`Mage_Catalog_Block_Product_Abstract::addColumnCountLayoutDepend($pageLayout, $columnCount)`功能。

也许它可以帮助你。例子：

```
$this->addColumnCountLayoutDepend('one_column', 5) 
```

# jquery - jQuery验证多个选择器忽略

> ID：13050591
> 
> 赞同：13
> 
> 时间：2012-10-24T13:44:21.863
> 
> 标签：jquery, jquery-validate

我遇到了 jQuery Validation 的问题，需要忽略一些字段。

我需要忽略基于我设置的类的字段，然后忽略所有隐藏字段。我需要做的是以下，但它只是尊重第二个忽略。我假设有一种方法可以告诉 jQuery Validation 这些多个选择器，但我似乎找不到它。

```
validator = $("#form1").validate({
    onsubmit: false,
    ignore: ".ignore",
    ignore: ":hidden", 
```

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-24T13:49:13.247

从验证文档：

> 使用 jQuery 的 not 方法，因此 not() 接受的所有内容都可以作为此选项传递。

因此，您需要做的就是传递一个参数，选择器用逗号分隔：

```
validator = $("#form1").validate({
    onsubmit: false,
    ignore: ".ignore, :hidden"
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T13:50:24.760

您可以尝试使用：

```
ignore: ".ignore, :hidden" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:50:15.813

您可以为所有隐藏字段添加一个类：

```
$(":hidden").addClass('ignore'); 
```

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-11T16:01:54.983

也有双重“not（）”。IE：

```
ignore: ".ignore, :hidden:not(.required)" 
```

这样一些需要的隐藏字段就不会被忽略。如果有人使用 dropdawn 和复选框自定义插件，可能需要。

# android - Android硬件按钮位置

> ID：13050592
> 
> 赞同：2
> 
> 时间：2012-10-24T13:44:29.690
> 
> 标签：android, android-hardware

是否可以知道硬件设置按钮的位置？我想为我的程序写一个介绍并向用户展示如何使用它的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:47:31.083

不它不是。您会尝试检查您正在运行的设备，然后从预先填充的数据库中获取位置，否则就没有办法了。请注意，自 Honeycomb 以来，硬件按钮已被弃用（好在软件按钮的顺序是已知的并且几乎与设备无关）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:50:23.153

ViewConfiguration 类可能会有所帮助。它有一个方法**[hasPermanentMenuKey()](http://developer.android.com/reference/android/view/ViewConfiguration.html#hasPermanentMenuKey)**

```
public boolean hasPermanentMenuKey ()

Since: API Level 14 Report if the device has a permanent 
menu key available to the user.

Returns true if a permanent menu key is present, false otherwise. 
```

但是要知道菜单键的确切位置**是不可能的**。您可以在硬件中找出它是否存在。

# ios - 尝试构建一个支持 iPhone5 (armv7s) 的 iOS 库

> ID：13050602
> 
> 赞同：2
> 
> 时间：2012-10-24T13:44:59.760
> 
> 标签：ios, xcode, linker, armv7

我正在尝试构建支持 iPhone 5 的[Unrar4iOS](https://github.com/ararog/Unrar4iOS)。我已经修改了目标和项目以具有以下配置：

![项目](../Images/c2fc7c79d4c22633c39917525f37be33.png) ![目标](../Images/29cba37df7a76d083426a167fd5baf98.png)

我认为应该生成一个支持 armv7、armv7s 和 armv6 的库。但是，一旦构建了 .a 文件，如果我执行`file libUnrar4iOS.a`

我得到以下信息：

```
libUnrar4iOS.a：具有 2 种架构的 Mach-O 通用二进制文件
libUnrar4iOS.a（用于架构 armv7）：当前 ar 存档随机库
libUnrar4iOS.a（用于架构 cputype (12) cpusubtype (11)）：当前 ar 存档随机库

```

这似乎只有`armv7`（如果我尝试链接到生成的框架，我会收到一个错误，即没有 armv7s 切片）。

我认为这应该构建具有所有三种体系结构的 .a 文件是不正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:36:23.317

正如上面提到的mattjgalloway，架构cputype（12）cpusubtype（11）是armv7s。

# javascript - 在指定字符数之前将 div 块插入另一个 div

> ID：13050609
> 
> 赞同：2
> 
> 时间：2012-10-24T13:45:29.783
> 
> 标签：javascript, jquery, css

对我来说一个非常有趣的挑战是，我有一个`div`包含文本的块（内容可以包含不同数量的任何元素，如`<p> <ul> <div>`等，它就像编辑过的文章）。这篇文章已经发布在我的网站上，我添加了另一个`div`在加载这篇文章后出现的块。我需要的是把这个块放在文章的末尾，这个块应该在文章周围环绕文本，如下图所示。目前*“也与这篇文章有关”* - 它是我要插入的一个块。

当然，我可以在最后一个元素之前附加这个块`<p>`，但最后一个元素可能是`<ul>`或另一个小的，`<div>`或者`<span>`，我有不同的文章，用户可以发布。

我的想法是获取我的长度`Article div`并从适合我的字符数的当前长度中减去并在那里插入**相关文章** `<div>`。

因此，例如（文章文本要大得多，但这很简单）：

```
<div id="article">
  Lorem Ipsum is simply dummy text of the printing and typesetting industry 
  <p>Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It 
</div>

<div id="related_article">
   <ul>
     <li> Item1</li>
     <li> Item2</li>
     <li> Item3</li>
  </ul>
</div> 
```

jQuery代码：

```
$(document).ready(function() {
  var text_length = $.trim($("#article").text()).length;
  var length_before = 30;//for example
  var related = $('div#related_article');
  var content = $('div#article');
  var substract = text_length - length_before;
  //is it possible to put this *related* div
  //into substract point in content at the end of it.  
}); 
```

我应该使用正则表达式吗？还是有可能以某种方式这样做？也许我只是愚蠢而错过了一些东西，`please show me the way of action`。

*英语不是我的母语，所以可能有语法错误*

*正如人们所问的那样，我提供了一个文章如何看起来像的例子*

[这是一个看起来像我的文章的示例，它可以包含很多标签](http://www.homebuilding.co.uk/design/choosing-products/bricks-cladding/stone)

![在此处输入图像描述](../Images/38750c3fe27783a0ace04cb358d786b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:01:49.260

```
$(document).ready(function() {
    var textLength = 15;
    var currentLength = 0;
    var $lastChild = $("div#article").children(":last-child");
    currentLength = $lastChild.text().length;
    while(currentLength < textLength) {
        $lastChild = $lastChild.prev();
        currentLength = currentLength + $lastChild.text().length;
    }
    var $related = $("div#related_article");
    $related.insertBefore($lastChild);
}); 
```

如果它们下方的文本长度大于 15，则上述脚本会在特定标签上方插入相关文章。您可以根据需要更改 textLength。

下面的代码遍历所有叶节点，并将相关文章插入到所需的索引处。

```
var $articleObj = $("div#article");
var $related = $("div#related_article");
var textLength = 15;

function addRelatedArticle($parentObj, currentLength) {
    var $lastChild = $parentObj.children(":last-child");
    currentLength = currentLength + $lastChild.text().trim().length;
    while($lastChild.length > 0 && currentLength < textLength) {
        $lastChild = $lastChild.prev();
        currentLength = currentLength + $lastChild.text().trim().length;
    }
    if ($lastChild.text().trim().length < $lastChild.html().trim().length) {
        addRelatedArticle($lastChild, currentLength - $lastChild.text().trim().length);
    } else {
        if (currentLength == textLength) {
            $related.insertBefore($lastChild);
        } else {
            var lastChildText = $lastChild.text().trim();
            $lastChild.html($related);
            $lastChild.prepend(lastChildText.slice(0,currentLength - textLength));
            $lastChild.append(lastChildText.slice(currentLength - textLength));
        }
    }       
}
addRelatedArticle($articleObj, 0); 
```

我没有检查现有文章是否至少具有所需的最少字符数。该脚本的主要限制是它将仅搜索叶节点。即它可以在下面的 HTML 上正常工作。

```
<div>
    <div>Some junk text</div>
    <div> more junk texts</div>
</div> 
```

但它可能不适用于以下 HTML。

```
<div>
    Junk text
    <div>More junk</div>
    testing text
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:53:21.173

您最好的选择是考虑使用当前浏览器的选择处理。您可以使用选择来导航一定数量的字符，然后插入一个元素......但正如 Michal Klouda 所说 - 将涉及一些技巧*（即避免特殊标签和情况......哦，像往常一样必须尽可能跨浏览器）*。

这是我的答案，显示了不同主题的代码，我现在没有时间详细介绍，但它应该给你一些需要研究的东西。

以下代码基于用户单击事件工作......但是可以反转它以针对特定元素和特定字符偏移量。`window.getSelection`你主要应该看看or返回的对象可用的方法`document.selection`以及不同浏览器提供的相关Range对象。

[TextRange offsetLeft 和 offsetTop 在 Internet Explorer 8 标准模式 (IE8) 中损坏](https://stackoverflow.com/questions/10591903/textrange-offsetleft-and-offsettop-broken-in-internet-explorer-8-standards-mode/12755797#12755797)

# ios - 仅禁用 UITableViewCell 上的左滑动。

> ID：13050621
> 
> 赞同：1
> 
> 时间：2012-10-24T13:46:07.583
> 
> 标签：ios, iphone, uitableview, uigesturerecognizer, uipangesturerecognizer

我的主视图控制器包括一个表格视图和一个单独的右侧视图，当用户向左平移时它会折叠起来。

我在这个控制器上设置了一个**PanGestureRecogniser**，以便用户可以使用它在两个视图之间切换。它工作正常，除了一个问题。

当只有一个或两个单元格时，用户需要使用底部未被单元格覆盖的空白区域进行平移。当有单元格覆盖整个视图时，或者当用户向左平移时，单元格的滑动删除功能被激活，因为平移手势总是触发滑动手势。

我想保留滑动删除功能，但**仅**当用户在单元格上向右滑动时。

任何左侧滑动/平移都应始终展开右侧的第二个视图。我正在使用自定义 UITableViewCell 子类。有没有办法只禁用**左**滑动进入删除模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:38:05.460

这是完全可能的。

这是代码。将相同的内容添加到您的`- (void) viewDidLoad`方法中：

```
UISwipeGestureRecognizer * newSwipeGR = [[UISwipeGestureRecognizer alloc] initWithTarget:nil action:nil];
newSwipeGR.direction = UISwipeGestureRecognizerDirectionLeft;
newSwipeGR.numberOfTouchesRequired = 1;
[self.myTableView addGestureRecognizer:newSwipeGR]; 
```

仍然像往常一样启用删除模式，但是您现在发现删除滑动只在一个方向上起作用。

# jquery - 滚动导航栏的小问题

> ID：13050624
> 
> 赞同：2
> 
> 时间：2012-10-24T13:46:17.150
> 
> 标签：jquery

所以我在这里有一些代码可以将导航栏捕捉到屏幕顶部，我有两个小问题。

第一个是它不适用于IE9，第二个是当按住滚动条滚动时，当它到达要发生动作的点时，它会将滚动条捕捉到屏幕顶部并锁定它，直到您取消单击。

```
$(window).on('scroll', function() {
    if (!docked && init < body.scrollTop() ) {
        nav_menu.addClass('docked').css({
            top: 0,
            position: 'fixed'
        });
        docked = true;
    }
    else if (docked && body.scrollTop() <= init) {
        nav_menu.removeClass('docked').css({
            position: 'absolute',
            top: init + 'px'
        });
        docked = false;
    }
}); 
```

[这是对 jQuery LESS](http://lesscss.org)页面上使用的代码的改编，所以我猜它与 jQuery 如何处理函数有关，但它让我很好奇。

编辑：这是相关的 HTML

```
 <header>
        <section id="top-picture"><img alt="Logo" src="img/top.png" /></section>
        <nav id="nav-menu">
            <ul>
                <li><a href="index.php">Home</a></li>
                <li><a href="about.php">About</a></li>
                <li><a href="artists.php">Artists</a></li>
                <li><a href="artwork.php">Artwork</a></li>
                <li><a href="music.php">Music</a></li>
                <li><a href="download.php">Download</a></li>
            </ul>
            <ul>
            <!-- Social Media section
                Facebook Like button -->
                <li><div class="fb-like" data-href="urlhere" data-send="false" data-layout="button_count" 
                data-width="90" data-show-faces="false"></div></li>
                <!-- Tweet button -->
                <li><a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-count="horizontal" 
                data-url="urlhere" data-via="user" data-related="user" data-text="text">Tweet</a></li>
            </ul>
        </nav>
    </header> 
```

这是完整的相关JS

```
jQuery(document).ready(function($){
    var nav_menu = $('#nav-menu');
    var body = $('body');
    var init = nav_menu.position().top;
    var docked = false;

    $(window).on('scroll', function() {
        if (!docked && init < body.scrollTop() ) {
            nav_menu.addClass('docked').css({
                top: 0,
                position: 'fixed'
            });
            docked = true;
        }
        else if (docked && body.scrollTop() <= init) {
            nav_menu.removeClass('docked').css({
                position: 'absolute',
                top: init + 'px'
            });
            docked = false;
        }
    });
}); 
```

这是相关的 CSS，它使用 LESS 和 Bootstrap：

```
@import "colors"; // importing preset color list
@import "bootstrap";

@linkColor: lighten(@Maroon, 5%);

/* Structure */

body {
  background: @Black;
  z-index: 1;
}

section#top-picture {
  img {
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  z-index: 300;
}

header {
  nav#nav-menu {
    background: @Black;
    position: absolute;
    top: 176px;
    width: 100%;
    border: 1px inset lighten(@Black, 30%);
    box-shadow: 0 0 15px 5px @White inset;
    -moz-box-shadow:  0 0 15px 0px @White inset;
    -webkit-box-shadow:  0 0 15px 0px @White inset;
    z-index: 500;
    ul {
      list-style-type: none;
      text-align: center;
      li {
        display: inline;
      }
      &:first-child {
        padding-top: 1%;
        li {
          padding: 2.5%;
          a {
            .anchor-button;
            .btn-large;
            font-weight: bold;
            text-transform: uppercase;
            text-decoration: none;
          }
        }
      }
      &:last-child {
        li {
          margin: 0 5%;
        }
      }
    }
  }
} 
```

导航栏上方有一张图片，位于 section#top-picture 处。

# .net - 工作流程 4.5 ReceiveAndSendReply

> ID：13050627
> 
> 赞同：1
> 
> 时间：2012-10-24T13:46:31.317
> 
> 标签：.net, workflow-foundation-4, .net-4.5

我有 2 个状态的状态机工作流程。状态 1 有 2 个转换，它们共享相同的触发器，即接收操作。

我想做的是：如果收到的消息是“GO”，则transition1动作是回复“DONE”如果收到的消息不是“GO”，则transition2动作是回复“TRY AGAIN”

我面临的问题是：我可以使用 ReceiveAndSendReply 活动，但我无法让一切都与触发器上的接收和**转换**操作上的回复一起工作......

谁能告诉我我该怎么做？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:44:57.100

如果相关性设置正确，则给予接收消息可以有超过 1 个回复。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ee358755.aspx](http://msdn.microsoft.com/en-us/library/ee358755.aspx)

# c# - 如何将输入事件路由到共享同一区域的许多画布中的特定画布？

> ID：13050635
> 
> 赞同：2
> 
> 时间：2012-10-24T13:46:51.140
> 
> 标签：c#, c#-4.0, windows-8, prism, windows-store-apps

我有一些逻辑上由几层组成的面向图形的 Windows-Store-App 应用程序。每一层都绘制自己的事物类型。

由于某些原因，我选择将每一层表示为 WPF 画布。所以有多个画布在逻辑上共享同一个区域。非画布嵌套在另一个中。它们都在“文档大纲”树中的同一级别，位于网格对象的某个单元格下。

我希望输入事件仅路由到一个特定的画布，但我不知道如何订购 WPF 来做到这一点。所有输入事件总是到达同一个画布，这不是所需的画布。

我试图操纵 Canvases 的 ZIndex 和 IsHitTestVisible 属性以实现所需的结果，但它似乎并没有改变应用程序的行为。无论我做什么，事件总是到达相同的特定画布。

我试图将所需的画布放在所有其他画布的顶部，并尝试关闭所有不需要的画布的命中测试。这些行动都没有成功。

如何告诉框架将事件路由到我选择的画布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:53:14.207

即使它们都处于相同的“级别”，每个画布仍然绘制在另一个之上。最后一个要绘制的是 XAML 视图中列出的最低的一个。列出的最低的也是第一个有机会捕获输入的。更改 ZIndex 确实会更改它们的绘制顺序，但我不相信它会更改处理输入的顺序。

您*应该能够通过将***IsHitTestVisible** 属性设置为 false来阻止所有您不希望处理输入的输入。如果这不起作用，我很想知道哪些事件仍在进行中。

# iphone - iPhone NSDestinationInvalidException 在 NSURLConnection 活动时点击主页按钮后

> ID：13050637
> 
> 赞同：0
> 
> 时间：2012-10-24T13:46:58.093
> 
> 标签：iphone, multithreading, performselector

我无法理解一个异常，它在按下主页按钮几秒钟后抛出。

`*** Terminating app due to uncaught exception 'NSDestinationInvalidException', reason: '*** -[GMMLoader performSelector:onThread:withObject:waitUntilDone:modes:]: target thread exited while waiting for the perform'`

我正在编写一个应用程序，它使用 Web 服务来加载不同的数据集。Web 服务被添加到 operationQueue。

```
WebService* op = 
    [[WebService alloc] initWithSearchString:self.searchBar.text
      notificationCenter:self.progressNotification];
    [self.queue addOperation:op];

[op addObserver:self 
         forKeyPath:@"isFinished" 
            options:NSKeyValueObservingOptionNew 
            context:NULL];

[op release]; 
```

在`-(void) start`Web 服务的消息中，我称这个启动选择器在主线程中执行，以便能够与 UI 交互。

```
- (void)start
{
    if (![NSThread isMainThread]){

        [self performSelectorOnMainThread:@selector(start) withObject:nil waitUntilDone:YES];
        return;
    }
    ...
} 
```

所有这些都可以正常工作，但是当我在 Web 服务处于活动状态时按下主页按钮时，我得到了提到的异常。

我的猜测是，按下主页按钮后主线程停止（是这样吗？）。因此，当前正在运行的操作不再更新/有效。

我试图通过取消或暂停队列中的操作来收听事件`UIApplicationWillResignActiveNotification`以对按下主页按钮做出反应。然而这并没有帮助。我的猜测是否正确，因为主线程停止而发生此错误？我还能如何设法停止/取消当前的 Web 服务线程？

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:12:21.310

我发现了错误。事实证明，这不是网络服务本身的问题，而是地理定位器的问题，它被创建并启动了两次。

因此，创建了某种僵尸线程，它永远不会停止。

# asp.net-mvc-3 - 检索 userId 并使用 linqtotwitter 发送私人消息

> ID：13050638
> 
> 赞同：0
> 
> 时间：2012-10-24T13:47:08.627
> 
> 标签：asp.net-mvc-3, linq-to-twitter

我想用我在 asp.net mvc3 中的网络应用程序向 Twitter 发送私人消息。我正在使用 进行授权`oauth`，这是我的代码：

在帐户控制器中：

```
 public ActionResult LogOn()
    {
        credentials.ConsumerKey = TwitterClient.ConsumerKey;
        credentials.ConsumerSecret = TwitterClient.ConsumerSecret;

        auth = new MvcAuthorizer {  Credentials = credentials };
        auth.CompleteAuthorization(Request.Url);
        if (!auth.IsAuthorized)
        {
            string callbackUrl = "http://127.0.0.1:31891/Account/CompleteAuth";
            Uri uri = new Uri(callbackUrl);
            return auth.BeginAuthorization(uri);
        }
        return RedirectToAction("Index", "Home");
     } 
```

用户被授权后，他被重定向到动作`CompleteAuth`，我得到了令牌`tokenSecret`，这里是这个动作的代码：

```
 public ActionResult CompleteAuth(string oauth_token, string oauth_verifier)
   {          
        string AccessToken = oauth_token;
        string AccessTokenSecret = oauth_verifier;
        TempData["AccessToken"] = AccessToken;
        TempData["TokenSecret"] = AccessTokenSecret;
        return RedirectToAction("Tweeting","Home");
    } 
```

之后，当我尝试获取 userId 并向他发送直接消息时，它会重定向到 Home 在推文中：

```
 public ActionResult Tweeting()
    {
        var auth = new MvcAuthorizer
        {
            Credentials = new InMemoryCredentials()
            {
                ConsumerKey  = TwitterClient.ConsumerKey,
                ConsumerSecret = TwitterClient.ConsumerSecret,
                //OAuthToken = (string)Session["AccessToken"],
                //AccessToken = Session["TokenSecret"]
                OAuthToken = TempData["AccessToken"] as string,
                AccessToken = TempData["TokenSecret"] as string
            }
        };
        var twitterContext = new TwitterContext(auth);                                
        var message = twitterContext.NewDirectMessage(auth.UserId, "Hi ucef, cool to discuss with you" + DateTime.Now);
        return View();
    } 
```

但是由于 auth.UserId 为空而发生异常，您知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:51:50.633

这似乎与您之前的问题相同：

[使用 LinqToTwitter 发送私人消息](https://stackoverflow.com/questions/13053529/send-private-message-with-linqtotwitter/13061281#13061281)

乔

# jsf-2 - 在 primefaces 中使用 addCallbackParam 进行投射错误

> ID：13050640
> 
> 赞同：0
> 
> 时间：2012-10-24T13:47:13.130
> 
> 标签：jsf-2, primefaces, seam2

在我的系统中使用 requestContext 演示示例 [http://www.primefaces.org/showcase-labs/ui/requestContext.jsf](http://www.primefaces.org/showcase-labs/ui/requestContext.jsf)

我收到以下错误

```
Caused by: java.lang.ClassCastException: org.primefaces.context.DefaultRequestContext cannot be cast to org.primefaces.context.RequestContext
at org.primefaces.context.RequestContext.getCurrentInstance(RequestContext.java:38) [primefaces-3.4.1.jar:] 
```

java命令运行时出现错误

```
RequestContext context = RequestContext.getCurrentInstance(); 
```

在 jboss seam 2.3.0.Final 和 Jboss AS 7.1 下使用 primefaces-3.4.1

阿米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:49:10.910

您的 webapp 的运行时类路径中有多个不同版本的 PrimeFaces JAR 文件。例如，一个 PrimeFaces 3.3 和另一个 PrimeFaces 3.4.1。他们互相冲突。

清理 webapp 的运行时类路径，以便只保留最新版本，这个问题应该会消失。webapp 的运行时类路径默认覆盖的路径是 webapp 自己的`/WEB-INF/lib`文件夹、服务器和/或 JRE 自己的`/lib`文件`/lib/ext`夹。

* * *

**更新**：另一个实际上更罕见的原因是您有多个*相同*版本的 PrimeFaces JAR 文件，这些文件由不同的类加载器加载。两个类上的`getClass()`将永远不会匹配`==`检查。您需要删除两者之一。

# c - 在C中对二维字符串数组进行排序

> ID：13050641
> 
> 赞同：3
> 
> 时间：2012-10-24T13:47:15.687
> 
> 标签：c, arrays, sorting, multidimensional-array

我需要在 C 中对字符串数组进行排序。这是我使用 2D 数组的方式：

首先，声明一个大小为 115 的数组，数组的每个元素的容量为 10 个字符： `char stock[115][10];`

然后，一旦用户输入了我需要放入该数组的单词，我将其存储为：

```
strcpy(stock[r],msg);
r++; 
```

其中**msg**是用于存储用户输入的临时变量，**r**是最初分配为 0 的整数。

现在的问题是当我需要打印**Stock**数组时。我需要按字母顺序输出。我尝试使用 qsort 但无法让它工作，可能由于对 qsort 缺乏了解，我没有完全正确地实现它。

请建议一种对**STOCK**数组进行排序的方法，以便我可以打印预期的输出。

另请注意，Stock Array 的通常打印工作正常，即，如果我尝试按存储顺序打印数组，它工作正常。这是我需要帮助的排序。

谢谢 ：）

Edit01：我在这里尝试使用的 QSORT 方法是：

```
//Call Qsort Method
qsort(stock, r, sizeof(stock[0]), comp);

//Function to Compare two Strings - Used in the QSORT Method
int comp(const void *s1, const void *s2)
{
    return (strcmp(*(char **)s1, *(char **)s2));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:53:47.677

这是 的原型`qsort`：

```
void qsort(void *base, size_t nmemb, size_t size, 
           int(*compar)(const void *, const void *)); 
```

*   `base`是你的数组（`stock`这里）。
*   `nmemb`是您的数组的成员数（`r`此处）。
*   `size`是元素的大小（`10`此处）。

该`compar`函数应该比较两个字符串，如果第一个参数被认为分别小于、等于或大于第二个，则返回一个小于、等于或大于零的整数。`strcmp`可以为你做。

```
#include <string.h>

int cmp(const void *a, const void *b) { 
    return strcmp(a, b); 
}

qsort(stock, r, 10, cmp); 
```

# node.js - node_redis 中的流水线是什么？

> ID：13050656
> 
> 赞同：5
> 
> 时间：2012-10-24T13:48:04.213
> 
> 标签：node.js, redis, pipeline

[node_redis](https://github.com/mranney/node_redis)状态

> node_redis 的性能通过流水线显着提高，这在大多数普通程序中自动发生。

我正在自己编写程序，那么这里的意思是什么？这是否意味着简单`non-blocking`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T13:50:33.260

这**与**node.js 无关，但与 redis 无关。

> 可以实现请求/响应服务器，以便即使客户端尚未读取旧响应，它也能够处理新请求。这样就可以向服务器发送多个命令，而无需等待回复，最后一步即可读取回复。
> 
> 这被称为流水线，并且是几十年来广泛使用的技术。例如，许多 POP3 协议实现已经支持此功能，从而大大加快了从服务器下载新电子邮件的过程。
> 
> Redis 从很早的时候就支持流水线，所以无论你运行什么版本，你都可以在 Redis 中使用流水线。这是使用原始 netcat 实用程序的示例：

[http://redis.io/topics/pipelining](http://redis.io/topics/pipelining)

# perl - Perl如何将两个或多个excel文件合并为一个（多个工作表）？

> ID：13050659
> 
> 赞同：4
> 
> 时间：2012-10-24T13:48:15.850
> 
> 标签：perl, excel, file, merge

我需要将几个 excel 文件合并为一张，多张。我不太关心新文件上的工作表名称。

我计划运行它的计算机上没有 Excel。所以我不能使用 Win32 OLE。我试图运行此代码[https://sites.google.com/site/mergingxlsfiles/](https://sites.google.com/site/mergingxlsfiles/)但它不起作用，我得到一个新的空 excel 文件。

我尝试运行[http://www.perlmonks.org/?node_id=743574](http://www.perlmonks.org/?node_id=743574)但我只获得了新 excel 文件中的一个文件。

我输入的excel文件有一些法语字符（例如é）我相信这些是cp1252。

使用的代码：

```
 #!/usr/bin/perl -w
    use strict;
    use Spreadsheet::ParseExcel;
    use Spreadsheet::WriteExcel;
    use File::Glob qw(bsd_glob);
    use Getopt::Long;
    use POSIX qw(strftime);

    GetOptions(
        'output|o=s' => \my $outfile,
        'strftime|t' => \my $do_strftime,
    ) or die;

    if ($do_strftime) {
        $outfile = strftime $outfile, localtime;
    };

    my $output = Spreadsheet::WriteExcel->new($outfile)
        or die "Couldn't create '$outfile': $!";

    for (@ARGV) {
        my ($filename,$sheetname,$targetname);
        my @files;
        if (m!^(.*\.xls):(.*?)(?::([\w ]+))$!) {
            ($filename,$sheetname,$targetname) = ($1,qr($2),$3);
            warn $filename;
            if ($do_strftime) {
                $filename = strftime $filename, localtime;
            };
            @files = glob $filename;
        } else {
            ($filename,$sheetname,$targetname) = ($_,qr(.*),undef);
            if ($do_strftime) {
                $filename = strftime $filename, localtime;
            };
            push @files, glob $filename;
        };

        for my $f (@files) {
            my $excel = Spreadsheet::ParseExcel::Workbook->Parse($f);
            foreach my $sheet (@{$excel->{Worksheet}}) {
                if ($sheet->{Name} !~ /$sheetname/) {
                    warn "Skipping '" . $sheet->{Name} . "' (/$sheetname/)";
                    next;
                };
                $targetname ||= $sheet->{Name};
                #warn sprintf "Copying %s to %s\n", $sheet->{Name}, $targetname;

                my $s = $output->add_worksheet($targetname);
                $sheet->{MaxRow} ||= $sheet->{MinRow};
                foreach my $row ($sheet->{MinRow} .. $sheet->{MaxRow}) {
                    my @rowdata = map {
                        $sheet->{Cells}->[$row]->[$_]->{Val};
                    } $sheet->{MinCol} ..  $sheet->{MaxCol};
                    $s->write($row,0,\@rowdata);
                }
            }
        };
    };

    $output->close; 
```

我有 2 个名为的 excel 文件：2.xls（其中只有 1 个名为 2 的工作表）、3.xls（只有 1 个名为 3 的工作表）

我这样启动脚本：

```
xlsmerge.pl -s -o results-%Y%m%d.xls 2.xls:2 3.xls:3 
```

结果：results-20121024.xls 中没有任何内容。

然后我尝试了

```
xlsmerge.pl -s -o results-%Y%m%d.xls 2.xls 3.xls 
```

它奏效了。我不确定为什么在添加 Sheetname 时会失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:48:11.860

脚本的这一行似乎有一个错误：

```
if (m!^(.*\.xls):(.*?)(?::([\w ]+))$!) {
     ($filename,$sheetname,$targetname) = ($1,qr($2),$3);
     ... 
```

在我看来，该行的目标是允许参数形式为

```
spreadsheet.xls:source_worksheet 
```

或以允许指定目标工作表名称的另一种形式：

```
spreadsheet.xls:source_worksheet:target_worksheet 
```

最后一个分组似乎旨在捕获最后一个可选参数：`(?::([\w ]+))`. 唯一的问题是，这个分组不是可选的。因此，当您只指定源工作表而不指定目标时，正则表达式无法匹配，它会落入备份行为，即将整个参数视为文件名。但这也失败了，因为您没有名为`2.xls:2`.

解决方案是在正则表达式的最后一组之后引入`?`修饰符以使其可选：

```
if (m!^(.*\.xls):(.*?)(?::([\w ]+))?$!) {
     ($filename,$sheetname,$targetname) = ($1,qr($2),$3);
     ... 
```

当然，这可能不是唯一的问题。如果脚本发布时出现错误，则也可能存在其他错误。我目前没有可用的 Perl 来测试它。

# iphone - UIActivity 指示器当用作 Utableview 页脚显示在设备中拉伸？

> ID：13050662
> 
> 赞同：0
> 
> 时间：2012-10-24T13:48:25.783
> 
> 标签：iphone, ios, ipad

我正在使用 UIActivity 指示器作为 UItableviewfooter，我的代码显示在这里

```
spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
 spinner.frame=CGRectMake(0, 0, 310, 44);
[spinner startAnimating];

self.myTableView.tableFooterView=spinner; 
```

这在模拟器中运行良好，但是当我在设备中运行它时，活动指示器似乎根据单元格尺寸在两个轴上拉伸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:53:29.190

```
spinner.frame=CGRectMake(0, 0, 310, 44); 
```

可能是因为您将活动微调器的宽度设置为 310 点。相反，将其设置为 44（使框架为正方形），并调整 x 原点参数使其居中。

我目前无法对此进行测试，但它可能采用以下形式：

```
CGFloat activityWidth = 44;
CGFloat activityHeight = 44;
CGFloat tableFooterViewWidth = self.myTableView.tableFooterView.frame.size.width;

spinner.frame=CGRectMake(tableFooterViewWidth - (activityWidth/2),
                         0,
                         activityWidth,
                         activityHeight); 
```

# powershell - 如何在不删除视图的情况下隐藏共享点字段（以编程方式）

> ID：13050663
> 
> 赞同：1
> 
> 时间：2012-10-24T13:48:26.057
> 
> 标签：powershell

我想隐藏列表中的一个字段，但不将其从视图列表中删除。我想取消选中它，这样当用户查看列表的默认视图时它就不会出现。在这种情况下，我使用默认视图。

我使用了 delete 方法，但它从视图表单中完全删除了它。

```
$ListViewFields.Delete($fieldInstance) 
```

请参阅下图作为示例：

![在此处输入图像描述](../Images/4d68370e454b8967419aafe81f8048b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T20:17:43.693

列表视图字段名称与您在 GUI 中看到的名称不同（例如，它们不包含空格）。

我执行以下脚本来获取我的列表视图：

```
$spWeb = Get-SPWeb http://servernamehere/docs/test/sitename
$spList = $spWeb.List["MyList"]
$spView = $spList.DefaultView 
```

要查看所有可用的列表视图字段名称，请执行：

```
$spView.ViewFields 
```

您会注意到字段名称有很大不同。例如：

*   标题 -> 标题
*   标题（链接到项目）-> LinkFilename
*   类型（链接到文档的图标）-> DocIcon
*   文档作者 -> Document_x0020_Author

因此，要删除突出显示的三个项目，您将执行以下操作：

```
$spView.ViewFields.Delete("Title")
$spView.ViewFields.Delete("LinkFilename")
$spView.ViewFields.Delete("DocIcon")
$spView.Update() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T12:41:41.980

只是一个小小的提示：

```
$spView.ViewFields 
```

为了显示所有字段，例如：

```
"field 1"
"field 2"
"field 3" 
```

然后你可以安全地运行：

```
$spView.ViewFields.Delete("field 1")
$spView.Update() 
```

# .net - 判断SqlException是否是由于网络问题

> ID：13050665
> 
> 赞同：0
> 
> 时间：2012-10-24T13:48:40.673
> 
> 标签：.net, sql, sql-server

我需要能够测试 System.Data.SqlClient.SqlException 是否是由于网络错误（连接到 MS SQL Server 的.NET 环境）。如果是，我可以告诉用户他的连接有问题，而如果不是，则很可能是我的代码中的错误，需要区别对待。显然，不出现误报是至关重要的（当它是一个错误时声明某个网络问题）。

[在此处](https://stackoverflow.com/questions/7481076/identifying-sqlexception-due-to-network-problem)的相关问题中，建议从异常文本中提取信息。就我而言，这很丑陋且困难，因为文本是本地化的，并且可能因环境而异。

目前，我检查了某些函数调用的调用堆栈，这些函数调用（根据经验）与网络问题有关：

```
System.Data.SqlClient.TdsParserStateObject.WritePacket
System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket
System.Net.Sockets.SocketException 
```

但是，如果在执行例如 SELECT 查询时出现超时，这些都不会弹出。因此，我将不得不重新检查异常消息中是否出现“超时”，这很难看。

有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:08:20.893

解析错误消息和堆栈是您最不想做的*事情*。

[`SqlException`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.aspx)附带一个集合[`Errors`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.errors.aspx)。
通过检查 [`SqlError.Number`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlerror.number.aspx),[`SqlError.State`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlerror.state.aspx)和 SqlException 内部异常，您可以很好地猜测异常是本地（即网络）还是远程（即服务器上）。服务器很可能会报告超过 100 的错误号。错误号 -2、-1、2 和[53](http://msdn.microsoft.com/en-us/library/bb326277.aspx)被认为是客户端错误。包含内部 Win32Exception 的异常也是客户端。MSDN 包含此[决策表](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlerror.number.aspx)以提供帮助。

附带说明：超时不是服务器错误，SQL Server 中没有查询超时这样的概念。超时由您自己的应用程序触发，因为[`SqlCommand.CommandTimeout`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx).

# php - 将数据从动作传递到过滤器 - Yii

> ID：13050672
> 
> 赞同：0
> 
> 时间：2012-10-24T13:49:28.373
> 
> 标签：php, filter, yii

我正在寻找有关如何解决我遇到的问题的建议。我有一个对函数执行数据库检查的过滤器`postFilter`。过滤器主要查看是否应生成电子邮件并发送站点管理员设置的模板。此功能按预期工作。

我遇到的问题是，我需要将某些操作传递给仅在操作中公开的电子邮件模板。我最初的想法是以可以从过滤器函数访问的数组的形式将所需的值分配给系统参数。这样做的问题是记录每个传递额外数据的操作。

我只是想知道是否有更优雅的解决方案......我想让系统对用户尽可能灵活，所以如果有一种方法可以让用户设置一个捕获`preFilter`动作，然后可以将所需的信息传递给`postFilter`.

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:03:41.467

由于数据是在动作中生成的，因此无法避免这样一个事实，即动作*必须*以某种方式进行合作才能使数据可供最终发送电子邮件的任何代码使用。因此，我看不出如何*不必*记录“动作 X 暴露数据 Y”。

一个非常简单但同时又非常合适的解决方案是在基本控制器上具有一对`setContextData`/功能；`getContextData`动作设置数据，后过滤器读取它。

# c++ - 使用 cout 的 c++ 静态方法输出始终为 1

> ID：13050673
> 
> 赞同：1
> 
> 时间：2012-10-24T13:49:42.257
> 
> 标签：c++, methods, static

所以我有一段代码和这样的类：

```
#include<iostream>
#include<cstring>

class stu
{
    static int proba;
public:
    stu();
    static int no(){
        return proba;
    }
};

int stu::proba=0;

stu::stu()
{
    proba=proba+1;
}

int main()
{
    std::cout<< stu::no << std::endl;
} 
```

输出为 1。即使我改变`stu::no`了它也会这样做`{return 12;}` 为什么它会发生？我如何解决它？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:51:28.060

将其更改为`std::cout<< stu::no() << std::endl;`

没有`()`，我相信它是作为指针进行评估，而不是按照您的期望进行。

编辑：正如@Loomchild 所指出的， using`g++ -Wall`将提供关于为什么它总是 1 的进一步见解。指向静态函数的指针总是`true`在这个上下文中被评估，因此被打印的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:51:53.933

`std::cout<< stu::no << std::endl;`打印函数的地址，你实际上并没有调用它。

```
std::cout<< stu::no() << std::endl; 
```

调用函数并打印返回值。

在 MSVS 中，这确实会产生一个指针值，并带有重载`operator << (void*)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:01:27.913

使用 stu::no() 代替 stu::no。此外，真的是一件小事，但如果你把

使用命名空间标准；

在#includes 下面你不必使用std::

只是让事情更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:52:00.103

`stu::no`是一个不带参数并返回 int 的函数。

没有`operator<<`具有您特定签名的函数，因此考虑了可用的重载。长话短说，`operator<<(ostream&, bool)`在函数到指针和指针到布尔转换之后，这是最接近的匹配。

由于函数实际存在，它的地址肯定是非零的，所以指向 bool 转换的指针总是产生`true`，你看到的就是`1`。

让它`std::cout<< std::boolalpha << stu::no << std::endl;`自己看看它确实是一个布尔输出。

让它`std::cout<< stu::no() << std::endl;`打印函数调用的结果。

请参阅[如何使用 cout 打印函数指针？](https://stackoverflow.com/questions/2064692/how-to-print-function-pointers-with-cout)如果您想更详细地了解发生了什么。

# ruby-on-rails - rails/heroku 从 gem 迁移到 toolbelt

> ID：13050678
> 
> 赞同：3
> 
> 时间：2012-10-24T13:49:51.570
> 
> 标签：ruby-on-rails, heroku, gem

我曾经在一个项目中使用 heroku gem。现在工具带出来了，我想切换。我从 Gemfile 中删除了 gem，并通过 gem uninstall heroku 卸载了它。我从 heroku 的网站安装了带有 pkg​​ 的 heroku toolbelt。

现在，我系统上的任何地方似乎都可以使用新的工具带，例如

```
 heroku version 
```

但是在我存储 Rails 项目的那个目录中，我收到一个错误，因为它仍在寻找旧的 heroku gem（现在已被卸载）。

如何链接到新工具带而不是该文件夹中的旧 gem？

顺便说一句：我还创建了一个新的 rvm gemset，它并没有改变行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:34:20.280

删除`~/.heroku/client`文件夹并重新安装工具带。

参考：[https ://stackoverflow.com/a/10988217/429758](https://stackoverflow.com/a/10988217/429758)

# javascript - 从异步委托函数返回值

> ID：13050692
> 
> 赞同：2
> 
> 时间：2012-10-24T13:50:36.647
> 
> 标签：javascript, sharepoint, object, model, client

我正在使用 javascript 处理 Sharepoint 客户端对象模型，并希望尽可能多地使我的代码可重用。

使用 COM 的示例通常看起来像这样，先调用一个成功的委托函数，然后输出结果。

```
function loadProfile()
{
    var context = SP.ClientContext.get_current();         
    var web = context.get_web();         
    var userInfoList = web.get_siteUserInfoList();
    camlQuery = new SP.CamlQuery();         
    camlQuery.set_viewXml('');         
    this.listItems = userInfoList.getItems(camlQuery);         
    context.load(listItems);         
    context.executeQueryAsync(Function.createDelegate(this, this.onProfileSuccessMethod), Function.createDelegate(this, this.onFail));     

}
function onProfileSuccessMethod(sender, args) 
{
    var item = listItems.itemAt(0);
    var first_name = item.get_item('FirstName');
    var last_name = item.get_item('LastName');
    alert(first_name + " " + last_name);
}

function onFail(sender, args)
{
  alert('Error: ' + args.get_message() + '\n' + args.get_stackTrace());
} 
```

我想要实现的是能够在实例化一个对象后返回值，但鉴于它是异步的，我不确定这是怎么可能的，我是否需要在返回值之前“监听”完成调用。

会是这样吗？或者你不能在它创建它的函数内部没有一个委托函数。为我有限的理解道歉！

```
var profile = new loadProfile("testid");
alert(profile.onProfileSuccessMethod());

function loadProfile (id) 
{
    this.user_id = id;
    var context = SP.ClientContext.get_current();         
    var web = context.get_web();         
    var userInfoList = web.get_siteUserInfoList();
    camlQuery = new SP.CamlQuery();         
    camlQuery.set_viewXml('');         
    this.listItems = userInfoList.getItems(camlQuery);         
    context.load(listItems);         
    context.executeQueryAsync(Function.createDelegate(this, this.onProfileSuccessMethod), Function.createDelegate(this, this.onFail));    
   this.onProfileSuccessMethod = function() 
{
    var item = listItems.itemAt(0);
    this.first_name = item.get_item('FirstName');
    this.last_name = item.get_item('LastName');
        return this.first_name

    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:53:47.573

如果它是异步的，则不可能从中返回值。您需要使用回调模式。

```
function secondStep(data){
    console.log(data)
}

var profile = new loadProfile("testid", secondStep); 
```

和

```
function loadProfile (id, callback) 
    ...
    this.onProfileSuccessMethod = function(){
        callback({});
    } 
```

# c# - 保证变量的最新值始终对多处理器系统上的多个线程可见

> ID：13050695
> 
> 赞同：26
> 
> 时间：2012-10-24T13:50:56.757
> 
> 标签：c#, .net, multithreading

我正在使用这样的配置：

*   .NET 框架 4.5
*   视窗服务器 2008 R2
*   HP DL360p Gen8（2 * Xeon E5-2640，x64）

我的程序中某处有这样的字段：

```
protected int HedgeVolume; 
```

我从几个线程访问这个字段。我假设因为我有多处理器系统，所以这个线程可能在不同的处理器上执行。

我应该怎么做才能保证任何时候我使用这个字段最新的值是“读取”？并确保当我“写入”值时它立即可供所有其他线程使用？

我该怎么办？

*   保持原样。
*   声明它`volatile`
*   使用`Interlocked`类访问字段
*   使用 .NET 4.5访问字段的`Volatile.Read`方法`Volatile.Write`
*   采用`lock`

我只需要最简单的方法来使我的程序在**此配置**上运行我不需要我的程序在另一台计算机或服务器或操作系统上运行。我还想要**最小的**延迟，所以我正在寻找**最快**的解决方案，它总是可以在**这个**标准配置（多处理器 intel x64，.net 4.5）上工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T07:34:37.000

您的问题缺少一个关键要素……该领域数据的完整性有多重要？

`volatile`为您提供性能，但如果一个线程当前正在向该字段写入更改，则在完成之前您不会获得该数据，因此您可能会访问过时的信息，并可能覆盖另一个线程当前正在执行的更改。如果数据很敏感，您可能会遇到难以跟踪的错误。但是，如果您正在进行非常快速的更新，请在不读取值的情况下覆盖该值，并且不在乎偶尔会过时（几毫秒）数据，那就去做吧。

`lock`保证一次只有一个线程可以访问该字段。您可以仅将其放在写入字段的方法上，而不要理会读取方法。不利的一面是，它很慢，并且可能会在另一个线程执行其任务时阻塞一个线程。但是，您确信您的数据保持有效。

`Interlock`存在以保护自己免受调度程序上下文切换的影响。我的意见？除非您确切地知道为什么要使用它以及确切地使用它，否则不要使用它。它提供了选择，但有很多选择会带来很大的问题。它可以防止在更新变量时进行上下文切换。它可能不会像您认为的那样做，也不会阻止并行线程同时执行它们的任务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T10:59:46.017

你想用`Volatile.Read()`.

当您在 x86 上运行时，C# 中的所有写入都相当于`Volatile.Write()`，您只需将其用于 Itanium。

`Volatile.Read()`将确保您获得最新的副本，而不管上次是哪个线程编写的。

这里有一篇很棒的文章，[C# Memory Model Explained](http://igoro.com/archive/volatile-keyword-in-c-memory-model-explained/)

它的摘要包括，

> 在某些处理器上，编译器不仅必须避免对易失性读写进行某些优化，还必须使用特殊指令。在多核机器上，不同的核有不同的缓存。默认情况下，处理器可能不会费心使这些缓存保持一致，并且可能需要特殊指令来刷新和刷新缓存。

希望这很明显，除了需要`volatile`阻止编译器对其进行优化之外，还有处理器。

> 但是，在 C# 中，所有写入都是易失性的（与 Java 中的说法不同），无论您写入的是易失性字段还是非易失性字段。因此，上述情况实际上从未在 C# 中发生过。易失性写入会更新线程的缓存，然后将整个缓存刷新到主内存。

你不需要`Volatile.Write()`。更权威的来源在这里，[Joe Duffy CLR 内存模型](http://www.bluebytesoftware.com/blog/PermaLink,guid,efdf6840-c071-4c5b-addf-9c3205de7f1d.aspx)。但是，您*可能*需要它来停止编译器对其重新排序。

> 由于所有 C# 写入都是易失的，因此您可以将所有写入视为直接进入主内存。常规的非易失性读取可以从线程的缓存中读取值，而不是从 main

你需要`Volatile.Read()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T07:50:49.940

当你开始设计一个并发程序时，你应该按照优先顺序考虑这些选项：

1) 隔离性：每个线程都有自己的私有数据
2) 不变性：线程可以看到共享状态，但它永远不会改变
3) 可变共享状态：用锁保护对共享状态的所有访问

如果您达到 (3)，那么您实际上需要多快？

获取一个无竞争的锁大约需要 10ns（10 ^(-8)秒）——这对于大多数应用程序来说已经足够快了，并且是保证正确性的最简单方法。

使用您提到的任何其他选项都会带您进入低锁编程领域，这非常难以正确。

* * *

如果你想学习如何编写并发软件，你应该阅读这些：

简介：[Joe Albahari 的免费电子书](http://www.albahari.com/threading/)- 大约需要一天时间阅读

圣经：[Joe Duffy 的“Windows 上的并发编程”](http://www.bluebytesoftware.com/books/winconc/winconc_book_resources.html) ——大约需要一个月的时间阅读

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:59:09.130

取决于你做什么。仅供阅读，易失性最简单，互锁允许更多控制。锁定是不必要的，因为它比您描述的问题更简洁。不确定 Volatile.Read/Write，从未使用过它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T14:08:31.577

`volatile`- 不好，有一些问题（参见 Joe Duffy 的博客）

如果您所做的只是读取值或无条件写入值 - 使用`Volatile.Read`和`Volatile.Write`

如果您需要读取并随后写入更新的值 - 使用`lock`语法。但是，您可以使用类功能在不使用锁定的情况下实现相同的效果`Interlocked`，但这更复杂（涉及`CompareExchange`s 以确保您正在更新读取的值，即自读取操作以来没有被修改+如果值被修改后重试的逻辑读）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T08:49:52.933

由此我可以理解，您希望能够读取它在字段中写入的最后一个值。让我们类比一下数据的sql并发问题。如果您希望能够读取字段的最后一个值，则必须进行原子指令。如果有人正在写入一个字段，则所有线程必须被锁定以进行读取，直到该线程完成写入事务。之后，对该线程的每次读取都是安全的。问题不在于阅读，而在于写作。如果你问我，只要它的书面就足够了，就锁定那个领域......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T20:12:01.200

首先看看这里：[易失性 vs. 互锁 vs. 锁定](https://stackoverflow.com/a/154803/937411)

volatile 修饰符对于多内核 CPU 来说是一个不错的选择。

但这足够了吗？这取决于您如何计算新的 HedgeVolume 值！

*   如果您的新 HedgeVolume 不依赖于当前 HedgeVolume，那么您就完成了 volatile。

*   但是如果 HedgeVolume[x] = f(HedgeVolume[x-1]) 那么你需要一些线程同步来保证 HedgeVolume 在你计算和分配新值时不会改变。在这种情况下，lock 和 Interlocked szenarios 都适用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-06T04:25:16.410

我有一个类似的问题，发现这篇[文章](http://www.albahari.com/threading/)非常有帮助。读起来很长，但我学到了很多！

# opengl - 显示屏上闪烁的黑白条纹

> ID：13050696
> 
> 赞同：1
> 
> 时间：2012-10-24T13:50:57.550
> 
> 标签：opengl, lwjgl

我在 Eclipse 中导入了 lwjgl。老师给了我们一个BaseWindow应用程序，也可以在Eclipse中导入。应用程序应显示 1024x768 黑色窗口。但不是黑色窗口，而是黑色和白色条纹在显示屏上闪烁。屏幕截图： http: [//i.stack.imgur.com/JHsMC.png](http://i.stack.imgur.com/JHsMC.png)
我无法显示条纹图片，因为它们在屏幕截图中不可见。但是还有另一个可见的错误。

这是 BaseWindow.java 文件的来源：

```
import org.lwjgl.*;
import org.lwjgl.opengl.*;
import org.lwjgl.input.*;
import java.nio.*;

public class BaseWindow
{

  protected static boolean isRunning = false;

  public static void main(String[] args)
  {
    // What version of OpenGL is supported?

    // Start our program
    (new BaseWindow()).execute();
  }

  /**
   * Initializes display and enters main loop
   */
  protected void execute()
  {
    try
    {
      initDisplay();
    } catch (LWJGLException e)
    {
      System.err.println("Can't open display.");
      System.exit(0);
    }

    BaseWindow.isRunning = true;
    mainLoop();
    Display.destroy();
  }

  /**
   * Main loop: renders and processes input events
   */
  protected void mainLoop()
  {
    // setup camera and lights
    setupView();

    while (BaseWindow.isRunning)
    {
      // reset view
      resetView();

      // let subsystem paint
      renderFrame();

      // process input events
      processInput();

      // update window contents and process input messages
      Display.update();
    }
  }

  /**
   * Initial setup of projection of the scene onto screen, lights, etc.
   */
  protected void setupView()
  {

  }

  /**
   * Resets the view of current frame
   */
  protected void resetView()
  {

  }

  /**
   * Renders current frame
   */
  protected void renderFrame()
  {
  }

  /**
   * Processes Keyboard and Mouse input and spawns actions
   */
  protected void processInput()
  {
    if (Display.isCloseRequested() || Keyboard.isKeyDown(Keyboard.KEY_ESCAPE))
    {
      BaseWindow.isRunning = false;
    }
  }

  /**
   * Finds best 1024x768 display mode and sets it
   * 
   * @throws LWJGLException
   */
  protected void initDisplay() throws LWJGLException
  {
    DisplayMode bestMode = null;
    DisplayMode[] dm = Display.getAvailableDisplayModes();
    for (int nI = 0; nI < dm.length; nI++)
    {
      DisplayMode mode = dm[nI];
      System.out.println(mode.getFrequency() + " " + mode.getWidth() + " " + mode.getHeight());
      if (mode.getWidth() == 1024 && mode.getHeight() == 768
          && mode.getFrequency() <= 85)
      {
        if (bestMode == null
            || (mode.getBitsPerPixel() >= bestMode.getBitsPerPixel() && mode
                .getFrequency() > bestMode.getFrequency()))
          bestMode = mode;
      }
    }
    System.out.println("Best\n" + bestMode.getFrequency() + " " + bestMode.getWidth() + " " + bestMode.getHeight());
    Display.setDisplayMode(bestMode);
//    FSAA
    Display.create(new PixelFormat(8, 8, 8, 4));
//    No FSAA
//    Display.create();
    Display.setTitle(this.getClass().getName());

    System.out.println("GL_VERSION: "+GL11.glGetString(GL11.GL_VERSION));
    System.out.println("GL_VENDOR: "+GL11.glGetString(GL11.GL_VENDOR));
    System.out.println("GL_RENDERER: "+GL11.glGetString(GL11.GL_RENDERER));
  }

  /**
   * Utils for creating native buffers
   * 
   * @throws LWJGLException
   */
  public static ByteBuffer allocBytes(int howmany)
  {
    return ByteBuffer.allocateDirect(howmany).order(ByteOrder.nativeOrder());
  }

  public static IntBuffer allocInts(int howmany)
  {
    return ByteBuffer.allocateDirect(howmany).order(ByteOrder.nativeOrder())
    .asIntBuffer();
  }

  public static FloatBuffer allocFloats(int howmany)
  {
    return ByteBuffer.allocateDirect(howmany).order(ByteOrder.nativeOrder())
    .asFloatBuffer();
  }

  public static ByteBuffer allocBytes(byte[] bytearray)
  {
    ByteBuffer bb = ByteBuffer.allocateDirect(bytearray.length * 1).order(
        ByteOrder.nativeOrder());
    bb.put(bytearray).flip();
    return bb;
  }

  public static IntBuffer allocInts(int[] intarray)
  {
    IntBuffer ib = ByteBuffer.allocateDirect(intarray.length * 4).order(
        ByteOrder.nativeOrder()).asIntBuffer();
    ib.put(intarray).flip();
    return ib;
  }

  public static FloatBuffer allocFloats(float[] floatarray)
  {
    FloatBuffer fb = ByteBuffer.allocateDirect(floatarray.length * 4).order(
        ByteOrder.nativeOrder()).asFloatBuffer();
    fb.put(floatarray).flip();
    return fb;
  }
} 
```

该应用程序适用于除我之外的所有人。老师帮不了我。

我的电脑：

*   MacBook Pro（2011 年末）
*   AMD Radeon HD 6750M 512 MB
*   10.8.2 (12C60)

*   GL_VERSION：2.1 ATI-1.0.29

*   GL_VENDOR：ATI Technologies Inc.
*   GL_RENDERER：AMD Radeon HD 6750M OpenGL 引擎

有没有人有任何想法，可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:27:00.923

您似乎没有[`glClear()`](http://www.opengl.org/sdk/docs/man/xhtml/glClear.xml)在任何时候清除帧缓冲区（通过）。在这种情况下，GL 实现给你垃圾是完全允许的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:35:57.027

`GL11.glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);`在开始渲染之前调用。

# .net - 用于网格计算的 WCF TCP 绑定或命名管道？

> ID：13050704
> 
> 赞同：2
> 
> 时间：2012-10-24T13:51:29.150
> 
> 标签：.net, wcf, named-pipes, grid-computing

我正在构建一个分布式系统。有几个应用程序（一些是基于 .Net 的（C#），另一些是基于 C++ 的（不是 C++/CLI！））。这些应用程序将安装在集群中的每台计算机上（当前由 Windows 驱动）。在本地 PC 上我用于 IPC：用于 C# 应用程序的 MemoryMappedFiles、用于 C++ 应用程序的共享内存、用于 C# 和 C++ 之间的 IPC 的命名管道。通过 Internet，我使用 WCF TCP 绑定，使用 C# 应用程序作为 C++ 应用程序的桥梁。

什么会更好地用于 LAN 通信？MPICH2，似乎使用 TCP... 典型的命名管道是否比 WCF TCP 绑定更快（禁用安全性等）？消息将非常大，主要是双重类型。WCF 在我的情况下非常方便（所有数学方法都只是合同），但它的性能是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:16:33.077

阅读此内容，[http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx](http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx)。

您可以看到选择取决于服务所在的位置。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:24:23.680

您正在混合两个不同的层，您也可以[在 NamedPipes 上运行 WCF](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx)。命名管道（虽然可以使用很多设置字）并非旨在在两台计算机上的两个进程之间进行通信。

请参阅有关[选择传输](http://msdn.microsoft.com/en-us/library/ms733769.aspx)的 MSDN 页面，以帮助您了解何时使用哪种传输。

> **每种运输方式的优势**
> 
> 本节描述了选择三种主要传输方式中的任何一种的主要原因，包括选择它们的详细决策图。
> 
> **何时使用 HTTP 传输**
> 
> HTTP 是客户端和服务器之间的请求/响应协议。最常见的应用程序由与 Web 服务器通信的 Web 浏览器客户端组成。客户端向服务器发送请求，服务器监听客户端请求消息。当服务器收到请求时，它会返回一个响应，其中包含请求的状态。如果成功，则返回可选数据，例如网页、错误消息或其他信息。有关 HTTP 协议的更多信息，请参阅 HTTP - 超文本传输​​协议。
> 
> HTTP 协议不是基于连接的——一旦发送响应，就不会维护任何状态。要处理多页事务，应用程序必须保持任何必要的状态。
> 
> 在 WCF 中，HTTP 传输绑定针对与旧版非 WCF 系统的互操作性进行了优化。如果所有通信方都使用 WCF，则基于 TCP 或基于命名管道的绑定更快。有关详细信息，请参阅 NetTcpBinding 和 NetNamedPipeBinding。
> 
> **何时使用 TCP 传输**
> 
> TCP 是一种基于连接、面向流的交付服务，具有端到端的错误检测和纠正功能。基于连接意味着主机之间的通信会话在交换数据之前建立。主机是 TCP/IP 网络上由逻辑 IP 地址标识的任何设备。
> 
> TCP 提供可靠的数据传输和易用性。具体来说，TCP 会通知发送方数据包的发送，保证数据包按照发送的顺序发送，重传丢失的数据包，并确保数据包不重复。请注意，这种可靠传递适用于两个 TCP/IP 节点之间，并且与 WS-ReliableMessaging 不同，后者适用于端点之间，无论它们可能包含多少中间节点。
> 
> WCF TCP 传输针对通信两端都使用 WCF 的场景进行了优化。对于涉及不同机器之间通信的方案，此绑定是最快的 WCF 绑定。消息交换使用 BinaryMessageEncodingBindingElement 来优化消息传输。TCP 提供双工通信，因此可用于实现双工合同，即使客户端位于网络地址转换 (NAT) 之后。
> 
> **何时使用命名管道传输**
> 
> 命名管道是 Windows 操作系统内核中的一个对象，例如进程可用于通信的共享内存部分。命名管道有一个名称，可用于单机进程之间的单向或双工通信。
> 
> 如果需要在单台计算机上的不同 WCF 应用程序之间进行通信，并且您希望阻止来自另一台计算机的任何通信，则使用命名管道传输。另一个限制是，从 Windows 远程桌面运行的进程可能会被限制在同一个 Windows 远程桌面会话中，除非它们具有提升的权限。

# teradata - 为什么对 teradata 13.10 执行“select * from dbc.columnsX”非常慢

> ID：13050706
> 
> 赞同：0
> 
> 时间：2012-10-24T13:51:34.247
> 
> 标签：teradata

我`select * from dbc.columnsX`在 teradata 13.10 上执行时遇到了一个奇怪的问题。它很慢；但在 teradata 12.0 上它非常快。对于teradata 13.10，dbc用户是否缺少某些权限或有其他一些原因导致了这种现象。

我知道 columnsX 是 X 视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:35:00.797

我们遇到了同样的问题，Teradata 向我们发送了 x 视图的替换。

这是 DBC.ColumnsX 的脚本：

```
REPLACE VIEW DBC.ColumnsX
AS
SELECT CAST(TRANSLATE(dbase.DatabaseName USING UNICODE_TO_LOCALE
                      WITH ERROR) AS CHAR(30)) (NAMED DatabaseName),
       CAST(TRANSLATE(tvm.tvmname USING UNICODE_TO_LOCALE WITH ERROR)
            AS CHAR(30)) (NAMED TableName),
       CAST(TRANSLATE(tvfields.fieldname USING UNICODE_TO_LOCALE WITH ERROR)
            AS CHAR(30)) (NAMED ColumnName),
       CAST(tvfields.fieldformat AS CHAR(30)) (NAMED ColumnFormat),
       CAST(tvfields.fieldtitle AS VARCHAR(60)) (NAMED ColumnTitle),
       tvfields.SPParameterType(NAMED SPParameterType),
       tvfields.fieldtype(NAMED ColumnType),
       CAST(TRANSLATE(tvfields.UDTName USING UNICODE_TO_LOCALE WITH ERROR)
            AS CHAR(30))(NAMED ColumnUDTName),
       tvfields.maxlength(NAMED ColumnLength,FORMAT 'Z,ZZZ,ZZZ,ZZ9'),
       tvfields.DefaultValue,
       tvfields.Nullable,
       tvfields.CommentString,
       tvfields.TotalDigits(NAMED DecimalTotalDigits,FORMAT 'Z9'),
       tvfields.ImpliedPoint(NAMED DecimalFractionalDigits,FORMAT 'Z9'),
       tvfields.FieldId(NAMED ColumnId),
       tvfields.UpperCaseFlag,
       tvfields.Compressible,
       NULL(NAMED CompressValue),
       TRANSLATE(tvfields.ColumnCheck USING UNICODE_TO_LOCALE WITH ERROR)
       (NAMED ColumnConstraint),
       tvfields.CheckCount (NAMED ConstraintCount),
       CAST(TRANSLATE(DB1.DatabaseName USING UNICODE_TO_LOCALE WITH ERROR)
            AS CHAR(30)) (named CreatorName),
       tvfields.CreateTimeStamp,
       CAST(TRANSLATE(DB2.DatabaseName USING UNICODE_TO_LOCALE WITH ERROR)
            AS CHAR(30)) (named LastAlterName),
       tvfields.LastAlterTimeStamp,
       tvfields.CharType,
       tvfields.IdColType,
       tvfields.AccessCount,
       tvfields.LastAccessTimeStamp,
       tvfields.CompressValueList,
       tvfields.TimeDimension,
       tvfields.VTCheckType,
       tvfields.TTCheckType
FROM DBC.tvfields
         LEFT OUTER JOIN DBC.Dbase DB1
                      ON DBC.tvfields.CreateUID = DB1.DatabaseID
         LEFT OUTER JOIN DBC.Dbase DB2
                      ON DBC.tvfields.LastAlterUID = DB2.DatabaseID,
     DBC.dbase, DBC.TVM
WHERE  tvm.DatabaseId = dbase.DatabaseId
AND    tvm.tvmid = tvfields.tableid
AND   (tvm.tvmid IN
       (/* IDs of tables accessible to the USER */
       SELECT tvm.tvmid
        FROM   TVM, DBASE, ACCESSRIGHTS
        WHERE    tvm.tvmid <> '000000000000'xb
        AND      dbase.DataBaseNameI = USER
        AND      (
                   /* User has right on all in TVMs DB */
                   (tvm.DatabaseId = accessrights.DatabaseId AND
                   accessrights.tvmid = '000000000000'xb AND
                   accessrights.UserId = dbase.DatabaseId)
                 OR
                   /* TVMs DB has right granted to *PUBLIC*  */
                   (tvm.DatabaseId = accessrights.DatabaseId AND
                   accessrights.tvmid = '000000000000'xb AND
                   accessrights.Userid = '00000300'xb)
                 )
        union
        SELECT tvm.tvmid
        FROM   TVM, DBASE, ACCESSRIGHTS
        WHERE    tvm.tvmid <> '000000000000'xb
        AND      dbase.DataBaseNameI = USER
        AND      (
                   /* User has right on this specific TVM */
                   (tvm.tvmid = accessrights.tvmid AND
                   accessrights.UserId=dbase.DatabaseId)
                 OR
                   /* Specific TVM has right granted to *PUBLIC* */
                   (tvm.tvmid = accessrights.tvmid AND
                   accessrights.UserId= '00000300'xb )
                 )
        union
        SELECT tvm.tvmid
        FROM   TVM, DBASE, OWNERS
        WHERE    tvm.tvmid <> '000000000000'xb
        AND      dbase.DataBaseNameI = USER
        AND
                   /* User owns TVMs DB */
                   (tvm.DatabaseId = owners.owneeid AND
                   owners.ownerid = dbase.DatabaseId)
        union
        SELECT tvm.tvmid
        FROM   TVM , DBASE
        WHERE    tvm.tvmid <> '000000000000'xb
        AND      dbase.DataBaseNameI = USER
        AND
                   /* User *IS* TVMs DB */
                   (tvm.DatabaseId = dbase.DatabaseId)
        )
       OR tvm.tvmid IN
       (/* IDs of tables accessible to USER's roles */
        SELECT tvm.tvmid
        FROM   TVM, ACCESSRIGHTS, ROLES
        WHERE  TVM.tvmid       <> '000000000000'xb
        AND    Roles.RoleId    =  AccessRights.UserId
        AND    ROLE IS NOT NULL
        AND    AccessRights.UserId IN
               (SELECT RoleAccr.RoleId
                FROM   DBC.Roles RoleAccr)
        AND    (
                 /* Role has right on all in TVMs DB */
                 (tvm.DatabaseId      = accessrights.DatabaseId AND
                  accessrights.tvmid  = '000000000000'xb)
               )
        AND    (
                (UPPER(ROLE) <> 'ALL'  AND
                  /* Restrict to rights granted to current role */
                  /* and the roles nested within current role   */
                   (Roles.RoleId =
                    (SELECT CurRole.RoleId
                     FROM   DBC.Roles CurRole
                     WHERE  CurRole.RoleNameI = ROLE)
                    OR
                    Roles.RoleId  IN
                     (SELECT RG.RoleId
                      FROM   DBC.RoleGrants RG,
                             DBC.Roles      CurRole
                      WHERE  RG.GranteeId = CurRole.RoleId AND
                             CurRole.RoleNameI = ROLE))
                )
                OR
                (UPPER(ROLE) = 'ALL'  AND
                  /* The current role is ALL. Restrict to rights from */
                  /* the roles directly granted to current user and   */
                  /* nested roles within them */
                  (Roles.RoleId  IN
                   (SELECT UsrRG.RoleId
                    FROM   DBC.RoleGrants UsrRG,
                           DBC.Dbase      UserDB
                    WHERE  UsrRG.GranteeId = UserDB.DatabaseId AND
                           UserDB.DatabaseNameI = USER)
                   OR
                   Roles.RoleId  IN
                   (SELECT  RG.RoleId
                    FROM    DBC.RoleGrants RG
                    WHERE   RG.GranteeId in
                            (SELECT UsrRG.RoleId
                             FROM   DBC.RoleGrants UsrRG,
                                    DBC.Dbase      UserDB
                             WHERE  UsrRG.GranteeId = UserDB.DatabaseId AND
                                    UserDB.DatabaseNameI = USER)))
                )
               )
        UNION ALL
        SELECT tvm.tvmid
        FROM   TVM, ACCESSRIGHTS, ROLES
        WHERE  TVM.tvmid       <> '000000000000'xb
        AND    Roles.RoleId    =  AccessRights.UserId
        AND    ROLE IS NOT NULL
        AND    AccessRights.UserId IN
               (SELECT RoleAccr.RoleId
                FROM   DBC.Roles RoleAccr)
        AND    (
                 /* Role has right on this specific TVM */
                 (tvm.tvmid           = accessrights.tvmid)
               )
        AND    (
                (UPPER(ROLE) <> 'ALL'  AND
                  /* Restrict to rights granted to current role */
                  /* and the roles nested within current role   */
                   (Roles.RoleId =
                    (SELECT CurRole.RoleId
                     FROM   DBC.Roles CurRole
                     WHERE  CurRole.RoleNameI = ROLE)
                    OR
                    Roles.RoleId  IN
                     (SELECT RG.RoleId
                      FROM   DBC.RoleGrants RG,
                             DBC.Roles      CurRole
                      WHERE  RG.GranteeId = CurRole.RoleId AND
                             CurRole.RoleNameI = ROLE))
                )
                OR
                (UPPER(ROLE) = 'ALL'  AND
                  /* The current role is ALL. Restrict to rights from */
                  /* the roles directly granted to current user and   */
                  /* nested roles within them */
                  (Roles.RoleId  IN
                   (SELECT UsrRG.RoleId
                    FROM   DBC.RoleGrants UsrRG,
                           DBC.Dbase      UserDB
                    WHERE  UsrRG.GranteeId = UserDB.DatabaseId AND
                           UserDB.DatabaseNameI = USER)
                   OR
                   Roles.RoleId  IN
                   (SELECT  RG.RoleId
                    FROM    DBC.RoleGrants RG
                    WHERE   RG.GranteeId in
                            (SELECT UsrRG.RoleId
                             FROM   DBC.RoleGrants UsrRG,
                                    DBC.Dbase      UserDB
                             WHERE  UsrRG.GranteeId = UserDB.DatabaseId AND
                                    UserDB.DatabaseNameI = USER)))
                )
               )
        )
      ) WITH CHECK OPTION; 
```

# vba - 访问 2010 VBA - 运行时 3073

> ID：13050710
> 
> 赞同：1
> 
> 时间：2012-10-24T13:51:55.773
> 
> 标签：vba, ms-access

> **可能重复：**
> [操作必须使用可更新查询。（错误 3073）Microsoft Access](https://stackoverflow.com/questions/170578/operation-must-use-an-updatable-query-error-3073-microsoft-access)

我正在使用下面的代码：

```
CurrentDb.Execute "INSERT INTO calldata([username], [reportnumber], [reportdate], [custconcern], [cc], [as]) " & _
" VALUES('" & Me.cboopenedby & "','" & Report_Number & " ','" & _
Me.txtopenedon & "','" & Me.cboconcern & " ','" & strCustconcernfixtxt & " ','" & strActionfixtxt & "')" 
```

它在 Access 2007 中运行良好，但在 2010 年提供给某人时，他们得到：

> 运行时错误 3073 - 操作必须使用可更新查询

有任何想法吗？

# asp.net-mvc - 使用 Ninject 架构实现 MVC.Net N-Tier

> ID：13050711
> 
> 赞同：1
> 
> 时间：2012-10-24T13:51:57.193
> 
> 标签：asp.net-mvc, dependency-injection, ninject, n-tier-architecture

首先，我很欣赏在项目布局方面没有一刀切的，但是当我转向 mvc 时，我想尝试从坚实的基础开始。

目前，到目前为止，我在 asp.net mvc 项目结构和 n 层和依赖注入（ninject）方面真的很挣扎。我一直在阅读 Pro Asp.net Mvc 3 Framwork，它将体育商店分为两个项目，这是一个不错的开始，但我想要更大的分离。

到目前为止，我认为我的项目应该类似于下面的大纲

*   网页界面 (Asp.Net Mvc)

*   服务层

    *   服务接口（摘要）
    *   Service（服务接口的具体实现）
*   数据层

    *   数据接口（摘要）
    *   数据（服务接口的具体实现）

那么我的实体/模型在哪里？我相信我应该将它们移出 Web UI，但我不完全确定它们适合哪里。

是否会为每一层使用单独的实体并使用类似 automapper 的东西在数据实体和服务实体之间进行映射，就像 Microsoft 的项目 Silk 最初所做的那样（这似乎是实现所需分离的相当大的开销）？或者其他层将引用的实体层。该层将包含强类型数据集或可能在基础设施标题下的普通旧 C 对象，然后可以在层之间传递并通过视图模型在 Web Ui 层中进行自定义。

此外，如果使用 Ninject，那么我应该在 Composition Root（在这种情况下为 Web Ui 项目）中配置它。

这意味着添加对所有项目的引用，这会破坏我试图激活的分离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:00:18.893

逻辑层！=物理层。结构越简单，项目越少，管理起来就越容易。

我通常有 1 个 Web 项目并使用命名空间作为我的逻辑层。通常我喜欢有用于 UI 显示的视图模型和域模型来管理实体的行为方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:08:52.917

> 那么我的实体/模型在哪里？

给他们自己的项目。

> 是否会为每一层使用单独的实体，并使用诸如自动映射器之类的东西在数据实体和服务实体之间进行映射，就像 Microsoft 的项目 Silk 最初所做的那样

尽量避免做太多的映射。必须映射到视图模型是很自然的，但不要将实体的所有属性复制到视图模型中，只需将实体作为属性公开在视图模型上并添加特定于 UI 的属性。如果 UI 需要的只是那个实体：不要使用视图模型。这种额外的映射只会给应用程序的可维护性带来额外的负担。

还要尽量避免必须从 DA 映射到您的实体。而是使用 POCO 实体作为实体框架、LINQ to SQL 和 NHibernate 支持。同样，这种额外的映射可能不值得付出努力。

我在我的应用程序中使用的映射通常在另一个层次上。[我围绕命令](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[查询](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)设计我的业务逻辑，这甚至可以很好地转化为表示层。您可以使用 MVC 的绑定功能直接在视图上显示命令，将表单属性绑定回命令并执行它。通过一些额外的工作，MVC 甚至可以让您完全支持编译时（即使在视图中）。

# algorithm - 基于相邻节点计算节点值的图算法

> ID：13050714
> 
> 赞同：6
> 
> 时间：2012-10-24T13:52:01.583
> 
> 标签：algorithm, graph, graph-theory, graph-algorithm

我想制作一个图形算法来更新/计算节点的值作为相邻节点`f(n)`的每个值的函数。`f(n)`

*   图是有向的。
*   每个节点都具有初始 f(n) 值。
*   每条边都没有成本（0）。
*   每个节点的值是其当前值和每个相邻节点的值的最大值（有向图，因此邻居是节点具有传入边的那些）。

更正式地说，

```
f(n) = max(f(n),max_i(f(n_i))), where i from neighbor 1 to neighbor k. 
```

我可以想象一些这样做的方法，但是我不知道它们在多大程度上是最佳的。

任何人都可以提供建议和评论（您认为您的建议是否最佳）或建议任何我可以适应的现有图形算法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T16:24:17.223

**Claims:**

1.  In each [Strongly Connected Component](http://en.wikipedia.org/wiki/Strongly_connected_component) `V` in the graph, the values of all vertices in this SCC have the same final score.
    "Proof" (guideline): by doing propogation in this SCC, you can iteratively set all the scores to the maximal value found in this SCC.

2.  In a [DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph), the value of each vertex is `max{v,parent(v) | for all parents of v}` (definition) and the score can be found within a single iteration from the start to the end.
    "Proof" (guideline): There are no "back edges", so if you know the final values of all parents, you know the final value of each vertex. By induction (base is all sources) - you can get to the fact that a single iteration is enough to determine the final score.

3.  Also, it is known that the graph `G'` representing the SCC of a graph `g` is a DAG.

From the above we can derive a simple **algorithm**:

1.  Fing maximal SCCs in the graphs (can be done with [Tarjan algorithm](http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm)), and create the SCC graph. Let it be `G'`. Note that `G'` is a DAG.
2.  For each SCC `V`: set `f'(V) = max{v | v in V}` (intuitively - set the value of each SCC as the max value in this SCC).
3.  [Topological sort](http://en.wikipedia.org/wiki/Topological_sorting) the graph `G'`.
4.  Do a single traversal according to the topological sort found in (3) - and calculate the f'(V) for each vertex in `G'` according to its parents.
5.  Set `f(v) = f'(V)` (where v is in the SCC V)

**Complexity:**

1.  Tarjan and creating `G'` is `O(V+E)`
2.  Finding f' is also linear in the size of the graph - `O(V+E)`
3.  Topological sort runs in `O(V+E)`
4.  Single traversal - linear: `O(V+E)`
5.  Giving final scores: linear!

So the above algorithm is **linear in the size of the graph** - `O(V+E)`

# windows-installer - Installshield Basic MSI：有条件地卸载组件

> ID：13050715
> 
> 赞同：1
> 
> 时间：2012-10-24T13:52:05.903
> 
> 标签：windows-installer, installshield, custom-action

我有一个使用 Installshield 2012 创建的基本 MSI 设置。

卸载此设置时，我必须检查特定条件，并且根据此条件，我必须保留或卸载某些组件的文件/文件夹/快捷方式。

现在我已经在这些组件上设置了“Permanent=Yes”，并删除了从自定义操作调用的托管程序集中的文件/文件夹/快捷方式。

有没有更好的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:31:11.767

您可能应该考虑选择或取消选择功能而不是组件。Windows Installer 模型采用选定的功能，然后安装这些功能所需的组件。

如果这些文件/文件夹/快捷方式的安装是有条件的，您应该将它们视为属于可选功能的组件。然后，您可以使用[MsiSetInstallLevel](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/98f1d91d-632e-4dea-948f-2dc416b4d410)为安装设置适当的安装级别，以便它根据条件安装或不安装您的可选功能。特征级别在[特征表](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/1faee1d5-6e39-43ea-bf92-a0b3986a13a1)中指定，处理[条件表](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/8e2d7c8d-5734-49aa-ad29-16d4d32cccb4)可以修改特征的级别值。

其中一些在文档中进行了解释：[Working with Features and Components](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/840656f9-ea85-49e7-8842-f779228c30d6)

# php - 接收 JSON POST

> ID：13050716
> 
> 赞同：4
> 
> 时间：2012-10-24T13:52:13.593
> 
> 标签：php, json, post, curl

> **可能重复：**
> [如何在 php 中获取 POST 的正文？](https://stackoverflow.com/questions/8945879/how-to-get-body-of-a-post-in-php)

我收到一个包含 JSON 的 POST，问题是当我收到 $_POST 为空时。为了测试我何时收到 POST，我创建了一个包含 $_POST、$_GET 和 $_REQUEST 的文件，它们都是空的。

发送请求的客户端正在执行以下操作：

```
$itemJson = '{
      "id": 00,
      "value": "ok"
    }';

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(
        'Content-Type: application/json',
        'Content-Length: '. strlen($itemJson))
    );
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
    curl_setopt($ch, CURLOPT_POSTFIELDS, $itemJson);
    curl_close($ch); 
```

老实说，我不明白我是如何获得这些数据的，因为没有参数集。

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T13:58:02.923

在 PHP 中尝试如下（当请求是应用程序/json 时，您不会将数据放入 $_POST）

```
var_dump(json_decode(file_get_contents("php://input"))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T13:58:09.937

尝试

```
$request_body = file_get_contents('php://input');
$json = json_decode($request_body); 
```

在您的接收脚本中。

另见：[http ://docs.php.net/wrappers.php.php](http://docs.php.net/wrappers.php.php)

# json - 从服务返回的 JSON 的淘汰赛选项绑定

> ID：13050718
> 
> 赞同：3
> 
> 时间：2012-10-24T13:52:18.097
> 
> 标签：json, knockout.js, knockout-mapping-plugin

抱歉，如果这已经被提及或回答，但我已经找了几天，无法解决这个问题。我是 Knockout 和 StackOverflow 的新手，所以请多多包涵。

我正在使用 CakePHP，并从我的控制器返回了一些 JSON，格式如下

```
{"countries":[{"Country":{"id":"1","country":"England"}},{"Country":{"id":"2","country":"Wales\/Cymru"}},{"Country":{"id":"3","country":"Scotland"}},{"Country":{"id":"4","country":"Republic of Ireland"}},{"Country":{"id":"5","country":"Northern Ireland"}}]}; 
```

我希望上述县在选择语句中显示为一个项目，其值设置为 1，文本显示为国家。但是，我似乎无法为我做到这一点。我相信这对于那些熟悉淘汰赛的人来说是一个简单的问题，但我不明白该怎么做我看到的只是对象列表，但不知道如何访问数据绑定上的对象属性

HTML

```
<select data-bind="options:countries, optionsText:'Country'"></select>​ 
```

Javascript

```
 var viewModel = {};

    var data = {"countries":[{"Country":{"id":"1","country":"England"}},{"Country":{"id":"2","country":"Wales\/Cymru"}},{"Country":{"id":"3","country":"Scotland"}},{"Country":{"id":"4","country":"Republic of Ireland"}},{"Country":{"id":"5","country":"Northern Ireland"}}]};

    var jsData = ko.mapping.fromJS(data);
    ko.applyBindings(jsData); 
```

我创建了一个简单的 JSFiddle [http://jsfiddle.net/jbrr5/14/](http://jsfiddle.net/jbrr5/14/)来展示正在发生的事情，对于这个小挑战，我们将不胜感激

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:12:56.503

您的数据具有奇怪的结构。就像这样：

```
- 国家
  - 国家
    - ID
    - 国家

```

实际的`id`and`country`是数组中的另一个层次`countries`。您必须做一些修改才能让它们按原样出现在选择元素中。如果您只是映射到内部`Country`对象会更好。

```
var mappingOptions = {
    'countries': {
        'create': function (options) {
            // map to the inner `Country`
            return ko.mapping.fromJS(options.data.Country);
        }
    }
};

var viewModel = ko.mapping.fromJS(data, mappingOptions);
ko.applyBindings(viewModel); 
```

[更新的小提琴](http://jsfiddle.net/jeff1203/jbrr5/17/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:13:04.927

你有非常复杂的数组结构。对于您的情况，您必须编写绑定`'Country.country'`，`options`但它不起作用，因为绑定无法解析如此复杂的表达式。您可以使用而不是使用`options`和绑定：`optionsText``foreach`

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/jbrr5/18/](http://jsfiddle.net/vyshniakov/jbrr5/18/)

但我建议您将数据结构更改为

`{"countries":[{"id":"1","country":"England"}]};`

或相应地映射数据。在这种情况下，您可以使用`options`绑定：

```
<select data-bind="options:countries, optionsText:'country', optionsValue:'id'"></select>​ 
```

# android - android ViewPager 可自定义

> ID：13050720
> 
> 赞同：2
> 
> 时间：2012-10-24T13:52:31.657
> 
> 标签：android, android-viewpager

我需要实现一个滚动视图，如图所示：

![在此处输入图像描述](../Images/cf7e02f9328e7b9824c4ffc21fcd35b0.png)

也就是说，在“空闲”状态下，图像“1”以全尺寸可见，而图像“2”部分可见（从而向用户提供他可以滚动内容的线索）。滚动后，scool view 不能停留在中间状态，并且必须完成滚动（就像 iOS 的 Scroll View 在“启用分页”打开时所做的那样）：

![在此处输入图像描述](../Images/eb338137c04d9c84bb3f70eefc8efa7b.png)

我拒绝使用`HorizontalScrollView`，因为它与“启用分页”属性没有任何相似之处。

谷歌搜索后，我遇到了`android.support.v4.view.ViewPager`. 它的滚动行为完全是我想要的，但我不知道如何支持“部分可见”的下一张图片`ViewPager`？从技术上讲，我应该在

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)? 
```

目前，我的代码是

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    View view = inflater.inflate(R.layout.stage_select_image_layout, container, false);
    ImageView imageView = (ImageView) view.findViewById(R.id.stage_select_image_layout_image);
    imageView.setImageResource(m_imageResourceId);
    return view;
} 
```

但它会导致“每页只有一个图像”的行为，而不是我想要的（见第一张图）。

![在此处输入图像描述](../Images/20a17af21642eb3fe5ee881e87e6fd87.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:48:27.273

这可以解决问题：

```
 ViewPager pager = ...;
    pager.setOffscreenPageLimit(2);
    pager.setPageMargin(-200); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T18:28:38.967

最简单的做法是，在您的 PagerAdapter 中实现 getPageWidth 的覆盖。返回值是视图占总空间的百分比。

```
@Override
public float getPageWidth(int position) {
    return 0.75f;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:14:03.370

使用 ViewPager 的 LayoutParams 的[widthFactor](http://developer.android.com/reference/android/support/v4/view/ViewPager.LayoutParams.html#widthFactor)属性。它应该缩放它，以便您可以看到一些下一页。

# javascript - 检测脚本是否异步加载的方法？

> ID：13050723
> 
> 赞同：0
> 
> 时间：2012-10-24T13:52:39.397
> 
> 标签：javascript, performance, asynchronous, nonblocking

有没有办法在不查看 html 源代码的情况下检测脚本是如何加载的？

通过浏览器插件或使用一点 javascript 或 sth。像那样不干扰页面？例如，Pagespeed 检测谷歌的分析片段是否被异步加载，但我现在不知道他们是如何做到的。

有任何想法吗？我想做这样的自动化性能测试。

# android - 如何避免“从未在 SQLiteDatabase 中的数据库上显式调用 close()”

> ID：13050729
> 
> 赞同：2
> 
> 时间：2012-10-24T13:53:09.003
> 
> 标签：android, sqlite

> **可能重复：**
> [Android 错误 - close() 从未在数据库上显式调用](https://stackoverflow.com/questions/4464892/android-error-close-was-never-explicitly-called-on-database)

我的安卓应用程序有问题。

我实现了一个单例，它有一个带有以下代码的方法：

```
public Cursor getFooCursor(Context context)
{
    StorageDBOpenHelper helper = new StorageDBOpenHelper(context);
    SQLiteDatabase db = helper.getReadableDatabase();

    Cursor c = db.query("Foo", new String[] {"_id", "Titel"}, null, null, null, null, "Test DESC");

    return c;
} 
```

当我使用它时，有时会出现错误：`SQLiteDatabase: close() was never explicitly called on database`

**如何避免这种情况？**问题是，我不能简单地为`db.close()`我做一个`return c`，因为它是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:57:07.177

客户端应打开数据库，然后使用此方法获取游标，完成后关闭游标和数据库。我建议不要在这里使用单例。而是做这样的事情：

```
public class FooDB
{
    private SQLiteDatabase db = null;

    private void open() throws SQLiteException
    {
        if (db != null)
        {
            throw new SQLiteException("Database already opened");
        }

        // Create our open helper
        StorageDBOpenHelper helper = new StorageDBOpenHelper(context);
        try
        {
            // Try to actually get the database objects
            db = m_openHelper.getWritableDatabase();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

        if (db == null)
        {
            throw new SQLiteException("Failed to open database");
        }
    }

    private void close() throws SQLiteException
    {
        if (db != null)
        {
            db.close();
            db = null;
        }        
    }

    public Cursor getFooCursor(Context context)
    {
        if(db == null)
            throw new SQLiteException("Database not open");    

        Cursor c = db.query("Foo", new String[] {"_id", "Titel"}, null, null, null, null, "Test DESC");

        return c;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:57:17.093

我使用的方法是将 的实例传递`db`给返回的类`cursor`：

```
StorageDBOpenHelper helper = new StorageDBOpenHelper(context);
SQLiteDatabase db = helper.getReadableDatabase();

public Cursor getFooCursor(Context context, SQLiteDatabase db ) {
      Cursor c = db.query("Foo", new String[] {"_id", "Titel"}, null, null, null,
 null, "Test DESC");
      return c;
 }

db.close(); 
```

# if-statement - VB6 IIf 优势

> ID：13050731
> 
> 赞同：3
> 
> 时间：2012-10-24T13:53:14.713
> 
> 标签：if-statement, vb6, iif

`IIf`使用over有性能优势`If`吗？

除了更少的代码......有什么区别：

```
If msInitialFloodSection <> Trim$(cboFloodSection.Text) Then
    mbFloodSectionChanged = True
Else
    mbFloodSectionChanged = False
End If 
```

和

```
mbFloodSectionChanged = IIf(msInitialFloodSection <> Trim$(cboFloodSection.Text), True, False) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T13:56:48.300

`IIf`不是运算符或语言结构，它是一个函数，就像任何其他函数一样，例如`Left`. 因此，它将始终评估其所有参数，而`If`您只会评估正确的分支。

例子：

```
denominator = 0
value = IIf(denominator = 0, 0, value / denominator) 
```

`Divizion by zero`尽管分母为零，但存在单独的分支，这将引发错误。

关于性能，它将您的值打包到 Variants 中，这将需要额外的滴答声，根本没有那么多，但如果我们在性能方面，那么`If`会更快，因为它不会通过 Variants 强制执行操作，因为它会只计算其中一个值，而不是两个。

# php - 在 Windows 7x64 上的 wampserver 2.2 上安装并启用 APC for php 5.4.3

> ID：13050733
> 
> 赞同：8
> 
> 时间：2012-10-24T13:53:20.630
> 
> 标签：php

我正在尝试为 symfony 项目安装像 apc 这样的 PHP 加速器。问题是 apc 没有出现在 localhost/?phpinfo=1 中，但是它确实出现在 wamp>php>extensions 菜单托盘上并启用了选项 php_apc。而且当我尝试 localhost/test.symfony.com/web/config 时.php ，symfony 项目似乎没有检测到 apc。

在过去的 3 天里，我一直在尝试解决这个问题:(。

这是我安装和启用 apc.dll 的步骤

1.在扩展的文件夹中，我放置了 apc.dll C:\wamp\bin\php\php5.4.3\ext

我已经根据我的配置从[http://dev.freshsite.pl/php-accelerators/apc.html](http://dev.freshsite.pl/php-accelerators/apc.html)下载了适用于 PHP 5.4 vc9 (Win7/2008) 的 APC 3.1.9 版本的 apc.dll

2.我在 php.ini 中设置了 dll 的扩展，如下在 Dynamic Extensions extension=php_apc.dll

在“模块设置”部分中，我放置了以下内容：-

[APC]

apc.enabled = 1

apc.shm_segments = 1

apc.shm_size = 128M

apc.max_file_size = 10M

apc.stat = 1

3.重启wampserver

我的 php 信息：

编译器 -MSVC9 (Visual C++ 2008)

架构-x64

启用线程安全

阿帕奇版本-2.4.2

php版本-5.4.3

操作系统-窗口 7

谢谢你的友好回复:)

# facebook - 如何防止异物出现在 FB Places 图形调用中？

> ID：13050738
> 
> 赞同：4
> 
> 时间：2012-10-24T13:53:31.367
> 
> 标签：facebook, facebook-graph-api, location

我很困惑在我的 facebook 图表调用中找到没有任何真实链接的对象。假设我在丹麦欧洲的某个点附近打电话。在结果列表中，我可以冒险从新加坡、韩国、德克萨斯州奥斯汀和其他完全关闭的位置获取项目。但是根据FB结果，坐标是匹配的。

以这个电话为例：

[FBGraph 通话，中心：55.676127,12.581892（丹麦哥本哈根），距离：1000m](https://graph.facebook.com/search?limit=20&type=place&center=55.676127,12.581892&distance=1000&format=json&access_token=BAAFszu0TZB30BAE239nOyVcFZCHlZAL8ktqsejJTY8qxsTFtGrH7uXCEZByTDW7C3N1YpyFj3088ZCr0B7wkBU8Rb94CtMvjMBOKVgUYyhVgGY5ZBFFB8xZAUXFAN8cl2ej7HjGNTKQf5PDHHYJ8p3Wf19iNZCV3Th8mZC9BuFXU5DTIgb3Ip9WmAzuy5kghMYOABlmDfemtNZB8x1uQK0eQZCz2ZCiGxBmf0drna8Q1J9szbQZDZD)

以下是一些预期结果：

```
 {
             "name": "Fortunen Bar & Spiseri",
             "location": {
                "street": "Ved Stranden 18",
                "city": "K\u00f8benhavn",
                "country": "Denmark",
                "zip": "1061",
                "latitude": 55.677747326448,
                "longitude": 12.5802503332
             },
             "category": "Local business",
             "id": "454633487897742"
          }, 
```

突然，一个让我感到困惑的结果：

```
 {
         "name": "CampusFrance Hong Kong",
         "location": {
            "street": "25/F, Tower II, Admirality Centre,18, Harcourt Road, Central, ",
            "city": "Hong Kong",
            "country": "Hong Kong",
            "latitude": 55.67758,
            "longitude": 12.58226
         },
         "category": "Government organization",
         "id": "206130582769483"
      }, 
```

我知道我可以通过在 Location country 上进行一些名称比较来过滤掉它们，但是当人们靠近边界时，它会弄乱我的结果，而且，如果我请求 20 个项目，我可能会冒着得到 19 或 18 个的风险，但仍然有可能的下一页...

任何人都知道标志或可以设置的东西来避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:46:26.377

正如 Donn Lee 所提到的，这是一个单独的故障。我们不确定为什么 Facebook 认为这个条目在丹麦，但很明显它不属于那里。

# java - 图像只会在调试时加载，但不会在调试 Java 之外运行时加载

> ID：13050739
> 
> 赞同：0
> 
> 时间：2012-10-24T13:53:37.057
> 
> 标签：java, image, filepath

我试图弄清楚我的图像如何以及为什么只能在 NetBeans 的调试中加载，但是当我执行 JAR 文件时，它将无法加载图像。我已尝试调试代码以修复路径中的问题，但任何更改的语句都对其没有影响。

下面是产生问题的代码。

```
String imagePath = getClass().getResource("/StandardDeck/GameCards/"+ toString() +".png").getPath(); 
```

执行 file.exists() 时，它总是返回 false。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:17:36.940

一旦将应用程序打包到 JAR 文件中，您的方法将不起作用。您不会使用`java.io.File`类访问 JAR 中的图像。

您需要使用[getResourceAsStream](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)方法

```
InputStream imageStream = getClass().getResourceAsStream("/StandardDeck/GameCards/"+ toString() +".png"); 
```

要开始使用图像，请尝试：

```
ImageInputStream imageInputStream = ImageIO.createImageInputStream(imageStream); 
```

# django - Backbone 可以创建对象，但不能获取它们

> ID：13050744
> 
> 赞同：2
> 
> 时间：2012-10-24T13:53:54.127
> 
> 标签：django, backbone.js, tastypie

我是第一次尝试 Backbone.js。我对 Django 并不陌生，因此我正在尝试为 Django 应用程序构建一个由 Backbone 驱动的前端。经过一番研究，我认为 Tastypie 可能是最容易上手的。

经过多次争论，我遇到了这个问题：我可以很好地创建对象，但我无法获取它们中的任何一个。

所以我可以这样做：

```
var foo = new LabSite()
var newInfo={name:"Mine",site_code:"FRED"}
foo.save(newInfo) 
```

我可以在管理员中看到一个名为“Mine”的新 LabSite，其 ID 为 1。

当我尝试这个时：

```
var bar = new LabSite({id:1})

bar.fetch({
    success: function (bar) {
        alert(bar.toJSON());
    }
}) 
```

我没有看到警报。

在返回的对象上，它具有以下响应：

```
responseText: "callback({"id": "1", "name": "Mine", "resource_uri": "/api/v1/labsite/1/","site_code": "FRED"})" 
```

所以它被退回了，价值不存在。也许有些东西不理解响应？

我尝试使用这个主干-tastypie 项目，但它没有改变任何东西： [https ://github.com/amccloud/backbone-tastypie](https://github.com/amccloud/backbone-tastypie)

我的 ModelResource 很简单：

```
class LabSiteResource(ModelResource):

    def determine_format(self, request):
       return  'text/javascript'

    class Meta:
       queryset = LabSite.objects.all()
       authorization= Authorization() 
```

如果我去，`http://localhost:8000/api/v1/labsite/1/`我会看到：

```
 callback({"id": "1", "name": "Mine", "resource_uri": "/api/v1/labsite/1/", "site_code": "FRED"}) 
```

知道为什么我什么都拿不到吗？

*编辑*根据下面的评论，我试图抓住错误。

```
 var errorInfo = {};
  var bar = new LabSite({id:1})
  bar.fetch({
      success: function (bar) {
        alert(bar.toJSON());
      },
  error: function(a1,a2,a3) {
      errorInfo=[a1,a2,a3]

   }
   }); 
```

`errorInfo`没有提供很多有用的信息——它是这样的：

```
 > errorInfo[0]
    d
    _escapedAttributes: Object
    _pending: Object
    _previousAttributes: Object
    _silent: Object
    attributes: Object
    changed: Object
    cid: "c1"
    id: 1
    __proto__: x
    > errorInfo[1]
    [...]
    readyState: 4
    responseText: "callback({"id": "1", "name": "Mine", "resource_uri": "/api/v1/labsite/1/", "site_code": "FRED"})"
    setRequestHeader: function (a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this}
    state: function (){return c}
    status: 200
    statusCode: function (a){if(a){var b;if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this}
    statusText: "OK"
    [....]
    > errorInfo[2]
    Object
    error: function (d,e){e=d===b?e:d;a?a(b,e,c):b.trigger("error",b,e,c)}
    success: function (d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)}
    __proto__: Object 
```

`errorInfo[1].status`似乎表明通信已完全找到并且`errorInfo[1].responseText`是正确的数据。我现在可能比以前更困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:30:59.697

您的 fetch 响应 JSON 包装到`callback`函数中。是jsonp吗？Backbone 需要纯 JSON。

# iphone - 桌面上的 iPhone 视口

> ID：13050749
> 
> 赞同：1
> 
> 时间：2012-10-24T13:54:26.697
> 
> 标签：iphone, jquery-mobile

如何在不触及 CSS 的情况下将桌面上的视口（开发应用程序时）设置为 iPhone 屏幕大小？

我正在使用 jQueryMobile 开发我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:13:32.690

视口的老式定义（在缩放和`viewport`元标记在 iPhone 中很常见之前）只是`html`元素的大小。因此，您可以按如下方式对其进行样式设置：

```
html {
    position: absolute;
    width: 320px;
    height: 480px;
} 
```

或者，使用浏览器扩展（如 Firefox 的“Web 开发人员工具栏”）将浏览器窗口调整为您希望视口具有的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:07:08.973

为什么不检测它是 iPhone 还是浏览器，然后相应地设置样式，例如；

```
if(navigator.userAgent.match(/(iPad|iPhone|iPod)/i) ? true : false )
{
    //ios detected
}
else
{
    //no ios detected, add css to set the dimensions of the body
} 
```

这样，css只会在浏览器中受到影响

# html - 使用 Cargo Collective 进行 CSS 定位

> ID：13050750
> 
> 赞同：0
> 
> 时间：2012-10-24T13:54:34.887
> 
> 标签：html, css, positioning

我正在处理的网站是[http://cargocollective.com/amytdatta](http://cargocollective.com/amytdatta)

我正在尝试将 Running on Cargo 链接定位在顶部导航栏的右侧。在我使用的主题中，曾经有一个搜索框正好定位在那里，所以我隐藏了搜索并尝试将搜索 CSS 复制到 Cargo 链接 CSS。这里是：

```
.cargo_link {
float: right;
margin: 0 0 0 20px;
color: #cccccc;
padding: 0 0 0 25px;
width: 160px;
font-family: Helvetica, Arial, sans-serif;
font-size: 12px;
line-height: 50px;
text-align: right;
border-left: 1px solid #cccccc;
} 
```

对 z-index 值的一些摆弄使 Cargo 链接再次可见。

不过，我仍然无法将它放在我想要的位置。这是搜索框的 CSS（我现在已经显示）：

```
#search_form {
display: inline-block;
float: right;
margin: 0 0 0 20px;
padding: 0;
}

#search_form #search_term {
background: #f5f5f5;
border-left: 1px solid #cccccc;
border-top: 0;
border-bottom: 0;
border-right: 0;
color: #999999;
font-family: Helvetica, Arial, sans-serif;
font-size: 12px;
height: 50px;
line-height: 12px;
padding: 0 0 0 25px;
width: 160px;
} 
```

我基本上希望 Cargo Link 能够精确地替换搜索框。任何建议将不胜感激！

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:01:18.097

你的`#nav_wrapper`元素有一个`background: whiteSmoke;`隐藏它下面的东西的属性。

您要么将货物链接放在错误的元素中（即不在内部`#nav_wrapper`，而是在其下方）。或者你不应该有背景`#nav_wrapper`

编辑：

我猜你应该在结束标签`<div class="cargo_link">`之后移动你的`<div class="page_nav">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:05:04.483

你有`<div id="nav_wrapper">`and `position:fixed`，`z-index:999`这使得 cargo_link 出现在 nav_wrapper 后面......

# r - 在 R 中使用效果包时出错；变量类型错误

> ID：13050751
> 
> 赞同：0
> 
> 时间：2012-10-24T12:00:41.907
> 
> 标签：r, mean

在研究多元回归的一些基本原理时，我决定尝试将我的手动工作与 John Fox 的“效果”包进行比较。我已经生成了具有某些关系的变量，并且希望在控制连续变量的影响时为某个因素调整均值。

但是，我已经停滞不前，因为效果包中的效果函数返回错误“变量'c'的无效类型（内置）”

当我使用 'c' 检查变量的类型时`typeof(c)`，我被告知它是 double 类型，就像我构建的那样。

*   此错误的原因可能是什么？
*   变量“c”是否因某种原因被强制输入“内置”？

这是我的代码：

```
set.seed(1986)
y <- rnorm(100)
f <- sapply(y, function(x) if(x < 0) 1 else 2)
f.f <- as.factor(f)
set.seed(1987)
c <- rnorm(100, 0, .1) + y + f

an3 <- lm(y ~ f.f + c); summary(an3)

ef <- effect("f.f", an3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:21:03.300

`c`不是一个变量名的好选择。它是R中非常常用的[内置函数。](https://stats.stackexchange.com/a/14028/3488)

更改`c`为`d`对我有用：

```
set.seed(1986)
y <- rnorm(100)
f <- sapply(y, function(x) if(x < 0) 1 else 2)
f.f <- as.factor(f)
set.seed(1987)
d <- rnorm(100, 0, .1) + y + f

an3 <- lm(y ~ f.f + d); summary(an3)

library(effects)
ef <- effect("f.f", an3)
 ef

 f.f effect
f.f
         1          2 
 0.5504214 -0.3231941 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:40:25.733

另一种选择是将数据存储在`data.frame`; 这还有其他好处，尤其是在处理多个数据集时。

```
set.seed(1986)
d <- data.frame(y=rnorm(100))
d <- within(d, {
  f <- sapply(y, function(x) if(x < 0) 1 else 2)
  f.f <- as.factor(f)
  set.seed(1987)
  c <- rnorm(100, 0, .1) + y + f
})

library(effects)

an3 <- lm(y ~ f.f + c, data=d); summary(an3)
ef <- effect("f.f", an3)
ef

# f.f effect
# f.f
#          1          2 
#  0.5504214 -0.3231941 
```

# javascript - 从 Django 到 D3 图的 JSON 数据

> ID：13050755
> 
> 赞同：1
> 
> 时间：2012-10-24T13:54:44.310
> 
> 标签：javascript, html, django, templates, d3.js

我正在尝试编辑 D3 条形图[http://bl.ocks.org/3885304](http://bl.ocks.org/3885304)以适合来自 Django 的 JSON 数据。我在 Django 中生成了一个 JSON 格式的变量： [{"score": 1, "color": "blue"}, {"score": 5, "color": "green"}, {"score": 3, "color": "red"} etc. 所以我想在 x 轴上的颜色和在 y 轴上的分数。

有什么方法可以在 HTML 模板中实现 Django 变量而无需创建 tsv 或 csv 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:51:52.397

将数据转换为正确的格式并准备就绪通常是您在模型中执行的操作。这是一个简单的假设示例：

```
# In models.py:
class Address(models.Model):
    street = models.CharField(max_length=200)
    city = models.CharField(max_length=200)
    state = models.CharField(max_length=200)
    def get_full_address(self):
        return self.street + "\n" + self.city + ", " + self.state 
```

现在在您的视图中，将模型实例传递到模板中：

```
return render(request, 'address.html', {'address': address_object}) 
```

在模板中：

```
{{ address.get_full_address }} 
```

... 将返回文本格式的地址。

因此，如果我想将其提供给 JavaScript jQuery 函数（再次，用于假设演示），我可以说：

```
<span id="address_label"></span>
<script>
    ...
    $("#address_label").html("{{ address.get_full_address }}");
    ...
</script> 
```

# c# - 如何通过 URL 将参数传递给 Web 服务

> ID：13050760
> 
> 赞同：0
> 
> 时间：2012-10-24T13:55:05.963
> 
> 标签：c#, web-services

我有可以成功使用的 Web 服务，但我正在与其他想要通过 URL 输入参数的人共享我的 Web 服务，例如：//localhost:12345/Lead.asmx?op=SendFiles&Id=1234678&Name=Joe&Surname=Kevin

我补充说：

```
<webServices>
      <protocols>
        <add name="HttpGet"/>
      </protocols>
    </webServices> 
```

到我的 Web.Config 文件，我的 SendFile.asmx.cs 代码如下所示：

```
 namespace SendFiles
   {
       /// <summary>
       /// Summary description for Service1
       /// </summary>
    [WebService(Namespace = "http://testco.co.za/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class SendFile : System.Web.Services.WebService
    {

        [WebMethod]
        public bool PostToDB(LoadEntity _lead)
        {

            ConnectToSQLDB(ConfigurationManager.AppSettings["Server"],   ConfigurationManager.AppSettings["DB"],
                                ConfigurationManager.AppSettings["UserName"], ConfigurationManager.AppSettings["Password"], ref connectionRef);

            if (LI.ImportFiles(_lead, ref (error)) == true)
            {
                return true;
            }
            else
                return false;
        } 
```

我尝试添加：

```
 [OperationContract]
    [WebGet]
    bool PostToDB(string IDNo, string FName, string SName); 
```

但是我收到一个错误，我必须声明一个主体，因为它没有标记为抽象、外部或部分。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:01:39.063

响应您关于如何创建 WCF 休息服务的请求...

在您的服务合同中：

```
[ServiceContract]
public interface ITestService
{
    [WebGet(UriTemplate = "Tester")]
    [OperationContract]
    Stream Tester();
} 
```

关于你的实施

```
public class TestService : ITestService
{
    public Stream Tester()
    {
        NameValueCollection queryStringCol = WebOperationContext.Current.IncomingRequest.UriTemplateMatch.QueryParameters;

        if (queryStringCol != null && queryStringCol.Count > 0)
        {
            string parameters = string.Empty;
            for (int i = 0; i < queryStringCol.Count; i++)
            {
                parameters += queryStringCol[i] + "\n";
            }

            return new MemoryStream(Encoding.UTF8.GetBytes(parameters));
        }
        else
            return new MemoryStream(Encoding.UTF8.GetBytes("Hello Jersey!"));
    }
} 
```

这只是打印出所有查询字符串值。您可以根据获得的查询字符串参数进行所需的任何处理。

例如，如果您输入。

```
http://localhost:6666/TestService/Tester?abc=123&bca=234 
```

然后你会得到

123 234

作为你的输出。

如果您仍然需要它，这是其余的代码。这是使用控制台应用程序构建的，但可以轻松转换为 Web。真正的进口东西是上面的。

```
class Program
{
    static ServiceHost _service = null;

    static void Main(string[] args)
    {
        _service = new ServiceHost(typeof(TestService));
        _service.Open();

        System.Console.WriteLine("TestService Started...");
        System.Console.WriteLine("Press ENTER to close service.");
        System.Console.ReadLine();

        _service.Close();
    }
}

<configuration>
<startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <services>
      <service name="ConsoleApplication1.TestService">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:6666/TestService"/>
          </baseAddresses>
        </host>
        <endpoint binding="webHttpBinding" contract="ConsoleApplication1.ITestService"
          behaviorConfiguration="webHttp"/>
      </service>      
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpBinding" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
          <readerQuotas maxArrayLength="2147483647" maxStringContentLength="2147483647"/>
        </binding>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>          
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="webHttp">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:04:13.013

当您通过 .asmx 页面中的测试工具进行测试时，会生成什么 URL？您能否将其提供给您的调用者并验证他们执行与您相同的 URL 的能力？

如果其他人从非 .NET 客户端使用您的服务是您的主要用例，我会推荐基于 WCF REST 的服务。

# php - PHP：未找到包含特殊字符的数组键

> ID：13050767
> 
> 赞同：2
> 
> 时间：2012-10-24T13:55:26.650
> 
> 标签：php, arrays, encoding, key

我正在尝试使用带有键的数组作为查找表将字符串转换为数字。

这是数组：

```
$q2_10_lt = array("Full-time worker" => 1
                , "Part-time worker" => 2
                , "Unemployed, would like to work" => 3
                , "Unable to work (chronically ill/mentally handicapped/physically handicapped)" => 4
                , "Pensioner/retired" => 5
                , "Housewife/husband" => 6
                , "Student at university of college (post-matric)" => 7
                , "High school learner" => 8
                , "Primary school learner" => 9
                , "Child attending pre-school/nursery school/crèche/day-mother" => 10
                , "Child staying at home" => 11
                , "Other" => 12); 
```

有问题的关键是“上学前班/托儿所/托儿所/日间母亲的孩子”。使用以下代码时找不到此键：

```
$person_tempArr[] = $q2_10_lt[$row["q2_10"]] != null ? $q2_10_lt[$row["q2_10"]] : "12";
$person_tempArr[] = $q2_10_lt[$row["q2_10"]] == null ? $row["q2_10"] : ""; 
```

该`$row["q2_10"]`值只是从 MySQL DB 中获取的不同字符串。

我应该从第一行得到数字 10，但我得到的是 12，并且完整的字符串没有改变“孩子就读学前班/托儿所/托儿所/日间母亲”。

这一定与特殊字符è有关，但我一直无法解决。请提供任何帮助。

**编辑 1**

按照建议进行十六进制转储后，我得到以下结果

从 SQL 数据库：

```
43 68 69 6c 64 20 61 74 74 65 6e 64 69 6e 67 20 70 72 65 2d 73 63 68 6f 6f 6c 2f 6e 75 72 73 65 72 79 20 73 63 68 6f 6f 6c 2f 63 72 e8 63 68 65 2f 64 61 79 2d 6d 6f 74 68 65 72 
```

从 php 中的字符串：

```
43 68 69 6c 64 20 61 74 74 65 6e 64 69 6e 67 20 70 72 65 2d 73 63 68 6f 6f 6c 2f 6e 75 72 73 65 72 79 20 73 63 68 6f 6f 6c 2f 63 72 c3 a8 63 68 65 2f 64 61 79 2d 6d 6f 74 68 65 72 
```

The difference was "E8" vs "C3A8" or "è" from the DB vs "Ã¨" from the php string.

So how can I go about ensuring the php string remains "è"?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:59:49.277

The string you get from your database layer is not the same string you use as the key. To fix it, use the same string each time.

Same means here, that the string is the same byte-by-byte. Do a [hexdump of the string](https://stackoverflow.com/questions/1057572/how-can-i-get-a-hex-dump-of-a-string-in-php) you get from the database.

Then enter the binary string as key (or at least for the special letter). This will make your code more robust because it will work regardless in which encoding you're saving the PHP file.

***Edit:*** As you compare against the database, the key needs to co-related to the binary sequence in the database:

```
 , "Child attending pre-school/nursery school/cr\xE8che/day-mother" => 10
                                                       ^^^^ 
```

Use the hexadecimal notation to express the bytes you are not able to "type" with your *UTF-8* encoded PHP file. The database uses some *ISO-8859-1* or similar encoding.

As you can see it is just `\x` and then the hexcode `E8`. It works in double-quoted strings in PHP.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:16:23.390

I ended up changing my table column encoding to `utf8_general_ci` and table collation to `utf8_general_ci`. I also added the following lines of code to my php file:

```
ini_set('default_charset', 'utf-8');

//set encodig to utf-8
mysql_query("SET NAMES 'utf8'"); 
mysql_query("SET CHARACTER SET 'utf8'"); 
```

It is working now, but I could be doing something not recommended?

# facebook - Facebook 的 Graph API 搜索范围

> ID：13050770
> 
> 赞同：1
> 
> 时间：2012-10-24T13:55:34.000
> 
> 标签：facebook, facebook-graph-api, search, web-crawler

我通过 Javascript SDK 使用 Facebook Graph API 来搜索用户。但是，当我尝试查找具有受保护个人资料的用户时，它不会显示在搜索结果中。我觉得这很奇怪，因为如果我使用 Facebook 网站使用默认搜索栏查找同一用户，该用户确实会出现。有什么解决方案可以更好地找到用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:59:44.697

你可以再详细一点吗？你如何搜索用户，你在搜索什么用户？作为一般规则，如果您需要的不仅仅是 Graph API 提供的基本信息，您将需要用户的权限（例如获取他们的电子邮件地址等）。

# ruby-on-rails - 在 Rails 3 中创建特定的自定义路线

> ID：13050778
> 
> 赞同：0
> 
> 时间：2012-10-24T13:56:10.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, routes

我有几个级别的嵌套路由。

```
 resources :departments do
  resources :tasks do
    collection do
      get "report" => "tasks#report"
    end
 end 
```

这是其中的一部分。

我正在尝试为 report.html.erb 文件创建自定义路由。但是，此路线创建路径 /department/:id/tasks/report

我想创建路径 /department/:id/tasks/:id/report

这可能吗？我考虑为报告创建一个新的控制器和模型，但这似乎效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:01:12.253

尝试：

```
resources :departments do
  resources :tasks do
    member do
      get "report" => "tasks#report"
    end
  end
end 
```

要不就：

```
resources :departments do
  resources :tasks do
    get "report" => "tasks#report", :on => :member
  end
end 
```

# java - 键绑定不起作用 Java Swing

> ID：13050781
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:56:22.683
> 
> 标签：java, swing, key-bindings

我正在努力在面板上实现键绑定，以侦听是否按下箭头键。

如果他们被按下，他们会做一个动作。我的代码：

```
private void createKeyBindings(){
        actionMap = this.getActionMap();
        inputMap = this.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        this.getInputMap().put(KeyStroke.getKeyStroke("a"),
                "pressedUpArrow");
        this.getInputMap().put(KeyStroke.getKeyStroke("released UP"),
                "releasedUpArrow");
        this.getActionMap().put("pressedUpArrow",
                 new PressedUpArrowAction());
        this.getActionMap().put("releasedUpArrow",
                new ReleasedUpArrowAction());
    } 
```

这些动作起作用（当我将它们映射到一个按钮并按下该按钮时，它会执行该动作应该执行的操作）。

这些键绑定是为我的面板（它是选项卡窗格中的选项卡）调用的。我尝试了按下 UP 键和只是一个（以确保这不是问题）。当相关选项卡处于焦点时，我键入这些键。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:01:34.807

您的问题的一个可能原因是：

```
this.getInputMap().put(KeyStroke.getKeyStroke("a"),
            "pressedUpArrow"); 
```

不应该是这个吗？

```
this.getInputMap().put(KeyStroke.getKeyStroke("UP"),
            "pressedUpArrow"); 
```

您当前对其进行编码的方式，按下一个键并释放另一个键时触发`PressedUpArrowAction()`。`ReleasedUpArrowAction()`

# ruby-on-rails - 跟随 RoR 教程的 Rails 语法错误

> ID：13050782
> 
> 赞同：0
> 
> 时间：2012-10-24T13:56:25.077
> 
> 标签：ruby-on-rails, railstutorial.org

我目前在我的 Rails 应用程序中遇到以下错误：语法错误，意外 tCONSTANT，期待关键字_end。下面是错误和完整代码以及来自 user_controller#show 的代码。属性部分中也没有 ruby​​ 代码。

任何帮助都会很棒。

谢谢，托尼。

```
# User Controller
def show
@user = User.find(params[:id])
@properties = @user.properties
end

Section of code where error is occurring
<table border="0" class="gt-table gt-user-table">
<tbody>
<% if @user.properties.any? %>
<%= render @properties %>
<% end %>
</tbody> 
```

完整的代码页面是：

```
<% provide(:title, @user.name) %> 
```

```
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="Expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="Pragma" content="no-cache" />
    <%= stylesheet_link_tag 'reset-fonts' %>
    <%= stylesheet_link_tag 'gt-styles' %>

</head>
<body>
    <!-- head -->
    <div class="gt-hd clearfix">
        <!-- leaf watermark -->
        <div class="gt-leaf-watermark clearfix">

        <!-- head top -->
        <div class="gt-hd-top clearfix">

            <div class="gt-fixed-wrap clearfix">

            <!-- logo -->
            <div class="gt-logo">
                Propertygate
            </div>
            <!-- / logo -->

            <!-- utility box -->
            <% if signed_in? %>
            <div class="gt-util-box">
                <div class="gt-util-box-inner">
                    <p>welcome <strong><%= current_user.name %></strong> <span class="gt-util-separator">|</span> <%= link_to "Sign out", signout_path, method: "delete" %></p>
                </div>
            </div>
        <% else %>
        <%= link_to "Sign in", signin_path %>
        <% end %>
            <!-- / utility box -->

            </div>

        </div><!-- /head top -->

        <!-- navbar -->
        <div class="gt-navbar clearfix">

            <div class="gt-fixed-wrap clearfix">

            <!-- navigation -->
            <div class="gt-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="base.html">Base HTML</a></li>
                    <li><a class="gt-active" href="tables.html">Tables</a></li>
                    <li><a href="forms.html">Forms</a></li>
                    <li><a href="text-styles.html">Text Styles</a></li>
                    <li><a href="buttons.html">Buttons</a></li>
                    <li><a href="login.html">Login</a></li>
                </ul>
            </div><!-- / navigation -->

            <!-- search -->
            <div class="gt-search"><div class="gt-search-inner">
                <input type="text" class="gt-search-text" value="Search" onfocus="javascript:if(this.value=='Search')this.value='';" onblur="javascript:if(this.value=='')this.value='Search';" />
            </div></div>

            </div>

        </div><!-- /navbar -->          
    </div><!-- /leaf watermark -->
    </div>
    <!-- / head -->

    <!-- body -->
    <div class="gt-bd gt-cols clearfix">

    <% flash.each do |key, value| %> 
     <div class="status success">
        <p class="closestatus"><a href="" title="Close">x</a></p>
        <p><%= image_tag 'icons/icon_success.png', :alt => 'Success' %><span><%= key %></span> <%= value %></p>
    </div>
     <% end %>

        <!-- main content -->
        <div class="gt-content">

            <!-- User List Table -->
            <!-- This table can be used for listing things like users -->
            <h2 class="gt-table-head">Your Profile</h2>
            <!-- Content Box -->
            <div class="gt-content-box">
                <table border="0" class="gt-table gt-user-table">
                    <tbody>
                        <tr>
                            <td class="gt-avatar"><%= image_tag 'gt/avatar.gif', :alt => 'avatar' %></td>
                            <td>
                                <h4><%= @user.name %></h4>
                                <p>My favorite color is green. I really like trees!</p>

                                <p class="gt-table-edit"><%= link_to 'Edit', edit_user_path(@user) %></p>
                            </td>
                            <td>
                                <!-- Categories Sub Table -->
                                <table border="0" class="gt-table-categories">
                                    <tr>
                                        <th>Email:</th>
                                        <td><%= @user.email %></td>
                                    </tr>
                                    <tr>
                                        <th>Friends:</th>
                                        <td><a href="">Susan</a>, <a href="">Fred</a></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div><!-- /Content Box -->
            <!-- / User List -->

            <br />

            <!-- Article List Table -->
            <!-- This table can be used for listing things like articles, pages or blog entries -->
            <h2 class="gt-table-head">Current Articles</h2>
            <!-- Content Box -->
            <div class="gt-content-box">

            <!-- Table Controls -->
            <div class="gt-table-controls clearfix">
                <form action="" class="gt-table-picker">
                    <select>
                        <option>Choose Section...</option>
                        <option>Blog</option>
                        <option>Contact</option>
                        <option>About</option>
                    </select>
                </form>
                <p class="gt-table-pager"><a class="current" href="">1</a> | <a href="">2</a> | <a href="">3</a> <a href="">&raquo;</a></p>
            </div><!-- /Table Controls -->
            <table border="0" class="gt-table gt-user-table">
                <tbody>
                <% if @user.properties.any? %>
                <%= render @properties %>
                <% end %>
                </tbody>
            </table>
            </div><!-- /Content Box -->
            <div class="gt-table-buttons">
                <a href="" class="gt-btn-blue-large">Add New Article</a>
            </div>
            <!-- / Article Table List -->

        </div>
        <!-- / main content -->

        <!-- sidebar -->
        <div class="gt-sidebar">
            <!-- Sidebar Navigation -->
            <div class="gt-sidebar-nav gt-sidebar-nav-blue">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="">Add a New Post</a></li>
                    <li><a href="">Edit User Settings</a></li>
                    <li><a href="">View Live Site</a></li>
                </ul>
            </div><!-- /Sidebar Navigation -->

            <!-- Sidebar Box -->
            <div class="gt-sidebar-box gt-sidebar-box-gray">
                <!-- search -->
                <div class="gt-search"><div class="gt-search-inner">
                    <input type="text" class="gt-search-text" value="Find an Article" onfocus="javascript:if(this.value=='Find an Article')this.value='';" onblur="javascript:if(this.value=='')this.value='Find an Article';" />
                </div></div><!-- /search -->
            </div><!-- /Sidebar Box -->

            <!-- Sidebar Navigation -->
            <div class="gt-sidebar-nav gt-sidebar-nav-gray">
                <h3>Get Help</h3>
                <ul>
                    <li><a href="mailto:help@gooeytemplates.com">Email Us</a></li>
                </ul>
            </div><!-- /Sidebar Navigation -->

            <!-- Sidebar Content -->
            <div class="gt-sidebar-content">
                <h3>Sidebar Note</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div><!-- /Sidebar Content -->

            <!-- Sidebar List -->
            <div class="gt-sidebar-list">
                <h3>Users List</h3>
                <ul class="gt-sidebar-list-content">
                    <li class="gt-sidebar-list-row">
                        <img class="gt-avatar-small" src="images/gt/avatar-small.gif" alt="avatar-small" width="25" height="25"/>
                        <h4><a href="">John Marker</a></h4>
                        <p>I love to color pictures!</p>
                    </li>

                    <li class="gt-sidebar-list-row">
                        <img class="gt-avatar-small" src="images/gt/avatar-small.gif" alt="avatar-small" width="25" height="25"/>
                        <h4><a href="">Charlee Watts</a></h4>
                        <p>Eco-friendly is the way to go!</p>
                    </li>

                    <li class="gt-sidebar-list-row">
                        <img class="gt-avatar-small" src="images/gt/avatar-small.gif" alt="avatar-small" width="25" height="25"/>
                        <h4><a href="">Sarah Smith</a></h4>
                        <p>I love to draw...</p>
                    </li>
                </ul>
            </div><!-- /Sidebar List -->

        </div>
        <!-- / sidebar -->

    </div>
    <!-- / body -->

    <!-- footer -->
    <div class="gt-footer"><div class="gt-footer-inner">
        <p>Copyright &copy; 2010 Gooey Templates - <a href="http://www.gooeytemplates.com" target="_blank">GooeyTemplates.com</a></p>
    </div></div>
    <!-- /footer -->
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:07:04.577

只是出于好奇（我目前没有可以启动的 Rails 机器），但是如果您将那个块替换为：

`<%= render @properties if @properties.any? %>`

...从理论上讲，这应该完成相同的任务...此外，您应该能够简单地引用@properties，因为您已经在控制器中设置了它，而不是重新查询相同数据的用户模型，我想.

我假设您已经尝试注释掉整个块，以隔离问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:40:32.290

感谢所有的帮助和建议。我在 Ruby on Rails 教程第 2 版的印刷版中发现了错误，其中一个模型示例中缺少 '。添加 's 后，错误消失了，现在一切正常。

再次感谢，T。

# types - 将渗透器调用限制为 ElasticSearch 中的类型

> ID：13050783
> 
> 赞同：2
> 
> 时间：2012-10-24T13:56:33.013
> 
> 标签：types, elasticsearch, restrict

如文档中所述，当我使用 _percolator 存储查询时，例如：

```
curl -XPUT localhost:9200/_percolator/test/kuku -d '{
  "color" : "blue",
  "query" : {
      "term" : {
        "field1" : "value1"
      }
   }
}' 
```

当我在“test”索引上过滤文档时，将运行此查询，但如果我想将其限制为“test”索引的“foo”类型，唯一的解决方案是在查询中添加一个类型：

```
curl -XPUT localhost:9200/_percolator/test/kuku -d '{
   "type":"foo",
   "color" : "blue",
   "query" : {
       "term" : {
         "field1" : "value1"
       }
  }
}' 
```

并且在添加文档时使用

```
curl -XGET localhost:9200/test/type1/_percolate -d '{
   "doc" : {
      "field1" : "value1"
    },
    "query" : {
      "term" : {
         "type" : "foo"
      }
    } 
  }' 
```

还有其他解决方案吗？我试过

```
curl -XPUT localhost:9200/_percolator/test/foo/kuku 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:59:50.380

另一种方法是将原始查询包装到过滤查询中，并为 _type 添加术语过滤器：

```
{
    "query": {
        "filtered":{
            "query": {
                "term":{
                    field1" : "value1"
                }
             },
             "filter": {
                 "term": {
                     "_type" : "type1"
                 }
              }
          }
     }
} 
```

# c# - 为什么 System.Timers.Timer 不更新非忙碌 UI？

> ID：13050784
> 
> 赞同：4
> 
> 时间：2012-10-24T13:56:34.310
> 
> 标签：c#, wpf, user-interface, timer

我一直在寻找一个原因，但是关于 stackoverflow 上的每一个主题，我都能找到一个繁忙的 UI 作为原因。我有非常基本的代码，仅用于测试，它根本不会更新 UI，即使我确信它不能忙于做其他事情：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    static double t = 0;
    static double dt = 0.1;

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Timer timer = new Timer(5000);
        timer.Enabled = true;
        timer.Elapsed += new ElapsedEventHandler(Update);
        timer.Start();
    }

    void Update(object sender, ElapsedEventArgs e)
    {
        t = t + dt;
        testBlock1.Text = (t).ToString();
    }
} 
```

我对其进行了调试并为`textBlock1.Text`更新设置了一个断点，它确实每 5 秒中断一次，但 UI 从未更新。从代码中可以看出，**当我将鼠标移到`Button`用于启动计时器的按钮上时，按钮会显示其典型的“鼠标悬停”动画。**为什么会发生这种情况，而不是文本更新？

如果有人可以引导我找到关于 stackoverflow 的一个好主题，请这样做，我将在这里删除我的问题，但我找不到任何主题来解释为什么即使 UI 不忙于做任何事情，这种方法也不会更新 UI别的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T14:00:36.130

[`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)*默认情况下*不会封送回 UI 线程。在 Windows 窗体中，您可以很容易地做到这一点：

```
Timer timer = new Timer(5000);
timer.SynchronizingObject = this; 
```

...但是 WPF UI 元素不实现`ISynchronizeInvoke`，这将阻止它在 WPF 中为您工作。

您可以使用`Dispatcher`来编组到处理程序中的 UI 线程，或者您可以只使用 a[`DispatcherTimer`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)开始。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T14:07:03.387

对于 WPF，您应该使用`DispatcherTimer`- 同样使用您发布的上述代码，我收到一个`cross thread`错误，因为`elapsed`事件是在其他线程上引发的，而不是在`UI thread`.

```
private void button1_Click(object sender, RoutedEventArgs e)
{
   DispatcherTimer timer = new DispatcherTimer();
   timer.Interval = new TimeSpan(0, 0, 5);
   timer.Tick += new EventHandler(timer_Tick);
   timer.Start();
}

void timer_Tick(object sender, EventArgs e)
{
   t = t + dt;
   txt.Text = (t + dt).ToString();
} 
```

**编辑**

此外，您可以使用现有代码在 UI Dispatcher 上编组它，如下所示 -

```
void Update(object sender, ElapsedEventArgs e)
{
    App.Current.Dispatcher.Invoke((Action)delegate()
    {
        t = t + dt;
        txt.Text = (t + dt).ToString();
    });
} 
```

# ios - 适用于 iOS 的 Flex 移动项目在发布时不起作用。仅在调试模式下

> ID：13050793
> 
> 赞同：0
> 
> 时间：2012-10-24T13:57:03.963
> 
> 标签：ios, apache-flex, mobile

我有一个 iOS 移动项目，我只能看到它在 iPad 的调试模式下工作。当我在发布时运行它时，屏幕保持空白。

该项目只有一些电影剪辑播放，没有太多的组件。这几乎是一个动画演示。

该设备的崩溃报告说：

```
Application Specific Information:
com.testapp.game failed to resume in time 
```

后来它说：

```
Unknown thread crashed with unknown flavor: 5, state_count: 1 
```

还有许多其他奇怪的事情。

会是什么？谢谢！

# php - PHP：使用可能无效的内容进行 XML 解析

> ID：13050795
> 
> 赞同：0
> 
> 时间：2012-10-24T13:57:09.163
> 
> 标签：php, xml, xml-parsing

我需要一个项目的模板引擎，它解析 sgml-content 并转换用户定义的标签，如`<ext:grid />`. 几乎在所有情况下，输入内容都是有效的。一个常见的问题是链接生成器。链接生成器生成`&`而不是生成`&amp;`我的解析问题的主要原因。我无法更改此行为，因为该生成器的输出用于许多其他需要链接具有`&`而不是`&amp;`.

我尝试过 DOMDocument、SimpleXML 和 xml_parser。他们都退出实体问题。有任何想法吗？我想要的是，这个“问题”被解析器简单地忽略了。

测试模板在哪里：

```
<template xmlns:grid="templates/grid" xmlns:std="templates/std">
    <std:header text="Overview" type="h1" />
    <grid:base width="100%">
        <grid:columns>
        <grid:body>
            <?php foreach($products as $product): /* @var $product Dfm_Shop_Model_Product */ ?>
            <grid:row selectable="1">
                <grid:cell>
                    <div><?php echo $this->esc($product->getTitle()) ?></div>
                </grid:cell>
                <grid:cell>
                    <a href="<?php env()->http()->to(array('controller' => 'Dfm_Shop_Controller_Products', 'method' => 'showEdit')) ?>"><std:img src="icons/pencil.png" hint="Edit" /></a>
                </grid:cell>
            </grid:row>
            <?php endforeach ?>
        </grid:body>
    </grid:base>
</template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:14:52.533

`&`您可以`&amp;`在尝试解析文档之前搜索替换您的内容吗？

* * *

编辑：为了完整起见，例如[QueryPath](http://querypath.org/)也[可以处理无效标签](https://stackoverflow.com/questions/3987239/querypath-and-malformed-html)。

根据上面链接的线程，libxml 函数应该也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:09:03.277

如果可以，请尝试将 cdata 与 xml 一起使用。

```
<![CDATA[your content]]> 
```

[http://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

# ruby-on-rails - Rails Paperclip 预编译错误

> ID：13050802
> 
> 赞同：0
> 
> 时间：2012-10-24T13:57:22.693
> 
> 标签：ruby-on-rails, paperclip, precompile

我修改了我的回形针使用模型，如下所示：

```
class UsersPicture < ActiveRecord::Base
attr_accessible :user_id, :users_picture_id, :photo
belongs_to :user
has_attached_file :photo,
   :url => "users_pictures/:attachment/:id/:basename.:extension",
   :path => ":rails_root/users_pictures/:attachment/:id/:basename.:extension"

before_create :rename_file_name

def rename_file_name
  extension = File.extname(photo_file_name).downcase
  filename = File.basename(photo_file_name).downcase
  timestamp = Time.now.to_i
  name = Digest::MD5.hexdigest("#{filename}")
  self.photo.instance_write(:file_name, "#{name}_#{timestamp}#{extension}")
end
end 
```

在我插入 before_create 方法之前，一切都很好。但现在我的日志说：

```
ActionView::Template::Error (users_pictures/photos/88/8b7474622cf5bbc140ed7defe1ae76a8_1351088476.jpeg isn't precompiled):
8: <p>
9:   <b>Users picture file:</b>
10:  <% if @users_picture.photo.exists? then %>
11:             <%= image_tag @users_picture.photo.url %>
12:         <% end %>
13: </p>
14: 
app/views/users_pictures/show.html.erb:11:in `_app_views_users_pictures_show_html_erb__597237708__324410398'
app/controllers/users_pictures_controller.rb:18:in `show' 
```

我正在寻找解决方案，但总是记得使用“image_tag”。但我目前正在使用它？索引当然可以正常工作，但是 show 方法不能：/我可以更改什么？编辑：当我删除 image_tag 时，我得到：users_pictures/photos/88/8b7474622cf5bbc140ed7defe1ae76a8_1351088476.jpeg

而这也是正确的道路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T18:21:49.080

尝试在图像路径前加上 /

```
<%= image_tag "/" + @users_picture.photo.url %> 
```

来自[https://stackoverflow.com/a/11318133/418819](https://stackoverflow.com/a/11318133/418819)

# php - php 数组恰好在 1001 条记录后删除记录

> ID：13050806
> 
> 赞同：0
> 
> 时间：2012-10-24T13:57:40.423
> 
> 标签：php, arrays, multidimensional-array

我有个问题。我们已将 PHP 4 加载到服务器上，并且在 PHP 升级后，似乎将 1001 之后的每条记录都丢弃在传递给 csv 文件的多数组中。,multi 数组有 8000 条记录，所有记录从 1 填充到 1001 之后，它给出空值和零值。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:07:33.367

你的 PHP 使用 Suhosin 吗？检查 phpinfo(); 曾经有一个问题，Suhosin 在 POST 中静默删除超过 1000 的数组中的项目。任何日志中都没有错误。刚掉。好像和你的问题一样。

suhosin.post.max_vars=10000

suhosin.request.max_vars=10000

也许

最大输入变量 = 10000

# ajax - Wordpress Datatrans Ajax 实现

> ID：13050807
> 
> 赞同：2
> 
> 时间：2012-10-24T13:57:41.187
> 
> 标签：ajax, wordpress, payment

我正在尝试将信用卡支付服务（datatrans.ch）实施到基于 wordpress 的网站中。Datatrans 提供了一个 Ajax API，您可以在这里查看：

[数据传输 Ajax API](https://www.datatrans.ch/Showcase/Authorisation/Ajax-API/Ajax-API/)

[示例代码](http://www.datatrans.ch/CMS4.ASPX?NID=2001&CID=3020)

我复制/粘贴了示例代码并将其保存在我机器上的 html 文件中。运行它可以正常工作。在下一步中，我尝试通过创建以下函数在 wordpress 中实现它：

```
function datatrans_payment_ajax($lang, $currency, $amount) {

$merchant_id = 101...; // ... on my machine it is numeric of course ;)

wp_deregister_script('datatrans-ajax');
wp_register_script('datatrans-ajax', 'https://pilot.datatrans.biz/upp/ajax/api.js?merchantId='.$merchant_id, false);
wp_enqueue_script('datatrans-ajax');

?>

<noscript>
    <p class="err">
    JavaScript is disabled in your browser.<br/>
    This showcase requires JavaScript.
    </p>
</noscript>

<div>

    <h3>Step 1: Ajax UPP.paymentRequest(...)</h3>

    <form id="uppform">
        <fieldset>

        <input type="hidden" name="language" value="<?php echo $lang; ?>"/>
        <table cellspacing="0" cellpadding="3" width="550">
            <tr>
                <td align="left">Merchant Id :</td>
                <td style="width: 10px">&nbsp;</td>
                <td align="left"><input type="text" size="20" name="merchantId" value="<?php echo $merchant_id; ?>"/>
                </td>
            </tr>

            <tr>
                <td align="left">Amount :</td>
                <td>&nbsp;</td>
                <td align="left"><input type="text" size="20" name="amount" value="<?php echo $amount; ?>"/> (= 10.00) 
                </td>
            </tr>

            <tr>
                <td align="left">Currency :</td>
                <td>&nbsp;</td>
                <td align="left"><input type="text" size="20" name="currency" value="<?php echo $currency; ?>"/>
                </td>
            </tr>

            <tr>
                <td colspan="3">&nbsp;</td>
            </tr>

            <tr>
                <td align="left">Card Number :</td>
                <td>&nbsp;</td>
                <td align="left"><input type="text" size="24" name="cardNumber" value="4242424242424242"/>
                </td>
            </tr>

            <tr>
                <td align="left">Expiry :</td>
                <td>&nbsp;</td>
                <td align="left">
                    <input type="text" size="4" name="expm" value="12"/>&nbsp; 
                    <input type="text" size="4" name="expy" value="15"/>&nbsp; (MM/YY) 
                </td>
            </tr>

            <tr>
                <td align="left">CVV code :</td>
                <td>&nbsp;</td>
                <td align="left"><input type="text" size="4" name="cvv" value="123"/>&nbsp; 
                </td>
            </tr>

            <tr style="display: none;">
                <td align="left">Process mode :</td>
                <td>&nbsp;</td>
                <td align="left">
                    <input type="radio" name="mode" id="auto" value="auto" checked="checked"/> <label for="auto">Automatic 3D ACS call using API</label>
                    <br/>
                    <input type="radio" name="mode" id="manual" value="manual"/> <label for="manual">Manual redirection to 3D ACS</label>
                </td>
            </tr>

            <tr>
                <td colspan="3">&nbsp;</td>
            </tr>

            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td align="left"><input type="button" class="button"
                    onclick="callPayment()" value="send"/><span class="buttend"></span>
                </td>
            </tr>

        </table>

        </fieldset>            
    </form>

    <div id="frameHolder"></div>
    <div id="response" style="width: 400px;"></div>
    <div id="step2" style="display: none;">
        <h3>Step 2: XML authorizeSplit (server-2-server request)</h3>
        <form action="https://pilot.datatrans.biz/upp/jsp/XML_authorizeSplitEx.jsp" method="post" target="_parent">
            <fieldset>
                <textarea style="width: 400px; height: 150px;" name="xmlRequest"></textarea>
                <div>
                <input type="submit" class="button" value="send"/><span class="buttend"></span>
                </div>
            </fieldset>
        </form>
    </div>

    <script type="text/javascript">

    var mode;
    var params;
    function callPayment()
    {
        mode = $("input[name=mode]:checked").val();

        // read form values
        params = {
                merchantId: $("input[name=merchantId]").val(),
                cardNumber: $("input[name=cardNumber]").val(),
                expy: $("input[name=expy]").val(),
                expm: $("input[name=expm]").val(),
                cvv: $("input[name=cvv]").val(),
                currency: $("input[name=currency]").val(),
                amount: $("input[name=amount]").val()
        }

        // call paymentRequest, response will be received in responseCallback
        if ( mode == "auto" )
        {
            params.returnUrl = "https://pilot.datatrans.biz/upp/ajax/sample-merchant-return-page.html";
            UPP.paymentRequest( params,     responseCallback, frameCallback );
        }
        else
        if ( mode == "manual" )
        {
            UPP.paymentRequest( params,     responseCallback );
        }
    };

    function frameCallback()
    {
        // create iframe and add it to document
        var iframe = $("<iframe/>").attr( "id", "paymentIFrame" ).width( 390 ).height( 400 );    
        $("#frameHolder").append( iframe );

        $("form#uppform").hide(); //hide the form

        return iframe[0];
    };

    function responseCallback( response ) 
    {     
        var responseElm = $("#response");

        responseElm
            .empty()
            .append( "<h4>Ajax response:</h4>")
            .append( $("<div/>").text("status: " + response.status) )
            .append( $("<div/>").text("uppTransactionId: " + response.uppTransactionId) );

        if ( JSON.stringify )
            responseElm
                .append( $("<div/>").html( "Complete JSON response: " + JSON.stringify( response ).replace( /,/g, ", ") ) )

        if ( mode == "auto" )
        {
            if ( response.status == "success" )
            {
                // This step will be done server-2-server
                $("#step2 textarea").val(
                        "<<?php?>?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n" + 
                        "<authorizationSplit version=\"1\">\n" + 
                        "<body merchantId=\"" + $("input[name=merchantId]").val() + "\">\n" +  
                        "<transaction refno=\"to_be_filled\">\n" + 
                        "  <request>\n" + 
                        "    <uppTransactionId>" + response.uppTransactionId + "</uppTransactionId>\n" +  
                        "    <amount>" + $("input[name=amount]").val() + "</amount>\n" + 
                        "    <currency>" + $("input[name=currency]").val() + "</currency>\n" + 
                        "   </request>\n" + 
                        "  </transaction>\n" + 
                        "</body>\n" + 
                        "</authorizationSplit>"
                    );
                $("#step2").show();
                $("#uppform").hide();
            }

            if ( response.is3DEnrolled ) // close/remove the iframe
            {
                $("#paymentIFrame").remove();
            }
        }
        else
        if ( mode == "manual" ) // manual mode used, browser has to be redirected to ACSURL
        {        
            if ( response.is3DEnrolled && response.status == "success" )
            {
                responseElm.append( $("<div/>").html( "Redirecting page to ACS in 3 seconds..." ) );

                setTimeout( function() {
                    params.uppTransactionId = response.uppTransactionId;
                    params.errorUrl = "https://pilot.datatrans.biz/upp/merchant/errorPage.jsp";
                    params.returnUrl = "https://pilot.datatrans.biz/upp/merchant/successPage.jsp";
                    window.parent.location = response.ACSURL + "?" + $.param( params );
                }, 3000 );
            }
        }
    };
    </script>

</div> 
```

当我运行它时，我收到一个错误状态代码 1003，说 uppTransactionId 未定义，这应该是 responseCallback 的结果。所以我想这与wordpress中通常处理的Ajax调用有关，它必须通过wp-admin文件夹中的admin-ajax.php文件！？我不知道如何将这个数据传输实现切成小块以使其适合 wordpress Ajax 处理。此外，我想知道您是否认为我对导致错误的原因的猜测是否正确？

提前致谢。

干杯，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:10:00.103

要求他们为您开设测试帐户，然后您可以使用您的 MerchantID 在具有所有功能的试点服务器上进行测试。如果您从他们的示例中复制/粘贴代码，我认为这将不起作用。这些只是实施的例子。

您可以尝试使用`Merchant-ID:1000011011`，但这是由所有用户共享的，因此您无法设置登陆重定向页面（成功时，错误时）

还要检查您使用的编码：

*   UTF-8 编码：**/jsp/upStart.jsp**
*   ISO 编码：**/jsp/upStartIso.jsp**

最常见的错误是价格格式，如果您的价格是 15.25，您需要发送 1525。此外，如果您希望使用 3D 安全，您需要在数据传输后端激活它。

# qt - PyQT 按钮单击的名称

> ID：13050810
> 
> 赞同：19
> 
> 时间：2012-10-24T13:58:00.453
> 
> 标签：qt, button, triggers, pyqt

我在 pyQT 中动态创建了`(QtoolButton)`按钮`gridLayout`。如何获取布局中单击的按钮的名称？

我不能事先知道这个名字。是否有任何触发器来完成任务？

提前致谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-25T09:26:29.217

您可以调用`self.sender()`连接到按钮事件的函数来获取触发事件的对象。从那里您可以调用对象的`objectName()`方法来获取名称。

这是一个简单的示例 - 小部件有 10 个按钮，单击一个按钮将更新标签的文本以显示按钮名称。

```
import sys
from PyQt4.QtGui import QApplication, QWidget, QToolButton, QLabel, QVBoxLayout, QHBoxLayout

class Widget(QWidget):
    def __init__(self, parent=None):
        QWidget.__init__(self, parent)

        self.button_layout = QHBoxLayout()
        self.widget_layout = QVBoxLayout()

        for button_number in xrange(1, 11):
            button = QToolButton()
            button.setText(str(button_number))
            button.setObjectName('Button%d' % button_number)
            button.released.connect(self.button_released)
            self.button_layout.addWidget(button)

        self.status_label = QLabel('No button clicked')

        self.widget_layout.addItem(self.button_layout)
        self.widget_layout.addWidget(self.status_label)
        self.setLayout(self.widget_layout)

    def button_released(self):
        sending_button = self.sender()
        self.status_label.setText('%s Clicked!' % str(sending_button.objectName()))

if __name__ == '__main__':
  app = QApplication(sys.argv)

  widget = Widget()
  widget.show()

  sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:04:31.163

我认为您必须实现从 QToolButton 派生的 iconlabel 类：
像这样：

```
class IconLabel : public QToolButton
{
    Q_OBJECT
public:
    explicit IconLabel(QWidget *parent = 0);
    bool event (QEvent* e );
    QString name;
signals:
    void clicked_signal(QString);

};

bool IconLabel::event (QEvent* e ) {
   if ( e->type() == QEvent::Paint) {
      return QToolButton::event(e);

   }
   if(e->type() == QEvent::MouseButtonPress)
   {

       emit clicked_signal(name);
       return true;
   }

   return true;
}

connect(iconlabel, SIGNAL(clicked_signal(QString)), this, SLOT(getClickedButtonName(QString))); 
```

# mysql - 如何创建一个表，其中字段的值基于mysql中的前一行

> ID：13050812
> 
> 赞同：4
> 
> 时间：2012-10-24T13:58:04.433
> 
> 标签：mysql

```
Date    |  Column_A  | Column_B
Day 1   |    5       |    7
Day 2   |    -3      |   7 + (-3) = 4
Day 3   |    8       |   4 + 8 = 12
Day 4   |    -21     |   12 + (-21) -> 0 (see formula on row n)
Day n-1 |    ...     |    Column_B(n-1)
Day n   |Column_A(n) |    IF(Column_B(n-1) + Column_A(n) >= 0, Column_B(n-1) +
                                                                Column_A(n), 0) 
```

如何在 Mysql 中填充 Column_B ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:11:19.860

您可以将身份列作为 ID 添加到您的表中吗？如果是...您可以使用以下代码：

```
 DECLARE   @count INT;
    DECLARE   @i INT;
    DECLARE  @temp INT;
    SET @count =( select count(*) from myTBL)
    SET @i=2
    WHILE (@i <=@count)
         BEGIN
             SET @temp=(select Column_A from myTBL where ID=@i)+ (select Column_B from myTBL where ID=@i-1);
             IF (@temp>0)      update myTBL set Column_B=@temp where ID=@i
             ELSE update myTBL set Column_B=0  where ID=@i
         SET @i = @i+1
         END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:39:03.813

我创建了一个可以带来它的 Select，但我找不到将其放入更新的方法。

```
set @col_c:=7;
select *,if(dt!=1,
@col_c:=@col_c+if(col_a<0,col_a,col_a),0) as with_neg_values,
if(@col_c<0,0,@col_c) as col_tot 
from t1 
```

SQLFIDDLE：[http ://www.sqlfiddle.com/#!2/105aa/3](http://www.sqlfiddle.com/#!2/105aa/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:10:35.307

更新查询：

```
 update table1 firstInstance, tabe1 secondInstance
 set firstInstance.column_B = 
         (IF(sIFNULL(secondInstance.column_B,0) + 12 >= 0, 
                                        IFNULL(secondInstance.column_B,0) + 12, 0) 
             +firstInstance.column_A)
 where  DATEDIFF(secondInstance.date, firstInstance.date) = 1; 
```

选择查询：

```
 SELECT firstInstance.DATE, firstInstance.COLUMN_A,
       (IF(IFNULL(secondInstance.column_B,0) + 12 >= 0, 
                                         IFNULL(secondInstance.column_B,0)+ 12, 0) 
             +firstInstance.column_A) AS COLUMN_B
 FROM table1 firstInstance 
 LEFT JOIN tabe1 secondInstance
 ON  DATEDIFF(secondInstance.date, firstInstance.date) = 1; 
```

# joomla - 如何使用 Falang 翻译 Joomla 中的联系人组件？

> ID：13050813
> 
> 赞同：2
> 
> 时间：2012-10-24T13:58:06.277
> 
> 标签：joomla

我已经在我的网站上实现了 falang，效果很好。但是，我找不到翻译联系人姓名的方法。

我正在为我的“取得联系”菜单项使用菜单项类型“单一联系人”。当点击顶部的联系人姓名（如页面标题）时，这会显示一个联系人表单。我已将我的联系人命名为“取得联系”，因此它看起来像一个标准的页面标题，但需要它是荷兰语的“Ons Bereiken”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:10:35.743

您使用的是荷兰语语言包吗？

对于 2.5+，最简单的方法是转到语言管理器并为字符串创建覆盖（在覆盖选项卡上）。

# linux - 在 awk 中应用多个正则表达式

> ID：13050817
> 
> 赞同：2
> 
> 时间：2012-10-24T13:58:11.190
> 
> 标签：linux, awk

我有一个很大的日志文件。我必须一个一个地应用多个正则表达式，在打印每个正则表达式的输出之前，我需要打印一些文本。

例如。

应用正则表达式后，我应该得到如下输出：

```
Text 1

Output of first regex
....

Text 2 

Output of second regex
....

Text 3

Output of third regex
.... 
```

其中文本 1、文本 2 和文本 3 是我插入的文本。我们可以使用 AWK 来实现这一点吗？

**编辑：**

我正在添加示例日志文件的一部分。

```
[1351059075] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused
[1351059898] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused
[1351073883] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL 
[1351073886] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL
[1351088949] SERVICE ALERT: server3:PSU ;CRITICAL;HARD;3;Connection refused 
```

现在我想将所有`Email`,分开`History`，`PSU`所以我的输出应该是这样的：

```
Email:

[1351059075] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused
[1351059898] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused

History:

[1351073883] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL 
[1351073886] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL

PSU:

[1351088949] SERVICE ALERT: server3:PSU ;CRITICAL;HARD;3;Connection refused 
```

我写了一个简单的 awk 脚本：

```
awk 'BEGIN {print "Email:\n\n"} /SERVICE ALERT: .*Email.*CRITICAL;HARD/ {print $0}' logfilename 
```

我不知道如何在同一个 awk 脚本中包含多个正则表达式，以便以所需的方式打印。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:47:38.397

您要求做的是微不足道的（只需添加更多 /RE/{action} 行），但您使用 RE 的方法首先是错误的。您需要做的就是：

```
$ cat file
[1351059075] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused
[1351059898] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused
[1351073883] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL
[1351073886] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL
[1351088949] SERVICE ALERT: server3:PSU ;CRITICAL;HARD;3;Connection refused

$ cat tst.awk
BEGIN{ FS = "[:;]" }
{ out[$3] = out[$3] $0 ORS }
END { for (type in out) print type ORS out[type] }

$ awk -f tst.awk file
Email
[1351059075] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused
[1351059898] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused

PSU
[1351088949] SERVICE ALERT: server3:PSU ;CRITICAL;HARD;3;Connection refused

History
[1351073883] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL
[1351073886] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:47:41.237

尝试以下命令（在 varios 行中进行单行拆分）：

```
awk '
    BEGIN { 
        FS = "[:;]"; 
    } 
    {
        if ( $3 in keys ) {
            printf "%s\n", $0;
        }
        else {
            printf "%s%s:\n\n%s\n", (length( keys ) > 0) ? "\n" : "", $3, $0;
        }

        keys[ $3 ] = 1;
    }
' infile 
```

这会产生：

```
Email:

[1351059075] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused
[1351059898] SERVICE ALERT: server1:Email;CRITICAL;HARD;3;Connection refused

History :

[1351073883] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL 
[1351073886] SERVICE ALERT: server2:History ;CRITICAL;HARD;3;HTTP CRITICAL

PSU :

[1351088949] SERVICE ALERT: server3:PSU ;CRITICAL;HARD;3;Connection refused 
```

# c# - 附加到进程时没有可用的源代码

> ID：13050818
> 
> 赞同：0
> 
> 时间：2012-10-24T13:58:12.877
> 
> 标签：c#, .net, visual-studio-2010, debugging, citrix

当我附加到一个进程时，wfica32.exe 我收到一条消息说“没有可用的源代码”。此应用程序通过 Citrix 启动。

当然，我没有任何问题附加到这个应用程序并在它本地运行时查看它的源代码。不幸的是，我遇到的错误仅在通过 Citrix 运行时发生。我怀疑是比赛条件。

我将`*.pdb`文件添加到服务器。是否可以附加到进程并在 Citrix 会话中查看源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:53:24.867

您不能期望能够调试在您连接的远程计算机上运行的应用程序，将调试器附加到 Citrix 客户端进程（您提到的 wfica32.exe）。您需要做的是设置远程调试（在某些情况下这可能是不可能的）。您可以在 msdn 上找到更多信息：http: [//msdn.microsoft.com/en-us/library/bt727f1t.aspx](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:00:04.907

PDB 文件将为您提供符号，但您还需要服务器上的源文件。

# objective-c - 使用 Objective-c 的 web 服务

> ID：13050819
> 
> 赞同：-3
> 
> 时间：2012-10-24T13:58:16.070
> 
> 标签：objective-c, ios, web-services

在我的应用程序中，我想检索埃及当前位置附近的所有商店。我使用了 Google Places API，但它没有给我我需要的东西，而且它只有 20 个商店。任何人都可以帮助我使用免费的 Web 服务或我可以访问的数据库。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:17:23.810

如果该数据不以 Google Places API 以外的任何形式存在，那么您可能不走运。我会推荐这个网站来搜索 API。[http://www.programmableweb.com/apis](http://www.programmableweb.com/apis)

如果programmableweb.com 没有帮助，我建议寻找一家可能为埃及创建商业目录的公司。假设他们愿意与您合作，您可能最终需要自己构建 API。

# silverlight - 将数据从 WCF Ria 服务绑定到数据网格实体框架代码优先

> ID：13050820
> 
> 赞同：0
> 
> 时间：2012-10-24T13:58:16.007
> 
> 标签：silverlight, entity-framework, data-binding, ef-code-first, wcf-ria-services

我创建了这样的简单 POCO 类：

```
 public   class Entity
{
 public int   Id { get; set; }
 public bool IsActive { get; set; }
} 
```

这是我的 EF DbContext ：

```
 public class SampleContext:DbContext 
    {
             public DbSet<Entity> Entities { get; set; }

    } 
```

我定义了这样的示例逻辑层：

```
 public class EntityTask : IEntityTask 
    {
       #region Implementation of IEntityTask

       public IEnumerable<Entity> GetAll()
       {
           var contex = new SampleContext();

           return contex.Entities.ToList();
       }

       #endregion
    }

     public   interface IEntityTask
 {
     IEnumerable<Entity> GetAll();

 } 
```

这是在服务器项目中定义的 DomainService 类：

```
 [EnableClientAccess()]
public class CrudService : DomainService
{
    private readonly IEntityTask _entityTask;

    public CrudService(IEntityTask entityTask)
    {
        _entityTask = entityTask;
    }

    public IQueryable<Entity>  GetAll ()
    {
       return _entityTask.GetAll().AsQueryable();
    }
} 
```

在这些步骤之后，我不知道如何在 silverlight 项目中将数据绑定到 DataGrid。我检查了网络上的许多链接，但其中许多使用向导将数据绑定到数据网格。如何将实体绑定到 DataGrid ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:37:13.687

开始使用`KeyAttribute`（可能在 Id 属性上）标记您的实体，然后您必须向 msbuild 指示如何创建服务的代理对应项（名为 DomainContext）：在您的 silverlight 项目中，在属性选项卡下![RiaLink](../Images/c03135b0a2d1412a0ba6f20cfd1e5488.png)
选择您的“服务器端”项目并构建解决方案。
客户端将生成一个代理，通过查看客户端项目来检查它（请务必按“在解决方案资源管理器中显示所有文件”并查找类似于下图
![RiaProxy](../Images/acbf260bfa6a8ab66781ae5c41b2bed0.png)
的内容 在 Generated_Code 隐藏文件夹下，您会找到您的 DomainContext.从现在开始，加载和绑定数据应该非常简单。看看 Brad Abrams 的优秀博客文章系列[在这里](http://blogs.msdn.com/b/brada/archive/2010/03/15/silverlight-4-ria-services-ready-for-business-index.aspx)，你会找到你需要的一切。

# c++ - 访问 mac 的传感器数据

> ID：13050821
> 
> 赞同：3
> 
> 时间：2012-10-24T13:58:29.907
> 
> 标签：c++, python, macos

有没有办法使用 Python 和/或 C++ 在 mac 上获取环境光传感器数据？谷歌搜索但没有找到太多信息。那里的大部分信息与Objective-C有关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:15:04.817

这看起来很重要……您可能需要使用 C/C++ 来制作 swig 组件

这是一个读取突然运动传感器数据的项目....看一下

[http://code.google.com/p/pyapplesms/source/browse/trunk/applesms.c](http://code.google.com/p/pyapplesms/source/browse/trunk/applesms.c)

# web-services - 使用java创建Web服务客户端

> ID：13050825
> 
> 赞同：0
> 
> 时间：2012-10-24T13:58:45.367
> 
> 标签：web-services

我有 web 服务连接 url 和它的方法。如何在 java 中调用 web 服务。需要什么要求（导入任何 api）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:26:25.020

您能否提供信息，也许还有一些代码示例？

您没有说明它是 Java 小程序、应用程序还是 servlet。

一般来说，例如，在 java 小程序中，要“发布”数据，您需要创建一个直接套接字连接，为 HTTP 发布构建正确的标头，通过套接字发送它，然后再次直接解析传入的响应。应该注意的是，未签名的 Java 小程序只能与从其下载的服务器建立直接套接字连接（代码库）

希望这可以帮助。

达伦 [光谱软件设计](http://www.spectralsoftware.net)

# windows - cmake：指定编译器的问题

> ID：13050827
> 
> 赞同：5
> 
> 时间：2012-10-24T13:58:56.757
> 
> 标签：windows, gcc, makefile, g++, cmake

我对这个 CMakeLists.txt 文件有疑问：

```
cmake_minimum_required(VERSION 2.6)

SET(CMAKE_C_COMPILER C:\\MinGW\\bin\\gcc)
SET(CMAKE_CXX_COMPILER C:\\MinGW\\bin\\g++)

project(cmake_test)

add_executable(a.exe test.cpp) 
```

使用以下命令调用 cmake： `cmake -G "MinGW Makefiles"`

我得到：

```
c:\cmake_test>cmake -G "MinGW Makefiles" .
-- The C compiler identification is GNU 4.6.1
CMake Warning (dev) at CMakeFiles/CMakeCCompiler.cmake:1 (SET):
  Syntax error in cmake code at

    C:/cmake_test/CMakeFiles/CMakeCCompiler.cmake:1

  when parsing string

    C:\MinGW\bin\gcc

  Invalid escape sequence \M

  Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
  "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
  command to set the policy and suppress this warning.
Call Stack (most recent call first):
  CMakeLists.txt:12 (project)
This warning is for project developers.  Use -Wno-dev to suppress it.

-- The CXX compiler identification is GNU 4.6.1
CMake Warning (dev) at CMakeFiles/CMakeCXXCompiler.cmake:1 (SET):
  Syntax error in cmake code at

    C:/cmake_test/CMakeFiles/CMakeCXXCompiler.cmake:1

  when parsing string

    C:\MinGW\bin\g++

  Invalid escape sequence \M

  Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
  "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
  command to set the policy and suppress this warning.
Call Stack (most recent call first):
  CMakeLists.txt:12 (project)
This warning is for project developers.  Use -Wno-dev to suppress it.

-- Check for working C compiler: C:\MinGW\bin\gcc
CMake Error at C:/cmake_test/CMakeFiles/CMakeCCompiler.cmake:1 (SET):
  Syntax error in cmake code at

    C:/cmake_test/CMakeFiles/CMakeCCompiler.cmake:1

  when parsing string

    C:\MinGW\bin\gcc

  Invalid escape sequence \M
Call Stack (most recent call first):
  CMakeLists.txt:2 (PROJECT)

CMake Error: CMAKE_C_COMPILER not set, after EnableLanguage
CMake Error: Internal CMake error, TryCompile configure of cmake failed
CMake Error: your C compiler: "C:\MinGW\bin\gcc" was not found.   Please set CMAKE_C_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: "C:\MinGW\bin\g++" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Configuring incomplete, errors occurred! 
```

我也尝试过：

```
C:\MinGW\bin\g++
/C/MinGW/bin/g++ 
```

结果相同。双引号也没有帮助。

当然，编译器存在于指定目录中。

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:58:55.497

您必须使用*四个*反斜杠才能在 a 中获得文字反斜杠`SET`：

```
SET(CMAKE_C_COMPILER C:\\\\MinGW\\\\bin\\\\gcc)
SET(CMAKE_CXX_COMPILER C:\\\\MinGW\\\\bin\\\\g++) 
```

无论您是否在参数周围使用引号，这都适用。

由于这很丑陋，最好使用正斜杠：

```
SET(CMAKE_C_COMPILER C:/MinGW/bin/gcc)
SET(CMAKE_CXX_COMPILER C:/MinGW/bin/g++) 
```

# ruby - 多个 has_one 关联到一个多态模型

> ID：13050831
> 
> 赞同：1
> 
> 时间：2012-10-24T13:59:12.690
> 
> 标签：ruby, database, ruby-on-rails-3, database-design, activerecord

我有两个模型，`Address`并且`User`：

```
class Address < ActiveRecord::Base
  belongs_to :resource, polymorphic: true
end

class User < ActiveRecord::Base
  has_one :contact_address, class_name: "Address", as: :resource
  has_one :billing_address, class_name: "Address", as: :resource
end 
```

问题是如果我创建`billing_address`它`User`会自动设置为`contact_address`，因为`addresses`表没有指定不同的`resource_type`（两者都是`User`）。你能给我一些关于我应该如何设置我的模型的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T23:48:52.847

[单表继承](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)可以帮助你。要使其工作，您必须通过迁移`type`向表中添加一列`locations`（就像您对所有单表继承模型所做的那样）。

```
class Address < ActiveRecord::Base
  belongs_to :resource, polymorphic: true
end

class ContactAddress < Address
end

class BillingAddress < Address
end

class User < ActiveRecord::Base
  has_one :contact_address, as: :resource
  has_one :billing_address, as: :resource
end 
```

无论如何，`belongs_to`关系名称 ( `:resource`) 有点奇怪。也许`:addressable`会更有意义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:17:36.200

我选择了简单的方法，为`addresses`表添加了另一个foreign_key。在那之后：

```
has_one :contact_address, class_name: "Address", as: :resource, foreign_key: :foreign_key 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:23:27.763

我会说帐单地址更多地与订单有关，而不是与人有关。例如，在一份订单上，我可能希望您在工作时向我收费，在家里再向我收费。

另外，一个人可以有很多地址，但一个地址也可以有很多人。它是一个网络，而不是一个层次结构。经典表示：

```
PARTY
id
type
name

PARTY_ADDRESS
id
party_id
address_id
type {home, work}

ADDRESS
id
suite
...

ORDER
id
date
customer_party_address_id
bill_to_party_address_id

ORDER_ITEM
id
order_id
product_id
price
quantity
ship_to_party_address_id 
```

# objective-c - UIImageView 子类不能同时工作手势

> ID：13050837
> 
> 赞同：2
> 
> 时间：2012-10-24T13:59:26.583
> 
> 标签：objective-c, ios, ipad, uiimageview, subclass

我正在为 iPad 开发 iOs 6 应用程序。我开发了一个 UIImageView 子类，添加了手势识别（缩放、捏合和平移），但我有一个问题：它不能同时接受手势。我首先将它编码为普通的 UIImageView，它工作得很好，但现在它没有子类。我的代码：

image.m（UIImageView 子类）

```
- (id)initWithImage:(UIImage *)image {
self = [super initWithImage:image];

if (self) {

    [self setMultipleTouchEnabled:YES];
    [self setUserInteractionEnabled:YES];

    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panDetected:)];
    [super addGestureRecognizer:panRecognizer];

    UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchDetected:)];
    [super addGestureRecognizer:pinchRecognizer];

    UIRotationGestureRecognizer *rotationRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotationDetected:)];
    [super addGestureRecognizer:rotationRecognizer];

    UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
    tapRecognizer.numberOfTapsRequired = 2;
    [super addGestureRecognizer:tapRecognizer];

    NSLog(@"lkjlkj");
}
return self;}

- (void)panDetected:(UIPanGestureRecognizer *)panRecognizer {
CGPoint translation = [panRecognizer translationInView:self.superview];
CGPoint imageViewPosition = self.center;
imageViewPosition.x += translation.x;
imageViewPosition.y += translation.y;

self.center = imageViewPosition;
[panRecognizer setTranslation:CGPointZero inView: self.superview];}

  - (void)pinchDetected:(UIPinchGestureRecognizer *)pinchRecognizer{    

CGFloat scale = pinchRecognizer.scale;
self.transform = CGAffineTransformScale(self.transform, scale, scale);
pinchRecognizer.scale = 1.0;}

- (void)rotationDetected:(UIRotationGestureRecognizer *)rotationRecognizer{
CGFloat angle = rotationRecognizer.rotation;
self.transform = CGAffineTransformRotate(self.transform, angle);
rotationRecognizer.rotation = 0.0;}

- (void)tapDetected:(UITapGestureRecognizer *)tapRecognizer{
[UIView animateWithDuration:0.25 animations:^{
    self.center = CGPointMake(CGRectGetMidX(self.superview.bounds), CGRectGetMidY(self.superview.bounds));
    self.transform = CGAffineTransformIdentity;
}];}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
return YES;} 
```

viewcontroller.m（我从不同时响应多个手势的图像创建一个图像视图）

```
image *img = [[image alloc] initWithImage:imatgetemporal];    
img.center = CGPointMake(525/2, 651/2);

[[self.view viewWithTag:2] addSubview:img]; 
```

谢谢大家！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T21:09:54.277

我想你可以通过在声明它们之后将相同的委托添加到`UIPanGestureRecognizer`,`UIPinchGestureRecognizer`和`UIRotationGestureRecognizer`来解决它。`UITapGestureRecognizer`代码将是这样的：

```
tapRecognizer.delegate = self;
pinchRecognizer.delegate = self;
rotationRecognizer.delegate = self;
tapRecognizer.delegate = self; 
```

希望能帮助到你。

# android - Android：资源 $NotFoundException

> ID：13050843
> 
> 赞同：0
> 
> 时间：2012-10-24T13:59:52.383
> 
> 标签：android, exception

我正在使用 android，并且对它比较陌生，我遇到了一个我似乎无法修复的异常。

日志输出

```
10-24 13:50:59.941: E/AndroidRuntime(772): FATAL EXCEPTION: main
10-24 13:50:59.941: E/AndroidRuntime(772): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.metronome/com.metronome.MainActivity}: android.content.res.Resources$NotFoundException: String resource ID #0x78
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.os.Looper.loop(Looper.java:137)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.app.ActivityThread.main(ActivityThread.java:4340)
10-24 13:50:59.941: E/AndroidRuntime(772):  at java.lang.reflect.Method.invokeNative(Native Method)
10-24 13:50:59.941: E/AndroidRuntime(772):  at java.lang.reflect.Method.invoke(Method.java:511)
10-24 13:50:59.941: E/AndroidRuntime(772):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-24 13:50:59.941: E/AndroidRuntime(772):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-24 13:50:59.941: E/AndroidRuntime(772):  at dalvik.system.NativeStart.main(Native Method)
10-24 13:50:59.941: E/AndroidRuntime(772): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x78
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.content.res.Resources.getText(Resources.java:247)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.widget.TextView.setText(TextView.java:3432)
10-24 13:50:59.941: E/AndroidRuntime(772):  at com.metronome.MainActivity.onCreate(MainActivity.java:36)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.app.Activity.performCreate(Activity.java:4465)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-24 13:50:59.941: E/AndroidRuntime(772):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
10-24 13:50:59.941: E/AndroidRuntime(772):  ... 11 more 
```

我读过人们说要通过清理项目来解决问题，但我已经尝试了两次，但没有帮助。我还创建了另一个项目并复制了代码，所以我认为这是不同的东西。任何帮助表示赞赏。

第 36 行

```
txtBPM1.setText(120, TextView.BufferType.EDITABLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:16:16.097

`onCreate`当您访问某些控件或您在活动中传递的布局中不存在的控件时，会发生此错误`setContentView(R.layout.your_layout);`。只需检查您使用的所有 id 、 string 和其他控件是否属于相同布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:14:39.497

（您在 MainActivity.java 中的错误：第 36 行（它是导入生成的 R）） 1\. 从导入中删除错误行并在红色 R.id 上使用弹出消息。*** * 2.关闭并重新打开IDE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:15:04.523

将 120 更改为这样的字符串：

```
txtBPM1.setText(""+120, TextView.BufferType.EDITABLE); 
```

# java - 单例程序中静态语句的使用和流程

> ID：13050846
> 
> 赞同：3
> 
> 时间：2012-10-24T13:59:59.593
> 
> 标签：java, static, singleton

我知道关于单例模式有很多问题。但是在这里我想知道关于输出的内容，它也可能涵盖“静态”在 Java 中的工作方式。

```
public class Singleton {
    private static Singleton currentSingleton = new Singleton();

    public static Singleton getSingleton() { 
        return currentSingleton;
    }

    private Singleton() {
        System.out.println("Singleton private constructor...");
    }

    public static void main(String[] args) {
        System.out.println("Main method...");
    } 
```

    }

这是运行代码的输出...

> 单例私有构造函数...
> 主要方法...

当我调试这段代码时，控制首先进入 `System.out.println("Singleton private constructor...")`并打印。（此时私有静态变量currentSingleton仍为null）
然后进入line
`private static Singleton currentSingleton = new Singleton();` ，然后初始化私有变量。最后，它转到 main() 方法并打印。

我的问题是：

1.  为什么它首先打印私有构造函数中的“单例私有构造函数...”。我认为控制应该首先转到 main() 方法，因为它是入口点。此外，我没有在任何地方创建任何实例（变量初始化除外）。
2.  后来到了静态变量实例化行（此时currentSingleton=null）
    `private static Singleton currentSingleton = new Singleton();` 虽然currentSingleton在这里得到了一个值，但是为什么没有再次调用构造函数呢？

主要是想知道这个程序的控制流程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:03:01.437

每当控制第一次进入任何类时，所有静态初始化都会首先发生。这就是为什么你的静态对象通过调用它的构造函数在其他任何东西之前被实例化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:02:34.010

您不能调用类中的 main 方法，直到它被正确初始化（即静态字段和静态块已被评估）。当它被初始化时，你的单例实例是通过调用私有构造函数来创建的。稍后调用 main 方法。

有问题的类有一个静态字段，您可以为其分配一个值。由于该字段是静态的，因此必须在类可以在任何上下文中使用之前对其进行初始化，也就是说，它必须接收一个值。在这种情况下，它的值恰好是同一类的一个实例。这是在类初始化期间触发您的私有构造函数的原因。

如果您想深入研究该过程并更好地理解它，请参阅[Java Laguage 规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.htm)。更具体地说，在第 12.4 节[类和接口的初始化中，](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)您将找到更多详细信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T14:12:51.307

类首先由 JVM 的类加载器加载和初始化。JVM 在初始化时扫描类（Singleton）并在这样做的同时初始化第一行中的静态变量。该变量调用构造函数并在其中打印行。一旦类被初始化，它将调用 main 方法并因此在其中打印语句。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T14:03:15.230

在控件进入 main() 方法之前，需要初始化该类。由于您`currentSingleton`使用声明初始化内联，因此此初始化发生在 main() 之前，在类加载期间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T14:03:39.770

您应该将其声明为`final`

```
private static final Singleton currentSingleton = new Singleton(); 
```

1.  final 类变量和接口的字段，其值为编译时常量，被初始化

[从JLS#8.3.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2)回答你的两个问题。[字段的初始化](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2)

> 如果声明器用于类变量（即静态字段），则在初始化类时（第 12.4.2 节）评估变量初始化器并执行一次赋值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-24T14:29:43.017

该`new Singleton()`语句首先被执行，因为`currentSingleton`必须初始化静态字段；这意味着为正在创建的 Singleton 对象分配内存，并在将结果对象分配给字段变量之前执行其构造函数。这是在`System.out.println("Singleton private constructor...");`分配之前执行该行的原因。此外，静态字段初始化在类被引用时立即发生，调用 Singleton 类的 main 函数意味着引用它，这就是在 main 方法之前执行初始化的原因。

# android - Android 上的 Java NIO：在连接仍处于挂起状态时尝试读/写？

> ID：13050848
> 
> 赞同：1
> 
> 时间：2012-10-24T14:00:06.120
> 
> 标签：android, networking, nio

这个问题是关于 Android 上 Java 的 NIO（2.2，虽然我可以在必要时为更高的 API 构建）：在对目标 IP 地址执行 SocketChannel connect() 之后，我注册我的通道以进行 READ 操作。问题是当我尝试对生成的选定键集执行 READ 时，我收到 NotYetConnectedException。虽然我可以在尝试 READ 之前使用 isConnectionPending 检查通道的状态，但理想情况下，我希望仅在连接实际工作时才选择 READ 键。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:06:00.640

You're doing it wrong.

While the connection is pending, the channel must only be registered for `OP_CONNECT`.

When `OP_CONNECT` fires, you must call `finishConnect()`, and then proceed as follows:

1.  If it returns true, you must then deregister `OP_CONNECT`, and you may then register `OP_READ` or `OP_WRITE`.

2.  If it returns false, do nothing: the connection is still pending.

3.  If it throws an exception, the connect has failed and you must close the channel.

# sql - 对 JTable NullPointerException 的 SQL 查询

> ID：13050851
> 
> 赞同：0
> 
> 时间：2012-10-24T14:00:21.173
> 
> 标签：sql, swing, jtable, nullpointerexception

这完美运行：

```
package sledmonitor;

import java.io.File;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class GetList3 {

    private Connection conn;
    private String ConnectURL = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=." + File.separator + "db" + File.separator + "sledprod.mdb";
    private String user = "";
    private String pw = "";
    String offer;

    GetList3(String sql){
    try{

        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
        conn = DriverManager.getConnection(ConnectURL, user, pw);
        Statement stmt = conn.createStatement();
        System.out.println(sql);
        ResultSet rs = stmt.executeQuery(sql);
        while(rs.next()){
            offer = rs.getString("offernumber");
            System.out.println(offer);
        }
        rs.close();
        stmt.close();
    }
    catch(Exception e){
        e.printStackTrace();
    }
    finally{
        if(conn!=null){
            try{
                conn.close();
            }
            catch(Exception e){
                e.printStackTrace();
            }
        }
    }

    }
} 
```

现在我想在 JTable 中显示结果。所以我做了这个，通常应该做什么：

```
while(rs.next()){
            offer = rs.getString("offernumber");
            List.tablemodel.addRow(new String[]{offer});
        } 
```

但这会以某种方式引发 NullPointerException：

```
SELECT o.offernumber, o.TotalMPL
FROM sled_offers o left join sled_changes c on o.offerguid = c.objectid
WHERE (c.nextsequencenr is null or c.nextsequencenr=99999) AND TotalMPL='0'
AND (o.offerstate=2 or o.offerstate=4 or o.offerstate=5)
java.lang.NullPointerException
    at sledmonitor.GetList3.<init>(GetList3.java:28)
    at sledmonitor.GetList.<init>(GetList.java:45)
    at sledmonitor.Monitor$4.mouseClicked(Monitor.java:99)
    at java.awt.AWTEventMulticaster.mouseClicked(AWTEventMulticaster.java:270)
    at java.awt.Component.processMouseEvent(Component.java:6508)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4501)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:676)
    at java.awt.EventQueue$4.run(EventQueue.java:674)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

类 List 如下所示：

```
package sledmonitor;

import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.table.DefaultTableModel;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class List extends JFrame {

    private JPanel contentPane;
    private JTable table;
    static DefaultTableModel tablemodel;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    List frame = new List();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public List() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JScrollPane scrollPane = new JScrollPane();
        contentPane.add(scrollPane, BorderLayout.CENTER);

        tablemodel = new DefaultTableModel();
        tablemodel.addColumn("OfferNumber");

        table = new JTable(tablemodel);
        scrollPane.setViewportView(table);
    }

} 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:16:03.787

您似乎在`List.tablemodel`没有首先实例化`List`对象的情况下访问静态字段，因此您没有调用`List()`不会实例化`tablemodel`对象的调用。

然后，您应该使用静态构造函数：

```
static {
    tablemodel = new DefaultTableModel();
    tablemodel.addColumn("OfferNumber");
} 
```

`List()`并从构造函数中删除这两行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:28:45.603

用这个

```
DefaultTableModel myData = new DefaultTableModel();
  JTable table = new JTable(myData); 
```

// 使用模型类型构造函数初始化表

```
while(rs.next()){
       String offer = rs.getString("offernumber");
        Object [] rowData=new Object[]{offer,null};
       myData.addRow(rowData);
    } 
```

//使用defaulttablemodel类的addRow(Object[] rowData)方法

# ajax - 有条件地渲染数据表

> ID：13050856
> 
> 赞同：1
> 
> 时间：2012-10-24T14:00:46.247
> 
> 标签：ajax, jsf, richfaces

我有一个`<rich:dataTable>`JSF 页面。

```
<rich:dataTable id="transactionTable" rendered="#{tellerBean.userTransactions.size() > 0}"
    value="#{tellerBean.userTransactions}" var="transaction"> 
```

当我按下搜索按钮时，支持列表被填满，我重新渲染表格。但是这不起作用，因为该`rendered`属性是服务器端的，并且网格从一开始就不会转换为 HTML，因此重新渲染失败。当后备列表大小为 0 时，如何隐藏网格，并在列表大小大于 0 时显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:05:18.490

将其包装在始终呈现并更新它的组件中。

```
<h:panelGroup id="transactionTableGroup">
    <rich:dataTable ... rendered="#{not empty tellerBean.userTransactions}">

    </rich:dataTable>
</h:panelGroup> 
```

*（请注意，我也改进了`rendered`属性中的 EL 表达式；你的很笨拙，并且在使用 Facelets 而不是旧版 JSP 时只会产生 XML 语法错误）*

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

# php - 发送显示代码的 PHP HTML 电子邮件

> ID：13050858
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:00:48.220
> 
> 标签：php, html, email

我有一个发送确认电子邮件的网站。当我直接向我的 gmail 帐户或工作帐户发送电子邮件时，它会按预期显示，但是，当它通过另一个通过 godaddy 或通过 Network Solutions 注册的电子邮件地址时，它会显示如下：

```
Reply-To: tom@yahoo.com

    Content-Type: text/html; boundary="PHP-alt-cabc44cdb6c49a722d25637d7407d89c"
    Message-Id: <20121024134543.9B59E10076@server1.serverdomain.com>
    Date: Wed, 24 Oct 2012 08:45:43 -0500 (CDT)

    <html><body><h1>You have been registered for Future Event</h1><div><b>Date:</b> March 4th, 2013</div><div><b>Time:</b> 12:00am</div><div><p>Come one come all.  Step into the future</p></div><div><a href="http://example.com/create_ical/?m=6ea267734713bd10" target="_blank">Download to your calendar</a></div><a href="http://www.example.com/adtracking/?a=532ff9c94b851df4&l=http://www.example.com/?x=ad" target="_blank"  style="border-width:0px; margin-left:auto; margin-right:auto; display:block; margin-top:20px;"><img src="http://www.example.com/i/ads/57db2ce3d22e4636_ad_mrc_300_250.jpg"  style="border-width:0px; margin-left:auto; margin-right:auto; display:block; margin-top:20px;"></a></body></html> 
```

Godaddy基本上说这是我的错，他们不负责任。

这就是我设置标题的方式：

```
$_HEADERS = "From: " . $_HOST["email"] . "\r\nReply-To: " . $_HOST["email"] . "";
$_HEADERS .= "\r\nContent-Type: text/html; boundary=\"PHP-alt-".$_random_hash."\""; 
```

这是完整的电子邮件：

```
Delivered-To: through-godaddy-to-my-account-at@gmail.com
Received: by 10.58.227.40 with SMTP id rx8csp526380vec;
        Wed, 24 Oct 2012 06:46:02 -0700 (PDT)
Received: by 10.52.90.212 with SMTP id by20mr22114953vdb.118.1351086361703;
        Wed, 24 Oct 2012 06:46:01 -0700 (PDT)
Received-SPF: pass (google.com: best guess record for domain of server1.serverdomain.com designates 66.18.17.26 as permitted sender) client-ip=66.18.17.26;
Message-ID: <5087f119.9bcfdc0a.6321.234eMFETCHER_ADDED@google.com>
Received: by 10.220.207.155 with POP3 id fy27mf482750vcb.7;
        Wed, 24 Oct 2012 06:46:01 -0700 (PDT)
X-Gmail-Fetch-Info: email-at-godaddy@example.com 1 pop.secureserver.net 110 email-at-godaddy@example.com
Received: (qmail 13064 invoked by uid 30297); 24 Oct 2012 13:45:46 -0000
Received: from unknown (HELO m1pismtp01-016.prod.mesa1.secureserver.net) ([10.8.12.16])
          (envelope-sender <apache@server1.serverdomain.com>)
          by p3plsmtp14-04.prod.phx3.secureserver.net (qmail-1.03) with SMTP
          for <email-at-godaddy@example.com>; 24 Oct 2012 13:45:46 -0000
X-IronPort-Anti-Spam-Result: ApIxAH/wh1BCEhEa/2dsb2JhbABEghiJdKNaMQEBkGdwgQiCGoEzID4ZASqFSQeCGAkBAw8LmXGPHId3ASOVAmeDSYIegQYDlCKCaIQihXCFEA
Received: from server1.serverdomain.com ([66.18.17.26])
  by m1pismtp01-016.prod.mesa1.secureserver.net with ESMTP; 24 Oct 2012 06:45:45 -0700
Received: by server1.serverdomain.com (Postfix, from userid 48)
    id 9B59E10076; Wed, 24 Oct 2012 08:45:43 -0500 (CDT)
To: email-at-godaddy@example.com
Subject: You have successfully registered for Future Event
From: tom@yahoo.com
X-Nonspam: None
Date: Wed, 24 Oct 2012 06:46:01 -0700 (PDT)

Reply-To: tom@yahoo.com

Content-Type: text/html; boundary="PHP-alt-cabc44cdb6c49a722d25637d7407d89c"
Message-Id: <20121024134543.9B59E10076@server1.serverdomain.com.com>
Date: Wed, 24 Oct 2012 08:45:43 -0500 (CDT)

<html><body><h1>You have been registered for Future Event</h1><div><b>Date:</b> March 4th, 2013</div><div><b>Time:</b> 12:00am</div><div><p>Come one come all.  Step into the future</p></div><div><a href="http://example.com/create_ical/?m=6ea267734713bd10" target="_blank">Download to your calendar</a></div><a href="http://www.example.com/adtracking/?a=532ff9c94b851df4&l=http://www.example.com/?x=ad" target="_blank"  style="border-width:0px; margin-left:auto; margin-right:auto; display:block; margin-top:20px;"><img src="http://www.example.com/i/ads/57db2ce3d22e4636_ad_mrc_300_250.jpg"  style="border-width:0px; margin-left:auto; margin-right:auto; display:block; margin-top:20px;"></a></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:10:13.463

如果您要发送多部分消息，则应仅使用“边界”。这可能会使 GoDaddy 的解析器或垃圾邮件检查器或其他任何东西感到困惑；他们打开您的邮件并重新打包，使其看起来“错误”。

然而，如果 GoDaddy 不像 Google 那样“在接受的东西上那么自由”，那并不是真正的 GoDaddy 的错。

查看诸如 PHPMailer 或[multipart structure](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)之类的类；或者只发送没有边界的 HTML（参见例如[http://www.w3schools.com/php/func_mail_mail.asp](http://www.w3schools.com/php/func_mail_mail.asp)）。

## 更新

将您的标头与另一封 HTML 邮件进行比较，会出现一些差异：

```
From: tom@yahoo.com
X-Nonspam: None
Date: Wed, 24 Oct 2012 06:46:01 -0700 (PDT)

Reply-To: tom@yahoo.com

Content-Type: text/html; boundary="PHP-alt-cabc44cdb6c49a722d25637d7407d89c"
Message-Id: <20121024134543.9B59E10076@server1.serverdomain.com.com>
Date: Wed, 24 Oct 2012 08:45:43 -0500 (CDT)

From: <redacted>
To: <redacted>
Date: Mon, 04 Apr 2011 10:33:32 +0200
MIME-Version: 1.0
Content-Type: text/html; charset="ISO-8859-15"

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
```

具体来说，“Reply-To:”周围的那些空行可能会使系统认为标题已终止，接下来是电子邮件文本内容。这可能是由组合标题时不正确的行终止符引起的。

# java - 正方形在我的摇摆应用程序中不旋转

> ID：13050860
> 
> 赞同：3
> 
> 时间：2012-10-24T14:01:04.520
> 
> 标签：java, swing, timer, graphics2d

我开发了一个小 Swing 应用程序，在其中我`JFrame`使用单独的类添加了一个 Square `component`。现在我想在它的中心旋转这个正方形，但我只看到一个根本不旋转的静态正方形。

这是我的代码...

```
public class Rotation extends JFrame {

    Rotation() {
        super("Animation of rotation about center");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(400,400);

        add(new component());

        setVisible(true);
    }

    public static void main(String args[]){
        SwingUtilities.invokeLater(new Runnable(){public void run(){new Rotation();}});
    }
}

class component extends JPanel implements ActionListener {
    Timer timer;
    Rectangle.Double r=new Rectangle.Double(100,100,50,50);
    int theta=0;

    component() {
        timer=new Timer(10,this);
        timer.start();
    }

    public void actionPerformed(ActionEvent e) {
        if (theta==360){
            theta=0;
            theta++;
        }
        repaint();
    }

    public void paint(Graphics g){
        Graphics2D g2=(Graphics2D)g;
        g2.setColor(Color.GRAY);
        g2.rotate(theta);
        g2.fill(r);
    }
} 
```

有人可以帮我识别并解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:18:15.480

您的代码中有很多错误：

1.  `theta`应该是双倍的，并且应该以弧度表示，而不是度数。所以让它加倍：

    ```
    private double theta = 0; 
    ```

2.  您不会更改`theta`计时器操作中的值 - 在以下位置执行此操作`actionPerformed`：

    ```
    public void actionPerformed ( ActionEvent e )
    {
        theta += Math.PI / 18;
        if ( theta >= Math.PI * 2 )
        {
            theta = 0;
        }
        repaint ();
    } 
    ```

3.  您不指定应围绕其旋转图形上下文的点。这样做（否则你的正方形将围绕坐标（0;0）的开始旋转）：

    ```
    public void paintComponent ( Graphics g )
    {
        super.paintComponent ( g );

        Graphics2D g2 = ( Graphics2D ) g;
        g2.setRenderingHint ( RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON );
        g2.rotate ( theta, 125, 125 );
        g2.setColor ( Color.GRAY );
        g2.fill ( r );
    } 
    ```

4.  您覆盖组件的`paint`方法而不是`paintComponent`. **总是**使用`paintComponent`它，因为它针对重绘和其他我不想在这里谈论的 Swing 内容进行了优化，因为它是一个很大的离题。

5.  您使用 JPanel 作为基础组件来绘制简单的形状 - 请改用 JComponent，因为您实际上并不需要任何 JPanel 的功能（实际上也没有）。

**请参阅最终的工作示例：**

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
 * @see http://stackoverflow.com/a/13051142/909085
 */

public class RotationTest extends JFrame
{
    public RotationTest ()
    {
        super ( "Animation of rotation about center" );
        setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
        setSize ( 400, 400 );

        add ( new MyComponent () );

        setVisible ( true );
    }

    public static void main ( String args[] )
    {
        SwingUtilities.invokeLater ( new Runnable ()
        {
            public void run ()
            {
                new RotationTest ();
            }
        } );
    }

    private class MyComponent extends JComponent implements ActionListener
    {
        private Timer timer;
        private Rectangle.Double r = new Rectangle.Double ( 100, 100, 50, 50 );
        private double theta = 0;

        public MyComponent ()
        {
            super ();
            timer = new Timer ( 1000 / 24, this );
            timer.start ();
        }

        public void actionPerformed ( ActionEvent e )
        {
            theta += Math.PI / 18;
            if ( theta >= Math.PI * 2 )
            {
                theta = 0;
            }
            repaint ();
        }

        public void paintComponent ( Graphics g )
        {
            super.paintComponent ( g );

            Graphics2D g2 = ( Graphics2D ) g;
            g2.setRenderingHint ( RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON );
            g2.rotate ( theta, 125, 125 );
            g2.setColor ( Color.GRAY );
            g2.fill ( r );
        }
    }
} 
```

正如您所看到的，我还在paint 方法中添加了一个渲染提示，以使方形移动平滑并重构您的一些代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:06:34.493

`theta`变量在哪里改变？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:10:55.023

```
public void actionPerformed(ActionEvent e) {
    theta+= 10; // <------------I think prooblem was here..
    if (theta==360){
        theta=0;
    }
    repaint();
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-24T14:31:03.740

问题是我需要进行 2 处更改：

```
// 1.
g2.rotate(theta,125,125);

// 2.
super.paint(g); 
```

# javascript - 如何从视频中删除 YouTube 徽标？

> ID：13050867
> 
> 赞同：0
> 
> 时间：2012-10-24T14:01:40.797
> 
> 标签：javascript, html

我插入`modestbranding=1`了 ，但它不起作用：YouTube 徽标仍然存在。

```
<a href="#null" onclick="document.getElementById('player').src='http://www.youtube.com/embed/dPvIx8Ughkm?modestbranding=1&controls=0..."> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:16:33.883

你也用过`showinfo`参数吗？如果是这样，它不能与`modestbranding`.

[这](http://www.reelseo.com/remove-youtube-logo/)是一篇关于这个的好文章。

不使用该`showninfo`参数将导致徽标和标签重新出现。可以通过将标题设置为nothing来*删除*标签`&title=&controls=0`
（注意`=`直接跟在next参数之后，该`controls`参数只是为了说明*什么*;]）

如果您需要更多控制，可以考虑使用[JWPlayer](http://www.longtailvideo.com/players)等替代播放器。

# xsd - 使用 XML 阅读器进行 XSD 验证，收集验证错误。（C＃）

> ID：13050874
> 
> 赞同：4
> 
> 时间：2012-10-24T14:01:56.297
> 
> 标签：xsd, xmlreader

我目前正在使用 XMLSerializer 来执行 XSD 验证并收集文件中的验证错误。任务是基于包含值集信息、存在信息等的自定义 XSD-s 验证文件。

我的问题如下：使用 XMLReader 时，如果我们将侦听器附加到阅读器的 ValidationEvents（通过 XMLReaderSettings），它会在第一个错误处停止。所以我只是捕获了我记录错误的异常。到目前为止一切都很好，在记录异常后问题开始出现。之后，XMLReader 转到失败字段的结束标记，但由于无法解释的异常，我无法验证下一个字段。

将其付诸实践，这是我捕获异常的代码：

```
 private bool TryDeserialize(XmlSerializer ser, XmlReader read,out object item)
  {
     string Itemname = read.Name;
     XmlReader read2 = read.ReadSubtree();
     try
     {
         item= ser.Deserialize(read2);
        return true;
     }
     catch (Exception e)
     {
        _ErrorList.Add("XSD error at " + Itemname + ": " + e.InnerException.Message);
        item = null;
        return false;
     }

  } 
```

该例程运行良好，但随后出现问题。假设我将以下 XML 片段传递给此代码：

```
 <a>2885</a>
  <b>ABC</b>
  <c>5</c> 
```

假设“b”可能没有“ABC”作为值，所以我收到 XSD 错误。最后，xmlreader 将位于“EndElement，Name=b”，除非出现异常，否则我根本无法从中移动。如果我执行 xmlreader.read，则会出现以下异常（在此处剪切命名空间）：

```
"e = {"The element 'urn:iso:.....b' cannot contain child element 'urn:iso:.....:c' because the parent element's content model is text only."}" 
```

在此之后，xmlreader 位于'Element，Name=c'，所以看起来不错，但是当尝试使用上面的代码对其进行反序列化时，出现以下异常：

```
'_message = "The transition from the 'ValidateElement' method to the 'ValidateText' method is not allowed."' 
```

我真的不知道我该如何克服它。我试过没有第二个读者阅读子树，但我有同样的问题。请给我一些建议，我真的被卡住了。提前非常感谢！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:12:48.233

您可能需要考虑以下事项：

*   通常，并不总是可以“收集”所有错误，因为验证解析器可以在发生某些类型的错误时自由放弃验证过程，尤其是那些使验证器处于无法可靠恢复的状态的错误. 例如，验证器在遇到简单类型的约束方面违规后仍可能继续，但如果它在意外内容中运行，它将跳过整个部分。

*   与解析为 DOM 不同，其中 DOM 的加载不受验证阅读器失败**验证**的影响，反序列化为对象是（或至少应该是）完全不同的：DOM 是关于格式良好的；反序列化，即强类型是关于**有效**的。

直觉上我会认为，如果您遇到验证错误，继续反序列化和进一步验证有什么意义？

尝试独立于反序列化验证您的 XML。如果确实使用这种方法标记了更多错误，那么上面应该解释原因。如果没有，那么您正在追逐其他东西。

# jquery - 重复类容器取最后一个子位置的高度和高度

> ID：13050878
> 
> 赞同：0
> 
> 时间：2012-10-24T14:02:15.013
> 
> 标签：jquery, position, containers, css-position, css-selectors

我有一个重复的 div 容器 class="content" ，其中包含绝对定位的 div。

```
.content{
   width: 960px;
   margin: 0 auto;
   padding-bottom: 20px;
   position: relative;
   overflow: auto;
}

 .article0{
   width: 300px;
   position: absolute;
}

 .article1{
   width: 230px;
   position: absolute;
   top: 80px;
}

 .article2{
   width: 230px;
   position: absolute;
}

 .article3{
   width: 230px;
   position: absolute;
   margin-bottom: 20px;
   top: 500px;
} 
```

如前所述，容器 class="content" 在同一页面中重复多次：

```
<div class="content">
<div class="article1"></div>
<div class="article2"></div>
<div class="article3"></div>
</div> 
```

我想要做的是给容器在每个容器中最后一个孩子的高度和顶部位置，类为.content。我已经尝试了下面的代码，但没有任何结果，容器始终只获得相同的高度值，我猜只能来自最后一个或第一个容器的最后一个孩子？想不通！

```
$(function(){
var $box = $('.content');
var lastChildPos = $(':last-child', $box).position().top;
var lastChildHeight = $(':last-child', $box).height();

$box.height(lastChildPos + lastChildHeight);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:05:53.823

`enter code here`如果有多个实例，您将需要这样的东西：

```
$('.content').each(function(){

    var lastChildPos = $(':last-child', $(this)).position().top;
    var lastChildHeight = $(':last-child', $(this)).height();

    $(this).height(lastChildPos + lastChildHeight);

}); 
```

这样，它将它应用于盒子的每个实例，并`$(this)`获取与每个容器相关的变量。

注意： :last-child 将选择父容器中类型的最后一个子项。也许您想尝试：

```
var lastChildPos = $(this).find('div:last-child').position().top; 
```

# objective-c - 目标 C，无法为 POST 操作验证用户身份

> ID：13050879
> 
> 赞同：0
> 
> 时间：2012-10-24T14:02:16.697
> 
> 标签：objective-c, xml, web-services, post

我正在尝试使用 POST 操作将数据发送到 biztalk 服务器

我在此链接下找到了一个非常好的教程 在[此处输入链接描述](http://www.robertkuzma.com/2011/07/making-a-post-in-objective-c-xcode-to-sharepoint-webservice-requiring-windows-ntlm-authenticaton-for-iphone-or-ipad/ "这个链接")

我写的完全一样（我当然更改了 xml 部分以反映我的参数）。但是数据没有被传输，我知道服务器需要身份验证这一事实。我所期待的是`-(void)connection:(NSURLConnection *)connection`要调用的函数，而不是函数

```
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
```

被调用。我发现我收到的错误消息如下：

```
ERROR: with the connection Error Domain=NSURLErrorDomain Code=-1003 "A server with the specified hostname could not be found." UserInfo=0x210f5d70 {NSErrorFailingURLStringKey=<server path>, NSErrorFailingURLKey=<server path>, NSLocalizedDescription=A server with the specified hostname could not be found., NSUnderlyingError=0x210f5290 "A server with the specified hostname could not be found."} 
```

我对`Code=-1003`等效于进行了一些研究，`kCFURLErrorCannotFindHost`并且我认为这与服务器位于需要身份验证的防火墙后面的事实有关。

我的问题如下，假设我的逻辑是正确的，有没有办法在执行 POST 操作之前先使用用户凭据访问公司网络？我认为如果我得到这个固定的东西应该工作

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:03:17.313

该错误消息表明它根本无法到达服务器，而不是身份验证问题。你能从你的 iPad/手机导航到 Safari 中的那个网站吗？您是否需要连接到 VPN 才能访问该站点？

如果您遇到身份验证问题，您应该会收到不同的错误。

# ruby-on-rails - 在 Rails 视图上渲染一些内容

> ID：13050884
> 
> 赞同：1
> 
> 时间：2012-10-24T14:02:31.683
> 
> 标签：ruby-on-rails, ajax

我是 Rails 的新手，所以我不确定这是否是正确的方法。我有一个视图，其中包含多个复选框的 AJAX 链接，形式为

```
<% @row_headers.each do |row_header| %>
  <% row_header_ = row_header.gsub(" ", "-") %>
    <%= check_box_tag row_header_, row_header, params.key?(row_header_),
      :data => { :remote => true,
      :url => url_for(
        controller: :web_pages,
        action: :administratorswgraph} %> <%= row_header %>
 <% end %>
<% end %> 
```

这是从 :administratorswgraph 视图调用的。稍后在我的文件中

```
<% if not @swChart.nil? %>
  <div id="swChart"></div>
  <%= render_chart(@swChart, 'swChart') %>
<% end %> 
```

其中 render_chart 来自[GoogleVisualr](https://github.com/winston/google_visualr)库。在我有的控制器上

```
def administratorswgraph
  headers = []
  @row_headers.each_with_index do |row_header, i|
    if params.key? row_header.gsub(" ", "-")
      headers.push i
    end
  end
  if headers.empty?
    @swChart = nil
  else
    @swChart = MakeSiteChart(headers, 580, 480)
  end
end 
```

MakeSiteChart 函数根据复选框返回一个 GoogleVisualr 对象。我想要的是，每次更改复选框的状态时，都会制作并显示一个新图表。我可以从我的调试器中看出，只要复选框的状态发生更改，确实会在视图中调用 <%= render_chart(@swChart, 'swChart') %>，但是浏览器中的显示永远不会更新。如何在浏览器中显示图表？

**编辑** 我能够通过使用以下方法来控制 ajax 事件

```
$('#<%=  @row_headers[0].gsub(" ", "-") %>').on('ajax:success', function(event, xhr, settings) {
  alert("HERE") 
```

});

出于测试目的，我只连接第一个复选框。但是，我不确定如何解析参数、如何获取图表以及如何将其重新插入 DOM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:04:38.980

如果您的控制器是 RESTful 的，那么 web_pages#administratorswgraph 可以使用单独的视图（例如 administratorswgraph.html.erb 和 administratorswgraph.js.erb）响应 html 和 ajax。

将所有负责替换整个图表的逻辑放在 administratorswgraph.js.erb 中...我认为足以将 <%= render_chart(@swChart, 'swChart') %> 放在那里，但我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:55:33.657

在搞砸了很多之后，我能够想出一个令人满意的解决方案。我在视图中使用了以下 JavaScript

```
<script type="text/javascript" charset="utf-8" id ="myScript">
  <% @row_headers.each do |row_header| %>
    $('#<%= row_header.gsub(" ", "-") %>').bind('ajax:success', function(event, data, status, xhr) {
      var scripts = $(data).filter('script')
      var chartScript;
      scripts.each(function(index, Element){
        if (Element.text.indexOf("swChart") != -1 && Element.id != "myScript") {
          chartScript = Element.text;
        }
      });
      jQuery.globalEval(chartScript)
    });
  <% end %>
</script> 
```

这使我能够在 ajax 请求返回后提取需要运行的 JavaScript，并且我能够运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:20:06.030

假设您使用的是 jQuery 和 jQuery-UJS，您可以连接到 AJAX-Callbacks 并将您的 dom 中的图表替换为来自服务器的响应：[https ://github.com/rails/jquery-ujs/维基/阿贾克斯](https://github.com/rails/jquery-ujs/wiki/ajax)

不幸的是，在guides.rubyonrails.org上没有很好的例子......

# android - RSS 提要应用程序如何将项目标记为已读？安卓

> ID：13050888
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:02:46.297
> 
> 标签：android, xml

我有一个读取在线 xml 文件的应用程序，现在我想实现这样的功能，即**当用户单击项目（读取项目）时，它将标记为 read**。我的问题是**当我再次从该 xml 文件请求新内容时如何保持旧项目的读取状态**？当我从 xml 文件中删除该项目时，它也会在用户重新加载内容时删除手机上的此类项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:11:03.430

有两种实现方式：

*   保留将存储读取状态的本地数据库（具有相应的[Content Provider ）。](http://developer.android.com/guide/topics/providers/content-providers.html)例如，您可以有两个字段“在线 xml 中的记录 ID”-“读取状态”的表。使用这种方式，“已读”状态将被存储在本地，而在另一个客户端用户将看到未标记为已读的项目；
*   发送服务器确认该项目已被读取，因此下一个请求它不会出现在 xml 文件中（或者 xml 文件会将其提供为“已读取”）。这种方式取决于服务器实现，但更方便，因为“读取”状态可能会沿许多客户端传播；

# ios - 我应该为 nib 中的对象制作 IBOutlets 吗？

> ID：13050891
> 
> 赞同：0
> 
> 时间：2012-10-24T14:03:13.203
> 
> 标签：ios

有人知道，如果没有 IBOutlets，笔尖控件如何被释放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:10:28.970

nib 中不在顶层的任何东西（例如视图内的按钮）并且没有出口，当超级视图被释放时，将被释放。

在 ARC 项目中，outlet 无论如何都应该是弱的，所以当 superview 被释放时它们将恢复为零。

您不需要仅出于解除分配目的的网点。

# sql-server - 显示平均分最高的学生列表

> ID：13050895
> 
> 赞同：0
> 
> 时间：2012-10-24T14:03:23.020
> 
> 标签：sql-server

1）有两个表是由下面的脚本创建的；您的任务是编写 SQL 查询，该查询显示平均得分最高的学生列表。请提供两个具有以下限制的解决方案 a) 既不能使用子查询、游标也不能使用附加表 b) 既不能使用子查询、游标、附加表也不能使用 GROUP BY 子句

```
create table Students
(ID int identity(1,1) primary key not null,
 StudentName varchar(200) not null,
 );

create table StudentMarks
(ID int identity (1,1) primary key not null,
 Student_ID int not null references Students (ID),
 Mark int not null check (mark between 1 and 5));

 insert into Students 
 (StudentName)
 values 
 ('Ivanov'),
 ('Petrov'),
 ('Sydorov'),
 ('Semenov');

 insert into StudentMarks
 (Student_ID,Mark)
 values
 (1,3), (1,4), (1,3), (1,5),
 (2,3), (2,4), (2,3), (2,5),
 (3,3), (3,3), (3,5), (3,3) 
```

这是我到目前为止所尝试的：

```
select Student_ID 
from StudentMarks 
where MAX(AVG(Mark))=AVG(Mark) 
GROUP BY Student_ID 
```

# c - C：解释背后的理论

> ID：13050896
> 
> 赞同：1
> 
> 时间：2012-10-24T14:03:24.337
> 
> 标签：c, r, theory

我对 C 的经验很少，但被要求将 C 程序转换为 R。有一点让我感到不安：

我有一个需要 int 的函数

```
int a 
```

在函数中我有一个数组：

```
double b[3] = {

       1.8293,
       -0.592,
       2.3330,
} 
```

后来在我的功能中：

```
c = b[a]; 
```

有人能告诉我这条线在做什么吗？分配给 c 的是什么？它只是一个大小为 b 的数组，其中 b 的所有值都乘以 a 吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:05:38.893

`c`分配有数组的`a` *第 th*值`b[]`。

如果`a`等于 1 那么`c`将等于`-0.592`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:05:58.400

如果 a 包含 0 则`c = b[a]`表示将数组 b[] 的第一个元素分配给 a，而不更改数组 b

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T14:07:16.287

这里的变量 a 是数组的索引。例如，如果 a=0，则 b[a] 是第一个元素（在本例中为 1.8293）。

通常 b[a] 从数组中提取特定元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T14:28:12.333

因此，这是您描述的功能的模型（我编造了您未提及的部分），我添加了评论`//`以解释发生了什么：

```
void foo(int a)
{
    // define an array of 3 doubles
    //b[0] = 1.8293
    //b[1] = -0.592
    //b[2] = 2.333

    double b[3] = { 1.8293, -0.592, 2.3330 };

    double c;     // Note c is a double, because we're going to assign 
                  // one of the values from b

    //we're going to use a to access array b, that means a has to be 0, 1, or 2
    if(a < 3)
       c = b[a]; 

    //Now c is set to one of those three values in b 
    //(depending on what value a has)

    return;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T14:05:38.347

将`double`数组的第 a 个元素`b`分配给`c`（第一个元素的索引为 0）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T14:06:39.343

您需要在 C 学习中迈出一步。

b[a] 表示您将从 b 数组中获取索引为 a 的元素的内容

# c - 如何在C中打印非ASCII字符

> ID：13050899
> 
> 赞同：2
> 
> 时间：2012-10-24T14:03:33.513
> 
> 标签：c, non-ascii-characters

我尝试用 C 输出字符列表： [http ://www.alt-codes.net/](http://www.alt-codes.net/)

```
for (i=0; i<len; i++){
    printf("%d\t: %c", i, i);
} 
```

我得到的所有非 ASCII 字符的问题？在 Ubuntu 上工作。

我怎样才能以很好的方式输出它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:12:45.910

The formatting will be poor, but apart from that the code you posted works.

ASCII characters 0-31 are various space characters and there is no standardized way to print them. The link you posted is a common, yet non-standard "extended ASCII table". There is no guarantee that those exact symbols will be printed on your particular platform.

They work fine for me in Windows 7, tested with GCC and Embarcadero C++, both print those symbols. But on another OS and/or compiler, different symbols or nothing at all might be printed.

Only ASCII characters 32 - 126 are guaranteed to be printable, and the same symbol, on all systems.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:08:44.090

各种 ASCII 字符，例如许多低于 32 的字符，是不可打印的。在打印之前，您需要将不可打印的内容翻译成其他内容（例如空格）。

请注意，您链接到的 ALT 代码不是 ASCII 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:11:38.270

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:53:40.653

Depending on your needs, you can take the approach of an hexadecimal editor and print only those characters that have a graphical representation, for that purpose you can use `isprint()` or `isgraph()` (the latest is essentially the same as `isprint()` but don't print the space) defined in ctype.h, for example:

```
for (i = 0; i < len; i++) {
    printf("%d\t: %c", i, isprint(i) ? i : '.');
} 
```

# jquery - 如何更新 ipad 中的视频 src

> ID：13050903
> 
> 赞同：2
> 
> 时间：2012-10-24T14:03:41.673
> 
> 标签：jquery, iphone, ipad, video

在我的网页中，我有视频，它有不同的 3 个来源。我需要在加载页面时更改视频 src。为此我正在使用此功能，但我无法在 ipad 中获取更新，但 firefox 工作正常。

jQuery：

```
$('#task2ResultVideo source').each(function (n,s) {
       $('#task2ResultVideo').get(0).pause();
       $(this).attr('src',$(this).attr('src').replace('Task_2.4a_Host_treated', task2RslVideo));
       $(this).parents('video').get(0).load();
    } ) 
```

HTML：

```
<video id="task2ResultVideo" autobuffer poster="img/task2-results-host-poster.jpg">
                        <source src="Video/webm/Task_2.4a_Host_treated.webm" type="video/webm" />
                        <source src="Video/ogv/Task_2.4a_Host_treated.theora.ogv" type="video/ogg" />
                        <source src="Video/MP4/Task_2.4a_Host_treated.mp4" type="video/mp4" />
                    </video> 
```

我很困惑，有人帮助我吗？

我试过这个，src更新，但视频没有加载，旧视频播放.. Jquery：

```
 $('#task2ResultVideo source').each(function (n,s) {
       $('#task2ResultVideo')[0].pause();
       $(this).attr('src',$(this).attr('src').replace('Task_2.4a_Host_treated', task2RslVideo));
       setTimeout(function(){
        $('#task2ResultVideo').load();
        },1000)
       alert($(this).attr('src').replace('Task_2.4a_Host_treated', task2RslVideo));
    } ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:25:21.150

基于 Apple Developer 网站上的“按顺序替换媒体”：http: [//developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/ControllingMediaWithJavaScript/ControllingMediaWithJavaScript.html#//apple_ref/doc/uid/ TP40009523-CH3-SW1](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/ControllingMediaWithJavaScript/ControllingMediaWithJavaScript.html#//apple_ref/doc/uid/TP40009523-CH3-SW1)

在该文档中，Safari 似乎在视频标签本身上寻找 src，而不是在其`<source/>`下方的标签中。

怎么样，作为一个简单的测试，试试这个看看它是否有效：

```
// obviously, wrap this in a function... this is simply for testing,
// as you'll want to refine this for use by other browsers as well,
// if this works
var $vid = $("#task2ResultVideo");
var src = "Video/MP4/" + task2RslVideo + ".mp4";
$vid.attr("src", src);
$vid.get(0).load();
$vid.get(0).play(); 
```

很想知道你得到了什么结果，因为这似乎是一个相当普遍的问题（我在 Google 搜索中也看到了很多与此相关的问题）。

更新了...当然会失败，因为没有设置，呃...我的错。但是，实际上，您的替换也很脆弱，因为它第一次会起作用（因为它知道“Task_2.4a_Host_treatment”存在），但在那之后，它就不再匹配了。在这种情况下，您应该从您知道的组件构建您的 src 字符串，而不是使用替换。

# c++ - OpenCV：加速 EM 算法预测

> ID：13050904
> 
> 赞同：3
> 
> 时间：2012-10-24T14:03:44.090
> 
> 标签：c++, image, opencv, gaussian, image-segmentation

我正在使用`cv::EM`算法对图像流进行高斯混合模型分类。但是，在使用`EM::prediction`方法将像素分类到不同的模型时，我发现它太慢了，一张 600x800 图像大约需要 3 秒。另一方面，`MOG background subtractor`OpenCV 提供的执行这部分的速度非常快，只用了大约 30 毫秒。所以我决定使用它的 perform 方法来替换`EM::prediction`部分。但是，我不知道如何更改它。

我使用的代码`prediction`如下：

```
cv::Mat floatSource;
source.convertTo ( floatSource, CV_32F );
cv::Mat samples ( source.rows * source.cols, 3, CV_32FC1 );

int idx = 0; 

for ( int y = 0; y < source.rows; y ++ )
{
    cv::Vec3f* row = floatSource.ptr <cv::Vec3f> (y);
    for ( int x = 0; x < source.cols; x ++ )
    {
        samples.at<cv::Vec3f> ( idx++, 0 ) = row[x];
    }
}

cv::EMParams params(2);  // num of mixture we use is 2 here
cv::ExpectationMaximization em ( samples, cv::Mat(), params );
cv::Mat means = em.getMeans();
cv::Mat weight = em.getWeights();

const int fgId = weights.at<float>(0) > weights.at<flaot>(1) ? 0:1;
idx = 0; 

for ( int y = 0; y < source.rows; y ++ )
{
    for ( int x = 0; x < source.cols; x ++ )
    {
        const int result = cvRound ( em.predict ( samples.row ( idx++ ), NULL );
    }
} 
```

我从“cvbgfg_gaussmix.cpp”中找到的部分代码`EM prediction`是这样的：

```
static void process8uC3 ( BackgroundSubtractorMOG& obj, const Mat& image, Mat& fgmask, double learningRate )
{
    int x, y, k, k1, rows = image.rows, cols = image.cols;
    float alpha = (float)learningRate, T = (float)obj.backgroundRatio, vT = (float)obj.varThreshold;
    int K = obj.nmixtures;

    const float w0 = (float)CV_BGFG_MOG_WEIGHT_INIT;
    const float sk0 = (float)(CV_BGFG_MOG_WEIGHT_INIT/CV_BGFG_MOG_SIGMA_INIT);
    const float var0 = (float) (CV_BGFG_MOG_SIGMA_INIT*CV_BGFG_MOG_SIGMA_INIT);

    for ( y = 0; y < rows; y ++ )
    {
        const uchar* src = image.ptr<uchar>(y);
        uchar* dst = fgmask.ptr<uchar>(y);
        MixData<Vec3f>* mptr = (MixData<Vec3f>*)obj.bgmodel.ptr(y);

        for ( x = 0; x < cols; x++, mptr += K )
        {

            float wsum = 0, dw = 0; 
            Vec3f pix ( src [x*3], src[x*3+1], src[x*3+2]);
            for ( k = 0; k < K; k ++ )
            {
                float w = mptr[k].weight;
                Vec3f mu = mptr[k].mean[0];
                Vec3f var = mptr[k].var[0];
                Vec3f diff = pix - mu; 
                float d2 = diff.dot(diff);

                if ( d2 < vT * (var[0] +var[1] + var[2] )
                {
                    dw = alpha * ( 1.f - w );
                    mptr[k].weight = w + dw;
                    mptr[k].mean = mu + alpha * diff;
                    var = Vec3f ( max ( var[0] + alpha * ( diff[0] * diff[1] - var[0] ), FLT_EPSILON),
                        max ( var[1] + alpha * ( diff[1]*diff[1] - var[1] ), FLT_EPSILON,
                        max ( var[2] + alpha * ( diff[2]*diff[2] - var[2] ), FLT_EPSILON ));

                    mptr[k].var = var;
                    mptr[k].sortKey = w/sqrt ( var[0] + var[1] + var[2] );

                    for ( k1 = k-1; k1 >= 0; k1-- )
                    {
                        if ( mptr[k1].sortKey > mptr[k1+1].sortKey)
                            break;
                        std::swap ( mptr[k1],mptr[k1+1]);
                    }
                    break;
                }

                wsum += w;
            }

            dst[x] = (uchar) (-(wsum >= T ));
            wsum += dw;

            if ( k == K )
            {
                wsum += w0 - mptr[K-1].weight;
                mptr[k-1].weight = w0;
                mptr[K-1].mean = pix;
                mptr[K-1].var = Vec3f ( var0, var0, var0 );
                mptr[K-1].sortKey = sk0;
            }
            else
                for ( ; k < K; k ++ )
                    wsum += mptr[k].weight;

            dw = 1.f/wsum;

            for ( k = 0; k < K; k ++ )
            {
                mptr[k].weight *= dw;
                mptr[k].sortKey *= dw;
            }
    }
}
} 
```

如何更改此部分代码，以便它可以在我的第一个代码中使用`em.predict`？先感谢您。

**更新**

我自己这样做是为了`process8uC3`在我的代码中使用该函数：

```
cv::Mat fgImg ( 600, 800, CV_8UC3 );
cv::Mat bgImg ( 600, 800, CV_8UC3 );

double learningRate = 0.001;
int x, y, k, k1;
int rows = sourceMat.rows;  //source opencv matrix
int cols = sourceMat.cols;  //source opencv matrix
float alpha = (float) learningRate;
float T = 2.0;
float vT = 0.30;
int K = 3;

const float w0 = (float) CV_BGFG_MOG_WEIGTH_INIT;
const float sk0 = (float) (CV_BGFG_MOG_WEIGHT_INIT/CV_BGFG_MOG_SIGMA_INIT);
const float var0 = (float) (CV_BGFG_MOG_SIGMA_INIT*CV_BGFG_MOG_SIGMA_INIT);
const float minVar = FLT_EPSILON;

for ( y = 0; y < rows; y ++ )
{
    const char* src = source.ptr < uchar > ( y );
    uchar* dst = fgImg.ptr < uchar > ( y );
    uchar* tmp = bgImg.ptr ( y ); 
    MixData<cv::Vec3f>* mptr = (MixData<cv::Vec3f>*)tmp;

    for ( x = 0; x < cols; x ++, mptr += K )
    {
         float w = mptr[k].weight;
         cv::Vec3f mu = mpptr[k].mean[0];
         cv::Vec3f var = mptr[k].var[0];
         cv::Vec3f diff = pix - mu;
         float d2 = diff.dot ( diff );

         if ( d2 < vT * ( var[0] + var[1] + var[2] ) )
         {
             dw = alpha * ( 1.f - w );
             mptr[k].weight = w + dw;
             mptr[k].mean = mu + alpha * diff;
             var = cv::Vec3f ( max ( var[0] + alpha*(diff[0]*diff[0]-var[0]),minVar),
                     max ( var[1]+ alpha*(diff[1]*diff[1]-var[1]),minVar),
                     max ( var[2] + alpha*(diff[2]*diff[2]-var[2]),minVar) );

             mptr[k].var = var;
             mptr[k].sortKey = w/sqrt ( var[0] + var[1] + var[2] );

             for ( k1 = k-1; k1 >= 0; k1 -- )
             {
                 if ( mptr[k1].sortKey > mptr[k1+1].sortKey )
                     break;
                     std::swap ( mptr[k1], mptr[k1+1] );
             }
             break;
         }
         wsum += w;
     }
     dst[x] = (uchar) (-(wsum >= T ));
     wsum += dw;

     if ( k == K )
     {
          wsum += w0 - mptr[k-1].weight;
          mptr[k-1].weight = w0;
          mptr[k-1].mean = pix; 
          mptr[k-1].var = cv::Vec3f ( var0, var0, var0 );
          mptr[k-1].sortKey = sk0;
      }
      else 
          for ( ; k < K; k ++ )
          {
              mptr[k].weight *= dw;
              mptr[k].sortKey *= dw;
          }
      }
  }
} 
```

它编译没有错误，但结果完全是一个质量。我怀疑这可能与值`T`和相关`vT`，并用其他几个值更改了它们，但这没有任何区别。所以我相信即使它编译没有错误，我也以错误的方式使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:41:29.363

不是直接回答您的问题，而是对您的代码的一些评论：

```
int idx = 0; 

for ( int y = 0; y < source.rows; y ++ )
{
    cv::Vec3f* row = floatSource.ptr <cv::Vec3f> (y);
    for ( int x = 0; x < source.cols; x ++ )
    {
        samples.at<cv::Vec3f> ( idx++, 0 ) = row[x];
    }
} 
```

我的猜测是，您想在这里创建一个具有逐列行和 3 列的矩阵，存储像素 RGB（或您可能使用的任何其他颜色空间）值。首先，您的样本矩阵被错误地初始化，因为您忘记了图像通道上的循环。您的代码中只填写了第一个通道。但无论如何，你可以通过调用来做同样的事情[`reshape`](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=reshape#Mat%20Mat%3a%3areshape%28int%20cn,%20int%20rows%29%20const)：

```
cv::Mat samples = floatSource.reshape(1, source.rows*source.cols) 
```

这不仅可以修复您的错误，还可以加快您的进程，因为使用 Mat.at<> 访问像素确实不是那么快，并且 reshape 是 O(1) 操作，因为基础矩阵数据没有改变，只是行数/列数/通道数。

其次，您可以通过将完整的样本矩阵传递给 em::predict 而不是每个样本来节省一些时间。目前，您可以对 em::predict 进行逐行调用，而您只能执行一次，然后对 mat.row() 进行逐行调用，这会创建一个临时矩阵（标题）。

进一步加快这一速度的一种方法是并行化预测调用，例如使用 OpenCV 使用的 TBB（在编译 OpenCV 时是否打开了 TBB？也许 predict 已经是多线程的，没有检查）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:41:49.683

查看 OpenCV 中 GrabCut 的源代码：*modules/imgproc/src/grabcut.cpp*。本模块有私有类*GMM*（实现训练高斯混合模型和样本分类）。为了初始化 GMM，使用了 k-means。如果您需要更快的初始化，您可以尝试[k-means++](http://en.wikipedia.org/wiki/K-means++)算法（参考*modules/core/src/matrix.cpp模块中的**generateCentersPP*函数）。

# sql - 试图构造一个 SQL 查询麻烦

> ID：13050905
> 
> 赞同：3
> 
> 时间：2012-10-24T14:03:50.703
> 
> 标签：sql, sql-server

大家好，我在使用 SQL 查询创建所需的输出时遇到了麻烦。我对此很陌生，我正在尝试练习。SQL 查询首先为手球比赛构建表。

**我如何通过 SQL 查询获得此输出：**

```
Winner       | GoalsFor | GoalsAgainst | Loser       | GroupID | Venue
---------------------------------------------------------------------------
Austria      | 22       | 22           | South Korea | A       | South Korea
Cuba         | 22       | 22           | Norway      | B       | Norway
Cuba         | 22       | 22           | Norway      | D       | Norway
France       | 19       | 17           | Austria     | A       | Austria
France       | 19       | 17           | Cuba        | D       | Cuba
Iceland      | 23       | 19           | South Korea | A       | Iceland
Iceland      | 30       | 28           | Austria     | A       | Iceland
Iceland      | 37       | 18           | France      | A       | France
Norway       | 23       | 19           | France      | D       | Norway
Russia       | 23       | 19           | Norway      | D       | Russia
Russia       | 30       | 28           | Cuba        | D       | Russia
Russia       | 37       | 18           | France      | D       | France
South Korea  | 23       | 19           | France      | A       | South Korea 
```

**使用此代码：**

```
 create table Teams (
    teamid int primary key,
    country varchar(30) unique not null,
    continent varchar(20) not null,
    strength int not null
)
go

create table Groups (
    groupid char(1) primary key,
    numteams int
)
go

create table GroupsTeams (
    groupid char(1) foreign key references Groups,
    teamid int foreign key references Teams,
    primary key (groupid, teamid)
)
go

create table Games (
   gameid int primary key identity,
   hometeam int not null foreign key references Teams,
   awayteam int not null foreign key references Teams,
   groupid char(1) not null foreign key references Groups,
   homescore int,
   awayscore int,
   unique (hometeam, awayteam, groupid)
)
go

insert into Teams values (1, 'Iceland', 'Europe', 1)
go
insert into Teams values (2, 'South Korea', 'Asia', 2)
go
insert into Teams values (3, 'Austria', 'Europe', 3)
go
insert into Teams values (4, 'France', 'Europe', 4)
go
insert into Teams values (5, 'U.S.', 'America', 5)
go
insert into Teams values (6, 'Norway', 'Europe', 6)
go
insert into Teams values (7, 'Cuba', 'America', 7)
go
insert into Teams values (8, 'Russia', 'Europe', 8)
go 
insert into Teams values (9, 'Egypt', 'Africa', 9)
go

insert into Groups values ('A', 4)
go
insert into Groups values ('B', 4)
go
insert into Groups values ('C', 2)
go
insert into Groups values ('D', 2)
go

insert into GroupsTeams values ('A', 1)
go
insert into GroupsTeams values ('A', 2)
go
insert into GroupsTeams values ('A', 3)
go
insert into GroupsTeams values ('A', 4)
go
insert into GroupsTeams values ('B', 5)
go
insert into GroupsTeams values ('B', 6)
go
insert into GroupsTeams values ('B', 7)
go
insert into GroupsTeams values ('B', 8)
go
insert into GroupsTeams values ('C', 1)
go
insert into GroupsTeams values ('C', 3)
go
insert into GroupsTeams values ('D', 2)
go
insert into GroupsTeams values ('D', 4)
go

insert into Games values (1, 2, 'A', 23, 19)
go
insert into Games values (3, 4, 'A', 17, 19)
go
insert into Games values (1, 3, 'A', 30, 28)
go
insert into Games values (2, 4, 'A', 23, 19)
go
insert into Games values (4, 1, 'A', 18, 37)
go
insert into Games values (2, 3, 'A', 22, 22)
go
insert into Games values (8, 6, 'D', 23, 19)
go
insert into Games values (7, 4, 'D', 17, 19)
go
insert into Games values (8, 7, 'D', 30, 28)
go
insert into Games values (6, 4, 'D', 23, 19)
go
insert into Games values (4, 8, 'D', 18, 37)
go
insert into Games values (6, 7, 'D', 22, 22)
go
insert into Games values (6, 7, 'B', 22, 22)
go 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:19:13.467

你可以使用这样的东西，如果分数相同，我会包含一个值：

```
select 
  case when g.homescore > g.awayscore
      then ht.country
      when g.awayscore > g.homescore
      then at.country 
      else 'tie' end as winner,
  case when g.homescore > g.awayscore
      then g.homescore
      else  g.awayscore end as GoalsFor,
  case when g.homescore > g.awayscore
      then g.awayscore
      else  g.homescore end as GoalsAgainst,
  case when g.homescore > g.awayscore
      then at.country
      else  ht.country end as Loser,
  g.groupid,
  ht.country Venue
from games g
left join teams ht
  on g.hometeam = ht.teamid
left join teams at
  on g.awayteam = at.teamid
left join groups gp
  on g.groupid = gp.groupid
order by ht.country 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/18551/16)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:20:51.077

[http://sqlfiddle.com/#!3/4f5cf/8](http://sqlfiddle.com/#!3/4f5cf/8)

```
select
    case
        when G.homescore > G.awayscore then T.country
        else T2.country
    end as Winner,
    case
        when G.homescore > G.awayscore then G.homescore
        else G.awayscore
    end as GoalsFor,
    case
        when G.homescore > G.awayscore then G.awayscore
        else G.homescore
    end as GoalsAgainst,
    case
        when G.homescore > G.awayscore then T2.country
        else T.country
    end as Loser,
    G.groupid as GroupID,
    T.country as Venue
from Teams as T
    inner join Games as G on G.hometeam = T.teamid
    inner join Teams as T2 on T2.teamid = G.awayteam
order by 1 asc 
```

# nginx - Nginx CDN - 重定向以防止重复内容

> ID：13050909
> 
> 赞同：1
> 
> 时间：2012-10-24T14:04:07.103
> 
> 标签：nginx, cdn

设想：

```
Main website: example.com
Static media served from CDN: xxxxx.cloudfront.net (CNAME: cdn.example.com) 
```

为了阻止 Google 和其他索引机器人索引 CDN URL（xxxxx.cloudfront.net 和 cdn.example.com）及其内容，有人建议我采取以下步骤：

1）创建一个 .htaccess 重写规则：

```
RewriteEngine On
RewriteCond %{HTTP:VIA} ^.*\.CloudFront\..*$
RewriteRule ^robots\.txt$ robots_cloudfront.txt [L] 
```

2) 使用以下命令创建 robots_cloudfront.txt：

```
User-agent: *
Disallow: / 
```

我的问题是：

1）这会按预期工作吗？

2) 上述 .htaccess 规则在 Nginx 上的翻译效果如何？不确定以下是否正确：

```
location / {
if ($http_via ~* "CloudFront") {
rewrite ^/robots\.txt$ /robots_cloudfront.txt break;
}
} 
```

谢谢！

# c# - 将字符串解析为 int 数组

> ID：13050910
> 
> 赞同：2
> 
> 时间：2012-10-24T14:04:08.377
> 
> 标签：c#, arrays, winforms, parsing

嗨，我正在努力增加我对 C# 的了解，我想做一个简单的任务，但发现它很困难。

我想将字符串的每个字符解析为一个 int 数组。

```
 int[] d = new int[10];
     private void button1_Click(object sender, EventArgs e)
    {
        s = textBox1.Text;

        d[2] = Convert.ToInt32(Convert.ToString(s[1]));
        d[3] = Convert.ToInt32(Convert.ToString(s[2]));
        d[4] = Convert.ToInt32(Convert.ToString(s[3]));
        d[5] = Convert.ToInt32(Convert.ToString(s[4]));
        ..... 
```

我知道代码是错误的，但我想展示一个例子。在过去的一个小时里查看了 Google，但发现人们想要在新行中显示字符并使用 if 语句进行解析。我想要类似于上面的东西。这可以做到吗？感谢您的时间。

我在 Java 中找到了这行代码，这正是我想要做的，但有没有等价的？

```
 d1 = Integer.parseInt(String.valueOf(s.charAt(0))); 
```

我现在有一个新问题，当我提交一个数字时，无论我输入多少个数字，它都会返回“索引超出数组范围”。

我还需要将它限制为数组 d 中的 10 个整数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:06:09.437

错误的括号，访问字符串中的字符。

```
d[2] = Convert.ToInt32(Convert.ToString(s(1)));
                                         ^ 
```

利用，

```
d[2] = Convert.ToInt32(Convert.ToString(s[1])); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:06:15.977

```
 var intArr =  "12345678".Select(c => (int)(c-'0')).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:07:03.183

尝试这个：-

```
var intArrayOfText = someTextBox.Text.ToCharArray().Select(x => (int)(x-'0')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-18T08:44:41.833

可以这样做，如果字符串如下所示

```
 string temps = "-5 8 4 0 1 17 25 -5 -3";
        int[] integerArray = temps.Split(' ').Select(x => int.Parse(x)).ToArray();
        Array.Sort(integerArray);
        foreach (var item in integerArray)
        {
            Console.WriteLine(item);
        } 
```

# c# - 如何阻止 VC# 将控制台输出重定向到输出窗口？

> ID：13050915
> 
> 赞同：2
> 
> 时间：2012-10-24T14:04:52.093
> 
> 标签：c#, visual-studio, stdout

我有一个 GUI C# 应用程序，它使用使用`AllocConsole`. 它在正常情况下工作，但是当应用程序在 Visual Studio 下以调试模式启动时，所有输出都会在 Visual Studio 输出窗口中结束。我该如何阻止它？

我正在使用 C# 3.5 和 Visual Studio Pro 2010。进程托管选项已关闭。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T10:40:29.107

我的解决方案是自己将标准流重置为新创建的控制台。这是代码：

```
public static class ConsoleHelper
{
    /// <summary>
    /// Allocates a console and resets the standard stream handles.
    /// </summary>
    public static void Alloc()
    {
        if (!AllocConsole())
            throw new Win32Exception();
        SetStdHandle(StdHandle.Output, GetConsoleStandardOutput());
        SetStdHandle(StdHandle.Input,  GetConsoleStandardInput());
    }

    private static IntPtr GetConsoleStandardInput()
    {
        var handle = CreateFile
            ( "CONIN$"
            , DesiredAccess.GenericRead | DesiredAccess.GenericWrite
            , FileShare.ReadWrite
            , IntPtr.Zero
            , FileMode.Open
            , FileAttributes.Normal
            , IntPtr.Zero
            );
        if (handle == InvalidHandleValue)
            throw new Win32Exception();
        return handle;
    }

    private static IntPtr GetConsoleStandardOutput()
    {
        var handle = CreateFile
            ( "CONOUT$"
            , DesiredAccess.GenericWrite | DesiredAccess.GenericWrite
            , FileShare.ReadWrite
            , IntPtr.Zero
            , FileMode.Open
            , FileAttributes.Normal
            , IntPtr.Zero
            );
        if (handle == InvalidHandleValue)
            throw new Win32Exception();
        return handle;
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool AllocConsole();

    [DllImport("kernel32.dll")]
    private static extern bool SetStdHandle(StdHandle nStdHandle, IntPtr hHandle);

    [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    private static extern IntPtr CreateFile
        (                               string         lpFileName
        , [MarshalAs(UnmanagedType.U4)] DesiredAccess  dwDesiredAccess
        , [MarshalAs(UnmanagedType.U4)] FileShare      dwShareMode
        ,                               IntPtr         lpSecurityAttributes
        , [MarshalAs(UnmanagedType.U4)] FileMode       dwCreationDisposition
        , [MarshalAs(UnmanagedType.U4)] FileAttributes dwFlagsAndAttributes
        ,                               IntPtr         hTemplateFile
        );

    [Flags]
    enum DesiredAccess : uint
    {
        GenericRead    = 0x80000000,
        GenericWrite   = 0x40000000,
        GenericExecute = 0x20000000,
        GenericAll     = 0x10000000
    }

    private enum StdHandle : int
    {
        Input  = -10,
        Output = -11,
        Error  = -12
    }

    private static readonly IntPtr InvalidHandleValue = new IntPtr(-1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:09:18.507

您可以通过以不同方式启动应用程序来重定向输出，如下所示^(（参考 1）)：

```
//
// Setup the process with the ProcessStartInfo class.
//
ProcessStartInfo start = new ProcessStartInfo();
start.FileName = @"C:\MyExe.exe"; // Specify exe name.
start.UseShellExecute = false;
start.RedirectStandardOutput = true; 
```

您还可以通过以下^(（参考 1）使用输出（如果需要）)：

```
//
// Start the process.
//
using (Process process = Process.Start(start))
{
    //
    // Read in all the text from the process with the StreamReader.
    //
    using (StreamReader reader = process.StandardOutput)
    {
    string result = reader.ReadToEnd();
    Console.Write(result);
    }
} 
```

参考资料：（1）[http://www.dotnetperls.com/redirectstandardoutput](http://www.dotnetperls.com/redirectstandardoutput)

# database - 是否有可用于在本地创建数据库的 Eventrbrite Sql 脚本下载

> ID：13050916
> 
> 赞同：0
> 
> 时间：2012-10-24T14:05:00.877
> 
> 标签：database, eventbrite

我们希望将用户输入的 Eventbrite 事件保存到本地数据库中，并按计划上传到 Eventbrite 数据库。

我正在使用基本的 Eventbrite 表创建一个数据库，并想知道是否有人能指出我正确的方向？我正在尝试找到可以帮助为 Eventbrite 创建基表的脚本。

请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:26:15.293

[我会尝试根据 Eventbrite 的事件对象](http://developer.eventbrite.com/doc/events/)文档页面 上概述的架构构建您的 SQL ：http: [//developer.eventbrite.com/doc/events/](http://developer.eventbrite.com/doc/events/)

您可以通过单击此列表中的对象名称来浏览其他对象类型的架构信息：http: [//developer.eventbrite.com/doc/#methods](http://developer.eventbrite.com/doc/#methods)

# c++ - 按位读取缓冲区

> ID：13050927
> 
> 赞同：4
> 
> 时间：2012-10-24T14:05:45.837
> 
> 标签：c++, bit-manipulation

我有一个缓冲区，其中包含一些不同位大小的数据（8 位字段，然后是 4 位字段，然后是 9 位字段......）。

我需要阅读它。如果有一些库允许使用位级别的指针而不是字节级别的指针来读取它，那就太好了。

将缓冲区复制到结构不是一种选择，因为在研究之后我需要使用`#pragma pack()`或类似的东西，并且不能移植。

任何的想法？

编辑：我将尝试用一个例子来解释我的问题的严重性：

```
field1: 8 bits --> ok, get first byte
field2: 6 bits --> ok, second byte, and a mask
field3: 4 bits --> gets harder, i have to get 2 bytes, apply 2 different masks, and compose
field4 
... 
field 15: 9 bits ---> No idea of how to do it with a loop to avoid writing manually every single case 
```

我能想到的唯一解决方案是复制到结构，`pragma pack`然后继续。但我在之前的问题中被告知，由于可移植性，这不是一个好的解决方案。但如果它拯救我，我愿意听到不同的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:08:06.727

使用位操作：

```
unsigned char[64] byte_data;
size_t pos = 3; //any byte
int value = 0; 
int i = 0;
int bits_to_read = 9;
while (bits_to_read) {
    if (i > 8) {
      ++readPos;
      i = 0;
    }
    value |= byte_data[pos] & ( 255 >> (7-i) );
    ++i;
    --bits_to_read;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:09:02.150

C 中没有真正的按位方法（事实上，很难找到仍然支持这些方法的嵌入式平台）。

你最好的选择是使用按位运算`<< >> & and |`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:16:28.273

您可以使用位域定义结构：

```
struct Data
{
unsigned field1:8;
unsigned field2:6;
unsigned field3:4;
// etc
}; 
```

如果结构中所有位域的长度之和是 8 的倍数，则此技巧将起作用。

# r - 在 R 中，如何将新字段（或列名）附加到现有数组？

> ID：13050934
> 
> 赞同：0
> 
> 时间：2012-10-24T14:06:09.173
> 
> 标签：r

当我初始化新数组时，我是否需要用实际数值初始化该字段中的每个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:22:26.220

如何附加新字段将取决于您拥有的对象。选项如下。如果`length()`您尝试附加的变量不等于您希望附加到的对象的行数，那么您需要先填充新列/变量`NA`，然后将变量附加到新的正确元素中创建的对象。例如，与

```
df <- data.frame(var1 = 1:5, var2 = LETTERS[1:5]) 
```

我们想在`c(1,3,4)`中的第三个变量的第 1、2 和 5 行添加一个向量`df`，然后我们可以这样做：

```
df$var3 <- NA ## note the single NA is recycled to the correct length 
```

然后使用子集将新数据插入到正确的元素中

```
df$var3[c(1,2,5)] <- c(1,3,4) 
```

这使：

```
> df$var3[c(1,2,5)] <- c(1,3,4)
> df
  var1 var2 var3
1    1    A    1
2    2    B    3
3    3    C   NA
4    4    D   NA
5    5    E    4 
```

如果您希望附加的变量长度正确，则无需初始化任何内容。在这种情况下，使用下面描述的方法之一来实现您想要的，具体取决于您是否有数据框或矩阵。

## 假设一个数据框

如果你有一个数据框，那么有几种方法。例如，使用

```
df <- data.frame(var1 = 1:10, var2 = LETTERS[1:10]) 
```

我们能做的

```
> df$var3 <- letters[1:10]
> df
   var1 var2 var3
1     1    A    a
2     2    B    b
3     3    C    c
4     4    D    d
5     5    E    e
6     6    F    f
7     7    G    g
8     8    H    h
9     9    I    i
10   10    J    j 
```

我更喜欢`transform()`

```
df <- transform(df, var3 = letters[1:10]) 
```

或相关的`within()`

```
df <- within(df, var3 <- letters[1:10]) ## note diff syntax 
```

你也可以做

```
df[, "var3"] <- letters[1:10] 
```

或者

```
df[, 3] <- letters[1:10] 
```

但后者不会产生具有名称的变量，`"var3"`而是获得默认名称。

您还可以使用`cbind()`将列绑定到数据框（也适用于矩阵）。请注意，您必须将数据框作为第一个参数传递或`"data.frame"`直接调用该方法，否则您不会得到数据框：

```
df <- cbind(df, var3 = letters[1:10])
df2 <- cbind.data.frame(var3 = letters[1:10], df)
## note `df2` will have `var3` as the first column here 
```

## 假设一个矩阵

如果你有一个矩阵，那么选项基本上减少为使用`cbind()`. 使用

```
mat <- matrix(1:20, ncol = 2) 
```

你可以做

```
mat <- cbind(mat, 1:10) 
```

其他选项不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:22:14.240

当您尝试将空向量添加到现有矩阵/数据框时，该向量必须与数组中的其他行/列长度相同。我想最好的办法是添加一个 NA 或 NULL 值的向量，您可以在填写数据时替换它们。例如，使用包中的`iris`数据`datasets`：

```
iris.new <- data.frame(iris, add = rep(NA, nrow(iris)) 
```

然后使用基本的解析命令来填充数据。

```
iris.new[13, "add"] <- 100 
```

希望有帮助。

# ssas - 过滤维度值

> ID：13050937
> 
> 赞同：2
> 
> 时间：2012-10-24T14:06:19.970
> 
> 标签：ssas, mdx, dimensions, cube, powerpivot

我有一个主客户维度（我不维护）。我的事实表包括客户信息。当我编译多维数据集时，一切看起来都很好，通过浏览多维数据集，我看到我的事实行中只有具有度量值的客户。

我想做的事情应该很简单，但我被卡住了。我要做的就是过滤我的维度，使其**仅**显示有效客户。

例如，在 Excel 中，我可以选择客户名称和我的事实值，我会看到包含值的客户列表，但是当我单击客户列表的筛选选项时，我会看到所有客户，甚至无效。我只想看到有效的客户！

Customer 维度中有一个 IsValid 标志，我想用它来仅显示有效客户。

那么，如何过滤客户维度列表以仅显示 IsValid =true 的客户？MDX 查询？

任何帮助，将不胜感激。
谢谢，-亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T03:03:18.007

这是一个应该返回所需答案的 MDX 查询：

```
SELECT [Measures].[Measure 1] ON 0,
EXISTS(
[Customer].[Customer Name].[Customer Name].MEMBERS
, [Customer].[Is Valid].[True]
, "Measure Group") ON 1 
FROM [Cube] 
```

将 [Measures].[Measure 1] 替换为您要查看的值，将“Measure Group”替换为您要过滤的度量组的名称。

查询返回来自 [Measure 1] 的客户名称和关联值，其中 [Is Valid] 为 TRUE，在“Measure Group”中具有关联值。

Measure Group 参数是可选的，因此如果您省略最后一个参数，则无论这些客户是否具有相关度量，您都可以获得有效客户名称的列表。

Exists MDX 函数信息的链接：[http ://technet.microsoft.com/en-us/library/ms144936.aspx](http://technet.microsoft.com/en-us/library/ms144936.aspx)

您还可以使用 [...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:43:22.277

亚历克斯，

基于您的数据透视表将包含一个度量，客户表与您的事实表相关，您要过滤的度量称为 [Values]，然后：

```
[Valid Customer Values] = CALCULATE([Values],dimCustomer[IsValid]="Y") 
```

雅各布

# c# - 使用 WF 服务确保可靠性

> ID：13050938
> 
> 赞同：0
> 
> 时间：2012-10-24T14:06:22.657
> 
> 标签：c#, workflow, workflow-foundation-4

我是 WF 服务的新手，只是在探索它。

每当将项目添加到表中时，我都需要触发工作流。

我看到很多关于 WCF WF 服务的炒作，可以说我选择了那个选项。这将是流程

插入项目 -> 调用 WCF WF 服务

调用服务并不总是可靠的。如果连接中断或者有人在客户端配置中输入了错误的 url，该怎么办。

一般来说，使用 WCF WF 时的最佳做法是什么。我怎么能确定工作流确实被触发了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T09:49:30.613

Re: 有人在客户端配置中输入了错误的 url。这是一般部署/操作的事情。不管你选择什么。如果配置错误，它将无法正常工作。

回复：如果连接断开怎么办。这也是可能发生的事情，但架构可能需要满足更多的事情。一般来说，使用某种持久消息来启动工作流就可以了。简单且内置的 WCF 解决方案是使用事务、MSMQ 作为传输。这种服务方式是无法到达的，消息将被排队并稍后传输。另一种选择是将事件存储在数据库表中并发送。如果您可以成功发送消息，则从表中删除该消息。基本上，您正在手动执行 MSMQ 自动为您执行的操作，但有一些好处，例如能够进行请求/响应，并且不依赖于默认情况下未安装的 Windows 的一部分，

# c++ - 类声明错误

> ID：13050939
> 
> 赞同：0
> 
> 时间：2012-10-24T14:06:27.760
> 
> 标签：c++, class, pointers

我尝试在 C++ 中声明以下类；但是，我收到以下错误。指针有问题吗？

```
class classFather{
public:
    int BmcCommand;
    int BmcDataLength;
    byte BmcDataBuffer[];

    classFather() {
        BmcCommand = 0;
        BmcDataLength = 0;
        BmcDataBuffer = new byte[CMD_LENGTHH];
    }

    classFather(byte s8Command, int siLength, byte as8Data[]) {
        BmcCommand = s8Command;
        BmcDataLength = siLength;
        int size = sizeof( as8Data ) / sizeof( as8Data[0] );
        BmcDataBuffer = new byte[size];
        for(int ii=0; ii< size; ii++)
            BmcDataBuffer[ii] = as8Data[ii];
    }
private:
    static const short CMD_LENGTHH = 255;
}; 
```

我收到以下错误：

```
error: incompatible types in assignment of `byte*' to `byte[0u]'
C:\....\BluetoothClient\/msgCAN.h: In constructor `msgCANFather::msgCANFather(byte, int, byte*)': 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:08:31.623

您缺少`;`after`byte BmcDataBuffer[]`并且类声明看起来也错误：我猜`classFather{`应该是。`class Father {`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:08:38.577

> > ```
> > byte BmcDataBuffer[] 
> > ```

将其更改为

```
byte *BmcDataBuffer; 
```

哦，顺便说一句，这些行：

> > ```
> > classFather(byte s8Command, int siLength, byte as8Data[]) {
> >      int size = sizeof( as8Data ) / sizeof( as8Data[0] ); 
> > ```

也错了。您无法以这种方式确定传入数组的长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T14:08:41.563

通过写作`byte BmcDataBuffer[]`，你声明和数组。数组不是指针，因此您不能分配`new byte[CMD_LENGTHH]`给它。将您的声明更改为`byte *BmcDataBuffer`将解决您的编译错误。

`delete`通过这样做，当对象被破坏时，您需要记住新分配的数据，方法是执行类似的操作

```
~classFather() {
   delete BmcDataBuffer;
} 
```

否则，您将有内存泄漏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T14:12:05.277

此外，

```
int size = sizeof( as8Data ) / sizeof( as8Data[0] ); 
```

不符合您的期望。传递给函数的 C 样式数组的大小始终是未知的。

您应该有一个额外的参数用于`size`或使用`std::vector`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T14:12:44.060

正如其他人所说，您尝试将指针分配给数组。

最好以这种方式编写内存泄漏（我看到 a`new`但没有`delete`），使用 a `vector`：

```
std::vector<byte> BmcDataBuffer;

Father(byte s8Command, int siLength, byte as8Data[]) {
    ...        
    BmcDataBuffer.insert( BmcDataBuffer.begin(), asData, asData+size );
    ...
} 
```

笔记：

```
int size = sizeof( as8Data ) / sizeof( as8Data[0] ); 
```

将永远返回`sizeof( byte* ) / sizeof( byte* )`，即 1。

注意 2：您可以使用初始化列表`vector`一次性创建成员：

```
Father(byte s8Command, int siLength, byte as8Data[]) 
: BmcDataBuffer( asData, asData+size )
{
} 
```

构造函数将`vector`复制所有`asData`元素。

# collections - VB6 Dictionary 此键已与此集合的元素相关联

> ID：13050941
> 
> 赞同：1
> 
> 时间：2012-10-24T14:06:29.037
> 
> 标签：collections, dictionary, vb6, runtime-error

这可能听起来有点奇怪，但它是这样的：

我的表单遍历每个客户 (+-10 000) 并打开一个记录集以获取最后一次访问。由于它的优化很差，我决定做一个查询，我需要存储它以便于访问。

我决定使用字典，因为与数组不同，我将能够使用键字符串（客户编号）进行搜索并获取我的项目（字符串：客户的最后一次访问）。

```
Dim dict As Dictionary
Set dict = CreateObject("Scripting.Dictionary")

dict.RemoveAll
dict.CompareMode = TextCompare    ' BinaryCompare does not change anything
rsLastVisits.Open "SELECT CUST_NO, MAX(DATE) AS LAST FROM [...] GROUP BY CUST_NO", DBHandle, adOpenDynamic, adLockOptimistic
Do While Not rsLastVisits.EOF
   dict.Add rsLastVisits!CUST_NO, rsLastVisits!LAST
   rsLastVisits.MoveNext
Loop
rsLastVisits.Close 
```

我收到运行时错误“此键已与此集合的元素相关联”。

这是有趣的部分开始的地方，因为我的查询不返回重复项（我仔细检查了）。

调试时，这些是添加的值：

第一次迭代：“0000000.”、“2012/05/27”

第二次迭代：“00000001”、“2011/06/14” **错误**试图插入这一行。

在即时窗口中，如果我写

```
dict.add "00000001", "2011/06/14" 
```

它被添加没有任何问题。

如果我清除字典（dict.removeall），它会输入一项（不管是什么cust.no），下一项总是失败。如果我在即时窗口中手动输入（无变量），它就可以工作。

你们有什么想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:08:03.597

您的示例应该可以正常工作。我能想到的唯一问题是 if`CUST_NO`不是字符串。试试这个并检查它是否有所作为：

```
dict.Add CSTR(rsLastVisits!CUST_NO), CSTR(rsLastVisits!LAST) 
```

## **编辑：**

您可以发布数据库定义`CUST_NO`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:41:40.433

我找到了解决方法...

如果我改变

```
dict.Add rsLastVisits!CUST_NO, rsLastVisits!LAST 
```

到

```
dict.Add "" & rsLastVisits!CUST_NO, "" & rsLastVisits!LAST 
```

有用...

虽然这没有任何意义，因为我的变量已经是字符串..

我将把它留在这里作为“已回答”。如果你们中的任何一个对 Vb6 内部有更好的了解的人可以向我解释发生了什么，我将不胜感激。

谢谢

# objective-c - Flurry 缺少上下文

> ID：13050946
> 
> 赞同：0
> 
> 时间：2012-10-24T14:06:45.370
> 
> 标签：objective-c, ios, xcode, flurry

我确实按照 Flurry 的要求在我的代码中添加了以下内容

```
#import "Flurry.h"
- (void)applicationDidFinishLaunching:(UIApplication *)application
{
    [Flurry startSession:@"xxxxxxxxxx"];
} 
```

我确实将文件“Flurry.h”和“libFlurry.a”添加到我的项目中，但是在构建时出现错误“缺少方法声明的上下文”

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:36:08.100

我在我的项目中使用了 Flurry，它运行良好。我猜它的缺失`FlurryAdDelegate.h`和`FlurryAds.h`. 将它们添加并再次检查。

# python - 将实时数据从服务器（例如 Tornado）推送到客户端的 python web 框架是什么？

> ID：13050954
> 
> 赞同：2
> 
> 时间：2012-10-24T14:07:12.230
> 
> 标签：python, mongodb, web-applications, flask, tornado

我在使用 Flask 框架实现应用程序以将实时数据发送到客户端浏览器时遇到问题。它将使用 twitter Streaming API(tweepy) 将推文用户信息流式传输到客户端。推文信息也存储在 mongo DB 中，以供将来检索。

我认为这必须涉及长轮询/服务器端事件（SSE），Flask 似乎无法轻松处理。Juggernaut 不这样做，现在已弃用，取而代之的是 SSE。

如果我想向客户端发送实时数据，Tornado 是否更合适，或者是否有更合适的 Web 框架。

我对python相当陌生，这是我第一次尝试这样做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:14:22.103

Flask 可以处理长轮询或事件，主要的实现问题是 WSGI 服务器。这是 gevent 和 websockets 的示例：[https ://gist.github.com/1185629](https://gist.github.com/1185629)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:14:58.997

[您可以使用带有socket.io](http://socket.io/)的websocket并查看[这篇](https://stackoverflow.com/questions/4762086/socket-io-client-library-in-python)关于 python 客户端库的帖子。

# python - 浏览器和服务器之间的 SOCKS4 连接失败

> ID：13050956
> 
> 赞同：1
> 
> 时间：2012-10-24T14:07:15.430
> 
> 标签：python, sockets, firefox, socks

我目前正在使用 python SOCKS4 服务器。该服务器运行良好，尽管通过[socat](http://www.dest-unreach.org/socat/)连接到服务器运行良好。甚至其他工具也可以很好地使用它。因此，wireshark 会按预期显示流量。

但是，使用 Firefox 连接到服务器失败。socks 服务器（在端口 8080 上列出）建立与预期的远程网站（此处为 slashdot.org）和客户端（此处为 firefox 浏览器）的连接，尽管浏览器立即发送其 FIN/ACK。为了说明，请参见蓝线：

![在此处输入图像描述](../Images/d4cbc41b14da75a553506abb327bc6ce.png)

我不确定，缺少的部分是什么。浏览器有特殊的 SOCKS4 实现还是什么？

**[更新]**澄清我的意思。考虑以下代码来检查套接字：

```
 ...
  r, w, e = select.select([remote,client],[],[])   

  for s in r: 
      try: 
          data = s.recv(1024) 
          logger.debug("len(data)=%d" % len(data))
          ... 
```

`len(data)==0`一旦浏览器发送它的 FIN/ACK，这实际上意味着套接字被关闭，对吗？这让我很困惑，因为我不知道浏览器为什么会退出连接。有任何想法吗？

# ruby - 方法名格式

> ID：13050959
> 
> 赞同：2
> 
> 时间：2012-10-24T14:07:18.610
> 
> 标签：ruby, methods

哪些字符串可以作为 Ruby 的方法名称？我特别想知道非单词字符以何种方式可以成为方法名称的一部分。请给出一套详尽的规则/列表。

**编辑** Phrogz 对 Josh Lee 链接的问题的回答有一个指向下一页的链接，但那是几年前的，并且已经过时了。例如，`Proc#()`缺少。有人知道更新的吗？

![在此处输入图像描述](../Images/72ee56570ac9393a2bc5be5007c14838.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:17:00.857

根据镐（*Programming Ruby*，The Pragmatic Programmers）：

> 局部变量、方法参数和方法名称都应以小写字母或下划线开头...在此初始字符之后，名称可以是字母、数字和下划线的任意组合（附带条件是 @ 后面的字符符号可能不是数字）... 方法名称可能以字符 ?、! 和 = 结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:55:59.770

任何 Unicode 字符序列都是有效的方法名称。例如：

```
class Test
  define_method :'    ???    _    µµµµ . . . ' do puts 'Hello' end
end

Test.instance_methods
# => [:'    ???    _    µµµµ . . . ']

Test.new.send :'    ???    _    µµµµ . . . '
# Hello 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:56:48.680

您可以使用 ASCII、UTF-8 和 Unicode 字符作为方法的名称。我想空格 ( `\s`) 字符不会仅仅因为解析器会抱怨而起作用。只需设置魔法线，让 Ruby 知道会发生什么。

[http://www.oreillynet.com/ruby/blog/2007/10/fun_with_unicode_1.html](http://www.oreillynet.com/ruby/blog/2007/10/fun_with_unicode_1.html)和[http://rosettacode.org/wiki/Unicode_variable_names#Ruby](http://rosettacode.org/wiki/Unicode_variable_names#Ruby)和[http://www.sw.it.aoyama.ac。 jp/2009/pub/IUC33-ruby1.9/](http://www.sw.it.aoyama.ac.jp/2009/pub/IUC33-ruby1.9/)。Phrogz 在[https://stackoverflow.com/a/4379197/128421](https://stackoverflow.com/a/4379197/128421)中有一个很好的正则表达式，它涵盖了 ASCII 字符。

[此外，在 Stack Overflow 上，“ Ruby 1.9 如何处理源代码中的字符大小写？](https://stackoverflow.com/questions/22764/how-does-ruby-1-9-handle-character-cases-in-source-code) ”中对此进行了很好的讨论。由于该问题的年龄，我没有将其标记为重复，但它确实值得参考。

但是，应该问的问题是，非 ASCII 字符是否应该在方法名称中使用？是的，它们很可爱，它们可能具有象征意义，但它们可能会让人很难打字，尤其是对于那些出于某种原因无法输入字符的人。如果它们在 gem 中，创建包含 π 或 λ 的方法名称或常量可能很难输入。

另请注意`$KCODE`，在几个链接的分页中提到，现在在 Ruby 1.9.1+ 中已弃用，因此您需要使用魔术线。

# sql-server - 不能使用 LIKE 所以我可以用什么代替

> ID：13050961
> 
> 赞同：0
> 
> 时间：2012-10-24T14:07:27.603
> 
> 标签：sql-server, tsql

这是我遇到的问题。我想返回与我的数据库中的表相似的行。考虑具有以下文本的两行：

```
'Cisco phones cannot dial out'
'Phones are not working for outgoing calls' 
```

这是两个不同的行......我试图做这样的事情：

```
DECLARE @TheTest varchar(1000)
DECLARE @TheResult varchar(1000)

SET @TheTest = ('Cisco phones cannot dial out')
SET @TheResult = ('Phones are not working for outgoing calls')

CREATE TABLE #Test
(
MyCol varchar(1000)
)

INSERT INTO #Test(MyCol)
SELECT @TheResult

SELECT * FROM #Test WHERE LOWER(MyCol) LIKE '%' + LOWER(@TheTest) + '%'

DROP TABLE #Test 
```

但结果是返回了 0 行，我明白这是因为字符串 TheTest 与字符串 @TheResult 不够接近……但我需要一个实际返回这一行的解决方案，因为两个文本中都出现了单词 phones。

我是否必须构建更精细的东西来分隔单词并摆脱像这样的常用词？我想模仿我在特定网站上看到的功能：

![在此处输入图像描述](../Images/0432fbe74b09348d76b021cc0d458d24.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:35:49.170

根据我对您的问题的理解，甚至 SQL FullText 都不会得到您想要的。
您正在寻找 Lucene 类型的功能。
我认为他们在 SO 上使用 Lucene 来寻找类似的问题。

一个捷径是解析单词，然后获取词干 (Porter) 并填充表格。
只是在断词上使用正则表达式是一个开始。
或者你可以跳过词干，但这会错过很多匹配（例如匹配）。
仅索引唯一单词/词干。
如果一个词在一个短语中出现 4 次，在另一个短语中出现 2 次，那么评分就有问题。
而且我认为每个单词一个匹配是一个更有意义的分数。
然后进行连接并计算连接的单词数。
需要规范化，因为 12 个单词的 12 个匹配优于 20 个单词的 14 个匹配。
比如 2 * 匹配 /（字数 A + 字数 B）。

另一个方向是不使用词干，而是使用像 Levenstein 距离这样的模糊匹配。

在您的示例中，只有电话匹配，因此得分较低。
但即使是 Lucene 或 Google 也很难给出高分。
将英语中的两个短语分解为具有不同单词但含义相同的短语是非常复杂的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:11:06.843

您可能想尝试`SOUNDEX`返回两个字符串之间的相似性：http: [//msdn.microsoft.com/en-us/library/ms187384.aspx](http://msdn.microsoft.com/en-us/library/ms187384.aspx)

它返回一个保存两个字符串之间相似性的 varchar。然后，您可以评估 varchar 是否在您定义的可接受的“相似性范围”内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:22:26.153

一种方法是使用一个`Split`函数（[这里是一个演示](http://sqlfiddle.com/#!3/f992b/7/1%29)）：

```
CREATE FUNCTION [dbo].[Split]
(
    @ItemList NVARCHAR(MAX), 
    @delimiter CHAR(1)
)
RETURNS @IDTable TABLE (Item VARCHAR(50))  
AS      

BEGIN    
    DECLARE @tempItemList NVARCHAR(MAX)
    SET @tempItemList = @ItemList

    DECLARE @i INT    
    DECLARE @Item NVARCHAR(4000)

    SET @i = CHARINDEX(@delimiter, @tempItemList)

    WHILE (LEN(@tempItemList) > 0)
    BEGIN
        IF @i = 0
            SET @Item = @tempItemList
        ELSE
            SET @Item = LEFT(@tempItemList, @i - 1)
        INSERT INTO @IDTable(Item) VALUES(@Item)
        IF @i = 0
            SET @tempItemList = ''
        ELSE
            SET @tempItemList = RIGHT(@tempItemList, LEN(@tempItemList) - @i)
        SET @i = CHARINDEX(@delimiter, @tempItemList)
    END 
    RETURN
END 
```

现在您可以检查列中是否包含其中一个单词：

```
DECLARE @TheTest varchar(1000)
DECLARE @TheResult varchar(1000)

SET @TheTest = ('Cisco phones cannot dial out')
SET @TheResult = ('Phones are not working for outgoing calls')

CREATE TABLE #Test
(
MyCol varchar(1000)
)

INSERT INTO #Test(MyCol)
    SELECT @TheResult

Declare  @searchWords Table(Item varchar(100));
INSERT INTO @searchWords
    SELECT Item FROM dbo.Split(@TheTest, ' ');

SELECT * FROM #Test t
WHERE EXISTS
(
    SELECT 1 
    FROM dbo.Split(t.MyCol, ' ')cw INNER JOIN @searchWords sw
        ON cw.Item = sw.Item
);

DROP TABLE #Test 
```

# c# - 如何判断ssrs reporting-services ReportViewer控件是否渲染成功

> ID：13050963
> 
> 赞同：0
> 
> 时间：2012-10-24T14:07:37.257
> 
> 标签：c#, asp.net, reporting-services, ssrs-2008

**要求**
如果报表成功呈现，则允许用户保存报表的当前参数状态。IE。选择所有下拉菜单，填写不允许空白的空白字段等。

**ReportViewer 行为**
按下“查看报告”按钮后，报告查看器会执行一些客户端验证，并在一切不正常时显示警报；否则，将重新生成报告并调用 javascript 函数：pageLoad()。

**可能的解决方案**

*   以某种方式为“查看报告”单击事件添加一个句柄并禁用我的“保存”按钮。
*   在 pageLoad() 方法中启用“保存”按钮。

这是实施解决方案的最佳方式吗？如果是这样，我如何获得对“查看报告”按钮的引用？

**预计到达时间：**

这是我目前正在使用的代码。
- *btnViewReport*是您在 ReportViewer 参数区域右侧看到的按钮。
- *btnSave*是我在 ReportViewer 之外添加的按钮。它做什么都没关系。重要的是它应该只在单击*btnViewReport*并成功生成报告时显示（所有必需的参数都已填写）。
- *pageLoad*是一个函数，每次有部分回调时，ScriptManager 都会调用它。单击*btnViewReport*会导致部分回发。

```
 var firstTimePageLoaded = true;

    function pageLoad() {

        if (this.firstTimePageLoaded) {
            $("#btnSave").hide();
            this.firstTimePageLoaded = false;
        }
        else {
            $("#btnSave").show();
        }

        var btnViewReport = $('#<%=ReportViewer1.ClientID %> input[type="submit"][value="View Report"]');
        btnViewReport.unbind('click'); // pageLoad() is sometimes called twice.
        btnViewReport.click(function () {
            $("#btnSave").hide();
        });
    } 
```

现在，如果我将一些参数字段留空并单击“查看报告”，则“保存”按钮将被隐藏，因为不会发生部分回发。

我需要 firstTimePageLoaded 标志来防止按钮在页面最初显示时显示。它有效，但就在我的糟糕解决方法列表中。

# php - FPDF 中的远程图像是否被物理插入到 PDF 文件中？

> ID：13050964
> 
> 赞同：0
> 
> 时间：2012-10-24T14:07:44.153
> 
> 标签：php, pdf, fpdf

我希望通过 PHP 脚本使用 FDPF 即时生成 PDF 文档。查看[Image function 的文档](http://fpdf.org/en/doc/image.htm)，看来我确实可以使用远程图像。但是，有人能告诉我，每次查看 PDF 时，图像是物理插入 PDF 还是从远程服务器拉出，即用户是否要保存文档？

我只是在想如果远程图像发生变化或不再可用会发生什么。我的猜测是图像被物理插入到文档中，但想确定。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:08:34.433

是的，图像嵌入在实际的 PDF 文件中。您可以通过检查实际文档的文件大小来验证这一点。

# sql-server - 如何查询 varchar(MAX) 列包含特定十六进制值的记录？

> ID：13050965
> 
> 赞同：2
> 
> 时间：2012-10-24T14:07:50.250
> 
> 标签：sql-server

尝试在 sql 中将记录转换为 xml 时，我收到以下错误消息：

> 消息 6841，级别 16，状态 1，过程 trg_missacct_upd_del，第 58 行
> FOR XML 无法序列化节点“AltAddr”的数据，因为它包含 XML 中不允许的字符 (0x0002)。要使用 FOR XML 检索此数据，请将其转换为二进制、varbinary 或图像数据类型并使用 BINARY BASE64 指令。

我想写一个查询来查找哪条记录有这个十六进制值（0x0002）。我试过这样的事情：

```
select * from missacct where altaddr like '%' + 0x0002 + '%' 
```

有没有办法查询出这条记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:12:05.880

```
SELECT * FROM missacct WHERE altaddr LIKE '%' + CHAR(0x0002) + '%' 
```

或者你可以做

```
SELECT * FROM missacct WHERE CHARINDEX( CHAR(0x0002), altaddr ) >0 
```

# jquery - Galleria API enterFullscreen 仅在页面第一次加载时有效

> ID：13050977
> 
> 赞同：1
> 
> 时间：2012-10-24T14:08:43.667
> 
> 标签：jquery, api, fullscreen, galleria

我在我的网页上使用带有经典主题的 Galleria 图片库 ( [http://galleria.io/ )。](http://galleria.io/)我想添加一个将用户带到全屏模式的按钮。所以，我看了一下 API，它看起来很简单：我尝试了几次，终于让它工作了。问题是：它在我第一次打开 html 文档时运行良好，但是当我关闭全屏模式（通过按 esc 或单击叉号）并尝试再次打开它（通过单击我链接到的链接）它时不起作用。看起来它试图打开但有什么东西阻止了它：因为它显示了大约一秒钟。我不知道为什么会发生这种情况，有人可以在这里帮助我吗？

我的html：

```
 <style>
  .content{width:700px;height:800px;margin:20px auto;}
        #galleria{height:700px}

    </style>

    <!-- load jQuery -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>

    <!-- load Galleria -->
    <script src="../../galleria-1.2.8.min.js"></script>

    </head>
    <body>

      <div class="content">

                 <!-- the link for fullscreen mode -->
                 <a id="fullscreen" href="#"> fullscreen </a> 

                 <div id="galleria">

       <!--  and then all the images just like they were when opening the classic theme demo html -->
     </body> 
```

还有我的 javascript：

```
 <script>

 Galleria.ready(function() {
    var gallery = this; 

        gallery.attachKeyboard({

            left: gallery.prev,
            right: gallery.next,

        });

 $("#fullscreen").click(function() {

            gallery.enterFullscreen(); 

        });

     });

// Initialize Galleria

 Galleria.run("#galleria")

   // Load the classic theme
Galleria.loadTheme('galleria.classic.min.js');
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:21:44.443

以防万一有人真的遇到和我一样的奇怪问题，我找到了答案：全屏在 chrome 中不起作用，因为默认设置与它有某种冲突..（因为我将全屏功能附加到标签）。

所以基本上对我来说是在 enterfullscreen() 之前添加一个 event.preventDefault()。

工作代码：

```
// Load the classic theme
Galleria.loadTheme('galleria.classic.min.js');

// Initialize Galleria
Galleria.run("#galleria", {

 extend:function() {
    var gallery = this; 

        gallery.attachKeyboard({

            left: gallery.prev,
            right: gallery.next,

        });

 $("#fullscreen").click(function() {

            event.preventDefault();

            gallery.enterFullscreen(); 

        });

 } 
```

# c# - RFID ME Gen2 互联网

> ID：13050979
> 
> 赞同：3
> 
> 时间：2012-10-24T14:08:49.577
> 
> 标签：c#, rfid, usb

我想从我的**MTI RFID ME Gen2 互联网**上读出一些标签：
[http:](http://www.mti.com.tw/rfidme/)
//www.mti.com.tw/rfidme/ 这是一个 USB 加密狗，现在我想和他一起玩 VS 和 c#。所以搜索了很长时间的 SDK，
我找到了一些：
[http](http://www.bait-consulting.com/RFIDMESDK.aspx)
://www.bait-consulting.com/RFIDMESDK.aspx 开发工具包：
www.mti.com.tw/upfiles/e_pro_tb01346397897.pdf
这里是手册描述：
www.bait-consulting.com/Cutomers/MTI/UserManual%28v1.1.0.110%29.pdf
现在我的问题是sdk的实现，有两个.dll。我将它们包含在我的项目中，而不是我将解决给出的示例代码：

```
public partial class Form1 : Form
{
//Declare RFID ME™ SDK
public RFIDMEDevKit.reader myReader = new RFIDMEDevKit.reader();
} 
```

我的 VS2012 抛出异常：在第 4 行：Die Zeichenfolge wurde nicht als gültiges DateTime erkannt。格式异常

完整的代码示例也没有运行：/那么有人对这个主题有经验吗？还是一些代码示例？

非常感谢:) 希望你能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:39:55.187

我是编写 SDK 的人。您收到的问题是由于我如何在演示中到期。由于日期格式不兼容，您会看到错误。我已经改变了这一点（问题应该已经消失了）并试图在发布最新版本之前修复一些最后的错误。我希望能在月底前准备好。

如果您只是想读取标签，那么 RFID ME USB 加密狗也可以。如果您需要写入标签，我仍在尝试解决该问题（我最近更改了 USB HID 接口的工作方式，并且已经损坏了某些东西）。

# floating-point - fmod 是否等同于 HLSL 中的 % 运算符

> ID：13050981
> 
> 赞同：4
> 
> 时间：2012-10-24T14:08:53.467
> 
> 标签：floating-point, operator-keyword, hlsl, modulus

以下语句是有效的 HLSL：

```
float3(300.0f,200.0f,100.0f) % 256.0f 
```

显然 te % 运算符适用于浮点数？这与*fmod*有何不同？以下陈述是否等效？

```
fmod(float3(300.0f,200.0f,100.0f), 256.0f) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:16:53.463

我相信是的，是的。% 运算符[在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509631%28v=vs.85%29.aspx#Additive_and_Multiplicative_Operators)记录，并被定义为处理浮点数和整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-03T00:07:19.303

我不确定它们是否完全相同，但不要引用我的话。这是我的测试：

```
const float2 r = float2(
23.1406926327792690,  // e^pi (Gelfond's constant)
2.6651441426902251); // 2^sqrt(2) (Gelfond–Schneider constant)

return frac( cos( fmod( 12345678., 1e-7 + 256\. * dot(p,r) ) ) );  

//return frac( cos( 12345678.% (1e-7 + 256\. * dot(p,r)) ) ); 
```

第二个版本在映射为纹理时返回视觉图案，而第一个版本则完全随机。也许我误解了一些东西，但在这种情况下，他们的行为肯定会有所不同。

也许我只是搞砸了测试，但我想我会提到它，因为它看起来很相关。

编辑：此代码源自这里 [我可以在像素着色器中生成一个随机数吗？](https://stackoverflow.com/questions/5149544/can-i-generate-a-random-number-inside-a-pixel-shader)似乎。

# uiview - UITableView 分组样式

> ID：13050982
> 
> 赞同：0
> 
> 时间：2012-10-24T14:08:57.710
> 
> 标签：uiview, uitableview

我想制作一个像下面这样的分组表视图

![分组表视图](../Images/4e3dcf2cbc6f2582a26b67a598ebb60a.png)

你有什么建议？到目前为止我所做的是分组表视图，代码如下

```
#pragma mark - Table view data source

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    if(section == 0)
        return @"Countries to visit";
    else
        return @"Countries visited";
}

- (void)tableView:(UITableView *)tableView willDisplayHeaderView:(UIView *)view forSection:(NSInteger)section{
    //displays the header of the tableView
    self.tableView.tableHeaderView = view;

}

- (void) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{

    UIView *sectionHeader = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 200, 200)];

    UITextField *textField = [[UITextField alloc]initWithFrame:CGRectMake(20, 20, 100, 50)];

    textField.text = @"shit";

    [sectionHeader addSubview:textField];

    self.tableView.tableHeaderView = sectionHeader;

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 5;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return 10;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 80.0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"ApplicationCell";

    ApplicationCell *cell = (ApplicationCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[CompositeSubviewBasedApplicationCell alloc] initWithStyle:UITableViewCellStyleDefault
                                                           reuseIdentifier:CellIdentifier];

    }
    // setting the background images for the selected and the normal actions!
    CGRect framme = cell.frame;

    UIImage *image = [UIImage imageNamed:@"buttonCellBackground_03.png"];
    UIImage *imageThumb = [UIImage imageNamed:@"buttonView.png"];
    UIImageView* imageView = [[UIImageView alloc] initWithImage:image];
    [imageView setFrame:CGRectMake(framme.origin.x+29, 0, 290, 80)];
    [cell setBackgroundView:[[UIImageView alloc]initWithImage:imageThumb] ];
    [cell.backgroundView addSubview:imageView];

    UIImage *image2 = [UIImage imageNamed:@"ButtonViewSelected.png"];
    UIImage *imageThumb2 = [UIImage imageNamed:@"buttonView.png"];
    UIImageView* imageView2 = [[UIImageView alloc] initWithImage:image2];
    [imageView2 setFrame:CGRectMake(framme.origin.x+29, 0, 290, 80)];
    [cell setSelectedBackgroundView:[[UIImageView alloc]initWithImage:imageThumb2] ];
    [cell.selectedBackgroundView addSubview:imageView2];

return cell;
} 
```

我猜标题将包含标题和背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:33:53.393

您必须创建一个自定义 UITableViewCell

# c - C - 使用 strncpy() 函数后的随机字符

> ID：13050987
> 
> 赞同：2
> 
> 时间：2012-10-24T14:09:03.930
> 
> 标签：c, null, integer, termination

我在 C 中有以下程序：

该程序的主要问题是我执行复制操作后，在复制的字母后显示了许多垃圾字符。我知道这是因为目标变量没有正确以空值结尾。但是，如果您仔细检查代码，我正在执行空终止。为什么问题仍然存在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T14:10:29.423

那么，呃，你认为如何`strlen()`计算字符串的长度？你认为*它*需要终止吗？

提示：确实如此。字符数组不是 C 中的字符串，除非它以 0 字符结尾。所做`strlen()`的只是计算字符数，直到找到终止符，因此在逻辑中使用它来终止缓冲区以使其成为字符串是一种鸡蛋的情况。

您的问题是您误用了`strncpy()`. 这是一件很容易出错的事情，因为从典型（初学者）C 程序员的角度来看，该函数有点疯狂。从名称上看，它根本不会像您期望的那样做。

您可能应该手动执行此操作，只要您确定`nob < sizeof destination - 1`：

```
memcpy(destination, source, nob);
destination[nob] = '\0'; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T14:11:57.673

代替：

```
destination[strlen(destination)] = '\0'; 
```

有：

```
destination[nob] = '\0'; 
```

`strlen`继续阅读，直到找到`'\0'`字符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T14:20:13.000

马修，当您已经知道要复制的字符串的长度时，您不需要`strcpy`or `strncpy`（检查每个字符以查找末尾的 \0 ）。相反，您应该使用`memcpy`然后终止新字符串：

```
memcpy(destination, source, nob);
destination[nob] = '\0'; 
```

`memcpy`不检查'\0'，所以速度更快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T14:10:33.557

`strncpy`不保证您的`destination`字符串在复制后将以空值结尾。我的方法是：

```
destination[ nob ] = '\0'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T14:12:54.280

经过一些非常小的修改后，这将非常有用：

```
char destination[18] = {'\0'}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T14:21:30.867

不要使用 strncpy，这很危险。正如我们从您的示例中看到的那样，程序员总是忘记输入正确的参数，结果他们得到了损坏的字符串。这是一个非常常见的错误。

strcpy() 更安全，但也不理想，因为它没有边界检查。如果使用不当，可能会导致缓冲区溢出，这是一个安全问题。这也是一个常见的错误。

复制字符串最快和最安全的方法是通过 memcpy：

```
memcpy(destination, source, nob);
desitnation[nob] = '\0'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T14:19:26.087

这是失败的，因为**strncpy**仅复制第一个**nob**字符并且不附加尾随**0**。您尝试在目标字符串上添加带有**strlen()**的尾随 0并没有帮助，因为它会计算字符直到第一个 0，并在该位置放置一个零（这将无效）。

“破解”修复的一种方法是清除目标字符串：

```
memset( destination, 0, sizeof(destination)); 
```

可能有更好的解决方案，包括使您的测试**> 17**成为**> 18**。

# c# - 如何从像会话这样的 Bag 对象创建类的实例并设置属性

> ID：13050995
> 
> 赞同：4
> 
> 时间：2012-10-24T14:09:39.533
> 
> 标签：c#, reflection, system.reflection, viewbag, activator

该类将被声明`runtime`并`values`存储在`Bag`类似`session`or的对象中`ViewBag`。现在我想创建一个类的**实例并****使用 Bag data**设置它的属性 。我知道我应该使用`reflection`，但我不知道是否有任何**开箱**即用的方法可以做这些事情，或者我应该**创建一个**？

```
session["Foo"] = "foo";
session["Bar"] = "bar";

var instance = System.Activator.CreateInstance(Type.GetType(className));

instance = ? // how to set properties using session 
```

该类在设计时不可用，应用程序不知道它的属性是什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T14:11:42.767

```
Type myType = Type.GetType(className);
var instance = System.Activator.CreateInstance(myType);
PropertyInfo[] properties = myType.GetProperties();

foreach (var property in properties)
{
    property.SetValue(instance, session[property.Name], null);
} 
```

# android - 选项卡更改后使用新数据刷新列表视图不起作用（Android）

> ID：13050996
> 
> 赞同：3
> 
> 时间：2012-10-24T14:09:40.513
> 
> 标签：android, listview, refresh, reload, baseadapter

我在刷新 ListViews 时遇到问题。我有一个 TabActivity 调用另一个 TabActivity(SubTabActivity) 调用 ListActivity。我的 ListView 从 Web 服务器的 XML 文件中获取数据。在我的自定义标题中，我有一个按钮来重新加载/刷新 ListView。当我更改 subTab 时，我调用 onTabChanged-Method 用其他数据重绘列表。

我现在的问题是我只能在进行第一次选项卡更改之前刷新 ListView。更改 Tap 后，我只能刷新第二个列表。当我回到第一个列表时，我无法刷新两者。我只能从我的 XML 文件中获取新数据，但我无法显示它。我尝试了 invalidate()、invalidateViews() 和 notifyDataSetChanged()，但没有什么能解决这个错误。

我的 AsyncTask 刷新

```
private static class ReloadNews extends AsyncTask<Void, Void, Void>
{   
    @Override
    protected void onPreExecute()
    {
        MenuActivity.startProgress();
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        News.getNews(News.url);

        myref.runOnUiThread(new Runnable() 
        {
            @Override
            public void run() 
            {
                // TODO Auto-generated method stub  
                if(SubTabMenuActivity.subMenuTabHost.getCurrentTabTag().equals("FestivalNews"))
                {
                    adapter = new NewsAdapter(myref, News.getFestivalNews());
                    newsList.setAdapter(adapter);
                }
                else if(SubTabMenuActivity.subMenuTabHost.getCurrentTabTag().equals("RennNews"))
                {
                    adapter = new NewsAdapter(myref, News.getRegattaNews());
                    newsList.setAdapter(adapter);
                }
            }   
        });     
        return null;
    }

    @Override
    protected void onPostExecute(Void result)
    {
        MenuActivity.stopProgress();
    }
} 
```

知道为什么在 TabChange 之后它不起作用吗？

**编辑：**

```
10-25 05:58:28.264: D/dalvikvm(272): GC_EXPLICIT freed 8K, 51% free 2725K/5511K,   external 410K/517K, paused 241ms
10-25 05:58:33.104: D/dalvikvm(310): GC_EXPLICIT freed 236K, 45% free 3366K/6087K, external 410K/517K, paused 53ms
10-25 05:58:35.281: D/SntpClient(60): request time failed: java.net.SocketException: Address family not supported by protocol
10-25 05:58:38.163: D/dalvikvm(345): GC_EXPLICIT freed 106K, 44% free 3521K/6215K, external 410K/517K, paused 79ms
10-25 05:58:43.153: D/dalvikvm(360): GC_EXPLICIT freed 325K, 51% free 2720K/5511K, external 410K/517K, paused 54ms
10-25 05:58:57.233: I/System.out(433): ADaPter
10-25 05:58:57.243: I/System.out(433): ADaPter
10-25 05:58:57.263: I/System.out(433): ADaPter
10-25 05:58:57.273: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.273: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.293: I/System.out(433): ADaPter
10-25 05:58:57.303: I/System.out(433): ADaPter
10-25 05:58:57.313: I/System.out(433): ADaPter
10-25 05:58:57.323: I/System.out(433): ADaPter
10-25 05:58:57.333: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.333: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.433: I/System.out(433): ADaPter
10-25 05:58:57.453: I/System.out(433): ADaPter
10-25 05:58:57.483: I/System.out(433): ADaPter
10-25 05:58:57.493: D/dalvikvm(433): GC_CONCURRENT freed 1274K, 62% free 3322K/8647K, external 2400K/2689K, paused 4ms+5ms
10-25 05:58:57.523: I/System.out(433): ADaPter
10-25 05:58:57.533: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.533: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.553: I/System.out(433): ADaPter
10-25 05:58:57.563: I/System.out(433): ADaPter
10-25 05:58:57.573: I/System.out(433): ADaPter
10-25 05:58:57.593: I/System.out(433): ADaPter
10-25 05:58:57.593: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.603: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.623: I/System.out(433): ADaPter
10-25 05:58:57.633: I/System.out(433): ADaPter
10-25 05:58:57.643: I/System.out(433): ADaPter
10-25 05:58:57.653: I/System.out(433): ADaPter
10-25 05:58:57.663: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.663: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.693: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.693: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.693: I/System.out(433): ADaPter
10-25 05:58:57.713: I/System.out(433): ADaPter
10-25 05:58:57.723: I/System.out(433): ADaPter
10-25 05:58:57.733: I/System.out(433): ADaPter
10-25 05:58:57.743: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.743: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.793: I/System.out(433): ADaPter
10-25 05:58:57.803: I/System.out(433): ADaPter
10-25 05:58:57.813: I/System.out(433): ADaPter
10-25 05:58:57.813: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.813: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.933: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.933: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:57.943: I/System.out(433): ADaPter
10-25 05:58:58.003: D/dalvikvm(433): GC_CONCURRENT freed 890K, 61% free 3439K/8647K, external 2240K/2689K, paused 8ms+4ms
10-25 05:58:58.003: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.003: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.013: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.013: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.023: I/System.out(433): ADaPter
10-25 05:58:58.073: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.073: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.083: I/System.out(433): ADaPter
10-25 05:58:58.083: I/System.out(433): ADaPter
10-25 05:58:58.103: I/System.out(433): ADaPter
10-25 05:58:58.113: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.113: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.123: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.123: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.143: I/System.out(433): ADaPter
10-25 05:58:58.433: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.453: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.453: D/skia(433): --- SkImageDecoder::Factory returned null
10-25 05:58:58.453: D/skia(433): --- SkImageDecoder::Factory returned null 
```

这是我的 LogCat 正常，同时填充列表以及在 tabchange 之前调用 refresh 时。

以下 logcat 部分是在 tabchange 并再次调用 refresh 之后。

```
10-25 05:59:01.493: D/dalvikvm(433): GC_FOR_MALLOC freed 293K, 58% free 3686K/8647K, external 2240K/2689K, paused 30ms
10-25 05:59:01.493: I/dalvikvm-heap(433): Grow heap (frag case) to 8.655MB for 524304-byte allocation
10-25 05:59:01.523: D/dalvikvm(433): GC_FOR_MALLOC freed 256K, 58% free 3942K/9223K, external 2240K/2689K, paused 31ms
10-25 05:59:01.923: D/dalvikvm(433): GC_FOR_MALLOC freed 532K, 56% free 4094K/9223K, external 2240K/2689K, paused 27ms
10-25 05:59:02.313: D/dalvikvm(433): GC_CONCURRENT freed 862K, 54% free 4319K/9223K, external 2240K/2689K, paused 5ms+6ms
10-25 05:59:02.943: D/dalvikvm(433): GC_CONCURRENT freed 989K, 51% free 4609K/9223K, external 2240K/2689K, paused 7ms+3ms
10-25 05:59:03.473: D/dalvikvm(433): GC_CONCURRENT freed 1478K, 52% free 4447K/9223K, external 2240K/2689K, paused 7ms+7ms
10-25 05:59:03.783: W/InputManagerService(60): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4073bca0 
```

我注意到适配器不会将数据加载到列表中。如果我调用 adapter.count(); 我可以看到他已经获得了新数据，但他不再将其绘制到列表中。

添加另一个 logTag 后，我注意到我的 Adapter 的构造函数被调用但不是 getView 方法。我的 ListView 是否有可能失去适配器的焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:00:38.630

好的，我找到了自己的解决方案。我已将不同的列表拆分为不同的 Activtiys，并为每个 mainTab 创建了自己的 subTab Activity。我对这个解决方案并不感到自豪，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:21:30.433

后

```
 newsList.setAdapter(adapter); 
```

添加这个：

```
adapter.notifyDataSetChanged(); 
```

祝你好运