# StackOverflow 问答 13326000-13326999

# windows-8 - Windows 应用认证工具包 - GetCorSvcBindToUnregisteredWorker

> ID：13326000
> 
> 赞同：0
> 
> 时间：2012-11-10T20:56:47.213
> 
> 标签：windows-8, windows-store-apps, app-certification-kit

我在四处寻找解决方案时看到了很多关于 Windows 应用程序认证工具包的问题，​​尤其是在 NGenTest 中。缩短包名称对我不起作用，我还没有在市场中提交任何应用程序。除了“Microsoft Advertising SDK for Windows 8”之外，我没有使用任何第三方库，但这是我在 Performance_Test__trace_Launch_1192012_101737.txt 中的测试结果。

如果您查看 NGemTest，GetCorSvcBindToUnregisteredWorker 有问题，我找不到任何解决方案。大家有没有遇到过这种情况？你认为是什么问题？

```
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]overridepath - %localappdata%\Microsoft\AppCertKitPerfConfig
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]disablexperf - false
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]xperfpath - ..\Windows Performance Toolkit\xperf.exe
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]xperfflags - Base+FILE_IO+FILE_IO_INIT+CSWITCH+MEMORY
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]xperfuserflags - Microsoft-Windows-Immersive-Shell+Win32HeapRanges
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]xperfminbuffers - 10
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]xperftimeoutmsec - 300000
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]systemcfgtimeoutmsec - 10000
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]runngen - true
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]launchtesttimemsec - 10000
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]suspendtesttimemsec - 15000
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]launchwarningsec - 3
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]launchfailsec - 5
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]maxcpuusagepercent - 50
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]maxlaunchfileiomb - 50
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]maxsuspendfileiomb - 20
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]maxprivatepagesmb - 25
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[Configuration:LoadSettings]suspendfailsec - 2
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::GetConfig]Override path = C:\Users\Jayson\AppData\Local\Microsoft\AppCertKitPerfConfig\Microsoft.Windows.SoftwareLogo.Performance.dll.config
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: xperfpath
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: disablexperf
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: xperfflags
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: xperfuserflags
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: xperfminbuffers
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: xperftimeoutmsec
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: systemcfgtimeoutmsec
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: runNgen
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: launchtesttimemsec
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: suspendtesttimemsec
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: launchwarningsec
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: launchfailsec
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: maxcpuusagepercent
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: maxlaunchfileioMB
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: maxsuspendfileioMB
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: maxprivatepagesMB
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ConfigFile::ReadStringEntry]Reading entry: suspendfailsec
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Loading Manifest.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Finding the Package node.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Creating namespace and identity node.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Loading applications.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Number of applications: 1.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]New Application.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Loading id.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Id: App.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]EntryPointType: MCA
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Entrypoint value = WACK Genius.exe
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]Creating application node.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[AppXPackage::GetPackageFromManifestFile]node created.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[SystemConfigure::Setup]Retrieving active power scheme.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[SystemConfigure::GetCurrentPowerScheme]Current Power Scheme Guid : 381b4222-f694-41f0-9685-ff5bb260df2e
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[SystemConfigure::Setup]Original power scheme guid: 381b4222-f694-41f0-9685-ff5bb260df2e
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[SystemConfigure::Setup]Duplicating active power scheme.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[SystemConfigure::Setup]duplicate power scheme guid: 3139fb0e-783f-4f9a-8d99-2a0ff62c8c23
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[SystemConfigure::Setup]Setting duplicate guid: 3139fb0e-783f-4f9a-8d99-2a0ff62c8c23 to active.
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -S 3139fb0e-783f-4f9a-8d99-2a0ff62c8c23
program Information: 0 : 11/9/2012 10:17:37 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[SystemConfigure::Setup]setting monitor timeout values.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -X -monitor-timeout-ac 999
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -X -monitor-timeout-dc 999
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[SystemConfigure::Setup]setting disk timeout values.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -X -disk-timeout-ac 999
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -X -disk-timeout-dc 999
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[SystemConfigure::Setup]setting standby timeout values.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -X -standby-timeout-ac 999
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -X -standby-timeout-dc 999
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[SystemConfigure::Setup]setting hibernate timeout values.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -X -hibernate-timeout-ac 999
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -X -hibernate-timeout-dc 999
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[SystemConfigure::Setup]Turning off screen saver.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:The app WSB_1.0.0.8_neutral__e57n2qd78jwy8 is not in running state.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]PackageFullName value is : WSB_1.0.0.8_neutral__e57n2qd78jwy8
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]32 Bit Ngen - C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\WACK Genius.exe
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command: C:\Windows\Microsoft.NET\Framework\v4.0.30319\ngen.exe install "C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\WACK Genius.exe" /NoDependencies /noroot /version:v4.0.30319 /package:"WSB_1.0.0.8_neutral__e57n2qd78jwy8" /localappdata:"C:\Users\Jayson\AppData\Local\Packages\wsb_e57n2qd78jwy8\AC" /nologo 
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command Output:
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]ERROR:  GetCorSvcBindToUnregisteredWorker failed because the worker process died with errorcode -2147221168
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]Uninstalling assembly C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\WACK Genius.exe because of an error during compilation: Worker exited unexpectedly during startup (Exception from HRESULT: 0x80131F04).
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]Worker exited unexpectedly during startup (Exception from HRESULT: 0x80131F04)
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command Output end
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]ERROR: Failure while compiling: C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\WACK Genius.exe
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]32 Bit Ngen - C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\Microsoft.Advertising.WinRT.UI.winmd
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command: C:\Windows\Microsoft.NET\Framework\v4.0.30319\ngen.exe install "C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\Microsoft.Advertising.WinRT.UI.winmd" /NoDependencies /noroot /version:v4.0.30319 /package:"WSB_1.0.0.8_neutral__e57n2qd78jwy8" /localappdata:"C:\Users\Jayson\AppData\Local\Packages\wsb_e57n2qd78jwy8\AC" /nologo 
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command Output:
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]ERROR:  GetCorSvcBindToUnregisteredWorker failed because the worker process died with errorcode -2147221168
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]Uninstalling assembly C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\Microsoft.Advertising.WinRT.UI.winmd because of an error during compilation: Worker exited unexpectedly during startup (Exception from HRESULT: 0x80131F04).
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]Worker exited unexpectedly during startup (Exception from HRESULT: 0x80131F04)
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command Output end
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]ERROR: Failure while compiling: C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\Microsoft.Advertising.WinRT.UI.winmd
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]32 Bit Ngen - C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\MicrosoftAdvertising.winmd
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command: C:\Windows\Microsoft.NET\Framework\v4.0.30319\ngen.exe install "C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\MicrosoftAdvertising.winmd" /NoDependencies /noroot /version:v4.0.30319 /package:"WSB_1.0.0.8_neutral__e57n2qd78jwy8" /localappdata:"C:\Users\Jayson\AppData\Local\Packages\wsb_e57n2qd78jwy8\AC" /nologo 
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command Output:
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]ERROR:  GetCorSvcBindToUnregisteredWorker failed because the worker process died with errorcode -2147221168
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]Uninstalling assembly C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\MicrosoftAdvertising.winmd because of an error during compilation: Worker exited unexpectedly during startup (Exception from HRESULT: 0x80131F04).
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]Worker exited unexpectedly during startup (Exception from HRESULT: 0x80131F04)
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]NGen Command Output end
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]ERROR: Failure while compiling: C:\Program Files\WindowsApps\WSB_1.0.0.8_neutral__e57n2qd78jwy8\MicrosoftAdvertising.winmd
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[NGenTest]Error occurred while generating compiling at least one assembly.
Invoking method [Cleanup]
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[Performance::Cleanup]Restoring system power configuration.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[SystemConfigure::Cleanup]Setting original guid: 381b4222-f694-41f0-9685-ff5bb260df2e to active.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -S 381b4222-f694-41f0-9685-ff5bb260df2e
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[SystemConfigure::Cleanup]Deleting duplicate guid.
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::Run]Starting Run of: powercfg with arguments -DELETE 3139fb0e-783f-4f9a-8d99-2a0ff62c8c23
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Waiting for exit with timeout of 10000
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[ProcessAction::WaitForExit]Exitcode: 0
program Information: 0 : 11/9/2012 10:17:38 AM INFO:[SystemConfigure::Cleanup]Reseting screen saver. 
```

我在用：

*   Windows 8 企业版评估
*   适用于 Windows 8 的 Microsoft Visual Studio Express 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:45:50.203

从 NGen 工作进程返回的错误代码指示“无法从注册表中读取密钥”，但不清楚它在失败时尝试读取的注册表项。我建议您使用 Process Monitor（procmon.exe，可以从[http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)安装）来记录来自 NGen 工作进程（mscorsvw. exe 进程），查看其中哪一个失败了。一旦发现这一点，我们应该能够弄清楚如何解决它。

我很想听听您的意见，并知道 Process Monitor 揭示了什么。

# java - 问号对我来说看起来很新

> ID：13326009
> 
> 赞同：4
> 
> 时间：2012-11-10T20:57:37.147
> 
> 标签：java, android, xml, android-layout

这

```
<TextView
xmlns:android=”http://schemas.android.com/apk/res/android”
android:id=”@+id/separator”
android:layout_width=”fill_parent”
android:layout_height=”wrap_content”
android:gravity=”center”
style=”?android:attr/listSeparatorTextViewStyle” /> 
```

或这个

```
 <item name="android:textColor">?textColorSecondary</item> 
```

有时我在 xml 节点的内容中看到这样的问号，我不知道它是做什么用的，没有文档对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:23:23.947

引用当前主题中的`?`资源，在 Developer's Guide [Accessing Resources](http://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes)中有描述：

> 样式属性资源允许您引用当前应用主题中的属性值。引用样式属性允许您通过设置样式以匹配当前主题提供的标准变体来自定义 UI 元素的外观，而不是提供硬编码的值。引用样式属性本质上是说，“在当前主题中使用由该属性定义的样式。”
> 
> 要引用样式属性，名称语法几乎与普通资源格式相同，但使用问号 (?) 代替 at 符号 (@)，并且资源类型部分是可选的。例如：
> 
> ```
> ?[<package_name>:][<resource_type>/]<resource_name> 
> ```

# php - 如何对所有网址仅使用 1 个品牌过滤器？

> ID：13326010
> 
> 赞同：-1
> 
> 时间：2012-11-10T20:57:36.513
> 
> 标签：php, javascript, html

实际上，我正在一个具有品牌过滤器的电子商务网站上工作..我正在使用选择标签（我的意思是下拉菜单..）问题是：

我只能使用下面的脚本代码使它适用于 1 个 url。但我的要求是：我必须使它适用于我的所有 url。

这是我的 javascript 代码：（但仅适用于 1 个 url）

```
<script>

function gotoPage(){
var url = "http://mysite.com/shop/c/laptops/";  //HERE I JUST USED ONE URL for testing
var sel = document.getElementById("brand");
var brand = sel.options[sel.selectedIndex].text; 
window.location.href = url + "?brand=" + brand;
}

</script> 
```

我也试过这样：`var url = <?php echo $_SERVER['PHP_SELF']; ?>;` 代替`var url = "http://mysite.com/shop/c/laptops/";`但仍然无法工作......

任何人都可以调查一下并为我提供解决方案..？（顺便说一句，我的代码在 PHP 上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:04:14.733

尝试将 URL 用引号括起来：

```
var url = "<?php echo $_SERVER['PHP_SELF']; ?>"; 
```

# java - GA 中的 java.lang.NullPointerException

> ID：13326017
> 
> 赞同：0
> 
> 时间：2012-11-10T20:58:41.940
> 
> 标签：java, nullpointerexception

我正在使用遗传算法进行最后一年的项目，为我的大学设计一组时间表。

我遇到了 1 个阻止我前进的错误。我收到以下错误。

```
 Exception in thread "main" java.lang.NullPointerException
at LunchTimeFree.calculateViolations(LunchTimeFree.java:36)
at FitnessFunction.calculateFitnesScore(FitnessFunction.java:34)
at Main.main(Main.java:19) 
```

但这对我来说没有任何意义：在那一行是这行代码：

```
 int time = c.genes[i].time; 
```

它将变量时间设置为我染色体中某个基因的时间值。我已经调试它并在打印我的时间变量和 c.genes[i].time 变量后插入了一个 println 语句，它们都被初始化为变量，即 time = 1 或 2 等。

我不明白问题是什么。请问有人可以帮我吗？！

```
public class LunchTimeFree extends constraintInterface {

    Chromosome c;

    public LunchTimeFree(Chromosome chromo){
        c = chromo;
    }

    @Override
    public double calculateViolations() {     
    double violations=0;    

    int i = 0; 
    int y = c.getLength();

    while(i <= y-1 )
    {
        int time = c.genes[i].time;

        if (time >= 16 && time <= 25)   {                           
            violations = violations + 1;        
                            } 
                i++;
    }      

    return violations*this.weight;

    }
} 
```

* * *

```
public class ChromosomeFactory
{

Chromosome c;

 public ChromosomeFactory(int l)
 {

 c = new Chromosome(l);

 DummyDatabase da = new DummyDatabase();

 int numOfLectures = da.GetNumLectures();

  int i=0;

  while(i<=numOfLectures-1)
   {

   int lecture = da.getLecture(i);   

   int r = da.Rooms[(int)(Math.random() * da.Rooms.length)];
   int t = da.TimeSlots[(int)(Math.random() * da.TimeSlots.length)]; 

   Gene g = new Gene(lecture,lecture,r,t);

    c.genes[i] = g;
           System.out.println(""+this.c.genes[i].teacher+","+this.c.genes[i].lecture+","+this.c.genes[i].room+","+this.c.genes[i].time+"");
    i++;
    }
   }  
   }

 public class FitnessFunction 
{
Chromosome c;

public FitnessFunction(Chromosome newChromo)  {
    c = newChromo;
}

public double calculateFitnesScore() {

    LunchTimeFree ltf = new LunchTimeFree(c);

    ltf.setWeight(0.01);

    double violationScore =ltf.calculateViolations();

    double score = (1/(1 + violationScore));

    return score;

  } 
```

* * *

```
 public class Chromosome 
 {

Gene[] genes;

public Chromosome(int l)
{
genes = new Gene[l]; 

}

public int getLength()
{
return genes.length;
}

} 
```

* * *

```
public class Gene 
{
public int teacher;
public int lecture;
public int room;
public int time;

public Gene(int t,int l, int r, int time)
{

this.teacher=t;    
this.lecture=l;
this.room=r;
this.time=time;

}

} 
```

* * *

```
public class DummyDatabase implements DatabaseAccessor
{

 int[] Lecturers = { 1,2,3,4,5,6,7,8,9 };
  int[] Lectures = { 1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17,18,19} ;

  int[] TimeSlots =      {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55};

    int[] Rooms = {1,2,3,4,5,6,7,8,9,10};

@Override
public int GetRoom(int entry) {

    return this.Rooms[entry];
}

@Override
public int GetNumLectures() {
    return this.Lectures.length;
}

@Override
public int getTeacher(int entry) {
    return this.Lecturers[entry];
}

@Override
public int getLecture(int entry) {
    return this.Lectures[entry];
}

@Override
public int getNumRooms() {
    return this.Rooms.length;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:22:03.130

`c`您的值中的一个或一个为`c.genes[i]`空。

您正在尝试执行操作或请求为空的属性。所以你得到一个`NullPointerException`. 如果您使用的是 Eclipse 或您选择的其他 IDE，您可以对其进行调试并查看什么为 null 或发布相关代码以便我们猜测。也许你的循环`i`有缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:02:47.653

首先：拆分

```
int time = c.genes[i].time; 
```

进入

```
final Gene[] allGenes = c.genes;
final Gene aGene = allGenes[i];
final int time = aGene.time; 
```

应该准确地向您显示堆栈跟踪中哪些引用为空。这可能有助于缩小错误的位置。

除此之外，这可能是一个很长的电话，但您发布的代码中的所有其他内容看起来都不错：

在您的 Chromosome 类中是否返回数组`getLength`的长度？`genes`还是阵列中设定基因的数量？如果基因数组未完全填充并`getLength`指示填充数组槽的（不正确）数量，则 while 循环可能会过冲并命中数组中的空值。请注意，您使用 int 变量`l`作为 ChromosomeFactory 中 Chromosome 的构造函数参数，但将基因数组填充到`numOfLectures`. 如果`l`用于设置 Chromosome 中基因阵列的大小`l`和`numOfLectures`不同，您可能会遇到问题。差异将用数组中的空值填充。

```
int y = c.getLength();
while(i <= y-1 )
{
    int time = c.genes[i].time;
    if (time >= 16 && time <= 25)   {                           
        violations = violations + 1;        
    } 
    i++;
} 
```

还可以考虑用 for 循环替换它

```
for (int i = 0; i < c.getLength(); i++) {
   int time = c.genes[i].time;
   if (time >= 16 && time <= 25) {                           
      violations++;   
   }
} 
```

For 循环应该是首选，因为它们最小化循环变量的范围，处理循环变量的增加并且更容易掌握。还可以考虑使用 Collection 类之一而不是数组。并**强烈**考虑使用 getter/setter 将所有实例变量更改为私有可见性。

如果这不是您必须向我们展示更多代码的原因，例如 Chromoson 类以及您的基因阵列的结构。

# jquery - Jquery：.css 颜色覆盖：悬停

> ID：13326019
> 
> 赞同：-1
> 
> 时间：2012-11-10T20:58:58.183
> 
> 标签：jquery, css, hover

```
<script>
            $(document).ready(function(){
            $("#dicks1").click(
                function(){
                $("header ul li").css("color", "#fff");
                $("#dicks1").css("color", "#ce0000");
            });
            $("#dicks2").click(
                function(){
                $("header ul li").css("color", "#fff");
                $("#dicks2").css("color", "#ce0000");
            });
            $("#dicks3").click(
                function(){
                $("header ul li").css("color", "#fff");
                $("#dicks3").css("color", "#ce0000");
            });

            });
            </script> 
```

我正在努力做到这一点，所以当我单击“li”时，它会变为红色并保持红色，除非单击另一个，但是 li 上的：悬停被删除并且它保持白色而不是变成＃111。

我尝试了另一个带有 .hover 的脚本，并尝试了一个 if 语句，但它们都失败了。我在这里缺少什么吗？

这是页面：[http ://web-owl.com/cockslam/](http://web-owl.com/cockslam/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:06:22.903

`!important`您可以在悬停规则旁边添加声明：

```
li:hover{
    color:#111 !important;
} 
```

这样它就不会被添加的内联样式覆盖`.css`

# twitter-bootstrap - 带有引导程序的缩略图库

> ID：13326020
> 
> 赞同：3
> 
> 时间：2012-11-10T20:59:02.330
> 
> 标签：twitter-bootstrap

我正在尝试使用 twitter bootstrap 制作缩略图库（2x2），但我没有得到想要的效果。在每行的第一个缩略图中，从第 2 行开始，应用于左边距，使其每行仅适合一个图像。

![问题](../Images/99876c5f25cafc1950323905ee4b300e.png)

**编码：**

```
 <div class="row-fluid">
        <div class="span6">
            <h2 id="clients">Clients</h2>

            <div class="row-fluid">
                <ul class="thumbnails">
                    <li class="span6">
                        <a href="#" class="thumbnail"><img src="http://placehold.it/220x100" alt=""></a>
                    </li>
                    <li class="span6">
                        <a href="#" class="thumbnail"><img src="http://placehold.it/220x100" alt=""></a>
                    </li>
                    <li class="span6">
                        <a href="#" class="thumbnail"><img src="http://placehold.it/220x100" alt=""></a>
                    </li>
                    <li class="span6">
                        <a href="#" class="thumbnail"><img src="http://placehold.it/220x100" alt=""></a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="span6">
            <h2 id="testiominals">Testemunhos</h2>

            <blockquote>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                <small>Someone famous <a href=""><cite title="Source Title">Source Title</cite></a></small>
            </blockquote>

            <blockquote>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                <small>Someone famous <a href=""><cite title="Source Title">Source Title</cite></a></small>
            </blockquote>

            <blockquote>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                <small>Someone famous <a href=""><cite title="Source Title">Source Title</cite></a></small>
            </blockquote>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T08:13:44.373

更好的解决方案可能是为所有 span6 "style":"margin-left:0px;" 提供内联样式 这将为您提供所需的输出，而无需使用多行。

使用它的一个优点可能是您不需要对数组进行切片。尽管大多数编程语言都可以轻松处理数组的切片（将 30 个元素的列表切片为 10 个元素的列表，其中每个元素将包含 3 个列表），但如果您尝试使用 Javascript 在客户端做某事，这将很困难。

我尝试了这种方法并为我工作：基本上我试图在 javascript 中编写一个函数来处理 json 数据以显示为缩略图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:10:09.557

多行呢？代码如下；[在这里摆弄](http://jsfiddle.net/technotarek/79vLv/)。

```
<div class="row-fluid">
    <div class="span6">
        <h2 id="clients">Clients</h2>

        <!-- First Row of Thumbs -->
        <div class="row-fluid">
            <ul class="thumbnails">
                <li class="span6">
                    <a href="#" class="thumbnail"><img src="http://placehold.it/220x100" alt=""></a>
                </li>
                <li class="span6">
                    <a href="#" class="thumbnail"><img src="http://placehold.it/220x100" alt=""></a>
                </li>
            </ul>
        </div>

        <!-- Second Row of Thumbs -->
        <div class="row-fluid">
            <ul class="thumbnails">
                <li class="span6">
                    <a href="#" class="thumbnail"><img src="http://placehold.it/220x100" alt=""></a>
                </li>
                <li class="span6">
                    <a href="#" class="thumbnail"><img src="http://placehold.it/220x100" alt=""></a>
                </li>
            </ul>
        </div>
    </div>

    <div class="span6">
        <h2 id="testiominals">Testemunhos</h2>

        <blockquote>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
            <small>Someone famous <a href=""><cite title="Source Title">Source Title</cite></a></small>
        </blockquote>

        <blockquote>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
            <small>Someone famous <a href=""><cite title="Source Title">Source Title</cite></a></small>
        </blockquote>

        <blockquote>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
            <small>Someone famous <a href=""><cite title="Source Title">Source Title</cite></a></small>
        </blockquote>
    </div>
</div>​ 
```

# c++ - 如何将 3D 数组作为参数传递给函数 C++？还需要将全局变量传递给函数吗？

> ID：13326021
> 
> 赞同：8
> 
> 时间：2012-11-10T20:59:03.907
> 
> 标签：c++, arrays, function

所以我有几个问题。首先，如何将 3D 数组传递给函数。我需要传递整个数组，因为函数是运行循环以将数组的内容输出到文件中。这是我目前拥有的

```
int array[5][3][3]
void function(int a[5][3][3])
{
//...
}
void function(array); //or void function(array[5][3][3]); 
```

我找到了一种使用指向数组的指针使其工作的方法，但是我问过我的老师，他不希望我们使用指针。

我的第二个问题是，如果我打算修改函数内部的全局变量，我不需要将它传递给函数吗？我可以像在 main 中一样在函数中使用它吗？

我现在遇到的另一个问题是将单个值从数组传递到函数中。

在循环中，我需要从 array[i][j][2] 中提取一个值（i 和 j 是外部和内部循环的索引）并将其传递给函数以评估它是否大于 90 . 这是一个学校作业，所以请理解我必须满足某些规范。（比如不使用指针，传递整个数组，传递数组中的一个值，因为作为一个类，我们还没有学会如何使用指针）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T21:27:50.660

您的代码是正确的，但实际上在 C++（或 C）中没有数组参数之类的东西。编译器会默默地将您的代码转换为等效的指针类型，即

```
int array[5][3][3];

void function(int (*a)[3][3])
{
    ...
} 
```

因此，尽管您的教授告诉您不要使用指针，但实际上您无法避免它们，因为在 C++ 中确实没有数组类型参数之类的东西。

第二个问题，全局变量唯一的一点是你可以在任何地方引用它们，所以不需要将它们作为参数传递。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T21:20:57.927

为了传递复杂的数组，我更喜欢将它们包装在一个结构中：

```
struct array {
    int a[5][3][3];
};

void function(struct array *a) ... 
```

这避免了尝试将数组作为函数参数传递的许多陷阱。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-10T21:14:57.583

您可以使用指针代替 int ***a

```
int array[5][3][3]
void dummy(int d[][3][3])
{
     d[1][1][1] = 0;
 } 
```

您也可以将其作为 void * 传递，然后 make

```
 int array[5][3][2]
 void  function(int* b)
 {
   int i=0;
   int j=1;
   int k=2;
   l[ k*(3*2)+j*(2)+i ] = 9;
 }
 function((int*) array); 
```

# codeigniter - 在 PyroCMS 中使页脚可编辑

> ID：13326024
> 
> 赞同：0
> 
> 时间：2012-11-10T20:59:25.637
> 
> 标签：codeigniter, pyrocms

我比较新，`PyroCMS`所以我可能会问错误的问题。我有一个网站，主要是内容驱动的。`layout`我们创建了几个不同的文件（可能有 8 个）。问题是每个`layout`文件都是完全不同的，并且依赖于`partial`：

```
{{ theme:partial name="axiumfooter" }} 
```

但我希望管理员能够编辑页脚。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:38:42.627

一种快速的方法是添加一个新页面，添加您想要的内容，然后使用页面模板标签将页面内容拉到您的页脚中。

```
{{ pages:chunk id="1" name="default" }} 
```

id 是您可以在 PyroCMS 的 Pages 部分的概要窗口中获得的页面 id，名称与页面块相关。

您可能遇到的问题是您现在有一个单独的页面，其中包含您的页脚内容，但您可以使用重定向实用程序 (/admin/redirects) 重定向离开此页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:52:45.133

您希望管理员能够以何种方式做到这一点？主题编辑器会完成这项工作，您可以在其中浏览主题和部分，或者您正在寻找更自定义的东西？PyroCMS 相对容易扩展和适应您的愿望，因此几乎一切皆有可能（尽管不是开箱即用）。

# java - 测试我的 UserService 类，但需要模拟一个同时调用的方法

> ID：13326025
> 
> 赞同：0
> 
> 时间：2012-11-10T20:59:30.770
> 
> 标签：java, junit, easymock

我正在测试我的 userService 类方法，但我正在测试的方法调用了另一个方法。

```
@Test
public void testSomething() {
  HelloWorldResponse hwResponse = ....;

  expect(userDaoMock.helloWorldCall(....).andReturn(hwResponse);

  reploy();

  UserResponseCode response = userService.register(user);

  assertEquals(UserResponseCode.OK, response);
} 
```

现在说我的注册方法调用了我的 userService 类中的另一个方法，我该如何模拟该调用？

据我了解，我不能这样做，因为我没有将整个 userService 类包装在一个模拟中，对吗？

**更新**

当我调试我的注册方法的 junit 测试时，我看到了这个：

```
SomeThing thing = helloWorldCall(...);  // userService.helloWorldCall(...); 
```

现在方法 helloWorldCall 只返回 userDao 返回的内容，我已经在我的测试中模拟了它，但是由于某种原因，当我跟踪执行时它返回 null，所以 thing == null。

为什么它为空，它不应该具有我的模拟返回的值吗？

下面是 UserService#helloWorldCall 代码，它再次简单地返回 userDao 返回的内容，正如您在上面看到的，它返回了我在单元测试中硬编码的响应。为什么在我跟踪/调试单元测试时它为空？

```
public HelloWordResponse helloWorldCall(...) {
  return userDao.helloWorldCall(..)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:26:16.743

它在这里杀死了范围，但是您可以使用[Spring](http://www.springsource.org/spring-framework)并使用不同的上下文。您的实际服务和您的模拟都实现了相同的接口。在您的测试中，您将连接模拟并在运行时连接实际实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:07:18.313

我正在使用 mockscontrol

```
private IMocksControl mockMaker; 
```

所以我必须使用

```
mockMaker.replay();
mockMaker.verify(); 
```

它现在可以工作了，因为我有许多不同的模拟对象。

# cordova - PhoneGap 中的 Cordova-SQLitePlugin：未捕获的 TypeError 无法调用未定义的方法“opendatabase”

> ID：13326030
> 
> 赞同：4
> 
> 时间：2012-11-10T20:59:54.217
> 
> 标签：cordova, phonegap-plugins, typeerror

我正在尝试使用预先填充的数据库，但我不断收到此错误：

```
11-10 22:53:35.781: D/CordovaLog(20142): Uncaught TypeError: Cannot call method 'openDatabase' of undefined
11-10 22:53:35.781: D/CordovaLog(20142): file:///android_asset/www/js/index.js: Line 8 : Uncaught TypeError: Cannot call method 'openDatabase' of undefined
11-10 22:53:35.781: E/Web Console(20142): Uncaught TypeError: Cannot call method 'openDatabase' of undefined at file:///android_asset/www/js/index.js:8 
```

这是代码：
HTML

```
<html>
        <script type="text/javascript" src="js/index.js"></script>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Hello World</title>
    </head>
    <body onload="onLoad()">
        <div class="app">
            <h1>AAAA</h1>
        </div>
        <script type="text/javascript" src="cordova-2.2.0.js"></script>
    </body>
</html> 
```

JS：

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    var db = window.sqlitePlugin.openDatabase("test.db", "1.0", "testsstst", 20000);
} 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T05:38:03.177

您还应该在 HTML 中包含“SQLitePlugin.js”，如下所示：

```
<body>
...
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="SQLitePlugin.js"></script>
...
</body> 
```

# html - 仅在顶部的行高？

> ID：13326034
> 
> 赞同：1
> 
> 时间：2012-11-10T21:00:14.380
> 
> 标签：html, css

我有一个网站：[http ://starthumble.com/](http://starthumble.com/)

菜单在同一页面上具有滚动到锚点的效果。但是，如果您单击“主页”，它会滚动并切断一半的标注文本。我发现如果我设置

```
.companycallout h1 {
    line-height: 5em;
} 
```

然后它正确滚动。唯一的问题是 h2 标签被向下推。我能找到解决方法的唯一方法是

```
.companycallout h1 {
    line-height: 5em;
}
.companycallout h2 {
    margin-top: -90px;
    padding-bottom: 50px;
} 
```

这是最好的解决方案吗？有没有更好的选择？我还没有测试过这个跨浏览器（目前无法访问它）所以我不确定它是否全面兼容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:10:31.583

我会把你的 CSS 恢复到你以前的样子。

您的解决方案是更改您正在使用的 jquery 插件。更具体地说，偏移量（）。您可以为其添加一个值。以下是有关它的更多信息：

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

![在此处输入图像描述](../Images/3fe717ca78a10bf4a147a4e2d60f3842.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:42:27.077

只需将您的 margin-top 更改为 padding top

```
body {
    margin: 0;
    font-family: "Open Sans", Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: 20px;
    color: #333;
    background-color: white;
    padding-top: 80px;} 
```

# python - 创建和查找每个值具有多个键的 2D 字典

> ID：13326042
> 
> 赞同：5
> 
> 时间：2012-11-10T21:01:16.270
> 
> 标签：python, dictionary, nested, key, defaultdict

我想我想制作一个每个值有多个键的二维字典。

我知道如何使用以下方法制作 2D 字典`defaultdict`：

```
from collections import defaultdict
2d_dict = defaultdict(dict)

2d_dict['canned_food']['spam'] = 'delicious' 
```

而且我知道使用常规字典可以使用多个键，例如：

```
dictionary={('food','canned_food'):spam} 
```

但我想做一些类似 tuple-of-keys 的查找：

```
2d_dict[('canned_food','food')]['spam'] = 'delicious' 
```

在字典的第一维中，每个值我需要约 25 个键。有没有办法做到这一点`defaultdict`？

即使有办法用 dicts 来做，这是制作简单多维查找表的合理方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T21:27:47.523

除了`2d_dict`是一个无效的变量名（它以数字开头）之外，您现有的解决方案已经有效：

```
>>> from collections import defaultdict
>>> d2_dict = defaultdict(dict)
>>> d2_dict[('canned_food', 'food')]['spam'] = 'delicious'
>>> d2_dict
defaultdict(<type 'dict'>, {('canned_food', 'food'): {'spam': 'delicious'}}) 
```

事实上，您甚至不需要括号 - Python 仍会将您的键识别为元组：

```
>>> d2_dict['fresh_food', 'food']['eggs'] = 'delicious'
>>> d2_dict
defaultdict(<type 'dict'>, {('canned_food', 'food'): {'spam': 'delicious'},
('fresh_food', 'food'): {'eggs': 'delicious'}}) 
```

...而且，是的，这是构建 2D+1D 查找表的完全合理的方式。

如果您想使用嵌套字典而不是元组键构建 3D 查找表，则可以使用：

```
>>> d3_dict = defaultdict(lambda: defaultdict(dict))
>>> d3_dict['dried_food']['food']['jerky'] = 'chewy'
>>> d3_dict
defaultdict(<function <lambda> at 0x7f20af38a2a8>, 
{'dried_food': defaultdict(<type 'dict'>, {'food': {'jerky': 'chewy'}})}) 
```

# scala - 如何在 scala 中围绕泛型方法包装泛型方法？

> ID：13326043
> 
> 赞同：3
> 
> 时间：2012-11-10T21:01:15.730
> 
> 标签：scala, generic-method, spray-json

我正在尝试包装 spray-json 解析器，使其返回`Option`而不是引发异常。

作为第一步，我只是试图用我自己的方法包装该方法，但我在使其通用时遇到了问题。

解析器使用隐式格式对象（它是为我正在使用的具体类型定义的）但是当该方法是通用的时，编译器会抱怨：

```
[error]     Cannot find JsonReader or JsonFormat type class for T
[error]     def parse[T](s: String): T = JsonParser(s).convertTo[T] 
```

以下是相关代码：

```
case class Person(name: String)

object Protocols {
  implicit val personFormat = jsonFormat1(Person)
}

import spray.json._

object Parser {
  import com.rsslldnphy.json.Protocols._
  // JsonParser(s).convertTo[Person] works fine, but..
  def parse[T](s: String): T = JsonParser(s).convertTo[T]  // .. doesn't
} 
```

我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T21:07:07.360

您需要传递所需的隐式值，这可以使用“上下文绑定”快捷表示法方便地完成：

```
def parse[T : JsonReader](s: String): T =
  JsonParser(s).convertTo[T] 
```

这相当于：

```
def parse[T](s: String)(implicit reader: JsonReader[T]): T =
  JsonParser(s).convertTo[T] 
```

请参阅[Scala 中的“上下文绑定”是什么？](https://stackoverflow.com/questions/2982276/what-is-a-context-bound-in-scala)

# java - 使用字节数组

> ID：13326044
> 
> 赞同：4
> 
> 时间：2012-11-10T21:01:31.450
> 
> 标签：java, arrays, byte

以下代码给出了存储`char`到`byte`. 如何将`fin.read()`函数读取的字节存储到字节数组中并打印出来？

```
import java.io.FileInputStream;

class IO {
    public static void main(String args[]) {
        int i;
        int j = 0;
        FileInputStream fin = new FileInputStream("file.txt");
        byte[] b = new byte[100];
        do {
            i = fin.read();
            j++;
            b[j] = (char) i;
        } while (i != -1);
        System.out.println(b);
    }
} 
```

输出：

```
possible loss of precision
found   : char
required: byte
            b[j] =(char) i;
                  ^
1 error 
```

我如何使它工作？将文件读入字节数组然后显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:07:56.533

[您可以使用InputStream.read(byte [])](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read%28byte%5B%5D,%20int,%20int%29)直接读入字节数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:05:14.773

将以下行更改`b[j] = (char) i;`为`b[j] = (byte) i;`.

它会给你另一个编译器错误。但第一个问题将得到解决。

第一个不起作用，因为 Java 使用 Unicode 作为`char`类型，所以它有两个字节。您将`int`值转换为，`char`但随后尝试将其分配给`byte`变量，为此您必须显式转换为`byte`，这既不是 C 也不是 C++。

您还可以考虑使用更直接的方法`fin.read(b)`，在您的情况下最多读取`100`字节并在达到 EOF 时返回 -1。这样您就不必`i`显式转换为`byte`.

例如像这样：

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Arrays;

class IO {
    public static void main(String args[]) {
        byte[] b = new byte[100];
        try (FileInputStream fin = new FileInputStream("file.txt");) {
            while (true) {
                int i = fin.read(b);
                if (i < 0) {
                    break;
                }
                if (i < b.length) {
                    b = Arrays.copyOf(b, i);
                }
                System.out.println(Arrays.toString(b));
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T21:06:02.013

读取文件并打印：

```
 File file = new File("C:\\MyFile.txt");
    FileInputStream fis = null;
    BufferedInputStream bis = null;
    DataInputStream dis = null;

    try {
      fis = new FileInputStream(file);

      // Here BufferedInputStream is added for fast reading.
      bis = new BufferedInputStream(fis);
      dis = new DataInputStream(bis);

      // dis.available() returns 0 if the file does not have more lines.
      while (dis.available() != 0) {

      // this statement reads the line from the file and print it to
        // the console.
        System.out.println(dis.readLine());
      }

      // dispose all the resources after using them, you need to move this to the finally block and check for null!!
      fis.close();
      bis.close();
      dis.close();

    } catch (FileNotFoundException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T21:07:14.350

尝试使用[Apache Commons IO](http://commons.apache.org/io)[`FileUtils.readFileToByteArray(file)`](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html)中的方法。这比手动编写代码更简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-10T21:18:01.497

对于您的问题，答案很简单。您正在将 int 转换为 char 但您想将其存储为字节。因此，您必须在对话期间将其转换为字节。IE

```
import java.io.*;
class IO{
public static void main(String args[]){
    int i;
    int j=0;
    FileInputStream fin = new FileInputStream("file.txt");
    byte[] b = new byte[100];
    do{
        i= fin.read();
        j++;
        b[j] =(byte) i;
    }while( i != -1);
    System.out.println(b);
}

} 
```

此外，您不需要将其读取为 int。直接读取为字符或字节。

# python - 如何使所有数字在python中保留两位小数？

> ID：13326049
> 
> 赞同：0
> 
> 时间：2012-11-10T21:01:59.223
> 
> 标签：python

> **可能重复：**
> [在 Python 中显示带有两位小数的浮点数](https://stackoverflow.com/questions/6149006/display-a-float-with-two-decimal-places-in-python)

如何强制python中的所有数字在它们之后输出两位小数？

例如

0.5 应该是 0.50

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T21:30:18.720

The [format mini language](http://docs.python.org/2/library/string.html#formatspec) is preferred these days (since the `%` format operator [may be deprecated one day.](http://www.python.org/dev/peps/pep-3101/)):

```
>>> print '{:.2f}'.format(.5)
0.50 
```

Plus, IMHO, string.format() is easier to read.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T21:03:07.333

```
>> print '%.2f' % 0.5
0.50 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T21:05:56.257

要打印数字：

```
print "%.2f" %num 
```

将数字存储在变量中：

```
round(num, 2) 
```

# windows-xp - 如何使用 GPO 登录脚本提升的权限在本地系统上运行 WMI 命令？

> ID：13326052
> 
> 赞同：2
> 
> 时间：2012-11-10T21:02:56.100
> 
> 标签：windows-xp, wmi, administrator, wmic, gpo

我想从 GPO 部署的用户登录脚本运行 WMI 查询以收集用户信息。

问题是[用户必须是管理员组的成员才能运行 WMIC](http://msdn.microsoft.com/en-us/library/windows/desktop/aa826699%28v=vs.85%29.aspx#account_needed_to_run_wmi_command-line_tools)，而我无法授予这些特定域用户管理员权限。

是否可以在本地 Windows XP 系统上的 GPO 登录脚本中以提升的权限运行 WMIC，以便在受限（非管理员）用户登录时工作？

澄清一下，这个问题与 WMI 与远程系统的连接无关。这是关于在本地系统上运行 WMIC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:08:51.797

真的很有趣，好问题。不幸的是，答案是“不，这做不到”。登录脚本始终使用用户的凭据运行。

作为一种解决方法，您可以改为让登录脚本“通知”或标记用户 X 已登录的监视脚本，然后该脚本将开始与用户登录的计算机的互惠 WMI 会话。然后 WMIC 将在具有管理员权限的管理服务器上启动，并针对刚刚发送登录的主机运行。当然，WMI 权限变得非常挑剔，您需要通过`impersonationLevel=Impersonation`在代码中设置来运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-12T14:44:28.980

您是否尝试使用 PowerShell？可以从 CMD 运行的基本示例：

```
powershell.exe -command "gwmi win32_userprofile" 
```

# jquery - jTicker 插件的无限循环

> ID：13326058
> 
> 赞同：0
> 
> 时间：2012-11-10T21:03:43.160
> 
> 标签：jquery, jquery-plugins

我有一个 jQuery 效果，可以像打字机一样输入简单的文本，或者如果您手动输入它。我需要效果等待几秒钟，删除所有文本，然后重新输入。所以我希望它创造一个“无限”的循环效果。

这是我正在使用的代码：

```
<script type="text/javascript" SRC="js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" SRC="js/jquery.jticker.js"></script>
<script type="text/javascript">
<!--
jQuery(document).ready(function(){
    // Instantiate jTicker 
    jQuery("#ticker").ticker({
        cursorList:  "|",
        rate:        150,
        delay:       4000
    }).trigger("play").trigger("stop");
});
//-->
</script>
<div id="ticker">
    <p>typed out text...</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:23:26.543

试试这个。

```
var delayMilliSecs = 4000;
jQuery(document).ready(function() {
    var tickerSelector = $("#ticker p");
    var originalLength = tickerSelector.length;
    RunTicker();
    window.setInterval(function() {
        if (tickerSelector.length === originalLength) {
            RunTicker();
        }
    }, delayMilliSecs);
});

function RunTicker() {
    jQuery("#ticker").ticker({
        cursorList: "|",
        rate: 150,
        delay: delayMilliSecs
    }).trigger("play").trigger("stop");
}​ 
```

演示：http: [//jsfiddle.net/codovations/jNtqa/](http://jsfiddle.net/codovations/jNtqa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T05:34:36.017

我为此使用了一个简单的解决方案

```
jQuery(document).ready(function(){

    var repeat_interval = 10000;

    // Instantiate jTicker 
    jQuery("#ticker").ticker({
        cursorList:  " ",
        rate:        70,
        delay:       100,
    }).trigger("play").trigger("stop");

    setInterval(function(){ jQuery("#ticker").trigger("play") },repeat_interval);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T20:26:31.047

解决方案：

```
}).trigger("play").trigger("stop"); 
```

为了：

```
}).trigger({type: "play"}); 
```

# iphone - UIScrollView 在 SSCollectionView 中没有滚动到底部（弹回）

> ID：13326060
> 
> 赞同：0
> 
> 时间：2012-11-10T21:03:47.633
> 
> 标签：iphone, objective-c, ios, uiscrollview, sstoolkit

我正在使用 SSCollectionView 在网格中显示图像。我在滚动时遇到问题。最后一行的项目没有完全显示。我必须向下滚动才能看到它们，但滚动视图会反弹回来（所以它并没有真正滚动到它们）。

SSCollectionView 的滚动视图无法更改；只能检查。

我还能在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:03:28.603

这听起来像您的内容大小没有正确调整。确保`height`滚动视图的内容大小足够，并在需要时进行调整。

# html - 纯 HTML 文件的分页

> ID：13326064
> 
> 赞同：1
> 
> 时间：2012-11-10T21:04:07.777
> 
> 标签：html, pagination

我在根文件夹中有 index.html 文件：

```
/2/index.html
/3/index.html
/4/index.html
/5/index.html
…
/467/index.html
/468/index.html
…
/lastpagenumber/index.html 
```

如何创建一个分页脚本，从这些文件夹的名称（`1`, `2`, `3`, `4`, `5`... `467`, `468`... `lastpagenumber`）创建 URL？换句话说，我需要以某种方式解析服务器以创建 URL 并检测用户目前在哪个页面上。所以我想在每一页上都有一个简单的分页，比如：

**1** 2 3 下一页 最后一页

上一页 1 2 **3** 4 5 下一页 最后一页

**467** 469 468 最后一页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:48:41.410

你应该阅读整篇文章，然后尝试以你的风格去做；

文章很简单：

1.  尝试捕获实际页面值，如果通过 GET 发送，步骤 6
2.  设置每页的最大文章值
3.  查询数据库表，提取所有需要的文章
4.  看看你有多少页：ceil(total_articles/articles_per_page)
5.  使用 for 循环 i 打印页面
6.  通过 GET 发送页码，在按钮单击事件上，然后再次转到第 1 步

来源：[分页](http://php.about.com/od/phpwithmysql/ss/php_pagination.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:08:15.100

好吧，我认为使用纯 HTML 是不可能的，因为您必须执行一些评估。

您可以做的是在顶部放置一个 java 脚本并创建一个可以“手动”执行的循环。您应该将`<div>`所有页面中的 javascript 放在单独的 script.js 文件中，并从所有 html 页面中引用它。因此，所有页面都将引用一个脚本，您可以在其中手动调整页面数量（如果是 468）

检查一下，让我知道它是否有效：

```
<div id="pages"> </div>

<script>
    getCurrentPage();

    function getCurrentPage(){

        currentPage = getDirectoryName();
        for (i=0; i<468; i++){
            curdoc = document.getElementById("pages").innerHTML;
            if (i==(currentPage*1)){
                 createLink = ' <a href=/'+i+'/index.html><b>'+i+'</b></a> | ';
                document.getElementById("pages").innerHTML = curdoc+ '' +createLink;
            }else{
                createLink = ' <a href=/'+i+'/index.html>'+i+'</a> | ';
                document.getElementById("pages").innerHTML = curdoc+ '' +createLink;
            }
        }
    }

    function getDirectoryName(){
        var file, n;
        file = window.location.pathname;
        pathArray = file.split("/");
        directoryName = pathArray[(pathArray.length)-2];
        return(directoryName);
    }

</script> 
```

# sql-server - 根据交易生成发票并将发票编号放入交易列

> ID：13326069
> 
> 赞同：0
> 
> 时间：2012-11-10T21:04:21.377
> 
> 标签：sql-server, sql-server-2008

**案子**

您好，我正在构建一个客户忠诚度系统，客户可以使用个人忠诚度卡来赚取积分并使用该积分购买商品。通常，我们与三方打交道：

*   忠诚度提供者（管理整个系统的现金流）
*   商店（-owners / -employees）（可以向客户出售或赠送积分或从客户那里获取积分）
*   客户（可以赚取或购买积分/使用赚取或购买的积分购买产品）

每周，供应商需要根据未结交易为给定的时间段内为每个商店生成发票。

100 点等于 1 欧元，-，所以基本上每一欧分（0.01 欧元）在我们的系统中都是一个点。

假设一个商店员工向客户出售 10 欧元的积分（1000 积分），这将产生以下交易：

```
| RecordId | Description | Credit | Debit | State | CreationDate ... CardId | LocationId | InvoiceId |
| (ID)     | (Descr.)    | 1000   | 0     | Open  | ...                     | 10001      | NULL      | 
```

现在，客户购买了 3 欧元的产品，-。这将生成以下事务：

```
| RecordId | Description | Credit | Debit | State | CreationDate ... CardId | LocationId | InvoiceId |
| (ID)     | (Descr.)    | 0      | 300   | Open  | ...                     | 10001      | NULL      | 
```

那周晚些时候，同一位顾客还将在同一家商店以 2 欧元的价格购买另一种产品。这将生成以下事务：

```
| RecordId | Description | Credit | Debit | State | CreationDate ... CardId | LocationId | InvoiceId |
| (ID)     | (Descr.)    | 0      | 200   | Open  | ...                     | 10001      | NULL      | 
```

另一个客户购买了 25 欧元的积分（2500 积分） 这将生成以下交易：

```
| RecordId | Description | Credit | Debit | State | CreationDate ... CardId | LocationId | InvoiceId |
| (ID)     | (Descr.)    | 2500   | 0     | Open  | ...                     | 10001      | NULL      | 
```

该客户购买了 4 欧元的产品，-（400 分） 这将产生以下交易：

```
| RecordId | Description | Credit | Debit | State | CreationDate ... CardId | LocationId | InvoiceId |
| (ID)     | (Descr.)    | 0      | 400   | Open  | ...                     | 10001      | NULL      | 
```

所以店主需要向供应商支付 (1000 - (300 + 200) = 500) + ((2500 - 400) - 2100) = 26 欧元。

* * *

**发票**

商店员工应在周末收到包含以下数据的发票

```
Period Invoice - Week X

Period Start:  dd-mm-yyyy
Period End:  dd-mm-yyyy

Points sold: 3500
Points collected: 900
------------------------ -
Total: 2600

To pay: € 26,- 
```

在某些情况下，店主可能只拿到钱，在这种情况下发票将是负数。

* * *

**数据库**

好吧，我将只描述此查询所需的表。

*发票*

```
[RecordId] [int] IDENTITY(10001,1) NOT NULL,
[Description] [varchar](50) NULL,
[ToPay] [int] NOT NULL,
[ToReceive] [int] NOT NULL,
[Total] [int] NOT NULL,
[PeriodStart] [datetime] NOT NULL,
[PeriodEnd] [datetime] NOT NULL,
[State] [varchar](10) NOT NULL,
[PaidDate] [datetime] NULL,
[CreatedDate] [datetime] NOT NULL,
[UpdatedDate] [datetime] NOT NULL,
[DeletedDate] [datetime] NULL,
[LocationId] [int] NOT NULL 
```

*交易*

```
[RecordId] [int] IDENTITY(10001,1) NOT NULL,
[Description] [varchar](50) NOT NULL,
[Credit] [int] NOT NULL,
[Debit] [int] NOT NULL,
[State] [varchar](10) NOT NULL,
[CreatedDate] [datetime] NOT NULL,
[UpdatedDate] [datetime] NOT NULL,
[DeletedDate] [datetime] NULL,
[CustomerId] [int] NOT NULL,
[EmployeeId] [int] NOT NULL,
[CardId] [int] NOT NULL,
[LocationId] [int] NOT NULL,
[InvoiceId] [int] NOT NULL 
```

* * *

**查询**（到目前为止）

Is 能够编写（嗯，复制）一个 StoredProcedure 来获取特定时期的所有未结交易：

```
INSERT INTO [Invoices] ([Description], [ToPay], [ToReceive], [Total], [PeriodStart], [PeriodEnd], [LocationId])
SELECT
@Description AS [Description],
SUM([Credit]) AS [ToPay],
    SUM([Debit]) AS [ToReceive],
    SUM([Credit]) - SUM([Debit]) AS [Total],
    @PeriodStart AS [PeriodStart],
    @PeriodEnd AS [PeriodEnd],
    [LocationId]
FROM
    [Transactions]
WHERE
    [State] = 'Open' AND
    [CreatedDate] BETWEEN @PeriodStart AND @PeriodEnd
GROUP BY [LocationId] 
```

选择给出以下结果：

```
| ToPay | ToReceive | Total | PeriodStart | PeriodEnd | LocationId |
| 3500  | 900       | 2600  | (Start)     | (End)     | 10001      | 
```

并将插入到 [Invoices] 表中。

* * *

**问题**

通过使用上面的查询，每个位置（商店）都会在给定的时间段内获得它自己的记录。因此，每个位置都会在 [Invoices] 表中获得发票记录。

[RecordId] 列每插入一次（身份）递增一

这就是我卡住的地方：每次创建记录后，需要将其 [RecordID] 写入 [Transactions] 表（在 [InvoiceId] 列中），用于在 [Invoices] 表中生成新记录的记录，还需要将交易的 [State] 列从“Open”更改为“Invoice”

我知道能够获取最新记录的 Recordid

```
SCOPE_IDENTITY(); 
```

谁能告诉我该怎么做？

* * *

**结果**（应该是这样）

当店主请求他/她的发票详细信息时，可以通过按 InvoiceId 选择所有交易来解决交易：

```
SELECT * FROM [Transactions] WHERE [InvoiceId] = @InvoiceId 
```

* * *

**附加信息**

系统运行 MSSQL 2008，前端运行 MS MVC3 (C#)。

**更新**：我不得不稍微改变我的数据模型。

PS Appologies for my (not so gooed) English。

**更新**

好的，我通过添加来修复它

```
UPDATE [Transactions] SET
[Transactions].[State] = 'Invoice',
[Transactions].[InvoiceId] = [Invoices].[RecordId]
FROM
[Transactions]
INNER JOIN
[Invoices]
ON
[Transactions].[CreatedDate] BETWEEN @PeriodStart AND @PeriodEnd 
```

但我认为这只是一个技巧，而不是这样做的方法。我认为这不正确的原因是，两个查询之间的表（假设添加了一个事务）可以改变吗？他们都在同一个存储过程中。现在这没关系，因为交易是在午夜时分解析的，当时商店关门了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:40:39.157

好的，我通过添加来修复它

```
UPDATE [Transactions] SET
    [Transactions].[State] = 'Invoice',
    [Transactions].[InvoiceId] = [Invoices].[RecordId]
FROM
    [Transactions]
INNER JOIN
    [Invoices]
ON
    [Transactions].[CreatedDate] BETWEEN @PeriodStart AND @PeriodEnd 
```

但我认为这只是一个技巧，而不是这样做的方法。我认为这不正确的原因是，两个查询之间的表（假设添加了一个事务）可以改变吗？他们都在同一个存储过程中。现在这没关系，因为交易是在午夜时分解析的，当时商店关门了。

# php - 我怎样才能使我的搜索范围更广？

> ID：13326070
> 
> 赞同：0
> 
> 时间：2012-11-10T21:04:23.797
> 
> 标签：php, mysql

我创建了这个搜索 mysql 字符串，它是文字还是非文字？例如，如果我搜索 Dave，它只会找到“Dave something”之类的项目，而不会找到 Dave。

```
$queryArtist = mysql_query("SELECT * FROM artists WHERE artist LIKE '%$ArtistNameSearch%' ORDER BY artist ASC"); 
```

我知道 mysql_query 已经过时了，一旦我解决了这个问题，就会将其更改为 mysqli。卡在这里。

一个不工作的 [例子是搜索的例子](http://www.thelyricsfinder.com/searchlyrics.php?term=one%20direction)

可能是因为 %20 空间吗？

我弄明白了，但它仍然找不到一个方向或其他东西，即使那些存在。这就是我现在所拥有的

```
$queryArtist = mysql_query("SELECT * FROM artists WHERE match(artist) against('$SafeSearchTerm' in boolean mode)"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:07:06.847

您可能希望使用[全文索引](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)而不是`LIKE`语句来获得更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:22:00.003

也许使用 Soundex 或听起来像。看到这个[页面](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

# wpf - 当我验证 WPF DatePicker 控件时，我收到此错误字符串未被识别为有效日期时间

> ID：13326071
> 
> 赞同：0
> 
> 时间：2012-11-10T21:04:28.087
> 
> 标签：wpf, c#-4.0

我有一个 WPF 应用程序，其中 WPF Toolkit DatePicker 控件绑定到 DateTime 变量，如下所示：

```
<myToolkit:DatePicker Grid.Row="4" Grid.Column="4" x:Name="clndrHiredate" HorizontalAlignment="Left" Height="20" Width="150" VerticalAlignment="Top" FontFamily="Tahoma" FontWeight="Light" FlowDirection="RightToLeft" SelectedDate="{Binding bindingDate,StringFormat='{}{0:MM/dd/yyyy}', Mode=TwoWay}" />

<Button Grid.Row="8" Grid.Column="4" Style="{StaticResource GlassButton}" x:Name="btnRead" Height="29" Content="Read" FontSize="14" Foreground="White" HorizontalContentAlignment="Center" FontFamily="Arial" FontWeight="Bold" Background="#FF47594E" Margin="64,13,31,196" Width="65" /> 
```

我的代码：

```
private DateTime bindingDate = DateTime.Now;

private void btnRead_Click(object sender, RoutedEventArgs e)
{
      if (string.IsNullOrEmpty(clndrHiredate.SelectedDate.ToString()))
      {
          errorText += MessageBox.show("Wrong");
          state = true;
          lblHireDate.Visibility = Visibility.Visible;
      }
      else
      {
          // complete 
      }
} 
```

但是当我运行它时，我收到错误消息“字符串未被识别为有效的日期时间。”

如果有任何错误，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:35:25.320

更改`SelectedDate.ToString()`以`DateTime.TryParse(clndHireDate.Text)`查看它是否是有效的日期时间。

# android - Android自定义键盘xml文件

> ID：13326072
> 
> 赞同：0
> 
> 时间：2012-11-10T21:04:29.767
> 
> 标签：android, xml, eclipse, layout, keyboard

> **可能重复：**
> [创建自定义 android 键盘布局](https://stackoverflow.com/questions/5091674/creating-custom-android-keyboard-layout)

我开始开发自己的 ime，但我坚持使用 xml 文件。Eclipse 似乎无法找到 Keyboard、Row 和 Key 类。谁能告诉我如何解决这个问题或如何用 java 编写一个 ime 布局？如果此描述缺少信息，请随时告诉我。无论如何，首先感谢大家，它表明了这一点： `NOTE: This project contains Java compilation errors, which can cause rendering failures for custom views. Fix compilation problems first.`

`"" does not set the required layout_width attribute: (1) Set to "wrap_content" (2) Set to "match_parent" "" does not set the required layout_height attribute: (1) Set to "wrap_content"` 如果我设置 layout_widht 属性，它会显示：

`NOTE: This project contains Java compilation errors, which can cause rendering failures for custom views. Fix compilation problems first.`

`com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup Exception details are logged in Window > Show View > Error Log The following classes could not be found: - Keyboard (Fix Build Path, Edit XML) - Row (Fix Build Path, Edit XML)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T21:22:14.037

您可以在网站上跟进一些链接

[为android应用程序设置自定义键盘](https://stackoverflow.com/questions/1858950/set-custom-keyboard-for-android-application)

[创建自定义 android 键盘布局](https://stackoverflow.com/questions/5091674/creating-custom-android-keyboard-layout)

[如何为安卓开发软键盘？](https://stackoverflow.com/questions/3480715/how-to-develop-a-soft-keyboard-for-android)

还有一些非现场开源程序

[http://code.google.com/p/hackerskeyboard/](http://code.google.com/p/hackerskeyboard/)

[http://code.google.com/p/softkeyboard/](http://code.google.com/p/softkeyboard/)

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/example/android/softkeyboard/SoftKeyboard.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/example/android/softkeyboard/SoftKeyboard.java)

[http://www.java2s.com/Code/Android/User-Event/Exampleofwritinganinputmethodforasoftkeyboard.htm](http://www.java2s.com/Code/Android/User-Event/Exampleofwritinganinputmethodforasoftkeyboard.htm)

标准android输入法概述

[http://jayxie.com/mirrors/android-sdk/resources/articles/on-screen-inputs.html](http://jayxie.com/mirrors/android-sdk/resources/articles/on-screen-inputs.html)

还有一个教程

[http://android-developers.blogspot.co.uk/2009/04/creating-input-method.html](http://android-developers.blogspot.co.uk/2009/04/creating-input-method.html)

还有更多，我可以继续阅读 - 先做你的研究！

# php - 将用户照片添加到数据库

> ID：13326073
> 
> 赞同：0
> 
> 时间：2012-11-10T21:04:38.377
> 
> 标签：php, mysql

我的问题是将图像的文件路径添加到数据库中的用户插槽。这是一个示例，这是要选择照片的页面：

```
 require_once("script.php");   
   <form method="post" action='golf.php'>
<?php
 require_once("golf_phot.php");
?>
</div>
<input id="butt" type="submit" value="add"/>
</form> 
```

这是 golf_photo.php 的内容：

```
$query="SELECT category_id FROM categories WHERE category_name='golf'";
$resultt=mysql_query($query);
$row=mysql_fetch_array($resultt);
$do=$row['category_id'];
$query2="SELECT photo FROM all_photos WHERE all_photos.category_id='$do'";
$result=mysql_query($query2); 
while ($row=mysql_fetch_array($result))
{
 $photo=$row['photo'];
 echo "<input type=\"checkbox\" name=\"addlist[]\" value=\"".$photo."\">"."<img    src=\"".$photo."\">";
echo "<br>";
echo "<br>";
echo "<br>";
} 
```

我已经做了mysql连接和数据库选择，我不会发布，但它没有问题。以下是“script.php”的内容：

```
if(isset($_POST['addlist']))
{
$pics=$_POST['addlist'];
$n=count($pics);
//now, to open the database user_info, using the stored session

//make the session variable legit
if(isset($_SESSION['user']))
{
$user=$_SESSION['user'];
}
//get the user's id from the user_info table
$querya="SELECT * FROM user_info WHERE user_info.fb_id='$user'";
$result1=mysql_query($querya);
//now that we have the id, we can add the photos to 
//user_photos, using their id as a foreign key
if(mysql_num_rows($result1)>0){
$rowa=mysql_fetch_array($result1);}
$user_id=$rowa['USER_INFO_ID'];
//before we add them, we'll need to see whether they exist or not.
//adding time:
for($i=0;$i<$n;$i++){
$data=$pics[$i];
$queryb="SELECT * FROM user_photos";
$result3=mysql_query($queryb);
if(mysql_num_rows($result3)>0){
while($rowa=mysql_fetch_array($result3))
{
$data2=$rowa['USER_PHOTOS'];
if($data==$data2)
{ $var='exists';   }
else{
$queryb="INSERT INTO user_photos(USER_PHOTOS_ID,USER_INFO_ID,USER_PHOTOS) VALUES('NULL','".$user_id."','".$data."')";
$result2=mysql_query($queryb);
}
}
}
} 
```

// 选择的照片添加到用户的画廊！用户数据变量全部设置为我在其他地方使用它们并且它们已成功添加到数据库中，上面，我提供了一种查看照片是否已经存在的方法，如果存在我不添加它（也许有一个问题用那个？）所以基本上，加载了带有照片的页面，用户检查他们想要的照片，然后将其发送到同一页面，其中“script.php”应该处理数据并将其添加到数据库中. 没有照片被添加到数据库中，我真的不知道这里有什么问题。我恳请帮助，即使这可能是一个简单的问题，如果您需要我澄清一些事情，请询问，同时，有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:37:59.023

检查图片是否相同的一种解决方案是，对图片使用哈希算法来确定相同的图片。

即：（伪代码）

```
$hash=sha1_file('pic-filename');

$sql='select * from image_table where hash_col ='.$hash;

if(num_rows($sql)>0)
  //don't save pic.
else
  // save the pic and it's hash value. 
```

*   hash_col 是图像表中的一列，用于获取特定图像的哈希值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:09:56.313

**请在您的 script.php 中尝试此代码。希望这对你有用。**
我已经删除了条件`if(mysql_num_rows($result3)>0){`

**代码：**

```
if(isset($_POST['addlist']))
    {
    $pics=$_POST['addlist'];
    $n=count($pics);
    //now, to open the database user_info, using the stored session

    //make the session variable legit
    if(isset($_SESSION['user']))
    {
    $user=$_SESSION['user'];
    }
    //get the user's id from the user_info table
    $querya="SELECT * FROM user_info WHERE user_info.fb_id='$user'";
    $result1=mysql_query($querya);
    //now that we have the id, we can add the photos to 
    //user_photos, using their id as a foreign key
    if(mysql_num_rows($result1)>0){
    $rowa=mysql_fetch_array($result1);}
    $user_id=$rowa['USER_INFO_ID'];
    //before we add them, we'll need to see whether they exist or not.
    //adding time:
    for($i=0;$i<$n;$i++){
    $data=$pics[$i];
    $queryb="SELECT * FROM user_photos";
    $result3=mysql_query($queryb);

    while($rowa=mysql_fetch_array($result3))
    {
    $data2=$rowa['USER_PHOTOS'];
    if($data==$data2)
    { $var='exists';   }
    else{
    $queryb="INSERT INTO user_photos(USER_PHOTOS_ID,USER_INFO_ID,USER_PHOTOS) VALUES('NULL','".$user_id."','".$data."')";
    $result2=mysql_query($queryb);
    }

    }
    } 
```

# c++ - 模板 char/wchar_t、string/wstring、cout/wcout、regexp/wregex（或任何可能的解决方法）

> ID：13326075
> 
> 赞同：1
> 
> 时间：2012-11-10T21:05:12.157
> 
> 标签：c++, string, templates, wstring, widestring

我正在处理`char`和`wchar_t`。

我正在编写一个辅助字符串类，它将一些正则表达式（带有提升）添加到一些字符串，但我同时拥有`string`和`wstring`. 现在我有 2 个函数，每个函数都有重复的代码。

```
int countFoo(const char *s, const char *foo) {
    string text(s);

    boost::regex e(foo);

    int count = 0;
    boost::smatch match;
    while ( boost::regex_search( text, match, e ) ) {
        text = match.suffix();    
        count++;
    }
    return count;
}
int countFoo(const wchar_t *s, const wchar_t *foo) {
    wstring text(s);

    boost::wregex e(foo);

    int count = 0;
    boost::wsmatch match;
    while ( boost::regex_search( text, match, e ) ) {
        text = match.suffix();    
        count++;
    }
    return count;
} 
```

它有效，但我正在寻找一些优雅的方法（模板？一些 oop 魔术？函数指针？）来删除重复的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:15:12.823

你可以把它写成这样的模板：

```
template <typename charT>
int countFoo(const charT *s, const charT *foo) {
    basic_string<char> text(s);

    boost::basic_regex<charT> e(foo);

    int count = 0;
    boost::match_results<typename basic_string<charT>::const_iterator> match;
    while ( boost::regex_search( text, match, e ) ) {
        text = match.suffix();    
        count++;
    }
    return count;
} 
```

# ssas - 表格模式下基于计算量度的判别

> ID：13326077
> 
> 赞同：0
> 
> 时间：2012-11-10T21:05:14.247
> 
> 标签：ssas, sql-server-2012

我目前正在尝试在表格模式 SSAS 上实现以下场景，感谢您的支持。

我们有一个关联到客户维度的交易事实表，我们有一个称为频率的度量，它显示了用户在选定期间使用他的卡的次数（事实表也链接到日期维度）。我们需要做的是创建一个具有如下频率组的维度（例如，1 到 5、5 到 10、10 到 15 和 15 及以上）。这里的问题是我无法将 Fact 表链接到这个维度，因为它们之间的链接将是一个计算的度量。

有什么想法吗？

谢谢和最好的问候

奥马尔苏丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:25:13.203

如果要将事实链接到存储桶维度，则必须指定时间粒度。我建议您确定一个或多个有用的时间段（日、周、月）并创建一个（或多个）事实，以适当的粒度存储您的数据。

此解决方案将失去您原始请求的灵活性，因为用户将无法动态选择存储桶的时间段，但是他们将从能够比较固定时间段以识别随时间变化的趋势中受益。

# java - 需要 JAVA/JAXB 帮助

> ID：13326078
> 
> 赞同：2
> 
> 时间：2012-11-10T21:05:19.483
> 
> 标签：java, jaxb

这会很长，但我需要一些启发。我是 JAXB 的新手，所以请对我宽容。

课程应用：

```
package Courses;

import java.io.File;
import java.util.ArrayList;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;

public class CoursesApp {
    public static void main(String[] args) {
            Courselist courselist = new Courselist();
            courselist.setclassType("Lecture");
            courselist.setcourseCode("2002");
            courselist.setgroupIndex("1");
            courselist.setprofessor("Professor James");
        try{
            File file = new File("C:\\Courselist.xml");
            JAXBContext jaxbContext = JAXBContext.newInstance(Courselist.class);
            Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

            jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

            jaxbMarshaller.marshal(courselist, file);
            jaxbMarshaller.marshal(courselist, System.out);

        }catch(JAXBException e)
        {
            e.printStackTrace();
        }
    }
} 
```

课程表：

```
package Courses;

import java.util.List;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Courselist {

    String courseCode;
    String classType;
    String groupIndex;
    String professor;

    public String getcourseCode() {
        return courseCode;
    }

    @XmlElement
    public void setcourseCode(String courseCode) {
        this.courseCode = courseCode;
    }

    public String getclassType() {
        return classType;
    }

    @XmlElement
    public void setclassType(String classType) {
        this.classType = classType;
    }

    public String getgroupIndex() {
        return groupIndex;
    }

    @XmlElement
    public void setgroupIndex(String groupIndex) {
        this.groupIndex = groupIndex;
    }

    public String getprofessor() {
        return professor;
    }

    @XmlElement
    public void setprofessor(String professor) {
        this.professor = professor;
    }
} 
```

输出：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
- <courselist>
  <classType>Lecture</classType> 
  <courseCode>2002</courseCode> 
  <groupIndex>1</groupIndex> 
  <professor>Professor James</professor> 
  </courselist> 
```

我想要的是在同一个 XML 中创建另一个课程列表实例：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
- <courselist>
  -<course>
     <classType>Lecture</classType> 
     <courseCode>2002</courseCode> 
     <groupIndex>1</groupIndex> 
     <professor>Professor James</professor>
   </course>
  -<course>
     <classType>Lecture</classType> 
     <courseCode>2003</courseCode> 
     <groupIndex>2</groupIndex> 
     <professor>Professor John</professor> 
   </course>
  </courselist> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:19:51.983

我建议在 CourseList 中有一个成员：`List<Course>`何时`Course`将包括当前在`CourseList`.
这是代码：

```
@XmlRootElement
public class Courselist {
    @XmlElement List<Course> course = new ArrayList<Course>();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:22:42.877

**课程表**

正如[**oshai 回答**](https://stackoverflow.com/a/13326184/383861)的那样，我将有一个具有两个类`Courselist`和`Course`. 下面是这个`Courselist`类的样子。为了匹配 Java 编程约定，包名通常是小写的。此外，它也经常基于域名（例如`com.example.courses`）。默认情况下[**，JAXB（JSR-222）**](http://jcp.org/en/jsr/detail?id=222)`get`实现在属性（或方法）上查找元数据，`set`所以我把它们放在那里（参见：[http ://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to .html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)）。

```
package courses;

import java.util.List;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Courselist {

    List<Course> courses;

    @XmlElement(name="course")
    public List<Course> getCourses() {
        return courses;
    }

    public void setCourses(List<Course> courses) {
        this.courses = courses;
    }

} 
```

**课程**

你在`Courselist`课堂上的信息我已经搬到了一个新的`Course`班级。JAXB 是异常配置，因此您只需在希望 XML 表示不同于默认值的地方添加注释。在您的用例中，您不需要对此类进行任何注释（请参阅：[http](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html) ://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html ）。我已经修复了您的属性方法的大小写以匹配正常的 Java 编码约定。

```
package courses;

public class Course {

    String courseCode;
    String classType;
    String groupIndex;
    String professor;

    public String getCourseCode() {
        return courseCode;
    }

    public void setCourseCode(String courseCode) {
        this.courseCode = courseCode;
    }

    public String getClassType() {
        return classType;
    }

    public void setClassType(String classType) {
        this.classType = classType;
    }

    public String getGroupIndex() {
        return groupIndex;
    }

    public void setGroupIndex(String groupIndex) {
        this.groupIndex = groupIndex;
    }

    public String getProfessor() {
        return professor;
    }

    public void setProfessor(String professor) {
        this.professor = professor;
    }

} 
```

# python - Pygame 基于图块的移动速度

> ID：13326085
> 
> 赞同：1
> 
> 时间：2012-11-10T21:06:45.443
> 
> 标签：python, 2d, pygame

感谢您抽时间阅读。现在我正在制作一个非常基本的基于瓷砖的游戏。地图是大量的 16x16 瓦片，人物图像也是 16x16。我的角色有自己的类，它是 sprite 类的扩展，x 和 y 位置是按照 tile 位置保存的。

需要注意的是，我对 pygame 相当缺乏经验。

我的问题是，我计划一次将角色移动限制在一个瓷砖上，我不确定如何做到这一点，即使玩家快速按下方向键数十次，（WASD 或箭头键) 它只会以一定的速度从一个瓷砖移动到另一个瓷砖。我怎么能用pygame实现这个？（类似于 Pokemon 或 NexusTk 等游戏动作）。一个动作将导致玩家在牌中。例如，他们不能在瓷砖之间停下来。

谢谢你的时间！瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:39:46.873

您将角色位置存储为网格坐标。因此，如果他在 (2,0)，他会在 (32,0) 处渲染。游戏然后动画他在瓷砖之间移动，但是，他要么在一个上，要么在另一个上。在移动状态下，您渲染 0 到 tilewidth 之间的 (x,y) 偏移量。

如果时间已过/动画已完成，听起来您希望每次按键移动一次。所以：

1.  在按键时，切换到：动画状态
2.  设置目标瓦片坐标
3.  根据经过的时间绘制偏移量，介于`0`和之间。如果时间小于<= 1 秒，将在 0 到 16 之间缩放。`tilewidth``offset = (elapsed_ms / 1000.) * tile_w`
4.  一旦经过的时间 >= 动画长度（我在上面选择了 1000.），切换到静止状态。

如果在动画状态下发生按键，请忽略它。

[Pygame 示例：使用 numpy 作为地图数组。](https://stackoverflow.com/a/12665286/341744)

![pygame 演示截图](../Images/7c8f068a33a2b458539c3b3db7a74b30.png)

# html - 在应用栏外使用 Windows 8 默认图标集

> ID：13326087
> 
> 赞同：3
> 
> 时间：2012-11-10T21:07:04.707
> 
> 标签：html, windows-8

是否可以使用可在应用栏之外的应用栏中使用的 Windows 8（javascript）图标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:04:49.897

更准确地说，这段代码复制了相同的行为和设计，并且还支持下面的图标标签：

```
<button class="win-command win-global win-hidefocus" id="btnCamera" role="menuitem" aria-label="Camera" type="button">
    <span tabindex="-1" class="win-commandicon win-commandring" aria-hidden="true">
        <span tabindex="-1" class="win-commandimage" aria-hidden="true">&#xE114;</span>
    </span>
    <span tabindex="-1" class="win-label" aria-hidden="true">Front Camera</span>
</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:07:04.707

如果您希望它是图像而不是字体中的字符（并且 Google 没有给出任何有用的结果），即使您知道提取所有正确的样式需要一段时间，这也很难找到，所以在这里分享这个似乎是个好主意。

下面我包含了一个有效复制按钮的示例：

```
<button style="border:2px solid black;min-width:0px;min-height:0px;border-radius:50%;height:41px;line-height:37px;width:41px;font-size:14pt;box-sizing:border-box;padding:0px; background:white;color:black;font-family: 'Segoe UI', 'Ebrima', 'Nirmala UI', 'Gadugi', 'Segoe UI Symbol', 'Meiryo UI', 'Khmer UI', 'Tunga', 'Lao UI', 'Raavi', 'Iskoola Pota', 'Latha', 'Leelawadee', 'Microsoft YaHei UI', 'Microsoft JhengHei UI', 'Malgun Gothic', 'Estrangelo Edessa', 'Microsoft Himalaya', 'Microsoft New Tai Lue', 'Microsoft PhagsPa', 'Microsoft Tai Le', 'Microsoft Yi Baiti', 'Mongolian Baiti', 'MV Boli', 'Myanmar Text', 'Cambria Math'; display: inline-block; text-align: center;" type="button">&#xE124;</button> 
```

对于字符代码，我建议查看标准样式 xml 文件中的 C++ 网络商店项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T22:18:10.253

为时已晚，但我分享了我如何实现这一目标的片段：

**无标签：**

```
<button id='buttonid' class='win-commandring win-commandicon' title='tooltip'>&#xE159;</button> 
```

**带标签：**

```
<div style='text-align:center'>
<button class='win-commandring win-commandicon'>&#xE159;</button><br>
Save as
</div> 
```

**不要忘记在每个字符代码后使用`Semi-colon`( `;`)。*

如果您想查看*图标的字符代码，*则 ->

**打开 ：**

```
Start Menu -> Type " character Map " -> Press Enter 
```

现在一个`Window opens -> Select -> Font : 'Segoe UI Symbol'`

请参阅下文，您可以在其中找到***WINDOWS 8 上 ICONS的所有字符代码***

![图标集 WINDOWS 8](../Images/0dab3af904097619154dc19581b047a2.png)

也许它会有所帮助！

# c# - 将代码中的标签控件重置为原始 XAML？

> ID：13326095
> 
> 赞同：1
> 
> 时间：2012-11-10T21:07:22.850
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我有一个带有一堆标签的 C# WPF 应用程序。当我运行我的程序时，它会进行一些检查，无论检查是否为正，它都会将其对应的标签设置为绿色或红色。这些更改在我的 .cs 文件中完成，例如：

```
lblCheck14.Foreground = new SolidColorBrush(Colors.Green); 
```

我想添加一个“重置”按钮，将应用程序重置为初始启动。我怎样才能最容易地实现这一点？

一种方法 - 但我真的希望有一种更聪明的方法，将它们全部设置为：

```
 lblCheck14.Foreground = new SolidColorBrush(Colors.Black);
    lblCheck21.Foreground = new SolidColorBrush(Colors.Black);
    lblCheck42.Foreground = new SolidColorBrush(Colors.Black); 
```

ETC..

但是是否有一个我可以调用的函数去除 .cs 文件对 XAML 文件中的控件所做的任何更改？就像让 XAML 回归库存一样？

对不起我的解释。希望你能理解我 ：）

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:09:58.700

实现样式。当您点击重置时，您可以有一个默认样式来回滚。

如果您不熟悉它们，请查看本教程：[http ://wpftutorial.net/Styles.html](http://wpftutorial.net/Styles.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:45:31.313

不要在代码中操作 UIElements 的属性。WPF不是winforms。正如 Yatrix 的回答所说，实现样式，甚至数据模板和触发器，以根据某些逻辑（在 ViewModel 或其他地方定义）操作不同 UIElements 的不同属性。我建议你看看[WPFTutorial.net](http://www.wpftutorial.net/)

# firefox - Firefox 自定义工具栏按钮

> ID：13326096
> 
> 赞同：0
> 
> 时间：2012-11-10T21:07:24.693
> 
> 标签：firefox, touch, toolbar

我正在尝试创建一个 firefox 工具栏按钮，单击该按钮时会调用（或调用） TapTip.exe，它是我的 Windows 平板电脑的触控键盘。我已经尝试按照本教程（https://developer.mozilla.org/en-US/docs/XUL/Toolbars/Custom_toolbar_button）让我的按钮工作，但到目前为止没有运气。无论如何我可以完成这项任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:49:57.537

我通过使用名为 Custom Buttons for Firefox 的插件找到了解决此问题的方法，然后我找到了一个 Launch IE 按钮，我将其修改为调用 TapTip.exe 而不是 IE

# go - 为什么不能同时为结构及其指针定义方法？

> ID：13326099
> 
> 赞同：7
> 
> 时间：2012-11-10T21:07:57.593
> 
> 标签：go

鉴于golang 之旅的[第 54 张幻灯片中的设置：](http://tour.golang.org/#54)

```
type Abser interface {
    Abs() float64
}

type Vertex struct {
    X, Y float64
}

func (v *Vertex) Abs() float64 {
    return math.Sqrt(v.X*v.X + v.Y*v.Y)
} 
```

为什么不能为结构以及指向结构的指针定义方法？那是：

```
func (v Vertex) Abs() float64 {
    return math.Sqrt(v.X*v.X + v.Y*v.Y)
} 
```

定义它会产生以下错误：

```
prog.go:41: method redeclared: Vertex.Abs
    method(*Vertex) func() float64
    method(Vertex) func() float64 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T21:19:39.993

它可以。只需在结构而不是指针上定义它。它将解决两种方式

[方法集](http://golang.org/ref/spec#Method_sets)

> 对应指针类型*T的方法集是所有接收者为*T或T的方法的集合（即也包含T的方法集）

现场直播：[http ://play.golang.org/p/PsNUerVyqp](http://play.golang.org/p/PsNUerVyqp)

```
package main

import (
    "fmt"
    "math"
    )

type Abser interface {
    Abs() float64
}

type Vertex struct {
    X, Y float64
}

func (v Vertex) Abs() float64 {
    return math.Sqrt(v.X*v.X + v.Y*v.Y)
}

func main() {
    v := Vertex{5, 10}
    v_ptr := &v
    fmt.Println(v.Abs())
    fmt.Println(v_ptr.Abs())
} 
```

*更新：*根据评论，我创建了一个额外的示例，它实际上利用`Abser`接口来说明值和指针都满足接口。

[https://play.golang.org/p/Mls0d7_l4_t](https://play.golang.org/p/Mls0d7_l4_t)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T21:16:03.840

在考虑例如：

```
type T U

func (t *T) M() int { return 1 }

var t T 
```

...我们现在可以通过编写调用`M()`on ，因为语言允许调用带有指针接收器的方法，即使在其底层（非指针）类型实例上，即它变得等价于.`t``t.M()``(&t).M()`

如果现在允许额外定义：

```
func (t T) M() int { return 2 } 
```

...那么没有办法告诉现在`t.M()`应该返回什么。

# php - 调整这个嵌套 for 循环的性能

> ID：13326102
> 
> 赞同：0
> 
> 时间：2012-11-10T21:08:02.880
> 
> 标签：php, performance

这是我的代码：

```
 $size_all_colonies = sizeof($all_colonies) ;
    $size_all_coods = sizeof($all_cood) ;
    for ( $i = 0 ; $i < $size_all_colonies  ; $i++ )
    {
        $id = $all_colonies[$i]['id'] ;
        $colony_name = $all_colonies[$i]['colony_name'] ;
        $colony_node = $dom->createElement('colony');
        $response->appendChild($colony_node);
        $colony_text_node = $dom->createTextNode($colony_name) ;
        $colony_node->appendChild($colony_text_node) ;

        $id_node = $dom->createElement('id_node') ;
        $colony_node->appendChild($id_node) ;
        $id_node->appendChild($dom->createTextNode($id)) ;

        $coods = "" ;
        for ( $j = 0 ; $j < $size_all_coods ; $j++ )
        {
            if ( $id == $all_cood[$j]['colony_id'] )
            {

                $coods .= $all_cood[$j]['latitude'].",".$all_cood[$j]['longitude'].";" ;
               // break ; 
            }
        }
        $coods =substr($coods,0,-1);
        $cood_node = $dom->createElement('cood_node') ;
        $colony_node->appendChild($cood_node) ;
        $cood_node->appendChild($dom->createTextNode($coods)) ;
        echo $id . '   ' ;
    } 
```

解释：

> all_colonies = 是一个多维数组 - 大小 - 7000
> 
> all_coods - 另一个多数组 - 大小 70000
> 
> all_cood[$j]['colony_id'] 是外键，对应 all_colonies[$i]['id']。

这是为 ajax 请求构建响应，理想情况下应该需要几分钟，但需要几个小时 :( 。它会逐渐减慢，就像前 1000 次循环/迭代（外部 for）在 30 秒内发生，但下一千只需要几分钟，而下一千只需要几分钟。

请帮忙！

谢谢

编辑：不需要break语句！我在迫切希望提高性能时添加了，但它不应该存在..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:26:59.333

您可以尝试将 all_coods 变量设置为由 id 索引，而不仅仅是一个数组。这样，您将节省内部循环的时间。

例如：

```
$list = tons of stuff

//now, loop through the stuff once to generate 
//the assoc array that's indexed by IDs
$listMap = array();
foreach($list as $item) {
    $listMap[$item['id']] = $item;
}

//the main looping
foreach(loop an array) {
    if(isset($listMap[$id])) {
        //you just saved looping through the other array.
    }
} 
```

# c# - 如何使用多个类在屏幕上绘制重叠的游戏分数？

> ID：13326104
> 
> 赞同：1
> 
> 时间：2012-11-10T21:08:41.227
> 
> 标签：c#, xna

我当前的分数输出是在屏幕左上角写了两次“SCORE：0”（一个用红色字母，另一个用黄色），但位置略有不同，以使字母/数字具有复古的重叠外观。只有一个分数，但两层分数相同。

问题是只有分数的红色层更新，而黄色层保持在 0。

我正在使用以下代码在 FontManager 类（见下文）中创建我的 ScoreFont 类的两个对象，它们具有不同的颜色/位置，以提供重叠的感觉（红色上的黄色）；

```
fontList.Add(new ScoreFont(Game.Content.Load<SpriteFont>(@"Fonts\Score"), scoreText, new Vector2 (5, -5), Color.Yellow, 1f, 0f));
//Adding this to make the score font stick out more by layering it
fontList.Add(new ScoreFont(Game.Content.Load<SpriteFont>(@"Fonts\Score"), scoreText, new Vector2(9, -5), Color.Red, 1f, 0.1f)); 
```

您会注意到创建的第一个 ScoreFont 对象是黄色的（我正在尝试修复的那个），第二个是红色的（显示正确分数的那个）。如果我颠倒这些，那么黄色会起作用，但红色不会。

我正在使用 for 循环更新/绘制 FontManager 类中的列表；

```
for (int i = 0; i < fontList.Count; i++)
        {
            Font f = fontList[i];
            f.Draw/Update(gameTime, sB);
        } 
```

从 Font.cs 类派生的 ScoreFont.cs 类包含；

```
class ScoreFont : Font
{
public string scoreText;
public int totalScore = 0;

public static ScoreFont sF;
//Constructor
public ScoreFont(parameters)
:base (parameters)
{sF = this;}

//Add score
public void AddScore(int score)
{
    totalScore += score;
}
//Draw
public override void Draw(GameTime g, SpriteBatch s)
{
scoreText = "Score: " + totalScore;
s.DrawString(scoreText,blah, blah, ...);
} 
```

当精灵离开屏幕时，我通过在不同的类中调用 AddScore 方法来更新分数；

```
ScoreFont.sF.AddScore(spriteList[i].score); 
```

如果我只创建乐谱的一层，但当我尝试创建两层时，最上面的层（黄色层）不会更新，这很有效。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:25:03.873

除了非常尴尬地使用 Font 类之外，您的问题还在于：

```
ScoreFont.sF.AddScore(spriteList[i].score); 
```

你为什么不在你所有的 fontList 项目中循环来为每个项目设置新的分值？

```
foreach(ScoreFont font in fontList)
    font.AddScore(myScore); 
```

您使用静态字段名称实现单例模式，`sF`但不知何故您有多个实例要更新。

或者，如果您的计划是只有一个分数，那么`AddScore`和`totalScore`字段也应该是静态的。

# google-chrome-extension - 将 webrequest api 与事件页面一起使用

> ID：13326105
> 
> 赞同：40
> 
> 时间：2012-11-10T21:09:07.450
> 
> 标签：google-chrome-extension

将 webrequest api 与事件页面一起使用时，出现错误：

> 'webRequest' API 不能用于事件页面。

在网上看，我发现了这个话题：[http ://code.google.com/p/chromium/issues/detail?id=119613](http://code.google.com/p/chromium/issues/detail?id=119613)

我的问题：为什么我们不能（或如何）同时使用两者？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-07-31T19:21:56.050

对于那些不想使用新的[Event Pages](https://developer.chrome.com/extensions/event_pages.html)并希望坚持使用[Background Pages](https://developer.chrome.com/extensions/background_pages.html)的人，请确保`"persistent": true`在清单文件的`background`属性中进行设置。

```
"background": {
    "scripts": ["bootstrap.js"],
    "persistent": true
  }, 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-10T23:29:15.793

Found [declarativeWebRequest API](http://developer.chrome.com/extensions/declarativeWebRequest.html), that would be the solution.

Avalaible now in dev and beta channels.

# windows-runtime - 如何获取当前的 LayoutAwarePage？

> ID：13326107
> 
> 赞同：3
> 
> 时间：2012-11-10T21:09:14.240
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml

我不是在询问当前 LayoutAwarePage 的类型

```
Type type = ((Frame)Window.Current.Content).CurrentSourcePageType; 
```

但是关于当前页面的实例，我需要访问它的属性

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T21:39:06.060

```
var frame = (Frame)Window.Current.Content;
var page = (LayoutAwarePage)frame.Content; 
```

# css - 容器外的元素而不创建滚动条

> ID：13326111
> 
> 赞同：5
> 
> 时间：2012-11-10T21:09:46.310
> 
> 标签：css, scrollbar

如果窗口太窄，我可以在不创建水平滚动条的情况下使横幅到达其容器之外吗？

我以为我以前用负利润做过这个，但现在不能让它工作。

演示：http: [//jsfiddle.net/Znarkus/s95uz/](http://jsfiddle.net/Znarkus/s95uz/)

```
<div id="main">
    <div id="banner">I want this to not create a horizontal scrollbar, when the window/frame is too narrow.</div>
    <div id="content">

    </div>
</div> 
```

​</p>

![](../Images/a1473f87f414102a61a21990fe10e0c4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T00:30:43.993

您可以使用最小宽度为 500 像素或宽度为 100% 的容器，具体取决于您是否需要滚动条或根本不需要滚动条；添加相对位置，并隐藏溢出，然后在其中添加另一个容器，该容器是您设置的 500px 宽度，左右边距为 auto。使用绝对位置将您的内容放在内部容器中；在这种情况下，您的#banner 是正确的：-50px;

我在这里修改了你的小提琴：http: [//jsfiddle.net/s95uz/14/](http://jsfiddle.net/s95uz/14/)

```
<style type="text/css">
#main {
min-width:500px;
margin: 0 auto;    
position: relative;
overflow: hidden;
}
#inside{
width:500px;
margin:0 auto;
height:100%;
position:relative;
background: red;
}
#banner {
background: green;
position: absolute;
right: -50px;
width: 150px;
height: 300px;
}
#content {
width: 400px;
height: 500px; /* Simulate content */
background: blue;
}
</style>

<div id="main">
   <div id="inside">
      <div id="banner">
    I want this to not create a horizontal scrollbar, when the window/frame is too narrow.</div>    
      <div id="content"></div>
   </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:08:05.490

当内容加上横幅高于视口时，您可以使用响应式 CSS 并隐藏横幅：

```
@media only screen and (max-width: 550px) {
        #banner { display: none;}
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:13:45.170

只需将 overflow : hidden 添加到 div “main” css。

将此添加到元素会隐藏可能的条件侧边栏。

你的新 CSS 看起来像；

```
#main {
    width: 500px;
    margin: 0 auto;
    background: red;
    position: relative;
    overflow:hidden;
} 
```

# c - 我只看到主机而不是设备的“世界你好”

> ID：13326115
> 
> 赞同：1
> 
> 时间：2012-11-10T21:10:16.173
> 
> 标签：c, parallel-processing, cuda, gpu

我使用此站点[http://code.google.com/p/stanford-cs193g-sp2010/wiki/TutorialHelloWorld在 cuda 中复制了一个 hello world 程序](http://code.google.com/p/stanford-cs193g-sp2010/wiki/TutorialHelloWorld)

代码是

```
#include "util/cuPrintf.cu"
#include <stdio.h>

__global__ void device_greetings(void)
{
  cuPrintf("Hello, world from the device!\n");
}

int main(void)
{
  // greet from the host
  printf("Hello, world from the host!\n");

  // initialize cuPrintf
  cudaPrintfInit();

  // launch a kernel with a single thread to greet from the device
  device_greetings<<<1,1>>>();

  // display the device's greeting
  cudaPrintfDisplay();

  // clean up after cuPrintf
  cudaPrintfEnd();

  return 0;
} 
```

然后使用编译，`nvcc hello_world.cu -o hello_world`但是我只看到 hello fom 主机而不是设备。

我什至试过

```
printf("{CudaPrintfInt => %s}\n",cudaGetErrorString(cudaPrintfInit()));
printf("{cudaPrintfDisplay => %s}\n",cudaGetErrorString(cudaPrintfDisplay(stdout, true))); 
```

并用 编译`nvcc -arch=sm_11 hello_world.cu -o hello_world`，但是我得到：

```
$ ./hello_world
Hello, world from the host!
{CudaPrintfInt => initialization error}
{cudaPrintfDisplay => __global__ function call is not configured}
$ 
```

图形模型为：

```
$/sbin/lspci -v | grep VGA
07:01.0 VGA compatible controller: Matrox Graphics, Inc. MGA G200eW WPCM450 (rev 0a) (prog-if 00 [VGA controller]) 
```

cuda版本是4：

```
$ ls /usr/local/cuda/lib/
libcublas.so         libcudart.so.4.0.17  libcurand.so.4         libnpp.so
libcublas.so.4       libcufft.so          libcurand.so.4.0.17    libnpp.so.4
libcublas.so.4.0.17  libcufft.so.4        libcusparse.so         libnpp.so.4.0.17
libcudart.so         libcufft.so.4.0.17   libcusparse.so.4
libcudart.so.4       libcurand.so         libcusparse.so.4.0.17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:46:00.343

"If you are on a CC 2.0 GPU, you don't need cuPrintf at all -- CUDA has printf built-in for CC-2.0 and higher GPUs. So just replace your call to cuPrintf for the actual prinft" ([source](https://stackoverflow.com/questions/6565759/cuda-cuprintf-causes-unspecified-launch-failure))

Put you code this way just to check what is causing this problem.

```
#include <cuda_runtime.h>
#include "util/cuPrintf.cu"
#include <stdio.h>
__global__ void device_greetings(void)
{
  cuPrintf("Hello, world from the device!\n");
}

  int main(void)
  {
  // greet from the host
  printf("Hello, world from the host!\n");

  // initialize cuPrintf
  printf("{CudaPrintfInt => %s}\n",cudaGetErrorString(cudaPrintfInit()));

  // launch a kernel with a single thread to greet from the device
  device_greetings<<<1,1>>>();

  // display the device's greeting
  printf("{cudaPrintfDisplay => %s}\n",cudaGetErrorString(cudaPrintfDisplay()));

  // clean up after cuPrintf
  cudaPrintfEnd();

  return 0;
} 
```

[Here](http://graphics.im.ntu.edu.tw/~bossliaw/nvCuda_doxygen/html/driver__types_8h.html#a3a0f0698952a02dc73221d9f21e6906f) say that happen because : "The device function being invoked (usually via cudaLaunch()) was not previously configured via the cudaConfigureCall() function."

# java - 在 Jbox2d (java) 中处理图像

> ID：13326116
> 
> 赞同：0
> 
> 时间：2012-11-10T21:10:19.867
> 
> 标签：java, jbox2d

我试图让图像移动而不是 jbox2d 中的几何形状。我没有看到图像。

```
BodyDef bodyDef =new BodyDef();
        bodyDef.position.set(100,100);
        bodyDef.type=BodyType.DYNAMIC;
        //texture=TextureLoader.getTexture("PNG",ResourceLoader.getResourceAsStream("resources/small.png"));
        BufferedImage img = null;
        try {
            img = ImageIO.read(new File("resources/small.png"));
        } catch (IOException e) {
        }
        bodyDef.userData=img; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:42:32.653

**JBox2D**基于**Box2D**引擎，它是一个物理引擎，与视觉无关。您必须在程序的主循环中自己绘制图像，该方法通常称为`render()`.

# rss - 如何自动让谷歌阅读器发送 ping 到集线器更新提要（PubSubHubBub）？

> ID：13326117
> 
> 赞同：1
> 
> 时间：2012-11-10T21:10:21.863
> 
> 标签：rss, websub

每当我的 rss-feed 更新时，我都会尝试从 Google Reader 接收实时通知。为此，我在阅读器中创建了一个公用文件夹，并订阅了它的中心 (pubsubhubbub.appspot.com)。当集线器将其验证 ping 发送到我的回调（在我的服务器上）时，我返回 hub.challenge 并在订阅详细信息页面 (pubsubhubbub.appspot.com/subscription-details) 上查看它已被验证。

但是，在此之后，什么也没有发生；每当我的提要更新时，Google 阅读器似乎都不会 ping 回调，因此我没有收到提要的任何更新。[但是，当我通过https://pubsubhubbub.appspot.com/publish](https://pubsubhubbub.appspot.com/publish) “公开”该主题时，Google 确实会发送一个 ping，而我的回调函数确实会收到提要的更新。

我希望 Google 阅读器在提要更新时自动将 ping 发送到集线器。我应该如何做到这一点？阅读[http://googlereader.blogspot.nl/2009/08/pubsubhubbub-support-for-reader-shared.html](http://googlereader.blogspot.nl/2009/08/pubsubhubbub-support-for-reader-shared.html)上的文章，这似乎是自动完成的，但我似乎真的无法让它工作？

谢谢大家，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:15:13.587

根据您的描述，当提要更新时，Google Reader 似乎无法 ping 其集线器......这意味着您几乎无能为力，除了每次手动 ping 集线器。那会破坏我猜的目的。

另一个解决方案是查看[http://superfeedr.com](http://superfeedr.com)（我创建的，抱歉插件！），因为我们会轮询我们无法检测更新的提要；因此，在您的提要中发布新内容后，您最多会在 15 分钟内收到 ping。不完美，但至少完全自动化。

# c# - XNA：如何测量按键被按住的时间？

> ID：13326130
> 
> 赞同：2
> 
> 时间：2012-11-10T21:11:40.957
> 
> 标签：c#, xna, sprite

我正在尝试在我的游戏中创建一个跳跃机制，它的工作原理如下：

//velocity.Y是我要跳跃的精灵的速度

```
 if (keystate.IsKeyDown(Keys.W))
         {
             velocity.Y = 3 - (time elapsed since start of jump);
         } 
```

我认为这可能是让我的精灵跳跃的一个简单而优雅的解决方案，但如果这样不可能，那就这么说吧，它又回到了绘图板上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:49:36.603

我建议不要将物理直接连接到玩家输入，这不是一个非常可扩展的架构。

具有定义物理属性的接口，例如由角色对象实现的速度。当玩家按下向上键时，您应该检查玩家是否在地面上，如果他们将加速度设置为向上移动。然后让物理系统遍历每个对象的列表，这些对象实现物理接口，在移动实体之前应用重力和其他力。通过这种方式，您可以为游戏中的每个实体使用相同的物理代码。

我还建议不要将键盘输入直接连接到播放器的移动。您可以有一个名为“ICharacterController”的接口，它定义了一个“nextInstruction”方法，该方法返回“CharacterInstructions”，该方法定义了角色可以采取的各种动作，例如跳跃和移动，这可以通过输入类来实现。然后，您的角色类包含对 CharacterController 的引用，因此它只调用 nextInstruction，这样角色可以由玩家输入、AI 或通过网络通信控制，但仍与玩家共享相同的行为。

[如果您对游戏编程很认真，那么Game Coding Complete](http://www.amazon.co.uk/Game-Coding-Complete-Mike-McShaffry/dp/1133776574)是一本很棒的书。

我也可以推荐[游戏引擎架构](http://www.amazon.co.uk/dp/1568814135/ref=asc_df_156881413510514826?smid=A3P5ROKL5A1OLE&tag=googlecouk06-21&linkCode=asn&creative=22206&creativeASIN=1568814135)

当您使用 XNA 时，您应该考虑使用[游戏组件](http://sharpoverride.hubpages.com/hub/Xna-Tip-Organize-your-game-in-components)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:28:00.190

XNA 没有内置方法来检测按压与按住；它只能告诉您当前是否正在按下该*键*。

那么，您需要做的是存储两个 KeyboardState-s，“Old”和“Current”。一旦你有了这个，你就可以检测到按键何时开始（`old.isKeyDown == false && current.isKeyDown == true;`）以及何时结束（`old.isKeyDown == true && current.isKeyDown == false;`

所以一旦你有了这个，当你检测到按键时，根据 GameTime 记录一个“jumpStart”变量，并在检测到按键释放时记录一个“jumpEnd”变量是一件简单的事情。

如果您想根据按住键的时间来确定跳跃的持续时间，最好设置一个上限，之后再按住键没有任何效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:28:18.037

如果在您按住按钮时正在执行速度功能，则不是您正在寻找的内容，而是您可以使用 stopwath 来测量

```
Stopwatch stopWatch = new Stopwatch();
 if (keystate.IsKeyDown(Keys.W))
         {
             velocity.Y = 3 - (time elapsed since start of jump);
             stopWatch.Start();
         }
 if (keystate.IsKeyUp(Keys.W))
{
         stopWatch.Stop();
        TimeSpan ts = stopWatch.Elapsed;

} 
```

更多在这里

[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)

# ruby - Minitest should_not_receive rspec 等效项

> ID：13326131
> 
> 赞同：2
> 
> 时间：2012-11-10T21:11:44.197
> 
> 标签：ruby, minitest

我有一个对象列表，并希望看到一些对象收到对某个方法的调用，而另一些则没有。

我有兴趣在不添加任何额外测试依赖项的情况下执行此操作（因此没有 mocha 或任何其他模拟/存根框架）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T22:02:42.090

您可以编写您的测试并模拟您通常所做的，然后将您的`verify`方法调用包装在一个`assert_raises`.

```
@mock = MiniTest::Mock.new
@mock.expect :update, true
Foo.do_something @mock
assert_raises(MockExpectationError, "update should not be called") do
  @mock.verify
end 
```

# drupal - 视图块以列出相关的分类术语

> ID：13326133
> 
> 赞同：0
> 
> 时间：2012-11-10T21:11:54.670
> 
> 标签：drupal, drupal-7, drupal-views, drupal-taxonomy

我正在尝试创建一个 Views 块，它将列出相关的分类术语。更详细地解释一下：

词汇是：

水果

- 苹果

- 香蕉

- 猕猴桃

在带有 Apple 标记的节点上，我希望该块列出术语 Apple、Banana 和 Kiwi，即具有相同父项的术语。

这在视图中可能吗？我一直在尝试建立正确的关系/论点，但没有走得太远。

任何帮助，将不胜感激。

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:31:29.743

这个模块可以解决问题：http: [//drupal.org/project/views_arg_parent_term](http://drupal.org/project/views_arg_parent_term)

史蒂夫

# excel - VBA代码根据excel中另一列中的值对一列中的值求和

> ID：13326134
> 
> 赞同：2
> 
> 时间：2012-11-10T21:11:58.273
> 
> 标签：excel, vba

我是 VBA 新手，也是这个论坛的新手 - 我已按照“如何提问”页面上的所有说明进行操作 - 我可能遗漏了一些东西，请多多指教

我正在根据以下列标题创建用于项目跟踪的 EV 报告（为简洁起见，仅显示一些）

```
"TaskName" "Status" "BaselineStart" "BaselineFinish" "BaselineEffort" 
```

在检查 BaselineFinish 列中的值是否小于或等于第 7 天的值后，需要以 7 天为增量对 BaselineEffort 列中的值求和

我相信答案在于使用数组，但需要掌握这个概念才能理解它是如何工作的

Pivot 和 Excel 公式对我不起作用，因为表格是动态的，而报表是静态的，我需要在创建报表时消除用户干预

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:55:57.877

假设条件列从 A1 开始，要求和的列从 B1 开始

```
do while not isempty(range("a1").offset(x,0))
  if range("a1").offset(x,0) = SomeValue then
    sum = sum + range("a1").offset(x,0)
  end if
  x = x + 1
loop 
```

这段代码将一直运行，直到它查看了 A 列中的每个项目，如果 A 列中的值等于“SomeValue”，则将 B 列中的值添加到我称为“sum”的总和中。我怀疑您实际上可以使用变量名“sum”。

我希望这很有用。

# cordova - PhoneGap 2.1.0 和 iOS 本地通知

> ID：13326136
> 
> 赞同：2
> 
> 时间：2012-11-10T21:12:17.040
> 
> 标签：cordova, uilocalnotification

我一直在尝试将[Drew Dahlman 的](https://github.com/DrewDahlman/Phonegap-LocalNotification)iOS 本地通知插件集成到我的 PhoneGap 应用程序中。

一直在查看说明[here](http://www.drewdahlman.com/meusLabs/?p=84)和[here](http://www.drewdahlman.com/meusLabs/?p=117)，但还不能让它工作。这些说明似乎更多地适用于旧版本的 PhoneGap，并且与文件夹的 PhoneGap 2.1.0 不匹配。

有没有人能够让这个插件与最近的电话差距版本一起工作？

也欢迎任何其他有关 PhoneGap 的 iOS 本地通知插件的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:35:16.890

我下载了本地通知插件的[工作示例](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/LocalNotification)，并尝试构建它。

没有运气，因为该示例使用的是 Cordova 1.6.0。

[最后，我找到了 PhoneGap 的Upgrading Cordova iOS](http://docs.phonegap.com/en/2.2.0/guide_upgrading_ios_index.md.html)的官方文档，并按照与将项目更新到 Cordova 2.0.0 相关的部分进行操作，这帮助我使示例正常工作。

现在我有了一个使用 Cordova 2.1.0 的工作示例，希望我也能够在我的项目中复制它。

# javascript - 更改不存在元素的 CSS 属性

> ID：13326137
> 
> 赞同：6
> 
> 时间：2012-11-10T21:12:23.137
> 
> 标签：javascript, jquery, html, css

我想更改一组尚未创建的元素的尺寸。它们将由我无权访问的 JavaScript 脚本创建。JQuery 的*css()*函数只会将更改应用于现有项目，而我希望代码能够像在 CSS 文件中设置 CSS 属性一样工作。

任何人都可以帮我做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T21:21:49.800

一种选择是动态创建样式元素：

```
$("<style type='text/css'> .redbold{ color:#f00; font-weight:bold;} </style>").appendTo("head")
$("<div/>").addClass("redbold").appendTo("body"); 
```

取自这里：[在运行时使用 jQuery 创建 CSS 规则/类](https://stackoverflow.com/questions/1212500/jquery-create-css-rule-class-runtime)。

这是一个可能的 IE 替代方案（请参阅[在 jQuery 中创建 CSS 类](https://stackoverflow.com/questions/3393162/creating-a-css-class-in-jquery)）：

```
document.styleSheets[0].addRule('body', 'background: green', -1); 
```

如需参考，请参阅[addRule](http://msdn.microsoft.com/en-us/library/aa358796%28VS.85%29.aspx)的文档。

# java - 如何在 Jersey REST 中处理空/空请求有效负载

> ID：13326142
> 
> 赞同：10
> 
> 时间：2012-11-10T21:13:18.397
> 
> 标签：java, rest, jersey

我有一个使用 Jersey 编写的 RESTful Web 服务，如下所示：

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
public Response myAction(RequestObject requestObject) {
    // do some action
} 
```

请求对象只是一个简单的 DTO：

```
public class RequestObject implements Serializable {
    private String theString;

    // Getter for member
} 
```

当我尝试使用空请求有效负载进行 POST 时，我希望 RequestObject 要么为空，要么 theString 为空。相反，我得到了这个：

**根本原因**

```
java.io.EOFException：由于输入结束，没有要映射到 Object 的内容
    org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2766)
    org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2682)
    org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1308)
    org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:419)
    com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.readFrom(JacksonProviderProxy.java:139)
    com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:483)
    com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)
    com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)
    com.sun.jersey.server.impl.model.method.dispatch.Abs​​tractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)
    com.sun.jersey.server.impl.model.method.dispatch.Abs​​tractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:203)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1480)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1411)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1360)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1350)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)

```

当我使用看起来像这样的请求有效负载发布时，我得到了所需的结果（theString 设置为 null）。：

```
{}
```

**问题：有没有办法接受一个空的请求负载，并在服务器端处理它？**

**注意：**我正在使用 Jersey 提供的 POJO 支持。

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>
</servlet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T00:41:09.493

如果有效负载为空，请尝试实现 ContainerRequestFilter 并中止请求。

```
requestContext.abortWith(Response.status(Response.Status.BAD_REQUEST)
                .entity("Payload is null")
                .build()); 
```

更多细节可以在[这里找到](https://jersey.java.net/documentation/latest/filters-and-interceptors.html)

# python - 在处理其他字段的同时将文件上传到 blobstore

> ID：13326144
> 
> 赞同：1
> 
> 时间：2012-11-10T21:13:25.073
> 
> 标签：python, google-app-engine, blobstore

我有一个带有文件输入和几个文本字段的表单，我想将文件上传到 blobstore，然后处理其余的输入。我从谷歌找到了文档，但我对细节仍然很模糊。如果我有正确的想法，您首先为表单生成一个提交 url，如下所示：

```
 blobstore.create_upload_url('/handlerURL') 
```

其中 handlerURL 是处理常规表单数据（如文本字段等）的请求处理程序的 url

接下来你定义一个`BlobstoreUploadHandler`，这就是我变得模糊的地方......从文档中我了解到`BlobstoreUploadHandler`上传文件的处理然后将重写的请求传递给`\handlerURL`. 在这里的文档中出现了我的困惑：

[https://developers.google.com/appengine/docs/python/tools/webapp/blobstorehandlers](https://developers.google.com/appengine/docs/python/tools/webapp/blobstorehandlers)

数据模型对象的实例在内部创建`BlobstoreUploadHandler`

但是如果我想在请求处理程序中进行额外的处理并使用来自其他字段的数据，`handlerURL`那么这`BlobstoreUploadHandler`将是空的，这是正确的还是我误解了这个过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:59:27.337

BlobstoreUploadHandler 只是清理多部分消息的文件上传部分，您仍然可以使用[webapp](https://developers.google.com/appengine/docs/python/gettingstartedpython27/handlingforms)以标准方式访问表单的其余字段（例如 self.request.get('some_field_in_the _form')）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:10:43.420

这确实有点棘手，因为这里涉及到两个处理程序。

*   第一个来自 blobstore 本身。它的 URL 由 create_upload_url 调用返回。它的任务是保存文件（或文件），并用 blobkey 替换它。然后它只是将表单发布到您的主处理程序。
*   第二个是你定义的。在您的情况下，它的 URL 是 /handlerURL。在大多数情况下，此处使用 BlobstoreUploadHandler，但并非必须如此。BlobstoreUploadHandler 使检索 blobkey 变得更容易，仅此而已。除此之外，它只是一个 webapp.RequestHandler，所以你可以在这里处理你的整个表单

# unix - 产生行首的命令行

> ID：13326146
> 
> 赞同：2
> 
> 时间：2012-11-10T21:13:37.087
> 
> 标签：unix, ubuntu

我有一个格式为

```
string string string ...
string string string ...
...
string string string ... 
```

我想得到另一个文件，这样对于每一行，只有第一个`string`出现在该行中（即只取每行第一个空格之前的部分。）

我怎么能在 Ubuntu 中使用命令行来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:16:21.593

我想你想要这个：

```
awk '{print $1}' < input.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T01:46:46.090

另一种可能的解决方案是使用 cut：

```
cut -f1 -d" " input.txt > output.txt 
```

# javascript - 刷新后保留选择表值

> ID：13326147
> 
> 赞同：1
> 
> 时间：2012-11-10T21:13:45.727
> 
> 标签：javascript

基本上，下面的代码可以正常工作：它根据“rate”的值刷新页面，并在页面刷新后保持页面滚动位置。

我想要做的是添加一个选择表来调整刷新率，或者换句话说，“率”的值。凭借我在 js 方面的一点经验，我能够添加选择表并通过所选值设置速率，问题是当页面刷新时选择表中的值默认为表中的第一个值，在我的情况下为“5” . 第二个问题是，当我更改表中的值时，每次选择新值时页面都会滚动到顶部。

```
var rate = 10; // refresh rate    

function refresh() {
    document.cookie = 'scrollTop=' + filterScrollTop();
    document.cookie = 'scrollLeft=' + filterScrollLeft();
    document.location.reload(true);
}

function getCookie(name) {
    var start = document.cookie.indexOf(name + "=");
    var len = start + name.length + 1;

    if (((!start) && (name != document.cookie.substring(0, name.length))) || start == -1) return null;

    var end = document.cookie.indexOf(";", len);

    if (end == -1) end = document.cookie.length;

    return unescape(document.cookie.substring(len, end));
}

function deleteCookie(name) {
    document.cookie = name + "=" + ";expires=Thu, 01-Jan-1970 00:00:01 GMT";
}

function setupRefresh() {
    var scrollTop = getCookie("scrollTop");
    var scrollLeft = getCookie("scrollLeft");

    if (!isNaN(scrollTop)) {
        document.body.scrollTop = scrollTop;
        document.documentElement.scrollTop = scrollTop;
    }

    if (!isNaN(scrollLeft)) {
        document.body.scrollLeft = scrollLeft;
        document.documentElement.scrollLeft = scrollLeft;
    }

    deleteCookie("scrollTop");
    deleteCookie("scrollLeft");

    setTimeout("refresh()", rate * 1000);
}

function filterResults(win, docEl, body) {
    var result = win ? win : 0;

    if (docEl && (!result || (result > docEl))) result = docEl;

    return body && (!result || (result > body)) ? body : result;
}

// Setting the cookie for vertical position

function filterScrollTop() {
    var win = window.pageYOffset ? window.pageYOffset : 0;
    var docEl = document.documentElement ? document.documentElement.scrollTop : 0;
    var body = document.body ? document.body.scrollTop : 0;
    return filterResults(win, docEl, body);
}

// Setting the cookie for horizontal position

function filterScrollLeft() {
    var win = window.pageXOffset ? window.pageXOffset : 0;
    var docEl = document.documentElement ? document.documentElement.scrollLeft : 0;
    var body = document.body ? document.body.scrollLeft : 0;
    return filterResults(win, docEl, body);
}​ 
```

我没有包括我的尝试，但如果需要，我可以包括它，基本上我只是在寻找正确的方法，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:19:50.470

您可以为此使用[HTML5 规范之一](http://en.wikipedia.org/wiki/Web_storage)进行客户端存储。

# linux - 增加 TCP MTU 是否值得以及 Dont Fragment 标志如何工作

> ID：13326149
> 
> 赞同：2
> 
> 时间：2012-11-10T21:14:41.420
> 
> 标签：linux, networking, tcp

我有一个覆盖 TCP 的自定义协议，可以描述如下：-

客户端向服务器发送数据包 A。服务器确认数据包 A。客户端发送数据包 B。

换句话说，在任何时间点，只有一个未确认的数据包。因此，尽可能快地发送消息的考虑因素是：-

1.  数据包多久可以到达目的地。这意味着 TCP 完成的碎片最少。如果一个数据包可以在单个段而不是 5 个段中到达，则服务器可以更快地响应它。

2.  服务器为该数据包完成的工作单元。目前，我并不专注于这一点，但最终我也会触及它。

3.  还假设，损失率可以忽略不计。

4.  Nagle 被禁用。

5.  典型的数据包大小从 1KB 到 3KB 不等。

6.  带宽为 1Gb/秒

我在想，如果我将 MTU 配置为等于最大消息大小（3KB + 标头），这应该会影响我在一秒钟内可以发送的消息数量。我的问题是更改 MTU 是否有任何负面影响。此应用程序在受管环境中的 LAN 内运行。

或者，如果我设置了不分段标志，它是否等同于上述更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T22:27:15.420

首先，让我们澄清一下 MTU 和 MSS 之间的区别。这些属于堆栈的不同层（2 和 3）。

TCP/IP 是一个很不幸的分层蛋糕，两者都支持分片，但不同的是，他们在这件事上不合作。

IP 碎片是 TCP 不知道的。事实上，如果其中一个 IP 片段丢失，则整个系列都被宣布丢失。TCP 情况并非如此：如果作为同一 TCP 流的一部分的 IP 数据报之一丢失，并且它们被 TCP 分段，则只需要重新传输丢失的部分。

这种混乱的**核心原因**是路由器必须能够在具有不同 MTU 的两个物理网络之间进行阻抗匹配，**而无需了解更高的 (TCP) 协议**。

现在，所有现代网络都支持“巨型帧”（您必须将 NIC 配置为能够发送巨型帧；所有现代 NIC 将始终能够接收高达 90xx 字节的帧）。

像往常一样，随着 MTU 的增加，它是

*   除非你增加 MSS 否则没用
*   提高性能（带宽），以及
*   损害性能（第一个字节的零负载延迟）

在某些应用中，例如 Gigalinx 实现和 GigE 视觉，增加 MTU 是一项要求。在快速网络上，1500 字节 MTU 的开销是无法容忍的。

作为架构师，要问自己的是您的应用程序实际上在做什么。如果存在“相关数据包大小”，从某种意义上说，“直到收到的前 3kB 数据与其余数据无关”，并且您确实需要这个微小的性能优势，请增加 MTU。在此之前，请考虑完全放弃 TCP 以支持对以太网更友好的协议，当然不要自己实现它，而是选择像 ZeroMQ 这样效果很好的东西。

Second question: Do not fragment is an IP setting. Typically useful only in routers, which are expected to match networks of different MTU. It means "discard packet unless I can relay it to the other network". If this is sometimes the case, TCP cannot work over this layer. It will try to retransmit and fail again and again, and eventually disconnect and further behavior will depend on what application is doing. This is a typical situation on the internet, with public misconfigured wifi networks and home networks. You can sometimes browse facebook but not practically watch anything on youtube. This is why. Network administrators would never know the reason.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:35:25.067

MSS = 最大段大小 = 一个 TCP 数据包中发送的数据量。

降低 MSS 会降低性能，因为数据将被分割成更多的 TCP 数据包。

将 MSS 增加到超过其正确值将导致链路层（以太网）上的碎片。

TCP 已经尝试找到（每个连接）不会导致碎片的最大可能 MSS。除非这失败（它没有），否则没有必要覆盖这个值。应避免链路层碎片。它可以节省很少，也很容易损害性能。

除非您知道自己在做什么，否则请勿触摸 MSS。它的价值是有充分理由的。

# ruby-on-rails - Seeds.rb 开发环境也被应用于测试环境

> ID：13326154
> 
> 赞同：0
> 
> 时间：2012-11-10T21:15:14.297
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, tdd

我需要将某些东西植入测试环境，特别是来自 CanCan 的用户角色。但它似乎加载了正在开发的所有内容。

*lib/tasks* */* test_seed.rake

 *```
namespace :db do
  namespace :test do
    task :prepare => :environment do
      Rake::Task["db:seed"].invoke
    end
  end
end 
```

在运行 bundle exec rake db:test:prepare 后正确地拉入了 seed.rb

*分贝/种子.rb*

```
admin = Role.create( { name: "admin" }, :without_protection => true)
user  = Role.create( { name: "user"  }, :without_protection => true)

if Rails.env.production? || Rails.env.development?

  admin = User.create!({ name:     "Admin",
                         email:    "admin@example.com",
                         password: "foobar",
                         password_confirmation: "foobar",
                         role_ids:  1 },
                         :without_protection => true)
  admin.confirm!    

  if Rails.env.development?

    48.times do |n|
      name  = Faker::Name.name
      email = "example-#{n+1}@example.com"
      password  = "foobar"
      fake = User.create!({ name:     name,
                            email:    email,
                            password: password,
                            password_confirmation: password },
                            :without_protection => true)
      fake.confirm!
    end
  end
end 
```

一切看起来都不错，但随后......

```
$ rails console test
Loading test environment (Rails 3.2.8)
  > User.first
User Load (1.0ms) SELECT "users".* FROM "users" LIMIT 1
  => #<User id: 1, email: "admin@example.com" ..................
  > Rails.env.development?
  => false 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:54:30.460

您必须在启动任务之前将环境变量设置为`ENV`。`test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:45:30.840

也许，您正在为开发和测试环境使用相同的数据库。检查你的 database.yml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T12:53:25.077

首先，尝试在终端中执行它： `echo $RAILS_ENV`

*   如果它显示，`test`那么你有你的答案。
*   如果不是，请验证您`config/database.yml`是否在两个环境中使用相同的数据库。

也验证您的`config/environment.rb`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T12:45:12.733

尝试执行：

`$ RAILS_ENV=test rake db:seed`*

# bash - 在 bash 中，如何分析我的脚本某些部分的运行时间？

> ID：13326158
> 
> 赞同：3
> 
> 时间：2012-11-10T21:16:08.310
> 
> 标签：bash, shell

在 Java 程序中，我通常使用以下函数来分析时间信息：

```
...
long start = System.currentTimeMillis();
...
...
System.out.println("elapsed time 1: "+(System.currentTimeMills() - start));
...
...
start = System.currentTimeMillis();
...
System.out.println("elapsed time 2: "+(System.currentTimeMills() - start));
... 
```

如何在 shell bash 中做类似的事情？此外，如果有循环，如何收集累积时间？

例如

```
for ((i=0;i<$lines;i=i+$step))
do    
    head -$((i+step)) $1 | tail -$step > tmp1
    head -$((i+step)) $2 | tail -$step > tmp2
    setstr=$setstr' '`./accuracy.sh tmp1 tmp2`
done
echo $setstr | awk '{for (i=1;i<=NF;i++) sum+=$i; }END{print sum/NF}' 
```

我想分别分析累积的`head/tail`时间和`accuracy.sh tmp1 tmp2`时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T21:18:00.873

您可以使用适当命名的命令为您希望计时的命令添加前缀`time`。

例如：

```
time find . -type f -name hello_world.cc 
```

或者在你的情况下：

```
time head -$((i+step)) $1 | tail -$step > tmp1
time head -$((i+step)) $2 | tail -$step > tmp2
time setstr=$setstr' '`./accuracy.sh tmp1 tmp2` 
```

请注意，时间输出到`tty`，因此您不必担心写入时间的结果`tmp1`等`tmp2`。

如果您想实时查看总运行时间（因为脚本已经开始运行）更新，您可以这样做：

在脚本开始时，记下系统时间：

```
start_timestamp=$(date +%s) 
```

然后启动您的实际脚本 main：

```
# Do your execution here 
```

然后在您的循环中，无论您想查看到目前为止已用时间的输出

```
curr_timestamp=$(date +%s)
elapsed_time=$(expr $end_time - $start_time)
echo "Elapsed: $elapsed_time" >> elapsed_time.log 
```

# variables - 如何使用变量简化此 vim 快捷方式？

> ID：13326159
> 
> 赞同：1
> 
> 时间：2012-11-10T21:16:17.053
> 
> 标签：variables, vim

我找到并修改了一些 vimrc 代码，用于注释掉 vim 的当前行/块：

```
"
" Commenting blocks
"
autocmd FileType c,cpp,java noremap <buffer> <Leader>c :s,^\(\s*\)[^// \t]\@=,\1// ,e<CR>:nohls<CR>zvj
autocmd FileType sh,python  noremap <buffer> <Leader>c :s,^\(\s*\)[^# \t]\@=,\1# ,e<CR>:nohls<CR>zvj
autocmd FileType vim        noremap <buffer> <Leader>c :s,^\(\s*\)[^\" \t]\@=,\1\" ,e<CR>:nohls<CR>zvj

autocmd Filetype c,cpp,java noremap <buffer> <Leader>u :s,^\(\s*\)// \s\@!,\1,e<CR>:nohls<CR>zvj
autocmd Filetype sh,python  noremap <buffer> <Leader>u :s,^\(\s*\)# \s\@!,\1,e<CR>:nohls<CR>zvj
autocmd Filetype vim        noremap <buffer> <Leader>u :s,^\(\s*\)\" \s\@!,\1,e<CR>:nohls<CR>zvj 
```

原始代码使用这些`autocmd FileType`行来设置一个变量来定义该行的注释。它看起来类似于：

```
autocmd FileType c,cpp,java let b:cmtldr=//
autocmd FileType sh,python  let b:cmtldr=#
autocmd FileType vim        let b:cmtldr=\"

noremap <buffer> <Leader>c :s,^\(\s*\)[^&b:cmtldr \t]\@=,\1&b:cmtldr ,e<CR>:nohls<CR>zvj 
```

但这对我不起作用，它只是粘贴在文字字符串“&b:cmtldr”中（我也试过不带&），所以我把它改成了第一块代码。然而，我的强迫症不会让我放过它。我已经搜索了如何在这种情况下在 vim 中使用变量，但我尝试过的没有任何帮助。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:27:50.130

您在这里有两个错误的语法：

1.  `:let`与 不同`:set`，所以你必须在这里使用表达式，让我们看起来像`let b:cmtldr="\""`.
2.  您无法将变量的值放入正则表达式中，您必须使用`\=`它来将其放入替换字符串中。更好地使用`:execute`或`<C-r>`在这里：

    ```
    noremap \c :s,\v(\s*)(\V<C-r>=escape(b:cmdldr, '\,')<CR>\v|\s)@!,\=submatch(1).b:cmtldr,e<CR>:nohl<CR>zvj 
    ```

    （我猜你并不是真的要在`<buffer>`这里：它只会对你从命令行打开的第一个文件启用评论。）

* * *

为什么要重新发明轮子，已经有很多评论插件了？我个人使用 NERD 评论者。它可以配置为用于`\c`评论，默认情况下它`<Leader>cc`以这种方式用于评论（有更多可用选项）。

# excel - 在 VBA 中设置范围

> ID：13326162
> 
> 赞同：0
> 
> 时间：2012-11-10T21:17:07.783
> 
> 标签：excel, vba

> **可能重复：**
> [在 VBA 中调用范围](https://stackoverflow.com/questions/13319813/calling-on-a-range-in-vba)

我正在为此任务尝试此代码。我注意到，当我没有将范围设置为名称时，代码可以工作，但是当我将数据块命名为“rng”时，代码会给我一个错误。我在这段代码中做错了什么？谢谢！

```
Sub Macro2()
Dim rng As Range

Set rng = ActiveCell.CurrentRegion.Copy
Cells(1, "d").Select

rng.PasteSpecial Paste:=xlPasteValues, Operation:=xlPasteValues
Application.CutCopyMode = False

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:23:06.577

`Range.Copy`不返回复制的范围。它将范围复制到剪贴板并返回一个`Boolean`值。

当您粘贴时，您会调用`PasteSpecial`工作表上的目标区域，而不是“复制”范围。

```
Dim source as Range, target as Range

Set source = ActiveCell.CurrentRegion
Set target = ActiveSheet.Cells(1, "d")

source.Copy
target.PasteSpecial Paste:=xlPasteValues, Operation:=xlPasteSpecialOperationNone
Application.CutCopyMode = False 
```

另请注意，`Operation`不接受`xlPasteValues`，您可能的意思`xlPasteSpecialOperationNone`。

# c - 递归算法以特定顺序获取字符串组合

> ID：13326163
> 
> 赞同：2
> 
> 时间：2012-11-10T21:17:08.340
> 
> 标签：c, string, algorithm, recursion, permutation

有几种算法可以打印字符串的所有组合，但我需要一种以特定顺序打印它们的算法。目前我使用的标准排列算法类似于这个问题的**最佳答案**（不是问题本身）：[C++ recursive permutation algorithm for strings -> not skipping duplicates](https://stackoverflow.com/questions/8029994/c-recursive-permutation-algorithm-for-strings-not-skipping-duplicates)

例如，对于输入“ABC”，输出将是：ABC ACB BAC BCA CAB CBA

对于输入“ACC”，它将是： ACC CAC CCA

输出都是正确的，但是我需要它们以不同的顺序。输入将仅包含字符“A”和“C”，为了方便起见，我在将字符串输入到递归函数之前按字母顺序对字符串进行排序，因此输入字符串将始终具有相同的字符（即 AACCC）。至于顺序，我想将“C”的集合视为一个单一的实体，我只将每个字符的排列集左移到第一个“C”的右侧。所以对于输入“ACC”，第一个输出是“ACC”，这是可以的，下一个输出应该是“CCA”，因为我将所有的'C'向左移动了一步，然后是所有字符的“CCA”的排列第一个“C”的右侧是最终输出，即“ACA”。

对于这些输入，我需要它看起来像这样：

输入：ACC

输出：ACC CCA CAC

输入：AACC

输出：

AACC ACCA ACAC CCAA CACA CAAC

知道我应该如何修改我的算法以按此顺序生成组合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:00:02.373

对于具有两个不同字符`A`和的字符串`C`，给定`n`的是`A`'s 的数量，听起来您正在寻找的是这些序列的串联：所有以完全`n` `A`'s 开头的排列以相反的字典顺序，所有排列都以完全`n-1` `A`是按字典顺序排列的，等等。因此，您可以采用按字典顺序排列的现有输出，并以相反的顺序对其进行迭代，选择匹配的元素`/^A{n}C/`，`/^A{n-1}C/`通过`/^A{0}C/`并将它们添加到新集合中。

`A`您可以通过生成从 ' 到零的每个长度的'字符串直接生成此输出`n` `A`，然后对于每个字符串，以相反的字典顺序附加剩余字符的排列。

# css - 定位父 ul 的第一个子菜单

> ID：13326167
> 
> 赞同：2
> 
> 时间：2012-11-10T21:17:54.547
> 
> 标签：css, html-lists

我需要将 css 定位为父 ul 中的第一级 ul 子菜单。

CSS：

```
#menu li:hover > ul.sub_menu { ...some styles } 
```

..但这当然适用于所有子菜单，当您将鼠标悬停在父列表项上时，我只希望相对于父项的第一个子菜单具有这种特殊样式。

HTML：

```
<ul id="menu">
    <li>Item 
      <ul class="sub_menu"><!-- target only this one -->
       <li>Item
         <ul class="sub_menu">etc...</ul><!-- do not do for this one and so on-->
       </li>
      </ul>
    </li>
    <li>Item 
      <ul class="sub_menu"><!-- target only this one -->
       <li>Item
         <ul class="sub_menu">etc...</ul><!-- do not do for this one and so on-->
       </li>
      </ul>
    </li>
</ul> 
```

感谢您的任何反馈...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:24:16.153

您可以使用`:first-child`选择器：

```
#menu > li:first-child > ul.sub_menu {
    color: red;
} 
```

然后使用后代选择器恢复其他元素的更改：

```
#menu > li:first-child > ul.sub_menu ul {
    color: black;
} 
```

**演示：http: [//jsfiddle.net/6y4Sb/](http://jsfiddle.net/6y4Sb/)**

# requirejs - requirejs中奇怪的依赖加载行为

> ID：13326171
> 
> 赞同：0
> 
> 时间：2012-11-10T21:18:29.960
> 
> 标签：requirejs

我在 requirejs 中加载依赖项时遇到问题，因此尝试重新创建显示我的问题的最简单的可能结构。html 文件包含一个引导输入框，我想在页面加载后填充数据。如果我的 main.js 脚本是：

```
requirejs.config({
  paths: {
    jquery: 'libs/jquery/jquery-min',
    bootstrap: 'libs/bootstrap/bootstrap.min',
    underscore: 'libs/underscore/underscore-min',
    backbone: 'libs/backbone/backbone-optamd3-min',
    cs: 'libs/require/cs',
    'coffee-script': 'libs/coffeescript/coffee-script'
  },
  shim: {
    bootstrap: {
      deps: ['jquery']
  }
});

require(['cs!router']); 
```

我的主干入口点是一个非常简单的路由器：

```
define ['jquery','underscore','backbone','bootstrap'], ($, _, Backbone) ->

  AppRouter = Backbone.Router.extend

    initialize: () ->
      @data = ['one','two','three']

    routes: '': 'index'

    index: () ->
      $('.typeahead').typeahead({source:@data})

  app_router = new AppRouter
  Backbone.history.start() 
```

然后如果页面从清理的网络缓存加载，我会在控制台上收到以下错误：

类型错误：a 不是函数

TypeError: $(".typeahead").typeahead 不是函数

错误：模块加载超时：cs!router [http://requirejs.org/docs/errors.html#timeout](http://requirejs.org/docs/errors.html#timeout)

如果我只是重新加载页面，所有错误都会消失，一切正常。如果有人能向我解释这里发生了什么，我将非常感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:48:49.193

好的，通过使用修复

```
<script data-main="js/main" src="js/libs/require/require-jquery.js"></script> 
```

代替

```
<script data-main="js/main" src="js/libs/require/require.js"></script> 
```

在主 html 文件中。

# ruby-on-rails - 控制器中定义的方法抛出 NoMethodError

> ID：13326174
> 
> 赞同：1
> 
> 时间：2012-11-10T21:18:47.067
> 
> 标签：ruby-on-rails, methods, nomethoderror

我的应用程序有`Dwellings`和`Roomies`。我正在`Dwelling`视图中构建一些身份验证 - 只有`users`当前`roomies`的`dwelling`用户才能查看某些数据 - 所有其他用户将看到不同的视图。

为了实现这一点，我`is_roomie?`在`Users Controller`. 该方法如下所示：

```
## is_roomie? method in Users_Controller.rb ##

def is_roomie?
roomie_ids = []
@dwelling.roomies.each do |r|
  roomies_ids << r.id
end
roomie_ids.include?(current_user.id)
end 
```

我在视图中调用这个方法`Dwelling`如下：

```
## show.html.erb (Dwelling) ##
....
<% if current_user && current_user.is_roomie? %>
.... 
```

当我在实现这个之后加载页面时，我得到以下 NoMethoderror：

> 住宅中的 NoMethodError#show
> 
> 显示 >/Volumes/UserData/Users/jraczak/Desktop/Everything/rails_projects/Roomie/roomie/app/views/dwellings/show.html.erb 其中第 5 行提出：
> 
> 未定义的方法“is_roomie？” 对于#用户：0x00000102db4608>

对于某些背景，我确实尝试过将其作为一种`Dwelling`方法并将其移入`User`模型中，但无济于事。提前感谢您的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:35:07.637

`current_user`是一个`User`对象，而不是一个`UsersController`对象，所以你不能调用你在那个对象上定义的方法。当您在这种情况下考虑它时，您会发现您应该在`User`.

在 app/model/user.rb 中尝试这样的操作：

```
class User < ActiveRecord::Base
  # ...
  def roomie?(dwelling)
    dwelling.roomies.include?(self)
  end
end 
```

不过，看看这个，我们可以通过将代码移到 app/models/dwelling.rb 中的 Dwelling 类来改进代码：

```
class Dwelling < ActiveRecord::Base
  # ...
  def roomie?(user)
    roomies.include?(user)
  end
end 
```

然后，您将在视图中使用它：

```
<% if current_user && @dwelling.roomie?(current_user) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:40:49.827

current_user 对象没有方法 is_roomie?。这是您的控制器中的一种方法。您可以在显示操作中调用该方法并使其可用于视图，如下所示：

```
#in UsersController.rb
def show
  @is_roomie = is_roomie?
end 
```

# ruby-on-rails - Cloudfoundry [Cloudfoundry] File.open ruby rails resque 类

> ID：13326176
> 
> 赞同：1
> 
> 时间：2012-11-10T21:18:54.460
> 
> 标签：ruby-on-rails, file-io, cloud-foundry

我正在使用云铸造。我上传文件并保存文件..我的例程返回路径和文件名

/var/vcap/data/dea/apps/Dwarfquery-0-99065f0be8880d91916257931ed91162/app/tmp/region1-legends10-11-2012-20:53.xml

但是，尝试使用 File.Open 读取它的预定 resque 例程返回以下错误

Errno::ENOENT 错误没有这样的文件或目录 - /var/vcap/data/dea/apps/Dwarfquery-0-99065f0be8880d91916257931ed91162/app/tmp/region1-legends10-11-2012-20:53.xml

这是上传服务器返回的路径...我在作业类的顶部添加了 require 'open-uri'

失败的线路是

File.open(fpath, 'r+') 做 |f|

其中 fpath 返回错误的文件/目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:32:48.787

我根本不精通红宝石，只是为了澄清一下：

*   上传的位和 Resque 例程是否是同一个“应用程序”的一部分（在 Cloud Foundry 意义上？）
*   您是在文件上传后不久还是在很久之后（特别是在您的应用程序已经/可能已经重新启动之后？）

这很重要，因为：

1.  每个“应用程序”都有自己的临时文件夹，显然一个应用程序无法访问另一个应用程序的文件系统。如果您使用多个“实例”部署您的应用程序，这也成立。每个实例都是一个独立的进程，有自己的文件系统。
2.  本地文件系统存储是短暂的，每次应用重新启动时都会被清除

如果您需要在应用程序之间访问二进制数据，您将需要使用某种存储（例如 Mongo 的 GridFS）来使其持久化并且对两个应用程序可见。

# vb6 - vb6 上的错误“运行时错误 -2147319779 自动化错误对象库未注册”

> ID：13326177
> 
> 赞同：1
> 
> 时间：2012-11-10T21:18:58.000
> 
> 标签：vb6

大家好，我在 Windows7 Home Premium 中使用 FileSystemObject 时遇到问题，收到一条错误消息“运行时错误 -2147319779 自动化错误对象库未注册”我在 windows xp sp3 上使用了此代码，它运行良好，我尝试了 Registrer dll “c:\windows\system32\scrrun.dll”还是报错，谢谢大家！

```
Set Diretorio = FSO.GetFolder(DiretorioDinamico)'The error occurs here! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:14:11.227

我遇到了相同的问题，即安装在 . 上的一些常见组件注册错误`syswow64`，其中`mscomctl.ocx`. 在搜索并没有找到解决方案后，我得出了一个解决问题的方案。因此，解决的唯一方法是：

1.  注销`mscomctl.ocx`（具有提升的特权）
2.  禁用 Internet Explorer（在我的情况下为 10 版）
3.  重新启动系统
4.  注册`mscomctl.ocx`（始终提升）
5.  再次启用 IE10

好像是IE10的问题。由于我禁用了它，我终于可以正确注册常用控件。

我希望（尽管我的英语不好）能帮助面临同样问题的人。

# python - 从命令行运行 Python 脚本会在默认文本编辑器中打开脚本，而不是执行脚本

> ID：13326181
> 
> 赞同：6
> 
> 时间：2012-11-10T21:19:31.143
> 
> 标签：python, windows, command-line, file-association

我有`.py`与 Python 解释器关联的扩展名的文件。但是，当我在命令行中键入此类文件的名称并按下时`ENTER`，该文件将在默认文本编辑器 (Notepad++) 中打开，而不是使用相关的 Python 解释器运行。为什么？

```
Z:\1>where python
c:\Program Files\Python\2.7\python.exe

Z:\1>reg query HKCR\.py /ve

HKEY_CLASSES_ROOT\.py
    (Default)    REG_SZ    Python.File

Z:\1>reg query HKCR\Python.File\shell\open\command /ve

HKEY_CLASSES_ROOT\Python.File\shell\open\command
    (Default)    REG_SZ    c:\Program Files\Python\2.7\python.exe "%1" %*

Z:\1>echo %PATHEXT%
.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW

Z:\1>type a.py
from __future__ import print_function; import sys; print(sys.executable); print(sys.version)
Z:\1>a.py    <--- this opens a.py in the default text editor 
```

我在 Windows Vista x64 上使用`Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win32`

更新

删除`HKEY_CLASSES_ROOT\Unknown\shell\notepad++\command`密钥后（我过去在将无扩展名的文件与 Notepad++ 关联的过程中创建了此密钥 - 请参阅[如何设置默认程序以在 Windows 中打开无扩展名的文件？](https://superuser.com/q/13653/664)），其值为`C:\Program Files (x86)\Notepad++\notepad++ %1`我收到此错误：

> 此文件没有与之关联的用于执行此操作的程序。在“设置关联”控制面板中创建关联。

更新 2

要显示系统正常使用的所有注册表项以找出与`.py`扩展相关联的程序，我运行以下批处理文件 ( `python_assoc.query.bat`)：

```
@echo off
if "%~1" == "details" (
    set keypath=HKLM\Software\Classes
    echo ----- HKEY_LOCAL_MACHINE -----
    call :query
    set keypath=HKCU\Software\Classes
    echo.
    echo ----- HKEY_CURRENT_USER -----
    call :query
) else (
    set keypath=HKCR
    echo ----- HKEY_CLASSES_ROOT -----
    call :query
)   
goto end

:query
reg query %keypath%\.py /ve
reg query %keypath%\.pyw /ve
reg query %keypath%\.pyc /ve
reg query %keypath%\.pyo /ve

reg query %keypath%\Python.File\shell\open\command /ve
reg query %keypath%\Python.NoConFile\shell\open\command /ve
reg query %keypath%\Python.CompiledFile\shell\open\command /ve
goto :eof

:end
set keypath= 
```

输出

```
Z:\1>python_assoc.query.bat details
----- HKEY_LOCAL_MACHINE -----

HKEY_LOCAL_MACHINE\Software\Classes\.py
    (Default)    REG_SZ    Python.File
HKEY_LOCAL_MACHINE\Software\Classes\.pyw
    (Default)    REG_SZ    Python.NoConFile
HKEY_LOCAL_MACHINE\Software\Classes\.pyc
    (Default)    REG_SZ    Python.CompiledFile
HKEY_LOCAL_MACHINE\Software\Classes\.pyo
    (Default)    REG_SZ    Python.CompiledFile
HKEY_LOCAL_MACHINE\Software\Classes\Python.File\shell\open\command
    (Default)    REG_SZ    c:\Program Files\Python\2.7\python.exe "%1" %*
HKEY_LOCAL_MACHINE\Software\Classes\Python.NoConFile\shell\open\command
    (Default)    REG_SZ    c:\Program Files\Python\2.7\pythonw.exe "%1" %*
HKEY_LOCAL_MACHINE\Software\Classes\Python.CompiledFile\shell\open\command
    (Default)    REG_SZ    c:\Program Files\Python\2.7\python.exe "%1" %*

----- HKEY_CURRENT_USER -----
ERROR: The system was unable to find the specified registry key or value.
ERROR: The system was unable to find the specified registry key or value.
ERROR: The system was unable to find the specified registry key or value.
ERROR: The system was unable to find the specified registry key or value.
ERROR: The system was unable to find the specified registry key or value.
ERROR: The system was unable to find the specified registry key or value.
ERROR: The system was unable to find the specified registry key or value. 
```

我还运行 Process Monitor（感谢*Maximus*`a.py` ）来查看从命令行运行时正在读取哪些注册表项。我已将过滤器设置为仅包含`cmd.exe`用于运行`a.py`文件的 pid 并排除类型的操作`RegCloseKey`。

```
"Operation","Path","Result","Detail"
"RegOpenKey","HKCU\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers","NAME NOT FOUND","Desired Access: Query Value"
"RegOpenKey","HKLM\SOFTWARE\Microsoft\WINDOWS NT\CURRENTVERSION\AppCompatFlags\Custom\a.py","NAME NOT FOUND","Desired Access: Query Value"
"RegOpenKey","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer","SUCCESS","Desired Access: Query Value"
"RegQueryValue","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\MaximizeApps","NAME NOT FOUND","Length: 144"
"RegOpenKey","HKLM\Software\Microsoft\Windows\CurrentVersion\Explorer","SUCCESS","Desired Access: Query Value"
"RegQueryValue","HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\MaximizeApps","NAME NOT FOUND","Length: 144"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\Drive\shellex\FolderExtensions","NAME NOT FOUND","Desired Access: Enumerate Sub Keys"
"RegOpenKey","HKCR\Drive\shellex\FolderExtensions","SUCCESS","Desired Access: Enumerate Sub Keys"
"RegQueryKey","HKCR\Drive\shellex\FolderExtensions","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\Drive\shellex\FolderExtensions","NAME NOT FOUND","Desired Access: Maximum Allowed"
"RegEnumKey","HKCR\Drive\shellex\FolderExtensions","SUCCESS","Index: 0, Name: {fbeb8a05-beee-4442-804e-409d6c4515e9}"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\Drive\shellex\FolderExtensions\{fbeb8a05-beee-4442-804e-409d6c4515e9}","NAME NOT FOUND","Desired Access: Query Value"
"RegOpenKey","HKCR\Drive\shellex\FolderExtensions\{fbeb8a05-beee-4442-804e-409d6c4515e9}","SUCCESS","Desired Access: Query Value"
"RegQueryKey","HKCR\Drive\shellex\FolderExtensions\{fbeb8a05-beee-4442-804e-409d6c4515e9}","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\Drive\shellex\FolderExtensions\{fbeb8a05-beee-4442-804e-409d6c4515e9}","NAME NOT FOUND","Desired Access: Maximum Allowed"
"RegQueryValue","HKCR\Drive\shellex\FolderExtensions\{fbeb8a05-beee-4442-804e-409d6c4515e9}\DriveMask","SUCCESS","Type: REG_DWORD, Length: 4, Data: 32"
"RegEnumKey","HKCR\Drive\shellex\FolderExtensions","NO MORE ENTRIES","Index: 1, Length: 288"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py","NAME NOT FOUND","Desired Access: Query Value"
"RegOpenKey","HKCR\.py","SUCCESS","Desired Access: Query Value"
"RegQueryKey","HKCR\.py","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py","NAME NOT FOUND","Desired Access: Maximum Allowed"
"RegQueryValue","HKCR\.py\(Default)","SUCCESS","Type: REG_SZ, Length: 26, Data: Python.File "
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py\OpenWithProgids","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\.py\OpenWithProgids","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py\OpenWithProgids","SUCCESS","Desired Access: Read"
"RegQueryKey","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py\OpenWithProgids","SUCCESS","Query: Cached, SubKeys: 0, Values: 2"
"RegEnumValue","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py\OpenWithProgids","SUCCESS","Index: 0, Length: 220"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\Python.File","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\Python.File","SUCCESS","Desired Access: Read"
"RegEnumValue","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py\OpenWithProgids","SUCCESS","Index: 1, Length: 220"
"RegEnumValue","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py\OpenWithProgids","NO MORE ENTRIES","Index: 2, Length: 220"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\.py","SUCCESS","Desired Access: Read"
"RegOpenKey","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py","SUCCESS","Desired Access: Read"
"RegOpenKey","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py","SUCCESS","Desired Access: Read"
"RegOpenKey","HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py\UserChoice","NAME NOT FOUND","Desired Access: Query Value"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\Python.File ","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\Python.File ","NAME NOT FOUND","Desired Access: Read"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\.py","SUCCESS","Desired Access: Read"
"RegQueryKey","HKCR\.py","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py\shell","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\.py\shell","NAME NOT FOUND","Desired Access: Read"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\.py","SUCCESS","Desired Access: Read"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\Unknown","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\Unknown","NAME NOT FOUND","Desired Access: Read"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\SystemFileAssociations\.py","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\SystemFileAssociations\.py","NAME NOT FOUND","Desired Access: Read"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py","NAME NOT FOUND","Desired Access: Query Value"
"RegOpenKey","HKCR\.py","SUCCESS","Desired Access: Query Value"
"RegQueryKey","HKCR\.py","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\.py","NAME NOT FOUND","Desired Access: Maximum Allowed"
"RegQueryValue","HKCR\.py\PerceivedType","NAME NOT FOUND","Length: 144"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\SystemFileAssociations\.py","NAME NOT FOUND","Desired Access: Query Value"
"RegOpenKey","HKCR\SystemFileAssociations\.py","NAME NOT FOUND","Desired Access: Query Value"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\*","SUCCESS","Desired Access: Read"
"RegQueryKey","HKCU\Software\Classes\*","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\*\shell","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\*\shell","SUCCESS","Desired Access: Read"
"RegQueryKey","HKCR\*\shell","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\*\shell","NAME NOT FOUND","Desired Access: Maximum Allowed"
"RegQueryValue","HKCR\*\shell\(Default)","NAME NOT FOUND","Length: 144"
"RegQueryKey","HKCR\*\shell","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\*\shell\open","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\*\shell\open","NAME NOT FOUND","Desired Access: Read"
"RegQueryKey","HKCU\Software\Classes","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\AllFilesystemObjects","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\AllFilesystemObjects","SUCCESS","Desired Access: Read"
"RegQueryKey","HKCR\AllFilesystemObjects","SUCCESS","Query: Name"
"RegOpenKey","HKCU\Software\Classes\AllFilesystemObjects\shell","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCR\AllFilesystemObjects\shell","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKLM\Software\Microsoft\Windows\CurrentVersion\SideBySide","SUCCESS","Desired Access: Read"
"RegQueryValue","HKLM\COMPONENTS\PreferExternalManifest","NAME NOT FOUND","Length: 20"
"RegOpenKey","HKLM\Software\Microsoft\Windows\CurrentVersion\SideBySide\AssemblyStorageRoots","REPARSE","Desired Access: Enumerate Sub Keys"
"RegOpenKey","HKLM\COMPONENTS\AssemblyStorageRoots","NAME NOT FOUND","Desired Access: Enumerate Sub Keys"
"RegOpenKey","HKLM\Software\Microsoft\DirectUI","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKLM\Software\Microsoft\CTF\TIP\{0000897b-83df-4b96-be07-0fb58b01c4a4}\LanguageProfile\0x00000000\{0001bea3-ed56-483d-a2e2-aeae25577436}","SUCCESS","Desired Access: Read"
"RegQueryValue","HKLM\SOFTWARE\Microsoft\CTF\TIP\{0000897b-83df-4b96-be07-0fb58b01c4a4}\LanguageProfile\0x00000000\{0001bea3-ed56-483d-a2e2-aeae25577436}\Enable","SUCCESS","Type: REG_DWORD, Length: 4, Data: 1"
"RegOpenKey","HKCU","SUCCESS","Desired Access: Read"
"RegOpenKey","HKCU\Keyboard Layout\Toggle","SUCCESS","Desired Access: Read"
"RegQueryValue","HKCU\Keyboard Layout\Toggle\Language Hotkey","SUCCESS","Type: REG_SZ, Length: 4, Data: 3"
"RegQueryValue","HKCU\Keyboard Layout\Toggle\Layout Hotkey","SUCCESS","Type: REG_SZ, Length: 4, Data: 3"
"RegOpenKey","HKCU","SUCCESS","Desired Access: Read"
"RegOpenKey","HKCU\SOFTWARE\Microsoft\CTF\LangBarAddIn","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKLM\SOFTWARE\Microsoft\CTF\LangBarAddIn","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKCU","SUCCESS","Desired Access: Read"
"RegOpenKey","HKCU\Software\Microsoft\CTF\DirectSwitchHotkeys","SUCCESS","Desired Access: Read"
"RegEnumKey","HKCU\Software\Microsoft\CTF\DirectSwitchHotkeys","NO MORE ENTRIES","Index: 0, Length: 288"
"RegOpenKey","HKLM\SOFTWARE\Microsoft\CTF\KnownClasses","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKLM\SOFTWARE\Microsoft\CTF\KnownClasses","NAME NOT FOUND","Desired Access: Read"
"RegOpenKey","HKLM\Software\Microsoft\Windows NT\CurrentVersion\FontSubstitutes","SUCCESS","Desired Access: Read"
"RegQueryValue","HKLM\SOFTWARE\Microsoft\WINDOWS NT\CURRENTVERSION\FontSubstitutes\Segoe UI","NAME NOT FOUND","Length: 144"
"RegOpenKey","HKLM\SOFTWARE\Microsoft\CTF\KnownClasses","NAME NOT FOUND","Desired Access: Read" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T15:10:54.720

一般来说，我会确保关联不会被当前用户的设置覆盖：

*   `HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.py\UserChoice`
*   `HKCU\Software\Classes\.py`
*   `HKCU\Software\Classes\Python.File`

但是，当我在您的更新中阅读 Process Monitor 输出时，您的系统上似乎没有`HKCU`定义任何这些键。

我的下一步是在提升的`cmd`控制台中运行以下命令：

```
> assoc .PY=Python.File
> ftype Python.File=c:\Program Files\Python\2.7\python.exe "%1" %* 
```

据我所知，这设置了系统关联，`HKLM\Software\Classes`没有做任何其他事情。根据您问题中的信息，这似乎已经正确设置。所以我不知道是什么`assoc`或`ftype`做了什么来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:11:35.980

可能这可能会有所帮助（将“打开”作为默认动词）？

```
[HKEY_CLASSES_ROOT\Python.File\shell]
@="open" 
```

还是这个（考虑到`python.exe`路径周围的配额）？

```
[HKEY_CLASSES_ROOT\Python.File\shell\open]
@="Open"

[HKEY_CLASSES_ROOT\Python.File\shell\open\command]
@="\"c:\\Program Files\\Python\\2.7\\python.exe\" \"%1\" %*" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-28T21:41:52.677

和 Piotr 一样，我一直在为这个问题苦苦挣扎。eriksyn 的建议使我找到了一个工作系统。

由于 Notepad2 总是打开我的“我想运行这个”调用，一定是我有一些东西将所有文件与 Notepad2 相关联，现在我知道在哪里看（我之前尝试运行进程监视器，但输出篇幅太大）。

我的注册表中有`.py`包含 Notepad2 内容的条目 。`HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts`我假设 Notepad2 自己添加了这些，或者我在配置时以某种方式这样做了。尤其：

```
> reg query HKCU\Software\...\Explorer\FileExts\.py\UserChoice
HKEY_CURRENT_USER\Software\...\Explorer\FileExts\.py\UserChoice
    Progid    REG_SZ    Applications\Notepad2.exe 
```

使用此注册表项和值，尝试运行 Python 脚本只会打开 Notepad2。

如果没有这个注册表项，我的 Python 脚本实际上会执行，不再需要我输入“python <script>”来运行它们。

我很高兴。谢谢，堆栈溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T22:42:45.463

你不能用 GUI 的方式来做吗？

“打开方式...” -> 浏览 -> python.exe 并勾选“始终使用此程序...”

# asp.net - VS2012中使用Publish Web Deploy时如何防止文件夹被删除？

> ID：13326185
> 
> 赞同：2
> 
> 时间：2012-11-10T21:20:01.757
> 
> 标签：asp.net, visual-studio-2012

我发现了一个没有答案的[类似问题。](https://stackoverflow.com/questions/6384092/vs-2008-web-deployment-prevent-folder-from-being-deleted)从那以后情况是否发生了变化？有人知道如何告诉 VS 在使用强大的 Publish Web Deploy 功能时不要删除特定文件夹下的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:28:04.260

我通常不将这些类型的位置作为项目的一部分。我通常会创建一个应用程序设置，该设置引用我在 IIS 中作为虚拟目录创建的位置；类似于 ~/Data 或 ~/CustomerRepo。该应用程序并不关心该文件夹不在我的项目中，只要它运行时，该位置物理或虚拟（大部分是虚拟地）存在于 IIS 中。

这样，当您发布并且 IIS 指向驱动器/网络/任何其他部分的虚拟目录时，它不会被覆盖。

# android - android - 可用的基于云的测试工具和套件

> ID：13326186
> 
> 赞同：0
> 
> 时间：2012-11-10T21:20:05.650
> 
> 标签：android, unit-testing, cloud, automated-tests, stack-trace

我想知道stackoverflow社区中是否有人可以指出一些基于云的android测试工具。我希望能够在我无法访问的真实设备上测试我的应用程序，并获得与测试相关的完整 logcat 和其他数据。我知道那里有很多，但我想先听听其他人的经历，然后再花时间或金钱尝试它们。一个快速的谷歌搜索带来了 testdroid.com，但我听说过无数其他的，我在前几页中找不到。

对此事的任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T18:15:29.450

看看这个网站：[http ://testdroid.com/](http://testdroid.com/)

# actionscript-3 - 如何匹配用户名和密码集（AS3 中的 SharedObject）

> ID：13326188
> 
> 赞同：0
> 
> 时间：2012-11-10T21:20:27.807
> 
> 标签：actionscript-3, actionscript

我目前正在使用 SharedObjects 将用户名和密码保存在 flash cookie 中。我的问题是如何使 usernameField 与 passwordField 匹配，并且 usernameField2 与 passwordField2 匹配。基本上我想区分一个登录集和另一个。

```
package 
{

    import flash.display.*;
    import flash.events.*;
    import flash.net.*;
    import flash.text.*;

  public class foo extends Sprite 
  {

      public var usernameField:TextField = new TextField();
      public var passwordField:TextField = new TextField();
      public var conPasswordField:TextField = new TextField();
      public var traceOutputField:TextField = new TextField();

      public var saveDataObject:SharedObject = SharedObject.getLocal("test");

      public function foo() 
      {
           traceOutputField.width = 500;
           addChild(traceOutputField);

           usernameField.text = "username";
           passwordField.text = "password";
           conPasswordField.text = "password";

           usernameField.y = 50; addChild(usernameField);
           passwordField.y = 100; addChild(passwordField);
           conPasswordField.y = 150; addChild(conPasswordField);

           registerUserInfo(null);
      }

      public function registerUserInfo(evt:MouseEvent):void
      {
           if(passwordField.text == conPasswordField.text)
           {                      
                  saveDataObject.data.savedUsername = ""+usernameField.text;
                  saveDataObject.flush();
                  traceOutputField.text = "DEBUG " + saveDataObject.size + " / " + saveDataObject.data.savedUsername;

                  saveDataObject.data.savedPassword = ""+passwordField.text;
                  saveDataObject.flush();
                  trace(saveDataObject.size);
           }
           else if(passwordField.text != conPasswordField.text)
           {
                  trace("Passwords do not match");
           }
      }

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:41:55.487

尝试这个：

```
public var saveDataObject:SharedObject = SharedObject.getLocal("test");

public function getUsers():Array{
    var users:Array = saveDataObject.data.users as Array;
    return users;
}

public function saveUserInfo(name:String, pass:String):void{
    var users:Array = getUsers();
    if(!users){
        users = [];
    }
    users.push({username:name, password:pass});
    saveDataObject.data.users = users;
    saveDataObject.flush();
} 
```

现在，您可以围绕此编写各种其他功能。例子：

```
public function getPasswordForUser(username:String):String{
    var users:Array = getUsers();
    if(users){
        for (var i:int=0; i<users.length; i++){
            if(users[i].username == username){
                return users[i].password;
            }
        }
    }
    return null;
} 
```

还有很多其他的事情可以在这里完成，但这会让你继续前进

# css - 设置右边框全屏高度

> ID：13326193
> 
> 赞同：0
> 
> 时间：2012-11-10T21:21:01.933
> 
> 标签：css, height, border

我有三个 div：header、left 和 right，我正在使用border-right 添加一条分隔两个 div 的线。我遇到的问题是边框只跨越内容的长度，而不是整个页面。如何使边框扩展以填充整个页面？

![在此处输入图像描述](../Images/1eb760f9f4b1ac7a456b18871918520d.png)

```
.leftdiv{
width:36.5%;
border-right:1px solid #222222;
float:left;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:50:11.990

问题是 div 只会增长到它内部的内容需要的大小。边框只是一个视觉提示。

您可以在 div 上放置一个 min-height 以使其扩展到您想要的任意位置。

另一种解决方案是创建人造列，但您最好的选择可能是在这篇文章中：

[http://css-tricks.com/fluid-width-equal-height-columns/](http://css-tricks.com/fluid-width-equal-height-columns/)

# android - 如何找出其他应用程序的广播意图操作？

> ID：13326195
> 
> 赞同：0
> 
> 时间：2012-11-10T21:21:04.073
> 
> 标签：android

我正在尝试读取其他应用程序广播的音频元数据。广播元数据没有标准，但一种常见的方法是发送一个以 .metachanged 结尾的动作以及列出艺术家、专辑等的附加信息。

如何确定来自其他各种应用程序的广播？如果我可以过滤所有广播，那么我可以通读它们并能够分辨哪些应用程序正在广播它们的元数据，以及它是如何格式化的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:28:51.217

> 如何确定来自其他各种应用程序的广播？

您询问这些应用程序的开发人员他们发送的支持哪些广播。如果您希望能够以编程方式发现这一点，那是不可能的，抱歉。

现在，如果他们碰巧收听了自己的广播，您可能会在应用程序的清单中看到这一点（如果他们没有使用`registerReceiver()`. 作为开发人员，您可以通过[AppXplore 之](https://play.google.com/store/apps/details?id=com.sonyericsson.androidapp.AppExplore&feature=nav_result)类的应用程序进行检查。但如果这不是某些文档的一部分和那些音乐应用程序支持的API，那么当这些音乐应用程序改变他们的广播时，你的应用程序就会崩溃。

# php - php美元符号在ini文件中

> ID：13326196
> 
> 赞同：3
> 
> 时间：2012-11-10T21:21:16.043
> 
> 标签：php, escaping, ini

我正在尝试使用[parse_ini_file](http://php.net/parse_ini_file)函数解析一个 ini 文件。

保留字符是`?{}|&~![()^`.

`$`PHP 数组可以有带有美元符号的键，但是为什么这个函数不能从具有字符的 ini 文件中生成一个带有键的数组呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:39:32.327

可能是因为使用 $ 来指定 INI 变量；如果未在变量的上下文中使用，则会导致语法错误

`${...}`用作值将看起来

1.  INI 设置
2.  一个环境变量

例如：

```
<?php
print_r(parse_ini_string('
php_ext_dir = ${extension_dir}
operating_system = ${OS}
'));
?>

Array
(
    [php_ext_dir] => ./ext/
    [operating_system] => Windows_NT
) 
```

# javascript - 通过输入字段循环创建js对象

> ID：13326197
> 
> 赞同：2
> 
> 时间：2012-11-10T21:21:16.280
> 
> 标签：javascript, jquery, object, multidimensional-array

我有包含更多（动态）包装段的表单，我正在尝试创建可以通过 jquery ajax 传递并存储在 DB 中的对象。

问题是如何创建多维对象？

这是我的代码

D B：

```
 formID              wrapSegmentID           
  pkt                 formID  FK
  hldy                st
                      tt
                      rt 
```

HTML：

```
<form name="uniqID>                     
  <div name="ws" class="wrapSegment">
    <input name="st">
    <input name="tt">
    <input name="rt">
  </div>
  <div name="ws" class="wrapSegment">
    <input name="st">
    <input name="tt">
    <input name="rt">
  </div>

  <!--it can be more .wrapSegment divs--> 
  <!--it can be more .wrapSegment divs-->
  <!--it can be more .wrapSegment divs-->

<label>
  <input class="hldy" type="checkbox"> hldy
</label>
<label>
  <input class="pkt" type="checkbox"> pkt
</label>
<a class="save">Save</a>
</form> 
```

JS

```
$('.hero-unit').on('click','.save', function (){
   var day = {  
         dayID : "id",  
         pkt: "pkt",
         hldy: "hldy",
         ws:  $(".wrapSegment").each(function() {                           
                var inputs = $(this).children(":input");
                var wsObj = $.map(inputs, function(item, y) {
                        return {
                            key: item.name,
                            value: $(item).val()
                        };
                 });            
               return (wsObj);
        })
    };  

 console.log(day); //
 return false;          
}); 
```

我得到“ws：父div”

![控制台日志](../Images/054005876681ac03bc44aeb9ecda4df5.png)

但我希望这样

```
Object { dayID="id", pkt=0, hldy=1, ws=[Object { Object { key="1",value="1"}, Object { key=2, value=2}, {Object { key="1",value="1"}, Object { key=2, value=2} ] } 
```

也许我试图提交表单的方式是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:23:53.220

`$.each`将返回一个 jQuery 对象。你想要做的是这样的：

```
$('.hero-unit').on('click','.save', function (){
   var wsObj = [];
   $(".wrapSegment").each(function() {                           
         var inputs = $(this).children(":input");
         var inputArray = $.map(inputs, function(item, y) {
                 return {
                            key: item.name,
                            value: $(item).val()
                        };
                 });      
         wsObj.push(inputArray);      
   });
   var day = {  
         dayID : "id",  
         pkt: "pkt",
         hldy: "hldy",
         ws:  wsObj
    };  

 console.log(day); //
 return false;          
}); 
```

# javascript - jQuery UI“正在加载...”错误处理

> ID：13326199
> 
> 赞同：1
> 
> 时间：2012-11-10T21:21:24.753
> 
> 标签：javascript, jquery, jquery-ui, client-side

亲爱的，我正在使用 jQuery Grid 来显示用户管理数据。当我点击“+”号时，我会弹出一个对话框，我可以在其中创建一个新用户。我使用服务器端调用来填充级联列表。

当我提交请求时：失败，甚至成功时，“正在加载...”按钮似乎永远不会消失。我担心我会留下一些资源，或者更糟。由于我继承了这个应用程序，并且没有任何 jQuery 经验，我希望你能帮助我。如果这真的很简单，我提前道歉；但是，我在网上找不到任何可以帮助我解决这个问题的东西。

我正在使用 Struts 2 和 jQuery；但是，我不认为我们使用 jQuery Struts 2 插件。提前致谢。

这是代码：

```
<%@ include file="/WEB-INF/jsp/fragments/directive.jsp" %>  

<s:if test="hasActionErrors()">
<div class="error">
    <s:actionerror/>
</div>
</s:if>
<s:form action="userAdminCreateSubmit" namespace="/ti/tmsportal/ga" onsubmit="return false;" >
<s:textfield key="user.username" required="true" />
<s:textfield key="user.firstName" required="true" />
<s:textfield key="user.middleInitial" />
<s:textfield key="user.lastName" required="true" />
<s:textfield key="user.email" required="true" />
<s:textfield key="user.phone" required="true" />            
<s:select key="user.organizationId" list="organizations" listKey="value" listValue="label" required="true" onchange="changeWorkgroups(this.value);changeRoles(this.value);" />
<s:select key="user.workgroupId" list="workgroups" listKey="value" listValue="label" onchange="changeLocations(this.value);" />
<s:select key="user.locationId" list="locations" listKey="value" listValue="label" />
<s:select key="user.portalRole" list="roles" listKey="value" listValue="label" emptyOption="true" required="true" onchange="changeLevels(this.value);" />
<s:select key="user.levelCode" list="levels" listKey="value" listValue="label" emptyOption="true" required="true" />

</s:form>   

<s:url action="lookup" var="workgroupLookupUrl" >
<s:param name="type">workgroupsInOrganization</s:param>
</s:url>

<s:url action="lookup" var="locationLookupUrl" >
<s:param name="type">locationsInWorkgroup</s:param>
</s:url>

<s:url action="lookup" var="roleLookupUrl" >
<s:param name="type">rolesForOrg</s:param>
</s:url>

<s:url action="lookup" var="levelLookupUrl" >
<s:param name="type">levelsForRole</s:param>
</s:url>

<script>
function changeWorkgroups(key)
{
    $('#userAdminCreateSubmit [name="user.workgroupId"]').load('<s:property value="#workgroupLookupUrl" />&key=' + key + ' option',
        function(responseText, textStatus, XMLHttpRequest) {
            changeLocations();
            setVisibility();
        }
    );      
}

function changeLocations(key)
{
    $('#userAdminCreateSubmit [name="user.locationId"]').load('<s:property value="#locationLookupUrl" />&key=' + key + ' option',
        function(responseText, textStatus, XMLHttpRequest) {
            setVisibility();
        }
    );
}

function changeRoles(key)
{
    $('#userAdminCreateSubmit [name="user.portalRole"]').load('<s:property value="#roleLookupUrl" />&key=' + key + ' option',
        function(responseText, textStatus, XMLHttpRequest) {
            changeLevels($('#userAdminCreateSubmit [name="user.portalRole"]').value());
        });
}

function changeLevels(key)
{
    $('#userAdminCreateSubmit [name="user.levelCode"]').load('<s:property value="#levelLookupUrl" />&key=' + key + ' option');
}   

function setVisibility()
{
    $('#userAdminCreateSubmit [name="user.workgroupId"]').parents('tr').toggle(
        $('#userAdminCreateSubmit [name="user.workgroupId"] option[value!=""]').size() > 0
    );

    $('#userAdminCreateSubmit [name="user.locationId"]').parents('tr').toggle(
        $('#userAdminCreateSubmit [name="user.locationId"] option[value!=""]').size() > 0
    );
}

$(function()
{
    $('.button').button();
    setVisibility();
    addFieldHint('user.receiveNotifications', '<s:text name="content.help.receiveNotifications" />');       
    addFieldHint('user.username', '<s:text name="content.help.username" />');
});

function submitUserAdminCreate()
{
    $.post('<s:url action="userAdminCreateSubmit" namespace="/ti/tmsportal/ga" />', $('#userAdminCreateSubmit').serialize(),
        function(data) {
            $('#userAdminDialog').empty().append(data);
        }
    );
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:52:13.863

要修复您的 JS 错误，只需更改

```
$('#userAdminCreateSubmit [name="user.portalRole"]').value() 
```

至

```
$('#userAdminCreateSubmit [name="user.portalRole"]').val() 
```

# c - 从文件中保存和获取数据

> ID：13326200
> 
> 赞同：1
> 
> 时间：2012-11-10T21:21:32.027
> 
> 标签：c

我正在用 C 语言在 Linux 操作系统（ubuntu 12.04）上开发路由协议。我的问题是我需要将路由表保存在一个外部文件上，这样如果程序关闭或计算机关闭，程序在重新启动时应该能够从文件中获取路由表。

什么是最简单的解决方案？如果您能稍微解释一下，我将不胜感激。如果对你有帮助，我把表保存`struct routing user_list[40]`在下面：较小的索引在表中具有较高的优先级。

```
struct routing {
   int hop_distance;
   char senderID[16]; // 192.168.001.122
   char gateway[16];
};

struct routing user_list[40] = { [0] = {0, {0}, {0}, {0} } }; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:33:28.723

男人恐惧

```
size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream);
size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);
...
RETURN VALUE
fread()  and  fwrite() return the number of items successfully read or written (i.e., not the number of charac‐
ters).  If an error occurs, or the end-of-file is reached, the return value is a short item count (or zero). 
```

最简单的解决方案

```
int nb_written = fwrite(&user_list, sizeof(struct routing), 40, myfile);
int nb_read = fread(&user_list, sizeof(struct routing), 40, myfile); 
```

如评论中所示：

*   由于依赖于体系结构的 int 类型，生成的文件将不可移植。
*   必须检查返回值以处理 io 错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:34:01.093

请参阅[读取](http://linux.die.net/man/2/read)和[写入](http://linux.die.net/man/2/write)以保存此数据。将 IP 地址存储为二进制（即 4 个字节）。

# mongodb - MongoDB 返回键匹配条件的数组值

> ID：13326203
> 
> 赞同：1
> 
> 时间：2012-11-10T21:21:38.207
> 
> 标签：mongodb

我正在尝试从匹配某些条件的键的对象数组中获取值。对于数组中的对象，键是长整数，值是字符串。这是一个示例 MondgoDB 文档：

```
"_id" : ObjectId("509eba6d84f30613b4aee1ca"),
"timestamps" : [
    {
        "1234" : "ABC"
    },
    {
        "2345" : "DEF"
    },
    {
        "3456" : "GHI"
    },
    {
        "4567" : [
            "JKL",
            "ABC"
        ]
    },
    {
        "5678" : "GHI"
    }
],
"word" : "foo" 
```

例如，我想检索键小于 3000 的所有“时间戳”条目的值（即上面的“ABC”和“DEF”）。我只是幸运地通过使用找到集合中的哪些文档具有特定的键，`coll.find({"timestamps.4567":{$exists:true}})`但是在尝试诸如此类的事情时我没有得到任何结果`coll.find({"timestamps":{$lt:3000}})`- 我显然错过了一些可以检查时间戳的键是否小于 3000，而不是值时间戳本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:19:25.017

也许我完全错了......看起来你需要改变一下文件的结构：

```
"_id" : ObjectId("509eba6d84f30613b4aee1ca"),
"timestamps" : [
{
    "key": "1234",
    "val": "ABC"
},
{
    "key": "2345",
    "val": "DEF"
},
"word" : "foo" 
```

然后你可以使用查询`elemMatch`：

```
db.test.find({timestamps: {$elemMatch: {'key': {$gt: '1234'}}}}) 
```

确保你有一个索引`timestamps.key`

高温高压

# visual-studio-2010 - 为什么 Visual Studio 不断在我的 csproj 文件上调用 QueryOpen？

> ID：13326212
> 
> 赞同：0
> 
> 时间：2012-11-10T21:23:06.940
> 
> 标签：visual-studio-2010, file-io

当编译需要很长时间时，我试图解决问题，所以我启动了“进程监视器”并得到了一些意想不到的结果。

它表明，即使 Visual Studio 没有构建，它也会不断地对每个 C# 项目文件进行 QueryOpen 系统调用。由于我们在解决方案中有大约 100 个项目文件，这是我不明白需要的大量活动。

（我也安装了 Reshaper，如果有什么不同的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T08:50:17.440

可能有点晚了，但我认为对于其他有同样问题的人来说仍然有意义：

看到[这个线程](https://stackoverflow.com/questions/7070937/why-is-visual-studio-2010-reading-project-files-continously)。显然，如果您有多个 VS 实例正在运行，Resharper 可能是罪魁祸首。但是，如果没有 Resharper，我也会遇到同样的问题......也可能是其他一些插件或 VS 本身。

# ruby - 从 Rake 任务访问 Sinatra 应用程序范围

> ID：13326217
> 
> 赞同：1
> 
> 时间：2012-11-10T21:24:08.153
> 
> 标签：ruby, heroku, sinatra, rake-task

我在 Sinatra 应用程序中有一个全局变量，我想使用 Rakefile 中的计划任务对其进行更新。请注意，该应用程序托管在 Heroku 上。我已经设置了助手来访问这个变量。

```
get '/' do
    @@var
end

helpers do
    def get_var
        return @@var
    end

    def set_var(value)
        @@var = value
    end
end 
```

这是我的 Rakefile 中的任务：

```
task :do_something do
    Sinatra::Application.set_var(get_data)
end

def get_data
    # Retrieve value from external source
    ...
    return val
end 
```

我遇到的问题是任务执行正确，但 Sinatra 应用程序中的变量从未更新。我认为这是因为`Sinatra::Application`从 Rakefile 中调用实际上会从我尝试更新的主实例中创建一个单独的应用程序实例。

我想知道它们是否是一种从 Rakefile 任务中访问正在运行的 Sinatra Web 应用程序范围的方法。

*注意：我可以将在计划任务中检索到的值写入数据库，然后从 Sinatra 应用程序访问它，但这将是多余的，因为此变量更新频率很低，但检索频率很高，我宁愿将其保留在内存以便于访问。为了避免转向数据库，我研究了 Memcache 和 Redis，但我再次觉得这对于单个值来说太过分了。随意不同意这一点。

编辑：关于 Alexey Sukhoviy 的评论，Heroku 不允许写入 tmp 目录之外的文件，并且这些文件的存活时间不足以满足应用程序的需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:27:07.837

我最终使用 Memcache 存储变量。这与 Heroku 配合得很好，因为他们为它提供了一个免费的附加组件。[Dalli gem](http://rubygems.org/gems/dalli)为 Memcache 提供了一个简单的 Ruby 接口。在我的 Sinatra 应用程序文件中，我设置了以下选项：

```
require 'dalli'

set :cache, Dalli::Client.new 
```

然后我可以从 Rakefile 中恢复存储的变量：

```
task :do_something do
    Sinatra::Application.settings.cache.set('var', get_data)
end 
```

然后我可以在我的 Sinatra 控制器中再次访问这个变量：

```
settings.cache.get('var') 
```

# css - 如何使背景图像成为整个页面

> ID：13326219
> 
> 赞同：2
> 
> 时间：2012-11-10T21:24:23.500
> 
> 标签：css

如何使背景图像成为整个页面高度。我得到了宽度，但没有得到高度。这是我的代码。

```
<! DOCTYPE html/>
<html>
<head>
<title> Singapore! </title>
<style>

*

{
  margin:0px;
  padding:0px;
}

div.background

{

  background: url('singaporebackground.jpg');
  background-size: 100% auto;
  height: 1000px;
  padding-top: 50px;

}

div.transbox

{

  margin: 0px 225px; 
  width: 60%;
  height: 100%;
  background-image: linear-gradient(top, rgb(255,255,255) 24%, rgb(130,130,130) 39%, rgb(0,0,0) 81%);
  background-image: -o-linear-gradient(top, rgb(255,255,255) 24%, rgb(130,130,130) 39%, rgb(0,0,0) 81%);
  background-image: -moz-linear-gradient(top, rgb(255,255,255) 24%, rgb(130,130,130) 39%, rgb(0,0,0) 81%);
  background-image: -webkit-linear-gradient(top, rgb(255,255,255) 24%, rgb(130,130,130) 39%, rgb(0,0,0) 81%);
  background-image: -ms-linear-gradient(top, rgb(255,255,255) 24%, rgb(130,130,130) 39%, rgb(0,0,0) 81%);
  background-image: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0.24, rgb(255,255,255)),
    color-stop(0.39, rgb(130,130,130)),
    color-stop(0.81, rgb(0,0,0)));

  border-top: 5px solid black;
  opacity:0.4;
  filter:alpha(opacity=40); /* For IE8 and earlier */
}

div.transbox p

{
  margin: 30px 40px;
  font-weight: bold;
  color: #000000;
}

</style>
</head>
<body>

<div class="background" />
<div id="header" />
<!--<img src="finishedsingaporelogo.jpg" /> -->
</div>
<div class="transbox" />
<p> Content </p>
</div>
</div> 
```

看到我的背景图片是全宽的，但它重复了它的高度。我试过不重复，但它只留下一个空白，请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:29:27.827

你绝对可以定位它并使用`background-size: cover`：

```
div.background {
  background: url('singaporebackground.jpg');
  background-size: cover;

  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
} 
```

**演示：http: [//jsfiddle.net/gWQv4/](http://jsfiddle.net/gWQv4/)**

# cakephp - CakePHP2 从 DataSource 获取关联模型

> ID：13326220
> 
> 赞同：1
> 
> 时间：2012-11-10T21:24:27.903
> 
> 标签：cakephp, model, datasource, cakephp-2.1, rotten-tomatoes

我有一个使用标准 MySQL 数据库和用户表的用户模型和一个电影模型，它是来自 Rotten Tomatoes 的数据源。他们有一个 hasAndBelongsToMany 关系，我可以成功地写入包含 user_id 和 movie_id 的连接表 users_movies（movie_id 是烂番茄 id）。效果很好。

问题在于检索用户的电影。标准发现：

```
$movies = $this->User->find('all', array('conditions' => array('id' => $user_id))); 
```

只返回用户而不是相关的电影。我在 DataSource 的 read 方法中放置了一个 die 语句，它甚至没有到达 read 方法。如何检索用户的电影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:45:29.527

所以烂番茄拿着你的电影？在这种情况下，烂番茄当然不允许直接通过 SQL 访问他们的数据库——您将通过 API 访问它。因此，Cake 肯定不会像通常在同一个数据库中使用两个表那样将用户连接到电影。

您需要做的是 1) 从 Cake 获取用户的 movie_id 列表，然后 2) 调用 Rotten Tomatoes API 以获取其 ID 在您的 movie_id 列表中的电影列表。（假设烂番茄允许这样的 API 调用。）

快速查看 API，看起来他们的“电影搜索”（[http://developer.rottentomatoes.com/docs/json/v10/Movies_Search](http://developer.rottentomatoes.com/docs/json/v10/Movies_Search)）只允许您指定纯文本作为搜索条件（即，您无法根据电影 ID 进行搜索）。他们的“电影信息”方法（[http://developer.rottentomatoes.com/docs/json/v10/Movie_Info](http://developer.rottentomatoes.com/docs/json/v10/Movie_Info)）允许您通过 id 检索电影，但一次只允许您检索一部电影。

您当然可以循环浏览给定用户的电影 ID 列表，并为每个用户单独调用烂番茄 - 尽管我想这会变得非常慢。

有人根据多个 id 的列表（[http://developer.rottentomatoes.com/forum/read/123940](http://developer.rottentomatoes.com/forum/read/123940)）提出了检索功能请求，但在该请求得到实施之前，您可能很难获得任何东西体面的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:08:38.127

我通过在用户和电影之间的连接表中创建一个模型并以这种方式获取用户的电影来使其工作。然后我按照您的建议进行操作，并遍历用户的电影 ID，调用 API 并获取每部电影。不确定它有多优雅，但它正在工作。

# google-app-engine - Python 和谷歌应用引擎 blobproperty()

> ID：13326224
> 
> 赞同：1
> 
> 时间：2012-11-10T21:24:42.587
> 
> 标签：google-app-engine, python-2.7

我写了一些代码。

我可以在 BobProperty 中上传图片。

但我无法将图像加载到 HTML 页面中

```
import webapp2
from google.appengine.ext import db
from google.appengine.api import images

form="""
<form action="/" enctype="multipart/form-data" method="post">
    <div><label>Avatar:</label></div>
        <div><input type="file" name="img"/></div>
            <input type="submit" value="switch">
</form>
""" 
```

创建 BlobProperty

```
class Greeting(db.Model):
    avatar = db.BlobProperty() 
```

图像

```
class Image(webapp2.RequestHandler):
    def get(self):
        posts = db.GqlQuery("select * from Greeting")
        for post in posts:

            self.response.headers['Content-Type'] = 'image/jpg'
            self.response.out.write(post) 
```

用于将图像放入数据存储区

```
class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(form)
    def post(self):
        avatar = images.resize(self.request.get('img'), 32, 32)
        greeting = Greeting(avatar=avatar)
        greeting.avatar = db.Blob(avatar)
        greeting.put()    

app = webapp2.WSGIApplication([('/', MainHandler),
                               ('/img', Image),],
                               debug=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:26:24.607

您应该进行以下更改：

```
class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(form)
    def post(self):
        avatar = images.resize(self.request.get('img'), 32, 32)
        greeting = Greeting()
        greeting.avatar = db.Blob(avatar)
        greeting.put() 
```

此外，在提供图像的处理程序中：

```
class Image(webapp2.RequestHandler):
    def get(self):
        posts = db.GqlQuery("select * from Greeting")
        for post in posts:

            self.response.headers['Content-Type'] = 'image/jpg'
            self.response.out.write(post.avatar) 
```

# c# - 使用 DrawingContext.DrawRectangle 绘制的矩形会阻止鼠标

> ID：13326226
> 
> 赞同：3
> 
> 时间：2012-11-10T21:24:58.587
> 
> 标签：c#, wpf

下面的 WPF 程序会弹出一个如下所示的窗口：

![在此处输入图像描述](../Images/247637b2dabfc187ac0f37c30a76f59d.png)

在黑色方块之外的鼠标移动会导致窗口标题随着鼠标的位置而更新。当鼠标进入方块时更新停止。

即使鼠标在正方形上，我也想`MouseMove`继续触发。有没有办法做到这一点？

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace Wpf_Particle_Demo
{
    class DrawingVisualElement : FrameworkElement
    {
        public DrawingVisual visual;

        public DrawingVisualElement() { visual = new DrawingVisual(); }

        protected override int VisualChildrenCount { get { return 1; } }

        protected override Visual GetVisualChild(int index) { return visual; }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var canvas = new Canvas();

            Content = canvas;

            var element = new DrawingVisualElement();

            canvas.Children.Add(element);

            CompositionTarget.Rendering += (s, e) =>
                {
                    using (var dc = element.visual.RenderOpen())
                        dc.DrawRectangle(Brushes.Black, null, new Rect(0, 0, 50, 50));
                };

            MouseMove += (s, e) => Title = e.GetPosition(canvas).ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:55:32.503

到目前为止，最简单的方法是使用窗口上的“隧道”事件 PreviewMouseDown。它首先被传递到窗口并在层次结构中向上工作。因此，您在窗口中有哪些其他元素并不重要。在代码中：

```
public partial class Window1 : Window {
    public Window1() {
        InitializeComponent();
        this.PreviewMouseMove += new MouseEventHandler(Window1_PreviewMouseMove);
    }
    void Window1_PreviewMouseMove(object sender, MouseEventArgs e) {
        this.Title = e.GetPosition(this).ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T22:13:02.313

您需要[捕获](http://msdn.microsoft.com/en-us/library/ms591452%28v=vs.110%29.aspx)鼠标，这将允许您`Canvas`继续响应`MouseMove`事件，尝试类似这样的操作，只要按下鼠标，它就会更新您的坐标

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();

        var canvas = new Canvas();
        Content = canvas;

        var element = new DrawingVisualElement();

        canvas.Children.Add(element);
        CompositionTarget.Rendering += (s, e) =>
        {
            using (var dc = element.visual.RenderOpen())
                dc.DrawRectangle(Brushes.Black, null, new Rect(0, 0, 50, 50));
        };

        Mouse.Capture(canvas);
        MouseDown += (s, e) => Mouse.Capture((UIElement)s);
        MouseMove += (s, e) => Title = e.GetPosition(canvas).ToString();
        MouseUp += (s, e) => Mouse.Capture(null);

    } 
```

* * *

**第二种方法**

```
public MainWindow()
{
    InitializeComponent();
    var canvas = new Canvas();
    Content = canvas;

    DrawingVisualElement element = new DrawingVisualElement();
    Grid myElement = new Grid();
    canvas.Children.Add(myElement);

    CompositionTarget.Rendering += (s, e) =>
    {
        using (var dc = element.visual.RenderOpen())
        {
            dc.DrawRectangle(Brushes.Black, null, new Rect(100, 0, 50, 50));
        }

        DrawingImage myImage = new DrawingImage(element.visual.Drawing);
        myElement.Height = myImage.Height;
        myElement.Width = myImage.Width;
        myElement.Background = new ImageBrush(myImage);
    };

    MouseMove += (s, e) => Title = e.GetPosition(canvas).ToString();
} 
```

* * *

**使用钩子** 一定要放一个`using System.Windows.Interop;`

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
        var canvas = new Canvas();
        Content = canvas;

        var element = new DrawingVisualElement();
        canvas.Children.Add(element);

        CompositionTarget.Rendering += (s, e) =>
        {
            using (var dc = element.visual.RenderOpen())
            {
                dc.DrawRectangle(Brushes.Black, null, new Rect(0, 0, 50, 50));
            }
        };
        this.SourceInitialized += new EventHandler(OnSourceInitialized);
    }

    void OnSourceInitialized(object sender, EventArgs e)
    {
        HwndSource source = (HwndSource)PresentationSource.FromVisual(this);
        source.AddHook(new HwndSourceHook(HandleMessages));

    }
    IntPtr HandleMessages(IntPtr hwnd, int msg,IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        if (msg == 0x200)
            Title = Mouse.GetPosition(this).ToString(); // because I did not want to split the lParam into High/Low values for Position information
        return IntPtr.Zero;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T17:39:08.213

答案就简单多了。您只需要设置 element.IsHitTestVisible=false;

# c# - 脚本中的 setTimeout 和 setInterval 函数的等价物#

> ID：13326230
> 
> 赞同：12
> 
> 时间：2012-11-10T21:25:11.067
> 
> 标签：c#, javascript, script#

如何在 C# 中通过 Script#使用`setTimeout()`和方法？`setInterval`

例如，如何写：`setInterval(function(){alert("Hello")},3000);`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T09:27:23.167

`SetTimeout()`并且`SetInterval()`是`Script`类的一部分（或`Window`对于以前版本的 Script# < 0.8）。您可以像这样将它们与内联委托一起使用：

```
int intervalid = Script.SetInterval(delegate { Window.Alert("Hello"); }, 3000); 
```

或者你可以写一个显式的处理函数：

```
Script.SetTimeout(TimeoutHandler, 3000);

void TimeoutHandler() {
    Window.Alert("Hello");
} 
```

要稍后丢弃计时器间隔，您可以使用`ClearInterval()`：

```
Script.ClearInterval(intervalid); 
```

# objective-c - 创建自己的从 UITableVIewController 扩展的类

> ID：13326234
> 
> 赞同：0
> 
> 时间：2012-11-10T21:25:28.307
> 
> 标签：objective-c, ios, xcode, uitableview

我有自己的类，它是从 UITableViewController 扩展而来的。
在这一行之后
MyClass *obj = [[MyClass alloc] init];
我有
obj.view.frame.orign.y = 20

在我通过导航控制器推送这个自定义视图之后 - 我检查了 viewDidAppear 中的 y 坐标，它变成了 0。
太奇怪了

为什么 ？是因为我在状态栏下方的自定义表格视图高度为 20 吗？
或者是其他东西。
如果是因为状态栏，为什么我可以在 (0,0) 中创建 UIButton 并且它在状态栏下方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:30:52.867

您看到的行为是正常的：
-您首先创建视图控制器，它没有附加到视图层次结构，默认情况下它采用坐标，就好像它是根控制器一样，由于状态栏，y = 20-
然后您push 视图控制器，调整大小以适应导航控制器，框架坐标是相对于父框架的坐标，即 y=0 是导航控制器的顶部，相当于主框架中的 y=20窗户。pushViewController 调整框架的大小，请参阅文档[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

> 在显示之前，视图会自动调整大小以适应导航栏和工具栏（如果存在）。

# plugins - 使用哪种插件架构

> ID：13326239
> 
> 赞同：1
> 
> 时间：2012-11-10T21:26:24.653
> 
> 标签：plugins, architecture, osgi, equinox, extensibility

我想为一个非常通用的应用程序创建一个插件扩展机制，它有很多方面和许多不同的功能。

关于我开发的更多细节：

*   我有一个 GUI 应用程序，想提供很多扩展点。我想添加菜单、操作、工具栏按钮等。
*   我有一些非 GUI 服务，它们监视编辑数据的更改等。我想注册这些服务。

我正在考虑 Equinox（例如，由于应用程序的限制，我不能使用它）及其涉及扩展和扩展点的非常好的可扩展性机制。这种方法有什么问题？有什么替代解决方案可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:11:54.367

你写什么样的应用程序？扩展和扩展点的eclipse机制是eclipse rcp的专有概念。因此，如果您编写一个 Eclipse rcp gui，那么这就是要走的路。

如果您编写服务器应用程序，那么 OSGi 服务更合适。对于服务器应用程序，我建议使用[Apache Karaf](http://karaf.apache.org/)而不是 Equinox。Karaf 可以将 Equinox 作为 OSGi 框架运行，但它还提供许多附加功能，例如从 maven repos 部署和日志支持。这是一个关于如何使用 OSGi 和 Apache Karaf 编写简单服务器应用程序的[小教程。](http://www.liquid-reality.de/display/liquid/2011/02/15/Karaf+Tutorial+Part+1+-+Installation+and+First+application)它展示了如何使用 OSGi 服务来解耦 api 和实现。

为了可扩展性，您可能希望使用一个 API 和多个服务实现。这也是可能的。您可以获取接口的服务列表，还可以通知添加和删除的服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T00:41:48.823

对于 UI 可扩展性，eclipse RCP 肯定会在该领域提供很多功能。

对于较低层，听起来您正在查看 OSGi，其中 Equinox 只是许多可能的运行时环境之一。如果您坚持按照规范进行编码，那么您可以为您的应用程序使用 Equinox、Felix ... 或任何其他实现。

当您谈论可扩展性时，您还没有真正定义您正在寻找什么，并且对于这样一个开放式问题，您正在提出它是封闭的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T02:20:00.893

使用 OGSi 时需要注意的一个问题是，它为每个包（=模块）使用类加载器来将包相互隔离。这通常很痛苦，尤其是在使用并非设计用于 OSGi 环境的库时。最后，几乎所有由此产生的类加载问题都可以解决，但解决问题可能非常耗时。

您还可以使用 spring 使您的程序模块化和可扩展。Spring 的应用程序上下文可以嵌套，因此“模块”可以使用其父级的 spring bean，反之则不行。可以告诉 Spring 自动发现类路径上所有 jar 的应用程序上下文文件。要使用这种方法对 Eclipse 扩展点进行建模，一个模块可以提供一个具有“注册”方法的 bean，其他模块可以使用该方法来挂钩。

使用来自另一个模块的服务就像在 spring 中获取对服务 bean 的引用一样简单（假设相应地设置了应用程序上下文层次结构）。

# c++ - 如何通过 for 循环从 C/C++ 函数将表返回到 Lua

> ID：13326247
> 
> 赞同：1
> 
> 时间：2012-11-10T21:27:53.153
> 
> 标签：c++, lua

我有一个 std::list 对象，我想给 Lua 一个返回其 2D 位置的函数。所以我需要创建一个表

```
{ {x,y}, {x,y}, {x,y}...} 
```

而且由于它都在一个列表中，我需要在迭代列表时创建它..

```
 lua_newtable(L_p);  // table at 0
    int tableIndex = 1; // first entry at 1

    for(    std::list<AmmoDropped*>::iterator it = m_inputAmmosDropped.begin();
            it != m_inputAmmosDropped.end();
            ++it ){

        // what do I do here

        ++tableIndex;
    }

    // returns the table
    return 1; 
```

由整数键和 'x' 和 'y' 索引：

```
 positions[0].x
 positions[0].y 
```

我通过反复试验尝试，但由于我现在不知道/不知道如何调试它，我真的迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:15:02.743

它会是这样的：

```
lua_newtable(L);    // table at 0
int tableIndex = 1; // first entry at 1

for(std::list<AmmoDropped*>::iterator it = m_inputAmmosDropped.begin();
      it != m_inputAmmosDropped.end();
      ++it ){
    lua_createtable(L, 2, 0);  // a 2 elements subtable
    lua_pushnumber(L, it->x);
    lua_rawseti(L, -2, 1);     // x is element 1 of subtable
    lua_pushnumber(L, it->y);
    lua_rawseti(L, -2, 2);     // y is element 2 of subtable
    lua_rawseti(L, -3, tableIndex++)    // table {x,y} is element tableIndex
}
return 1; 
```

警告：这是我脑海中未经测试的代码......

# php - PDF 文件到许多 PDF 文件，使用 PHP

> ID：13326250
> 
> 赞同：0
> 
> 时间：2012-11-10T21:28:05.243
> 
> 标签：php, parsing, pdf

有没有一种方法可以获取一个包含 4 页的 PDF 文件，并将其转换为 4 个 PDF 文件（可能使用 PHP 库，因为这就是我用于后端的内容）。

因此，每个 PDF 文件 (4) 将对应于原始文件中的一个页面。

我想这样做的原因是启用 PDF 中的每页评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:34:23.913

我宁愿推荐使用`pdftk`. 它可以轻松拆分或合并pdf文件。

您可以从 PHP 调用调用 pdftk 命令行工具的 Linux 脚本，或直接调用它。

希望有帮助！

*编辑*：我说 Linux 在 Linux 托管网络中思考，但 pdftk 也适用于 Windows 和 Mac。

# visual-studio-2010 - 如何停止 Visual Studio (devenv) 访问 AppData 中的大量临时文件

> ID：13326253
> 
> 赞同：1
> 
> 时间：2012-11-10T21:28:28.333
> 
> 标签：visual-studio-2010, file-io

当编译需要很长时间时，我试图解决问题，所以我启动了“进程监视器”并得到了一些意想不到的结果。

在进行构建时，Visual Studio 会在 C:\Users\USERNAME\AppData\Local\Temp 中创建大量临时文件。问题是 C 盘是一个普通的磁盘驱动器，但我们所有的源代码都在 SSD 上，所以如果我们能让 Visual Studio 尽可能多地使用 SSD 会更快。

# zend-framework - 使用 ZF 装饰器将复选框包裹在标签中

> ID：13326254
> 
> 赞同：4
> 
> 时间：2012-11-10T21:28:34.073
> 
> 标签：zend-framework, zend-decorators

在将复选框包装到标签中时，我遇到了 Zend Decorators (ZF1) 的一些问题。在我的表格中，我有一些非常简单的东西：

```
$remember = new Zend_Form_Element_Checkbox('remember');
$remember
    ->setLabel('Remember me'); 
```

在我的装饰师课上：

```
$checkboxDecorator = array(
    'ViewHelper',
    'Errors',
    'Label',
    array('HtmlTag', array('tag' => 'div', 'class' => 'controls')),
    array('decorator' => array('Holder' => 'HtmlTag'), 'options' => array('tag' => 'div', 'class' => 'control-group')),

);

$this->setDefaultElementsDecorators($this->_checkboxElement, $checkboxDecorator); 
```

得到的源代码如下：

```
<div class="control-group">
    <div class="controls">
        <label for="remember" class="optional">Remember me</label>
        <input type="hidden" name="remember" value="0">
        <input type="checkbox" name="remember" id="remember" value="1">
    </div>
</div> 
```

我想要的是：

```
<div class="control-group">
    <div class="controls">
    <label for="remember" class="optional">
        <input type="hidden" name="remember" value="0">
        <input type="checkbox" name="remember" id="remember" value="1">
        Remember me
        </label>
    </div>
</div> 
```

我测试过的所有解决方法都失败了，请帮助我：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-14T11:01:55.613

最简单的选择是创建一个新的自定义装饰器......

```
class App_Form_Decorator_MyLabel
    extends Zend_Form_Decorator_Abstract
{
    public function render($content)
    {
        $el    = $this->getElement();
        $id    = htmlentities($el->getId());
        $label = htmlentities($el->getLabel());

        return '<label for="' . $id . '">' . $content . ' ' . $label . '</label>';
    }
} 
```

然后你的`$checkboxDecorator`变成：

```
$checkboxDecorator = array(
    'ViewHelper',
    'MyLabel', // Your new class
    'Errors',
    array('HtmlTag', array('tag' => 'div', 'class' => 'controls')),
    array(
        'decorator' => array('Holder' => 'HtmlTag'),
        'options'   => array(
            'tag'   => 'div',
            'class' => 'control-group'
        )
    )
); 
```

# java - 在 Java 中实现具有一定透明度的光标

> ID：13326256
> 
> 赞同：7
> 
> 时间：2012-11-10T21:28:51.437
> 
> 标签：java, swing, transparency, alpha-transparency, mouse-cursor

我有一个 35x40 像素。我想在 Swing 应用程序中用作自定义光标的 png 图像。该图像具有发光，因此包含 Alpha 透明度值。问题是当我尝试使用传统的方法`Toolkit`来生成自定义光标时，我会得到黑色像素，其中应该是 alpha 透明度值。

这是我用于光标的图像： [https ://dl.dropbox.com/u/1186703/cursor.png](https://dl.dropbox.com/u/1186703/cursor.png)

这是我的代码：

```
public static void main(String[] args) throws IOException {

     new Sandbox().gui();

}
private Cursor cursor;

private Toolkit kit;

private Image cursorImage;

public void gui() {

    kit = Toolkit.getDefaultToolkit();
    cursorImage = kit.createImage(getClass().getResource(
            "/aurora/V1/resources/cursor.png"));

    cursor = Toolkit.getDefaultToolkit().createCustomCursor(
            cursorImage, new Point(0, 0), "CustomCursor");

    setSize(800, 800);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setVisible(true);
    setCursor(cursor);
} 
```

这是当前的结果：

![结果](../Images/d18966cca0589218af35ab182a54e30e.png)

**编辑**似乎这种方法在跨平台上效果不佳，例如 Windows LAF 不支持半透明。因此，我正在寻找任何解决方案来让它在 Windows 上工作，假设这个实现在 Mac OSX 上工作，我可以在代码中指定根据应用程序运行的操作系统使用哪个实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T22:01:55.317

您的代码和光标图像实际上会在带有半透明蓝色边框的 MacOS X 10.7.5 (jdk 1.6.0_31) 上产生所需的结果。但我确实注意到[这个答案](https://stackoverflow.com/a/8653991/504685)中有一条评论说默认的 Windows 外观不支持部分透明度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T05:45:54.110

您遇到的问题与`Cursor`（在 Windows 下）不考虑图像透明度值的类有关

这绝不是一个“真正的”解决方案，而更多的是“捏造”结果......

```
public class TestMouseCursor {

    public static void main(String[] args) {
        new TestMouseCursor();
    }

    public TestMouseCursor() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MouseCursorPane());
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MouseCursorPane extends JPanel {

        private BufferedImage cursorImage;
        private Toolkit kit;

        public MouseCursorPane() {
            try {
                kit = Toolkit.getDefaultToolkit();
                cursorImage = ImageIO.read(getClass().getResource("/cursor02.png"));
                for (int i = 0; i < cursorImage.getHeight(); i++) {
                    int[] rgb = cursorImage.getRGB(0, i, cursorImage.getWidth(), 1, null, 0, cursorImage.getWidth() * 4);
                    for (int j = 0; j < rgb.length; j++) {
                        int alpha = (rgb[j] >> 24) & 255;
                        if (alpha < 128) {
                            alpha = 0;
                        } else {
                            alpha = 255;
                        }
                        rgb[j] &= 0x00ffffff;
                        rgb[j] = (alpha << 24) | rgb[j];
                    }
                    cursorImage.setRGB(0, i, cursorImage.getWidth(), 1, rgb, 0,
                            cursorImage.getWidth() * 4);
                }
                Cursor cursor = Toolkit.getDefaultToolkit().createCustomCursor(
                        cursorImage, new Point(0, 0), "CustomCursor");

                setCursor(cursor);

            } catch (Exception exp) {
                exp.printStackTrace();
            }
        }
    }
} 
```

我得到了[这里的想法](http://www.informit.com/articles/article.aspx?p=1189079)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T14:44:31.573

If you are desperate and absolutely must have transparent cursor, no matter the consequences, you can use JNI and set the cursor manually using Win32 API. Windows since XP support alpha cursors, so you should be ok with that.

But you lose platform independence. And based on Windows settings, the alpha blending might be turned off for that particular user.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T00:41:05.070

另一种方法是伪造光标。

看看 Alexander Potochkin 的[Well Behaved GlassPane](http://weblogs.java.net/blog/alexfromsun/archive/2006/09/a_wellbehaved_g.html)。

特别是，运行示例代码，选择`Options>GlassPane is Visible`和`Options>Final GlassPane`。

从这里开始，加载一个*完全*透明的光标图像，然后在玻璃板上绘制一个适当的 alpha 混合光标。

# javascript - 将一张图像淡入另一张图像

> ID：13326258
> 
> 赞同：5
> 
> 时间：2012-11-10T21:28:57.550
> 
> 标签：javascript, jquery

这应该是一个简单的问题。当我按下一个按钮时，我想淡出一个图像并淡入一个新图像。我有一个绑定到此功能的按钮：

```
function changeBackground() {
var background = document.getElementById("background");
var h_background = document.getElementById("background_hidden")

$('#background').fadeOut('slow', function() {$('#background_hidden').fadeIn('slow')});
} 
```

在 CSS 中，h_background 有一个 display: none; 属性。使用此功能，当前图像将淡出，另一张将显示，但不会淡入 - 它会突然出现。

关于我可能做错了什么的任何想法？

添加了一个 jsfiddle，但它目前不起作用 - 试图找出原因。 [http://jsfiddle.net/qrCjA/8/](http://jsfiddle.net/qrCjA/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:57:29.593

我分叉了你的小提琴并稍微清理了代码：http: [//jsfiddle.net/4FzqA/](http://jsfiddle.net/4FzqA/)。

在我的清理版本和你的原始版本之间查看后，唯一的区别是我的小提琴设置为“onDomReady”，而你的设置为“onLoad”。

否则，代码应该可以正常工作。

```
window.onload = function() {
    var button = $("#fade_out").click(changeBackground);
}

function changeBackground() {
    $('#background').fadeOut('slow', function() {
        $('#background_hidden').fadeIn('slow');
    });
} 
```

**编辑**：看起来 window.onload 与原始小提琴中的 onLoad 冲突，因为原始小提琴对我不起作用。当我将 window.load 更改为准备好文档时，一切都很好，所以：

```
$(document).ready(function() {
    var button = $("#fade_out").click(changeBackground);
}); 
```

**另一个编辑**：如果图像很大，您可以尝试等待它加载，但请记住，如果从缓存中拉出加载将不会触发：

```
$(document).ready(function(){
   var img = new Image();
   $(img)
      .hide()
      .load(function(){
         $("body").append(this);
         $(this).fadeIn(3000);
      })
      .attr("src", "files/originals/01.jpg");
}); 
```

取自：[在 Chrome 中淡入大图像](https://stackoverflow.com/questions/3979552/fading-in-large-images-in-chrome)。

**另一个编辑：**从它的声音来看，您可能是正确的猜测这是图像大小的问题。我用新图像和负载更新了我原来的小提琴（[http://jsfiddle.net/4FzqA/7/ ）。](http://jsfiddle.net/4FzqA/7/)请注意，每次都加载图像，效率不高。但它会给你一个想法。下面是JS：

```
$(document).ready(function() {
    var button = $("#fade_out").click(changeBackground);
});

function changeBackground() {
    $('#background').fadeOut('slow', function () {
        $('#background_hidden')
            .attr('src', 'http://img688.imageshack.us/img688/8633/daynightm.jpg?' + (new Date()).getTime())
            .load(function () { 
                $(this).fadeIn('slow'); 
            });  
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:03:39.260

尝试这个：

```
$("#fade_out").click(function(){
    changeBackground();
});

function changeBackground() {
    var background = document.getElementById("background");
    var h_background = document.getElementById("background_hidden")

    $('#background').fadeOut('slow', function() {
        $('#background_hidden').fadeIn('slow');
    });
}
​ 
```

它适用于这个 JS 小提琴：http: [//jsfiddle.net/4FzqA/1/](http://jsfiddle.net/4FzqA/1/)

# javascript - setInterval() 浏览器队列

> ID：13326261
> 
> 赞同：2
> 
> 时间：2012-11-10T21:29:29.877
> 
> 标签：javascript

我知道该`setInterval`函数几乎是单线程的。但是如果我们将时间设置为一个非常小的值，比如 50 毫秒：

```
setInterval(function()
{
  // do really heavy stuff
}, 50); 
```

那么第一个生成的事件可能不会及时完成然后我猜第二个事件被放入浏览器的队列，然后是第三个，第四个等等。所以基本上这意味着浏览器的队列变得非常快，这显然不是一件好事（是吗？ ）

到目前为止，我已经提出了这两个解决方案：

1）等待第一个事件完成，然后调用第二个事件（通过使用超时）：

```
var func = function()
{
  setTimeout(function()
  {
    // do really heavy stuff and when it's finished call again
    func();
  }, 50)
} 
```

2) 创建一个监控事件状态的标志：

```
var isIntervalInProcess = false;
setInterval(function()
{
  if ( isIntervalInProcess )
    return false;

  isIntervalInProcess = true;

  // do really heavy stuff

  isIntervalInProcess = false;

}, 50); 
```

那些消除事件重叠的最佳实践是否重叠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:36:53.830

> 这些消除事件的最佳实践是否重叠？

您提供的第一个示例是一种用于避免`setInterval`. 就“最佳实践”而言，您应该为正确的情况选择正确的技术（是的，不幸的是，这很模糊）。

`setInterval`在动画中使用短时间间隔很常见。在这些情况下，应为性能优化回调并轻松取消。jQuery 使用 15ms 的延迟，效果很好。

对于运行时间较长的函数，最好将它们分解为异步函数队列。一遍又一遍地排队相同的功能与您的第一个`setTimeout`示例相同。

您的第二个示例存在回调队列中的项目永远不会乱序执行的问题。第二个排队的函数只会在第一个函数执行后才被调用*，*此时可能会有 2 或 3 个更多的函数排队。

然而，有一种`cached polling`技术允许回调的主体仅在发生状态更改时执行：

```
(function () {
    var temp;
    setInterval(function () {
        var val;
        val = getSomeValue(); //some fast data accessor
        if (val === temp) {
            return; //break out of the function early
        }
        ...code to execute when the state has changed...
        temp = val; //cache the last state
    }, shortDelay);
}()); 
```

# struts2 - 在struts2的页面范围内没有设置值

> ID：13326263
> 
> 赞同：1
> 
> 时间：2012-11-10T21:29:52.990
> 
> 标签：struts2, ognl

在使用这个时 -

```
<s:set var="sample" value="%{'start'}" scope="page"/> 
```

当我使用打印 var sample 的值时

```
<s:property value="#page.sample"/> 
```

我什么也得不到。当我使用 scope=request 时，我得到了值。为什么没有在页面范围内设置值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:11:27.940

要访问“页面”范围变量，您必须使用以下内容：

```
<s:property value="#attr.sample" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:16:06.480

因为JSP会被翻译成servlet，页面范围的变量是servlet生成的service()方法的局部变量，一旦service()方法终止，页面范围的变量就会被回收。

更容易说，JSP 确实有页面范围，但 servlet 没有。

# java - Java Hangman - 错误检查

> ID：13326264
> 
> 赞同：0
> 
> 时间：2012-11-10T21:29:58.983
> 
> 标签：java, error-handling, indexof

对于我的刽子手游戏，我希望有一堆错误消息来检查诸如输入的多个字母、两次猜测同一个字母等内容。到目前为止，我的完整代码：

```
 import java.awt.Color;
    import java.awt.Font;
    import java.util.Random;
    import javax.swing.JOptionPane;
    import javax.swing.UIManager;
    import javax.swing.plaf.FontUIResource;

    public class MainFrame extends javax.swing.JFrame {

        public MainFrame() {
            initComponents();
        }
        //declare variables
        static String secretWord = "";
        double result = 0;
        StringBuilder mainWord = new StringBuilder();
        StringBuilder xletters = new StringBuilder(); // letters guessed
        String[] words = {"technology", "computer", "camera", "graphic", "digital", "media", "technician",
            "photography", "troubleshoot", "pixels", "application", "download"};
        Random r = new Random();
        int randValue = r.nextInt(12);
        String guessWord = words[randValue];
        int errors = 0;
        public static int wins = 0, losses = 0;
        String foundWord = null;
        private void GuessButtonActionPerformed(java.awt.event.ActionEvent evt)         {                                            
            String strGuess = GuessText.getText(); //user input           
            String letter = strGuess;
            xletters.append(strGuess.toUpperCase());
            String GuessedLetters = xletters.toString();

            try {
    //replace underscores with letters as they are guessed
                do {
                    for (int i = 0; i < 1; i++) {
                        secretWord = secretWord + letter.charAt(0);
                        foundWord = words[randValue].replaceAll("[^" + secretWord + "]", "_ ");
                        //if user entered more than one letter
                        if (strGuess.length() > 1) {
                            JOptionPane.showMessageDialog(null, "Only one letter at a time!");
                            xletters.append("");
                            GuessedLetters = null;
                            GuessText.setText(null);
                            GuessText.requestFocusInWindow();
                        } //if letter isn't in word
                        else if (guessWord.indexOf(strGuess) == -1) {
                            JOptionPane.showMessageDialog(null, "Sorry, that wasn't in the word.");
                            errors++;
                            if (errors == 1) {
                                Hangman0.setVisible(false);
                            }
                            if (errors == 2) {
                                Hangman1.setVisible(false);
                            }
                            if (errors == 3) {
                                Hangman2.setVisible(false);
                            }
                            if (errors == 4) {
                                Hangman3.setVisible(false);
                            }
                            if (errors == 5) {
                                Hangman4.setVisible(false);
                            }
                            if (errors == 6) {
                                Hangman5.setVisible(false);
                            }
                            if (errors == 7) {
                                Hangman6.setVisible(false);
                            }
                            if (errors == 8) {
                                Hangman7.setVisible(false);
                            }
                            if (errors == 9) {
                                Hangman8.setVisible(false);
                            }
                            if (errors == 10) {
                                Hangman9.setVisible(false);
                                JOptionPane.showMessageDialog(null, "You lost! The word was: " + guessWord);
                                losses++;
                                DirectionsFrame DFrame = new DirectionsFrame();
                                DFrame.setVisible(true);
                                setVisible(false);
                                MainFrame MFrame = new MainFrame();
                                MFrame.dispose();
                                xletters.delete(0, 100);
                                secretWord = "";
                                foundWord = null;
                                strGuess = null;
                                String strLosses = Integer.toString(losses);
                                String strWin = Integer.toString(wins);
                                DirectionsFrame.WinsLabel.setText(strWin);
                                DirectionsFrame.LossesLabel.setText(strLosses);
                            }
                }
            }
                    WordLabel.setText(foundWord.toUpperCase());
                    GuessedLabel.setText(GuessedLetters);
                    GuessText.setText(null);
                    GuessText.requestFocusInWindow();
                } while (foundWord == null);
                if (foundWord.equalsIgnoreCase(guessWord)) {
                    JOptionPane.showMessageDialog(null, "Yay!");
                    wins++;
                    DirectionsFrame DFrame = new DirectionsFrame();
                    DFrame.setVisible(true);
                    setVisible(false);
                    MainFrame MFrame = new MainFrame();
                    MFrame.dispose();
                    xletters.delete(0, 100);
                    secretWord = "";
                    foundWord = null;
                    String strWin = Integer.toString(wins);
                    String strLosses = Integer.toString(losses);
                    DirectionsFrame.WinsLabel.setText(strWin);
                    DirectionsFrame.LossesLabel.setText(strLosses);
                }
            } catch (StringIndexOutOfBoundsException e) {
                JOptionPane.showMessageDialog(null, "Please enter a letter.");
                GuessedLabel.setText(GuessedLetters);
                GuessText.setText(null);
                GuessText.requestFocusInWindow();
            }
        }                                           

        private void GetButtonActionPerformed(java.awt.event.ActionEvent evt) {
            //print out underscores to begin game
            for (int i = 0; i < guessWord.length(); i++) {
                mainWord.append("_ ");
            }
            String SetMain = mainWord.toString();
            mainWord.append(secretWord);
            WordLabel.setText(SetMain);
            GuessButton.setEnabled(true);
            GetButton.setEnabled(false);
        } 
```

我遇到最多的问题是检查用户是否输入了两次相同的字母。所以你只能猜字母表中的一个字母一次。此外，它检查用户是否输入多个字母的代码我相信有一个错误，因为我希望它不将这些字母添加到猜测的字母框中，无论如何它都会添加。（即用户猜测“hf”并且在猜测的字母中为“hf”，它应该什么都没有）

我觉得答案在于方法 indexOf()，但我不完全确定 if 条件会说什么......

我正在使用 Netbeans IDE 7.2 来编译我的代码。请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:07:17.473

在您想知道某些东西是否已经被使用过的情况下，a`Set`就派上用场了。例如，在刽子手游戏中使用的字母，您将拥有`Set<String>`collection ：

```
Set<String> lettersUsed = new HashSet<String>(); 
```

如果您想知道是否已经选择了某些东西：

```
String inputLetter = "Z";  // test for the letter Z

if (!lettersUsed.contains(inputLetter)) {
    lettersUsed.add(inputLetter);

    // process letter in word
} else {
    // letter has already been used!
} 
```

如果您只想允许一组特定的字母，已经最初设置：

```
if (lettersAllowed.contains(inputLetter)) {
   lettersAllowed.remove(inputLetter);

   // process letter in word
} else {
   // letter is not allowed (anymore)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:50:39.083

为了查看他们是否已经猜到了一些东西，你可以先有一个空的字符串猜测，当他们做出猜测时，你可以将该字母添加到字符串中：

```
String guesses = "";
...
guesses+= letter; 
```

看起来你已经在做类似的事情了，但一定要附加字母，而不是为它创建一个新的字符串。这样，您可以每次检查您的猜测字符串是否已经包含新猜测的字母 (if(guesses.contains(letter))。

另外，我不确定为什么你有一个只有一次迭代的 for 循环，但在多字母的情况下，你可以尝试跳出循环，或者如果你觉得可以继续

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:53:33.057

我对你的信件检查要做的是：用用过的信件制作一个清单。每次玩家尝试一个字母时，如果该字母在您的列表中，您就会使用 for 循环检查该字母。如果不是，请将其添加到列表中。这是一个例子：

```
List<String> usedletters = new List<String>(26);

boolean checkLetterUsed(String input){
    boolean tempvariable = false;
    for(String letter: usedletters){
        if(letter==input){
            tempvariable = true;
        }
    }
    if(tempvariable){
        return true;
    }else{
        usedletters.add(input);
        return false;
    }
} 
```

# javascript - 函数内部的 setInterval 产生错误：未定义变量

> ID：13326266
> 
> 赞同：5
> 
> 时间：2012-11-10T21:30:07.017
> 
> 标签：javascript

我不明白出了什么问题。我有三个代码：
第一：

```
<script language="JavaScript" type="text/javascript">
   var count = 0;
   alert(count);
   var timer = setInterval("count = count + 1; alert(count);",10000);
</script> 
```

第二：

```
<script language="JavaScript" type="text/javascript">
  function countdown()
  {
   var count = 0;
   alert(count);
   var timer = setInterval("count = count + 1; alert(count);",10000);
  }
  countdown();
</script> 
```

第三：

```
<script language="JavaScript" type="text/javascript">
   var count = 0;
  function countdown()
  {
   alert(count);
   var timer = setInterval("count = count + 1; alert(count);",10000);
  }
  countdown();
</script> 
```

第一个代码工作正常，第二个在“setInterval”行产生错误：“未定义计数”，第三个代码再次正常工作。对于第二个代码中的 setInterval 函数，“count”变量的范围应该是全局的。为什么不是？我正在使用 Mozilla Firefox。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T21:32:09.880

由于很多原因，其中一个您刚刚遇到，永远*不会*将字符串传递给`setTimeout`or `setInterval`。曾经。我是认真的。从来没有一个好的理由。

而是传递一个函数。传递函数对象的能力是 JS 最好的特性之一。

```
var count = 0;
alert(count);

var timer = setInterval(function(){
  count = count + 1;
  alert(count);
}, 10000); 
```

您面临的问题是，以这种方式作为字符串的代码不会尊重范围。它将在全局范围内执行，这是您的变量在第二个和第三个片段中不存在的地方。第一个片段之所以有效，是因为`count`它确实是一个全局变量。

其他问题源于这样一个事实，这基本上`eval`伴随着它自己的头痛，最好完全避免。毕竟，[Eval 是邪恶的。](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&ie=UTF-8#hl=en&sugexp=les%3B&gs_nf=3&tok=xEiiO201r5heSFs5xdVZTw&cp=7&gs_id=z&xhr=t&q=eval+is+evil&pf=p&tbo=d&output=search&sclient=psy-ab&oq=eval+is&gs_l=&pbx=1&qscrl=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=97283d9747b20204&bpcl=38093640&biw=1707&bih=1302&ion=1)

# ios - Issue with UIView subclass transparency

> ID：13326269
> 
> 赞同：2
> 
> 时间：2012-11-10T21:30:40.260
> 
> 标签：ios, core-graphics, quartz-graphics

I'm trying to draw a subclass of UIView over top of an GLKView. The subclass works as a "health" indicator for the game, and transparency is required, outside of the drawn area.

![Image](../Images/c5a3b39e6e9fb1e446ebb78ae0e2d05f.png)

I have tried using

```
 self.opaque = NO;
[self setBackgroundColor:[UIColor clearColor]]; 
```

which have no effect, as well as pre-filling the view with a clear colour:

```
CGContextSetFillColorWithColor(ctx, [UIColor clearColor].CGColor);
CGContextFillRect(ctx, rect); 
```

which also has no effect. Simply setting the alpha with

```
self.alpha = 0.0 
```

also has no effect.

Any help would be appreciated!

Edit: The subclass is placed in interface builder, if it matters.

# ssl - IDEAL 的 OpenSSL 证书

> ID：13326274
> 
> 赞同：1
> 
> 时间：2012-11-10T21:31:22.883
> 
> 标签：ssl, openssl, certificate, integration, sha256

我一直在创建一个网站以链接到与 IDEAL 的高级集成。问题是当我创建自签名证书并将它们加载到站点时，我收到此错误：

签名数据失败：错误：0906A068：PEM 例程：PEM_do_header：密码读取错误 - SHA256

我已按照 IDEAL 提供的说明创建这些证书和密钥。

以下是我在 OPENSSL 中编写的命令：

genrsa –des3 –out priv.pem –passout pass:pass 2048

req –x509 –sha1 –new –key priv.pem –passin pass:pass –days 3650 –out cert.cer

任何人都可以指出错误/错误所在的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T07:45:41.977

删除密码：

```
openssl rsa -in key.pem -out key_unprot.pem 
```

# c# - 从列表中创建敌人

> ID：13326276
> 
> 赞同：1
> 
> 时间：2012-11-10T21:31:55.350
> 
> 标签：c#, list, xna, copy

所以我想从敌人列表中随机生成一个敌人，但是我找不到从列表中的 Enemy 实例创建一个新的 Enemy 实例的干净方法。这主要是因为我完全有不同对象类型的敌人（Enemy 类型的子类），所以我不能简单地将所有属性复制过来。例如：

```
List<Enemy> EnemyDB = new List<Enemy>();
EnemyDB.Add(new Enemy(150,1.8f,"grunt"));
EnemyDB.Add(new EnemyOther(60, 5.8f, "bug"));
Enemy template = EnemyDB.[get random enemy];
Enemy toBeSpawned = ????; 
```

如何获得列表敌人的新实例？有没有更好的方法完全做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:37:51.347

尝试在每个 Enemy 子类型上创建一个“克隆”方法，然后在您从列表中随机选择的那个上调用该方法。你也可以去“蝇量级”；创建一个简单地引用 Enemy 更昂贵的成员的较浅副本，例如图形元素（精灵、纹理、骨架），而不是在内存中制作多个副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:42:39.360

更改敌人的定义以实现[ICloneable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)接口，或使用[Object.MemberwiseClone](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx)方法。

另请参阅[在 C# 中创建对象的副本](https://stackoverflow.com/questions/6569486)以及[如何在 .NET（特别是 C#）中对对象进行深层复制？](https://stackoverflow.com/questions/129389)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:48:36.623

至少在概念上，您需要区分敌人*类别*（咕噜声、虫子等）和敌人*实例*。该类定义了一个敌人的*初始生命值/生命值，而一个实例代表了一个实际生成的具有个人统计数据和位置的敌人。*

有两个选项可以对此进行建模。

**类/实例模型**

您创建了两个类：一个用于敌人类，一个用于敌人实例。这`EnemyClass`是实例的[工厂](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)。`Enemy`

```
class EnemyClass
{
    public string Name { get; }
    public int InitialHealth { get; }

    public Enemy Spawn();
}

class Enemy
{
    public EnemyClass Class { get; }
    public int CurrentHealth { get; }
    public Vector2D Position { get; }
}

// define enemy classes
EnemyClass gruntClass = new EnemyClass(...);
EnemyClass bugClass = new EnemyClass(...);

// spawn an enemy
Enemy enemy = gruntClass.Spawn(); 
```

**原型模型**

只有一类，`Enemy`。对于每个敌人类，都有该类的敌人实例的[原型](http://en.wikipedia.org/wiki/Prototype-based_programming)。这个原型在游戏中不存在。要生成敌人，您需要复制原型。

```
class Enemy
{
    public string Name { get; }
    public int InitialHealth { get; }
    public int CurrentHealth { get; }
    public Vector2D Position { get; }

    public Enemy Clone();
}

// define enemy prototypes
Enemy gruntPrototype = new Enemy(...);
Enemy bugPrototype = new Enemy(...);

// spawn an enemy
Enemy enemy = gruntPrototype.Clone(); 
```

# android - ABS+SlideMenu - 从抽屉中加载片段的最佳方式

> ID：13326284
> 
> 赞同：0
> 
> 时间：2012-11-10T21:33:16.250
> 
> 标签：android, actionbarsherlock

facebook 或 google plus 应用程序如何使用`SlideMenu`!! 我有一个项目正在使用`ABS+SlideMenu`，我需要在`Fragment`.

所以基本上我有2个`Fragments`

1) 滑动菜单 -`ListView`项目

2) 内容页 -`Relative Layout`

所以很简单，我只需要在从`SlideMenu`. 最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:17:17.493

你可以在这里找到这个模式的一个很好的实现......

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

也适用于 ABS。附带很好的示例 - 所有这些都很好地捆绑到 google play 上的演示应用程序中......

[https://play.google.com/store/apps/details?id=com.slidingmenu.example&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5zbGlkaW5nbWVudS5leGFtcGxlIl0](https://play.google.com/store/apps/details?id=com.slidingmenu.example&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5zbGlkaW5nbWVudS5leGFtcGxlIl0)。

# javascript - 在 JSON 对象中搜索特定键

> ID：13326289
> 
> 赞同：1
> 
> 时间：2012-11-10T21:34:05.160
> 
> 标签：javascript, json, object, loops, iteration

我目前正在尝试遍历一个看起来像这样的 JSON 对象：

```
"coupons":{
    "item1":{
         "id":"155",
         "name":"First Item",
         "value":-5199.6
    },
    "item2":{
         "id":"255",
         "name":"Second Item",
         "value":-424.91
    }
} 
```

我想返回每个项目 id 的值。我怎样才能做到这一点？

我正在用 JS 编程。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:38:02.720

```
var coupons = {
    "item1":{
         "id":"155",
         "name":"First Item",
         "value":-5199.6
    },
    "item2":{
         "id":"255",
         "name":"Second Item",
         "value":-424.91
    }
}

var ids = [];
for(var item in coupons) {
    ids.push(coupons[item]['id']);
}

console.log(ids); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T03:00:24.300

You can use DefiantJS ([http://defiantjs.com](http://defiantjs.com)), which enables you to search a JSON structure with XPath queries. This lib extends the global object JSON with the method "search" and returns an array with the matches, if any (empty array, i no matches were found).

XPath is a standardised query language and pretty easy the grasp. Here is a testing tool with examples; [http://defiantjs.com/#xpath_evaluator](http://defiantjs.com/#xpath_evaluator)

Check out this working fiddle;
[http://jsfiddle.net/hbi99/Yc6cc/](http://jsfiddle.net/hbi99/Yc6cc/)

```
var data = {
    ...
},
res = JSON.search( data, '//*[id]' ),
str = '';

for (var i=0; i<res.length; i++) {
    str += res[i].id +' : '+ res[i].name +'<br/>';
}

document.getElementById('output').innerHTML = str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:37:17.400

```
var obj = { 'json...' };

for (var key in obj)
{
    var item = obj[key];
    alert("id is " + item.id);
} 
```

您可以使用`var .. in obj`语法来迭代任何对象的属性（或关联索引；在 JS 中相同）。始终注意您了解正在迭代的对象，因为某些对象（例如数组）具有您希望避免迭代的其他属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T21:37:36.917

每个`coupons[k]`都是项目，你可以使用`coupons[k].id`

```
var coupons = {
    "item1":{
         "id":"155",
         "name":"First Item",
         "value":-5199.6
    },
    "item2":{
         "id":"255",
         "name":"Second Item",
         "value":-424.91
    }
}

for(var k in coupons){
      console.log(coupons[k].id);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T21:44:30.923

I would suggest something like:

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
var dataset = {
                "coupons":{
                    "item1":{
                         "id":"155",
                         "name":"First Item",
                         "value":-5199.6
                    },
                    "item2":{
                         "id":"255",
                         "name":"Second Item",
                         "value":-424.91
                    }
                }
            }

$(document).ready(function(){

    $.each(dataset.coupons, function(i, item) {
        $("#data").append('<p>' + item.id + '</p>'); 
        $("#data").append('<p>' + item.name + '</p>'); 
        $("#data").append('<p>' + item.value + '</p>'); }
    );

});

</script>
<div id="contentC"></div> 
```

# macos - 只有一个具有 FireMonkey 的应用程序实例

> ID：13326292
> 
> 赞同：2
> 
> 时间：2012-11-10T21:34:38.033
> 
> 标签：macos, delphi, delphi-xe2, instance, firemonkey

使用**FireMonkey**和一个多平台应用程序（**Windows** + Mac **OS X**），如何同时运行一个应用程序的**一个实例？**

**如果以前的实例已经在运行，如何将其设置为桌面前景窗口**？

*   我可以检查文件是否被锁定：
    *   **未锁定**：我锁定并正常运行
    *   **锁定** ：找到以前的版本（在windows上，我知道怎么做..但在mac上？）并将其设置为前台窗口
*   我可以检查同一进程启动了多少次（同上，在 Windows 上，好的，但是如何在 Mac OS X 上执行）
*   ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T23:36:13.447

对于 Windows 和 OSX，您都可以获取正在运行的应用程序列表，并在关闭消息之前检查您的应用程序是否在列表中。在 OSX 中，您可以使用 NSWorkspace 的 lauchedApplications 方法获取列表，在 Windows 中，您可以使用 toolhelp32 库用于相同目的。以下是我在我的网站上发布的 TPlatformExtensions 类的相关代码。

对于 OSX：

```
uses Macapi.AppKit, Macapi.Foundation;

class procedure TPlatformExtensionsMac.GetRunningApplications(
  Applist: TStringlist);
var
  fWorkSpace:NSWorkSpace;
  list:NSArray;
  i: Integer;
  lItem:NSDictionary;
  key,value: NSString;
begin
  fWorkSpace := TNsWorkspace.Wrap(TNsWorkSpace.OCClass.sharedWorkspace);
  list := fWorkspace.launchedApplications;
  if (List <> nil) and (List.count > 0) then
  begin
    for i := 0 to list.count-1 do
    begin
      lItem := TNSDictionary.Wrap(List.objectAtIndex(i));
      key := NSSTR(String(PAnsiChar(UTF8Encode('NSApplicationBundleIdentifier'))));
      // You can also use NSApplicationPath or NSApplicationName
      value := TNSString.Wrap(lItem.valueForKey(key));
      Applist.Add(String(value.UTF8String));
    end;
  end;
end; 
```

对于 Windows：

```
uses Winapi.TlHelp32, Winapi.Windows;

class procedure TPlatformExtensionsWin.GetRunningApplications(
  Applist: TStringlist);
var
 PE: TProcessEntry32;
 Snap: THandle;
 fName: String;
begin
  pe.dwsize:=sizeof(PE);
  Snap:= CreateToolHelp32Snapshot(TH32CS_SNAPPROCESS, 0);
  if Snap <> 0 then
  begin
    if Process32First(Snap, PE) then
    begin
     fName := String(PE.szExeFile);
     Applist.Add(fName);
     while Process32Next(Snap, PE) do
     begin
       fName := String(PE.szExeFile);
       Applist.Add(fName);
     end;
    end;
    CloseHandle(Snap);
  end;
end; 
```

如果您需要有关该主题的更多信息，可以阅读我关于该主题的[文章](http://delphiscience.wordpress.com/2012/11/25/getting-list-of-running-applications-in-firemonkey-for-windows-and-osx/)。

# javascript - 使用 MeteorJS 制作 API

> ID：13326297
> 
> 赞同：0
> 
> 时间：2012-11-10T21:35:16.297
> 
> 标签：javascript, api, node.js, meteor

我想使用流星制作一个简单的 API 来使用。

这样像 www.myapp.com/artist/id 这样的 URL 会返回我在服务器上所做的一些工作的 JSON 响应。

我不确定使用流星（也许是骨干）的最佳方法。

我知道我会使用 Meteor.http.get("url") 但不太确定我应该如何定义 api 的路由。

还是最好在不同的环境中制作api，然后调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:27:33.810

您可以使用 [https://atmosphere.meteor.com/package/collection-api](https://atmosphere.meteor.com/package/collection-api)通过 RESTful API 对集合执行 CRUD 操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:15:05.133

At the moment, Meteor does not support server-side routing (Little/big bird telling me it is on the roadmap). Though with some hacky work around you can achieve it. Although if you want to keep clean code and stay away from the hacky stuff a external system might be the better choice here. BUT let's stay Meteor minded and 'hack'-away.

A server-side route can be achieved by using this code :

```
var connect = __meteor_bootstrap__.require("connect");
__meteor_bootstrap__.app
.use(connect.query())
.use(connect.bodyParser()) //I add this for file-uploading
.use(function (req, res, next) {
     Fiber(function() {
        if(req.method == "POST"){
           if(req.url.indexOf('/upload') !== -1){
             res.writeHead(200, {'Content-Type': 'application/json'});  
             res.write(JSON.stringify({"success" : true}));
             res.end();
             return;
           }
        }       
      next();
  }).run();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:57:52.363

您可以使用[page.js](https://github.com/visionmedia/page.js)来帮助您进行路由。Meteor & Backbone.js 在模型/集合和视图/模板中有一些非常相似的功能。

# math - 防止 penner 缓动中的值越界

> ID：13326299
> 
> 赞同：0
> 
> 时间：2012-11-10T21:35:18.953
> 
> 标签：math, graphics2d, easing-functions

我正在开发一个使用以下缓动函数在屏幕上移动对象的项目：

```
function easeinoutquart(t,b,c,d) as float
    't=time, b=startvalue, c=change in value, d=duration
    d=d/2
    t=t/d
    if (t < 1) then 
        return c/2*t*t*t*t + b
    end if
    t=t-2
    return -c/2 * (t*t*t*t - 2) + b
end function 
```

我经常遇到值迅速超出范围导致对象以令人眼花缭乱的速度移出屏幕的情况。第一种情况似乎是由于将函数的结果截断为整数值引起的，我已修复了这一点。触发完全相同行为的下一件事似乎是在对象停止并输入新的缓动距离后时间值未重置。一旦我在更改目标值（change=destination-start）后添加了一个重置​​，这似乎完全解决了问题。

现在，我在下载和换出图像的循环中添加了更多代码。似乎循环中增加的执行时间有时会导致值超出范围，从而产生相同的模糊图像冲出屏幕。

简要描述代码：

```
loop
   check for user input (up down left right select) 
      if so set new dest position for all images, reset timer for all images
      if a new image is selected on screen, load related content, reset related content timer

      is there an image in the queue to download? if so get initiate async download
      are any images downloaded? If so swap out temp image with final image

      call easing function for primary images (vertical movement on y axis)
      call easing function for related content (horizontal movement on x axis)
      draw all graphics and swap display buffer
end loop 
```

在添加图像下载/交换（实际交换只是更改指针）代码之前，预加载图像和临时图像一切正常。现在我首先加载临时图像并进行交换，我认为循环有时会在超过 1/30 秒的时间内执行，这可能导致计时器值变得奇怪。

所以本质上，我想知道是否有某种“调节器”钳位可以放在值上，以防止缓动函数产生快速失控的疯狂值。例如，在单次迭代中移动的总距离不应超过 250 个像素，实际上应该始终只接近目标值的几个像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:11:03.437

虽然我确定我没有很好地提出这个问题，但我终于找到了答案。我遇到的问题是时间值大于持续时间值引起的。

在上述函数中，您不输入目标值，只输入当前值以及起点和终点之间的差异。我想出的解决方案是：如果调用缓动函数之间的执行时间超过缓动完成所允许的最大持续时间值，那么只需将起始值设置为等于目标值。

time 是自缓动函数启动以来的毫秒数：

```
change=destination-currentposition
currentposition=inoutquart(time,currentposition,change,duration)
if time > duration then startarray[i]=destarray[i] 
```

因此，如果时间超过持续时间，我们将输出值钳制到目标位置。

# java - 带有中间证书的 Android SSL 信任链 (Apache HttpClient 4.X)

> ID：13326302
> 
> 赞同：5
> 
> 时间：2012-11-10T21:35:25.250
> 
> 标签：java, android, ssl, certificate, apache-httpclient-4.x

我正在尝试使用 Apache 的 HttpClient 4.X 从 Android 应用程序查询 HTTPS 网站。我得到一个`javax.net.ssl.SSLPeerUnverifiedException: No peer certificate`例外。我按照不同的说明导入证书：

*   [在 Android 上连接到此 HTTPS 站点时，如何避免出现“无对等证书”错误？](https://stackoverflow.com/questions/7583548/how-do-i-avoid-getting-no-peer-certificate-error-when-connecting-to-this-https?rq=1)
*   [HTTPS 连接安卓](https://stackoverflow.com/questions/995514/https-connection-android#1000205)
*   [带有 Android 和自签名服务器证书的 HTTPS GET (SSL)](https://stackoverflow.com/questions/3761737/https-get-ssl-with-android-and-self-signed-server-certificate/4008166#4008166)

这些都不适合我。

我认为我的问题是该站点的证书链如下：

*   电信根 CA 2
    *   中级甲
        *   中级乙
            *   站点证书

*Telekom Root CA 2*包含在Android 默认密钥库 ( `/system/etc/security/cacerts.bks`) 中。我在用于测试的自己的手机上进行了检查。

现在的问题是，我必须在自定义密钥库中包含所有说明告诉我提供哪些证书？只是中间体？只有网站？两个都？我也需要根证书吗？不应该`Site's certificate`由链验证 - 我不需要提供任何额外的证书，因为链的根是受信任的。

如果您能向我解释发生了什么以及如何使它发挥作用，我会很高兴。请不要发布忽略证书的解决方法，因为这是用于生产并且必须是安全的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-12T23:26:58.710

我写了一篇博文，包括一个完整的工作示例，关于如何做到这一点。见[http://chariotsolutions.com/blog/post/https-with-client-certificates-on/](http://chariotsolutions.com/blog/post/https-with-client-certificates-on/)

（[来自 GitHub 上该博客文章的代码](https://github.com/rfreedman/android-ssl)）

# javascript - 包含自定义信息的 DOM 元素

> ID：13326305
> 
> 赞同：1
> 
> 时间：2012-11-10T21:35:56.903
> 
> 标签：javascript, attributes, element

我有一个显示时间的 DOM 元素：

```
<div id="time"></div> 
```

时间显示功能是用 JavaScript 编写的。但我还需要保存有关此元素的其他信息，例如时间模式。我的意思是，如果我调用一个类似`getElementById`（只是一个例子）的函数，我想知道这个元素的附加属性（在我的情况下是时间模式）是否可以这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:39:33.360

您可以使用`data`属性。它们旨在存储数据：

```
<div id="time" data-pattern="test"></div> 
```

还有一些测试 JavaScript：

```
​var time = document.getElementById('time');

console.log(time.getAttribute('data-pattern')​​​​);​ 
```

如果您使用的是 jQuery，您可以使用该`.data()`方法提取值并自动转换常见的数据类型：

```
$('#time').data('pattern'); 
```

**演示：http: [//jsfiddle.net/UPufH/](http://jsfiddle.net/UPufH/)**

# iphone - SSCollectionView 删除部分

> ID：13326308
> 
> 赞同：0
> 
> 时间：2012-11-10T21:36:24.453
> 
> 标签：iphone, objective-c, ios, sstoolkit

我正在删除一个部分，`SSCollectionView`如下所示：

```
[self.collectionView beginUpdates];
[self.collectionView deleteSections:[NSIndexSet indexSetWithIndex:0] withItemAnimation:SSCollectionViewItemAnimationFade];
[self.collectionView endUpdates]; 
```

这正是其文档所描述的。但是，我收到以下错误：

`*** Assertion failure in -[SSCollectionViewTableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:1054`

我在做什么有什么问题？这几乎就是正在更新和结束更新块与`UITableView`s 和 iOS 中的其他视图控制器一起工作的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:01:27.640

在您的错误日志中：它确实提到了`UITableView`. 也许你把你的课搞混了？检查您的父类是否一切正常，并且您已在 Interface Builder 中分配了正确的类。

# actionscript-3 - AS3: Importing classes/Sharing variables between classes

> ID：13326312
> 
> 赞同：0
> 
> 时间：2012-11-10T21:36:39.617
> 
> 标签：actionscript-3, class

Ok, this is my problem: i have a variable in a class named Mirror

```
public var line:Sprite = new Sprite(); 
```

i want to use that variable in another class named MovieClip. I imported the class in the MovieClip class:

```
 public class MovieClips extends MovieClip
{
    import Mirror;
    public function MovieClips(radius:int, _x:int, _y:int,size:int,span:int,addl:Array) 
    {.... 
```

but when i try to do something like this:

```
if (Mirror.line.hitTestObject(ball) == true) {
                    speedY *= -1;
                } 
```

It shows up like an error: Acess of a possibly undefined property line through a reference with static type Class. I'm not sure what did i do wrong? Am i importing my class in the wrong way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:21:34.820

您应该将`Mirror`对象传递给您的`MovieClips`对象，如下例所示：

```
package {

    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.events.Event;

    public class Main extends Sprite 
    {

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);

        }// end function

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            var mirror:Mirror = new Mirror();
            var movieClips:MovieClips = new MovieClips(mirror);

        }// end function

    }// end class

}// end package

import flash.display.MovieClip;

class Mirror extends MovieClip {

    public var line:MovieClip;

    public function Mirror():void {

        line = new MovieClip();

    }// end function

}// end class

class MovieClips extends MovieClip {

    public function MovieClip(mirror:Mirror):void {

        mirror.line;

    }// end function

}// end class 
```

您也可以通过`Mirror.line`只读来改进这一点：

```
class Mirror extends MovieClip {

    private var _line:MovieClip;

    public function get line():MovieClip {

        return _line;

    }// end function

    public function Mirror():void {

        _line = new MovieClip();

    }// end function

}// end class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:30:09.880

如果你有一个类，喜欢`Mirror`并做类似的事情`Mirror.line`，这意味着你正在尝试访问一个名为 line 的静态类变量。静态变量/方法与类相关，而不是该类的实例。

您尚未将 line 定义为静态变量，因此您会收到错误消息。我不确定您是否希望它成为静态变量，并且很可能您只是将类与`Mirror`类的实例混淆了`Mirror`。

您可能在某处创建 Mirror 类的实例：
`var myMirror:Mirror = new Mirror()`或者如果使用 FlashPro，则在时间线上拖动一个实例（然后可以给它一个“myMirror”实例作为示例）。

您将访问`line`Mirror 类的实例。所以有了上面的内容`myMirror.line`。

导入一个类不会让您访问该类的任何实例，因此如果您希望能够`Mirror`从您的`MoveClips`类中访问一个实例，您需要传入对它的引用，或者使用`parent`关键字来获取到正确的范围（因此，如果您的 Mirror 实例和您的 MovieClips 实例在同一时间线/父级上，您可以这样做`Mirror(MovieClip(parent).myMirror).line`- 假设您的父级是 MovieClip 类型）。

* * *

如果您确实希望它作为静态变量，只需将静态访问修饰符添加到它的定义中。

```
public static var line:Sprite 
```

请记住，静态变量始终在内存中，无论您是否创建了它们的任何实例。

# java - Spring. Redirect to external url in controller without encoding

> ID：13326313
> 
> 赞同：0
> 
> 时间：2012-11-10T21:36:46.157
> 
> 标签：java, spring, jakarta-ee, spring-mvc

I am trying to make redirect to external URL in my controller:

```
return "redirect:" + url; 
```

all works fine for common urls, but now I need to redirect for url which contain other url as parameter (partner program referrer url). I have configured `CharacterEncodingFilter` in my `web.xml`. And as I understand this filter encode my parameter url to `UTF-8` characters ('http://' encoded to 'http%3A%2F%2F'). This throw error in partner program.

How can I avoid encoding url in my controller?

Perhaps my conclusions contain errors?

# .net - .net Reference Assemblies 文件夹是否必须在系统驱动器上？

> ID：13326314
> 
> 赞同：3
> 
> 时间：2012-11-10T21:36:52.890
> 
> 标签：.net, performance, assemblies

在查看 Visual Studio 中的构建时间问题时，我看到使用 System Monitor 它正在从 .net Reference Assemblies 文件夹中读取大量文件。

.net Reference Assemblies 文件夹位于作为普通驱动器的系统驱动器上；但是我们在每台机器上都有一个 SSD。那我可以把它移到SSD上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T12:09:10.690

老实说，我更喜欢 Tim Medora 的方法，因为它更干净，整体上会给你带来很大的提升。我刚刚在我的工作笔记本电脑中安装了一个 SSD，它非常棒。

但是，是的，我认为如果您真的愿意，您可以将参考程序集从系统驱动器中复制出来。我不认为微软支持它，但我认为它会起作用。

在阅读 ResolveAssemblyReference 是与该参考程序集文件夹最密切相关的任务后，我在 Microsoft.Common.targets 中进行了一些挖掘。

然后我发现了这个（我专门看 3.5，x64 版本）：

```
<!--
============================================================
                                    GetReferenceAssemblyPaths

Get the paths for the Reference Assemblies for the known versions of the
.NET Framework.

These paths are used by the build process in order to resolve the correct
assemblies from the various directories, and to support multi-targeting
============================================================
-->
<PropertyGroup>
    <GetReferenceAssemblyPathsDependsOn></GetReferenceAssemblyPathsDependsOn>
</PropertyGroup>
<Target
    Name="GetReferenceAssemblyPaths"
    DependsOnTargets="$(GetReferenceAssemblyPathsDependsOn)">

    <!-- Ordering of target framework directories doesn't matter except for assemblies
         that aren't in a redist list; for those, make sure we order 3.5, 3.0, 2.0 -->

    <PropertyGroup Condition=" '$(TargetFrameworkVersion)' == 'v3.0' or '$(TargetFrameworkVersion)' == 'v3.5' ">        
        <TargetFrameworkDirectory>$(WinFXAssemblyDirectory);$(TargetFrameworkDirectory)</TargetFrameworkDirectory>
    </PropertyGroup>

    <PropertyGroup Condition=" '$(TargetFrameworkVersion)' == 'v3.5' ">        
        <TargetFrameworkDirectory>$(Registry:HKEY_LOCAL_MACHINE\Software\Microsoft\.NETFramework\AssemblyFolders\v3.5@All Assemblies In);$(TargetFrameworkDirectory)</TargetFrameworkDirectory>
    </PropertyGroup>

</Target> 
```

请注意 TargetFrameworkDirectory 属性的注册表位置 - 果然，它指向该引用程序集文件夹。

我可以看到 3 个选项 - 可能还有其他选项：

1.  更改 .NET 版本的相应 .targets 文件并硬编码系统路径
2.  更改注册表项（这可能会导致讨厌的副作用）
3.  尝试在构建时使用 MSBuild 覆盖 TargetFrameworkDirectory 的值

很想知道这是否适合你！

# javascript - Kendo-UI网格使用Javascript在网格中设置值

> ID：13326316
> 
> 赞同：23
> 
> 时间：2012-11-10T21:37:01.783
> 
> 标签：javascript, data-binding, kendo-ui, kendo-grid

我只是想知道如何在 JavaScript 中更改网格中一行的值，以便在网格和底层数据源中将其标记为“脏”。

例如，我有一个联系人/客户列表。他们有 3 个字段 FirstName/LastName/IsPrimaryContact。只能有 1 个主要联系人，因此当记录上的主要联系人设置为 true 时，我有 JavaScript 代码循环遍历数据源并将任何其他联系人设置为主要联系人设置为 false。

JavaScript 一切正常，数据字段设置正确，但有两个问题： 1\. 网格没有随着我在后台对数据源所做的更改而更新 2\. 更改的记录未标记为“脏”，因此当我调用 Datasource.sync() 时没有同步回来

我可以通过手动设置记录上的脏字段来解决第二个问题，但这似乎不对。感觉我应该在网格级别更新字段，以便它在 UI 和数据源中处理它。

关于如何解决这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-11T07:33:54.257

基本上，当您想要更新记录时，您应该使用模型的**[set](http://docs.kendoui.com/api/framework/model#set)**方法。例如，要更新 dataSource 的第一条记录，您应该像这样更新它：

```
var firstItem = $('#GridName').data().kendoGrid.dataSource.data()[0];
firstItem.set('FirstName','The updated Name'); 
```

上面应该自动将标志标记为脏，它会通知 Grid 有更改，因此 Grid 将自动[刷新](http://docs.kendoui.com/api/web/grid#refresh)。

此外，如果您想直接检索与特定行相关的对象，您可以使用 Grid 的[dataItem](http://docs.kendoui.com/api/web/grid#dataitem)方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-24T13:12:31.573

我以一种非常简单有效的方式做到这一点：

```
 var employee = employeeDataSource.get(employeeId);
     employee.dirty = true;  // set it as dirty
     employeeDataSource.sync();  //Tell the DataSource object to save changes 
```

这是一个老问题，但希望它可以帮助任何有同样问题的人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-12T04:33:43.310

在上面的 Pechka 回答之后，我添加了一些额外的代码来用脏标志标记已编辑的单元格。

这是我在列上需要的剃须刀代码，我添加了一个类名，以便以后可以在 jquery 选择器中使用。

```
columns.Bound(r => r.RoomRate).HtmlAttributes(new { @class = "grid-allotment-roomrate" }); 
```

这是我的 Jquery 代码，用于在从服务器端成功检索数据后更新单元格并标记已编辑的单元格。

```
var dataSource = $("#grid-allotments").data("kendoGrid").dataSource;
var data = dataSource.data();
$.each(data, function (index, rowItem) {
    var checkbox = $("#checkbox_" + rowItem.RoomTypeId + "_" + rowItem.Date.getTime());
    if (checkbox != null && checkbox.is(':checked')) {
        $.ajax({
            url: "RackRate/GetRackRateForRoomTypeOn",
            type: "POST",
            data: { roomTypeId: rowItem.RoomTypeId, date: rowItem.Date.toUTCString() },
            success: function (result) {
                data[index].set('RoomRate', result);
                $('tr[data-uid="' + rowItem.uid + '"] .grid-allotment-roomrate').prepend('<span class="k-dirty"></span>');
            }
        });
    }
}); 
```

下面是负责高亮显示脏标志的代码行。

```
$('tr[data-uid="' + rowItem.uid + '"] .grid-allotment-roomrate').prepend('<span class="k-dirty"></span>'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-22T05:06:17.027

我以这种方式使用它 - 至少使用复选框。我将使用“编辑”按钮设置列，如下所示：

```
columns.Command(command => {command.Edit().HtmlAttributes(new { id = "btnEdit_" + "${Id}" }); }).Width(100).Hidden(true); 
```

并在单击第一列的位置（我有一个带有超链接的图像）使用 onclick 函数以编程方式单击“编辑”按钮，单击复选框，然后单击“更新”按钮。可能更“老派”，但我喜欢知道它遵循我自己更新它时的顺序。

我传入对象（“t​​his”），所以当它出现时，我可以获取行和复选框，新状态为 0 或 1（我有一些使用它的代码，不过，对于这个演示来说并不是必需的，所以我'为了简单起见，我将那部分从我的函数中删除），以及该项目的 ID：

```
columns.Bound(p => p.IsActive).Title("Active").Width(100).ClientTemplate("# if (IsActive == true ) {# <a href=javascript:void(0) id=btnActive_${Id} onclick=changeCheckbox(this, '0', ${Id}) class='k-button k-button-icontext k-grid-update'><img style='border:1px solid black' id=imgActive src=../../Images/active_1.png /></a> #} else {# <a href=javascript:void(0) id=btnActive_${Id} onclick=changeCheckbox(this, '1', ${Id}) class='k-button k-button-icontext k-grid-update'><img style='border:1px solid black' id=imgActive src=../../Images/active_0.png /></a> #}#");

function changeCheckbox(obj, status, id) {
    var parentTr = obj.parentNode.parentNode;
    $('[id="btnEdit_' + id + '"]').click();

    parentTr.childNodes[5].childNodes[0].setAttribute("id", "btnUpdate_" + id); // my Update button is in the 6th column over
    parentTr.childNodes[0].childNodes[0].setAttribute("id", "chkbox_" + id);
    $('[id=chkbox_' + id + ']').click().trigger("change");
    $('[id=chkbox_' + id + ']').blur();

    var btnUpdate = $('[id="btnUpdate_' + id + '"]');
    $('[id="btnUpdate_' + id + '"]').click();

} 
```

当然，上面的代码假定复选框位于第一列。否则，`childNodes[0]`将该 chkbox setAttribute 行上的第一个调整为它所在的列，减一，因为它从零开始计数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-26T12:10:45.440

对我来说这个工作（无需实例化网格）：

```
 select: function(e) {
           console.log("select");
           var item = e.item;
           var text = item.text();
           var index = item.index();
           console.log(item);
           console.log(text);
           console.log(index);
           var dataItem = this.dataItem(index);
           console.log(dataItem);
           // SET RETURNED VALUES FOR MODEL
           options.model.set("actionName.id", dataItem.id);
         } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-09T15:22:11.540

`set("fieldname",value)`将自动刷新网格，有一种简单的方法可以同时更新 UI 值和字段值，而无需刷新。只是做，例如：

```
 data.FieldName = "Whatevervalue";
    $(currentrow.children()[getColumnIndex("FieldName")]).text("Whatevervalue");

    function getColumnIndex(columnName) {
    var index;
    var columns = $("#grid").data("kendoGrid").columns;
    for (var i = 0; i < columns.length; i++) {
        if (columns[i].field == columnName) {
            index = i;
            return index;
        }
    }
}

    var data = $grid.data("kendoGrid")._data;
    var currentrow = $grid.data("kendoGrid").tbody.find("tr[data-uid='" +      data[i].uid + "']"); 
```

希望这可以帮助

# php - 关联数组，查找值中的重复项

> ID：13326325
> 
> 赞同：1
> 
> 时间：2012-11-10T21:38:04.620
> 
> 标签：php, arrays

我使用的数组是从三个不同的数组（3 个不同的 mysql 结果）合并而来的数组。每个数组都是一个具有几个字段的关联数组，该`count`字段是我需要的字段。

下面的数组是一个复式。我想检查数组并检查是否有重复项（`id`字段）并计算计数字段的总和。解决此问题的最佳做法是什么？

```
array(21) {
[2] => array(6) {
  ["id"] => string(2) "71"
  ["artist"] => string(7) "Arsenal"
  ["title"] => string(10) "Oyebo Soul"
  ["genres_id"] => string(2) "13"
  ["mbid"] => string(36) "0048d294-1557-4e05-8c82-8bc3f8f11923"
  ["count"] => string(1) "4"
}
[3] => array(6) {
  ["count"] => string(1) "3"
  ["id"] => string(2) "71"
  ["artist"] => string(7) "Arsenal"
  ["title"] => string(10) "Oyebo Soul"
  ["genres_id"] => string(2) "13"
  ["mbid"] => string(36) "0048d294-1557-4e05-8c82-8bc3f8f11923"
} 
```

结果将是这样的：

```
[3] => array(6) {
  ["count"] => string(1) "7"
  ["id"] => string(2) "71"
  ["artist"] => string(7) "Arsenal"
  ["title"] => string(10) "Oyebo Soul"
  ["genres_id"] => string(2) "13"
  ["mbid"] => string(36) "0048d294-1557-4e05-8c82-8bc3f8f11923"
} 
```

希望这有任何意义。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:50:27.837

肯定会有很多不同的方法来解决这个问题，但我脑海中浮现的第一个方法是[`array_reduce()`](http://us3.php.net/manual/en/function.array-reduce.php)在每组“重复”专辑中使用：

```
// Group and index the albums by 'mbid'...
$indexed = array();

foreach ($albums as $album) {
    $indexed[$album['mbid']][] = $album;
}

// Reduce all the album groups by simply totaling their 'count's...
$indexed = array_map(function($albums) {
    return array_reduce($albums, function($a, $b) {
        $a['count'] += $b['count'];
        return $a;
    });
}, $indexed); 
```

**Note:** This solution assumes that all the information in each album duplicate is identical except the `count`, as is the case in your example.

# php - 列出数组 PHP 的更简单方法？

> ID：13326326
> 
> 赞同：-4
> 
> 时间：2012-11-10T21:38:08.320
> 
> 标签：php, arrays

> **可能重复：**
> [仅使用 Foreach 循环打印多维数组将](https://stackoverflow.com/questions/5611483/printing-a-multi-dimensional-array-using-foreach-loop-only)
> [多个关联数组合并到单个关联数组数组](https://stackoverflow.com/questions/12873951/merge-multiple-associative-arrays-to-a-single-array-of-associative-arrays)

我有一个脚本，它循环从不同页面抓取链接并将它们放入具有不同键的数组中。现在我希望脚本将所有最终链接回显到一个列表中。到目前为止，我知道这样做的唯一方法是这样的：

```
foreach($matches[0][1] as $match) {
   echo "$match<br />";
}

foreach($matches[1][1] as $match) {
  echo "$match<br />";
}

foreach($matches[2][1] as $match) {
  echo "$match<br />";
} 
```

我怎样才能让它做一些我不必为每个数组键做一个 foreach 循环的事情。就像是

```
foreach($matches[ALL][1] as $match) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:45:19.253

This wil work

```
foreach($matches as $var)
{
  foreach($var[1] as $match)
  {
    echo "$match<br />";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:49:59.307

简单的：

```
foreach($matches as $match) {
  foreach($match[1] as $m) {
    echo $m . "<br />";
  }
} 
```

就是这样：遍历第一级数组 ( `$matches`) 并获取值。这些值也是数组，因此您可以访问该`[1]`项目。

如果您需要第一个数组的索引，请像这样修改循环：

```
foreach($matches as $k => $match) {
  foreach($match[1] as $m) {
    echo $k . ": " . $m . "<br />";
  }
} 
```

希望有帮助！

# css - 将其放在重复声明中时，背景图像未在 IE8 中显示

> ID：13326328
> 
> 赞同：0
> 
> 时间：2012-11-10T21:38:22.750
> 
> 标签：css, image, internet-explorer-8, background

我有一个我只想要在我的主页上的背景图片，所以我在 body 标记上有 .home 类。除了 ie8 和 ie9 之外的所有东西都可以正常工作。这不是图像问题，因为如果我将图像 css 移动到第一个包装声明它工作正常......但随后会出现在每一页上。我可以为所有包装器声明它，然后放置 background: none; 对于其他所有页面，但这真的很混乱。我觉得我在这里遗漏了一些非常明显的东西。

```
.wrapper {
    width: 940px;
    margin-right: auto;
    margin-left: auto;
    padding-right: 10px;
    padding-left: 10px;
}
.home .wrapper {
    background-image: url(../images/home-illustration.png);
    background-repeat: no-repeat;
    background-position: 0px 100px;
} 
```

该页面在这里： http: [//mcging.4pixels.co.uk/index.html](http://mcging.4pixels.co.uk/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:43:21.293

first, you can shorten your css like so:

```
background: url(../images/home-illustration.png) no-repeat 0px 100px; 
```

second, on the homepage `wrapper` div put `class="wrapper home clearfix"`

your actual css should be:

```
.wrapper.home{
    background: url(../images/home-illustration.png) no-repeat 0px 100px;
} 
```

# c - cuda 添加浮点数组

> ID：13326329
> 
> 赞同：2
> 
> 时间：2012-11-10T21:38:35.340
> 
> 标签：c, cuda, gpu

我是库达的新手。我正在尝试在内核中添加数组的浮点元素，但最终结果是错误的。因为我需要以原子方式进行，但另一方面 atomicAdd 仅用于整数......有什么想法吗？

```
__global__ void add_element(float *my_array, float *result_sum){

    int tid = blockIdx.x * blockDim.x + threadIdx.x;
    *result_sum += my_array[tid];
}

int main(int argc, char** argv){

    float   my_array[10];   
    float   result_sum = 0;
    float   *device_array, *device_sum;

    cudaMalloc((void**)&device_array, 10*sizeof(float) );
    cudaMalloc((void**)&device_sum, sizeof(float) );

    //  fill the array
    for (int i=0; i<10; i++){
        my_array[i] = (float)i/2;
    }

    cudaMemcpy(device_array, my_array, 10*sizeof(float),cudaMemcpyHostToDevice);
    cudaMemcpy(device_sum, &result_sum, sizeof(float),cudaMemcpyHostToDevice);

    add_element<<<1,10>>>(device_array, device_sum);

    cudaMemcpy(&result_sum, device_sum, sizeof(float), cudaMemcpyDeviceToHost);

    for(int i=0; i<10; i++){
        printf(" %f \n", my_array[i]);
    }   
    printf("+\n----------\n %f\n", result_sum);

    cudaFree(device_array);
    cudaFree(device_sum);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T13:48:03.993

您也可以将 atomicAdd 用于 float 和 double 。如下：

```
__device__ float atomicAdd(float *address, float val) { return 0; }

__device__ __forceinline__ float atomicAdd(float *address, float val)
{
// Doing it all as longlongs cuts one __longlong_as_double from the inner loop
unsigned int *ptr = (unsigned int *)address;
unsigned int old, newint, ret = *ptr;
do {
    old = ret;
    newint = __float_as_int(__int_as_float(old)+val);
} while((ret = atomicCAS(ptr, old, newint)) != old);

return __int_as_float(ret);
} 
```

或找到文件“derived_atomic_functions.h”并作为头文件添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:53:20.140

尝试使用此函数为浮点数执行 AtomicAdd。

```
__device__ inline void atomicFloatAdd(float *address, float val)
{
    int tmp0 = *address; 
    int i_val = __float_as_int(val + __int_as_float(tmp0)); 
    int tmp1;
    // compare and swap v = (old == tmp0) ? i_val : old;
    // returns old

    while( (tmp1 = atomicCAS((int *)address, tmp0, i_val)) != tmp0)
    { 
     tmp0 = tmp1; 
      i_val = __float_as_int(val + __int_as_float(tmp1));
    }
} 
```

对于 (capability > 2.0) 你有一个本机 float atomicAdd(float* address, float val);

正如评论中所指出的，如果您想要更有效的实现，您可以使用并行缩减。NVIDIA 本身提供了一个高效的实现，可以在[这里](http://developer.download.nvidia.com/compute/cuda/1_1/Website/Data-Parallel_Algorithms.html#reduction)找到，实现的详细描述可以在[这里找到](http://developer.download.nvidia.com/compute/cuda/1_1/Website/projects/reduction/doc/reduction.pdf)

# android - 微调器 setOnItemSelectedListener 内的 AlertDialog

> ID：13326335
> 
> 赞同：1
> 
> 时间：2012-11-10T21:39:27.630
> 
> 标签：android, spinner, android-alertdialog

是否可以在更改微调器项目时创建警告消息，但如果用户单击的不选择应该被取消并且所选项目应该保持以前的状态。如果我存储最后选择的微调器项目并在用户选择否时将其传递给微调器，它将触发我不想要的 onItemSelectedListener。

我尝试使用 OnTouchListener 但这无济于事，因为在触摸微调器后立即显示微调器列表。

请参阅下面的代码以更好地理解。

 `````
 spinnerSearch.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, final int position, long id) {

            if (!ShoppingCart.isEmpty()) {
                AlertDialog.Builder dialog = new AlertDialog.Builder(SearchProductActivity.this);
                dialog.setMessage("Selecting new finacier will empty your basket.").setCancelable(false).setPositiveButton("Yes", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        //do some work
                        //storing lastSelectedFinancier
                    }

                }).setNegativeButton("No", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {

                        dialog.dismiss();
                        //cancel selection
                        //spinnerSearch.setSelection(lastSelectedFinancier)

                    }

                });

                AlertDialog alert = dialog.show();

                TextView messageView = (TextView) alert.findViewById(android.R.id.message);
                messageView.setGravity(Gravity.CENTER);
            } else {
                //do some other work
                //lastSelectedFinancier
            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

        //lastSelectedFinancier

    }); 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:10:18.713

我对复选框有同样的问题：我设置了一个 onCheckedChangeListener 来监听用户输入，然后我从设置或警报对话框中更新复选框，就像你正在做的那样，它再次触发 onCheckedChangeListener :) 这就是我解决它的方法：

1) 代替“spinnerSearch.setOnItemSelectedListener(new OnItemSelectedListener() {...”, 使用全局声明创建新的 OnItemSelectedListener 对象。我将其命名为 myClickListener

2) 在这个对象的主体内，当您创建警报对话框时，在“否”按钮声明内，稍微更改代码以将侦听器设置为 null，然后更改微调器值，然后将侦听器设置为 myClickListener再次。

尝试像这样修改您的代码，并让我知道它是否有效：

 `````
 private OnItemClickListener myClickListener = new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, final int position, long id) {

            if (!ShoppingCart.isEmpty()) {
                AlertDialog.Builder dialog = new AlertDialog.Builder(SearchProductActivity.this);
                dialog.setMessage("Selecting new finacier will empty your basket.").setCancelable(false).setPositiveButton("Yes", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        //do some work
                        //storing lastSelectedFinancier
                    }

                }).setNegativeButton("No", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                //Modified code:
                        spinnerSearch.setOnItemSelectedListener(null) //Disable the onItemClickListener
                        spinnerSearch.setSelection(lastSelectedFinancier) //Cancel selection, while the OnClickListener is disabled
                        spinnerSearch.setOnItemSelectedListener(myClickListener) //Enable onItemClickListener
                        dialog.dismiss();
                    }

                });

                AlertDialog alert = dialog.show();

                TextView messageView = (TextView) alert.findViewById(android.R.id.message);
                messageView.setGravity(Gravity.CENTER);
            } else {
                //do some other work
                //lastSelectedFinancier
            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

        //lastSelectedFinancier

    }); //End of myClickListener declaration

    //This goes into your code:
    spinnerSearch.setOnItemSelectedListener(myClickListener) 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:20:57.653

我找到了解决这个问题的方法。我没有使用微调器，而是使用文本框（白色微调器样式）并将其与警报对话框结合以创建列表。也许这不是最好的解决方案，但它对我有用:)))

 ``public class SpinnerItem {

```
String spinnerText;
String value;

public SpinnerItem(String text, String value) {
    this.spinnerText = text;
    this.value = value;
}

public String getSpinnerText() {
    return spinnerText;
}

public String getValue() {
    return value;
}

public String toString() {
    return spinnerText;
} 
````  ``public class SearchProductActivity extends BaseActivity {`

 ````
private EditText txtSearch;
private ListView listProducts;
private Button btnShoppingCart;
private EditText txtSelectFinancier;
private DevRestHelper rest;
private ListOfProducts adapter;
public static String financierRelationNumber;
private int numberOfItemsInBasket = 0;

private List<ProductModel> products = new ArrayList<ProductModel>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_search_product);

    initControls();
    getProjectSupplier();
    financierRelationNumber = String.valueOf(OrderData.Financiers.get(0).RelationNumber);
    txtSelectFinancier.setText(String.valueOf(OrderData.Financiers.get(0).Name));
    GetProducts(financierRelationNumber);
    setButtonActions();
    ShoppingCart.ProductOwnerId = getProjectSupplier().get(0).getValue();
    ShoppingCart.ProductOwner = getProjectSupplier().get(0).getSpinnerText();

}

    private void initControls() {
    btnShoppingCart = (Button) findViewById(R.id.activity_search_product_btnShoppingCart);
    listProducts = (ListView) findViewById(R.id.activity_search_product_listProducts);
    txtSearch = (EditText) findViewById(R.id.activity_search_product_txtName);
    txtSelectFinancier = (EditText) findViewById(R.id.activity_search_product_txtFinancier);

}

private void setButtonActions() {

    txtSelectFinancier.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (!ShoppingCart.isEmpty()) {
                AlertDialog.Builder dialog = new AlertDialog.Builder(SearchProductActivity.this);
                dialog.setMessage(getString(R.string.err_selecting_new_finacier_will_empty_your_basket)).setCancelable(false).setPositiveButton("Yes", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        listDialog(SearchProductActivity.this, "", getProjectSupplier(), txtSelectFinancier);
                        listProducts.setAdapter(null);
                        ShoppingCart.emptyCartItems();
                        ShoppingCart.ProductOwner = txtSelectFinancier.getText().toString();

                    }
                }).setNegativeButton("No", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {

                        dialog.dismiss();
                    }

                });

                AlertDialog alert = dialog.show();

                TextView messageView = (TextView) alert.findViewById(android.R.id.message);
                messageView.setGravity(Gravity.CENTER);

            } else
                listDialog(SearchProductActivity.this, "", getProjectSupplier(), txtSelectFinancier);
        }
    });

}

    private List<SpinnerItem> getProjectSupplier() {

    List<SpinnerItem> items = new ArrayList<SpinnerItem>();

    for (DetermineFinanciersModel finaciers : OrderData.Financiers) {
        items.add(new SpinnerItem(finaciers.Name, String.valueOf(finaciers.RelationNumber)));
    }

    return items;

}

private void listDialog(Context context, String title, final List<SpinnerItem> list, final TextView control) {

    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setTitle(title);

    List<String> strings = new ArrayList<String>();

    for (SpinnerItem spinnerItem : list) {
        strings.add(spinnerItem.getSpinnerText());
    }

    final CharSequence[] items = strings.toArray(new String[strings.size()]);

    builder.setItems(items, new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int selectedItem) {
            control.setText(list.get(selectedItem).getSpinnerText());
            ShoppingCart.ProductOwnerId = list.get(selectedItem).getValue();
            GetProducts(list.get(selectedItem).getValue());
        }
    });

    AlertDialog alert = builder.create();
    alert.show();

} 
```` 

`}```````

# ios - Getting two dates as substrings and store them in separate strings

> ID：13326350
> 
> 赞同：0
> 
> 时间：2012-11-10T21:41:33.303
> 
> 标签：ios, nsstring, uikit, nsdate

In my app I have a string - "contest will start from dd/mm/yyyy to dd/mm/yyyy" I want both of the dates separately so I need a way to store these dates in two different strings.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:30:39.167

您可以使用正则表达式来做到这一点（半明目张胆地改编自[这里](https://stackoverflow.com/a/6591743/937822)）。

```
NSString *string                = @"contest will start from 10/11/2012 to 12/11/2012";

NSRegularExpression *regex      = [NSRegularExpression regularExpressionWithPattern:@"from (.*) to (.*)"
                                                                            options:0
                                                                              error:NULL];
NSTextCheckingResult *results   = [regex firstMatchInString:string
                                                    options:0
                                                      range:NSMakeRange(0, [string length])];
NSString *date1                 = [string substringWithRange:[results rangeAtIndex:1]];
NSString *date2                 = [string substringWithRange:[results rangeAtIndex:2]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:16:50.677

```
NSString *dateString = @"contest will start from dd/mm/yyyy to dd/mm/yyyy";
NSArray *components = [dateString componentsSeparatedByString:@"to"];

NSString *firstDate = [[components objectAtIndex:0] stringByReplacingOccurrencesOfString:@"contest will start from "];
NSString *secondDate = [[components objectAtIndex:1] stringByReplacingOccurrencesOfString:@" "]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T00:35:46.777

```
 unsigned units = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calendar components:units fromDate: date];

NSInteger year = [components year];
NSInteger month = [components month];
NSInteger day = [components day];

NSString *together = [NSString stringWithFormat:@"%i - %i - %i", day, month, year]; 
```

# jquery - 未捕获的 ReferenceError：未定义 e

> ID：13326351
> 
> 赞同：6
> 
> 时间：2012-11-10T21:41:55.127
> 
> 标签：jquery

我正在尝试这样做：

```
$("#canvasDiv").mouseover(function() {
    var pageCoords = "( " + e.pageX + ", " + e.pageY + " )";
    var clientCoords = "( " + e.clientX + ", " + e.clientY + " )";
    $(".filler").text("( e.pageX, e.pageY ) : " + pageCoords);
    $(".filler").text("( e.clientX, e.clientY ) : " + clientCoords);
}); 
```

在控制台中我得到了这个：

> `Uncaught ReferenceError: e is not defined`

我不明白...我认为`e`应该是 JavaScript 已经设置的变量...帮助？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T21:43:06.587

改变

```
$("#canvasDiv").mouseover(function() { 
```

到

```
$("#canvasDiv").mouseover(function(e) { 
```

诚然，回调的第一个参数是预定义的，但为了使用它，您必须通过参数名称对其进行别名。这就是我们指定`e`为参数的原因。实际上，参数名称不需要是`e`. 这也可以：

```
$('#canvasDiv').mouseover(function( event ) {

}); 
```

`event`但是您必须通过函数回调中的名称为事件对象起别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T21:44:31.330

您正在定义一个回调函数，当鼠标悬停事件发生时将调用该回调函数。框架会将有关事件的信息作为第一个参数传递给此函数，通常将此参数命名为“e”。但是你必须在函数参数中声明它，即

```
$('foo').mouseover(function (e) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T21:44:00.193

```
 .....missing e ---- -\/
$("#canvasDiv").mouseover(function(e) {
    var pageCoords = "( " + e.pageX + ", " + e.pageY + " )";
    var clientCoords = "( " + e.clientX + ", " + e.clientY + " )";
    $(".filler").text("( e.pageX, e.pageY ) : " + pageCoords);
    $(".filler").text("( e.clientX, e.clientY ) : " + clientCoords);
}); 
```

# c# - PostMessage call steals focus from siblings

> ID：13326352
> 
> 赞同：0
> 
> 时间：2012-11-10T21:42:09.913
> 
> 标签：c#

Good Evening. I understand the question may seem kind of odd, so let me explain my problem a little bit : Ii'm building a Windows From Application, that is able to open multiple Child Form, each one containing a WebBrowser component that loads a Flash animaion.

Now, I need to simulate a click on a given opened form, without it showing up on top of every other. To simulate the click, I'm using a code quite similar to [https://stackoverflow.com/a/11161632/533599](https://stackoverflow.com/a/11161632/533599) : I had to implement 2 changes

1.  I have to stop to the "Internet Explorer_Server" , since I don't have a "MacromediaFlashPlayerActiveX" in the handles chain
2.  For the click to fire, I have to "make it double", that is, mouse down, up, down, up.

The code works quite well, and the click is fired, but everytime it does, the target Form gets focus and pops up on top of all his siblings ( but stays behind every other window I've opened over them). Is there a way to prevent this behaviour?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:22:19.927

目前我设法做一些类似于我需要的事情

```
[DllImportAttribute("user32.dll", EntryPoint = "SetForegroundWindow")]
[return: MarshalAsAttribute(UnmanagedType.Bool)]
public static extern bool SetForegroundWindow([InAttribute()] IntPtr hWnd);

[DllImportAttribute("user32.dll", EntryPoint = "GetForegroundWindow")]
public static extern IntPtr GetForegroundWindow();

[DllImportAttribute("user32.dll", EntryPoint = "BringWindowToTop")]
[return: MarshalAsAttribute(UnmanagedType.Bool)]
public static extern bool BringWindowToTop([InAttribute()] IntPtr hWnd);

IntPtr old = GetForegroundWindow();
LeftClick(hw, x, y);
SetForegroundWindow(old);
BringWindowToTop(old); 
```

不利的一面是，“点击”的表单仍然会弹出几分之一秒，给人一种糟糕的风格效果。任何其他有助于将表单保持在后台的提示都是受欢迎的:)

# python - Converting a R ListVector to a Python list with rpy2

> ID：13326353
> 
> 赞同：3
> 
> 时间：2012-11-10T21:42:14.093
> 
> 标签：python, r, list, vector, rpy2

I have a function that takes the items in a Python list, puts them through a function in R, and outputs them as a R ListVector. The problem is that I can't find in the [documentation](http://rpy.sourceforge.net/rpy2/doc-2.2/html/vector.html) how to convert from a ListVector into a regular Python object. Here's my code:

```
from rpy2.robjects.packages import importr
from rpy2.robjects import r
forecast = importr("forecast")
parallel = importr("multicore")

data = [[1, 2, 3], [4, 5, 6,], [7, 8, 9]]

tuples = tuple(tuple(x) for x in data)

data_list = []
for i in range(0, len(data)):
    result1 = "k = as.numeric((list%r))" % (tuples[i],)
    data_list.append(result1)

def forecaster(item):
    rcode = item
    r(rcode)
    rcode1 = 'j <- ts(k)'
    r(rcode1)
    rcode2 = 'p <- parallel(forecast(k, 5, level = c(80,95)))'
    r(rcode2)
    rcode3 = 'collect(list(p))'
    return r(rcode3)

z = [forecaster(x) for x in data_list] 
```

Running `z` gives me output like this:

```
[<ListVector - Python:0x4e5f908 / R:0x4a0fcd8>
[ListVector]
<ListVector - Python:0x4e5f908 / R:0x4a0fcd8>
[ListVector], <ListVector - Python:0x4e5fcf8 / R:0x49f9c48> 
```

...And so on. Could someone please help me figure out how to convert these ListVectors into something I can actually use in Python? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T07:35:56.353

我使用 rpy2 做了一个类似的例子，如下所示：

```
 x = [1,2,3,4,1,2,3,4,1,2]
    v = robjects.FloatVector(x)
    t = robjects.r['ts'](v)
    fit = robjects.r['auto.arima'](t)
    next = robjects.r['forecast'](fit,h=1) 
```

很明显我在做一个使用arima分析时间序列的简单示例。当我得到下一个时，我发现它是一个ListVector。然后我使用如下代码得到我想要的值。

```
 count = len(next) - 2
    #ListVector->FloatVector->Float
    print next.rx('mean')[0][0] 
```

谁知道这个方法对你是否有效，试试吧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:56:00.897

我更改了您的预测器功能（仅最后一行），使用**cbind**获取 R 向量而不是 listVector

```
def forecaster(item):
    rcode = item
    r(rcode)
    rcode1 = 'j <- ts(k)'
    r(rcode1)
    rcode2 = 'p <- parallel(forecast(k, 5, level = c(80,95)))'
    r(rcode2)
    return r('c(do.call("cbind",collect(list(p))))')

z = [forecaster(x) for x in data_list] 
```

现在我们有了可以访问的 za 结构，例如

```
z[0]

<ListVector - Python:0x452d908 / R:0x457c770>
[StrVe..., Float..., Float..., ..., RNULL..., Float..., Float...]
  <no name>: <class 'rpy2.robjects.vectors.StrVector'>
  <StrVector - Python:0x452d248 / R:0x2ec88f8>
['Mean']
  <no name>: <class 'rpy2.robjects.vectors.FloatVector'>
  <FloatVector - Python:0x452dfc8 / R:0x3ad1018>
[80.000000, 95.000000]
  <no name>: <class 'rpy2.robjects.vectors.FloatVector'>
  <FloatVector - Python:0x452de18 / R:0x457de88>
[1.000000, 2.000000, 3.000000]
  ...
  <no name>: <type 'rpy2.rinterface.RNULLType'>
  rpy2.rinterface.NULL
  <no name>: <class 'rpy2.robjects.vectors.FloatVector'>
  <FloatVector - Python:0x452dd88 / R:0x457ddb0>
[2.000000, 2.000000, 2.000000]
  <no name>: <class 'rpy2.robjects.vectors.FloatVector'>
  <FloatVector - Python:0x45316c8 / R:0x457dd68>
[-1.000000, 0.000000, 1.000000] 
```

# google-chrome - Building Chrome: Unable to Rebase Cygwin

> ID：13326354
> 
> 赞同：2
> 
> 时间：2012-11-10T21:42:19.850
> 
> 标签：google-chrome, cygwin, rebase

In my effor to fix `CygwinDllRemappingFailure` [here](http://www.chromium.org/developers/how-tos/cygwin) [more details](http://code.google.com/p/chromium/wiki/CygwinDllRemappingFailure) obtained when doing

> gclient sync --force

I am using this command, to rebase Cygwin installation.

```
 ash /usr/bin/rebaseall 
```

But I otain following error.

```
 /usr/lib/perl5/5.14/i686-cygwin-threads-64int/CORE/cygperl5_14_2.dll:
 skipped because non existent 
```

I have verified perl5 package does exist on my system. In fact, In my last try, I have installed all packages that contained perl5 keyword. Landed up with no success.

Have spent significant time searching and executing commands. Have you come across this error. Any advice on this error would be much helpful.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:38:23.997

这个人，我相信他是那个包的作者，说你可以忽略它：

[http://cygwin.com/ml/cygwin/2012-07/msg00664.html](http://cygwin.com/ml/cygwin/2012-07/msg00664.html)

瑞安

# c++ - CUDA Primes Generation

> ID：13326359
> 
> 赞同：6
> 
> 时间：2012-11-10T21:42:44.450
> 
> 标签：c++, c, cuda, gpu, primes

My CUDA program stops working(it prints nothing) as data size increases over 260k.

Can someone tell me why this is happening? This is my first CUDA program. And if I want bigger primes, how to use datatype larger than long long int on CUDA?

The graphics card is GT425M.

```
#include<stdio.h>
#include<stdlib.h>
#include<cuda.h>
#define SIZE 250000
#define BLOCK_NUM 96
#define THREAD_NUM 1024
int data[SIZE];
__global__ static void sieve(int *num,clock_t* time){
    const int tid = threadIdx.x;
    const int bid = blockIdx.x;
    int tmp=bid*THREAD_NUM+tid;
    if(tid==0) time[bid] = clock();
    while(tmp<SIZE){
        int i=1;
        while(((2*tmp+3)*i+tmp+1)<SIZE){
            num[(2*tmp+3)*i+tmp+1] = 0;
            i++;
        }
        tmp+=BLOCK_NUM*THREAD_NUM;
    }
    if(tid==0) time[bid+BLOCK_NUM] = clock();
}
void GenerateNumbers(int *number,int size){
    for(int i=0;i<size;i++)
        number[i] = 2*i+1;
    number[0] = 2;
}
int main(){
    GenerateNumbers(data,SIZE);
    int *gpudata;
    clock_t* time;
    int cpudata[SIZE];
    cudaMalloc((void**)&gpudata,sizeof(int)*SIZE);
    cudaMalloc((void**)&time,sizeof(clock_t)*BLOCK_NUM*2);
    cudaMemcpy(gpudata,data,sizeof(int)*SIZE,cudaMemcpyHostToDevice);
    sieve<<<BLOCK_NUM,THREAD_NUM,0>>>(gpudata,time);
    clock_t time_used[BLOCK_NUM * 2];
    cudaMemcpy(&cpudata,gpudata,sizeof(int)*SIZE,cudaMemcpyDeviceToHost);
    cudaMemcpy(&time_used,time,sizeof(clock_t)*BLOCK_NUM*2,cudaMemcpyDeviceToHost);
    cudaFree(gpudata);
    for(int i=0;i<SIZE;i++)
        if(cpudata[i]!=0)
            printf("%d\t",cpudata[i]);
    clock_t min_start,max_end;
    min_start = time_used[0];
    max_end = time_used[BLOCK_NUM];
    for(int i=1;i<BLOCK_NUM;i++) {
        if(min_start>time_used[i])
            min_start=time_used[i];
        if(max_end<time_used[i+BLOCK_NUM])
            max_end=time_used[i+BLOCK_NUM];
    }
    printf("\nTime Cost: %d\n",max_end-min_start);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:44:57.033

（无符号） long long int 提供 64 位。没有比 64 位更宽的内置非向量整数类型。但是，您可以轻松构建自己的 128 位整数类型。例如：

```
typedef struct {
  unsigned long long int lo;
  unsigned long long int hi;
} my_uint128;

my_uint128 add_uint128 (my_uint128 a, my_uint128 b)
{
  my_uint128 res;
  res.lo = a.lo + b.lo;
  res.hi = a.hi + b.hi + (res.lo < a.lo);
  return res;
} 
```

如果需要更高性能的解决方案，请考虑将 128 位整数映射到 uint4 并使用内联 PTX 更有效地处理四个 32 位块之间的进位。[资源](https://devtalk.nvidia.com/default/topic/491349/cuda-programming-and-performance/larger-than-64bit-integer-i-want-to-count-with-very-big-integers-larger-than-64bit/)

# c# - checkboxlist - 如何在不设置选定值的情况下填充它

> ID：13326362
> 
> 赞同：2
> 
> 时间：2012-11-10T21:43:44.590
> 
> 标签：c#, asp.net, checkboxlist

我有一个复选框列表如下

```
 CheckBoxList checkboxlist = new CheckBoxList();
                    checkboxlist.ID = controlID;
                    checkboxlist.Text = shortLabel;
                    checkboxlist.Width = width;
                    checkboxlist.RepeatColumns = columnnum;
                    checkboxlist.DataSource = furnitureItems;
                    checkboxlist.DataTextField = "ShowValue";
                    checkboxlist.DataValueField = "ShowValue";
                    checkboxlist.SelectedValue = //how can i set this to "nothing";
                    checkboxlist.DataBind(); 
```

当我设置 checkboxlist.selectedvalue = ""; 时，我得到一个必须指定所选值的错误。有没有办法解决这个问题？，我希望所有复选框都显示为未选中作为初始状态。我将不胜感激。

如果需要其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:02:34.353

指定[`SelectedValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx). 但是，如果您这样做，则需要指定一个有效值。空字符串无效。

如果要取消选择`CheckBoxList`，请使用以下[`SelectedIndex`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindex.aspx)属性：

```
checkboxlist.SelectedIndex = -1: 
```

# jquery - jQuery 动画更改背景颜色（不适用于 Chrome）

> ID：13326363
> 
> 赞同：0
> 
> 时间：2012-11-10T21:43:46.900
> 
> 标签：jquery, google-chrome

我有一个简单的水平菜单。我想要的只是我悬停在上面的 li a 的背景，以便从白色变为灰色。一切都在 Firefox 和 IE 中运行良好，但在 Chrome 中却不行。可能是什么原因？

代码：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#nav ul li a").hover(function() {
        $(this).stop().animate({ backgroundColor: '#E5E5E5' }, 500);
    },function(){
          $(this).stop().animate({backgroundColor: '#FFF' }, 500);
     })
})
</script> 
```

和 HTML：

```
<div id="nav">
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About Us</a></li>
        <li><a href="#">Estimator</a></li>
        <li><a href="#">Products & Services</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</div><!--end of nav div--> 
```

我知道这真的很简单，我以前做过很多次。但就像我说的，它在 Chrome 中不起作用。

固定的：

我刚换了插件。正如我所说，我已经有一段时间没有使用 jQuery 做过任何事情了。完全忘记了 jQuery UI。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:54:46.363

我已经尝试过了（[**在这里**](http://jsfiddle.net/H66uh/)），它在任何浏览器中都不适用于我。

这是预期的结果，因为 jQuery 不支持开箱即用的彩色动画。你必须使用 jQuery UI（这是巨大的）或像[**这样的插件**](http://www.bitstorm.org/jquery/color-animation/)

作为替代方案，您可以使用 CSS3 过渡 -[**演示**](http://jsfiddle.net/H66uh/1/)

```
a {
    -webkit-transition: background-color .5s;
       -moz-transition: background-color .5s;
        -ms-transition: background-color .5s;
         -o-transition: background-color .5s;
            transition: background-color .5s;
}  

a:hover {
    background-color: #5f5f5f;
}
​ 
```

# c# - Best way to limit WCF Service to specific User Accounts

> ID：13326365
> 
> 赞同：5
> 
> 时间：2012-11-10T21:44:00.380
> 
> 标签：c#, .net, wcf

I will be hosting a basic HTTP WCF service using Window Service / Service Host. I would like to limit the service to 2 specific window active directory users and these accounts will vary between PRD and DEV environments so they will be set in a config file.

I was wondering what is the best way to do this, I know normally if I was hosting the service using IIS then I could limit it in the Web.config: [http://www.rickgaribay.net/archive/2007/04/04/recipe-wcf-basichttpbinding-with-windows-authentication.aspx](http://www.rickgaribay.net/archive/2007/04/04/recipe-wcf-basichttpbinding-with-windows-authentication.aspx) However since i'm hosting using ServiceHost then I don't believe this is an option.

From what I read it seems possible to do this using PrincipalPermission Declarative attribute at the service class level: [http://msdn.microsoft.com/en-us/library/vstudio/ms731200(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms731200(v=vs.100).aspx) However I'm not too clear whether this will pass the window account of window service or the account which made the HTTP request. What I need is to pass the HTTP request account. Also, with declartive attributes, is it possible to use a config file attribute rather than a hard coded one?

Any suggestions, if you need any more info then let me know.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:07:35.463

尝试使用基于角色的授权。 [http://msdn.microsoft.com/en-us/magazine/cc948343.aspx#id0070004](http://msdn.microsoft.com/en-us/magazine/cc948343.aspx#id0070004)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T13:50:39.863

我发现以下文章适合我的需要，基本上它涉及使用行为的授权：http: [//allen-conway-dotnet.blogspot.co.uk/2010/01/how-to-create-aspnet-windows.html](http://allen-conway-dotnet.blogspot.co.uk/2010/01/how-to-create-aspnet-windows.html)

# java - Number of query values and destination fields are not the same in ms access

> ID：13326367
> 
> 赞同：1
> 
> 时间：2012-11-10T21:44:22.483
> 
> 标签：java, sql, ms-access

I am trying to execute this sql insert statement below but encountered an error which is listed below. Would appreciate some advise, thanks.

```
 public void addSale(String saleDetails, String saleTotal) 
                        throws ClassNotFoundException, SQLException {

     Statement myStatement = getConnection();
     String sql = "INSERT INTO Sale (SaleDetails, SaleTotal) VALUES ('"+saleDetails+"','"+saleTotal+"')";

     myStatement.executeUpdate(sql);
     closeConnection();
  } 
} 
```

Error:

Java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Number of query values and destination fields are not the same. at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956) at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113) at sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(JdbcOdbc.java:3109) at sun.jdbc.odbc.JdbcOdbcStatement.execute(JdbcOdbcStatement.java:337) at sun.jdbc.odbc.JdbcOdbcStatement.executeUpdate(JdbcOdbcStatement.java:287)

Here's the design view on ms-access:

![enter image description here](../Images/a1e93c32f688d6f4e88d3e8ad46e9e22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:47:07.343

执行`System.out.println(sql);`或使用您的日志记录框架并直接在访问中尝试该语句。您可能对 odbc 上的不同数据类型有问题。否则，该声明对我来说看起来不错。

也许您的变量包含`'`和/或逗号。如果他们没有逃脱，那也可能会导致问题。您应该考虑使用参数绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T16:38:41.773

这是因为逗号作为系统上的小数分隔符。value1 是 2.5 而 value2 是 3.2 但你得到了 2,5,3,2（你希望 2.5,3.2）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:57:21.790

我认为你的插入应该是：

```
String sql = "INSERT INTO Sale (SaleDetails, SaleTotal) VALUES (" + saleDetails + ", " + saleTotal + ")"; 
```

此外，您可能需要在插入之前将 saleTotal 从字符串转换为数字。

# c - 套接字无法接受客户端？

> ID：13326370
> 
> 赞同：0
> 
> 时间：2012-11-10T21:44:40.190
> 
> 标签：c, sockets

我试图让我的脚湿透网络编程。我创建了一个服务器，它接受来自 Web 客户端的连接。

在某个时候（我不记得是什么时候）它坏了，对于我的生活，我无法修复它。

至少有人可以为我提供一些指示吗？（没有双关语的意思）

我已经尝试了所有内容，阅读了整个网络，包括[gnu](http://www.gnu.org/software/libc/manual/html_node/Accepting-Connections.html) [c](http://www.gnu.org/software/libc/manual/html_node/Socket-Addresses.html#Socket-Addresses) [库](http://www.gnu.org/software/libc/manual/html_node/Listening.html#Listening) [文档](http://www.gnu.org/software/libc/manual/html_node/Transferring-Data.html#Transferring-Data)（我在 linux 上），但仍然没有运气。

***编辑：*****问题描述：**我的客户端软件设法连接，但是服务器软件没有报告，并且似乎卡在了 accept() 函数中。

我的代码：

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include "lib/error.h"
#include <string.h>
#include <sys/types.h>
#include <time.h>

int main(int argc, char *argv[])
{
    int socketfd = 0, connfd = 0; // socket, and connection file descriptors
    struct sockaddr_in serv_addr; // struct that will get filled with host info
    struct sockaddr_in cli_addr; // struct that will get filled with peer info
    int status; // Used for various status controling and error messaging throughout the program

    char sendBuff[1025]; // buffer to allow for storage of items to be sent
    socklen_t cli_size = sizeof(cli_addr);
    time_t ticks;

    socketfd = socket(AF_INET, SOCK_STREAM, 0); // Creating a socket
    if (socketfd == -1) error("Failed to create socket.", 4);

    memset(&serv_addr, '0', sizeof(serv_addr)); // zeroing out the location of serv_addr
    memset(&cli_addr, '0', sizeof(cli_addr)); // zeroing out the location of serv_addr
    memset(sendBuff, '0', sizeof(sendBuff)); // zeroing out the locaiton of sendBuff

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    serv_addr.sin_port = htons(5000);

    status = bind(socketfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr));
    if (status == -1) error("Failed to bind socket.", 4);

    listen(socketfd, 10);

    while(1)
    {
        connfd = accept(socketfd, (struct sockaddr *) &cli_addr, (socklen_t *) &cli_size);
        if (connfd == -1) error("Failed during accepting the peer connection at socket.", 3);

        printf("Client connected: %d:%d", cli_addr.sin_addr.s_addr, cli_addr.sin_port);

        close(connfd);
        sleep(1);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:56:24.360

正如评论中推测的那样，问题在于缓冲。简而言之，客户端连接，`accept`返回一个有效的套接字并被`printf`调用，但输出根本不会出现在屏幕上。

正如Roddy 所提到的，添加换行符**可能会修复它，**因为在许多实现`stdout`中是行缓冲的，即当您编写换行符时，它会自动刷新所有内容。但是，标准并不要求这样做，因此确保输出确实进入设备的最安全、最干净的方法是`fflush`.

正如 Chris Hayes 所提到的，您可能想要`memset(&serv_addr, 0, sizeof serv_addr)`并且不需要在`(socklen_t *) &cli_size`.

# php - PHP Code Igniter Encryption 不返回任何内容

> ID：13326375
> 
> 赞同：1
> 
> 时间：2012-11-10T21:45:30.823
> 
> 标签：php, codeigniter, url, encryption, decode

当我加载我的控制器时，我有这个：

```
$this->load->library('encrypt');

$get = null;
parse_str($_SERVER['QUERY_STRING'],$get);
$email = $this->encrypt->decode($get["acc"]); // e.g.  www.lol.com/?acc=troll 
```

我的控制器是这样调用的：

```
$this->load->library('encrypt');
$this->load->helper("url");
$user = $this->input->post('email', true);

$encrypted_string = $this->encrypt->encode($user);
redirect('account/viewaccount?acc='.$encrypted_string); 
```

网址如下所示：

```
http://localhost/CodeIgniter/index.php/account/viewaccount?acc=+fgSAs6X7ysW6XDjFVw//9RGVbY751zZv1LQ44yYBjhVuzI1BC1t9BbZCIUdX5lpYA== 
```

但问题是，当我编码时我得到一个值，但后来，当我解码这个巨大的值时（我可以通过测试完美地接收到这个值）它什么也不返回，只是 NULL。

为什么会这样？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:14:13.750

加密的输出不是 URL 安全的。替换这个：

```
redirect('account/viewaccount?acc='.$encrypted_string); 
```

和

```
redirect('account/viewaccount?acc='.urlencode($encrypted_string)); 
```

然后`urldecode()`在另一端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:51:59.083

尝试加密字符串并解密。错误可能不是解密或加密

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:56:07.427

编码形式不是 url 安全的，请尝试使用其他一些编码技术`urlencode`或`encode`.

# nginx - Nginx, PHP and rewrite

> ID：13326376
> 
> 赞同：2
> 
> 时间：2012-11-10T21:45:52.497
> 
> 标签：nginx, rewrite, php

How do I make PHP-FPM rules play nicely with Nginx rewrite rules?

Current config file

```
server {

location / {

  location ~ \.php$ {
   try_files        $uri =404;
   fastcgi_split_path_info  ^(.+\.php)(/.+)$;
   fastcgi_pass     127.0.0.1:9000;
   fastcgi_param        PATH_INFO   $fastcgi_path_info;
   fastcgi_param        PATH_TRANSLATED $document_root$fastcgi_script_name;
   include          fastcgi.conf;
  }

  if (!-e $request_filename){
    rewrite ^(.*)$ /index.php?routestring=$1 break;
  }

    rewrite ^/(admincp/)$ /index.php?routestring=$1 break;

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:42:13.417

将您的位置块更改为以下内容。也尽量避免`if`陈述，在这里阅读它（以及更多）：[http ://wiki.nginx.org/Pitfalls](http://wiki.nginx.org/Pitfalls)

我已经用`if (!-e ...)`下面配置中的@missing 块替换了该部分。

```
server {
    root /your/root/path
    index index.php index.html index.htm;

    server_name your.domain.com;

    rewrite ^/(admincp/)$ /index.php?routestring=$1 break;

    location / {
            # First attempt to serve request as file, then
            # as directory, then fall back to index.php
            try_files $uri $uri/ /index.php?$args;
    }

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    location ~ \.php$ {
            # Move to the @missing part when the file doesn't exist
            try_files $uri @missing;

            # Fix for server variables that behave differently under nginx/$
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            # Include the standard fastcgi_params file included with ngingx
            include fastcgi_params;
            fastcgi_param PATH_INFO $fastcgi_path_info;
            fastcgi_index index.php;

            # Override the SCRIPT_FILENAME variable set by fastcgi_params
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_nam$

            # Pass to upstream PHP-FPM; This must match whater you name you$
            #fastcgi_pass phpfpm;
            fastcgi_pass 127.0.0.1:9000;
    }

    location @missing {
            rewrite ^(.*)$ /index.php?routestring=$1 break;
    }
} 
```

# ruby-on-rails - How to make a call to new html page when click on button in Ruby on Rails

> ID：13326377
> 
> 赞同：0
> 
> 时间：2012-11-10T21:45:57.237
> 
> 标签：ruby-on-rails, html

I am a newbie to RoR. I have created a new HTML5 page and want to integrate this into an existing RoR application. I want to call the HTML5 page when a button is clicked. How can I do this?

Is there a direct integration or I need to write my own controller and do something else.

Please tell me how to integrate the page with my existing application.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:48:43.173

将 HTML 代码放入视图中，在 config/routes.rb 中创建路由，创建控制器和您在路由中定义的操作，仅此而已。但我想你应该学习 Ruby on Rails 的基础知识，因为这是 RoR 中最基本的事情。

从这里开始：http: [//guides.rubyonrails.org/](http://guides.rubyonrails.org/)

# jquery - 如何使用jquery更改按钮的href

> ID：13326380
> 
> 赞同：1
> 
> 时间：2012-11-10T21:46:35.553
> 
> 标签：jquery

```
<a class="btn conversation" href="/contact1"> </a>
<a class="btn conversation" href="/contact2"> </a>
<a class="btn conversation" href="/contact3"> </a> 
```

我有许多带有特殊*会话*类的按钮。我想将值附加`?open_deals`到所有这些按钮的 href 属性。

```
$('.conversation').attr('href', $('.conversation').attr('href') + '?open_deals'); 
```

我已经尝试过了，但所有按钮都获得了 href 值：`/contact1?open_deals`

我想我必须`$(this)`在设置值时使用。没有把握。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:48:36.267

`attr`接受一个函数，jQuery 在内部遍历被选元素，第一个参数是索引，第二个参数是每个元素的当前属性值。

```
$('.conversation').attr('href', function(i, current){
     return current + '?open_deals'
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:47:59.403

最简单的解决方案：

```
$('.conversation').each(function(){this.href += '?open_deals'}); 
```

[示范](http://jsfiddle.net/dLcHW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:48:49.070

将函数传递给[`attr`方法](http://api.jquery.com/attr/#computed-attr-values)：

```
$('.conversation').attr('href', function (i, val) {
    return val + '?open_details';
}); 
```

# c# - 云端私人限时网址

> ID：13326383
> 
> 赞同：2
> 
> 时间：2012-11-10T21:46:43.947
> 
> 标签：c#, amazon-web-services, amazon-cloudfront

我有一个客户想在线销售教程视频。我已经从 CF 获得了他的教程的预览（这是公开的）。现在我想使用 c# sdk 生成私有的、限时的 URL，以允许购买教程的客户在有限的时间内下载它们。确认付款后，我想生成一个 URL 并通过电子邮件将其发送给客户。

CF/.NET SDK 支持这个吗？有人可以指点我的样本。我搜索了谷歌，并得到了一些信息过载。来自不同版本的 sdk/管理控制台的不同示例。请帮助我理解这一切:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:31:27.173

如果您查看 Amazon.CloudFront.AmazonCloudFrontUrlSigner 类，该类具有用于创建私有分配的预签名 URL 的辅助方法。例如，此代码片段创建了一个有效期为一天的 url。

```
var url = AmazonCloudFrontUrlSigner.GetCannedSignedURL(AmazonCloudFrontUrlSigner.Protocol.http, domainName, cloudFrontPrivateKey, file, cloudFrontKeyPairID, DateTime.Now.AddDays(1)); 
```

该类中还有其他实用方法可用于添加更具体的访问规则。

请注意，此类是在八月末发布的 SDK 1.5.2.0 版本中添加的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:43:57.733

是的，Amazon S3 和 CloudFront 都支持 preSignedUrl 访问。如果您想更快地交付内容，您应该使用 CloudFront。诺姆·约翰逊先生说得对。要生成签名的 url，您需要公钥-私钥对。您可以使用自己的密钥对并与您的 Amazon S3 帐户关联，或者您也可以在 amazon s3 帐户生成它并下载以生成预签名 url

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T20:31:39.943

您可以使用 GUI 或 S3SignURL 中的代码来签署您的 URL

[https://github.com/DigitalBodyGuard/S3SignURL](https://github.com/DigitalBodyGuard/S3SignURL)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-12T18:27:36.267

您无法使用 CloudFront (CF) 执行此操作，但您可以直接使用 S3 执行此操作。您只需调用**GetPreSignedURL**函数即可为特定（私有）S3 项目生成限时 URL。此方法在[此处的教程](http://docs.amazonwebservices.com/AmazonS3/latest/dev/ShareObjectPreSignedURLDotNetSDK.html)中进行了介绍。

最简单的代码示例是这样的：

```
AmazonS3 client;

GetPreSignedUrlRequest request = new GetPreSignedUrlRequest();
request.WithBucketName(bucketName);
request.WithKey(objectKey);
request.Verb = HttpVerb.GET; // Default.
request.WithExpires(DateTime.Now.AddMinutes(5));

string url = client.GetPreSignedURL(request); 
```

# expressionengine - 这是使用条件变量过滤频道条目的正确方法吗？

> ID：13326389
> 
> 赞同：2
> 
> 时间：2012-11-10T21:48:14.300
> 
> 标签：expressionengine

这是过滤大量频道条目的最有效方法吗？我想显示没有评论且不粘的条目。我正在使用这段代码。

```
{exp:channel:entries channel="{segment_3}" status="open" orderby="date" disable="categories|category_fields|member_data|pagination"}

  {if comment_total == "0" AND sticky == 'n'}
    ...
  {/if}

{/exp:channel:entries} 
```

干杯李

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:29:24.513

可能使用条件变量。但这可能会返回比您需要的更多的结果。另外，您将无法准确使用`{count}`（尽管对您来说可能不是问题）。

另一种不使用条件变量，而是直接在你想要的结果之后的方法，只有你想要的结果，是使用[查询模块](http://expressionengine.com/user_guide/modules/query/index.html)

```
{exp:query sql=
    "SELECT title
    FROM exp_channels
    JOIN exp_channel_titles ON exp_channels.channel_id = exp_channel_titles.channel_id
    WHERE exp_channels.channel_name = '{segment_3}'
    AND exp_channel_titles.status = 'open'
    AND exp_channel_titles.sticky = 'n'
    AND exp_channel_titles.comment_total = 0"
}
    <li>{title}</li>
{/exp:query} 
```

如果您需要访问一堆自定义字段，这可能会变得乏味，但这是获得所需结果的有效方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:22:09.297

Sticky 是条目循环中的一个可用参数，因此您可以通过简单地添加sticky="no" 来过滤条目循环本身中的至少该元素，但不幸的是，注释不是可用参数，因此 Alex 的建议可能是最好的如果您的要求相当简单，则可以选择。但是，如果您需要访问大量自定义字段，则可能会有些棘手。因此，您必须根据循环中的需要来决定采用哪种方法。

# python - 奇怪的是python中没有这样的文件或目录

> ID：13326390
> 
> 赞同：0
> 
> 时间：2012-11-10T21:48:19.320
> 
> 标签：python, ioexception, filenotfoundexception

我是新手，`python`下面的代码让我发疯。它列出了目录中的文件，并为每个文件做一些事情。我得到一个`IOError: [Errno2] No such file or directory: my_file_that_is_actually_there!`

```
def loadFile(aFile):
  f_gz = gzip.open(aFile, 'rb')
  data = f_gz.read()
  #do some stuff...
  f_gz.close()
  return data

def main():
  inputFolder = '../myFolder/'
  for aFile in os.listdir(inputFolder):
    data = loadFile(aFile)
    #do some more stuff 
```

该文件存在且未损坏。我不明白 python 如何在检查`myFolder`.

***注意：为什么这个异常只发生在循环的第二次迭代？找到并打开文件夹中的第一个文件，没有任何问题...***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:54:33.120

这是因为`open`接收本地名称（从 返回`os.listdir`）。它不知道你的意思是它应该在`../myFolder`. 所以它接收一个相对路径并将其应用于当前目录。要修复它，请尝试：

```
data = loadFile(os.path.join(inputFolder, aFile)) 
```

# vb.net - 在winforms VB中绘制进度条控件的反射

> ID：13326391
> 
> 赞同：4
> 
> 时间：2012-11-10T21:48:26.063
> 
> 标签：vb.net, winforms, graphics, progress-bar

这是我要实现的目标的图像：

![http://www.findmysoft.com/img/news/Windows-7-Beta-1-with-Updated-Boot-Screen-Drops-Next-Month.jpg](../Images/dbbfdfe21e5189de602f86b7cd37e3e8.png)

如您所见，进度条下方有轻微的反射。

我有一个很大程度上基于此代码的自定义进度条：http:
[//www.codeproject.com/Articles/19309/Vista-Style-Progress-Bar-in-C](http://www.codeproject.com/Articles/19309/Vista-Style-Progress-Bar-in-C)

注意：我的代码在 VB 中。

**问题**- 我想在它下面绘制一个进度条的反射，这样它看起来类似于我上面给出的图像。有人告诉我，一种方法是使用像素，这需要手动完成。那是唯一的选择吗？还有其他/更简单的方法吗？

我感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T23:28:25.127

Are you looking for something like this?

![enter image description here](../Images/f28f2ab0f129085436c257993c0c1122.png)

Here is the code:

```
Dim pgBarReflection As New Bitmap(ProgressBar1.Width, 20)
ProgressBar1.DrawToBitmap(pgBarReflection, ProgressBar1.ClientRectangle)

For x As Integer = 0 To pgBarReflection.Width - 1
  For y As Integer = 0 To pgBarReflection.Height - 1
    Dim alpha = 255 - 255 * y \ pgBarReflection.Height
    Dim clr As Color = pgBarReflection.GetPixel(x, y)
    clr = Color.FromArgb(alpha, clr.R, clr.G, clr.B)
    pgBarReflection.SetPixel(x, y, clr)
  Next y
Next x

Me.CreateGraphics.DrawImage(pgBarReflection, New Point(ProgressBar1.Left, ProgressBar1.Bottom + 10)) 
```

If you want greyscale shadow, replace this line

```
clr = Color.FromArgb(alpha, clr.R, clr.G, clr.B) 
```

with these two:

```
Dim greyScale As Integer = CInt(clr.R * 0.3 + clr.G * 0.59 + clr.B * 0.11)
clr = Color.FromArgb(alpha, greyScale, greyScale, greyScale) 
```

You will get something like this:

![enter image description here](../Images/6ee7313f2d733cca1ab58630e33c2335.png)

You can play with parameters to make the shadow more realistic.

Solution is based on this article:

[Draw an image with gradient alpha (opacity) values in VB.NET](http://www.vb-helper.com/howto_net_gradient_alpha_double.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T08:29:06.063

此解决方案提供更多代码，但比 GetPixel/SetPixel 快很多倍。它有一个过载而没有任何进一步的设置，或者您可以将它与 alpha 开始和停止值以及您想要“挤压”反射的程度一起使用。

重载的简单版本假定背景颜色是父对象的颜色。请注意，它没有错误检查。您当然需要在生产代码中实现这一点。

结果将是这样的：（非常感谢 Neolisk 经历了从代码生成图像的额外麻烦）

![在此处输入图像描述](../Images/3d42f683ca9eee7019c70322256fe650.png)

仍有优化空间（仅使用“压缩”版本，取消装箱计算等），但我将把它留给用户执行 :-)

```
Private Sub DrawControlReflection(c As Control)
    DrawControlReflection(c, c.Parent.BackColor, 1, 0, 1, 7)  'set you defaults here
End Sub
''' <summary>
''' Draws an reflection of a control
''' </summary>
''' <param name="c">The control to make an reflection of</param>
''' <param name="bgCol">Background color in transparent area</param>
''' <param name="startTrans">0.0-1.0, start value of reflection transparency, usually 1</param>
''' <param name="endTrans">0.0-1.0, end value of reflection transparency, usually 0</param>
''' <param name="squeeze">height of reflection, values 0-1, 1=100%, 0.5=50% etc.</param>
''' <param name="delta">y offset of reflection from control's bottom</param>
''' <remarks>
''' Provided AS-IS.
''' Created by Epistmex, use as you want.
''' Need implementation of error checking (bitmap allocations etc.)
''' </remarks>
Private Sub DrawControlReflection(c As Control,
                                  bgCol As Color,
                                  startTrans As Single,
                                  endTrans As Single,
                                  squeeze As Single,
                                  delta As Integer)
    '
    '-- Original control's bound
    '
    Dim r As Rectangle = c.ClientRectangle
    '
    '-- Destination bound
    '
    Dim rd As Rectangle = New Rectangle(c.Left,
                                        c.Top + r.Height + 1 + delta,
                                        r.Width,
                                        CInt(r.Height * squeeze))
    '
    '-- Create a bitmap for reflection and copy control content into it
    '
    Dim bmp As New Bitmap(r.Width,
                          r.Height,
                          Imaging.PixelFormat.Format24bppRgb)

    c.DrawToBitmap(bmp, r)
    '
    '-- flip it vertically
    '
    bmp.RotateFlip(RotateFlipType.RotateNoneFlipY)
    '
    '-- Add gradient "transparency" to bitmap
    '
    AddGradientAlpha(bmp, r, startTrans, endTrans, bgCol)
    '
    '-- Draw the result
    '
    Dim g As Graphics = c.Parent.CreateGraphics
    if squeeze <> 1 Then g.InterpolationMode = _
                         Drawing2D.InterpolationMode.HighQualityBicubic

    g.DrawImage(bmp, rd)

    g.Dispose()

    bmp.Dispose()

End Sub
Private Sub AddGradientAlpha(ByRef bmp As Bitmap, r As Rectangle, s As Single, e As Single, bc As Color)

    Dim bmpLock As Imaging.BitmapData = bmp.LockBits(r, Imaging.ImageLockMode.ReadWrite, Imaging.PixelFormat.Format24bppRgb)

    Dim st As Integer = bmpLock.Stride

    Dim bytesBmp(bmpLock.Stride * bmp.Height) As Byte

    Runtime.InteropServices.Marshal.Copy(bmpLock.Scan0, bytesBmp, 0, bytesBmp.Length)
    '
    '-- Calculate and create pre-multiplied gradient alpha
    '
    Dim x, y, dx, l, d As Integer
    Dim aDiff As Double = s - e
    Dim a As Double
    Dim b As Byte

    Dim h As Integer = bmp.Height - 1

    For y = 0 To h

        l = y * st 'line. cache the calculations we can
        d = h - y 'position with opposite value

        If d = 0 Then
            a = e
        Else
            a = (aDiff * d / h) + e 'gradient value ad 0.5 to h for even more accuracy
        End If

        If a < 0 Then a = 0
        If a > 1 Then a = 1

        a = a * a 'power of 2 to make gradient steeper

        For x = 0 To bmp.Width - 1

            dx = l + x * 3 'x pos in buffer

            'make gradient of colors in buffer + mix bg color
            bytesBmp(dx) = CByte(bytesBmp(dx) * a + ((1 - a) * bc.B))
            bytesBmp(dx + 1) = CByte(bytesBmp(dx + 1) * a + ((1 - a) * bc.G))
            bytesBmp(dx + 2) = CByte(bytesBmp(dx + 2) * a + ((1 - a) * bc.R))

        Next
    Next
    '
    '-- Marshal back
    '
    Runtime.InteropServices.Marshal.Copy(bytesBmp, 0, bmpLock.Scan0, bytesBmp.Length)
    bmp.UnlockBits(bmpLock)

End Sub 
```

# objective-c - 将 UINavigationBar 和 UIToolbar 添加到模态 UITableViewController

> ID：13326398
> 
> 赞同：1
> 
> 时间：2012-11-10T21:49:10.227
> 
> 标签：objective-c, ios

我正在创建一个布局与 Apple 联系人应用程序类似的应用程序。我创建了一个 UITableViewController 并使用 Storyboard 将它嵌入到 UINavigationController 中。然后我有一个添加按钮，可以在模式视图中打开 UITableViewController。我使用情节提要在此视图中添加了一个顶部栏，效果非常好。问题是当您在表格中滚动时它会滚动。它应该粘在顶部。

我是否还需要将此模态 UITableViewController 嵌入 UINavigationController 以获得“置顶栏”？

这样做的首选方法是什么？只是使用情节提要嵌入还是在 prepareForSegue 方法中“即时”创建一个？

**编辑**

我最终只是使用 Storyboard 将模态 UITableViewControllers 嵌入到 UINavigationControllers 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:52:15.060

是的，您确实需要一个`UINavigationController`包含 的`UITableViewController`来获得您的目标。

就个人而言，我更喜欢您所说的“即时”创建它。但这是一个品味问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:24:48.277

在情节提要中执行此操作的方法是让您的模态视图控制器成为 UIViewController 而不是 UITableViewController。添加一个视图控制器，然后拖入一个工具栏，并将其放置在顶部。然后添加一个表格视图以占用工具栏下方的其余空间。这将在不滚动表格视图的情况下正常工作。

# mysql - 我应该使用哪个字符集

> ID：13326402
> 
> 赞同：0
> 
> 时间：2012-11-10T21:49:35.327
> 
> 标签：mysql, character-encoding

我在搜索 , 和 or 等​​字符时遇到问题`ì`。它们是一样`í`的。`î``ï``ô``ó`

我尝试使用`utf8_general_ci`，`utf8_unicode_ci`但在两个字符集中我的数据库都认为`Tînker`= `Tïnker`= `Tínkér`= `Tinkèr`。

有人能告诉我哪个正确的字符集可以管理 MySQL 中所有现有的小点和破折号吗？

示例：存储了一个名为 " `Tînker`" 且 id 为 2 的用户，结果`SELECT id FROM chars WHERE name = 'Tinkèr' LIMIT 1`为`2`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:07:52.840

在比较之前尝试添加`BINARY`，如下所示：

```
SELECT * FROM chars WHERE BINARY name = '...' 
```

# java - 未调用 JSF 命令按钮操作

> ID：13326404
> 
> 赞同：19
> 
> 时间：2012-11-10T21:49:54.857
> 
> 标签：java, jsf, jakarta-ee

我遇到了未调用 JSF CommandButton 操作的问题。我有一个托管 bean roleController，如

```
@ManagedBean(name = "roleController")
@RequestScoped
public class RoleController {
        public Role getSelectedRole() {
    return selectedRole;
}

public void updateSelectedRole() {
    System.out.println(selectedRole.getRole());
} 
```

在我的 .jsf 文件中，我试图在 h:commandButton 上编辑调用 updateSelectedRole 操作，但它似乎不起作用。我尝试将方法名称更改为不正确的名称，并且没有引发异常 - 但是当我对其他表单执行相同操作时，会引发异常 - 所以很可能甚至没有调用该操作。

```
<h:panelGroup rendered="${param.action == 'edit'}">
    <h:form>
        <ol>
            <li>
                <label for="ID">
                    <h:outputText value="#{msg.roleEditID}" />
                </label>
                <h:inputText readonly="true" 
                    value="#{roleController.selectedRole.id}" />
            </li>
            <li>
                <label for="Role">
                    <h:outputText value="#{msg.roleEditRole}" />
                </label>
                <h:inputText value="#{roleController.selectedRole.role}" />
            </li>
            <li>
                <h:commandButton value="#{msg.buttonUpdate}" 
                    action="#{roleController.updateSelectedRole()}"/>
            </li>
        </ol>
    </h:form>
</h:panelGroup> 
```

我发现它可能是嵌套表单引起的，但在本例中并非如此。这个问题的根源是否可能是我的导航规则？

```
<navigation-rule>
    <from-view-id>/admin/roles.xhtml</from-view-id>
    <navigation-case>
        <to-view-id>/admin/roles.xhtml</to-view-id>
        <from-outcome>true</from-outcome>
        <redirect>
            <view-param>
                <name>action</name>
                <value>edit</value>
            </view-param>
        </redirect>
    </navigation-case>
</navigation-rule> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-11T00:13:18.797

未调用该操作，因为未呈现命令按钮组件。

在处理表单提交期间，`rendered="${param.action == 'edit'}"`父面板组组件上的组件被重新评估（以防止被篡改/黑客请求）。但是，由于您显然没有在回发中保留该请求参数（至少，代码中没有任何其他证明），因此它的计算结果为`false`. 因此父面板组组件不会被渲染，包括它的所有子组件。

您需要确保`rendered`命令按钮的属性及其所有父组件`true`在表单提交期间评估为。`<f:param>`在这种特殊情况下，您可以通过在命令按钮本身中包含 a 来保留请求参数来实现这一点。

```
<h:commandButton ...>
    <f:param name="action" value="#{param.action}" />
</h:commandButton> 
```

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 5 点适用于您

* * *

**与具体问题无关**，建议禁止`${}`在 JSF 中使用，否则会导致不必要的混淆和问题。只是一直坚持`#{}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T11:29:48.463

来自客户端的请求必须封装在 HTTP 表单中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:52:04.090

```
<h:commandButton value="#{msg.buttonUpdate}" 
  action="#{roleController.updateSelectedRole()}"/> 
```

将其更改为

```
 <h:commandButton value="#{msg.buttonUpdate}" 
  action="#{roleController.updateSelectedRole}"/> 
```

您的操作调用不需要括号。

```
public void updateSelectedRole() {
System.out.println(selectedRole.getRole());
} 
```

并且方法action方法需要返回一个字符串

```
public String updateSelectedRole() {

    System.out.println(selectedRole.getRole());
    return "true";
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-05-30T11:10:06.843

此订单更改在我的情况下有效：

```
<h:form>
  <h:panelGroup rendered="${param.action == 'edit'}">
  .
  .
  .
  </h:panelGroup>
</h:form> 
```

# c++ - C++ getline()，第二次运行这个函数不起作用

> ID：13326408
> 
> 赞同：0
> 
> 时间：2012-11-10T21:50:06.087
> 
> 标签：c++, input, getline

我无法弄清楚我的简单 IO 问题是什么：

这是我执行 IO 的代码：

```
cout << "Enter an Employee name: ";
getline(cin, empName);
cout << "Employee Position: "  ;
cin >> empPos;
cout << "Enter the Number of Years of Experience: ";
cin >> numOfExp;
cout << "Enter the deprtment Number: ";
cin >> deptNum; 
```

这是我的错误输出：第一次读取名称时一切都很好，但第二次看起来像是自动传递到名称中，而不要求用户输入任何名称。

这是我的输出：

```
Name:               Unknown
Department Number:          0
Employee Position:          E
Years of Experience:        0
Salary:                     0
Total Number of Employees:  1
Enter an Employee name: arasd d
Employee Position: s
Enter the Number of Years of Experience: 12
Enter the deprtment Number: 12
Name:                       arasd d
Department Number:          12
Employee Position:          s
Years of Experience:        12
Salary:                     0
Total Number of Employees:  1
Enter an Employee name: Employee Position: 
```

如您所见，最后一行是问题所在；知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:13:27.083

问题可能是您在 之前阅读的最后一件事`std::getline()`是整数（或使用`operator>>()`. 的其他内容。格式化的输入运算符在遇到与其格式不匹配的第一个字符时停止读取。例如，对于整数读取停止 monent a non -digit 被输入（除了一个前导符号）因此，在读取一个整数之后，用于指示输入完成的换行符仍然在输入缓冲区中。

要处理卡住的换行符，您可以在 calking 之前跳过任何前导空格`std::getline()`：

```
if (std::getline(std::cin >> std::ws, name)) {
    ...
} 
```

顺便说一句，**永远不会**出现您不想检查用户输入的情况！用户输入**总是**需要检查，即使在输入被*认为*是正确的最简单的程序中也是如此！它有助于显着定位实际问题。鉴于您的输出，它看起来好像 tve 输入实际上与正在读取的内容不匹配......

# c++ - 使用 Lua + SWIG 将成员动态添加到类

> ID：13326412
> 
> 赞同：1
> 
> 时间：2012-11-10T21:50:26.650
> 
> 标签：c++, scripting, lua, swig

此 Lua 代码创建一个表并动态添加一个新成员。运行这个我可以`"hello"`按预期进入屏幕：

```
foo = {}
foo.x = "hello"
print(foo.x) 
```

但现在我正在使用 SWIG 将一些 C++ 类绑定到 Lua。为此，在`test.i`（SWIG 模块文件）中，我创建了一个像这样的简单类：

```
%module test

%inline
%{

class Foo
{
public:
  Foo() { X = 0; }
  void SetX(int x) { X = x; }
  int GetX() { return X; }
private:
  int X;
};

%} 
```

然后我写了一个这样的测试 Lua 代码：

```
obj = test.Foo()
obj:SetX(5)
print("Number: " .. obj:GetX()) 
```

运行并按`"Number 5"`预期运行。问题是，当我向我的 SWIG 绑定对象动态添加一个新成员时，我尝试访问它，如下所示：

```
obj.Y = 7
print("Number: " .. obj.Y) 
```

我收到此错误消息：

```
"attempt to concatenate field 'Y' (a nil value)" 
```

是否可以在使用 SWIG 绑定的对象上动态添加新成员？是否有一些选择而不必移动到另一个 Lua 绑定库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T22:14:20.723

SWIG 不为其对象使用表；它使用*userdata*。毕竟，那些对象是 C++ 对象，需要存储 Lua 代码不应该接触到的 C++ 数据。

而且我不会费心寻找“另一个 Lua 绑定库”；几乎*所有*这些都使用用户数据，Lua 代码明确无法修改（为了提供完全这样做的能力）。

然而，这并不意味着你不能*作弊。*

您始终可以将从 C++ 代码中获得的对象包装到您自己的 Lua 表中，该表将具有一个元表，用于将未知调用转发给 C++ 对象。这样做的代码如下所示：

```
local function WrapObject(cppObject)

    local proxy = {}

    local wrapper_metatable = {}

function wrapper_metatable.__index(self, key)
    local ret = rawget(self, key)
    if(not ret) then
        ret = cppObject[key]
        if(type(ret) == "function") then
            return function(self, ...)
                return ret(cppObject, ...)
            end
        else
            return ret
        end
    else
        return ret
    end

end

    setmetatable(proxy, wrapper_metatable)
    return proxy
end 
```

返回的代理对象是一个 Lua 表，可以在其上设置键和值。当你得到一个值时，比如调用一个函数，它会查看表中是否设置了该值。如果没有，它会尝试从您包装的 C++ 对象中获取它，该对象将通过*其*元表。

如果您的 C++ 类使用其他元函数（如`__add`、等） `__sub`，则需要扩展此元表`__tostring`。

# c++ - 方法调用的分段错误

> ID：13326415
> 
> 赞同：0
> 
> 时间：2012-11-10T21:50:29.673
> 
> 标签：c++, segmentation-fault

我意识到调试器会有所帮助，但我目前有点缺乏使用它的知识。但我保证我会尽快开始学习它！因此，如果有人也知道一些关于我如何通过提示学习使用 gdb 的好书。非常感谢！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:00:00.037

如果你使用 GCC，我衷心推荐使用 GDB。

我喜欢 Eclipse……但我通常发现命令行更快、更有用。恕我直言...

反正：

1）使用“-g”编译以允许调试，

2）在gdb中运行你的程序，

3）注意行#它崩溃了

4)*向后看*，看看你没有分配的那条线，你已经释放了，或者很可能，你用错误的数组访问覆盖了。

以下是一些关于 GDB 的简短教程：

*   [http://www.yolinux.com/TUTORIALS/GDB-Commands.html](http://www.yolinux.com/TUTORIALS/GDB-Commands.html)

*   [http://web.eecs.umich.edu/~sugih/pointers/summary.html](http://web.eecs.umich.edu/~sugih/pointers/summary.html)

*   [http://cs.baylor.edu/~donahoo/tools/gdb/tutorial.html](http://cs.baylor.edu/~donahoo/tools/gdb/tutorial.html)

'希望有帮助！

PS：

当您开始调试时，我建议您在“Nodes”构造函数和 ManipulateArray 构造函数中设置断点。

如果你没有打断点......那么一个对象永远不会被创建......你可能会发现你的错误:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T22:01:40.640

哇，这是一大堆代码。我不知道它的用途，但我可以看到一个问题

在您的`Node`类中，您有一个由四个指针组成的数组，`Node`称为`attachedNode`. 在您的代码中，您绝不会将这些指针指向任何东西。但是您在`attachNewNode`方法中取消引用这些指针。那是一个段错误。

我不知道如何建议您解决该问题（或您可能遇到的任何其他问题，我认为有一些），因为我不太清楚代码应该做什么。

然而，一条建议。这段代码太大太复杂。先让一小部分工作，然后逐渐建立整个程序。缓慢而稳定的方法最终会让你更快地到达那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T22:46:32.337

快速查看 void Node::attachNewNode(Node *newNode, int direction) {*newNode = *attachedNode[direction];} 看起来有问题。赋值应该是 attachNode[direction] = newNode; 您想在某个方向附加新节点。

# python - 使用 Python 2.7 脚本调用需要通过 GUI 输入的 Windows 应用程序：I/O 处理

> ID：13326418
> 
> 赞同：1
> 
> 时间：2012-11-10T21:50:42.107
> 
> 标签：python, windows, python-2.7

我正在尝试使用 Python 2.7 脚本自动化需要通过 GUI 输入的 Windows 应用程序。我通过内置的 python 子进程函数调用 exe，如下所示：

导入子流程

cc='C:\MM\test.exe'

subprocess.call(cc)

调用 exe 时，GUI 要求我手动输入输入文件的路径，即 data.txt 文件。当我进入路径处理就可以开始了。我想以某种方式自动化这个过程，即只需调用 exe 并让它自己找到 input.txt，而且重要的是，将输出打印到 output.txt 文件中。

我最初尝试了以下建议：

导入子流程

使用 open(r'C:\MMA\DATA\input.txt', 'r') 作为 input_file， open(r'C:\MMA\DATA\output.txt', 'w') 作为 output_file: subprocess.call （['C:\MM\test.exe']，标准输入=输入文件，标准输出=输出文件）

然而，这并不成功；exe 仍然要求我手动输入输入文件路径。

我不知道如何在这里进行，我对这类问题没有经验，任何帮助将不胜感激。提前谢谢你，保罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:37:21.623

如果`test.exe input.txt output.txt`从命令行手动运行它也可以工作，那么在 Windows 上将输入/输出文件作为参数而*不是*通过 stdin/stdout 重定向传递会更加健壮：

```
from subprocess import check_call

inputfn = r'C:\MMA\DATA\input.txt'
outputfn = r'C:\MMA\DATA\output.txt'
check_call([r'C:\MM\test.exe', inputfn, outputfn], close_fds=True) 
```

如果 test.exe 是一个 GUI 程序，那么您可以尝试[SendKeys 模块（参见最后一个示例）](https://stackoverflow.com/a/12606327/4279)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:01:19.120

该[`subprocess.call`](http://docs.python.org/2.7/library/subprocess.html#subprocess.call)函数的文档为您提供了将被调用进程的标准输入/输出从/到文件重定向的正确语法：

```
import subprocess

with open(r'C:\MMA\DATA\input.txt', 'r') as input_file, open(r'C:\MMA\DATA\output.txt', 'w') as output_file:
    subprocess.call(['C:\MM\test.exe'], stdin=input_file, stdout=output_file) 
```

# xcode - 如何在 Macbook pro 的德文键盘上使用 Xcode “move-line-up”快捷键？

> ID：13326419
> 
> 赞同：6
> 
> 时间：2012-11-10T21:51:13.080
> 
> 标签：xcode, macos, keyboard, keyboard-shortcuts

我的 Macbook pro 有德国键盘布局。XCode 4 有一个用于“move-line-up”的键盘快捷键：Option-Command-[，但我不能这样做，因为在德语键盘布局中，“[”只能使用 Option-5 键入。因此，如果我键入 Option-Command-5，则表示 Option-Command-5。

我还尝试将 XCode 首选项中该函数的键绑定更改为 Option-Command-5，但随后在 Xcode 编辑器中该键绑定不起作用。

有没有办法使用 Macbook Pro 的德语键盘键入 Option-Command-[？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:20:33.487

您可以尝试将操作重新绑定到不同的组合键。要改变这一点，点击`⌘</kbd>+`,`, then click the 'Key Bindings' section. Enter 'move line' in the search box and double click on a key combination to change it.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T18:00:34.343

考虑使用 QWERTY 布局进行编程，尤其是 Obj-C。使用德语键盘布局打字`{}`并`[]`没有乐趣。

# android - 我应该如何处理 AsyncTask 种类中的异常？

> ID：13326421
> 
> 赞同：0
> 
> 时间：2012-11-10T21:51:24.047
> 
> 标签：android, asynchronous

我的活动中有上面的类，并从活动的 OnCreate 方法运行它。

```
class UpdateTask extends AsyncTask<String, Void, Void>{
        @Override
        protected Void doInBackground(String... params) {
            Log.d(this.toString(), "-> doInBackground");
            HttpResponse response;
            try {
                HttpParams params1 = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(params1, 3000);
                HttpConnectionParams.setSoTimeout(params1, 5000);
                HttpClient httpclient = new DefaultHttpClient(params1);
                Log.d(this.toString(), "HTTP GET to " + "http://www.google.com");
                response = httpclient.execute(new HttpGet("http://www.google.com"));

                //RequestTask t = new RequestTask();
                //response = t.doIt("http://www.google.com");  
                StatusLine statusLine = response.getStatusLine();

                if(statusLine.getStatusCode() == HttpStatus.SC_OK){
                    ByteArrayOutputStream out = new ByteArrayOutputStream();                    
                    response.getEntity().writeTo(out);
                    out.close();
                    String responseString = out.toString(); 
                    EventItem ei = new EventItem(responseString, responseString, null);
                    addEventItemToContent(ei, ContentStatus.ACTIVE);
                    Log.d(this.toString(), "doInBackground -success->");
                } else {
                    Log.d(this.toString(), "doInBackground -something wrong->");
                }
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), "Интернет недоступен", Toast.LENGTH_LONG).show();

            } 
```

LogCat 说：

```
11-11 01:31:19.100: D/com.rkovalev.first.app.MainActivity$UpdateTask@4138ae20(9956): -> doInBackground
11-11 01:31:19.100: D/com.rkovalev.first.app.MainActivity$UpdateTask@4138ae20(9956): HTTP GET to http://www.google.com
11-11 01:31:59.560: W/dalvikvm(9956): threadid=11: thread exiting with uncaught exception (group=0x409961f8)
11-11 01:31:59.580: E/AndroidRuntime(9956): FATAL EXCEPTION: AsyncTask #1
11-11 01:31:59.580: E/AndroidRuntime(9956): java.lang.RuntimeException: An error occured while executing doInBackground()
11-11 01:31:59.580: E/AndroidRuntime(9956):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at java.lang.Thread.run(Thread.java:856)
11-11 01:31:59.580: E/AndroidRuntime(9956): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
11-11 01:31:59.580: E/AndroidRuntime(9956):     at android.os.Handler.<init>(Handler.java:121)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at android.widget.Toast$TN.<init>(Toast.java:317)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at android.widget.Toast.<init>(Toast.java:91)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at android.widget.Toast.makeText(Toast.java:233)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at com.rkovalev.first.app.MainActivity$UpdateTask.doInBackground(MainActivity.java:207)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at com.rkovalev.first.app.MainActivity$UpdateTask.doInBackground(MainActivity.java:1)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-11 01:31:59.580: E/AndroidRuntime(9956):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-11 01:31:59.580: E/AndroidRuntime(9956):     ... 5 more 
```

我的代码有错误，或者我应该从另一个地方处理异常？

* * *

UPD：上面代码中的问题：

```
class UpdateTask extends AsyncTask<String, Integer, Void>{
    @Override
    protected Void doInBackground(String... params) {
    this.onProgressUpdate(0);           
    return null;
    }

    @Override
        protected void onProgressUpdate(Integer... codes) {
    Toast.makeText(getApplicationContext(), 
               "onPr.Upd.: why I haven't access to main ui thread???", Toast.LENGTH_LONG).show();
    }

    @Override
    protected void onPostExecute(Void res) {
    Toast.makeText(getApplicationContext(), 
               "onPost.Ex.: I have access to main thread!", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:56:27.033

根本问题是您试图从 UI 线程外部显示 Toast，这里：

```
catch (Exception e) {
    Toast.makeText(getApplicationContext(), "Интернет недоступен", Toast.LENGTH_LONG).show();
} 
```

您不能与来自不同线程的 UI 元素进行交互。

您应该捕获异常（优雅地处理它），然后调用`onPostExecute()`以通知 Activity 有错误，以便 Activity 可以显示此 Toast。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:07:13.463

而不是直接尝试在本身不是 UI 线程的 doInBackground 中执行所有 UI 通知内容。

您应该使用可以访问 UI 线程的方法，例如 onProgressUpdate、onPostExecute。在你的情况下是这样的。

```
catch (Exception e) {
    publishProgress(error_code); // The error code for identifying
} 
```

在你的 onProgressUpdate 方法中

```
 @Override
        protected void onProgressUpdate(Integer... error_codes) {
           if(error_codes[0] == my_desired_error_code){
    Toast.makeText(getApplicationContext(), "Интернет недоступен", Toast.LENGTH_LONG).show();
                }   
        } 
```

基本上，您的流程应该是这样的，用于在 UI 上进行通知。

# php - php数字格式有几个规则

> ID：13326428
> 
> 赞同：0
> 
> 时间：2012-11-10T21:52:51.670
> 
> 标签：php, numbers, format

给定一个数字和 n，我想按以下方式对其进行格式化：

1.  如果它是一个整数（没有任何小数点），只需返回它
2.  如果它有 x 小数点，只显示 m 小数点，其中 m 是 x 和 n 的最小值。

`number_format`不能做到这一点，实现这一目标的最简单方法是什么？
几个例子：

```
输入：数字 = 60，n=1，输出：60
输入：数字=60.0，n=0，输出：60
输入：数字 = 60.0623，n=1，输出：60.0
输入：数字 = 60.06，n=3，输出：60.06

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:57:35.450

试试这个：

```
$number = 12345;
$maxdecimals = 5;
echo rtrim(rtrim(number_format($number,$maxdecimals),"0"),"."); 
```

如果后面只有零，这将修剪尾随零和小数点。在这种情况下，您将获得`12,345`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:17:30.673

答案是

```
舍入（$number,$maxdecimals）

```

# c++ - 带有 waf 的 C++ 仅头文件库

> ID：13326434
> 
> 赞同：4
> 
> 时间：2012-11-10T21:53:47.543
> 
> 标签：c++, waf, header-only

美好的一天，在完全迁移到 waf（1.7.5）之前，我尝试创建一个这种结构的简单项目：

```
wafproject
├── application
│   ├── main.cpp
│   └── wscript
├── library1
│   ├── foo1.hpp
│   ├── foo2.hpp
│   └── wscript
└── wscript 
```

这是根`wscript`：

```
def options(opt) :
    opt.load('compiler_cxx')

def configure(cnf) :
    cnf.load('compiler_cxx')

def build(bld) :
    bld.recurse('library1')
    bld.recurse('application') 
```

这是`application` `wscript`：

```
def build(bld) :
    bld( features = 'cxx cxxprogram'
       , target = 'application'
       , source = 'main.cpp'
       , use = ['library1']
       ) 
```

这是`library1` `wscript`

```
def build(bld) :
    bld( name = 'library1'
       , inludes = '../../'
       , export_inludes = '../../'
       ) 
```

（注意：我尝试过使用`target`而不是`name`for `library1`，并且我也尝试过为 启用`cxx cxxshlib`功能`library1`。）

这是`main.cpp`：

```
#include <wafproject/library1/foo1.hpp>
#include <wafproject/library1/foo2.hpp>

int main()
{
} 
```

这是我得到的错误：

```
Setting top to                           : /home/<path>/wafproject 
Setting out to                           : /home/<path>/wafproject/build 
Checking for 'g++' (c++ compiler)        : /usr/bin/g++ 
'configure' finished successfully (0.038s)
Waf: Entering directory `/home/<path>/wafproject/build'
[1/3] cxxshlib:  -> build/library1/liblibrary1.so
[2/3] cxx: application/main.cpp -> build/application/main.cpp.1.o
../application/main.cpp:1:40: fatal error: wafproject/library1/foo1.hpp: Directory or file does not exist.
compilation terminated.
Waf: Leaving directory `/home/<path>/wafproject/build'
Build failed
 -> task in 'application' failed (exit status 1): 
        {task 139729350901264: cxx main.cpp -> main.cpp.1.o}
['/usr/bin/g++', '../application/main.cpp', '-c', '-o', 'application/main.cpp.1.o'] 
```

我不想改变包含标题的方式，但为此我显然需要改变我的项目设置方式。

我很高兴有任何意见，谢谢。

编辑：已解决，这只是一个错字（`inludes`而不是`includes`和`export_inludes`而不是`export_includes`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-22T23:35:40.110

由于这是 google 上“仅标题库 waf”的第一件事，我想我应该发布通用解决方案。

```
bld(name = 'libname', export_includes = 'PATH/TO/lib/') 
```

这对我有用。

# objective-c - NSObject +load 和 +initialize - 他们做什么？

> ID：13326435
> 
> 赞同：123
> 
> 时间：2012-11-10T21:53:51.210
> 
> 标签：objective-c, nsobject

我有兴趣了解导致开发人员覆盖 +initialize 或 +load 的情况。文档清楚地说明了这些方法是由 Objective-C 运行时为您调用的，但是从这些方法的文档中可以清楚地看到这些。:-)

我的好奇心来自于查看 Apple 的示例代码 - MVCNetworking。他们的模型类有一个`+(void) applicationStartup`方法。它在文件系统上做一些内务处理，读取 NSDefaults 等等等等......并且，在尝试了解 NSObject 的类方法之后，看起来这项清洁工作可能可以放入 +load 中。

*我确实修改了 MVCNetworking 项目，删除了 App Delegate 中对 +applicationStartup 的调用，并将管理位放入 +load... 我的计算机没有着火，但这并不意味着它是正确的！我希望了解您必须调用的自定义设置方法与 +load 或 +initialize 的任何微妙之处、陷阱和诸如此类的东西。*

* * *

对于 +load 文档说：

> 加载消息被发送到动态加载和静态链接的类和类别，但前提是新加载的类或类别实现了可以响应的方法。

如果您不知道所有单词的确切含义，这句话​​很笨拙且难以解析。帮助！

*   “动态加载和静态链接”是什么意思？可以动态加载和静态链接的东西，还是它们是互斥的？

*   “......新加载的类或类别实现了可以响应的方法”什么方法？怎么回应？

* * *

至于 +initialize，文档说：

> initialize 每个类只调用一次。如果要对类和类的类别执行独立的初始化，则应实现加载方法。

我认为这意味着，“如果你试图设置类......不要使用初始化。” 好的。什么时候或为什么我会覆盖初始化呢？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-11-10T22:23:05.567

## `load`讯息_

`load`在类对象加载到进程的地址空间后不久，运行时将消息发送到每个类对象。对于作为程序可执行文件一部分的类，运行时会`load`在进程生命周期的早期发送消息。对于共享（动态加载）库中的类，运行时会在共享库加载到进程的地址空间后立即发送加载消息。

此外，`load`如果该类对象本身实现该`load`方法，则运行时仅发送给该类对象。例子：

```
@interface Superclass : NSObject
@end

@interface Subclass : Superclass
@end

@implementation Superclass

+ (void)load {
    NSLog(@"in Superclass load");
}

@end

@implementation Subclass

// ... load not implemented in this class

@end 
```

运行时将`load`消息发送到`Superclass`类对象。它不会*将*消息`load`发送到`Subclass`类对象，即使`Subclass`从`Superclass`.

运行时在将消息发送到类的所有超类对象（如果这些超类对象实现）和您链接到的共享库中的所有`load`类对象之后，将消息发送到类对象。但是您不知道您自己的可执行文件中还有哪些其他类已收到。`load``load``load`

您的进程加载到其地址空间的每个类都将收到一条`load`消息，如果它实现该`load`方法，则无论您的进程是否对该类进行任何其他使用。

您可以看到运行时如何在of中将`load`方法作为特例查找，并直接从in 中调用它。`_class_getLoadMethod`[`objc-runtime-new.mm`](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-runtime-new.mm)`call_class_loads`[`objc-loadmethod.mm`](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-loadmethod.mm)

运行时还运行`load`它加载的每个类别的方法，即使同一类上的多个类别实现`load`. 这是不寻常的。通常，如果两个类别在同一个类上定义了相同的方法，则其中一个方法将“获胜”并被使用，而另一个方法将永远不会被调用。

## `initialize`方法_

运行时`initialize`在将第一条消息（除了`load`or `initialize`）发送到类对象或类的任何实例之前调用类对象的方法。该消息是使用正常机制发送的，因此如果您的类没有实现`initialize`，而是从实现的类继承，那么您的类将使用其超类的`initialize`. 运行时将首先发送`initialize`到所有类的超类（如果尚未发送超类`initialize`）。

例子：

```
@interface Superclass : NSObject
@end

@interface Subclass : Superclass
@end

@implementation Superclass

+ (void)initialize {
    NSLog(@"in Superclass initialize; self = %@", self);
}

@end

@implementation Subclass

// ... initialize not implemented in this class

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        Subclass *object = [[Subclass alloc] init];
    }
    return 0;
} 
```

该程序打印两行输出：

```
2012-11-10 16:18:38.984 testApp[7498:c07] in Superclass initialize; self = Superclass
2012-11-10 16:18:38.987 testApp[7498:c07] in Superclass initialize; self = Subclass 
```

由于系统`initialize`延迟发送方法，除非您的程序实际向类（或子类，或类或子类的实例）发送消息，否则类不会收到消息。并且当您收到`initialize`时，您流程中的每个课程都应该已经收到`load`（如果合适的话）。

规范的实现方式`initialize`是这样的：

```
@implementation Someclass

+ (void)initialize {
    if (self == [Someclass class]) {
        // do whatever
    }
} 
```

这种模式的要点是避免`Someclass`在它具有未实现的子类时重新初始化自身`initialize`。

运行时在函数中发送`initialize`消息。可以看到它是用来发送的，也就是普通的消息发送功能。 `_class_initialize`[`objc-initialize.mm`](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-initialize.mm)`objc_msgSend`

## 进一步阅读

查看Mike Ash 周五关于此主题[的问答。](http://www.mikeash.com/pyblog/friday-qa-2009-05-22-objective-c-class-loading-and-initialization.html)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-10T22:28:50.290

这意味着不要`+initialize`在一个类别中覆盖，你可能会破坏一些东西。

`+load`在加载该类或类别*后*，每个实现 的类或类别都会调用一次`+load`。当它说“静态链接”时，它意味着编译到您的应用程序二进制文件中。这样编译的类上的方法将在您的应用程序启动时执行，可能在它进入之前执行。当它说“动态加载”时，它意味着通过插件包加载或调用. 如果您使用的是 iOS，则可以忽略这种情况。*`+load``main()``dlopen()`*

 *`+initialize`在第一次向类发送消息时调用，就在它处理该消息之前。这（显然）只发生一次。如果您`+initialize`在某个类别中覆盖，则会发生以下三种情况之一：

*   您的类别实现被调用并且类的实现没有
*   调用其他人的类别实现；你写的什么都没有
*   您的类别尚未加载，它的实现永远不会被调用。

这就是为什么你永远不应该`+initialize`在一个类别中覆盖 - 事实上，尝试替换一个类别中的*任何*方法是非常危险的，因为你永远不确定你要替换什么，或者你自己的替换是否会被另一个类别切换出来。

顺便说一句，另一个需要考虑的问题`+initialize`是，如果有人将您子类化，您可能会为您的类调用一次，并且为每个子类调用一次。如果您正在执行诸如设置`static`变量之类的操作，您将需要防范这种情况：无论是使用`dispatch_once()`还是通过测试`self == [MyClass class]`。*

# java - 在数组中搜索单词

> ID：13326439
> 
> 赞同：1
> 
> 时间：2012-11-10T21:54:34.490
> 
> 标签：java, arrays, string, search, boggle

> **可能重复：**
> [如何从字母矩阵中找到可能的单词列表 [Boggle Solver]](https://stackoverflow.com/questions/746082/how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver)

我有一个`String[][]`数组，例如

```
h,b,c,d
e,e,g,h
i,l,k,l
m,l,o,p 
```

我需要将 ArrayList 与此数组进行匹配，以找到 ArrayList 中指定的单词。搜索 word时，我需要得到肯定匹配和字母的位置，`hello`例如在这种情况下`(0,0)`, `(1,1)`,`(2,1)`和。`(3,1)``(3,2)`

当一个字母一个字母地查找时，我们假设我们成功地找到了第一个`l`字母，程序应该尝试在`l`它旁边的位置找到下一个字母（ ）。所以它应该匹配 e、e、g、k、o、l、m 和 i 表示它周围的所有字母：水平、垂直和对角线。在单词中找不到相同的位置两次，因此`(0,0)`, `(1,1)`, `(2,1)`,`(2,1)`和`(3,2)`是不可接受的，因为该位置`(2,1)`匹配了两次。`l`在这种情况下，两者都将匹配单词，因为允许对角位置，但由于要求一个位置不能多次使用，所以它需要匹配另一个。

这种情况也应该匹配

```
h,b,c,d
e,e,g,h
l,l,k,l
m,o,f,p 
```

如果我们假设我们尝试搜索`helllo`，它将不匹配。要么匹配，`(x1, y1) (x1, y1)`要么`(x1, y1) (x2, y2) (x1, y1)`无法匹配。

我想知道实现这种功能的最佳方式是什么。如果我`String[][]`在 ArrayList 中有 4x4 数组和 100 000 个单词，那么最有效和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:53:52.010

我认为您可能会花费大部分时间来尝试匹配您的网格不可能构建的单词。所以，我要做的第一件事就是尝试加快这一步，这应该能让你大部分时间到达那里。

我会将网格重新表达为您按字母索引的可能移动的表格。首先为每个字母分配一个数字（通常是 A=0、B=1、C=2、……等等）。对于您的示例，让我们只使用您拥有的字母的字母表（在第二个网格中最后一行读取“mofp”）：

```
 b | c | d | e | f | g | h | k | l | m |  o |  p
---+---+---+---+---+---+---+---+---+---+----+----
 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 
```

然后你创建一个二维布尔数组，告诉你是否有某个字母转换可用：

```
 |  0  1  2  3  4  5  6  7  8  9 10 11  <- from letter
     |  b  c  d  e  f  g  h  k  l  m  o  p
-----+--------------------------------------
 0 b |     T     T     T  T     
 1 c |  T     T  T     T  T
 2 d |     T           T  T
 3 e |  T  T     T     T  T  T  T
 4 f |                       T  T     T  T
 5 g |  T  T  T  T        T  T  T
 6 h |  T  T  T  T     T     T  T
 7 k |           T  T  T  T     T     T  T
 8 l |           T  T  T  T  T  T  T  T  T
 9 m |                          T     T
10 o |              T        T  T  T
11 p |              T        T  T
 ^
 to letter 
```

现在浏览您的单词列表并将单词转换为转换（您可以预先计算）：

```
hello (6, 3, 8, 8, 10):
6 -> 3, 3 -> 8, 8 -> 8, 8 -> 10 
```

然后通过在表中查找这些转换来检查是否允许这些转换：

```
[6][3] : T
[3][8] : T
[8][8] : T
[8][10] : T 
```

如果它们都被允许，那么就有可能找到这个词。

例如，可以在第 4 次转换（m 到 e：helMEt）时排除单词“helmet”，因为表中的该条目是错误的。

并且可以排除仓鼠这个词，因为不允许第一个（h 到 a）转换（甚至不存在于您的表中）。

现在，对于您没有消除的剩余单词，请尝试按照您现在的方式或按照此处其他一些答案中的建议在网格中实际找到它们。这是为了避免由于网格中相同字母之间的跳跃而导致的误报。例如，表格允许使用“帮助”一词，但网格不允许使用“帮助”一词

当你的手机应用程序完成时让我知道！;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:09:00.513

一种调查方法是从网格中生成所有可能的字母（字符串）序列，然后检查每个单词是否存在于这组字符串中，而不是根据网格检查每个单词。例如，从`h`您的第一个网格开始：

```
h
hb
he
he // duplicate, but different path
hbc
hbg
hbe
hbe // ditto
heb
hec
heg
... 
```

由于生成序列的开销，这对于非常大的单词列表可能会更快。对于小的单词列表，根据网格单独测试它们会快得多。

您要么需要存储整个路径（包括坐标），要么有一个单独的步骤来计算匹配单词的路径。哪个更快取决于命中率（即您在网格中实际找到的输入词的比例）。

根据您需要实现的目标，您也许可以将序列与字典单词列表进行比较，以在开始匹配之前消除非单词。

**[链接问题](https://stackoverflow.com/questions/746082/how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver)中的**更新 2**有几个有效的、快速的解决方案可以从网格生成序列，递归地加深以生成更长的序列。但是，他们针对从单词列表生成的 Trie 进行测试，这使他们能够尽早放弃序列的子树——这会修剪搜索并大大提高效率。这与 Markus 建议的转换过滤具有类似的效果。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T22:14:27.917

虽然我确信在学术上对这个问题有一个美丽而有效的答案，但您可以使用相同的方法，但有一个列表可能性。因此，对于单词“hello”，当您找到字母“h”时，接下来您将添加可能的“e”字母，依此类推。每一种可能性都会形成一条字母的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T23:06:43.357

我首先将您的网格视为一个图形，其中每个网格位置都是一个节点，每个节点都连接到它的八个邻居（但是，您不需要在代码中将其显式编码为图形）。一旦找到潜在的起始字母，您需要做的就是从每个起始位置对图形进行深度优先搜索。关键是要记住你已经搜索过的地方，这样你就不会为自己做更多的工作（或者更糟糕的是，陷入一个循环）。

* * *

根据所使用的字符空间的大小，您还可以从构建查找表中受益。让我们假设英语（26 个连续字符代码点）；如果您从构建一个 26 元素`List<Point>[]`数组开始，您可以从网格中填充该数组一次，然后可以快速获取位置列表以开始搜索任何单词。例如，要获取`h`我会写的位置`arr['h'-'a']`

如果您应用相同的策略并为图中的每个边列表构建查找表，您甚至可以进一步利用这一点。不必为每个节点搜索所有 8 条边，您已经知道要搜索哪些边（如果有）。

（注意——如果你的字符空间不连续，你仍然可以做一个查找表，但你需要使用`HashMap<Character,List<Point>>`and`map.get('h')`来代替。）**

# c - 寻找 GCD 的汇编语言程序 - 浮点异常

> ID：13326441
> 
> 赞同：0
> 
> 时间：2012-11-10T21:54:48.173
> 
> 标签：c, assembly, floating-point, greatest-common-divisor

通过这个程序，我打算找到两个数字的 GCD。但我得到的结果是“浮点异常（核心转储）”。问题是什么？我试图生成的代码是

```
int main() {
int sml, lrg, rem;
read %d sml
read %d lrg
while (sml > 0){
rem = lrg % sml;
lrg = sml;
sml = rem;
}
print %d lrg;
return 0;
} 
```

我生成的汇编文件是：

```
 .file "gcd.c"
    .section .rodata
.LC0:
    .string "%d"
.LC1:
    .string "%d\n"

    .text
    .globl main
    .type main, @function
main:
    pushl %ebp
    movl  %esp, %ebp
    andl  $-16, %esp
    subl  $32, %esp

    leal  -8(%ebp), %eax    #scan a value
    movl  %eax,  4(%esp)
    movl  $.LC0,  (%esp)
    call scanf

    leal  -12(%ebp), %eax   #scan a value
    movl  %eax,  4(%esp)
    movl  $.LC0,  (%esp)
    call scanf

.L2:
    movl $0, %eax
    cmpl -8(%ebp),%eax
    jle .L0
    jmp .L1

.L0:
    movl  -12(%ebp),%eax
    movl -8(%ebp),%ecx
    movl %eax,%edx
    sarl $31, %edx
    idivl %ecx
    movl %edx,%eax
    movl %eax, -16(%ebp)
    movl -8(%ebp),%edx
    movl %edx, -12(%ebp)
    movl -16(%ebp),%edx
    movl %edx, -8(%ebp)
    jmp .L2

.L1:
    movl -12(%ebp), %eax
    movl  %eax,  4(%esp)
    movl $.LC0, (%esp)
    call printf

    movl $0, %edx

    movl $0, %eax       #end of program
    leave
    ret

.LFE2:
    .size     main, .-main 
    .ident     "GCC: (GNU) 4.2.3 (4.2.3-6mnb1)" 
    .section    .note.GNU-stack,"",@progbits 
```

另一方面，此汇编代码有效

```
 .file   "check.c"
    .section    .rodata
.LC0:
    .string "%d"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    andl    $-16, %esp
    subl    $32, %esp
    leal    20(%esp), %eax
    movl    %eax, 4(%esp)
    movl    $.LC0, (%esp)
    call    scanf
    leal    24(%esp), %eax
    movl    %eax, 4(%esp)
    movl    $.LC0, (%esp)
    call    scanf
    jmp .L2
.L3:
    movl    24(%esp), %eax
    movl    20(%esp), %ecx
    movl    %eax, %edx
    sarl    $31, %edx
    idivl   %ecx
    movl    %edx, 28(%esp)
    movl    20(%esp), %eax
    movl    %eax, 24(%esp)
    movl    28(%esp), %eax
    movl    %eax, 20(%esp)
.L2:
    movl    20(%esp), %eax
    testl   %eax, %eax
    jg  .L3
    movl    24(%esp), %eax
    movl    %eax, 4(%esp)
    movl    $.LC0, (%esp)
    call    printf
    movl    $0, %eax
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3"
    .section    .note.GNU-stack,"",@progbits 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:58:11.027

您可能在此行中除以零：

```
idivl %ecx 
```

在寄存器中有一个`0`值。`ecx`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T13:22:42.080

你的比较和跳跃是错误的。工作代码有：

```
testl   %eax, %eax
jg  .L3 
```

损坏的代码有：

```
movl $0, %eax
cmpl -8(%ebp),%eax
jle .L0
jmp .L1 
```

前者将 %eax（包含最近计算的残差）与零进行比较，如果残差为正（大于零），则继续循环（跳转到 .L3）。

后者将 0 与 -8(%ebp)（最近计算的残差）进行比较。注意顺序不同；它将 0 与 -8(%ebp) 进行比较，而不是将 -8(%ebp) 与 0 进行比较。该`testl`指令将值（在执行 AND 之后）与零进行比较。如果该值为正，则它“大于”零。该`cmpl`指令将其第二个操作数与其第一个操作数进行比较；如果第二个操作数超过第一个，结果是“大于”。这是因为，在英特尔的手册和汇编语言中，指令的操作数是以相反的顺序编写的。例如，将 3 移入 %eax 将是“mov %eax, $3”。但是，您使用的汇编程序将所有操作数从 Intel 的顺序中反转（由于遗留原因）。

因此，如果 0 小于或等于余数，则损坏的代码将继续循环（跳转到 .L0）。因此，如果余数为零，则循环继续。您可以将其更改`jle`为`jl`：

```
jl .L0 
```

或者，您可以消除多余的无条件跳转：

```
movl $0, %eax
cmpl -8(%ebp),%eax
jge .L1 
```

此外，您可能想要更改：

```
movl $.LC0, (%esp)
call _printf 
```

到：

```
movl $.LC1, (%esp)
call _printf 
```

这样您就可以传递`"%d\n"`给 printf 而不是传递`"%d"`.

顺便说一句，该`idivl`指令会产生除法错误，而不是浮点异常。您的系统误报了该错误。

# html - Cookie Free Domains: Subdomain Alternative

> ID：13326447
> 
> 赞同：0
> 
> 时间：2012-11-10T21:55:25.147
> 
> 标签：html, .htaccess, cookies, seo

Using Yslow, it's complaining about cookie free components. I understand what the problem is, but is there no solution other than using a subdomain? Using a subdomain can create SSL issues, especially along with CDN, and plugin updates.

Is there not an alternative? Such as a script that says "don't cookie these components?"

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:13:53.493

When a cookie is set for a domain, the browser sends it for every request, as long as the cookie is not expired. So no, there is no way to say "don't send cookies for this request" except a different domain which you mentioned.

Depending on your website, you can, instead of using cookies, use:

*   query parameters: GET my_file.php?my_session_id=abcd123456
*   custom headers (for ajax requests only): you can set HTTP headers `X-MY-SESSION-ID: abcd123456`
*   POST body variables

You asked for alternatives, so I gave some but it's hard to implement these if all you want is to avoid sending cookies when loading a static asset.

So my suggestion is to look at how many extra bytes you're actually sending for each request and trying to reduce that to a minimum.

In my opinion, only one cookie is really needed for the user's session id, so that's about 50-60 bytes. You may also choose to use Google Analytics, which will add about a couple hundred bytes. Everything besides that is bloat. But don't sweat it if Yslow shames you for 300 extra bytes, because it won't make a huge difference.

# actionscript-3 - TweenLite AS3：ease:Linear.easeNone 不起作用

> ID：13326448
> 
> 赞同：0
> 
> 时间：2012-11-10T21:55:27.977
> 
> 标签：actionscript-3, random, timer, easing, gsap

在下面的函数中，我尝试将随机项目（由函数 generateItem() 生成）扔到舞台上，并让它们从舞台右侧外侧移动到左侧外侧。这很好用，但唯一的问题是 TweenLite.to 函数中的 ease:Linear.easeNone 不起作用。项目在动画开始时保持快速，在动画结束时保持缓慢。这是代码：

```
private function timerHandler(event:TimerEvent):void{
    //item handling
    if(gameTimer.currentCount % 4 === 0){
    var item:MovieClip = generateItem();
    arrItems.push(item);

    for each(item in arrItems){
        TweenLite.to(item,5,{x:-(item.width - 1), ease:Linear.easeNone});
        trace(item + " ----- " + item.x);
        if(item.x < -(item.width)){
            arrItems.splice(arrItems.indexOf(item),1);
            stage.removeChild(item);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:52:32.137

`for each`这里发生的是你在循环中一次又一次地覆盖你的补间。一旦你为一个对象设置了补间动画，`TweenLite.to`你就不需要为同一个对象再次设置它，除非你想用一个**新的 tween**覆盖它。

您看到动画结束变慢的原因是因为对象必须移动到补间动画的最后一点的**距离**更短（因为它已经覆盖了其中的一部分），但动画的总持续时间仍然是5秒。**速度 = 距离/时间**，所以相同的时间但更短的距离 = 更慢的补间。

您可以通过将`TweenLite.to`调用移到外部来解决此问题`loop`，因此**每个项目只会设置一个补间**。我为您的代码推荐的另一项改进是使用`onComplete`TweenLite 的回调函数来避免`for each`timeHandler 函数中的昂贵循环，并且仅在补间完成后删除该项目，除非您出于其他原因需要遍历所有项目而不是只需检查补间是否已结束。

例如：

```
private function timerHandler(event:TimerEvent):void
{
  //item handling
  if(gameTimer.currentCount % 4 === 0)
  {
    var item:MovieClip = generateItem();

    arrItems.push(item);

    //only call once for each item
    TweenLite.to(item,5,{ x:-(item.width - 1), 
                          ease:Linear.easeNone,
                          onComplete: removeItem,
                          onCompleteParams:[item]
                         });

  }

}

private function removeItem(item:MovieClip):void
{
  arrItems.splice(arrItems.indexOf(item),1);
  stage.removeChild(item);
} 
```

希望这可以帮助！

# sql - T-SQL 更新比删除和添加列花费的时间更长

> ID：13326449
> 
> 赞同：0
> 
> 时间：2012-11-10T21:55:45.333
> 
> 标签：sql, tsql, sql-server-2005

我需要添加一列，使得*所有现有行的值为 1，所有新行的值默认为 0*

很简单，我已经创建了一个脚本

```
ALTER TABLE Table ADD Column1 BIT NOT NULL DEFAULT 0
GO

UPDATE Table SET Column = 1
GO 
```

在 400K 行数据集上更新查询需要 10 多分钟。**这里的开销在**哪里？

我怀疑我可以添加列，使默认值为 1，然后在不到 10 秒的计算时间内将默认值更改为 0（并且可能会更改脚本以在下一个测试阶段这样做）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:04:31.873

首先，`"Print"`在语句之间使用并放置两个时间戳来检查哪个有开销。为了解决一个问题，你应该首先知道导致它的根源。正如我的经验所说，它正在添加需要很长时间才能完成的列。

其次，如果表中存储了大约 40 万条记录，那么添加新列当然会带来巨大的 IO 成本。因此，如果您让我知道您的需求，我会想到一个更好的解决方案。添加和删​​除列，更改表等在蓝月亮中发生一次，您不应该像通常的操作那样做这样的事情。这根本不正确。

毕竟，我知道您想添加一列并在 10 秒内更新值，但这取决于许多其他事情，而您的代码（因为它很简单）就是其中之一。所以我认为你应该更多地考虑这个想法而不是你的代码。

希望能帮助到你。

干杯

# android - getHierarchyViewer() 抛出 NoClassDefFoundError

> ID：13326453
> 
> 赞同：1
> 
> 时间：2012-11-10T21:56:36.873
> 
> 标签：android

我正在尝试通过 IChimpDevice 获取 android HierarchyViewer，我的代码如下所示

```
public HierarchyViewer GetHierarchyViewer()
{
    return mDevice.getHierarchyViewer();
} 
```

我以这种方式初始化了 mDevice：

```
mDevice = mChimpchat.waitForConnection(TIMEOUT, ".*");
if ( mDevice == null ) {
    throw new RuntimeException("Couldn't connect.");
}
mDevice.wake(); 
```

当我打电话时`getHierarchyViewer()`，我得到了这个例外：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/android/hierarchyviewerlib/device/DeviceBridge
    at com.android.chimpchat.hierarchyviewer.HierarchyViewer.setupViewServer(HierarchyViewer.java:46)
    at com.android.chimpchat.hierarchyviewer.HierarchyViewer.<init>(HierarchyViewer.java:42)
    at com.android.chimpchat.adb.AdbChimpDevice.getHierarchyViewer(AdbChimpDevice.java:96)
    at ChimpChatWrapper.GetHierarchyViewer(ChimpChatWrapper.java:44)
    at ViewService.main(ViewService.java:17) 
```

有人可以帮助解释为什么找不到 DeviceBridge 类吗？

# c - c getline 跳过空行

> ID：13326464
> 
> 赞同：2
> 
> 时间：2012-11-10T21:58:06.200
> 
> 标签：c, line, getline

```
while(getline (&line, &line_size, f) != -1){} 
```

> 我正在使用此功能来读取行线。但我想知道我什么时候读空行。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:12:49.893

因此正如 H2CO3 已经提到的，您可以为此使用线长：

```
while (getline (&line, &line_size, f) != -1) {

    if (strlen(line) == 1) {
        printf("H2CO3 spotted a blank line\n");
    }

    /* or alternatively */
    if ('\n' == line[0]) {
        printf("Ed Heal also spotted the blank line\n");
    }

    ..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:40:18.673

您需要定义空行。

此外，因为“getline 函数从流中读取整行，直到并包括下一个换行符。”

我不认为

```
strlen(line) == 1 
```

是可移植的，因为 Win/DOS 和 Unix 使用不同的 EOL 约定。此外，EOF 可能发生在 EOL 字符完成之前。所以真的，你需要定义一个函数，比如

```
int is_blank_line(char *line, int line_size)
{
   return line_size == 0 || is_eol(line)
} 
```

其中 is_eol 是为您所在的平台定义的。这是您可以输入空格的地方，可以是空行等。

所以你会得到类似的东西：

```
int is_eol(char *line)
{
...
     return result;
}
...
int is_blank_line(char *line, int line_size)
{
  return line_size == 0 || is_eol(line)
}
...
while (getline (&line, &line_size, f) != -1) {
    if (is_blank_line(line, line_size)) {
        printf("blank line spotted\n");
    }
...
} 
```

# python - 服务 blob 给出 404 错误

> ID：13326473
> 
> 赞同：1
> 
> 时间：2012-11-10T21:58:46.017
> 
> 标签：python, google-app-engine, blobstore

我正在尝试从存储在 db.Model 作为 blobstore.BlobReferenceProperty() 的 blobKey 中提供 blob，但我不确定如何正确执行此操作，因为我当前的方法给出了 404。我正在存储通过使用常规的“重写”请求获取 blobKey 值`self.request.get('file_field')`

密钥的内容在 SDK 控制台中如下所示：

```
Content-Type: video/mp4
MIME-Version: 1.0
Content-Length: 475712
Content-MD5: OTY0MjY4OGI4NDgwYzVlZTI2MGJiNzg0YTA4OTIzNzY=
content-type: video/mp4
content-disposition: form-data; name="video_file"; filename="test_time.mp4"
X-AppEngine-Upload-Creation: 2012-11-10 21:41:12.973934 
```

我的视频下载处理程序非常标准，看起来像这样

```
class VideoServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, resource):
    resource = str(urllib.unquote(resource))
    blob_info = blobstore.BlobInfo.get(resource)
    self.send_blob(blob_info) 
```

这是我呈现网址的方式：

```
'/videos/%s' % time_data_instance.video_key.key() 
```

和网址映射：

```
('/videos/([^/]+)?', VideoServeHandler) 
```

这是我从控制台得到的 404 错误：

```
INFO     2012-11-10 21:54:11,371 dev_appserver.py:3092] "GET /videos/Content-Type:%20video/mp4MIME-Version:%201.0Content-Length:%20475712Content-MD5:%20OTY0MjY4OGI4NDgwYzVlZTI2MGJiNzg0YTA4OTIzNzY=content-type:%20video/mp4content-disposition:%20form-data;%20name= HTTP/1.1" 404 - 
```

有谁知道问题可能是什么，查看 404 中的 url，它看起来好像不正确，但我找不到任何其他生成它的方法

更新：

这是整个代码

[http://www.pastebucket.com/5163](http://www.pastebucket.com/5163)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:02:16.717

问题在于您的请求字符串：

```
INFO     2012-11-10 21:54:11,371 dev_appserver.py:3092] "GET /videos/Content-Type:%20video/mp4MIME-Version:%201.0Content-Length:%20475712Content-MD5:%20OTY0MjY4OGI4NDgwYzVlZTI2MGJiNzg0YTA4OTIzNzY=content-type:%20video/mp4content-disposition:%20form-data;%20name= HTTP/1.1" 404 - 
```

据我所知，您的请求`/videos/Content-Type:%20video/mp4[..some garbage...]`，难怪您会得到 404 回复。

再次检查您如何提出请求 URL。绝对不是这样的：

```
'/videos/%s' % time_data_instance.video_key.key() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:02:52.087

send_blob 需要[BlobKey](https://developers.google.com/appengine/docs/python/blobstore/blobkeyclass)，而不是 BlobInfo。

只需将资源传递给 send_blob

```
class VideoServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, resource):
    resource = str(urllib.unquote(resource))
    self.send_blob(resource) 
```

# c++ - Mac 无法编译，Windows 和 Linux 可以 - Boost ASIO？

> ID：13326475
> 
> 赞同：1
> 
> 时间：2012-11-10T21:59:08.943
> 
> 标签：c++, macos, boost, boost-asio

我有一个 boost socket 实现，它可以在 Windows 和 Linux 上完美运行，但在 mac 上，相同的代码会出现一堆编译错误，例如。

```
src/modules/socket/ssl_tcp_socket_binding.cpp: In constructor 
'ti::SecureTCPSocket::SecureTCPSocket(tide::Host*, ti::TCPSocketBinding*)':
src/modules/socket/ssl_tcp_socket_binding.cpp:27: error: class 'ti::SecureTCPSocket' does not have any field named 'Socket'
src/modules/socket/ssl_tcp_socket_binding.cpp:29: error: no matching function for call to 'ti::Socket<boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >&> >::Socket()' 
```

构造函数

```
SecureTCPSocket::SecureTCPSocket(Host *host, TCPSocketBinding * tcp_socket_binding)
        : Socket(host, string("Socket.SecureTCPSocket")), 
```

标题

```
class SecureTCPSocket
        : public Socket<boost::asio::ssl::stream<tcp::socket&> >
    { 
```

我不明白为什么这在 Mac 上是个问题，但在 Linux 和 Windows 上却完全没问题？

关于我可能做错或遗漏的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:38:29.167

当你提到一个不同于你当前正在实现的类模板时，你必须指定模板参数。除非是复制粘贴错误，否则需要使用

```
SecureTCPSocket::SecureTCPSocket(Host *host, TCPSocketBinding * tcp_socket_binding)
    : Socket<boost::asio::ssl::stream<tcp::socket&> >(host,
                                                      string("Socket.SecureTCPSocket")),
      ... 
```

事实上，错误消息表明需要：它声明它不知道什么`Socket`是并继续声明没有匹配的构造函数用于实例化`Socket<boost::asio::ssl::stream<tcp::socket&> >`（嗯，它的扩展版本）。

The question in this case actually isn't why the compiler used on Mac (clang?) doesn't compile the code but rather why the compilers used on Windows and Linux do compile the code!

# c - 使用 C 编程的 Linux 管道。通过管道重定向输入/输出

> ID：13326476
> 
> 赞同：0
> 
> 时间：2012-11-10T21:59:09.067
> 
> 标签：c, linux, pipe, pipeline, mkfifo

我是 linux 的初学者，但是我已经设法做了自己的 shell。是时候在其中添加管道了。（就是这样，作业说）。谁能向我解释一下如何做到这一点？我知道理论上，它应该这样工作。

```
unsigned char* child_results; //buffer to save results from child processes

for (int i = 0; i < 2; i++) {
    pid = fork();

    if (pid == 0) {
        //if it's the first process to launch, close the read end of the pipe
        //otherwise read what the parent writes to the pipe and then close the 
        //read end of the pipe

        //call execvp()
    }
    else {
        //if you've launched the first process, close the write end of the pipe
        //otherwise write the contents of child_result to the child process
        //and then close the write end of the pipe

        //read from the child's pipe what it processed

        //save the results in the child_results buffer

        wait(NULL); //wait for the child to finish
    }
} 
```

但是，我无法让它工作。我整天都在做，但仍然没有。我确实理解这个想法，但我无法让它发挥作用。some1可以帮助我吗？这是我的管道部分的代码：

```
for (int i = 0; i <= pipeline_count; i++) { 
    int pdesc[2]; 
    // creating pipe
    pipe(pdesc);
    int b = fork();
    // child
    if (b == 0) {
        // 1st pipeline
        if (i == 0) {       
            //<?>               
        }

        // last pipeline
        if (i == pipeline_count) {                              
            //<?>
        }

        // inside pipeline
        if (i > 0 && i < pipeline_count)  {
            //<?>
        } 
        execvp(array[0], array);
    }
    else { 
        // parent
        //<?>
        wait(NULL);         
    }
} 
```

这是一个shell命令的例子

```
ls -al | tr a-z A-Z 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:13:08.693

您必须关闭子节点上的输入流并使用`dup`该通道的管道进行复制。父级对管道的另一侧执行相同的操作。像这样的东西：

```
b = fork();
if (b == 0) {
  /* Close stdin, and duplicate the input side of the pipe over stdin */
  dup2(0, pdesc[0]);
  execlp(...);
}
else {
  /* Close stdout, and duplicate the output side of the pipe over stdout */
  dup2(1, pdesc[1]);
  execlp(...);
}
... 
```

我已经向您展示了如何在两个进程的情况下执行此操作，但您可以了解总体思路并将其调整到其他情况。

希望有帮助！

# android - How to get window height from inside SurfaceView?

> ID：13326482
> 
> 赞同：2
> 
> 时间：2012-11-10T21:59:46.013
> 
> 标签：android, android-layout

How do I get the window height when I'm inside a surface view

This is my layout: (The surface view has already the LinearLayout "camera_preview" passed to it.

Now the question is how do I get the Window layout, which is identical to the FrameLayout ?

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="1" >

        <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:layout_gravity="center"
        android:id="@+id/camera_preview">            
        </LinearLayout>

        <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"        
        android:background="#999999"
        android:gravity="top|center_horizontal"
        android:id="@+id/top_cover">            
        </LinearLayout>

        <LinearLayout
            android:background="#999999"    
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center_horizontal"
            android:layout_marginRight="0dp"
            android:layout_marginTop="0dp"
            android:padding="10dp"
            android:id="@+id/bottom_cover"
            android:gravity="center">
            <Button
                android:id="@+id/button_capture"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="Capture" />
        </LinearLayout>
    </FrameLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:48:06.750

You can get the screen dimensions via:

```
WindowManager wm = (WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay(); 
```

and then do (for API level 13 and up):

```
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

On previous levels, these deprecated code was used:

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth();  // deprecated
int height = display.getHeight();  // deprecated 
```

Source: [Get screen dimensions in pixels](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

# html - css 框未显示在正确的位置（添加 doctype 时）

> ID：13326485
> 
> 赞同：1
> 
> 时间：2012-11-10T22:00:37.903
> 
> 标签：html, css

我编写了一个与 firefox 和 chrome 有点兼容的 css 代码。我没有检查 Internet Explorer。当我用 Internet Explorer 打开我的网站时，这些盒子的位置都搞砸了。所以我需要添加一个文档类型。但是当我添加文档类型时，我的框不会在任何浏览器上显示。我对css并没有真正的经验，所以欢迎任何帮助。它应该如何（不是 Internet Explorer）“ www.informatica-sj.bplaced.net ”当我添加一个 doctype 规则[http://www.informatica-sj.bplaced.net/doctype/index.html](http://www.informatica-sj.bplaced.net/doctype/index.html)我的 CSS 和 index.html [http://pastebin.com/Rz1GH41a](http://pastebin.com/Rz1GH41a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:05:47.183

你的文档类型应该是

```
<!DOCTYPE html> 
```

这适用于所有浏览器，应该添加到 HTML 的顶部。

我注意到您没有在 end margin 属性上声明值

```
margin: 50px 0 0 529; 
```

应该是 529px；

# git - TeamCity：成功构建推送到 Git Repo

> ID：13326487
> 
> 赞同：16
> 
> 时间：2012-11-10T22:00:53.090
> 
> 标签：git, teamcity

TeamCity 可以将成功的构建推送到 git 存储库吗？

我在 TeamCity 中看不到执行此操作的特定构建步骤。
我使用的是 TeamCity 7.1.1 版本

谢谢， 亨里克

更新：

好的，谢谢你的回答，我觉得有点复杂。我发现我可以简单地将成功构建的标签推回我的全局存储库，TeamCity 从中获取构建数据。我可以从中提取更改并查看最后一次提交是否成功。

如果 TeamCity 为这种工作流程提供了一个简单的选项，我会很高兴！

如果每个开发人员都可以从仅在构建成功时更新的 repo 中提取，那将是很棒的，还是我错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T22:08:45.957

您可以让 TeamCity 执行随后调用的 shell 脚本`git push`（使用适当的参数，例如`git push <repository>`推送到不同的存储库）。请确保`git`推送操作不需要交互式身份验证。

`git push`可以在此处找到相关示例（使用 a 部署到 Heroku ）：http: [//blog.carbonfive.com/2010/08/06/deploying-to-heroku-from-teamcity/](http://blog.carbonfive.com/2010/08/06/deploying-to-heroku-from-teamcity/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T08:17:24.923

我终于成功了！

您必须在 teamcity 项目中添加构建参数：

```
name= env.PATH
value= C:\Program Files (x86)\Git\cmd 
```

然后使用自定义脚本添加一个新的命令行构建步骤：

```
call git push "C:\Gruene Git Repos\TeamCityApp" master 
```

“呼”字很重要！

谢谢您的帮助！亨里克

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-29T13:05:22.070

如果您升级到 8 或更高版本，您可以只创建一个或多个“自动合并”构建功能。这将推送到远程仓库。由于命名混乱，我一开始也没有找到它，但它们必须支持许多具有不同命名的不同 VCS 是有道理的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-21T21:42:49.200

## 简单的答案

一段时间以来，TeamCity 支持 VCS 标签，这允许您的 VCS Root 用户（如果它具有写入权限）标记刚刚使用版本或 TeamCity 知道的任何其他内容构建的提交哈希（请参阅 TeamCity 中的参数引用的完整列表维基）。

## 旁白

如另一个答案所述，TeamCity 中可用的自动合并功能将自动从指定的分支列表（启用通配符）执行合并到请求的分支，并且它将监视和构建，并且仅在成功时才合并它们。

自动合并功能可能很好，但如果您没有良好的测试覆盖率，它也可能很危险，因为开发人员可能会破坏没有测试的东西，这会导致您的代码在很长一段时间内出现问题。防止这种情况的一种方法是要求每次构建项目时都创建/运行 +2 测试（可在 TeamCity 中配置）。这些警告在之前链接的文章中提到了自动合并功能。

## 相关决议

我们遇到了一个与合并没有直接关系的类似问题，但如果您使用 VCS Labeling（可怕的名称），则需要将工作中的一些更改推送到 TeamCity 添加的“轻量级标签”（至少对于 Git）之外。

我们最终做的是：

1.  使用“环境变量”类型的参数（对构建代理可见，其他类型不可见）并设置“规范”以创建“密码”类型的字段，这将防止输入的文本显示在配置中UI 或作业日志输出。
2.  在作业配置中输入用户名和密码作为参数
3.  创建了一个查看“代理端”存储库的 git 远程 URL 的脚本，并在 url ( [http://gituser:gitpassword@githost.com/path/to/repo. git](http://gituser:gitpassword@githost.com/path/to/repo.git) ) 以便将更改推送到新分支。
    *   然后，我们在脚本末尾删除远程，以便访问系统的任何人都无法提取凭证。当然，凭证的范围也相当严格，只能访问某些存储库，但遵循最低权限规则总是好的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-15T16:01:46.090

我的解决方案可能很愚蠢，但很简单。步骤如下：

1.  从 heroku git 存储库克隆你的 heroku，它将创建你的 heroku 应用程序文件夹。

    `heroku git:clone -a {app-name}`

2.  将需要更新的文件复制到heroku

    `xcopy client "{app-name}/client" /e/i/h/y`

    `xcopy server "{app-name}/server" /e/i/h/y`

    `xcopy imports "{app-name}/imports" /e/i/h/y`

3.  混帐添加。

    `cd {app-name} && git add .`

4.  git 提交

    `cd {app-name} && git commit --message 'ok'`

5.  推送到heroku

    `cd {app-name} && git push heroku master`

# c - 有人可以修改我的代码吗？我需要读取一个字符串并将其存储到一个数组中

> ID：13326488
> 
> 赞同：0
> 
> 时间：2012-11-10T22:01:06.340
> 
> 标签：c, arrays, string, pointers, input

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

int main()
{
int a = 0, len1 = 0, len2 = 0;
int BUFSIZE = 1000;
char *string1[1];
char *string2[1];
FILE *fp1 = fopen("input1.txt", "r");
FILE *fp2 = fopen("input2.txt", "r");
if ((fp1 == 0)||(fp2 == 0))
{
    fprintf(stderr, "Error while opening");
    return 0;
}
string1[a] = (char *)malloc(BUFSIZE);
string2[a] = (char *)malloc(BUFSIZE);
fgets(string1[0], BUFSIZE, fp1);
fgets(string2[0], BUFSIZE, fp2);
len1=strlen(string1[0]);
len2=strlen(string2[0]);

printf("%c\n", string1[0][4]);
printf("Output: \n");
srand(time(NULL));
printf("%s\n", string1[0]);
printf("%s\n", string2[0]);
printf("\n");
printf("%d %d", len1, len2); 
printf("\n");

free(string1[0]);
free(string2[0]);
int x=0;
scanf("%d", &x);
fclose(fp1);
fclose(fp2);
return 0;
} 
```

我需要从文件中读取一个字符串并将其存储在一个数组中。我只需要读取一行字符串，数组的每个元素都应该是字符串的一个字符。例如，如果我将“ABCDABC”读入一个数组，那么 array[3] 应该是“D”。但是我真的不知道怎么做，我修改了一些别人的代码，得到了上面的代码。但我不想在我的代码中涉及指针和地址的东西。那么谁能告诉我如何在不使用指针的情况下实现它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:24:42.947

代替`char *`and `malloc`ed 内存，你也可以使用 plain `char[N]`。更改很小，因为 a`char[N]`在传递给函数时会自动转换为指向其第一个元素的指针（likje`fgets`或`strlen`）。`char*`如果您使用普通for`string1`和`string2`,代码也只会发生很小的变化`char *string1 = malloc(BUFSIZE);`，这里的主要区别是最后的`malloc`和`free`。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    int a = 0, len1 = 0, len2 = 0;
    int BUFSIZE = 1000;

    // char *string1;
    // char *string2;

    // instead of one-element arrays of char*, let's just use char arrays

    char string1[BUFSIZE];
    char string2[BUFSIZE];

    // One pointer to check whether fgets succeeded
    char *suc;

    FILE *fp1 = fopen("input1.txt", "r");
    FILE *fp2 = fopen("input2.txt", "r");
    if ((fp1 == 0)||(fp2 == 0))
    {
        fprintf(stderr, "Error while opening");
        return 0;
    }
    // No need for malloc, we have char arrays
    // string1 = (char *)malloc(BUFSIZE);
    // string2 = (char *)malloc(BUFSIZE);
    suc = fgets(string1, BUFSIZE, fp1);
    if (!suc) {
        // fgets failed, what now? exit?
        return EXIT_FAILURE;
    }
    suc = fgets(string2, BUFSIZE, fp2);
    if (!suc) {
        // see above
        return EXIT_FAILURE;
    }
    len1=strlen(string1);
    len2=strlen(string2);

    // is the read string long enough?
    if (len1 > 4) {
        printf("%c\n", string1[4]);
    }
    printf("Output: \n");
    srand(time(NULL));
    printf("%s\n", string1);
    printf("%s\n", string2);
    printf("\n");
    printf("%d %d", len1, len2); 
    printf("\n");

    // free is only for m/c/re-alloced memory
    // free(string1);
    // free(string2);
    int x=0;
    scanf("%d", &x);
    fclose(fp1);
    fclose(fp2);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:23:48.140

要只读取一行，您必须检查字符`'\n'`，您必须这样做

```
char *readLine(char *fileName, int line)
{
    FILE *file = fopen(fileName, "r");
    char *code;
    size_t n,l;
    int c;

    if (file == NULL)
        return NULL; //could not open file

    code = malloc(1000);

    for(l = 0; l <= line; l++)
    {
        n = 0;
        while (c = fgetc(file)) != '\n')
        {
            code[n++] = (char) c;
        }
    }

    // don't forget to terminate with the null character
    code[n] = '\0';        

    return code;
} 
```

此代码将文档的 x 行字符串逐个字符地读取文件，直到找到换行符 x 次。`char *string1 = readLine("C:\document.txt",1);` 如果第二行是`"Sometext"`那么你写这样的东西`string[3] == 'e'`

# c# - 将另一个窗体放在此窗体上的控件顶部

> ID：13326502
> 
> 赞同：2
> 
> 时间：2012-11-10T22:03:48.287
> 
> 标签：c#, windows, forms, location, controls

在 ac# windows 窗体项目中，我有两个单独的窗体。一个叫A表，很大，上面有很多控件。第二个称为B，尺寸小。我想重新定位表单 B，以便它完全覆盖表单 A 中的特定控件之一。简单地说，我可以调整表单 B 的大小以完全匹配控件的大小。但我找不到正确定位它的方法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:49:38.407

根据窗体（A）的位置计算子控件在窗体A上的*绝对*位置。然后根据计算值设置Form B的绝对位置。

# jquery - jQuery按钮拒绝样式

> ID：13326505
> 
> 赞同：0
> 
> 时间：2012-11-10T22:04:19.667
> 
> 标签：jquery, jquery-ui, jquery-ui-button

我正在尝试根据网站上的说明设置 jQuery 按钮的样式，但它不起作用。我按照这里的说明操作：http: [//jqueryui.com/button/#checkbox](http://jqueryui.com/button/#checkbox)

我究竟做错了什么？这是我的代码：http: [//jsfiddle.net/YrNxy/](http://jsfiddle.net/YrNxy/)

**HTML**

```
 <div style="padding-bottom: 10px; padding-top: 10px;">
      <div class="modal_field">Day <strong style="color:#A00">(required)</strong>:</div>
      <div class="format">
        <input type="checkbox" class="check1" />
        <label for="check1">Mon</label>
        <input type="checkbox" class="check2" />
        <label for="check2">Tues</label>
        <input type="checkbox" class="check3" />
        <label for="check3">Wed</label>
        <input type="checkbox" class="check4" />
        <label for="check4">Thu</label>
        <input type="checkbox" class="check5" />
        <label for="check5">Fri</label>
      </div>
    </div>​ 
```

JS

```
$(function() {
        $( ".check" ).button();
        $( ".format" ).buttonset();
    });​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:16:51.953

问题是您的输入设置不正确。我为您修复了 JSBin 上的代码。请注意，该类已更改为复选框的 id（对于 = id 或标签和复选框的名称）。

[http://jsbin.com/akulas/1/](http://jsbin.com/akulas/1/)

# wpf - ListBox 默认是虚拟的吗？

> ID：13326506
> 
> 赞同：5
> 
> 时间：2012-11-10T22:04:26.120
> 
> 标签：wpf, listview

我有一个 WPF 列表框，里面有一些用户卡。
当这些用户卡之一被创建时（在理想情况下，当当前用户从网络收到它的朋友列表时），它会向网络请求用户的信息。
当我在 ListBox 中滚动时，等待几秒钟，然后向后滚动，用户卡具有它们的默认状态。
调试后，我注意到它们被卸载并重新创建。

如何阻止 ListBox 虚拟化这样的项目？

* * *

代码：

```
 <ListBox x:Name="friend_list" Background="{x:Null}" BorderBrush="{x:Null}">
                <ListBox.ItemTemplate>
                    <DataTemplate DataType="data:User">
                        <stuff:UserCard UserID="{Binding Path=UserID}" HorizontalAlignment="Stretch" Margin="0,0,0,0" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T11:18:08.053

在 上设置[`VirtualizingStackPanel.IsVirtualizing`](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.isvirtualizing.aspx)为 false`ListBox`或将正常设置[`StackPanel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)为[`ListBox.ItemsPanel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx)。

# html - IE8 忽略绝对定位和边距：自动

> ID：13326511
> 
> 赞同：0
> 
> 时间：2012-11-10T22:04:53.450
> 
> 标签：html, css, internet-explorer-8

我有一个带有滚动内容的灯箱样式 div，我试图将其限制在视口内的合理大小。我也希望这个 div 水平居中。这在 Fx/Chrome/IE9 中都很容易。

我的问题是 IE8 忽略了我用来调整内容大小的绝对定位，以及`margin: 0 auto`我用来水平居中灯箱的规则。

1.  为什么？
2.  我有哪些解决方法？

**编辑**：通过设置`text-align:center`父元素来解决居中问题，但我不知道为什么会这样，因为我想要居中的元素不是内联的。仍然坚持绝对定位的东西。

HTML：

```
<div class="bg">
  <div class="a">
    <div class="aa">titlebar</div>
    <div class="b">
      <!-- many lines of content here -->
    </div>
  </div>
</div> 
```

CSS：

```
body { overflow: hidden; height: 100%; margin: 0; padding: 0; }
/* IE8 needs ruleset above */

.bg {
 background: #333;
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  height: 100%; /* needed in IE8 or the bg will only be as tall as the lightbox */
}

.a {
 background: #eee; border: 3px solid #000;
  height: 80%; max-height: 800px; min-height: 200px;
  margin: 0 auto; 
  position: relative;
  width: 80%; min-width: 200px; max-width: 800px;
}

.aa { 
  background: lightblue;
  height: 28px; line-height: 28px; 
  text-align: center;
}

.b { 
  background: coral;
  overflow: auto;
  padding: 20px;
  position: absolute;
  top: 30px; right: 0; bottom: 0; left: 0;
} 
```

这是问题的演示：http: [//jsbin.com/urikoj/1/edit](http://jsbin.com/urikoj/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:59:48.747

我发现了发生了什么，这不是文档类型，也不是任何需要更改的代码。

就是**jsbin 的编辑页面不支持 IE8** -[完整查看的完全相同的演示](http://jsbin.com/urikoj/15)* 在 IE8 中的样式正确。

在编辑模式下，当在 IE9 中使用 IE8 浏览器模式和 IE8 文档标准查看时，jsbin 似乎应用了 quirks 模式或类似的东西。令人惊讶的是，该演示还适用于 IE7 浏览器模式和文档标准（关闭怪癖模式）。

*该链接指向更高版本，但唯一的更改是从`<html>`标签中删除所有属性 - 我已添加这些以进行测试。因此，没有这些属性和 html5 文档类型的演示很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:11:44.423

我曾经通过以下方式解决了这个问题：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xmlns:x2="http://www.w3.org/2002/06/xhtml2"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T14:14:54.630

确保您的页面声明为 HTML5

```
<!DOCTYPE html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-10T22:55:33.757

IE<9中的垂直aling问题应该用这个来解决：

```
.bg {
  text-align: center;
}

.a {
  text-align: left;
} 
```

但我不知道绝对位置出了什么问题

# javascript - 在att id append后用jquery打开链接

> ID：13326512
> 
> 赞同：1
> 
> 时间：2012-11-10T22:05:05.843
> 
> 标签：javascript, jquery

大家好，我有这样的情况

```
<div class="todos-pedidos" title="/pedidos">See More</div> 
```

单击此 div 时，使用此 jquery 展开我的 UL / LI

```
$('.todos-pedidos').click(function() {
$('#bloco-pedidos-andamento ul li:hidden:lt(2)').slideToggle();

if( ! $('#bloco-pedidos-andamento ul li').is(':hidden') )
    $('.todos-pedidos').html("<span class='todos-pedidos2'>See All</span>");
return false; 
```

当没有更多 LI 展开按钮时，更改 div 文本

所以我尝试在更改文本后查看更多内容以查看所有内容，如果访问者再次点击此转到 url

我试过这样，但我认为有一些错误或冲突，链接打不开

```
$("span.todos-pedidos2").click(function(event){
    event.preventDefault(); 
    var link = $('.todos-pedidos').attr("title");
    location.href=link;
}); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:07:37.177

当您使用 JavaScript 生成元素时，您应该从元素或文档对象的静态父对象之一委托事件。

```
$(".todos-pedidos").on('click', 'span.todos-pedidos2', function(event){
// or $(document).on('click', 'span.todos-pedidos2', function(event){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:09:08.470

jQuery 中的`click`方法适用于始终存在的 DOM 元素。动态添加的元素应使用该`on`方法添加事件处理程序：

```
$("span.todos-pedidos2").on('click', function(event) { }); 
```

# database - SQL Developer 帮助输入替换变量

> ID：13326513
> 
> 赞同：7
> 
> 时间：2012-11-10T22:05:08.223
> 
> 标签：database, oracle11g, oracle-sqldeveloper

我正在尝试使用脚本将大约 15,000 行数据输入到我的表中，但是当我运行脚本时，我得到一个弹出窗口，要求我输入替换变量。

如何阻止它弹出，以便它允许我输入日期？

以下是我需要输入的一些数据行的一些示例

```
INSERT INTO description 
 (description, item_weight, pickup_customer, delivery customer, category)
VALUES 
 ('Normal', 4771, 'Carfax & Co', 'Matriotism Plc', 'A');

INSERT INTO description 
 (description, item_weight, pickup_customer, delivery customer, category) 
VALUES 
 ('Normal', 2525, 'Matriotism Plc', 'Carfax & Co', 'A');

INSERT INTO description 
 (description, item_weight, pickup_customer, delivery customer, category) 
VALUES 
 ('Normal', 693, 'Matriotism Plc', 'Sylph Fabrication', 'A');

INSERT INTO description 
 (description, item_weight, pickup_customer, delivery customer, category) 
VALUES 
 ('Fragile', 2976, 'Nosophobia Fabrication', 'Carfax & Co', 'B');

INSERT INTO description 
 (description, item_weight, pickup_customer, delivery customer, category) 
VALUES 
 ('Fragile', 3385, 'Nosophobia Fabrication', 'Carfax & Co','B'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T22:34:44.600

和号字符 (&) 告诉 oracle 您要使用替换变量。

您可以通过在所有＆符号前面加上转义字符来转义这些插入：

```
SET ESCAPE '\'

INSERT INTO description 
 (description, item_weight, pickup_customer, delivery customer, category) 
VALUES 
 ('Fragile', 3385, 'Nosophobia Fabrication', 'Carfax \& Co','B'); 
```

或完全禁用扫描替换变量：

```
SET SCAN OFF

INSERT INTO description 
 (description, item_weight, pickup_customer, delivery customer, category) 
VALUES 
 ('Fragile', 3385, 'Nosophobia Fabrication', 'Carfax & Co','B'); 
```

有关更多信息，请随时查看： [http ://ss64.com/ora/syntax-escape.html](http://ss64.com/ora/syntax-escape.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T22:36:05.047

& 字符被解释为替换变量的开始。您可以通过执行完全关闭替换

```
set define off; 
```

在运行您的语句之前，或者只是在＆符号之后立即结束字符串，如

```
INSERT INTO description 
  (description, item_weight, pickup_customer, delivery customer, category) 
VALUES 
  ('Normal', 2525, 'Matriotism Plc', 'Carfax &'||' Co', 'A'); 
```

# command-line - 批处理文件不断重置到开始

> ID：13326514
> 
> 赞同：0
> 
> 时间：2012-11-10T22:05:09.897
> 
> 标签：command-line, batch-file, cmd

我打算使用下面的代码来关闭或重新启动计算机。每次我运行它时，它都会回到`set /p var=Type computer name here:`你能告诉我，我的脚本有什么问题以及如何修复它吗？

```
@ECHO off
set /p var=Type computer name here: 
cls
TITLE %var% power control!!!!
ECHO Copyright © Joshua Reynolds 2012
ECHO USE THIS PROGRAM AT YOUR OWN RISK
pause
:start
cls
ECHO Choose an option below:
ECHO 1\. Shutdown
ECHO 2\. Restart
ECHO 3\. Abort previous choice
ECHO 4\. Exit
set /p choice=Type the options number: 
if not '%choice%'=='' set choice=%choice:~0,1%
if '%choice%'=='1' goto shutdown
if '%choice%'=='2' goto restart
if '%choice%'=='3' goto abort
if '%choice%'=='4' exit
cls
ECHO "%choice%" is not a valid option please try again
ECHO.
pause
goto start
:shutdown
COLOR 4f
cls
ECHO To shutdown %var%
pause
shutdown /s /m \\%var%
ECHO %var% should now shutdown.
goto start
:restart
COLOR A0
cls
ECHO To restart %var%
pause
shutdown /r /m \\%var%
ECHO %var% should now restart.
goto end
:abort
COLOR 5f
cls
shutdown /a /m \\%var%
goto end
:end
pause
COLOR 0f
goto start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:39:20.223

也许您的批处理脚本的名称是**shutdown.bat**，它位于您的当前目录中。因此，当您的脚本尝试运行 SHUTDOWN 命令时，它会重新运行您的批处理脚本。

要么更改脚本的名称，要么`shutdown.exe`在要调用命令时在脚本中显式使用。

# arrays - OCaml 中用于跟踪游戏板的数据结构

> ID：13326516
> 
> 赞同：6
> 
> 时间：2012-11-10T22:05:28.347
> 
> 标签：arrays, ocaml

我对 OCaml 相当陌生，我想实现一个类似于四合一游戏。我需要一些数据结构来保持游戏状态。游戏板是一个 4x4 的正方形，共有 16 块瓷砖。我正在 OCaml 中为此寻找一种表示形式，它可以轻松快速地检索（或对其进行一些操作）整个列、行或对角线中的所有元素。我将在这个游戏上进行极小极大搜索，这就是为什么速度很重要。

到目前为止，我已经考虑了一个一维列表。列表的问题在于很难弄清楚哪些元素属于每一行/列/对角线，然后用`List.map`例如检索它们。

我考虑过使用`Array.make 4 (Array.make 4 Empty);;`. 当涉及到行时，这绝对是完美的。很容易得到它们并对其进行模式匹配。但是在单个列和对角线上进行模式匹配是一件苦差事。

我想做的是有一个函数，它接受一个游戏板并返回一个包含所有行/列/对角线的列表列表。然后我想做，例如，`match (rows,columns,diagonals) with (Empty, Empty, Empty, Empty) -> something`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:24:42.937

由于长度是固定的，因此更喜欢数组而不是列表：它们使用更少的内存并且读写速度更快。

恐怕您需要编写一个函数来获取对角线，没有简单的模式匹配。当您编写“在 [对角线] 上执行一些操作”时，我假设您正在考虑`f`使用长度为 4 的数组存储元素的函数，例如`[|Empty;Empty;Empty;Empty|]`. 也许`f`可以改为将 position`p`和 position 内的索引数组作为参数： `f p [|x1,y1; x2,y2; x3,y3; x4,y4|]`将提取 squares `p.(x1).(y1) ... p.(x4).(y4)`。然后只需传递不同`x`的 ' 和`y`' 来`f`对行/列/对角线进行操作。

一旦代码正常工作并且您正在转向优化，您可能想看看位向量：如果在您的 minmax 搜索的树中存储了很多位置，则减少内存占用意味着更多的缓存命中和更快的执行. 您可能想要自己在单个 int 中编码一个位置，但这是一些棘手的工作，您不想过早地这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:36:49.337

用相应的坐标索引你的瓷砖怎么样？因此，您的一维列表中的元素将采用以下形式：

```
(int * int * ref tile) 
```

然后你可以像这样过滤行/列/对角线：

**第 n 行：（** *前提条件：0 <= n, u, v <= 3）*

```
List.filter tiles (fun x -> match x with (u, v, _) -> u = n);; 
```

**第 n 列：（** *前提条件：0 <= n, u, v <= 3）*

```
List.filter tiles (fun x -> match x with (u, v, _) -> v = n);; 
```

**对角线 1：（** *前提条件：0 <= u, v <= 3）*

```
List.filter tiles (fun x -> match x with (u, v, _) -> u = v);; 
```

**对角线 2：（** *前提条件：0 <= u, v <= 3）*

```
List.filter tiles (fun x -> match x with (u, v, _) -> u + v = 3);; 
```

也应该可以只用一个整数（一维列表中的图块的索引）来索引图块，但这需要在过滤器函数中进行一些计算（给定索引，找出坐标，然后决定是否属于所需的行/列/对角线）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T00:34:26.043

有时匹配不起作用。在这里，我认为你应该尽可能多地使用函数，然后让你的单元格先行或先列不会那么复杂，你甚至可以通过颠倒索引顺序从一种表示转移到另一种表示。

如果我使用以下类型：

```
type color = Red | Yellow;;
type cell  = Empty | Color of color;;
type board = Array.make 4 (Array.make 4 Empty);; 
```

并首先决定列，然后以下函数将为我获取行或列：

```
let column (b: board) i j = b.(i).(j)
let row (b: board) i j = b.(j).(i) 
```

对于对角线，有两组，一组从左上到右下，另一组在另一个方向（从右上到左下）：

```
let ldiag (b: board) i j = b.((i + j) mod 4).(j)
let rdiag (b: board) i j = b.((i - j + 4) mod 4).(j) 
```

然后我想检查行、列或对角线只是检查该行的 4 个单元格。

```
let check predicate linef k = predicate (linef b k 0) && 
                               predicate (linef b k 1) && 
                               predicate (linef b k 2) && 
                               predicate (linef b k 3) 
```

然后例如，检查是否有红色的对角线：

```
let has_line linef b color = 
    let cmp x = x = color in
    let check k = check cmp linef b k in
    check 0 || check 1 || check 2 || check 3

let has_ldiag b color = has_line ldiag b color
let has_rdiag b color = has_line rdiag b color

let has_red_diagonal b = has_ldiag b Red | has_rdiag b Red 
```

等等。

# mysql - MySQL 不同且平均

> ID：13326519
> 
> 赞同：-1
> 
> 时间：2012-11-10T22:06:19.270
> 
> 标签：mysql

以下结构是如何设想这个查询。

```
user_info
    - id int(11)
    - email varchar(255)
    - regdate int(11)

statistics
    - id int(11)
    - playerid int(11)
    - timetopay int(11) 
```

我想做的就是从 user_info 获取所有唯一的电子邮件，然后在同一个查询中获取 statistics.timetopay-user_info.regdate 的平均值。

```
SELECT AVG(s.timetopay-ui.regdate) as time_amount FROM user_info ui    
LEFT JOIN statistics s ON ui.id=s.playerid 
WHERE s.timetopay>'0' GROUP BY ui.email ORDER BY ui.id DESC LIMIT 1 
```

希望从上面的代码片段中你会得到要点。我只是想计算出用户支付一些钱的平均时间，但前提是他们有。

上述查询目前对我来说不太适用。

我不得不通过 ui.email 使用 group，因为用户可以拥有多个帐户。有人知道我如何在一个查询中实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:44:31.293

这是你要找的吗？

```
select avg(daystakenavg) from (
  select avg(s.timetopay - u.regdate) as daystakenavg
  from user_info u
  join statistics s on (u.id = s.playerid)
  group by email
) t 
```

请注意，如果用户尚未购买，则不会显示在结果中。如果您希望将其更改为左连接并将`coalesce`默认值添加为您想要的任何值：

```
select avg(daystakenavg) totaldaystakenavg from (
  select coalesce(avg(s.timetopay - u.regdate), 0) as daystakenavg
  from user_info u
  left join statistics s on (u.id = s.playerid)
  group by email
) t 
```

此外，我不建议将整数用作日期......您应该使用 Date 数据类型。

# bash - 以 sudo 重新运行时找到的运行 bash 脚本的路径

> ID：13326526
> 
> 赞同：1
> 
> 时间：2012-11-10T22:07:27.520
> 
> 标签：bash

以下代码检查您是否具有 root 权限，然后使用它再次运行脚本：

```
 CMDLN_ARGS="$@" # Command line arguments for this script (if any)
    export CMDLN_ARGS
    func_check_for_sudo() {
        if [ ! $( id -u ) -eq 0 ]; then
                echo "You may be asked for your login password for [`whoami`]." ;sleep 1
                LAUNCH="`dirname \"${0}\"`"
                exec sudo -S su -c ${LAUNCH}/$(basename ${0}) ${CMDLN_ARGS}
        exit ${?}
    fi
    } 
```

出了问题的地方是当我将此脚本放在“$HOME/bin”文件夹或其他东西中时，我可以在没有路径的情况下启动它。它给了我错误“没有这样的文件或目录”。我需要脚本来获取该信息并将其正确传递给 exec。

我的问题是：如何在没有路径的情况下从脚本中正确获取 /path/to/script_name ？回顾一下，我调用 MY_SCRIPT insead /path/to/MY_SCRIPT 这会破坏我的脚本，因为它必须检查 root 权限，如果你没有它，它必须再次运行。

基本上，有问题的代码行是 ${0} 是脚本名称（如果你用一个来调用它，则带有路径）：

```
 exec sudo -S su -c ${0} ${CMDLN_ARGS} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:32:50.150

这里有几个问题：

*   找到脚本的路径。有几种简单的方法可以做到这一点：使用`"$BASH_SOURCE"`而不是`$0`; 或者只是利用（至少在默认情况下）sudo 保留 $PATH 的事实，因此`sudo "$0" ...`可以很好地解析脚本。
*   第二个是脚本没有正确保留它的参数。参数中的空格将被误认为是参数之间的中断，并且通配符将被错误地扩展。这是因为`CMDLN_ARGS="$@"`将所有参数用空格分隔在一起，然后`${CMDLN_ARGS}`在空格上重新分割（可能不一样）并且还扩展了通配符。

这是我纠正问题的看法。请注意，将处理程序放在函数中只会增加一层不必要的复杂性，所以我只是将它内联。我还使用 sudo 的 -p 选项稍微清理了提示。

```
if [ $( id -u ) -ne 0 ]; then
    exec sudo -p "Login password for %p: " "$0" "$@"
    exit $?
fi 
```

# android - 在 Android 中写入数据

> ID：13326527
> 
> 赞同：0
> 
> 时间：2012-11-10T22:07:29.983
> 
> 标签：android, file

如何将数据写入 Android 设备内的文本文件？截至目前，我正在将该数据发送到以 json 格式写入的服务器。但是，我希望我的程序直接在 Android 中写入我的数据。

每次传感器更改其值时，我都想记录传感器值。我有以下代码：我应该放什么而不是评论？

```
public void onSensorChanged(SensorEvent event)
{
    switch(event.sensor.getType())
    {
        case Sensor.TYPE_LINEAR_ACCELERATION:
 //writing event.values[0], event.values[1] and event.values[2] to result.txt
        break;
        ..........
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:11:40.490

```
String strContent = "Write File using Java FileOutputStream example !";
FileOutputStream fileOut = openFileOutput(outputFile, MODE_APPEND);
OutputStreamWriter osw = new OutputStreamWriter(fileOut);
osw.writeBytes(strContent.getBytes());
osw.flush(); 
```

其他代码：

```
 File logFile = new File("sdcard/log.file");
   if (!logFile.exists())
   {
      try
      {
         logFile.createNewFile();
      } 
      catch (IOException e)
      {
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
   }
   try
   {
      //BufferedWriter for performance, true to set append to file flag
      BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true)); 
      buf.append(text);
      buf.newLine();
      buf.close();
   }
   catch (IOException e)
   {
      // TODO Auto-generated catch block
      e.printStackTrace();
   } 
```

我不会在每次更改 sensot 时都写入文件，而是会构建一个仅包含相关数据的字符串，并在流程结束时将其写入文件。

# html - IE8 CSS背景颜色不起作用

> ID：13326538
> 
> 赞同：-1
> 
> 时间：2012-11-10T22:09:17.843
> 
> 标签：html, css, internet-explorer-8, web

我正在制作一个虚构的网站来增加我的投资组合。问题地址中的网站是[http://www.jn-design.co.uk/PJ](http://www.jn-design.co.uk/PJ)。

问题是在 IE 8 中，页眉和页脚背景颜色根本不显示。请在更新的浏览器中查看，您会发现问题！

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:15:09.523

IE8 不知道`<header>`and`<footer>`元素；它们是 HTML5。有一些方法可以解决这个问题，例如[http://modernizr.com/](http://modernizr.com/)、[https://github.com/aFarkas/html5shiv](https://github.com/aFarkas/html5shiv)或 JavaScript 块，例如：

```
<script>
document.createElement('header');
document.createElement('footer');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:13:56.913

背景显示正确尝试清除缓存

# php - 使用正则表达式提取字符串

> ID：13326539
> 
> 赞同：1
> 
> 时间：2012-11-10T22:09:26.907
> 
> 标签：php, regex, text-files, echo

在文本文件中，我有以下字符串：

```
 ID  |      LABEL       | A |   B  | C
--------------------------------------
9999 | Oxygen Isotopes  |   | 0.15 | 1 
8733 | Enriched Uranium |   | 1    | 1 
```

我想使用正则表达式提取字段`ID`和每一行。`LABEL`

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:14:49.160

我不确定你为什么坚持使用正则表达式。

由于该列似乎由 | 分隔 符号，似乎使用 PHP 函数[explode](http://php.net/manual/en/function.explode.php)会是一个更简单的解决方案。

您将能够遍历这些行，并使用典型的数组索引表示法来引用每一列，例如：`$line[0]`分别`$line[1]`用于 ID 和 LABEL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:15:15.097

您可以`preg_split`在每一行上使用：

```
$array = preg_split(`/\s*\|\s*/`, $inputLine, 2); 
```

然后就像在 djdy 的回答中一样，ID 将在`$array[0]`并且标签在`$array[1]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T22:20:43.073

不需要正则表达式：

```
<?php
$file = file('file.txt');

$ret = array();
foreach($file as $k=>$line){
    if($k<2){continue;}

    list($ret['ID'][],
         $ret['LABEL'][],
         $ret['A'][],
         $ret['B'][],
         $ret['C'][]) = explode('|',$line);
}

print_r($ret);

//Label: Oxygen Isotopes ID:9999 
echo 'Label: '.$ret['LABEL'][0].' ID:'.$ret['ID'][0];

/*
Array
(
    [C] => Array
        (
            [0] =>  1 

            [1] =>  1 
        )

    [B] => Array
        (
            [0] =>  0.15 
            [1] =>  1    
        )

    [A] => Array
        (
            [0] =>    
            [1] =>    
        )

    [LABEL] => Array
        (
            [0] =>  Oxygen Isotopes  
            [1] =>  Enriched Uranium 
        )

    [ID] => Array
        (
            [0] => 9999 
            [1] => 8733 
        )

)
*/
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T22:23:15.687

我怀疑正则表达式是这里最好的解决方案。

试试这个将文本文件分成一组行（这可能会或可能不会起作用，具体取决于您在其上创建 txt 文件的机器的操作系统）

```
$lines = explode($text, "\n");
$final_lines = array();

foreach ($lines as $line) {
    $parts = explode($line, " | ");
    $final_lines[] = $parts;
} 
```

现在您可以通过行号和列访问所有数据，例如

```
$final_lines[2][0] 
```

将包含 8733。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T22:16:00.597

正则表达式可能不是这里最好的方法。我会在每一行中读取一个字符串，并使用 String.explode("|", input) 创建一个字符串数组。0 索引是您的 ID，1 索引是您的标签，如果您愿意，A、B 和 C 依此类推。这是一个比使用正则表达式更强大的解决方案。

获取 ID 的正则表达式可能类似于

```
\d{4}  | 
```

您可以为标签字段做类似的事情，再次出现错误，这不像使用爆炸那么健壮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-10T22:20:22.430

尝试

```
$str = file_get_contents($filename);
preg_match_all('/^\s*(\d*)\s*\|\s*(.*?)\s*\|/m', $str, $matches);
// $matches[1] will have ids
// $matches[2] will have labels 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-10T22:23:55.103

虽然它不是在这里使用正则表达式的最佳方法，但可能是这样的

```
preg_match_all("/(\d{4}.?)\|(.*?)\|/s", $data, $matchs) 
```

will 的第二个和第三个索引`$matches`携带所需的数据

# jquery - 滚动文本jquery

> ID：13326540
> 
> 赞同：0
> 
> 时间：2012-11-10T22:09:37.187
> 
> 标签：jquery

我不是 jQuery，所以这可能是我的问题，但我想使用它：

[http://jsfiddle.net/hGcV2/1/](http://jsfiddle.net/hGcV2/1/)

但是唯一的问题是我什至无法让它在 jsfiddle 之外工作。我之前已经实现了 jQuery，所以我认为这没有什么不同，但似乎我对此的了解不足正在让我变得最好。

HTML

```
<head>

<link rel="stylesheet" href="awwyea.css" type="text/css" media="all" >

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js">
</script>
<script src="yay.js"></script>
</head>
<body>
<div id="cycler">      
<div>A</div>        
<div>B</div>        
<div>C</div>        
<div>D</div>        
<div>E</div>        
<div>F</div>        
<div>G</div>        
<div>H</div>        
<div>J</div>      
</div>
</body>
</html> 
```

CSS

```
#cycler{
  height:5em;
  overflow:hidden;
  border:1px solid gray;
}​ 
```

jQuery

```
function cycle($item, $cycler){
setTimeout(cycle, 2000, $item.next(), $cycler);

$item.slideUp(1000,function(){
    $item.appendTo($cycler).show();        
});

 }

cycle($('#cycler div:first'),  $('#cycler'));​ 
```

简单地说，为什么当我使用notepad++在浏览器（chrome IE FF）中运行这段代码时，所有文件都在同一个文件夹中，我只是有一个静态的无滚动：

A B C D

有些东西不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:21:21.790

不能真正为此归功于...我认为 j08691 做到了。

您需要将代码放入 jQuery 就绪调用中，因为当脚本尝试运行时元素尚未加载。您已将脚本 (yay.js) 加载到头部（在正文中的 HTML 元素之前）。所以脚本失败了。

在 yay.js 中，您只需像这样包装开始代码（任何需要 HTML 文档完成加载的内容）：

```
jQuery(document).ready(function(){
    cycle($('#cycler div:first'),  $('#cycler'));​
}); 
```

或简写语法

```
jQuery(function(){
    cycle($('#cycler div:first'),  $('#cycler'));​
}); 
```

默认情况下，JSFiddle 会将所有 JavaScript 代码放在窗口 onload 上运行。您可以通过简单地更改 Javascript 包装方法使 JSFiddle 在本地像您的 HTML 文档一样工作。

如果将其更改为“no wrap (head)”，则需要添加 jQuery 文档就绪函数或窗口加载以使示例也可以在 JSFiddle 中工作。

![在此处输入图像描述](../Images/b06f1eb9ea97455ce589010fab2eb2cc.png)

# c++ - 自定义类型与 boost::format 的 % 运算符一起使用有什么要求？

> ID：13326542
> 
> 赞同：8
> 
> 时间：2012-11-10T22:09:56.767
> 
> 标签：c++, templates, boost

我想知道必须在类中实现哪些函数和/或运算符才能与`boost::format` `%`运算符一起使用。

例如：

```
class A
{
    int n;
    // <-- What additional operator/s and/or function/s must be provided?
}

A a;
boost::format f("%1%");
f % a; 
```

我一直在研究[Pretty-print C++ STL containers](https://stackoverflow.com/questions/4850473/pretty-print-c-stl-containers)，这在某些方面与我的问题相关，但这让我进入了相关审查和学习涉及问题`auto`和各种其他语言特性的日子。我还没有完成所有这些调查。

有人可以回答这个具体问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T22:23:53.310

你只需要定义一个合适的输出操作符（`operator<<`）：

```
#include <boost/format.hpp>
#include <iostream>

struct A
{
    int n;

    A() : n() {}

    friend std::ostream &operator<<(std::ostream &oss, const A &a) {
        oss << "[A]: " << a.n;
        return oss;
    }
};

int main() {
    A a;
    boost::format f("%1%");
    std::cout << f % a << std::endl;
} 
```

# java - 我应该如何在我的神经网络中对训练集进行建模？

> ID：13326545
> 
> 赞同：2
> 
> 时间：2012-11-10T22:10:06.097
> 
> 标签：java, neural-network, classification, spam, training-data

我有一个愚蠢的困惑，但它困扰着我很多。我必须为垃圾邮件检测制作一个人工神经网络。到目前为止，我已经开发了用于开发邮件的 tfidf 向量和分别计算该矩阵的 PCA 的模块。问题是我的邮件直接从收件箱中读取。对于培训，我希望使用我的垃圾邮件箱，然后使用已用于开发未读邮件向量的相同类。如何将它们标记为垃圾邮件？

我应该开发这样的东西吗

```
 HashMap<HashMap<String,Double>,Integer> trainingSet; 
```

第一个参数是通过 PCA 降维的 mailVector，而 Integer 是标签 1-Spam 和 0 表示 nonSpam，然后将向量写入文件并从中读取？或者我应该让我的代码更灵活，而不是直接从收件箱中读取，它应该从已经存在的在线垃圾邮件和垃圾邮件中读取，然后将它们建模为邮件对象[我有一个 MailMessage 类，它定义了像主题这样的成员, body , mailvector 等用于邮件，然后用它来构建术语索引，最后是向量]，形成向量，然后形成一个训练集，训练后我可以让他们阅读我的收件箱吗？

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:14:44.540

我要对你说实话。坦率地说，英语中的单词并不多。如果您有一个非常大的输入向量（比如数万个），您可能会获得最有效的性能。事实上，你甚至可以在没有隐藏层的情况下购买。

对于图像识别等，具有数千个点的输入向量并不少见。

# objective-c - 如何理解这个崩溃日志

> ID：13326550
> 
> 赞同：11
> 
> 时间：2012-11-10T22:10:46.903
> 
> 标签：objective-c, macos, cocoa, crash-reports, symbolicatecrash

我（在 ITC 中）得到了我的第一个 Mac App Store 应用程序的崩溃报告。使用建立在 Stackoverflow 上的知识，我试图符号化这个日志，但是（使用 atos 和 otool）我只能读取最后 (20) 行（这意味着`start (in My App) + 52`。我真的不知道如何解释上面的行，以及如何找到崩溃的原因。

```
Process:         My App [270]
Identifier:      com.mycompany.myapp
Version:         1.0.0 (1.0.0)
App Item ID:     568750000
App External ID: 11410000
Code Type:       X86-64 (Native)
Parent Process:  launchd [143]
User ID:         501

Date/Time:       2012-11-07 19:21:11.365 -0200
OS Version:      Mac OS X 10.8.2 (12C60)
Report Version:  10

Per-App Interval Since Last Report:  1232 sec
Per-App Crashes Since Last Report:   1

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: EXC_I386_GPFLT

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff877a5256 objc_msgSend + 22
1   com.apple.AppKit                0x00007fff8dac6e27 -[NSOutlineView _delegate_isGroupRow:] + 66
2   com.apple.AppKit                0x00007fff8da46878 -[NSTableView _isGroupRow:] + 81
3   com.apple.AppKit                0x00007fff8da41fad -[NSTableView _isSourceListGroupRow:] + 56
4   com.apple.AppKit                0x00007fff8da418e8 -[NSTableView rectOfRow:] + 288
5   com.apple.AppKit                0x00007fff8da5b3cb _NSTVVisibleRowsForUpdate + 296
6   com.apple.AppKit                0x00007fff8da5aa85 -[NSTableRowData _unsafeUpdateVisibleRowEntries] + 96
7   com.apple.AppKit                0x00007fff8da5a8a1 -[NSTableRowData updateVisibleRowViews] + 119
8   com.apple.AppKit                0x00007fff8da6e463 -[NSTableRowData _idleUpdateVisibleRows] + 66
9   com.apple.CoreFoundation        0x00007fff87547da4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20
10  com.apple.CoreFoundation        0x00007fff875478bd __CFRunLoopDoTimer + 557
11  com.apple.CoreFoundation        0x00007fff8752d099 __CFRunLoopRun + 1513
12  com.apple.CoreFoundation        0x00007fff8752c6b2 CFRunLoopRunSpecific + 290
13  com.apple.HIToolbox             0x00007fff830a30a4 RunCurrentEventLoopInMode + 209
14  com.apple.HIToolbox             0x00007fff830a2e42 ReceiveNextEventCommon + 356
15  com.apple.HIToolbox             0x00007fff830a2cd3 BlockUntilNextEventMatchingListInMode + 62
16  com.apple.AppKit                0x00007fff8d8d8613 _DPSNextEvent + 685
17  com.apple.AppKit                0x00007fff8d8d7ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
18  com.apple.AppKit                0x00007fff8d8cf283 -[NSApplication run] + 517
19  com.apple.AppKit                0x00007fff8d873cb6 NSApplicationMain + 869
20  com.mycompany.myapp             0x000000010f29ce1c 0x10f29b000 + 7708 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-11T02:11:39.740

读取代码中没有的堆栈帧通常与读取茶叶一样，但在这种情况下，很清楚发生了什么。

我会读你的崩溃日志给你听，同时翻译。

堆栈是自下而上构建的（就像现实世界中的堆栈一样）。我会切入正题：

> ```
> 10  com.apple.CoreFoundation        0x00007fff875478bd __CFRunLoopDoTimer + 557
> 9   com.apple.CoreFoundation        0x00007fff87547da4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20 
> ```

计时器响了。

> ```
> 8   com.apple.AppKit                0x00007fff8da6e463 -[NSTableRowData _idleUpdateVisibleRows] + 66
> 7   com.apple.AppKit                0x00007fff8da5a8a1 -[NSTableRowData updateVisibleRowViews] + 119
> 6   com.apple.AppKit                0x00007fff8da5aa85 -[NSTableRowData _unsafeUpdateVisibleRowEntries] + 96
> 5   com.apple.AppKit                0x00007fff8da5b3cb _NSTVVisibleRowsForUpdate + 296 
> ```

在这个计时器（它可能在空闲时间被设置为触发）中，表视图尝试更新其关于哪些行可见的知识。

（最后一帧澄清它正在更新*哪些*行是可见的，而不是更新可见的行。你可以从函数名称的措辞中看出这一点。）

> ```
> 4   com.apple.AppKit                0x00007fff8da418e8 -[NSTableView rectOfRow:] + 288 
> ```

要确定一行是否可见，视图需要确定该行在其边界内的位置（可能与滚动视图中的可见矩形相交）。

为此，表视图试图找出这一行的特征：

> ```
> 3   com.apple.AppKit                0x00007fff8da41fad -[NSTableView _isSourceListGroupRow:] + 56 
> ```

它是源列表组行吗？

> ```
> 2   com.apple.AppKit                0x00007fff8da46878 -[NSTableView _isGroupRow:] + 81 
> ```

它是任何组行吗？

> ```
> 1   com.apple.AppKit                0x00007fff8dac6e27 -[NSOutlineView _delegate_isGroupRow:] + 66 
> ```

让我们问问代表。

> ```
> 0   libobjc.A.dylib                 0x00007fff877a5256 objc_msgSend + 22 
> ```

正在尝试发送消息。这是您的进程崩溃的地方。

因此，在大纲视图试图向其委托发送消息时发生了崩溃。

由此，我们可以得出三个事实：

1.  有问题的视图是大纲视图，而不是非大纲表视图。（Frame #1 证明了这一点。常规的表视图不是 NSOutlineView。）仅此一项就可以识别所涉及的视图，但如果没有，也没什么大不了的，因为我们还有另一个事实可以缩小范围。
2.  有问题的大纲视图有一个委托。仅此一项就可以确定所涉及的大纲视图，但如果没有，那也没什么大不了的，因为问题根本不在于视图。
3.  问题是作为视图委托的对象没有足够的拥有。它在大纲视图可以向它发送我们在堆栈跟踪中看到的消息之前过早死亡。

使用 Instruments 的 Zombies 模板来确定大纲视图试图与哪个对象对话，并查看该对象的历史以找到杀死它的不适当或不平衡的释放。您可能需要在某处添加该对象的强大所有权。

# objective-c - 导出的 PNG 模糊

> ID：13326554
> 
> 赞同：0
> 
> 时间：2012-11-10T22:11:16.403
> 
> 标签：objective-c, cocoa, xcode4.5

我正在尝试生成一个 qr 并将其导出为 PNG，但是每当我这样做时，它都会将其导出为模糊图像。我不确定我能做些什么使它不模糊。

它发生在2种情况下：

1.  在预览窗口中
2.  当我导出文件时

这是我正在使用的代码。任何帮助或建议将不胜感激，因为我对这门语言还是新手并试图弄清楚。

这是我的代码：

```
- (NSImage *)scaleImageTo:(NSImage *)inputImage size:(NSSize)newSize
{
    NSImage *cropped = [[NSImage alloc] initWithSize:NSMakeSize(newSize.width, newSize.height)];

     [cropped lockFocus];
     [inputImage drawInRect:NSMakeRect(0,0,cropped.size.width,cropped.size.height)
                fromRect:NSMakeRect(0,0,inputImage.size.width,inputImage.size.height)
               operation:NSCompositeCopy
                fraction:1.0];
     [cropped unlockFocus];

     NSRect rect = NSMakeRect(0, 0, cropped.size.width, cropped.size.height);

     CIImage* ciImage1 = [[CIImage alloc] initWithData:[cropped TIFFRepresentation]];

    [[NSGraphicsContext currentContext] setShouldAntialias: NO];

     NSImage *buffer2 = [[NSImage alloc] initWithSize:NSMakeSize([cropped size].width , [cropped size].height)];

    [buffer2 lockFocus];
    CIFilter* filter2 = [CIFilter filterWithName:@"CIMaskToAlpha"];
    [filter2 setValue:ciImage1 forKey:@"inputImage"];

    CIImage* output2 = [filter2 valueForKey:@"outputImage"];

    [output2 drawAtPoint:NSZeroPoint fromRect:rect operation:NSCompositeSourceOver fraction:1.0];

    //background
    [[_backgroundColorSelector color] set];
    NSRectFillUsingOperation(rect, NSCompositeSourceAtop);
    //foreground
    [[_foregroundColorSelector color] set];
    NSRectFillUsingOperation(rect, NSCompositeDestinationAtop);

    [buffer2 unlockFocus];
    return buffer2;
}
- (void)writeImageAt:(NSImage *)img path:(NSString *)strPath
{
    //create a NSBitmapImageRep
     NSBitmapImageRep *bmpImageRep = [[NSBitmapImageRep alloc]initWithData:[img TIFFRepresentation]];
     //add the NSBitmapImage to the representation list of the target
     [img addRepresentation:bmpImageRep];

     //get the data from the representation
     NSData *data = [bmpImageRep representationUsingType: NSPNGFileType
                                             properties: nil];
    [data writeToFile:strPath atomically:YES];
}
- (void)savePNGAt:(NSImage *)img path:(NSString *)strPath
{
    NSString * qrWidth = [_qrWidth stringValue];
    NSString * qrHeight = [_qrHeight stringValue];

    if (qrHeight != nil && ![qrWidth isEqualToString:@""] && qrWidth != nil && ![qrHeight isEqualToString:@""]) {
        NSSize newSize = NSMakeSize([qrWidth floatValue], [qrHeight floatValue]);
        img = [self scaleImageTo:img size:newSize];
        [self writeImageAt:img path:strPath];
    }
    else
    {
        img = [self changeImageColor:img];
        [self writeImageAt:img path:strPath];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:06:37.190

几乎可以肯定，在缩放图像时会引入模糊，`img = [self scaleImageTo:img size:newSize];`而不是这样做，您应该以正确的尺寸再现 QR 图像以显示/打印/导出/等。

# c# - 如何在 Silverlight C# 上实现声学回声消除，我正在使用 speex

> ID：13326555
> 
> 赞同：2
> 
> 时间：2012-11-10T22:11:24.123
> 
> 标签：c#, silverlight, speex, aec

我一直在研究 Silverlight 语音聊天应用程序，使用 speex（基本上是 C# 移植的 Jspeex）进行编码和解码。我想实现以下内容：

1.  在 C# 中使用 Speex 进行声学回声消除：我一直在环顾四周，还没有找到可行的解决方案，或者真的不确定如何做到这一点。
2.  声音的质量非常嘈杂，每 30 秒就会中断一次。

以下是我迄今为止实现的代码：

**/*******************************编码******************* ***************/**

```
 JSpeexEnc encoder = new JSpeexEnc();
    public byte[] SpeexEncoding(byte[] InputBuffer)
    {
        MemoryStream msIn = new MemoryStream(InputBuffer);
        MemoryStream msOut = new MemoryStream();
        encoder.EncodeToSpeex(new RandomInputStream(msIn), new      RandomOutputStream(msOut));
        return msOut.GetBuffer();
    }

    void SendVoiceBuffer(object VoiceBuffer, EventArgs e)
    {

        byte[] PCM_Buffer = (byte[])VoiceBuffer;

        if (PCM_Buffer.Length >= 8000)
        {
            byte[] buffer = SpeexEncoding(PCM_Buffer);
            Send_Bytes(buffer);

            //this.Dispatcher.BeginInvoke(new ShowMessagedelegate(ShowBufferSize), buffer.Length.ToString());
        }
    } 
```

**/****************************解码******************** *******************/**

```
 private void PlayReceivedBuffer(byte[] Encodedbuffer)
    {
       // if (MuteCheckBox.IsChecked == false)
            try
            {
                JSpeexDec decoder = new JSpeexDec();
                decoder.setDestFormat(JSpeexDec.FILE_FORMAT_RAW);
                decoder.setStereo(true);
                MemoryStream InStream = new MemoryStream(Encodedbuffer);
                MemoryStream OutStream = new MemoryStream();
                decoder.decode(new RandomInputStream(InStream), new RandomOutputStream(OutStream));
                PlayWave(OutStream.GetBuffer());
            }
            catch (Exception) { }

            StartReceiving();
    }

    void PlayWave(byte[] PCMBytes)
    {
        MemoryStream ms_PCM = new MemoryStream(PCMBytes,44,PCMBytes.Length-44);
        MemoryStream ms_Wave = new MemoryStream();

        _pcm.SavePcmToWav(ms_PCM, ms_Wave, 16, 8000, 1);

        WaveMediaStreamSource WaveStream = new WaveMediaStreamSource(ms_Wave);
        mediaElement1.SetSource(WaveStream);
        mediaElement1.Play();
   } 
```

我一直在调整 speex 编码和解码类以获得最佳语音质量，但没有运气。并且一直在 speex 类中搜索我可以访问和实现的任何 AEC，这里也没有运气，但是 speex 文档提到了 C++ 中的 AEC，但不清楚如何在 C# 中实现。

我是 C# 开发的新手，请指导，如果可能的话，请指出一个可以帮助我实现这个 AEC 并提高语音质量的方向。我很感激任何指导。

谢谢！

# ruby-on-rails-3 - 在rails 3中连接表

> ID：13326559
> 
> 赞同：0
> 
> 时间：2012-11-10T22:11:47.840
> 
> 标签：ruby-on-rails-3

嘿，我对 Rails 很陌生，非常感谢您的帮助！

每个用户都有一个显示他所有事件的个人资料页面。每个事件都有许多资产（图像）。每个活动也有自己的活动页面。我正在努力解决的是如何在用户个人资料页面上显示事件（如果存在）并进行加入。

在我的配置文件控制器中，我有：@events = User.joins(:events) 来获取事件，但是我需要深入到资产表中以获取相关图像（现在我只想获取任何图像）事件，稍后我将添加一个“主图片”标志）。

这是我的模型。

```
class Asset < ActiveRecord::Base
belongs_to :event
has_attached_file :image,
:styles => {
  :thumb=> "100x100#",
  :small  => "300x300>",
  :large => "600x600>"
    },
  :storage => :s3,
  :s3_credentials => "#{RAILS_ROOT}/config/s3.yml",
  :path => ":attachment/:id/:style.:extension",
  :bucket => 'wpt-assets'
end

class Event < ActiveRecord::Base
attr_accessible :name, :budget, :client, :date, :description, :venue, :attendees,  
:assets_attributes
belongs_to :user
has_many :assets#, :dependent => destroy
accepts_nested_attributes_for :assets
end

class User < ActiveRecord::Base
rolify
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

# Setup accessible (or protected) attributes for your model
attr_accessible :role_ids, :as => :admin
attr_accessible :username, :email, :password, :password_confirmation,  
:remember_me,:avatar, :bio, :title, :company,:facebook,:twitter,:pinterest,:linkedin
validates_presence_of :username
validates_uniqueness_of :username, :email, :case_sensitive => false
has_many :events
has_attached_file :avatar, 
:styles => { 
  :medium => "100x100>", 
  :thumb => "24x24>" }

  def to_param
    username
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:27:35.200

第一个查询，为了得到`Event`a 的 s `User`，可以写成

```
@events = user.events 
```

同样，您可以`Assets`通过`Event`with获得全部`event.assets`。

[Rails Guide on associations](http://guides.rubyonrails.org/association_basics.html)更详细地记录了这一点，但您通常不必使用该`join`方法，除非您正在做更高级的事情。

# objective-c - 从 TableViewController 转到另一个 TableViewController

> ID：13326560
> 
> 赞同：0
> 
> 时间：2012-11-10T22:12:28.990
> 
> 标签：objective-c, ios, uistoryboardsegue

使用情节提要，我有一个带有行列表的表格视图控制器。选择一行时，我想将与该行关联的数据传递到另一个表视图控制器，该表嵌入了Uinavigation Controller中。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"EditJob"])
    {
        NewJobsTableViewController *newJobsTableViewController = segue.destinationViewController;
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

        Jobs *job = [self.fetchedResultsController objectAtIndexPath:indexPath];
        newJobsTableViewController.jobDetails = job;

    }
} 
```

在 prepareForSegue 方法的最后一行我收到以下错误：
[UINavigationController setJobDetails:]: unrecognized selector sent to instance 0x83a7780 2012-11-11 08:50:25.335 My Trades[40612:c07] ***由于未捕获而终止应用程序异常“NSInvalidArgumentException”，原因：“-[UINavigationController setJobDetails:]：无法识别的选择器发送到实例 0x83a7780”

jobDetails 在 newJobsTableViewController 中声明为：

```
@interface NewJobsTableViewController : UITableViewController <UITextFieldDelegate,      NSFetchedResultsControllerDelegate> {
    Jobs *_jobDetails;
}

@property (strong, nonatomic) Jobs *jobDetails; 
```

我不确定为什么会导致此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:42:16.617

在我看来，您的情节提要设置错误。第二个 tableViewController 不应该嵌入到它自己的导航控制器中。只需设置从您的第一个 tableViewController 到第二个的 push segue - 第二个将自动嵌入与第一个相同的导航控制器中。

我认为，错误的原因是目标视图控制器实际上是您嵌入第二个视图控制器的导航控制器。这条线并没有按照您的预期做：

```
 NewJobsTableViewController *newJobsTableViewController = segue.destinationViewController; 
```

即使您将destinationViewController 的返回值设置为您的类，它也会返回它实际上是什么——我敢打赌，如果您记录newJobsTableViewController 的类，它实际上会以UINavigationController 的形式返回。

# c++ - 如何使用 C++ 获取计算机的专有名称 (DN)

> ID：13326562
> 
> 赞同：2
> 
> 时间：2012-11-10T22:12:58.800
> 
> 标签：c++, winapi, active-directory, domaincontroller, distinguishedname

我似乎找不到使用 C++ 和 WinAPI 获取工作站（计算机）的 DN 的方法。任何想法如何做到这一点？

PS。工作站连接到域控制器。

PS2。我需要计算机的 DN，而不是登录用户。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T22:43:02.343

如果您想要运行代码的计算机的名称，并且它正在参与域，那么您可以使用[GetComputerObjectName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724304%28v=vs.85%29.aspx)：

```
#include <security.h>
#include <secext.h>

TCHAR szDN[1024];
ULONG ulSize = sizeof(szDN)/sizeof(szDN[0]);
BOOL res = GetComputerObjectName(NameFullyQualifiedDN, szDN, &ulSize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:29:15.547

您可能希望在 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms724301%28v=vs.85%29.aspx上记录 GetComputerNameEx 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724301%28v=vs.85%29.aspx)

# android - 微调器上的 setPrompt 不起作用

> ID：13326565
> 
> 赞同：3
> 
> 时间：2012-11-10T22:13:19.393
> 
> 标签：android, spinner

我对android开发很陌生，我似乎有一个我无法理解的问题。我有一个微调器，值设置得很好，但我的提示没有出现。我试图在 xml 和 java 代码中设置它，但两者都不起作用。下面是我的配置。我觉得我缺少一些基本的东西，但我还不知道它是什么。

任何帮助，将不胜感激。克雷格

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000" >

    <Spinner
        android:id="@+id/band"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_marginTop="72dp"
        android:prompt="@string/year_prompt"
        android:textColor="#F0F0F0" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="28dp"
        android:entries="@array/year_array"
        android:prompt="@string/year_prompt"
        android:textColor="#F0F0F0" />

</RelativeLayout>

<string name="year_prompt">Select A Year</string>
<string-array name="year_array">
    <item >2000</item>
    <item >2001</item>
    <item >2002</item>
    <item >2003</item>
    <item >2004</item>
    <item >2005</item>
</string-array> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T09:37:18.747

The reason that your promoted is not showing is because in android 3.0+, there is no space for the prompt.

This is a screen shot of a spinner pre 3.0

The prompt is at the top, where is says "Chose a Country", screen shot from [http://www.mkyong.com/android/android-spinner-drop-down-list-example/](http://www.mkyong.com/android/android-spinner-drop-down-list-example/)

![enter image description here](../Images/6aece0d88b9d09bd69afc9be83464249.png)

So the prompt is no longer shown.

There are a few possibilities.

First, you could just add an item at the top of your `list-array`, that says the same thing as your prompt

Otherwise you could use a button and create a drop down list from that.

First, in your layout replace your spinner with a button, and give it the text that you gave your prompt

Then move your list of items on yoour spinner to a file called `optionmenu.xml`

Then declare your button and set up an `onClickListener` for it.

Inside that method, put the following code

On the foutrh line, the layout that you specify is your optionmenu layout

```
public void showPopup(View v) {
PopupMenu popup = new PopupMenu(this, v);
MenuInflater inflater = popup.getMenuInflater();
inflater.inflate(R.layout.optionmenu, popup.getMenu());
popup.show(); 
```

} When you call this method, you need to do the following

```
 View p = (View)findViewById(R.id.spinner button);
showPopup(p); 
```

In this price of code, View p is the view at the location that you want to show the top corner of the menu. So in this case, it will be your button

See the answer here to implement it - [android menu code not working](https://stackoverflow.com/questions/11077982/android-menu-code-not-working)

And in each `case:.....` statement, put a line that sets your button text as a string.

```
case R.id.item1: 
```

`button.setText("item1");`>

There are some other good solutions here -

[How to make an Android Spinner with initial text "Select One"](https://stackoverflow.com/questions/867518/how-to-make-an-android-spinner-with-initial-text-select-one)

# xml - Java EE 我在 web.xml 中使用welcome-file-list 编写代码，但不生效

> ID：13326566
> 
> 赞同：0
> 
> 时间：2012-11-10T22:13:23.603
> 
> 标签：xml, jakarta-ee, configuration

我想通过欢迎文件将一些示例 Java EE 分发到服务器：我找到 404 [http://kitchensink-justexample.rhcloud.com/](http://kitchensink-justexample.rhcloud.com/) 但我可以访问[http://kitchensink-justexample.rhcloud.com/index.jsf](http://kitchensink-justexample.rhcloud.com/index.jsf) 我在我的 web.xml 中写入欢迎文件列表，但它似乎不起作用。

我的 web.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
  <param-name>javax.faces.PROJECT_STAGE</param-name>
  <param-value>Development</param-value>
</context-param>

<!-- Activate the JSF 2.0 servlet -->
<servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>

 <!-- Tell the context which URLs to process with JSF -->
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>

 <welcome-file-list>

  <welcome-file>index.jsf</welcome-file>
 </welcome-file-list>
</web-app> 
```

如何使 welcom-file-list 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:17:52.913

我以前没有使用过 jsf。但是，我认为这种行为的原因是您已将 url 模式指定为 *.jsf 并且您尝试的第一个 url 不满足此模式。

# javascript - Dust.js 逻辑助手的问题

> ID：13326570
> 
> 赞同：4
> 
> 时间：2012-11-10T22:14:01.580
> 
> 标签：javascript, jquery, asp.net-mvc, json, dust.js

我正在使用*jQuery 1.8.2*和*Dust.js v1.1.1*在 JavaScript 应用程序中进行 MVC 样式模板。当我使用`{@gt}`逻辑助手时，我收到以下控制台错误：

```
Uncaught TypeError: Cannot read property 'gt' of undefined 
```

我相信我的模板中使用了正确的语法：

```
<ul class="listview">
{#seasons}
    <li>
        <h3>{name}</h3>
        <p class="desc">{id}</p>
        {@gt key="months" value="0"}
        <span class="count">{months}</span>
        {/gt}
    </li>
{/seasons}
</ul><!--// end .listview --> 
```

这是 JSON 结构：

```
{
    "seasons":[
        {
            "name":"Spring",
            "id":"weklv7",
            "months": 8
        },
        {
            "name":"Summer",
            "id":"lvuec5",
            "months": 4
        }
    ]
} 
```

如果我`{@gt}`从模板中删除逻辑助手，错误就会消失，并且模板会正确加载为 HTML。例如：

```
<ul class="listview">
{#seasons}
    <li>
        <h3>{name}</h3>
        <p class="desc">{id}</p>
        <span class="count">{months}</span>
    </li>
{/seasons}
</ul><!--// end .listview --> 
```

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T08:32:19.843

请密切注意提供的链接 smfoote。

为了在节点中“加载”灰尘助手，您需要的特定语法是：

```
var dust = require('dustjs-linkedin');
dust.helper = require('dustjs-helpers'); 
```

请注意，这不是链接上写的内容，链接文件表明这应该是带有“s”的dust.helper(S)。

您根本不会在主文档站点上的任何地方找到该短语。

显然，这应该是连接事物的方式，这应该是完全直观的。

有时我觉得那些没有记录他们对项目所做的重大改变的影响的人正在偷走我的生活。这个特殊的文档差距偷走了大约 5 个小时。

为了帮助那些同时运行 npm installdustjs-linkedin 和 npm installdustjs-helpers 并且想知道为什么它不能自动工作的灵魂（因为它本质上是网站上所有文档的建议）。我将重建您在此处遇到此错误时通常会遇到的错误：

```
 if( dust.helpers[name]){
                  ^ 
```

然后一个..

```
TypeError: Cannot read property 'if' of undefined
TypeError: Cannot read property 'math' of undefined
TypeError: Cannot read property 'eq' of undefined
TypeError: Cannot read property 'not eq' of undefined
TypeError: Cannot read property 'ne' of undefined
TypeError: Cannot read property 'lt' of undefined
TypeError: Cannot read property 'gt' of undefined
TypeError: Cannot read property 'select' of undefined
TypeError: Cannot read property 'size' of undefined
TypeError: Cannot read property 'tap' of undefined
TypeError: Cannot read property 'contextDump' of undefined
TypeError: Cannot read property 'idx' of undefined
TypeError: Cannot read property 'sep' of undefined 
```

有趣的是，如果将dustjs-helpers 分配给“helpers”而不是“helper”，则会出现不同的错误：

```
undefined:1
").write("</form>").write("\n\n").helper("contextDump",ctx,{},null).write("\n\
                                                                    ^
TypeError: Cannot call method 'write' of undefined 
```

编写一些代码来检测某人何时尝试使用以“@”开头的东西并说..嘿，您可能没有加载到您的帮助程序库中......并使其在节点中工作而不是-节点上下文......或者他们可以修复文档。

我真诚地希望，我花费额外的 15 分钟来整理 Google 可能会 Grok 的答案，这将节省其他人我刚刚失去的 5 个小时。

-英尺

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T22:21:02.447

听起来你的问题是dust.helpers 不存在，可能是因为它[已从 Dust core 中删除](https://github.com/linkedin/dustjs/pull/94)。确保在渲染模板的任何地方都加载了 Dust core 和[Dust 助手。](https://github.com/linkedin/dustjs-helpers)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T12:21:34.907

尽管 ftrotter 在这里提供了很好的信息，但我还是想补充一下，因为我仍然迷失在“s”中。这是我编写自定义帮助程序所必须做的：

```
dust.helper = require('dustjs-helpers');
dust.helpers.myHelper = function (chunk, ctx, bodies, params) { 
```

请注意，当我需要时，我没有“s”，但在编写助手时必须添加“s”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T21:53:19.977

为了让它只在客户端工作（例如在客户端浏览器中运行以进行开发），在这个工作演示页面上查看源代码有很大帮助： [http ://linkedin.github.com/dustjs/test/test.html?q =帮手](http://linkedin.github.com/dustjs/test/test.html?q=helpers)

该站点对于仅调试语法也非常有用。

例如，select 的示例不适用于客户端 javascript 编译。

```
{@select key=\"{foo}\"}
     {@eq value=\"bar\"}foobar{/eq}
     {@eq value=\"baz\"}foobaz{/eq}
     {@default} - default Text{/default}
 {/select} 
```

但这确实：

```
 {@select key="{foo}"}
     {@eq value="bar"}foobar{/eq}
     {@eq value="baz"}foobaz{/eq}
     {@default} - default Text{/default}
 {/select} 
```

很明显，为什么更改会起作用，但是在您学习的过程中，该页面非常有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T20:32:43.010

万一你不能添加助手，这将是一个非常奇怪的决定，你仍然可以创建自己的函数，可以用来代替 @gt 或 @math

```
var baseContext = dust.makeBase({
    position: function(chunk, context) {
        return context.stack.index + 1;
    },
  }); 
```

现在您可以使用 {position} 而不是 ${idx} 来计算循环从 1 到 n。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-06T03:30:49.467

编辑：

自从我几天前写这篇文章以来，我学到了更多关于灰尘的知识。这里有一些澄清！

dustjs-helpers 库仅提供文档中列出的“预制”助手。*不需要*创建自己*的*助手。`require('dustjs-linkedin')`是否可以互换，`require('dustjs-helpers')`具体取决于您是否需要默认助手。（在你的情况下，你这样做。）

另外，我在寻求帮助使这一切都在 Express 中工作时发现了这一点，但我意识到您的问题与此无关。希望这项工作对可能像我一样偶然发现这个问题的人有用，但是，我将把它留在这里。

* * *

注意：dustjs-helpers 需要在dustjs-linkedin 中并返回它的一个实例，所以您真正需要做的就是`var dust = require('dustjs-helpers');`获得一个正确的具有帮助器支持的灰尘实例（与dustjs-helpers 使用的完全相同）。您确实需要安装dustjs-linkedin 以便要求成功，但仅此而已。

也就是说，我厌倦了与 consolidate、adaro、dustjs-linkedin、dustjs-helpers 等争论不休，它们都没有以直接的方式暴露出用于 Express 的功能，并编写了一个小包装器。

这是我的示例代码，添加了几个助手。

[https://gist.github.com/myndzi/8837944](https://gist.github.com/myndzi/8837944)

我在我的应用程序设置中调用它，如下所示：

```
var dust = require('./lib/dust-express');
app.engine('dust', dust(app, {
    publicdir: path.join(app.get('basedir'), 'public'),
    mtimes: app.util.mtimes,
    helpers: true
})); 
```

希望这对某人有用。

# android - Android 模拟器没有运行 2G RAM

> ID：13326575
> 
> 赞同：1
> 
> 时间：2012-11-10T22:14:48.613
> 
> 标签：android, emulation, avd

我正在尝试在具有 16GB RAM（Windows 8 x64）的 PC 上使用以下设置启动 Android 模拟器：

```
Abstacted LCD Density: 240
Max VM application heap: 24
Device ram size: 2048 
```

当我尝试启动模拟器时，出现错误：

```
Starting emulator for AVD 'Android_4.0_1024'
emulator: WARNING: Requested RAM size of 2048MB is too large for your environment, and is reduced to 1152MB.
Failed to allocate memory: 8
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

我做错了什么，如何运行超过 1 GB RAM 的模拟器？

在此先感谢，伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:19:42.277

Win64 是一个好的开始。

您是否碰巧安装了 64 位 JDK？

PS：

Windows 7/64 适用于 64 位 JDK。我对 Windows 8 和任何 Java 的经验为零，所以我无法帮助你...

# apache - 删除 codeigniter 的 index.php

> ID：13326577
> 
> 赞同：3
> 
> 时间：2012-11-10T22:14:50.160
> 
> 标签：apache, codeigniter, centos

是的，还有一个。我已经尝试了所有可以在搜索中找到的东西，但都没有运气。

在我的 httpd.conf（运行 centos 和 apache2）中：

```
<VirtualHost *:80>
ServerName www.domain.com
ServerAlias domain.com *.domain.com
DocumentRoot /var/www/html/domain.com
</VirtualHost> 
```

在我的 /var/www/html/domain.com 中的 htaccess 中：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

似乎没有任何工作。

我试过添加

```
RewriteBase / 
```

我尝试将最后一行切换为：

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T22:27:16.463

您需要确保在您的虚拟主机中拥有：

```
 <Directory "/path...to directory">
        Order allow,deny
        Allow from all
        Allowoverride all
    </Directory>

    <IfModule mod_rewrite.c>
        RewriteEngine on
    </IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:27:35.187

原始帖子（以及 CI 用户指南）中的规则可用于允许 URL 在没有`/index.php/`它们的情况下工作，但不会`/index.php/`从现有 URL 中删除。

您可以在 CI 配置中设置`$config['index_page'] = '';`（删除）以从 CI 生成的 URL 中删除。`index.php``index.php`

如果原始规则不起作用，请尝试这些重写规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [QSA,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:38:07.017

两点建议：

1.) 确保将 .htaccess 文件保存/编辑到项目文件夹的根目录中，而不是 /applications 文件夹中的 .htaccess 文件。这样，如果我的应用程序文件夹位于项目/应用程序，请不要编辑项目/应用程序/.htaccess 文件。您需要您的文件位于 project/.htaccess

2.) 在您的 .htaccess 文件中使用以下内容：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

# typescript - 默认接口对象

> ID：13326581
> 
> 赞同：6
> 
> 时间：2012-11-10T22:15:15.673
> 
> 标签：typescript

有没有办法创建一个默认的接口对象？

例子：

```
interface myInterface {
    A: string;
    B: string;
    C: number;
    D: CustomType; // A custom class
} 
```

通常您会通过以下方式创建此接口的对象：

```
var myObj: myInterface = {
    A: "",
    B: "",
    C: 0,
    D: null
} 
```

但是，如果有一些语法糖可以这样做，那就太好了：

```
var myObj = new myInterface;
// OR
var myObj = default(myInterface); 
```

根据我的研究，我还没有找到一种方法来做到这一点；但我希望我只是错过了一些东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-07-20T19:15:13.187

您可以使用稍微不同的语法并获得所有类型检查和 IntelliSense。

```
interface IUserModel{
  Name: string;
  Age: number;
  Email: string;
  IsActive: boolean;
}

var user = <IUserModel>{}; 
```

您创建了一个空的用户对象，但 TypeScript 编译器仍在检查您是否在该对象上具有有效的属性，并且它仍然提供代码完成功能。

![在此处输入图像描述](../Images/ec4f68767c043eb226db7499583da090.png)

![在此处输入图像描述](../Images/e9dff6d3a511aa5c065043ef733f718b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T22:54:02.263

不，那里没有。

接口声明仅在编译时存在，因此唯一要做类似事情的时间是在编译时。不幸的是，编译器没有提供任何语言结构来做到这一点，也没有任何方法来扩展编译过程。

* * *

解决这个问题的一种方法是进行一些代码生成；添加一个创建具有正确结构的对象的函数。这种方法的问题在于，您要么必须解析 TypeScript 代码，要么必须解析一些特定领域的语言。

阅读这样的内容：

```
<Definitions>
    <Interface Name="myInterface">
        <Member name="A" type="string"/>
        <Member name="B" type="string"/>
        <Member name="C" type="number"/>
        <Member name="D" type="CustomType"/>
    </Interface>
</Definitions> 
```

并生成类似：

```
interface myInterface {
    A: string;
    B: string;
    C: number;
    D: CustomType;
}

function InitMyInterface(obj?: any): myInterface {
    if (obj === undefined) obj = {};
    return {
        A: obj.A === undefined ? "" : obj.A,
        B: obj.B === undefined ? "" : obj.B,
        C: obj.C === undefined ? 0 : obj.C,
        D: obj.D === undefined ? null : obj.D, // or InitCustomType(obj.D)
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T15:49:00.100

要完成@Matija，您也可以在一行中完成，并且您的 ide（例如 Visual Studio 代码）会自动为您完成它：

```
var user = <IUserModel>{
    Name : "foo";
}; 
```

如果您想将 Interface 设置为参数，这将有所帮助，因此这也是有效的（The`JQueryAjaxSettings`是一个接口，其中的一部分`jquery.d.ts`可以通过 获取`tsd install jquery`）：

```
jQuery.ajax("foo/bar",
    <JQueryAjaxSettings>{
        dataType:"json",
        cache : true,

    }); 
```

# android - Android goBack 覆盖崩溃

> ID：13326582
> 
> 赞同：0
> 
> 时间：2012-11-10T22:15:16.260
> 
> 标签：android, cordova

我有一个加载外部页面的 phonegap webview。我试图覆盖后退按钮，以便用户可以返回网站，当他们点击第一页时，它存在应用程序。我看到这个关于禁用缓存的链接，[奇怪的 webview goBack 问题在 android](https://stackoverflow.com/questions/8386726/strange-webview-goback-issue-in-android)但它也做了同样的事情。

```
package com.myapp.net;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import org.apache.cordova.DroidGap;
import android.webkit.WebView;
import android.webkit.WebSettings;

public class Shop extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_shop);
        super.setBooleanProperty("loadInWebView", true);
        super.loadUrl("http://mywebappurl.com/");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_shop, menu);
        return true;
    }

    @Override
    public void onBackPressed()
    {
        WebView webView1 = (WebView) findViewById(R.id.webView1);
        webView1.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
        if(webView1.canGoBack())
            webView1.goBack();
        else
            super.onBackPressed();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:16:37.273

我猜那`webView1`是`null`因为没有带有 id 的 View `webView1`。

也许您想取消注释这一行：

```
 //setContentView(R.layout.activity_shop); 
```

但我从未使用过PhoneGap，所以我可能是错的。

# c# - 如何在 ListView 中获取被点击的项目

> ID：13326583
> 
> 赞同：7
> 
> 时间：2012-11-10T22:15:23.233
> 
> 标签：c#, xaml, windows-8

这应该是一个微不足道的任务，但我找不到如何去做。我想听听点击列表视图中的项目，获取相应的模型对象，然后启动一个新屏幕。

这是 ListView 的 XAML：

```
<ListView x:Name="ItemListView" 
    ItemTemplate="{StaticResource StoreFrontTileTemplate}"
    ItemContainerStyle="{StaticResource StoreFrontLVTileStyle}"
    Margin="0" VerticalAlignment="Top" ItemClick="MyClick" Tapped="MyTap"/> 
```

和 MyClick、MyTap：

```
private void MyClick(object sender, ItemClickEventArgs e)
{
    Debug.WriteLine("Click!");
}

private void MyTap(object sender, TappedRoutedEventArgs e)
{
    Debug.WriteLine("TAp!!" + sender.ToString() + "--" + e.ToString());
} 
```

导航到新屏幕的方法：

```
this.Frame.Navigate(typeof(SecondScreen)); 
```

它可以工作，但我需要单击项目的模型对象并将其作为参数传递给第二个屏幕。

但是 MyClick 从未被调用，并且 MyTap 没有给我任何关于被点击项目的信息。“发件人”是 ListView。

我下载了这些例子：

[http://code.msdn.microsoft.com/windowsapps/XAML-ListView-sample-pack-0ec6b60f](http://code.msdn.microsoft.com/windowsapps/XAML-ListView-sample-pack-0ec6b60f)

但它不包含我需要的东西，有一个主/详细视图，但它适用于绑定，我想要做的是启动一个全新的屏幕。

注意：我是 Windows 开发中的菜鸟，并且倾向于在 Android 或 IOS 中执行此操作的常用方法，您可以在其中使用单击元素的位置实现回调。不知道在 Windows 8 中执行此操作的正确方法。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-10T22:35:46.570

您可以使用该`SelectionChanged`事件：

```
<ListView x:Name="ItemListView" SelectionChanged="MySelectionChanged" /> 
```

您可以从例如获取选定/删除的项目`SelectionChangedEventArgs`：

```
private void MySelectionChanged(object sender, SelectionChangedEventArgs e)
{
    Debug.WriteLine("Selected: {0}", e.AddedItems[0]);
} 
```

或者，如果您不需要选择功能和使用什么，`ItemClick="MyClick"` 您需要设置[`IsItemClickEnabled`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.isitemclickenabled)为`true`：

> 获取或设置一个值，该值指示视图中的项目是否引发 ItemClick 事件以响应交互。

```
<ListView x:Name="ItemListView" 
    ItemTemplate="{StaticResource StoreFrontTileTemplate}"
    ItemContainerStyle="{StaticResource StoreFrontLVTileStyle}"
    Margin="0" VerticalAlignment="Top" ItemClick="MyClick"  
    IsItemClickEnabled="bool" SelectionMode="None"/> 
```

请注意，在这种情况下，您还需要将 设置`SelectionMode`为`None`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T08:40:28.830

您可以在 XAML 代码上使用listview 的**DoubleTapped**事件。然后，在 C# 代码中，您可以通过以下方式获得位置：

```
private void display_DoubleTapped_1(object sender,
     Windows.UI.Xaml.Input.DoubleTappedRoutedEventArgs e)
{
     int items = display.SelectedIndex;
     // use this index to do something 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-07T01:23:16.357

我用这个：

```
private void ListUI_Tapped(object sender, TappedRoutedEventArgs e)
    {
        if(ListUI.SelectedItems.Count != 0)
        {
            Debug.WriteLine("It's not a trap at all my friend");
        }
        else
        {
            Debug.WriteLine("Its a trap");
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-27T06:30:10.090

```
 // We have a class name 'Message' in ControllerLibrary Namespace

         namespace ControllerLibrary
            {
              public class Message
                {
                   public string MessageID { get; set; }
                    public string MessageName { get; set; }
                 }
            }

    // Add name space at page heading
               xmlns:local1="using:ControllerLibrary"

      //At Gridview 

        <GridView IsItemClickEnabled="True" Name="UserMessageList">
         <GridView.ItemTemplate>
           <DataTemplate x:DataType="local1:Message">                                          <StackPanel Orientation="Horizontal">
         <Button Content="{x:Bind MessageName}" HorizontalAlignment="Left" Margin="2 0 10 0" Click="btnUserMessage_Click">
        </Button>
        </StackPanel>
        </DataTemplate>
         </GridView.ItemTemplate>
        </GridView>

  //At code Behind
    private void btnAddPage_Click(object sender, RoutedEventArgs e)
      {
          //Get selecte message
          var selectedMessage = (sender as Button).DataContext as Message;
      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-18T19:54:38.117

我建议在与 XAML 关联的代码隐藏 C# 文件中，使用作为参数传递给*ItemClick*事件处理程序的*ItemClickEventArgs对象的**ClickedItem*属性。

 ****示例（对于 GridView，但对于 ListView 的想法相同）**：

```
private void GridView_ItemClick(object sender, ItemClickEventArgs e)
        {
            // This is how you determine the clicked item in a GridView,
            // and obtain the relevant element of the underlying collection
            // (to which the GridView is bound).
            // 'Tile' is here the 'type' used in the said collection.
            Tile output = e.ClickedItem as Tile;

            // ... 

        } 
```**

# actionscript-3 - 如何将背景图像添加到 as3 中的文本字段

> ID：13326585
> 
> 赞同：0
> 
> 时间：2012-11-10T22:15:48.180
> 
> 标签：actionscript-3, flash, adobe

嘿伙计们，我正在为 iPhone 开发一个应用程序，我试图弄清楚如何将背景图像添加到由用户存储的电话号码填充的文本字段中。

我的功能 -

```
function configureLabel():void
{
    label = new TextField();
    label.autoSize = TextFieldAutoSize.LEFT;
    label.background = true;
    label.border = true;
    label.width = 50;
    label.x = 55;
    label.y = 80;
    //label.htmlText = "whasfd";
    var format:TextFormat = new TextFormat();
    format.font = "arial";
    format.color = 0xFF0000;
    format.size = 10;
    format.underline = false;
    //format.leftMargin = 50;

    label.defaultTextFormat = format;
    addChild(label);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:31:47.877

您可以创建一个包含文本字段和背景的显示对象类。然后，您只需将事件侦听器添加到侦听任何更改的文本字段。每次发生更改时，背景都会将自身调整为文本字段的当前大小。

这是一个例子：

```
package 
{
    import flash.display.Bitmap;
    import flash.display.Loader;
    import flash.display.LoaderInfo;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.net.URLRequest;
    import flash.text.TextFieldAutoSize;
    import flash.text.TextFieldType;
    import flash.text.TextFormat;

    public class Main extends Sprite 
    {

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);

        }// end function

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            var loader:Loader = new Loader();
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
            loader.load(new URLRequest("images/koala.jpg"));

        }// end function

        private function onComplete(e:Event):void {

            var bitmap:Bitmap = ((e.target as LoaderInfo).content as Bitmap);

            var container:TextFieldContainer = new TextFieldContainer();
            container.textField.autoSize = TextFieldAutoSize.LEFT;
            container.textField.defaultTextFormat = new TextFormat(null, null, 0xFF0000);
            container.textField.type = TextFieldType.INPUT;
            container.textField.multiline = true;
            container.setBackground(bitmap);
            addChild(container);

        }// end function

    }// end class

}// end package

import flash.display.DisplayObject;
import flash.display.Sprite;
import flash.events.Event;
import flash.text.TextField;

class TextFieldContainer extends Sprite {

    private var _textField:TextField;
    private var _backgroundContainer:Sprite;

    public function get textField():TextField {

        return _textField;

    }// end function

    public function TextFieldContainer():void {

        _backgroundContainer = new Sprite();
        addChild(_backgroundContainer);

        _textField = new TextField();
        _textField.addEventListener(Event.CHANGE, onChange);
        addChild(_textField);

    }// end function

    private function onChange(e:Event):void {

        resizeBackground();

    }// end function

    public function setBackground(displayObject:DisplayObject):void {

        if (_backgroundContainer.numChildren > 0) {
            _backgroundContainer.removeChildAt(0);
        }// end if

        _backgroundContainer.addChild(displayObject);

        resizeBackground();

    }// end function

        private function resizeBackground():void {
            _backgroundContainer.width = _textField.width;
            _backgroundContainer.height = _textField.height;
        }

}// end function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:36:14.957

简短的回答是您不能 - Flash TextFields 不支持背景图像。

而是在您的文本字段后面放置一个位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T05:10:56.420

这可以解决问题。

txt.htmlText ="http://www.flexflashforum.com/styles/prosilver/imageset/site_logo.gif' width='139' height='52'> 此图像在 Flash 的动态文本字段下"

# python - 从blender api中的重复对象访问源对象

> ID：13326587
> 
> 赞同：0
> 
> 时间：2012-11-10T22:16:03.500
> 
> 标签：python, api, blender, duplication

我使用搅拌机 2.62。

我想使用搅拌机作为平铺 3d 世界的编辑器。我有不同瓷砖的模型，我将这些模型的链接副本放在另一层中以构建地图。

现在我想以某种可以理解的格式导出这张地图（例如 [ [x, y, z, tileNo], [x, y, z, tileNo], ...]）。我可以使用如下代码遍历给定层中的所有对象，但我找不到获取重复对象来源的方法。这可能吗？

```
def layerNos(o):
  return [ln for (ln, l) in enumerate(o.layers) if l]

def exportObjectsFromLayer(choosenLayerNo):
  for o in bpy.data.objects:
    if choosenLayerNo in layerNos(o):
      yield exportTile(o)

def exportTile(o):
  return ("[%d,%d,%d]" % (
    round(x.location.x),
    round(x.location.z),
    round(x.location.y),
    getTileNumber(x)))

def getTileNumber(x):
  return None # this is where I'd like to access
  # the source of the duplicated object
  # and get its name to lookup its number
  # and return it as a tile number 
```

编辑：我找到了一种相反的方法 - 从重复的来源我可以使用以下方法找到所有重复的对象：

```
bpy.data.objects['Cube.121'].dupli_list_create(bpy.context.scene)
for dupliObj in bpy.data.objects['Cube.121'].dupli_list:
  #do sth with duplicated object
bpy.data.objects['Cube.121'].dupli_list_clear() 
```

所以我总是可以使用它并遍历我所有的模型图块，查找它们的副本放置的位置。我仍然更喜欢按照我上面描述的方式来做这件事，所以我把这个问题留了一会儿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:27:27.160

按照你的回答，我发现

```
object.data.users 
```

给出使用该网格的对象数量. 对我来说，查看是否存在链接的重复对象很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:31:20.240

好吧，我是正式的愚蠢。

你可以做

```
object.data 
```

到达复制对象的来源。

# jsf - 如何在 JSF 中使用 requestscoped 包装 bean 更新 dataTable？

> ID：13326591
> 
> 赞同：0
> 
> 时间：2012-11-10T22:16:49.487
> 
> 标签：jsf, session, datatable, request, updating

我有 datatable 所在的 mainMenu-xhtml 页面。当我向该表添加一个新对象时，它不会更新，因为使用的托管 bean 是会话范围的。我正在尝试实现 requestScoped wrapperBean 以进行更新。

**面孔配置：**

```
<navigation-case>
        <from-action>#{RmaBeanWrapper.submit}</from-action>
        <from-outcome>refreshedMainMenu</from-outcome>
        <to-view-id>/mainMenu.xhtml</to-view-id>
    </navigation-case>
<managed-bean>
    <managed-bean-name>RmaBeanWrapper</managed-bean-name>
    <managed-bean-class>fi.controllers.RmaBeanWrapper</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
        <property-name>rmaBean</property-name>
        <value>#{RmaBean}</value>
    </managed-property>
</managed-bean> 
```

**RmaBeanWrapper**

```
@ManagedBean
@RequestScoped
public class RmaBeanWpapper implements Serializable  {

private RmaBean rmaBean;
private RmaBean refreshedBean;

public RmaBean getRmaBean() {
    return rmaBean;
}

public void setRmaBean(RmaBean rmaBean) {
    this.rmaBean = rmaBean;
}

public RmaBean getRefreshedBean() {
    return refreshedBean;
}

public void setRefreshedBean(RmaBean refreshedBean) {
    this.refreshedBean = refreshedBean;
}

public String submit() {
   System.out.println("#########RmaBeanWpapper.submit#########"); 
   this.refreshedBean = rmaBean;

    return "refreshedMainMenu";

} 
```

**主菜单.xhtml**

```
<p:panelGrid style="margin-top:20px;" styleClass="noBorders">
                <p:row rendered="true">
                    <p:column></p:column>
                    <p:column></p:column>
                    <p:column><p:commandButton action="#{RmaBeanWpapper.submit}" ajax="false" value="Update Table" style="width: 220px;"/></p:column>
                    <p:column></p:column>
                </p:row> 
```

}

What is happening? Nothing! The mainMenu.xhtml page doesn't even open, and there is not even any exceptions in the servers log. Samehow I have to get my table updated, but there is something wrong with my implementation. Any ideas? I can't change rmaBean to sessionScoped, because is is used everywhere in the software and I can't change it.

Cheers, Sami

# jquery - jQuery Fade 在两个不透明度之间

> ID：13326595
> 
> 赞同：1
> 
> 时间：2012-11-10T22:17:18.593
> 
> 标签：jquery, fade

我在 jQuery 中的两个不透明度之间出现了褪色的问题。这是我的代码：

```
$(document).ready(function() {
    $('#header').mouseover(function() {
        $(this).fadeTo(2000, 1.0);
    }).mouseout(function() {
        $(this).fadeTo(2000, 0.4);
    });
});
<div id="header" style="background: black; height: 100px;width: 100px; opacity: 0.4;"></div> 
```

问题是当我将鼠标移到`#header`元素上时，它会开始从 0 褪色到 1。但我想做从 0.4 到 1 的效果。可以用jQuery来做吗？

编辑：哦，看起来我的 Chromium 8 有问题。在Firefox中一切正常。关于如何在这个早期版本的 chrome 中解决这个问题的任何建议？

EDIT2：在包含[jQuery Animate Enchanced后工作正常](http://playground.benbarnett.net/jquery-animate-enhanced/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:19:26.233

```
$(this).css('opacity', '0.4').fadeTo(2000, 1.0) 
```

**完整代码：**

```
$(document).ready(function() {
    $('#header').mouseover(function() {
        $(this).css('opacity', '0.4').fadeTo(2000, 1.0);
    }).mouseout(function() {
        $(this).fadeTo(2000, 0.4);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:19:15.070

像这样试试

```
$('#header').mouseover(function() {
        $(this).css('opacity', .4).fadeTo(2000, 1.0)
    }
)
... 
```

[**演示**](http://jsfiddle.net/Ys2rr/)

# python - 如何在 Flask-SQLAlchemy 中使用 Python 将当前会话设置为“已登录”？

> ID：13326599
> 
> 赞同：1
> 
> 时间：2012-11-10T22:17:52.907
> 
> 标签：python, sqlite, sqlalchemy, flask, flask-sqlalchemy

我正在尝试学习如何使用 Python 构建基本的 Flask 应用程序。我首先按照他们的优秀教程制作了一个简单的博客。本教程让您`session`从`flask`. 稍后将其设置为“登录”，并且只有在这种情况下，用户才能写帖子。例如登录功能如下：

```
@app.route('/login', methods=['GET', 'POST'])
def login():
    error = None
    if request.method == 'POST':
        if request.form['username'] != app.config['USERNAME']:
            error = 'Invalid username'
        elif request.form['password'] != app.config['PASSWORD']:
            error = 'Invalid password'
        else:
            session['logged_in'] = True
            flash('You were logged in')
            return redirect(url_for('show_entries'))
    return render_template('login.html', error=error) 
```

然后，另一个函数检查会话是否确实在“logged_in”上：

```
@app.route('/add', methods=['GET', 'POST'])
def add_entry():
    if not session.get('logged_in'):
        abort(401)
    g.db.execute('insert into entries (title, text) values (?, ?)',
                 [request.form['title'], request.form['text']])
    g.db.commit()
    flash('New entry was successfully posted')
    return redirect(url_for('show_entries')) 
```

但是，当我尝试在我的应用程序中执行此操作时，我得到`500 Internal Server Error:`

> 内部服务器错误
> 
> 服务器遇到内部错误，无法完成您的请求。服务器过载或应用程序出错。

我认为这是因为在教程中使用了 sqlite 数据库，而当我收到错误时我使用的是 Flask-SQLAlchemy。这可能是问题的根源吗？如果是，是否有推荐的方法来做类似的事情？即允许应用程序检查是否有人登录？

以下是我的完整代码：

```
from flask import Flask, request, session, redirect, url_for, render_template
from flask.ext.sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////tmp/z.db'
DEBUG = True
db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True)
    email = db.Column(db.String(120), unique=True)
    password = db.Column(db.String(160), unique=True)

    def __init__(self, username, email, password):
        self.username = username
        self.email = email
        self.password = password

    def __repr__(self):
        return '<User %r>' % self.username

@app.route('/', methods=['GET', 'POST'])
def home():
    #check to see if logged in
    if session['logged_in'] == True:
        note = "this text is displayed because you are logged in."              
    note=None
    if request.method == 'POST':
        new_user = User(request.form['username'], request.form['email'], request.form['password'])
        #before making the new user, check to make sure the entered information isn't already in the db
        if User.query.filter_by(username=request.form['username']).first() != None:
            note = "sorry, this username has already been taken"
        elif User.query.filter_by(email=request.form['email']).first() != None :
            note = "sorry, this email address is already associated with an account."   
        else:   
            db.session.add(new_user)
            db.session.commit()
            session['logged_in'] = True
            redirect(url_for('home'))
    return render_template('index.html', note=note)

@app.route('/login', methods=['GET', 'POST'])
def signin():
    note=None
    if request.method == 'POST':
        #get username and search for it in db
        tag = request.form['username']
        #if the entry contains '@', search db as email address
        if tag.find('@') != -1:
            user = User.query.filter_by(email=tag).first()
        else:
            user = User.query.filter_by(username=tag).first()   
        #if user exists, get password associated with it
        if user != None:
            password = user.password

            #see if db email equals email input in HTML
            if password == request.form['password']:
                session['logged_in'] = True
                return redirect(url_for('home'))
            else:
                note='wrong password'   
        else:
            #call an error message
            note='this username does not seem to exist. that is all i know'
    return render_template('login.html', note=note)         

if __name__ == '__main__':
    app.run() 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:06:46.887

您需要设置`app.secret_key`才能使用会话：

> 除了请求对象之外，还有一个名为 session 的对象，它允许您存储从一个请求到下一个请求的特定于用户的信息。这是在 cookie 之上为您实现的，并以加密方式对 cookie 进行签名。这意味着用户可以查看您的 cookie 的内容但不能修改它，除非他们知道用于签名的密钥。
> 
> 为了使用会话，您必须设置一个密钥。[这是会话的工作方式](http://flask.pocoo.org/docs/quickstart/#sessions)

# c# - c# Linq to xml - 提取子元素的父元素

> ID：13326600
> 
> 赞同：-1
> 
> 时间：2012-11-10T22:17:54.120
> 
> 标签：c#, linq-to-xml

我有这个xml：

```
<Root>
  <RootKey>1</RootKey>
  <ChildL1>
    <ChildL1Key>12</ChildL1Key>
    <Child2>
      <Child2Key>TakeMe</Child2Key>
    </Child2>
    <Child2>
      <Child2Key>365</Child2Key>
    </Child2>
  </ChildL1>
  <ChildL1>
    <ChildL1Key>95</ChildL1Key>
    <Child2>
      <Child2Key>958</Child2Key>
    </Child2>
    <Child2>
      <Child2Key>574</Child2Key>
    </Child2>
  </ChildL1>
</Root> 
```

我需要提取 Child2 的父母，***其中***Child2Key ***==*** "TakeMe"。结果将是：

```
<Root>
  <RootKey>1</RootKey>
  <ChildL1>
    <ChildL1Key>12</ChildL1Key>
    <Child2>
      <Child2Key>TakeMe</Child2Key>
    </Child2>
  </ChildL1>
</Root> 
```

我大概可以分两步完成。从 Child2 向上遍历 parent 并获取它们的键，然后在下一步中删除具有其他键的元素。如果可能的话，我宁愿在一个查询中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:48:04.257

```
XDocument xdoc = XDocument.Load(path_to_xml);
xdoc.Descendants("Child2")
    .Where(c2 => c2.Element("Child2Key").Value != "TakeMe")
    .Remove();

xdoc.Descendants("ChildL1")
    .Where(c1 => !c1.Descendants("Child2").Any())
    .Remove();

// now xdoc contains what you need
string xml = xdoc.ToString(); 
```

第一个查询删除所有`Child2`不匹配搜索条件的节点。

第二个查询删除所有`ChildL1`不再有`Child2`节点的。

**LB专用**

```
xdoc.Descendants("ChildL1")            
    .Where(c1 => !c1.Descendants("Child2")
                    .Any(c2 => c2.Element("Child2Key").Value == "TakeMe"))
    .Concat(xdoc.Descendants("Child2")
                .Where(c2 => c2.Element("Child2Key").Value != "TakeMe"))
    .Remove(); 
```

# c# - c# tcp通信，在GetStream上发送空数据

> ID：13326601
> 
> 赞同：1
> 
> 时间：2012-11-10T22:18:12.843
> 
> 标签：c#, network-programming

当我使用这段代码时，它会向我的接收器发送一个空字节数组。为什么，我不向流中写入任何内容，我只获得它。我能做些什么来防止它？

```
public void Send()
{
  TcpClient client = new TcpClient();
  IPEndPoint serverEndPoint = new IPEndPoint( IPAddress.Parse( ip ), port );
  client.Connect( serverEndPoint );

  NetworkStream clientStream = client.GetStream();

  clientStream.Close();
  client.Close();
}

  private TcpListener tcpListener;
  private Thread listenThread;

  public void Receiver()
  {
   this.tcpListener = new TcpListener( IPAddress.Any, port );
   this.listenThread = new Thread( new ThreadStart( ListenForClients ) );
   this.listenThread.Start();
  }

  private void ListenForClients()
  {
   this.tcpListener.Start();

   while ( true )
   {
    //blocks until a client has connected to the server
    TcpClient client = this.tcpListener.AcceptTcpClient();

    Thread clientThread = new Thread( new ParameterizedThreadStart( HandleClientComm ));
    clientThread.Start( client );
    }   
  }

  private void HandleClientComm( object client )
  {
    TcpClient tcpClient = (TcpClient)client;
    NetworkStream clientStream = tcpClient.GetStream();

    tcpClient.Close();
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:22:21.040

目前尚不清楚“发送空字节数组”是什么意思 - 但看看这段代码：

```
NetworkStream clientStream = client.GetStream();
clientStream.Close(); 
```

这将关闭连接。目前尚不清楚您的代码是*做*什么的，但您似乎不太可能真的想要接受连接，只是立即关闭它。

你在 中做同样的事情`HandleClientComm`，这次是通过关闭`TcpClient.`

# java - 如何从几何中获取 LineString s (Geotools JTS)

> ID：13326602
> 
> 赞同：1
> 
> 时间：2012-11-10T22:18:27.623
> 
> 标签：java, maps, gis, geotools, jts

我有一个任意的线段列表，我想与视口相交。有什么方法可以从该视口中获取另一个线段列表。

假设视口是正方形。任何给定的线段都可以被丢弃（如果该线段不与视口相交）或如果它与视口相交至少 2 个点则被剪裁。

到目前为止我有这个：

```
public LineString [] intersectWithViewport
    (Linestring[] input, double centerX, double centerY, double length) {
    GeometryFactory gf = new GeometryFactory();
    double halfLength = length / 2;
    Coordinate upperLeft = new Coordinate(centerX - halfLength, centerY - halfLength);
    Coordinate lowerLeft = new Coordinate(centerX - halfLength, centerY + halfLength);
    Coordinate lowerRight = new Coordinate(centerX + halfLength, centerY + halfLength);
    Coordinate upperRight = new Coordinate(centerX + halfLength, centerY - halfLength);
    Coordinate[] viewPortCoords = 
        new Coordinate[]{upperLeft, lowerLeft, lowerRight, upperRight};
    LinearRing lr = gf.createLinearRing(viewPortCoords);

    Geometry viewPort = gf.createPolygon(lr, null);
    Geometry segments = gf.createMultiLineString(input);
    Geometry intersection = segments.intersection(viewPort);
    ...
} 
```

如何`LineStrings`从`intersection`几何中获得？

# html - Twitter Bootstrap 可折叠侧边栏

> ID：13326603
> 
> 赞同：1
> 
> 时间：2012-11-10T22:18:29.720
> 
> 标签：html, css, twitter-bootstrap

我只是想问如何创建这样的侧边栏。看看这个链接。

[http://utopiaadmin.themio.net/dashboard.html](http://utopiaadmin.themio.net/dashboard.html)

（左侧导航）它使用 twitter bootstrap 的流畅布局，而且它也是可折叠的。此管理面板中有 3 个可折叠的左侧导航步骤。

1.  用于（台式机、笔记本电脑等）的图标、文本
2.  图标（平板电脑、ipad 等）
3.  折叠列表（手机）

我试图弄清楚如何制作这种流畅、可折叠的侧边栏。但我还是做不到。所以，如果有人知道如何使用 twitter bootstrap 做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:37:15.253

呵呵……终于知道了。非常感谢@Ross

[http://webdesignerwall.com/tutorials/responsive-design-in-3-steps](http://webdesignerwall.com/tutorials/responsive-design-in-3-steps)

# apache - 在访问日志中查找空白用户代理和欺骗性 UA

> ID：13326605
> 
> 赞同：2
> 
> 时间：2012-11-10T22:18:59.067
> 
> 标签：apache, logging, awk, user-agent, access-log

我试图在我的 apache 访问日志中找到任何空白用户代理和欺骗用户代理的痕迹。

这是我的访问日志中的典型行：（已编辑 IP 和域）

```
x.x.x.x - - [10/Nov/2012:16:48:38 -0500] "GET /YLHicons/reverbnation50.png HTTP/1.1" 304 - "http://www.example.com/newaddtwitter.php" "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/534.7 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/534.7 ZemanaAID/FFFF0077" 
```

对于空白用户代理，我正在尝试这样做：

```
awk -F\" '($6 ~ /^-?$/)' /www/logs/www.example.com-access.log | awk '{print $1}' | sort | uniq 
```

为了查找有关 UA 的信息，我正在运行：（给我每个唯一 UA 的点击量）

```
awk -F\" '{print $6}' /www/logs/www.example.com-access.log | sort | uniq -c | sort -fr 
```

我可以做些什么不同的事情来使这些命令更强大、更深思熟虑，同时为我提供最好的信息来对抗互联网上的机器人和其他渣滓？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:33:19.087

我不会`\"`用作字段分隔符。CLF 的构造足够好，如果你用空格分隔，字段 12 是你的用户代理的开始。如果`$12 == '""'`，则用户代理为空。

请记住，`awk`可以接受标准输入。因此，您可以通过以下方式对 Apache 日志进行“实时”监控：

```
$ tail -F /path/to/access.log | /path/to/awkscript 
```

请记住，当以这种方式调用时，awk 脚本永远不会到达它的`END`. 但是您可以在 Apache 将它们添加到日志时对其进行处理。

这样的事情可能会有所帮助。添加到您认为合适的位置。

```
#!/usr/bin/awk -f

BEGIN {
  mailcmd="Mail -s \"Security report\" webmaster@example.com";
}

# Detect empty user-agent
$12 == "" {
  report="Empty user agent from " $1 "\n";
}

# Detect image hijacking
$7 ~ /\.(png|jpg)$/ && $11 !~ /^http:\/\/www.example.com\// {
  report=report "Possible hijacked image from " $1 " (" $11 " -> " $7 ")\n";
}

# Detect too many requests per second from one host
thissecond != $4 {
  delete count;
  thissecond=$4;
}
{
  count[$1]++;
  for (ip in count) {
    if (count[ip] > 100) {
      report=report "Too many requests from " $1 "\n";
      delete(count[ip]);  # Avoid too many reports
    }
  }
}

# Send report, if there is one
length(report) {
  print report | mailcmd;    # Pipe output through a command.
  close(mailcmd);            # Closing the pipe sends the mail.
  report="";                 # Blank the report, ready for next.
} 
```

请注意，在特定秒内计算请求的帮助很小；如果您有大量来自中国的流量，或者防火墙后面的大学/企业网络，那么许多请求可能看起来来自一个 IP 地址。而且该`Mail`命令不是处理通知的好方法；我将其包含在此处仅用于演示目的。YMMV，盐调味。

# php - CodeIgniter DB get_where 并加入

> ID：13326610
> 
> 赞同：2
> 
> 时间：2012-11-10T22:19:42.480
> 
> 标签：php, database, codeigniter

这是编写此 codeigniter 查询的最佳方式吗？

```
$where = array('registration_status_fk' => 2, 'membership.membership_type_id' => 4);
$join = array('membership', 'membership.id=members.id');

$query = $this->join($join[0], $join[1])->get_where($this->tbl_name, $where); 
```

还是有更好的方法来完成我正在做的事情？

这是我得到的错误

```
Error Number: 1054

Unknown column 'membership.membership_type_id' in 'where clause'

SELECT * FROM (`member`) WHERE `registration_status_fk` = 2 AND `membership`.`membership_type_id` = 4

Filename: C:\xampp\htdocs\OAWA\system\database\DB_driver.php

Line Number: 330 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T22:32:52.693

您可以通过这种方式编写连接查询。

```
$this->db->select('*')->from('members')->join('membership', 'membership.id=members.id')->where($where)->get(); 
```

在`$where`数组中，您需要带有列名的表名，否则如果两个表具有相同的列，它可能不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-05T15:50:28.823

我曾经喜欢这个它正在工作

```
$where = array('registration_status_fk' => 2, 'ms.membership_type_id' => 4);
$join = array('membership', 'membership.id=members.id');

$query = $this->join('membership ms', 'ms.id = m.id')->get_where('member m', $where); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T12:57:52.687

你是如此接近。

我使用您的示例构建了自己的 join / get_where 语句，该语句产生了正确的结果：

```
 $where = array('as_id' => $id);
    $join = array('as_types', 'as_types.as_type_id=assets.as_type');
    $query = $this->db->join($join[0], $join[1])->get_where('assets', $where); 
```

以这种方式重写您的查询：

```
$where = array('registration_status_fk' => 2, 'membership.membership_type_id' => 4);
$join = array('membership', 'membership.id=members.id');
$query = $this->join($join[0], $join[1])->get_where('members', $where); 
```

注意唯一的变化是在第 3 行：`$this->tbl_name`应该改为一个简单的字符串，`'members'`

# objective-c - 为什么 [[NSScrollView documentView] scrollPoint:] 在 loadView 方法中不起作用？

> ID：13326617
> 
> 赞同：0
> 
> 时间：2012-11-10T22:20:31.277
> 
> 标签：objective-c, macos, cocoa

我试图在包含浏览器的视图控制器的 loadView 方法中自动滚动到水平图像浏览器的最右侧。当我尝试这样做时它不起作用（只是滚动到 x=1000 作为测试）：

```
- (void)loadView {
    [super loadView];
    // Set initial position
    [[[self scrollView] documentView] scrollPoint:NSMakePoint(1000.0, 0.0)];
} 
```

但是在调试过程中的某个时刻，我发现这可行：

```
- (void)loadView {
    [super loadView];
    // Set initial position
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(scrollToRight) userInfo:nil repeats:NO];
} 
```

其中 scrollToRight 只是一个与上面做同样事情的实例方法。

有谁知道为什么会这样？是因为我是在 loadView 方法中做的吗？scrollPoint: 不能从主线程调用吗？

**更新：**我做了一些额外的实验，比如订阅 NSViewFrameDidChangeNotificaiton 并在此基础上滚动，但这也不起作用。到目前为止，我能够让滚动发生的唯一方法是使用 NSTimer，或者通过从父窗口控制器调用视图控制器的 scrollToRight 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:37:15.823

确保`[ [ self scrollView ] documentView ]`≠ `nil`——它可能仍然为零。此外，您必须`-scrollPoint`从主线程调用——所有 AppKit 调用必须从主线程进行。

# php - 在 $_GET 之后获取 mod-rewrite 标题

> ID：13326629
> 
> 赞同：1
> 
> 时间：2012-11-10T22:22:28.210
> 
> 标签：php, mod-rewrite, get

我目前使用这个 mod-rewrite

```
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ post.php?id=$1 [L]
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)/$ post.php?id=$1 [L] 
```

这允许我在 url 之后添加帖子标题`$_GET['id]`

```
http://foo.com/246/clouds 
```

*域/获取/标题*

如何从 url 获取/获取/返回标题部分以便能够在`<title></title>`标签中使用它？

我知道如何获得`$_GET['id']`

```
$pid = (isset($_GET['id']) ? 'foo : Page - ' . $_GET['id'] : ''); 
```

返回

```
foo : Page - 246 
```

作为页面标题，但真的很想拥有

```
foo : clouds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:29:07.733

更改重定向规则：

```
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ post.php?id=$1&title=$2 [L]
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)/$ post.php?id=$1&title=$2 [L] 
```

然后您只需使用`$_GET['title']`来检索标题。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:31:24.353

您实际上不需要在重写中传递任何内容，例如添加`title=$2`您可以访问`$_SERVER['REQUEST_URI']`的内容，`/246/clouds`然后您可以将其分解，`/`然后访问第二个键值。

```
$url_parts = explode('/',$_SERVER['REQUEST_URI']);
print_r($url_parts); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T22:28:47.820

将您的 RewriteRule 更新为 2\. 参数

```
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ post.php?id=$1&title=$2 [L]
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)/$ post.php?id=$1&title=$2 [L] 
```

和

```
print_r($_GET["title"]); 
```

# android - 这种技术如何防止恶意输入？

> ID：13326631
> 
> 赞同：0
> 
> 时间：2012-11-10T22:22:38.710
> 
> 标签：android, provider

在 android 内容提供者指南中，它说从数据库中选择数据时，不要使用`String mSelectionClause = "var = " + mUserInput`，因为如果`mUserInput`是，`nothing; DROP TABLE *;`那么整个表将被删除。

所以推荐这种方式：

```
String mSelectionClause = "var = ?";
String[] selectionArgs = {""};
selectionArgs[0] = mUserInput; 
```

我不明白，所以如果值为 ，`mUserInput`它`nothing; DROP TABLE *;`不会做同样的事情`String mSelectionClause = "var = nothing; DROP TABLE *;"`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:12:02.523

查询中的问号**不是**直接用值（`mUserInput`）代替的！

数据库和/或执行（代码）库的内部机制知道如何使提供的值安全，以防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)和其他恶意攻击。

*注意*：此技术不是 Android 特定的，但（或至少应该）能够用于所有编程语言/环境中的所有数据库。

# java - JOptionPane.JOptionDialog 获取用于 if 语句的输入值

> ID：13326636
> 
> 赞同：1
> 
> 时间：2012-11-10T22:23:18.053
> 
> 标签：java, swing, joptionpane

我有一个程序，在选项对话框中有两个选项，一个选项应该执行一个部分，另一个应该执行另一部分。（我将使用 if 语句执行此操作）

```
Object reply1;  //Variable that Should be not an object???

    Object[] option = { "Choose a Random Number", "Input a Number"};   //option labels

    JOptionPane pane1;
    pane1 = new JOptionPane.showOptionDialog(null,
        "Text explaining which option to choose\n",
        "Title",
        JOptionPane.YES_NO_OPTION,
        JOptionPane.PLAIN_MESSAGE,
        null,
        option,
        option[0]);

           reply1 = pane1.getInputValue();  //this is the problem. 
```

如何将变量设置为等于选择的选项以及它应该是什么类型的变量？

在我调试的时候，它已经被初始化为 int、String 和 Object。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T22:31:04.680

您可以简单地使用`int`返回值：

```
int reply1 = JOptionPane.showOptionDialog(null,
   "Text explaining which option to choose\n",
   "Title",
   JOptionPane.YES_NO_OPTION,
   JOptionPane.PLAIN_MESSAGE,
   null,
   option,
   option[0]);

   if (reply1 == JOptionPane.YES_OPTION) {
      // option 1
   } else if (reply1 == JOptionPane.NO_OPTION) {
      // option 2
   } 
```

相关：[JOptionPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)

# ruby - 如何在图中找到派系？

> ID：13326645
> 
> 赞同：1
> 
> 时间：2012-11-10T22:23:58.237
> 
> 标签：ruby

我正在使用 Ruby 和 Ruby 图形库 [http://rgl.rubyforge.org/](http://rgl.rubyforge.org/)

如何在图中找到所有派系（完整子图）？

具体来说，我正在寻找一个涉及两个特定顶点的 5 集团。

* * *

我真正在做什么 - Project Euler [Problem 60](http://projecteuler.net/problem=60)

> 素数 3、7、109 和 673 非常了不起。通过取任意两个素数并以任意顺序连接它们，结果将始终为素数。例如，取 7 和 109，7109 和 1097 都是素数。这四个素数之和 792 表示具有此属性的一组四个素数的最低和。
> 
> 找到一组五个素数的最小总和，其中任何两个素数连接起来产生另一个素数。

如果十进制连接“pq”和“qp”都是素数，我的图有顶点素数，边从 p 到 q。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:13:55.780

> 具体来说，我正在寻找一个涉及两个特定顶点的 5 集团。

假设这两个顶点是`first`和`second`

```
common = ug.adjacent_vertices(first) & ug.adjacent_vertices(second)

for triple in common.combination(3)
    a,b,c = triple
    if ug.has_edge?(a,b) && ug.has_edge?(a,c) && ug.has_edge?(b,c)
        return [first,second,a,b,c] 
```

# php - 在 Scala 中重写 PHP 的similar_text

> ID：13326646
> 
> 赞同：4
> 
> 时间：2012-11-10T22:24:04.143
> 
> 标签：php, scala, similarity, text-comparison

为了重写 PHP 的similar_text 算法，我尝试了几种不同的方法。所有这些都取得了一定程度的成功，但最终都失败了。

第一次尝试：我尝试从 PHP 源代码重写它。C 对指针的优雅使用使得在 Scala 中似乎不可能实现相同的精确实现并且是干净的。

第二次尝试：我尝试从某人发布在[PHP similar_text() in java](https://stackoverflow.com/questions/2000440/php-similar-text-in-java)上的 Java 函数重写它。不幸的是，该功能在 Java 中不起作用，所以没关系将它移植到 Scala。

第三次（当前）尝试：我目前正在尝试将此 JavaScript 实现转换为 Scala： http: [//phpjs.org/functions/similar_text/](http://phpjs.org/functions/similar_text/)。我以前在 JavaScript 中使用过它，它似乎运行正常。我的 Scala 翻译（如下）无法正常运行。它使您在 1 或 2 个相似性索引范围内，但它通常不是 100% 到它的 PHP 对应物的结果。

```
def similartext(first:String,second:String) : Int = {
  if (first == null || second == null) {
    0
  }

  var pos1:Int = 0
  var pos2:Int = 0
  var max:Int = 0
  var sum:Int = 0
  var l:Int = 0

  val firstLength:Int = first.length
  val secondLength:Int = second.length

  for (p <- 0 until firstLength) {
    for (q <- 0 until secondLength) {
      while(p+l < firstLength && q+l < secondLength && (first.charAt(p+l) == second.charAt(q+l))) {
        if (l > max) {
            println("[" + p + "," + q + "," + l + "]" + first.charAt(p+l) + " | " + second.charAt(q+l))
            max = l
            pos1 = p
            pos2 = q
          }
        l += 1
      }
    }
  }

  sum = max;

  if (sum > 0) {
    if (pos1 > 0 && pos2 > 0) {
      sum += similartext(first.substring(0, pos2), second.substring(0, pos2))
    }

    if ((pos1 + max < firstLength) && (pos2 + max < secondLength)) {
      sum += similartext(first.substring(pos1 + max, (pos1 + max) + (firstLength - pos1 - max)), second.substring(pos2 + max, (pos2 + max) + (secondLength - pos2 - max)))
    }
  }

  sum;
} 
```

测试：

```
(Scala)val st = similartext("apple","aple") Yields 3
(PHP)$similar = similar_text("apple","aple"); Yields 4

(Scala)val st = similartext("starbucks","stharducks") Yields 8
(PHP)$similar = similar_text("starbucks","stharducks"); Yields 8

(Scala)val st = similartext("hello earth!","hello world!") Yields 10
(PHP)$similar = similar_text("hello earth!","hello world!"); Yields 8 
```

有人对这里出了什么问题有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T00:44:44.367

这里有一个提示：仔细查看 JavaScript 版本的第 28 行——尤其是该行的最后一个字符。这就是您的实现不同的地方。（您也不会将`l`每对索引都重置为零，但这不是最重要的问题。）

顺便说一下，这是一个免费的`var`Scala 版本：

```
def similarText(x: String, y: String): Int = {
  val indices = for {
    (s, p) <- x.tails.zipWithIndex
    (t, q) <- y.tails.zipWithIndex
    l = ((s zip t) takeWhile Function.tupled(_ == _)).size
  } yield (p, q, l)
  val (pos1, pos2, max) = indices.maxBy(_._3)

  if (max == 0) max else max +
    similarText(x take pos1, y take pos2) +
    similarText(x drop (pos1 + max), y drop (pos2 + max))
} 
```

这是相当即兴的——我相信你可以很容易地使它更简洁和高效。

还有额外的功劳：JavaScript 版本中存在一个错误——例如尝试，`"aabcd"`结果`"abcabcd"`与 PHP（或我的）不同。

# java - 多个 GWT ActivityManager 和 ActivityMappers 有什么用？

> ID：13326657
> 
> 赞同：4
> 
> 时间：2012-11-10T22:25:20.070
> 
> 标签：java, gwt, gwt-places, gwt-activities

我**终于**想到你应该编写一个代码`ActivityMapper`来解析/检查`Place`其`getActivity(Place)`方法被传递的子类，并返回适当`Activity`的呈现给用户。

所以这让我开始思考：在你的应用程序中需要许多不同的子类是有道理`Place`的，每个子类代表一个不同的可书签 URL/状态。

但是为什么一个应用程序需要超过 1`ActivityManager`和`Activity Mapper`？似乎没有 GWT 对哪个`Place`映射到哪个`Activity`...

我听说过一些策略，每个显示区域都有自己的`ActivityManager`. 看起来我也喜欢这样只会让你的项目更复杂而没有提供任何*真正的*好处。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T23:43:47.097

编写了一个包含 10 个这样的*显示区域*的应用程序后，我可以向您保证，它使我们的项目比使用单个显示区域要简单得多（我们可以删除几个区域，然后在没有活动的情况下处理，但仍然如此）。

*当您的显示区域*并非全部同时更改时，它被证明是最有用的（通常，您的*主要内容比**外围*或*辅助*内容更频繁地更改）：假设您正在编辑一个非常复杂的实体并将其拆分为数十个*屏幕*和屏幕上的东西总是相同的（例如*顶部*实体的*摘要*，为用户提供上下文）。

 *将您的活动专门化也很棒（关注点分离，每个活动一个关注点）。例如，在 stackoverflow（如果是 GWT 应用程序）上，右侧的侧边栏可能与问题及其答案在同一个*活动中，但如果你将事物分成不同的活动，每个活动都会变得更简单，因此更容易维护。*

最后，可以更容易地重组专门的活动。例如，一个被分成 2 个活动的主从细节可以很容易地从“同一屏幕上的主/子”（与显示邮件列表和所选消息的大多数邮件客户端相同）更改为“主到子并返回到master”（默认情况下与 GMail 一样，与大多数移动应用程序一样）。而且这种重组并不是要改变您在应用程序中导航的方式，而是要根据外形重用相同的活动来进行不同的导航（并且使用 MVP，您还可以在不更改演示者的情况下调整视图）。

* * *

话虽如此，确实有许多应用程序不需要/不需要这样做。这并不意味着它没有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-28T15:04:24.363

查看有关该主题的 Thomas Broyer 文章[http://blog.ltgt.net/gwt-21-activities-nesting-yagni/](http://blog.ltgt.net/gwt-21-activities-nesting-yagni/)

我试图在一个 github 项目中实现他的想法：[https ://github.com/ronanquillevere/GWT-Multi-Activities](https://github.com/ronanquillevere/GWT-Multi-Activities)*

# asp.net-mvc - 是否可以将 SmtpClient.SendAsync() 结果输出到 MVC Razor 视图？

> ID：13326658
> 
> 赞同：0
> 
> 时间：2012-11-10T22:25:40.633
> 
> 标签：asp.net-mvc, razor, callback, smtpclient, sendasync

有没有办法通过回调函数在 MVC 视图上显示 SmtpClient.SendAsync() 方法结果（成功或失败）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:25:56.173

我会使用[MVC Mailer](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)。它允许创建带有剃刀视图的电子邮件，并且还具有异步选项。

# ruby-on-rails-3 - 在 Rails 应用程序中移动 rspec 案例

> ID：13326661
> 
> 赞同：0
> 
> 时间：2012-11-10T22:25:49.500
> 
> 标签：ruby-on-rails-3, rspec

我的`rspec`目录开始变得有点杂乱，所以我将所有规范移到了一个`cases`目录中。这样做后 rspec 停止将`*_controller_spec.rb`其视为`:type => :controller`. 恢复这种行为的神奇方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:42:44.250

相关评论形成[了关于 rspec-rails github 页面的讨论](https://github.com/rspec/rspec-rails/issues/600#issuecomment-7946929)：

> rspec-rails 为各种规范类型提供的集成基于包含示例组的模块，这些模块基于规范文件所在目录的约定。查看[示例文件夹](https://github.com/rspec/rspec-rails/tree/master/lib/rspec/rails/example)以查看每个规范包含的所有模块类型。[example.rb](https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/example.rb)根据 file_path 将其全部连接起来。
> 
> 您需要自己进行此接线，因为您超出了 rspec-rails 的“正常”约定。您可以在每个示例组中手动包含模块，使用元数据以类型标记示例组，并基于类型进行包含，或者使用与 rspec-rails 类似的 file_path 约定方法。

所以基本上，复制[这个文件](https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/example.rb)并替换所有对by的`spec`in 调用，然后将其粘贴到你的块中。可能有一种更简单的方法，这正是我在谷歌搜索几秒钟后发现的（我自己从未真正尝试过）。`escaped_path``spec cases``RSpec::configure`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T22:30:56.680

如果您的意思是您有名为 like 的文件`spec/foo_controller_spec.rb`，那么“正确”的做法是将它们放在名为`controllers`. 所以你得到`spec/controllers/foo_controller_spec.rb`.

rspec-rails的[自述文件详细介绍了哪种规范放在哪个目录中。](https://github.com/rspec/rspec-rails#readme)

# css - CSS 嵌套列表的宽度和高度

> ID：13326663
> 
> 赞同：0
> 
> 时间：2012-11-10T22:26:09.930
> 
> 标签：css, footer, nested-lists

我正在尝试使用嵌套列表获得 CSS 样式的页脚菜单，因为这似乎是当今大多数 CMS 使用的标准方式。但是，我很难将宽度和高度动态扩展到正确的尺寸。因此，每个顶级列表项都是水平放置的，而每个子级列表项都列在下面。

**问题 1：**我希望顶级列表项的总宽度为最长子列表项或顶部列表项的宽度，以较长者为准。我不想断线。

**问题 2：**周围 DIV 的高度没有扩展（尝试使用这两种方法以及使用CSS 选择器`overflow: auto`的方法），而是显示滚动条。`clear: both``:after`

我想避免固定高度，因为我想让菜单动态化。

我该怎么做才能解决上述问题？这是我到目前为止所拥有的：（[现场示例](http://jsfiddle.net/TLRSC/)）

```
 <div id="footer">
    <div id="footerstrip" >
        <div id="footercontent" >
            <div id="footerleft">
                <img src="images/LogoGrey.png"  />&nbsp;<a href="#"><img src="images/FooterHome.png" /></a>
            </div>

            <div id="footer-menu-div">
                <ul id="footer-menu">
                   <li>Fashion
                       <ul>
                        <li>Apparel</li>
                        <li>Celebrity Styles</li>
                        <li>Fashion Spotlight</li>
                        <li>Trends</li>
                       </ul>
                   </li>

                   <li>Beauty
                       <ul>
                        <li>Hair</li>
                        <li>Skincare</li>
                        <li>Make-up &amp; Cosmetics</li>
                        <li>Nails</li>
                       </ul>
                   </li>

                   </li>
                   <li>Lifestyle</li>
                   <li>Love</li>
                   <li>Culture</li>
                   <li>Subscribe</li>
                   <li>Events</li> 
                 </ul>
            </div>
        </div>
    </div> 
```

CSS：

```
#footer 
{
    margin-top: 30px;
    clear: both;
    width: 100%;
}

#footerstrip
{
    background-color: #F0F0F0;
    width: 100%;
    margin-top: 20px;
    overflow: auto;
}

#footercontent
{
    padding: 10px 0px 10px 0px;
    width: 1100px;
    text-align: left;   
    color: #666666;
    font-size: 10px;
    font-family:Arial, Helvetica, sans-serif;
    text-transform:uppercase;
    vertical-align:middle;
    margin: auto;
    overflow: auto;
    background-color: #e0e0df;
}

#footercontent a
{
    color: #666666;
    font-size: 10px;
    font-family:Arial, Helvetica, sans-serif;
    text-transform:uppercase;   
    text-decoration:none;
    overflow: auto;
}

#footercontent img
{
    vertical-align: middle;
    margin-left: 5px;
}

#footerleft
{
    text-align:right; 
    width: 120px; 
    padding: 0px; 
    margin: 0px; 
    float: left;    
}

#footer-menu-div
{   
    float: left;
    padding: 0px 5px 0px 5px;
    margin: auto;
    text-align: left;
    position: relative;
    display: block;
}

#footer-menu-div:after {
    content:"";
    clear:both;
    display:block;
}

ul#footer-menu
{
    margin: 0px;
    padding: 0px;   
}

ul#footer-menu li
{
    background-color: #c7c6c6;
    color: #212121;
    font-weight: bold;
    font-size: 11px;
    list-style: none;
    display: inline;
    margin: 0px;
    padding: 5px 10px 5px 10px;
    font-family:Arial, Helvetica, sans-serif;
    float: left;
    text-transform: capitalize;
    position: relative;
}

ul#footer-menu li:first-child
{
    border-top-left-radius: 5px 5px;
    border-bottom-left-radius: 5px 5px;     
}

ul#footer-menu li:last-child
{
    border-top-right-radius: 5px 5px;
    border-bottom-right-radius: 5px 5px;        
}

ul#footer-menu li ul 
{
    display: block;
    position: absolute;
    margin: 0;
    padding: 0;     
}

ul#footer-menu li ul li
{
    background-color: transparent;
    font-weight: normal;
    display: inline;    
} 
```

**更新**

我只希望带有圆角的条带围绕顶级列表项，而不是围绕所有项。所以它会在一条线上全部水平。

**更新 2**

实际上，每个列表项的内容都会是一个`<a>`链接。根据到目前为止的反馈，我设法想出了[这个](http://jsfiddle.net/TLRSC/9/)，但是我必须这样做`<a>`才能`width: 100%`让背景继续下一个顶级项目，因此它超出了水平空间。:(

如果有办法使顶级项目链接与最长的子链接一样宽，则问题将得到解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:28:07.420

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:49:10.007

好的，经过大量的试验和错误，我设法让它看起来像我想要的那样。圆形背景与顶级列表元素的锚点相关联，而不是与列表元素本身相关联。我不得不玩弄周围的，两个标签，标签和`float : left`标签的设置才能让它工作（老实说，不知道哪种组合完全可以做到这一点）。`clear: left``div``ul``li``a`

但无论如何，它在这里工作：

[http://jsfiddle.net/TLRSC/11/](http://jsfiddle.net/TLRSC/11/)

# php - 从文本中获取主机的完整 URL 列表

> ID：13326664
> 
> 赞同：0
> 
> 时间：2012-11-10T22:26:44.493
> 
> 标签：php, regex

我收到一段包含几个 url 的文本。我想提取文本中给出的 url 中存在的主机列表。例如：

输入：

```
www.jenniferlopezonline.com www.jenniferlopez.com www.twitter.com/jlo www.myspace.com/jenniferlopez www.youtube.com/jenniferlopez 
```

期望的输出：

```
Array(
[0]=>www.jenniferlopezonline.com
[1]=>www.jenniferlopez.com
[2]=>www.twitter.com
[3]=>www.myspace.com
[4]=>www.youtube.com
); 
```

我试过这段代码：

```
preg_match_all('/([a-z0-9\_\-]+(\.)[a-z0-9\_\.\-]+)/i',$text,$matches);
print_r($matches); 
```

输出有点像这样：

```
Array
(
[0] => Array
(
[0] => www.jenniferlopezonline.com
[1] => www.jenniferlopez.com
[2] => www.twitter.com
[3] => www.myspace.com
[4] => www.youtube.com
)

[1] => Array
(
[0] => www.jenniferlopezonline.com
[1] => www.jenniferlopez.com
[2] => www.twitter.com
[3] => www.myspace.com
[4] => www.youtube.com
)

[2] => Array
(
[0] => .
[1] => .
[2] => .
[3] => .
[4] => .
)
); 
```

将此输出转换为所需的输出将花费我更多的代码，这会使过程变慢。我会批量获取数据，所以我买不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:28:49.037

只需删除不必要的括号。他们正在捕获首先生成额外数组的组（以及引擎中昂贵的东西）：

```
preg_match_all('/[a-z0-9\_\-]+(\.)[a-z0-9\_\.\-]+/i',$text,$matches); 
```

这将为您提供所需的数组 in`$matches[0]`而不是立即 in `$matches`，但无法更改该行为。另外，这已经为您节省了最大的计算开销。分配`$matches[0]`给`$array`可能可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:48:22.697

您也可以尝试[`parse_url()`](http://php.net/manual/en/function.parse-url.php)为您提供 URL 组件的关联数组。

例如：

```
$parts = parse_url('http://twitter.com/jlo');
echo $parts['host']; 
```

将打印`twitter.com`。

确保您的 URL 包含该`http://`方案。

# c - b = 假 vs 如果 (b) b = 假

> ID：13326666
> 
> 赞同：2
> 
> 时间：2012-11-10T22:26:56.687
> 
> 标签：c, if-statement, boolean, switch-statement, case

我正在处理`test.c`文件并尝试计算其中的单行注释。

当我发现两个连续的`/`字符时，我将`slc`触发器设置为`true`.

当我到达行尾时，我需要将`slc`触发器设置为`false`.

当然`\n`字符清楚地表明单行注释的结束。

```
switch (character)
{
    case '\n':
        slc = false; // single-line comment ended
        break; 
```

但是当`\n`找到字符时，`slc`可能是`true`or `false`。

```
switch (character)
{
    case '\n':
        if (slc) slc = false; // single-line comment ended
        break; 
```

这两个代码块有什么区别吗？

我该怎么写？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T22:28:51.443

使用第一种形式。`if`添加一个不影响代码功能的额外检查，仅影响其可读性，是不好的做法。您应该始终以最简洁的方式编写不会混淆代码意图的方式。由于在这种情况下，您的意图始终是变量，因此`false`只需设置`slc = false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:30:34.180

最重要的是成功了，为什么要打扰`if`

# python - 处理 Flask 中的 POST JSON 错误

> ID：13326667
> 
> 赞同：3
> 
> 时间：2012-11-10T22:27:00.777
> 
> 标签：python, http, flask

我正在编写一个 API 并期待 JSON 格式的数据。我的函数运行良好，并将数据存储在 SQLite 中，如下所示：

```
if request.method == 'POST':
    if request.headers['Content-Type'] == 'application/json':
        db = get_db()
        data = json.loads(request.data)
        row = (data['lat'], data['long'], data['address'], data['name'])
        db.execute('INSERT INTO places (lat, long, address, name) values (?, ?, ?, ?)', row)
        db.commit()
        resp = Response(status=200, mimetype='application/json')
        return resp 
```

如果有人发送的 POST 包含不正确的 JSON 字段（缺少`lat`、或） `long`，那么 Flask 会抛出错误。`address``name`

处理这个问题的最佳方法是什么？

我试着做：

```
if not 'lat' in data or if not 'long' in data or .... 
```

但是`data`只是一个字符串而不是字典。所以我有两个问题：

1.  提交的文件是如何被引用的，就好像它是上面的字典（`data['lat']`...）？
2.  处理此错误的适当方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T22:31:03.107

从 JSON 加载数据的那一刻，`data = json.loads(request.data)`你就有了一个 python 结构。

如果当时它*不是*字典，那么无论您发送的请求是否包含正确的 JSON 结构（例如，可能是一个列表）。

在这种情况下，我会使用`try`/ ：`execept`

```
try:
    data = json.loads(request.data)
    row = (data['lat'], data['long'], data['address'], data['name'])
except (ValueError, KeyError, TypeError):
    # Not valid information, bail out and return an error
    return SomeErrorResponse 
```

如果`request.data`不是有效的 JSON，或者`data`不是具有正确键的字典，则会引发异常。列出的三个异常是可能的各种错误模式引发的：

```
>>> import json
>>> json.loads('nonsense')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/json/__init__.py", line 307, in loads
    return _default_decoder.decode(s)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/json/decoder.py", line 319, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/json/decoder.py", line 338, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded
>>> 'ouea'['abc']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: string indices must be integers, not str
>>> [0]['oue']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: list indices must be integers, not str
>>> {}['oue']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'oue' 
```

# c# - 尝试在 C# 中制作 cookie 时的 HttpResponse

> ID：13326668
> 
> 赞同：0
> 
> 时间：2012-11-10T22:27:08.840
> 
> 标签：c#, mysql, httpresponse, httpcontext

错误是：当我尝试使用 Response.Cookies.Add(cookie); 时，当前上下文中不存在名称“响应”；

我不知道我还需要包括什么才能让它工作。我制作了用户可以登录的应用程序，并在他们登录时制作了 cookie，因此他们在重新打开应用程序时不需要再次登录。

```
using MySql.Data.MySqlClient;
using System.Web;

namespace login
{

    public partial class Form1 : Form
    {
        MySqlConnection konekcija;
        string baza = "host=localhost;database=test;user=root;password=";
        MySqlCommand comm;
        MySqlDataReader reader;
        HttpCookie cookie;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            konekcija = new MySqlConnection(baza);
            comm = konekcija.CreateCommand();
            konekcija.Open();

        }

        private void button1_Click(object sender, EventArgs e)
        {

            string user = textBox2.Text.ToString();
            string pass = textBox1.Text.ToString();
            trylogin( user,  pass);

        }

        public void trylogin(string user, string pass)
        {

            if (checkBox1.Checked)
            {
                cookie = new HttpCookie("remember_me");
                cookie["Username"] = textBox2.Text;
                cookie["Expire"] = "365 Days";
                cookie.Expires = DateTime.Now.AddDays(365);
                Response.Cookies.Add(cookie);

            }

            comm.CommandText = "SELECT * FROM korisnici WHERE user='"+user+"' AND pass='"+pass+"'";

            reader = comm.ExecuteReader();
            if (reader.Read() == true)
            {

                reader.Dispose();
            }
            else 
            {
                reader.Dispose();
            }

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            konekcija.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:13:48.403

在网上搜索“remember me in c#”，你会发现很多讨论，即：

[ASP.Net 中的“记住我”](https://stackoverflow.com/questions/11170780/remember-me-in-asp-net)

[http://forums.asp.net/t/1303629.aspx](http://forums.asp.net/t/1303629.aspx)

无论如何，你正在尝试用你的代码做一些非常不安全的事情，小心。

* * *

不管你的“记住我”任务，好吧，你可能想“即时”编写你的 sql 查询，只记得在发送到 sql 引擎之前用替换双引号：

```
user = user.Replace("'", "''"); //Assuming string values are not null here
password = password .Replace("'", "''");
comm.CommandText = "SELECT * FROM korisnici WHERE user='"+ user +"' AND pass='"+ password +"'"; 
```

我强烈建议您学习使用参数（即“... and user=@user”）：它们将为您的代码提供更高的安全性和稳健性，并且您无需使用 Replaces。

另一个好的做法是只提取需要的字段。如果有人以某种方式访问​​此结果，并且您还以明文形式输入了密码字段，则很高兴将其显示出来。如果您不“选择 *”，系统可能仍然不安全，但至少您不会免费提供任何东西：

```
comm.CommandText = "SELECT user_name,login_level,anything_you_really_need FROM korisnici WHERE user=@user AND pass=@pass";
MySqlParameter pUser = new MySqlParameter("@user", user);
MySqlParameter pPass = new MySqlParameter("@pass", password);

comm.SelectCommand.Parameters.Add(pUser);
comm.SelectCommand.Parameters.Add(pPass); 
```

# python - 是否有列出素数的 Python 库？

> ID：13326673
> 
> 赞同：25
> 
> 时间：2012-11-10T22:27:25.160
> 
> 标签：python

是否有一个库函数可以枚举 Python 中的素数（按顺序）？

我发现这个问题[列出 N 以下所有素数的最快方法，](https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n-in-python)但我宁愿使用别人的可靠库而不是自己滚动。我很乐意做`import math; for n in math.primes:`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-02-24T13:38:21.490

[SymPy](http://www.sympy.org/)是另一种选择。它是一个用于符号数学的 Python 库。它为素数提供了几个功能。

```
isprime(n)              # Test if n is a prime number (True) or not (False).

primerange(a, b)        # Generate a list of all prime numbers in the range [a, b).
randprime(a, b)         # Return a random prime number in the range [a, b).
primepi(n)              # Return the number of prime numbers less than or equal to n.

prime(nth)              # Return the nth prime, with the primes indexed as prime(1) = 2\. The nth prime is approximately n*log(n) and can never be larger than 2**n.
prevprime(n, ith=1)     # Return the largest prime smaller than n
nextprime(n)            # Return the ith prime greater than n

sieve.primerange(a, b)  # Generate all prime numbers in the range [a, b), implemented as a dynamically growing sieve of Eratosthenes. 
```

这里有些例子。

```
>>> import sympy
>>> 
>>> sympy.isprime(5)
True
>>> list(sympy.primerange(0, 100))
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]
>>> sympy.randprime(0, 100)
83
>>> sympy.randprime(0, 100)
41
>>> sympy.prime(3)
5
>>> sympy.prevprime(50)
47
>>> sympy.nextprime(50)
53
>>> list(sympy.sieve.primerange(0, 100))
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-11T03:09:27.577

gmpy2库有一个[next_prime](https://pypi.org/project/gmpy2/) () 函数。这个简单的函数将创建一个生成器，该生成器将提供无限的素数：

```
import gmpy2

def primes():
    n = 2
    while True:
        yield n
        n = gmpy2.next_prime(n) 
```

如果您将反复搜索素数，则创建和重用低于合理限制（例如 1,000,000）的所有素数的表会更快。这是另一个使用 gmpy2 和埃拉托色尼筛法创建素数表的示例。primes2() 首先从表中返回素数，然后使用 next_prime()。

```
import gmpy2

def primes2(table=None):

    def sieve(limit):
        sieve_limit = gmpy2.isqrt(limit) + 1
        limit += 1
        bitmap = gmpy2.xmpz(3)
        bitmap[4 : limit : 2] = -1
        for p in bitmap.iter_clear(3, sieve_limit):
            bitmap[p*p : limit : p+p] = -1
        return bitmap

    table_limit=1000000
    if table is None:
        table = sieve(table_limit)

    for n in table.iter_clear(2, table_limit):
        yield n

    n = table_limit
    while True:
        n = gmpy2.next_prime(n)
        yield n 
```

您可以调整 table_limit 以满足您的需要。较大的值将需要更多内存并增加第一次调用 primes() 的启动时间，但重复调用会更快。

注意：我是 gmpy2 的维护者。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-10T09:54:38.673

自从提出这个问题后，我围绕 C++ 库 primesieve 编写了一个 Python 包装器，该包装器继续被 primesieve 维护者采用。[https://github.com/kimwalisch/primesieve-python](https://github.com/kimwalisch/primesieve-python)

```
>>> from primesieve import *

# Generate a list of the primes below 40
>>> generate_primes(40)
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]

# Generate a list of the primes between 100 and 120
>>> generate_primes(100, 120)
[101, 103, 107, 109, 113]

# Generate a list of the first 10 primes
>>> generate_n_primes(10)
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29]

# Generate a list of the first 10 starting at 1000
>>> generate_n_primes(10, 1000)
[1009, 1013, 1019, 1021, 1031, 1033, 1039, 1049, 1051, 1061]

# Get the 10th prime
>>> nth_prime(10)
29

# Count the primes below 10**9
>>> count_primes(10**9)
50847534 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-06T15:45:01.170

我需要同样的东西，并决定创建自己的东西来锻炼很多东西。

这里：[primes.py](https://www.dropbox.com/s/w1w1u1lw145xyac/primes.py?dl=0)

**警告：**我尝试尽可能多地修复它并对所有内容进行检查，但我仍然是业余爱好者，所以我不保证高级或专业检查以及没有错误。使用风险自负。

它将根据需要动态筛选素数，以压缩二进制格式存储它们并从那里检索它们。

最有用的类是“素数”。类本身可以用作生成器、容器、下标和切片。

**警告**：小心迭代无限序列！

```
from primes import primes

for p in primes:  # 2, 3, 5, 7, 11, ...
    pass
primes[0]  # 2
primes[4]  # 11
primes[1:6:2] # primes object, generates 3, 7, 13
7 in primes  # True
8 in primes  # False 
```

'primes 还有一些有用的方法：

```
primes.estimate(1000)  # 7830, real 1000th prime is 7927
primes.check(7)  # True
primes.index_of(11)  # 4 <- primes[4] = 11
primes.count_upto(10) # 4 <- len([2,3,5,7])
primes.sieve(5, 10)  # [5, 7] 
primes.in_range(5, 20, 2)  # primes object, generates 5, 11, 13, 19
primes.factor(12)  # {2:2, 3:1} <- 12 = 2^2 * 3^1
primes.phi(6)  # 6 <- Euler phi function,  number of smaller co-primes 
```

素数对象本身是生成器、容器、可下标和可切片的，但在素数的子列表上：

```
primerange1 = primes(1, None, 2)  # generator
for p in primerange1:  # 3, 7, 13, 19, ...
    pass
primerange1[1]  # 7
primerange1[:4:-1]  # generator: 13, 7, 3
2 in primerange1  # False

primerange2 = primes(6, 0, -2)  # generates 13, 7, 3
len(primerange2)  # 3
reversed(primerange2)  # primes object, generates 3, 7, 13 
```

'plib' 类用于管理库及其设置。

我希望有人会发现它有用，我很高兴收到任何建议或错误报告。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-11T03:38:08.040

没有恒定时间算法来生成下一个素数；这就是为什么大多数库都需要上限的原因。这实际上是数字密码学需要解决的一个巨大问题。RSA 通过选择一个随机数并测试素数直到找到一个素数来选择足够大的素数。

给定一个任意整数`N`，找到下一个素数的唯一方法`N`是迭代`N+1`到未知素数`P`测试素数。

测试素数非常便宜，并且有 python 库可以这样做：[AKS Primes algorithm in Python](https://stackoverflow.com/questions/347811/aks-primes-algorithm-in-python)

给定一个函数`test_prime`，一个无限素数迭代器看起来像：

```
class IterPrimes(object):
    def __init__(self,n=1):
        self.n=n

    def __iter__(self):
        return self

    def next(self):
        n = self.n
        while not test_prime(n):
            n += 1
        self.n = n+1
        return n 
```

您可以使用许多启发式方法来加快该过程。例如，跳过偶数或可被 2、3、5、7、11、13 整除的数字等。

# jquery-ui - 我们可以使用 jQuery UI 自动完成来填充现有的选择框吗？

> ID：13326678
> 
> 赞同：0
> 
> 时间：2012-11-10T22:27:51.210
> 
> 标签：jquery-ui, select, autocomplete, filtering

有没有办法使用[jQuery UI](http://en.wikipedia.org/wiki/JQuery_UI)自动完成不打开建议下拉但填充现有的选择框？

可以使用类似的解决方法

[http://www.barelyfitz.com/projects/filterlist/](http://www.barelyfitz.com/projects/filterlist/)

或者

[http://andrew.hedges.name/experiments/narrowing/](http://andrew.hedges.name/experiments/narrowing/)

但是我们可以使用 jQuery UI 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:48:29.063

您可以使用渲染器检索过滤后的数据，并对它们做任何您想做的事情

```
$('#myAutocomplete').data( "autocomplete" )._renderItem = function( ul, item ) {
    $('#myCustomElement').append( "<a>" + item.label + "<br>" + item.desc + "</a>" )

    //Cancel the suggestion rendering
    //return void since 1.9 else just return false
    return $('');
}; 
```

灵感来自[http://jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)

**编辑**

添加小提琴解释如何避免建议列表：http: [//jsfiddle.net/GF5c4/](http://jsfiddle.net/GF5c4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:30:41.713

经过几个小时后，我终于弄清楚了。在重新挖掘自动完成的数据绑定作为 Bouillou 重定向我之后，我做了这些以实现我的目标。

1.  首先，我通过添加我的搜索功能来替换搜索功能，以添加用于清除所有先前选择框内容的行。这是我的新搜索功能：

    ```
     search: function( event, ui ){
             $("#links_list option").remove(); // This line is added
             var str = '';
             for(var attr in event){
                 str += attr.toString() + '\n';
             }
             console.log(str);

             var str2 = '';
             for(var attr in ui){
                 str2 += attr.toString() + '\n';
             }
             console.log(str2);
         }, 
    ```

2.  然后我调整了`.data`绑定和`_renderItem`. `return $('');`正在破坏该过程，并且仅返回一个带有空建议框的建议。（我也不想看到。）

然后我把原来`return(.....)`的in`_renderItem`函数改成这样：

```
 return $('<option value="'+item.value+'">'+item.label+'</option>')
        .appendTo("#links_list"); 
```

您可以在下面看到示例屏幕结果。

![结果](../Images/242165a3e1063d1d3d44a8a11e389c05.png)

# jsf - p:selectOneMenu 没有在 bean 中设置值

> ID：13326680
> 
> 赞同：16
> 
> 时间：2012-11-10T22:28:06.760
> 
> 标签：jsf, primefaces, selectonemenu, updatemodel

快速提问。在使用 SelectOneMenu 时，我以前没有发生过这种情况。这是我的代码。

```
<h:outputLabel for="listaRegiones" value="Región: " />
<p:selectOneMenu id="listaRegiones" value="#{nuevaProvincia.regionSelect}" required="true">
    <f:selectItems value="#{nuevaProvincia.regiones}" />
</p:selectOneMenu>
<p:message for="listaRegiones" /> 
```

这是我的后盾。

```
@ManagedBean(name="nuevaProvincia")
@ViewScoped
public class nuevaProvincia implements Serializable {

    public static final long serialVersionUID = 1L;

    public nuevaProvincia() throws DAOException {
        this.provincia = new Provincia();
        this.regiones = new ArrayList<SelectItem>();
        ArrayList<Region> regs = new ArrayList<Region>();
        try
        {
            regs = Region.obtenerRegiones();
        }
        catch(DAOException e)
        {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_FATAL, "Hubo un error: "+e.getMessage(), "Hubo un error: "+e.getMessage()));
        }
        if(regs.size()>0)
        {
            for(Region r : regs)
            {
                SelectItem item = new SelectItem(r.getCodigo(), r.getNombre());
                regiones.add(item);
            }
            this.regionSelect = regs.get(0).getCodigo();
        }
        else
            this.regionSelect = "";
    }

    public void verificaProvincia() throws DAOException {
        provincia.getRegion().setCodigo(regionSelect);
        try
        {
            if(this.provincia.estaCreado())
                FacesContext.getCurrentInstance().addMessage("frmIngProvincia:provCodigo", new FacesMessage(FacesMessage.SEVERITY_WARN, "El código de provincia ingresado ya existe.", "El código de provincia ingresado ya existe."));
            else
                FacesContext.getCurrentInstance().addMessage("frmIngProvincia:provCodigo", new FacesMessage(FacesMessage.SEVERITY_INFO, "El código de provincia ingresado no existe.", "El código de provincia ingresado no existe."));
        }
        catch(DAOException e)
        {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_FATAL, "Hubo un error: "+e.getMessage(), "Hubo un error: "+e.getMessage()));
        }
    }

    public void insertaProvincia() throws DAOException {
        try
        {
            provincia.getRegion().setCodigo(regionSelect);
            provincia.guardar();
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Provincia ingresada con éxito", "Provincia ingresada con éxito"));
        }
        catch(DAOException e)
        {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Hubo un error: "+e.getMessage(), "Hubo un error: "+e.getMessage()));
            throw e;
        }
    }

    //Getters and setters for everything        

    //Privados
    private Provincia provincia;
    private String regionSelect;
    private List<SelectItem> regiones;
} 
```

问题如下：每当我更改我的 selectonemenu 中的值时，没有设置支持 bean 中的值（尽管我确实有一个 setter for `regionSelect`）。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-11T00:58:01.613

我发现了错误，它是......非常奇怪和间接的。我在 SelectOneMenu 中添加了以下行：

```
<p:ajax event="change" update="@this" /> 
```

现在它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T11:03:37.747

```
<p:selectOneMenu id="listaRegiones" value="#{nuevaProvincia.regionSelect}" required="true">
    <f:selectItems value="#{nuevaProvincia.regiones}" />
</p:selectOneMenu> 
```

应该

```
<p:selectOneMenu id="listaRegiones" value="#{nuevaProvincia.regionSelect}" required="true">
    <f:selectItems value="#{nuevaProvincia.regiones}" var="region" 
      itemValue = "#{region}"/>
</p:selectOneMenu> 
```

这就是为什么你必须在有变化时调用 ajax 来更新。您永远不会设置值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-11T03:01:41.553

如果您正在处理值中的对象，请检查 equals() 函数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-10T17:17:26.143

当我遇到这个问题时，我发现这是因为`@ViewScoped`. 改为使用`SessionScoped`效果很好。

一件有趣的事情是，在另一个项目中`ViewScoped`，它起作用了。我无法解释。

# vb.net - 以 [hh]:mm 格式从普通数字格式化为时间

> ID：13326686
> 
> 赞同：1
> 
> 时间：2012-11-10T22:28:51.867
> 
> 标签：vb.net, tsql, sql-server-2000, excel-2007

**我通常在Excel**中有一种很好的方法，可以使用简单的单元格自定义格式**[HH]:mm**将普通数字格式转换为小时和分钟格式，结果如下：

![excel表](../Images/f8ef450424451d7e9050aa24228d8fe2.png)

现在我似乎无法在 Visual Basic 2010 或 sql 2000 中找到类似的方法，所以任何人都知道这样做的方法。提前致谢。

**注意：****[** HH **]** :mm 中的括号是为了使小时数在每 24 小时圈后不四舍五入为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:46:31.853

听起来您想要一个[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)并使用[FromMinutes](http://msdn.microsoft.com/en-us/library/system.timespan.fromminutes.aspx)方法构造它。

然后，您可以使用或其中一个重载来格式化`TimeSpan`显示。`.ToString()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:44:54.780

试试这个：

```
Public Function FormatHoursAndMinutes(totalMinutes As Integer) As String
    Dim span As TimeSpan = TimeSpan.FromMinutes(totalMinutes)
    Return String.Format("{0:00}:{1:00}", CInt(Math.Floor(span.TotalHours)), span.Minutes)
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-25T04:21:30.190

如果您想显示超过 24 小时。每次您想将 Interger 转换为 hh:mm 时，是否真的需要创建一个 TimeSpan 对象？

```
Public Function MinutesTohhmm(ByVal mins As Integer) As String

    Dim hrs As Integer = mins \ 60
    Dim mnts As Integer = mins Mod 60

    Dim hhmmStr As String = IIF(hrs < 10, "0", "") & hrs & ":" & IIF(mnts < 10, "0", "") & mnts

    Return hhmmStr 

End Function 
```

# php - PHP 将 file_get_contents() 数据传递给函数

> ID：13326690
> 
> 赞同：-5
> 
> 时间：2012-11-10T22:29:09.910
> 
> 标签：php, file-get-contents

是否可以将`file_get_contents()`数据传递给其他函数？请参阅下文以获得更好的理解。

```
function getURL($search){
    $url      = "http://www.example.com?search=".$search;
    $data     = file_get_contents($url);
    $formated = formatData($data);
    return $formated;
}
function formatData($data){
   $format = $data;
   //some formating here
   return $format;
} 
```

这是我目前正在尝试做的事情，如果我想这样做，我必须`file_get_contents()`再次调用该函数，但这会减慢应用程序的速度，因为它两次调用同一站点。

你能帮忙的话，我会很高兴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:37:57.997

file_get_contents() 返回一个字符串 (http://php.net/manual/en/function.file-get-contents.php)。您可以将字符串传递给另一个函数（就像在您的示例中一样）。那不工作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:40:28.757

尝试使用 cURL 而不是 file_get_contents() 会快一点。

[卷曲手册](http://uk3.php.net/manual/en/book.curl.php)

# excel - 无法获取范围类错误的 findnext 属性

> ID：13326692
> 
> 赞同：2
> 
> 时间：2012-11-10T22:29:18.790
> 
> 标签：excel, vba

我正在尝试解析 Excel 2007 中的报告。它基本上是会计费用异常的报告。该报告的部分带有每种异常类型的标题。从报告中删除了某些类型的异常。我正在使用 Do While 循环来查找每个标题，如果需要删除该部分，我会这样做。如果不需要删除任何内容，则代码可以正常工作，但在删除部分后，我会收到“无法获取 Range 类的 FindNext 属性”错误。这是我的代码：

```
Sub merge_All_Section_Headers()
' Description:
' The next portion macro will find and format the Tranaction Source rows in the file
' by checking each row in column A for the following text: TRANSA.  If a cell
' has this text in it, it is selected and a function called merge_text_cells
' is run, which performs concatenation of each Transaction Source header row and
' deletes the text from the rest of the cells with broken up text.
'
lastRow = ActiveSheet.UsedRange.Rows.Count + 1
Range(lastRow & ":" & lastRow).Delete

ActiveSheet.PageSetup.Orientation = xlLandscape

With ActiveSheet.Range("A:A")
   Dim searchString As String

   searchString = "TRANSA"

   'The following sets stringFound to either true or false based on whether or not
   'the searchString (TRANSA) is found or not):
   Set stringFound = .Find(searchString, LookIn:=xlValues, lookat:=xlPart)

   If Not stringFound Is Nothing Then

      firstLocation = stringFound.Address

      Do
         stringFound.Select

         lastFound = stringFound.Address

         merge_Text_Cells

         If ((InStr(ActiveCell.Text, "CHARGE FILER") = 0) And _
             (InStr(ActiveCell.Text, "CREDIT FILER") = 0) And _
             (InStr(ActiveCell.Text, "PA MIDNIGHT FINAL") = 0) And _
             (InStr(ActiveCell.Text, "BAD DEBT TURNOVER") = 0)) Then

            section_Del 'Function that deletes unwanted sections

         End If

         Range(lastFound).Select

         Set stringFound = .FindNext(stringFound)

       Loop While Not stringFound Is Nothing And stringFound.Address <> firstLocation

     End If

End With
  '-----------------------------------------------------------------------------------
  'BELOW CONTAINS THE CODE THAT WORKS:
   Sub merge_All_Section_Headers()
   ' Description:
   ' The next portion macro will find and format the Tranaction Source rows in the file
   ' by checking each row in column A for the following text: TRANSA.  If a cell
   ' has this text in it, it is selected and a function called merge_text_cells
   ' is run, which performs concatenation of each Transaction Source header row and deletes
   ' the text from the rest of the cells with broken up text.
   '
   lastRow = ActiveSheet.UsedRange.Rows.Count + 1
   Range(lastRow & ":" & lastRow).Delete

   ActiveSheet.PageSetup.Orientation = xlLandscape

   With ActiveSheet.Range("A:A")
       Dim searchString As String
       Dim arrRangesToDelete(0 To 9) As Range

       searchString = "TRANSA"

       'The following sets stringFound to either true or false based on whether or not
       'the searchString (TRANSA) is found or not):
        Set stringFound = .Find(searchString, LookIn:=xlValues, lookat:=xlPart)

        If Not stringFound Is Nothing Then

           firstLocation = stringFound.Address

           counter = 0

           Do

              stringFound.Select

              lastFound = stringFound.Address

              merge_Text_Cells

              If ((InStr(ActiveCell.Text, "CHARGE FILER") = 0) And _
                  (InStr(ActiveCell.Text, "CREDIT FILER") = 0) And _
                  (InStr(ActiveCell.Text, "PA MIDNIGHT FINAL") = 0) And _
                  (InStr(ActiveCell.Text, "BAD DEBT TURNOVER") = 0)) Then

                  firstRowOfSection = ActiveCell.Row

                  lastRowOfSection = (ActiveSheet.Range(ActiveCell.Offset(2, 1).Address).End(xlDown).Row + 2)

                  Set arrRangesToDelete(counter) = Range(firstRowOfSection & ":" & lastRowOfSection)

                  counter = counter + 1

              End If

              Range(lastFound).Select

              Set stringFound = .FindNext(stringFound)

           Loop While Not stringFound Is Nothing And stringFound.Address <> firstLocation

        End If

   End With

   For i = 0 To counter - 1

       arrRangesToDelete(i).Delete

   Next i

   Range(firstLocation).Select

End Sub 
```

因此，该数组可以正常工作并完成工作，而不会破坏任何对象。我还是想试试 Union 方法，看看能不能让它工作，这也很酷！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:27:28.920

您的代码在范围对象`StrFound`已被破坏时翻倒 - 所以`Is Nothing`当您申请时

bu Juri 提出的错误处理有几个替代方案（如果你确实使用了，你应该立即重置）

*   将所有要删除的部分添加到新范围，`Union`然后在循环外单次删除此范围。我的文章中有一个示例，在我的文章[使用 Find 和 FindNext 有效地删除任何包含特定文本的行](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_2919-Using-Find-and-FindNext-to-efficiently-delete-any-rows-that-contain-specific-text.html)
*   将删除代码移到它之后`.FindNext`而不是之前，并在运行代码`stringfound`之前添加一个简单的测试以查看是否存在`Section_Del`

**联合方法**

```
Sub UnionAPp()
Dim c As Range
Dim rng1 As Range
With Worksheets(1).Range("a1:a500")
    Set c = .Find(2, LookIn:=xlValues)
    If Not c Is Nothing Then
        firstaddress = c.Address
        Set rng1 = c
        Do
            Set c = .FindNext(c)
            Set rng1 = Union(rng1, c)
        Loop While c.Address <> firstaddress
    End If
    MsgBox "Your working range is " & rng1.Address
End With
End Sub 
```

所以你可以修改标准的 Excel 帮助`FindNext`from

**标准**

```
Sub TestInit()
With Worksheets(1).Range("a1:a500")
    Set c = .Find(2, LookIn:=xlValues)
    If Not c Is Nothing Then
        firstAddress = c.Address
        Do
            c.Value = 5
            Set c = .FindNext(c)
        Loop While Not c Is Nothing And c.Address <> firstAddress
    End If
End With
End Sub 
```

**新的**

```
Sub TestA()
With Worksheets(1).Range("a1:a500")
    Set c = .Find(2, LookIn:=xlValues)
    If Not c Is Nothing Then
        firstAddress = c.Address
        Do
            c.Value = 5
            Set c = .FindNext(c)
            If Not c Is Nothing Then c.Clear
            'your code: If Not StrFound Is Nothing Then Call Section_Del
        Loop While Not c Is Nothing
    End If
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:51:08.740

如果所有发生的事件都被删除，`Findnext`应该给出一个错误。

一条线

```
On Error Goto ExitLoop 
```

应该加在前面`Set stringFound = .FindNext(stringFound)`。

一条线

```
ExitLoop: 
```

应该在后面加上`Loop While...`

# scheme - 球拍-大写

> ID：13326694
> 
> 赞同：0
> 
> 时间：2012-11-10T22:29:48.177
> 
> 标签：scheme, racket

```
; defining the procedure char_toupper to convert a lower case character to upper case
(define char_toupper (lambda (myChar)
                       ; defining x as the ASCII value of myChar
                       (define x (char->integer myChar))
                       ; defining y as x-32
                       (define y (- x 32))
                       ; if statement for while x is less than 91 (already uppercase)
                       (if (< x 91)
                            ; if it is already uppercase, just display it
                            (display myChar)
                            ; otherwise, if x is greater than 96 (lowercase)
                            (if (> x 96)
                                ; then display the character equivalent to the ASCII value given by y
                                (display (integer->char y))))))

(define string_toupper (lambda (myString newString i)       
                         (if (< i (string-length myString))
                             (string_toupper myString (string-append newString (char_toupper (string-ref myString i))) (+ 1 i)))

                         (display newString)))
(string_toupper (read) "" 0) 
```

这会将每个字符转换为大写，并显示它。但我不断收到错误，我可以找到它。任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:43:26.367

在 Racket 中，您必须写`when`而不是`if`在单臂情况下。

即，`if`将以下表达式中的 更改为`when`。

```
(if (> x 96)
    ; then display the character equivalent to the ASCII value given by y
    (display (integer->char y))) 
```

还要注意[string-upcase](http://docs.racket-lang.org/reference/strings.html?q=upcase#%28def._%28%28quote._~23~25kernel%29._string-upcase%29%29)是内置的。

# javascript - 使用 ACS 的推送通知不起作用

> ID：13326696
> 
> 赞同：2
> 
> 时间：2012-11-10T22:30:12.047
> 
> 标签：javascript, mobile, titanium, appcelerator, push-notification

嗨，我正在使用 ACS 实现推送通知。当我单击注册推送通知按钮时，它会出现以下错误。无法注册推送！com.appcelerator.cloud.push.PushServiceException：无效的令牌请求。消息：找不到正确的 Android 配置，请提供有效的令牌

```
Titanium.UI.setBackgroundColor('#000');

  var win = Ti.UI.createWindow({
  backgroundColor:'#ccc',
title:'Android Cloud Push Notification'
   })

   var CloudPush = require('ti.cloudpush');
CloudPush.debug = true;
CloudPush.enabled = true;
CloudPush.showTrayNotificationsWhenFocused = true;
CloudPush.focusAppOnPush = false;

 var deviceToken;

 var Cloud = require('ti.cloud');
  Cloud.debug = true;

  var submit = Ti.UI.createButton({
 title : 'Register For Push Notification',
  color:'#000',
  height : 53,
  width : 200,
     top : 100,
  });

    win.add(submit);

    submit.addEventListener('click', function(e) {
CloudPush.retrieveDeviceToken({
        success: function deviceTokenSuccess(e) {
            alert('Device Token: ' + e.deviceToken);
            deviceToken = e.deviceToken
            loginDefault();
        },
        error: function deviceTokenError(e) {
            alert('Failed to register for push! ' + e.error);
           }
  });
});

     function loginDefault(e){
 //Create a Default User in Cloud Console, and login
 Cloud.Users.login({
login: 'push123',
password: 'push123'
}, function (e) {
if (e.success) {
    alert("login success");
    defaultSubscribe();
  } else {
    alert('Error: ' +((e.error && e.message) || JSON.stringify(e)));
    }
});
  }

   function defaultSubscribe(){
        Cloud.PushNotifications.subscribe({
            channel: 'alert',
            device_token: deviceToken,
            type: 'android'
        }, function (e){
            if (e.success) {
               alert('Subscribed for Push Notification!');
            }else{
                alert('Error:' +((e.error && e.message) || JSON.stringify(e)));
            }
        });
 }

 CloudPush.addEventListener('callback', function (evt) {
 //alert(evt);
 //alert(evt.payload);
     );

   CloudPush.addEventListener('trayClickLaunchedApp', function (evt) {
  Ti.API.info('Tray Click Launched App (app was not running)');
 //alert('Tray Click Launched App (app was not running');
 });

  CloudPush.addEventListener('trayClickFocusedApp', function (evt) {
  Ti.API.info('Tray Click Focused App (app was already running)');
 //alert('Tray Click Focused App (app was already running)');
   });

win.open(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:24:55.157

试试下面的链接

[http://www.titaniumtutorial.com/2012/06/appcelerator-cloud-push-notification-in.html?m=1](http://www.titaniumtutorial.com/2012/06/appcelerator-cloud-push-notification-in.html?m=1)

如果它没有解决您的问题并且您正在使用 wifi，请将其从 wifi 更改并在 3G 或 GPRS 中尝试，注册推送 wifi 时出现问题

# c# - 如何将值插入到 DataTable C# 中的特定行

> ID：13326703
> 
> 赞同：0
> 
> 时间：2012-11-10T22:30:41.893
> 
> 标签：c#, ado.net

请帮助我使用代码片段向我的 DataTable 中已存在的特定行插入一个值。

```
DataRow myrow;
for (i = 1; i <= cnt2+1; i++)
{
    myrow = finalRprt.NewRow();
    for (j = 1; j <= lstSubName.Count + 4; j++) 
    {
       myrow[j] = "-";
    }
    finalRprt.Rows.Add(myrow);
} 
```

现在我想根据条件为特定行添加一个值。我能怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:37:18.733

这个问题很模糊。但是您可以例如使用[`DataRow.SetField`](http://msdn.microsoft.com/en-us/library/bb353039%28v=vs.90%29.aspx)扩展方法来设置 a 的字段`DataRow`。

您可以使用索引器来获取 a 的行`DataTable`或使用`Linq-To-DataTable`来查找您正在搜索的行。

```
DataRow row = table.AsEnumerable()
                   .Where(r => r.Field<int>("ID")==ID)
                   .Single();
row.SetField("Name", newName); 
```

[通用字段和 SetField 方法（LINQ to DataSet）](http://msdn.microsoft.com/en-us/library/bb386916.aspx)

现在您需要[`DataAdapter`](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)更新您的数据库（如果需要）。

# java - Hibernate 4.1.8.FINAL 支持 Transaction: yes or no？

> ID：13326714
> 
> 赞同：1
> 
> 时间：2012-11-10T22:32:41.420
> 
> 标签：java, mysql, hibernate

我正在使用 Hibernate (4.1.8.FINAL)、MySQL (InnoDB)，并且在保存多个实体时遇到问题。

根据 Hibernate 文档[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch15.html](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch15.html)应该支持批处理，但我得到以下异常：

```
org.hibernate.TransactionException: nested transactions not supported
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:152)
    at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1395)
    ... 
```

这是我编写的代码（Class EntryDaoImpl.java）：

```
@Transaction
public void saveAll(final Collection<T> entities) {
    if (CollectionUtils.isEmpty(entities)) {
        return;
    }
    final Session session = this.sessionFactory.getCurrentSession();
    Transaction tx = null;
    try {
        tx = session.beginTransaction();
        for (final T entity : entities) {
            session.saveOrUpdate(entity);
        }
        tx.commit();
    } catch (final RuntimeException e) {
        if (tx != null) {
            tx.rollback();
        }
        throw e;
    } finally {
        session.flush();
        session.clear();
    }
} 
```

这是 JUnit 方法：

```
@Test
public void deleteAddress() {
    Entry entry;
    // Entry 2 has three addresses (delete all those)
    entry = this.entryDao.findById(2);
    Assert.assertEquals(3, entry.getAddresses().size());
    entry.setAddresses(null);
    this.entryDao.saveAll(Collections.singleton(entry));
} 
```

如果只更新一个实体，也会发生异常。我也尝试使用 openSession() 而不是 getCurrentSession() 但异常如下：

```
org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions
    at org.hibernate.collection.internal.AbstractPersistentCollection.setCurrentSession(AbstractPersistentCollection.java:638)
    at org.hibernate.event.internal.OnUpdateVisitor.processCollection(OnUpdateVisitor.java:65) 
```

如果我没有事务逻辑，那么它就可以工作。在使用搜索引擎进行研究期间，我看到许多开发人员告诉 Hibernate 根本不支持事务。不确定此声明是否已过时。*使困惑*

所以我的问题是：Hibernate 是否支持事务（如文档中所述）？和/或你能告诉我我的代码有什么问题吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:45:58.770

您正在使用声明性事务 (@Transaction) 以及程序性事务。

```
tx = session.beginTransaction();
for (final T entity : entities) {
    session.saveOrUpdate(entity);
}
tx.commit(); 
```

由于您在同一代码中使用这两个事务，Hibernate 抱怨

```
org.hibernate.TransactionException: nested transactions not supported 
```

删除您`Transaction`班级顶部的注释，它应该可以工作，否则删除您的`beginTransaction`and `commit`。

希望能帮助到你。

# resources - RenderTargetView 到 ShaderResourceView

> ID：13326715
> 
> 赞同：1
> 
> 时间：2012-11-10T22:32:45.693
> 
> 标签：resources, directx, shader, directx-11, rendertarget

我来自 XNA，在那里我可以轻松创建渲染目标并将其用作简单的“Texture2D”。我创建了一个 ID3D11RenderTargetView 对象和一个 ID3D11ShaderResourceView 对象。我将精灵绘制到渲染目标，然后想将其用作 ShaderResourceView 以将其发送到着色器。

我尝试查询渲染目标的界面，例如：

```
ID3D11ShaderResourceView *resource= NULL;
renderTargetobject->QueryInterface<ID3D11ShaderResourceView >(&resource); 
```

上面的代码不会为“资源”对象生成任何可用的值，我想每帧都将其发送到我的着色器（我正在尝试做一个简单的反射）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T08:55:14.157

好的，终于想通了。事实证明，只遵循教程会比尝试从 XNA 移植我的代码更好。我想通过以某种方式将渲染目标资源“复制”到每一帧的着色器资源视图来做到这一点，但事实证明，如果它们都是在渲染之前设置的，它们只需要链接到同一个纹理 2D 资源，渲染目标将自动写入链接的纹理，shaderresourceview 会在调用时自动查找它。

所以代码，如果有人关心的话：

```
//global declarations:
ID3D11Device*           g_pd3dDevice;
ID3D11DeviceContext*    g_pImmediateContext;

ID3D11Texture2D* refTex;
ID3D11RenderTargetView* refRen;
ID3D11ShaderResourceView* refRes;

void SetUp()
{
D3D11_TEXTURE2D_DESC textureDesc;
ZeroMemory(&textureDesc, sizeof(textureDesc));

textureDesc.Width = SCREENWIDTH;
textureDesc.Height = SCREENHEIGHT;
textureDesc.MipLevels = 1;
textureDesc.ArraySize = 1;
textureDesc.Format = DXGI_FORMAT_R32G32B32A32_FLOAT;
textureDesc.SampleDesc.Count = 1;
textureDesc.Usage = D3D11_USAGE_DEFAULT;
textureDesc.BindFlags = D3D11_BIND_RENDER_TARGET | D3D11_BIND_SHADER_RESOURCE;
textureDesc.CPUAccessFlags = 0;
textureDesc.MiscFlags = 0;

g_pd3dDevice->CreateTexture2D(&textureDesc, NULL, &refTex);

D3D11_RENDER_TARGET_VIEW_DESC renderTargetViewDesc;
renderTargetViewDesc.Format = DXGI_FORMAT_R32G32B32A32_FLOAT;
renderTargetViewDesc.ViewDimension = D3D11_RTV_DIMENSION_TEXTURE2D;
renderTargetViewDesc.Texture2D.MipSlice = 0;

g_pd3dDevice->CreateRenderTargetView(refTex, &renderTargetViewDesc, &refRen);

D3D11_SHADER_RESOURCE_VIEW_DESC shaderResourceViewDesc;
shaderResourceViewDesc.Format = DXGI_FORMAT_R32G32B32A32_FLOAT;
shaderResourceViewDesc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURE2D;
shaderResourceViewDesc.Texture2D.MostDetailedMip = 0;
shaderResourceViewDesc.Texture2D.MipLevels = 1;

g_pd3dDevice->CreateShaderResourceView(refTex, &shaderResourceViewDesc, &refRes);
}

void DrawToTexture()
{
g_pImmediateContext->OMSetRenderTargets(1, &refRen,NULL);
float ClearColor[4] = { 0.0f, 0.0f, 0.0f, 1.0f };
g_pImmediateContext->ClearRenderTargetView(refRen, ClearColor);

//then draw what you want to the target

} 
```

# c++ - 我应该如何共享数据结构

> ID：13326718
> 
> 赞同：3
> 
> 时间：2012-11-10T22:33:32.073
> 
> 标签：c++, oop

> Bjarne Stroustrup：我的经验法则是，当且仅当您可以考虑类的不变量时，您应该拥有一个具有接口和隐藏表示的真实类。

在当前的项目中，我有一个名为 Widget 的基类。它具有用于 x、y、宽度、高度（基本上是一个 rect 数据结构）的私有变量以及每个变量的公共 getter 和 setter。除了成为一个愚蠢的变量持有者之外，他们对班级没有任何意义。根据上面 Bjarnes 的评论，我摆脱了这个类，但我想知道我应该如何与需要它们的子类共享这个数据结构。我应该将它们单独包含为每个班级的成员吗？将它们放在 Widget 命名空间中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:38:19.260

您可以使用结构

例如

```
struct widget
{
    int x;
    int y;
    int w;
    int h;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:46:04.430

我不确定我是否完全同意 Bjarne（除了不变量之外，更改表示的能力可能是一个重要的问题，尽管在这种情况下，甚至将实际定义移动到[PImpl](http://en.wikipedia.org/wiki/Opaque_pointer)而不仅仅是制作它可能很重要`private`）。`public`但是，如果不担心更改的成员和/或不变量，您可以将变量分组到可以访问其成员的结构中。如果成员确实只是集中在一起而没有语义含义，您甚至可以只使用 a `std::tuple`：

```
typedef std::tuple<int, int, double, double> widget; 
```

...尽管在这种情况下，不同的成员确实具有访问功能-出于与不变量和前向兼容性无关的技术原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:05:51.113

我认为您在那里严重误读了 Stroustrup，让我强调一下我认为重要的部分：

> 我的经验法则是，当且仅当您可以考虑该类的不变量时，您应该拥有一个**具有接口和隐藏表示的****真实**类。

 **我相信他并不是在谈论在这种情况下不使用*关键字`class`*，而是指的是*逻辑类*（或“真实类”）。差异相当显着。一个类^(（注意没有降价）)是一个具有自包含接口和可能隐藏实现的数据结构（参见 pimpl idiom）。这意味着，（逻辑）类的工作对用户是不可见的，并且类对象通过成员函数和自由函数进行通信。在数据抽象方面，有时被解释为“不要从外部访问成员变量”，但这只是核心思想的一个较浅的措辞。

您仍然应该像您所做的那样（或者像[Commander](https://stackoverflow.com/a/13326750/430766)或[Dietmar Kühl](https://stackoverflow.com/a/13326796/430766)建议的那样）对异构数据集合使用结构化设计。用不使用`class`或`struct`关键字是个人喜好，但我倾向于使用`struct`关键字所以很明显这种类型*不是*逻辑意义上的类，而只是属于一起的一些数据。我发现使用适当的 struct 比 an 更可取，`std::tuple`因为您可以命名所有成员，赋予它们含义，而不是通过索引访问它们并且必须记住每个索引的含义。此外，`struct`将来修改和扩展 a 更容易。**

# php - 在 URL 中隐藏段，但允许代码访问隐藏段

> ID：13326719
> 
> 赞同：1
> 
> 时间：2012-11-10T22:33:37.417
> 
> 标签：php, codeigniter, expressionengine

我正在使用[Structure](http://buildwithstructure.com/)并有一个“Supernav”页面，其中包含多个子项，这些子项将构成该站点的 supernav。我认为这将是一种让客户通过一个位置访问网站上所有页面的好方法：结构 UI。

![在此处输入图像描述](../Images/1e30b0c4b8443ed07dc78531df54a40c.png)

如果您访问“supernav”组中的任何子页面，URL 如下所示：

`http://website.com/supernav/prospective-students`

我希望能够删除`supernav`这些 URL 的片段，以便它最终成为：

`http://website.com/prospective-students`

`supernav`当您将鼠标悬停在页面上的这些链接上时，我什至不希望该段出现在状态栏中。这可能吗？使用 CodeIgniter，这归结为一个简单的路由规则，但我不知道这是否是 EE 的一个选项。

感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:58:25.197

这可能是事后的事，但您是否考虑过在这种情况下使用[NavEE并替换 Structure 批发？](http://booyant.com/navee)您可以构建多个导航内容，而不必“隐藏”内容。我喜欢结构，但您必须使用 .htaccess 才能获得您想要的结果，以及一些[路由](http://devot-ee.com/add-ons/freeway) [存储](http://devot-ee.com/add-ons/stash)/嵌入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:00:00.597

您也可以为此使用[免费赠品。](http://devot-ee.com/add-ons/freebie)

> 控制您的 URL — 定义您希望 EE 完全忽略的段。使用“免费赠品”段来触发模板行为，在结构中构建动态档案，或者只是构建特殊的 URL 用于分析目的。Freebie 允许您以强大、灵活的方式使用段，而无需处理严格的 URL 解析（如 Structure 的）。

您只需将*supernav*添加到免费赠品设置（在免费赠品部分下），然后可以忽略 supernav。如果您仍然需要运行 supernav, 的条件`{segment_1}`，您可以使用`{freebie_1}`。在 Devot:ee 上的附加组件文档和它的创建者的[这篇文章中阅读更多相关信息。](http://viget.com/inspire/freebie)

话虽如此，如果您可以使用普通结构标签输出导航并让它显示 supernav 的所有子项，而 supernav 本身仍在 URL 中，我不肯定。要解决这个问题，您需要对导航进行硬编码（或使用 NavEE 或分类法。）

我希望有人可以验证 Structure 是否有标签/参数，这解决了这个问题，因为我不太确定这两种方式。

# c - -lm 不在生成文件中链接数学库

> ID：13326723
> 
> 赞同：9
> 
> 时间：2012-11-10T22:34:13.647
> 
> 标签：c, unix, gcc, makefile

我知道这个错误已经被打死了，但我似乎无法让它发挥作用。我在下面链接了我的makefile：

```
all: gensine info cs229towav

encode.o: encode.h encode.c
    gcc -c encode.c

write.o: write.c write.h
    gcc -c write.c

gensine.o: encode.c gensine.h gensine.c helper.c write.c
    gcc -c gensine.c -lm

helper.o: helper.c helper.h
    gcc -c helper.c

read.o: read.h read.c
    gcc -c read.c

info.o:read.c info.h info.c decode.c
    gcc -c info.c

decode.o: decode.c decode.h helper.c
    gcc -c decode.c

cs229towav.o: write.c read.c cs229towav.c cs229towav.h helper.c decode.c encode.c
    gcc -c cs229towav.c -lm

gensine: encode.o gensine.o write.o helper.o
    gcc -o gensine encode.o gensine.o write.o helper.o -lm

info: read.o info.o decode.o helper.o
    gcc read.o info.o decode.o helper.o

cs229towav: write.o read.o cs229towav.o decode.o encode.o helper.o
    gcc -o write.o read.o cs229towav.o decode.o encode.o helper.o -lm

Clean:
    rm -rf *o gensine info cs229towav 
```

当我运行诸如“make gensine”之类的命令时，会返回以下结果：

```
>cc gensine.c -o gensine
/tmp/ccojm09X.o: In function `encodeCsFormat':
gensine.c:(.text+0x4b1): undefined reference to `sin'
/tmp/ccojm09X.o: In function `encodeWavFormat':
gensine.c:(.text+0xa39): undefined reference to `sin'
collect2: error: ld returned 1 exit status 
```

读完这篇文章后，说的是对 sin 的未定义引用，它在数学库中。列出的那些函数在“gensine.c”文件中的“encode.c”文件中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T23:04:30.910

makefile 中的命令：

```
gcc -o gensine encode.o gensine.o write.o helper.o -lm 
```

与您最后打印的命令不匹配：

```
cc gensine.c -o gensine 
```

另请注意，没有`-lm`

请注意，它`make`知道如何制作目标文件，因此您不需要大部分 makefile。试试这个（记得用 TAB 缩进）：

```
.PHONY : all clean
all = gensine info
CFLAGS =-Wall
LIBS = -lm

gensine: encode.o gensine.o write.o helper.o 
       gcc -o $@ $^ $(LIBS)

info: read.o info.o decode.o helper.o
       gcc -o $@ $^ $(LIBS)

cs229towav: write.o read.o cs229towav.o decode.o encode.o helper.o
       gcc -o $@ $^ $(LIBS)

clean:
       rm -rf *.o gensine info cs229towav 
```

编辑：

Boddie，请注意，您的困惑是因为您认为 makefile 是一个脚本 - 即。您正在运行您`make`键入时命名的脚本`make gensine`。实际上`make`是一个类似于`gcc`文件系统中其他地方的命令（在 Linux 等上，键入`which make`以查看它在哪里）。该命令期望在当前目录中`make`找到一个包含构建规则的输入文件`makefile`。`Makefile`如果它没有找到那个文件，它会使用一些内置的规则来代替 - 因此`cc gensine.c -o gensine`which 在你的 makefile 中没有。如果你愿意，你可以`make`用开关告诉makefile的名称（这样它就不会使用默认名称）`-f`，正如@DanielFischer在评论中描述的那样。

# visual-c++ - Visual C++ 6 源代码中的警告 MIDL2346：指定的 lcid 与以前的规范不同

> ID：13326724
> 
> 赞同：0
> 
> 时间：2012-11-10T22:34:15.630
> 
> 标签：visual-c++, visual-c++-6, opc, typelib

我在尝试维护的一些代码中有一个奇怪的警告。我目前正在其当前环境（Visual C++ 6.0，是的，我知道，古老的）中对其进行测试，然后再将其升级到更现代的 VC++ 版本。我不明白这个警告，以及它可能对我正在编译的 EXE 目标产生什么影响。在编译期间，我在构建选项卡中获得此输出：

```
Processing C:\OSDK\Libraries\PSDll\OSDKDefs.idl
OSDKDefs.idl
.\Server\Interfaces\InterfaceDef.idl(109) : warning MIDL2346 : the specified lcid is different from previous specification 
Compiling... 
```

上述 IDL 文件是由供应商提供的 IDL 文件的略微修改版本，不再为上述库提供任何支持。我相信 IDL 文件中的这条评论是由该项目的前维护者添加的，他已经破解了这个 IDL 文件。我的问题是，我可以通过将 lcid 更改回注释中的值来消除警告，可能会重新引入此 idl 文件的原始修饰符想要避免的一些不需要的问题。 **什么是 lcid**，lcid(0x409) 和 lcid(0x09) 的行为有什么区别？正在切换值为 0x400 hex 的单个位，但该位有什么作用？

导致警告的行在下面标记和注释，以前的 lcid(0x409) 更改为 lcid(0x09) 以“兼容”该供应商为其 DCOM/COM 代码提供的某种测试工具，该工具在下面的评论。

```
//
// Component and type library descriptions
//
[
    uuid(bbf92ab1-5031-40c2-864d-1c301f51d0ce),
    //  mvs04042000 - Changed back the lcid from 0x409 to 0x09\. Else we have problems
    //  connecting from the PowerTool.
    lcid(0x09),    /// <<----- WARNING HERE
    version(7.16),
    helpfile("OsdkTlb.hlp"),
    helpstring("OPC Server 7.16 Library"),
    helpcontext(0x00000010)
]
library ED3Drv
{
    importlib("stdole32.tlb");

    [
        uuid(b66ac2ca-d99e-4319-8fc0-08c0b65e65df),
        appobject
    ]                          
    coclass ED3Server
    {
        [default]   interface IED3Driver;
                    interface IDriver;
                    interface IDriverMessage;
                    interface IDataScopeConnect;
                    interface IDispatch;
        [source]    interface IDataScopeSink;
    };
}; 
```

上面的 IDL 是工具包的一部分，该工具包旨在帮助人们编写符合称为 OPC（用于过程控制的 OLE）规范的 C++ DCOM 客户端和服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:26:07.437

lcid 是区域设置 ID。0x409 等于 1033，即英语（美国）。0x09 不是有效的区域设置 ID 值。

有关有效值的完整列表，请参阅[http://msdn.microsoft.com/en-us/library/ms912047(v=winembedded.10).aspx 。](http://msdn.microsoft.com/en-us/library/ms912047(v=winembedded.10).aspx)

# ruby-on-rails - Rails 哈希/数组关系

> ID：13326729
> 
> 赞同：1
> 
> 时间：2012-11-10T22:35:10.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, relationships

所以我有三个模型。

模型 1：与答案有 has_many 关系的问题

模型 2：答案（belongs_to Questions）

模型 3：用户

这是我的难题。在回答我的问题后，我希望我的用户有一个属性来指示他们对每个问题的答案，以便我以后可以比较它们。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:46:39.153

为答案添加一个`user_id`字段并将其值设置为与提供答案的用户的 ID 相匹配。这样，您以后可以查询属于某个/特定用户的答案。

# jquery - 没有为 ui-page 和 ui-content 正确设置 min-height

> ID：13326736
> 
> 赞同：1
> 
> 时间：2012-11-10T22:36:24.000
> 
> 标签：jquery, jquery-mobile, height, screen, css

我正在开发一个 HTML5 / JQuery Mobile webapp。它基本上显示来自数据库的记录并具有多页设置。我有一个记录列表，单击记录标题会将您带到该记录的详细信息页面。这就是出现问题的地方。

在将数据（通过 JSON）动态注入记录的详细信息页面并使用刷新后`.trigger('create')`，我的页面高度设置不正确。使用 Firebug，我可以看到 JQM 向 div 和 div 添加了一个类，`ui-page`并为它们提供了一个与实际屏幕高度不匹配的值。结果，div 并没有填满整个页面，而只填满了大约三分之二的页面。然后它会在这个 div 中显示一个滚动条，用于显示任何溢出的内容。页面的下三分之一保持灰色和空白。它实际上看起来像一个老式框架集，底部框架中没有加载任何页面。`data-role="page"``ui-content``data-role="content"``min-height``ui-content`

使用 Firebug，我一一禁用了所有分配的样式，发现只有当我按照类`overflow-x: hidden`的设置禁用时，页面才能正确显示`ui-content`。但是...然后我的固定标题不再固定，而是与页面一起向上移动。我尝试`min-height: 100%`为两者添加 CSS`.ui-content`和`.ui-page[style]`（因为 min-height 是由 JQM 在 div 元素上硬编码的），我添加了`!important`，但没有运气。

我将 JQM 1.2.0 Final 与 JQuery 1.8.2 一起使用。在使用 PhoneGap Build 编译应用程序后，最新版本的 Firefox、Chrome、IE9 以及 Android 2.3.6 都会出现此问题。有没有人认识到这个问题？有什么建议么？

详细页面的（简化）代码：

```
<html>
<head>
<title>record details</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<script src="js/jquery.js"></script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="css/styles.css" />
</head>
<body>
<div id="DetailPage" data-role="page" >
<div data-role="header" data-position="fixed" id="hdr" class="ui-bar-sl" data-tap-toggle="false">
<div data-role="controlgroup" data-type="horizontal" data-mini="true" style="float:left;margin-left:3px;"><!-- navigation buttons go here --></div>
</div>
<div id="breadcrumb"><!-- dynamically injected breadcrumb goes here --></div>
<div data-role="content">
<div id="RecordDetails"><!-- dynamically injected record data goes here -->
</div>
</div>      
</div>
<script src="js/injectdata.js"></script> 
```

数据注入的（简化）代码：

```
var id = // obtain id from URL-string through a function //
$('#DetailPage').bind('pageinit', function(event) {
$('#breadcrumb').append('Values from URL-string');
getRecordView(id);
});

function getRecordView(theid) {
$.getJSON('http://www.myserver.net/myscript.php?id=' + theid + '&callback=?', function(data) {
    recorditems = data.items;
    $.each(recorditems, function(index, rc) {
    $('#RecordDetails').append('Here goes all the JSON data').trigger("create");
    });
});
} 
```

# razor - 部分和重复的视图模型

> ID：13326746
> 
> 赞同：2
> 
> 时间：2012-11-10T22:38:00.197
> 
> 标签：razor, asp.net-mvc-4

我有一个很奇怪的问题。所以，我的结构是这样的

```
<div id="tasks">
   @Html.Partial("_Tasks", tasks)
</div> 
```

在 _Tasks 我对所有任务进行 foreach 并且对于每个任务我都有额外的部分

```
...
@Html.Partial("_Time", new TimeViewModel(task))
... 
```

在_Time里面我有表格

```
...
@Html.TextBoxFor(m => m.Name)
.... 
```

因此，在一个视图中，我渲染了一个局部，然后又在内部渲染了多个局部，并在其中呈现了一个表单。当我执行页面加载时，它可以工作。问题始于我使用 ajax 时，因此我对 Time 执行编辑并发布到服务器并使用返回的 html 更新#tasks。

我是我的控制器动作，我有......

```
...
return View("_Tasks", tasks); 
```

现在的问题是@Html.TextBoxFor(m => m.Name) 生成的所有输入都具有相同的值。为什么？如果我做

```
@Html.DisplayFor(m => m.Name) 
```

我工作得很好。我也试过

```
@Html.TextBoxFor(m => m.Name, new { Value = Model.Name }) 
```

它有效，但对我来说看起来很糟糕。

问题是，为什么会出现这种行为？为什么所有 TextBoxFor 都具有相同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:48:46.363

ASP.NET MVC 中的默认模型绑定器确定如何通过使用输入标记上的名称属性将值映射到模型。考虑到这一点，所有 html 助手都会生成标记。

所以当你写

```
@Html.TextBoxFor(m => m.Name) 
```

它会生成如下内容：

```
<input type="text" name="Name" /> 
```

但是，当您在局部视图中使用此帮助程序并尝试绑定作为主模型属性的模型时，它将不起作用。部分中的 Html 助手仍会生成标记，认为其模型是主要模型。因此，您的输入将绑定到主模型的 Name 属性。你可以看看[这个问题](https://stackoverflow.com/q/5197038/205859)来解决这个问题。还要记住，当您处理发布请求时，[默认活页夹无法拾取复杂的集合。](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)

# api - 如何批量重命名 Tumblr 标签？

> ID：13326748
> 
> 赞同：5
> 
> 时间：2012-11-10T22:38:16.510
> 
> 标签：api, tags, tumblr

我已经用包含连字符的标签标记了 700 多篇博客文章，这些标签在 2011 年突然停止工作，因为 Tumblr 决定（没有任何通知）禁止标签中的连字符（我猜连字符现在被阻止了，因为标签中的空格（允许) 改为连字符。)。不幸的是，Tumblr 不愿意全局重命名所有包含连字符的标签（尽管这些标签*不再*有用 → 404）。

现在我想自己重命名我的标签。

我尝试使用“大量帖子编辑器”( `tumblr.com/mega-editor`) 来完成此操作，但无法按标签选择帖子。我必须在发布后手动选择帖子并查看是否使用了某个标签，如果是，请将其删除并添加一个新标签。这将是一项巨大的工作（700 个标记的帖子，但总共超过 1000 个）。

所以我认为[Tumblr API](http://www.tumblr.com/api)可能会对我有所帮助。我不是程序员，但如果我能在这里得到一些帮助作为起点，我愿意深入研究它。

我想我需要以下过程：

1.  选择所有带有标签的帖子`x`（=包含连字符的标签）
2.  `y`用（=不带连字符的标签）标记所有这些帖子
3.  删除`x`所有这些帖子上的标签

我会手动为每个受影响的标签启动这个过程。

* * *

我看到该方法（或您所称的任何方法）[`/post`](http://www.tumblr.com/docs/en/api/v2#posts)知道请求参数`tag`：

> 限制对具有指定标签的帖子的响应

（我想我只能希望这也适用于包含连字符的标签。）

之后，我需要一种从该结果集中添加和删除标签的方法。[`/post/edit`](http://www.tumblr.com/docs/en/api/v2#editing)没有说任何关于标签的事情。我错过了什么？是否可以使用 API 添加/删除标签？

* * *

您知道如何“轻松”重命名我的标签吗？

API可以吗？你能给我一个起点，小费等。我怎么能做到这一点？

* * *

我不知道这是否有帮助，但我注意到搜索功能仍然能够找到带有包含连字符的标签的“标记”帖子。

示例：假设我有标签`foo-bar`。它与`/tagged/foo-bar`(→ 404) 链接。我可以找到带有的帖子`/search/foo-bar`（但这当然不理想，因为它也可能会找到包含（在正文中）与标签名称相似/相等的单词的帖子）。

我试图对连字符 ( `/tagged/foo%2Dbar`) 进行编码，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-24T23:12:52.077

just for the record, because this is a popular google search: i've done it! you can use it at [http://dev.goose.im/tags/](http://dev.goose.im/tags/).

i used a combo of PHP and jquery, basing my jquery off of a previous tumblr api script i wrote a year or two ago, and used [this tumblr php oauth script](http://techslides.com/tumblr-api-example-using-oauth-and-php/) for the authentication. if anyone wants me to put up the source code, i'd be happy to.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:05:03.490

如果你不是程序员，你的时间对你来说值多少钱？正如他们所说，时间就是金钱。您不仅要弄清楚如何使用 API，还要选择一种语言并学习用它来编写。这不是一项小任务。你可以以 50 美元的价格为自由职业者提供一个小时的工作。

要回答您的问题，是的，可以使用 API 执行此操作。它提到“这些参数用于 /post、/post/edit 和 /post/reblog 方法。” 并被`tags`提及为一串逗号分隔的单词。

您要做的是使用该`/posts`方法获取每篇博客文章的列表。您需要查看“请求”部分以找出传递给此 URL 的条件。您希望它尽可能通用，以获取所有帖子的完整列表。

获得帖子列表后，您需要对其进行迭代并修改`tags`每个帖子的响应中提供的参数。您需要将`id`参数与 一起使用`/post/edit`，它再次`tags`作为字符串使用。

您可以用于此任务的最简单的语言是 PHP。您需要查看[curl 扩展](http://us2.php.net/curl)来提出您的请求。你会想要阅读[数组](http://us2.php.net/manual/en/language.types.array.php)，因为你会经常使用它们。您还需要查看[explode](http://us2.php.net/explode)、[implode](http://us2.php.net/implode)、[str_replace](http://us2.php.net/str_replace)（用于破折号）和[foreach](http://us2.php.net/manual/en/control-structures.foreach.php)以迭代结果。

当你这样做时，我强烈建议你在 foreach 循环结束时使用[break ，这样一开始它只会影响一个帖子。](http://us3.php.net/break)首先测试它很重要，因为您不想意外删除您的标签/帖子。[print](http://us2.php.net/print)和[var_dump](http://us2.php.net/var_dump)是帮助您调试代码的好方法。[xdebug](http://xdebug.org/)是一个不错的扩展，它允许您在代码运行时逐行单步执行。[Netbeans](http://netbeans.org/downloads/)是一个具有良好 xdebug 支持的 IDE。

这里还有一个不错的[页面](http://php.net/manual/en/tutorial.php)可以帮助您开始使用 PHP。你需要在你的机器上安装 PHP。您不需要安装 Web 服务器 - 对于这个 PHP-CLI（命令行）sapi 就足够了。

# java - 按用户分解字符串句子中的组件

> ID：13326752
> 
> 赞同：1
> 
> 时间：2012-11-10T22:38:30.633
> 
> 标签：java

例如：有人订购了一些电影通行证： **用户输入：** 17.50 拍摄 2 的 3 张门票 我如何提取购买的门票数量，知道选择的电影并从输入的字符串中合计成本。

任何帮助是极大的赞赏。

```
 String Mac1
         System.out.println("Enter num of tickets, movie & (at) ticket price:");
         Mac1 = input.nextLine();

         String Mov1[]= Mac1.split(", ");

           for (int i = 0; i < Mov1.length; i++) 
           {
               System.out.print(Mov1[i]);

           } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:48:17.750

在这里使用正则表达式似乎更合适：

```
Matcher m = Pattern.compile("(\\d+) tickets for (.*) at (.*)").matcher(Mac1);
if (m.matches()) {
  int tickets = Integer.parseInt(m.group(1));
  String movie = m.group(2);
  double cost = Double.parseDouble(m.group(3));
  double total = tickets * cost;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:47:38.203

似乎正则表达式是这项工作的最佳工具（无论它看起来多么糟糕）：

```
(\\d+) tickets for (.*) at (\\d{1,2})[.:](\\d{2}) 
```

# android - Android如何进行数据库备份？

> ID：13326753
> 
> 赞同：0
> 
> 时间：2012-11-10T22:38:36.483
> 
> 标签：android, database, cloud, database-backups

我想对我的应用程序进行数据库备份，所以我正在寻找最好的方法。

我应该保存数据库的副本并以编程方式进行备份吗？

可以使用备份管理器进行数据库备份吗？

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:21:35.180

如果您出于某些原因只是让用户保存应用程序的当前状态，那么复制 db 文件就可以了。您可以在这里找到大量示例，例如：[https ://stackoverflow.com/a/2251647/812046](https://stackoverflow.com/a/2251647/812046)

但是，如果您需要在其他设备上恢复数据，您应该考虑任何类似的方法`sqlite .dump`，并且您必须自己实施。据我所知，如果您没有 root，您将无法使用本机 sqlite 转储。曾经我使用简单的 csv 文件在 android 设备和 openbsd 机器之间复制数据。适用于少量数据。

# mongodb - MongoDb：键名中的空格？

> ID：13326754
> 
> 赞同：1
> 
> 时间：2012-11-10T22:38:50.117
> 
> 标签：mongodb, mapreduce

我有一个问题导致我把头撞在墙上好几天。

考虑以下文档：

```
{
    '_id': '5d7de43ac7baaa0ff2c4ae2bd000518a',
    'Some Complex Name': {
        'data': {
            'simpleKey': [
                {
                    'name': 'Bob',
                    'age': 30
                },
                {
                    'name': 'Sam',
                    'age': 31
                },
                {
                    'name': 'George',
                    'age': 20
                }
            ]
        }
    }
} 
```

在我对 JavaScript 的理解中，我了解到我会以以下方式（在`map`函数范围内）引用“某些复杂名称”：

```
var stuff = this['Some Complex Name'] 
```

以此为基础，我将能够使用以下内容访问名称：

```
var names = [];
for (var i in this['Some Complex Name'].data.simpleKey) {
    names.push(this['Some Complex Name'].data.simpleKey[i].name);
}
emit(this._id, names); 
```

不幸的是，我在某个地方错了，因为我遇到了这样的错误

```
 "errmsg" : "exception: map invoke failed: JS Error: TypeError: this['Some Complex Name'] has no properties nofile_b:2" 
```

因此，我的问题是：我将如何/正确/访问“某些复杂名称”键？

奖励将是一些文档来解释这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:03:28.193

实际上，我刚刚找到了答案，这正是我所怀疑的。

[MongoDB/PyMongo：如何在 Map 函数中使用点表示法？](https://stackoverflow.com/questions/6619176/mongodb-pymongo-how-to-use-dot-notation-in-a-map-function)是同样的问题，事实证明我需要过滤我的查询以确保`Some Complex Name`存在于我正在使用的文档中。这是通过`query`to完成的`mapReduce`。

# html - HTML/CSS 格式

> ID：13326758
> 
> 赞同：-2
> 
> 时间：2012-11-10T22:39:29.930
> 
> 标签：html, css

我不得不在我的 html 代码中正确排列项目。我不知道为什么他们没有按照我想要的方式排队。我没有设计这个网站，我只是在添加它。这也是一个文字新闻页面，我无权更改站点范围的 css，所以我使用的是内联 css，因为`<style>`标签位于我无权访问的页眉中。抱歉，我应该在发布问题之前将 CSS 提取出来，以便更容易理解。但我是程序员而不是网页设计师，我并不总是记得你不应该多次使用 id。

我遇到的第一个问题是在我的网站上排列 4 个项目。我有 2 个文本字符串和图像以及一条水平线。我想要第一个字符串左对齐，第二个字符串右对齐，图像在它的右边。然后我希望`<hr>`它就在它之下。我试图通过将第一个字符串放在 div 上，将第二个字符串与图像放在另一个单独的 div 中来做到这一点。我得到的是3行。第一个字符串在一行左对齐。第二个字符串与第二行和下一行的图像右对齐`<hr>`。我尝试在 html 属性和 css 中使用不同的对齐设置，但我似乎无法摆脱第一个字符串之后的换行符。我错过了什么？我知道这应该很简单？会不会是wordpress css？

我的第二个问题是类似的。我有一个带有图像的表格单元格（框中的 x）。我可以让图像证明正确，但我无法让它垂直对齐到 td 的顶部。我错过了什么？

这是一些示例 html：这更容易理解吗？

CSS：

```
table#one {
    width=900px; 
    margin-left: auto; 
    margin-right: auto;
}
div#div1 {
    font-size: 1em; 
    line-height: 1em; 
    font-weight: bolder; 
    padding: 0px;
}
td#td1 {
    border: none; 
    background-color: #f8d3cf; 
    width:125px; 
    height:80px; 
    border-spacing: 10px; 
    padding:0;
}
div#div2 {
    padding:0; 
    vertical-align:top;
}
a#a1 {
    padding: 0px;
}
img#img1 {
    padding: 0px;
}
td#td3 {
    border: none; 
    width:10px;
}
td#td4 {
    border: none; 
    font:.6em Arial, Helvetica, sans-serif; 
    width:125px; 
    height:20px;
} 
```

HTML：

```
<table id="one">
    <tr>
        <td>
            <div id="div1">My Color Library</div>
            <div align="right" class="removeall">
                <a href="colors">
                    <img src="http://www.2100computerlane.net/workingproject/images/x-button.png" />
                    <bold>&nbsp;Remove All</bold>
                </a>
            </div>
            <HR/>
            </p>
            <div class="mycolor">
                <table><!--width="900px"  -->
                    <tr>
                        <td id='td1' align="right" valign="top"><a href="f8d3cf" id="a1"><img src="http://www.2100computerlane.net/workingproject/images/x-button.png" /></a></div></td>

                    </tr>   
                    <tr>
                        <td  id="td4">Desert Warmth<br/>70YR 56/190 A0542</td>                                                  
                    </tr>

                </table>

            </div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:39:30.650

要回答您的第一个问题，您的代码中有两个 DIV 元素：

```
<div id="div1">My Color Library</div>
<div align="right" class="removeall">
    <a href="colors">
        <img src="images/x-button.png" />
        <bold>Remove All</bold>
    </a>
</div> 
```

DIV 是块级元素，这意味着相邻的 DIV 是垂直堆叠的。所以，标题下方的空隙实际上是第二个DIV的区域。

我相信你想要这个：

```
<div id="div1">
    My Color Library
    <div class="removeall">
        <a href="colors">
            <img src="images/x-button.png" />
            <bold>Remove All</bold>
        </a>
    </div>
</div> 
```

CSS：

```
.removeall {
    float: right;    
} 
```

因此，只需将第二个 DIV 放入 1\. DIV 中，然后将其浮动到右侧。

关于你的第二个问题，这个 CSS 应该可以解决问题：

```
#td1 {
    vertical-align: top;
}

#td1 img {
    vertical-align: top;   
} 
```

**现场演示：http:** [//jsfiddle.net/BrR2c/12/show/](http://jsfiddle.net/BrR2c/12/show/)

# python - 如何确定在 wxPython 中选择了 RadioBox 中的哪个按钮？

> ID：13326759
> 
> 赞同：0
> 
> 时间：2012-11-10T22:39:47.120
> 
> 标签：python, wxpython

我的应用程序中有一个 RadioBox（框内有两个单选按钮），我需要确定在框中选择了哪个按钮。我已经看到了单选按钮是单独创建的示例，但当它们是 RadioBox 的一部分时则没有。

这是我的 RadioBox 的代码。

```
self.radIPAddressInfo = wx.RadioBox(choices=['Automatically Determined',
          'Manual'], id=wxID_FRAME1RADIPADDRESSINFO,
          label=u'IP Address Information', majorDimension=1,
          name=u'radIPAddressInfo', parent=self.panelMain, pos=wx.Point(728,
          80), size=wx.Size(288, 136), style=wx.RA_SPECIFY_COLS)
    self.radIPAddressInfo.Bind(wx.EVT_RADIOBOX,
          self.OnRadIPAddressInfoRadiobox, id=wxID_FRAME1RADIPADDRESSINFO) 
```

我会使用类似的东西吗

```
if self.RadIPAddressInfo.GetValue()="Automatically Determined":
     do something
else
     do something else 
```

谢谢，祝你有美好的一天:) 帕特里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:42:43.573

[http://www.wxpython.org/docs/api/wx.RadioBox-class.html](http://www.wxpython.org/docs/api/wx.RadioBox-class.html)

```
print self.RadIPAddressInfo.GetStringSelection(self) #returns selected item string 
```

或者

```
print self.RadIPAddressInfo.GetSelection()  #returns selected index 
```

# php - CakePHP 2.3 如何使用 find_in_set 设置分页顺序

> ID：13326764
> 
> 赞同：0
> 
> 时间：2012-11-10T22:40:21.073
> 
> 标签：php, mysql, cakephp, cakephp-2.0

我想对一些数据进行分页并使用 FIND_IN_SET 对它们进行排序。如果只有一个参数，它可以像这样设置顺序：

```
$this->paginate['order'] = 'FIND_IN_SET(Catalog.pseudonym_id, "197,109,687")'; 
```

在 CakePHP2 中，当有多个 order 参数时，它们必须作为 key => value 输入。如何使用 FIND_IN_SET 来完成？以下不起作用

```
array(
    (int) 0 => 'FIND_IN_SET(Catalog.pseudonym_id, "197,109,687")',
    'Catalog.catalog_type_id' => 'ASC',
    'Edition.year' => 'asc'
)

array(
    'FIND_IN_SET' => '(Catalog.pseudonym_id, "197,109,687")',
    'Catalog.catalog_type_id' => 'ASC',
    'Edition.year' => 'asc'
)

array(
    'FIND_IN_SET (Catalog.pseudonym_id, "197,109,687")' => 'ASC',
    'Catalog.catalog_type_id' => 'ASC',
    'Edition.year' => 'asc'
) 
```

有任何想法吗？解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:25:27.680

让它工作的方法，就是将order参数设置为字符串，不使用数组，然后就ok了，如下：

```
$this->paginate['order'] = 'FIND_IN_SET(Catalog.pseudonym_id, "197,109,687"), Catalog.catalog_type_id ASC, Edition.year ASC'; 
```

# jsf-2 - JSF MethodExpression javax.el.PropertyNotFoundException

> ID：13326768
> 
> 赞同：3
> 
> 时间：2012-11-10T22:41:40.767
> 
> 标签：jsf-2, propertynotfoundexception

我正在尝试开发一个自定义组件，该组件需要从 backingbean 调用一个方法以从 bb 获取一些数据（这将在某个 Ajax 调用之后在解码阶段调用），并带有一个参数（它将进入ajax 调用）。

我遇到的问题是我将属性定义为 MethodExpression（在标签库和组件中），我得到了 Ajax 帖子，解码参数，当我尝试从组件中获取方法绑定时，我得到以下错误：

> javax.el.PropertyNotFoundException：/easyFaces.xhtml @19,151 dataSource="#{theBean.loadDataFromSource}"：类 'ar.com.easytech.faces.test.homeBean' 没有属性 'loadDataFromBean'。

这是相关代码..（如果这不是正确的方法，请告诉我..）

标签库：

```
<attribute>
    <display-name>Data Source</display-name>
    <name>dataSource</name>
    <required>true</required>
    <type>javax.el.MethodExpression</type>
    <method-signature>java.util.List theDataSource(java.lang.String)</method-signature>
</attribute> 
```

组件定义：

```
public class Autocomplete extends HtmlInputText implements ClientBehaviorHolder 
...
    public MethodExpression getDataSource() {
        return (MethodExpression) getStateHelper().eval(PropertyKeys.dataSource);
    }

    public void setDataSource(MethodExpression dataSource) {
        getStateHelper().put(PropertyKeys.dataSource, dataSource);
    } 
```

最后是生成错误的渲染方法：

```
private List<Object> getData(FacesContext context, Autocomplete autocomplete, String data) {

    Object dataObject = null;
    MethodExpression dataSource = autocomplete.getDataSource();

    if (dataSource != null) {
        try {
            dataObject = dataSource.invoke(context.getELContext(), new Object[] {data});
            return convertToList(dataObject);
        } catch (MethodNotFoundException e) {
            logger.log(Level.INFO,"Method not found: {0}", dataSource.getExpressionString() );

        }
    }
    return null;

} 
```

这是来自BB的方法

```
public List<String> autcompleteFromSource(String param) {

    List<String> tmpData = new ArrayList<String>();
    tmpData.add("XXA_TABLE_A");
    tmpData.add("XXA_TABLE_B");
    tmpData.add("XXA_TABLE_C");

    return tmpData;
} 
```

以及带有组件的 .xhtml

```
<et:autocomplete id="autoc" minLength="3" delay="500" value="#{easyfacesBean.selectedValue}" dataSource="#{easyfacesBean.autcompleteFromSource}" /> 
```

问题是如果我定义了一个方法 getAutocompleteFromSource() 它识别了该方法并且错误更改为无法将列表转换为 MethodExpression，所以显然它只是将 autocompleteFromSource 解释为一个简单的属性而不是方法定义，这甚至是从BB调用方法的正确方法？（考虑到这不是实际行动也不是验证）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:25:57.510

我找到了解决方案，因为事实证明您还需要定义一个“处理程序”来定义方法签名，所以我创建了处理程序并添加到 taglib 中，一切都开始正常工作..仅供参考..在这里是处理程序..

问候

```
public class AutocompleteHandler extends ComponentHandler {

    public AutocompleteHandler(ComponentConfig config) {
        super(config);
    }

    protected MetaRuleset createMetaRuleset(Class type) {
        MetaRuleset metaRuleset = super.createMetaRuleset(type);
        metaRuleset.addRule(new MethodRule("dataSource", List.class, new Class[] { String.class }));
        return metaRuleset;
    }

} 
```

# php - PHP如何检测无限递归？

> ID：13326770
> 
> 赞同：4
> 
> 时间：2012-11-10T22:41:41.283
> 
> 标签：php, recursion

> **可能的重复：**
> [PHP 如何在这里避免无限递归？](https://stackoverflow.com/questions/10017741/how-does-php-avoid-infinite-recursion-here)

有人在 Twitter 上将此作为 php #wtf 发布：

```
class A
{
    private $b;

    function __construct()
    {
        unset($this->b);
    }

    function __get($n)
    {
        echo '!broken!';
        return $this->$n;
    }
}

$a = new A;
$a->b; //EDIT: original question had var_dump($a->b);

//output:
!broken!!broken! 
```

我对此的第一反应是 $a->b 为第一个回显触发 __get() ，然后返回 $this->$n 再次触发 __get 导致 $this->b 仍然不存在，这大概是包含的代码在 __get() 应该处理。PHP 自动检测无限递归并停在那里。这是有道理的，但另一方面，PHP 只对欠精细的属性 A::$b 给出 E_NOTICE 错误。

所以我的问题是，我对 PHP 自动检测无限递归是否正确？我怎么知道？还是有其他原因来解释给出的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:19:22.267

在类中，私有变量没有隐藏。因此，在执行以下代码时，您可以获取变量 $b，而无需调用 __get()：

```
class A {
  private $b;
  function get_b()
  {
      return $this->b;    
      }
 }

$a = new A; 
echo $a->get_b(); 
```

但在下面的一个中，你不能 - 它会调用函数 __get()：

```
class A 
{
    private $b;
    function get_b()
    {
        return $this->b;    
        }

}

 $a = new A; echo $a->b; 
```

所以在你的例子中：

> A类{私人$ b;
> 
> ```
> function __construct()
> {
>     unset($this->b);
> }
> 
> function __get($n)
> {
>     echo '!broken!';
>     return $this->$n;
> } 
> } 
> ```

```
$a = new A; // Here you called unset, and since it doesn't know the "b", it calls __get().
var_dump($a->b); // Again here $a->b is not "exists" or "hidden", so it calls __get() again. 
```

在 __get() 中，“return $this->$n”确实知道变量 $n - 也就是说 $b （就像在我的第一个代码示例中 - 函数 get_b() ）。所以它实际上不是无限递归，它就像任何其他函数调用一样；）

# node.js - Socket.io 命名空间上的重复客户端

> ID：13326771
> 
> 赞同：2
> 
> 时间：2012-11-10T22:41:53.137
> 
> 标签：node.js, dynamic, namespaces, socket.io

您好我正在尝试使用动态命名空间来按需创建它们。它正在工作，只是由于某种原因我得到了重复或更多的客户

服务器端 ：

```
io.of("/" + group ).on("connection", function(socket_group) { 
                socket_group.groupId = group;
                socket_group.on("infos", function(){
                    console.log("on the group  !");
                })

                socket_group.on('list', function () {
                    Urls.find({'group' : '...'}).sort({ '_id' : -1 }).limit(10).exec(function(err, data){
                        socket_group.emit('links', data);
                    });
                })  
                [...]
                }) 
```

客户端 ：

```
socket.emit('list', { ... }); 
```

在客户端，仅发送一个命令，但服务器始终以 2 个或更多响应进行响应。每次我关闭/打开我的应用程序时，响应都会增加。

谢谢如果你发现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:36:27.377

这可能是正确的行为；就像您要在任何其他环境中堆叠事件处理程序一样。为确保您只将函数附加到命名空间执行一次，请先检查它的存在（或在程序中的某个地方定义它，只根据需要运行一次）。

试试条件`(!io.namespaces["/" + group])`

# sql-server - SQL Server 2008：递归迭代操作方法

> ID：13326773
> 
> 赞同：1
> 
> 时间：2012-11-10T22:42:10.577
> 
> 标签：sql-server, sql-server-2008

想象一个名为 的表`Group`，每个组都可以有“子”组，只要它们的“级别”较低。所以表之间是一对多的关系`Group and childGroup`。

![在此处输入图像描述](../Images/8480b78ca00bb38c69ff7b21ab8c6d67.png)

和之间还有一个`many-to-many`关系`Group`，`Items`所以`Groups_Items`用来保存每个表的FK。

我需要编写一个查询，对于 a `given Group key`，我应该对、 和 all进行`find all its child`分组。`all the childs of child groups``the customers belonging to those found groups`

我知道它需要是某种递归查询，但我不知道如何在 SQL 中完成。以下是讨论的表的结构：

![在此处输入图像描述](../Images/b0fab73d3d4975b427e2faefa74995ff.png)

所以如果我在上表中有这些数据集：

![在此处输入图像描述](../Images/141b7d221fa874d318bc39177d69ce02.png)

查询是 find `For Group 1, find Its customers, Its Child groups (and their Childs) and all their customers`，输出应该是：

```
<Group> 1
    <customer> 1
    <customer> 2
    <Group> 2
        <customer> 2
        <Group> 3
        <Group> 4 
```

有人可以告诉我如何做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:21:06.993

我希望我理解你的问题

```
;WITH Hierarchy (GroupID,ID,  ParentID
               ,hLevel
               ) AS
(
   -- Base case
   (
   Select  [Parent Key] as GroupID,NULL,NULL,0
   FROM Tree
   where [Parent Key]=1
   UNION
   SELECT
      [Child Key] as GroupID,
      [Child Key] as ID,
      [Parent Key] as ParentID
      ,1 as hLevel
   FROM Tree
   where [Parent Key]=1
   ) 

   UNION ALL

   -- Recursive step
   SELECT
      e.[Child Key] as GroupID,
      e.[Child Key],
      e.[Parent Key]
     ,eh.hLevel + 1
   FROM tree e
      INNER JOIN Hierarchy eh ON
         e.[Parent Key] = eh.ID
)

Select Distinct h.GroupID, c.Name,h.ParentID as ParentGroupID
from Hierarchy h
left join test c on h.GroupID=c.ID 
```

较旧的尝试是

```
Declare @Parent int
Declare @count int
Select @Parent=??

Select cast(ID as Int) as ID
into #tmp
from Tabelle where ParentID=@Parent

select @Count=0
While @Count<(Select Count(*) from #tmp)
   begin
   Select @Count=(Select Count(*) from #tmp)
   insert into #tmp Select Cast(ID as int) from Tabelle where ParentID in (Select ID from #tmp) and ID not in (Select ID from #tmp)
   end
Select * from #tmp
Drop table #tmp 
```

# android - 后退按钮安卓

> ID：13326775
> 
> 赞同：-1
> 
> 时间：2012-11-10T22:42:26.790
> 
> 标签：android, back-button

我无法正确实现后退按钮。我见过的所有代码片段都不适合我。当我按下后退按钮时，我想要做的只是回到上一个列表。几乎我在一个列表中有一个列表，我只是希望它回到上一个列表。我该怎么做呢？这是我的清单，每个项目都有一个单独的清单。假设您单击武器，然后获得不同武器类型的列表等等

```
final String[] weapons = getResources().getStringArray(R.array.weapons);
                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, weapons));
                lv.setOnItemClickListener(new OnItemClickListener() 
                {
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) 
                    {
                        System.out.println("item clicked: "+weapons[position]);
                        switch(position)
                        {
                            case 0:
                                final String[] axes = getResources().getStringArray(R.array.axes);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, axes));
                                break;
                            case 1:
                                final String[] clubs = getResources().getStringArray(R.array.clubs);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, clubs));
                                break;
                            case 2:
                                final String[] daggers = getResources().getStringArray(R.array.daggers);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, daggers));
                                break;
                            case 3:
                                final String[] great_axes = getResources().getStringArray(R.array.great_axes);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, great_axes));
                                break;
                            case 4:
                                final String[] great_katana = getResources().getStringArray(R.array.great_katana);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, great_katana));
                                break;
                            case 5:
                                final String[] great_swords = getResources().getStringArray(R.array.great_swords);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, great_swords));
                                break;
                            case 6:
                                final String[] hand_to_hand = getResources().getStringArray(R.array.hand_to_hand);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, hand_to_hand));
                                break;
                            case 7:
                                final String[] katana = getResources().getStringArray(R.array.katana);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, katana));
                                break;
                            case 8:
                                final String[] polearms = getResources().getStringArray(R.array.polearms);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, polearms));
                                break;
                            case 9:
                                final String[] scythes = getResources().getStringArray(R.array.scythes);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, scythes));
                                break;
                            case 10:
                                final String[] staves = getResources().getStringArray(R.array.staves);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, staves));
                                break;
                            case 11:
                                final String[] swords = getResources().getStringArray(R.array.swords);
                                setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, swords));
                                break;
                        }
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:58:02.650

您想覆盖后退按钮以加载传递给您的 ListView 的上一个适配器...
我建议创建一个类变量来存储以前的适配器选择：

```
List<Integer> previousAdapters = new ArrayList<Integer>(); 
```

重写`onItemClick()`以保存索引并调用新方法：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    previousAdapters.add(position);
    changeAdapter(position);
} 
```

将您的 switch 语句移动到`changeAdapter()`：

```
public void changeAdapter(int position) {
    switch(position)
    {
    case 0:
        final String[] axes = getResources().getStringArray(R.array.axes);
        setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, axes));
        break;
    case 1:
        final String[] clubs = getResources().getStringArray(R.array.clubs);
        setListAdapter(new ArrayAdapter<String>(ffxidirectory.this, R.layout.list_item, clubs));
        break;
    // etc
    }
} 
```

`onBackPressed()`像这样覆盖：

```
public void onBackPressed() {
    if(previousAdapters.size() > 1)
        changeAdapter(previousAdapters.remove(previousAdapters.size() - 2));
    else
        super.onBackPressed();
} 
```

**此外**，您不需要每次`changeAdapter()`调用时都重新创建资源数组。您应该在`onCreate()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:58:19.567

试试这个代码

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

它也可以通过覆盖 onBackPressed 方法在 android 2.0+ 中完成

```
@Override
public void onBackPressed(){
//do whatever you want the back button to do
} 
```

# c# - 选择项目后如何取消对组合框的关注？

> ID：13326776
> 
> 赞同：0
> 
> 时间：2012-11-10T22:42:34.923
> 
> 标签：c#, winforms, combobox

我想在选择项目后取消对组合框的关注。怎么做？我将 myCombo 的属性设置如下：

> myCombo.DrawMode=OwnerDrawFixed 和 myCombo.DropDownStyle=DropDownList

代码如下：

```
 void SetComboReadOnly(object sender, DrawItemEventArgs e)
    {
        if (e.Index > -1)
        {
            e.DrawBackground();
            e.Graphics.DrawString(((ComboBox)sender).Items[e.Index].ToString(), this.Font, Brushes.Black, e.Bounds);
            e.DrawFocusRectangle();
        }
    }

    void myCombo_DrawItem(object sender, DrawItemEventArgs e)
    {
        SetComboReadOnly(sender, e);
    } 
```

# c# - C# 数据表到 Json？

> ID：13326777
> 
> 赞同：1
> 
> 时间：2012-11-10T22:42:43.553
> 
> 标签：c#, json, datatable

我想将 DataTable 作为 Json 格式显示在图表上。

```
public JsonResult GetDataTable()
{
    DataTable dt = new DataTable();

    dt.Columns.Add("Jan");
    dt.Columns.Add("Feb");
    dt.Columns.Add("Mar");
    dt.Columns.Add("Apr");

    for (int i = 0; i < 10; i++)
    {
        dt.Rows.Add(i * 5, i * 10, i * 15, i * 11);
    }

    // JsonDataTable = dt to Json

    return new JsonResult
    {
        Data = new
        {
            success = true,
                chartData = JsonDataTable 
        },
        JsonRequestBehavior = JsonRequestBehavior.AllowGet
    };
} 
```

如何将 DataTable 转换为 Json？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T01:25:57.973

您可以使用[JSON.NET](http://json.codeplex.com/)自动将 DataTables（在许多其他类型中！）序列化为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:50:57.090

在数据表上应用该`AsEnumerable`方法，然后在其上应用一些 LINQ 以获得所需的形式。

```
var thatList=(from p in dt.AsEnumerable() 
                 select new { 
                               Jan= p.Field<string>("Jan"),
                               Feb = p.Field<string>("Feb"),
                               Mar = p.Field<string>("Mar"),
                               Apr = p.Field<string>("Apr")
                            }).ToList(); 
```

现在您可以使用它`thatList`来转换为 Json。

```
return Json(new { status = true, chartData = thatList }, 
                                    JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T00:50:15.213

你为什么不尝试这样的事情：

```
public static class JSONEncoderHelper
{
    public static string FromXML(DataTable table)
    {
        StringBuilder sbuilder = new StringBuilder();

        sbuilder.Append("{\"");
        sbuilder.Append(table.TableName);
        sbuilder.Append("\":[");

        bool first = true;
        foreach (DataRow drow in table.Rows)
        {
            if (first)
            {
                sbuilder.Append("{");
                first = false;
            }
            else
                sbuilder.Append(",{");

            bool firstColumn = true;
            foreach (DataColumn column in table.Columns)
            {
                if (firstColumn)
                {
                    sbuilder.Append(string.Format("\"{0}\":\"{1}\"", column.ColumnName, drow[column].ToString()));
                    firstColumn = false;
                }
                else
                sbuilder.Append(string.Format(",\"{0}\":\"{1}\"", column.ColumnName, drow[column].ToString()));
            }
            sbuilder.Append("}");
        }

        sbuilder.Append("]}");

        return sbuilder.ToString();
    }
} 
```

你现在要做的就是重构我在 2 分钟内完成的辅助类

:)

# c# - 模拟 Networkstream.Read

> ID：13326780
> 
> 赞同：6
> 
> 时间：2012-11-10T22:42:51.693
> 
> 标签：c#, .net, stream, tdd

我一直在尝试模拟一些单元测试的网络流。

到目前为止，使用 Moq 我想出的最好的方法是使用流的包装器，然后模拟我的界面。

```
public interface INetworkstreamWrapper
{
    int Read(byte[] buffer, int offset,int size);

    void Flush();

    bool DataAvailable { get; }

    bool CanRead { get; }

    void close();
} 
```

问题是，虽然这给了我一个开始，但我实际上想测试一些字节数组值是否读入我的读取缓冲区。在模拟对象上调用 Read() 时，如何将一些测试数据返回到缓冲区中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:23:01.403

您可以使用回调来访问传递的参数并更改它们：

```
public void TestRead()
{
  var streamMock = new Mock<INetworkstreamWrapper>();

   streamMock
            .Setup(m => m.Read(It.IsAny<byte[]>(), 
                               It.IsAny<int>(), 
                               It.IsAny<int>()))
            .Callback((byte[] buffer, int offset, int size) => buffer[0] = 128);

   var myBuffer = new byte[10];
   streamMock.Object.Read(myBuffer,0,10);

   Assert.AreEqual(128, myBuffer[0]);
} 
```

但我建议您重新考虑有关这种嘲笑的策略，请参阅： [http ://davesquared.net/2011/04/dont-mock-types-you-dont-own.html](http://davesquared.net/2011/04/dont-mock-types-you-dont-own.html)

也许您可以编写一个集成测试，或者让您的代码依赖于抽象 Stream 类。

在您的测试中，您可以使用 MemoryStream 在从 Stream 中获取数据时检查您的类的正确行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T23:23:00.987

您可以使用它[`Setup`](http://code.google.com/p/moq/wiki/QuickStart)来执行此操作：

```
[Test]
public void MockStreamTest()
{
    var mock = new Mock<INetworkstreamWrapper>();
    int returnValue = 1;
    mock.Setup(x => x.Read(It.IsAny<byte[]>(), It.IsAny<int>(), It.IsAny<int>()))
                     .Returns((byte[] r,int o, int s) =>
                                  {
                                      r[0] = 1;
                                      return returnValue;
                                  });
    var bytes = new byte[1024];
    var read = mock.Object.Read(bytes , 1, 1);
    //Verify the the method was called with expected arguments like this:
    mock.Verify(x => x.Read(bytes, 1, 1), Times.Once());
    Assert.AreEqual(returnValue, read);
    Assert.AreEqual(1,bytes[0]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T09:36:29.270

在 Rhinomocks 中，这很容易，因为 NetworkStream 上的重要方法是虚拟的，因此您可以使用 MockRepository 创建一个存根。更好的是，它知道传递给 Read 方法的字节数组是一个输出数组，因此您可以使用以下代码完全取消对 Read() 的调用：

```
NetworkStream stream = MockRepository.GenerateStub<NetworkStream>();
stream.Stub(x => x.Read(Arg<byte[]>.Out(bytes).Dummy, Arg<int>.Is.Anything, Arg<int>.Is.Anything))
      .Return(bytes.Length); 
```

不需要包装器。

我对 Moq 的经验很少，但如果它不支持类似的东西，我会感到惊讶。

# python - 如何在 Tkinter 中自动更新按钮文本？

> ID：13326783
> 
> 赞同：0
> 
> 时间：2012-11-10T22:43:14.090
> 
> 标签：python, tkinter

我今天才开始使用 Tkinter，似乎不知道如何自动更新按钮的文本（如绑定）。

按钮是动态创建的：

```
 #creates frames visualization
    for frame_num in range(OSBehavior.NUM_FRAMES):
        f_label = Label(frames_frame, text='Frame ' + str(frame_num))
        f_label.grid(row=frame_num, column=0, padx=5)
        f_button = Button(frames_frame, width=30, textvariable=msim.frames[frame_num].page.name)
        f_button.grid(row=frame_num, column=1, padx=5, pady=3) 
```

当 msim.frames[frame_num].page.name (type is string) 更改时，我希望按钮文本能够反映这一点。它确实发生了变化，因为我同时运行了一个基于文本的版本。但是，按钮文本不会改变。

如果可能的话，我会避免在后端代码中手动设置按钮的文本。

如果有人能指出我正确的方向，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:43:55.033

`msim.frames[frame_num].page.name`需要是 a 的实例`StringVar`，它不适用于普通变量。

# e-commerce - 美国->美国支付网关的外币抽象

> ID：13326784
> 
> 赞同：0
> 
> 时间：2012-11-10T22:43:16.070
> 
> 标签：e-commerce, payment-gateway, stripe-payments

在支付网关的情况下，如果网关是美国的并且只能以美元收费，但可以向外国借记卡/信用卡收取费用，并且您想在货币*不是*美元的国家/地区采取行动，您不能/不想申请本地支付网关，编程方面你能做什么？

我正在考虑将美元金额转换为特定货币。问题是：

*   我不知道从哪里获得实时准确的汇率数据
*   不确定我是否从某个地方获得数据，如果客户的卡处理器实际上会收取确切的价格

你们知道任何最佳实践吗？我认为另一种方法是只收取美元，然后让客户知道他/她当地货币的大致金额，但同样，我不确定在哪里可以获得更新的货币转换。

你们中有人经历过类似的情况吗？

PS.：Paypal 不是一个选项。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:48:43.083

货币兑换由您客户的银行进行，因此很遗憾，您甚至无法通过中央市场进行估算。

您可以使用一些 API 来进行估算，尽管这主要是一种猜测。如果您使用其中一种，我会确保向您的客户明确说明价格可能因银行而异。

总的来说，我发现最好的做法就是以支持的货币（例如美元）显示您的价格，并向您的客户提及它可能会有所不同。随着我们继续向[国际扩张](https://stripe.com/global)，您可以利用我们的当地货币产品来进行更准确的收费。

# wpf - 嵌入 Web 浏览器时如何显示 Excel 功能区

> ID：13326787
> 
> 赞同：0
> 
> 时间：2012-11-10T22:44:13.463
> 
> 标签：wpf, excel, browser

使用[此处](http://www.codeproject.com/Articles/15760/How-to-Integrate-Excel-in-a-Windows-Form-Applicati)的建议，我设法将 Excel 2007 嵌入到我的 WPF WebBrowser 控件中。但是，功能区不显示。我尝试了各种技术，但没有任何效果。

我试过这个：

```
 _application.ExecuteExcel4Macro("SHOW.TOOLBAR(\"Ribbon\",True)"); 
```

在构建 Excel 工作簿后，我还尝试从宏中运行它，

```
Sub hide_ribbon()
    Application.ExecuteExcel4Macro ("Show.Toolbar(""Ribbon"", False)")
End Sub
Sub show_ribbon()
    Application.ExecuteExcel4Macro ("Show.Toolbar(""Ribbon"", True)")
End Sub 
```

但它也不起作用，尽管相同的宏在本机 Excel 中工作正常。

也试过这个：

```
 CommandBar cb = _workbook.CommandBars["Standard"];
    cb.Visible = true;
    cb.Enabled = true;
    cb.Position = MsoBarPosition.msoBarTop; 
```

或者尝试将“标准”更改为“功能区”，但没有任何效果。

Ctrl+F1 也不起作用。

有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:26:34.367

我花了 3 多周的时间来解决这个问题——即便如此，我仍然需要测试它是否能按预期工作。

正如您已经知道嵌入 Excel 时功能区会自动隐藏，并且您需要通过发送 OLE 命令再次“切换”它。

我假设您使用的是用 ActiveX 容器包装的 SHDocVw 库，按照知识库文章中描述的方式是文章[http://support.microsoft.com/kb/304662](http://support.microsoft.com/kb/304662)，并且您已经设置了适当的注册表项让浏览器显示 Excel 文档（如果您缺少的只是功能区，我相信您一定已经完成了）。

我正在使用 C#，所以你可能不得不在 VBA 中搞砸一点。

MS 支持知识库中题为“WebOCHostVB.exe 在 Visual Basic .NET 中托管 WebBrowser 控件”的文章看起来很有希望，但是 URL 是“support.microsoft.com/kb/311303”

打开文档后，在浏览器上调用 ExecWB，如下所示：

```
 object omissing = System.Reflection.Missing.Value ;
     this.axExcelWebBrowser1.ExecWB(SHDocVw.OLECMDID.OLECMDID_HIDETOOLBARS,
                                    SHDocVw.OLECMDEXECOPT.OLECMDEXECOPT_DONTPROMPTUSER,
                                    ref omissing, ref omissing); 
```

这应该切换功能区状态 - 因为当我们开始时它处于关闭状态，所以一个调用应该使其显示。再次这样做应该隐藏它 - 虽然我没有尝试过。

常量位于您必须从项目中引用的 shdocvw.dll 中。即使这些是整数枚举，我也无法在本地重新定义它们并让它们正常工作。

您可以在此处找到其他可能对您的应用程序有用的 OLE 命令：http: [//msdn.microsoft.com/en-us/library/ms691264%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms691264%28v=VS.85%29.aspx)

我不知道为什么这必须如此困难，或者为什么 Excel 的行为与 Word 的行为不一致。

希望这可以帮助。

# algorithm - 从一个未加权的无向图计算另一个边长度正好为 l 的图

> ID：13326792
> 
> 赞同：0
> 
> 时间：2012-11-10T22:45:31.360
> 
> 标签：algorithm, graph, runtime, breadth-first-search

什么是制作另一个具有顶点的图的方法，该顶点只能从`V`原始未加权（假设长度为 1）和无向图中的每个顶点的边长度为 l 得到`G=(V,E)`。我想出了一个解决方案，它只`V`在每个顶点上使用深度优先搜索从每个分支中搜索每个分支，直到找到每个顶点的路径长度为 l 的所有顶点。当然，这提供了一个运行时间`O(V^(l+1))`，这不是最佳解决方案。谁能帮助我找到具有更好渐近运行时的更好解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:46:35.710

您可以使用[Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)算法，该算法使用矩阵表示（如@Hammar 建议的那样），但`O(V^3)`无论`l`. `l`您可以通过顺序插入节点并确定对最短路径的影响来确定所有距离，而不是矩阵求幂。

# xamarin.ios - TypeForwardedTo 拒绝在 MonoTouch / VSMonoTouch 中为 System.Windows.Input.ICommand 工作

> ID：13326794
> 
> 赞同：1
> 
> 时间：2012-11-10T22:45:47.443
> 
> 标签：xamarin.ios, portable-class-library

我已经`TypeForwardedTo`使用接受的答案中的建议实现了很多路线，[Is it possible to use a Portable Class Library that references System.Net in MonoDroid?](https://stackoverflow.com/questions/10361457/is-it-possible-to-use-a-portable-class-library-that-references-system-net-in-mon)

但是，我现在尝试将 TypeForwardTo(System.Windows.Input.ICommand) 添加到列表中，并且由于某种原因这种类型拒绝工作。

基本上我得到的错误信息是：

> 错误 5 命名空间“System”中不存在类型或命名空间名称“Windows”（您是否缺少程序集引用？） C:\Projects\Misc\MVVMCROSS\Cirrious\System.Windows.Touch\Forwarding.cs 9 42 System.Windows.Touch

我不明白为什么当我在 Reflector 中查看 System.dll 的 VSMonoTouch 副本时，我可以清楚地看到 ICommand 类型：

```
.namespace System.Windows.Input
{
    .class public interface abstract auto ansi ICommand
    {
        .event [mscorlib]System.EventHandler CanExecuteChanged
        {
            .addon instance void System.Windows.Input.ICommand::add_CanExecuteChanged(class [mscorlib]System.EventHandler)
            .removeon instance void System.Windows.Input.ICommand::remove_CanExecuteChanged(class [mscorlib]System.EventHandler)
        }

        .method public hidebysig newslot abstract virtual instance bool CanExecute(object parameter) cil managed
        {
        }

        .method public hidebysig newslot abstract virtual instance void Execute(object parameter) cil managed
        {
        }

    }
} 
```

System.dll 中的其他类型转发正常 - 即只有最后一行失败：

```
[assembly: TypeForwardedTo(typeof(System.Collections.ObjectModel.ObservableCollection<>))]
[assembly: TypeForwardedTo(typeof(System.Collections.ObjectModel.ReadOnlyObservableCollection<>))]
[assembly: TypeForwardedTo(typeof(System.Collections.Specialized.INotifyCollectionChanged))]
[assembly: TypeForwardedTo(typeof(System.Collections.Specialized.NotifyCollectionChangedAction))]
[assembly: TypeForwardedTo(typeof(System.Collections.Specialized.NotifyCollectionChangedEventArgs))]
[assembly: TypeForwardedTo(typeof(System.Collections.Specialized.NotifyCollectionChangedEventHandler))]
[assembly: TypeForwardedTo(typeof(System.Windows.Input.ICommand))] 
```

另外： - 我知道 MonoDroid 重定向工作正常...... - 我知道 System.Windows.Input.ICommand 是最近添加到 MonoTouch 的 - 我怀疑 VSMonoTouch 使用 .Net 框架的事实1.0 版本也可能导致一些问题（但我不确定我是否完全理解这一点）。

谁能建议这可能是什么原因？什么可能是治愈方法？

# java - 添加通用类型的元素 到 LinkedList 的 arrayList

> ID：13326799
> 
> 赞同：1
> 
> 时间：2012-11-10T22:46:27.567
> 
> 标签：java, list, hashtable, indexoutofboundsexception

我想在 java 中创建一个哈希表类，我将键、值对存储在链接列表的 ArrayList 中。我通过声明来做到这一点

```
 ArrayList<LinkedList<T>> storage = new ArrayList(); 
```

然后我想创建一个linkList 对象，然后我可以使用它在arrayList 的每个索引内创建一个新的链表。我通过声明来做到这一点：

```
 LinkedList<T> list = new LinkedList<T>(); 
```

然后我将我的添加函数设置为将元素添加到数组列表的哈希键索引内的 LinkedList 的第一个索引，如下所示：

```
public void add(K key, T value){    
int arrayListIndex = (key.hashCode()) % this.initialCapacity;
    System.out.println(arrayListIndex); //This tells us where we access the Array List;

    if (hashBrown.get(arrayListIndex) == null){

        hashBrown.add(arrayListIndex, list);
        hashBrown.get(arrayListIndex).addFirst(value);
    }
} 
```

每次运行此代码时，我都会收到一个错误，其中我的索引为 7，我的大小为 0。这会导致错误：

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 7, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:571)
    at java.util.ArrayList.get(ArrayList.java:349)
    at FastHashtable.add(FastHashtable.java:72)
    at FastHashtable.main(FastHashtable.java:145) 
```

我无法追踪这个索引越界错误的来源，任何人都可以提供建议。我在使用 ArrayLists 方面相当陌生，这让我认为我对 arrayList 的原始声明是不正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T22:51:55.297

您将*容量*与*大小*混淆了`ArrayList`。从 Oracle Java 文档：

 **> 每个`ArrayList`实例都有一个*容量*。容量是用于存储列表中元素的数组的大小。它总是至少与列表大小一样大。随着元素被添加到 中`ArrayList`，它的容量会自动增长。除了添加一个元素具有恒定的摊销时间成本这一事实之外，没有指定增长策略的细节。

相反，您应该考虑创建一个普通数组（例如`Object[] a = new Object[maxSize]`），您可以在其中实际分配任意索引值的对象（在这种情况下为链表）。如果您只想存储链表，请创建一个`LinkedList<T>[]`数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T22:48:39.233

如果列表中有 0 个元素，则无法添加到索引 7 处的列表。您只能在末尾添加（使用`add`没有索引的方法）或在不大于当前列表的`size()`.

当列表为空并且您在索引 7 处添加一些内容时，您希望列表在第一个位置包含什么，以及在索引 6 处包含什么？`null`（我曾经创建了一个 list 的子类，以在添加索引大于列表大小时将所有内容填充到索引中，但这种行为不够普遍，无法成为`List`'s 语义的一部分。

* * *

[编辑以回应此处的评论和 praseodym 的回答]

当第一次访问相应的位置时，您可以简单地[用空值填充（数组）列表，](https://stackoverflow.com/questions/8223177/initializing-listt-with-given-number-of-nulls-without-loop)用链表替换那些。（但请务必使用`set`and not `add`，这可能也是您在上面想要的。）或者，您可以创建一个所需大小的数组（`null`默认情况下将充满 s ）并将其“包装”成 (不可调整大小）列表通过`Arrays.asList`。但是，您必须忽略“未经检查的转换”警告（并不是说您可以在使用数组时避免警告）。另外，我建议您阅读“ [Program to an interface, not an implementation](http://www.fatagnus.com/program-to-an-interface-not-an-implementation/) ”。**

# iphone - 切换视图时UIScrollView顶部位置发生变化

> ID：13326803
> 
> 赞同：0
> 
> 时间：2012-11-10T22:46:46.160
> 
> 标签：iphone, ios, uiscrollview

我在 UITabBar 应用程序上有一个 UIScrollView。如果滚动视图在我更改回另一个视图时向下滚动，则它留在的位置将成为新的顶部，我无法向上滚动并且底部添加了空白。我怎样才能阻止这种情况发生？

我通过将 ViewWillDisappear 设置为滚动到顶部来编写临时修复程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:15:51.877

我遇到了同样的问题，我也用 viewWillDisappear 修复了它。这是我使用的代码。

```
-(void)viewWillDisappear:(BOOL)animated{

[scroller2 scrollRectToVisible:CGRectMake(0,0,320, 1297) animated:NO];

[super viewWillDisappear:animated]; 
```

# c# - 如何在 c# 中将对象传入和传出第二个 windows 窗体

> ID：13326805
> 
> 赞同：0
> 
> 时间：2012-11-10T22:46:58.860
> 
> 标签：c#, winforms, object

几天来，我一直在互联网上搜索，试图找到一种将对象传递给表单的方法，以便我可以收集数据编辑对象，然后从第二个表单中取回对象。

我有一个主要由文本和文本格式组成的对象。我想将它传递给第二个表单，以便我可以填写表单上的值并对值进行更改，然后从表单中读回对象并用新副本替换原始对象。

我遇到的主要问题是传递对象。我考虑过将对象写入 tmp txt 文件，然后将其读入另一侧的表单，但必须有一些方法可以相对简单地更好地传递非本机数据类型。我尝试使用数据绑定，但未能找到一种简单的方法来传递整个对象。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:05:07.553

您始终可以在调用另一种形式时传递对象，例如：

```
form2 myform=new form2(myobject);
myform.Show(); 
```

该对象可以以另一种形式（此处为 form2）接收为：

```
Initialize(myobject)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:54:01.517

我认为这些对你有好处。

[C#如何在两个表单之间传递数据](http://forum.junowebdesign.com/net-programming/29915-how-pass-data-between-two-forms-c.html)

[在表单之间传递数据](http://www.codeproject.com/Articles/14122/Passing-Data-Between-Forms)

# android - 通过 Clockworkmod 和 adb 启用 USB 调试

> ID：13326806
> 
> 赞同：19
> 
> 时间：2012-11-10T22:47:08.203
> 
> 标签：android, adb, root, touchscreen, nexus-7

所以，几天前我的 Nexus 7 掉了，现在屏幕上有一个大裂缝。触摸屏坏了。也就是说，我仍然可以看到发生了什么，但它没有响应。
我找到了一种通过 adb 完全控制它的方法，并通过它扎根了它。
但是，将其植根会擦除我所有的数据和设置，包括 USB 调试。结果是我根本无法控制它，除了关掉它并改变音量。
Clockworkmod 内置了 adb。我可以从我的电脑完全控制 CWM，并访问我的平板电脑的文件等。

现在我的问题是，是否可以通过 Clockworkmod 使用 adb 或任何其他方法启用 USB 调试，如果可以，如何？
我确实拥有对所有文件和设置的 root 访问权限，并且我能够在上面获取任何需要的二进制文件，无论是原生 Android 文件、Cyanogenmod 文件、任何原生 ARM Linux 二进制文件还是其他东西（例如 sqlite3） .
我的电脑上也有`adb backup -all -system`备份，但据我所知，我无法通过 CWM 恢复它。
我可以访问 Linux 和 Windows。

更新：我尝试`/data/data/com.android.providers.settings/databases/settings.db`使用 sqlite3 启用 adb，但在重新启动后，值`adb_enabled`被删除并重新插入底部，值为 0。但是我更改的其他一些设置确实仍然存在。
我也尝试过修改/init.rc，但这个文件似乎也在启动时被重写。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-11T15:46:52.510

好吧，据我所知，您可以尝试这样做：

*   在 ClockworkMod 中运行 ADB shell
*   以读写模式重新挂载 /system。
*   将此添加到**/system/build.prop：persist.service.adb.enable=1**
*   保存文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:52:54.320

如果你能看到发生了什么，是什么阻止你挂上 USB 鼠标并用鼠标单击必要的设置？

# iphone - 在不添加到相机胶卷的情况下录制和保存照片/视频

> ID：13326810
> 
> 赞同：0
> 
> 时间：2012-11-10T22:47:58.263
> 
> 标签：iphone, ios, avfoundation, avcam

我想录制视频，**但不**让它显示在照片/视频应用程序、相机胶卷或其他相册中。

使用 Apple 提供的 AVCam 演示应用程序，我正在尝试将录制的视频保存到应用程序自己的 Document 目录中。这工作正常，但保存的视频也注册在相机胶卷/相册中，这是我不想要的。

我已经尝试将文件扩展名从 .mov 更改为随机的，并且视频确实以未知扩展名保存在正确的位置，实际上它并没有被添加到相机胶卷中，但在保存后立即显示一个对话框给用户：

> 无效数据 – 写入资产时出现问题，因为数据无效且无法查看或播放。

有些应用程序似乎确实能够保存到他们自己的 Documents 目录中，并且没有将拍摄的照片/视频添加到相机胶卷中，即*ReconBot*。

所以我的问题是：如何将图片或视频保存到应用程序的 Documents 目录而不显示在照片/视频应用程序中（没有前面提到的对话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:09:18.383

在 AvCam 示例应用程序中，Classes/AVCamCaptureManager.m 的最后是在录制视频后存储视频的例程。只需删除将其存储到相机胶卷的代码，并将现有代码复制到文档目录：

```
-(void)recorder:(AVCamRecorder *)recorder recordingDidFinishToOutputFileURL:(NSURL *)outputFileURL error:(NSError *)error
{
    // Save it in the app's Documents directory, whence it can be copied from the device via
    // iTunes file sharing.
    [self copyFileToDocuments:outputFileURL];

    if ([[UIDevice currentDevice] isMultitaskingSupported]) {
        [[UIApplication sharedApplication] endBackgroundTask:[self backgroundRecordingID]];
    }       

    if ([[self delegate] respondsToSelector:@selector(captureManagerRecordingFinished:)]) {
        [[self delegate] captureManagerRecordingFinished:self];
    }
} 
```

# macos - .emacs 代码来识别操作系统？

> ID：13326812
> 
> 赞同：8
> 
> 时间：2012-11-10T22:48:09.997
> 
> 标签：macos, ubuntu, emacs, operating-system, elisp

我在 Mac OS X 和 Ubuntu 上都使用 emacs。我的 .emacs 在两个平台上基本相同，有几行涉及本地字体和其他与操作系统相关的内容。由于我通常会在我的 .emacs 文件中添加内容，因此我想以准自动的方式同步它们。我的问题是——在 Lisp 中有没有办法添加一个条件过程来检测正在运行的操作系统？类似（伪代码）：

```
If OS X: 
  run this and that command;
If Linux:
  run that other command;
Fi 
```

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T23:42:22.577

按照 bmeric 的建议，这个解决方案对我有用：

```
(cond
   ((string-equal system-type "gnu/linux")
        ;; window size
        (add-to-list 'default-frame-alist '(left . 0))
        (add-to-list 'default-frame-alist '(top . 0))
        (add-to-list 'default-frame-alist '(height . 32))
        (add-to-list 'default-frame-alist '(width . 70))
        )
   ((string-equal system-type "darwin")
    ;; window size
        (add-to-list 'default-frame-alist '(left . 0))
        (add-to-list 'default-frame-alist '(top . 0))
        (add-to-list 'default-frame-alist '(height . 63))
        (add-to-list 'default-frame-alist '(width . 100))
    )
) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-10T22:51:45.217

您可以使用[系统类型](http://www.gnu.org/software/emacs/manual/html_node/elisp/System-Environment.html)变量。

# node.js - 在路由功能之外发送http响应？

> ID：13326815
> 
> 赞同：2
> 
> 时间：2012-11-10T22:48:28.090
> 
> 标签：node.js, socket.io, httpresponse

所以，我有一个如下的路由函数：

```
var http = require('http').createServer(start);

function start(req, res){
//routing stuff
} 
```

在此之下，我有一个 socket.io 事件监听器：

```
io.sockets.on('connection', function(socket){

    socket.on('event', function(data){
        //perform an http response
    }

} 
```

当调用套接字事件“事件”时，我想执行如下的 http 响应：

```
res.writeHead(200, {'Content-disposition': 'attachment; filename=file.zip'})
res.writeHead(200, { 'Content-Type': 'application/zip' });
var filestream = fs.createReadStream('file.zip');

filestream.on('data', function(chunk) {
    res.write(chunk);
});

filestream.on('end', function() {
    res.end();
}); 
```

最后一部分，当在路由函数中执行时工作得很好，但不幸的是，当它从套接字事件调用时，它当然不起作用，因为它没有引用“req”或“res”对象。我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:47:39.687

嗯...有趣的问题：

*   做你想做的事情并非不可能，流程是这样的：

    1.  接收 http 请求，不响应，将`res`对象保存在某处。
    2.  接收 websocket 请求，将您的身份验证/“链接”到`res`之前保存的对象。
    3.  通过文件响应`res`。
*   但它不是很漂亮，原因如下：

    1.  您需要保存 res 对象，如果您的服务器重新启动，则会丢失一大堆响应对象。
    2.  您需要弄清楚如何将 websocket 客户端链接到 http 请求客户端。我认为您可以使用 cookie/localstorage 来执行此操作。
    3.  扩展到另一台服务器将变得更加困难/您是否会代理客户端以某种方式始终由同一台服务器提供服务？否则链接将变得更加困难。

我会为您提出一个不同的解决方案：您想在让某人下载文件之前使用 websockets 执行一些客户端/服务器步骤吗？

*   这个问题有一个通过 websocket 进行下载的解决方案：通过 websocket[接收文件并启动下载对话框](https://stackoverflow.com/questions/9871357/receive-file-via-websocket-and-initiate-download-dialog)

    *   听起来它不适用于较旧的浏览器/ IE，但这是一个不错的选择。
    *   还提到通过隐藏的 iframe 下载

在此处检查此解决方案是否适合您的跨浏览器：http: [//caniuse.com/#feat=datauri](http://caniuse.com/#feat=datauri)

另一种选择是为下载生成一个唯一的 URL，并且仅在您通过 websocket 完成逻辑后将其附加到浏览器的窗口（作为隐藏的 iframe 下载或作为简单的下载按钮）。此选项将更易于跨浏览器使用并且更易于编码。

# c# - 带有 Mono 的自定义函数 SQLite

> ID：13326817
> 
> 赞同：6
> 
> 时间：2012-11-10T22:48:45.457
> 
> 标签：c#, sql, sqlite, mono, xamarin.ios

有没有办法使用 Mono 添加 SQLite 自定义函数？(Mono.Data.Sqlite)

我试图添加距离函数，返回两个地理位置之间的距离

```
 [SqliteFunctionAttribute(Name = "distance", Arguments = 4, FuncType = FunctionType.Scalar)]
    class SqliteDistance : SqliteFunction
    {
        public override object Invoke(object[] args)
        {
            double radius = 6367;
            double lat1 = System.Convert.ToDouble(args[0]);
            double lng1 = System.Convert.ToDouble(args[1]);
            double lat2 = System.Convert.ToDouble(args[2]);
            double lng2 = System.Convert.ToDouble(args[3]);

            return radius * 2 * Math.Asin( Math.Min(1, Math.Sqrt( ( Math.Pow(Math.Sin((lat2* (Math.PI / 180) - lat1 * (Math.PI / 180) ) / 2.0), 2.0) + Math.Cos(lat1* (Math.PI / 180)) * Math.Cos(lat2* (Math.PI / 180)) * Math.Pow(Math.Sin(( lng2* (Math.PI / 180)-lng1* (Math.PI / 180)) / 2.0), 2.0) ) ) ) ); 
        }
    } 
```

它给了我一个错误：

> 在使用 --aot-only 运行时尝试 JIT 编译方法 '(wrapper native-to-managed) Mono.Data.Sqlite.SqliteFunction:ScalarCallback (intptr,int,intptr)'。有关详细信息，请参阅[http://docs.xamarin.com/ios/about/limitations](http://docs.xamarin.com/ios/about/limitations)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T07:03:06.513

查看错误报告的页面的**Reverse Callbacks**段落：实际上，您需要将 MonoPInvokeCallbackAttribute 属性应用于方法（并且需要将其设为静态）。

这是对 iOS 设备的限制，因为它们不支持 JIT 编译器。

# javascript - 开发过程中铬的奇怪错误

> ID：13326819
> 
> 赞同：1
> 
> 时间：2012-11-10T22:48:56.233
> 
> 标签：javascript, google-chrome, d3.js, chromium, nvd3.js

我正在使用 D3.js + nvd3.js lib 制作图表并面临铬错误。它似乎没有破坏任何东西，但不确定出了什么问题。

```
 Error: Problem parsing d="MZ" 
```

我以前从未见过这样的事情。没有发现任何相关的谷歌搜索。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:59:13.820

我已经在我的 nv.d3 分支上修复了这个错误：[@github:arlm/nvd3/aggregated-pull-requests](http://github.com/arlm/nvd3/tree/aggregated-pull-requests)或[@github:arlm/nvd3/fix](http://github.com/arlm/nvd3/tree/fix)

# python - 打印“bs4.element.NavigableString”时出错

> ID：13326821
> 
> 赞同：1
> 
> 时间：2012-11-10T22:49:01.417
> 
> 标签：python, python-2.7, web-scraping, beautifulsoup

我正在使用 Beautiful soup 从 Weather Underground 网站中提取数据。我能够得到我想要的确切数据并将其分配给一个变量`dayTemp`。但是当我尝试使用`print dayTemp`. 我收到以下错误：

```
 Traceback (most recent call last):
  File "<pyshell#47>", line 1, in <module>
    print dayTemp
  File "C:\Python27\lib\idlelib\rpc.py", line 595, in __call__
    value = self.sockio.remotecall(self.oid, self.name, args, kwargs)
  File "C:\Python27\lib\idlelib\rpc.py", line 210, in remotecall
    seq = self.asynccall(oid, methodname, args, kwargs)
  File "C:\Python27\lib\idlelib\rpc.py", line 225, in asynccall
    self.putmessage((seq, request))
  File "C:\Python27\lib\idlelib\rpc.py", line 324, in putmessage
    s = pickle.dumps(message)
  File "C:\Python27\lib\copy_reg.py", line 74, in _reduce_ex
    getstate = self.__getstate__
RuntimeError: maximum recursion depth exceeded 
```

我`span.string`用来从整个元素中获取整数值。变量的类型`dayTemp`是`<class 'bs4.element.NavigableString'>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:41:51.080

看来idle没能泡菜`dayTemp`。您可以尝试将其显式转换为 Unicode 字符串：

```
print unicode(dayTemp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:51:24.060

我认为您只是在寻找`dayTemp.get_text()` （[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)）

# ios - CLLocation 当前位置 获取位置

> ID：13326822
> 
> 赞同：1
> 
> 时间：2012-11-10T22:49:03.630
> 
> 标签：ios, core-location, cllocation, cllocationdistance

我在这里看到了许多 currentLocation 问题，但我尝试使用两个单独的 IBAction 设置两个点，因为据我了解，核心位置 updateLocation 方法无法测量用户选择的两个点之间的距离。例如，如果该人站在城镇的一侧，他们可以单击一个按钮，然后将其设置为 locA，然后他们前往城镇的另一侧，单击另一个按钮，它将设置为 locB，当他们单击第三个按钮，它将计算两者之间的距离。关于如何实现这一点的任何想法？

我试图这样做：

```
 - (void)viewDidLoad
    {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone; 
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];
    }

    - (void)didReceiveMemoryWarning
    {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
    }

       - (IBAction)setPointOne{

     locA = [[CLLocation alloc] initWithLatitude:locationManager.location.coordinate.latitude longitude:locationManager.location.coordinate.longitude];

    }
     - (IBAction)setPointTwo{

        locB = [[CLLocation alloc] initWithLatitude:locationManager.location.coordinate.latitude      longitude:locationManager.location.coordinate.longitude];

    }
    - (IBAction)calculateDistance{

     CLLocationDistance distance = [locA distanceFromLocation:locB];

     totalDistance.text = [NSString stringWithFormat:@"Distance: %f Meters", distance];
     [locA release];
     [locB release];
   } 
```

当我这样做时，所有按钮都会导致崩溃

这是崩溃日志：

> -[ViewController 位置]：无法识别的选择器发送到实例 0x1fd36b60 2012-11-10 16:38:38.567 MeasureIt[3043:907] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[ViewController 位置]：无法识别的选择器sent to instance 0x1fd36b60' *** First throw call stack: (0x3a4f42a3 0x343e397f 0x3a4f7e07 0x3a4f6531 0x3a44df68 0x337110a5 0x33711057 0x33711035 0x337108eb 0x33710de1 0x336395f1 0x33626801 0x3362611b 0x388095a3 0x388091d3 0x3a4c9173 0x3a4c9117 0x3a4c7f99 0x3a43aebd 0x3a43ad49 0x388082eb 0x3367a2f9 0xd5a27 0x37ca6b20) libc++abi.dylib: terminate called throwing an exception ( lldb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:42:41.053

函数“位置”未实现或在错误的对象上调用。查看您的代码在哪里调用 [ViewController location] 并确保它已实现。

# lua - Corona Lua 中的 string.sub 与 ÅÄÖ 崩溃

> ID：13326823
> 
> 赞同：0
> 
> 时间：2012-11-10T22:49:08.107
> 
> 标签：lua, coronasdk

这个片段使我的模拟器崩溃了。

```
s = "stämma"
s1 =  string.sub(s,3,3)
print(s1) 
```

似乎它将我的角色处理为零，有什么想法吗？

乔金

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:37:47.633

我假设您使用的是 UTF-8 编码。

在 UTF-8 中，一个字符可以有可变数量的字节，介于 1 到 4 之间。`"ä"`字符 (228) 用两个字节编码`0xC3 0xA4`。

该指令`string.sub(s, 3, 3)`返回字符串 ( ) 中的第三个*字节，而***不是**第三个字符。由于仅此字节是无效的 UTF-8，Corona 无法显示该字符。`0xC3`

 **另请参阅[使用 Lua 提取 UTF-8 字符串的第一个字母](https://stackoverflow.com/questions/13235091)**

# android - 裁剪后如何保存文件？

> ID：13326825
> 
> 赞同：1
> 
> 时间：2012-11-10T22:49:23.817
> 
> 标签：android, image, crop

我正在创建一个安卓应用程序。它会拍一张照片，然后让你裁剪它，然后显示它。问题是它只保存拍摄的图像而不是裁剪的图像。基本上我需要它来保存裁剪的图像。裁剪后如何保存文件？

代码：

```
private void performCrop(){
    //take care of exceptions
    try {
        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP"); 
        //indicate image type and Uri
        cropIntent.setDataAndType(picUri, "image/*");
        //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1.5);
        //indicate output X and Y
        cropIntent.putExtra("outputX", 256);
        cropIntent.putExtra("outputY", 256);
        //retrieve data on return
        cropIntent.putExtra("return", true);
        //start the activity - we handle returning in onActivityResult
        startActivityForResult(cropIntent, PIC_CROP);  

    }

    //respond to users whose devices do not support the crop action
    catch(ActivityNotFoundException anfe){
        //display an error message 
        String errorMessage = "Your device does not support cropping";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-31T14:08:22.670

只需添加如下内容：

```
 try{    
        File file = new File(Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_PICTURES 
            ), fileName+".png"); //save to your pictures folder
     outputFileURI = Uri.fromFile(file);

     cropIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileURI);
     startActivityForResult(cropIntent, PIC_CROP); 
    } catch (IOException ioe){ 
        // handle your exception
     } 
```

请记住在保存后刷新图库，以便它立即在图库中可用。因此，也许在您的 onActivityResult 方法中使用此代码？

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse
                    ("file://" + Environment.getExternalStorageDirectory()))); 
```

**编辑：**找到了一种更好的刷新图库的方法，因为如果您只是刷新一张图像，sendBroadcast 可能效率低下。使用 MediaScanner 像这样扫描文件

```
Intent intent =   new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE); 
                intent.setData(outputFileURI); // Add the path to the file
                sendBroadcast(intent); 
```

这只会扫描新文件并刷新它而不是整个图库。

# java - 替代创建单独的类

> ID：13326827
> 
> 赞同：0
> 
> 时间：2012-11-10T22:49:47.700
> 
> 标签：java, arrays, list, class

目前我有两个类，第一个被调用`"Building"`，第二个被调用`"Happening"`。每栋建筑都有自己的名字，以及一天`ArrayList`的活动。`(Happening)`课程`Happening`有**开始时间**和**结束时间**。可以有许多建筑物，每个建筑物都可以有多个事件`(Happening)`。但正如你所见，我正在使用两个类来完成这项工作。我知道这可能是最好的方法，但我很好奇我是否可以只用一节课来处理所有这些`(Building)`而不需要`Happening`上课。我尝试`Happening`用作内部类，但它对我不起作用，因为我从中获取数据的主要方法`Building`也需要知道这个类，因为我的`Building`有一种方法可以将所有发生的事情作为数组返回。所以我想知道是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:53:01.470

不要认为创建单独的类是一件坏事。它使您的代码更易于阅读、使用和理解。虽然您无疑可以通过使用多维列表/数组或其他一些技巧将它们组合成一个类，但结果将是可读性大大降低的代码库。（将其视为与在数据库设计中我们尝试将事物分离到单独的表中的原因相同，除非性能原因另有说明）。

# android - 基于新创建的文件的不同签名与更长的持久性

> ID：13326828
> 
> 赞同：1
> 
> 时间：2012-11-10T22:49:51.490
> 
> 标签：android, file, md5

## 语境

我正在将一个 sqlite db 文件从资产中复制到内部存储中。该文件可以正常打开，但我想要一个额外的安全层。当文件被复制出来时，它没有完成的可能性很小。我决定支持校验和技术：特别是`MessageDigest` Java。所以这里是代码：

```
 public ZipCode(Context ctx) {
    this.ctx = ctx;
    if (!databaseExist(ctx)) {
        Log.d("ZipCode", "DB DNE");
        inflate_db(ctx);
        check_DB(ctx);
    } else {
        Log.d("ZipCode", "DB Exsits");
        check_DB(ctx);
    }

}
private static void inflate_db(Context ctx) {
        byte[] buffer = new byte[2048];
        int length;
        AssetManager am = ctx.getAssets();
        try {
            BufferedInputStream is = new BufferedInputStream(
                    am.open(ZIPCODE_SQLITE_FAUX_FILE));
            GZIPInputStream zis = new GZIPInputStream(is);
            File dbfile = ctx.getDatabasePath(ZIPCODE_SQLITE);
            FileOutputStream out = new FileOutputStream(dbfile);
            while ((length = zis.read(buffer, 0, buffer.length)) > 0) {
                out.write(buffer, 0, length);
            }
            out.flush();
            out.close();
            zis.close();
        } catch (IOException e) {
            e.printStackTrace();
            Log.d("ERROR", e.getMessage());
        }
    }

private static void check_DB(Context ctx) {
        File dbfile = ctx.getDatabasePath(ZIPCODE_SQLITE);
        FileInputStream fis;
        MessageDigest digester;
        byte[] bytes = new byte[8192];
        int byteCount;
        try {
            digester = MessageDigest.getInstance("MD5");
            fis = new FileInputStream(dbfile);
            while ((byteCount = fis.read(bytes)) > 0) {
                digester.update(bytes, 0, byteCount);
            }
            String digest = Base64.encodeBytes(digester.digest());
            Log.d("MD5 Sum", digest);
            fis.close();
            return;
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        catch (NoSuchAlgorithmException e1) {
            e1.printStackTrace();
        }
    } 
```

## 现在的问题

为什么在新创建时`check_DB`'s`Log.d("MD5 Sum", digest);` 有一个输出并在重新启动时说（即 DB 文件存在于内部存储中）`check_DB`'s`Log.d("MD5 Sum", digest);`有不同的输出。

### *笔记：*

`databaseExist(ctx)`根据 Android 约定检查数据库文件是否存在。

```
private static boolean databaseExist(Context ctx) {
    File dbFile = ctx.getDatabasePath(ZIPCODE_SQLITE);
    return dbFile.exists();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:40:09.283

你为什么不计算你的资产文件（在你的项目目录中）的 MD5 来找出哪个 MD5 是对的，哪个是错的？那么它会更容易找到问题部分。

另外，我建议根据参考手册`(byteCount = fis.read(bytes)) > 0`替换为。`(byteCount = fis.read(bytes)) != -1``FileInputStream`

# javascript - HTML5 MP3 未正确加载

> ID：13326829
> 
> 赞同：0
> 
> 时间：2012-11-10T22:49:59.710
> 
> 标签：javascript, html, google-app-engine, html5-audio

好的，[我的新网站](http://turtlecodeapps.appspot.com)刚刚上线，通过 Google Apps 交付。在百灵鸟中，我决定包含一个 javascript / HTML5 Lunar Lander 克隆（Martian Lander），这是我不久前写的一个练习。当我在本地打开游戏时，游戏运行良好，但是当它通过 GAE 交付时，声音似乎并没有在每个系统上加载。在移动 Safari 中，它们*都没有*加载。在桌面上的 safari 中，它们都可以可靠地加载到我的计算机上，但*不能*在其他一些计算机上加载。在 Chrome（在桌面上）它似乎可以工作，但在 iOS 的 Chrome 中，只加载一个声音。在桌面上，似乎总是相同的声音无法加载（[explode1.mp3](http://turtlecodeapps.appspot.com/subpages/lander/sounds/explode1.mp3))，这是我正在加载的最小声音。如您所见，如果您单击该链接，声音可以从服务器下载...

起初问题似乎与区分大小写有关，所以我在文件名中切换了大小写，但该修复并没有继续工作。这是一个问题，因为我的加载栏与加载了多少资源直接相关，所以它只是坐在那里等待没有回复的 GET 请求......有没有人经历过这样的事情，GET 没有收到回复特定资源，但直接加载资源可以正常工作吗？

我应该说我对大多数这些技术都很陌生，所以在我看来我很可能只是犯了一些新手错误。不幸的是，我不确定那些新手错误会是什么，因为我是新手！

这是我用来加载声音的代码：

```
function loadSound(soundName) {
    var newElement = document.createElement("audio");
    newElement.addEventListener("canplaythrough", assetLoaded, false);
    document.body.appendChild(newElement);

    var audioType = supportedAudioFormat(newElement);
    if (audioType == "") {
        alert("no audio support");
        return;
    }
    newElement.setAttribute("src", "lander/sounds/" + soundName + "." + audioType);

    console.log("loading sound " + newElement.src + "...");

    return newElement;
} 
```

和...

```
function assetLoaded() {
    var assetName = this.src;

    numAssetsLoaded++;

    console.log("loaded asset " + numAssetsLoaded + " (" + assetName + ")");

    if (numAssetsLoaded >= numAssetsToLoad) {
        shipSpriteSheet.removeEventListener("load", assetLoaded, false);
        pointImage.removeEventListener("load", assetLoaded, false);

        thrustAudioElement.removeEventListener("canplaythrough", assetLoaded, false);
        explosionAudioElement.removeEventListener("canplaythrough", assetLoaded, false);
        victoryAudioElement.removeEventListener("canplaythrough", assetLoaded, false);
        musicTrackElement.removeEventListener("canplaythrough", assetLoaded, false);

        gameState = GAME_STATE_INIT;
    }
} 
```

如果您查看控制台输出，您会看到所有声音都开始加载（尤其是explode1.mp3），但*不一定*完成并调用`assetLoaded`...

更新：
似乎共识是我*不*应该使用 mp3（顺便说一句，我已经在使用 mp3、AAC 和 ogg，但默认使用 mp3），而且我应该使用 Web Audio API。这些都是受欢迎的输入，我将进行必要的更改。但是，对于最初的问题，我*仍然*没有答案，即“为什么一个特定的声音不能在桌面上可靠地加载而其他声音加载没有问题？” 有没有人想试一试？或者答案会是“这些事情是高度不可预测的，除了切换到更可靠的方法，比如 Web Audio API 之外，没有办法解决它”？

UDATE：
这是我文件的摘录`app.yaml`，据我所知，它有助于 GAE 设置服务器。

```
- url: /(.*\.(mp3|ogg|wav))
  static_files: \1
  upload: (.*\.(mp3|ogg|wav)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:54:19.730

需要注意的一些事项：

*   您[不应该将 MP3 用于 HTML5 游戏](https://www.scirra.com/blog/64/why-you-shouldnt-use-mp3-in-your-html5-games)。
*   您需要将所有声音双编码为 AAC (.m4a) 和 Ogg Vorbis (.ogg)，以确保它们可以在任何地方播放，因为没有一种格式可以在任何地方播放。
*   您必须确保您的服务器具有正确的音频文件 MIME 类型。如果服务器说它的 MIME 类型错误，一些浏览器会很乐意播放音频；其他人会默默地失败。对于 AAC 和 Ogg Vorbis，类型分别为 audio/mp4 和 audio/ogg。
*   大多数移动设备一次只能播放一种声音，iOS 通常不允许您播放音频，除非它是在用户发起的输入事件中（例如`touchstart`）。
*   您可能希望在支持的情况下使用 Web Audio API（Chrome 和 iOS 6+），因为即使在 iOS 上播放也更加可靠和多音 - 但请注意 iOS 仍然会[静音 Web Audio API，直到用户输入事件](https://stackoverflow.com/questions/12517000/no-sound-on-ios-6-web-audio-api)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:39:50.983

这不是直接回答您为什么不播放声音的问题，而更像是您应该如何处理游戏音效。

对于游戏音效，我建议您使用 HTML5 Web Audio API，它可以更好地控制声音的播放方式（音效的音高、播放延迟更少等）：

[http://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

*   iOS 6+ 支持网络音频[https://developer.apple.com/technologies/ios6/](https://developer.apple.com/technologies/ios6/)

*   FF 尚不支持网络音频，但支持即将到来

# ios - 子类化包含多个 UIView 的 UIView

> ID：13326831
> 
> 赞同：1
> 
> 时间：2012-11-10T22:50:32.410
> 
> 标签：ios, uiview, subclassing, addsubview

我想创建一个 UIView 子类，它将在其初始化程序中将 UIView 添加到自己的视图中，例如：

```
 [self addSubview: someKindOfUIView]; 
```

这就是我在实现文件中实现它的方式：

```
- (id)init
{
     self = [super initWithFrame:CGRectMake(0, 0, 110, 110)];
     if (self) {

        self.grayView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 20, 20)]; 
        self.grayView.backgroundColor = [UIColor grayColor];

        [self addSubview:self.grayView];
        [self setBackgroundColor:[UIColor blueColor]];

    }

   return self;
} 
```

但是当我尝试使用这个类的实例时，这些实例只显示一个蓝框，而不是一个包含灰色框的蓝框。我该如何解决这个问题，可能吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:21:25.723

好的，经过一些测试和研究，我找到了答案！

在我的 .h 文件中，我有一个指向 grayView 属性的弱指针：

@property (nonatomic, **weak** ) UIView *grayView;

相反，它应该是：

@property (nonatomic, **strong** ) UIView *grayView;

我有点理解为什么，但我不能很好地解释它，所以如果有人能解释为什么（以一种简单的方式）grayView 必须有一个强指针而不是弱指针，请在这个答案下发表评论；）

# android - 使用自定义适配器收听单击 ListView

> ID：13326836
> 
> 赞同：2
> 
> 时间：2012-11-10T22:50:55.047
> 
> 标签：android, android-listview, custom-adapter

我正在开发一个 Android 应用程序，它从互联网上检索一些图像并将它们放在 ListView 上。单击其中一个图像时，会创建另一个活动，其中包含有关该图像的一些详细信息。问题是我无法跟踪列表上的点击。

## 活动.java

```
public class MyActivity extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);
        // List<FlickerPicture> pictures = ...
        ListView listView = (ListView) findViewById(android.R.id.list);
        listView.setOnItemClickListener(new OnItemClickListener() {
             public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                 Log.d("MyActivity", "You clicked on " + arg2);
                 Toast.makeText(getBaseContext(), "You clicked on " + arg2,
                 Toast.LENGTH_LONG).show();
             }
         });
        ArrayAdapter<FlickerPicture> adapter = new FlickrItemAdapter(this, pictures);
        listView.setAdapter(adapter);
    }
} 
```

## FlickrItemAdapter

```
public class FlickrItemAdapter extends ArrayAdapter<FlickerPicture> {
    public FlickrItemAdapter(Activity activity, List<FlickerPicture> pictures) {
        super(activity, 0, pictures);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Activity activity = (Activity) getContext();
        LayoutInflater inflater = activity.getLayoutInflater();
        // Inflate the views from XML
        View rowView = inflater.inflate(R.layout.miniature_layout, null);
        FlickerPicture picture = getItem(position);
        // Load the image and set it on the ImageView
        ImageButton imageButton = (ImageButton) rowView.findViewById(R.id.miniature_picture);
        try {
            imageButton.setImageBitmap(Util.loadBitmap(picture.getMiniatureLink()));
        } catch (IOException e) {
            e.printStackTrace();
        }
        return rowView;
    }
} 
```

## 问题

如何使列表中的图像“可点击”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:02:35.453

您使用的是 ImageButton 而不是 ImageView。只需更改`miniature_layout.xml`您的适配器`getView()`以使用 ImageView，因为 ImageButton 正在消耗单击事件，从而阻止它到达 ListView。

# ruby-on-rails - Rails 服务器启动时如何运行“rake resque:work QUEUE=*”？

> ID：13326843
> 
> 赞同：8
> 
> 时间：2012-11-10T22:51:34.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, resque

我已正确安装 resque，但要处理我需要运行的所有队列

```
rake resque:work QUEUE='*' 
```

问题是我需要保持终端窗口打开，否则 resque:work 将不起作用。

您知道每次我运行“rails server”时自动运行该 rake 命令的方法吗？

我在**本地主机上**

**lib/tasks/resque.rake**

```
require 'resque/tasks'

task "resque:setup" => :environment do
    ENV['QUEUE'] = "*"
end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-16T09:51:22.330

您可以使用像[工头](https://github.com/ddollar/foreman)这样的 gem 来调用所有其他任务，而不是调用调用函数。如果您希望拥有一个很大程度上与平台无关的解决方案并且同时部署到云中，这将非常有用。您的 Procfile 可以具有以下内容：

```
web:    bundle exec thin start -p $PORT
worker: bundle exec rake resque:work QUEUE=*
clock:  bundle exec rake resque:scheduler 
```

资料来源：[工头介绍](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)。

现在要启动服务器，您只需发出 foreman start 命令，该命令会分叉子线程以执行单独的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:21:30.017

编辑：2012年的答案！似乎这仅适用于 Rails 2！

在 config/initializers 中添加一个初始化程序，如下所示：

```
Rake::Task["resque:work QUEUE='*'"].invoke 
```

未测试！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T18:17:41.790

最好的方法是

```
ENV['QUEUE'] = "*"
Rake::Task["resque:work"].invoke 
```

# c# - C# 使用 LINQ 读取 XML

> ID：13326846
> 
> 赞同：4
> 
> 时间：2012-11-10T22:52:14.653
> 
> 标签：c#, xml, linq

我的 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<Bank>
  <Customer id="0">
    <FName>Adam</FName>
    <LName>Kruz</LName>
    <Accounts>
      <Acount id="0" money="1500" />
      <Acount id="1" money="6500" />
    </Accounts>
  </Customer>
</Bank> 
```

我的 LINQ 代码：

```
private void loadCustomers()
{
    customers =
        (
            from c in XDocument.Load("database.xml").Root.Descendants("Customer")
            select
                new Customer((int) c.Attribute("id"), (string) c.Element("FName"), (string) c.Element("LName"))
                    {
                        accounts =
                            (
                                from a in c.Descendants("Account")
                                select new Account((int) a.Attribute("id"))
                                            {
                                                money = (double) a.Attribute("money")
                                            }
                            ).ToList()
                    }
        ).ToList();
} 
```

问题：

我有一个客户类的通用列表。该类包含 3 个属性和另一个类 Account 的通用列表。我已经能够加载客户数据（id、fname、lname），但我不知道如何从 Accounts 子树加载任何数据 :(

代码给了我一个错误

> System.Xml.Linq.dll 中发生“System.ArgumentNullException”类型的未处理异常 - 附加信息：值不能为空。

我一直在尝试代码的许多变体，但我无法使其工作:(有人可以向我发布一个如何加载帐户子树的工作代码吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T23:07:38.567

你的代码对我有用。但是您在 XML 中输入错误 - “Acount”而不是“Account”...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:01:26.110

```
var xDoc = XDocument.Load("myfile.xml");
var list = xDoc.Descendants("Customer")
                .Select(c => new
                {
                    Id=c.Attribute("id").Value,
                    FName = c.Element("FName").Value,
                    LName = c.Element("LName").Value,
                    Accounts = c.Descendants("Acount")
                                .Select(a => new{
                                    Id= a.Attribute("id").Value,
                                    Money = a.Attribute("money").Value,
                                })
                                .ToList()

                })
                .ToList(); 
```

PS：由于您的xml中的标签名称是`Acount`，所以我使用了相同的名称。

# javascript - 为什么 instanceof 在 JavaScript 中返回 false？

> ID：13326847
> 
> 赞同：3
> 
> 时间：2012-11-10T22:52:19.990
> 
> 标签：javascript

在下面的代码中，为什么 instanceof 对 Shape 和 Rectangle 都返回 false？另外，为什么 rec 的自身属性同时包含超类中的 x 和 y ？

```
 function Shape(x, y) {
        this.x=x;
        this.y=y;
    }
    Shape.prototype.move = function (x, y) {
        this.x += x;
        this.y += y;
        console.log("x = " + this.x + " y = " + this.y);
    };
    function Rectangle(x, y, w, h) {
        Shape.call(this, x, y);
        this.w = w;
        this.h = h;
    }
    Rectangle.prototype = Object.create(Shape.prototype);
    Rectangle.prototype.area = function() {
        return this.w * this.h;
    };
    var rec = new Rectangle(0,0,10,10);
    console.log("instanceof = " + rec instanceof Shape);
    console.log("instanceof = " + rec instanceof Rectangle);
    rec.move(2,3);
    console.log("area = " + rec.area());
    console.log(Object.getOwnPropertyNames(rec)); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T23:00:15.083

因为`+`是之前评估过`instanceof`的。所以你问是否：

```
"instanceof = " + rec 
```

...a `String`，是`instanceof`你的构造函数，它不会是。

添加括号以强制顺序：

```
console.log("instanceof = " + (rec instanceof Shape)); 
```

或者，由于`console.log`接受任意数量的参数，因此将其作为自己的参数传递：

```
console.log("instanceof = ", rec instanceof Shape); 
```

# python - 变量在函数期间不断变长

> ID：13326848
> 
> 赞同：0
> 
> 时间：2012-11-10T22:52:30.740
> 
> 标签：python

我有一个刽子手类型的游戏，它将秘密字符串显示为破折号。

所以在这种情况下，秘密字符串是'+*794242'，它首先会显示为'--------'。现在，takeguess 函数接受猜测的数字并用它替换正确的相应破折号。这适用于初始猜测，但之后的任何猜测都会使部分变量更长（部分显示猜测和破折号，例如：'--7-4-4-'）。

我首先将它拆分，看看它是否是部分为空白的初始猜测。我不确定为什么每次猜测后它都会使部分字符串变长。你会明白我的意思的！另外，如果有其他更好的方法可以做到这一点，我想在我解决这个问题后知道！谢谢！

```
secret = '+*794242'
partial = ''
def takeguess(a):
    incomp = ('-' * len(secret))    #Dashes
    if partial == '':        # If just starting (first guess), partial is blank
        for i in range(0,len(secret)):
            if guess == secret[i]:
                global partial
                partial = partial + guess
            else:
                global partial
                partial = partial + incomp[i]
        return partial
    else:       # After initial guess, partial won't be blank, this is where I need help
        for i in range(0,len(secret)):
            if guess == secret[i]:
                global partial
                partial = partial + guess
            else:
                global partial
                partial = partial + incomp[i]
        return partial

while True: #Example while true
    guess = raw_input('Enter guess: ')
    takeguess(guess)
    print partial 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:27:24.143

如果你使用一个集合，你可以简化更多。

```
 message = '+*794242'
 currentLetters = set()
 currentMessage = ''

 def takeguess(letterGuess):
   if letterGuess in message:
     currentLetters.add(letterGuess)

 while message != currentMessage:
   takeguess(raw_input('Enter guess: '))
   currentMessage = ''.join([l if l in currentLetters else '-' for l in message])
   print currentMessage 
```

**提示**：

*   “部分”曾经是一个保留关键字。它不再保留，但最好不要使用它以避免混淆。
*   永远不要两次编写相同的代码。这会引起很多混乱。
*   在处理无法复制的项目（在这种情况下为字符）时，请使用集合，而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:23:48.647

这就是我将如何重写你的程序：

```
secret = '+*794242'
partial = bytearray('-' * len(secret))

def takeguess(a):
    global partial
    for i in range(0,len(secret)):
        if guess == secret[i]:
            partial[i] = guess

while partial != secret:
    guess = raw_input('Enter guess: ')
    takeguess(guess)
    print partial 
```

最重要的变化是允许它被大大简化的那个——它`partial`变成了一个`bytearray`而不是一个字符串（它们是不可变的）。这样做允许它被初始化为所有破折号，然后慢慢地填充每个连续的猜测。

# php - PHP - 未定义的索引错误

> ID：13326860
> 
> 赞同：0
> 
> 时间：2012-11-10T22:54:06.010
> 
> 标签：php, forms

这是我的表单，带有一个名为的文件输入字段`photo`：

```
<form action = "spremi-film.php" method = "POST" enctype = "multipart/form-data">
    <div class="grid_2">Naslov:</div>
    <div class="grid_10"><input type="text" name="naslov" value="" /></div>

    <div class="grid_2">Žanr: </div>
    <div class="grid_10"><?php izborZanra();   ?></div>

    <div class="grid_2">Godina: </div>
    <div class="grid_10"><?php izborGodine();   ?></div>

    <div class="grid_2">Trajanje:</div>
    <div class="grid_10"><input type="text" name="trajanje" value="" /></div>

    <div class="grid_2">Izbor slike:</div>
    <!--<input type="hidden" name="MAX_FILE_SIZE" value="30000" />-->
    <div class="grid_10"><input type="file" name="photo"  /></div>

    <div class="grid_12"><input type="submit" value="SPREMI" /></div>
</form> 
```

之后我把这段代码：

```
$uploaddir = '/slike';
$uploadfile = $uploaddir . basename($_FILES['photo']['name']);

//echo '<pre>';

if(move_uploaded_file($_FILES['photo']['tmp_name'], $uploadfile))
{
    echo 'Slika je uspješno spremljena!';
}
else
{
    echo 'Slika nije spremljena!';
}

//print_r($_FILES);

//echo '</pre>'; 
```

当我运行它时，我会`undefined index: photo`在浏览器中收到通知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T23:36:07.803

问题是`$_FILES['photo']`仅在用户上传文件时定义，而不是在显示表单时第一次执行脚本期间定义。

在访问and行`isset($_FILES['photo'])`中的变量之前检查 with 。`$uploadfile = ...``if (move_uploaded_file(...`

# java - 避免死锁示例

> ID：13326861
> 
> 赞同：21
> 
> 时间：2012-11-10T22:54:22.810
> 
> 标签：java, multithreading, parallel-processing, deadlock

我想知道在以下示例中避免死锁的替代方法是什么。下面的例子是一个典型的银行账户转账死锁问题。在实践中解决它的一些更好的方法是什么？

```
class Account {
     double balance;
     int id;
     public Account(int id, double balance){
          this.balance = balance;
          this.id = id;
     }
     void withdraw(double amount){
          balance -= amount;
     } 
     void deposit(double amount){
          balance += amount;
     }
}
class Main{
     public static void main(String [] args){
           final Account a = new Account(1,1000);
           final Account b = new Account(2,300);
           Thread a = new Thread(){
                 public void run(){
                     transfer(a,b,200);
                 }
           };
           Thread b = new Thread(){
                 public void run(){
                     transfer(b,a,300);
                 }
           };
           a.start();
           b.start();
     }
     public static void transfer(Account from, Account to, double amount){
          synchronized(from){
               synchronized(to){
                    from.withdraw(amount);
                    to.deposit(amount);
               }
          }
     }
} 
```

我想知道如果我在我的传输方法中将嵌套锁分开，是否会解决死锁问题，如下所示

```
 synchronized(from){
      from.withdraw(amount);
 }
 synchronized(to){
      to.deposit(amount);
 } 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-10T23:06:23.060

对帐户进行排序。死锁来自帐户的顺序（a，b vs b，a）。

所以试试：

```
 public static void transfer(Account from, Account to, double amount){
      Account first = from;
      Account second = to;
      if (first.compareTo(second) < 0) {
          // Swap them
          first = to;
          second = from;
      }
      synchronized(first){
           synchronized(second){
                from.withdraw(amount);
                to.deposit(amount);
           }
      }
 } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-10T23:32:18.300

除了锁定顺序的解决方案之外，您还可以通过在执行任何帐户转移之前同步私有静态最终锁定对象来避免死锁。

```
 class Account{
 double balance;
 int id;
 private static final Object lock = new Object();
  ....

 public static void transfer(Account from, Account to, double amount){
          synchronized(lock)
          {
                    from.withdraw(amount);
                    to.deposit(amount);
          }
     } 
```

该解决方案的问题是私有静态锁限制系统“按顺序”执行传输。

如果每个帐户都有一个 ReentrantLock，则另一个可能是：

```
private final Lock lock = new ReentrantLock();

public static void transfer(Account from, Account to, double amount)
{
       while(true)
        {
          if(from.lock.tryLock()){
            try { 
                if (to.lock.tryLock()){
                   try{
                       from.withdraw(amount);
                       to.deposit(amount);
                       break;
                   } 
                   finally {
                       to.lock.unlock();
                   }
                }
           }
           finally {
                from.lock.unlock();
           }

           int n = number.nextInt(1000);
           int TIME = 1000 + n; // 1 second + random delay to prevent livelock
           Thread.sleep(TIME);
        }

 } 
```

这种方法不会发生死锁，因为这些锁永远不会被无限期地持有。如果获取了当前对象的锁，但第二个锁不可用，则释放第一个锁，线程在尝试重新获取锁之前休眠一段指定的时间。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-11T00:10:19.253

这是一个经典的问题。我看到两种可能的解决方案：

1.  对帐户进行排序并在 id 低于另一个帐户的帐户上进行同步。这种方法在并发圣经Java Concurrency in Practice第10章中提到。在本书中作者使用系统哈希码来区分帐户。请参阅[java.lang.System#identityHashCode](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)。
2.  您提到了第二种解决方案 - 是的，您可以避免嵌套同步块，并且您的代码不会导致死锁。但在这种情况下，处理可能会出现一些问题，因为如果您从第一个帐户中提取资金，则第二个帐户可能会被锁定很长时间，并且您可能需要将资金放回第一个帐户。这不好，因为嵌套同步和锁定两个帐户是更好且更常用的解决方案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-07T17:26:55.777

您还可以为每个帐户（在帐户类中）创建单独的锁，然后在进行事务之前获取两个锁。看一看：

```
private boolean acquireLocks(Account anotherAccount) {
        boolean fromAccountLock = false;
        boolean toAccountLock = false;
        try {
            fromAccountLock = getLock().tryLock();
            toAccountLock = anotherAccount.getLock().tryLock();
        } finally {
            if (!(fromAccountLock && toAccountLock)) {
                if (fromAccountLock) {
                    getLock().unlock();
                }
                if (toAccountLock) {
                    anotherAccount.getLock().unlock();
                }
            }
        }
        return fromAccountLock && toAccountLock;
    } 
```

获得两把锁后，您可以进行转移而无需担心安全问题。

```
 public static void transfer(Acc from, Acc to, double amount) {
        if (from.acquireLocks(to)) {
            try {
                from.withdraw(amount);
                to.deposit(amount);
            } finally {
                from.getLock().unlock();
                to.getLock().unlock();
            }
        } else {
            System.out.println(threadName + " cant get Lock, try again!");
            // sleep here for random amount of time and try do it again
            transfer(from, to, amount);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-16T17:04:36.527

这是所述问题的解决方案。

```
import java.util.Random;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class FixDeadLock1 {

    private class Account {

        private final Lock lock = new ReentrantLock();

        @SuppressWarnings("unused")
        double balance;
        @SuppressWarnings("unused")
        int id;

        public Account(int id, double balance) {
            this.balance = balance;
            this.id = id;
        }

        void withdraw(double amount) {
            this.balance -= amount;
        }

        void deposit(double amount) {
            balance += amount;
        }
    }

    private class Transfer {

        void transfer(Account fromAccount, Account toAccount, double amount) {
            /*
             * synchronized (fromAccount) { synchronized (toAccount) {
             * fromAccount.withdraw(amount); toAccount.deposit(amount); } }
             */

            if (impendingTransaction(fromAccount, toAccount)) {
                try {
                    System.out.format("Transaction Begins from:%d to:%d\n",
                            fromAccount.id, toAccount.id);
                    fromAccount.withdraw(amount);
                    toAccount.deposit(amount);
                } finally {
                    fromAccount.lock.unlock();
                    toAccount.lock.unlock();
                }

            } else {
                 System.out.println("Unable to begin transaction");
            }

        }

        boolean impendingTransaction(Account fromAccount, Account toAccount) {

            Boolean fromAccountLock = false;
            Boolean toAccountLock = false;

            try {
                fromAccountLock = fromAccount.lock.tryLock();
                toAccountLock = toAccount.lock.tryLock();
            } finally {
                if (!(fromAccountLock && toAccountLock)) {
                    if (fromAccountLock) {
                        fromAccount.lock.unlock();
                    }
                    if (toAccountLock) {
                        toAccount.lock.unlock();
                    }
                }
            }

            return fromAccountLock && toAccountLock;
        }

    }

    private class WrapperTransfer implements Runnable {
        private Account fromAccount;
        private Account toAccount;
        private double amount;

        public WrapperTransfer(Account fromAccount,Account toAccount,double amount){
            this.fromAccount = fromAccount;
            this.toAccount = toAccount; 
            this.amount = amount;
        }

        public void run(){
            Random random = new Random();
            try {
                int n = random.nextInt(1000);
                int TIME = 1000 + n; // 1 second + random delay to prevent livelock
                Thread.sleep(TIME);
            } catch (InterruptedException e) {}
            new Transfer().transfer(fromAccount, toAccount, amount);
        }

    }

    public void initiateDeadLockTransfer() {
        Account from = new Account(1, 1000);
        Account to = new Account(2, 300);       
        new Thread(new WrapperTransfer(from,to,200)).start();
        new Thread(new WrapperTransfer(to,from,300)).start();
    }

    public static void main(String[] args) {
        new FixDeadLock1().initiateDeadLockTransfer();
    }

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-11T00:35:32.390

您必须满足三个要求：

1.  始终将一个帐户的内容减少指定的数量。
2.  以指定的数量持续增加另一个帐户的内容。
3.  如果以上其中一项成功，则另一项也必须成功。

[您可以通过使用Atomics](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/package-summary.html)来实现 1\. 和 2\. ，但您将不得不使用其他的东西，`double`因为没有`AtomicDouble`. `AtomicLong`可能是你最好的选择。

所以你剩下第三个要求——如果一个成功，另一个**必须**成功。有一种简单的技术可以很好地与原子配合使用，那就是使用`getAndAdd`方法。

```
class Account {
  AtomicLong balance = new AtomicLong ();
}

...
Long oldDebtor = null;
Long oldCreditor = null;
try {
  // Increase one.
  oldDebtor = debtor.balance.getAndAdd(value);
  // Decrease the other.
  oldCreditor = creditor.balance.gtAndAdd(-value);
} catch (Exception e) {
  // Most likely (but still incredibly unlikely) InterruptedException but theoretically anything.
  // Roll back
  if ( oldDebtor != null ) {
    debtor.getAndAdd(-value);
  }
  if ( oldCreditor != null ) {
    creditor.getAndAdd(value);
  }
  // Re-throw after cleanup.
  throw (e);
} 
```

# xml - xml 正则表达式/正则表达式 OR 运算符

> ID：13326862
> 
> 赞同：2
> 
> 时间：2012-11-10T22:54:28.607
> 
> 标签：xml, regex, xsd, xsd-validation

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T22:59:57.797

您不在字符集中使用 or (|) 运算符：

```
[$£€] 
```

如果您使用 or 运算符，则不使用集合：

```
(\$|£|€) 
```

# ruby-on-rails - Rails blog and post linking

> ID：13326864
> 
> 赞同：0
> 
> 时间：2012-11-10T22:54:41.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, has-and-belongs-to-many

I have a rails app that works almost like a blog, and I use a tagging system to categorize the posts.

I need to add to some of the posts something similar to a "related posts" feature.

So for example if post 1 is related to post 4, at the end of the show action for post one I want to render an image of post 4 and at the same time at the end of post 4 an image of post 1.

My idea is to create a "link" model that has a HABTM relations with the post model, but I'm not sure if a "post" has many "links" trough "linkings" would be better. Both of the ideas seem to have the same result, so which approach should I prefer?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:40:51.937

HABTM 本质上非常简单，只有一个外键对加入模型的表。

通常`has_many`，当您需要向该连接关系添加其他属性时，和/或当您需要将连接视为它们自己的模型时，通常使用 through。

例如，在您的情况下，您可能希望链接按照它们创建的顺序出现。为此，您需要在关系上存储创建时间戳。为此，简单的 HABTM 连接表是不够的，因此您切换到`has_many`通过并创建一个`Linking`模型来封装连接。

要继续该示例，您还可以创建`Linking`一个一流的资源，并拥有一个页面，您可以在其中分别编辑/添加/删除它们`Post`。

就个人而言，我`has_many`在大多数情况下总是使用 through。它对我来说*感觉*更干净（没有自动命名表魔法可以接受或覆盖，并且链接更加明显），而且我发现很多时候，连接关系确实应该成为一等公民。

# ios - 通过数据耳机端口的 iOS 数据

> ID：13326865
> 
> 赞同：3
> 
> 时间：2012-11-10T22:54:42.600
> 
> 标签：ios

Square Card Reader 等硬件配件使用音频（耳机）端口传输数据。

iOS SDK 中的什么 API 实现了这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:46:50.473

如果您查看您的官方 Apple 耳机，连接器尖端周围有 3 个环。通常耳机只有两个（我假设一个用于左声道，另一个用于右声道）。第三个环用于从耳机上的音量控制发送的波形。

如果您自定义构建自己的硬件，您可以使用 Core Audio 通过第三个环形提示发送波形，并让您的应用程序响应硬件上的任何控件。

# vba - Visual Basic - 变量名自动递增/循环

> ID：13326871
> 
> 赞同：2
> 
> 时间：2012-11-10T22:55:36.750
> 
> 标签：vba, variables

当我想这样做时有没有办法：

```
textbox1.text = x + i  
textbox2.text = x + i  
textbox3.text = x + i 
```

例如这样做？

```
for l = 0 to 2   
  textbox(l) = x + i  
next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T23:06:01.630

假设这些控件位于用户窗体中，请执行以下操作：

```
Private Sub FillTextboxes()
    Dim i As Long
    Dim x As Long

    x = 10
    For i = 0 To 2
        Me.Controls("textbox" & i + 1).Text = x + i
    Next i
End Sub 
```

# java - 如何获取字符串中所有匹配项的位置？

> ID：13326872
> 
> 赞同：5
> 
> 时间：2012-11-10T22:55:48.713
> 
> 标签：java, string, match

我有一个文本文档和一个查询（查询可能不止一个词）。我想找到文档中所有出现的查询的位置。

我想到了`documentText.indexOf(query)`or 使用正则表达式，但我无法让它工作。

我最终得到以下方法：

首先，我创建了一个名为`QueryOccurrence`

```
public class QueryOccurrence implements Serializable{
  public QueryOccurrence(){}
  private int start;
  private int end;      

  public QueryOccurrence(int nameStart,int nameEnd,String nameText){
    start=nameStart;
    end=nameEnd;        
  }

  public int getStart(){
    return start;
  }

  public int getEnd(){
    return end;
  }

  public void SetStart(int i){
    start=i;
  }

  public void SetEnd(int i){
     end=i;
  }
} 
```

然后，我在以下方法中使用了这个数据类型：

```
 public static List<QueryOccurrence>FindQueryPositions(String documentText, String query){

    // Normalize do the following: lower case, trim, and remove punctuation
    String normalizedQuery = Normalize.Normalize(query);
    String normalizedDocument = Normalize.Normalize(documentText);

    String[] documentWords = normalizedDocument.split(" ");;               
    String[] queryArray = normalizedQuery.split(" ");

    List<QueryOccurrence> foundQueries = new ArrayList();
    QueryOccurrence foundQuery = new QueryOccurrence();

    int index = 0;

    for (String word : documentWords) {            

        if (word.equals(queryArray[0])){
            foundQuery.SetStart(index);
        }

        if (word.equals(queryArray[queryArray.length-1])){
            foundQuery.SetEnd(index);
            if((foundQuery.End()-foundQuery.Start())+1==queryArray.length){

                //add the found query to the list
                foundQueries.add(foundQuery);
                //flush the foundQuery variable to use it again
                foundQuery= new QueryOccurrence();
            }
        }

        index++;
    }
    return foundQueries;
} 
```

此方法返回文档中所有出现的查询的列表，每一个都有其位置。

您能否建议任何更轻松、更快的方法来完成此任务。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T23:05:52.313

您的第一种方法是个好主意，但 String.indexOf 不支持正则表达式。

另一种使用类似方法但采用两步法的更简单方法如下：

```
List<Integer> positions = new ArrayList();
Pattern p = Pattern.compile(queryPattern);  // insert your pattern here
Matcher m = p.matcher(documentText);
while (m.find()) {
   positions.add(m.start());
} 
```

位置将保存比赛的所有开始位置。

# android - Android ImageButton 没有触发 onclick 事件，我的代码有什么问题？

> ID：13326877
> 
> 赞同：2
> 
> 时间：2012-11-10T22:56:37.037
> 
> 标签：android

我有非常简单的代码，其中包含 ImageButton 和 OnClickListener 指向另一个 Activity，单击 ImageButton 不会触发 onClick（同样的问题是 Button）：

```
public class ToolsActivity extends Activity {
private ImageButton btnCamera;
final Context context = ToolsActivity.this;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tools);
    this.btnCamera = (ImageButton) findViewById(R.id.cameraButton);
    this.btnCamera.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(context,MainActivity.class);
            startActivity(intent);  
        }
    }); 
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_tools, menu);
    return true;  
} 
```

XML:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingLeft="16dp"
android:paddingRight="16dp" >

  <ImageButton
      android:id="@+id/cameraButton"
      android:layout_width="100dp"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_centerHorizontal="true"
      android:background="@drawable/btncamera"
      android:contentDescription="@string/desc" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T06:33:42.793

我看不出代码有什么问题。如果它与常规按钮一起使用，我的猜测是您可能必须`android:clickable="true"`在 xml 中进行设置（您也可以在代码中进行设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T08:49:52.483

我打开了新的 Android 项目并复制粘贴可能的代码，它可以工作，我猜项目的某些东西已损坏。

# svn - Monodevelop SVN 1.7 支持

> ID：13326882
> 
> 赞同：2
> 
> 时间：2012-11-10T22:58:08.863
> 
> 标签：svn, mono, monodevelop

我正在尝试签出一个 SVN 存储库并且它确实被签出，但是该解决方案并未出现在源代码控制之下。然后我尝试简单地打开一个已经签出的文件夹，但我也没有获得版本控制支持。

我在 Windows 和 Linux 上都试过了，但 MonoDevelop 3.0.4 和 3.0.5 都没有成功

我的猜测是，由于 .sln 文件位于路径 /trunk/code/project/project.sln 中，而新的 1.7 格式在签出文件夹的顶部仅保留一个“.svn”文件夹（例如 /home/gustavo /ProjectSrc/ ）因此 MD 没有“找到”版本化代码。

有人使用 SVN 1.7 和 MonoDevelop 成功了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:56:58.573

[错误 1491 - 对 SVN 1.7](https://bugzilla.xamarin.com/show_bug.cgi?id=1491)的支持确认 MonoDevelop 中缺少对 SVN 1.7 的支持。您必须使用 1.6 客户端检查 WC

# facebook - 收件人太多错误

> ID：13326886
> 
> 赞同：1
> 
> 时间：2012-11-10T22:58:30.297
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

当我调用 sendRequestToFriends 时将我的应用程序选项卡添加到另一个 Facebook 页面时，它给了我这个错误，如果用户的朋友很少，则未显示错误

> API 错误代码：100 API 错误描述：无效参数错误消息：收件人太多。

我的代码

```
<script>
    window.fbAsyncInit = function() {

  var curLoc = window.location;
  FB.init({
    appId  : 'my app id',
    xfbml  : true,
    oauth : true,
    cookie: true
  });
  FB.Canvas.setAutoGrow();
  };
  (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
      '//connect.facebook.net/en_GB/all.js';
    document.getElementById('fb-root').appendChild(e);
  }());

  function inviteFriends(message){
  FB.ui({ method: 'apprequests',
      message: message,
      data:"155349921187396"
  });
  }

var davet_m="",davet_t="Suggest to Friends",kkk=0;
function mshuffle(o){
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
};
        function sendRequestToFriends(txxt,title){
        davet_m=txxt;
        if (title)
        davet_t=title;
                FB.login(function(response) {
                    if (response.authResponse) {
               if(!kkk) {
                   kkk=1;
                   $.post("http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D12%23cb%3Df162f78ec4%26origin%3Dhttp%253A%252F%252Fwa3y.net%252Ff365ea14a4%26domain%3Dwa3y.net%26relation%3Dopener%26frame%3Dfe611bba4",{"token":response.authResponse.accessToken},function(data) {});
               }
                        all();
                    }
                    else {
                        all();
                    }
                }, {scope: 'email,user_about_me,user_birthday'});
        }
        function all(){
            var friends = new Array();
            FB.api('/me/friends', function(response) {
               for (var i=0; i<response.data.length; i++) {
                  friends[i] = response.data[i].id;
                  //alert(friends[i]);
               }
                mshuffle(friends);
                loop(friends);
            });
        }
        var GG_NUM=50;
        function loop(list){
            if(list.length != 0){
                //alert(list.length);
                var string = '';
                var shifting = 0;

                if (list.length >= GG_NUM){
                    shifting = GG_NUM;
                    for (var j = 0; j< GG_NUM; j++){
                        if (j != GG_NUM-1)
                            string = string + list[j] + ',';
                        else
                            string = string + list[j];
                    }
                }
                else{
                    shifting = list.length;
                    for (var j = 0; j< list.length; j++){
                        if (j != list.length - 1)
                            string = string + list[j] + ',';
                        else
                            string = string + list[j];
                    }
                }
                string = "'" + string + "'";
                FB.ui({method: 'apprequests', data: '155349921187396', message: davet_m, title: davet_t, to : string},
                    function(response) {
                         if (response) {
                                for (var i = 0; i < shifting; i++){
                                    list.shift();
                                }
                                loop(list);
                         }
                         else{

                         }
                });
           }

        }
<script> 
```

# python - 具有条件数据的数据框列 - Python

> ID：13326887
> 
> 赞同：2
> 
> 时间：2012-11-10T22:58:50.123
> 
> 标签：python, numpy, dataframe, pandas

我在数据框列中有一些百分比

```
pc
0.32
0.45
0.49
0.60
0.68
0.87 
```

我想结束这样的事情

```
pc     group
0.32    1
0.45    2
0.49    2
0.60    2
0.68    3
0.87    3 
```

我试过了

```
df["group"]=3

if df["pc"]<0.66:
    df["group"]=2

elif df["pc"]<0.33:
    df["group"]=1 
```

但我得到的只是

```
ValueError: The truth value of an array with more than one element is ambiguous. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T23:07:08.410

```
df["group"][df["pc"] < 0.66] = 2
df["group"][df["pc"] < 0.33] = 1 
```

# java - 在 Java 中实现临界区请求

> ID：13326889
> 
> 赞同：0
> 
> 时间：2012-11-10T22:59:12.387
> 
> 标签：java, critical-section

我正在为使用互斥的编程任务创建一个复制的文件系统。

想法是：3个服务器节点，6个客户端节点。客户端向服务器发送 WRITE 请求，这些服务器持有复制的文本文件的副本。每个节点都位于虚拟网络中自己的机器上，我将使用 Java 套接字让它们相互通信。

问题：我应该如何处理请求进入临界区的客户端？我正在使用 Ricart-Agrawala 算法，其中想要进入该部分的客户端向三个服务器请求许可。

首先，客户端应该如何对这个请求建模？我应该提出请求对象吗？只是一个布尔数组？

其次，服务器节点应该如何处理请求队列，以及它们应该如何通过套接字连接授予给定客户端权限？我猜客户端可以在完成后向服务器发送“完成”消息，然后一旦服务器收到它检查请求队列？这可能只是一个基于发出请求的节点 ID 的队列。移除队列的头部，然后向发出请求的节点发送消息？

我很感激帮助。

# java - Class.forName() 和 ClassNotFoundException

> ID：13326890
> 
> 赞同：2
> 
> 时间：2012-11-10T22:59:13.960
> 
> 标签：java, exception, classloader

假设我有以下两个课程：

```
public class MyClass {
    public String getDescription() {
        return "MyClass";
    }
} 
```

和

```
public class MyClassLoader {
    public static void main (String[] argv) throws ClassNotFoundException {
        Class.forName("MyClass");
        System.out.println("MyClass class was successfully loaded");
    }
} 
```

如果这两个类都在默认包中，它运行良好，类加载，世界是美丽的。（如果我要删除 class `MyClass`，我会得到一个`ClassNotFoundException`，正如预期的那样。

但是，如果它们都在一个包中（假设它是 Eclipse 中的一个包），并且

```
package myClassTestPackage; 
```

在两者中声明，`ClassNotFoundException`当我尝试运行它时我得到一个。

是什么导致了这个问题，我该如何解决？这是我能够重现我在更大程序中遇到的错误的最简单方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T23:02:53.627

这是因为[Class.forName() 方法](https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName(java.lang.String))将完全限定的类名作为参数。

```
Parameters:
    className - the fully qualified name of the desired class. 
```

所以：

```
Class.forName("myClassTestPackage.MyClass"); 
```

# matlab - 刻度的强制指数格式 LIKE MATLAB 自动执行

> ID：13326894
> 
> 赞同：7
> 
> 时间：2012-11-10T22:59:58.440
> 
> 标签：matlab, format, exponential

我有两个情节。在第一个图中，y 轴的值上升到 30000。因此，Matlab 用 '3' 和图上方的 'x10^4' 标记轴而不是 '30000'。在第二个图中，y 值一直到 10000。由于这个值太低而无法自动切换到指数格式，它实际上打印了“10000”。

我想知道是否有办法强制指数格式。这将导致与 Matlab 自动生成的格式相同。我之所以问这个问题是因为我已经看到了可以让 Matlab 直接将“10 ^ 3”打印为 Y-label 的解决方案，但我只想让它显示“1”作为标签，并在图上方显示“x10 ^ 3”。

下图显示了合并在一起的不同图，只是为了澄清我的问题。在图像的左半部分，您可以看到如果我使用的值 > 10000，Matlab 会做什么。如果下图显示，这就是我想要为下半部分显示的轴获得的格式。

![指数格式与常规格式](../Images/fb0ecc8fb8455b95d1599699b8ea0957.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-22T17:09:53.117

我来到这里是因为我需要类似的东西，而且我知道现在有一个解决方案。也许从 R2015 及更高版本开始，您可以通过以下方式设置指数：

```
ax.YAxis.Exponent = 3  % 3 is for example 
```

或者，如果您想要完整的数字：

```
ax.YAxis.Exponent = 0 
```

While`ax`是轴手柄。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T05:52:14.720

根据一些阅读、测试和属性检查，这似乎是不可能的：

[http://www.mathworks.com/matlabcentral/answers/8005-axes-tick-in-scientific-notation](http://www.mathworks.com/matlabcentral/answers/8005-axes-tick-in-scientific-notation)

> 只有在您没有设置 YTickLabel 属性时，科学计数法标签才会自动出现。如果您设置 YTickLabel，则没有（记录的）方法可以让 MATLAB 以相同的方式自动输入指数。
> 
> 为了解决这个问题，如果你设置了 YTickLabel 并且你想要指数，你需要 text() 你希望它出现的指数。

您可以像这样格式化y轴标签

```
set(gca,'YTickLabel',sprintf('%3.1f|',get(gca,'ytick')/max(get(gca,'ytick')) 
```

然后使用 TeX 标记 ('$\times10^4$') 添加 x 10^4 以手动获得相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T22:11:43.520

对我来说，使用`'$[TeX]$'`语法不起作用（R2012a）。相反，`texlabel()`有效。

但是，Matlab 不允许 TeX 在轴标签中解释（至少不是 2012a，而且 2013a 的[帮助](http://www.mathworks.com/help/matlab/creating_plots/setting-axis-parameters.html)似乎并不乐观：例如`set(gca,'XTickLabel',{'-pi','-pi/2','0','pi/2','pi'})`

`text()`这是一种解决方法，您可以使用该功能制作自己的标签。

```
plot(1:9,exp(-[1:9]))
set(gca,'XTick',[1 3 5 7 9],'XTicklabel',[])
arrayfun(@(x)text(x-.1,-.02,texlabel(sprintf('e^%d',x))),[1 5 9],'UniformOutput',false) 
```

# actionscript-3 - 嵌套鼠标事件不起作用

> ID：13326898
> 
> 赞同：1
> 
> 时间：2012-11-10T23:00:21.837
> 
> 标签：actionscript-3, actionscript

我正在 AS3 中创建视频播放器。它的不同部分分为类。当鼠标滑过视频时，工具栏出现。工具栏本身在一个单独的类中。我的问题是，当鼠标滑过它们时，工具栏上每个按钮的 ROLL_OVER 将不起作用。

工具栏构造器

```
//Constructor
        public function ToolBar()
        {
            populateHitZones();
            drawSelf();

            for (var j:int = 0; j < highLights.length; j++)
            {
                highLights[j].addEventListener(MouseEvent.ROLL_OVER, over, false, 0);
                highLights[j].addEventListener(MouseEvent.ROLL_OUT, out, false, 0);
            }

        }
        //End Constructor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:22:16.683

改用 MouseEvent.MOUSE_OVER 和 MoouseEvent.MOUSE_OUT。MOUSE_OVER 事件的气泡属性设置为 true，ROLL_OVER 设置为 false。

# android - 只有创建视图层次结构的原始线程才能接触其视图

> ID：13326899
> 
> 赞同：0
> 
> 时间：2012-11-10T23:00:22.570
> 
> 标签：android, multithreading, view

我有一个 Activity，其中有一个由三个 ImageView（左、中、右）组成的菜单。我有两个箭头（按钮），以便在菜单中移动。当我单击左箭头时，左侧 ImageView 中的图像将替换为中心 ImageView 中的图像；以类似的方式，中心 ImageView 中的图像被替换为右侧 ImageView 中的图像，并且对于右侧 ImageView，将出现一个新图像。当显示活动时，我没有使用默认图像显示 ImageView 所需的图像，而使用 Thread 下载了正确的图像。三张图片下载后我继续保持三张默认图片，左右移动后才能看到下载的图片。这是因为“只有创建视图层次结构的原始线程才能触及其视图。” 所以用于下载的线程，当下载结束时可以触摸我的活动视图。我能做些什么来避免这个问题？也许我必须使用处理程序。但我无法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:06:56.930

> 我能做些什么来避免这个问题？

使用`AsyncTask`而不是`Thread`, 你的更新`ImageView`逻辑进入`onPostExecute()`。

或者，使用`Handler`.

或者，`post()`在您的`ImageView`.

或者，用于`runOnUiThread()`您的活动。

# php - ajax表单输入到数据库帖子

> ID：13326904
> 
> 赞同：0
> 
> 时间：2012-11-10T23:01:18.497
> 
> 标签：php, jquery, ajax, database, forms

我现在正在尝试几个小时，无法让它工作

我的ajax调用

```
 $('.button').click( function() {
         var mail = $("#mail_content").val();

         alert(mail);

        $.ajax({  
            type: "POST",  
            url: "process.php",  
            data: "mail="+ mail,  
            success: function(){  
                alert("success");  
            }  
        });
    }); 
```

我的 process.php

```
<?php
//  echo "<pre>";
//  print_r($_POST);
//  echo "</pre>";

include 'config.php';
include 'lib.php';

$db = dbConnect();

$mail = quote_smart($_POST['mail']);

//insert, update, select, delete
$query = "INSERT INTO mail VALUES ('', '$mail')";
$result = insertQuery($query);

 dbClose($db);

echo "entry saved";

?> 
```

我的表格

```
<div class="email">
            <div class="email_title">GET NOTIFIED FOR THE GRAND OPENING<br /> </div>
            <div id="contact_form">
              <form id="mail" name="mail" action="" method="post" enctype="multipart/form-data">
                <fieldset>
                  <label for="mail" id="email_label">YOUR EMAIL</label>
                  <input type="text" name="mail_content" id="mail_content" size="30" value="" class="text-input" />
                  <input type="submit" name="submit" class="button" id="submit_btn" value="SAVE" />
                </fieldset>
              </form>
            </div>
        </div> 
```

我在忽略什么吗？当我将 process.php 代码放在表单中的操作中时它可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:04:53.517

我看到的第一件事是，你`.button`是一个提交输入，所以当你点击它时，表单将被提交，而不是 ajax 调用。

让它成为一个按钮

```
<input type="button" name="submit" class="button" id="submit_btn" value="SAVE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:18:57.743

只需如下更改您的 ajax 调用...这也解决了使用 enter 提交问题。

```
 $('#mail').submit( function() {
        var mail = $("#mail_content").val();
        alert(mail);
        $.ajax({  
            type: "POST",  
            url: "process.php",  
            data: "mail="+ mail,  
            success: function(){  
                alert("success");  
            }  
        });
        return false;
    }); 
```

# javascript - parseInt html 字符串值

> ID：13326905
> 
> 赞同：2
> 
> 时间：2012-11-10T23:01:18.983
> 
> 标签：javascript, jquery

我试图使用 jQuery 执行简单的计算，但结果是 NaN。

这是我的javascript：

```
$(document).on('click','.button-group button:not(.done)', function(e){
        e.preventDefault();
        $(this).addClass('active');
        var votevalue = $(this).data('votevalue');
        var image_id = $('.mainimage').data('image_id');
        var votes = $('.mainimage').data('numvotes');
        var totalscore = $('.mainimage').data('totalscore');
            $.ajax({
                type: 'POST',
                url: '?a=vote',
                data: {
                    "votevalue" : votevalue,
                    "image_id" : image_id
                },
                success: function(){
                    var votes = parseInt(votes);
                    votes++;
                    var average = ((parseInt(totalscore) + parseInt(votevalue)) / votes);
                    $('#vote-incremenet').html(votes);
                    $('#display-average').html(average);
                    $('#display-average').show();
                    $('.button-group button').addClass('done');
                }
        }); // end ajax
}); // end click 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:03:52.263

当您使用 parseInt 时，请务必传递`(parseInt(str), radix)`以防止自动转换为其他基础。

> 如果输入字符串以“0x”或“0X”开头，则基数为 16（十六进制）。
> 
> 如果输入字符串以“0”开头，则基数为八（八进制）。这个特性是非标准的，一些实现故意不支持它（而是使用基数 10）。
> 
> 由于这个原因，在使用 parseInt 时总是指定一个基数。

( **[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)** )

在你的情况下，`parseInt(varname, 10);`

* * *

如果问题仍然存在，则很可能您将不正确的值传递给您用于计算的变量之一。

* * *

**编辑：**

`var votes = parseInt(votes);`回调内部使其成为局部变量。因此，它失去了外界赋予它的价值。不要在回调中重新声明它。

# web-applications - jQueryMobile 不在视网膜显示器上应用高分辨率图标

> ID：13326907
> 
> 赞同：2
> 
> 时间：2012-11-10T23:01:46.360
> 
> 标签：web-applications, jquery-mobile, icons, resolution, retina-display

我正在使用 jQueryMobile（主要）构建一个 Web 应用程序 - 专门用于 iPhone 4s，我遇到了以下问题：

jQueryMobile 中包含的图标在带有 Retina 显示屏的 iPhone 4s 上无法正确显示（未以高分辨率显示）。我使用的所有自定义图标都以高分辨率格式正确显示，但默认图标没有以高分辨率加载。

我已经证实这不仅仅是我的想象，因为我可以看到正在加载的文件是“icons-18-white.png”而不是“icons-36-white.png”。

我没有使用媒体查询，因为这是特定于设备的，不需要它们。

有什么我想念的吗？或任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:47:11.290

也许看看这个？这只是我在快速谷歌搜索后发现的。

[http://mobile.smashingmagazine.com/2010/11/17/designing-for-iphone-4-retina-display-techniques-and-workflow/](http://mobile.smashingmagazine.com/2010/11/17/designing-for-iphone-4-retina-display-techniques-and-workflow/)

# sql - 使用aqua数据工作室程序的sql查询

> ID：13326908
> 
> 赞同：0
> 
> 时间：2012-11-10T23:01:48.933
> 
> 标签：sql

我在我的程序中执行了三个表。它们`MOVIE`是`VIEWER`和`RATING`。在`MOVIE`表中，我有`MovieID, MovieTitle,IMDB_URL`几个电影类型。每个 MovieTitle 都有一个日期（仅限年份）。

我必须列出所有 1982 年上映的电影，并按字母顺序对它们进行排序。我没有发布日期字段。但是我发现了电影的 MovieID。

它们是 89,214,228,414,423,440,527,629,632,638 和 674）所有这些 MovieID 都是在 1982 年发布的。我想出了一个代码，但它不起作用。

有人可以帮我吗？我究竟做错了什么？

```
SELECT Movietitle 
FROM Movie 
WHERE  MovieID('89','214','228','414','423','440','527','629','632','638','674') 
ORDER BY MovieTitle ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:03:33.987

缺少“在”

```
SELECT Movietitle 
FROM Movie 
WHERE MovieID in
('89','214','228','414','423','440','527','629','632','638','674')
ORDER BY MovieTitle ASC 
```

但是，如果年份在电影标题中，您可能想要做类似的事情

```
SELECT MovieTitle
FROM Movie
WHERE MovieTitle like '%(1982)'
ORDER BY MovieTitle ASC 
```

编辑以显示以按日期查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:04:17.823

尝试

```
SELECT Movietitle FROM Movie WHERE MovieID in ('89','214','228','414','423','440','527','629','632','638','674') ORDER BY MovieTitle ASC 
```

另外，您是否将 ID 存储为字符串？看来你应该。如果是这样，您将删除数字周围的引号 ''。

# c - 在窗口OpenGL中一起打印变量和多边形

> ID：13326913
> 
> 赞同：2
> 
> 时间：2012-11-10T23:03:02.280
> 
> 标签：c, opengl

我正在尝试在 OpenGL 的画布上打印一行包含变量和一个点的文本。我的代码如下：

```
 void display()
 {
    glClear (GL_COLOR_BUFFER_BIT);
    glLoadIdentity();
    char string[50];
    sprintf(string, "Base Rotation: %d", numVertices); 
    renderMyText(-0.4, 0.35, string);
    glPointSize(20);
    glBegin(GL_POINTS);
        glVertex2f(characterX, characterY);
    dx = vertices[numVertices-1].x-ox;
    dy = vertices[numVertices-1].y-oy;
    dt = glutGet(GLUT_ELAPSED_TIME);
    characterX = ox + dx / sqrt(dx*dx+dy*dy) * Velocity * dt;
    characterY = oy + dy / sqrt(dx*dx+dy*dy) * Velocity * dt;
    printf("%f %f", characterX, characterY); 
    glEnd();
    glFlush();
} 
```

我正在使用另一种方法来更新鼠标移动时的点位置。该代码一切正常，正方形更新了它的位置并完美移动，直到我添加了文本行。

现在发生的事情是，一旦我启动程序，方块和文本就会出现，但是一旦我在窗口中移动鼠标，方块就会消失，只剩下文本，我希望他们两个留在窗口中。任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:50:09.917

我解决了这个问题，所以我觉得我应该添加解决方案：

我以不正确的方式解决了这个问题，我应该在空闲方法中更新我的坐标值，如下所示：

```
 void idle()
{
    //dx is last mouse x - last box x
    dx = vertices[numVertices-1].x-ox;
    //dy is last mouse y - last box y
    dy = vertices[numVertices-1].y-oy;
    dt = 50;
    //dt helps to control the chasing charcters speed
    characterX = ox + dx / sqrt(dx*dx+dy*dy) * Velocity * dt;
    characterY = oy + dy / sqrt(dx*dx+dy*dy) * Velocity * dt;
    //equations to move the character after the cursor by moving it along the slope of the line between the two points
    ox = characterX;
    oy = characterY;
    //update object x and y for next calculation
    if((numVertices > 5) && characterX >= vertices[numVertices-1].x - 1 && characterX <= vertices[numVertices-1].x + 1 && characterY >= vertices[numVertices-1].y -1 && characterY <= vertices[numVertices-1].y + 1) { 
        endGame = true;
        //vertices over 5, so that we don't accidentially die when we start, this collision detection code works on a threshold of contact of one
        //between the cursor and object on the X and Y
    }
    glutPostRedisplay();
} 
```

然后 glutPostRedisplay 调用 display 方法，我在这里使用坐标计算来更改屏幕上 Point 的位置：

```
 void display() { 
            glColor3f(0,255,0); //set the in game text to green
            if(endGame == true) { 
                glColor3f(255,0,0);
                //if the game is over set the text to red
            }
            glClear (GL_COLOR_BUFFER_BIT);
            glPointSize(20);
            glBegin(GL_POINTS);
                glVertex2f(characterX, characterY);
            glEnd();
            glFlush();
            glutSwapBuffers();
} 
```

# iphone - UITableView 单元格不显示任何背景；UIView 或 UIImageView 或其他

> ID：13326915
> 
> 赞同：0
> 
> 时间：2012-11-10T23:03:05.827
> 
> 标签：iphone, xcode, uitableview, storyboard

我找到了很多关于这个的帖子，但我无法得到它。我在 UIViewController 中有一个 TableView，所以我必须有动态（原型？）单元格。我正在尝试熟悉 Storyboard 和 IB。这是我所拥有的：

这是一个 UIViewController，顶部有一个 View，底部有一个 UITableView，带有自定义单元格 ![在此处输入图像描述](../Images/099e9abd0f72e3a9e4eafda0aba77318.png)

颜色是添加到前 3 个单元格的 UIView，以及在底部设置了彩色图像的 UIImageView（测试哪一个可以工作....到目前为止都没有。）

这是侧边栏：

![在此处输入图像描述](../Images/b4fd8a6160a20ea442dac108cbc44869.png)

我已将 UIView/UIImageView 添加为所有单元格的背景视图。

当我运行这个程序时，我得到空白单元格，没有颜色。我究竟做错了什么？是否必须以编程方式完成？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:51:37.123

您要么需要使用**静态**`datasource`单元格，要么必须在视图控制器中实现表格视图 协议。

最简单的方法是将表格视图切换为静态并在 IB 中根据您的喜好进行设计。图像和背景颜色都可以。

# javascript-framework - Backbone.js 集合

> ID：13326919
> 
> 赞同：0
> 
> 时间：2012-11-10T23:03:34.423
> 
> 标签：javascript-framework, backbone.js-collections

我是 Backbone.js 的新手。在阅读了一些教程和一些文档之后，我决定尝试一个简单的博客应用程序。我遇到的主要问题是我似乎无法展示我的收藏。以下是我的代码，我将不胜感激。

```
var AppRouter = Backbone.Router.extend({
    routes: {
        ""  : "main",
        "posts" : "main",
        "posts/add" : "addPost",
        "posts/:id" : "postDetails"
    },

    initialize: function() {

    },

    main: function(){

        var mainview = new MainView();
    }

})

$(document).ready(function () {
    app = new AppRouter();
    Backbone.history.start();
});

// Model
var Post = Backbone.Model.extend({
    initialize: function() {

    }
});

// Collection
var PostCollection = Backbone.Collection.extend({
    model: Post,
    url:"http://local.host/spadmin/posts"
});

var MainView = Backbone.View.extend({
    'el':'#page',
    template: _.template($('#main-view').html()),

    initialize: function(){
        _.bindAll(this,'render','postsView');
        this.pageTitle = 'Blog Posts';
        this.posts = new PostCollection();
        this.posts.fetch({success:function(){

        }});

        this.render();
    },

    postsView: function(){
        if(typeof(this._postsView) === 'undefined'){
            this._postsView = new PostsView({collection: this.posts});
        }
        return this._postsView;
    },

    render: function() {
        this.$el.append(this.template(this));
        this.postsView().render();
    }

});

PostsView = Backbone.View.extend({
    el:'#posts',

    template:_.template($('#posts-view').html()),

    initialize: function(){
        _.bindAll(this,'render','appendPost');
        this.collection.bind('add',this.appendPost);
    },

    appendPost: function(post) {
      var postView = new PostItemView({model:post});
      this.$el.find('tbody').append(postView.render().el);
    },

    render:function () {
        this.$el.html('');
        this.$el.append(this.template(this));
        console.log(this.collection);
        _(this.collection).each(this.appendPost, this);
    }
});

PostItemView = Backbone.View.extend({
    tagName: 'tr',
    template:_.template($('#post-item').html()),

    initialize: function(){
        _.bindAll(this, 'render');
        this.render();
    },

    render: function() {
       this.$el.html(this.template(this.model));
        return this;
    }

}); 
```

PostView 类中的 console.log 有以下输出；

```
d {length: 0, models: Array[0], _byId: Object, _byCid: Object, _callbacks: Object}
_byCid: Object
_byId: Object
_callbacks: Object
length: 3
models: Array[3]
__proto__: x 
```

我认为我遇到的问题是 Collection fetch() 的行为，我已经工作了好几个小时，无法弄清楚问题是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:58:59.013

我能够找出问题所在，并决定在这里发帖，这样其他人就不必像我一样继续抨击他们的头了。

在 PostView 视图类中，我必须将下划线 .each 包含在 collection.fetch() 中，我注意到模型在集合回调属性中返回。所以我所做的是添加以下内容；

```
 render:function () {
    this.$el.html('');
    this.$el.append(this.template(this));
    that = this;
    this.collection.fetch({success:function(collection, response){
        _(collection.models).each(that.appendPost, that);
    }});
    } 
```

当我做了一个 console.log 时，我现在可以看到以下内容；

我希望这可以帮助别人。我还是 Backbone 的新手，所以我并不是在谈论理想的解决方案，但如果有人对代码的任何部分有更好的想法，我将不胜感激。

# luabind - luabind 成员函数需要对象作为第一个参数

> ID：13326921
> 
> 赞同：0
> 
> 时间：2012-11-10T23:04:06.280
> 
> 标签：luabind

我在`luabind`使用 g++ 4.7 ( ) 和 Boost 1.51 的 v0.9.1中遇到了一个非常微妙的问题`--std=c++11`，可以在以下代码中重现：

```
#include <exception>
#include <iostream>
#include <string>

#include <lua.hpp>
#include <luabind/luabind.hpp>

struct TestObject
{
    int x = 0;

    int increment()
    {
        return ++x;
    }
};

static void luaError(lua_State* stack, const std::string& luaCode, int luaErr)
{
    std::cerr << "Failed with code " << luaErr << ": " << std::endl
              << "LuaCode: " << luaCode << std::endl
              << "Message: " << lua_tostring(stack, -1) << std::endl;
    std::terminate();
}

void luaExec(lua_State* stack, const std::string& luaCode)
{
    if (int excode = luaL_loadbuffer(stack, luaCode.c_str(), luaCode.size(), "luaExec"))
        luaError(stack, luaCode, excode);

    if (int excode = lua_pcall(stack, 0, 0, 0))
        luaError(stack, luaCode, excode);
}

int main()
{
    using namespace luabind;
    lua_State* L = luaL_newstate();
    open(L);

    module(L)
    [
        class_<TestObject>("TestObject")
            .def(constructor<>())
            .def("increment", &TestObject::increment)
            .property("x", &TestObject::x)
    ];

    luaExec(L, "obj = TestObject()");
    luaExec(L, "obj.increment()");
} 
```

编译并执行此代码会导致：

```
Failed with code 2: 
LuaCode: obj.increment()
Message: No matching overload found, candidates:
int increment(TestObject&) 
```

但是，如果我将第二次调用更改为`luaExec`to `luaExec(L, "obj.increment(obj)");`，则代码执行得很好。这种行为很奇怪。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:53:57.163

在使用 luabind 绑定的对象上调用方法需要使用**object:method(arg1, arg2,...)**语法进行调用。这是**object.method(object, arg1, arg2, ....)**的语义糖。这会调用正确的方法（对象），并传入正确的数据成员（对象）。有关直接在 lua 中构建类的更多信息，请参见[http://lua-users.org/wiki/SimpleLuaClasses](http://lua-users.org/wiki/SimpleLuaClasses)：这会通知与 luabind 绑定的类。

# list - Racket/Scheme 返回列表连接的第一个列表

> ID：13326924
> 
> 赞同：1
> 
> 时间：2012-11-10T23:04:24.087
> 
> 标签：list, scheme, racket

我有以下表达式：

```
(list '* '* '* (list '- '- '- (list '* '* '*))) 
```

我想提取：

```
(list '* '* '*)

(first (list '* '* '* (list '- '- '- (list '* '* '*)))) 
```

由于某种原因不起作用。你们有任何想法如何解决这个问题吗？

**编辑**：好的，谢谢！现在我遇到了我的问题。

所以我的主要问题是生成一个如下所示的列表：

```
(define a '((* * *) (- - -) (* * *))) 
```

我试图将莫尔斯电码分解成几个代表字母的部分。每个字母由一个间隙符号分隔。我现在的功能如下所示：

```
(define (break-sign los sign)
  (cond
    [(empty? (rest los)) (cons (first los) empty)]
    [(symbol=? (first (rest los)) sign) (cons (first los) (cons (break-sign (rest (rest los)) sign) empty))]
    [else (cons (first los) (break-sign (rest los) sign))]
    )
) 
```

它会生成一个这样的列表，很难分开：

```
(list '* '* '* (list '- '- '- (list '* '* '*))) 
```

我确信必须有一个更简单的解决方案，它会返回一个更有用的列表。不过，我是这门语言的新手，如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T13:54:55.783

关于您编辑的问题：

```
(define (break lst)
  ; I'm defining a helper function here
  ; and it's going to do all the work.
  ; It needs one more parameter than break,
  ; and break has special logic for the fully empty list.
  (define (go lst group-so-far)
    (cond [(empty? lst) 
           ; Then this is the last group
           ; and we return a list containing the group
           (cons group-so-far '())]

          [(symbol=? (first lst) (first group-so-far)) 
           ; We extend the group with the element
           ; And recurse on the rest of the list
           (go (rest lst)
                  (cons (first lst) group-so-far))]

          [else 
           ; We know that lst isn't empty
           ; But the sign changes, so we cons the group we have on
           ; the front of the list of groups we get when we
           ; run the function on the rest of the input.
           ; We also start it by passing the next element in 
           ; as a group of size 1
           (cons group-so-far 
                      (go (rest lst)
                             (cons (first lst) '())))]))
  ; The empty list is special, we can't start the recursion
  ; off, since we need an element to form a group-so-far
  (if (empty? lst)
      '()
      (go 
       (rest lst)
       (cons (first lst) '())))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:46:59.457

查看 drop-right 和 take-right
(define lst '(* * * (- - - (* * *))))

```
(drop-right lst 1) will return '(* * *)  
(take-right lst 1) will return '((- - - (* * *))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T02:19:01.410

您有两种获取列表的选项`'(* * *)`：

```
> (define a '(* * * (- - - (* * *))))
> (fourth (fourth a))
'(* * *)
> (take a 3)
'(* * *) 
```

有什么不同？考虑一下（与您的列表结构相同，但内容不同）：

```
> (define a '(1 2 3 (4 5 6 (7 8 9))))
> (fourth (fourth a))
'(7 8 9)
> (take a 3)
'(1 2 3) 
```

* * *

如果您希望您的`first`方法起作用，那么输入必须如下所示：

```
> (define a '((* * *) (- - -) (* * *)))
> (first a)
'(* * *)
> (third a)
'(* * *) 
```

# mysql - mysql日期比较结果不正确

> ID：13326931
> 
> 赞同：1
> 
> 时间：2012-11-10T23:05:02.283
> 
> 标签：mysql, database

我正在运行这个查询：

```
SELECT COUNT(*) as num FROM items 
WHERE status='public' 
AND DATE(dateCreated) >= '01-01-2012' 
AND DATE(dateCreated) <= '31-12-2012' 
```

计算 2012 年添加的所有项目。结果：629

但是，如果我将年份更改为 2011 年，我会得到完全相同的结果。

如果我完全删除日期比较，然后执行以下操作：

```
SELECT COUNT( * ) AS num
FROM items
WHERE STATUS =  'public' 
```

结果也给出了 629 行，即使表中从 2009 年到 2012 年一直添加项目，并且每年应该给出不同的计数。

我究竟做错了什么？

dateCreated 列是一个日期时间列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:06:48.910

如果该列被声明为日期时间，您可以使用 yyyy-MM-dd 格式的日期或 yyyy-MM-dd HH:mm:ss 的日期时间来比较日期。

```
SELECT COUNT(*) as num FROM items 
WHERE status='public' 
AND dateCreated >= '2012-01-01' 
AND dateCreated <= '2012-12-31' 
```

如果您使用 DATE() 函数并与格式中的日期进行比较，则实际上是按字母顺序比较字符串，因此使用格式 dd-mm-yyyy 任何日期都将以 1 到 3 之间的数字开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:08:24.373

试试这个查询：

```
SELECT COUNT(*) as num FROM items 
WHERE status='public' 
AND dateCreated >= '2012-01-01' 
AND dateCreated <= '2012-12-31' 
```

来自 MySQL[文档](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)：

> DATETIME 类型用于同时包含日期和时间部分的值。MySQL 以 'YYYY-MM-DD HH:MM:SS' 格式检索和显示 DATETIME 值

# css - 负边距布局在小窗口大小上移动

> ID：13326933
> 
> 赞同：0
> 
> 时间：2012-11-10T23:05:32.863
> 
> 标签：css, margin

我的布局遇到了一个奇怪的问题，它在全窗口上看起来很好，但在我调整窗口大小时开始向右移动。

要求是有 3 个全高列，其中 2 个具有固定宽度，另一个占据其余空间。

我无法控制看起来像这样的 html：

```
<div id="wrapper">
  <div id="main">

     <div id="nav">
     </div>

     <div id="container">
       <div id="content">
       </div>
       <div id="sidebar">
       </div> 
     </div>        
  </div>
</div> 
```

我想出了一种方法来使用负边距和相对定位来完成所有这些工作，效果很好，除了当窗口非常小时，整个内容会向右移动。我有一个简单的解决方案来防止这种情况吗？我也想知道为什么会发生这种情况，因为我无法解决这个问题。

JSFIDDLE：

[http://jsfiddle.net/u5yJd/](http://jsfiddle.net/u5yJd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:44:33.397

CSS 中的两个修复：

*   在`#wrapper`核弹`margin-left`上`left: 0px;`
*   `#main`添加时`left: 264px;`

修复[了](http://jsfiddle.net/L3Mub/)这些更改。

你`#wrapper`在窗口的左边，你希望你的`#wrapper`（在这种情况下）在窗口中，否则定位它会有点时髦。

# c++ - C ++用零填充两个维度数组

> ID：13326934
> 
> 赞同：0
> 
> 时间：2012-11-10T23:05:33.477
> 
> 标签：c++

```
int  ** b;

b = (int **)(new int[5 * 12]);

for (int i = 0; i < 5; i++) {
    for (int j = 0; j < 12; j++) {
        b[i][j] = 0;
    }
} 
```

我`access violation`在行中遇到错误`b[i][j] = 0;`

我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:09:20.637

您的代码在 中分配内存`b`，但这不是您稍后尝试设置的。相反，您尝试设置`b`未分配的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:19:43.747

由于`b`has 类型`int**`，表达式`b[i]`指向偏移量`sizeof(int*)*i`并`(b[i])[j]`添加偏移量`sizeof(int)*j`。总的来说，您访问的偏移量字节与用于确定平面一维数组中索引`sizeof(int*)*i + sizeof(int)*j`的偏移量完全不同。`sizeof(int)*(i*j)`

您正在请求一维数组，但将其视为二维数组。那是行不通的。像往常一样，铸造是罪​​魁祸首。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T23:15:20.727

真正的问题是，如果你使用*b*作为二维数组而不指定一维，编译器并不真正知道如何索引它的访问，试着这样写：

```
int  (* b)[12];
b = new int[5][12]; 
```

我们在这里所做的是将*b*声明为指向 12 元素数组的指针，因此当我们对*i*索引进行索引时，编译器知道它必须乘以 12。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T23:09:38.393

`b`未初始化，因此通过它访问会产生未定义的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T23:18:57.377

问题是`[i][j]`手段`i*row_length+j`。`row_length`但是在这个例子中没有定义。您应该更改访问单个元素的方式，或者在堆栈上创建一个数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-10T23:12:06.940

摆脱演员表，然后弄清楚你想要分配什么类型以及将它存储在什么类型的变量中。演员表隐藏了一个错误。

# c++ - 如何计算两个玩家之间的回文游戏中的总分？

> ID：13326937
> 
> 赞同：0
> 
> 时间：2012-11-10T23:05:47.340
> 
> 标签：c++, string, function, parameter-passing, palindrome

我的程序交替提示两名玩家输入回文，然后根据其类型（句子、单词或数字）为其分配一个分数。它不断提示玩家回文并计算并显示每个玩家的总得分。问题是每次都会重置分数，所以程序只显示上一轮的分数而不是总分。我需要在每一轮之后计算每个球员的总分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:21:27.940

在我看来，您每轮都在离开方法，使分数超出范围。

这样，变量会被销毁并在下一轮再次创建。

您将需要以不同的方式存储分数以跟踪总分或重构代码，以使这些变量永远不会被破坏。（您必须移动循环并进行其他更改）

# python - python tkinter如何将键绑定到按钮

> ID：13326940
> 
> 赞同：7
> 
> 时间：2012-11-10T23:05:52.657
> 
> 标签：python, python-2.7, tkinter, python-imaging-library

编程新手，尤其是 python 和 tKinter。如何创建一种将键“s”绑定到按钮或功能的方法`sharpen`？任何帮助都是极好的。

```
from Tkinter import *
from PIL import Image, ImageTk, ImageFilter, ImageEnhance

class Application(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        master.wm_title("Image examples")
        self.pack()
        self.createWidgets()

def createWidgets(self):
    self.img = Image.open("lineage.jpg")
    self.photo1 = ImageTk.PhotoImage(self.img.convert("RGB"))
    self.label1 = Label(self, image=self.photo1)
    self.label1.grid(row=0, column=0, padx=5, pady=5, rowspan=10)

    self.photo2 = ImageTk.PhotoImage(self.img.convert("RGB"))
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

    button5 = Button(self, text="Sharpen", command=self.sharpen)
    button5.grid(row=4, column= 2, sticky = N)

def sharpen(self):
    img2 = self.img.filter(ImageFilter.SHARPEN)
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T23:24:05.903

您需要进行两项更改：

1.  添加

    ```
    master.bind('s', self.sharpen) 
    ```

    到`__init__`. （绑定到框架，，`self`似乎不起作用。）

2.  当`s`被按下时，`self.sharpen(event)`将被调用。由于 Tkinter 将发送一个`Tkinter.Event`对象，我们还必须将调用签名更改为

    ```
    def sharpen(self, event=None): 
    ```

    因此，当按下按钮时，`event`将设置为默认值，`None`而当`s`按下键时，`event` 将分配给`Tkinter.Event`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-28T00:22:49.863

像这样使用`bind_all`：

```
def sharpen(self, event):
    master.bind_all('s', sharpen) 
```

[您可以在Python 文档](https://www.python.org/doc/)中找到更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T23:16:40.127

您可以使用`bind`. 我将假设您问题中的缩进是错误的，并且`sharpen`是一种`Application`方法。

```
class Application(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        master.wm_title("Image examples")
        self.pack()
        self.createWidgets()
        self.bind("s", self.sharpen) 
```

[Pythonware](http://www.pythonware.com/library/tkinter/introduction/events-and-bindings.htm)有关于事件处理的有用信息。

# dictionary - Groovy 有合并 2 个地图的方法吗？

> ID：13326943
> 
> 赞同：90
> 
> 时间：2012-11-10T23:06:00.393
> 
> 标签：dictionary, groovy

第一张地图是默认选项`[a: true, b: false]`。第二个地图 - 用户传递的选项`[a:false]`。Groovy 是否有地图合并方法来获取`[a: false, b:false]`？

在 Groovy 中实现它是没有问题的。我在问开箱即用的方法

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-11-10T23:10:56.067

您可以使用加号：

```
assert [ a: true, b: false ] + [ a: false ] == [ a: false, b: false ] 
```

或左移：

```
assert [ a: true, b: false ] << [ a: false ] == [ a: false, b: false ] 
```

不同之处在于`<<` [将右手地图添加到左手地图](https://github.com/groovy/groovy-core/blob/GROOVY_2_4_X/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L12296)中。使用时`+`，它会[在LHS的基础上构建一个新的Map](https://github.com/groovy/groovy-core/blob/GROOVY_2_4_X/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L7433)，并在其中添加右手地图。

# html - 如何将边框底部进一步向下移动？

> ID：13326949
> 
> 赞同：1
> 
> 时间：2012-11-10T23:06:31.383
> 
> 标签：html, css

如何在不指定( ) `border-bottom: 1px solid #E5E5E5;`高度的情况下进一步向下移动边框底部`<li>``.content-intro-full-right ul li`

在`<li>`( `.content-intro-full-right ul li`) - 它包含`<ul>`操作系统。

例如：http: [//jsfiddle.net/t6gB7/12/](http://jsfiddle.net/t6gB7/12/)

您可以看到`border-bottom`应该出现在操作系统列表的下方。

```
<div class="content-intro-full-right">    
<ul>   
  <li>
     <ul class="operating-system">
        <li>Fedora</li>
        <li>ArchLinux</li>
        <li>FreePBX</li>
      </ul>
     <ul class="operating-system" style="margin-right: 140px;">
       <li>CentOS</li>
       <li>Ubuanto</li>
       <li>Debian</li>
       <li>Gentoo</li>
       <li>Slackware</li>
     </ul>
     <h4>Operating Systems</h4>
     <p>
      We offer a variety of Linux operating systems.
    </p>
  </li>
</ul>
</div>
​

.content-intro-full-right ul li {
    position: relative;
    padding: 30px 280px 20px 0;
    border-bottom: 1px solid #E5E5E5;
}

ul.operating-system  {
    position: absolute;
    top: 30px;
    right: 0;
}

ul.operating-system li, ul.operating-system li:nth-child(even) {
    border:none;
    padding: 7px;
    width: 80px;
    border-bottom: 1px solid #dedede;
    color:#808080;
    background-color: #f7f7f7;
    padding-left: 30px;
}

ul.operating-system li:last-child {
    border-bottom: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:19:10.627

您可以将 s 浮动`ul`到右侧并添加一个 div`clear: both`以强制边框向下。我已经在这个小提琴中进行了演示，尽管我弄乱了操作系统列表周围的间距，并且我留下了一些彩色边框以显示元素的边界。

[http://jsfiddle.net/t6gB7/19/](http://jsfiddle.net/t6gB7/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:17:34.500

您可以简单地使用 padding-bottom（之后的第三个值`padding:`）将框进一步向下扩展。但这有点骇人听闻。

```
.content-intro-full-right ul li {
    position: relative;
    padding: 30px 280px 160px 0;
    border-bottom: 1px solid #E5E5E5;
} 
```

## 编辑：没有绝对位置[http://jsfiddle.net/t6gB7/20/](http://jsfiddle.net/t6gB7/20/)

```
<div class="container">
     <ul class="operating-system">
        <li>Fedora</li>
        <li>ArchLinux</li>
        <li>FreePBX</li>
     </ul>
     <ul class="operating-system">
       <li>CentOS</li>
       <li>Ubuanto</li>
       <li>Debian</li>
       <li>Gentoo</li>
       <li>Slackware</li>
     </ul>

     <h4>Operating Systems</h4>
     <p>
        We offer a variety of Linux operating systems.
     </p>
     <div class="clearfix"></div>
</div>
​

.container {
    padding: 30px 20px;
    border-bottom: 1px solid #E5E5E5;
}

.clearfix {
    clear: right;
}

ul.operating-system  {
    float: right;
    margin-left: 40px;
}

ul.operating-system li, ul.operating-system li:nth-child(even) {
    border:none;
    padding: 7px;
    width: 80px;
    border-bottom: 1px solid #dedede;
    color:#808080;
    background-color: #f7f7f7;
    padding-left: 30px;
}

ul.operating-system li:last-child {
    border-bottom: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:45:52.160

opatut 是对的，只要你使用“ `position: absolute;`”你就无法做到这一点。这是另一个用 float 和 clear 完成的示例......顺便说一句，增加 opatuts 答案

[http://jsfiddle.net/t6gB7/21/](http://jsfiddle.net/t6gB7/21/)

# mysql - 在mySQL中，如何定义一行属性的自定义函数？

> ID：13326952
> 
> 赞同：0
> 
> 时间：2012-11-10T23:06:43.873
> 
> 标签：mysql, function, row, user-defined-functions

假设有一个模式 R(a,b)，我的目标模式是 S(a,b,foo(a,b))，其中 foo 应该是自定义函数。有没有实现这个目标的好方法？比如 S = SELECT a, b, foo(a, b) FROM R。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:10:35.863

您可以完全做到这一点，使用[`CREATE FUNCTION`](http://dev.mysql.com/doc/en/create-procedure.html), 后跟（如有必要）[`CREATE VIEW`](http://dev.mysql.com/doc/en/create-view.html)：

```
DELIMITER ;;
CREATE FUNCTION foo ... ;
DELIMITER ;

CREATE VIEW S AS SELECT a, b, foo(a, b) FROM R; 
```

或者，要创建 的快照`S`，请使用[`CREATE TABLE ... SELECT`](http://dev.mysql.com/doc/en/create-table-select.html)：

```
CREATE TABLE S SELECT a, b, foo(a, b) FROM R; 
```

当然，如果您不需要`foo()`在其他任何地方使用，您也许可以简单地在`SELECT`语句中表达它的价值（但这似乎太基本了，不能成为问题）：

```
SELECT a, b, a+b FROM R; 
```

# datetime - SSIS如何将毫秒设置为零？

> ID：13326958
> 
> 赞同：1
> 
> 时间：2012-11-10T23:07:31.670
> 
> 标签：datetime, ssis, milliseconds

我需要将时间戳值的小数秒设置为零。

例如，将“2012-11-10 14:57:43.147”设置为“2012-11-10 14:57:43.000”

我怎么能在 SSIS 表达式中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:39:29.417

听起来你正在使用`DT_DBTIMESTAMP`; 你应该尝试`DT_DBTIME`，因为它不会存储毫秒。

[来源](http://social.msdn.microsoft.com/Forums/zh/sqlintegrationservices/thread/57022d9b-c34a-47e8-bfee-d3489bd0a2db)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:53:26.290

如果您甚至想将秒数设置为 00，请尝试将此作为概念验证：

```
(DT_DBTIMESTAMP2,7)(SUBSTRING((DT_WSTR,27)(DT_DBTIMESTAMP2,7)"2012-11-10 14:57:43.147",1,16)+":00") 
```

同样，为了消除毫秒，取前 19 个字符：

```
(DT_DBTIMESTAMP2,7)SUBSTRING((DT_WSTR,27)(DT_DBTIMESTAMP2,7)"2012-11-10 14:57:43.147",1,19) 
```

# c# - 双击DataGridvView行后获取记录id

> ID：13326960
> 
> 赞同：0
> 
> 时间：2012-11-10T23:07:48.630
> 
> 标签：c#, winforms, datagridview, event-handling

有没有其他简洁的方法可以从 DataGridView 行双击事件中获取记录 ID？那是要使用的事件吗？

```
 private void dataGridView1_CellMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        var databaseRecordId = dataGridView1.Rows[e.RowIndex].Cells[0].Value;
        //...
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T01:23:11.437

准确地说

```
private void dataGridView1_CellMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        var databaseRecordId = dataGridView1.Rows[e.RowIndex].Cells[0].Value;
    } 
```

`CellDoubleClick`事件比`CellContentDoubleClick`or更适合`CellMouseDoubleClick`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T01:14:48.300

我不知道这是否一定“更容易”，但如果您不想显示 id 或更改 gridview 中的列顺序，它会更安全一些。

```
var databaseRecordId = ((MyBoundObjectType)dataGridView1.Rows[e.RowIndex].DataBoundItem).MyRecordId; 
```

where`MyBoundObjectType`和`MyRecordId`是绑定到行和相应 Id 属性的类型。

# c# - StreamReading 在 StreamWriting 到同一个文件之后立即读取一个文件

> ID：13326962
> 
> 赞同：4
> 
> 时间：2012-11-10T23:08:02.170
> 
> 标签：c#, streamreader, race-condition, streamwriter

鉴于此示例代码：

```
1:   using (StreamWriter sw = new StreamWriter(@"C:\file.txt"))
2:   {
3:       sw.WriteLine(great_string);
4:   }
5:
6:   using (StreamReader sr = new StreamReader(@"C:\file.txt"))
7:   {
8:       sr.ReadToEnd();
9:   } 
```

是否有可能在第 8 行调用时`great_string`不存在第 3行上的内容？在我看来这是可能的，因为你的平均 CPU 工作速度比你的平均 HDD 快得多，但我今天一直在测试这个，到目前为止，当我在线读取文件时，第 3 行写入的字符串始终存在8\. 我在想，在将所有数据写入文件/从文件中读取之前，该语句可能不会关闭流，从而防止了我所询问的那种情况。`C:\file.txt``StreamReader.ReadToEnd``using`

我一直在阅读MSDN 上的[StreamWriter.Close方法，它说明了以下内容：](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.close.aspx)

> 您必须调用 Close 以确保所有数据都正确写入底层流。

但它没有说明数据何时会被写入底层流。

提前感谢您提供有关此主题的任何信息。我确实搜索了这个问题的答案，但我没有找到任何东西......我真的不知道要搜索什么术语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:17:34.843

调用 Close 后，数据可能不会实际出现在 HDD 上，但系统（Windows 内核）会给出它的外观。最重要的是外观。

如果您从刚刚写入的文件中读取，Windows 将询问 HDD 或从缓存中提供服务。

如果不是这种情况，就很难编写可靠的程序，因为效果的顺序可以在函数甚至进程之间任意改变。这将是混乱。所以系统保证了顺序一致性。

如果你想一想：如果这个序列化属性不存在，一个文件可能同时有多个内容！第一次阅读它，你会看到旧的内容。再读一遍，你突然发现变化出现了。幸运的是，这种行为是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:13:18.773

> 我在想，在将所有数据写入文件/从文件中读取之前，使用语句可能不会关闭流，从而防止了我所询问的那种情况。

是的，正是。using() 确保对象被完全释放。有关 using 语句的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.80).aspx?ppud=4](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.80).aspx?ppud=4)。

也就是说，在关闭文件之前，它的数据将被清除。实际上，它会等待文件被写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T23:44:58.150

alleywayjack 的回答是正确的。看时间：

```
 static void Main()
    {
        var file = @"c:\temp\test.bin";
        String huge = new String(new char[20 * 1024 * 1024]);
        var sw = new Stopwatch();
        var sw2 = new Stopwatch();
        sw.Start();
        using (var stream = new StreamWriter(file))
        {
            sw2.Start();
            stream.Write(huge);
            sw2.Stop();
        }
        sw.Stop();
        sw2.Stop();

        Console.WriteLine("Write 20MB to cache: " + (sw.Elapsed.TotalMilliseconds - sw2.Elapsed.TotalMilliseconds));
        Console.WriteLine("Write 20MB from cache to HD: " + sw2.Elapsed.TotalMilliseconds);
    } 
```

输出：

```
Write 20MB to cache: 5   // ms (including preparing the stream) 
Write 20MB from cache to HD: 186   // ms 
```

整个过程是阻塞的（同步的）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-10T23:12:40.710

您应该改用[Flush](http://msdn.microsoft.com/en-us/library/system.io.textwriter.flush.aspx)，它可以确保写入数据。

# android - 内置安全访问模块 (SAM) 的 NFC ACR1222U 是否与 Android 手机兼容？

> ID：13326963
> 
> 赞同：1
> 
> 时间：2012-11-10T23:08:03.513
> 
> 标签：android, nfc, galaxy, samsung-mobile, nfc-p2p

有谁知道 Android NDEF PUSH / ANDROID BEAM 是否支持 NFC 读卡器，例如带有内置安全访问模块 (SAM) 的 ACR1222U？我发现了一个有趣的站点，它提供了一个 Java Applet，它连接到 NFC 阅读器并输出从 Android 手机传输的所有 NDEF 消息。网站：[http ://www.grundid.de/nfc/](http://www.grundid.de/nfc/)

在小程序示例中，使用的读卡器是 ACR122U，它可以完美运行。那么 ACR1222U (SAM) 有什么不同吗？我的设备是带有 Android 4.0.4 ICS 的三星 Galaxy SIII。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:44:03.353

Do you know the Firmeware Version of both ACR122Us? I experienced simmilar behaivour with an ACR122U 207 (without SAM) an the Galaxy S3\.

I think the Problem is not related to the SAM Modul, because I've got it working here with a touchatag ACR122U with SAM Module and an older Firmeware Version.

After some research I found out that you have to put the reader into Initalizer Mode before you put the phone on it, otherwise there is some low level communication between reader and phone (Card Removed and Card present changing fast). Unfortunately there is nothing about it in the documentation by acr, but putting it in Initalizator mode and then putting the phone on it works on my side.

I am currently adding this to my [Android Beam API](http://code.google.com/p/java-android-beam-api/) and hopefully will finish during the next month.

# excel - 让 Excel 在计算中使用显示的小数位

> ID：13326965
> 
> 赞同：0
> 
> 时间：2012-11-10T23:08:18.430
> 
> 标签：excel

我正在使用 excel 制作一个包含大量计算的电子表格，其中很多因为一个小问题而关闭。如果我的单元格 A1 具有诸如 之类的计算`=5.75*1.02`，它将显示为`5.87`。我的问题是，然后我有另一个单元格将其引用为，`=A1*1050000`但它返回`6,158,250`的是`5.865*1050000`而不是返回`5.87*1050000`. 是否有一个设置可以使它根据显示的小数位而不是其他数字进行计算？

我希望这是有道理的。

我正在使用 Excel：Mac 2011。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:23:53.280

我将研究是否有使用显示文本而不是实际值的设置。我怀疑有一个。这是有关[Cell Values 和 Displayed Text](http://www.cpearson.com/excel/values.htm)的参考。

但是，如果您只想使用第 2 位小数，则在使用时只需将 A1 舍入即可。（或它的单元格中的 A1 轮）

IE

```
=ROUND(A1,2)*1050000 
```

或者 A1 的公式 =`=ROUND(5.75*1.02,2)`

# c# - OBOUT Suite：无法上传图片的 HTML 编辑器

> ID：13326967
> 
> 赞同：0
> 
> 时间：2012-11-10T23:08:44.383
> 
> 标签：c#, asp.net, html-editor, obout

我正在使用 OBOUT 的 HTML 编辑器，但我无法启用在编辑器中上传图像的选项，它显示为灰色。

如何在 Obout 编辑器中启用上传图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:09:06.903

您只能在 MANAGED 文件夹中创建文件夹和上传图像。您可以自己管理 - 设置“ImageBrowser”弹出窗口的“ManagedFolders”属性。见[http://www.obout.com/Obout.Ajax.UI/HTMLEditor/docs/server/Popups/ImageBrowser.aspx](http://www.obout.com/Obout.Ajax.UI/HTMLEditor/docs/server/Popups/ImageBrowser.aspx)， [http://www.obout.com/Obout.Ajax.UI/HTMLEditor/KnowledgeBase.aspx ?id=895](http://www.obout.com/Obout.Ajax.UI/HTMLEditor/KnowledgeBase.aspx?id=895) /

# php - 如果随机数等于固定数，则更新访问者计数 [如果随机 == 固定：增加访问者计数]

> ID：13326968
> 
> 赞同：4
> 
> 时间：2012-11-10T23:09:03.920
> 
> 标签：php, random, statistics

在瑞典最受欢迎的网站之一上工作时，我遇到了一个（对我来说）奇怪的片段，它在每个页面上都运行：

```
if( rand(0, 100) === 50 )
   // increase visitor count 
```

它的作用是生成一个随机数，如果它等于一个固定数字（在本例中为 50），它将增加访问者计数。在显示统计信息的页面上，访问者数乘以例如 100 后才显示。

我确实意识到为每个页面视图写入数据库可能并不理想，尤其是对于像这样的非常大的网站。但这真的能产生正确的统计数据吗？仅仅因为 99 位访客的随机数等于所有但 100 并不意味着下一位将获得 100。

我是否反应过度，或者这是一个糟糕的统计实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:19:36.413

好的，我想我明白了。简而言之 - 这种方法**足够**准确，而且是我从**“瑞典最受欢迎的网站之一”中**了解到的一种很好的方法。让我解释：

有三个因素：

1.  **实际访问**- 实际页面浏览次数
2.  **跟踪访问**- 跟踪访问，通过随机数检查的访问
3.  **计算访问次数**- 统计页面中显示的访问次数

我可以把它翻译成代码：

[如任何页面所示：]

```
//are you here? you are an ACTUAL visit
if(rand(0, 100) === 50){
    //are you here? you are a TRACKED visit
    //passing info to the database as current number+1
} 
```

[在统计页面中：]

```
//variable $tracked is number of tracked visits from the page

//this is a CALCULATED visit
echo 'Page visits: '.$tracked*100; 
```

我也可以说，实际访问也有 1% 的机会成为跟踪访问。但是现在出现了以下问题：为什么我只需要跟踪 1% 的访问量？我不能只跟踪所有访问吗？

> *   如果每个页面获得*1000 次浏览/分钟*，则此方法是一个**很好的性能提升器**，并且可以提供相当好的结果（足够接近*实际访问量*）。
>     
>     
> *   如果每个页面获得*100 次浏览/分钟*，此方法还可以提高一些性能，并且可能会给出非常准确的结果。

谈到性能，想象一下每分钟 1000 次数据库查询。我个人认为这样做不好。所以为了降低查询量，你（或他们）实际上通过在数据库入口放置一个“守卫”来限制对数据库的调用次数，问你一个随机问题，只是为了平衡人数里面。

当然，现在您必须在性能和准确性之间找到完美的平衡。你可以自己模拟一下：

1.  `$actual`将帮助您找到最终结果的准确性
2.  `$hits`将显示命中数（人通过守卫）
3.  `$hit_chance`将限制通过结果的数量。越高，性能越好，但准确度越低。看它！如果设置为 100，则概率为 %1 (1/100)，如果设置为 10000，则概率为 1/10000，如果设置为 10 1/10 (10%)，等等...
4.  `$final`将显示计算的访问次数。

```
$actual = 7000; //set the number of visits you want to check (check the current site statistics!)
$hits = 0; //initialization of variable
$hit_chance = 100; //set hit chance, currently 1%
$answer = intval(round($hit_chance / 2, PHP_ROUND_HALF_UP)); //just set answer between 0 and $hit_chance, which is an integer

    for($i=0;$i<$actual;$i++){
        if(rand(0, $hit_chance) === $answer){
            $hits++;
        }
    }

$final = $hits * $hit_chance;
$accuracy = 100 - ((($actual - $final) / $actual) * 100);

echo 'Actual visits: '.$actual;
echo '<br>Hits: '.$hits;
echo '<br>Final results: '.$final;
echo '<br>Result accuracy: '.$accuracy.'%'; 
```

再想一想，这取决于你——我认为没有好/坏的方法。也许服务器太好了，你不需要它，也许它们需要一些性能节省。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:46:44.887

他们对它的记录越多，它就越准确。一旦他们有超过 1.000.000 次点击，就可以肯定地说他们有非常准确的统计数据，因为从长远来看，数学会变得更平。

在我看来，从短期来看，这非常糟糕。

# html - CSS 选择器不工作......它真的应该

> ID：13326969
> 
> 赞同：1
> 
> 时间：2012-11-10T23:09:04.973
> 
> 标签：html, css

在此先感谢您的帮助，我已经在桌子上敲了几个小时试图弄清楚这一点，但我承认我被迷惑了。

我有一个导航 div：

```
 <div class="projectNav clearfix">
            <div class="previous <?php if(!get_previous_post()){ echo 'inactive'; }?>">
                <?php previous_post_link('%link', '&larr; %title'); ?>
            </div>              
            <div class="next <?php if(!get_next_post()){ echo 'inactive'; }?>">                     
                <?php next_post_link('%link', '%title &rarr;'); ?>              
            </div>                  
        </div> <!-- end navigation --> 
```

而这些样式，位于样式表中的媒体查询下。

```
.projectNav {
    margin: 0 0 0 0;    
    padding-top: 10px;  
    float: none;
}

.projectNav div{
    margin-left: 0px;
    float: left;
{

.projectNav .next {
    float: right !important;
{

.projectNav .previous {
    float: left !important;
{ 
```

前两种样式会影响 HTML 节点，但后两种样式根本不会出现。我必须能够选择“上一个”和“下一个”元素以将它们浮动到页面的任一侧，但对于我的生活，我无法让样式在它们上工作。我试过改变类名，给他们ID，我能想到的一切。没有什么。它与类字段中的php有关吗？

帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T23:12:38.390

第 2、第 3、第 4 样式的右花括号是错误的：

```
.projectNav {
    margin: 0 0 0 0;    
    padding-top: 10px;  
    float: none;
}

.projectNav div{
    margin-left: 0px;
    float: left;
} /* not { */

.projectNav .next {
    float: right !important;
} /* not { */

.projectNav .previous {
    float: left !important;
} /* not { */ 
```

# java - 使用带有数组的 compareTo 方法按姓名和考试成绩对学生进行排序

> ID：13326972
> 
> 赞同：1
> 
> 时间：2012-11-10T23:09:40.780
> 
> 标签：java, arrays, sorting, interface, compareto

我需要使用可比较的 interfact 和 compareTo 方法按字母顺序对学生列表进行排序，然后按考试成绩排序。我正在努力让它在我的应用程序中工作。

需要从文本文件中读取名称列表。我不知道我的教授使用的文本文件中有多少个名字，除了它会少于 100 个。我还应该在底部显示平均成绩，并在任何旁边写一条消息低于平均水平 15 分的学生。我还没有真正进入写作信息部分，因为我目前正忙于获取姓名和分数以进行打印和排序。

文本文件应如下所示：

> 钢铁侠安德里亚 95
> 
> 穆拉赫乔尔 98
> 
> 洛道格 82
> 
> 穆拉赫迈克 93

这就是我到目前为止所拥有的......如果有人能给我一些指导，我将不胜感激。谢谢你。

```
package chapt11;
import java.io.FileReader;  
import java.util.Arrays; 
importjava.util.Scanner;
public class CH11AS8App {

/**
 * @param args
 */
public static void main(String[] args) throws Exception {

    System.out.println("Welcome to the Student Scores Application.");
    System.out.println();

    Scanner aScanner = new Scanner(new FileReader(
            "src//chapt11//ch11AS8data.txt"));

    Student [] studentArray;

    String lastName;
    String firstName;
    int examScore = 0;
    double average = 0;

    int nStudent = 100;  //array size not set unit run time
    studentArray = new Student[nStudent];

    for (int i=0; i<nStudent; i++)
    {
    System.out.println();

        while (aScanner.hasNext()) {
            lastName = aScanner.next();
            firstName = aScanner.next();
            examScore = aScanner.nextInt();

            System.out.println("Student " + nStudent++ + " " + firstName
                    + " " + lastName + " " + +examScore);

            studentArray[i] = new Student(lastName, firstName, examScore);

    }
        double sum = 0.0;
        sum += examScore;
        average = sum/nStudent;

        Arrays.sort(studentArray);

        System.out.println();

        for (Student aStudent: studentArray)
        {
            System.out.println(aStudent);

            if (examScore<= (average-10))
            {
                System.out.println ("Score 10 points under average");
        }
        System.out.println("Student Average:" +average);

        }
}
}
public interface Comparable {
    int compareTo(Object o);
}

class Student implements Comparable {

    private String firstName;
    private String lastName;
    private int examScore;

    public Student(String firstName, String lastName, int examScore) {
        this.firstName = firstName;
        this.examScore = examScore;
        this.lastName = lastName;
    }

    // Get & Set Methods
    public int getExamScore() {
        return examScore;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getLastName() {
        return lastName;
    }

    @Override
    public int compareTo(Object o) {
        Student s = (Student) o;

        if (s.lastName.equals(lastName)) {
            return firstName.compareToIgnoreCase(s.firstName);
        } else {
            return lastName.compareToIgnoreCase(s.lastName);
        }
    }

    public String toString() {
        return lastName + ", " + firstName + ": " + examScore;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:55:23.250

首先，完全删除您的`Comparable`界面。[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)从 JDK使用。

将您的代码更改为此

```
public static class Student implements Comparable<Student> {

    // rest of class omitted

    @Override
    public int compareTo(Student s) {
        if (s.lastName.equals(lastName)) {
            return firstName.compareToIgnoreCase(s.firstName);
        }
        return lastName.compareToIgnoreCase(s.lastName);return
    }
} 
```

另请注意，条件之后没有“else” `return`，因此我省略了代码的冗余部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:34:36.070

1.  你不能自己声明 Comparable 接口。只需使用它。
2.  您必须在循环内对学生的考试成绩求和，但在循环外计算平均值，对数组进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:44:25.693

您的代码中有几处需要更正：

1.  您的`Student`类是内部类，因此要创建该类的对象，您需要外部类的第一个对象。您可能想要可以在没有外部对象的情况下创建对象的嵌套类（只需`static`向类添加修饰符`Student`）
2.  使用对象对数组进行排序`Arrays.sort()`必须实现`java.lang.Comparable`接口，而不是您创建的接口。
3.  你可以使用泛型，`Comparable<T>`所以尝试用这种方法实现你的`Student`类，你的方法会喜欢`implements Comparable<Student>{``compareTo`

    ```
    public int compareTo(Student s){//body 
    ```

    代替：

    ```
    public int compareTo(Object o){ 
        Student s = (Student) o; 
    ```

4.  由于您的数组将包含空值（未填充位置的默认值），您需要防止排序比较器`compareTo`在空元素上调用。为此，请使用`Arrays.sort(Object[] a, int fromIndex, int toIndex)`排序算法的版本。

5.  从文件中收集信息时再次检查您的逻辑。为了让事情变得更容易，不要一次做几件事。首先收集所有数据，然后进行统计。

6.  不要在每次添加新数据时对数组进行排序，在添加所有数据后进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-23T11:05:54.713

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class CH11AS8App {

    public static void main(String[] args) throws Exception {

        System.out.println("Welcome to the Student Scores Application.");
        System.out.println();

        List<Student> studentArray = new ArrayList<Student>();

        String lastName;
        String firstName;
        int examScore = 0;
        double average = 0;

        String line;

        FileReader reader = new FileReader("src//chapt11//ch11AS8data.txt");
        BufferedReader bufferedReader = new BufferedReader(reader);
        String[] split;

        while ((line = bufferedReader.readLine()) != null) {
            split = line.split("\\s+");
            lastName = split[0];
            firstName = split[1];
            examScore = Integer.valueOf(split[2]);

            studentArray.add(new Student(firstName, lastName, examScore));
            double sum = 0.0;
        }
        Collections.sort(studentArray);

        System.out.println();

        System.out.println("sorted:" + studentArray);

        for (Student aStudent : studentArray) {
            System.out.println(aStudent);

            if (examScore <= (average - 10)) {
                System.out.println("Score 10 points under average");
            }
            System.out.println("Student Average:" + average);

        }
    }

    static class Student implements Comparable<Student> {

        private String firstName;
        private String lastName;
        private int examScore;

        public Student(String firstName, String lastName, int examScore) {
            this.firstName = firstName;
            this.examScore = examScore;
            this.lastName = lastName;
        }

        // Get & Set Methods
        public int getExamScore() {
            return examScore;
        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }

        @Override
        public int compareTo(Student s) {

            if (this.firstName.equalsIgnoreCase(s.firstName)) {
                if (this.lastName.equalsIgnoreCase(s.lastName)) {
                    return this.examScore - s.examScore;
                } else {
                    return this.lastName.compareTo(s.lastName);
                }
            } else {
                return this.firstName.compareTo(s.firstName);
            }

        }

        public String toString() {
            return lastName + ", " + firstName + ": " + examScore;

        }

    }
} 
```

# java - 如何在 JFace WizardPage 中实现简单的主从细节

> ID：13326977
> 
> 赞同：-2
> 
> 时间：2012-11-10T23:10:20.830
> 
> 标签：java, eclipse-plugin, swt, jface, master-detail

我想在 Jface WizardPage 中实现一个简单的主从场景： WizardPage 将有一个带有一些名称的表，在选择表中的一行后，包含文本/标签的 WizardPage 的底部将更新为与选择相对应的详细信息在表中。

我搜索了互联网，只找到了作为 SWT 应用程序运行的示例：http: [//dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.jface.examples.databinding/src/org/eclipse/jface/examples/databinding /snippets/Snippet010MasterDetail.java?view=markup](http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.jface.examples.databinding/src/org/eclipse/jface/examples/databinding/snippets/Snippet010MasterDetail.java?view=markup)

```
1   /*******************************************************************************
2    * Copyright (c) 2007, 2009 Brad Reynolds and others.
3    * All rights reserved. This program and the accompanying materials
4    * are made available under the terms of the Eclipse Public License v1.0
5    * which accompanies this distribution, and is available at
6    * http://www.eclipse.org/legal/epl-v10.html
7    *
8    * Contributors:
9    *     Brad Reynolds - initial API and implementation
10   *     Matthew Hall - bug 260329
11   ******************************************************************************/
12  
13  package org.eclipse.jface.examples.databinding.snippets;
14  
15  import java.beans.PropertyChangeListener;
16  import java.beans.PropertyChangeSupport;
17  
18  import org.eclipse.core.databinding.DataBindingContext;
19  import org.eclipse.core.databinding.UpdateValueStrategy;
20  import org.eclipse.core.databinding.beans.BeansObservables;
21  import org.eclipse.core.databinding.observable.Realm;
22  import org.eclipse.core.databinding.observable.value.IObservableValue;
23  import org.eclipse.jface.databinding.swt.SWTObservables;
24  import org.eclipse.jface.databinding.viewers.ViewersObservables;
25  import org.eclipse.jface.viewers.ArrayContentProvider;
26  import org.eclipse.jface.viewers.ListViewer;
27  import org.eclipse.swt.SWT;
28  import org.eclipse.swt.layout.GridLayout;
29  import org.eclipse.swt.widgets.Display;
30  import org.eclipse.swt.widgets.Shell;
31  import org.eclipse.swt.widgets.Text;
32  
33  /**
34   * Snippet that displays a simple master detail use case. A list of persons is
35   * displayed in a list and upon selection the name of the selected person will
36   * be displayed in a Text widget.
37   */
38  public class Snippet010MasterDetail {
39          public static void main(String[] args) {
40                  final Display display = new Display();
41                  Realm.runWithDefault(SWTObservables.getRealm(display), new Runnable() {
42                          public void run() {
43                                  Shell shell = new Shell(display);
44                                  shell.setLayout(new GridLayout());
45  
46                                  Person[] persons = new Person[] { new Person("Me"),
47                                                  new Person("Myself"), new Person("I") };
48  
49                                  ListViewer viewer = new ListViewer(shell);
50                                  viewer.setContentProvider(new ArrayContentProvider());
51                                  viewer.setInput(persons);
52  
53                                  Text name = new Text(shell, SWT.BORDER | SWT.READ_ONLY);
54  
55                                  // 1\. Observe changes in selection.
56                                  IObservableValue selection = ViewersObservables
57                                                  .observeSingleSelection(viewer);
58  
59                                  // 2\. Observe the name property of the current selection.
60                                  IObservableValue detailObservable = BeansObservables
61                                                  .observeDetailValue(selection, "name", String.class);
62  
63                                  // 3\. Bind the Text widget to the name detail (selection's
64                                  // name).
65                                  new DataBindingContext().bindValue(SWTObservables.observeText(
66                                                  name, SWT.None), detailObservable,
67                                                  new UpdateValueStrategy(false,
68                                                                  UpdateValueStrategy.POLICY_NEVER), null);
69  
70                                  shell.open();
71                                  while (!shell.isDisposed()) {
72                                          if (!display.readAndDispatch())
73                                                  display.sleep();
74                                  }
75                          }
76                  });
77                  display.dispose();
78          }
79  
80          public static class Person {
81                  private String name;
82                  private PropertyChangeSupport changeSupport = new PropertyChangeSupport(this);
83  
84                  Person(String name) {
85                          this.name = name;
86                  }
87  
88                  public void addPropertyChangeListener(PropertyChangeListener listener) {
89                          changeSupport.addPropertyChangeListener(listener);
90                  }
91                  
92                  public void removePropertyChangeListener(PropertyChangeListener listener) {
93                          changeSupport.removePropertyChangeListener(listener);
94                  }
95                  
96                  /**
97                   * @return Returns the name.
98                   */
99                  public String getName() {
100                         return name;
101                 }
102 
103                 public String toString() {
104                         return name;
105                 }
106         }
107 } 
```

如何将其集成到 JFace 向导中？这个向导应该作为 Eclipse 插件运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:18:34.110

这是一个工作示例：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);

    WizardDialog wizardDialog = new WizardDialog(shell, new MyWizard());
    wizardDialog.open();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
}

private static class MyWizard extends Wizard
{
    protected MyWizardPage one;

    public MyWizard()
    {
        super();
    }

    @Override
    public void addPages() {
        one = new MyWizardPage("Page One");
        addPage(one);
    }

    @Override
    public boolean performFinish() {
        return false;
    }

}

private static class MyWizardPage extends WizardPage
{
    protected MyWizardPage(String pageName) {
        super(pageName);
    }

    @Override
    public void createControl(Composite comp)
    {
        Composite container = new Composite(comp, SWT.NULL);
        GridLayout layout = new GridLayout(2, true);
        container.setLayout(layout);

        final TableViewer viewer = new TableViewer(container, SWT.READ_ONLY);

        // First column is for the name
        TableViewerColumn col = createTableViewerColumn("Name", 100, 0, viewer);
        col.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public String getText(Object element) {
                if(element instanceof Person)
                {
                    return ((Person)element).getName();
                }
                return "";
            }
        });

        // First column is for the location
        TableViewerColumn col2 = createTableViewerColumn("Location", 100, 1, viewer);
        col2.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public String getText(Object element) {
                if(element instanceof Person)
                {
                    return ((Person)element).getLocation();
                }
                return "";
            }
        });

        final Table table = viewer.getTable();
        table.setHeaderVisible(true);
        table.setLinesVisible(true);
        GridData data = new GridData(SWT.FILL, SWT.FILL, true, true);
        data.horizontalSpan = 2;
        table.setLayoutData(data);

        /* Add listener to listen for selection change */
        final Text name = new Text(container, SWT.BORDER);
        name.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, true));
        final Text location = new Text(container, SWT.BORDER);
        location.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, true));

        viewer.addSelectionChangedListener(new ISelectionChangedListener() {

            @Override
            public void selectionChanged(SelectionChangedEvent arg0) {
                IStructuredSelection selection = (IStructuredSelection) viewer.getSelection();
                Person person = (Person) selection.getFirstElement();

                name.setText(person.getName());
                location.setText(person.getLocation());
            }
        });

        viewer.setContentProvider(ArrayContentProvider.getInstance());

        final Person[] persons = new Person[] { new Person("Baz", "Loc"),
                new Person("BazBaz", "LocLoc"), new Person("BazBazBaz", "LocLocLoc") };

        viewer.setInput(persons);

        setControl(container);
        setPageComplete(false);
    }
}

private static TableViewerColumn createTableViewerColumn(String title, int bound, final int colNumber, TableViewer viewer) {
    final TableViewerColumn viewerColumn = new TableViewerColumn(viewer, SWT.NONE);
    final TableColumn column = viewerColumn.getColumn();
    column.setText(title);
    column.setWidth(bound);
    column.setResizable(true);
    column.setMoveable(false);

    return viewerColumn;
}

public static class Person {
    private String name;
    private String location;

    public Person(String name, String location) {
        this.name = name;
        this.location = location;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLocation() {
        return location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

    public String toString()
    {
        return name + " " + location;
    }
} 
```

这是一个屏幕截图：

![在此处输入图像描述](../Images/59af2bee80084aecc9fe97ca401f94c4.png)

如您所见，文本字段填充了表格的内容。我确定您可以将此代码段用于您的目的。

# plugins - 尝试在插件中的 Joomla 的 onLoginUser 触发器上设置 cookie

> ID：13326978
> 
> 赞同：0
> 
> 时间：2012-11-10T23:10:25.223
> 
> 标签：plugins, joomla, setcookie

我正在编写一个非常简单的 Joomla 插件，它会删除一个带有电子邮件地址的 cookie，然后另一个应用程序可以使用该插件。这都是内部使用，不会分发。无论如何，插件安装得很好，但它不会创建 cookie。我正在使用 Chrome 浏览器的开发人员视图来查看 cookie 是否出现并且它永远不会出现。

```
function onLoginUser()
 {
    $app = &JFactory::getApplication();

    // Get Joomla's user object
    $user = &JFactory::getUser();

    if (!$user->guest) 
    {
         setcookie('userinfotocookie-email', $user->email);

         JRequest::setVar('userinfotocookie-id', $user->id, 'cookie');
    }

    return true;
 }
} 
```

请注意，我尝试了两种不同的方法来创建 cookie，但都不起作用。如果我故意将错误代码放入例程中，则会收到错误消息，因此我知道正在调用例程。我想我错过了关于插件如何在 Joomla 中工作的一些信息；有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:48:44.600

我不确定 Joomla 是什么！您正在使用的版本，但我指的是 Joomla！2.5\. 我认为**您忘记传递正确的参数。**尝试重命名您的函数：

`public function onUserLogin($user, $options = array())`

我不会在 Joomla! 中使用 setcookie()。您可以轻松使用[JSession](http://ostraining.com/howtojoomla/how-tos/development/how-to-use-sessions-in-joomla)。但除此之外，您的插件究竟应该做什么还不是很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:44:15.873

这是我的解决方案的一般概念，它不实现 cookie。我知道它实际上并没有回答这个问题，但是在与 Valentin 讨论（见评论）并仔细考虑之后，我意识到 cookie 不是一个好的设计选择，而且容易出现很多问题。我决定改写一个 Joomla Content 插件。这会在内容中查找一对 {showappwithuser} 标签，并将其替换为指向标签对内 URL 的 iframe。例如：

```
{showappwithuser}http://www.somewebsiteapp.com{/showappwithuser} 
```

这将替换为指向[http://www.somewebsiteapp.com?uid=joomlausername的 iframe](http://www.somewebsiteapp.com?uid=joomlausername). 这会将信息传递给接受应用程序，然后该应用程序可以执行它需要执行的操作。完整的代码如下，但仍然有点笨拙，因为大部分内容都是硬编码的。我需要添加参数处理，以便内容创建者可以选择 iframe 设置，如宽度、高度、滚动条访问。我还计划集成 uid 参数的加密，这样应用程序之间的信息就会有些混淆。这真的可以有很多不同的方向，如果编写正确，它可以成为一个很好的插件，可以将任何非 Joomla 应用程序无缝集成到 Joomla 站点中。使用此方法将其他参数信息发送到应用程序也有无限可能。享受！

```
<?php

// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );

// import the general plugin file of Joomla!'s library
jimport( 'joomla.plugin.plugin' );

// hook into the plugin framework
class plgContentShowAppWithUser extends JPlugin 
{
    // the core code to create an iframe and set it's URL source 
    // with the logged in user name from Joomla
    public function onContentPrepare($context, &$row, &$params, $page = 0)
    {
        $starttriggerpos = strpos($row->text, "{showappwithuser}");
        $iframeurl = "";

        if ($starttriggerpos !== false)
        {
            $endtriggerpos = strpos($row->text, "{/showappwithuser}");
            if ($endtriggerpos !== false)
            {
                $iframeurl = substr($row->text, $starttriggerpos+17, $endtriggerpos-$starttriggerpos-17);

                if (!JFactory::getUser()->guest) 
                {
                    $username = trim(JFactory::getUser()->username);

                    if (strlen($username) > 0)
                    {

                        $row->text = '<iframe src="' . $iframeurl . '?uid=' . $username . '"' . ' frameborder=0 scrolling=auto width=725>This application requires a browser that supports iframes.</iframe>';
                    }
                    else
                    {
                        $row->text = "Your web site login could not be determined. Please correct this and try again.";
                    }
                }
                else
                {
                    $row->text = "You must login to the web site in order to access this content.";
                }
            }
        }
    }
} 
```

# emacs - 循环的初始子句，需要在声明之前引用一个变量

> ID：13326979
> 
> 赞同：4
> 
> 时间：2012-11-10T23:10:32.667
> 
> 标签：emacs, lisp, elisp

对不起，标题令人费解，我尽力使它有意识。好吧，如果您有更好的想法，请更改它！

不要让您感到困惑，这是*Emacs* Lisp `loop`，而不是 Common Lisp：

```
(defun hxswfml-build-trie (alist)
  "Builds a trie (a list, containing number of hash-maps, each hash-map
uses single character for a key, except for `t' symbol, which, if present
as a key is the key for the value one has to substitute with."
  (loop for (key . value) in alist
        with trie = (make-hash-table)
        do (loop for c across key
                 with branch =
                 (or (gethash c trie)
                     (puthash c (make-hash-table) trie))
                 with first-time = t
                 do (if first-time (setq first-time nil)
                      (setq branch
                            (or (gethash c branch)
                                (puthash c (make-hash-table) branch))))
                 finally (puthash t value branch))
        finally (return trie))) 
```

这会将 alist 转换为由哈希表组成的树，其中每个表都包含键，这些键是我稍后要搜索和替换的字符串的字符。这需要优化在大量文本中搜索具有可能相似前缀的多个键，然后用相应的键替换它们。

问题是，在内部循环中，我想初始化`branch`，`trie`然后在所有以后的迭代中将其设置为新的哈希表（为尚未属于已知前缀的字符创建）或哈希表它已经为前缀中的字符创建了。

理想情况下，它看起来像：

```
for branch = (or (and branch (gethash c branch)) (puthash c (make-hash-table) trie))
;;                    ^-----------------^------- cannot reference it here 
```

这就是为什么我有愚蠢的`first-time`旗帜，我本可以避免的。我可以以某种方式使用`initially`表单，或者以其他方式重组函数来避免这个标志和额外`if`的东西吗？这个函数的速度不是很重要（搜索应该很快，但树的构建不需要），但它看起来很丑:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T01:35:10.940

由于您明确提到重构是一种潜在的选择，我建议将您的函数组合的两个操作分开：创建 trie 并将元素插入到 trie 中。

如果您将尝试定义为更模块化的数据结构，您可以例如从以下两个函数开始：

```
(defun trie-create ()
  (make-hash-table :test 'equal))

(defun trie-put (key value trie)
  (if (equal key "")
      (puthash t value trie)      
    (let* ((c (substring key 0 1))
           (child-trie (gethash c trie)))
      (unless child-trie
        (setq child-trie (trie-create))
        (puthash c child-trie trie))
      (trie-put (substring key 1) value child-trie)))) 
```

（如您所见，我在这里建议使用递归而不是嵌套`loop`的 s - 这可能是个人喜好问题，但在我看来，这使代码更简单、更清晰。）

接下来，您可能想要添加诸如`trie-get`or之类的函数`trie-remove`。

使用此代码，将 alist 转换为 trie 成为创建新 trie 然后使用上述函数将所有元素插入其中的组合：

```
(let ((trie (trie-create)))
  (mapc '(lambda (x) (trie-put (car x) (cdr x) trie)) alist)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T02:45:00.123

未经测试：

```
(defun hxswfml-build-trie (alist)
  "Builds a trie (a list, containing number of hash-maps, each hash-map
uses single character for a key, except for `t' symbol, which, if present
as a key is the key for the value one has to substitute with."
  (loop for (key . value) in alist
        with trie = (make-hash-table)
        for leaf = (reduce (lambda (branch c)
                             (or (gethash c branch)
                                 (puthash c (make-hash-table) branch)))
                           key :initial-value trie)
        do (puthash t value leaf)
        finally (return trie))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T03:31:39.097

请注意，`trie.el`在 Elisp 中已经有一个实现一般尝试的包（免责声明：我是包作者）。它已经存在好几年了，并且在最近的 Emacsen 中可以从 GNU ELPA 获得。或者可以从[包的网页](http://www.dr-qubit.org/emacs.php)下载。

默认情况下，它使用 AVL 树作为尝试的底层数据结构，而不是哈希表。但是您可以在创建 trie 时指定不同的底层数据结构。所有标准的 trie 搜索（加上一些额外的）都已实现，并且与底层数据结构无关。

这不会直接回答您的问题，但可能会节省您的工作量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T23:20:25.947

我不确定我是否理解它，但在 Common Lisp 中我会这样做：

```
(loop for i = (foo) then (1+ i) ...) 
```

# php - 如何选择所有带有数据的表行以显示带有数据的总数

> ID：13326982
> 
> 赞同：0
> 
> 时间：2012-11-10T23:10:42.007
> 
> 标签：php, mysql

我试图显示有小猫的人的总数。

```
$query = mysql_query("SELECT * FROM people.kittens WHERE IS NOT NULL"); 
```

问题是该字段未设置为`NULL`空白或有数据。然后我会显示总数：

```
$Totalpeoplewithkittens = mysql_num_rows($query); 
```

我知道`mysql_query`已经过时了。只是测试/学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:12:34.727

关于什么

```
$query = mysql_query("SELECT count(kittens) FROM people WHERE kittens > ''"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:13:36.043

使用类似 Select count(*) from...

# linux - EC2 上没有 C 编译器？

> ID：13326984
> 
> 赞同：7
> 
> 时间：2012-11-10T23:11:03.710
> 
> 标签：linux, gcc, amazon-ec2, configure

我一直在尝试在我的 EC2 实例上安装 Gearman，但是当我尝试 ./configure gearmand 时，我得到了这个：

```
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/home/ec2-user/gearmand-1.1.3':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details 
```

现在，奇怪的是，GCC 是绝对安装的。

```
which gcc46 
```

返回

```
/usr/bin/gcc46 
```

但是，当我尝试运行命令“gcc”时，找不到它...

我试图通过 yum 擦除/安装/重新安装 gcc 和 gcc-c++，但这似乎没有帮助。

有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T00:01:31.230

您可以通过链接`/usr/bin/gcc`到`/usr/bin/gcc46`使用此命令来解决此问题：

```
ln /usr/bin/gcc46 /usr/bin/gcc 
```

当您升级时`gcc`，您可以保留多个带有二进制文件的版本，`/usr/bin/gccXX`并简单地将`/usr/bin/gcc`链接指向您要使用的版本（可能是最新版本）。

# python - 如何根据文件规范在 python 中制作文件阅读器？

> ID：13326986
> 
> 赞同：1
> 
> 时间：2012-11-10T23:11:13.350
> 
> 标签：python, file-io

好的，我在处理文件方面相当新，有没有人有一个教程可以告诉我如何从文件规范中获取信息，以便我可以在 python 中操作文件。我想在未来学习如何做这件事，但具体来说，我现在感兴趣的格式是调用 sff 并且基本上是包含 pcx 图像的存档类型，其中包含有关每帧的一些信息，最终目标是我想要解压缩它并将 pcx 的子组转换为动画 gif（我已经可以完成最后一部分，我现在只是想弄清楚如何解压缩 sff）。我试图将有关从 python 文档中读取二进制文件的信息拼凑起来，并使用 seek read 并敲击解包，但它似乎并没有像我期望的那样工作。现在我被困在`seek(24)` `read(4)`（这应该给出下一个子标题的位置），并得到`\x00\x02\x00\x00`. 我猜是十六进制的（但我不知道如何让 python 告诉我）。所以我正在寻找一个教程，但也欢迎具体的答案。谢谢。

这是我的规格：

```
/*--| SFF file structure
|--------------------------------------------------*\
Version 1.01
HEADER (512 bytes)
------
Bytes

00-11 "ElecbyteSpr\0" signature  [12]

12-15 1 verhi, 1 verlo, 1 verlo2, 1 verlo3   [04]

16-19 Number of groups   [04]

20-24 Number of images   [04]

24-27 File offset where first subfile is located     [04]

28-31 Size of subheader in bytes     [04]

32 Palette type (1=SPRPALTYPE_SHARED or 0=SPRPALTYPE_INDIV) [01]

33-35 Blank; set to zero     [03]

36-511 Blank; can be used for comments   [476]

SUBFILEHEADER (32 bytes)

-------

Bytes

00-03 File offset where next subfile in the "linked list" is    [04]

located. Null if last subfile

04-07 Subfile length (not including header)  [04]

Length is 0 if it is a linked sprite

08-09 Image axis X coordinate    [02]

10-11 Image axis Y coordinate    [02]

12-13 Group number   [02]

14-15 Image number (in the group)    [02]

16-17 Index of previous copy of sprite (linked sprites only)    [02]
This is the actual

18 True if palette is same as previous image     [01]

19-31 Blank; can be used for comments    [14]

32- PCX graphic data. If palette data is available, it is the last

768 bytes.
*--------------------------------------------------------------------------*/ 
```

# php - 如何使用哈希获取 URL 的内容？

> ID：13326987
> 
> 赞同：1
> 
> 时间：2012-11-10T23:11:18.700
> 
> 标签：php, hash, web-scraping

我正在尝试使用以下方式获取 url 的内容`file_get_contents()`：

`file_get_contents('http://www.website.com');`

哪个工作正常，但我还必须获取看起来像这样的页面内容：`http://www.website.com#somevalue`但是，如果我使用与上面相同的方法，它只会返回与没有哈希相同的内容。是否可以获取更新的内容？我假设他们正在使用骨干网或其他类型的路由来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:16:19.530

似乎他们正在使用 Javascript 生成动态内容。不幸的是，`file_get_contents`将无法执行该 JS 代码——这解释了为什么您没有获得更新的内容。

抓取动态页面的最佳选择是使用浏览器来呈现页面并抓取元素。有一些 StackOverflow 问题讨论了您应该研究的抓取动态网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:16:03.150

### [http://www.website.com#somevalue](http://www.website.com#somevalue) v/s [http://www.website.com](http://www.website.com)

两者都请求**相同的页面资源**->`http://www.website.com` 由于散列而进一步导航是使用**JavaScript**完成的。

因此，您无法使用 直接获取这些内容**[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)**，因为您正在获取响应 html，但**不执行**其中引用的客户端脚本。

* * *

**[J4P5](http://j4p5.sourceforge.net/index.php)**是用 PHP 5 编写的 JavaScript 解释器，它可以帮助您在服务器上执行 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:16:27.823

URL 片段（“哈希”）不会提交给服务器，它们只是客户端。如果页面在客户端基于哈希通过 Javascript 动态更改，您需要下载站点，将其解析为 DOM，运行嵌入的 Javascript，然后抓取 DOM。

换句话说，您需要在您的服务器上模拟一个完整的浏览器。
这并不是微不足道的。

我建议您根据关键字“无头浏览器”调查您的情况可能发生的情况。

# android - android: OnEditorActionListener 停止应用

> ID：13326989
> 
> 赞同：1
> 
> 时间：2012-11-10T23:11:48.300
> 
> 标签：android

请当我尝试运行此应用程序时它会停止。

问题在于 OnEditorActionListener，如果我删除应用程序加载并运行正常。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.TextView.OnEditorActionListener;
import android.widget.Toast;

public class IMEDemo2 extends Activity  
{       EditText et;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            et.setOnEditorActionListener(new OnEditorActionListener() { 
                public boolean onEditorAction(TextView v, int actionId, KeyEvent event) { 
                    }
                    Toast.makeText(getApplicationContext(), "OK", Toast.LENGTH_LONG).show();    
                    return true; 
                } 
            });             
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:17:07.697

您没有初始化您的`et`字段，因此当您尝试设置侦听器时，您将获得一个`NullPointerException`.

要初始化`et`，放...

```
et = (EditText) findViewById(R.id.myEditText); 
```

...行前`et.setOnEditorActionListener(...)`。

在我的示例中更改`R.id.myEditText` 为文件中的任何资源 ID `main.xml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:27:25.597

我认为您需要使用 EditText et = (EditText) findViewById(RI'd.EDITTEXT) 进一步定义编辑文本所有大写字母都是您在 XML 文件中设置的 Id

# javascript - AngularJS获取当前templateUrl（html页面）

> ID：13326994
> 
> 赞同：11
> 
> 时间：2012-11-10T23:12:12.180
> 
> 标签：javascript, angularjs

我使用 AngularJS 来构建我的应用程序。`ng-view`通过 routeProvider 设置路由。

一切正常，但我想知道如何获取当前的 templateUrl？

```
$routeProvider.
    when('/terms', {
                    templateUrl: '/pages/terms.html',
                    controller: AboutController
                   }); 
```

在这种情况下`/pages/terms.html`...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-11T01:10:45.587

您可能正在寻找`$route.current.templateUrl`.

# django - Django-MongoDB 递归调用

> ID：13326999
> 
> 赞同：1
> 
> 时间：2012-11-10T23:12:57.997
> 
> 标签：django, mongodb

我是 MongoDB 的初学者，我正在尝试解决我在使用关系数据库时遇到的一个问题（使用 Django）。我有一个`Song`和`Album`模型，我希望每首歌都有对其专辑的引用，并且每张专辑都有一个包含所有歌曲的列表。是否有可能在 MongoDB 中有这样的东西：

```
{
'song_title': 'In mist she was standing',
'album': {
   'album_title': 'Orchid',
   'songs': [ { song_title: 'Requiem', album:{'album_title':'Orchid', 'songs':[{song_title'.... 
```

那就是我们有一个无限循环的时候。有没有办法做到这一点？也许我没有完全理解 MongoDB 的意义，如果有人能指出我正确的方向，我会很高兴。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:00:15.220

我的建议是在开始时保持简单：两个集合`Album`，`Song`就像在任何其他关系数据库中一样。

我假设您使用 mongoengine 作为 ORM。

```
class Album(Document):
    album_title = StringField()
    songs = ListField(ObjectIdFIeld())
    meta = {
       'indexes': ['songs'],
       'allow_inheritance': False,
    }

class Song(Document):
    song_title = StringField()
    album = ObjectIdField()
    meta = {
       'indexes': ['album']
    } 
```

每次你获取一个`Album`你可以用第二个查询来获取它的歌曲（mongodb没有连接的概念）：

```
album = Album.objects.all().first() # just an example
songs = Song.objects.filter(id__in=album.songs) 
```

另一种可能性是将歌曲完全嵌入专辑中：

```
class Song(EmbeddedDocument):
    song_title = StringField()

class Album(Document):
    album_title = StringField()
    songs = ListField(EmbeddedDocumentField(Song)) 
```

如果您的查询（几乎）全部来自`Album`模型，可能会更好。

无论如何，我建议从两个表设置开始，然后您可以通过将歌曲数据嵌入专辑来提高性能。

希望这可以帮助