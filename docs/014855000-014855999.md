# StackOverflow 问答 14855000-14855999

# c# - 如何防止我的 View-Model 变得单一/非常大？

> ID：14855005
> 
> 赞同：0
> 
> 时间：2013-02-13T13:45:59.713
> 
> 标签：c#, mvvm

我最近开始使用 MVVM 模式。我开始看到我的视图模型可能很快变得非常大且难以管理。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T14:01:15.580

有几种方法可以解决这个问题。我还没有找到一个通用的“修复”，但我会分享一些我在此过程中学到的东西。您已将此标记为[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")，但未指定您使用的平台（这是桌面应用程序、ASP.NET 网站还是什么？）所以我会尽量保持通用。不过，我对 MVVM 的大部分经验都是在 Web 开发中，所以其中的一部分可能会慢慢渗透。

首先，认识到大量视图模型可能是需要重新思考的设计的征兆。可能是一页试图做太多事情。将这个页面分成几个页面不仅可以减小视图模型的大小，还可以让你将逻辑转移到其他方法中，并使你的后端或服务器端代码更易于导航，并且可能会使页面不那么混乱和更容易供最终用户实际使用。

其次，仔细观察你的视图模型是否有点超出了他们的界限。他们可能正在做应该在其他地方处理的逻辑。例如，如果您使用存储库（或类似的东西）来访问数据源，让这些类处理与构造查询或准备保存数据相关的逻辑，而不是让您的视图模型来做。如果您不使用存储库，请考虑添加一些并将您的数据源访问代码转移到它们。

同样，查看您的视图模型是否共享逻辑。如果是这样，请将其转移到一个基类，并在您需要该共享逻辑时从该基类继承。您可以从多个基本视图模型继承以组合功能并减少代码重复。

最后一点是针对 web 的，但是：利用局部视图。如果您的页面的视图模型变得很大，因为该页面上有很多东西，请考虑将页面拆分为区域或窗格（至少在概念上，如果不是视觉上）并使每个区域成为局部视图。这意味着您的视图代码更易于阅读，因为曾经的巨大页面现在或多或少只是带有部分视图调用的模板。它使您的服务器端代码更易于阅读，因为构建和填充这个巨大页面的一种重要方法现在变成了几个较小的方法。最重要的是，它甚至可以让您使用这些窗格做一些聪明的事情，例如使用 AJAX 重新加载它们（定期或基于交互或事件），而无需重新加载整个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:50:08.063

部分类、ViewModels 继承（即包含不应复制的公共逻辑的基本 ViewModel）、关注点分离（即使用服务层并且不从 ViewModels 调用 DB 请求）...等。

这取决于您的实际代码以及“非常大”的含义。你的问题实际上很模糊。

# c# - 加载数据表时过滤 xml 文件

> ID：14855007
> 
> 赞同：1
> 
> 时间：2013-02-13T13:46:04.263
> 
> 标签：c#, .net, xml, filter, dataset

```
 DataSet ds = new DataSet();
            DataTable dataTable = new DataTable();
            ds.ReadXml("File.xml");
            dataTable = ds.Tables[0];
            LoadListView(dataTable);  

  <?xml version="1.0"?>
    <Book>
       <note1>
        <to>Tove</to>
        <from>Jani</from>
        <heading>Reminder</heading>
        <body>Don't forget me this weekend!</body>
      </note1>
    </Book> 
```

我正在读取数据集中的整个 xml 文件，然后将所有记录显示到 Listview。但是当我将所有数据加载到列表视图时，内存消耗更多。数据表占用了我机器的所有内存，并且在某些时候给了我一个内存异常异常。是否可以在过滤后加载数据表。上面是我的 xml 文件，它有多个节点，**我只需要加载数据表中的那些节点，这些节点的 XmlElement 以“j”开头。** 我会很感激你的答案。 **我不想使用 XMlDocument 或 Xpathquery 或 LINQ to XML**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:48:52.697

这是基于您知道 XML 文件的结构（即格式具有稳定、统一的结构）的相当弱的假设。另外，我不知道这会给您的情况带来什么性能改进（因为实例化了更多对象）。但让我们试一试。

```
class Program
{
    static void Main(string[] args)
    {
        List<string> list = new List<string>();
        List<int> positions = new List<int>();
        bool checkNext = false;
        int position = -1;

        DataTable dataTable = new DataTable();
        dataTable.Columns.Add("to");
        dataTable.Columns.Add("from");
        dataTable.Columns.Add("heading");
        dataTable.Columns.Add("body");

        var rs = new XmlReaderSettings();
        rs.IgnoreWhitespace = true;

        using (var reader = XmlReader.Create(File.OpenRead("data.xml"), rs))
        {
            while (reader.Read())
            {
                if (reader.Name == "")
                {
                    list.Add(reader.Value);
                    position++;
                }
                if (checkNext)
                {
                    // TODO: apply your filter
                    if (reader.Value.ToLower().StartsWith("j"))
                    {
                        positions.Add(position);
                    }
                }
                if (reader.Name == "from")
                {
                    checkNext = !checkNext;
                }
            }
        }

        foreach (int match in positions)
        {
            dataTable.Rows.Add(
                list[match - 1],
                list[match],
                list[match + 1],
                list[match + 2]);
        }

        //LoadListView(dataTable);  
    }
} 
```

# mysql - 多对多表 JOIN

> ID：14855013
> 
> 赞同：0
> 
> 时间：2013-02-13T13:46:13.400
> 
> 标签：mysql, join, relational-database

我正在尝试在患者和护士之间建立多对多的关系。

我需要将 PatientID 分配给 NurseID；所以病人和护士之间是有关系的。这可以通过函数 TABLE JOIN 实现吗？

到目前为止，我有三个表：

```
Patient 
(
PatientID (PK), 
Forename, 
surname, 
gender, 
date of birth, 
address, 
illness, 
prioirty
)

seen_by 
(
ID(PK),
PatientID(FK), 
NurseID(FK)
) 

Nurse 
(
NurseID(PK),  
Forename, 
surname
) 
```

我在 see_by 表中添加了一个外部约束，以添加患者和护士之间的关系。

```
Patient (PatientID (PK), Forename, surname, gender, date of birth, address, illness, prioirty)

seen_by (ID(PK) PatientID(FK to Patient.PatientID), NurseID(FK to Nurse.NurseID) )

Nurse (NurseID(PK), Forename, surname) 
```

对我做错了什么有什么建议吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:48:18.920

试试这个：

```
select p.*,s.*,n.* 
from patient as p inner join seen_by as s 
on p.PatientID=s.PatientID
inner join Nurse as n 
on n.NurseID=s.NurseID 
```

如果需要，可以在最后添加 where

```
select p.*,s.*,n.* 
from patient as p inner join seen_by as s 
on p.PatientID=s.PatientID
inner join Nurse as n 
on n.NurseID=s.NurseID
where p.field='dumbtext'  -- you can add here the rest of the conditions 
```

# python - 在两个日期之间选择一个日期，同时考虑单独的时间字段

> ID：14855014
> 
> 赞同：0
> 
> 时间：2013-02-13T13:46:15.173
> 
> 标签：python, postgresql

我在 Postgresql 中有一个日期和时间字段。我正在用 python 阅读它，需要在特定时间过去的特定日子里整理东西。

步骤基本上是这样的：

1.  选择 * from x where date > monthdayyear
2.  在该子集中，仅选择那些 > 为该日期给出的时间
3.  AND date2 必须 < monthdayyear2 AND time2 必须小于该日期给出的 time2

我知道肯定有一些 python 方法可以做到这一点，通过迭代结果等等。我想知道是否有比暴力破解更好的方法？如果可能的话，我宁愿不运行多个查询，或者必须在 fetchall() 中整理出很多额外的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:10:00.373

如果我了解您的设计，这确实是一个架构设计问题。代替：

```
CREATE TABLE sometable (
    date1 date,
    time1 time,
    date2 date,
    time2 time
); 
```

你通常想要：

```
CREATE TABLE sometable (
    timestamp1 timestamp with time zone,
    timestamp2 timestamp with time zone
); 
```

如果您希望将时间戳自动转换为 UTC 并返回到客户端`TimeZone`，或者`timestamp without time zone`如果您想存储原始时间戳而不进行时区转换。

如果包容性测试没问题，你可以写：

```
SELECT ...
FROM sometable 
WHERE '2012-01-01 11:15 +0800' BETWEEN timestamp1 AND timestamp2; 
```

如果你不能修改你的架构，你最好的选择是这样的：

```
SELECT ...
FROM sometable
WHERE '2012-01-01 11:15 +0800' BETWEEN (date1 + time1) AND (date2 + time2); 
```

当涉及到多个时区的客户时，这可能会有一些意想不到的怪癖；您可能需要查看`AT TIME ZONE`操作员。

如果您需要在一侧和/或另一侧进行排他性测试，则不能使用，`BETWEEN`因为它是`a <= x <= b`运算符。而是写：

```
SELECT ...
FROM sometable
WHERE '2012-01-01 11:15 +0800' > (date1 + time1)
  AND '2012-01-01 11:15 +0800' < (date2 + time2); 
```

## 自动化架构更改

自动化模式更改是可能的。

您想查询具有`INFORMATION_SCHEMA`和列对的表，`pg_catalog.pg_class`然后生成一组命令来统一它们。`pg_catalog.pg_attribute``date``time``ALTER TABLE`

确定什么是“对”是特定于应用程序的；如果您使用了一致的命名方案，则应该很容易使用`LIKE`or`~`运算符和/或`regexp_matches`. 您想生成一组`(tablename, datecolumnname, timecolumnname)`元组。

一旦你有了它，你可以为每个`(tablename, datecolumnname, timecolumnname)`元组生成以下`ALTER TABLE`语句，这些语句*必须*在事务中运行以确保安全，并且应该在使用你关心的任何数据之前进行测试，并且其中的条目`[brackets]`是替换：

```
BEGIN;
ALTER TABLE [tablename] ADD COLUMN [timestampcolumnname] TIMESTAMP WITH TIME ZONE;
--
-- WARNING: This part can lose data; if one of the columns is null and the other one isn't
-- the result is null. You should've had a CHECK constraint preventing that, but probably
-- didn't. You might need to special case that; the `coalesce` and `nullif` functions and
-- the `CASE` clause might be useful if so.
--
UPDATE [tablename] SET [timestampcolumnname] = ([datecolumnname] + [timecolumnname]);
ALTER TABLE [tablename] DROP COLUMN [datecolumnname];
ALTER TABLE [tablename] DROP COLUMN [timecolumnname];
-- Finally, if the originals were NOT NULL:
ALTER TABLE [tablename] ALTER COLUMN [timestampcolumnname] SET NOT NULL; 
```

然后检查结果，`COMMIT`如果满意。请注意，从一开始就对表进行排他锁，`ALTER`因此在您`COMMIT`或`ROLLBACK`.

如果您使用的是现代 PostgreSQL，您可以使用[函数`format`生成](http://www.postgresql.org/docs/current/static/plpgsql-statements.html)SQL ；在旧版本上，您可以使用字符串连接 ( `||`) 和`quote_literal`函数。例子：

给定样本数据：

```
CREATE TABLE sometable(date1 date not null, time1 time not null, date2 date not null, time2 time not null);
INSERT INTO sometable(date1,time1,date2,time2) VALUES
('2012-01-01','11:15','2012-02-03','04:00');

CREATE TABLE othertable(somedate date, sometime time);
INSERT INTO othertable(somedate, sometime) VALUES
(NULL, NULL),
(NULL, '11:15'),
('2012-03-08',NULL),
('2014-09-18','23:12'); 
```

这是一个生成输入数据集的查询。请注意，它依赖于命名约定，即一旦从列中删除任何`date`或单词，匹配的列对总是具有通用名称。`time`您可以改为通过测试来使用邻接`c1.attnum + 1 = c2.attnum`。

```
BEGIN;

WITH 
-- Create set of each date/time column along with its table name, oids, and not null flag
cols AS (
    select attrelid, relname, attname, typname, atttypid, attnotnull 
    from pg_attribute 
    inner join pg_class on pg_attribute.attrelid = pg_class.oid 
    inner join pg_type on pg_attribute.atttypid = pg_type.oid 
    where NOT attisdropped AND atttypid IN ('date'::regtype, 'time'::regtype)
),
-- Self join the time and date column set, filtering the left side for only dates and
-- the right side for only times, producing two distinct sets. Then filter for entries
-- where the names are the same after replacing any appearance of the word `date` or
-- `time`.
tableinfo (tablename, datecolumnname, timecolumnname, nonnull, hastimezone) AS (
    SELECT 
        c1.relname, c1.attname, c2.attname, 
        c1.attnotnull AND c2.attnotnull AS nonnull, 
        't'::boolean AS withtimezone
    FROM cols c1 
    INNER JOIN cols c2 ON (
        c1.atttypid = 'date'::regtype 
        AND c2.atttypid = 'time'::regtype 
        AND c1.attrelid = c2.attrelid
        -- Match column pairs; I used name matching, you might use adjancency:
        AND replace(c1.attname,'date','') = replace(c2.attname,'time','')
    )
)
-- Finally, format the results into a series of ALTER TABLE statements.
SELECT format($$
    ALTER TABLE %1$I ADD COLUMN %4$I TIMESTAMP %5$s;
    UPDATE %1$I SET %4$I = (%2$I + %3$I);
    ALTER TABLE %1$I DROP COLUMN %2$I;
    ALTER TABLE %1$I DROP COLUMN %3$I;
$$ || 
    -- Append a clause to make the column NOT NULL now that it's populated, only
    -- if the original date or time were NOT NULL:
    CASE 
       WHEN nonnull
       THEN '    ALTER TABLE %1$I ALTER COLUMN %4$I SET NOT NULL;'
       ELSE ''
    END,

    -- Now the format arguments
    tablename,           -- 1
    datecolumnname,      -- 2
    timecolumnname,      -- 3
    -- You'd use a better column name generator than this simple example:
    datecolumnname||'_'||timecolumnname,  -- 4
    CASE 
       WHEN hastimezone THEN 'WITH TIME ZONE' 
       ELSE 'WITHOUT TIME ZONE' 
    END                  -- 5
)
FROM tableinfo; 
```

您可以在第二个会话中读取结果并将它们作为 SQL 命令发送，或者如果您想变得花哨，您可以编写一个相当简单的 PL/PgSQL 函数，该函数`LOOP`覆盖结果并`EXECUTE`逐个处理。该查询产生如下输出：

```
 ALTER TABLE sometable ADD COLUMN date1_time1 TIMESTAMP WITH TIME ZONE;
    UPDATE sometable SET date1_time1 = (date1 + time1);
    ALTER TABLE sometable DROP COLUMN date1;
    ALTER TABLE sometable DROP COLUMN time1;
    ALTER TABLE sometable ALTER COLUMN date1_time1 SET NOT NULL;

    ALTER TABLE sometable ADD COLUMN date2_time2 TIMESTAMP WITH TIME ZONE;
    UPDATE sometable SET date2_time2 = (date2 + time2);
    ALTER TABLE sometable DROP COLUMN date2;
    ALTER TABLE sometable DROP COLUMN time2;
    ALTER TABLE sometable ALTER COLUMN date2_time2 SET NOT NULL;

    ALTER TABLE othertable ADD COLUMN somedate_sometime TIMESTAMP WITHOUT TIME ZONE;
    UPDATE othertable SET somedate_sometime = (somedate + sometime);
    ALTER TABLE othertable DROP COLUMN somedate;
    ALTER TABLE othertable DROP COLUMN sometime; 
```

我不知道是否有任何有用的方法可以在每列的基础上进行计算，无论你想要`WITH TIME ZONE`还是`WITHOUT TIME ZONE`. 很可能你只是硬编码就完成了，在这种情况下，你可以删除该列。我把它放在那里，以防在你的应用程序中有一个很好的方法来解决它。

如果您遇到时间可以为空但日期不为空或反之亦然的情况，您需要将日期和时间包装在一个表达式中，以决定在为空时返回什么结果。`nullif`和函数对此`coalesce`很有用，就像`CASE`. 请记住，添加 null 和非 null 值会产生 null 结果，因此您可能不需要做任何特殊的事情。

如果您使用模式，您可能需要进一步细化查询以使用模式名称前缀的 %I 替换来消除歧义。如果您不使用模式（如果您不知道模式是什么，则不使用），那么这无关紧要。

完成此操作后，请考虑添加小于或等于在应用程序中有意义的位置`CHECK`强制执行的约束。另请查看文档中的排除约束。`time1``time2`

# javascript - 使用请求在 Node.js 中获取二进制内容

> ID：14855015
> 
> 赞同：142
> 
> 时间：2013-02-13T13:46:19.900
> 
> 标签：javascript, node.js, request, binaryfiles, requestjs

我试图`GET`使用二进制数据[`request`](https://github.com/request/request)，并且有类似的东西：

```
var requestSettings = {
    method: 'GET',
    url: url,
};
request(requestSettings, function(error, response, body) {
    // Use body as a binary Buffer
} 
```

但`body`总是与预期的几个字节不同。经过进一步调查，我发现`request`假设`body`是字符串并替换了所有非 unicode 字节。

我试图添加

```
encoding: 'binary' 
```

，`requestSettings`但它没有帮助。

如何获取二进制数据？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2013-02-13T13:46:19.900

好的，经过大量挖掘，我发现`requestSettings`应该有：

```
encoding: null 
```

然后`body`将是类型`Buffer`，而不是默认的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T19:21:22.847

接受的答案并没有解决我的问题。我不知何故认为这`gzip: true`行得通。

# sql - 带触发器的多线程

> ID：14855030
> 
> 赞同：0
> 
> 时间：2013-02-13T13:47:07.050
> 
> 标签：sql, triggers

我编写了一个触发器，它将记录从表 members_new 传输到`members_old`. trigger 的作用是**在 insert** in之后在`members_old` on中插入一条记录。所以假设一条记录被插入到一个like**`members_new``members_new`**

 **```
nMmbID   nMmbName  nMmbAdd 

1        Abhi     Bangalore 
```

这条记录将被插入到`members_old`与表相同的数据结构中

我的触发器是这样的：

```
create trigger add_new_record 
after 
insert on members_new
for each row 
INSERT INTO `test`.`members_old`
(
`nMmbID`, 
`nMmbName`,
`nMmbAdd`
)
(
SELECT
`members_new`.`nMmbID`, 
`members_new`.`nMmbName`,
`members_new`.`nMmbAdd`
FROM `test`.`members_new`
where nMmbID = (select max(nMmbID) from `test`.`members_new` // written to read   the last record from the members_new and stop duplication on the members_old , also this will reduce the chances of any error . ) 
) 
```

这个触发器现在正在工作，但我的困惑是，如果在一个实例中发生多次插入会发生什么。

它会降低性能吗？

由于我`members_old`有 FK，我会在任何情况下面临僵局吗？

如果有针对这种情况的更好解决方案，请关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:01:45.410

从[手册](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)：

> 您可以使用别名 OLD 和 NEW 来引用主题表（与触发器关联的表）中的列。OLD.col_name 在更新或删除之前引用现有行的列。NEW.col_name 指的是要插入的新行的列或更新后的现有行。

```
create trigger add_new_record 
after 
insert on members_new
for each row 
INSERT INTO `test`.`members_old`
SET
`nMmbID` = NEW.nMmbID,
`nMmbName` = NEW.nMmbName,
`nMmbAdd` = NEW.nMmbAdd; 
```

而且您不会遇到死锁或其他问题。它也应该更快，因为您不必在之前读取最大值（这也是不安全的并且可能导致数据泄露）。如果您对为什么感兴趣，请阅读隔离级别和事务...**

# ios - 亚马逊 SDK 在 iPhone 应用程序中的集成

> ID：14855036
> 
> 赞同：0
> 
> 时间：2013-02-13T13:47:16.860
> 
> 标签：ios, objective-c

我可以在 iphone 应用程序中使用 AWS SDK（Amazon Web 服务 SDK）实现小功能，例如搜索亚马逊网站上的所有产品吗.....

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:05:17.180

我不认为 Amazon AWS SDK 是关于您可以购买商品的亚马逊在线商店。它是一个 API，可让您访问用于云计算、数据库等的 Amazon 服务器服务。:)

但是，您可以做的是通过简单地交换此 URL [http://www.amazon.com/s/ref=nb_sb_noss_1/185-2077263-5307546?url=search-alias%3Daps&field-中的“关键字”来形成查询关键字=IPHONE](http://www.amazon.com/s/ref=nb_sb_noss_1/185-2077263-5307546?url=search-alias%3Daps&field-keywords=IPHONE)

如果您熟悉 HTML，您可以使用结果来可视化产品和所有内容...... :)

希望我能帮上忙！

# xml - solr schema.xml 验证

> ID：14855044
> 
> 赞同：0
> 
> 时间：2013-02-13T13:47:39.920
> 
> 标签：xml, solr

我对 Solr 的架构验证有问题，显示 500 错误。

```
SimplePostTool: version 1.4
SimplePostTool: POSTing files to http://localhost:8081/solr-project/update..
SimplePostTool: POSTing file sample-solr.xml
SimplePostTool: FATAL: Solr returned an error #500 Error Interno del Servidor 
```

**Solr**的 schema.xml 的字段是这样的：

```
 <field>
   <field name="id" type="string" indexed="true" stored="true" required="true" />
   <field name="url" type="string" stored="true"/>
   <field name="content" type="text_es" indexed="true" stored="true" />
 </field>
 <uniqueKey>id</uniqueKey> 
```

无需遵循等于 schema.xml 的顺序，**id**是字段**required**。

**示例-solr.xml**

```
<?xml version="1.0"?>
    <add>
      <doc>
       <field name="id">id product</field>
       <field name="url">http://www.web.com/content/direct/index.html</field>
       <field name="content">field content text</field> 
     </doc>
    </add> 
```

编译项目并通过测试执行：

```
~/opt/solr/solr/example/exampledocs$ java -jar -Durl=http://localhost:8081/solr-project/update post.jar sample-solr.xml 
```

可以是什么？谢谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:51:24.020

如果这是 Solr 4+，请查看您启动 Solr 的控制台或日志屏幕下的 Admin Web UI。真正的消息在服务器端，会告诉你问题出在哪里。

# ios - Objective-C - 如何用“+”替换空格

> ID：14855048
> 
> 赞同：-4
> 
> 时间：2013-02-13T13:47:42.497
> 
> 标签：ios, objective-c, cocoa-touch

句子中有空格时如何添加加号（+）？

例子：

```
Hello how are you doing 
```

我想要的是：

```
Hello+how+are+you+doing 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T13:50:25.830

尝试：

```
NSString *str = @"Hello how are you doing";
str = [str stringByReplacingOccurrencesOfString:@" " withString:@"+"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:51:43.333

尝试`stringByReplacingOccurrencesOfString:withString:`来自 NSString 类的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:51:52.183

你可以这样做：

```
NSString *helloWorld = @"Hello How are you doing";
NSString *alteredString = [helloWorld stringByReplacingOccurrencesOfString:@" " withString:@"+"]; 
```

`stringByReplacingOccurrencesOfString:@" " withString:@"+"`就是你在这里看到的。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:58:20.193

```
 NSMutableString *nstring = [NSMutableString stringWithFormat:@"Hello how are you doing"];

   NSString *newString =  [nstring stringByReplacingOccurrencesOfString:@" " withString:@"+"];
    NSLog(@"%@",newString); 
```

# twitter - Twitter 实时搜索流

> ID：14855049
> 
> 赞同：0
> 
> 时间：2013-02-13T13:47:45.257
> 
> 标签：twitter, twitter-streaming-api

我正在寻找一种解决方案，该解决方案将提供类似订阅的响应，其中包含来自 twitter 的特定标签的结果。

我看到了大量用于 node.js 的 REST/STREAM 脚本，但这些脚本只连接到 twitter 一次。

我不想担心速率限制。

基本上，如果有 20 个不同标签的新搜索结果，我想要做的是设置通知（例如控制台日志）。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T16:36:39.233

使用流式 API，您应该只使用单个连接，但是它可以在`track`属性中包含多个关键字（逗号分隔），并且可以与其他搜索参数（例如位置和用户过滤器）结合使用。

这个想法是您使用一个流来收集您需要的所有数据，然后独立处理/过滤该数据以根据需要显示或存储。

# c# - 如何将 ToolStripSplitButton 保持在其容器的范围内

> ID：14855052
> 
> 赞同：1
> 
> 时间：2013-02-13T13:47:59.577
> 
> 标签：c#, .net, winforms, toolstrip, toolstripitem

我正在用 C# 开发一个 Windows 窗体应用程序

我的主窗体有一个带有 ToolStripSplitButton 的工具条，它向右对齐。单击拆分按钮时，其菜单显示在表单的边缘，除非表单太靠近屏幕的最右侧。

我玩过各种属性来尝试解决这个问题，但运气不佳！

是否有任何东西（甚至可能是 DllImport）可以强制按钮的菜单始终折叠并朝向表单，并且永远不会超出表单边界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:28:33.770

正如对 OP 的评论中所得出的那样，如果您不在 ToolStripSplitButton 的子项中使用图像，这是一个简单的解决方案：

1) 将`RightToLeft`ToolStripSplitButton 本身的属性设置为`Yes`

2）将`RightToLeft`所有子项的属性设置为`No`正确对齐文本。

# c# - 覆盖枚举的 Tostring() 以适应运行时字符串更改

> ID：14855068
> 
> 赞同：5
> 
> 时间：2013-02-13T13:48:44.613
> 
> 标签：c#, enums

我有一个这样的枚举

```
enum Animal:byte
{
Cat=0,
Dog=1,
Horse=2
} 
```

我想重写`ToString()`它来编写自定义字符串，因为我的应用程序是多语言的（`Cat.ToString()`应该检索 cat 的翻译词）。所以`Description`keyowrd不能在这里使用。谁能给我一个提示，找到一个巧妙的方法来解决这个问题？

# ajax - Asp.net mvc3 中的请求中缺少隐藏的输入

> ID：14855070
> 
> 赞同：0
> 
> 时间：2013-02-13T13:48:51.837
> 
> 标签：ajax, asp.net-mvc-3, hidden-field

我在用asp.net mvc3 ajax.beginform，最近遇到一个很奇怪的问题。似乎我放置在表单中的一些隐藏输入在请求对象中不存在。发布后我不会以任何方式更改这些值。知道是什么原因吗？

这是一个给我带来麻烦的表格示例。

```
<form action="/PriceListItems/PriceUpdate" data-ajax="true" data-ajax-method="Post" id="form0" method="post">

    <input id="item_Id" name="item.Id" type="hidden" value="3">
    <input id="price_TariffId" name="price.TariffId" type="hidden" value="1">
    <input class="input-mini" 
           data-val="true" 
           data-val-number="The field Price must be a number." 
           data-val-regex="incorrect number" 
           data-val-regex-pattern="(^N/A$)|(^[-]?(\d+)(\.\d{0,3})?$)|(^[-]?(\d{1,3},(\d{3},)*\d{3}(\.\d{1,3})?|\d{1,3}(\.\d{1,3})?)$)" 
           data-val-required="שדה זה הינו חובה" 
           id="itemTariff_3_1" 
           name="price.Price" 
           onchange="postThis(this);" 
           type="text" 
           value="300.00"> 
    <span class="help-block">
        <span class="field-validation-valid" 
                  data-valmsg-for="itemTariff_3_1" 
                  data-valmsg-replace="true"></span>
    </span>
</form> 
```

谢谢！

**解决了它，但这是一个非常令人失望的解决方案..：** 我已经替换了我网站中的每个与 jquery 相关的脚本，以便它来自 CDN 而不是来自我的本地文件，但在原始版本中。就是这样。一切突然开始合在一起。令人沮丧，但有效。谢谢，

尼尔

# windows-runtime - WinRT XAML 工具包图表控件：如何设置图例项的样式？

> ID：14855075
> 
> 赞同：2
> 
> 时间：2013-02-13T13:49:05.783
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml, silverlight-toolkit, winrt-xaml-toolkit

我想为 WinRT XAML 工具包图表控件的图例项设置样式。

查了源码，发现如下样式：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:datavis="using:WinRTXamlToolkit.Controls.DataVisualization">

    <Style
        TargetType="datavis:Legend">
        <Setter
            Property="BorderBrush"
            Value="Black" />
        <Setter
            Property="BorderThickness"
            Value="1" />
        <Setter
            Property="IsTabStop"
            Value="False" />
        <Setter
            Property="TitleStyle">
            <Setter.Value>
                <Style
                    TargetType="datavis:Title">
                    <Setter
                        Property="Margin"
                        Value="0,5,0,10" />
                    <Setter
                        Property="FontWeight"
                        Value="Bold" />
                    <Setter
                        Property="HorizontalAlignment"
                        Value="Center" />
                </Style>
            </Setter.Value>
        </Setter>
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="datavis:Legend">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Padding="2">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition
                                    Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <datavis:Title
                                Grid.Row="0"
                                x:Name="HeaderContent"
                                Content="{TemplateBinding Header}"
                                ContentTemplate="{TemplateBinding HeaderTemplate}"
                                Style="{TemplateBinding TitleStyle}" />
                            <ScrollViewer
                                Grid.Row="1"
                                VerticalScrollBarVisibility="Auto"
                                BorderThickness="0"
                                Padding="0"
                                IsTabStop="False">
                                <ItemsPresenter
                                    x:Name="Items"
                                    Margin="10,0,10,10" />
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

但这仅设置 Legend 容器和 Title 的样式。

如何设计图例项目？

> **编辑：** 非常感谢 Filip 的回答，这正是我想要的。但 Visual Studio 给了我一个错误：

```
<Setter.Value>
                    <ItemsPanelTemplate>
                        <controls:UniformGrid
                            Columns="1"
                            Rows="5" />
                    </ItemsPanelTemplate>
                </Setter.Value> 
```

它说**控件：未找到 UniformGrid**，我删除了这一部分并设法使事情正常进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T17:24:25.720

首先要注意的是该`Legend`控件是一个`ItemsControl`，因此您可以使用`ItemContainerStyle`. 项目模板受`LegendItem`样式控制，您也可以在源代码中找到该样式。在应用程序中设置样式的方法是`Style`通过`Legend`设置控件的`LegendStyle`属性来设置 的`Chart`。然后在`Legend`样式中设置`ItemContainerStyle`为 a `Style`of `LegendItem`。我还没有检查`Chart`控件在 Blend 中的行为是否正确，但如果确实如此，那将是编辑这些控件的最佳位置。我只是手工制作了这个样品。

![在此处输入图像描述](../Images/92502ef8b53edf57daad3e147a66585c.png)

```
<charting:Chart
    x:Name="PieChart"
    Title="Pie Chart"
    Margin="70,0">
    <charting:Chart.Series>
        <Series:PieSeries
            Title="Population"
            ItemsSource="{Binding Items}"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}"
            IsSelectionEnabled="True" />
    </charting:Chart.Series>
    <charting:Chart.LegendStyle>
        <Style
            TargetType="datavis:Legend">
            <Setter
                Property="VerticalAlignment"
                Value="Stretch" />
            <Setter
                Property="Background"
                Value="#444" />
            <Setter
                Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <controls:UniformGrid
                            Columns="1"
                            Rows="5" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter
                Property="TitleStyle">
                <Setter.Value>
                    <Style
                        TargetType="datavis:Title">
                        <Setter
                            Property="Margin"
                            Value="0,5,0,10" />
                        <Setter
                            Property="FontWeight"
                            Value="Bold" />
                        <Setter
                            Property="HorizontalAlignment"
                            Value="Center" />
                    </Style>
                </Setter.Value>
            </Setter>
            <Setter
                Property="ItemContainerStyle"
                xmlns:series="using:WinRTXamlToolkit.Controls.DataVisualization.Charting">
                <Setter.Value>
                    <Style
                        TargetType="series:LegendItem">
                        <Setter
                            Property="Template">
                            <Setter.Value>
                                <ControlTemplate
                                    TargetType="series:LegendItem">
                                    <Border
                                        MinWidth="200"
                                        Margin="20,10"
                                        CornerRadius="10"
                                        VerticalAlignment="Stretch"
                                        HorizontalAlignment="Stretch"
                                        Background="{Binding Background}">
                                        <datavis:Title
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            FontSize="24"
                                            FontWeight="Bold"
                                            Content="{TemplateBinding Content}" />
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Setter.Value>
            </Setter>
            <Setter
                Property="Template">
                <Setter.Value>
                    <ControlTemplate
                        TargetType="datavis:Legend">
                        <Border
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="2">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition
                                        Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <datavis:Title
                                    Grid.Row="0"
                                    x:Name="HeaderContent"
                                    Content="{TemplateBinding Header}"
                                    ContentTemplate="{TemplateBinding HeaderTemplate}"
                                    Style="{TemplateBinding TitleStyle}" />
                                <ScrollViewer
                                    Grid.Row="1"
                                    VerticalScrollBarVisibility="Auto"
                                    BorderThickness="0"
                                    Padding="0"
                                    IsTabStop="False">
                                    <ItemsPresenter
                                        x:Name="Items"
                                        Margin="10,0,10,10" />
                                </ScrollViewer>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </charting:Chart.LegendStyle>
</charting:Chart> 
```

# python - M2Crypto 加载 RSA 密钥失败

> ID：14855077
> 
> 赞同：0
> 
> 时间：2013-02-13T13:49:24.037
> 
> 标签：python, m2crypto

我有这个烦人的 M2Crypto 错误：

```
In [126]: M2Crypto.EVP.load_key('private-key-2048.pem', 'r')
---------------------------------------------------------------------------
BIOError                                  Traceback (most recent call last)
/<DJANGOPATH>/django/core/management/commands/shell.pyc in <module>()
----> 1 M2Crypto.EVP.load_key('private-key-2048.pem', 'r')

/var/www/.../lib/python2.6/site-packages/M2Crypto-0.21.1-py2.6-linux-x86_64.egg/M2Crypto/EVP.py in load_key(file, callback)
    364     bio = m2.bio_new_file(file, 'r')
    365     if bio is None:
--> 366         raise BIO.BIOError(Err.get_error())
    367     cptr = m2.pkey_read_pem(bio, callback)
    368     m2.bio_free(bio)

BIOError: 47625728188304:error:0200100E:system library:fopen:Bad address:bss_file.c:122:fopen('','r')
47625728188304:error:2006D002:BIO routines:BIO_new_file:system lib:bss_file.c:127: 
```

更新：

```
-rw-rw-r-- 1 user group 1675 Feb 13 08:27 private-key-2048.pem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:03:00.190

```
 364     bio = m2.bio_new_file(file, 'r')
    365     if bio is None:
--> 366         raise BIO.BIOError(Err.get_error()) 
```

如果传递的文件名/对象无法打开，bio_new_file 方法将返回 None。

我会检查“private-key-2048.pem”是否确实存在于预期的路径中，并检查其读取权限。

# c++ - 带有不需要的字符的 C++ 数据文件：如何删除流氓字符并计算平均值、标准差和标准误差

> ID：14855078
> 
> 赞同：0
> 
> 时间：2013-02-13T13:49:32.463
> 
> 标签：c++

我有一个包含 49 个数字 + 1 个单词的数据文件和另一个包含 50 个数字的文件。我的任务是计算两者的平均值、标准差和标准误差。目前我有一个代码，可以很高兴地为只包含数字的文件计算正确的值。如何删除字符？

我是初学者，不确定如何正确使用 getline() 函数将文件中的数据放入字符串中，然后以某种方式使用 cin.ignore() 和 cin.clear() 删除字符？帮助将不胜感激！

程序：

```
// Assignment 2: Milikan data programme
#include "stdafx.h"
#include<iostream>
#include<iomanip>
#include<fstream>
#include<cmath>
#include<string>

using namespace std;
//Mean function
double mean(double *mydata, double N)
{ 
    double sum(0), m;
    for (int i=0; i<N; i++)
    {
        sum += mydata[i];
    }
    m = (sum/(double)N);
    return(m);
}
//Standard deviation function
double standard_dev(double *mydata, double m, int N)
{
    double *mydata2 = new double[N];
    for (int i=0; i<N; i++)
    {
        mydata2[i] = pow((mydata[i]-m), 2);
    }
    double sum(0), S, X;
    for (int i=0; i<N; i++)
    {
        sum += mydata2[i];
    }
    X = sum/(N-1);
    S = sqrt(X);
    return (S);
}

int main ()
{
    int N(0);
    char filename[100];
    double m, sterr, stdev;
    string temp;

    cout<<"Please enter the number of data points:  ";
    cin>> N;
    cout<<"Please enter the name of the file:  ";
    cin>>filename;

    //Dynamic memory allocation for N data points in array mydata
    double *mydata;
    mydata = new double[N];

    //Open file and attach chosen file to myfile
    ifstream myfile;
    myfile.open(filename);

    //Check it opened sucessfully 
    if(!myfile.is_open())
    {
        cerr<<"\nError: file could not be opened!"<<endl;
        system("PAUSE");
        return(1);
    }

    //Detect and ignore rogue character???

    //Read data from the file into an array
    for (int i=0; i<N; i++)
    {
        myfile>>mydata[i];          
    }

    m = mean(mydata, N);                                                                   
    stdev = standard_dev(mydata, m, N); 
    sterr = 1/stdev;

    cout<<"\nThe mean charge of an electron is  : "<<m<<" eV"<<endl; /
    cout<<"The standard deviation of results is : "<<stdev<<endl;
    cout<<"The standard error of results is : "<<sterr<<endl;

    myfile.close();     //Close file
    delete[] mydata;    // Free memory
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:54:42.743

还要记住，`failbit`如果数字提取失败，则流对象将被设置。你可以检查一下，如果设置了，你会跳过流中的所有非数字字符，直到你再次看到一个数字。

像这样的伪代码：

```
while (myfile)
{
    myfile >> value;

    if (myfile.fail())
    {
        clear_failbit();

        while (next_character_is_not_digit())
            get_and_discard_next_character();
    }
} 
```

当然，更好的解决方案可能是*不*生成包含错误的文件。

# web-applications - AngularJS 中延迟加载数据的指令

> ID：14855083
> 
> 赞同：1
> 
> 时间：2013-02-13T13:49:45.283
> 
> 标签：web-applications, angularjs, responsive-design, lazy-loading, angularjs-directive

我目前正在学习 Angular 并试图找出一个用于延迟加载数据和结构化代码的好模式。

我正在制作一个响应式 Web 应用程序，并且我希望能够定义网页的某些部分将从视图中隐藏（最好使用媒体查询）。

为隐藏指令或视图获取的数据是多余的。

从桌面到移动视图的差异可能很大，我希望应用程序在移动性能方面和网络使用方面尽可能轻。

**有什么好的方法可以制作一个可以谴责这个问题的良好架构？**

如果指令可以检查它当前是否可见（在当前视口中，例如不在隐藏的父级或`display: none`.

我已经提供了这样一个指令的示例用法，但我想要一些关于如何实现它的指针。

该指令可以采用一个指向回调函数的表达式，当组件可见并且在视口的 200 像素内时应该触发该回调函数。

注意：以下是一个虚构的例子，没有好的用例。

```
<!-- Check if the device has some feature, for example touch, and hide content based on results -->
<div ng-show="current.device.touch">
    <users lazyload="{userList: dataservice.getUsers | filter:search}" treshold="200px" placeholder="emptyUserlist">
    </users>
</div> 
```

这是一个好/坏的主意？

*dataservice 是一个更抽象的服务，它从 $resource 和缓存容器中获取数据。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T03:54:25.757

Angular 不支持延迟加载作为一项功能，但任何东西仍然可以延迟加载！

**关键在`config`函数中：**

```
var providers = {};

var app = angular.module('myApp', []);
app.config(function(
  $controllerProvider,
  $compileProvider,
  $routeProvider,
  $filterProvider,
  $provide
) {
  providers.controllerProvider = $controllerProvider;
  providers.compileProvider    = $compileProvider;
  providers.routeProvider      = $routeProvider;
  providers.filterProvider     = $filterProvider;
  providers.provide            = $provide;
}); 
```

现在您可以使用缓存的提供程序来延迟加载（注册）Angular 特性。

**延迟加载控制器：**

```
function myCtrl($scope) {
 //etc
}
providers.controllerProvider.register('myCtrl', myCtrl); 
```

**延迟加载指令：**

```
function myDirectiveName() {
  //etc
}
providers.compileProvider.directive('myDirectiveName', myDirectiveName); 
```

**有关更实用和更高级的示例，[请参阅我在这篇文章中的回答（单击）。](https://stackoverflow.com/questions/20410447/lazy-loading-angular-views-and-controllers-on-page-scroll/20413928#20413928)我在向下滚动页面时从外部文件延迟加载视图及其控制器。**

**简单演示：**

[现场演示（点击）](http://jsbin.com/UJEJeYId/1/edit)

```
<div lazy></div> 
```

角度逻辑：

```
var providers = {};

var app = angular.module('myApp', []);
app.config(function(
  $controllerProvider,
  $compileProvider,
  $routeProvider,
  $filterProvider,
  $provide
) {
  providers.controllerProvider = $controllerProvider;
  providers.compileProvider    = $compileProvider;
  providers.routeProvider      = $routeProvider;
  providers.filterProvider     = $filterProvider;
  providers.provide            = $provide;
});

app.directive('lazy', function() {
  return {
    restrict: 'A',
    compile: function(element, attrs) {
      providers.controllerProvider.register('myCtrl', myCtrl);
      providers.compileProvider.directive('myDirectiveName', myDirectiveName);
      var span = angular.element('<span></span>')
        .attr('my-directive-name', '')
        .attr('ng-controller', 'myCtrl');
      element.append(span);
    }
  };
});

function myDirectiveName() {
  return {
    restrict: 'A',
    compile: function(element, attrs) {
      var str = 'This text came from a lazy-loaded directive {{anotherString}}';
      element.text(str);

    }
  };
}
function myCtrl($scope) {
  $scope.anotherString = 'and this text came from a lazy-loaded controller!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:38:43.017

Angular 目前不具备延迟加载的能力。然而，Misko（Angular 的创建者）在最近的聚会中提到延迟加载在不久的将来的产品路线图上：

[http://www.youtube.com/watch?v=Dro-hLSQhoc](http://www.youtube.com/watch?v=Dro-hLSQhoc)

# jquery - 检查是否使用 jQuery AJAX 调用从 Safari 安装了 App

> ID：14855084
> 
> 赞同：1
> 
> 时间：2013-02-13T13:49:47.367
> 
> 标签：jquery, ios, safari, custom-url

我想使用 jQuery 进行 AJAX 调用来检查我的应用程序的自定义模式是否可用（换句话说，它是否可以打开）。重点是我不想像其他帖子建议的那样使用超时，如果浏览器找不到我的 url 架构，我不想显示任何警报。所以基本上当我按下按钮/链接时，我想进行这个 AJAX 调用，如果失败，我想将用户重定向到 iTunes。我会自己尝试这个，但我想看看你们中是否有人想过尝试过这个。

谢谢你。

# c++ - 禁止非常量静态成员的类内初始化

> ID：14855092
> 
> 赞同：2
> 
> 时间：2013-02-13T13:50:11.493
> 
> 标签：c++

我是 Java 开发人员，我是 C++ 新手。试试下面的代码，它会显示非常量静态成员错误的初始化。

```
class omtFirst {
int a = 8,b = 2;
public:
void printThis(string);
int addNumber(){        
    return (a+b);
};
}; 
```

在网上搜索后，我发现我们无法在类描述中初始化变量。但在 Java 中这是可能的。为什么在 C++ 中我们不能在类描述中初始化变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:53:02.093

因为标准是这样说的，编译器有义务效仿。没有技术原因；事实上，在 C++11 中[可以](https://stackoverflow.com/questions/6482566/has-in-class-member-initialization-feature-made-into-c11)做到这一点。

# javascript - 使用 Javascript 根据条件隐藏 html 跨度

> ID：14855093
> 
> 赞同：0
> 
> 时间：2013-02-13T13:50:12.477
> 
> 标签：javascript, html, hide, conditional-statements

尝试根据条件隐藏包含文本和文本框的跨度。这会在设置值后设置每个下拉列表的值我想检查每一个，如果值不等于 10，那么我想隐藏跨度。任何帮助都会很棒。这段代码似乎隐藏了所有跨度而不是不是 10 的跨度

```
$('.existing')
    .each(function() {
        var DD1 = $(this).attr('current');
        $(this).val(DD1);
        console.log(DD1); 
```

//上面选择html下拉列表的值，下面应该检查该值并隐藏跨度，如果它不是10

```
 var parent = $(this).parent().prev();
        var tr = $(this).closest('tr');
        if ($(this).val(DD1) !== "10") {
            var hide = tr.find(".hideifnot").hide();
        }
    });

<asp:ListView runat="server" id="ListView1" >
    <LayoutTemplate>
            <thead>
                <tr>
                    <th>
                        <a href="#">Type</a>
                    </th>
                    <th>
                        <a href="#">Address</a>
                    </th>                                                                                    
                </tr>
            </thead>
            <tbody>
                <tr id="itemPlaceholder" runat="server" />
            </tbody>
            <tfoot>
            </tfoot>
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
    <td>
                   <select id="DD" current="" class="existing">
                     </select>
    </td>
            <td>
               <input type="text" id="Type" class="TypeText "  value="<%# Eval("Type")%>" />                     
              <span class="HideifNot"> Address: <input type="text" id="Addr" class="AddrText "  value="<%# Eval("Address")%>" />  </span>              
            </td>
            <td>
               <input type="button" id="btn_update" class="Update" value="Update" />
               <input type="button" id="btn_delete" class="Delete" value="Delete" />
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView> 
```

Listview 的客户端唯一包含的是将列表绑定到它：

```
 protected void Page_Load(object sender, EventArgs e)
    {
            if (!IsPostBack)
            {  
                People i = Data;
                ListView1.DataSource = i.Addresses;
                ListView1.DataBind();
            }          

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:01:07.643

您的选择缺少结束`>`。

它应该是：

`<select id="DD" current="" class="existing">`

代替：

`<select id="DD" current="" class="existing"`

**编辑：** 此外，您应该更改：

```
var hide = tr.find(".hideifnot").hide(); 
```

至：

```
var hide = tr.find(".HideifNot").hide(); 
```

# javascript - 具有隔离范围的 angular.js 指令

> ID：14855095
> 
> 赞同：2
> 
> 时间：2013-02-13T13:50:22.863
> 
> 标签：javascript, angularjs

我知道已经有很多关于这个主题的问题，但我不能让我的例子起作用。

请参阅[plnkr.co#ua32dkF7fz6X2fA0ZAw3](http://plnkr.co/edit/ua32dkF7fz6X2fA0ZAw3)中的示例。

每个预告片都有一些附加信息，当用户单击其中一个预告片时应该出现这些信息。但是，只要我单击其中一个预告片，附加信息就会出现在每个预告片下方。我只想在我点击的一个预告片下方显示它们。

我很确定会发生这种情况，因为指令共享相同的父范围。如何使`isActive`每个预告片的变量保持私有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T14:05:25.370

我会这样做：

1）html更改：

```
<teaser ng-repeat="teaser in teasers" teaser="teaser"></teaser> 
```

2) 指令变更：

```
restrict: 'E',
replace: true,
scope: {
  teaser: '='
},
controller: function ($scope) {
  $scope.isActive = false;
  $scope.select = function(teaser) {
    $scope.isActive = !$scope.isActive;
  };
} 
```

演示：http: [//jsbin.com/aqehew/1/](http://jsbin.com/aqehew/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:04:54.740

这应该这样做： http: [//plnkr.co/edit/EfB3n14Hwk5uijsrp1aR](http://plnkr.co/edit/EfB3n14Hwk5uijsrp1aR)

我所做的是为指令创建一个新范围，并将活动变量移动到指令范围。

# c++ - 由于父类受保护的构造函数，c++ 无法实例化子类？

> ID：14855096
> 
> 赞同：3
> 
> 时间：2013-02-13T13:50:23.613
> 
> 标签：c++, inheritance

这是我难以理解的代码：

```
class A 
{ 
protected: 
   int _i; 
   A () : _i(0) { } 
   ~A () { } 
}; 

class B: public A 
{ 
public: 
   A *_pa; 
   B()  : A(), _pa(new A())
   { } 

  ~B () 
   { 
      delete _pa; 
   } 
}; 

int main () 
{ 
   A a; //ERROR
   B b; //ERROR
} 
```

当试图实例化一个类型的类时，`A`我得到一个错误，因为它的构造函数受到保护。但是为什么我不能实例化一个 type 类`B`呢？该类可以访问`A`（包括ctor）的受保护成员，因此它应该编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:59:21.417

从 A 派生仅允许您访问通过“this”或通过另一个 B 访问的受保护成员。B 无权访问 _pa 的受保护成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T14:00:12.350

您的错误位于构造函数`new A`内部`B`，而不是对超级构造函数的调用。

让我解释一下如何`protected`工作。当你有一个类`B`，它的子类`A`不能访问受保护的元素时`A`，它`A`在处理`B`引用时可以访问受保护的元素。

为了表明我的观点：

```
#include <iostream>

class A {
protected:
    int a;
};

class B : public A {
public:
    void do_it(A* a) {
        std::cout << a->a << std::endl; //ERROR
    }
    void do_it(B* a) {
        std::cout << a->a << std::endl; //VALID CODE
    }
}; 
```

我猜这种行为背后的原因是，如果您有第三个类`C`也可以访问`A`受保护的成员，那么其他人更改这些受保护的值可能不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:52:52.880

**您在main**中有错误。在那里你不能实例化 A，因为它的构造函数是受保护的。

此外，您无法`_pa`在 B 的构造函数中调用构造函数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T14:39:45.533

在 的构造函数中`B`，`A`调用构造函数。由于`A`' 构造函数受到保护，在 '`A`构造函数处调用 ' 构造`B`函数会出错。同样在受保护的范围内`A`，还有析构函数。当`B`' 的析构函数被调用时，它的基类 ( `A`) 的析构函数也被调用。因为`A`的析构函数受到保护，所以还会发生另一个错误。如果从`A`' 的构造函数中取出 ' 的构造`B`函数，仍然会显示错误。`A`但是你可以在公开's 析构函数后摆脱错误。

```
public:
   ~A () { } 
```

这个推断是通过检查代码块给出的错误得出的，但似乎是错误的。删除 _pa(new A()) 是确切的解决方案。@AndréPuel 的回答更正确。

# java - 我无法加载图像

> ID：14855097
> 
> 赞同：-6
> 
> 时间：2013-02-13T13:50:24.160
> 
> 标签：java, image, embedded-resource

我在加载图像时遇到问题。在命令提示符下使用Java Run编译后运行应用程序（Run是主类），没有产生错误，它会加载图像，但是将其打包为jar文件后无法加载图像。打包类时，我将图像源与其类打包在一起。

这就是我加载图像的方式：

```
ImageIcon icon = new ImageIcon( getClass().getResource( "resources/images/button6.gif" )); 
```

包含图像的类和文件夹位于同一目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:53:21.800

JAR 中的包装是不同的。

尝试创建一个清单并向其中添加类路径条目。列出相对于图像所在的 JAR 根目录的路径，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:37:32.213

尝试：

```
ImageIcon icon = new ImageIcon( MyClass.class.getResource( "/resources/images/button6.gif" )); 
```

原因：

*   相对路径从类的包开始，但您可能希望从 Jar 的根级别开始（假设“资源”是 JAR 中的顶级目录）

[http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-17T11:30:25.103

我试图加载的图像是 gif 图像格式，其文件扩展名 gif 是大写字母 (Ie `.GIF`)。我将图像扩展名更改为小写，这解决了问题。

# joomla - 什么是 joomla 2.5 中的 assignRef() 函数

> ID：14855102
> 
> 赞同：1
> 
> 时间：2013-02-13T13:50:31.430
> 
> 标签：joomla, joomla2.5, joomla-extensions

我试图了解如何在 joomla 2.5 中开发自定义组件，并且在第一步我被卡住了，我想知道 assignRef() 函数的用途是什么，有关更多信息，[请单击此处](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/1.5/Introduction)

```
<?php
/**
 * @package    Joomla.Tutorials
 * @subpackage Components
 * @link http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1
 * @license    GNU/GPL
*/

// no direct access

defined( '_JEXEC' ) or die( 'Restricted access' );

jimport( 'joomla.application.component.view');

/**
 * HTML View class for the HelloWorld Component
 *
 * @package    HelloWorld
 */

class HelloViewHello extends JView
{
    function display($tpl = null)
    {
        $greeting = "Hello World!";
        $this->assignRef( 'greeting', $greeting );

        parent::display($tpl);
    }
} 
```

在 assignRef() 函数中，第一个参数充当变量而不是值，因为如果我将其值更改为其他值，则它无法显示 $greeting 的值：-

http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1 * @license GNU/GPL */

```
// no direct access

defined( '_JEXEC' ) or die( 'Restricted access' );

jimport( 'joomla.application.component.view');

/**
 * HTML View class for the HelloWorld Component
 *
 * @package    HelloWorld
 */

class HelloViewHello extends JView
{
    function display($tpl = null)
    {
        $greeting = "Hello World!";
        $this->assignRef( 'greeting123', $greeting );

        parent::display($tpl);
    }
} 
```

然后在 site/views/hello/tmpl/default.php 中，如果我这样写，那么它向我展示了正确的答案：-

```
<?php

// No direct access

defined('_JEXEC') or die('Restricted access'); ?>
<h1><?php echo $this->greeting123; ?></h1> 
```

那么结果将是：---- Hello world

我知道这对你来说是一个简单或幼稚的问题，但对我来说，这是我自己的发展领域新时代的开始......任何事情都会受到赞赏......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:31:40.053

`assign()`在 Joomla 1.5 中，有两个函数`assignRef()`用于将数据从视图传递到布局中。但从 Joomla 1.6 及更高版本开始，只需将数据添加到视图对象即可。因为**Joomla 1.6/2.5**至少需要**PHP 5.2**，它具有更好的内存管理，这是引入这两种方法的主要原因。这两种方法是通过引用而不是按值分配变量。**PHP4** 默认使用按值分配，而**PHP5**（使用对象时）使用按引用分配。

如果您使用的是 Joomla 最新版本，您可以通过放置

`$this->variable = $something;`

在你的`view.html.php`，它将在布局中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:27:21.800

该`assignRef()`函数将变量添加到视图。所以它可以在视图类中访问。来源：[这里](http://api.joomla.org/1.5/Joomla-Framework/Application/JView.html#assignRef)

但是，我可以建议您在[此处](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction)遵循 Joomla 2.5 的扩展创建教程，而不是您正在使用的 1.5 教程，这样您就不会使用已弃用的函数。例如，在 Joomla 2.5 中不再需要 assignRef()。模型从表中检索数据，所需要的只是

```
$this->items = $items; 
```

# jquery - 在 jquery mvc 中单击更改菜单颜色无法正常工作

> ID：14855103
> 
> 赞同：0
> 
> 时间：2013-02-13T13:50:32.210
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我正在使用以下菜单`<ul> and <li>s`

```
<ul class="menu">

                <li>@Html.ActionLink("Home", "Index", new { Controller = "Home" })</li> @*, new { @class = "active" }*@
                <li>@Html.ActionLink("About Us", "About", new { Controller = "Home" })</li>
                <li>@Html.ActionLink("Services", "Services", new { Controller = "Home" })</li>      
                <li>@Html.ActionLink("Post Job", "Create", new { Controller = "JobPosting" })</li>
                <li>@Html.ActionLink("Job Search", "Index", new { Controller = "JobPosting" })</li>
                <li>@Html.ActionLink("Contact Us", "Contact", new { Controller = "Home" })</li>
               </ul> 
```

我正在使用以下 Javascript 方法

```
function ApplySelectClassOnMenu() {    
var url = window.location.pathname;
var index = url.lastIndexOf('/');
if (index > 0) {
    url = url.substring(index);
}
$('.menu >li').each(function () {        
    var url1 = $(this).children().attr("href");
    index = url1.lastIndexOf('/');
    if (index > 0) {
        url1 = url1.substring(index);
    }
    if (url1 == url) {            
        $(this).children().addClass('active');
    }
    else {
        $(this).children().removeClass('active');
    }
}); 
```

}

并将其`document.ready`称为

```
<script type="text/javascript">
     $(document).ready(function () {
         ApplySelectClassOnMenu();
     }); 
```

**现在问题来了，菜单项的颜色确实发生了变化，但如果你

*   不要将鼠标停留在菜单项（`<li>`项目）上几秒钟
*   `<li>`如果您直接在地址栏中提供 url，请不要将鼠标拖动到该项目

颜色保持不变，没有改变

**

谁能帮我解决这个问题？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T11:44:36.557

In the end had to stick with server side method as @Martin suggested,

[applying css class to menu item at run time in mvc](https://stackoverflow.com/questions/14771121/applying-css-class-to-menu-item-at-run-time-in-mvc)

# underscore.js - 下划线模板异常

> ID：14855104
> 
> 赞同：0
> 
> 时间：2013-02-13T13:50:36.547
> 
> 标签：underscore.js

我有这个模板：

```
<tr>
    <td></td>
    <td><%= created =%></td>
    <td></td>
    <td></td>
    <td><a href="#" class="btn btn-warning btn-small"><i class="icon-edit icon-white"></i> Edit</a></td>
</tr> 
```

当我尝试通过以下方式处理它时：

```
var row = _.template(user_template, {created: "aa"}); 
```

它抛出这个异常：

```
Uncaught SyntaxError: Unexpected token ) 
```

当我删除`<%= created =%>`它可以正常返回`<tr><td>...</tr>`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:52:26.810

`<%= created =%>`应该改为`<%= created %>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:53:20.590

它是尾随 =%>

应该只是 %>

像这样 <%= created %>

# networking - ESXi - 将端口转发到虚拟机？

> ID：14855107
> 
> 赞同：0
> 
> 时间：2013-02-13T13:51:01.600
> 
> 标签：networking, routing, virtual-machine, esxi

例如，我有一个带有路由器虚拟机和实习网络的 ESXi 主机。

我可以将主机 ip 用于除 ESXi 之外的其他东西吗？

我的意思是：在虚拟机上是一个网络服务器（端口 80）。

**我可以将端口 80 从 esxi 主机路由到虚拟机端口 80 吗？**

图片： [http ://www.abload.de/image.php?img=esxinhxgi.jpg](http://www.abload.de/image.php?img=esxinhxgi.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T07:11:05.247

我需要第二个 IP 地址。然后我在子网中创建了一个路由器虚拟机，然后我可以给不同的机器不同的端口......

# python - 在 python 中导入集合

> ID：14855110
> 
> 赞同：3
> 
> 时间：2013-02-13T13:51:12.023
> 
> 标签：python, python-2.7, set

当我尝试使用集合时，它表明没有任何命名集合。

```
from sets import set

> ImportError: cannot import name set 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T13:52:25.750

您*不需要*导入[`sets`模块](http://docs.python.org/2/library/sets.html)；套装现已内置。只需使用内置[`set()`类型](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)：

```
>>> set()
set([]) 
```

您也可以使用`{1, 2, 3}`set 文字语法：

```
>>> {1, 2, 3}
set([1, 2, 3]) 
```

如果您仍然想使用较慢的`sets`模块，则`Set`使用大写调用该对象`S`：

```
>>> from sets import Set 
```

但请注意，该模块已被弃用；使用它不会在内置类型上添加任何内容。该模块已在 Python 3 中完全删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T22:03:18.890

`set`需要大写：

```
from sets import Set 
```

但是从 Python 2.7 开始，`set`是内置的，使用`sets#Set`实际上比内置的`set`.

例如，我最近评估的一个编码挑战是在 a 中查找大量小词，`dict`或者`set`运行大约需要 3 秒，`sets#Set`但使用内置`set`. 这是一个显着的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-26T07:22:30.693

使用“S”而不是 s

```
 try:
    from sets import Set
 except ImportError:
    Set = set 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-13T13:32:21.960

使用`Set`而不是`set`因为它是一个关键字。

```
from sets import Set 
```

# tcp - 两个相似的 tcpdump 过滤器之间的区别

> ID：14855115
> 
> 赞同：0
> 
> 时间：2013-02-13T13:51:27.030
> 
> 标签：tcp, udp, ip, tcpdump, packet-sniffers

我不明白[这里](http://www.wains.be/pub/networking/tcpdump_advanced_filters.txt)找到的这两个过滤器之间的区别：

```
proto[x:y] & z = z  : every bits are set to z when applying mask z to proto[x:y]
proto[x:y] = z      : p[x:y] has exactly the bits set to z 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:14:05.443

使用该语法，您可以按位过滤数据包。

例如，考虑 IP 帧的前两个字节。

```
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version|  IHL  |Type of Service|          Total Length         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
```

假设您只想过滤版本等于 4 的 ip 数据包（表示 IPv4 数据包）。

你可以做这样的事情

```
tcpdump -i ethX 'ip[0:1] & 0xf0 = 0x40' 
```

*   **ip[0:1]**表示“从 IP 帧的偏移量零中提取 1 个字节”
*   **& 0xf0**过滤掉第一个字节的 IHL 位
*   **= 0x40**仅当版本位包含数字 4 时才会匹配

等等，您构建了一个自定义过滤器，深入挖掘捕获的帧。

在你列出的两种情况下，我想有一个错字。

我认为应该是：

```
proto[x:y] & z = n   : every bits are set to n when applying mask z to proto[x:y]
proto[x:y] = n       : p[x:y] has exactly the bits set to n 
```

# windows - 在 ubuntu 服务器上使用 git

> ID：14855116
> 
> 赞同：0
> 
> 时间：2013-02-13T13:51:29.760
> 
> 标签：windows, macos, git, ubuntu

我有一个小型机器网络（2 个 Windows、2 个 Mac、1 个 ubuntu 服务器和 1 个 Fedora）。我想知道是否有任何一次可以帮助我设置 git，以便我可以在本地和远程推送和拉取文件。但是我不想使用 github。

所以理想情况下，我希望在我的 ubuntu 服务器上安装 git，然后能够从我的其他机器上拉取和推送。

到目前为止，我已经设法在我的 ubuntu 服务器上安装了 git。初始化一个文件夹并在所述文件夹中添加/提交文件。我不太确定如何让我的其他机器拉动并推送到这台服务器。

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:55:15.780

如果要推送，则应使用裸存储库。在 Ubuntu 服务器上，从您的主目录执行：

```
git init --bare myrepo.git 
```

然后在其他服务器上，只需：

```
git clone username@my-ubuntu-server:myrepo.git 
```

然后拉和推应该就可以了。`my-ubuntu-server`如果您没有设置 DNS ，请使用 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:04:02.203

您可以按照 Robie Basak 描述的方式进行操作。如果你想有更细粒度的控制，你可以安装这个[`gitolite`](http://packages.ubuntu.com/gitolite)包。请参阅[此处](http://blog.countableset.ch/2012/04/29/ubuntu-12-dot-04-installing-gitolite-and-gitweb/)，了解分步介绍。您可能还想查看*非常*广泛的[文档](http://sitaramc.github.com/gitolite/master-toc.html)。如果您还想进行错误跟踪、代码审查、wiki 和拉取请求，请查看[gitlab](http://gitlab.org/)。

# opencv - 我们如何区分具有相同直方图的图像？

> ID：14855117
> 
> 赞同：0
> 
> 时间：2013-02-13T13:51:33.100
> 
> 标签：opencv, image-processing, histogram

我使用 OpenCV 计算了一系列图像的直方图，但在某些时候，即使图像具有不同的外观，它们的直方图也是相同的，因此熵和直方图的差异也是相同的。

在这里如何区分这些图像？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:47:46.300

如果输入图像是灰度的，那么只有 1 个通道，现在大多数图像都是彩色的。如果文件是灰度文件，则只有 1 个通道。

这里有一些很容易尝试的东西。对于灰度，您可以对每一行像素进行平均以获得单个灰度值，然后生成行平均值的直方图，同时对每列值进行平均并制作直方图。

过度简化结果。如果你有 3 个文件，

一种左半黑右半白的。

一种顶部为黑色，底部为白色的

一个有黑白方格的棋盘。

标准直方图将显示 50% 的黑色像素和 50% 的白色像素。

水平直方图将显示左/右和棋盘具有全部 50% 灰色，而顶部/bot 将具有 50% 黑色和 50% 白色

垂直直方图将显示顶部/bot 和棋盘具有全部 50% 灰色，而左/右将显示 50% 黑色和 50% 白色。

因此，虽然所有 3 个文件都具有相同的基本直方图，但它们在水平直方图上是唯一的。

水平直方图是低分辨率的，因为它们是平均值，所以您仍然需要完整的直方图进行主要识别。

当然，除了水平和垂直之外，您还可以得出其他平均值。

# c++ - 如何在 C++ 中获得具有给定位模式（如 int32_t）的浮点数？

> ID：14855119
> 
> 赞同：4
> 
> 时间：2013-02-13T13:51:43.197
> 
> 标签：c++, c++11, type-conversion

我需要一种快速的方法来获得`float`具有给定位模式的 （提供为`int32_t`）。当然，编译器应该优化整个构造。简单的转换会进行强制转换并且`reinterpret_cast<>`不允许...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T14:11:45.667

编译器会优化它是不可靠的，但它避免了 UB，前提是提供的值确实是浮点数的表示（也就是说，它的大小正确，并且它的位模式不包含 的陷阱表示`float`）。GCC 至少有时能够将其优化掉：

```
float convert(int32_t inputvalue) {
    float f;
    std::memcpy(&f, &inputvalue, sizeof(f));
    return f;
} 
```

如果优化是问题的重要部分，那么官方的回答是无法保证未知编译器会进行给定的优化。但是这个比大多数更难优化。它依赖于编译器“理解”做什么`memcpy`，这比“理解”指针转换的作用更大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:14:11.313

唯一完全可移植的方法是`memcpy`通过缓冲区：

```
static_assert(sizeof(float) == sizeof(int32_t), "!!");
char buf[sizeof(float)];
memcpy(buf, &i, sizeof(buf));
memcpy(&f, buf, sizeof(buf)); 
```

通常可以省略缓冲区：

```
static_assert(sizeof(float) == sizeof(int32_t), "!!");
memcpy(&f, &i, sizeof(float)); 
```

# syntax - 使用带 OR 的 Not Equals 运算符具有多个字段的 SOLR 查询返回错误结果

> ID：14855122
> 
> 赞同：1
> 
> 时间：2013-02-13T13:51:46.080
> 
> 标签：syntax, solr

我正在尝试使用多个查询字段（包括不等于运算符）执行 solr 查询。

示例查询：

```
field1:abc OR -field2:def 
```

问题是查询返回**AND**操作而不是**OR**的结果，就好像查询是：

```
field1:abc AND -field2.def 
```

两个查询总是返回相同的结果。获得正确 OR 结果的正确语法是什么？

我目前正在使用 solr 3.5。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:50:56.683

也许尝试以下方法：

```
field1:abc OR (*:* -field2:def) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-15T06:08:17.997

对于 field1:abc OR -field2:def 这也有效

-(-field1:abc AND field2:def) 。

# php - 如何在 Symfony2 项目中使用 Doctrine2 实现 DDD？

> ID：14855124
> 
> 赞同：4
> 
> 时间：2013-02-13T13:51:51.883
> 
> 标签：php, symfony, doctrine-orm, domain-driven-design, ddd-repositories

好吧，我正在尝试向 DDD 介绍自己，我对它很陌生，有些概念仍然不清楚。

这是我到目前为止所理解的：

*   领域基本上是关于数据的
*   持久层与域无关，但业务逻辑事务可能是。

使用 Doctrine2 时，我们使用 EntityRepository 或 CustomEntityRepository 实现。

在 DDD 中，存储库模式似乎有点不同，我查看了 .NET 和 Java 示例以及来自 DDD 邮件列表的消息，人们倾向于认为存储库应该返回 QueryObject，在 Doctrine2 中，我计划返回我的存储库中的 QueryBuilder 实例。

因此，为了隐藏使用 QueryBuilder、Query 和 Hydrated 结果集的复杂性，我实现了另一个称为 Manager 的服务层。

这是我的域的样子：

```
src/Domain/
├── Entity
│   ├── AbstractComment.php
│   ├── Comment.php
├── Manager
│   ├── CommentManager.php
└── Repository
    └── CommentRepository.php 
```

Entity 文件夹只是纯粹的 POPO。

`CommentRepository`看起来像这样：

```
<?php
namespace Acme\Domain\Repository;

use Doctrine\Common\Collections\Criteria;

class CommentRepository
{
    private $em;

    public function __construct(EntityManager $em)
    {
        $this->em = $em;
    }

    /**
     * @param $id
     *
     * @return \Doctrine\ORM\QueryBuilder
     */
    public function findOneById($id)
    {
        $qb = $this->getEntityManager()
            ->getRepository('Acme:Domain\Entity\Comment')
                ->createQueryBuilder('c');

        $criteria = new Criteria();

        $criteria->andWhere(
            $criteria->expr()->eq('c.id', ':id')
        );

        $qb->addCriteria($criteria);

        $qb->setParameter('id', $id);

        return $qb;
    }
} 
```

和`CommentManager`：

```
<?php

namespace Acme\Domain\Manager;

class CommentManager
{
    protected $repository;

    public function __construct(CommentRepository $repository)
    {
        $this->repository = $repository;
    }

    public function findOneById($id)
    {
        return $this->repository->findOneById($id)->getQuery()->getOneOrNullResult();
    }
} 
```

1.  这是管理“实体”的正确方法吗？
2.  按照这种模式，我必须在哪里处理持久性？

我的意思是，如果我是对的，存储库基本上就像一个集合，因此它应该提供`add(Entity $e)`和`remove(Entity $e)`方法，但我实际上在哪里持久化实体？

`add()`在&`remove()`方法中这样做是否安全？添加`save()`处理更新的方法会更好吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-13T12:32:12.607

我用 Symfony2 开始了一个关于 DDD 的系列，应该回答你的问题：[http](http://williamdurand.fr/2013/08/07/ddd-with-symfony2-folder-structure-and-code-first/) ://williamdurand.fr/2013/08/07/ddd-with-symfony2-folder-structure-and-code-first/ 。

> 我的意思是，如果我是对的，存储库基本上就像一个集合

是的。

> 因此它应该提供 add(Entity $e) 和 remove(Entity $e) 方法

是的。

> 但我实际上在哪里持久化实体？

在这个存储库中。但是，这可能**不是**Doctrine 存储库。Doctrine 使用实体/存储库术语，但它们在 DDD 中的含义不同。

# tfs - TFS - 恢复已删除的文件以保留“注释”功能

> ID：14855126
> 
> 赞同：1
> 
> 时间：2013-02-13T13:51:56.943
> 
> 标签：tfs

已经有一些关于[如何在 TFS 中恢复文件的](https://stackoverflow.com/a/638425/371917)链接。我不仅想还原更改，还想从 TFS 历史记录中删除一个条目。

“注释”选项将逐行显示谁更改了哪些内容。假设文件被删除并再次添加（而不是使用“取消删除”选项）。现在“注释”将显示整个文件已被添加的人更改。如果我使用“tf rollback”，它只会尝试回滚更改，而不是版本历史记录。

这是一个大文件，对我们的团队了解谁更改了什么非常有用。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:57:55.933

我认为唯一的方法是回滚添加和删除，然后重新对恢复的版本进行更改，这*应该*可以。

在步骤：

*   回滚添加
*   报到
*   回滚删除
*   报到
*   编辑文件，应用删除后所做的编辑。
*   报到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:51:45.223

这是不可能的。

回滚只恢复文件更改，而不是文件状态。

换句话说，如果您回滚到删除之前并签入，则“注释”将仅显示自添加后上次更改以来的更改。

# gcc - gcc 内联汇编中 %ebp 和 %esp 的字母是什么？

> ID：14855127
> 
> 赞同：4
> 
> 时间：2013-02-13T13:52:10.897
> 
> 标签：gcc, assembly, x86

gcc 内联汇编中 %esp 和 %ebp 的字母是什么？我明白那个：

```
a = eax 
b =ebx 
c = ecx 
d = edx 
S = esi 
D = edi 
I = constant value (0 to 31). 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T14:51:01.963

手册中有一个[gcc 机器约束](http://gcc.gnu.org/onlinedocs/gcc/Machine-Constraints.html#Machine-Constraints)列表（参见：*Intel 386*部分）。[在i386/constraints.md](https://gcc.gnu.org/git/?p=gcc.git;a=blob_plain;f=gcc/config/i386/constraints.md;hb=HEAD)文件 中可以找到血淋淋的细节（通常比手册更新） 。

**但是**- 有充分的理由，即堆栈一致性，`%ebp`不能`%esp`用作约束。它们不能被指定为扩展 asm 语法中的输入或输出。在某些情况下，这也可能扩展到`%ebx`- 特别是在生成与位置无关的代码时，例如，使用 (i386 SysV) ELF ABI。

当然，您仍然可以在 asm 块中显式操作这些寄存器。

# android-layout - Galaxy Tab 7 vs nexus 7 不同尺寸 res 文件夹

> ID：14855128
> 
> 赞同：2
> 
> 时间：2013-02-13T13:52:21.910
> 
> 标签：android-layout, screen

我想知道如何设置我的尺寸资源文件夹，以使我的布局在 Nexus 7 和第一代三星 Galaxy 7 英寸平板电脑上看起来不错。它们都使用 values-large res 文件夹，唯一的区别是 Nexus 7 使用 xhdpi 而 Galaxy 7 使​​用 hdpi。如何为每个设备使用单独的尺寸文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:18:07.550

为了快速修复，请在 res 中创建两个新的布局文件夹：layout-large 和 layout-large-hdpi。Galaxy 2 将使用 layout-large 中的布局，而 nexus 7 将使用 layout-large-hdpi 中的布局。但是，此方法已被弃用。正确的做法是参考[官方安卓屏幕布局指南](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts "安卓屏幕")，该指南已针对 7" 屏幕进行了更新。

# c - Raspberry PI，如何将其他 GPIO 配置为 I2C

> ID：14855133
> 
> 赞同：2
> 
> 时间：2013-02-13T13:52:32.770
> 
> 标签：c, linux, raspberry-pi, i2c

我将 Raspberry PI 用于我的一个项目。

在这个项目中，我需要两个不同的 I2C 接口同时运行。我知道如何设置 GPIO-0 和 GPIO-1 以作为 I2C 工作（到处都有教程，例如：[如何在 raspberry 中启用 I2C 的教程之一](http://www.skpang.co.uk/blog/archives/575)）。

同样在此链接[RPi Low-level peripherials](http://elinux.org/RPi_Low-level_peripherals)中，它表示任何 GPIO 都可以作为 I2C 工作。

我如何配置其他 GPIO 也可以作为 I2C 工作，这样我就可以并行使用不同的接口。（我知道我需要添加上拉电阻，但我不知道如何在 Linux shell 或 C 中配置它）。有人可以简单地向我解释这是如何完成的吗？

谢谢，阿德里安。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-03T11:30:01.963

我在wiringPi之上做了一个i2c bit banging bus interface。您可以使用任何 2 个 GPIO 引脚制作总线。它是用 C++ 编写的，但应该很容易移植到 C 中。无论如何，大多数函数都是 C。也许它需要一些润色，但至少这是一个起点。

[https://github.com/robotrovsky/rpi_i2c_bit_banging](https://github.com/robotrovsky/rpi_i2c_bit_banging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:51:51.660

如果引脚没有硬件实现的 I2C 驱动程序，则可以使用[bit-banging](http://en.wikipedia.org/wiki/Bit_banging)的概念来实现软件实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T02:28:15.040

如前所述，您可以尝试 bitbanging。如果您有焊接经验，则可以“硬件破解” pi，因为第二个 I2C 总线位于相机接口上。

看

[http://www.raspberrypi.org/wp-content/uploads/2012/10/Raspberry-Pi-R2.0-Schematics-Issue2.2_027.pdf](http://www.raspberrypi.org/wp-content/uploads/2012/10/Raspberry-Pi-R2.0-Schematics-Issue2.2_027.pdf)

第 4 页 S5

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T03:10:39.430

为什么要两条 i2c 总线？您可以在同一 i2c 总线上运行多个设备，只要它们具有不同的地址。大多数组件都允许您通过焊接两个焊盘来更改地址。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-04-15T12:37:19.357

您可以在任何 gpio 引脚上创建额外的 i2c 总线

[https://www.instructables.com/id/Raspberry-PI-Multiple-I2c-Devices/](https://www.instructables.com/id/Raspberry-PI-Multiple-I2c-Devices/)

# fxcop - Stylecop 抑制 Reference.cs 文件的错误

> ID：14855135
> 
> 赞同：1
> 
> 时间：2013-02-13T13:52:41.553
> 
> 标签：fxcop, stylecop, suppress-warnings, service-reference

我刚刚问了一个类似的[问题](https://stackoverflow.com/questions/14852103/suppress-xml-warning-for-servicereference-cs-file)`Service References`，关于从和自动生成的代码`Xml summary errors`。发布了一个答案，建议我可以将其添加`Service Reference`到自己的项目中，然后它可以完全避免`Xml`摘要警告和`Stylecop`错误。

但我意识到我可以`Xml`通过设置 to 来解决这个问题，`Service Reference`现在`Internal`我陷入了`StyleCop`错误。

我使用的是`FxCop`10.0 版。

在我项目的属性中，在代码分析选项卡中，我检查了选项

> 抑制生成代码的结果（仅限托管）

此外，通过查看 Reference.cs 文件中生成的代码，我看到代码装饰有以下属性：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")] 
```

..`Stylecop`然后应该跳过，对吗？虽然这不起作用，但我仍然收到`StyleCop`生成代码的错误。

**编辑**：以下标题也可以在生成的代码中找到：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18033
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------ 
```

那么为什么不被忽略呢？

我也发现了这个[问题](https://stackoverflow.com/questions/12405619/temporarygeneratedfile-guid-in-obj-debug-breaking-build)，并尝试在我的设置中使用以下`StyleCop`内容：

```
<CollectionProperty Name="GeneratedFileFilters">
    <Value>Reference\.cs$</Value>
 </CollectionProperty> 
```

但这也不起作用，我一直在努力使用正则表达式，但尝试将以下值添加到上面的示例中，以让 Stylecop 忽略我生成的代码。

```
Reference.cs
\Reference\.cs
\Reference\.cs$
Reference\.cs$ 
```

有谁知道如何抑制文件`Stylecop`的所有错误`Reference.cs`？

**Edit2**：为 Reference.cs 文件显示的错误：

> 错误 1 ​​CA1812 : Microsoft.Performance : ... 是一个显然从未实例化的内部类。如果是这样，请从程序集中删除代码。如果此类仅包含静态方法，请考虑添加私有构造函数以防止编译器生成默认构造函数。
> 
> 错误 2 CA2239：Microsoft.Usage：添加“private void OnDeserialized(StreamingContext)”方法来键入...并使用 System.Runtime.Serialization.OnDeserializedAttribute 对其进行属性。
> 
> 错误 4 CA1811 : Microsoft.Performance : ... 似乎没有上游公共或受保护的调用者。

我有这 3 种错误中的 27 种。

**编辑 3：**我有 Style/Fx 警察设置可以在构建时运行。我`CODE_ANALYSIS`在构建选项卡中添加了条件编译符号和

```
"$(ProgramFiles)\Microsoft FxCop 10.0\FxCopCmd.exe" /file:"$(TargetPath)" /ruleid:-"Microsoft.Design#CA1006" /ruleid:-"Microsoft.Design#CA1020" /console /cul:en-GB /q /assemblyCompareMode:StrongNameIgnoringVersion 
```

...在`Post-build event command line`选项`Build Events`卡中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T15:36:30.590

CAxxxx 错误来自 FxCop，而不是 StyleCop。如果它们出现在生成的代码中，并且您想保留生成的代码而不更改生成器，只需添加项目级排除项（例如：在 GlobalSuppressions.cs 中）。

*以下问题编辑#3：* 由于您正在“手动”运行 fxcopcmd.exe，因此根本不会使用您的 C# 项目设置来忽略生成的代码。您需要将`/ignoregeneratedcode`开关添加到 fxcopcmd.exe 命令行才能应用此开关。

# mysql - 我正在尝试将 MYSQL SELECT 与多对多关系表一起使用？

> ID：14855141
> 
> 赞同：0
> 
> 时间：2013-02-13T13:52:53.970
> 
> 标签：mysql, sql, join

我有三张桌子：

学生，模块和学生模块（这是一个链接表）。我正在尝试做的 id 选择与特定学生关联的模块。我知道这是错误的，但我想做的是这样的：

```
SELECT id, name 
FROM modules 
WHERE id = (SELECT moduleID FROM students_modules WHERE studentID = '123') 
```

所以任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:54:38.740

用于`JOIN`将三个表相互链接：

```
SELECT 
  s.StudentName,
  m.Id,
  m.Name AS ModuleName
FROM modules                AS m
INNER JOIN students_modules AS sm ON m.id         = sm.moduleID
INNER JOIN students         AS  s ON sm.studentID = s.id
WHERE WHERE ms.studentID = '123'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:55:22.080

尝试 IN 而不是 = 您的子查询：

```
SELECT id, name 
FROM modules     
WHERE id IN (SELECT moduleID FROM students_modules WHERE studentID = '123') 
```

# windows-phone-8 - 使用 Data Writer Stream Sockets 显示完整的响应流，Windows phone 8

> ID：14855142
> 
> 赞同：0
> 
> 时间：2013-02-13T13:52:56.623
> 
> 标签：windows-phone-8

我正在客户端处理windows phone 8的winRT流套接字。我的代码是

```
 var streamScoket = new StreamSocket();
        await streamScoket.ConnectAsync(new HostName(txtServer.Text), portNumber.ToString(), SocketProtectionLevel.PlainSocket);

        DataWriter dw = new DataWriter(streamScoket.OutputStream);

        dw.WriteString("Hello");

        await dw.StoreAsync();

        DataReader reader = new DataReader(streamScoket.InputStream);

        reader.InputStreamOptions = InputStreamOptions.Partial;

        await reader.LoadAsync(4);

        string data = string.Empty;

        while (reader.UnconsumedBufferLength > 0)
        {
            data += reader.ReadString(reader.UnconsumedBufferLength);
        }

        txtConnections.Text = data;
        } 
```

在服务器端，当我传递“你好”时，我正在发送此文本的“很好，您正在接收来自服务器的消息”的响应。但是在我的“txtconnections”文本框中，只显示“Good”文本，因为我知道我已经在“LoadAsync”中传递了“4”。如果我将“4”增加到更多值，我可以显示所有内容。但是当 Tcp 对数据流进行操作时，我们如何知道响应流结束，或者如果“loadasync”中有“4”，我们将如何继续循环。有人可以帮我找到解决方案并简要解释一下..这里“UnconsumedBufferLength”包含“4”，从下一个开始它是“0”...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:05:56.850

一旦你有一个 StreamSocket 开放通信默认是非结构化的。这意味着，您发送和接收字节流，作为开发人员，您需要理解它们。如果你想传输一个随机长度的字符串，那就去吧，但你必须构造蓝牙 StreamSocket 来期待这些。这种结构可能看起来像*|1 字节表示版本号|1 字节表示自由文本传输开始|4 字节表示以字节为单位传输字符串大小的 int32|自由文本以指定长度的字节为单位|4 字节表示字符串 MD5/ SHA1 哈希来验证文件的内容|* . 协议的外观完全取决于您，但请记住您必须发送和接收字节。

诺基亚有[一个端到端的示例](http://projects.developer.nokia.com/nfctalk)，它可以启动 NFC 轻按和共享、打开 StreamSocket 并通过该套接字传输结构化消息。它将向您展示如何使用 NFC、升级到 WiFi/蓝牙以及使用真实版本的结构化消息格式。[在此处](http://projects.developer.nokia.com/nfctalk)和此处查看诺基亚的 NFC Talk 项目[，了解有趣的部分](http://projects.developer.nokia.com/nfctalk/browser/NFCTalk/Communication.cs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:24:42.570

由于 TCP 对数据流进行操作，因此数据流本身必须告诉您响应何时完成。这通常使用长度前缀或分隔符来完成。[我有一篇博客文章描述了这些不同的方法。](http://blog.stephencleary.com/2009/04/message-framing.html)

`DataReader`不是 TCP的一部分；它是一个通用的流阅读器和解释器。它实际上只是`BitConverter`使用了（很多）更好的 API。它只会从流中读取，无论您告诉它多少字节。您的代码已将`LoadAsync`流中的四个字节加载到阅读器中，但再也没有加载，因此您得到一个四字节字符串而没有其他内容是完全合理的。

如果可以，请将协议更改为使用长度前缀。然后使用它非常简单地`DataReader`首先读取长度然后读取消息。如果无法更改协议，或者如果您使用分隔符，那么您需要读取[部分数据块，](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.datareader.inputstreamoptions.aspx)直到您可以检测到消息的结尾，然后保存所有通过的剩余数据以继续下一条消息的开头。

# sql-server - 拆分和复制表

> ID：14855143
> 
> 赞同：1
> 
> 时间：2013-02-13T13:52:56.490
> 
> 标签：sql-server, select, insert, copy

您好，以下是问题；让我知道是否有任何方法可以解决它...

问题：需要将表 T1 复制到另一个表 T2。但是 T1.Col2 应该在复制时拆分为 T2.Col2 和 T3.Col3。

这是我使用的查询；

```
Insert INTO T2 (Col1,Col2)
SELECT Col1, 
    substring(
        CAST(Col2 AS varchar(30)), 
        1, 
        patindex('% %', CAST(Col2 AS varchar(30)))-1
    ), 
    substring(
        CAST(Col2 AS varchar(30)), 
        patindex('% %', Len(CAST(Col2 AS varchar(30))))+1,
        Len(Col2)
    )

from T1 
```

我收到以下错误：

> 从字符串转换日期和/或时间时转换失败。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:58:05.420

您在选择时缺少 2 个关闭括号，并且您在插入时缺少第三列名称。

```
Insert INTO T2 (Col1,Col2,Col3)
SELECT Col1, 
    substring(CAST(Col2 AS varchar(30)), 1, patindex('% %', CAST(Col2 AS varchar(30)))-1), 
    substring(CAST(Col2 AS varchar(30)), patindex('% %', Len(CAST(Col2 AS varchar(30))))
from T1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:58:27.353

正如我现在缩进的那样，您在第二部分缺少带有 patindex 语句的括号（因为您添加了一个`len(`可能：

```
 1          2    3               4  432...
patindex('% %', Len(CAST(Col2 AS varchar(30))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:00:49.700

你能试试这个，让我们知道它是否有效

```
Insert INTO T2 (Col1,Col2, Col3)
SELECT Col1, 
substring(CAST(Col2 AS varchar(30)), 1, patindex('% %', CAST(Col2 AS varchar(30)))-1), 
substring(CAST(Col2 AS varchar(30)), patindex('% %', Len(CAST(Col2 AS varchar(30)))))
from T1 
```

您似乎缺少其中一列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T06:10:10.413

这是答案，

```
INSERT INTO T2 
           (T2COL1
           ,T2COL2 
           ,T2COL3) 
SELECT T1COL1 
      ,Convert(date, CONVERT(nvarchar(20), T1COL2, 101)) 
      ,convert(time(7), CONVERT(nvarchar(20), T1COL2, 108)) 
FROM T1 
```

我们可以在处理日期和时间时使用转换代码来简化工作。我参考了以下链接；

[http://www.blackwasp.co.uk/SQLDateTimeFormats.aspx](http://www.blackwasp.co.uk/SQLDateTimeFormats.aspx)

谢谢大家。:)

# backbone.js - 集合 fetch() 参数如何在 laravel 中读取

> ID：14855149
> 
> 赞同：1
> 
> 时间：2013-02-13T13:53:17.683
> 
> 标签：backbone.js, laravel, laravel-4

我想用参数获取集合，所以我只是这样做：

```
 var collection = new App.Collections.Tasks
 collection.fetch({'title':'foo bar') 
```

现在我如何才能读取 laravel 中的参数？我使用 php artisan 创建了 taskController 并获得了标准：

```
 <?php

 class TasksController extends BaseController {

public function index()
{
    return Task::all();
}

    public function create()
{

}

public function store()
{
}

public function show($id)
{

}

public function edit($id)
{
    //
}

public function update($id)
{

}

public function destroy($id)
{

}

  } 
```

在我的路由器中，我有：

```
 Route::resource('tasks','TasksController'); 
```

现在，当我打开 localhost/tasks 时，我得到了所有任务。但是我如何以及在哪里可以获得 collection.fetch() 的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:38:57.520

在骨干应用程序中，您必须这样做（注意数据参数）：

```
 collection.fetch({ data: {sortby: "random"}}); 
```

在 Laravel 路由或控制器中，您只需将其作为输入：

```
$sortby = Input::get('sortby');
echo $sortby; 
```

应显示“随机”。

# c++ - 可能的编译器错误，本地结构从模板参数访问函数中的静态变量（phew）

> ID：14855156
> 
> 赞同：3
> 
> 时间：2013-02-13T13:53:31.913
> 
> 标签：c++, visual-studio

如果标记的行被注释掉，有人可以解释为什么以下代码在 Visual Studio C++ 2008/2010 上不起作用？是编译器错误还是我做错了什么？该代码应输出 10 个 U 的序列，但删除该行后它什么也不输出。在 FilledArray 构造函数中，变量 chr 变为 0。谢谢！

```
// returns a c-string which contains the char repeated a certain number of times
template<char THE_CHAR>
const char *RepeatChar(unsigned int uiNumber)
{
      // must be static so can be accessed by struct
      static const unsigned int uiMaxSize = 1024;
      static const char chr = THE_CHAR;
      char temp = chr; // comment out this line and it doesn't work

      assert(uiMaxSize > 0);
      assert(uiNumber <= uiMaxSize);

      static const struct FilledArray
      {
            char data[uiMaxSize + 1];

            FilledArray()
            {
                  // fill all but last with the char (space for terminator)
                  fill(data, data + uiMaxSize, chr);
                  data[uiMaxSize] = '\0';
            }

      } sFilledArray;

      // clever bit
      return sFilledArray.data + uiMaxSize - uiNumber;
}

int main()
{
      cout << RepeatChar<'U'>(10) << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:44:31.097

看起来像一个编译器错误。我将代码更改为以下内容：

```
#include <iostream>
#include <assert.h>
using namespace std;

// returns a c-string which contains the char repeated a certain number of times
template<char THE_CHAR>
const char *RepeatChar(unsigned int uiNumber)
{
      // must be static so can be accessed by struct
      static const unsigned int uiMaxSize = 1024;
      static const char chr = THE_CHAR;
//      char temp = chr; // comment out this line and it doesn't work

      static const struct FilledArray
      {
            char data[uiMaxSize + 1];

            FilledArray()
            {
              cout << "[" << chr << "]" << endl;
                  fill(data, data + uiMaxSize, chr);
                  data[uiMaxSize] = '\0';
            }

      } sFilledArray;

      return sFilledArray.data + uiMaxSize - uiNumber;
}

int main()
{
      cout << RepeatChar<'U'>(10) << endl;
} 
```

然后拆解问题区域，即：

```
cout << "[" << chr << "]" << endl;
fill(data, data + uiMaxSize, chr);
data[uiMaxSize] = '\0'; 
```

和：

```
 cout << "[" << chr << "]" << endl;
00FA3273  push        offset std::endl (0F9E730h)  
00FA3278  push        offset string "]" (0FFE3C0h)  
00FA327D  push        55h  
00FA327F  push        offset string "[" (0FFE3BCh)  
00FA3284  push        offset std::cout (1011F80h)  
00FA3289  call        std::operator<<<std::char_traits<char> > (0F9EF91h)  
00FA328E  add         esp,8  
00FA3291  push        eax  
00FA3292  call        std::operator<<<std::char_traits<char> > (0F9FA3Bh)  
00FA3297  add         esp,8  
00FA329A  push        eax  
00FA329B  call        std::operator<<<std::char_traits<char> > (0F9EF91h)  
00FA32A0  add         esp,8  
00FA32A3  mov         ecx,eax  
00FA32A5  call        std::basic_ostream<char,std::char_traits<char> >::operator<< (0F9EFD2h)  
                  fill(data, data + uiMaxSize, chr);
00FA32AA  push        offset `RepeatChar<85>'::`2'::chr (0FFE3BAh)  
00FA32AF  mov         eax,dword ptr [this]  
00FA32B2  add         eax,400h  
00FA32B7  push        eax  
00FA32B8  mov         ecx,dword ptr [this]  
00FA32BB  push        ecx  
00FA32BC  call        std::fill<char *,char> (0F9E839h)  
00FA32C1  add         esp,0Ch  
                  data[uiMaxSize] = '\0';
00FA32C4  mov         eax,dword ptr [this]  
00FA32C7  mov         byte ptr [eax+400h],0 
```

请注意，当 cout << 使用时，它会显式替换字符 (55h) 来代替*chr*：

```
00FA327D  push        55h 
```

但是，在填充中用作参数时，它使用*偏移量`RepeatChar<85>'::`2'::chr (0FFE3BAh)*，如下所示：

```
00FA32AA  push        offset `RepeatChar<85>'::`2'::chr (0FFE3BAh) 
```

但是内存位置 0FFE3BAh 包含一个 0。但是如果 chr 在其他地方使用，那么它会在该位置填充 55h。

看起来生成静态部分的代码认为它已经完全优化了*chr*，但实际上并没有。

不幸的是，我们没有 VC++ 的源代码，所以在微软修复它之前这仍然是一个谜。

编辑：

相同的代码不能在 g++ 4.4.5 中编译。好吧，它实际上编译得很好，但生成的代码依赖于它似乎遗漏的外部代码，这导致链接器出错。使用 g++ 编译时出现以下错误代码：

```
/tmp/cccGJmv9.o: In function `char const* RepeatChar<(char)85>(unsigned int)::FilledArray::FilledArray()':
b1.cpp:(.text+0x56): undefined reference to `chr'
b1.cpp:(.text+0xa5): undefined reference to `uiMaxSize'
b1.cpp:(.text+0xb2): undefined reference to `chr'
b1.cpp:(.text+0xc1): undefined reference to `uiMaxSize'
collect2: ld returned 1 exit status 
```

这与它似乎认为它优化了静态 const 变量的诊断一致，但实际上并没有。

# html - CSS将多个列表项向右和向上移动

> ID：14855157
> 
> 赞同：2
> 
> 时间：2013-02-13T13:53:36.813
> 
> 标签：html, css

我的页面上有一个垂直列中的项目列表（形状明智而不是 HTML5 列），我希望一个或多个项目向右移动并基本上退出集合并一直移动回顶部内联。

就像是

```
<ul>
  <li>
  <li>
  <li>
<ul> 
```

会去

```
<ul>      <li>
  <li>
  <li>
<ul> 
```

我知道这可以通过绝对位置完成，但它应该以动态方式完成，这样项目将被渲染然后移动，所以我想知道 CSS 领域是否有任何技巧可以做到这一点可能的。抱歉，对这种情况的程度了解有限。可以在 IE7 中运行的纯 javascript（不是 jquery 或其他 lib）解决方案可能会起作用，也许只是一个对具有绝对定位的对象进行计数然后使用计数和高度来确定最高值的解决方案？

感谢您的收听，寻找，也许还有帮助！

PS [http://jsfiddle.net/Mutmatt/LpXn5/1/](http://jsfiddle.net/Mutmatt/LpXn5/1/)或[http://jsfiddle.net/Mutmatt/LpXn5/4/](http://jsfiddle.net/Mutmatt/LpXn5/4/)取决于你是否喜欢 div 或列表（我不在乎你是否可以让它工作一种或另一种方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:00:21.533

您已经为列表项指定了固定宽度，因此可以使用以下方法轻松生成：

```
#list li:first-child {
    position: absolute;
    left: 200px;
    top: 0
} 
```

既然你有一个固定的宽度，我不明白你所说的动态是什么意思？无论如何，这是一个[**jsFiddle 演示**](http://jsfiddle.net/LpXn5/23/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:03:29.457

我同意 BenM 的回答，但如果你想把它移到右边，也许你应该试试这个：

```
#list li:first-child {
    position: absolute;
    right: 0;
} 
```

[http://jsfiddle.net/Pf9eQ/](http://jsfiddle.net/Pf9eQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:04:00.097

您可以尝试使用[`float:right`](https://developer.mozilla.org/en-US/docs/CSS/float)第一个列表项，以及`float`左侧的其他列表项。

```
#list {
    display: block;
    width: 500px;
    height: 1000px;
    float: left;
}

#list li:first-child {
    float: right;
} 
```

[JS 小提琴示例](http://jsfiddle.net/LpXn5/15/)

# mysql - 相当于这个 MySQL 查询的 Active Record - CodeIgniter

> ID：14855159
> 
> 赞同：0
> 
> 时间：2013-02-13T13:53:42.500
> 
> 标签：mysql, codeigniter, activerecord

我只是想要一些帮助，弄清楚如何将来自多选框的数据插入到变量中，然后再放入数据库中。

我的数据库表的结构如下 - 表：`prd_attr`

```
ID | Product_ID | name | value
-------------------------------
1  | 3          | size | large
2  | 3          | size | medium 
```

假设我有一个名为 的多选框，`sizes[]`管理员为产品选择 2 种尺寸以输入数据库。我可以在控制器中获取这些值并将它们放入变量中：

```
$sizes = $_GET['sizes']; 
```

并将该变量传递给模型。一旦它在那里，我可以将数据作为 MySQL 查询插入，如下所示：

```
foreach ($sizes as $s)
{
    $query = mysql_query("insert into prd_attr ('name', 'value') VALUES ('size','$s')");
} 
```

但是我了解到 mysql_* 已被弃用，并且由于我使用的是提供 Active Records 的框架，因此我想利用它。我知道 Active Record 的基础知识，但由于这是一个针对可以保存任意数量值的变量的 foreach 循环，所以我不知道如何在 Active Records 中包含 foreach 语句。

有人可以解释一下吗？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:39:07.093

您还可以在 codeigniter 中使用批量插入：

尝试这个：

```
function insert_sizes()
{
    $sizes  =   $this->input->get('sizes');
    foreach ($sizes as $s)
    {
        $data[] = array(
          'name' => 'size',
          'value' => $s
        );
    }
    $this->db->insert_batch('prd_attr',$data);
} 
```

更多详情：
[http ://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:02:00.393

您可以在 Codeigniter 模型中使用它。这是一个方法

```
function insert_sizes()
{
    $sizes  =   $this->input->get('sizes');
    $data['name']   =   'size';
    foreach ($sizes as $s)
    {
        $data['value']  =   $s;
        $this->db->insert('prd_attr',$data);
    }
} 
```

# javascript - 添加ajax后jQuery不起作用

> ID：14855160
> 
> 赞同：1
> 
> 时间：2013-02-13T13:53:42.253
> 
> 标签：javascript, jquery, ajax

我有多个 javascript 文件，一切都很好（一些向元素添加样式的函数和类似的东西），但是当我尝试添加：时 `<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script>`，唯一有效的是 twitter 提要。

这就是我在 head 标签中的内容：

```
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="js.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- nivoSlider -->
    <link rel="stylesheet" href="nivoSlider/nivo-slider.css" type="text/css" media="screen">
    <script src="nivoSlider/jquery.nivo.slider.pack.js" type="text/javascript"></script>
    <!-- fancyBox -->
    <script type="text/javascript" src="fancyBox/jquery.fancybox.js?v=2.1.4"></script>
    <link rel="stylesheet" type="text/css" href="fancyBox/jquery.fancybox.css?v=2.1.4" media="screen">
    <script type="text/javascript" src="fancyBox/fancybox.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <!-- twitter -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"                                         type="text/javascript"></script>
    <script src="twitter.js" type="text/javascript"></script>
    <title>LEFT</title>
    </head> 
```

我使用[了本](http://www.queness.com/post/8567/create-a-dead-simple-twitter-feed-with-jquery)教程，所以这就是我用于 twitter 提要的所有代码。

我不知道我还应该在这里复制什么让别人理解我的问题；D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:55:21.327

好吧，看起来您要导入 jQuery 两次，一次在顶部，一次在末尾，这可能会导致一些非常讨厌的 javascript 冲突。加载一次就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:55:00.650

在其他脚本之前包含 jquery 吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T13:57:44.290

通过 Ajax 使用和添加元素后，您需要 rebimd [http://api.jquery.com/bind/](http://api.jquery.com/bind/)

原因在此处解释 [jQuery 对话框中的 jQuery 元素在 ajax 调用后停止工作](https://stackoverflow.com/questions/3783452/jquery-elements-inside-a-jquery-dialog-stop-working-after-ajax-call)

:)

# ios - 拉动刷新数据

> ID：14855170
> 
> 赞同：0
> 
> 时间：2013-02-13T13:54:22.097
> 
> 标签：ios, xcode, json, twitter, pull-to-refresh

让我的应用程序使用 ODRefreshcontrol 进行刷新动作：[https](https://github.com/Sephiroth87/ODRefreshControl) ://github.com/Sephiroth87/ODRefreshControl How to make this refresh my Table view?，下面是 .m 文件中的代码：

```
#import "ThirdViewController.h"
#import "ODRefreshControl.h"

@interface ThirdViewController ()

@end

@implementation ThirdViewController

@synthesize tableView = _tableView;

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)shouldAutorotate
{
return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskPortrait;
}

-(void)TableView:(UITableView *)TableView didFailLoadWithError:(NSError *)error {
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Can't    connect. Please check your internet Connection" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{ 
[super viewDidLoad];
ODRefreshControl *refreshControl = [[ODRefreshControl alloc] initInScrollView:self.tableView];
[refreshControl addTarget:self action:@selector(dropViewDidBeginRefreshing:) forControlEvents:UIControlEventValueChanged];

// Do any additional setup after loading the view.
[self fetchTweets];
self.tableView.dataSource = self;
self.tableView.delegate = self;
UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
[tempImageView setFrame:self.tableView.frame];

self.tableView.backgroundView = tempImageView;

}

- (void)dropViewDidBeginRefreshing:(ODRefreshControl *)refreshControl
{
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [refreshControl endRefreshing];
});
}

- (void)fetchTweets
{
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSData* data = [NSData dataWithContentsOfURL:
                    [NSURL URLWithString: @"http://search.twitter.com/search.json?q=from:user"]];

    NSError* error;

    tweets = [NSJSONSerialization JSONObjectWithData:data
                                             options:kNilOptions
                                               error:&error];

    NSLog(@"Tweets %@", tweets);

    dispatch_async(dispatch_get_main_queue(), ^{
        [self.tableView reloadData];
    });
});
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 80;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"TweetCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSArray *tweetsArray = [tweets valueForKey:@"results"];
NSDictionary *tweet = [tweetsArray objectAtIndex:indexPath.row];

NSString *text = [tweet objectForKey:@"text"];
//NSString *name = [[tweet objectForKey:@"user"] objectForKey:@"name"];

cell.textLabel.text = text;
//cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];

return cell;

}

-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {

NSLog(@"Row %d selected", indexPath.row);
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

我需要添加什么来刷新我的表格视图中的 twitter 提要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:08:40.130

刷新时需要调用**fetchTweets**方法

```
- (void)dropViewDidBeginRefreshing:(ODRefreshControl *)refreshControl
{
    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

        //ADD
        [self fetchTweets];

        [refreshControl endRefreshing];
});
} 
```

# python - 使用GDAL将数据写入GeoTiff而不创建数据数组？

> ID：14855177
> 
> 赞同：2
> 
> 时间：2013-02-13T13:54:41.040
> 
> 标签：python, numpy, gdal

是否可以使用 gdal 的 WriteArray 逐行写入数据，而不是创建并提供整个数组？

我`MemoryError`在创建一个大小为 (50539,98357) 的 numpy 数组时遇到了问题。我想我可以[通过使用 PyTables](https://stackoverflow.com/a/1062629/943773)来解决这个问题，但我不想让事情复杂化

```
>>> import numpy
>>> cols = 50539
>>> rows = 98357
>>> a1 = np.zeros((cols,rows))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'np' is not defined
>>> import numpy as np
>>> a1 = np.zeros((cols,rows))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
MemoryError 
```

**更新：** 我最终使用了 Abudis 的解决方案和一个稀疏矩阵，我在其中保存了点，将每一行作为“密集”或标准矩阵拉出。欢迎评论。

```
dataset = driver.Create(filename, cols, rows, number_of_bands, band_type)
band = dataset.GetRasterBand(1)
offset = 1 # i.e. the number of rows to write with each iteration

# values, pixel_x, and pixel_y defined earlier in my script
data = scipy.sparse.csr_matrix((values,(pixel_y,pixel_x)),dtype=float)

# iterate data writing for each row in data sparse array
for i in range(data.shape[0]):
    data_row = data[i,:].todense() # output row of sparse array as standard array
    band.WriteArray(data_row,0,offset*i)
band.SetNoDataValue(NULL_VALUE)
band.FlushCache() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:14:57.537

这里不是真正的`gdal`专家，但看起来这很有效。所以，诀窍是使用[WriteArray](http://gdal.org/python/osgeo.gdal_array-module.html)方法`yoff`的参数。这样就可以将数据分块写入文件。我们基本上只是在写入下一个数据块时设置偏移量。

```
import numpy as np
import gdal

cols = 50539
rows = 10000
offset = 1000

dst_filename = 'test.tif'
format = 'GTiff'
driver = gdal.GetDriverByName(format)

dst_ds = driver.Create(dst_filename, cols, rows, 1, gdal.GDT_Byte)

for i in range(10):
    # generate random integers from 1 to 10
    a = np.random.random_integers(1, 10, size=(offset, cols))
    # write data to band 1
    dst_ds.GetRasterBand(1).WriteArray(a, 0, offset * i)

dst_ds = None 
```

这会产生一个 50539 x 10000 像素的 tiff 文件。如果您真的需要 98357 行，我想您可以将`offset`值设置为 1 和`rows`98357。理论上它应该可以工作，因为它适用于较小的数组（10 x 20 像素）。

**编辑：**不要忘记更改`range(10)`为`range(98357)`或`xrange(98357)`

# spring - 春天 + JPA + 休眠

> ID：14855181
> 
> 赞同：3
> 
> 时间：2013-02-13T13:54:51.053
> 
> 标签：spring, hibernate, jpa, entitymanager

我是春天的新手。我正在尝试使用 Spring 3.1.3 和 JPA 2.0 设置简单的 Web 应用程序，我已将所有必要的库添加到 WEB-INF/lib。启动过程中没有错误，但我的 DaoImpl 文件中的 entityManager 为空。所以，这是我的配置：

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

<persistence-unit name="fcmsServer" transaction-type="RESOURCE_LOCAL">
</persistence-unit>
</persistence> 
```

fcms-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd">

<!-- the application context definition for the fcmsServer DispatcherServlet -->

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="fcmsServer" />
    <property name="dataSource" ref="dataSource" />
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.H2Dialect" />
        </bean>
    </property>
    <property name="persistenceUnitManager">
        <bean
            class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
            <property name="defaultDataSource" ref="dataSource" />
        </bean>
    </property>
</bean>

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="org.h2.Driver" />
    <property name="url" value="jdbc:h2:tcp://localhost/~/fcms" />
    <property name="username" value="sa" />
    <property name="password" value="sa" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="persistenceAnnotation"
class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="userDao" class="fcms.data.user.UserDAOImpl">
</bean>

<bean name="/user.htm" class="fcms.controller.UserController">
</bean>

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView"></property>
    <property name="prefix" value="/WEB-INF/jsp/"></property>
    <property name="suffix" value=".jsp"></property>
</bean> 
```

DaoImpl 类：

```
@Repository
public class UserDAOImpl implements UserDAO {
@PersistenceContext(unitName = "fcmsServer")
private EntityManager entityManager;

public void setEntityManager(EntityManager entityManager) {
    this.entityManager = entityManager;
}

@Override
public User getUserById(long id) {
    return entityManager.find(User.class,id);
}

@Override
public void addUser(User u) {
    entityManager.persist(u);
}
} 
```

用户类

```
@Entity
@Table(name = "User")
public class User implements Serializable {

@Id  @GeneratedValue
private long id;
@Column(name = "lastName", nullable = false)
private String lastName;
@Column(name = "firstName", nullable = false)
private String firstName;
@Column(name = "birthDate", nullable = true)
private Date birthDate;
private static final long serialVersionUID = 1L; 
```

}

因此，当我尝试在 UserController 中调用 addUser() 时，在持久化期间出现 NullPointerException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:31:34.760

我认为您缺少告诉 spring 搜索注释的配置（在`<beans>`元素之间的任何位置添加以下内容：

```
<context:annotation-config /> 
```

也许您还需要添加以下内容，指定您拥有 DAO 的包。但我认为这不是必需的。

```
<context:component-scan base-package="your.package" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:03:50.913

这是一段工作代码：

春天.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/tx 
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">
        <context:annotation-config />
        <context:component-scan base-package="com.package.dao" />
        <tx:annotation-driven transaction-manager="transactionManager" />
        <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
                <property name="persistenceUnitName" value="fcmsServer" />
        </bean>
        <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
                <property name="entityManagerFactory" ref="entityManagerFactory" />
        </bean>        
</beans> 
```

豆豆：

```
@Repository
public class UserDaoBean implements UserDao {
        @PersistenceContext
        protected EntityManager em;         
} 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
             version="1.0">
    <persistence-unit name="fcmsServer" transaction-type="RESOURCE_LOCAL">

        <class>com.package.entity.</class>
        <properties>
            <property name="javax.persistence.jdbc.url"
                 value="jdbc:mysql://localhost:3306/db_name"/>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
            <property name="javax.persistence.jdbc.user" value="admin"/>
            <property name="javax.persistence.jdbc.password" value="admin"/>
        </properties>
    </persistence-unit>
</persistence> 
```

# webserver - 如何将 Symfony 2.1 项目从 localhost 正确移动到 Web 服务提供商 (1and1)

> ID：14855194
> 
> 赞同：0
> 
> 时间：2013-02-13T13:55:35.793
> 
> 标签：webserver, symfony-2.1, move

第一个重要的事情是我是 Symfony 2.1 的新用户，所以我现在还没有。所以这篇文章对 Symfony 2 的其他用户来说可能是一个很好的例子。

回到主要问题。我正在尝试将我的 Symfony 项目（整个项目）导出到`1and1`Web 服务器。我已经进行了一些研究如何做到这一点，但在我的情况下所有方法都失败了。

我做了什么：

1.  我将所有项目文件移至服务器。
2.  [从1and1 mod_rewrite 问题](https://stackoverflow.com/questions/8681959/1and1-mod-rewrite-issues)和[symfony2 重写规则 .htaccess app.php](https://stackoverflow.com/questions/11149526/symfony2-rewrite-rules-htaccess-app-php)的教程准备了一个子域（[地址](http://grawero.egel.pl)），指向`/web`文件夹和确认文件。`.htaccess`

这是我`.htaccess`在`/web`文件夹中的文件

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On
    Options -MultiViews

    # Explicitly disable rewriting for front controllers
    RewriteRule ^app_dev.php - [L]
    RewriteRule ^app.php - [L]

    RewriteCond %{REQUEST_FILENAME} !-f

    # Change below before deploying to production
    RewriteRule ^(.*)$ app.php [QSA,L]
    #RewriteRule ^(.*)$ app_dev.php [QSA,L]
</IfModule> 
```

我认为它应该工作，但没有仍然显示`Internal Server Error 500`

`Notice:`当我阅读这篇文章时，我[在 Symfony 中找到了这篇关于 htaccess 的文章，](https://stackoverflow.com/questions/5799050/htaccess-for-symfony-on-shared-hosting)但它没有提到应该移动 .htaccess 文件或者只是复制到根目录。

请逐步解释要做什么，正确执行哪些步骤非常重要，或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:16:00.040

1.  使用 是`check.php`因为您有 77% 的可能性会丢失一些 php 模块。
2.  检查文件权限`app/logs` `app/cache`
3.  下次配置一些部署脚本并在部署后使用 composer 安装供应商它会给你缺少的东西。

**要求：**

*   PHP 需要是 PHP 5.3.3 的最低版本
*   需要启用 JSON
*   需要启用 ctype
*   你的 PHP.ini 需要有 date.timezone 设置

**可选的：**

*   您需要安装 PHP-XML 模块
*   您需要至少有 2.6.21 版本的 libxml
*   需要启用 PHP 标记器
*   需要启用mbstring函数
*   需要启用 iconv
*   需要启用 POSIX（仅在 *nix 上）
*   Intl 需要安装 ICU 4+
*   APC 3.0.17+（或需要安装其他操作码缓存）
*   PHP.ini 推荐设置
    *   short_open_tag = 关闭
    *   magic_quotes_gpc = 关闭
    *   register_globals = 关闭
    *   session.autostart = 关闭

# ios - PayPal iOS MPL 错误 559044“此接收方仅通过其网站接受 PayPal 付款”

> ID：14855196
> 
> 赞同：0
> 
> 时间：2013-02-13T13:55:39.820
> 
> 标签：ios, paypal

我已经为 iOS 集成了 PayPal MPL 库。通过沙盒成功测试后，我将应用程序提交给 PayPal 并取回我的实时应用程序 ID。

我插入了实时应用 ID，并将 MPL 框架设置为使用 ENV_LIVE。

现在，通过 PayPal 结帐时，我在控制台中收到以下警告：

```
severity: Warning
category: Request
errorId: 559044
message: This receiver accepts PayPal payments only through their website 
```

在执行付款时，我收到错误：

```
"Payment declined. The recipient has chosen to block this payment". 
```

如何更新商家帐户以接受来自移动设备的付款？我在任何地方都找不到这个。

如果有帮助，我将在设备本身上进行测试（但连接到控制台）。商家账户位于英国，商家账户和应用程序使用的货币均为英镑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-03T15:43:23.963

此错误表明卖家账户已设置为阻止付款。

谷歌搜索你的错误#为这些设置提供了比我写的更好的方法，所以这是块复制的：

要查看和更改您的冻结付款设置，请按以下步骤操作：

1.  登录您的 PayPal 账户并导航至：我的账户 > 个人资料 > 我的销售工具 [注意：PayPal 最近更新了很多页面；您可能需要四处寻找，具体取决于您拥有的界面版本]
2.  然后，在我的销售工具页面上，在块付款项的右侧，请单击更新链接。
3.  在加载的页面中，请确保您的帐户是：

未设置为“阻止未提供确认地址的美国用户对未在 eBay 上出售的商品进行付款”未设置为阻止“从汇款选项卡的支付任何人子选项卡发起付款”的用户的付款未设置为阻止以您不持有的货币付款 未设置为阻止来自学生帐户的付款（可选） 不要忘记在离开页面之前保存您的更改

（结束块复制）。我将添加另一种特定于 MPL 的可能性：MPL 中的某些功能需要 PayPal 的授权（出于安全原因）。其中大部分都在应用程序级别（自从您完成申请流程以来您应该拥有）但您的接收（卖方）帐户可能缺少 MPL 的一些关键审查/背书，并且 PayPal 可能已为此重复使用此错误代码. 如果该首选项页面上没有阻止，则 ping PayPal 以询问接收方是否需要审查才能访问您正在使用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T10:12:19.570

你在混合沙盒和真实账户吗？这对我来说是个问题

# machine-learning - scikit-learn 标准化值中的机器学习算法？

> ID：14855197
> 
> 赞同：-3
> 
> 时间：2013-02-13T13:55:42.317
> 
> 标签：machine-learning, scikit-learn

首先使用 scikit-learn 模块的机器学习算法进行图像集，我该如何准备特征图像？我可以用标准偏差（即最近邻或聚类算法）对值进行归一化吗？或者我可以用 (featureValue-min) / (max -min) 线性缩放，正如我在这里看到的：[http](http://www.csie.ntu.edu.tw/~cjlin/talks/mlss_kyoto.pdf) ://www.csie.ntu.edu.tw/~cjlin/talks/mlss_kyoto.pdf for svm。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:09:08.517

请阅读以下内容：ftp: [//ftp.sas.com/pub/neural/FAQ2.html#A_std](ftp://ftp.sas.com/pub/neural/FAQ2.html#A_std) 如果您的特征是从高斯分布中提取的，那么您使用 SD 和均值进行标准化。否则，您只需标准化/重新缩放以将它们带到 0-1 的范围内。许多预处理往往取决于数据和所选择的技术。找到最适合您的数据和技术的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-20T13:15:40.010

并非所有算法都需要归一化的输入向量，例如随机森林算法。但是，如果您选择的算法需要归一化，比如 SVM，则使用来自预处理模块的 Sklearn 中可用的归一化器对其进行归一化，并在拟合之前将您的数据转换为归一化数据。此外，如果您尝试对图像进行分类，请查看 sklearn 中的 PCA（主成分分析），这有助于您使用选定的特征进行处理并提供更好的性能和结果

# mongodb - 在mongodb C#中保存图像

> ID：14855201
> 
> 赞同：2
> 
> 时间：2013-02-13T13:56:00.173
> 
> 标签：mongodb

我想在c#中将图像保存在mongodb中，下面是代码。

[HttpPost] 私有 AssetData GetAssetFromHttpRequest(HttpRequestMessage requestMessage, out MemoryStream imageStream)

```
 {
        imageStream = null;
        var streamProvider = new MultipartFormDataStreamProvider(Path.GetTempPath());
        var bodyPartFileNames = streamProvider.FileData;
        var fileinfo = bodyPartFileNames.Select(item => new FileInfo(item.LocalFileName)).FirstOrDefault();
        var fileName = Path.GetFileName(bodyPartFileNames[0].Headers.ContentDisposition.FileName.Replace("\"", string.Empty));
        // validate the file info.
        if (fileinfo != null)
        {
            using (var fileStream = File.OpenRead(fileinfo.FullName))
            {
                imageStream = new MemoryStream();
                imageStream.SetLength(fileStream.Length);
                fileStream.Read(imageStream.GetBuffer(), 0, (int)fileStream.Length);
            }

            // create an asset instance with the details of attached, for the time being the type of the image is set as image. 
            return new AssetData { AssetName = fileName, Id = 1254 };
        }
        return null;
    } 
```

# php - 将 HTML 输出作为对象的 PHP

> ID：14855205
> 
> 赞同：0
> 
> 时间：2013-02-13T13:56:12.623
> 
> 标签：php, html

有没有办法像在javascript中一样在php中使用html，我可以这样`Element.append()`做。喜欢`$html->body->header->append($menu)`？什么课什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:01:06.463

查看[PHP 中的 DOM](http://php.net/manual/en/book.dom.php)。基本上，[DOMDocument](http://www.php.net/manual/en/class.domdocument.php)提供类似于 Javascript DOM 的功能，尽管 DOM 在 PHP 中使用起来有点困难/复杂。

# opengl - 获取在 OpenGL 中可以看到的所有内容的边界框

> ID：14855206
> 
> 赞同：3
> 
> 时间：2013-02-13T13:56:14.323
> 
> 标签：opengl, volume, bounding-box

如何在纯OpenGL中在屏幕上可见的所有内容上获得边界框？我想要边界框的所有 8 个点的 X、Y 和 Z。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:23:20.140

OpenGL 没有定义您在屏幕上看到的固定“盒子”体积。从某种意义上说，应用程序使用变换和投影定义了这些边界 -[通常不形成矩形棱柱。](http://en.wikipedia.org/wiki/Viewing_frustum)最接近这种“边界框”的是*标准化的设备坐标空间*或投影*后*的3d 视口。

*在世界坐标空间*中包含所有几何图形的[边界框](http://en.wikipedia.org/wiki/Bounding_volume)是您必须从数据中确定的，与 GL 管道无关。

 ** * *

要恢复世界坐标空间 (WCS) 中映射到视口角的点，您需要了解矩阵变换和齐次坐标的工作原理。

投影（除以 W）后，标准化设备坐标空间 (NDCS) 中的“前”或“近”平面为：`Z/W = -1`. NDCS 是*左手*坐标空间。

这对应于*超平面*: `Z = - W`，在裁剪坐标空间中，因此形式的任何（同质）点：`(x, y, -z, z)`将投影到：`(x/z, y/z, -1, 1)`。

映射到 3D 视口的规范视图体积由以下公式定义：
`-1 <= X/W <= 1, -1 <= Y/W <= 1, -1 <= Z/W <= 1`，以 (6) 个超平面为界：

> X ± W = 0，Y ± W = 0，Z ± W = 0（均匀*剪裁*平面）

因此，可以扩展上述内容以找到对应于 3d 视口的视体积“角”的（齐次）坐标。考虑视口的右上角，在“近”平面上。它对应于：`(1, 1, -1, 1)`，尽管形式的任何点：`(W, W, -W, W)`都将投影到相同的 3D (NDCS) 点。

给定一些 matrix:`[M]`将一个点`P`（在 WCS 中）转换为 yield `Q = (1, 1, -1, 1)`，然后只需使用逆（矩阵）变换即可：`P = inv[M] * Q`

相同的想法可以应用于每个“角落”。它对于拾取也非常有用 - 拾取光线从“眼睛”延伸到`(x, y, -1, 1)`.

* * *

**注意：**这比我打算介绍的更详细，并且可能超出了 OP 的要求，但我看到很多关于*拾取*的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:13:44.830

为什么你需要 OpenGL？是你在画东西，所以只需对你的所有数据运行一个函数。考虑投影并丢弃视图体积之外的结果；检查非常简单，尤其是在使用正交投影时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:06:22.943

我认为在 OpenGL 中，屏幕上的内容是一个[截锥体](http://en.wikipedia.org/wiki/Frustum)，而不是一个盒子。*

# jquery - 如何遍历多个div

> ID：14855207
> 
> 赞同：1
> 
> 时间：2013-02-13T13:56:15.810
> 
> 标签：jquery

我有这样的结构：

```
<div>
     <div> 
         <div onclick="someFunction(this)"></div>
     </div>
     <div> 
         <div onclick="someFunction(this)"></div>
     </div>
     ..
     ..
</div> 
```

所以在我的内部`someFunction()`，我如何遍历所有`div`已经`onclick`实现的 s？

我想到了以下几点：

```
$(this).parent().parent().children().each( function () { } ); 
```

但不知何故，我完全确定这是错误的。因为做`parent()`两次可能会将我带到最顶层的父级，但之后遍历每个孩子实际上不会遍历所有的`div`s `onclick`，而是遍历它`div`上面的 s 层。如果我再做`children()`一次`each()`，我不认为它会做我想做的事。请指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:59:11.317

你为什么不给所有的 div 分配一个类并实现了 onclick 方法呢？

所以你会做这样的事情

html

```
<div>
     <div> 
         <div class="someDiv"></div>
     </div>
     <div> 
         <div class="someDiv"></div>
     </div>
     ..
     ..
</div> 
```

脚本

```
$(".someDiv").each(function(){
    somefunction(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:01:43.940

[您可以通过将parents()](http://api.jquery.com/parents/)链接到[eq()](http://api.jquery.com/eq/)来匹配祖父元素，然后使用带有[Has Attribute选择器的](http://api.jquery.com/has-attribute-selector/)[find()](http://api.jquery.com/find/)来匹配您感兴趣的元素：`<div>`

```
$(this).parents().eq(1).find("div[onclick]").each(function() {
    // ...
}); 
```

如果要排除 current `<div>`，可以使用[not()](http://api.jquery.com/not/)：

```
$(this).parents().eq(1).find("div[onclick]").not(this).each(function() {
    // ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:00:28.897

你可以这样做：

```
$('div[onclick*=someFunction]') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:01:23.850

添加一个类以轻松选择所需的所有元素。

```
<div>
     <div> 
         <div class="myClass"></div>
     </div>
     <div> 
         <div class="myClass"></div>
     </div>
     ..
     ..
</div>

$(document).ready(function(){
    //All your elements which have a class myClass
    $elements = $('.myClass');

    $.each($elements,function(){
        //Here you are going through all your elements
    });

    $('.myClass').click(function(){
        //Here you are executing your function
        someFunction(this);
    });
}); 
```

# matlab - 在 Matlab 中使函数返回多个值

> ID：14855208
> 
> 赞同：2
> 
> 时间：2013-02-13T13:56:16.043
> 
> 标签：matlab, integral

我在 Matlab 中编写了一个程序，目的是计算某个函数的积分。我应该使用梯形法进行积分。目前，代码如下所示：

```
a=0; b=2.5; n=2; % n is the number of intervals
h=(b-a)/n; %the width of every interval
x=a:h:b
y=labb2uppg1Funkfil(x)
trapets=h*(sum(y)-(y(1)+y(length(y)))/2)
plot(x,y) 

% This is located in a different file named labb2uppg1Funkfil
function y = funk(x)
y = exp(-x/3)/(2-cos(pi*x)); 
```

我认为问题在于我的函数只返回一个 y 值，而它应该更多！如何重写函数以返回多个值？还是这里有其他问题？

提前致谢！结尾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:30:07.987

您需要使用逐元素除法 ( `./`) 而不是矩阵除法 ( `/`)。[文档在这里。](http://www.mathworks.com/help/matlab/matlab_prog/operators.html)

```
y = exp(-x/3) ./ (2-cos(pi*x)); 
```

另请注意，强烈建议函数和文件名相同。两者都应该是“labb2uppg1Funkfil”或“funk”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:30:36.333

@DanilAsotsky 是 Rigth。如果您希望函数为插入的每个 x 返回 ay，则应重写该函数以进行元素操作

```
function y = funk(x)
y = exp(-x./3)./(2-cos(pi.*x)); 
```

会做这项工作

# php - 如何在 PHP DOMXpath 中提取混合内容？

> ID：14855209
> 
> 赞同：2
> 
> 时间：2013-02-13T13:56:15.697
> 
> 标签：php, parsing, xpath, domxpath

我有以下正在解析的 HTML：

```
<ul class="man">
   <li>
      height
       <span>3.3"</span>
    </li>
    <li>
       weight
       <span>45kg</span>
    </li>
    <li>
       date born
       <span>1/12/1979</span>
    </li>

 </ul> 
```

我正在使用下面的代码来解析上面的 HTML：

```
foreach($xpath->query("//ul[@class='man']/li") as $element)
{
       echo $element->nodeValue;

} 
```

但是代码返回内部`<li></li>`作为高度 3.3" 和重量 45kg 的整个东西，而我需要这两个单独的作为标签的高度和 3.3" 作为值，与标签相同的重量和 45kg 作为值。

我可以使用 "//ul[@class='man']/ul/span" 实现第二个价值，但无法在单独的变量中获取标签。

有什么想法可以解决这个问题吗？

PS：无法更改标签值，因为它们来自 HTML 页面中的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:00:02.780

您可以遍历`<li>`的孩子，其中第一个是`DOMText`包含（例如）`height`标签的对象，第二个将是`<span>` `DOMElement`对象：

```
$data = array();

foreach ($xpath->query("//ul[@class='man']/li") as $element) {

    foreach ($element->childNodes as $child) {
        $content = trim($child->nodeValue);

        if ($child instanceof DOMText && $content != '') {
            $key = $content;
        } elseif ($child instanceof DOMElement && $child->tagName == 'span') {
            $value = $content;
        }
    }

    if ($key !== null && $value !== null) {
        $data[$key] = $value;
    }
} 
```

# c# - session {“对象引用未设置为对象的实例。”} System.Exception {System.NullReferenceException}

> ID：14855217
> 
> 赞同：-1
> 
> 时间：2013-02-13T13:57:03.367
> 
> 标签：c#, asp.net, session, visual-studio-2012

我是 ASP.NET 的新手，我遇到了一个问题。我正在尝试管理已经编写好的网站。当我到达以下行时出现此错误：

```
if (Session["usertype"].Equals("2"))
{

} 
```

`Session["usertype"]`已在上一页分配。在当前页面上，我丢失了所有会话变量（我在调试中检查了它）。

登录后按以下方式分配会话

```
Session["usertype"] = "2" 
```

登录后页面，10秒后刷新。那是我放松会议的地方。请让我知道，这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:17:24.527

只需检查 Session 变量是否为 Null-

```
 if( Session["usertype"] != null )
    {
         //Now check your condition here
    }
   else {
           //Perform any operation
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:01:52.883

如果您得到`NullReferenceException`，则会话值将返回为`null`。您可能应该检查：

```
var userType = (string)Session["usertype"];
if(userType == null) {
    // .. things to do if no session value
} else {
    // test "2" etc
} 
```

可能是会话状态被禁用，或者根本没有实际设置值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:16:24.523

你的过程超过10秒吗？您可以**在 IIS中****更改**会话的长度。打开 IIS，点击你的网站，选择 Session State（ASP.NET 选项卡），查看 State-Server，更改 Time-out（默认值：10 秒）

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:02:10.367

您使用的是 WebForms 还是 MVC？在 WebForms 中，会话状态在页面 Init 之后才可用。**

# python - Python 3.3 中集合的比较运算符是否损坏？

> ID：14855218
> 
> 赞同：-3
> 
> 时间：2013-02-13T13:57:09.087
> 
> 标签：python

这是我使用的代码：

```
>>> a = set([1,2,2])
>>> b = set([1,1,2])
>>> a
    {1, 2, 2}
>>> b
    {1, 1, 2}
>>> a <= b
    True 
>>> a.__le__(b)
    True 
```

显然`a`不是 的子集`b`。另外，查看 collections.py 中的文档代码，我有点担心，因为这是至关重要的，就像`Set`我们让他们说的类的文档字符串一样

```
"""...
To override the comparisons (presumably for speed, as the
semantics are fixed), all you have to do is redefine __le__ and
then the other operations will automatically follow suit.""" 
```

所有其他方法都使用`__le__`. 所以我一个人在这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T13:58:10.850

实际上`a`是 的一个子集`b`。这是因为集合中不允许有重复值。

[文档](http://docs.python.org/3.3/library/stdtypes.html#set-types-set-frozenset)清楚地说明了这一点：

> 集合对象是不同的可散列对象的无序集合。

那句话中的关键词是*distinct*。

因此，可以很容易地验证，您的三组都彼此相等。

```
{1, 2, 2} == {1, 2}
{1, 1, 2} == {1, 2} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T13:58:23.720

不，比较运算符 for`set`绝对没有损坏。 `a`肯定是 的一个子集`b`。不要忘记，当您的集合构建时，重复的值将被删除！

如果您尝试打印`a`and `b`，您会发现它们都是 set: `{1, 2}`。事实上，它们是等价的集合，因此每个都是另一个的子集。

* * *

如果你正在寻找一个多重集，也许你想[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)为你的数据结构寻找一个。文档甚至指出：

> Counter 类类似于其他语言中的 bag 或 multisets。

由于 Counters 支持`intersection`，您可以轻松测试一个计数器是否是另一个计数器的子集：

```
def counter_issubset(a,b):
    return a == (a & b) 
```

# javascript - 如何获得整个可用空间的高度？

> ID：14855223
> 
> 赞同：2
> 
> 时间：2013-02-13T13:57:34.640
> 
> 标签：javascript, jquery, html

我需要在网络浏览器中获取整个可用空间的高度，这样我就可以将其`div`放置在屏幕的中间位置并将其一直向下拉伸。

我认为`document.body.clientHeight`会起作用，但这会返回正在*占用*的空间量，而不是总可用空间。

我还尝试对所有内容进行“包装” `div`：

```
<div id="wrapper" style="height: 100%; width: 100%;">
    //my other code
</div> 
```

并获得它的高度，但这仍然会占用空间。

如何使用 Javascript 或 jQuery 获取 Web 浏览器中的总可用空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:58:43.000

来自[jQuery 文档 height()](http://api.jquery.com/height/)

```
This method is also able to find the height of the window and document.

    $(window).height();   // returns height of browser viewport
    $(document).height(); // returns height of HTML document 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:32:41.517

我的意思是元素父级中可用的空间，你可以试试这个......

```
var entireHeight=$('#elementID').parent().height();

var siblingHeight=0;

var elementSiblings=$('#elementID').siblings();

$.each(elementSiblings, function() {
    siblingHeight= siblingHeight+$(this).height();
}); 
```

减去值，即

```
(entireHeight-siblingHeight) 
```

应该给你可用的空间。

希望它有所帮助.. :) 如果它不起作用，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-14T22:47:12.650

***这很简单***

var max_height= **screen.availHeight - (window.outerHight - window.innerHight)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:13:10.723

一个简单的例子

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>
        A2CARE 2.0
    </title>

    <script type="text/javascript" language="Javascript" src="jslib/jquery.js"></script>
    <script type="text/javascript">

        function getheight(){
            var d= document.documentElement;
            var b= document.body;
            var who= d.offsetHeight? d: b ;
            return who.clientHeight;

        }
        $(document).ready(function() {      
                var h = getheight();
                document.getElementById('tryme').style.height= h + 'px';
            });
    </script>
</head>
<body>  
    <div id="tryme" style="border: 2px solid red;">
        try me!
    </div>
</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T14:17:16.663

你可以直接在javascript中使用

```
screen.width
screen.height 
```

你可以分配喜欢

```
document.getElementById("parentId").style.width = (screen.width - 100)+"px";
document.getElementById("parentId").style.height = (screen.height-300)+"px"; 
```

# android - SQLite 查询不起作用

> ID：14855224
> 
> 赞同：-2
> 
> 时间：2013-02-13T13:57:40.613
> 
> 标签：android, sqlite

```
select * from allmessages where  timestamp >  DATETIME('NOW' , '-10 DAY' ) 
```

我正在尝试显示在 10 天之前发布的消息，但这是从 1 年开始执行的整个过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:06:23.747

试试这个：

> **注意：这仅在您将日期存储在数据库中的时间戳中时才有效。**

```
SELECT * FROM TableName WHERE DATE(column_name) >= DATE('now', '-10 days'); 
```

有关更多详细信息，请查看此链接：

[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

# matlab - 我们如何计算matlab中每个块的平均值？

> ID：14855229
> 
> 赞同：0
> 
> 时间：2013-02-13T13:57:50.817
> 
> 标签：matlab, mean

如何使用索引技术将图像划分为不重叠的块？

我想计算每个块的平均值并单独显示它们。

我正在使用matlab R2012a。

索引技术意味着：image(row1:row2,col1:col2);

我的图像中有不同的块，它们是离散块......我已经计算了个人平均值......现在问题是

如何比较一个块与另一块的平均值...

我想跟踪那些具有相同含义的块....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:11:09.477

你考虑过[`blockproc`](http://www.mathworks.com/help/images/ref/blockproc.html)吗？
例如，`mean`非重叠 10x10 补丁的计算：

```
m = blockproc( img, [10 10], @(x) mean(x.data(:)) ); 
```

# debugging - 内核通过串口调试Windows 7

> ID：14855233
> 
> 赞同：0
> 
> 时间：2013-02-13T13:57:57.723
> 
> 标签：debugging, windows-7, driver, windbg, device-driver

我已经使用 Windows 7 调试了 VM（管道连接）上的驱动程序。现在我想在使用 Windows 7（x64）的笔记本电脑中调试驱动程序，但 WinDbg 一直在等待连接：

> Microsoft (R) Windows 调试器版本 6.7.0005.1 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 已打开 \\.\com1 等待重新连接...

在目标笔记本电脑中，我使用此 BCD 条目启动：

```
标识符 {当前}

设备分区=C：

路径 \windows\system32\winload.exe

描述 DebugEntry

语言环境es-ES

继承 {bootloadersettings}

恢复序列 {b3c5a314-b064-11df-ba01-a8d3a819aefa}

启用恢复 是

引导调试 是

osdevice 分区=C:

系统根\windows

恢复对象 {b3c5a312-b064-11df-ba01-a8d3a819aefa}

nx 选择

检测 是的

调试 是

```

目标上的调试设置是：

```
C:\windows\system32>bcdedit /dbgsettings
调试类型串行
调试端口 1
波特率                115200

```

主机和目标的波特率相同，因为我以这种方式启动调试器：

> windbg.exe -k com:port=COM **1** ,波特= **115200**

该电缆适用于内核调试，因为我以前使用过它，事实上，当我监视目标机器中的 COM1 时，我可以看到来自 WinDbg 的轮询消息，甚至是 Control+Break 消息……但没有任何反应。

正如预期的那样，串行端口在两个 BIOS 设置中都已启用。

此外，Windows 似乎没有在启动时等待 COM 1 上的超时，它正常启动，没有延迟......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T14:01:23.733

在您的目标机器上，请验证 com 端口是否正常工作。转到设备管理器并检查 com 端口属性。它可能已被禁用，或者其资源可能已分配给其他设备。

# r - 多次使用位置 `$` 运算符来更新嵌套数组

> ID：14855246
> 
> 赞同：21
> 
> 时间：2013-02-13T13:58:32.923
> 
> 标签：r, mongodb, rmongodb, nosql

[这个问题与这个](https://stackoverflow.com/questions/4121666/updating-nested-arrays-in-mongodb)问题密切相关，我将考虑在 NoSQL 上下文中给出的关于模式设计的建议，但我很想了解这一点：

## 实际问题

假设您有以下文档：

```
 _id : 2      abcd
    name : 2     unittest.com
    paths : 4    
        0 : 3    
            path : 2     home
            queries : 4      
                0 : 3    
                    name : 2     query1
                    url : 2      www.unittest.com/home?query1
                    requests: 4

                1 : 3    
                    name : 2     query2
                    url : 2      www.unittest.com/home?query2
                    requests: 4 
```

基本上，我想知道

1.  如果可以在涉及“嵌套度”大于 1 的数组/文档结构的更新场景中多次使用 MongoDB 的位置`$`运算符（[details ），或者换一种说法：](http://docs.mongodb.org/manual/reference/operator/positional/#_S_)

    `{ <update operator>: { "paths.$.queries.$.requests" : value } }`（**不起作用**）

    而不是“仅”能够对顶级数组使用`$` **一次，并且必须对“更高级别”的数组使用显式索引：**

    `{ <update operator>: { "paths.$.queries.0.requests" : value } }`) (**作品**)

2.  如果可能的话，相应的 R 语法会是什么样子。

您将在下面找到一个可重现的示例。我尽量简洁。

* * *

# 代码示例

## 数据库连接

```
require("rmongodb")
db  <- "__unittest" 
ns  <- paste(db, "hosts", sep=".")
# CONNCETION OBJECT
con <- mongo.create(db=db)
# ENSURE EMPTY DB
mongo.remove(mongo=con, ns=ns) 
```

## 示例文档

```
q <- list("_id"="abcd")
b <- list("_id"="abcd", name="unittest.com")
mongo.insert(mongo=con, ns=ns, b=b)
q <- list("_id"="abcd")
b <- list("$push"=list(paths=list(path="home")))
mongo.update(mongo=con, ns, criteria=q, objNew=b)
q <- list("_id"="abcd", paths.path="home")
b <- list("$push"=list("paths.$.queries"=list(
    name="query1", url="www.unittest.com/home?query1")))
mongo.update(mongo=con, ns, criteria=q, objNew=b)
b <- list("$push"=list("paths.$.queries"=list(
    name="query2", url="www.unittest.com/home?query2")))
mongo.update(mongo=con, ns, criteria=q, objNew=b) 
```

## 使用显式位置索引更新嵌套数组（有效）

这可行，但它涉及二级数组的**显式**`queries`索引（嵌套在 array 的子文档元素中`paths`）：

```
q <- list("_id"="abcd", paths.path="home", paths.queries.name="query1")
b <- list("$push"=list("paths.$.queries.0.requests"=list(time="2013-02-13")))
> mongo.bson.from.list(b)
    $push : 3    
        paths.$.queries.0.requests : 3   
            time : 2     2013-02-13

mongo.update(mongo=con, ns, criteria=q, objNew=b)
res <- mongo.find.one(mongo=con, ns=ns, query=q)
> res
    _id : 2      abcd
    name : 2     unittest.com
    paths : 4    
        0 : 3    
            path : 2     home
            queries : 4      
                0 : 3    
                    name : 2     query1
                    requests : 4     
                        0 : 3    
                            time : 2     2013-02-13

                    url : 2      www.unittest.com/home?query1

                1 : 3    
                    name : 2     query2
                    url : 2      www.unittest.com/home?query2 
```

## 使用位置索引更新嵌套数组`$`（不起作用）

现在，我想`0`用位置`$`运算符替换显式，就像我所做的那样，以便让服务器找到所需的数组`paths`( `paths.$.queries`) 的子文档元素。

AFAIU[文档](http://docs.mongodb.org/manual/reference/operator/positional/#_S_)，这应该起作用，因为关键是指定一个“正确”的查询选择器：

> > 位置 $ 运算符，与 update() 方法一起使用时，充当更新查询选择器的第一个匹配项的占位符：

我想我指定了一个查询选择器，它**确实**找到了正确的嵌套元素（由于`paths.queries.name="query1"`部分）：

```
q <- list("_id"="abcd", paths.path="home", paths.queries.name="query1") 
```

我猜翻译成“普通的 MongoDB”语法，查询选择器看起来有点像这样

```
{ _id: abcd, paths.path: home, paths.queries.name: query1 } 
```

这对我来说似乎是一个有效的查询选择器。事实上，它确实匹配所需的元素/文档：

```
> !is.null(mongo.find.one(mongo=con, ns=ns, query=q))
[1] TRUE 
```

我的想法是，如果它适用于顶层，为什么它不能适用于更高级别（只要查询选择器指向正确的嵌套组件）？

但是，服务器似乎不喜欢嵌套或多次使用`$`：

```
b <- list("$push"=list("paths.$.queries.$.requests"=list(time="2013-02-14")))
> mongo.bson.from.list(b)
    $push : 3    
        paths.$.queries.$.requests : 3   
            time : 2     2013-02-14

> mongo.update(mongo=con, ns, criteria=q, objNew=b)
[1] FALSE 
```

我不确定它是否不起作用，因为 MongoDB 不支持这一点，或者我没有得到正确的 R 语法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T14:20:49.830

位置运算符只支持一个深度并且只支持第一个匹配元素。

这里有一个 JIRA 可跟踪您想要的那种行为：[https ://jira.mongodb.org/browse/SERVER-831](https://jira.mongodb.org/browse/SERVER-831)

我不确定它是否会允许不止一场比赛，但我相信这将是由于它需要如何工作的动态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-10T14:30:50.263

如果您可以从 MongoDB shell 执行查询，则可以利用 MongoDB 游标的**forEach**函数（[http://docs.mongodb.org/manual/reference/method/cursor.forEach/](http://docs.mongodb.org/manual/reference/method/cursor.forEach/)）绕过此限制

这是一个包含 3 个嵌套数组的示例：

```
var collectionNameCursor = db.collection_name.find({...});

collectionNameCursor.forEach(function(collectionDocument) {
    var firstArray = collectionDocument.firstArray;
    for(var i = 0; i < firstArray.length; i++) {
        var secondArray = firstArray[i].secondArray;
        for(var j = 0; j < secondArray.length; j++) {
            var thirdArray = secondArray[j].thirdArray;
            for(var k = 0; k < thirdArray.length; k++) {
                //... do some logic here with thirdArray's elements
                db.collection_name.save(collectionDocument);
            }
        }
    }
}); 
```

请注意，这更像是一次性解决方案，而不是生产代码，但如果您必须编写修复脚本，它就会完成这项工作。

# jquery - jQuery .load() 回调在图像加载之前发生

> ID：14855257
> 
> 赞同：0
> 
> 时间：2013-02-13T13:59:30.130
> 
> 标签：jquery, performance, callback, load, overlay

我正在尝试在使用 .load() 方法进行 ajax 调用时让图像（div）覆盖整个视口。加载完成后，覆盖应该消失。然而，即使使用加载回调，覆盖在图像加载之前消失。使用较慢的互联网连接，用户可以看到一张一张加载的图像。

当前的 WIP 可以在（单击**工作**查看错误）中找到。

**我的加载函数**

```
function loadContent(link) {
var loadUrl = $(link).attr("href");

showOverlay(function () {
    $('#holder').load(loadUrl, function () {
        $('#content').scrollTop(0)
         hideOverlay();
    })
  });
}; 
```

**叠加函数**

```
function showOverlay(callback) {
   $('html').addClass('overlay-visible');
   $('#overlay').fadeIn(500, callback);
};

function hideOverlay(callback) {
  $('html').removeClass('overlay-visible');
  $('#overlay').delay(100).fadeOut(500, callback);
}; 
```

提前感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:16:57.127

当您使用 jQuery 的 load() 方法执行 AJAX 加载时，事情会按以下顺序发生（请参阅[http://api.jquery.com/load/](http://api.jquery.com/load/)）：

1.  load() 通过 AJAX 加载外部 HTML
2.  一旦这个 HTML 被加载，它就会替换 jQuery 对象的内容——这里是 $('#loader')
3.  最后调用回调函数

这里的问题是您的 HTML 包含图像，而这些图像又是从 Internet 下载的。所以在这里你的图像在上面的 #2 之后开始下载，几乎在调用回调的同时。

结果是回调几乎是即时的，而图像加载需要一点时间。一个解决方案确实是预加载图像，以避免这种影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:08:13.603

```
 var img = new Image();
  var img_src = ''; // your image url here.
  img.onload = function() {
    //operate your div here.
  };
  img.src = img_src; 
```

# algorithm - 关联数组查找成本

> ID：14855259
> 
> 赞同：3
> 
> 时间：2013-02-13T13:59:44.700
> 
> 标签：algorithm, lua, big-o, array-algorithms

考虑两个查找函数：

```
simple={1,3,5}

function isX(id) 
 for _,v in ipairs(simple) do 
  if v==id then return true end 
 end 
 return false 
end

assoc={[1]=true,[3]=true,[5]=true}

function isX2(id) 
 return assoc[id] or false 
end 
```

哪个函数的查找成本更低？或者他们是平等的？Lua 如何在内部存储关联数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T14:04:22.653

本质上，*所有*表都是哈希表，您的第一个表只是隐式使用整数键`1..n`。一个写得体面的哈希表和一个体面的散列函数（两者都是给定的）需要预期的恒定时间，尽管在*极不可能*的最坏情况下它可能需要线性时间。您的第二个函数利用了它，第一个函数没有 - 它总是需要与表格大小成线性关系的时间。

[如Lua 5.0 的实现中](http://www.lua.org/doc/jucs05.pdf)所述，对用作数组（连续整数键）的表进行了优化（您还可以在其中找到有关哈希表的一些详细信息）。如果本文中的信息是准确的，并且我正确地解释了它，那么这种优化也应该由您的第二个表触发（`1..5`使用的 5 个索引中的 3 个）。因此，它很可能只会在一个 C 数组中存储五个值，并对该数组进行有保证的恒定时间索引。

无论哪种方式，您都可以打赌第二个会渐近更快。也就是说，随着元素的数量接近无穷大，它会变得比线性扫描更快。在实践中，你不需要去任何接近无限的地方（我的直觉是几十个就足够了，可能更少）就能看到显着的差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T14:03:45.493

第二个当然更快。Lua 使用基于哈希的表实现，这意味着在大多数情况下直接读取将是次线性的，甚至是`O(1)`.

第一个是`Ω(n)`。

# android - Google Analytics：删除 Android 应用配置文件

> ID：14855262
> 
> 赞同：-3
> 
> 时间：2013-02-13T13:59:56.437
> 
> 标签：android, google-analytics

我不小心删除了我的 Google Analytics（分析）帐户上我的 Android 应用程序的属性。有没有办法重新创建这个属性？似乎它只会让您添加一个新属性，从而为您提供一个新的跟踪 ID。显然，我想使用旧的跟踪 ID，因为那是应用程序正在使用的，我不能确保每个人都会更新到新版本？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:11:22.043

不，不幸的是你运气不好。您将只能生成一个新属性，就像您提到的那样，它将为您提供一个新 ID。

直接来自他们的[帮助文章](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1009621)：

> 还要记住，当您删除配置文件时，您也会删除与该配置文件关联的所有数据，并且无法检索已删除的数据。

# oracle - ORA - 00972: 标识符太长

> ID：14855267
> 
> 赞同：-2
> 
> 时间：2013-02-13T14:00:12.690
> 
> 标签：oracle

创建视图时出现错误（ORA - 00972：标识符太长）。

请找到视图声明。

```
create or replace view ELVW_ATM_REC_HANDOFF_1   
(Rectype
    ,Recseq
    ,Record_Type
    ,Record_Sequence
    ,MESSAGE_TYPE
    ,PAN
    ,PROCESSING_CODE
    ,TRANSACTION_AMOUNT
    ,TRANSACTION_CURRENCY_CODE
    ,SETTLEMENT_AMOUNT
    ,SETTLEMENT_CURRENCY_CODE
    ,Billing_AMOUNT
    ,Billing_CURRENCY_CODE
    ,Transaction_DATE
    ,Settlement_Date
    ,TRACE
    ,REFERENCE_NUMBER
    ,Switch_Log_ID
    ,AUTHORIZATION_NUMBER
    ,RESPONSE_CODE
    ,Host_Error_Code
    ,TERMINAL_ID
    ,Acceptor_ID
    ,ACQUIRING_INSTITUTION_CODE
    ,REV_FLAG
    ,Original_Trace_Number
    ,From_Account
    ,To_Account) 

as
select * from    

(select 'FT'
    ,'count'
    ,'DT'
    ,rownum
    ,msg_type
    ,pan,proc_code
    ,txn_amt
    ,txn_ccy_code
    ,setl_amt
    ,setl_ccy_code
    ,bill_amt
    ,bill_ccy_code
    ,trans_dt_time
    ,setl_date
    ,stan,trn_ref_no
    ,'iso field 60'
    ,'isofield 38'
    ,resp_code
    ,error_code
    ,term_id
    ,'ISOmessage42'
    ,acq_ins_id
    ,decode(substr(msg_type,1,1),4,reverse(msg_type),msg_type)
    ,'ISOfield90'
    ,from_acc
    ,to_acc 
    from swtb_txn_log) 
```

解码功能似乎发生错误。如果我评论它。它工作正常。请找到以下代码

```
create or replace view ELVW_ATM_REC_HANDOFF_1(Rectype,Recseq,Record_Type,Record_Sequence,MESSAGE_TYPE,PAN,PROCESSING_CODE,TRANSACTION_AMOUNT,TRANSACTION_CURRENCY_CODE,SETTLEMENT_AMOUNT,SETTLEMENT_CURRENCY_CODE,Billing_AMOUNT,Billing_CURRENCY_CODE,Transaction_DATE,/*Transaction_TIME,*/Settlement_Date,TRACE,REFERENCE_NUMBER,Switch_Log_ID,AUTHORIZATION_NUMBER,RESPONSE_CODE,Host_Error_Code,TERMINAL_ID,Acceptor_ID,ACQUIRING_INSTITUTION_CODE,/*REV_FLAG,*/Original_Trace_Number,From_Account,To_Account) as
select * from (select 'FT','count','DT',rownum,msg_type,pan,proc_code,txn_amt,txn_ccy_code,setl_amt,setl_ccy_code,bill_amt,bill_ccy_code,trans_dt_time,/*trans_dt_time,*/setl_date,stan,trn_ref_no,'iso field 60',
'isofield 38',resp_code,error_code,term_id,'ISOmessage42',acq_ins_id,/*decode(substr(msg_type,1,1),4,reverse(msg_type),msg_type),*/'ISOfield90',from_acc,to_acc from swtb_txn_log) 
```

我检查了列名的长度。它少于30个字符。期待您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:03:51.530

尝试为该函数提供一个别名（少于 30 个字符）`DECODE`。

例子：

```
DECODE( ...stuff... ) MYALIAS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:25:55.227

没错，视图规范中的所有列名都少于 30 个字符。

但是，您的视图包含一个内联查询：

```
select * from ( select ... 
```

这可能是问题所在。因为它可能正在尝试在该中间点处理 DECODE() 语句的标识符。我说“可能”是因为我无法在我的 10g 机器上重现这一点：为视图定义列名解决了 ORA-01948。

无论如何，您可以简单地通过给您的 DECODE() 列提供一个长度可接受的别名来解决问题。

# ruby-on-rails - 将两个日期之间的数据导出到 csv 文件中

> ID：14855270
> 
> 赞同：0
> 
> 时间：2013-02-13T14:00:19.407
> 
> 标签：ruby-on-rails, csv, export

我`index.html.erb`看起来是这样的： ![在此处输入图像描述](../Images/dbe05d9bdd462cbb5164c418ff782fd1.png)

当用户按下“应用”按钮时，我想将表中的所有日期导出到 csv 文件中（并保存）。

**我`reports_controller.rb`在下一行中定义：**

```
require 'csv' 
```

**我通过 ajax 将所有参数传递到控制器（到函数更新）。**

现在：

start_day =**用户选择的开始日期**

.

.

.

end_year =**用户选择的结束年份**

**在我的更新功能中，我尝试创建 csv 文件。为了在两个日期之间在我的表中进行搜索，我创建了两个变量：start_date 和 end_date。**

start_date = YYYY-MM-DD（而：YYYY 是 start_year，MM 是 start_month，DD 是 start_day）。

end_date 类似于 start_date（但有：end_year、end_month 和 end_day）

**所以这是我的更新功能：**

```
def update
    @start_day = params[:start_day]
    @start_month = params[:start_month]
    @start_year = params[:start_year]

    @end_day = params[:end_day]
    @end_month = params[:end_month]
    @end_year = params[:end_year]

    # the format of start_date and end_date will be: "YYYY-MM-DD"
    @start_date = @start_year + "-" + @start_month + "-" + @start_day
    @end_date = @end_year + "-" + @end_month + "-" + @end_day

    # get all the transactions between start_date to end_date
    @transactions = BillingTransaction.find(:all, :conditions =>["date(created_at) BETWEEN ? AND ? ", @start_date, @end_date])

    # create the csv file
    csv_string = CSV.generate do |csv|
        # insert the headers
        csv << ["transaction_type", "payment_method"]
        # run all over the transactions
        @transactions.each do |user|
            # each of transactions is inserted into the csv file
            csv << [BillingTransaction.transaction_type, BillingTransaction.payment_method]
        end
    end         

    # save it as 'BillingTransaction.csv'
    send_data csv_string,
    :type => 'text/csv; charset=iso-8859-1; header=present',
    :disposition => "attachment; filename=BillingTransaction.csv" 
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:05:21.653

首先它不应该在`update`方法中，因为它违反了 RESTful 原则。您可以创建一个可以调用的自定义方法`transactions`，或类似的方法。

因为它没有修改任何东西，并且会生成一个 CSV，因此它可以用作 GET 方法。当然，您需要修改路由以使此方法可见。

从参数创建`Date`对象也是一个好主意，例如：

```
@start_date = Date.new(@start_year.to_i, @start_month.to_i, @start_day.to_i)
@end_date = Date.new(@end_year.to_i, @end_month.to_i, @end_day.to_i) 
```

而不是构建字符串。

在`each`块中，您应该添加实际值：

```
@transactions.each do |transaction|
  # each of transactions is inserted into the csv file
  csv << [transaction.transaction_type, transaction.payment_method]
end 
```

`@`最后，对于那些不想在视图中使用的变量，您不需要使用实例变量（以符号为前缀）。

所以这里什么都不需要前缀`@`，

# seo - SEO、Google 网站管理员工具 - 如何为站点地图中的错误 URL 生成 404 抓取错误报告？

> ID：14855272
> 
> 赞同：1
> 
> 时间：2013-02-13T14:00:24.620
> 
> 标签：seo, google-search-console, xml-sitemap

我有一个为大型网站自动生成的站点地图，其中包含许多导致我需要删除的 404 错误的 URL。我需要仅基于站点地图中的 URL 生成报告，而不是由站点上的错误链接引起的抓取错误。我看不到任何过滤抓取错误报告以仅包含这些 URL 的方法。有谁知道我可以实现这一目标的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:56:39.417

我不确定您是否可以通过网站管理员工具轻松完成此操作，但您自己检查它们很简单。这是一个 perl 程序，它将接受站点地图文件并检查每一行，打印每个 url 及其状态。

```
#!/usr/bin/perl
use strict;
require LWP::UserAgent;
my $ua = LWP::UserAgent->new;
while (my $line = <>){
    if ($line =~ /\<loc\>(.*?)\<\/loc\>/){
        my $url = $1;
        my $response = $ua->get($url);
        my $status = $response->status_line;
        $status =~ s/ .*//g;
        print "$status $url\n";
    }
} 
```

我将它保存为 checksitemapstatus.pl 并像这样使用它：

```
$ /tmp/checksitemap.pl /tmp/sitemap.xml 
200 http://example.com/
404 http://example.com/notfound.html 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:58:04.350

WMT 本身没有任何内容。你会想做一些Excel。

1.  下载失效链接列表
2.  获取您的站点地图链接列表。
3.  将它们并排放置。
4.  使用 VLOOKUP 匹配列（[http://www.techonthenet.com/excel/formulas/vlookup.php](http://www.techonthenet.com/excel/formulas/vlookup.php)）
5.  作为奖励，使用一些条件格式可以更容易地查看它们是否匹配。然后，按颜色排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T13:01:30.940

您还可以将 sitemap.xml 导入 A1 网站分析器并让它扫描它们。请参阅：http: [//www.microsystools.com/products/website-analyzer/help/crawl-website-pages-list/](http://www.microsystools.com/products/website-analyzer/help/crawl-website-pages-list/)

之后，您可以通过例如过滤扫描结果。404 响应代码并在需要时将其导出为 CSV。（包括如果想要从它们链接的地方。）

# c# - 用通配符比较字符串

> ID：14855274
> 
> 赞同：2
> 
> 时间：2013-02-13T14:00:34.560
> 
> 标签：c#, string, compare

我需要比较几个字符串。

我有一个可以替换任何数字的通配符“%”（数字可以是任何大小）。

```
string str1 = "STRUCT[1].VARSTRUCT[10].VAR[1]";
string str2 = "STRUCT[%].VARSTRUCT[%].VAR[%]";
string str3 = "STRUCT[%].VARSTRUCT[%].VAR[2]";

CompareStrings(str1, str2); // Should return TRUE;
CompareStrings(str2, str3); // Should return TRUE;
CompareStrings(str1, str3); // SHould return FALSE; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:36:19.900

以下是对包含数字和表示数字的通配符的任意两个字符串执行此操作的方法：

```
 private static bool CompareStrings(string str1, string str2)
    {
        var ar1 = Regex.Matches(str1, @"[\d%]+").Cast<Match>().Select(m => m.Value).ToArray();
        var ar2 = Regex.Matches(str2, @"[\d%]+").Cast<Match>().Select(m => m.Value).ToArray();

        if (ar1.Length != ar2.Length)
            return false;

        // Check wildcards and numbers
        for (int i = 0; i < ar1.Length; i++)
            if (ar1[i] != ar2[i] && ar1[i] != "%" && ar2[i] != "%")
                return false;

        // Remove wildcards and numbers to check the other characters
        if (Regex.Replace(str1, @"[\d%]+", String.Empty) != Regex.Replace(str2, @"[\d%]+", String.Empty))
            return false;

       return true;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:21:01.673

一个非常快速且粗略的示例，说明如何执行此类操作..但它有效

```
class Program
{
    static void Main(string[] args)
    {

        string str1 = "STRUCT[1].VARSTRUCT[10].VAR[1]";
        string str2 = "STRUCT[%].VARSTRUCT[%].VAR[%]";
        string str3 = "STRUCT[%].VARSTRUCT[%].VAR[2]";

        Console.WriteLine("str1 - str2: " + SpecialComparers.AreEqual(str1, str2));
        Console.WriteLine("str2 - str3: " + SpecialComparers.AreEqual(str2, str3));
        Console.WriteLine("str1 - str3: " + SpecialComparers.AreEqual(str1, str3));

    }
}

class SpecialComparers
{
    public static bool AreEqual(String in1, String in2)
    {
        Regex re = new Regex(@"STRUCT\[(\d+|%)\]\.VARSTRUCT\[(\d+|%)\]\.VAR\[(\d+|%)\]");

        var values1 = re.Match(in1).Groups;
        var values2 = re.Match(in2).Groups;

        if (values1.Count != values2.Count) return false;

        for (int i = 1; i <= values1.Count; i++ )
        {
            if (!values1[i].ToString().Equals(values2[i].ToString())
                && !values1[i].ToString().Equals("%")
                && !values2[i].ToString().Equals("%")
            )
                return false;
        }
        return true;
    }
} 
```

# c# - 如何使用 PagedDataSource 获取当前页面？

> ID：14855275
> 
> 赞同：0
> 
> 时间：2013-02-13T14:00:45.060
> 
> 标签：c#, asp.net, umbraco

我正在使用 Umbraco CMS 并尝试制作下一个和上一个按钮来滚动页面/节点的集合。我已设法使总页数正确，但 CurrentPageIndex 始终显示为 0，如何获取页面在我的 PagedDataSource 创建的列表中的位置的 CurrentPageIndex 并增加/减少它以移动到下一个页？

到目前为止我得到的代码是：

ASP.NET：

```
<div class="detail-paging">
<div class="list-paging-control">

    <p><asp:HyperLink runat="server" id="lnkFirstPage">&lt;&lt;</asp:HyperLink></p>

    <p><asp:HyperLink runat="server" id="lnkPrev" OnServerClick="lnkPrev_Click">&lt;</asp:HyperLink></p>

</div>
<div class="list-paging-numbers">

    <p><asp:Label runat="server" ID="lblCurrentScroll"></asp:Label></p>

</div>
<div class="list-paging-control left-marker">

    <p><asp:HyperLink runat="server" id="lnkNext" OnServerClick="lnkNext_Click">&gt;</asp:HyperLink></p>

    <p><asp:HyperLink runat="server" id="lnkLastPage">&gt;&gt;</asp:HyperLink></p>

</div>
<div class="list-paging-text">
    <p><asp:HyperLink runat="server" ID="lnkViewAll" OnClick="ViewAll_Click">View All</asp:HyperLink></p>
</div> 
```

C＃：

```
 private PagedDataSource paging;

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DoDataBind();
    }
}

public int PageNumber
{
    get
    {
        if (ViewState["PageNumber"] != null)
            return Convert.ToInt32(ViewState["PageNumber"]);
        else
            return 0;
    }
    set
    {
        ViewState["PageNumber"] = value;
    }
}

//ALL CODE THAT BINDS DATA FROM UMBRACO
public void DoDataBind()
{
    //Get the parent node.
    Node parent = new Node(1152);

    //Get all the BrandsDetailPage children and order alphabetically.
    IEnumerable<INode> nodes = HelperMethods.GetChildrenOfType(parent, "BrandsDetailPage", true, true).OrderBy(n => n.Name);

    //Pagination
    paging = new PagedDataSource()
    {
        AllowPaging = true,
        DataSource = nodes.ToList(),
        CurrentPageIndex = PageNumber,
        PageSize = 1
    };

    //pageNumber = paging.CurrentPageIndex;

    CreateNavigation();
}

//ALL CODE THAT BINDS DATA FROM UMBRACO

//PAGINATION
public void CreateNavigation()
{
    lblCurrentScroll.Text = PageNumber.ToString();
    lblCurrentScroll.Text += " of ";
    lblCurrentScroll.Text += paging.PageCount;
Node node = new Node(1153);
    string nodeUrl = node.Url;
    lnkViewAll.NavigateUrl = string.Format("{0}?page=All", nodeUrl);
}

protected void lnkPrev_Click(object sender, EventArgs e)
{
    PageNumber--;
    DoDataBind();
}

protected void lnkNext_Click(object sender, EventArgs e)
{
    PageNumber++;
    DoDataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:23:23.880

尝试将 a与 .`<asp:ListView />`一起使用`<asp:DataPager />`。这在大多数情况下简化了分页，并且可以做很多“自动”的事情。请参阅[这篇文章](http://www.codeproject.com/Articles/24065/Paging-ListView-With-DataPager)以获取一个很好的示例。

我在我的 Umbraco 项目中成功地使用了它。如果您需要，也可以覆盖 Datapager 的一些标准功能。

# html - 为什么我的图像无法以全尺寸加载？

> ID：14855281
> 
> 赞同：0
> 
> 时间：2013-02-13T14:01:05.153
> 
> 标签：html, image, html-table, html4

我需要制作基于表格的布局并将表格宽度设为 550 像素。然后我加载了一个原始宽度为 550 像素的图像，但在浏览器上我只有 449 像素。我想全宽。而且我在单元格之间还有额外的空间。

```
<table style="width:550px;margin:0 auto;" cellspacing="0" cellpadding="0" border="0">
            <tr style="margin:0; padding:0;">
                <td style="font-size:12px; line-height: 12px; width: 100%; text-align: right; color:#5A99B1;">Click <b>here</b> for the online version</td>
            </tr>
            <tr>
                <td style="width:100%; height:10px;" cellspacing="0" cellpadding="0">
                    <img style="width: 100%;" src="border-top.png" />
                </td>
            </tr>
            <tr>
                <td style="width:50%; background-color:white;">
                    <img src="brugadalogo.png" />
                </td>
                <td style="width:50%; background-color:white; text-align: right;">
                    <img src="msdlogo.png" />
                </td>
            </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:27:03.530

您的表格列不均匀。您有 3 行，前 2 行有 1 列，最后一行有 2 列。即使你有正确的百分比，最好让它均匀分布。例如让所有 3 行都有或“占用”2 列的空间。

我的意思是，您应该使用`colspan`. 还要从图像中删除宽度，如果你想要它的原始大小，它应该默认得到它。

```
<table style="width:550px;margin:0 auto;" cellspacing="0" cellpadding="0" border="0">
            <tr style="margin:0; padding:0;">
                <td **colspan="2"** style="font-size:12px; line-height: 12px; text-align: right; color:#5A99B1;">Click <b>here</b> for the online version</td>
            </tr>
            <tr>
                <td **colspan="2"** style="height:10px;" cellspacing="0" cellpadding="0">
                    <img src="border-top.png" />
                </td>
            </tr>
            <tr>
                <td style="background-color:white;">
                    <img src="brugadalogo.png" />
                </td>
                <td style="background-color:white; text-align: right;">
                    <img src="msdlogo.png" />
                </td>
            </tr>
        </table> 
```

希望这可以解决您的问题。

# bash - bash脚本简单操作

> ID：14855284
> 
> 赞同：1
> 
> 时间：2013-02-13T14:01:08.660
> 
> 标签：bash

我对 bash 脚本非常陌生，只是想玩一下。

到目前为止，我已经创建了一个包含 2 个 IP 地址和 2 个网络掩码的文件，我已经获得了从该文件中打印地址和网络掩码并计算出地址网络号的代码，我只是想添加更多代码来简单地计算出有多少主机在该网络上，以及有多少其他网络共享相同的网络掩码。

我知道如何在纸上做到这一点，非常简单。

非常基本，我知道，只需要 bash 中的一些简单指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:07:52.493

尝试`ipcalc`在[shell](/questions/tagged/shell "显示标记为“外壳”的问题")中使用：

![ipcalc](../Images/ee660d873d0c59bf8689d9cd60defd3a.png)

# c# - MonoTouch UIButton、UIPickerView 和覆盖只读 InputView

> ID：14855290
> 
> 赞同：2
> 
> 时间：2013-02-13T14:01:23.687
> 
> 标签：c#, ios, xamarin.ios, xamarin

有人可以解释一下我如何创建一个`UIButton`允许我使用 InputView / Accessory 属性（默认情况下它是只读的），就像在这篇文章中一样，但在 MonoTouch 中使用 C#

[http://nomtek.com/tips-for-developers/working-with-pickers/](http://nomtek.com/tips-for-developers/working-with-pickers/)

我已经尝试了无法编译的基础知识-

```
public class CustomUIButton : UIButton
{
    public CustomUIButton()
    {

    }

    public CustomUIButton(RectangleF rect): base(rect)
    {

    }

    public override UIView InputView
    {
        get 
        {
            return base.InputView;
        }

        [ADDED] set { base.InputView = ""; }**
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:04:02.983

您链接到的示例**不**调用它完全实现该属性的基类（在 Objective-C 中）。

C# 不喜欢这样，即你不能覆盖不存在的东西。然而，有几种方法可以解决这个问题。最简单的一种是为 setter 添加一个方法。例如

```
class MyButton : UIButton {
    UIView input_view;

    public override UIView InputView {
        get {
            if (input_view == null)
                return base.InputView;
            return input_view;
        }
    }

    public void SetInputView (UIView view)
    {
        input_view = view;
    }
} 
```

# mongodb - 在 MongoDB 中，如何根据子集合大小查找项目？

> ID：14855294
> 
> 赞同：1
> 
> 时间：2013-02-13T14:01:34.467
> 
> 标签：mongodb, find, size, where

假设我有：

```
> db.users.save({name: 'John', orders:[{price: 10, date: new Date('Feb 2, 2013')}, {price: 5, date: new Date('Feb 14, 2013')}]});
> db.users.save({name: 'Tim', orders:[{price: 15, date: new Date('Jan 27, 2013')}, {price: 5, date: new Date('Feb 8, 2013')}]}); 
```

找到“2013 年 2 月至少有 2 个订单的所有用户”的最佳做法是什么？

我假设我可以使用 $where 运算符并构建一个 JS 函数来完成这项工作，但我担心它会成为我的应用程序的性能杀手。

我还可以为我的用户计算一个新字段：Feb2013OrdersCnt 每次添加订单时都会更新，但我希望更改我的查询中的日期范围（> 2 个订单在 2013-02-01 和 2013-02-09 之间例如）。有没有有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:31:29.400

我要说你可以使用`$size`运算符（[http://docs.mongodb.org/manual/reference/operator/size/](http://docs.mongodb.org/manual/reference/operator/size/)）但是你想要一个带时间括号的数组元素计数，这意味着其中一些元素不会出现您正在寻找的时间。

一种方法是使用聚合框架：

```
db.users.aggregate([
    {$unwind: '$orders'},
    {$match: {'orders.date': {$gte: new Date('01-02-2013'), $lt: new Date('01-03-2013') }}},
    {$group: {_id: '$name', sum_orders: {$sum: 1}}},
    {$match: {sum_orders: {$gte: 2}}}
]) 
```

这应该大致转化为：*2013 年 2 月至少有 2 个订单的所有用户*

希望能帮助到你，

### 编辑

出于性能原因，最好在 之前添加一个日期匹配项，`$unwind`以省略在您寻找的范围内没有订单的客户。

# python - 对应于矩阵上的行和列的数字

> ID：14855295
> 
> 赞同：1
> 
> 时间：2013-02-13T14:01:35.160
> 
> 标签：python, matplotlib, wxpython

![在此处输入图像描述](../Images/7f8bc5b702b62345d29dbadc8dd5461c.png)![在此处输入图像描述](../Images/b73aa4b728ee6c3c6fd68ac5122f1e98.png)

我在matplotlib中创建了这个矩阵，一些坐标是`[(1,109),(2,109),(2,130),(2,131),(2,132)]`等等。我还有一个字母列表 ['A', 'B' 'H', 'A', 'H'] 每个字母对应于矩阵的一行和一列。怎样才能知道，矩阵的每个方格有多大？稍后我想生成一个与矩阵相关的颜色部分，它取决于字母列表。所以第一个 A 与矩阵上的点 (1,109) 有关，所以颜色部分可以说 A 的红色与该行和列对齐，并且与位于那里的正方形一样宽。第二个 B 与 (2,109) 相关，颜色为蓝色，它与该行和该列对齐，并且与位于那里的正方形一样宽

这就是我所得到的颜色，每个颜色部分都适用于特定的点部分，所以当它的大部分是蓝色时，有很大一部分 B 彼此相邻

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:30:18.930

我不确定这是否是您想要的，但我会尝试一下：

```
import matplotlib.pyplot as plt
import numpy as np

data = np.array([(1,1),(2,9),(2,3),(2,1),(2,2)])
letters = ['A', 'B', 'H', 'A', 'H']
colormap = {'A':(1,0,0),'B':(0,0,1),'H':(0,1,0)}

N = data.max() + 5
# color the background white (1 is white)
arr = np.ones((N,N,3))

for (x,y), letter in zip(data,letters):
    # color the point at (x,y) black
    arr[x,y] = (0,0,0)
    # color the x=0 band
    arr[0,y] =  colormap[letter]
    # color the y=N-1 band
    arr[x,N-1] =  colormap[letter]    

arr = arr.swapaxes(0,1)
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)

ax.imshow(arr, interpolation='nearest')
ax.invert_yaxis()
# ax.axis('off')
plt.show() 
```

![在此处输入图像描述](../Images/326169fc59946a6121bd790af7690183.png)

# c++ - 使用模板参数的静态成员模板

> ID：14855300
> 
> 赞同：3
> 
> 时间：2013-02-13T14:01:50.610
> 
> 标签：c++, templates

为什么这段代码不能编译？

```
struct A {
    template <class T>
    static T a(int i) { return 2*i; }
};

template <class T>
struct B {
    double b;
    B(): b(T::a<double>(5)) {}
};

template class B<A>; 
```

编译器甚至没有达到模板实例化。我正在使用 gcc 4.7.0。

```
test.cc: In constructor »B<T>::B()«:
test.cc:9:25: Error: expected »(« before »<« token
test.cc:9:26: Error: expected primary-expression before »double« 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T14:07:35.330

您缺少`template`关键字，因为`a`它是从属名称（或类似名称）。

```
B(): b(T::template a<double>(5)) {} 
```

（你的最后一行应该是`template struct B<A>;`。）

有关血腥的详细信息，请参阅： [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:08:04.337

您必须`template`在方法名称之前放置：

```
B(): b(T::template a<double>(5)) {} 
```

这是因为在`B`解析模板类时，编译器并不知道这`T::a`是一个模板化的方法（因为`T`到那时才指定，`T::a`完全未知），所以它不知道`<double>`应该被解析为模板参数列表.

它也可能意味着并且确实会被解析为：`T::a`小于`double`大于`(0)`。当然，`double`is 不是一个表达式，所以这失败了；因此错误消息。所以编译器*可以*假设你希望它是一个模板化的函数调用。但是你也可以有一个非类型的模板参数，比如一个 int，所以`T::a<42>(5)`可以被解析为`T::a`小于，`42`大于`(5)`，这不是一个模板。但是您希望它被解析为`T::a`带有参数的模板参数列表，`42`然后是带有参数的调用运算符`5`。

要告诉编译器这是一个模板化的函数调用，您必须`template`在函数名之前加上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:10:21.260

编译器对 T 一无所知。因此，每次编写`T::{something}`它时，它都假定它`{something}`是 T 的成员变量或方法。如果不是，则必须告诉它它是什么。`typename`如果您指的是类型而不是变量，您可能知道必须使用的关键字。模板成员也有类似的技巧：

```
template <class T>
struct B {
    double b;
    B(): b(T::template a<double>(5)) {}
}; 
```

现在编译器知道`a`是一个模板，然后是模板参数列表。

# sonarqube - php项目Maven通过maven进行声纳分析的问题

> ID：14855302
> 
> 赞同：0
> 
> 时间：2013-02-13T14:01:53.920
> 
> 标签：sonarqube

我正在尝试通过 php 项目的 maven 进行声纳分析。

我已经按照[http://docs.codehaus.org/display/SONAR/PHP+Plugin](http://docs.codehaus.org/display/SONAR/PHP+Plugin)上提到的所有说明进行了操作，完成了所有必要的设置和提到的更改。

从项目目录执行命令 mvn sonar:sonar 后，我收到以下错误消息。

```
[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (d
        efault-cli) on project espritKM: Can not execute Sonar: PHPMD execution failed w
        ith returned code '255'. Please check the documentation of PHPMD to know more ab
        out this failure. -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:11:33.123

在这种情况下，您应该在调试模式下运行分析（即使用“-X”），以便找到启动了哪个确切的 PHPMD 命令，然后在 shell 中手动运行它以查看发生了什么。

# c# - AvalonEdit 中的双向绑定不起作用

> ID：14855304
> 
> 赞同：10
> 
> 时间：2013-02-13T14:01:54.917
> 
> 标签：c#, wpf, data-binding, dependency-properties, avalonedit

我在基于 WPF 和 MVVM 的项目中使用了 AvalonEdit。阅读[这篇文章后](https://stackoverflow.com/questions/12344367/making-avalonedit-mvvm-compatible)，我创建了以下类：

```
public class MvvmTextEditor : TextEditor, INotifyPropertyChanged
{
    public static DependencyProperty DocumentTextProperty =
        DependencyProperty.Register("DocumentText", 
                                    typeof(string), typeof(MvvmTextEditor),
        new PropertyMetadata((obj, args) =>
        {
            MvvmTextEditor target = (MvvmTextEditor)obj;
            target.DocumentText = (string)args.NewValue;
        })
    );

    public string DocumentText
    {
        get { return base.Text; }
        set { base.Text = value; }
    }

    protected override void OnTextChanged(EventArgs e)
    {
        RaisePropertyChanged("DocumentText");
        base.OnTextChanged(e);
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void RaisePropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

并使用以下 XAML 来使用此控件：

```
<avalonedit:MvvmTextEditor x:Name="xmlMessage">
   <avalonedit:MvvmTextEditor.DocumentText>
      <Binding Path ="MessageXml" Mode="TwoWay" 
               UpdateSourceTrigger="PropertyChanged">
         <Binding.ValidationRules>
            <local:XMLMessageValidationRule />
          </Binding.ValidationRules>
      </Binding>
   </avalonedit:MvvmTextEditor.DocumentText>
</avalonedit:MvvmTextEditor> 
```

但绑定有效`OneWay`，不会更新我的字符串属性，也不会运行验证规则。

如何修复绑定以按预期工作`TwoWay`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T21:27:09.577

WPF 绑定不使用您的`DocumentText`属性；相反，它们直接访问依赖属性的底层值。

您的`OnTextChanged`方法实际上并没有改变底层依赖属性的值。您需要在每次更改时将值复制`base.Text`到依赖属性中：

```
protected override void OnTextChanged(EventArgs e)
{
    SetCurrentValue(DocumentTextProperty, base.Text);
    base.OnTextChanged(e);
} 
```

如果您遵循正确的实施模式，这个问题会更容易看出`DependencyProperty`：该`DocumentText`属性应该使用`GetValue`/`SetValue`方法，而不是访问不同的后备存储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-09T15:41:11.510

即使使用 GetValue 和 SetValue 您也无法在文本更改时让 TextProperty 更新绑定，因此无论如何都必须遵循 Daniel 的回答。

我确实进行了一些更改，以使最终用户更直观地必须将 Text 用作正常和依赖模式：

```
 public new string Text
    {
        get { return (string)GetValue(TextProperty); }
        set { SetValue(TextProperty, value); }
    }

    internal string baseText { get { return base.Text; } set { base.Text = value; } }

    public static DependencyProperty TextProperty =
    DependencyProperty.Register("Text", typeof(string), typeof(MvvmTextEditor),
        // binding changed callback: set value of underlying property
        new PropertyMetadata((obj, args) =>
        {
            MvvmTextEditor target = (MvvmTextEditor)obj;
            if(target.baseText != (string)args.NewValue)    //avoid undo stack overflow
                target.baseText = (string)args.NewValue;
        })
    );

    protected override void OnTextChanged(EventArgs e)
    {            
        SetCurrentValue(TextProperty, baseText);
        RaisePropertyChanged("Text");
        base.OnTextChanged(e);
    } 
```

我必须检查是否已经存在相同的文本以避免撤消堆栈引擎异常。性能方面也很划算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-16T09:58:25.397

我根据上面的答案尝试了代码并稍作修改，因为绑定对我来说两种方式都不起作用。下面的内容应该允许绑定两种方式。

```
 public static readonly DependencyProperty MyContentProperty = DependencyProperty.Register(
        "MyContent", typeof(string), typeof(MyTextEditor), new PropertyMetadata("", OnMyContentChanged));

    private static void OnMyContentChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        var control = (MyTextEditor)sender;
        if (string.Compare(control.MyContent, e.NewValue.ToString()) != 0)
        {
            //avoid undo stack overflow
            control.MyContent = e.NewValue.ToString();
        }
    }

    public string MyContent
    {
        get { return Text; }
        set { Text = value; }
    }

    protected override void OnTextChanged(EventArgs e)
    {
        SetCurrentValue(MyContentProperty, Text);
        base.OnTextChanged(e);
    } 
```

# asp.net - 如何更改隐藏在服务器端的输入值

> ID：14855305
> 
> 赞同：1
> 
> 时间：2013-02-13T14:01:55.790
> 
> 标签：asp.net, hiddenfield

我有一个带有隐藏字段的表单：

```
<form id="Form1" runat="server" style="width: 100%; height: 100%; overflow: hidden"       onsubmit="return false;">
<div>    
<input type="hidden" runat="server" id="TrackColors" value=""/>            
<input type="hidden" runat="server" id="Relogin" value=""/>
</div>
</form> 
```

在服务器端调用 Page_Load() 函数后：

```
protected void SomeFunction()
    {
        Dictionary<int, int> trackColors = new Dictionary<int, int>();
        if (!String.IsNullOrEmpty(TrackColors.Value))
            trackColors = ReadValues(TrackColors.Value);

    //if value is null or empty it's assigned to a different

        TrackColors.Attributes["value"] = FormValues(trackColors); //FormValues() return string

    //change is visible        
    }

    string FormValues(Dictionary<int, int> values)
    {
    string result = "";
    if (values == null || values.Count == 0)
        return result;

    foreach (KeyValuePair<int, int> p in values)
        result += p.Key + "@@" + p.Value + "^^";
    result = result.TrimEnd('^');

    return result;
} 
```

如果我更改 ComboBox 的选定字段，则调用该函数：

```
<dx:ASPxTextBox ID="ColorTrackCarID" Visible="false" Text='<%# Eval("CarId") %>' />
                    <dx:ASPxComboBox ID="ASPxComboBox1" runat="server" SelectedIndex='<%# Eval("TrackColor") %>' 
                                    ValueType="System.String" Width="30" ShowImageInEditBox="true" 
                        ondatabinding="ASPxComboBox1_DataBinding">
                                    <ClientSideEvents SelectedIndexChanged="function (s,e) { 
                                   if (window.TrackColorChanged != null)TrackColorChanged(s,e); }" />
</dx:ASPxComboBox>

function TrackColorChanged(s, e) {
            var TrackColors = document.getElementById('TrackColors');
            if (TrackColors == null || TrackColors.value == "")
                return values;      
            //values is always emply    
        } 
```

我了解表单字段的值不会传递回客户端。问题是：**如何将这些值传回来？**

而如果我在Page_Load()中改变服务器端的值，那么客户端就可以看到一切了，也就是

```
protected void Page_Load(object sender, EventArgs e)
{
TrackColors.Attributes["value"] = "bla-bla-bla";
//All changes are visible on the client-side
} 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:10:31.360

为了使它更容易，用控件替换你的隐藏字段：

```
<asp:HiddenField id="X" runat="server" /> 
```

您可以直接在其上设置值：

```
X.Value = "XYZ"; 
```

该值可以从客户端传递到服务器，反之亦然，并且非常容易工作。并不是说您不能使用服务器端输入，而是 HiddenField 为您处理了很多。

编辑：另外，你确定你没有覆盖这个值吗？如果你这样做：

```
protected void Page_Load(object sender, EventArgs e)
{
TrackColors.Attributes["value"] = "bla-bla-bla";
//All changes are visible on the client-side
} 
```

这将始终将值更改为“bla-bla-bla”。`if (!Page.IsPostback)`如果您在页面加载时对其进行初始化，您可能希望将其包装起来。

# java - 简单的java程序根据它们的值来做树冠簇字符串

> ID：14855306
> 
> 赞同：0
> 
> 时间：2013-02-13T14:01:59.467
> 
> 标签：java, string, cluster-analysis

我想知道如何在java中使用canopy cluster对这个输入进行聚类？

```
 1 access 375
       1 addition 375
       1 advance 375
       1 answered 375
       1 applied 375
       1 approximate 375
       1 evil 375

       1 hiway 375
       1 home 375
       1 hope 375
       1 hotmail 375
       3 town 375
       4 forum 375
       4 good 375
       4 reig 375
       5 plot 375 
```

其中第一列是单词的频率。第二列是单词，第三列是单词总数。

如何进行树冠分类？并想知道什么是阈值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:02:54.340

Canopy 聚类应用于*向量*和*完整的文本*，而不是*单个单词*。

您认为集群是什么？除非你清楚你*期望*一个集群是什么样的，否则你永远不会弄清楚正确的算法是什么。

那么您是否期望像这样的集群：

```
 1 access 375
   1 addition 375
   1 advance 375
   1 answered 375
   1 applied 375
   1 approximate 375 
```

（以a开头的稀有词）？这对你有用吗？

聚类算法不是魔术工具。您需要仔细选择和配置它们以产生您感兴趣的结果。

# asp.net - 减少服务器负载的技术，同时将特定项目搜索和比较为在服务器端创建的大型（10,000 个条目）LIST 对象

> ID：14855310
> 
> 赞同：0
> 
> 时间：2013-02-13T14:02:05.823
> 
> 标签：asp.net, server-side-validation

我想知道，

如果我们在**服务器端创建了****LIST**对象，其中包含大量数据条目，例如员工主数据（**10,000**），并且我想提供搜索选项来搜索**有效**的员工 ID 或姓名。

 ******因此，我尝试将输入的文本与循环中的大条目列表进行比较，这显然会降低性能。

那么有没有更好的性能选择呢？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:51:25.533

尝试这个：

```
public List<Employee> SearchEmployee(string search, int pageNo, int pageLength)
    {
        MasterDataContext db = new MasterDataContext();
        var searchResult = (from e in db.Employess
                            where (search == null || 
                                  e.Name.ToLower().Contains(search.ToLower()))
                            select e).ToList();
        int pageStart = (pageNo - 1) * pageLength;
        var pageResult = from c in searchResult.Skip(pageStart).Take(pageLength)
                         orderby c.CardNo
                         select c;
        return pageResult;
    } 
```

我希望它有所帮助。******

# java - 将生成的 XSLT 中的数据保存到 XML 文件

> ID：14855312
> 
> 赞同：4
> 
> 时间：2013-02-13T14:02:11.500
> 
> 标签：java, xml, xslt, xalan

我在尝试使用 XSLT 将一些数据保存到 XML 时遇到了麻烦。所以问题是一切似乎都很好，没有抛出异常，日志文件也很干净，但是我看不到 XML 文件的任何变化。我不能这是我将输出保存到文件的代码

```
 Transformer transformer = XslTemplatesPool.getTransformer(SAVE_ITEM, realPath);
    setCategoryAndSubcateory(transformer, request);

    String name = request.getParameter(NAME);
    /*retrieving some more parameters*/
    String price = request.getParameter(PRICE);

    transformer.setParameter(NAME, name);
    /*...*/
    transformer.setParameter(XML_PATH, "E:/xslt/WebContent/xml/shop.xml");

    if (price == null) {
        price = "";
    }
    transformer.setParameter(PRICE, price);
    if (notInStock == null) {
        notInStock = "";
    }
    /*
     * out is an instance of PrintWriter
     * PrintWriter out = httpServletResponse.getWriter()
     */
    transformer.setParameter(NOT_IN_STOCK, notInStock);
    executeWrite(out, readWriteLock, transformer);

    protected void executeWrite(PrintWriter out, ReadWriteLock readWriteLock, Transformer transformer) throws HandledException {

    Source xmlSource = new StreamSource("E:/xslt/WebContent/xml/shop.xml");
    StreamResult result = new StreamResult(out);
    Lock writeLock = readWriteLock.writeLock();
    writeLock.lock();

    try {
        transformer.transform(xmlSource, result);
    } catch (TransformerException e) {
        ExceptionHandler.logAndThrow(e, logger);
    } finally {
        writeLock.unlock();
    }
} 
```

从 XSLT 生成的表单 addItem （在这个阶段我需要的每一个信息的和平都很好而且很顺利）我检索了一些数据并尝试使用模板 saveItem 将它添加到一个 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.example.org/products"
xmlns:redirect="http://xml.apache.org/xalan/redirect"
extension-element-prefixes="redirect"
xmlns:validation="xalan://com.xslt.util.Validator"
exclude-result-prefixes="validation redirect">

<xsl:import href="addItem.xsl" />
<xsl:import href="productsList.xsl" />

<xsl:param name="categoryName" />
<xsl:param name="subcategoryName" />
<xsl:param name="name" />
<xsl:param name="producer" />
<xsl:param name="model" />
<xsl:param name="date-of-issue" />
<xsl:param name="color" />
<xsl:param name="not-in-stock" />
<xsl:param name="price" />
<xsl:param name="xmlPath"/>
<xsl:param name="isValid" select="validation:validate($name, $producer, $model, $date-of-issue, $color, $price, $not-in-stock)" />
<xsl:param name="nameError" select="validation:getNameError()" />
<xsl:param name="producerError" select="validation:getProducerError()" />
<xsl:param name="modelError" select="validation:getModelError()" />
<xsl:param name="dateError" select="validation:getDateError()" />
<xsl:param name="priceError" select="validation:getPriceError()" />
<xsl:param name="colorError" select="validation:getColorError()" />

<xsl:template match="/" priority="2">
    <xsl:choose>
        <xsl:when test="not($isValid)">
            <xsl:call-template name="addItem">
                <xsl:with-param name="nameError" select="$nameError" />
                <xsl:with-param name="producerError" select="$producerError" />
                <xsl:with-param name="modelError" select="$modelError" />
                <xsl:with-param name="dateError" select="$dateError" />
                <xsl:with-param name="priceError" select="$priceError" />
                <xsl:with-param name="colorError" select="$colorError" />
                <xsl:with-param name="not-in-stock" select="$not-in-stock" />
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <redirect:write select="$xmlPath">
                <xsl:call-template name="saveItem" />
            </redirect:write>
            <xsl:call-template name="returnToProducts" />
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="saveItem" match="@*|node()" priority="2">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
</xsl:template>

<xsl:template match="/xs:shop/xs:category[@name=$categoryName]/xs:subcategory[@name=$subcategoryName]">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
        <xsl:element name="xs:product">
            <xsl:attribute name="name">
                <xsl:value-of select="$name" />
            </xsl:attribute>
            <xsl:attribute name="producer">
                <xsl:value-of select="$producer" />
            </xsl:attribute>
            <xsl:attribute name="model">
                <xsl:value-of select="$model" />
            </xsl:attribute>
            <xsl:element name="xs:date-of-issue">
                <xsl:value-of select="$date-of-issue" />
            </xsl:element>
            <xsl:element name="xs:color">
                <xsl:value-of select="$color" />
            </xsl:element>
            <xsl:choose>
                <xsl:when test="$not-in-stock">
                    <xsl:element name="xs:not-in-stock" />
                </xsl:when>
                <xsl:otherwise>
                    <xsl:element name="xs:price">
                        <xsl:value-of select="$price" />
                    </xsl:element>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:element>
    </xsl:copy>
</xsl:template>

<xsl:template name="returnToProducts">
    <html>
        <head>
            <meta http-equiv="refresh" content="0;url=controller.do?command=productsList&amp;categoryName={$categoryName}&amp;subcategoryName={$subcategoryName}" />
        </head>
    </html>
</xsl:template>

</xsl:stylesheet> 
```

我的 XML 文件示例

```
<xs:shop xmlns:xs="http://www.example.org/products" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/products shop.xsd">    
<xs:category name="bicycle">
    <xs:subcategory name="frame">
        <xs:product name="Soda FR" producer="NS" model="fr445">
            <xs:date-of-issue>10-05-2012</xs:date-of-issue>
            <xs:color>white</xs:color>
            <xs:price>520$</xs:price>
        </xs:product>
        <xs:product name="Nucleon" producer="Nicolai" model="nc428">
            <xs:date-of-issue>10-05-2012</xs:date-of-issue>
            <xs:color>dark grey</xs:color>
            <xs:not-in-stock/>
        </xs:product>
    </xs:subcategory>
</xs:category>
</xs:shop> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:34:55.393

所以……我终于成功了。还是有一个小bug

> 系统 ID 未知；第 #-1 行；#-1 列；文件过早结束。

但我希望这不是一个很难修复的问题。

正如您在下面看到的，现在将输出流写入 StringWriter，然后将 StringWriter 写入 XML 文件。如果您将文件传递给 StreamResult，我仍然无法理解为什么没有结果（文件刚刚被清除）。可能只是我的手长出了错误的地方。也许明天我会做一点研究。

因此，方法 executeWrite(...) 发生了很大变化

```
 protected void executeWrite(PrintWriter out, ReadWriteLock readWriteLock, Transformer transformer)
        throws HandledException {

    Lock readLock = readWriteLock.readLock();
    StringWriter outWriter = new StringWriter();
    Transformer t = null;
    try {
        readLock.lock();
        StreamSource xmlStream = new StreamSource(/*path to XML*/);
        t = transformer;
        t.transform(xmlStream, new StreamResult(outWriter));
    } catch (TransformerException e) {
        ExceptionHandler.logAndThrow(e, logger);
    } finally {
        readLock.unlock();
    }

    Lock writeLock = readWriteLock.writeLock();
    FileWriter fileWriter = null;
    try {
        writeLock.lock();
        fileWriter = new FileWriter(new File(/*path to XML*/));
        fileWriter.write(outWriter.toString());
    } catch (IOException e) {
        ExceptionHandler.logAndThrow(e, logger);
    } finally {
        if (fileWriter != null) {
            try {
                fileWriter.close();
            } catch (IOException e) {
                ExceptionHandler.logAndThrow(e, logger);
            }
        }
        writeLock.unlock();
    }
} 
```

# html - 如何使 display: table-cell 与我的 CSS 高度相同？

> ID：14855313
> 
> 赞同：2
> 
> 时间：2013-02-13T14:02:13.753
> 
> 标签：html, css

我有以下 HTML：

```
<article id="articlesss" class="container_12 clearfix" style="margin-top: 2em; display: table;">
    <div style="display: table-row">
        <div class="grid_6" style="display: table-cell;">
            <div class="block-border">
                <div style="background-color: red; height: 100px;"></div>
            </div>
        </div>
        <div class="grid_6" style="display: table-cell;">
            <div class="block-border">
                <div style="background-color: red; height: 200px;"></div>
            </div>
        </div>
    </div>
</article> 
```

我正在使用 display: table-row 因为我听说这会使我的 DIV 像表格单元格一样工作，并且我希望 DIV 具有相同的高度。但是，似乎第一个 grid_6 网格的高度很小，而第二个网格的高度至少为 100px。我怎样才能让它填充到相同的高度？

这是一个例子：[小提琴](http://jsfiddle.net/U8GEv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:10:46.330

```
<div class="block-border">
        <div style="background-color: red; height: 100px;"></div> 
```

您已设置第二个元素的高度，即 Height = 100px 。

将高度设置为两个 div 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:54:47.650

两个 grid_6 元素的高度相同。您看到一个红色矩形比另一个大的原因是您正在为内部 div 着色。如果您将颜色放在 grid_6 元素上 - 它们是相同的。[http://jsfiddle.net/A7yXc/](http://jsfiddle.net/A7yXc/)

```
<article id="articlesss" class="container_12 clearfix" style="margin-top: 2em; display: table;">
<div style="display: table-row">
    <div class="grid_6" style="display: table-cell; background-color: red;">
        <div class="block-border">
            <div style="height: 100px;">das</div>
        </div>
    </div>
    <div class="grid_6" style="display: table-cell; background-color: red;">
        <div class="block-border">
            <div style="height: 200px;">das</div>
        </div>
    </div>
</div> 
```

# date - 将字符串时间戳转换为日期会导致重置为 UNIX 纪元

> ID：14855315
> 
> 赞同：22
> 
> 时间：2013-02-13T14:02:18.050
> 
> 标签：date, google-apps-script, datetime-format

我在谷歌应用程序脚本中将字符串转换为日期对象时遇到了一些问题。

我的日期采用以下格式，来自第 3 方 API：

```
2013-01-17T17:34:50.507 
```

我正在尝试将其转换为 Date 对象：

```
return Date(stringDate); 
```

这是被退回的：

```
Thu Jan 01 01:00:00 GMT+01:00 1970 
```

有人可以告诉我我做错了什么，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-05-13T06:24:27.870

使用[moment.js](https://momentjs.com/)，解析任何[ISO 8601 格式](https://en.wikipedia.org/wiki/ISO_8601)就这么简单。

```
var date = Moment.moment("2013-01-17T17:34:50.507").toDate(); 
```

您也可以使用 moment.js 来解析您的任意日期字符串。

要在 GAS 中使用 moment.js，您只需在脚本编辑器中添加它。在 GAS 脚本编辑器中打开您的脚本并转到“资源”然后“库...”，然后输入此项目密钥`MHMchiX6c1bwSqGM1PZiW_PxhMjh3Sh48`并单击“添加”。从下拉列表中选择版本，然后单击“保存”。现在，您已准备好在 GAS 中使用 moment.js。

moment.js 可用于解析日期字符串、创建格式化的日期字符串以及许多其他日期操作。感谢作者！

[您可以在此处](https://momentjs.com/docs/)找到 moment.js 文档。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T14:19:27.327

Date 对象似乎不知道如何处理该日期。日期采用[ISO 8601 格式](http://en.wikipedia.org/wiki/ISO_8601)。如果给定时区信息，Javascript 可以处理日期。

您将不得不进行一些测试，但如果给您的日期是 UTC 时间，那么只需`Z`在调用`new Date()`.

编辑：解析日期时，Apps 脚本日期对象似乎无法处理 UTC 以外的时区。[我为它开了一个问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2426&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-14T13:37:46.927

它在 GScript 中不起作用，至少在我编写它的时候对我来说是这样。这篇文章提供了一个可行的选择：[如何格式化这个日期字符串以便谷歌脚本识别它？](https://stackoverflow.com/questions/11810441/how-do-i-format-this-date-string-so-that-google-scripts-recognizes-it)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-02T23:33:41.357

截至目前`new Date()`似乎工作：

```
var dT = new Date("2013-01-17T17:34:50.507");
console.info("dT: %s or %d", dT, dT.getTime()); 
```

`dT: Thu Jan 17 17:34:50 GMT+01:00 2013 or 1.358440490507E12`在 Google Apps 脚本中返回

# dojo - dojo.data.ItemFileWriteStore：dijit.tree 中的项目参数无效

> ID：14855318
> 
> 赞同：0
> 
> 时间：2013-02-13T14:02:17.910
> 
> 标签：dojo, dijit.tree

在使用 dojo 工具包和`djit.tree`小部件时，我收到以下错误：

```
dojo.data.ItemFileWriteStore: Invalid item argument 
```

在我的 javascript 函数中，它从我的 php 服务器加载 json 格式的数据，并`dijit.tree`使用 a`ItemFileWriteStore` 和 a将其显示在 a 中`ForestStoreModel`。我的json数据如下：

```
{
    "identifier": "id",
    "label": "name",
    "items": [{
        "type": "parent",
        "name": "Adresse des Finanzamts",
        "id": "1020right00",
        "children": [{
            "type": "Leaf",
            "name": "Relationship type: 1:1",
            "id": "Adresse des Finanzamts1:1"
        }, {
            "type": "parent",
            "name": "Left",
            "id": "Adresse des Finanzamts010",
            "children": [{
                "type": "Leaf",
                "name": "Table name: Finanzamtdaten",
                "id": "1014left23432"
            }, {
                "type": "Leaf",
                "name": "Field name: fkFinanzamtAdresse:INTEGER",
                "id": "1018lef423t"
            }]
        }, {
            "type": "parent",
            "name": "Right",
            "id": "Adresse des Finanzamts111",
            "children": [{
                "type": "Leaf",
                "name": "Table name: Adresse",
                "id": "105right234"
            }, {
                "type": "Leaf",
                "name": "Field name: adresseId:INTEGER",
                "id": "106right2223"
            }]
        }]
    }, {
        "type": "parent",
        "name": "Adresse des Mitarbeiters",
        "id": "1013right00",
        "children": [{
            "type": "Leaf",
            "name": "Relationship type: 1:1",
            "id": "Adresse des Mitarbeiters1:1"
        }, {
            "type": "parent",
            "name": "Left",
            "id": "Adresse des Mitarbeiters010",
            "children": [{
                "type": "Leaf",
                "name": "Table name: Mitarbeiter",
                "id": "100left23432"
            }, {
                "type": "Leaf",
                "name": "Field name: fkAdresse:INTEGER",
                "id": "1012lef423t"
            }]
        }, {
            "type": "parent",
            "name": "Right",
            "id": "Adresse des Mitarbeiters111",
            "children": [{
                "type": "Leaf",
                "name": "Table name: Adresse",
                "id": "105right234"
            }, {
                "type": "Leaf",
                "name": "Field name: adresseId:INTEGER",
                "id": "106right2223"
            }]
        }]
    }]
} 
```

代码在服务器端使用`json_encode()`.

```
 var treeObject = dijit.byId("relationStructure");
            treeObject.model.store.clearOnClose = true;
            treeObject.model.store.close();
            var newStore = new dojo.data.ItemFileWriteStore({
                data: data
            });

            treeObject.model.store = newStore;
            treeObject.model.query = {"type": "parent"};
            treeObject.rootId = "root";
            treeObject.rootLabel = "Table content";
            treeObject.childrenAttrs = ["children"];
            treeObject.showRoot = false;

            treeObject.refreshModel(); 
```

现在json数据：

```
 {"identifier":"id","label":"name","items":[{"type":"parent","name":"Finanzamtdaten des Mitarbeiters","id":"1022right000","children":[{"type":"Leaf","name":"Relationship type: 1:1","id":"Finanzamtdaten des Mitarbeiters1:1"},{"type":"parent","name":"Left","id":"Finanzamtdaten des Mitarbeiters0100","children":[{"type":"Leaf","name":"Table name: Mitarbeiter","id":"100left234320"},{"type":"Leaf","name":"Field name: fkFinanzamtdaten:INTEGER","id":"1019lef423t0"}]},{"type":"parent","name":"Right","id":"Finanzamtdaten des Mitarbeiters1110","children":[{"type":"Leaf","name":"Table name: Finanzamtdaten","id":"1014right2340"},{"type":"Leaf","name":"Field name: finanzamtdatenId:INTEGER","id":"1015right22230"}]}]},{"type":"parent","name":"Adresse des Mitarbeiters","id":"1013right001","children":[{"type":"Leaf","name":"Relationship type: 1:1","id":"Adresse des Mitarbeiters1:1"},{"type":"parent","name":"Left","id":"Adresse des Mitarbeiters0101","children":[{"type":"Leaf","name":"Table name: Mitarbeiter","id":"100left234321"},{"type":"Leaf","name":"Field name: fkAdresse:INTEGER","id":"1012lef423t1"}]},{"type":"parent","name":"Right","id":"Adresse des Mitarbeiters1111","children":[{"type":"Leaf","name":"Table name: Adresse","id":"105right2341"},{"type":"Leaf","name":"Field name: adresseId:INTEGER","id":"106right22231"}]}]}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:35:18.930

您的数据存在 id 冲突。有两个具有相同 id 的项目`105right234`和`106right2223`。

```
"dojo.data.ItemFileWriteStore:  The json data provided by the creation arguments 
is malformed.  Items within the list have identifier: [id].  
Value collided: [105right234]" 
```

如果你想让同一个项目在结构中出现两次，那么你需要看看`_reference`结构是如何使用的。

[http://dojotoolkit.org/reference-guide/1.8/dojo/data/ItemFileReadStore.html#input-data-format](http://dojotoolkit.org/reference-guide/1.8/dojo/data/ItemFileReadStore.html#input-data-format)

* * *

您的第二组数据可以很好地加载到商店中。

以下代码对于 Dojo 小部件来说不是很好的做法。

```
treeObject.model.store = newStore;
treeObject.model.query = {"type": "parent"};
treeObject.rootId = "root";
treeObject.rootLabel = "Table content";
treeObject.childrenAttrs = ["children"];
treeObject.showRoot = false; 
```

Dojo 使用 myWidget.set('model', new model); 的约定。这允许自定义设置器逻辑。有关更多信息，请参阅此链接。

[http://dojotoolkit.org/reference-guide/1.8/quickstart/writingWidgets.html#custom-setters-getters](http://dojotoolkit.org/reference-guide/1.8/quickstart/writingWidgets.html#custom-setters-getters)

我创建了另一个使用您的数据并创建树的小提琴。

[http://jsfiddle.net/cswing/5Yjx9/](http://jsfiddle.net/cswing/5Yjx9/)

# wcf - 如何确定 Windows 服务托管的 WCF 地址？

> ID：14855319
> 
> 赞同：1
> 
> 时间：2013-02-13T14:02:19.363
> 
> 标签：wcf

基本上我有一个托管在多个 Windows 服务中的 WCF（在任何人问 IIS 不能用于多个非常正当的原因之前）。我有一个控制应用程序，它允许 Windows 服务以特殊顺序停止/启动/重新启动（具有几个不同的参数）等，但我需要某种方式来了解每个 Windows 服务托管的地址，即一个函数

*   给定地址，例如 [http://me.us.com:8701/MyWCFService/MyWCFConfig](http://me.us.com:8701/MyWCFService/MyWCFConfig)返回服务名称/PID

或者更好

*   给定 PID/服务名称返回托管的地址，例如
    [http://me.us.com:8701/MyWCFService/MyWCFConfig](http://me.us.com:8701/MyWCFService/MyWCFConfig)

关于这些人的任何想法、代码或想法？

提前感谢您抽出宝贵时间，

布赖恩

# c# - 如何使用 c++/cli 在非托管代码中注册 ac# 事件

> ID：14855320
> 
> 赞同：0
> 
> 时间：2013-02-13T14:02:20.207
> 
> 标签：c#, c++, c++-cli

我有一个从 ac# 组件触发的事件，另一个 c++ 组件需要注册此事件并捕获此事件。我使用 C++/CLI 作为中介来访问该组件的其他功能。虽然有一个代码可用于其他方式，但对于其他方式来说却不多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:15:55.567

如果你有一个 C# 类

```
public class Foo
{
    public event EventHandler MyEvent;

    protected virtual void OnMyEvent(EventArgs e)
    {
        EventHandler handler = MyEvent;
        if (handler != null)
        {
            handler(this, e);
        }
    }
} 
```

和一个 C++/CLI 类

```
public ref struct Bar
{
public:
    void handler(System::Object^ sender, System::EventArgs^ e)
    {
    }
} 
```

那么您应该能够添加一个事件监听器，如下所示

```
Foo^ foo = gcnew Foo;
Bar^ bar = gcnew Bar;

foo->MyEvent += gcnew EventHandler(bar, &Bar::handler); 
```

*（未经测试）*

# python - 提高嵌套循环性能

> ID：14855321
> 
> 赞同：5
> 
> 时间：2013-02-13T14:02:28.857
> 
> 标签：python, loops, numpy, nested

我正在 Python 中对 Argon 液体进行分子动力学模拟。我有一个稳定版本正在运行，但是它运行缓慢，超过 100 个原子。我确定瓶颈是以下嵌套的 for 循环。这是从我的 main.py 脚本调用的函数中进行的力计算：

```
def computeForce(currentPositions):
    potentialEnergy = 0
    force = zeros((NUMBER_PARTICLES,3))
    for iParticle in range(0,NUMBER_PARTICLES-1):
        for jParticle in range(iParticle + 1, NUMBER_PARTICLES):
            distance = currentPositions[iParticle] - currentPositions[jParticle]
            distance = distance - BOX_LENGTH * (distance/BOX_LENGTH).round()
            #note: this is so much faster than scipy.dot()
            distanceSquared = distance[0]*distance[0] + distance[1]*distance[1] + distance[2]*distance[2]            
            if distanceSquared < CUT_OFF_RADIUS_SQUARED:
                r2i = 1\. / distanceSquared
                r6i = r2i*r2i*r2i
                lennardJones = 48\. * r2i * r6i * (r6i - 0.5)
                force[iParticle] += lennardJones*distance
                force[jParticle] -= lennardJones*distance
                potentialEnergy += 4.* r6i * (r6i - 1.) - CUT_OFF_ENERGY
return(force,potentialEnergy) 
```

大写字母中的变量是常量，在 config.py 文件中定义。“currentPositions”是一个 3 的粒子数矩阵。

我已经用 scipy.weave 实现了嵌套 for 循环的一个版本，它的灵感来自这个网站：[http](http://www.scipy.org/PerformancePython) ://www.scipy.org/PerformancePython 。

但是，我不喜欢失去灵活性。我对“矢量化”这个 for 循环很感兴趣。我只是不明白它是如何工作的。任何人都可以给我一个线索或一个很好的教程来教这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:35:40.590

以下是我的代码的矢量化版本。对于具有 1000 个点的数据集，我的代码大约比原始代码快 50 倍：

```
In [89]: xyz = 30 * np.random.uniform(size=(1000, 3))

In [90]: %timeit a0, b0 = computeForce(xyz)
1 loops, best of 3: 7.61 s per loop

In [91]: %timeit a, b = computeForceVector(xyz)
10 loops, best of 3: 139 ms per loop 
```

编码：

```
from numpy import zeros

NUMBER_PARTICLES = 1000
BOX_LENGTH = 100
CUT_OFF_ENERGY = 1
CUT_OFF_RADIUS_SQUARED = 100

def computeForceVector(currentPositions):
    potentialEnergy = 0
    force = zeros((NUMBER_PARTICLES, 3))
    for iParticle in range(0, NUMBER_PARTICLES - 1):
        positionsJ =  currentPositions[iParticle + 1:, :]
        distance = currentPositions[iParticle, :] - positionsJ
        distance = distance - BOX_LENGTH * (distance / BOX_LENGTH).round()
        distanceSquared = (distance**2).sum(axis=1)
        ind = distanceSquared < CUT_OFF_RADIUS_SQUARED

        if ind.any():
            r2i = 1\. / distanceSquared[ind]
            r6i = r2i * r2i * r2i
            lennardJones = 48\. * r2i * r6i * (r6i - 0.5)
            ljdist = lennardJones[:, None] * distance[ind, :]
            force[iParticle, :] += (ljdist).sum(axis=0)
            force[iParticle+1:, :][ind, :] -= ljdist
            potentialEnergy += (4.* r6i * (r6i - 1.) - CUT_OFF_ENERGY).sum()
    return (force, potentialEnergy) 
```

我还检查了代码是否产生相同的结果

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:34:03.393

用纯 python 编写类似 MD 引擎的东西会很慢。我会看看 Numba ( [http://numba.pydata.org/](http://numba.pydata.org/) ) 或 Cython ( [http://cython.org/](http://cython.org/) )。在 Cython 方面，我使用 cython 编写了一个简单的 Langevin Dynamics 引擎，可以作为示例来帮助您入门：

[https://bitbucket.org/joshua.adelman/pylangevin-integrator](https://bitbucket.org/joshua.adelman/pylangevin-integrator)

另一个我非常喜欢的选择是使用 OpenMM。有一个 python 包装器允许您将 MD 引擎的所有部分放在一起，实现自定义力等。它还具有针对 GPU 设备的能力：

[https://simtk.org/home/openmm](https://simtk.org/home/openmm)

但总的来说，有很多高度优化的 MD 代码可用，除非您出于某种一般教育目的这样做，否则从头开始编写自己的代码是没有意义的。一些主要代码，仅举几例：

*   NAMD - [http://www.ks.uiuc.edu/Research/namd/](http://www.ks.uiuc.edu/Research/namd/)（免费）
*   Gromacs - [http://www.gromacs.org/](http://www.gromacs.org/)（免费）
*   琥珀 - [http://ambermd.org/](http://ambermd.org/)
*   LAMMPS - [http://lammps.sandia.gov/](http://lammps.sandia.gov/)（免费）
*   HOOMD - [http://codeblue.umich.edu/hoomd-blue/](http://codeblue.umich.edu/hoomd-blue/)（免费）
*   OpenMM - [https://simtk.org/home/openmm](https://simtk.org/home/openmm)（免费）
*   魅力 - [http://www.charmm.org/](http://www.charmm.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T08:13:08.833

只是为了使这篇文章完整，我在 C 代码中添加了我的实现。请注意，您需要导入 weave 和转换器才能使其正常工作。此外，weave 目前仅适用于 python 2.7。再次感谢所有帮助！这比矢量化版本快 10 倍。

```
from scipy import weave
from scipy.weave import converters
def computeForceC(currentPositions):        
    code = """
    using namespace blitz;
    Array<double,1> distance(3);
    double distanceSquared, r2i, r6i, lennardJones;
    double potentialEnergy = 0.;

    for( int iParticle = 0; iParticle < (NUMBER_PARTICLES - 1); iParticle++){
        for( int jParticle = iParticle + 1; jParticle < NUMBER_PARTICLES; jParticle++){
            distance(0) = currentPositions(iParticle,0)-currentPositions(jParticle,0);
            distance(0) = distance(0) - BOX_LENGTH * round(distance(0)/BOX_LENGTH);
            distance(1) = currentPositions(iParticle,1)-currentPositions(jParticle,1);
            distance(1) = distance(1) - BOX_LENGTH * round(distance(1)/BOX_LENGTH);
            distance(2) = currentPositions(iParticle,2)-currentPositions(jParticle,2);
            distance(2) = distance(2) - BOX_LENGTH * round(distance(2)/BOX_LENGTH);
            distanceSquared = distance(0)*distance(0) + distance(1)*distance(1) + distance(2)*distance(2);
            if(distanceSquared < CUT_OFF_RADIUS_SQUARED){
                r2i = 1./distanceSquared;
                r6i = r2i * r2i * r2i;
                lennardJones = 48\. * r2i * r6i * (r6i - 0.5);
                force(iParticle,0) += lennardJones*distance(0);
                force(iParticle,1) += lennardJones*distance(1);
                force(iParticle,2) += lennardJones*distance(2);
                force(jParticle,0) -= lennardJones*distance(0);
                force(jParticle,1) -= lennardJones*distance(1);
                force(jParticle,2) -= lennardJones*distance(2);
                potentialEnergy += 4.* r6i * (r6i - 1.)-CUT_OFF_ENERGY;

                }

            }//end inner for loop
    }//end outer for loop
    return_val = potentialEnergy;

    """
    #args that are passed into weave.inline and created inside computeForce
    #potentialEnergy = 0.
    force = zeros((NUMBER_PARTICLES,3))

    #all args
    arguments = ['currentPositions','force','NUMBER_PARTICLES','CUT_OFF_RADIUS_SQUARED','BOX_LENGTH','CUT_OFF_ENERGY']
    #evaluate stuff in code
    potentialEnergy = weave.inline(code,arguments,type_converters = converters.blitz,compiler = 'gcc')    

    return force, potentialEnergy 
```

# java - maven-jar-plugin 文件过滤器

> ID：14855322
> 
> 赞同：1
> 
> 时间：2013-02-13T14:02:33.350
> 
> 标签：java, maven, maven-jar-plugin

我有一个 perl 文件，`src/main/java/com/pac/report.pl`我想将其打包为 jar 文件中的类的一部分。

使用 maven`maven-jar-plugin`包含指令，我在下面尝试过以及我从网上提取的各种其他建议，但没有将 perl 文件复制为 jar 文件中我的类的一部分。有谁知道我做错了什么。

```
<plugin>
 <artifactId>maven-jar-plugin</artifactId>
 <version>2.4</version>
  <configuration>
    <includes>
     <include>**/*</include>
     </includes>
  </configuration>
 </plugin> 
```

**编辑**

另外让我指出，由于遗留调用和依赖原因，我不想将文件放在资源目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:04:18.660

那是因为打包到你的*jar*中的类不是从*src*获取的，而是从 target （特别是`/target/classes`）获取的，编译器完全忽略了你的非 java 文件。

尝试将文件放入`src/main/resources/com/pac/report.pl`其中，它应该被打包到 jar 中（相对路径为`/com/pac/report.pl`），因为这是资源插件在 jar 插件运行之前查找要添加到 /target 的其他文件的默认位置。

**编辑**- 或者，如果您不想/不能按照 maven 期望的方式执行此操作，您可以手动[将资源插件的执行绑定](http://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html)到生命周期以获取您的文件并将其复制到目标。像这样的东西：

```
<build>
    <plugins>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.6</version>
        <executions>
          <execution>
            <id>copy-resources</id>
            <phase>compile</phase> <!-- or later -->
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>${basedir}/target/classes</outputDirectory>
              <resources>          
                <resource>
                  <!-- path to your *.pl file here -->
                </resource>
              </resources>              
            </configuration>            
          </execution>
        </executions>
      </plugin>
    </plugins>
    ...
  </build> 
```

# json - clojure 循环遍历 json 数据

> ID：14855324
> 
> 赞同：2
> 
> 时间：2013-02-13T14:02:53.693
> 
> 标签：json, loops, clojure

我在循环中解析 json 数据时遇到问题。我是 clojure 初学者，需要一些提示来循环遍历 json 数据。

数据如下所示：

```
{"photoset" {"primary" "8455893107", "total" "2", "pages" 1, "perpage" 500, "page" 1, 
"per_page" 500, "photo" 

[{"id" "8455893107", "secret" "1a3236df06", "server" "8087", 
 "farm" 9, "title" "IMG_0137", "isprimary" "1"} 

{"id" "8469482476", "secret" "4c1bf59214",
 "server" "8235", "farm" 9, "title" "HippieBus", "isprimary" "0"}]

, "owner" 
 "93029076@N07", "id" "72157632724688181", "ownername" "clojureB5"}, "stat" "ok"} 
```

我想要做的是循环浏览两张照片并使用 id 和农场值构建一个新的 url，如[http://www.flickr.com/farm/id](http://www.flickr.com/farm/id)

我知道我可以得到这样的一个值：

```
(-> (get-in (cheshire.core/parse-string (:body picList)) ["photoset" "photo"]) first (get "id")) 
```

但是我现在可以循环遍历它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:38:49.860

您可以简单地使用`map`.

```
(->> (get-in data ["photoset" "photo"])
     (map #(str "http://www.flickr.com/" (get % "farm") "/" (get % "id")))) 
```

它将产生以下列表：

> （“ [http://www.flickr.com/9/8455893107”“http://www.flickr.com/9/8469482476](http://www.flickr.com/9/8455893107) ” [）](http://www.flickr.com/9/8469482476)

# mysql - 哪一种是为单个字段存储多个值的最佳方法？逗号分隔或单独的表格

> ID：14855325
> 
> 赞同：4
> 
> 时间：2013-02-13T14:02:54.277
> 
> 标签：mysql, database, csv, database-normalization

我想存储用户关注者和关注成员列表。现在为了做到这一点，我正在考虑在 USER 表中创建两列，即 FOLLOWING 和 FOLLOWER，以分别存储以下和关注者的逗号分隔值。

```
USER TABLE FIELDS:

userid
firstname
lastname
date_of_birth
following   //in this we store multiple following_id as comma separated
follower    //in this we store multiple follower_id as comma separated 
```

另一种方法是创建表，即 FOLLOWER 和 FOLLOWING 来存储用户的关注者和关注成员的 ID。

```
USER TABLE FIELDS:

userid
firstname
lastname
date_of_birth 
```

和

```
FOLLOWER TABLE FIELDS:

userid
follower_id (also is an user) 
```

和

```
FOLLOWING TABLE FIELDS:

userid
following_id (also is an user) 
```

由于我正在学习数据库设计，因此我没有足够的知识。所以，在这里我没有正确了解哪种方式是正确的？我已经搜索过使用逗号分隔的方式不是一个好主意，但同时它是使用 NF 拥有多个表的好方法吗？使用 JOINS 有什么缺点吗？或者有没有其他有效的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:06:38.773

您只需要*两张*表 - 一张列出您的`users`，一张列出每个用户是谁`following`。

生成的表格将类似于您的第二个建议，除了该`followers`表格是不必要的，因为所有必需的数据都已经在`following`表格中 - 它只是从第二列而不是第一列键入。该表将需要*两*列上的索引。

该表*每个方向*`following`每个关系应该有一行。如果用户互相关注，您将在表中放置*两个*条目。**`following`**

 **```
CREATE TABLE following (
    userid ... NOT NULL,
    following_id ... NOT NULL
);

CREATE INDEX idx_user ON following(userid);
CREATE INDEX idx_following on following(following_id);
CREATE UNIQUE INDEX idx_both ON following (userid, following_id); // prevents duplicates 
```

要查找特定用户关注的 ID：

```
SELECT following_id FROM following WHERE userid = ? 
```

或查找该用户的关注者：

```
SELECT userid FROM following WHERE following_id = ? 
```

如果需要，请使用适当`JOIN`的子句来扩展这些查询以返回用户名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:03:56.790

以上都不是。***每个追随者***一行。规范化您的数据并轻松使用它。像你提议的那样把它变成一个抽象的混乱，随着你的应用程序的增长，你的生活将变得越来越艰难。**

# json - 将大型 JSON 对象存储为 JSON 还是字符串？

> ID：14855327
> 
> 赞同：1
> 
> 时间：2013-02-13T14:02:59.830
> 
> 标签：json, performance, mongodb

我有大量的 JSON 文档，我愿意将它们存储在 MongoDB 中。

但是，鉴于我只搜索和检索少数字段，我想从性能方面考虑哪种方式会更好。

一种选择是将大对象存储为 JSON/BSON，这样文档将如下所示：

```
{
    "key_1": "Value1",
    "key_2": "Value2",
    "external_data": {
        "large": {
            "data": [
                "comes",
                "here"
            ]
        }
    }
} 
```

或者，

```
{
    "key_1": "Value1",
    "key_2": "Value2",
    "external_data": '{"large":{"data":["comes","here"]}}'
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:08:36.617

我相信将数据存储在 BSON 中既能提高性能又能节省空间。这样你就可以在未来“投资”：如果你现在将数据存储为 BSON，那么如果出现这样的要求，以后就可以对它进行 db-query。

但是无论如何，如果您关心的是性能 - 您确实必须在生产环境中对其进行分析，没有办法说“它会更快与否”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:57:48.860

有趣的问题，所以我不厌其烦地检查它。

排序答案在写入中没有显着的性能差异，
这里是我使用 pymongo 驱动程序测试它的代码以及结果：

```
    docdict=dict(zip (["key" + str(i) for i in range (1,101)],[ "a"*i for i in range(1,101)]))
    docstr=str(docdict)
    def addIdtoStr(s,id):return {'_id':id,'payload':s}
    def addIdtoDict(d,id): d.update({'_id':id});return d
    cProfile.run("for i in range(0,100000):x=dbcl.client.tests.test2.insert(addIdtoDict(docdict,i),w=0,j=0)")
     **12301152 次函数调用（12301128 次原始调用）在 56.089 秒内**
    dbcl.client.tests.test2.remove({},multi=True)
    cProfile.run("for i in range(0,100000):x=dbcl.client.tests.test2.insert(addIdStr(docstr,i),w=0,j=0)")
     **12201194 次函数调用（12115631 次原始调用）在 54.665 秒内**

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:59:38.703

MongoDB 是一种 BSON 文档存储，而不是 JSON 存储。MongoDB 不能直接查询 JSON。

这是您的想法中的一个基本缺陷，如果您希望以可以使用索引等的高性能方式查询该文档中的任何内容，您将希望将其存储为 BSON 文档而不是 BSON 文档中的 JSON 字符串。

但是，如果您要使用：

```
{
    "key_1": "Value1",
    "key_2": "Value2",
    "external_data": '{"large":{"data":["comes","here"]}}'
} 
```

而且您只需要查询`key_1`，`key_2`您实际上会发现 JSON 不仅在这里更节省空间，而且更易于存储，它是一个字符串（只要该字段上没有索引）。

# php - powershell - 使用 php 远程执行 cmdlet

> ID：14855329
> 
> 赞同：1
> 
> 时间：2013-02-13T14:03:00.447
> 
> 标签：php, powershell, powershell-2.0, powershell-remoting, powershell-3.0

我需要获取简单监控工具的服务状态。在本地获取状态没有问题，但是当我尝试像这样在远程计算机上获取服务状态时：

```
<?php 
$output = shell_exec('powershell.exe "(get-service Webclient -computername server1).Status"');
echo "Webclient:  $output ";
?> 
```

我什么都得不到。server1 上的 WinRM 设置为接收请求并允许远程访问。远程 server1 上的 Get-Service 在控制台窗口中运行良好。

这有效（本地）：

```
<?php 
$output = shell_exec('powershell.exe "(get-service Webclient).Status"');
echo "Webclient:  $output ";
?> 
```

我试图将 shell_exec 更改为 exec 或 system，但没有任何效果。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T07:20:07.307

我目前正在尝试做同样的事情，这段代码非常有帮助。谢谢你。虽然我想到了您的问题，但可能是您需要允许脚本在远程服务器上运行。

# android - 按下按钮时在android中做FullScreen Activity

> ID：14855332
> 
> 赞同：1
> 
> 时间：2013-02-13T14:03:09.503
> 
> 标签：android, android-activity, fullscreen, android-fullscreen

我有一个我想要的活动，当按下菜单中的一个选项以使该活动成为全屏时，当按下菜单中的其他选项回到正常活动时。考虑到我停止了景观布局，如何在代码中执行此操作

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:06:31.357

> 我有一个我想要的活动，当按下菜单中的一个选项以使该活动成为全屏时，当按下菜单中的其他选项回到正常活动时。考虑到我停止了景观布局，如何在代码中执行此操作

我认为你的目标是不可能的，因为它只能完成，而且必须在`onCreate()`这样的方法中调用：

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   requestWindowFeature(Window.FEATURE_NO_TITLE);
   getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
   setContentView(R.layout.main);
} 
```

或通过`XML`

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:08:16.307

您可能只需`recreate()`在您的`Activity`. 这是否是一个好主意，完全是另一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:11:40.650

尝试使用 Android API 中的窗口类 -

requestWindowFeature(Window.FEATURE_NO_TITLE)

# php - PHP 的 XML 字符编码问题

> ID：14855340
> 
> 赞同：4
> 
> 时间：2013-02-13T14:03:43.607
> 
> 标签：php, xml, character-encoding

我有创建 XML 的代码，我唯一的问题是 á、olá 和 ção 等单词的编码。
这些字符显示不正确，当我尝试读取 XML 时，我收到与该字符相关的错误。

```
$dom_doc = new DOMDocument("1.0", "utf-8");
$dom_doc->preserveWhiteSpace = false;
$dom_doc->formatOutput = true;
$element = $dom->createElement("hotels");

while ($row = mysql_fetch_assoc($result)) {

$contact = $dom_doc->createElement( "m" . $row['id'] );

$nome = $dom_doc->createElement("nome", $row['nome'] );

$data1 = $dom_doc->createElement("data1", $row['data'] );
$data2 = $dom_doc->createElement("data2", $row['data2'] );

$contact->appendChild($nome);
$contact->appendChild($data1);
$contact->appendChild($data2);

$element->appendChild($contact);
$dom_doc->appendChild($element); 
```

我可以改变什么来解决我的问题，我使用的是 utf-8 ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:28:08.540

请尝试在脚本中直接输入“á”、“olá”或“ção”。

```
$data1 = $dom_doc->createElement("data1", 'ção'); 
```

如果您没有问题，这可能是您从 mysql 获得的数据编码错误。你确定你的mysql输出正确的UTF-8吗？

要知道这一点，请让您的 PHP 将您的数据转储到 HTML 文档中，并将元标记设置为 UTF-8，并查看字符是否正确显示。

您也可以致电：

```
$data1 = $dom_doc->createElement("data1", mb_detect_encoding($row['data'])); 
```

并查看 PHP 为您的数据检测到什么编码。

如果您无法转换数据库中的数据或更改其设置，您可以使用**mb_convert**即时进行：[http ://www.php.net/manual/en/function.mb-convert-编码.php](http://www.php.net/manual/en/function.mb-convert-encoding.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:05:48.410

您正在使用 utf-8，即 8 位 unicode 编码格式。即使它正确支持 Unicode 中的所有 1,112,064 个代码点，这里也可能存在问题。
尝试 UTF-16 作为标准，只是一个想法。见下文：

```
$dom_doc = new DOMDocument("1.0", "utf-16"); 
```

或者

```
$dom_doc = new DOMDocument("1.0", "ISO-10646"); 
```

# objective-c - 我在 Objective-C 中遇到了矩阵问题

> ID：14855342
> 
> 赞同：-3
> 
> 时间：2013-02-13T14:03:50.727
> 
> 标签：objective-c, c, math, matrix

此代码适用于将矩阵 a 和矩阵 b 发送到 matrixMultiply 方法的乘法 2 矩阵。

但我在“matrix12[i][j] += matrix1[i][k] * matrix2[k];”这一行遇到了麻烦

```
double **matrixMultiply(double *matrix1,double *matrix2,int row1,int col1,int col2){

    double **matrix12 = malloc(sizeof(double*)*row1);
    for (int i=0; i<row1; i++){
        matrix12[i] = malloc(sizeof(double*)col2);

        for (int j=0; j<col2; j++){
            matrix12[i][j] = 0.0;

            for (int k=0; k<col1; k++){
                matrix12[i][j] += matrix1[i][k] * matrix2[k]; //invalid operands to binary expression
            }
        }
    }
    return matrix12;
}

double *kmult = *matrixMultiply(a, b, 4, 4, 4,); 
```

Ps.这段代码在 ViewController.m 中声明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:33:41.033

你确定 Matrix1 是一个二维矩阵吗？它是在一维矩阵中声明的： double *matrix1 而不是 "double **matrix1" 这可能就是为什么行 matrix12[i][j] += matrix1[i][k] * matrix2[k]; 不起作用。

# php - 从给定数组中 id 的数据库中选择

> ID：14855347
> 
> 赞同：1
> 
> 时间：2013-02-13T14:03:59.137
> 
> 标签：php, mysql, arrays

我正在尝试从 mysql 数据库中的表中选择元素，其中行的 id 在给定数组中。

这将返回值：

```
<?php
     $ids = '1,2,3,4';
     $DBH = ....
     $getID = $DBH->prepare("SELECT * FROM t1 WHERE id IN ($ids)");
     $getID->execute();
?> 
```

这不返回任何内容：

```
<?php
     $ids = '1,2,3,4';
     $DBH = ....
     $getID = $DBH->prepare("SELECT * FROM t1 WHERE id IN (:ids)");
     $getID->execute(array(':ids'=>$ids));
?> 
```

我无法理解该代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:21:40.063

在第一个中，您在与数据库通信之前使用 PHP 进行字符串插值；实际上，使用 PHP 变量生成 SQL 代码。这就是 SQL 注入的来源——数据库不知道数据和代码之间的区别，因此它无法保护您免受“数据”泄漏到“代码”空间中。第二，你使用绑定参数，告诉数据库“请把 :ids 作为一个 SINGLE VALUE 处理，后面我会告诉你它的内容”。解决断开连接的一种简单方法是：

```
$sql = 'SELECT * from t1 where id in (' . str_repeat('?', count($ids)) . ')';
$stmt = $pdo->prepare($sql);
$stmt->execute($ids); 
```

查看[本](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)教程以了解有关这些要点的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:14:29.680

假设您正在使用 PDO，请尝试以下操作。

```
<?php
     $ids = '1,2,3,4';
     $DBH = ....
     $getID = $DBH->prepare("SELECT * FROM t1 WHERE id IN (:ids)");
     $getID->bindParam(":ids", $ids, PDO::PARAM_INT);
     $getID->execute();
?> 
```

执行原始查询时，PDO 将转义您的输入，因此您的查询看起来像

`SELECT * FROM t1 WHERE id IN ("1,2,3,4")`

当您告诉 PDO 绑定为整数时，它将执行

`SELECT * FROM t1 WHERE id IN (1,2,3,4)`

# wordpress - Wordpress：pre_get_posts 和按分类术语排序

> ID：14855352
> 
> 赞同：1
> 
> 时间：2013-02-13T14:04:09.070
> 
> 标签：wordpress, custom-taxonomy

我有一个带有自定义分类“客户”的类别档案。现在我想按自定义分类的术语（客户名称）订购类别存档。我尝试通过 meta_value 和高级自定义分类查询来查询它，但我无法按分类术语的名称对其进行排序。有什么建议可以获得按分类术语名称排序的 Wordpress 循环吗？见行 $query->set( 'orderby', 'how_to_order_by_taxonomy_name' );

**注册分类**

```
add_action( 'init', 'jp_register_project_taxonomies', 0 );
function jp_register_project_taxonomies() {

    // register taxonomy to hold our clients
    register_taxonomy(
        'client',
        array( 'post' ),
        array(
            'hierarchical' => false,
            'public' => true,
            'query_var' => true,
            'rewrite' => true,
            'labels' => array(
                'name'                => _x( 'Clients', 'taxonomy general name' ),
                'singular_name'       => _x( 'Client', 'taxonomy singular name' ),
                'search_items'        => __( 'Search Clients' ),
                'all_items'           => __( 'All Clients' ),
                'edit_item'           => __( 'Edit Client' ), 
                'update_item'         => __( 'Update Client' ),
                'add_new_item'        => __( 'Add New Client' ),
                'new_item_name'       => __( 'New Client Name' ),
                'menu_name'           => __( 'Client' )
            ),
        )
    );
} 
```

**pre_get_posts 查询**

```
add_action( 'pre_get_posts', 'jp_project_taxonomy_queries' );

function jp_project_taxonomy_queries( $query ) {

    if(!is_admin() && $query->is_main_query() && is_category() ):

        if (get_query_var('poby') == 'client'):

            $taxonomies = array();
            $tax_order = (get_query_var('po') == 'DESC' ?  'DESC' : 'ASC' );

            foreach (get_terms('client', array('order' => $tax_order)) as $tax ) {
                $taxonomies[] = $tax->name;
            }

            $taxquery = array(
                array(
                    'taxonomy' => 'client',
                    'terms' => $taxonomies,
                    'field' => 'slug',
                )
            );

            $query->set( 'tax_query', $taxquery );
            $query->set( 'orderby', 'how_to_order_by_taxonomy_name' );

        endif;

    endif;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-24T07:30:56.130

据我所知，[没有参数可以`WP_Query`按 term](https://developer.wordpress.org/reference/classes/wp_query/#order-orderby-parameters)排序。

我对这个问题的解决方案通常是创建一个包含术语名称或术语 slug 的元字段。此字段是在使用挂钩[`save_post`](https://developer.wordpress.org/reference/hooks/save_post/)或保存帖子时创建的[`save_post_{post_type}`](https://developer.wordpress.org/reference/hooks/save_post_post-post_type/)。

例如，要按出版年份（分类日期）排序书籍列表（帖子类型书籍），我们可以使用此函数创建元字段：

```
add_action( 'save_post_book', 'prefix_save_date_as_meta', 10 );
function prefix_save_date_as_meta ($post_id) { 
    $years = get_the_terms($post_id,'date');

    if( empty($years) )
        return;

    $years_list = wp_list_pluck($years,'name');

    update_post_meta($post_id,'_book_date',$years_list[0]);

    return;
} 
```

以及用于订购查询的其他功能：

```
add_filter( 'pre_get_posts', 'prefix_custom_args_for_loops' );
function prefix_custom_args_for_loops( $query ) {
    if ( !is_admin() && is_post_type_archive('book') && $query->is_main_query() ) {
        $query->set( 'orderby','meta_value_num');
        $query->set( 'meta_key','_book_date');
    }
    return $query;
} 
```

# iphone - 打开简历 cv::neon_cvtColorBGRA2GRAY 问题

> ID：14855354
> 
> 赞同：1
> 
> 时间：2013-02-13T14:04:13.637
> 
> 标签：iphone, ios, opencv

我正在转换卡通图像，我的应用程序在模拟器中运行良好。并且期望的输出即将到来，但问题是当我在设备上运行我的应用程序时，它会在下一行出现错误。

```
if TARGET_IPHONE_SIMULATOR
            cv::cvtColor(bgr, gray, CV_BGRA2GRAY);
else
            cv::neon_cvtColorBGRA2GRAY(bgr, gray);// got error in this line
endif 
```

错误：命名空间 cv 中没有成员名称 neon_cvtColorBGRA2GRAY

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:10:08.870

这个函数不是 OpenCV 的一部分。它必须已手动编码到 cv 命名空间。话虽如此，您将需要提供实现该功能的代码。快速搜索后，似乎这就是您想要的：

[https://github.com/BloodAxe/OpenCV-Tutorial/blob/master/OpenCV%20Tutorial/cvneon.cpp](https://github.com/BloodAxe/OpenCV-Tutorial/blob/master/OpenCV%20Tutorial/cvneon.cpp)

只需从这个 repo 中获取这个 .cpp 文件和相应的 .h 文件，然后将它们添加到您的项目中。

# gnuplot - 绘制一些行数据的循环和

> ID：14855355
> 
> 赞同：0
> 
> 时间：2013-02-13T14:04:18.980
> 
> 标签：gnuplot

我有一个存储给定时间戳 k 值的数据文件。

前任：

```
 # data.dat
# Example for k = 3    
# Time ID value
1  0 1.555
1  1 1.76
1  2 12.56
2  0 1.75
2  1 2.04
2  2 13.04
3  0 2.01
3  1 0.52
3  2 12.99
# ... 

```

我可以单独打印每个 ID 与时间的数据，如下所示：

```
 set xrange [0:4]
set yrange[0:14]
set xtics 1
plot "data.dat" every 3    using 1:3 title "ID=0" with lp, \
     ""         every 3::1 using 1:3 title "ID=1" with lp, \
     ""         every 3::2 using 1:3 title "ID=2" with lp 

```

然而，我有兴趣绘制 3 个值的平均总和与时间的关系。当然，我可以重新生成一个新的数据文件，其中包含（带有评估的总和）：

```
 # avg_data.dat modified to 
# Example for k = 3    
# Time ID value
1  (1.555+1.76+12.56)/3
2  (1.75+2.04+13.04)/3
3  (2.01+0.52+12.99)/3
# ... 

```

但是，当然，我正在寻求一种自动化的方式来`data.dat`直接使用文件在 gnuplot 中表达这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:36:17.477

[从gnuplot 网站上的运行平均值演示中获得](http://gnuplot.sourceforge.net/demo_4.4/data_feedback.html)一些灵感：

```
k = 3

back1 = back2 = back3 = 0 

shifter(x) = (back3 = back2, back2 = back1, back1 = x)
avger(x,y) = (shifter(x), y == k - 1 ? (back1 + back2 + back3)/3 : 1/0)

plot 'data.dat' u 1:(avger($3, $2)) with points pt 7 
```

这在 gnuplot 4.6.1 中对我有用。如果您想将每个时间步的点连接成一条线，最好对数据进行预处理，因为 gnuplot 通常不会连接由表达式评估产生的点（请参阅[此处](https://stackoverflow.com/questions/7600048/gnuplot-missing-data-with-expression-evaluation)和[此处](https://superuser.com/questions/440947/in-gnuplot-how-to-plot-with-lines-but-skip-missing-data-points)的讨论，以及 gnuplot 文档为`set datafile missing`）。

# python - 从 PYQT 中的现有 GUI 打开新 GUI 会冻结 GUI

> ID：14855361
> 
> 赞同：0
> 
> 时间：2013-02-13T14:04:36.940
> 
> 标签：python, pyqt

主要想法是在从主 GUI 中单击按钮时调用进度条（子 GUI）。在主 GUI 上单击“创建”按钮后，会出现以下 3 个问题：

1.  有时它无法执行
2.  有时“取消”按钮不会出现在子 GUI 上
3.  如果上述两个都顺利，那么我无法单击取消按钮。

我有以下无法执行的代码。下面的代码是有人可以复制粘贴并执行的实际代码

```
import sys
try:
    from PyQt4 import QtCore, QtGui
except:
    pass

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_dialog_progress(object):
    def setupUi(self, dialog_progress):
        dialog_progress.setObjectName("dialog_progress")
        dialog_progress.resize(401, 165)
        self.gridLayout = QtGui.QGridLayout(dialog_progress)
        self.gridLayout.setObjectName("gridLayout")
        self.lblFileName = QtGui.QLabel(dialog_progress)
        self.lblFileName.setText("")
        self.lblFileName.setObjectName("lblFileName")
        self.gridLayout.addWidget(self.lblFileName, 0, 0, 1, 2)
        self.pbarFileSize = QtGui.QProgressBar(dialog_progress)
        self.pbarFileSize.setProperty("value", 0)
        self.pbarFileSize.setObjectName("pbarFileSize")
        self.gridLayout.addWidget(self.pbarFileSize, 1, 0, 1, 2)
        self.label_2 = QtGui.QLabel(dialog_progress)
        self.label_2.setObjectName("label_2")
        self.gridLayout.addWidget(self.label_2, 2, 0, 1, 1)
        self.pbarTotal = QtGui.QProgressBar(dialog_progress)
        self.pbarTotal.setProperty("value", 0)
        self.pbarTotal.setObjectName("pbarTotal")
        self.gridLayout.addWidget(self.pbarTotal, 3, 0, 1, 2)
        self.lblTotal = QtGui.QLabel(dialog_progress)
        self.lblTotal.setText("")
        self.lblTotal.setObjectName("lblTotal")
        self.gridLayout.addWidget(self.lblTotal, 4, 0, 1, 2)
        spacerItem = QtGui.QSpacerItem(213, 20, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Minimum)
        self.gridLayout.addItem(spacerItem, 6, 0, 1, 1)
        spacerItem1 = QtGui.QSpacerItem(20, 5, QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Expanding)
        self.gridLayout.addItem(spacerItem1, 5, 1, 1, 1)
        self.btnPbarCancel = QtGui.QPushButton(dialog_progress)
        self.btnPbarCancel.setObjectName("btnPbarCancel")
        self.gridLayout.addWidget(self.btnPbarCancel, 6, 1, 1, 1)

        self.retranslateUi(dialog_progress)
        QtCore.QMetaObject.connectSlotsByName(dialog_progress)

    def retranslateUi(self, dialog_progress):
        dialog_progress.setWindowTitle(QtGui.QApplication.translate("dialog_progress", "Dialog", None, QtGui.QApplication.UnicodeUTF8))
        self.label_2.setText(QtGui.QApplication.translate("dialog_progress", "Total:", None, QtGui.QApplication.UnicodeUTF8))
        self.btnPbarCancel.setText(QtGui.QApplication.translate("dialog_progress", "Cancel", None, QtGui.QApplication.UnicodeUTF8))

class ProgressDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent = None)
        self.ui = Ui_dialog_progress()
        self.ui.setupUi(self)
        self.setWindowModality(QtCore.Qt.ApplicationModal)
        signal = QtCore.SIGNAL("clicked()")
        self.ui.btnPbarCancel.connect(self.ui.btnPbarCancel, signal, self.abort)

    def abort(self):
        print "abc"
        pass

class Ui_dialog_file(object):
    def setupUi(self, dialog_file):
        dialog_file.setObjectName(_fromUtf8("dialog_file"))
        dialog_file.resize(101, 59)
        self.btnCreate = QtGui.QPushButton(dialog_file)
        self.btnCreate.setGeometry(QtCore.QRect(10, 20, 77, 25))
        self.btnCreate.setObjectName(_fromUtf8("btnCreate"))
        self.retranslateUi(dialog_file)
        QtCore.QMetaObject.connectSlotsByName(dialog_file)

    def retranslateUi(self, dialog_file):
        dialog_file.setWindowTitle(QtGui.QApplication.translate("dialog_file", "file", None, QtGui.QApplication.UnicodeUTF8))
        self.btnCreate.setText(QtGui.QApplication.translate("dialog_file", "Create", None, QtGui.QApplication.UnicodeUTF8))

class Methods():
    def __init__(self, summaryFile = None):
        pass

    def pbar(self):
        i = 0 
        self.pd.ui.pbarTotal.setValue(0)
        self.pd.ui.pbarFileSize.setValue(0)
        j = 0
        while i < 100:
            while j < 100:
                self.pd.ui.pbarFileSize.setValue(j)
                j += 1
            i += 1
            j = 0
            self.pd.ui.pbarTotal.setValue(i)

class Worker(QtCore.QThread, Methods):
    def __init__(self, pd = None
             ):
        QtCore.QThread.__init__(self)
        self.pd = pd

    def __del__(self):
        self.wait()
        self.exiting = True

    def done(self):
        self.emit(QtCore.SIGNAL("workerDone()"))

    def run(self):
        self.pd.show()
        self.pbar()
        self.pd.hide()
        self.pd.destroy()

class App(QtGui.QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent)
        self.ui = Ui_dialog_file()
        self.ui.setupUi(self)

        signal = QtCore.SIGNAL("clicked()")
        self.connect(self.ui.btnCreate, signal, self.create)

        self.pd = None

    def create(self):
        self.pd = ProgressDialog()

        self.worker = Worker(self.pd)

        self.worker.start()

if __name__ == "__main__":        
    app = QtGui.QApplication(sys.argv)
    test = App()
    test.show()
    app.exec_() 
```

***新代码***

```
import sys
from PyQt4 import QtGui, QtCore
import time
import random

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_dialog_progress(object):
    def setupUi(self, dialog_progress):
        dialog_progress.setObjectName("dialog_progress")
        dialog_progress.resize(401, 165)
        self.gridLayout = QtGui.QGridLayout(dialog_progress)
        self.gridLayout.setObjectName("gridLayout")
        self.lblFileName = QtGui.QLabel(dialog_progress)
        self.lblFileName.setText("")
        self.lblFileName.setObjectName("lblFileName")
        self.gridLayout.addWidget(self.lblFileName, 0, 0, 1, 2)
        self.pbarFileSize = QtGui.QProgressBar(dialog_progress)
        self.pbarFileSize.setProperty("value", 0)
        self.pbarFileSize.setObjectName("pbarFileSize")
        self.gridLayout.addWidget(self.pbarFileSize, 1, 0, 1, 2)
        self.label_2 = QtGui.QLabel(dialog_progress)
        self.label_2.setObjectName("label_2")
        self.gridLayout.addWidget(self.label_2, 2, 0, 1, 1)
        self.pbarTotal = QtGui.QProgressBar(dialog_progress)
        self.pbarTotal.setProperty("value", 0)
        self.pbarTotal.setObjectName("pbarTotal")
        self.gridLayout.addWidget(self.pbarTotal, 3, 0, 1, 2)
        self.lblTotal = QtGui.QLabel(dialog_progress)
        self.lblTotal.setText("")
        self.lblTotal.setObjectName("lblTotal")
        self.gridLayout.addWidget(self.lblTotal, 4, 0, 1, 2)
        spacerItem = QtGui.QSpacerItem(213, 20, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Minimum)
        self.gridLayout.addItem(spacerItem, 6, 0, 1, 1)
        spacerItem1 = QtGui.QSpacerItem(20, 5, QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Expanding)
        self.gridLayout.addItem(spacerItem1, 5, 1, 1, 1)
        self.btnPbarCancel = QtGui.QPushButton(dialog_progress)
        self.btnPbarCancel.setObjectName("btnPbarCancel")
        self.gridLayout.addWidget(self.btnPbarCancel, 6, 1, 1, 1)

        self.retranslateUi(dialog_progress)
        QtCore.QMetaObject.connectSlotsByName(dialog_progress)

    def retranslateUi(self, dialog_progress):
        dialog_progress.setWindowTitle(QtGui.QApplication.translate("dialog_progress", "Dialog", None, QtGui.QApplication.UnicodeUTF8))
        self.label_2.setText(QtGui.QApplication.translate("dialog_progress", "Total:", None, QtGui.QApplication.UnicodeUTF8))
        self.btnPbarCancel.setText(QtGui.QApplication.translate("dialog_progress", "Cancel", None, QtGui.QApplication.UnicodeUTF8))

class ProgressDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent = None)
        self.ui = Ui_dialog_progress()
        self.ui.setupUi(self)
        self.setWindowModality(QtCore.Qt.ApplicationModal)

class MyThread(QtCore.QThread):
    trigger = QtCore.pyqtSignal()
    trcancel = QtCore.pyqtSignal()

    def __init__(self, parent=None):
        super(MyThread, self).__init__(parent)

    def run(self):
        time.sleep(random.random()*5)  # random sleep to imitate working
        self.trigger.emit()
        self.trcancel.emit()

class Ui_dialog_file(object):
    def setupUi(self, dialog_file):
        dialog_file.setObjectName(_fromUtf8("dialog_file"))
        dialog_file.resize(101, 59)
        self.btnCreate = QtGui.QPushButton(dialog_file)
        self.btnCreate.setGeometry(QtCore.QRect(10, 20, 77, 25))
        self.btnCreate.setObjectName(_fromUtf8("btnCreate"))
        self.retranslateUi(dialog_file)
        QtCore.QMetaObject.connectSlotsByName(dialog_file)

    def retranslateUi(self, dialog_file):
        dialog_file.setWindowTitle(QtGui.QApplication.translate("dialog_file", "file", None, QtGui.QApplication.UnicodeUTF8))
        self.btnCreate.setText(QtGui.QApplication.translate("dialog_file", "Create", None, QtGui.QApplication.UnicodeUTF8))

class Main(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Main, self).__init__(parent)
        self.ui = Ui_dialog_file()
        self.ui.setupUi(self)
        self.ui.btnCreate.clicked.connect(self.start_threads)
        self.pd = ProgressDialog()
        self.pd.ui.btnPbarCancel.clicked.connect(self.stopp)

    def start_threads(self):
        thread = MyThread(self)    # create a thread
        thread.trigger.connect(self.pdialog)  # connect to it's signal
        thread.start()

    def pdialog(self):
        self.pd.show()
        i = 0 
        self.pd.ui.pbarTotal.setValue(0)
        self.pd.ui.pbarFileSize.setValue(0)
        j = 1
        while i < 100:
            while j <= 100:
                time.sleep(0.001)
                self.pd.ui.pbarFileSize.setValue(j)
                j += 1
            i += 1
            j = 1
            self.pd.ui.pbarTotal.setValue(i)

    def stopp(self):
        print "cancel pressed"
        self.pd.hide()
        self.pd.destroy()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mainwindow = Main()
    mainwindow.show()
    sys.exit(app.exec_()) 
```

# php - preg_match_all 包括所有结果加上没有特定值的结果

> ID：14855363
> 
> 赞同：1
> 
> 时间：2013-02-13T14:04:50.580
> 
> 标签：php, preg-match-all

我正在尝试对以下字符串执行 preg_match_all ：

```
 $string1 = '/<a href="(.*?).(jpg|jpeg|png|gif|bmp|ico)"><img(.*?)class="(.*?)wp-image-(.*?)" title="(.*?)" (.*?) \/><\/a>/i';
preg_match_all( $string, $content, $matches, PREG_SET_ORDER); 
```

以上对我正在做的工作很好，问题是我还需要检测没有“标题”标签的图像。

如果字符串没有值[6]，有没有办法做一个 preg_match_all 并添加匹配项？（标题标志是值 [6]），并给这些结果（没有标题）一个特殊的名称（即 $matches_no_title?

我目前的解决方案是在两个不同的字符串上运行两个 preg_match_all （相同的字符串，除了一个没有 title="" 部分），但如果我可以在一个 preg_match_all 中完成所有操作以优化网站速度，那就更好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:30:27.930

正则表达式它不是你想要什么的最佳方法。你可以尝试解析 HTML 并得到你想要的。

```
$dom = new domDocument;
$dom->loadHTML($html);
$dom->preserveWhiteSpace = false;
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
    echo $image->getAttribute('src');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:13:05.500

如果您确定该`title`属性（右）在该`class`属性之后，那很简单。只需将其设为可选。

```
$string1 = '/<a href="(.*?)\.(jpg|jpeg|png|gif|bmp|ico)"><img(.*?)class="(.*?)wp-image-(.*?)"(?: title="(.*?)")? (.*?) \/><\/a>/i'; 
```

请注意，正则表达式是专门匹配一般 HTML 的。

在这种情况下，您最好将[SimpleXML](http://php.net/simplexml)与[XPath](http://php.net/manual/en/simplexmlelement.xpath.php)或[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)之类的库一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:22:34.917

我认为与 null 交替会做你想要的：

```
$string1 = '/<a href="(.*?).(jpg|jpeg|png|gif|bmp|ico)"><img(.*?)class="(.*?)wp-image-(.*?)" (|title="(.*?)") (.*?) \/><\/a>/i';
preg_match_all( $string1, $content, $matches, PREG_SET_ORDER); 
```

您可能还需要对可选的空格有所了解；实际上，您会期望在可选的 title="blah" 标记之前和之后匹配一个空格，这意味着如果 title="blah" 不存在，则匹配将查找两个空格......所以你可能想要

```
wp-image-(.*?)"(| title="(.*?)" )(.*?) \/> 
```

或者

```
wp-image-(.*?)"(|\s+title="(.*?)"\s+)(.*?) \/> 
```

代替

```
wp-image-(.*?)" (|title="(.*?)") (.*?) \/> 
```

# javascript - jQuery总是重复功能

> ID：14855370
> 
> 赞同：1
> 
> 时间：2013-02-13T14:05:05.480
> 
> 标签：javascript, jquery, jquery-animate, fadein

我有这两个功能来创建不透明效果

```
<script>
    function trans(id)
    {
       $(".pris_"+id).stop().fadeOut(1000);
       $(".pris_"+id).css({ opacity: 0.1});
       stop();
    }

    function trans_reverse(id)
    {
       $(".pris_"+id).stop().fadeIn(1000);
       $(".pris_"+id).css({ opacity: 0.8});
       stop();
    }
</script>

<div id="productos_image_soon" class="pris_1"    onmouseover="trans('1');"onmouseout="trans_reverse('1');">
   Product in a few time
</div> 
```

进入 div 我调用每个函数，问题是当我将鼠标悬停在 div 上并在递归模式下执行第二个函数并在第一个函数之后继续执行时，效果是当鼠标悬停不透明度低和鼠标悬停不透明度增加时

[工作.....这里jsfiddle.net/dSesq/](http://jsfiddle.net/dSesq/)

我不知道为什么会这样，我尝试了 stop() 函数，但问题仍然存在

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:15:03.050

为什么在淡入后设置元素的不透明度是没有意义的。使用fadeTo！

```
function trans(id, opacity) {
    $(".pris_"+id).stop().fadeTo( 1000, opacity);
} 
```

你可能应该使用[mouseenter](http://api.jquery.com/mouseenter/)和[mouseleave](http://api.jquery.com/mousleave/)。此外，将鼠标悬停在将要消失的元素上时，您会得到奇怪的结果。

你的代码可以写成

```
$(".trigger").on("mouseover mouseout", function(evt){
    var opacity = evt.type=="mouseover" ? 1 : .8;
    $(this).stop().fadeTo(1000, opacity);    
}) 
```

# jquery - 点击其他页面时保持滑动

> ID：14855374
> 
> 赞同：0
> 
> 时间：2013-02-13T14:05:10.240
> 
> 标签：jquery, slider

我制作了一个完整的背景滑块，但是当我单击菜单项时，滑块会一遍又一遍地开始。如果我单击一个菜单项（到另一个页面），是否有可能滑块继续滑动？

这是我的滑块代码：

```
function slideSwitch() {
    var $active = $('#slideshow img.active');

    if ( $active.length == 0 ) $active = $('#slideshow img:last');

    var $next =  $active.next().length ? $active.next()
        : $('#slideshow img:first');

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1500, function() {
            $active.removeClass('active last-active');
        });
}

$(function() {
    setInterval("slideSwitch()", 10000);
});

<div id="nav">
    <ul>
        <li>
            <a href="">RM</a>
        </li>

        <div class="diagonal"></div>

        <li>
            <a href="">Offerte</a>
        </li>

        <div class="diagonal"></div>

        <li>
            <a href="">Contact</a>
        </li>
    </ul>
</div>

<div id="slideshow">
   <img src="img/Route 163.jpg" alt="Slideshow Image 1" class="active">
   <img src="img/Spring.jpg" alt="Slideshow Image 2">
   <img src="img/Road to America.jpg" alt="Slideshow Image 3">
   <img src="img/Kopenhagen.jpg" alt="Slideshow Image 4">
</div> 
```

# c++ - 将现有库包含到 C++ 项目中时的问题

> ID：14855379
> 
> 赞同：0
> 
> 时间：2013-02-13T14:05:31.103
> 
> 标签：c++, netbeans

我正在将一个名为 libspatialindex 的库从[http://libspatialindex.github.com/](http://libspatialindex.github.com/)导入到我当前在 netbeans 中名为“rtreelibrarytest”的项目中。为了将其导入netbeans，我按照以下步骤操作：

1.  使用选项 => 构建 => 链接器 => 库包含扩展名为“.a”的库文件。
2.  使用 File => Project Properties => Build => C++ Compiler => General => Include Directories（包括目录）

现在，当我构建项目以及库时。该库已包含在项目中。我收到以下错误：

```
make[2]: *** No rule to make target `../rtree/spatialindex-src-1.8.0/src/tprtree/.libs/librtree.a', needed by `dist/Debug/GNU-Linux-x86/rtreelibrarytest'.  Stop. 
```

我无法弄清楚现在应该做什么。我也是 C++ 的新手。有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:09:37.177

您无需指定`include`库文件所在的目录。我怀疑这是你的问题。您应该只将包含目录更改为指向`include`目录，而不是库。

您的`1.)`步骤看起来有效，您的`2.)`似乎无效。但是，您应该添加`library`链接器的路径（如果还没有的话）。

# c# - 在 Office 2003 中以编程方式将“直引号”替换为“智能引号”

> ID：14855382
> 
> 赞同：1
> 
> 时间：2013-02-13T14:05:36.730
> 
> 标签：c#, office-interop, office-2003

有没有办法以编程方式在 Microsoft Office 2003 中关闭用“智能引号”替换“直引号”？我正在使用`Microsoft.Office.Interop`.

**好的，解决了！有两个选项： Application.Options.AutoFormatAsYouTypeReplaceQuotes Application.Options.AutoFormatReplaceQuotes**

# jquery - Jquery UI：如何将选择选项更改回默认值？

> ID：14855387
> 
> 赞同：0
> 
> 时间：2013-02-13T14:05:58.047
> 
> 标签：jquery, xhtml

我正在使用 jquery ui 从这个示例中创建我的选择选项菜单

[jQuery 选择菜单示例](http://wiki.jqueryui.com/w/page/12138056/Selectmenu)

在用户选择选项 1、选项 2 或选项 3 并且值完成输出/即一旦事件 ss 完成后，它应该改回“选择一个.. ”。

```
<script type="text/javascript"> 
        $(function(){       

            // please note that option.event is always passed as a string, so do not test for true or 1 with if (options.value)
            // see this issue for more information http://github.com/fnagel/jquery-ui/issues#issue/12
            var speedD_first = $('select#speedD_first').selectmenu();       
           // alert(speedD_first[0]);

           // var selVal=$('select#speedD_first').selectmenu("value");
            //alert(selVal);
            $('select').selectmenu({
                change: function(e, object){
                    alert(object.value);
                }
            });

            //$('select').show();
        });     
        $(document).ready(function() {
            $("select#speedD_first").change(function() {
              var selVal=$("select#speedD_first").val();
            //  alert(selVal);
            });

        });
    </script>

<fieldset>
            <label for="speedD_first">Disabled and selected first option by HTML</label>
            <select id="speedD_first">
                <option disabled="disabled" selected="selected">Choose one...</option>
                <option value="option1">Option 1</option>
                <option value="option2">Option 2</option>
                <option value="option3">Option 3</option>
            <select>
        </fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:24:01.530

您可以更改原始选择的值，然后使用`refresh`小部件的方法

在演示页面的控制台中运行它：

```
$('#number').val(3).selectmenu('refresh'); 
```

因此，设置默认选项的值或空字符串（如果它没有值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:12:01.050

[jQuery UI 文档](http://wiki.jqueryui.com/w/page/12138056/Selectmenu)讨论了一种方法，但在我的`refresh`测试中，它似乎不起作用。这可能是因为它`selectmenu`是一个非最终的 jQuery UI 组件，它仍处于规划阶段。相反，再次调用似乎可行，并且在[开发版本文档](http://github.com/fnagel/jquery-ui/wiki/Selectmenu)`.selectmenu()`中提到它是更改状态的方式。

注意：我使用的是插件的最新开发版本（ [JS](http://github.felixnagel.com/selectmenu/ui/jquery.ui.selectmenu.js) / [CSS ）。](http://github.felixnagel.com/selectmenu/themes/base/jquery.ui.selectmenu.css)

```
$('select').selectmenu({
    change: function (e) {

        // Do something
        alert('Just to pause');

        // Rever to original value and reset
        $(this).val(0);
        $(this).selectmenu();
    }
}); 
```

[jsfiddle](http://jsfiddle.net/K2Zex/4/)

# ms-access - 将访问对象组织到自定义组/类别中

> ID：14855388
> 
> 赞同：2
> 
> 时间：2013-02-13T14:06:05.503
> 
> 标签：ms-access, categories, ms-access-2010

因此，在 Access 中，最左侧的列由`Tables`、`Queries`和`Forms`组织`Reports`。在这些组中，显然是您创建的所有表、查询等。

有没有办法在每个中添加自定义组？因此，例如，您有一张用于放置 Carrots、Onions、Strawberries 和 Grapes 的桌子。是否可以创建名为“水果”和“蔬菜”的组/类别，将所有“水果”表放在一起，反之亦然？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:11:53.300

从下拉列表中选择自定义：

![风俗](../Images/7648e2f64e985b7df5e742288566d8e2.png)

选择自定义后，您可以选择使用右键单击将对象添加到组：

![自定义 2](../Images/e2b0dcda7f9a3549610c0eb86601c912.png)

可以重命名组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:23:16.450

我发现这个链接以及 Remou 的回复也很有帮助。显示创建自定义组的不同方式。

[在导航窗格中管理数据库对象](http://office.microsoft.com/en-us/access-help/manage-database-objects-in-the-navigation-pane-HA010342108.aspx)

# android - 从画布上擦除，最后 canvas.drawPath()

> ID：14855393
> 
> 赞同：1
> 
> 时间：2013-02-13T14:06:19.070
> 
> 标签：android, canvas, paint, erase, stroke

这是我制作的代码：

```
private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    undoPath = new Path();
    undoPath.moveTo(x, y);
    canvas.drawPoint(x, y, paint);
    mX = x;
    mY = y;
    if (bitmaps.size() > 0) {
        for (int i = 0; i < (bitmaps.size()); i++) {
            System.out.println("CustomImage.touch_start(): " + i + "||" + bitmaps.get(i).rect + "ZZ: " + x + "|| " + y);
            if (bitmaps.get(i).rect.contains((int) x, (int) y)) {
                System.out.println("CustomImage.touch_start()2");
                contains = true;
                lastBitmap = i;
            }
        }
    }

 private void touch_move(float x, float y) {
    float dx, dy;
        dx = Math.abs(x - mX);
        dy = Math.abs(y - mY);
    if ((dx >= TOUCH_TOLERANCE) || (dy >= TOUCH_TOLERANCE)) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        undoPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;
    }
}
 private void touch_up() {
    mPath.lineTo(mX, mY);
    mPath.moveTo(mX, mY);
    undoPath.lineTo(mX, mY);
    undoPath.moveTo(mX, mY);
    canvas.drawPath(mPath, paint);
    mPath.reset();
}
    @Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
} 
```

当我按下撤消按钮时，我会这样做：

```
 public void setPaint2(Paint paint2) {
    canvas.drawPath(undoPath, paint2);
    invalidate();
} 
```

其中paint2是：

```
 paint2= new Paint();
    paint2.setStrokeWidth(paint.getStrokeWidth()+5);
    paint2.setColor(0x00000000);
    paint2.setXfermode(clear);
    paint2.setAlpha(0x00); 
```

paint 是我用来绘制的 Paint()，paint2 是我用来擦除的那个（在第一个上用 alpha = 0（透明）绘制。问题是，即使它擦除了一部分，它也不会擦除一切，我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:23:19.370

这解决了我的问题：

```
delPaint = new Paint();
            delPaint.setColor(0x00000000);
            delPaint.setXfermode(clear);
            delPaint.setAlpha(0x00);
            delPaint.setAntiAlias(true);
            delPaint.setDither(true);
            delPaint.setStyle(Paint.Style.STROKE);
            delPaint.setStrokeJoin(Paint.Join.ROUND);
            delPaint.setStrokeCap(Paint.Cap.ROUND); 
```

# android - 从按钮单击切换意图时保持 tabhost

> ID：14855395
> 
> 赞同：0
> 
> 时间：2013-02-13T14:06:28.297
> 
> 标签：android, button, android-tabhost

我正在向我的应用程序添加一个新的选项卡布局。我的应用有 4 个活动。

之前，导航是通过显示在活动中的按钮完成的，例如活动 1 中的按钮使您转到第 4 部分。每个按钮都以新的意图启动一个新活动。要返回用户可以点击他的本机设备返回按钮。

按钮示例：

```
Button b1= (Button) findViewById(R.id.b1);
    b1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(this, ActivityTab4.class);
            startActivity(i);                           
        }
   }); 
```

现在，使用 tabhost，用户直接进入期望活动，每个活动都是我的 tabhost 的子项。但是，我仍然需要在我的布局中保留一些直接跳转到特定活动的按钮。

这些按钮的问题在于，当它们开始一个新活动时，tabhost 会消失。我需要一直保留它。

那么我怎样才能正常使用tabhost，但在它的顶部还使用我的部分布局内的自定义按钮，当我点击它们时会保留tabhost？

我的 tabhost 结构非常基本：

```
public class TabWidget extends TabActivity {    

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.global_tabs);
    setTabs() ;     
    }   

private void setTabs() {        
    addTab("Act1", R.drawable.tab1, ActivityTab1.class);
    addTab("Act2", R.drawable.tab2, ActivityTab2.class);        
    addTab("Act3", R.drawable.tab1, ActivityTab3.class);
    addTab("Act4", R.drawable.tab2, ActivityTab4.class);
    }

private void addTab(String labelId, int drawableId, Class<?> c) {

    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    // SET TITLETAB
    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.titleTab);
    title.setText(labelId);

    // SET IMAGETAB
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
    }} 
```

谢谢你的帮助

编辑：我宁愿避免使用片段，因为这将花费我大量时间来实现它们，并且最重要的是使其与 API<11 兼容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:08:32.203

好的，我找到了，感谢这个答案：[tabHost 的 setCurrentTab](https://stackoverflow.com/questions/6425742/setcurrenttab-of-a-tabhost)

基本上在主要的 tabhost 活动中，添加这个

```
private static Main theInstance;

public static Main getInstance() {
    return Main.theInstance;
}

public Main () {
    Main.theInstance = this;
} 
```

在孩子中，您可以有一个按钮将用户发送到任何选项卡+相应的活动：

```
Button b1_3= (Button) findViewById(R.id.b1_3);
    b1_3.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            TabWidget.getInstance().getTabHost().setCurrentTab(3);
        }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:46:57.060

为什么你使用 tabhost 和活动而不是 Fragments？我认为您会发现 Fragments 更适合您正在尝试做的事情。

至于您的问题-您可以使用切换显示的选项卡

```
 void   setCurrentTab(int index) 
 void   setCurrentTabByTag(String tag) 
```

因此无需在按下按钮时手动启动活动，只需使用这些方法切换显示的选项卡即可。

# javascript - 通过正则表达式在javascript中搜索反斜杠+字符串

> ID：14855397
> 
> 赞同：0
> 
> 时间：2013-02-13T14:06:37.293
> 
> 标签：javascript, html, regex, firebug

我在 JS 中有一个文件引用，我需要通过正则表达式解析它。我想要的只是获得反斜杠后面的“C”字符。有谁知道为什么这不起作用？

```
var str = "C:\Course\folder\file.txt";
str.match(/\\C/g); 
```

如果我在 firebug 或类似工具中运行它，我将一无所获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:11:23.540

> 有谁知道为什么这不起作用？

因为您引用的字符串不包含反斜杠。它有一个无效的转义序列 ( `\C`)，导致只有`C`两个换页符 ( `\f`)，但没有反斜杠。

如果你有实际的反斜杠，它可以工作：

```
var str = "C:\\Course\\folder\\file.txt";
str.match(/\\C/g); 
```

# axapta - Dynamics AX CompanyImage 到图像文件

> ID：14855400
> 
> 赞同：2
> 
> 时间：2013-02-13T14:06:45.500
> 
> 标签：axapta, microsoft-dynamics, x++

我需要将存储在**CompanyImage**表中的图像导出到*图像文件*中。

我该怎么做？

阅读表格我获得了一个位图字段，但是如何知道图像的类型以构建正确的扩展名并将其保存到文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:22:50.787

最后我找到了解决方案。

从 CompanyImage 导出图像：

```
 // Grant clrinterop permission.
    new InteropPermission(InteropKind::ClrInterop).assert();

    image = new Image();
    image.setData(companyImage.Image);

    result = image.saveImage(@"c:\test.jpg",3);

    CodeAccessPermission::revertAssert(); 
```

要知道原始类型：

```
 image.saveType(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T02:29:19.203

上面的代码不会立即工作。这是将运行的代码：

```
bindata bin = new bindata();
str content;
container image;
CompanyImage companyImage;
;

select companyImage;
image = companyImage.Image;
bin.setData(image);

content=bin.base64Encode();

AifUtil::saveBase64ToFile("c:\\temp\\test.tif", content); 
```

# php - 嵌套 foreach 中的两个对象数组

> ID：14855401
> 
> 赞同：0
> 
> 时间：2013-02-13T14:06:46.387
> 
> 标签：php, variables, object

我有两个变量：

*   $foo - client1, client2, client3 (一个对象数组)
*   $bar - 名称、id、营业额（字符串数组）

如果我回显`$foo->name`客户端 1，它会返回成功值，但是：

```
foreach ($foo as $key1 => $value1) {

  foreach ($bar as $key2 => $value2) {

    echo $value2->$value1; // THIS IS NOT WORKING

  }

} 
```

希望我很清楚；我想返回这些值：

```
client1's name
client1's id
client1's turnover
client2's name 
client2's id
etc... 
```

这是成功的：

```
foreach($foo as $client) {

  echo $client->name."<br>";
  echo $client->id."<br>";
  echo $client->billable."<br>";

} 
```

返回客户姓名、他的 ID 以及他是否可以为每个客户计费。但是上面的代码不起作用。名称、id 和 billable 存储在一个字符串中，因此：

```
$bar = array ([0] => name, [1] => id, [2] => billable ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:09:44.707

为变量赋予有意义的名称，并使用花括号访问：

```
foreach ($clients as $i => $client) {

  foreach ($keys as $j => $key) {

    echo $client->{$key};

  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:12:02.697

这是有效的：

```
$foo = array( "client1", "client2", "client3"); 
$bar = array("name","id", "turnover");

foreach ($foo as  $value1) {
    foreach ($bar as $value2) {
        echo $value1 . "->" . $value2 . "\n";
    }
} 
```

[http://sandbox.onlinephpfunctions.com/code/ebdba5ef40498d4ead4be9a281f715565717471a](http://sandbox.onlinephpfunctions.com/code/ebdba5ef40498d4ead4be9a281f715565717471a)

我不知道你的问题出在哪里，我猜是错字。你没有写出你的输出，你的代码是半伪代码（例如连接你不使用的两个值->）。您应该提供更多详细信息和更准确的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:20:56.243

你需要更换

```
$value2->$value1 
```

和

```
$value1->$value2 
```

如果我正确理解你的例子

```
$bar = array("name", "id", "turnover");
$foo = array(
        (object) array_combine($bar,range(1,3)),    //client 1
        (object) array_combine($bar,range("A","C")),    //client 2
        (object) array_combine($bar,range("X","Z")),    //client 3
);

foreach ($foo as $key1 => $value1) {
    foreach ($bar as $key2 => $value2) {
        echo "Clients $key1 $value2 = ",$value1->$value2 ,PHP_EOL; // THIS IS NOT WORKING
    }
    echo PHP_EOL ;
} 
```

输出

```
Clients 0 name = 1
Clients 0 id = 2
Clients 0 turnover = 3

Clients 1 name = A
Clients 1 id = B
Clients 1 turnover = C

Clients 2 name = X
Clients 2 id = Y
Clients 2 turnover = Z 
```

# wpf - 绑定到 observablecollection 的 WPF 元素在工作线程上更新

> ID：14855406
> 
> 赞同：3
> 
> 时间：2013-02-13T14:07:10.840
> 
> 标签：wpf, multithreading

我一直在处理多线程问题。在过去的几天里，我一直在努力确保我所有的调用都是线程安全的。我刚刚遇到了一个困扰我的问题。这是场景：

我正在尝试使用 Infragistics XamDataChart 控件绘制波形，该控件通过 ~500 点/秒/波形。在启动应用程序时，我创建具有称为 WaveData 的 ObservableCollection 属性的对象，这些属性直接绑定到 itemscontrol 中的 xaml。当数据进入时，它被存储在一个队列中，并使用一个派生的工作线程来使数据出队并在适当的位置更新集合。

生成工作线程：

```
QueueProcessThread = Task.Factory.StartNew(() => UpdateWaveFormCollections(WaveForms), tokenSource.Token, TaskCreationOptions.LongRunning, TaskScheduler.Default); 
```

更新在循环中运行的集合的代码（为简洁起见，省略了一些代码行）：

```
waveForm.LastDisplayedTimeStamp = DateTime.Now; // move the last displayed time up

int collectionSize = waveForm.WaveData.Count; 
while (waveForm.WaveDataBuffer.Count > 0 && waveForm.WaveDataBuffer.Peek().TimeStamp < waveForm.LastDisplayedTimeStamp)
{
   if (waveForm.CurrentPosition >= collectionSize)
   {
      waveForm.CurrentPosition = 0;
   }
   waveForm.WaveData[waveForm.CurrentPosition] = waveForm.WaveDataBuffer.Dequeue();
   waveForm.CurrentPosition++;
} 
```

如您所见，我实际上并没有在集合中添加/删除项目，而是只是在特定位置更新项目。这是因为我希望它看起来像医院里的病人监护仪。

我遇到的问题是我意识到我正在非 UI 线程上更新此集合，并且该集合直接绑定到 Infragistics LineSeries ......**这是有效的**。但是，当我在预期的非 UI 线程上更新该集合时，使用 Infragistics StepLineSeries 的另一个图表会引发异常。*我怎么可能在非 UI 线程上更新绑定的集合？*我对此感到担忧，因为 1) 有时我确实会收到无法在非 UI 线程上更新集合的错误，以及 2) 当我通过调度程序将波形更新切换到 UI 线程时，GUI 的性能太差了无法使用。我需要了解为什么会这样，所以我知道如何进行。我不想部署由于我的线程管理不善而随时可能失败的应用程序。我正在寻找可能的原因，为什么/如何在非 UI 线程上更新绑定的 ObservableCollection。任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:22:27.133

也许您需要考虑使用 Dispatcher（除非您的代码的一部分被省略）。

当您执行需要在 UI 线程上执行代码的操作时，可以使用 Dispatcher 方法。

也许您可以在后台工作线程中检索该数据，并在更新集合时将更改传播回 UI 线程

例如

```
Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background,
  new Action(() => methodHere = 50)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:20:31.347

尝试使用调度程序调用以确保将通过 UI 线程访问集合，从而不允许任何其他事件在非 UI 线程上触发。

```
Application.Current.Dispatcher.BeginInvoke(new Action(()=>
{
// code here to access collection
})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:23:22.183

我一直在寻找的答案是您可以更新数据绑定对象的属性，而 WPF 将为您处理调度，但是，您无法从非 UI 线程更新集合（添加/删除/清除）。在我的波形中，我没有添加点，而是在特定索引处更新项目的值。然而，在另一种情况下，我总是添加和删除点。

# cuda - CUDA 中的动态编程：与子内核交换数据的全局内存分配

> ID：14855408
> 
> 赞同：1
> 
> 时间：2013-02-13T14:07:26.270
> 
> 标签：cuda, parallel-processing, gpgpu

我有以下代码：

```
__global__ void interpolation(const double2* __restrict__ data, double2* __restrict__ result, const double* __restrict__ x, const double* __restrict__ y, const int N1, const int N2, int M)
{
    int i = threadIdx.x + blockDim.x * blockIdx.x;

    [...]        

    double phi_cap1, phi_cap2;

    if(i<M) {   

         for(int m=0; m<(2*K+1); m++) {

              [calculate phi_cap1];

              for(int n=0; n<(2*K+1); n++) {

                 [calculate phi_cap2];

                 [calculate phi_cap=phi_cap1*phi_cap2];

                 [use phi_cap];

             }
    }

}

} 
```

我想在 Kepler K20 卡上使用动态编程来调度处理`phi_cap1`并`phi_cap2`并行处理一堆线程，以减少计算时间。`K=6`在我的代码中，所以我启动了一个`13x13`线程块。

按照 CUDA 动态并行编程指南，我在*全局内存*中分配与子内核交换数据所需`phi_cap`的`169`元素矩阵（由 和 的乘积形成`phi_cap1`）。确实，引用指南，`phi_cap2`

 *> 作为一般规则，传递给子内核的所有存储都应该从全局内存堆中显式分配。

然后我结束了以下代码

```
__global__ void interpolation(const double2* __restrict__ data, double2* __restrict__ result, const double* __restrict__ x, const double* __restrict__ y, const int N1, const int N2, int M)
{
    int i = threadIdx.x + blockDim.x * blockIdx.x;

    [...]   

    dim3 dimBlock(2*K+1,2*K+1); dim3 dimGrid(1,1);

    if(i<M) {   

    double* phi_cap; cudaMalloc((void**)&phi_cap,sizeof(double)*(2*K+1)*(2*K+1));

    child_kernel<<<dimGrid,dimBlock>>>(cc_diff1,cc_diff2,phi_cap);

    for(int m=0; m<(2*K+1); m++) {

        for(int n=0; n<(2*K+1); n++) {

                        [use phi_cap];

        }
    }

} 
```

}

问题是第一个例程需要`5ms`运行，而第二个例程，即使通过评论`child_kernel`启动，也需要`23ms`，几乎所有时间都花在`cudaMalloc`API 上。

由于在动态编程中经常需要分配内存空间来与子内核交换数据，而唯一的解决方案似乎是全局内存占用了这么多时间，在我看来，动态编程有用性的一个严重瓶颈是数据交换，除非有办法规避全局内存分配问题。

那么问题是：*对于上述问题是否有任何解决方法，即从内核中分配全局内存时需要花费这么多时间？*. 谢谢

**评论中提出的解决方案**

*从父内核外部分配所需的全局内存。*我已经验证从父内核外部分配所需的全局内存*要*快得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:31:39.743

您正在从 i < M 的每个线程调用 cudaMalloc，这意味着您正在进行 M cudaMalloc 调用。

M越大，情况就越糟。

相反，您可以从分配 M 倍于您之前使用的大小的块的第一个线程进行单个 cudaMalloc 调用（实际上在您的情况下您应该分配更多，因此每个块都正确对齐）。之后同步线程，您可以使用为每个子内核正确计算的 phi_cap 地址启动子内核。

或者（如果您的特定情况允许您分配足够的内存以在内核调用之间保留），您可以在内核外部分配内存并重用它。那会快很多。如果 M 在内核调用之间变化，您可以为最大的 M 分配尽可能多的内存。*

# android - 设置启用按钮

> ID：14855411
> 
> 赞同：0
> 
> 时间：2013-02-13T14:07:45.960
> 
> 标签：android

我有一个有 2 个按钮的主页，按钮 1 已启用，按钮 2 已禁用。button1 将打开有 1 个名为 button3 的按钮的第二页。button3 将意图返回到主页，它应该使 button2 启用。问题是 button2 将在短时间内启用，然后恢复为禁用（阴影）。

主页。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class Enable extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_enable);

    Button page1 = (Button) findViewById(R.id.button1);
    page1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            Intent myIntent = new Intent(view.getContext(), p2.class);
            startActivityForResult(myIntent, 0);

        }
    });

    Button page2 = (Button) findViewById(R.id.button2);

    page1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            Intent myIntent = new Intent(view.getContext(), p2.class);
            startActivityForResult(myIntent, 0);

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_enable, menu);
    return true;
}

} 
```

第二页

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class p2 extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.p2);

    Button page1 = (Button) findViewById(R.id.button3);
    page1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            Intent myIntent = new Intent(view.getContext(), Enable.class);
            setContentView(R.layout.activity_enable);
            Button a = (Button) findViewById(R.id.button2);
            a.setEnabled(true);
            startActivityForResult(myIntent, 0);

        }
    });

}
} 
```

主页的 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Enable" >

<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="104dp"
    android:layout_marginTop="32dp"
    android:text="Button" />

<Button
    android:id="@+id/button2"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="46dp"
    android:enabled="false"
    android:text="Button" /> 
```

第 2 页的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button3"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:18:29.737

不是通过 XML 控制按钮的行为，而是控制活动代码中的启用和禁用功能。希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:15:58.310

您的问题在于 Intents 的工作方式。您的第二个活动正在做的是访问第一个活动的布局（这是一种不好的做法，因为它们现在紧密耦合），但意图是重新创建 Main 活动 - 这意味着再次调用 onCreate 方法，并且按钮是重新创建 - 将 enabled 属性设置为 false。

要解决您的问题，请查看[这篇](http://www.vogella.com/articles/AndroidIntent/article.html)文章，其中包括 Intent、intent extras（传递数据 - 这将允许您设置 Main Activity 可用于确定是否启用按钮的属性）和 Intent 标志（操纵你的类的实例如何运作 - 一种选择是使用`FLAG_ACTIVITY_REORDER_TO_FRONT`任何现有的实例并将其放在堆栈的顶部），或者只是搜索标志和额外的信息，他们应该告诉你你需要知道什么.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:16:24.253

Intent 再次启动 Activity，Activity 调用 onCreate 方法，该方法将 Button 2 设置为禁用。

# javascript - 检测是否禁用Javascript，如果是则重定向

> ID：14855412
> 
> 赞同：-2
> 
> 时间：2013-02-13T14:07:46.567
> 
> 标签：javascript, jquery

我在检测 Javascript 时遇到问题。我创建了一个 jQuery Popup 窗口，它仅适用于启用了 javascript 的用户。但是，如果他们的浏览器禁用了 JS，我想在他们点击按钮时将他们重定向到 index.php。

所以基本上如果有人启用了 JS，他/她会得到弹出窗口，如果他们没有，他们就会被重定向。

可能吗？另外，这是否也适用于移动设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:12:09.057

有一个元标记可以让您执行此操作，请记住它不能进入​​正文，需要位于文档的头部。

```
<noscript>
    <meta http-equiv="Refresh" content="0; URL=../error/errorjs.jsp" />
</noscript> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:10:53.130

这种技术称为[hijax](http://en.wikipedia.org/wiki/Hijax)

创建链接`<a href="index.php">..</a>`

并附加一个禁用正常流程的javascript事件

如果启用了 javascript，它将显示弹出窗口，否则链接将正常工作..

# jsf - 在主要面孔日历上启用手动日期输入

> ID：14855420
> 
> 赞同：1
> 
> 时间：2013-02-13T14:08:16.610
> 
> 标签：jsf, primefaces

我试图让用户在 Prime facesCalendar 的 TextBox 中手动输入日期。这是我的代码：

```
 <p:calendar id="birthDate" size="22" locale="#{view.locale}"
                            maxdate="#{userCreation.maxDate}" navigator="true"
                            yearRange="c-100" readOnlyInputText="false"
                            value="#{userCreation.user.birthDate}"
                            mindate="01/01/1900" pattern="dd/MM/yyyy"
                            style="left: 194px !important;">
                        </p:calendar> 
```

有没有我可以使用的属性而不必制作我自己的 JavaScript 解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:00:19.187

如果你会做

> 只读=真或假

[日历组件将允许用户手动输入日期..（true 或 false）标志表示此输入元素将阻止用户更改。有关更多信息，您可以在此处](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/calendar.html)查看 Primefaces 标签文档

# python - 在 Mayavi 的 3D 散点图中禁用点缩放

> ID：14855422
> 
> 赞同：3
> 
> 时间：2013-02-13T14:08:20.917
> 
> 标签：python, data-visualization, mayavi

Python的`mayavi`模块具有 3D 散点图功能。默认情况下，点的大小随数据缩放（据我通过他们的网站可以理解）。这是我的数据的屏幕截图：

![Mayavi 点散射](../Images/5f43741a6ac054d5acfbc7b4aefbfc10.png)

颜色图表示每个点的值，因此我不需要点的大小也随点的值缩放。有什么方法可以禁用大小缩放？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T14:38:12.647

该函数`mayavi.mlab.points3d`具有`scale_mode`可以设置为的参数`'none'`。

例如：

```
In [23]: t = linspace(0, 4*numpy.pi, 20)

In [24]: x = sin(2*t)

In [25]: y = cos(t)

In [26]: z = cos(2*t)

In [27]: s = 2 + sin(t)

In [28]: mlab.points3d(x, y, z, s, colormap="copper", scale_mode='none')
Out[28]: <mayavi.modules.glyph.Glyph at 0x9fd85f0> 
```

这是情节的屏幕截图：

![截屏](../Images/13121c4c94b65331789b791041e59089.png)

# c# - 只允许上传 pdf 文件

> ID：14855428
> 
> 赞同：0
> 
> 时间：2013-02-13T14:08:42.723
> 
> 标签：c#, winforms

我的 Windows 窗体应用程序中有一个浏览按钮，我只想过滤到选择 pdf 文件的选项。因此，在浏览文件窗口中，只有 pdf 文件可见，不显示 .doc 或任何类型的文档格式。

```
private void btnSelectFile_Click(object sender, EventArgs e)
    {
        var dlg = new OpenFileDialog();
        var res = dlg.ShowDialog();
        if (res == DialogResult.OK)
        {
            DocumentUNCPath.Text = dlg.FileName;
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T14:12:29.000

首先，您需要先对以下内容应用过滤器`OpenFileDialog`：

```
dlg.Filter = "PDF Files|*.pdf"; 
```

但是，这并不能阻止他们强制通过文件（他们可以这样做）。在他们单击“确定”后，您可以再次检查文件名，但这不能保证您获得的文件将是 PDF。

为了安全起见，您可以在本地或服务器端使用 PDF 库来尝试打开 PDF 文件，看看它是否真的如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:13:25.390

添加这个：

```
dlg.Filter = "PDF files|*.pdf"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T14:13:32.973

您需要`dlg`像这样在对象上设置过滤器属性：

```
var dlg = new OpenFileDialog();
dlg.Filter = "*.pdf";
var res = dlg.ShowDialog();
if (res == DialogResult.OK)
{
    DocumentUNCPath.Text = dlg.FileName;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T14:12:42.063

您想[`Filter`](http://msdn.microsoft.com/en-us/library/system.windows.controls.openfiledialog.filter%28v=vs.95%29.aspx)使用[`OpenFileDialog`](http://msdn.microsoft.com/en-us/library/cc189944%28v=vs.95%29.aspx).

```
dlg.Filter = "PDF Files|*.pdf" 
```

左边的部分`|`可以是任何东西，我只是给你一个例子，但它是向用户显示的。右侧的部分`|`是实际的 Windows 过滤器。

# c# - 使用 SharpGs 库获取 1000 多个对象

> ID：14855430
> 
> 赞同：0
> 
> 时间：2013-02-13T14:08:53.093
> 
> 标签：c#, .net, google-cloud-storage

我在 Google Cloud Storage 中有 1000 多个文件，我正在编写一个 .Net 应用程序来处理文件列表。我正在使用 SharpGs .Net 库 ( [https://github.com/acropolium/SharpGs](https://github.com/acropolium/SharpGs) )，它看起来简单易用。但是，我似乎只取回了 1000 个对象。

我正在使用以下代码：

```
var bucket = GoogleStorageClient.GetBucket(rootBucketName)
var objects = bucket.Objects; 
```

似乎没有任何明显的方法可以获取接下来的 1000 个对象，所以我现在有点卡住了。

有没有人有任何想法或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:02:18.937

我不熟悉这个特定的库，但 1000 个对象是单个列表调用的当前限制。除此之外，您需要使用分页来访问其余对象。如果这个库支持分页，我建议使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:52:57.010

如果您查看 Bucket 类：

[https://github.com/acropolium/SharpGs/blob/master/SharpGs/Internal/Bucket.cs#L33](https://github.com/acropolium/SharpGs/blob/master/SharpGs/Internal/Bucket.cs#L33)

它返回一个查询对象。Query 对象允许您传入 Marker 参数：

[https://github.com/acropolium/SharpGs/blob/master/SharpGs/Internal/Query.cs#L36](https://github.com/acropolium/SharpGs/blob/master/SharpGs/Internal/Query.cs#L36)

您必须获取初始 Query 对象，提取其标记，然后将其传递给新 Query 以获取下一页结果。

# node.js - Node.js/SignalR 通信

> ID：14855432
> 
> 赞同：1
> 
> 时间：2013-02-13T14:08:58.020
> 
> 标签：node.js, websocket, signalr

我有一台运行 SignalR 的服务器和另一台运行 Node.js 的服务器。我希望这两个服务器使用 SignalR 进行通信。这可能吗？

我在想我可以使用 SignalR 客户端 javascript 库从 Node:js 连接到 SignalR 服务器，但我找不到任何好的例子来说明如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:34:19.353

好吧，你*能*做到这一点的答案最终是“是”，因为 SignalR 通信没有什么专有的。它只是 HTTP 或 WebSockets 的变体，在此之上具有用于 Hub 的自定义握手/消息帧协议。

所以*我们*需要回答的问题是什么。开箱即用的 SignalR 提供了一个基于 jQuery 插件架构的客户端 JavaScript 库，但这对 Node.js 没有帮助。有人[在 GitHub 上](https://github.com/maartenba/SignalR.Node)启动了 Node.js 实现，但根据自述文件，它目前仅支持 HTTP 长轮询。我目前不知道任何其他实现，但显然你从那个开始并分叉它以添加对其他传输的支持，如果你愿意的话。

# git - 防止用户更改 .gitignore 文件？

> ID：14855434
> 
> 赞同：3
> 
> 时间：2013-02-13T14:09:03.140
> 
> 标签：git, gitolite

有什么理由强迫用户不要更改 .gitignore 文件。我的意思是假设有人会更改或删除此文件并推送此更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:26:16.467

使用[Gitolite](http://sitaramc.github.com/gitolite/master-toc.html)，预接收 Hooks 称为[**VREFS**](http://sitaramc.github.com/gitolite/vref.html)（[虚拟参考](https://stackoverflow.com/questions/11510046/gitolite-update-hook-exclude-a-repository/11517112#11517112)，也在[这里列出](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite/10888358#10888358)）：不要直接在由 gitolite 管理的 repos 中设置预接收钩子，通过在 repo 的 `VREF`目录中添加 VREF 来做到这一点`gitolite-admin`，而 Gitolite会将其传播到存储库。

“[通过目录/文件名](http://sitaramc.github.com/gitolite/vref.html#NAME)限制推送”部分说明了如何通过更改的目录和文件的名称来限制推送。
实际上，这是一个您不需要添加到`VREF`目录中的 VREF（它是 Gitolite 管理的更新挂钩的一部分。有关二级更新挂钩，[请参见此处](https://stackoverflow.com/a/13871875/6309)）。

因此，修改repo`gitolite.conf`中的`gitolite-admin`，并将该管理 repo 推回 gitolite 服务器就足够了。

```
repo foo
        RW+                             =   @senior_devs
        RW                              =   @junior_devs

        -   VREF/NAME/Makefile          =   @junior_devs 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:15:01.540

Git 是去中心化的。一旦有人克隆了一个 repo，它就完全在他们的控制之下，包括`.gitignore`文件。

您*可以*做的是通过使用检查指定文件类型并拒绝用户推送的[Git 挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)来阻止用户将某些文件推送到您的服务器。

阅读[pre-receive hooks](http://git-scm.com/book/ch7-3.html#Server-Side-Hooks)。并编写一个搜索给定文件类型的脚本。

检查您的存储库`.git/hooks`，将有一个示例文件列表，向您展示如何处理它。另请阅读[本文](http://www.ioncannon.net/system-administration/1362/example-git-pre-receive-and-post-receive-hooks-to-avoid-a-signal-13-error/)以避免容易犯错误。

**编辑**

我不擅长 shell 脚本，但这里有一个小脚本，它不允许 .php 和 .css 文件并在中止之前告诉用户。它位于`.git/hooks/pre-receive`. 请记住使其可执行（`chmod +x`），否则它将无法工作。

```
#!/bin/sh
while read oldrev newrev refname
do
  if [[ `git diff-tree --no-commit-id --name-only -r $newrev | grep -e 'css\|php'` != "" ]]
  do
    echo "Cannot push this"
    exit 1;
  fi
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T14:12:53.037

可以在服务端设置预接收钩子，`.gitignore`修改后拒绝推送。

# c# - MVC：在视图中使用控制器数据

> ID：14855436
> 
> 赞同：0
> 
> 时间：2013-02-13T14:09:08.220
> 
> 标签：c#, javascript, asp.net-mvc, json, kendo-ui

我想根据用户输入`startdate`和`enddate`使用 MVC 在图表中显示在特定日期范围内找到的数据。为此，我需要 json 数据。我可以根据用户输入获取 json 数据，但无法看到图表，因为我无法使用`url:Machines/Parameter`.

索引.cshtml

```
<body>

 @using (Html.BeginForm("Parameter", "Machines", FormMethod.Post))
{
<div>

   Start Date:  <input type="datetime" id="start" name="start" />

   End Date: <input type="datetime" id="end" name="end" />

</div>
 <input type="submit" value="OK" /> 
Html.EndForm();} 
```

机器控制器.cs

```
public ActionResult Index()
{
    return View();

}

public ActionResult Parameter(DateTime start, DateTime end)
{
    MachinesSql a = new MachinesSql();

    var data = Json(a.SqlAccessParameter(start, end), JsonRequestBehavior.AllowGet);

    return View(data);

} 
```

型号：Machines.cs

```
namespace DenemeReport.Models
{

public class Machines
{
    [Key]
    public int AutoKey;
    public string MachineGroup;
    public DateTime StartDate;
    public DateTime EndDate;
    public int Duration;

}
public class MachinesDBContext : DbContext
{
    public DbSet<Machines> Machine { get; set; }

}

 public List<Machines> SqlAccessParameter(DateTime startDate, DateTime endDate)
 {

    SqlConnection myConnection = new SqlConnection(connstr);
    myConnection.Open();
    SqlCommand myCommand = new SqlCommand("DateRange",myConnection);
    myCommand.CommandType = CommandType.StoredProcedure;
    myCommand.Parameters.Add("@SP_startDate", SqlDbType.DateTime).Value =startDate;
    myCommand.Parameters.Add("@SP_endDate", SqlDbType.DateTime).Value = endDate;

    SqlDataAdapter dataAdapter = new SqlDataAdapter();
    myCommand.ExecuteNonQuery();
    dataAdapter.SelectCommand = myCommand;

    DataSet dSet = new DataSet();
    dataAdapter.Fill(dSet);

    myConnection.Close();

    List<Machines> machinePost = new List<Machines>();
    foreach (DataRow row in dSet.Tables[0].Rows)
    {
        Machines mac = new Machines();
        mac.AutoKey = (int)row["AUTOKEY"];
        mac.MachineGroup = (string)row["MACHINEGROUP"];
        mac.Duration = (int)row["DURATION"];
        mac.StartDate = (DateTime)row["STARTTIME"];
        mac.EndDate = (DateTime)row["ENDTIME"];
        machinePost.Add(mac);
    }
    return machinePost;
} 
```

Parameter.cshtml（包含图表信息的参数操作视图）

```
<title>Intro</title>

<script src="~/Scripts/jquery-1.8.3.min.js"></script>
<script src="~/Scripts/kendo/kendo.all.min.js"></script>
<link href="~/Scripts/kendo/kendo.common.min.css" rel="stylesheet" />
<link href="~/Scripts/kendo/kendo.default.min.css" rel="stylesheet" />

</head>

<div id="chart"></div>
<div id="chart2"></div>
<body>

 <script>

$("#chart").kendoChart
    ({
        theme: $(document).data("kendoSkin") || "default",
        title: {
            text: "Pie Chart Test"
        },
        legend: {
            position: "bottom",
        },

        dataSource:
            {

                transport:
                    {
                        read:
                             {
                                url: "Machines/Parameter", // This part create the problem I think. The url does not work.
                                    dataType: "json",
                                    contentType: 'application/json; charset=utf-8'
                                }

                    }
            },

        seriesDefaults: {
            labels: {
                visible: true,
                format: "{0}"
            }
        },

        series: [{

            type: "pie",
            field: "Duration",
            categoryField: "MachineGroup"
        }],

        tooltip: {
            visible: true,
            format: "{0}"
        }
    });
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:17:14.647

假设您使用的是 Razor 语法，请替换`"Machines/Parameter"`为`"@Url.Action("Parameter", "Machines")"`

# javascript - 多个列表视图的语义缩放实现

> ID：14855438
> 
> 赞同：1
> 
> 时间：2013-02-13T14:09:13.093
> 
> 标签：javascript, windows-8

我在单个 html 页面中有三个列表视图模板，如何将它们附加到语义缩放。

示例我有搜索

```
 <div id="zoom" style="width:90%; height:90%;" data-win-control="WinJS.UI.SemanticZoom" >
         <div id="zoomedinlist" data-win-control="WinJS.UI.ListView"></div>
         <div id="zoomedoutlist" data-win-control="WinJS.UI.ListView"></div>
      </div>        
    <!-- Templates -->
    <div id="headertemplate" data-win-control="WinJS.Binding.Template">
        <div data-win-bind="innerText:category"></div>
    </div>
    <div id="zoomedintemplate" data-win-control="WinJS.Binding.Template">
        <div>
            <img class="item-image" data-win-bind="src:imagesrc"   />
            <div data-win-bind="innerText:name"></div>
        </div>
    </div>
    <div id="zoomedouttemplate" data-win-control="WinJS.Binding.Template">
        <div class="sz-category" data-win-bind="innerText:category"></div>
    </div> 
```

js文件

```
 var attractions = [
            { name: "jasmine", category: "flower", location: "east", imagesrc: "/images/Lemon.png" },
            { name: "jasmin", category: "flower", location: "east", imagesrc: "/images/Orange.png" },
            { name: "mine", category: "power", location: "north", imagesrc: "/images/Strawberry.png" },
            { name: "min", category: "jasime", location: "north", imagesrc: "/images/Banana.png" },
        ];

        var attractionsList = new WinJS.Binding.List(attractions);
        var attractionsListGrouped = attractionsList.createGrouped(

            function (i) { return i.category; },
            function (i) { return { category: i.category }; }

        );
        var zin = document.querySelector("#zoomedinlist").winControl;
        zin.itemDataSource = attractionsListGrouped.dataSource;
        zin.groupDatasource = attractionsListGrouped.groups.dataSource;
        zin.itemTemplate = document.querySelector("#zoomedintemplate");
        zin.groupHeaderTemplate = document.querySelector("headertemplate");

        var zout = document.querySelector("#zoomedoutlist").winControl;
        zout.itemDataSource = attractionsListGrouped.groups.dataSource;
        zout.itemTemplate = document.querySelector("#zoomedouttemplate");
    } 
```

这是我得到的示例，但使用它我们可以静态加载数据，但我们无法将多个模板实现到单个列表视图。如何将多个列表视图绑定到从服务方法获取数据的语义缩放模板，请告诉我..

# github - Github 吃了我的源代码（我的提交不见了）

> ID：14855443
> 
> 赞同：2
> 
> 时间：2013-02-13T14:09:25.787
> 
> 标签：github, github-for-mac

昨天晚些时候，我完成了一天的工作并去 github 提交，然后点击同步按钮。我在屏幕上短暂地看到一条消息，说需要修复合并冲突，但是在我完全阅读之前，该消息被自我忽略了。

我未完成的提交消失了，所以我认为一切都很好。今天早上我再次开始工作，我所做的所有新代码都已恢复到两天前的先前提交。没有提及我所做的任何更改，也没有提及我在完成工作日之前所做的任何提交......它们就这样消失了。

有什么恢复建议吗？

**更新**

对于它的价值，我正在浏览我的 git 文件夹中的日志文件，我看到了我的提交：

```
37c661799950211c713630301cf8cbe609de6c59 f94366329fa93cec529b83b34a607449725f5270 [user info removed] 1360710557 -0700  commit: Shout page
f94366329fa93cec529b83b34a607449725f5270 b588ed19e77ef55611a4a82896c5ef2c26f3e4cd [user info removed] 1360710567 -0700  checkout: moving from master to     b588ed19e77ef55611a4a82896c5ef2c26f3e4cd^0
b588ed19e77ef55611a4a82896c5ef2c26f3e4cd b588ed19e77ef55611a4a82896c5ef2c26f3e4cd [user info removed] 1360710576 -0700  rebase finished: returning to refs/heads/master 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:43:56.623

尝试使用`git reflog`来查找丢失提交的哈希。然后，您可以使用`git cherry-pick`,`git merge`或`git reset --hard`（取决于您想对丢失的历史执行什么操作）来恢复。如果您需要查看差异以识别您的提交，请使用`git reflog -p`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:11:47.777

您可能首先进行了本地提交，不是吗？首先检查您当地的分支机构：

```
git log --oneline 
```

不确定您做了什么，但如果在推送时发生合并冲突，您仍然应该在本地进行更改。

# linq - 用于选择实体的不同列的动态谓词

> ID：14855448
> 
> 赞同：0
> 
> 时间：2013-02-13T14:09:45.753
> 
> 标签：linq, entity-framework, entity, predicate

我需要根据用户选择的页面模式在网格中显示实体的所有或更少属性。例如我有三种页面模式

```
Minimal (will show 8 properties of an entity in the grid)

Standard (will show 12 properties of an entity in the grid)

Extended (will show 15 properties of an entity in the grid) 
```

如何使 Select 谓词动态化以根据用户页面模式包含指定的实体列数。假设我有 15 个属性的实体公司我想做这样的事情

```
dbContext.Companies.Select([predicate for choosing different no of columns?]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:30:49.400

您无法使用[Predicates](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)解决此问题，因为它们总是返回`bool`。

你需要的是一个函数表达式，它接受一个`Company`对象作为参数并返回一个`object`. 具体来说，你需要一个`Expression<Func<Company, object>>`.

这是您可以定义三种选择类型的方式：

```
Expression<Func<Company, object>> minimal = e => new { e.Prop1, ..., e.Prop8 };
Expression<Func<Company, object>> standard = e => new { e.Prop1, ..., e.Prop12 };
Expression<Func<Company, object>> extended = e => new { e.Prop1, ..., e.Prop15 }; 
```

然后根据需要使用它们：

```
dbContext.Companies.Select(minimal);
// or
dbContext.Companies.Select(standard);
// or
dbContext.Companies.Select(extended); 
```

# xdebug - zend studio xdebug 分析按钮不可点击

> ID：14855453
> 
> 赞同：0
> 
> 时间：2013-02-13T14:10:19.873
> 
> 标签：xdebug

视窗+PHP+阿帕奇

除分析之外的调试工作。“个人资料”btn。选择zend调试器作为调试器服务器时是可点击的，但选择xdebug时会变成灰色且不可点击。zend studio 支持 xdebug 分析吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:47:53.693

ZendStudio 不支持使用 xdebug 进行分析（仅使用 ZendDebugger）

# ruby - 我的班级正在调用一个不存在的班级？

> ID：14855459
> 
> 赞同：1
> 
> 时间：2013-02-13T14:10:35.787
> 
> 标签：ruby, ruby-on-rails-3

我正在使用：

*   红宝石 1.9.2
*   导轨 3.1.10

这是我的代码：

```
class Report::ExpectedHour

  def initialize(user, options = {})
    @user       = user
    @date_start = options[:start]
    @date_end   = options[:end]
  end

  def expected_hours_range
    previous    = ExpectedHour.previous_dates(@user, @date_start).first
    hours_range = ExpectedHour.between_dates(@user, @date_start, @date_end)

    unless hours_range.include?(previous)
      hours_range << previous
    end

    hours_range
  end

end 
```

每次`expected_hours_range`从我的实例调用时，我都会收到此错误：

```
NameError: uninitialized constant Report::ExpectedHour::ExpectedHour
from /home/edelpero/.rvm/gems/ruby-1.9.2-p180@titi/gems/aws-s3-0.6.2/lib/aws/s3/extensions.rb:206:in `const_missing_from_s3_library'
from /opt/lampp/htdocs/titi/app/models/report/expected_hour.rb:10:in `expected_hours_range' 
```

我不确定为什么`Report::ExpectedHour::ExpectedHour`会被调用，因为我调用`ExpectedHour`的是一个实际存在的 ActiveRecord 类。也不`Report::ExpectedHour::ExpectedHour`存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:14:23.630

在类方法中调用类时，ruby 期望它是嵌套在类本身中的类或常量。试试这个：

```
class MyClass
  def some_method
    use_external_class = ::ExternalClass::CONSTANTB.bla
    # Use the '::'
  end
end 
```

# sql-server - 使用日期转换更新查询会出现问题

> ID：14855461
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:10:37.130
> 
> 标签：sql-server

我编写了一个查询来尝试使用 EVENTID 字段（datetime，null）+ 180 天的日期更新 MAINTAINANCESCHEDULE 字段（datetime，null）。我刚刚开始使用 SQL，并且对如何解决问题有点困惑。我得到的错误是：消息 102，级别 15，状态 1，第 1 行“<”附近的语法不正确。

我的查询目前看起来像这样有人可以在这里帮助我吗？

```
UPDATE UDStay SET "MAINTAINANCESCHEDULE" = "EVENTARRIVED" < CONVERT (DATETIME(8), DATEADD (DAY, +180, CURRENT_TIMESTAMP), 112) + '0000')
WHERE CONTRACT = 'sde' AND "EVENTDEPARTED" IS NULL AND "EVENTCURRENT" = 'ARRIVED'
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:45:46.643

根据您的问题，您可以使用以下查询。

```
UPDATE UDStay SET MAINTAINANCESCHEDULE =  DATEADD(day,180,EVENTID)
WHERE CONTRACT = 'sde' AND EVENTDEPARTED IS NULL AND EVENTCURRENT = 'ARRIVED'

GO 
```

我从您的查询中忽略了条件“EVENTARRIVED”<”。正如您在问题中所说，您需要在 EVENTID 列中添加 180 天，然后此查询将起作用。

请让我知道这是否是您需要的。

# c - 在 Windows 上执行映射文件

> ID：14855467
> 
> 赞同：0
> 
> 时间：2013-02-13T14:11:04.080
> 
> 标签：c, winapi, createprocess, file-mapping

各位开发者您好，

我正在尝试在 Windows 上映射一个可执行的二进制文件，然后执行映射的文件。

到目前为止，我使用`CreateFileMapping`和管理映射`MapViewOfFile`。这些函数给了我一个映射文件的句柄和一个指向映射数据的指针，但我不知道如何执行映射的二进制文件。我想我应该使用这个`CreateProcess`函数，但它应该作为参数给出什么？

```
char *binaryPath = "C:/MyExecutable.exe";

// Get the binary size
std::fstream stream(binaryPath, std::ios::in | std::ios::binary);
stream.seekg(0, std::ios::end);
unsigned int size = stream.tellg();

// Create a mapped file in the paging file system
HANDLE mappedFile = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_EXECUTE_READ, 0, size, NULL);

// Put the executable data into the mapped file
void* mappedData = MapViewOfFile(mappedFile, FILE_MAP_READ | FILE_MAP_EXECUTE, 0, 0, size);

stream.read((char*)mapping, size);
stream.close();

// What should I do now ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:52:06.923

没有本地方法可以运行驻留在内存中的原始可执行映像。 `CreateProcess()`是运行可执行映像的官方方式，但该映像必须驻留在文件系统上。操作系统将图像加载到内存中，然后根据需要对其进行修补（解析 DLL 引用等），以便它实际上可以正确运行。

话虽如此，我看到第三方代码漂浮在周围，复制了操作系统在将可执行映像加载到内存时所做的事情。但我只见过与 DLL 一起使用（因此代码不必使用`LoadLibrary/Ex()`内存中的 DLL），而不是与 EXE 一起使用。

# oracle - 无法写入文件。甲骨文

> ID：14855472
> 
> 赞同：0
> 
> 时间：2013-02-13T14:11:30.857
> 
> 标签：oracle, permissions, directory

我正在尝试执行这些行：

```
DECLARE
    V_FILEHANDLE UTL_FILE.FILE_TYPE;
BEGIN
    V_FILEHANDLE := UTL_FILE.FOPEN('C:\samples', '1.csv', 'w');
    UTL_FILE.PUT_LINE(V_FILEHANDLE, 'sample string');
    UTL_FILE.FCLOSE_ALL;
END; 
```

以前我已经成功执行了这些语句：

```
create directory sample as 'C:\samples'; 
```

（虽然我在驱动器上找不到目录`C:\`？）但这给了我这样的输出：

> ORA-29280: “无效的目录路径”
> 
> ***原因**：对应的目录对象不存在。
> 
> ***操作**：更正目录对象参数，或使用 CREATE DIRECTORY 命令创建相应的目录对象。

我还尝试向我的用户名授予特权：

```
grant read, write on directory sample to brick; 
```

但这给了我一个像

> ORA-01749: 您不能授予/撤销您自己的权限

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:15:19.087

代替

```
V_FILEHANDLE := UTL_FILE.FOPEN('C:\samples', '1.csv', 'w'); 
```

和 ：

```
V_FILEHANDLE := UTL_FILE.FOPEN('SAMPLE', '1.csv', 'w'); 
```

如[文档中所示](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm#i1003526)，第一个参数是目录对象*名称*。

* * *

在旧版本的 Oracle 中，第一个参数`UTL_FILE.open` [曾经是目录路径](http://docs.oracle.com/cd/A87860_01/doc/appdev.817/a76936/utl_fil2.htm#1000987)`DIRECTORY`，但自从引入对象后（在 9i 中？），这已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T07:43:23.480

非常感谢你！我发现了我的错误。我正在创建目录

```
create or REPLACE DIRECTORY dat_dir as '/u01/oracle/Desktop/Migration/Data';
```

然后我像这样在我的 UTL_FILE 中使用它

```
file1 := utl_file.fopen('dat_dir','output.txt','w');
```

我已经尝试了 3 天了。我发现了问题，因为它在引号中，所以它是一个区分大小写的字符串。最初我是否提示 dat_dir 并不重要，oracle 以大写形式存储此类内容。您简单的回答帮助我意识到了这一点，谢谢您一百万次！

正确的做法是：

```
file1 := utl_file.fopen('DAT_DIR','output.txt','w');
```

# ajax - 如何抑制 jsTree 中的 AJAX 调用？

> ID：14855475
> 
> 赞同：1
> 
> 时间：2013-02-13T14:11:33.893
> 
> 标签：ajax, jstree

我使用 ajax 作为我的数据源，您可以从下面的代码中看到。但是，我还需要以编程方式将节点插入树中。当我这样做时，jsTree 在创建节点后进行 ajax 回调。有没有办法根据节点属性来抑制这种情况？在我的特定情况下，我有在 CORBA 名称服务中列出的节点和未列出的节点。CORBA 名称服务中的那些运行良好，并且可以通过 AJAX 获得。我想将属性为“ns”=“none”的任意节点插入树中，而不是让它进行 ajax 调用。这是我的代码：

```
function renderJsonTree() {
    $("#JsonTree").jstree({
        "plugins" : [ "json_data", "types", "themes", "ui", "cookies" ],
        "ui" : {"select_limit" : 1},
        "json_data" : {
            "ajax" : 
                {
                    "url":"lookup",
                    "data":function(n) {
                        return {"server":n.attr?n.attr('data-ns'):'',
                            "longName":n.attr?n.attr('data-longname'):'',"isObj":n.attr?n.attr('data-isObj'):'n'};
                    }
                }
        },
        "types": {
            "valid_children" : [ "nameServer" ],
            "types" : {
                "nameServer": {
                    "icon": {"image":"/corba_browser/static/images/drive.png"},
                    "valid_children" : [ "default" ],
                },
                "global": {
                    "icon": {"image":"/corba_browser/static/images/globe.png"},
                    "valid_children" : [ "default" ]
                },
                "object": {
                    "icon": {"image":"/corba_browser/static/images/alien.png"},
                    "valid_children" : [ "default" ]
                },

                "default" : {"valid_children" : [ "default" ]}
            }
        }
    }).bind("loaded.jstree", function (event, data) {
        jQuery("li").css('line-height', "15pt");
        jQuery("li").css('font-size', "12pt");
    }).bind("open_node.jstree close_node.jstree", function (e,data) {
        jQuery("li").css('line-height', "15pt");
        jQuery("li").css('font-size', "12pt");
        var currentNode = data.args[0];
        if(e.type === "close_node") {
            currentNode.addClass("to-be-refreshed");
        }   
        if(e.type === "open_node") {
            if (currentNode.attr('ns')!='none') {
                if (currentNode.hasClass("to-be-refreshed")) { 
                    var tree = $.jstree._reference("#JsonTree");
                    tree.refresh(currentNode);
                }  
            }
        }
    }); 
```

};

# c - 不带 * 的整数乘法

> ID：14855476
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:11:34.810
> 
> 标签：c

我在其中一个网站上看到一个 C 语言的面试问题，要求你编写一个函数，该函数获取 2 个整数、num 和 times，并在不使用 * 运算符的情况下将它们相乘，这意味着主要使用左移和右移。我想出了一个可行的答案（除非有人发现错误），但是有没有人有更好的方法在更好的时间或内存消耗中解决它？

这是我写的：

```
#include <stdio.h>

int multiply_with_shift (int num, int times)
{
   int cnt=0;
   int org_times=times;
   if((num & times)==0)
       return 0;
   else
   {
   while(times >1)   
   {
      times=  times >> 1;
      cnt++;
   }
   int val= 1;
      val= val <<cnt;              
   int sub= org_times-val;         
   int res= num << cnt;            
   for( int i=0 ; i < sub; i++)    
   {
      res+=num;
   }
      return res;
   }
}

void main()
{
    int tmp;
    tmp=multiply_with_shift(5,15);
    printf(" the answer is : %d \n", tmp);
    printf("\n");
} 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T14:21:42.880

这是一个更简洁和无错误（我相信）的实现，它甚至不会调用未定义的行为：

```
unsigned mul(unsigned a, unsigned b)
{
    unsigned acc = 0;
    while (b) {
        if (b & 1) acc += a;
        b >>= 1;
        a <<= 1;
    }
    return acc;
} 
```

您的代码有几个缺陷：

1.  可读性，长度等...
2.  `if ((num & times) == 0) return 0;`-> 对于在其二进制表示中不共享至少一个 2 的公共幂的数字，这将返回 0，即`4 * 8 = 0`.
3.  在 C 语言中，符号位的移位是未定义的行为——您需要为此任务使用无符号整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:41:50.360

如果您想要一个有符号整数变体，这将起作用：

```
int mul(int a, int b)
{
    sign = (a ^ b) >> (sizeof(a) * CHAR_BIT - 1);
    if (a > 0)
        a = -a;
    if (b > 0)
        b = -b;
    int acc = 0;
    while (b) {
        if (b & 1) acc += a;
        b >>= 1;
        a <<= 1;
    }
    if (sign) acc = -acc;
    return acc;
} 
```

[归功于 H2CO3 在另一篇文章中对大部分算法的实现]

# eclipse - eclipse 看不到基本库

> ID：14855477
> 
> 赞同：0
> 
> 时间：2013-02-13T14:11:39.287
> 
> 标签：eclipse

我尝试将 Eclipse 3.7.2 与 ubuntu 12.10 一起使用。

当我使用命令行时没问题（安装了所有必需的 jdk 和 jre 库）。但是，如果我尝试用 eclipse 编写一个简单的“Hello World”，我会发现它对 Object 类、String 类等一无所知

我试图向 eclipse 展示基本的 .jar 文件在哪里，但我没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:18:35.810

在eclipse中，右键单击您的项目转到“属性-> Java BuildPath->库”单击“添加库”->“选择JRE系统库”->“选择您的JRE”->“完成”->“确定”

现在，您的项目已配置为使用选定的 JRE 版本。

![在此处输入图像描述](../Images/c990c5d01996978e32e9378d8615015d.png) 希望能帮助到你。

# c++ - Unsigned int 在发布模式下的行为不同

> ID：14855481
> 
> 赞同：1
> 
> 时间：2013-02-13T14:11:56.140
> 
> 标签：c++, visual-studio-2012, unsigned-integer, cpuid

我有一个奇怪的问题，在调试模式下这段代码工作正常：

```
char* PCInformation::GetCPUName()
{
    if (CPUName[0] == '\0')
    {
        _memset(CPUName, 0, 0x3F);
        // Get extended ids.
        int CPUInfo[4] = {-1};
        __cpuid(CPUInfo, 0x80000000);
        unsigned int nExIds = CPUInfo[0];

        printf(3, "%d\n%d\n", nExIds, 0x80000000);

        // Get the information associated with each extended ID.
        for(unsigned int i=0x80000000; i<=nExIds; ++i)
        {
            printf(3, "0x80000000 nExIds: %X, i: %X\n", nExIds, i);
            getchar();
            __cpuid(CPUInfo, i);

            // Interpret CPU brand string and cache information.
            if  (i == 0x80000002)
            {
                _memcpy( CPUName,
                CPUInfo,
                sizeof(CPUInfo));
            }
            else if( i == 0x80000003 )
            {
                _memcpy( CPUName + 16,
                CPUInfo,
                sizeof(CPUInfo));
            }
            else if( i == 0x80000004 )
            {
                _memcpy(CPUName + 32, CPUInfo, sizeof(CPUInfo));
            }
        }
    }

    return CPUName;
} 
```

*来源：[http ://weseetips.com/2009/06/21/how-to-get-the-cpu-name-string/](http://weseetips.com/2009/06/21/how-to-get-the-cpu-name-string/)*

**编辑：（** *这就是 _functions 的样子）*

```
BOOL CallDynamic(const char* szModule, const char* szFunction, DWORD* dwReturn, size_t argc, ... );
#define printf(argc, ... ) (CallDynamic(MSVCRT, "printf", NULL, argc, __VA_ARGS__ )) //number arguments, arguments 
```

如果您想知道为什么 STD-C 函数有 _，那是因为它们是动态调用的，但这**不是**问题。（因为以前的代码可以正常工作，但我把它放在一个类中，然后 bahm！）

无论如何，如果我选择 Release (as Build Mode) *(int) 我*包含一些奇怪的值或其他东西。更多声明一些图片：

**发布** ![发布构建](../Images/dc49eb89b2de9c85de5a1a8e06ac5aa5.png)

**调试** ![调试构建](../Images/aacf3ba3fc9451a1be1bcc997efcbf69.png) 在发行版中，它以无限的 for 循环结束。

**编辑：**我刚刚将代码更改为：

```
char* PCInformation::GetCPUName()
{
    if (CPUName[0] == '\0')
    {
        _memset(CPUName, 0, 0x3F);

        int CPUInfo[4];
        _memset(CPUInfo, 0, 4);

        __cpuid(CPUInfo, 0x80000000);
        _memcpy(CPUName, CPUInfo, sizeof(CPUInfo));

        __cpuid(CPUInfo, 0x80000002);
        _memcpy(CPUName + 16, CPUInfo, sizeof(CPUInfo));

        __cpuid(CPUInfo, 0x80000003);
        _memcpy(CPUName + 32, CPUInfo, sizeof(CPUInfo));

        __cpuid(CPUInfo, 0x80000004);
        _memcpy(CPUName + 48, CPUInfo, sizeof(CPUInfo));
    }

    return CPUName;
} 
```

尽管如此，我仍然想知道是什么原因造成的。

问候，

# php - 我需要重定向所有页面，除了带有 POST 数据的 1 页

> ID：14855485
> 
> 赞同：0
> 
> 时间：2013-02-13T14:12:02.693
> 
> 标签：php, json, redirect

我需要将旧域的请求重定向到新域，同时保留旧域中的页面。

*   page.json 包含发布数据并将在旧域上处理
*   带有发布数据的 data.json，需要重定向到新域
*   带有发布数据的 stat.json 需要重定向到新域...并继续

编辑：简而言之，所有带有发布数据的 .json 都会重定向到新域，除了 1 页

如果可能的话，我怎样才能完成它？我使用提琴手在原始视图中进行调试

重定向之前（使用 .htaccess 方法）

```
POST http://old.com/data.json HTTP/1.1
Content-Type: application/x-www-form-urlencoded
User-Agent: Dalvik/1.6.0 (Linux; U; Android 4.1.2; GT-N7105 Build/JZO54K)
Host: old.com
Connection: Keep-Alive
Accept-Encoding: gzip
Content-Length: 100

session=gVgr30Erxf03cDaA&store_version=9203b&inventory_version=123 
```

重定向后

```
GET http://new.com/data.json HTTP/1.1
Content-Type: application/x-www-form-urlencoded
User-Agent: Dalvik/1.6.0 (Linux; U; Android 4.1.2; GT-N7105 Build/JZO54K)
Host: new.com
Connection: Keep-Alive
Accept-Encoding: gzip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:24:40.533

`.htaccess`与[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)一起使用

```
RewriteEngine On
RewriteRule ^page\.json$  -                        [L]
RewriteCond %{REQUEST_METHOD} =POST
RewriteRule ^(.*\.json)$  http://newdomain.com/$1  [R=307,QSA] 
```

*   第二行说：如果页面匹配 'page.json' 则不要更改并停止重写`[L]`。
*   第 3 行说：只做重写 POST 请求
*   第 4 行说：计算以 '.json' 结尾的任何内容，并[临时重定向](http://en.wikipedia.org/wiki/HTTP_307#3xx_Redirection) `[R=307]`到[http://newdomain.com/](http://newdomain.com/) {page}。还要添加任何 URL 参数`[QSA]`。

* * *

## 概念证明

.htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_METHOD} =POST
RewriteRule ^$  http://test.jasny.net/redirect/posthere.php  [R=307,QSA] 
```

索引.html

```
<form action="/redirect/" method="POST">
  <input type="text" name="test">
  <button type="submit">Submit</button>
</form> 
```

postthere.php

```
<?
  var_dump($_POST); 
```

## [看它工作](http://test.jasny.net/redirect/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:45:03.790

我同意 arnold，.htaccess，但如果你只想要带有 $_POST 数据的请求，那么我将创建一个处理请求的小 php 文件，测试它是否包含帖子然后重定向到你的旧域，如果不重定向到新域

.htaccess

```
RewriteCond %{REQUEST_METHOD} =POST
RewriteRule ^foo/bar$ http%1://www.example.com%{REQUEST_URI} [L,R=301] 
```

或将所有流量重定向到 php 文件并执行以下操作：

```
if( count( $_POST ) < 1 ) {
    header( "HTTP/1.0 301 Moved Permanently" ); 
    header( "Status: 301" );
    header( "Location: http://".CLIENT_DOMAIN."{$_SERVER['REQUEST_URI']}");     
    die();//or exit;
}else{////same} 
```

# validation - 排序表达式中的字段验证错误

> ID：14855495
> 
> 赞同：1
> 
> 时间：2013-02-13T14:12:42.277
> 
> 标签：validation, reporting-services, field

我的 tablix 中的排序公式有问题。排序总是如下：

```
cint(Fields!KeyForRows.Value) 
```

但现在这些字段可以包含字母数字值。所以我尝试将其更改为：

```
iif(Parameters!DrillMain.Value ="...", Fields!KeyForRows.Value, cint(Fields!KeyForRows.Value)) 
```

但这不起作用。据我了解，这是因为我的案例排序是 `Fields!KeyForRows.Value`，它检查条件的另一部分并且验证失败，我需要将排序保留为整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:54:24.560

是的，你对 iif 逻辑是正确的 - 它计算了两个语句。作为一种解决方法，您可以定义您的自定义 IIF 或编写您的表达式，如下所示：

```
IIF(Parameters!DrillMain.Value ="...", Fields!KeyForRows.Value, 
          cint(IIF(Parameters!DrillMain.Value ="...", Nothing, Fields!KeyForRows.Value))) 
```

感谢第二个嵌套 iif 您永远不会将无效数据传递给 CInt 函数。如果 KeyForRows 是字母，那么在 CInt 中你传递 Nothing 而不是 KeyForRows 值。

# asp.net-mvc - 如何将数组/模型对象传递到主布局页面

> ID：14855496
> 
> 赞同：1
> 
> 时间：2013-02-13T14:12:46.823
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我创建了一个 xml 文件 (layout.xml) 以将其内容呈现到布局页面，

Action LoadPage 用于反序列化此 xml。

```
var ser = new XmlSerializer(typeof(MyModel));

string path = Server.MapPath(Url.Content("~/LayoutConfig/layout.xml"));

var arrList = (MyModel)ser.Deserialize(File.OpenRead(path)); 
```

如何将 arrList 传递给 mvc 主布局页面。

我尝试将`ViewBag.Data = arrList;`其设置为仅适用于我知道 ViewBag 实际上只是 ViewData 对象的包装器的特定控制器操作，其目的是使用动态来访问数据而不是使用魔术字符串

我尝试了一个肮脏的黑客，即`@Html.Action("LoadPage","Main")`主layot页面，它对我不起作用..

我的问题是每次调用时都可以在主布局页面中获取 arrList 。

任何指导和帮助表示赞赏..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:42:26.170

好吧，如果你在每个视图中都有这个键，`ViewBag`你可以在布局页面上阅读。你可以创建自己的基控制器，它继承自`Controller`类并覆盖`OnActionExecuting`方法，以填充 ViewBag 上的这个属性。在您的控制器中，您应该从这个自定义基本控制器继承，并且您将在 ViewBag 上的所有视图中获取此键，例如 asp.net mvc`Title`对 ViewBag 上的属性所做的操作。样品：

```
public class InfoController : Controller 
{   
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var ser = new XmlSerializer(typeof(MyModel));
        string path = Server.MapPath(Url.Content("~/LayoutConfig/layout.xml"));
        var arrList = (MyModel)ser.Deserialize(File.OpenRead(path));

        ViewBag.ArrayInfo = arrList;

        base.OnActionExecuting(filterContext);
    }
} 
```

在其他控制器中：

```
public class HomeController : InfoController 
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

# logging - ossec 选择性监控与完整系统监控？

> ID：14855500
> 
> 赞同：0
> 
> 时间：2013-02-13T14:12:57.487
> 
> 标签：logging, intrusion-detection

我在 Web 服务器匹配上使用 ossec 配置，它为我的组织托管一个非常关键的应用程序。我想知道如何使用 ossec 来监控系统的变化？

我是 ossec 使用的新手，但常识表明我是否正在监视每个文件（例如主机、netstat 输出）。在这种情况下，ossec 是否在目标服务器指南上提供最佳实践（值得关注的前 10 项列表）来帮助像我这样的人。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:58:20.170

您似乎感兴趣的是 OSSEC 的完整性检查功能。您可以先查看[http://www.ossec.net/doc/manual/syscheck/index.html](http://www.ossec.net/doc/manual/syscheck/index.html)中该功能的文档。最后有一些示例和常见问题解答部分。

尽管如此，OSSEC 最强大的功能是日志聚合和分析，除了检查文件完整性之外，您还可以密切关注 Web 服务器的日志以查找可能的错误。您还应该考虑在服务器上运行 OSSEC 代理并将 OSSEC 服务器放在其他地方。有太多的考虑要在一篇文章中简单解释一下，如果你真的有兴趣，我建议你去看看这本书[OSSEC Host-Based Intrusion Detection Guide](https://rads.stackoverflow.com/amzn/click/com/159749240X)，它不会太长，而且很详细。

# ios - 立即停止方法/对象？

> ID：14855504
> 
> 赞同：1
> 
> 时间：2013-02-13T14:13:14.470
> 
> 标签：ios, xcode, multithreading

这是我关于stackoverflow的第一个问题。我正在开发一个 iOS 应用程序，该应用程序使用来自网络上的 MySQL 服务器的数据。我创建了一个名为“DataController”的类，它完全管理同步过程并使用带有委托的 NSURLConnection 来检索信息、解析它并将其存储在 CoreData 模型中。它在这个过程中使用了几种方法，如下所示：

> [self.dataControllerObject 同步学生]
> 
> *调用*syncStudents*
> --> 从服务器获取下载列表
> --> 存储必须在 NSArray-property 中下载的所有元素的 ID
> --> 调用*syncNextStudent**
> 
>  **调用*syncNextStudent*
> --> 从 NSArray-property 获取第一个元素
> --> 建立 NSURLConnection 以检索数据*
> 
>  **调用*connectionDidFinishLoading*
> --> 数据存储在 CoreData
> --> 从 NSArray-property 中删除 ID
> --> 调用*syncNextStudent**
> 
>  **syncNextStudent*最终没有剩余数组元素并完成该过程。***

 **我希望我明确了功能。现在这是我的问题：

**如何中止整个过程，例如当用户现在不想同步并点击某个按钮时？**

我尝试创建 DataController 对象并使用 [self performSelectorInBackground:@selector(startSyncing) withObject:nil] 在另一个线程中调用 syncStudents 方法，但现在我的 NSURLConnection 不会触发任何委托方法。

我能做些什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:05:07.213

你应该看看使用`NSOperation`s 和 an`NSOperationQueue`而不是`performSelectorInBackground:`. 这使您可以更好地控制需要在后台执行的一批任务以及一次取消所有操作。这是我的建议。

将 a声明`NSOperationQueue`为属性

```
@property (nonatomic, retain) NSOperationQueue *operationQueue; 
```

然后在你的实现文件中实例化它：

```
_operationQueue = [[NSOperationQueue] alloc] init]; 
```

创建`NSOperation`将执行处理的派生类。

```
@interface StudentOperation : NSOperation

// Declare a property for your student ID
@property (nonatomic, strong) NSNumber *studentID;

@end 
```

然后遍历您必须创建操作的任何集合。

```
for (NSSNumber *studentID in studentIDs) { // Your array of ids
    StudentOperation *operation = [[StudentOperation alloc] init];

    // Add any parameters your operation needs like student ID
    [operation setStudentID:studentID];

    // Add it to the queue
    [_operationQueue addOperation:operation]; 
} 
```

当你想取消时，只需告诉操作队列：

```
[_operationQueue cancelAllOperations]; 
```

请记住，这将立即取消*当前未处理*的所有排队操作。如果您想停止当前正在运行的任何操作，您必须将代码添加到您的`NSOperation`派生类（`StudentOperation`上面）来检查这一点。因此，假设您的`NSOperation`代码正在运行它的 main() 函数。您需要定期检查`cancelled`标志是否已设置。

```
@implementation StudentOperation

- (void)main
{
    // Kick off your async NSURLConnection download here.
    NSURLRequest *theRequest = [NSURLRequest requestWithURL...

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    // ...
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the data
    [receivedData appendData:data];

    // Check and see if we need to cancel
    if ([self isCancelled]) {
        // Close the connection. Do any other cleanup

    }
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:22:23.577

您可以做的是创建一个公开的 BOOL**属性** *doSync*。

每当你的呼唤

*调用*了 syncStudents或调用*了 syncNextStudent*或*connectionDidFinishLoading*

检查

```
if(doSync){
    // *syncStudents is called* OR
    // *syncNextStudent is called* OR
    // *connectionDidFinishLoading* 
} 
```

不，您可以将 doSync 更改为**FALSE**以停止您的进程。

```
 self.dataControllerObject.doSync = FALSE; 
```**

# oracle - 触发器 - 选择计数到 - ORA-04091

> ID：14855506
> 
> 赞同：0
> 
> 时间：2013-02-13T14:13:21.177
> 
> 标签：oracle, triggers, oracle11g

我想在表（CMS_CONTENT_ENROLLMENT）上插入或更新，然后对同一个表进行计数并将结果更新到另一个表中。可悲的是，我收到了**ORA-04091：表名正在发生变化，触发器/函数可能看不到它**

```
CREATE OR REPLACE TRIGGER CMS_CONTENT_ENROLLMENT_CNT_TR
    AFTER INSERT OR UPDATE
    ON CMS_CONTENT_ENROLLMENT
    FOR EACH ROW
DECLARE
BEGIN
    UPDATE CMS_CONTENT CNT
    SET CNT.REGISTRATIONCOUNT =
    (
        SELECT COUNT (ENROLLMENTID)
        FROM CMS_CONTENT_ENROLLMENT
        WHERE DELETED = 0 AND CONTENTID = CNT.CONTENTID
    )
    WHERE CNT.CONTENTID = :NEW.CONTENTID;
END;
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:44:01.277

*警告语*：我认为在触发器中嵌入复杂的应用程序逻辑代码不是一个好主意，因为代码分布在许多对象之间，并且很难测试和维护。通常 ORA-04091 表明您正在尝试执行一些对于触发器来说过于复杂的事情。这可以被规避，但会导致复杂的逻辑在某些方面经常存在缺陷，尤其是在像数据库这样的多用户环境中。出于这个原因，如果您想要一个汇总表，我建议您使用常规视图、物化视图或程序逻辑。

如果您无论如何都想使用触发器，则可以使其与增量逻辑一起使用，如下所示（未经测试，假设您从未更新`contendid`，即`deleted`NOT NULL，您从未真正从表中删除并且该行存在于摘要中桌子）：

```
CREATE OR REPLACE TRIGGER CMS_CONTENT_ENROLLMENT_CNT_TR
   AFTER INSERT OR UPDATE ON CMS_CONTENT_ENROLLMENT
   FOR EACH ROW
DECLARE
BEGIN
   IF :NEW.deleted = 0 AND ((inserting) OR :OLD.deleted != 0) THEN
      UPDATE CMS_CONTENT CNT
         SET CNT.REGISTRATIONCOUNT = CNT.REGISTRATIONCOUNT + 1
       WHERE cnt.contentid = :NEW.contentid;
   ELSIF :NEW.deleted != 0 AND :OLD.deleted = 0 THEN
      UPDATE CMS_CONTENT CNT
         SET CNT.REGISTRATIONCOUNT = CNT.REGISTRATIONCOUNT - 1
       WHERE cnt.contentid = :NEW.contentid;
   END IF;
END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:17:51.770

您的`FOR EACH ROW`触发器正在查询它插入/更新的同一个表。由于触发器会针对每一行触发，因此查询的结果（如果允许）将取决于处理行的顺序是不确定的 - 这是不合逻辑的，因此 Oracle 将`ORA-04091: table name is mutating, trigger/function may not see it`.

此外，我强烈赞同 Vincent 关于在多用户（甚至多会话）环境中编写基于触发器的逻辑的警告。Oracle 将允许您的代码的多个版本同时运行，并且它们在提交之前不会看到彼此的更改。您的触发器将已经“计算”了当时它可以看到的行，这可能意味着*两个*会话都会出错。

解决这个问题的唯一方法是（a）构建您的应用程序，以便它不需要在任何地方存储计数，而是在需要时动态查询它；或者 (b) 引入某种形式的序列化来阻止多个进程同时尝试对表进行插入/更新。

我强烈推荐选项（a）。选项 (b) 很容易出错，除非您首先非常了解 Oracle 的工作原理。

# ios - 如何在objective-c中使用类变量，如“MyClassName.var”？

> ID：14855509
> 
> 赞同：1
> 
> 时间：2013-02-13T14:13:28.017
> 
> 标签：ios, objective-c

我想在objective-c类中声明静态类变量，并想直接使用类名来使用它们

例如

有一个名为“Myclassname”的类和变量“Var”

并希望像这样访问这个变量....

Myclassname.Var=@"hi";

我不想使用 getter 和 setter。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:40:53.953

不使用`.`语法访问变量 - 它们是 getter 和 setter。正如@bbarnhart 指出的那样，您唯一的选择是手动声明类getter 和setter。

```
@interface Myclassname

+(NSString *)var;
+(void)setVar:(NSString *)newVar;

@end 
```

并实现这些方法来访问/设置支持`static`变量。

无论如何，这并不是一个好主意，也不符合 Objective-C 风格。您应该考虑改用[单例](https://stackoverflow.com/questions/145154/what-should-my-objective-c-singleton-look-like)和属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:05:12.857

我不明白为什么你不能像这样使用 -> 语法：

```
Myclassname->var = @"Hi"; 
```

# java - 为什么我的 Com4J 接口在迭代期间挂起？

> ID：14855510
> 
> 赞同：1
> 
> 时间：2013-02-13T14:13:28.967
> 
> 标签：java, com4j

我必须将第三方 COM API 连接到 Java 应用程序中。所以我决定使用Com4j，到目前为止我很满意，但是现在我遇到了问题。

运行后，`tlbgen`我有一个`IAddressCollection`根据原始 API 文档调用的对象符合`IEnum`接口定义。该对象提供了一个`iterator()`返回`java.util.Iterator<Com4jObject>`. 该对象来自另一个对象`IMessage`，当我想查找消息的所有地址时调用。所以我希望代码能像这样工作：

```
 IAddressCollection adrCol = IMessage.getAddressees();
 Iterator<Com4jObject> adrItr = adrCol.iterator();
 while(adrItr.hasNext()){
      Com4jObject adrC4j = adrItr.next();
      // normally here I would handle the queryInterface 
      // and work with the rest of the API
 } 
```

我的问题是，当我尝试`adrItr.next()`什么都没有发生时，代码停止工作但挂起。没有抛出异常，我通常必须通过任务管理器将其杀死。所以我想知道这是一个常见的问题`Com4j`，还是我处理错了，或者它可能是 API 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:46:00.967

好的，我讨厌回答我自己的问题，但在这种情况下，我发现了问题。问题在于底层 API。正如我所期望的那样，它`IAddressCollection`使用`1`基于索引而不是基于索引。`0`它没有在 API 文档中提供此信息。有一个`item`功能可以让我以这种方式拉出对象，因此我可以使用

```
 IAddressCollection adrCol = IMessage.getAddressees();
 for(int i = 1; i <= adrCol.count(); i++){
      IAddress adr = adrCol.item(i);
      // IAddress is the actual interface that I wanted and this works
 } 
```

很抱歉给您带来烦恼。

# android - 将 .apk 移植到 BlackBerry 10 - 外部 .jar 错误

> ID：14855512
> 
> 赞同：1
> 
> 时间：2013-02-13T14:13:36.423
> 
> 标签：android, blackberry-10, blackberry-android, android-async-http

我有一个想要移植到 BlackBerry 10 的 android 项目。根据 BB 在线重新打包工具，该项目与 BAR 兼容。因此，我使用他们的 Eclipse 插件添加了 BlackBerry 特性并将其加载到 BB 10 Simulator 中。但是应用程序崩溃了，因为 BB 显然无法识别`android-async-http`项目中使用的库：

```
 02-13 08:22:14.228: E/AndroidRuntime(28778620): java.lang.ExceptionInInitializerError
 02-13 08:22:14.228: E/AndroidRuntime(28778620):    at java.lang.Class.classForName(Native Method)
 02-13 08:22:14.228: E/AndroidRuntime(28778620):    at java.lang.Class.forName(Class.java:234)
 02-13 08:22:14.228: E/AndroidRuntime(28778620):    at java.lang.Class.forName(Class.java:181)
 02-13 08:22:14.228: E/AndroidRuntime(28778620): Caused by: java.lang.NoClassDefFoundError: com.loopj.android.http.AsyncHttpClient 
```

我不知道 BlackBerry 10 系统架构，所以我有点迷茫。有什么办法让它在 BB10 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:09:48.977

这个库`com.loopj.android.http.AsyncHttpClient`似乎是 Android 的第三方库。[根据 BB10 Android Runtime 文档，目前不支持](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_software_features.html)使用第三方库。

> 添加库（不支持除“android.test.runner”之外的应用清单中的标记定义的所有库）

我不确定为什么在线打包程序没有将此报告为问题，但您可能希望查看 Eclipse 插件重新打包程序报告的内容。最后，您可能需要使用[AndroidHttpClient](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)之类的核心 Android API 调用替换您对这个库的使用。

# javascript - DS.ManyArray 的 Ember.js 大小

> ID：14855515
> 
> 赞同：3
> 
> 时间：2013-02-13T14:13:55.143
> 
> 标签：javascript, ember.js, ember-data

怎么做？简单的 JS`.length`返回未定义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T14:17:06.310

试试`.get('length');`吧，因为`ManyArray`有点特别。我只是`.get('length');`在 Ember 中一直使用这些天，以防止出现此类问题，否则您只会发现自己在混合`.get('length');`和`.length`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-05T23:19:14.550

对于任何 Ember 数组，您需要使用 .get('length')。只是想澄清这不是 ManyArray 独有的。

# iphone - 未找到 Social.framework

> ID：14855519
> 
> 赞同：1
> 
> 时间：2013-02-13T14:14:21.070
> 
> 标签：iphone, ios, facebook, sdk, linker

我正在尝试将 Facebook SDK 3.1 与我现有的 iOS 应用程序链接起来。基础 SDK 为 6.1，iOS 部署目标设置为 5.1。

我在项目中添加了 Social、Accounts 和 AdSupport 框架，并在 Build Phases > Link Binary with Libraries 中将它们设置为 Optional。我还尝试将它们与“其他链接器标志”中的 -weak_framework 手动链接。

但是，我总是以：

```
ld: framework not found AdSupport
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我究竟做错了什么？

提前致谢！

编辑：顺便使用 XCode 4.6 版！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:20:40.877

社交框架在 iOS6 中是新的，如果您支持 iOS5，则必须转到 Target Properties/Build Phases/Link Binary with Libraries 并将 Social framework 标记为 Optional，如图所示

![将框架标记为可选](../Images/f43bf66488c59602649a516d767d38e6.png)

# mysql - 两个表的join和select操作

> ID：14855523
> 
> 赞同：0
> 
> 时间：2013-02-13T14:14:28.043
> 
> 标签：mysql, sql, normalization, foreign-key-relationship

我有两张桌子

```
table1
=======
id   primary
sku
price
vendor

table2
=====
id    primary
sku
alt_sku 
```

基本上，我的搜索词将是 sku 或 alt_sku，基于它，我想从 table1 中选择数据

这样做的最佳方法是什么？我应该创建第三个表来存储 table1.sku 和 table2.sku /table2.alt_sku 之间的关系吗？或者我如何从 table1 获取数据

抱歉，如果这个问题非常愚蠢......我正在尝试学习 mysql，所以，我在 WP 上从未学习过基础知识

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:17:50.330

你到底想用 Table2 做什么？也许更好的方法如下：

```
Table1 
   id
   price
   vendor

Table2
   Table1Id
   Sku 
```

这样，您可以存储与 Table1 关联的 1-N 个 SKU。如果您只想要 2 个潜在的 SKU，那么您可以在 Table2 中添加一个 SkuType 字段 - 1 个用于主要，2 个用于备用，但这可能对您的需求来说太深了......

并查询：

```
SELECT T.*
FROM Table1 T
   JOIN Table2 T2 ON T.Id = T2.Table1Id
WHERE T2.Sku = 'SomeSku' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:20:13.203

我认为你的表结构应该是这样的：

```
table1
=======
id   primary
IdFromtable2
price
vendor

table2
=====
id    primary
sku
alt_sku 
```

您的选择查询将类似于：

```
SELECT t1.*
FROM   table1 t1
       INNER JOIN table2 t2 ON t1.IdFromtable2 = t2.Id
WHERE  t2.sku = @sku AND
       t2.alt_sku  = @alt_sku 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:21:15.993

基本上，表关系的手指规则如下：

如果关系是，`one-to-many`那么您应该将表中的 PK 保存为`many`表中的附加列`one`。

如果关系是`many-to-many`您应该创建第三个表（连接表）。该表将包含两个表中的两个 PK（对于每个 tbl1 PK，您将拥有所有 tbl2 PK，反之亦然）。

这样可以防止重复记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:21:16.040

您可以尝试[内部连接](http://www.w3schools.com/sql/sql_join_inner.asp)。假设`TERM`是您要搜索的 sku。

```
SELECT
  t1.*
FROM
  table1 t1
  inner join table2 t2 on (t1.sku = t2.sku)
WHERE
     t1.sku = 'TERM'
  or t2.alt_sku = 'TERM' 
```

# django - 如何运行 Django 上下文处理器

> ID：14855525
> 
> 赞同：1
> 
> 时间：2013-02-13T14:14:32.147
> 
> 标签：django

我在 Entertainment_website 包/应用程序中有“context_processors.py”

我配置了settings.py

```
TEMPLATE_CONTEXT_PROCESSORS = ("django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.core.context_processors.tz",
"django.contrib.messages.context_processors.messages",
"entertainment_website.context_processors.load_sidebar_vars") 
```

我想以某种方式调试/打印 context_processors.py 中的值。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:28:06.030

[django 调试工具栏](https://github.com/django-debug-toolbar/django-debug-toolbar)对此很有用。它的模板面板显示了所有渲染的模板，以及所有上下文处理器返回的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:19:01.960

您可以像这样打印一些值：

```
def some_context_processor(request):
    return {'system_name': 'test'} 
```

在你的 html 中：

```
{{ system_name }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:20:40.697

一般来说，对于 python 中的调试，只需添加`import pdb`到您希望调试的脚本顶部并`pdb.set_trace()`在您希望插入断点的任何行中使用。

运行服务器，当控件到达包含`pdb.set_trace()`查看您的开发服务器提示符的行时，您可以访问所有本地变量以检查哪些变量持有什么值。

# php - FTP fopen() 错误 550 — 不是普通文件

> ID：14855529
> 
> 赞同：0
> 
> 时间：2013-02-13T14:14:56.200
> 
> 标签：php, ftp

嗯，这是我以前从未见过的问题。

我正在尝试使用 PHP 流式传输 FTP 文件，`fopen()`并将`feof()`其从一台服务器复制到我自己的服务器。这在使用普通`http://`URL 时可以正常工作。但是，在使用该`ftp://`协议时，我收到以下错误：

```
fopen(ftp://.../streaming/planted2.mp4) [0function.fopen0]: failed to open stream: FTP server reports 550 /streaming/planted2.mp4: not a plain file. 
```

* * *

请记住，我已确认 URL 是正确的。

如果我将它弹出到浏览器的搜索栏中，它总是会正确加载。

`feof()`在此错误之后，任何在包装器上使用或的尝试都会`fread()`导致错误，抱怨相应的函数需要资源，但提供的是布尔值。如果`fopen()`没有失败，情况就不会如此。

由于文件非常大（有时数 GB），流式传输是强制性的。此外，由于服务器的配置，我需要一种方法来循环遍历每个块以缓冲一些输出。如果我不这样做，服务器就会支持。就 Rackspace 而言，这是一个奇怪的配置。这就是我使用`feof()`.

所以，事不宜迟，**我的问题是：** 550 错误是什么意思，什么是“普通文件”？如果我尝试下载的服务器的配置有问题，鉴于我的限制，我有哪些选择？

## 编辑

我已经确定这是一个服务器问题。但是，问题仍然没有解决。

我联系了我的老板和我们的服务器管理员，服务器人员告诉我在不同的基于 Windows 的服务器上测试这个，而不是我正在使用的基于 Linux 的服务器。我的脚本适用于 Windows 服务器，所以我确认我的脚本没有错误。

不幸的是，我的老板仍然希望我找出问题所在，并找出它为什么不能在 Linux 机器上运行。我完全不知道为什么，也不知道去哪里找。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-10T07:51:40.597

我刚刚在尝试从 sco unix 服务器获取文件时遇到了这个问题。

服务器文件位置：/home/user/data/myfile.csv

我可以将以下内容放入任何浏览器并获取文件。

```
ftp://user:password@host/data/myfile.csv 
```

但是，如果我运行以下命令，我会收到与您相同的错误

```
$f = fopen("ftp://user:password@host/data/myfile.csv", "r"); 
```

但是，如果我将完整路径放入 fopen - 它工作正常。

```
$f = fopen("ftp://user:password@host/home/user/data/myfile.csv", "r"); 
```

我不确定这是否会为您解决问题，但对我有用。

# javascript - ReferenceError: 要求未定义 [javascript]

> ID：14855531
> 
> 赞同：2
> 
> 时间：2013-02-13T14:14:59.333
> 
> 标签：javascript, firefox

我正在构建一个 Firefox 扩展。每当给定的 url 在 Firefox 浏览器中加载时，浏览器都应该给出警告消息。我使用了页面加载 API。但我收到一个错误：require 未定义。我对这个页面加载很陌生。帮我解决这个错误！！！

```
var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.mozilla.org",
  contentScript: 'window.alert("Page matches ruleset");'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:23:28.890

不应该`var pageMod = require("page-mod");`吗？（即没有`sdk/`前缀）

编辑：以上对于最新版本的 SDK 是不正确的。如果它对你有用，那么也许你有一个旧版本。尝试更新。

# javascript - 如何在javascript中的回调函数中获取结果？

> ID：14855540
> 
> 赞同：0
> 
> 时间：2013-02-13T14:15:34.287
> 
> 标签：javascript, node.js, callback

如果我想将结果写入回调函数内部进行响应，但我无法访问函数中的 res 变量，也无法访问函数外部的结果。

那么如何在内部和外部之间传递价值呢？

```
var http = require('http');
var url = require('url');

http.createServer
(
    function (req, res)
    {
        var output='';
        res.writeHead(200, {'Content-Type': 'text/plain'});

        //The url we want is: 'www.random.org/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
        var options = {
          host: 'www.random.org',
          path: '/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
        };

        callback = function(response) {
          var str = '';

          //another chunk of data has been recieved, so append it to `str`
          response.on('data', function (chunk) {
            str += chunk;
          });

          //the whole response has been recieved, so we just print it out here
          response.on('end', function () {
            console.log(str);

            //output+=str; //get result
          });
        }

        http.request(options, callback).end();

        //output+=str; //get result
        res.end(output);
    }
).listen(80, '127.0.0.1'); 
```

* * *

版本 2

```
var http = require('http');
var url = require('url');

http.createServer
(
    function (req, res)
    {
        var output='';
        res.writeHead(200, {'Content-Type': 'text/plain'});

        //The url we want is: 'www.random.org/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
        var options = {
          host: 'www.random.org',
          path: '/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
        };

        callback = function(response) {
          var str = '';

          //another chunk of data has been recieved, so append it to `str`
          response.on('data', function (chunk) {
            str += chunk;
          });

          //the whole response has been recieved, so we just print it out here
          response.on('end', function () {
            res.write('inside');
          });
        }

        http.request(options, callback).end();

        res.write('outside');
        res.end(output);
    }
).listen(80, '127.0.0.1'); 
```

* * *

版本 3

```
var http = require('http');
var url = require('url');

http.createServer
(
    function (req, res)
    {
        res.writeHead(200, {'Content-Type': 'text/plain'});

        //The url we want is: 'www.random.org/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
        var options = {
          host: 'www.random.org',
          path: '/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
        };

        callback = function(res) {
          var str = '';

          //another chunk of data has been recieved, so append it to `str`
          res.on('data', function (chunk) {
            str += chunk;
          });

          //the whole response has been recieved, so we just print it out here
          res.on('end', function () {
            res.write('inside');
            //or
            this.write('inside');
          });
        }

        http.request(options, callback).end();

        res.write('outside');
        res.end();
    }
).listen(80, '127.0.0.1'); 
```

* * *

版本 4

```
var http = require('http');
var url = require('url');

http.createServer
(
    function (req, res)
    {
        res.writeHead(200, {'Content-Type': 'text/plain'});

        //The url we want is: 'www.random.org/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
        var options = {
          host: 'www.random.org',
          path: '/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
        };

        callback = function(response) {
          var str = '';

          //another chunk of data has been recieved, so append it to `str`
          response.on('data', function (chunk) {
            str += chunk;
          });

          //the whole response has been recieved, so we just print it out here
          response.on('end', function () {
            res.write('inside');
          });
        }

        http.request(options, callback);

        res.write('outside');
        res.end();
    }
).listen(80, '127.0.0.1'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:16:53.827

你不能。设置回调的函数将在回调执行之前完成并返回。如果没有，则不需要回调。

在回调本身中做任何你需要做的工作，而不是在父函数中。

> 我无法访问函数中的 res 变量

你应该能够。它仍在范围内。

（尽管如果您`end()`在回调运行之前调用它，那么应该会损坏）。

# javascript - 由于安全策略，无法使用 Raphael JS 在 Chrome 扩展弹出窗口中绘制路径？

> ID：14855541
> 
> 赞同：5
> 
> 时间：2013-02-13T14:15:37.663
> 
> 标签：javascript, google-chrome-extension, svg, raphael

如果我尝试使用 Raphael 在 default_popup 页面中为我的 Chrome 扩展程序绘制路径：

```
r.path("M0,0L10,10"); 
```

我收到以下错误：

```
Uncaught EvalError: Refused to evaluate a string as JavaScript because 'unsafe-eval' is not an allowed source of script in the following Content Security Policy directive: "script-src 'self' chrome-extension-resource:". 
```

我理解需要禁止 eval() 和类似的东西，但为什么这是“将字符串评估为 JavaScript”？除了设置一个也会最终允许 eval() 的不安全安全策略之外，还有其他方法可以在没有路径字符串的情况下生成路径吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T10:43:15.597

为了在您的扩展中使用 eval() 在您的 manifest.json 中添加以下行（我假设您使用的是 manifest v2）

```
"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'" 
```

正如您可能猜到的那样，指令“unsafe-eval”可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-21T07:55:42.870

Sergii 的解决方案正在发挥作用。但是，不建议这样做，因为它会使您的扩展容易受到 XSS 攻击。

您应该改用沙盒：http: [//developer.chrome.com/apps/sandboxingEval.html](http://developer.chrome.com/apps/sandboxingEval.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T07:09:30.873

如果你检查这个简单的例子。

```
function (params, callback) {
    setTimeout(function () {
        callback(true)
    }, 1000); // CSP
}; 
```

上面的代码确实违反了CSP，因为我在`setTimeout()`定义中执行回调函数， `setTimeout()`接收结果`callback(true)`而不是回调本身。这将需要一个 eval 并因此触发 Chrome 安全策略。

在类似的行中，我尝试查看[Raphel path](https://github.com/DmitryBaranovskiy/raphael/blob/master/raphael.core.js#L3283)的源代码，但我的方向不是很好，我假设某些地方必须涉及这种代码。

在 chrome 扩展中，没有办法超越 Eval CSP，我建议使用另一种解决方法或使用纯 SVG 方法。

# winforms - 从 Winforms 访问 ACS Azure

> ID：14855543
> 
> 赞同：1
> 
> 时间：2013-02-13T14:15:41.297
> 
> 标签：winforms, azure, acs

我有一个需要 ACSv2 身份验证的 Azure webrole，我想从 winforms 应用程序访问它。我的许多客户都使用 Windows XP，所以我不能使用 WIF（在 Windows XP 上不可用）。在这种情况下，为我的 Web 请求获取身份验证令牌的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:24:14.997

对于桌面应用程序，您可以执行以下操作：

1.  从您的 ACS 命名空间中获取身份提供者列表
2.  在 WebBrowser 控件中显示这些
3.  用户登录后，从 WebBrowser 控件中获取令牌并解析。

这**类似于**您想在 Windows Phone 应用程序中使用 ACS。我建议您看一下这篇博文：[Windows Phone 7 上的 Azure ACS](http://blog.tylerdoerksen.com/2011/04/12/azure-acs-on-windows-phone-7/)。以下是用户通过 WebBrowser 控件（在 WP7 上）登录后解析令牌的示例代码：

```
private void SignInWebBrowserControl_ScriptNotify(object sender, NotifyEventArgs e) 
{ 
    var acsResponse = ACSResponse.FromJSON(e.Value);

    RequestSecurityTokenResponse rstr = null; 
    Exception exception = null; 
    try 
    { 
        string binaryToken = HttpUtility.HtmlDecode(acsResponse.securityToken); 
        string tokenText = RequestSecurityTokenResponseDeserializer.ProcessBinaryToken(binaryToken); 
        DateTime expiration = DateTime.Now + TimeSpan.FromSeconds(acsResponse.expires – acsResponse.created);

        rstr = new RequestSecurityTokenResponse 
                    { 
                        Expiration = expiration, 
                        TokenString = tokenText, 
                        TokenType = acsResponse.tokenType 
                    }; 
```

# php - 仅为 Firefox 创建链接

> ID：14855544
> 
> 赞同：0
> 
> 时间：2013-02-13T14:15:43.803
> 
> 标签：php, html

是否可以使用 PHP 创建一个链接，该链接只能由 Firefox 打开，而不能由任何其他浏览器打开？

```
<a href="http://www.google.com">Only with Firefox</a>; 
```

因为有些网站在 Firefox 上效果更好。

如果可能的话，我必须在链接中添加什么？

提前 THX

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:19:53.187

正如@Steve Fenton 所说，我不建议这样做，因为网络是（或应该）开放的。否则您是否仍想这样做，您需要检查访问者的浏览器用户代理并显示（或不显示）下载按钮。

您可以使用 jQuery 轻松访问浏览器用户代理：

```
if ($.browser.mozilla) {
  //Do the stuff
} 
```

或者使用 PHP 使用`$_SERVER['HTTP_USER_AGENT']`变量。

但请记住，用户可以更改他/她浏览器的用户代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:18:05.743

您可以通过 Jquery 检测浏览器，并且可以显示或隐藏标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:18:16.487

采用

```
 $_SERVER['HTTP_USER_AGENT'] 
```

这给出了当前的浏览器。

# javascript - 复制文本字段和下拉列表并添加到文本区域

> ID：14855550
> 
> 赞同：0
> 
> 时间：2013-02-13T14:16:05.020
> 
> 标签：javascript, drop-down-menu, onclick, copy, textfield

我在复制文本字段的值并将该值与下拉列表的值一起添加到文本区域时遇到问题。当我单击按钮时，我可以从下拉列表中获取要复制的值，但是当我尝试复制下拉值和文本字段值时，它将不起作用，并且我得到一个“未捕获的类型错误：无法读取未定义的属性”未定义。有什么建议么？

```
<script type="text/javascript">
function copy() {
    var a = document.getElementById("qty");
    var b = document.getElementById("text-two");
    var text = a.options[a.selectedIndex].value + "---" + b.options[b.selectedIndex].value;   
    var out = document.getElementById("textarea");
    out.value += text + "\n";
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:18:27.803

试试这个（假设 a 是下拉，b 是文本框）

```
var text = a.options[a.selectedIndex].value + "---" + b.value; 
```

或假设（假设 b 是下拉列表，a 是文本框）

```
var text = a.value + "---" + b.options[b.selectedIndex].value; 
```

# html - 更改 Doctype 中断页面样式

> ID：14855551
> 
> 赞同：0
> 
> 时间：2013-02-13T14:16:07.487
> 
> 标签：html, css, validation, doctype

我们一直在我们的网站上使用 HTML 4 过渡（半）文档类型，并且在升级我们的网站之前，我正在测试更多最新的文档类型。

我在这里创建了一个测试页面（链接随后被删除，因为原因不是此示例所特有的）。

当前的文档类型可以正常显示页面，但是您可以看到我们使用的样式会破坏页面（例如，搜索框和顶部菜单跳转到上方的徽标），如果使用了任何其他文档类型。就好像某些样式选择器不再被使用一样。

我猜这可能是由浮动 div（例如#logo 和#topRight）引起的。我试图清除这些，但它并没有解决问题。

该页面在 HTML 4 Strict、XHTML 1 Strict、HTML 5 和 CSS 3 中验证没有错误（XHTML 中的“/”错误除外，因为内容仍然是 HTML）。

有谁知道为什么该页面与较新的文档类型不同？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:21:19.370

这是一个区分大小写的问题。

# php - 在服务器上上传时出错

> ID：14855552
> 
> 赞同：0
> 
> 时间：2013-02-13T14:16:07.303
> 
> 标签：php, opencart

我正在开发 opencart 应用程序，我安装在本地主机上，并对其进行自定义，但现在我正在尝试将其上传到服务器，但出现错误

> 警告：require_once() [function.require-once]: http:// wrapper 在服务器配置中被 /home/content/29/9716229/html/johndhan/telhemboradz/index.php 中的 allow_url_include=0 禁用，第 17 行
> 
> 警告：require_once（[http://249development.us/johndhan/telhemboradz/system/startup.php](http://249development.us/johndhan/telhemboradz/system/startup.php)）[function.require-once]：无法打开流：在 /home/content/29/9716229 中找不到合适的包装器/html/johndhan/telhemboradz/index.php 在第 17 行
> 
> 致命错误： require_once () [function.require]：无法打开所需的“ [http://249development.us/johndhan/telhemboradz/system/startup.php”（include_path='.:/usr/local/php5_3/lib/php](http://249development.us/johndhan/telhemboradz/system/startup.php) ') 在第 17 行的 /home/content/29/9716229/html/johndhan/telhemboradz/index.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:01:06.440

您需要为文件使用路径而不是 HTTP url。打开您的`config.php`文件和`admin/config.php`文件并更改

```
http://249development.us/ 
```

到

```
/home/content/29/9716229/html/ 
```

对于所有路径，除了那些开始`HTTP_`或`HTTPS_`定义的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:18:11.753

您似乎正在尝试通过 HTTP 包含远程文件。如果这是故意的，那么您需要启用 http:// 包装器 - 正如您收到的警告所建议的那样。如果不是这种情况，请考虑`http://249development.us/`从`require_once`语句中删除 URL。

# php - WordPress 图片说明

> ID：14855556
> 
> 赞同：0
> 
> 时间：2013-02-13T14:16:25.403
> 
> 标签：php, javascript, wordpress

我是wordpress的新手。我通过“添加媒体”发布了图片。我想要的是在单击图像后在弹出窗口中显示其描述。但默认情况下，不显示描述。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:18:01.260

检查这个[http://wordpress.org/extend/plugins/的 wordpress 插件库](http://wordpress.org/extend/plugins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:19:30.557

有多种方法可以实现这一目标。最简单的方法是使用灯箱插件，或者编写一个简单的 javascript 插件，使用图像的 ALT 属性并在点击时显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:23:03.080

另一个要使用的插件是[slimbox](http://wordpress.org/extend/plugins/slimbox/)。

# jquery - jquery 插件无法让 getJSON 工作

> ID：14855558
> 
> 赞同：2
> 
> 时间：2013-02-13T14:16:38.993
> 
> 标签：jquery, ajax

```
( function( $ ) {                

    function CleanQueryString( query )
    {
        return encodeURI( query ); 
    };

    function ConcatData( settings )
    {                               
        settings.concatUrl = settings.googleUrl;
        settings.concatUrl = settings.concatUrl.replace( "{key}", settings.googleApiKey );
        settings.concatUrl = settings.concatUrl.replace( "{country}", settings.country );     
        settings.concatUrl = settings.concatUrl.replace( "{query}", settings.cleanQuery );  
    };

    $.fn.GoogleSearchResult = function( options ) {  

        var settings = $.extend( {
            query: null,
            googleApiKey: "myapikey",
            googleUrl: "https://www.googleapis.com/shopping/search/v1/public/products?key={key}&country={country}&q={query}&alt=json",
            concatUrl: "",
            country: "UK",
            cleanQuery: ""
        }, options);

        return this.each( function() {  
            if( settings.query )
            {   
                var $t = $(this);

                settings.cleanQuery = CleanQueryString( settings.query );
                ConcatData( settings );    
                alert( settings.concatUrl ); // This alerts the correct url and I've checked that it returns json

                $.getJSON( settings.concatUrl, function( data ) {  
                    alert("hi"); // This never alerts                    
                    $t.html( data );                
                });
            }

            return false;    
        } );     
    };  
} )( jQuery ); 
```

我无法让我的 $.getJSON 工作..任何想法为什么它可能不会返回任何东西：

[https://developers.google.com/shopping-search/v1/getting_started](https://developers.google.com/shopping-search/v1/getting_started)

当我直接访问它时，我发送的 url 返回正确的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:31:35.260

您是否尝试在不同的服务器上访问 JSON？如果是这样，您需要使用某种服务器端脚本将其加载到您自己的服务器上，并使用`.getJSON`. [Google 购物搜索似乎不提供 JSON-P](https://developers.google.com/shopping-search/v1/getting_started)。

如果您可以编写 PHP 页面或其他一些服务器端语言，[那么获取和返回外部 JSON 是微不足道的](https://stackoverflow.com/a/13709674/901048)，它现在将在您*自己的*服务器上，并且可以使用`.getJSON`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:33:57.830

```
jQuery.support.cors = true;
$.getJSON( settings.concatUrl, function( data ) {  
    alert(data);                    
    $t.html( data );                
}).error(function(xhr, status, error) { alert("error" + status +" " + error); }) ; 
```

可以使用此设置启用 Jquery 跨域支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:36:03.827

您需要使用 JSONP 从外部源传输数据。Google API 支持这一点，因此就您的代码而言，这就像附加`&callback=xyz`到您的 url一样简单`xyz`，外部服务器将在其中包装您的代码的一些函数。

> `https://www.googleapis.com/shopping/search/v1/public/products?key={key}&country={country}&q={query}&alt=json&callback=xyz`

jQuery 会自动查找名为 的回调`?`，因此您可以使用或通过添加到 AJAX 请求参数来`callback=?`指定自定义名称。`jsonp: xyz`

# reporting-services - 组中的交替行背景颜色

> ID：14855561
> 
> 赞同：2
> 
> 时间：2013-02-13T14:16:55.343
> 
> 标签：reporting-services, ssrs-2008, rdlc, rdl

我有以下情况：

使用嵌套组报告，组列的值是 1 还是 2。下一个子组对于每个父组有 2 个组，因此对于父组 1 有两个子组（1-1 和 1-3），对于父组也有2 我有两个儿童组（2-2 和 2-4）。

我的问题是，如何为`WhiteSmoke`1-1 的行设置颜色，为`White`1-3 的行设置颜色，再`WhiteSmoke`为 2-2 和`White`2-4 设置颜色。

如果有像 1、2、3、... 这样的顺序，那么使用`Mod`运算符会很容易，但我的顺序是 1、3、2、4，我找不到交替颜色的算法

**已编辑**

![在此处输入图像描述](../Images/684e6c249c7405d5577f5fd460251344.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-23T13:42:39.873

我找到了答案。

```
=IIF(RunningValue("NameofGrouptoAlternateColor", CountDistinct, "NameofParentGroup") Mod 2, "White", "Wheat") 
```

这对我有用，我认为这是原始海报试图完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-26T17:47:28.440

```
=IIF(RunningValue(Fields!FieldToGroupOn.Value, CountDistinct, "ParentGroupName") Mod 2, "LightGrey", "Transparent") 
```

在哪里：

`FieldToGroupOn`是您要分组并希望产生交替颜色的数据集中的字段。

`ParentGroupName`是 tablix 中行组的**名称**，它是您希望为其交替颜色的组的父级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:42:25.613

如果我理解正确，您想在“组更改”上交替颜色。如果是这样，这是解决方案：

```
IIf(RowNumber("TheNameOfYourGroup") Mod 2 = 0, "White", "WhiteSmoke") 
```

这就是您用于`Background Color`财产的表达方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T14:36:43.233

假设这是顺序：`1,3,2,4,5,7,6,8...`您只想着色`3,4,7,8..`

那么表达式应该是：

```
=iif(RowNumber(Nothing) Mod 4 <> 0 AND
 ((RowNumber(Nothing)+1) Mod 4 <> 0), "White", "WhiteSmoke") 
```

![在此处输入图像描述](../Images/32d0e753f3099464fe17f415de0937e8.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T12:21:08.823

我被迫使用自定义代码来实现您的目标，这是我的解决方案：

自定义代码部分

```
Public Shared ReverseLookup = True
Public Function GetColor(ByVal currentValue As Integer, ByVal previosValue As Integer) As String
    If ReverseLookup = True
        If currentValue = previosValue Then
                GetColor = "Gray"
        Else
                GetColor = "Green"
                ReverseLookup = False
        End If
    Else
        If currentValue = previosValue Then
                GetColor = "Green"
        Else
                GetColor = "Gray"
                ReverseLookup = True
        End If
    End If
End Function 
```

在 BackgroundColor 属性中：

```
=Code.GetColor(Fields!secondid.Value, Previous(Fields!secondid.Value)) 
```

输入参数是当前的 secondid 值（来自 paren 详细信息组的值）和 previos secondid 值。

这是我的结果：我相信这正是您所需要的:)

![在此处输入图像描述](../Images/a7d8f1f7fa8d0213ec3d1f1abb92b2f7.png)

# javascript - 我可以在函数级别设置 jshint 选项吗？

> ID：14855565
> 
> 赞同：2
> 
> 时间：2013-02-13T14:17:06.397
> 
> 标签：javascript, jshint

我正在使用 jshint 来监控我的代码质量，但我想对代码的不同部分应用不同的规则/选项。

特别是，有一个函数我有意且必须使用按位运算符。对于这个功能，我想设置`/*jshint bitwise:false */`. 不过，对于我的其余代码，我想设置`/*jshint bitwise:true */`. 除了将该函数拆分为另一个脚本文件之外，有没有办法做到这一点？我想它看起来像这样，但看起来这实际上不起作用。

```
/*jshint bitwise:true */  //not really needed since it's default

function whatever () {
    // lots of code here
}

function uses_bitwise () {
    /*jshint bitwise:false */
    //bitwise code here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:15:29.063

是的，您在问题中的语法是正确的。来自[JSHint 文档](http://www.jshint.com/docs/#config)：

> 除了 --config 标志和 .jshintrc 文件之外，您还可以使用特殊注释从文件中配置 JSHint。这些注释以 jshint 或 global 开头，后跟以逗号分隔的值列表。例如，以下代码段将启用有关未定义和未使用变量的警告，并告诉 JSHint 一个名为 MY_GLOBAL 的全局变量。

```
/* jshint undef: true, unused: true */
/* global MY_GLOBAL */ 
```

> 您可以使用多行注释和单行注释来配置 JSHint。这些注释是函数范围的，这意味着如果你把它们放在一个函数中，它们只会影响这个函数的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:30:20.670

实际上，事实证明问题中提出的确切语法有效！

# php - 我的控制器没有扩展

> ID：14855567
> 
> 赞同：0
> 
> 时间：2013-02-13T14:17:07.823
> 
> 标签：php, codeigniter

我最近将我的 codeigniter 版本从 1.7 升级到了 2.1。但是，我正在努力扩展我的 my_controller 类，以前它在放入 app->libraries 文件夹时工作正常。

用 CI 指令我也把它移到了 app -> core 目录，代码如下：

```
 class MY_Controller extends CI_Controller 
{
    var $data=array();
    var $secured=false;
    var $area="user";
    function my_Controller(){

         parent::__construct();

        // loading libraries etc
        $this->load->library('session');
        $this->load->helper('url');                 
        $this->load->helper('common'); 
```

[..]

在配置文件中，我添加了以下代码行，如本教程所示：

[http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)

```
 /*
| -------------------------------------------------------------------
|  Native Auto-load
| -------------------------------------------------------------------
| 
| Nothing to do with cnfig/autoload.php, this allows PHP autoload to work
| for base controllers and some third-party libraries.
|
*/
function __autoload($class)
{
 if(strpos($class, 'CI_') !== 0)
 {
  @include_once( APPPATH . 'core/'. $class . EXT );
 }
} 
```

但是我仍然收到以下 PHP 错误：

PHP 致命错误：在第 5 行的 C:\inetpub\wwwroot\latestCI\application\controllers\home.php 中找不到类 'MY_Controller'

知道为什么这不起作用，谢谢

编辑：

似乎已经让它工作了。基本上 MY_Controller 必须遵循这个结构：

```
 <?php
class MY_Controller extends CI_Controller {

function __construct()
{
    parent::__construct();
//constructor code here
}

//Custom functions here
}

?> 
```

否则会抛出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:22:55.653

您必须将`MY_Controller.php`文件（大写很重要！）放在`application/core/`. 这个文件夹是在 codeiginiter 版本 2 中引入的（除其他外）。

如有疑问，请检查原始类的文件位于`system/`目录下的位置并将其镜像到`application/`.
因此，如果在`CI_Controller.php`下方，`system/core/`则`MY_Controller`（扩展`CI_Controller`）应该转到`application/core`.

# javascript - fixScale(document) 有什么作用？

> ID：14855571
> 
> 赞同：0
> 
> 时间：2013-02-13T14:17:16.643
> 
> 标签：javascript

[我使用他们的自动生成器](https://help.github.com/articles/creating-pages-with-the-automatic-generator)创建了一个新的 GitHub 页面，并在生成的页面中，从[GitHub 模板](https://github.com/mattgraham/Midnight/blob/3e9ff80a/index.html#L136)中找到了这一行：

```
<!--[if !IE]><script>fixScale(document);</script><!--<![endif]--> 
```

这是来自 GitHub 的优秀男孩和女孩，我想知道这是否是我可能想从我自己的 HTML 中改编的东西。但是该文件中引用的所有javascript都没有定义这样的函数，而且这似乎不是本机（窗口）函数。

那么，这个函数有什么作用，我想将它包含在我自己的 HTML 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-19T16:16:59.003

```
>> what does this function do and would I want to include it in my own HTML? 
```

取决于 fixscale() 的实际源代码。

如果它像[https://github.com/cbrandolino/camvas/blob/master/javascripts/scale.fix.js](https://github.com/cbrandolino/camvas/blob/master/javascripts/scale.fix.js)

然后，此代码解决了 iOS 设备 (iPhone/iPad) 视口问题。

最初加载页面时，元视口标签起作用。

然而，当用户随后旋转他们的视口（例如从横向到纵向）时，他们的视口将调整大小并过度放大。

scale.fix.js 代码修复了这个问题。

你可以这样称呼它：

```
<!--[if !IE]><!-->
  <script>
    fixScale(document);                               // fix current scale on iOS devices     
    window.onorientationchange = fixScale(document);  // and when orientation changes
  </script>
<!--<![endif]--> 
```

这种语法看起来很奇怪，但它是正确的。有关详细信息，请参阅： [if-ie-not-working](https://stackoverflow.com/questions/13785587/if-ie-not-working)

请注意，fixScale() 的编码方式是全局定义的。您可能应该查看“模块方法”之类的东西，以更好地公开您的 javascript 函数。

附带说明一下，为了防止出现 jshint 错误（在 scale.fix.js 中），您应该更改以下内容：

```
scales = [.25, 1.6]; 
```

对此：

```
scales = [0.25, 1.6]; 
```

有关其他 jshint 提示，请参阅： [http ://lexsheehan.blogspot.com/2014/05/suppress-jshint-warnings.html](http://lexsheehan.blogspot.com/2014/05/suppress-jshint-warnings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:13:36.667

这行的写法，只是一个普通的注释，什么都不做。

# iphone - 如何将 TabBarItem 添加到默认 TabBarController 而不将其设置为 ViewController

> ID：14855574
> 
> 赞同：0
> 
> 时间：2013-02-13T14:17:26.350
> 
> 标签：iphone, ios, xcode, ios5, uistoryboard

我没有使用自定义`TabBarContoller`. 而不是这个，我创建了一个`TabBarController`故事板并从那里添加我`ViewControllers`的。但是我需要像单击按钮打开一样绑定a `TabBarItem`，所以我猜不需要添加另一个空的..`UIImagePicker``UIImagePicker``ViewController`

我无法将新的拖放`TabBarItem`到`TabBarController`. 有没有办法在不实现自定义的情况下做到这一点`TabBarController`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:08:14.033

不，你不能这样做——标签栏项目来自内容控制器，而不是直接来自标签栏控制器。您必须添加一个单独的控制器，您可以在其 viewDidAppear 方法中启动图像选择器，因此一旦您切换到该选项卡，它就会显示出来。

# jquery - Twitter Bootstrap Typeahead 不加载 ajax 数据

> ID：14855577
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:17:39.410
> 
> 标签：jquery, twitter-bootstrap, bootstrap-typeahead

我有以下代码来使用 2.3.0 版初始化 typeahead：

```
jQuery('#search_terms').typeahead({
    source: function(query, process) {
        return jQuery.ajax({
            url: '/api/path',
            type: 'GET',
            data: {q: query},
            dataType: 'json',
            success: function (json) {
                return process(json.suggestion);
            }
        });
    }
}); 
```

我已经通过替换静态数据验证了 typeahead 的工作原理。我已经看到 json.suggestion 按预期计算为一个单词。ajax 响应本身如下所示：

```
{"suggestion":"word"} 
```

但是，Bootstrap 拒绝将响应加载到 typeahead 中。我错过了什么？我承认我很难通过 ajax 找到 Bootstrap Typeahead 的详细文档，而不是在 SO 上。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T17:51:50.727

我们发现 Bootstrap Typeahead 正在使用自己的匹配过滤器对我们的 ajax 数据进行二次猜测。通过强制匹配为真，我们解决了这个问题：

```
jQuery('#search_terms').typeahead({
    source: function(query, process) {
        jQuery.ajax({
            url: 'api/path',
            type: 'GET',
            data: {q: query},
            dataType: 'json',
            success: function (json) {
                process([json.suggestion]);
            }
        });
    },
    matcher: function (param) {return true}
}); 
```

# asp.net-mvc-4 - 服务器违反了协议。Section=ResponseStatusLine MVC4

> ID：14855579
> 
> 赞同：0
> 
> 时间：2013-02-13T14:17:46.527
> 
> 标签：asp.net-mvc-4, web-config, app-config, .net-4.5

我有一个特殊的问题。

我针对 Url 进行了 HttpWebRequest 并且我的测试库中的测试按应有的方式工作。

然后我转到我的 mvc4 Web 应用程序并尝试调用我从测试中调用的同一段代码。它失败了。

现在，我知道这里有些事情可能会出错。但实际上，应该没有那么多东西。我知道它与 web.config 有关，因为每当我将 mvc4 应用程序中的 web.config 更改为 app.config 时，使用**完全相同的**值，它就可以工作。

目标框架是 .NET 4.5。

这是我的 web.config 文件

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>
    <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
    </startup>
    <system.net>
        <settings>
            <httpWebRequest useUnsafeHeaderParsing="true"/>
        </settings>
    </system.net>
    <system.web>
        <httpRuntime targetFramework="4.5" />
        <compilation debug="true" targetFramework="4.5"/>
    </system.web>
    <log4net>
        <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
            <datePattern value="dd.MM.yyyy'.log'" />
            <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
            <file value="..\..\logs\" />
            <appendToFile value="true" />
            <rollingStyle value="Composite" />
            <maxSizeRollBackups value="10" />
            <maximumFileSize value="10MB" />
            <staticLogFileName value="false" />
            <layout type="log4net.Layout.PatternLayout">
                <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n"/>
            </layout>
        </appender>

        <root>
            <level value="ALL" />
            <appender-ref ref="LogFileAppender" />
        </root>
    </log4net>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:18:37.160

好的，这与我的配置无关...DoH！

它与我调用我知道正在运行的代码的方式有关。由于它是我正在调用的异步方法，因此我需要从异步方法中调用它，因此线程不会挂在其他地方。Task.Run(()=> MyMethod()) 成功了。

# java - Alfresco 入站规则

> ID：14855598
> 
> 赞同：0
> 
> 时间：2013-02-13T14:18:38.077
> 
> 标签：java, alfresco

我将入站规则添加到露天文件夹中。我如何确定它的节点是刚刚创建的还是从另一个文件夹中移动的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T15:31:29.773

下一个片段可用于在创建新文件夹时添加新行为。将为存储库中创建的每个文件夹触发此示例。你必须自己实现你实际要做的事情。

```
public class SalesProjectFolderBehaviour implements NodeServicePolicies.OnCreateNodePolicy{

/** The policy component. */
private PolicyComponent policyComponent;

/** The on create node behaviour. */
private Behaviour onCreateNodeBehaviour;

/** The service registry. */
private ServiceRegistry serviceRegistry;

/**
     * Inits the.
     */
    public void init()
    {
        LOG.error("initializing the behaviours");
        // Create behaviours
                this.onCreateNodeBehaviour = new JavaBehaviour(this, "onCreateNode",
                        NotificationFrequency.TRANSACTION_COMMIT);

                // Bind behaviours to node policies
                this.policyComponent.bindClassBehaviour(QName.createQName(
                        NamespaceService.ALFRESCO_URI, "onCreateNode"),
                        org.alfresco.model.ContentModel.TYPE_FOLDER, this.onCreateNodeBehaviour);

    }

/* (non-Javadoc)
     * @see org.alfresco.repo.node.NodeServicePolicies.OnCreateNodePolicy#onCreateNode(org.alfresco.service.cmr.repository.ChildAssociationRef)
     */
    @Override
    public void onCreateNode(ChildAssociationRef childAssocRef) {
        LOG.trace("created new folder!");

    }
} 
```

# excel - 如何将附加在我的谷歌帐户中的excel文件自动导入电子表格？

> ID：14855599
> 
> 赞同：0
> 
> 时间：2013-02-13T14:18:42.390
> 
> 标签：excel, import, google-apps-script, google-sheets

我想要一个脚本，它可以自动将附加在我的谷歌帐户中的 excel 文件导入电子表格。我想通过电子邮件将带有链接的 excel 文件发送给某人。然后当他/她点击链接时，excel 文件会自动导入电子表格。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:05:40.383

您在谷歌驱动器中单击您的选项并选择自动导入到谷歌格式。

很简单。

# facebook - Redmine 和 Facebook Connect

> ID：14855604
> 
> 赞同：2
> 
> 时间：2013-02-13T14:19:04.340
> 
> 标签：facebook, redmine, redmine-plugins

我今天整天都在寻找这个，但没有结果。有谁知道在 Redmine 中使用 facebook-connect 作为身份验证机制？有没有可以工作的插件？还是其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T07:15:47.370

我认为这个插件可以帮助你解决问题 [https://github.com/buoyant/redmine_tweetbook](https://github.com/buoyant/redmine_tweetbook)

# java - JUnit 测试的 Maven 代码覆盖率报告

> ID：14855605
> 
> 赞同：0
> 
> 时间：2013-02-13T14:19:18.883
> 
> 标签：java, maven, junit

我一直在看 IntelliJ，我喜欢 JUnit 测试的代码覆盖率报告，但我想知道是否有人在使用任何东西或知道任何可以与 Maven 一起使用的插件，以便在 JUnit 的代码覆盖率报告测试时构建报告测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:28:18.013

您可以使用[Maven 的 Sonar 插件](http://mojo.codehaus.org/sonar-maven-plugin/)

运行`maven sonar:sonar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:29:39.833

我目前正在使用[EclEmma](http://www.eclemma.org/)来查看我的单元测试的代码覆盖率。它完全按照应有的方式工作。它甚至允许您合并多个覆盖测试，而不是重新测试所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:29:41.677

这是一个适用于[Jenkins](http://jenkins-ci.org/)的示例配置。

```
<!--no longer executed in test phase. Run cobertura:cobertura to generate -->
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>cobertura-maven-plugin</artifactId>
    <version>2.5.1</version>
    <configuration>
        <aggregate>true</aggregate>
        <instrumentation>
            <ignores>
                <ignore>test.package.if.needed.later.*</ignore>
            </ignores>
            <excludes>
                <!-- eg.: -->
                <exclude>javax/**/*.class</exclude>
            </excludes>
        </instrumentation>
        <formats>
            <format>html</format>
            <format>xml</format>
        </formats>
        <check />
    </configuration>
</plugin> 
```

干杯，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:21:28.753

您可以使用[Maven Cobertura 插件](http://mojo.codehaus.org/cobertura-maven-plugin/)

# jquery - 带有 jQ uery 序列消息的打字机效果

> ID：14855609
> 
> 赞同：1
> 
> 时间：2013-02-13T14:19:22.043
> 
> 标签：jquery

我正在尝试使用 jquery 进行打字机效果，以在每条消息之间间隔几秒钟按顺序显示消息。

这是我的代码 [jsfiddle](http://jsfiddle.net/dnkwp/6/)

```
var where, when; //added
$.fn.teletype = function(opts){
    var $this = this,
        defaults = {
            animDelay: 50
        },
        settings = $.extend(defaults, opts);

    var letters = settings.text.length; //added

    where = '#' + $($this).attr('id'); //added
    when = settings.animDelay; //added

    $.each(settings.text, function(i, letter){
        setTimeout(function(){
            $this.html($this.html() + letter);    
        }, settings.animDelay * i);
    });
};
$(function(){
    $('#container1').teletype({
        animDelay: 100,
        text: 'This is message 1'
    });
     $('#container2').teletype({
        animDelay: 100,
        text: 'this is message 2'
    });
}); 
```

但问题是我的消息一起运行

如何控制消息之间的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:42:01.977

JSFiddle 更新：http: [//jsfiddle.net/dnkwp/19/](http://jsfiddle.net/dnkwp/19/)

和下面的代码

```
var where, when, iteration; //added

iteration = 0;
bigDelay = 0;
$.fn.teletype = function(opts){
    iteration++;
    var $this = this,
        defaults = {
            animDelay: 50
        },
        settings = $.extend(defaults, opts);

    var letters = settings.text.length; //added

    where = '#' + $($this).attr('id'); //added
    when = settings.animDelay; //added

    if (iteration > 1)
    {
        bigDelay = bigDelay + settings.text.length * settings.animDelay;
        setTimeout(function () {
                $.each(settings.text, function(i, letter){

        setTimeout(function(){
            $this.html($this.html() + letter);

        }, settings.animDelay * i);
    });

        }, bigDelay);
    }
    else
    {

    $.each(settings.text, function(i, letter){

        setTimeout(function(){
            $this.html($this.html() + letter);

        }, settings.animDelay * i);
    });
    }
};

$(function(){
    $('#container1').teletype({
        animDelay: 100,
        text: 'This is message 1'
    });
     $('#container2').teletype({
        animDelay: 100,
        text: 'this is message 2'
    });
     $('#container3').teletype({
        animDelay: 100,
        text: 'this is message 3'
    });
     $('#container4').teletype({
        animDelay: 100,
        text: 'this is message 4'
    });
});

// Added Reversing Function 
```

# php - 在 SQL 查询中使用变量（不是用户输入的）

> ID：14855613
> 
> 赞同：0
> 
> 时间：2013-02-13T14:19:35.330
> 
> 标签：php, mysql, database

我正在尝试为我的数据库中不同表的几个字段编码 json。下面是我的代码。我目前正在使用一个数组来表示我的表的名称（$tablename）。我读过关于 SQL 注入的文章，但它们似乎特别关注用户输入。但是，在这种情况下，我的数据库没有用户交互。这是我的应用程序的后端。关于使用这样的变量名有什么想法吗？谢谢

我还研究了准备语句，但很难以我想要的形式获取数据。

```
<?php   

 include $_SERVER['DOCUMENT_ROOT'] . '/mmcv/buildchartInfo.php';

    $position = 0;
    $results = array();

    foreach($chartnames as $tablename) {

        print $tablename."<br />";

        encodejson($tablename);  

    }

    function encodejson($tablename){

    include $_SERVER['DOCUMENT_ROOT'] . '/mmcv/includes/connect.inc.php';

    $sql="SELECT rank, name FROM $tablename";

    $result = mysqli_query($connection,$sql);

    //Error when data isn't returned
    if(!$result)
    {
        $output = "error getting data";
        echo $output;
        //$GLOBALS['loginError'] = "error getting log in data";
        exit();
    }

    while($row=mysqli_fetch_assoc($result)) $output[]=$row;

    print(json_encode($output));

    }

     mysqli_close($connection);

   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:25:33.277

只要用户不能改变 的值`$tablename`，那么你就没有什么好害怕的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:24:45.490

作为一般规则，我建议您始终使用准备好的语句，即使没有用户输入。但从技术上讲，如果您绝对确定变量`$tablename`不能直接或**间接**修改（不依赖于其他用户输入的变量），那么我想可以这样做。

**注意**：无法准备表名（`SELECT ... FROM :table WHERE ...`将不起作用），因此有时您无法选择。

但有时很难跟踪变量的真正依赖关系，因此我仍然强烈建议您使用准备好的语句。

# haskell - Yesod 处理程序，POSTed 文件的内容

> ID：14855617
> 
> 赞同：0
> 
> 时间：2013-02-13T14:19:51.000
> 
> 标签：haskell, yesod

而下面的代码：

```
postImportR = do
    fi <- lookupFiles "file"
    fc <- lift $ fileSource (fi !! 0) $$ consume 
```

似乎可以工作（至少我可以“liftIO $ print fc”），将其拆分为一个迭代函数不会：

```
process :: [FileInfo] -> [String]
process [] = []
process (f:r) = do
    fn <- fileName f
    fc <- lift $ fileSource f $$ consume
    ([fn] : (process r))

postImportR = do
    fi <- lookupFiles "file"
    process fi 
```

甚至使用 lambda 函数：

```
files <- L.map (\f -> (fileName f, lift $ fileSource f $$ consume)) fi 
```

在处理程序中，它给了我一个我不明白的类型错误。

我的错在哪里——喜欢从文件的行中生成用于数据库导入的内容（当然，还要学习更多 Haskell）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:44:11.147

你有

```
fileName :: FileInfo -> Text 
```

所以你不能直接`fileName`在 do-block 中使用

```
fn <- fileName f 
```

那将需要是一个 let-binding

```
let fn = fileName f 
```

接下来是什么使`process :: [FileInfo] -> [String]`不可能^((1))，

```
fileSource :: FileInfo -> Source (ResourceT IO) ByteString 
```

所以与

```
fc <- lift $ fileSource f $$ consume 
```

你在一个 do-block中，它`Monad`是 a `MonadIO`，你无法摆脱一个`Monad`可以包装任意`IO`-actions 的 a ，就像你无法摆脱`IO`它自己一样。

你可以拥有的是

```
process :: (SomeFiendishConstraint m) => [FileInfo] -> m [Text]
process [] = return []
process (f:r) = do
    let fn = fileName f
    lift $ fileSource f $$ consume
    fs <- process r
    return (fn : fs) 
```

或者，更简洁地说，

```
process = mapM (\f -> lift $ fileSource f $$ consume >> return fileName f) 
```

接着

```
postImportR = do
    fi <- lookupFiles "file"
    process fi 
```

^((1))禁止`unsafePerformIO`。

# maven - 跳过 javadocs 中的依赖项 - Maven javadoc 由于存储库 URL 无效而卡住

> ID：14855619
> 
> 赞同：9
> 
> 时间：2013-02-13T14:19:54.280
> 
> 标签：maven, reporting, javadoc

我的 Maven POM 使用

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <configuration>
        <show>public</show>
        <failOnError>false</failOnError>
    </configuration>
</plugin> 
```

在报告部分。一切似乎都很好，但在某些时候它会尝试生成依赖关系报告并且永远卡住，因为它无法访问存储库 URL（即未启动）。收到此错误：

```
[INFO] Generating "Dependencies" report    --- maven-project-info-reports-plugin:2.5.1
[WARNING] The repository url 'file://${basedir}/stage' is invalid - Repository 'local-mime4j-stage-repository' will be blacklisted.
[WARNING] The repository url 'http://antlr.org/antlr-snapshot' is invalid - Repository 'antlr-snapshot' will be blacklisted. 
```

之后，它一直在等待，导致我没有构建。所以我的问题是如何告诉 javadoc 排除此步骤而不尝试生成依赖关系报告？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-09T18:29:45.100

[http://www.java-tutorial.ch/maven/maven-site-build-slow-due-to-dependency-report-plugin](http://www.java-tutorial.ch/maven/maven-site-build-slow-due-to-dependency-report-plugin)很好地描述了如何从命令行或关闭依赖位置检查在你的 POM 文件中。

总结一下：

1.  命令行：

    ```
    mvn -Ddependency.locations.enabled=false site 
    ```

2.  聚甲醛：

    ```
    <plugin>
      <artifactId>maven-project-info-reports-plugin</artifactId>
      <configuration>
         <dependencyLocationsEnabled>false</dependencyLocationsEnabled>
      </configuration>
    </plugin> 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T15:32:46.480

实际上问题与 maven-javadoc-plugin 无关，但在阅读日志时似乎如此。它在运行站点生命周期时处于默认目标中。即使我删除了所有插件，我在运行 $mvn 站点时也会遇到这个问题。

这是因为站点生成试图获取有关我的项目依赖项的信息。似乎避免这种情况的最佳方法可能是通过将某些属性设置为 false 来禁用对这些信息的检索（因为某些存储库 url 无效）......但这样的事情对我来说真的没有用。只有以下工作：

```
 <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-project-info-reports-plugin</artifactId>
                    <version>2.6</version>
                    <reportSets>
                        <reportSet>
                            <reports>
                                <report>index</report>
                                <report>help</report>
                                <report>project-team</report>
                                <report>modules</report>
                                <report>plugins</report>
                                <report>cim</report>
                                <report>issue-tracking</report>
                                <report>scm</report>
                                <report>license</report>
                                <report>plugin-management</report>
                                <report>distribution-management</report>
                                <report>summary</report>
                                <report>mailing-list</report>
                                <report>issue-tracking</report>
                                <!--
                                <report>dependencies</report>
                                -->
                            </reports>
                        </reportSet>
                    </reportSets>
                </plugin> 
```

这意味着，我告诉站点插件不要在站点中创建与我的依赖项相关的任何内容。您可以从网站的原始报告列表中看到，我只添加了我想要的报告。但是，如果您使用 maven-project-info-reports-plugin 寻找站点生成，许多人也会遇到关于构建花费太多时间以及如何解决它的问题。我希望这可以帮助下一个受害者。

# stored-procedures - PostgreSQL 存储过程用户名

> ID：14855621
> 
> 赞同：0
> 
> 时间：2013-02-13T14:20:07.010
> 
> 标签：stored-procedures, psql

我想知道是否有一种方法可以检测执行触发存储过程的查询的用户的登录名？`table_a`比如说，当特定列发生更改时，我有一个触发器。我想检索执行触发存储过程运行的查询的登录用户的名称。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:24:26.297

事实证明，有一个公认的关键字`current_user`可以做我想要的事情 - 保存执行查询的当前用户的用户名。

# jquery - 自清除 jquery.each() 中的间隔

> ID：14855622
> 
> 赞同：1
> 
> 时间：2013-02-13T14:20:09.870
> 
> 标签：jquery, setinterval

我需要在加载后使用[JavaScript定位/调整图像大小。](http://en.wikipedia.org/wiki/JavaScript)为了保持纵横比不变，我必须知道图像的宽度/高度。我可以使用该`.load`事件，但这触发得太晚了，使重新定位可见。相反，我使用以下技术。

```
 var interval = setInterval(function(){
     if ($('img').height()) { //This means we have got height.
          //Code that uses $('img').height().
          clearInterval(interval);
     }
 },10); 
```

这可以确保代码在我有图像的宽度/高度信息时以及在它完全加载之前执行。

但是，现在，我需要为一堆图像（特别是在 jQuery 插件中）执行此操作，问题似乎是第一次`clearInterval`调用清除了所有间隔，除了第一个之外的所有间隔都`img`保持不变。

我尝试将`$(this)`jQuery 对象中的间隔 id 保存为属性（`$(this).interval = setInterval( ...`和 data `$(this).data("interval", setInterval( ...`。

我还尝试先将 id 保存在变量中，然后将其分配给调用`$(this).data("interval",interval)`的右括号之后`setInterval`。

这样做的正确方法是什么，以便每个间隔都清除自己并且只清除自己？

我的代码的完整列表如下

```
(function($){
   $.fn.extend({
       centerInParent: function(options) {
           var defaults = {
               mode: "fill", //Fill or fit (not implemented)
               padding: 100
           }
           var options =  $.extend(defaults, options);
           return this.each(function() {
               var o = options;
               $t = $(this)
               $p = $t.parent();
               var interval = setInterval(function(){
                   $t.css({position:"absolute", width:"", height:""})
                   if ($t.height()){
                       parentRatio = $p.innerWidth()/$p.innerHeight();
                       thisRatio = $t.innerWidth()/$t.innerHeight();
                       if (thisRatio > parentRatio) var newWidth = $p.innerWidth() - o.padding; else var newWidth = ($p.innerHeight() - o.padding)*thisRatio;
                       var newHeight = newWidth/thisRatio
                       $t.css({
                           width: newWidth,
                           height:newHeight,
                           marginTop: ($p.innerHeight() - newHeight)/2,
                           marginLeft: ($p.innerWidth() - newWidth)/2
                       })
                       clearInterval($t.data("interval"));
                   }
               }, 10)
               $t.data("interval",interval)
           });
       }
   });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:40:19.597

在我的头顶上：

*   不应该也不应该`$t`是`$p`全局变量？即被宣布为

    ```
    var $t = $(this),
        $p = t.parent(); 
    ```

*   在我看来，加载图像并等待 10 毫秒计算其大小的方法是危险的：它可能会在不同的浏览器中产生不同的结果

*   在显示之前更好地预加载图像并计算它们的大小：

    ```
    var img = new Image();
    img.src = 'http://your-image-url';
    $(img).load(function(){
        // here, deal with img.width and img.height
        // and then display
    }); 
    ```

# mongodb - 使用“每次匹配限制”创建“$in”查询？

> ID：14855629
> 
> 赞同：1
> 
> 时间：2013-02-13T14:20:40.237
> 
> 标签：mongodb, pymongo

我有一组用户和一组图像。每个图像文档都存储其用户/创建者的 GUID。给定一组 4 个用户（例如），我想构造一个查询来检索每个用户的 5 个最新图像。是否有“每个标准的限制”运算符，所以我可以通过一个请求完成此操作？就像是：

```
db.images.find( 
  { 'creatorGUID' : { '$in' : arrayOfUserGUIDs , '$limitPerMatch' : 5 } } 
) 
```

如果一个请求不可能，那么这种查询最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:24:22.433

目前不可能，MongoDB 只是有点“知道”然后返回，它不打算查看范围查询的每个子句有多少匹配项。

目前我能想到的唯一方法是`creatorGUID`使用`limit(5)`.

可怕和糟糕，但这是我在这种情况下能想到的唯一方法。

# php - 在构造函数中分配数组参数

> ID：14855636
> 
> 赞同：0
> 
> 时间：2013-02-13T14:20:56.750
> 
> 标签：php

现在我遇到了这样的情况，我需要在函数中为数组传递一个参数（这样我就可以根据我的需要在函数中覆盖它）。那么这在 PHP 中怎么可能呢？例如，

```
class classname
{
    function __construct()
    {
        $array['default'] = 'default value';
    }

    function test()
    {
        $array['a'] = 'a';
        $array['b'] = 'b';
    }
} 
```

我需要`$array['default']`在功能测试中获得。那么如何在 PHP 中做到这一点呢？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:23:52.330

看起来你想`$array`成为一个对象属性：

```
class classname
{
    protected $array = array();

    function __construct()
    {
        $this->array['default'] = 'default value';
    }

    function test()
    {
        $this->array['a'] = 'a';
        $this->array['b'] = 'b';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:27:29.203

您必须首先在类中定义数组

类测试{

$数组=数组（）；

```
function __construct()
{
    $this->array['default'] = 'default value';
}

function test()
{
    $this->array['a'] = 'a';
    $this->array['b'] = 'b';
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:23:28.390

尝试，`$this`

```
class classname
{
    public $array;

    function __construct()
    {
        $this->array['default'] = 'default value';
    }

    function test()
    {
        $this->array['a'] = 'a';
        $this->array['b'] = 'b';
    }
} 
```

# c# - 当任何变量发生变化时触发事件

> ID：14855638
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:21:01.977
> 
> 标签：c#, events, variables

我有一个表格，显示有关程序变量的信息。所以知道我想在任何变量发生变化时更新表格。有什么方法可以触发事件或类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:23:42.933

没有这样的能力，除非你自己编码或者使用一些超级高级的代码工具。

我建议您使用*属性*而不是字段（除非您实际上是指局部变量？）并实现`INotifyPropertyChanged`接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:24:18.753

好吧，有很多方法，但我使用的是可观察的 collectionchanged 事件，所以无论何时触发该事件，它都会执行如下操作...

```
static void ObservableEmployees_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
        {
            switch (e.Action)
            {
                 case NotifyCollectionChangedAction.Add:
                    Console.WriteLine("New item {0} added in the collection",e.NewItems[0].ToString());
                    break;
                case NotifyCollectionChangedAction.Remove:
                    Console.WriteLine("Old item {0} removed in the collection", e.OldItems[0].ToString());
                    break;
                case NotifyCollectionChangedAction.Move:
                    Console.WriteLine("item {0} is moved", e.NewItems[0].ToString());
                    break;
                case NotifyCollectionChangedAction.Replace:
                    Console.WriteLine("item{0} is replacced by item{1}.", e.OldItems[0].ToString(), e.NewItems[0].ToString());
                    break;
                case NotifyCollectionChangedAction.Reset:
                    Console.WriteLine("itme{0} is reset.", e.OldItems[0].ToString());
                    break; 
```

}

和订阅..

```
observableEmployees = new ObservableCollection<Employee>();

            observableEmployees.CollectionChanged += ObservableEmployees_CollectionChanged; 
```

# intellij-idea - 一键式项目树

> ID：14855642
> 
> 赞同：0
> 
> 时间：2013-02-13T14:21:10.393
> 
> 标签：intellij-idea

Intellij 12 中有没有一种方法可以一键打开项目树中的文件？我是从 text-mate 到 intellij 的，我只想单击一个项目一次，它就会出现在编辑屏幕中。

如果必须单击两次有好处，请告诉我，但对我来说，这似乎是多余的双击。

我正在使用 Mac OS X。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:36:43.763

启用“自动滚动到源”选项。您可以通过单击项目资源管理器中的齿轮图标来找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:09:21.893

此外，如果您想要更多控制权，请按 alt-F1-enter。从技术上讲，3 次点击，但只有一个动作。

更新：需要在 Mac 键盘首选项下选择“使用所有 F1、F2 等键作为标准功能键”。

# angularjs - AngularJs 指令报告错误的高度

> ID：14855643
> 
> 赞同：0
> 
> 时间：2013-02-13T14:21:13.687
> 
> 标签：angularjs, angularjs-directive

我创建了 jsFiddle 来描述我的问题。[http://jsfiddle.net/rzajac/MMud3/](http://jsfiddle.net/rzajac/MMud3/)

指令本身在这里：

```
var myApp = angular.module('myApp', []);

myApp.directive('map', function(){
  return {
    restrict: 'E',
    scope: {},
    link: function(scope, elem, attrs)
    {
      elem
        .height(400)
        .width(600)
        .vectorMap({
          map: 'usa_en',
          backgroundColor: null,
          color: '#ffffff',
          hoverColor: '#999999',
          selectedColor: '#666666',
          enableZoom: false,
          showTooltip: true
        });

      document.getElementById('mapHeight').value = elem.height();
    }
  }
}); 
```

该指令在自身内部创建 html 和 SVG 元素。但是当我试图获得创建地图的高度时，我得到的是 19 而不是 400。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:10:42.763

似乎有一些`<map>`标签的默认样式会影响高度计算。

以下css应该可以解决问题：

```
map {
    display: block;
} 
```

另一种解决方法是将指令声明样式更改为*属性*( `A`)。将指令更改`<map>`为和。`<div map></div>``restrict: 'E'``restrict: 'A'`

# c# - 完成后如何处理

> ID：14855649
> 
> 赞同：-4
> 
> 时间：2013-02-13T14:21:25.323
> 
> 标签：c#, asp.net

我想在函数完成后处理实例。我认为带有“使用”的东西...

我还想将每个名称添加到数组中。

我尝试：

```
 using(  Database db = new Database())

    public string[] FindNameByLength(int minimumCharNumber)
    {

        try{
        var query = from u in db.Users
                    where u.FullName.Length > minimumCharNumber
                    select u.FullName;

        string[] namesLength;
        int counter;

        foreach (var s in query)
        {
            namesLength.Concat(new[] {s });
        }
        return namesLength;
        }
        finally IDisposable(db).dispose();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T14:23:57.600

放

```
using(...)
{
    ...
} 
```

在你的函数里面。也不要显式调用`Dispose`.

```
public string[] FindNameByLength(int minimumCharNumber)
{
    using (Database db = new Database())
    {
        var query = from u in db.Users
                    where u.FullName.Length > minimumCharNumber
                    select u.FullName;

        string[] namesLength;
        int counter;

        foreach (var s in query)
        {
            namesLength.Concat(new[] { s });
        }

        return namesLength;
    }
} 
```

`Finally`这里也不需要，因为`Dispose`无论您如何退出`using`范围（`return`，异常，`}`），都会被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:26:17.797

请参阅[using Statement](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)：提供一种方便的语法，确保正确使用 IDisposable 对象。

通常，当您使用 IDisposable 对象时，您应该在 using 语句中声明和实例化它。using 语句以正确的方式调用对象的 Dispose 方法，并且（当您如前所示使用它时）它还会导致对象本身在调用 Dispose 时立即超出范围。在 using 块中，对象是只读的，不能修改或重新分配。

**using 语句可确保调用 Dispose，即使在调用对象上的方法时发生异常也是如此。您可以通过将对象放在 try 块中，然后在 finally 块中调用 Dispose 来获得相同的结果；事实上，这就是编译器翻译 using 语句的方式。**

所以，要么使用**using block**：

```
using (Database db = new Database())
{

} 
```

或者，您可以使用**try-finally**：

```
 Database db = new Database();
  try
  {

  }
  finally
  {
    if (db != null)
      ((IDisposable)db).Dispose();
  } 
```

# axapta - 如何从代码计算项目的当前销售价格（在评估所有贸易协议和折扣优惠后）

> ID：14855653
> 
> 赞同：1
> 
> 时间：2013-02-13T14:21:35.603
> 
> 标签：axapta, x++, dynamics-ax-2012

我需要开发一个 SSRS 报告，其中将列出所有项目及其销售价格，一些项目有折扣优惠，一些有贸易协议，一些项目都适用于它们，我想知道是否有一个内置的方法可以返回考虑所有报价和贸易协议后的当前销售价格。

任何代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:24:06.597

查找贸易协定的逻辑包含在类中`PriceDisc`。如果不存在协议，它也有一个后备。

桌上`InventTable`有一个`salesPriceAgreement()`使用该类的方法，并且可能只做您需要的事情，或者至少作为如何使用该类的示例。

# ckeditor - 在 ckeditor 工具栏中添加复选框以在 img 元素中添加类/删除类

> ID：14855657
> 
> 赞同：1
> 
> 时间：2013-02-13T14:21:46.220
> 
> 标签：ckeditor

我想编写一个 ckeditor 插件，在工具栏上添加一个复选框。

*   当一个 img 元素被选中时，复选框应该反映图像是否具有特定的类。
*   When something else than an image is selected, the checkbox should be disabled, or maybe invisible.
*   当我选中或取消选中复选框时，应将类添加到 img 中/从 img 中删除。

换句话说，我想在工具栏中添加除按钮之外的其他内容（使用 editor.ui.addButton 添加的那些），并且应该是复选框。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:50:58.443

无论如何，我设法做到了，使用 editor.ui.add 和 editor.ui.addHandler。这是一个屏幕截图：

![截屏](../Images/ee16fe3cd2393781f0401f3bf0c8f197.png)

插件.js：

```
CKEDITOR.plugins.add('add_zoomable_to_image',
{
  init: function( editor )
  {
    var disabled_span_color = "#cccccc";
    var enabled_span_color = "#000000";

    var cb;
    var span;

    var html =
      "<div style='height: 25px; display: inline-block'>" +
          "<div style='margin: 5px'><input class='add_zoomable_cb' type='checkbox' disabled='disabled'>" +
              "<span class='add_zoomable_span' style='color: " + disabled_span_color + "'> Add zoomable to image</span>" +
          "</div>" +
      "</div>";

    editor.ui.add('add_zoomable_to_image', "zoomable_button", {});
    editor.ui.addHandler("zoomable_button",
    {
      create: function ()
      {
        return {
          render: function (editor, output)
          {
            output.push(html);

            return {};
          }
        };
      }
    });

    editor.on("selectionChange", function()
    {
      var sel = editor.getSelection();
      var ranges = sel.getRanges();

      if (ranges.length == 1)
      {
        var el = sel.getStartElement();

        if (el.is('img'))
        {
          enable_input();

          if (el.hasClass('zoomable'))
            check_cb();
          else
            uncheck_cb();
        }
        else
          disable_input();
      }
      else
        disable_input();
    });

    editor.on("instanceReady", function ()
    {
      cb = $('.add_zoomable_cb');
      span = $('.add_zoomable_span');

      cb.change(function()
      {
        var element = editor.getSelection().getStartElement();

        if (cb.is(':checked'))
          element.addClass('zoomable');
        else
          element.removeClass('zoomable');
      });

    });

    function enable_input()
    {
      cb.removeAttr('disabled');
      span.css('color', enabled_span_color);
    }

    function disable_input()
    {
      uncheck_cb();
      cb.attr('disabled', 'disabled');
      span.css('color', disabled_span_color);
    }

    function check_cb()
    {
      cb.attr('checked', 'checked');
    }

    function uncheck_cb()
    {
      cb.removeAttr('checked');
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:11:14.400

CKEditor 不包含向工具栏添加复选框的选项，因此您的第一步是查看他们的代码并扩展它以添加复选框。

然后查看其他按钮如何修改内容并检测编辑器中的选择何时更改以反映其新状态，并将这些想法应用于您的复选框。

# python - 对 numpy 混合类型矩阵进行排序

> ID：14855659
> 
> 赞同：0
> 
> 时间：2013-02-13T14:21:49.083
> 
> 标签：python, sorting, numpy, matrix

我想对每列包含相同类型但每列可能有不同类型的此类（更宽）矩阵进行排序。这种排序应该执行，以便一行的所有列保持在一起，但行顺序遵循定义列的值

```
[ 
[1, 0, 0.25,'ind1', 'pop2', 0.56],
[2, 0, 0.35,'ind2', 'pop2', 0.58],
[1, 0, 0.23,'ind1', 'pop1', 0.66],
...
] 
```

在这里，我按第 2 列（浮点列）执行排序算法

```
[ 
[1, 0, 0.23,'ind1', 'pop1', 0.66],
[1, 0, 0.25,'ind1', 'pop2', 0.56],
[2, 0, 0.35,'ind2', 'pop2', 0.58],
...
] 
```

如果列包含字符类型，它会改变吗？感谢您的帮助和建议，但检查了 lexsort、sort、argsort ......但可能是错误的方式。编辑：我不知道为什么，但是如果我的矩阵被定义为 numpy.matrix()，argsort() 方法会添加一个维度（所以三个维度的结果），如果矩阵是使用 numpy.array( ）。如果它可以帮助更多的读者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:48:00.943

如果您的数据类型具有命名字段，则可以使用 numpy.sort，在“order”参数中指定要排序的字段名称：

```
import numpy 

fieldTypes = ['i4', 'i4', 'f8', 'S4', 'S4', 'f8'] # data types of each field
fieldNames = ['a', 'b', 'c', 'd', 'e', 'f'] # names of the fields, feel free to give more descriptive names

myType = numpy.dtype(zip(fieldNames, fieldTypes)) # Create a numpy data type based on the types and fields

a = numpy.array([(1, 0, 0.25,'ind1', 'pop2', 0.56),
(2, 0, 0.35,'ind2', 'pop2', 0.58),
(1, 0, 0.23,'ind1', 'pop1', 0.66)], dtype=myType) # Create the array with the right dtype

print numpy.sort(a, order=['c']) # sort based on column 'c' 
```

请注意，如果您正在创建一个空缓冲区或从现有文件/缓冲区加载 numpy 数据，您仍然可以将其转换为具有命名字段的 dtype。

如果您没有命名字段，[这个](https://stackoverflow.com/questions/2828059/sorting-arrays-in-numpy-by-column)答案可以帮助您，我推荐@Steve Tjoa 建议的方法：

```
a[a[:,1].argsort()] # Replace 1 with the index you need 
```

# android - 访问 Spinner 的布局并设置其 TextView

> ID：14855660
> 
> 赞同：2
> 
> 时间：2013-02-13T14:21:57.450
> 
> 标签：android, spinner

我正在尝试设置 Spinner 的 TextView，但无法访问它。关于这个问题有很多解决方案，但都可以从 Spinner Adapter 解决。在我的问题中，我不能更改来自适配器的文本。我想从微调器对象本身更改它。

所以我尝试了几种方法来解决它。

1)

```
LayoutInflater layoutInflater = LayoutInflater.from(spnSektorInsert.getContext());
View convertView = layoutInflater.inflate(R.layout.spinner_item, null);
TextView txtSpinner = (TextView) convertView.findViewById(R.id.txtSpinner);

txtSpinner.setText("Something");
txtSpinner.setTextColor(Color.RED); 
```

2)

```
View convertView = spnSektorInsert.getAdapter().getView(0, null, null);
TextView txtSpinner = (TextView) convertView.findViewById(R.id.txtSpinner);

txtSpinner.setText("Something");
txtSpinner.setTextColor(Color.RED); 
```

3)

```
TextView txtSpinner = (TextView) spnSektorInsert.getChildAt(0);
txtSpinner.setText("Something");
txtSpinner.setTextColor(Color.RED); 
```

在前两种方式中，什么都没有发生，在最后一种方式中，应用程序因 NullPointerException 而崩溃。任何想法将不胜感激。

# dependency-injection - 使用 DI 框架时，新服务如何知道其他可用的服务？

> ID：14855661
> 
> 赞同：0
> 
> 时间：2013-02-13T14:21:58.413
> 
> 标签：dependency-injection, ninject, ninject-2

在使用 DI 框架（例如我的例子中的 Ninject）的大型项目中，在实现新的“服务”以找出哪些其他“服务”可用作依赖项时存在哪些选项。在使用 DI 之前，我注意到我们的代码库中倾向于获取对“上帝”对象的引用，该对象几乎可以访问所有可用功能，然后 Visual Studio 的 IntelliSense 将变得非常有助于发现所有可用功能（显然这方法之所以可行，是因为最初拥有这样一个对象的架构决策不佳）。

我可以提供一些可能的答案，并对对其他人有用的东西感兴趣：

1.  您应该足够了解您正在使用的整个系统，以了解存在哪些其他类/服务（例如，如果我有静态类，我只需要知道它们存在就可以使用它们）。
2.  您维护代码库的良好外部文档，因此所有开发人员都理解所有类/服务（这会带来很大的文档负担，在我看来）。
3.  创建一个 API 来查询 DI 容器（Ninject 内核）以获取所有绑定的列表，以查看哪些服务可用（可能只有单例）。这也可以作为构建系统的一部分来完成，以便在开发人员可以引用的每个构建时自动生成一个文档。

这曾经是其他开发人员的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:16:20.160

通常您不希望看到系统中存在所有服务，然后选择其中一个。你想访问一个功能。以某种方式使用名称空间来构造您的类，以便在哪里查找它是显而易见的。

例如，如果我想知道 .NET 中有哪些可用的集合，我键入`System.Collections.Generic.`，IntelliSense 会给我一个选项列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:11:16.577

我倾向于组织我的代码库，以便我有一个所有其他项目都有参考的中央“接口”项目。那么my`Logger`只能通过`ILogger`接口使用，日志模块可以选择具体`ILogger`提供哪个。你不应该请求具体的类——这违背了 DI 的目的。

通常，当您实施一项新服务时，您应该**已经知道**您需要哪些依赖项。如果您不知道应该使用什么，**请询问知道的人。**这相当于拥有足够的文档——依赖智能感知会给你一个非常肤浅的想法，你应该把什么作为依赖。相反，您应该查阅文档或了解该领域的人。

# php - 组合多个数组 - 基于数字？

> ID：14855663
> 
> 赞同：0
> 
> 时间：2013-02-13T14:22:12.020
> 
> 标签：php, arrays, merge

这似乎很容易，但无法弄清楚如何做到这一点。当前数组数据按日期列出，按日期数量列出，所以我需要将所有日期组合起来：日、月、6 个月、1 年。我需要安排数组数据看起来像下面的第二个数组。

```
 array
      0 => `enter code here`
        array
          '1_day' => int 37
      1 => 
        array
          '30_day' => int 3275
      2 => 
        array
          '180_day' => int 3908
      3 => 
        array
          '1_year' => int 6933
      4 => 
        array
          'date' => string '2013-02-13' (length=10)
      5 => 
        array
          '1_day' => int 46
      6 => 
        array
          '30_day' => int 3134
      7 => 
        array
          '180_day' => int 3764
      8 => 
        array
          '1_year' => int 6820
      9 => 
        array
          'date' => string '2013-02-12' (length=10)
      10 => 
        array
          '1_day' => int 61
      11 => 
        array
          '30_day' => int 3127
      12 => 
        array
          '180_day' => int 3750
      13 => 
        array
          '1_year' => int 6807
      14 => 
        array
          'date' => string '2013-02-11' (length=10) 
```

```
 array
      0 => 
          '1_day' => int 37
          '30_day' => int 3275
          '180_day' => int 3908
          '1_year' => int 6933
          'date' => string '2013-02-13' (length=10)
      1 => 
          '1_day' => int 46
          '30_day' => int 3134
          '180_day' => int 3764
          '1_year' => int 6820
          'date' => string '2013-02-12' (length=10)
      2 => 
          '1_day' => int 61
          '30_day' => int 3127
          '180_day' => int 3750
          '1_year' => int 6807
          'date' => string '2013-02-11' (length=10)
            回答 #1

赞同：0

时间：2013-02-13T14:40:55.117

```
Try this one....

$result = array();     
 $i = 0;
foreach($data as $key => $d) 
{
    $result[$i]['1_day'] = $data[$key]['1_day'];
    $result[$i]['30_day'] = $data[$key+1]['30_day'];
    $result[$i]['180_day'] = $data[$key+2]['180_day'];
    $result[$i]['1_year'] = $data[$key+3]['1_year'];
    $result[$i]['date'] = $data[$key+4]['date'];
    $key = $key+5;
    $i++;
  } 
```

            回答 #2

赞同：0

时间：2013-02-13T14:44:42.633

未经测试，但这应该让你接近：

```
<?php

$result = array();

for ($i = 0; $i <= count($array); $i++)
{
    if ($array[$i] == 'date')
    {
        $result[] = array(
            '1_day'    => $array[$i-4],
            '30_day'   => $array[$i-3],
            '180_day'  => $array[$i-2],
            '1_year'   => $array[$i-1],
            'date'     => $array[$i],
        );
    }
} 
```

            回答 #3

赞同：0

时间：2013-02-13T15:08:01.087

另一种方法：

```
<?php

$count = count($inArray);

//In place subarray merger, by this you don't have to modify keys every time they change.
//Constraint: A sub-array at every index.

for ($idx =0, $jdx =0; $idx < $count; $idx +=5, $jdx++) {
    $inArray[$jdx] = array_merge($inArray[$idx],
                                $inArray[$idx +1],
                                $inArray[$idx +2],
                                $inArray[$idx +3],
                                $inArray[$idx +4]);
}

array_splice ($inArray, $count/5);

/* OR into another array */

for ($idx =0, $jdx =0; $idx < $count; $idx +=5, $jdx++) {
    $newArray[$jdx] = array_merge($inArray[$idx],
                                $inArray[$idx +1],
                                $inArray[$idx +2],
                                $inArray[$idx +3],
                                $inArray[$idx +4]);
}

?> 
```

```

# ios - 如何创建一个方法并在另一个方法中使用它

> ID：14855666
> 
> 赞同：0
> 
> 时间：2013-02-13T14:22:16.547
> 
> 标签：ios, objective-c, afnetworking

我创建了一个使用 AFNetworking 并从 URL 获取 JSON 的方法。但我不知道如何在 ViewDidLoad 中使用它。我得到一个错误或一个空的 UITable。

这是我的代码：

```
@interface QWViewController ()

-(void)loadVideoFromURL:(NSURL *)url;

@end

@interface NSURL()

-(void)loadVideoFromURL:(NSURL *)url;

@end 
```

// 我创建的方法：

```
-(void)loadVideoFromURL:(NSURL *)url {

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    // setup AFNetworking stuff
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        // call delegate or processing method on success

        self.myJSON = (NSDictionary *)JSON;

        NSLog(@" json %@", self.myJSON);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];

} 
```

// 这里是 ViewWillAppear:

```
 -(void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    //[super viewDidLoad];

    NSLog(@" video Meta Data %@", self.myJSON);
    // link to the youtube channel or playlist NOTE: JSON and JSONC are not the same. Use JSONC, as far as i recall, its customised for youtube.

    NSString *urlAsString = @"http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50";

    NSURL *myurl = [NSURL URLWithString:urlAsString];

    self.myJSON = [self loadVideoFromURL:myurl];

        // I am using self.videoMetaData. I am defining it in the .h file as a property. This will let me use it anywhere in this .m file.

        self.videoMetaData = [self.myJSON valueForKeyPath:@"data.items.video"];

        NSLog(@" JSON view will apear %@", self.myJSON);

        // This will have all the sq and hq thumbnails

       // self.allThumbnails = [urlcontent valueForKeyPath:@"data.items.video.thumbnail"];

        // The table need to be reloaded or else we will get an empty table.

        [self.tableView reloadData]; // Must Reload

        // NSLog(@" video Meta Data %@", self.videoMetaData);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:30:34.453

你的返回类型是无效的`loadVideoFromURL`，

您不能像这样分配值

```
NSURL *urlcontent = [self loadVideoFromURL:myurl]; 
```

除非您的方法返回类型`loadVideoFromURL`为`NSURL`.

因此，您应该像这样调用您的方法，而不是在您的情况下将其分配给 urlcontent

```
[self loadVideoFromURL:myurl]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:25:45.130

```
 NSURL *urlcontent = [self loadVideoFromURL:myurl]; 
```

# plone - collective.sendaspdf “运行 wkhtmltopdf 失败”

> ID：14855667
> 
> 赞同：0
> 
> 时间：2013-02-13T14:22:21.513
> 
> 标签：plone, wkhtmltopdf

我正在 Plone 4.2.4 服务器上安装collective.sendaspdf。

此插件提供了两个额外的文档操作按钮，一个“以 PDF 格式发送”，另一个“以 PDF 格式查看”

[按照包 pypi 页面](http://pypi.python.org/pypi/collective.sendaspdf)上的说明进行操作后。尝试单击上述文档操作链接之一时，我得到以下回溯：

```
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute 
'_Thread__block'",) in <module 'threading' from '/home/dan/Plone/Python-2.7/lib/python2.7
/threading.pyc'> ignored

2013-02-13 14:04:50 ERROR collective.sendaspdf Running wkhtmltopdf failed. Please check that you 
use a version compatible with your OS and the version is 0.9.
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute 
'_Thread__block'",) in <module 'threading' from '/home/dan/Plone/Python-2.7/lib/python2.7
/threading.pyc'> ignored

2013-02-13 14:05:55 ERROR collective.sendaspdf Running wkhtmltopdf failed. Please check that you 
use a version compatible with your OS and the version is 0.9. 
```

我已经尝试将 wkhtmltopdf 固定到它需要的版本，在`[versions]`标题下，但这对我没有任何作用。我曾尝试`collective.sendaspdf`仅在该部分下加载单独的，`eggs`但同样，这也不起作用。我尝试手动下载它们，将它们放入我的`src`文件夹并相应地配置该`develop`部分，但这又给了我同样的错误。我什至尝试过easy_install，但我遇到了同样的问题。

无法遵循[pypi 页面](http://pypi.python.org/pypi/collective.sendaspdf)上的说明，因为我相信`[wkhtmltopdf]`标题下的 url 会导致存档损坏（我不能使用 tar、gzip 或 bunzip2 来提取文件）但是他确实有包含 zip 文件我尝试手动下载和使用easy_install的源代码）但无济于事。

我一直在研究

```
ERROR collective.sendaspdf Running wkhtmltopdf failed. Please check that you 
use a version compatible with your OS and the version is 0.9. 
```

我收到的错误消息，但我似乎没有看到任何 Plone 用户遇到困难，似乎大多数人都在使用 Rails。

有谁知道我该怎么做：

1.  让它工作
2.  找到另一种将 HTML 从 Plone 转换为 PDF 的方法。

我已经尝试过 Form2PDF、zopyx.smartpringng，现在又尝试了collective.sendaspdf（这个我用得最远）——除了它落在了最后一个障碍上

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:02:38.610

我担心您在第一个障碍中失败了：安装 wkhtmltopdf。访问[https://code.google.com/p/wkhtmltopdf/](https://code.google.com/p/wkhtmltopdf/)并按照他们的说明进行安装，或者在此处查找与您的系统兼容的版本的 URL

# ios - 在 appdelegate 和视图控制器中访问的同一数据库之间的一致性

> ID：14855676
> 
> 赞同：0
> 
> 时间：2013-02-13T14:22:46.073
> 
> 标签：ios, core-data, nsmanagedobjectcontext, save, uimanageddocument

我最近一直在使用 Core Data 和 UIManagedDocument，并且有一些问题。

我有一个 UITableViewController，我在其中打开一个 UIManagedDocument。在这里，我将信息下载到 tableViewCotroller 并将信息保存到数据库并更新 tableview。现在，当我通过主页按钮进入主屏幕然后再次打开应用程序时，我想处理 appdelegate 中数据库中的数据。因此，在 appdelegate 中的适当方法中，我打开数据库，获取我想要的实体并更改我想要的对象的属性。现在，这行得通，我设法打开数据库并从数据库中获取我想要的对象。

当我完成从 appdelegate 中的数据库更改数据时，我的问题就出现了。因为在appdelegate方法完成后，我尝试从同一个数据库中重新获取tableview中的数据，但是此时数据库还没有注册在appdelegate中调用的方法中所做的更改。在 appdelegate 内部进行更改之后，我尝试调用 saveToURL 以覆盖 UIManagedDocument 上的方法，并且我还尝试了 managedobjectcontext 上的 save: 方法。保存更改以便更新数据库的正确方法是什么？

Ps：我是在iPad上写的，所以我没有设法上传代码，我稍后再上传。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:09:56.633

这是正确的方法 - 在 NSManagedObjectContext 中进行更改然后保存。请记住，saveToURL 是异步的，因此最有可能的问题是在您在表视图中执行提取时您的保存尚未完成。这就是完成块的来源。所以也许你可以让完成块在你的表视图中设置一个属性，这会导致你的获取发生。就像是

```
// appdelegate
[self.mainDatabase saveToURL:self.mainDatabase.fileURL
            forSaveOperation:UIDocumentSaveForOverwriting
           completionHandler:^(BOOL success) {
               if (success) {
                   myTableView.context = self.mainDatabase.managedObjectContext;
                }
           }];

// TableView
- (void)setContext:(NSManagedObjectContext *)newContext {
_context = newContext;
NSArray *fetchResults = [_context executeFetchRequest:someFetchRequest error:&error];
// update model etc.
} 
```

# javascript - 无法使用 requirejs 定义 Backbone

> ID：14855677
> 
> 赞同：0
> 
> 时间：2013-02-13T14:22:47.720
> 
> 标签：javascript, backbone.js, requirejs

我以前做过，所以我一定是愚蠢的。你能看到我在这里做错了什么吗？

```
requirejs.config({

    paths: {
        'jquery': 'vendor/require-jquery',
        'jquery-ui': 'vendor/jquery-ui-1.9.1.custom.min',
        'modernizr': 'vendor/modernizr-2.6.1.min',
        'nivoslider': 'vendor.nivo.slider.pack',
        'chosen': 'vendor/chosen.jquery.min',
        'backbone': 'vendor/backbone.min',
        'underscore': 'vendor/underscore.min',
        'consolefix': 'consolefix'
    },

    shim: {
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        }
    }
});

require(['jquery', 'modernizr', 'backbone'], function($, modernizr, Backbone) {
    var model = Backbone.Model.extend();
    console.log(model);
}); 
```

未捕获的类型错误：无法读取未定义的属性“模型”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:57:32.590

您也应该将 jquery 和 uderscore 定义为 shim。

奥利维尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:58:52.713

您无需依赖`shim`即可取回价值。加载后只需使用全局主干即可。

看到这个，有点类似的问题：[https ://stackoverflow.com/a/14715393/366864](https://stackoverflow.com/a/14715393/366864)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:26:03.350

您可能想更改`requirejs.config`为`require.config`，它应该可以工作。

# internet-explorer - Likebox 在 IE 中不起作用（即使在 Facebook 开发人员中）

> ID：14855679
> 
> 赞同：1
> 
> 时间：2013-02-13T14:22:47.007
> 
> 标签：internet-explorer, facebook-likebox

我在这里遇到了一个非常奇怪的情况。[我正在尝试通过http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)上的生成器为 facebook fanpage 生成 Likebox 代码

但如果我尝试使用这个 URL： http: **[//www.facebook.com/chiron.ausbildung](http://www.facebook.com/chiron.ausbildung)**作为likebox，预览就会消失。它在 Firefox 中确实有效。我认为这是“点”的错误，但事实并非如此，因为例如*** **www.facebook.com/Ausbildung.Studium.made.by.TRUMPF* 工作得很好。

您可以尝试在生成器中输入“chiron.ausbildung” URL（使用 IE / Chrome）

有什么帮助吗？

# linux - Linux、sysfs、USB 记忆棒和 USB 硬盘驱动器

> ID：14855680
> 
> 赞同：4
> 
> 时间：2013-02-13T14:22:48.340
> 
> 标签：linux, usb, udev, sysfs

有没有办法通过 Linux 中的 libudev / sysfs 区分 USB 记忆棒（闪存）和 USB 硬盘驱动器？如果没有，有没有办法直接查询硬件？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:42:24.320

也许您可以使用这样的 udev 规则检查[设备子类](http://usb-ids.gowdy.us/read/UC/08)`ATTRS{bDeviceSubClass}=="xx"`：我不知道您是否可以仅使用子类准确地区分棒与真实驱动器。

# asp.net - MVC 在运行时更新 FormsAuthenticationTicket UserData

> ID：14855688
> 
> 赞同：5
> 
> 时间：2013-02-13T14:23:28.893
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, forms-authentication

我正在编写一个具有**自定义身份验证和授权的****MVC 4** Web 应用程序。当用户登录网站时，我创建一个**FormsAuthenticationTicket**并将其存储在**cookie中**

 ******```
public void SignIn(string userName, bool createPersistentCookie, string UserData)
{
    if (String.IsNullOrEmpty(userName)) throw new ArgumentException("Value cannot be null or empty.", "userName");

    // Create and tuck away the cookie
    FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(1, userName, DateTime.Now, DateTime.Now.AddDays(15), createPersistentCookie, UserData);
    // Encrypt the ticket.
    string encTicket = FormsAuthentication.Encrypt(authTicket);

    //// Create the cookie.
    HttpCookie faCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
    HttpContext.Current.Response.Cookies.Add(faCookie);
} 
```

**UserData**字符串将是一个以竖线分隔的字符串，并且始终包含至少两项，**UserID | 用户角色**。可以为用户分配一个或多个角色，因此，UserData 可能看起来像这样**UserID | 用户角色 | 用户角色 | 用户角色**

然后我在 Global.asax 中有我自己的自定义**通用主体**

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{

        // Get the authentication cookie
        string cookieName = FormsAuthentication.FormsCookieName;
        HttpCookie authCookie = Context.Request.Cookies[cookieName];

        // If the cookie can't be found, don't issue the ticket
        if (authCookie == null) return;

        // Get the authentication ticket and rebuild the principal
        // & identity
        FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);

        string[] UserData = authTicket.UserData.Split(new Char[] { '|' });

        GenericIdentity userIdentity = new GenericIdentity(authTicket.Name);
        GenericPrincipal userPrincipal = new GenericPrincipal(userIdentity, UserData);
        Context.User = userPrincipal;
} 
```

这一切都很好，但是，在我的应用程序中，如果用户有多个角色，当他们登录时，我需要列出他们的角色，然后让他们只选择一个角色去执行基于所选角色的功能。

我在想，要做到这一点，也许我可以将用户选择的角色传递给一个方法，获取他们的**FormsAuthenticationTicket**并更新**UserData**以反映他们选择的角色。例如，使用**1|Manager|Applicant创建了一个****UserData**字符串，然后我需要列出两个角色并询问用户他们想要在哪个角色下执行功能，他们选择**Manager**，然后我将他们的**FormsAuthenticationTicket中的****UserData**更新为**1|经理**。

 ******这甚至可能吗，或者也许有更好的方法来做到这一点？

任何帮助将不胜感激。

感谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-19T19:01:16.763

你总是可以改变`FormsAuthenticationTicket`的。

```
HttpCookie cookie = FormsAuthentication.GetAuthCookie(Username, true);
var ticket = FormsAuthentication.Decrypt(cookie.Value);

var newticket = new FormsAuthenticationTicket(ticket.Version,
                                              ticket.Name,
                                              ticket.IssueDate,
                                              ticket.Expiration,
                                              true, 
                                              "new user data",
                                              ticket.CookiePath);

cookie.Value = FormsAuthentication.Encrypt(newticket);
cookie.Expires = newticket.Expiration.AddHours(24);
HttpContext.Current.Response.Cookies.Set(cookie); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T21:53:36.773

正如我在评论中所说，我觉得这是非常糟糕的可用性。但是，如果您决心这样做，那么 Dzenan 的方法会奏效（您基本上只是在用户选择了他想要的角色之后去掉所有其他角色）。

另一种方法是向您的用户数据添加一个附加字段，即 SelectedRole。然后创建一个包含此字段的自定义 IPrincipal。

另一种方法是将其存储为您自己的 cookie，尽管我会确保您验证您没有设置用户未授权的角色（即，如果您设置 SelectedRole=Admin 确保用户具有管理员使用之前的角色）。************

# c# - LINQ 说 insertonsubmit 的参数无效

> ID：14855689
> 
> 赞同：0
> 
> 时间：2013-02-13T14:23:30.483
> 
> 标签：c#, linq, linq-to-sql, invalid-argument, insertonsubmit

在使用 C# 中的 LINQ 将数据插入 SQL Server 08R2 中的表时，我似乎遇到了这个问题。无论我尝试过什么，我都会不断收到错误消息`INSERTONSUBMIT()`。这是代码...

```
private void testUpdateUNITBC()
{
      using (unitDataContext unit = new unitDataContext())
      {
            unitnotest unitbc = new unitnotest();
                 unit.FBARCO = "1234";
                 unit.FUNITNO = "1234";
                 unit.FJOBNO = "I9999-0000";
                 unit.FBOXNO = "999";
                 unit.FOPNO = "999";

             unit.UNITBCs.InsertOnSubmit(unitbc); <--this is where I get the error
       }; 
```

错误读取

> void Table.InsertOnSubmit(UNITBC entity) 将处于挂起插入状态的实体添加到此 System.Data.Linq.Table。错误：“System.Data.Linq.Table.InsertOnSubmit(AS5553.UNITBC)”的最佳重载方法匹配有一些无效参数

我用来保存变量的容器与表数据类型匹配。（`string`对`varchar(64)`）我知道我需要`unit.SubmitChanges();`下一个，但没关系，因为我无法通过这`INSERTONSUBMIT()`一点。任何帮助都会很棒，因为我已经尝试了几件事，并花了一整天的时间进行研究。

**更新**

这是所要求的 unitnote 类...

```
 public class unitnotest 
{ 
     public string FBARCO {get;set;}
     public string FUNITNO {get;set;}
     public string FJOBNO {get;set;}
     public string FBOXNO {get;set;}
     public string FOPNO {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:31:58.277

似乎`EntityObject`of type与of type`unitnotest`不同。`EntityObject``ObjectSet``UNITBCs`

表示您试图插入错误的对象。

# python - 从列表中生成汇总范围

> ID：14855690
> 
> 赞同：2
> 
> 时间：2013-02-13T14:23:41.997
> 
> 标签：python, list, range

我有一个整数列表：

```
list = [a,b,c,d] 
```

我想将其转换为这些范围：

```
0..a
a+1..a+b
a+b+1..a+b+c
a+b+c+1..a+b+c+d 
```

任何想法如何在python中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T14:25:19.187

一个简单的生成器会做：

```
def to_ranges(seq):
    iseq = iter(seq)
    x = next(iseq)
    yield range(0,x+1)
    start = x
    for x in iseq:
        stop = start+x
        yield range(start+1,stop+1)
        start = stop

for x in to_ranges([1,2,3,4]):
    print x 
```

这给出了：

```
[0, 1]         #0 .. a check
[2, 3]         #a+1 (2) .. a+b (1+2=3) check 
[4, 5, 6]      #a+b+1 (1+2+1=4) .. a+b+c (1+2+3=6) check
[7, 8, 9, 10]  #a+b+c+1 (1+2+3+1=7) .. a+b+c+d (1+2+3+4=10) check 
```

终于做对了。不幸的是，第一个循环是特殊的，因为边界条件为 0——所以我们只需要展开那个循环就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:33:38.587

尽管接受的答案产生了正确的结果，但只能使用几个循环和列表生成器来获得解决方案。更高级的语言运算符似乎不合适，因为问题是在询问这样一个简单的问题——生成一些列表。

此解决方案仅适用于正整数。处理带有负数的序列留给读者作为练习。

```
# starting data
nums = [3, 5, 22, 6]

# Generate endpoints for output sequences.
# Note that the first sequence starts specially at 0.
endpoints = [0]
for i in range(len(nums)):
    endpoints.append(endpoints[i] + nums[i])
endpoints[0] = -1

# Generate output sequences.
outseqs = []
for i in range(1, len(endpoints)):
    outseq = [n for n in range(endpoints[i - 1] + 1, endpoints[i] + 1)]
    outseqs.append(outseq)

# Display output sequences.
for i in range(len(outseqs)):
    print outseqs[i] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:47:25.970

如果输入中有负数，那么到目前为止提供的所有解决方案都不起作用，因此需要反向顺序的范围。我的解决方案涵盖了这一点。适用于 Python 2 和 3。这里是：

```
from itertools import izip

# create the x (=start) and y (=stop) coordinates for the ranges separately
def _get_xs(iterable):
    yield 0
    for i in xrange(1, len(iterable)):
        yield sum(iterable[:i]) + 1

def _get_ys(iterable):
    yield iterable[0]
    for i in xrange(1, len(iterable)):
        yield sum(iterable[:i+1])

def to_ranges(iterable):
    xs = _get_xs(iterable)
    ys = _get_ys(iterable)
    for x, y in izip(xs, ys):
        if x < y:
            step = 1
            y += 1
        elif x > y:
            step = -1
            y -= 1
        else:
            step = 0
        try:
            yield range(x, y, step)
        except ValueError:
            yield [x] 
```

例子：

```
# edge case: instead of malformed ranges such as range(10, 10), put [10] instead

>>> list(to_ranges([1, 2, 3, 4]))
[[0, 1], [2, 3], [4, 5, 6], [7, 8, 9, 10]]

>>> list(to_ranges([4, 3, 2, 1]))
[[0, 1, 2, 3, 4], [5, 6, 7], [8, 9], [10]]

>>> list(to_ranges([4, 3, 2, -1]))
[[0, 1, 2, 3, 4], [5, 6, 7], [8, 9], [10, 9, 8]]

>>> list(to_ranges([-4, -3, -2, -1]))
[[0, -1, -2, -3, -4], [-3, -4, -5, -6, -7], [-6, -7, -8, -9], [-8, -9, -10]]

>>> list(to_ranges([-1, -2, -3, -4]))
[[0, -1], [0, -1, -2, -3], [-2, -3, -4, -5, -6], [-5, -6, -7, -8, -9, -10]] 
```

# mysql - ON子句的两个位置：哪个更快？

> ID：14855702
> 
> 赞同：1
> 
> 时间：2013-02-13T14:24:11.757
> 
> 标签：mysql

以这种方式加入给定的选择会更快吗

```
select ...
join table1 
on condition1
join table2
on condition2 
```

那么这个

```
select ...
join table1
join table2
on condition1
and condition2 
```

因为你保持临时表更小？

（让我们假设：condition1 与 table2 无关。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:07:54.573

理论上，过滤条件应该“尽快”说明，即选项 1*可能*表现更好。

在实践中，大多数时候，SQL 解析器会将任一版本优化为相同的执行计划。也就是说，除非您的条件真的很扭曲，或者`table1`实际上`table2`是子查询。

如果您有实际查询要处理，请检查执行计划：`EXPLAIN [your query here]`

（抱歉，如果您不向我们提供更多……细节，就很难更具体）

# c# - ValidationRule 是否能够防止控制状态被更新？

> ID：14855706
> 
> 赞同：1
> 
> 时间：2013-02-13T14:24:15.700
> 
> 标签：c#, wpf, binding, validationrule

也许我没有`ValidationRule`正确使用，如果是这样，请告诉我正确的方法。

目前，我已经实现了一个`WarningForUncheckRule`继承自的类`ValidationRule`，并将其绑定到一个绑定。

```
<cc:StarCheckBox>
    <cc:StarCheckBox.IsChecked>
        <Binding>
            <Binding.Path>IsFavorate</Binding.Path>
            <Binding.ValidationRules>
                <vm:WarningForUncheckRule />
            </Binding.ValidationRules>
            <Binding.Mode>TwoWay</Binding.Mode>
        </Binding>
    </cc:StarCheckBox.IsChecked>
</cc:StarCheckBox> 
```

我实现代码并`false`作为结果返回（此处用于测试目的）：

```
public class WarningForUncheckRule : ValidationRule
{
    public override ValidationResult Validate(object value, 
                                              CultureInfo cultureInfo)
    {
        return new ValidationResult(false, null);
    }
} 
```

我的问题是，如果我返回`false`这里，只有错误 UI 显示错误消息，但 UI 状态**仍然更改**。

是否可以使用`false`ValidateResult 来**防止 UI 被更新**？

如果没有，是否有其他方法可以绑定来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:35:09.887

验证后视图模型上的调用属性已更改，它应将旧值返回到编辑前的 UI。

# php - 使用 PHP array_combine & 与多维数组一起爆炸

> ID：14855711
> 
> 赞同：0
> 
> 时间：2013-02-13T14:24:23.670
> 
> 标签：php, multidimensional-array, explode

嗨，我需要一些帮助来使用explode 和array_combine 形成数组。

我正在尝试组合下面的两个数组（数量和 fooddesc），它们是使用爆炸的结果。我试图使用数组组合将 qty 数组设为键，将 fooddesc 数组设为值，但无法正确获取语法，因此我中止了。

我似乎无法弄清楚如何做到这一点。可能我只需要更改查询数据的方式，所以我根本不需要使用爆炸？？它快把我逼疯了。

我正在形成一个数组以包含一个膳食计划，其中包含 n 份膳食，其中包含食物数量及其描述，这样我就可以轻松地将数组中的数据提取到我的 html 中。

这是我的代码和数组输出：

```
// Begin Meal Plan
$sql = "SELECT notes, mealdesc, optdesc, group_concat(qty) as qty, group_concat(fooddesc SEPARATOR ',') as fooddesc 
    FROM plan p
    INNER JOIN mealplan mp
    ON mp.planid = p.id
    INNER JOIN meal m
    ON m.id = mp.mealid
    INNER JOIN foodmeal fm
    ON fm.mealid = m.id
    INNER JOIN food f
    ON f.id = fm.foodid
    where userid = 2
    GROUP by mealdesc
    order by mealdesc";

$result = mysqli_query($link, $sql);
if (!$result)
{
    echo 'Error';
    exit();
}

// Fetch meal data
while($row = mysqli_fetch_array($result)){
$meals[$row['mealdesc']] = array('optdesc' => $row['optdesc'], 'qty' => explode(",",     $row['qty']), 'fooddesc' => explode(",", $row['fooddesc']));
$notes = $row['notes'];
}
// End Meal Plan 
```

这是它产生的数组：（我剪掉了这个以显示第一顿饭以保持简短）

```
Array
(
    [Meal 1] => Array
        (
            [optdesc] => upon awakening
            [qty] => Array
                (
                    [0] => 1
                    [1] => 6
                    [2] => 1/2 cup
                    [3] => 2 slices
                    [4] => 1 piece
                    [5] => 1 cup
                )

            [fooddesc] => Array
                (
                    [0] => egg
                    [1] => egg whites
                    [2] => oatmeal
                    [3] => wheat toast
                    [4] => fruit
                    [5] => berries
                )

        ) 
```

**编辑** 再次尝试 array_combine 并使用 count 和 for 循环为餐点组合 qty 和 food desc，然后使用 unset 删除旧的 qty/fooddesc 数组。

我不知道这是否是最好的解决方案，但它确实有效。:) 认为我刚刚回答了我自己的问题。

```
// Fetch meal data
while($row = mysqli_fetch_array($result)){
$meals[$row['mealdesc']] = array('optdesc' => $row['optdesc'], 'qty' => explode(",",     $row['qty']), 'fooddesc' => explode(",", $row['fooddesc']));
$notes = $row['notes'];
}

$j = count($meals);
for($i = 1; $i <= $j ; $i++) 
{
$meals['Meal '.$i][food] = array_combine($meals['Meal '.$i]['qty'], $meals['Meal '.$i]['fooddesc']);
unset($meals['Meal '.$i]['qty']);
unset($meals['Meal '.$i]['fooddesc']);
}
// End Meal Plan 
```

这给了我：

```
Array
(
    [Meal 1] => Array
        (
            [optdesc] => upon awakening
            [food] => Array
                (
                    [1] => egg
                    [6] => egg whites
                    [1/2 cup] => oatmeal
                    [2 slices] => wheat toast
                    [1 piece] => fruit
                    [1 cup] => berries
                )

        )

    [Meal 2] => Array
        (
            [optdesc] => 3 hours later
            [food] => 
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:52:43.023

再次尝试 array_combine 并使用 count 和 for 循环来合并 qty 和 food desc，然后使用 unset 删除旧的 qty/fooddesc 数组。

我不知道这是否是最好的解决方案，但它确实有效。:) 认为我刚刚回答了我自己的问题。

```
// Fetch meal data
while($row = mysqli_fetch_array($result)){
$meals[$row['mealdesc']] = array('optdesc' => $row['optdesc'], 'qty' => explode(",",     $row['qty']), 'fooddesc' => explode(",", $row['fooddesc']));
$notes = $row['notes'];
}

$j = count($meals);
for($i = 1; $i <= $j ; $i++) 
{
$meals['Meal '.$i][food] = array_combine($meals['Meal '.$i]['qty'], $meals['Meal '.$i]['fooddesc']);
unset($meals['Meal '.$i]['qty']);
unset($meals['Meal '.$i]['fooddesc']);
}
// End Meal Plan 
```

这给了我：

```
Array
(
    [Meal 1] => Array
        (
            [optdesc] => upon awakening
            [food] => Array
                (
                    [1] => egg
                    [6] => egg whites
                    [1/2 cup] => oatmeal
                    [2 slices] => wheat toast
                    [1 piece] => fruit
                    [1 cup] => berries
                )

        )

    [Meal 2] => Array
        (
            [optdesc] => 3 hours later
            [food] => 
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:29:14.160

```
array_combine(
array_values($meals['Meal 1']['qty']), 
array_values($meals['Meal 1']['fooddesc'])
) 
```

[aray_combine()](http://www.php.net/manual/en/function.array-combine.php)使用第一个参数作为键，第二个参数作为值，这里我们使用第一个数组的值作为组合数组的键。

# php - PHP动态多维数组

> ID：14855716
> 
> 赞同：0
> 
> 时间：2013-02-13T14:24:46.747
> 
> 标签：php

我对动态二维数组的实现有疑问。这就是我这样做的方式：

```
$array_ = array();
$values = array();

foreach ($queryresult as $row){
    array_push($value, $row['id'];
    array_push($value, $row['title'];
    array_push($array_, $value);
}  
var_dump(#array_); 
```

问题是我的查询返回 3 行，但我的结果如下：-

```
Array ([0] => Array ([0] => 44 [1] => Game of Thrones)) 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T14:26:42.893

```
$array_ = Array();

foreach ($queryresult as $row){
    $values = Array();

    array_push($values, $row['id'];
    array_push($values, $row['title'];
    array_push($array_, $values);
}  
var_dump($array_); 
```

甚至更简单

```
$array_ = Array();

foreach ($queryresult as $row){
    array_push($array_, 
        array(
            $row['id'],
            $row['title']
        )
    );
}  
var_dump($array_); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-06T09:40:05.500

干净多了。

```
$array_ = [];

foreach ($queryresult as $row){
   $array_[] = [$row['id'], $row['title']];
}  

var_dump($array_); 
```

# javascript - Array(2) 和 [undefined, undefined] 有什么区别？

> ID：14855717
> 
> 赞同：14
> 
> 时间：2013-02-13T14:24:49.150
> 
> 标签：javascript, arrays

```
[undefined, undefined, undefined].map(function(val, i) { return i }); 
```

返回 [0, 1, 2]，而

```
Array(3).map(function(val, i) { return i }); 
```

返回 [未定义，未定义，未定义]。

为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T14:29:03.487

在第一种情况下，您*定义*并***初始化***了一个包含三个`undefined`值的新数组，而在第二种情况下，您*只* ***定义****了一个可能*长度为 3的数组。

`new Array(3)`和你一样：

```
var arr = [];
arr.length = 3; 
```

结果，`.length`隐式定义了属性，`.map()`方法可以对分配在内存中的数组进行迭代，该数组基本上保存零定义的项目（即纯空）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T14:29:28.833

您正在声明指向未定义对象的指针`undefined`。因此，`[undefined]`创建一个指向未定义的指针数组。 `new Array(3)`创建一个*未定义指针*数组，这些指针不会被数组原型方法（包括`.map`）循环。

[MDN 参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Description)。该变量`undefined`实际上是在分配一个值，即使它指向`undefined`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:32:08.260

`Array(3)`只需要一个空数组并手动为其分配一个长度：

```
> a = []
[]
> a.length = 3
3
> a
[ , ,  ] 
```

这与手动构造包含未定义元素的数组不同：

```
> a = [undefined, undefined, undefined]
[ undefined, undefined, undefined ] 
```

* * *

Array的[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)准确地解释了发生了什么：

> 如果传递给 Array 构造函数的唯一参数是介于 0 和 2 ^(32) -1（含）之间的整数，则会将新的空 JavaScript 数组及其长度设置为该数字。如果参数是任何其他数字，则会引发 RangeError 异常。

所以数组被初始化为一个空数组`[]`。这解释了为什么`map`不处理任何数组元素，因为没有。

* * *

几个例子可能会有所帮助。当使用它初始化数组时，`Array(3)`它是空的，所以`map`没有什么可以迭代：

```
> Array(3)
    .map(function(val, i) { console.log(i); return i; });
[ , ,  ] 
```

将其与以下示例进行比较，您可以看到每个中间数组值都输出到控制台：

```
> [undefined, undefined, undefined]
    .map(function(val, i) { console.log(i); return i; });
0
1
2
[ 0, 1, 2 ] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T15:37:00.177

正如[@VisioN](https://stackoverflow.com/a/14855791/1742381)提到的， Array(3) 已**定义**但未**初始化**。有趣的是，您可以通过 Array.apply 传递未初始化的数组，并对其进行初始化。我用它来填充数组：

```
Array.apply(null, Array(3)).map(function(val,i) { return i; });
// [0, 1, 2] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T14:32:28.043

```
<script type="text/javascript">
 test();
 test2();

function test() {
   [undefined, undefined, undefined].map(function(val, i) { console.log("un: " + val + "/" + i); return i; });
 }

 function test2() {
    Array(3).map(function(val, i) { console.log("no: " + val + "/" + i); return i; });
 }
</script> 
```

**test() 函数返回：**

un: 未定义/0 un: 未定义/1 un: 未定义/2

**test2() 函数不返回值；**

*   test() 你有一个包含 3 个值的对象（未定义）
*   test2() 有一个长度为 3 的空数组

# c# - 在 Windows 8 应用程序中使用 C# 读取 Base64 图像

> ID：14855722
> 
> 赞同：1
> 
> 时间：2013-02-13T14:25:10.267
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我正在尝试在 Windows 8 应用程序上显示图像。图像数据是从 Web 服务收集的，并以 Base64 编码字符串的形式提供。

我在 Stack Overflow 上发现了以下内容：

[如何在 WPF 中读取 base64 图像？](https://stackoverflow.com/questions/593388/how-do-i-read-a-base64-image-in-wpf)

但是，当我开始使用 BitmapImage 类时，我似乎无法访问 System.Windows.Media.Imaging，尽管以下 Microsoft 文档使我们相信它可用于 .NET 4.5 和 Windows 8个应用程序：

[http://msdn.microsoft.com/en-us/library/ms619218.aspx](http://msdn.microsoft.com/en-us/library/ms619218.aspx)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:44:50.783

您想要的类在`Windows.UI.Xaml.Media.Imaging`命名空间中。这是获取 Base64 图像并从中创建图像的示例...

```
var img = @"/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQ ... "; // Full Base64 image as string here
var imgBytes = Convert.FromBase64String(img);
var ms = new InMemoryRandomAccessStream();
var dw = new Windows.Storage.Streams.DataWriter(ms);
dw.WriteBytes(imgBytes);
await dw.StoreAsync();
ms.Seek(0);

var bm = new BitmapImage();
bm.SetSource(ms);

// img1 is an Image Control in XAML
bm.ImageOpened += (s, e) => { this.img1.Source = bm; };
bm.ImageFailed += (s, e) => { Debug.WriteLine(e.ErrorMessage); }; 
```

我无法将完整的 Base64 图像复制到答案中。

# android - 活动之间的幕布过渡

> ID：14855724
> 
> 赞同：1
> 
> 时间：2013-02-13T14:25:13.920
> 
> 标签：android, android-animation

我想要我的启动画面和我的“家庭”活动之间的过渡。

闪屏包含两个图像（具有镜像效果的相同图像）。上图转换为顶部，下图转换为底部。房子出现在后面。它就像一个正在打开的窗帘。

我没有找到让这个动画有两个单独的活动的解决方案。如果我只进行一项活动，问题是“主页”有一个操作栏，而启动画面没有。

你看到解决方案了吗？

# delphi - 如何让我的 delphi 应用程序使用 FTPS 而不是 FTP (indy)

> ID：14855728
> 
> 赞同：4
> 
> 时间：2013-02-13T14:25:29.980
> 
> 标签：delphi, ftp, indy, delphi-xe3, ftps

这是我的程序：

```
Application.FTP.Host:= vHost;
Application.FTP.Port:= vPort;
try
  Application.FTP.AutoLogin := false;
  Application.FTP.Connect;
  Application.FTP.IOHandler.RecvBufferSize := 2048; 
```

我`TIdFTP`在 Delphi XE3 中使用组件。

我想我必须使用这样的东西......

```
 Application.FTP.UseTLS := utUseRequireTLS; 
```

但编译器不喜欢那行

如何让我的 FTP 应用程序使用 FTPS？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:39:04.860

首先，您需要**SFTP**（基于 SSH 的 FTP）还是**FTPS**（基于 SSL 的 FTP）？它们不是同一件事。Indy 目前不支持 SSH。对于 SSL，您可以将 SSL IOHandler（例如 ）附加`TIdSSLIOHandlerSocketOpenSSL`到`TIdFTP.IOHandler`属性，然后将`TIdFTP.UseTLS`属性设置为除属性以外的任何内容`utNoTLSSupport`（是的，`TIdFTP`确实有`UseTLS`属性）。如果您需要加密实际的文件传输连接，而不仅仅是命令连接，则将该`TIdFTP.DataPortProtection`属性设置为`ftpdpsPrivate`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:40:47.207

使用 Indy10，您可以添加 TIdSSLIOHandlerSocketOpenSSL 组件并将 FTP.IOHandler 设置为指向该组件。

然后在 TIdSSLIOHandlerSocketOpenSSL 中设置 SSL 选项。

前任。

```
ftpC.IOHandler:=iohFTPSE; //TIdSSLIOHandlerSocketOpenSSL 
ftpC.UseTLS:=utUseExplicitTLS;
ftpC.DataPortProtection:=ftpdpsPrivate; 
```

# google-chrome - Chrome 无法完美处理通过 video.js 嵌入的视频

> ID：14855731
> 
> 赞同：0
> 
> 时间：2013-02-13T14:25:32.807
> 
> 标签：google-chrome, html5-video

我`videojs`用来在以下网站上嵌入视频：[www.airfixthemovie.com](http://www.airfixthemovie.com)。Html 视频有`preload="none"`这使它更好一点。有关如何使视频在 Google Chrome 中完美运行的任何建议？预告片有时会在 Chrome 中停止，看起来 Chrome 正在加载或缓冲。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:42:06.147

从网络检查员看来，后端服务 mp4 文件有问题。请求被取消，每秒大约有 4 个对 mp4 的请求，并且 Content-Range 标头似乎在那里抛出完全随机的数字。

我知道这并不能真正回答您的问题，但至少调查 mp4 事物服务器端。

# .net - 这个逻辑有意义吗？属性 1 = 属性 1

> ID：14855733
> 
> 赞同：0
> 
> 时间：2013-02-13T14:25:43.047
> 
> 标签：.net, logic

我的 ASP.NET 页面有很多基于条件可见/启用的 HTML 元素，例如：

```
Element1
Element3
Element5 
```

能见度取决于我们说

```
Checkbox1
DateTime.Now 
```

将其封装在一个名为 SectionVisibility 的属性中是否有意义

```
private bool SectionVisibility
{
    get {condition1 && condition2 && etc...}
    set {element1, element2 etc... = value; }
} 
```

并在 Page_Load 调用中`SectionVisibility = SectionVisibility`？

假设我有很多条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:31:18.580

我不会写这样的代码。它违反[了 POLS](http://en.wikipedia.org/wiki/Principle_of_least_surprise)。
`SectionVisibility = SectionVisibility`看起来它什么也没做。它应该表现得那样。

我将创建一个名为`CalculateSectionVisibility`（当前是您的 getter）的方法和一个名为`ApplySectionVisibility`（当前是您的 setter）的方法。

如果它们总是组合使用，您可以将它们组合成一个方法`UpdateSectionVisibility`。

# iphone - 在数组中切割对象

> ID：14855738
> 
> 赞同：-2
> 
> 时间：2013-02-13T14:26:01.347
> 
> 标签：iphone, ios, objective-c

我有一个可以包含一个或多个字符串的数组。这是我的输入：

> 51403423 0001051629 1302130622 TOMTOM101订购51403423-3-179178687：ontvangen
> 51403423 0001051629 1302130644 TOMTOM241订购51403423-3-179178687：gestart
> 51403423 0001051629 1302130645 TOMTOM241订购51403423-3-179178687：geschatte aankomst 7:33，57公里运
> BES 51403423 0001051629 1302130937 TOMTOM241订单51403423-3-179178687：gestart
> 51403423 0001051629 1302130951 TOMTOM249 订单 51403423-3-179178687：voltooid

这些字符串是从一个大文本文件中过滤出来的，如下所示：

```
NSData *tmpData = [NSData dataWithContentsOfURL:[NSURL URLWithString:trackTraceFileUrlName] ];
    NSLog(@"%@",trackTraceFileUrlName);
    //convert data to string
    NSString *tmpString = [[NSString alloc] initWithData:tmpData encoding:NSUTF8StringEncoding];
    NSArray *piecesArray = [tmpString componentsSeparatedByString:@"\n"];
    NSMutableArray *trackTraceContent = [NSMutableArray arrayWithArray:piecesArray];
    NSLog(@"%@",trackTraceContent);
    /*Filtering array for referance*/
    NSPredicate *findStringWithReference = [NSPredicate predicateWithFormat:@"SELF contains[c] %@",cRText.text];
    NSArray *trackTraceContentFiltered = [trackTraceContent filteredArrayUsingPredicate:findStringWithReference];

    /*Filtering array for Collected status*/
    NSPredicate *findStringWithStatusCollected = [NSPredicate predicateWithFormat:@"SELF contains[c] 'TOMTOM229'"];
    NSArray *filteredArrayOnStatusCollected = [trackTraceContentFiltered filteredArrayUsingPredicate:findStringWithStatusCollected]
    ; 
```

过滤文本文件的结果将是一个包含过滤对象的数组。这将如下所示：

> filtersArrayOnStatusCollected：“51403423 0001051629 1302121101 TOMTOM229 订单 51403423-2-477100555：voltooid”

现在我想分离这个对象，这样我就可以把它说 1302121101 的部分放入标签中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:31:18.423

如果对象是一个字符串，并且全部由空格分隔，则可以通过调用获取“令牌”数组

```
NSArray *components = [string componentsSeparatedByString:@" "]; 
```

然后，`1302121101`如果您尝试访问这些组件的静态索引，或者您是否正在专门寻找该文本，则完全取决于您如何获得具体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:49:47.370

```
theLable.text = [[theString componentsSeparatedBySring:@" "] objectAtIndex:2]; 
```

theLable 是 a`UILable*`和 theString 是`NSString*`。

# ruby-on-rails - 在 Rails 3 中存储生成的 HTML 并防止 XSS 攻击

> ID：14855739
> 
> 赞同：1
> 
> 时间：2013-02-13T14:26:01.807
> 
> 标签：ruby-on-rails, xss

我正在编写一个应用程序，其中在浏览器中执行大量繁重的计算以生成和格式化一些内容。生成的内容是我想保存在服务器上的 HTML（结构、链接、计算结果等）。它没有任何 javascript 或 CSS（在样式标签中）。

鉴于内容的简单结构，我可以在模型`before_save`或`after_initialize`方法中使用 Rails 方法或插件从内容中剥离 javascript/css 并将其安全地发送回浏览器（通过 JSON，FYI），同时防止 XSS 攻击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:22:03.063

我个人使用[Sanitize](https://github.com/rgrove/sanitize) gem。使用此 gem，您可以配置您想要允许的 HTML 元素和属性，并且 gem 将删除其他任何内容。

我会说这对您的应用程序来说是一个不错的选择，因为由于您希望允许一些 HTML 但不允许使用 Javascript/CSS，那么考虑到有很多狡猾的方法和将 Javascript/CSS 注入 HTML。

# vb.net - 如何同时运行两个任务？

> ID：14855743
> 
> 赞同：0
> 
> 时间：2013-02-13T14:26:04.983
> 
> 标签：vb.net, multithreading

我有这个 for/next 循环，我在其中下载文件，然后处理并将其 contnets 加载到数据库中：

```
 For Each f As WinSCP.RemoteFileInfo In remotefilesinf
      If DownloadFile(FTPSession, CacheDirPath, "/mnt/usb", f) Then
           LoadDB(System.IO.Path.Combine(CacheDirPath, f.Name))
      Else
           MsgBox("Download failed.")
      End If
Next 
```

为了加快速度，如何在下载下一个文件时加载数据库？在每个文件下载完成之前，我无法执行 DBLoad，并且由于数据库锁定，我一次只能执行一个 DBLoad 任务。

我尝试使用后台工作程序来执行 LoadDB 任务，但是当 UI 线程忙于下载时，RunWorkerCompleted 事件不会触发，所以我不知道何时可以执行下一个 DBload（数据库未锁定）。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T20:39:00.307

这是另一个尝试，因为问题的要求已经改变：

![跑步](../Images/beed79217408971204379e59619dde53.png) ![完成的](../Images/9331464ded4380c06350269c1031c43e.png)

```
Public Class Form1

    Shared rnd As New Random

    Private download_que As New Queue(Of String)
    Private process_que As New Queue(Of String)
    Private download_thread As Thread
    Private process_thread As Thread

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        download_que.Enqueue("File 1.db")
        download_que.Enqueue("File 2.db")
        download_que.Enqueue("File 3.db")
        download_que.Enqueue("File 4.db")
        download_que.Enqueue("File 5.db")
        download_que.Enqueue("File 6.db")

        If download_thread Is Nothing then
            download_thread = New Thread(AddressOf DownloadFiles)
            download_thread.Start()
        End If
    End Sub

    Private AppendTextCaller As New Action(Of TextBox, String)(AddressOf AppendText)

    Public Sub AppendText(ByVal control As TextBox, ByVal text As String)
        control.AppendText(text)            
    End Sub

    Public Sub DownloadFiles()
        Dim file As String
        While download_que.Count > 0
            SyncLock download_que
                file = download_que.Dequeue()
            End SyncLock
            Dim path As String = Download(file)
            SyncLock process_que
                process_que.Enqueue(path)
            End SyncLock

            If process_thread Is Nothing Then
                process_thread = New Thread(AddressOf ProcessFiles)
                process_thread.Start()
            End If
        End While
        download_thread = Nothing
    End Sub

    Public Sub ProcessFiles()
        Dim path As String, ok As Boolean
        ok = True
        While process_que.Count > 0 And ok
            SyncLock process_que
                path = process_que.Dequeue()
            End SyncLock
            ok = LoadDB(path)
        End While
        process_thread = Nothing
    End Sub

    Public Function Download(ByVal filename As String) As String
        Dim sw = Stopwatch.StartNew()        
        Me.Invoke(AppendTextCaller, TextBox1, filename)
        Thread.Sleep(1500 + 500*rnd.Next(15))        
        Dim message As String = String.Format(" ({0:F1} sec)", sw.ElapsedMilliseconds / 1000)
        Me.Invoke(AppendTextCaller, TextBox1, message)
        Me.Invoke(AppendTextCaller, TextBox1, Environment.NewLine)
        Return IO.Path.Combine(IO.Path.GetTempPath(), filename)
    End Function

    Public Function LoadDB(ByVal path As String) As Boolean
        Dim sw = Stopwatch.StartNew()
        Dim filename = IO.Path.GetFileName(path)
        Me.Invoke(AppendTextCaller, TextBox2, filename)
        Thread.Sleep(800 + 500*rnd.Next(6))

        Dim message As String = String.Format(" ({0:F1} sec)", sw.ElapsedMilliseconds / 1000)
        Me.Invoke(AppendTextCaller, TextBox2, message)
        Me.Invoke(AppendTextCaller, TextBox2, Environment.NewLine)
        Return True
    End Function

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:22:15.990

我认为这就是你想要的：

```
Public Function DownLoadFile(ByVal f As String) As String
    Trace.WriteLine("Start Downloading " & f)
    Dim x As Integer = ProgressBar1.Value
    Threading.Thread.Sleep(2000)        
    Me.Invoke(SetProgressCaller, x + 25)
    Trace.WriteLine("Done Downloading " & f)
    Return IO.Path.Combine(IO.Path.GetTempPath(), f)
End Function

Public Sub LoadDB(ByVal f As String)
    Trace.WriteLine("Start Loading " & f)
    Dim x As Integer = ProgressBar1.Value
    Threading.Thread.Sleep(1000)
    Me.Invoke(SetProgressCaller, x + 25)
    Trace.WriteLine("Done Loading " & f)
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    ProgressBar1.Value = 0
    Dim f_path_1 = DownLoadFile("File 1")
    Dim t1 As New Threading.Thread(AddressOf LoadDB)
    t1.Start(f_path_1)
    ProgressBar1.Value = 50
    Dim f_path_2 = DownLoadFile("File 2")
    Dim t2 As New Threading.Thread(AddressOf LoadDB)
    t2.Start(f_path_2)        
End Sub

' Can be called using Form.Invoke() from any thread
Private SetProgressCaller As New Action(Of Integer)(AddressOf SetProgress)

' Set progress bar in main thread
Public Sub SetProgress(ByVal pct As Integer)
    ProgressBar1.Value = pct
End Sub 
```

结果：

```
Start Downloading File 1
Done Downloading File 1
Start Downloading File 2
Start Loading C:\Users\#####\AppData\Local\Temp\File 1
Done Loading C:\Users\#####\AppData\Local\Temp\File 1
Done Downloading File 2
Start Loading C:\Users\#####\AppData\Local\Temp\File 2
Done Loading C:\Users\#####\AppData\Local\Temp\File 2 
```

这转化为

*   下载文件 1（需要 2 秒）
*   将文件 1 加载到数据库中（需要 1 秒）和
*   下载文件 2（需要 2 秒）
*   将文件 2 加载到数据库中（需要 1 秒）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:39:13.600

使用两个后台工作人员怎么样？使用一个下载文件，另一个将它们填充到数据库中。如果下载完成，将文件附加到列表中，每次数据库更新完成时，从 bgw2 中查看该列表...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:52:19.210

您可以`DBLoad`在一个线程上运行并设置 a`ManualResetEvent`以在启动新线程之前停止执行，`DBLoad`直到另一个 ona 完成。

```
Dim locker as New ManualResetEvent(True) 
```

这些`locker`行为就像一个红绿灯，在被标记时停止执行并等待，否则在被标记时通过。

通过以下方式阻止`locker`任何地方：

```
locker.Reset() 
```

通过以下方式解除对`locker`任何地方的封锁：

```
locker.Set() 
```

设置停靠点：

```
locker.WaitOne() 
```

要查看完整功能，请参阅[MSDN](http://msdn.microsoft.com/en-gb/library/system.threading.manualresetevent.aspx)。

# java - 如何获取对此类内的类对象的引用

> ID：14855754
> 
> 赞同：-7
> 
> 时间：2013-02-13T14:27:05.333
> 
> 标签：java, reference

我想知道如何在此类中获取对 Object 的引用。我有带有 getter 和 setter 方法的 PDFBean 类，在这个类里面是一个方法`createPDF(PDFBean pdf)`，我想使用这样的语法`createPDF(this)`有可能吗？

具有标题、文件名、描述字段的类：

```
 public void print() {
        PrintToPDF pdf = new PrintToPDF();
         try {  
                if(order.isEmpty())
                    System.out.println("PDFBean.print() <--\norderisEmpty!");
            pdf.createPdf(this);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (DocumentException e) {
            e.printStackTrace();
        }
    } 
```

我尝试使用此语法，但出现异常 NPE

创建PDF（）：

```
 public int createPdf(PDFBean pdf) throws IOException, DocumentException {

OfferFactory of = new OfferFactory(pdf);

Document doc = new Document(PageSize.A4, 34, 34, 110, 45);
PdfWriter writer = PdfWriter.getInstance(doc, new FileOutputStream(
    RESULT));
HeaderFooter event = new HeaderFooter();

writer.setBoxSize("art", new Rectangle(36, 54, 559, 788));
writer.setPageEvent(event);
doc.open();
doc.add(createTitle(of.getTitle()));
doc.add(createDescription(of.getDescription()));
doc.add(createTable(of.getOrderList()));
doc.add(createSum(of.getSum(), of.getDiscount()));
doc.close();
return 0;
} 
```

报价工厂：

```
private List<OrderLine> orderList;
private String fileName, title, description;
private Double sum, discount;

public OfferFactory(PDFBean pdf) {
if(pdf == null) {
    throw new IllegalStateException("OfferFactory -> pdf is null");
}
orderList.addAll(pdf.getOrder());
fileName = pdf.getFileName();
title = pdf.getTitle();
description = pdf.getOpis();
sum = pdf.getSuma();
discount = pdf.getDiscount();
}
//getters...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:29:10.093

如果`this`引用 a ，则可以使用关键字`PDFBean`调用该`createPDF`函数。`this`

`this`是一个 java 关键字，表示使用被引用对象的当前实例，其中被引用对象是当前类。

# memory-management - memcached 可以处理的最大内存

> ID：14855755
> 
> 赞同：2
> 
> 时间：2013-02-13T14:27:07.090
> 
> 标签：memory-management, configuration, memcached

我一直在寻找 Memcached 可以处理的最大内存，如果有这样的选项，我该如何配置这个属性。到目前为止，我唯一能找到的是 Memcached 可以处理的对象的最大大小，但它与我正在寻找的不同。

所以，为了简单起见，我可以为 Memcached 分配的最大内存是多少？如何分配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:15:59.513

如果有，您可以分配任意数量的内存。使用 -m 参数运行 memcached 以限制内存。请参阅[文档](http://code.google.com/p/memcached/wiki/NewConfiguringServer)

# sql - 从表中的列创建查找表

> ID：14855766
> 
> 赞同：0
> 
> 时间：2013-02-13T14:27:43.380
> 
> 标签：sql, sql-server, tsql, xpath

我在 SQL Server 中有一个表，其中包含一个`ID`和一个列，其中包含多个用逗号分隔的值（如下例所示）

```
ID        Category_number
-------------------------
1           3,5,6,8
2            4,8,23
3           4,7,5,3 
```

我需要把它做成一个查找表，每行有 1 个类别号，如下所示；

```
ID        Category_Number
-------------------------
1               3
1               5
1               6 
```

有人告诉我 XPATH 可能是解决此问题的方法。有没有人有任何示例代码可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:38:54.633

看到这个答案[拆分](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco/314917#314917)

在您的数据库中创建该函数。

然后您可以使用以下方法创建您想要的结果：

```
SELECT
    ID,
    A.S Category_Number
FROM
    MyCsvTable
    CROSS APPLY dbo.Split (',', MyCsvTable.Category_Number) A 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:46:39.427

我知道您刚刚接受了该解决方案，但假设您使用的是 SQL Server，这是一种无需构建函数的替代方法：

```
 SELECT A.[id],  
         Split.a.value('.', 'VARCHAR(100)') AS Cat  
       FROM  
          (SELECT [id],  
             CAST ('<M>' + REPLACE(Cat, ',', '</M><M>') + '</M>' AS XML) AS String  
          FROM  YourTable
      ) AS A 
    CROSS APPLY String.nodes ('/M') AS Split(a) 
```

还有一些小提琴：[http ://sqlfiddle.com/#!3/cf427/3](http://sqlfiddle.com/#!3/cf427/3)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:58:31.017

您可能还想检查 SQL SERVER 中的 HierarchyID。一些教程：[http ://www.codeproject.com/Articles/37171/HierarchyID-Data-Type-in​​-SQL-Server-2008](http://www.codeproject.com/Articles/37171/HierarchyID-Data-Type-in-SQL-Server-2008)

基本上你需要做的就是遍历字符串并找到逗号的位置并将它们替换为 chr(13) 等。在 Oracle 中，它可以在单个查询中轻松完成。我认为从 2008 年甚至更早的版本开始，在 SQL Server 中使用 HierarchyID 也可以做到这一点。

# vb.net - 设置子属性时调用父属性集

> ID：14855767
> 
> 赞同：0
> 
> 时间：2013-02-13T14:27:45.623
> 
> 标签：vb.net

因此，在我的类“myInfo”中，我有一个别名属性“HeaderInfo”，它是作为类的属性，它实际上是更深层次的类的 Header。

```
Private _header As myHeader
Public Property HeaderInfo() AS myHeader
    Get
        Return _header
    End Get
    Set(ByVal value As myHeader)
        _header = value
        Someotherclass.Foo.Bar.AnotherThing.Header = _header
    End Set
End Property 
```

myHeader 是一个类，其属性如“名称”、“ID”等都是字符串。所以当我在 Windows 窗体之类的东西中引用这个属性时，我会

```
Dim info As New myInfo()
info.HeaderInfo.ID = "ID HERE"
info.HeaderInfo.Name = "Name here" 
```

它的工作原理是 info.HeaderInfo 的实例正确设置了它的所有属性，但是

```
Someotherclass.Foo.Bar.AnotherThing.Header = _header 
```

永远不会在 myInfo.HeaderInfo 'Set' 中设置，因为我不是直接设置属性，而是在假设它会传播的情况下设置它的子属性。我不了解自定义类型的属性如何工作吗？有没有办法传播这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:41:46.510

要自动实现这一点，您需要更改 myHeader 类型中的属性的设置器，并且为了使您的类型实例能够工作，您必须了解 myInfo 类型的特定实例。

让我们看看为什么这不能像您希望的那样工作。为此，我将拆分此声明：

```
info.HeaderInfo.ID = "ID HERE" 
```

执行该语句时，首先`info`必须取消引用该变量以获取它所引用的对象实例。¹当我们拥有该对象时，我们必须**获取**（而不是设置）HeaderInfo 属性，以便我们拥有对您的 myHeader 对象实例的引用。一旦我们有了 myHeader 对象，我们就调用 ID 属性的 setter 来完成分配。

希望这能弄清楚为什么它会以这种方式工作。您确实可以访问 HeaderInfo 属性，但您只使用过 getter。

[¹旁注：如果您曾经看到“对象引用未设置为对象的实例”，这就是它所说的：您在表达式中没想到的变量或属性是 Nothing/null。]

# java - 使用 JFrame 或 JPanel

> ID：14855769
> 
> 赞同：9
> 
> 时间：2013-02-13T14:27:55.297
> 
> 标签：java, swing, jframe, jpanel

我即将开始开发一个新的小型应用程序。它将包含大约 10 种不同的 GUI。

使用 Netbeans，我可以创建 JFrame 或 JPanel - 但我应该使用哪一个？

我将有一个菜单 GUI，其中将包含其余 GUI 的按钮。我还必须将一些控制器作为参数传递

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-13T14:42:15.307

我假设您对 JPanel 和 JFrame 之间的区别有点困惑。JPanel 充当容器来保存其他 GUI 组件，例如按钮、文本字段和其他 JPanel。

另一方面，您可以将 JFrame 视为顶级组件（主 JPanel）。

从本[网站](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)和本[网站](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)获取的报价和图片。

### `JFrame`

> Frame 是一个带有标题和边框的顶级窗口。

下面是一个典型的 JFrame 的图像：

![典型的 JFrame](../Images/0ad08961ef1433abaf0403ef05b85a16.png)

### `JPanel`

> 该类`JPanel`为轻量级组件提供通用容器。

以下是 JPanel 的图像。每种颜色代表不同的JPanel

![在此处输入图像描述](../Images/3e25ecd74cbe5af7a21b95295517bce6.png)：

**因此，要回答您的问题，您需要同时使用两者。从一个 JFrame（充当主容器）开始，然后添加 JPanel 来构建您的图形用户界面。**

我建议您阅读这两个链接以获得更好的想法并查看代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:38:33.100

> 10 种不同的图形用户界面

有多种选项可用于显示`JPanel`基于 GUI 的元素。

*   [`CardLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)
*   [`JTabbedPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html)
*   嵌套布局..

请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556)有关组合或显示不同小部件组的许多其他想法。

NB Resist 扩展`JFrame`或者`JPanel`- 而是简单地保留对一个的引用，并根据需要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:30:46.113

JFrame 是一个顶级组件。它是您应用程序的“皮肤”。JPanel 不是顶级容器。它们需要驻留在其他一些顶级容器中。JPanel 可以添加到 JFrame 的内容窗格中。

我将用一些示例代码解决您的问题。

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.Graphics;
import java.awt.Color;
import java.awt.GridLayout;

public class Example extends JFrame implements Runnable
{
    JPanel left; 
    JPanel right;
    public Example()
    {
        super("Two JPanels in here");
        left = new JPanel(){
            public void paintComponent(Graphics g)
            {
                g.setColor(Color.red);
                g.fillRect(0,0,getWidth(), getHeight());
            }
        };
        right = new JPanel(){
            public void paintComponent(Graphics g)
            {
                g.setColor(Color.blue);
                g.fillRect(0,0,getWidth(), getHeight());
            }
        };

    }
    public void run()
    {
        setSize(500,500);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        getContentPane().setLayout(new GridLayout(1,2));
        getContentPane().add(left);
        getContentPane().add(right);
        setVisible(true);
    }
    public static void main(String[] args)
    {
        Example e = new Example();
        javax.swing.SwingUtilities.invokeLater(e);
    } 
```

}

请注意面板在内容窗格中的显示方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:32:11.113

这篇[文章](http://www.differencebetween.net/technology/difference-between-jpanel-and-jframe/)似乎内容丰富：

概括：

1.  JPanel 用作通用容器，而 JFrame 是通常用于独立应用程序的窗口，如警告窗口或通知窗口。

2.  JPanel 表示用于更复杂的操作或应用程序的区域。

3.  在 JPanel 中，一个面板可以容纳许多操作，而在 JFrame 中，它可以具有用于不同目的的内部框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T14:33:17.543

它[读起来好像](http://www.differencebetween.net/technology/difference-between-jpanel-and-jframe/)JFrame 可能比顶层窗口的 JPanel 更灵活。正如@ncmathsadist 所指出的，JPanel 也可以嵌入到 JFrame 中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-13T16:28:58.803

其中一些答案太详细了。

只需使用 JPanel。

您始终可以将面板放入框架中。您不能在面板中放置框架。

# python - 如何使用 migrate appname --fake 运行测试？

> ID：14855777
> 
> 赞同：1
> 
> 时间：2013-02-13T14:28:23.283
> 
> 标签：python, django, django-south

我的测试不起作用。如果我尝试 python manage.py test appname 我有这个错误：

```
! You *might* be able to recover with:   = DROP TABLE "appname_userprofile"; []
   = DROP TABLE "appname_table2"; []
   = DROP TABLE "appname_table3"; []

 ! The South developers regret this has happened, and would
 ! like to gently persuade you to consider a slightly
 ! easier-to-deal-with DBMS (one that supports DDL transactions)
 ! NOTE: The error which caused the migration to fail is further up.
Error in migration: content:0015_initial
django.db.utils.DatabaseError: table "appname_userprofile" already exists 
```

如何运行我`python manage.py test appname`的

```
manage.py migrate appname --fake 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:32:33.310

`--fake`据我所知，您必须编写一个自定义测试运行程序来选择性地添加到单个迁移中。

你可能应该修复你的数据库迁移——看起来你有两个试图创建同一个表的迁移。

South 希望在开始测试之前按顺序运行所有迁移，以建立一个初始数据库，而现在它无法做到这一点。

如果将其放入`settings.py`文件（[参考](http://south.readthedocs.org/en/latest/settings.html#south-tests-migrate)）中，则可以完全禁用 South 进行单元测试：

```
SOUTH_TESTS_MIGRATE = False 
```

如果你这样做了，那么 Django 测试运行器只会根据你当前的模型创建你的测试数据库，而不是运行迁移来构建它。

# ruby-on-rails - 在使用 list.each 时，每第 N 次迭代更改循环函数的优雅“红宝石”方式是什么（如果重要的话，在 rails 内）？

> ID：14855780
> 
> 赞同：0
> 
> 时间：2013-02-13T14:28:41.527
> 
> 标签：ruby-on-rails, ruby, loops

什么是优雅的“红宝石”方式来改变每 N 次迭代循环的功能？我不想使用`(1..50).each do |i|`，因为我想遍历 list 中的每个对象`objects`。

```
 objects.each do |object|
   #Do this with object information
   #Do not do this if this is the third time through the loop
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T14:30:06.877

```
objects.each_with_index do |object, idx|
   if idx == 2 # third time

   # or
   # if idx % 3 == 2 # every third time

     # do special thing
   else
     # do normal thing
   end
end 
```

# r - 更改 r 中的多个数据框列标题

> ID：14855781
> 
> 赞同：1
> 
> 时间：2013-02-13T14:28:42.800
> 
> 标签：r, dataframe, names

我正在运行的程序使用以下代码创建三个数据框：

```
datuniqueNDC <- data.frame(lapply(datlist, function(x) length(unique(x$NDC))))
datuniquePID <- data.frame(lapply(datlist, function(x) length(unique(x$PAYERID)))
datlengthNDC <- data.frame(lapply(datlist, function(x) length(x$NDC))) 
```

他们的输出如下所示：

```
 X182L X178L X76L
1   182   178   76

  X34L X31L X7L
1   34   31   7

  X10674L X10021L X653L
1   10674   10021   653 
```

我想要做的是将这些行组合成一个数据框，期望的结果是：

```
 X      Y    Z
1     182    178   76
2      34     31    7
3   10674  10021  653 
```

但由于所有列的名称不同，rbind 命令不起作用。在创建上面的每个变量之后，我可以通过使用 colnames 命令使其工作，但似乎应该有一种更有效的方法来通过使用其中一个应用命令或类似命令来完成此操作。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:10:25.540

由于您在`lapply`调用中使用的函数是标量，因此如果您使用`sapply`. `sapply`返回你可以的向量`rbind`

```
datuniqueNDC <- sapply(datlist, function(x) length(unique(x$NDC)))
datuniquePID <- sapply(datlist, function(x) length(unique(x$PAYERID))
datlengthNDC <- sapply(datlist, function(x) length(x$NDC))
dat <- as.data.frame(rbind(datuniqueNDC,datuniquePID,datlengthNDC))
names(dat) <- c("x", "y", "z") 
```

另一种解决方案是在一个函数中计算所有三个统计信息：

```
dat <- as.data.frame(sapply(datlist, function(x) {
    c(length(unique(x$NDC)), length(unique(x$PAYERID), length(x$NDC))
}))
names(dat) <- c("x", "y", "z") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:43:27.303

一种方式，*因为 evreything 似乎是一个 numeric*，将是这样的：

```
mylist <- list(dat1,dat2,dat3) 
# assuming your three data.frames are dat1:dat3 respectively

 do.call("rbind",lapply(mylist, as.matrix))
#     X182L X178L X76L
#[1,]   182   178   76
#[2,]    34    31    7
#[3,] 10674 10021  653 
```

基本上这是可行的，因为您的数据是矩阵而不是数据框，那么您只需要在最后更改一次名称。

# php - 在一个页面上提交表单 urlencodes 获取值，不在另一页面上

> ID：14855786
> 
> 赞同：0
> 
> 时间：2013-02-13T14:28:50.867
> 
> 标签：php, url, character-encoding

我正在尝试解决外来字符的问题并将其与数据库值匹配。

我已经设法从数据库查询中获得了我想要的匹配，但现在我遇到了一个不同的问题，根本不知道为什么会发生这种情况。

在整个站点的所有页面上都有一个标题包含，其中包含一个用于搜索站点的输入字段。 `<form action="/search.php" method="get"><input name="q" type="text" />etc...`

我的问题查询字符串是这个**grønhøj**。当我在主页上的输入表单中输入这个字符串时，我会被带到带有如下网址的搜索页面：**search.php?q=gr%F8nh%F8j**目前不起作用。但是，如果我在搜索页面上时将相同的搜索查询重新输入到标题输入中，则页面重新加载，除了 url 现在看起来像这样：**search.php?q=grønhøj**确实有效。

如果生成的 url 始终保持不变，那么我不会有问题，但由于它不一致，我不知道如何为查询字符串的两个可能版本提供解决方案。

所以我想我有2个问题。

1) 为什么在使用完全相同的表单提交字符串时，url 不会保持不变？2) 如何操作 url 的两个版本（或停止导致不同 url 的不同页面），以便无论我得到哪个版本的 url，生成的字符串都是一致的？

**更新：我在**[这里](http://www.php.net/manual/en/function.mb-detect-encoding.php#68607)找到了一个检测 utf8 编码的函数，它允许我根据我得到的 url 版本来切换我处理 url 字符串的方式，所以现在我的主要问题已经解决。

然而，我仍然想了解为什么我从不同的页面获得 2 个不同的 url 变量，即使表单是整个站点的一致包含。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:34:50.547

解决此问题的一种方法是始终使用解码查询字符串`urldecode()`，然后`urlencode()`再次强制使用它。这样，如果初始查询字符串是 url 编码或解码，无论如何都会再次进行解码和编码过程，这将导致相同的最终查询字符串。

手册 - [urlencode](http://php.net/manual/en/function.urlencode.php)

手动 - [urldecode](http://www.php.net/manual/en/function.urldecode.php)

# javascript - 防止用户按住 f5 超过 x 秒？

> ID：14855798
> 
> 赞同：0
> 
> 时间：2013-02-13T14:29:16.360
> 
> 标签：javascript, jquery

有没有办法绑定 jQuery 事件以在访问者按住按钮超过 3 秒后弹出？在这种情况下，我想在用户按住 f5 3 秒后做一些事情。

我找到了一个解决方案，当用户在这里按 f5 时阻止刷新：

[使用 javascript 禁用 F5 和浏览器刷新](https://stackoverflow.com/questions/2482059/disable-f5-and-browser-refresh-using-javascript)

但是，这并不是我想要的，因为我想让我的用户刷新页面，但可以防止他们在 f5 按钮上放置石头（这是一个在线游戏，您可以通过刷新页面）。

我想要做的甚至可能吗？

编辑：我正在寻找一个短期、快速的客户端修复。服务器端的事情将在稍后解决。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T14:31:27.667

这是您真正需要解决服务器端的问题。如果任务可以通过刷新页面来完成，那么它可以通过机器人或一两行禁用检查的脚本来完成。做这个客户端不会真正帮助你。

在这种情况下，您需要做的就是在用户会话中，跟踪上次执行操作 X 的时间，除非超过 Y 秒，否则不要再次执行，并告诉用户不要尝试这样做快速地。

编辑：作为一个快速破解，您可以做的是将您的网络服务器配置为`cache-control`在响应中为受影响的脚本提供一个标头，其值设置为让内容在 Y 秒内过期。这*可能*（强调可能，首先正确测试！）阻止客户端在正常的“F5”上重新请求页面，但是强制刷新（在某些浏览器中为 ctrl+f5）不会受此影响。

虽然如果问题是用户正在利用这个问题，修复它客户端不会工作很长时间，用户会很快发现另一种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:39:09.643

[PhonicUK 的回答](https://stackoverflow.com/a/14855841/157247)（做服务器端）是处理这个问题的唯一正确方法。但是您在对该答案的评论中说：

> 我只是被要求现在应用一个快速的客户端修复。这就是为什么我要问这是否可能。

有可能做一些**会**被绕过的事情，像这样（这里我假设你使用一个 jQuery cookie 插件）：

```
(function($) {

    $(document).on("keydown", function(e) {
        var lastRefresh, now;

        if (e.which == 116) {
            now = new Date().getTime();
            lastRefresh = $.cookie("lastRefresh");
            if (lastRefresh && (now - parseInt(lastRefresh, 10)) < 3000) {
                e.preventDefault();
            }
            $.cookie("lastRefresh", now);
        }
    });

})(jQuery); 
```

但是，用户*将*再次找到解决方法。

确保通过 Closure 编译器或非常好的混淆器运行脚本。:-)

# python - 需要一个 Haar Cascade 作为唇部

> ID：14855812
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:30:01.537
> 
> 标签：python, ios, c#-4.0, opencv, face-detection

我只需要一个 Haar 级联文件来进行唇部检测。我在openCV中搜索过

我已经访问了这个链接[http://alereimondo.no-ip.org/OpenCV/34](http://alereimondo.no-ip.org/OpenCV/34) 但是没有 Haar 级联文件只能检测到嘴唇检测。

任何人都可以向我提供这个文件，或者你能给我任何工具或软件的参考，这些工具或软件会相应地生成 Haar Cascaded xml 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:54:02.870

我认为您应该看看[本教程](http://docs.opencv.org/trunk/doc/user_guide/ug_traincascade.html)，了解如何在 OpenCV 的帮助下生成自己的级联。

# sql - 使用 BCP 命令运行 bat 文件，出现连接错误

> ID：14855813
> 
> 赞同：0
> 
> 时间：2013-02-13T14:30:01.727
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2, bcp

我有一个 bat 文件，它使用`bcp`命令对分隔文件执行存储过程。手动运行 bat 文件时，出现以下错误：

![在此处输入图像描述](../Images/15c4defcdc474b2871ba85b95724fdc0.png)

`-T`当我使用Windows 身份验证登录数据库时，我正在使用该参数。我可能需要更改设置以修复此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:55:50.067

需要将`-S [DATABASE HOST NAME]`参数传递给`bcp`命令。

# android - 如何正确缩放矢量图形？

> ID：14855814
> 
> 赞同：1
> 
> 时间：2013-02-13T14:30:02.623
> 
> 标签：android, drawing, vector-graphics

我正在学习如何使用矢量绘图 API，但我遇到了以下问题。

我在画布上绘制线条和弧线，包含此画布的视图可以被捏缩放。放大时，线条完美缩放，但弧线没有。

公共类 MyView 扩展视图 {

```
public MyView(Context context, AttributeSet attrs)
{
    super(context, attrs);

    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    mGestureDetector = new GestureDetector(context, new GestureListener());
    rects = new RectF[1000];

    paint.setColor(Color.BLACK);
    paint.setAntiAlias(true);
    paint.setStyle(Paint.Style.STROKE);
}

    @Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.save(); 

    canvas.translate(mOffset.x * mScaleFactor + canvas.getWidth() * 0.5f, mOffset.y * mScaleFactor + canvas.getHeight() * 0.5f);
    canvas.scale(mScaleFactor, mScaleFactor);

    canvas.drawLine(-10, -5, 10, 5, paint);
    canvas.drawLine(10, -10, -10, 10, paint);
    paint.setStrokeWidth(1);
    RectF f = new RectF(-50, -50, 50, 50);
    canvas.drawArc(f, 0.f, 360.f, true, paint);
    canvas.restore(); 
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener       
    {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();
        mScaleFactor = Math.max(0.01f, Math.min(mScaleFactor, 100.0f));
        invalidate();
        return true;
    }
} 
```

}

![在此处输入图像描述](../Images/af0a632419d66f0903e93a92f1f9b248.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-11T15:41:27.840

我认为您以正确的方式执行此操作，您在我的设备上编写代码效果很好。[![在此处输入图像描述](../Images/7b6f6f283e221fbe987d68108dc43677.png)](https://i.stack.imgur.com/9e64a.png)

# cygwin - 使用类 Unix 外壳访问驱动器的根目录

> ID：14855821
> 
> 赞同：0
> 
> 时间：2013-02-13T14:30:22.143
> 
> 标签：cygwin, directory-structure

我正在使用 Cygwin 编译一个库。该库未与 Cygwin 存储在同一目录中。我需要导航到此目录才能编译库。Cygwin shell 只允许我使用**cd ..**回到 Cygwin 根目录。

命令**su**返回以下内容：

```
su: user root does not exist 
```

**如果su**命令不起作用，如何使用 Cygwin 导航我的硬盘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:08:44.400

正如 Wooble 所建议的，解决方案是使用 command `/cygdrive/`，后跟驱动器号。因此，要访问 C: 驱动器的根目录，请键入`cd /cygdrive/c`.

# php - 文件扩展名被隐藏但在原始 php 内容中打开页面链接？

> ID：14855822
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:30:22.367
> 
> 标签：php, .htaccess

我正在尝试`.php`从我网站上的文档中删除文件扩展名，因此 URL 会像这样：
[http](http://www.mysite.com/home/)
://www.mysite.com/home/ 而不是这样：
[http ://www.mysite.com/主页.php](http://www.mysite.com/home.php)

我已经尝试了各种 mod_rewrite 代码，除了这个之外，没有一个对我有用：

```
#Enable rewrite engine
RewriteEngine On
# Unless directory, remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ http://www.mysite.com/$1 [R=301,L]

# Redirect external .php requests to extensionless url
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://www.mysite.com/$1 [R=301,L]

# Resolve .php file for extensionless php urls
RewriteRule ^([^/.]+)$ $1.php [L] 
```

我对此一无所知`.htaccess`，而且我是 php 新手，所以我基本上无法弄清楚这一点。目前这是隐藏的，`.php`但它以原始格式/文本喷出页面 php 内容，而不是像这样执行：

```
<?php
    $page_title = "Home";
    include('includes/header.php'); 
    include('includes/mod_home/mod_intro.php');
    include('includes/copyrightbar.php'); 
    include ('includes/mod_login/login_form.php');
    include('includes/mod_home/mod_welcome.php');
    include('includes/mod_home/mod_platinum.php');

?>

<?php include('includes/mod_home/mod_starlight.php'); ?>
<?php include('includes/mod_home/mod_diamond.php'); ?>
<?php include('includes/mod_home/mod_newest.php'); ?>
<?php include('includes/mod_home/mod_featured.php'); ?>
<?php include('includes/mod_home/mod_gold.php'); ?>

<?php include('includes/footer.php'); ?> 
```

为什么会这样？我已经遵循了所有在线教程，其他所有人似乎都没有这样的问题。我的服务器确实支持`.htaccess`并且正在运行 Linux。
例如，我的链接仍然指向`home.php`（我需要更改这些吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:35:03.250

你错过的是`RewriteBase`命令。
这是代码：

```
#Start rewriting after /
RewriteBase /
#ignore real directories
RewriteCond %{REQUEST_FILENAME} !-d
#ignore real files
RewriteCond %{REQUEST_FILENAME} !-f
#Rewrite the match to .php file
RewriteRule ^(.*)$ $1.php [QSA,L] 
```

可能有一些原因 PHP 没有被执行。所以，当然，试试这个：

```
AddType application/x-httpd-php .php 
```

您可以改写为 GET paremater 页面，就像这样：

```
RewriteRule ^(.*)$ index.php?page=$1 [QSA,L] 
```

# php - 将 php assoc 数组（散列图）搜索为 mysql

> ID：14855826
> 
> 赞同：1
> 
> 时间：2013-02-13T14:30:44.793
> 
> 标签：php, mysql, multidimensional-array

例子

```
public $inputs=array(
    array(  'sysname'=>'pt_name','dbname' => 'users.name','label' => 'user (name/ID)','value' => '',
            'type' => 'text','rules' => 'required','attr'=>'class="autocomplete"'),

    array(  'sysname'=>'pt_dob','dbname' => 'users.dob','label' => 'Patient Dob','value' => '',
            'type' => 'text','rules' => 'required','attr'=>'class="dob ac" Disabled'),

    array(  'sysname'=>'pt_gender','dbname' => 'users.gender','label' => 'gender','value' => 'male,female',
            'type' => 'dropdown','rules' => 'required','attr'=>'class="ac" Disabled'),

    array(  'sysname'=>'visit_date','dbname' => 'visits.date','label' => 'Date','value' => '',
            'type' => 'text','rules' => 'required','attr'=>'class="datepicker"'),

    array(  'sysname'=>'visit_time','dbname' => 'visits.time_booked','label' => 'Time','value' => '',
            'type' => 'text','rules' => 'required','attr'=>'class="timepicker"'),

    array(  'sysname'=>'visit_type','dbname' => 'visits.type','label' => 'Visit type','value' => 'visit,schedule',
            'type' => 'dropdown','rules' => 'required','attr'=>'')
    ); 
```

例如，我如何在该数组中搜索仅在其系统名中包含 pt_ 的数组？

这个想法是我在同一个表中有许多类型的行，所以不要运行 mysql 查询来分别获取每种类型的示例：

```
$pt=db->query("select * from table where sysname like 'pt_%'")->result();
$visit=db->query("select * from table where sysname like 'visit_%'")->result(); 
```

我想一次获取所有内容并将它们拆分为 php 以减少数据库负载。

那么我该怎么做呢？是否值得或更好地将我的查询分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:47:48.150

做几个查询很好，您的数据库可以轻松处理。如果您正在对数十种类型（每个只有几行）进行数十次查询，那么将这种逻辑移至 PHP 可能值得调查。

我建议将它放在`systype`一个单独的列中，上面有[一个索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)。这将大大加快您的查询速度并占用您的数据库。更好的是，您可以将该列[设为 ENUM](http://dev.mysql.com/doc/refman/5.0/en/enum.html)。

```
public $inputs=array(
    array(  'systype'=>'pt', 'sysname'=>'pt_name','dbname' => 'users.name','label' => 'user (name/ID)','value' => '',
            'type' => 'text','rules' => 'required','attr'=>'class="autocomplete"'),
    ...

$pt=db->query("select * from table where systype = 'pt'")->result();
$visit=db->query("select * from table where systype = 'visit'")->result(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:52:03.037

[array_filter](http://php.net/array-filter)和 PHP 风格的[闭包](http://php.net/closure)* 将是一个非常简单的解决方案：

```
function buildFilter($key, $needle) {
    return function($array) use($key, $needle) {
        return (strpos($array[$key], $needle) !== FALSE);
    };
}
$matches = array_filter($inputs, buildFilter('sysname', 'pt_'));
var_dump($matches); 
```

*   注意：PHP 所称的“闭包”与大多数其他语言使用的相同术语有很大不同，因此请务必阅读 PHP 文档。

# android - Android 布局 - AVD 和设备

> ID：14855829
> 
> 赞同：0
> 
> 时间：2013-02-13T14:30:54.217
> 
> 标签：android, android-layout, android-widget

我有一个在 AVD 和真实设备上看起来不同的 Android 小部件。
我不知道有什么区别以及如何解决它...

这是它在 AVD 上的样子： ![AVD_layout](../Images/059fda857e4a1b066d24f78f2c1ca6c9.png)

这是它在设备上的样子（摩托罗拉 XT910，Android 版本 2.3.6）： ![设备布局](../Images/5af5a366ec137b58145e71f7c9c7b0dc.png)

这是layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="4dp"
    android:background="@drawable/background"
    android:gravity="bottom|fill_vertical"
    android:orientation="horizontal" >
    <Button
        android:id="@+id/button"
        android:layout_width="50dp"
        android:layout_height="30dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:gravity="right"
        android:text="@string/buttontxt"
        android:textSize="7sp" />

    <TextView
        android:id="@+id/widget1label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/button"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:text="@string/widget1txt"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/btnRefresh"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="50dp"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/widget1label"
        android:text="@string/refreshButtonText"
        android:textSize="7sp" />

    <Button
        android:id="@+id/btnPrev"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/btnRefresh"
        android:layout_below="@+id/btnRefresh"
        android:layout_marginTop="134dp"
        android:text="@string/prev" />

    <Button
        android:id="@+id/btnNext"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/btnPrev"
        android:layout_alignBottom="@+id/btnPrev"
        android:layout_alignParentRight="true"
        android:text="@string/next" />

    <Button
        android:id="@+id/btnSwitch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/btnNext"
        android:layout_alignBottom="@+id/btnNext"
        android:layout_centerHorizontal="true"
        android:text="@string/switch_" />

    <TextView
        android:id="@+id/tv_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView_revenueLabel"
        android:layout_alignBottom="@+id/textView_revenueLabel"
        android:layout_alignRight="@+id/btnPrev"
        android:text="@string/time" />

    <TextView
        android:id="@+id/tv_totalLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tv_time"
        android:layout_below="@+id/tv_time3"
        android:layout_marginTop="14dp"
        android:text="@string/monthly_total"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_rev3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/tv_totalLabel"
        android:layout_alignRight="@+id/textView_revenueLabel"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_time1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/btnRefresh"
        android:layout_below="@+id/tv_time"
        android:layout_toLeftOf="@+id/textView_revenueLabel"
        android:text="@string/default_date"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_time2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/tv_time3"
        android:layout_alignLeft="@+id/tv_time1"
        android:layout_alignRight="@+id/tv_time1"
        android:maxWidth="60dp"
        android:text="@string/default_date"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_rev2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tv_rev1"
        android:layout_below="@+id/tv_rev1"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_time3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tv_time2"
        android:layout_below="@+id/tv_rev2"
        android:layout_toLeftOf="@+id/textView_revenueLabel"
        android:text="@string/default_date"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/textView_impLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView_revenueLabel"
        android:layout_alignBottom="@+id/textView_revenueLabel"
        android:layout_alignRight="@+id/btnSwitch"
        android:text="@string/imps" />

    <TextView
        android:id="@+id/textView_profitLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnRefresh"
        android:layout_marginTop="23dp"
        android:layout_toLeftOf="@+id/button"
        android:text="@string/profit" />

    <TextView
        android:id="@+id/tv_profit1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView_profitLabel"
        android:layout_toLeftOf="@+id/button"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_profit2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tv_profit1"
        android:layout_toLeftOf="@+id/button"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_profit3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tv_profit2"
        android:layout_toLeftOf="@+id/button"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_profitTotal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/tv_totalLabel"
        android:layout_alignBottom="@+id/tv_totalLabel"
        android:layout_alignLeft="@+id/tv_profit3"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_rev1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView_revenueLabel"
        android:layout_toLeftOf="@+id/btnSwitch"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/textView_revenueLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/tv_profit1"
        android:layout_toLeftOf="@+id/btnSwitch"
        android:text="@string/rev" />

    <TextView
        android:id="@+id/tv_imps3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tv_imps2"
        android:layout_below="@+id/tv_rev2"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_imps2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView_impLabel"
        android:layout_below="@+id/tv_rev1"
        android:text="@string/default_value"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/tv_imps1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView_impLabel"
        android:layout_below="@+id/textView_impLabel"
        android:text="@string/default_value"
        android:textSize="8sp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:55:13.383

有一些因素可以考虑 -

1.  实际屏幕尺寸 - 这可以是小、正常、大和 x 大
2.  屏幕 密度 - LDPI , MDPI , HDPI , XDPI
3.  分辨率 - 320 *480 , 480 * 800 等。

小部件在具有不同特征的设备中可能看起来不同。找出您的布局如何在所有设备上显示的最佳方法是通过图片中给出的图形布局

-![在此处输入图像描述](../Images/68011ed10931322fc11e216d7d81ad4d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:12:53.887

发现了问题。我在中定义`minHeight`了`info.xml`：`android:minHeight="250dp"`

# java - Java 默认 ClassPath 环境变量

> ID：14855835
> 
> 赞同：0
> 
> 时间：2013-02-13T14:31:13.067
> 
> 标签：java, classpath, default

我不小心更改了 Windows 系统属性中的 Classpath 环境变量，现在执行时出现一堆错误，默认值是什么？我应该把它指向什么？

提前谢谢了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:35:26.060

环境变量的`CLASSPATH`问题是nothing，即默认情况下该变量不存在。如果你定义了一些东西，你应该知道你定义了什么。如果您不知道，请尝试分析您的堆栈跟踪并了解您的应用程序需要什么才能工作。

如果您有问题，请在此处发送您的堆栈跟踪，我们将尽力为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:53:29.167

仅当`ClassPath`您希望计算机查看`.class`文件的特定位置时才使用环境变量；一般来说，它不存在，除非你让它存在，无论是故意的还是某些安装程序的副作用。

大多数时候，您正在运行的应用程序（主要是 JRE）确切地知道在哪里查找`.class`文件。大多数时候。

但是，如果您指的是`PATH`环境变量，那可能是一个更大的问题。

Oracle 在设置环境变量方面有一个完整的步骤（我可以保证，我`PATH`今天早上只需要重新设置）：[http ://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

但是，这是我记得的步骤：

1.  **开始菜单**，右键**计算机**，选择**属性**
2.  **最左侧的**高级系统**，底部附近有一个**环境变量按钮，单击它****
***   在底部上下文菜单中，找到`PATH`变量并选择编辑*   最后一个后加分号，然后加上“ *C:\Program Files\Java\jre7\lib* ;” 和“ *C:\Program Files\Java\jre7\bin* ;” 或者你的java“lib”和“bin”文件夹在哪里**

 **然后你应该是所有的膨胀和花花公子，没有伤害没有家禽。**

# iphone - iOS 应用程序中的 Tesseract 集成错误

> ID：14855844
> 
> 赞同：3
> 
> 时间：2013-02-13T14:31:34.733
> 
> 标签：iphone, ios, tesseract

在我的 iOS 应用程序中集成 Tesseract SDK 时出现一些错误。我遵循的程序 -

1) 在 xcode 中拖动“libtesseract_full.a” 2) 在 xcode 中拖动“tessdata”文件夹 3) 在 xcode 中拖动“baseapi.h”

现在当我使用 Tesseract -

```
// init the tesseract engine.
tess = new TessBaseAPI();

tess->SimpleInit([dataPath cStringUsingEncoding:NSUTF8StringEncoding],  // Path to tessdata-no ending /.
                 "eng",  // ISO 639-3 string or NULL.
                 false); 
```

我收到以下错误（我认为缺少一些框架或类似的东西，但没有得到缺少的东西，tesseract 演示项目在我的系统上运行良好）

```
clang: warning: argument unused during compilation: '-stdc++'
ld: warning: CPU_SUBTYPE_ARM_ALL subtype is deprecated: /Users/saurabhsharma/Desktop/Tess/SnapXv2/libtesseract_full.a(libtesseract_full.o)
Undefined symbols for architecture armv7:
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<<<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
      SVNetwork::SVNetwork(char const*, int) in libtesseract_full.a(libtesseract_full.o)
  "std::_Rb_tree_decrement(std::_Rb_tree_node_base*)", referenced from:
      std::_Rb_tree_iterator<std::pair<char const* const, int> >::operator--() in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree_iterator<std::pair<int const, VariableContent*> >::operator--() in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree_iterator<std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > >::operator--() in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree_iterator<std::pair<int const, ScrollView*> >::operator--() in libtesseract_full.a(libtesseract_full.o)
  "std::string::operator+=(char const*)", referenced from:
      ScrollView::SendPolygon() in libtesseract_full.a(libtesseract_full.o)
  "std::ios_base::Init::Init()", referenced from:
      __static_initialization_and_destruction_0(int, int) in libtesseract_full.a(libtesseract_full.o)
      __static_initialization_and_destruction_0(int, int) in libtesseract_full.a(libtesseract_full.o)
  "std::string::size() const", referenced from:
      SVNetwork::Flush() in libtesseract_full.a(libtesseract_full.o)
  "std::__throw_length_error(char const*)", referenced from:
      std::vector<int, std::allocator<int> >::_M_insert_aux(__gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, int const&) in libtesseract_full.a(libtesseract_full.o)
  "std::string::erase(unsigned long, unsigned long)", referenced from:
      SVNetwork::Flush() in libtesseract_full.a(libtesseract_full.o)
  "std::_Rb_tree_rebalance_for_erase(std::_Rb_tree_node_base*, std::_Rb_tree_node_base&)", referenced from:
      std::_Rb_tree<int, std::pair<int const, ScrollView*>, std::_Select1st<std::pair<int const, ScrollView*> >, std::less<int>, std::allocator<std::pair<int const, ScrollView*> > >::erase(std::_Rb_tree_iterator<std::pair<int const, ScrollView*> >) in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree<std::pair<ScrollView*, SVEventType>, std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> >, std::_Select1st<std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > >, std::less<std::pair<ScrollView*, SVEventType> >, std::allocator<std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > > >::erase(std::_Rb_tree_iterator<std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > >) in libtesseract_full.a(libtesseract_full.o)
  "std::string::length() const", referenced from:
      SVNetwork::Flush() in libtesseract_full.a(libtesseract_full.o)
  "std::string::operator+=(char)", referenced from:
      ScrollView::SendPolygon() in libtesseract_full.a(libtesseract_full.o)
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()", referenced from:
      ScrollView::SendPolygon() in libtesseract_full.a(libtesseract_full.o)
      SVNetwork::SVNetwork(char const*, int) in libtesseract_full.a(libtesseract_full.o)
  "std::_Rb_tree_increment(std::_Rb_tree_node_base*)", referenced from:
      std::_Rb_tree_iterator<std::pair<int const, VariableContent*> >::operator++() in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree_iterator<std::pair<char const* const, int> >::operator++() in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree_iterator<std::pair<int const, ScrollView*> >::operator++() in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree_iterator<std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > >::operator++() in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree_iterator<std::pair<int const, ScrollView*> >::operator++(int) in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree_iterator<std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > >::operator++(int) in libtesseract_full.a(libtesseract_full.o)
  "std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&)", referenced from:
      std::_Rb_tree<int, std::pair<int const, VariableContent*>, std::_Select1st<std::pair<int const, VariableContent*> >, std::less<int>, std::allocator<std::pair<int const, VariableContent*> > >::_M_insert(std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::pair<int const, VariableContent*> const&) in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree<char const*, std::pair<char const* const, int>, std::_Select1st<std::pair<char const* const, int> >, std::less<char const*>, std::allocator<std::pair<char const* const, int> > >::_M_insert(std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::pair<char const* const, int> const&) in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree<int, std::pair<int const, ScrollView*>, std::_Select1st<std::pair<int const, ScrollView*> >, std::less<int>, std::allocator<std::pair<int const, ScrollView*> > >::_M_insert(std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::pair<int const, ScrollView*> const&) in libtesseract_full.a(libtesseract_full.o)
      std::_Rb_tree<std::pair<ScrollView*, SVEventType>, std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> >, std::_Select1st<std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > >, std::less<std::pair<ScrollView*, SVEventType> >, std::allocator<std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > > >::_M_insert(std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::pair<std::pair<ScrollView*, SVEventType> const, std::pair<SVSemaphore*, SVEvent*> > const&) in libtesseract_full.a(libtesseract_full.o)
  "std::ios_base::Init::~Init()", referenced from:
      ___tcf_0 in libtesseract_full.a(libtesseract_full.o)
      ___tcf_0 in libtesseract_full.a(libtesseract_full.o)
  "std::string::c_str() const", referenced from:
      ScrollView::SendPolygon() in libtesseract_full.a(libtesseract_full.o)
      SVNetwork::Flush() in libtesseract_full.a(libtesseract_full.o)
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string()", referenced from:
      ScrollView::SendPolygon() in libtesseract_full.a(libtesseract_full.o)
      SVNetwork::SVNetwork(char const*, int) in libtesseract_full.a(libtesseract_full.o)
  "std::string::append(char const*)", referenced from:
      SVNetwork::Send(char const*) in libtesseract_full.a(libtesseract_full.o)
  "std::cout", referenced from:
      SVNetwork::SVNetwork(char const*, int) in libtesseract_full.a(libtesseract_full.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-14T05:40:30.943

刚刚将构建设置中的“C++ 标准库”更改为“libstdc++（GNU C++ 标准库）”并且错误消失了……感谢@H2CO3 的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:41:27.447

有几个问题：

首先确保包含代码的文件：

```
tess = new TessBaseAPI();
tess->SimpleInit(...); 
```

具有`.mm`(Objective-C++) 的文件扩展名，因为它同时使用 Objective-C 和 C++。

其次，该库看起来还没有为 编译`armv7`，因此您需要为您想要支持的任何架构重新构建它，这将是一个或多个，和`armv6`（`armv7`对于iPhone 模拟器）。`armv7s``i386`

如果您的目标是 iOS 5.0+，那么除了`armv6`更高版本的 Xcode 不支持之外，这将是上述所有内容。

第三，确保在库和应用程序中使用相同版本的 C++ 和 C++ 库，否则会发生不好的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T13:26:14.720

确保：

C++ 语言方言设置“编译器默认值”而不是“GNU++11[-std=gnu++11]”

C++ 标准库设置“编译器默认值”而不是“libc++（支持 C++11 的 LLVM C++ 标准库）”

还要检查：

C 语言方言集“C00 [-std=c99]”而不是“GNU00 [-std=gnu99]”

并且应该正确引用 tesseract 文件。（拖放文件未正确引用）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T02:40:38.630

```
ld: -weak_library and -bitcode_bundle (Xcode setting ENABLE_BITCODE=YES) cannot be used together
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

1.  将项目 -> 项目 -> 构建设置 -> **“启用位码”更改为否

2.  还删除“链接”->“其他链接器标志”中的所有链接器标志并添加这个

[![链接器标志](../Images/941dce8d1db81f52e5b779219a703369.png)](https://i.stack.imgur.com/GoXQH.png) 3\. 之后通过命令“pod install”安装 pod

它适用于 Swift 2 和 Xcode 7.2（测试版）

# ios5 - UIScrollView 水平滚动不起作用

> ID：14855846
> 
> 赞同：0
> 
> 时间：2013-02-13T14:31:34.750
> 
> 标签：ios5, ios6, uiscrollview, uiscrollviewdelegate, contentsize

我有以下设置：

在`UIViewController`我设置了一个`UIScrollView`大小为 320 x 56 的顶部。在 UIScrollView 内部，我有一个大小为 640 x 56 的 UIView。 UIScrollView 的 autoresize 属性未选中，它只能水平滚动。

所以在`viewDidLoad`方法中我将 contentSize 设置为`UIScrollView`. 我将其设置为 640 x 56。在此方法中还设置了 UIScrollView 的委托。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.scrollView.contentSize = CGSize(640, 56);
} 
```

问题是我无法让控件滚动。此外，当调用方法和时，我 nslog 的边界和框架`UIScrollView`和`UIView`两者都设置为 0,0 。不知道我在这里缺少什么。`viewDidLoad``viewWillAppear`

这个想法是能够让`UIView`滚动到两侧并显示嵌入的控件。

我已经尝试了许多在 diff post 中找到的建议，但无法使其发挥作用。帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:43:23.207

我可以通过取消选中 Autolayout 选项来使其工作。contentSize 也是 viewDidLoad 中设置的 scrollView 的唯一属性。

谢谢

# javascript - 使用 CSS 过渡的滑动 + 淡入淡出效果

> ID：14855847
> 
> 赞同：1
> 
> 时间：2013-02-13T14:31:34.737
> 
> 标签：javascript, css, css-transitions, effects, slidetoggle

我正在尝试使用 CSS 效果或过渡来复制[这种效果。](http://jsfiddle.net/cGbzz/)

[使用动画](http://jsfiddle.net/QEqCX/)，我可以为 设置动画`opacity`，但只能为 fadeIn 设置动画，并且`height`（应该控制幻灯片）似乎根本不起作用 :(

我最接近的是[使用javascript](http://jsfiddle.net/N3G5d/)在我想要动画的元素上设置一个临时类，并在其上应用初始不透明度。但`height`也不起作用。动画开始似乎有一点延迟。

还有其他想法吗？

* * *

因此，我最终使用了 Simon 提到的问题中发布的解决方案：使用 javascript，我将要设置动画的元素包装在我应用动画的“包装器”DIV 中。每次单击标签时，包装器的高度都会从 0 更改为内容 DIV 的高度：

[在这里摆弄](http://jsfiddle.net/C67mv/)

我知道它需要一些 javascript，但想法是用 CSS 制作动画，这就是它的作用。如果 JS 被禁用，切换仍然可以工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:30:58.427

当涉及的高度之一是自动时，您当前无法在高度上设置动画，您必须设置两个明确的高度。发布了一个广泛的解决方法作为对这个[类似问题的回答。](https://stackoverflow.com/questions/3149419/can-you-use-css3-to-transition-from-height0-to-the-variable-height-of-content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:27:46.203

我对您的 JS Fiddle 进行了修改，我相信这就是您想要的；[请在这里查看。](http://jsfiddle.net/jc55L/2/)

您最初需要在 div 上指定一个高度（0）并且不要忘记溢出：隐藏；这样内容就不会从 div 中“溢出”。但是，您仍然需要 jQuery / Javascript 来切换一个类，但这意味着需要更少的 Javascript。（我切换了您将在小提琴上看到的“更改”类）

```
input {
   display:none;
}
label {
    display:inline-block;
}
div {
    white-space: pre;
    background: #eee;
    color: #333;
    overflow:hidden;
    height:0;
    opacity:0;
    -moz-transition:height 1s opacity 1s;
    -webkit-transition:height 1s opacity 1s;
    -o-transition:height 1s opacity 1s;
    -ms-transition:height 1s opacity 1s;
    transition:height 1s, opacity 1s;
}
.changed {
    height:200px;
    opacity: 1;
} 
```

我在过渡 CSS 属性中添加了一些供应商前缀，因为我不确定您将使用哪种浏览器，而且我使用的是 firefox，所以我需要 -moz- 前缀哈哈：）

我能看到的唯一问题是 height:auto 或 height:100% 没有动画，所以你需要指定 ems 或 px ......如果这将是一个问题（比如内容是否会是动态的），我建议使用 jQuery 来制作高度动画。

# django - 将对象添加到类后如何更新 SQLite3 数据库？

> ID：14855850
> 
> 赞同：0
> 
> 时间：2013-02-13T14:31:41.460
> 
> 标签：django

我刚刚添加了该`num`对象，并尝试将其添加到我的管理员中，但出现以下错误：`Exception Value:
no such column: game_riddle.num`

这是课程：

```
class Riddle(models.Model):
"""represents a riddle, comprising a question and hints"""
world = models.ForeignKey(World)
question = models.TextField()
num = models.IntegerField() 
```

我有一个小型数据库，最后一次添加我必须运行的对象：`sqlclear`然后`syncdb`

如何在不清除数据库的情况下修复我的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:38:25.083

1.  阅读本文档：[http ://south.readthedocs.org/en/0.7.6/installation.html](http://south.readthedocs.org/en/0.7.6/installation.html)

2.  easy_install 南

3.  安装后，在设置中的 installed_app 中放入“ **south ”**

4.  不要忘记同步：**python manage.py syncdb**

5.  运行这个命令：**python manage.py schemamigration app_name --auto**

6.  迁移：**python manage.py migrate**

就是这样。接下来，如果您添加新模型或进行更改。只需执行第 5 步和第 6 步，您的模型就会更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:35:51.080

您将需要使用迁移工具，例如[South](http://south.readthedocs.org)：

> South 为 Django 应用程序带来了迁移。它的主要目标是提供一个简单、稳定且独立于数据库的迁移层，以防止随着时间的推移给您的 Django 应用程序带来所有麻烦的模式更改。

# php - 用 cakePHP 实现同样的递归效果

> ID：14855867
> 
> 赞同：0
> 
> 时间：2013-02-13T14:32:34.247
> 
> 标签：php, mysql, cakephp-2.2

**背景**

我正在将所有旧脚本移至 cakePHP 框架。这样做的原因是花费更少的时间来尝试查找和修复错误，并且必须更好的布局和结构。哦，还有速度。但随之而来的是巨大的学习曲线。这是我第一个使用 cakePHP 的应用程序，所以我对框架的功能和能力非常陌生（而且毫无头绪）。

**我的问题**

在一个较旧的脚本中，我递归地遍历字母表以从以该特定字母开头的数据库中检索名称。这些结果根据它们的起始字母进行分类。

为此，我的旧脚本如下所示：

```
$letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
for($l = 0; $l < strlen($letters); $l++) {
    $names = mysql_query("SELECT name,ext,new FROM admin_extensions WHERE office = '" . $_GET['branch'] . "' AND name LIKE '" . $letters[$l] . "%' ORDER BY name ASC")or die(mysql_error());
    // Do something fancy...
} 
```

我不知道如何将其翻译成 cakePHP。该脚本将内容输出到 Excel 工作表。这是 excel 工作表的小视图：

![Excel文件的提取](../Images/bf0a5196d02021c702c996a22a5cce31.png)

**问题**

我的问题很简单：如何用 cakePHP 达到同样的效果？由于这会生成一个 Excel 工作表，因此我需要能够 a) 在视图中执行此操作，或者 b) 将数据传输到视图文件。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:08:16.503

所以在更多的汗水之后，我解决了这个问题。

这就是我的做法。

在我的控制器中：

```
$letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
for($l = 0; $l < strlen($letters); $l++) {
    $adminExtensions[$letters[$l]] = $this->AdminExtension->find('all',
        array(
            'conditions' => array(
                'AND' => array(
                    'AdminExtension.location_id'=>'3',
                    'HrEmployee.name LIKE '=>$letters[$l].'%'
                )
            )
        )
    );
}
$this->set(compact('adminExtensions')); 
```

在我看来，我这样做了：

```
$letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
$k = 1;
for($l = 0; $l < strlen($letters); $l++) {
    $this->PhpExcel->write('B'.($l+$k+1),$letters[$l]);
    foreach ($adminExtensions[$letters[$l]] as $adminExtension) {
        $k++;
        $this->PhpExcel->write('A'.($l+$k+1),$adminExtension['HrEmployee']['name'] . ' ' . $adminExtension['HrEmployee']['surname']);
        $this->PhpExcel->write('B'.($l+$k+1),$adminExtension['AdminExtension']['ext']);
    }
} 
```

它完美地工作！:)

# asp.net - 使用 ClientScriptIncludeRegister 获取隐藏字段值

> ID：14855869
> 
> 赞同：0
> 
> 时间：2013-02-13T14:32:37.637
> 
> 标签：asp.net, vb.net, visual-studio-2010, .net-4.0

我正在使用 ASP.NET/VB 实现一个 Web 应用程序。前端（.aspx）执行一个外部`.js`文件：

`<script type =" text/javascript" src="External.js"></script>`

它包含一些功能。其中一个调用的函数`populateHidden()`用于为`hiddenField`I 在前端 (.aspx) 上定义的值分配一个值，如下所示：

**在 External.js 中**

`document.getElementByID('Hidden2').value = "dsadsadas";`

**在 .aspx 中**

`<input id="Hidden2" type ="hidden" runat="server" />`

我一直在尝试做的是使用以下方法获取分配的值`Hidden2`并将其传递给服务器端（.aspx.vb）：

`Dim str = Hidden2.value`

但是，由于服务器端代码首先执行，`str`因此将是空的，除非 a`postback`以某种方式完成，无论是使用 a`Button`还是 a`Timer`重新加载前端，否则`str`将具有`dsadsadas`. 我不打算重新加载页面或初始化`postback`. 我试过`window.onload = populateHidden()`没有运气。`postbacks or reloads`这种情况让我感到绝望，因为我尝试了很多事情以确保在遇到[ClientScriptManager.RegisterClientScriptInclude Method](http://msdn.microsoft.com/en-us/library/kx145dw2.aspx)之前不使用。我无法解决如何使用这样的示例来解决我的情况。

1.  心中的想法是`External.js`从服务器端调用或执行（因为它首先执行），然后`Hidden2`在前端填充，回到服务器端并检索`Hidden2.value`.

2.  但是前面提到的链接中的示例，服务器端代码是在前端编写的，但我想将它写在服务器端（.aspx.vb）。

3.  我需要`Hidden2.value`在服务器端的原因是将其存储在我的`sql_database`. `Hidden2.value`从前端获得的任何建议、建议或解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:53:27.757

以下解决方案仅使用 ASP.Net Ajax Engine。在 PageLoad 事件中，`populateHidden()`正在注册对函数的调用。在代码隐藏中，`WebMethod`添加了一个用该属性标记的方法，允许它被 Ajax 请求调用（无需回发）。因此，当单击按钮时，将`sendHiddenValueToServer()`调用 javascript 函数，向 Page Method 发出 Ajax 请求，并将隐藏字段值作为参数传递。

首先，您需要一个`ScriptManager`将 EnablePageMethods 属性设置为 true 的声明：

```
 <asp:ScriptManager runat="server" EnablePageMethods="true" /> 
```

我使用以下标记进行了测试：

```
<html>
<head runat="server">
    <title></title>
    <script src="External.js" type="text/javascript"></script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager runat="server" EnablePageMethods="true" />
    <div>
        <asp:HiddenField ID="Hidden2" runat="server" ClientIDMode="Static" />
        <button id="button1" onclick="sendHiddenValueToServer();">
        Send Value to Server</button>
    </div>
    </form>
 </body>
</html> 
```

在 Javascript 文件中：

```
function populateHidden() {
    document.getElementById('Hidden2').value = "dsadsadas";
}

function sendHiddenValueToServer() {
    PageMethods.ReceiveHiddenValue(
            document.getElementById('Hidden2').value,
            function () { alert("success!") },
            function () { alert("error!") });
} 
```

在代码隐藏中：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        ScriptManager.RegisterStartupScript(Me, Me.GetType(), "register", "populateHidden();", True)
    End If
End Sub

<System.Web.Services.WebMethod()>
Public Shared Sub ReceiveHiddenValue(ByVal value As String)        
    Dim str As String = value
    ' Save Value to database
End Sub 
```

# c# - Windows Azure 移动服务查询表

> ID：14855872
> 
> 赞同：0
> 
> 时间：2013-02-13T14:32:52.283
> 
> 标签：c#, .net, xamarin, azure-mobile-services

我使用 Windows Azure 移动服务。我有一张元素表。我想查询云数据库：

*   选择 Id, Name FROM Element ORDER BY creationTime

但我完全不了解 Windows Azure 移动服务的“查询”系统。我有一个 IMobileServiceTable 但不知道该怎么办...

我查看了教程，他们解释了如何使用 Where 子句，而不是选择。而且我只需要选择一些列，因为我的元素有图片，我不想在我的 getAll 方法中下载它......

编辑 ：

我尝试：

```
Task.Factory.StartNew(() =>
{
    var query = table.Select(x =>
                new Element()
                {
                    Id = x.Id,
                    Name = x.Name,
                    Price = x.Price
                });
    var _items = query.ToListAsync().Result;
}).ContinueWith((x) => handleProductsArrived(x.Result)); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:12:04.700

您可以从 Carlos 找到一篇有用的帖子，其中包含相应的 SQL 查询：http: [//blogs.msdn.com/b/carlosfigueira/archive/2012/09/21/playing-with-the-query-object -in-read-operations-on-azure-mobile-services.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/09/21/playing-with-the-query-object-in-read-operations-on-azure-mobile-services.aspx)

例如：

```
function read(query, user, request) {
query.where({ UserId: user.userId })
     .select('id', 'MovieName', 'MovieRating')
     .orderBy('MovieName')
     .take(10);
request.execute();
} 
```

会翻译成

从 MovieRating WHERE Rating > 2 AND UserId = 中选择前 10 个 [id]、[MovieName]、[MovieRating] 按电影名称排序

因此，对于您需要翻译的情况

SELECT Id, Name FROM Element ORDER BY creationTime

您将使用以下内容：

```
function read(query, user, request) {
    query.where({ UserId: user.userId })
        .select('id', 'Name', 'Element')
        .orderBy('creationTime')
    request.execute();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T08:20:18.377

听起来你只是想用一个简单的查询`IMobileServiceTable`

```
SELECT Id, Name FROM Element ORDER BY creationTime 
```

如果您不介意使用`IMobileServiceTable<TodoItem>`，可以尝试：

1）从对象中删除不需要的成员属性

例子：

```
public class TodoItem
{
    public int Id { get; set; }

    // REMOVE WHAT YOU DO NOT WANT
    //[DataMember(Name = "text")]
    //public string Text { get; set; }

    [DataMember(Name = "complete")]
    public bool Complete { get; set; }
} 
```

2）这是读取数据的代码：

```
private void RefreshTodoItems()
{ 
    items = todoTable
            .OrderBy( todoItem => todoItem.Id )
            .Take(10)
            .ToCollectionView();
    ListItems.ItemsSource = items;
} 
```

这基本上是：

```
SELECT TOP 10 Id, Complete FROM TodoTable ORDER BY Id 
```

todoTable 的代码示例位于[http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-wp8/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-wp8/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:22:23.080

如果您使用的是 .net，那么您几乎可以使用 linq。查看示例应用程序 - 它在哪里 -

```
 private void RefreshTodoItems()
    {
        // This code refreshes the entries in the list view be querying the TodoItems table.
        // The query excludes completed TodoItems
        items = todoTable
            .Where(todoItem => todoItem.Complete == false)
            .ToCollectionView();
        ListItems.ItemsSource = items;
    } 
```

例如，如果您不想返回您可以在调用之前添加的 Complete 标志`.ToCollectionView()`

```
.Select(item=>new {item.Id, item.Text}) 
```

这将创建一个具有指定两个成员的匿名类型（可以是具体类型）的新对象的列表。

# ruby-on-rails - 如何从黄瓜步骤访问语言字符串？

> ID：14855875
> 
> 赞同：0
> 
> 时间：2013-02-13T14:33:00.180
> 
> 标签：ruby-on-rails, ruby, internationalization, cucumber

我正在尝试这样做：

```
Then /^I should see a message saying I have no narratives$/ do
  page.should have_content t(:no_narratives_on_recent_activity_page)
end 
```

但 t() 不可用。这个想法是，如果我手动输入预期的文本，然后稍后更改 i18n 字符串，它将破坏这一步，所以我想首先使用 i18n 字符串进行测试。

如何在黄瓜步骤中访问 t() 助手（或等效的东西）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:10:44.687

`I18n`应该加载，所以你可以简单地直接发送方法（而不是使用助手）

```
Then /^I should see a message saying I have no narratives$/ do
  page.should have_content I18n.t(:no_narratives_on_recent_activity_page)
end 
```

# xml - 用 Go 解析 xml，有多个项目

> ID：14855892
> 
> 赞同：3
> 
> 时间：2013-02-13T14:34:06.810
> 
> 标签：xml, go

我就是无法让这个简单的事情发挥作用。我只是想解析一个简单的 RSS XML 并将所有项目放在一个结构数组中。

这是我的代码：

```
package main 

import (
    "fmt"
    "io/ioutil"
    "log"
    "net/http"
    "encoding/xml"
)

type RSS struct {
    XMLName xml.Name `xml:"rss"`
    items Items `xml:"channel"`
}
type Items struct {
    XMLName xml.Name `xml:"channel"`
    ItemList []Item `xml:"item"`
}
type Item struct {
    title string `xml:"title"`
    link string
    description string
}

func main() {
    res, err := http.Get("http://news.google.com/news?hl=en&gl=us&q=samsung&um=1&ie=UTF-8&output=rss")
    if err != nil {
        log.Fatal(err)
    }
    asText, err := ioutil.ReadAll(res.Body)
    if err != nil {
        log.Fatal(err)
    }

    var i RSS
    err = xml.Unmarshal([]byte(asText), &i)
    if err != nil {
        log.Fatal(err)  
    }

//  fmt.Printf("\ttxt2: %s\n", asText)
    fmt.Printf("%#v", i)

    for c, item := range i.items.ItemList {
        fmt.Printf("\t%d: %s\n", c, item.title)
    }

    res.Body.Close()

} 
```

这是倾倒 i 的输出：

```
main.RSS{XMLName:xml.Name{Space:"", Local:"rss"}, items:main.Items{XMLName:xml.Name{Space:"", Local:""}, ItemList:[]main.Item(nil)}} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:57:27.267

来自[Unmarshal](http://golang.org/pkg/encoding/xml/#Unmarshal)的文档：

> 因为 Unmarshal 使用反射包，它只能分配给导出的（大写）字段。Unmarshal 使用区分大小写的比较来将 XML 元素名称与标记值和结构字段名称匹配。

因此，您需要将结构字段名称大写。不幸的是，它们不再匹配 XML 元素名称，因此您必须重复它们的小写版本。

这是 RSS 提要前两项的工作示例：[http ://play.golang.org/p/jIV_DoCEfq](http://play.golang.org/p/jIV_DoCEfq)

# objective-c - 使用 SFAuthorizationPluginView 在 OSX 中自定义身份验证对话框

> ID：14855894
> 
> 赞同：2
> 
> 时间：2013-02-13T14:34:31.083
> 
> 标签：objective-c, c, security, authorization, osx-mountain-lion

我目前正在开发一个自定义对话框，通过授权插件显示，基于“NameAndPassword”的 Apple 示例代码，它是 SFAuthorizationPluginView 的子类（[https://developer.apple.com/library/mac/#samplecode/NameAndPassword /Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/NameAndPassword/Introduction/Intro.html) )

据我了解，这应该允许我提供不同类型的授权/身份验证，例如开发用于身份验证的面部识别。我遇到的问题是，当我的对话框由授权服务启动时，它嵌入在父对话框中，并且自动添加了额外的文本，指出： -

**“在“（null）”组中键入用户的名称和密码以允许此操作”。**

在网上搜索了几个小时后，我发现我可以删除带有“suggested-user”的未记录环境标志的“（null）”组部分（[https://devforums.apple.com/thread/180052?tstart= 0](https://devforums.apple.com/thread/180052?tstart=0) )

...但文本仍然提示输入密码。

在测试中，我可以通过调用 /etc/authorization 中的规则机制来启动其他可用的插件对话框，并且这些对话框似乎没有附加到父对话框。

有谁知道我需要做什么来防止显示默认文本，或者更好的是，如何独立于父对话框启动我的对话框？这甚至可以从 SFAuthorizationPluginView 继承吗？

谢谢。

# java - 处理程序结束后的返回值

> ID：14855898
> 
> 赞同：1
> 
> 时间：2013-02-13T14:35:00.540
> 
> 标签：java, gwt

我的方法的返回值有问题。我创建了一个`Image`，我想缩放它并返回。

```
final Image img = new Image(src);

img.addLoadHandler(new LoadHandler() {

    @Override
    public void onLoad(LoadEvent arg0) {
    resize img...
    }
}

return img; 
```

更改尺寸后如何退货？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:54:09.747

无需返回`image`即可重新调整大小。

`Image`应该添加到第一个。然后 `DOM`您可以对其进行操作。

你可以这样做：

```
Image image = new Image();
        image.addLoadHandler(new LoadHandler() {

            @Override
            public void onLoad(LoadEvent event) {
                // resize image
                image.getElement().getStyle().setVisibility(Style.Visibility.Visible); 
            } 

        });

image.getElement().getStyle().setVisibility(Style.Visibility.HIDDEN); 
RootPanel.get().add(image);
image.setUrl(url); 
```

# c# - C# webservice 和 Android app：如何防止非法访问

> ID：14855902
> 
> 赞同：0
> 
> 时间：2013-02-13T14:35:13.910
> 
> 标签：c#, android, web-services, security, code-access-security

我正在（满意地）使用来自 Android 应用程序的一些 Web 服务。

我使用 https（我购买了 SSL 证书）。

我想防止其他知道我的 Web 服务 url 的人进行不必要的访问。

我使用应用程序必须向 Web 服务方法提供的“密钥”，但它存储在代码内的常量变量中，我知道这不是确保安全性的最佳解决方案。

**Android 网络服务调用（使用 ksoap）：**

```
try {
    SoapObject request = new SoapObject(configuration.getNamespace(), methodName);

    request.addProperty("securityKey", SECURITY_KEY); 
```

**C# 网络服务**

```
[WebMethod]
public string UserRegistraion(string securityKey, string data)
{
    if (securityKey != Environment.SecurityKey)
    {
        return "WRONG_KEY";
    } 
```

实现最终解决方案的最佳方法是什么？

**编辑：**

正如有人建议的那样，我也在**security.stackexchange.com上问了同样的问题**

[https://security.stackexchange.com/questions/30850/web-services-how-prevent-illegal-accesses](https://security.stackexchange.com/questions/30850/web-services-how-prevent-illegal-accesses)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:49:18.670

你根本无法做到这一点。你应该混淆你的代码。这是软件开发人员与破解者之间的老战场

你不能阻止某人使用/分析驻留在客户端的代码，但是你可以让它变得困难，几乎所有人都会放弃这样做，因为利用你的代码太难了。

# android - 等高线图 OpenCV4Android 库

> ID：14855905
> 
> 赞同：2
> 
> 时间：2013-02-13T14:35:20.533
> 
> 标签：android, opencv, image-processing, contour

我正在使用 OpenCv4Android 库，并通过示例程序 color-blob-detection。在此，要绘制轮廓，他们首先使用表达式对其进行过滤：（轮廓面积>0.1*（最大轮廓面积）

```
 if (Imgproc.contourArea(contour) > mMinContourArea*maxArea) {
            Core.multiply(contour, new Scalar(4,4), contour);
            mContours.add(contour); 
```

然后，他们对每个过滤轮廓使用标量乘法。它的目的是什么？是合并几个小轮廓吗？没明白。请指教！！第二件事，为什么他们使用乘法因子 Scalar(4,4)，为什么不使用其他。

代码 ：

```
 Imgproc.pyrDown(rgbaImage, mPyrDownMat);
    Imgproc.pyrDown(mPyrDownMat, mPyrDownMat);

    Imgproc.cvtColor(mPyrDownMat, mHsvMat, Imgproc.COLOR_RGB2HSV_FULL);

    Core.inRange(mHsvMat, mLowerBound, mUpperBound, mMask);
    Imgproc.dilate(mMask, mDilatedMask, new Mat());

    List<MatOfPoint> contours = new ArrayList<MatOfPoint>();

    Imgproc.findContours(mDilatedMask, contours, mHierarchy, Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_SIMPLE);

    // Find max contour area
    double maxArea = 0;
    Iterator<MatOfPoint> each = contours.iterator();
    while (each.hasNext()) {
        MatOfPoint wrapper = each.next();
        double area = Imgproc.contourArea(wrapper);
        if (area > maxArea)
            maxArea = area;
    }

    // Filter contours by area and resize to fit the original image size
    mContours.clear();
    each = contours.iterator();
    while (each.hasNext()) {
        MatOfPoint contour = each.next();
        if (Imgproc.contourArea(contour) > mMinContourArea*maxArea) {
            Core.multiply(contour, new Scalar(4,4), contour);
            mContours.add(contour);

    Imgproc.drawContours(mRgba, mContours, -1, CONTOUR_COLOR); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:00:23.513

如果您查看代码，您会发现他们确实首先使用了这个：

```
Imgproc.pyrDown(rgbaImage, pyrDownMat); //Divide length and height by 2
Imgproc.pyrDown(pyrDownMat, pyrDownMat); //Divide length and height by 2 
```

在这些行中，框架长度和高度除以四，这将减少所需的处理时间。要将轮廓放回原始框架上，他们必须将长度和高度调整 4 倍，这就是使用这条线的原因。

```
new Scalar(4,4) 
```

我希望我说清楚了；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:05:14.450

暂时我不能完全回答这个问题，但这是我得到的。

```
Core.multiply(contour, new Scalar(4,4), contour); 
```

第一个参数是源矩阵，第二个是乘数，第三个是结果矩阵。如果您考虑到这一点，那么该代码会将源轮廓缩放 4 倍。

**为什么是4？**我不知道，但是通过该代码上方的注释- **“调整大小以适应原始图像大小”** -我想这个想法是进行该拟合，但我不知道您如何通过将轮廓乘以 4 来实现这一点。

# jquery - 使用 jsonp jquery 的 Ajax 了解完成失败返回

> ID：14855907
> 
> 赞同：0
> 
> 时间：2013-02-13T14:35:28.363
> 
> 标签：jquery, ajax, jsonp

我不太了解 jquery 对 jsonp 的行为。

此代码提供警报：

```
$.ajax({
    url: "http://myUrl",
    cache:false,
    contentType: "application/json",
    dataType:'jsonp'
    }).fail(function() {
        alert(getData());
    }); 
```

这个没有：

```
$.ajax({
    url: "http://myUrl",
    cache:false,
    contentType: "application/json",
    dataType:'jsonp'
    }).done(function() {
        alert(getData());
    }); 
```

请注意，*失败*是有效的，而*完成*是无效的......

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:56:36.123

我的代码格式不正确。

对于那些与 JSONP 斗争的人来说，这是一个很好的资源；）

[http://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/)

# java - 创建不必要的字符串对象

> ID：14855908
> 
> 赞同：1
> 
> 时间：2013-02-13T14:35:29.053
> 
> 标签：java, string

这是 Java String 101 的一部分。我最近在一些现有代码中遇到了这个问题。我最初的反应是这是多余的

```
car.setDetails(new String(someStringBufferObj.toString)); 
```

在我看来*，即使这也是多余*的......

```
car.setDetails(new String(someOtherStringObj)); 
```

因为 String 是不可变的，所以永远不会有`someOtherStringObj`在后面的代码行中意外（通过更改）更改汽车详细信息的风险

我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:38:59.497

上面的第一个片段看起来没有必要。然而，第二个可能是必要的。考虑以下。

构造函数`String(String)`很有用，因为它将获取原始字符串的底层字符数组的*副本*。

为什么这很有用？您必须了解字符串对象具有其下的字符数组，并且获取`substring()`现有字符串的 a 实际上使用该原始字符数组。这是一种[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)。考虑以下

```
String s = longstring.substring(2,4); 
```

字符串`s`指向底层的字符数组`longstring`（有点不直观）。如果你想装箱`longstring`（使用垃圾收集）底层字符数组*将不会*被装箱，因为`s`它仍然引用它，你最终会为 2 个字符串消耗大量内存。

构造`String(String)`函数通过从用于构造的字符串所引用的字符数组创建一个新的字符数组来解决此问题。当通过垃圾回收删除原始字符串时，其字符数组将不会被`substring()`结果引用，因此也将被删除。

请注意，这种行为最近在 Java（我认为是 7u4 版）中发生了变化，并且字符串不再支持上述操作模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:37:39.763

你说得对，Rob，在这种情况下不需要新建一个字符串。只需调用 someStringBufferObj.toString() 就足够了！

# ruby-on-rails - 如何验证 ERB 或捕获 ERB SyntaxError

> ID：14855910
> 
> 赞同：1
> 
> 时间：2013-02-13T14:35:30.590
> 
> 标签：ruby-on-rails, ruby, error-handling, erb

使用 Rails 3.2.x 和 Ruby 1.9.3

给定格式错误的 erb 模板，我该如何执行以下操作之一：

*   验证模板并在错误时引发错误
*   当我尝试获取错误模板的结果时，捕获 ERB 抛出的 SyntaxError。

我认为这会起作用：

```
template = "Hello <%= @planet name %>"
@planet_name = "Earth"

begin
 ERB.new(template,nil).result(binding)
rescue
 Raise StandardError, "Bad Erb template"
end 
```

但事实并非如此。相反，我从 ERB 得到一个 SyntaxError。

有没有办法捕获/验证这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:46:05.140

专门拯救 SyntaxError 证明可以解决问题。

```
begin
 ERB.new(template,nil).result(binding)
rescue SyntaxError
 raise StandardError, "Bad Erb template"
end 
```

# c++ - 创建全局变量会导致链接器错误

> ID：14855915
> 
> 赞同：6
> 
> 时间：2013-02-13T14:35:48.800
> 
> 标签：c++, mfc, linker, compiler-errors, global-variables

我有一个 MFC 应用程序 AVT_testapp，在头文件 (AVT_testappDlg.h) 中，我试图在所有函数、类等之外创建一个变量，以使其成为全局变量。每当我尝试这样做时（比如我尝试`int x = 7`），我都会收到错误消息：

```
1>AVT_testappDlg.obj : error LNK2005: "int x" (?x@@3HA) already defined in 
    AVT_testapp.obj
1>..\..\bin\x64\Debug\AVT_testapp.exe : fatal error LNK1169: one or more 
    multiply defined symbols found 
```

***我在谷歌上找到的所有内容都说“只需添加标题保护”。*** AVT_testappDlg 有 6 个#include，每个都有标头保护。

创建全局变量时，还有什么可能导致这些错误？

编辑：这是我的头文件的开头，

```
#pragma once

#include "../../src/CoreUtils/nierr.h"
#include "..\..\src\CoreUtils\StringHelpers.h" //includes windows.h
#include "afxwin.h"
#include "afxcmn.h"
#include "IFrameObserver.h"
#include "c:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include\GdiPlusHeaders.h"
//#include <fstream>
//#include <windows.h>

int x = 7;

using namespace AVT::VmbAPI;

//////////////////////////////////////////////////////////////////////////
//////////  MyObserver class   ///////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
class MyObserver : public IFrameObserver
{
private:
    MyObserver( MyObserver& );

    MyObserver& operator=( const MyObserver& );    

public:

    VmbUchar_t* imageData;

            //...
            //...
            //...
            //...

//that's the end of the relevant stuff 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T14:38:33.200

您不能在标题中的命名空间级别*定义*变量。一般来说，最好不要有全局变量，但如果需要，您应该只在标头中提供*声明*，并在单个 .cpp 中提供定义：

```
//header
extern int i;

//cpp
int i; 
```

您的代码问题与标头保护无关。标头保护确保标头在每个翻译单元中仅解析一次。缺少标头保护会导致*编译器*错误，例如编译器会在预处理后看到在同一个翻译单元中多次定义的类，例如一个类。在您的情况下，错误是链接器错误*LNK2005*，这意味着在多个翻译单元中定义了相同的符号（在您的情况下，在每个翻译单元中都包含带有定义的标题）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T14:38:47.030

如果全局变量不是`const`（*），则不能将其放在头文件中，并将其包含在多个翻译单元（即`.cpp`文件）中。否则，您最终将在程序中对同一符号进行多个定义，这违反了**ODR**（**一个定义规则**，请参阅 C++11 标准的第 3.2 段），并且链接器会抱怨这一点。

您应该`extern`在共享标头中使用修饰符来仅提供变量的声明：

```
extern int var; 
```

然后，在**一个** `.cpp`文件中，您可以为其提供定义：

```
int var; 
```

(*)`const`全局变量默认具有内部链接，因此每个翻译单元最终都会拥有它的私有副本，并且不会发生多重定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:07:32.027

如果你坚持要有一个全局变量，至少把它放在一个命名空间中以避免与其他模块发生冲突

```
namespace globals
{
  extern int x;
} 
```

然后在 .cpp 文件中定义它。

```
int globals::x = 0; 
```

它也更清楚地表明它是一个全局变量。

# iphone - 如何从linkedin API获取电子邮件ID？

> ID：14855917
> 
> 赞同：1
> 
> 时间：2013-02-13T14:35:52.660
> 
> 标签：iphone, ios, linkedin

我已经在我的 iPhone 应用程序中集成了 Linkedin 登录。我需要使用linkedin api获取电子邮件ID。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:41:28.790

是的，您需要将`r_emailaddress`范围添加到您的身份验证请求中，如下所示：

`https://api.linkedin.com/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress`

# c# - 当没有主键可用或无法推断时，如何克服实体数据模型中的表/视图排除？

> ID：14855921
> 
> 赞同：0
> 
> 时间：2013-02-13T14:36:12.797
> 
> 标签：c#, .net, database, entity-framework-4

我有一个 EF 数据模型，我从现有数据库的多个视图中更新了该模型。

有一种这样的视图，其中主键不存在，也无法推断出来，随后在尝试更新模型时被排除在外。

不幸的是，我无法更新我正在尝试使用的视图的架构。我只是想知道能够将此实体添加到我的模型中的最佳行动方案是什么。我实际上只需要视图本身的两列。

我也许能够创建一个存储过程来返回一个结果集，但只是想知道在我追求这条途径之前是否还有其他方法。

有什么建议么？

# php - 将文本框的值传输到 php 变量

> ID：14855926
> 
> 赞同：0
> 
> 时间：2013-02-13T14:36:22.970
> 
> 标签：php, mysql, jquery, wordpress, admin

嗨，我正在创建一个 wordpress 插件，我在这里有点堆栈。文本框编号 1 是订单号，编号 2 是订单名称。这就是我要的。如果客户在文本框 1 中输入一个数字，即订单号，则他或她输入的值将进入数据库并获取该订单号对应的订单名称。它是实时的。无需在出现之前提交。每次他们输入内容时，它都会立即检查数据库并将其显示在文本框 2（订单名称）中。我对此进行了研究并尝试在 wordpress 中使用 ajax，但我不知道如何使用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:24:17.647

这里有一些样板代码可以帮助您入门......

```
<script type="text/javascript" charset="utf-8">
    var req;

    function handler_orderNumberField_onchange(fld) {
        var text = fld.value;
        if (text.length == 8) {
            queryForOrderName(text);
        }
    }

    function queryForOrderName(orderNumber) {
        document.getElementById('orderNameField').value = "Please wait..."

        req = new XMLHttpRequest();
        var url = "http://www.mydomain.com/getordername.php?ordernumber=" + orderNumber;

        req.onreadystatechange = function() {
            var field = document.getElementById('orderNameField');
            var rs = this.readyState;
            var status = this.status;
            if (rs == 4 && status == 200) {
                field.value = req.responseText;
            }
        };

        req.ontimeout = function() {
            document.getElementById('orderNameField').value = 'Timeout.';
        }
        req.timeout = 10000;

        req.open("GET", url, true); 
        req.send();
     }

</script>

<p>Order Number: <input type="text" name="orderNumber" value="" id="orderNumberField" onchange="handler_orderNumberField_onchange(this)"></p>
<p>Order Name: <input type="text" name="orderName" value="" id="orderNameField"></p> 
```

注意需要自己实现一个`getordername.php`脚本；例子：

```
<?php
    $ordernr = (int) $_GET["ordernumber"];
    $result = sprintf("Testorder - Order Number %d", $ordernr);
    header("Content-type: text/plain; charset=UTF-8");
    echo $result;
    exit;

?> 
```

# neo4j - 查询时出现 Neo4J OutOfMemory 错误

> ID：14855929
> 
> 赞同：3
> 
> 时间：2013-02-13T14:36:27.540
> 
> 标签：neo4j

我最近开始使用 Neo4J，到目前为止，我还没有找到解决我遇到的问题的答案，尤其是在服务器方面。我正在使用 1.8.1 版本并将服务器作为 Windows 上的服务运行，而不是嵌入式。我的图表有大约 7m 个节点和近 11m 个关系。

通过小查询和多个查询，事情运行良好。然而，当我试图撤回更复杂的查询时，可能有数千行，事情就变糟了。如果我使用控制台，我什么也得不到，然后几分钟或更长时间后出现 undefined 一词（它试图在 Javascript 中做某事，但我不确定是什么）。如果我在 .NET 中使用 Neo4JClient，它会超时（我正在通过 WCF 服务工作）并且我怀疑我的问题出在服务器端。

这是一个示例密码查询，它在控制台中引起了我的问题：

```
start begin = node:idx(ID="1234")
MATCH begin-[r1?:RELATED_TO]-n1-[r2?:RELATED_TO]-n2-[r3?:RELATED_TO]-n3-[r4?:RELATED_TO]-n4
RETURN begin.Title?, r1.RelationType?, n1.Title?, r2.RelationType?, n2.Title?, r3.RelationType?, n3.Title?, r4.RelationType?, n4.Title?; 
```

我查看了日志，收到以下严重错误：

```
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Unknown Source)
    at java.lang.AbstractStringBuilder.expandCapacity(Unknown Source)
    at java.lang.AbstractStringBuilder.ensureCapacityInternal(Unknown Source)
    at java.lang.AbstractStringBuilder.append(Unknown Source)
    at java.lang.StringBuffer.append(Unknown Source)
    at java.io.StringWriter.write(Unknown Source)
    at java.io.PrintWriter.newLine(Unknown Source)
    at java.io.PrintWriter.println(Unknown Source)
    at java.io.PrintWriter.println(Unknown Source)
    at org.neo4j.cypher.PipeExecutionResult$$anonfun$dumpToString$1.apply(PipeExecutionResult.scala:96)
    at org.neo4j.cypher.PipeExecutionResult$$anonfun$dumpToString$1.apply(PipeExecutionResult.scala:96)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    at scala.collection.immutable.List.foreach(List.scala:45)
    at org.neo4j.cypher.PipeExecutionResult.dumpToString(PipeExecutionResult.scala:96)
    at org.neo4j.cypher.PipeExecutionResult.dumpToString(PipeExecutionResult.scala:124)
    at org.neo4j.cypher.javacompat.ExecutionResult.toString(ExecutionResult.java:90)
    at org.neo4j.shell.kernel.apps.Start.exec(Start.java:72)
    at org.neo4j.shell.kernel.apps.ReadOnlyGraphDatabaseApp.execute(ReadOnlyGraphDatabaseApp.java:32)
    at org.neo4j.shell.impl.AbstractAppServer.interpretLine(AbstractAppServer.java:127)
    at org.neo4j.shell.kernel.GraphDatabaseShellServer.interpretLine(GraphDatabaseShellServer.java:92)
    at org.neo4j.shell.impl.AbstractClient.evaluate(AbstractClient.java:130)
    at org.neo4j.shell.impl.AbstractClient.evaluate(AbstractClient.java:114)
    at org.neo4j.server.webadmin.rest.ShellSession.evaluate(ShellSession.java:96)
    at org.neo4j.server.webadmin.rest.ConsoleService.exec(ConsoleService.java:123)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288) 
```

从有根据的猜测角度来看堆栈跟踪，是不是我拉回了太多记录？因为它在扩展 StringBuffer 时内存不足。

我想知道 GC 是否可以发挥作用，所以我掌握了 GCViewer。它似乎不是垃圾收集，如果您认为它有用，我可以添加来自 GCViewer 的屏幕截图。

我已将 JVM 分配在默认值和 8G 内存之间的任何位置。以下是我的配置文件中的一些设置（我将尝试仅包含相关的设置）。如果您需要更多，请告诉我。

Neo4J.properties

```
# Default values for the low-level graph engine
use_memory_mapped_buffers=false

# Keep logical logs, helps debugging but uses more disk space, enabled for legacy reasons
keep_logical_logs=true 
```

Neo4J-server.properties

```
# HTTP logging is disabled. HTTP logging can be enabled by setting this property to 'true'.
org.neo4j.server.http.log.enabled=false 
```

Neo4J-Wrapper.conf（可能不熟练地放在一起）

```
# Uncomment the following line to enable garbage collection logging
wrapper.java.additional.4=-Xloggc:data/log/neo4j-gc.log

# Setting a different Garbage Collector as recommended by Neo4J
wrapper.java.additional.5=-XX:+UseConcMarkSweepGC

# other beneficial settings that should boost performance
wrapper.java.additional.6=-d64
wrapper.java.additional.7=-server
wrapper.java.additional.8=-Xss1024k

# Initial Java Heap Size (in MB)
wrapper.java.initmemory=1024

# Maximum Java Heap Size (in MB)
wrapper.java.maxmemory=8000 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:19:36.537

您的查询太复杂了。当您拥有如此大的图表而不是确保不会达到堆内存限制时，您必须分配适当的内存。您可能想尝试一下这个配置：[io 示例](http://docs.neo4j.org/chunked/milestone/configuration-io-examples.html#configuration-batchinsert)。

但是，您的查询可以简化为：

```
start begin = node:idx(ID="1234")
MATCH p=begin-[r1:RELATED_TO*0..4]-n4
RETURN p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T09:34:52.883

克雷格的问题是您使用的 Neo4j-Shell 只是一个操作工具，只是在发回之前收集内存中的数据，它从来没有打算处理巨大的结果集。

您可能希望在启用流式传输（`X-Stream:true`http-header）的情况下直接针对 http 端点运行查询，那么您就没有问题了。

# asp.net-mvc - 如何使用 mvc 在@html.listbox 中添加数据

> ID：14855931
> 
> 赞同：1
> 
> 时间：2013-02-13T14:36:39.130
> 
> 标签：asp.net-mvc, jquery, razor, listbox

我需要使用 mvc 和 razor 视图在我的列表框中添加值。我的代码如下：

剃刀视图：

```
function buttonchk() {

            $.ajax({

                success: function (data) { // in data i have the value 
                            // here what code i put?
                }
            });
        }

      @Html.ListBox("test", Model.value, new { @class = "test1" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:38:09.283

你可以使用`append`：

```
function buttonchk() {
        $.ajax({
            success: function (data) { // in data i have the value 
                for(var i=0; i<data.length; i++) {
                   $("#test").append("<option value=" + data.value + ">" + data.value + "</option>"
                }

            }
        });
    } 
```

[http://api.jquery.com/append/](http://api.jquery.com/append/)

# asp.net - 如何以编程方式找到调用 Application_End() 的原因？

> ID：14855938
> 
> 赞同：9
> 
> 时间：2013-02-13T14:36:44.947
> 
> 标签：asp.net, .net, iis, application-pool

`Application_End()`当我的应用程序池停止时调用，这可能由于多种原因而发生，包括自动池回收或提供应用程序的文件夹中的更改。

调用堆栈通常如下所示：

```
my Application_End(Object sender, EventArgs e)
at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
at System.Web.HttpApplication.InvokeMethodWithAssert(MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs)
at System.Web.HttpApplication.ProcessSpecialRequest(HttpContext context, MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs, HttpSessionState session)
at System.Web.HttpApplicationFactory.Dispose()
at System.Web.HttpRuntime.Dispose()
at System.Web.HttpRuntime.ReleaseResourcesAndUnloadAppDomain(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
at System.Threading.ThreadPoolWorkQueue.Dispatch()
at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() 
```

这是完全没用的。

我如何以编程方式找到它被调用的原因？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T14:36:44.947

有一个[`System.Web.Hosting.HostingEnvironment.ShutdownReason`](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.shutdownreason%28v=vs.90%29.aspx)属性表明应用程序被终止的原因。可以从内部检索其值`Application_End()`。

# ssl - 如何在 EasyPhp 本地开发人员上安装（或伪造）ssl 以开发安全站点

> ID：14855939
> 
> 赞同：1
> 
> 时间：2013-02-13T14:36:46.723
> 
> 标签：ssl, easyphp

我在本地开发，Win vista，EasyPHP 5.3.9。我有一个网站重定向到 https 的购物车。所以我需要在我的本地版本的站点中安装一个 ssl 证书：thedomain.local。它不必是真实的或任何东西，如果我的浏览器抱怨，我不介意添加例外。我只想让站点像在真实服务器上安装 ssl 一样运行。

# javascript - 如何将使用 d3.js(javascript) 制作的图表嵌入到 sinatra Web 应用程序中？

> ID：14855945
> 
> 赞同：0
> 
> 时间：2013-02-13T14:37:08.890
> 
> 标签：javascript, ruby, sinatra, d3.js

我已经使用 javascript 的 d3.js 文件绘制了一些图表和图形，我想使用 Sinatra 将这些图表嵌入到 Web 应用程序（仪表板）中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:29:40.523

[您可以通过视图](http://www.sinatrarb.com/intro.html#Views%20/%20Templates)中定义的脚本标签链接到 javascript 文件。该文档是一个很好的阅读。

# java - 如何将数据传递给 UI 线程

> ID：14855948
> 
> 赞同：0
> 
> 时间：2013-02-13T14:37:22.907
> 
> 标签：java, android, asynchronous

晚上好。

我有这样的活动。在 handleMessage 中，我可以访问 largeText 字段并且可以更改它，但是我无法使用 stringLinks 字段或其他不是 UI 元素的字段（如 TextView、Button、EditText 等）。如何添加到 stringLinks ？

```
public class AboutUsActivity extends Activity {

Handler h;
TextView largeText;
List<String> stringLinks;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    stringLinks = new ArrayList<String>();  
    largeText = (TextView) findViewById(R.id.textView1);

    h = new Handler() {

        public void handleMessage(android.os.Message msg) {
            HtmlParser parser;
            StringBuilder result = new StringBuilder();
            try {
                parser = new HtmlParser(String.valueOf(msg.getData()));
                List<TagNode> links = parser.getContentByClassName("ab");
                for (Iterator<TagNode> iterator = stringLinks.iterator(); iterator
                        .hasNext();) {

                    TagNode divElement = (TagNode) iterator.next();
                    result.append(divElement.getText().toString());
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

            largeText.setText(newhtml);       //Work
            stringLinks.add(newhtml);               //doesn't work
        }

    };

    MyHttpClientUsage connect = new MyHttpClientUsage(h);
    try {
        connect.getInfoAbout();
    } catch (HttpException e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:47:10.217

我不知道我是否理解正确。

如果我这样做了，您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)类

查看他们的主要方法，在单独的线程中执行某些内容的 doInBackground 和在 UI 线程中运行的 onPostExecute。他们可以相互交流传递对象，您还可以发布任务的进度。

它看起来真的很像 SwingWorker（如果你编写了 Swing 应用程序，也许你会使用它）。

# sql - 从几个位变量中选择最小值和最大值

> ID：14855949
> 
> 赞同：0
> 
> 时间：2013-02-13T14:37:22.960
> 
> 标签：sql, sql-server, sql-server-2008

我有 9 列的教师表

```
TeacherID, TeacherName, Reception, Year1, Year2, Year3, Year4, Year5, ALevel 
```

我需要将最小和最大位值（Reception - Year5）与 1 连接，然后将其显示在 select 语句中，使其输出为（在本例中，勾选第 1、2 和 3 年）：Y1 - Y3。

```
SELECT 
    TeacherID, TeacherName, 
    Reception + Year1 + Year2 + Year3 + Year4 + Year5 + ALevel as 'KeyStage' 
FROM Teachers 
```

关于如何做到这一点的任何想法？

非常感谢，马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:41:55.270

尝试这个; *`First Case`*从`Reception` *for* 开始，从`MinYear`for开始。如果它们都不是 1，还要为每种情况添加以避免出现 null*`Second Case`*`ALevel``MaxYear``else`

```
SELECT TeacherID, TeacherName, Reception,
       Case when Reception = 1 then 'R'
            when Year1 = 1 then 'Y1'
            ...
            when ALevel = 1 then 'AL'
            else ''
       End + ' - '
       Case when ALevel = 1 then 'AL'
            when Year5 = 1 then 'Y5'
            ...
            when Reception= 1 then 'R'
            else '' 
       End As KeyStage  
FROM Teachers 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:44:45.460

```
SELECT 
    TeacherID,
    TeacherName,
    CASE
        WHEN Reception > 0 THEN 'Re'
        WHEN Year1 > 0 THEN 'Y1'
        WHEN Year2 > 0 THEN 'Y2'
        WHEN Year3 > 0 THEN 'Y3'
        WHEN Year4 > 0 THEN 'Y4'
        WHEN Year5 > 0 THEN 'Y5'
        WHEN ALevel > 0 THEN 'AL'
        ELSE '' END 
    + ' - ' +
    CASE
        WHEN ALevel > 0 THEN 'AL'
        WHEN Year5 > 0 THEN 'Y5'
        WHEN Year4 > 0 THEN 'Y4'
        WHEN Year3 > 0 THEN 'Y3'
        WHEN Year2 > 0 THEN 'Y2'
        WHEN Year1 > 0 THEN 'Y1'
        WHEN Reception > 0 THEN 'Re'
        ELSE '' END AS Range
FROM
    Teachers 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:55:10.380

这应该对你有用，我没有测试过，你可能需要做一些改变。请注意，如果没有检查位，那么您将获得一个空值。我会使用 null 因为如果没有检查任何内容，那么您就没有这个奇怪的破折号，您可以使用 isnull 将值更改为您想要的值，而无需选择任何年份。

```
SELECT TeacherID, 
   TeacherName,
   case when Reception = 1 then 'R'
        when Year1 = 1 then 'Y1'
        when Year2 = 1 then 'Y2'
        when Year3 = 1 then 'Y3'
        when Year4 = 1 then 'Y4'
        when Year5 = 1 then 'Y5'
        when ALevel = 1 then 'AL'
        else null end + ' - ' + 
   case when Reception = 1 then 'R'
        when Year1 = 1 then 'Y1'
        when Year2 = 1 then 'Y2'
        when Year3 = 1 then 'Y3'
        when Year4 = 1 then 'Y4'
        when Year5 = 1 then 'Y5'
        when ALevel = 1 then 'AL'
        else null end as 'KeyStage' 
FROM Teachers 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:43:06.637

我不会。在您的客户端代码（php、c# 等）中执行此操作。您的规格也不清楚，如果勾选了第 1、3 和 5 年而没有勾选第 2 和第 4 年怎么办？

# jsf - 如何更改默认 p:dataTable emptyMessage 消息

> ID：14855952
> 
> 赞同：23
> 
> 时间：2013-02-13T14:37:40.950
> 
> 标签：jsf, internationalization, primefaces, datatable, messages

我正在使用 PrimeFaces 的数据表。我收到“未找到记录”。当表没有元素时。我想将此消息更改为“无结果”之类的内容并将此消息设为 i18n 类型。

我不想用

```
<p:dataTable 
    id="idTable" 
    ...
    emptyMessage="#{messages['general.message.EmptyList']}"
> 
```

对于每张桌子。

如何更改 p:dataTable 默认`emptyMessage`消息？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-13T14:50:29.683

来自 PrimeFaces 3.5`DataTable`源代码：

```
210    public java.lang.String getEmptyMessage() {
211        return (java.lang.String) getStateHelper().eval(PropertyKeys.emptyMessage, "No records found.");
212    } 
```

[因此，它是硬编码的，除了破解 PrimeFaces 源或创建一个标签文件（不是复合的！）](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen) 之外，没有办法在一个地方更改它，它用所需的消息集`<my:dataTable>`包装。`<p:dataTable>`

```
<ui:composition ...>
    <p:dataTable id="#{id}" value="#{value}" var="item" 
        emptyMessage="#{messages['general.message.EmptyList']}">
        <ui:insert />
    </p:dataTable>
</ui:composition> 
```

```
<my:dataTable id="foo" value="#{bean.items}">
    <p:column>#{item.foo}</p:column>
    <p:column>#{item.bar}</p:column>
</my:dataTable> 
```

如果您实际上不想**更改**消息，而只想完全**隐藏**它，那么您也可以选择纯 CSS 解决方案：

```
.ui-datatable-empty-message {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T09:23:15.800

在数据表 Ej 中写入 emptyMessage=""：

```
<p:dataTable var="hola"
    value="#{logica.hola}"
    emptyMessage="text you want to appear" >
    </p:dataTable> 
```

# sql - 我们可以为 Oracle 中的两个表空间创建一个数据文件吗？

> ID：14855955
> 
> 赞同：0
> 
> 时间：2013-02-13T14:37:50.380
> 
> 标签：sql, oracle11g

不可能将一个数据文件存储到两个表空间中。但是在 oracle 中创建 IOT 时，我们将溢出属性提供给另一个表空间！通常数据文件包含表，甚至 IOT 看到这个图片点击[这里](http://docs.oracle.com/cd/B19306_01/server.102/b14220/physical.htm)的概念！那么如何指出两个表空间来指向一个表（IOT）。
让我们考虑以下代码：

```
CREATE TABLE admin_docindex(
        token char(20), 
        doc_id NUMBER,
        token_frequency NUMBER,
        token_offsets VARCHAR2(2000),
        CONSTRAINT pk_admin_docindex PRIMARY KEY (token, doc_id))
    ORGANIZATION INDEX 
    TABLESPACE admin_tbs
    PCTTHRESHOLD 20
    OVERFLOW TABLESPACE admin_tbs2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:50:03.803

Oracle 中的一个[段](http://docs.oracle.com/cd/E11882_01/server.112/e25789/glossary.htm#CNCPT2105)将恰好存储在一个表空间中。但是一个对象可能由许多不同的部分组成。例如，如果您有一个分区表，则每个分区都是一个单独的段，每个段可能存储在不同的表空间中。表中的每个`LOB`都是一个单独的段，可以潜在地存储在不同的表空间中。而且，在您的情况下，行溢出区域是与存储主表段的段分开的段。

昨天在 DBA 堆栈上讨论了[表可以包含多个段](https://dba.stackexchange.com/questions/34583/can-a-table-belong-to-multiple-tablespaces/34584#34584)的各种场景。

# javascript - jQuery - Apprise 在 ajax 加载的部门中不起作用

> ID：14855958
> 
> 赞同：1
> 
> 时间：2013-02-13T14:38:00.510
> 
> 标签：javascript, ajax, jquery

我正在尝试在我的网站上使用 apprise[链接。](https://github.com/ThrivingKings/Apprise)我有一个网页，其中包含 apprise javascript 和 css 文件。我还包括我自己的 javascript 文件，其中包含以下函数

```
function cant_find(data)
{
    Apprise('Modal test');
} 
```

我正在利用 jquery`$.load()`将另一个页面加载到页面上的一个分区中。这完美地工作。

在负载的回调中，我调用我的函数

```
$('#div').load(base_url+'link',{},function(data){
    cant_find();
}); 
```

然而，这不起作用并给出错误：

`$Apprise is null`

有人对为什么有任何建议吗？

谢谢

# google-maps-api-3 - 谷歌地图信息窗口关闭

> ID：14855959
> 
> 赞同：0
> 
> 时间：2013-02-13T14:38:03.350
> 
> 标签：google-maps-api-3

我正在通过单击按钮在我的地图上添加一些信息窗口：

```
 $(document).ready(function() {
          $("input:#ekle").click(function(){//balon ekle ve listeye ekle

            infoWindow3 = new google.maps.InfoWindow();
            var en=$("input:#x").val();
            var boy=$("input:#y").val();
            var yazi=$("input:isim2").val();
            var windowLatLng3 = new google.maps.LatLng(en,boy);
            infoWindow3.setOptions({
            content: yazi,
            position: windowLatLng3,
            });

            infoWindow3.open(map);
                ekle(yazi);//adding Infowindow contecnt(value) to listbox
}); 
```

所以我可以创建 InfoWindows。现在我将通过单击另一个按钮来关闭我的 InfoWindow：

```
 function cikar(){//listeden cikarma
                    var cikarilacak=$('#liste option:selected').val();//looking listbox selected item value
                    $("#liste option[value='"+cikarilacak+"']").remove(); 
//at this step I will close my InfoWındow where I selected it's value from listbox          

} 
```

我将关闭我从列表框中选择它的值的 InfoWindow。我能做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:55:10.177

将`infoWindow`-instance 作为参数传递给创建选项的函数。

当您创建选项时，使用选项存储对 infoWindow 的引用（例如，您可以使用`$.data()`）。

然后很容易检索对 infoWindow 的引用`cikar()`并关闭 infoWindow。

# automated-tests - 测试中的不同基线

> ID：14855960
> 
> 赞同：0
> 
> 时间：2013-02-13T14:38:05.237
> 
> 标签：automated-tests, qa

我们有涉及将网页内容与基线进行比较的测试用例。虽然我也有测试用例，根据基线测试脚本中的标准输出。

我有一个偷偷摸摸的怀疑这不是最好的做事方式，原因如下：

1.  创建基线时需要人工干预。当页面更改并且您需要创建新基线时，需要人工检查新基线是否“正确”。
2.  它需要在差异方面进行一些棘手的编码，以及如何报告这些差异。

一般来说，QA 社区针对这些挑战有哪些公认的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:22:15.293

为什么不从基线页面和被测页面中获取页面源并比较任何差异？

# android - Android：无法使用 putExtra 和 getLongExtra 将值从服务传递到活动

> ID：14855968
> 
> 赞同：0
> 
> 时间：2013-02-13T14:38:21.790
> 
> 标签：android, android-activity, parameter-passing, background-service

我正在尝试将服务中的值传递给活动。这是我所做的：

在我的服务中，我有：

```
public class MyService extends Service {
  ...
  private long b;
  public static final String BROADCAST_ACTION = "test";
  private final Handler handler = new Handler();
  Intent intentDisp;
  ...
  @Override
  public void onCreate() {
    ...
    b = 0;
    intentDisp = new Intent(BROADCAST_ACTION);
    ...
  }

  @Override
  public int onStartCommand( Intent intent, int flags, int startId ) {
    handler.removeCallbacks(sendUpdatesToUI);
    handler.postDelayed(sendUpdatesToUI, 1000); // 1 second  
    ...
  }

  private Runnable sendUpdatesToUI = new Runnable() {
  public void run() {
     b = (long) 2.0;
     intentDisp.putExtra("connected", b);
     sendBroadcast(intentDisp);             
     handler.postDelayed(this, 2000); // 5 seconds
  }
}; 
```

在我的主要活动中，我有：

```
public class MainActivity extends Activity implements OnClickListener {
  ...
  private Intent intentDisp1;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    ...
    intentDisp1 = new Intent(this, MyService.class);
  }

  private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        updateUI(intent);       
    }
  };

  @Override
  public void onResume() {
    super.onResume();       
    startService(intentDisp1);
    registerReceiver(broadcastReceiver, new IntentFilter(MyService.BROADCAST_ACTION));
  }

  @Override
  protected void onPause() {
   super.onPause();
   unregisterReceiver(broadcastReceiver);
   stopService(intentDisp1); 
  }

  private void updateUI(Intent intent) {
  long c = intentDisp1.getLongExtra("connected",-1);
      ...
  } 
```

当我调试程序时，我总是得到 -1 的值，`c`而我从`MyServive`. 知道有什么问题吗？

# javascript - Javascript虚拟网页创建

> ID：14855976
> 
> 赞同：1
> 
> 时间：2013-02-13T14:38:47.873
> 
> 标签：javascript, virtual, webpage

在我的 javascript 中，我从 SOAP Web 服务获取 BLOB 和 mimetype 数据。此 BLOB 数据表示特定文件的内容。该文件可以是任何 mime 类型（图像/png、文本/html、文本/纯文本等）

我想使用浏览器的（没有特定的供应商）内置的能力来基于 mimetype 呈现页面。

有没有办法使用 mimetype 信息动态生成链接或打开显示文件内容的窗口？我希望我可以简单地创建一个如下所示的锚标记：

```
<a href=myBlob type=mimetype>open file</a> 
```

或者，类似：

```
myWin = window.open();
myWin.document.write(myBlob); 
```

但我认为这只能用于在 DOM 模型中编写 HTML :(

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:17:11.280

```
window.open("data:"+mimeType+";base64,"+contents); 
```

# java - 在 Java Android 中更改 UI

> ID：14855979
> 
> 赞同：0
> 
> 时间：2013-02-13T14:38:50.117
> 
> 标签：java, android, mobile, tablet

我的 android 平板电脑中有一个应用程序。该应用程序的用户界面非常糟糕。我想制作另一个级别 - 如果这个词是正确的 - 并使用相同的应用程序。我不会添加新的操作、功能。我只是想让按钮、标签和文本看起来更好。

是否可以重新设计 UI，或者在用户和应用程序之间建立一个层？

非常感谢。

**编辑：**不幸的是，我没有源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:18:35.780

在您的 xml 视图中使用**dip**而不是**px**。

为了让它看起来更好设计它为不同的屏幕。为布局制作文件夹，例如

1.layout-small（适用于三星galaxy mini等手机）

2.layout-medium（适用于三星 Galaxy Note 等手机）

3.layout-large(7-10寸平板)

4.layout-xlarge(10+英寸设备)

确保文件名和视图 ID 应该相同，以避免运行时出现空指针异常。只需在 xml 文件中使用视图属性和大小即可。

有关更多详细信息，[请参阅此](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:31:00.510

实际上，在没有源代码的情况下更改 UI 会很困难，因为您不知道这些 UI 控件将如何工作和外观。以简单的方式，您可以根据需要更改活动的方向，例如清单文件中的纵向到横向，添加不同分辨率的图像并调整填充等等。但这不会是一个好的解决方案。

检查此链接，将帮助您[了解适用于平板电脑和手机的 Android 应用程序](https://stackoverflow.com/questions/13956515/android-should-i-split-my-app-into-tablet-and-phone-variants)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:40:27.583

您首先需要检查一下：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

Android 旨在用于多种设备。它允许您为不同尺寸和屏幕分辨率的设备定义不同的布局 (UI)。

[您也可以使用Fragments](http://developer.android.com/guide/components/fragments.html)之类的东西将您的应用程序功能划分为更小的部分，并仅显示适合当前设备的部分。

# c# - 单元测试控制器中抛出的异常

> ID：14855980
> 
> 赞同：3
> 
> 时间：2013-02-13T14:38:51.587
> 
> 标签：c#, unit-testing, exception, asp.net-mvc-4

我目前正在单元测试，当发送无效的表单集合数据时会引发错误。

异常在 HttpPost Index ActionResult 方法中引发，如下所示：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Index(FormCollection formCollection, PaymentType payType, string progCode)
    {
        ActionResult ar = redirectFromButtonData(formCollection, payType, progCode);

        if (ar != null)
        {
            return ar;
        }
        else
        {
            throw new Exception("Cannot redirect to payment form from cohort decision - Type:[" +  payType.ToString()  + "] Prog:[" +  Microsoft.Security.Application.Encoder.HtmlEncode(progCode) + "]");
        }
    } 
```

到目前为止，我已经编写了一个成功命中异常的测试（我已经通过启用代码覆盖来验证这一点，我一直在使用它来查看每个单独的测试正在执行哪些代码）但目前测试失败，因为我还没有定义一种测试异常已被抛出的方法，该测试的代码可以在下面找到：

```
 [TestMethod]
    public void Error_Is_Thrown_If_HVM_FormCollection_Data_Is_Incorrect()
    {
        var formCollection = new FormCollection();
        formCollection.Add("__RequestVerificationToken", "__RequestVerificationToken");
        formCollection.Add("invalid - invalid", "invalid- invalid");

        var payType = new PaymentType();
        payType = PaymentType.deposit;

        var progCode = "hvm";

        var mocks = new MockRepository();

        var httpRequest = mocks.DynamicMock<HttpRequestBase>();
        var httpContext = mocks.DynamicMock<HttpContextBase>();
        controller.ControllerContext = new ControllerContext(httpContext, new RouteData(), controller);
        mocks.ReplayAll();

        httpRequest.Expect(r => r.Url).Return(new Uri("http://localhost:8080/hvm/full/self/")).Repeat.Any();

        httpContext.Expect(c => c.Request).Return(httpRequest).Repeat.Any();

        var result = controller.Index(formCollection, payType, progCode);
    } 
```

我看过使用`[ExpectedException(typeof(Exception)]`注释可以在这种情况下使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:56:54.717

我冒昧地更改了您的测试代码，稍微符合 rhino-mocks 的最新功能。它不再需要创建`MockRepository`，您可以使用静态类`MockRepository`并调用`GenerateMock<>`. 我还将您的 SuT（被测系统）实例移到了您的模拟规范**之下**。

使用 Nunit 的示例（我使用 Nunit 的体验比使用 MSTest 更好。主要是因为 Nunit 发布的频率更高，并且具有更可靠的功能集。同样，不确定它是否适用于 TFS，但这应该不难发现）。

```
[Test] // Nunit
[ExpectedException(typeof(Exception)) // NOTE: it's wise to throw specific 
// exceptions so that you prevent false-positives! (another "exception" 
// might make the test pass while it's a completely different scenario)
public void Error_Is_Thrown_If_HVM_FormCollection_Data_Is_Incorrect()
{
    var formCollection = new FormCollection();
    formCollection.Add("__RequestVerificationToken", "__RequestVerificationToken");
    formCollection.Add("invalid - invalid", "invalid- invalid");

    var payType = new PaymentType();
    payType = PaymentType.deposit;

    var progCode = "hvm";

    var httpRequest = MockRepository.GenerateMock<HttpRequestBase>();
    var httpContext = MockRepository.GenerateMock<HttpContextBase>();

    // define behaviour
    httpRequest.Expect(r => r.Url).Return(new Uri("http://localhost:8080/hvm/full/self/")).Repeat.Any();
    httpContext.Expect(c => c.Request).Return(httpRequest).Repeat.Any();

    // instantiate SuT (system under test)
    controller.ControllerContext = new ControllerContext(httpContext, new RouteData(), controller);

    // Test the stuff, and if nothing is thrown then the test fails
    var result = controller.Index(formCollection, payType, progCode);
} 
```

与 MStest 的处理几乎相同，只是您需要将预期的异常定义得更老一些。

```
[TestMethod] // MStest
public void Error_Is_Thrown_If_HVM_FormCollection_Data_Is_Incorrect()
{
    try
    {
        var formCollection = new FormCollection();
        formCollection.Add("__RequestVerificationToken", "__RequestVerificationToken");
        formCollection.Add("invalid - invalid", "invalid- invalid");

        var payType = new PaymentType();
        payType = PaymentType.deposit;

        var progCode = "hvm";

        var httpRequest = MockRepository.GenerateMock<HttpRequestBase>();
        var httpContext = MockRepository.GenerateMock<HttpContextBase>();

        // define behaviour
        httpRequest.Expect(r => r.Url).Return(new Uri("http://localhost:8080/hvm/full/self/")).Repeat.Any();
        httpContext.Expect(c => c.Request).Return(httpRequest).Repeat.Any();

        // instantiate SuT (system under test)
        controller.ControllerContext = new ControllerContext(httpContext, new RouteData(), controller);

        // Test the stuff, and if nothing is thrown then the test fails
        var result = controller.Index(formCollection, payType, progCode);
    }
    catch (Exception)
    {
        Assert.Pass();
    }
    Assert.Fail("Expected exception Exception, was not thrown");
} 
```

如果您使该部分正常工作，则可以通过提供的链接对其进行重构以获得更好的可重用性：[Assert exception from NUnit to MS TEST](https://stackoverflow.com/questions/8213569/assert-exception-from-nunit-to-ms-test)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:01:33.110

测试这一点的最简单方法是将调用包装在 try-catch 中，并在执行 catch 块时设置一个布尔变量。就像是：

```
var exceptionIsThrown = false;
ActionResult result;
try 
{
    result = controller.Index(formCollection, payType, progCode);
}
catch(Exception)
{
    exceptionIsThrown = true;
} 
```

# php - 针对 JSON Schema 的 JSON 验证

> ID：14855984
> 
> 赞同：3
> 
> 时间：2013-02-13T14:39:00.190
> 
> 标签：php, json, validation, jsonschema

我正在尝试针对我给定的架构验证 JSON 对象。

JSON数据如下：

```
{
"list": {
    "places": [
        {
            "name": "Loopsiloo",
            "foursquareID": "54a6s5D4a6s5d4a6s5D4",
            "lat": 26.6546845354889,
            "lon": -99.6846873700158
        },
        {
            "name": "Loopsiloo",
            "foursquareID": "54a6s5D4a6s5d4a6s5D4",
        }
    ],
    "title": "Foo Bar",
    "dateCreated": "2013-01-29T14: 19: 30Z"
} 
```

JSON Schema 如下：

```
{
"type":"object",
"$schema": "http://json-schema.org/draft-03/schema",
"required":true,
"properties":{
    "list": {
        "type":"object",
        "id": "list",
        "required":true,
        "properties":{
            "dateCreated": {
                "type":"string",
                "id": "dateCreated",
                "required":true
            },
            "places": {
                "type":"array",
                "minitems": "1",
                "id": "places",
                "required":true,
                "items":
                {
                    "type":"object",
                    "required":true,
                    "properties":{
                        "note": {
                            "type":"string",
                            "id": "note",
                            "required":false
                        },
                        "foursquareID": {
                            "type":"string",
                            "id": "foursquareID",
                            "required":true
                        },
                        "lat": {
                            "type":"number",
                            "id": "lat",
                            "required":true
                        },
                        "lon": {
                            "type":"number",
                            "id": "lon",
                            "required":true
                        },
                        "name": {
                            "type":"string",
                            "id": "name",
                            "required":true
                        }
                    }
                }

            },
            "title": {
                "type":"string",
                "id": "title",
                "required":true
            }
        }
    }
} 
```

}

我在 PHP 中使用 JsonSchema\Validator 验证这个 JSON。

```
$validator = new JsonSchema\Validator;
$validator->check($data, file_get_contents(__DIR__ . '/../model/api-schema.json')); 
```

我的问题是验证器每次都验证 JSON 对象是否正确。在顶部的示例中，缺少属性“lat”和“lon”。即使我省略了整个“places”、“title”或“dateCreated”属性，它也被验证为正确。

有什么我想念的吗？我浏览了 JSON 模式的文档，但没有什么可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T07:37:50.663

这对我有用。

```
$validator = new JsonSchema\Validator;
$schema = file_get_contents(__DIR__ . '/../model/api-schema.json');
$validator->check(json_decode($data), json_decode($schema)); 
```

# javascript - 如何使用 += 运算符

> ID：14855991
> 
> 赞同：3
> 
> 时间：2013-02-13T14:39:16.523
> 
> 标签：javascript, jquery, operators

自从我开始使用 JQuery 以来，我一直想知道这个运算符在 JQuery 示例中是如何工作的：

```
for(var i = 0;i<=4;i++)
{
document.getElementById("mydiv").innerText += i;//<- works as expected
}

//results will be 0,1,2,3,4 
```

但如果我改用 JQuery，我不知道该怎么做

```
for(var i = 0;i<=4;i++)
{
$("mydiv").text(+i)//<- NO!
$("mydiv").text+(i)//<- NO!
$("mydiv").+text(i)//<- JAJA COME ON!
$("mydiv").text(i)+//<- I guess that was stupid

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:40:52.847

这是不可能的。与`innerText`,不同`text()`的是方法，而不是属性。

尝试：

```
$("mydiv").text($("mydiv").text() + i); 
```

或者，如果您不想做 2 次引用，`$("mydiv")`您可以这样做：

```
$("mydiv").text(function(i,v){
   return v + i; 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:42:15.163

你只需要在这里使用 jQuery。使用该`text`方法提取值，然后再次调用它来设置新值：

```
for(var i = 0;i<=4;i++)
{
    var mydiv = $("mydiv"),
        t = mydiv.text();
    mydiv.text(t + i);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:49:00.963

您不能对 jQuery 方法使用此类快捷方式，它仅适用于[本机赋值运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)。对于[jQuery`.text()`](http://api.jquery.com/text/#text2)，使用回调：

```
$("#mydiv").text(function(index, oldtext) {
    return oldtext + i;
}); 
```

这个回调函数适用于所有 jQuery 属性“赋值”，无论是`.html`、[`.val`](https://stackoverflow.com/q/10487850/1048572)、`.prop`、`.attr`、`.css`还是`.text`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:53:06.043

jQuery 不是一种编程语言，而是基于 javascript 构建的库，因此，规则与使用 javascript 必须遵循的规则完全相同，并且 javascript 并非旨在理解这些结构。

* * *

## 编辑

当然，我的意思`o.m(+1)`是不会增加`o.p`while`o.p++`并且`o.p+=1`会：

```
var o = {};
o.p = 1;
o.m = function () { return this.p; };
o.m(+1); // o.p equals 1
o.p++;   // o.p equals 2
o.p+=1;  // o.p equals 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T15:18:21.543

就像其他答案指出的那样，jQuery 只是一个框架，并且受制于与任何 JavaScript 代码相同的语法规则。

虽然我看到了传递 a `function`to的优势`.text()`，但我不认为这是解决您的实际问题的通用方法：当您使用函数而不是变量时如何连接文本。

我赞成使用`Array.join()`有效的连接：

```
var textParts = [ $("mydiv").text() ];
for(var i = 0;i<=4;i++)
{
    textParts[textParts.length] = i;
}
$("mydiv").text(textParts.join(',')) // result: '...,1,2,3,4' 
```

如果您更喜欢函数方法而不是循环，您也可以使用`Array.map()`.

AFAIK DOM 函数相当慢，因此先进行连接**然后****设置**节点值`div`会更有效。

# android - ListView 中带有切换按钮的行的自定义视图

> ID：14855992
> 
> 赞同：0
> 
> 时间：2013-02-13T14:39:19.777
> 
> 标签：android

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.list_view_row,R.id.label,objects);

lv.setAdapter(adapter); 
```

`lv`是 a `ListView`，它的适配器为 ListView 的每一行保存一个自定义视图，其中包含一个`TextView`(label) 和一个`ToggleButton`.

[https://www.dropbox.com/s/g3gkjct6rbpcgla/Screenshot_2013-02-13-20-00-47.png?m](https://www.dropbox.com/s/g3gkjct6rbpcgla/Screenshot_2013-02-13-20-00-47.png?m)

如何在 ListView 的每一行中为 ToggleButton 设置监听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:42:07.417

例如，您应该在自定义适配器的 getView() 方法中设置它们

```
@Override
public View getView( int position, View convertView, ViewGroup parent ){

    ReportListItem listItem = getItem( position );
    TextView reportNameTextView;
    CheckBox isCheckedCheckBox;

    if( convertView == null ) {

        //creating convert view
        convertView = layoutInflater.inflate( R.layout.report_list_item_layout, null );

        //initializing views
        reportNameTextView = (TextView) convertView.findViewById( R.id.reportListItem_reportNameTextView );
        isCheckedCheckBox = (CheckBox) convertView.findViewById( R.id.reportListItem_isCheckedCheckBox );

        //setting tag for view
        convertView.setTag( new ReportListViewHolder( reportNameTextView, isCheckedCheckBox ) );

        //setting check box on click listener
        isCheckedCheckBox.setOnClickListener( new OnClickListener() {
            public void onClick(View v) {
                CheckBox cb = (CheckBox) v;
                ReportListItem item = (ReportListItem) cb.getTag();
                item.toggleChecked();
                cb.setChecked( item.isChecked() );
            }               
        });
    } else {
        //getting views from convertViewTag
        ReportListViewHolder viewHolder = (ReportListViewHolder) convertView.getTag();
        reportNameTextView = viewHolder.getReportNameTextView();
        isCheckedCheckBox = viewHolder.getIsCheckedCheckBox();
    }

    //setting tag for check box and use this tag in on click listener
    isCheckedCheckBox.setTag( listItem );

    //initializing row views
    isCheckedCheckBox.setChecked( listItem.isChecked() );
    reportNameTextView.setText( listItem.getReportName() );

    return convertView;
} 
```

# jquery - 如果存在不同的 CSS 属性（颜色），则添加 CSS 属性（顶部）

> ID：14855997
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:39:33.540
> 
> 标签：jquery, css, if-statement

鉴于使用 jQuery 在该 div 中存在不同的 CSS 属性，我正在尝试添加到 div 的 CSS。这是算法：

> 如果`#div1`有属性`color:red`，那么添加`top: -10px;`到`#div1`为好。

这是我尝试过的：

```
if ($('#div1').css('color') === 'red') {
    $("#div1").css("top","-10px");
} 
```

谁能发现我的错误？

`color`注意：虽然添加一个同时处理和的 CSS 类会是更好的选择`top`，但我无法编辑网站的样式表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:43:15.347

发布的代码中没有语法错误，`css`方法返回一个`rgb`值：

```
if ($('#div1').css('color') === 'rgb(255, 0, 0)') { 
```

但是，您可以向元素添加一个类并使用`hasClass`方法，而不是检查颜色：

```
.error {
   color: red;
} 
```

```
if ( $('#div1').hasClass('error') ) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:43:21.903

这是因为颜色可以以多种方式表示，例如。rgb(255,0,0)、“红色”、#f00 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:46:22.277

css 颜色将作为 rgb 值返回。

你可以像[这个小提琴一样](http://jsfiddle.net/dseKY/)

```
if ($('#div1').css('color') == 'rgb(255, 0, 0)') {  
    $("#div1").css("color","blue");
} 
```

请注意，我将输出更改为蓝色以进行明显的更改。

不确定它是否依赖于浏览器，因此我强烈建议您向 div 添加一个类并检查#div1 是否具有该类而不是检查颜色。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-13T14:42:55.977

未经测试，但正确的语法应该有一个冒号和花括号

```
if ($('#div1').css('color') === 'red') {
    $("#div1").css({"top":"-10"});
} 
```

# android - 没有现有内容的 setImageDrawable 无效

> ID：14855998
> 
> 赞同：0
> 
> 时间：2013-02-13T14:39:37.750
> 
> 标签：android, user-interface, android-imageview

我在 XML 中有一个 ImageView 定义，如下所示：

```
 <ImageView
            android:id="@+id/background"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="centerCrop"/> 
```

我正在尝试根据某些用户操作（他们从库中选择图像）在代码中动态设置图像内容。我使用以下代码设置图像：

```
 ImageView bgView = (ImageView)root.findViewById(R.id.background);
    Drawable d = Drawable.createFromPath(wallpaper);
    bgView.setImageDrawable(d); 
```

调用此代码对 ImageView 实例没有立即影响。但是，如果我将某种图像放入 XML 定义中，例如：

```
 <ImageView
            android:id="@+id/background"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="centerCrop"
            android:src="@drawable/test_image"/> 
```

它工作正常。有谁知道问题的原因可能是什么？我已经验证了图像设置代码在 UI 线程上运行，并且创建的 Drawable 是有效的。问题感觉可能与未正确执行布局以反映添加的图像有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:44:49.470

尝试：

```
ImageView bgView = (ImageView)root.findViewById(R.id.background);
Drawable d = Drawable.createFromPath(wallpaper);
// check d != null
d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());
bgView.setImageDrawable(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:36:07.367

因此，经过更多挖掘后，我弄清楚了问题所在。在设置空图像的情况下（即在用户设置中未找到自定义背景时的默认状态），我的代码在加载视图时执行 .setImageDrawable(null) 。删除它似乎可以解决问题。