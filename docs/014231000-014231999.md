# StackOverflow 问答 14231000-14231999

# c - C - 将函数加载到数据库 - 调用堆栈错误/分段错误

> ID：14231004
> 
> 赞同：0
> 
> 时间：2013-01-09T08:26:02.457
> 
> 标签：c

我已经用 C 语言编写数据库有一段时间了，昨天我遇到了一个我无法处理的错误。情况是，当我在编写从.txt 函数加载时，程序从.txt 读取数据后出现了一些错误。（它是“84683-3478-”而不是“1993-5-13”）我试图改变某事然后发生了废话，从那时起我一直收到这样的错误：

“分段错误”-> 在 Linux 上“调用堆栈内存”-> 在 Windows 上

我真的不知道问题出在哪里，因为我没有改变太多（放置文本的方式），但是发生了废话。我正在为您粘贴该功能。你能帮忙吗？

```
void load(struct player *main)
{
    int bad;
    struct player *act, *prev;    // act- actual prev - previous
    FILE *plik;
    char a;
    char text[l];                 // l=15;
    if((plik = fopen("savings.txt", "r")) == NULL)
    {
        printf("No savings\n");
        return;
    }
    if(fgets(text, l, plik) == NULL)
    {
        printf("No saved things\n");
        return;
    }
    printf("These are your savings\n");
    do
    {
        printf("%s", text);
    }while(fgets(text, l, plik) != NULL);
    fclose(plik);
    printf("\nType the name of the file you want to load (with .txt) \n");
    do
    {
        gets(text);         // here program stops, no matter if the name is right or not
        char *text = (char*) malloc(30);
        while (getchar()!='\n')
            continue;
        strcat(text, ".txt");
        printf("%s", *text);
        if((plik = fopen(text, "r")) == NULL)
        {
            printf("There is no such file, type once again \n");
            bad=1;
        }
        else bad=0;
    }while(bad);
    act = main->next;
    while(act != NULL)              //cleaning the actual data base
    {
        prev = act;
        act = act->next;
        free(prev);
    }
    nr_of_players = 0;
    act = main;
    while(fscanf(plik, "%s", act->name)!=0)
    {
        fscanf(plik, "%s", biez->surname);
        fscanf(plik, "%d", &biez->date_y);
        fscanf(plik, "%d", &biez->date_m);
        fscanf(plik, "%d", &biez->date_d);
        fscanf(plik, "%s", biez->position);
        fscanf(plik, "%c", &a);
        fscanf(plik, "%d", &biez->nr_cart);
        fscanf(plik, "%d", &biez->salary);
        fscanf(plik, "%d", &biez->matches);
        act->id = ++nr_of_players;
        act->next = (struct player*) malloc(sizeof(struct player));
        prev = act;
        act = act->next;
    }
    free(act);
    prev->next = NULL;
    fclose(plik);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:07:32.087

## 代码审查

声明变量时初始化**所有变量**

```
void load(struct player *main)
{
    int bad = 0;
    struct player *act = NULL, *prev =  NULL;    
    FILE *plik = NULL;
    char a = '\0'; 
```

不要使用“l”作为常数，根据使用的字体很难区分 l 和 1。

```
 char text[l] = {0};                 // l=15;

    if((plik = fopen("savings.txt", "r")) == NULL)
    {
        printf("No savings\n");
        return;
    } 
```

更喜欢在这里使用 sizeof(text) 而不是使用“l”

```
 if(fgets(text, sizeof(text), plik) == NULL)

    printf("\nType the name of the file you want to load (with .txt) \n");
    do
    {
        // here if user puts his elbow on the keyb it crashes the 
        // program use fgets(buffer,sizeof(buffer),stdin) instead.
        gets(text); 
```

永远不要在另一个范围内隐藏变量名，使用新的变量名

```
 char *mytext = malloc(30); // in C don´t cast malloc 
```

下面你在“文本”上执行 strcat 但是你只是 malloc:ed 它所以缓冲区中可能有任何东西，你应该在执行 strcat() 或使用 strcpy(_s) 之前清除缓冲区/或者它可能只是一个错字？

```
 strcat(text, ".txt"); 
```

C 中的字符串是一个字符序列，%s 告诉 printf 期望以 \0 结尾的字符串的地址，但是`*text`如果你给它一个字符值，那将不会很好地结束。

```
 printf("%s", *text); 
```

尽可能使用 {} 是件好事，而不仅仅是有时

```
 if((plik = fopen(text, "r")) == NULL)
        {
            printf("There is no such file, type once again \n");
            bad=1;
        }
        else bad=0;  
    }while(bad); 
```

在使用它之前检查“main”是否指向正确的东西。

```
 if ( main != NULL )
    {
      act = main->next;
      while(act != NULL)
      {
        prev = act;
        act = act->next;
        free(prev);
      }
    ... 
```

在这里，我建议您改为使用 fgets() 读取数据，并使用 sscanf() 解析数据，因为这样做很脆弱。

```
 nr_of_players = 0;
    act = main;
    while(fscanf(plik, "%s", act->name)!=0)
    {
        fscanf(plik, "%s", biez->surname);
        fscanf(plik, "%d", &biez->date_y);
        fscanf(plik, "%d", &biez->date_m);
        fscanf(plik, "%d", &biez->date_d);
        fscanf(plik, "%s", biez->position);
        fscanf(plik, "%c", &a);
        fscanf(plik, "%d", &biez->nr_cart);
        fscanf(plik, "%d", &biez->salary);
        fscanf(plik, "%d", &biez->matches);
        act->id = ++nr_of_players; 
```

这是不寻常的，通常当您找到要放入的东西时分配，而不是为可能有更多要放入的情况分配。

```
 act->next = malloc(sizeof(struct player));
        prev = act;
        act = act->next;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:30:46.803

你正在做：

```
char *text = (char*) malloc(30);
while (getchar()!='\n')
  continue;
strcat(text, ".txt");
printf("%s", *text); 
```

最后一个 printf 应该是：

```
printf("%s", text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:40:40.717

```
char text[l];                 // l=15;
 .... deleted a bunch of lines ....
do
{
gets(text);         // here program stops, no matter if the name is right or not
char *text = (char*) malloc(30);
while (getchar()!='\n')
  continue;
strcat(text, ".txt"); 
```

请注意，`text[l]`用于`gets()`- 和 gets 是一个不好的函数，因为它不会阻止完全覆盖输入缓冲区的末尾。它只会崩溃（或做其他意想不到的事情）。

而不是`gets()`，使用`fgets(stdin, ...)`.

代码也没有意义。

你为什么要分配一个新变量`text`，它会影响`text`你刚刚读到的东西

如果你想要一个 30 字节的字符串，只需首先创建一个 30 字节的字符串，而不是 15 字节。

另外，请，请，请不要使用称为`l`或的变量/常量`O`- 除非您进入“混淆 C 竞赛”。它们看起来太像数字一和零了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:40:43.583

`char *text = (char*) malloc(30);`

你为什么要命名它`text`，试试另一个名字，你已经`text`在函数开始时声明了。

`char text[l];`

# facebook-c#-sdk - 如何在没有 github 的情况下将 facebook SDK 安装到我的 Visual Studio 2010？

> ID：14231010
> 
> 赞同：0
> 
> 时间：2013-01-09T08:26:42.160
> 
> 标签：facebook-c#-sdk

我想将 Facebook SDK 与我的 asp.net 网站一起使用，该网站使用 Visual Studio 2010 git Hub 登录 iam，这对我来说不是用户友好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:35:32.627

您可以使用 NuGet 安装 facebook 的 c-sharp SDK。Github 只是 gitprojects 的托管者。了解 GIT 只是时间问题。如果你了解 github 的工作原理，你就会知道如何拉取项目。

还有一个 ZIP 按钮可以轻松地将项目下载为 ZIP。

*   [http://nuget.org/packages/Facebook](http://nuget.org/packages/Facebook)

或者使用 github 的 ZIP 按钮下载。

*   [https://github.com/facebook-csharp-sdk/facebook-csharp-sdk](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk)

# delphi - Delphi 64 位：找到不正确的转换？

> ID：14231013
> 
> 赞同：15
> 
> 时间：2013-01-09T08:26:45.687
> 
> 标签：delphi, memory-management, 64-bit, delphi-xe2

我正在努力使大型 Delphi 代码库适应 64 位。在许多情况下，有一些行将指针转换为/从 32 位值转换，类似于：

```
var
  p1,p2 : pointer;
begin
  inc(Integer(p1),10);
  p2 := Pointer(Integer(p1) + 42); 
```

在哪里可以找到这些演员表，我已将它们替换为 NativeInt-casts，以使它们在 64 位模式下正确。

但是我不确定我是否找到了所有这些。有时演员阵容更加微妙，因此仅对字符串“integer(”进行文本搜索也是不够的。

由于如果指针值高于整数类型的范围，“整数（”转换将在 64 位中失败，我有一个想法：如果我可以强制内存管理器分配高于 4gb 的内存（因此指针值使用更多比32位）？然后我会得到运行时错误，并且可以更容易地找到错误的演员表。这可能吗？或者任何人都可以推荐一些其他技术吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T09:07:37.340

除了您正在使用的文本搜索之外，没有什么神奇的技巧可以找到这些演员表。如果编译器警告这样的演员表，那就太好了。我觉得很失望，它没有。

当您确实发现此类问题时，请不要更改为`NativeInt`. 将指针更改为类型化指针，并使用指针算法。

```
var
  p1, p2: PByte;
....
inc(p1, 10);
p2 := p2;
inc(p2, 42); 
```

那么您的代码将永远安全。

在某些情况下，您需要强制转换为整数。例如，当将地址传递给`SendMessage`. 但将这些转换为任意一个`WPARAM`或`LPARAM`视情况而定。

您强制运行时错误的想法是合理的，谢天谢地，不是原创的！您应该使用完整版的 FastMM 并定义`AlwaysAllocateTopDown`. 这会强制 FastMM 进行的调用`VirtualAlloc`传递`MEM_TOP_DOWN`标志。这会将您的大部分错误转换清除为运行时指针截断错误。

但是，这只会强制对内存管理器分配的内存进行自上而下的分配。您流程中的其他模块将使用自下而上的默认策略。您可以设置机器范围的设置来更改该默认策略。设置`HKLM\System\CurrentControlSet\Control\Session Manager\Memory Management\AllocationPreference`为`REG_DWORD`值`0x100000`并重新启动。

请注意，这可能会导致您的机器出现稳定性问题。许多应用程序无法应对这种情况。特别是很少有防病毒产品可以应对这种设置。MSE 是我发现适用于机器范围自上而下分配的一种。更何况 64 位调试器不能在自顶向下分配下运行！所以你必须在没有调试器的情况下进行这种测试。我的[QC 报告](http://qc.embarcadero.com/wc/qcmain.aspx?d=100174)仍处于打开状态，即使在 XE3 中也没有解决此问题。

# c++ - C++ 继承循环依赖

> ID：14231016
> 
> 赞同：1
> 
> 时间：2013-01-09T08:27:05.763
> 
> 标签：c++, inheritance

我正在将一些 C# 代码移植到 C++ 并遇到以下问题，请参见下面的简化代码。我的文件系统类依赖于从文件系统类继承的目录类。这似乎适用于`C#`但不适用于`C++`. 有没有一个简单的技巧来打破这个？

```
class fileSystemItem{
    private:
    Directory* parent;
};

class Directory : public fileSystemItem{

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T08:28:06.027

的前向声明`directory`：

```
class Directory;
class FileSystemItem{
    private:
    Directory* parent;
};

class Directory : public FileSystemItem{

}; 
```

注意一致的大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:34:47.503

问题在于，在 C++ 中，必须先声明每种类型，然后才能引用它。为了解决这个问题，您可以执行所谓的*前向声明*，在子类第一次出现在基类中之前声明它。

只需`class Directory;`在`fileSystemItem`. 另请注意，在您的示例中，您`Directory`在`Directory`其自身的定义及其在`fileSystemItem`. 这不起作用，因为标识符（就像在 C# 中一样）区分大小写。

您生成的声明应如下所示：

```
class Directory;
class fileSystemItem{
    private:
    Directory* parent;
};

class Directory: public fileSystemItem{

}; 
```

# ios - 如何处理iOS检测到NSString语言，无法准确检测到英文？

> ID：14231023
> 
> 赞同：0
> 
> 时间：2013-01-09T08:27:38.363
> 
> 标签：ios, nsstring, detect

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-10T02:13:59.853

这是我的解决方案

```
- (NSString *)detectLanguage {

    if ([self isEmpty]) {
        return nil;
    }

    NSString *string = nil;

    // You can set a larger detect number here
    if (self.length > 30) {
        string = self;
    } else {
        NSMutableString *tempString = [NSMutableString stringWithString:self];

        while (tempString.length < 30) {
            [tempString appendFormat:@" %@",self];
        }

        string = tempString;
    }

    NSArray *tagschemes = [NSArray arrayWithObjects:NSLinguisticTagSchemeLanguage, nil];
    NSLinguisticTagger *tagger = [[NSLinguisticTagger alloc] initWithTagSchemes:tagschemes options:0];
    [tagger setString:string];
    NSString *language = [tagger tagAtIndex:0 scheme:NSLinguisticTagSchemeLanguage tokenRange:NULL sentenceRange:NULL];

    if (![language isEqualToString:@"und"]) {
        return language;
    }

    return (__bridge NSString *)CFStringTokenizerCopyBestStringLanguage((CFStringRef)string, CFRangeMake(0, MIN(string.length,400)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:34:55.027

您无法以这种方式识别它....至少没有任何不错的准确性。你必须提供一个更长的字符串。

CFStringTokenizerCopyBestStringLanguage 文档说它至少需要 200-400

-> 没有更好的方法，我们也用自己的解决方案进行了尝试，它需要更多的文本来保证准确性

# r - 如果我们在 Rcpp 中使用共享内存有什么危险吗

> ID：14231032
> 
> 赞同：0
> 
> 时间：2013-01-09T08:28:07.463
> 
> 标签：r, shared-memory, rcpp

我正在使用共享内存（由 C 提供的 shmget 系统调用）从 RCpp 程序内部分配共享内存。由于我没有使用与 R 的内存管理相关的标准 Calloc 函数，因此我应该注意什么危险？R 的内存管理是否会将 shmget 分配的空间视为可用空间并尝试对其进行覆盖？如果是这样的话，可以做些什么来避免这种情况呢？

谢谢 Vineeth

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T12:09:06.207

这表明完全缺乏对 R 的理解。

您不能仅通过链接到 pthread 或使用 OpenMP 或 ... 使 R 成为多线程的。同样，“编写 R 扩展”*非常*清楚内存分配可以做什么和不可以做什么。我建议您仔细查看该手册。

# .htaccess - 点在 htaccess 规则中定义的 htaccess 中不起作用

> ID：14231033
> 
> 赞同：1
> 
> 时间：2013-01-09T08:28:10.083
> 
> 标签：.htaccess, mod-rewrite

我对 .htaccess 了解不多，而且我在 .htaccess 中的正则表达式概念上苦苦挣扎。

我想要与 facebook 上相同的 url 概念作为用户个人资料，但破折号（-），下划线（_），点（。）我想要在 url 中也是目前我的 url 规则如下：

```
RewriteRule ^([a-z,\_,A-Z,\_,\-,0-9.][!pagenotfound|home|abuse/*|user/*|start/*|login/*|account/*|message/*|find/*|cms/*|accountactivation/*|register/*]*)/?$  memberspersonalinfo.php?members=$1 [QSA] 
```

这种模式有一些错误

但是当在我的浏览器中 domain.com/username 正在运行时，它工作正常但是当 url或者`domain.com/test-test`它重定向到 `PAGE NOT FOUND PAGE`test_test``test.test`

并且在我定义为遵循该规则的 .htaccess 规则中，例如 abuse/* 在我使用星号的任何地方都有动态 ID `(*)`，它们引用的是动态值。什么时候我会做规则

```
RewriteRule ^([a-z,\_,A-Z,\_,\-,0-9.]*)/?$  memberspersonalinfo.php?members=$1 [QSA] 
```

它工作正常，但是当我移至主页时，`memberspersonalinfo.php`它会自行调用页面。

我试图用 htaccess 脚本再次解释我的问题

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
DirectoryIndex  index.html index.php

ErrorDocument 404 /pagenotfound
ErrorDocument 403 /pagenotfound
ErrorDocument 401 /slapme/pagenotfound
ErrorDocument 500 /pagenotfound

#index
RewriteRule ^index.html$  index.php [L]
RewriteRule ^index$  index.php [L]
RewriteRule ^home$  index.php [L]

#nopage
RewriteRule ^pagenotfound$  nopage.php [L]

#Regitration
RewriteRule ^register/createaccount$  userregistration.php [L]

#Regitration Confirmation
RewriteRule ^register/accountconfirmation$  registrationconfirm.php [L]

#Activation Regitration
RewriteRule ^accountactivation/([a-z,\_,A-Z,\_,\-,0-9]*)/([a-z,\_,A-Z,=,\_,\-,0-9]*)$ registrationactivation.php?UsercontactID=$1&AccountId=$2 [L]

#after login
RewriteRule ^user/main$  after_login.php [L]

#Payment Detail
RewriteRule ^user/myaccount$  useraccount.php [L]

#Logout
RewriteRule ^user/logout$  logoutuser.php [L]

#creategroup
RewriteRule ^start/creategroup$  http://domain.com/start/creategroup [L,R=301]

#Forgot Password
RewriteRule ^user/forgotpassword$  http://domain.com/user/forgotpassword [L,R=301]

#Login
RewriteRule ^login/userlogin$  http://domain.com/login/userlogin [L,R=301]

#Remove account
RewriteRule ^account/remove$  removeuseraccount.php [L]

#Send an email page
RewriteRule ^message/?$  contacttouser.php [L,QSA]

#Report any site user page
RewriteRule ^abuse/([0-9]*)/$  reportsiteuser.php?reportUserID=$1 [L,QSA]

#CMS FIND FRIENDS PAGE
RewriteRule ^find/friend$  http://domain.com/find/friend [L,R=301]

#CMS TERMS OF USE PAGE
RewriteRule ^cms/howitworks$  howitworks.php [L]

#CMS CREATE OWN SLAP PAGE
RewriteRule ^cms/createownslap$  createownslap.php [L]

#CMS BRAND OR PRODUCT PAGE
RewriteRule ^cms/brandorproduct$  brandorproduct.php [L]

#CMS APPS AND FEATURES PAGE
RewriteRule ^cms/appsandfeatures$  appsandfeatures.php [L] 
```

这是我完整的 htaccess 代码，一切正常，所有规则都在工作，但是当我添加时

```
#group personal profile page page
RewriteCond %{REQUEST_URI} !/abuse(.*)
RewriteCond %{REQUEST_URI} !/user(.*)
RewriteCond %{REQUEST_URI} !/start(.*)
RewriteCond %{REQUEST_URI} !/login(.*)
RewriteCond %{REQUEST_URI} !/account(.*)
RewriteCond %{REQUEST_URI} !/message(.*)
RewriteCond %{REQUEST_URI} !/find(.*)
RewriteCond %{REQUEST_URI} !/cms(.*)
RewriteCond %{REQUEST_URI} !/accountactivation(.*)
RewriteCond %{REQUEST_URI} !/register(.*)
RewriteCond %{REQUEST_URI} !/social(.*)
RewriteCond %{REQUEST_URI} !/images(.*)
RewriteCond %{REQUEST_URI} !/css(.*)
RewriteCond %{REQUEST_URI} !/js(.*)
RewriteCond %{REQUEST_URI} !/userimages(.*)
RewriteRule ^([a-z,\_,A-Z,\_,\-,0-9.]+)/?$  memberspersonalinfo.php?members=$1 [QSA,L] 
```

它总是加载 memberspersonalinfo.php

# css - 外部样式表中类的不同样式

> ID：14231034
> 
> 赞同：0
> 
> 时间：2013-01-09T08:28:10.320
> 
> 标签：css

我有一个用于 Extrenal 样式表中的类的 css。我必须在不同的浏览器中为该类区分一个 css。如何在不同浏览器的外部样式表中为该类编写不同的属性。我可以通过维护不同的样式表来做到这一点。但我不想采用额外的样式表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:54:59.920

确保浏览器特定样式的两种方法是使用**供应商前缀**和**条件注释**。

供应商前缀涉及使用适当的供应商标签为您的样式添加前缀。一个例子是：

```
.button {
   -webkit-border-radius: 5px;
   -moz-border-radius: 5px; 
   -o-border-radius: 5px; 
   border-radius: 5px;
} 
```

不过，还有很多其他方法可以处理这些问题，许多在这篇[CSS-Tricks 文章](http://css-tricks.com/how-to-deal-with-vendor-prefixes/)中进行了解释。

[条件注释](http://www.quirksmode.org/css/condcom.html)是注释标记之间的代码块，如果使用适当的浏览器，旧浏览器将识别并实现到样式表中。

这方面的一个例子是：

```
<!--[if IE 6]>
Special instructions for IE 6 here
<![endif]--> 
```

# z3 - Z3Python：数组的例子？

> ID：14231035
> 
> 赞同：2
> 
> 时间：2013-01-09T08:28:12.633
> 
> 标签：z3, z3py

我正在寻找一些在 Z3 python 中使用数组理论的代码示例，但找不到任何代码示例。

请问有人可以提供一些代码示例吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:54:22.093

这是一个显示数组声明和通过索引访问项目的示例[http://rise4fun.com/Z3Py/7jAj](http://rise4fun.com/Z3Py/7jAj)：

```
x = Int('x')
a = Array('a', IntSort(), BoolSort())
b = Array('b', IntSort(), BoolSort())
c = Array('c', BoolSort(), BoolSort())

e = ForAll(x, Or(Not(a[x]), c[b[x]]))
print e

solver = Solver()
solver.add(e)
c = solver.check()
print c 
```

这是另一个使用数组理论`Select`的示例[http://rise4fun.com/Z3Py/2CAn](http://rise4fun.com/Z3Py/2CAn)：`Store`

```
x = Int('x')
y = Int('y')
a = Array('a', IntSort(), IntSort())

s = Solver()
s.add(Select(a, x) == x, Store(a, x, y) == a)
print s.check()
print s.model() 
```

也就是说，StackOverflow 周围有一些数组示例。您可以尝试使用“z3py array”关键字在网站上搜索以获取更多信息。

# java - Java SafeVarargs 注释，是否存在标准或最佳实践？

> ID：14231037
> 
> 赞同：195
> 
> 时间：2013-01-09T08:28:26.697
> 
> 标签：java, java-7, variadic-functions

我最近遇到了 java`@SafeVarargs`注释。谷歌搜索是什么让 Java 中的可变参数函数不安全让我很困惑（堆中毒？擦除类型？），所以我想知道一些事情：

1.  是什么让可变参数 Java 函数在`@SafeVarargs`某种意义上不安全（最​​好以深入示例的形式进行解释）？

2.  为什么这个注释留给程序员自由裁量权？这不是编译器应该能够检查的吗？

3.  是否必须遵守一些标准以确保他的功能确实是 varags 安全的？如果没有，确保它的最佳做法是什么？

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2013-01-10T06:43:43.480

1) Internet 和 StackOverflow 上有很多关于泛型和可变参数的特定问题的示例。基本上，它是当您拥有可变数量的类型参数类型的参数时：

```
<T> void foo(T... args); 
```

在 Java 中，可变参数是一种语法糖，它在编译时经过简单的“重写”：类型的可变参数`X...`转换为类型的参数`X[]`；每次调用这个 varargs 方法时，编译器都会收集 varargs 参数中的所有“变量参数”，并创建一个数组，就像`new X[] { ...(arguments go here)... }`.

当 varargs 类型具体如`String...`. 当它是一个类型变量`T...`时，它也可以在`T`已知是该调用的具体类型时工作。例如，如果上面的方法是一个类的一部分`Foo<T>`，并且你有一个`Foo<String>`引用，那么调用`foo`它就可以了，因为我们知道代码`T`中`String`的那个点。

`T`但是，当 的“值”是另一个类型参数时，它不起作用。在 Java 中，不可能创建类型参数组件类型 ( `new T[] { ... }`) 的数组。所以 Java 改为使用`new Object[] { ... }`（这里`Object`是 的上限`T`；如果有不同的上限，那就是它而不是`Object`），然后给你一个编译器警告。

那么创建`new Object[]`而不是`new T[]`什么有什么问题呢？好吧，Java 中的数组在运行时就知道它们的组件类型。因此，传递的数组对象在运行时将具有错误的组件类型。

对于可变参数的最常见用法，简单地迭代元素，这没有问题（你不关心数组的运行时类型），所以这是安全的：

```
@SafeVarargs
final <T> void foo(T... args) {
    for (T x : args) {
        // do stuff with x
    }
} 
```

但是，对于任何依赖于传递数组的运行时组件类型的东西，它都是不安全的。这是一个不安全和崩溃的简单示例：

```
class UnSafeVarargs
{
  static <T> T[] asArray(T... args) {
    return args;
  }

  static <T> T[] arrayOfTwo(T a, T b) {
    return asArray(a, b);
  }

  public static void main(String[] args) {
    String[] bar = arrayOfTwo("hi", "mom");
  }
} 
```

这里的问题是我们依赖于 to 的类型`args`才能`T[]`将其返回为`T[]`. 但实际上运行时参数的类型不是`T[]`.

3) 如果您的方法具有`T...`类型参数（其中 T 是任何类型参数），则：

*   安全：如果您的方法仅取决于数组元素是`T`
*   不安全：如果它取决于数组是`T[]`

依赖于数组的运行时类型的事情包括：将其作为 type 返回`T[]`，将其作为参数传递给 type 的参数，`T[]`使用获取数组类型`.getClass()`，将其传递给依赖于数组的运行时类型的方法，例如`List.toArray()`和`Arrays.copyOf()`， ETC。

2）我上面提到的区分太复杂了，不容易自动区分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-11T09:48:13.593

对于最佳实践，请考虑这一点。

如果你有这个：

```
public <T> void doSomething(A a, B b, T... manyTs) {
    // Your code here
} 
```

将其更改为：

```
public <T> void doSomething(A a, B b, T... manyTs) {
    doSomething(a, b, Arrays.asList(manyTs));
}

private <T> void doSomething(A a, B b, List<T> manyTs) {
    // Your code here
} 
```

我发现我通常只添加可变参数以方便我的调用者。对于我的内部实现来说，使用`List<>`. 因此，要背负`Arrays.asList()`并确保我无法引入堆污染，这就是我所做的。

我知道这只会回答你的#3。newacct 对上面的#1 和#2 给出了很好的答案，我没有足够的声誉将其作为评论留下。:P

# qt - QLineEdit 只接受整数和 ” 和 / 字符？

> ID：14231041
> 
> 赞同：1
> 
> 时间：2013-01-09T08:28:33.903
> 
> 标签：qt, qt4, qlineedit, qregexp

我有一个`QLineEdit`，我正在将它用于测量转换应用程序。因为`QLineEdit`我必须只使用整数值，所以我使用了`QDoubleValidator`.

```
q_LineEdit->setValidator(new QDoubleValidator(this)); 
```

现在我希望`QLineEdit`它只接受 " 和 / 字符，以及整数，因为它是转换应用程序所必需的。如何`QLineEdit`在使用 a 时让我接受它`QDoubleValidator`？

**注意：**我希望我`QLineEdit`接受这样的东西（例如**70“1/2**）。

**注意：**`QLineEdit`不应接受除 " 和 / 以外的任何其他字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T06:22:41.973

最后我自己想出了答案。这很简单。只需使用`QRegExpValidator`. 这是我的一段代码：

```
QRegExp rx("(|\"|/|\\.|[0-9]){30}");
m_LineEdit->setValidator(new QRegExpValidator(rx, this)); 
```

# markdown - 预览时的 Emacs markdown-mode 错误：“bin / bash: markdown: command not found”

> ID：14231043
> 
> 赞同：40
> 
> 时间：2013-01-09T08:28:46.447
> 
> 标签：markdown, emacs24, installation

我在 fedora 17 上使用 emacs 24。我安装了`markdown-mode`，但是每当我尝试通过键入`C-c C-c m`或`C-c C-c p`在 emacs 中导出文件时，我都会收到此错误：

> /bin/bash：markdown：找不到命令

![emacs 的 markdown 报错信息截图](../Images/861f6a952d2f0cdc997b3be6c5bb3b88.png)

我读到这可能是路径变量的问题，所以我通过在命令行和emacs 中`env`键入来比较变量。我发现两种情况下的路径变量描述都是一样的。`$ env``Esc-! env RET`

这是什么错误？如何修复它并从 emacs 中执行降价预览？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-11-02T09:38:49.377

根据需要安装任何降价生成工具，例如[pandoc](http://johnmacfarlane.net/pandoc/)。

然后将以下行添加到您的`.emacs`文件中：

```
(custom-set-variables
 '(markdown-command "/usr/local/bin/pandoc")) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-25T12:13:04.563

当您没有安装[markdown 解析器](http://daringfireball.net/projects/markdown/)时会发生此错误。[使用brew](http://brew.sh/)安装一个很简单。从命令行：

`brew install markdown`

这应该会导致类似：

```
==> Downloading http://daringfireball.net/projects/downloads/Markdown_1.0.1.zip
######################################################################## 100.0%
  /usr/local/Cellar/markdown/1.0.1: 2 files, 40K, built in 2 seconds 
```

在运行该命令之前，我遇到了与您相同的错误。在运行该命令后，该命令会在您的系统上安装一个 markdown 解析器，emacs 命令`C-c C-c m`并`C-c C-c p`通过分别在另一个缓冲区或浏览器中打开我的 markdown 文件的 HTML 版本来按预期工作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-17T14:40:42.890

你只需要选择并安装一个 markdown 解析器：

*   [折扣](https://github.com/davidfstr/rdiscount)( `gem install rdiscount`)。
*   python2-markdown ( `yum install python-markdown2`)
*   或其他一些。

然后，在emacs中：

```
M-x customize-mode RET markdown-mode 
```

将“Markdown Command”设置为您安装的可执行文件的名称——例如，`rdiscount`或`/usr/bin/markdown2`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-01T02:28:50.500

*   将 emacs 包存储库添加到`init.el`：

```
(require 'package)
(add-to-list 'package-archives
             '("melpa-stable" . "https://stable.melpa.org/packages/"))
(package-initialize) 
```

*   刷新包：

`M-x package-refresh-contents`

*   通过评估安装 emacs 主要模式 markdown-mode：

`M-x package-install RET markdown-mode RET`

*   为您的操作系统安装 markdown 处理器：

```
brew install pandoc
#OR
sudo apt-get install pandoc 
```

*   验证 pandoc 安装：

```
which pandoc
# returns /usr/local/bin/pandoc 
```

*   将 markdown 解析器映射到`init.el`：

```
(custom-set-variables
  '(markdown-command "/usr/local/bin/pandoc")) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-30T04:55:37.183

您需要设置markdown-command，有一个关于以github方式显示它的[线程](https://gist.github.com/fredRos/0e3a845de95ec654538f)，通过pandoc。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-11T22:35:26.367

我最近迁移到了一台新机器，它看起来像在 macOS Monterey（可能以前）中，它看起来像 brew 改变了它的安装位置。`"/opt/homebrew/bin/pandoc"`我根据 Saurabh 的回答将我的降价命令更改为

# jsf - 在另一个视图范围 bean 中注入一个视图范围 bean 会导致它被重新创建

> ID：14231044
> 
> 赞同：7
> 
> 时间：2013-01-09T08:28:53.050
> 
> 标签：jsf, jsf-2, dependency-injection, managed-bean

我需要在另一个视图范围 bean 中使用保存在视图范围 bean 中的一些数据。

```
@ManagedBean
@ViewScoped
public class Attivita implements Serializable {
    //
} 
```

和

```
@ManagedBean
@ViewScoped
public class Nota implements Serializable {

    @ManagedProperty("#{attivita}")
    private Attivita attivita;

    // Getter and setter.
} 
```

现在，也许我关于它的理论仍然很差，我注意到当`#{attivita}`被注入时，`Attivita`构造函数被调用并因此创建另一个实例。这是正确的行为吗？如果我想引用同一个实例而不创建一个新实例怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T12:10:35.220

如果您在回发中从一个视图导航到另一个视图，就会发生这种情况。视图范围的 bean 不绑定到请求，而是绑定到视图。因此，当您导航到新视图时，它将获得视图范围 bean 的全新实例。它不会重用与前一个视图关联的同一个 bean 实例。

我知道`attivita`bean 是在初始视图上创建的，并在回发时重用。我知道`nota`bean 与您要导航到的新视图相关联。当注入`attivita`它时，它只会得到一个新的和不同的实例，即使在同一个请求中还有另一个实例。这是所有预期的（并且诚然有点不直观）的行为。

对此没有标准的 JSF 解决方案。CDI 解决了这个问题`@ConversationScoped`（只要您明确告诉它存在，bean 就存在），CDI 扩展 MyFaces CODI 更进一步`@ViewAccessScoped`（只要导航视图引用它，bean 就存在）。

但是，您可以通过将 bean 作为属性存储在请求范围中来解决此问题。

```
@ManagedBean
@ViewScoped
public class Attivita implements Serializable {

    public String submit() {
        FacesContext.getCurrentInstance().getExternalContext()
            .getRequestMap().put("attivita", this);
        return "nota";
    }

} 
```

和

```
@ManagedBean
@ViewScoped
public class Nota implements Serializable {

    private Attivita attivita;

    @PostConstruct
    public void init() {
        attivita = (Attivita) FacesContext.getCurrentInstance().getExternalContext()
            .getRequestMap().get("attivita");
    }

} 
```

请注意，这是相当hacky。根据具体的功能要求，可能会有更好的解决方案。另请注意，您应该在`nota`视图中引用所需的`Attivita`bean 实例 as`#{nota.attivita}`而*不是*as `#{attivita}`，因为它会给您一个新的和不同的实例，原因之前已经解释过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:39:09.580

您的`attivita`bean 是`@ViewScoped`并且不能保证您的实例将保持在会话中。你需要一颗`@SessionScoped`豆子。但是，如果您`attivita`出于某种原因需要 be `@ViewScoped`，那么您可以通过其他方式传递参数，例如在它们之间使用`viewParam`或使用其他`@SessionScoped`bean。

**页面参数**

[http://mkblog.exadel.com/2010/07/learning-jsf2-page-params-and-page-actions/](http://mkblog.exadel.com/2010/07/learning-jsf2-page-params-and-page-actions/)

**JSF 2 托管 Bean 范围**

[http://balusc.blogspot.com.es/2011/09/communication-in-jsf-20.html#ManagedBeanScopes](http://balusc.blogspot.com.es/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)

# iphone - 自己实例中的目标c调用方法

> ID：14231045
> 
> 赞同：1
> 
> 时间：2013-01-09T08:28:58.870
> 
> 标签：iphone, objective-c, xcode, uiview

目标c（构建iphone应用程序）真的很新，我试图弄清楚如何正确理解调用方法的工作原理（与c#相比，我一直在使用的最新语言）

我有这个实现

```
@interface User : NSObject{
}

@property NSInteger Id;
@property NSString *email, *password;
-(BOOL)isValid;
@end

@implementation User

-(BOOL)isValid{
  NSString *password = self.validateString:self.password;
  NSString *email = self.email;

  if(validUser){
     return YES;
  }else{
     return NO;
  }
} 
```

**编辑：对不起，如果不清楚，但这是我试图调用的方法。**

```
-(NSString *)validateString:(NSString *)string{
    // process the string
    return @"";
} 
```

基本上我试图在我的视图中创建一个实例 onclick 一个按钮，如下所示：

```
- (IBAction)btnSubmit:(id)sender {
    // get values of email and password

    // do an isvalid to check with web service.
    User *user = [[User alloc] init];
    user.email = @"email@email.com";
    user.rawPassword = @"pass";

    if(user.isValid){
        // go to next page
    }
    else{
        // else refresh current page
    }
} 
```

在单击时创建实例然后传递值以在实例内部进行处理是一种好习惯吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:33:16.920

无需在那里创建它自己的对象。您可以使用当前对象执行此操作：

```
- (IBAction)btnSubmit:(id)sender
  {    
    self.email = @"email@email.com";
    self.rawPassword = @"pass";

    if(self.isValid)
    {
        // go to next page
    }
    else
    {
        // else refresh current page
    }
} 
```

`self`您可以使用关键字在其范围内引用同一对象。它类似于**C++**`this`中使用的关键字

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:31:41.247

我不确定您尝试在对象中调用哪些方法，而是在您使用的当前对象中调用方法`self`。

IE

```
[self runSomeFunction]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:33:00.733

采用

注意：- 如果您在同一类中创建按钮操作，则无需创建同一类的实例，您可以使用 self

```
 - (IBAction)btnSubmit:(id)sender {
// get values of email and password

// do an isvalid to check with web service.
 User *user = [[User alloc] init];//not need if its same user class

user.email = @"email@email.com";//self.email=@"email@email.com"; if same user class

user.rawPassword = @"pass";//self.rawPassword=@"pass"; if same user class

if([self isValid]){//made a change here as in objective c its a syntax to call a method not with "."
    // go to next page
}
else{
    // else refresh current page
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:45:37.820

这取决于您是否真的需要分配一个我们不能说的新实例，因为这取决于您的业务逻辑。

如果你想在这里用 new 用 c++ 创建一个新实例，那么是的，分配/初始化一个新实例并使用它。

如果您`this`在 c++ 中引用，正如您的问题标题所暗示的那样，那么您可以使用`self`相当对应于`this`. `self.isValid`并且`[self isValid]`是等价物。

这是实例方法。在类中的方法`self`将引用类，而不是实例**

# perl - Perl ExtUtils::MakeMaker，如何安装外部配置（项目的静态配置）？

> ID：14231052
> 
> 赞同：2
> 
> 时间：2013-01-09T08:29:37.647
> 
> 标签：perl

我正在编写我的 perl 程序的分发包，我需要“制作安装”命令复制文件，例如 conf/my.conf 到 /usr/local/etc/my.conf。我应该在 WriteMakefile 中使用哪个参数？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:46:53.093

它不会退出 :) （在旧 TODO 上）

使用`File::ShareDir::Install`/`File::UserConfig`

或者试试你的运气`Module::Build::SysPath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:32:14.280

我发现不漂亮但有用的解决方案：

```
sub MY::postamble {
    return qq{
install :: conf/my.conf
\tcp conf/my.conf /usr/local/etc/my.conf
}; 
```

这是 Makefile 的一个简单附加组件，用于在“make install”运行时运行命令。在现实生活中它看起来有点困难，但是...... =）

如果有什么好看的点子欢迎欢迎！

# ruby-on-rails - Rails：如何调试本地主机不响应延迟作业/工头

> ID：14231056
> 
> 赞同：3
> 
> 时间：2013-01-09T08:29:52.513
> 
> 标签：ruby-on-rails, delayed-job, foreman

[根据 Heroku 的建议，](https://devcenter.heroku.com/articles/delayed-job)我有一个创建新的 activerecord 记录的任务，我最近使用 delay_job 和 foreman 将其移动到后台任务

有时这可以正常工作，但有时会导致浏览器中的 Rails 应用程序停止响应。

此时我可以从数据库中看到所有延迟的作业都已完成，并且所有新记录都已创建。

然而，当我终止进程时，我得到了另外 11,200 行的终端输出。这主要包括 Web 进程在模型上执行两个方法，这两个方法都涉及对数据库的调用：

```
validate :hit_database_to_see_if_model_exists?

before_save :get_rows_from_database_and_perform_calculation 
```

还有一些 INSERT 语句，我确信它们已经进入数据库，因为在终止进程之前/之后记录的数量没有改变

这是我的Procfile：

> 网络：捆绑 exec rails 服务器瘦 -p $PORT -e $RACK_ENV
> 
> 工人：捆绑执行耙工作：工作

所以感觉就像我得到一个“堆栈溢出”（哇）。你能解释一下吗：

*   一般是怎么回事？
*   在 Rails 中，这种“堆栈溢出”发生在哪里
*   这些事情是在我按下“Ctrl + C”之后实际发生的，还是当时只是被打印到终端上？
*   这可能是什么原因造成的？
*   我该如何调试/修复它？

**更新**

看起来后台任务正在将某些任务分配给 Web 进程，但直到浏览器被“刺激”后才会执行。在某些情况下，它们都会执行，但如果太多，应用程序就会崩溃。关于可能导致这种情况的任何想法？

**更新**

我尝试在两个单独的窗口中运行 Web 和工作进程。

在这种情况下，我无法复制浏览器挂起的问题，并且在每种情况下工作进程都正确完成。

然而，我确实做了一个有趣的观察，如果我不触摸浏览器，那么 Web 窗口中不会出现任何输出。但是，如果我确实触摸了浏览器，那么此时工作进程正在执行的数千行代码会出现在 Web 窗口中。

这是正常的吗？这是否说明了问题可能是什么？

**更新**

在我终止进程后终端输出的底部显示“已终止：9”

> 07:45:21 系统 | 向所有进程发送 SIGKILL
> 
> 击杀：9

这个 9 到底指的是什么？这不寻常吗？

**更新**

我在用：

*   延迟作业 3.0.4
*   延迟作业活动记录 0.3.3
*   延迟作业网络 1.1.2
*   工头 0.60.2

**解析度**

感谢@Justin 在下面的回答（以及[这个相关的问题](https://stackoverflow.com/questions/8717198/foreman-only-shows-line-with-started-wit-pid-and-nothing-else)）。似乎 Ruby 默认会缓冲标准输出，并且该缓冲区溢出，导致应用程序停止响应。我`$stdout.sync = true`在 config/environments/development.rb 的顶部添加了，问题似乎已经消失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:34:40.263

这只是部分答案，但它可能会帮助您进行调试。

默认情况下，Rails 缓冲日志记录，并在每次 Web 请求后刷新它。[一种选择是简单地用更简单](http://guides.rubyonrails.org/debugging_rails_applications.html#the-logger)的记录器替换记录器

```
Rails.logger = Logger.new(STDOUT) 
```

您还[可以将缓冲记录器配置为更频繁地刷新](http://engineering.freeagent.com/2011/10/12/understanding-the-rails-logger/)

```
Rails.logger.auto_flushing = (Rails.env.development? || Rails.env.test?) 
```

您还必须小心 STDOUT。在我当前的项目中，我在后台启动和后台启动中都启用了标准输出刷新`config.ru`（我使用的是 sidekiq，因此启动过程可能会有所不同）

```
STDOUT.sync = true 
```

### 至于你更大的问题，

我很惊讶 rails 进程正在运行后台任务。是否有禁用它的选项，至少对于实验而言？

然后是标准的调试工具——所有的数据库调用都让我担心，所以我会尝试各种禁用它们的组合，看看是否有任何改进。尤其是其中两个——例如，如果你的 before_save 钩子改变了模型中的一个值，它可能会触发验证；如果这会重置 before_save 钩子，那么您将有一个循环。

# c# - c#中的动态方法

> ID：14231060
> 
> 赞同：1
> 
> 时间：2013-01-09T08:30:05.680
> 
> 标签：c#

我在表单上有很多标签，每个标签都使用不同的参数调用相同的方法（属于标签文本/名称）。这是代码：

```
 //"res" is an array
    private void label1_Click(object sender, EventArgs e)
    {                       
        checkresult(res[0]);
    }

    private void label2_Click(object sender, EventArgs e)
    {        
        checkresult(res[1]);
    }

    private void label3_Click(object sender, EventArgs e)
    {  
        checkresult(res[2]);
    }

    private void label4_Click(object sender, EventArgs e)
    { 
        checkresult(res[3]);
    }

    private void label5_Click(object sender, EventArgs e)
    {
        checkresult(res[4]);
    }

    private void label6_Click(object sender, EventArgs e)
    {
        checkresult(res[5]);
    }

    private void label7_Click(object sender, EventArgs e)
    {
        checkresult(res[6]);
    }

    private void label8_Click(object sender, EventArgs e)
    {
        checkresult(res[7]);
    }

    private void label9_Click(object sender, EventArgs e)
    {
        checkresult(res[8]);
    } 
```

我只想通过为所有标签定义一种方法来精确我的代码。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T08:32:14.553

伪代码可能如下所示：

```
label1.Click += label_Click(object sender, EventArgs e); 
label2.Click += label_Click(object sender, EventArgs e);//SAME HANDLER
label3.Click += label_Click(object sender, EventArgs e);//SAME HANDLER
.... 
```

之后

```
private void label_Click(object sender, EventArgs e)
{
    if(sender == label1)
      checkresult(res[0]);
    else if(sender == label2)
      checkresult(res[1]);
   ... 
   ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T08:35:02.267

首先让所有标签使用相同的`Label_Click`事件。

```
private void Label_Click(object sender, EventArgs e)
{
    Label temp = sender as Label;
    if (temp != null)
    {
        string labelName = temp.Name;
        string labelId = labelName.Substring(5, labelName.Length);
        int id = int.Parse(labelId) - 1;
        checkresult(res[id]);
    }                
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:41:41.287

您可以在创建事件处理程序时设置匿名委托

```
label1.Click += (s,e) => {checkresult(res[0]); };
label2.Click += (s,e) => {checkresult(res[1]); };
label3.Click += (s,e) => {checkresult(res[2]); }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:34:51.520

在 WinForms 中，将您的索引设置为标签标签并将每个 OnClick 事件设置为相同的 EventHandler

```
 private void lbl_Click(object sender, EventArgs e)
 {
      checkresult(res[Convert.ToInt32((sender as Label).Tag)]);
 } 
```

# r - 列中的值足够接近时的行聚合

> ID：14231063
> 
> 赞同：2
> 
> 时间：2013-01-09T08:30:28.617
> 
> 标签：r, time, dataset, row, aggregation

我有一个包含 2 列的数据框

```
 time     x
  1306247226     5
  1306247236    10
  1306248127    20
  1306248187    36
  1306249248    28
  1306249258    24
  1306249259    20
  ... 
```

我想聚合“时间”列中的值足够接近的行（例如，假设它们的差异小于 60。）并将它们的“x”值汇总到聚合行中。聚合行中的时间值将是聚合的第一行之一。（'time' 是一个 unix 时间戳）

目标是作为此示例的输出：

```
 time     x
  1306247226    15
  1306248127    20
  1306248187    36
  1306249248    72
  ... 
```

数据集非常大，“for”循环需要很长时间……但如果这是唯一的选择，我可以处理它并等待。任何的想法？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T08:52:59.157

你可以使用这样的东西：

首先，我为聚合创建一个新列

```
dat$gg <- cumsum(c(0,diff(dat$time)) > 60) 
```

然后我使用`plyr`包来应用函数聚合

```
library(plyr)
ddply(dat,.(gg),summarise,time = head(time,1),res = sum(x))
  gg       time res
1  0 1306247226  15
2  1 1306248127  56
3  2 1306249248  72 
```

**评论后编辑**

Op 想要一个 60 的阈值，不大于 60。所以我需要`>`将`>=`

```
dat$gg <- cumsum(c(0,diff(dat$time)) >= 60)

ddply(dat,.(gg),summarise,time = head(time,1),res = sum(x))
  gg       time res
1  0 1306247226  15
2  1 1306248127  20
3  2 1306248187  36
4  3 1306249248  72 
```

# python - 为什么要求和默认在ndb中是互斥的？

> ID：14231068
> 
> 赞同：11
> 
> 时间：2013-01-09T08:30:36.137
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

在旧的 google appengine 数据存储 API 中，“必需”和“默认”可以一起用于属性定义。使用 ndb 我得到一个

```
ValueError: repeated, required and default are mutally exclusive. 
```

示例代码：

```
from google.appengine.ext import ndb
from google.appengine.ext import db

class NdbCounter(ndb.Model):
    # raises ValueError
    count = ndb.IntegerProperty(required=True, default=1)

class DbCounter(db.Model):
    # Doesn't raise ValueError
    count = db.IntegerProperty(required=True, default=1) 
```

我想实例化一个 Counter 而不必指定一个值。我还想避免有人将该值覆盖为无。上面的例子是构造的。我可能没有必需的属性，而是添加一个 increment() 方法。我仍然看不到 required 和 default 相互排斥的原因。

它是错误还是功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T17:36:56.857

我想你是对的。也许我在编写那部分代码时感到困惑。“required=True”意味着“不允许写入值 None”是有道理的，因此应该可以将其与默认值结合使用。请在 NDB 跟踪器中提交功能请求：[http ://code.google.com/p/appengine-ndb-experiment/issues/list](http://code.google.com/p/appengine-ndb-experiment/issues/list)

请注意，对于重复属性，事情会更加复杂，即使实现了上述功能，重复也可能继续与必需或默认不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:13:40.063

我不确定这是什么意思，这是来自 appengine.ext.ndb.model.py 的“解释”：

```
The repeated, required and default options are mutually exclusive: a
repeated property cannot be required nor can it specify a default
value (the default is always an empty list and an empty list is always
an allowed value), and a required property cannot have a default. 
```

请注意，ndb 还有其他一些非常烦人的行为（ Text>500 Bytes not possible without monkey-patching the expando-model, 通过 .IN( [] ) 过滤会引发异常，..）。因此，除非您需要通过缓存来提高速度，否则您应该考虑使用 ext.db atm。

# sharepoint - 使用 XML 中的网站集 url 部署列表项

> ID：14231076
> 
> 赞同：1
> 
> 时间：2013-01-09T08:31:08.143
> 
> 标签：sharepoint, sharepoint-2010, caml

我使用 XML 将列表定义和实例部署到 Sharepoint 2010 网站集。我在`Elements.xml`实例中创建了一些列表项，一切正常。

现在，我在定义中有一个 URL 字段，我想在其中填写一个指向已激活该功能的当前网站集的 URL。

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <ListInstance Title="List" TemplateType="10020" Url="Lists/List">
    <Data>
      <Rows>
        <Row>
          <Field Name="UrlField"> 
          HOW TO INSERT THE SITE COLLECTION URL HERE? 
          </Field>
          ... 
```

我尝试插入几个版本：

*   **http://myserver/myurl**当然，绝对 URL 有效，但无用，因为解决方案将安装在不同的服务器上
*   **~SiteCollection/myurl**这本来是我的第一个猜测，但不幸的是它不起作用（错误消息在激活时无效 url）
*   **/myurl**如果网站集始终是不正确的根**/**这将起作用（例如，它可能在 /websites/ 下）

有任何想法吗？

# c# - 排序一个字符数组，使所有元音出现在最后

> ID：14231077
> 
> 赞同：3
> 
> 时间：2013-01-09T08:31:16.863
> 
> 标签：c#, arrays, sorting

我正在尝试编写一个程序，其中将单词作为字符串提供作为输入，我必须重新排列单词，以便通过将所有元音移动到末尾来改变单词中字母的顺序，保持它们的顺序与它们在原始单词中出现的顺序相同

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string word = "application";
            char[] letters = word.ToCharArray();
            char x = new char { };
            for (int j = 0; j < letters.Length; j++)
            {
                if ((letters[j] == 'a') | (letters[j] == 'e' ) | (letters[j] == 'i' ) | (letters[j] == 'o' ) | (letters[j] 

== 'u'))
                {
                    for (int i = 0; i < letters.Length - 1; i++)
                    {
                        x = letters[i];
                        letters[i] = letters[i + 1];
                        letters[i + 1] = x;
                    }
                }
            }
            string s = new string(letters);
            Console.WriteLine(s);
        }
    }
} 
```

程序的输出是

```
ationaplic 
```

但程序的预期输出是

```
pplctnaiaio 
```

为什么我的代码没有产生我想要的输出？

编辑后的工作代码是

```
namespace VowelSort
{
    class Program
    {
        static void Main(string[] args)
        {
            string word = "application";
            char[] letters = word.ToCharArray();
            char x = new char { };
            int count = 0;
            for (int j = 0; j < letters.Length - count; j++)
            {
                if ((letters[j] == 'a') | (letters[j] == 'e') | (letters[j] == 'i') | (letters[j] == 'o') | (letters[j] == 'u') | (letters[j] == 'A') | (letters[j] == 'E') | (letters[j] == 'I') | (letters[j] == 'O') | (letters[j] == 'U'))
                {
                    for (int i = j; i < letters.Length - 1; i++)
                    {
                        x = letters[i];
                        letters[i] = letters[i + 1];
                        letters[i + 1] = x;

                    }
                    count++;
                    j--;
                }

            }
            string s = new string(letters);
            Console.WriteLine(s);
            Console.WriteLine(count);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T08:44:38.803

我在这里发现了三个问题：

1.  当你找到一个元音时，你开始你的内部循环，`0`所以你总是将第*一个*字符移动到末尾。`j`改为开始。
2.  在你移动了一个元音之后，你从下一个字母开始你的外循环——所以如果你连续有两个元音，你跳过第二个（因为它已经被移动到他“当前”位置之后）。在你之后重新完成移动元音，减量`j`。
3.  您将外部循环运行到最后，但是当您到达已经移动的元音时，您应该停止它。记录你移动的元音数量，当你从最后到达那么多字符时停止你的外循环。

尝试自己实施这些更改，但如果您遇到困难，我可以给您一些指示。

完成这项工作后，您可能希望通过意识到不必执行多次成对交换来加速内部循环 - 您只需记下您找到的元音，将其后的所有内容向上移动一个字符，然后插入最后的元音。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T08:39:58.687

有

```
static char[] vowels = new char[] { 'a', 'e', 'i', 'o', 'u' }; 
```

使用这个 LINQ 查询：

```
string s = "absdiuoc";
string result = string.Concat(s.ToCharArray()
                                .GroupBy(c => vowels.Contains(c))
                                .OrderBy(g => g.Key)
                                .SelectMany(g => g)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T08:41:37.837

使用简单的 LINQ 查询：

```
word = String.Concat(word.OrderBy(c => "aeiou".Contains(c))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T08:45:38.030

当您的代码识别出一个元音时，它会将其移动到数组的末尾（从而将所有字母向左移动一个空格）。但是，您的外部循环仍在移动到下一个字符，这意味着如果有连续的元音，您将错过一个元音：

例如，考虑“空气”这个词。当变量`i`为 0 时，'a' 移到末尾：

```
air
^ i=0 
```

`i`现在在索引零处增加到 1 缺少“i”：

```
ira
 ^ i=1 
```

（您还需要确保外循环在到达已移动的元音之前停止。）

# jquery - 使用 jQuery tablesorter.js 避免/禁用排序过程中的某些特定行

> ID：14231081
> 
> 赞同：25
> 
> 时间：2013-01-09T08:31:42.247
> 
> 标签：jquery, tablesorter

我有一张表，我正在使用 jquery 插件 tablesorter 进行排序。在这里，我想避免在选择任何列进行排序时对第一行 {class="avoid-sort" } 进行排序。例子：

* * *

```
 <thead>
        <tr>
            <th class="header">#</th>
            <th class="header">Purchase Date</th>
            <th class="header">Course Name</th>
            <th class="header">Amount(in $)</th>
            <th class="header">User Name</th>
            <th class="header">Share</th>
            <th class="header">Net Revenue [$236.41]</th>
        </tr>
      </thead>
  <tbody>

       <tr class="avoid-sort">
            <th colspan="7">Total Revenue</th>
            <td>236.41</td>
        </tr>

        <tr>
                <td>1</td>
                <td>January 3rd, 2013</td>
                <td>Tackle Certification</td>
                <td>50</td>
                <td>Khushi Jha</td>
                <td>35</td>
                <td>33.69</td>
        </tr>
      <tr>
                <td>2</td>
                <td>January 3rd, 2013</td>
                <td>Flag Certification</td>
                <td>100</td> 
                <td>Pay</td>
                <td>70</td>
                 <td>67.67</td>
      </tr>
                            <tr>
                <td>3</td>
                <td>January 3rd, 2013</td>
                <td>Tackle Certification</td>
                <td>50</td>
                <!--                    <td>-->
                    <!--</td>-->
                <td>Pay</td>
                <td>35</td>
                 <td>33.69</td>

   </tr> 
```

* * *

tr class="avoid-sort" 不应该出现在排序中！

请帮忙！！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-10T06:18:14.633

你有两个选择：

1.  如果您使用的是原始的 tablesorter，您可以让这个[静态行小部件](https://github.com/ascii-soup/Tablesorter-Static-Row-Plugin)将行“锁定”到位。

2.  如果您使用我[的 tablesorter 分支](http://mottie.github.com/tablesorter/docs/)，您可以添加一个不可排序的 tbody，如下所示（[演示](http://mottie.github.com/tablesorter/docs/example-multiple-tbodies.html)）：

    ```
    <table>
    <thead>
      ...
    </thead>

    <!-- rows within this tbody are ignored -->
    <tbody class="avoid-sort">
      <tr>
        <th colspan="7">Total Revenue</th>
        <td>236.41</td>
      </tr>
    </tbody>

    <tbody>
      <!-- sortable rows -->
      <tr>
        ...
      </tr>
    </tbody>
    </table> 
    ```

    然后像这样初始化表：

    ```
    $(function() { 

      $("table").tablesorter({ 
        theme : 'blue', 
        cssInfoBlock : "avoid-sort", 
        widgets: [ 'zebra' ] 
      }); 

    }); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-08T09:03:40.027

在[Mottie 的 fork](https://mottie.github.io/tablesorter)中，[*staticRow*插件现在是内置的](https://mottie.github.io/tablesorter/docs/example-widget-static-row.html)：

```
<script src="/js/tablesorter/jquery.tablesorter.min.js"></script>
<script src="/js/tablesorter/widgets/widget-staticRow.min.js"></script>
<!-- … -->
<tr class="static">…&lt;/tr> 
```

```
$("table").tablesorter({
    widgets: ['staticRow']
}) 
```

或者，您可以设置自定义类名：

```
<tr class="tablesorter-static">…&lt;/tr> 
```

```
$("table").tablesorter({
    widgets: ['staticRow'],
    widgetOptions: {
        // Note it expects a CSS selector, not a raw class name
        staticRow_class: ".tablesorter-static"
    }
}) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-11-15T12:24:33.600

```
$(function() {     
$("#myTable").tablesorter({
        headers: {4: {sorter: false},8: {sorter: false}}
    });
}); 
```

这里 4,8 是列号。列以 0 开头

# c# - 分配懒惰 有一些 T 的例子

> ID：14231082
> 
> 赞同：0
> 
> 时间：2013-01-09T08:31:49.983
> 
> 标签：c#, mef, lazy-evaluation

使用 C# 4，您可以对 MEF 使用延迟初始化。请参阅[http://msdn.microsoft.com/en-us/library/dd986615.aspx](http://msdn.microsoft.com/en-us/library/dd986615.aspx)

```
// So I have this member, populated through MEF.
private Lazy<MyItem, ISomeInterface> item;
public Lazy<MyItem, ISomeInterface> Item
{
    get
    {
        return item;
    }
    set
    {
        item = value;
    }
} 
```

现在，如果我有一个`MyItem`想要分配给这个惰性成员变量的实例怎么办？这不起作用：

```
var myItem = new MyItem(); // Implements ISomeInterface
o.Item = myItem; // Cannot convert type... 
```

**更新：**我简化了我的样本有点太多了。这里的问题是我有惰性评估项目（来自`MEF`插件管理器）`Lazy<MyItem, ISomeInterface>`。有时这些项目已经实例化，它要求如下构造：

```
var item = new Lazy<MyItem, ISomeInterface>(obj); 
```

**但是**，这会导致`MissingMemberException`： *“延迟初始化的类型没有公共的、无参数的构造函数。”*

**问：**如何分配具有(that implements )`Lazy<T, U>`的实例的变量？`T``U`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:37:07.100

或者：

```
Item = new Lazy<Foo>
(
    ()=> 
    { 
        Foo fobj = new Foo() { ID = 99 }; 
        return fobj; 
    }
 ); 
```

[资源](http://sankarsan.wordpress.com/2009/10/04/laziness-in-c-4-0-lazyt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:35:27.900

我知道它叫做 Lazy 但你至少可以[阅读文档](http://msdn.microsoft.com/en-us/library/dd642331.aspx)！:)

```
o.Item = new Lazy<MyItem>(InitFunction); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:56:33.510

解决方案是使用使用的`ToLazy`方法`MEF`： [https ://mefcontrib.svn.codeplex.com/svn/trunk/src/MefContrib.Models.Provider/ComposableMember.cs](https://mefcontrib.svn.codeplex.com/svn/trunk/src/MefContrib.Models.Provider/ComposableMember.cs)

# xml - 在 XML 中使用字符映射

> ID：14231083
> 
> 赞同：1
> 
> 时间：2013-01-09T08:31:49.857
> 
> 标签：xml, xml-parsing, xsd

我正在尝试使用带有字符映射的 xsl 文档来替换我的 xml 文件中的某些特殊字符；这是xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <?xml-stylesheet href="lesson12.xsl" type="text/xsl"?>
    <!DOCTYPE Groceries>
    <Groceries xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    
     xsi:noNamespaceSchemaLocation="lesson12.xsd">
     <Item><Name>Wasabi &#38; Soy Sauce Almonds</Name></Item>
     <Item><Name>Peanut Butter &#38; Jelly Spread</Name></Item>
     <Item><Name>Pork &#38; Beans</Name></Item>
     <Item><Name>Coca Cola&#174;</Name></Item>
     <Item><Name>Sprite&#174;</Name></Item>
     <Item><Name>Dr. Pepper&#174;</Name></Item>
     </Groceries> 
```

这是我的架构：

```
 <?xml version="1.0"?>
     <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
     <xs:element name="Name" type="xs:token" />
     </xs:schema> 
```

这是我的 xsl：

```
 <?xml version="1.0"?>
     <xsl:stylesheet
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"
     version="2.0">

     <xsl:output method="html" use-character-maps="my_char_map" />

     <xsl:character-map name="my_char_map">
        <xsl:output-character character="&#38;" string="and"/>
        <xsl:output-character character="&#174;" string="TM"/>
     </xsl:character-map>

     <xsl:template match="/"> 

     <h3>Groceries</h3>
     <xsl:for-each select="/Groceries/Item/Name">
     <ul>
     <li>
     <xsl:value-of select="."/>
     </li>
     </ul>
     </xsl:for-each>

     </xsl:template>
     </xsl:stylesheet> 
```

我仍在学习 xml，不确定我的 xsl:output 是否需要更正，或者是否需要更正。

谢谢！交流电

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:36:56.540

除非您使用[Saxon CE](http://saxonica.com/html/ce/download.html)，否则您的浏览器只会处理不支持字符映射的 XSLT 1。

（而且，您的模式没有定义`<Groceries>`or `<Item>`，但这没关系，因为浏览器也不会查看它。但是模式感知模式下的 XSLT 2 解析器可能会抱怨......）

# javascript - 如何在内联javascript函数中转义引号

> ID：14231089
> 
> 赞同：2
> 
> 时间：2013-01-09T08:32:27.190
> 
> 标签：javascript, jquery

我的函数在不使用附加类的情况下运行完美，`div`但是当我尝试`class`在元素上添加 a 时，它不起作用。

```
<head>
    <script type="text/javascript">
        function showt(id){
            $('body').append(id)
        }
    </script>
</head>

<body>
    <a href="#" id="hidemain" onmouseover='showt("<div class='sdf'>appended</div>")'>show detail</a>
</body> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T08:33:59.940

在其他引号中使用时，只需转义引号。也只需在属性内使用相应的其他引号。因此，如果您将属性包含在`"`just use`'`和`\'`inside 和 vica verse 中。（感谢@nnnnnn 提到这一点！）

```
<a href="#" id="hidemain" onmouseover="showt('<div class=\'sdf\'>appended</div>')">show detail</a> 
```

或者

```
<a href="#" id="hidemain" onmouseover='showt("<div class=\"sdf\">appended</div>')">show detail</a> 
```

**编辑**

为了获取事件对象，您应该像这样以编程方式添加事件处理程序：

```
<a href="#" id="hidemain">show detail</a>
<script>
  document.getElementById( 'hidemain' ).addEventListener( 'click', function( event ) {
    showt( '<div class="sdf">appended</div>' );
    // here you have access to event and thus event.pageX
  });
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T08:36:30.237

`mouseover`由于您使用 jQuery 标记了您的问题，因此这里是使用处理程序而不是属性的 jQuery 版本`onmouseover`，它完全否定了引号的转义。

```
<head>
    <!-- include jquery.js here -->
    <script type="text/javascript">
        $(function() {
            $('#hidemain').mouseover(function() {
                showt('<div class="sdf">appended</div>');
            });
        });

        function showt(id){
            $('body').append(id)
        }
    </script>
</head>

<body>
    <a href="#" id="hidemain">show detail</a>
</body> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T08:38:30.987

如果你已经在使用 jQuery，你可以这样做：

```
$(function() {
    function showt(domElement){
        $('body').append(domElement)
    }

    $("#hidemain").mouseover(function() {
        showt($("<div />").addClass("sdf").text("test"));
    });
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T08:35:02.983

您需要使用以下命令转义嵌入的引号`\`：

```
<a href="#" id="hidemain" onmouseover='showt("<div class=\"sdf\">appended</div>")'>show detail</a> 
```

请注意，我还将内引号更改为双引号并将它们转义，因为如果外引号围绕 html 元素属性，则即使转义，使用相同类型的引号也可能不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T08:35:26.323

你可以试试这个：

```
onmouseover='showt("<div class=\'sdf\'>appended</div>")' 
```

这些引号需要转义`'\'`。

# android - Android：网格视图中的数据延迟出现

> ID：14231090
> 
> 赞同：0
> 
> 时间：2013-01-09T08:32:32.977
> 
> 标签：android, gridview, adapter

在我的应用程序中，我需要显示日历。由于 API 级别 11 可以使用日历视图，因此我使用了网格视图。 [基本上，我遵循了本教程](http://caughtinthemobileweb.wordpress.com/2011/06/20/how-to-implement-calendarview-in-android/)。日历正在工作，但日历中的数据延迟出现，这意味着当我单击按钮显示日历时，它会在大约 5-10 秒的延迟后出现。我什至通过禁用日志进行了测试，该日志已放入程序中，但没有任何区别。我在下面发布我的代码。

**日历适配器**

```
public class CalendarAdapter extends BaseAdapter //implements OnClickListener
{
static final int FIRST_DAY_OF_WEEK = 0; // Sunday = 0, Monday = 1

private Context mContext;

private Calendar month;
private Calendar selectedDate;

public String[] days;

TextView txtCurMonth;

public static final String TAG = "CalendarAdapter"; 

int curYear, curMonth;

public ArrayList<EventDetailDAO> mEventDAOList;

String date, dateToHighlight;

public static boolean calendarItemClicked = false;

ViewHolder holder;

public CalendarAdapter(Context c, Calendar monthCalendar, TextView txtCurMonth) 
{
    month = monthCalendar;
    selectedDate = (Calendar)monthCalendar.clone();
    mContext = c;
    month.set(Calendar.DAY_OF_MONTH, 1);
    new ArrayList<String>();
    this.txtCurMonth = txtCurMonth; 
    mEventDAOList = new ArrayList<EventDetailDAO>();
    curYear = selectedDate.get(Calendar.YEAR);
    curMonth = selectedDate.get(Calendar.MONTH) + 1;
    refreshDays();
}//Constructor

public void setItems(ArrayList<String> items) 
{
    for(int i = 0; i != items.size(); i++)
    {
        if(items.get(i).length() == 1) 
        {
            items.set(i, "0" + items.get(i));
        }//if
    }//for
}//setItems

public int getCount() 
{
    return days.length;
}//getCount

public Object getItem(int position) 
{
    return null;
}//getItem

public long getItemId(int position) 
{
    return 0;
}//getItemId

// create a new view for each item referenced by the Adapter
public View getView(final int position, View convertView, ViewGroup parent) 
{
    if (convertView == null) 
    {  
        holder = new ViewHolder();
        convertView = LayoutInflater.from(parent.getContext())
                       .inflate(R.layout.calendar_grid_adapter, null);
        holder.linCalAdapParent = (LinearLayout)convertView
                                    .findViewById(R.id.linCalAdapParent);
        holder.dayView = (TextView)convertView.findViewById(R.id.date);
        convertView.setTag(holder);
    }//if
    else
    {
        holder = (ViewHolder)convertView.getTag();
    }//else

    Typeface date_TF = Typeface.createFromAsset(mContext.getAssets(), "fonts/arial.ttf");
    txtCurMonth.setTypeface(date_TF);
    txtCurMonth.setText(DateFormat.format("MMMM yyyy", month.getTime()));
    holder.dayView.setTypeface(date_TF);
    holder.dayView.setText(days[position]);

    if(days[position].equals("")) 
    {
        holder.linCalAdapParent.setBackgroundResource(R.drawable.calendar_tile);
    }//if
    else
    {
        String monthToCheck = null;
        if(curMonth < 10)
        {
            monthToCheck = "0"+curMonth;
        }//if
        else
        {
            monthToCheck = Integer.toString(curMonth);
        }//else

        dateToHighlight = curYear+"-"+monthToCheck;
        Log.v(TAG, "date to highlight: "+dateToHighlight);

        if(isEnabled(position))
        {
            holder.linCalAdapParent.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {
                    Log.v(TAG, "CalendarAdapter mEventDAOList size: "+mEventDAOList.size());

                    String daysToMatch = days[position];

                    if(daysToMatch.length() == 1)
                    {
                        daysToMatch = "0"+daysToMatch;
                    }//if

                    Log.v(TAG, "CalendarAdapter day selected: "+daysToMatch);
                    ArrayList<EventDetailDAO> mSelectedEventDAOList 
                                                = new ArrayList<EventDetailDAO>();
                    for(int i = 0; i < mEventDAOList.size(); i++)
                    {
                        if(mEventDAOList.get(i).getEvent_Date().contains(daysToMatch))
                        {
                            mSelectedEventDAOList.add(mEventDAOList.get(i));
                            selectedDate.set(Calendar.YEAR, curYear);
                            selectedDate.set(Calendar.MONTH, curMonth - 1);
                            selectedDate.set(Calendar.DAY_OF_MONTH, Integer.parseInt(daysToMatch));
                        }//if
                    }//for

                    ((EventsActivity)mContext).getDataFromCalendar(mSelectedEventDAOList, selectedDate);
                    ((EventsActivity)mContext).calInstanceFromAdapter = selectedDate;
                    calendarItemClicked = true;
                }//onClick
            });
        }//if
    }//else
    Log.v(TAG, "Calendar adapter getView called");

    return convertView;
}//getView

public void refreshDays()
{
    // clear items
    //items.clear();

    int lastDay = month.getActualMaximum(Calendar.DAY_OF_MONTH);
    int firstDay = (int)month.get(Calendar.DAY_OF_WEEK);
    Log.v(TAG, "in refreshDays, lastDay: "+lastDay);
    Log.v(TAG, "in refreshDays, firstDay: "+firstDay);
    // figure size of the array
    if(firstDay == 1)
    {
        Log.v(TAG, "if first day 1");
        days = new String[lastDay + (FIRST_DAY_OF_WEEK * 6)];
    }//if
    else 
    {
        Log.v(TAG, "else first day not 1");
        days = new String[lastDay + firstDay - (FIRST_DAY_OF_WEEK + 1)];
    }//else

    int j=FIRST_DAY_OF_WEEK;

    // populate empty days before first real day
    if(firstDay > 1) 
    {
        Log.v(TAG, "if first day > 1");
        for(j = 0; j < firstDay - FIRST_DAY_OF_WEEK; j++) 
        {
            Log.v(TAG, "in for if first day > 1");
            days[j] = "";
        }//for
    }//if
    else 
    {
        Log.v(TAG, "else first day < 1");
        for(j = 0; j < FIRST_DAY_OF_WEEK * 6; j++) 
        {
            Log.v(TAG, "in for else first day < 1");
            days[j] = "";
        }//for
        j = FIRST_DAY_OF_WEEK * 6 + 1; // sunday => 1, monday => 7
    }//else

    // populate days
    int dayNumber = 1;
    for(int i = j - 1; i < days.length; i++) 
    {
        Log.v(TAG, "in for day number");
        days[i] = "" + dayNumber;
        dayNumber++;
    }//for
}//refreshDays

@Override
public boolean isEnabled(int position) 
{
    date = days[position];

    if(date.length() == 1) 
    {
        date = "0"+date;
    }//if

    dateToHighlight = dateToHighlight+"-"+date;
    for(EventDetailDAO mEventDetailDAO: GetEventDetailAsyncTask.mainEventDetailArrayList)
    {
        Log.v(TAG, "CalendarAdapter isEnabled dateToHighlight: "+dateToHighlight);
        if(mEventDetailDAO.getEvent_Date().equals(dateToHighlight))
        {
            mEventDAOList.add(mEventDetailDAO);
            holder.linCalAdapParent.setBackgroundResource(R.drawable.calendar_tile_sel);
            return true;
        }//if
    }//for
    return false;
}//isEnabled

class ViewHolder
{
    LinearLayout linCalAdapParent;
    TextView  dayView;
}//ViewHolder
}//CalendarAdapter 
```

在我的日历中，我必须突出显示有事件的日期。并且，单击突出显示的日期时，它将显示该日期的事件列表。每件事都在工作。即使我更改月份，日历也会延迟出现。我没有得到原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:48:35.547

延迟的可能原因之一可能是`Typeface.createFromAsset()`每个小区都调用的调用。该`createFromAsset()`方法消耗大量资源。

为了缓解这种情况，您可以创建一个保留使用的字体的单例类，因此不会每次都从字体文件生成字体。或者您在 onCreate() 中对其进行初始化并将其作为参数传递给`CalendarAdapter`构造函数，然后在`getView()`.

（为了测试这个假设，注释将字体设置为`txtCurMonth`TextView 的行，并查看是否有任何区别）

# c# - 在 winform 中安装和使用特定字体

> ID：14231091
> 
> 赞同：2
> 
> 时间：2013-01-09T08:32:35.787
> 
> 标签：c#, winforms, fonts, installation

我想在我的 winform 应用程序中使用特定字体。此字体将从我的应用程序资源自动安装在用户个人计算机中。

我怎样才能做到这一点？

我使用了一些来自用户个人计算机的代码。如果我使用它，则`font`必须先前保留在用户个人计算机中，但我不希望那样。

```
 System.Drawing.Text.PrivateFontCollection fontCollection = new     System.Drawing.Text.PrivateFontCollection();
         fontCollection.AddFontFile(@"C:\Windows\Fonts\SUTOM__.TTF");
         FontFamily family = new FontFamily("SutonnyMJ", fontCollection);
         Font font3of9 = new Font(family, 15);
         label1.Font = font3of9; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T08:55:05.567

**1.使用安装项目安装**

你可以从你的安装项目中安装字体来做到这一点，你必须

> 文件系统>在目标机器上的文件系统下右键单击>添加特殊文件夹字体文件夹

然后选择字体文件夹和`Add > File...` ![添加字体文件夹 SS](../Images/82ef6b14707defb81c3900f28c90a7f3.png)

**2\. 以编程方式安装字体**
要实现这一点，不幸的是，您必须进行一些外部调用。

```
[DllImport("gdi32.dll", EntryPoint="AddFontResourceW", SetLastError=true)]
public static extern int AddFontResource([In][MarshalAs(UnmanagedType.LPWStr)]
                                         string lpFileName); 
```

然后从你想要的任何地方调用它

```
AddFontResource(@"C:\FontLocation\MyFont.TTF"); 
```

# sql - SQL 性能替换

> ID：14231092
> 
> 赞同：0
> 
> 时间：2013-01-09T08:32:38.547
> 
> 标签：sql, sqlperformance

我有以下查询，我需要提高性能

```
DECLARE @number varchar(40) = '0800001001'
SELECT 
    Id 
FROM 
    Table1 
WHERE 
    (REPLACE(Phone1, ' ','') = @number)
OR (REPLACE(Phone2, ' ','') = @number) 
```

该表有 500k 行，目前这些列或全文没有索引。任何人都可以建议使用索引、clr 函数或其他方式改进此查询的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:39:02.413

为 创建计算列`REPLACE(Phone1, ' ','')`，`(REPLACE(Phone2, ' ','')`并为这些计算列创建索引。

# mysql - 为 mySQL 使用外部缓存

> ID：14231096
> 
> 赞同：0
> 
> 时间：2013-01-09T08:32:55.740
> 
> 标签：mysql

是否可以将 ehCache 或 memcache 等外部缓存提供程序添加到 mySQL 数据库。通过这样做，我希望可以提高 mySQL 的性能。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:37:53.797

据我所知，不是“添加到 MySQL”本身。例如，如果您愿意，您可以在*系统*中轻松使用 Memcache(d) ：不要粗鲁，但基本上只是“使用”它。

**现在**：
您有从数据库请求数据的代码。

**使用 Memcache**：
您有检查数据是否在缓存中的代码。如果不是，则从数据库中请求它并将其添加到缓存中，然后返回。

在这种情况下，您并没有将它添加到 MySQL 本身，但它确实可以帮助您获得更好的结果（当然，如果您做对了）。对于 sql 缓存，您拥有来自数据库本身的查询缓存，但这仅适用于特别相等（这是一个奇怪的术语）查询。

# c# - 在 C# 代码中为 C# 格式化正确的类名

> ID：14231104
> 
> 赞同：1
> 
> 时间：2013-01-09T08:33:18.227
> 
> 标签：c#, string

我正在用 C# 生成 C# 代码，我想将字符串格式化为正确的 C# 类。有没有图书馆可以做到这一点？我需要替换禁用字符、PascalCase 字符串（在“_”之间）等。

我将参数“ClassName”传递给 T4 模板，我想将该参数转换为正确的 C# 类名。

前任。

鉴于：

```
ClassName = "This_is_MY_CLASS Name" 
```

然后：我想得到

```
ProperClassName = "This_Is_My_Class_Name" // or "This_Is_My_Classname", both would be acceptable. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:53:58.183

你可以使用这个`TextInfo`类

```
string className = "This_is_MY_CLASS Name";

string newName = new CultureInfo(CultureInfo.CurrentCulture.LCID, false).TextInfo.ToTitleCase(className .ToLower()).Replace(" ","_"); 
```

返回：`"This_Is_My_Class_Name"`

如果你想删除大多数非法字符，你可以做这样的事情

```
 string className = "This_is_MY_CLASS Name/with<silly|chars";
    var invalid = System.IO.Path.GetInvalidFileNameChars().Concat(new char[]{' '});

    string newName = new string( new CultureInfo(CultureInfo.CurrentCulture.LCID, false)
        .TextInfo.ToTitleCase(className.ToLower())
        .Select(s => invalid.Contains(s) ? '_' : s).ToArray());

   // returns: "This_Is_My_Class_Name_With_Silly_Chars" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:51:01.480

也许该[`ToTitleCase`](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase.aspx)方法会为您完成一些工作，但是要删除非法字符和其他内容，您必须自己编写一些东西。在 .net 框架内，没有什么是开箱即用的。

# excel - Excel：计算日期范围内的月数，但仅适用于特定年份

> ID：14231105
> 
> 赞同：0
> 
> 时间：2013-01-09T08:33:19.097
> 
> 标签：excel

我的工作表看起来像这样（示例数据）

“费率”“开始”“结束”
“1 美元”“01.01.2011”“01.01.2015”
“2 美元”“01.06.2012”“01.08.2013”

我想计算属于特定年份（2012、2013、2014）的日期范围的月数以估计数量（= 月*率）例如在第二行中，我将获得 2012 年的 6 个月（=12$ ）和 2013 年的 7 个月（=14 美元）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:43:45.977

假设您在 A1:C3 中有数据，然后在标题行中列出年份，例如 D1 = 2012, E1 = 2013, F1 = 2014 然后在 D2 中使用以下公式：

`=IFERROR(DATEDIF(MAX($B2,DATE(D$1,1,1)),MIN($C2,DATE(D$1+1,1,1)),"m"),0)*$A2`

格式为货币并上下复制

假设您使用的是 Excel 2007 或更高版本，并且 B 列和 C 列包含有效日期。在早期的 Excel 版本中，您可以使用此替代公式

`=LOOKUP(99^99,IF({1,0},0,DATEDIF(MAX($B2,DATE(D$1,1,1)),MIN($C2,DATE(D$1+1,1,1)),"m")*$A2))`

# xcode - 无法从存储库中提取 svn

> ID：14231110
> 
> 赞同：0
> 
> 时间：2013-01-09T08:33:43.747
> 
> 标签：xcode, svn, repository, pull

我想使用 Xcode 从可视 svn 存储库中提取更改，但是会打开一个窗口“选择要提取的工作副本。”，但除了工作副本之外，它还写入了未提交的更改。我在想要从存储库中提取更改之前提交了更改，我真的不明白为什么它不起作用。

# django - 如何从数据库中删除大量对象

> ID：14231116
> 
> 赞同：2
> 
> 时间：2013-01-09T08:34:17.623
> 
> 标签：django, django-models

我试图通过执行一次删除超过 20,000,000 个对象：

```
MyModel.objects.filter(some_field__lt=100).delete() 
```

但我不能，因为没有足够的内存（1GB VPS）。这是不好的方法还是什么？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:05:16.330

在这种情况下，我认为最好使用原始 sql 查询[https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)

```
cursor.execute("DELETE FROM mymodel WHERE some_field < %s", [value]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:43:51.697

尝试限制正在选择的内容`MyModel.objects.filter(some_field__lt=100).only('id').delete()`

或者如果需要获取查询并在 django 之外执行查询 `MyModel.objects.filter(some_field__lt=100).query`

# javascript - WinJS Promise 然后出错

> ID：14231118
> 
> 赞同：3
> 
> 时间：2013-01-09T08:34:41.910
> 
> 标签：javascript, windows-8, windows-runtime, winjs

经过一些实验，我最终得到了以下代码，尝试复制 C# await 功能：

```
var promise = new WinJS.Promise(MyFunc())
    .then(function () {
        // Second function which uses data set-up in the first
        MyFunc2();
    }); 
```

'MyFunc()' 正确执行，但 'MyFunc2()' 没有，程序崩溃。我对 Promise 对象有什么误解？

（这是使用 Windows 8）

编辑：

MyFunc() 的完整代码现在如下：

```
function MyFunc() {
    var foldername = "Folder";
    var filename = "readme.xml";

    var promise = Windows.ApplicationModel.Package.current.installedLocation.getFolderAsync(foldername).then(function (folder) {
        folder.getFileAsync(filename).then(function (file) {
            var loadSettings = new Windows.Data.Xml.Dom.XmlLoadSettings;
            loadSettings.prohibitDtd = false;
            loadSettings.resolveExternals = false;
            Windows.Data.Xml.Dom.XmlDocument.loadFromFileAsync(file, loadSettings).then(function (doc) {
                dataText = doc.getXml();
                xmlDoc = doc;
            }, function (error) {
                output.value = "Error: Unable to load XML file";
                output.style.color = "red";
            }, function (error) {
                output.value = "Error: Unable to load XML file";
                output.style.color = "red";
            })
        })
    });

    return promise;
}; 
```

现在的结果是 'MyFunc2()' 在 'MyFunc()' 完成之前执行。`MyFunc2() 使用全局变量 xmlDoc，因此当时未定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:14:32.550

您应该将所有承诺链接在一起，然后等待最终的承诺。

```
function MyFunc() {
    var promise = Windows.ApplicationModel.Package.current.installedLocation.getFolderAsync(foldername).then(function (folder) {
        return folder.getFileAsync(filename);
        }).done(function (file) {
            var loadSettings = new Windows.Data.Xml.Dom.XmlLoadSettings;
            loadSettings.prohibitDtd = false;
            loadSettings.resolveExternals = false;
            return Windows.Data.Xml.Dom.XmlDocument.loadFromFileAsync(file, loadSettings);
        }).then(function (doc) {
            dataText = doc.getXml();
            xmlDoc = doc;
            return doc; // whatever the result is
        }, function (error) {
            output.value = "Error: Unable to load XML file";
            output.style.color = "red";
        });
    return promise;
} 
```

然后你可以链接返回的承诺`MyFunc`：

```
var promise = MyFunc().then(function(doc) { MyFunc2(...); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:54:49.047

好吧，鉴于编辑，您将不得不使用稍微不同的方法。您需要让 MyFunc() 实际上返回您正在创建的承诺变量。这将允许您链接`MyFunc`到`MyFunc2`. 所以你会做这样的事情：

```
var promise = Windows.ApplicationModel.Package.current.installedLocation.getFolderAsync(foldername).then(function (folder) {
        folder.getFileAsync(filename).done(function (file) {
            var loadSettings = new Windows.Data.Xml.Dom.XmlLoadSettings;
            loadSettings.prohibitDtd = false;
            loadSettings.resolveExternals = false;
            Windows.Data.Xml.Dom.XmlDocument.loadFromFileAsync(file, loadSettings).then(function (doc) {
                dataText = doc.getXml();
                xmlDoc = doc;
            }, function (error) {
                output.value = "Error: Unable to load XML file";
                output.style.color = "red";
            });
...
return promise; 
```

假设这是`MyFunc()`. 如果没有，您可以将所有 Promise 链接在一起，或者将它们全部放在一个数组中并返回，例如`WinJS.Promise.join(promiseArray)`.

现在您从 MyFunc() 返回了一个 Promise，您可以使用`then`它来链接它。

```
var promise = MyFunc().then(function () {
    // Second function which uses data set-up in the first
    MyFunc2();
}); 
```

如果`MyFunc2`还包含异步代码，您也可以返回这些承诺，并根据需要保持链接。

```
var promise = MyFunc().then(function () {
    // Second function which uses data set-up in the first
    return MyFunc2();
}).then(function () {
    //And on and on...
}); 
```

# sql-server - 日期时间与 bigint

> ID：14231119
> 
> 赞同：1
> 
> 时间：2013-01-09T08:34:47.243
> 
> 标签：sql-server, tsql

我有几个必须根据开始和停止日期连接的表，例如......

```
SELECT    * 
FROM      [t1] 
JOIN      [t2] 
   ON [t2].[start] BETWEEN [t1].[start] AND [t1].[stop] 
   OR [t2].[stop]  BETWEEN [t1].[start] AND [t1].[stop]
   OR [t2].[start] < [t1].[start] and [t2].[stop] > [t1].[stop] 
```

这些表可能有数百万行。

我可以选择将开始/停止存储为 datetime2 和/或 bigint（自纪元以来的纳秒）。鉴于此选项 - 如果索引，使用 bigint 是否会提高性能？

任何一种方法的优点/缺点？

我希望整数方法更快 -

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T05:33:51.567

使用`datetime2`. 除了“更容易被人阅读”之外，更容易被人*编程*。如果您不使用日期类型来表示日期，那么在计算间隔、加入其他表、与外部时间（例如`getdate()`.

就效率而言，为了比较，服务器几乎可以肯定地将所有日期类型视为整数。可能对您开放的唯一速度优势，取决于您是否通常关心秒数，将集群在 上`smalldatetime`，因为它是 4 个字节。您仍然可以将高分辨率部分作为单独的`real`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:50:15.750

只要您使用`datetime2`type 可能就没有区别，因为两种类型的大小相似（`datetime2`-- 6 到 8 字节，`bigint`-- 8 字节）。

我假设 IO 成本将是唯一的瓶颈，因此这取决于您比较的记录数（要读取的记录）以及索引如何存储`datetime2`类型。

我会在你的情况下测试和比较这两个选项，并选择更好的一个，记住它`datetime`更容易被人类阅读。

# firebase - 对有序 Firebase 数据的多个视图

> ID：14231135
> 
> 赞同：1
> 
> 时间：2013-01-09T08:35:53.500
> 
> 标签：firebase

我的应用程序从多个来源收集照片，其中每张照片（url）都使用发布图像时的时间戳作为优先级添加到 Firebase 结构中：

```
var data = {
   createdAt: new Date(2012, 11, 21).getTime(),
   url: 'http://placekitten.com/320/240',
   likes: 0
}

var images = new Firebase('myapp.firebaseio.com/images')
images.child(createdAt).setWithPriority(data, data.createdAt) 
```

下一个任务是能够按时间顺序或受欢迎程度（*喜欢*）显示图像列表。

[`child_added`](https://www.firebase.com/docs/ordered-data.html)使用事件以及按时间顺序列出和分页它们是相当简单的[`startAt`](https://www.firebase.com/docs/javascript/query/startat.html)，[`limit`](https://www.firebase.com/docs/javascript/query/limit.html)但是我不确定在按受欢迎程度查看它们时应该如何构造和查询我的数据。

我想到了一些方法，但它们都很粗糙：

*   获取每张图片并在客户端进行排序和分页（最多有一千张图片）
*   *创建另一个 Firebase 数据结构，该结构按受欢迎程度（如 count* ）进行优先级排序，并将实际数据的值作为引用指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:54:35.797

你已经达到了我会选择的两个答案。最多有一千个，我认为您将节省时间和精力，只需在客户端上执行此操作。

想到的另一种蛮力方法是，如果您需要在服务器上完成它们并且不想复制数据，则创建索引。这作为 SQL 索引效率不高，但它仍然可行，我将把它扔在这里以产生想法。

本质上，您将拥有照片表：

```
/photos/$photo_id/  (prioritized by create data) 
```

然后是一个索引：

```
/photos_indexed_by_likes/$photo_id  (prioritized by likes 
```

这样，您可以执行以下操作：

```
FB.child('photos_indexed_by_likes').endAt().limit(10).on('child_added', function(snapshot) {
    // the snapshot contains the id of a photo, so we fetch it here
    FB.child('photos/'+snapshot.val()).once('value', function(ss) {
        addPresortedPhotoToList( ss.val() );
    });
}); 
```

通过仅实现您将在此页面上显示的记录，这是可行的。它确实会单独请求每张照片，但可能没什么大不了的，除非您为 twitter 大小的观众服务:)

这总是一个权衡。在这种情况下，您可以用存储空间换取带宽：）

*更新*

顺便说一句，我认为您不需要为创建数据添加排序优先级。这些值自然地按创建时间排序。

# c# - 使用实体框架时业务逻辑层中的数据对象

> ID：14231139
> 
> 赞同：1
> 
> 时间：2013-01-09T08:36:06.913
> 
> 标签：c#, sql-server, entity-framework, n-tier-architecture

使用 Entity Framework 时是否需要编写表示数据库表的类？例如，我有以下表格：Account、Customer、Order、... 除了以下对象集之外，Entity Framework 还将为我提供 Account、Customer、Order 对象：Accounts、Orders、Customers .. 等。现在我要是否需要包装这些对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:51:06.577

EF 生成表实体的对象表示。但它与域对象不同。

应用程序应该使用域对象，而不是 EF 对象。

我认为编写具体的域类是个好主意。但是是复杂的方式，在某些情况下它增加了不必要的复杂层。

另一种方法是使用 EF CodeFirst，例如[http://msdn.microsoft.com/en-us/data/hh134698](http://msdn.microsoft.com/en-us/data/hh134698)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:38:46.580

在不知道您的要求的情况下，我可能会简单地说“不”。EF 生成所有域对象，并用对象集表示您的表。

# system.reactive - 如何在服务器端取消订阅观察者

> ID：14231140
> 
> 赞同：1
> 
> 时间：2013-01-09T08:36:10.193
> 
> 标签：system.reactive, .net-remoting

我有一个应用程序，它通过与一台服务器（可观察的）和许多客户端（观察者）进行远程处理来使用 RX。我的问题是，当客户端（观察者）在不执行 ubsubscribe(dispose) 的情况下无法正确断开连接时，服务器上的 OnNext() 函数开始引发远程处理异常。

是否有任何机制可以取消订阅服务器端有问题的观察者？

客户端代码部分：

```
internal void SetRemoting(bool refreshInstance)
{
    string channelName = "RemotingClientUI";
    IDictionary dict = new Hashtable();
    dict["port"] = 9988;
    dict["name"] = channelName;

    var bcp = new BinaryClientFormatterSinkProvider();
    var channel = new TcpClientChannel(dict, bcp);
    ChannelServices.RegisterChannel(channel, false);

    _remoteServer = (IRemoteServerService) Activator.
        GetObject(typeof (IRemoteServerService),
            tcp://...");
}

private void SubscribeToRemoteEvents(bool unSubscrubeFirst)
{            
    _jobRowUpdate = _remoteServer.JobRowUpdate.Subscribe(UpdateJobQueueRow);
    _packageRowUpdate = _remoteServer.PackageRowUpdate.   
        Subscribe(UpdatePackageQueueRow);
    _miscUpdate = _remoteServer.MiscAction.Subscribe(MiscRemoteActions);
} 
```

服务器代码部分：

```
public class RemoteServiceService
{
    public RemoteServiceService()
    {
        JobRowUpdate = LoggerFactory.GetLogger(
            LoggerType.RemoteService, this).JobRowUpdate.Remotable();
        PackageRowUpdate = LoggerFactory.GetLogger(
            LoggerType.RemoteService, this).PackageRowUpdate.Remotable();
        MiscAction = LoggerFactory.GetLogger(
            LoggerType.RemoteService, this).MiscActions.Remotable();
    }
}

public class RemoteLoggerForService
{
    private RemoteLoggerForService(IService service)
    {
        _jobRowUpdate = new Subject<IJobQueueRow>();
        _packageRowUpdate = new Subject<IPackageQueueRow>();
        _miscActions = new Subject<MiscRemoteObjects>();
        _service = service;
    }

    #region Overrides of LoggerBase

    public override void WriteToLog<T>(T stringFormatOrObject, 
        params object[] args)
    {
        lock (this)
        try
        {
            lock (LockLogger)
            {
                if (stringFormatOrObject is IJobQueueRow && 
                    _jobRowUpdate != null)
                {
                    _jobRowUpdate.OnNext(
                        stringFormatOrObject as IJobQueueRow);
                }

                if (stringFormatOrObject is IPackageQueueRow && 
                    _packageRowUpdate != null)
                {
                    _packageRowUpdate.OnNext(
                        stringFormatOrObject as IPackageQueueRow);
                }

                if (stringFormatOrObject is MiscRemoteObjects && 
                    _miscActions != null)
                {
                    _miscActions.OnNext(
                        stringFormatOrObject as MiscRemoteObjects);
                }
            }
        }
        catch(Exception ex)
        {
            LoggerFactory.GetLogger(LoggerType.File, null).
                WriteToLog(
                    Utils.GetFullException("RemoteLoggerForService", ex));
        }
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T13:48:59.960

我认为您正在尝试做的是吞下异常并让您的服务器继续运行。您可以通过捕获异常来做到这一点（就像您在此处所做的那样），然后您可以将其传递给`OnError`相关 Observable 的方法，以便订阅者可以选择如何做出反应。

# javascript - HTML5 小部件表面

> ID：14231141
> 
> 赞同：2
> 
> 时间：2013-01-09T08:36:24.563
> 
> 标签：javascript, asp.net-mvc, html, css, web-applications

我计划创建一个基于 HTML5 的仪表板应用程序，允许将元素（图表、图形等）放置在特定位置和不同大小的表面上，将布局保存在 XML 结构中并稍后加载。

因此，我正在寻找类似于 Android-desktop 或 WPF-Grid 的表面来进行布局，但需要某种 HTML5 实现。这意味着表面应该提供可以放置元素的表格布局。元素捕捉表格的网格，并且可以通过使用行跨度或列跨度来调整大小。对于网格，应该可以定义有多少行和列可用。行和列应均匀分布在表面上，并应随其大小缩放。

我对 Web 开发有点陌生，并且坚持这个要求无法找到一些合适的解决方案。我正在使用 asp.net mvc 4。我发现像这样的解决方案仪表板：[http:](http://www.dynamicdashboards.net/) //www.dynamicdashboards.net/ ..但它感觉很重。

你们已经解决了类似的问题吗？您对如何使用 HTML5 技术实现这样的要求有一些建议吗？

我感谢有关如何解决此问题的每一个提示或链接！

# ontology - 支持节点间加权关系的本体管理程序

> ID：14231145
> 
> 赞同：0
> 
> 时间：2013-01-09T08:36:37.743
> 
> 标签：ontology, relation, protege, weighted

我正在寻找可以处理“双向关系”的本体管理服务

例如，假设有节点“Tiger”和“Lion”

我们要描述节点之间的定量关系：
即） Similar("Tiger", "Lion") = 0.5

我搜索了 Protege 本体系统。
但是本体系统不支持这种加权关系

是否有任何程序可以支持描述这种关系？

或者有什么办法可以处理与Protege的这些关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:17:33.597

据我所知，此类任务没有通用工具。

我目前正在开发一个 python 模块，如果你有一个实例数据库和一个本体，它可以计算标签之间的相似性度量。如果您有具体要求，请在下方评论。

# python - 如何在 Python 中授予对 google appengine 页面的访问权限？

> ID：14231150
> 
> 赞同：0
> 
> 时间：2013-01-09T08:36:46.663
> 
> 标签：python, google-app-engine

我有一个提供页面的简单应用程序，我希望这个页面只能由已经登录 Google 的几个预定用户访问。事实上，我只想通过 Google 电子表格中的 importHTML 功能进行访问。

如何以最小的麻烦实现这一点？这是应用程序：

```
import webapp2

class MainPage(webapp2.RequestHandler):
  def get(self):
    self.response.out.write('/Statement.htm')

app = webapp2.WSGIApplication([('/Statement.htm', MainPage)],
                              debug=True) 
```

这是 app.yaml

```
application: *********
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  static_files: Statement.htm
  upload: Statement.htm 
```

我在教程中看到了这个：

```
from google.appengine.api import users

class MainPage(webapp2.RequestHandler):

        user = users.get_current_user() 
```

但是这个“get_current_user”是谁？我不想要任何登录信息，我只希望它是某种 Google ID，我可以使用 if/else 检查它并在它与一两个允许的名称不匹配时提供错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:53:20.680

您应该从您的谷歌应用引擎仪表板授予他们管理员权限 - 在管理 -> 权限下 - 并添加到您的 app.yaml 文件中：

**编辑：**

这是一种使用 jinja2 模板系统的方法。

app.yaml 文件：

```
application: statement
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /statement
  script: statement.app
  login: admin

libraries:
- name: jinja2
  version: latest 
```

statement.py 文件：

```
import webapp2
import jinja2
import os

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class Statement(webapp2.RequestHandler):
    def get(self):
        template = jinja_environment.get_template('Statement.htm')
        self.response.out.write(template.render())

app = webapp2.WSGIApplication([('/statement', Statement)],
                              debug=True) 
```

Statement.htm 文件：

`You must have been granted admin permission.`

当你去那里时，`http://127.0.0.1:8080/statement`你必须以管理员身份登录才能到达那里。这三个文件都在同一个目录中。如果您的 python 主文件有其他名称，您应该`.app`在 app.yaml 文件中使用该名称和扩展名：

`script: your-python-file-name.app`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:02:33.477

由于 importHTML 函数似乎没有提供任何类型的授权，我只是将 url 处理程序更改为一个非常长的随机数字符串（实际上密码短语编码为 SHA1）。

对于上面基于 jinja 的解决方案，我在 app.yaml 中添加了一个处理程序，如下所示

```
- url: /a...................6/.*
  script: spreadsheet.app 
```

电子表格.app 指向一个与 statement.py 相同的电子表格.py，除了 webapp2 调用中的不同 url 字符串和一个新的类名。

现在通过浏览器访问的人需要被授权为管理员，而长链接仅存在于谷歌电子表格文档的单元格内，因此不会留在浏览器历史记录或任何地方。

我希望它也不会被谷歌索引，也不会出现在搜索结果中。

也许不是完美的解决方案，而是一个可行的解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:52:10.940

将“登录：管理员”放入您的 app.yaml 并将这些用户作为查看器添加到应用程序。请参阅[https://developers.google.com/appengine/docs/python/config/appconfig#Requiring_Login_or_Administrator_Status](https://developers.google.com/appengine/docs/python/config/appconfig#Requiring_Login_or_Administrator_Status)。

# html - 2套单选按钮形式

> ID：14231152
> 
> 赞同：0
> 
> 时间：2013-01-09T08:36:53.237
> 
> 标签：html, radio-button, forms

在我的表格中，两组单选按钮用于奖励和残障检查。当我单击单选按钮时，它将检查并将值输入数据库。这个肌肉还可以。但问题是，在显示形式中它没有显示点击的那个。所有都是未经检查的形式。

这是我的代码：

```
<tr>
      <td width="418" align="left" nowrap="nowrap"><?php echo "Handicap : $Handicap ---- Award : $Award <br>"; ?> Are you physically challenged?</td><td>Yes:<input type="radio" name="C135_Handicap" id="C135_Handicap_y" value="Y" <?php if(isset($Handicap)){$status=(htmlentities($Handicap, ENT_COMPAT, 'utf-8')=='Y')?'checked':'unchecked';echo $status;}?>  />  
        No:
          <input type="radio" name="C135_Handicap" id="C135_Handicap_n" value="N"  <?php if(isset($Handicap)){$status=(htmlentities($Handicap, ENT_COMPAT, 'utf-8')=='N')?'checked':'unchecked';echo $status;}?> /></td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="left"><p>Have you received any State/District level awards </p>
        <p>or Other Recognition:</p></td>
      <td width="393">Yes:<input type="radio" id="C135_Award_y" name="C135_Award" value="Y"  <?php if(isset($Award)){$status=(htmlentities($Award, ENT_COMPAT, 'utf-8')=='Y')?'checked':'unchecked';echo $status;}?>/> 
        No:
        <input type="radio" name="C135_Award" id="C135_Award_n"  value="N" <?php if(isset($Award)) $status=(htmlentities($Award, ENT_COMPAT, 'utf-8')=='N')?'checked':'unchecked';echo $status; ?> /></td>
</tr> 
```

# javascript - DIV 只是在回发时出现

> ID：14231154
> 
> 赞同：-2
> 
> 时间：2013-01-09T08:37:03.283
> 
> 标签：javascript, asp.net, vb.net

当我在客户端隐藏 DIV 标记然后单击提交以将数据回发到服务器端时出现问题。之后，DIV 刚刚出现。如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:44:29.633

这是一些试图描述您应该做什么的基础知识：

您必须将一些数据发送到服务器端，例如通过使用隐藏字段，并在服务器端（在代码后面）回发检查该数据。如果数据存在`panel.Visible = false`（如果 div 是一个名为 panel 的组件）。

如果你不做这样的事情，页面只会像在 aspx 文件中一样输出。在页面最后一次发送到浏览器之后，该页面没有任何 div 隐藏在浏览器中的概念。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:45:04.557

我使用脚本管理器来隐藏 div 这是我的代码

```
 Dim javastr As String = "$('#detail_div').hide();alert('New data is added successfully');"
    ScriptManager.RegisterClientScriptBlock(Page, Me.GetType(), "persistence", javastr, True) 
```

感谢大家和每一条评论。是时候学习MVC了。

# tridion - 如何在取消发布 Tridion 页面时使用 Hibernate 从表中获取主键 ID 以更新表

> ID：14231157
> 
> 赞同：0
> 
> 时间：2013-01-09T08:37:16.570
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension, tridion-deploy-extension

我已经成功地使用我的自定义部署程序填充了我的存储扩展表，现在我可以看到如果用户发布任何页面，我的记录就会完美无缺。

现在我要处理Unpublishing部分，所以我写了Custom page undeployer，请看下面的示例代码：

```
@SuppressWarnings({ "rawtypes" })
public void process(TransportPackage data) throws ProcessingException 
{
    ProcessorInstructions instructions = data.getProcessorInstructions();       

    try 
    {
        for (Iterator iterator = instructions.getArguments(); iterator.hasNext(); ) 
        {
            Object argument = iterator.next();
            if (argument instanceof PageKey) 
            {
              PageKey pageKey = (PageKey)argument;
              TCDURI pageMetaURI = new TCDURI(pageKey.getId().getPublicationId(), 1168231104576L, pageKey.getId().getItemId());
              PageMeta pageMeta = this.pageMetaHome.findByPrimaryKey(pageMetaURI.getPublicationId(), 
                (int)pageMetaURI.getItemId());
              if (pageMeta == null)
              {
                  DeploymentHandler.undeploy(pageMetaURI);
              }
              else
              {
                  PublishAction publishAction = new PublishAction();
                  publishAction.setAction("DEL");
                  long id = publishAction.getId();
                  PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
                  publishAction = publishActionDAO.findByPrimaryKey(id);
                  if (publishAction == null) 
                  {
                      log.debug("FindByPrimaryKey: cannot retrieve object with primary key:" + id);
                  }
                  else
                  {
                      publishAction = publishActionDAO.update(publishAction);
                      log.debug("SearchPageUndeployer Updated bean -" + publishAction);                      
                  }
              }
            }
        }
    }
    catch (Exception e) 
    {
        throw new ProcessingException("SearchPageUndeployer: Could not undeploy page", e);
    }
    super.process(data);
} 
```

在上面的代码中，您可以看到我正在尝试更新我的新存储扩展“PublishAction”，但是当我尝试从要修改的记录的表中获取 ID 时，我总是将 ID 设为 0，因为我不是能够从表中获取 ID。

请建议在我的 DAO 中需要实现什么来从表中获取需要更新的记录的 ID。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:28:58.237

您可以在您的 DAO 中创建一个方法，例如`findByTCMURI`根据页面 tcm uri 搜索您的发布操作。代码将是这样的：

```
public PublishAction findByTCMURI(String tcmURI) throws StorageException {
    StringBuilder queryBuilder = new StringBuilder();
    queryBuilder.append("from PublishAction pa where pa.tcmuri = :tcmuri");

    Map<String, Object> queryParams = new HashMap<String, Object>();
    queryParams.put("tcmuri", tcmURI);

    return executeQuerySingleResult(queryBuilder.toString(), queryParams);
} 
```

应该做的伎俩。希望这可以帮助。

# mysql - CodeIgniter 中“on 子句”中的未知列“”

> ID：14231162
> 
> 赞同：1
> 
> 时间：2013-01-09T08:37:34.217
> 
> 标签：mysql, codeigniter, activerecord, join

我正在尝试使用 CodeIgniter activercord 类进行连接查询，如下所示：

```
$query = $this->db->select('accredited_majors, all_majors_accredited, accredited')
                    ->select('universities.name, universities.slug')
                    ->from('accreditations')
                    ->join('universities', 'universities.id = '.$uni_id)
                    ->where('accreditations.university_id', $uni_id)
                    ->where('accreditations.country', $country)
                    ->get(); 
```

但我收到这个错误：

```
A Database Error Occurred
Error Number: 1054

Unknown column '820' in 'on clause'

SELECT `accredited_majors`, `all_majors_accredited`, `accredited`, `default_universities`.`name`, `default_universities`.`slug` FROM (`default_accreditations`) JOIN `default_universities` ON `default_universities`.`id` = `820` WHERE `default_accreditations`.`university_id` = '820' AND `default_accreditations`.`country` = 'AE' 
```

我相信错误出现在 join() 行中：

```
->join('universities', 'universities.id = '.$uni_id) 
```

如何在 join() 函数中包含变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:46:18.870

在您的代码中，您有 2 个 WHERE 子句而没有`ON`，并且您的连接在 on 子句中是错误的。

尝试这个

```
 $query = $this->db->select('accredited_majors, all_majors_accredited, accredited')
                ->select('universities.name, universities.slug')
                ->from('accreditations')
                ->join('universities', 'universities.id = accreditations.university_id')
                ->where('accreditations.university_id', $uni_id)
                ->where('accreditations.country', $country)
                ->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:54:47.910

尝试这个

```
$query = $this->db->select('accredited_majors, all_majors_accredited, accredited')
                    ->select('universities.name, universities.slug')
                    ->from('accreditations')
                    ->join('universities', "universities.id = accreditations.$uni_id" , 'left')
                    ->where('accreditations.university_id', $uni_id)
                    ->where('accreditations.country', $country)
                    ->get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:24:13.480

尝试这个

```
$this->db->select('accredited_majors, all_majors_accredited, accredited')
->select('universities.name, universities.slug')
->from('accreditations')
->join('universities', 'universities.id = accreditations.university_id', 'left')
->where('accreditations.university_id', $uni_id)
->where('accreditations.country', $country)
->group_by('accreditations.university_id')
->get(); 
```

# asp.net-mvc-3 - 在 LINQ 查询中调用方法

> ID：14231163
> 
> 赞同：5
> 
> 时间：2013-01-09T08:37:38.113
> 
> 标签：asp.net-mvc-3, linq, c#-4.0

我有一个带有自定义模型的 LINQ 查询。我只是想使用一种方法来为模型属性赋值。但是当我尝试使用自定义模型时，它会抛出一些这样的错误消息：

> LINQ to Entities 无法识别方法 'System.String GetPONo(Ent, System.String)' 方法，并且此方法无法转换为存储表达式。

**代码**

```
var model = (from p in db.PoDetails
             select new porders
             {
                 Category = p.Category,
                 PONO = GetPONo(p, p.Category),
              }).ToList(); 
```

**方法**

```
public string GetPONo(PoDetail p, string ASD)
{
    if (ASD == "B")
    {
        var PoNo = (from pord in db.Porders where pord.Id == p.PoId select pord.No).FirstOrDefault();
        return PoNo;
    }
    else
    {
        var PoNo = (from porder in db.Porders
                    where porder.Id == (from rec in db.RecommendResources where rec.Id == p.BibId select rec.PoId).FirstOrDefault()
                    select porder.No).FirstOrDefault();
        return PoNo;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T08:51:04.870

这是因为 LINQ to Entities 在后台被转换为 SQL。当然`GetPONo(p, p.Category)`，SQL 中没有方法，因此您的代码将失败。您可以通过调用`ToList()`强制查询在您的`select`.

```
var model = (from p in db.PoDetails select p).ToList();
model = from m in model
        select new porders
        {
            Category = m.Category,
            PONO = GetPONo(m, m.Category)
        }; 
```

您可以在[此处查看我对类似问题的回答](https://stackoverflow.com/questions/14189049/linq-getting-calendar-events-that-have-start-and-length-properties/14189089#14189089)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:46:14.373

您可以根据类别值使用三元运算符对 PONO 执行不同的子查询

```
var model = (from p in db.PoDetails
             select new porders
             {
                 Category = p.Category,
                 PONO = p.Category == "B" ?
                        (from pord in db.Porders 
                         where pord.Id == p.PoId 
                         select pord.No).FirstOrDefault() :
                        (from porder in db.Porders
                         where porder.Id == (from rec in db.RecommendResources 
                                             where rec.Id == p.BibId 
                                             select rec.PoId).FirstOrDefault()
                         select porder.No).FirstOrDefault()
             }).ToList(); 
```

您也可以为此创建存储过程。

# spring-aop - Spring AOP Poincut 表达式

> ID：14231166
> 
> 赞同：0
> 
> 时间：2013-01-09T08:37:40.960
> 
> 标签：spring-aop

我想创建一个切入点表达式来拦截对包 com.xmy.package 及其子包中所有类的所有方法调用。我的 xml，代码如下所示

```
<aop:config>
    <aop:pointcut id="allCalls" expression="within(com.xmy.package..*)" />
    <aop:aspect ref="loggingService">
        <aop:around method="logMethodFlow" pointcut-ref="allCalls" />
    </aop:aspect>
</aop:config> 
```

> 引起：org.springframework.aop.framework.AopConfigException：无法生成类的CGLIB子类...... .. . . . . .Caused by: java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments are given at net.sf.cglib.proxy.Enhancer.emitConstructors(Enhancer.java:721) at net.sf.cglib.proxy.Enhancer。 generateClass(Enhancer.java:499) 在 net.sf.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33) 在 net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25) 在 net.sf .cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216) 在 net.sf.cglib.proxy.Enhancer.createHelper(Enhancer.java:377) 在 net.sf.cglib.proxy.Enhancer.create(Enhancer.java ：

但是当我对特定类（如下）使用切入点表达式时，它可以正常工作。

```
<aop:config>
    <aop:pointcut id="classCalls" expression="execution(* com.xmy.package.MyClass.*(..))" />
    <aop:aspect ref="loggingService">
        <aop:around method="logMethodFlow" pointcut-ref="classCalls" />
    </aop:aspect>
</aop:config> 
```

请让我知道如何记录对特定包及其子包的所有方法调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:32:29.293

特定包及其子包中所有方法调用的切入点。例如 `com.xmy.package1.subpackages`…… `com.xmy.package2.subpackages`_

```
<aop:config>
    <aop:pointcut id="pkg1AllCalls" expression="execution (* com.xmy.package1+*())" />
    <aop:pointcut id="pkg2AllCalls" expression="execution (* com.xmy.package2+*())" />
    <aop:aspect ref="loggingService">
        <aop:around method="logMethodFlow" pointcut-ref="pkg1AllCalls" />
        <aop:around method="someOtherMethod" pointcut-ref="pkg2AllCalls" />
    </aop:aspect>
</aop:config> 
```

即定义2个不同的切入点，使表达式既简洁又可维护。**请注意**，这`someOtherMethod()`是我添加的新内容以使用两个不同的切入点。

基于 XML 的样式有一个限制如果您必须合并两个切入点，如上所示参考：Spring Docs 3.0 的 6.4.2 部分

然而，当用作@AspectJ 时，这很容易实现

```
@Pointcut(execution(* get*()))
  public void propertyAccess() {}

  @Pointcut(execution(org.xyz.Account+ *(..))
  public void operationReturningAnAccount() {}

  @Pointcut(propertyAccess() && operationReturningAnAccount())
  public void accountPropertyAccess() {} 
```

# php - 在 Codeigniter 中使用 LIMIT 选择

> ID：14231170
> 
> 赞同：18
> 
> 时间：2013-01-09T08:37:54.900
> 
> 标签：php, sql, codeigniter

我有一个在 Codeigniter 中开发的网站，在我的模型中我有这样的功能：

```
function nationList($limit=null, $start=null) {
    if ($this->session->userdata('language')=="it")
    $this->db->select('nation.id, nation.name_it as name');
    if ($this->session->userdata('language')=="en")
    $this->db->select('nation.id, nation.name_en as name');
    $this->db->from('nation');
    $this->db->order_by("name", "asc");
    $this->db->limit($limit, $start);
    $query = $this->db->get();
    $nation = array();
    foreach ($query->result() as $row)
        array_push($nation, $row);

    return $nation;     
} 
```

如果进入我的控制器，我无限制地调用函数并且 start 不会返回这样的结果：

```
$data["nationlist"] = $this->Nation_model->nationList(); 
```

相反，如果我设置限制并开始工作！如果limit和start为null，为什么不返回结果？如果 limit 和 start 为空，我不想创建第二个函数或控件。当 limit 和 start 为 null 而没有控件或第二个函数来使代码有用并提高效率时，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-09T08:43:40.283

试试这个...

```
function nationList($limit=null, $start=null) {
    if ($this->session->userdata('language') == "it") {
        $this->db->select('nation.id, nation.name_it as name');
    }

    if ($this->session->userdata('language') == "en") {
        $this->db->select('nation.id, nation.name_en as name');
    }

    $this->db->from('nation');
    $this->db->order_by("name", "asc");

    if ($limit != '' && $start != '') {
       $this->db->limit($limit, $start);
    }
    $query  = $this->db->get();

    $nation = array();
    foreach ($query->result() as $row) {
        array_push($nation, $row);
    }

    return $nation;     
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-01-31T12:38:06.243

对于更多的访客：

```
// Executes: SELECT * FROM mytable LIMIT 10 OFFSET 20
// get([$table = ''[, $limit = NULL[, $offset = NULL]]])
$query = $this->db->get('mytable', 10, 20);

// get_where sample, 
$query = $this->db->get_where('mytable', array('id' => $id), 10, 20);

// Produces: LIMIT 10
$this->db->limit(10);  

// Produces: LIMIT 10 OFFSET 20
// limit($value[, $offset = 0])
$this->db->limit(10, 20); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T04:39:50.643

我不知道您在 2013 年使用的是哪个版本的 CI，但我使用的是 CI3，并且我只是使用`null`传递给的两个参数进行了测试，`limit()`并且在呈现的查询中没有`LIMIT`or `OFFSET`（我通过使用检查`get_compiled_select()`）。

这意味着——假设你已经正确地发布了你的编码尝试——你不需要更改任何东西（或者至少旧问题不再是 CI 问题）。

如果这是我的项目，如果结果集中没有符合条件的行，这就是我将如何编写方法以返回对象的索引数组或空数组。

```
function nationList($limit = null, $start = null) {
    // assuming the language value is sanitized/validated/whitelisted
    return $this->db
        ->select('nation.id, nation.name_' . $this->session->userdata('language') . ' AS name')
        ->from('nation')
        ->order_by("name")
        ->limit($limit, $start)
        ->get()
        ->result();
} 
```

这些改进删除了不必要的语法、条件和冗余循环。

作为参考，这里是 CI 核心代码：

```
/**
 * LIMIT
 *
 * @param   int $value  LIMIT value
 * @param   int $offset OFFSET value
 * @return  CI_DB_query_builder
 */
public function limit($value, $offset = 0)
{
    is_null($value) OR $this->qb_limit = (int) $value;
    empty($offset) OR $this->qb_offset = (int) $offset;

    return $this;
} 
```

因此`$this->qb_limit`和`$this->qb_offset`类对象不会更新，因为在输入时`null`进行评估or 。`true``is_null()``empty()`

# jquery - jquery .html() 没有替换innerhtml

> ID：14231172
> 
> 赞同：-1
> 
> 时间：2013-01-09T08:38:00.033
> 
> 标签：jquery, html, insert, tags, innerhtml

我有一个构建字符串的函数`html`，然后使用该`jquery.html()`方法插入该 html 字符串。我希望页面的结果只显示输出文本，而是显示所有内容，甚至是标签。

```
function updateTableCell(){
   var removeDocForm = "<form action='"+docRemoveTarget+"'><a>remove</a></form><br>"
   $('table tr').eq(docRowCount).find('td').eq(4).html(removeDocForm);
} 
```

我希望`remove`在渲染页面时会出现，但我看到了

`<form action='docRemoveTarget'><a>remove</a></form><br>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:49:23.050

我对您的代码进行了一些更改并测试了它的工作原理。代码如下。

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
function updateTableCell()
{
    var docRemoveTarget = "localhost.php"
    var removeDocForm = "<form action='"+docRemoveTarget+"'><a>remove</a></form><br>";
    $('table tr').eq(0).find('td').eq(4).html(removeDocForm);
    console.log($('table tr').eq(0));
}
$(document).ready(function(){
    updateTableCell();
});
</script>
<table width="100%" border="1">
    <tr height="30">
        <td style="border:1px solid #CCC;"> </td>
        <td style="border:1px solid #CCC;"> </td>
        <td style="border:1px solid #CCC;"> </td>
        <td style="border:1px solid #CCC;"> </td>
        <td style="border:1px solid #CCC;"> </td>
        <td style="border:1px solid #CCC;"> </td>
    </tr>
</table> 
```

# android - 聊天应用程序的最佳布局

> ID：14231174
> 
> 赞同：0
> 
> 时间：2013-01-09T08:38:07.207
> 
> 标签：android, android-layout

我正在开发一个简单的基于 XMPP 的聊天应用程序，现在正在考虑创建对话布局的方法。我计划`LinearLayout`为每条包含`.9.png`背景、实际文本和时间戳的消息添加一个。

**问题 1：**什么更适合添加消息布局的父布局：ScrollView 或 ListView 中的 Relative-/LinearLayout？

**问题 2：**保存这些消息布局以使消息在用户离开活动时保留的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:47:03.400

*问题 1：什么更适合添加消息布局的父布局：ScrollView 或 ListView 中的 Relative-/LinearLayout？*

我会采用`ListView`这种方式，您可以`Adapter`轻松访问每一行、侦听器等。

*问题 2：保存这些消息布局以使消息在用户离开活动时保留的最简单方法是什么？*

如果它是大数据，最好的方法是使用 SQLite DB。如果它不会那么大，或者如果您正在寻找一个简单的解决方案 - 只需将`ArrayList`代表聊天的内容保存到文件中。有许多示例用于将 Java 对象保存到文件然后加载它。

# wpf - 使用 DataGridTemplateColumn 时保留默认的 WPF DataGrid 单元格编辑行为

> ID：14231175
> 
> 赞同：1
> 
> 时间：2013-01-09T08:38:09.153
> 
> 标签：wpf, wpfdatagrid, datagridtemplatecolumn

我正在开发一个`DataGrids`用于显示数据的 WPF MVVM 应用程序。我手动定义列，大部分时间我使用`DataGridTextColumn`.

使用键盘导航生成的数据网格时，可以通过导航到单元格来突出显示它，并且可以通过开始键入值来更改单元格值。此行为适用于`DataGridTextColumn`.

在某些情况下，我必须使用`DataGridTemplateColumn`, 和不同的`CellTemplate`绑定`CellEditingTemplate`。这允许我格式化显示的值，但一旦用户开始编辑单元格，就会返回未格式化的值。但是，上面描述的键盘导航和编辑方法不适用于我当前的实现。我必须突出显示单元格并按 F2 进行编辑，或者我必须用鼠标单击单元格。

下面是我当前实现的模型，`Foo`其中`DataGridTextColumn`运行良好，并且`Bar`给`DataGridTemplateColumn`我带来了麻烦。

如何更改 my 的定义，`DataGridTemplateColumn`使其具有与 ? 相同的键盘导航和编辑功能`DataGridTextColumn`？

```
<DataGrid ItemsSource="{Binding ListItems}">
    <DataGrid.Columns>

        <DataGridTextColumn Binding="{Binding Foo}"
                            Header="Foo" />

        <DataGridTemplateColumn Header="Bar">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ContentPresenter Content="{Binding Path=BarString, Mode=OneWay}"
                                      HorizontalAlignment="Right" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding BarValue, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"
                             HorizontalContentAlignment="Right" />
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>
        </DataGridTemplateColumn>

    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-12T11:31:00.347

我有同样的问题，我希望数据网格在键盘上键入时开始编辑我有一个解决方案，方法是扩展 DataGrid 然后将 OnKeyDown 覆盖为 BeginEdit，如下所示：

```
 protected override void OnKeyDown(KeyEventArgs e)
    {
        Key[] ignorableKeys = { Key.Up, Key.Down, Key.Right, Key.Left, Key.Enter, Key.Escape };            
        if (!ignorableKeys.Any((x)=> x == e.Key))
        {
            BeginEdit();
        }
        base.OnKeyDown(e);
    } 
```

但是你会遇到另一个问题，你必须点击标签才能真正编辑单元格，我认为有很多关于这个问题的[帖子](https://stackoverflow.com/questions/5176226/datagridtemplatecolumn-with-datepicker-requires-three-clicks-to-edit-the-date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:10:22.423

您需要实现单击编辑来克服此问题。我有同样的问题，但不同的是我有一个需要编辑的复选框。这篇文章帮助了我。检查一下：[http ://wpf.codeplex.com/wikipage?title=Single-Click%20Editing](http://wpf.codeplex.com/wikipage?title=Single-Click%20Editing)

# ios - 如何将注释针颜色更改为原始颜色？

> ID：14231183
> 
> 赞同：0
> 
> 时间：2013-01-09T08:38:40.860
> 
> 标签：ios, ios6, mkmapview, mkannotation, ios6-maps

我在单击注释引脚时更改注释引脚颜色，然后单击另一个注释引脚更改引脚颜色，因此当前更改了两个注释颜色，但我希望当前选择注释颜色仅将旧选择更改回原始颜色。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:57:07.240

我找到了一个解决方案

```
@property (nonatomic, retain) MKAnnotationView *selectedAnnotationView; 
```

在 .h 文件中并在单击注释引脚时保存

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
if (self.selectedAnnotationView) {
    self.selectedAnnotationView.image = [UIImage imageNamed:[NSString    stringWithFormat:@"a.png"]];
}
self.selectedAnnotationView = view;
view.image = [UIImage imageNamed:[NSString stringWithFormat:@"b.png"]];
} 
```

.m 文件中的更改

# php - 如何将我的图像上传到与我的计算机共享文件夹图像的另一台计算机

> ID：14231186
> 
> 赞同：1
> 
> 时间：2013-01-09T08:38:45.710
> 
> 标签：php

我想将我的图像上传到与我的计算机共享文件夹图像的另一台计算机。这是图像的路径：

```
//92.62.178.149/Documents/Images 
```

这是我的代码：

```
chmod ("//92.62.178.149/Documents/Images/", 0777);
move_uploaded_file($tmpname, "//92.62.178.149/Documents/Images/" . $str . "." . $type); 
```

但我收到了一些警告：

> 警告：chmod() [function.chmod]：第 66 行的 C:\xampp\htdocs\2new\ClassImage.php 中没有这样的文件或目录
> 
> 警告：move_uploaded_file（//92.62.178.149/Documents/Images/d8426230-5a36-11e2-b0bc-616263646566.jpeg）[function.move-uploaded-file]：无法打开流：C:\xampp\htdocs 中的权限被拒绝\2new\ClassImage.php 第 68 行
> 
> 警告：move_uploaded_file() [function.move-uploaded-file]：无法将 'C:\xampp\tmp\php782.tmp' 移动到 '//92.62.178.149/Documents/Images/d8426230-5a36-11e2-b0bc-第 68 行 C:\xampp\htdocs\2new\ClassImage.php 中的 616263646566.jpeg'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:47:19.620

尝试这个

```
$destinationFolder = "\\\\92.62.178.149\\Documents\\Images\\";
chmod ($destinationFolder , 0777);
move_uploaded_file($tmpname, $destinationFolder  . $str . "." . $type); 
```

笔记：-

```
When you are running a PHP script from the browser, you are not running it under your 
user account. You are running under whatever the HTTP server uses as the user name. 
So even if you have access to the folder, the server may not. 
The easiest fix is to give the serverwrite permission to that folder. 
```

# ios - 从 IOS 中的 MDM 服务器发送推送通知时出现推送通知错误

> ID：14231193
> 
> 赞同：2
> 
> 时间：2013-01-09T08:39:25.627
> 
> 标签：ios, xcode, nsnotifications

我正在开发移动设备管理系统，但我的推送通知不起作用。我的代码是

```
//$apnsHost = 'gateway.push.apple.com';
$apnsHost = 'gateway.sandbox.push.apple.com';
$apnsPort = 2195;
$apnsCert = 'PushCert.pem';

// Put your device token here (without spaces):
$deviceToken = 'my-device-token'; //I have replaced my actual token here

// Put your alert message here:
$message = 'My first push notification!';

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', $apnsCert);
//stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);
$fp = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 60, STREAM_CLIENT_CONNECT, $ctx);
if (!$fp)
    exit("Failed to connect: $error $errorString" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

我收到一个错误，例如：`Failed to connect: 0`如果我这样做`var_dump($fp)`，它会给我`bool(false)`。有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:17:37.427

```
<?php

// Provide the Host Information.
$tHost = 'gateway.sandbox.push.apple.com';
$tPort = 2195;

// Provide the Certificate and Key Data.
$tCert = 'ck.pem';

// Provide the Private Key Passphrase (alternatively you can keep this secrete
// and enter the key manually on the terminal -> remove relevant line from code).
// Replace XXXXX with your Passphrase
$tPassphrase = '1234';

// Provide the Device Identifier (Ensure that the Identifier does not have spaces in it).
// Replace this token with the token of the iOS device that is to receive the notification.
$tToken = 'YOUR DEVICE TOKEN';

// The message that is to appear on the dialog.
$tAlert = 'You have a LiveCode APNS Message';

// The Badge Number for the Application Icon (integer >=0).
$tBadge = 8;

// Audible Notification Option.
$tSound = 'default';

// The content that is returned by the LiveCode "pushNotificationReceived" message.
$tPayload = 'APNS Message Handled by LiveCode';

// Create the message content that is to be sent to the device.
$tBody['aps'] = array (
    'alert' => $tAlert,
    'badge' => $tBadge,
    'sound' => $tSound,
    );
$tBody ['payload'] = $tPayload;

// Encode the body to JSON.
$tBody = json_encode ($tBody);

// Create the Socket Stream.
$tContext = stream_context_create ();
stream_context_set_option ($tContext, 'ssl', 'local_cert', $tCert);

// Remove this line if you would like to enter the Private Key Passphrase manually.
stream_context_set_option ($tContext, 'ssl', 'passphrase', $tPassphrase);

// Open the Connection to the APNS Server.
$tSocket = stream_socket_client ('ssl://'.$tHost.':'.$tPort, $error, $errstr, 30, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $tContext);

// Check if we were able to open a socket.
if (!$tSocket)
    exit ("APNS Connection Failed: $error $errstr" . PHP_EOL);

// Build the Binary Notification.
$tMsg = chr (0) . chr (0) . chr (32) . pack ('H*', $tToken) . pack ('n', strlen ($tBody)) . $tBody;

// Send the Notification to the Server.
$tResult = fwrite ($tSocket, $tMsg, strlen ($tMsg));

if ($tResult)
    echo 'Delivered Message to APNS' . PHP_EOL;
else
    echo 'Could not Deliver Message to APNS' . PHP_EOL;

// Close the Connection to the Server.
fclose ($tSocket);
?> 
```

试试这个代码...

如果您为 PushCert.pem 创建密码，则取消注释此行

```
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase); 
```

并将密码放入 $passphase

# javascript - TouchMoveEvent 只获取一个元素

> ID：14231203
> 
> 赞同：0
> 
> 时间：2013-01-09T08:40:09.777
> 
> 标签：javascript, jquery, javascript-events

我有 div 的网格，并且想在将手指移到它们上时为它们着色。

如果我使用 touchmove-event 只有第一个 div 是彩色的..

```
 $("#grid .divCell").each(function () {
            $(this).bind("touchmove", function (e) {
                $(this).css("background-color", "red");
            });
        }); 
```

建议？

/编辑

剃刀视图：

```
<div id="grid">        
    <div class="divTable">
        @for(var i = 0; i<=15; i++) {
        <div class="divRow">
            @for(var e = 0; e<=15; e++) {
            <div class="divCell" onclick="set(@(17 * i), @(17 * e));">
                &nbsp;
            </div>
            }
        </div>
        }
    </div>    
</div> 
```

# javascript - 用ajax检查下载时间？

> ID：14231205
> 
> 赞同：2
> 
> 时间：2013-01-09T08:40:14.397
> 
> 标签：javascript, html, ajax, jquery

我想下载一个 512 kb 的文件并检查下载时间。我使用以下代码，但它只检查网站的响应时间，而不是等到整个文件下载完毕。如何查看整个文件的下载时间？

```
var start = new Date();  
$.ajax ({
    url: 'https://www.example.com/512kb',
    cache: false,
    success : function()
    {
        var total=(new Date() - start)  
    },
    error : function(jqxhr, status, ex) {}   
}); 
```

编辑：当我在本地 PC 上运行该网站时，Internet Explorer 正在等待所有文件下载完毕，而 Firefox 和 chrome 则没有。如果我把所有行为都放到服务器上，而不是等待所有文件。为什么只是在本地 Internet Explorer 的行为是这样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:08:32.107

看起来您没有将`total`变量用于任何事情。因为它是在`success`回调函数中定义的，所以它只存在于该函数中，因此在函数返回时会丢失。

以下代码显示了一个警报框，其中包含完成 ajax 调用所需的时间和检索到的数据的长度：

```
var start = new Date();
var total;
$.ajax ({
    url: 'http://fiddle.jshell.net/',
    cache: false,
    success : function(data)
    {
        total=(new Date() - start);
        alert('total: ' + total + ' len: ' + data.length);
    },
    error : function(jqxhr, status, ex) {}   
}); 
```

[http://jsfiddle.net/WkKE2/2/](http://jsfiddle.net/WkKE2/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:13:57.063

在javascript中没有办法做到这一点。但是您会在这个 stackoverflow 问题中找到一些解决方法：[下载文件时的浏览器事件保存到磁盘](https://stackoverflow.com/questions/2343418/browser-event-when-downloaded-file-is-saved-to-disk)

编辑：this other stackoverflow question有一个更好和更简单的方法的答案：[检测“文件下载”弹出窗口何时关闭](https://stackoverflow.com/questions/666468/detecting-when-the-file-download-popup-is-closed)，基本上你将下载链接定位到页面中隐藏的iframe并为此iframe使用onload事件。

# php - php中的复选框状态

> ID：14231207
> 
> 赞同：0
> 
> 时间：2013-01-09T08:40:15.713
> 
> 标签：php, forms

我在 php 中有一个带有 get 方法的表单。在表单中，我创建了一个名为 Student 的复选框。

我使用这些代码在提交按钮操作中显示有关用户的详细信息。

在详细信息页面中，当用户不是学生时，它会显示错误。当用户是学生时没有问题：

```
if($_GET['student'] == "on")
{
    print "Student";
}
else
{
    print "Not student";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T08:42:31.223

还将新条件设为：

```
if(isset($_GET['student'] && $_GET['student'] == "on") 
```

然后它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:43:50.540

一个通用的解决方案是添加一个默认为空值的隐藏字段以省略 isset() 调用

```
<input type="hidden" name="student" value="">
<input type="checkbox" name="student" value="on"> 
```

您必须这样做的原因是，如果未选中复选框，浏览器根本不会发送任何值（即使是空的，也只是缺少密钥）。

# servlets - 从 java 程序中使用 POST 调用 servlet

> ID：14231217
> 
> 赞同：0
> 
> 时间：2013-01-09T08:40:43.610
> 
> 标签：servlets

这个问题被问了很多次，但不知何故我无法让我的程序正常工作。

这是我的java程序：

```
public static void main( String [] args ) {

    try {

        URL url = new URL("http://localhost:8080/mywebapp/servletname");
        URLConnection conn = url.openConnection();
        conn.setDoOutput(true);

        BufferedWriter out = 
            new BufferedWriter( new OutputStreamWriter( conn.getOutputStream() ) );
        //out.write("xml=" + param1 + "\r\n");
        out.write("xml=xmltest\r\n");
        out.flush();
        out.close();
        BufferedReader in = 
            new BufferedReader( new InputStreamReader( conn.getInputStream() ) );

        String response;
        while ( (response = in.readLine()) != null ) {
            System.out.println( response );
        }
        in.close();
    }
    catch ( MalformedURLException ex ) {
        ex.printStackTrace();
        // a real program would need to handle this exception
    }
    catch ( IOException ex ) {
        ex.printStackTrace();
        // a real program would need to handle this exception
    }
} 
```

调用 conn.getInputStream() 时抛出异常

异常抛出在这里：

```
java.io.IOException: Server returned HTTP response code: 500 for URL: http://localhost:8080/webapp/servletname  at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
at com.barcap.mdm.nh.cron.TestUpload.main(TestUpload.java:35) 
```

我的 servlet 代码在这里：

```
public class servletname extends HttpServlet {
private static final long serialVersionUID = 1L;

/**
 * @see HttpServlet#HttpServlet()
 */
public servletname() {
    super();
    // TODO Auto-generated constructor stub
}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    System.out.println("GET method reached .... but it's not supported");
    throw new ServletException("'GET' method not supported. 'POST' method required.");
    //doPost(request, response);
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    System.out.println("POST method reached");

    response.setContentType("text/xml");
    List<UploadUserVO> list = null;
    String xml = request.getParameter("xml");
    String responseXML = "<?xml version=\"1.0\"?><response result=\"__responseString__\"></response>";

    System.out.println("XML : " + xml);
    PrintWriter out = response.getWriter();

    try {
                  // perform some task here 
               } catch (Exception e)
}}}} 
```

有人可以指出我在做什么缺少什么或有什么问题吗？

谢谢您的帮助。

# javascript - 变量定义中的多个等于

> ID：14231226
> 
> 赞同：2
> 
> 时间：2013-01-09T08:41:30.050
> 
> 标签：javascript

> **可能重复：**
> [Javascript 多重赋值语句](https://stackoverflow.com/questions/13679925/javascript-multiple-assignment-statement)

我想知道这是做什么的。我试图搜索它，但我找不到。

```
var config = $.cookie = function (key, value, options) {}; 
```

我指的是上一行中的倍数等于。到底有什么好处呢？这是什么意思？我以前从未见过。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T08:43:10.907

您正在分配给匿名函数的变量`config`和属性。`cookie``$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:50:46.553

这是同一件事：

```
var func = function(key,value,options) {
    return 'test value';
};
config = func;
$.cookie = func;

console.log(config()); // will output 'test value'
console.log($.cookie()); // will also output 'test value' 
```

`config`您正在为 的变量和`cookie`属性分配一个匿名函数`$`。

# javascript - 在javascript中使用正则表达式格式化数字

> ID：14231230
> 
> 赞同：0
> 
> 时间：2013-01-09T08:41:48.650
> 
> 标签：javascript, regex

我正在尝试在 中实现一个自动格式化程序`JS`，这样如果我有一个给定的值（例如 12345678）并且我有一个给定的格式（例如`XX.XX.XX`OR `XX-XX-XX`OR `XX/XX/XX`OR `XXX-XXXX`），我可以将我的初始值自动格式化为任何给定的格式.

所需的格式会有所不同，因此它需要能够采用任何给定的格式并重新格式化原始值以匹配。

我不知道它是否可能或如何去做。任何帮助表示赞赏。

谢谢，

克拉拉

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T08:51:45.587

这应该适合你

```
var value = '12345678';

// 12345678 => 12.34.56.78
console.log(value.replace(/(\d{2})(?=\d)/g, '$1.'));

// 12345678 => 12/34/56/78
console.log(value.replace(/(\d{2})(?=\d)/g, '$1/'));

// 12345678 => 12-34-56-78
console.log(value.replace(/(\d{2})(?=\d)/g, '$1-'));

// 12345678 => 1234-5678
console.log(value.replace(/(\d{4})(?=\d)/g, '$1-'));

// a more complex format (create US phone number)
// 1234567890 => +1 (123)-456-7890
console.log('1234567890'.replace(/^(\d{3})(\d{3})(\d{4})$/g, '+1 ($1)-$2-$3')); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T08:58:45.853

像这样的东西？

```
function format(mask, number) {
   var s = ''+number, r = '';
   for (var im=0, is = 0; im<mask.length && is<s.length; im++) {
     r += mask.charAt(im)=='X' ? s.charAt(is++) : mask.charAt(im);
   }
   return r;
}    

console.log(format('XX.XX.XX', 12345678)); // logs "12.34.56" 
console.log(format('XXX-XXXX', 12345678)); // logs "123-4567"
console.log(format('XX-XX-XX', 12345678)); // logs "12-34-56 "
console.log(format('XX/XX/XX', 12345678)); // logs "12/34/56"
console.log(format('XX/XX/XX/XX/XX', 12345678)); // logs "12/34/56/78" 
```

在制作此代码时，没有任何正则表达式引擎受到损害。

**[小提琴](http://jsfiddle.net/X47mh/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:59:29.577

您可以自动从格式构建正则表达式，如下所示：

```
var format = 'XX-XX-XX';
var string = '111111';
var regex = '';

for(var i = 1; format.indexOf('X') >= 0; i++){
    format = format.replace('X', '$'+i);
    regex += '(\\d)'; // to match a digit enclosed in ()
} 
```

或者作为一个函数：

```
function format(string, format){
    var regex = '';

    for(var i = 1; format.indexOf('X') >= 0; ++i){
        format = format.replace('X', '$'+i);
        regex += '(\\d)';
    }
    regex += '[^]*'; // Match the rest of the string to crop characters overflowing the format.
// Remove this ^ line if you want `format('12345678', 'XX/XX/XX')` to return `12/34/5678` instead of `12/34/56`;
    return string.replace(new RegExp(regex), format);
}

console.log(format('111111', 'XX-XX-XX'));  // 11-11-11
console.log(format('111111', 'XX.XX.XX'));  // 11.11.11 
console.log(format('1111111', 'XXX-XXXX')); // 111-1111
console.log(format('111111', 'XX-XX-XX'));  // 11-11-11
console.log(format('111111', 'XX/XX/XX'));  // 11/11/11
console.log(format('123456789', 'XX/XX/XX'));  // 12/34/56 (789 are cropped off.) 
```

# bash - 为什么变量赋值用空格替换制表符

> ID：14231232
> 
> 赞同：12
> 
> 时间：2013-01-09T08:42:05.157
> 
> 标签：bash, shell, variables

为什么变量赋值会在 shell 中用空格替换制表符？

```
$ cat tmp
a    b e    c    d
$ res=$(cat tmp)
$ echo $res
a b e c d 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T08:49:20.410

您需要引用变量`$res`以保留空格。

```
$ cat file
a       b e     c       d

$ res=$(cat file)

$ echo $res
a b e c d

$ echo "$res"
a       b e     c       d 
```

从`man bash`下`QUOTING`：

> 引用用于删除某些字符或单词对 shell 的特殊含义。引号可用于禁用对特殊字符的特殊处理，防止保留字被识别为保留字，并防止参数扩展。
> 
> 上面 DEFINITIONS 下列出的每个元字符对 shell 都有特殊的含义，如果要表示它自己，则必须用引号引起来。
> 
> ```
> ...
> 
> \a     alert (bell)
> \b     backspace
> \e
> \E     an escape character
> \f     form feed
> \n     new line
> \r     carriage return
> \t     horizontal tab
> \v     vertical tab
> \\     backslash
> \'     single quote
> \"     double quote
> \nnn   the eight-bit character whose value is the octal value nnn
> \xHH   the eight-bit character whose value is the hexadecimal value HH
> \cx    a control-x character
> 
> ... 
> ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T09:50:38.627

丢失选项卡的不是分配，而是调用`echo`命令。

`res`分配了一个包含选项卡的值。当你在 shell 中编写时`$res`，这相当于在此时键入`res`变量的内容。

所以：

```
$ echo $res 
```

与以下内容相同：

```
$ echo a    b e     c       d 
```

（该行中的大空格是制表符，可以通过按 键入`Ctrl+V Tab`）。如果您运行该命令，您还会得到：

```
a b e c d 
```

所以你的问题实际上是：为什么选项卡会在命令的参数中丢失？

答案是命令（`echo`在这种情况下）永远不会看到制表符，或者实际上是空格。Shell 将您的命令行解析为命令名称和参数列表。它使用空格（制表符和空格）将命令拆分为这些部分。然后它运行命令，将参数列表传递给它。

所以`echo`它的参数是列表'a'，'b'，'e'，'c'，'d'；它不知道最初将它们分开的是什么字符。

`echo`然后输出它的每个参数，它们之间有一个空格。因此，您看到的输出。在原始命令行使用单个空格字符分隔每个参数的情况下，输出与输入匹配，因此看起来输入中的空格也在输出中 - 但它们不是：shell 吞噬了原始空格并`echo`插入一些新的。

引号可用于使 shell 将多个“单词”视为单个参数。例如，如果您这样做：

```
$ echo a    "b    c"    d 
```

将 3 个参数传递给`echo`：'a'、'b c' 和 'd'。中间参数包含 4 个空格；那些被传递给`echo`，所以会出现在它的输出中。引号外的空格由 shell 用于拆分参数，因此不会传递给`echo`. 因此输出为：

```
a b    c d 
```

要检查这种事情，使用一个命令会更清楚，该命令会准确显示它接收到的参数数量以及每个参数中的内容。这个 Perl 单行代码将做到这一点：

```
$ perl -MData::Dumper -E 'say Dumper \@ARGV' a    b    c    d
$VAR1 = [
          'a',
          'b',
          'c',
          'd'
        ];

$ perl -MData::Dumper -E 'say Dumper \@ARGV' "a    b    c    d"
$VAR1 = [
          'a    b    c    d'
        ];

$ perl -MData::Dumper -E 'say Dumper \@ARGV' a    "b    c"    d
$VAR1 = [
          'a',
          'b    c',
          'd'
        ];

$ res="a    b c     d"
$ perl -MData::Dumper -E 'say Dumper \@ARGV' $res
$VAR1 = [
          'a',
          'b',
          'c',
          'd'
        ];

$ perl -MData::Dumper -E 'say Dumper \@ARGV' "$res"
$VAR1 = [
          'a    b c     d'
        ]; 
```

# c++ - C++ 宏 - 处理两对括号

> ID：14231235
> 
> 赞同：1
> 
> 时间：2013-01-09T08:42:32.160
> 
> 标签：c++, macros, c-preprocessor

我需要预处理这段代码：

```
line (0,0) (5,5) 
```

其中 (0,0) 表示开始 x 和 y 坐标，第二个 (5,5) 表示结束 x 和 y 坐标。

我能够使用获取起始坐标

```
#define line(x1,y1)   myArray->shapes.push_back(new Line(x1,y1)); 
```

如何处理第二个括号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T08:49:46.467

像下面这样的东西怎么样：

```
struct LineCreator {
  LineCreator(type_of_shapes &shapes, int x1, int y1)
    : shapes_(shapes), x1_(x1), y1_(y1)
  {}
  void operator() (int x2, int y2) {
    shapes_.push_back(new Line(x1_, y1_, x2, y2));
  }
private:
  type_of_shapes &shapes_;
  int x1_, y1_;
};

#define line(x, y) LineCreator(myArray->shapes, (x), (y)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:46:05.000

将其更改为：

```
line (0,0,5,5) 
```

现在您可以构造以下宏：

```
#define line(x1,y1,x2,y2)   myArray->shapes.push_back(new Line(x1,y1)); \
                            myArray->shapes.push_back(new Line(x2,y2)); 
```

# jquery - 使用 jQuery append() 方法将 asp:button 动态添加到 Web 表单

> ID：14231236
> 
> 赞同：0
> 
> 时间：2013-01-09T08:42:31.740
> 
> 标签：jquery, asp.net

我正在尝试使用 jQuery append 方法以编程方式将 ASP.Net 按钮添加到 HTML。这是代码：

```
$("#form1 #container").append('<div id="cool"><asp:Button ID="Button1" runat="server" Text="Button" >/div> '); 
```

但不知何故，它显示了这个错误

> 'Button' 类型的控件 'Button1' 必须放置在带有 runat=server 的表单标记内。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:44:21.050

无法`asp:button`通过 javascript 添加到页面，因为它是服务器端控件。

您可以将纯 HTML 添加`<button />`到页面，但它不会像原来那样连接到回发和视图状态`asp:button`- 如果需要，您需要一些手动执行此操作的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:50:31.090

这是不可能的，jquery 只能附加 html 控件而不是服务器控件。看看这个。

[差异。b/w 服务器和 html 控件](https://stackoverflow.com/questions/877227/asp-net-difference-between-runat-server-and-server-controls)

# java - Java2MySQL > 由于底层异常再次导致通信链接失败

> ID：14231238
> 
> 赞同：2
> 
> 时间：2013-01-09T08:42:39.240
> 
> 标签：java, mysql, connection

我正在用 Java 编写程序，它连接到 MySQL 数据库。由于第一类是具有单个静态方法返回的类`java.sql.Connection`。在调试并连接正常后，我再也没有碰过它。几天前，我发现我的程序返回了这个错误：

> **com.mysql.jdbc.CommunicationsException：
> 由于底层异常导致通信链接失败
> 
> BEGIN NESTED EXCEPTION
> com.mysql.jdbc.CommunicationsException
> 
> MESSAGE：
> 由于底层异常导致通信链接失败：
> 
> BEGIN NESTED EXCEPTION
> java.io.EOFException MESSAGE：无法读取响应服务器。预期为 4 个字节，在连接意外丢失之前读取 0。**
> 
> **堆栈跟踪：**
> 
> **...**

*   我安装了 MySQL Server v. 5.1.62
*   我正在使用 MySQL/J 连接器 v. 5.0.8（从 mysql.com 下载）
*   我也把类路径放在 NetBeans sqljdbc4.jar

我无法理解的是，自从我创建数据库以来，我没有在本地主机上更改用户名和密码。我唯一更改的是：添加更多表并更改表中的列，但这不会触发此错误。我对我的项目所做的事情是将字符集从 UTF-8 更改为 UTF-16，但我想它几乎不会影响我的连接方法。

如果我更改连接器并放入类路径连接器 v. 5.1.22，它会返回错误：
**用户“root@localhost”的访问被拒绝（使用密码：YES）**
即使我声明了用户 root 的所有权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:35:01.973

我将推荐以下内容：

> 1.  首先确认两台服务器之间的网络是否正常：从您的服务器 ping 到您的数据库服务器。湾。使用 MTR unix 工具确保两台服务器之间的连接。
> 2.  你在使用连接池吗？如果是，则尝试重新启动服务器。连接池中的连接可能很少处于关闭状态。

让我们首先解决第一个问题。其他问题 用户“root@localhost”的访问被拒绝（使用密码：YES）是一个独立的问题，我们可以稍后讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:15:22.040

我忘了告诉我正在使用 Win 7 机器。谢谢你的回复。我在我的池中设置了更多连接，但它不起作用（当应用程序启动并且池接受 15 个时，我有大约 10 个与数据库的连接）。
**但！！**
我没有忘记我将项目的编码从 UTF-8（我从一开始就有）更改为 Unicode（因为我想在 Windows 中使用东欧字母`JOptionPane.showMessageDialog();`，因为它是我的本地字母）。只是为了测试，我将字符集改回 UTF-8，我的连接再次正常工作。老实说...我不明白这一点。

# vb.net - 树视图根节点的索引

> ID：14231239
> 
> 赞同：0
> 
> 时间：2013-01-09T08:42:39.447
> 
> 标签：vb.net

我在 winwoforms 中有一个树视图。它有一个根节点和四个子节点。使用 mouseclick 事件，我需要获取所选节点的索引，但我的问题是，它只显示根节点的索引，即使我单击根节点或任何子节点，它也会显示索引为 0

我想确定用户是否单击了根节点或子节点。

请指教。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:08:14.673

节点的索引与其父节点相关，而不是整个树视图

表示如果点头

```
A – 0
    B – 0
        D – 0
        E – 1
    C - 1 
```

编辑

编写递归搜索以到达其父级

每个节点都有名为 parent 的对象属性，它是该节点的父节点

```
Public function getTopMostIndex(ByVal trNode as TreeNode) AS Integer
    If trNode.Parent Is Nothing Then
        ‘This is the topmost node
        Return trNode.Index
    Else
        Return getTopMostIndex(trNode)
    End If
End Function 
```

# c++ - 创建一个集合关联数组

> ID：14231240
> 
> 赞同：0
> 
> 时间：2013-01-09T08:42:42.453
> 
> 标签：c++, set, associative-array

我想创建一个类似于缓存的集合关联结构（http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Memory/set.html）。有一些集合，每个集合都包含一些方法。每种方式都有一些字段，但是集合中的所有方式都有唯一的字段（标签）。

我知道`std::multiset`哪个可以用于我的目的。还有其他选择吗？任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T08:57:23.317

对于缓存，我通常使用 std::map、std::multimap 或它们的哈希等效项。事实上 hash_map 通常表现得更好一点，所以这里可能是更好的选择。在 c++11 中，hash_map 被称为[unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)，现在是标准的一部分，所以我建议你使用这个。它还有一个名为[unordered_multimap](http://en.cppreference.com/w/cpp/container/unordered_multimap)的多版本。如果 c++11 不是一个选项，则可以在 boost 中找到相同的容器。

# iphone - UINavigation 控制器弹出标题但不弹出控制器

> ID：14231245
> 
> 赞同：0
> 
> 时间：2013-01-09T08:43:05.077
> 
> 标签：iphone, uinavigationcontroller, uiimagepickercontroller

这是设置：我有一个里面`UIViewController`有一个`UITableView`。触摸其中一个单元格时，会出现一个操作表，提供从图库中选择照片或拍摄新照片的选项。在任何一种情况下，我都会显示`UIImagePickerController`如下：

在我的接口声明中

```
UIImagePickerController* imageController; 
```

在 viewDidLoad 中：

```
imageController = [[UIImagePickerController alloc] init];
imageController.delegate = self;
imageController.allowsEditing = YES; 
```

在我的操作表委托方法中

```
if(buttonIndex == 2)
    return;

UIImagePickerControllerSourceType sourceType = UIImagePickerControllerSourceTypeCamera;

if(buttonIndex == 1)
    sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

imageController.sourceType = sourceType;

[self presentModalViewController:imageController animated:YES]; 
```

效果很好，并且图像选择器会显示出来。然而，从此时起，导航控制器似乎无法正常工作。我可以打电话

```
[self.navigationController popViewControllerAnimated:YES]; 
```

并且导航栏中的标题会随着标准的弹出动画而改变，但控制器本身不会消失。这仅在图像选择器控制器显示后才会发生。我可以在显示控制器之前取消操作表，完全没有任何问题。

我已经包含了一个短视频的链接，因为这个应用程序已经上线了——这只是一个重新构建。

[http://screencast.com/t/qBolp2v3iCyR](http://screencast.com/t/qBolp2v3iCyR)

我尝试从导航控制器和标签栏控制器显示模式 - 结果相同。我尝试了使用此调用的替代显示方法：

```
[self presentViewController:imageController animated:YES completion:^{}]; 
```

我已经验证我的导航控制器不是零，并且适当的控制器在堆栈上。任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:42:58.530

试试这个，如果你显示 viewController

```
[self presentModalViewController:imageController animated:YES]; 
```

你必须用dismissView

```
[imageController dismissViewControllerAnimated:YES completion:nil]; 
```

因为 popViewController 将在使用 pushViewController 显示视图时使用

对不起，我的英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:43:11.157

要关闭使用 添加的控制器`presentModalViewController:animated:`，您应该使用

```
[self.navigationController dismissModalViewControllerAnimated:YES] 
```

# javascript - Jquery / Javascript：是否可以知道页面何时聚焦？

> ID：14231250
> 
> 赞同：3
> 
> 时间：2013-01-09T08:43:47.187
> 
> 标签：javascript, jquery, refresh, handler

我的目标是在聚焦“页面选项卡”时使用 jquery 自动刷新一些组件。我有一个“购物车”，即使您从多个选项卡显示我的网站，我也想自动更新它。另外，我正试图让它在页面内的 iframe 中工作！

这是可能的还是我必须使用一些计时器来定期自动刷新？

编辑：阅读解决方案后，我让它为每个焦点工作一次，不知道它是否是最好的解决方案，但它完成了工作：D

```
var focusPage = false;
var firstFocus = false;
$(window).focus(function () {
                focusPage = true;
                if (firstFocus) {
                    firstFocus = false;
                    //BAM! Refresh your stuff
                }
            });
$(window).blur(function () {
                    focusPage = false;
                    firstFocus = true;
                }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T08:45:05.700

您可以在窗口上捕捉`focus`事件。尝试使用：

```
$(window).focus(function(){
   //refresh your div;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T08:49:52.070

使用它似乎效果很好：

```
$(document).ready(function () {
    $(window).focus(function () {
        console.log("bam!");
    })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-25T10:30:00.693

正是你上面写的可以通过这个来实现

`window.onblur= function() { window.onfocus= function () { location.reload(true); } };`

它只会做一次。您可以通过此调用减少代码。

# php - 在 Sphinx 中使用过滤器执行空查询

> ID：14231262
> 
> 赞同：1
> 
> 时间：2013-01-09T08:44:42.903
> 
> 标签：php, mysql, sphinx

我想从 Sphinx 检索数据，但不使用查询关键字，但使用来自其他属性的过滤器。这些其他属性是整数。以下是我们索引的属性：

```
id - Integer
keyword - String
keyword_ord - Integer
words - Integer
results - Integer 
```

我们的表中有大约 3 亿个关键字，我们尝试通过在 Sphinx 中使用空查询来解决这个问题（注意：我们使用的是 PHP 和 MySQL）。假设我们想要获取其中包含 3 到 6 个单词的关键字以及具有 3000 到 10000 个结果的关键字，那么我们使用 PHP 中 Sphinx API 的 SetFilterRange() 函数。

```
$sphinx->SetFilterRange( 'words', 3, 6 );
$sphinx->SetFilterRange( 'results', 3000, 10000 ); 
```

然后为了执行搜索，我们发送一个空查询。

```
$results = $sphinx->query( '' ); 
```

问题是查询似乎仍然比我们预期的要慢。您认为除了在 Sphinx 中发送空查询之外，还有更好的方法来使用过滤器获取数据吗？或者除了狮身人面像本身还有更好的解决方案吗？

不过在我的猜测中，我认为它之所以慢的原因是因为 Sphinx 实际上必须遍历所有 3 亿个关键字才能找到属于过滤器的所有内容。如果指定的查询中有关键字（而不是空查询），则在索引的帮助下，它不必遍历所有关键字，而是跳过不包含关键字的行。如果这是原因，那么除了使用 Sphinx 之外，必须有更好的方法来解决这个问题。

至于我们的服务器硬件规格：

*   CPU：Intel(R) Xeon(R) CPU E5-2630 0 @ 2.30GHz（8 核）
*   内存：2GB
*   磁盘空间：250GB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:36:32.970

狮身人面像可以诚实地完成这项工作。您的规格有点低（内存），应该提高一点。如果您有 3 亿行（带有索引），那么仅 MySQL 就消耗了大量的内存。对于初学者，我会升​​级到至少 8GB 内存。

内存升级后，我会玩弄 Sphinx 配置。我将从添加/使用这些选项开始......

```
searchd
{
    max_matches         = 200000
    max_filter_values   = 300000
} 
```

max_matches 一般会限制总结果的数量，没有理由返回 3 亿个结果。

max_filter_values 只是一个健全性检查选项。它将阻止某人选择 3 亿个标签作为过滤选项。

要搜索空查询，您需要：

```
$results = $sphinx->query( '*' ); 
```

*我可以根据经验告诉你，Sphinx 绝对强大到可以处理 300+ 百万条记录。*

大多数时候，Sphinx 只是没有足够的资源来足够快地访问数据。整个系统共享“2GB”内存，因此 Sphinx 实际可用的内存可能会有很大差异。我已经看到 Web 服务器启动并启动 apache 实例、mysql、memcached 等——只剩下 100MB 的 RAM，这与 imo 进行 3 亿行搜索所需的数量相去甚远（还没有完成台架测试以找出实际数字）

**编辑** 另外，您最终会想要研究[Delta : Main](http://sphinxsearch.com/docs/1.10/delta-updates.html) indexing 解决方案。如果您没有多个数据库设置来承担服务器负载，那么当 Sphinx 索引时，它可能最终会锁定 MySQL，直到查询完成。

**编辑** 我遇到了 PHP API 的一些问题，所以我编译了 PHP 的 Sphinx C 扩展，这创造了奇迹，将处理时间缩短了一半。在我最终使用该扩展程序之前，我修复了加速一切的 API 部分。

最重要的 2 个： -- 注释掉所有“断言” -- 这可能不是安全的方法，但断言无论如何都不属于生产。如果你想让断言运行——使用扩展——查找所有“is_int”函数并替换为...

```
if ((int)$v === $v) {
/* code here */
} 
```

大型查询的类型转换实际上快了大约 30%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:05:54.920

感谢您的回复 CrazyVipa（我是 Ronalds 的同事）。

我们的 RAM 当前设置为 2GB，只是因为目前没有人使用我们的网站。通常当我们使用 Sphinx 时，我们将 RAM 设置为 12-16GB。我们跟踪了我们的 RAM 使用情况，它从未超过 10GB。

但我们会尝试您的配置和查询建议。

我们明天会回到这里。

# javascript - Web 音频 API 分析器节点不使用麦克风输入

> ID：14231265
> 
> 赞同：12
> 
> 时间：2013-01-09T08:44:47.107
> 
> 标签：javascript, google-chrome, webrtc, web-audio-api

[Chrome Canary 的http://code.google.com/p/chromium/issues/detail?id=112367](http://code.google.com/p/chromium/issues/detail?id=112367)阻止获取麦克风输入的错误现已修复。这部分似乎确实有效。我可以将麦克风输入分配给音频元素并通过扬声器听到结果。

但我想连接一个分析器节点以进行 FFT。如果我将音频源设置为本地文件，分析器节点工作正常。问题是当连接到麦克风音频流时，分析器节点只返回基值，就好像它根本没有音频流一样。（如果你好奇的话，它一遍又一遍地是-100。）

有谁知道怎么回事？还没有实施吗？这是铬错误吗？我在 Windows 7 上运行 26.0.1377.0 并启用了 getUserMedia 标志，并通过 python 的 simpleHTTPServer 通过 localhost 提供服务，因此它可以请求权限。

代码：

```
var aCtx = new webkitAudioContext();
var analyser = aCtx.createAnalyser();
if (navigator.getUserMedia) {
  navigator.getUserMedia({audio: true}, function(stream) {
    // audio.src = "stupid.wav"
    audio.src = window.URL.createObjectURL(stream);
  }, onFailure);
}
$('#audio').on("loadeddata",function(){
    source = aCtx.createMediaElementSource(audio);
    source.connect(analyser);
    analyser.connect(aCtx.destination);
    process();
}); 
```

同样，如果我将 audio.src 设置为注释版本，它可以工作，但使用麦克风则不行。过程包含：

```
FFTData = new Float32Array(analyser.frequencyBinCount);
analyser.getFloatFrequencyData(FFTData);
console.log(FFTData[0]); 
```

我还尝试使用 createMediaStreamSource 并绕过音频元素 - 示例 4 - [https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/webrtc-integration.html](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/webrtc-integration.html)。也失败了。:(

```
 if (navigator.getUserMedia) {
        navigator.getUserMedia({audio: true}, function(stream) {
        var microphone = context.createMediaStreamSource(stream);
        microphone.connect(analyser);
        analyser.connect(aCtx.destination);
        process();
    } 
```

我想有可能将 mediasteam 写入缓冲区，然后使用 dsp.js 或其他东西来做 fft，但我想在走这条路之前先检查一下。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T22:34:33.010

这是一个变量范围问题。对于第二个示例，我在本地定义麦克风，然后尝试在另一个函数中使用分析器访问其流。为了安心，我刚刚将所有 Web Audio API 节点设为全局。分析器节点开始报告非 -100 值也需要几秒钟。感兴趣的人的工作代码：

```
// Globals
var aCtx;
var analyser;
var microphone;
if (navigator.getUserMedia) {
    navigator.getUserMedia({audio: true}, function(stream) {
        aCtx = new webkitAudioContext();
        analyser = aCtx.createAnalyser();
        microphone = aCtx.createMediaStreamSource(stream);
        microphone.connect(analyser);
        // analyser.connect(aCtx.destination);
        process();
    });
};
function process(){
    setInterval(function(){
        FFTData = new Float32Array(analyser.frequencyBinCount);
        analyser.getFloatFrequencyData(FFTData);
        console.log(FFTData[0]);
    },10);
} 
```

如果您想听到现场音频，您可以将分析仪连接到目的地（扬声器），如上文所述。不过请注意一些可爱的反馈！

# facebook-graph-api - FB Graph API 用户搜索只返回 uid、first_name、last_name、username、sex

> ID：14231267
> 
> 赞同：1
> 
> 时间：2013-01-09T08:44:56.650
> 
> 标签：facebook-graph-api, facebook-fql

目前正在试验 FB GRAPH API Explorer Tool，目的是通过名字和姓氏搜索（任何）用户。

由于这个错误（[https://developers.facebook.com/bugs/331209630309433](https://developers.facebook.com/bugs/331209630309433)），我无法通过资源管理器测试名称搜索，因此我转而调查执行搜索时返回的数据类型。

为此，我的测试 FQL 查询采用以下格式：

```
SELECT uid, username, first_name, last_name, sex, website, about_me , activities , email, current_location, birthday_date, books, interests, work, .... {any other field}
FROM user 
WHERE uid in ({list of known/random user ids}) 
```

我注意到该查询为所有用户返回字段 uid、用户名、名字、姓氏和性别的值，但对于任何其他用户返回空/null。

这是什么原因造成的？这是因为这些用户不是我的“FB 好友”，他们的权限被设置为不将这些字段返回到 FB G API，或两者兼而有之，还是任何其他原因？

另外，我注意到大多数用户在他们的公共 FB 网站上的“收藏夹 > 其他”部分下都有一些链接/信息 - 这如何映射到 FB G API 以及如何检索？

任何建议表示赞赏。

约翰·史密斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:01:51.887

您需要为其余详细信息设置[权限。](https://developers.facebook.com/docs/reference/fql/permissions/)默认情况下只有用户的基本信息可用。

**更新 1**

设置[this](https://developers.facebook.com/docs/reference/javascript/FB.login/)，用于设置权限。

**更新 2**

看，您无法访问除您的朋友以外的用户的详细信息（只会显示基本信息）。对于朋友们，我运行了以下查询并得到了预期的结果（在设置了所需的权限之后）：

```
SELECT uid, username, first_name, last_name, sex, website, about_me , activities , email, current_location, birthday_date, books, interests, work
FROM user 
WHERE uid in (select uid2 from friend where uid1=me()) 
```

# android - 如何在 Android 设备上启用磁盘挂起？

> ID：14231270
> 
> 赞同：4
> 
> 时间：2013-01-09T08:45:08.540
> 
> 标签：android, hibernate, suspend

众所周知，Linux内核支持standby、suspend-to-ram、suspend-to-disk。但是，我发现 Android 不支持**suspend-to-disk**或**hibernate**，尽管它的内核是从 Linux 派生的。
现在，我想在 Android 上启用它，但不知道如何。我将基于**Andorid 4.1**和**Linux 3.0.8**完成我的工作。
您想提供任何有用的信息吗？以前有人做过吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:07:06.480

Android 在 try_to_freeze_tasks 时检查是否有人持有唤醒锁。当你想要休眠时，你可以忽略它。

# c++ - 显式构造函数和重载

> ID：14231276
> 
> 赞同：0
> 
> 时间：2013-01-09T08:45:22.093
> 
> 标签：c++, operator-overloading, raii, explicit-constructor

```
template<typename T>
class RAII
{
public:

    explicit RAII( T* p = 0 ): p_(p){}

    ~RAII() {delete p_;}

    T& operator*() const { return p_;} 
    T* operator‐&gt;() const{ return p_;}
}; 
```

* * *

```
//Usage example:
{
      RAII<std::vector<int>> r(new std::vector<int>());
      std::cout<<r­‐&gt;size()<<std::endl;
} // The std::vector<int> is automatically deallocated 
```

* * *

嗨，大家好 ：）

我的问题：在这种特定情况下，显式构造函数和两个运算符重载的目的是什么，以及它们在用法示例中是如何使用的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:51:28.163

第一件事：有两个错误： p_ 没有声明，返回`operator*`应该是`return *p_`.

* * *

无论如何，显式是所以构造函数不能被隐式调用。

考虑一下：

```
class Example {
public:
    int x;
    Example(int x) : x(x) {}
};

function ex(const Example& e) {
    std::cout << e.x;
}

int main() {
    ex(5);
    return 0;
} 
```

你期望这个编译吗？确实如此。它输出 5。原因是 Example 是隐式构造的。基本上`ex(5)`就是默默的变成了`ex(Example(5))`。将构造函数标记为显式会禁止这种行为。如果您向构造函数添加显式，这将是编译时错误。

* * *

至于运算符重载，这里有一个基本的“智能”指针。（如果您不能使用具有标准化编译器的编译器，我可能会使用 C++11 中的标准编译器之一。）

运算符重载允许对象以特定方式对对象作出反应。在这种情况下，运算符重载允许类假装是它所包含的同一类型的指针。

```
RAII<std::vector<int>> r(new std::vector<int>());
std::cout<<r­‐&gt;size()<<std::endl; 
```

`r`在这里假装是一个`std::vector<int>*`via 运算符重载。真正发生的是它被称为：

```
(r­.operator->())->size() 
```

`operator->`返回 a `std::vector<int>*`，所以第二个`->`是访问它并调用该`size()`方法。

您可能熟悉的另一个运算符重载示例是 std::vector's `operator[]`。 `operator[]`返回对元素的引用。

运算符重载当然并不总是用来假装在做已经内置的事情。考虑一下`ostream`。`operator<<`它不是位移运算符，而是将数据放入流中。

* * *

更多信息：[标准智能指针](http://en.cppreference.com/w/cpp/memory)/[提升智能指针](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/smart_ptr.htm)/ [RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization) /[运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)。

哦，您的代码违反了非常普遍遵守[的三](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)规则（或[C++11 中的五规则](https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11)）。实际上，如果制作了副本，您的类将双重删除指针。

```
RAII<int> p(new int)
RAII<int> q = p;
//when q's destructor runs, bad bad things will happen since p's destructor already deleted the int. 
```

# mysql - 使用 MySQL Workbench 5.2 在表上执行更新命令时出错（错误代码：1175）

> ID：14231278
> 
> 赞同：18
> 
> 时间：2013-01-09T08:45:22.673
> 
> 标签：mysql, sql-update, mysql-workbench, error-code

我正在使用 MySQL Server5.5，其中包含 MySQL Workbench 5.2 CE。我正在使用 MySQL Workbench 5.2 。我在数据库中有一个名为**user的表。**我在 MySQL Workbench 的 SQL Editor 上执行了以下命令：

```
UPDATE user SET email = 'abc@yahoo.com' WHERE email='ripon.wasim@yahoo.com'; 
```

但不幸的是，我收到以下错误：

```
Error Code: 1175\. You are using safe update mode and you tried to update a table without a WHERE that uses a KEY column To disable safe mode, toggle the option in Preferences -> SQL Editor -> Query Editor and reconnect. 
```

怎么了？高度赞赏帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-09T08:48:46.200

每次尝试更新mysql中的行时遇到这种错误，这是因为您尝试更新没有使用`KEY`列的WHERE的表。

您可以使用修复它，

```
SET SQL_SAFE_UPDATES=0;
UPDATE user SET email = 'abc@yahoo.com' WHERE email='ripon.wasim@yahoo.com'; 
```

或在工作台中

*   编辑 -> 首选项 -> SQL 查询
*   取消选中没有 WHERE 子句的禁止 UPDATE 和 DELETE 语句（安全更新）
*   查询 --> 重新连接到服务器

[![在此处输入图像描述](../Images/63155bc5b4a8a45e98612648ae0575ef.png)](https://i.stack.imgur.com/uEc8r.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-25T07:28:17.190

停用和重新激活更正确

```
SET SQL_SAFE_UPDATES=0; --disable
UPDATE user SET email = 'abc@yahoo.com' WHERE email='ripon.wasim@yahoo.com';
SET SQL_SAFE_UPDATES=1; --enable 
```

# firefox - Selenium Webdriver 和 Firefox 18

> ID：14231279
> 
> 赞同：9
> 
> 时间：2013-01-09T08:45:29.207
> 
> 标签：firefox, selenium

我的 Selenium 测试使用 onMouseOver 功能，例如

```
 List<WebElement> menuitems = getDriver().findElements(By.tagName("li"));
    Actions builder = new Actions(getDriver());
    WebElement menu = menuitems.get(2);
    getDriver().manage().timeouts().implicitlyWait(Constants.IMPLICITY_WAIT, TimeUnit.SECONDS);
    builder.moveToElement(menu).build().perform(); 
```

我正在使用 Firefox 驱动程序。由于 Firefox 将自身更新到版本 18，我的测试停止工作。我知道这与原生事件支持有关 - 但版本 18 不支持原生事件，还是我能够启用它们？如果没有，我的代码是否有任何替代实现？

我正在使用 selenium java 2.28.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:31:54.640

对于 Firefox 18 支持，我们需要使用 selenium webdriver api 2.28.0,jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:51:27.547

Selenium Java 2.27 提到已添加对 FF17 的本机支持。[但是，在 2.28 的更改日志](http://selenium.googlecode.com/svn/trunk/java/CHANGELOG)中没有提到对 FF18 的支持。所以它的 webdriver 不支持原生事件，而不是 FF18 不支持原生事件。您可以尝试降级到 FF 17，并且可能会关闭自动更新一段时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T19:56:17.533

在 WebDriver 版本支持 FF18 之前，回滚到 FF17 是一项临时工作

FF17 扩展支持发布包 -- [http://www.mozilla.org/en-US/firefox/organizations/all.html](http://www.mozilla.org/en-US/firefox/organizations/all.html)

注意：如果您是 Mac 用户，您只需在应用程序文件夹中将当前 FF 从“FireFox”重命名为“FireFox18”即可。从上面的 URL 安装包，这将创建一个名为“FireFox”的新应用程序，WebDriver 将使用该应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T10:04:25.037

我的悬停与 v28 中断。我现在使用下面的 hoverOver 方法和一个可选的 javascript 解决方法，它似乎工作正常。

```
 public void HoverOver(IWebElement elem, bool javascriptWorkaround = true)
    {
        if (javascriptWorkaround)
        {
                String code = "var fireOnThis = arguments[0];"
                    + "var evObj = document.createEvent('MouseEvents');"
                    + "evObj.initEvent( 'mouseover', true, true );"
                    + "fireOnThis.dispatchEvent(evObj);";
                ((IJavaScriptExecutor)driver).ExecuteScript(code, elem);
        }
        else
        {
            Actions builder = new Actions(driver);
            builder.MoveToElement(elem).Build().Perform();
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T13:06:55.990

我在使用 Firefox 20 时遇到了同样的问题。然后我重新安装了最新的 Selenium 服务器（.jar 文件）。

[http://selenium.googlecode.com/files/selenium-server-standalone-2.32.0.jar](http://selenium.googlecode.com/files/selenium-server-standalone-2.32.0.jar)

希望这有效！

# java - java泛型方法

> ID：14231280
> 
> 赞同：1
> 
> 时间：2013-01-09T08:45:30.303
> 
> 标签：java, generics, object, mixed

我有类寻呼机。而且我需要放入各种类型的列表，并且我需要返回相同的列表类型。

Pager 的代码只有构造函数和 getData 方法，它们只获取一个子集并返回它。

```
public class Pager<E> {
private int page;
private int amount;
private List<E> list;

/**
 * Constructor
 * @param amount 
 * @param page 
 * @param list 
 */
public Pager(int page, int amount, List<E> list) {
    this.page = page;
    this.amount = amount;
    this.list = list;
}

/**
 * Returns data to counter
 * @return
 */
public List<E> getData() {
    List<E> result = new ArrayList<E>();

    int from = this.page * this.amount;
    int to = (this.page * this.amount) + this.amount;

    for (int i = from; i < to; i++) {
        result.add(this.list.get(i));
    }

    return result;
} 
```

方法调用我用列表调用寻呼机，然后我需要将结果放回列表中。

```
List<MyType1> list1 = ArrayList<Mytype1>();
List<MyType2> list2 = ArrayList<Mytype2>();
Pager pager = new Pager(
                    page,
                    amount,
                    list1;
                  );
list1 = pager.getData();

Pager pager = new Pager(
                    page,
                    amount,
                    list2
                  );

list2 = pager.getData(); 
```

那么如何使这个寻呼机通用来处理各种类型的列表呢？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:53:01.403

将泛型类型参数添加到您的 Pager 变量中：

```
List<MyType1> list1 = new ArrayList<Mytype1>();
List<MyType2> list2 = new ArrayList<Mytype2>();
Pager<MyType1> pager1 = new Pager<MyType1>(
                    page,
                    amount,
                    list1;
                  );
list1 = pager1.getData();

Pager<MyType2> pager2 = new Pager<MyType2>(
                    page,
                    amount,
                    list2
                  );

list2 = pager2.getData(); 
```

# gcc - CMake 和编译器警告

> ID：14231292
> 
> 赞同：28
> 
> 时间：2013-01-09T08:46:41.227
> 
> 标签：gcc, cmake

我`CMake`用来生成unix makefile。之后，我使用`make`实用程序编译项目。问题是我看不到任何警告！例如，这会导致没有警告的干净构建：

```
#include <iostream>

class Foo
{
    int first;
    int second;
public:
    Foo(int a, int b)
    : second(a) // invalid initialization order
    , first(b)
    {
    }
};

int main(int argc, char** argv)
{
    int unused; // unused variable
    int x;
    double y = 3.14159;
    x = y; // invalid cast
    Foo foo(1,2);
    std::cout << y << std::endl;
    return 0;
} 
```

未使用的变量和有损变量强制转换 - 没有警告！我的`CMakeLists.txt`文件很简约：

```
cmake_minimum_required(VERSION 2.8)

add_executable(main main.cpp) 
```

当我运行时`cmake`，`make`我的输出如下所示：

```
[100%] Building CXX object CMakeFiles/main.dir/main.cpp.o
Linking CXX executable main
[100%] Built target main 
```

但是当我添加这行代码时：

```
#warning ("Custom warning") 
```

结果输出包含警告：

```
[100%] Building CXX object CMakeFiles/main.dir/main.cpp.o
../src/main.cpp:15:2: warning: #warning ("Custom Warning") [-Wcpp]
Linking CXX executable main
[100%] Built target main 
```

我使用 Ubuntu 12.04 LTS 和 GCC 作为编译器。也许 CMake 将一些标志传递给编译器，导致没有警告。我怎样才能检查它？我无法读取 CMake 生成的 makefile，它们有点神秘。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-09T12:19:02.087

编译器警告的立场是分开的。有些包维护者会告诉你他们知道自己在做什么，无论如何都应该忽略编译器警告。（我认为他们大错特错了。）但我想这就是为什么 CMake 主要不理会警告设置的原因。

如果您想更复杂一点，请检查正在使用的编译器，并将标志添加到特定目标的特定属性。

## 应用于单个目标

```
if ( CMAKE_COMPILER_IS_GNUCC )
    target_compile_options(main PRIVATE -Wall -Wextra)
endif()
if ( MSVC )
    target_compile_options(main PRIVATE /W4)
endif() 
```

## 适用于所有目标

```
if ( CMAKE_COMPILER_IS_GNUCC )
    set(CMAKE_CXX_FLAGS  "${CMAKE_CXX_FLAGS} -Wall -Wextra")
endif()
if ( MSVC )
    set(CMAKE_CXX_FLAGS  "${CMAKE_CXX_FLAGS} /W4")
endif() 
```

注意：`-Werror`为 GCC 或`/WX`MSVC 添加以将所有警告视为错误。这会将所有警告视为错误。这对于新项目强制执行警告严格性很方便。

此外，`-Wall -Wextra`并不意味着“所有错误”；历史上的意思是“*每个人都可以同意的*`-Wall`所有错误”和“更多”。从那开始，然后仔细阅读*您*的 GCC 版本的手册，并找到编译器在警告方面还能为您做些*什么......**`-Wextra`*

 **** * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-09T11:30:31.907

用这行代码解决问题：

```
add_definitions ("-Wall") 
```

结果现在看起来像这样：

```
[100%] Building CXX object CMakeFiles/main.dir/main.cpp.o
../src/main.cpp:15:2: warning: #warning ("Custom warning") [-Wcpp]
../src/main.cpp: In constructor ‘WarnSrc::WarnSrc(int, int)’:
../src/main.cpp:6:9: warning: ‘WarnSrc::second’ will be initialized after [-Wreorder]
../src/main.cpp:5:9: warning:   ‘int WarnSrc::first’ [-Wreorder]
../src/main.cpp:8:5: warning:   when initialized here [-Wreorder]
../src/main.cpp: In function ‘int main(int, char**)’:
../src/main.cpp:19:9: warning: unused variable ‘unused’ [-Wunused-variable]
../src/main.cpp:20:9: warning: variable ‘x’ set but not used [-Wunused-but-set-variable]
Linking CXX executable main
[100%] Built target main 
```***

# c# - 单击按钮时将数据保存到文件中？

> ID：14231293
> 
> 赞同：0
> 
> 时间：2013-01-09T08:46:41.657
> 
> 标签：c#, winforms

我正在为 C# 中的 ledcube 制作应用程序。它现在所做的只是允许用户单击一些按钮来更改所需 LED 的颜色。我试图暗示一个功能，它允许用户将当前配置（颜色）保存到文件中，以后可以由编程器读取。保存的文件必须包含每个 LED 的二进制代码（LED 是否打开，以及哪种颜色：关闭、红色、绿色、橙色）。我在想 1 个 LED 可以包含 00 - 11 之间的值（所以 0 和 3）。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
public partial class Form1 : Form
{
    Button[,] laag_1 = new Button[8, 8];
    Button[,] laag_2 = new Button[8, 8];
    Button[,] laag_3 = new Button[8, 8];
    Button[,] laag_4 = new Button[8, 8];
    Button[,] laag_5 = new Button[8, 8];
    Button[,] laag_6 = new Button[8, 8];
    Button[,] laag_7 = new Button[8, 8];
    Button[,] laag_8 = new Button[8, 8];

    public Form1()
    {
        InitializeComponent();
        for (int x = 0; x < laag_1.GetLength(0); x++)
        {
            for (int y = 0; y < laag_1.GetLength(1); y++)
            {
                laag_1[x, y] = new Button();
                laag_1[x, y].SetBounds((50 * x) + 100, (50 * y) + 30, 40, 40);
                laag_1[x, y].Click += new EventHandler(this.btnEvent_click);
                Controls.Add(laag_1[x, y]);
                laag_1[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_2.GetLength(0); x++)
        {
            for (int y = 0; y < laag_1.GetLength(1); y++)
            {
                laag_2[x, y] = new Button();
                laag_2[x, y].SetBounds((50 * x) + 520, (50 * y) + 30, 40, 40);
                laag_2[x, y].Click += new EventHandler(this.btnEvent_click);
                Controls.Add(laag_2[x, y]);
                laag_2[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_3.GetLength(0); x++)
        {
            for (int y = 0; y < laag_3.GetLength(1); y++)
            {
                laag_3[x, y] = new Button();
                laag_3[x, y].SetBounds((50 * x) + 940, (50 * y) + 30, 40, 40);
                laag_3[x, y].Click += new EventHandler(this.btnEvent_click);
                Controls.Add(laag_3[x, y]);
                laag_3[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_4.GetLength(0); x++)
        {
            for (int y = 0; y < laag_4.GetLength(1); y++)
            {
                laag_4[x, y] = new Button();
                laag_4[x, y].SetBounds((50 * x) + 1360, (50 * y) + 30, 40, 40);
                laag_4[x, y].Click += new EventHandler(this.btnEvent_click);
                Controls.Add(laag_4[x, y]);
                laag_4[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_5.GetLength(0); x++)
        {
            for (int y = 0; y < laag_5.GetLength(1); y++)
            {
                laag_5[x, y] = new Button();
                laag_5[x, y].SetBounds((50 * x) + 100, (50 * y) + 520, 40, 40);
                laag_5[x, y].Click += new EventHandler(this.btnEvent_click);
                Controls.Add(laag_5[x, y]);
                laag_5[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_6.GetLength(0); x++)
        {
            for (int y = 0; y < laag_6.GetLength(1); y++)
            {
                laag_6[x, y] = new Button();
                laag_6[x, y].SetBounds((50 * x) + 520, (50 * y) + 520, 40, 40);
                laag_6[x, y].Click += new EventHandler(this.btnEvent_click);
                Controls.Add(laag_6[x, y]);
                laag_6[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_7.GetLength(0); x++)
        {
            for (int y = 0; y < laag_7.GetLength(1); y++)
            {
                laag_7[x, y] = new Button();
                laag_7[x, y].SetBounds((50 * x) + 940, (50 * y) + 520, 40, 40);
                laag_7[x, y].Click += new EventHandler(this.btnEvent_click);
                Controls.Add(laag_7[x, y]);
                laag_7[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_8.GetLength(0); x++)
        {
            for (int y = 0; y < laag_8.GetLength(1); y++)
            {
                laag_8[x, y] = new Button();
                laag_8[x, y].SetBounds((50 * x) + 1360, (50 * y) + 520, 40, 40);
                laag_8[x, y].Click += new EventHandler(this.btnEvent_click);
                Controls.Add(laag_8[x, y]);
                laag_8[x, y].BackColor = Color.Black;
            }
        }
        this.FormClosing += new FormClosingEventHandler(this.SaveEventHandler);
        LoadFromFile();
    }

    void btnEvent_click(object sender, EventArgs e)
    {
        Control ctrl = ((Control)sender);
        switch (ctrl.BackColor.Name)
        {
            case "Red":
                ctrl.BackColor = Color.Green;
                break;
            case "Black":
                ctrl.BackColor = Color.Red;
                break;
            case "Green":
                ctrl.BackColor = Color.Yellow;
                break;
            case "Yellow":
                ctrl.BackColor = Color.Black;
                break;
            default:
                ctrl.BackColor = Color.Black;
                break;
        }
    }

    void SaveEventHandler(object sender, EventArgs e)
    {
        SaveToFile();
    }

    private const string filePath = @"C:\testmap\laag_1.txt";
    private void LoadFromFile()
    {
        if (!System.IO.File.Exists(filePath))
            return;

        byte[] data = System.IO.File.ReadAllBytes(filePath);
        if (data == null || data.Length != laag_1.GetLength(0) * laag_1.GetLength(1) * 2)
            return;

        for (int x = 0; x < laag_1.GetLength(0); x++)
        {
            for (int y = 0; y < laag_1.GetLength(1); y++)
            {
                int position = (y * laag_1.GetLength(0) + x);

                string value = ((char)data[2 * position]).ToString() + ((char)data[2 * position + 1]).ToString();
                Color color;
                switch (value)
                {
                    case "01":
                        color = Color.Red;
                        break;
                    case "00":
                        color = Color.Black;
                        break;
                    case "10":
                        color = Color.Green;
                        break;
                    case "11":
                        color = Color.Yellow;
                        break;
                    default:
                        color = Color.Black;
                        break;
                }

                laag_1[x, y].BackColor = color;
            }
        }

    }

    private void SaveToFile()
    {
        Dictionary<Form1, int> d = new Dictionary<Form1, int>();

        byte[] data = new byte[laag_1.GetLength(0) * laag_1.GetLength(1) * 2];
        for (int x = 0; x < laag_1.GetLength(0); x++)
        {
            for (int y = 0; y < laag_1.GetLength(1); y++)
            {
                int position = (y * laag_1.GetLength(0) + x);
                string value;
                switch (laag_1[x, y].BackColor.Name)
                {
                    case "Red":
                        value = "01";
                        break;
                    case "Black":
                        value = "00";
                        break;
                    case "Green":
                        value = "10";
                        break;
                    case "Yellow":
                        value = "11";
                        break;
                    default:
                        value = "00";
                        break;
                }
                data[2 * position] = (byte)value[0];
                data[2 * position + 1] = (byte)value[1];
            }
        }

        System.IO.File.WriteAllBytes(filePath, data);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        for (int x = 0; x < laag_1.GetLength(0); x++)
        {
            for (int y = 0; y < laag_1.GetLength(1); y++)
            {
                laag_1[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_2.GetLength(0); x++)
        {
            for (int y = 0; y < laag_2.GetLength(1); y++)
            {
                laag_2[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_3.GetLength(0); x++)
        {
            for (int y = 0; y < laag_3.GetLength(1); y++)
            {
                laag_3[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_4.GetLength(0); x++)
        {
            for (int y = 0; y < laag_4.GetLength(1); y++)
            {
                laag_4[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_5.GetLength(0); x++)
        {
            for (int y = 0; y < laag_5.GetLength(1); y++)
            {
                laag_5[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_6.GetLength(0); x++)
        {
            for (int y = 0; y < laag_6.GetLength(1); y++)
            {
                laag_6[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_7.GetLength(0); x++)
        {
            for (int y = 0; y < laag_7.GetLength(1); y++)
            {
                laag_7[x, y].BackColor = Color.Black;
            }
        }
        for (int x = 0; x < laag_8.GetLength(0); x++)
        {
            for (int y = 0; y < laag_8.GetLength(1); y++)
            {
                laag_8[x, y].BackColor = Color.Black;
            }
        }
    }

 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:03:09.097

您可以查看用于保存和加载文件的[File.WriteAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)和[File.ReadAllBytes方法。](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)

另请查看[OpenFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)控件以选择要打开的文件。

此外，没有必要对值吝啬，您可以（并且应该）为每个按钮使用一个完整的字节，只需循环按钮并将值插入 byte[]，然后将它们写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:07:44.627

我假设您想为此使用*对象序列化*。

*XMLSerialization*：[http :](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization) *//www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization BinarySerialization*：http: [//msdn.microsoft.com/en-us/library/72hyey7b (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/72hyey7b(v=vs.71).aspx)

如果您想保存数据然后由另一个应用程序读取它，我建议您进行序列化，因为您不必担心从文件中读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:35:10.820

尝试这个：

```
private const string filePath = @"d:\test.txt";
private void LoadFromFile()
{
    byte[] data = System.IO.File.ReadAllBytes(filePath);
    for (int x = 0; x < btn.GetLength(0); x++)
    {
        for (int y = 0; y < btn.GetLength(1); y++)
        {
            int position = (x * btn.GetLength(1) + y) * 2;
            int index = position / 8;
            int shift = position % 8;

            byte value = (byte)((data[index] >> shift) % 4);
            Color color;
            switch (value)
            {
                case 1:
                    color = Color.Red;
                    break;
                case 0:
                    color = Color.Black;
                    break;
                case 2:
                    color = Color.Green;
                    break;
                case 3:
                    color = Color.Yellow;
                    break;
                default:
                    color = Color.Black;
                    break;
            }

            btn[x, y].BackColor = color;
        }
    }
}

private void SaveToFile()
{
    byte[] data = new byte[(7 + btn.GetLength(0) * btn.GetLength(1) * 2) / 8]; 
    for (int x = 0; x < btn.GetLength(0); x++)
    {
        for (int y = 0; y < btn.GetLength(1); y++)
        {
            int position = (x * btn.GetLength(1) + y) * 2;
            byte value;
            switch (btn[x, y].BackColor.Name)
            {
                case "Red":
                    value = 1;
                    break;
                case "Black":
                    value = 0;
                    break;
                case "Green":
                    value = 2;
                    break;
                case "Yellow":
                    value = 3;
                    break;
                default:
                    value = 0;
                    break;
            }
            int index = position / 8;
            int shift = position % 8;
            data[index] = (byte)(data[index] | (value << shift));
        }
    }

    System.IO.File.WriteAllBytes(filePath, data);
} 
```

[更新]：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        Button[,] btn = new Button[8, 8];
        public Form1()
        {
            InitializeComponent();
            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    btn[x, y] = new Button();
                    btn[x, y].SetBounds((50 * x) + 30, (50 * y) + 30, 40, 40);
                    btn[x, y].Click += new EventHandler(this.btnEvent_click);
                    Controls.Add(btn[x, y]);
                    btn[x, y].BackColor = Color.Black;
                }
            }

            this.FormClosing += new FormClosingEventHandler(this.SaveEventHandler);
            if (System.IO.File.Exists(filePath))
                LoadFromFile();
        }

        void btnEvent_click(object sender, EventArgs e)
        {
            Control ctrl = ((Control)sender);
            switch (ctrl.BackColor.Name)
            {
                case "Red":
                    ctrl.BackColor = Color.Green;
                    break;
                case "Black":
                    ctrl.BackColor = Color.Red;
                    break;
                case "Green":
                    ctrl.BackColor = Color.Yellow;
                    break;
                case "Yellow":
                    ctrl.BackColor = Color.Black;
                    break;
                default:
                    ctrl.BackColor = Color.Black;
                    break;
            }
        }

        void SaveEventHandler(object sender, EventArgs e)
        {
            SaveToFile();
        }

        private const string filePath = @"d:\test.txt";
        private void LoadFromFile()
        {
            byte[] data = System.IO.File.ReadAllBytes(filePath);
            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    int position = (x * btn.GetLength(1) + y) * 2;
                    int index = position / 8;
                    int shift = position % 8;

                    byte value = (byte)((data[index] >> shift) % 4);
                    Color color;
                    switch (value)
                    {
                        case 1:
                            color = Color.Red;
                            break;
                        case 0:
                            color = Color.Black;
                            break;
                        case 2:
                            color = Color.Green;
                            break;
                        case 3:
                            color = Color.Yellow;
                            break;
                        default:
                            color = Color.Black;
                            break;
                    }

                    btn[x, y].BackColor = color;
                }
            }
        }

        private void SaveToFile()
        {
            byte[] data = new byte[(7 + btn.GetLength(0) * btn.GetLength(1) * 2) / 8]; 
            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    int position = (x * btn.GetLength(1) + y) * 2;
                    byte value;
                    switch (btn[x, y].BackColor.Name)
                    {
                        case "Red":
                            value = 1;
                            break;
                        case "Black":
                            value = 0;
                            break;
                        case "Green":
                            value = 2;
                            break;
                        case "Yellow":
                            value = 3;
                            break;
                        default:
                            value = 0;
                            break;
                    }
                    int index = position / 8;
                    int shift = position % 8;
                    data[index] = (byte)(data[index] | (value << shift));
                }
            }

            System.IO.File.WriteAllBytes(filePath, data);
        }
    }
} 
```

[更新 #2] 将每个 LED 的存储重新设计为完整字节：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        Button[,] btn = new Button[8, 8];
        public Form1()
        {
            InitializeComponent();
            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    btn[x, y] = new Button();
                    btn[x, y].SetBounds((50 * x) + 30, (50 * y) + 30, 40, 40);
                    btn[x, y].Click += new EventHandler(this.btnEvent_click);
                    Controls.Add(btn[x, y]);
                    btn[x, y].BackColor = Color.Black;
                }
            }

            this.FormClosing += new FormClosingEventHandler(this.SaveEventHandler);
            LoadFromFile();
        }

        void btnEvent_click(object sender, EventArgs e)
        {
            Control ctrl = ((Control)sender);
            switch (ctrl.BackColor.Name)
            {
                case "Red":
                    ctrl.BackColor = Color.Green;
                    break;
                case "Black":
                    ctrl.BackColor = Color.Red;
                    break;
                case "Green":
                    ctrl.BackColor = Color.Yellow;
                    break;
                case "Yellow":
                    ctrl.BackColor = Color.Black;
                    break;
                default:
                    ctrl.BackColor = Color.Black;
                    break;
            }
        }

        void SaveEventHandler(object sender, EventArgs e)
        {
            SaveToFile();
        }

        private const string filePath = @"d:\test.txt";
        private void LoadFromFile()
        {
            if (!System.IO.File.Exists(filePath))
                return;

            byte[] data = System.IO.File.ReadAllBytes(filePath);
            if (data == null || data.Length != btn.GetLength(0) * btn.GetLength(1))
                return;

            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    int position = (y * btn.GetLength(0) + x);

                    char value = (char)data[position];
                    Color color;
                    switch (value)
                    {
                        case '1':
                            color = Color.Red;
                            break;
                        case '0':
                            color = Color.Black;
                            break;
                        case '2':
                            color = Color.Green;
                            break;
                        case '3':
                            color = Color.Yellow;
                            break;
                        default:
                            color = Color.Black;
                            break;
                    }

                    btn[x, y].BackColor = color;
                }
            }
        }

        private void SaveToFile()
        {
            byte[] data = new byte[btn.GetLength(0) * btn.GetLength(1)]; 
            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    int position = (y * btn.GetLength(0) + x);
                    char value;
                    switch (btn[x, y].BackColor.Name)
                    {
                        case "Red":
                            value = '1';
                            break;
                        case "Black":
                            value = '0';
                            break;
                        case "Green":
                            value = '2';
                            break;
                        case "Yellow":
                            value = '3';
                            break;
                        default:
                            value = '0';
                            break;
                    }
                    data[position] = (byte)value;
                }
            }

            System.IO.File.WriteAllBytes(filePath, data);
        }
    }
} 
```

更新#3：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        Button[,] btn = new Button[8, 8];
        public Form1()
        {
            InitializeComponent();
            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    btn[x, y] = new Button();
                    btn[x, y].SetBounds((50 * x) + 30, (50 * y) + 30, 40, 40);
                    btn[x, y].Click += new EventHandler(this.btnEvent_click);
                    Controls.Add(btn[x, y]);
                    btn[x, y].BackColor = Color.Black;
                }
            }

            this.FormClosing += new FormClosingEventHandler(this.SaveEventHandler);
            LoadFromFile();
        }

        void btnEvent_click(object sender, EventArgs e)
        {
            Control ctrl = ((Control)sender);
            switch (ctrl.BackColor.Name)
            {
                case "Red":
                    ctrl.BackColor = Color.Green;
                    break;
                case "Black":
                    ctrl.BackColor = Color.Red;
                    break;
                case "Green":
                    ctrl.BackColor = Color.Yellow;
                    break;
                case "Yellow":
                    ctrl.BackColor = Color.Black;
                    break;
                default:
                    ctrl.BackColor = Color.Black;
                    break;
            }
        }

        void SaveEventHandler(object sender, EventArgs e)
        {
            SaveToFile();
        }

        private const string filePath = @"d:\test.txt";
        private void LoadFromFile()
        {
            if (!System.IO.File.Exists(filePath))
                return;

            byte[] data = System.IO.File.ReadAllBytes(filePath);
            if (data == null || data.Length != btn.GetLength(0) * btn.GetLength(1) * 2)
                return;

            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    int position = (y * btn.GetLength(0) + x);

                    string value = ((char)data[2 * position]).ToString() + ((char)data[2 * position + 1]).ToString();
                    Color color;
                    switch (value)
                    {
                        case "01":
                            color = Color.Red;
                            break;
                        case "00":
                            color = Color.Black;
                            break;
                        case "10":
                            color = Color.Green;
                            break;
                        case "11":
                            color = Color.Yellow;
                            break;
                        default:
                            color = Color.Black;
                            break;
                    }

                    btn[x, y].BackColor = color;
                }
            }
        }

        private void SaveToFile()
        {
            Dictionary<Form1, int> d = new Dictionary<Form1, int>();

            byte[] data = new byte[btn.GetLength(0) * btn.GetLength(1) * 2]; 
            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    int position = (y * btn.GetLength(0) + x);
                    string value;
                    switch (btn[x, y].BackColor.Name)
                    {
                        case "Red":
                            value = "01";
                            break;
                        case "Black":
                            value = "00";
                            break;
                        case "Green":
                            value = "10";
                            break;
                        case "Yellow":
                            value = "11";
                            break;
                        default:
                            value = "00";
                            break;
                    }
                    data[2 * position] = (byte)value[0];
                    data[2 * position + 1] = (byte)value[1];
                }
            }

            System.IO.File.WriteAllBytes(filePath, data);
        }
    }
} 
```

# ios - 从 xib 移动到情节提要

> ID：14231297
> 
> 赞同：0
> 
> 时间：2013-01-09T08:46:47.143
> 
> 标签：ios, xcode, ipad, storyboard

我有一个应用程序，它有一个用于接口的 XIB 文件。我想转到情节提要。我创建了故事板，添加了所有相关的 UI 元素并将它们链接到头文件 (IBoutlets)。我已经查看了我的项目摘要并在 iPad 部署部分中选择了我的故事板。

我的问题是该应用程序仍在使用 XIB，而不是我的故事板。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:51:59.083

从 Xib 切换到 Storyboard 仍然是错误的......从您的 iPhone/模拟器中手动删除应用程序或恢复模拟器。清除您的项目等。也许您也必须重新启动 Xcode。

# cakephp - 在自适应贝宝链式支付中从贝宝获取通知 url 上没有返回数据

> ID：14231298
> 
> 赞同：2
> 
> 时间：2013-01-09T08:46:48.153
> 
> 标签：cakephp, paypal, paypal-ipn, paypal-adaptive-payments

我正在使用自适应支付的链式方法：参数是这样的：

```
$bodyparams = array("requestEnvelope.errorLanguage" => "en_US",
            "actionType" => "PAY",
            "currencyCode" => "USD",
            "cancelUrl" => "www.example.com/courses/cancelPurchase/", 
            "returnUrl" => "www.example.com/courses/buyCourse/" . $courseId . "/" . $courseDetails['Course']['certificate_amount'], 
            "receiverList.receiver(0).email" => $adminDetails['paypal_email'], 
            "receiverList.receiver(0).amount" => round($courseDetails['Course']['certificate_amount'], 2), 
            "receiverList.receiver(0).primary" => "true",
            "receiverList.receiver(1).email" => $courseDetails['UsersRole']['User']['paypal_email'], 
            "receiverList.receiver(1).amount" => $courseCreatorAmount, 
            "receiverList.receiver(1).primary" => "false", 
            "ipnNotificationUrl" => "www.example.com/courses/ipnReturn", 
        ); 
```

在这里，我没有得到任何关于**ipnNotificationUrl**提供的数据。似乎从贝宝返回后，它根本没有点击这个网址。

请帮忙！！

仅供参考：我使用 cakephp 作为框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:35:44.530

您的帐户中是否打开了 IPN？应该在个人资料 -> 我的销售工具 -> 即时付款通知下。

确保此功能已打开。

如果是，请联系[http://www.paypal.com/mts](http://www.paypal.com/mts)并要求他们查看 IPN 历史记录，看看他们是否可以找到任何无法正常工作的原因。

# android - 在 Android 上从 Java 调用 ping 可执行文件的替代方法

> ID：14231299
> 
> 赞同：2
> 
> 时间：2013-01-09T08:46:48.970
> 
> 标签：android, command, ping

我正在使用以下代码调用android设备ping命令：

```
public static String pingServer() {
PingResult result = new PingResult();
String jsonString = null;
try {
String command = "ping -c 3 192.168.8.185"; 
Process p = Runtime.getRuntime().exec(command);
int status = p.waitFor();
InputStream input = p.getInputStream(); 
BufferedReader in = new BufferedReader(new InputStreamReader(input));
StringBuffer buffer = new StringBuffer();
String line = "";
while ((line = in.readLine()) != null) {
buffer.append(line);
buffer.append("\n");
}

String bufferStr = buffer.toString();
        System.out.println(bufferStr);

} catch (Exception e) {
System.out.println("---------------exception-----------ping");
System.out.println(e.getMessage());
// e.printStackTrace();

}
} 
```

BufferStr 总是获取最后一行数据。

3个发送，3个接收，0%丢包，时间2000ms

可以得到详细的结果。 ![在此处输入图像描述](../Images/d23b7406a97b93ac7a036fa92c2cd5c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:59:56.160

[使用InetAddress.isReachable](http://developer.android.com/reference/java/net/InetAddress.html#isReachable%28int%29)可能更简单、更容易：

```
if (InetAddress.getByName("192.168.8.185").isReachable(6000))
    ... 
```

# android - 如何始终使用任何设备屏幕类型显示网格 2 列

> ID：14231308
> 
> 赞同：0
> 
> 时间：2013-01-09T08:47:22.260
> 
> 标签：android, android-layout

我有一个gridview，但它总是排成两列，我希望它总是排成两列。

这是网格布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/newsScroller"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F5F5" >

   <GridView  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/newsScrollerContent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:verticalSpacing="10dp" >
    </GridView>

</ScrollView> 
```

这是网格中的项目。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="5dip"
    android:layout_gravity="center" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="130dip"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:src="@drawable/icon" >
    </ImageView>

    <TextView
        android:id="@+id/grid_item_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/grid_item_image"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="2dp"
        android:gravity="center"
        android:shadowColor="#ffffff"
        android:shadowDx="1"
        android:shadowDy="2"
        android:shadowRadius="2"
        android:textColor="#333333"
        android:textStyle="bold"
        android:textSize="14sp" >
    </TextView>

</RelativeLayout> 
```

我的问题，当我使用设备时，nexus 运行完美，但是如果我使用较小的屏幕设备将只显示一列，如下所示：

![在此处输入图像描述](../Images/ebf6bf1dcdb2b9983232a40037ebe068.png)

如果我使用平板电脑，那么将是五列。我的问题是，当我在设备中打开任何内容或任何屏幕尺寸时，它如何始终是两列网格。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:49:43.610

相反`android:numColumns="auto_fit"`，只需使用 :`android:numColumns="2"` 在每个网格项目中替换`fill_parent`为`wrap_content`. 更复杂的解决方案是在代码中计算屏幕宽度，然后也通过代码设置项目宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:54:49.297

`android:numColumns=2`您可以通过在 xml 中使用网格视图的此属性或使用网格视图的此方法来设置列数`setNumColumns(2)`。**不要使用自动拟合**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:50:11.473

您需要将 android:numColumns 更改为 2，而不是 auto_fit

```
 <GridView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/newsScrollerContent"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:horizontalSpacing="10dp"
    android:numColumns="2"
    android:verticalSpacing="10dp" > 
```

# c# - 如何知道使用 this.Request.Form 点击了哪个按钮

> ID：14231313
> 
> 赞同：0
> 
> 时间：2013-01-09T08:47:40.837
> 
> 标签：c#, asp.net

我在我的页面中使用.net 1.1，我有几个`ImageButtonClientSide`控件和一些其他按钮，这导致`postback.Now`我想知道，当页面回发时，`Page_Load`点击了哪个控件？我目前正在这样做

```
 if ( Check.IsNotNulOrBlank(this.Request.Form["__EVENTTARGET"]) ) 
 {
            if(this.Request.Form["__EVENTTARGET"].Equals("imgButtonSearch"))

            {

                                  }
  } 
```

但是`this.Request.Form["__EVENTTARGET"]`显示空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:06:41.033

有不同的方法来检查回发是否由按钮和图像按钮完成请查看下面给出的这篇文章链接。它清楚地说明了如何实现图像按钮

[如何知道哪个控件触发了回发事件。](http://www.mindfiresolutions.com/How-to-know-which-control-has-triggered-the-Post-back-event-417.php)

# javascript - 如何在 Knockout 中绑定 Html 5 Video Controls 属性

> ID：14231314
> 
> 赞同：2
> 
> 时间：2013-01-09T08:47:42.570
> 
> 标签：javascript, html, knockout.js

我需要在 Knockout 中有条件地发出 html 5 控件属性。我的意思是有时我会发出控件，有时不会。attr 绑定不起作用？有什么东西可以让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:25:55.580

是的，您可以使用`attr binding`您只需要返回`null`或`undefined`从您的 observable 执行此操作，然后 KO 不会发出给定的属性：

```
<video id="movie" width="320" height="240" 
       data-bind="attr: {controls: enableControls}">
   <source src="http://www.w3schools.com/html/movie.mp4" type="video/mp4" />
</video>
<button data-bind="{click: click}" >Add/Remove Controls </button> 
```

在您的视图模型上：

```
var ViewModel = function()
{
  var self = this;
  self.enableControls = ko.observable(true);
  self.click = function()
  {
    if (self.enableControls())
      self.enableControls(null);
    else
      self.enableControls(true);
  }

}

ko.applyBindings(new ViewModel()); 
```

演示[JSFiddle](http://jsfiddle.net/ALHFW/)。

# r - 组合 ggplot 和基本图形时使面板具有相同的边距

> ID：14231321
> 
> 赞同：10
> 
> 时间：2013-01-09T08:48:13.080
> 
> 标签：r, plot, ggplot2, gtable

我生成了一个结合 ggplot 和基本图形的图形：

```
t <- c(1:(24*14)) 
P <- 24
A <- 10 
y <- A*sin(2*pi*t/P)+20 
#*****************************************************************************
par(mfrow = c(2,1))
plot(y,type = "l",xlab = "Time (hours)",ylab = "Amplitude")
aa <- par("mai")
plot.new()

require(gridBase)
vps <- baseViewports()
pushViewport(vps$figure)
pushViewport(plotViewport(margins = aa)) ## I use 'aa' to set the margins 
#*******************************************************************************
require(ggplot2)
acz <- acf(y, plot = FALSE)
acd <- data.frame(Lag = acz$lag, ACF = acz$acf)
p <- ggplot(acd, aes(Lag, ACF)) + geom_area(fill = "grey") +
  geom_hline(yintercept = c(0.05, -0.05), linetype = "dashed") +
  theme_bw()
grid.draw(ggplotGrob(p)) ## draw the figure 
```

我使用 plotViewport 命令并根据 par("mai") 获得的第一个面板的尺寸设置面板的尺寸。附图显示了结果。 ![在此处输入图像描述](../Images/0722772d0a707986731ab2272eeda2fd.png) 然而，两个面板的尺寸不匹配，即第二个面板似乎比第一个稍宽。我怎样才能克服这个问题而不必手动设置边距

```
pushViewport(plotViewport(c(4,1.2,0,1.2))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T10:47:36.660

这应该给你一些提示：

![截屏](../Images/8c86b8db46dc16550131c59fbf626eea.png)

```
library(grid)
library(ggplot2)
require(gridBase)

par(mfrow = c(2,1))
plot(1:10)
a <- par("mai")
plot.new()
vps <- baseViewports()
pushViewport(vps$figure)

p = qplot(1:10, 1:10) + theme_bw() 
g <- ggplotGrob(p)

lw = unit(a[2], "inch") - sum(g$widths[1:3]) 

g$widths[[2]] <- as.list(lw + g$widths[[2]])
g$widths[[4]] <- as.list(unit(1, "npc") - unit(a[2] + a[4], "inch"))
g$widths[[5]] <- unit(a[4], "inch")
grid.draw(g)

# draw a shaded vertical band to test the alignment
grid.rect(unit(a[2], "inch"), unit(0, "inch"), 
          unit(1,"npc") - unit(a[2] + a[4], "inch"), 
          unit(2,"npc"),
          gp=gpar(lty=2, fill="red", alpha=0.1), hjust=0, vjust=0)

upViewport() 
```

但是，真的，你为什么不在 ggplot2 中做所有事情呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T12:17:47.217

主要思想是推动baseviewports的2个视口以获得绘图面板的尺寸。解决方案不是通用的。

首先我绘制我的基本情节

```
t <- c(1:(24*14)) 
P <- 24
A <- 10 
y <- A*sin(2*pi*t/P)+20 
#*****************************************************************************
par(mfrow = c(2,1))
plot(t,y,type = "l",xlab = "Time (hours)",ylab = "Amplitude")
plot.new() 
```

其次，我得到了绘图面板的尺寸。vpp 将仅用于 ggplot grobs 的尺寸（类似于上面 baptiste 的想法）

```
require(gridBase)
vps <- baseViewports()
vpp <- pushViewport(vps$figure,vps$plot) ## here I add a new viewport
vpp <- current.viewport()
upViewport(2) 
```

ggplot2 将 savec 绘制为 grob 表：

```
require(ggplot2)
p <- ggplot(acd, aes(Lag, ACF)) + geom_area(fill = "grey") +
  geom_hline(yintercept = c(0.05, -0.05), linetype = "dashed") +
  theme_bw()
data <- ggplot_build(p)
gtable <- ggplot_gtable(data) 
```

我改变了grobs的尺寸。（这里为什么解决方案不通用）

```
gtable$heights[[2]] <- vpp$height
gtable$heights[[4]] <- vpp$height
gtable$widths[[4]]  <- vpp$width 
```

我策划

```
grid.draw(gtable) 
```

![在此处输入图像描述](../Images/c90912b46e7ad038dfadd73e09a67014.png)

# c++ - 在 C++ 中模拟 CPU 负载

> ID：14231322
> 
> 赞同：5
> 
> 时间：2013-01-09T08:48:20.757
> 
> 标签：c++, cpu, cpu-usage

我目前正在使用 C++ 在 Windows 中编写应用程序，并且我想模拟 CPU 负载。

我有以下代码：

```
void task1(void *param) { 

unsigned elapsed =0;
unsigned t0;

while(1){

    if ((t0=clock())>=50+elapsed){//if time elapsed is 50ms

        elapsed=t0;
        Sleep(50);
    }
  }
}

int main(){

int ThreadNr;

for(int i=0; i < 4;i++){//for each core (i.e. 4 cores)
    _beginthread( task1, 0, &ThreadNr );//create a new thread and run the "task1" function
}

while(1){}
} 
```

我使用与此线程中给出的答案相同的方法编写此代码：[模拟稳定的 CPU 负载和峰值](https://stackoverflow.com/questions/2514544/simulate-steady-cpu-load-and-spikes)

我的问题是：

1.  我是否已将另一篇文章中的 C# 代码正确翻译为 C++？
2.  这段代码会在四核处理器上产生 50% 的平均 CPU 负载吗？
3.  我怎样才能在合理的准确度内找出 CPU 的负载百分比？（任务管理器是我唯一的选择吗？）

**编辑：**我问这个问题的原因是我希望最终能够在合理的公差范围内产生 10、20、30、...、90% 的 CPU 负载。此代码似乎可以很好地生成负载 70%<，但在任何低于 70% 的负载下似乎都非常不准确（由任务管理器 CPU 负载读数测量）。

有人对我如何生成所述负载但仍然能够在不同的计算机（即具有不同的 CPU）上使用我的程序有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T10:48:46.690

乍一看，这看起来不像是漂亮但正确的 C++ 或 C（确定它的简单方法是编译它）。缺少包含 ( `<windows.h>`,`<process.h>`和`<time.h>`) 但否则它编译得很好。

请注意，`clock`and`Sleep`并不是非常准确，`Sleep`也不是非常可靠。不过，平均而言，线程函数应该按预期工作（给予或接受几个百分比的变化）。

但是，关于问题 2），您应该将最后一个替换为`while(1){}`阻塞而不是旋转的东西（例如`WaitForSingleObject`，或者`Sleep`如果您愿意）。否则整个程序在四核上将**不会**有 50% 的负载。由于主线程，您将在一个核心上拥有 100% 的负载，再加上您的四个工作人员的 4x 50%。这显然会使每个核心的总和超过 50%（并且会导致线程从一个核心反弹到另一个核心，从而产生令人讨厌的副作用）。

使用任务管理器或类似的实用程序来验证您是否获得了所需的负载是一个不错的选择（因为它是*最简单*的解决方案，它也是最好的解决方案）。

另请注意，以这种方式模拟负载*可能会*起作用，但不是 100% 可靠。
可能存在难以预测的影响（内存、执行单元）。例如，假设您在这个循环中使用了 100% 的 CPU 整数执行单元（合理的假设），但它的浮点或 SSE 单元为零。现代 CPU 可能会在真实或逻辑内核之间共享资源，您可能无法准确预测得到的效果。或者，另一个线程可能是内存受限或有严重的页面错误，因此占用 CPU 时间不会像您想象的那样影响它（实际上可能会给它足够的时间来使预取工作更好）。或者，它可能会阻止 AGP 传输。或者，还有一些你说不出来的东西。

**编辑：**

改进的版本，更短的代码，修复了一些问题，也可以按预期工作：

*   用于`clock_t`返回的值`clock`(从技术上讲，这比使用非特殊`typedef`的整数“更正确”。顺便说一句，这可能是原始代码无法按预期工作的原因，因为`clock_t`它是 Win32 下的有*符号*整数。条件in`if()`总是评估`true`，所以工作人员几乎一直在睡觉，不消耗 CPU。
*   旋转时代码更少，数学更简单。计算未来 50 个滴答声的唤醒时间并旋转直到达到该时间。
*   用于`getchar`在最后阻止程序。这不会消耗 CPU 时间，它允许您按 结束程序`Enter`。线程没有像通常那样正确结束，但在这种简单的情况下，让操作系统在进程退出时终止它们可能是可以的。
*   与原始代码一样，这假定`clock`并`Sleep`使用相同的刻度。这无疑是一个大胆的假设，但在您在原始代码中使用的 Win32 下它是正确的（两个“滴答”都是毫秒）。C++ 没有类似的东西`Sleep`（没有`boost::thread`, 或 C++11 `std::thread`），所以如果打算使用非 Windows 可移植性，无论如何你都必须重新考虑。
*   与原始代码一样，它依赖于不精确且不可靠的函数 (`clock`和)。在我的系统上等于而不使用. 尽管如此，该程序“几乎完美”地运行，导致我的机器上的负载为 50% +/- 0.5%。`Sleep``Sleep(50)``Sleep(63)``timeBeginPeriod`
*   与原始代码一样，这没有考虑线程优先级。具有高于正常优先级的进程将完全不会被此限制代码所打动，[因为这就是 Windows 调度程序的工作方式](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685100%28v=vs.85%29.aspx)。

    ```
    #include <windows.h>
    #include <process.h>
    #include <time.h>
    #include <stdio.h>

    void task1(void *)
    {
        while(1)
        {
            clock_t wakeup = clock() + 50;
            while(clock() < wakeup) {}
            Sleep(50);
        }
    }

    int main(int, char**)
    {
        int ThreadNr;
        for(int i=0; i < 4; i++) _beginthread( task1, 0, &ThreadNr );

        (void) getchar();
        return 0;
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T11:32:39.440

这是一个代码示例，它在 Windows 上将我的 CPU 加载到 100%。

```
#include "windows.h"

DWORD WINAPI thread_function(void* data)
{
    float number = 1.5;
    while(true)
    {
        number*=number;
    }
    return 0;
}

void main()
{
    while (true)
    {
        CreateThread(NULL, 0, &thread_function, NULL, 0, NULL);
    }
} 
```

当您构建应用程序并运行它时，按 Ctrl-C 以终止应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:57:24.927

您可以使用 Windows性能[计数器 API](http://msdn.microsoft.com/en-us/library/aa373083%28v=vs.85%29.aspx)来获取 CPU 负载。适用于整个系统或您的流程。

# javascript - 收藏没有收到来自 instagram url 的任何响应

> ID：14231323
> 
> 赞同：0
> 
> 时间：2013-01-09T08:48:21.757
> 
> 标签：javascript, backbone.js, requirejs, instagram

我正在从集合中的 instagram url 读取 json 数据，并在视图中获取集合数据，但没有得到任何响应。怎么了？

模型：

```
 define([
          'underscore',
          'backbone'
        ], function(_, Backbone) {var TopListModel = Backbone.Model.extend(return TopListModel;}); 
```

收藏：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'models/topList/topListModel'
], function($, _, Backbone, TopListModel){
  var TopListCollection = Backbone.Collection.extend({
  model: TopListModel,
  url: 'https://api.instagram.com/v1/tags/'+hashtag+'/media/recentaccess_token='+access_code,
  });

 return TopListCollection;
}); 
```

看法：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'text!templates/sidebar/topList.html',
  'collections/topList/TopListCollection',
  //'text!templates/home/homeTemplate.html'
], function($, _, Backbone, topList, TopListCollection){

  var TopListView = Backbone.View.extend({
    el: $("#sidebar"),
    initialize: function(){
      _.bindAll(this, 'render');

      var topListCollection = new TopListCollection();
      topListCollection.fetch({success: function(collection, data){            
        console.log(data);
      }});
      //this.render();
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:16:58.043

```
define([
      'underscore',
      'backbone'
    ], function(_, Backbone) {var TopListModel = Backbone.Model.extend(return TopListModel;}); 
```

应该是：

```
define([
      'underscore',
      'backbone'
    ], function(_, Backbone) {var TopListModel = Backbone.Model; return TopListModel;}); 
```

更好的是，除非您在模型中做一些特殊的事情，否则您不需要实际定义它。Backbone 将根据响应创建一个模型。

# html - 如何将div放在页面的右上角

> ID：14231329
> 
> 赞同：64
> 
> 时间：2013-01-09T08:48:41.727
> 
> 标签：html, css

如何使用 css 将 div 浮动到页面的右上角？我想浮动`topcorner`下面的div：

```
<p><a href="login.php">Log in</a></p>

<div class="topcorner"><a href="home.php">Back to Home</a></div> 
```

登录进入它现在所做的左侧角落，我希望将主页链接放在其他角落，

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-01-09T08:54:35.520

风格是：

```
<style type="text/css">
 .topcorner{
   position:absolute;
   top:0;
   right:0;
  }
</style> 
```

希望它会奏效。谢谢

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-09T08:52:15.053

试试css：

```
.topcorner{
    position:absolute;
    top:10px;
    right: 10px;
 } 
```

您可以使用`top`和`right`属性。

如果您想在`div`向下滚动时浮动，只需更改`position:absolute;`为`position:fixed;`.

希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T08:54:00.450

你可以使用 css`float`

```
<div style='float: left;'><a href="login.php">Log in</a></div>

<div style='float: right;'><a href="home.php">Back to Home</a></div> 
```

看看这个[CSS 定位](http://www.w3schools.com/css/css_positioning.asp)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T09:45:34.767

```
<style type="text/css">
 .topcorner{
  position:absolute;
  top:10;
  right:15;
  }
</style> 
```

您也可以在 CSS 外部文件中使用它。

# javascript - 使用内置二维数组的 Raphael.js 条形图失败

> ID：14231335
> 
> 赞同：0
> 
> 时间：2013-01-09T08:48:52.630
> 
> 标签：javascript, graphael

我正在尝试使用我在程序中创建的二维数组（我需要......）绘制条形图（Raphael.js），而不是传递实际值但没有输出得到空白屏幕。猜测 g.bar.js 无法解析数组，而我拥有的 g.bar.js 来自 g.raphael.com。我也尝试过来自[https://github.com/vezult/g.raphael/blob/8a2b7dc3f97ddf5196791fa9eaa8640350d161a/g.bar.js](https://github.com/vezult/g.raphael/blob/8a2b7dc3f97dedf5196791fa9eaa8640350d161a/g.bar.js)的 g.bar.js，但我什至无法编译这个东西。条形图调用 r.barchart(5, 10, 300, 220, data, {stacked: true, type: "round"}).hoverColumn(fin2, fout2); data 是一个二维数组 有经验的请联系。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:09:52.013

I'm still confused of your "compilation errors" because JS is interpretable not compilable script language.

```
<script type="text/javascript" src="raphael.js"></script>
<script type="text/javascript" src="g.raphael.js"></script>
<script type="text/javascript" src="g.bar.js"></script> 
```

Linking scripts in this order will not raise any error even with alternated g.bar.js. I've tested it.

# sql - 将类别添加到趋势表

> ID：14231336
> 
> 赞同：0
> 
> 时间：2013-01-09T08:48:55.580
> 
> 标签：sql, report, trending

嗨，伙计们，我一直在思考如何处理这个问题已经有一段时间了，我只是被困住了。希望这个问题对社区有用。

我有一个趋势表，其中包含如下第一个表的数据。我有另一个表，其类别如下面的第二个表。目标是在堆积柱形图中显示数据。图表中的每一列将是当天的最后一个样本，每列的系列组将是电路类别。

数据每 10 分钟采样一次，但例如，我每天只输入 2 个样本：

```
time_stamp | circuit1 | circuit2 | circuit3

1/5/13 08:00 | 50 | 60 | 30

1/5/13 04:00 | 48 | 55 | 26

1/4/13 08:00 | 42 | 52 | 22

1/4/13 04:00 | 40 | 51 | 20 
```

等等

我有一个与此类似的类别表：

```
Circuit_name | circuit_category

circuit1 | category4

circuit2 | category2

circuit3 | category12 
```

等等

从报告的角度来看，也许我没有想到一种更简单的方法来做到这一点，但是为了每天得到一个像要求一样的堆积条形图，我想我需要一个查询，结果如下：

```
time_stamp | Circuit_name | Circuit_category | Value

1/5/13 08:00 | Circuit1 | category4 | 50

1/5/13 08:00 | Circuit2 | category2 | 60

1/5/13 08:00 | Circuit3 | category12 | 30

1/4/13 08:00 | Circuit1 | category4 | 42

1/4/13 08:00 | Circuit2 | category2 | 52

1/4/13 08:00 | Circuit3 | category12 | 22 
```

我在想我需要编写一个查询来获取`max(time_stamp)`按天分组的数据，但要对结果进行透视，以便我可以将数据加入到类别表中。因为我必须将 table2 中的 circuit_name 连接到 table1 中的实际列名，所以我一直在尝试在第一张表上使用 pivot ，但是我一直遇到死胡同，因为我对 pivot 的理解不够好。

无论如何，如果有必要将电路类别硬编码到查询中，我愿意放弃表 2，但这又是我卡住的地方。任何指导将不胜感激。

数据在 sql2008r2 服务器上。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:11:25.123

这似乎是`unpivot`从列到行... SQL Server 具有此功能:) 我相信可以改进和优化以下查询。请在您尝试后发表评论。

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/df5a5/7)

询问：

```
select m.*, t.cat
from 
(SELECT ts, name, value
FROM
(
  SELECT ts,
    CONVERT(varchar(20), C1) AS c1,
    CONVERT(varchar(20), C2) AS c2,
    CONVERT(varchar(20), C3) AS c3
  FROM t2
) MyTable
UNPIVOT
(Value FOR name IN 
 (c1,c2,c3))AS MyUnPivot) m
left join t1 t
on t.name = m.name
; 
```

结果：

```
TS                              NAME    VALUE   CAT
January, 05 2013 08:00:00+0000  c1      50      category4
January, 05 2013 08:00:00+0000  c2      60      category2
January, 05 2013 08:00:00+0000  c3      30      category12
January, 05 2013 04:00:00+0000  c1      48      category4
January, 05 2013 04:00:00+0000  c2      55      category2
January, 05 2013 04:00:00+0000  c3      26      category12
January, 04 2013 08:00:00+0000  c1      42      category4
January, 04 2013 08:00:00+0000  c2      52      category2
January, 04 2013 08:00:00+0000  c3      22      category12
January, 04 2013 04:00:00+0000  c1      40      category4
January, 04 2013 04:00:00+0000  c2      51      category2
January, 04 2013 04:00:00+0000  c3      20      category12 
```

# filesystems - 不同文件系统中的 inode 编号

> ID：14231337
> 
> 赞同：1
> 
> 时间：2013-01-09T08:48:56.857
> 
> 标签：filesystems, inode

如果我将目录A（其中有一个文件file_a）挂载到目录B，这两个目录位于不同的文件系统中，两个目录中的file_a会共享相同的inode号吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:49:21.107

Yes,the inode number of the file will be that of the source directory A. Any new file created in directory B will follow the conventions of the file system in which directory A is present.In Linux terminology,what you're doing is essentially a `bind mount`.

# android - 显示字段转输入字段的Android UI最佳实践

> ID：14231341
> 
> 赞同：0
> 
> 时间：2013-01-09T08:49:04.623
> 
> 标签：android, android-layout, android-ui

我正在编写一个带有显示图像列表和一些附加信息（如标题、地点等）的 android 应用程序......

我是 android 生态系统的新手，想知道实现列表元素的最佳实践是什么，该元素通常显示提到的信息并在按下 listelement 时变成输入字段。

我是否必须将显示元素（例如`TextField`）和编辑元素相互叠加并设置为显示或输入可见？一般如何处理？或者我是否完全替换了负责列表元素的布局？

我知道对于文本的简单情况，有一个简单的解决方案可以使该`EditText`字段看起来像不可编辑的`TextField`. 但是，我正在寻找一个涵盖更广泛案例的一般答案，而不仅仅是`TextField`.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:07:53.860

因此，在您的情况下，有几种方法可以实现这一目标。

第一种方法是构建一个包含`TextView`并且`EditText`在第一次初始化时您的编辑文本将不可见的布局。在你的`OnItemClick`你必须隐藏你的文本视图并显示具有当前数据值和编辑选项的编辑文本。

我认为对用户更友好的第二种方式是，您可以在自定义布局之后显示一个`AlertDialog`之后`OnItemClick`，您可以在用户按下“是”后更改值并更新列表视图，或者在他选择“否”时什么也不做。

这取决于您将采用哪种方式，但我认为第二种选择更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:06:35.433

您可以使`listview`视图鳍状肢的元素具有两个视图。
一个你 textview 和其他和 edittext。

`<ViewFlipper ... <TextView ... /> <EditText ... /> /ViewFlipper>`

然后在`onItemClickListener`你可以调用的列表项中`flipper.showNext()`；

所以，鳍状肢的工作方式就像，它只显示其中定义的第一个视图，并在随后调用`showNext()`它时显示其中定义的下一个视图。
因此，如果其中有 2 个元素，它将表现为具有两侧的硬币。

# javascript - jquery轮播进化

> ID：14231345
> 
> 赞同：3
> 
> 时间：2013-01-09T08:49:32.587
> 
> 标签：javascript, jquery

我正在尝试更改 jquery 进化轮播中的动画：

[http://codecanyon.net/item/jquery-carousel-evolution/full_screen_preview/490018](http://codecanyon.net/item/jquery-carousel-evolution/full_screen_preview/490018)

由于我在滑块中显示了很多元素，因此我希望在单击背面的最后一个元素以将其自身设置为动画到中心时，而不需要所有其他元素在它步进并停止穿过中心之前。

我不擅长 jquery，但我认为这与这里的这些行有关：

```
 for (var i = 0; i < n; i++){
            animateImage(i);                                                    
        }              
    };        

    var animateImage = function(i){
        var o = settings,
            item = slideItems.eq(i),
            pos = slidePos(i);

        item.show();
        item.animate(setSlidePosition(pos), o.speed, 'linear', function(){
            hideItem($(this));            
            if (i == numberSlides - 1){
                isAnimationRunning = false ;
                if (currentSlide != targetSlide){ 
                    animateSlide();
                }
                else {
                    self.current = currentSlide ;
                    showVideoOverlay(currentSlide);
                    o.after(self);                  
                }                                                                               
            }
        }); 
```

你能帮忙的话，我会很高兴

# sql - 删除重复的对象 - 在创建期间或之后？

> ID：14231349
> 
> 赞同：0
> 
> 时间：2013-01-09T08:49:46.107
> 
> 标签：sql, ruby, object

我会尽量不要在这里抽象：

我正在从外部数据库查询大量项目并在我自己的 SQL 数据库中创建相应的对象。

*现在，在我的查询中，肯定有重复（不可避免）......所以，从运行时的角度来看，创建对象*然后删除重复或在实际创建对象之前执行此操作会更快吗？

创建对象之前的 SQL 查询似乎`WHERE`需要很长时间。

我正在使用 Ruby，所以这里是后者的一个示例：

```
objects_hash.map { |d| Object.where(:attr1 => d["attr1"], :attr2 => d["attr2"]).exists? ? false : Object.create(:attr1 => d["attr1"], :attr2 => d["attr2"]) } 
```

# ios - 为 RestKit 框架编写 API 类

> ID：14231350
> 
> 赞同：1
> 
> 时间：2013-01-09T08:49:48.400
> 
> 标签：ios, objective-c, web-services, restkit, afnetworking

我从 AFnetworking 切换到 RestKit。在 AFnetworking 中有一个 API 类。API.h 类包含以下内容。

```
#import <UIKit/UIKit.h>
typedef void (^JSONResponseBlock)(NSDictionary* json);
@interface API : NSObject
//the authorized user
@property (strong, nonatomic) NSDictionary* user;

+(API*)sharedInstance;
//check whether there's an authorized user

//send an API command to the server
-(void)loginCommand:(NSMutableDictionary*)params onCompletion:(JSONResponseBlock)completionBlock; 
```

我的 API.m 类看起来像这样。

```
+(API *)sharedInstance
{
    static API *sharedInstance = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^ {
        sharedInstance = [[self alloc]initWithBaseURL:[NSURL URLWithString:kAPIHost]];
    });
    return sharedInstance;
}

#pragma mark - init
//intialize the API class with the destination host name

-(API *)init
{
    //call super init
    self = [super init];

    if (self != nil){
        //initialize the object
        user = nil;

        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];

        // Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
        [self setDefaultHeader:@"Accept" value:@"application/json"];
    }
    return self;
}

-(void)loginCommand:(NSMutableDictionary *)params onCompletion:(JSONResponseBlock)completionBlock{
    NSLog(@"%@%@",kAPIHost,kAPILogin);
    NSMutableURLRequest *apiRequest = [self multipartFormRequestWithMethod:@"POST" path:kAPILogin parameters:params constructingBodyWithBlock:^(id <AFMultipartFormData>formData){
        //TODO: attach file if needed

    }];
    AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:apiRequest];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){
        //success!
        NSLog(@"SUCCESSSS!");
        completionBlock(responseObject);
    }failure:^(AFHTTPRequestOperation *operation, NSError *error){
        //Failure
        NSLog(@"FAILUREE!");
        completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
    }];
    [operation start];

} 
```

就像你看到的那样，我只实例化一次，然后把我所有的方法都放在这里。在我的视图控制器中，我只需要使用参数字典调用此方法。然后我可以读取整个 JSON 文件。

现在使用 restKit，我在 viewController 级别上完成了这一切。我想像 AFNetworking 那样拆分它。这就是我在 RestKit 中所做的，目前这一切都在 viewController 级别。

```
 //let AFNetworking manage the activity indicator
[AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

// Initialize HTTPClient
NSURL *baseURL = [NSURL URLWithString:@"http://virtuele-receptie.preview.sanmax.be"];
AFHTTPClient* client = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
//we want to work with JSON-Data
[client setDefaultHeader:@"Accept" value:RKMIMETypeJSON];

// Initialize RestKit
RKObjectManager *objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];

//Do mapping

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:dataMapping
                                                                                   pathPattern:nil
                                                                                       keyPath:@"data"
                                                                                   statusCodes:[NSIndexSet indexSetWithIndex:200]];
[objectManager addResponseDescriptor:responseDescriptor];

NSDictionary *dict = [[NSDictionary alloc]initWithObjectsAndKeys:_txtLogin.text,@"email",_txtPass.text,@"pwd", nil];

[objectManager getObject:nil path:@"/nl/webservice/company-user/login/apikey/key12345678" parameters:dict
                 success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                   //Success  
                 }
                 failure:^(RKObjectRequestOperation *operation, NSError *error) {
                     //Failure
                 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T20:00:34.927

到目前为止，使用 RestKit，我还没有看到像您可能使用其他 HTTP 框架创建的 API 类的巨大需求。RestKit 有自己的 HTTP 客户端（实际上只是 AFNetworking 的客户端），所以不需要为你的 HTTP 客户端创建一个类，而且我发现每次使用 RKObjectManager 时，我通常都希望访问方法参数并阻止回调在每个视图控制器中。换句话说，我不想在 API 类中运行 RestKit 网络代码，因为我基本上必须将整个调用包装在一个可以在视图控制器中访问的方法中（成功块、失败块等）。

从本质上讲，RestKit 的设计大大减轻了网络代码的负担，以我的经验——现在有 3 或 4 个应用程序——我还没有看到足够的理由编写一个像你描述的 API 类。

# sql - TSQL CASE 与 SELECT 语句中的 if 比较

> ID：14231353
> 
> 赞同：44
> 
> 时间：2013-01-09T08:49:57.713
> 
> 标签：sql, sql-server-2008, tsql, select, case

我想在 SELECT 中使用 CASE 语句。

我从用户表中选择，并且（作为一个属性）我还使用嵌套 SQL：

```
SELECT 
   registrationDate, 
   (SELECT COUNT(*) FROM Articles WHERE userId = Users.userId) as articleNumber, 
   hobbies, ...
FROM USERS 
```

然后我想做一个 CASE 语句来获取用户的排名（排名取决于 articleNumber）。

我试过这样：

```
SELECT 
   registrationDate, 
   (SELECT COUNT(*) FROM Articles WHERE Articles.userId = Users.userId) as articleNumber, 
   ranking =
      CASE
         WHEN articleNumber < 2 THEN 'Ama'
         WHEN articleNumber < 5 THEN 'SemiAma' 
         WHEN articleNumber < 7 THEN 'Good'  
         WHEN articleNumber < 9 THEN 'Better' 
         WHEN articleNumber < 12 THEN 'Best'
         ELSE 'Outstanding'
      END,
   hobbies, etc...
FROM USERS 
```

解析显示没有错误，但是当我尝试运行它时出现错误：

> *消息 207，级别 16，状态 1，过程 GetUserList，行 XY
> 列名称“articleNumber”无效。*

我猜，CASE 不能“识别”我的嵌套 SELECT。

我帮助自己解决了一些其他解决方案，例如 [SQL Server 2008 - SELECT 子句中的 Case / If 语句，](https://stackoverflow.com/questions/1122557/sql-server-2008-case-if-statements-in-select-clause) 但似乎没有任何效果。

'<' 和 '>' 比较我也没有发现任何类似的问题。

任何帮助将不胜感激 ;）

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-09T08:53:57.380

请在外部选择中选择相同的。您无法在同一查询中访问别名。

```
SELECT *, (CASE
        WHEN articleNumber < 2 THEN 'Ama'
        WHEN articleNumber < 5 THEN 'SemiAma' 
        WHEN articleNumber < 7 THEN 'Good'  
        WHEN articleNumber < 9 THEN 'Better' 
        WHEN articleNumber < 12 THEN 'Best'
        ELSE 'Outstanding'
        END) AS ranking 
FROM(
    SELECT registrationDate, (SELECT COUNT(*) FROM Articles WHERE Articles.userId = Users.userId) as articleNumber, 
    hobbies, etc...
    FROM USERS
)x 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T09:00:04.447

应该：

```
SELECT registrationDate, 
       (SELECT CASE
        WHEN COUNT(*)< 2 THEN 'Ama'
        WHEN COUNT(*)< 5 THEN 'SemiAma' 
        WHEN COUNT(*)< 7 THEN 'Good'  
        WHEN COUNT(*)< 9 THEN 'Better' 
        WHEN COUNT(*)< 12 THEN 'Best'
        ELSE 'Outstanding'
        END as a FROM Articles 
        WHERE Articles.userId = Users.userId) as ranking,
        (SELECT COUNT(*) 
        FROM Articles 
        WHERE userId = Users.userId) as articleNumber,
hobbies, etc...
FROM USERS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T05:19:44.337

你可以试试这个：

```
WITH CTE_A As (SELECT COUNT(*) as articleNumber,A.UserID  as UserID FROM Articles A
           Inner Join Users U
           on  A.userId = U.userId 
           Group By A.userId , U.userId   ),

B as (Select us.registrationDate,

      CASE
         WHEN CTE_A.articleNumber < 2 THEN 'Ama'
         WHEN CTE_A.articleNumber < 5 THEN 'SemiAma' 
         WHEN CTE_A.articleNumber < 7 THEN 'Good'  
         WHEN CTE_A.articleNumber < 9 THEN 'Better' 
         WHEN CTE_A.articleNumber < 12 THEN 'Best'
         ELSE 'Outstanding'
         END as Ranking,
         us.hobbies, etc...
         FROM USERS Us Inner Join CTE_A 
         on CTE_A.UserID=us.UserID)

Select * from B 
```

# android - 在 Mono Android 中使用 ActionBarSherlock

> ID：14231367
> 
> 赞同：4
> 
> 时间：2013-01-09T08:51:07.273
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试在 Mono Android 应用程序中实现 ActionBar。有人可以为我提供将 ActionBar 项目包含在我的解决方案中的步骤吗？我已经看到在这个 url [https://github.com/xamarin/monodroid-samples/tree/master/ActionBarSherlock提供的示例](https://github.com/xamarin/monodroid-samples/tree/master/ActionBarSherlock)

我是否必须在该示例中简单地添加 ActionBarSherlock 项目的引用？当我尝试添加对该项目的引用时，我收到许多错误，例如“检索项目的父项时出错：找不到与给定名称'android:TextAppearance.Holo.Widget.ActionBar.Menu'匹配的资源。” 在文件 abs_styles.xml 中

有没有其他人成功地将 ActionBarSherlock 添加到 Mono Android 项目中？您能否提供一些步骤来让一个简单的示例正常工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T22:58:33.213

好的，这就是我的工作方式......

1.  打开示例项目并在发布模式下仅构建“ActionBarSherlock”项目。确保最低目标 android 版本为 4.0.3（必需）

2.  获取 dll 并在您的项目中引用它。我发现如果您的项目的最低 android 版本为 2.2，您可以让它编译得很好——我发现如果您使用配置文件版本 2.1，它就不起作用，但这可能是我的应用程序。也许您的最低版本太低？我还将我的“目标”android 设置为最新的......我不知道这是否也有帮助。

3.  我说引用 dll 而不是项目的原因是您将获得正确的智能感知。否则，正如您在示例项目中看到的那样，它不会（使工作变得痛苦！）。

4.  确保您在项目中引用了 v4 支持库 (Mono.Android.Support.v4)

5.  最后一步是需要更改默认主题以使用 Sherlock 主题。（例如，请参见下面的 xml）

6.  添加操作栏等时使用 ActionbarSherlock.* 命名空间...

添加 ActionbarSherlock 后的示例清单：

```
<manifest ...>
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" />
    <application android:label="IDNT" android:theme="@style/Theme.Sherlock.Light.DarkActionBar" android:icon="@drawable/Icon">
    </application>
</manifest> 
```

请注意：所有这些都有一个小问题......如果您的项目的最低版本低于 3.0（即根据我的示例为 2.2）并且您使用链接进行编译（即仅 SDK 程序集），您将收到错误“Mono. Cecil.ResolutionException：无法解析 Android.Database.IDatabaseErrorHandler'。我目前正在向 Xamarin 发送有关此问题的支持消息，一旦解决问题，我将编辑此帖子。

EDIT: To fix the issue I have mentioned above make sure that the project options -> Application -> Minimum Android to target option is at LEAST 4.0.3\. Your minSdkVersion can still be 7/8 or whatever so it will still run in older android versions. It also means you have to be careful you dont code in stuff that is for higher versions.

# android - 在 Mac 上使用 AVD 进行模拟时结果不显示

> ID：14231370
> 
> 赞同：1
> 
> 时间：2013-01-09T08:51:14.390
> 
> 标签：android, eclipse, macos, avd

我是Android开发的新手。我想在 Eclipse 中的模拟器上运行一个 Hello World 作为我的起点，但神奇的词永远不会出现。我只是按照教程，启动 Android 虚拟设备管理器，创建一个新的 AVD 并单击运行。但是，如果它在真实设备上运行，一切都很好。Mac上有什么特殊设置吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:00:14.947

您必须等待很长时间才能出现。我建议您使用 USB 调试和真实设备。它的工作速度比模拟器快得多。此外，您可以使用带有正常手势和所有传感器（如相机等）的应用程序。但正如我所说：它比 AVD 快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:38:21.740

检查`Console`Eclipse 中的选项卡以获取有关`APK`上传和安装进度的信息。

> Mac上有什么特殊设置吗？

不，那里没有。所有平台上的设置几乎相同。

# curl - Twilio 电话服务仅重试一次出站呼叫

> ID：14231372
> 
> 赞同：5
> 
> 时间：2013-01-09T08:51:25.773
> 
> 标签：curl, twilio, phone-call, outbound

使用 Twilio 电话服务，我们拨打电话：

```
curl -X POST 'https://api.twilio.com/2010-04-01/Accounts/ACc1....4658a/Calls.json' \
-d 'From=%2B44987654321' \
-d 'To=%2B123456789' \
-d 'Url=http%3A%2F%2Fourdomain.com%2Ftwiml.php%3Faction%3Dcall_is_taken' \
-u ACc1....4658a:{AuthToken} 
```

没关系，但是当有人拿起电话时，我们的响应 twiml 代码（会改变）只是：

```
<Response><Say>Thank you for picking up.</Say></Response> 
```

问题是当有人在开会时：电话响了，用户很快拒绝了电话。愚蠢的是，Twilio 立即重试，如果用户再次拒绝，twilio 将立即尝试最多 7 (!) 次。

实际上，用户将在会议结束后接听电话并听到它不是生命重要的消息。想象一下愤怒。

我如何告诉 Twilio 只尝试调用 ONCE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:38:46.107

这个问题在使用 Dial 动词时也会发生，而且 Twilio 文档没有提到这种连续重试非常烦人。必须有一种方法来防止重试，就像你说的那样，它在很多情况下都是一个阻碍。

这是 Twilio 论坛上几乎相同问题的链接：http: [//forum.twilio.com/twilio/topics/outbound_calls_keep_incessantly_retrying](http://forum.twilio.com/twilio/topics/outbound_calls_keep_incessantly_retrying)

# java - SQL trunc/group/order by dates（日/月/季度/年），总和跳过没有数据的日期

> ID：14231374
> 
> 赞同：2
> 
> 时间：2013-01-09T08:51:33.510
> 
> 标签：java, sql, oracle, plsql

我参与了需要按日期构建直方图的项目。在我之前，这是通过对每个矩形（日期子区域）的大量 SQL 查询在 Java 代码中完成的。

我尝试另一种方法：

```
从 DATA 中选择 sum(CNT), trunc(DATE, 'MM')
  其中 DATE >= TO_DATE('01-01-2012','DD-MM-YYYY')
  和 INC_DATE <= TO_DATE('31-12-2012','DD-MM-YYYY')
  按 trunc 分组（日期，'MM'）
  按 trunc(DATE, 'MM') 排序；

```

并从 Java 代码中的 ResultSet 收集数据。但是如果某个月份没有数据，我会错过直方图中的矩形！！！

是否可以修复 SQL（或可能是 PL/SQL）表达式以在结果中包含缺失日期且总和为零？

或者如何在 Java 中构建更优雅的日期序列生成器来查找丢失的日期（与天/月/季度/年对齐）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:15:31.683

尝试这样的事情（简化示例）：

```
with 
months_int as
(select trunc(min(inc_date), 'MM') min_month, trunc(max(inc_date), 'MM') max_month
 from data),
months as
(
  select add_months(min_month, level-1) mnth_date
  from months_int 
  connect by add_months(min_month, level-1)<= max_month
  )
select  mnth_date, sum(cnt) 
from data  right outer join months on trunc(inc_date, 'MM') = mnth_date
group by mnth_date
order by mnth_date 
```

[这是一个 sqlfiddle 示例](http://www.sqlfiddle.com/#!4/44524/7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T09:14:46.973

您需要先创建日期列表；通过创建[日历表](https://stackoverflow.com/questions/8374959/how-to-populate-calendar-table-in-oracle)或使用[CONNECT BY](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries003.htm#SQLRF52332)语法。

```
select to_date('01-01-2012','DD-MM-YYYY') + level - 1
  from dual
connect by level <= to_date('31-12-2012','DD-MM-YYYY') 
                    - to_date('01-01-2012','DD-MM-YYYY') + 1 
```

然后，您可以将其 LEFT OUTER JOIN 加入您的主查询，以确保填充间隙：

```
with the_dates as (
  select to_date('01-01-2012','DD-MM-YYYY') + level - 1 as the_date
    from dual
 connect by level <= to_date('01-01-2012','DD-MM-YYYY') 
                      - to_date('31-12-2012','DD-MM-YYYY') + 1
         )
select sum(b.cnt), trunc(a.the_date, 'MM') 
  from the_dates a
  left outer join data b
    on a.the_date = b.date
 group by trunc(a.the_date, 'MM')
 order by trunc(a.the_date, 'MM') 
```

您不再需要 WHERE 子句，因为这是在 JOIN 中处理的。请注意，我没有使用主表中的 DATE 列，而是使用生成的日期列。如果您想将日期修改为不是月底，这将起作用，但如果您希望按月进行，您可以在 WITH 子句中截断日期。不过，在执行此操作之前，您应该了解索引。如果您的表是在 DATE 而不是在 DATE 上建立索引，`TRUNC(DATE, 'MM')`那么最好只在 DATE 上加入。

DATE 是一个保留字，因为它是一个列的错误名称；我怀疑你没有使用它，但你应该知道。

如果您使用的是日历表，它看起来像这样：

```
select sum(b.cnt), trunc(a.the_date, 'MM') 
  from calender_table a
  left outer join data b
    on a.the_date = b.date
 where a.the_date >= to_date('01-01-2012','DD-MM-YYYY') 
   and a.the_date <= to_date('31-12-2012','DD-MM-YYYY')
 group by trunc(a.the_date, 'MM')
 order by trunc(a.the_date, 'MM') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T17:23:52.530

我的生产代码基于当地大师的建议和@Ben 技术：

```
-- 生成序列 1..N:
SELECT level FROM dual CONNECT BY level <= 4;

-- 生成天数：
选择 to_date('01-01-2012','DD-MM-YYYY') + 级别 - 1
  从双
按级别连接 <= to_date('31-12-2012','DD-MM-YYYY') - to_date('01-01-2012','DD-MM-YYYY') + 1;

日期为 (
  选择 (to_date('01-01-2012','DD-MM-YYYY') + level - 1) 作为日期范围
    从双
    按级别连接 <= to_date('31-12-2012','DD-MM-YYYY') - to_date('01-01-2012','DD-MM-YYYY') + 1
  ) 选择 sum(tbl.cnt) 作为 summ, trunc(dates.daterange, 'DDD')
      从日期
           左外连接 DATA_TBL tbl
        在 trunc(tbl.inc_date, 'DDD') = trunc(dates.daterange, 'DDD')
      按 trunc(dates.daterange, 'DDD') 分组
      按 trunc(dates.daterange, 'DDD') 排序；

-- 生成月份：
选择 ADD_MONTHS(to_date('01-01-2012','DD-MM-YYYY'), 级别 - 1)
  从双
按级别连接 <=months_between(to_date('31-12-2012','DD-MM-YYYY'), to_date('01-01-2012','DD-MM-YYYY')) + 1;

日期为 (
  选择 add_months(to_date('01-01-2012','DD-MM-YYYY'), level-1) 作为日期范围
    从双
    按级别连接 <= months_between(to_date('31-12-2012','DD-MM-YYYY'), to_date('01-01-2012','DD-MM-YYYY')) + 1
  ) 选择 sum(tbl.cnt) 作为 summ, trunc(dates.daterange, 'MM')
      从日期
           左外连接 DATA_TBL tbl
        在 trunc(tbl.inc_date, 'MM') = trunc(dates.daterange, 'MM')
      按 trunc(dates.daterange, 'MM') 分组
      按 trunc(dates.daterange, 'MM') 排序；

-- 生成宿舍：
选择 ADD_MONTHS(to_date('01-01-2012','DD-MM-YYYY'), (level-1)*3)
  从双
  按级别连接 <= months_between(to_date('31-12-2012','DD-MM-YYYY'), to_date('01-01-2012','DD-MM-YYYY'))/3 + 1;

日期为 (
  选择 add_months(to_date('01-01-2012','DD-MM-YYYY'), (level-1)*3) 作为日期范围
    从双
    按级别连接 <= months_between(to_date('31-12-2012','DD-MM-YYYY'), to_date('01-01-2012','DD-MM-YYYY'))/3 + 1
  ) 选择 sum(tbl.cnt) 作为 summ, trunc(dates.daterange, 'Q')
      从日期
           左外连接 DATA_TBL tbl
        在 trunc(tbl.inc_date, 'Q') = trunc(dates.daterange, 'Q')
      按 trunc(dates.daterange, 'Q') 分组
      按 trunc(dates.daterange, 'Q') 排序；

-- 生成年份：
选择 add_months(to_date('01-01-2007','DD-MM-YYYY'), (level-1)*12)
  从双
  按级别连接 <=months_between(to_date('31-01-2012','DD-MM-YYYY'), to_date('01-01-2007','DD-MM-YYYY'))/12 + 1;

日期为 (
  选择 add_months(to_date('01-01-2007','DD-MM-YYYY'), (level-1)*12) 作为日期范围
    从双
    按级别连接 <= months_between(to_date('31-01-2012','DD-MM-YYYY'), to_date('01-01-2007','DD-MM-YYYY'))/12 + 1
  ) 选择 sum(tbl.cnt) 作为 summ, trunc(dates.daterange, 'YYYY')
      从日期
           左外连接 DATA_TBL tbl
        在 trunc(tbl.inc_date, 'YYYY') = trunc(dates.daterange, 'YYYY')
      按 trunc(dates.daterange, 'YYYY') 分组
      按 trunc(dates.daterange, 'YYYY') 排序；

```

但是**按级别连接**是 hack 根据：

*   [http://www.sqlsnippets.com/en/topic-11821.html](http://www.sqlsnippets.com/en/topic-11821.html)（问题。使用 PRIOR 或不使用 PRIOR，这是个问题）

# android - 将图像加载到页面卷曲活动中

> ID：14231376
> 
> 赞同：1
> 
> 时间：2013-01-09T08:51:38.347
> 
> 标签：android, image

我已将一组图像加载到我的 SD 卡中，我想在我的页面卷曲活动中显示它们。

我检查了图像是否正确下载：

```
 ArrayList<String>  mStringList= new ArrayList<String>();
 File strPath = new File(Environment.getExternalStorageDirectory() + "/Pictures");
 int lists = strPath.listFiles().length; 
 Log.d("number of items in array ",String.valueOf(lists));

 File yourDir = new File(strPath, "");
 for (File f : yourDir.listFiles()) {
     if (f.isFile())
     {
         String name = f.getName();
         String v = strPath + "/" + name;
         mStringList.add(v);
     }
 } 
```

这是位图提供程序：

```
 * Bitmap provider.
 */
private class PageProvider implements CurlView.PageProvider {

    // Bitmap resources.
    private int[] mBitmapIds = { R.drawable.obama, R.drawable.road_rage,
            R.drawable.taipei_101, R.drawable.world };

    @Override
    public int getPageCount() {
        return 5;
    }

    private Bitmap loadBitmap(int width, int height, int index) {
        Bitmap b = Bitmap.createBitmap(width, height,
                Bitmap.Config.ARGB_8888);
        b.eraseColor(0xFFFFFFFF);
        Canvas c = new Canvas(b);
        Drawable d = getResources().getDrawable(mBitmapIds[index]);

        int margin = 7;
        int border = 3;
        Rect r = new Rect(margin, margin, width - margin, height - margin);

        int imageWidth = r.width() - (border * 2);
        int imageHeight = imageWidth * d.getIntrinsicHeight()
                / d.getIntrinsicWidth();
        if (imageHeight > r.height() - (border * 2)) {
            imageHeight = r.height() - (border * 2);
            imageWidth = imageHeight * d.getIntrinsicWidth()
                    / d.getIntrinsicHeight();
        }

        r.left += ((r.width() - imageWidth) / 2) - border;
        r.right = r.left + imageWidth + border + border;
        r.top += ((r.height() - imageHeight) / 2) - border;
        r.bottom = r.top + imageHeight + border + border;

        Paint p = new Paint();
        p.setColor(0xFFC0C0C0);
        c.drawRect(r, p);
        r.left += border;
        r.right -= border;
        r.top += border;
        r.bottom -= border;

        d.setBounds(r);
        d.draw(c);

        return b;
    } 
```

我该如何更换

```
// Bitmap resources.
        private int[] mBitmapIds = { R.drawable.obama, R.drawable.road_rage,
                R.drawable.taipei_101, R.drawable.world }; 
and Drawable d = getResources().getDrawable(mBitmapIds[index]); 
```

到我的sd卡里的那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:58:37.790

将图像从 sdcard 转换为可绘制为：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inPreferredConfig = Bitmap.Config.ARGB_8888;
Bitmap bitmap = BitmapFactory.decodeFile(mStringList[index], options);

Drawable d = new BitmapDrawable(bitmap);; 
```

# c# - 二维码扫描并在二维码中显示信息

> ID：14231377
> 
> 赞同：2
> 
> 时间：2013-01-09T08:51:43.377
> 
> 标签：c#, visual-studio-2008, qr-code

是否有任何示例 C# 代码来扫描二维码并在二维码中显示信息。我需要任何二维码库来执行此操作吗？

我有 VS 2008、Windows CE 模拟器 3.0、Windows 移动设备中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:56:00.563

这个怎么样。似乎与CF兼容

[http://visualstudiogallery.msdn.microsoft.com/1C5E731B-4B43-4654-8E9C-7235DD428758](http://visualstudiogallery.msdn.microsoft.com/1C5E731B-4B43-4654-8E9C-7235DD428758)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:44:52.197

我将基于 java 的 zxing 移植到 .net 和 WinCE。你可以从这里得到它：http: [//zxingnet.codeplex.com/](http://zxingnet.codeplex.com/) 它包括一个 WinCE 的小例子。

# javascript - 在javascript中检查年龄是否不少于13岁

> ID：14231381
> 
> 赞同：5
> 
> 时间：2013-01-09T08:51:52.313
> 
> 标签：javascript

谁能指导我通过javascript函数，它将获取当前日期和用户输入的日期之间的年份差异

我试过这个，但它不计算闰年

```
var yearOld=2000
var dateOld=11
var mnthOld=1;
var currendDate=new Date(); // 9 - jan - 2013

var oldDate=new Date(yearOld,mnthOld-1,dateOld);

var timeDiff =currendDate-oldDate ;

var diffDays = timeDiff / (1000 * 3600 * 24 * 365); 
```

结果来了 13.00789 应该小于 13

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T08:55:22.947

```
function getAge(birthDateString) {
    var today = new Date();
    var birthDate = new Date(birthDateString);
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    return age;
}

if(getAge("27/06/1989") >= 18) {
    alert("You have 18 or more years old!");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T08:54:52.373

如果您有大量与日期相关的操作，请考虑使用 MomentJS [http://momentjs.com/](http://momentjs.com/)。检查那里的前两个示例，我想它们适合您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:56:00.087

[http://www.datejs.com/](http://www.datejs.com/)是一个有用的库，用于各种日期计算

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-17T09:07:48.857

采用

```
// millisecs * secs * mins * hrs * days (inclu. leap)
msecsInYear = 1000 * 60 * 60 * 24 * 365.25; 
```

注意：静态不正确，但在数学上是正确的！
将涵盖闰年的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-27T13:11:24.860

```
// 1\. Get current date
// 2\. Add 13 to the year in DOB.
// 3\. check if current year is less than dob-year. If not person is older than 13 years
// 4\. And so on check for month and date

var date_of_birth = '2015-12-26' // example DOB
var is_13 = true; // flag for 13 

dob = date_of_birth.trim(); // trim spaces form DOB
y = parseInt(dob.substr(0,4)); // fetch year using substr() from DOB
m = parseInt(dob.substr(5,2)); // fetch month using substr() from DOB
d = parseInt(dob.substr(8,2)); // fetch date using substr() from DOB
// the above logic can change depending on the format of the input DOB

var r = new Date(); // Gets current Date

if(r.getFullYear() <= (parseInt(y) + 13)){ 
       if((r.getMonth()+1) <= m){
            if(r.getDate() < d){
                is_13 = false;
                console.log('less than 13');
}}} 
```

# sql - 什么数据库用于广泛的日志文件分析？

> ID：14231382
> 
> 赞同：1
> 
> 时间：2013-01-09T08:51:55.853
> 
> 标签：sql, database, nosql, analysis, logfile

任务是从已完成的研究项目中过滤和分析大量日志文件（大约 8TB）。这个想法是用数据填充数据库，以便以后能够运行不同的分析任务。

这些值以逗号分隔存储。原则上，这些值是最多 5 个值的元组：

```
id, timestamp, type, v1, v2, v3, v4, v5 
```

在第一次尝试使用 MySQL 时，我使用了一个表，每行一个日志条目。所以日志值之间没有直接关系。这里的缺点是子集查询缓慢。

因为没有关系，所以我研究了 NoSQL 数据库之类的替代方案，而 hbase 或 cassandra 之类的基于列的表似乎非常适合此类数据。但是这些系统是为我们没有的大型分布式系统而设计的。在我们的例子中，分析将在单台机器或一些虚拟机上运行。

哪种数据库适合这项任务？是否值得使用 hadoop+hbase 设置单个机器实例......或者这有点过大？

您会选择什么数据库来进行高性能日志文件分析？

**编辑：**也许我的问题是不清楚我们不能花钱购买云服务或新硬件。问题是使用 noSQL 方法而不是 mySQL 是否有好处（尤其是对于这些数据）。如果没有，或者它们太小以至于设置 noSQL 系统的努力不值得，我们可以使用我们的 ESXi 基础架构和 MySQL。

**EDIT2：**我在这里仍然遇到问题。我对 MySQL 做了进一步的实验，只插入了所有可用数据的四分之一。该插件现在运行了 2 天以上，尚未完成。目前我的单表数据库中有 2,147,483,647 行。随着 indeces，这需要 211,2 GiB 的磁盘空间。这只是所有日志记录数据的四分之一......表单的查询

```
SELECT * FROM `table` WHERE `timestamp`>=1342105200000 AND `timestamp`<=1342126800000 AND `logid`=123456 AND `unit`="UNIT40"; 
```

完成需要 761 秒，在这种情况下返回一行。时间戳、logid、单位有一个组合索引。

所以我认为这不是要走的路，因为在稍后的分析中，我将不得不在一个时间范围内获取所有条目并比较数据点。

我读过 MongoDB 和 Redis，但它们的问题是，它们在内存数据库中。

在后面的分析过程中会有非常少量的并发数据库访问。事实上，分析将在一台机器上运行。我不需要冗余。如果发生故障，我将能够重新生成数据库。当数据库完全写入后，也无需更新或添加更多行。

您如何看待 Redis、MongoDB 等替代方案。当我做到这一点时，我需要数据维度的 RAM... 这个任务是否可以通过单节点系统或可能有两个节点以某种方式实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:05:54.773

好吧，我个人更喜欢更快的解决方案，因为您说您需要高性能分析。问题是，如果您必须设置一个全新的系统来执行此操作，并且与您需要的额外工作相比，性能改进将是次要的，那么请继续使用 SQL。

在我们公司，我们有一个很小的数据库，在 VM 上甚至包含不到半 GB 的数据。现在的问题是，一旦您使用虚拟机，就会遇到严重的性能问题，在虚拟机上打开数据库时，您可以同时去喝杯咖啡；）

但是，如果数据库加载到缓存之前的时间不是那么重要，那也没关系。这完全取决于您认为新系统的速度有多快，以及您必须投入多少精力，但正如我所说，如果您必须进行“高性能分析”，我更喜欢更快的解决方案

# iphone - iOS中的NSString值验证

> ID：14231384
> 
> 赞同：3
> 
> 时间：2013-01-09T08:52:08.440
> 
> 标签：iphone, ios, objective-c, nsstring

这种简单的验证方法很`NSString`麻烦。我有一个`NSString`值，我想验证字符串，即，如果字符串**只包含'a to z'（或）'A to Z'（或）'1 to 9'（或）'@,!,&'**那么字符串是有效的。如果字符串包含任何其他值，那么这`NSString`是无效的，我如何验证这个..？

例如：

有效的：

```
NSString *str="aHrt@2"; // something like this 
```

无效的：

```
NSString *str="..gS$"; // Like this 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:55:43.343

我会做一些使用`stringByTrimmingCharactersInSet`

创建一个`NSCharacterSet`包含所有有效字符的字符串，然后从测试字符串中删除这些字符，如果字符串现在为空则有效，如果还有剩余字符，则无效

```
NSCharacterSet *validCharacters = [NSCharacterSet characterSetWithCharactersInString:@"myvalidchars"];
NSString *trimmedString = [testString stringByTrimmingCharactersInSet:validCharachters];
BOOL valid = [trimmedString length] == 0; 
```

**编辑：** 如果要控制可以输入到文本字段中的字符，请`textField:shouldChangeCharactersInRange:replacementString:`使用`UITextFieldDelegate`

这里 testString 变量成为建议的字符串，如果没有无效字符，则返回 YES

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T08:58:40.407

尝试使用字符集：

```
NSMutableCharacterSet *set = [NSMutableCharacterSet characterSetWithCharactersInString:@"@!&"];
[set formUnionWithCharacterSet:[NSCharacterSet alphanumericCharacterSet]];
if ([string rangeOfCharacterFromSet:[set invertedSet]].location == NSNotFound) {
    // contains a-z, A-Z, 0-9 and &@! only - valid
} else {
    // invalid
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T08:54:18.823

NSPredicate[类](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)是你想要的

有关谓词编程的[更多信息。](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/predicates.html#//apple_ref/doc/uid/TP40001789)基本上你想要“自我匹配”（你的正则表达式）。之后，您可以使用该`evaluateWithObject:`方法。

**编辑**更简单的方法：（没关系，当我正在编辑它时，沃特森发布了我要写的内容）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T08:55:30.900

您可以使用 NSRegularExpression 类来执行此操作。

[https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T08:56:32.437

你也可以使用 NSRegularExpression 来搜索你的 NSString，如果它只包含有效的字符（反之亦然）。

更多信息：

[使用正则表达式搜索 NSString](https://stackoverflow.com/questions/4353834/search-through-nsstring-using-regular-expression)

[使用正则表达式查找/替换 NSString 中的子字符串](https://stackoverflow.com/questions/9661690/user-regular-expression-to-find-replace-substring-in-nsstring)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T08:58:53.617

```
- (BOOL)validation:(NSString *)string  
{

   NSCharacterSet *cs = [[NSCharacterSet characterSetWithCharactersInString:@"1234567890abcdefghik"] invertedSet];
NSString *filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];
return ([string isEqualToString:filtered]);
} 
```

在您的按钮操作中：

```
-(IBAction)ButtonPress{

 if ([self validation:activity.text]) {
    NSLog(@"Macth here");
}
else {
    NSLog(@"Not Match here");
}
} 
```

将此“1234567890abcdefghik”替换为您要匹配的字母

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-09T08:59:36.313

```
+(BOOL) validateString: (NSString *) string
{
    NSString *regex = @"[A-Z0-9a-z@!&]";
    NSPredicate *test = [NSPredicate predicateWithFormat:@"SELF MATCHES %@",  emailRegex];
    BOOL isValid = [test evaluateWithObject:string];
    return isValid;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-09T09:01:48.143

你可以简单地使用`NSMutableCharacterSet`

```
NSMutableCharacterSet *charactersToKeep = [NSMutableCharacterSet alphanumericCharacterSet];
[charactersToKeep addCharactersInString:@"@?!"];
NSCharacterSet *charactersToRemove = [charactersToKeep invertedSet]
NSString *trimmed = [ str componentsSeparatedByCharactersInSet:charactersToRemove];
if([trimmed length] != 0)
{
  //invalid string
} 
```

参考[NSCharacterSet](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/Reference/Reference.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-09T09:09:08.820

您可以使用正则表达式。如果每件事都失败了，请使用蛮力，例如

```
 unichar c[yourString.length];
         NSRange raneg={0,2};
        [yourString getCharacters:c range:raneg];

// now in for loop

    for(int i=0;i<yourString.length;i++)
    {
     if((c[i]>='A'&&c[i]<='Z')&&(c[i]=='@'||c[i]=='!'||c[i]=='&'))
       {
         //not the best or most efficient way but will work till you write your regex:P
       }

    } 
```

# php - 使用 Kohana 框架从 2 个数据库中的表中进行选择

> ID：14231386
> 
> 赞同：0
> 
> 时间：2013-01-09T08:52:11.833
> 
> 标签：php, mysql, kohana

例如，我有 2 个名为的数据库：`Site_X`和`Site_Y`

`Site X`DB - 有桌子`Data`

`Site Y`DB - 有桌子`Data_ids`

我如何使用 kohana 从`Site X`数据库中获取所有 id 等于我在数据库中找到的`Site Y`数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:23:07.233

首先在 config/database.php 中为两个数据库定义配置

然后您可以执行以下操作（将 site_y、site_x 替换为您的数据库的配置名称）：

```
$ids = Database::instance('site_y')
    ->query(Database::SELECT, 'SELECT `id` FROM `Data_ids`')
    ->execute();
$results = Database::instance('site_x')
    ->query(Database::SELECT, 'SELECT `id` FROM `Data` WHERE `id` IN ('.implode(",", $ids).')')
    ->execute(); 
```

# math - 来自前序和后序遍历的 k-ary 树的数量

> ID：14231388
> 
> 赞同：1
> 
> 时间：2013-01-09T08:52:16.380
> 
> 标签：math, tree, combinatorics

假设给定前序和后序遍历和 k。这些遍历有多少个 k-ary 树？

k-ary 树是每个顶点最多有 k 个子节点的有根树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T09:37:05.757

如果您想知道具有前序和后序遍历的可能二叉树的数量，您应该首先绘制一棵可能的树。然后计算只有一个孩子的节点数。可能的树的总数为：2 ^（单子节点数）

例如：前：adbefgchij 后：dgfebijhca

我画了一棵有 3 个单子节点的树。因此，可能的树数为 8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T11:54:17.713

**首先通过DFS**确定子树的对应范围，得到子树的数量，然后通过子树的组合求解。

```
const int maxn = 30;
int C[maxn][maxn];
char pre[maxn],post[maxn];
int n,m;

void prepare()
{
    memset(C,0,sizeof(C));
    for(int i=0;i<maxn;i++)
    {
        C[i][0] = 1;
    }
    for(int i=1;i<maxn;i++)
    {
        for(int j=1;j<=i;j++)
        {
            C[i][j] = C[i-1][j-1] + C[i-1][j];
        }
    }
    return;
}

int dfs(int rs,int rt,int os,int ot)
{
    if(rs == rt) return 1;
    int son = 0,res = 1;
    int l = rs + 1,r = os;
    while(l <= rt)
    {
        while(r < ot)
        {
            if(pre[l] == post[r])
            {
                son++;
                break;
            }
            r++;
        }
        res *= dfs(l , l + r - os , os , r);
        l += r - os + 1;
        rs = l - 1;
        os = ++r;
    }
    return res * C[m][son];
}

int main()
{
    prepare();
    while(scanf("%d",&m) && m)
    {
        scanf("%s %s",pre,post);
        n = strlen(pre);
        printf("%d\n",dfs(0,n-1,0,n-1));
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:14:10.163

这取决于特定的遍历对。例如

```
pre-order:  a b c
post-order: b c a 
```

仅描述一种可能的树（尽可能少的树，除非您包含不一致的遍历对）。另一方面：

```
pre-order:  a b c
post-order: c b a 
```

描述 2^(3-1) = 4 棵树（在遍历有 3 个节点且 k 可以是任何东西的所有场景中最可能的），即 4 条 3 节点线。

# opengl - OpenGL中glActiveTexture和GL_TEXTURE0的作用是什么？

> ID：14231391
> 
> 赞同：28
> 
> 时间：2013-01-09T08:52:52.057
> 
> 标签：opengl, opengl-es

我正在寻找一种方法来理解为什么`glActiveTexture`需要。我有以下代码：

```
glGenTextures(1, &textureId);
glBindTexture(GL_TEXTURE_2D, textureId); 
```

如果我想象`GL_TEXTURE_2D`是挂在墙上的相框并且`textureId`是真实图片，那么`glBindTexture`是唯一将真实图片分配给相框的命令，那么`GL_TEXTURE0`和是什么`glActiveTexture`？

我下面的代码可以正常工作吗？

```
glActiveTexture(GL_TEXTURE0);
glGenTextures(1, &textureId);
glBindTexture(GL_TEXTURE_2D, textureId);

glActiveTexture(GL_TEXTURE1);
glTexImage2D(GL_TEXTURE_2D, .....)
glTexParameteri(GL_TEXTURE_2D, ...) 
```

我目前正在使用 OpenGL2.1。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-09T09:06:05.360

> 如果我想象 GL_TEXTURE_2D 是挂在墙上的图片框架，而 textureId 是真实图片，

实际上是一个很好的类比:)

> 那么，GL_TEXTURE0 和 glActiveTexture 是什么？

想一想有多个相框的墙，第一个框架标记为 GL_TEXTURE0，第二个框架标记为 GL_TEXTURE1，依此类推。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-09T15:00:53.183

OpenGL 在某个时候引入了多纹理（基本上是*在一个几何通道上使用多个纹理*）；为了让旧代码继续工作，他们不能只为所有函数添加额外的参数。这就是为什么您必须明确指定要处理的纹理单元的原因。

# jquery - jquery.ajax 选项 - 数据属性类型

> ID：14231398
> 
> 赞同：1
> 
> 时间：2013-01-09T08:53:07.113
> 
> 标签：jquery, ajax, json

在 jQuery.ajax( [settings ] ) 中，一个选项是数据。根据官方文档，data，Type：Object，String。

但是在chrome或firefox中，我尝试了下面的代码，注意：contentType是'application/json'，

```
var json={data:100};

    var options = {
        type: 'post',
        url: "test2.html",
        data: json,
        contentType: 'application/json',
        success: function (result) {

        }
$.ajax(options); 
```

![firebug 中的截图](../Images/df957ce4070d5619cce8417ede864d80.png)

编辑代码，将数据更改为 data:JSON.stringify(json)：

```
var json={data:100};      
var options = {
    type: 'post',
    url: "test2.html",
    data: JSON.stringify(json), 
    contentType: 'application/json',
    success: function (result) {

    } 
```

$.ajax(选项);

![在此处输入图像描述](../Images/c4acf6fea1bbb6e91d4d664e7756f758.png)

这两种类型的数据有什么区别？它们将如何影响服务器变量，如 post 变量和 get 变量？

# java - 哪个 JBoss 组件实现了哪个 Java EE 6 标准

> ID：14231399
> 
> 赞同：0
> 
> 时间：2013-01-09T08:53:14.510
> 
> 标签：java, jakarta-ee, jboss, jboss7.x

一段时间以来，我一直在努力寻找有关 JBoss AS 7（最新版本）的哪个组件实现了哪个 Java EE 6 规范的信息。我发现的最好的是，它列出了 JBoss EAP 实现的标准（由 redhat 生产的 JBoss AS），但没有关于哪些组件实现了哪个规范的信息：[https ://access.redhat.com/knowledge/articles /113373](https://access.redhat.com/knowledge/articles/113373)

你知道在哪里可以找到这个信息/你能提供这个信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:29:50.487

这些是我记得的实现 Java EE6 规范的项目

CDI - 焊接项目 - [http://www.seamframework.org/Weld](http://www.seamframework.org/Weld)

JPA - 休眠 - [http://www.hibernate.org/](http://www.hibernate.org/)

网络服务 - JBossWS - [http://www.jboss.org/jbossws](http://www.jboss.org/jbossws)

休息 JAX-RS - RestEasy - [http://www.jboss.org/resteasy](http://www.jboss.org/resteasy)

[安全 - PicketLink](http://www.jboss.org/picketbox)，PicketBox - [http://www.jboss.org/picketlink，http://www.jboss.org/picketbox](http://www.jboss.org/picketlink)

您还需要哪些信息？

# python - 求最大公约数

> ID：14231406
> 
> 赞同：1
> 
> 时间：2013-01-09T08:53:53.430
> 
> 标签：python, python-2.7

```
def gei(a, b):
     '''
     a, b: only positive integers! If you don't, we will make you. Max 1337
     For extracting the juice of the numbers in the form of a common divider
     '''
     #Not Ruby, no to_i, but int()
     smallest = int(abs(min(a, b)))
     biggest = int(abs(max(a, b)))
     print "You inputed: ", smallest, " and ", biggest, " their order doesn't matter."
     print "Do you want to see guess numbers? Type 'yes', if you do! "
     selection = raw_input()
     print
     print
     #To evade infinite loops and too big numbers, we use count.
     count = 0
     ans = smallest
     truth = str(selection) == str('yes')
     def condition(ans, base):
         ans1 = base % ans == 0
         return ans1
     while condition(ans, biggest) == False or condition(ans, smallest) == False:
         ans -= 1
         count += 1
     if count >= 1337:
         break
     elif truth == True:
         print  ans
     if truth == True:
         print
         print
     print  "After weeks of calculation, here is your greater common divider: "
     return ans 
```

所以，是的，八年级的信息学作业来提取常见的更大的分隔符。我想知道，也许你们知道我怎样才能让它不那么麻烦？如何避免在内部使用定义并命名这么多变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T09:11:43.067

```
import fractions
print fractions.gcd(4,8)
>>> 4 
```

不过你也可以看看源码：

```
def gcd(a, b):
    """Calculate the Greatest Common Divisor of a and b.

    Unless b==0, the result will have the same sign as b (so that when
    b is divided by it, the result comes out positive).
    """
    while b:
        a, b = b, a%b
    return a 
```

参考：[http ://en.wikipedia.org/wiki/Euclidean_algorithm](http://en.wikipedia.org/wiki/Euclidean_algorithm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:00:55.540

使用欧几里得算法

```
int GCD(int a,int b){
 if(b==0){
          return a;
 }
 return GCD(b,a%b);        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:16:02.217

在您的代码中可以改进一些事情。

首先，`truth`这是一个真正糟糕的变量名，因为它并没有真正告诉你它的内容是什么意思。我会使用类似的东西`show_work`。

接下来，您有一个内部函数，它告诉您一个变量除以另一个变量（返回一个布尔值）。我建议直接使用模值，而不是用 将其转换为布尔值`== 0`，而且您也不需要它在函数中。此外，从来没有必要将值与`True`or进行比较`False`。只需使用值本身（或用于`not`反转它）。将这些放在一起将使您的`while`循环条件`not biggest % ans and not smallest % ans`。

最后，您可以使用比逐个尝试每个值更好的算法。[Euclid 算法](http://en.wikipedia.org/wiki/Greatest_common_divisor#Using_Euclid.27s_algorithm)是一种快速计算最大公约数的好方法，并且在 Python 中很容易实现（但我会留给你）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T09:07:30.453

这是一个很好的consise，并且没有命名变量：

```
def gcd(a,b):
    return max(d for d in xrange(1, min(a, b)+1) if a % d == b % d == 0)

print gcd(15, 25)

>>> 5 
```

但请不要声称它是你自己的:)

# joomla - Joomla 管理员和前端链接不起作用

> ID：14231413
> 
> 赞同：2
> 
> 时间：2013-01-09T08:54:03.153
> 
> 标签：joomla

入侵我的`website`. 所有链接重定向到`home page`. 任何帮助？将 URL 缩短为`http://goo.gl/28FYH`

在管理员中，否`Save`，否`CLose` `Edit`，没有任何工作。有什么帮助吗？

我已经尝试了所有的可能性，比如改变`.hataccess`，没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:17:56.413

在 Joomla 1.5 中，后端的链接由 JS 管理。检查是否正确包含所有脚本。您还可以打开浏览器的 JS 控制台以查看单击链接时发生的情况。

# ruby-on-rails - Carrierwave & Zipfiles：使用提取的文件作为版本

> ID：14231416
> 
> 赞同：2
> 
> 时间：2013-01-09T08:54:15.890
> 
> 标签：ruby-on-rails, zip, carrierwave

关于版本过程我没有得到的东西......

我有一个 zip 文件，里面有一个文件，我想将该文件作为 zip 的“版本”上传：

上传者：

```
 version :specificFile do
    process :extract_file
  end

  def extract_file
    file = nil
    Zip::ZipFile.open(current_path) do |zip_file|
      file = zip_file.select{|f| f.name.match(/specificFile/)}.first
      zip_file.extract(file, "tmp/" + file.name.gsub("/", "-")){ true }
    end    
    File.open("tmp/" + file.name.gsub("/", "-"))
  end 
```

用法：

```
=link_to "Specific File", instance.uploader.specificFile.url 
```

只有这只是为我提供了两份 zip 副本。显然，关于版本/流程的工作方式，我缺少一些东西，而且我无法找到真正解释魔法的文档。

那么我该怎么做，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:24:48.467

这提供了“为什么”，尽管需要一点时间才能理解： [如何在 CarrierWave 进程中创建新文件？](https://stackoverflow.com/questions/4968027/how-do-you-create-a-new-file-in-a-carrierwave-process)

换句话说，当您创建一个版本时，carrierwave 会制作文件的副本，然后将文件路径传递给进程。当进程退出时，carrierwave 将上传该**路径的内容**——*而不是*进程返回的文件，这就是我认为的情况。

工作代码：

```
 version :specificFile do
    process :extract_file
    def full_filename (for_file = model.logo.file)
      "SpecificFile.ext"
    end
  end

  def extract_plist
    file = nil
    Zip::ZipFile.open(current_path) do |zip_file|
      file = zip_file.select{|f| f.name.match(/specificFile/)}.first
      zip_file.extract(file, "tmp/" + file.name.gsub("/", "-")){ true }
    end    
    File.delete(current_path)
    FileUtils.cp("tmp/" + file.name.gsub("/", "-"), current_path)
  end 
```

所以，为了让我想要发生的事情发生，我：

*   告诉carrierwave 使用特定的文件名。我使用的是硬编码值，但您应该可以使用任何您想要的值。

*   `current_path`用您想要的内容覆盖版本名称下的内容。就我而言，当我“在其中”（我认为）时，我不能只覆盖 zip，所以我制作了我关心的文件的副本，并通过 File 和 FileUtils 覆盖了 zip。

PS - 避免重复 zip 会很好，但看起来你不能告诉carrierwave 跳过重复。

# javascript - Extjs / Javascript - 在函数返回之前等待 MessageBox 响应

> ID：14231418
> 
> 赞同：1
> 
> 时间：2013-01-09T08:54:18.583
> 
> 标签：javascript, function, extjs, response

我正在使用 Extjs，版本 4.0.7 开发一个项目，但我遇到了问题。我有一个在保存之前验证数据有效性的功能。它看起来像这样：

```
 me.validateEmployeeSystemSettingsOnSave = function (a,b,c) { 
           switch (c) {
        case 1:{
         if(expression)
           return {success: false}
           if(expression2){
           Ext.Msg.show({
                title:'',
                    msg:'',
                buttons: Ext.Msg.YESNO,
                icon: Ext.Msg.QUESTION,
                fn: function (btn) {
                if (btn == 'yes') {
                return { success: true };
                }
                else if (btn == 'no') {
                return { success: false};
                }
                },
                modal: true
                 });
             }

      else return {success: true}; /*problem line*/ //this is the default answer, when function will 
//not enter any expression and return {success: true} 

    }
    case 2:{
    }
    } 
```

我上面的函数在 onSave 函数中调用，如下所示：

```
 var response = me.validateEmployeeSystemSettingsOnSave(dsa,ssa,daa){
   if(response.success){
this.save();
}
else{
}
} 
```

我的问题是：有什么方法可以等待 Ext.msg.show() 的回答，然后才能达到`return`我用 /*问题行*/ 标记的默认值？因为现在该函数不接受我是或否的回答，所以它总是返回`{success: 'true'}`，这是正常的，考虑到函数的结构。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:01:33.010

**你永远不应该等待，而是使用回调！**所以在你的情况下执行回调而不是返回`{ success: true };`

# c# - 在 C# 中读取 JS 变量/将 JS 变量转发到 Visual Studio 性能测试？

> ID：14231421
> 
> 赞同：6
> 
> 时间：2013-01-09T08:54:24.197
> 
> 标签：c#, javascript, .net, visual-studio-2010, performance

这里的人们正在使用 Visual Studio 进行性能测试。现在一些 javascript 部分存在一些小问题：他们无法通过 Visual Studio Web 性能测试来检查 javascript 部分的性能。

我从未使用过 Visual Studio 性能测试，所以我真的不知道如何在那里进行测试，但我看到有很多用于 web + js 性能检查的解决方案。我以为我们可以使用其他工具和框架，但这是不允许的。这里的人们想在所有事情上都使用 Visual Studio。所以这让事情变得更加棘手。

如果我必须检查 javascript 性能，我会很容易地做这样的事情：

```
var begin = new Date();
functionA();
functionB();
functionX();
var end = new Date();
var bench = end - begin; 
```

最后，我可以在变量中看到`bench`我的结果。现在我只需要将这个变量“以某种方式”传递给视觉工作室性能测试？通过 C#？或者这些东西是如何工作的？这会是一个好的解决方案吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T01:33:14.127

我不认为这是可能的，因为 VS 性能测试引擎根本不运行任何客户端代码，它仅适用于 HTTP 级别。因此，您作为示例提供的代码将永远不会运行。

看看这里的证明 - [http://msdn.microsoft.com/en-us/library/ff520100.aspx](http://msdn.microsoft.com/en-us/library/ff520100.aspx)

> 因为 Web 性能测试引擎在 HTTP 层工作，所以它不会像 JavaScript 或 ActiveX 控件那样运行客户端脚本。Web 性能测试与在服务器上产生负载有关。因此，仅影响网页外观的客户端脚本对 Web 性能测试并不重要。设置参数值或导致额外 HTTP 请求（如 AJAX）的客户端脚本确实会影响服务器上的负载，并且可能需要您手动修改 Web 性能测试以模拟脚本。
> 
> 一个常见的误解是，因为记录发生在 Internet Explorer 中，并且 Web 性能测试结果查看器在浏览器控件中显示结果，所以 Web 性能测试必须以某种方式使用 Internet Explorer 执行。不是这种情况。所有请求都直接使用 Web 性能测试引擎执行；不会发生与 Internet Explorer 或任何其他浏览器的交互。Web 性能测试引擎使用标准 HTTP 请求/响应消息直接与目标 Web 服务器通信。

因此，唯一的方法是使用其他解决方案来检查 javascript 性能，或者实现自己的，例如基于 Selenium。我认为可以使用 Selenium RC 自动执行此类测量，Selenium RC 可以作为构建的一部分从 Visual Studio 运行（如果您的要求是使用 Visual Studio 进行所有操作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T06:57:47.640

当然这可以工作，但我不确定它是否可以直接与 VS 性能测试桥接。如果您渴望与 C# 和 VS 集成，另一种选择可能只是创建自己的。

在这种情况下，问题将导致如何桥接 JS 和 C#。如果您将 JS 嵌入页面然后使用 WebBrowser 控件运行它，则可以使用 .NET 平台完成此操作。在您的 javascript 中，您可以通过引用将信息传递回 C# 应用程序`window.external`。这是您的 javascript 中的一个示例：

```
window.external.performanceCallback([yourdata]); 
```

在包含 WebBrowser 控件的类中调用 performanceCallback() 方法。但是，在您这样做之前，您必须使您的类对您的网络浏览器正在打开的页面可见（window.external 是您正在引用的实例类）。

因此，要设置 window.external，当您在 C# 中创建 webBrowser 时：

```
webBrowser1.ObjectForScripting = this; 
```

此外，您必须使用 ComVisible 属性标记该类

```
[ComVisible(true)] 
```

提醒一下，WebBrowserControl**取决于**您计算机上安装的 IE 版本。所以在版本控制上要小心，javascript 只会在他/她的 IE 版本可以处理的范围内执行。确保您的 JS 在所有合理版本的 IE 上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T18:52:39.063

您无法直接监控 JavaScript，但您可以让 JavaScript 定期调用具有计时详细信息的 C# Web 服务。（当然，这会增加额外的开销，这肯定会扭曲结果，并可能否定整个目的。如果您在 LAN 上进行此测试，延迟应该会有所缓解。）

JavaScript

```
var log = function (message) {
    $.ajax('/path/to/log', {
        type: "POST",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({message:message})
    });
}
// then just call it like so in appropriate places: log('started foo at 12:34:56'); 
```

C＃：

asmx 服务或 MVC 控制器或任何接受 ajax 帖子的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T07:50:02.463

不可能，请检查[http://msdn.microsoft.com/en-us/library/ff520100.aspx](http://msdn.microsoft.com/en-us/library/ff520100.aspx)

# ruby-on-rails - Ruby On Rails：Gem 和插件之间的区别？

> ID：14231428
> 
> 赞同：-1
> 
> 时间：2013-01-09T08:54:50.077
> 
> 标签：ruby-on-rails, plugins, gem

宝石和插件有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:59:41.843

根据[本指南](http://guides.rubyonrails.org/plugins.html)，有两种类型的（Rails）插件：

*   特定于您的应用程序：*供应商插件*
*   跨应用程序有用：*gemified 插件*（或*gem*）

因此，*gem*是安装在系统上的插件，可在所有（Ruby）应用程序中使用。例如*Ruby on Rails*是一组*gems*。并且（常规或供应商）*插件*直接安装到应用程序中，并且仅在本地可用。

# asp.net - 检测和连接在线用户

> ID：14231432
> 
> 赞同：0
> 
> 时间：2013-01-09T08:54:53.020
> 
> 标签：asp.net, sql-server, vb.net, login, webforms

我想在`ASP.NET Web Forms`. 在这个网站上，我想在指定的时间*（假设 30 秒）内*随机连接任意两个在线用户。

我正在考虑将用户添加到临时表中_（以跟踪在线用户）_并在他们登录后立即为其分配一个随机数，并在注销时将其从临时表中删除。

问题：

1.  我不知道如何在会话过期或浏览器关闭时从表中删除用户。
2.  我不确定如何随机连接两个在线用户*（比如在 omegle 中）*。当**用户 A**和**用户 C**连接时，**用户 B**应该无法连接到**`User A and User C`**

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:03:33.557

您可以每 10 秒发送一次 Ajax 请求，通知服务器“用户 x 当前与用户 y 连接”。`lastUpdate`在包含用户的表中，您通过更新到当前时间`connected`来存储每个用户发送其最后一次“我还在那儿”请求的时间`1`。当用户在线但未连接时，您将更新`lastUpdate`并设置`connected`为零。

表结构如下：

```
users
    userId | lastUpdate | connected

connections
    userA | userB 
```

20`lastUpdate`多岁以前，与该用户的联系很可能不再存在。

随机连接用户时，您将只选择在线的用户（即`lastUpdate`少于 20 秒前的用户）。

连接两个用户时，只选择当前未连接（`connected = 0`）和在线（`lastUpdate`不超过 20 秒前）的用户。

# javascript - 想从服务器端清除 UIWebView 缓存

> ID：14231433
> 
> 赞同：3
> 
> 时间：2013-01-09T08:54:58.170
> 
> 标签：javascript, jquery, iphone, html, objective-c

我创建了一个 HTML 页面。在我的 iPhone 应用程序中，我在`UIWebView`.

在这里，我想在我的 HTML 中设置一个代码，我可以在其中告诉我`UIWebView`不要使用缓存。或者我想告诉 URL 不要使用缓存。

如果我不能正确解释你，请随意问我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:19:10.590

`HTML`通过删除所有内容来清理文档

```
 [webview stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML='';"]; 
```

或者像下面这样刷新所有缓存的数据..

```
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

有关更多信息，请参阅此博客[UIWebView-secrets-part](http://blog.techno-barje.fr/post/2010/10/04/UIWebView-secrets-part2-leaks-on-release/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:19:53.390

我假设您想通过查看 html 或 url 上的信息来禁用缓存。我建议您将此信息放在 HTML 中的唯一标签之间。您可以在之后使用字符串操作对其进行解析。

如果您使用的是 url，则应使用查询字符串之类的内容。

最后禁用缓存是由

```
 [[NSURLCache sharedURLCache] removeAllCachedResponses];
    [[NSURLCache sharedURLCache] setDiskCapacity:0];
    [[NSURLCache sharedURLCache] setMemoryCapacity:0]; 
```

但是，此代码会永久禁用缓存。如果您想再次启用它，您应该将磁盘容量和内存容量设置为更高的值。

# sql-server - 如何在 SSRS 2008 r2 中进行参数设置

> ID：14231435
> 
> 赞同：0
> 
> 时间：2013-01-09T08:55:00.360
> 
> 标签：sql-server

我有一个项目，我是参数公司和产品。

就像我有两家公司 Wipro 和 Acer，Wipro 产品是“包和笔记本电脑”，或者 Acer 产品是“台式机和鼠标”

我得到了所有的图表..我的问题就在这里。在公司下拉菜单中选择 Wipro 后，我选择了产品下拉菜单，那时我得到了所有的产品，比如 Wipro 产品和 Acer 产品。我不喜欢那样。当我从公司下拉列表中选择 Wipro 时，我需要在产品下拉列表中只使用 Wipro 产品。可能吗 ！！！如果是，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:25:17.910

为了根据第一个下拉列表填充数据，您需要将公司名称作为第二个下拉列表的参数传递。

假设我有 3 个数据集

![在此处输入图像描述](../Images/4db2b2ede0f4800bc308b6fc9c59f4e2.png)

在`Company DataSet`我只选择公司名称。

在`ProductDetails Dataset`中，我指定了一个 where 子句来根据公司名称过滤数据

```
SELECT ProductName
FROM   Products
WHERE  (Name = @Name) 
```

在`CompanyDetails Dataset`，查询将是

```
SELECT  Name, ProductName, Location
FROM  CompanyDetails
WHERE (Name = @Name) AND (ProductName = @Product) 
```

编写上述查询后，您将看到创建了 2 个参数，分别命名`@Name`为`@Product`

![在此处输入图像描述](../Images/5e1b2784565252f3c04ad8504c3c5c23.png)

在预览中，报告现在看起来像

![在此处输入图像描述](../Images/4b9824279afb8337608ceb82b81502bd.png)

选择 Wipro 后，您将在第二个下拉菜单中仅获得 Wipro 相关产品

![在此处输入图像描述](../Images/bf490ab969d7dc82f28b9a3a60e0f955.png)

此方法称为`cascading parameters`有关详细信息，请参阅[MSDN 文章](http://blogs.msdn.com/b/sqlforum/archive/2011/05/26/ssrs-cascading-parameter-with-optional-select-all-in-sql-reporting-services-report.aspx)

# c# - 如何在列表视图中使用 ensurevisible 方法？

> ID：14231443
> 
> 赞同：0
> 
> 时间：2013-01-09T08:55:31.420
> 
> 标签：c#, .net, listview

我有一个`ListView` *包含 100 个项目*，我们可以根据选定的项目进行某些活动。我已经使用`EnsureVisible()`方法来调整可见性和我的`ListView`刷新时间来更新数据。

现在我面临的问题是，如果我选择列表中的第一项，然后在此选择期间开始向下翻页*（可能选择第 21、59 和第 75 项）*，我可以在突然控制时突出显示第 1、第 24 和第 56在这种情况下刷新页面，只有第一个选择保留焦点，我失去了其他选择，必须单独或更快地再次浏览。

所以我的问题是我如何选择多个项目并`ListView`在一定间隔内刷新以填充数据时执行操作`EnsureVisible()`？

这是我现有的代码：

```
 if (_listviewFirst.SelectedItems.Count > 0)
        {
            _listviewFirst.SelectedItems[_listviewFirst.SelectedItems.Count - 1].EnsureVisible();
            _listviewFirst.SelectedItems[0].EnsureVisible();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:38:50.200

我将使用`ListView.ItemSelectionChanged`( [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.itemselectionchanged.aspx)`List` ) 事件并从选定项目中添加/删除项目（或其引用） 。当您的控件被刷新时，您应该迭代您选择的项目并将这些项目更新为在您的`ListView`.

您将能够利用`e.IsSelected`和`e.Item`或`e.ItemIndex`在事件处理程序中执行此操作。

我根本不会用`EnsureVisible`这个。

# .net - 微星偷偷安装MySql

> ID：14231447
> 
> 赞同：0
> 
> 时间：2013-01-09T08:55:38.277
> 
> 标签：.net, mysql, windows-installer, database

我们正在开发一个巨大的 WPF 客户端应用程序。

这将有大量信息和数据存储在数据库中用于统计复杂计算，我们计划使用 sqlite，但它绝对不适合使用像 150col * 数千行这样的表。

一位“家伙”告诉我，我们可以使用 mysql 并让 msi 在后台安装 mysql，因为它将被新手和普通用户使用。

我从未见过安装 mysql 的 msi，而且绝对不是在幕后，这可能吗？可以解决我们的问题。

谢谢，卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:24:25.727

如果 SQLite 不能满足您的需求，那么 MS SQL Compact Edition 怎么样？

我同意 Luca 的观点，在这种情况下，使用嵌入式解决方案可能是前进的方向。无论如何，您的 Db 听起来并不那么大。

# scala - 多部分解析器 Play-2.0 Scala 上大型多部分 POST 的性能损失

> ID：14231448
> 
> 赞同：1
> 
> 时间：2013-01-09T08:55:39.743
> 
> 标签：scala, playframework-2.0, multipartform-data

我目前正在尝试实现 HTML 清理服务，它接受 html 源数据和清理参数作为多部分形式。巨大的html出现问题。在我的测试用例中，我使用 30mb 的 html 文本，大约需要。控制器调用前 20 秒（参考 nginx 的同一篇文章需要不到一秒），实际的 html 处理只需要 1.5 秒。我假设这可能是框架正文解析器。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:06:51.123

这看起来像一个性能错误。您应该报告它并 - 现在 - 使用不同的库（例如 Apache Commons FileUpload）进行解析。它可以很容易地与非基于 servlet 的框架集成。您所要做的就是实现 RequestContext 接口并调用 parseRequest 方法。见 [http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileUploadBase.html#parseRequest(org.apache.commons.fileupload.RequestContext](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileUploadBase.html#parseRequest(org.apache.commons.fileupload.RequestContext) )

# maven - 是否可以使用 maven 2.x 构建 maven 1.x 项目？

> ID：14231450
> 
> 赞同：0
> 
> 时间：2013-01-09T08:55:42.183
> 
> 标签：maven, version-compatibility

我知道，我们可以将`project.xml`maven 1.x 转换`pom.xml`为 maven 2.x，但是我遇到了一个使用 maven 1.x 构建的复杂项目设置，而我的机器上目前只安装了 maven 2.x本地。

有一个设置 maven 1.x 的选项，但这将涉及更改 PATH 变量和配置。

我想知道，是否可以使用 maven 2.x 构建一个 maven 1.x 项目？我只需要测试一些东西。

我尝试了 maven 1.x 命令，但`no such goal`显然它们都失败了。所以，如果有一些我目前不知道的可以应用的技巧和调整，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:13:19.117

除非您根据`one:convert`目标转换项目，否则您将无法做到。你必须明白 Maven 1.x 和 2.x 是非常不同的。要么安装 1.x 并用它构建项目，要么转换它，如果可能的话，因为转换插件不会为您解决更复杂项目的所有问题。

# android - 检查onbackeypress是否检查了android

> ID：14231462
> 
> 赞同：0
> 
> 时间：2013-01-09T08:56:40.880
> 
> 标签：android

是否可以在 onbackeypressed 方法中检查是否在 android 中检查了 onback keypressed ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:58:56.713

在`Activity`您可以覆盖`onBackPressed`方法：

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:02:59.437

`onBackPressed()`在您的活动中覆盖。

```
@Override
public void onBackPressed() {
super.onBackPressed();
Log.i("Pressed","Back Button Key Pressed");
// Print here to see back button is pressed.
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:03:56.413

`onBackPressed()`仅当按下 Back 键时才会调用该事件。当按下返回键时，没有什么类似于调用的检查。

您只需覆盖默认`onBackKeyPressed()`功能。一旦按下 Back 键，它将自动被调用。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    // Here do what you want to do on back key pressed.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:09:25.380

您可以在您覆盖的方法中放置一个条件。要获得正常行为，您可以使用`super.onBackPressed()`. 因此，假设您有一个`Boolean`称为“条件”，并且您只想让按钮做某事，如果这`Boolean`是`true`，您可以使用此代码。

```
@Override
public void onBackPressed(){
    if(condition){
        super.onBackPressed(); //Normal behaviour
    } else {
        Log.d("Debug message", "Condition was not met"); //Other behaviour, if you want
    }
} 
```

如果您的检查更复杂，您可能需要考虑将其放入返回 a 的方法中`Boolean`。

# javascript - Javascript应用功能不适用于Android WebView？

> ID：14231463
> 
> 赞同：0
> 
> 时间：2013-01-09T08:56:47.467
> 
> 标签：javascript, android, android-webview

我正在使用以下代码，

```
var iphoneUrl = 'myScheme://{0}?{1}'
function callNativeFunction(functionName) {
    var args = Array.prototype.slice.call(arguments, 1);
    if (window.andriod) {
        andriod[functionName].apply(this, args);
    }
    else {
        var params = '';
        for (var i = 0, len = args.length; i < len; i++) {
            params += 'param' + (i + 1) + '=' + encodeURIComponent(args[i]) + '&';
        }
        params = params.slice(0, -1);// remove last &
        window.location = iphoneUrl.format(functionName, params);
    }
}
callNativeFunction('functionName', 'param1'); 
```

这是String.Format，

```
String.prototype.format = function () {
    var args = arguments;
    return this.replace(/{(\d+)}/g, function (match, number) {
        return typeof args[number] != 'undefined'
          ? args[number]
          : match
        ;
    });
}; 
```

哪个很棒，但适用于 andriod webview 不起作用。`alert(andriod[functionName])`给我 `'function myFunc(..){[native Code]}'`。但`andriod[functionName]`不调用函数。Not If use `andriod.myFunc`then it works但我不希望函数被硬编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:33:18.367

您将`this`作为第一个参数传递给 apply ，但由于[的值`this`取决于您调用 function 的方式](https://stackoverflow.com/questions/5429739/this-keyword-not-clear/5429817#5429817)，它只会反映全局对象，而它应该反映`andriod`（原文如此）对象。

只需`this`在以下行中替换`andriod`应该可以工作：

```
andriod[functionName].apply(this, args); 
```

进入

```
andriod[functionName].apply(andriod, args); 
```

改正`andriod`为`android`以下函数：

```
var iphoneUrl = 'myScheme://{0}?{1}'
function callNativeFunction(functionName) {
    var args = Array.prototype.slice.call(arguments, 1);
    if ('android' in window) {
        window.android[functionName].apply(window.android, args);
    }
    else {
        var params = '';
        for (var i = 0, len = args.length; i < len; i++) {
            params += 'param' + (i + 1) + '=' + encodeURIComponent(args[i]) + '&';
        }
        params = params.slice(0, -1);// remove last &
        window.location = iphoneUrl.format(functionName, params);
    }
}
callNativeFunction('functionName', 'param1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:28:22.630

我发现这是一种解决方法，不好但有效，

```
function apply(obj, methodName, args) {
    switch (args.length) {
        case 0: return obj[methodName]();
        case 1: return obj[methodName](args[0]);
        case 2: return obj[methodName](args[0], args[1]);
        case 3: return obj[methodName](args[0], args[1], args[2]);
        case 4: return obj[methodName](args[0], args[1], args[2], args[3]);
        case 5: return obj[methodName](args[0], args[1], args[2], args[3], args[4]);
        case 6: return obj[methodName](args[0], args[1], args[2], args[3], args[4], args[5]);
        case 7: return obj[methodName](args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
    }
}

function callNativeFunction(functionName) {
    var args = Array.prototype.slice.call(arguments, 1);
    if (window.android) {
        apply(android, functionName, args);
    }
    else {
        var params = '';
        for (var i = 0, len = args.length; i < len; i++) {
            params += 'param' + (i + 1) + '=' + encodeURIComponent(args[i]) + '&';
        }
        params = params.slice(0, -1);// remove last &
        window.location = iphoneUrl.format(functionName, params);
    }
} 
```

# c - 填充八位字节字符串

> ID：14231464
> 
> 赞同：1
> 
> 时间：2013-01-09T08:56:48.323
> 
> 标签：c, string, bit

我有 65 个不同位长的参数，我需要填写一个八位字节字符串。参数将在八位字节字符串中连续填充。例如，假设第一个参数是 1 位长，因此它将在八位字节字符串的第一个八位字节的第 0 位位置填充。现在第二个参数假设为 9 位长。因此，该参数的前 7 位将被填充到相同的八位字节中，接下来的 2 位应位于下一个八位字节的第 0 位和第 1 位位置。类似地，其他参数将被填充到八位字节字符串中。我试图编写一个函数，其中我将指针传递给当前八位字节、位位置和源指针，数据将从那里复制。但我发现逻辑实现有困难。我尝试了许多逻辑（位操作、位移、旋转等），但无法获得正确的逻辑。如果有人可以在“C”中给我一个逻辑/功能，我将不胜感激。您也可以使用不同的函数原型。

我编写了一个 16 位的代码，如下所示：

```
 void set16BitVal(U8** p_buf, U8* bitPos, U16 src)
{
        U16 ctr;
        U16 bitVal;
        U16 srcBitVal;
        U16 tempSrc = src;
        U8 temp = **p_buf;
        printf("\n temp = %d\n", temp);
        for(ctr=0; ctr<16; ctr++)
        {
         bitVal = 1;
         bitVal = bitVal << ctr;
         srcBitVal = src & bitVal;

      temp = temp | srcBitVal;
      **p_buf = temp;

      if(srcBitVal)
        srcBitVal = 1;
      else
        srcBitVal = 0;

      printf("\n bit = %d, p_buf = %x \t p_buf=%d  bitPos=%d ctr=%d srcBitVal = %d\n",\
              tempSrc, *p_buf, **p_buf, *bitPos, ctr, srcBitVal);
      *bitPos = (*bitPos+1)%8; /*wrap around after bitPos:7 */
      if(0 == *bitPos)
      {
        (*p_buf)++; /*jump to next octet*/
        temp = **p_buf;
        printf("\n Value of temp = %d\n", temp);
      }

      //printf("\n ctr=%d srcBitVal = %d", ctr, srcBitVal);
      printf("\n");
    }
} 
```

但问题是假设如果我通过 src=54647，我会得到以下输出：

温度 = 0

位 = 54647，p_buf = bf84da4b p_buf = 1 位位置 = 0 ctr = 0 srcBitVal = 1

bit = 54647, p_buf = bf84da4b p_buf=3 bitPos=1 ctr=1 srcBitVal = 1

bit = 54647, p_buf = bf84da4b p_buf=7 bitPos=2 ctr=2 srcBitVal = 1

bit = 54647, p_buf = bf84da4b p_buf=7 bitPos=3 ctr=3 srcBitVal = 0

bit = 54647, p_buf = bf84da4b p_buf=23 bitPos=4 ctr=4 srcBitVal = 1

bit = 54647, p_buf = bf84da4b p_buf=55 bitPos=5 ctr=5 srcBitVal = 1

bit = 54647, p_buf = bf84da4b p_buf=119 bitPos=6 ctr=6 srcBitVal = 1

bit = 54647, p_buf = bf84da4b p_buf=119 bitPos=7 ctr=7 srcBitVal = 0

温度值 = 0

位 = 54647，p_buf = bf84da4c p_buf=0 bitPos=0 ctr=8 srcBitVal = 1

位 = 54647，p_buf = bf84da4c p_buf=0 bitPos=1 ctr=9 srcBitVal = 0

bit = 54647, p_buf = bf84da4c p_buf=0 bitPos=2 ctr=10 srcBitVal = 1

位 = 54647, p_buf = bf84da4c p_buf = 0 位位置 = 3 ctr = 11 srcBitVal = 0

bit = 54647, p_buf = bf84da4c p_buf=0 bitPos=4 ctr=12 srcBitVal = 1

bit = 54647, p_buf = bf84da4c p_buf=0 bitPos=5 ctr=13 srcBitVal = 0

位 = 54647，p_buf = bf84da4c p_buf=0 bitPos=6 ctr=14 srcBitVal = 1

位 = 54647，p_buf = bf84da4c p_buf=0 bitPos=7 ctr=15 srcBitVal = 1

温度值 = 0

然而，预期的输出是：下一个字节应该开始填充 src 的第 8 位以上的值。

有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:56:32.053

你很幸运。因为我喜欢玩弄，所以我专门为你写了一个 BitBuffer 的通用实现。我没有对它进行彻底的测试（例如，不是所有令人讨厌的极端情况），但正如您将看到的，它通过了我添加到下面代码中的简单测试。

```
#include <assert.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>
#include <stdbool.h>

struct BitBuffer {
    unsigned length;       // No of bits used in buffer
    unsigned capacity;     // No of bits available in buffer
    uint8_t buffer[];
};

struct BitBuffer * newBitBuffer (
    unsigned capacityInBits
) {
    int capacityInBytes;
    struct BitBuffer * result;

    capacityInBytes = (capacityInBits / 8);
    if (capacityInBits % 8 != 0) {
        capacityInBytes++;
    }

    result = malloc(sizeof(*result) + capacityInBytes);
    if (result) {
        result->length = 0;
        result->capacity = capacityInBits;
    }
    return result;
}

bool addBitsToBuffer (
    struct BitBuffer * bbuffer, const void * bits, unsigned bitCount
) {
    unsigned tmpBuf;
    unsigned tmpBufLen;
    unsigned tmpBufMask;
    uint8_t * nextBufBytePtr;
    const uint8_t * nextBitsBytePtr;

    // Verify input parameters are sane
    if (!bbuffer || !bits) {
        // Evil!
        return false;
    }
    if (bitCount == 0) {
        // No data to add? Nothing to do.
        return true;
    }

    // Verify we have enough space available
    if (bbuffer->length + bitCount > bbuffer->capacity) {
        // Won't fit!
        return false;
    }

    // Get the first byte we start writing bits to
    nextBufBytePtr = bbuffer->buffer + (bbuffer->length / 8);

    // Shortcut:
    // If we happen to be at a byte boundary,
    // we can simply use memcpy and save us a lot of headache.
    if (bbuffer->length % 8 == 0) {
        unsigned byteCount;

        byteCount = bitCount / 8;
        if (bitCount % 8 != 0) {
            byteCount++;
        }
        memcpy(nextBufBytePtr, bits, byteCount);
        bbuffer->length += bitCount;
        return true;
    }

    // Let the bit twiddling begin
    nextBitsBytePtr = bits;
    tmpBuf = *nextBufBytePtr;
    tmpBufLen = bbuffer->length % 8;
    tmpBuf >>= 8 - tmpBufLen;
    tmpBufMask = (~0u) >> ((sizeof(unsigned) * 8) - tmpBufLen);
    // tmpBufMask has the first tmpBufLen bits set to 1.
    // E.g. "tmpBufLen == 3" ==> "tmpBufMask == 0b111 (7)"
    // or "tmpBufLen == 6" ==> "tmpBufMask = 0b111111 (63)", and so on.

    // Beyond this point we will neither access bbuffer->length again, nor
    // can this function fail anymore, so we set the final length already.
    bbuffer->length += bitCount;

    // Process input bits in byte chunks as long as possible
    while (bitCount >= 8) {
        // Add 8 bits to tmpBuf
        tmpBuf = (tmpBuf << 8) | *nextBitsBytePtr;
        // tmpBuf now has "8 + tmpBufLen" bits set

        // Add the highest 8 bits of tmpBuf to our BitBuffer
        *nextBufBytePtr = (uint8_t)(tmpBuf >> tmpBufLen);

        // Cut off the highest 8 bits of tmpBuf
        tmpBuf &= tmpBufMask;
        // tmpBuf now has tmpBufLen bits set again

        // Skip to next input/output byte
        bitCount -= 8;
        nextBufBytePtr++;
        nextBitsBytePtr++;
    }

    // Test if we still have bits left. That will be the case
    // if the input bit count was no integral multiple of 8.
    if (bitCount != 0) {
        // Add bitCount bits to tmpBuf
        tmpBuf = (tmpBuf << bitCount) | (*nextBitsBytePtr >> (8 - bitCount));
        tmpBufLen += bitCount;
    }

    // tmpBufLen is never 0 here, it must have a value in the range [1, 14].
    // We add zero bits to it so that tmpBuf has 16 bits set.
    tmpBuf <<= (16 - tmpBufLen);

    // Now we only need to add one or two more bytes from tmpBuf to our
    // BitBuffer, depending on its length prior to adding the zero bits.
    *nextBufBytePtr = (uint8_t)(tmpBuf >> 8);
    if (tmpBufLen > 8) {
        *(++nextBufBytePtr) = (uint8_t)(tmpBuf & 0xFF);
    }
    return true;
}

int main ()
{
    bool res;
    uint8_t testData[4];
    struct BitBuffer * buf;

    buf = newBitBuffer(1024); // Can hold up to 1024 bits
    assert(buf);

    // Let's add some test data.

    // Add 1 bit "1" => Buffer "1"
    testData[0] = 0xFF;
    res = addBitsToBuffer(buf, testData, 1);
    assert(res);

    // Add 6 bits "0101 01" => Buffer "1010 101"
    testData[0] = 0x54;
    res = addBitsToBuffer(buf, testData, 6);
    assert(res);

    // Add 4 Bits "1100" => Buffer "1010 1011 100"
    testData[0] = 0xC0;
    res = addBitsToBuffer(buf, testData, 4);
    assert(res);

    // Add 16 Bits "0111 1010 0011 0110"
    // ==> Buffer "1010 1011 1000 1111 0100 0110 110
    testData[0] = 0x7A;
    testData[1] = 0x36;
    res = addBitsToBuffer(buf, testData, 16);
    assert(res);

    // Add 5 Bits "0001 1"
    // ==> Buffer "1010 1011 1000 1111 0100 0110 1100 0011"
    testData[0] = 0x18;
    res = addBitsToBuffer(buf, testData, 5);
    assert(res);

    // Buffer should now have exactly a length of 32 bits
    assert(buf->length == 32);

    // And it should have the value 0xAB8F46C3
    testData[0] = 0xAB;
    testData[1] = 0x8F;
    testData[2] = 0x46;
    testData[3] = 0xC3;
    assert(memcmp(buf->buffer, testData, 4) == 0);

    free(buf);
    return 0;
} 
```

该代码并未针对最大性能进行优化，但我想它仍然应该具有不错的性能。任何额外的性能调整都会显着增加代码大小，我想保持代码相当简单。有些人可能会争辩说，使用`>> 3`代替`/ 8`和`& 0x7`代替`% 8`会带来更好的性能，但是如果你使用一个像样的 C 编译器，那么如果你启用优化，这正是编译器在内部会做的事情，因此我更喜欢让代码更具可读性.

**附加说明**
当您将指针传递给多字节数据类型时，请注意字节顺序！例如下面的代码

```
 uint16_t x16 = ...;
 addBitsToBuffer(buf, &x16, ...);
 uint32_t x32 = ...;
 addBitsToBuffer(buf, &x32, ...); 
```

在大端机器（PPC CPU）上运行良好，但在小端机器（例如 x86 CPU）上可能无法提供预期的结果。在小端机器上，您必须先交换字节顺序。您可以使用`htons`and`htonl`为此目的：

```
 uint16_t x16 = ...;
 uint16_t x16be = htons(x16);
 addBitsToBuffer(buf, &x16be, ...);
 uint32_t x32 = ...;
 uint32_t x32be = htonl(x32);
 addBitsToBuffer(buf, &x32be, ...); 
```

在大端机器上，`htonX`函数/宏通常什么都不做，因为该值已经处于“网络字节顺序”（大端）中，而在小端机器上，它们将交换字节顺序。

传递 uint8_t 指针将始终在任一机器上工作，它只有一个字节，因此没有字节顺序。

# emacs - 强制帧标题格式更新？

> ID：14231466
> 
> 赞同：1
> 
> 时间：2013-01-09T08:56:53.953
> 
> 标签：emacs, elisp

我想使用标题栏来显示一些对 emacs 有用的信息。目前我使用框架标题格式。但是，只有当 emacs “想要”更新它时，标题栏才会更新。例如保存文件，或到达缓冲区的顶部或底部。是否有手动更新标题栏的命令？

我使用的命令是

```
(setq frame-title-format 
  '("%b  %*  " 
    (:eval (number-to-string (wy-count-word-section))) 
    " / %i" "%n")) 
```

其中 wy-count-word-section 是一个数值变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:45:59.860

像 modeline 一样，使用`force-mode-line-update`也会更新框架标题。

# php - 单独的缩略图单击上的 Jquery 灯箱图像库

> ID：14231467
> 
> 赞同：0
> 
> 时间：2013-01-09T08:56:54.157
> 
> 标签：php, javascript, jquery, html, typo3

我正在尝试在单击缩略图时调用 jquery 灯箱库。但它不起作用。

这是html代码 -

```
<a class="launchlightbox" href="#"><img src="image_thumb.jpg" alt="" class="small_image"></a>

<div id="gallery">
    <a class="lightboxgallery" href="image1.jpg" id="counter-1"><img src="image1.jpg"></a>
    <a class="lightboxgallery" href="image2.jpg" id="counter-2"><img src="image2.jpg"></a>
    <a class="lightboxgallery" href="image3.jpg" id="counter-3"><img src="image3.jpg"></a>
</div> 
```

我编写了一个 Jquery 代码来调用画廊-

```
$('.launchlightbox').click(function(e){
     e.preventDefault();    
     $(this).next('.lightboxgallery').lightBox();
}); 
```

但这对我没有帮助。Jquery 灯箱插件的 JS 和 CSS 文件也包括在内。

是否有任何解决方案可以在单独的缩略图单击时调用灯箱库？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:59:09.837

确保您只包含 jQuery/jQuery Lightbox：

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.lightbox-0.4.js"></script> 
```

确保你有 CSS（并确保 media="screen" 在那里）：

```
<link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.4.css" media="screen" /> 
```

此外，不需要您用于启动灯箱的代码 - 无需引用您单击的链接以在其他内容上启动灯箱。

```
$('a.launchlightbox').click(function(){
    $("a.lightboxgallery").first().lightBox();
    return false;
}); 
```

此外，由于灯箱从位于`lightBox()`调用的 a 标签的 href 属性中的 URL 加载其图像（而不是从链接内的图像标签），因此您可以删除所有图像标签，`#gallery a`这些标签将节省您最初的时间加载一堆巨大的图像。

# titanium - Titanium mobile / Apple 推送通知 插入回调最符合逻辑的地方是什么

> ID：14231470
> 
> 赞同：0
> 
> 时间：2013-01-09T08:57:07.963
> 
> 标签：titanium, push-notification, apple-push-notifications, titanium-mobile

问题，

我想要实现的是有一个集中的地方来接收通知，所以无论用户在哪个窗口或选项卡上，都会收到通知并触发回调函数。

如果一个项目严重依赖 Apple 推送通知，那么（在 Titanium Mobile 中）将是插入通知请求和回调代码的最佳位置。

我认为这会自动发生，但事实并非如此，目前我将 registerForPushNotifications 放置在每个窗口和选项卡中包含的文件中。但是，如果发送推送通知，则每个选项卡都会收到它，但如果我更改选项卡，则会再次收到通知。

因此，如果我将其`registerForPushNotifications`放在包含的文件中，则会多次收到通知，即使它被触发一次也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:31:38.187

如果您在 ACS 中使用推送通知，请查看此处[http://developer.appcelerator.com/question/135751/acs---push-notifications---tutorial](http://developer.appcelerator.com/question/135751/acs---push-notifications---tutorial)

更多信息在这里

[http://blog.teemusk.com/2012/05/building-server-push-notifications-with-appcelerator-titanium-cloud/](http://blog.teemusk.com/2012/05/building-server-push-notifications-with-appcelerator-titanium-cloud/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:05:52.763

根据您对代码所说的内容，您遇到了麻烦，因为您有多个执行上下文（即每个选项卡都有一个带有指向另一个 JavaScript 文件的 url 属性的窗口）。与其使用多个上下文，不如在单个上下文中加载窗口（至少使用 CommonJS，最好使用 Alloy）。然后你可以在 app.js 中注册你的回调，或者在你的 app.js 中调用的 CommonJS 模块中。在那种情况下，您的问题将不存在。

# javascript - 如何编写 1 个函数而不是 n 个函数来验证需要相同验证的文本框？

> ID：14231473
> 
> 赞同：0
> 
> 时间：2013-01-09T08:57:12.960
> 
> 标签：javascript

这是我的示例代码，其中我有 2 个需要相同验证的文本框。如何为需要相同验证的两个文本框编写一个函数。这是我的代码：

```
<!DOCTYPE html>
<html>

<title>Home</title>

<body style="background-color:#708090;">

<script type="text/javascript" >

function a() {
    var ay = document.getElementById("ayear").value;

var pattern = /\d{4}-\d{2,4}/;

    if(pattern.test(ay))

    {

    ay.style.backgroundColor="#52F40C";
    return true;
        } 
    else 
    {
        window.alert ("Enter the correct acadamic year");
    ay.style.backgroundColor="#F40C0C";
     ay.focus();
         ay.value="";        
     return false;

    }
}

function b() {

var fy=document.getElementById("fyear").value;
var fpattern = /\d{4}-\d{2,4}/;

  if(fpattern.test(fy))
    {

    fy.style.backgroundColor="#52F40C";
    return true;
        } 
    else 
    {
        window.alert ("Enter the correct financial year");
    fy.style.backgroundColor="#F40C0C";
        fy.focus();
        fy.value="";
    return false;

    }
}

function c()
{

    var n=document.getElementById("name");

    var re=/^[a-zA-Z]+ ?[a-zA-Z]*$/;

    if(re.test(n.value))
    {

               n.style.backgroundColor="#52F40C";
    }
    else
    {
        window.alert("Invalid place name");
               n.style.backgroundColor="#F40C0C";
               n.focus();
               n.value="";

    }
}

</script>

</p>
<h3 style="font-family:Verdana">Notes</h3>

<h4 "style="font-family:Verdana;text-align:center;"><b><u>Declaration</u></b></h4>

<form   method="post">

<p> This  Report is prepared for the Current Acadamic Year(<input type="text" size="9"  id="ayear" onchange=a();>) and the Current Financial Year (<input type="text" size="9"  id="fyear" onchange=b();>) on behalf of the Institution.</p>

</form>

</body>
</html> 
```

`

在代码函数 a 和 b 中进行相同的验证，所以我可以将 2 个函数减少到 1 个吗？请帮助我，我是一个新手，以后需要做一个更大的逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:02:55.910

这是一个好问题，你应该很高兴它让你担心到足以问:)

为了减少代码重复，不仅仅是在 javascript 中，你应该总是问自己什么是通用的。在这种情况下，您可以简单地传递指示要验证哪个对象的参数。

例如：

```
 function a(elementId) {
        var ay = document.getElementById(elementId).value;
...
} 
```

然后你就可以调用 a("ayear") 和 a("fyear")。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:04:39.387

你可以这样做

```
<input type="text" size="9"  id="ayear" onchange="a(this);" > 
```

然后改变功能

```
function a(elem) {

var pattern = /\d{4}-\d{2,4}/;

    if(pattern.test(elem))

    {

    elem.style.backgroundColor="#52F40C";
    return true;
        } 
    else 
    {
        window.alert ("Enter the correct acadamic year");
    elem.style.backgroundColor="#F40C0C";
     elem.focus();
         elem.value="";        
     return false;

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:40:28.790

更多可配置版本

```
function validator(obj, pattern, info, bgc, bgc2) {

  if(pattern.test(obj.value))
  {
    obj.style.backgroundColor=bgc;
    return true;
  } 
  else 
  {
    window.alert (info);
    obj.style.backgroundColor=bgc2;
    obj.focus();
    obj.value="";        
    return false;
  }
} 
```

并在 html onchange() 中使用参数调用 fn 验证器：

```
<form method="post"> 
 <input type="text" size="9"  id="ayear" onchange="validator(this, /\d{4}-\d{2,4}/, 'Enter the correct acadamic year', '#52F40C', '#F40C0C');">
 ......
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:02:26.363

您可以将 id 作为参数传递，以便它适用于两种情况

```
function a(idname) {
    var ay = document.getElementById(idname).value;
    var element = document.getElementById(idname);//added object
    var pattern = /\d{4}-\d{2,4}/;

    if(pattern.test(ay)) {
       element.style.backgroundColor="#52F40C";
       return true;
    } else {

     window.alert ("Enter the correct acadamic year");
     element.style.backgroundColor="#F40C0C";
     element.focus();
     element.value="";        
     return false;

     }
} 
```

要使上述功能正常工作，您需要在表单中进行以下更改

```
<form   method="post"> 
     <input type="text" size="9"  id="ayear" onchange="a('ayear');">
     <input type="text" size="9"  id="fyear" onchange="a('fyear');">
   </form> 
```

## [演示](http://jsfiddle.net/pScMk/)

# jquery - 使用 display:none 读取 div 的 scrollHeight

> ID：14231481
> 
> 赞同：14
> 
> 时间：2013-01-09T08:57:28.057
> 
> 标签：jquery, html

使用隐藏`div`的父元素中的元素。`div``display:none`

*   我将 jQuery`textarea`元素转储到控制台。我看到`scrollHeight`第 0 个元素的属性是`88`.
*   我尝试将此属性读取到 var （使用`$(element)[0].scrollHeight`or`$(element).prop('scrollHeight')`并且我得到`0`.

我还尝试在读取之前设置`textarea`to`position: absolute`和`display: block`jQuery，结果相同。

如何正确读取属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-01-03T23:17:37.733

### 什么时候元素的大小是`display:none`多少？*经过***`0px`** ***`0px`***

 *该元素尚未在屏幕上的任何位置渲染或绘制，因此它真正占据了零像素的空间。*如果它是可见的，它**会*占用多少空间这个问题很难回答，因为准确地回答它意味着将假设变为现实。我们需要实际渲染它以获得对其大小的可靠测量。

一般来说，这包括：

1.  **切换**- 快速使元素可见、检查高度并恢复

    *切换*时，您可能可以在绘制周期之间显示和撤消，但不能保证。特别是如果您要测量的元素深深嵌套在隐藏的父元素中。

2.  **克隆**- 尽可能模拟元素的属性并在屏幕外渲染

    *克隆*时，元素的尺寸基于大量其他元素和围绕它的属性。根据页面的复杂性，也不能保证在屏幕外创建元素会产生与原始元素*完全相同的*尺寸。

以下问题中列出了几种解决方案，但大多数都遵循该基本模式：

*   [需要找到隐藏 div 的高度设置为`display:none`](https://stackoverflow.com/q/1473584/1366033)
*   [`display:none`在父元素内部时获取元素的大小](https://stackoverflow.com/q/10967857/1366033)
*   [检查元素是否在 DOM 中可见](https://stackoverflow.com/q/19669786/1366033)

还有一个名为[**jQuery.Actual**](https://github.com/dreamerslab/jquery.actual) (2.4KB) 的库，它抽象了其中的一些工作：

这是他们自己的[**Demo Page**](http://dreamerslab.com/demos/get-hidden-element-width-with-jquery-actual-plugin)和**Stack Snippet**：

```
console.log("width: ", $("#inner").actual("width"))
console.log("height: ", $("#inner").actual("height"))
```

```
#outer, #inner {
  margin: 10px;
  padding: 10px;
}
#outer {
  background: #d1e3ef;
}
#inner {
  background: #9ebae9;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.actual/1.0.19/jquery.actual.min.js"></script>

<div id="outer" style="display:none">
  <code>#outer</code>
  <div id="inner">
    <code>#inner</code>
  </div>
</div>
```

[![例子](../Images/11b1cdbf44fca159f7f546546fca0936.png)](https://i.stack.imgur.com/8EMkq.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-20T11:59:47.857

您需要为父 div 设置 dispaly:block 属性。在使用 $(element)[0].scrollHeight 获取滚动高度后，您可以将 display:none 设置为主 div。

所以你的代码将是

```
$('#mainDiv').show();
// Dump html to div
// Read height
var heightOfDiv = $('#mainDiv')[0].scrollHeight
// Hide the div
$('#mainDiv').hide(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-08T23:42:47.797

`display: none`不仅不会显示，而且不会被 DOM 树处理的元素。这就是 scrollHeight 为 0 的原因。

否则，使用`visibility: hidden`，该元素将不可见，但是它将在 DOM 中保留其空间。所以它会有一个不同于 0 的 scrollHeight。

然后，要读取属性并隐藏元素，您可以使用`$('#elementId').prop('visibility','hidden'); $('#elementId').prop('scrollHeight')`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-03T23:44:15.533

> 不，很遗憾这是不可能的。

我建议您阅读以下链接：[MDN |](https://developer.mozilla.org/en-US/docs/Web/CSS/display#display_none) [来自 nomensa的](https://www.nomensa.com/blog/2017/how-improve-web-accessibility-hiding-elements)[Display](https://developer.mozilla.org/en-US/docs/Web/CSS/display#display_none)或Article ，它唤起了 DOM 可访问性和可见性的概念。事实上，如果你把一个元素放到 " `display: none`" 中，它是不可见的，并且会退出[DOM 可访问性树](https://developer.mozilla.org/en-US/docs/Learn/Accessibility/What_is_accessibility#Accessibility_APIs)。但是，有一些技术可以让您使 DOM 元素完全不可见并且不再被认为存在于 DOM 上。

那么显然有一些你应该知道的技巧

**第一个**如果你想完全`mask your parent div without worrying about its dimensions`，我建议下面的代码。[clip 属性](https://developer.mozilla.org/en-US/docs/Web/CSS/clip)正在贬值，但没有它，它仍然会隐藏我们的项目。

```
console.log(document.getElementById('child').scrollHeight);
```

```
.hidden {
	border: 0;
	clip: rect(0 0 0 0);
	height: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	position: absolute;
	white-space: nowrap;
	width: 1px;
  z-index: -1;
}
```

```
<div class="hidden parent" href="#main">
  I am ignored by the DOM
  <div id="child">I am child</div>
</div>
<span style="color:red">I am the N°1</span>
```

**否则，**如果你愿意`to keep the dimensions of your parent div`，你可以将它浮出 DOM 流。

```
console.log(document.getElementById('child').scrollHeight);
```

```
.hidden {
	height: auto;
  width: auto;
  visibility: hidden;
	position: absolute;
  z-index: -1;
}
```

```
<div class="hidden parent" href="#main">
  I am ignored by the DOM
  <div id="child">I am child</div>
</div>
<span style="color:red">I am the N°1</span>
```

我希望这个答案会有所帮助。*

# .net - 如果 jquery ajax 调用部分视图，则脚本不会加载

> ID：14231483
> 
> 赞同：0
> 
> 时间：2013-01-09T08:57:50.230
> 
> 标签：.net, asp.net-mvc, jquery

在 .Net MVC 3 中，我尝试运行脚本。脚本处于局部视图中。如果我用 Html.RenderAction 调用部分它可以工作，但如果我通过 jquery ajax 在页面中调用部分视图它不起作用。

局部视图

```
 <script type="text/javascript">
    document.write("<script src='http://ad.reklamport.com/rpgetad.ashx?tt=t_iddaa_habersayfalari_mac_detay_300x250&ciid=&rnd=" + Math.random() % 99999999 + "'></" + "script>");            
</script> 
```

看法

有用..

```
<html>
    <head>        

    </head>
    <body>        
        @{Html.RenderAction("Partial");}

    </body>

</html> 
```

它不起作用...

```
<body>        
        @{Html.RenderAction("Partial");}
        <script type="text/javascript">
            $.ajax({
                type: "post",
                url: "/Home/Partial",
                dataType: "html",                
                success: function (result) {                    
                    $("#content").html(result);
                },
                error: function (result) {
                }
            });
        </script>
        <div id="content">

        </div>
    </body> 
```

我需要使用第二种方式..有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:02:34.027

这是因为`<div id="content">`尚未加载到 dom。尝试将 JS 脚本放在内容 div 之后

```
<body>        
        @{Html.RenderAction("Partial");}

        <div id="content">

        </div>
 <script type="text/javascript">
            $.ajax({
                type: "post",
                url: "/Home/Partial",
                dataType: "html",                
                success: function (result) {                    
                    $("#content").html(result);
                },
                error: function (result) {
                }
            });
        </script>
    </body> 
```

或者您可以包装您的 ajax 请求文档就绪事件处理程序

```
<script type="text/javascript">
           $(function{
                $.ajax({
                    type: "post",
                    url: "/Home/Partial",
                    dataType: "html",                
                    success: function (result) {                    
                        $("#content").html(result);
                    },
                    error: function (result) {
                    }
                });
            });
 </script> 
```

# android - Android Jelly Bean：升级时数据库损坏

> ID：14231485
> 
> 赞同：2
> 
> 时间：2013-01-09T08:57:55.907
> 
> 标签：android, sqlite, upgrade, android-4.2-jelly-bean, corrupt

在我的应用程序中，我通过复制保存在资产文件夹中的现有 sqlite 数据库来创建数据库。

在代码中，我还检查了数据库版本，因此如果安装了更高版本的应用程序，则重新创建数据库（在 onUpgrade 方法中）。

我遇到的问题是，升级过程在以前的 Android 版本上运行良好，但自从安装 Jelly Bean 后，我一直收到数据库损坏的错误。如果我干净地安装应用程序（所以没有数据库升级，只需创建），那么应用程序也可以正常运行。

我测试过的两台设备是带有 4.1.1 的 S3 和带有 4.2.1 的 Nexus 4。

任何想法为什么它会在最新的 Android 版本上开始失败？谢谢！

错误如下：

```
01-09 09:59:50.941: E/SQLiteLog(15915): (11) database corruption at line 51776 of [00bb9c9ce4]
01-09 09:59:50.941: E/SQLiteLog(15915): (11) database disk image is malformed
01-09 09:59:50.941: E/DefaultDatabaseErrorHandler(15915): Corruption reported by sqlite on database: /data/data/myapp/databases/services.sqlite
01-09 09:59:50.941: E/DefaultDatabaseErrorHandler(15915): deleting the database file: /data/data/myapp/databases/services.sqlite
01-09 09:59:50.991: E/SQLiteLog(15915): (1) no such table: services
01-09 09:59:50.991: D/AndroidRuntime(15915): Shutting down VM
01-09 09:59:50.991: W/dalvikvm(15915): threadid=1: thread exiting with uncaught exception (group=0x40c3c930)
01-09 09:59:50.991: E/AndroidRuntime(15915): FATAL EXCEPTION: main
01-09 09:59:50.991: E/AndroidRuntime(15915): java.lang.RuntimeException: Unable to start activity ComponentInfo{myapp/myapp.MainActivity}: android.database.sqlite.SQLiteException: no such table: services (code 1): , while compiling: (my query)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.os.Looper.loop(Looper.java:137)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at java.lang.reflect.Method.invokeNative(Native Method)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at java.lang.reflect.Method.invoke(Method.java:511)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at dalvik.system.NativeStart.main(Native Method)
01-09 09:59:50.991: E/AndroidRuntime(15915): Caused by: android.database.sqlite.SQLiteException: no such table: services (code 1): , while compiling: (my query)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at myapp.c.f(Unknown Source)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at myapp.bk.a(Unknown Source)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at myapp.MainActivity.onCreate(Unknown Source)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.app.Activity.performCreate(Activity.java:5104)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-09 09:59:50.991: E/AndroidRuntime(15915):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-09 09:59:50.991: E/AndroidRuntime(15915):    ... 11 more 
```

创建和升级数据库的代码如下：

```
public void createDatabase() throws IOException {
    boolean dbExist = checkDatabase();

    if(dbExist) {
        this.getWritableDatabase();
    }

    dbExist = checkDatabase();
    SQLiteDatabase db_Read = null;

    if(!dbExist) {
        db_Read = this.getReadableDatabase();
        try {
            copyDatabase();
        } catch(IOException e) {
            throw new Error ("Error copying database");
        }
    }
}

private boolean checkDatabase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }catch(SQLiteException e){
        //database does't exist yet.
    }

    if(checkDB != null){
        checkDB.close();
    }

    return checkDB != null ? true : false;
}

private void copyDatabase() throws IOException {

    InputStream myInput = myContext.getAssets().open(DB_NAME);

    String outFileName = DB_PATH + DB_NAME;
    OutputStream myOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;
    while((length = myInput.read(buffer))>0) {
        myOutput.write(buffer, 0, length);
    }
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public SQLiteDatabase openDatabase() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    myDatabase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    return myDatabase;
}

@Override
public synchronized void close() {
    if(myDatabase != null) {
        myDatabase.close();
    }
    super.close();
}

@Override
public void onUpgrade (SQLiteDatabase db, int oldVersion, int newVersion) {
    sc.updatedDB = true;
    if (newVersion > oldVersion) {
        try { 
            copyDatabase(); 
        } catch (IOException e) { 
            throw new Error("Error upgrading database"); 
        } 
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T19:43:55.683

在创建输出流之前，您可以通过在 copyDb 方法中添加 close() 语句来避免此问题：

```
InputStream myInput = myContext.getAssets().open(DB_NAME);

String outFileName = DB_PATH + DB_NAME;

     if(myDataBase != null)
        myDataBase.close();

OutputStream myOutput = new FileOutputStream(outFileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:17:40.317

问题出在您的 onUpgrade 方法中。它不工作。您不能使用 onUpdate 方法中的新文件覆盖 db 文件。第一个参数是一个 db (SQLiteDatabase db)，它已经打开。所以你不能用你的新文件覆盖打开的数据库文件。在调试器中检查这个。

也许您的代码中还有其他错误...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:14:55.100

您的错误日志说您应该有一个表名“服务”但它没有找到它，请检查您的数据库创建代码，也许您在创建查询中犯了错误。

# graphics - 编码图像矢量化程序

> ID：14231487
> 
> 赞同：0
> 
> 时间：2013-01-09T08:58:08.667
> 
> 标签：graphics, vector, svg, geometry

我想知道您将如何编写图像矢量化程序，al la vectormagic.com？您甚至会从哪里开始，是否可以使用任何基于 Web 的编程语言进行创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:38:58.090

矢量化程序的背后是复杂的算法（微软的人在相当不错的论文[去像素化像素艺术](http://research.microsoft.com/en-us/um/people/kopf/pixelart/)上的基本轮廓看起来）。无论如何，几乎可以用任何可以处理图像的语言编写，但是那些复杂的算法是相当昂贵的系统资源。因此，基于 Web 的语言非常不适合这种类型的任务。

# c - 使用带有指针数组的 scanf

> ID：14231489
> 
> 赞同：0
> 
> 时间：2013-01-09T08:58:12.163
> 
> 标签：c

```
char* username[30];
memset(username,0x00,30);
scanf("%s",&username); 
```

这会使指针指向内存中的随机位置还是可以安全使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:00:09.313

`char *username[30]`是一个*指针*数组，而不是字符。所以你的代码是非常错误的（因为*不安全*）。要获取您需要的字符数组：

```
char username[30]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:04:25.027

```
char* username[30]; //is array of char pointers.

//Allocate memory for these pointers using calloc(). so no need of memset().  

memset(username,0x00,30);//can be removed.

scanf("%s",&username);//It should be scanf("%s",username[i]); 
```

@perreal，添加了示例。

```
#define SIZE 100 //100 chars...
char* username[30]; 
int i;

for(i = 0; i < 30; i++)
{
   username[i] = calloc(SIZE, sizeof(char)); //Add Fail checks if needed.
   scanf("%s",username[i]);
} 
```

所以使用上面的代码，你可以得到 30 个字符串。如果您只需要一个 30 字符的字符串，那么

```
char username[30];
memset(username,0x00,30);
scanf("%s",username); 
```

足够的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:17:01.530

和

```
memset(username,0x00,30); 
```

您正在初始化指针数组的前 30 个字节，而不是整个数组

```
memset(username,0, sizeof(username)); 
```

将所有内容设置为 0 尽管简单的循环对读者来说更清晰（恕我直言）

```
for (int i = 0; i < 30; username[i++] = NULL) {;} 
```

不要这样做：

```
scanf("%s",&username); 
```

scanf 不会神奇地分配任何东西——“用户名”是一个指针数组并且是 NULL 指针，scanf 应该如何知道如何分配内存等？而是做一个循环，让用户输入一个字符串，为该字符串分配内存（+1），将字符串复制到分配的内存并将其分配给“用户名 [i]”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T09:17:13.097

您可能想要的是：

```
int i;
char* username[30];
for(i = 0; i < 30; i++)
{
     username[i] = calloc(100, sizeof(char));  // or whatever size your string is.
     scanf("%s",username[i]);
}
... Code using usernames ...
for(i = 0; i < 30; i++)
{
    free(username[i]);
} 
```

但就个人而言，我可能会选择：

```
int i;
char username[30][100];
for(i = 0; i < 30; i++)
{
     scanf("%s",username[i]);
} 
```

节省了以后必须释放指针。

这会将 30 个字符串读入您的用户名数组。

如果您只想读取一个用户名：

```
char username[30] = {0};    // Same as memset, but shorter to write!
scanf("%s", username); 
```

尽管正如其他人所建议的那样， scanf() 不是读取“用户生成的输入”的最佳功能 - 它适用于您的程序已经“检查”的数据（也就是说，它不包含“有趣的东西”，适合提供的长度等）并写入文件[使用 fscanf()]。对于用户输入，用于`fgets()`读取一行文本，然后以适合从字符串中获取实际数据的任何方式处理它。

例如，如果某个用户名的字符数超过 100 个 [或在上一个示例中为 30 个]，则字符串将溢出，并且不会产生任何好处 [在非常糟糕的情况下，您直到很久以后才会注意到，这使调试变得困难-如果幸运的话，它会立即崩溃]。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T09:33:44.717

```
char* username[30];
memset(username,0x00,30);
scanf("%s",&username); 
```

上面你的代码会崩溃，因为你试图输入没有分配内存的指针。所以首先你为指针分配内存，然后你读入那个内存位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T09:49:11.707

```
char *username[30] 
```

这是一个指向字符的指针数组。

去做`char username[30]`

# ios - 收到通知后，我想更改我的 uiwebview

> ID：14231490
> 
> 赞同：2
> 
> 时间：2013-01-09T08:58:17.157
> 
> 标签：ios, objective-c, uiwebview

我收到的通知包含一个要在`UIWebView`. 但我无法`UIWebview`从我的`AppDelegate`（这是接收的地方`notification`）访问。

```
-(void) application:(UIApplication *)application didReceiveRemoteNotification(NSDictionary* ) userInfo{
      // handle notification (this works)
      //HERE I want to call my UIWebView and load the url I got.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:03:22.943

在我的应用程序中，我使用了以下内容，这是`UIWebView`屏幕上已经出现的情况：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    NSString *urlString = [userInfo objectForKey:@"url"];
    if( [self.window.rootViewController isKindOfClass:[UINavigationController class]] ){
        UINavigationController *currentNavigationController = (UINavigationController*)self.window.rootViewController;
        if( [currentNavigationController.visibleViewController isKindOfClass:[NHCallVC class]] ){
            SomeViewController *currentViewController = (SomeViewController*)currentNavigationController.visibleViewController;
            [currentViewController.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]];
        }
    }
} 
```

的结构`UINavigationController`看起来很复杂，但这是我设置应用程序的方式所需要的。这在您的应用程序中可能会有所不同。

这个想法是获取打开的视图控制器并在`UIWebView`. 代码假设`UIViewController`当前`UIWebView`是打开的。如果您想`UIViewController`在打开`UIWebView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:00:45.073

一种方法是发布您`UIWebView`收到的通知。查看[NSNotificationCenter 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)或[SO 上的这个示例](https://stackoverflow.com/a/2191802/184245)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:05:50.253

将观察者放置在 UIWebView 所在的视图上，例如：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(recievedNotification:) name:@"ReceivedNotification" object:nil]; 
```

在 recievedNotification 函数中编写适当的代码来更改 UIWebView 的目标 url。

并在 APP Delegate 中的 didReceiveRemoteNotification 函数中发布通知，例如：

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"ReceivedNotification" object:nil]; 
```

祝你好运。

# android - 为什么我的地图叠加层不起作用？

> ID：14231493
> 
> 赞同：1
> 
> 时间：2013-01-09T08:58:26.620
> 
> 标签：android, map, overlay

这是我的覆盖类

```
 public class Overlay extends ItemizedOverlay<OverlayItem> {
    public Overlay(Drawable defaultMarker) {
        super(boundCenter(defaultMarker));

        }

    private ArrayList<OverlayItem>mOverlays= new ArrayList<OverlayItem>();

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i); }

    @Override
    public int size() {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {

      return true;
    }

} 
```

当我将此叠加层添加为：

在 OnCreate-->

```
Overlay overlay=new Overlay (drawable);
List<Overlay> mapOverlays = mapView.getOverlays();
GeoPoint myGeoPoint = new GeoPoint((mGeoPoint.getLatitudeE6()),
                (mGeoPoint.getLongitudeE6()));

        OverlayItem mOverlayItem = new OverlayItem(myGeoPoint, "", "");
        overlay.addOverlay(mOverlayItem );
        mapOverlays.add(overlay); 
```

并得到 NullPointeException 为什么？请给我解决方案。

谢谢。

# android - 如何在 Android 中获得 FB 好友的生日

> ID：14231509
> 
> 赞同：0
> 
> 时间：2013-01-09T08:59:24.683
> 
> 标签：android, facebook, facebook-graph-api

我正在使用此示例代码[https://github.com/chrtatu/FacebookFriendsList](https://github.com/chrtatu/FacebookFriendsList)来获取 FB 好友列表及其姓名和个人资料照片。
在这里，我也尝试获取他们的 DOB，但是代替 DOB，我得到了**null**值。
请帮忙拿那个。

**我的代码：**

```
 String[] facebook_permissions = { "user_photos", "friends_birthday", "friends_photos" };

  ==========================================================================

   public class FriendListAdapter extends BaseAdapter implements SectionIndexer {
    private LayoutInflater mInflater;
    private String[] sections;
    private GetProfilePictures picturesGatherer = null;
    FriendsList friendsList;
    Hashtable<Integer, FriendItem> listofshit = null;

    public FriendListAdapter(FriendsList friendsList) {
        Log.d(LOG_TAG, "FriendListAdapter()");
        this.friendsList = friendsList;
        sections = new String[getCount()];
        listofshit = new Hashtable<Integer, FriendItem>();
        for (int i = 0; i < getCount(); i++) {
            try {
                sections[i] = jsonArray.getJSONObject(i).getString("name").substring(0, 1);
                sections[i] = jsonArray.getJSONObject(i).getString("birthday").substring(0, 2);
            } catch (JSONException e) {
                sections[i] = "";
                Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            }
        }
        if (picturesGatherer == null) {
            picturesGatherer = new GetProfilePictures();
        }
        picturesGatherer.setAdapterForListener(this);
        mInflater = LayoutInflater.from(friendsList.getBaseContext());
    }

    public int getCount() {
        Log.d(LOG_TAG, "getCount()");
        if (jsonArray == null)
            return 0;
        return jsonArray.length();
    }

    public Object getItem(int position) {
        Log.d(LOG_TAG, "getItem()");
        return listofshit.get(position);
    }

    public long getItemId(int position) {
        Log.d(LOG_TAG, "getItemId()");
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d(LOG_TAG, "getView(" + position + ")");

        JSONObject jsonObject = null;
        try {
            jsonObject = jsonArray.getJSONObject(position);
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
        }

        FriendItem friendItem;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.single_friend, null);
            friendItem = new FriendItem();

            convertView.setTag(friendItem);
        }
        else {
            friendItem = (FriendItem) convertView.getTag();
        }

        friendItem.friendPicture = (ImageView) convertView.findViewById(R.id.picture_square);
        friendItem.friendName = (TextView) convertView.findViewById(R.id.name);
        friendItem.friendDob = (TextView) convertView.findViewById(R.id.dob);
        friendItem.friendLayout = (RelativeLayout) convertView.findViewById(R.id.friend_item);

        try {
            String uid = jsonObject.getString("uid");
            String url = jsonObject.getString("pic_square");
            friendItem.friendPicture.setImageBitmap(picturesGatherer.getPicture(uid, url));
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        try {
            friendItem.friendName.setText(jsonObject.getString("name"));
            friendItem.friendDob.setText(jsonObject.getString("birthday"));
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        listofshit.put(position, friendItem);

        return convertView;
    }

    public int getPositionForSection(int position) {
        return position;
    }

    public int getSectionForPosition(int position) {
        return position;
    }

    public Object[] getSections() {
        return sections;
    }
}

class FriendItem {
    TextView friendDob;
    int id;
    ImageView friendPicture;
    TextView friendName;
    RelativeLayout friendLayout;

}

==============================================================================

String query = "select name, uid, pic_square, birthday from user where uid in 
(select uid2 from friend where uid1=me()) order by name"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:05:49.510

而不是这两行代码：

```
 sections[i] = jsonArray.getJSONObject(i).getString("name").substring(0, 1);
 sections[i] = jsonArray.getJSONObject(i).getString("birthday").substring(0, 2); 
```

使用以下两行：

```
sections[i] = jsonArray.getJSONObject(i).getString("name").substring(0);
sections[i] = jsonArray.getJSONObject(i).getString("birthday").substring(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:02:54.020

请使用以下方法：也请查看此示例

[http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

```
public void getProfileInformation() {
mAsyncRunner.request("me", new RequestListener() {
    @Override
    public void onComplete(String response, Object state) {
        Log.d("Profile", response);
        String json = response;
        try {
            JSONObject profile = new JSONObject(json);
            // getting name of the user
            String name = profile.getString("name");
            // getting email of the user
            String email = profile.getString("email");
            //getting user birthday
            String birth_day=profile.getString("birthday");

            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    Toast.makeText(getApplicationContext(), "Name: " + name + "\nEmail: " + email, Toast.LENGTH_LONG).show();
                }

            });

        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onIOException(IOException e, Object state) {
    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e,
            Object state) {
    }

    @Override
    public void onMalformedURLException(MalformedURLException e,
            Object state) {
    }

    @Override
    public void onFacebookError(FacebookError e, Object state) {
    }
}); 
```

# html - 按钮位置问题

> ID：14231513
> 
> 赞同：0
> 
> 时间：2013-01-09T08:59:35.307
> 
> 标签：html, layout, button

好的，这是我的代码，问题是我有一个按钮和一个提交，但是由于某种未知原因，提交按钮中的文本放错了位置

这是代码

```
<input type="button"  id="openerCol" style = "width: 100px; height: 25px" value="Add new column" onclick="showPartial()"/>
 <br/>
 <input type="button"  id="openerInsCol" style = "width: 100px; height: 25px" value="Insert column" onclick="showPartial()"/>
 <br/>
 <input type="button"  id="openerUpCol" style = "width: 100px; height: 25px" value="Update column" onclick="showPartial()"/>
 <br/>
 <input type="button"  id="opener3" style = "width: 100px; height: 25px" value="Delete column" onclick="showPartial()"/>
 <br/>
 <input type="submit" name="Index" style = "width: 100px;  text-align: top; height: 25px"; value="Add Row" />
 <br/>
 <input type="button"  id="openerDelR" style = "width: 100px; height: 25px" value="Delete row" onclick="showPartial()"/>
 <br/>
 <input type="button"  id="openerEditCell" style = "width: 100px; height: 25px" value="Edit cell" onclick="showPartial()"/> 
```

在这里你可以看到屏幕截图[http://tinypic.com/r/rwpc48/6](http://tinypic.com/r/rwpc48/6)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:05:11.417

您在样式属性中放错了分号。我已经为你修好了那条线

```
 <input type="submit" name="Index" style = "width: 100px;  text-align: top; height: 25px;" value="Add Row" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:07:55.663

`;`in可能有问题`height: 25px";`

所以只需删除那个分号。

我只是复制并粘贴您的代码，删除`;`.

这是演示：[JSFiddle](http://jsfiddle.net/8JGcU/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:08:04.730

```
style = "width: 100px;  text-align: top; height: 25px"; 
```

应该

```
style = "width: 100px;  text-align: top; height: 25px;" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:14:52.330

尝试删除“文本对齐：顶部；” 或者尝试复制其他按钮的所有属性

# hibernate - 如何使用 Hibernate 连接 Foxpro 数据库？

> ID：14231517
> 
> 赞同：1
> 
> 时间：2013-01-09T08:59:43.250
> 
> 标签：hibernate, foxpro

我需要使用 Hibernate 连接 Foxpro 数据库。我在谷歌上搜索但没有找到类似的东西。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:06:15.310

请检查以下链接：

[https://community.jboss.org/wiki/SupportedDatabases2](https://community.jboss.org/wiki/SupportedDatabases2) 和 [http://www.hxtt.com/hibernate.html](http://www.hxtt.com/hibernate.html)

# c# - 无法转换到 VisualState - “没有适用的名称范围”

> ID：14231518
> 
> 赞同：3
> 
> 时间：2013-01-09T08:59:47.283
> 
> 标签：c#, wpf, silverlight, porting

我已将 silverlight TemplatedControl 移植到 WPF，虽然它的行为基本相同，但动画不再起作用。

当我调用`VisualStateManager.GoToState()`它时返回false。为了手动强制执行此操作，我遵循了其他人的建议并按名称查找了视觉状态组，并强制情节提要运行：

```
 foreach (VisualStateGroup vsg in VisualStateManager.GetVisualStateGroups(part_LayoutRoot))
        {
            VisualState vs = vsg.States.Cast<VisualState>().FirstOrDefault(o => o.Name == visualState);

            if (vs == null)
                throw new ApplicationException("No visual state found with name: " + visualState);

            vs.Storyboard.Begin();
            break;
        } 
```

但是，`No applicable name scope exists to resolve the name 'PART_MyPart'` 当我调用`Storyboard.Begin()`.

经过进一步调查，VisualStateManager、视觉状态和情节提要在`NameScope.GetNameScope()`调用它们时都返回 null，因此我也尝试在代码中手动设置它们：

```
 var nameScope = NameScope.GetNameScope(vs.Storyboard);
        if (nameScope == null)
        {
            nameScope = NameScope.GetNameScope(part_LayoutRoot);
            NameScope.SetNameScope(vsg, nameScope);
            NameScope.SetNameScope(vs, nameScope);
            NameScope.SetNameScope(vs.Storyboard, nameScope);
        } 
```

但是，异常继续被提出，我无法终生思考为什么。这在 Silverlight 中完全符合预期。

任何人都可以解释为什么silverlight和WPF在NameScope方面会有不同的行为吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:45:47.710

在您的控件模板中检索命名元素并调用`storyboard.Begin(_retrievedElement)`，而不仅仅是`storyboard.Begin()`解决“没有适用的名称范围”问题。在这种情况下，传递的框架元素的名称范围将应用于情节提要。有关此方法的不同重载的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.begin.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.begin.aspx)。

不幸的是，我无法重建为什么 Visual States Manager 不适用于您的控制。

**更新**：我可能已经弄清楚为什么您的控件模板在 Silverlight 中有效，但在 WPF 中无效。下一个答案中的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:56:09.267

我也可能知道为什么您的移植控件模板不起作用：在 WPF 中，无法在可视状态下的情节提要中使用绑定。考虑以下模板：

```
<ControlTemplate x:Key="ButtonTemplate" TargetType="Button">
        <Border x:Name="ButtonBorder" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="5" Background="White" BorderBrush="#FFB0B0B0">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.3"/>
                </VisualStateGroup.Transitions>
                <VisualState x:Name="Normal"/>
                <VisualState x:Name="MouseOver">
                    <Storyboard>
                        <ColorAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                            To="{Binding (Border.BorderBrush).(SolidColorBrush.Color), ElementName=ButtonBorder}"
                            Duration="0"/>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed"/>
                <VisualState x:Name="Disabled"/>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid>
            <Rectangle x:Name="rectangle" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Fill="#00000000"/>
            <ContentPresenter x:Name="ContentPresenter" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
        </Grid>
    </Border>

</ControlTemplate> 
```

重要的部分是使用元素绑定的视觉状态“MouseOver”：此代码将在 Silverlight 中完美执行，而在 WPF 中数据绑定引擎将告诉您它找不到名为“ButtonBorder”的元素（查看跟踪数据绑定错误的输出窗口）。这与我在之前的回答中提到的命名空间问题有关。此问题的解决方法如下：

```
<ControlTemplate x:Key="ButtonTemplate" TargetType="Button">
        <Border x:Name="ButtonBorder" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="5" Background="White" BorderBrush="#FFB0B0B0">
            <Border.Resources>
            <Storyboard x:Key="MouseOverStoryboard">
                <ColorAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                            To="{Binding (Border.BorderBrush).(SolidColorBrush.Color), ElementName=ButtonBorder}"
                            Duration="0"/>
            </Storyboard>
        </Border.Resources>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.3"/>
                </VisualStateGroup.Transitions>
                <VisualState x:Name="Normal"/>
                <VisualState x:Name="MouseOver" Storyboard="{StaticResource MouseOverStoryboard}">

                </VisualState>
                <VisualState x:Name="Pressed"/>
                <VisualState x:Name="Disabled"/>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid>
            <Rectangle x:Name="rectangle" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Fill="#00000000"/>
            <ContentPresenter x:Name="ContentPresenter" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
        </Grid>
    </Border>

</ControlTemplate> 
```

现在，故事板被添加到根模板元素的 Resource 属性中，因此名称范围似乎很合适。在视觉状态下，只需使用静态资源标记扩展来引用情节提要。请注意，此 XAML 不会在 Silverlight 中运行，因此您不能在两个项目中共享该文件。此外，Blend 无法处理此标记，因此必须手动编写。

希望这可以帮助。

# python - Python多处理池未启动作业

> ID：14231524
> 
> 赞同：0
> 
> 时间：2013-01-09T09:00:06.383
> 
> 标签：python, multiprocessing

这是 Python 2.7。我已经成功尝试了文档代码：

```
from multiprocessing import Pool

def f(x):
    return x*x

if __name__ == '__main__':
    pool = Pool(processes=4)              # start 4 worker processes
    result = pool.apply_async(f, [10])    # evaluate "f(10)" asynchronously
    print result.get(timeout=1)           # prints "100" unless your computer is *very* slow
    print pool.map(f, range(10))          # prints "[0, 1, 4,..., 81]" 
```

然后我自己开发了一个非常简单的例子，但没有成功：

```
import multiprocessing

def run_test_n(n):
    print 'inside test %d' % n
    with open('test%d.log' % n, 'w') as f:
        f.write('test %d ok\n' % n)

def runtests(ntests, nprocs):
    pool = multiprocessing.Pool(processes = nprocs)
    print 'runnning %d tests' % ntests
    print 'over %d procs' % nprocs
    tasks = range(1, ntests + 1)
    results = [pool.apply_async(run_test_n, t) for t in tasks]
    for r in results:
        r.wait()

if __name__ == '__main__':
    runtests(5,5) 
```

在此示例中，没有创建文件，也没有打印“内部测试...”字符串。

就好像 run_test_n 从未被调用过（实际上从未被调用过）。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:17:40.937

你错了`results = [pool.apply_async(run_test_n, t) for t in tasks]`；正确的形式是`results = [pool.apply_async(run_test_n, (t, )) for t in tasks]`

# java - 解决弹簧错误：资源必须存在：[类路径资源[X：/Content/E/data/FIXED.dat]

> ID：14231529
> 
> 赞同：0
> 
> 时间：2013-01-09T09:00:15.410
> 
> 标签：java, spring, spring-mvc

从过去几天开始，我收到此错误并且无法继续前进。
请找到错误日志和内容，并帮助我找出问题所在。
我的文件在下面提到的位置物理退出。(X:/Content/E/data/FIXED.dat)

**DWHConfig.xml**：

```
 <bean id="reader" class="org.springframework.batch.item.file.FlatFileItemReader">
    <property name="resource" value="X:/Content/E/data/FIXED.dat"/>
    <property name="firstLineIsHeader" value="false"/>
    <property name="recordSeparatorPolicy">
    <bean class="org.springframework.batch.item.file.separator.SimpleRecordSeparatorPolicy" />               </property>
    <property name="lineTokenizer">
    <bean class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer">
    <property name="delimiter" value="|"/>
    </bean>
    </property>
    <property name="fieldSetMapper">
    <bean class="com.telenor.metro2.conn.ess.batch.DWH.maping.DWHInput_Mapper" />
    </property>
    </bean> 
```

**错误**：

```
Jan 9, 2013 2:16:44 PM org.springframework.batch.core.step.AbstractStep execute
SEVERE: Encountered an error executing the step: class org.springframework.batch.core.UnexpectedJobExecutionException: Failed to initialize the step
Jan 9, 2013 2:16:45 PM org.springframework.batch.core.launch.support.SimpleJobLauncher$1 run
INFO: Job: [SimpleJob: [name=DWHDailyJob]] failed with the following parameters: [{jobName=DWH-Fixed_daily_dap-ess-ora01}{}{}{schedule.date=Wed Jan 09 00:00:00 GMT+05:30 2013}]
Throwable occurred: org.springframework.batch.core.UnexpectedJobExecutionException: Failed to initialize the step
    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:170)
    at org.springframework.batch.core.job.SimpleJob.execute(SimpleJob.java:100)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:86)
    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:49)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:81)
    at com.telenor.metro2.conn.ess.batch.launcher.DWHFJobDetail.start(DWHFJobDetail.java:103)
    at com.telenor.metro2.conn.ess.batch.launcher.DWHFJobDetail.execute(DWHFJobDetail.java:47)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:525)
Caused by: org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
    at org.springframework.batch.item.support.AbstractBufferedItemReaderItemStream.open(AbstractBufferedItemReaderItemStream.java:157)
    at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:103)
    at org.springframework.batch.core.step.item.ItemOrientedStep.open(ItemOrientedStep.java:439)
    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:167)
    ... 8 more
**Caused by: java.lang.IllegalStateException: Resource must exist: [class path resource [X:/Content/E/data/FIXED.dat**]]
    at org.springframework.util.Assert.state(Assert.java:384)
    at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:226)
    at org.springframework.batch.item.support.AbstractBufferedItemReaderItemStream.open(AbstractBufferedItemReaderItemStream.java:154)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:13:58.500

试试这个

```
<property name="resource" value="file:X:/Content/E/data/FIXED.dat"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:19:58.237

使用您的配置，Spring 正在其类路径中寻找该路径（请参阅堆栈跟踪）。按照建议加载您的文件

```
<property name="resource" value="file:X:/Content/E/data/FIXED.dat"/> 
```

或将文件 FIXED.dat 移动到应用程序类路径中并将属性更改为

```
<property name="resource" value="classpath:FIXED.dat"/> 
```

两者都应该工作

# php - 什么对 PhP 来说是个好消息

> ID：14231536
> 
> 赞同：12
> 
> 时间：2013-01-09T09:00:51.593
> 
> 标签：php, noop

有时我什么都不想做。

我只想有一个声明，这样我就可以设置断点。

在 c 和 Objective-c 中我们有 while (false);

说我想破坏一个功能

```
-(void)viewDidAppear:(BOOL)animated
{

    [super viewDidAppear:animated];
    self.navigationItem.leftBarButtonItem=nil;
    self.navigationItem.rightBarButtonItem=nil;

    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(updateDisplays) name: NotificationUpdateArroworLocation object:nil];

    PO(self.tableView.indexPathForSelectedRow);
    while(false);//I put break point here so program stop here.
} 
```

在 .net 中，我们什么都没有（不确定是我编的吗？）。

我们应该在 PhP 中使用什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T09:15:55.413

您可以使用相同的技巧和许多其他功能：

```
<?php
    while (false);
    // or empty output
    echo '';
    // or any expression without side effects
    5 + 5; 
```

如果你使用 XDebug，你可以在任何地方直接调用[xdebug_break()函数。](http://xdebug.org/docs/all_functions#xdebug_break)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-11-22T17:29:00.517

将

```
assert(true); 
```

足以附加断点吗？

对于开发环境，应该编译和执行断言。对于 prod 环境，断言可能不应该被编译或执行。所以你可以把它们留在里面。这很有用！

[http://www.php.net/manual/en/function.assert.php](http://www.php.net/manual/en/function.assert.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-17T20:30:27.377

对于 PHP，我使用分号和注释只是为了使其更明确：

```
; // noop 
```

维基百科说，在它自己的行中使用单独的分号也是 C 语言中的一种经典方式。

# ios - 如何在Unity3d中制作覆盖360°的平面

> ID：14231539
> 
> 赞同：0
> 
> 时间：2013-01-09T09:01:12.780
> 
> 标签：ios, unity3d, textures, plane

我想制定一个涵盖 360 角度的计划，并且我的设备摄像头保留在这个 360 角度计划内。我还可以在上面显示一些纹理。当用户向右移动相机时，计划应该向左移动，反之亦然。实际上，我想要实现的是在 Unity 中制作 Geocaching 应用程序。我将不得不在指南针的帮助下显示 2d 和 3d 对象。那么我如何才能统一实现这一点，如果有人有任何想法，请与我分享。提前致谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:01:39.777

您需要翻转圆柱体的面法线方向，以使纹理从圆柱体内部出现。看看这个[Blender 模型](http://files.scio.de/public/SO/Cylinder.blend)以获得一个想法。在 Blender（我知道的唯一建模软件）中，您必须在编辑模式下选择所有面，然后单击工具架中的*翻转方向*。然后，您可以照常进行 UV 映射。

# css - div 右侧的额外空间

> ID：14231542
> 
> 赞同：0
> 
> 时间：2013-01-09T09:01:24.303
> 
> 标签：css, html, responsive-design, removing-whitespace

我的 div 右侧有额外的空间。我试过溢出：隐藏和清除，但我无法摆脱它:(

这是我的 HTML

```
 <div id="menu">
    <ul id="nav">
        <li><a href="index.html">Home</a></li>
        <li><a href="index.html">About</a></li>
        <li><a href="index.html">Team</a></li>
        <li><a href="index.html">Gallery</a></li>
        <li><a href="index.html">Services</a></li>
        <li><a href="index.html">Contact</a></li>
    </ul>
</div> 
```

这是CSS

```
#menu{
width: 800px;
height: auto;
border: none;
line-height:0;
margin-bottom: 10px;
}

/* Navigation */ 

#nav {
width: 100%;
overflow: hidden;
list-style: none;
display: inline;   
}

#nav ul {
list-style: none;
overflow: hidden;
}

#nav ul li{
padding: none;
margin: none;
border: thin black dashed;
}

#nav li a {
background: #7b7b7b;
border-right: 1px solid #474747;
color: #fff;
display: block;
float: left;
font: 400 18px 'Iceland', Tahoma, Helvetica, Verdana, Arial, sans-serif;
padding: 10px;
text-align: center;
text-decoration: none;
text-transform: uppercase;
width: 14.1%;
-webkit-box-shadow: inset .5px .5px 15px .5px rgba(1, 1, 1, 0.5);
box-shadow: inset .5px .5px 15px .5px rgba(1, 1, 1, 0.5);
}

#nav li a:hover {
background: #bf0302;
}

nav li:last-child a {
border: none;
}

/* End of Navigation */ 
```

这就是间距出错的地方。[（来源：][[picturetrail.com](https://pic50.picturetrail.com/VOL403/9296584/21034325/405248088.jpg)][）][![图片](../Images/e9e83d72fe29722260c2591749bcd0da.png)](https://i.stack.imgur.com/18PnF.jpg)

黄色的细边框是菜单 div，红色的边框是导航。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:18:48.330

问题很简单，您在 NAV LI A 的右侧有一个 1px 的边框，因此您需要对此进行补偿。

## 所以添加这个：

边距：-1px；

## 最终的 CSS：

```
#nav li a {
   background: #7B7B7B;
   border-right: 1px solid #474747;
   color: white;
   display: block;
   float: left;
   font: 400 18px 'Iceland', Tahoma, Helvetica, Verdana, Arial, sans-serif;
   padding: 10px;
   text-align: center;
   text-decoration: none;
   margin-right: -1px;
   text-transform: uppercase;
   width: 14.1%;
   -webkit-box-shadow: inset .5px .5px 15px .5px rgba(1, 1, 1, 0.5);
   box-shadow: inset .5px .5px 15px .5px rgba(1, 1, 1, 0.5);
} 
```

## **[工作演示](http://jsfiddle.net/ignaciocorreia/7nEcD/)**| **[最后结果](http://jsfiddle.net/ignaciocorreia/7nEcD/show/)**

# iphone - 上传图片到服务器，接收旋转图片

> ID：14231552
> 
> 赞同：2
> 
> 时间：2013-01-09T09:02:14.633
> 
> 标签：iphone, ios6, image-uploading, image-upload

在我的应用程序中，我想将图像上传到服务器并检索上传图像的 url 以将其显示在应用程序中。我发送图像的 NSData。这是我的代码：

```
AsynchronousImageView *imgVw_User = (AsynchronousImageView*)[self.view viewWithTag:K_TagImageViewUser];
UIImage *UserImgForBioData = imgVw_User.image;
UserImgForBioData = [UIImage imageWithCGImage:UserImgForBioData.CGImage scale:1.0f orientation:UserImgForBioData.imageOrientation];
NSData *imageData = [NSData dataWithData:UIImageJPEGRepresentation(UserImgForBioData,0.5)];

 Base64Transcoder *temp_transcoder=[[Base64Transcoder alloc]init];
NSString * temp_base64EncodedImage= @"";
if (imageData!=nil)
    {
        temp_base64EncodedImage = [NSString stringWithFormat:@"%@",[temp_transcoder base64EncodedStringfromData:imageData]];
       temp_base64EncodedImage = [[temp_base64EncodedImage stringByReplacingOccurrencesOfString:@"\n"
                                           withString:@""]
                                         mutableCopy];
      } 
```

有时当我显示图像时，通过获取图像的 url，图像会旋转。难道我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T09:11:38.777

如果您从相机捕获图像，则在上传图像之前，通过以下方式生成原始方向的图像缩略图：

```
- (UIImage *)generatePhotoThumbnail:(UIImage *)image 
{
    //int kMaxResolution = 320; 

    CGImageRef imgRef = image.CGImage; 

    CGFloat width = CGImageGetWidth(imgRef); 
    CGFloat height = CGImageGetHeight(imgRef); 

    CGAffineTransform transform = CGAffineTransformIdentity; 
    CGRect bounds = CGRectMake(0, 0, width, height); 
    /*if (width > kMaxResolution || height > kMaxResolution) 
     { 
     CGFloat ratio = width/height; 
     if (ratio > 1)
     { 
     bounds.size.width = kMaxResolution; 
     bounds.size.height = bounds.size.width / ratio; 
     } 
     else
     { 
     bounds.size.height = kMaxResolution; 
     bounds.size.width = bounds.size.height * ratio; 
     } 
     } */

    CGFloat scaleRatio = bounds.size.width / width; 
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));  
    CGFloat boundHeight;                       
    UIImageOrientation orient = image.imageOrientation;                         
    switch(orient)
    { 
        case UIImageOrientationUp: //EXIF = 1 
            transform = CGAffineTransformIdentity; 
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2  
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0); 
            transform = CGAffineTransformScale(transform, -1.0, 1.0); 
            break; 

        case UIImageOrientationDown: //EXIF = 3 
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height); 
            transform = CGAffineTransformRotate(transform, M_PI); 
            break; 

        case UIImageOrientationDownMirrored: //EXIF = 4 
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height); 
            transform = CGAffineTransformScale(transform, 1.0, -1.0); 
            break; 

        case UIImageOrientationLeftMirrored: //EXIF = 5 
            boundHeight = bounds.size.height; 
            bounds.size.height = bounds.size.width; 
            bounds.size.width = boundHeight; 
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width); 
            transform = CGAffineTransformScale(transform, -1.0, 1.0); 
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0); 
            break; 

        case UIImageOrientationLeft: //EXIF = 6 
            boundHeight = bounds.size.height; 
            bounds.size.height = bounds.size.width; 
            bounds.size.width = boundHeight; 
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width); 
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0); 
            break; 

        case UIImageOrientationRightMirrored: //EXIF = 7 
            boundHeight = bounds.size.height; 
            bounds.size.height = bounds.size.width; 
            bounds.size.width = boundHeight; 
            transform = CGAffineTransformMakeScale(-1.0, 1.0); 
            transform = CGAffineTransformRotate(transform, M_PI / 2.0); 
            break; 

        case UIImageOrientationRight: //EXIF = 8 
            boundHeight = bounds.size.height; 
            bounds.size.height = bounds.size.width; 
            bounds.size.width = boundHeight; 
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0); 
            transform = CGAffineTransformRotate(transform, M_PI / 2.0); 
            break; 
        default: 
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"]; 
            break;
    } 

    UIGraphicsBeginImageContext(bounds.size); 

    CGContextRef context = UIGraphicsGetCurrentContext(); 

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft)
    { 
        CGContextScaleCTM(context, -scaleRatio, scaleRatio); 
        CGContextTranslateCTM(context, -height, 0); 
    } 
    else
    { 
        CGContextScaleCTM(context, scaleRatio, -scaleRatio); 
        CGContextTranslateCTM(context, 0, -height); 
    } 

    CGContextConcatCTM(context, transform); 

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef); 
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext(); 
    UIGraphicsEndImageContext(); 

    return imageCopy;

} 
```

在此之后你得到一个正确的图像，然后上传该图像。我希望这能解决你的问题。

Step1：从相机捕捉图像。

Step2：通过以下方法生成照片缩略图

Step3：然后上传生成的图像。

你会得到正确的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T07:19:45.720

当使用照片库中的图像时，这对我有用。

```
ALAssetRepresentation *rep = [_asset defaultRepresentation];
CGImageRef iref = [rep fullResolutionImage];
UIImage* img = [UIImage imageWithCGImage:iref scale:1.f orientation:UIImageOrientationUp] 
```

**注意**：_asset 是 ALAsset 的一个实例。

# android - 如何更改图表标题的颜色

> ID：14231553
> 
> 赞同：6
> 
> 时间：2013-01-09T09:02:18.393
> 
> 标签：android, achartengine

有没有办法改变图表标题（x 轴、y 轴和图表标题）的颜色`aChartEngine`？我将背景更改为黑色，但无法显示这些标签，因为它们也是黑色的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T09:06:52.797

使用该`renderer.setLabelsColor(Color);`命令更改轴标题。我不确定标题，它可以使用相同的命令进行更改。如果您想更改轴上的数据值，`renderer.setXLabelsColor(Color);`and `renderer.setYLabelsColor(scale, Color);`命令将为您完成。

如果您访问 achartengine 的网站，您可以将 javadoc 下载为 zip 文件，解压缩，然后在浏览器中查看。它有大量的文档可以找到你通常需要的东西=）

# php - 我可以使用 PHP 打印作为输入字段的默认值吗？

> ID：14231559
> 
> 赞同：0
> 
> 时间：2013-01-09T09:02:35.910
> 
> 标签：php

我已经放置了一个用于获取当前页面 URL 的 php 代码，现在我可以通过编写此代码来获取当前页面 URL

```
<?php print(selfURL()); ?> 
```

现在，我想知道如何将此代码编写为输入字段的默认值？实际上我希望输入字段自动填充当前页面的 URL。

当我使用它时`<?php print(selfURL()); ?>`，`value="<?php print(selfURL()); ?>"`它简单地显示一个文本并且不显示当前的 url。但是当我将它粘贴到其他地方时，它工作正常。

有什么建议么？

更新：

伙计们，这是页面的完整代码，可能有帮助！

```
<?php
function selfURL() { $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : ""; $protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s; $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]); return $protocol."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI']; } function strleft($s1, $s2) { return substr($s1, 0, strpos($s1, $s2)); }
?>
<?php 
// Start YOURLS engine
require_once( dirname(__FILE__).'/includes/load-yourls.php' );
?>
<!DOCTYPE html>
<html>
<head>
<title>YOURLS Public Interface Sample</title>
<style>
body {
    background:#E3F3FF;
    color:#595441;
    font:16px/30px verdana,arial,sans-serif;
}
a, a:visited {color:#2A85B3}
h1 {text-align:center; color:#2A85B3}
h2 {
    border-bottom:1px solid #2A85B3;
    color:#2A85B3;
    margin-left:-10px;
    padding-left:25px;
    width:80%;
}
#container {
    width: 780px;
    margin-left: auto;
    margin-right: auto; 
    background-color: #fff;
    border: 3px solid #2A85B3;
    padding: 10px;
    margin-top: -13px;
    -moz-border-radius:15px;
    -webkit-border-radius:15px;
}
#footer {
    text-align:center;
    margin-top:20px;
}
#footer p {
    padding:5px;
    background:white;
    margin:0 auto;
    width:750px;
    -moz-border-radius:10px;
    border-radius:10px;
    -webkit-border-radius:10px;
    border:1px solid #2A85B3;
    -moz-border-radius-bottomleft:35px;
    -moz-border-radius-bottomright:35px;
    -webkit-border-bottom-left-radius:25px;
    -webkit-border-bottom-right-radius:25px;
}
#footer p a {
    background:#fff url(http://yourls.org/images/favicon.gif) 2px center no-repeat;
    padding-left:20px;
}
div#copybox { width:600px; height:auto;}
div#sharebox {height:auto; width:600px; margin-top:20px;}
</style>
<link rel="stylesheet" href="<?php echo YOURLS_SITE; ?>/css/share.css?v=<?php echo YOURLS_VERSION; ?>" type="text/css" media="screen" />
<script src="<?php echo YOURLS_SITE; ?>/js/jquery-1.6.1.min.js" type="text/javascript"></script>
<script src="<?php echo YOURLS_SITE; ?>/js/ZeroClipboard.js?v=<?php echo YOURLS_VERSION; ?>" type="text/javascript"></script>
<script type="text/javascript">ZeroClipboard.setMoviePath( '<?php echo YOURLS_SITE; ?>/js/ZeroClipboard.swf' );</script>
<script src="<?php echo YOURLS_SITE; ?>/js/share.js?v=<?php echo YOURLS_VERSION; ?>" type="text/javascript"></script>
</head>

<body>
<h1>YOURLS: Your Own URL Shortener</h1>

<div id="container">

    <?php

    // Part to be executed if FORM has been submitted
    if ( isset($_REQUEST['url']) ) {

        $url     = yourls_sanitize_url( $_REQUEST['url'] );

        $return  = yourls_add_new_link( $url );

        $shorturl = isset( $return['shorturl'] ) ? $return['shorturl'] : '';

        echo <<<RESULT
        <h2>URL has been shortened</h2>
        <p>Original URL: <code><a href="$url">$url</a></code></p>
        <p>Short URL: <code><a href="$shorturl">$shorturl</a></code></p>

RESULT;

    // Part to be executed when no form has been submitted
    } else {

        $site = YOURLS_SITE;

        echo <<<HTML
        <h2>Enter a new URL to shorten</h2>
        <form method="post" action="">
        <p><label>URL: <input type="text" name="url" value="<?php echo selfURL(); ?>" size="70" /></label></p>
        <p><label>Optional custom keyword: $site/<input type="text" name="keyword" size="8" /></label></p>
        <p><label>Optional title: <input type="text" name="title" size="57" /></label></p>
        <p><input type="submit" value="Shorten" /></p>
        </form> 
HTML;

    }

    ?>

</div>

<?php print(selfURL()); ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:04:10.563

试试这个，

```
<input name="textVal" type="text" val=<?php echo selfURL(); ?> /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:05:26.020

你可以像下面这样使用。

**方法一**

```
 <input name="myinput" type = "text" value = "<?php print(selfURL()); ?>" /> 
```

**方法二**

```
<input name="myinput" type = "text" value = "<?php echo selfURL(); ?>" /> 
```

问题更新后回答

```
<input type="text" name="" id="" value="<?php echo $_SERVER['PHP_SELF']; ?>"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:04:53.013

以下是解决方案：

```
$_SERVER['PHP_SELF'];
```

**测试代码如下**

```
<input type="text" name="" id="" value="<?php echo $_SERVER['PHP_SELF']; ?>"/>
```

**你的代码编辑**

```
$var = $_SERVER['PHP_SELF'];
**OR**
$var = selfURL();

<p><label>URL: <input type="text" name="url" value="$var" size="70" /></label></p>
```

您在 her-doc 语法中添加 php，这就是错误

# android - Monodroid/Android 在旧设备上使用 android:largeHeap

> ID：14231561
> 
> 赞同：1
> 
> 时间：2013-01-09T09:02:41.667
> 
> 标签：android, xamarin.android, android-4.2-jelly-bean, android-largeheap

我在我的应用程序中使用 android:largeHeap 来获取更多内存，因为我在滚动视图中有一个大图像，否则我的应用程序会因内存不足异常而崩溃。

我有 2 台设备，一台装有 Android 4.2 jellybean，另一台装有 Android 2.3 Gingerbread。在 4.2 上 android:largeHeap 工作正常，但在 2.3 上我不能使用它。

有没有办法让这两种设备都满意？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:07:23.160

我想这与[getLargeMemoryClasss()](http://developer.android.com/reference/android/app/ActivityManager.html#getLargeMemoryClass%28%29)一起使用？这仅适用于 API 11 // Android 3 // Honeycomb。

作为旁注，我不确定你是否需要它，你不能只缩放图像吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:06:44.560

在 Honeycomb(3.0) 中添加了 largeHeap 参数，因此它不适用于较低的设备。

但是，使用 largeHeap 参数不是解决方案。它必须被用作绝对的最后手段。它将强制 Android 终止任何后台进程或应用程序以获得额外的堆，这是一个很大的禁忌！

您说您在 ScrollView 中有一个大图像。您是否尝试过首先使用 BitmapFactory 适当地缩放图像？

编辑：另外，您提到您将图像分成三部分。不要那样做，因为每个位图都会消耗额外的内存。相反，将其保留为一个 Bitmap，但在整个 Bitmap 上执行缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:16:36.817

[这](https://stackoverflow.com/questions/12548203/memory-leak-in-android-when-trying-to-send-a-form-with-image-to-php-server/13363988#13363988)是关于如何有效使用位图的stackoverflow的详细讨论，以便不会发生内存不足错误并且您不必增加应用程序的堆大小。

# jquery - 如果文档高于视口，则执行函数

> ID：14231568
> 
> 赞同：3
> 
> 时间：2013-01-09T09:03:16.293
> 
> 标签：jquery, height, document, viewport

这是我遇到的一些非常奇怪的行为。我只想在文档高于视口时执行一个函数（即它溢出它并出现滚动条）。我使用这段代码：

```
var docH = $("document").height(),
    viewPortH = $("window").height();

if (docH > viewPortH) {
 // execute functions
} 
```

但是什么也没发生，控制台返回：

> 未捕获的类型错误：无法读取 null 的属性“父级”

有谁知道问题是什么/我应该使用什么代码来查看文档是否高于视口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:05:39.113

`document`并且`window`是对象而不是选择器。

```
var docH = $(document).height(),
    viewPortH = $(window).height(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:06:17.027

你不需要引号`document`和`window`。

```
var docH = $(document).height(),
    viewPortH = $(window).height();

if (docH > viewPortH) {
 // execute functions
} 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/uBCpc/)

加上引号，jQuery 实际上是在寻找DOM 中的`<document />`和之类的元素。`<window />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:09:38.947

尝试像这样使用文档和窗口： `var docH = $(document).height(), viewPortH = $(window).height();`

# c++ - 从类函数更改 int 值

> ID：14231574
> 
> 赞同：1
> 
> 时间：2013-01-09T09:03:27.163
> 
> 标签：c++, algorithm

我有一个形状类，我从我的`main`程序初始化并在构造函数中给出参数。

`Shape *cusomShape = new CustomShape(float radius, float origin)`

形状类具有翻转等一些功能。
当触发形状类中的翻转功能时，我想更改程序`int`中的某个值`main`。这可能类似于在触发翻转函数时触发更改值的事件，但我不确定如何在 C++ 中执行此操作。如果事件是这里的理想方法，那么很高兴看到一个简短的例子。

如果使用事件不正确，那么理想的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:05:45.810

我认为您需要的是通过指针或对 Shape 中的函数的引用传递一个值，然后对其进行修改。如果该函数不是从 main 调用，而是从其他地方调用，则传递指针是您更好的选择。首先将指针传递给类并使用另一种方法存储它，然后每次调用翻转时都使用它。

编辑：示例：

```
class CustomShape {

void storePointer(int* _value) {
  value = _value;
}

void rollover() {
  .. do stuff
  *value++; // for instance
  ... do stuff
}
int * value;
}

int main() {
  int a;

  CustomShape cs;
  cs.storePointer(&a);

  ....
  cs.rollover();
  ....
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:06:16.320

在构造函数中传递对变量的引用并保存该引用。需要时更改值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:19:25.960

我建议将对变量的引用传递给需要更改其值的成员函数。在类中存储引用将 Shape 类与引用耦合。这意味着每次您想使用 Shape 时，如果不更新整数，则不能，因为 Shape 构造函数将期望指向 int 的引用/指针作为参数（Shape 类将指针/引用存储为属性） . 将引用/指针传递给成员函数会促进**低耦合**。

```
#include <iostream>

class Shape
{
    double shapeValue_;

    public: 
        Shape (double value)
            : 
                shapeValue_(value)
        {}

        void fireFunction(int& updateMe)
        {
            updateMe = 123;
        }
};

using namespace std;

int main() 
{
    int update; 

    cout << update << endl;

    Shape s(4.5); 

    s.fireFunction(update); 

    cout << update << endl;

    return 0; 
}; 
```

在这种情况下，您可以选择不涉及调用 fireFunction 的形状对象的主程序：

```
int main()
{
    Shape s(4.5); 

    // Main program that doesn't use fireFunction.

    return 0;
}; 
```

在这种情况下，如果您有成员函数更改输入参数，您应该采用定义此类函数的样式：例如，确保被成员函数更改的变量始终是其声明中的第一个输入参数。

如果您希望复杂对象在彼此之间传递更新，您可以使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

# ios - 不合理的堆增长

> ID：14231575
> 
> 赞同：1
> 
> 时间：2013-01-09T09:03:28.160
> 
> 标签：ios, memory, memory-management, instruments, heapsort

嗨，我对分配的内存感到不安，因为我在 Instruments 中注意到很多堆增长，所以我设计了一个测试应用程序。

测试应用包含两个 ViewController，每个都有一个按钮。第一个 ViewController 通过 Segue Modal 链接到 SecondViewController（它根本没有代码——除了自动生成的）。

第二个 ViewController 只有功能

```
 -(IBAction)back:(id)sender{
      [self dismissModalViewControllerAnimated:YES];
} 
```

所以我可以翻转抛出视图。

当我用仪器测试它时，我注意到在我进入第二个视图并返回后堆增长。

![在此处输入图像描述](../Images/d9d37788fd53023973ab0926af0822df.png) ![在此处输入图像描述](../Images/f0bb2a13987039c31918ca4c34274cf4.png)

这怎么可能？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:18:11.453

堆的大小不是应用程序内存使用量。

当您的应用程序处于活动状态时，内核将不得不为您分配内存。
现代系统使用虚拟内存。基本上，它们将物理地址映射到您的进程将访问的虚拟地址。

这个映射由内核处理，它需要内存。

如果您请求 1MB 的内存，则必须通过增加地址空间的大小来分配内存以跟踪分配的物理页面。

如果释放所有内存，内核通常会保留用于映射的内存，并将其重新用于下一次分配，从而避免为它重新分配空间。

这就是堆大小不变的原因。但它根本不表示您的应用程序的内存使用情况。

如果使用 Instruments，请查看 VM Tracker 工具。

# java - 填写Jasper报告时找不到外部模板

> ID：14231578
> 
> 赞同：0
> 
> 时间：2013-01-09T09:03:33.450
> 
> 标签：java, jasper-reports

Jasper 报告可以使用 .jrxml 文件中引用的外部模板和子报告，如下所示：

```
<template><![CDATA["repo:template.jrtx"]]></template>
<subreportExpression><![CDATA["repo:subreport.jrxml"]]></subreportExpression> 
```

这在 Jasper 服务器上运行时非常有效，但是当从 Java 代码在进程内启动时，它会返回如下错误：

> net.sf.jasperreports.engine.JRException：在 net.sf.jasperreports.repo.RepositoryUtil.getResourceFromLocation(RepositoryUtil.java:255) 在 net.sf.jasperreports.repo.RepositoryUtil 中找不到资源：repo:template.jrxml。 getReport(RepositoryUtil.java:208) 在 net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateReport(JRFillSubreport.java:329)

在 Jasper 设计器中，*资源*被添加到未存储在报告文件中的*资源列表中。*我该如何做同样的事情`RepositoryUtil`？即告诉`RepositoryUtil`用一些真实位置替换“repo”？我使用的代码：

```
Connection conn = ... ;
String reportSource = "C:\\report.jrxml";
Map<String, Object> params = new HashMap<String, Object>();
JasperReport jasperReport = JasperCompileManager.compileReport(reportSource);
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, conn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:33:13.340

这当然是一个类路径问题

Jasper 尝试首先将资源作为绝对路径加载，然后作为通过应用程序类路径的相对路径加载

您可以尝试处理模板和子报表的绝对路径，它应该可以工作

您也可以尝试将资源目录放在应用程序的类路径中`-cp "/path/to/resourceDir/*"`

# python - SQLAlchemy多：多关系，设置表条目的唯一性

> ID：14231582
> 
> 赞同：0
> 
> 时间：2013-01-09T09:03:52.590
> 
> 标签：python, postgresql, sqlalchemy

我将 SQLAlchemy 与 Postgres 和声明性基础一起使用，并且具有这种多对多关系的内容：

```
user_trait_association = Table('user_trait', Base.metadata,
    Column('user_id', Integer, ForeignKey('user.id')),
    Column('trait_id', Integer, ForeignKey('trait.id'))
)

class User(Base):
    __tablename__ = 'user'
    id = Column(Integer, primary_key=True)
    trait = relationship('SomeTrait', backref='user')

class SomeTrait(Base):
    __tablename__ = 'sometrait'
    id = Column(Integer, primary_key=True)
    detail1 = Column(String)
    detail2 = Column(String) 
```

我的问题：我如何设置它以使特征是独一无二的——也就是说，说 detail1 = 眼睛颜色，detail2 = 头发颜色......我如何写它使得 Bob 和 Jim 都有黑色头发和棕色的眼睛（结合为 2 个细节的一个独特特征 - 比如亚洲人）。现在，当我保存到数据库时，它会生成许多具有相同细节的特征——该表有许多单独的亚洲（黑发，棕色眼睛）条目，而我想要的是将所有内容归为一个特征。

我不确定我是否清楚地描述了这一点；让我知道是否需要改写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:41:29.320

如果我理解正确，您想要`UNIQUE`对一组列进行约束吗？如果是这样，那么这样的事情应该可以解决问题：

```
class SomeTrait(Base):
    __tablename__ = 'sometrait'
    id = Column(Integer, primary_key=True)
    detail1 = Column(String)
    detail2 = Column(String)
    __table_args__ = (
        UniqueConstraint('detail1', 'detail2'),
    ) 
```

# ruby-on-rails - MongoMapper 0.11 是否与 MongoDB 2.2.2 兼容？为 MongoDB 推荐其他 Rails 库？

> ID：14231589
> 
> 赞同：1
> 
> 时间：2013-01-09T09:04:27.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongomapper

根据其网站，MongoMapper 自 2012 年 1 月 25 日以来一直没有更新。

MongoDB 于 2012 年 11 月 27 日发布 2.2.2。

有谁知道 MongoMapper 是否与最新版本的 MongoDB 兼容？

如果不是，是否有更积极维护的库？

我们希望默认情况下使所有写入安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:15:32.800

MongoMapper 可能没有最近的版本，但他们一直在更新主分支并与 MongoDB 中的新功能保持同步，特别是 MongoDB 的 Ruby 驱动程序。

例如，[在这个提交](https://github.com/jnunemaker/mongomapper/commit/68373a5db8aa9d8f8da2811604f17ee950792e43)到 master 中，您可以看到使用最新驱动程序 (1.8) 进行的更新，并将其对“安全”写入的支持作为默认设置，并替换现在已弃用的 Mongo::Connection 以支持新的首选 Mongo::MongoClient 类。

# asp.net - Ajax 自动完成功能不适用于路由

> ID：14231592
> 
> 赞同：1
> 
> 时间：2013-01-09T09:04:38.933
> 
> 标签：asp.net, c#-4.0

我在 global.asax 文件中注册了 4 条路线，它工作正常，但是当我添加另一条路线时，ajax 自动完成建议列表不显示。

路由代码如下。

```
void Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup

        RegisterRoutes(RouteTable.Routes);

    }
    public static void RegisterRoutes(RouteCollection routes)
    {

    RouteTable.Routes.Add(new System.Web.Routing.Route("{resource}.axd/{*pathInfo}", new System.Web.Routing.StopRoutingHandler()));

    RouteTable.Routes.MapPageRoute("StoreRoute", "{Name}", "~/Default.aspx");
    RouteTable.Routes.MapPageRoute("DetailsView", "view/{id}/{popid}", "~/frmListingDetails.aspx");

    RouteTable.Routes.MapPageRoute("Listing", "{keyword}/{city}/{area}", "~/Listing.aspx");

    //RouteTable.Routes.MapPageRoute("Edit", "{id}/{vcode}", "~/Registration.aspx");
   // RouteTable.Routes.MapPageRoute("Regp2", "Upload/{regid}/{ecode}", "~/RegPart2.aspx");
    } 
```

它工作正常，但是当我取消注释评论的根时，ajax 自动完成建议列表不显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T14:01:00.840

添加这一行

routes.Ignore("{resource}.axd/{*pathInfo}");

到 RegisterRoutes 函数。

通过添加此忽略语句，您允许 WebResource.axd 正常运行。

# spring - Spring Transaction 发生死锁时调度程序停止

> ID：14231593
> 
> 赞同：3
> 
> 时间：2013-01-09T09:04:39.850
> 
> 标签：spring, hibernate, transactions, apache-commons-dbcp, database-deadlocks

我开发了一个监控应用程序，它使用 Spring-3.0 Hibernate-3.6.5 和 SpringHibernateTemplate 作为 DAO。数据库 SQL Server 2008。这个应用程序每天都有长时间运行的事务。

```
@Repository("areaDaoHibernate")
public class AreaDAO implements IArea {
       protected HibernateTemplate template = null;

       @Autowired @Required
       public void setSessionFactory(SessionFactory sessionFactory) {
              template = new HibernateTemplate(sessionFactory);
       }

       // basic dao method
} 
```

这个应用程序通过 springbeans 有一些调度（实现 Runable）。

```
@Component("dailyTask")
@Scope("prototype")
public class DailyTask implements Runnable {

@Override
       public void run() {
              // running task
       }
} 
```

此应用程序使用 Apache DBCP 进行池化。

```
 <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
              <property name="dataSource">
                     <ref bean="CustodyDataSource" />
              </property>
…
       </bean>

<bean id = "CustodyDataSource"
      class             = "org.apache.commons.dbcp.BasicDataSource"
      p:driverClassName = "${jdbc1.driverClassName}"
      p:url             = "${jdbc1.url}"
      p:username        = "${jdbc1.username}"
      p:password        = "${jdbc1.password}"
      p:maxIdle         = "${jdbc1.maxIdle}"
      p:maxActive       = "${jdbc1.maxActive}" 
      p:validationQuery = "${jdbc1.validationQuery}" 
      p:testWhileIdle   = "${jdbc1.testWhileIdle}" />
<bean id = "transactionManager"
      class = "org.springframework.orm.hibernate3.HibernateTransactionManager"
      p:sessionFactory-ref = "sessionFactory" /> 
```

当此应用程序死锁时，我遇到问题，调度停止运行。
错误显示：

```
2012-12-27 12:57:20,861  WARN (JDBCExceptionReporter:233) - SQL Error: 1205, SQLState: 40001
2012-12-27 12:57:20,862 ERROR (JDBCExceptionReporter:234) - Transaction (Process ID 55) was deadlocked on lock resources with another process and has been chosen as the deadlock victim. Rerun the transaction.
2012-12-27 12:57:20,866 ERROR (DailyTask:238) - org.springframework.dao.CannotAcquireLockException: could not update: [com.btpn.custody.entity.MasterData#00176ed4-b7a2-4da5-a266-ffaab3654050]; SQL [update T_CIF set __UPDATED_DATE=?, STATUS_MD=? where __SID=?]; nested exception is org.hibernate.exception.LockAcquisitionException: could not update: [com.btpn.custody.entity.MasterData#00176ed4-b7a2-4da5-a266-ffaab3654050]
            at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:633)
            at org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
            at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
            at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
            at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
            at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
            at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
            at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
            at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
            at $Proxy33.relateWithBranch(Unknown Source)
            at com.btpn.custody.bean.DailyTask.relateMasterDataWithBranch(DailyTask.java:1166)
            at com.btpn.custody.bean.DailyTask.manualInitial(DailyTask.java:213)
            at com.btpn.custody.bean.DailyTask.run(DailyTask.java:197)
            at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.exception.LockAcquisitionException: could not update: [com.btpn.custody.entity.MasterData#00176ed4-b7a2-4da5-a266-ffaab3654050]
            at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:107)
            at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
            at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2612)
            at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2494)
            at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2821)
            at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:113)
            at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
            at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)
            at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:185)
            at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
            at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
            at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
            at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
            at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
            at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
            ... 11 more
Caused by: java.sql.SQLException: Transaction (Process ID 55) was deadlocked on lock resources with another process and has been chosen as the deadlock victim. Rerun the transaction.
            at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.java:368)
            at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2820)
            at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2258)
            at net.sourceforge.jtds.jdbc.TdsCore.getMoreResults(TdsCore.java:632)
            at net.sourceforge.jtds.jdbc.JtdsStatement.processResults(JtdsStatement.java:584)
            at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQL(JtdsStatement.java:546)
            at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeUpdate(JtdsPreparedStatement.java:504)
            at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:102)
            at org.hibernate.jdbc.NonBatchingBatcher.addToBatch(NonBatchingBatcher.java:46)
            at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2590)
            ... 23 more 
```

所以我的问题：

1.  我应该更改连接池以避免死锁问题吗？
2.  为什么我的调度 bean 在死锁发生后停止运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:27:53.160

SQL Server 中发生死锁。这既不是 Spring、Hibernate、连接池也不是 SQL Servers 的错误。问题是您的应用程序正在锁定您的应用程序或其他应用程序也试图锁定的行（以[死锁](http://en.wikipedia.org/wiki/Deadlock)方式）。

最简单的解决方法可能是为您的工作制定重试策略（如果失败，只需重试整个事务）。您还可以尝试通过查看 SQL Server 日志来准确找出哪些应用程序/用户参与了死锁。

# android - android键盘开合不顺畅

> ID：14231595
> 
> 赞同：0
> 
> 时间：2013-01-09T09:04:55.743
> 
> 标签：android, keyboard

在我的应用程序中，我需要键盘才能顺利打开。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:18:50.947

AFAIK，键盘的打开是 Android 处理的操作，所以你无法改变它打开的流畅度。我可能是错的

# qt - 如何将QT中的大样式文件（qss文件）拆分为小文件并全部加载

> ID：14231596
> 
> 赞同：2
> 
> 时间：2013-01-09T09:05:03.050
> 
> 标签：qt, split, qt4.8, qtstylesheets

我正在尝试做的我需要将我的大样式文件拆分为小样式文件，因为现在很难读取样式文件（qss 文件）并向其添加新样式。之后我需要加载那些小的 qss 文件来应用它们

我正在通过调用我创建的 main 函数来加载我的大文件

```
void Utilities::loadEnglishStyle()
{
    QFile file(":/EnglishClasses.qss");
    file.open(QFile::ReadOnly);
    QString StyleSheet = QLatin1String(file.readAll());
    qApp->setStyleSheet(StyleSheet);
    file.close();
} 
```

我考虑过拆分大文件，将小文件添加到资源中，然后将它们全部打开，然后`QFile`将它们全部连接到一个字符串中，但是每次添加新的 qss 文件时，我仍然需要再次执行相同的过程

有没有有效的方法来做到这一点？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:53:50.823

你的方法听起来是正确的。这个过程并不像听起来那么复杂。您唯一需要的是在资源中添加“较小”的 qss 文件，在特定前缀下（例如。`stylesheets`），然后自动加载和连接所有这些文件。示例代码如下：

```
QDir stylesheetsDir(":/stylesheets");
QFileInfoList entries = stylesheetsDir.entryInfoList();
QString completeStylesheet = "";
foreach (QFileInfo fileInfo, entries)
{
    QFile file(":/stylesheets/" + fileInfo.fileName(););
    if (!file.open(QIODevice::ReadOnly | QIODevice::Text))
       continue;

    QTextStream in(&file);
    completeStylesheet += in.readAll()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:11:12.483

你的意思是一些API应该添加为：

```
QWidget::addStyleSheet(StyleSheet);
QWidget::clearStyleSheet(StyleSheet); 
```

# cron - cron 会为不同的用户或帐户运行吗？

> ID：14231599
> 
> 赞同：1
> 
> 时间：2013-01-09T09:05:11.610
> 
> 标签：cron

我是 cron 的新手。刚刚有人介绍给我。cron 会为不同的用户运行吗？

我的意思是，如果用户在线，我想每 5 分钟运行一次某个脚本（更新数据库）。如果我有很多在线用户怎么办？cron 可以处理这样的任务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:16:35.197

用于`crontab -e`编辑当前用户的 crontab。但是脚本必须检查用户是否在线。

Cron 不会自动执行此操作。

# c# - 工厂模式实现的问题

> ID：14231600
> 
> 赞同：0
> 
> 时间：2013-01-09T09:05:13.127
> 
> 标签：c#, json, httpwebrequest, factory-pattern

我使用网络服务，我得到了服务的响应。响应将具有不同的结构。例如 API getInfo 返回响应：

```
{"code":0,"message":"","result":{"nickname":"UserName","age":"22"}} 
```

API 登录：

```
{"code":0,"message":"","result":"user_token"} 
```

等我`HttpWebRequest`用于 POST 请求。请求和响应反序列化/序列化`DataContractSerializer`.

所以，我想使用工厂模式，这是我的实现：

```
[DataContract]
public class ResultGetInfo
{
    [DataMember(Name = "nickname")]
    public int Nickname { get; set; }
    [DataMember(Name = "age")]
    public int Age { get; set; }
}

[DataContract]
public abstract class Response
{
}

[DataContract]
public class ResponseSignin : Response
{
    [DataMember(Name = "code")]
    public int Code { get; set; }
    [DataMember(Name = "message")]
    public string Message { get; set; }
    [DataMember(Name = "result")]
    public string Result { get; set; }
}

[DataContract]
public class ResponseGetInfo : Response
{
    [DataMember(Name = "code")]
    public int Code { get; set; }
    [DataMember(Name = "message")]
    public string Message { get; set; }
    [DataMember(Name = "result")]
    public ResultGetInfo Result { get; set; }
}

public abstract class CreateResponse
{
    public abstract Response CreateResponseObj();
}

public class CreateResponseSignin : CreateResponse
{
    public override Response CreateResponseObj()
    {
        return new ResponseSignin();
    }
}

public class CreateResponseGetInfo : CreateResponse
{
    public override Response CreateResponseObj()
    {
        return new ResponseGetInfo();
    }
} 
```

我在回调函数中得到响应：

```
private void getResponseCallback(IAsyncResult asynchronousResult)
{
    var request = (Request)asynchronousResult.AsyncState;
    try
    {
        HttpWebResponse response;

        // End the get response operation
        response = (HttpWebResponse)request.HttpRequest.EndGetResponse(asynchronousResult);
        Stream streamResponse = response.GetResponseStream();
        StreamReader streamReader = new StreamReader(streamResponse);
        var gyResponse = streamReader.ReadToEnd();
        streamResponse.Close();
        streamReader.Close();
        response.Close();
        Response response_obj = request.Creater.CreateResponseObj();  

        using (MemoryStream stream = new MemoryStream(Encoding.Unicode.GetBytes(gyResponse)))
        {
            var serializer = new DataContractJsonSerializer(response_obj.GetType());                                     
            response_obj = (Response)serializer.ReadObject(stream);
            if (request.CallBack != null)
            {
                request.CallBack.Invoke(response_obj, null);
            }
        }
    }
    catch (WebException e)
    {
        if (request.CallBack != null)
        {
            request.CallBack.Invoke(null, e);
        }
    }
} 
```

因为`DataContractJsonSerializer`我在这里声明类型：

```
var serializer = new DataContractJsonSerializer(response_obj.GetType()); 
```

对象在哪里`response_obj`，需要类型（`ResponseSignin`或`ResponseGetInfo`）。

所以，我请来`Invoke()`了我的代表。

```
private void ResponseHandler(Response result, Exception error)
{
    if (error != null)
    {
        string err = error.Message;
    }
    else
    {
        Response response = result;
    }
} 
```

在这里我有一个问题。变量`result`确实包含正确答案，但我没有得到属性，因为抽象类`Response`没有属性。而且我不能在派生类中声明属性或覆盖。我不确定是否选择了所需的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:29:30.167

您是否尝试过将`result`变量转换为您需要的类型？

例如

```
private void ResponseHandler(Response result, Exception error)
{
    if (error != null)
    {
        string err = error.Message;
        return;
    }

    var signInResponse = result as ResponseSignin;
    if (signInResponse != null)
    {
        HandleSignInResponse(signInResponse);
    }

    var infoResponse = result as ResponseGetInfo;
    if (infoResponse != null)
    {
        HandleInfoResponse(infoResponse);
    }
} 
```

# php - 防止 Symfony 中的多个验证错误

> ID：14231615
> 
> 赞同：1
> 
> 时间：2013-01-09T09:05:54.890
> 
> 标签：php, forms, validation, symfony, symfony-2.1

```
$this->createFormBuilder(null, array(
    'validation_constraint' => new Collection(array(
        'randominput' => array(
            new NotBlank(),
            new Email(),
            new MyCustomConstraint()
        )
))
->add('randominput', 'text'); 
```

提交结果（从 html 中删除了必需的属性，使用 firebug）：

[![在此处输入图像描述](../Images/86a90f47798a6178a1c385d5e57e9412.png)](https://i.stack.imgur.com/4k4H6.png)

来自 Email() 约束的消息没有出现，因为在该约束中存在一段代码，我认为是 NotBlank() 约束的克隆/硬代码

```
if (null === $value || '' === $value) {
    return;
} 
```

我认为 Email() 约束应该是 NotBlank() 的子...

如果 NotBlank() 发现违规，我希望不执行 MyCustomConstraint()。所以如果有一些选项会很好，例如“breakNextConstraintExecutionOnFirstViolation”=> true。因此，如果我为一个字段设置了 10 个约束，而第 3 个约束设置了违规，那么接下来的 7 个约束将不会被执行。

如果 symfony2 中不存在这种逻辑/选项，那么如果我可以从 MyCustomConstraint 类访问“验证”服务并重用现有约束但不为每个新约束编写硬代码，那就太好了：

```
class MyCustomConstraintValidator extends ConstraintValidator
{
    public function validate($value, Constraint $constraint)
    {
        // use the validator to validate the value, not hardcode
        if (count( $this->get('validator')->validateValue(
            $value,
            new NotBlank()
        )) > 0)
        {
            return;
        }

        $this->context->addViolation('MyCustomConstraint Message...');
    }
} 
```

所以我的问题是：我应该怎么做才能防止一个文件出现多个违规消息并且不要在每个新的约束硬代码中使用？

PS 在我以前的项目中（不是在 symfony 上），我制作的表单只显示一条错误消息。因此，用户一一填写字段，只看到一个错误，但没有提交表单，并且每个字段都填满了红色错误（并吓坏了一些用户）。但现在至少我想解决这个问题。

# ruby-on-rails - Rails 4 中的 Asset-Pipeline/Turbolinks 对于大型应用程序的优缺点是什么？

> ID：14231616
> 
> 赞同：12
> 
> 时间：2013-01-09T09:06:04.653
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, turbolinks, ruby-on-rails-4

我们正在开发一个相当大而广泛的应用程序。该网站将有许多不同的部分，具有一些非常不同的用户界面要求和行为。

展望未来，Rails 4 将资产管道分离为一个单独的 gem，因此我们可以选择是否包含它。turbolinks也可能发生同样的事情。

这些天我一直在问自己却找不到答案的问题是：我应该在我们的项目中使用这些库吗？

我反思的主要问题是，多合一文件策略可能不起作用，我们将不得不在应用程序的不同部分使用文件包。turbolinks 对此有何反应，因为它必须假定所有 js/css 都已加载？这种配置的优势是否克服了管道和 turbolinks 所隐含的代码复杂性？

我不期待是/否的答案，只是对此事的一些看法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T11:08:42.703

两者都是有效的工具，不一定会相互抵消。

Turbolinks：使您能够仅加载页面的正文，从而使其作为 AJAX 请求工作（这种行为的一个示例就是 Facebook 所拥有的）。

好处：

*   跳过完全呈现新页面的浏览器任务，从而消除浏览器无响应的“空白页面”时间。
*   与上一个相关：如果您的行为可能会受到加载新页面的影响，例如播放歌曲，turbolinks 不会影响它（请参阅下面的 soundcloud）。
*   不会重新加载文档头，因此不会两次加载相同的标签/内容（如果相同）。
*   使您仍然可以在服务器端缓存视图内容。

缺点：

*   如果标题标签确实需要更新（新的 js 文件、新的 css 文件、元标签更新......）
*   如果你想使用客户端视图渲染，它只是不适合它的工具。
*   禁用该行为的默认行为是痛苦的（使用 css 类来禁用部分内的锚标记？这很糟糕）。

这实际上是一个问题，即您的应用程序的架构是什么，它的目标是什么。

关于资产流水线，我的结果好坏参半，尽管我会说它的优点多于缺点。总体而言，预处理工具提高了跨浏览器的开发效率，但在生产中不要依赖它。但在资产流水线的情况下，它必须与你想要的一样好。你可以预处理 SASS、Coffeescript，你有 compass 或 bourbon 等很棒的库，但这也会增加你的性能开销。所以，对它进行基准测试，看看这些是否应该成为你的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:33:06.053

让我们从一篇关于缺点的帖子开始：http: [//eviltrout.com/2013/01/06/turbolinks-and-the-prague-effect.html](http://eviltrout.com/2013/01/06/turbolinks-and-the-prague-effect.html)

如果这对您来说不是问题：http: [//geekmonkey.org/2012/09/introducing-turbolinks-for-rails-4-0/](http://geekmonkey.org/2012/09/introducing-turbolinks-for-rails-4-0/)

> 总结一下：如果您的页面共享 JavaScript 和 CSS 样式，Turbolinks 将显着改善您的页面加载。当服务器端性能成为问题时，PJAX 就派上用场了。

*   希望这可以帮助 ：）

# apache-flex - Datagrid Flex 3 单行已选择

> ID：14231618
> 
> 赞同：0
> 
> 时间：2013-01-09T09:06:06.200
> 
> 标签：apache-flex, flex3

我有一个包含行数和列数的 flex 数据网格。我想通过单击编辑按钮使选定的行可编辑。可能吗？我尝试了很多示例，但要么整个数据网格是可编辑的，要么特定行的单列是可编辑的。有没有办法通过单击编辑按钮使选定的行可编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:24:28.203

您可以使用 grid.selectedIndex 属性获取选定的行。一个想法给你的问题：

```
Add an "editable" property to you items in the datagrid which is false by default
When clicking on the button, set grid.selectedItem.editable = true;
Change the grid's item renderer to a new one, which displays TextInput fields if an item is editable or just plain Label if it's not 
```

您可以像这样在运行时更改项目渲染器：

grid.itemRenderer = new ClassFactory(com.myapp.renderers.MyGridItemRenderer);

# ios - 出现取消按钮，但完成按钮未出现在 uitoolbar 中

> ID：14231621
> 
> 赞同：0
> 
> 时间：2013-01-09T09:06:12.080
> 
> 标签：ios, ipad, ios5, ios6

我已经编写了下面的代码以在 uitoolbar 的弹出窗口中显示日期选择器。
我可以看到取消按钮，但看不到完成按钮。

如果我删除 flexspace 的代码，则会出现完成按钮，但我需要完成按钮位于最右边的位置，但它位于取消按钮旁边。

我怎样才能解决这个问题 ？提前致谢。

```
 UIViewController* popoverContent = [[UIViewController alloc] init]; //ViewController

    UIView *popoverView = [[UIView alloc] init];   //view
    popoverView.backgroundColor = [UIColor blackColor];

     datePicker=[[UIDatePicker alloc]init];//Date picker
    datePicker.frame=CGRectMake(0,44,320, 216);
    datePicker.datePickerMode = UIDatePickerModeDate;
    [datePicker setMinuteInterval:5];
    [datePicker setTag:10];
    [datePicker addTarget:self action:@selector(Result) forControlEvents:UIControlEventValueChanged];
    [popoverView addSubview:datePicker];

    popoverContent.view = popoverView;
    popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
    popoverController.delegate=self;

    [popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];
    [popoverController presentPopoverFromRect:self.uitext.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];//tempButton.frame where you need you can put that frame

//    UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,320,40)];
//    [pickerToolbar sizeToFit];
//    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
//    NSMutableArray *barItems = [[NSMutableArray alloc] init];
//    
//    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonSystemItemCancel target:self action:@selector(cancel_clicked:)];
//    [barItems addObject:cancelBtn];
//  
//    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
//    [barItems addObject:flexSpace];
//  
//    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(done_clicked:)];
//    [barItems addObject:doneBtn];
//    
//  
//    
//    [pickerToolbar setItems:barItems animated:YES];
//    

//    UIPickerView *picker = [[UIPickerView alloc] init];
//    picker.frame = CGRectMake(0, 44, 320, 216);
//    picker.delegate  = self;
//    picker.dataSource = self;
//    picker.showsSelectionIndicator = YES;
//    [actionSheet addSubview:picker];

    UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,self.view.bounds.size.width,40)];
    [pickerToolbar sizeToFit];
    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonSystemItemCancel target:self action:@selector(cancel_clicked:)];
    [barItems addObject:cancelBtn];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(done_clicked:)];
    [barItems addObject:doneBtn];

    [pickerToolbar setItems:barItems animated:YES];
        [popoverView addSubview:pickerToolbar];

    [self.uitext resignFirstResponder]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:15:38.643

试试这个代码： -

```
UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,self.view.bounds.size.width,40)];
    [pickerToolbar sizeToFit];
    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonSystemItemCancel target:self action:@selector(cancel_clicked:)];
    [barItems addObject:cancelBtn];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(done_clicked:)];
    [barItems addObject:doneBtn];

    [pickerToolbar setItems:barItems animated:YES];

    [popoverView addSubview:pickerToolbar]; 
```

希望对你有帮助。。

编辑 ：-

在下面添加这一行`[pickerToolbar setItems:barItems animated:YES];`：-

```
pickerToolbar.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin; 
```

和评论`[pickerToolbar sizeToFit];`行

所以你的代码将是

```
 UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,self.view.bounds.size.width,44.0)];
    //[pickerToolbar sizeToFit];
    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonSystemItemCancel target:self action:@selector(cancel_clicked:)];
    [barItems addObject:cancelBtn];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(done_clicked:)];
    [barItems addObject:doneBtn];

    [pickerToolbar setItems:barItems animated:YES];

    pickerToolbar.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin;
    [popoverView addSubview:pickerToolbar]; 
```

# jquery - Html 和 C# .net 视频播放器

> ID：14231622
> 
> 赞同：-1
> 
> 时间：2013-01-09T09:06:12.200
> 
> 标签：jquery, video-embedding

我正在一个 .NET 项目中工作，我必须使用“fileupload”将视频文件上传到文件夹中。我成功地做到了这一点。

现在我需要一个显示这些文件的视频播放器。我使用了一些 jq 视频播放器`mediaelementjs`，`jplayer`但它们有一些限制。我必须为不同的浏览器提供不同格式的视频，但这不是我的目的。我只提供 mp4 或 flv 文件。那么是否有任何免费的 jq 播放器或任何类型的支持 .net 的播放器存在？我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:08:47.587

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:11:39.683

我认为您需要尝试[JWPlayer。](http://www.longtailvideo.com/jw-player/)它的代码非常简单，并且它的支持也很好。也提供免费和付费版本。它应该可以帮助您解决问题。它还免费提供对 FLV 和 mp4 的支持根据您的要求

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T13:20:08.897

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  <source src="movie.webm" type="video/webm">
  <object data="movie.mp4" width="320" height="240">
    <embed src="movie.swf" width="320" height="240">
  </object>
</video> 
```

[http://www.w3schools.com/html/html_videos.asp](http://www.w3schools.com/html/html_videos.asp)

# svn - 如何拒绝特定成员访问 svn 中的子文件夹

> ID：14231623
> 
> 赞同：0
> 
> 时间：2013-01-09T09:06:11.240
> 
> 标签：svn

我在 CentOS 中使用 subversion v1.6.11。使用 Apache httpd 与 Web 浏览器交互。

我在 svn 中创建了几个文件夹。我在 svn 存储库之一中有几个子文件夹。我已将 2 个成员添加到 svn 存储库。我想有选择地允许这两个访问 svn 项目中的 3 个子文件夹。

John 用户是 svn 存储库中存在的两个用户之一。我试图为子文件夹 A 设置 john = 以阻止 John 访问 sbfolder。但这不会造成任何差异

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:07:04.727

阅读SVN Book 中的[Path-Based Authorization](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.pathbasedauthz.html)章节和[Per-directory access control](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html#svn.serverconfig.httpd.authz.perdir)

对于 Apache，您必须：

*   加载 authz_svn_module 模块
*   添加`AuthzSVNAccessFile /path/to/access/file`到 httpd.conf 中的 SVN 位置
*   根据 1-st URL 将访问规则写入访问文件

# c - 我们可以使用贪心策略解决这个问题吗？如果不是，我们如何使用动态规划解决这个问题？

> ID：14231631
> 
> 赞同：1
> 
> 时间：2013-01-09T09:06:54.857
> 
> 标签：c, algorithm, dynamic-programming, greedy

问题：

Siruseri 市的规划无可挑剔。城市被划分为一个矩形阵列，由 M 行 N 列的单元组成。每个小区都有一个地铁站。每行有一列火车从左到右向后行驶，每列有一列从上到下向后行驶。每列火车在某个时间 T 开始，并永远沿着它的路线（一行或一列）来回行驶。

普通火车从一站到下一站需要两个单位的时间。有些快速列车只需要一个单位的时间就可以从一站到下一站。最后，有些慢车需要三个单位的时间从一个站到下一个站。您可以假设任何车站的停车时间都可以忽略不计。下面是一个 3 行 4 列的地铁系统的描述：

```
S(1) F(2) O(2) F(4)
F(3) . . . .
S(2) . . . .
O(2) . . . . 
```

每行/列开头的标签表示火车的类型（F 代表快速，O 代表普通，S 代表慢速）及其开始时间。因此，沿第 1 行行驶的火车是一列快速列车，它在时间 3 开始。它从车站 (1,1) 开始向右移动，分别在时间 3、4、5 和 6 访问沿该行的车站。然后它在 6、7、8 和 9 时间从右到左返回访问车站。它现在再次移动，在 9、10、11 和 12 时间访问车站，依此类推。同样，沿第 3 列的火车是在时间 2 开始的普通火车。因此，从 (3,1) 站开始，它在时间 2、4 和 6 访问第 3 列上的三个车站，然后返回到顶部专栏在 6,8 和 10 次访问他们，依此类推。

给定起始站、起始时间和目的地站，您的任务是确定乘坐这些火车到达目的地的最早时间。例如，假设我们在时间 8 从站 (2,3) 开始，我们的目标是到达站 (1,1)。我们可能在时间 8 乘坐第二排的慢车，在时间 11 到达 (2,4)。碰巧在时间 11，第 4 列的快车在 (2,4) 向上行驶，所以我们可以乘坐这辆快车并在时间 12 到达 (1,4)。再一次我们很幸运，在时间 12 时，第 1 排的快车在 (1,4)，所以我们可以乘坐这辆快车并到达 (1 ,1) 在时间 15。另一种路线是在时间 8 从 (2,3) 乘坐第 3 列的普通火车，并在时间 10 到达 (1,3)。然后我们在那里等到时间 13，然后乘坐第 1 排的快速列车向左行驶，到达 (1,

> 测试数据：你可以假设M，N≤50。
> 时间限制：3秒

由于 N,M 的大小非常小，我们可以尝试通过递归来解决它。

在每个车站，我们乘坐两列火车，可以带我们更接近目的地。
例如：如果我们想从 2,3 到 1,1，我们乘坐更靠近 2,3 的火车，然后下到离目的地最近的车站，同时记录我们所用的时间，如果我们到达目的地，我们记录到目前为止的最短时间，如果到达目的地的时间小于最短时间，我们更新它。

我们可以使用以下方法确定火车在特定时间的哪个站：

```
/* S is the starting time of the train and N is the number of stations it
 visits, T is the time for which we want to find the station the train is at. 
T always be greater than S*/

T = T-S+1
Station(T) = T%N, if T%N = 0, then Station(T) = N; 
```

这是我的问题：

*   我们如何确定特定列车以我们想要的方向到达我们想要的车站的最早时间？

*   由于我上面的算法使用了贪心策略，它会给出一个准确的答案吗？如果没有，那么我该如何解决这个问题？

PS：这不是作业，是[在线判断题](http://opc.iarcs.org.in/index.php/problems/METRO)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:18:12.590

我相信贪婪的解决方案在这里会失败，但是构建一个反例会有点困难。

这个问题旨在使用 Dijkstra 算法来解决。边是相邻节点之间的连接，取决于火车的类型及其开始时间。您**也不需要**计算整个图 - 只需为您正在考虑的当前节点计算边缘。我已经解决了许多类似的问题，这就是您解决的方式。在我知道它永远不会通过之前，我也尝试过多次使用贪婪。

希望这可以帮助。

# java - onLocationChanged 函数会调用 Android 设备的每一个动作吗？

> ID：14231632
> 
> 赞同：2
> 
> 时间：2013-01-09T09:07:01.267
> 
> 标签：java, javascript, android, html, cordova

我使用函数 onLocationChanged 来识别用户的位置，我希望它发生在手机的**每一次移动**`Android`

究竟何时调用该函数？

我的代码如下所示：

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);  
locationListener = new GPSLocationListener();
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener); 
```

GPS定位监听器：

```
public class GPSLocationListener extends DroidGap implements LocationListener 
{
  @Override
  public void onLocationChanged(Location location) {
      AlertDialog.Builder alt_bld = new AlertDialog.Builder(this);
        alt_bld.setMessage("onLocationChanged");
        AlertDialog alert = alt_bld.create();
        alert.show();
  }

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}
} 
```

警报 onLocationChanged 永远不会出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:11:27.963

根据此链接： http: [//developer.android.com/reference/android/location/LocationListener.html#onLocationChanged](http://developer.android.com/reference/android/location/LocationListener.html#onLocationChanged(android.location.Location) (android.location.Location ) 每次位置更改时都会调用该方法。

根据我的观察，它背后有一些逻辑并且它不会每次都改变（例如，当新位置在旧位置附近并且准确性更差时）。

编辑：

“每一个小动作”最多可以是**ACCURACY_HIGH** ......我认为你不能比这更精确。参考：http: [//developer.android.com/reference/android/location/Criteria.html#ACCURACY_HIGH](http://developer.android.com/reference/android/location/Criteria.html#ACCURACY_HIGH)

编辑 2：要使用 ACCURACY_HIGH 创建新的 Criteria 对象并使用设置器（`setHorizontalAccuracy`，...），然后像这样使用它

```
locationManager.requestLocationUpdates(locationManager.getBestProvider(locationCriteria, true), 1L, 2F, this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:17:44.433

这取决于发送到的参数：
`requestLocationUpdates (String provider, long minTime, float minDistance, LocationListener listener)`

> **minTime** - 位置更新之间的最小时间间隔，以毫秒为单位
> **minDistance** - 位置更新之间的最小距离，以米为单位

[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html)回调接收位置更新

[请参阅此处](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:14:54.583

从文档

> `requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener)`

关于`minTime`参数：

> “通知的最小时间间隔，以毫秒为单位。此字段仅用作节省电量的提示，位置更新之间的实际时间可能大于或小于此值。”

还

```
public abstract void onLocationChanged (Location location)

Added in API level 1
Called when the location has changed.

There are no restrictions on the use of the supplied Location object.

Parameters
location    The new location, as a Location object. 
```

如果这对您来说是个问题，如果没有经过一定的时间，您可以忽略对回调方法的调用。

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:59:50.360

当位置改变时。当 GPS 接收器捕获新的位置详细信息时，该方法

```
onLocationChanged(Location location) 
```

被自动调用。

# jsf - 在更改页面时丢失 p:datatable 中的检查信息

> ID：14231633
> 
> 赞同：0
> 
> 时间：2013-01-09T09:07:05.650
> 
> 标签：jsf, primefaces, datatable

我知道这不是错误。但是我需要一个建议，我该怎么做才能不丢失检查行的检查知识？

在 JSF 页面上：

```
<h:form prependId="false" id="searchUserFormTable" > 
                    <p:dataTable  id="selectUserTable" var="user" 
                    value="#{userListController.lazyDataModel}" paginator="true"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    rows="2" paginatorPosition="bottom" rowKey="#{user}"
                    lazy="true"
                    rowsPerPageTemplate="2,10,20,30,40,50"
                    rendered="#{userListController.lazyDataModel != null}" selection="#{systemMessageEditController.receiverList}"
                    scrollable="true" scrollHeight="250" resizableColumns="false" >

                    <p:column selectionMode="multiple" width="18" />

                    <f:facet name="header">
                        <h:outputText value=" Users (#{userListController.lazyDataModel.rowCount})"  />
                    </f:facet>

                    <p:column filterBy="#{user.name}" headerText="Name" filterMatchMode="contains" width="80">
                        #{user.name}
                    </p:column>
                    <p:column filterBy="#{user.surname}" headerText="Surname" filterMatchMode="contains" width="80">
                        #{user.surname}
                    </p:column>   
                    <p:column headerText="Gender" width="80">
                        #{user.gender}
                    </p:column>

                    <p:column headerText="City" width="80">                             
                        #{user.address.city.name}
                    </p:column>

                    <p:column headerText="Status" width="80">                               
                        #{user.userStatus}
                    </p:column>

                    <p:column headerText="User Detail" width="80">
                        <h:link value="User Detail" outcome="/view/admin/usermanagement/userInfo.jsf">
                            <f:param name="userId" value="#{user.id}" />
                        </h:link>
                    </p:column>

                </p:dataTable>
                        <p:commandButton value="Tamam" oncomplete="userListDlg.hide();" update=":newMessageForm"></p:commandButton>
            </h:form> 
```

所有控制器：

```
 @ManagedBean(name="systemMessageEditController")
@ViewScoped
public class SystemMessageEditController {

    @ManagedProperty(value = "#{systemMessageService}")
    SystemMessageService systemMessageService;

    @ManagedProperty(value = "#{securityBean}")
    SecurityBean securityBean;

    @ManagedProperty(value = "#{systemMessageReceiverService}")
    SystemMessageReceiverService systemMessageReceiverService;

    @ManagedProperty(value = "#{systemMessageAnswerService}")
    SystemMessageAnswerService systemMessageAnswerService;

    private SystemMessage systemMessage = new SystemMessage();

    private SystemMessageAnswer systemMessageAnswer = new SystemMessageAnswer();

    private SystemMessageReceiver systemMessageReceiver = new SystemMessageReceiver();

    private User[] receiverList;
    private boolean dummy;

    public void prepareToEdit(){
        systemMessage = systemMessageService.findById(systemMessage.getId());
    }

    public void prepareToSendMessage(){
        systemMessage = new SystemMessage();
        receiverList = null ;

    }

    public void sendMessage(){
        if(Util.isNotNull(systemMessage.getTitle())){
            boolean success = false;
            systemMessageAnswer.setUser(securityBean.getUser());
            systemMessage.getSystemMessageAnswerList().add(systemMessageAnswer);
            systemMessage.setUserSender(securityBean.getUser());
            systemMessageAnswer.setSystemMessage(systemMessage);
            if(!systemMessage.isSendAll()){
                addMessageReceiver();   
            }

            systemMessage = systemMessageService.save(systemMessage);

            systemMessageAnswer = new SystemMessageAnswer();

            success = true;
            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, FacesUtils.getMessageByKey("systemmessage.send.success"), FacesUtils.getMessageByKey("systemmessage.send.success"));
            FacesContext.getCurrentInstance().addMessage("", message);
            RequestContext context = RequestContext.getCurrentInstance();
            context.addCallbackParam("success", success);
        }
        else{
            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, FacesUtils.getMessageByKey("systemmessage.null.title"), FacesUtils.getMessageByKey("systemmessage.null.title"));
            FacesContext.getCurrentInstance().addMessage("", message);
        }
    }

    public void setRead(SystemMessage message){
        message.setReaded(true);
        systemMessageService.save(message);
    }

    public void addMessageReceiver(){
        for(User user : receiverList){
            SystemMessageReceiver messageReceiver = new SystemMessageReceiver();
            messageReceiver.setReceiver(user);
            messageReceiver.setSystemMessage(systemMessage);
            messageReceiver.setReaded(false);
            systemMessage.getSystemMessageReceiverList().add(messageReceiver);
        }

    }

    public void deleteMessage(){
        boolean success = false;
        systemMessageService.delete(systemMessageService.findById(systemMessage.getId()));

        success = true;
        FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, FacesUtils.getMessageByKey("systemmessage.delete.success"), FacesUtils.getMessageByKey("systemmessage.delete.success"));
        FacesContext.getCurrentInstance().addMessage("", message);
        RequestContext context = RequestContext.getCurrentInstance();
        context.addCallbackParam("success", success);
    }
    public void sendMessageAnswer(){
        systemMessageAnswer.setUser(securityBean.getUser());
        systemMessageAnswer.setSystemMessage(systemMessage);
        systemMessageAnswerService.save(systemMessageAnswer);

        if(!systemMessage.isSendAll()){
            systemMessage.setSystemMessageReceiverList(systemMessageService.getReceiverListOfMessage(systemMessage));
            for(SystemMessageReceiver systemMessageReceiver : systemMessage.getSystemMessageReceiverList()){
                if(!systemMessageReceiver.getReceiver().getId().equals(securityBean.getUser().getId())){
                    systemMessageReceiver.setReaded(false);
                    systemMessageReceiver.setShowed(false);
                    systemMessageReceiverService.save(systemMessageReceiver);
                }
            }
        }

        systemMessage.getSystemMessageAnswerList().add(systemMessageAnswer);

        systemMessageAnswer = new SystemMessageAnswer();
        FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, FacesUtils.getMessageByKey("systemmessage.send.success"), FacesUtils.getMessageByKey("systemmessage.send.success"));
        FacesContext.getCurrentInstance().addMessage("", message);
        RequestContext context = RequestContext.getCurrentInstance();
        context.addCallbackParam("success", true);
    }

    public SystemMessageService getSystemMessageService() {
        return systemMessageService;
    }

    public void setSystemMessageService(SystemMessageService systemMessageService) {
        this.systemMessageService = systemMessageService;
    }

    public SystemMessage getSystemMessage() {
        return systemMessage;
    }

    public void setSystemMessage(SystemMessage systemMessage) {
        ArrayList<String> fetchedAttributes = new ArrayList<String>();
        fetchedAttributes.add("systemMessageAnswerList");
        this.systemMessage = systemMessageService.loadWithFetchedAttributes(systemMessage.getId(),fetchedAttributes);
    }

    public SystemMessageAnswer getSystemMessageAnswer() {
        return systemMessageAnswer;
    }

    public void setSystemMessageAnswer(SystemMessageAnswer systemMessageAnswer) {
        this.systemMessageAnswer = systemMessageAnswer;
    }
    public SecurityBean getSecurityBean() {
        return securityBean;
    }
    public void setSecurityBean(SecurityBean securityBean) {
        this.securityBean = securityBean;
    }
    public SystemMessageReceiverService getSystemMessageReceiverService() {
        return systemMessageReceiverService;
    }
    public void setSystemMessageReceiverService(
            SystemMessageReceiverService systemMessageReceiverService) {
        this.systemMessageReceiverService = systemMessageReceiverService;
    }
    public SystemMessageAnswerService getSystemMessageAnswerService() {
        return systemMessageAnswerService;
    }
    public void setSystemMessageAnswerService(
            SystemMessageAnswerService systemMessageAnswerService) {
        this.systemMessageAnswerService = systemMessageAnswerService;
    }
    public SystemMessageReceiver getSystemMessageReceiver() {
        return systemMessageReceiver;
    }
    public void setSystemMessageReceiver(SystemMessageReceiver systemMessageReceiver) {
        this.systemMessageReceiver = systemMessageReceiver;
    }
    public User[] getReceiverList() {
        return receiverList;
    }
    public void setReceiverList(User[] receiverList) {
        this.receiverList = receiverList;
    } 
```

我在将一个分页号跳转到另一个时丢失了检查信息，当我检查一些行时，然后在数据表中跳转另一个分页号，然后返回旧的分页号，我丢失了检查的信息，我发现没有任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:39:57.163

这是如何`@ViewScoped`工作的。请参阅 BalusC 的[以下答案](https://stackoverflow.com/a/4831963/407466)：

> 只要您与同一个视图交互（即您在 bean 操作方法中返回 void 或 null），视图范围的 bean 就会存在。当您导航到另一个视图时，例如通过单击链接或返回不同的操作结果，则视图范围的 bean 将在渲染响应结束时被丢弃，并且在下一个请求中不可用。

这解释了在像你这样的情况下（我刚刚在你的一个评论中读到你在失去选择之前跳转到另一个页面，你也应该在你的问题中注意到这一点！）bean被破坏了，所以当你导航回你的`dataTable`查看它再次被重建。这就是`receiverList`空=>没有选择的原因。

如果您想在不同视图之间导航时保​​存数据，请使用范围比 @ViewScoped 更宽的 bean，或者只是将选择保存到数据库中的表中。

**编辑**

问题可能出在您的`rowKey`属性中。在当前代码中，它指向用户对象，在这种情况下，请确保此对象具有正确的`hashCode`,`equals`和`toString`实现。如果`user`该类实际上有一个键或其他东西，则更`rowKey`改为`rowKey="#{user.id}"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:15:34.057

检查[陈列柜](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)。我认为它就像你想要的那样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:22:43.490

您可能正在通过 ajax 请求发送数据，您应该确保它是`process`dataTable 本身

# php - 整个项目是否应符合 PSR-0

> ID：14231638
> 
> 赞同：1
> 
> 时间：2013-01-09T09:07:20.290
> 
> 标签：php, psr-0

PSR-0 是否能够自动加载任何类或只是库/外部 api:s？

符合 PSR-0 的 MVC 上的示例结构

```
Application
  Controller
     TestController.php
  Model
  View
  Library
System
  ... 
```

测试控制器.php

```
<?php
namespace Application/Controller;

class TestController extends Controller
{
} 
```

...或者只是用于控制器、模型等的自定义自动加载器...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T14:06:08.860

根据 Phil Sturgeon 的说法（他声名鹊起包括编写[PHP-FIG 常见问题解答](http://www.php-fig.org/faq/)）：

> 您是否试图使您的整个应用程序 PSR-0，因为它应该只是您使用的通用代码包

[http://philsturgeon.co.uk/blog/2013/04/is-psr0-shortsighted-or-are-you](http://philsturgeon.co.uk/blog/2013/04/is-psr0-shortsighted-or-are-you)

所以看起来答案是否定的，PSR-0 并非设计用于整个 Web 应用程序，而是用于您打算发布以供其他开发人员包含在他们的项目中的包或库。

# ftp - 如何在 Aptana 3.3.1 启动时重新打开远程文件？

> ID：14231642
> 
> 赞同：6
> 
> 时间：2013-01-09T09:07:30.987
> 
> 标签：ftp, aptana, aptana3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T06:31:01.460

该设置现在位于**Window > Preferences > Aptana Studio > Publishing**页面。

# linux - 在 reverse-i-search (Ctrl+R ) , 历史上类似命令之间切换的任何方法

> ID：14231643
> 
> 赞同：50
> 
> 时间：2013-01-09T09:07:35.323
> 
> 标签：linux, bash, command-line

我认为一个例子可以很好地理解我的问题。

```
...
scp file1 user10@192.168.10.1:/home/user1/linuxfiles/samplecode/important
...
...
scp file1 user10@192.168.10.1:/home/user1/linuxfiles/samplecode/important/tested
...
... 
```

假设这是历史命令的顺序。如果我正在执行`Ctrl`+`R`并键入`scp`，它将显示最后执行的`scp`命令（即以“tested”结尾的行）。

但我想找到以“重要”结尾的 scp 命令。那么有什么办法`reverse-i-search`可以查看所有以 scp 开头的命令，来选择合适的呢？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-09T09:10:58.620

继续按下`Ctrl`-`R`它会遍历你的历史。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-10T02:31:54.033

如果您的搜索词有点复杂/不连续，另一种选择是在`history`结果中进行 grep，例如：

```
history 300 | grep scp | grep important$ 
```

这将返回历史记录中匹配的命令列表，例如：

```
3323  scp file1 user10@192.168.10.1:/home/user1/linuxfiles/samplecode/important
3325  scp file1 user10@192.168.10.1:/home/user1/winfiles/samplecode/important 
```

然后您可以使用`!3325`.

在运行许多类似的命令时，我有时会发现这很有用，并且可能必须多次按`Ctrl`+`R`才能返回确切的命令。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-19T19:46:50.950

有一个很好的选择`Ctrl`+`R`

安装[https://github.com/dvorka/hstr](https://github.com/dvorka/hstr)

运行它`hh`

它显示了您最后执行的所有命令的列表（./bash_history 的内容）

如果您开始输入，列表将根据您输入的内容进行过滤

您可以使用`Up`/`Down`箭头选择所需的命令并使用`Enter`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-18T14:54:54.933

我发现这个很棒的工具**mcfly**可以替代传统的 Ctrl+R，而且效果非常好。基本上，您可以在键入时看到所有结果，并且可以选择要查找的命令。您还可以自定义布局等。我真的推荐它。

[https://github.com/cantino/mcfly](https://github.com/cantino/mcfly)

[![mcfly 会话示例](../Images/488feb493f4cf4ada171fa7d1c01aa90.png)](https://ostechnix.com/wp-content/uploads/2018/12/mcfly-demo.gif)

# android - 从特定文件夹获取图像

> ID：14231649
> 
> 赞同：1
> 
> 时间：2013-01-09T09:07:53.093
> 
> 标签：android, camera, android-cursor, save-image

我正在尝试将图像保存在使用相机捕获的文件夹中。
图像确实保存在特定文件夹中，但“相机”文件夹中有同一图像的另一个副本。
这仅在 Android 版本 2.2.1 中发生。

当我在 android 版本 4.1.2 中尝试相同的情况时，只有一个副本保存在特定文件夹中，而不是“相机”文件夹中。

这是我用来启动相机并将图像保存在“MyFolder”中的代码。

```
Intent intent    = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);   
 File storagePath = new 
 File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM)
 + "/MyFolder/");   
 if(!storagePath.isDirectory()){  
     storagePath.mkdirs();  
 }   
 File myImage = new File(storagePath,Long.toString(System.currentTimeMillis()) + ".jpg");  
 Uri fromURI=Uri.fromFile(myImage);   
 intent.putExtra(MediaStore.EXTRA_OUTPUT, fromURI);  
 startActivityForResult(intent,CAMERA_REQUEST_CODE); 
```

保存图像后，我将创建一个自定义图库视图，我将在其中尝试获取所有图像，以便用户可以选择任何一张图像。当我尝试获取图像时，从相机拍摄的新图像不是在游标中检索。

这是我用来获取所有图像的代码...

```
 final String[] columns = { MediaStore.Images.Media.DATA, MediaStore.Images.Media._ID };
 final String orderBy = MediaStore.Images.Media._ID+" DESC";  
 Cursor imagecursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns,null,null, orderBy); 
```

在 Android V 2.2.1 中，由于图像的副本保存在“Camera”文件夹中，我得到了新图像，但在 Android V 4.1.2 中，我没有得到光标中的图像。

有谁知道如何从特定文件夹中获取图像？

TIA，维杰拉吉

# hadoop - 在 Mapper 类中检索的 Key 和 Value 的空白/空值

> ID：14231658
> 
> 赞同：2
> 
> 时间：2013-01-09T09:08:29.447
> 
> 标签：hadoop, mapreduce, cloudera

我已经编写了一个 MapReduce 代码，用于在 CDH4 集群上运行它。我的要求是读取完整的文件作为值，文件名作为键。为此，我编写了自定义 InputFormat 和 RecordReader 类。

自定义输入格式类：FullFileInputFormat.java

```
import java.io.*;

import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.*;

import FullFileRecordReader;

public class FullFileInputFormat extends FileInputFormat<Text, Text> {

    @Override
    public RecordReader<Text, Text> getRecordReader(InputSplit split, JobConf jobConf, Reporter reporter) throws IOException {
        reporter.setStatus(split.toString());
        return new FullFileRecordReader((FileSplit) split, jobConf);
    }
} 
```

以及自定义的 RecordReader 类：FullFileRecordReader.java

```
import java.io.BufferedReader;
import java.io.IOException;

import org.apache.hadoop.fs.FSDataInputStream;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.*;

public class FullFileRecordReader implements RecordReader<Text, Text> {

    private BufferedReader in;
    private boolean processed = false;
    private int processedBytes = 0;

    private FileSplit fileSplit;
    private JobConf conf;

    public FullFileRecordReader(FileSplit fileSplit, JobConf conf) {
        this.fileSplit = fileSplit;
        this.conf = conf;
    }

    @Override
    public void close() throws IOException {
        if (in != null) {
            in.close();
        }
    }

    @Override
    public Text createKey() {
        return new Text("");
    }

    @Override
    public Text createValue() {
        return new Text("");
    }

    @Override
    public long getPos() throws IOException {
        return processedBytes;
    }

    @Override
    public boolean next(Text key, Text value) throws IOException {
        Path filePath = fileSplit.getPath();

        if (!processed) {
            key = new Text(filePath.getName());

            value = new Text("");
            FileSystem fs = filePath.getFileSystem(conf);
            FSDataInputStream fileIn = fs.open(filePath);
            byte[] b = new byte[1024];
            int numBytes = 0;

            while ((numBytes = fileIn.read(b)) > 0) {
                value.append(b, 0, numBytes);
                processedBytes += numBytes;
            }
            processed = true;
            return true;
        }
        return false;
    }

    @Override
    public float getProgress() throws IOException {
        return 0;
    }
} 
```

虽然每当我尝试在 RecordReader 类中打印键值时，我都会得到它们的值，但是当我在映射器类中打印相同的值时，我会看到它们的空白值。我无法理解为什么 Mapper 类无法获取键和值的任何数据。

目前我只有一个 Map 工作，没有 reduce 工作。代码是：

```
import java.io.IOException;
import java.util.Iterator;

import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;

import org.apache.hadoop.mapred.*;

import FullFileInputFormat;

public class Source {

    public static class Map extends MapReduceBase implements Mapper<Text, Text, Text, Text> {

        public void map(Text key, Text value, OutputCollector<Text, Text> output, Reporter reporter) throws java.io.IOException {
            System.out.println("Processing " + key.toString());
            System.out.println("Value: " + value.toString());
        }
    }

    public static void main(String[] args) throws Exception {
        JobConf job = new JobConf(Source.class);
        job.setJobName("Source");

        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class);
        job.setJarByClass(Source.class);
        job.setInputFormat(FullFileInputFormat.class);
        job.setMapperClass(Map.class);
        FileInputFormat.addInputPath(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));
        JobClient.runJob(job);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:03:22.623

您正在下一个方法中创建新实例 - hadoop 重用对象，因此您应该填充传递的对象。应该很简单，修改如下：

```
@Override
public boolean next(Text key, Text value) throws IOException {
    Path filePath = fileSplit.getPath();

    if (!processed) {
        // key = new Text(filePath.getName());
        key.set(filePath.getName());

        // value = new Text("");
        value.clear();
    } 
```

我还建议预先调整值文本的大小，以避免值的底层字节数组“增长”的痛苦。Text 有一个名为 setCapacity 的私有方法，因此很遗憾您不能调用它 - 但如果您使用 BytesWritable 缓冲文件输入，您可以在 next 方法中调用 setCapacity，传递 fileSplit 长度（注意这可能仍然是错误的如果您的文件被压缩 - 因为文件大小是压缩后的大小）。

# javascript - 如何将类添加到 jquery.datatables 列？

> ID：14231660
> 
> 赞同：7
> 
> 时间：2013-01-09T09:08:36.227
> 
> 标签：javascript, jquery, html, css, datatables

我为 jquery.datatables 制作了一个大表，这对我来说非常有用。
但我需要为每个 td 元素相对于其列设置一个类名。
例如，我想要一个列（包括 th 和所有 td）有一个`class="volume"`.
有这个问题：
我使用这个代码来初始化类，但它不工作。

```
"aoColumnsDefs": [
    { "sClass": "volume", "aTargets": [2] }
] 
```

**编辑：** 我的表被创建并动态刷新。它是由一个 js-array 组成的，我不想碰它。只是添加类名
**编辑：**
我使用此代码来初始化我的表：

```
$('#dataTable').dataTable({
    "aaData": dataCnt,
    "aoColumnsDefs": [
        { "sClass": "volume", "aTargets": [2] }
    ],
    "aoColumns": columnsHd,
    "bStateSave": true,//saving status in coockie
    "iCookieDuration": 10,//coockie life duration in seconds
    "sScrollX": "100%",
    "sScrollY": (winHei-200),
    "sDom": '<"H"RCfrl>t<p"F"i>',
    "oColVis": {
        "buttonText": "&nbsp;",
        "bRestore": true,
        "sAlign": "left"
    },
    "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]
}); 
```

我希望它有所帮助 * *EIDT: **
`columnsHd`是一个从我的 json 标头动态创建的数组，现在正是：

```
[
{ "sTitle": "macaddr" },
{ "sTitle": "lat" },
{ "sTitle": "ip" },
{ "sTitle": "clientname" },
{ "sTitle": "relay0mask" },
{ "sTitle": "relay0stat" },
{ "sTitle": "relay1stat" },
{ "sTitle": "clientid" },
{ "sTitle": "bldname" },
{ "sTitle": "uptime" },
{ "sTitle": "current" },
{ "sTitle": "temperature" },
{ "sTitle": "softver" },
{ "sTitle": "volume" },
{ "sTitle": "hardver" },
{ "sTitle": "relay1mask" },
{ "sTitle": "pic" },
{ "sTitle": "comment" },
{ "sTitle": "lon" },
{ "sTitle": "rtt" },
{ "sTitle": "bldaddr" },
 ] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T09:48:31.690

My guess is that `"aoColumns": columnsHd, overrides the "aoColumnsDefs": [ { "sClass": "volume", "aTargets": [2] } , ],`

Try to replace their order in code

Or just add the class directly in `"aoColumns": columnsHd,` like this `"sClass": "volume"`

complete code :

try changing `{ "sTitle": "ip" },` into `{ "sTitle": "ip", "sClass": "volume" },`

and remove the

```
"aoColumnsDefs": [
    { "sClass": "volume", "aTargets": [2] }
], 
```

* * *

Note that in datatables 1.10 you should use [aoColumnDefs](http://legacy.datatables.net/usage/columns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-26T06:47:38.510

这个问题的答案是

```
"aoColumnsDefs": [
    { "sClass": "classname", "aTargets": [whatever target you want to apply] }
] 
```

使用其他选项：（[参考数据表](http://legacy.datatables.net/usage/columns)）

[![在此处输入图像描述](../Images/7a620d98df878c4062ade47095914015.png)](https://i.stack.imgur.com/AeZvR.png)

# android - 如何在不扩展课堂活动的情况下检查 Android 设备是 HDPI 还是 MDPI？

> ID：14231662
> 
> 赞同：3
> 
> 时间：2013-01-09T09:08:41.580
> 
> 标签：android

我有一个不扩展任何活动的类。我想知道用户使用代码使用 LDPI、MDPI、HDPI 或 XHDPI 屏幕。任何想法？我用过`DisplayMetrics metrics = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(metrics);`，但它需要一个 Activity 来扩展。我希望在不扩展活动的情况下这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:42:40.660

窗口管理器的问题在于它需要活动上下文，再次读取名称`window manager`它管理屏幕上的东西，因此，活动。

您可以尝试一些不同的技巧：您将需要此解决方案的上下文，但它不必是活动上下文，它可以是应用程序上下文。实际上，老实说，您将需要可以通过应用程序上下文访问的资源。

在您的 res 文件夹中，为您要查找的所有参数创建一个 value.xml：

```
 // res
      |- values-hdpi
             |- values.xml
      |- values-ldpi
              |- values.xml
      |- values-mdpi
              |- values.xml
      |- values-xhdpi
              |- values.xml 
```

现在在每个 xml 中添加以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <item name="is_ldpi" format="boolean" type="bool">true</item>
    <item name="is_hdpi" format="boolean" type="bool">false</item>
    <item name="is_mdpi" format="boolean" type="bool">false</item>
    <item name="is_xhdpi" format="boolean" type="bool">false</item>

</resources> 
```

仅根据需要更改`true`或`false`。现在它就像调用一样简单：

```
 boolean is_hdpi = context.getResources().getBoolean(R.bool.is_hdpi); 
```

# ios - 搜索栏设置为 UITable 视图的标题，但只呈现了一半

> ID：14231665
> 
> 赞同：1
> 
> 时间：2013-01-09T09:09:11.847
> 
> 标签：ios, objective-c, xcode, uitableview

我有一个`UITableView`, 带有一个包含搜索栏的 xib。搜索栏使用 IBOutlet 连接，然后设置为标题。然而，搜索栏只有一半可见。

这就是我设置标题的方式，

```
aself.tableView.tableHeaderView = searchBar; 
```

有任何想法吗？

![在此处输入图像描述](../Images/0412345fea6ba1866204b7e23c3163a5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:24:57.300

我认为这个问题可以通过 ScrollView 或 tableview 自动调整大小来解决。如果 Scrollview 不存在，你应该自动调整 tableview 的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:45:50.153

我必须完全删除项目中搜索栏上的所有内容。然后我重新开始了整个事情，并按照在线教程进行操作。然后问题就解决了。

# mobile - 哪个移动 gis 应用程序开发对我来说更好

> ID：14231667
> 
> 赞同：0
> 
> 时间：2013-01-09T09:09:34.857
> 
> 标签：mobile, gis

我想开发一个具有以下功能的移动应用程序：

1-在手机上离线工作，不需要上网（断开模式）

2-可以在公共扩展中导入图层（形状文件，个人地理数据库，kml）

3-可以编辑图层

3-有一些表格和字段由移动用户填写并保存在数据库中

我认为 android 是开发我的应用程序的更好平台，所以我需要一个可以在 android 中扩展的 gis 服务

我知道 arcgis 并且以前用它开发过 web 应用程序和桌面应用程序，但是在移动应用程序开发中，我不能使用它，因为我必须使用 arcgisonline 服务来托管我的图层，我不想共享我的地图并且想要在本地和离线托管数据

让我知道我需要什么，我选择什么平台，哪个更好

提前致谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:03:06.467

ArcGIS Android API 是一个不错的选择。Esri 有一个示例离线应用程序可供下载。我们使用了 Mobile Flex，因为我们有需要 iOS 和 Android 解决方案的客户。它使用 ArcGIS Online，但只能在需要时使用本地文件。在此处查看演示：

[http://www.webmapsolutions.com/category/arcgis-online](http://www.webmapsolutions.com/category/arcgis-online)

——马特

# android - android自定义相机方向问题

> ID：14231668
> 
> 赞同：1
> 
> 时间：2013-01-09T09:09:36.460
> 
> 标签：android, camera, orientation, customization

我已经定义了一个自定义相机视图来拍照。我遇到的问题是，如果照片是用“人像”中的相机拍摄的，图像会旋转 90 度。如果我以“风景”模式拍照，它会变得正确。

我的代码如下。我尝试了一些解决方案，例如[Android - 相机预览是横向的](https://stackoverflow.com/questions/3841122/android-camera-preview-is-sideways/5110406#5110406) ，但它没有解决我的问题。

请给我一些指示。谢谢。

```
public class Customcamera extends Activity implements OnClickListener {

private SurfaceView preview = null;
private SurfaceHolder previewHolder = null;
private Camera camera = null;
private boolean inPreview = false;
Bitmap bmp;
static Bitmap mutableBitmap;
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;
File imageFileName = null;
File imageFileFolder = null;
private MediaScannerConnection msConn;
Display d;
int screenhgt, screenwdh;
ProgressDialog dialog;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.preview);

    preview = (SurfaceView) findViewById(R.id.surface);

    previewHolder = preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    previewHolder.setFixedSize(getWindow().getWindowManager()
            .getDefaultDisplay().getWidth(), getWindow().getWindowManager()
            .getDefaultDisplay().getHeight());

}

@Override
public void onResume() {
    super.onResume();
    camera = Camera.open();
    setCameraDisplayOrientation(this, 0, camera);
}

@Override
public void onPause() {
    if (inPreview) {
        camera.stopPreview();
    }

    camera.release();
    camera = null;
    inPreview = false;
    super.onPause();
}

private Camera.Size getBestPreviewSize(int width, int height,
        Camera.Parameters parameters) {
    Camera.Size result = null;
    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
        if (size.width <= width && size.height <= height) {
            if (result == null) {
                result = size;
            } else {
                int resultArea = result.width * result.height;
                int newArea = size.width * size.height;
                if (newArea > resultArea) {
                    result = size;
                }
            }
        }
    }
    return (result);
}

SurfaceHolder.Callback surfaceCallback = new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            camera.setPreviewDisplay(previewHolder);
        } catch (Throwable t) {
            Log.e("PreviewDemo-surfaceCallback",
                    "Exception in setPreviewDisplay()", t);
            Toast.makeText(Customcamera.this, t.getMessage(),
                    Toast.LENGTH_LONG).show();
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        Camera.Parameters parameters = camera.getParameters();
        Camera.Size size = getBestPreviewSize(width, height, parameters);

        if (size != null) {
            parameters.setPreviewSize(size.width, size.height);
            parameters.setFlashMode(Camera.Parameters.FLASH_MODE_AUTO);
            setCameraDisplayOrientation(Customcamera.this, 0, camera);
            camera.setParameters(parameters);
            camera.startPreview();
            inPreview = true;
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // no-op
    }
};

Camera.PictureCallback photoCallback = new Camera.PictureCallback() {
    public void onPictureTaken(final byte[] data, final Camera camera) {
        Log.i("onPictureTaken", "onPictureTaken");
        dialog = ProgressDialog.show(Customcamera.this, "", "Saving Photo");
        /*
         * new Thread() { public void run() { try { // Thread.sleep(1000); }
         * catch (Exception ex) { } onPictureTake(data, camera); }
         * }.start();
         */
        onPictureTake(data, camera);

    }
};

public void onPictureTake(byte[] data, Camera camera) {
    if (mutableBitmap != null) {
        mutableBitmap.recycle();
    }
    bmp = BitmapFactory.decodeByteArray(data, 0, data.length);

    mutableBitmap = bmp.copy(Bitmap.Config.ARGB_8888, true);
    savePhoto(mutableBitmap);
    showPhoto();
    dialog.dismiss();
}

private void showPhoto() {
    Intent intent = new Intent(this, EditAndPostActivity.class);
    startActivity(intent);

}

class SavePhotoTask extends AsyncTask<byte[], String, String> {
    @Override
    protected String doInBackground(byte[]... jpeg) {
        File photo = new File(Environment.getExternalStorageDirectory(),
                "photo.jpg");
        if (photo.exists()) {
            photo.delete();
        }
        try {
            FileOutputStream fos = new FileOutputStream(photo.getPath());
            fos.write(jpeg[0]);
            fos.close();
        } catch (java.io.IOException e) {
            Log.e("PictureDemo", "Exception in photoCallback", e);
        }
        return (null);
    }
}

public void savePhoto(Bitmap bmp) {
    imageFileFolder = new File(Environment.getExternalStorageDirectory(),
            "Unipyx");
    imageFileFolder.mkdir();
    FileOutputStream out = null;
    Calendar c = Calendar.getInstance();
    String date = fromInt(c.get(Calendar.MONTH))
            + fromInt(c.get(Calendar.DAY_OF_MONTH))
            + fromInt(c.get(Calendar.YEAR))
            + fromInt(c.get(Calendar.HOUR_OF_DAY))
            + fromInt(c.get(Calendar.MINUTE))
            + fromInt(c.get(Calendar.SECOND));
    imageFileName = new File(imageFileFolder, date.toString() + ".jpg");
    try {
        out = new FileOutputStream(imageFileName);
        bmp.compress(Bitmap.CompressFormat.JPEG, 100, out);
        out.flush();
        out.close();
        scanPhoto(imageFileName.toString());
        out = null;
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public String fromInt(int val) {
    return String.valueOf(val);
}

public void scanPhoto(final String imageFileName) {
    msConn = new MediaScannerConnection(Customcamera.this,
            new MediaScannerConnectionClient() {
                public void onMediaScannerConnected() {
                    msConn.scanFile(imageFileName, null);
                    Log.i("msClient obj  in Photo Utility",
                            "connection established");
                }

                public void onScanCompleted(String path, Uri uri) {
                    msConn.disconnect();
                    Log.i("msClient obj in Photo Utility", "scan completed");
                }
            });
    msConn.connect();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU && event.getRepeatCount() == 0) {
        onBack();
    }
    return super.onKeyDown(keyCode, event);
}

public void onBack() {
    Log.e("onBack :", "yes");
    camera.takePicture(null, null, photoCallback);
    inPreview = false;
}

@Override
public void onClick(View v) {

}

public static void setCameraDisplayOrientation(Activity activity,
        int cameraId, android.hardware.Camera camera) {
    android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
    android.hardware.Camera.getCameraInfo(cameraId, info);
    int rotation = activity.getWindowManager().getDefaultDisplay()
            .getRotation();
    int degrees = 0;
    switch (rotation) {
    case Surface.ROTATION_0:
        degrees = 0;
        break;
    case Surface.ROTATION_90:
        degrees = 90;
        break;
    case Surface.ROTATION_180:
        degrees = 180;
        break;
    case Surface.ROTATION_270:
        degrees = 270;
        break;
    }

    int result;
    if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
        result = (info.orientation + degrees) % 360;
        result = (360 - result) % 360; // compensate the mirror
    } else { // back-facing
        result = (info.orientation - degrees + 360) % 360;
    }
    camera.setDisplayOrientation(result);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-25T17:29:51.333

当您将 转换`byte[]`为`Bitmap`in 时`onPictureTake()`，您将丢弃字节数组中包含的方向信息。`File`如果要保存方向信息，则应直接将字节写入 a 。

# javascript - 仅显示最近的列表元素

> ID：14231674
> 
> 赞同：6
> 
> 时间：2013-01-09T09:10:18.800
> 
> 标签：javascript, jquery, navigation, html-lists

这是[**我已经拥有的示例**](http://jsfiddle.net/jaakritso/wnVre/4/)

主要功能有效，但现在我需要使控制器列表更小，以便它更适合屏幕，因为它是固定位置的。

所以，我认为它应该显示来自活动项目的下三个列表项目和前两个项目。

像这样的东西会起作用，但我认为应该有更短更方便的方法：

```
//Display closest items
$('#historyController li.active').prevAll('li:not(.first)').hide().slice(0,2).show();
$('#historyController li.active').nextAll('li:not(.last)').hide().slice(0,3).show(); 
```

任何重构当前代码以获得更好性能的技巧也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:58:10.920

使用以下 jQuery 函数。

```
<ul id="one" class="level-1">
<li class="item-i">I</li>
<li id="ii" class="item-ii">II
<ul class="level-2">
<li class="item-a">A</li>
<li class="item-b">B
<ul class="level-3">
<li class="item-1">1</li>
<li class="item-2">2</li>
<li class="item-3">3</li>
</ul>
</li>
<li class="item-c">C</li>
</ul>
</li>
<li class="item-iii">III</li>
</ul> 
```

jQuery函数是..

```
$('li.item-a').closest('ul').css('background-color', 'red'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:35:04.940

```
<ul>
   <li>list item 1</li>
   <li>list item 2</li>
   <li class="third-item">list item 3</li>
   <li>list item 4</li>
   <li>list item 5</li>
</ul>

$('li.third-item').next().css('background-color', 'red'); 
```

文档链接[next()](http://api.jquery.com/next/)

这所有项目都可以用于[树遍历](http://api.jquery.com/category/traversing/tree-traversal/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T14:20:52.407

您可以尝试使用[.end()](http://api.jquery.com/end/)，以节省遍历：

```
$('#historyController li.active').prevAll('li:not(.first)').hide().slice(0,2).show().end().end().nextAll('li:not(.last)').hide().slice(0,3).show(); 
```

# ios - 单个长寿命 ios 后台任务 (voip)

> ID：14231679
> 
> 赞同：2
> 
> 时间：2013-01-09T09:10:42.093
> 
> 标签：ios, objective-c

我正在开发一个需要定期（经常）在后台做一些工作的应用程序，即使应用程序本身没有显示。我已经启动它，甚至在 10 分钟（600 秒）后通过将其声明为 VOIP 应用程序自动重启。该应用程序不适用于 App Store。

大约 300-400 秒后，系统会生成一个新线程（正确），但不会关闭最后一个线程。这意味着大约每 600 秒产生一个新线程，从而增加了我的应用程序的内存和电池消耗。不好。

**那么，一旦创建了新线程，关于如何关闭第一个衍生线程的任何线索？**

一旦应用程序关闭，此代码将启动后台处理程序。它还定期以 600 秒的间隔启动一个新的处理程序

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    isInBackground = YES;
    BOOL backgroundAccepted = [[UIApplication sharedApplication]
        setKeepAliveTimeout:600 handler:^{ [self startBackgroundHandler]; }];
    if (backgroundAccepted)
    {
        NSLog(@"VOIP backgrounding accepted");
    }
    [self startBackgroundHandler];
} 
```

此代码启动一个线程，该线程定期执行一些工作（每 5 秒）：

```
- (void)startBackgroundHandler
{       
    UIApplication*    app = [UIApplication sharedApplication];
    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        while (1)
        {
            NSLog(@"BGTime left: %f", [UIApplication
               sharedApplication].backgroundTimeRemaining);
            sleep(5);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:23:23.963

一段时间以来一直在为此苦苦挣扎，但在 Stackoverflow 上写到这里后就想出了一个解决方案。

刚换

```
while (1) 
```

和

```
int localThreadId = ++threadId;
while (threadId == localThreadId) 
```

其中线程 id 是一个 int。因此，当一个新线程启动时，threadId 增加而旧线程停止。

# android - Android 2.3 上的弱全局参考不起作用 (JNI)

> ID：14231685
> 
> 赞同：1
> 
> 时间：2013-01-09T09:11:04.873
> 
> 标签：android, java-native-interface, dalvik, weak-references

使用 JNI，我正在从一个作业对象中创建一个弱全局引用。后来，当尝试访问此参考时，dalvik vm 在 Android 2.3 上崩溃，但在 4.1 和 4.2 上没有。我发现 IsSameObject 与对象本身和创建的弱引用作为参数在工作设备上返回 1，在崩溃的设备上返回 0。那有意义吗？更改为 GlobalRef 和 IsSameObject 返回 1。

在这里，我在创建弱全局引用后立即测试 IsSameObject。

```
this->jMyObject = getEnv()->NewWeakGlobalRef(jMyObject);
LOGV("Is same object = %d", getEnv()->IsSameObject(jMyObject, this->jMyObject)); 
```

*LOGV 是我用于打印到 logcat 的宏。*

崩溃日志对我不是很有帮助：

```
01-09 09:57:04.778: I/DEBUG(13012): Build fingerprint: 'google/passion/passion:2.3.7/GWK74/121341:user/release-keys'
01-09 09:57:04.778: I/DEBUG(13012): pid: 15001, tid: 15001  >>> org.example.myproject <<<
01-09 09:57:04.778: I/DEBUG(13012): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr de5d8e6f
01-09 09:57:04.778: I/DEBUG(13012):  r0 0018fed8  r1 00000007  r2 de5d8e6f  r3 00000002
01-09 09:57:04.778: I/DEBUG(13012):  r4 437d45d4  r5 431ecda8  r6 beb54098  r7 000010f8
01-09 09:57:04.778: I/DEBUG(13012):  r8 aca12000  r9 0000000c  10 431ecd94  fp aca9f368
01-09 09:57:04.778: I/DEBUG(13012):  ip 000000f8  sp beb54048  lr aca15e2c  pc aca15e18  cpsr a0000010
01-09 09:57:04.778: I/DEBUG(13012):  d0  0065007200670067  d1  006e006900730000
01-09 09:57:04.778: I/DEBUG(13012):  d2  275449202121213a  d3  4546455220412000
01-09 09:57:04.778: I/DEBUG(13012):  d4  8000000000000000  d5  429800003f800000
01-09 09:57:04.778: I/DEBUG(13012):  d6  00000000c2980000  d7  4110000042500000
01-09 09:57:04.778: I/DEBUG(13012):  d8  0000000043eb0000  d9  c35c0000439ce2e0
01-09 09:57:04.778: I/DEBUG(13012):  d10 433d5140405277a8  d11 0000000042354500
01-09 09:57:04.778: I/DEBUG(13012):  d12 0000000000000000  d13 0000000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d14 0000000000000000  d15 0000000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d16 000000000065dea0  d17 c053000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d18 0000000000000000  d19 0000000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d20 3ff0000000000000  d21 8000000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d22 0000000000000000  d23 0000000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d24 0000000000000000  d25 407c000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d26 4030000000000000  d27 3ff0000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d28 0100010001000100  d29 3ff0000000000000
01-09 09:57:04.778: I/DEBUG(13012):  d30 0000000000000000  d31 3ff0000000000000
01-09 09:57:04.778: I/DEBUG(13012):  scr 20000010
01-09 09:57:04.828: I/DEBUG(13012):          #00  pc 00015e18  /system/lib/libdvm.so
01-09 09:57:04.828: I/DEBUG(13012):          #01  pc 0001c0e4  /system/lib/libdvm.so
01-09 09:57:04.828: I/DEBUG(13012):          #02  pc 0001afdc  /system/lib/libdvm.so
01-09 09:57:04.828: I/DEBUG(13012):          #03  pc 00059c40  /system/lib/libdvm.so
01-09 09:57:04.828: I/DEBUG(13012):          #04  pc 00046666  /system/lib/libdvm.so
01-09 09:57:04.828: I/DEBUG(13012):          #05  pc 001b0d3e  /data/data/org.example/lib/libmyproject.so
01-09 09:57:04.828: I/DEBUG(13012):          #06  pc 001b4c7e  /data/data/org.example/lib/libmyproject.so 
```

我需要从引用中提取对象吗？还是我应该完全避免弱引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:40:46.957

如果我将弱引用放在 NewLocalRef 中，它似乎做得很好。所以我最终得到：

```
jobject jMyObject = getEnv()->NewLocalRef(jMyWeakObject);
if(!getEnv()->IsSameObject(jMyObject, NULL)) {
    // do stuff with object
} 
```

并且成员变量现在是 jMyWeakObject。

# java - 如何通过检查其值从 ArrayList 中删除元素？

> ID：14231688
> 
> 赞同：57
> 
> 时间：2013-01-09T09:11:14.440
> 
> 标签：java, collections, arraylist

我有 ArrayList，我想从中删除一个具有特定值的元素...

例如。

```
ArrayList<String> a=new ArrayList<String>();
a.add("abcd");
a.add("acbd");
a.add("dbca"); 
```

我知道我们可以迭代 arraylist 和 .remove() 方法来删​​除元素，但我不知道如何在迭代时做到这一点。如何删除具有“acbd”值的元素，即第二个元素？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-09T09:17:39.440

在您的情况下，无需遍历列表，因为您知道要删除哪个对象。你有几个选择。首先，您可以按索引删除对象（因此，如果您知道该对象是第二个列表元素）：

```
 a.remove(1);       // indexes are zero-based 
```

或者，您可以删除第*一次*出现的字符串：

```
 a.remove("acbd");  // removes the first String object that is equal to the
                    // String represented by this literal 
```

或者，删除具有特定值的所有字符串：

```
 while(a.remove("acbd")) {} 
```

如果您的集合中有更复杂的对象并且想要删除具有特定属性的实例，则它有点复杂。这样您就无法通过使用`remove`与您要删除的对象相同的对象来删除它们。

在这种情况下，我通常使用第二个列表来收集我想要删除的所有实例，并在第二遍中删除它们：

```
 List<MyBean> deleteCandidates = new ArrayList<>();
 List<MyBean> myBeans = getThemFromSomewhere();

 // Pass 1 - collect delete candidates
 for (MyBean myBean : myBeans) {
    if (shallBeDeleted(myBean)) {
       deleteCandidates.add(myBean);
    }
 }

 // Pass 2 - delete
 for (MyBean deleteCandidate : deleteCandidates) {
    myBeans.remove(deleteCandidate);
 } 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-04-10T09:02:31.333

单线（java8）：

```
list.removeIf(s -> s.equals("acbd")); // removes all instances, not just the 1st one 
```

（所有的迭代都是隐式的）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-09T09:13:04.443

您需要像这样使用[迭代器](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)：

```
Iterator<String> iterator = a.iterator();
while(iterator.hasNext())
{
    String value = iterator.next();
    if ("abcd".equals(value))
    {
        iterator.remove();
        break;
    }
} 
```

话虽如此，您可以使用[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)类提供的[remove(int index)](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#remove%28int%29)或[remove(Object obj) 。](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#remove%28java.lang.Object%29)但是请注意，在您遍历循环时调用这些方法将导致[ConcurrentModificationException](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)，因此这将不起作用：

```
for(String str : a)
{
    if (str.equals("acbd")
    {
        a.remove("abcd");
        break;
    }
} 
```

但这会（因为您没有迭代循环的内容）：

```
a.remove("acbd"); 
```

如果您有更复杂的对象，则需要覆盖[equals](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-12-06T06:55:00.737

对于 java8，我们可以像这样简单地使用 removeIf 函数

```
listValues.removeIf(value -> value.type == "Deleted"); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-09T09:14:31.150

你应该检查[`API`](http://docs.oracle.com/javase/6/docs/api/overview-summary.html)这些问题。

您可以使用[删除](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)方法。

```
a.remove(1); 
```

或者

```
a.remove("acbd"); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-15T04:56:52.023

这会给你输出，

```
 ArrayList<String> l= new ArrayList<String>();

    String[] str={"16","b","c","d","e","16","f","g","16","b"};
    ArrayList<String> tempList= new ArrayList<String>();

    for(String s:str){
        l.add(s);
    }

    ArrayList<String> duplicates= new ArrayList<String>();

    for (String dupWord : l) {
        if (!tempList.contains(dupWord)) {
            tempList.add(dupWord);
        }else{
            duplicates.add(dupWord);
        }
    }

    for(String check : duplicates){
        if(tempList.contains(check)){
            tempList.remove(check);
        }
    }

    System.out.println(tempList); 
```

输出，

```
[c, d, e, f, g] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-09T09:13:08.457

只需使用`myList.remove(myObject)`.

它使用类的equals方法。请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove(java.lang.Object](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove(java.lang.Object) )

顺便说一句，如果你有更复杂的事情要做，你应该查看 guava 库，它有很多实用程序可以用谓词等来做这件事。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-09T09:14:26.067

使用迭代器遍历列表，然后删除所需的对象。

```
 Iterator itr = a.iterator();
    while(itr.hasNext()){
        if(itr.next().equals("acbd"))
            itr.remove();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-09T09:14:09.700

使用列表接口中可用的 contains() 方法检查列表中是否存在该值。如果它包含该元素，则获取其索引并将其删除

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-12T05:00:51.847

根据匹配条件从任何数组列表中删除元素的片段如下：

```
List<String> nameList = new ArrayList<>();
        nameList.add("Arafath");
        nameList.add("Anjani");
        nameList.add("Rakesh");

Iterator<String> myItr = nameList.iterator();

    while (myItr.hasNext()) {
        String name = myItr.next();
        System.out.println("Next name is: " + name);
        if (name.equalsIgnoreCase("rakesh")) {
            myItr.remove();
        }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-17T06:43:14.877

试试下面的代码：

```
 public static void main(String[] args) throws Exception{
     List<String> l = new ArrayList<String>();
     l.add("abc");
     l.add("xyz");
     l.add("test");
     l.add("test123");
     System.out.println(l);
     List<String> dl = new ArrayList<String>();
    for (int i = 0; i < l.size(); i++) {
         String a = l.get(i);
         System.out.println(a); 
         if(a.equals("test")){
             dl.add(a);
         }
    }
    l.removeAll(dl);
     System.out.println(l); 
} 
```

你的输出：

```
 [abc, xyz, test, test123]
abc
xyz
test
test123
[abc, xyz, test123] 
```

# javascript - 将 byte[] 转换为文件 javascript

> ID：14231689
> 
> 赞同：0
> 
> 时间：2013-01-09T09:11:17.200
> 
> 标签：javascript, file, bytearray

我在javascript中有字节数组。如何将此数组转换为文件进行上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:21:23.703

我从您的问题中得到的是您有一个字节数组，并且您想将这些字节数组写入文件并将其上传到服务器。

不，这在 JavaScript 中是不可能的，因为 JavaScript 无权写入文件，因为这将是一个巨大的安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T20:12:37.933

你创建一个这样的文件

```
new File([you byte here], 'name of your file', { type: 'you extention', lastModified: new Date() });

if the your byte is string 

  new File([this.base64ToArrayBuffer(you string)], 'file name', { type: this.handleFileDataType(DocExtension), lastModified: new Date() });

 base64ToArrayBuffer = (base64) => {
    var binaryString = window.atob(base64);
    var binaryLen = binaryString.length;
    var bytes = new Uint8Array(binaryLen);
    for (var i = 0; i < binaryLen; i++) {
      var ascii = binaryString.charCodeAt(i);
      bytes[i] = ascii;
    }
    return bytes;
  }

 handleFileDataType = ext => {
    switch (ext) {
      case 'pdf':
        return 'application/pdf';
      case 'jpg':
        return 'image/jpeg';
      case 'jpeg':
        return 'image/jpeg';
      case 'png':
        return 'image/png';
      case 'tiff':
        return 'image/tiff';
      case 'docx':
        return 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';
    }
  }; 
```

# android - Android多活动应用程序检测后台应用程序的最佳方法

> ID：14231697
> 
> 赞同：1
> 
> 时间：2013-01-09T09:11:43.880
> 
> 标签：android, android-activity, activity-lifecycle

我正在开发一个具有大量活动的 Android 应用程序。我的 MainActivity（开始活动）具有从服务器获取更新数据的代码。每次用户启动应用程序（第一次启动或在前台移动应用程序）时，我都想从服务器获取更新的数据。第一次启动很好，我获取数据。但是，当用户进行其他活动并最小化我的应用程序并再次打开时，它会从上一个状态开始。此时我如何检测应用程序正在重新启动，以便我可以再次获取数据。

我已经检查过 onResume()、onPause() 方法，但它们属于单独的活动。我想在应用程序级别捕获事件，就像我们通常在 iOS 应用程序中所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:26:37.103

AFAIK你不能。您必须找到一种方法从所有活动中过滤 onResume()/onPause() 以找出应用程序进入后台。

一条建议：

```
 public abstract class AbstractActivity extends Activity{
    private static long pauseTime=0;
    private static final long MIN_PAUSE_TIME = 3000;

    protected void onPause(){
      super.onPause();
      pauseTime = System.currentTimeMillis();
    }

    protected void onResume(){
      super.onResume();
      if(System.currentTimeMillis()-pauseTime > MIN_PAUSE_TIME){
         // do server stuff
      }
    }
 } 
```

然后让你所有的活动扩展这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:24:35.943

我会说最好的起点是阅读有关活动生命周期的文档：http: [//developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

我的第一个想法是而不是运行代码`onCreate()`（这是我假设你正在做的），而是将代码放入`onStart()`，（但`onResume()`也可能是合适的） - 阅读文档并且应该很明显哪个最适合您的应用程序

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T09:57:57.157

创建一个扩展至应用程序的类，然后实现 onPause() 和 onResume()。即如下..

```
 /**
* Top-level Application class for the your app.
 */
public class DummyApp extends Application {
    /* package */ static final String LOG_TAG = "DummyApp";
  onPause(){
  super.onPause();
  //do whatever you want--
  }

  onResume(){
  super.onResume();
   //Do whatever you want --
  }
  } 
```

然后在 AndroidManifest.xml 中提及这个应用名称“DummyApp”，如下所示

```
<application android:name="DummyApp"
             android:label="@string/apLabel"
             android:icon="@drawable/ic_launcher"> 
```

我认为这可以解决...

# asp.net-mvc-3 - 在客户端进行条件验证的简单方法是什么？

> ID：14231699
> 
> 赞同：0
> 
> 时间：2013-01-09T09:12:04.923
> 
> 标签：asp.net-mvc-3, validation, client-side-validation

我用谷歌搜索了答案，并在主题中发现了许多问题和博客文章。许多看起来很复杂的方式，有些是不完整的。

我有一个具有 2 个类型属性的 Customer 对象`Address`。1 是*BillingAddress*，另一个是*ShippingAddress*。在表单中，我使用 EditorTemplate 作为地址类型。用户可以选择 ShippingAddress 是否与 BillingAddress 相同。

```
public class Customer
{
    public virtual string CustomerName { get; set; }
    public virtual string Title { get; set; }
    public virtual Address BillingAddress { get; set; }
    public virtual Address ShippingAddress { get; set; }
    public virtual bool ShippingSameAsBilling { get; set; }
    // Cont..
}

public class Address
{
    public virtual string AddressLine { get; set; }
    [Required]
    public virtual string City { get; set; }
    // Cont..
} 
```

注意：我的视图中有一个复选框`public virtual bool ShippingSameAsBilling { get; set; }`

我的问题是，我需要对 Address 属性进行验证，这是一种`Address`具有必填字段的类。如果用户不选择“送货地址与帐单地址相同”，则一切正常。如果他/她选择它们相同并且只填写`BillingAddress`，那么`ShippingAddress`EditorTemplate 会在必填字段上显示错误。

我可以`[Required]`从地址类中删除属性，并在表单发布后在服务器端手动验证。在这种情况下对我来说效果很好。我还需要知道如何手动将客户端验证绑定到现有的 mvc 验证中？或者请给我建议一个更好的方法来实现这个目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:09:30.743

我建议您尝试[fluentValidation](http://fluentvalidation.codeplex.com/wikipage?title=mvc)它也在 NUGET 作为一个包。

您可以更好地控制您的验证，我认为这是一种比使用属性更清洁的方式。简短的例子：

```
[Validator(typeof(CustomerValidator))]
public class Customer{
    public virtual string CustomerName { get; set; }
    public virtual string Title { get; set; }
    public virtual Address BillingAddress { get; set; }
    public virtual Address ShippingAddress { get; set; }
    public virtual bool ShippingSameAsBilling { get; set; }
    // Cont..
}

public class CustomerValidator : AbstractValidator<Customer> {
    public CustomerValidator() {        
        RuleFor(x => x.CustomerName ).Length(0, 10);
        RuleFor(x => x.Email).EmailAddress();
        RuleFor(x => x.ShippingAddress).NotEmpty()
                .When(customer => !customer.ShippingSameAsBilling );
    }
} 
```

（**请注意**，您还必须为您的 Address 类指定一个验证器并添加属性）

查看[文档](http://fluentvalidation.codeplex.com/documentation)如何禁用对送货地址的验证，因为我不确定 NotEmpty() 是否正确，您可能需要查看 .Must() 或 SetValidator() 。

最后添加`FluentValidationModelValidatorProvider.Configure();`到您的 application_start

# android - Android apk 上传失败并出现错误“该 apk 必须使用与前一个相同的证书进行签名”

> ID：14231700
> 
> 赞同：0
> 
> 时间：2013-01-09T09:12:11.807
> 
> 标签：android, google-play, apk, jar-signing

我知道以前有人问过这个问题，但我很确定我使用的是同一个密钥库。我存储了用于签署我的应用程序的第一个版本的密钥库，然后使用它来创建第二个版本。

```
jarsigner -verbose -digestalg SHA1 -sigalg MD5withRSA -keystore app_signing.keystore target/HNewsDroid-2.0.apk release
zipalign -v 4 target/HNewsDroid-2.0.apk target/HNewsDroid-2.0-release.apk  I 
```

即使我无法访问我以前使用 keytool 生成 app_signing.keystore 的 Linux 安装，我相信在签署 jar 时只有 keystore 文件需要相同（即使我的私人 ssh 密钥在我的新 Linux 上已更改安装）。

如果有帮助，我正在使用 maven android 插件来生成 jars/apks。

有人可以指出我做错了什么吗？

编辑：

我不知道为什么我签署我的应用程序的证书不起作用。最后，我更改了我的包名称并将应用程序作为新应用程序上传。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:08:59.107

`keytool -list -v -keystore app_signing.keystore`- 获取有关证书的信息并检查其是否正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:13:43.133

您假设只有密钥库需要相同是正确的 - 您机器上的私有 SSH 密钥无关紧要。

您可以在任意数量的不同机器上签署应用程序（假设您使用相同的密钥库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T03:21:44.920

原来我用keytool错误地生成了私钥。它有两个名称，这导致了问题。我只用一个名字重新生成了证书，问题就消失了。

# java - 通过服务管理与 mysql 的连接

> ID：14231703
> 
> 赞同：0
> 
> 时间：2013-01-09T09:12:26.890
> 
> 标签：java, android, mysql, service

我得到了生成电话位置的服务。我想将此字符串发送到我的数据库中，但通过服务是不可能的，因为我在主线程异常上获得了连接。我应该怎么做？我想每 x 次（可能是一分钟）发送一次位置。

我知道如何连接到 mysql 数据库，但我只是不知道如何管理这个系统，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:33:32.520

这与服务本身无关。

问题是您的操作正在 UI 线程上执行，这实际上阻止了 UI 执行任何其他操作。

调用服务生命周期回调（`onStartCommand()`、`onBind()`等）的线程是 UI 线程。您只需在执行程序服务或新线程上触发它，或者根据您正在实现的内容，[IntentService](http://developer.android.com/reference/android/app/IntentService.html)可能是一个方便使用的类。

# c# - 无法在 userControl 中的 GridView 处获取 Select 事件

> ID：14231705
> 
> 赞同：0
> 
> 时间：2013-01-09T09:12:33.333
> 
> 标签：c#, user-controls, code-behind, web-user-controls, webusercontrols

我在 UserControl 上有按钮和 GridView。当我按下按钮时，它将在 PageLoad 函数中执行。但是当我在 GridView 中单击选择时，它在 PageLoad 中无法使用相同的按钮。

```
 if (!IsPostBack){}             
 else{
                    string str_btn = null;
                    if (Request.Form.Keys[Request.Form.Keys.Count - 1]!=null)
                        str_btn=Request.Form.Keys[Request.Form.Keys.Count - 1].ToString();
                    if(!string.IsNullOrEmpty(str_btn))
                       handleClick(str_btn);
                    else
                        Response.Redirect("../Ipservice/IpserviceDevices.aspx?btn=ipservice", false);
                } 
```

您有解决此问题的任何解决方案吗？

我想知道你是否分享你的知识

**IpInterfaceUC 用户控制**

```
<div id="dvChannel" runat="server">
        <asp:GridView ID="gvChannelUC" 
            OnRowCommand="gvChannelUC_RowCommand"
            OnSelectedIndexChanged="gvChannel_SelectedIndexChanged"
        />
</div> 
```

**IPServices 页面 CodeBehind**

```
if (!IsPostBack){
}else
{    
 string str_btn = Request.Form.Keys[Request.Form.Keys.Count - 1].ToString();
 handleClick(str_btn);
} 
```

**问题**

它总是显示**str_btn**为null。如果我单击Button，它将显示按钮的id。但是当我在GridView单击Select时，它显示**str_btn**为null。当我们单击select时应该显示GridView的id。

感谢您的任何解释。

# jquery - 即使用户尚未确认，链接仍在导航

> ID：14231706
> 
> 赞同：4
> 
> 时间：2013-01-09T09:12:42.133
> 
> 标签：jquery, html

我的问题是，即使我单击`Cancel`确认中的按钮，链接仍会导航到其目的地？`cancel`如果用户在确认框中单击，我如何阻止链接导航到目的地？我只希望它在用户单击`OK`按钮时导航：

```
<a id='teachlogout' href='./teacherlogout.php'>Logout</a> 
```

```
function logoutHandler() {
    if (confirm("You are currently creating an Assessment, are you sure you want to logout?" + "\n" + "(Your current assessment details will be lost)" + "\n")) {
        return true;
    }
}

// logout link
$('#teachlogout').click(function() {
    logoutHandler();
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T09:16:06.490

您需要`return false`或者`event.preventDefault()`如果用户取消了`confirm`. 尝试这个：

```
function logoutHandler() {
    return confirm("You are currently creating an Assessment, are you sure you want to logout?" + "\n" + "(Your current assessment details will be lost)" + "\n");
}

// logout link
$('#teachlogout').click(logoutHandler); 
// ^ Shorter version when you only need to call 1 function with no params 
```

或这个：

```
function logoutHandler(e) {
    if (!confirm("You are currently creating an Assessment, are you sure you want to logout?" + "\n" + "(Your current assessment details will be lost)" + "\n")) {
        e.preventDefault();
    }
}

// logout link
$('#teachlogout').click(function(e) {
    logoutHandler(e);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T09:15:06.010

您必须返回 false 才能停止导航。您可以简单地返回您从确认中获得的内容。

```
function logoutHandler() {
        return confirm("You are currently creating an Assessment, are you sure you want to logout?" + "\n" + "(Your current assessment details will be lost)" + "\n"))
}

$('#teachlogout').click(function() {
      return logoutHandler();
}); 
```

如果您在 logoutHandler 中只有一个确认，则将其放入 click 事件中。

```
$('#teachlogout').click(function() {
        return confirm("You are currently creating an Assessment, are you sure you want to logout?" + "\n" + "(Your current assessment details will be lost)" + "\n"))
}); 
```

您也可以使用[event.preventDefault()](http://api.jquery.com/event.preventDefault/)来停止导航。

```
$('#teachlogout').click(function(event) {
       if(!confirm("You are currently creating an Assessment, are you sure you want to logout?" + "\n" + "(Your current assessment details will be lost)" + "\n")))
           event.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T09:14:52.970

将您的声明更改为：

```
return confirm("You are currently..."); 
```

问题是，当用户取消对话框时，您不会返回 false。

此外，您不使用处理程序中的返回值：

```
$('#teachlogout').click(function() {
    return logoutHandler(); // return was missing here
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T09:21:14.920

[http://jsfiddle.net/hWe4E/](http://jsfiddle.net/hWe4E/)

```
function logoutHandler() {
            if (confirm("You are currently creating an Assessment, are you sure you want to logout?" + "\n" + "(Your current assessment details will be lost)" + "\n")) {
                return true;
            }

  return false;  //added
}

//you need to return the true/false
$('#teachlogout').click(function() {
      return  logoutHandler();
}); 
```

# php - Magento 集合分组和按值范围限制

> ID：14231708
> 
> 赞同：1
> 
> 时间：2013-01-09T09:13:00.650
> 
> 标签：php, mysql, zend-framework, magento

我确信这可以通过一些聪明的 mysql 表达式或 zend 连接来解决，但我只是没有足够的知识来解决，希望 SO 社区中的某个人可以。

假设我在 Magento 中有一系列产品，它们是按类别位置排序的。

我只想从集合中检索 2 个产品，即类别位置最高的产品。

以下应说明：

```
Category:
    Product A (position 3);
    Product B (position 1);
    Product C (position 0);
    Product D (position 2); 
```

在这个集合中，我只想检索产品 C 和 B，因为这是两个最高位置。

另一个插图：

```
Category:
    Product A (position 1);
    Product B (position 3);
    Product C (position 0);
    Product D (position 2); 
```

在这个集合中，我只想检索产品 C 和 A。

如何在单个集合负载中完成此操作。例如，我不想加载集合然后迭代并手动排序等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:38:22.370

```
$_category = Mage::getModel('catalog/category')->load($categoryId);
$coll = $_category->getProductCollection()->addAttributeToSort('position','ASC');
$coll->getSelect()->limit(2);
$coll->load(); 
```

之后，您可以遍历您的集合：

```
foreach ($coll as $product) {
   // Do sth. with $product
} 
```

# c# - 对象引用问题

> ID：14231715
> 
> 赞同：-2
> 
> 时间：2013-01-09T09:13:13.993
> 
> 标签：c#, object, reference, null

我有两个名为`Parent`和的类`Child`。`Parent`该类包含对该类的引用`Child`。当我创建一个`Parent`类的实例时，我将传递一个`Child`对象的实例。

据我所知，我们将此`Child`实例作为参考。然后我将此`Parent`对象缓存在外部缓存中。然后我从另一个系统检索这个对象。我认为在那个系统中，`Child`对象的实例可能不存在。

根据理论'_child'包含堆中对象的引用而不是实际对象我对吗？

试想在服务器场场景中，您的对象实例应该可供其他系统使用，并且系统一旦生成该对象

```
public class Parent
{
    public Child _child = null;

    public Parent(Child c)
    {
        _child=c;   
    }
}

public class Child
{
    public string Name;
}

static void Main()
{
    Child c = new Child();
    c.Name="vivek";
    Parent p = Parent(c);
    string key = ExternalCache.Add(p);
} 
```

现在如果我尝试`Parent`在另一个系统或应用程序中检索这个对象会发生什么？

```
static void Main()
{
   Parent p = (Parent)ExternalCache.Get(Key)
   Console.WriteLine(p._child.Name);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:35:08.790

不可能将相同的对象*引用*传递给不同的机器，因为它们不会在相同的内存空间中运行，所以即使你可以引用也没有任何用处。但是，您可以做的是序列化对象图并在另一端重新构造对象 - 这称为**对象序列化**，或通常只是**序列化**。

.NET Framework 有各种内置的序列化器，它们允许不同类型的序列化，例如

*   Xml - [DataContractSerializer](http://msdn.microsoft.com/en-gb/library/system.runtime.serialization.datacontractserializer.aspx) , [XmlSerializer](http://msdn.microsoft.com/en-gb/library/system.xml.serialization.xmlserializer.aspx)
*   JSON - [DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx) , [JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

# iframe - 当 html 包含 iframe 时，Mozilla 和 Opera 只打印一页

> ID：14231721
> 
> 赞同：2
> 
> 时间：2013-01-09T09:13:41.197
> 
> 标签：iframe, printing, opera, mozilla

[此处](https://stackoverflow.com/questions/13937753/firefox-iframe-printing-broken-when-iframe-height-more-than-page-height#_=_)发布了相同的问题，但未得到解答。

当我尝试使用“iframe”打印 Html 页面时，只打印第一页。

重现步骤： 1\. 创建 page.html 内容：

```
<html>
<body>
<iframe width='50px' height='2500px' src='iframe.html'/>
</body>
</html> 
```

2\. 创建 iframe.html 内容：

```
<html>
<body>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tincidunt condimentum tellus ultricies aliquet. Integer iaculis iaculis diam, eget hendrerit justo facilisis nec. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam lobortis tristique est vitae viverra. Fusce at nibh ligula. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ultrices ullamcorper turpis in tristique. Pellentesque quis turpis dignissim eros volutpat scelerisque ac tincidunt dui. In pellentesque lacus rutrum magna aliquet mollis. Quisque sit amet dui eu ligula blandit pulvinar. Nulla semper neque ac mi tincidunt facilisis. Nulla et blandit mauris.</p>
</body>
</html> 
```

3\. 在 Opera 或 Mozilla 中打开 page.html 并转到“打印预览”表单。

观察到：预览中只有一页，其中包含“iframe.html”的部分内容。

预期：预览中的两个或更多页面，所有内容均为“iframe”。

该问题在 Firefox 和 Opera 中可重现。无法用 Chrome 重现。

# php - 值从数据库到 html

> ID：14231727
> 
> 赞同：0
> 
> 时间：2013-01-09T09:13:57.953
> 
> 标签：php, html, database

我是 PHP 和 HTML 编程的初学者。我在 CSS 和 HTML 中制作了一个进度条，效果很好，但我希望进度条的像素是我数据库中的一个值。我得到了一个包含一行和一个值的数据库。

这是我的进度条代码：

```
<div id="bar4" style="height: 50px;">
  <span style="width: 200px;"></span>
</div> 
```

是否可以将当前值（`200`in `200px`）更改为我的数据库中的值？我制作了一个 PHP 文件，它回显了我认为可能会使过程更容易的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:16:55.460

你可以改变。假设，您正在从数据库中以变量 $widthVal 获取宽度。然后你必须使用这样的东西

```
<div id="bar4" style="height: 50px;"> <span style="width: <?php echo $widthVal; ?>px;"></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:17:57.987

```
<div id="bar4" style="height: 50px;"><span style="width: <?php HERE GOES YOUR PHP CODE THAT ECHO THE 200 ?>px;"></span> 
```

使用 PHP 扩展名保存文件

# sql - 在 R 或 SQL 中具有间隔的最大每组参考 n

> ID：14231737
> 
> 赞同：4
> 
> 时间：2013-01-09T09:14:26.520
> 
> 标签：sql, r, memory-management, greatest-n-per-group, data.table

我已经描述了下面描述的我的（非平凡的）问题。这是我的第一篇文章，现在是修改版。任何输入或建议的解决方案都会有所帮助。

这有几个方面：确定**小规模问题的最佳解决方案**（下面已经有几个建议）、**时间**（下面的 data.table 解决方案似乎选中了框）和**内存管理**。问题在于在一个表中枚举并由另一个表中的集群表示的标签（如果在同一链上的 30bp 内，则为同一集群）。

挑战在于确定将给定标签分配到适当间隔的有效过程。我们正在处理基因组数据，这意味着标签坐标由起始位置、结束位置（=起始位置 + 1）、染色体（完整数据集中的 25 个值）和链（位置在正链或负链上）确定双链 DNA）。因此，集群在同一条链上不重叠，但如果它们的间隔在不同的链上，集群坐标可能会重叠，这会使事情变得复杂。

这是我 1 月 9 日帖子的修改版本，更好地概括了问题的内在难度。稍后显示解决小规模问题的快速解决方案。如果有人想处理完整的数据集，请告诉我。提前谢谢了！

问候，

尼克克拉克

**背景** 该问题涉及间隔和每组的最大 n。我有两个包含聚集基因坐标（簇）和输入数据（标签）的表。clusters 表包含来自 tags 表中同一链上每个覆盖的非重叠间隔的总和标签。完整的集群表有 160 万行。标签表大约有 400 万行，因此理想情况下应该对解决方案进行矢量化。请参阅下面的一些示例数据。该设置是关于人类转录起始位点 (CAGE) 的数据集。

当我在 R 中工作时，我正在寻找基于 R 或 SQL 的解决方案。我之前通过 R 中的 plyr 和 sqldf 包进行了不成功的尝试。

**我所缺少**的挑战是聚集表中的一行，它从与最大标签贡献相关的输入数据表中标识起始坐标。****

 **请注意，1) 来自不同链的簇可以具有重叠坐标，2) chr / chr_clst 可以采用 25 个不同的值（示例中未显示），3) 解决方案需要同时考虑链和 chr / chr_clst。

**我的理想解决方案：** 矢量化 R 代码或对以下 SQL 语句的改进。下面的解决方案版本可以解决内存问题。就像改进的 sql 语句一样，它可以有效地从 clusters 表中确定适当的行。

**到目前为止的状态** 这是迄今为止最好的解决方案。**向 user1935457 提供代码的提示和酷点以及后续建议修改的 mnel**。这里的障碍是，由于对内存的过多需求，从玩具示例移动到填充比例表会使 R（和 R Studio）崩溃。

```
# Convert sample data provided in question
clusters <- as.data.table(clusters)
tags <- as.data.table(tags)

# Rename chr and strand for easier joining
setnames(clusters, c("chr_clst", "strand_clst"), c("chr", "strand"))

# Set key on each table for next step
setkey(clusters, chr, strand)
setkey(tags, chr, strand)

# Merge on the keys
tmp <- merge(clusters, tags, by = c("chr", "strand"))

# Find index (in merged table, tmp) of largest tag_count in each
# group subject to start_clst <= end <= end_clst
idx <- tmp[between(end, start_clst, end_clst),
       list(IDX=.I[which.max(tag_count)]),
       by=list(chr, start_clst,end_clst,strand)]$IDX

# Get those rows from merged table
tmp[idx] 
```

我最初使用 R 中的 sqldf 包创建了一个基本的 SQL 查询（这个版本找到了最大值，而不是与最大值关联的坐标）。尽管在两个表上都放置了（希望）适当的索引，但查询需要永远运行。

```
output_tablename <- sqldf(c(
"create index ai1 on clusters(chr_clst, start_clst, end_clst, strand_clst)",
"create index ai2 on tags(chr, start, end, strand)",
"select a.chr_clst, a.start_clst, a.end_clst, a.strand_clst, sum(b.tags)
from main.clusters a
inner join main.tags b on a.chr_clst=b.chr and a.strand_clst = b.strand 
and b.end between a.start_clst and a.end_clst
group by a.chr_clst, a.start_clst, a.end_clst, a.strand_clst
order by a.chr_clst, a.start_clst, a.end_clst, a.strand_clst"
)) 
```

**表结构**
簇：chr_clst、start_clst、end_clst、strand_clst、tags_clst。
标签：chr、开始、结束、链、tag_count。

**R 格式的示例数据** 如果有人想处理完整的数据集，请告诉我。

集群：

```
chr_clst <- c("chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1")
start_clst <- c(568911, 569233, 569454, 569793, 569877, 569926, 569972, 570048, 570166, 713987)
end_clst <- c(568941, 569256, 569484, 569803, 569926, 569952, 569973, 570095, 570167, 714049)
strand_clst <- c("+", "+", "+", "+", "+", "-", "+", "+", "+", "-")
tags_clst <- c(37, 4, 6, 3, 80, 25, 1, 4, 1, 46)

clusters <- data.frame(cbind(chr_clst, start_clst, end_clst, strand_clst, tags_clst))
clusters$start_clst <- as.numeric(as.character(clusters$start_clst))
clusters$end_clst <- as.numeric(as.character(clusters$end_clst))
clusters$tags_clst <- as.numeric(as.character(clusters$tags_clst))
rm(chr_clst, start_clst, end_clst, start_clst, strand_clst, tags_clst) 
```

标签：

```
chr <- c("chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1")

start <- c(568911, 568912, 568913, 568913, 568914, 568916, 568917, 568918, 568929, 
568929, 568932, 568933, 568935, 568937, 568939, 568940, 568940, 569233, 569247, 
569255, 569454, 569469, 569471, 569475, 569483, 569793, 569802, 569877, 569880, 
569887, 569889, 569890, 569891, 569893, 569894, 569895, 569895, 569896, 569897, 
569898, 569898, 569899, 569900, 569900, 569901, 569901, 569903, 569905, 569906, 
569907, 569907, 569908, 569908, 569909, 569910, 569910, 569911, 569911, 569912, 
569914, 569914, 569915, 569916, 569917, 569918, 569919, 569920, 569920, 569925, 
569926, 569936, 569938, 569939, 569939, 569940, 569941, 569941, 569942, 569942, 
569943, 569944, 569948, 569948, 569951, 569972, 570048, 570057, 570078, 570094, 
570166, 713987, 713989, 713995, 714001, 714001, 714007, 714008, 714010, 714011, 
714011, 714011, 714013, 714015, 714015, 714017, 714018, 714019, 714023, 714025, 
714029, 714034, 714034, 714037, 714038, 714039, 714039, 714040, 714042, 714048, 
714048)

end <- c(568912, 568913, 568914, 568914, 568915, 568917, 568918, 568919, 568930, 
568930, 568933, 568934, 568936, 568938, 568940, 568941, 568941, 569234, 569248,
569256, 569455, 569470, 569472, 569476, 569484, 569794, 569803, 569878, 569881, 
569888, 569890, 569891, 569892, 569894, 569895, 569896, 569896, 569897, 569898, 
569899, 569899, 569900, 569901, 569901, 569902, 569902, 569904, 569906, 569907, 
569908, 569908, 569909, 569909, 569910, 569911, 569911, 569912, 569912, 569913, 
569915, 569915, 569916, 569917, 569918, 569919, 569920, 569921, 569921, 569926, 
569927, 569937, 569939, 569940, 569940, 569941, 569942, 569942, 569943, 569943, 
569944, 569945, 569949, 569949, 569952, 569973, 570049, 570058, 570079, 570095, 
570167, 713988, 713990, 713996, 714002, 714002, 714008, 714009, 714011, 714012, 
714012, 714012, 714014, 714016, 714016, 714018, 714019, 714020, 714024, 714026, 
714030, 714035, 714035, 714038, 714039, 714040, 714040, 714041, 714043, 714049, 
714049)

strand <- c("+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", 
"+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", 
"+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", 
"+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", "+", 
"+", "+", "+", "+", "+", "+", "+", "+", "-", "-", "-", "-", "-", "-", "-", "-", 
"-", "-", "-", "-", "-", "-", "-", "+", "+", "+", "+", "+", "+", "-", "-", "-", 
"-", "-", "-", "-", "-", "-", "-", "-", "-", "-", "-", "-", "-", "-", "-", "-", 
"-", "-", "-", "-", "-", "-", "-", "-", "-", "-", "-")

tag_count <- c(1, 1, 1, 2, 3, 2, 3, 1, 1, 1, 1, 1, 2, 1, 6, 2, 8, 1, 1, 2, 1, 1, 2, 
1, 1, 2, 1, 1, 1, 1, 1, 2, 2, 4, 4, 1, 1, 1, 1, 1, 3, 2, 1, 1, 2, 4, 2, 4, 2, 4, 
1, 1, 1, 1, 3, 2, 1, 3, 1, 2, 3, 1, 1, 3, 2, 1, 1, 1, 5, 1, 2, 1, 2, 1, 1, 2, 2, 
4, 3, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 2, 3, 2, 4, 2, 1, 1, 1, 
2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 4, 1, 2)

tags <- data.frame(cbind(chr, start, end, strand, tag_count))    
tags$start <- as.numeric(as.character(tags$start))
tags$end <- as.numeric(as.character(tags$end))
tags$tag_count <- as.numeric(as.character(tags$tag_count))
rm(chr, start, end, strand, tag_count) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:35:25.527

这是一个包的尝试`data.table`：

```
# Convert sample data provided in question
clusters <- as.data.table(clusters)
tags <- as.data.table(tags)

# Rename chr and strand for easier joining
setnames(clusters, c("chr_clst", "strand_clst"), c("chr", "strand"))

# Set key on each table for next step
setkey(clusters, chr, strand)
setkey(tags, chr, strand)

# Merge on the keys
tmp <- merge(clusters, tags, by = c("chr", "strand"))

# Find index (in merged table, tmp) of largest tag_count in each
# group subject to start_clst <= end <= end_clst
idx <- tmp[between(end, start_clst, end_clst),
           list(IDX=.I[which.max(tag_count)]),
           by=list(chr, start_clst,end_clst,strand)]$IDX

# Get those rows from merged table
tmp[idx] 
```

最后一行的输出：

```
 chr strand start_clst end_clst tags_clst  start    end tag_count
 1: chr1      -     569926   569952        25 569942 569943         4
 2: chr1      -     713987   714049        46 714011 714012         4
 3: chr1      +     568911   568941        37 568940 568941         8
 4: chr1      +     569233   569256         4 569255 569256         2
 5: chr1      +     569454   569484         6 569471 569472         2
 6: chr1      +     569793   569803         3 569793 569794         2
 7: chr1      +     569877   569926        80 569925 569926         5
 8: chr1      +     569972   569973         1 569972 569973         1
 9: chr1      +     570048   570095         4 570048 570049         1
10: chr1      +     570166   570167         1 570166 570167         1 
```

## 编辑

基于下面评论中讨论的内存问题，这是另一种尝试。我使用`intervals`包来查找两个表之间的重叠间隔。您还可以探索并行化`for`循环以提高速度。

```
require(data.table)
require(intervals)
clusters <- data.table(clusters)
tags <- data.table(tags)

#  Find all unique combinations of chr and strand...
setkey(clusters, chr_clst, strand_clst)
setkey(tags, chr, strand)

unique.keys <- unique(rbind(clusters[, key(clusters), with=FALSE],
                            tags[, key(tags), with=FALSE], use.names=FALSE))

# ... and then work on each pair individually to avoid creating
# enormous objects in memory
result.list <- vector("list", nrow(unique.keys))
for(i in seq_len(nrow(unique.keys))) {
  tmp.clst <- clusters[unique.keys[i]]
  tmp.tags <- tags[unique.keys[i]]

  # Keep track of each row for later
  tmp.clst[, row.id := seq_len(nrow(tmp.clst))]
  tmp.tags[, row.id := seq_len(nrow(tmp.tags))]

  # Use intervals package to find all overlapping [start, end] 
  # intervals between the two tables
  clst.intervals <- Intervals(tmp.clst[, list(start_clst, end_clst)],
                              type = "Z")
  tags.intervals <- Intervals(tmp.tags[, list(start, end)],
                              type = "Z")
  rownames(tags.intervals) <- tmp.tags$row.id

  # This goes to C++ code in intervals package; 
  # I didn't spend too much time looking over how it works
  overlaps <- interval_overlap(tags.intervals,
                               clst.intervals,
                               check_valid = FALSE)

  # Retrieve rows from clusters table with overlaps and add a column
  # indicating which intervals in tags table they overlapped with
  matches <- lapply(as.integer(names(overlaps)), function(n) {
    ans <- tmp.clst[overlaps[[n]]]
    ans[, match.in.tags := n]
  })

  # List back to one table...
  matches <- rbindlist(matches)

  # ... and join each match from tags to its relevant row from tags
  setkey(matches, match.in.tags)
  setkey(tmp.tags, row.id)

  # add the rows for max of tag_count by start_clst and
  # end_clst from this particular unique key to master list...
  result.list[[i]] <- tmp.tags[matches][, .SD[which.max(tag_count)],
                                        by = list(start_clst, end_clst)]
}

# and concatenate master list into none table,
# getting rid of the helper columns
rbindlist(result.list)[, c("row.id", "row.id.1") := NULL][] 
```

最后一行给出：

```
 start_clst end_clst  chr strand  start    end tag_count chr_clst strand_clst tags_clst
 1:     569926   569952 chr1      - 569942 569943         4     chr1           -        25
 2:     713987   714049 chr1      - 714011 714012         4     chr1           -        46
 3:     568911   568941 chr1      + 568940 568941         8     chr1           +        37
 4:     569233   569256 chr1      + 569255 569256         2     chr1           +         4
 5:     569454   569484 chr1      + 569471 569472         2     chr1           +         6
 6:     569793   569803 chr1      + 569793 569794         2     chr1           +         3
 7:     569877   569926 chr1      + 569925 569926         5     chr1           +        80
 8:     569972   569973 chr1      + 569972 569973         1     chr1           +         1
 9:     570048   570095 chr1      + 570048 570049         1     chr1           +         4
10:     570166   570167 chr1      + 570166 570167         1     chr1           +         1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:30:53.423

只是在其他答案和评论的基础上提供一些提示的快速答案。

如果`X[Y]`（或`merge(X,Y)`）返回大量行，大于`max(nrow(X),nrow(Y))`（`nrow(X)*nrow(Y)`例如）然后`X[Y][where]`（即`X[Y]`后跟一个子集）将无济于事。最终的结果要小得多，但它必须先创建大的`X[Y]`。

如果需要范围，那么一种方式是`w = X[Y,roll=TRUE,which=TRUE]`或`w=X[Y,mult="first",which=TRUE]`类似的方式，可能是第一次和最后一次两次。`w`获得每个范围的行位置 ( ) 后，您可以`seq`或`vecseq`在开始和结束之间，然后选择结果。此标签中的其他 SO 问题中有一些示例。当然，将它构建到 data.table 中会很好，并且有一个功能请求建议连接列本身可以是 2 列列表列，其中包含每行每列的范围查询的边界。

或者，可以使用*by-without-by 。*这是在没有子句时`j`对每一行进行评估的地方。搜索by-without-by 并查看示例。这就是您可以坚持笛卡尔然后子集思维的方式，而无需首先实际创建整个笛卡尔结果。类似的东西： 。不过，由于 3 个向量扫描（和），这可能比or方法慢。但至少它会避免大量的内存分配。请注意，前缀可用于显式引用非连接列。data.table 中的函数可以用 C 编码以更有效地执行此操作，类似于`i``by``?data.table``X[Y,.SD[start<=i.value & i.value<=end]]``roll``mult``&``<=``<=``i.``i``between``clamp`Rcpp 中的函数。但目前`between()`写为 R 矢量扫描，因此同样慢。

希望有帮助。我试图解释当前的想法，不管它是对是错。

我们将改进 data.table 以捕获带有优雅错误的笛卡尔分配，并给出评论中提到的一些提示 [编辑：`allow.cartesian=FALSE`现在在 v1.8.7 中添加]。谢谢！

* * *

扩展第 2 段：

```
setkey(clusters,chr,strand,end_clst)
setkey(tags,chr,strand,end)

begin = tags[clusters[,list(chr,strand,start_clst)],roll=-Inf,mult="first",which=TRUE]
end = tags[clusters[,list(chr,strand,end_clst)],roll=+Inf,mult="last",which=TRUE]

idx = mapply(function(x,y){.i=seq.int(x,y); .i[ which.max(tags$tag_count[.i]) ]}, begin, end)
cbind(clusters, tags[idx])
     chr start_clst end_clst strand tags_clst  chr  start    end strand tag_count
 1: chr1     569926   569952      -        25 chr1 569942 569943      -         4
 2: chr1     713987   714049      -        46 chr1 714011 714012      -         4
 3: chr1     568911   568941      +        37 chr1 568940 568941      +         8
 4: chr1     569233   569256      +         4 chr1 569255 569256      +         2
 5: chr1     569454   569484      +         6 chr1 569471 569472      +         2
 6: chr1     569793   569803      +         3 chr1 569793 569794      +         2
 7: chr1     569877   569926      +        80 chr1 569925 569926      +         5
 8: chr1     569972   569973      +         1 chr1 569972 569973      +         1
 9: chr1     570048   570095      +         4 chr1 570048 570049      +         1
10: chr1     570166   570167      +         1 chr1 570166 570167      +         1 
```

这避免了其他答案和评论中提到的笛卡尔内存分配问题。它在 v1.8.7 中使用了以下新功能：

> o 除了`TRUE`/ `FALSE`，`roll`现在可以是正数（前滚/LOCF）或负数（后滚/NOCB）。有限的数字限制了值滚动的距离（有限的陈旧性）。`roll=TRUE`并且`roll=+Inf`是等价的。
> `rollends`是一个包含两个逻辑的新参数。`rollends[1]`如果是，则第一个观察结果向后滚动`TRUE`。`rollends[2]`如果是，则最后一个观察结果向前滚动`TRUE`。如果`roll`是一个有限数，则同样的限制适用于两端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:02:56.873

这是一个使用的建议`apply`：

```
transform(
  clusters,
  start = apply(clusters[c("chr_clst", "start_clst", "end_clst", "strand_clst")],
                1, function(x) {
                     tmp <- tags[tags$start >= as.numeric(x[2]) &
                                 tags$end <= as.numeric(x[3]) & 
                                 tags$chr == x[1] & 
                                 tags$strand == x[4], c("tag_count", "start")]
                     tmp$start[which.max(tmp$tag_count)]})) 
```

基本上，对于函数的每一行，都会在 的相关子集中`clusters`查找 的最大值。选择了适当的值。这些新的值向量用作 的新列。`tag_count``tags``start``start``clusters`

结果：

```
 chr_clst start_clst end_clst strand_clst tags_clst  start
1      chr1     568911   568941           +        37 568940
2      chr1     569233   569256           +         4 569255
3      chr1     569454   569484           +         6 569471
4      chr1     569793   569803           +         3 569793
5      chr1     569877   569926           +        80 569925
6      chr1     569926   569952           -        25 569942
7      chr1     569972   569973           +         1 569972
8      chr1     570048   570095           +         4 570048
9      chr1     570166   570167           +         1 570166
10     chr1     713987   714049           -        46 714011 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-11T13:20:27.890

这可以使用以下`foverlaps()`功能非常`data.table`有效地完成`v1.9.4`：

```
require(data.table) #v1.9.4+
setDT(clusters, key=c("chr_clst", "strand_clst", "start_clst", "end_clst"))
setDT(tags, key=c("chr", "strand", "start", "end"))

ans = foverlaps(clusters, tags)[, .SD[which.max(tag_count)], by=.(chr_clst, strand_clst, start_clst, end_clst)]

#     chr_clst strand_clst start_clst end_clst  start    end tag_count tags_clst
#  1:     chr1           -     569926   569952 569942 569943         4        25
#  2:     chr1           -     713987   714049 714011 714012         4        46
#  3:     chr1           +     568911   568941 568940 568941         8        37
#  4:     chr1           +     569233   569256 569255 569256         2         4
#  5:     chr1           +     569454   569484 569471 569472         2         6
#  6:     chr1           +     569793   569803 569793 569794         2         3
#  7:     chr1           +     569877   569926 569925 569926         5        80
#  8:     chr1           +     569972   569973 569972 569973         1         1
#  9:     chr1           +     570048   570095 570048 570049         1         4
# 10:     chr1           +     570166   570167 570166 570167         1         1 
```

`foverlaps()`最终也将能够执行重叠范围连接，而无需先*键入*它们，类似于新的`on=`(v1.9.6+) 参数。**

# php - 在 Mac 上无法识别 Symfony2 和 Composer 的 Mongo PHP 扩展

> ID：14231740
> 
> 赞同：0
> 
> 时间：2013-01-09T09:14:43.680
> 
> 标签：php, macos, symfony

电脑： 2009 年中 Mac Book Pro 和 OSX Lion

嗨，我目前在安装 Symfony2 时遇到问题。

我正在和一些朋友一起做一个 Symfony2 协作项目，我们正在使用 composer 和 git 来协调我们所有的工作。话虽如此，我通常使用作曲家来获取我需要的任何东西，并且没有任何问题。

然而，他们最近开始使用 MongoDB 以及 php 使用的 MongoDB 扩展（和 Symfony2），当我使用 Composer 更新时，这就是控制台“吐出”的内容

```
composer update
Loading composer repositories with package information
Updating dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - doctrine/mongodb-odm-bundle 3.0.x-dev requires doctrine/mongodb-odm >=1.0.0-beta5,<1.1-dev -> satisfiable by doctrine/mongodb-odm 1.0.0-BETA5, doctrine/mongodb-odm 1.0.0-BETA6, doctrine/mongodb-odm 1.0.0-BETA7, doctrine/mongodb-odm 1.0.x-dev.
    - doctrine/mongodb-odm-bundle v3.0.0-BETA1 requires doctrine/mongodb-odm 1.0.0-BETA5 -> satisfiable by doctrine/mongodb-odm 1.0.0-BETA5.
    - doctrine/mongodb-odm-bundle v3.0.0-BETA2 requires doctrine/mongodb-odm >=1.0.0-beta5,<1.1-dev -> satisfiable by doctrine/mongodb-odm 1.0.0-BETA5, doctrine/mongodb-odm 1.0.0-BETA6, doctrine/mongodb-odm 1.0.0-BETA7, doctrine/mongodb-odm 1.0.x-dev.
    - doctrine/mongodb-odm-bundle v3.0.0-BETA3 requires doctrine/mongodb-odm >=1.0.0-beta5,<1.1-dev -> satisfiable by doctrine/mongodb-odm 1.0.0-BETA5, doctrine/mongodb-odm 1.0.0-BETA6, doctrine/mongodb-odm 1.0.0-BETA7, doctrine/mongodb-odm 1.0.x-dev.
    - doctrine/mongodb-odm 1.0.0-BETA6 requires doctrine/mongodb >=1.0.0-beta1,<1.1-dev -> satisfiable by doctrine/mongodb 1.0.0, doctrine/mongodb 1.0.0-BETA1, doctrine/mongodb 1.0.0-BETA2, doctrine/mongodb 1.0.0-BETA3.
    - doctrine/mongodb-odm 1.0.0-BETA7 requires doctrine/mongodb 1.0.* -> satisfiable by doctrine/mongodb 1.0.0, doctrine/mongodb 1.0.0-BETA1, doctrine/mongodb 1.0.0-BETA2, doctrine/mongodb 1.0.0-BETA3.
    - doctrine/mongodb-odm 1.0.x-dev requires doctrine/mongodb 1.0.* -> satisfiable by doctrine/mongodb 1.0.0, doctrine/mongodb 1.0.0-BETA1, doctrine/mongodb 1.0.0-BETA2, doctrine/mongodb 1.0.0-BETA3.
    - doctrine/mongodb-odm 1.0.0-BETA5 requires doctrine/mongodb 1.0.0-BETA1 -> satisfiable by doctrine/mongodb 1.0.0-BETA1.
    - doctrine/mongodb 1.0.0-BETA3 requires ext-mongo >=1.3.1,<1.4-dev -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0-BETA2 requires ext-mongo >=1.2.12,<1.3-dev -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0 requires ext-mongo >=1.2.12,<1.4-dev -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0-BETA1 requires ext-mongo * -> the requested PHP extension mongo is missing from your system.
    - Installation request for doctrine/mongodb-odm-bundle 3.0.* -> satisfiable by doctrine/mongodb-odm-bundle 3.0.x-dev, doctrine/mongodb-odm-bundle v3.0.0-BETA1, doctrine/mongodb-odm-bundle v3.0.0-BETA2, doctrine/mongodb-odm-bundle v3.0.0-BETA3. 
```

这是说我的系统上不存在 ext-mongo 并且它丢失了，但是当我执行命令时`php -m`

```
php -m
[PHP Modules]
Core
ctype
date
dom
ereg
fileinfo
filter
hash
iconv
json
libxml
mongo
pcre
PDO
pdo_sqlite
Phar
posix
Reflection
session
SimpleXML
SPL
sqlite3
standard
tokenizer
xml
xmlreader
xmlwriter

[Zend Modules] 
```

不用说，在正确的 php.ini 文件中启用了 extension=mongo.so。

我什么都试过了，brew，ports，pecl，pear....有什么建议吗？我正处于严密的封锁状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-15T10:56:24.697

如果你有 brew

安装 php-mongo

```
brew install php56-mongo << i am using php 5.6 
```

重启php

```
launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.php56.plist
launchctl load ~/Library/LaunchAgents/homebrew.mxcl.php56.plist 
```

再做作曲家

```
composer update doctrine/mongodb-odm doctrine/mongodb-odm-bundle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T04:20:53.333

如果您使用的是 MAMP，这可能是因为只有一个 php.ini 文件被更改为包含 mongo 扩展名。进入`path\to\bin\apache\bin\php.ini`并确保您已将 mongo 添加到动态扩展列表中。

您还需要确保 mongo 二进制文件位于默认扩展文件夹中，并且它也已添加`php.ini`到`path\to\bin\php\php5\php.ini`.

# ios - 如何在不减少 ios 中的高度和宽度的情况下减小图像的大小？

> ID：14231741
> 
> 赞同：1
> 
> 时间：2013-01-09T09:14:43.150
> 
> 标签：ios

请指导我。如何在不减少 ios 中的高度和宽度的情况下减小图像的大小？

我将通过设备相机拍照。大小约为 250kb。现在我想在不调整高度和宽度的情况下减少 100KB。

有可能做到吗？

请分享您的观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:21:58.077

将 jpg 图像转换为 jpeg 将减小大小。尝试这个。

```
[UIImage imageWithData:UIImageJPEGRepresentation(img, 0.01f)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:23:00.477

我通常使用此功能来压缩我在[此答案](https://stackoverflow.com/a/7409933/643109)中找到的 iOS 上的图像。

```
+ (NSData*)imageDataWithCGImage:(CGImageRef)CGimage UTType:(const CFStringRef)imageUTType desiredCompressionQuality:(CGFloat)desiredCompressionQuality
{
    NSData* result = nil;

    CFMutableDataRef destinationData = CFDataCreateMutable(kCFAllocatorDefault, 0);
    CGImageDestinationRef destinationRef = CGImageDestinationCreateWithData(destinationData, imageUTType, 1, NULL);
    CGImageDestinationSetProperties(destinationRef, (CFDictionaryRef)[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithFloat:desiredCompressionQuality], (NSString*)kCGImageDestinationLossyCompressionQuality, nil]);
    if (destinationRef != NULL)
    {
        CGImageDestinationAddImage(destinationRef, CGimage, NULL);

        if (CGImageDestinationFinalize(destinationRef))
        {
            result = [NSData dataWithData:(NSData*)destinationData];
        }
    }
    if (destinationData)
    {
        CFRelease(destinationData);
    }
    if (destinationRef)
    {
        CFRelease(destinationRef);
    }
    return result;
} 
```

图像类型可以是 kUTTypePNG，但质量参数很可能不起作用。根据您的需要，它也可以是 kUTTypeJPEG2000。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-21T06:23:43.390

**快乐的编码...**

***请使用此逻辑，它不会降低文件质量，也不会降低图像高度宽度。***

**在不损失图像质量的情况下，您可以执行更好的增强。**

在这里，您需要根据您的要求管理**maxByte 。**

它还会在执行此增强功能后释放内存。

这是**UIImage 扩展**...

```
extension UIImage {
func resize(fileName: String, maxByte: Int = 800000, folderName: String, completion: @escaping (UIImage?) -> ()) {
        DispatchQueue.global(qos: .userInitiated).async {
            guard let currentImageSize = self.jpegData(compressionQuality: 1.0)?.count else { return }//completion(nil) }

            var imageSize = currentImageSize
            var percentage: CGFloat = 1.0
            var generatedImage: UIImage? = self
            let percantageDecrease: CGFloat = imageSize < 10000000 ? 0.1 : 0.3
            while imageSize > maxByte && percentage > 0.5 {
                print("Performing \(percentage)")
                let canvas = CGSize(width: self.size.width * percentage,
                                    height: self.size.height * percentage)
                let format = self.imageRendererFormat
                format.opaque = false
                generatedImage = UIGraphicsImageRenderer(size: canvas, format: format).image {
                    _ in self.draw(in: CGRect(origin: .zero, size: canvas))
                }
                guard let generatedImageSize = generatedImage?.jpegData(compressionQuality: 1.0)?.count else { return }//completion(nil) }
                imageSize = generatedImageSize
                percentage -= percantageDecrease
            }

            completion(generatedImage)
        }
    }} 
```

# android - 如何使用包名称获取应用程序类别

> ID：14231755
> 
> 赞同：8
> 
> 时间：2013-01-09T09:15:29.203
> 
> 标签：android, android-intent, android-install-apk, android-broadcast

我有两个或多个具有我指定类别的应用程序，例如

```
 <category android:name="com.myapp.MY_CATEGORY"/> 
```

我可以通过以下方式获得所有具有此类别的软件包：

```
 final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
 mainIntent.addCategory("com.myapp.MY_CATEGORY");
 final List<ResolveInfo> pkgAppsList =getPackageManager().queryIntentActivities( mainIntent, 0); 
```

现在我想跟踪我的类别应用程序安装并从应用程序中删除，所以我制作了一个广播接收器，它将为我提供已安装或已删除应用程序的包名称，但是我如何使用包名称来控制应用程序的类别以确定这是否是不是我的应用程序。我可以为指定的类别应用程序制作广播接收器吗？如果不是，我如何从包名中获取类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-04T12:38:06.277

感谢 Rishabh Jain 的好答案，我对代码进行了一些小调整以便于使用

在 build.gradle 应用级别文件中：

```
 // jsoup
 implementation 'org.jsoup:jsoup:1.14.3' 
```

在清单中添加互联网权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

在活动/片段/对话框或任何地方：

```
txtCate = findViewById...
txtPublisher = findViewById...

// just in case you don't have applicationInfo yet:
List<ApplicationInfo> lists = context.getPackageManager()
    .getInstalledApplications(PackageManager.GET_META_DATA);
...

String packageName = applicationInfo.packageName;

new Thread(new Runnable() {
        @Override
        public void run() {
            try{
                String query_url = "https://play.google.com/store/apps/details?id="
                + packageName;  

                Document doc = Jsoup.connect(query_url).get();
                Elements link1 = doc.select("a[class=\"hrTbp R8zArc\"]");

                String s1 = link1.get(0).text();  // the publisher name
                String s2 = link1.get(1).text();  // the category

                // requireActivity().runOnUiThread... if using fragment
                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        txtCate.setText(s1);
                        txtPublisher.setText(s2);
                    }
                });
            } catch (Exception ignore){
                txtCate.setText("error");
                txtPublisher.setText("error");
            }
        }
}).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-16T13:20:15.623

我也面临同样的问题。上述查询的解决方案如下所述。

首先，下载Jsoup库或[下载jar文件。](https://jsoup.org/)

## 或者

将此添加到您的 build.gradle(Module: app) `implementation 'org.jsoup:jsoup:1.11.3'`

```
private class FetchCategoryTask extends AsyncTask<Void, Void, Void> {

    private final String TAG = FetchCategoryTask.class.getSimpleName();
    private PackageManager pm;
    //private ActivityUtil mActivityUtil;

    @Override
    protected Void doInBackground(Void... errors) {
        String category;
        pm = getPackageManager();
        List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);
        Iterator<ApplicationInfo> iterator = packages.iterator();
        //  while (iterator.hasNext()) {
        // ApplicationInfo packageInfo = iterator.next();
        String query_url = "https://play.google.com/store/apps/details?id=com.imo.android.imoim";  //GOOGLE_URL + packageInfo.packageName;
        Log.i(TAG, query_url);
        category = getCategory(query_url);
        Log.e("CATEGORY", category);

        // store category or do something else
        //}
        return null;
    }

    private String getCategory(String query_url) {

        try {
             Document doc = Jsoup.connect(query_url).get();
            Elements link = doc.select("a[class=\"hrTbp R8zArc\"]");
               return link.text();
        } catch (Exception e) {
            Log.e("DOc", e.toString());
        }
    }

} 
```

作为回报，您将获得应用程序公司名称和应用程序类别

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-07T12:12:11.070

您可以使用另一种方法。在您的应用程序清单中设置元信息，而不是为您的活动设置类别。请注意，无法再检索已删除的包信息（如果尚未使用标志 DONT_DELETE_DATA 删除应用程序）

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="your.package.name"
    android:versionCode="1"
    android:versionName="1" >

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">
        <meta-data
            android:name="meta-name"
            android:value="meta-value" />
    </application>
</manifest> 
```

添加广播接收器以跟踪软件包安装。检查包的元信息以查看您的值已经存在。

```
private BroadcastReceiver packageListener = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {

        Log.i(intent.getAction(), intent.getData().getEncodedSchemeSpecificPart());

        //Currently being installed or deleted package 
        String packageName = intent.getData().getEncodedSchemeSpecificPart();

        Object value = null;            
        try {
            ApplicationInfo appInfo = getPackageManager().getApplicationInfo(packageName,PackageManager.GET_META_DATA);

            //Get meta value if exits
            value = appInfo.metaData.get("meta-name");
        } catch (NameNotFoundException e) {
            Log.e(TAG, "exception occured", e);             
        }
        //check meta info if it is yours        
}
} 
```

如您所见，任何其他应用程序都可以在其清单中设置您的元数据，因此这不是识别您自己的应用程序的安全方法。最好的方法是检查 apk 签名是否都使用相同的证书签名。

```
private BroadcastReceiver packageListener = new BroadcastReceiver() {

    public void onReceive(Context context, Intent intent) {

        Log.i(intent.getAction(), intent.getData().getEncodedSchemeSpecificPart());

        String packageName = intent.getData().getEncodedSchemeSpecificPart();

        Signature[] signatures = null;
        try {
            PackageInfo packageInfo = getPackageManager().getPackageInfo(packageName,PackageManager.GET_SIGNATURES);

            signatures = packageInfo.signatures;

        } catch (NameNotFoundException e) {
            Log.e(TAG, "exception occured", e);
        }

        //check installed package signature if it matches
    }
} 
```

# vb.net - 设置文件夹权限时出错

> ID：14231763
> 
> 赞同：0
> 
> 时间：2013-01-09T09:15:53.280
> 
> 标签：vb.net, directory

使用 vb.net 设置拒绝访问特定文件夹。在这里我附上了我的代码。但是在我的代码中出现错误，例如从字符串到类型 long 的隐蔽是无效的

```
code
-----
           Dim ds1 As New TdeskTableAdapters.proc_checkuserrightsTableAdapter
            Dim dt1 As Tdesk.proc_checkuserrightsDataTable = ds1.GetData(ecode)

            For Each r1 As DataRow In dt1.Rows
                reqrights = r1("fld_reqrights").ToString
                approv_rights = r1("fld_approval").ToString
            Next

            If approv_rights = "n" Or approv_rights = "N" Then

                Dim FolderPath As String = "D:\Account\HA\" 'Specify the folder here

                Dim UserAccount As String = mailid \ pwd

                Dim FolderInfo As IO.DirectoryInfo = New IO.DirectoryInfo(FolderPath)
                Dim FolderAcl As New DirectorySecurity
                FolderAcl.AddAccessRule(New FileSystemAccessRule(UserAccount, FileSystemRights.FullControl, InheritanceFlags.ContainerInherit Or InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Deny))
                'FolderAcl.SetAccessRuleProtection(True, False) 'uncomment to remove existing permissions
                FolderInfo.SetAccessControl(FolderAcl)

            End If

 getting error in this line 

 Dim UserAccount As String = mailid \ pwd error mentioned in the above 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:19:44.187

所以 etiher `mailid`or`pwd`是 a`Long`而另一个是 a `String`。

我假设这`mailid`是一个`Long`：

```
Dim UserAccount As String = mailid.ToString() & "\" & pwd 
```

但是如果你`&`用来连接字符串，你也可以省略`ToString`.

另一种可读的方法是使用`String.Format`which 也隐式转换为字符串：

```
Dim UserAccount As String = String.Format("{0}\{1}", mailid, pwd) 
```

# php - 单元格在没有取消选择命令的情况下被取消选择

> ID：14231768
> 
> 赞同：0
> 
> 时间：2013-01-09T09:16:07.967
> 
> 标签：php, objective-c, noop

通常我典型的 didselectrowatindexpath 是这样的：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];
    BGUIBusinessCellForDisplay * cellBiz = (BGUIBusinessCellForDisplay *) cell;
    [BGDetailBusinessViewController detailButtonPressed:cellBiz.biz withNavController:self.navigationController];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

所以如果一行是selectec，打开一个新窗口什么的。然后快速取消选择该行。不取消选择该行意味着当我们取回之前选择的行时仍然存在。

但是，如果我检查我过去的代码，我发现该行已成功取消选择，即使我根本没有调用取消选择

我在各处放置了一个陷阱来跟踪取消选择该行的位置和时间：

```
-(void)viewDidAppear:(BOOL)animated
{

...

PO(self.tableView.indexPathForSelectedRow); //always show null here
while(false); 
```

}

原来 viewDidAppear，说我从细节返回后，self.tablevView.indexPathForSelectedRow 已经为空。所以该行已经被取消选择但是何时何地？

我在明显的地方放了更多的陷阱

```
-(void)tableView:(UITableView *)tableView willDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    while (false);//breakpoint here never called
}

-(void) tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *) indexPath
{
    while (false); //breakpoint here never called 
} 
```

这些都没有被调用。

我放弃。

现在还不算大，但这让我无休止地困惑

这是完整的 didSelectRowForIndexPath，因此您可以验证那里没有取消选择命令

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];

    if ([cell isKindOfClass:[BGUIBusinessCellForDisplay class]])
    {
        BGUIBusinessCellForDisplay * cellBiz = (BGUIBusinessCellForDisplay *) cell;
        [BGDetailBusinessViewController detailButtonPressed:cellBiz.biz withNavController:self.navigationController];
    }
    else if ([cell isKindOfClass:[BGAddMoreBusiness class]])
    {
        BGBusinessEditViewController * editBusiness = [[BGBusinessEditViewController alloc]init];
        [self.navigationController SafelyPushController:editBusiness];
    }
    PO(self.tableView.indexPathForSelectedRow); //not null here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:27:49.407

这是 的默认行为`UITableViewController`，请参阅 的文档`clearsSelectionOnViewWillAppear`：

> 此属性的默认值为`YES`。当 时`YES`，表格视图控制器在收到 `viewWillAppear:`消息时清除表格的当前选择。将此属性设置为`NO`保留选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:29:33.610

更新：`viewWillAppear`仍然选择按行。，`viewDidAppear`它不再是。他们之间有`[table reload]`。看起来像`[table reload]`取消选择该行。

# maven - Struts2 maven 原型

> ID：14231785
> 
> 赞同：0
> 
> 时间：2013-01-09T09:17:04.690
> 
> 标签：maven, struts2

我正在尝试使用Struts wiki 中指出的**struts2-archetype-blank**原型设置 Struts2 项目。

```
mvn archetype:generate -B  -DgroupId=tutorial -DartifactId=tutorial -DarchetypeGroupId=org.apache.struts -DarchetypeArtifactId=struts2-archetype-blank  -DarchetypeVersion=2.1.8 
```

但是我收到以下错误：

```
[INFO] Archetype repository missing. Using the one from [org.apache.struts:strus2-archetype-blank:2.3.8] found in catalog remote
Downloading: http://repo1.maven.org/maven2/org/apache/struts/struts2-archetype-
lank/2.1.8/struts2-archetype-blank-2.1.8.jar
[INFO] ------------------------------------------------------------------------<br/>
[INFO] BUILD FAILURE<br/>
[INFO] ------------------------------------------------------------------------<br/>
[INFO] Total time: 5.829s<br/>
[INFO] Finished at: Wed Jan 09 10:10:26 CET 2013<br/>
[INFO] Final Memory: 7M/17M<br/>
[INFO] ------------------------------------------------------------------------<br/>
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist <br/>(org.apache.struts:struts2-archetype-blank:2.1.8) -> [Help 1]<br/>
[ERROR] 
```

我是否需要在我的 Maven 配置中使用特定的存储库才能使用此原型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:51:23.593

我想你可以只使用

```
mvn archetype:generate -B  -DgroupId=tutorial -DartifactId=tutorial -DarchetypeGroupId=org.apache.struts -DarchetypeArtifactId=struts2-archetype-blank 
```

没有

> -DarchetypeVersion=2.1.8

要使用可用的最新版本（当前为 2.3.8），中央存储库中不提供 2.1.8。

# java - 如何在 GWT 中居中弹出/对话框窗口？

> ID：14231788
> 
> 赞同：5
> 
> 时间：2013-01-09T09:17:14.637
> 
> 标签：java, gwt

我有一个记录列表，每条记录都有一个打开设置窗口的按钮。我也有很多逻辑部分的偏好，每个部分都有一些带有按钮的记录。

因此，当我单击一个按钮时，会出现对话框窗口，但如果此按钮位于页面底部的某个位置（让它成为 300 条记录和按钮），我的对话框窗口就会出现在顶部。结果，我必须向上滚动才能找到这个窗口（有时它出现在浏览器边框后面）。

或者只是想象你配置了一些东西并向下滚动页面填充每个选项，最后你保存了你的配置，但有些字段填写不正确，并出现警告弹出窗口......在页面上的某个地方，但不在你的指针附近，甚至不在当前页面的中间。

我所有的对话框窗口都是从 DialogBox 继承的，所以我使用 super.show() 和 super.center()，但它并没有按我的意愿工作。

小信息补充：一些对话窗口从服务器接收数据，当接收到所有数据时，显示窗口的其余部分。我怀疑这有时会导致窗口出现在错误的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:29:40.037

你是对的，在对话框居中后编辑对话框的内容会导致它看起来不居中。为了解决这个问题，我在加载内容后调用了中心。您可以同时显示加载微调器或其他东西。

在某些情况下，您添加的小部件的大小无法立即计算。不幸的是，我发现处理这个问题的最好方法是添加小部件然后运行

```
Scheduler.get().scheduleDeferred(new Scheduler.ScheduledCommand() {
    public void execute() {
        dialogBox.center();
    }
}); 
```

（未经检查的代码）

这最终变得如此普遍，以至于我添加了一个调用`scheduleCenter`到我的 DialogBox 类的方法。

您也可以多次呼叫中心 - 每次都将重新运行中心计算。这会引起一些抽搐。如果您不想要任何晃动，那么您必须明确设置内部小部件的大小：

```
DialogBox dialogBox = new DialogBox();
dialogBox.add(myWidgetWhichWillLoadDataLater);
myWidgetWhichWillLoadDataLater.addStyleName(styleNameWhichSetsSizeExplicitly)
dialogBox.center(); 
```

您也可以调用 myWidgetWhichWillLoadDataLater.setHeight("300px") 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:39:41.733

```
DialogBox box = new DialogBox();
RootLayoutPanel.get().add(box);
RootLayoutPanel.get().setWidgetBottomHeight(box, 0, null, 0, null);
box.center();
box.show(); 
```

setWidgetBottomHeight() 方法来精确定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:10:39.327

```
DialogBox box = new DialogBox();
//Populate the box
box.center() 
```

# windows - 从 Windows exe 调用由 Windows DLL 导出的函数时的延迟或上下文转换时间

> ID：14231789
> 
> 赞同：0
> 
> 时间：2013-01-09T09:17:14.417
> 
> 标签：windows, windows-7, ftdi

我需要这方面的帮助。

当从 Windows exe 调用由 Windows DLL 导出的函数时，我看到延迟或上下文转换时间。

得出的结论是，大多数情况下，DLL 导出函数可以在 1 毫秒内完成。但有时从调用 DLL 函数到它返回的时间点的时间戳甚至是 600 毫秒。这会导致从属端的缓冲区溢出和数据丢失。实际上它是我正在使用的 USB 到 SPI 转换器。DLL 接收 USB 馈送并在另一端发出 SPI 数据。所以如果这个函数需要 600 毫秒才能返回，我会丢失 SPI 从机上的数据。

在分析 DLL 的功能时，它们所用的时间不超过 15 毫秒（尽管考虑到 15 MHz 的 SPI 速度，我们读取 4 个字节，但这个量级的 SPI 读取和写入也很多）。

那么是上下文转换时间吗？将 DLL 的代码合并到我的 exe 本身有帮助吗？我看到的唯一延迟只是在这个 DLL 的函数调用中。有什么方法可以导致不抢占，以便我的应用程序在 Win 7 机器上获得更多的 CPU 时间。我正在使用视觉工作室。

请建议。感谢您对此的帮助。

谢谢，萨库尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:22:31.963

我也偶然发现了“您是否调用了 SetThreadPriority 和 SetPriorityClass 来查看是否有帮助？您还可以查看 REALTIME_PRIORITY_CLASS。” 我仍然使用 REALTIME_PRIORITY_CLASS，但也相信它应该有所帮助。（目前，我还看到 -1 作为相关线程的优先级，通过执行

```
i8_priority = GetThreadPriority(
    pDpc->threadHandle );

                printf("\n 0 (threadHandle:0x%08X) i8_priority = %d \n ",  pDpc->threadHandle, i8_priority);

                SetThreadPriority(
    pDpc->threadHandle,
    2 );
) 
```

原始和执行 SetThreadPriority 后都只给出 -1。

不知道为什么？如果返回任何错误代码，则需要查看错误代码。

通过查看 USB 跟踪，我们看到延迟的一个原因是设备有时无法看到硬件的响应，因此需要 600 毫秒甚至高达 4 秒。所以这正在由 FPGA 小伙子研究。这与你的 IO 处理点是由 DLL 完成的。。？

我想尝试线程和类优先级的东西，看看他们应该有多大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:37:30.000

令人怀疑的是，调用 DLL 会导致 600 毫秒。向我们展示 DLL 函数的代码，这可能会有所帮助。这种延迟更可能的原因是其中之一。

1.  您的 DLL 函数实际上正在做一些有时需要很长时间的事情。I/O 操作、日志记录、内核对象等待等......您没有向我们展示任何代码，所以这只是一个猜测，但很有可能。

2.  您的程序并不是计算机上唯一运行的东西。如果您的应用程序占用了整个 CPU 内核（或整个处理器），那么它当然会被中断，以便系统上的其他线程可以运行。你有没有打电话给[SetThreadPriority](http://msdn.microsoft.com/en-us/library/ms686277%28VS.85%29.aspx)和[SetPriorityClass](http://msdn.microsoft.com/en-us/library/ms686219%28v=vs.85%29.aspx)看看是否有帮助？您还可以查看[REALTIME_PRIORITY_CLASS](http://msdn.microsoft.com/en-us/library/ms685100%28v=vs.85%29.aspx)。

3.  内存不足和代码被分页进出。

您是否使用任何分析工具分析了您的 DLL，以了解为什么需要这么长时间？

# android - 在一天中的特定时间之间使用重复警报运行服务

> ID：14231790
> 
> 赞同：0
> 
> 时间：2013-01-09T09:17:18.740
> 
> 标签：android

我有一项使用重复警报每 1 分钟运行一次的服务。但我只想在上午 9.30 到下午 4 点和晚上 8 点到上午 2.30（时区是印度标准时间-IST）之间运行此服务，并且每 1 分钟运行一次。

例如 ：

```
 UTC Time
StartTime   EndTime
22:00   05:00
23:50   06:12
00:00   06:00
01:00   09:00
01:00   05:30
01:15   08:00
01:20   08:00
01:30   07:00
02:30   09:00
03:00   09:30
03:45   10:00
04:00   09:00
06:00   15:00
07:00   14:25
07:00   15:00
07:00   21:00
07:30   15:30
07:55   16:35
08:00   16:30
9:00    15:00
13:00   20:00
14:00   20:00
07:30   10:30 
```

如何仅在上述 UTC 时间之间每 1 分钟运行一次服务？我应该使用服务在 24 小时内运行并在服务检查条件内执行逻辑，还是可以使用重复警报本身进行管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:54:32.580

当您想停止警报时，使用与创建警报管理器相同的意图取消警报管理器。

# php - php爆炸不工作不合理

> ID：14231791
> 
> 赞同：0
> 
> 时间：2013-01-09T09:17:19.390
> 
> 标签：php, function, path, root, explode

这是“connect.php”代码：

```
<?php
  if(!require_once(explode('root',$_SERVER['DOCUMENT_ROOT'])[0].'root/core/function.php')) die('file not found'); 
```

在我转移到新服务器之前，代码运行良好

现在无论我尝试多少次仍然显示错误：

```
[09-Jan-2013 17:05:39] PHP Parse error:  syntax error, unexpected '[' in /home/wwwroot/root/core/connect.php on line 2
[09-Jan-2013 17:10:10] PHP Parse error:  syntax error, unexpected '[' in /home/wwwroot/root/core/connect.php on line 2 
```

我试图打开一个新的 php 文件来测试它：

```
<?php
print_r(explode('root',$_SERVER['DOCUMENT_ROOT']));
?> 
```

结果应该有效！

```
Array (
       [0] => /home/public_html/
       [1] => /core/
      ) 
```

搞什么鬼！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:21:59.320

您在服务器上的 PHP 版本不支持`explode('root',$_SERVER['DOCUMENT_ROOT'])[0]`. 这仅在 PHP 5.4 中添加

您可以将您的分解结果分配给一个变量，然后像常规数组一样访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:24:50.090

什么是新的 PHP 版本？

你可以尝试这样的事情：

```
$pathToCheck = explode("root",$_SERVER["DOCUMENT_ROOT"]);
if(count($pathToCheck) <= 1 || !require_once($pathToCheck[0]."root/core/function.php"))
    die("file not found"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T22:00:10.743

它支持 4+ php 版本，如 4.1 更多信息 [http://www.w3schools.com/php/func_string_explode.asp](http://www.w3schools.com/php/func_string_explode.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:21:22.850

试试这个：

```
$path = explode ('root', $_SERVER['DOCUMENT_ROOT']);
require_once $path[0]; 
```

# php - 时间计算类问题

> ID：14231792
> 
> 赞同：0
> 
> 时间：2013-01-09T09:17:27.387
> 
> 标签：php, time

我创建了下面的类，计算时间范围之前的时间、时间范围内的时间以及时间范围旁边的时间。

更具体地说，我创建了一个出租车预订系统。计程车一日游收费正常，夜游收费双倍。

网站所有者可以设置当晚房价开始和结束的时间。举个例子，假设普通**出租车的夜间收费**从**00:00开始，到****05:00**结束，**小巴**出租车的夜间收费从**23:00开始，到****06:00**结束。

在客户下订单时，谷歌地图计算行程持续时间，所以我们也假设行程是两个小时。

根据这种情况，在**出租车**的情况下，最终用户必须支付**1 小时**的正常费率和**1 小时**的双倍费率。如果是**小巴**，最终用户必须支付**2 小时**的**双倍费用**，而小巴的夜间费用从**23:00**开始。

在我的班级中，在当前状态下，第一个示例运行良好，但第二个示例错误，我找不到原因。

```
<?php
class tm
{
    private $start_hour     =   0;    //  The hour that the trip starts
    private $start_minute   =   0;    //  The minute that the trip starts
    private $from_hour      =   0;    //  The hour that night rates start
    private $from_minute    =   0;    //  The minute that night rates start
    private $to_hour        =   0;    //  The hour that night rates ends
    private $to_minute      =   0;    //  The minute that night rates ands
    private $duration       =   0;    //  Total trip duration
    private $night_duration =   0;    //  The overall night trip time in minutes
    private $day_duration   =   0;    //  The overall day trip time in minutes
    private $totalHours     =   0;    //  The total duration hours
    private $totalMinutes   =   0;    //  The total duration minutes
    private $extraMinutes   =   0;    //  Extra minutes to calculate

    /**
     * Construct duration calculator class
     * 
     * @param   $start_date     Timestamp   |   The trip start date/time as a timestamp
     * @param   $duration       Seconds     |   The duration time in seconds
     * @param   $night_start    Timestamp   |   The date/time that night rates start as a timestamp
     * @param   $night_end      Time        |   The date/time that night rates end as a timestamp
     */
    public function __construct($start_date = '', $duration = 1, $night_start = '', $night_end = '')
    {
        $this->start_hour   =   date('H', $start_date);
        $this->start_minute =   date('i', $start_date);
        $this->duration     =   ($duration / 60);               //  Convert seconds to minutes
        $this->from_hour    =   date('H', $night_start);
        $this->from_minute  =   date('i', $night_start);
        $this->to_hour      =   date('H', $night_end);
        $this->to_minute    =   date('i', $night_end);

        $this->calculate();
    }

    private function calculate()
    {
        $this->getHoursMinutes();
        $current_hour   =   $this->start_hour % 24;
        $is_first_loop  =   true;

        for($minute = 0; $minute < $this->duration; $minute++)
        {
            $current_minute     =   ($this->start_minute + $minute) % 60;

            if($current_minute  ==  0 && $is_first_loop == false)
            {
                $current_hour   =   ($current_hour + 1) % 24;
            }
            else if($current_minute == 59)
            {
                $is_first_loop = false;
            }

            if(($current_hour >= $this->from_hour && $current_hour < $this->to_hour))
            {
                $this->night_duration++;
            }
            else
            {
                $this->day_duration++;
            }
        }
    }

    private function getHoursMinutes()
    {
        $this->totalHours   =   round($this->duration / 60 / 60, 0);
        $this->totalMinutes =   round($this->duration / 60, 0);
        $this->extraMinutes =   round(($this->duration / 60) % 60, 0);
    }

    public function getDayDuration($inSeconds = true)
    {
        if($inSeconds == true)
        {
            return $this->day_duration * 60;
        }
        else
        {
            return $this->day_duration;
        }
    }

    public function getNightDuration($inSeconds = true)
    {
        if($inSeconds == true)
        {
            return $this->night_duration * 60;
        }
        else
        {
            return $this->night_duration;
        }
    }
}
?> 
```

基于上面的例子，假设我有以下代码：

```
<?php
    $trip_start_timestamp    =   strtotime('01/09/2013 23:00');
    $duration                =   strtotime('01/10/2013 01:00') - $trip_start_timestamp;
    $night_start             =   strtotime('00:00:00');            // This is the time for taxi start night rate
    $night_end               =   strtotime('05:00:00');            // This is the time for taxi end night rate

    $taxi       =    new tm($trip_start_timestamp, $duration, $night_start, $night_end);

    echo "TAXI NIGHT DURATION<br />";
    echo "Day : " . $taxi->getDayDuration() . '<br />';
    echo "Night : " . $taxi->getNightDuration() . '<br />';

    $trip_start_timestamp    =   strtotime('01/09/2013 23:00');
    $duration                =   strtotime('01/10/2013 01:00') - $trip_start_timestamp;
    $night_start             =   strtotime('23:00:00');            // This is the time for taxi start night rate
    $night_end               =   strtotime('06:00:00');            // This is the time for taxi end night rate

    $miniBus    =    new tm($trip_start_timestamp, $duration, $night_start, $night_end);

    echo "<br />MINI BUS NIGHT DURATION<br />";        
    echo "Day : " . $miniBus->getDayDuration() . '<br />';
    echo "Night : " . $miniBus->getNightDuration() . '<br />';
?> 
```

结束上述代码的结果如下：

```
TAXI NIGHT DURATION  
Day : 3600  
Night : 3600  

MINI BUS NIGHT DURATION  
Day : 3600  
Night : 3600 
```

如您所见，上面的结果是错误的，因为小巴夜间费率从**23:00**开始，所以结果应该是 Day: **0 Night: 7200**

最后，请注意我在该行中应用了一些修改：

```
if(($current_hour >= $this->from_hour && $current_hour < $this->to_hour)) 
```

因为我相信问题是这条线。不幸的是，我还没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:05:09.327

在伪代码中：

```
$now = time(); // = Unit Time Stamp
$end = getEndOfTripTime(); // = Unix Time Stamp
$isnight = isNightRate($now);

if($isnight)
{
  if(getNextNightRateEnd($now) > $end)
  {
    $NightRateSeconds = $end - $now;
  }
  else
  {
    $NightRateSeconds = getNextNightRateEnd($now) - $now;
    $DayRateSeconds = $end - getNextNightRateEnd($now);
  }
}
else
{
   // etc.
} 
```

我假设您可以填写其余部分`!$isnight`。

您也可以将其`$now`视为`$start`( `= getStartOftriptime()`) 来提前计划旅行。

# twilio - Twilio 外拨电话录音

> ID：14231794
> 
> 赞同：0
> 
> 时间：2013-01-09T09:17:30.467
> 
> 标签：twilio, phone-call, recording, outbound

使用 Twilio，我们可以拨打电话：

```
curl -X POST 'https://api.twilio.com/2010-04-01/Accounts/ACc1....4658a/Calls.json' \
-d 'From=%2B44987654321' \
-d 'To=%2B123456789' \
-d 'Url=http%3A%2F%2Fourdomain.com%2Ftwiml.php%3Faction%3Dcall_is_taken' \
-u ACc1....4658a:{AuthToken} 
```

没关系，但是当有人拿起电话时，我们的响应 twiml 代码（会改变）只是：

```
<Response><Say>Thank you for picking up.</Say></Response> 
```

我们可以[`<Record>`在我们的 Twiml](https://www.twilio.com/docs/api/twiml/record)代码中添加一个来开始录制一个部分，但我们想要录制整个呼叫（包括 Twiml 语音和人声），从出站呼叫的 START 到 END。

我可以找到`<Dial record="true">`，但那是为了在通话之外打电话。我确实尝试`<Response record="true">`过，但这也没有给我任何记录 SID，反正也没有记录。

如何记录整个通话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:06:39.237

我自己想通了。这将记录整个对话：

```
curl -X POST 'https://api.twilio.com/2010-04-01/Accounts/ACc1....4658a/Calls.json' \
-d 'From=%2B44987654321' \
-d 'To=%2B123456789' \
-d 'Record=true' \
-d 'Url=http%3A%2F%2Fourdomain.com%2Ftwiml.php%3Faction%3Dcall_is_taken' \
-u ACc1....4658a:{AuthToken} 
```

唯一添加的是`-d 'Record=true'`参数。不过，我在文档中找不到它。

# android - 启用wifi时广播接收器输出接入点数据

> ID：14231798
> 
> 赞同：2
> 
> 时间：2013-01-09T09:17:40.000
> 
> 标签：android, wifi, broadcast, wifimanager

```
public class broadcaster extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
        WifiInfo wifiInfo = wifiManager.getConnectionInfo();
        int ipAddress = wifiInfo.getIpAddress();
        int linkSpeed = wifiInfo.getLinkSpeed();
        String BSSID = wifiInfo.getBSSID();
        String SSID = wifiInfo.getSSID();
        String MAC = wifiInfo.getMacAddress();
        System.out.println("IP - "+ ipAddress +" |MAC - "+ MAC +" |Speed - "+ linkSpeed +" |BSSID - "+ BSSID +" |SSID - "+ SSID);
    }
} 
```

我可以访问 wifiManager 的方法，但不能访问 wifiInfo 的方法，因为它始终为空。我不明白为什么 wifiInfo 为空。我想获取所有 wifiInfo 详细信息（IP 地址、链接速度、SSID 等）并将其写入文件。

为什么 wifiInfo 为空，如何解决？

# jaxb - @XmlTransient 标记值在解组时返回 null

> ID：14231799
> 
> 赞同：1
> 
> 时间：2013-01-09T09:17:40.840
> 
> 标签：jaxb, jaxb2

我`@XmlTransient`用于在输出 XML 文件中隐藏一些字符串。它在编组时工作正常，并且 XML 很好。
但是，当我解组 XML 时，`@XmlTransient`标记的值显示为 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:46:11.437

**`@XmlTransient`做什么**

`@XmlTransient`将该属性标记为未映射，因此它被排除在编组和解组之外。

*   [http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html](http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html)

* * *

**你能做什么**

如果您只想从编组中排除该值，您可以考虑使用`XmlAdapter`

***XmlAdapter（字符串适配器）***

将`XmlAdapter`始终返回`""`编组操作，而 JAXB 实现将返回一个空元素。如果您使用[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)作为您的 JAXB 实现，您可以返回 null 以完全消除节点（请参阅：[http](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html) ://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html ） .

```
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class StringAdapter extends XmlAdapter<String, String> {

    @Override
    public String marshal(String string) throws Exception {
        return null;
    }

    @Override
    public String unmarshal(String string) throws Exception {
        return string;
    }

} 
```

***人***

```
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement(name="Person")
@XmlAccessorType(XmlAccessType.FIELD)
public class Person {

    String name;

    String address;

    @XmlJavaTypeAdapter(StringAdapter.class)
    String password;

} 
```

***输入.xml***

```
<Person>
    <name> some name </name>
    <password> some password </password>
    <address> some address </address>
</Person> 
```

***演示***

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Person.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14231799/input.xml");
        Person person = (Person) unmarshaller.unmarshal(xml);

        System.out.println(person.password);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(person, System.out);
    }

} 
```

***输出***

```
 some password 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Person>
    <name> some name </name>
    <address> some address </address>
    <password></password>
</Person> 
```

# android - 单击电子邮件链接时出现不支持的操作错误

> ID：14231803
> 
> 赞同：5
> 
> 时间：2013-01-09T09:17:53.013
> 
> 标签：android

我已经在 xml 中提供了指向 TextView 的电子邮件链接，但是当我单击 TextView 时，它显示不支持的操作错误，如何将活动链接放在 textview 中的电子邮件上？

这是我的 string.xml 文件的代码：

```
 <resources>
           <string name="emailLink"><a href="mailto:info@knowledgewoods.in">info@knowledgewoods.in</a></string>
     <resources> 
```

和 mylayout.xml

```
 <TextView 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:textSize="15dp"
         android:textColor="@color/text_color"
         android:layout_marginTop="10dp"
         android:id="@+id/text_email"
         android:autoLink="email"
         android:text="@string/emailLink"/> 
```

我在 android 2.2 及更高版本中运行我的应用程序。

请帮助我...谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T09:21:24.673

当您尚未将主帐户添加到您的手机时，可能会发生这种情况。您必须使用您的设备配置您的谷歌帐户。转到您设备中的 gmail 应用程序并使用您的 gmail 帐户登录。我有同样的问题，这样做之后问题就解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-25T13:23:26.343

根据我的测试，当意图的 URI (from `setData()`) 不匹配任何内容并且您在官方 Android 模拟器之一上运行时，就会出现此问题。这似乎不会在真实设备上发生，因此它不应该是现实世界的问题。

# php - 在数组中搜索值并比较/获取下一个和上一个值

> ID：14231807
> 
> 赞同：0
> 
> 时间：2013-01-09T09:17:57.643
> 
> 标签：php, arrays, multidimensional-array, foreach

`$arr`我有一个看起来像这样的数组：

```
array(3) {
  [0]=>
  array(2) {
    ["food"]=>
    string(5) "Toast"
    ["age"]=>
    string(2) "28"
  }
  [1]=>
  array(2) {
    ["food"]=>
    string(5) "Pizza"
    ["age"]=>
    string(2) "45"
  }
  [2]=>
  array(2) {
    ["food"]=>
    string(5) "Steak"
    ["age"]=>
    string(2) "33"
  }
} 
```

我也有一个变量`$curr_age = 45;`。

现在我正在寻找一种方法来搜索数组，直到找到`$arr[$i]["age"] = $curr_age`然后停止。
另外，我如何从下一个和上一个数组中获取食物（例如 Toast 和 Steak）？

为了搜索数组，我有以下代码：

```
$i = 0;

foreach( $arr as $array ){ 

    if( $curr_age == $arr[$i]["age"] ) {

        $next = $arr[$i++]["food"];
        $prev = $arr[$i--]["food"];

    }

    $i++;

 } 
```

正如您可能想象的那样，这没有按预期工作，我不知道为什么。令我印象深刻的一件事是，`foreach`循环实际上只用于递增`$i`并且`$array`从未使用过，但我无法理解如何解决这个问题或如何执行上述任务。

我想我已经发现 PHP 中没有“内置”方式来执行此操作，需要一个额外的函数，但同样：我不知道该函数需要做什么。我什至不确定这个说法是否属实。

我已经尝试过`array_search`，然后简单地将密钥递增/递减 1，但我认为这不起作用有两个原因。首先，似乎`array_search`无法处理那种类型的数组，其次，键可以是不连续的，所以这样做`$x++`或`$x--`似乎不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:16:09.983

您的数组索引已经是数字，因此实际上不需要维护递增索引，只需使用 foreach 循环中的键分配，并确保在尝试访问它们之前测试上一个和下一个键确实存在

```
foreach ($arr as $k => $v) {
    if ($v['age'] == $curr_age) {
        if (isset($arr[$k-1])) {
            $prev = $arr[$k-1];
        }
        if (isset($arr[$k+1])) {
            $next = $arr[$k+1];
        }
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:22:25.880

```
$length = count($array);
for ($i = 0; $i < $length; $i++) {
  if( $curr_age == $array[$i]["age"] ) {
    if (i<$length){
        $next = $array[$i+1]["food"];
    }
    if (i>0){
        $prev = $array[$i-1]["food"];
    }
  }
} 
```

[循环数组的答案](https://stackoverflow.com/questions/1293896/php-array-printing-using-a-loop)+您的代码=已解决。正如 Mark Ba​​ker 所指出的，如果在分配之前没有检查数组，它们可能会得到错误的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:36:06.397

试试这个，比较 foreach 在特定位置分配的元素（这里是 $array ）进行比较而不是 $arr[$i]["age"]

```
$i=0;

foreach($arr as $array)
{
    if($array['age'] == $curr_age)
    {
        $Previous = $arr[$i-1]['food'];
        $Next = $arr[$i+1]['food'];
        break;
    }

    $i++;
} 
```

# android - 如何将 TestNG 集成到 Android 项目中？

> ID：14231811
> 
> 赞同：4
> 
> 时间：2013-01-09T09:18:13.467
> 
> 标签：android, unit-testing, testing, testng

给那些人的简短问题。

如果我从头开始，我究竟如何将 TestNG 单元测试添加到我现有的 Android 项目中并运行它们？

我还使用 IntelliJ（我不知道 Maven Android）来运行测试。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:35:24.757

你可以使用 testNG 来运行你想要的任何类型的测试用例。

您可以只创建一个测试包，然后创建一个测试类来开始编写您的测试。假设您的类名为 AndroidTests.java，您需要导入 testng 并开始编写测试，如下所示：

```
@Test   
public void test1() {       
 //Test logic here
 assert someAssert; 
} 
```

然后，当您有足够的测试用例时，您需要创建您的套件：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="My smoke suite" verbose="1" >
  <test name="My android tests">
    <classes>
      <class name="test.android.Androidtests"/>
    </classes>
  </test>
</suite> 
```

最后从 eclipse 或使用命令行运行这个套件。

请参阅 testNG 文档中的更多信息：

[http://testng.org/doc/documentation-main.html](http://testng.org/doc/documentation-main.html)

并查看 Android 测试文档：

[http://developer.android.com/tools/testing/testing_android.html](http://developer.android.com/tools/testing/testing_android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-18T09:33:59.623

您只需将以下依赖项添加到您的 gradle 文件中：

```
androidTestCompile 'org.assertj:assertj-core:2.0.0'
 androidTestCompile 'org.testng:testng:6.9.10' 
```

# watir - 如何使用 Watir 访问没有属性的子文本

> ID：14231812
> 
> 赞同：3
> 
> 时间：2013-01-09T09:18:22.843
> 
> 标签：watir, watir-webdriver

在下面的 html

```
<p>
<strong>Name:</strong>
12121
</p> 
```

如何使用 Watir 访问“12121”文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:57:31.367

要获取潜文本 12121，请使用正则表达式。
gsub 执行搜索和替换操作。它将搜索所有非数字字符（/\D/）并替换为给定的字符串。在这种情况下，我们不提供任何要替换的字符串。

=browser.p.text.gsub(/\D/, "")
=> "12121"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:32:23.230

虽然我认为解析段落元素文本是最简单的，但如果你真的只想获取文本节点，你可以使用 javascript。

如果您知道文本将始终是段落的最后一部分，您可以这样做：

```
browser.execute_script("return arguments[0].lastChild.nodeValue", browser.p)
#=> "12121" 
```

如果结构可以改变并且你想要段落元素的所有文本，没有子元素的文本，你可以概括它：

```
get_text_node_script = <<-SCRIPT
    var nodes = arguments[0].childNodes;
    var result = "";
    for(var i = 0; i < nodes.length; i++) {
        if(nodes[i].nodeType == Node.TEXT_NODE) {
            result += nodes[i].nodeValue; 
        }
    }   
    return result
SCRIPT

browser.execute_script(get_text_node_script, browser.p)
#=> "12121" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:31:06.963

`browser.p.text`返回`"Name: 12121"`和`browser.p.strong.text`返回`"Name:"`。

```
> browser.p.text
 => "Name: 12121" 

> browser.p.strong.text
 => "Name:" 
```

要获得`12121`一个（或多个）[String](http://www.ruby-doc.org/core-1.9.3/String.html)方法，可以使用，例如[String#split](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-split)然后[String#lstrip](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-lstrip)。

```
> long = b.p.text
 => "Name: 12121" 

> short = b.p.strong.text
 => "Name:" 

> long.split(short)
 => ["", " 12121"] 

> long.split(short)[1]
 => " 12121" 

> long.split(short)[1].lstrip
 => "12121" 
```

# debugging - ollydbg 操作码跟踪

> ID：14231815
> 
> 赞同：2
> 
> 时间：2013-01-09T09:18:31.453
> 
> 标签：debugging, assembly, reverse-engineering, disassembly, ollydbg

有没有办法保存正在执行的操作码（而不是命令）的跟踪？我想比较不同的跟踪运行，并且使用操作码跟踪（而不是评估的命令）会给出更可靠的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:56:01.777

~~显然 OllyDbg 2.0 可以：[https://reversengineering.wordpress.com/category/tools/debugger/](https://reversengineering.wordpress.com/category/tools/debugger/)~~

~~我不知道经典的 OllyDbg 是否可以做到这一点。但是这个命中跟踪插件可能是你需要的：[http ://securitylabs.websense.com/content/Blogs/3144.aspx](http://securitylabs.websense.com/content/Blogs/3144.aspx)~~

编辑：不相关，因为问题是如何获取操作码，而不是命令跟踪。对不起！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-28T19:08:50.213

是的你可以

`view`>`Run trace`

在运行跟踪窗口中右键单击并选择`Log to file`

选择一个文件名。

直到您跟踪您的文件将完成。

# javascript - Firefox 版本 15 中的 Extjs 4.1.0 门户示例滚动问题

> ID：14231816
> 
> 赞同：0
> 
> 时间：2013-01-09T09:18:35.807
> 
> 标签：javascript, extjs, extjs4, portal

我正在为我的仪表板使用 Extjs [Portal](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/portal/portal.html)。当它滚动时，传送门项目的标题会消失几秒钟。它只发生在 Firefox 版本 15 上。这个问题是否有任何解决方案。

[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/portal/portal.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/portal/portal.html)

# javascript - 在javascript中获取对象的变量

> ID：14231818
> 
> 赞同：0
> 
> 时间：2013-01-09T09:18:42.087
> 
> 标签：javascript, json, parsing

> **可能重复：**
> [如何列出 javascript 对象的属性](https://stackoverflow.com/questions/208016/how-to-list-the-properties-of-a-javascript-object)

我正在制作一个`JSON object`从某些服务接收 a 的应用程序。使用解析此对象`JSON.parse()`并`JavaScript Object`返回 a。

有什么方法可以让我找出`variables`物体内部的不同存在吗？

例子：

```
var some_object
{
    var a: "first"
    var b: "second"
} 
```

我需要想办法从这个对象中获取 a 和 b 的名称`some_object`

JavaScript中是否有任何预定义的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:21:50.337

这可以解决问题：

```
for (var key in some_object) { 
    console.log(key, some_object[key]);
} 
```

但是，您需要以不同的方式初始化对象：

```
var some_object = {
    a: "first",  // Note: Comma here,
    b: "second", // And here,
    c: "third"   // But not here, on the last element.
} 
```

结果：

```
a first
b second 
```

因此，在我的`for`循环中，`key`是值的名称，并且`some_object[key]`是值本身。

如果您已经知道对象中的变量（'名称），您可以像这样访问它们：

```
console.log(some_object.a) // "first";
//or:
console.log(some_object["b"]) // "second"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:21:04.660

你可以这样做：

```
var myObject = {
  abc: 14, 
  def: "hello"
}

for (var i in myObject ) { 
  alert("key: " + i + ", value: " + myObject[i]) 
} 
```

在这种情况下`i`，将遍历 myObject (`abc`和`def`) 的键。有了`myObject[i]`你就可以得到当前键的值`i`。

请注意，您的对象定义是错误的。代替

```
var a: "first" 
```

你只需要使用

```
a: "first" 
```

物体内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:23:12.497

您应该能够调用`some_object.a`get `a`，`some_object.b`to get`b`等。

不过，您不应该`var`在这样的物体内部看到。对象表示法往往如下所示：

```
var some_object = {
    a: "first",
    b: "second"
} 
```

注意，没有`var`声明，并且在对象的每个属性之后使用逗号，除了最后一个。

# matlab - 计算相关高斯随机变量的积分

> ID：14231821
> 
> 赞同：1
> 
> 时间：2013-01-09T09:18:52.967
> 
> 标签：matlab, numerical-methods, normal-distribution

令 (X,Y) 为均值为 0 且协方差矩阵为 S 的二维正态随机变量。进一步令 Q = [0,1]x[0,1] 为单位平方，并均匀地对其进行网格化每边有 N 个网格点。结果，我们得到 Q 是 N x N 个正方形的并集。我需要在 MATLAB 中计算每个这样的正方形的 (X,Y) 的边际，即我需要计算一个矩阵 I ，其中元素是形式的 N x N 积分

![整数1](../Images/534c2f4163e52eaa586ed7da40cc7116.png)

其中![七杰](../Images/909869d2b85a827fa98907755692d384.png)是分区的元素。贪心的方法是运行两个循环：在 i 上和在 j 上，并以数值方式计算这些积分中的每一个。但是，如果 S 是对角线，则可以做更有效的技巧：首先计算 X 的分布（这将是一个行向量），然后是 Y 的分布（列向量），最后取它们的 Kronecker 乘积，即将产生正确的矩阵 I。

但是，如果存在相关性，即 S 不是对角矩阵，则这种技巧不起作用。在这种情况下是否有必要运行 2 个循环，或者有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:49:15.963

多元正态 CDF 不容易计算。但是，使用您上面提到的内容，双变量情况比单变量情况更容易和更准确。它有 FORTRAN（见下文）和纯 Java 库：[http ://www.iro.umontreal.ca/~simardr/ssj/indexe.html](http://www.iro.umontreal.ca/~simardr/ssj/indexe.html)

更一般地说，自 1980 年代以来，WSU 教授 (Alan Genz) 一直在研究如何在数值上进行此积分和其他多元积分。其他人实现的所有代码都来源于他的算法和研究。他的代码可以计算维度高达 1000 的多元正态分布和 T 分布的 CDF 和期望。

[http://www.math.wsu.edu/faculty/genz/software/software.html](http://www.math.wsu.edu/faculty/genz/software/software.html)

我还编写了代码来从 Java 调用这些子例程：[Compute the multivariate normal CDF in Java](https://stackoverflow.com/questions/14178759/compute-the-multivariate-normal-cdf-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:50:48.943

不，通常没有简单的方法来计算多元正态分布的 CDF - 请参阅：

[http://en.wikipedia.org/wiki/Multivariate_normal_distribution#Cumulative_distribution_function](http://en.wikipedia.org/wiki/Multivariate_normal_distribution#Cumulative_distribution_function)

如果您有 MATLAB Statistics Toolbox，则可以使用 mvncdf：

[http://www.mathworks.com/help/stats/mvncdf.html](http://www.mathworks.com/help/stats/mvncdf.html)

有可用的 C/C++ 版本，您可能可以 MEX：

[C、C++ 或 Fortran 中的多元正态 cdf](https://stackoverflow.com/questions/11109465/multivariate-normal-cdf-in-c-c-or-fortran)

或者，如果你想在 MATLAB 中做所有事情，试试积分 2，它有很多优化。

# applescript - 使用 Applescript 备份文件夹

> ID：14231822
> 
> 赞同：1
> 
> 时间：2013-01-09T09:18:54.800
> 
> 标签：applescript, directory

我是 Applescript 的新手，正在尝试整理一个简单的脚本来在运行时备份一些文件夹。我的脚本如下：

```
on run
    tell application "Finder"
        set backupFolder to make new folder at "BACKUP" with properties {name:(year of (current date) as string) & "-" & (month of (current date) as integer as string) & "-" & (day of (current date) as string)}
        duplicate folder "~/Test" to backupFolder
    end tell
end run 
```

但是，当我运行脚本时，我收到一条错误消息：

```
Finder got an error: Can’t set folder "2013-1-9" of disk "BACKUP" to folder "~/Test". 
```

这似乎是一个微不足道的问题，但我不知道如何解决它。谁能让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:59:37.637

用以下内容替换您的重复...行：

```
duplicate folder POSIX file "~/Test" to backupFolder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:59:52.383

AppleScript大部分时间都不理解`"~/Test"`（甚至不理解）。`"/Users/username/Test/"`

```
set d to (year of (current date) as text) & "-" & (month of (current date) as integer as text) & "-" & (day of (current date) as text)
tell application "Finder"
    set f to make new folder at POSIX file "/Users/username/Backups/" with properties {name:d}
    duplicate POSIX file "/Users/username/Test/" to f
end tell 
```

`/Users/username`可以替换为`system attribute "HOME"`。您也可以`"Macintosh HD:Users:username:Test"`直接使用 HFS 路径（如 ）。

不过，使用 shell 脚本会更容易：

```
d=~/Backup/$(date +%Y-%m-%d)/
mkdir -p $d
cp -R ~/Test $d 
```

# php - 如何根据日期和随机返回颜色值？

> ID：14231823
> 
> 赞同：4
> 
> 时间：2013-01-09T09:18:59.767
> 
> 标签：php, arrays, date, colors

设计师想出了一个相当奇怪的想法或一个色轮（有 36 种颜色）。

**我需要编写一个返回`one`颜色但基于`date`.**

> **网站应该如何工作**
> 根据当前日期（您在下图中看到德国日期），网站应该有这种背景颜色。

所以在“1 月 1 日”，第一种颜色（蓝紫色或你可能称之为的）应该是首页的背景。10天后下一个颜色。所以在一年内，所有 36 种颜色都应该按轮子的顺序循环。

我想在此之前，中级程序员可以帮助我，我不知道该怎么做。

![](../Images/23d86dbfb463c589e3761dea05a8dd75.png)

**但它变得稍微复杂**
了设计师希望网站的每个页面也有不同的颜色。所以想象一下这个网站有 10 个页面（主页、关于、随便、画廊），每个页面都应该有“最接近”的 10 种颜色之一。

*哇，即使我在解释它时也不明白。*

所以我想做的是创建一个函数，该函数从基于*当前日期**的 10 种颜色池中返回**随机颜色*。

 **因此，在“1 月 1 日”，我希望将以下颜色推送到数组中并随机返回其中一种颜色。

```
function colorWheel($alpha) { // 36 colors
    $colors = array(
        rgba(170, 207, 172, 1),
        rgba(180, 211, 164, 1),
        rgba(189, 214, 145, 1),
        rgba(196, 217, 134, 1),
        rgba(206, 222, 124, 1),
        rgba(214, 226, 124, 1),
        rgba(226, 233, 124, 1),
        rgba(234, 235, 122, 1),
        rgba(236, 235, 120, 1),
        rgba(241, 231, 118, 1),
        rgba(240, 224, 118, 1),
        rgba(240, 216, 117, 1),
        rgba(237, 208, 115, 1),
        rgba(233, 199, 112, 1),
        rgba(230, 191, 110, 1),
        rgba(226, 177, 115, 1),
        rgba(221, 162, 110, 1),
        rgba(218, 153, 116, 1),
        rgba(215, 141, 112, 1),
        rgba(209, 140, 120, 1),
        rgba(203, 138, 119, 1),
        rgba(197, 136, 126, 1),
        rgba(191, 138, 134, 1),
        rgba(186, 142, 144, 1),
        rgba(181, 145, 157, 1),
        rgba(176, 151, 170, 1),
        rgba(170, 135, 178, 1),
        rgba(164, 159, 189, 1),
        rgba(166, 167, 194, 1),
        rgba(166, 177, 201, 1),
        rgba(166, 182, 204, 1),
        rgba(163, 186, 201, 1),
        rgba(164, 190, 196, 1),
        rgba(166, 196, 191, 1),
        rgba(167, 198, 185, 1),
        rgba(168, 201, 178, 1),
    );
} 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:39:02.140

每个闰年都会有一天的轮班，但这应该可以满足您的需求。

```
function colorWheel($alpha, $shift = 0) { // 36 colors
    $time = time();
    $yearDay = $time % (60 * 60 * 24 * 365);
    $idx = $yearDay / 60 / 60 / 24 / 10;
    $colors = array(
        rgba(170, 207, 172, $alpha),
        …
        rgba(168, 201, 178, $alpha),
    );
    return $colors[($idx + $shift) % count($colors)];
} 
```

我对 Wordpress 了解不多，但要获得每页一种颜色的功能，您应该采取以下技巧：

```
$page_shift = array(
    '/about.html' => 1,
    '/whatever.html' => 2,
    '/gallery.html' => 3,
    …
);
$shift = $page_shift[$_SERVER['REQUEST_URI']];
$color = colorWheel(1, $shift); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:50:08.053

好吧，这就是我想出的：

```
function colorWheel($time, $page) {
    // All possible RGB color values
    $colors = array(
        array(170, 207, 172, 1),
        // ...
    );

    $index = ($time % (60 * 60 * 24 * 365) / 60 / 60 / 24 / 10);

    return 'background-color: rgba(' . ($colors[($index) % count($colors)-1][0]) .
           ', ' . ($colors[($index) % count($colors)-1][1]) . ', ' . ($colors[($index) % count($colors)-1][2]) . ', ' .
           ($colors[($index) % count($colors)-1][3]) . ');';
}

// Usage: 
echo "<body style='" . colorWheel(time(), 'home') . "'>"; 
```

虽然我还没有实现每页不同颜色的功能，但告诉我，是否可以使用会话、文本文件或数据库来存储哪个页面具有哪种颜色？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:31:18.603

尝试这个：

```
<?php

// $colors contains what the designers you gave ...
$colors = array (
    array (0x0, 0x0, 0x0),
    // ...
    array (0xFF, 0xFF, 0xFF),
);  

$number_of_colors = count($colors); // 36 in your example
$number_of_days_per_year = 365; // for brevity of the example

$day = intval(date('z'));

// some 'lower school math' magic :)
$index = round($day * $number_of_colors / $number_of_days_per_year);

// the color of the day is ..... 
$color = $colors[$index]; 
```**

# git - gerrit下git commit --amend和git rebase的区别

> ID：14231824
> 
> 赞同：3
> 
> 时间：2013-01-09T09:19:02.163
> 
> 标签：git, gerrit

我想更改最后一次提交内容。我可以进行本地更改。然后执行

```
git commit --amend 
```

我还可以执行以下操作：

```
git rebase -i HEAD~ 
```

选择要编辑的提交。进行本地更改，然后执行：

```
git rebase --continue 
```

1.  在这种情况下，这两个命令有区别吗？
2.  在 Gerrit 的上下文中，何时涉及 gerrit 的 CHANGE-ID ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:14:33.073

不，他们都使用以前的提交作为模板来生成新的提交。Gerrit 更改 ID 仅由提交注释中的行跟踪，因此只要您不修改或删除该行 Gerrit 仍然可以跟踪此新提交作为引用该更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:33:47.213

假设您有 3 个提交 A->B->C，并且您更改了提交 A 中包含的文件，因此，您应该将提交 A 放在顶部

```
git stash /* to save your changes */

git rebase -i HEAD~3
move commit A at the bottom of commits B&C
save&exit 
```

如果你做

```
git log 
```

你会有这个序列B->C->A，你做

```
git add /*your changed file*/
git commit --amend 
```

现在您必须返回提交 A 以不更改 gerrit 依赖项列表

```
git rebase -i HEAD~3
move commit A at the top of commit B&C
save&exit 
```

现在，如果您推送到 gerrit，您将拥有相同的旧订单

# c# - 如何优化分配的真实状态

> ID：14231825
> 
> 赞同：1
> 
> 时间：2013-01-09T09:19:06.173
> 
> 标签：c#, .net

我有这个代码：

```
// Image one : first row
user = ReturnUser(pictureBoxUpOne);
if (user != null)
{
     usersFirstRow.Add(user);
     user = null;
}
// Image two : first row
user = ReturnUser(pictureBoxUpTwo);
if (user != null)
{
     usersFirstRow.Add(user);
     user = null;
} 
```

对于我拥有的每张图像，这都会重复几次。所以我想知道有一些方法可以避免做以下部分：

```
if (user != null) 
```

在我做的同一行

```
usersFirstRow.Add(user); 
```

仅当它不为空时才添加它，例如优化的**ifs**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:22:41.063

我会将代码重构为一个接收图片框列表的函数。

```
private void MyMethod(List<PictureBox> pictureBoxes)
{
    foreach (var pictureBox in pictureBoxes)
    {
        var user = ReturnUser(pictureBox);
        if (user != null)
        {
             usersFirstRow.Add(user);
             // This line not needed: user = null; 
        }
    }
}

List<PictureBox> pictureBoxes = 
    new List<PictureBox>() { pictureBoxUpOne, pictureBoxUpTwo }

MyMethod(pictureBoxes); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T09:25:07.143

（只是给 LINQ 一点发言权。尽管对于*两个*图片框，我可能会保留与原样相似的代码 - 尽管使用不同的变量名称以最大限度地减少变量重用，并且我会完全消除 null 的分配。YMMV .)

```
var pictureBoxes = new [] { pictureBoxUpOne, pictureBoxUpTwo /* etc */ };
userFirtRow.AddRange(pictureBoxes
    .Select(pb => ReturnUser(pb))
    .Where(u => u != null)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T09:24:57.080

通过声明一个方法，您可能会缺少这些 if 语句。

```
private void AddIfNotNull(YourUserObject user)
{
   if (user != null)
   {
       usersFirstRow.Add(user);
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T09:24:32.197

将图片框放在列表或容器中，以便您可以执行以下操作：

```
foreach pictureBox in someContainer.ChildControls
{
    var user = ReturnUser(pictureBox);
    if (user != null)
    {
        usersFirstRow.Add(user);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T09:24:35.673

我会将它包装在一个函数中：

```
public void AddUserIfNotNull(User user) {
    if (user != null)
        usersFirstRow.Add(user);
}

// ... then ...
public void IteratePictureBoxesAndAddUsers(List<PictureBox> pictureBoxes) { // <-- feel free to rename
    foreach (PictureBox p in pictureBoxes) {
        AddUserIfNotNull(ReturnUser(p));
    }
} 
```

..再一次，我可能完全错过了你想要做的事情的重点..

# ios - iOS：象征性未归档的崩溃报告

> ID：14231827
> 
> 赞同：1
> 
> 时间：2013-01-09T09:19:12.947
> 
> 标签：ios, app-store-connect, crash-reports

我收到了来自 itunesconnect 审查团队的崩溃报告。我已经使用 Application Loader 工具上传了这个二进制文件，而不是使用 xcode 归档工具归档和提交它。Apple 文档描述了如何符号化崩溃报告，这些报告具有相关的二进制文件和 .dSYM 文件，这些文件由存档工具自动存档。

如何告诉 xcode 使用我文件系统上的未归档二进制文件和 .dSYM 来表示我的崩溃报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T00:18:32.020

尝试这个

[http://sourceforge.net/p/umsservices/wiki/Home/](http://sourceforge.net/p/umsservices/wiki/Home/)

它会为你完成工作

# python - Python Scikit 随机森林回归器错误

> ID：14231829
> 
> 赞同：6
> 
> 时间：2013-01-09T09:19:18.400
> 
> 标签：python, machine-learning, scipy, scikit-learn, random-forest

我正在尝试从 csv 加载训练和测试数据，在 scikit/sklearn 中运行随机森林回归器，然后预测测试文件的输出。

TrainLoanData.csv 文件包含 5 列；第一列是输出，接下来的 4 列是特征。TestLoanData.csv 包含 4 列 - 特征。

当我运行代码时，我收到错误：

```
 predicted_probs = ["%f" % x[1] for x in predicted_probs]
IndexError: invalid index to scalar variable. 
```

这是什么意思？

这是我的代码：

```
import numpy, scipy, sklearn, csv_io //csv_io from https://raw.github.com/benhamner/BioResponse/master/Benchmarks/csv_io.py
from sklearn import datasets
from sklearn.ensemble import RandomForestRegressor

def main():
    #read in the training file
    train = csv_io.read_data("TrainLoanData.csv")
    #set the training responses
    target = [x[0] for x in train]
    #set the training features
    train = [x[1:] for x in train]
    #read in the test file
    realtest = csv_io.read_data("TestLoanData.csv")

    # random forest code
    rf = RandomForestRegressor(n_estimators=10, min_samples_split=2, n_jobs=-1)
    # fit the training data
    print('fitting the model')
    rf.fit(train, target)
    # run model against test data
    predicted_probs = rf.predict(realtest)
    print predicted_probs
    predicted_probs = ["%f" % x[1] for x in predicted_probs]
    csv_io.write_delimited_file("random_forest_solution.csv", predicted_probs)

main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:35:39.300

a 的返回值`RandomForestRegressor`是一个浮点数组：

```
In [3]: rf = RandomForestRegressor(n_estimators=10, min_samples_split=2, n_jobs=-1)

In [4]: rf.fit([[1,2,3],[4,5,6]],[-1,1])
Out[4]: 
RandomForestRegressor(bootstrap=True, compute_importances=False,
           criterion='mse', max_depth=None, max_features='auto',
           min_density=0.1, min_samples_leaf=1, min_samples_split=2,
           n_estimators=10, n_jobs=-1, oob_score=False,
           random_state=<mtrand.RandomState object at 0x7fd894d59528>,
           verbose=0)

In [5]: rf.predict([1,2,3])
Out[5]: array([-0.6])

In [6]: rf.predict([[1,2,3],[4,5,6]])
Out[6]: array([-0.6,  0.4]) 
```

所以你试图索引一个浮点数`(-0.6)[1]`，这是不可能的。

附带说明一下，该模型不返回概率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:31:18.260

首先，拥有示例数据来重现和调试您的问题总是有帮助的。如果它们太大或太神秘，您可以提取其中有趣的部分。

变量的内容`predicted_probs`似乎与您期望的不一样。它似乎是一个整数列表（或数组），这也是我所期望的。

在 sklearn 中，该`X.train()`方法总是采用训练数据及其对应的类（通常是整数或字符串）。然后该`X.predict()`方法只获取验证数据并返回预测结果，即，对于验证数据中的每一组，一个类（同样是整数或字符串）。

如果你想知道训练后的分类器的准确率有多好，你不能只训练和预测，还必须进行交叉验证，即反复训练和验证，每次检查有多少预测是正确的。sklean 有一个很好的文档，我相信你会找到相应的部分。如果没有，问我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:04:36.513

尝试使用 numpy 的“genfromtxt”而不是“csv_io.read_data”来加载数据集 - 它会自动将 csv 中的数据转换为 numpy 数组。阅读[Python 数据科学入门](http://www.kaggle.com/wiki/GettingStartedWithPythonForDataScience)文章将对您有用...

# orbeon - Orbeon：编辑表单数据

> ID：14231832
> 
> 赞同：1
> 
> 时间：2013-01-09T09:19:28.920
> 
> 标签：orbeon

我想编辑 Orbeon 中用户提交的表单，我们的 JSP 页面在一个 WAR 文件中，Orbeon 在同一服务器下的另一个 WAR 文件中，即 Tomcat

1.  我在一个war文件中有一个Register.JSP文件，用户将在其中单击Register.jsp上的Register按钮

2.  单击按钮后，它将重定向到 Orbeon 新数据表单 URL 的另一个战争文件 (http:/sample.com/orbeon/fr/Registration/Samole/new)

3.  用户将通过单击表单页面上的提交按钮提交表单，并被重定向到另一个war文件的Successful.jsp，

    到现在为止还好。

    -> 如果用户再次想要编辑提交的表单数据。它应该重定向到特定用户填写的表单的 URL，以便他可以编辑表单数据并更新它。

    假设有 100 个用户提交了表单，10 个用户想要编辑表单数据，那么他们如何编辑数据以及我们如何重定向到特定用户表单数据的 URL，以便用户可以编辑和更新表单数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:37:14.040

当用户通过`workflow-send`按钮提交数据时，通过请求参数将[文档 id 传递给成功 URL 。](http://wiki.orbeon.com/forms/doc/developer-guide/configuration-properties/configuration-properties-form-runner#TOC-Workflow-send-button)`document`了解应用程序、表单和文档 ID，您的应用程序可以将用户指向允许他们返回 Orbeon 表单页面的页面，该页面将允许他们编辑数据，例如`http://host/orbeon/fr/your-app/your-form/edit/document-id`.

# netty - Netty 在握手时或握手期间自定义唯一通道 ID

> ID：14231833
> 
> 赞同：0
> 
> 时间：2013-01-09T09:19:30.823
> 
> 标签：netty, session-management, handshake

我已经使用客户端/服务器聊天示例来实现我的`SSL`要求。我要求的主要部分是`session management`.

我想要：

*   创建`SSL`（`TLS`）从我的客户端到服务器的“隧道”
*   ( `SSL tunnel`)`channel`只有在满足特定要求时才会打开并可用。否则，通道和连接将立即关闭。
*   检查是否满足要求。计划是，客户端向`ID`服务器发送一个。例如，将使用、、、等`ID`组装。这可以用作和 作为，以便服务器可以定位/跟踪/识别用户。`client-PC-ID``Username``IP-Address``Timestamp``ID``channel ID``Client-Sesion-ID`

创建`SSL`连接时，一旦创建配置，我正在执行该`handshake()`方法。然后创建连接并使用随机`Integer`数作为`Channel-ID`. 所以，在服务器端，我有`ID`客户端的 s 并且可以向他们发送消息。但是，我想拥有自己独特`ID`的 s，我也可以将其用作`session ID`s。最重要的是，客户将创建这些`ID`s 并使用它们“登录”。所以我想在服务器端决定 - 使用`ID`客户端创建的 - 如果`TLS tunnel`（`channel`）将打开（`logged-in`）或不（`no-access-to-log-in`）。`ID`这需要客户端在期间发送自己创建的唯一性`handshake`，不是吗？

一旦客户端发送了一个 valid `ID`，服务器应该检查它`SSL-Certificate`是否有效，等等。但这是下一步。

所以，问题是，我如何使用`ID`客户发送的？或者这是不可能的？或者它可能不需要？或者也许它没有任何意义？

有什么想法吗？

# jquery-ui - jQuery Mobile 丢失格式

> ID：14231835
> 
> 赞同：1
> 
> 时间：2013-01-09T09:19:40.327
> 
> 标签：jquery-ui, jquery-mobile

我在使用 JQuery 时遇到问题。

后

```
 $.mobile.changePage(*toPage*); 
```

以某种方式执行 JQueryMobile 的格式丢失了吗？

有没有简单的解决方案来解决这个问题？

这是我的 HTML 代码：

```
 <form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }" id="myLogin" data-role="page"> 
                     //Some Code
    </form>
<form action="" data-bind="template: { 'if': startVM, data: startVM }" id="myStart"  data-role="page">
                          //Some Code
    </form> 
```

不知何故，如果 DOM 被更改，样式就会丢失！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:15:02.117

我相信每个页面都应该有一个带有 id 的数据角色，所以：

```
<div data-role="page" id="login">
    <form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }" id="myLogin"> 
       //Some Code
    </form>
</div>
<div data-role="page" id="start">
    <form action="" data-bind="template: { 'if': startVM, data: startVM }" id="myStart">
      //Some Code
    </form> 
</div> 
```

# qt - 可以使用 MinGW 在 Windows 上构建 PySide 吗？

> ID：14231837
> 
> 赞同：0
> 
> 时间：2013-01-09T09:19:46.797
> 
> 标签：qt, cmake, mingw, pyside

我检查了[http://qt-project.org/wiki/Building_PySide_on_Windows](http://qt-project.org/wiki/Building_PySide_on_Windows)，似乎它显示只有 Visual Studio 用于在 Windows 上构建 PySide。这是否意味着 Visual Studio 是唯一的选择？可以使用 MinGW 吗？如果可能的话，谁能告诉我怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:07:03.380

似乎添加对使用 MinGW 构建 PySide 的支持是一项正在进行的工作。看[这里](https://bugreports.qt-project.org/browse/PYSIDE-113?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)

# excel - 用于匹配数据范围内的日期的相关函数

> ID：14231841
> 
> 赞同：0
> 
> 时间：2013-01-09T09:19:58.413
> 
> 标签：excel, function

我有一个包含四列的电子表格，其中 B 列和 D 列包含过去 30 天内使用各种道路的汽车数量。宏已处理这些范围内的数据并将异常值更改为“坏”，因此以下相关公式将忽略它们：

```
{=IFERROR(CORREL(IF(B4:B33<>"Bad";IF(D4:D33<>"Bad";B4:B33));IF(B4:B33<>"Bad";IF(D4:D33<>"Bad";D4:D33)));"0")} 
```

A 和 C 列包含计数的日期。不幸的是，有时这些日期并不相同，在某些地区没有可用的圣诞节数据，在其他地区没有可用的节礼日等。显然这破坏了相关性，因为它使日期不同步并且相关性分崩离析。

有什么方法可以调整公式以在关联之前检查日期是否相同？它几乎就像一个`vlookup`，找到日期，如果匹配，则添加到计算中，如果不匹配则转到下一个日期。如果有那么多冲突，我很高兴它只关联 30 天中的 26 天。

例如，对于 12 月 28 日执行的最后六天，查看截至但不包括 28 日的六个日历日：

```
 A         B        C         D
    22/12/2012    9    22/12/2012   Bad
    23/12/2012   10    23/12/2012   22
    24/12/2012    3    24/12/2012   21
    25/12/2012    7    26/12/2012   18
    26/12/2012    8    27/12/2012   15
    27/12/2012   15 
```

C 和 D 列的最后一个单元格是空白的。

我希望该公式仅关联 23 日、24 日、26 日和 27 日这四天，并匹配适当的计数。

鉴于我要将这些信息与多个位置相关联，每个位置都有不同的报告日期，在关联和删除不匹配的日期之前过滤日期不是一个好选择，但如果没有其他方法，我会考虑它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:26:08.493

我认为仅使用单单元格数组公式是不可能做到这一点的。

但是，在辅助列的帮助下，它可以完成。数组 - 在范围内输入以下公式`E4:E33`：

`{=(IF(COUNTIF(C4:C33;A4:A33);INDEX(D4:D33;MATCH(A4:A33;C4:C33;0));""))}`

这应该导致以下结果：

```
 A         B        C         D    E
    22/12/2012    9    22/12/2012   Bad  Bad
    23/12/2012   10    23/12/2012   22   22
    24/12/2012    3    24/12/2012   21   21
    25/12/2012    7    26/12/2012   18
    26/12/2012    8    27/12/2012   15   18
    27/12/2012   15                      15 
```

现在可以使用非数组公式计算相关性：

`=IFERROR(CORREL(B4:B13;E4:E13);0)`

**注意：** `CORREL`忽略其中一个或两个都不是*数字*的值对，即文本、逻辑或空（但不是 0）。因此，没有必要明确检查和排除“坏”或缺失值。

# android - 如何在 Android 中更改选定行的背景颜色？

> ID：14231843
> 
> 赞同：2
> 
> 时间：2013-01-09T09:20:34.857
> 
> 标签：android, listview

我想在单击完成时在列表视图项上设置背景颜色。自定义适配器用于 Android 中的列表视图

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:26:34.210

保存单击项目的位置并从 getView() 的适配器位置检查它。如果两者相同，则将任何背景颜色或资源设置为

```
 convertView.setBackgroundColor(Color.WHITE);
      or    
   convertView.setBackgroundResource(R.drawable.bg); 
```

其中 convertView 是您的适配器的膨胀布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:29:35.973

myDrawable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- focused -->
    <item android:state_focused="true" android:drawable="@color/YOUR_COLOR_HERE" />
    <!-- focused and pressed-->
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@color/YOUR_COLOR_HERE" />
    <!-- pressed -->
    <item android:state_pressed="true" android:drawable="@color/YOUR_COLOR_HERE" />
    <!-- default -->
    <item android:drawable="@color/YOUR_COLOR_HERE" /> 
</selector> 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/myview"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="top"
        android:background="@drawable/myDrawable">
        <!-- other views in layout-->
    </LinearLayout> 
```

或者将此属性添加到您的列表视图

```
android:listSelector="@android:color/darker_gray" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T18:17:59.770

```
<item android:state_activated="true">
  <shape android:shape="rectangle">
    <solid android:color="#333333" />
    <padding android:left="5dp" android:right="5dp" />
  </shape></item>
<item><shape android:shape="rectangle">
        <solid android:color="#222222" />
    </shape></item> 
```

# android - Android OpenCV 应用程序中计时器中的“上下文无法解析或不是字段”错误

> ID：14231845
> 
> 赞同：1
> 
> 时间：2013-01-09T09:20:36.073
> 
> 标签：android, opencv, timer

我试图在我的 Android OpenCV 应用程序中显示在以下代码中实现的计时器的结果：

```
case ImageManipulationsActivity.VIEW_MODE_MEDIAN:
capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA); 
if (mRgbaInnerWindow == null|| mGrayInnerWindow == null)
CreateAuxiliaryMats();
long start = System.currentTimeMillis();
Imgproc.medianBlur(mRgbaInnerWindow, mIntermediateMat, 25);
Core.convertScaleAbs(mIntermediateMat, mIntermediateMat, 1./10, 0);
Core.convertScaleAbs(mIntermediateMat, mRgbaInnerWindow, 10, 0);
long end = System.currentTimeMillis();
long elapse = end - start;
Toast.makeText(ImageManipulationsView.context.getActivity(), "" + elapse + "ms is used
to process", Toast.LENGTH_LONG).show(); 
```

我收到错误“无法解析上下文或不是字段”我做错了什么？我的计时器正确吗？我怎样才能显示它的结果？

@Sahil Mahajan Mj 现在我有一个错误：

```
Toast.makeText(ImageManipulationsView.this, "" + elapse + "ms is used to",
Toast.LENGTH_LONG).show(); 
```

从我一开始粘贴的代码。错误是“Toast 类型中的方法 makeText 不适用于参数”如果有帮助，我的应用是对 OpenCV4Android 包中的 Image-manipulations 示例的修改

@Blundell 我已将上下文变量更改为公共，当我从我的应用程序菜单中选择 medianBlur 时，整个应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:27:16.100

在 Android 设计标准中，您的代码有点错误。

但看起来你无法`context`从这个类中“看到”变量。

在您的`ImageManipulationsView`班级中将`context`变量更改为公共。

```
 public Context context; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:24:37.050

如果你在谈论这个，

```
Toast.makeText(ImageManipulationsView.context.getActivity(), "" + elapse + "ms is used
to process", Toast.LENGTH_LONG).show(); 
```

你只需要像这样的Activity的上下文，

```
ImageManipulationsView.this 
```

如果还有其他错误，您需要发布实际错误所在的代码。只有这样我才能编辑我的答案。

# symfony-2.1 - 如何在 Symfony2 中将整个页面翻译成另一种语言？

> ID：14231848
> 
> 赞同：1
> 
> 时间：2013-01-09T09:20:54.873
> 
> 标签：symfony-2.1

我想翻译整个 html 页面（文本和一些标记），包括`<p>,<italic>, <strong>`Symfony2 中的标签。对于我使用的简单短语，`{{ 'read.first'|trans }}`但这不接受 html 标签，如`<p>`. 我怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:51:32.567

你不应该用 symfony 的 Translation 组件翻译完整的页面，这意味着只是短字符串。

Twig 总是在字符串中转义标签，您可以在[翻译文档](http://symfony.com/doc/current/book/translation.html#twig-templates)中阅读如何为您的翻译禁用此功能：

> 使用翻译标签或过滤器具有相同的效果，但有一个细微的区别：自动输出转义仅适用于使用过滤器翻译的变量。换句话说，如果你需要确保你的翻译变量没有被转义输出，你必须在翻译过滤器之后应用原始过滤器：
> 
> ```
> {# text translated between tags is never escaped #}
> {% trans %}
>     <h3>foo</h3>
> {% endtrans %}
> 
> {% set message = '<h3>foo</h3>' %}
> 
> {# a variable translated via a filter is escaped by default #}
> {{ message|trans|raw }}
> 
> {# but static strings are never escaped #}
> {{ '<h3>foo</h3>'|trans }} 
> ```

# android - 如何在本地最好地保存 InApp 购买状态？

> ID：14231859
> 
> 赞同：36
> 
> 时间：2013-01-09T09:21:23.173
> 
> 标签：android, security, in-app-purchase

我即将完成我的第一个应用程序，最后剩下的一件事是实施 IAP 计费，这就是为什么我目前正在阅读很多关于该主题的内容（包括加密、混淆等安全问题）。

我的应用程序是免费版本，能够通过 IAP 升级到完整版本，因此只有一个托管购买项目“高级”。我对此有几个问题：

在 Google IAP API 示例（trivialdrivesample）中，MainActivity 中始终存在 IAP 检查以查看用户是否购买了高级版本，通过

> mHelper.queryInventoryAsync(mGotInventoryListener);

我的第一个担忧：这确实意味着用户在应用程序启动时总是需要有互联网/数据连接，才能切换到高级版本，对吧？如果用户没有互联网连接怎么办？我猜他会选择精简版，我会觉得这很烦人。

所以我想到了如何在本地保存 isPremium 状态，无论是在 SharedPrefs 中还是在应用程序数据库中。现在，我知道无论如何你都无法阻止黑客对应用程序进行逆向工程，即使如此，因为我没有服务器来进行一些服务器端验证。

然而，人们根本无法在某处保存“isPremium”标志，因为这太容易被发现了。

所以我在想这样的事情：

> *   用户购买高级版
> *   应用程序获取 IMEI/设备 ID，并使用硬编码的字符串密钥对其进行异或编码，并将其保存在本地应用程序数据库中。
> 
> 现在当用户再次启动应用程序时：
> 
> *   应用程序从数据库中获取编码字符串，对其进行解码并检查 decodedString == IMEI。如果是 -> 溢价
> *   如果没有，那么将调用普通的 queryInventoryAsync 来查看用户是否购买了溢价。

您如何看待这种方法？我知道它不是超级安全的，但对我来说，更重要的是不要让用户感到恼火（比如强制互联网连接），而不是让应用程序无法破解（无论如何这是不可能的）。你还有其他一些技巧吗？

我目前不知道的另一件事是如何在用户卸载/重新安装应用程序时恢复交易状态。我知道 API 有一些机制，此外我的数据库可以通过应用程序导出和导入（因此编码的 isPremium 标志也可以导出/导入）。好的，我想这将是另一个问题，时机成熟;-)

欢迎对这种方法提出任何想法和意见，您认为这是一个好的解决方案吗？还是我错过了什么/朝着错误的方向前进？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T11:39:57.383

我也在做同样的调查，但在我的测试中，我发现你不需要存储它，因为谷歌做了你需要的所有缓存，我怀疑（虽然我没有调查过）他们这样做是安全的尽可能（认为这也符合他们的利益！）

所以这就是我所做的

```
// Done in onCreate
mHelper = new IabHelper(this, getPublicKey());

mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
public void onIabSetupFinished(IabResult result) {
      if (!result.isSuccess()) {
         // Oh noes, there was a problem.
         Log("Problem setting up In-app Billing: " + result);
      } else {
         Log("onIabSetupFinished " + result.getResponse());
         mHelper.queryInventoryAsync(mGotInventoryListener);
     }
    }
});

// Called by button press
private void buyProUpgrade() {
    mHelper.launchPurchaseFlow(this, "android.test.purchased", 10001,   
           mPurchaseFinishedListener, ((TelephonyManager)this.getSystemService(Context.TELEPHONY_SERVICE)).getDeviceId());
}

// Get purchase response
private IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener = new IabHelper.OnIabPurchaseFinishedListener() {
    public void onIabPurchaseFinished(IabResult result, Purchase purchase) 
    {
       if (result.isFailure()) {
          Log("Error purchasing: " + result);
          return;
       }      
       else if (purchase.getSku().equals("android.test.purchased")) {
      Log("onIabPurchaseFinished GOT A RESPONSE.");
              mHelper.queryInventoryAsync(mGotInventoryListener);
      }
    }
};

// Get already purchased response
private IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result,
       Inventory inventory) {

       if (result.isFailure()) {
         // handle error here
           Log("Error checking inventory: " + result); 
       }
       else {
         // does the user have the premium upgrade?        
         mIsPremium = inventory.hasPurchase("android.test.purchased");        
         setTheme();

         Log("onQueryInventoryFinished GOT A RESPONSE (" + mIsPremium + ").");
       }
    }
}; 
```

那么这里会发生什么？

IAB 已设置并调用`startSetup`，在成功完成后（只要它已通过 Internet 连接运行一次并且设置正确，它将始终成功）我们调用`queryInventoryAsync`以找出已经购买的内容（再次，如果这已经在线时调用它总是在离线时工作）。

因此，如果购买成功完成（只能在在线时完成），我们会致电`queryInventoryAsync`以确保它已在在线时被调用。

现在无需存储与购买有关的任何内容，并使您的应用程序更不易被破解。

我已经测试了很多方法，飞行模式，再次关闭设备，唯一搞砸的就是清除手机上某些谷歌应用程序中的数据（不太可能发生！）。

如果您有不同的经验，请为此做出贡献，我的应用程序仍处于早期测试阶段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-10T23:28:50.253

我将 ne0 的答案重构为静态方法，包括来自 snark 的评论。

我在我的应用程序启动时调用此方法 - 您需要在`TODO`

```
/**
 * This is how you check with Google if the user previously purchased a non-consumable IAP
 * @param context App Context
 */
public static void queryPlayStoreForPurchases(Context context)
{
    final IabHelper helper = new IabHelper(context, getPublicKey());

    helper.startSetup(new IabHelper.OnIabSetupFinishedListener() 
    {
         public void onIabSetupFinished(IabResult result) 
         {
               if (!result.isSuccess()) 
               {
                   Log.d("InApp", "In-app Billing setup failed: " + result);
               } 
               else 
               {  
                    helper.queryInventoryAsync(false, new IabHelper.QueryInventoryFinishedListener()
                    {
                        public void onQueryInventoryFinished(IabResult result, Inventory inventory)
                        {
                            // If the user has IAP'd the Pro version, let 'em have it.
                            if (inventory.hasPurchase(PRO_VERSION_SKU))
                            {
                                //TODO: ENABLE YOUR PRO FEATURES!! 

                                Log.d("IAP Check", "IAP Feature enabled!");
                            }
                            else
                            {
                                Log.d("IAP Check", "User has not purchased Pro version, not enabling features.");

                            }
                        }
                    });
               }
         }
    });
} 
```

如果用户购买了该项目，这将在重新启动且无需网络连接的情况下工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-27T03:59:13.333

由于您已经知道使用此系统不可能使其无法破解，因此我建议不要尝试阻止黑客入侵。您提出的建议被称为“通过默默无闻的安全性”，通常是一个坏主意。

我的建议是先尝试`queryInventoryAsync()`，并且仅在没有互联网连接的情况下检查您的“isPremium”标志。

还有一些潜在的其他方法可以解决这个问题，例如拥有单独的免费和高级应用程序，而不是应用程序内购买。其他人如何处理这个问题以及谷歌提供的工具可能需要调查。

`queryInventoryAsync`将自动考虑卸载和重新安装，因为它会跟踪登录用户的购买。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-26T19:30:54.973

是的，购买可以离线检索。此外，我正在考虑在显示计费 UI 之前计算用户打开应用程序的次数作为一种机制。

# php - 返回没有继承属性的当前类对象

> ID：14231860
> 
> 赞同：0
> 
> 时间：2013-01-09T09:21:25.440
> 
> 标签：php, class

我有一个自动加载器，在加载迷你框架时初始化很多对象。对象被保存为静态变量，但现在我遇到了问题。我有一个在自动加载器中实例化的文件，但稍后使用类似于异常处理程序，在调用时处理特殊情况。目的是这个类中的方法返回 $this，类对象，但是这样做时，返回的值不是被调用对象的实例，而是被继承到调用它的类中。此外，被调用的 exception_handler 不仅是它自己的一个实例，而且是整个自动加载器中的所有实例，在加载所有内容时继承 $this。令人困惑，但我建立了一个小例子：

```
class a {
    public $a_tmp = 'tmp';
}

class b extends a {
    public $b_tmp = 'tmp';

    public function getOnlyThisClass() {
        return $this;
    }
}

$b = new b();
$b->getOnlyThisClass(); 
```

这将返回：

```
object(b)#1 (2) {
  ["b_tmp"]=>
  string(3) "tmp"
  ["a_tmp"]=>
  string(3) "tmp"
} 
```

当调用特殊方法时，我需要它只返回被调用的类。我知道这可以通过工厂模式解决，但在这种情况下想避免它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:28:31.963

尝试使用反射来获取没有继承属性的类对象属性：

```
<?php

class a {
    public $a_tmp = 'tmp';
}

class b extends a {
    public $b_tmp = 'tmp';

    public function getOnlyThisClass() {
        $cl       = new stdClass();
        $refclass = new ReflectionClass($this);
        foreach ($refclass->getProperties() as $property)
        {
            $name = $property->name;
            if ($property->class == $refclass->name) {
                $cc = $property->name;
                $cl->$cc = $this->$name;
            }
        }
        return $cl;
    }
}
$b = new b();
var_dump($b->getOnlyThisClass()); 
```

输出：

```
object(stdClass)#2 (1) { ["b_tmp"]=> string(3) "tmp" } 
```

您可以创建一个 stdClass 并在那里分配找到的属性。完成此操作以满足您的需求。

# .net - dotnetZip 如何使用 memoryStream 写入特定文件夹

> ID：14231862
> 
> 赞同：3
> 
> 时间：2013-01-09T09:21:33.267
> 
> 标签：.net, zip, dotnetzip

我需要创建一个包含文件夹结构的 zip 文件，并能够将文件从内存流添加到特定文件夹。

我正在尝试使用[dotnetZip](http://dotnetzip.codeplex.com/)来实现这一点，但他们似乎已经放弃了对通过流向特定文件夹添加文件的支持。

我能找到的所有示例都使用以下内容：

> zip.AddEntry("test.txt", "文件夹", memoryStream);

但是此方法不再允许您添加要添加文件的文件夹名称。

> zip.AddEntry("test.txt", memoryStream);

如何使用 dotnetZip 在 zip 文件中创建子文件夹并将 memoryStream 文件添加到该文件夹​​而无需保存到磁盘？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T09:48:05.457

入口路径可以包括档案内的目录，所以你应该首先

> .AddEntry("文件夹名/")

， 下一个 -

> .AddEntry("文件夹名/文件名.txt", memoryStream);

# android - 适用于 Android 的 Mono：ListView 将错误的值转换为 toast

> ID：14231866
> 
> 赞同：0
> 
> 时间：2013-01-09T09:21:49.480
> 
> 标签：android, android-listview, xamarin.android, onitemclick

**我的列表。ItemClick：**

```
lstText.ItemClick += delegate (object sender, AdapterView.ItemClickEventArgs args) 
{
    var userIdTextView = FindViewById<TextView>(Resource.Id.txtUserId);
    var fetchUserId = userIdTextView.Text;

    sUserId = fetchUserId;

    Toast.MakeText(this, sUserId, ToastLength.Short).Show();

}; 
```

在列表视图中`(Resource.Id.txtUserId)`，每个列表项都不同。当我单击 toast 时，它总是从列表中的第一项传递相同的值。我该如何解决？

请提供解决方案或提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:33:54.527

`FindViewById`应该用于在列表视图上下文中的每个项目的上下文中查找资源 id，即`args.View`.

```
lstText.ItemClick += delegate (object sender, AdapterView.ItemClickEventArgs args) 
{
    var userIdTextView = args.View.FindViewById<TextView>(Resource.Id.txtUserId);
    var fetchUserId = userIdTextView.Text;

    sUserId = fetchUserId;

    Toast.MakeText(this, sUserId, ToastLength.Short).Show();

}; 
```

# android - 在android中加载大位图时出现OOM异常

> ID：14231871
> 
> 赞同：0
> 
> 时间：2013-01-09T09:22:11.727
> 
> 标签：android

我试图在应用程序中显示大位图，我不断收到 OOM 异常，

这是我使用的 Imageloader 类

```
 public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());

    public ImageLoader(Context context){
        //Make the background thead low priority. This way it will not affect the UI performance
        photoLoaderThread.setPriority(Thread.NORM_PRIORITY-1);

        fileCache=new FileCache(context);
    }

//    final int stub_id=R.drawable.stub;
    public void DisplayImage(String url,ImageView imageView)
    {
        imageViews.put(imageView, url);

//        Bitmap bitmap=createScaledBitmap(memoryCache.get(url), 100,100,0);
        Bitmap bitmap=memoryCache.get(url);
      //  Bitmap bitmaps=bitmap.createScaledBitmap(bitmap, 0, 100, 100);

        if(bitmap!=null)
        {
            imageView.setBackgroundDrawable(new BitmapDrawable(bitmap));

            System.gc();
//            bitmap.recycle();
//            bitmap=null;
//            imageView.setImageBitmap(getRoundedCornerBitmap( bitmap, 10,70,70));
//            imageView.setImageBitmap(bitmap);
//            Log.v("first", "first");
        }
        else
        {
            queuePhoto(url, imageView);
//            Log.v("second", "second");

        }    
    }

    private Bitmap createScaledBitmap(Bitmap bitmap, int i, int j, int k) {
        // TODO Auto-generated method stub
        return null;
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        //This ImageView may be used for other images before. So there may be some old tasks in the queue. We need to discard them. 
        photosQueue.Clean(imageView);
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        synchronized(photosQueue.photosToLoad){
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        //start thread if it's not started yet
        if(photoLoaderThread.getState()==Thread.State.NEW)
            photoLoaderThread.start();
    }

   public Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }//Lalit

    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            FileInputStream stream1=new FileInputStream(f);
            BitmapFactory.decodeStream(stream1,null,o);
            stream1.close();

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=Wall.width;
            final int REQUIRED_SIZE1=Wall.height;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            FileInputStream stream2=new FileInputStream(f);
            Bitmap bitmap=BitmapFactory.decodeStream(stream2, null, o2);
            stream2.close();
            return bitmap;
        } catch (FileNotFoundException e) {
        } 
        catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    } 

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    PhotosQueue photosQueue=new PhotosQueue();

    public void stopThread()
    {
        photoLoaderThread.interrupt();
    }

    //stores list of photos to download
    class PhotosQueue
    {
        private Stack<PhotoToLoad> photosToLoad=new Stack<PhotoToLoad>();

        //removes all instances of this ImageView
        public void Clean(ImageView image)
        {
            for(int j=0 ;j<photosToLoad.size();){
                if(photosToLoad.get(j).imageView==image)
                    photosToLoad.remove(j);
                else
                    ++j;
            }
        }
    }

    class PhotosLoader extends Thread {
        public void run() {
            try {
                while(true)
                {
                    //thread waits until there are any images to load in the queue
                    if(photosQueue.photosToLoad.size()==0)
                        synchronized(photosQueue.photosToLoad){
                            photosQueue.photosToLoad.wait();
                        }
                    if(photosQueue.photosToLoad.size()!=0)
                    {
                        PhotoToLoad photoToLoad;
                        synchronized(photosQueue.photosToLoad){
                            photoToLoad=photosQueue.photosToLoad.pop();
                        }
                        Bitmap bmp=getBitmap(photoToLoad.url);
                        memoryCache.put(photoToLoad.url, bmp);
                        String tag=imageViews.get(photoToLoad.imageView);
                        if(tag!=null && tag.equals(photoToLoad.url)){
                            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad.imageView);
                            Activity a=(Activity)photoToLoad.imageView.getContext();
                            a.runOnUiThread(bd);
                        }
                    }
                    if(Thread.interrupted())
                        break;
                }
            } catch (InterruptedException e) {
                //allow thread to exit
            }
        }
    }

    PhotosLoader photoLoaderThread=new PhotosLoader();

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        ImageView imageView;
        public BitmapDisplayer(Bitmap b, ImageView i){bitmap=b;imageView=i;}
        public void run()
        {
            if(bitmap!=null)
                imageView.setBackgroundDrawable(new BitmapDrawable(bitmap));

        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }
    public static Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels,int width,int height) {

        Bitmap output = Bitmap.createBitmap(width,height, Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = pixels;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return output;
    }
} 
```

还有我的 Memorycache 类

```
public class MemoryCache {

    private static final String TAG = "MemoryCache";
    private Map<String, Bitmap> cache=Collections.synchronizedMap(
            new LinkedHashMap<String, Bitmap>(10,1.5f,true));//Last argument true for LRU ordering
    private long size=0;//current allocated size
    private long limit=1000000;//max memory in bytes

    public MemoryCache(){
        //use 25% of available heap size
        setLimit(Runtime.getRuntime().maxMemory()/4);
    }

    public void setLimit(long new_limit){
        limit=new_limit;
        Log.i(TAG, "MemoryCache will use up to "+limit/1024./1024.+"MB");
    }

    public Bitmap get(String id){
        try{
            if(!cache.containsKey(id))
                return null;
            //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
            return cache.get(id);
        }catch(NullPointerException ex){
            ex.printStackTrace();
            return null;
        }
    }

    public void put(String id, Bitmap bitmap){
        try{
            if(cache.containsKey(id))
                size-=getSizeInBytes(cache.get(id));
            cache.put(id, bitmap);
            size+=getSizeInBytes(bitmap);
            checkSize();
        }catch(Throwable th){
            th.printStackTrace();
        }
    }

    private void checkSize() {
        Log.i(TAG, "cache size="+size+" length="+cache.size());
        if(size>limit){
            Iterator<Entry<String, Bitmap>> iter=cache.entrySet().iterator();//least recently accessed item will be the first one iterated  
            while(iter.hasNext()){
                Entry<String, Bitmap> entry=iter.next();
                size-=getSizeInBytes(entry.getValue());
                iter.remove();
                if(size<=limit)
                    break;
            }
            Log.i(TAG, "Clean cache. New size "+cache.size());
        }
    }

    public void clear() {
        try{
            //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
            cache.clear();
            size=0;
        }catch(NullPointerException ex){
            ex.printStackTrace();
        }
    }

    long getSizeInBytes(Bitmap bitmap) {
        if(bitmap==null)
            return 0;
        return bitmap.getRowBytes() * bitmap.getHeight();
    }
} 
```

这是logcat输出------------>

```
01-09 12:40:38.940: E/dalvikvm-heap(18736): 1123536-byte external allocation too large for this process.
    01-09 12:40:38.979: D/GraphicsJNI(18736): Waiting for heap walker to free more memory
    01-09 12:40:38.979: D/dalvikvm(18736): GC_FOR_MALLOC freed <1K, 53% free 4297K/8967K, external 22504K/23758K, paused 29ms
    01-09 12:40:38.979: D/GraphicsJNI(18736): Heap walker done, retry to allocate
    01-09 12:40:39.002: I/MemoryCache(18736): cache size=5691144 length=7
    01-09 12:40:39.112: D/dalvikvm(18736): GC_EXTERNAL_ALLOC freed 89K, 53% free 4272K/8967K, external 21905K/22856K, paused 42ms
    01-09 12:40:39.127: E/dalvikvm-heap(18736): 2457600-byte external allocation too large for this process.
    01-09 12:40:39.167: D/GraphicsJNI(18736): Waiting for heap walker to free more memory
    01-09 12:40:39.167: D/dalvikvm(18736): GC_FOR_MALLOC freed <1K, 53% free 4272K/8967K, external 21905K/22856K, paused 28ms
    01-09 12:40:39.167: D/GraphicsJNI(18736): Heap walker done, retry to allocate
    01-09 12:40:39.206: D/dalvikvm(18736): GC_EXTERNAL_ALLOC freed 2K, 53% free 4270K/8967K, external 20808K/22856K, paused 38ms
    01-09 12:40:39.252: I/MemoryCache(18736): cache size=8148744 length=8
    01-09 12:40:39.323: D/dalvikvm(18736): GC_EXTERNAL_ALLOC freed 148K, 53% free 4253K/8967K, external 23218K/25256K, paused 42ms
    01-09 12:40:39.331: E/dalvikvm-heap(18736): 960000-byte external allocation too large for this process.
    01-09 12:40:39.370: D/GraphicsJNI(18736): Waiting for heap walker to free more memory
    01-09 12:40:39.370: D/dalvikvm(18736): GC_FOR_MALLOC freed <1K, 53% free 4253K/8967K, external 23218K/25256K, paused 28ms
    01-09 12:40:39.377: D/GraphicsJNI(18736): Heap walker done, retry to allocate
    01-09 12:40:39.409: D/dalvikvm(18736): GC_EXTERNAL_ALLOC freed 1K, 53% free 4251K/8967K, external 23208K/25256K, paused 38ms
    01-09 12:40:39.424: E/dalvikvm-heap(18736): 960000-byte external allocation too large for this process.
    01-09 12:40:39.463: E/GraphicsJNI(18736): VM won't let us allocate 960000 bytes
    01-09 12:40:39.463: D/dalvikvm(18736): GC_FOR_MALLOC freed 0K, 53% free 4251K/8967K, external 23208K/25256K, paused 28ms
    01-09 12:40:39.463: D/skia(18736): --- decoder->decode returned false
    01-09 12:40:39.463: W/dalvikvm(18736): threadid=16: thread exiting with uncaught exception (group=0x40018560)
    01-09 12:40:39.471: E/AndroidRuntime(18736): FATAL EXCEPTION: Thread-26
    01-09 12:40:39.471: E/AndroidRuntime(18736): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
    01-09 12:40:39.471: E/AndroidRuntime(18736):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
    01-09 12:40:39.471: E/AndroidRuntime(18736):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
    01-09 12:40:39.471: E/AndroidRuntime(18736):    at com.beerbro.utils.ImageLoader.decodeFile(ImageLoader.java:190)
    01-09 12:40:39.471: E/AndroidRuntime(18736):    at com.beerbro.utils.ImageLoader.getBitmap(ImageLoader.java:100)
    01-09 12:40:39.471: E/AndroidRuntime(18736):    at com.beerbro.utils.ImageLoader$PhotosLoader.run(ImageLoader.java:257)
    01-09 12:40:39.471: W/ActivityManager(1320):   Force finishing activity com.stellent.beerbro/.Wall 
```

我正在从 Facebook 图形 api 加载数据，我正在获取 Firstpage 数据，并且一次显示整个数据。我认为这会使内存增加很多。那么，如何处理如此大量的数据。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:30:53.587

您应该使用[inJustDecodeBounds](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inJustDecodeBounds)来解码位图的大小而不将其加载到内存中。ATM，如果您尝试加载大位图，请在检查它是否在缓存的大小范围内之前创建它。

您不应该强制 GC，尤其是当它异步运行并且 system.gc 强制它同步时。位图不直接加载到 Java 堆上，所以从缓存中出来的任何东西都应该被回收。最后不要保留对位图的引用。

总的来说，我会使用[LRUCache](http://developer.android.com/reference/android/support/v4/util/LruCache.html)而不是你自己的缓存。

最后，出于偏见，我建议在[此处输入链接描述](http://androidimageloader.com/)之类的方法，它将图像缓存到磁盘并使用 LRUCache 进行表演。

# refresh - 强制应用刷新图像（来自 URL）

> ID：14231872
> 
> 赞同：0
> 
> 时间：2013-01-09T09:22:20.213
> 
> 标签：refresh, image, reload

我的应用程序（android）中有一个从 URL 获取的图像：

```
<img src="URL"/> 
```

如果我更改服务器上的图像（保持相同的 URL），应用程序不会刷新并始终保留旧图像。

如何强制应用重新加载/刷新正确的图像（始终在同一个 URL 上）？

（该应用程序是用jquery编写的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:43:42.547

尝试使用您每次显示图像时更改的随机数将查询字符串附加到图像 url。

例如，这可以使用 javascript 来完成。

```
<img id="myImage" src="URL"/>
<script>
 var newRandomNumber = (new Date()).valueOf();
 var img = document.getElementById('myImage');
 img.src += "?random=" + newRandomNumber;
</script> 
```

该脚本将获取 id 为 myImage 的 html 元素并附加一个查询字符串参数，该参数将（希望）强制重新加载图像。

（注意代码中的值 (new Date()).valueOf() 不是随机的，而是一个代表当前时间的数字）

希望这可以帮助！

# php - 通过 PHP 留下网站免责声明？

> ID：14231876
> 
> 赞同：0
> 
> 时间：2013-01-09T09:22:26.437
> 
> 标签：php, regex

由于法律原因，我希望在我的论坛上发布的每个外部超链接都首先链接到`You're leaving this website and are being redirected to a website that is not our property...`免责声明页面。像[http://www.mydomain.com/?leave=FINALURLHERE](http://www.mydomain.com/?leave=FINALURLHERE)这样的东西就可以了，但是我该如何设置这个系统呢？

我可以轻松地为所有 URL 编写一个脚本，但我只希望这发生在外部 URL 上。任何人都可以将我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:27:02.227

大概您在论坛上使用了某种形式的 BBCode。您可以先对其进行编辑以添加您的离开页面。

如果你不是，那么你将不得不求助于一些相当混乱的 JavaScript。就像是：

```
var links = document.getElementsByTagName('a'), l = links.length, i,
    domain = location.protocol+"//"+location.hostname+"/";
for( i=0; i<l; i++) {
    if( links[i].href.substr(0,domain.length) != domain) {
        links[i].href = "/exit.php?target="+encodeURIComponent(links[i].href);
    }
} 
```

# jquery - 如何在 Web API 控制器上返回 Json 对象

> ID：14231877
> 
> 赞同：23
> 
> 时间：2013-01-09T09:22:27.353
> 
> 标签：jquery, jquery-mobile, asp.net-mvc-4, visual-studio-2012, asp.net-web-api

我在我的 asp.net 控制器上使用下面的代码在我的 javascript 上的 Ajax 上返回 Json 对象

```
public JsonResult myMethod()
{
    // return a Json Object, you could define a new class
    return Json(new
    {
        Success = true, //error
        Message = "Success" //return exception
    });
} 
```

jQuery-Ajax：

```
$.ajax({
    type: "POST",
    url: url_ ,
    data: search,
    success: function(data) {   
        //Show Json Properties from Controller ( If Success == false show exception Message from controller )
        if (data.Success)  
        {
            alert(data.Message); //display success 
        }
        else
        {
            alert(data.Message) //display exception
        }
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert("error: " + XMLHttpRequest.responseText);
    },
    dataType: 'json'
}); 
```

这如何在 Web Api Controller 上完成？

你能给我一些例子或网址作为参考。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-09T09:35:46.817

ASP.NET Web API 的工作原理略有不同。您应该只返回一个实体（或一组实体），内容协商机制以客户请求的格式将其返回给客户。您可以在此处阅读有关内容协商的更多信息：

*   [你想知道的关于 ASP.NET Web API 内容协商的一切](http://www.strathweb.com/2012/07/everything-you-want-to-know-about-asp-net-web-api-content-negotation/)

您当然可以通过返回一个`HttpResponseMessage`. 在这种情况下，您需要自己将对象序列化为 JSON（这种方法的基础知识也在上面提到的文章中进行了描述）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-09T14:41:07.630

如果您为自己创建一个用于传递 JSON 的新 HttpContent 类，例如...

```
 public class JsonContent : HttpContent {

    private readonly MemoryStream _Stream = new MemoryStream();
    public JsonContent(object value) {

        Headers.ContentType = new MediaTypeHeaderValue("application/json");
        var jw = new JsonTextWriter( new StreamWriter(_Stream));
        jw.Formatting = Formatting.Indented;
        var serializer = new JsonSerializer();
        serializer.Serialize(jw, value);
        jw.Flush();
        _Stream.Position = 0;

    }
    protected override Task SerializeToStreamAsync(Stream stream, TransportContext context) {
        return _Stream.CopyToAsync(stream);
    }

    protected override bool TryComputeLength(out long length) {
        length = _Stream.Length;
        return true;
    }
} 
```

那么你可以这样做，

```
 public HttpResponseMessage Get() {
            return new HttpResponseMessage() {
                Content = new JsonContent(new
                {
                    Success = true, //error
                    Message = "Success" //return exception
                })
            };
        } 
```

就像你对 JsonResult 所做的那样。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-29T15:22:57.213

# jquery - 如何使用 REST Api 从 Salesforce 的字段中获取所有选项列表值？

> ID：14231878
> 
> 赞同：4
> 
> 时间：2013-01-09T09:22:34.970
> 
> 标签：jquery, salesforce, apex-code, visualforce

我正在尝试使用 REST API 从 salesforce 的字段中获取所有选项列表值。有可能这样做吗？如果是，那怎么办？

谢谢，

拉吉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T09:48:07.453

这很简单。您需要访问类似于此的资源：（`/services/data/v26.0/sobjects/Opportunity/describe`使用您想要的任何对象）并且 JSON 响应将包含`fields`节点：

![在此处输入图像描述](../Images/e2414ab0fb4631740ce28fd68fc194f9.png)

# ios - 是否可以更改 UITextView 和 UITextField 中单个单词的颜色

> ID：14231879
> 
> 赞同：33
> 
> 时间：2013-01-09T09:22:39.400
> 
> 标签：ios, objective-c, uitextfield, uitextview, nsattributedstring

是否可以更改 UITextView 和 UITextField 中单个单词的颜色？

如果我在前面输入了一个带有符号的单词（例如：@word），它的颜色可以改变吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-09T09:24:01.337

是的，您需要为此使用`NSAttributedString`，找到[RunningAppHere](http://www.keepandshare.com/doc/5453557/attributedstringoneword-40k?da=y)。

浏览单词并找到单词的范围并更改其颜色。

编辑：

```
- (IBAction)colorWord:(id)sender {
    NSMutableAttributedString * string = [[NSMutableAttributedString alloc]initWithString:self.text.text];

    NSArray *words=[self.text.text componentsSeparatedByString:@" "];

    for (NSString *word in words) {        
        if ([word hasPrefix:@"@"]) {
            NSRange range=[self.text.text rangeOfString:word];
            [string addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:range];           
        }
    }
    [self.text setAttributedText:string];
} 
```

编辑2：看截图 ![在此处输入图像描述](../Images/37cd614ad3b0140fd953dd8e2f647fe4.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-05T03:32:36.670

这是来自**@Anoop Vaidya**答案的快速实现，此函数检测 {|myword|} 之间的任何单词，将这些单词涂成红色并删除特殊字符，希望这对其他人有帮助：

```
 func getColoredText(text:String) -> NSMutableAttributedString{
    var string:NSMutableAttributedString = NSMutableAttributedString(string: text)
    var words:[NSString] = text.componentsSeparatedByString(" ")

    for (var word:NSString) in words {
        if (word.hasPrefix("{|") && word.hasSuffix("|}")) {
            var range:NSRange = (string.string as NSString).rangeOfString(word)
            string.addAttribute(NSForegroundColorAttributeName, value: UIColor.redColor(), range: range)
            word = word.stringByReplacingOccurrencesOfString("{|", withString: "")
            word = word.stringByReplacingOccurrencesOfString("|}", withString: "")
            string.replaceCharactersInRange(range, withString: word)
        }
    }
    return string
} 
```

你可以像这样使用它：

```
self.msgText.attributedText = self.getColoredText("i {|love|} this!") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-12T18:44:36.323

修改了@fareed 对 swift 2.0 的回答，这是有效的（在操场上测试）：

```
func getColoredText(text: String) -> NSMutableAttributedString {
    let string:NSMutableAttributedString = NSMutableAttributedString(string: text)
    let words:[String] = text.componentsSeparatedByString(" ")
    var w = ""

    for word in words {
        if (word.hasPrefix("{|") && word.hasSuffix("|}")) {
            let range:NSRange = (string.string as NSString).rangeOfString(word)
            string.addAttribute(NSForegroundColorAttributeName, value: UIColor.redColor(), range: range)
            w = word.stringByReplacingOccurrencesOfString("{|", withString: "")
            w = w.stringByReplacingOccurrencesOfString("|}", withString: "")
            string.replaceCharactersInRange(range, withString: w)
        }
    }
    return string
}

getColoredText("i {|love|} this!") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-24T02:13:52.080

**用 Swift 3 重写的**@fareed namrouti实现****

 **```
func getColoredText(text: String) -> NSMutableAttributedString {
    let string:NSMutableAttributedString = NSMutableAttributedString(string: text)
    let words:[String] = text.components(separatedBy:" ")
    var w = ""

    for word in words {
        if (word.hasPrefix("{|") && word.hasSuffix("|}")) {
            let range:NSRange = (string.string as NSString).range(of: word)
            string.addAttribute(NSForegroundColorAttributeName, value: UIColor.red, range: range)
            w = word.replacingOccurrences(of: "{|", with: "")
            w = w.replacingOccurrences(of:"|}", with: "")
            string.replaceCharacters(in: range, with: w)
        }
    }
    return string
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-19T01:02:32.230

```
-(void)colorHashtag
{
NSMutableAttributedString * string = [[NSMutableAttributedString alloc]initWithString:textView.text];

NSString *str = textView.text;
NSError *error = nil;

//I Use regex to detect the pattern I want to change color
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"#(\\w+)" options:0 error:&error];

NSArray *matches = [regex matchesInString:textView.text options:0 range:NSMakeRange(0, textView.text.length)];

for (NSTextCheckingResult *match in matches) {
    NSRange wordRange = [match rangeAtIndex:0];
    [string addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:wordRange]; 
}

[textView setAttributedText:string];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-08T01:44:18.950

为了阐述 Jamal Kharrat 的答案，并将其重写为 SWIFT，以下是如何在 UITextView 中执行此操作：

1.  在情节提要中将您的 UITextView 设置为“Attributed”
2.  右键单击并拖动到视图顶部的 ViewController 图标（XC 6），然后设置委托
3.  为您的 UITextView 创建一个 IBOutlet（我们将其称为“textView”）
4.  让你的类符合 UITextViewDelegate

这是 Jamal 用 SWIFT 编写的函数：

```
func colorHastag(){
    var string:NSMutableAttributedString = NSMutableAttributedString(string: textView.text)
    var str:NSString = textView.text
    var error:NSError?
    var match:NSTextCheckingResult?

    var regEx:NSRegularExpression = NSRegularExpression(pattern: "#(\\w+)", options: nil, error: &error)!
    var matches:NSArray = regEx.matchesInString(textView.text, options: nil, range: NSMakeRange(0, countElements(textView.text)))

    for (match) in matches {
        var wordRange:NSRange = match.rangeAtIndex(0)
        string.addAttribute(NSForegroundColorAttributeName, value: UIColor.blueColor(), range: wordRange)
    }

    textView.attributedText = string
} 
```

现在，您需要调用此函数。要在每次用户键入字符时执行此操作，您可以使用：

```
func textView(textView: UITextView, shouldChangeTextInRange range: NSRange, replacementText text: String) -> Bool {
    self.colorHastag()
    return true
} 
```

您会注意到我将颜色更改为蓝色。您可以将其设置为任何颜色。此外，您可以删除每个变量的 :Type 。您还需要设置 becomeFirstResponder() 并处理 resignFirstResponder() 以获得良好的用户体验。您还可以进行一些错误处理。这只会将主题标签转换为蓝色。您将需要修改或添加一个正则表达式来处理@。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-09T20:08:17.393

对的，这是可能的。但是我发现尝试`NSMutableAttributesString`与 Swift一起使用可能会让人头疼`Range`。下面的代码将让您不必使用`Range`该类，并返回一个属性字符串，其中单词以不同的颜色突出显示。

```
extension String {
    func getRanges(of string: String) -> [NSRange] {
        var ranges:[NSRange] = []
        if contains(string) {
            let words = self.components(separatedBy: " ")
            var position:Int = 0
            for word in words {
                if word.lowercased() == string.lowercased() {
                    let startIndex = position
                    let endIndex = word.characters.count
                    let range = NSMakeRange(startIndex, endIndex)
                    ranges.append(range)
                }
                position += (word.characters.count + 1) // +1 for space
            }
        }
        return ranges
    }
    func highlight(_ words: [String], this color: UIColor) -> NSMutableAttributedString {
        let attributedString = NSMutableAttributedString(string: self)
        for word in words {
            let ranges = getRanges(of: word)
            for range in ranges {
                attributedString.addAttributes([NSForegroundColorAttributeName: color], range: range)
            }
        }
        return attributedString
    }
} 
```

用法：

```
// The strings you're interested in
let string = "The dog ran after the cat"
let words = ["the", "ran"]

// Highlight words and get back attributed string
let attributedString = string.highlight(words, this: .yellow)

// Set attributed string
textView.attributedText = attributedString 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-25T08:40:28.957

解决方案是这样的：

```
NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] init];

NSArray *words=[txtDescription.text componentsSeparatedByString:@" "];

for (NSString *word in words)
{
    if ([word hasPrefix:@"@"] || [word hasPrefix:@"#"])
    {
        [attributedString appendAttributedString:[[NSAttributedString alloc] initWithString:[NSString stringWithFormat:@"%@ ", word]
                                                                                 attributes:@{NSFontAttributeName: [UIFont fontWithName:FONT_LIGHT size:15],
                                                                                              NSForegroundColorAttributeName: [ImageToolbox colorWithHexString:@"f64d5a"]}]];
    }
    else // normal text
    {
        [attributedString appendAttributedString:[[NSAttributedString alloc] initWithString:[NSString stringWithFormat:@"%@ ", word]
                                                                                 attributes:@{NSFontAttributeName: [UIFont fontWithName:FONT_LIGHT size:15],
                                                                                              NSForegroundColorAttributeName: [ImageToolbox colorWithHexString:@"3C2023"]}]];
    }
}

if([[attributedString string] hasSuffix:@" "]) // loose the last space
{
    NSRange lastCharRange;
    lastCharRange.location=0;
    lastCharRange.length=[attributedString string].length-1;

    attributedString=[[NSMutableAttributedString alloc] initWithAttributedString:[attributedString attributedSubstringFromRange:lastCharRange]];
}

[txtDescription setAttributedText:attributedString]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-06T10:48:35.583

设置属性文本后，您可以`UITextView`使用输入字段所需的值设置类型属性。

```
NSDictionary *attribs = @{
    NSForegroundColorAttributeName:[UIColor colorWithHex:kUsernameColor],
    NSFontAttributeName:[UIFont robotoRegularWithSize:40]
};
self.textView.typingAttributes = attribs; 
```**

# java - 如何使用 Formatter 在 java 中格式化字符串

> ID：14231886
> 
> 赞同：2
> 
> 时间：2013-01-09T09:23:13.980
> 
> 标签：java, android, decimalformat

```
public class Test {
    public static void main(String[] args) {
        final String test1 = new String("01,");
        final String test2 = new String("01,0");
        final String test3 = new String("1,00");

        String pattern = "##,##";
        DecimalFormat formatter;
        DecimalFormatSymbols dfs = new DecimalFormatSymbols();
        dfs.setGroupingSeparator(',');

        formatter = new DecimalFormat(pattern, dfs);
        String result1 = formatter.format(test1);
        String result2 = formatter.format(test2);
        String result3 = formatter.format(test3);

        System.out.println("Result 1 == " + result1);
        System.out.println("Result 2 == " + result2);
        System.out.println("Result 3 == " + result3);
    }
} 
```

我正在尝试格式化字符串。我添加了用于格式化的代码。我得到了例外。

**对于所有这些，我希望结果为 01,00。**

例外 -

```
Exception in thread "main" java.lang.IllegalArgumentException: Cannot format given Object as a Number
    at java.text.DecimalFormat.format(DecimalFormat.java:487)
    at java.text.Format.format(Format.java:140)
    at com.test.Test.main(Test.java:21) 
```

如果有人有任何想法，请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:25:12.693

`DecimalFormat.format`只接受`Date`or`Number`对象，不接受`String`!

**编辑-1：**

1)`String pattern = "00.00"`

2)

```
 String result1 = formatter.format(formatter.parse(test1));
        String result2 = formatter.format(formatter.parse(test2));
        String result3 = formatter.format(formatter.parse(test3)); 
```

例如：对于

```
 final String test1 = new String("01,");
    final String test2 = new String("02,3");
    final String test3 = new String("1,00"); 
```

它给了我：

```
Result 1 == 01,00
Result 2 == 02,30
Result 3 == 01,00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:28:56.857

这就是它应该被使用的方式。

```
format = new DecimalFormat(".00");
format.format(10.0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:30:19.343

```
String s = (String.format("%,d", 1000000)).replace(',', ' '); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-02-25T17:07:36.237

```
 int minutes = (int) secondsLeft / 60;
    int seconds = secondsLeft - minutes * 60;

    String upDatePattern ;
    upDatePattern = (String.format("%02d:%02d", minutes,seconds));
    timerTextView.setText(upDatePattern);

    this produces a zero padded "timer" with min/sec
     ex: 02:35
 you can find lots of formatting examples on "Formatter | Android Developers 
```

# c++ - 将 VC++ 解决方案和项目文件从 32 位转换为 64 位

> ID：14231887
> 
> 赞同：1
> 
> 时间：2013-01-09T09:23:15.750
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, command-line

devenv 通过任何开关或任何工具是否允许将 Visual Studio 项目和解决方案从 x86 转换为 X64/AMD64？我对 devenv 中的开关 /Upgrade 感到特别兴奋，它自动将解决方案/项目从以前的版本升级到当前版本，并期待类似的东西来进行位数转换。

我有一组 vcxproj，我想从 32 位和 64 位移植。我理解的过程应该是直截了当的，因为它只需要为 x64 创建一个新配置，复制 Win32 调试/发布的设置，然后盲目替换所有 CRT/MFC 库/dll 并切换几个开关即可它是 64 位版本。

破解 vcxproj 和 sln 文件可能是一种选择，但如果已经存在的话，我不想花时间重新发明轮子。

**注意**如果重要的话，目前我的重点只针对 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:26:53.427

您不需要将您的项目文件从 Win32“升级”到 x64。只需进入您的解决方案的配置管理器，并为需要它的项目配置添加一个 x64 平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T08:05:11.230

我写了一个python脚本来手动完成，有点hacky但它​​似乎工作:)

非常简单，因为解决方案和项目文件都是纯文本。起初我是通过配置管理器完成的，然后我区分了文件并在 python 中执行了相同的过程。

就我而言（protobuf 2），它只有几个“全部替换”。

*   在 sln 和 project 中用 x64 替换 Win32
*   在项目替换

    ```
    <TargetMachine>MachineX86</TargetMachine> 
    ```

    和

    ```
    <TargetMachine>MachineX64</TargetMachine> 
    ```

*   和

    ```
    <DebugInformationFormat>EditAndContinue</DebugInformationFormat> 
    ```

    和

    ```
    <DebugInformationFormat>ProgramDatabase</DebugInformationFormat> 
    ```

*   最后更改 OutDir 以便我的 cmake Find 脚本拾取构建

完整源[https://github.com/madeso/ride/blob/f7d7234972aeaa0ddb89cda030ecfe651678078d/scripts/windows.py#L163](https://github.com/madeso/ride/blob/f7d7234972aeaa0ddb89cda030ecfe651678078d/scripts/windows.py#L163)

# php - 使用 Group By 时的错误准则查询

> ID：14231890
> 
> 赞同：0
> 
> 时间：2013-01-09T09:23:25.307
> 
> 标签：php, postgresql, doctrine, symfony-1.4

我正在使用 Symfony Project 1.4 和 Postgresql

我在教义中使用错误查询

```
$q = Doctrine_Query::create()
 ->select("count(sex) as total, sex")
 ->from('Biodata')
 ->groupBy('sex')           
 ->execute(); 
```

调试时总是出现这样的显示错误：

```
SQLSTATE[42803]: Grouping error: 7 ERROR: column "e.id" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT e.id AS e__id, e.sex AS e__sex, COUNT(e.sex) AS e__0 ...
^. Failing Query: "SELECT e.id AS e__id, e.sex AS e__sex, COUNT(e.sex) AS e__0 FROM biodata e GROUP BY e.sex" 
```

如何修复它并隐藏 e.id 列，这是错误还是需要技巧？

异常结果：

![](../Images/eab94363e1ad54c918f07a15afff0716.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:45:39.483

Doctrine 自动将主键添加到选择列表中。我们在使用 MSSQL 时遇到了同样的错误。

尝试添加不水合结果：

```
$q = Doctrine_Query::create()
 ->setHydrationMode(Doctrine_Core::HYDRATE_NONE)
 ->select("count(sex) as total, sex")
 ->from('Biodata')
 ->groupBy('sex')
 ->execute(); 
```

你不会有列名，但我认为是这样的：

```
+========+=========+
|   0    |    1    |
+========+=========+
|  183   |    1    |
+--------+---------+
|   54   |    2    |
+========+=========+ 
```

# asp.net - 浏览器关闭并重新打开后保持相同的会话

> ID：14231891
> 
> 赞同：4
> 
> 时间：2013-01-09T09:23:35.203
> 
> 标签：asp.net, session

我是 asp.net 的新手。我登录该站点并为用户 ID 创建了会话，将此会话视为 s1。将 cookie (c1) 添加到客户端站点，有效期为 3 天。

假设如果我在没有注销的情况下关闭浏览器并再次使用相同的 url，那么我发现 session 为 null，但我得到了 cookie (c1)，然后我创建了一个新 session。但是会话 s1 仍然占用服务器上的内存。意味着这次两个会话在同一台服务器上占用内存。

我想将会话 s1 与 cookie (c1) 一起使用 - 是否可能。或者如果第二次请求到来，我想删除会话 s1。

我使用的代码是：

```
 if (Session["UserInfo"] != null)
    {
      // code 
    }
    else
    {
        HttpCookie HT = Request.Cookies["User"];
        if (HT != null)
        {
           Session["UserInfo"] = HT["UserName"]; //Here new session is created while previous is already exist on server
        }
        else
        {
           //code
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:05:54.570

IE 在每个请求上生成一个新的会话 ID。因此，当您关闭浏览器时，旧的会话 ID 会丢失，因此浏览器会发送带有新会话 ID 的请求。这就是为什么你无法获得会话的价值。

但是在服务器上它占用了服务器内存，会话超时后由服务器清除。

Firefox 在每个请求上发送具有相同会话 ID 的请求，即使您关闭浏览器选项卡，您也可以获得会话 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:34:59.523

带有表单身份验证的典型 ASP 配置 cookie：

.ASPXFORMSAUTH 过期：30 分钟 ASP.NET_SessionId 过期：会话结束时

因此，当您关闭浏览器时，您将失去会话但不会被注销。当您重新打开浏览器时，只有 ASP.NET_SessionId 已过期。

如果要创建持久会话 cookie，请使用：

[创建持久 ID Cookie](http://www.devproconnections.com/article/security-development/create-persistent-id-cookies)

# objective-c - Objective-C 静态库中的内存管理

> ID：14231896
> 
> 赞同：2
> 
> 时间：2013-01-09T09:23:56.767
> 
> 标签：objective-c, memory-management, static-libraries

我对这个很陌生，我想知道在没有 ARC的情况下`Objectivce-C`正确的方法是什么。可以说我的库有一个返回的方法：`memory management`**`static library`**`NSString*`

```
- (NSString *) foo
{
    ...
    NSString *result = [[NSString alloc] initWithString:@"bar"];
    return [result autorelease];
} 
```

据我了解，由于`foo`分配了`NSString`它，它还需要释放它（或排队等待释放）。`NSString`是一个返回值，所以我唯一能做的就是`autorelease`它。这就产生了一个问题：如果在命令行工具中使用库，开发人员需要知道`foo`需要在 main 内多次`@autoreleasepool`调用，否则会占用内存。在我看来，这就像我将内存管理从库委托给应用程序，这似乎是一件可怕的事情。有一个更好的方法吗？或者我可以以某种方式让需要的开发人员显而易见吗？`foo``@autoreleasepool``foo``@autoreleasepool`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:06:08.050

自动释放池不会自动释放对象；它们需要手动排水。在 Cocoa 应用程序中，这是由主线程的运行循环完成的，因此通常大多数开发人员不必为此做任何事情，也不知道这一点。

但是，在任何长时间运行的函数中，例如命令行工具`main`或后台线程，定期手动清空自动释放池是程序员的责任。

您正在遵循全局内存管理规则，这是正确的做法。没有必要改变任何东西；这与 ARC 或静态库无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:40:38.607

每个线程都需要一个 autoreleasepool*。如果您的代码被调用并且没有适当的池，则线程没有正确设置，这是程序员错误。

除非您创建了线程（或进程），否则这不是您的责任，并且与您的惰性内存管理无关。

方法没有表明它们需要一个自动释放池的原因是因为一个自动释放池总是必须就位。

*当然你可以编写不使用自动释放的Objective-c，而且你几乎可以肯定地推断，当内部发生变化时，你永远不会使用自动释放。这样的代码只能使用 Cocoa 的一小部分（如果有的话），而且可能非常糟糕。

# regex - notepad++中的正则表达式

> ID：14231897
> 
> 赞同：2
> 
> 时间：2013-01-09T09:23:58.033
> 
> 标签：regex, notepad++

我想在记事本++中匹配以下表达式，我该怎么做？ `<table align="center" cellpadding="4" cellspacing="3" border="1" bgcolor="#B1A0C7">`

我想从头开始匹配，`<table`然后在字符之间匹配，然后在第一个停止`>`

我做了以下但它对我不起作用 `(<table).*>$`它一直`>`排在最后一个......我想要第一个`>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:32:27.703

尝试这个：

```
<table[^>]*?> 
```

解释：

> ***`*?`*** 匹配前一个元素零次或多次，但尽可能少。
> 
> ***`[^character_group]`*** 否定：匹配任何不在`character_group`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:32:12.753

尝试这个：

```
<table[^>]*> 
```

用于`[^>]`匹配除 之外的任何字符`>`，使其仅选择第一个标签。这将包括换行符，因此此正则表达式**适用**于：

```
<table align="center"
       cellpadding="4"
       cellspacing="3"
       border="1"
       bgcolor="#B1A0C7"> 
```

# php - 安装 mod_security 后出现 403 禁止错误

> ID：14231899
> 
> 赞同：2
> 
> 时间：2013-01-09T09:23:58.800
> 
> 标签：php, apache, security, mod-security

我已经安装了 mod_security 并为我的域创建了一些例外规则。但是，我`403 forbidden`的某些脚本仍然面临错误。

我有一个名为的 php 文件`myajax.php`，其中包含我们通过 java 脚本 ajax 调用的所有代码。我无法访问某些代码，但是从 mod_security 的日志中跟踪 id。

我已经修改了这些 ID 中的规则`mod_security.conf`并用于`SecRuleRemoveById`这些 ID。在某些情况下，我无法访问 php 代码，并且在 mod_security 日志中找不到相同的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:35:54.703

403 Forbidden 错误通常是 http 的问题。尝试为您的服务器安装最新的 mod-security。我遇到了类似的问题，我不得不在 modsecurity conf 文件中增加 SecPcreMatchLimit 150000 SecPcreMatchLimitRecursion 150000 参数。因为我使用的是旧版本，所以这不起作用。为此，您至少需要拥有 2.6 版本。希望这能解决您的问题。

# laravel - 在 Laravel 4 中生成应用程序密钥

> ID：14231916
> 
> 赞同：1
> 
> 时间：2013-01-09T09:24:45.910
> 
> 标签：laravel, laravel-4

`php artisan key:generate`Laravel 4 中是否删除了该命令？

运行它返回；

```
[InvalidArgumentException]                             
There are no commands defined in the "key" namespace. 
```

你现在应该如何生成密钥？还是您需要手动创建一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:58:41.830

在提出问题时，该功能尚未在 Laravel 中实现。现在有了。

这是对尚未发布的软件提出问题的危险之一。答案会改变。

# asp.net - ListView.DataItem 显示为空

> ID：14231918
> 
> 赞同：0
> 
> 时间：2013-01-09T09:24:55.283
> 
> 标签：asp.net, c#-4.0

Listview绑定代码

```
<asp:Content ID="Content3" ContentPlaceHolderID="leftColumnPlaceHolder" runat="server">
    <asp:ListView ID="lvQuestions" runat="server" OnItemDataBound='lvQuestions_ItemDataBound'>
        <LayoutTemplate>
            <div id="itemPlaceholder" runat="server">
            </div>
            <asp:Button ID="btnSubmitAnswers" runat="server" Text="Submit Answers" OnClick="btnSubmitAnswers_Click" />
        </LayoutTemplate>
        <ItemTemplate>
            <div>
                <%# Container.DataItemIndex + 1 %>:<%# Eval("Body") %>
            </div>
            <asp:RadioButtonList ID="rdlAnswers" runat="server" DataSource='<%#Eval("ExamAnswer") %>' DataTextField='Body' DataValueField="AnswerId">
            </asp:RadioButtonList>
        </ItemTemplate>
    </asp:ListView>
</asp:Content> 
```

> 在提交按钮点击获取列表视图项目时..如下所示，我们将 qsnItem.DataItem 设为**NULL**。

```
foreach (ListViewDataItem qsnItem in lvQuestions.Items)
{
} 
```

请建议这里出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:35:35.167

当您不再使用该控件时`DataItem`，ASP.NET 中的所有数据绑定 Web 控件都处于回发状态，这在启用时是不必要的（默认）。`null``DataBind``ViewState`

因此，您可以使用模板中的控件来获取值：

```
foreach (ListViewDataItem qsnItem in lvQuestions.Items)
{
    RadioButtonList rdlAnswers = (RadioButtonList)qsnItem.FindControl("rdlAnswers");
} 
```

如果您需要旧值，则需要从数据库加载它们或使用[`ListViewUpdatedEventArgs.OldValues` Property](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewupdatedeventargs.oldvalues.aspx)。

# mysql - 具有 40 多列的 mysql 表

> ID：14231921
> 
> 赞同：4
> 
> 时间：2013-01-09T09:25:04.067
> 
> 标签：mysql, sql, optimization, multiple-columns

我的表中有 40 多列，我必须添加更多字段，例如当前城市、家乡、学校、工作、大学、拼贴画..

这些用户数据将为许多匹配的用户提取，这些用户是共同的朋友（与其他用户朋友加入朋友表以查看共同的朋友）并且未被阻止并且还不是用户的朋友。

上面的请求有点复杂，所以我认为将额外的数据放在同一个用户表中以快速访问是个好主意，而不是向表中添加更多的连接，它会降低查询速度。但我想听听你的建议

我的朋友告诉我添加额外的字段，这些字段不会作为序列化数据在一个字段上进行搜索。

**ERD图：**

*   我当前的表：http: [//i.stack.imgur.com/KMwxb.png](https://i.stack.imgur.com/KMwxb.png)
*   如果我加入更多表格：http: [//i.stack.imgur.com/xhAxE.png](https://i.stack.imgur.com/xhAxE.png)

**一些建议**

1.  这个表和列没有错
2.  遵循这种方法[MySQL：Optimize table with many columns](https://stackoverflow.com/questions/8271964/mysql-optimize-table-with-lots-of-columns) - 将额外字段序列化为一个字段，不可搜索
3.  创建另一个表并将大部分数据放在那里。（如果我已经有 3 个或更多表要加入来为用户提取记录（例如，朋友、用户、检查共同的朋友），这在加入时会变得更加困难）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T13:13:48.547

像往常一样 - 这取决于。

首先，[MySQL 可以支持的列数是最大的](http://dev.mysql.com/doc/refman/4.1/en/column-count-limit.html)，而您并不想到达那里。

其次，如果您有很多带有索引的列，则在插入或更新时会对性能产生影响（尽管我不确定这对现代硬件是否重要）。

第三，大表通常是所有看起来与核心实体相关的数据的垃圾场；这很快使设计变得不清楚。例如，您展示的设计显示了 3 个不同的“状态”类型字段（状态、is_admin 和 fb_account_verified） - 我怀疑有一些业务逻辑应该将它们链接在一起（例如，管理员必须是经过验证的用户），但是您的设计不支持。

这可能是也可能不是问题——它更多的是一个概念、架构/设计问题，而不是一个性能/它会起作用的问题。但是，在这种情况下，您可以考虑创建表来反映有关帐户的相关信息，即使它没有 x 对多关系。因此，您可以创建“user_profile”、“user_credentials”、“user_fb”、“user_activity”，所有这些都由 user_id 链接。这使它更整洁，如果您必须添加更多与 facebook 相关的字段，它们就不会悬在表格的末尾。但是，它不会使您的数据库更快或更可扩展。连接的成本可能可以忽略不计。

无论您做什么，选项 2 - 将“很少使用的字段”序列化为单个文本字段 - 都是一个糟糕的主意。您无法验证数据（因此日期可能无效，数字可能是文本，可能缺少非空值），并且在“where”子句中的任何使用都会变得非常缓慢。

一种流行的替代方法是“实体/属性/值”或“键/值”存储。此解决方案有一些好处 - 即使您的架构更改或在设计时未知，您也可以将数据存储在关系数据库中。但是，它们也有缺点：很难在数据库级别验证数据（数据类型和可空性），很难使用外键关系与其他表建立有意义的链接，查询数据可能变得非常复杂 - 想象一下找到所有status 为 1 且 facebook_id 为 null 且注册日期大于昨天的记录。

鉴于您似乎知道数据的架构，我会说“键/值”不是一个好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:18:20.943

我建议进行一些测试。尝试两种方式并对其进行基准测试。没有人能够给你一个明确的答案，因为你没有分享你的硬件配置、示例数据、示例查询、你计划如何使用这些数据等。这里有一些你可能想要考虑的信息。

**按预期使用数据库**

关系数据库是专门为处理数据而设计的。就这样使用它。如果编写正确，在编写良好的模式中连接数据将表现良好。您可以使用 EXPLAIN 来优化查询。您可以记录慢速查询并提高其性能。数据库已经存在多年，如果将所有内容放在一个表中可以提高性能，您不认为这将成为互联网上的所有热门话题并且每个人都会这样做吗？

**发动机类型**

随着行数的增加，插入将如何受到影响？您使用的是 MyISAM 还是 InnoDB？您很可能希望使用 InnoDB，以便获得行级锁定而不是表。确保为您的表使用正确的引擎类型。获取您需要了解两者优缺点的信息。错误的发动机类型会影响性能。

**使用分区提高性能**

寻找提高性能的方法。例如，随着数据集的增长，您可以对数据进行分区。[数据分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)将通过将数据切片保存在单独的分区中来提高大型数据集的性能，从而允许您对大型数据集的部分而不是所有信息运行查询。

**使用正确的列类型**

考虑使用 UUID 主键来实现可移植性和未来增长。如果您使用正确的列类型，它将提高数据的性能。

**不要序列化数据**

使用序列化数据是更糟糕的方法。当您使用序列化字段时，您基本上是将数据库用作文件管理系统。它将保存和检索“文件”，但随后您的代码将负责反序列化、搜索、排序等。我花了一年时间试图解开这样的混乱。这不是数据库的用途。任何建议你这样做的人不仅给你不好的建议，而且他们不知道自己在做什么。在数据库中使用序列化数据的情况很少。

**结论**

最后，您必须做出最终决定。只需确保您充分了解并了解如何存储数据的利弊。我要给出的最后一条建议是找出 mysql 的重度用户在做什么。你认为他们将数据存储在一个表中吗？或者他们是否构建了一个关系模型并按照设计使用的方式使用它？

当你说“我要把所有东西都放在一个表中”时，你是在说你对性能有更多的了解，并且可以在代码中做出更好的选择来优化你的代码，而不是那些不断致力于 MySQL 以使其成为现实的开发人员团队是今天。考虑权衡您的知识与 MySQL 团队以及每天使用它的 DBA、公司和数据库社区成员的累积知识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T00:41:29.657

在某一点上，您应该看看“短行模型”，也称为实体键值存储，以及传统的“长行模型”。

如果您查看 WordPress 使用的架构，您会看到有一个包含 23 列的表 wp_posts 和一个包含 4 列（meta_id、post_id、meta_key、meta_value）的相关表 wp_post_meta。元表是一个“短行模型”表，它允许 WordPress 拥有无限的帖子属性集合。

“长排模型”或“短排模型”都不是最好的模型，通常最好的选择是两者的结合。正如@nevillek 指出的那样，搜索和验证“短行”并不容易，获取数据可能涉及旋转，这在 MySql 和 Oracle 中非常困难。

“长行模型”更容易验证、关联和获取，但当数据稀疏时，它可能非常不灵活且效率低下。某些行可能只有少数非空值。此外，您不能在不修改架构的情况下添加新列，这可能会导致系统中断，具体取决于您的架构。

我最近在一个金融服务系统上工作，每个工具都有 700 多个可能的事实，大多数只有不到 20 个事实。这可以通过设置几十个表来构建，每个表都针对特定的资产类别，或者作为一个包含 700 列的表，但我们选择使用一个包含大约 20 列（包含最流行的事实）的表和一个 4 列的组合包含其他事实的表格。这种设计效率很高，但访问起来很困难，因此我们在 PL/SQL 中构建了一些表函数来帮助解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T21:09:52.220

我有一个一般性的评论给你，

想一想：如果你把超过 10-12 列的东西放在一个表中，即使把它们放在一个表中是有意义的，我想你会在短期、长期和中期付出代价。

您的 3 表方法似乎比 1 表方法更好，但考虑将它们制成 5-6 表而不是 3 表，因为您仍然可以。

将`currently`, `currently_position`, `currently_link`from`user-table`和`work`from移动`user-profile`到一个新表中，主键名为`USERWORKPROFILE`.

将语言环境信息从新信息`user-profile`移到新`USERPROFILELOCALE`信息，因为它本质上是通用的。

是的，所有表中的所有通用属性都应该是`int`而不是`varchar`。例如，City 需要移出一个名为`LIST`_OF_CITIES 的新表，其中包含`cityid`. 并且您的属性`city`应该从 to 更改为`varchar`指向`int`并指向`cityid`LIST_OF_ `CITIES`。

不用担心性能问题；您拥有的表越多，性能就越好，因为您实际上是将性能分配给数据库提供者，而不是全部掌握在自己手中。

# design-patterns - 面向对象的反馈模式

> ID：14231925
> 
> 赞同：1
> 
> 时间：2013-01-09T09:25:21.717
> 
> 标签：design-patterns, feedback

我正在寻找一个好的反馈模式 - 概念，也许问题可能会以不同的方式提出，请告诉我。将尝试描述它。

基本上我正在寻找的是制作一个好的反馈概念的正确方法。例如`Trigger`，对象触发来自其他`Target`对象的函数，该`Trigger`对象对其有某种期望（可能不止一个参数）。这个触发的调用还可以从不同类型的对象进行更多的函数调用，因此它们都需要某种访问权限来响应`Trigger`带有结果参数的`Trigger`对象，然后该对象将与预期的参数进行比较并在收到它们时做出反应。

我需要一个好的概念，因为它必须能够将功能扩展到整个系统。如果重要的话，源代码是用 C++ Qt 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:23:40.870

我会建议[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

基本上，有一个`Observable`对象维护一组`Observers`注册到该对象以侦听某些动作的对象。当`Observable`对象做出这样的动作时，`Observers`会被通知做出了动作并且可以对其做出反应。

因此，在您的情况下， the`Trigger`将是一个`Observable`object 并且`Target`objects 将是`Observers`. `Target`对象可以在`Trigger`对象上注册，并且可以对动作做出反应（*做出反馈*）`Trigger`。

# c++ - C++ 传递成员字段

> ID：14231936
> 
> 赞同：0
> 
> 时间：2013-01-09T09:26:03.963
> 
> 标签：c++, pointers

这是一个愚蠢的简单问题，我正在学习 C++ 并且有以下课程......

```
class Client
{
public:
    Window getWindow() { return window; };

private:
    Window window;
}; 
```

我想知道的是会`getWindow()`返回对我的私有`window`对象或副本的引用吗？我应该在这里使用指针吗？

让我感到沮丧的是，在 Java 中，new 关键字清楚地表明了创建对象的时间和地点，而在 cpp 中则不太清楚，而且我对 C 的经验使事情变得更糟。

谢谢，-科迪

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T09:27:54.683

除非并且直到您明确声明要返回引用，否则它将返回一个副本。请注意，至少在 C++ 中返回指针不是一个好主意

要返回引用，您必须添加`&`到返回类型

```
class Client
{
public:
    Window& getWindow() { return window; };

private:
    Window window;
}; 
```

~~请注意，如果您担心返回值的开销，您可以放心，所有最新的编译器都会在某种程度上做到这一点`return value optimization`。此外，如果您使用 C++11，您还可以利用移动语义。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:27:13.400

默认情况下，C 和 C++ 按值返回。
它返回您的成员的副本。一个好的编译器可能会使用 N/RVO 优化对复制构造函数的额外调用。

如果您需要返回您的成员本身（*这是一个坏主意*），那么您需要返回一个参考：

```
 Window& getWindow() 
      ^^^ 
```

# php - LAMP max_connections、睡眠进程、锁定进程、等待超时、内存不足

> ID：14231945
> 
> 赞同：0
> 
> 时间：2013-01-09T09:26:26.890
> 
> 标签：php, mysql, apache, memory-management, database-connection

我会尽量简短，但仍然完整。**提前**感谢那些花费宝贵时间向我指出可能的解决方案的人。

* * *

Ubuntu 环境下的 PHP/Mysql 应用程序。

原始问题：

```
Keep getting error 'to_many_connections'. 
```

当我检查时：

```
show processlist; 
```

有很多睡眠过程。所以我认为这些是 to_many_connections 错误的原因，因为它们会阻止任何新的传入连接。

更改 mysql 设置：

```
Raise max_connections from 250 to 400;
lower wait_timeout from 60 to 15; 
```

连接似乎有效，但现在我的 apache 占用了内存。只需更改这 2 个设置，它就从 11G 增加到了 25G 以上。我无法想象 150 个额外的 mysql_connections 占用 14G 的额外内存？我也不希望 wait_timeout 设置较低会增加 apache 的内存使用量。它应该在内存中保持更少的连接，因此使用更少的内存？我预计进程使用率会上升，但内存不会。当然不是那些巨额。

尝试重新设置 mysql 设置：

```
keep max_connections at 400
raise wait_timeout to 30 sec 
```

内存使用量下降了大约 5 分钟，但之后又上升了。

**其他注意事项：**

> 我注意到某个表有很多锁定的进程。(mysql: show processlist;) **update:** table 是一个 MyISSAM 表。

我还更改了一些不太理想的数据库实现，有些页面使用 2 个连接到数据库，因为我们正在经历代码重构阶段。从 mysql_query 功能切换到 PDO 功能

> **更新：**
> 
> 新的 pdo 功能将持久连接专门设置为 false（即使它默认为 false），旧的 mysql 功能也不使用持久连接。
> 
> ```
>  public function __construct($dbname, $username, $password) {
>         parent::__construct('mysql:hostname=localhost;dbname=' . $dbname . ';', $username, $password, array(
>             PDO::ATTR_PERSISTENT => false,
>             PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
>             PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
>             PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8;"
>         ));
>     } 
> ```

我很清楚与数据库建立多个连接远非最佳实践，但我们当前的应用程序缺少很多设计模式，一切仍然是程序性的，没有 mvc，没有 OOP。我有义务这样做，因为我的雇主想要结果，并且此刻，无意对我们的应用程序进行完全重写，以使用很久以前就应该实施的设计/编码标准。 **无论如何**，如果这段代码是真正的原因，我会感到惊讶，因为它已经运行了一个多星期，而且由于讨价还价期（1 个月的巨额讨价还价/交易），我们在那一周进行了大量访问在我们的商店）。

对此事的任何见解将不胜感激。截至目前，我不知道下一步可能会解决这个问题。

**update2** 因发现问题而关闭，但与原始帖子无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:49:46.393

我对你有这些大而复杂的问题感到同情！我会补充一些东西，看看你是否尝试过

*   re: apache memory - 我最近一直在做的 apache 测试，实际上指向降低 MaxClients 的数量，在 ab 或 siege 测试下，我实际上在我的测试环境中获得了更好的性能 ~12 而不是 256。虽然这非常多到目前为止在开发环境而不是生产环境中

*   关于锁定的 mysql 进程，您使用的是什么表类型？MyIsam 比我相信的 InnoDB 更容易出现锁定问题。Myisam 是表锁定，其中 innodb 是行 iirc

*   我注意到你写了

    新的 pdo 功能已将持久连接设置为 false

旧代码是使用持久连接吗？我从来没有太多的运气或使用它们

*   你缓存多少？您是否启用了 mysql 查询缓存，在 web 服务器和 mysql 之间使用 memcache 或 nosql 系统怎么样？

我知道很多人会说 memcache 等不是慢速/崩溃应用程序的解决方案，但如果它给你更多的喘息空间，为什么不呢？还有一点哲学什么时候缓存不是缓存？例如，我使用 redis.io，它存储在内存中但也保存到磁盘，每当管理系统更新 mysql 时，它也会更新这个“缓存”，它是持久的，因为数据在停机时间中存活 - 最小的预热问题 - 并且总是最新的所以没有滞后。从智力上讲，它可能有点像警察回避这样的事情，但是在我们的情况下，redis 比我们设法让 mysql 完成同样的任务快 6 倍（开箱即用）......

**更新** 我看到你正在使用 myisam，所以任何锁定问题都可能归结于此，iirc 更新将在持续时间内锁定整个表，这可能导致查询堆积、滚雪球和每次都失败

回复：缓存层缓存可以回避/推迟问题，因为您连接到数据库的次数会更少，我有一些页面根本无法连接！我可以从字面上做一个 mysqld 停止，即使它们在技术上是动态的，它们仍然可以工作

在相关说明中，您是在页面顶部定期连接数据库还是仅在需要时才连接数据库？

**更新** 额外的评论让我想起了一个类似的问题，我曾经有一次，来自第三方提供商的 xml 提要（在页面请求上运行 - 由于政治原因无法预缓存！）运行缓慢，就像网站的其他区域一样会变得很忙，缓慢的 XML 提要会导致阻塞 apache 进程并降低服务器速度，这意味着有些人不会等待他们的页面完成，但数据库仍会尝试向中止的请求提供信息以及新的，所以它起初看起来像一个数据库问题

# c++ - c ++结构字段的最后一个元素

> ID：14231946
> 
> 赞同：0
> 
> 时间：2013-01-09T09:26:26.963
> 
> 标签：c++, set, structure, field

我得到了一个结构，但我不知道它的大小（每次都不一样）。我想将此结构的一个字段中的最后一个位置设置为某个值。在伪代码中，我的意思是这样的： **structureA.fieldB[end] = cert_value** ;

我会在matlab中做但是我无法在c ++中找到正确的语法，你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:38:06.677

在 Matlab 中，[结构](http://www.cs.utah.edu/~germain/PPS/Topics/Matlab/structures.html)数据类型包含键值对，其中“值”可能是不同的类型。在 C++ 中，有一些可用的键值容器（关联容器，如 set、map、multimap），但它们通常存储单一类型的元素。如果我理解正确，您需要的是类似

“一个”：1

“二”：[1,2,5]

“三”：“名称”

这意味着您的结构类似于[Python 字典](http://en.wikibooks.org/wiki/Python_Programming/Dictionaries)。

在 C++ 中，我听说使用具有真正不同类型的容器的唯一方法是使用[boost::any](http://www.boost.org/doc/libs/1_52_0/doc/html/any.html)，它被接受为[这个问题](https://stackoverflow.com/q/4738405/735756)的答案。

如果你用不同类型的元素打包一个容器，那么你可以使用容器的 end() 成员函数来获取最后一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:08:06.137

您需要 sizeof，这为您提供了数组的大小（以字节为单位）。由于您想要最后一个元素的索引，因此您必须将此数字除以一个元素的字节数。你最终得到：

```
int index_end = sizeof(structureA.fieldB) / sizeof(structureA.fieldB[0]);
structureA.fieldB[index_end] = new_value; 
```

# c# - 选择属性为 x 的后代，如果不存在，则选择属性为 y 的后代

> ID：14231947
> 
> 赞同：0
> 
> 时间：2013-01-09T09:26:29.100
> 
> 标签：c#, linq

我有这个，我可以在周期为 2 时选择我想要的。但如果周期 2 不存在，我想选择周期为 3 的位置。如何？

```
 return document.Descendants("time")
                        .Where(node => (string)node.Attribute("period") == "2")
                        .Take(5)
                        .Select(status => WeatherFactory.Create(status, city, pos))
                        .ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:30:47.230

你不能只改变Where to：

```
.Where(node => (string)node.Attribute("period") == "2" || (string)node.Attribute("period") == "3") 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:33:32.100

如果您首先选择 period == 2 的所有后代，请检查它是否包含任何结果，如果它没有选择 period == 3 的所有后代：

```
var timeDescendants = document.Descendants("time")
   .Where(node => (string)node.Attribute("period") == "2");
if(!timeDescendants.Any()) {
   timeDescendants = document.Descendants("time")
      .Where(node => (string)node.Attribute("period") == "3");
}
return timeDescendants.Take(5)
.Select(status => WeatherFactory.Create(status, city, pos))
.ToList(); 
```

# python - 使用opencv在python中进行运动检测的算法？

> ID：14231948
> 
> 赞同：0
> 
> 时间：2013-01-09T09:26:30.540
> 
> 标签：python, python-2.7, computer-vision, motion-detection

我一直在寻找运动检测算法很长时间，但无法决定哪种算法会给我最好的性能。我正在使用 IP 摄像头使用 opencv 捕获视频流，并且还想检测运动（实际上是人体运动），任何人都可以建议我哪种算法可以在任何照明环境中为我提供最佳性能。

# shell - 如何将 ash 中的文件内容读入参数？

> ID：14231951
> 
> 赞同：1
> 
> 时间：2013-01-09T09:26:35.080
> 
> 标签：shell, unix, ash

我正在尝试读取一个在灰壳中包含一个数字的文件。这样做的 bash 方式

```
ARG=`cat /tmp/tempfile` 
```

不起作用，我知道 ARG 在这行代码之后没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:05:33.820

尝试用引号将其括起来以使其不会在第一个换行符处停止：

```
ARG="`cat /tmp/tempfile`" 
```

或者

```
ARG="$(cat /tmp/tempfile)" 
```

或者

```
read ARG  </tmp/tempfile #only 1st line will be read 
```

# oracle - 为什么Oracle在几次删除后卡住了？

> ID：14231954
> 
> 赞同：0
> 
> 时间：2013-01-09T09:26:43.480
> 
> 标签：oracle, cycle

我有一个喜欢的应用程序：

```
delete from tableA where columnA='somevalue' and rownum<1000 
```

在循环中：

```
 while(deletedRows>0) {
    begin tran
    deletedRows = session ... "delete from tableA where columnA='somevalue' 
    and rownum<1000"....
    commit tran

} 
```

它运行了几次（每次删除大约需要 20 秒），然后挂了很长时间为什么？有可能修复吗？谢谢。

* * *

删除是在循环中运行而不是作为单个 SQL 语句运行的原因是缺少回滚空间。有关更多信息，请参阅[此问题](https://stackoverflow.com/q/14143510/146325)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:43:55.590

您可能会遇到许多不同的问题。正如您所说，数据库挂起的主要原因是您的数据库遇到**ORA-00257 Archiver error**。

每次删除都会产生一个重做向量，然后所有重做都会下载到存档日志中。当归档日志空间用尽时，您的会话会挂起并一直卡住，直到有人释放空间。通常，您的 DBA 有一项工作会每小时运行一次归档日志备份（这可能是几个小时或每 5 分钟一次，具体取决于数据库工作负载等），并且在备份完成后，所有会话都会正确进行。

根据数据库配置，从客户端的角度来看，您可能看不到错误，而只是描述了会话等待空间释放的行为。

在设计方面，我同意其他用户的观点，即循环中的 DELETE 不是一个好主意。知道为什么要尝试执行此循环而不是单个 DELETE 语句可能会很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:30:46.480

每次查询从头开始扫描表。因此，它会扫描没有要删除的行的区域（`columnA='somevalue'`）。他们离桌子的第一块越来越远。

如果表很大并且没有`columnA='somevalue'`查询将花费时间来验证您的条件的所有行。

您可以做的是在`columnA`. 在这种情况下，引擎将更快地*知道*具有该条件的行在哪里（索引搜索速度更快）。

如果您在并发系统中，另一种可能性是有人更新了您试图删除的行，但没有提交事务，因此该行被锁定。

# python - 查找通向用户照片的边数

> ID：14231958
> 
> 赞同：1
> 
> 时间：2013-01-09T09:26:56.523
> 
> 标签：python, facebook, web

我没有冒险查看开放图调用以查找照片具有的边数（通过边，我的意思是评论/喜欢/标签），但想知道它是否可能。

具体来说，我希望（在获得授权后）浏览用户的照片并找出哪些照片拥有最多的点赞/评论/标签。这可以通过 GRAPH 调用来完成吗？

我以前处理过一些图形调用，但从来没有处理过照片。我主要是 C 和 iOS/Cocoa/Obj-C 开发人员。我正在使用 Python（学习它并使用这个项目作为我的动力）来制作一个网络应用程序。

应用程序需要一些时间来检索照片是可以的 - 这是意料之中的，我不希望用户反复返回此应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:08:03.317

使用 FQL 很容易做到这一点。这将为您提供按喜欢数量降序排列的照片列表。

```
SELECT object_id, created, src, like_info, comment_info FROM photo WHERE owner = me() 
   ORDER BY like_info.like_count DESC 
```

计数标签比较棘手，因为 Graph API 和 FQL 都没有计数方法，也没有`tag_info`字段。

# ruby - 使用 net/smtp 向多个收件人发送电子邮件

> ID：14231964
> 
> 赞同：2
> 
> 时间：2013-01-09T09:27:19.883
> 
> 标签：ruby, email

我有这个代码：

```
require "net/smtp"

MAIL_SERVER = "xxx.ad.xxx.net"

def lib_sending_report(email_hash)

    # define message body

    message = <<"MESSAGE_END"

From: <#{email_hash[:sender]}>

To: <#{email_hash[:recipients]}>

MIME-Version: 1.0

Content-type: text/html

Subject: #{email_hash[:subject]}

<p>Hi All,</p>

    <p>We've just executed a round of load test.</p>

<p>Regards</p>
MESSAGE_END

    Net::SMTP.start(MAIL_SERVER) do |smtp|
      smtp.send_message message, email_hash[:sender], email_hash[:recipients]
    end
end

test = ""
lib_sending_report( {:sender => "abc@xxx.com",
                      :recipients => "abc@xxxx.com",
                      :subject => "Load.Test.Report.of.#{test}"} ) 
```

当我更改`:recipients => "abc@xxxx.com"`为 时`:recipients => "abc@xxxx.com;efg@xxx.com"`，它给了我这个错误：

```
 501 5.5.4 Invalid Address (Net::SMTPSyntaxError) 
```

`:recipients => "abc@xxxx.com"`只有一个收件人时，我可以成功发送电子邮件。

我哪里错了？看来我使用的分隔符（分号）是错误的。

我尝试使用逗号代替分号，但没有用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T10:33:15.627

Net::SMTP`send_message`采用“To:”地址字符串数组。

根据文档：

> to_addr 是一个字符串或字符串或字符串数​​组，表示一个或多个目标邮件地址。

文档中的此示例显示了如何：

```
Net::SMTP.start('smtp.example.com') 做 |smtp|
  smtp.send_message msgstr,
                    '来自@example.com',
                    ['dest@example.com', 'dest2@example.com']
结尾

```

# symfony - Symfony2 - 检查文件是否存在

> ID：14231967
> 
> 赞同：14
> 
> 时间：2013-01-09T09:27:37.867
> 
> 标签：symfony, twig

我在 Twig 模板中有一个循环，它返回多个值。最重要的 - 我的条目的 ID。当我没有使用任何框架或模板引擎时，我只是`file_exists()`在循环中使用。现在，我似乎无法在 Twig 中找到方法。

当我在标题中显示用户的头像时，我`file_exists()`在控制器中使用，但我这样做是因为我没有循环。

我在 Twig 中尝试`defined`过，但它对我没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-09T09:41:35.777

如果要检查不是 twig 模板的文件是否存在（这样定义的不能工作），请创建一个 TwigExtension 服务并将 file_exists() 函数添加到 twig：

`src/AppBundle/Twig/Extension/TwigExtension.php`

```
<?php

namespace AppBundle\Twig\Extension;

class FileExtension extends \Twig_Extension
{

    /**
     * Return the functions registered as twig extensions
     * 
     * @return array
     */
    public function getFunctions()
    {
        return array(
            new Twig_SimpleFunction('file_exists', 'file_exists'),
        );
    }

    public function getName()
    {
        return 'app_file';
    }
}
?> 
```

注册您的服务：

`src/AppBundle/Resources/config/services.yml`

```
# ...

parameters:

    app.file.twig.extension.class: AppBundle\Twig\Extension\FileExtension

services:

    app.file.twig.extension:
        class: %app.file.twig.extension.class%
        tags:
            - { name: twig.extension } 
```

就是这样，现在您可以在树枝模板中使用 file_exists() ;)

一些template.twig：

```
{% if file_exists('/home/sybio/www/website/picture.jpg') %}
    The picture exists !
{% else %}
    Nope, Chuck testa !
{% endif %} 
```

**编辑回答您的评论：**

要使用 file_exists()，你需要指定文件的绝对路径，所以你需要 web 目录的绝对路径，这样做可以访问你的 twig 模板 app/config/config.yml 中的 web 路径：

```
# ...

twig:
    globals:
        web_path: %web_path%

parameters:
    web_path: %kernel.root_dir%/../web 
```

现在您可以在 twig 模板中获取文件的完整物理路径：

```
{# Display: /home/sybio/www/website/web/img/games/3.jpg #}
{{ web_path~asset('img/games/'~item.getGame.id~'.jpg') }} 
```

因此，您将能够检查文件是否存在：

```
{% if file_exists(web_path~asset('img/games/'~item.getGame.id~'.jpg')) %} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-17T20:49:28.630

我创建了一个 Twig 函数，它是我在这个主题上找到的答案的扩展。我的`asset_if`函数有两个参数：第一个是要显示的资产的路径。如果第一个资产不存在，则第二个参数是备用资产。

创建您的扩展文件：

src/Showdates/FrontendBundle/Twig/Extension/ConditionalAssetExtension.php：

```
<?php

namespace Showdates\FrontendBundle\Twig\Extension;

use Symfony\Component\DependencyInjection\ContainerInterface;

class ConditionalAssetExtension extends \Twig_Extension
{
    private $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    /**
     * Returns a list of functions to add to the existing list.
     *
     * @return array An array of functions
     */
    public function getFunctions()
    {
        return array(
            'asset_if' => new \Twig_Function_Method($this, 'asset_if'),
        );
    }

    /**
     * Get the path to an asset. If it does not exist, return the path to the
     * fallback path.
     * 
     * @param string $path the path to the asset to display
     * @param string $fallbackPath the path to the asset to return in case asset $path does not exist
     * @return string path
     */
    public function asset_if($path, $fallbackPath)
    {
        // Define the path to look for
        $pathToCheck = realpath($this->container->get('kernel')->getRootDir() . '/../web/') . '/' . $path;

        // If the path does not exist, return the fallback image
        if (!file_exists($pathToCheck))
        {
            return $this->container->get('templating.helper.assets')->getUrl($fallbackPath);
        }

        // Return the real image
        return $this->container->get('templating.helper.assets')->getUrl($path);
    }

    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName()
    {
       return 'asset_if';
    }
} 
```

注册您的服务（`app/config/config.yml`或`src/App/YourBundle/Resources/services.yml`）：

```
services:
    showdates.twig.asset_if_extension:
        class: Showdates\FrontendBundle\Twig\Extension\ConditionalAssetExtension
        arguments: ['@service_container']
        tags:
          - { name: twig.extension } 
```

现在在您的模板中使用它，如下所示：

```
<img src="{{ asset_if('some/path/avatar_' ~ app.user.id, 'assets/default_avatar.png') }}" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T13:26:59.323

我和Tomek有同样的问题。我使用了 Sybio 的解决方案并进行了以下更改：

1.  app/config.yml => 在 web_path 末尾添加“/”

    ```
    parameters:
        web_path: %kernel.root_dir%/../web/ 
    ```

2.  在没有“资产”的情况下调用 file_exists ：

    ```
    {% if file_exists(web_path ~ 'img/games/'~item.getGame.id~'.jpg') %} 
    ```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-14T17:01:59.740

这是我的解决方案，使用 SF4、autowire 和 autoconfigure：

```
namespace App\Twig;

use Twig\Extension\AbstractExtension;
use Twig\TwigFunction;
use Symfony\Component\Filesystem\Filesystem;

class FileExistsExtension extends AbstractExtension
{
    private $fileSystem;
    private $projectDir;

    public function __construct(Filesystem $fileSystem, string $projectDir)
    {
        $this->fileSystem = $fileSystem;
        $this->projectDir = $projectDir;
    }

    public function getFunctions(): array
    {
        return [
            new TwigFunction('file_exists', [$this, 'fileExists']),
        ];
    }

    /**
     * @param string An absolute or relative to public folder path
     * 
     * @return bool True if file exists, false otherwise
     */
    public function fileExists(string $path): bool
    {
        if (!$this->fileSystem->isAbsolutePath($path)) {
            $path = "{$this->projectDir}/public/{$path}";
        }

        return $this->fileSystem->exists($path);
    }
} 
```

在 services.yaml 中：

```
services:
    App\Twig\FileExistsExtension:
        $projectDir: '%kernel.project_dir%' 
```

在模板中：

```
# Absolute path
{% if file_exists('/tmp') %}
# Relative to public folder path
{% if file_exists('tmp') %} 
```

我是 Symfony 的新手，所以欢迎大家发表评论！

另外，由于最初的问题是关于 Symfony 2，也许我的答案不相关，我最好自己提出一个新问题和答案？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-15T11:23:03.523

改进 Sybio 的答案，我的版本不存在 Twig_simple_function，例如，这里没有任何东西适用于外部图像。所以我的文件扩展名文件是这样的：

```
namespace AppBundle\Twig\Extension;

class FileExtension extends \Twig_Extension
{
/**
 * {@inheritdoc}
 */

public function getName()
{
    return 'file';
}

public function getFunctions()
{
    return array(
        new \Twig_Function('checkUrl', array($this, 'checkUrl')),
    );
}

public function checkUrl($url)
{
    $headers=get_headers($url);
    return stripos($headers[0], "200 OK")?true:false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-06T10:49:58.410

只需对 Sybio 的贡献添加一点评论：

> Twig_Function_Function 类自 1.12 版起已弃用，并将在 2.0 版中删除。请改用 Twig_SimpleFunction。

我们必须通过 Twig_SimpleFunction 更改类 Twig_Function_Function：

```
<?php

namespace Gooandgoo\CoreBundle\Services\Extension;

class TwigExtension extends \Twig_Extension
{

    /**
     * Return the functions registered as twig extensions
     *
     * @return array
     */
    public function getFunctions()
    {
        return array(
            #'file_exists' => new \Twig_Function_Function('file_exists'), // Old class
            'file_exists' => new \Twig_SimpleFunction('file_exists', 'file_exists'), // New class
        );
    }

    public function getName()
    {
        return 'twig_extension';
    }
} 
```

其余的代码仍然像 Sybio 所说的那样工作。

# dynamic - 使用 DD4T TBB 发布内容时出现序列化错误

> ID：14231975
> 
> 赞同：1
> 
> 时间：2013-01-09T09:27:56.033
> 
> 标签：dynamic, tridion, tridion-2011, tridion2009, dd4t

我们从源代码控制重建了 DD4T TBB，并使用 TCMUploadAssembly.exe 将它们部署到 tridion。

我们创建了一个带有多媒体链接字段、组件链接字段和文本字段的简单组件，并填充了这些值。然后创建了一个 CT，其中包含 [生成动态组件，为组件发布二进制文件] TBB，并尝试发布单个 DCP。

我们能够在模板生成器中针对组件运行 CT 并获得预期的输出 [即格式良好的序列化组件 XML 输出]

但是，在发布时，我们会收到序列化错误。（见下文） 。代码尝试序列化任何组件字段（文本/多媒体/组件链接等）时发生此错误

我们无法确定根本原因。尝试远程调试代码，即使在序列化我们面临这个问题的组件对象时正确设置了所有 dynamic.component 对象属性。即使尝试重新启动 COM+、发布服务，但问题仍然存在。任何指针都受到高度赞赏。

**无法找到代码在模板生成器中正确运行而没有序列化错误但在发布时失败并出现以下错误的原因。**

这是错误消息：

> 生成 XML 文档时出错。
> 
> 生成 XML 文档时出错。
> 
> 你调用的对象是空的。
> 
> 组件：模板
> 
> 错误代码：0
> 
> 用户：NORD\DWTMTSUser
> 
> StackTrace 信息详细信息：
> 
> 在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterField.XSArrayInfo.get_Item（对象 a，Int32 i）
> 
> 在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterField.Write13_Field（字符串 n，字符串 ns，对象 o，布尔 isNullable，布尔需要类型）
> 
> 在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterField.Write14_Field（对象 o）
> 
> 在 System.Xml.Serialization.XmlSerializer.Serialize（XmlWriter xmlWriter，对象 o，XmlSerializerNamespaces 命名空间，字符串 encodingStyle，字符串 id）
> 
> 在 System.Xml.Serialization.XmlSerializer.Serialize（XmlWriter xmlWriter，对象 o）
> 
> 在 DD4T.ContentModel.SerializableDictionary`3.WriteXml(XmlWriter writer) 在 D:\DW-Source\Mainline\Src\DD4T\DD4T.ContentModel\SerializableDictionary.cs:line 80
> 
> 在 System.Xml.Serialization.XmlSerializationWriter.WriteSerializable（IXmlSerializable 可序列化，字符串名称，字符串 ns，布尔 isNullable，布尔包装）
> 
> 在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write13_Component(String n, String ns, Component o, Boolean isNullable, Boolean needType) in :line 0
> 
> 在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write32_Component(Object o) in :line 0
> 
> 在 Microsoft.Xml.Serialization.GeneratedAssembly.ComponentSerializer.Serialize(Object objectToSerialize, XmlSerializationWriter writer) in :line 0
> 
> 在 System.Xml.Serialization.XmlSerializer.Serialize（XmlWriter xmlWriter，对象 o，XmlSerializerNamespaces 命名空间，字符串 encodingStyle，字符串 id）
> 
> 在 System.Xml.Serialization.XmlSerializer.Serialize（XmlWriter xmlWriter，对象 o，XmlSerializerNamespaces 命名空间，字符串 encodingStyle，字符串 id）
> 
> 在 System.Xml.Serialization.XmlSerializer.Serialize（XmlWriter xmlWriter，对象 o，XmlSerializerNamespaces 命名空间，字符串 encodingStyle）
> 
> 在 System.Xml.Serialization.XmlSerializer.Serialize（XmlWriter xmlWriter，对象 o，XmlSerializerNamespaces 命名空间）
> 
> 在 DD4T.Templates.Base.BaseComponentTemplate.Transform(Engine engine, Package package) 在 D:\DW-Source\Mainline\Src\DD4T\DD4T.Templates.Base\BaseComponentTemplate.cs:line 88
> 
> 在 Tridion.ContentManager.Templating.Assembly.AssemblyMediator.Transform（引擎引擎，模板模板，包包）
> 
> 在 Tridion.ContentManager.Templating.Assembly.CSharpSourceCodeMediator.RunTemplate（引擎引擎，包包，字符串 templateUri，字符串类名）
> 
> 在 Tridion.Templating.CSharpTemplate.CSharpSourceTemplate.Transform（引擎 __engine，包 __package）
> 
> 在 Tridion.ContentManager.Templating.Assembly.CSharpSourceCodeMediator.Transform（引擎引擎，模板模板，包包）
> 
> 在 Tridion.ContentManager.Templating.Engine.ExecuteTemplate（模板模板，包包）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:19:07.930

Quirijn 的回答对您有帮助吗？[https://groups.google.com/d/msg/dynamic-delivery-4-tridion/K0BzzPovUz4/1RvTHFHktukJ](https://groups.google.com/d/msg/dynamic-delivery-4-tridion/K0BzzPovUz4/1RvTHFHktukJ)

此外，如果您有多个发布者，请确保将 DD4T.Templates.Base.dll 添加到所有发布者的 GAC。（如果您选择了 Q 答案的选项 2）

# java - SimpleDateformat 和“月中的星期几”（F）

> ID：14231978
> 
> 赞同：11
> 
> 时间：2013-01-09T09:28:08.543
> 
> 标签：java

我想知道一周中的哪一天是当天，并查看 SimpleDateFormat 类，我认为“F”是我需要的。所以我写了一个小测试：

```
System.out.println(new SimpleDateFormat("F").format(new Date())); 
```

今天是星期三，我希望得到 3 作为输出。相反，我得到 2。

由于英语不是我的母语，我是否误解了格式的含义？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-09T09:36:50.420

`F`- 一个月的星期几

`E`- 星期天名称

try `u`- 星期几（1 = 星期一，...，7 = 星期日）

请注意，'u' 是从 Java 7 开始的，但如果您只需要一周中的天数，请使用 Calendar

```
 Calendar c = Calendar.getInstance();
   System.out.println(c.get(Calendar.DAY_OF_WEEK)); 
```

您可以通过更改区域设置或直接更改为一周的第一天

```
 c.setFirstDayOfWeek(Calendar.SUNDAY); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-09T09:35:26.450

今天是本月的第二个星期三。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-17T20:31:45.073

java.util.Calendar/.Date 和相关的类是一个令人困惑的混乱，因为你已经学会了艰难的方式。从零开始计算月份数字和星期几是那些旧课程中许多糟糕的设计选择之一。

# java.time

[Java 8 和后来的java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)框架已经取代了这些旧类。新课程的灵感来自非常成功的[Joda-Time](http://www.joda.org/joda-time/)框架，旨在作为其继任者，在概念上相似但重新架构。由[JSR 310](http://jcp.org/en/jsr/detail?id=310)定义。由[ThreeTen-Extra](http://www.threeten.org/threeten-extra/)项目扩展。请参阅[教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。

## `DayOfWeek`

对于星期几，使用命名良好的[enum](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。[`DayOfWeek`](http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html)

[如果您想要一个符合ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)的星期的整数，其中星期一 = 1 和星期日 = 7，您可以从`DayOfWeek`.

## 转换

如果以 java.util.Calendar 对象开头，则转换为 java.time。

An是[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)`Instant`时间线上的时刻。

```
Instant instant = myJavaUtilCalendarObject.toInstant(); 
```

应用时区以获取日期以获取星期几。

```
ZoneId zoneId = ZoneId.of( "America/Montreal" );
ZonedDateTime zdt = ZonedDateTime.ofInstant( instant , zoneId );
DayOfWeek dayOfWeek = zdt.getDayOfWeek(); 
```

请注意，时区对于确定日期至关重要，因此也是星期几。世界各地的日期不一样。例如，巴黎的新一天比蒙特利尔更早。

## 星期几

现在我们有了 java.time 和 Java 中内置的这个枚举，我建议你自由地传递这些枚举实例，而不是一个[幻数](https://en.wikipedia.org/wiki/Magic_number_%28programming%29)。

但是，如果您坚持使用整数，请询问`DayOfWeek`.

```
int dayOfWeekNumber = dayOfWeek.getValue(); 
```

## 星期几的字符串

该枚举为星期几的名称生成一个本地化的字符串。

```
String output = dayOfWeek.getDisplayName( TextStyle.FULL , Locale.CANADA_FRENCH );  // Or Locale.ENGLISH. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T09:30:47.590

星期几的索引从 0 开始，而不是 1。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T09:32:46.647

```
F -> Day of week in month(1-5) 
```

今天是 -`09/01/2013(dd/MM/yyyy)`这是一周中的第 2 次，所以它打印了 2。

如果您尝试使用，`16/01/2013`那么它将打印 3。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-29T15:34:07.507

**F = 月中的星期**
**几 1day**到**7day**，它将打印**1**。
**从 8 天**到14**天**，它会打印**2**。
**从 15 天**到**21 天**，它会打印**3**。
**22day**到**28day**会打印**4**和
**29day**到**31day**会打印**5**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-22T10:26:56.163

只需使用此方法即可。

```
public String day(Date date) {
    SimpleDateFormat sdf = new SimpleDateFormat("EEEEEEEEE", new Locale("tr", "TR"));
    return sdf.format(date);
} 
```

# servercontrol - 为什么多个“查找”在 SC 查询中不起作用

> ID：14231986
> 
> 赞同：1
> 
> 时间：2013-01-09T09:28:51.700
> 
> 标签：servercontrol

我写了一个命令行

```
sc query PlugPlay | FIND "SERVICE_NAME" | FIND "STATE" 
```

仅列出服务名称及其状态，但不提供任何输出。请纠正我如何仅列出服务名称及其状态（运行或停止）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-23T15:48:22.893

您可以使用 Windows 的内置`findstr`命令执行此操作。如果你给它多个单词来查找，用空格分隔，它将打印匹配任何单词的行（即`findstr "a b"`等同于`grep -E 'a|b'`）。

```
sc query plugplay | findstr "SERVICE_NAME STATE" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T14:39:16.393

像这样运行两个管道不是“或”操作，而是“与”操作。它只会输出同时包含 SERVICE_NAME 和 STATE 的行（这将是 none，因此没有输出是正确的）。如果你只运行第一个 find 它给出

```
C:\>sc query PlugPlay | FIND "SERVICE_NAME"
SERVICE_NAME: PlugPlay

C:\> 
```

因此状态信息已被删除。

windows`find`命令太简单了，只能做你想做的事，但可以使用unix [grep](http://www.gnu.org/software/grep/manual/grep.html)命令来实现。[以 cygwin](http://www.cygwin.com/)为例：

```
$ sc query PlugPlay | grep -E 'SERVICE_NAME|STATE'
SERVICE_NAME: PlugPlay
        STATE              : 4  RUNNING
$ 
```

# java - 如何在eclipse中使用包含空格的程序参数运行应用程序？

> ID：14231987
> 
> 赞同：2
> 
> 时间：2013-01-09T09:28:54.673
> 
> 标签：java, eclipse

在（Linux）命令行上，我使用包含空格的命令行参数启动 Java 类 je3.gui.ShowBean，方法如下：

```
 $ cd ~/workspace/JavaExamles/bin
    $ java je3.gui.ShowBean javax.swing.JButton 'text=Hello World!' 
```

最后一个参数包含一个空格（'text=Hello World!'）。空格将命令行拆分为不同的参数。如果我想在参数中有一个空格，我必须引用参数或用反斜杠转义空格。

在命令行上运行的 main() 的参数是：

```
 args[0] = "javax.swing.JButton"
    args[1] = "text=Hello World" 
```

但是当 gui.ShowBean 在 eclipse 中启动时，参数是：

```
 args[0] = "javax.swing.JButton"
    args[1] = "'text=Hello"
    args[2] = "World!" 
```

这实际上不是我想要的。

如何在 Eclipse 中实现与命令行相同的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:34:34.897

您确定在 Eclipse 中使用参数 text=Hello World! 运行 ShowBean！而不是“text=Hello World！”？