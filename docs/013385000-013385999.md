# StackOverflow 问答 13385000-13385999

# c# - 将创建的记录保存到数据库失败

> ID：13385001
> 
> 赞同：0
> 
> 时间：2012-11-14T18:30:03.367
> 
> 标签：c#, entity-framework

基本上，实体框架 4.5，c# 4.0。数据库服务器 2008。

我打算创建新记录并将它们插入到表中，但是当我检查数据库时没有任何变化。为什么？

```
public DbSet<IxDetails> IxDetailRecords { get; set; }
IxContext ixContext = new IxContext();

var list = (from Ix in ixContext.IxDetailRecords
                   select Ix).ToList();
for (int k = 0; k < 100; k++)
{
       IxDetails ix = ixContext.IxDetailRecords.Create();
       ix.EnteredBy = "";// current user;
       ix.EntryDate = DateTime.Now;
       ix.FacilityID = facility;
       ix.FirstName = "";
       list.Add(ix);
 }
 ixContext.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:36:18.363

您将项目添加到结果中返回的列表中，而不是添加到表示数据库查询的实际集合中。

如果您查看方法，`ixContext.IxDetailRecords`您应该会看到一个`Attach`方法（或类似的东西，取决于提供者）。使用它将新创建的项目附加到数据库上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:41:04.203

试试这个：

```
public DbSet<IxDetails> IxDetailRecords { get; set; }
IxContext ixContext = new IxContext();

for (int k = 0; k < 100; k++)
{
       IxDetails ix = ixContext.IxDetailRecords.Create();
       ix.EnteredBy = "";// current user;
       ix.EntryDate = DateTime.Now;
       ix.FacilityID = facility;
       ix.FirstName = "";
       ixContext.IxDetailRecords.Add(ix);
 }
 ixContext.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:48:56.683

代码优先方法如下所示：

```
public class YourDatabaseContext : DbContext
{
    public DbSet<IxDetails> IxDetailRecords { get; set; }
}

public class DataLoader
{    
    public void AddRecords()
    {
        using (var db = new YourDatabaseContext())
        {
            var newRecord = new IxDetailRecord {... };
            db.IxDetailRecords.Add(newRecord);
            db.Save();
        }
    }
} 
```

# microdata - 将 schema.org 微数据用于数据库内容

> ID：13385004
> 
> 赞同：0
> 
> 时间：2012-11-14T18:30:14.000
> 
> 标签：microdata, schema.org

我想知道是否可以使用 schema.org 微数据标记文本字段，这些字段将包含从数据库中检索到的值，但在加载网页时这些值最初是空的。基本上，我有一些我想使用微数据标记的字段，这些字段在从数据库中检索到值之前不会包含任何数据，其中的填充将由用户启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T04:26:00.820

微数据格式是关于使数据机器可读。

您“可以”标记文本字段，但我不确定您为什么要这样做。

搜索引擎只会看到它不会填写的空字段，所以那里没有帮助。

在用户填写数据后，浏览器可能会对这些数据执行某些操作，但我无法想象会发生什么。

如果您的表单被保存并显示在另一个页面上，那么该页面是微数据标记的完美候选者。

# ruby-on-rails - 为 nil 调用 id ，对于 form_for 会错误地为 4 。为什么 nil 总是 4？

> ID：13385006
> 
> 赞同：3
> 
> 时间：2012-11-14T18:30:19.070
> 
> 标签：ruby-on-rails

当我使用 rails form_for

```
form_for @users do |f|
end 
```

为什么说 nil 的值为 4？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:32:09.673

这可能会帮助你。这是因为 nil 的对象 id 是 4。

[http://blog.bigbinary.com/2008/06/23/why-the-id-of-nil-is-4-in-ruby.html](http://blog.bigbinary.com/2008/06/23/why-the-id-of-nil-is-4-in-ruby.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:33:44.847

在控制台检查这个，

```
nil.object_id # => 4 
```

所以这里看起来**@users**对象为零。

# python - 使用 pydot 绘制方形线

> ID：13385007
> 
> 赞同：1
> 
> 时间：2012-11-14T18:30:19.673
> 
> 标签：python, python-2.7, graphviz, pydot

我需要生成一个图表。我使用`pydot`图书馆。我的代码是：

```
import pydot
people = ['person_%d'%i for i in range(10)]
graph = pydot.Dot(graph_type='graph', rankdir='LR', splines='ortho')
# create nodes for people
node_list = [] 
for person in people:
    node = pydot.Node(person, shape="record", style="filled", fillcolor="#E8E8E8")
    node_list.append(node)
# get parent node
parent_node = node_list.pop(0)
# create edges
for node in node_list:
    edge = pydot.Edge(parent_node, node, color="#B6B6B6")
   graph.add_edge(edge)
graph.write_png('chart.png') 
```

执行此代码的结果是：

[http://i49.tinypic.com/keu7mw.png](http://i49.tinypic.com/keu7mw.png)

所以我需要改变什么以获得与下图相同（相似）的结果：

[http://i48.tinypic.com/2115g0i.png](http://i48.tinypic.com/2115g0i.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:32:29.730

我现在无法测试它，但可以

```
edge = pydot.Edge(parent_node, node, color="#B6B6B6", splines="ortho") 
```

工作？

# c# - 如何将实体框架添加到控制台应用程序（包括图像）

> ID：13385013
> 
> 赞同：7
> 
> 时间：2012-11-14T18:30:36.797
> 
> 标签：c#, asp.net, database, entity-framework, objectcontext

我尝试将实体框架添加到控制台应用程序：我按“添加新项目”并 ![在此处输入图像描述](../Images/e919ede251899ae6276bff4e02cc4ecb.png)

然后 ![在此处输入图像描述](../Images/11acf8515326eca2467ace82ecf0c519.png)

然后

![在此处输入图像描述](../Images/feec9d45638db380a5ac41ca7df898e8.png)

![在此处输入图像描述](../Images/821a9b4bbf28bebc1e8816504bae3f12.png)

![在此处输入图像描述](../Images/52c1d8e2e011d01fc074b9d91942f773.png)

![在此处输入图像描述](../Images/d8e52ab7eba4abe46cad37f3c2699d33.png)

然后我添加了代码：

```
 class Program
    {
        static void Main(string[] args)
        {
            try
            {
                Database1Entities db = new Database1Entities();
                db.AddToTableTest(new TableTest { name = "name" });
                db.SaveChanges();

                int count = db.TableTest.Count();
                int ui = 9 + 0;
            }
            catch (Exception e)
            {

            }
        }
    } 
```

它没有给出错误，但我没有看到数据库中有任何更改。我在[这里更好地描述了这个问题](https://stackoverflow.com/questions/13381738/i-cant-save-data-using-entity-framework)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:11:38.697

我执行了与设置 EF 模型相同的步骤。您的`database.mdf`文件`Copy to Output Directory`设置为`Copy always`，这意味着每次您按 F5（构建或调试您的应用程序）时，该文件都会被项目中的空文件替换。

更改`Copy to Output Directory`mdf 文件的“属性”窗口应该可以解决您的问题。

如果您使用`Copy if newer`，您将保留对数据库内容的任何修改，直到您编辑数据库 (mdf) 本身。

对`Do not copy`mdf 文件的任何更改都不会反映在您的应用程序上，并且可能会产生 EF 问题。

对于这种情况，我建议`Copy if newer`您在 mdf 文件中使用并填写基本数据，这样您就可以始终使用它。

# javascript - 如何编译仅用于 LocalConnection + JS-API 的 flex 文件

> ID：13385015
> 
> 赞同：0
> 
> 时间：2012-11-14T18:30:45.870
> 
> 标签：javascript, apache-flex, mxml, mxmlc

我有一个仅用`LocalConnection`作 JavaScript 的 API 的 flex 应用程序。它运行良好，但生成的 SWF 文件非常大：

*   静态链接运行时共享库​​=false ~43k
*   静态链接运行时共享库​​=true ~260k

两者都非常大，如果`static-link-runtime-shared-libraries`被禁用 - 加载 swf 慢了近 5 秒，而且我得到错误`#2046`:(

启用压缩和优化，禁用调试和预加载器。

mxml 文件仅包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
    creationComplete="main()"
    width="1" height="1" usePreloader="false">
<mx:Script>
    <![CDATA[
        import mx.core.FlexGlobals;
        import flash.net.LocalConnection;
        import flash.external.ExternalInterface;

        private var readyCallback:String;
        private var debugCallback:String;
        private var errorCallback:String;

        private var receiveConnection:LocalConnection;
        private var receiveCallback:String;

        private var postConnection:LocalConnection;

        private function main() : void {
            // ...
        }

        // ~100 Lines of code
    ]]>
</mx:Script>
</mx:Application> 
```

有人可以帮我生成一个更小（并且加载速度更快）的 swf 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:13:52.880

主要问题是编写一个`*.mxml`应用程序而不是一个简单的基本`*.as`类扩展`Sprite`，它也可以用`mxmlc`.

现在文件看起来像这样：

```
package {
    import flash.display.Sprite;
    import flash.external.ExternalInterface;
    import flash.net.LocalConnection;
    import flash.events.StatusEvent;

    public class MyClass extends Sprite
    {
        // ...
    }
} 
```

现在文件约为 1.2k 并且加载速度非常快:)

非常感谢@Timofei Davydik 和@Sunil D。

# gtk - 仅在选中时读取 GTK 单选按钮信号

> ID：13385024
> 
> 赞同：2
> 
> 时间：2012-11-14T18:31:19.720
> 
> 标签：gtk, gtkmm

GTK 的“toggled”信号在选择单选按钮时触发，但在此之前，它也会在取消选择先前选择的单选按钮时触发。

我正在使用一个使用单选按钮的 GUI，每个按钮代表一组实体。一对“切换”信号中的第一个触发了对 GUI 中其他字段的一些不需要的更新——我只想在新选择的按钮触发回调时发生更新。如何解决此信号并将回调函数限制为仅对选择而不是取消选择进行操作？我已经在我正在编码的类中考虑了一个标志变量，但也许有一种更被 GTK 认可的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:38:21.157

我不认为你*只能*得到选择信号，但你可以做其他事情。您可以编写信号处理程序，以便它获取被切换的按钮（假设您正在为多个按钮重用相同的处理程序）。然后你可以检查它的状态，看看它是被选中还是被取消选中。

你这样做的方法是连接一个适配器：

```
// do this for each button (this one is for "buttona"):
buttona.signal_toggled().connect(
   sigc::bind(
      sigc::mem_fun(*this, &myclass::handle_button_toggled),
      buttona
   )
); 
```

在您的课程中，handle_button_toggled 包含按钮参数：

```
myclass {
  Gtk::ToggleButton buttona, buttonb, ...
  ....
  void handle_button_toggled(Gtk::ToggleButton &b) {
   ...check state of b ...
  }
} 
```

在 C++11 中，您也可以使用 lambda 表达式：

```
buttona.signal_toggled().connect([this,&buttona]{
  handled_button_toggled(buttona); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T18:55:36.723

```
// C++11
#include <gtkmm.h>
#include <iostream>
#include <vector>

using namespace std;

class RadioBox
{
public:
    Gtk::Box                     {Gtk::ORIENTATION_HORIZONTAL};
    vector<Gtk::RadioButton*>    rb_list;
    string                       selected_text;
    int                          selected_pos;

    RadioBox(int defpos,
             std::initializer_list<string> rb_name)
    {
        add(box);
        int i = 0;
        for (auto& rb_name_i : rb_name) {
          Gtk::RadioButton* rb  = new Gtk::RadioButton{rb_name_i};
          rb_list.push_back(rb);
          if (i==defpos) {
            rb->set_active();
          }
          box.pack_start(*rb, 0, 0);
          if (i != 0) {
            rb->join_group(*rb_list[0]);
          }
          rb->signal_toggled().connect(
            sigc::bind(
              sigc::mem_fun(*this, &LabRadio::clicked),
              rb,
              i
            ));
          i++;
        }
    }

    void clicked(Gtk::RadioButton* rb, int pos) {
       if (!rb) return;
       if (rb->get_active()) {
         selected_pos  = pos;
         selected_text = rb->get_label().c_str();
         cout << "RadioButton:selected"
              << " pos:" << selected_pos
              << " text:" << selected_text
              << "\n";
       }
    }

    ~RadioBox() {
        rb_count = rb_list.size();
        for(int i=0; i < rb_count; ++i) {
          if (rb_list[i]) delete rb_list[i];
        }
    }

};

//USAGE:

class mywindow : public Gtk::Window {
  public:
    RadioBox myradiobox {2, {"Apples", "Pears", "Oranges", "Peaches"}};

  // ... your code here

  mywindow() {
    // ...
    <somewidget>.pack_start(myradiobox.box);
    // ...
  }

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-13T22:59:38.490

```
This is a demo code using Radio Buttons, where you can find how I find which radio button is selected:
#include <gtkmm/window.h>
#include <gtkmm/box.h>
#include <gtkmm/radiobutton.h>
#include <gtkmm/separator.h>
#include <gtkmm/application.h>
#include <iostream>

class ButtonWindow : public Gtk::Window
{
private:
   //Child widgets:
   Gtk::Box m_Box_Top, m_Box1, m_Box2;
   Gtk::RadioButton m_RadioButton1, m_RadioButton2, m_RadioButton3;
   Gtk::Separator m_Separator;
   Gtk::Button m_Button_Close;
   Gtk::RadioButton *m_SelectedButton{nullptr};

public:
   ButtonWindow()
      : m_Box_Top(Gtk::ORIENTATION_VERTICAL),
        m_Box1(Gtk::ORIENTATION_VERTICAL, 15),
        m_Box2(Gtk::ORIENTATION_VERTICAL, 0),
        m_RadioButton1("button 1"),
        m_RadioButton2("button 2"),
        m_RadioButton3("button 3"),
        m_Button_Close("close")
   {
      // Set title and border of the window
      set_title("radio buttons");
      set_border_width(0);

      // Put radio buttons 2 and 3 in the same group as 1:
      m_RadioButton2.join_group(m_RadioButton1);
      m_RadioButton3.join_group(m_RadioButton1);

      // Add outer box to the window (because the window
      // can only contain a single widget)
      add(m_Box_Top);

      //Put the inner boxes and the separator in the outer box:
      m_Box_Top.pack_start(m_Box1);
      m_Box_Top.pack_start(m_Separator);
      m_Box_Top.pack_start(m_Box2);

      // Set the inner boxes' borders
      m_Box1.set_border_width(20);
      m_Box2.set_border_width(10);

      // Put the radio buttons in Box1:
      m_Box1.pack_start(m_RadioButton1);
      m_Box1.pack_start(m_RadioButton2);
      m_Box1.pack_start(m_RadioButton3);

      // Put Close button in Box2:
      m_Box2.pack_start(m_Button_Close);

      // Connect the button signals:
#if 1 // C++11: (change this to #if 0 to use the traditional way)
      m_RadioButton1.signal_clicked().connect([&]{on_radio_button_clicked(m_RadioButton1);});
      m_RadioButton2.signal_clicked().connect([&]{on_radio_button_clicked(m_RadioButton2);});
      m_RadioButton3.signal_clicked().connect([&]{on_radio_button_clicked(m_RadioButton3);});

      m_Button_Close.signal_clicked().connect([&]{on_close_button_clicked();});
#else // Traditional:
  m_RadioButton1.signal_clicked() // Full sigc
     .connect(sigc::bind(sigc::mem_fun(*this, &ButtonWindow::on_radio_button_clicked),
                         sigc::ref(m_RadioButton1)));

  m_RadioButton2.signal_clicked() // sigc && C++98
     .connect(std::bind(sigc::mem_fun(*this, &ButtonWindow::on_radio_button_clicked),
                        std::ref(m_RadioButton2)));

  m_RadioButton3.signal_clicked() // Full C++98
     .connect(std::bind(&ButtonWindow::on_radio_button_clicked, this,
                        std::ref(m_RadioButton3)));

      m_Button_Close.signal_clicked()
         .connect(sigc::mem_fun(*this, &ButtonWindow::on_close_button_clicked));
#endif

      // Set the second button active:
      m_RadioButton2.set_active();

      // Make the close button the default widget:
      m_Button_Close.set_can_default();
      m_Button_Close.grab_default();

      // Show all children of the window:
      show_all_children();
   }

protected:
   //Signal handlers:
   void on_radio_button_clicked(Gtk::RadioButton& button)
   {
      if(m_SelectedButton != &button && button.get_active())
      {
         m_SelectedButton = &button;
         std::cout << "Radio "<< m_SelectedButton->get_label() << " selected.\n";
      }
   }

   void on_close_button_clicked()
   {
      hide(); // Close the application
   }
};

int main(int argc, char *argv[])
{
   auto app = Gtk::Application::create(argc, argv, "org.gtkmm.example");

   ButtonWindow button;

   //Shows the window and returns when it is closed.
   return app->run(button);
} 
```

# node.js - 系统重启时自动永远启动（节点）

> ID：13385029
> 
> 赞同：198
> 
> 时间：2012-11-14T18:31:40.587
> 
> 标签：node.js, centos, forever

我正在使用节点的永远模块来保持我的节点服务器运行。但是，当系统重新启动时，Forever 会终止。有什么方法可以在系统重新启动时自动启动节点服务器（永远）？

* * *

## 回答 #1

> 赞同：348
> 
> 时间：2012-11-14T22:50:15.513

我建议使用 crontab。它很容易使用。

## 如何

1.  要开始编辑，请运行以下命令，将“testuser”替换为节点进程所需的运行时用户。如果您选择自己以外的其他用户，则必须使用 sudo 运行它。

    ```
    $ crontab -u testuser -e 
    ```

2.  如果您以前从未这样做过，它会询问您希望使用哪个编辑器进行编辑。我喜欢 vim，但会推荐 nano 以方便使用。

3.  在编辑器中添加以下行：

    ```
    @reboot /usr/local/bin/forever start /your/path/to/your/app.js 
    ```

4.  保存文件。您应该会收到一些关于 cron 已安装的反馈。

5.  要进一步确认 cron 的安装，请执行以下命令（再次将“testuser”替换为您的目标用户名）以列出当前安装的 cron：

    ```
    $ crontab -u testuser -l 
    ```

请注意，在我看来，在 cron 中执行二进制文件时应该始终使用完整路径。此外，如果永久脚本的路径不正确，请运行`which forever`以获取完整路径。

鉴于`forever`调用`node`，您可能还想提供完整路径`node`：

```
@reboot /usr/local/bin/forever start -c /usr/local/bin/node /your/path/to/your/app.js 
```

## 延伸阅读

*   [crontab 手册页](http://linux.die.net/man/1/crontab)
*   [Ubuntu Cron 方法](https://help.ubuntu.com/community/CronHowto)

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2014-08-21T10:16:52.563

您可以使用 forever-service 来执行此操作。

```
npm install -g forever-service
forever-service install test 
```

这将通过永远将当前目录中的 app.js 配置为服务。每次系统重启时服务都会自动重启。此外，当它停止时，它会尝试优雅地停止。此脚本也提供 logrotate 脚本。

Github 网址：[https ://github.com/zapty/forever-service](http://github.com/zapty/forever-service)

注意：我是永远服务的作者。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-06-02T21:04:32.317

1.  使用 NPM 全局安装 PM2

    `npm install pm2 -g`

2.  用 pm2 开始你的脚本

    `pm2 start app.js`

3.  生成一个活动的启动脚本

    `pm2 startup`

    注意：pm2 启动是为了在系统重启时启动 PM2。PM2 一旦启动，就会重新启动它在系统关闭之前一直在管理的所有进程。

如果您想禁用自动启动，只需使用 pm2 unstartup

如果您希望启动脚本在另一个用户下执行，只需使用`-u <username>`选项和`--hp <user_home>:`

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-11-14T18:48:59.177

这种情况对 Debian 有效。

将以下内容添加到`/etc/rc.local`

`/usr/bin/sudo -u {{user}} /usr/local/bin/forever start {{app path}}`

*   `{{user}}`替换您的用户名。
*   `{{app path}}`替换您的应用程序路径。例如，`/var/www/test/app.js`

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-02-18T08:27:57.603

[受此](https://stackoverflow.com/a/13388741/1928926)答案和[此](http://www.hacksparrow.com/make-forever-reboot-proof-with-cron.html)博客文章启发的另一种 crontab 方法。

**1\. 创建一个 bash 脚本文件（将 bob 更改为所需的用户）。**

```
vi /home/bob/node_server_init.sh 
```

**2\. 将其复制并粘贴到您刚刚创建的文件中。**

```
#!/bin/sh

export NODE_ENV=production
export PATH=/usr/local/bin:$PATH
forever start /node/server/path/server.js > /dev/null 
```

确保根据您的配置编辑上面的路径！

**3\. 确保 bash 脚本可以执行。**

```
chmod 700 /home/bob/node_server_init.sh 
```

**4\. 测试 bash 脚本。**

```
sh /home/bob/node_server_init.sh 
```

**5\. 将“bob”替换为节点的运行时用户。**

```
crontab -u bob -e 
```

**6\. 复制并粘贴（将 bob 更改为所需的用户）。**

```
@reboot /bin/sh /home/bob/node_server_init.sh 
```

保存 crontab。

**你已经完成了，你的奖品是重新启动（测试）:)**

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-11-03T11:23:03.867

从所附[问题](https://stackoverflow.com/questions/12701259/how-to-make-a-node-js-application-run-permanently/40254977#40254977)复制答案。

您可以使用[PM2](https://github.com/Unitech/pm2)，它是带有内置负载均衡器的 Node.js 应用程序的生产流程管理器。

安装 PM2

```
$ npm install pm2 -g 
```

启动应用程序

```
$ pm2 start app.js 
```

如果您使用快递，那么您可以像这样启动您的应用程序

```
pm2 start ./bin/www --name="app" 
```

列出所有正在运行的进程：

```
$ pm2 list 
```

它将列出所有进程。然后，您可以使用以下命令使用应用程序的 ID 或名称来停止/重新启动服务。

```
$ pm2 stop all                  
$ pm2 stop 0                    
$ pm2 restart all 
```

显示日志

```
$ pm2 logs ['all'|app_name|app_id] 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-11-14T19:22:22.080

You need to create a shell script in the /etc/init.d folder for that. It's sort of complicated if you never have done it but there is plenty of information on the web on init.d scripts.

Here is a sample a script that I created to run a CoffeeScript site with forever:

```
#!/bin/bash
#
# initd-example      Node init.d 
#
# chkconfig: 345 
# description: Script to start a coffee script application through forever
# processname: forever/coffeescript/node
# pidfile: /var/run/forever-initd-hectorcorrea.pid 
# logfile: /var/run/forever-initd-hectorcorrea.log
#
# Based on a script posted by https://gist.github.com/jinze at https://gist.github.com/3748766
#

# Source function library.
. /lib/lsb/init-functions

pidFile=/var/run/forever-initd-hectorcorrea.pid 
logFile=/var/run/forever-initd-hectorcorrea.log 

sourceDir=/home/hectorlinux/website
coffeeFile=app.coffee
scriptId=$sourceDir/$coffeeFile

start() {
    echo "Starting $scriptId"

    # This is found in the library referenced at the top of the script
    start_daemon

    # Start our CoffeeScript app through forever
    # Notice that we change the PATH because on reboot
    # the PATH does not include the path to node.
    # Launching forever or coffee with a full path
    # does not work unless we set the PATH.
    cd $sourceDir
    PATH=/usr/local/bin:$PATH
    NODE_ENV=production PORT=80 forever start --pidFile $pidFile -l $logFile -a -d --sourceDir $sourceDir/ -c coffee $coffeeFile

    RETVAL=$?
}

restart() {
    echo -n "Restarting $scriptId"
    /usr/local/bin/forever restart $scriptId
    RETVAL=$?
}

stop() {
    echo -n "Shutting down $scriptId"
    /usr/local/bin/forever stop $scriptId
    RETVAL=$?
}

status() {
    echo -n "Status $scriptId"
    /usr/local/bin/forever list
    RETVAL=$?
}

case "$1" in
    start)
        start
        ;;
    stop)
        stop
        ;;
    status)
        status
        ;;
    restart)
        restart
        ;;
    *)
        echo "Usage:  {start|stop|status|restart}"
        exit 1
        ;;
esac
exit $RETVAL 
```

I had to make sure the folder and PATHs were explicitly set or available to the root user since init.d scripts are ran as root.

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-06-08T11:21:22.057

使用[PM2](https://github.com/Unitech/pm2)

哪个是运行服务器生产服务器的最佳选择

以这种方式运行您的应用程序有什么好处？

*   如果 PM2 崩溃，它将自动重新启动您的应用程序。

*   PM2 将记录您未处理的异常 - 在这种情况下，在 /home/safeuser/.pm2/logs/app-err.log 的文件中。

*   通过一个命令，PM2 可以确保它管理的任何应用程序在服务器重新启动时重新启动。基本上，您的节点应用程序将作为服务启动。

参考：[https ://www.digitalocean.com/community/tutorials/how-to-use-pm2-to-setup-a-node-js-production-environment-on-an-ubuntu-vps](https://www.digitalocean.com/community/tutorials/how-to-use-pm2-to-setup-a-node-js-production-environment-on-an-ubuntu-vps)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-03-04T12:10:27.637

`crontab`在 CentOS x86 6.5 上对我不起作用。@reboot 似乎不起作用。

最后我得到了这个解决方案：

**编辑：** `/etc/rc.local`

```
sudo vi /etc/rc.local 
```

将此行添加到文件末尾。改变`USER_NAME`和`PATH_TO_PROJECT`你自己的。`NODE_ENV=production`表示应用程序在生产模式下运行。如果您需要运行多个 node.js 应用程序，您可以添加更多行。

```
su - USER_NAME -c "NODE_ENV=production /usr/local/bin/forever start /PATH_TO_PROJECT/app.js" 
```

不要`NODE_ENV`在单独的行中设置，你的应用仍然会在开发模式下运行，因为永远不会得到`NODE_ENV`.

```
# WRONG!
su - USER_NAME -c "export NODE_ENV=production" 
```

保存并退出 vi（按`ESC : w q return`）。您可以尝试重新启动服务器。服务器重新启动后，您的 node.js 应用程序应该会自动运行，即使您没有通过 ssh 远程登录任何帐户。

你最好`NODE_ENV`在你的shell中设置环境。`NODE_ENV`将在您的帐户`USER_NAME`登录时自动设置。

```
echo export NODE_ENV=production >> ~/.bash_profile 
```

`/PATH_TO_PROJECT/app.js`因此，您可以通过 ssh运行诸如永远停止/启动之类的命令，而无需`NODE_ENV`再次设置。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-11-15T00:00:33.133

Forever 不是为了让节点应用程序作为服务运行。正确的方法是创建 /etc/inittab 条目（旧的 linux 系统）或 upstart（较新的 linux 系统）。

以下是有关如何将其设置为新贵的一些文档： [https ://github.com/cvee/node-upstart](https://github.com/cvee/node-upstart)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-11-14T22:14:38.173

我写了一个脚本来做到这一点：

[https://github.com/chovy/node-startup](https://github.com/chovy/node-startup)

我没有永远尝试过，但你可以自定义它运行的命令，所以它应该是直截了当的：

```
/etc/init.d/node-app start
/etc/init.d/node-app restart
/etc/init.d/node-app stop 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-03-08T18:22:51.323

rc.local 的问题在于命令是以 root 身份访问的，这与以用户身份登录并使用 sudo 不同。

我通过添加一个带有我想要 etc/profile.d 的启动命令的 .sh 脚本解决了这个问题。profile.d 中的任何 .sh 文件都将自动加载，并且任何命令都将被视为使用常规 sudo。

唯一的缺点是指定的用户需要登录才能开始，在我的情况下总是如此。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-06-22T15:07:13.800

我尝试了很多上述答案。他们都没有为我工作。我的应用程序`/home`以用户身份安装，而不是以 root 身份安装。这可能意味着当上面提到的启动脚本运行时，`/home`还没有挂载，所以应用程序没有启动。

然后我找到了 Digital Ocean 的这些说明：

[https://www.digitalocean.com/community/tutorials/how-to-use-pm2-to-setup-a-node-js-production-environment-on-an-ubuntu-vps](https://www.digitalocean.com/community/tutorials/how-to-use-pm2-to-setup-a-node-js-production-environment-on-an-ubuntu-vps)

如前所述，使用 PM2 非常简单并且运行良好：我的虚拟服务器发生了两次物理崩溃，因为停机时间只有大约一分钟。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-17T11:39:13.087

完整的示例 crontab（位于 /etc/crontab）..

```
#!/bin/bash

# edit this file with .. crontab -u root -e
# view this file with .. crontab -u root -l

# put your path here if it differs
PATH=/root/bin:/root/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin

# * * * * * echo "executes once every minute" > /root/deleteme

@reboot cd /root/bible-api-dbt-server; npm run forever;
@reboot cd /root/database-api-server; npm run forever;
@reboot cd /root/mailer-api-server; npm run forever; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-13T22:01:30.587

I have found my own solution by using serve & npm as follows:

*   Install serve package: `npm install -g serve`
*   Then have the command `serve -s /var/www/sitename` to execute on reboot.

This is what works for me on my VPS.

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2014-08-14T08:49:05.320

您可以在 shell 中使用以下命令来永久启动您的节点：

```
forever app.js //my node script 
```

您需要记住，运行您的应用程序的服务器应始终保持打开状态。

# java - Java中的二进制减法

> ID：13385031
> 
> 赞同：1
> 
> 时间：2012-11-14T18:31:54.150
> 
> 标签：java, binary

我正在尝试制作一个二进制计算器，它减去两个二进制数（仅以 2 为基数）而不解析它。

任何人都可以帮助我解决上数字为零和下数字为一的情况，我似乎无法为其编写代码。

```
for (int i = ss.length()-1; i > -1; i--)
        {
            if(s.charAt(i)=='0' && ss.charAt(i)=='0') sb.append("0");
            else if (s.charAt(i)=='1' && ss.charAt(i)=='0') sb.append("1");
            else if (s.charAt(i)=='1' && ss.charAt(i)=='1') sb.append("0");
            else
            {
                sb.append("1");
                doit(s,i+1,sb);
            }
        }

        for (int i = s.length() - ss.length(); i >-1; i--) 
        {
            sb.append(s.charAt(i));
        }

        ArrayList<Character> res = new ArrayList<>();
        for (int i =  sb.length()-1; i > -1; i--)
        {
            res.add(sb.charAt(i));
        }
        System.out.println(res);
    }
    public static void doit(StringBuilder s, int i, StringBuilder sb)
    {
        for (int j = i; j > -1; j--)
        {
            if(s.charAt(j)=='0')
            {
                s.setCharAt(j, '1');
            }
            else
            {
                s.setCharAt(j, '0');
                break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:40:31.063

二进制减法规则。

```
1 - 1 = 0
0 - 0 = 0
1 - 0 = 1
0 - 1 = 1 (needs a carry bit from a higher bit position.  
    You might have to check several higher bits before you 
    find the carry bit.  -1 otherwise.) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:26:14.477

你可以严格按位，从右到左，至少像一些芯片一样。棘手的知识是一个五列表：（a，b，来自先前位置的进位位）->（结果，新进位位）。您实际上并没有从更高级别的职位上借钱；你将underverflow带入那些。请参见此处的表 2.4：

[http://books.google.com.ua/books?id=vpWS-s4d5vMC&pg=PA25&lpg=PA25&dq=binary+subtraction+table+carry&source=bl&ots=458JWgZl8v&sig=sjuXedv96KCbNWmxQAPNQo7iuRw&hl=en&sa=X&ei=i-6jUI7IB8jusgay8IDABQDQ#vQDQ= onepage&q=二进制%20减法%20table%20进位减法&f=false](http://books.google.com.ua/books?id=vpWS-s4d5vMC&pg=PA25&lpg=PA25&dq=binary+subtraction+table+carry&source=bl&ots=458JWgZl8v&sig=sjuXedv96KCbNWmxQAPNQo7iuRw&hl=en&sa=X&ei=i-6jUI7IB8jusgay8IDQDQ&ved=0CBwQ6AEwAA#v=onepage&q=binary%20subtraction%20table%20carrysubtract&f=false)

定义两种方法：(a,b, 先前位置的进位位) -> 结果和 (a,b, 先前位置的进位位) -> 新的进位位，并将它们从右到左应用。

* * *

替代方案：根据此处的规则反转您的第二个参数：http: [//simple.wikipedia.org/wiki/Negative_binary_numbers](http://simple.wikipedia.org/wiki/Negative_binary_numbers)。

然后将 #1 添加到倒置的 #2 :)。

PS。谁说这是一个糟糕的任务:)？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-19T12:06:40.340

```
import java.util.Scanner;
class binary_diff
{
    public String diff(String st1,String st2)
    {
        String nst="",max="";char b='0';boolean tf=(st1.length()>=st2.length());
        int l1=st1.length(),l2=st2.length();
        if(l1<l2)
        for(int a=1;a<=l2-l1;a++)
        st1='0'+st1;

        else if(l2<l1)
        for(int a=1;a<=l1-l2;a++)
        st2="0"+st2;
        if(!tf)for(int a=l1-1;a>=0;a--)
        if(st1.charAt(a)!=st2.charAt(a))
        if(st2.charAt(a)=='1'){max=st2;st2=st1;st1=max;break;}

        for(int a=st1.length()-1;a>=0;a--)
        {
            if(st1.charAt(a)=='1' && st2.charAt(a)=='0')
            {
                if(b=='1')
                {nst='0'+nst;b='0';}
                else
                nst='1'+nst;
            }

            else if(st1.charAt(a)==st2.charAt(a) && st2.charAt(a)=='1')
            {
                if(b=='1')
               {nst='1'+nst;b='1';}
                else
                nst='0'+nst;
            }

            else if(st1.charAt(a)=='0' && st2.charAt(a)=='1')
            {
                if(b=='1')
                nst='0'+nst;
                else
                {nst='1'+nst;b='1';}
            }

            else
            {
                if(b=='1')
                nst='1'+nst;
                else
                nst='0'+nst;
            }
        }
        return nst;
    }

    public static void main()
    {
        Scanner sc=new Scanner(System.in);
        System.out.println("Enter the two numbers");
        String s1=sc.next();
        String s2=sc.next();
        binary_diff bd=new binary_diff();
    System.out.println(bd.diff(s1,s2));
    }
} 
```

# xml - 更改 XML 的布局 - 使用 1 个元素对相同的 XML 项进行分组

> ID：13385040
> 
> 赞同：0
> 
> 时间：2012-11-14T18:32:26.450
> 
> 标签：xml, xslt

我有 XML：

```
<StockInfo>
<Item>
<stockcode>111111</stockcode>
<vehicle>Ford</vehicle>
<model>Escape (2000-)</model>
<model>Maverick (2001-)</model>
<width>8</width>
<wheel_size>18</wheel_size>
<offset>35</offset>
<bolt_pattermn>5x114.3</bolt_pattermn>
<brand>ANTERA</brand>
<Velg_ID/>
<kit1>DK-135259671 x1</kit1>
<kit2/>
<kit3/>
<kit4/>
<qty_available>3.00000000</qty_available>
<price>1110.00</price>
<picture>410110
</picture>
</Item>
<Item>

<stockcode>111111</stockcode>
<vehicle>Honda</vehicle>
<model>Civic (5skr,2001-2006)(2006-)</model>
<model>Accord (2003-2008)</model>
<model>Acord Coupe (1999-)</model>
<model>Acord Type R</model>
<model>Civic Type R (2001-2006)(2007-,17"&lt;)</model>
<model>Civic Type S (2001-2006)(2007-,17"&lt;)</model>
<model>Integra Type R~Prelude (1997-2001)</model>
<model>Legend (1991-1999)</model>
<width>8</width>
<wheel_size>18</wheel_size>
<offset>40</offset>
<bolt_pattermn>5x114.3</bolt_pattermn>
<brand>ANTERA</brand>
<Velg_ID/>
<kit1>DK-135259641 x1</kit1>
<kit2/>
<kit3/>
<kit4/>
<qty_available>3.00000000</qty_available>
<price>1110.00</price>
<picture>410110
</picture>
</Item>
<Item>

<stockcode>2222222</stockcode>
<vehicle>BMW</vehicle>
<model>6 (e63/64, 2004-2011)</model>
<model>M6 (e63/64, 2004-2011)</model>
<width>9</width>
<wheel_size>18</wheel_size>
<offset>15</offset>
<bolt_pattermn>5x120</bolt_pattermn>
<brand>AEZ</brand>
<Velg_ID>AEZ Ares</Velg_ID>
<kit1>DK-ZJB3 x1</kit1>
<kit2/>
<kit3/>
<kit4/>
<qty_available>4.00000000</qty_available>
<price>151110.00</price>
<picture>41001
</picture>
</Item>
</StockInfo> 
```

在 XSLT 1.0 中，我需要使用元素“stockcode”将项目分组到 XML 中。在目标 XML 中，我不需要重复的元素（至于相同的项目，我需要从其他相同的项目中获取“车辆”和“模型”元素......）

我需要得到这样的 XML：

```
<StockInfo>
<Item>
<stockcode>111111</stockcode>
<vehicle>Ford</vehicle>
<model>Escape (2000-)</model>
<model>Maverick (2001-)</model>
<vehicle>Honda</vehicle>
<model>Civic (5skr,2001-2006)(2006-)</model>
<model>Accord (2003-2008)</model>
<model>Acord Coupe (1999-)</model>
<model>Acord Type R</model>
<model>Civic Type R (2001-2006)(2007-,17"&lt;)</model>
<model>Civic Type S (2001-2006)(2007-,17"&lt;)</model>
<model>Integra Type R~Prelude (1997-2001)</model>
<model>Legend (1991-1999)</model>
<width>8</width>
<wheel_size>18</wheel_size>
<offset>40</offset>
<bolt_pattermn>5x114.3</bolt_pattermn>
<brand>ANTERA</brand>
<Velg_ID/>
<kit1>DK-135259641 x1</kit1>
<kit2/>
<kit3/>
<kit4/>
<qty_available>3.00000000</qty_available>
<price>1110.00</price>
<picture>410110</picture>
</Item>
<Item>

<stockcode>2222222</stockcode>
<vehicle>BMW</vehicle>
<model>6 (e63/64, 2004-2011)</model>
<model>M6 (e63/64, 2004-2011)</model>
<width>9</width>
<wheel_size>18</wheel_size>
<offset>15</offset>
<bolt_pattermn>5x120</bolt_pattermn>
<brand>AEZ</brand>
<Velg_ID>AEZ Ares</Velg_ID>
<kit1>DK-ZJB3 x1</kit1>
<kit2/>
<kit3/>
<kit4/>
<qty_available>4.00000000</qty_available>
<price>151110.00</price>
<picture>41001</picture>
</Item>
</StockInfo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:26:25.467

我想我做错了什么......浏览论坛，教程，试图让这样的代码工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output indent="yes"/>

<xsl:key name="stcode" match="StockInfo/Item" use="stockcode" />

<xsl:template match="Item" mode="group">
<xsl:for-each select="/StockInfo/Item[generate-id() = generate-id(key('stcode',stockcode))]">
<xsl:value-of select="stockcode"/>
<xsl:value-of select="vehicle"/>
<xsl:value-of select="model"/>
...
<xsl:value-of select="other_elements"/>
</xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

但它返回与源 XML 相同的 XML...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:47:55.100

您可以在 xslt1.0 中进行分组

```
<xsl:key name="stockKey" match="StockInfo/Item" use="stockcode"/>
<xsl:for-each select="/StockInfo/Item
        [generate-id() = generate-id(key('stockKey',stockcode))]">
            <xsl:value-of select="stockcode"/>
</xsl:for-each> 
```

另请参阅此[XSLT 分组和排序示例（Muenchian 方法）](http://www.chrisgountanis.com/programming/66-xslt-grouping-sorting-using-the-muenchian-method.html)

# php - 在 mysql 列中搜索重复项并在 while 循环中为变量添加后缀

> ID：13385042
> 
> 赞同：1
> 
> 时间：2012-11-14T18:32:31.013
> 
> 标签：php, mysql, while-loop, duplicates, unique

是的，我真的很希望有人能帮助我，因为我很难过。基本上，我正在为使用 mysql 数据库和 php 的公司重新设计网站，以提供新闻存档类型部分。除了一件事，一切都很好。我正在从数据库中提取信息以提供片段视图，并使用 mysql 数据库中的 newsTitle 列将信息放入相应锚点的链接文本中，该链接文本可以使用 $_GET 函数从相应页面检索。问题是，虽然主要是唯一的，但有许多新闻标题条目是重复的，但每个条目的内容是不同的。旧网站通过在每个副本的末尾（在页面上）添加后缀 -0 然后 -1 等等来处理这个问题，但我不知道如何做到这一点。

我需要检查的变量是 $title/$url 中包含的变量，与生成的所有其他版本的 $title/$url 相比。请注意：我必须使用后缀而不是 id 来使每个页面都独一无二，因为这是旧版本网站所做的，我不想破坏来自 Google 的链接或丢失“链接汁”。

这是我的代码（我是一个 n00b，所以请原谅我的糟糕之处）：

```
mysql_connect($host, $user, $pass) or die ("Unable to connect!"); 

@mysql_select_db($db) or die ("Unable to select database!");

$sql = "SELECT * FROM tblnews WHERE YEAR(newsDate) >= $startyear AND YEAR(newsDate) <=     $endyear AND newsPageID = 13 ORDER BY  `tblnews`.`newsDate` DESC LIMIT $offset, $rowsperpage";

$result3 = mysql_query($sql, mysql_connect($host, $user, $pass)) or die ("Unable to connect!");

$querytable="SELECT * FROM tblnews WHERE YEAR(newsDate) >= $startyear AND YEAR(newsDate) <= $endyear AND newsPageID = 13 ORDER BY  `tblnews`.`newsDate` DESC";

$result=mysql_query($querytable);

mysql_close();

$i= ($currentpage - 1) * 4;

while ($list = mysql_fetch_assoc($result3)) {

$title=mysql_result($result,$i,"newsTitle");
$titlelower = strtolower ($title);
$changedwords = array(' is ', ' with ', ' on ', ' to ', ' for ', ' the ', ' at ', ' a ', ' in ', ' of ', '"', "'", ':', '(', ')', ';', '?', '!', '.', ',', '&', '£', '/');
$replacements = array('-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '', '', '', '', '', '', '', '', '', '', '', '', '-');
$url = str_replace ($changedwords, $replacements, $titlelower);
$url = str_replace (" ", "-", $url);
$url = str_replace ("---", "-", $url);
$url = str_replace ("--", "-", $url);
$date=mysql_result($result,$i,"newsDate");
$shortdescription=mysql_result($result,$i,"newsTeaser");
$id=mysql_result($result,$i,"newsID");

?>
<div id="release" <?php if($odd = $i%2 ) { echo 'style="background-color:#d2d2d2;"';
} else { echo 'style="background-color:#dbdbdb;"'; } ?> >
<p>&nbsp;</p>
<h3><a href="questionsarticle.php?pagetitle=<?php echo $url; ?>&id=<?php echo $id; ?>"><?php echo $title; ?></a></h3>
<p style="font-size:12px;color:#666;font-style:italic;">- <?php echo date('l, jS F Y',strtotime($date)); ?></p>
<p>&nbsp;</p>
<p><?php echo $shortdescription; ?></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<?php
$i++;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:17:32.180

从哪个新闻文章应该具有哪个 URL 后缀的问题中不清楚，但假设它是基于由 newsID 确定的年龄，您将必须计算每个重复标题的旧新闻的数量。

这可以通过将 tblnews 连接到自身，并计算具有相同标题但 newsID 低于给定文章的行来完成。

您修改后的查询，包括每篇文章的旧文章数量的列，将是：

```
SELECT DISTINCT news.*, COUNT(older.newsID) AS older
FROM tblnews news
LEFT JOIN tblnews older
ON older.newsTitle = news.newsTitle
AND older.newsID < news.newsID
WHERE year(news.newsDate) >= $startYear
AND year(news.newsDate) <= $endYear
AND news.newsPageID = 13
GROUP BY news.newsID
ORDER BY news.newsDate DESC; 
```

# python - Mongo 集合查询和运算符

> ID：13385043
> 
> 赞同：2
> 
> 时间：2012-11-14T18:32:38.180
> 
> 标签：python, mongodb, pymongo

从我的收藏中，我只想返回记录中包含位置或地点信息（包括坐标）的记录。因此，如果任一条件不为空，则如果两个条件都不为空，则检索其中一个或两个字段。

到目前为止，我的查询是这样的：

```
 cursor = coll.find({"$or" : [{"place.bounding_box.type" : {"$ne" : None }}, {"coordinates.type" : {"$ne" : None }}]}, {"coordinates.coordinates" :1},
              {"place.bounding_box.coordinates" : 1}, tailable = True, timeout = False) 
```

但我得到这个 pymongo 错误：

```
raise TypeError("skip must be an instance of int")
TypeError: skip must be an instance of int 
```

我可以让查询单独工作，但不能像上面那样在连接查询中工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:48:28.403

该错误听起来像您在结果光标上执行 .skip("string") 。

此外，您还应该阅读 $exists 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:35:35.230

我对 pymongo 不熟悉，但 MongoDB 不支持连接...您需要分别运行这两个查询，并连接结果。

# gis - 通过渗透过滤 OSM 以获得特定的舒适度

> ID：13385045
> 
> 赞同：1
> 
> 时间：2012-11-14T18:32:42.447
> 
> 标签：gis, openstreetmap, bin, cloudmade, osmosis

我已经从 cloudmade for osmosis (500 MB) 下载了 Ireland 文件，并将其放在 osmosis bin 文件夹中，osmosis 读取良好。我现在想创建一个新文件，其中仅包含标记为`Tag:amenity=fast food`. 我的目录是：

```
C:\Program Files (x86)\osmosis-0.41\bin> 
```

我目前正在关注 OSM wiki 上的[标签过滤器指南](http://wiki.openstreetmap.org/wiki/Osmosis/Detailed_Usage#--tag-filter_.28--tf.29)，但无法使其正常工作。这是我正在尝试的：

```
 C:\Program Files (x86)\osmosis-0.41\bin>osmosis --read-xml ireland.osm 
--tf accept-nodes amenity=fast food --write-xml output.osm 
```

这是我得到的错误：

org.openstreetmap.osmosois.core.Osmosis main 严重：执行中止。org.openstreetmap.osmosis.core.OsmosisRuntimeException：每个任务只能存在一个默认（未命名）参数。参数 6 和 4 没有名字......

你能告诉我我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:41:56.957

你应该把你的过滤器值放在“-s”之间，像这样：amenity="fast food"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-06T01:01:58.483

您需要将“”和“，”放在 amenity=fast food 上。

它应该是 amenity="fast,food"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-15T12:26:52.870

有同样的错误。就我而言，该命令使用以下命令分成几行`\`：

```
osmosis \
  --read-xml ireland.osm \
  --tf accept-nodes amenity="fast food" \
  --write-xml output.osm 
```

错误的原因是**其中一个反斜杠后有一个空格**。

# python - 用 elementTree 解析子元素

> ID：13385048
> 
> 赞同：0
> 
> 时间：2012-11-14T18:32:49.857
> 
> 标签：python, xml, parsing, elementtree

我在 XML 文件中有代码，我使用 et.parse 对其进行解析：

```
<VIAFCluster xmlns="http://viaf.org/viaf/terms#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:void="http://rdfs.org/ns/void#" xmlns:foaf="http://xmlns.com/foaf/0.1/">
<viafID>15</viafID>
<nameType>Personal</nameType>
</VIAFCluster>
<mainHeadings>
    <data>
       <text>
          Gondrin de Pardaillan de Montespan, Louis-Antoine de, 1665-1736
       </text>
    </data>
</mainHeadings> 
```

我想将其解析为：

[15，“个人”，“Gondrin 等”]

我似乎无法打印任何字符串信息：

```
import xml.etree.ElementTree as ET

tree = ET.parse('/Users/user/Documents/work/oneline.xml')
root = tree.getroot()

for node in tree.iter():
    name = node.find('nameType')
    print(name) 
```

因为它显示为“无”......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:00:25.120

我仍然不确定您到底想要做什么，但希望如果您运行下面的代码，它将帮助您顺利上路。使用 getiterator 函数遍历元素将让您了解发生了什么。当你来到他们身边时，你可以拿起你想要的东西：

```
import xml.etree.ElementTree as et
xml = '''
<VIAFCluster xmlns="http://viaf.org/viaf/terms#" 
             xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
             xmlns:void="http://rdfs.org/ns/void#" 
             xmlns:foaf="http://xmlns.com/foaf/0.1/">
    <viafID>15</viafID>
    <nameType>Personal</nameType>
    <mainHeadings>
        <data>
           <text>
              Gondrin de Pardaillan de Montespan, Louis-Antoine de, 1665-1736
           </text>
        </data>
    </mainHeadings>
</VIAFCluster>
'''
tree = et.fromstring(xml)
lst = []
for i in tree.getiterator():
    t = i.text.strip()
    if t:
        lst.append(t)
        print i.tag
        print t 
```

你最终会得到一个你想要的列表。我不得不清理你的 xml，因为你有不止一个顶级元素，这是一个禁忌。也许这一直是你的问题。

祝你好运，迈克

# ruby-on-rails - 是否可以使用 facebook oauth 来保护我的 json API？

> ID：13385051
> 
> 赞同：0
> 
> 时间：2012-11-14T18:32:56.073
> 
> 标签：ruby-on-rails, facebook, rest, oauth, omniauth

我正在开发一个移动应用程序，它将与一个基本上是 json api 的 rails 应用程序进行交互。是否可以使用 facebook 或 googleplus 等外部身份提供商来保护对我的 API 的访问？

用户会将照片上传到 json rest 服务，但 rails 应用程序仅在使用通过这些提供商之一进行身份验证时才允许上传。

我已经检查了omniauth gem，但我不知道这是否是这样做的途径。我不太了解 oauth 的工作原理，所以我想知道这是否可行。

问候法克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:30:42.910

答案部分取决于您将如何通过移动应用程序提供身份。用户的身份验证和他们的身份是分离的。

我的猜测是您希望用户使用 Google/Facebook sdk 应用程序端对移动应用程序进行身份验证。为此，您需要使用该 sdk 生成一个令牌，然后将其保存到 Rails。然后可以在每个 API 请求中都需要该令牌——rails 将对其进行验证。

该主题有点复杂，无法完全描述流程......但本质上：1）使用移动 sdk 在移动应用上创建令牌，2）将用户和令牌保存到 Rails/数据库，3）作为每个请求检查提供的 access_token。

由于 Oauth 和请求/身份提供程序的主题需要一些时间来理解，我会首先看他关注关于保护 API 的[railscast 。](http://railscasts.com/episodes/352-securing-an-api?view=asciicast)一旦你完成了那个（并理解了这个概念），你也可以观看这个[railscast](http://railscasts.com/episodes/353-oauth-with-doorkeeper?view=asciicast)。

希望这可以帮助。

# sql - 计算 JPQL 中列的 10 个最近值的平均值

> ID：13385055
> 
> 赞同：1
> 
> 时间：2012-11-14T18:33:11.487
> 
> 标签：sql, hibernate, jpa, jpql

我正在尝试创建一个 JPQL 查询，该查询计算最近 n 条记录中某些列的平均值。相应的 MS SQL 查询将是：

```
select avg(t.value) from (select top 10 * FROM CamaOperationalData order by TimeStamp desc) t 
```

谁能告诉我如何在不使用本机查询的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:43:38.817

我自己不要使用 JPQL，但是快速的谷歌搜索`jpql select top`显示了几个可能的答案。其中[之一就是这个](http://openjpa.208410.n2.nabble.com/SELECT-TOP-n-records-Equilent-in-JPQL-td5194742.html)，它建议使用这个命令：

```
query.setMaxResults(n); 
```

# android - 将 SurfaceTexture 保存为 JPEG

> ID：13385056
> 
> 赞同：1
> 
> 时间：2012-11-14T18:33:14.427
> 
> 标签：android, opengl-es, libjpeg

我尝试通过 JNI 在我的平板电脑上保存由 OpenGL ES 2 修改的相机输出。

为此，我使用了 NDK-r8b 编译的 libjpeg 库。

我使用以下代码：

在渲染函数中：

```
renderImage();
if (iIsPictureRequired)
{
  savePicture();
  iIsPictureRequired=false;
} 
```

保存过程：

```
bool Image::savePicture()
{
 bool l_res =false;
char p_filename[]={"/sdcard/Pictures/testPic.jpg"};
// Allocates the image buffer (RGBA)
int l_size = iWidth*iHeight*4*sizeof(GLubyte);
GLubyte *l_image = (GLubyte*)malloc(l_size);
if (l_image==NULL)
{
  LOGE("Image::savePicture:could not allocate %d bytes",l_size);
  return l_res;
}
// Reads pixels from the color buffer (byte-aligned)
glPixelStorei(GL_PACK_ALIGNMENT, 1);
checkGlError("glPixelStorei");
// Saves the pixel buffer
glReadPixels(0,0,iWidth,iHeight,GL_RGBA,GL_UNSIGNED_BYTE,l_image);
checkGlError("glReadPixels");
// Stores the file
FILE* l_file  = fopen(p_filename, "wb");
if (l_file==NULL)
 {
   LOGE("Image::savePicture:could not create %s:errno=%d",p_filename,errno);
   free(l_image);
   return l_res;
 }
 // JPEG structures
 struct jpeg_compress_struct cinfo;
 struct jpeg_error_mgr       jerr;

 cinfo.err = jpeg_std_error(&jerr);
 jerr.trace_level = 10;

 jpeg_create_compress(&cinfo);
 jpeg_stdio_dest(&cinfo, l_file);
 cinfo.image_width      = iWidth;
 cinfo.image_height     = iHeight;
 cinfo.input_components = 3;
 cinfo.in_color_space   = JCS_RGB;
 jpeg_set_defaults(&cinfo);

 // Image quality [0..100]
 jpeg_set_quality (&cinfo, 70, true);
 jpeg_start_compress(&cinfo, true);

 // Saves the buffer
 JSAMPROW row_pointer[1];          // pointer to a single row

 // JPEG stores the image from top to bottom (OpenGL does the opposite)
 while (cinfo.next_scanline < cinfo.image_height)
{
  row_pointer[0] = (JSAMPROW)&l_image[(cinfo.image_height-1-cinfo.next_scanline)* (cinfo.input_components)*iWidth];
  jpeg_write_scanlines(&cinfo, row_pointer, 1);
}
// End of the process
jpeg_finish_compress(&cinfo);
fclose(l_file);
free(l_image);
l_res =true;
return l_res;

} 
```

显示是正确的，但生成的 JPEG 似乎是三倍并且从左到右重叠。

![缩放图像（原始尺寸为 1210x648）](../Images/09162109739d09aa2d36389f9632b352.png)

我做错什么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:57:52.003

看来 jpeg lib 和画布的内部格式不匹配。其他似乎使用 RGBRGBRGB 读取/编码，其他使用 RGBARGBARGBA。

如果一切都失败了，您也许可以重新排列图像数据......

```
 char *dst_ptr = l_image; char *src_ptr = l_image;
 for (i=0;i<width*height;i++) { *dst_ptr++=*src_ptr++;
  *dst_ptr++=*src_ptr++; *dst_ptr++=*src_ptr++; src_ptr++; } 
```

编辑：现在原因已得到验证，可能会有更简单的修改。您可能能够以正确的格式 从*gl 像素缓冲区获取数据：*

```
 int l_size = iWidth*iHeight*3*sizeof(GLubyte);
 ...
 glReadPixels(0,0,iWidth,iHeight,GL_RGB,GL_UNSIGNED_BYTE,l_image); 
```

还有一条警告：如果编译成功，但输出是*倾斜*的，那么这意味着您的屏幕宽度不是 4 的倍数，而是 opengl 想要在 dword 边界处开始每个新行。但在那种情况下，很有可能发生崩溃，因为在那种情况下，`l_size`应该比预期的大 1,2 或 3 个字节。

# c# - 种子随机分析：字典中不存在给定的键

> ID：13385057
> 
> 赞同：3
> 
> 时间：2012-11-14T18:33:17.610
> 
> 标签：c#, random, dictionary, numbers, analytics

我正在关注 Visual C# 2010 Express 作为控制台应用程序中的随机数生成教程，但遇到了问题。

据我所知，代码与我正在观看的教程相匹配，有 5 个概述。

这个想法是它将采用内置的随机种子函数并用它生成 100 个值。该程序将存储随机数（双精度数）作为 DICTIONARY 的 KEY 和一个 int VALUE 以显示重复的数量。该系统将打印有关重复、均值和分布的分析数据。

```
//PROGRAM SCOPE
private const int Count = 100;
// MAIN CLASS SCOPE
var standardRnd = new Random(20);
var list = new Dictionary<double,int>();

//In a for loop till Count-1
  var rand = standardRnd.NextDouble();

            if (!list.ContainsKey(rand))
                list.Add(rand, 1);
            else
            {
                list[rand]++;
                duplicate++;
            } 
```

当我运行程序时，控制台会正常激活，但我不会在屏幕上打印任何内容。大约一秒钟后它会抛出一个异常并突出显示这个代码片段。

```
 sum += rand * list[rand]; 
```

错误：给定的键不在字典中。

从逻辑上讲，这对我来说很有意义。大家有没有看到什么不正常的地方？

感谢您提供的任何帮助。

完整代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Random_RnD
{
class Program
{

    static void Main(string[] args)
    {

        var standardRnd = new Random(20);

        var min = 1.0;
        var max = 0.0;
        var valueCounter = new int[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };
        var list = new Dictionary<double,int>();
        var duplicate = 0;
        var iterations = 0;

        var timeStart = DateTime.Now;

        //Do Stuff
        for (int x = 0; x < Count; x++)
        {

            var rand = standardRnd.NextDouble();

            if (!list.ContainsKey(rand))
                list.Add(rand, 1);
            else
            {
                list[rand]++;
                duplicate++;
            }

            iterations++;

        }

        var timeStop = DateTime.Now;
        var elapseTime = TimeSpan.FromTicks((timeStop-timeStart).Ticks);

        //Analytics
        var sum = 0.0;

        foreach (var kvp in list)
        {
            var rand = kvp.Key;

            if (rand < min)
                min = rand;
            if(rand>max)
                rand = max;

            if (rand >= 0.0 && rand < 0.1)
                valueCounter[0]++;
            if (rand >= 0.1 && rand < 0.2)
                valueCounter[1]++;
            if (rand >= 0.2 && rand < 0.3)
                valueCounter[2]++;
            if (rand >= 0.3 && rand < 0.4)
                valueCounter[3]++;
            if (rand >= 0.4 && rand < 0.5)
                valueCounter[4]++;
            if (rand >= 0.5 && rand < 0.6)
                valueCounter[5]++;
            if (rand >= 0.6 && rand < 0.7)
                valueCounter[6]++;
            if (rand >= 0.7 && rand < 0.8)
                valueCounter[7]++;
            if (rand >= 0.8 && rand < 0.9)
                valueCounter[8]++;
            if (rand >= 0.9 && rand <= 1.0)
                valueCounter[9]++;

            sum += rand * list[rand];
        }

        Console.WriteLine("{0:###,###,###} Iteration took: {1:D2}min:{2:D2}sec:{3:D2}msec",
                         iterations, elapseTime.Minutes, elapseTime.Seconds, elapseTime.Milliseconds);

        Console.WriteLine("    {0}\n    {1}", min, max);

        Console.WriteLine("    0.0 to 0.1 = {0:###,###,###}", valueCounter[0]);
        Console.WriteLine("    0.1 to 0.2 = {0:###,###,###}", valueCounter[1]);
        Console.WriteLine("    0.2 to 0.3 = {0:###,###,###}", valueCounter[2]);
        Console.WriteLine("    0.3 to 0.4 = {0:###,###,###}", valueCounter[3]);
        Console.WriteLine("    0.4 to 0.5 = {0:###,###,###}", valueCounter[4]);
        Console.WriteLine("    0.5 to 0.6 = {0:###,###,###}", valueCounter[5]);
        Console.WriteLine("    0.6 to 0.7 = {0:###,###,###}", valueCounter[6]);
        Console.WriteLine("    0.7 to 0.8 = {0:###,###,###}", valueCounter[7]);
        Console.WriteLine("    0.8 to 0.9 = {0:###,###,###}", valueCounter[8]);
        Console.WriteLine("    0.9 to 1.0 = {0:###,###,###}", valueCounter[9]);

        var avg = sum / (double)iterations;

        Console.WriteLine("\nStatistics:");
        Console.WriteLine(" Mean = {0}", avg);
        Console.WriteLine(" Duplicates = {0}", duplicate);

        Console.ReadKey();

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:36:49.607

问题在这里：

```
if (rand>max)
    rand = max; 
```

这将 0 分配给 rand。但是 0 不能保证在字典中。

你的意思是`max = rand;`。

* * *

还有一种更简单的方法可以使用 LINQ 查找集合中的最小值和最大值：

```
var keys = list.Keys;
double min = keys.Min();
double max = keys.Max(); 
```

# java - 如何在 64 位 jvm 上运行 32 位 jar

> ID：13385058
> 
> 赞同：3
> 
> 时间：2012-11-14T18:33:19.980
> 
> 标签：java, jar, jvm

我下载了一个 java 应用程序（来自 android 日志的桌面 ​​LogCat 查看器）并试图运行它。我的问题是我收到一个错误，似乎暗示我无法在 64 位 jvm 上运行 32 位 java 应用程序。堆栈跟踪如下。

我需要指出我无法更改来源。我无权访问它。我需要知道如何配置我的 jvm 来运行 jar。我在 Windows 7 中运行。

```
> java -jar LogcatOfflineViewer_20120505.jar
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: java.lang.UnsatisfiedLinkError: Cannot load 32-bit SWT libraries on 64-bit JVM
        at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
        at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
        at org.eclipse.swt.internal.C.<clinit>(Unknown Source)
        at org.eclipse.swt.widgets.Display.<clinit>(Unknown Source)
        at com.logcat.offline.UIThread.runUI(UIThread.java:112)
        at com.logcat.offline.Main.main(Main.java:6)
        ... 5 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T18:48:20.950

JAR 不是 32 位或 64 位的，它可以在任一 JVM 上运行。

但是，本机共享库是 32 位或 64 位的，它只能在具有该位数的 JVM 上运行。这是应用程序在 Windows 和 Linux（以及所有其他操作系统 AFAIK）上运行方式的限制。无法在 32 位 JVm 上加载 64 位库，反之亦然。您需要将您的 sahred 库版本与您的 JVM 相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T14:18:37.470

我有一个类似的问题，我通过在命令提示符中提供完整路径解决了确保在正确的 jvm 上运行我的 jar（我的系统中已经有 2 个版本的 java）

似乎您也可以使用 -d32 或 -d64 开关，即使在我的系统中不起作用（参见这个和其他替代方法是[How to run 32-bit Java on Mac OSX 10.7 Lion](https://stackoverflow.com/questions/6942063/how-to-run-32-bit-java-on-mac-osx-10-7-lion)）

# c# - 从 Bouncy Castle PGP 密钥中读取电子邮件地址

> ID：13385060
> 
> 赞同：2
> 
> 时间：2012-11-14T18:33:31.180
> 
> 标签：c#, bouncycastle, pgp

在与图书馆斗争了一段时间后，我不知道如何从[`PgpPublicKey`](http://boredwookie.net/_documentation/bouncycastle1.7-csharp/html/class_org_1_1_bouncy_castle_1_1_bcpg_1_1_open_pgp_1_1_pgp_public_key.html)对象中获取这个简单的数据。我尝试了最明显的路线，`GetUserAttributes()`但它返回一个空列表。`GetUserIds()`返回简单`string`对象的列表，但格式为`"Your Name (comment)"`.

如何检索密钥 ID 的电子邮件地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-03T11:00:13.397

```
public static void Test_ReadPublicKeys(PgpPublicKeyRingBundle publicKeyRingBundle)
{
    foreach (PgpPublicKeyRing publicKeyRing in publicKeyRingBundle.GetKeyRings())
    {
        foreach (PgpPublicKey publicKey in publicKeyRing.GetPublicKeys())
        {
            foreach (object userId in publicKey.GetUserIds())
            {
                //Prints "My_Key_Name (Notes) <my_email@gmail.com>"
                Console.WriteLine(userId); 
            }
        }
    }
} 
```

# java - dd / MM / yyyy日期格式在jsp by scriptlet

> ID：13385068
> 
> 赞同：2
> 
> 时间：2012-11-14T18:34:08.660
> 
> 标签：java, javascript

我想在 dd/MM/yyyy 格式的 jsp 页面中显示来自数据库的日期。这是我的 javascript 代码。

```
$(document).ready(function(){
    <%
         SDateDTO sDTO = (SDateDTO) request.getAttribute("sDTO");  
    if(null != scholAvailDTO){
        System.out.println(scholAvailDTO.getEndDate());
    %>

        var end = <%=scholAvailDTO.getEndDate() %>;
        $("#endDateId").val(end);
       <%       
    }
    %>

}); 
```

在控制台中，它将在 2010 年 4 月 27 日到来，但在 jsp 中，它会像 0.0033582089552238806 一样填充，这实际上是日期的除法结果。任何帮助将不胜感激。谢谢，阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:37:17.247

如果`getEndDate()`返回`java.util.Date`对象，则使用`DateFormat`for 获取格式化的字符串，然后将值用引号括起来，如下所示：

```
 <%DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");%>
    var end = "<%=formatter.format(scholAvailDTO.getEndDate()) %>"; 
```

如果`getEndDate()`返回`java.lang.String`，则只需将值用引号括起来，如下所示：

```
 var end = "<%=scholAvailDTO.getEndDate() %>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:37:30.943

嗯，是的 - 您的 Javascript 可能会以如下方式呈现给浏览器：

```
var end = 27/04/2010; 
```

如果您希望它*在字符串文字中，*那么您需要自己添加引号：

```
var end = "<%=scholAvailDTO.getEndDate() %>"; 
```

请注意，您需要确信该值本身没有引号 - 或其他不适合 JavaScript 的值 - 在那里。我怀疑可能有比上述更好的方法。

# wpf - WPF 关键帧绑定

> ID：13385069
> 
> 赞同：0
> 
> 时间：2012-11-14T18:34:08.987
> 
> 标签：wpf, binding, keyframe

我有一个动画到值集的条形图。动画代码看起来像

```
<UserControl.Resources>
    <Storyboard x:Key="BootUp">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="MainBar">
            <EasingDoubleKeyFrame KeyTime="0" Value="350"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="{Binding CurrentValue, ElementName=UserControl}"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</UserControl.Resources> 
```

和 C#

```
int ThisValue=200;
public int CurrentValue
{
    get { return (int)ThisValue; }
    set { 
            ThisValue=(int)value;
            this.MainBar.ToolTip=value.ToString();
            System.Windows.Media.Animation.Storyboard storyBoard = (System.Windows.Media.Animation.Storyboard)FindResource("BootUp");
            storyBoard.Begin(this);
        }

} 
```

我认为这应该有效，但每次它返回

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=UserControl'. BindingExpression:Path=CurrentValue; DataItem=null; target element is 'EasingDoubleKeyFrame' (HashCode=27594380); target property is 'Value' (type 'Double') 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:23:53.627

如果您更改绑定找到 UserControl 的方式，它应该可以工作。

替换这个：

```
Value="{Binding CurrentValue, ElementName=UserControl}" 
```

..有了这个：

```
Value="{Binding CurrentValue, RelativeSource={RelativeSource AncestorType=UserControl}} 
```

# user-interface - 带有 Glade 的树视图（Gtk Gui 编辑器）

> ID：13385081
> 
> 赞同：0
> 
> 时间：2012-11-14T18:34:52.347
> 
> 标签：user-interface, gtk, glade, gtktreeview

我正在寻找一种用林间**空地**制作一棵树的方法。

我已经找到了如何管理包含各种东西的列表，但我不知道如何正确地让一个元素有子元素。我尝试进入层次结构选项卡，然后将列和单元格渲染器拖到其他选项卡中。他们移动了一秒钟，然后被替换到原来的位置。

我还尝试在林间空地的其他“列”和“数据”小部件上进行这种拖放操作，但它也不起作用:(。

有人有解决方案吗？甚至只有 G​​lade 才有可能吗？我希望我清楚我的问题。

PS：我使用的是 Glade 3.12.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:32:09.303

你使用哪个版本的林间空地？您是否尝试右键单击树视图然后`edit`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:23:47.470

右键单击标签，然后您可以选择要添加的子类型。

# mysql - 输出查询时重复列名

> ID：13385083
> 
> 赞同：0
> 
> 时间：2012-11-14T18:34:54.430
> 
> 标签：mysql

每当 GROUP BY 信息更改时，是否可以在执行查询时重复数据库表列的名称？我的查询按列分组。

```
SELECT  name.fname as First_Name,  
  name.sales as Sales, 
  name.city as City 
FROM name 
GROUP BY city 
ORDER BY name.fname; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:41:20.440

我想你想要这个：

```
SELECT  name.fname as First_Name,  
  name.sales as Sales, 
  name.city as City 
FROM name 
ORDER BY city, fname; 
```

# javascript - 在附加图像的函数中使用 setTimeout

> ID：13385084
> 
> 赞同：1
> 
> 时间：2012-11-14T18:34:56.287
> 
> 标签：javascript, jquery, settimeout

我`append()`在`setTimeout`. 如果我删除 SetTimeout，则会加载所有图像。一旦我把它放在这里，变量似乎超出范围或无效。关于我在这里做错了什么有什么建议吗？

```
//    thumbs[] is an array with image sources.

for (var imageIndex = 0; imageIndex < thumbs.length; imageIndex++) {

     var im = thumbs[imageIndex];

     setTimeout(function(im){  
         $("#a").append("<img class='images' src='" + im + "' />");
     },1000);

} // end for 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T18:36:19.980

不要尝试传递`im`给`setTimeout`回调。您的匿名函数可以读取`im`，因为函数可以访问其父范围。如果您尝试像那样通过它，它将无法正常工作。`setTimeout`将在内部调用回调，而不传递任何参数。您实际上在做的是`im`在匿名函数内创建一个新的、未定义的局部变量，并阻止从外部范围访问该变量。所以这应该工作：

```
 var im = thumbs[imageIndex];
 setTimeout(function(){  
     $("#a").append("<img class='images' src='" + im + "' />");
 },1000); 
```

**但是**，您的代码在循环内，仅在循环内执行此操作是不够的。由于`setTimeout`调用是异步的，因此它们执行`im`时将始终是循环 ( `thumbs.length`) 中的最后一个值。您可以通过创建闭包来避免这种情况。Sushil 的回答就是一个例子，所以我将向您展示另一种风格：

```
for (var imageIndex = 0; imageIndex < thumbs.length; imageIndex++) {
     var im = thumbs[imageIndex];
     setTimeout(createTimerCallback(im), 1000);

} 

function createTimerCallback(im) {
    return function(){  
         $("#a").append("<img class='images' src='" + im + "' />");
    };
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T18:36:12.047

尝试这个。在你的情况`im`里面`setTimeout`是`undefiend`.

```
for (var imageIndex = 0; imageIndex < thumbs.length; imageIndex++) {

     var im = thumbs[imageIndex];

     setTimeout(function(im){  
         $("#a").append("<img class='image' src='" + im + "' />");
     },1000, im);

} 
```

IE 不支持传入参数，`setTimeout` 如果你想让它在所有浏览器上工作，试试这个

```
 for (var imageIndex = 0; imageIndex < thumbs.length; imageIndex++) {

         var im = thumbs[imageIndex];
       (function(im){
         setTimeout(function(){  
             $("#a").append("<img class='image' src='" + im + "' />");
         },1000);
 })(im);

    } 
```

# python - 在 python 中，如何有效地找到作为较大连续序列子集的连续序列？

> ID：13385085
> 
> 赞同：3
> 
> 时间：2012-11-14T18:34:56.590
> 
> 标签：python, algorithm

我需要找到一个月中发生某种活动的所有日子。活动发生的日子将是连续的。天的顺序可以从一到整个月不等，并且该顺序将每月恰好发生一次。

测试活动是否在任何一天发生并不是一个昂贵的计算，但我想我会用这个问题学习一些新的东西。哪种算法可以最大限度地减少我必须测试的天数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:39:01.020

没有比遍历序列找到第一个匹配项，然后迭代直到第一个不匹配项更好的了。您可以使用`itertools`它使它变得美观和可读：

```
itertools.takewhile(mytest, 
                    itertools.dropwhile(lambda x: not mytest(x), mysequence)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:56:42.980

我认为@isbadawi 建议的线性探针是找到子序列开头的最佳方法。这是因为子序列可能非常短，并且可能位于较大序列中的任何位置。

但是，一旦找到子序列的开头，我们就可以使用二分搜索来找到它的结尾。与进行第二个线性探头相比，这将需要更少的测试，因此它对您来说是一个更好的解决方案。

正如其他人指出的那样，这样做没有太多实际的理由。这是真的有两个原因：你的大序列很短（只有大约 31 个元素），无论如何你仍然需要做至少一个线性探测，所以 big-O 运行时在大序列的长度上仍然是线性的序列，即使我们已经将算法的一部分从线性减少到对数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T19:40:50.810

最好的方法取决于您的输入数据结构。如果您的输入数据结构是一个月中每一天的布尔值列表，那么您可以使用以下代码。

```
start = activity.find(True)
end = activity.rfind(True) 
```

# wpf - 显示文本、图像和 2d wpf 动画内容的最佳方式是什么？

> ID：13385088
> 
> 赞同：0
> 
> 时间：2012-11-14T18:34:58.770
> 
> 标签：wpf, expression-blend

在 WPF 中显示文本、图像和 2d wpf 动画内容的最佳方式是什么？我正在开发一个桌面应用程序，它应该以有组织且易于导航的方式显示此类内容但我不知道如何显示内容。
我考虑过使用 Flow 文档来处理文本和图像，但它不提供 wpf 动画的功能。我可以将文本图像部分与 wpf 动画分开，但这可能会使资源管理更加困难。显示此类内容的正确方法是什么？

**PS**我正在使用Expression Blend来设计用户界面并对一些资源进行动画处理，并且该应用程序是一本**电子杂志**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:01:15.997

我没有用过这个，但 FlowDocument 有动画

[FlowDocument.BeginAnimation 方法](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.beginanimation.aspx)

# ruby-on-rails - OrdersController 中的 Rails ArgumentError#new 验证

> ID：13385089
> 
> 赞同：0
> 
> 时间：2012-11-14T18:35:03.620
> 
> 标签：ruby-on-rails, arrays, validation, nomethoderror

这里的第二个问题，我真的很想自己解决这个问题，但我只是不知道从哪里开始调试它。

所以这是我在浏览器中的错误（当我去结账并在 order/_form.html.erb 中输入我的详细信息时发生）

> OrdersController 中的参数错误#new
> 
> 您需要提供至少一项验证
> 
> Rails.root：C:/Users/Ruby/rails_practice/depot4 应用程序跟踪 | 框架跟踪 | 全跟踪
> 
> app/models/payment_type.rb:6:in `<class:PaymentType>' app/models/payment_type.rb:1:in`' app/models/order.rb:7:in `<class:Order>' app/models/order.rb:1:in`' app/controllers/orders_controller.rb:1:in `'

这是我在 OrdersController 中的新定义：

```
def new
  @cart = current_cart
  if @cart.line_items.empty?
    redirect_to store_url, :notice => "Your cart is empty"
    return
  end

  @hide_checkout_button = true
  @order = Order.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @order }
  end
end 
```

问题是我没有接触 def new，我一直在做 def create，这里是：

```
def create
  @order = Order.new(params[:order])
  @order.add_line_items_from_cart(current_cart)
  @cart = current_cart
  @hide_checkout_button = true
  pay_type = PaymentType.find( :conditions => ['pay_type = ?', @order.pay_type] )
  @order.payment_type_id = pay_type.id

  respond_to do |format|
    if @order.save
      Cart.destroy(session[:cart_id])
      session[:cart_id] = nil
      format.html { redirect_to(store_url, :notice => 'Thank you for your order.') }
      format.json { render json: @order, status: :created, location: @order }
    else
      format.html { render action: "new" }
      format.json { render json: @order.errors, status: :unprocessable_entity }
    end
  end
end 
```

我正在尝试做的是创建一个订单，该订单是哪个`belongs_to`购物车`payment_type`和`has_many line_items`哪个`belongs_to`购物车。

`hide_checkout_button`顺便说一句，当我在订单页面上时，我也在尝试使用实例变量。

Orders 表有一个表的外键，`PaymentTypes`我试图从这个`PaymentTypes`表中找到`payment_type`用户提交的正确 id。

如果我注释掉这两行：

```
pay_type = PaymentType.find( :conditions => ['pay_type = ?', @order.pay_type] )
@order.payment_type_id = pay_type.id 
```

有时我会得到一个不同的错误：

> OrdersController 中的 NoMethodError#new
> 
> 未定义的方法“键？” 对于零：NilClass

我认为这与浏览器中的缓存不正确有关，但我不确定连接是什么。

我将在我第一次发布后更新其余部分

* * *

*部分双人*

我知道这是关于验证，但我看不出我做错了什么...... order.rb：

```
class Order < ActiveRecord::Base
  attr_accessible :address, :email, :name, :pay_type, :payment_type_id, :cart_id, 
  :product_id

  has_many :line_items, :dependent => :destroy
  belongs_to :payment_type

  PAYMENT_TYPES = PaymentType.pluck(:pay_type)

  validates :name, :address, :email, :pay_type, :presence => true
  validates :pay_type, :inclusion => PAYMENT_TYPES 
```

然后你得到了另一`belongs_to`面`payment_type.rb`

```
class PaymentType < ActiveRecord::Base
  attr_accessible :pay_type

  has_many :orders

  validates ***:pay_type,*** :uniqueness
end 
```

我知道我完全只是混淆了一些事情，但是我在功能测试中有一个失败，还有一个与更新订单有关的错误，但我还不知道是什么。我将研究它们，看看是否通过解决它们我无意中解决了这个奇怪的错误。

如果有人可以给我有关在 Rails 中进行黑客攻击和调试的提示，那就太好了。我希望能够在不在这里输入所有内容的情况下解决这个问题。

在这种情况下，我认为服务器跟踪不会提供比浏览器窗口更多的信息，但如果您需要它，或者有其他问题，请询问。

更新：

所以我的问题是我知道如何使用 payment_type.rb 中的全局变量来解决它，但这意味着我在 Orders 表中有一列支付类型，在另一列中有另一列名称和 payment_type_ids，这是外键.

由于我有外键，因此我不需要 Orders 表中的 payment_types 特定列。我应该能够在 Orders 视图中看到 PaymentType 表中的值。

如果没有全局变量，你如何做到这一点？

更新双人：

好的，所以我以前从未发布过这个（来自 orders_form.html.erb）：

```
26:   <div class="field">
27:     <%= f.label :pay_type %><br />
28:     <%= f.select :pay_type, PaymentType::PAYMENT_TYPES,
29:                      :prompt => 'Select a payment method' %>
30:   </div>
31:   <div class="actions"> 
```

因此，我尝试在 Orders 中选择 :pay_type，但在 PaymentTypes 中给出了来自 :pay_type 的选项。

我无法想象这很重要吗？似乎是我的问题所在，但不能确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:49:24.200

我认为您的 validate 包含的语法是错误的。它应该是这样的：

验证 :pay_type, :inclusion => { :in => PAYMENT_TYPES }

# vb.net - 在 Visual Basic 中选择列表框项时切换 CVS 文本文件项出错

> ID：13385092
> 
> 赞同：0
> 
> 时间：2012-11-14T18:35:25.933
> 
> 标签：vb.net, text, csv, if-statement, listbox

我正在尝试将“M”切换为“先生”。和“F”到“女士”。在列表框中选择姓氏时。当我单击第一个名称时，它起作用了，但是当我单击任何其他名称时，我收到了以下错误消息：

--附加信息：索引超出了数组的范围。--

文本文件中的信息是这样的：

```
 Ball,Krystal,F,1981
       Banks,Robin,F,1988
       Burgher,Hamilton,M,1980
       Early,Brighton,M,1989
       Hedd,MT,M,1960
       Hogg,Ima,F,1953
       Knapp,Anita,F,1970
       Overnout,Roger,M,1968
       Psito,Arnie,M,1962
       Teak,Anne,F,1939 
```

我的代码如下：

```
 Private Sub btnEnter_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnEnter.Click
    Dim names As IO.StreamReader = IO.File.OpenText("Info.txt")
    Dim lName As String = lstNames.Text
    Dim line As String
    Dim gender As String
    Dim foundFlag As Boolean = False
    Do Until foundFlag Or names.EndOfStream
        line = names.ReadLine
        If line.Split(","c)(2) = "M" Then
            gender = "Mr. "
        ElseIf line.Split(","c)(2) = "F" Then
            gender = "Ms. "
        End If
        If line.Split(","c)(0) = lName Then
            txtOutput.Text = gender & line.Split(","c)(1) & " " & line.Split(","c)(0) & " is " & 2012 - line.Split(","c)(3)
            foundFlag = True
        End If
    Loop

End Sub 
```

有人可以让我知道出了什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:00:14.387

我完全按照您在这里的方式重新创建了您的应用程序，并且运行良好。

这使我相信正在发生两件事之一：

1.  您的`Info.txt`文件中有错误字符
2.  您尚未`lstNames`使用与您在`Info.txt`.

PS - 您可能还想查看您的循环以使其更有效：

```
 Dim line() As String
    Dim gender As String
    Dim foundFlag As Boolean = False
    Do Until foundFlag Or names.EndOfStream
        line = names.ReadLine.Split(","c)

        If line(0) = lName Then
            If line(2) = "M" Then
                gender = "Mr. "
            ElseIf line(2) = "F" Then
                gender = "Ms. "
            End If
            txtOutput.Text = gender & line(1) & " " & line(0) & " is " & 2012 - cint(line(3))
            foundFlag = True
        End If
    Loop 
```

# java - 从相机捕获时旋转 SurfaceView

> ID：13385113
> 
> 赞同：0
> 
> 时间：2012-11-14T18:36:43.857
> 
> 标签：java, android, camera, surfaceview

我正在尝试创建简单的相机应用程序。我在布局中使用 SurfaceView 并以标准方式获取相机，例如 android.developer.com 上的相机教程。但结果我已经翻转和拉伸了图片。我试图在相机参数和 setDisplayOrientation(0) 中将方向设置为纵向，但这对我没有帮助。

![表面视图](../Images/8c114aacfff6d2be1a0410e774315b52.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:12:01.217

我发现这是 2.1 的问题。并且在 2.2 及以后的版本中有有用的方法 setDisplayOrientation 来解决这个问题。

# google-drive-api - Google Picker API 显示已删除的文件

> ID：13385116
> 
> 赞同：2
> 
> 时间：2012-11-14T18:36:57.327
> 
> 标签：google-drive-api, google-picker

我只想在 Google Picker 视图列表中显示当前在驱动器上的文件，或者如果可能仅在特定文件夹中显示。但是，当我尝试打开选择器时，它还会显示之前已删除的文件。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T19:01:57.980

我认为即使您想使用选择器也无法查看已删除的文件。

这些文件是否可能存在于您不知道的子文件夹中？我知道我犯了那个错误。如果您搜索驱动器，您可能会找到它们。

据我所知，要查看已删除的文件，您必须使用 gapi.client.drive.files.list api。它实际上默认显示它们，因此您必须使用查询词排除它们：

```
 'q' : 'trashed = false' 
```

# c++ - 为什么数组中所有值的输出为零？

> ID：13385127
> 
> 赞同：0
> 
> 时间：2012-11-14T18:37:39.500
> 
> 标签：c++, graph, input, matching

我得到了这个实现，以实现最大的网络匹配，并试图通过主类提供它的输入。但是我在比赛中的所有地方都得到了零。我究竟做错了什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <iostream> 
#include <queue>
using namespace std;
void add_edge(int u, int v);
void edmonds();
struct edge {
   int v, nx;
};
const int MAXN = 1000, MAXE = 2000;
edge graph[MAXE];
int last[MAXN], match[MAXN], px[MAXN], base[MAXN], N, M, edges;

bool used[MAXN], blossom[MAXN], lused[MAXN];

int main ()
{
//  return 0;
   add_edge(1,4);
   add_edge(1,5);
   add_edge(1,6);
   add_edge(2,5);
   add_edge(2,7);
   add_edge(3,4);
   add_edge(4,1);
   add_edge(4,3);
   add_edge(5,1);
   add_edge(5,2);
   add_edge(6,1);
   add_edge(7,2);
   edmonds();
   cout << match[0];
   cout << match[1];
   cout << match[2];
   cout << match[3];
   cout << match[4];
   cout << match[5];
   cout << match[6];
}

inline void add_edge(int u, int v) {
   graph[edges] = (edge) {v, last[u]};
   last[u] = edges++;
   graph[edges] = (edge) {u, last[v]};
   last[v] = edges++;
}

void mark_path(int v, int b, int children) {
   while (base[v] != b) {
      blossom[base[v]] = blossom[base[match[v]]] = true;
      px[v] = children;
      children = match[v];
      v = px[match[v]];
   }
}

int lca(int a, int b) {
   memset(lused, 0, N);
   while (1) {
      lused[a = base[a]] = true;
      if (match[a] == -1)
         break;
      a = px[match[a]];
   }
   while (1) {
      b = base[b];
      if (lused[b])
         return b;
      b = px[match[b]];
   }
}
int find_path(int root) {
   memset(used, 0, N);
   memset(px, -1, sizeof(int) * N);
   for (int i = 0; i < N; ++i)
      base[i] = i;
   used[root] = true;
   queue<int> q;
   q.push(root);
   register int v, e, to, i;
   while (!q.empty()) {
      v = q.front(); q.pop();
      for (e = last[v]; e >= 0; e = graph[e].nx) {
         to = graph[e].v;
         if (base[v] == base[to] || match[v] == to)
            continue;
         if (to == root || (match[to] != -1 && px[match[to]] != -1)) {
            int curbase = lca(v, to);
            memset(blossom, 0, N);
            mark_path(v, curbase, to);
            mark_path(to, curbase, v);
            for (i = 0; i < N; ++i)
               if (blossom[base[i]]) {
                  base[i] = curbase;
                  if (!used[i]) {
                     used[i] = true;
                     q.push(i);
                  }
               }
         } else if (px[to] == -1) {
            px[to] = v;
            if (match[to] == -1)
               return to;
            to = match[to];
            used[to] = true;
            q.push(to);
         }
      }
   }
   return -1;
}
void build_pre_matching() {
   register int u, e, v;
   for (u = 0; u < N; ++u)
      if (match[u] == -1)
         for (e = last[u]; e >= 0; e = graph[e].nx) {
            v = graph[e].v;
            if (match[v] == -1) {
               match[u] = v;
               match[v] = u;
               break;
            }
         }
}

void edmonds() {
   memset(match, 0xff, sizeof(int) * N);
   build_pre_matching();
   register int i, v, pv, ppv;
   for (i = 0; i < N; ++i)
      if (match[i] == -1) {
         v = find_path(i);
         while (v != -1) {
            pv = px[v], ppv = match[pv];
            match[v] = pv, match[pv] = v;
            v = ppv;
         }
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:31:45.287

您在两个位置设置元素`match`： In`build_pre_matching()`和 in `edmonds()`。在这两种情况下，如果`match[x]`某些索引`x`不是，则不会发生任何变化`-1`。获取值的唯一其他地方元素`match`是在静态初始化期间，值被初始化为零。由于初始值为零，并且只有在其中至少一个发生时才会更改这些`-1`值，所以我希望这些值保留该值`0`。

你可能想使用类似的东西

```
std::fill(std::begin(match), std::end(match), -1); 
```

在一个战略位置，因为您似乎假设这些值最初是`-1`. 当然，您还应该考虑**不**使用全局变量的想法，因为这不能扩展并且在多线程程序中工作得非常糟糕。

# android - Android 中的应用程序清单和库清单

> ID：13385131
> 
> 赞同：3
> 
> 时间：2012-11-14T18:37:53.447
> 
> 标签：android, manifest

我正在开发一个应用程序，另一个项目作为我的库。

清单文件中合并了哪些属性？

示例 - 如果权限已在库的清单文件中指定，是否需要在应用程序清单中再次指定？

另外，如果图书馆项目中有服务，我是否也需要在应用程序清单中再次手动指定（除了图书馆的清单）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T03:49:43.340

此页面有一个部分：http: [//developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)说您必须（重新）声明您的应用程序将成为的库项目的所有位在清单文件中使用。

> 在清单文件中声明库组件
> 
> 在应用程序项目的清单文件中，您必须添加应用程序将使用的从库项目导入的所有组件的声明。例如，您必须声明活动、服务、接收者、提供者等，以及权限、使用库和类似元素。
> 
> 声明应在适当的情况下通过其完全限定的包名称引用库组件。

就个人而言，这似乎是多余的，但这可能是因为应用程序不需要使用库项目的所有组件，并且应用程序不应该假设它会。

# windows - 在 Windows 上从命令行监视单个进程/端口的网络字节/秒

> ID：13385136
> 
> 赞同：0
> 
> 时间：2012-11-14T18:38:15.397
> 
> 标签：windows, networking, performancecounter

我需要从命令行监视一段时间内每秒发送/接收的平均网络字节数，但仅针对某个进程或端口发送/接收的网络流量。

我目前能够使用以下方法监控所有网络流量：

```
logman create counter -n CounterName -c "\Network Interface(*)\Bytes Total/sec" -f csv -o C:\output.log -si 1 
```

这给了我以 1 秒为间隔的网络总字节数/秒的 CSV，然后我可以解析并确定平均值，但我需要能够监控仅在单个端口或单个进程上发送/接收的流量（端口将会更好）

我已经进行了大量的谷歌搜索，但找不到 Windows 内置的任何内容来执行此操作。（我也看过 netstat ）。我对任何可以做到这一点的免费第三方工具持开放态度，它们只需要能够从命令行运行并生成某种日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:59:15.390

如果你想自己实现一些东西，你可以编写一个 Upper-Layer Windows Filter 驱动程序：

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff564862(v=vs.85).aspx#possible_driver_layers](http://msdn.microsoft.com/en-us/library/windows/hardware/ff564862(v=vs.85).aspx#possible_driver_layers)

# jquery - 在更改事件上启用电话呼叫功能（jQuery）

> ID：13385143
> 
> 赞同：3
> 
> 时间：2012-11-14T18:38:39.463
> 
> 标签：jquery, html, href, phone-call, tel

我正在尝试在更改事件（HTML`<select>`标记）上启用电话呼叫功能，以便引用适当的`"tel:"`值。

**我使用默认浏览器在Android** *（**2.2**和**4.0**版本）*上运行测试：我没有得到想要的效果。

下面是我的代码：

HTML

```
<select class="call-us-options">
    <option value="">Select a branch:</option>
    <option value="branch-a">Branch A</option>
    <option value="branch-b">Branch B</option>
    <option value="branch-c">Branch C</option>
</select>
<a class="phone branch-a" href="tel:(22) 2222-222" title="Branch A">Branch A</a>
<a class="phone branch-b" href="tel:(33) 3333-3333" title="Branch B">Branch B</a>
<a class="phone branch-c" href="tel:(44) 4444-4444" title="Branch C">Branch C</a> 
```

jQuery

```
$('.call-us-options').on('change', function() {
    if($(this).val()) {
        alert($('.'+$(this).val()).html());
        $('.'+$(this).val()).trigger('click');
    }
});​ 
```

这是 JSFiddle：http: [//jsfiddle.net/CZ3WF/1/](http://jsfiddle.net/CZ3WF/1/)

有没有有效的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:42:12.517

您是否尝试`window.location = "tel:(44) 4444-4444"`过（无论锚中与 selectIndex 对应的数字是多少）与`onChange`事件有关`<select>`？

## 编辑：

`click()`只会触发 javascript 事件处理程序，实际上不会转到该 URL。我不确定这是否可行，但你可以尝试`window.location`一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:44:10.390

```
$('.call-us-options').on('change', function() {

        window.location.href = $('.'+$(this).val()).attr('href');

}); 
```

# browser - 通过屏幕抓取从浏览器获取数据

> ID：13385146
> 
> 赞同：2
> 
> 时间：2012-11-14T18:38:51.167
> 
> 标签：browser, screen-scraping

我已经解决了几个相关的问题，但它们没有包含我正在寻找的答案。所以，这是我的问题：

我的工作场所有几个 Web 应用程序，它们是使用不同的框架编写的，而且作者早就去要求更新功能了。因此，我每天都必须通过相同的艰苦操作序列才能获得，这相当于几千字节的文件大小。

我尝试解析页面源代码，但作者的编程技术无处不在。有些人甚至故意隐藏代码以不让数据显示为文本，并且没有理由这样做，因为他们编写的代码是公司资产。长话短说，我意识到如果我可以复制和粘贴这些页面的文本内容，我可以比解析页面源来获取文本更容易处理这些数据（这有时是完全不可能的）

所以，我现在正在寻找一个浏览器插件（在 windows 或 linux 环境中）或 windows 或 linux 上基于文本的等效工具，它们将在调用时加载这些页面并将屏幕上的文本保存到文件中。

尽管我多么努力，我还是空手而归。

我不想使用第三方屏幕抓取网站的服务，因为数据是公司机密，外部各方无法访问。一切都必须在客户端发生，因为我无法访问这些应用程序正在运行的服务器（主要是 Windows 前端的 IIS 和后端的 oracle db。正如我之前解释的那样，中间层是任何人的狂野猜想，从原生 oracle 应用程序到 weblogic 到 tomcat 以及一些内部开发的 java/javascript 东西。

感谢您提前提供的所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T17:40:59.270

在寻找了一年多的答案之后，我意识到，只要我使用 Windows，它的现代版本，即 autohotkey 是我的救星。

我打开网页，最大化它，放置我的光标（mousemove，x，y）然后左键单击（mouseclick，L）然后发送 ctrl-A，然后是 ctrl-C。

瞧！一切都在剪贴板中。然后我激活我的 unix 会话（winactivate PuTTY）并发送适当的按键命令来启动我选择的编辑器（即 vi），最后发送一个 shift-Insert 以将剪贴板粘贴到我的文档中。然后保存并退出当然。

作为额外的奖励，在我的文档被保存后，我可以调用我选择的脚本来解析这个文件并将我感兴趣的部分返回给我。

我知道这不是防弹的，但就我的目的而言，它在很大程度上有帮助。事实上，我可以用这种方法做任何我想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:41:48.790

像这样的东西怎么样：[http:](http://www.nirsoft.net/utils/htmlastext.html) //www.nirsoft.net/utils/htmlastext.html 将 HTML 页面转换为文本的免费软件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T23:56:50.587

任何链接，lynx 或 w3m 都会做你想做的事，它们是文本浏览器，你可以从网页中转储文本，例如：

```
w3m -dump http://www.google.com > g.txt 
```

# jquery - 非常简单的ajax查询不起作用

> ID：13385148
> 
> 赞同：0
> 
> 时间：2012-11-14T18:38:58.390
> 
> 标签：jquery, ajax, api, post

我知道我是 ajax 新手，但我连续 2 个小时左右就一直在尝试这个查询。

我要连接的网站是 [http://cbsserver.zni.in/dnd/?phone=xxxxxxxxxx&apikey=xyz](http://cbsserver.zni.in/dnd/?phone=xxxxxxxxxx&apikey=xyz) 在这个我们必须发布一个我拥有的私有 api 密钥和一个手机号码来检查状态..要对其进行测试，请使用`phone = '9999052908' & '9810241604'`，`api_key = 'c115da3fcad11daa26dbbfd4f06387d8'` 我正在使用的代码如下

查询

```
var dnd_api_key = c115da3fcad11daa26dbbfd4f06387d8
    $('input#check_for_dnd').click(function() {
                $.post("http://cbsserver.zni.in/dnd/",
            {
            phone:"9999052908",
            apikey: dnd_api_key
            },
      function(data,status){
        alert(status + "data:" + data);
      }); 
```

HTML

```
<input type="button" id="check_for_dnd" name="check_for_dnd" value="CHECK DND STATUS" /> 
```

请告诉我哪里出错了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:39:54.077

您不能 - 一般来说，没有 JSONP 和 CORS 等例外 - 对远程 url 进行 ajax 调用。

尝试在请求页面的服务器上使用“代理文件”（例如用 PHP 编写）。然后对位于您服务器上的此代理文件进行 ajax 调用。

这可能看起来像这样（如果服务也可以使用 GET 请求，否则您必须使用流或 CURL）：

```
$result = file_get_contents("http://cbsserver.zni.in/dnd/?phone=xxxxxxxxxx&apikey=xyz");
echo $result; 
```

将此文件保存在您的服务器上并像您一样使用 ajax 请求它：

```
$('input#check_for_dnd').click(function() {
                $.post("my_proxy_file.php",
      function(data,status){
        alert(status + "data:" + data);
      }); 
```

# android - 必应地图 Android SDK 在 4.0 上崩溃

> ID：13385154
> 
> 赞同：1
> 
> 时间：2012-11-14T18:39:18.397
> 
> 标签：android, android-4.0-ice-cream-sandwich, bing-maps

从 codeplex 下载 SDK 后，我在 bin/ 文件夹下安装了 BingMapsAndroidSPK.apk。它在地球和建筑标志处冻结（同时使用模拟器和 USB 手持设备），它在 2.x 上运行良好。（模拟器），并且已经更新了 BingMapsAndroid.js 和 map.html 资产文件，正如它所说[的，](http://bingmapsandroidsdk.codeplex.com/workitem/1)但它没有工作。有什么想法可以在冰淇淋三明治上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:04:27.313

按照此链接，您将能够解决问题... [https://bingmapsandroidsdk.codeplex.com/discussions/439647](https://bingmapsandroidsdk.codeplex.com/discussions/439647) 您必须更改 map.html 文件并从代码中删除启动画面...

# c - 如何允许 C 库使用调用者的日志记录？

> ID：13385155
> 
> 赞同：1
> 
> 时间：2012-11-14T18:39:20.027
> 
> 标签：c, logging

这个Linux 库[的风格指南](https://git.kernel.org/?p=linux/kernel/git/kay/libabc.git;a=blob_plain;f=README)建议“允许应用程序将库挂接到其日志记录工具中”。这通常是通过什么机制完成的？一个带有指向日志记录函数的指针的函数？你能举出例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:47:15.063

这是来自 SQLite 的示例。[`sqlite3_config()`](http://www.sqlite.org/c3ref/config.html)您可以通过使用[`CONFIG_LOG`](http://www.sqlite.org/c3ref/c_config_getmalloc.html#sqliteconfiglog)参数调用来设置它的记录方式。您传入一个函数指针和一个 void 指针。函数指针接受三个参数；一个 void 指针、一个整数和一个`char *`. 当 SQLite 需要记录某些内容时，它会调用您的函数指针，传入您传递给的 void 指针、`CONFIG_LOG`结果代码和包含日志消息的字符串。

> SQLITE_CONFIG_LOG
> 
> SQLITE_CONFIG_LOG 选项有两个参数：一个指向函数的指针，其调用签名为`void(*)(void*,int,const char*)`, 和一个指向 void 的指针。如果函数指针不为 NULL，则 sqlite3_log() 调用它来处理每个日志记录事件。如果函数指针为 NULL，则 sqlite3_log() 接口变为空操作。每当调用该函数时，作为 SQLITE_CONFIG_LOG 的第二个参数的 void 指针作为第一个参数传递给应用程序定义的记录器函数。logger 函数的第二个参数是对应 sqlite3_log() 调用的第一个参数的副本，旨在作为结果代码或扩展结果代码。传递给记录器的第三个参数是通过 sqlite3_snprintf() 格式化后的日志消息。SQLite 日志接口不可重入；应用程序提供的记录器函数不得调用任何 SQLite 接口。在多线程应用程序中，

您可以`sqlite3_log()`在[SQLite 的`printf.c`](http://www.sqlite.org/src/artifact/4a9f882f1c1787a8b494a2987765acf9d97ac21f). 它使用`snprintf()`（即它们的包装器）打印到堆栈上的缓冲区中，因为当您无法调用时可能会调用日志记录函数`malloc`，然后将结果传递回用户配置的函数指针，以及他们提供的值和错误代码。

```
/*
** This is the routine that actually formats the sqlite3_log() message.
** We house it in a separate routine from sqlite3_log() to avoid using
** stack space on small-stack systems when logging is disabled.
**
** sqlite3_log() must render into a static buffer.  It cannot dynamically
** allocate memory because it might be called while the memory allocator
** mutex is held.
*/
static void renderLogMsg(int iErrCode, const char *zFormat, va_list ap){
  StrAccum acc;                          /* String accumulator */
  char zMsg[SQLITE_PRINT_BUF_SIZE*3];    /* Complete log message */

  sqlite3StrAccumInit(&acc, zMsg, sizeof(zMsg), 0);
  acc.useMalloc = 0;
  sqlite3VXPrintf(&acc, 0, zFormat, ap);
  sqlite3GlobalConfig.xLog(sqlite3GlobalConfig.pLogArg, iErrCode,
                           sqlite3StrAccumFinish(&acc));
}

/*
** Format and write a message to the log if logging is enabled.
*/
void sqlite3_log(int iErrCode, const char *zFormat, ...){
  va_list ap;                             /* Vararg list */
  if( sqlite3GlobalConfig.xLog ){
    va_start(ap, zFormat);
    renderLogMsg(iErrCode, zFormat, ap);
    va_end(ap);
  }
} 
```

或者你可以看看[libpng](http://www.libpng.org/pub/png/libpng-1.2.5-manual.html#section-5.1)。默认情况下，它会将错误记录到 stderr，但您可以提供自己的回调来覆盖它。你调用`png_set_error_fn()`，传递你的`png_struct`，一个空指针和两个回调，一个用于错误，一个用于警告。然后它会用两个参数调用你的函数指针；,`png_struct`您可以通过它访问您的 void 指针`png_get_error_ptr()`, 和`char *`. 同样，libpng 处理`snprintf()`, 并且只传递一个`char *`到日志回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:42:51.737

例如，在您的库的配置中，您可以有一个用户定义的函数指针：

```
struct my_lib_config
{
    void (* log) (const char * message);
}; 
```

有一个合理的默认值：

```
void log_default (const char * message)
{
    fprintf (stderr, "%s\n", message);
}

if (!config.log)
    config.log = log_default; 
```

这样，您的库将默认记录到 stderr，除非应用程序将`log`函数指针设置为自己的函数。

# php - 计算每次修订的评论？

> ID：13385168
> 
> 赞同：6
> 
> 时间：2012-11-14T18:40:01.317
> 
> 标签：php, mysql, codeigniter

我需要有人帮我解决这个问题。今天我的脑袋不想思考。

所以，我有一个名为“recensions”的表，还有一个名为“comments”的表。在每个表中，我都有一个名为“amne_id”的列。这将使我可以将评论与正确的修订联系起来。

现在，在我的第一页上，我只需使用代码获取所有修订：

```
$rec = $this->db->get('recensions'); 
```

我想要的是计算每次修订有多少评论。但我不知道怎么做。我想我也许应该使用 JOIN 和 num_rows()？

如果你不明白，请询问，以便我更好地解释。

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:49:58.783

```
$this->db->select('COUNT(*) as count, recensions.anme_id as recension_id')
->from('recensions')
->join('comments','recensions.anme_id = comments.anme_id','left')
->group_by('anme_id');
$result = $this->db->get(); 
```

应该给你recensions id和那个id的评论数。

然后循环：

```
foreach($result->result() as $row){
    echo "Recension id $row->recension_id has $row->count comments<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:49:02.570

我不知道您正在使用的数据库连接器，但在纯 SQL（假设`connection recensions.id=comments.anme_id`连接）中，试试这个：

```
SELECT COUNT(comments.id), anme_id
FROM recensions
LEFT JOIN comments on comments.anme_id=recensions.id
GROUP BY anme_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:41:45.277

像这样？？

```
$sql = mysql_query("SELECT * FROM recensions");
while($row = mysql_fetch_array($sql)){
$amne_id = $row{"amne_id"};
$sql2 = mysql_query("SELECT * FROM comments WHERE amne_id='$amne_id'");
$total_comments = mysql_num_rows($sql2);
echo $total_comments;
} 
```

# scala - 我应该避免在 Scala 中定义“对象”吗？

> ID：13385171
> 
> 赞同：3
> 
> 时间：2012-11-14T18:40:22.677
> 
> 标签：scala, design-patterns

我认为 Scala 中的“对象”与 Java 中的 Singleton 非常相似，这不被认为是一种好的设计实践。对我来说，单例就像另一种定义全局变量的方式，这是不好的。我写了一些这样的 Scala 代码，因为它很简单而且可以工作，但是代码看起来很难看：

```
object HttpServer { // I'm the only HttpServer instance in this program.
  var someGlobalState: State
  def run() {
    // do something
  }
} 
```

我试图避免这样做。什么时候定义 Scala 对象比较好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T18:55:25.973

不，许多 Scala 库严重依赖对象。

单例模式的主要目标是对象只能存在一个实例。对象也是如此。

您可能会误用它作为全局变量，但这不是重点。

例如，对象是工厂方法的好地方，也可以替代模块来保存函数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-14T19:18:51.890

为什么你假设你只想要全局*变量*？全局值和方法非常有用。这是您将`object`在 Scala 中使用的大部分内容。

```
object NumericConstant {
  val Pi = 3.1415926535897932385   // I probably will not change....
}

object NumericFunctions {
  def squared(x: Double) = x*x     // This is probably always what we mean...
} 
```

现在，您*必须*小心使用全局变量，如果您愿意，可以在对象中实现它们。然后你需要弄清楚你是否粗心（注意：将一个类的相同实例传递给程序中的每个类和方法同样有问题），或者你正在做的事情的逻辑是否最好通过单一的全局值。

这是一个非常非常糟糕的主意：

```
object UserCache {
  var newPasswordField: String = "foo bar"
} 
```

两个用户同时更改他们的密码，然后……嗯……你会有一些不满意的用户。

另一方面，

```
object UserIDProvider {
  private[this] var maxID = 1
  def getNewID() = this.synchronized {
    var id = maxID
    maxID += 1
    id
  }
} 
```

如果你*不做*这样的事情，同样，你会有一些不满意的用户。（当然，您确实需要在启动时读取磁盘上有关用户 ID 号的一些状态……或者将所有这些内容保存在数据库中……但您明白了。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T18:48:13.367

全局变量本身并不坏。你只需要了解什么时候合适。因此，它`object`本质上并不坏。例如：

```
object HelloWorld {
  def main(args:Array[String]){
     println("Hello World")
  }
} 
```

不用对这个话题进行长时间的讨论，我喜欢这样想：“我想要这些东西中的'只有一个'，因为它最能反映现实吗？或者这是一个让事情'正常工作'的懒惰捷径？”

不要盲目而广泛地应用“单身不好”的规则。在很多情况下，“只有一个”是有意义的。在您的特定情况下，我需要更多上下文来提供更具体的建议。

# python - 循环遍历字符串和元组列表并附加唯一组合

> ID：13385175
> 
> 赞同：0
> 
> 时间：2012-11-14T18:40:32.017
> 
> 标签：python, string, list, loops, tuples

我一直在研究这个循环问题。如何遍历包含单个字符串和元组的列表，同时将元组附加到前面的字符串？例如：

```
gen = ['A', ('x', 'y'), ('t', 'u'), 'B', ('y', 't'), 'B', ('a', 'z')]
fam = ['A', 'B'] 
```

幸运的是`fam`，它还包含嵌入在`gen`. 最后，我想要以下内容。

```
result = [('A',('x','y')), ('A', ('t', 'u')), ('B', ('y', 't')), ('B', ('a', 'z')) 
```

请注意，单个字符串（例如'A'）后面的元组正在附加到它。

如何循环`gen`以使元组在其前面附加单个字符串？到目前为止，我有类似以下的内容。它将所有组合附加在`gen`, 然后是一些。我愚蠢地创建了一个副本`gen`，即`gen2`帮助循环，但无济于事。

```
gen = ['A', ('x', 'y'), ('t', 'u'), 'B', ('y', 't'), 'B', ('a', 'z')]
fam = ['A', 'B']
gen2 = ['A', ('x', 'y'), ('t', 'u'), 'B', ('y', 't'), 'B', ('a', 'z')]

result = []
for f in fam:
    for g in gen:
        if len(g) == 2:
            for g2 in gen2:
                if g2 == f:
                    result.append((g2,f))
print result 
```

如果我的漫游太混乱，我很抱歉。我很欣赏任何见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:55:49.700

`fam`如果您跟踪遇到的最后一个字符串，您可以在一个循环中执行此操作而无需使用。但是，只有当 的第一个元素`gen`是字符串时，它才能正常工作。

```
gen = ['A', ('x', 'y'), ('t', 'u'), 'B', ('y', 't'), 'B', ('a', 'z')]

result = []
lastStringSeen = None
for i in gen:
    if isinstance(i, str):
        lastStringSeen = i
    else: #must be a tuple
        result.append((lastStringSeen, i))
print result 
```

输出：

```
[('A', ('x', 'y')), ('A', ('t', 'u')), ('B', ('y', 't')), ('B', ('a', 'z'))] 
```

# ruby-on-rails - asset_sync Gem 导致 Heroku 挂起预编译

> ID：13385176
> 
> 赞同：2
> 
> 时间：2012-11-14T18:40:35.250
> 
> 标签：ruby-on-rails, heroku, amazon-web-services, asset-pipeline, precompile

我将asset_sync gem 与Heroku 部署（Rails 3.2.3）一起使用。预编译在本地运行良好（将资产推送到我的 AWS 存储桶没有问题），但是当我推送到 Heroku 时，它在资产预编译期间挂起。

```
Preparing app for Rails asset pipeline
Running: rake assets:precompile
AssetSync: using default configuration from built-in initializer 
```

然后最终它超时而没有解释：

```
/app/slug-compiler/lib/utils.rb:66:in `block (2 levels) in spawn': command='/app/slug-compiler/lib/../../tmp/buildpacks/ruby/bin/compile /tmp/build_33de6far26atq /app/tmp/repo.git/.cache' exit_status=0 out='' at=timeout elapsed=900.1074194908142 (Utils::TimeoutError)
    from /app/slug-compiler/lib/utils.rb:52:in `loop'
    from /app/slug-compiler/lib/utils.rb:52:in `block in spawn'
    from /app/slug-compiler/lib/utils.rb:47:in `popen'
    from /app/slug-compiler/lib/utils.rb:47:in `spawn'
    from /app/slug-compiler/lib/buildpack.rb:38:in `block in compile'
    from /app/slug-compiler/lib/buildpack.rb:36:in `fork'
    from /app/slug-compiler/lib/buildpack.rb:36:in `compile'
    from /app/slug-compiler/lib/slug.rb:487:in `block in run_buildpack'
    from /app/slug-compiler/lib/utils.rb:121:in `log'
    from /app/slug-compiler/lib/slug.rb:743:in `log'
    from /app/slug-compiler/lib/slug.rb:486:in `run_buildpack'
    from /app/slug-compiler/lib/slug.rb:116:in `block (2 levels) in compile'
    from /app/slug-compiler/lib/utils.rb:102:in `block in timeout'
    from /usr/local/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
    from /app/slug-compiler/lib/utils.rb:102:in `rescue in timeout'
    from /app/slug-compiler/lib/utils.rb:97:in `timeout'
    from /app/slug-compiler/lib/slug.rb:104:in `block in compile'
    from /app/slug-compiler/lib/utils.rb:121:in `log'
    from /app/slug-compiler/lib/slug.rb:743:in `log'
    from /app/slug-compiler/lib/slug.rb:103:in `compile'
    from /app/slug-compiler/bin/slugc:85:in `block in <main>'
    from /app/slug-compiler/lib/slug.rb:495:in `block in lock'
    from /app/slug-compiler/lib/repo_lock.rb:44:in `call'
    from /app/slug-compiler/lib/repo_lock.rb:44:in `run'
    from /app/slug-compiler/lib/slug.rb:495:in `lock'
    from /app/slug-compiler/bin/slugc:66:in `<main>'
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

`$ heroku config`表明我已经设置了以下 ENV，我一次又一次地检查了这些 ENV。我知道它们是正确的值，因为它们在我本地预编译时起作用：

```
AWS_ACCESS_KEY_ID:          XXXX
AWS_SECRET_ACCESS_KEY:      XXXX
FOG_DIRECTORY:              XXXX
FOG_PROVIDER:               AWS
FOG_REGION:                 eu-west-1 
```

我没有签入我的 public/assets 文件夹，并且我的 production.rb 中有以下设置：

```
 # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed (This would involve live compilation and a big performance issue)
  config.assets.compile = false

  # Generate digests for assets URLs (Fingerprinting)
  config.assets.digest = true

  # (Heroku requires that this be false)
  config.assets.initialize_on_precompile = false

  # AWS Bucket
  config.action_controller.asset_host = "http://#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com" 
```

如asset_sync的自述文件中所述，我在Heroku上设置了以下内容：

```
$heroku labs:enable user-env-compile -a myapp 
```

什么可能导致这些问题和/或如何进一步调试它们。我看不到有关预编译为何挂在 Heroku 上的更多信息的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:24:53.630

Turns out it was a problem in the Sass compiler. It was choking on something without throwing any kind of error. I managed to get a bit more information using the steps outlined [here](https://stackoverflow.com/questions/13360085/verbose-output-from-rake-assetsprecompile), by waiting until it was hung, then quitting the process. That gave me a stack trace back to the sass parser. Think it was some kind of circular dependency.

# sql - 当它们都引用另一个表的 ID 时，如何根据输入到另一个字段的数据限制一个字段的多选选项？

> ID：13385177
> 
> 赞同：0
> 
> 时间：2012-11-14T18:40:35.917
> 
> 标签：sql, ms-access, ms-access-2007

我有两张桌子，我们称它们为 T1 和 T2。T1目前有近600条记录，其中一条包含ID号，另一条包含标题，所以ID和TITLE：

```
T1
ID   | TITLE
-----|----------
1    | Title ABC
...  | ...
201  | Title XYZ
...  | ...
411  | Title 123 
```

T2 有一个 ID 字段、一个 Titles 字段、一个 Accepted Titles 字段和一个 Rejected Titles 字段，因此 ID、TITLES、ACCEPTED TITLES 和 REJECTED TITLES。访问表单使用多选列表框从 T1 中选择一个或多个 TITLES，但需要多个，但通常不超过十个。一旦进入 T2 的 TITLES 字段，这是与从 T1 中选择的标题相对应的记录 ID 的数字，我希望 T2 中每个 ACCEPTED TITLES 和 REJECTED TITLES 的组合框仅限于显示这些标题对应于在 TITLES 字段中输入的 ID。所以，如果我在 T2 的 TITLES 字段中，

```
T2
ID | TITLES        | ACCEPTED TITLES  | REJECTED TITLES 
---|---------------|------------------|----------------
1  | 1, 201, 411   |                  | 
```

我希望 ComboBox 的下拉菜单仅显示与输入到 TITLES 字段中的那些 ID 对应的标题。因此，以 ACCEPTED TITLES 字段为例，它可能如下所示：

```
T2
ID | TITLES        | ACCEPTED TITLES    | REJECTED TITLES 
---|---------------|--------------------|---------------
1  | 1, 201, 411   | | [ ] Title ABC  \/|
                     | [ ] Title XYZ   |
                     | [ ] Title 123   | 
```

我想我应该能够构建一个 SELECT WHERE IN (...) 语句，我可以在 ACCEPTED TITLES 和 REJECTED TITLES 的“行源”属性中使用该语句。那么该列表将与为 TITLES 选择的项目一样短，而不是 600 多条记录。这也完全消除了在 ACCEPTED TITLES 或 REJECTED TITLES 下输入错误的可能性，因为这些标题只能从在 TITLES 下输入的标题中选择。但是，我还不知道如何构建这样的 SELECT 语句。

任何帮助将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:12:45.857

我为 T2（TitleStatus）提出了一个稍微不同的设计。

```
Create Table [TitleStatus] ([TitleID] Number, [StatusID] Number);
Create Index TitleIDindex ON [TitleStatus] (TitleID) WITH PRIMARY; 
```

然后是另一个表格来存放状态。就像是

```
Create Table [Statuses] ([StatusID] Number, [StatusText] String);
Create Index StatusIDindex ON [Statuses] (StatusID) WITH PRIMARY; 
```

（此表可以用一列组织，但无论哪种方式，您都希望防止诸如“已接受”和“已接受标题”之类的状态潜入。然后您将有两条相同的记录，但您自然不知道寻找两者）

然后 T2 (TitleStatus) 看起来像

```
TitleStatus
TITLEID   | STATUSID
----------|----------
1         | 1
...       | ...
201       | 1
...       | ...
411       | 1
500       | 2 
```

哪里`Statuses`看起来像

```
 StatusID | StatusText
 1        | Accepted
 2        | Rejected 
```

你的插入应该是相当直接的形式。

您可以像这样获得所有接受的标题

```
Select T1.Title, Status.StatusText
From T1
Inner join TitleStatus TS on TS.TitleID = T1.ID
Inner Join Statuses S on S.StatusID = TS.StatusID
Where S.StatusText = 'Accepted' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:57:02.527

我找到了解决方案。它实际上比我意识到的要简单得多：

```
Public Function GetTitleIDs() As String
   Dim IDData As ADODB.Recordset
   Dim SubLookup As Variant
   Dim SelectSubmissions As String

   ' Should pull the same records and in the same order as '
   ' those found in originating Listbox '
   Set IDData = CurrentProject.Connection.Execute("SELECT [Poems].[ID], [Poems].[Title] FROM Poems ORDER BY [Title];")
   SubLookup = IDData.GetRows

   ' Submissions is the name of my originating Listbox. The rest remains unaltered. '
   Dim listrow As Integer
   For listrow = 0 To Me.Submissions.ListCount - 1
      If Me.Submissions.Selected(listrow) = True Then
         SelectSubmissions = ", " & SubLookup(0, listrow) & SelectSubmissions
      End If
   Next
   If Len(SelectSubmissions) > 0 Then
      SelectSubmissions = Right(SelectSubmissions, Len(SelectSubmissions) - 1)
   End If

   GetTitleIDs = SelectSubmissions
End Function

Private Sub Form_Current()
   ' Needed to update existing Listbox entry or entries when record is loaded '
   ' in form. If record is new, Listbox(es) will simply contain no records. This '
   ' can source all records for the fields you want in order to show existing '
   ' Listbox entries without fail. '
   Me.Declined.RowSource = "SELECT [Poems].[ID], [Poems].[Title], [Poems].[Year Completed], [Poems].[Blog Location] FROM Poems ORDER BY [Title];"
   Me.Accepted.RowSource = "SELECT [Poems].[ID], [Poems].[Title], [Poems].[Year Completed], [Poems].[Blog Location] FROM Poems ORDER BY [Title];"
End Sub

Private Sub Declined_GotFocus()
   ' Presumably your subset selection list gets focus after '
   ' checking list entries in originating Listbox. '
   Me.Declined.RowSource = "SELECT [Poems].[ID], [Poems].[Title], [Poems].[Year Completed], [Poems].[Blog Location] FROM Poems WHERE [ID] IN (" & GetTitleIDs & ") ORDER BY [Title];"
End Sub

Private Sub Accepted_GotFocus()
   Me.Accepted.RowSource = "SELECT [Poems].[ID], [Poems].[Title], [Poems].[Year Completed], [Poems].[Blog Location] FROM Poems WHERE [ID] IN (" & GetTitleIDs & ") ORDER BY [Title];"
End Sub 
```

这将仅显示在提交项下选中的已拒绝和已接受选项，将选择选项限制为仅对这些字段感兴趣的值。这是完美的。

只要分配给 IDData 的记录和您要检查的 ListBox 的表和顺序相同，ID 将始终正确排列。

# ios - UIPasteboard 中的数据是否会在系统重启后持续存在？

> ID：13385178
> 
> 赞同：1
> 
> 时间：2012-11-14T18:40:36.593
> 
> 标签：ios, persistence, pasteboard

我的问题很简单，我基本上有 2 个应用程序想要访问我为 2 个应用程序创建的粘贴板。我想知道的是，假设我在粘贴板上保存了一个字符串，然后关闭了手机。当我重新启动手机并打开第二个应用程序时，我之前保存的字符串是否还在？

我知道可以通过设置属性将粘贴板设置为持久性，但似乎没有关于粘贴板中数据的任何文档。那么数据是否与粘贴板一起保留，或者它们是否会在系统重新启动后消失并且仅保留粘贴板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:54:33.650

是的，它确实存在。当然，您可以自己尝试，无需代码……打开 Notes 应用程序，输入内容，复制。重启。再次启动 Notes（或其他）并粘贴。它还在那里...

# php - 按数字字母顺序输出列表 - MYSQL

> ID：13385179
> 
> 赞同：0
> 
> 时间：2012-11-14T18:40:37.787
> 
> 标签：php, mysql, sql

我有一个代码列表：

```
1A
1B
1C
2A
2B
2C
.....
10A
10B..
11A
11B..
... 
```

但是当我排序时，我得到以下顺序（我从列表中删除了一些值以使其更短）

```
10A
10A
10B
10B
11A
11A
1A
1A
1B
1B
1C
2B
2B
2B
2B
2C 
```

如何按正确顺序（asc）按数值和字母对列表进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:18:14.710

我不知道有可能做这样的事情，但看起来是这样的：

```
SELECT code
FROM YourTable
ORDER BY Convert(code, unsigned), code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:58:03.600

如果您的代码始终是一个数字后跟只有 1 个字母，则以下应该有效...

```
 SELECT code FROM table ORDER BY LENGTH(code), code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:45:14.250

mysql 不直接支持这样的“自然”排序，但是您可以使用更复杂的 order by 子句来伪造它。但是，由于 mysql 没有捕获正则表达式，可以让您找到这些字符串中的数字/字母拆分在哪里，因此编写一个可以适当拆分内容的正则表达式会非常难看，这样您就可以做到

```
SELECT ugly_split_function1(yourfield) AS alpha, ugly_splitfunction2(yourfield) AS numeric
....
ORDER BY numeric, alpha 
```

最好的解决方案是将该字段拆分为两个单独的字段，以便您可以直接对各个字段进行排序。

# java - 单击特定单选按钮后打开第二个活动，否则，显示消息

> ID：13385183
> 
> 赞同：3
> 
> 时间：2012-11-14T18:40:48.837
> 
> 标签：java, android

我对 Android/Java 编程相当陌生，并且正在使用我正在使用的非常非常基本的应用程序寻求一些帮助。我纯粹是为了习惯 Java 编码和为 Droids 构建应用程序而构建它，所以请耐心等待。

我有 10 个单选按钮组合在一起，其中只有一个是正确答案（按钮 #10）。如果用户点击其中任何一个 1-9，我会显示一条消息，上面写着“抱歉重试”，但如果他们点击 #10，我希望它将他们带到一个新活动，即我将在其中的页面放一些图形和文字，表达祝贺和类似的事情。这些按钮适用于 1-9，但是当我单击 #10 时，我遇到了强制关闭错误。

这是我到目前为止所拥有的：

```
 public class MainQuiz extends Activity implements OnCheckedChangeListener, android.widget.RadioGroup.OnCheckedChangeListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_quiz);
    ((RadioGroup)findViewById(R.id.radio_group)).setOnCheckedChangeListener(this);}  

public void onCheckedChanged(RadioGroup radioGroup, int checkedId) {    
        String numeral = null;              
        if (checkedId == R.id.button1) {
            numeral = "Nope, try again!";
        } else if (checkedId == R.id.button2) {
            numeral = "Nope, try again!";
        } else if (checkedId == R.id.button3) {
            numeral = "Nope, try again!";
        }   
        else if (checkedId == R.id.button4) {
            numeral = "Nope, try again!";
        } 
        else if (checkedId == R.id.button5) {
            numeral = "Nope, try again!";
        } 
        else if (checkedId == R.id.button6) {
            numeral = "Nope, try again!";
        } 
        else if (checkedId == R.id.button7) {
            numeral = "Nope, try again!";
        } 
        else if (checkedId == R.id.button8) {
            numeral = "Nope, try again!";
        } 
        else if (checkedId == R.id.button9) {
            numeral = "Nope, try again!";
        } 
        else if (checkedId == R.id.button10) {
            Intent myIntent = new Intent(MainQuiz.this, CorrectAnswer.class); 
            MainQuiz.this.startActivity(myIntent);

        } 
        Toast.makeText(getApplicationContext(), ""+numeral+"",
                Toast.LENGTH_SHORT).show();        } 
```

任何帮助都会受到赞赏，我相信这是一个简单的修复，我确信这是我搞砸的语法和代码中的一些明显的东西，但同样，我是新手 :)

谢谢！

这是强制关闭后的日志：

```
11-14 13:56:48.982: D/AndroidRuntime(862): Shutting down VM
11-14 13:56:48.982: W/dalvikvm(862): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-14 13:56:48.992: E/AndroidRuntime(862): FATAL EXCEPTION: main
11-14 13:56:48.992: E/AndroidRuntime(862): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.test.quiz/com.test.quiz.CorrectAnswer}: java.lang.ClassCastException: com.test.quiz.CorrectAnswer
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.os.Looper.loop(Looper.java:123)
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-14 13:56:48.992: E/AndroidRuntime(862):  at java.lang.reflect.Method.invokeNative(Native Method)
11-14 13:56:48.992: E/AndroidRuntime(862):  at java.lang.reflect.Method.invoke(Method.java:521)
11-14 13:56:48.992: E/AndroidRuntime(862):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-14 13:56:48.992: E/AndroidRuntime(862):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-14 13:56:48.992: E/AndroidRuntime(862):  at dalvik.system.NativeStart.main(Native Method)
11-14 13:56:48.992: E/AndroidRuntime(862): Caused by: java.lang.ClassCastException: com.test.quiz.CorrectAnswer
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-14 13:56:48.992: E/AndroidRuntime(862):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
11-14 13:56:48.992: E/AndroidRuntime(862):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:59:26.650

我不知道你的问题是什么，但你可以改进你的代码：使用“switch - case”构造。

```
switch (chekedId) {
        case R.id.button10:
            Intent myIntent = new Intent(MainQuiz.this, CorrectAnswer.class); 
            startActivity(myIntent);
            break;
        default:
            Toast.makeText(getApplicationContext(), "Nope, try again!",
                Toast.LENGTH_SHORT).show();       
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:43:57.473

强制关闭将始终在您的 logcat 文件中放置异常堆栈跟踪。请将此放在以后的帖子中，它会告诉我们哪条线路崩溃以及为什么。

我从您的代码和对 Android 的新颖性的猜测 - 您可能没有将 CorrectAnswer 活动添加到您的清单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:01:08.023

似乎这条线可能是导致您的问题的原因。

```
MainQuiz.this.startActivity(myIntent); 
```

删除 MainQuiz，它应该可以工作

```
this.startActivity(myIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T19:10:54.790

```
MainQuiz.this.startActivity(myIntent); 
```

替换为

```
startActivity(myIntent); 
```

# java - 基于文本的游戏动作

> ID：13385185
> 
> 赞同：0
> 
> 时间：2012-11-14T18:41:02.077
> 
> 标签：java

我正在制作一个基于文本的游戏，我希望我的英雄能够在 3x3 网格内移动。我尝试用二维数组相当容易地做到这一点。我遇到的问题是我想为英雄所在的每个网格调用一个方法。因此，如果英雄在网格 0,0 中，那么我将调用 atHouse() 方法，如果他进入 0,1 我调用atTree() 方法。这些方法中的每一个都会给出该区域的描述，其中的项目等等......

因此，由于我无法将方法存储在数组中，我正在考虑可能采用另一种方式。我只是不知道哪种方式可能是最好的。有没有人以比我描述的更好的质量方式建立一个世界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:48:12.387

您可以定义一个将位置作为参数的方法，而不是将对象存储在数组中。说位置 1 意味着英雄在 0,0 中，位置 2 意味着英雄在 0,1 中。您可以将方法定义为：

```
public void heroMoved(int position){
  switch(position){
    case 1:
           call method associated
           break;
    case 2:
           call method associated
           break;
        .
        .
        so on
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:48:22.277

最简单的解决方案是创建工厂方法：

我建议一个二维数组，每个位置都有名称：

```
[
    ["House", "Tree", "etc"],
    ["etc", "etc", "etc"],
    ["etc", "etc", "etc"]
] 
```

然后，您将该位置传递给您的工厂方法，该方法将获取函数名称以在开关中使用。显然，此解决方案不是最好的，因为您必须显式定义每个方法调用。

```
public void runMethod(int row, int col)
{
    string mName = myArray[row][col];

    switch(mName)
    {
        case "House":
            atHouse();
        break;
        //etc
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T18:43:56.390

我认为基类的数组，`location`用`describe()`方法调用它是最好的方法。然后你可以子类一个`house`类和一个`tree`类。

或者您可以创建实例`location`并设置描述属性。

# java - PMD 找不到规则集

> ID：13385191
> 
> 赞同：3
> 
> 时间：2012-11-14T18:41:20.180
> 
> 标签：java, maven-plugin, pom.xml, pmd

我正在创建一个基于 maven 的 java 项目，其中包含 PMD maven 插件。我使用我自己的规则集 XML，它就像一个魅力，除了两个规则集：**空代码**和**不必要**的：当我运行构建时，maven 说：“*找不到资源*”。角色定义如下所示：

```
<role ref="rulesets/emptycode" /> 
```

和

```
<role ref="rulesets/unnecessary" /> 
```

在其他所有情况下，这种定义都有效。我发现：在*ecmasrcipt类别下有一个名为“***不必要**”的规则集，所以这个定义可能需要一些建议才能使用 java 版本。我尝试了多种想法，例如将*语言*属性设置为*规则集*xml 节点（“JAVA”，基于 PMD JavaDoc），以及*ref*中的一些前置后缀，但它不起作用，我在网络上找不到有效的解决方案。有人有什么想法，我忘了设置什么，或者我失败了什么？谢谢你的帮助！

 **** * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T13:03:41.673

PMD 似乎是 Maven 使用的一个繁琐的野兽。我刚刚用 3.0 版插件解决了这个问题 - 有两种解决方案：

*   **快速而肮脏的解决方案**：将规则集放入您的项目中：

    *   下载 PMD jar ( [http://sourceforge.net/projects/pmd/files/latest/download](http://sourceforge.net/projects/pmd/files/latest/download) )
    *   提炼`lib/pmd-x.x.x.jar`
    *   从该 PMD jar 文件中提取`rulesets/<type>/<ruleset>.xml`要使用的文件
    *   将它们放在项目下的文件夹中 - 类似于`${basedir}/pmd/...`
    *   参考它们如下：

        ```
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pmd-plugin</artifactId>
            <configuration>
                <rulesets>
                    <ruleset>${basedir}/pmd/<ruleset>.xml</ruleset>
                </rulesets>
            </configuration>
        </plugin> 
        ```

        优点是这很容易，缺点是如果您以后更新 PMD 版本，您需要记住更新这些文件。

*   **不错的解决方案**：参考`pmd-x.x.x.jar`.

    *   创建一个自定义规则集，例如：（`${basedir}/pmd/custom.xml`参见[http://pmd.sourceforge.net/pmd-5.0.2/howtomakearuleset.html](http://pmd.sourceforge.net/pmd-5.0.2/howtomakearuleset.html)）
    *   通过以下方式引用 PMD 规则集：`<rule ref="rulesets/java/imports.xml"/>`
    *   **注意：**路径是里面的路径`pmd-x.x.x.jar`（见上面的快速和肮脏）*，没有前导斜杠*
    *   参考您的自定义规则集，如下所示：

        ```
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pmd-plugin</artifactId>
            <configuration>
                <rulesets>
                    <ruleset>${basedir}/pmd/custom.xml</ruleset>
                </rulesets>
            </configuration>
        </plugin> 
        ```

        优点是这将始终从 PMD jar 中引用当前的 PMD 规则集，缺点是正确处理有点繁琐。

为了试验它直到它工作（`maven-pmd-plugin`版本 3.0），我一直运行 mvn pmd:pmd ( `<linkXref>false</linkXref>`in `pom.xml`) 并调整路径直到我停止出错。***

# java - 为什么 Python 不使用类似 C++/Java 的语法来定义实例变量？

> ID：13385194
> 
> 赞同：4
> 
> 时间：2012-11-14T18:41:30.647
> 
> 标签：java, python, class, instance-variables

这困扰了我几个小时，因为我来自 C++ 世界。我终于发现了发生了什么，但我不知道为什么这是默认行为。我想了解为什么这种语言是这样设计的。

我想要一个实例变量`mem`。所以我尝试了这个：

```
class x(object):
   mem = []

obj = x()
obj.mem.append(1)
print(obj.mem)
objTWO = x()
objTWO.mem.append(2)
print(objTWO.mem) 
```

打印这个：

```
[1] 

[1, 2] 
```

然而：

```
class x(object):

    def __init__(self):
        self.mem = []

obj = x()
obj.mem.append(1)
print(obj.mem)
objTWO = x()
objTWO.mem.append(2)
print(objTWO.mem) 
```

印刷

```
[1]

[2] 
```

为什么第一个是默认行为？这里的直觉是什么，因为它与许多主流 OO 语言的工作方式相反（它们引入了`static`top case 的关键字，这让你明确地说你想要一个静态变量）？对于 Python 的新手来说，这是一个惊喜。

此外，您似乎可以拥有同名的实例变量和类变量：

```
class x(object):
    mem = []

    def __init__(self):
        self.mem = [] 
```

我必须运行它来弄清楚要打印什么。我也猜不透！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T19:11:18.073

直觉是，在 Python 中，*一切*都是对象，包括类本身。Python 中没有“静态”关键字这样的东西。有类，它们是对象，这些类具有属性。*类定义中出现的所有*内容都是类属性——包括方法和其他类型的属性。

这种设计的好处是简单性和一致性。公共或私有，或静态和非静态属性之间没有区别。类和实例属性之间的区别自然地通过类构造函数出现。当`__init__`被调用时（间接通过`ClassName(params)`），它通过参数接收类的新实例，`self`然后直接修改该实例。一切都是通过已经定义的构造显式发生的——您无需了解任何新语法或新关键字即可查看创建实例时发生的情况。

那么你只需要了解 Python 的属性查找模型。`PATH`它的工作原理与大多数 shell中的分辨率几乎相同。例如，在 bash 中，当您执行命令`ls`（但是在这种情况下，路径看起来像这样（至少在单继承的简单情况下）：

```
instance; class; superclass; superclass; ... and so on 
```

这与 c 或 c++ 中嵌套作用域中的名称解析并没有太大区别。你抱怨：

> 更糟糕的是，您似乎可以拥有同名的实例变量和类变量。

但这真的比 c 允许您`int i;`在一个块中定义，创建一个内部块，然后定义另一个`int i;`掩盖原始块的事实更令人困惑吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T19:02:56.453

我同意这是违反直觉的，但它有一个很好的用途——别名功能。

这是我前段时间写的一个图书馆，为了长度而删减了

```
...
class UndrawnTurtle():
    """Acts just like the turtle package, but without bringing up a window to show it."""
...

    def forward(self, distance):
        angle_radians = math.radians(self.angle)

        self.x = self.x + math.cos(angle_radians) * distance
        self.y = self.y + math.sin(angle_radians) * distance

        self._visit()

...
    # Now for some aliases. Everything that's implemented in this class
    # should be aliased the same way as the actual api.
    fd = forward
... 
```

# php - phpMyAdmin 和 PHP 脚本之间的不同 SQL 行为

> ID：13385195
> 
> 赞同：0
> 
> 时间：2012-11-14T18:41:31.153
> 
> 标签：php, mysql, sql

我试图理解为什么在我运行脚本后这个 SQL 语句不起作用。

如果我在 phpMyadmin 中手动进行查询，它会返回正确的结果；但是一旦脚本在其中运行相同的查询，该查询就不会返回任何内容。

这是我的查询：

顺便说一句：`$heute`这是：

```
$date_array = getdate();
$heute = $date_array[mday]."/".$date_array[mon]."/".$date_array[year];

$sql = "SELECT email, was, wo, entfernung FROM jobsperemail WHERE haufigkeit='1' AND WHERE bestatigt='ja' AND last_sent!='$heute'"; 
```

这是我的数据库架构：

![我的数据库表架构](../Images/5e9656ada8ae27d70a4fe76e80dc6e41.png)

这些是表值：

![带有值的表](../Images/3c0121e3414f5f5566e324add0a1f311.png)

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:14:02.517

您的 SQL 查询中有语法错误：

```
SELECT email, was, wo, entfernung FROM jobsperemail WHERE haufigkeit='1' AND WHERE bestatigt='ja' AND last_sent!='$heute' 
```

您需要删除第二个`WHERE`关键字，如下所示：

```
SELECT email, was, wo, entfernung FROM jobsperemail WHERE haufigkeit='1' AND bestatigt='ja' AND last_sent!='$heute' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:44:00.730

这是因为您在查询中有 php 变量。

在脚本内部，php 变量 ($heute) 被解释，但在 phpmyadmin 中它不是

如果我能进一步帮助你，请告诉我

# javascript - 指令中的 $watch 函数未在 Angular JS 中触发

> ID：13385196
> 
> 赞同：8
> 
> 时间：2012-11-14T18:41:36.963
> 
> 标签：javascript, angularjs

我是 Angular js 的新手，并且一直在到处寻找为什么这不起作用的答案。

我在这里有我的指令：

```
.directive('carrouselPreview', function () {
    return function (scope, element, attrs) {
        scope.$watch(scope.carouselPreview, function () {
            alert('changed');
        }, true);
    }
}); 
```

这会监视对 scope.carouselPreview 的更改，该更改通过此函数进行更改：

```
$scope.showPreview = function(ind){
    $scope.carouselPreview = ind;
} 
```

这个函数肯定会触发并更改 scope.carouselPreview - 但 watch 函数永远不会触发！

我意识到我可能在这里很愚蠢，但我已经看了一遍，看起来非常好。

如果今晚有人帮我解决这个问题，我会永远爱你！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T18:43:01.633

的第一个参数`$watch`是一个字符串（在范围的上下文中评估）或一个函数。所以你想要的是：

```
scope.$watch("carouselPreview", function () {
    alert('changed');
}, true); 
```

请参阅[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$watch](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)

# php - Magento - 购物车规则不起作用

> ID：13385197
> 
> 赞同：0
> 
> 时间：2012-11-14T18:41:45.633
> 
> 标签：php, magento, magento-rules

尝试在 Magento 中设置规则来完成此操作时：

当您订购 Y 或更多时，特定产品可享受 X% 折扣

它不工作。我已经关注了这个链接： http: [//www.magentocommerce.com/wiki/3_-_store_setup_and_management/shopping-cart-price-rule-recipes](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/shopping-cart-price-rule-recipes)并且它仍然不起作用。

这是屏幕截图，向您展示我并不疯狂并且完全遵循他们的规则......

![在此处输入图像描述](../Images/15ea438c984908b08ecb2e6094b59340.png)

![在此处输入图像描述](../Images/fced9c7eb717b039310fe5b628eb5ccd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:57:23.087

您的规则设置为仅在[http://i.stack.imgur.com/jBZCa.png](http://i.stack.imgur.com/jBZCa.png)此处显示 3 个或更多产品时才允许折扣，而不是任何一组 3 个产品

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:18:02.007

所以我是对的，这不能用可配置的产品来完成。无论出于何种原因，它都无法检测到子 sku。

Magento Enterprise 团队已经确认了这一点。如果有变化，我会更新这篇文章。

# vba - 引用链接表

> ID：13385199
> 
> 赞同：0
> 
> 时间：2012-11-14T18:42:03.743
> 
> 标签：vba, ms-access

我的数据库有问题。我有多个共享相同用户和密码池的访问数据库。他们通过链接表将用户和密码表引用到“主”数据库（保存用户和密码表的后端）。我还有一个存储当前用户和他们登录的数据库的表。我遇到的问题是我的注销方法实际上并没有将它们注销。大致是这样的：

```
 'this code is run on click of exit button

 Public Sub logout(UserName As String, database As String)

 On Error Resume Next

 Dim dbMine As DAO.database
 Set dbMine = CurrentDb

 Dim qr As String

   qr = "DELETE * FROM tblCurrentUsers WHERE username = '" & UserName & "' AND       Database        = '" & database & "' ;"
    'debug.print qr
   dbMine.Execute qr

  Application.Quit

 End Sub 
```

问题是，记录似乎没有被删除。我是否需要将我的数据库对象设置为源表，而不是引用运行代码的数据库中存在的链接表？如果是这样，我是否只是通过相对路径引用该数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:54:59.157

`dbFailOnError`执行查询时添加选项以捕获错误详细信息。看看你得到了什么错误；这可以帮助您解决问题。

```
Public Sub logout(UserName As String, database As String)
On Error GoTo mError:
Dim dbMine As DAO.database
Set dbMine = CurrentDb
Dim qr As String
   qr = "DELETE * FROM tblCurrentUsers WHERE username = '" & UserName & "' AND Database = '" & database & "' ;"
    'debug.print qr
   dbMine.Execute qr, dbFailOnError
  Application.Quit
Exit Sub
mError:
  MsgBox "Error: " & Err.Description
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:30:47.287

尝试使用

```
Set dbMine = DBEngine.Workspaces(0).Databases(0) 
```

代替

```
Set dbMine = CurrentDb 
```

我在使用 CurrentDb 时遇到了类似的问题。根据[http://msdn.microsoft.com/en-us/library/office/bb237861(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb237861(v=office.12).aspx)，

> CurrentDb 方法创建当前数据库的另一个实例，而 DBEngine.Workspaces(0).Databases(0) 语法引用当前数据库的打开副本。

也许 DAO 或 Access 处理“当前数据库的新实例”的方式存在一些细微差别。

# magento - 如何在 Subtotal.php 中获取自定义属性？

> ID：13385200
> 
> 赞同：0
> 
> 时间：2012-11-14T18:42:07.237
> 
> 标签：magento, magento-1.7

我在获取自定义属性时遇到问题

**app/code/core/Mage/Sales/Model/Quote/Address/Total/Subtotal.php**

例如 $product->getPrice() 或 $product->getTaxClassId() 工作正常，但如果我尝试我的自定义属性 $product->getBrutto() （'brutto' 是我的属性）它不起作用。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:28:36.327

您必须将自定义属性加载到模块的 config.xml 中，如下[所述](https://stackoverflow.com/questions/10267244/how-to-load-a-custom-product-attribute-into-a-quote-item)：

# objective-c - 静态库中的 UIAppearance

> ID：13385203
> 
> 赞同：2
> 
> 时间：2012-11-14T18:42:17.167
> 
> 标签：objective-c, ios, uiviewcontroller, static-libraries, uiappearance

我们为客户提供了一个静态库，允许他们显示我们的视图控制器。我们用来设置s`UIAppearance`的样式。`UIViewController`

然而，使用`UIAppearance`也为那些使用静态库的人定制了外观，但我们希望它只应用于我们的静态库。

有没有办法`UIAppearance`在图书馆级别上制作？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:18:58.803

您需要使用该方法作为`[[UINavigationBar appearanceWhenContainedIn:(Class <UIAppearanceContainer>)ContainerClass,...] setProperty:]`

例如，

```
[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil]
       setTintColor:myNavBarColor] 
```

`containedIn`部分接受，诸如此类`[UIPopoverController class]`。因此，您可能必须对所有 UI 控制器进行子类化并像`[CustomController class]`在`appearanceWhenContainedIn`方法中一样提供它。有关`appearanceWhenContainedIn`方法的更多详细信息，[请在此处查看苹果文档。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/occ/intfcm/UIAppearance/appearanceWhenContainedIn)

# c# - 无法使用 XML 使用 Rest Sharp 进行 PUT/POST

> ID：13385206
> 
> 赞同：1
> 
> 时间：2012-11-14T18:42:23.510
> 
> 标签：c#, xml, http, rest, restsharp

我想使用 restSharp 的 PUT/POST 方法在 redmine 上创建/修改问题。我无法使用 Rest sharp 找到有关 xml PUT/POST 的有价值信息。我尝试了来自 restsharp.org 的各种方法 `Addbody("test", "subject");`，`IRestResponse response = client.Execute(request);`但 Redmine 没有任何变化。我究竟做错了什么？

POST 给出“仅允许获取、**放置**和删除请求”。信息。

PUT 给出“仅允许获取、**发布**和删除请求”。信息。

**我的代码**

```
 RestClient client = new RestClient(_baseUrl);
    client.Authenticator = new HttpBasicAuthenticator(_user, _password);

    RestRequest request = new RestRequest("issues/{id}.xml", Method.POST);

    request.AddParameter("subject", "Testint POST");

    request.AddUrlSegment("id", "5");

    var response = client.Execute(request); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:14:38.770

问题出在序列化中。我的`Issue`类包含导致序列化问题的各种其他类的对象。这就是我们的做法：

```
 RestRequest request = new RestRequest("issues/{id}.xml", Method.PUT);
    request.AddParameter("id", ticket.id, ParameterType.UrlSegment);
    request.XmlSerializer = new RedmineXmlSerializer();
    request.AddBody(ticket);

    RestClient client = new RestClient(_baseUrl);
    client.Authenticator = new HttpBasicAuthenticator(_user, _password);
    IRestResponse response = client.Execute(request); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:22:05.153

Your code looks ok to me, I'm unsure if you need this but we added this header when using RestSharp for json against a WebAPI host:

```
 request.AddHeader("Accept", "application/xml"); 
```

# php - 知道目录中的文件是否已被修改

> ID：13385210
> 
> 赞同：1
> 
> 时间：2012-11-14T18:42:48.060
> 
> 标签：php, directory, fopen, fread

美好的一天，伙计们..我目前正在担任系统广告助理。我只是想知道我如何知道目录（及其子目录）中的文件已被修改..我需要将每个 php 代码都放在数据库中吗？是否有可能知道文件的哪一部分已被修改？谢谢。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:53:32.477

由于您是系统广告助理，我想您也可以使用 python。如果是这样，请考虑使用[看门狗](https://github.com/gorakhargosh/watchdog)库。我认为这是一个完美的契合。

当您使用它时，您还可以通过 python、linux/unix`diff`命令以编程方式使用。为此，您还可以查看 python [sh](http://amoffat.github.com/sh/)模块，它使您能够`diff`从 python 代码中调用。

php 对于您的系统管理员需求来说几乎不是完美的解决方案。而且python可能比php更容易学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:44:39.447

不确定数据库引用是什么意思...但总的来说，如果您知道文件的创建日期，则可以检查 filemtime 是否与此不同。但是，我对使用文件修改时间有点怀疑；我发现了一些它们具有误导性的例子，所以对此持保留态度。

除了拥有文件的先前版本（通过备份或 RCS）之外，我想不出你会如何看到修改了哪个部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:45:11.303

使用[`filemtime()`](http://php.net/manual/en/function.filemtime.php)which 将为您提供最后一次更改文件的时间。

但是，只要您没有运行版本控制系统，您就无法知道任何差异。

# c# - 转换为字符串时出现“要解密的数据长度无效”异常

> ID：13385212
> 
> 赞同：0
> 
> 时间：2012-11-14T18:42:53.990
> 
> 标签：c#, asp.net

我正在使用 Windows Live Id 服务为我的应用程序进行日志记录和身份验证。用户通过身份验证后，我在 Windows Live Id 服务发送的响应中获得了一个令牌。我希望解码此令牌以便从中获取唯一标识符。这是更好地解释这一点的链接：http: [//msdn.microsoft.com/en-us/library/bb676622.aspx](http://msdn.microsoft.com/en-us/library/bb676622.aspx)

当我尝试创建 CryptoStream 对象时，我在 Visual Studio 中调试时看到异常，尽管代码没有中断。

但是当我尝试将流转换为字节时，它会引发错误并且代码会中断。

它说：

“要解密的数据长度无效”

这是我正在使用的代码：

```
 string token="";                     //Token Sent by the service
     string SecretKey = "";              //SecretKey Obtained while registering my application
     byte[] cryptKey = derive(secretKey, "ENCRYPTION");  

    static byte[] derive(string secret, string prefix)
      {
         using(HashAlgorithm hashAlg = HashAlgorithm.Create("SHA256"))
         { 
          const int keyLength = 16;
          byte[] data = Encoding.Default.GetBytes(prefix+secret);
          byte[] hashOutput = hashAlg.ComputeHash(data);
          byte[] byteKey = new byte[keyLength];
          Array.Copy(hashOutput, byteKey, keyLength);
          return byteKey;
         }
      }

    const int ivLength = 16;
    token = HttpUtility.UrlDecode(token);
    byte[] ivAndEncryptedValue = Convert.FromBase64String(token);
    aesAlg = new RijndaelManaged();
    aesAlg.KeySize = 128;
    aesAlg.Key = cryptKey;
    aesAlg.Padding = PaddingMode.PKCS7;
    memStream = new MemoryStream(ivAndEncryptedValue);
    byte[] iv = new byte[ivLength];
    memStream.Read(iv, 0, ivLength);
    aesAlg.IV = iv; 
    cStream = new CryptoStream(memStream, aesAlg.CreateDecryptor(), CryptoStreamMode.Read);
    sReader = new StreamReader(cStream, Encoding.ASCII); 
```

下一行代码抛出错误：“要解密的数据长度无效”

```
 decodedValue = sReader.ReadToEnd();    //Throws error:"Length of the data to decrypt is invalid" 
```

有谁知道这背后的原因是什么？

任何形式的帮助或指导将不胜感激。

先感谢您。

问候，

阿布舍克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:01:30.017

这是我目前在解密值时使用的示例，希望这将帮助您了解您在现有代码中做错了什么

```
static string Decrypt() 
    {            
      byte[] keyBytes = Convert.FromBase64String("U6XksFkhWV4.......eo3fRg=="");
      byte[] iv = Convert.FromBase64String("KLnP....wA=="");
      byte[] cipherTextBytes = Convert.FromBase64String("Put the EncryptedText here");

      var symmetricKey = new RijndaelManaged { Mode = CipherMode.CBC, IV = iv, KeySize = 128, Key = keyBytes, Padding = PaddingMode.Zeros};

      using (var decryptor = symmetricKey.CreateDecryptor())
      using (var ms = new MemoryStream(cipherTextBytes))
      using (var cs = new CryptoStream(ms, decryptor, CryptoStreamMode.Read)) {
        var plainTextBytes = new byte[cipherTextBytes.Length];
        int decryptedByteCount = cs.Read(plainTextBytes, 0, plainTextBytes.Length);
        return Encoding.UTF8.GetString(plainTextBytes, 0, decryptedByteCount);
      }
    } 
```

# regex - MATLAB 正则表达式匹配 '=' 和数字

> ID：13385221
> 
> 赞同：2
> 
> 时间：2012-11-14T18:43:25.510
> 
> 标签：regex, matlab

我正在编写一个正则表达式来挑选字符串中的标点符号，并且我得到了一些我没想到的行为：

```
ix = regexp('FGFR4','[~!@#$%^&*()-=+{}\|;:''",<.>/?\[]')
ix =

     [5]

ix = regexp('FGFR4','[~!@#$%^&*()-+{}\|;:''",<.>/?\[]') %note, the '=' is gone
ix =

     [] 
```

因此，'=' 似乎与数字 4 匹配。我期望它仅匹配 '=' 符号，如下所示：

```
ix = regexp('FOO=SPAM','[~!@#$%^&*()-=+{}\|;:''",<.>/?\[]')
ix =

     [4] 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:46:32.543

问题不在于它，`=`而`-`在于它的前面。它创建一个范围内的所有字符 from `)`to `=`（按 ASCII 顺序）。如果您删除 , 这不是问题的原因`=`是它`+`以`4`ASCII 顺序出现，因此范围不包括`4`（实际上它只包括`)`,`*`和`+`, 反正你有`*`，这不会有关系。

三种解决方案：

1.  转义连字符：

    ```
    [~!@#$%^&*()\-=+{}\|;:''",<.>/?\[] 
    ```

2.  或将其放在字符类的末尾：

    ```
    [~!@#$%^&*()=+{}\|;:''",<.>/?\[-] 
    ```

3.  除非你想确保你完全使用这组字符......所以如果你可以匹配任何不是空格、字母或数字（或下划线）的东西，你也可以使用这个：

    ```
    [^\w\s] 
    ```

    匹配任何非下划线、非字母、非数字、非空白字符。

# java - 从用户输入的字符串和 String[][] 的第一列中检索匹配项

> ID：13385222
> 
> 赞同：1
> 
> 时间：2012-11-14T18:43:30.687
> 
> 标签：java, arrays, csv

数组存储了所有的信息，感觉这个程序真的很接近工作了。我知道它不干净，我会马上清理它！问题在底部。

```
 public class FoodFacts
{
     private static BufferedReader textIn;
     private static BufferedReader foodFacts;
             static int numberOfLines = 0;
               static  int NUM_COL = 7;
            static int NUM_ROW = 961;
             static String [][] foodArray = new String[NUM_ROW][NUM_COL];
      public static String  fact;
    // Make a random number to pull a line
    static Random r = new Random();

    public static void main(String[] args)
        {
            try 
            {   

                textIn = new BufferedReader(new InputStreamReader(System.in));
                foodFacts= new BufferedReader(new FileReader("foodfacts.csv"));
                Scanner factFile = new Scanner(foodFacts);
                List<String> facts = new ArrayList<String>();

                //  System.out.println("Printing out your array!");
                while ( factFile.hasNextLine()){
                 fact = factFile.nextLine();
                 StringTokenizer st2 = new StringTokenizer(fact, ",")    ;

               while (st2.hasMoreElements()){
                  for ( int j = 0; j < NUM_COL ; j++) {
                    foodArray [numberOfLines][j]= st2.nextToken();  
                    //System.out.println("Foodarray at " + "  " + numberOfLines + " is " +foodArray[numberOfLines][j]);
                   }
                    }  
                     numberOfLines++;
                  }

System.out.println("Please type in the food you wish to know about.");
                String request; //user input 
                request = textIn.readLine();
                System.out.println ("You requested" + request); 
```

问题从这里开始！

```
for ( int i = 0; i < NUM_ROW ; i++)
                    {
if ( foodArray[i][0] == request)
                            for ( int j = 0 ; j < NUM_COL ; j++ )
                        System.out.println ( foodArray[i][j] ); //never prints anything
                        }  

                  }
                    catch (IOException e)
                    {
                    System.out.println ("Error, problem reading text file!");
                    e.printStackTrace();
                    }

             }
  } 
```

我正在尝试在 foodArray[6][0] 应该与输入 All-Bran Cereal 匹配的终端中对其进行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:44:50.460

在您的最后一个`for`循环中，您正在使用`==`中的运算符比较您的字符串`if construct`，这会给您带来不正确`==`的结果，因为比较字符串引用，这将是不同的，因为两个引用都指向不同的字符串对象。

使用`equals`方法比较字符串内容：-

```
if (foodArray[i][0].equals(request)) 
```

如果您想比较它们`equals`的.`object``content`

Check out this post: - [How do I Compare strings in Java](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java) for more details.

# c# - Parse table with HTML Agility Pack - Duplicate results

> ID：13385231
> 
> 赞同：0
> 
> 时间：2012-11-14T18:44:12.820
> 
> 标签：c#, html, html-agility-pack

**I have this html table:**

```
<div style="width: 398px;">
            <table cellpadding="4" cellspacing="0" width="100%" style="border: 2px solid #ffffff;">
                <tbody>
                    <tr class="parrafo-ver-negro">
                        <th class="borde-abajo borde-derecha" style="text-align: left;">Parada N&ordm;</th>
                        <th class="borde-abajo" style="text-align: left;">Destino</th>
                                                </tr>
                                <tr>
                        <td class="borde-derecha"><a class="parrafo-ver-negro link-nro-sms">5729</a></td>
                        <td class="parrafo_ver-gris letra9">103 NEGRO > Villa Gdor. Galvez<br>103 ROJO > Villa Gdor. GÃ¡lvez<br></td>
                                                </tr>
                                    <tr>
                        <td class="borde-derecha"><a class="parrafo-ver-negro link-nro-sms">5292</a></td>
                        <td class="parrafo_ver-gris letra9">103 NEGRO > Granadero Baigorria<br>103 ROJO > Mini Terminal Barrio Rucci<br></td>
                                                </tr>
                  </tbody>
            </table>
        </div> 
```

**My code is this:**

```
public static List<Parada> parsear(string html)
    {
        int cual;
        int _parada;
        string _destino;
        List<Parada> lp = new List<Parada>();
        HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(html);

        foreach (HtmlNode tabla in doc.DocumentNode.SelectNodes("//table"))
        {
            foreach (HtmlNode fila in tabla.SelectNodes("//tr"))
            {
                cual = 1; _parada = 0; _destino = "";

                foreach (HtmlNode celda in fila.SelectNodes("//td"))
                {

                    if (cual == 1)
                    {
                        _parada = Int32.Parse(celda.InnerText);
                        cual = 2;
                    }
                    else if (cual == 2)
                    {
                        _destino = celda.InnerText;
                        cual = 1;

                        lp.Add(new Parada(_parada, _destino));
                    }
                }

            }
        }
        return lp;
    } 
```

I should end up with two elements of List of Parada (the first TR I have to ignore, since it's the header), but instead I have 6, instead of two. What's wrong with the code? I've tried many things but with the same result.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:18:37.990

the fila.SelectNodes still iterates through the entire document so you iterating through all 4 `td` nodes 3 times (once per `tr` node). Try this code instead...

```
public static List<Parada> parsear(string html)
{
    int cual = 0;
    int _parada = 0;
    string _destino = "";
    List<Parada> lp = new List<Parada>();
    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(html);

    foreach (HtmlNode tabla in doc.DocumentNode.SelectNodes("//table//tr//td"))
    {
        cual = 1 - cual;
        if (cual == 1)
        {
            _parada = Int32.Parse(tabla.InnerText);
        }
        else
        {
            _destino = tabla.InnerText;
            lp.Add(new Parada(_parada , _destino));
        }
    }

    return lp;
} 
```

# javascript - 包装内容元素会导致内联脚本触发

> ID：13385232
> 
> 赞同：1
> 
> 时间：2012-11-14T18:44:20.023
> 
> 标签：javascript, jquery, html, events, dom

我正在编写一个 jQuery 插件。在这个插件中，我将现有`BODY`内容包装在 a 中`DIV`并隐藏它们。

```
var $originalBodyContents = $('body').wrapInner('<div>').children('div').hide(); 
```

然后插件将自己的叠加层附加`DIV`到`BODY`并发挥它的插件魔力。当用户退出插件时，它会移除其覆盖层`DIV`，并展开它们。

```
$originalBodyContents.children().unwrap(); 
```

正如您在此演示中看到的那样，这很好用：http:
[//jsfiddle.net/vKddB/1/](http://jsfiddle.net/vKddB/1/)

但是，如果页面上有内容脚本，那么它们都会在发生换行时重新加载并再次运行它们的代码。这会导致很多意外行为，如您在此演示中所见：http:
[//jsfiddle.net/vKddB/3/](http://jsfiddle.net/vKddB/3/)

在上面的演示中，您将看到“显示警报”按钮显示“你好！”的警报。点击时。如果您触发插件并关闭插件，您会注意到“显示警报”按钮现在有两个与之关联的单击处理程序，因此在单击时会显示两个警报。

我的插件将无法控制它正在运行的页面的内容。当我将正文内容包装在 a 中时，有没有办法可以防止内联脚本重新运行`DIV`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:47:42.817

`$('script', $('body')).remove();`在你的代码之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:54:37.880

如果您希望您的插件在任意页面上工作，您可能需要考虑另一种方法，您的叠加层仅覆盖原始内容。我相信这会比包装和隐藏、移动/删除脚本节点等技巧更可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:03:03.273

我只是想分享我在构建叠加层方面的方法，也许它会对某人有所帮助。有点不同，div是在页面上添加的，并没有隐藏已有的div元素。可能会快一点，因为脚本不会搜索所有 div dom 元素。

第一的

```
//create the overlay with
$('<div class="overlay" />').appendTo('body').show();

//close the overlay with
$('.overlay').remove();

//css used for overlay
.overlay
{
    background-color: #363636;
    background-image: url('a_nice_bg_image.png');
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0;
    left: 0;
    display: none;
    z-index: 1000;
    opacity: .55;
    filter:alpha(opacity=55);
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=55)";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:22:12.633

将 div 附加到正文，将其位置设置为绝对，设置高 z-index 并调整其大小以覆盖整个内容。

```
 var $overlay = $('<div>')
        .css({
            position: 'absolute',
            top: 0,
            left: 0,
            width: $(document).width() + 'px',
            height: $(document).height() + 'px',
            backgroundColor: '#f00',
            'z-index': 10000
        })
        .appendTo('body'); 
```

像这样（您的原始代码修改最少）：http: [//jsfiddle.net/Ya3DG/4/](http://jsfiddle.net/Ya3DG/4/) :)

# java - Ubuntu VM 中的 Java KeyListener 触发所有事件

> ID：13385237
> 
> 赞同：1
> 
> 时间：2012-11-14T18:44:38.273
> 
> 标签：java, ubuntu, keylistener, awr

我的 java 程序有问题，在 ubuntu 虚拟机中工作，在 macosx 山狮上使用 vmware fusion。在我的 java 程序中，我实现了一个 keylistener，用于通过远程控制带有 WASD 的汽车。

它的问题是，它通过按下键而不释放它来触发所有事件。所以当我按下一个键时，它会：

按下 打字 释放

我注意到这是虚拟机内部的问题。运行本机程序，它运行完美。那么如何解决这个问题呢？非常感谢！

# java - 获取作为日期的字符串并在 Java 中对其进行格式化

> ID：13385239
> 
> 赞同：5
> 
> 时间：2012-11-14T18:44:41.823
> 
> 标签：java, date, format

我在 Java 中有一个字符串，它是一个日期，但格式如下：

**02122012**

我需要将其重新格式化为**2012**年 2 月 12 日如何做到这一点。

使用以下代码，我不断返回**java.text.SimpleDateFormat@d936eac0**

下面是我的代码..

```
public static void main(String[] args) {

    // Make a String that has a date in it, with MEDIUM date format
    // and SHORT time format.
    String dateString = "02152012";

    SimpleDateFormat input = new SimpleDateFormat("ddMMyyyy");
    SimpleDateFormat output = new SimpleDateFormat("dd/MM/yyyy");
    try {
        output.format(input.parse(dateString));
    } catch (Exception e) {

    }
    System.out.println(output.toString());
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T18:46:41.920

使用简单日期格式。

```
SimpleDateFormat input = new SimpleDateFormat("ddMMyyyy");
SimpleDateFormat output = new SimpleDateFormat("dd/MM/yyyy");
System.out.println(output.format(input.parse("02122012"))); // 02/12/2012 
```

正如 Jon Skeet 所建议的那样，您还`TimeZone`可以`Locale`在`SimpleDateFormat`

```
SimpleDateFormat englishUtcDateFormat(String format) {
    SimpleDateFormat sdf = new SimpleDateFormat(format, Locale.ENGLISH);
    sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
    return sdf;
}

SimpleDateFormat input = englishUtcDateFormat("ddMMyyyy");
SimpleDateFormat output = englishUtcDateFormat("dd/MM/yyyy");
System.out.println(output.format(input.parse("02122012"))); // 02/12/2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:20:22.567

这是您编辑的问题中代码的问题：

```
System.out.println(output.toString()); 
```

您打印的是`SimpleDateFormat`，而不是调用的结果`format`。实际上，您*忽略*了调用的结果`format`：

```
output.format(input.parse(dateString)); 
```

只需将其更改为：

```
System.out.println(output.format(input.parse(dateString))); 
```

或者更清楚：

```
Date parsedDate = input.parse(dateString);
String reformattedDate = output.format(parsedDate);
System.out.println(reformattedDate); 
```

# javascript - 为 jQuery 特殊事件添加自定义参数

> ID：13385254
> 
> 赞同：2
> 
> 时间：2012-11-14T18:46:05.660
> 
> 标签：javascript, jquery

我正在编写一个 jQuery 事件插件，我需要将一些数据传递给一个参数。所以如果我这样使用它：

```
$(element).on('myevent', function(event, myargument) { console.log(myargument); }); 
```

我不想获取在处理程序中设置的`myargument`对象及其属性（例如`name`）。

那么这将如何与下面的代码一起使用？

```
SmartScroll.myevent = {
    setup: function() {

        var myargumentData,
            handler = function(evt) {
                var _self = this,
                    _args = arguments;

                // The data I wan't to get
                myargumentData = {
                    name: "Hello"
                };

                evt.type = 'myevent';
                jQuery.event.handle.apply(_self, _args);
            };

        jQuery(this).bind('scroll', handler).data(myargumentData, handler);

    },

    teardown: function() {
        jQuery(this).unbind('scroll', jQuery(this).data(myargumentData));
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:27:33.913

您可以修改传递给`add`.

```
$.event.special.foo = { add: function(h) {
    var hh = h.handler;
    h.handler = function(e, a) {
        hh.call(this, e, a * 2);
    };
} }; 
```

现在，让我们绑定事件：

```
$("body").on("foo", function(e, a) {
    console.log(a);
}); 
```

触发事件，看看会发生什么：

```
$("body").trigger("foo", [ 10 ]); // 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:17:26.243

```
on: function( types, selector, data, fn, /*INTERNAL*/ one ) 
```

根据消息来源。因此，如果我了解您的问题，请执行以下操作：

```
$(element).on('myevent',{my_data:"foo"},function(event) { 
  console.log(event.data.my_data); 
}); 
```

打印“富”

# vhdl - 如何通过这个合成阶段？

> ID：13385255
> 
> 赞同：-1
> 
> 时间：2012-11-14T18:46:13.583
> 
> 标签：vhdl, xilinx

当仅在 xilinx 13.2 上合成我的 VHDL 程序时，xilinx 在这部分合成了很长时间（> 几个小时）。这异常长，因为一台像样的机器通常需要 20 分钟来合成代码。

有关如何通过此“分析 FSM 以获得最佳编码”的任何提示。阶段 ？

> 开始：“合成 - XST”。运行 xst... 命令行：xst -intstyle ise -ifn "C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/i8051_top.xst" -ofn "C:/Users/Farmer/Desktop/ CG3207 BACKUP/12 Nov 2012/ISA NOMX/i8051_top.syr" 阅读设计：i8051_top.prj
> 
> ==================================================== ======================= * HDL编译* ======================= ====================================================在库工作中编译 vhdl 文件“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/constants.vhd”。在库工作中编译 vhdl 文件“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/ext_interrupt.vhd”。实体 ext_interrupt 的架构行为是最新的。在库工作中编译 vhdl 文件“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/csadde2.vhd”。实体 csadde2 的体系结构 csadde2beh 是最新的。在库工作中编译 vhdl 文件“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/csadder.vhd”。Entity csadder 的架构 csadderbeh 是最新的。在库工作中编译 vhdl 文件“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/sequencer2.vhd”。Entity sequencer2 的架构 seq_arch 是最新的。在库工作中编译 vhdl 文件“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/fastalu.vhd”。实体 fastalu 的架构 fastalu_arch 是最新的。在库工作中编译 vhdl 文件“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/int_rom.vhd”。Entity int_rom 的架构行为是最新的。在库工作中编译 vhdl 文件“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/int_ram.vhd”。Entity internal_ram 的架构 syn 是最新的。编译 vhdl 文件“C:
> 
> ==================================================== ======================= * 设计层次分析 * ====================== ==================================================== = 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 使用泛型分析库（架构）中实体的层次结构。宽度 = 16
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> 分析库中实体的层次结构（架构）。
> 
> ==================================================== ======================= * HDL 分析 * ======================= ====================================================分析库中的实体（架构）。分析的实体。单位生成。
> 
> 分析库中的实体（架构）。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 0。寄存器被逻辑取代。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 0。寄存器被逻辑取代。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 0000000000000000。寄存器被逻辑取代。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 0000000000000000。寄存器被逻辑取代。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 0000000000000000。寄存器被逻辑取代。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 1111111111111111。寄存器被逻辑取代。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 1111111111111111。寄存器被逻辑取代。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 0。寄存器被逻辑取代。INFO:Xst:2679 - 单元中的寄存器在电路操作期间具有恒定值 0。寄存器被逻辑取代。分析的实体。单位生成。寄存器被逻辑取代。分析的实体。单位生成。寄存器被逻辑取代。分析的实体。单位生成。
> 
> 分析库中的实体（架构）。INFO:Xst:1561 -“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/fastalu.vhd”第 261 行：Mux 已完成：默认情况被丢弃 WARNING:Xst:819 -“C :/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/fastalu.vhd”第 245 行：过程灵敏度列表中缺少一个或多个信号。为了启用 FPGA/CPLD 硬件的合成，XST 将假定所有必要的信号都存在于灵敏度列表中。请注意，综合结果可能与初始设计规范不同。缺失的信号是： , , , , 分析的实体。单位生成。
> 
> 分析库中的实体（架构）。分析的实体。单位生成。
> 
> 分析库中的实体（架构）。分析的实体。单位生成。
> 
> 分析库中的实体（架构）。分析的实体。单位生成。
> 
> 分析库中的实体（架构）。WARNING:Xst:819 - “C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/regfile.vhd”第 89 行：过程敏感度列表中缺少一个或多个信号。为了启用 FPGA/CPLD 硬件的合成，XST 将假定所有必要的信号都存在于灵敏度列表中。请注意，综合结果可能与初始设计规范不同。缺失的信号是： , , , , , , , , , , , , , , , , ,
> 
> 分析库中的实体（架构）。INFO:Xst:2679 - 寄存器 > in unit 在电路操作期间具有恒定值 0。寄存器被逻辑取代。分析的实体。单位生成。
> 
> 分析库中的实体（架构）。分析的实体。单位生成。
> 
> ==================================================== ========================
> 
> # * 高密度脂蛋白合成 *
> 
> 正在执行双向端口解析...
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/sequencer2.vhd”。警告：Xst:647 - 从不使用输入。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接。警告：Xst:647 - 从不使用输入。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接。警告：Xst:647 - 从不使用输入。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接状态。警告：Xst:647 - 从不使用输入。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接状态。警告：Xst:647 - 从不使用输入。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接。警告：Xst:646 - 已分配信号但从未使用过。这个未连接的信号将在优化过程中被修剪。INFO:Xst:1799 - 在 FSM 中从未达到状态 e19。INFO:Xst:1799 - 在 FSM 中从未达到状态 e20。INFO:Xst:1799 - 在 FSM 中从未达到状态 e21。INFO:Xst:1799 - 在 FSM 中从未达到状态 e22。INFO:Xst:1799 - 在 FSM 中从未达到状态 e23。INFO:Xst:1799 - 在 FSM 中从未达到状态 e24。-------------------------------------------------- --------------------- | 国家 | 14 | | 过渡 | 37 | | 输入 | 23 | | 输出 | 9 | | 时钟 | 时钟（上升沿） | | 重置 | 第一（正）| | 重置类型 | 异步 | | 重置状态 | e1 | | 通电状态 | e1 | | 编码 | 自动 | | 实施 | 查找表 | -------------------------------------------------- --------------------- 找到信号的有限状态机。-------------------------------------------------- --------------------- | 国家 | 6 | | 过渡 | 1068 | | 输入 | 177 | | 输出 | 6 | | 时钟 | 时钟（上升沿） | | 重置 | 第一（正）| | 重置类型 | 异步 | | 重置状态 | e7 | | 通电状态 | e7 | | 编码 | 自动 | | 实施 | 查找表 | -------------------------------------------------- --------------------- 找到信号的有限状态机。-------------------------------------------------- --------------------- | 国家 | 6 | | 过渡 | 33886 | | 输入 | 361 | | 输出 | 6 | | 时钟 | 时钟（上升沿） | | 重置 | 第一（正）| | 重置类型 | 异步 | | 重置状态 | e13 | | 通电状态 | e13 | | 编码 | 自动 | | 实施 | 查找表 | -------------------------------------------------- --------------------- 找到信号的 8 位寄存器。找到信号的 1 位寄存器。找到信号的 4 位寄存器。找到信号的 1 位寄存器。找到信号的 8 位寄存器。找到信号的 1 位寄存器。找到信号的 16 位寄存器。找到信号的 1 位寄存器。找到信号的 1 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 1 位寄存器。找到信号的 1 位寄存器。找到信号的 8 位寄存器。找到信号的 1 位寄存器。找到信号的 4 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 16 位寄存器。发现 8 位比较器不等于在第 1190 行创建的信号。摘要：推断出 3 个有限状态机。推断出 184 个 D 型触发器。推断出 1 个比较器。单位合成。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 16 位寄存器。发现 8 位比较器不等于在第 1190 行创建的信号。摘要：推断出 3 个有限状态机。推断出 184 个 D 型触发器。推断出 1 个比较器。单位合成。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 16 位寄存器。发现 8 位比较器不等于在第 1190 行创建的信号。摘要：推断出 3 个有限状态机。推断出 184 个 D 型触发器。推断出 1 个比较器。单位合成。发现 8 位比较器不等于在第 1190 行创建的信号。摘要：推断出 3 个有限状态机。推断出 184 个 D 型触发器。推断出 1 个比较器。单位合成。发现 8 位比较器不等于在第 1190 行创建的信号。摘要：推断出 3 个有限状态机。推断出 184 个 D 型触发器。推断出 1 个比较器。单位合成。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/multiplier.vhd”。找到信号的 32 位寄存器。找到信号的 16x16 位乘法器。摘要：推断出 32 个 D 型触发器。推断出 1 个乘数。单位合成。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/int_rom.vhd”。警告：Xst:647 - 从不使用输入。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接。WARNING:Xst:647 - Input > 从未使用过。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接。为第 175 行创建的信号找到 4096x8 位 ROM。摘要：推断 1 个 ROM。单位合成。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/int_ram.vhd”。WARNING:Xst:736 - 为第 38 行创建的信号找到 1 位锁存器。锁存器可能由不完整的 case 或 if 语句生成。我们不建议在 FPGA/CPLD 设计中使用锁存器，因为它们可能会导致时序问题。WARNING:Xst:736 - 为在第 37 行创建的信号找到 8 位锁存器。锁存器可能由不完整的 case 或 if 语句生成。我们不建议在 FPGA/CPLD 设计中使用锁存器，因为它们可能会导致时序问题。WARNING:Xst:736 - 为第 38 行创建的信号找到 1 位锁存器。锁存器可能由不完整的 case 或 if 语句生成。我们不建议在 FPGA/CPLD 设计中使用锁存器，因为它们可能会导致时序问题。信息：Xst：2371 - HDL ADVISOR - 分别驱动此锁存器的数据和门使能输入的逻辑功能共享通用术语。这种情况可能会导致建立/保持违规，从而导致仿真问题。这种情况可能来自不完整的 case 语句（未涵盖所有选择器值）。如果您打算描述这样的闩锁，您应该仔细检查。WARNING:Xst:736 - 为第 37 行创建的信号找到 1 位锁存器。锁存器可能由不完整的 case 或 if 语句生成。我们不建议在 FPGA/CPLD 设计中使用锁存器，因为它们可能会导致时序问题。INFO:Xst:2371 - HDL ADVISOR - 分别驱动此锁存器的数据和门使能输入的逻辑功能共享通用术语。这种情况可能会导致建立/保持违规，从而导致仿真问题。这种情况可能来自不完整的 case 语句（未涵盖所有选择器值）。如果您打算描述这样的闩锁，您应该仔细检查。找到信号的 1 位三态缓冲区。找到信号的 8 位三态缓冲区。为第 42 行创建的信号找到 8 位 128 对 1 多路复用器。为第 49 行创建的信号找到 8 位 128 对 1 多路复用器。找到信号 > 的 640 位寄存器。找到信号 > 的 256 位寄存器。INFO:Xst:738 - HDL ADVISOR - 1024 触发器被推断为信号。您可能试图以与赛灵思器件上可用的块和分布式 RAM 资源不兼容的方式描述 RAM，或使用不受支持的特定模板。请查看 Xilinx 资源文档和 XST 用户手册以了解编码指南。利用 RAM 资源将提高器件使用率并缩短综合时间。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/csadder.vhd”。警告：Xst:1780 - 从未使用或分配信号。这个未连接的信号将在优化过程中被修剪。找到信号 > 的 1 位 xor3。为信号找到 2 位 xor2。为第 60 行创建的信号找到 1 位 xor2。为信号找到 3 位 xor2。为第 82 行创建的信号找到 1 位 xor2。为信号找到 4 位 xor2。为第 110 行创建的信号找到 1 位 xor2。为第 118 行创建的信号找到 1 位 xor2。为第 124 行创建的信号找到 1 位 xor2。为信号找到 6 位 xor2。为第 144 行创建的信号找到 1 位 xor2。为第 150 行创建的信号找到 1 位 xor2。为第 156 行创建的信号找到 1 位 xor2。为信号 > 找到 1 位 xor2。找到信号 > 的 2 位 xor2。为第 89 行创建的信号找到 1 位 xor2。为信号 > 找到 3 位 xor2。为信号 > 找到 5 位 xor2。为第 163 行创建的信号找到 1 位 xor2。为第 170 行创建的信号找到 1 位 xor2。摘要：推断出 1 个 Xor(s)。单位合成。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/csadde2.vhd”。警告：Xst:1780 - 从未使用或分配信号。这个未连接的信号将在优化过程中被修剪。找到信号 > 的 1 位 xor2。找到信号 > 的 1 位 xor2。找到信号 > 的 2 位 xor2。找到信号 > 的 3 位 xor2。为信号 > 找到 5 位 xor2。单位合成。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/ext_interrupt.vhd”。WARNING:Xst:646 - Signal > 已分配但从未使用过。这个未连接的信号将在优化过程中被修剪。WARNING:Xst:646 - Signal > 已分配但从未使用过。这个未连接的信号将在优化过程中被修剪。WARNING:Xst:646 - Signal > 已分配但从未使用过。这个未连接的信号将在优化过程中被修剪。找到信号的 8 位寄存器。找到信号 > 的 4 位寄存器。找到信号 > 的 2 位寄存器。找到信号 > 的 2 位寄存器。找到信号的 1 位寄存器。找到信号的 1 位寄存器。摘要：推断出 10 个 D 型触发器。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/fastalu.vhd”。找到信号的 1 位 4 对 1 多路复用器。找到信号的 1 位 4 对 1 多路复用器。找到信号的 1 位 4 对 1 多路复用器。为第 261 行创建的信号找到 1 位 xor2。为第 258 行创建的信号找到 1 位 xor2。为第 255 行创建的信号找到 1 位 xor2。为第 252 行创建的信号找到 1 位 xor2。找到 8 -bit xor2 用于在第 210 行创建的信号。找到 8 位 xor2 用于在第 207 行创建的信号。摘要：推断出 3 个多路复用器。单位合成。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/fastal2.vhd”。警告：Xst:646 - 已分配信号但从未使用过。这个未连接的信号将在优化过程中被修剪。警告：Xst:646 - 已分配信号但从未使用过。这个未连接的信号将在优化过程中被修剪。警告：Xst:646 - 已分配信号但从未使用过。这个未连接的信号将在优化过程中被修剪。警告：Xst:646 - 已分配信号但从未使用过。这个未连接的信号将在优化过程中被修剪。警告：Xst:646 - 已分配信号但从未使用过。这个未连接的信号将在优化过程中被修剪。警告：Xst:646 - 已分配信号但从未使用过。这个未连接的信号将在优化过程中被修剪。单位合成。
> 
> ADVISOR - 分别驱动该锁存器的数据和栅极使能输入的逻辑功能共享通用项。这种情况可能会导致建立/保持违规，从而导致仿真问题。这种情况可能来自不完整的 case 语句（未涵盖所有选择器值）。如果您打算描述这样的闩锁，您应该仔细检查。找到信号的 8 位寄存器。找到信号的 1 位三态缓冲区。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位三态缓冲区。找到信号 > 的 4 位寄存器。找到信号 > 的 2 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号 > 的 2 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。为第 169 行创建的信号找到 1 位 xor8。为信号找到 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。摘要：推断出 168 个 D 型触发器。推断出 1 个异或。推断出 9 个三态。单位合成。找到信号的 8 位寄存器。找到信号 > 的 2 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。为第 169 行创建的信号找到 1 位 xor8。为信号找到 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。摘要：推断出 168 个 D 型触发器。推断出 1 个异或。推断出 9 个三态。单位合成。找到信号的 8 位寄存器。找到信号 > 的 2 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。为第 169 行创建的信号找到 1 位 xor8。为信号找到 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。摘要：推断出 168 个 D 型触发器。推断出 1 个异或。推断出 9 个三态。单位合成。为第 169 行创建的信号找到 1 位 xor8。为信号找到 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。摘要：推断出 168 个 D 型触发器。推断出 1 个异或。推断出 9 个三态。单位合成。为第 169 行创建的信号找到 1 位 xor8。为信号找到 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。找到信号的 8 位寄存器。摘要：推断出 168 个 D 型触发器。推断出 1 个异或。推断出 9 个三态。单位合成。找到信号的 8 位寄存器。找到信号的 8 位寄存器。摘要：推断出 168 个 D 型触发器。推断出 1 个异或。推断出 9 个三态。单位合成。找到信号的 8 位寄存器。找到信号的 8 位寄存器。摘要：推断出 168 个 D 型触发器。推断出 1 个异或。推断出 9 个三态。单位合成。
> 
> 合成单元。相关源文件是“C:/Users/Farmer/Desktop/CG3207 BACKUP/12 Nov 2012/ISA NOMX/8051_top_fpga.vhd”。警告：Xst:647 - 从不使用输入。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接。警告：Xst:646 - 已分配信号但从未使用过。这个未连接的信号将在优化过程中被修剪。警告：Xst:1780 - 从未使用或分配信号。这个未连接的信号将在优化过程中被修剪。警告：Xst:1780 - 从未使用或分配信号。这个未连接的信号将在优化过程中被修剪。单位合成。
> 
> ==================================================== ======================= HDL综合报告
> 
> 宏观统计
> 
> # ROM：1 4096x8 位 ROM：1
> 
> # 乘法器：1 16x16 位乘法器：1
> 
> # 加法器/减法器：1 个 16 位减法器：1
> 
> # 计数器：1 4 位递减计数器：1
> 
> # 寄存器：453 个 1 位寄存器：306 个 16 位寄存器
> 
> : 6 个 3 位寄存器 : 1 个 32 位寄存器 : 1 个 4 位寄存器
> : 2 个 8 位寄存器 : 137
> 
> # 锁存器：8 个 1 位锁存器：6 个 8 位锁存器
> 
> : 2
> 
> # 比较器：5 个 16 位比较器 相等：1 个 16 位比较器
> 
> 不等于：2 4 位比较器更大
> ：1 8 位比较器不等于：1
> 
> # 多路复用器：5 个 1 位 4 对 1 多路复用器：3 个 8 位 128 对 1
> 
> 多路复用器：2
> 
> # 三态：4 个 1 位三态缓冲区：2 个 8 位三态
> 
> 缓冲区：2
> 
> # 异或：57 1 位异或 2：53 1 位异或 3
> 
> : 1 1 位 xor8 : 1 8 位 xor2 : 2
> 
> ==================================================== ========================
> 
> ==================================================== ========================
> 
> # * 高级 HDL 综合 *
> 
> 分析 FSM 以获得最佳编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:37:03.033

几点...注意合成工具告诉您的内容：无论是在消息中还是在其他方面。

0）如果你还没有让它在模拟中工作，请在这里停下来，现在就去做。

1）在您之前的问题 [“如何从综合报告中推断”中](https://stackoverflow.com/questions/13356289/how-to-deduce-from-synthesis-report) ，您的大案例陈述已经很明显给您带来了麻烦，我建议了一种开始简化它的方法。

2）如果对于最初只需要 20000（？）个晶体管的 CPU 来说，合成需要这么长时间，你需要做一些不同的事情。

3）在您提供的巨大且大多数不必要的列表中，有关于闩锁和不完整案例覆盖的警告。找到并修复这些：它们当然不会帮助合成器收敛到一个好的解决方案！

4）查看每个输出或相关输出组对每个操作码或操作码组做了什么；你会发现巨大的简化。将 n 个单独的小型状态机组合成一个巨大的 SM 不仅会给您带来 n**2 的问题，而且几乎不可能解开。例如，可以将锁存器问题隔离到更小的代码块并在那里修复；在这个大 SM 中追踪它会……很困难。

“一个过程”模型在许多情况下都是很好的风格；但它可能会走得太远。

# c++ - 为什么抽象类的默认析构函数不是虚拟的？

> ID：13385257
> 
> 赞同：8
> 
> 时间：2012-11-14T18:46:19.457
> 
> 标签：c++, virtual-destructor

考虑

```
class A
{
public:
   virtual void foo () = 0;
}; 
```

在这一点上，它绝对`A`是一个抽象类，并且永远不会被自己实例化。那么为什么标准不要求自动生成的析构函数也必须是虚拟的呢？

每次我需要在我的接口类中定义一个虚拟的虚拟描述符时，我都会问自己这个问题，但我不明白为什么 commetee 不这样做。

那么问题来了：为什么抽象类中生成的析构函数不是虚拟的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T18:48:36.220

因为在 C++ 中，您不需要为不需要的东西付费，而且虚拟析构函数会增加很多情况下不需要的开销（即使在已经多态的类中也是如此）。例如，您可能不需要多态破坏，而是选择使用受保护的析构函数。

此外，作为一种替代方案，假设您有一个带有虚拟方法的类，它*确实*需要多态破坏。现在想象一下，`virtual`不再需要并删除其他方法，但仍然需要多态破坏。现在您必须记住返回并添加虚拟析构函数或遭受未定义的行为。

最后，我认为很难根据类是否为多态来证明更改析构函数的默认虚拟性（以及单独的）是合理的，而不是始终且始终如一地使析构函数非虚拟，除非另有要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:58:51.347

每次销毁此类时，虚拟析构函数都会导致取消引用。相当小的开销，但 C++ 希望尽可能多地节省时间。无论如何，显式总是比相信隐式编译器魔法更好。C++ 的座右铭：“信任程序员”。

LG ntor

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T09:58:55.153

在编写 c++ 标准时，我牢记它将在各种平台上使用。其中一些可能有内存限制。通过添加虚拟主义，我们增加了开销。这就是为什么当时每个方法/dtor 都需要由程序员明确地设为虚拟，无论何时我们确实需要多态性。

现在问题来了，为什么抽象类默认析构函数不能标准c++实现。你不觉得有不同的实现会很奇怪，而且会引起混乱。那么情况（不管它有多小），当你不需要析构函数是虚拟的（为了节省内存）。为什么要浪费记忆

# database - 数据库触发器是采用这种业务逻辑的方式吗

> ID：13385260
> 
> 赞同：1
> 
> 时间：2012-11-14T18:46:36.843
> 
> 标签：database, caching, triggers, business-logic

我目前正在我的应用程序中实现一些“报告”，这些“报告”汇总了从数据库中获取的大量信息：一个表的每个单元格来自另一个表的总数，每个单元格来自另一个表的总数，等等。
报告应始终向用户显示最新数据：软件和报告中任何地方发生变化的每个数据都必须是最新的。

我最终生成了太多的 SQL。

我试图缓存（在数据库中）中间结果和表，这是可行的。但是，在应用程序中可以更改数据的任何地方，我都必须重新计算缓存，该缓存以`recomputeCache()`在太多地方的调用结束（请记住，这是为了保持绝对最新的报告）。

DBMS 触发器可以工作：表上的触发器计算下一个触发器，它持有一个触发器计算下一个触发器，等等。
但我害怕触发器：

*   复杂性呢？执行计算的代码相当大而且“聪明”：200 行充满语法糖的 .NET 将变成 500 行 PL/SQL。
*   可维护性如何？PL/SQL 会不会更难查找、阅读、理解、修改、调试等？
*   业务逻辑封装呢？这个计算不应该属于业务逻辑层吗？

我正在听取任何建议，帮助我在“典型”软件缓存（我将尝试找到一种智能缓存重新计算策略）和基于触发器的表重新计算（可能会牺牲软件最佳实践和可维护性？）之间进行选择...

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:54:07.227

对于您的报告，我会首先尝试使用视图。该视图将始终是最新的，因为它只是对基础表的最新数据的视图。这将为您节省与您指出的触发器相关的复杂性和一些令人头疼的问题。

例子：

```
CREATE VIEW report AS
SELECT 'sales' AS name, (SELECT sum(sales) FROM sales) AS value
UNION ALL
SELECT 'expenses' AS name, (SELECT sum(expenses) FROM expenses) AS value 
```

如果视图的性能不够，那么您确实可以查看触发器并更聪明地聚合总计，而无需重新读取所有记录。但我会先从视图开始，作为您最简单的选择。

# ubuntu - 尝试在 Ubuntu 12.10 中安装 Wine，出现依赖项错误

> ID：13385264
> 
> 赞同：0
> 
> 时间：2012-11-14T18:46:41.173
> 
> 标签：ubuntu, wine, ubuntu-12.10

我到处寻找帮助，也许在发布更新之前无法在 Ubuntu 64 位上安装 Wine。

当我尝试安装时，出现以下错误

以下包具有未满足的依赖项：

```
wine1.4: PreDepends: dpkg (>= 1.15.7.2~) but 1.16.7ubuntu6 is to be installed
         Depends: libc6 (>= 2.14) but 2.15-0ubuntu20 is to be installed
         Depends: wine1.4-amd64 (= 1.4.1-0ubuntu1) but 1.4.1-0ubuntu1 is to be installed
         Depends: wine1.4-i386 (= 1.4.1-0ubuntu1) but it is not going to be installed 
```

有人有修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:48:21.420

我不知道为什么-1。这是一个合法的问题，在其他任何地方都没有答案。

通过添加 i386 架构，我设法解决了这个问题和许多其他依赖问题（如 Skype）。

```
dpkg --add-architecture i386 
```

我正在使用 Ubuntu 12.10

# android - 未找到 NDK 库

> ID：13385265
> 
> 赞同：0
> 
> 时间：2012-11-14T18:46:48.487
> 
> 标签：android, c++, android-ndk

我收到以下错误；

```
E/AndroidRuntime(446): Caused by: java.lang.UnsatisfiedLinkError: Library XYZ not found 
```

但我的项目中有图书馆 XYZ。文件夹结构是：

```
-ProjectFolder
--obj
---local
----armeabi
-----objs
------libXYZ.so
------libstdc++.a
------XYZ
-------folderA
--------fileX.o
--------fileX.o.d
--jni
---Android.mk
---folderA
----fileX.cpp
----fileX.h 
```

Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
APP_ABI := armeabi armeabi-v7a x86
LOCAL_MODULE := XYZ
LOCAL_SRC_FILES := folderA/fileX.cpp
include $(BUILD_SHARED_LIBRARY) 
```

C++ 编译输出：

```
Compile++ thumb  : XYZ <= fileX.cpp
In file included from jni/folderA/fileX.h:1:0,
                 from jni/folderA/fileX.cpp:1:
/Applications/android-ndk-r8b/platforms/android-5/arch-arm/usr/include/jni.h:592:13: note: the mangling of 'va_list' has changed in GCC 4.4
StaticLibrary  : libstdc++.a
SharedLibrary  : libXYZ.so
Install        : libXYZ.so => libs/armeabi/libXYZ.so 
```

当库位于正确位置时，我不明白为什么错误显示“未找到库 XYZ”。

# zend-form - 在 Zend Framework 2 中集成 HTMLPurifier 的最佳实践

> ID：13385267
> 
> 赞同：2
> 
> 时间：2012-11-14T18:46:52.037
> 
> 标签：zend-form, zend-framework2, htmlpurifier

[将HTMLPurifier](http://htmlpurifier.org/)集成到Zend Framework 2 中的最佳实践是什么或可能是什么？目标是过滤 Zend Form 元素和输入字段，它们不是用 Zend Form 生成的。

你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:43:11.373

从我的角度来看，我会说你可以创建一个新的过滤器。如果 Purifier 已经是 Zend 的“一部分”，那么它的名称可能是 Zend\Filter\HtmlPurifier。这是我觉得最合适的地方。

您也可以将其设为验证器 (Zend\Validator\HtmlPurifier)，这样您就可以判断一段文本是否“通过”。取决于你想做什么。

如果您想拒绝错误的输入，请使用验证器路径。如果要过滤掉错误的输入，请使用过滤器路径。

在你制作完 Zend 过滤器/验证器之后，像使用任何其他过滤器/验证器一样使用它。

# ruby - Ruby 是否有任何可嵌入的键值对存储？

> ID：13385270
> 
> 赞同：9
> 
> 时间：2012-11-14T18:47:13.233
> 
> 标签：ruby, key-value

我需要快速可靠的 Ruby 键值对存储。已经有类似的东西了吗？

要求是它完全在 Ruby 进程内运行，不需要任何外部进程。
它可能在内存中，具有显式磁盘刷新。
它需要最小的键值检索时间，写入时间可能不太好。
存储的数据量不会很糟糕，大约几十万个键，每个键都有 ~1kb 的文本值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T20:15:59.927

事实证明，对我来说最好的选择是使用普通 Hash 和 Marshal 将其序列化到磁盘。
对于这么多对象，YAML 肯定太慢了。
感谢@ian-armit 加强了我对核心 Ruby 库的信任。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T03:06:23.673

您还可以尝试[Moneta](https://github.com/minad/moneta)，它允许您构建嵌入在 ruby​​ 进程中的自己的键/值存储。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T18:49:54.560

喜欢 DBM？ [http://www.ruby-doc.org/stdlib-1.9.3/libdoc/dbm/rdoc/DBM.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/dbm/rdoc/DBM.html)

（垃圾邮件机器人的填充物）

DBM 类为 Unix 风格的 dbm 或数据库管理器库提供了一个包装器。

Dbm 数据库没有表或列；它们是简单的键值数据存储，就像 Ruby 哈希一样，但不驻留在 RAM 中。键和值必须是字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T05:29:43.530

你可以试试 Oria：[https ://github.com/intridea/oria](https://github.com/intridea/oria)

Oria (oh-rye-uh) 是一个内存中的、基于 Ruby 的零配置键值存储。它旨在快速轻松地处理中等数量的数据，而不会导致部署问题或服务器问题。它使用 EventMachine 为半持久存储提供网络接口，并将内存中的数据异步写入 YAML 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T03:12:05.320

有[LevelDB](https://code.google.com/p/leveldb/)，这里有[ruby​​ bindings](https://github.com/wmorgan/leveldb-ruby)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T11:49:55.260

[Daybreak](https://github.com/propublica/daybreak)是一个不错的新选择。数据存储在内存中的表中，因此可以使用 Ruby 细节（每个、过滤器、映射、减少等），并且似乎比 pstore 或 dbm 更快。

有关更多信息，请参阅[此博客文章](http://www.propublica.org/nerds/item/daybreak-a-simple-key-value-store-for-ruby)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-27T19:00:19.500

查看[PStore](http://ruby-doc.org/stdlib-1.9.2/libdoc/pstore/rdoc/PStore.html)。但不确定它是否足够快。

# arrays - 在某些情况下会出现错误吗？

> ID：13385272
> 
> 赞同：-1
> 
> 时间：2012-11-14T18:47:27.220
> 
> 标签：arrays, swap, shuffle

我还有一个问题，我有牌组，我洗牌。我的方法是交换一些对。

```
while count < m:
    swapcard = random.randint(0, m-1)
    buffer = cdgi[count]
    cdgi[count] = cdgi[swapcard]
    cdgi[swapcard] = buffer
    count = count + 1 
```

问题 - 在这种情况下`count`，`swapcard`是否有错误？例如：

```
cdgi[15] = cdgi[15] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:50:55.750

好问题......我想这取决于语言。我不认为一般来说这应该是一个问题，但如果你想安全，你可以把两个值都放在临时变量中，这样你就不会分配给同一个变量。

# ruby-on-rails - rvm 安装 1.9.3 失败

> ID：13385273
> 
> 赞同：7
> 
> 时间：2012-11-14T18:47:29.050
> 
> 标签：ruby-on-rails, ruby, rvm

我尝试重新安装 ruby​​、xcode 和一堆其他东西，因为我不断收到这些奇怪的 C 编译器错误。在某个时候，我所有的红宝石都被卸载了，所以我从头开始......

```
rvm get head && rvm reload
rvm install 1.9.3 
```

我收到以下错误：

```
No binary rubies available for: downloads/ruby-1.9.3-p327.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p327, this may take a while depending on your cpu(s)...
ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your connection...
ruby-1.9.3-p327 - #extracted to /Users/mgriffel/.rvm/src/ruby-1.9.3-p327 (already extracted)
ruby-1.9.3-p327 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/Users/mgriffel/.rvm/usr', please read /Users/mgriffel/.rvm/log/ruby-1.9.3-p327/configure.log
There has been an error while running configure. Halting the installation. 
```

在**configure.log**我看到：

```
[2012-11-14 13:21:54] env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/Users/mgriffel/.rvm/usr
checking build system type... x86_64-apple-darwin12.2.0
checking host system type... x86_64-apple-darwin12.2.0
checking target system type... x86_64-apple-darwin12.2.0
checking whether the C compiler works... no
configure: error: in `/Users/mgriffel/.rvm/src/ruby-1.9.3-p327':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

在**config.log**我看到：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by configure, which was
generated by GNU Autoconf 2.68\.  Invocation command line was

  $ ./configure --enable-shared --disable-install-doc --prefix=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/Users/mgriffel/.rvm/usr

## --------- ##
## Platform. ##
## --------- ##

hostname = Mattans-MacBook-Air.local
uname -m = x86_64
uname -r = 12.2.0
uname -s = Darwin
uname -v = Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64

/usr/bin/uname -p = i386
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = Mach kernel version:
     Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64
Kernel configured for up to 4 processors.
2 processors are physically available.
4 processors are logically available.
Processor type: i486 (Intel 80486)
Processors active: 0 1 2 3
Primary memory available: 4.00 gigabytes
Default processor set: 144 tasks, 704 threads, 4 processors
Load average: 2.79, Mach factor: 1.19
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /Users/mgriffel/.rvm/usr/bin
PATH: /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@rails328/bin
PATH: /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@global/bin
PATH: /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin
PATH: /Users/mgriffel/.rvm/bin
PATH: /opt/local/bin
PATH: /opt/local/sbin
PATH: /usr/local/bin
PATH: /usr/local/sbin
PATH: /usr/local/mysql/bin
PATH: /usr/bin
PATH: /bin
PATH: /usr/sbin
PATH: /sbin
PATH: /opt/sm/bin
PATH: /opt/sm/pkg/active/bin
PATH: /opt/sm/pkg/active/sbin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:2769: checking build system type
configure:2783: result: x86_64-apple-darwin12.2.0
configure:2851: checking host system type
configure:2864: result: x86_64-apple-darwin12.2.0
configure:2884: checking target system type
configure:2897: result: x86_64-apple-darwin12.2.0
configure:3378: checking for C compiler version
configure:3387: /opt/local/bin/gcc-apple-4.2 --version >&5
i686-apple-darwin12-gcc-apple-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3) (MacPorts apple-gcc42 5666.3_9)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:3398: $? = 0
configure:3387: /opt/local/bin/gcc-apple-4.2 -v >&5
Using built-in specs.
Target: i686-apple-darwin12
Configured with: /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_lang_apple-gcc42/apple-gcc42/work/objroot/src/configure --disable-checking --prefix=/opt/local --mandir=/opt/local/share/man --enable-languages=c,c++,objc,obj-c++ --libexecdir=/opt/local/libexec/apple-gcc42 --libdir=/opt/local/lib/apple-gcc42 --includedir=/opt/local/include/apple-gcc42 --program-suffix=-apple-4.2 --with-system-zlib --disable-nls --with-slibdir=/usr/lib --build=x86_64-apple-darwin12 --enable-werror-always --program-prefix=i686-apple-darwin12- --host=x86_64-apple-darwin12 --target=i686-apple-darwin12 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Apple Inc. build 5666) (dot 3) (MacPorts apple-gcc42 5666.3_9)
configure:3398: $? = 0
configure:3387: /opt/local/bin/gcc-apple-4.2 -V >&5
gcc-apple-4.2: argument to `-V' is missing
configure:3398: $? = 1
configure:3387: /opt/local/bin/gcc-apple-4.2 -qversion >&5
i686-apple-darwin12-gcc-apple-4.2.1: no input files
configure:3398: $? = 1
configure:3418: checking whether the C compiler works
configure:3440: /opt/local/bin/gcc-apple-4.2   -L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include conftest.c  >&5
i686-apple-darwin12-gcc-apple-4.2.1: CFLAGS=-I/opt/sm/pkg/active/include: No such file or directory
i686-apple-darwin12-gcc-apple-4.2.1: CPATH=/opt/sm/pkg/active/include: No such file or directory
configure:3444: $? = 1
configure:3482: result: no
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| #define CANONICALIZATION_FOR_MATHN 1
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:3487: error: in `/Users/mgriffel/.rvm/src/ruby-1.9.3-p327':
configure:3489: error: C compiler cannot create executables
See `config.log' for more details

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_build=x86_64-apple-darwin12.2.0
ac_cv_env_CCC_set=
ac_cv_env_CCC_value=
ac_cv_env_CC_set=set
ac_cv_env_CC_value=/opt/local/bin/gcc-apple-4.2
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXFLAGS_set=
ac_cv_env_CXXFLAGS_value=
ac_cv_env_CXX_set=
ac_cv_env_CXX_value=
ac_cv_env_LDFLAGS_set=set
ac_cv_env_LDFLAGS_value='-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include'
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_host=x86_64-apple-darwin12.2.0
ac_cv_prog_CC=/opt/local/bin/gcc-apple-4.2
ac_cv_target=x86_64-apple-darwin12.2.0

## ----------------- ##
## Output variables. ##
## ----------------- ##

ALLOCA=''
AR=''
ARCHFILE=''
ARCH_FLAG=''
AS=''
ASFLAGS=''
BASERUBY='echo executable host ruby is required.  use --with-baseruby option.; false'
BUILTIN_ENCOBJS=''
BUILTIN_TRANSOBJS=''
BUILTIN_TRANSSRCS=''
CAPITARGET=''
CC='/opt/local/bin/gcc-apple-4.2'
CCDLFLAGS=''
CFLAGS=''
CHDIR=''
COMMON_HEADERS=''
COMMON_LIBS=''
COMMON_MACROS=''
COUTFLAG=''
CP=''
CPP=''
CPPFLAGS=''
CPPOUTFILE=''
CXX=''
CXXFLAGS=''
DEFS=''
DLDFLAGS=''
DLDLIBS=''
DLEXT2=''
DLEXT=''
DLLWRAP=''
DOT=''
DOXYGEN=''
ECHO_C='\c'
ECHO_N=''
ECHO_T=''
EGREP=''
ENABLE_SHARED=''
EXECUTABLE_EXTS=''
EXEEXT=''
EXPORT_PREFIX=''
EXTOUT=''
EXTSTATIC=''
GCC=''
GNU_LD=''
GREP=''
INSTALLDOC=''
INSTALL_DATA=''
INSTALL_PROGRAM=''
INSTALL_SCRIPT=''
LDFLAGS='-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include'
LDSHARED=''
LDSHAREDXX=''
LIBEXT=''
LIBOBJS=''
LIBPATHENV=''
LIBPATHFLAG=''
LIBRUBY=''
LIBRUBYARG=''
LIBRUBYARG_SHARED=''
LIBRUBYARG_STATIC=''
LIBRUBY_A=''
LIBRUBY_ALIASES=''
LIBRUBY_DLDFLAGS=''
LIBRUBY_LDSHARED=''
LIBRUBY_RELATIVE=''
LIBRUBY_SO=''
LIBS=''
LINK_SO=''
LN_S=''
LTLIBOBJS=''
MAINLIBS=''
MAJOR='1'
MAKEDIRS=''
MAKEFILES=''
MANTYPE=''
MINIOBJS=''
MINIRUBY=''
MINOR='9'
MKDIR_P=''
NM=''
NROFF=''
NULLCMD=''
OBJCOPY=''
OBJDUMP=''
OBJEXT=''
OUTFLAG=''
PACKAGE=''
PACKAGE_BUGREPORT=''
PACKAGE_NAME=''
PACKAGE_STRING=''
PACKAGE_TARNAME=''
PACKAGE_URL=''
PACKAGE_VERSION=''
PATH_SEPARATOR=':'
PKG_CONFIG=''
PLATFORM_DIR=''
PREP=''
RANLIB=''
RDOCTARGET=''
RI_BASE_NAME=''
RM=''
RMALL=''
RMDIR=''
RMDIRS=''
RPATHFLAG=''
RUBYW_BASE_NAME='rubyw'
RUBYW_INSTALL_NAME=''
RUBY_BASE_NAME='ruby'
RUBY_INSTALL_NAME=''
RUBY_PROGRAM_VERSION='1.9.3'
RUBY_RELEASE_DATE='2012-11-10'
RUBY_SO_NAME=''
RUNRUBY=''
SET_MAKE=''
SHELL='/bin/sh'
SOLIBS=''
STATIC=''
STRIP=''
SYMBOL_PREFIX=''
TEENY='1'
TEST_RUNNABLE=''
THREAD_MODEL=''
TRY_LINK=''
UNIVERSAL_ARCHNAMES=''
UNIVERSAL_INTS=''
USE_RUBYGEMS=''
WERRORFLAG=''
WINDRES=''
XCFLAGS=''
XLDFLAGS=''
XRUBY=''
XRUBY_LIBDIR=''
XRUBY_RUBYHDRDIR=''
XRUBY_RUBYLIBDIR=''
ac_ct_CC=''
ac_ct_CXX=''
ac_ct_OBJCOPY=''
ac_ct_OBJDUMP=''
arch=''
bindir='${exec_prefix}/bin'
build='x86_64-apple-darwin12.2.0'
build_alias=''
build_cpu='x86_64'
build_os='darwin12.2.0'
build_vendor='apple'
cflags=' ${optflags} ${debugflags} ${warnflags}'
configure_args=''
cppflags=''
cxxflags=' ${optflags} ${debugflags} ${warnflags}'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
debugflags=''
docdir='${datarootdir}/doc/${PACKAGE}'
dvidir='${docdir}'
exec=''
exec_prefix='NONE'
host='x86_64-apple-darwin12.2.0'
host_alias=''
host_cpu='x86_64'
host_os='darwin12.2.0'
host_vendor='apple'
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
optflags=''
pdfdir='${docdir}'
prefix='/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p327'
program_transform_name='s&^&&'
psdir='${docdir}'
ridir=''
ruby_pc=''
ruby_version=''
rubyhdrdir=''
rubylibprefix=''
rubyw_install_name=''
sbindir='${exec_prefix}/sbin'
setup=''
sharedstatedir='${prefix}/com'
sitearch=''
sitedir=''
sitehdrdir=''
sysconfdir='${prefix}/etc'
target='x86_64-apple-darwin12.2.0'
target_alias=''
target_cpu='x86_64'
target_os='darwin12.2.0'
target_vendor='apple'
try_header=''
vendordir=''
vendorhdrdir=''
warnflags=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

/* confdefs.h */
#define PACKAGE_NAME ""
#define PACKAGE_TARNAME ""
#define PACKAGE_VERSION ""
#define PACKAGE_STRING ""
#define PACKAGE_BUGREPORT ""
#define PACKAGE_URL ""
#define CANONICALIZATION_FOR_MATHN 1

configure: exit 77 
```

我一生都无法弄清楚出了什么问题，而且我已经被困在这里好几天了。在这里的任何帮助将不胜感激。

注意：我安装了最新版本的 Xcode 和 CLT。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T21:25:43.553

事实证明这是 RailsInstaller OSX 1.0.3 中的一个错误 - （在阅读[在 Mountain Lion 上安装 Ruby 时发现的问题 - ruby​​ 1.9.3 wont' compile](https://stackoverflow.com/questions/12928581/problems-installing-ruby-on-mountain-lion-ruby-1-9-3-wont-compile)）

我需要更改`/etc/rvmrc`以包含此内容：

```
umask g+w
export -a rvm_configure_env
rvm_configure_env=('LDFLAGS=-L/opt/sm/pkg/active/lib' 'CFLAGS=-I/opt/sm/pkg/active/include' 'CPATH=/opt/sm/pkg/active/include') 
```

有关更多信息，请参阅：[https ://github.com/railsinstaller/railsinstaller-nix/issues/10](https://github.com/railsinstaller/railsinstaller-nix/issues/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:36:54.080

为了让 ruby​​ 在我使用 Mountain Lion 和 xcode 4.5.2 的 mac 上编译，我必须在我的路径上的某个地方创建一个从 gcc-4.2 到 gcc 的软链接。我最初在此页面上找到了建议：[https ://gist.github.com/1860902](https://gist.github.com/1860902)

也许它会帮助你：

```
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

如果没有帮助，您可以将其删除：

```
sudo rm /usr/bin/gcc-4.2 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T19:20:15.330

mattangriffel 的解决方案为我做到了。就我而言，我的第三行几乎相同，但他在哪里

```
 rvm_configure_env=('LDFLAGS=-L/opt/sm/pkg/active/lib' 'CFLAGS=-I/opt/sm/pkg/active/include' 'CPATH=/opt/sm/pkg/active/include') 
```

我有

```
 rvm_configure_env=('LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include') 
```

修复我的看起来像他的伎俩。

# ios - 将 JSON 转换为 .plist

> ID：13385276
> 
> 赞同：38
> 
> 时间：2012-11-14T18:47:47.137
> 
> 标签：ios, json, plist

我有一个从 Web 服务导出的 JSON 文件。我需要将其转换为 .plist 文件，我可以将其导入 iOS 应用程序的主包中。最简单的方法是什么？

注意 - 应用程序不需要从服务器或任何东西中获取 JSON。这是我需要做的一次性转换。该应用程序将始终只使用 plist。我只需要知道如何转换它。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-01T22:58:30.207

我会在命令行上推荐 plutil 。

```
plutil -convert xml1 in.json -o out.plist 
```

它会在字典中出现 NULL 值以及 iOS JSON 反序列化将更优雅地处理的其他一些不一致问题，但它看起来确实工作得很好。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-09-09T02:18:59.687

我写了一个在线转换器来做到这一点。请试一试。

[http://json2plist.sinaapp.com/](http://json2plist.sinaapp.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T18:44:32.047

大卫的回答效果很好，但作为一个 Ruby 爱好者，我编写了一个非常简单的工具来对 ruby​​ 做同样的事情：[https ://github.com/javiertoledo/json2plist](https://github.com/javiertoledo/json2plist)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-08T20:09:12.373

另一个在线转换器 JSON 到 PList [https://wtools.io/convert-json-to-plist](https://wtools.io/convert-json-to-plist)

# css - 手机的CSS媒体查询未检测到屏幕宽度？

> ID：13385278
> 
> 赞同：0
> 
> 时间：2012-11-14T18:48:04.633
> 
> 标签：css

这是CSS：

> ```
> header {
>   width: 400px;
>   margin: 0 auto;
> }
> section {
>   width: 400px;
>   margin: 0 auto;
> }
> footer {
>   width: 400px;
>   margin: 0 auto;
> } 
> ```

这是我对 index.html 的查询：

> `<link rel="stylesheet" href="mobile.css" type="text/css" media="handheld" />`

它看起来是正确的，但我可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:09:04.197

大多数智能手机都可以通过使用 css 媒体查询来定位。作为一个优势，您还可以针对小型浏览器窗口。看看[www.lessframework.com](http://www.lessframework.com)那里解释了这些查询的作用，以及如何采用。

# android - 以编程方式从最近的应用程序中删除应用程序

> ID：13385289
> 
> 赞同：59
> 
> 时间：2012-11-14T18:48:25.683
> 
> 标签：android

我知道活动可以在清单中声明为从最近的活动中排除：http `android:excludeFromRecents`: [//developer.android.com/guide/topics/manifest/activity-element.html#exclude](http://developer.android.com/guide/topics/manifest/activity-element.html#exclude)

但是，这不是我想要的，我想知道是否有办法以编程方式从最近的应用程序中删除该应用**程序**

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-14T18:54:25.757

是的，通常当您希望`Activity`在启动时具有特殊属性时，您需要为`Intent`. 在这种情况下[`FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)。

**更新：**

如果您需要隐藏当前已经运行的活动，您可以结合使用此标志，`FLAG_ACTIVITY_CLEAR_TOP`将新的 Intent 发送到现有的`Activity`. 您将不得不思考并尝试尝试当用户在您的堆栈中移动时会发生什么，以及这是否会使您的应用重新出现在最近的应用中。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-04-30T17:07:07.993

这可以使用`ActivityManager.AppTask`功能来完成（从 API 21 开始）

```
 ActivityManager am = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
    if(am != null) {
        List<ActivityManager.AppTask> tasks = am.getAppTasks();
        if (tasks != null && tasks.size() > 0) {
            tasks.get(0).setExcludeFromRecents(true);
        }
    } 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-12-07T05:55:50.757

将这些行添加到要退出应用程序的 Activity 中：

```
@Override
public void finish() {
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
        super.finishAndRemoveTask();
    }
    else {
        super.finish();
    }
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-14T18:54:27.290

以下是标志的定义`android:excludeFromRecents`（我知道你已经看到了）：

> 此活动启动的任务是否应从最近使用的应用程序（“最近的应用程序”）列表中排除。也就是说，当这个activity是一个新任务的根activity时，这个属性决定了这个task是否不应该出现在最近的应用列表中。如果任务应从列表中排除，则为“true”；“假”，如果它应该被包括在内。默认值为“假”。

因此，要从最近应用程序列表中删除该应用程序，您可以在应用程序中的第一个活动上设置此标志，因为该活动会为您的应用程序启动任务。如果您的应用程序中有多个任务（对于大多数应用程序来说不太可能），那么您需要为所有任务的根活动设置此标志。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-08T09:41:50.053

当您的活动完成并应该关闭时调用它，并且作为完成任务的根活动的一部分，该任务应该被完全删除。

```
finishAndRemoveTask(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-12T08:19:37.517

在收到其他答案后，我设法找到了以下解决方法：我有一个`Activity`，我们称之为 XPTO，在清单中声明为

基本上，当我希望应用程序从最近列表中消失时，我完成所有其他活动，然后启动 XPTO，这基本上会杀死应用程序（调用`android.os.Process.killProcess(android.os.Process.myPid());`它的`onResume()`

如果有人有更好的方法，请分享

# shopify - 如何将电子邮件传递给 Shopify 结帐

> ID：13385290
> 
> 赞同：-1
> 
> 时间：2012-11-14T18:48:32.300
> 
> 标签：shopify

我正在使用一个外部分析应用程序，该应用程序要求我们在 /cart 页面上收集电子邮件。为了让客户不必再次输入他们的电子邮件地址，我想知道是否有办法将该电子邮件发送到付款表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:54:02.857

您可以使用 Shopify API 与订单进行交互，特别是查看您应该能够实现所需的[API 文档。](http://api.shopify.com)

1.  您使用哪种语言编写代码？/您可以使用哪种语言编写代码？/您想用哪种语言来实现？（例如，Ruby、PHP、ASP..）

2.  如果您知道订单 ID，则可以从订单访问用户电子邮件地址。订单 ID 可以通过根据您的条件查询 Shopify 订单 API 来找到。

3.  或者，根据 Csaunders 的回答，您可以使用[Shopify Web-hook](http://wiki.shopify.com/WebHook)，它会在特定事件发生时通知您的服务器 - 将其视为事件触发器。例如：

> 1.  客户提出订单
> 2.  Shopify 注意到您的商店有一个活动的网络钩子，因此使用它
> 3.  您的网络系统通过 XML 格式的 POST 请求接收所有订单信息
> 4.  您提取电子邮件地址（例如 $email = trim($xml->email); ）
> 5.  将您提取的 $email 推送到您的分析系统中

如果没有关于您的案例和设置以及您拥有的知识的更多信息，我将努力改进这个答案 - 但是如果您回来并在这篇文章中添加更多细节或评论，我将尽我所能提供帮助。

谢谢

# iis-7 - IUSR 和防火墙

> ID：13385294
> 
> 赞同：0
> 
> 时间：2012-11-14T18:48:50.587
> 
> 标签：iis-7, asp-classic, windows-firewall-api

我有一个经典 ASP 页面，它使用 HNetCfg.FwMgr 对象在服务器的 Windows 防火墙上配置端口排除。在我的 IIS 6、Win 03 服务器上，我必须将对 IUSR_machine 帐户的 Set/CreateKey/Delete 访问权限添加到 HKLM\SYSTEM\ControlSet001\Services\SharedAccess\Parameters\FirewallPolicy\StandardProfile\GloballyOpenPorts\List\ 注册表项。

当我在我的新 Windows Server 2008 IIS 7 上运行时，我得到一个 Permission Denied。如果我将 Anonymous 用户更改为 Admin，甚至是作为 Users 组成员的新创建用户，我不会获得拒绝权限，并且会发生更新。

我注意到注册表中存储防火墙条目的位置已更改。但是，即使我让 IUSR 完全控制我的 HKLM，它在尝试添加端口排除时仍然会获得 Permission Denied。它可以很好地读取端口排除列表，所以我假设对 HNetCfg.FwMgr 的访问工作正常。

任何人都知道如何让IUSR能够使用该对象（HNetCfg.FwMgr）添加排除项？目前无法使用新的固件策略 2 进行重写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:40:30.060

您需要以管理用户身份运行应用程序池。如果您担心安全性，请将其作为具有管理员权限的虚拟目录运行。您可以使用不在该虚拟目录中的脚本（受 I_user 控制的脚本）中的 xmlhttp 来调用具有管理员安全权限的（防火墙）虚拟目录中的脚本。这样，您的 firwall 脚本的 url（虚拟目录）是不公开的。

# javascript - MeteorJS 和 AmplifyJS 反应式

> ID：13385299
> 
> 赞同：2
> 
> 时间：2012-11-14T18:49:03.397
> 
> 标签：javascript, node.js, meteor, amplifyjs

所以我正在为流星使用 amplifyjs 包。

我对流星还很陌生，并且无法使其成为反应性上下文。

我正在使用

```
amplify.store( string key ) 
```

因此，当我对此进行更改或添加值时，我希望视图更新反映这一点。

我想我将不得不使用 Meteor.deps 或自动订阅，但不知道从哪里开始。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T02:00:10.503

由于 amplify 是第三方包，它不使用 Meteor 上下文或内置反应性。但是您可以很容易地构建自己的反应性包装器。您可以查看 deps 文档以了解如何使用 Meteor.deps.Context 和 Meteor.deps._ContextSet 来执行此操作：

[http://docs.meteor.com/#meteor_deps](http://docs.meteor.com/#meteor_deps)

我还在这里发布了一个视频教程：[http ://www.eventedmind.com/posts/reactivity-with-contexts](http://www.eventedmind.com/posts/reactivity-with-contexts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:52:04.810

实际上，您可以做的是创建 Session 的“子类”，在调用 set() 时将值存储在 Amplify 的存储中。您将自动继承 Session 的所有反应属性。这是代码，它对我有用：

```
SessionAmplify = _.extend({}, Session, {
  keys: _.object(_.map(amplify.store(), function(value, key) {
    return [key, JSON.stringify(value)]
  })),
  set: function (key, value) {
    Session.set.apply(this, arguments);
    amplify.store(key, value);
  },
}); 
```

只需将所有 Session.set/get 调用替换为 SessionAmplify.set/get 调用即可。调用 set() 时，会调用父 Session 方法，以及 amplify.store()。当第一次创建“子类”时，它会在其键中加载 amplify 存储中的所有内容。

您可以在此处测试排行榜示例的工作变体：[https ://github.com/sebastienbarre/meteor-leaderboard](https://github.com/sebastienbarre/meteor-leaderboard)

# javascript - 在 Backbone 中，我可以将模型行为添加到集合中吗？

> ID：13385300
> 
> 赞同：1
> 
> 时间：2012-11-14T18:49:18.943
> 
> 标签：javascript, architecture, backbone.js, publish-subscribe

如果我有一个对象集合，但还想存储有关这些对象的一些更高级别的信息，是否适合在集合中添加一些模型行为？

在我的情况下，我正在寻找一组应用程序路径来拥有一个名为“curPath”的布尔字段。如果已更改，则该集合应设置一个指示当前页面的标志。这样，外部观察者只需观察一个字段，而不是路径集合中的每个模型。

这可能是这样的：

```
var PathModel = Backbone.Model.extend({})
var PathCollection = Backbone.Collection.extend({
  initialize: function(){ this.model = PathModel }
})
// I want to be able to set observable properties on the collection, so...
var PathManager = _.extend(Backbone.Model, PathCollection)

// Then maybe I can do something like this?
PathManager.each(function(pathModel){
  pathModel.on('change:curPath', function(m, value, o){
    // I mean for 'this'.set to point to the instance of the PathManager
    if (value === true){ this.set('curPath', pathModel.get('id')) } 
  }, this)
}, this) 
```

将可观察行为添加到集合（集合+模型>模型）是否合适，或者我是否需要将包装模型添加到整个事物（模型>集合>模型），或者是否有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:09:16.273

由于 Model 和 Collection 上的某些方法具有相同的名称，这会导致冲突，并且可能会出现更新到 Backbone 的未来版本时可能出现的问题，我建议不要使用这种模式。而不是这样做创建一个 PathManager 类并初始化 PathCollection 并将其设置为此模型上的路径属性。如果从你所说的

```
var PathManager = Backbone.Model.extend({
    initialize: function() {
        this.paths = new PathCollection();
    }
});

var pathManager = new PathManager();

pathManager.paths.add({ /* new path */ });
pathManager.on('change', doSomething);
pathManager.paths.on('add', doSomethingElse); 
```

我会这样做

# java - 使用 BitmapFactory.decodeByteArray 制作动画时帧率不均

> ID：13385307
> 
> 赞同：0
> 
> 时间：2012-11-14T18:49:57.357
> 
> 标签：java, android

我想逐帧播放动画。我有一个 ArrayList byeArr ，其中包含 jpeg 图片并将它们一一解码以显示在表面视图上。

```
tim = new CountDownTimer(1,1)
{
int i = 0;

@Override
public void onFinish()
{

    if ( i < byeArr.size() )
    {
        bitMap = BitmapFactory.decodeByteArray ( byeArr.get(i) , 0,  byeArr.get(i).length );
            /// bitMap is a bitmap that is displayed on screen.

        lastFrameMs = System.currentTimeMillis() - lastFrameSysTime;
        totalFr = totalFr + lastFrameMs;
        Log.e("LF", "frame: "+ String.valueOf(i) + " = " + String.valueOf(lastFrameMs) +"ms");

        lastFrameSysTime = System.currentTimeMillis();
        i++;
        tim.start();

    }
... 
```

例如，如果我想要一个罕见的 15 FPS 帧，我应该将 CountDownTimer 设置为 1000/ 15 - lastFrameMs ，其中 lastFrameMs 是绘制一帧的时间。

这会很好用，帧将以恒定速度绘制，但问题是它们没有。每帧可能需要 25 到 65 毫秒...

```
11-14 19:00:52.402: E/LF(26270): frame: 0 = 60ms
11-14 19:00:52.429: E/LF(26270): frame: 1 = 27ms
11-14 19:00:52.488: E/LF(26270): frame: 2 = 55ms
11-14 19:00:52.519: E/LF(26270): frame: 3 = 32ms
11-14 19:00:52.574: E/LF(26270): frame: 4 = 57ms
11-14 19:00:52.605: E/LF(26270): frame: 5 = 30ms
11-14 19:00:52.664: E/LF(26270): frame: 6 = 56ms
11-14 19:00:52.695: E/LF(26270): frame: 7 = 33ms
11-14 19:00:52.753: E/LF(26270): frame: 8 = 58ms
11-14 19:00:52.824: E/LF(26270): frame: 9 = 71ms
11-14 19:00:52.886: E/LF(26270): frame: 10 = 62ms
11-14 19:00:52.914: E/LF(26270): frame: 11 = 27ms
11-14 19:00:52.976: E/LF(26270): frame: 12 = 62ms
11-14 19:00:53.007: E/LF(26270): frame: 13 = 29ms
11-14 19:00:53.066: E/LF(26270): frame: 14 = 61ms
11-14 19:00:53.097: E/LF(26270): frame: 15 = 27ms
11-14 19:00:53.171: E/LF(26270): frame: 16 = 77ms
11-14 19:00:53.199: E/LF(26270): frame: 17 = 28ms
11-14 19:00:53.261: E/LF(26270): frame: 18 = 62ms
11-14 19:00:53.300: E/LF(26270): frame: 19 = 37ms
11-14 19:00:53.355: E/LF(26270): frame: 20 = 56ms
11-14 19:00:53.390: E/LF(26270): frame: 21 = 34ms
11-14 19:00:53.457: E/LF(26270): frame: 22 = 66ms
11-14 19:00:53.484: E/LF(26270): frame: 23 = 30ms
11-14 19:00:53.550: E/LF(26270): frame: 24 = 64ms
11-14 19:00:53.582: E/LF(26270): frame: 25 = 31ms
11-14 19:00:53.640: E/LF(26270): frame: 26 = 60ms
11-14 19:00:53.667: E/LF(26270): frame: 27 = 29ms
11-14 19:00:53.734: E/LF(26270): frame: 28 = 66ms
11-14 19:00:53.769: E/LF(26270): frame: 29 = 33ms
11-14 19:00:53.828: E/LF(26270): frame: 30 = 60ms
11-14 19:00:53.871: E/LF(26270): frame: 31 = 43ms
11-14 19:00:53.929: E/LF(26270): frame: 32 = 58ms
11-14 19:00:53.933: E/- - -(26270):  - - - 
11-14 19:00:53.933: E/fps(26270): 21 FPS
11-14 19:00:53.933: E/avrg ms for frame(26270): 46 
```

...任何想法可以做些什么呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:00:31.337

您不应该在它们被解码后立即显示它们。

在您的计时器中，解码位图，然后在显示位图之前等待 X 时间。X 在哪里

```
X = constantInterval - lastFrameMs. 
```

如果 X 为负数，则立即绘制。

此外，如果动画足够小，您应该考虑将动画存储在 RAM 中而不是对其进行解码。

# html5-video - html5 视频取消

> ID：13385309
> 
> 赞同：2
> 
> 时间：2012-11-14T18:50:02.147
> 
> 标签：html5-video

我正在尝试在我的网站上嵌入视频：

```
<video width="320" height="240" controls="controls">
  <source src="new-slideshow.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video> 
```

由于某种原因，视频没有加载，当我检查网络请求时，我可以看到以下信息：

[https://dl.dropbox.com/u/2241201/locker/Screen%20Shot%202012-11-14%20at%201.49.39%20PM.png](https://dl.dropbox.com/u/2241201/locker/Screen%20Shot%202012-11-14%20at%201.49.39%20PM.png)

为什么视频被取消了？

# java - 使用 JavaMail 阅读电子邮件内容时出现编码问题

> ID：13385311
> 
> 赞同：3
> 
> 时间：2012-11-14T18:50:15.043
> 
> 标签：java, email, encoding, utf-8, jakarta-mail

我正在使用 JavaMail 1.4.1（我已升级到 1.4.5 版本但遇到同样的问题）从电子邮件帐户中读取消息，但我遇到了内容编码问题：

```
POP3Message pop3message;
... 
Object contentObject = pop3message.getContent();
...   
String contentType = pop3message.getContentType();
String content = contentObject.toString(); 
```

有些消息可以正确读取，但其他消息由于编码不合适而具有奇怪的字符。我已经意识到它不适用于特定的内容类型。

如果 contentType 是以下任何一种，则效果很好：

> *   文本/纯文本；字符集=ISO-8859-1
>     
>     
> *   文本/纯文本；
>     字符集="iso-8859-1"
>     
>     
> *   文本/纯文本；
>     字符集="ISO-8859-1";
>     格式="流动"
>     
>     
>     
> *   文本/纯文本；字符集=windows-1252

但如果它不是：

> *   文本/纯文本；
>     字符集="utf-8"

对于这个 contentType (UTF-8 one)，如果我尝试获取编码 (pop3message.getEncoding()) 我得到

> 引用可打印

例如，对于后一种编码，我在调试器中得到 String 值（与持久化对象后在数据库中看到的方式相同）：

> Ubicación（而不是 Ubicación）

但是，如果我在浏览器中使用电子邮件客户端打开电子邮件，则可以毫无问题地阅读它，并且这是一条普通的消息（没有附件，只有文本），因此该消息似乎没问题。

关于如何解决这个问题的任何想法？

谢谢。

* * *

**更新** 这是我添加的一段代码，用于尝试 jlordo 提供的函数 getUTF8Content()

```
POP3Message pop3message = (POP3Message) message;
String uid = pop3folder.getUID(message);

//START JUST FOR TESTING PURPOSES
if(uid.trim().equals("1401")){
    Object utfContent = pop3message.getContent();
    System.out.println(utfContent.getClass().getName()); // it is of type String
    //System.out.println(utfContent); // if not commmented it prints the content of one of the emails I'm having problems with.
    System.out.println(pop3message.getEncoding()); //prints: quoted-printable
    System.out.println(pop3message.getContentType()); //prints: text/plain; charset="utf-8"
    String utfContentString = getUTF8Content(utfContent); // throws java.lang.ClassCastException: java.lang.String cannot be cast to javax.mail.util.SharedByteArrayInputStream
    System.out.println(utfContentString);
}

//END TEST CODE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:05:25.080

您如何检测到这些消息具有“奇怪的字符”？您是否在某处显示数据？您用于显示数据的任何方法都可能无法正确处理 Unicode 字符。

第一步是确定问题是您得到了错误的字符，还是正确的字符显示不正确。您可以检查数据中每个字符的 Unicode 值（例如，在 getContent 方法返回的字符串中），以确保每个字符都具有正确的 Unicode 值。如果是这样，则问题出在您用于显示字符的方法上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:43:26.590

试试这个，让我知道它是否有效：

```
if ( *check if utf 8 here* ) {
    content = getUTF8Content(contentObject);
}

// TODO take care of UnsupportedEncodingException, 
// IOException and ClassCastException
public static String getUTF8Content(Object contentObject) {
    // possible ClassCastException
    SharedByteArrayInputStream sbais = (SharedByteArrayInputStream) contentObject;
    // possible UnsupportedEncodingException
    InputStreamReader isr = new InputStreamReader(sbais, Charset.forName("UTF-8"));
    int charsRead = 0;
    StringBuilder content = new StringBuilder();
    int bufferSize = 1024;
    char[] buffer = new char[bufferSize];
    // possible IOException
    while ((charsRead = isr.read(buffer)) != -1) {
        content.append(Arrays.copyOf(buffer, charsRead));
    }
    return content.toString();
} 
```

顺便说一句，JavaMail 1.4.1 是必需的吗？最新版本是 1.4.5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T14:54:51.420

对我有用的是我打电话`getContentType()`来检查字符串中是否包含“utf”（定义用作UTF之一的字符集）。

如果是的话，在这种情况下，我会以不同的方式对待内容。

```
private String encodeCorrectly(InputStream is) {
    java.util.Scanner s = new java.util.Scanner(is, StandardCharsets.UTF_8.toString()).useDelimiter("\\A");
    return s.hasNext() ? s.next() : "";
} 
```

[（从这个答案对](https://stackoverflow.com/a/5445161/1920149)一个 IS 到字符串转换器的修改SO ）

这里的重要部分是使用正确的字符集。这为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-04T12:16:49.377

首先，您必须以这种方式根据 UTF-8 编码添加标头：

```
...
MimeMessage msg = new MimeMessage(session);
msg.setHeader("Content-Type", "text/html; charset=UTF-8");
msg.setHeader("Content-Transfer-Encoding", "8bit");

msg.setFrom(new InternetAddress(doConversion(from)));
msg.setRecipients(javax.mail.Message.RecipientType.TO, address);
msg.setSubject(asunto, "UTF-8");

MimeBodyPart mbp1 = new MimeBodyPart();
mbp1.setContent(text, "text/html; charset=UTF-8");
Multipart mp = new MimeMultipart();
mp.addBodyPart(mbp1);
... 
```

但是对于'from'标题，我使用以下方法来转换字符：

```
public String doConversion(String original) {
    if(original == null) return null;
    String converted = original.replaceAll("á", "\u00c3\u00a1");
    converted = converted.replaceAll("Á", "\u00c3\u0081");
    converted = converted.replaceAll("é", "\u00c3\u00a9");
    converted = converted.replaceAll("É", "\u00c3\u0089");
    converted = converted.replaceAll("í", "\u00c3\u00ad");
    converted = converted.replaceAll("Í", "\u00c3\u008d");
    converted = converted.replaceAll("ó", "\u00c3\u00b3");
    converted = converted.replaceAll("Ó", "\u00c3\u0093");
    converted = converted.replaceAll("ú", "\u00c3\u00ba");
    converted = converted.replaceAll("Ú", "\u00c3\u009a");
    converted = converted.replaceAll("ñ", "\u00c3\u00b1");
    converted = converted.replaceAll("Ñ", "\u00c3\u0091");
    converted = converted.replaceAll("€", "\u00c2\u0080");
    converted = converted.replaceAll("¿", "\u00c2\u00bf");
    converted = converted.replaceAll("ª", "\u00c2\u00aa");
    converted = converted.replaceAll("º", "\u00c2\u00b0");
    return converted;
} 
```

如果您需要包含一些其他字符，您可以在[http://www.fileformat.info/info/charset/UTF-8/list.htm](http://www.fileformat.info/info/charset/UTF-8/list.htm)看到相应的 UTF-8 十六进制编码。

# javascript - ajax asp net 控件中的javascript

> ID：13385313
> 
> 赞同：1
> 
> 时间：2012-11-14T18:50:16.000
> 
> 标签：javascript, asp.net, asp.net-ajax, custom-server-controls

这是创建 javascript 对象的函数

```
 public IEnumerable<ScriptDescriptor>
          GetScriptDescriptors()
    {
        ScriptControlDescriptor descriptor = new ScriptControlDescriptor("HierarchyPathControl.PathExplorer", this.ClientID);
        descriptor.AddProperty("some_property", "some_value");

        yield return descriptor;
    } 
```

这是 .js 文件的一部分

```
 Type.registerNamespace("HierarchyPathControl");

        HierarchyPathControl.PathExplorer = function (element) {
        HierarchyPathControl.PathExplorer.initializeBase(this, [element]);
        alert("invoked");

    }

  HierarchyPathControl.PathExplorer.prototype = {
       initialize: function () {

        HierarchyPathControl.PathExplorer.callBaseMethod(this, 'initialize');
        alert("not invoked");   

},
.............................. 
```

为什么只有当我删除此行时才会调用第二个警报：

```
 descriptor.AddProperty("some_property", "some_value"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:52:24.270

如果在页面初始化过程中出现 js 错误，请检查错误控制台。问题似乎是您没有在客户端类中定义**some_property属性。**确保在 HierarchyPathControl.PathExplorer 客户端类中具有以下 get/set 方法定义：

```
get_some_property = function() {
    return this._some_property;
},
set_some_property = function(value) {

    if (this._some_property != value) {
        this._some_property = value;
        this.raisePropertyChanged('some_property');
    }
} 
```

这里基本上**some_property**应该是您要创建的属性的名称。

# ios - Facebook OAuth 对话框无法在 iOS 6 上加载，显示“HTTP 指令太多”

> ID：13385315
> 
> 赞同：1
> 
> 时间：2012-11-14T18:50:27.723
> 
> 标签：ios, facebook, oauth

我们的应用程序中有一个奇怪的问题。

我们的应用是半原生/半 HTML iOS 应用。我们使用标准的 Facebook OAuth 对话框来允许用户使用他们的 Facebook 凭据登录我们的应用程序。然而，最近（我想可能是在升级到 iOS 6.0.1 之后，但不能确定）我们在尝试在 UIWebView 中加载指向[https://m.facebook的请求时开始收到错误“HTTP 重定向太多” .com/dialog/OAuth](https://m.facebook.com/dialog/OAuth)

奇怪的是 - 它适用于 iOS 6.0 的 iOS 模拟器，但不适用于真实设备（带有 iOS 6.0.1 的 iPhone 4S）。我无法在装有旧版 iOS（6.0 或 5.x）的设备上验证这一点

可能有人遇到过类似的问题吗？有什么办法可以克服吗？

谢谢，丹尼斯

# javascript - 在 .on() 或任何对象字面量中创建可重用的变量

> ID：13385317
> 
> 赞同：2
> 
> 时间：2012-11-14T18:50:32.147
> 
> 标签：javascript, jquery, object-literal

有时我会遇到必须*创建相同变量的情况，并在对象文字内部***一遍又一遍地**检索完全相同类型的信息，例如**`.on()`**出于纯粹的好奇心，以及必须做一个更好的方法，我来了。

**注意**我*不是*在谈论 jQuery`.data()`或任何类型的普通`window.`全局变量。我说的是在对象文字的闭包内维护的一个。

当然，其中一些变量**是实时变化**的，因此我总是将它们放在每个方法中`.on()`

一个例子：

```
$(document).on({
    focusin: function () {
        var placeHolder = $(this).attr('data-title'),
            status      = $(this).attr('data-status');
        // etc etc
    },
    focusout: function () {
        var placeHolder = $(this).attr('data-title'),
            status      = $(this).attr('data-status');
        // etc etc
    },
    mouseenter: function () {
        // same variables
    },
    mouseleave: function () { }
}, '.selector'); 
```

**有没有办法将变量存储在某个地方，并在每个事件中检索？他们需要是动态的**

```
$(document).on({
     // Basially:

     // var placeHolder; etc
     // each event gets these values

     focusin: function () {
         // now here I can simply use them
         if (placeHolder === 'blahblah') {} 
         // etc
     }
}, '.selector'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:54:27.727

有几种方法：

1.  编写您自己的函数，该函数将返回上面的 JSON；您可以遍历属性以避免重复工作。

2.  编写一个返回这些变量的函数（例如：作为 JSON），这样您每次只需要调用一个函数。

3.  编写一个函数将这些变量设置为全局属性并根据需要引用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:57:04.987

您可以使用[*事件数据*](http://api.jquery.com/event.data/)将一些静态变量传递给事件，也可以使用方法技巧来传递“动态”变量：

```
$(document).on({
    focusin: function(e) {
        var attrs = e.data.getAttributes($(this)),
            var1 = e.data.var1;

        var placeHolder = attrs.title,
            status = attrs.status;
        // ...
    },
    focusout: function(e) {
        var attrs = e.data.getAttributes($(this)),
            var1 = e.data.var1;

        var placeHolder = attrs.title,
            status = attrs.status;
        // ...
    },
    // ...
}, ".selector", {
    // static variables
    var1: "some static value",

    // dynamic "variables"
    getAttributes: function($this) {
        return {
            title: $this.data("title"),
            status: $this.data("status")
        };
    }
}); 
```

**演示：http:** [//jsfiddle.net/LHPLJ/](http://jsfiddle.net/LHPLJ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:23:43.213

为什么不简单地添加一个辅助函数来提取它呢？

```
var getData = function(elm) {
    return { 
      placeHolder : $(elm).attr('data-title'),
      status : $(elm).attr('data-status');
  };
};

$(document).on({
  focusin: function () {
    var data = getData (this);
    // do stuff with data.status etc.
  },
  //repeat... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:54:28.070

如果您始终针对同一个元素（即，如果有一个带有 class 的元素`selector`），并且如果这些变量的值在事件触发的不同时间之间不会发生变化，则可以将它们存储在相同的范围内处理程序定义：

```
var placeHolder = $('.selector').attr('data-title'),
    status      = $('.selector').attr('data-status');

$(document).on({
    focusin: function () {
        // etc etc
    },
    focusout: function () {
        // etc etc
    },
    mouseenter: function () {
        // same variables
    },
    mouseleave: function () { }
}, '.selector'); 
```

在与这些变量相同的范围内声明的函数将可以访问它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T18:58:43.567

我建议将所有内容包装在函数范围内，以便变量不是全局的。如果这些属性永远不会改变，您可以执行以下操作：

```
(function(sel){
    var placeHolder = $(sel).attr('data-title'),
        status      = $(sel).attr('data-status');

    $(document).on({
        focusin: function () {
            // etc etc
        },
        focusout: function () {
            // etc etc
        },
        mouseenter: function () {
            // same variables
        },
        mouseleave: function () { }
    }, sel);
})('.selector'); 
```

否则，您可以这样做（在现代浏览器中，IE9+）

```
(function(sel){
    var obj = {};
    Object.defineProperty(obj, 'placeHolder', {
        get:function(){return $(sel).attr('data-title');}
    });
    Object.defineProperty(obj, 'status', {
        get:function(){return $(sel).attr('data-status');}
    });

    $(document).on({
        focusin: function () {
            console.log(obj.placeHolder, obj.status);
            //etc etc
        },
        focusout: function () {
            // etc etc
        },
        mouseenter: function () {
            // same variables
        },
        mouseleave: function () { }
    }, sel);
})('.selector'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T19:14:56.317

你做的很接近正确，但最好的方法是：

```
$(document).on({
    focusin: function () {
        var el = $(this), //cache the jQ object
            placeHolder = el.data('title'),
            status = el.data('status');
        // etc etc
    }
}, '.selector'); 
```

为此目的创建了数据，不要担心尝试创建可重复使用的项目。如果您使用对象委托事件，那么可能是因为元素并不总是在页面上，在这种情况下，您需要获取每个单独事件中的变量。

最后，不要在不需要的时候尝试优化。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-14T18:52:50.693

您可以将它们保存在 window 对象中并使它们成为全局对象。

`window.yourVariable = "whatever";`

这可以满足您的要求，但肯定不是最干净的方式。如果可以，您可以考虑通过以下方式将所需数据保存到对象本身`$(element).data("key", "value")`

# java - Java 构造函数取一个数组？

> ID：13385318
> 
> 赞同：1
> 
> 时间：2012-11-14T18:50:42.857
> 
> 标签：java, constructor

我创建了一个默认构造函数，它创建了一个空的“手”。

```
 public Hand() {
    hand = new ArrayList();
  } 
```

让第二个构造函数获取一组卡片，然后添加它们的最有效方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:55:04.340

我将有一个构造函数来做这两件事。

```
public Hand(Card... cards) {
    hand = Arrays.asList(cards);
} 
```

或者 Rohit Jain 建议的 ArrayList 副本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T18:52:11.597

你可以这样做： -

```
public Hand(String[] hands) {
    hand = new ArrayList<String>(Arrays.asList(hands));
} 
```

* * *

或者，您可以遍历您的字符串数组，并将单个元素添加到您的`ArrayList`.

```
public Hand(String[] hands) {
    hand = new ArrayList<String>();

    for (String elem: hands) 
         hand.add(elem);
} 
```

PS： - 总是声明一个`Generic Type`列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:05:30.490

还有另一种选择`Collections.addAll`：

```
public Hand(Card[] cards) {
    hand = new ArrayList<Card>();
    Collections.addAll(hand, cards);
} 
```

根据文档：

> 将所有指定元素添加到指定集合。要添加的元素可以单独指定，也可以作为数组指定。此便捷方法的行为与 c.addAll(Arrays.asList(elements)) 的行为相同，但此方法在大多数实现下可能运行得更快。

# hadoop - 在 FOREACH 中计算 SUM

> ID：13385321
> 
> 赞同：1
> 
> 时间：2012-11-14T18:50:59.033
> 
> 标签：hadoop, mapreduce, apache-pig

假设我有以下

```
DATA = foreach INPUT {
   //..
   generate group, count(name) as total;
} 
```

我最终会得到一个键按名称分组的关系

```
('mike', 'someprop', 10)
('mike', 'otherprop', 3)
('doug', 'xprop', 5)
... 
```

我想得到**每个名字的前 10 名的总和**：

```
ALIAS = group DATA by name;
RESULT = foreach ALIAS {
   SORTED = ORDER DATA by total desc;
   TOP10 = LIMIT SORTED 10;

   //doesn't work! can't have GROUP inside FOREACH
   AGG = group TOP10 ALL;
   TOPTOTAL = foreach AGG generate SUM(AGG.total);

   generate group, TOPTOTAL;
} 
```

如何计算 a 中关系的值 (SUM,COUNT, ETC **)**`foreach`？目前没有办法`GROUP ALL`在 foreach 中应用 a 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:46:57.210

`SUM`只是一个以包为参数的函数，您可以通过投影来创建此包`TOP10`：

```
ALIAS = group DATA by name;
RESULT = foreach ALIAS {
   SORTED = ORDER DATA by total desc;
   TOP10 = LIMIT SORTED 10;
   generate group, SUM(TOP10.total);
} 
```

# java - JVM 在完整 gc 后偶尔锁定

> ID：13385324
> 
> 赞同：7
> 
> 时间：2012-11-14T18:51:08.987
> 
> 标签：java, jvm

最近，我们刚刚注意到我们的许多服务器偶尔突然（没有明显的逐渐降级）锁定到以下堆栈（所有其他线程都是 BLOCKED、IN_NATIVE 或 IN_VM）（在我们的代码开始处截断），使用 jstack -F 获得

```
Thread 18334: (state = IN_JAVA)
 - java.util.Calendar.updateTime() @bci=1, line=2469 (Compiled frame; information may be imprecise)
 - java.util.Calendar.getTimeInMillis() @bci=8, line=1088 (Compiled frame)
(truncated) 
```

失败似乎是在full gc后不久发生的，top -H -p显示有两个线程，一个似乎是上面的线程，另一个是gc线程或jitc，根据pstack的以下输出（不是 VMThread::run())：

```
Thread 331 (Thread 0x7f59641bc700 (LWP 16461)):
#0  0x00007f63f9ed0ef8 in SafepointSynchronize::begin() () from /usr/java/jdk1.6.0_33/jre/lib/amd64/server/libjvm.so
#1  0x00007f63f9fbab7c in VMThread::loop() () from /usr/java/jdk1.6.0_33/jre/lib/amd64/server/libjvm.so
#2  0x00007f63f9fba68e in VMThread::run() () from /usr/java/jdk1.6.0_33/jre/lib/amd64/server/libjvm.so
#3  0x00007f63f9e5e7af in java_start(Thread*) () from /usr/java/jdk1.6.0_33/jre/lib/amd64/server/libjvm.so
#4  0x00000035bb807851 in start_thread () from /lib64/libpthread.so.0
#5  0x00000035bb4e811d in clone () from /lib64/libc.so.6 
```

有谁知道为什么这可能已经开始发生？

我们在 CentOS 5.7 版和 6.3 版上使用 jdk1.6.0_33，在 24 核（12 个物理）的服务器上。

这里还有一些堆栈，我们的代码被截断了：

```
Thread 22561: (state = IN_VM)
 - java.lang.String.toLowerCase(java.util.Locale) @bci=428, line=2782 (Compiled frame; information may be imprecise)
 - java.lang.String.toLowerCase() @bci=4, line=2847 (Compiled frame)
(truncated)

Thread 22562: (state = IN_VM)
 - java.util.HashMap.put(java.lang.Object, java.lang.Object) @bci=20, line=403 (Compiled frame; information may be imprecise)
 - java.util.HashSet.add(java.lang.Object) @bci=8, line=200 (Compiled frame)
(truncated)

Thread 22558: (state = BLOCKED)
 - sun.nio.ch.EPollSelectorImpl.wakeup() @bci=6, line=173 (Compiled frame)
 - org.mortbay.io.nio.SelectorManager$SelectSet.wakeup() @bci=10, line=706 (Compiled frame)
 - org.mortbay.io.nio.SelectChannelEndPoint.updateKey() @bci=135, line=344 (Compiled frame)
 - org.mortbay.io.nio.SelectChannelEndPoint.undispatch() @bci=10, line=204 (Compiled frame)
 - org.mortbay.jetty.nio.SelectChannelConnector$ConnectorEndPoint.undispatch() @bci=54, line=382 (Compiled frame)
 - org.mortbay.io.nio.SelectChannelEndPoint.run() @bci=44, line=449 (Compiled frame)
 - org.mortbay.thread.QueuedThreadPool$PoolThread.run() @bci=25, line=534 (Compiled frame)

Thread 22557: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Compiled frame; information may be imprecise)
 - java.lang.Object.wait(long, int) @bci=58, line=443 (Compiled frame)
 - com.stumbleupon.async.Deferred.doJoin(boolean, long) @bci=244, line=1148 (Compiled frame)
 - com.stumbleupon.async.Deferred.join(long) @bci=3, line=1028 (Compiled frame)
(truncated)

Thread 20907: (state = IN_NATIVE)
 - java.net.PlainSocketImpl.socketAccept(java.net.SocketImpl) @bci=0 (Interpreted frame)
 - java.net.PlainSocketImpl.accept(java.net.SocketImpl) @bci=7, line=408 (Interpreted frame)
 - java.net.ServerSocket.implAccept(java.net.Socket) @bci=60, line=462 (Interpreted frame)
 - java.net.ServerSocket.accept() @bci=48, line=430 (Interpreted frame)
 - sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop() @bci=55, line=369 (Interpreted frame)
 - sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run() @bci=1, line=341 (Interpreted frame)
 - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)

Thread 22901: (state = IN_NATIVE)
 - sun.nio.ch.EPollArrayWrapper.epollWait(long, int, long, int) @bci=0 (Compiled frame; information may be imprecise)
 - sun.nio.ch.EPollArrayWrapper.poll(long) @bci=18, line=210 (Compiled frame)
 - sun.nio.ch.EPollSelectorImpl.doSelect(long) @bci=28, line=65 (Compiled frame)
 - sun.nio.ch.SelectorImpl.lockAndDoSelect(long) @bci=37, line=69 (Compiled frame)
 - sun.nio.ch.SelectorImpl.select(long) @bci=30, line=80 (Compiled frame)
 - net.spy.memcached.MemcachedConnection.handleIO() @bci=126, line=188 (Compiled frame)
 - net.spy.memcached.MemcachedClient.run() @bci=11, line=1591 (Compiled frame) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:26:03.597

回答我自己的问题，因为我们部分找到了问题的根源。我们的系统中有一段如下代码：

```
LinkedList<Foo> foo = getSomePotentiallyLargeList();
long someValue = someCalendar.getTimeInMillis();
for (int i = 0; i < foo.size; i++) {
    if (foo.get(i).someField < someValue) break;
} 
```

这本质上是我们代码中的一个错误，因为上面的 for 循环可能需要 n^2 时间来执行，因为 foo 是一个 LinkedList。但是，如果我们在一个线程中遇到一个长列表，它不应该锁定我们所有的线程（该线程应该已经卡了很长时间，而其他线程继续进行，jvm偶尔会暂停gc等。 ）。

我们的应用程序冻结的原因是，当它遇到 gc 时，所有 gc 线程都将阻塞，直到所有线程到达安全点，并且所有 java 线程将在到达安全点时阻塞，直到 gc 完成。似乎 JVM 以某种方式未能在 for 循环中放置一个安全点，因此它需要继续执行，可能持续数天或更长时间，直到循环完成并且可以达到安全点。

到达的最后一个安全点是在对 getTimeInMillis() 的调用中，所以这就是 jstack -F 报告那里的大致执行位置的原因。看起来这一定是一个 JVM 错误，因为据我了解，安全点应该位于执行中的每个分支中，以防止 gc 卡在一个循环线程上等待的这类问题。

不幸的是，我无法通过一个小示例在自己的桌面上重现该问题。例如，如果我运行两个线程，其中一个以上述方式执行，另一个只是分配适量的内存，gc 不会阻塞第二个线程，而第一个线程卡在一个长循环中。

最好验证确实是这种情况并隔离问题，或者更好地了解如何确保触发 gc 后快速到达安全点。不用说，我们的解决方法不是在循环中花费 n^2 时间，但是鉴于我们的输出，找到这个特定问题非常困难。不仅 gc 卡住了，而且由于 jstack 无法报告 jvm 在循环内的执行位置，因此很难在我们的代码中归零这个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T06:21:50.533

如果您每 5 分钟使用 jmxtrans 之类的工具收集一堆 VM 信息并用 Graphite 之类的工具绘制数据，它可以帮助调试此类事情。

您可能认为没有什么可辨别的，但这可能是因为您只查看一个数据点，即响应时间。收集 JVM 通过 JMX 公开的所有不同的与 GC 相关的数据点，并查看其中一个是否确实给出了警告。如果您的应用程序定期分配和释放相同数量 (x%) 的堆，它可能与获得可用堆空间的 x% 有关。您需要研究各种比例（放大和缩小）的图表，以了解应用程序的正常行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T01:27:09.413

尝试添加

> -XX:+DisableExplicitGC

切换到您的 Java 参数。人们经常在库代码中的某处遇到使用触发显式 GC

> System.gc();

这为 JVM 提供了 FULL GC 的提示，这可能会不必要地触发 FULL GC。

-XX:+DisableExplicitGC 将禁用系统调用。

# drupal - 如何在 drupal 7 中使用分类法创建下拉菜单？

> ID：13385325
> 
> 赞同：0
> 
> 时间：2012-11-14T18:51:11.220
> 
> 标签：drupal, drupal-7, taxonomy

我正在一个购物车网站上工作，我必须将“产品”添加为菜单。菜单应在鼠标悬停事件时打开，并应显示所有产品类别。我已经添加了这样的分类产品 -

-产品

--Cat-1

---Subcat-1

---Subcat-2

--Cat-2

---Subcat-1

---Subcat-2

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:29:42.780

如果是您自己管理的菜单，您可以试试[Nice Menus](http://drupal.org/project/nice_menus)

# php - Yii Assets Manager：每次通过后都会覆盖写访问权限

> ID：13385326
> 
> 赞同：0
> 
> 时间：2012-11-14T18:51:16.223
> 
> 标签：php, yii, assets

我在使用 Yii 的 Asset Manager 时遇到问题。我为我的应用程序构建了几个尝试写入文件夹的小部件。当框架尝试编写它时，同样的问题。在每次通过时，我都会收到一个拒绝复制错误。然后我将文件夹路径设置回0777，它可以工作等等......

我不确定为什么会这样。这是足够的信息来获得准确的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:56:52.067

您必须授予 apache 对 assets 文件夹的写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:53:04.397

嗯，我现在使用 Yii 有一段时间了，我尝试写入 Assets 文件夹的唯一实例是一开始我不知道它是如何工作的......

也许您应该在发布资产**之前进行所需的任何更改。**我认为这会解决你的问题。

除此之外，我认为您可以`chown`将 assets 文件夹`www-data`或任何其他用户名**apache**使用（如果您使用的是**mod_php**）。如果您不知道您是否在使用**mod_php**，那么您可能**正在**使用它。

# 3d - 为什么 Three.js 的帧率在几秒钟后会下降到小数？

> ID：13385328
> 
> 赞同：0
> 
> 时间：2012-11-14T18:51:23.283
> 
> 标签：3d, webgl, three.js

```
<script>

        var container;
        var camera, scene, renderer;
        var scale = 100, N=1000;
        var arr= [];
        var width = 720, height = 405;

         function average(v)
         {
              var items = v.length;
              var sum = 0.0;
              for (i = 0; i<items; i++)
              sum += v[i];
              return (sum/items);
            }

        start =function()
        {
        init();
        //animate();
        };      

        function init() 
        {

            container = document.getElementById("theCanvas");
            camera = new THREE.PerspectiveCamera( 45, width / height, 0.1, 10000 );
            camera.position.x = 0;
            camera.position.y = 0;
            camera.position.z = 80;
            scene = new THREE.Scene();

            renderer = new THREE.WebGLRenderer({antialias:true});

            renderer.setClearColorHex(0x000000, 1);
            renderer.setSize( width, height );

            container.appendChild( renderer.domElement );

            var geometry = new THREE.CubeGeometry( 1, 1, 1 );

            var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
            for ( var i = 0; i <= N; i++)
            {
                arr.push(new THREE.Mesh( geometry, material ));
                arr[i].position.set( (Math.random()-0.5) * scale, (Math.random()-0.5) * scale, (Math.random()-0.5) * scale ); 
                scene.add( arr[i] );

            }
            animate();
            document.getElementById('3dobjects').innerHTML = "Three.js Demo, The number of Cube Objects: " +N;
            }

        function animate() 
        {
            requestAnimationFrame( animate );
            render();
        }

        function render() 
        {   

            var t = 0;
            var t0 = (new Date()).getTime();
            var fpss = [];
            setInterval(function(){
                renderer.render(scene, camera);
                var t1 = (new Date()).getTime();
                fpss.push(1000/(t1 - t0));
                if(fpss.length>200)
                  fpss.shift();

                if(t%2==0)
                    document.getElementById('fpsout').innerHTML = "FPS coded Myself is: " +average(fpss);   
            t0 = t1;
                t++;
          },1000/60);

        } 
```

为什么 Three.js 应用程序的帧速率在几秒钟后会下降到小数？我在错误的地方调用 fps 计算吗？如果可能的话，有人可以帮助我使用基本着色器程序来渲染没有纹理但颜色的简单立方体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:14:24.683

我通过调整 stats.js 并从中访问 FPS 找到了解决方案。

# sql - 消除外部连接上的重复行

> ID：13385330
> 
> 赞同：0
> 
> 时间：2012-11-14T18:51:45.657
> 
> 标签：sql, oracle, left-join, duplicate-removal

我正在对我们的 Oracle 数据库进行查询。

目标是返回以下列 -

1.  文档编号
2.  文件创建日期
3.  组织机构代码
4.  文件状态
5.  总金额

我遇到的问题是组织代码。可以有一个包含多个组织代码的文档 ID。我只想要 1 个实例 - 我不关心其余的（如果它们存在）

这是我目前拥有的 -

```
 SELECT * FROM (SELECT DISTINCT (K_HDR.DOC_HDR_ID), 
        K_HDR.CRTE_DT, 
        FS_EXT.VAL AS ORG_CODE,
        REQ.REQS_STAT_CD,
        FS_DOC.FDOC_TOTAL_AMT
    FROM PUR_REQS_T REQ, 
        KREW_DOC_HDR_T K_HDR, 
        FS_DOC_HEADER_T FS_DOC,
        KREW_DOC_HDR_EXT_T FS_EXT
    WHERE REQ.FDOC_NBR = K_HDR.DOC_HDR_ID AND
        FS_DOC.FDOC_NBR = REQ.FDOC_NBR AND
        REQ.FDOC_NBR = FS_EXT.DOC_HDR_ID(+) AND
        FS_EXT.KEY_CD(+)= 'organizationCode' AND
        (K_HDR.CRTE_DT BETWEEN TO_DATE('2011-10-01 00:00:00', 'YYYY-MM-DD HH24:MI:SS') 
        AND 
         TO_DATE('2012-09-30 23:59:59', 'YYYY-MM-DD HH24:MI:SS')))
    FINAL_SEARCH ORDER BY FINAL_SEARCH.CRTE_DT; 
```

以下查询返回 14,933 行。我应该得到的正确行数是 14,789。

罪魁祸首是组织代码。例如，当我查看结果集时，我看到以下内容 -

```
 DOC_ID   CRTE_DT      ORG_CD    STAT    TOTAL
 .
 .
 .
 496256    5-OCT-11     0        CLOS    2779.89
 496258    5-OCT-11     8050     CLOS    1737.5
 496258    5-OCT-11     8000     CLOS    1737.5
 .
 .
 . 
```

如何摆脱 FS_EXT 表中令人讨厌的 496258 的第二个实例？（显然我需要摆脱相同类型重复值的其他实例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:56:57.733

您可以将整个东西包装在另一个`SELECT`中，它使用 a`GROUP BY`仅获取`MIN`组织代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:41:05.260

所以 - 我最终使用 FS_EXT 表中的另一列来进一步过滤到组织代码的第一个实例。

如果我正在查看经过过滤以仅显示 Document Id = 496258 条目的列，这就是 FS_EXT 表的样子。
（请注意，任何给定的 doc id 可能有不同的行数）

```
 DOC_HDR_EXT_ID     DOC_HDR_ID     KEY_CD                      VAL
 13318096           496258         documentDescription         misc items
 13318098           496258         organizationDocNumber       (null)
 13318099           496258         statusDescription           Closed
 13318101           496258         chartAndOrgCodeForResult    KS-1234
 13318102           496258         vendorName                  APPLE COMPUTERS
 13318103
 .
 .
 .
 .
 .
 13318115           496258         organizationCode            8000
 13318116
 .
 .
 .
 1338118            496258         organizationCode            8050 
```

这是我的新查询，它绕过了使用连接操作。

请注意，我改用了 SUBQUERY。为了获得 OrganizationCode 的第一个实例，我在 DOC_HDR_EXT_ID 列上使用 MIN 运算符，然后使用该 ID 检索 organizationCode VAL 并将其传递回主 QUERY。

```
 SELECT * FROM ( SELECT DISTINCT (K_HDR.DOC_HDR_ID), 
         K_HDR.CRTE_DT, 
         (SELECT KS_EXT.VAL AS ORG_CODE 
              FROM KREW_DOC_HDR_EXT_T KS_EXT 
              WHERE KS_EXT.DOC_HDR_EXT_ID =(
              SELECT MIN(DOC_HDR_EXT_ID) 
              FROM KREW_DOC_HDR_EXT_T FS_EXT_INNER
              WHERE FS_EXT_INNER.DOC_HDR_ID = K_HDR.DOC_HDR_ID 
              AND FS_EXT_INNER.KEY_CD = 'organizationCode')) AS ORG_CODE,
         REQ.REQS_STAT_CD,
         FS_DOC.FDOC_TOTAL_AMT
         FROM PUR_REQS_T REQ, 
         KREW_DOC_HDR_T K_HDR, 
         FS_DOC_HEADER_T FS_DOC,
         KREW_DOC_HDR_EXT_T FS_EXT
         WHERE REQ.FDOC_NBR = K_HDR.DOC_HDR_ID AND
               FS_DOC.FDOC_NBR = REQ.FDOC_NBR AND
               REQ.FDOC_NBR = FS_EXT.DOC_HDR_ID(+) AND
               FS_EXT.KEY_CD(+)= 'organizationCode' AND
               (K_HDR.CRTE_DT BETWEEN TO_DATE('2011-10-01 00:00:00', 'YYYY-MM-DD HH24:MI:SS') AND TO_DATE('2012-09-30 23:59:59', 'YYYY-MM-DD HH24:MI:SS')))
     FINAL_SEARCH ORDER BY FINAL_SEARCH.CRTE_DT; 
```

感谢您的推荐@Alex Poole 和@StilesCrisis。你让我对我解决这个问题的方法有了不同的想法，我的解决方案整合了你的两个建议。来自 Stiles 的 MIN 方法，并根据 Alex Poole 过滤另一列。

# javascript - 使用 jQuery 编程波纹淡入淡出效果的最佳方法

> ID：13385331
> 
> 赞同：0
> 
> 时间：2012-11-14T18:51:50.123
> 
> 标签：javascript, jquery, css, delay, fadein

我对 jQuery 很陌生，我正在练习淡入淡出，从一张图像开始，然后继续到下一张图像，依此类推。我已经编写了一段代码（如下），但想知道是否有更简单或更优雅的方式来编写它？我尝试了 each() 函数，但似乎没有用：

```
 <script type="text/javascript" src="jquery/jquery-1.8.2 .min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    //alert($("div img").length);
    $("div img").css("display","none");
    var delayAmt=0;
    for(var x=0;x<$("div img").length;x++){
        $("div img:eq("+x+")").delay(delayAmt).fadeIn(1000);
        delayAmt+=250;
    }
});
</script>

</head>

<body>
<h1>Ripple fade in.</h1>
<div>
<img src="images/hot.jpg" id="target0">
<img src="images/hot.jpg" id="target1">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:14:31.073

HTML：

```
<body>
<h1>Ripple fade in.</h1>
<div id="images">
<img src="images/hot.jpg" id="target0">
<img src="images/hot.jpg" id="target1">
</div>
</body>
</html>​​​ 
```

jQuery：

```
$(document).ready(function(){
   var delay=0;
   $('#images').children('img').each(function () {
      $(this).css("display","none");
      $(this).delay(delay).fadeIn(1800);
      delay += 1000;
   }); 
}); 
```

jsFiddle 链接在这里：http: [//jsfiddle.net/salih0vicX/6GZt6/](http://jsfiddle.net/salih0vicX/6GZt6/)

# javascript - 在 Firefox 中将 Uint8ClampedArray 设置为 ImageData 非常慢

> ID：13385335
> 
> 赞同：8
> 
> 时间：2012-11-14T18:52:09.740
> 
> 标签：javascript, html, gwt

我正在运行以下代码：

```
ImageData imagedata = context.getImageData(0, 0, width, height);
Uint8ClampedArray pixelArray;
...

imagedata.data.set(pixelArray); 
```

该代码在 Chrome 中运行速度很快，但在 Firefox 中运行速度很慢。有没有更快的方法将 Uint8ClampedArray 写入 ImageData？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T07:27:17.723

将 Uint8ClampedArray 写入 imageData 的最快方法是写入不是首先由 getImageData 获得的 Uint8ClampedArray。**context.getImageData 慢得离谱。**我已经[对 jsPerf 进行了测试，](http://jsperf.com/getting-and-putting-imagedata)它演示了您发布的代码中时间的去向。第一个测试将现有数组写入 imageData，而第二个测试从现有 imageData 读取。第二个测试占用了超过 99% 的时间。

所以你能对它做点啥？

不要从 context.getImageData 创建 Uint8ClampedArray，而是尝试通过 .getImageData 创建它`new Uint8ClampedArray(width*height*channels)`。或者，如果您希望多次写入 imageData，但您可以只读取一次，缓存 Uint8ClampedArray 并且不要从 imageData 返回的任何内容中重新创建它。

几周前，我自己也遇到了这个问题。实际上，我最终重做了一些程序，以避免从上下文中读取。尽管 getImageData 在 Chrome 中要快得多，但当我尝试每帧运行它时，它对浏览器的帧速率仍然有很小的影响。我已经在[dropbox](https://dl.dropboxusercontent.com/u/138485812/editabled/index.html)上完成了这个项目，并且 JS 没有被混淆，所以如果你想看看其他人对这个问题做了什么，你可以检查它。

希望有帮助！

# python - 分发/distutils 指定 Python 版本

> ID：13385337
> 
> 赞同：5
> 
> 时间：2012-11-14T18:52:09.560
> 
> 标签：python, distribution, setuptools, distribute

有点跟进[这个](https://stackoverflow.com/q/13379483/675646)...... :)

我的项目仅限 Python 3，我的问题基本上是我如何告诉 distutils/distribute/whoever 这个包仅限 Python 3？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T18:59:52.250

不确定是否有一些特殊设置，但这在 setup.py 的开头可能会有所帮助：

```
import sys
if sys.version_info.major < 3:
    print("I'm only for 3, please upgrade")
    sys.exit(1) 
```

# javascript - 为什么字符串有时会在 javascript 中变为数字？

> ID：13385342
> 
> 赞同：1
> 
> 时间：2012-11-14T18:52:24.123
> 
> 标签：javascript

我有这个代码：

```
function getSessionGUID() {
   return (S4()+S4());
}

function S4() {
   return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
} 
```

它显然返回一个字符串，但如果你多次运行它，你会注意到它有时会返回无穷大。

```
for (var i = 0; i < 100000; i++){ if(getSessionGUID() == Infinity) console.log("INFINITY"); }
871 x INFINITY 
```

然后我注意到，如果您删除 |0，它可以解决问题：

```
function S4() {
   return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
} 
```

结果：

```
for (var i = 0; i < 100000; i++){ if(getSessionGUID() == Infinity) console.log("INFINITY"); }
undefined 
```

为什么会这样？在这两种情况下，值都会更改为字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:14:54.720

您正在生成十六进制字符串。

当您使用`==`运算符时，解释器会尝试将两个值强制转换为相同的数据类型。将字符串与 进行比较时`Infinity`，该中间数据类型为`Number`。当这些字符串包含字母“e”（一个有效的十六进制数字）并且它们被强制转换为 a`Number`时，javascript 将其解释为 10^x ，最终成为一个巨大的数字。

[`Number`javascript 中的 s 为 8 个字节](http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference)，因此大于`1.7976931348623157e308`等于`Infinity`.

解决此问题的最简单方法是将您更改`==`为，`===`这样字符串就不会被强制转换为数字。

```
if(getSessionGUID() === Infinity) 
```

[http://jsfiddle.net/Uhkxm/](http://jsfiddle.net/Uhkxm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:54:16.730

JavaScript 是动态类型的。没有整数，浮点数。字符串数据类型。所有这些转换都是根据上下文在内部完成的。

+ 可以是字符串连接或添加，具体取决于上下文。

编辑：道歉。太晚了。但在与无穷大进行比较时，是 == 执行转换为数字。在某些情况下，您生成了有效数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T19:06:12.970

我想我想通了。除了我的测试代码外，所有这些实际上都没有错。

如果你使用这个字符串“11e51354”，你可以让它断言为真，因为 Javascript 会检查所有可以使它等于真的类型。

```
"11e51354" == Infinity # True 
```

正确的测试是：

```
"11e51354" === Infinity # False 
```

它仍然是一个字符串，但不知何故，当我通过 GET 请求发送它时，它被转换为一个给出 Infinity 的数字类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T19:11:09.993

这个测试揭示了答案：

```
for (var i = 0; i < 100000; i++){
  var x=getSessionGUID();
  if(x == Infinity) console.log(x); }
} 
```

它记录像`61e93284`或`1413e390`

这些值是有效数字，它们对于 Number 类型来说太大了，所以当它们被解释为数字时，它们会被强制转换为 Infinity。

如果您在测试中替换`==`为`===`，则不会发生转换，也不会记录任何内容。转换是由`==`操作员引起的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T18:57:15.537

如果你真的需要一个数字类型，你总是可以使用以下。
`console.log(Number("1"));`

# javascript - 内存中的 Javascript 类初始化和 jQuery DOM

> ID：13385343
> 
> 赞同：1
> 
> 时间：2012-11-14T18:52:25.537
> 
> 标签：javascript, performance, memory-leaks

这是之间的最佳方式：

```
var myClass = function() {
    this.myContainer = function(){ return $(".container");}
    this.mySubContainer = function(){ return this.myContainer().find(".sub"); }
} 
```

和

```
var myClass = function() {
    this.myContainer = $(".container");
    this.mySubContainer = this.myContainer.find(".sub");
} 
```

有什么具体的区别吗？

当我看到我的网页有足够的 javascript（我的大约 150KB + libs）占用超过 300-400MB 的 RAM 时，就出现了内存问题。我试图找出问题所在，但我不知道这是否可能是其中之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:59:50.960

```
function myClass{
    this.myContainer = function(){ return $(".container");}
    this.mySubContainer = function(){ return this.myContainer().find(".sub"); }
} 
```

在这里，您需要将其命名为类似的名称，这意味着 jquery 将在您使用该函数的任何时候`myClassInstance.myContainer()`搜索元素。`.container`另外，每当您创建类的新实例时，它都会创建 2 个额外的闭包。这将需要一些额外的内存。

```
function myClass{
    this.myContainer = $(".container");
    this.mySubContainer = this.myContainer.find(".sub");
} 
```

在这里，您将`myContainer`指向一个已经包含指向 DOM 节点的所有链接的对象。jQuery 不会在你使用任何时候搜索 DOM`myClassInstance.myContainer`

因此，如果您不想减慢应用程序的速度，第二种方法会更好。但是，如果您的 DOM 经常被修改，第一种方法可能会很有用。但我不相信您对其进行如此频繁的修改，以至于您可能需要使用第二种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:56:44.707

如果您尝试分配一个变量，那么第二种方法看起来更干净..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:56:49.467

是的，它们是不同的。

**型号 1：**

在第一个模型中，`myContainer`是一个函数变量。它不包含 jQuery 对象。您不能在对象上调用任何 jQuery 方法。要实际获取 jQuery 对象，您必须说

`var obj = this.myContainer()`或者`this.myContainer.call()`

**型号 2：**

第二个模型存储实际的 jQuery 对象。

尝试`this.myContainer`在两种模型中发出警报，你会看到差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:00:23.420

是的，这是不同的。修复语法错误后：

> function myClass(){... // 括号

**第一**

当您创建一个新对象`var obj = new myClass()`时，您正在创建两个函数，并且在您调用它之前不会返回 jquery 对象

```
var container = obj.myContainer(); 
```

**第二**

一旦对象被初始化，dom就会被访问并且你的对象被缓存以备后用；

```
var container = obj.myContainer; 
```

# android - 如何使用 android 和 SensorSimulator 获取传感器值并将它们存储在数据库中

> ID：13385345
> 
> 赞同：1
> 
> 时间：2012-11-14T18:52:37.100
> 
> 标签：android, android-emulator, android-sensors

我正在开发一个从 android 手机获取传感器值的 android 应用程序，以便通过将这些值存储在数据库中的 Web 服务来使用这些值。我没有用于测试传感器值的真实设备，所以我使用了传感器模拟器 [http://code.google.com/p/openintents/wiki/SensorSimulator][1] 现在的问题是每次我运行活动我收到错误，这是活动的代码（我使用的是 API 15 Google API 平台：4.0.3）

```
import org.openintents.sensorsimulator.hardware.Sensor;
import org.openintents.sensorsimulator.hardware.SensorEvent;
import org.openintents.sensorsimulator.hardware.SensorEventListener;
import org.openintents.sensorsimulator.hardware.SensorManagerSimulator;

public class SimulationActivity extends Activity implements SensorEventListener {

private SensorManagerSimulator mSensorManager;
private Sensor mTemperature;
private TextView mTemperatureLabel;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mTemperatureLabel = (TextView) findViewById(R.id.temperature);

    mSensorManager = SensorManagerSimulator.getSystemService(this,SENSOR_SERVICE);
    mSensorManager.connectSimulator();

}

@Override
protected void onResume() {
    super.onResume();
    mSensorManager.registerListener(this,
            mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_FASTEST);
    mSensorManager.registerListener(this,
            mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD),
            SensorManager.SENSOR_DELAY_FASTEST);
    mSensorManager.registerListener(this,
            mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION),
            SensorManager.SENSOR_DELAY_FASTEST);
    mSensorManager.registerListener(this,
            mSensorManager.getDefaultSensor(Sensor.TYPE_TEMPERATURE),
            SensorManager.SENSOR_DELAY_FASTEST);
}

@Override
protected void onStop() {
    mSensorManager.unregisterListener(this);
    super.onStop();
}

public void onAccuracyChanged(Sensor sensor, int accuracy) {
}

public void onSensorChanged(SensorEvent event) {

    switch (event.type) {
    case Sensor.TYPE_ORIENTATION: {
        Log.i("Sensor changed ", " Orientation ");
        mTemperatureLabel.setText("orientation");

    }
        break;
    case Sensor.TYPE_LIGHT: {
        Log.i("Sensor changed ", " light ");
        mTemperatureLabel.setText("light");
    }
        break;
    case Sensor.TYPE_TEMPERATURE: {
        Log.i("Sensor changed ", " temperature ");
        mTemperatureLabel.setText("temperature");

    }
        break;
    case Sensor.TYPE_PRESSURE: {
        Log.i("Sensor changed ", " pressure ");
        mTemperatureLabel.setText("pressure ");

    }
        break;
    }
} 
} 
```

这是错误消息

```
11-14 18:49:57.123: E/AndroidRuntime(4351): FATAL EXCEPTION: main
11-14 18:49:57.123: E/AndroidRuntime(4351): java.lang.RuntimeException: Unable to instantiate      activity ComponentInfo{com.tunisietelecom.android/com.tunisietelecom.android.SimulationActivity}: java.lang.ClassNotFoundException: com.tunisietelecom.android.SimulationActivity
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.os.Looper.loop(Looper.java:137)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at java.lang.reflect.Method.invokeNative(Native Method)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at java.lang.reflect.Method.invoke(Method.java:511)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at dalvik.system.NativeStart.main(Native Method)
11-14 18:49:57.123: E/AndroidRuntime(4351): Caused by: java.lang.ClassNotFoundException: com.tunisietelecom.android.SimulationActivity
11-14 18:49:57.123: E/AndroidRuntime(4351):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-14 18:49:57.123: E/AndroidRuntime(4351):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
11-14 18:49:57.123: E/AndroidRuntime(4351):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-13T11:08:50.593

我解决了这个问题。将库添加到类路径时，该库不会导出到手机。您需要转到 Proyect Properties -> Java Build Path -> Order and Export 并“勾选”您需要导出到手机的库。如果你不这样做，图书馆就不会在手机上，Android 也找不到它！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:39:58.287

> 引起：java.lang.ClassNotFoundException：com.tunisietelecom.android.SimulationActivity

您是否在清单文件中声明了您的活动？

# c++ - 使用 std::sort 对集合进行排序

> ID：13385348
> 
> 赞同：13
> 
> 时间：2012-11-14T18:52:50.173
> 
> 标签：c++, stl, set

我想知道我们是否可以对预先创建的集合进行排序。当我第一次创建集合 s_p2 时，我使用不同的元素 point.getLength() 进行排序。但在用户输入后，我想根据 x 值 point.getX() 对项目进行排序。我该怎么做？

似乎 set 容器没有排序功能。我被建议使用矢量。但是集合只能存储独特的元素。

Q1：如何根据条件对集合进行排序

Q2：如果 set 无法做到这一点，那么哪个 STL 容器是最佳选择，我如何对容器中的元素进行排序。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T18:57:41.380

你不能诉诸 a `set`，它如何排序是特定类型的一部分`set`。一个给定`set`的有一个固定的集合顺序，不能改变。

`set`您可以相对容易地使用相同的数据创建一个新的。`set`只需根据新标准创建一个新的排序。

如果您想`set`在同一代码中使用这两个 s，则必须抽象对底层`set`.

现在，如果您正在执行罕见的读取和修改，则使用`vector`手动排序的 a 通常是一个更好的主意。您可以使用`std::unique`-`erase`成语删除重复项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-14T18:54:33.503

`std::set`以排序方式存储其成员。`.begin()`如果您从到遍历集合`.end()`，您将获得一个排序的项目列表。

如果您不喜欢默认的排序条件，您可以提供第二个模板参数`std::set<>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-19T18:19:00.137

您可以拥有两套并使它们保持同步或将一套复制到另一套。

```
#include <iostream>
#include <set>

using namespace std;

struct AB
{
   AB(int a,int b) : _a(a),_b(b) {}

   int _a;
   int _b;
};

struct byA
{
    bool operator () (const AB& lhs, const AB& rhs)
    {
          return lhs._a <= rhs._a;
    }
}; 

struct byB
{
    bool operator () (const AB& lhs, const AB& rhs)
    {
       return lhs._b <= rhs._b;
    }
}; 

typedef set<AB,byA> ByA;
typedef set<AB,byB> ByB;
typedef ByA::const_iterator ByAIt;
typedef ByB::const_iterator ByBIt;

void getByB(const ByA &sA,ByB &sB)
{
   for(ByAIt iter=sA.begin(); iter!=sA.end();++iter) {
      const AB &ab=*iter;
      sB.insert(ab);
   }
}

int main(int argc, const char **argv)
{
   ByA sA;
   sA.insert(AB(3,6));
   sA.insert(AB(1,8));
   sA.insert(AB(2,7));

   ByB sB;
   getByB(sA,sB);

   cout << "ByA:" << endl;
   for(ByAIt iter=sA.begin(); iter!=sA.end();++iter) {
      const AB &ab=*iter;
      cout << ab._a << "," << ab._b << " ";
   }
   cout << endl << endl;

   cout << "ByB:" << endl;
   for(ByBIt iter=sB.begin(); iter!=sB.end();++iter) {
      const AB &ab=*iter;
      cout << ab._a << "," << ab._b << " ";
   }
   cout << endl;
   return 0;
} 
```

程序返回：ByA 1,8 2,7 3,6

由B：3,6 2,7 1,8

# c# - 回发后如何在 DataList 中保持 CheckBox 选中状态？

> ID：13385352
> 
> 赞同：0
> 
> 时间：2012-11-14T18:53:27.497
> 
> 标签：c#, asp.net, checkbox, datalist, autopostback

我正在为项目数据库创建一个非常简单的“标签云”功能。我希望用户能够检查各种标签，然后在复选框上自动回发，显示具有这些标签的关联项目。

它有效，但回发后复选框正在重置。我希望复选框保持选中（或未选中，视情况而定），以便用户可以选择多个标签。

我已经搜索并看到有人说将数据绑定事件放在 if(!isPostBack) 中。我已经尝试过了，但这似乎并不重要。

asp代码：

```
<asp:DataList ID="TagDataList" runat="server" OnDataBinding="databindthesucker" DataKeyField="TagName">
                <ItemTemplate>
                    <asp:CheckBox AutoPostBack="true" ID="TagCheckbox" runat="server" Text='<%#Eval ("dZTagName") %>' />
                    <asp:HiddenField ID="TagNameHidden" runat="server" Value='<%#Eval ("dZTagName") %>'/><br />
                </ItemTemplate>
                </asp:DataList>

<asp:DataList ID="ProjectDataList" runat="server" DataKeyField="projectID">
                <ItemTemplate>
                    <asp:HyperLink ID="ProjectLink" runat="server" NavigateUrl='<%# "/Project/Default.aspx?PID=" + Eval ("projectID") %>' Text='<%# Eval ("projectID") + ": " + Eval ("projectName") %>'> </asp:HyperLink><br />

                </ItemTemplate>
                </asp:DataList> 
```

然后是cs...

```
protected void Page_Load(object sender, EventArgs e)
    {

        displaytags(sender, e);
     }

    protected void displaytags(object sender, EventArgs e)
    {
        var qrygettags = (from t in db.TagTables
                         select new { t.TagName }).Distinct().ToList();

        TagDataList.DataSource = qrygettags;
        TagDataList.DataBind();
        CheckBox TagCheckbox = (CheckBox)TagDataList.Items[0].FindControl("TagCheckbox");

    }

    protected void databindthesucker(object sender, EventArgs e)
    {
            foreach (DataListItem item in TagDataList.Items)
            {
                if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
                {
                    CheckBox TagCheckbox = (CheckBox)item.FindControl("TagCheckbox");
                    HiddenField TagNameHidden = (HiddenField)item.FindControl("TagNameHidden");
                    string Tagstring = TagNameHidden.Value.ToString();

                    if (TagCheckbox.Checked)
                    {
                        var qrygetprojects = (from p in db.projects
                                              join pt in db.TagTables on p.projectID equals pt.projectID
                                              where pt.TagName == Tagstring
                                              select new
                                              {
                                                  pt.projectID,
                                                  p.projectName
                                              }).ToList();

                        ProjectDataList.DataSource = qrygetprojects;
                        ProjectDataList.DataBind();

                    }

                }
            }

    } 
```

有任何想法吗？

# publish-subscribe - pubsubhubbub 和基于消息的系统的速度比较

> ID：13385353
> 
> 赞同：0
> 
> 时间：2012-11-14T18:53:28.137
> 
> 标签：publish-subscribe, amqp, websub

**将基于消息的**异步发布/订阅系统与**PubsubHubbub** （同步）的性能进行比较，哪种应用程序是公平的选择？

我为 pubsubhubbub 开发了一个基于原子的应用程序，但该应用程序不适合使用其他选项进行开发。我担心这两个系统不在同一个地方客观比较基于 Pubsubbhubub 的应用程序和基于消息（AMQP）的应用程序的速度？关于如何减轻这种情况的任何见解？

# git - git svn 同步失败

> ID：13385355
> 
> 赞同：1
> 
> 时间：2012-11-14T18:53:41.170
> 
> 标签：git, svn, git-svn

我正在关注这个线程 [将现有的 git 存储库推送到 SVN](https://stackoverflow.com/questions/661018/pushing-an-existing-git-repository-to-svn) 以将 git 存储库同步到 svn。但是我被困在 git svn fetch

```
git svn fetch
RA layer request failed: REPORT of '/svnrepos/my_git/!svn/vcc/default': Could not read chunk size: Secure connection truncated (https://my.svn.net) at /usr/libexec/git-core/git-svn line 5061 
```

任何人都知道如何解决这个问题......

[附加信息]：我在公司代理后面，但是没有代理可以访问 svn url。无论如何，我已经尝试过设置和取消设置 http-proxy-host 和 http-proxy-host、http-proxy-port、http-proxy-username、http-proxy-password，但这些都不起作用。

[附加信息2] 我可以同时使用“svn co”和“git svn clone”来检查svn url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:30:40.313

对于遇到同样问题的人，我的解决方案是在我执行 git svn fetch 之前将 --no-minimum-url 传递给 git svn init

```
git svn init <svn.url> -s --no-minimize-url
git svn fetch 
```

事实证明，由于 svn 服务器不是由我们管理的，所以 svn root 中的一些信息是故意对我们隐藏的。因此，如果 git svn 客户端尝试从 svn root 读取该信息，它将失败。--no-minimize-url 将阻止 git svn 客户端去那里。

# c# - 便携式 C# 应用程序中的 Mongodb

> ID：13385356
> 
> 赞同：15
> 
> 时间：2012-11-14T18:54:02.220
> 
> 标签：c#, mongodb

我正在开发一个应该是可移植的应用程序，并且我正在使用 mongodb。

便携是指我的应用程序有一个文件夹，其中包含所有：dll、exes、mongo 文件、mongo 数据库。然后使用这个文件夹，我可以在任何机器上运行我的应用程序。

然后我需要知道：

*   是否有一些库允许我在应用程序启动时运行 mongod 进程并在应用程序结束时结束进程？

*   是否存在做这些事情的好习惯？

欢迎提供建议并提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T19:49:05.910

根据 MongoDb 安装说明，它应该非常简单。

Mongodb 作为一个等待连接的控制台应用程序启动，因此当您的应用程序启动时，您应该运行 mongodb [hidden](https://stackoverflow.com/a/836436/266474)。我们总是假设所有 mongodb 文件都与您的应用程序文件一起就位，并且数据库文件位于正确的目录中）。

当您的应用程序终止时，您应该终止该进程。

哟应该在这个例子中设置正确的路径：

```
//starting the mongod server (when app starts)
ProcessStartInfo start = new ProcessStartInfo();     
start.FileName = dir + @"\mongod.exe";
start.WindowStyle = ProcessWindowStyle.Hidden;

start.Arguments = "--dbpath d:\test\mongodb\data";

Process mongod = Process.Start(start);

//stopping the mongod server (when app is closing)
mongod.Kill(); 
```

[您可以在此处](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/)查看有关 mongod 配置和运行的更多信息

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-15T15:23:19.050

我需要做同样的事情，我的出发点是 Salvador Sarpi 的回答。但是，我发现有几件事需要添加到他的示例中。

首先，您需要将 ProcessStartInfo 对象的 UseShellExecute 设置为 false。否则，当进程开始询问用户是否要运行它时，您可能会收到安全警告。我不认为这是需要的。

其次，您需要在终止进程之前对 MongoServer 对象调用 Shutdown。如果我在终止进程之前没有调用 Shutdown 方法，我遇到了一个问题，它锁定了数据库并要求修复它。[有关修复的详细信息，请参见此处](http://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/)

我的最终代码是不同的，但对于这个示例，我使用 Salvador 的代码作为参考的基础。

```
//starting the mongod server (when app starts)
ProcessStartInfo start = new ProcessStartInfo();     
start.FileName = dir + @"\mongod.exe";
start.WindowStyle = ProcessWindowStyle.Hidden;
// set UseShellExecute to false
start.UseShellExecute = false;

//@"" prevents need for backslashes
start.Arguments = @"--dbpath d:\test\mongodb\data";

Process mongod = Process.Start(start);

// Mongo CSharp Driver Code (see Mongo docs)
MongoClient client = new MongoClient();
MongoServer server = client.GetServer();
MongoDatabase database = server.GetDatabase("Database_Name_Here");

// Doing awesome stuff here ...

// Shutdown Server when done.
server.Shutdown();

//stopping the mongod server (when app is closing)
mongod.Kill(); 
```

# c++ - C ++：NetBeans在创建标头时生成的一些行代码

> ID：13385360
> 
> 赞同：1
> 
> 时间：2012-11-14T18:54:10.530
> 
> 标签：c++, netbeans, header

当我在 Microsoft Visual Studio 中创建头文件时，它只是一个空白文件，我经常添加一些函数或类的原型等......

当我从 Netbean 创建头文件时。它通常具有这种结构。（假设我的头文件是示例）：

```
#ifndef EXAMPLE_H
#define EXAMPLE_H
// put code here
#endif 
```

请告诉我，上面那一堆代码的含义。如果我删除这个，有什么问题吗？我觉得很奇怪，因为 VS 不会生成这个。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:55:28.030

这些称为包含防护，当您多次包含同一个文件时，它们可以防止多个定义错误。即使您不这样做，它们也不会伤害任何人，因此您不妨将它们留在里面。

它是如何工作的，它检查是否`EXAMPLE_H`定义了宏。如果是，它会忽略整个文件。如果不是，则定义它并保留该文件。这样，下次该文件出现时，内容就会被忽略。

如果您有两个包含相同标头的不同标头，通常会发生这种情况，例如：

啊

```
#ifndef A_H
#define A_H
struct Foo {};
#endif 
```

bh

```
#include "a.h"
#ifndef B_H
#define B_H
struct Bar
{
    Foo x;
};
#endif 
```

ch

```
#include "a.h"
#ifndef C_H
#define C_H
struct Baz
{
    Foo f;
};
#endif 
```

然后你创建 stuff.cpp

```
#include "b.h"
#include "c.h"
Bar y;
Baz z; 
```

预处理后的 stuff.cpp 将有

```
struct Foo {};

struct Bar
{
    Foo x;
};
struct Baz
{
    Foo f;
};
Bar y;
Baz z; 
```

而不是（不包括警卫）

```
struct Foo {};
struct Bar
{
    Foo x;
};

struct Foo {};
struct Baz
{
    Foo f;
};
Bar y 
```

这会给你一个关于`Foo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:56:15.673

这些行确保文件只包含一次。它们可以防止在多个文件中包含 .h 时发生的链接错误。

# python - 如何获取页面访问令牌

> ID：13385380
> 
> 赞同：0
> 
> 时间：2012-11-14T18:54:56.957
> 
> 标签：python, django, facebook, facebook-graph-api

我在 facebook 中创建应用程序并在我的个人资料中创建页面。在“选择您的应用程序如何与 Facebook 集成”部分中，我没有选择任何选项，因为我只想将文本发布到 Facebook 页面（也许这是问题？）。我有这个代码：

```
FACEBOOK_APP_ID = 'myappid'
FACEBOOK_APP_SECRET = 'myappsecret'
FACEBOOK_PROFILE_ID = 'myprofileid'

oauth_args = dict(client_id     = FACEBOOK_APP_ID,
                  client_secret = FACEBOOK_APP_SECRET,
                  scope         = 'publish_stream',
                  grant_type    = 'client_credentials'
                  )

oauth_response = urllib.urlopen('https://graph.facebook.com/oauth/access_token?' + urllib.urlencode(oauth_args)).read() 
```

oauth_response 看起来不错

但是当我运行时：

```
resp = urllib.urlopen('https://graph.facebook.com/me/accounts?'+oauth_response).read() 
```

我得到错误：

```
{"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}} 
```

我究竟做错了什么？例如，当我单击我的网站（Django）上的按钮时，我想在页面墙上发布一些文本。

更新：

好的，我在 json 中获取页面数据。我解析它并得到page_access_token，但是当我调用它时：

```
attach = {
  "name": 'Hello world',
  "link": 'http://linktosite',
  "caption": 'test post',
  "description": 'some test'
}

facebook_graph = facebook.GraphAPI(page_access_token)
try:
    response = facebook_graph.put_wall_post('', attachment=attach)
except facebook.GraphAPIError as e:
    print e 
```

我收到错误：“目标用户尚未授权此操作”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:27:08.027

这个问题基本上是在问同样的问题，答案似乎就是你要找的：[（OAuthException - #2500）必须使用主动访问令牌来查询当前用户的信息](https://stackoverflow.com/questions/10096261/oauthexception-2500-an-active-access-token-must-be-used-to-query-informatio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T22:40:07.183

如果 page_access_token 是正确的，我猜您（页面管理员）尚未授予您的 facebook 应用程序向 facebook 页面发布消息的权限。

检查客户端的 facebook 登录功能，是否要求足够的权限，范围选项应为 'mange_pages publish_stream photo_upload...' 取决于您的要求，而不仅仅是 'mange_pages'

# ruby-on-rails - Rails 3 社交网络应用

> ID：13385383
> 
> 赞同：0
> 
> 时间：2012-11-14T18:54:58.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在弄清楚如何在 Rails 中构建一个社交网络类型的网站。在我的网站中，我有一个用户模型。用户可以添加照片、视频、短信、事件等。所有这些类型的更新都通过与模型更新的多态关联串在一起。

例如，现在某个用户关注了 10 个其他用户。创建该特定用户关注的用户的所有更新的概述的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:41:01.767

这篇文章可能会有所帮助。它将使用模型的所有活动保存在表格中，然后简单地利用它们来创建活动流。

[Ruby on Rails 最近的活动](https://stackoverflow.com/questions/1277869/recent-activities-in-ruby-on-rails)

这颗宝石也可能有一些用处 - 看起来它在很大程度上为您完成了这项工作。

[https://github.com/pokonski/public_activity](https://github.com/pokonski/public_activity)

# image - 无法在 JPanel 上绘制 .jpeg

> ID：13385384
> 
> 赞同：2
> 
> 时间：2012-11-14T18:55:00.797
> 
> 标签：image, jpanel, draw

我正在开发一个游戏，当我移动它们时，我需要主动绘制棋盘和棋子。我已经搜索了几个小时，但我找不到解决方案。

它们与类位于同一文件夹中。

在此先感谢您的帮助:)

代码：

```
import java.awt.*;
import javax.swing.*;

public class MyPanel extends JPanel{
    private static final long serialVersionUID = 1L;

    public void paint(Graphics g) {
        try {   
            Image board = new ImageIcon("images/ChackerBoard.jpeg").getImage();
            Image black = new ImageIcon("images\\BlackPawn.jpeg").getImage();
            Image white = new ImageIcon("images\\WhitePawn.jpeg").getImage();

            this.setSize(320, 320);

            g.drawImage(board, 0, 0, this);
            for (int i = 0; i < Game.BlackList.size(); i++) {
                g.drawImage(black, (Game.BlackList.get(i).GetX() * 40) - 36, (Game.BlackList.get(i).GetY() * 40) - 36, this);
            }
            for (int i = 0; i < Game.WhiteList.size(); i++) {
                g.drawImage(white, (Game.WhiteList.get(i).GetX() * 40) - 36, (Game.WhiteList.get(i).GetY() * 40) - 36, this);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

图片：

[http://i.stack.imgur.com/bhuc2.jpg](http://i.stack.imgur.com/bhuc2.jpg)

[http://imageshack.us/a/img7/8673/checkerboardo.jpg](http://imageshack.us/a/img7/8673/checkerboardo.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:29:54.453

paintComponent 中的@FailX，imageobserver 对象为空。将图像观察者设置为“this”并且它可以工作。

```
@Override
protected void paintComponent( Graphics g ){
    super.paintComponent( g );
    g.drawImage(img, 0, 0, this); //Image is also drawn
    g.drawLine( 10, 10, 100, 50 ); //Line is drawn
    g.draw3DRect(20,20,50,30,true); // Rectangle is drawn
} 
```

# jquery - 片段jQuery插件问题

> ID：13385385
> 
> 赞同：1
> 
> 时间：2012-11-14T18:55:02.370
> 
> 标签：jquery, html, css

这可能相当简单，但我无法在任何地方找到解决方案。使用时：

[http://www.steamdev.com/snippet/](http://www.steamdev.com/snippet/)

```
$("pre.htmlCode").snippet("html",{style:"greenlcd"}); 
```

```
<pre class="htmlCode" style="float:left;">
    <h1>Snippet style selector</h1>
    <div class="instructions">
        <p>Choose your style below.</p>
        <p>Preview your style here.</p>
    </div>
    <!-- 39 styles to choose from! -->
</pre> 
```

这似乎工作，除了标签是这样处理的：

![在此处输入图像描述](../Images/7196c4258ddfc525d7c8b1168106096c.png)

我该如何防止这种情况发生？我希望这足够清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:18:51.807

使用`&lt;`而不是 <

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T00:12:53.487

在您的`<pre>`中，您需要转义 HTML。

```
<pre class="htmlCode" style="float:left;">
    &lt;h1>Snippet style selector&lt;/h1>
    &lt;div class="instructions">
        &lt;p>Choose your style below.&lt;/p>
        &lt;p>Preview your style here.&lt;/p>
    &lt;/div>
    &lt;!-- 39 styles to choose from! -->
</pre> 
```

或者在 XHTML 的情况下，使用`<[CDATA[ ... ]]>`

# javascript - 可以用javascript破解吗？

> ID：13385388
> 
> 赞同：23
> 
> 时间：2012-11-14T18:55:08.563
> 
> 标签：javascript

我对黑客这个词很熟悉。虽然我永远不会成为那些骗人或制造麻烦的黑客之一，但我相信这是任何自称为程序员的人必须能够做到的一个重要方面，因为它主要是关于解决问题。但它是如何工作的？当那些人破解游戏或网站或破解索尼的人时，他们是否使用像 ANSI C 或 c++ 或汇编这样的编程语言。假设他们使用一种编程语言，是否可以像使用任何其他语言进行黑客攻击一样使用 javascript 进行黑客攻击。此外，您还必须做什么才能破解。我只想知道它是如何工作的，以及它背后的理论。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-12T15:44:28.260

黑客每次都是独一无二的。利用某些类型的漏洞根本不需要任何特定的语言。有时你破解那里的任何东西，用你找到的任何语言或形式。有时有必要使部分过程自动化，例如密码破解，您可以使用任何您喜欢的语言。

破解商业游戏通常涉及研究其[反汇编](https://en.wikipedia.org/wiki/Disassembler)的机器代码，找出 CD 或许可证检查的部分，并通过手术替换代码的几个字节以便跳过检查。

入侵网站通常涉及发现其开发人员的一些小笨拙，这允许查看应该是私人数据，或者如果没有正确清理数据，则允许执行自定义代码。[当发送到数据库的值没有在引号（“...”）内得到适当保护时， SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)是一个常见缺陷，因此您可以提供超出引号的值以执行您自己的命令。[跨站脚本](https://en.wikipedia.org/wiki/Cross-site_scripting)是一种使用 JavaScript 的 hack：如果网站盲目地从 URL 或提交的表单数据中获取参数并在页面上显示它们而没有将它们安全地编码为文本（令人担忧的常见），您可以提供一个 <script> 标记以执行那个页面。使某人访问此类 URL 允许代表他们执行脚本操作。[如果草率的代码允许访问类似eval](http://www.php.net/manual/en/function.eval.php)的函数，或者如果服务器错误配置允许用户上传的文件被服务器解释为脚本，则代码注入也可以在服务器端使用 PHP（或 Perl 或类似）进行。

远程入侵操作系统或服务器程序可能会利用其处理网络命令时的错误。对格式错误的网络命令的不当处理可能会导致其破坏用户身份验证检查，甚至直接执行网络数据包中提供的代码，例如通过[缓冲区溢出](https://en.wikipedia.org/wiki/Buffer_overflow)。

Web 浏览器、插件和文档查看器中的错误是相似的。可以使用非标准或损坏的值来制作应该是安全类型的文件。如果程序员忘记安全地处理这些情况，它们通常可以用来逃避文件类型的正常限制。

病毒也可以通过 USB 记忆棒或 CD 的物理交换或说服某人安装载有病毒的软件而溜到机器上。此类病毒通常针对每种目的重新编写（以避免防病毒软件），但也有一些常见的可用。

较弱或实施不当的加密可能允许对加密数据或密码进行暴力解码。不存在的加密可以允许直接窃听数据。缺乏加密也可能允许将未经身份验证的命令发送给用户或服务器。

非常明显的密码或未更改的默认密码可能会让简单的猜测进入系统。有些人在任何地方都使用相同的密码。这使网站能够简单地进入用户的电子邮件帐户，然后控制与之相关的所有内容。这也意味着一个不安全网站上的密码泄露可能会被用来访问许多其他网站上的帐户。

有时，“黑客”是[社会工程](https://en.wikipedia.org/wiki/Social_engineering_%28security%29)。例如，想象一下给一名初级员工打电话并假装是负责人，以诱骗他们泄露内部信息或重置密码。网络钓鱼电子邮件是一种常见的、半自动化的社会工程形式。

闯入系统很少只是这些步骤之一。分析系统、识别小缺陷并利用它们查看是否暴露了有用的攻击向量，然后从中扩展以获得更多访问权限，这通常是一个漫长的过程。

当然，我从来没有这样做过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T19:02:53.963

javascript 可能会进行某种“黑客攻击”。您可以从地址栏运行 javascript。尝试`javascript: alert("hello");`在此网站上输入您的地址栏。

这样就可以劫持局部变量，例如cookies。

但是由于 javascript 在客户端运行。人们必须使用您的工作站才能访问您的 cookie。这是一种可用于更改登录数据并伪装成其他人的技术（如果该站点构建得不好）。

如果您真的想了解更多关于这方面的信息，可以在这里找到一些“javascript hacking 课程”：[http ://www.hackthissite.org/pages/index/index.php](http://www.hackthissite.org/pages/index/index.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:00:43.823

旁注，黑客攻击和破解是有区别的。参考：[http](http://en.wikipedia.org/wiki/Hacker_(programmer_subculture) ://en.wikipedia.org/wiki/Hacker_(programmer_subculture )

有许多可以使用 javascript 的漏洞利用，其中最著名的可能是跨站点脚本 (XSS)。

[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

要跟进 Michael 的回答，最好了解软件中的漏洞以及人们如何利用这些漏洞来防范这些漏洞，但是黑客并不是您想要为人所知的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T19:01:09.250

首先，您实际上指的是所谓的**Cracking**，而不是 hacking。这个问题肯定会结束，但是一些简短的观察^_^

破解来自对计算机系统构建方式的基本理解，因此您不学习如何破解/破解，而是学习计算机工程以进行**逆向工程**。

一个流行的黑客平台是 Linux。以windows为例，因为它是开源的，所以有经验的程序员可以编写自己的程序。尽管有经验的黑客可以在任何平台上实现他们的目标。

黑客有很多级别，但是，简单的网站安全性与入侵索尼并面临牢狱之灾是天壤之别^_^

不过，您可能会在[http://www.hackthis.co.uk上获得一些乐趣](http://www.hackthis.co.uk)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T19:03:56.003

这取决于很多事情，例如：html 代码的结构，例如，我不知道您是否可以破解 iframe，但普通网页相对容易破解。程序员通常做的另一个安全陷阱是通过 url 查询字符串传递敏感信息，然后您可以获取这些数据并将它们提交到 html 代码中使用的任何位置。

可能还有其他细节，但我现在不知道。

# .net - 使用 For 循环优化大数据比较

> ID：13385393
> 
> 赞同：1
> 
> 时间：2012-11-14T18:55:28.597
> 
> 标签：.net, vb.net, algorithm, optimization

好的，这是交易的人。我有`two text files`。每个都包含`500`行（句子）。

我已将它们加载到`memory`它们自己的数组中（数据类型：字符串）。让我们命名`array A & B`。

接下来我得到`first sentence`in ，将`array A`其拆分为另一个用作分隔符，以便获取单词。`array C``SPACE`

然后对于 中的每个句子`array B`，我再次将其拆分为`array D`using `SPACE`as delimiter 以获取单词，并将每个单词`array C`与每个单词进行比较以`array D`计算两个句子之间的百分比匹配。

我计算第一个句子`array A`与 中所有句子的平均匹配百分比`array B`。

然后我将它存储到一个`Array E`包含所有句子`array A`及其平均匹配百分比的文件中。

我对`first sentence`数组 A 中的每个标题都做了上面的操作。

问题是处理数组 A 中的每个标题大约需要 15 秒。无论如何我可以优化这个时间以更快吗？

**硬件：** AMD Phenom I 32 位四核

**代码：**

```
Imports System.IO
Imports System.Object
Imports System.Xml
Imports System.Text.RegularExpressions

Module Module1

    Sub Main()
        'Important File Paths
        Dim titlesFilePath As String = Environment.CurrentDirectory & "\titles.txt"
        Dim xmlTitlesFilePath As String = Environment.CurrentDirectory & "\extractedTitles.txt"
        Dim stopWordsFilePath As String = Environment.CurrentDirectory & "\stopWords.txt"

        'Import Important Data From Files -> Memory
        Dim titles As Array = FileToArray(titlesFilePath)
        Dim stopWords As Array = FileToArray(stopWordsFilePath)
        Dim xmlDataUnprocessed As Array = FileToArray(xmlTitlesFilePath)

        'Delimters To Filter Titles For
        Dim userDefinedDelimeters(4, 1)

        userDefinedDelimeters(0, 0) = "-"
        userDefinedDelimeters(0, 1) = " "

        userDefinedDelimeters(1, 0) = ","
        userDefinedDelimeters(1, 1) = " "

        userDefinedDelimeters(2, 0) = "—"
        userDefinedDelimeters(2, 1) = " "

        userDefinedDelimeters(3, 0) = "'s"
        userDefinedDelimeters(3, 1) = ""

        userDefinedDelimeters(4, 0) = "'"
        userDefinedDelimeters(4, 1) = " "

        'Declare Important Variables
        Dim xmlData(xmlDataUnprocessed.Length / 2, 1)
        Dim xmlTurn = 0
        Dim xmlDataCount = 0

        'Create Feed Title/URL Array
        For i = 0 To (xmlDataUnprocessed.Length - 1)
            If xmlTurn = 0 Then
                xmlData(xmlDataCount, 0) = xmlDataUnprocessed(i)
                xmlTurn = 1
            Else
                xmlData(xmlDataCount, 1) = xmlDataUnprocessed(i)
                xmlTurn = 0

                xmlDataCount += 1
            End If
        Next

        'CPU-Intensive Stuff Occurs
        Dim xmlTitle As String
        Dim xmlTitleWords As Array
        Dim savedTitleWords As Array
        Dim titleResults(xmlData.GetUpperBound(0) - 1, 1)
        Dim titlePercentageMatch As Integer
        Dim numberOfTitlesMatched As Integer

        For i = 0 To xmlData.GetUpperBound(0) - 1
            Console.WriteLine("Working On Title No. " & i & " Out Of " & xmlData.GetUpperBound(0) - 1)
            titlePercentageMatch = 0
            numberOfTitlesMatched = 0

            xmlTitle = xmlData(i, 0)
            xmlTitle = processTitle(stopWords, userDefinedDelimeters, xmlTitle)
            xmlTitleWords = xmlTitle.Split(" ")

            For Each title In titles
                title = processTitle(stopWords, userDefinedDelimeters, title)
                savedTitleWords = title.split(" ")
                Dim compareResult = compareTitle(xmlTitleWords, savedTitleWords)
                If compareResult > 0 Then
                    titlePercentageMatch += compareResult
                    numberOfTitlesMatched += 1
                End If
            Next

            titleResults(i, 0) = xmlData(i, 0)
            titleResults(i, 1) = (titlePercentageMatch / numberOfTitlesMatched)
        Next

        For i = 0 To titleResults.GetUpperBound(0) - 1
            Console.WriteLine(titleResults(i, 0) & " ---> " & titleResults(i, 1) & vbCrLf)
        Next

        Console.Read()
    End Sub

    Function compareTitle(ByRef xmlTitleWords As Array, ByRef savedTitleWords As Array)
        Dim NumberOfMatches = 0

        For Each xmlWord In xmlTitleWords
            For Each savedWord In savedTitleWords
                If (xmlWord.ToString.ToLower = savedWord.ToString.ToLower) Then
                    NumberOfMatches += 1
                End If
            Next
        Next

        Return ((NumberOfMatches / xmlTitleWords.Length) * 100)
    End Function

    Function processTitle(ByRef stopWordArray As Array, ByRef delimArray As Array, ByVal title As String)
        title = removeStopWords(stopWordArray, title)
        title = removeDelims(delimArray, title)

        Return title
    End Function

    Function removeStopWords(ByRef stopWordsArray As Array, ByVal sentence As String)
        For i = 0 To stopWordsArray.Length - 1
            If sentence.ToLower.Contains(" " & stopWordsArray(i).ToString.ToLower & " ") = True Then
                sentence = Microsoft.VisualBasic.Strings.Replace(sentence, " " & stopWordsArray(i) & " ", " ", 1, -1, Constants.vbTextCompare)
                'ElseIf sentence.ToLower.Contains(stopWordsArray(i).ToString.ToLower & " ") = True Then
                'sentence = Microsoft.VisualBasic.Strings.Replace(sentence, stopWordsArray(i) & " ", "", 1, -1, Constants.vbTextCompare)
            End If

            sentence = Regex.Replace(sentence, "\s+", " ")

            Dim Words = sentence.ToLower.Split(" ")

            If Words(0).ToString.ToLower & " " = stopWordsArray(i).ToString.ToLower & " " Then
                sentence = sentence.Remove(0, stopWordsArray(i).ToString.ToLower.Length + 1)
            End If

            Words = sentence.ToLower.Split(" ")
            Dim LastWord = Words(Words.Length - 1)
            'Console.WriteLine(LastWord & "++")

            If " " & LastWord.ToString.ToLower = " " & stopWordsArray(i).ToString.ToLower Then
                sentence = sentence.Remove(sentence.Length - 1 - LastWord.Length, stopWordsArray(i).ToString.ToLower.Length + 1)
            End If

        Next

        sentence = Regex.Replace(sentence, "\s+", " ")

        Return sentence
    End Function

    Function removeDelims(ByRef delimArray As Array, ByVal sentence As String)
        For i = 0 To delimArray.GetUpperBound(0) - 1
            sentence = sentence.Replace(delimArray(i, 0), delimArray(i, 1))
        Next
        sentence = Regex.Replace(sentence, "\s+", " ")
        Return sentence
    End Function

    Function FileToArray(ByVal filePath As String) As String()
        Dim content As String
        Dim lines As New ArrayList
        Dim sr As System.IO.StreamReader

        ' read the file's lines into an ArrayList
        Try
            sr = New System.IO.StreamReader(filePath)
            Do While sr.Peek() >= 0
                lines.Add(sr.ReadLine())
            Loop
        Finally
            If Not sr Is Nothing Then sr.Close()
        End Try

        ' convert from ArrayList to a String array
        Return CType(lines.ToArray(GetType(String)), String())
    End Function

End Module 
```

**编辑：**我希望它不会太混乱。对于那个很抱歉！ **编辑2：**提供酱汁：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:56:31.290

您的基本算法是**N*M*A ²**其中

*   **N** = 第一个文件中的标题数
*   **M** = 第二个文件中的标题数
*   **A** = 每个标题的平均字数

如果您有 500*500*5 ²，则您将推送 6,250,000 个不区分大小写的字符串比较。但这就是你所做的一切。您的内部循环要求`processTitle`每个`title`外部循环的长度。它不需要这样做。

## 单线程

您可以做的是有一个预处理步骤，将每个单词替换为代表该单词的整数（符号）。为此，您将使用字典来查找符号，如果没有，则分配一个新的唯一符号（例如，保留一个整数计数器并使用下一个值）。

然后，您的主处理循环将与以前类似，但您正在执行整数比较（快得多）。实际上，您希望此处理步骤*仅*进行比较和收集统计信息。其他所有东西都应该移出。

## 多线程

保留您的预处理步骤。

并行化您的处理步骤。一种方法是将[Parallel.For()](http://msdn.microsoft.com/en-us/library/dd783539.aspx)用于最外层循环：`Parallel.For(0, xmlData.GetUpperBound(0) - 1, Sub(i) ... End Sub)`其中动作是您的循环体。TPL 可能会很好地平衡负载（均匀地使用 4 个内核）。

另一种方法是使用任务并行库来启动对 1/4 数据进行操作的任务。然后开始使用结果的延续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:59:58.463

一次只读取`array B`内存，然后逐行读取`array A`。

在适用的情况下使用 StringBuilder 而不是字符串。

另外，看看你是否可以使用并行处理，即：任务。

至于距离，匹配算法，你没有提到它是什么以及它是如何做的。很难说什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:18:29.113

你在一些事情上放慢了自己的速度......

1.  `If (xmlWord.ToString.ToLower = savedWord.ToString.ToLower) Then`

    为什么不将所有内容都更改为小写，然后再将其放入数组中？

2.  `title = processTitle(stopWords, userDefinedDelimeters, title)`

    为什么不在将它加载到数组中之前这样做呢？

提前完成所有处理，然后单独进行比较。

# android - ListView.onItemLongClick - 获取项目的元素

> ID：13385395
> 
> 赞同：0
> 
> 时间：2012-11-14T18:55:34.507
> 
> 标签：android, get, row

我用 textviews 创建了线性布局，这是 ListView 的行（因为我需要一个表格：[Android 中有任何普通的表格视图吗？](https://stackoverflow.com/questions/13307586/is-any-normal-table-view-in-android)）。它是列表视图行的布局示例：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal">

     <TextView android:id="@+id/first_name"
         android:layout_width="100dip"
         android:layout_height="wrap_content" />

     <TextView android:id="@+id/last_name"
         android:layout_width="100dip"
         android:layout_height="wrap_content" />

     <TextView android:id="@+id/experience"
         android:layout_width="100dip"
         android:layout_height="wrap_content" />

     <TextView android:id="@+id/birthday"
         android:layout_width="100dip"
         android:layout_height="wrap_content">

</LinearLayout> 
```

现在我需要获取所选行的每个字段的值。我试试

```
 ListView list = (ListView) findViewById(R.id.workers_list);
    list.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
                alert(parent.getItemAtPosition(position).toString()); // alert is Toast
                return true;
            }
        }); 
```

但它以有趣的（？）数据格式返回所有数据： ![在此处输入图像描述](../Images/6cdc3389f82ec7e96e7f65777292bf55.png) 如何获取并非所有行数据，而仅获取某些列的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:14:45.760

`getItemAtPosition`返回该位置的地图。所以你可以做

```
((Map)parent.getItemAtPosition(position)).get("birthday").toString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:07:00.323

如果要使用表格，则可以使用表格布局

# c++ - 静态成员函数指针作为模板参数

> ID：13385397
> 
> 赞同：2
> 
> 时间：2012-11-14T18:55:38.377
> 
> 标签：c++, templates, c++11, variadic-templates

当使用静态成员函数指针作为模板参数时，我使用最新的 VC++ 编译器（2012 年 11 月 CTP）得到这个编译错误：

```
error C2027: use of undefined type 'wrapper<int (int,int),int A::f1(int,int)>' 
```

但是当使用免费功能时，一切正常。我在 g++ 中查找了一些类似的错误（[指向静态成员函数的指针作为 g++ 的模板参数“无效”](https://stackoverflow.com/questions/10174920/pointer-to-static-member-function-is-invalid-as-a-template-argument-for-g)），但它明确指出该参数无效。静态函数有什么不同？

我将函数转换为`void(*)(void)`因为构造之类`<typename T_Ret, typename... T_Args, T_Ret(*)(T_Args...)>`的不编译由于其他一些不相关的原因。

```
struct A
{
    static int f1(int a, int b)
    {
        return a + b;
    }
};

int f2(int a, int b)
{
    return a + b;
}

template <typename Sig, void(*fnc)(void)>
struct wrapper;

template <void(*fnc)(void), typename T_Ret, typename... T_Args>
struct wrapper<T_Ret (T_Args...), fnc>
{
    static bool apply()
    {
        // get some ints here
        int a = 1;
        int b = 2;
        typedef T_Ret (fnc_ptr*)(T_Args...);
        int res = ( (fnc_ptr)fnc )(a, b);
        // do smth with result
        res;
        return true;    // or false
    }
};

int main()
{
    bool res;
    res = wrapper<decltype(A::f1), (void(*)(void))A::f1>::apply();  // error
    res = wrapper<decltype(f2), (void(*)(void))f2>::apply();  // compiles ok
    return 0;
} 
```

编辑：好的，我将问题缩小到 decltype。当我明确编写类型时，一切正常：

```
res = wrapper<int(int, int), (void(*)(void))A::f1>::apply();  // compiles ok 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:07:25.427

编辑：看起来这是一个编译器错误：[http ://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/STLCCSeries6#c634886322325940618](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/STLCCSeries6#c634886322325940618)

解决方法：

Change `decltype(A::f1)`to `decltype(&A::f1)`which 将其输出从更改`int(int, int)`为`int (__cdecl *)(int,int)`。并改变

```
template <void(*fnc)(void), typename T_Ret, typename... T_Args>
struct wrapper<T_Ret (T_Args...), fnc> 
```

到

```
template <void(*fnc)(void), typename T_Ret, typename... T_Args>
struct wrapper<T_Ret (*)(T_Args...), fnc> 
```

工作代码：

```
struct A
{
    static int f1(int a, int b)
    {
        return a + b;
    }
};

template <typename Sig, void(*fnc)(void)>
struct wrapper;

template <void(*fnc)(void), typename T_Ret, typename... T_Args>
struct wrapper<T_Ret (*)(T_Args...), fnc>
{
    static bool apply()
    {
        // get some ints here
        int a = 1;
        int b = 2;
        typedef T_Ret (*fnc_ptr)(T_Args...);
        int res = ( (fnc_ptr)fnc )(a, b);
        // do smth with result
        res;
        return true;    // or false
    }
};

int main()
{
    bool res;
    res = wrapper<decltype(&A::f1), (void(*)(void))A::f1>::apply();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:18:54.867

你可以尝试这样的[事情](http://ideone.com/Y0hZwb)：

```
#include <iostream>

using namespace std;

struct A
{
    static int f1(int a, int b)
    {
        return a + b;
    }
};

int f2(int a, int b)
{
    return a + b;
}

template <typename T, T X>
struct wrapper
{
    template <typename... Args>
    static bool value(Args... blargs)
    {
        return X(blargs...) == 3;
    }
};

int main()
{
    bool res;
    res = wrapper<decltype(&A::f1), &A::f1>::value(1,2);
    cout << res << endl;
    return 0;
} 
```

但说真的，这要容易得多：

```
#include <iostream>

using namespace std;

int main()
{
    bool res;
    res = A::f1(a, b) == 3;
    cout << res << endl;
    return 0;
} 
```

# javascript - 一步自动执行和绑定

> ID：13385398
> 
> 赞同：0
> 
> 时间：2012-11-14T18:55:39.187
> 
> 标签：javascript, jquery, events, attachment

我有一个问题：我有一个我想在调用它时执行的函数并将一个事件控制器附加到该函数

现在我正在使用这个解决方案，但我认为这不是最好的做法

```
ff();
$(window).bind('scroll resize', function(){ ff(); });
function ff(){ /* do something */ }; 
```

解决这个问题的最佳技巧是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:01:59.017

好吧，使用窗口，您可以这样做：

```
$(window).bind('scroll resize load', ff); 
```

这也会在窗口加载时触发该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:05:26.840

试试这个：

```
 function ff(){ /* do something */ };

    $(window).bind('scroll resize', ff ).resize(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:06:37.413

不确定您到底想要什么，但这肯定是一种常见的模式。

```
function ff(){ /* do something */ };

...

$(window).on('scroll resize', ff).trigger('resize'); 
```

通过触发一个事件，而不是直接调用`ff()`，处理程序在内部做出正确的解释`this`（即`window`在示例中）。

请注意使用`on()`优先于`bind()`which 现在已弃用。

# javascript - 简单的 javascript 运费计算器问题

> ID：13385401
> 
> 赞同：-3
> 
> 时间：2012-11-14T18:55:44.510
> 
> 标签：javascript, html

所以这是我的代码。这是一个非常简单的运费计算器。当我运行它时，只显示一个询问购买价格的消息框，然后显示这个“â€‹”。有谁知道发生了什么？

```
<!DOCTYPE html>

<html lang="en">
 <head>
    <title> Shipping Calculator</title>

<script >
var purchasePrice = window.prompt("Please enter the price of your purchase to calculate your                shipping cost.");
 var shippingPrice;

function shippingMath(purchasePrice, shippingPrice) {
     if (purchasePrice <= 25) {
        shippingPrice = 1.50;
    }
     else {
        shippingPrice = (purchasePrice * '.10');
    }
    var totalCost = (purchasePrice + shippingPrice);
    return totalCost;

}

shippingMath(purchasePrice, shippingPrice);

document.writeln("Your total is " + totalCost); 
</script>

</head>

<body>
</body>
</html> 
```

任何帮助表示赞赏。谢谢。这是为了学校作业，所以这是我允许这样做的唯一方法。一个简单的功能，没有数组或其他任何东西。谢谢！​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:00:40.870

既然你说这是为了家庭作业，我将尝试引导你找到答案，而不是直接给你答案。

您需要考虑的几件事：

1.  您是否在 html 中正确声明了 javascript
2.  javascript何时在页面上运行
3.  您的功能如何尝试显示答案
4.  您是否在函数中使用了正确的对象（字符串与数字）

如果您回答了这 4 个问题，那么您应该会想到解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:46:05.877

您可能在代码中发现的潜在问题之一涉及变量的范围。

考虑以下：

```
function x() {
  var y = 10;
  return y;
} 
```

函数*x*将返回值*10*，并且变量*y*将无法在函数*x*之外被引用。

所以下面的代码会显示一个包含“10”的警告框：

```
z = x();
alert(z); 
```

虽然以下代码会引发错误（或出现意外行为）：

```
z = x();
alert(y); 
```

# sql - 在sql中将查询的结果与另一个查询的结果结合起来

> ID：13385402
> 
> 赞同：1
> 
> 时间：2012-11-14T18:55:44.227
> 
> 标签：sql

下面的以下 sql 查询产生了这个结果

```
cust table

CUST_ID     AC_NO      NAME            AREA  SALES
---------- ---------- ------------------------- ---
C001       A30045     Smiths Heavy       1   R001
C002       A30145     Heavy jonps        1   R001
C003       A30046     dangote flour      1   R002
C004       A30047     OAU ife            2   R002

Area Table

AREA_NUMBER AREA_NM  AREA_Dp
----------- ---------- ----------
      1 North      Leeds
      2 South      Newcastle
      3 East       Surrey
      4 West       London

Area_geo Table

SALE REPP_   AREAA_ID AREAM AREAMANAGER_NAME
---- ----- ---------- ----- -------------------
SG01 R001           1 R110  mandy Jay
SG02 R002           2 R110  mandy Jay
SG03 R003           3 R111  Kay sole
SG04 R003           3 R111  Kay sole
SG05 R003           3 R111  Kay sole
SG06 R001           4 R110  mandy Jay

  select cust.*,
  area.AREA_Nm,area.AREA_Dp
   from area inner join cust on
   area.area_number=customer.area
   ORDER BY customer.Cust_ID; 
```

结果

```
 CUST_ID    AC_NO      NAME            ADDRESS         AREA  SALES  AREA_N  AREA_Dp
 ---------- ---------- -------------- ------------------------- ---------- ----- ---
 Ac003       A30046     dangote flour  court Estate     1    R002   North      Leeds
 Ac004       A30047     OAU ife        4 Abanishe       2    R002   South      Newcastle 
```

我的意图是进一步将 Areamanager_name 包含在下表中的上述结果中。然而，下表对上述结果 (Area) 有一个共同的属性 (Area_ID)

表区_地理

```
SALE REPP_   AREA_ID  AREAM   AREAMANAGER_NAME
---- ----- ---------- ----- ----------------
SG01 R001        1    R110    mandy Jay
SG02 R002        2    R110    mandy Jay
SG03 R003        3    R111    Kay sole
SG04 R003        3    R111    Kay sole
SG05 R003        3    R111    Kay sole
SG06 R001        4    R110    mandy Jay 
```

预期结果

```
 CUST_ID    AC_NO      NAME            ADDRESS         AREA  SALES  AREA_N   AREA_dp Areamanager
 ---------- ---------- -------------- ------------------------- ---------- ----- ---
 Ac003       A30046     dangote flour  court Estate     1    R002   North    Leeds     mandy Jay
 Ac004       A30047     OAU ife        4 Abanishe       2    R002   South    Newcastle mandy Jay 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:58:02.707

您需要使用`LEFT OUTER JOIN`. [http://en.wikipedia.org/wiki/Join_%28SQL%29](http://en.wikipedia.org/wiki/Join_%28SQL%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:14:28.337

```
select cust.*, area.AREA_Nm,area.AREA_Dp
from area inner join cust on area.area_number=customer.area
          inner join Area_Geo on cust.area = Area_Geo.area
ORDER BY customer.Cust_ID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:14:39.870

我认为下面应该这样做，我重新格式化了一下，这样我可以更容易地阅读它。如果有时您没有区域经理，您将需要外部联接。

```
SELECT cust.*
      ,area.area_Nm
      ,area.AREA_Dp
      ,area_geo.Areamanager_name
FROM area inner join cust     on area.area_number = customer.area
          inner join area_geo on area.area_number = area_geo.area_id
ORDER BY customer.Cust_ID; 
```

编辑以回应评论： -

双重值的问题是由于 area_geo 表可以具有（并且在 area_id 3 的情况下似乎具有）area_id 的重复值。当您进行连接时，表中的每一行都会返回一行，因此对于 area_id，每次都会返回 3 行。你可以使用子查询

```
SELECT cust.*
      ,area.area_Nm
      ,area.AREA_Dp
      ,(SELECT DISTINCT area_geo.Areamanager_name
        FROM   area_geo
        where  area.area_number = area_geo.area_id) Areamanager_name
FROM area inner join cust     on area.area_number = customer.area
ORDER BY customer.Cust_ID; 
```

但是如果同一个 area_id 有不同的 Areamanager_name 值，这个查询就会失败。理想情况下，我认为您需要使用更合适的表来检索 areamanager_name，或者如果没有一个[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的数据库，以便每个 area_id 在 area_geo 中只有 1 条记录。

# java - 提交按钮清除表单而不发布

> ID：13385403
> 
> 赞同：1
> 
> 时间：2012-11-14T18:55:47.130
> 
> 标签：java, html

所以我试图使用一个简单的表单来获取用户的输入，从数据库中检索必要的信息，然后发布它。但是，在 HTML 页面上，提交按钮只是清除表单。下面是操作中引用的 html 文件和 java 文件。我知道与数据库交互的文件丢失了，但我认为我的问题在于这两个之一。如果需要，我可以稍后发布。我的问题是，为什么提交按钮会清除表单而不是将您带到“操作”站点？

```
<form>
        <FORM METHOD=POST ACTION = "http://uml.cs.uga.edu:8080/michael_crosby_courses/Schedule">
        Class 1: <input type=text name="Class1"><br>
        Class 2: <input type=text name="Class2"><br>
        Class 3: <input type=text name="Class3"><br>
        Class 4: <input type=text name="Class4"><br>
        <input type=submit>
</form>

import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class Schedule extends HttpServlet {

public void doPost(HttpServletRequest  req, HttpServletResponse res) throws ServletException, IOException {

    PrintWriter toClient = res.getWriter();
    String field;
    String val;
    Vector classes = null;
    Vector totalHours = null;
    String query = null, query2 = null;
    String class1 = null, class2 = null, class3 = null, class4 = null;
    int i, sum=0;

    res.setContentType("text/html");

    toClient.println("<html>");
    toClient.println("<title>MyEcho</title>");
    toClient.println("<body>");

    Enumeration values = req.getParameterNames();

    if( values.hasMoreElements() ) {

        class1 = req.getParameter("Class 1");
        class2 = req.getParameter("Class 2");
        class3 = req.getParameter("Class 3");
        class4 = req.getParameter("Class 4");
        toClient.println("<P><P><B>Your Schedule:</B></P></P>");
        query = "select * from csci_section where number = " + class1 + " or number = " + class2 + " or number = " + class3 + " or number = " + class4 + ";";

    }

    query2 = "select credit from csci_section where number = " + class1 + " or number = " + class2 + " or number = " + class3 + " or number = " + class4 + ";";

    if( query == null )

        toClient.println("<P><P><B>No query given;  resubmit </B>");

    else if(1==1) {             //if the request did not return anything, i.e. the number given is not a class

    } else{

        toClient.println("<P><B>Running search for classes: </B>" + class1 + ", " + class2 + ", " + class3 + ", " + class4 + ", "  + "<P><P>" );

        classes = AccessMySQL.Execute( query );
        totalHours = AccessMySQL.Execute(query2);
        toClient.println("<P><P><B>Received classes: </B></P></P>");

        for( i = 0; i < classes.size(); i++ ){ //prints out info

            toClient.println( "<p><tt>" + (String)classes.elementAt( i ) + "</tt></p>" );

        }

        for(i=0; i < totalHours.size(); i++){
            sum += Integer.parseInt((totalHours.elementAt(i)).toString());
        }
        toClient.println("<p><tt>The total number of class hours is: " + sum + "</tt></p>" );
    }

    toClient.println( "</body>" );
    toClient.println("</html>");

    toClient.close();

} //closes doPost 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:05:22.423

因为你有两个`<form>`标签。第一个（没有动作）是浏览器用户的。删除它，它应该开始按预期工作。

```
<form>  <-- Remove this one
    <FORM METHOD=POST ACTION = "http://uml.cs.uga.edu:8080/michael_crosby_courses/Schedule"> 
```

# sql - 两个日期之间的SQL周期，查询每一天的平均值

> ID：13385406
> 
> 赞同：0
> 
> 时间：2012-11-14T18:56:03.100
> 
> 标签：sql, date, average, period

我有几个条目保存如下：

```
ID | StartDate | Enddate | Amount 
```

我现在确实想查询此期间的每一天，以划分这些日期之间的总金额。

例如

```
1 | 2012-01-01 | 2012-01-05 | 10
2 | 2012-01-04 | 2012-01-05 | 20 
```

应该成为

```
2012-01-01 |  2
2012-01-02 |  2
2012-01-03 |  2
2012-01-04 | 12
2012-01-05 | 12 
```

这可能吗？我无法想象如何从期间得出单日值。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:25:48.273

当您需要所有日期的查询结果时，需要有 Dates 表（[帮助不大](https://stackoverflow.com/questions/2157282/generate-days-from-date-range)）。我给你答案并且不使用日期表。

**[SQLFIDDLEExample 1 with Date Table](http://sqlfiddle.com/#!2/d92e7/22)**

询问：

```
SELECT 
DATE_FORMAT(td.TimeKey, '%Y-%m-%d')  as Date,
SUM(Amount/(SELECT COUNT(tdc.TimeKey) 
       FROM Table1 t1c, TDate tdc
       WHERE t1c.StartDate<= tdc.TimeKey
          AND t1c.Enddate >= tdc.TimeKey
          AND t1c.ID = t1.ID )) as Total_Amount
FROM Table1 t1, TDate td
WHERE t1.StartDate<= td.TimeKey
  AND t1.Enddate >= td.TimeKey
GROUP BY Date
ORDER BY Date 
```

结果：

```
|       DATE | TOTAL_AMOUNT |
-----------------------------
| 2012-01-01 |            2 |
| 2012-01-02 |            2 |
| 2012-01-03 |            2 |
| 2012-01-04 |           12 |
| 2012-01-05 |           12 | 
```

不使用日期表的结果相同：

**[仅使用 SQL 的 SQLFiddle 示例（没有日期表）](http://sqlfiddle.com/#!2/3c22f/3)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:18:30.080

您可以考虑使用整数表来创建日期范围。[在这里](https://stackoverflow.com/a/11021035/128245)查看我的答案，了解我在说什么。

在您的情况下，您将确定每个日期范围内的天数并将其用作最大整数。该最大整数既可以将行数限制为适当的天数，又可以计算日期范围内每一天的平均值。

# java - 从应用程序打开系统设置的特定部分

> ID：13385409
> 
> 赞同：0
> 
> 时间：2012-11-14T18:56:07.733
> 
> 标签：java, android, android-intent

我的应用程序有一个快捷方式，可以打开系统设置的存储部分（效果很好），但是如果设置应用程序已经在运行，并且最后离开了显示设置，那么您不会被定向到存储设置，但显示设置，当按下快捷方式。

在尝试启动存储之前，有没有办法强制打开存储设置，或者说关闭（如果未关闭）设置应用程序？

我正在使用意图`android.settings.INTERNAL_STORAGE_SETTINGS`开始活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:05:20.057

尝试根据您的意图设置以下标志：

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

# xml - xsl：count() 内的 value-of

> ID：13385412
> 
> 赞同：1
> 
> 时间：2012-11-14T18:56:12.570
> 
> 标签：xml, xslt

我有一个关于 xsl 语法的问题：这是我的 xsl：

```
<xsl:stylesheet version="1.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="http://www.w3.org/Profiles/XHTML-transitional"     exclude-result-prefixes="html">
 <xsl:output method="xml" omit-xml-declaration="yes" indent="no"        encoding="utf-8" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"     doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN" />
  <xsl:param name="objectDoc" />
 <xsl:template match="/">

                <xsl:for-each select="/articolo/foto-group/fg-foto">
                <div class="Image_container">
                      <div class="EM_Story_Image_{position()}"></div>
                </div>
                <div class="Caption"><xsl:value-of select="/articolo/foto-group[position()]/foto-dida"/></div>
                </xsl:for-each>

    </xsl:template>

</xsl:stylesheet> 
```

这是我的xml：

```
<articolo>
    <foto-group id="U50253517593AED">
        <fg-foto id="kYjG"/>
        <foto-dida class="dida" id="kSo">
            <p>Heloooooooooooo </p>
        </foto-dida>
    </foto-group>
    <foto-group id="U50253517593c0E">
        <fg-foto id="kNTF"/>
    </foto-group>
    <foto-group id="U50253517593h4B">
        <fg-foto id="kRtH"/>
    </foto-group>
</articolo> 
```

我拥有的是这个xml：

```
<!DOCTYPE div PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<div class="Image_container">
    <div class="EM_Story_Image_1"/></div>
<div class="Caption">Heloooooooo</div>
<div class="Image_container">
    <div class="EM_Story_Image_2"/></div>
<div class="Caption">Heloooooooo </div>
<div class="Image_container">
    <div class="EM_Story_Image_3"/></div>
<div class="Caption">Heloooooooo </div> 
```

但我期望的是：

```
<!DOCTYPE div PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<div class="Image_container">
    <div class="EM_Story_Image_1"/></div>
<div class="Caption">Heloooooooo</div>
<div class="Image_container">
    <div class="EM_Story_Image_2"/></div>
<div class="Caption"> </div>
<div class="Image_container">
    <div class="EM_Story_Image_3"/></div>
<div class="Caption"> </div> 
```

所以基本上不能正常工作的指令是这个：

```
<xsl:value-of select="/articolo/foto-group[position()]/foto-dida"/> 
```

因为我希望使用数字（1,2,3）而不是位置

```
<div class="EM_Story_Image_{position()}"></div> 
```

相反，我总是从中获得节点一“Helooooooo”结果，就好像没有索引一样。我可以看到我错过了 postion() 周围的 {}，但如果我添加它们，我会得到这个 xsl 错误：Invalid XPath expression Unexpected token - "{position()}]/foto-dida" select="/doc/articolo/照片组[{position()}]/foto-dida"

有谁知道我想念什么或我应该改变什么？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:17:10.517

在您的选择中没有理由从根目录开始。上下文已经是`fg-foto`，所以只需获取`foto-dida`其父级的子级即可。您应该将您的更改`xsl:value-of`为：

```
<xsl:value-of select="../foto-dida/p"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:24:14.010

在`<xsl:value-of>`评估时，当前上下文节点是一个`fg-foto`元素，所以

```
<xsl:value-of select="../foto-dida" /> 
```

应该给你兄弟`foto-dida`元素的字符串值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:27:22.957

代替

```
 <xsl:value-of select="/articolo/foto-group[position()]/foto-dida"/> 
```

尝试这个

```
<xsl:value-of select="current()/foto-dida"/> 
```

# java - Maven2插件依赖

> ID：13385414
> 
> 赞同：0
> 
> 时间：2012-11-14T18:56:15.130
> 
> 标签：java, maven, maven-2

我在插件依赖方面遇到了麻烦。

我想使用“proguard-maven-plugin”，但默认情况下这个插件使用 proguard 4.3。Proguard 4.3 不支持 jdk 7。

要解决我的问题，我只需要使用 proguard 4.6+。Buuut，中央回购的最后一个版本是 4.4。我可以从 proguard repo 手动下载 proguard 4.6+，但是如何将它包含到插件中？

* * *

我有我自己的 nexus repo，我把 proguard 4.8 放在那里。如何从我的仓库中加载“proguard-maven-plugin”的依赖项？

我做了那里写的：http: [//www.sonatype.com/people/2008/04/how-to-override-a-plugins-dependency-in-maven/](http://www.sonatype.com/people/2008/04/how-to-override-a-plugins-dependency-in-maven/)，但是maven在中央回购中寻找proguard 4.8。我如何在自己的仓库中强制执行 Maven 搜索？

对不起我糟糕的英语，我希望你能理解我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:30:50.483

也许这也会有所帮助，我不使用它，但这是用于更改依赖项的配置形式

```
<plugin>
    <artifactId>proguard-maven-plugin</artifactId>
    <version>2.0.4</version>
    <dependencies>
        <dependency>
            <groupId>net.sf.proguard</groupId>
            <artifactId>proguard</artifactId>
            <version>4.6</version>
        </dependency>
    </dependencies>
</plugin> 
```

也是一个蚂蚁运行的例子

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <dependencies>
        <dependency>
            <groupId>ant-contrib</groupId>
            <artifactId>ant-contrib</artifactId>
            <version>1.0b2</version>
            <exclusions>
                <exclusion>
                    <groupId>ant</groupId>
                    <artifactId>ant</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.ant</groupId>
            <artifactId>ant-nodeps</artifactId>
            <version>1.8.1</version>
        </dependency>
    </dependencies>
</plugin> 
```

**注意也！对于 maven2** -已解决的*问题 maven3 [http://jira.codehaus.org/browse/MNG-1323](http://jira.codehaus.org/browse/MNG-1323)
对于多模块反应器构建插件的依赖关系，在首次使用插件时解决。如果您的依赖项没有在 reactor 构建中下载，但在单个模块中工作正常，那么您可能需要将其包含在早期项目中 - 最简单的方法是添加到共享父项的 pluginManagement*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:10:04.647

您必须编辑`.m2/settings.xml`您的主文件夹（以及运行 Maven 作业的每个用户的主文件夹）中的文件。您必须在[此处](http://maven.apache.org/guides/mini/guide-mirror-settings.html)将 Nexus 添加为存储库，如此处所述。基本上配置如下所示：

```
<settings>
  ...
  <mirrors>
    <mirror>
      <id>mynexus</id>
      <name>My Nexus</name>
      <url>http://mynexusurl</url>
      <mirrorOf>*</mirrorOf>
    </mirror>
  </mirrors>
  ...
</settings> 
```

此外，您必须配置 Nexus 以镜像中央存储库。

# sql - 如何将多个 SELECT 语句的结果存储在存储过程中

> ID：13385420
> 
> 赞同：0
> 
> 时间：2012-11-14T18:56:46.270
> 
> 标签：sql, sql-server, stored-procedures

我有一个存储过程，我需要运行三个单独`SELECT`的语句并将结果存储在一个变量中。

我试过这样的事情：

```
SELECT @tier1MenuIds = Id
FROM TheGateKeeper.NavigationTier1
WHERE ([Page Name] = @currentSlug)

SELECT @tier2MenuIds = Id
FROM TheGateKeeper.NavigationTier2
WHERE ([Page Name] = @currentSlug)

SELECT @tier3MenuIds = Id
FROM TheGateKeeper.NavigationTier3
WHERE ([Page Name] = @currentSlug) 
```

但它给了我一个错误说

> *'(' 附近的语法不正确。*

如果我删除底部的两个`SELECT`s，则该语句有效。还有其他选择吗？

编辑：我正在使用 SQL Server。这是完整的代码：

```
CREATE PROCEDURE [TheGateKeeper].[editContent]
@description nvarchar(300),
@content nvarchar(MAX),
@title nvarchar(50),
@dateModified date,
@headerImageName nvarchar(100),
@slug nvarchar(50),
@id int

AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @currentSlug as nvarchar(100);
    DECLARE @tier1MenuIds as int;
    DECLARE @tier2MenuIds as int;
    DECLARE @tier3MenuIds as int;

    /* Check if the post exists */
    SELECT @currentSlug =   Slug
    FROM         TheGateKeeper.Posts
    WHERE     (Id = @id)

    IF (@@ROWCOUNT = 1)
    BEGIN
    /* Temporarily unlink all menu items linking to post */
    SELECT @tier1MenuIds = Id
    FROM TheGateKeeper.NavigationTier1
    WHERE ([Page Name] = @currentSlug)

    SELECT @tier2MenuIds = Id
    FROM TheGateKeeper.NavigationTier2
    WHERE ([Page Name] = @currentSlug)

    SELECT @tier3MenuIds = Id
    FROM TheGateKeeper.NavigationTier3
    WHERE ([Page Name] = @currentSlug)

    /* Update the post in the database */
    UPDATE Posts
    SET (Description = @description, [Content] = @content, Title = @title, [Date Modified] =@dateModified, HeaderImageName = @headerImageName, slug =@slug)
    WHERE id = @id

    RETURN 1

    END

    ELSE
    BEGIN
    RETURN 0
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:20:00.710

从您的`UPDATE`陈述中删除括号；它们是不必要的。

您的更新声明应为：

```
UPDATE Posts
SET Description = @description, [Content] = @content, Title = @title, 
    [Date Modified] =@dateModified, HeaderImageName = @headerImageName, 
    slug =@slug
WHERE id = @id 
```

# iphone - 使用 CakePHP 的媒体视图向 iPad/iPhone 提供视频

> ID：13385426
> 
> 赞同：3
> 
> 时间：2012-11-14T18:57:05.063
> 
> 标签：iphone, ipad, cakephp, http-headers, mp4

我正在 LAMP 环境中开发一个 CakePHP 1.3 项目，我们在其中存储许多视频，`/app/webroot/`并使用[CakePHP 的媒体视图](http://book.cakephp.org/1.3/view/1094/Media-Views)提供它们（我们这样做是因为我们不希望直接访问这些文件）。但是，我无法通过媒体视图将这些视频提供给 iOS 设备（例如 iPhone、iPad）。

我可以将我的测试视频放置在其中的某个位置`/app/webroot/`并直接在 iOS 设备上访问它，并且播放按预期工作，所以我很确定这不是 MOOV 问题或视频本身的另一个编码问题。据我所知，这与 CakePHP 处理（或缺少）iOS 设备在加载视频时使用的字节范围请求有关。

我发现[了另一张 Stack Overflow 票](https://stackoverflow.com/questions/11050528/using-cakephps-mediaview-with-mp4-videos-on-an-ipad)，不幸的是没有得到答复，但详细说明了一个类似的问题。查看`/cake/libs/view/media.php`类文件，`render()`方法中有一条 if 语句，用于检查`$_SERVER['HTTP_RANGE']`值；但据我在测试中可以看出，这个值永远不会被设置（至少在 CakePHP 寻找它时不会）。上述票证中链接的非现场解决方案并不能解决我的问题，因为它也依赖于对该值的检查，我已经验证在 Media View 类本身或在控制器中检查时未找到该值设置所述视图。

那么，有没有人有过使用 CakePHP 媒体视图在 iOS 设备上提供视频的运气或经验？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:36:35.443

在我在网上发布的各种问题都没有被点击之后，我们又对此进行了破解，并能够弄清楚。

原来这是 Media.php 类文件 ( `/cake/libs/view/media.php`) 中的一个问题，它对 HTTP_RANGE 标头值的预期以及它如何格式化后续标头。首先，这是原始的相关代码片段：

```
$httpRange = env('HTTP_RANGE');
if (isset($httpRange)) {
    list($toss, $range) = explode('=', $httpRange);

    $size = $fileSize - 1;
    $length = $fileSize - $range;

    $this->_header(array(
        'HTTP/1.1 206 Partial Content',
        'Content-Length: ' . $length,
        'Content-Range: bytes ' . $range . $size . '/' . $fileSize));

    fseek($handle, $range);
} 
```

请注意`list()`调用，它填充了一个`$range`值，然后将其用作数字。但是，在进一步调试标头调用之后，我们注意到 HTTP_RANGE 值实际上是给出的，`Range: bytes=0-1000`因为给定的数字范围取决于请求。我们进行了以下更改（并在媒体视图调用中将下载布尔值设置为 true），瞧，iOS 设备上的工作视频。

```
$httpRange = env('HTTP_RANGE');
if (isset($httpRange)) {
    $start = 0; //start byte
    $end = $fileSize - 1; //end byte
    $length = $fileSize; //content length

    $c_start = $start; //default value
    $c_end = $end; //default value
    list($toss, $range) = explode('=', $httpRange); //extract range

    //grab range value(s)
    if ($range[0] == '-') {
        $c_start = $fileSize - substr($range, 1);
    } else {
        $range = explode('-', $range);
        $c_start = $range[0];
        $c_end = (isset($range[1]) && is_numeric($range[1])) ? $range[1] : $fileSize;
    }

    //validate end byte
    $c_end = ($c_end > $end) ? $end : $c_end;

    //set new values
    $start = $c_start;
    $end = $c_end;
    $length = $end - $start + 1;

    $this->_header(array(
        'HTTP/1.1 206 Partial Content',
        'Content-Length: ' . $length,
        'Content-Range: bytes ' . $start . '-' . $end . '/' . $fileSize));
    fseek($handle, $start);
} 
```

请注意，这包含了[本文](http://mobiforge.com/developing/story/content-delivery-mobile-devices)附录 A 中的大部分逻辑，它处理了各种情况。（最初我们避开了大部分这种逻辑，虽然播放效果很好，但一旦在 iOS 设备上到达文件末尾，它似乎有点不稳定。）

# javascript - acrobat pro - 文本字段 - 检查无效值

> ID：13385427
> 
> 赞同：1
> 
> 时间：2012-11-14T18:57:05.377
> 
> 标签：javascript, acrobat

我正在尝试检查文本字段的值，如果文本框包含某些单词，它会提醒用户无效值。我尝试了以下，但没有工作。

```
var nstr = event.value;
if(nstr = "SGP")
    app.alert("Not a valid form");
var nstr = event.value;
if(nstr = "CGT")
    app.alert("Not a valid form");
var nstr = event.value;
if(nstr = "PTS")
    app.alert("Not a valid form"); 
```

我正在使用 Adob​​e Acrobat Pro，我将脚本放在 Text Field Properties:Validate:Run custom validation script 中。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:04:17.997

```
if(nstr = "SGP") 
```

变成

```
if(nstr == "SGP") 
```

等等..

此外，您不需要在每个条件之前将 event.value 分配给 nstr。

此 switch 语句将以更少的代码重复实现相同的最终结果：

```
switch(event.value) {
    case 'SGP':
    case 'CGT':
    case 'PTS':
       app.alert("Not a valid form");
} 
```

# html - 防止 div 内容溢出

> ID：13385430
> 
> 赞同：5
> 
> 时间：2012-11-14T18:57:12.817
> 
> 标签：html, css

我无法防止 div 的内容溢出。它似乎与Foundation的CSS有关，但我不知道是什么原因造成的。一旦我删除了 Foundation CSS，它就可以正常工作了。

我真的很感激另一双眼睛。

[http://jsfiddle.net/UR5t9/](http://jsfiddle.net/UR5t9/)

的HTML：

```
<div class="grid-box round isotope-item" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(0px, 0px, 0px);">

        <h5>Title</h5>

        <p>Lorem ipsum</p>        

        <div class="meta round">
            <div class="avatar">
                <a href="#">
                    <img src="http://fakeimg.pl/46x46" width="46" height="46" alt="Username">
                </a>
            </div>
            <div class="user">
                <a href="#">
                    Kyle
                </a>
            </div>
            <div class="stats">
                <ul>
                    <li class="likes"><i class="icon-thumbs-up"></i>12</li>
                    <li class="saves"><i class="icon-pushpin"></i>1</li>
                    <li class="comment_count"><i class="icon-comments"></i>1</li>
                </ul>
            </div>
        </div>

    </div>​ 
```

CSS：

```
.grid-box {
    position: relative;
    background-color: #ffffff;
    width: 300px;
    margin: 10px;
    float: left;
    padding: 10px;
    border: 1px solid #DDD;
    -webkit-box-shadow: 1px 1px 1px 0px #999; /* Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
    box-shadow: 1px 1px 1px 0px #999; /* Opera 10.5, IE9+, Firefox 4+, Chrome 6+, iOS 5 */
    -webkit-border-radius: 6px; /* Safari 3-4, iOS 1-3.2, Android ≤1.6 */
    border-radius: 6px; /* Opera 10.5, IE9+, Safari 5, Chrome, Firefox 4+, iOS 4, Android 2.1+ */

    /* useful if you don't want a bg color from leaking outside the border: */
    -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box;
}

#grid-container {
    margin: 0 auto;
}

div.round {
    -webkit-border-radius: 6px; /* Safari 3-4, iOS 1-3.2, Android ≤1.6 */
    border-radius: 6px; /* Opera 10.5, IE9+, Safari 5, Chrome, Firefox 4+, iOS 4, Android 2.1+ */

    /* useful if you don't want a bg color from leaking outside the border: */
    -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box;
}

.actions {
    float: left;
    position: relative;
    left: 50%;
}

.actions .button-group {
    float: left;
    position: relative;
    left: -50%;
}

.actions .button-group a {
    text-shadow: 1px 1px 1px #000; /* Firefox 3.5+, Opera 9+, Safari 1+, Chrome, IE10 */
}

.meta {
    background: #F0F0F0;
    border: 1px solid #DDD;
    padding: 10px;
    height: 48px;
}

.meta > .avatar {
    float: left;
    margin-right: 10px;
    width: 46px;
    height: 46px;
}

.meta > .user {
    line-height: 16px;
    padding-bottom: 10px;
    overflow: hidden;
}

.meta > .stats ul {
    list-style: none;
    margin-bottom: 0;
    line-height: 14px;
}

.meta > .stats li {
    color: #777;
    display: inline-block;
    line-height: 14px;
    width: auto;
    margin-right: 19px;
    border: none;
}

.meta i {
    font-size: 18px;
}​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T19:01:05.947

问题是您将明确的高度设置为`.meta`. 删除那个高度，它工作得很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T19:00:46.033

`height:auto;`在你的`div.round`CSS中添加一个

这是您的 jsFiddle [http://jsfiddle.net/UR5t9/1/的更新](http://jsfiddle.net/UR5t9/1/)

IE

```
 div.round {
      height:auto;
      -webkit-border-radius: 6px; /* Safari 3-4, iOS 1-3.2, Android ≤1.6 */
      border-radius: 6px; /* Opera 10.5, IE9+, Safari 5, Chrome, Firefox 4+, iOS 4, Android 2.1+ */

      /* useful if you don't want a bg color from leaking outside the border: */
      -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box;
    } 
```

# c# - 在本地 wifi 中安全地发送数据

> ID：13385432
> 
> 赞同：1
> 
> 时间：2012-11-14T18:57:15.423
> 
> 标签：c#, .net, security, networking, encryption

将客户端和服务器配对并确保发出的请求来自客户端的安全方法是什么？我的想法是为每个请求发送一个密码，但网络上的其他人可以嗅探该数据，即使它是加密的。然后他们可以重新发送该数据包，服务器会认为正确的 PC 已经发送了它。即使发送哈希也行不通，因为攻击者只能重新发送哈希。

用户将在一台 PC 上运行服务器，客户端将是另一台 PC，但其他人可能在同一个 Wifi 网络上。尝试保护这种连接的好方法是什么，或者这甚至是不可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:04:16.770

将 SSL 与相互身份验证一起使用。

您无需为证书付费，您可以成为自己的证书颁发机构并授予任意数量的证书。

# r - 键入 NA 值时，对数据帧进行子集化不起作用

> ID：13385434
> 
> 赞同：0
> 
> 时间：2012-11-14T18:57:25.363
> 
> 标签：r

我有一个这样的数据框

xx

```
dput(head(xx,10))
structure(list(JobName = c("EXBCV01D", "EXBCV01D", "EXBCV01D", 
"EXBCV01D", "EXBCV01D", "EXBCV01D", "EXBCV01D", "EXBCV01D", "EXBCV01D", 
"EXBCV01D"), Date = c(120820L, 120817L, 120816L, 120815L, 120814L, 
120813L, 120810L, 120809L, 120808L, 120807L), TargetDate = c(NA_integer_, 
NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_, 
NA_integer_, NA_integer_, NA_integer_, NA_integer_)), .Names = c("JobName", 
"Date", "TargetDate"), row.names = c(NA, 10L), class = "data.frame") 
```

我需要抓取目标不是的所有行

我正在做这个 xxx<-with(xx, xx[!is.na(TargetDate), ])

我明白了：

```
head(xxx)
      JobName   Date TargetDate
2689 EXBCV06D 120820         -1
2690 EXBCV06D 120820         -1
2691 EXBCV06D 120820         -1
2692 EXBCV06D 120820         -1
2693 EXBCV06D 120817         -1
2694 EXBCV06D 120817         -1 
```

我在同一日期收到多个 JobName。这里发生了一些奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:01:30.087

~~应该`is.na(....)`不是`is.NA(....)`，在函数名中`na`是小写的。~~

例如使用您的数据

```
x <- read.table(text = "Date   Process Target
1/1/2012 ftp    -2
1/2/2012 http    -1
1/3/2012 telnet  NA
1/4/2012  ssh    NA", header = TRUE, na.strings="NA")
x <- transform(x, Target = factor(Target)) 
```

这行得通

```
R> xx <- subset(x, !is.na(Target))
R> xx
      Date Process Target
1 1/1/2012     ftp     -2
2 1/2/2012    http     -1 
```

您也可以通过通常的子集例程来执行此操作：

```
R> with(x, x[!is.na(Target), ])
      Date Process Target
1 1/1/2012     ftp     -2
2 1/2/2012    http     -1 
```

或者

```
R> x[!is.na(x$Target), ]
      Date Process Target
1 1/1/2012     ftp     -2
2 1/2/2012    http     -1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:05:50.177

此外，您可能会觉得`complete.cases`很方便。您可以使用此函数删除任何列中带有`NA`s 的任何行。

```
d <- read.table(text="Date   Process Target
1/1/2012 ftp    -2
1/2/2012 http    -1
1/3/2012 telnet  NA
1/4/2012  ssh    NA", header=TRUE)

d[complete.cases(d), ]

#       Date Process Target
# 1 1/1/2012     ftp     -2
# 2 1/2/2012    http     -1 
```

我只是补充一点，建议您仅`subset`在交互模式下使用该功能，而不是在您的脚本中以编程方式使用。由于此函数的评估方式，可能会出现问题（参见[讨论](https://github.com/hadley/devtools/wiki/Evaluation)）。如果您只是在测试一些东西，请放心使用它。但是，如果您正在编写可能被其他人使用的函数，请在安全方面犯错，并使用`[`@Gavin 和我的答案中演示的标准子集语法。

# android - LstView findViewByID 返回 null

> ID：13385435
> 
> 赞同：0
> 
> 时间：2012-11-14T18:57:27.813
> 
> 标签：android, android-layout

我有几个在 XML 中定义的对象，当我尝试处理它们时返回 null。我看到几个帖子说要清理项目，但这没有帮助。当我探索 ListView 对象时，所有的孩子都是空的？所以我对自己做错了什么有点茫然。这是我认为相关的代码，但如果您需要查看其他内容，请告诉我，我会发布。

TIA JB

```
<Button
    android:id="@+id/btn_NextLift"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="30dp"
    android:layout_marginBottom="40dp"
    android:text="@string/str_BtnNxtTxt"
    android:onClick="btn_NextLiftClick"
    android:longClickable="true" /> 
```

在活动中：

```
public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.liftinterface);
        ...//More code....
        ...//Still in the OnCreate....
        lstvw_LiftData = (ListView)findViewById(R.id.lstvw_LiftData);
        ...//Image below of this object.....
        //Get a handle on our button
        Button btn_Nxt = (Button)this.findViewById(R.id.btn_NextLift);
        btn_Nxt.setOnLongClickListener(new OnLongClickListener()
        {
         public boolean onLongClick(View v)
         {
        SaveAdvance();

        return true;
          }
        }); 
```

![在此处输入图像描述](../Images/e8f1373696e09f761503e2793576ec36.png)

这只是我的 logcat 错误：

```
11-13 22:04:57.798: E/AndroidRuntime(787): FATAL EXCEPTION: main
11-13 22:04:57.798: E/AndroidRuntime(787): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.gpgvm.ironmike/org.gpgvm.ironmike.IcyArmActivity}: java.lang.NullPointerException
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.os.Looper.loop(Looper.java:123)
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-13 22:04:57.798: E/AndroidRuntime(787):  at java.lang.reflect.Method.invokeNative(Native Method)
11-13 22:04:57.798: E/AndroidRuntime(787):  at java.lang.reflect.Method.invoke(Method.java:507)
11-13 22:04:57.798: E/AndroidRuntime(787):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-13 22:04:57.798: E/AndroidRuntime(787):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-13 22:04:57.798: E/AndroidRuntime(787):  at dalvik.system.NativeStart.main(Native Method)
11-13 22:04:57.798: E/AndroidRuntime(787): Caused by: java.lang.NullPointerException
11-13 22:04:57.798: E/AndroidRuntime(787):  at org.gpgvm.ironmike.IcyArmActivity.onCreate(IcyArmActivity.java:83)
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-13 22:04:57.798: E/AndroidRuntime(787):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-13 22:04:57.798: E/AndroidRuntime(787):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:03:37.343

> 当我探索 ListView 对象时，所有的孩子都是空的？

*在* 完成之前不会绘制视图`onResume()`。所以 ListView 在`onCreate()`.

这个按钮在哪里？如果它在 ListView 中，您需要编写一个自定义适配器来覆盖它的侦听器。

* * *

**添加**

> 它位于 ListView 布局中。

您需要扩展您当前的适配器并覆盖`getView()`，以便为每一行提供像这样的唯一侦听器。请观看 Android 的 Romain Guy在多个 Google Talk 活动中详细讨论这个[确切的话题。](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)

# ios6 - 重命名 Xcode 头文件和实现文件

> ID：13385436
> 
> 赞同：0
> 
> 时间：2012-11-14T18:57:28.510
> 
> 标签：ios6, xcode4.5

我想知道，在 Xcode 中，是否有可能找到并更改对头文件名称的所有引用，并用其他东西对其进行更改并且仍然可以正常工作，我的意思是找到这样的名称![在此处输入图像描述](../Images/d84721a6f1d24cf03dcecb034479825a.png)：它会像这样找到对它的所有引用：![在此处输入图像描述](../Images/e4d219f89d88a0119d378c5c9f65fcc6.png)和 this:![在此处输入图像描述](../Images/19a7e7c9876ceb8338621f7220885070.png)并将它们替换为新名称。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:42:19.047

您可以使用 Xcode 中的“重构”功能重命名一个类：

*   在“@implementation BlueJaysViewController”中选择类名“BlueJaysViewController”。
*   选择编辑->重构->重命名...
*   输入新的类名并选择“重命名相关文件”

# c# - 如何在 RDLC 报告中显示阿拉伯数字？

> ID：13385447
> 
> 赞同：1
> 
> 时间：2012-11-14T18:58:26.890
> 
> 标签：c#, reporting-services, ssrs-2008, arabic

我想在我的报告中显示阿拉伯数字。

我试图将`Language`属性设置为，`ar`但它不起作用。也尝试了很多东西，但没有一个有效:(

知道怎么做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:54:00.443

尝试将 TextBox 的 NumeralVariant 属性设置为“3”。您还需要在操作系统上安装阿拉伯语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-27T11:03:23.147

尝试使用此功能设置包含英文数字的任何字符串，并将它们转换为报告源中的阿拉伯或印度数字字符，然后将该源传递给报告`

```
public string ArabicNumiric(string englishNo)
        {
            char[] arNumiricsChar = { '٠', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩' };
           // char[] arNumiricsChar =new char[]{ '٠'‎ , '١', '٢'‎ , '٣'‎, '٤', '٥'‎, '٦'‎, '٧'‎, '٨'‎, '٩' };           
            string araNO = string.Empty;
            if (!string.IsNullOrEmpty(englishNo))
            {
                char[] englishNoCharArray = englishNo.ToCharArray();
                for (int i = 0; i < englishNoCharArray.Length; i++)
                {
                    int noTst;
                    if (int.TryParse(englishNoCharArray[i].ToString(), out noTst))
                    {
                        englishNoCharArray[i] = arNumiricsChar[noTst];
                        araNO += englishNoCharArray[i];
                    }
                    else
                        araNO += englishNoCharArray[i];
                }
            }
            return araNO;
        } 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T12:20:34.100

答案很简单 有创意 用标准数字制作您的报告，然后
将“1”替换为“١‎”（复制和粘贴）这将起作用，将“2”替换为“٢‎”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-29T14:45:14.587

控制面板 > 更改键盘或其他输入法 > 格式 > 其他设置。将 [使用本机数字] 组合框值更改为 [上下文]

# objective-c - 奇怪的 NSData 输出

> ID：13385448
> 
> 赞同：0
> 
> 时间：2012-11-14T18:58:33.583
> 
> 标签：objective-c, ios, post, utf-8, nsdata

我有一些来自以下代码的意外结果：

```
- (NSData *)postDataWithDict:(NSDictionary *)postDict
{
    // Assume key is urlValid
    NSUInteger postCount = [postDict count];
    NSMutableArray *buildArray = [[NSMutableArray alloc] initWithCapacity:postCount];
    for (NSString *key in postDict) {
        //post data is key=value&key=value&key=value...

        // start with key
        NSMutableString *arrayLine = [NSMutableString stringWithString:key];

        [arrayLine appendString:@"="];

        // analyze and then append value
        id postValue = [postDict objectForKey:key];
        if ([postValue isKindOfClass:[NSNumber class]]) {
            NSString *valueString = [NSString stringWithFormat:@"%@",postValue];
            [arrayLine appendString:valueString];
        }
        else if ([postValue isKindOfClass:[NSString class]]) {
            NSString *urlEncodedString = [self urlEncodeValue:postValue];
            [arrayLine appendString:urlEncodedString];
        }
        else {

            NSLog(@"postKey: %@, postValue class:%@", key, [postValue class]);
            NSError *jsonError = nil;
            NSData *jsonData = [NSJSONSerialization dataWithJSONObject:postValue
                                                               options:0
                                                                 error:&jsonError];
            if (jsonError != nil) {
                NSLog(@"JSON serialization failed: %@ - %@", [jsonError localizedDescription], [jsonError userInfo]);
                NSLog(@"value: %@", postValue);
            }
            else {
                // need to urlencode
                NSString *stringifyJSON = [NSString stringWithUTF8String:[jsonData bytes]];
                NSString *urlJSONstring = [self urlEncodeValue:stringifyJSON];
                [arrayLine appendString:urlJSONstring];
            }
        }
        [buildArray addObject:arrayLine];
    }
    NSString *postString = [buildArray componentsJoinedByString:@"&"];
    NSData *postData = [postString dataUsingEncoding:NSUTF8StringEncoding];

    //testing
    NSLog(@"Post Dict: %@", postDict);
    NSLog(@"Post Array: %@", buildArray);
    NSLog(@"Post String: %@", postString);
    NSLog(@"Post Data: %@", [NSString stringWithUTF8String:[postData bytes]]);

    return postData;
} 
```

我的//测试日志结果：

```
 Post Dict: {
    authenticationString = b3210c0bc6d2c47f4c2f7eeea12e063d;
    dataMode = updateSingle;
    dateCreated = "374300293.81108";
    dateModified = "374609294.313093";
    dateSynced = "374610683.588062";
    entityName = CommodityTypes;
    myName = 21;
    sortKey = 21;
    username = iPhoneAdamek;
    usernameString = iPhoneAdamek;
    uuidKey = "53403EAE-DD4F-4226-A979-316EF7F43991";
} 
```

Post Dict 看起来不错。正是我想要的。

```
2012-11-14 13:31:23.640 FoodyU[11393:907] Post Array: (
    "myName=21",
    "dataMode=updateSingle",
    "dateSynced=374610683.588062",
    "uuidKey=53403EAE-DD4F-4226-A979-316EF7F43991",
    "sortKey=21",
    "dateModified=374609294.313093",
    "entityName=CommodityTypes",
    "dateCreated=374300293.81108",
    "authenticationString=b3210c0bc6d2c47f4c2f7eeea12e063d",
    "usernameString=iPhoneAdamek",
    "username=iPhoneAdamek"
) 
```

后阵列看起来不错。字符串都设置为连接到 HTTP POST 字符串。

```
2012-11-14 13:31:23.641 FoodyU[11393:907] Post String: myName=21&dataMode=updateSingle&dateSynced=374610683.588062&uuidKey=53403EAE-DD4F-4226-A979-316EF7F43991&sortKey=21&dateModified=374609294.313093&entityName=CommodityTypes&dateCreated=374300293.81108&authenticationString=b3210c0bc6d2c47f4c2f7eeea12e063d&usernameString=iPhoneAdamek&username=iPhoneAdamek 
```

帖子字符串看起来不错。我准备将其转换为数据以在`[NSMutableURLRequest setHTTPBody:postData]`.

```
2012-11-14 13:31:23.643 FoodyU[11393:907] Post Data: myName=21&dataMode=updateSingle&dateSynced=374610683.588062&uuidKey=53403EAE-DD4F-4226-A979-316EF7F43991&sortKey=21&dateModified=374609294.313093&entityName=CommodityTypes&dateCreated=374300293.81108&authenticationString=b3210c0bc6d2c47f4c2f7eeea12e063d&usernameString=iPhoneAdamek&username=iPhoneAdamekoneAdamek;
    usernameString = iPhoneAdamek;
    uuidKey = "53403EAE-DD4F-4226-A 
```

怎么回事？？？怎么`&username=iPhoneAdamek`变成的`&username=iPhoneAdamekoneAdamek; usernameString = iPhoneAdamek; uuidKey = "53403EAE-DD4F-4226-A`？

我对可可相当陌生。有什么问题吗：

```
NSData *postData = [postString dataUsingEncoding:NSUTF8StringEncoding]; 
```

或者

```
NSLog(@"Post Data: %@", [NSString stringWithUTF8String:[postData bytes]]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:14:57.883

你不应该使用`NSLog`as `NSData`，

```
NSLog(@"Post Data: %@", [NSString stringWithUTF8String:[postData bytes]]); 
```

而是将其用作，

```
NSLog(@"Post Data: %@", [[NSString alloc] initWithData:postData encoding:NSUTF8StringEncoding]); 
```

`[NSString stringWithUTF8String:[postData bytes]]`总是返回意想不到的结果。

根据[字节的文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/bytes)，

**`bytes:`** *返回一个指向接收者内容的指针。*

根据[Apple 文档`stringWithUTF8String`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithUTF8String%3a)，

**`stringWithUTF8String:`** *返回通过从给定的 UTF8 编码字节 C 数组中复制数据而创建的字符串。* 参数：`bytes`- **UTF8 编码中以 NULL 结尾的 C 字节数组。**

因此，当您使用时`[postData bytes]`，它不是以**NULL 结尾的**，因此当您使用 with 时，会`stringWithUTF8String`返回写入内存中的数据，直到遇到 NULL 终止。

# c# - 使用 LINQ 和 Lambda 进行多选和连接

> ID：13385450
> 
> 赞同：7
> 
> 时间：2012-11-14T18:58:36.733
> 
> 标签：c#, linq, lambda

我怎样才能做到这`query`一点`LINQ and LAMBDA`？

**询问**

```
Select san_negocio.imovel_id
      ,san_negocio.negocio_id
      ,san_imovel.credenciada_id
      ,san_proposta.proposta_id
      ,san_proposta.credenciada_id
  from san_negocio
  join san_proposta
    on san_negocio.imovel_id = san_proposta.imovel_id
  join san_imovel
    on san_negocio.imovel_id = san_imovel.imovel_id
 where san_negocio.credenciadacaptadora_id is null
   and san_negocio.credenciadavendedora_id is null
   and san_proposta.statusproposta_id = 2 
```

**我试过了：**

```
var objetos = db.San_Negocio.Join(db.San_Proposta, a => a.Imovel_Id, b => b.Imovel_Id, (a, b) => new { San_Negocio = a, San_Proposta = b })                
    .Join(db.San_Imovel, a => a.San_Negocio.Imovel_Id, c => c.Imovel_Id, (a, c) => new { San_Negocio = a, San_Imovel = c })
    .Where(a => a.San_Negocio.San_Negocio.CredenciadaCaptadora_Id == null && a.San_Negocio.San_Negocio.CredenciadaVendedora_Id == null)
    .Select(a => new { a.San_Negocio.San_Negocio.Negocio_Id, 
            a.San_Negocio.San_Negocio.Imovel_Id, 
            a.San_Imovel.Credenciada_Id }); 
```

我的疑问在于我的`Select`. 我怎样才能打电话给我的`San_Proposta`桌子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:03:12.233

您隐藏`San_Proposta`在名为 的字段中`San_Negocio`，因此调用`a.San_Negocio.San_Proposta`将访问它，但我建议以不嵌套字段的方式编写连接，如下所示：

```
var objetos = db.San_Negocio
    .Join(db.San_Proposta, 
          a => a.Imovel_Id,
          b => b.Imovel_Id, 
          (a, b) => new { San_Negocio = a, San_Proposta = b })                
    .Join(db.San_Imovel, 
          a => a.San_Negocio.Imovel_Id,
          c => c.Imovel_Id,
          (a, c) => new { a.San_Negocio, a.San_Proposta, San_Imovel = c })
    .Where(a => a.San_Negocio.CredenciadaCaptadora_Id == null && 
                a.San_Negocio.CredenciadaVendedora_Id == null)
    .Select(a => new
                 {
                     a.San_Negocio.Negocio_Id, 
                     a.San_Negocio.Imovel_Id,
                     a.San_Proposta.San_Proposta_Id, 
                     a.San_Imovel.Credenciada_Id
                 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T19:10:01.943

这是一个正确的 linq 语句：

```
from neg in db.san_negocio
join prop in san_proposta
    on neg.imovel.id equals prop.imovel_id
join imo in san_imovel
    on neg.imovel_id = imo.imovel_id
where neg.credenciadacaptadora_id == null && 
    neg.credenciadavendedora_id == null &&
    prop.statusproposta_id == 2
select new {
    ImovelID = neg.imovel_id,
    NegocioID = neg.negocio_id,
    Imo_CredenciadaID = imo.credenciada_id,
    PropostaID = prop.proposta_id
    Prop_CredenciadaID = prop.credenciada_id
}; 
```

这将使用上面列出的属性创建一个匿名对象的 IQueryable。

# .net - MemoryStream 使用多少内存？

> ID：13385452
> 
> 赞同：5
> 
> 时间：2012-11-14T18:58:42.313
> 
> 标签：.net, memorystream

我有一台 2 GB 的机器。在运行我的 exe 之前，我有 1.1 GB 的可用内存。当我运行你可以在下面找到的只有一行的 exe 时，我遇到了内存不足异常。

我预计以下行将使用大约 6 亿字节。MemoryStream 类是否使用比初始化容量更多的内存？

```
MemoryStream memory = new MemoryStream(600000000); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:07:15.107

根据下面的问答，很可能是因为您的 EXE 无法分配 600 兆的**连续**内存。（我试图在文档中找到一些东西，这是我能在短时间内想到的最好的东西。）

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/1af59645-cdef-46a9-9eb1-616661babf90](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/1af59645-cdef-46a9-9eb1-616661babf90)

> “几乎不会发生“内存不足”错误，因为没有足够的可用存储空间；正如我们所见，存储空间是磁盘空间，而现在磁盘很大。相反，会发生“内存不足”错误，因为该过程是无法在其虚拟地址空间中找到足够大的连续未使用页面部分来执行请求的映射。”

有趣的是，该答案链接到[Eric Lippert 的](https://stackoverflow.com/users/88656/eric-lippert)博客文章：http: [//blogs.msdn.com/b/ericlippert/archive/2009/06/08/out-of-memory-does-not-refer-to-physical-memory .aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/06/08/out-of-memory-does-not-refer-to-physical-memory.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:24:22.687

我找到了支持@SethFlowers 建议的文档（应用程序找不到足够大的连续内存块）：

> 当您初始化一个新进程时，运行时会为该进程保留一个连续的地址空间区域。这个保留的地址空间称为托管堆。
> 
> [*自动内存管理 (MSDN)*](http://msdn.microsoft.com/en-us/library/f144e03t.aspx)

以下是 .NET 内存使用情况以及如何分析应用程序的内存使用情况的一些附加说明：

[http://csharp.2000things.com/tag/virtual-memory/](http://csharp.2000things.com/tag/virtual-memory/)

# emacs - 只写缓冲区？

> ID：13385454
> 
> 赞同：3
> 
> 时间：2012-11-14T18:58:47.660
> 
> 标签：emacs, elisp, advising-functions, defadvice

我想模仿大多数控制台在缓冲区中的工作方式，有什么办法吗？即只允许将文本附加到缓冲区，但不能删除？

可能我可以禁用或建议一些删除字符的内置功能，但恐怕这不是一个非常可扩展的解决方案......我可能会错过一些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:36:34.347

如前所述，您可以设置只读文本属性。或者更简单地说，您可以设置`buffer-read-only`变量，然后编写一些覆盖它的命令。例如（保证 100% 未测试的代码提前）：

```
(defun append-only-s-i-c ()
  (let ((inhibit-read-only (eobp)))
    (call-interactively 'self-insert-command)))

(defvar append-only-mode-map
  (let ((map (make-sparse-keymap)))
    (define-key map [remap self-insert-command] 'append-only-s-i-c)
    map))

(define-derived-mode append-only-mode nil "Append-Only"
  "Here's the doc."
  (set (make-local-variable 'buffer-read-only) t)) 
```

正如这个例子所展示的，文本的只读性可以被命令覆盖，所以即使是`read-only`文本属性也不能保证 100% 的文本永远不会被修改，但是相当少的命令会覆盖只读信息，因此在实践中它不应该是一个严重的问题。

`before-change-functions`如果修改发生在 EOB 之前，另一种方法是使用并从那里发出错误信号。可能是更好的方法：

```
(defun append-only-b-c-f (beg end)
  (if (< beg (point-max)) (error "Can't modify text: append-only!")))

(define-derived-mode append-only-mode nil "Append-Only"
  "Here's the doc."
  (add-hook 'before-change-functions #'append-only-b-c-f nil 'local)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:14:31.987

我相信您想在`read-only`插入文本时设置该属性，请参阅[特殊属性](http://www.gnu.org/software/emacs/manual/html_node/elisp/Special-Properties.html)

# ruby-on-rails - Rails 3：Find_or_create_by_name 不保存

> ID：13385460
> 
> 赞同：0
> 
> 时间：2012-11-14T18:59:18.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我正在尝试`find_or_create_by`在我的位置模型中执行一项功能。属性正在保存，但*查找或创建*功能不起作用。我有一个`name`字段，如果我输入`'London'`，尽管该值已经在表中，但它正在保存。

任何建议为什么会这样？

编辑：添加了 before_save 调用，如评论所建议的那样。- 仍然有同样的问题。

*地点.rb*

```
 class Location < ActiveRecord::Base
     before_save :location_check
     has_and_belongs_to_many :posts
     has_many :assets
     attr_accessible :latitude, :longitude, :name, :post_id, :notes, :asset, :assets_attributes
     accepts_nested_attributes_for :assets, :allow_destroy => true
     include Rails.application.routes.url_helpers

   def location_check
    def locations_attributes=(values)
    self.location = Location.find_or_create_by_name(values)
   end
 end  
end 
```

编辑：这是输出日志：

```
INSERT INTO "locations" ("created_at", "latitude", "longitude", "name", "notes", "post_id", "updated_at") VALUES (?, ?, ?, ?, ?, 
 ?, ?)  [["created_at", Wed, 14 Nov 2012 19:48:50 UTC +00:00], ["latitude", nil],    ["longitude", nil], ["name", "London"], ["notes", "notes"], ["p
 ost_id", nil], ["updated_at", Wed, 14 Nov 2012 19:48:50 UTC +00:00]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:01:37.420

根据评论，我会这样重构它：

```
class Location < ActiveRecord::Base
   has_and_belongs_to_many :posts
   has_many :assets
   attr_accessible :latitude, :longitude, :name, :post_id, :notes, :asset, :assets_attributes
   accepts_nested_attributes_for :assets, :allow_destroy => true
   include Rails.application.routes.url_helpers

   validates :name, :uniqueness => true 
```

结尾

然后在您的控制器中执行以下操作：

```
loc = Location.find_or_create_by_name('London') 
```

如果您忘记并尝试这样做：

```
loc = Location.create(:name => 'London') 
```

并且该记录已经存在，它将无法通过唯一性验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:18:21.637

可能是由于您所拥有的内容与输入的输入之间的大小写不同吗？例如：伦敦和伦敦

# javascript - 如何使用 Node 自定义此构建脚本？

> ID：13385464
> 
> 赞同：1
> 
> 时间：2012-11-14T18:59:35.887
> 
> 标签：javascript, node.js, backbone.js, coffeescript, gruntjs

我有一个独特的目录结构，我需要帮助为其制作构建脚本。
这是[链接](https://github.com/PaulLeCam/labs/tree/proto-seedcamp)（略有不同）或目录结构：

```
client
  /extensions
  /sandbox
  /widgets
    /form
      /collections
      /models
      /views
      /styles
        custom.css
      /controllers
  main.coffee
server
  /views
    /layouts
    /errors
  app.coffee
  config.coffee 
```

我需要的几件事：

*   将带有 watch 任务的 coffeescript 编译成 server-dist + client-dist
*   将所有其他文件复制到它们的嵌套文件夹中，最好也使用监视任务

问题：

*   如果我只是编译coffeescript，它只是将.coffee 文件复制到.js 到它们的嵌套目录中，但是留下了加载了require.js 的.css / imgs / etc。我需要一种方法将它们也带入**-dist**目录
*   /client 文件夹中的 Main.coffee 是一个 require.config，可以与 requirejs grunt 构建工具一起使用来优化。

无论如何，最简单的解决方案就是我正在寻找的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:06:33.057

我最终使用了 grunt - 完成了以下任务：

*   **clean**：清除服务器/客户端构建目录
*   **watch**：监控 .coffee 文件和两个构建目录
*   **复制**：复制客户端/服务器文件以构建目录，忽略由咖啡任务管理的 .coffee 文件
*   **coffee** : 将 .coffee 文件编译为 .js 将它们移动到构建目录

这是当前迭代中的 grunt 文件：

```
grunt.initConfig({

 clean: {
   build: ['client-dist', 'server-dist'],
   release: []
 },

 watch: {
   coffee: {
     files: ['client/**/*.coffee', 'server/**/*.coffee'],
     tasks: 'coffee reload'
   },
   reload: {
     files: ['client/**/*.!(coffee)', 'server/**/*.!(coffee)'],
     tasks: 'copy reload'
   }
 },

 copy: {
   client: {
     files: {
       "client-dist/": "client/**/*.!(coffee)"
     },
     options: {
       basePath: "client"
     }
   },
   server: {
     files: {
       "server-dist/": "server/**/*.!(coffee)"
     },
     options: {
       basePath: "server"
     }
   }
 },

 coffee: {
   compile: {
     files: {
       'server-dist/*.js': 'server/**/*.coffee',
       'client-dist/*.js': 'client/**/*.coffee'
       }
     }
 }

});

grunt.loadNpmTasks('grunt-contrib');
grunt.loadNpmTasks('grunt-reload');

grunt.registerTask('default', '');
grunt.registerTask('build', 'clean:build copy coffee watch'); 
```

# c# - 如何使用c#确定在GridView中单击了哪一行

> ID：13385466
> 
> 赞同：0
> 
> 时间：2012-11-14T18:59:49.977
> 
> 标签：c#, gridview

我的表单中有一个 GridView1，它从我的数据库中填充一个表。我表中的列是

> ID NAME 电子邮件添加

现在我希望用户单击 ID Row 并在标签中显示一条消息，用户单击了哪一行。我怎样才能做到这一点？我已经在谷歌上搜索了很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:04:40.193

[您可以在DataGridView.CellClick 事件处理](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellclick.aspx)程序中找到单击的行/列。

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    // e.RowIndex
    // e.ColumnIndex
} 
```

# xmlhttprequest - 三星智能电视挂在 XHR 上

> ID：13385467
> 
> 赞同：2
> 
> 时间：2012-11-14T18:59:51.453
> 
> 标签：xmlhttprequest, samsung-smart-tv, smart-tv

我正在制作连接到网页的应用程序，该网页通过 XHR 返回和带有图像的 XML RSS 提要。然后我解析 xml 并提取图像 url。该代码在模拟器中运行良好并显示所有图像。在我用来测试它只是挂起的应用程序的盒子/蓝光播放器上。

XHR 的模拟器和真实设备之间有什么已知的区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:34:33.863

我的第一个想法是您可能会遇到跨域策略问题。这个 XML 文件是否在远程服务器上？如果是，请尝试将其放在应用程序目录中并尝试使用此本地版本的 XML 运行您的应用程序。

据我所知，SDK 的模拟器并不关心跨域的东西。

如果这无济于事，问题就更深了。你知道如何使用 SDK 控制台在真机上调试应用程序吗？在您的代码中放置大量`alerts`逻辑的每个部分。然后运行您的应用程序并在控制台上观察它将挂起的部分。

这就是我在这个阶段所能提供的全部帮助。当您在代码中找到挂起的位置时，我几乎可以肯定您会找到解决方案，如果没有在这里给我更多信息 - 粘贴您的代码。

# django - IntegrityError：列 user_id 不是唯一的

> ID：13385474
> 
> 赞同：1
> 
> 时间：2012-11-14T19:00:19.530
> 
> 标签：django, django-forms, django-views, django-users

我正在创建 Django 用户注册表单。但是我无法弄清楚为什么 Django 在我提交注册信息时会返回此错误。

```
IntegrityError : column user_id is not unique 
```

详细地说，[views.py] 的这一部分在错误页面中突出显示。

```
uasite1 = UserProfile.objects.get_or_create(user=user, name=form.cleaned_data['name'],major=form.cleaned_data['major'],email=form.cleaned_data['email']) 
```

有人可以告诉我发生此错误的原因吗？这是我的代码：

模型.py

```
from django.db import models
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    name = models.CharField(max_length=50)
    major = models.CharField(max_length=50)
    email = models.EmailField()

    def __unicode__(self):
        return self.name 
```

表格.py

```
from django.forms import ModelForm
from uasite1.models import UserProfile
from django import forms
from django.contrib.auth.models import User

class RegistrationForm(ModelForm):
    username = forms.CharField(label=('User Name'))
    password = forms.CharField(label=('Password'), widget=forms.PasswordInput)
    password1 = forms.CharField(label=('Verify Password'), widget=forms.PasswordInput)

    class Meta:
        model = UserProfile
        exclude = ('user',)

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError("That username is already taken, please select another.")

    def clean_email(self):
        data = self.cleaned_data['email']
        if "@gmail.com" not in data:
             raise forms.ValidationError("Must include @gmail.com")
        return data

    def clean(self):

        password = self.cleaned_data['password']
        password1 = self.cleaned_data['password1']

        if password and password1 and password != password1:      
            raise forms.ValidationError("The passwords did not match. Please try again.")
        return self.cleaned_data 
```

视图.py

```
from django.shortcuts import render_to_response
from django.http import HttpResponseRedirect,HttpResponse
from uasite1.forms import RegistrationForm
from uasite1.models import UserProfile
from django.template import RequestContext
from django.contrib.auth.models import User
from django.contrib.auth import authenticate

def SecondhandRegistration(request):

    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        form = RegistrationForm(request.POST)

        if form.is_valid():
            user = User.objects.create_user(username= form.cleaned_data['username'],email = form.cleaned_data['email'], password = form.cleaned_data['password1'])
            user.save()

            uasite1 = UserProfile.objects.get_or_create(user=user, name=form.cleaned_data['name'],major=form.cleaned_data['major'],email=form.cleaned_data['email'])
            uasite1.save()
            return HttpResponseRedirect('/profile/')
        else:
            return render_to_response('register.html',{'form': form}, context_instance=RequestContext(request))
    else:
        form = RegistrationForm()
        context = {'form': form}
        return render_to_response('register.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T09:20:57.693

我假设您已经清除了用户表并再次开始测试注册。在这种情况下，先前的数据将保留在配置文件表中，因此可能会出现此错误。

# android - 如何为 EditText 设置样式？

> ID：13385478
> 
> 赞同：-6
> 
> 时间：2012-11-14T19:00:32.717
> 
> 标签：android

我正在开发一些 Android 应用程序，我需要更改 EditText 的样式。我用的是4.0版本，需要设置边框宽度、边框颜色和背景颜色、圆角。我该怎么做？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:07:31.407

我建议您遵循[Google 的初学者教程](http://developer.android.com/training/basics/firstapp/index.html)，其中涵盖了启动和运行所需的所有步骤。然后，您还将遇到[本节](http://developer.android.com/training/basics/firstapp/building-ui.html)，您将学习如何通过 XML 样式文件设置视图的视觉外观。您也可以以编程方式设置所有可视属性，但通常不鼓励这样做，因为您希望**将表示与应用程序逻辑分开**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:30:14.510

我会给你链接来实现你所要求的。

**自定义背景和边框**：[在 Android 中使用 State List 更改 EditText 小部件的背景颜色和边框颜色](http://wptrafficanalyzer.in/blog/changing-background-color-and-border-color-of-an-edittext-widget-using-state-list-in-android/)

**圆角**：[如何创建带有圆角的 EditText？](https://stackoverflow.com/questions/3646415/how-to-create-edittext-with-rounded-corners)

# c# - 确保主线程等待所有任务完成

> ID：13385479
> 
> 赞同：2
> 
> 时间：2012-11-14T19:00:39.303
> 
> 标签：c#, multithreading, task-parallel-library, task

我正在编写一个 C# 控制台应用程序，并且遇到一个问题，即主线程在所有衍生的任务有机会完成之前关闭。一般程序流程如下所示：

该程序将目录路径作为命令行参数。然后它遍历该目录中与特定扩展名匹配的每个文件，并为每个匹配文件生成一个新任务以打开并分析该文件：

```
Directory.GetFiles(directoryPath).ToList<string>().Where(x => Path.GetExtension(x) == ".xfast").ToList().ForEach(x => ProcessXFastFile(x)); 
```

这些文件中的每一个都包含大量对应于唯一产品密钥的 CSV 值。例如，一个文件可能包含 100 万个 CSV 行和 400 个唯一的产品密钥。该程序的重​​点是根据产品密钥对所有行进行排序，然后根据密钥将它们写回单个文件。

因此，在 ProcessXFastFile 方法中，我`Dictionary<string, List<string>>`使用产品代码作为键值创建一个，并将与该键匹配的每个 CSV 行添加到相应的列表中。

排序完成后，我遍历字典并为每个 Key 值生成一个新任务，并在该列表中写出 CSV 行：

```
foreach (KeyValuePair<string, List<string>> entry in productDictionary) {
    string writePath = String.Format(@"{0}\{1}-{2}.txt", directoryPath, hour, entry.Key);
    List<string> quotes = entry.Value;
    Task writeFileTask = Task.Factory.StartNew(() => WriteProductFile(writePath, quotes));
} 
```

问题是主线程在每个 WriteProductFile 的任务有机会完成写出它们的数据之前就结束了。例如，我使用一个文件作为控制测试，并且知道字典中有大约 450 个唯一键，因此应该写出许多相应的文件。但是，在程序结束之前，只有大约 10 个文件有机会写出。

如何确保我的程序保持足够长的时间以完成所有任务？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:02:45.370

你可以把你得到的所有任务都放到 a`List<Task>`中，而不是仅仅创建它们并扔掉它们，然后使用`Task.WaitAll()`等待完成：

```
var tasks = new List<Task>();

foreach (KeyValuePair<string, List<string>> entry in productDictionary) {
    string writePath = String.Format(@"{0}\{1}-{2}.txt", directoryPath, hour, entry.Key);
    List<string> quotes = entry.Value;

    // add task to list
    tasks.Add(Task.Factory.StartNew(() => WriteProductFile(writePath, quotes)));
}

// now wait for all tasks to finish, you'd also want to handle  exceptions of course.
Task.WaitAll(tasks.ToArray()); 
```

有很多变体`WaitAll()`，您可以无限期地等待（如上所述），或者等待一个`TimeSpan`如果超时然后打印一个进度消息并再次等待，等等......

# windows - 批处理文件 | 符号：无缘无故插入空格

> ID：13385482
> 
> 赞同：0
> 
> 时间：2012-11-14T19:00:42.757
> 
> 标签：windows, batch-file, pipe

我有一个包含此代码段的批处理文件：

```
systeminfo|findstr /B "Host Name:"|findstr /C:"COMPNAME-SET"
if %ERRORLEVEL% EQU 0 (
echo This computer is either a test machine or has not had it's name configured yet. Continuing will run the script in test mode.
pause
) 
```

我不知道为什么，但顶线不起作用。输出是这样的：

```
Z:\>systeminfo | findstr /B "Host Name:"  | findstr /C:"IGSWIDWB-SET"
The syntax of the command is incorrect.
Z:\> 
```

“标记后似乎有一个额外的空格。我曾经在管道和命令之间使用空格，但我删除了它们以尝试修复此错误。没有区别。我确保文件在带有 Windows 风格字符的 Windows 格式，我现在不知道该怎么办。这是我正在使用的标准批处理脚本。

这段代码让我在我开发的自动设置脚本中确定它是笔记本电脑还是台式机。主机名具有特定的协议，它将根据此步骤浏览一组安装。

有谁知道怎么了？谢谢！

作为对 [name here] 的回应，这里是在它之前执行的代码（以及在它之后执行的一些代码）；但是我已经修改了这些词，所以不清楚它是什么。我在一个喜欢我不共享内部文档的组织工作，但不介意我是否混淆它。失败的部分在第一个 systeminfo 所在的行上。

```
::@echo off
setlocal
set BATDIR=%~dp0%
set SCRIPTVER=3.2
cls
set SUBDEPARTMENT=false

if not [%1]==[] (
    if "%1" EQU "/help" (
        echo Calling For Help.
        CALL :HELP
        goto :EOF
       )

    if "%1" EQU "/SUBDEPARTMENT" (
        set SUBDEPARTMENT=true
    echo Set SUBDEPARTMENT options to true.
    ::echo SUBDEPARTMENT Switch does not work on this version of the script.  ::CD VERSION ONLY :: Continuing without.
    echo.
    goto CONTINUE
    )
)

:Continue
color 0B
   echo XXXX AutoInstaller Script for Windows 7/XP (x86/amd64)
   echo Version %SCRIPTVER% - Build Date: 11/14/2012
   echo Estimated Install Time: 80(Core) to 180(SUBDEPARTMENT) minutes
   echo Computer will reboot to phase 2 once completed.
   echo A log file for this script can be found at %USERPROFILE%\AutoInstallerLog.txt
   echo ---------------------------------------------------------------
echo Preparing System...
echo Auto Install Log, generated on: > %USERPROFILE%\AutoInstallerLog.txt
echo AutoInstaller Script Version: %SCRIPTVER% >> %USERPROFILE%\AutoInstallerLog.txt
DATE /T >> %USERPROFILE%\AutoInstallerLog.txt
echo This log file reflects what steps completed in the ASI script. It does not mean they completed correctly so please make sure that all software is installed correctly!
echo Make sure the computer has been renamed to match the type [e.g. COMPUTER_PROTOCOL]. Make sure it  has also been rebooted it so that it takes effect.
echo SystemInfo Output: >> %USERPROFILE%\AutoInstallerLog.txt
systeminfo >> %USERPROFILE%\AutoInstallerLog.txt

::Setting script parameters
echo.
echo Configuring script parameters.

::Check if it's a test machine
echo systeminfo^|findstr /B "Host Name:"^|findstr /C:"TESTCOMP_NAME"
systeminfo|findstr /B "Host Name:"|findstr /C:"TESTCOMP_NAME"
if %ERRORLEVEL% EQU 0 (
echo This computer is either a test machine or has not had it's name configured yet. Continuing will run the script in test mode.
pause
set TestComp=1
::TestOS
   systeminfo|findstr /C:"XP Professional"
   if %ERRORLEVEL% EQU 0 (
      set OS=XP
      goto :finishTestOS
     )

    systeminfo | findstr /C:"7 Enterprise"
    if %ERRORLEVEL% EQU 0 (
      set OS=7
      goto :finishTestOS
     )
     :finishTestOS

set STYLE=workstation
goto :AdminCheck
)
::Debug Statement:
echo NEXT PArT!!! LINE 67
::::OS Version
:getOS
   systeminfo|findstr /C:"XP Professional"
   if %ERRORLEVEL% EQU 0 (
      set OS=XP
      goto :finishOS
     )

    systeminfo|findstr /C:"7 Enterprise"
    if %ERRORLEVEL% EQU 0 (
      set OS=7
      goto :finishOS
     )

    :finishOS
    echo This system is running Windows %OS%.

::Get Form Factor
:getStyle
    systeminfo | findstr /B "Host Name:" | findstr /C:"WORKSTATION_PROTOCOL"
    if %ERRORLEVEL% EQU 0 (
      set STYLE=laptop
     ) else (
      set STYLE=workstation
     )
     :finishStyle
    echo This system is a %STYLE%.

if not defined STYLE (
    echo System style not configured correctly. The name of the computer likely does not follow protocol, it must have PROTOCOLS in it.
    goto :ERROREND
)

if not defined OS (
    echo OS not detected properly. The script may need to be updated to detect new versions of Windows.
    goto :ERROREND
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:30:15.943

您发布的代码片段没有任何问题。它单独工作得很好。

我假设您在显示的代码中看到了“额外”空格，因为 ECHO 已打开。这些空间是解析器如何处理一行的产物。您不必担心它们（尽管在 ECHO 为 ON 时查看输出是诊断问题的宝贵工具）。

ECHO ON 输出针对许多批处理构造进行了修改。例如，以下完全有效的代码

```
if "a"=="b" >test.txt echo matched 
```

如果 ECHO 为 ON，则显示如下

```
if "a" == "b" echo matched 1>test.txt 
```

可以看到已经添加了空格，重定向被移到了末尾，并且在重定向的前面插入了一个 1（代表 stdout）。这一切都很正常——命令执行得很好。（当然它什么也不做，因为 IF 评估为 FALSE）如果 IF 条件更改为 TRUE，则匹配后的额外空间将不会包含在输出中。

您不必担心 ECHO ON 输出中出现额外的空格。但是您应该注意源代码中的多余空格。如果它出现在您的原始源代码中，则输出中将包含一个额外的尾随空格。

我怀疑语法错误问题出在您代码的其他地方。也许您可以提供更多发生错误的代码上下文。

**更新答案以响应问题的更新**

错误并没有发生在您认为的地方！语法错误出现在后面的复杂 IF 语句中。

您尝试`:finishTestOS`在带括号的代码块中使用标签。如果括号内的标签后面没有紧跟有效的非标签行，您将始终收到语法错误。（其实规则可能有点复杂，但这里不重要）

您可以通过简单地在标签下方放置一个 REM 语句来消除语法错误。

```
:finishTestOS
rem 
```

但是 - 你仍然会遇到重大问题 - 代码不会按照你想要的方式工作。您永远不应尝试 GOTO 括号内的代码块中的标签。[有关更多信息，请参阅if 块行为非常奇怪的（Windows 批处理）Goto](https://stackoverflow.com/q/8481558/1012053)的公认答案。

您遇到的另一个问题是您尝试`%ERRORLEVEL%`在带括号的代码块内进行访问。该值在解析时扩展，并且一次解析整个块，因此该值将是您进入 IF 块之前存在的 ERRORLEVEL。有很多方法可以解决。

*   延迟扩展：`if !errorlevel!==0 ...`
*   `if not errorlevel 1 ...` （阅读 IF 语句的文档）
*   用于`&&`成功时的条件执行和/或`||`失败时的条件执行。在你的情况下`systeminfo|findstr ... && set OS=...`

我怀疑您可能还有其他问题，但我没有时间诊断所有问题。

# php - 无法让此自动电子邮件在 php 中工作。你能帮助我吗？

> ID：13385487
> 
> 赞同：0
> 
> 时间：2012-11-14T19:00:46.790
> 
> 标签：php, mysql

我正在尝试制作这个秘密的圣诞老人自动电子邮件脚本，这真的让我感到困惑......它无法正确发送电子邮件（一个人收到大量电子邮件，没有其他人收到......）

我试图在 for 循环中更改数组的长度，我做对了吗？

我使用了 shuffle 函数和 email 函数，它们似乎运行良好（除了 email 函数上的 for 循环——我这样做对吗？）。这是我需要帮助的主要功能。

这是代码：

```
<?php
function twodshuffle($array)
{
    // Get array length
    $count = count($array);
    // Create a range of indicies
    $indi = range(1,$count);
    // Randomize indicies array
    shuffle($indi);
    // Initialize new array
    $newarray = array($count);
    // Holds current index
    $i = 0;
    // Shuffle multidimensional array
    foreach ($indi as $index)
    {
        $newarray[$i] = $array[$index];
        $i++;
    }
    return $newarray;
}

function email($Name, $Email, $Likes)
{
    $to = $Email;
    $subject = '[Secret Santa] Happy Lolidays from Santabot 2020! Your match is here!';

    $message = "HEY! You are " . $Name ."'s Secret Santa. Isn't that exciting? \r\n\r\nThis is what your match filled in for likes/dislikes: \r\n----------------------------\r\n" . $Likes . "\r\n----------------------------\r\n\r\n\r\nNow get them something nice and thoughtful. We will be swapping sometime around Christmas, so you have a lot of time to put some thought in it.\r\nLet's keep gifts around the $30 mark.\r\n\r\nHappy Lolidays,\r\nDCo's Santabot 2020.\r\n\r\nPS: I have set this up so not even I know the matches nor is a list stored anywhere. DO NOT delete this email if you are at risk of forgetting your match.";

$headers = 'From: Santabot 2020 <santabot2020@mydomain.com>' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
sleep(1000);
}

$con = mysql_connect("mysql.myserver.com", "username", "password") or die(mysql_error());
mysql_select_db("lolidays_dco", $con) or die(mysql_error());
$array;
//I just changed this array size now. Is this the right syntax?
for ($i = 1; $i <= array.length() -1; $i++) {
    $sql = "SELECT * FROM tbl_data WHERE Number = " . $i;
    $result = mysql_query($sql);
    $count=mysql_num_rows($result);
    while($row = mysql_fetch_array($result))
        {
        $Name = $row['Name'];
        $Email = $row['Email'];
        $Likes = $row['Likes'];
        }
    $array[$i] = array("Name" => $Name, "Email" => $Email, "Likes" => $Likes);

}
$array = twodshuffle($array);
$string;
//changed this array length as well, is this the right syntax?
for ($i = 0; $i <= array.length(); $i++) {
    if ($i == 2) {
        $n = $array['0']["Name"];
        $e = $array[$i]["Email"];
        $l = $array['0']["Likes"];
        email($n, $e, $l);
        echo "Email Sent!<br />";
        $string = $string . $array[$i]["Name"] . " => " . $array['0']["Name"] . "\r\n";
        email('Matches', 'backup@email.com', $string);
    }
    else {
        $j = $i + 1;
        $n = $array[$j]["Name"];
        $e = $array[$i]["Email"];
        $l = $array[$j]["Likes"];
        email($n, $e, $l);
        echo "Email Sent!<br />";
        $string = $string . $array[$i]["Name"] . " => " . $array[$j]["Name"] . "\r\n";

    }
}
echo "<strong>Done!</strong>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:02:06.457

您已硬编码收件人：

```
 $n = $array['0']["Name"];   <---should be $i, not '0'
    $e = $array[$i]["Email"];
    $l = $array['0']["Likes"];   <---should be $i, not '0' 
```

# c# - 向防火墙添加 IP 例外

> ID：13385491
> 
> 赞同：2
> 
> 时间：2012-11-14T19:01:02.343
> 
> 标签：c#, firewall

我正在做一个项目，为此，我需要在防火墙中禁止 IP 地址。但是我如何在 C# 中做到这一点？到目前为止我知道：

```
public static INetFwMgr WinFirewallManager()
{
    Type type = Type.GetTypeFromCLSID(
        new Guid("{304CE942-6E39-40D8-943A-B913C40C9CD4}"));
    return Activator.CreateInstance(type) as INetFwMgr;
}
private void button1_Click(object sender, EventArgs e)
{
    INetFwMgr manager = WinFirewallManager();
    //Adding the exception to the firewall
} 
```

但现在我不知道如何为 IP 地址添加例外。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:36:44.157

检查此[论坛](http://social.msdn.microsoft.com/Forums/hu-HU/csharpgeneral/thread/f6580aaf-ed47-4bb1-b976-6108595b8dfb)的解决方案：

```
using System;
using System.Runtime.InteropServices;
using System.Text;
using NetFwTypeLib;
namespace WinFirewall
{
    public class FWCtrl
    {
        const string guidFWPolicy2 = "{E2B3C97F-6AE1-41AC-817A-F6F92166D7DD}";
        const string guidRWRule = "{2C5BC43E-3369-4C33-AB0C-BE9469677AF4}";
        static void Main(string[] args)
        {
            FWCtrl ctrl = new FWCtrl();
            ctrl.Setup();
        }
        public void Setup()
        {
            Type typeFWPolicy2 = Type.GetTypeFromCLSID(new Guid(guidFWPolicy2));
            Type typeFWRule = Type.GetTypeFromCLSID(new Guid(guidRWRule));
            INetFwPolicy2 fwPolicy2 = (INetFwPolicy2)Activator.CreateInstance(typeFWPolicy2);
            INetFwRule newRule = (INetFwRule)Activator.CreateInstance(typeFWRule);
            newRule.Name = "InBound_Rule";
            newRule.Description = "Block inbound traffic from 192.168.0.2 over TCP port 4000";
            newRule.Protocol = (int) NET_FW_IP_PROTOCOL_.NET_FW_IP_PROTOCOL_TCP;
            newRule.LocalPorts = "4000";
            newRule.RemoteAddress = "192.168.0.2";
            newRule.Direction = NET_FW_RULE_DIRECTION_.NET_FW_RULE_DIR_IN;
            newRule.Enabled = true;
            newRule.Grouping = "@firewallapi.dll,-23255";
            newRule.Profiles = fwPolicy2.CurrentProfileTypes;
            newRule.Action = NET_FW_ACTION_.NET_FW_ACTION_BLOCK;
            fwPolicy2.Rules.Add(newRule);
        }
    }
} 
```

对于 Windows XP 解决方案检查： [Windows XP SP2 防火墙控制器](http://www.codeproject.com/Articles/10911/Windows-XP-SP2-Firewall-Controller)

# css - CSS 不透明度与 rgba：哪个更好？

> ID：13385492
> 
> 赞同：38
> 
> 时间：2012-11-14T19:01:02.433
> 
> 标签：css

假设您将 CSS 不透明度应用于纯色。就内存和性能而言，使用 rgba 值还是颜色+不透明度更好？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-03T21:13:09.520

正如其他人所说，`rgba()`并且`opacity`工作方式不同：

*   `rgba()`影响CSS 所针对的元素的单个属性，例如`color`或`background-color`，并且**仅影响这些元素**`border-color`
***   `opacity`影响目标元素及其所有 DOM 树子元素的所有属性（整个外观）**

 **尽管如此，使用其中任何一种都可以实现许多效果，并且性能/兼容性**确实**有所不同，因此这个问题并非毫无意义。

根据我的经验，使用属性尤其是动画`opacity`属性是导致 webkit 浏览器中著名的文本抗锯齿故障的最简单方法（尤其是 Safari，[在 Safari 中悬停在 CSS 过渡上会减轻某些字体颜色](https://stackoverflow.com/questions/7947385/hovering-over-css-transition-in-safari-lightens-certain-font-color)）。这是因为它`opacity`影响的不是一个而是整个元素层次结构，浏览器有时无法正确区分哪些元素被重绘。使用时不会出现此类问题`rgba()`。

此外，许多版本的 Opera，包括几乎最新的 v12.11，都会产生严重的图形故障，并在某些使用场景中出现`opacity`. 将不透明度与文本、图像背景和文本阴影混合，然后滚动页面或 div 是重现问题的最简单方法。我在 iOS 版本的 Safari 上也出现了类似的问题。同样，没有这样的问题`rgba()`。

这些事情的发生是有原因的。从渲染的角度来看，当使用`rgba()`for `color`/ `background-color`/时`border-color`，我们明确地告诉浏览器哪些 DOM 元素以及哪些元素的图形层受到影响。这使得浏览器更容易确定何时需要重绘。此外，缩小影响范围是性能提升的保证，我通过尝试这两种选项并注意到使用该网站`rgba()`而不是`opacity`感觉明显更流畅来证实这一点，尤其是在 Safari 和 Opera 上。

当然，像褪色图像这样的事情是无法实现的`rgba()`（`mask-image`没有得到足够的支持），但对于简单的透明文本或背景等任务，`rgba()`似乎是一个更好的选择。如果与 CSS3 动画混合使用更是如此。

哦，记住在使用时总是包含一个后备`rgba()`：

```
.el {
  color: rgb(0, 0, 0);
  color: rgba(0, 0, 0, 0.5);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-14T19:06:29.647

`opacity`仅适用于整个元素，因此您不能使用该`opacity`属性将 Alpha 通道应用于颜色。您只能使用`rgba()`(or `hsla()`) 函数执行此操作。

所以`rgba()`/`hsla()`在所有方面都更好，因为这是唯一的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-22T14:25:22.120

首先，你必须知道这`rgb()`是跨浏览器，但是根据你的情况选择透明度`rgba()`，`opacity()`如果你有一个带有 DOM 树子的分区并且你不想让它的孩子变得透明更好`rgba()`但是如果它是一个孤独的分区我更喜欢使用`opacity()`.

因为浏览器使用[硬件加速](https://www.sitepoint.com/introduction-to-hardware-acceleration-css-animations/)进行渲染`opacity()`。 `filter: alfa(opacity=x)`相同，`opacity()`但它适用于 IE8 和更早版本。

这`rgba()`是一个强制浏览器计算颜色的功能，但不使用 GPU 加速，如果您`rgba()`在页面中频繁使用，您的浏览器可能会运行得很慢。如果您使用简单的颜色，我更喜欢使用十六进制颜色，因为它是预先计算的颜色，浏览器不会计算，只是绘制它。

毕竟，如果你的情况要求你使用`rgba()`但你想要 GPU 加速，你可以使用`transform: translateZ(0);`，除了你的浏览器强制使用 GPU 什么都不会发生。这是一个提高性能的技巧，但不要经常使用它。

[注意](https://developer.mozilla.org/en-US/docs/Web/CSS/color)：`transparent`颜色映射到的键`rgba(0, 0, 0, 0)`。它只是一个键，而不是一个确切的值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-12T19:07:04.003

rgba 解决方案提供更好的显示质量。例子：

```
#opacity {
  color: rgba(0, 0, 0, 0.5); // good quality //
} 
```

[![在此处输入图像描述](../Images/e70dfc4d8729d59110d7ca6fffb26072.png)](https://i.stack.imgur.com/y4hmC.png)

```
#opacity {
  opacity: 0.5; // bad quality //
} 
```

[![在此处输入图像描述](../Images/c37c31e8b85ae9fefd2e0c0c2473aed7.png)](https://i.stack.imgur.com/VR6de.png)**

# c# - 更改 DeploymentItem 的名称

> ID：13385495
> 
> 赞同：1
> 
> 时间：2012-11-14T19:01:06.957
> 
> 标签：c#, testing, deploymentitem

我正在使用`DeploymentItem`s 来部署测试文件。我想知道是否可以在部署位置更改部署文件的名称，而不仅仅是复制。例如：

```
[DeploymentItem("path/to/my/file/test.txt", "testfiles/somethingelse.txt")] 
```

它会部署 test.txt，但会将文件重命名为 somethingelse.txt。

还是我只需要在运行实际测试之前使用文件 I/O API 手动执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:31:43.967

看来这是不可能的。在测试设置期间必须手动复制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-27T07:25:49.243

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute.aspx)

（可选）目标目录路径必须是文件夹，并且是相对于部署目录的。如果该文件夹不存在，则会创建该文件夹。默认值为部署目录。您不能使用 DeploymentItem 更改文件名。

# iphone - 显示另一个 ViewController

> ID：13385500
> 
> 赞同：1
> 
> 时间：2012-11-14T19:01:19.770
> 
> 标签：iphone, objective-c, ios, xcode

请帮帮我。关闭现有视图控制器后如何显示另一个视图控制器？这是我的代码：

```
- (void)matchmakerViewControllerWasCancelled:
(GKMatchmakerViewController *)viewController{

    [self dismissModalViewControllerAnimated:YES];

   ViewController *Vc = [[ViewController alloc]init];
    [self presentModalViewController:Vc animated:YES];

} 
```

我的代码不起作用。请帮帮我。如果我在关闭ModalViewController 后编写NSLog，它会显示NSLog，但不会显示ViewController。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:07:43.633

`[self dismissModalViewControllerAnimated:YES];`已被弃用。尝试做：

```
- (void)matchmakerViewControllerWasCancelled:
(GKMatchmakerViewController *)viewController{

    [self dismissViewControllerAnimated:YES completion:^{
         ViewController *Vc = [[ViewController alloc]init];
         [self presentViewController:Vc animated:YES completion:^{}];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:07:56.617

只需检查一下

```
[self dismissModalViewControllerAnimated:NO];
Nextview *sec = [[Nextview alloc] initWithNibName:@"Nextview" bundle:nil];
[self presentModalViewController:sec animated:YES];
[sec release]; 
```

希望这有效。

# c# - 哪个工作得更快 Null coalesce ，三元或 If 语句

> ID：13385503
> 
> 赞同：7
> 
> 时间：2012-11-14T19:01:26.867
> 
> 标签：c#, .net, null-coalescing-operator

我们用[?? 运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)针对空值评估表达式，例如：

```
string foo = null;
string bar = "woooo";
string foobar= foo ?? bar ; 
// Evaluates foobar as woooo 
```

我们还使用了一个`if`语句，如果与上面的表达式一起使用，它的工作原理是一样的

```
string foo = null;
string bar = "woooo";
if(foo==null)
   string foobar=   "woooo" ;
// Evaluates foobar as woooo same as above 
```

还有[?: 三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)...

```
string foo = null;
string bar = "woooo";    
string foobar= foo==null ? "woooo" : null ;
// Evaluates foobar as woooo same as above 
```

我知道空值合并在语法上是精确的，但是两者之间哪个编译得更快并且执行得更快，为什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T19:15:25.977

你可能问错了问题。您不会选择使用其中一个而不是另一个主要是因为效率（尽管它可能是次要问题），而是由于实用性。

真的，您应该比较而不是比较，`??`因为它们有不同的目的。是的，它们都是某种形式的“有条件的”善，但关键是两者都评估为一个值，而不是，因此它们通常有不同的用途。`?:``if``??``?:``if`

例如，下面的代码：

```
Console.WriteLine("The order} is for {1} product",
    orderId, productId ?? "every"); 
```

用 写会更笨重`if`：

```
if (productId == null)
{
    Console.WriteLine("The order {0} is for every product",
        orderId);
}
else
{
    Console.WriteLine("The order {0} is for {1} product",
        orderId, productId);
} 
```

是的，你可以浓缩为一个，但是你会有一个临时变量，等等：

```
if (productId == null)
{
    productId = "every";
}

Console.WriteLine("The order {0} is for {1} product",
    orderId, productId); 
```

因此，实际上，您不应该比较两者，因为`??`如果参数是 ，它们的点是要评估一个值`null`，而点`if`是执行不同的路径（不直接产生一个值。

所以，一个更好的问题可能是，为什么不这样做：

```
Console.WriteLine("The order {0} is for {1} product",
    orderId, productId == null ? "every" : productId); 
```

这几乎是相同的（都评估为一个值）并且对于流量控制来说并不那么重要。

那么，让我们来看看区别。让我们以三种方式编写此代码：

```
// Way 1 with if
string foo = null;
string folder = foo;

if (folder == null)
{
    folder = "bar";
}

// Way 2 with ? :
string foo2 = null;
var folder2 = foo2 != null ? foo2 : "bar";

// Way 3 with ??
string foo3 = null;
var folder3 = foo3 ?? "bar"; 
```

对于 IF，我们得到以下 IL：

```
IL_0001:  ldnull      
IL_0002:  stloc.0     
IL_0003:  ldloc.0     
IL_0004:  ldnull      
IL_0005:  ceq         
IL_0007:  ldc.i4.0    
IL_0008:  ceq         
IL_000A:  stloc.1     
IL_000B:  ldloc.1     
IL_000C:  brtrue.s    IL_0016
IL_000E:  nop         
IL_000F:  ldstr       "bar"
IL_0014:  stloc.0 
```

对于条件 (? :)，我们得到以下 IL：

```
IL_0001:  ldnull      
IL_0002:  stloc.0     
IL_0003:  ldloc.0     
IL_0004:  brtrue.s    IL_000D
IL_0006:  ldstr       "bar"
IL_000B:  br.s        IL_000E
IL_000D:  ldloc.0     
IL_000E:  nop         
IL_000F:  stloc.1 
```

对于空合并 (??) 我们得到这个 IL：

```
IL_0001:  ldnull      
IL_0002:  stloc.0     
IL_0003:  ldloc.0     
IL_0004:  dup         
IL_0005:  brtrue.s    IL_000D
IL_0007:  pop         
IL_0008:  ldstr       "bar"
IL_000D:  stloc.1 
```

注意每个连续的如何更简单？IL 更大，`if`因为它需要分支逻辑来处理单独的语句。更小，`?:`因为它只是计算一个值（不分支到其他语句），但仍需要加载操作数以与 ( `null`) 进行比较。

这`??`是最简单的，因为有一个 IL 指令用于比较`null`(vs 加载`null`和比较它。

**所以**所有这一切都说，你说的是 IL 方面的一个非常小的差异，这可能会或可能不会影响性能。无论如何，与程序中更密集的工作（数学、数据库、网络等）相比，这**很可能没有太大的区别。**

因此，我建议选择*最*易读的一个，并且仅在通过分析发现当前方法不足且存在瓶颈时才进行优化。

对我来说，使用`?:`or的真正原因`??`是当您希望最终结果成为一个值时。也就是说，任何时候你都想写：

```
if (someCondition)
    x = value1;
else 
    x = value2; 
```

然后我会使用条件 ( `?:`)，因为这是一个很好的速记。 `x`根据此条件获取一个或另一个值...

然后我会更进一步，说同样是真的，你想根据标识符的 -ness`??`为变量分配一个值。`null`

所以`if`非常适合流量控制，但是如果您只是返回两个值之一或根据条件分配两个值之一，我会使用`?:`或`??`酌情使用。

*最后*请记住，这些东西是如何在幕后实现的（IL 和相关的性能）会随着 .NET Framework 的每次修订而发生变化（在我现在写这篇文章时，它们都非常接近可以忽略不计）。

因此，今天可能更快的东西明天可能不会更快。再说一次，我只想说选择最合适的那个，你会发现它最易读。

**更新**

顺便说一句，对于真正痴迷的人，我比较了上面每个代码样本的 10,000,000 次迭代，这是执行每个代码的总时间。看起来`??`对我来说是最快的，但这些又是*如此*接近以至于几乎无关紧要......

```
10,000,000 iterations of:
?: took: 489 ms, 4.89E-06 ms/item.
?? took: 458 ms, 4.58E-06 ms/item.
if took: 641 ms, 6.41E-06 ms/item. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T19:03:52.757

~~它们都应该编译为相同的 IL，因此执行相同。~~

即使他们不这样做，性能差异也可以忽略不计。除非我分析了我的应用程序并看到这些语句花费了大量时间，否则我什至不会考虑看这个。

始终使用最清晰的语法，除非您能证明它导致了性能问题，而不是之前。

# php - youtube api 错误

> ID：13385506
> 
> 赞同：0
> 
> 时间：2012-11-14T19:01:31.420
> 
> 标签：php, api, youtube

我有 PHP 循环，可以从 Youtube 频道中的特定播放列表中提取视频信息，但在遇到私人视频时会中断。它给出了一个致命错误：

> 警告：main() [function.main]：第 30 行的 F:\xampp\htdocs\youtube\index.php 中不再存在节点
> 
> 警告：main() [function.main]：第 30 行的 F:\xampp\htdocs\youtube\index.php 中不再存在节点
> 
> 致命错误：在第 35 行对 F:\xampp\htdocs\youtube\index.php 中的非对象调用成员函数 attributes()

代码如下

```
<body>
<div id="mainPlayer" width="425" height="344">
</div>
</div>
<div id="mainPlaylist" class="grid_6 omega">
<h3 class="title">Legal Feed with Kate Wheeler</h3>
<ul id="playlists">
<?php
// Loop through each video in each playlist

    // read feed into SimpleXML object
    // *Moved into header to load main Video as well
$playlistFeedURL = 'http://gdata.youtube.com/feeds/api/playlists/6549D4CA7BB99B16?v=2';
    $sxml = simplexml_load_file($playlistFeedURL);

    // iterate over entries in feed
    foreach ($sxml->entry as $entry) {
      // get nodes in media: namespace for media information
      $media = $entry->children('http://search.yahoo.com/mrss/');

      // get video player URL
      $attrs = $media->group->player->attributes();
      $watch = $attrs['url'];

      // get video thumbnail
      $attrs = $media->group->thumbnail[0]->attributes();
      $thumbnail = $attrs['url'];

      // get <yt:duration> node for video length
      $yt = $media->children('http://gdata.youtube.com/schemas/2007');
      $attrs = $yt->duration->attributes();
      $length = $attrs['seconds'];

      //get <yt:videoId> node for Video ID
      $yt = $media->children('http://gdata.youtube.com/schemas/2007');
      $playlistVideoID = $yt->videoid;

      // get <yt:stats> node for viewer statistics
      $yt = $entry->children('http://gdata.youtube.com/schemas/2007');
      $attrs = $yt->statistics->attributes();
      $viewCount = $attrs['viewCount'];

      // get <gd:rating> node for video ratings
      $gd = $entry->children('http://schemas.google.com/g/2005');
      if ($gd->rating) {
        $attrs = $gd->rating->attributes();
        $rating = $attrs['average'];  
      } else {
        $rating = 0;
      }

      ?>
      <div class="item">
          <span class="thumbnail left" rel="<?php echo $entry->id; ?>">
            <a href="<?php echo $watch; ?>" rel="<?php echo $playlistVideoID; ?>" onclick="_run();"><img src="<?php echo $thumbnail;?>" /></a>
          </span>
             <a href="<?php echo $watch; ?>" rel="<?php echo $playlistVideoID; ?>" onclick="_run();"><?php echo $media->group->title; ?></a>
          <span class="attr">Duration:</span> <?php printf('%0.2f', $length/60); ?> min.
          <div class="clear"></div>
      </div>      
    <?php
    }
?>
</ul> 
</body> 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:06:37.570

您可能正在使用 DOM 将 html 从 Youtube 中分离出来？对此表示敬意，但假设所有节点一直都在那里，例如

```
$nodes = $dom->getElementsByTagName('video');
$nodes[0]->attribute(....);  #<---but whatever if there's no video elements at all?

if ($nodes->length > 0) {
  $nodes[0]->attribute(...); #<--only does this if there was at least one video element
} 
```

# c# - 线程交互（从一个线程到另一个线程的数据）c#

> ID：13385509
> 
> 赞同：1
> 
> 时间：2012-11-14T19:02:01.303
> 
> 标签：c#, .net, winforms

我需要将信息从扫描数据线程传递到记录信息线程（写入 xml 文件）。它应该看起来像这样：

Application.Run() - 完成

扫描线程 - 完成

写入 xlm 线程 - ???

UI 更新线程 - 我想我做到了

而我现在得到的：

```
 private void StartButtonClick(object sender, EventArgs e)
    {
        if (FolderPathTextBox.Text == String.Empty || !Directory.Exists(FolderPathTextBox.Text)) return;
        {
            var nodeDrive = new TreeNode(FolderPathTextBox.Text);
            FolderCatalogTreeView.Nodes.Add(nodeDrive);
            nodeDrive.Expand();
            var t1 = new Thread(() => AddDirectories(nodeDrive));
            t1.Start();
        }
    }

     private void AddDirectories(TreeNode node)
    {
        string strPath = node.FullPath;
        var dirInfo = new DirectoryInfo(strPath);
        DirectoryInfo[] arrayDirInfo;
        FileInfo[] arrayFileInfo;

        try
        {
            arrayDirInfo = dirInfo.GetDirectories();
            arrayFileInfo = dirInfo.GetFiles();
        }
        catch
        {

            return;
        }

      //Write data to xml file
        foreach (FileInfo fileInfo in arrayFileInfo)
        {
            WriteXmlFolders(null, fileInfo);
        }
        foreach (DirectoryInfo directoryInfo in arrayDirInfo)
        {
            WriteXmlFolders(directoryInfo, null);
        }

        foreach (TreeNode nodeFil in arrayFileInfo.Select(file => new TreeNode(file.Name)))
        {
            FolderCatalogTreeView.Invoke(new ThreadStart(delegate { node.Nodes.Add(nodeFil); }));
        }

        foreach (TreeNode nodeDir in arrayDirInfo.Select(dir => new TreeNode(dir.Name)))
        {
            FolderCatalogTreeView.Invoke(new ThreadStart(delegate
                {node.Nodes.Add(nodeDir);
                }));

            StatusLabel.BeginInvoke(new MethodInvoker(delegate
                {
     //UI update...some code here
                }));
            AddDirectories(nodeDir);
        }
    }

      private void WriteXmlFolders(DirectoryInfo dir, FileInfo file)
    {//writing information into the file...some code here} 
```

如何将数据从 AddDirectories（递归方法）线程传递到 WriteXmlFolders 线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:04:18.123

这是一个线程如何生成另一个线程使用的数据的通用机制。无论您使用哪种方法（阅读：现成的类），内部原则都保持不变。主要参与者是（请注意，`System.Threading`命名空间中有许多可用的锁定类可以使用，但这些最适合这种情况：

`AutoResetEvent`- 这允许线程进入睡眠模式（不消耗资源），直到另一个线程将其唤醒。'auto' 部分意味着一旦线程唤醒，类将被重置，因此下一次`Wait()`调用将再次使其进入睡眠状态，而无需重置任何东西。

`ReaderWriterLock`或`ReaderWriterLockSlim`（如果您使用的是 .NET 4，建议使用第二个） - 这仅允许一个线程锁定以写入数据，但多个线程可以读取数据。在这种特殊情况下，只有一个阅读线程，但如果有很多，方法不会有所不同。

```
// The mechanism for waking up the second thread once data is available
AutoResetEvent _dataAvailable = new AutoResetEvent();

// The mechanism for making sure that the data object is not overwritten while it is being read.
ReaderWriterLockSlim _readWriteLock = new ReaderWriterLockSlim();

// The object that contains the data (note that you might use a collection or something similar but anything works
object _data = null;

void FirstThread()
{
    while (true)
    {
        // do something to calculate the data, but do not store it in _data

        // create a lock so that the _data field can be safely updated.
        _readWriteLock.EnterWriteLock();
        try
        {
            // assign the data (add into the collection etc.)
            _data = ...;

            // notify the other thread that data is available
            _dataAvailable.Set();
        }
        finally
        {
            // release the lock on data
            _readWriteLock.ExitWriteLock();
        }
    }
}

void SecondThread()
{
    while (true)
    {
        object local; // this will hold the data received from the other thread

        // wait for the other thread to provide data
        _dataAvailable.Wait();

        // create a lock so that the _data field can be safely read
        _readWriteLock.EnterReadLock();
        try
        {
            // read the data (add into the collection etc.)
            local = _data.Read();
        }
        finally
        {
            // release the lock on data
            _readWriteLock.ExitReadLock();
        }

        // now do something with the data
    }
} 
```

在 .NET 4 中，可以避免使用`ReadWriteLock`和使用其中一种并发安全的集合，例如[`ConcurrentQueue`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)它将在内部确保读/写是线程安全的。尽管如此，`AutoResetEvent`仍然需要。

.NET 4 提供了一种机制，可以用来避免甚至需要`AutoResetEvent`- [`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)- 这个类提供了让线程休眠直到数据可用的方法。[MSDN 页面](http://msdn.microsoft.com/en-us/library/dd267312.aspx)包含有关如何使用它的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:52:20.583

如果你用它作为答案

看看生产者消费者。

[BlockingCollection 类](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

[如何：实现各种生产者-消费者模式](http://msdn.microsoft.com/en-us/library/dd728068.aspx)

# ruby-on-rails - validates_uniqueness_of 不适用于创建用户的设计

> ID：13385512
> 
> 赞同：1
> 
> 时间：2012-11-14T19:02:08.523
> 
> 标签：ruby-on-rails, mongodb, devise, mongoid

我能够创建具有相同名称和电子邮件的用户，即使我要求这些字段是唯一的。

查看数据库，可能会出现问题的条目被删除，然后创建一个新条目。

模型：

```
class User
  include Mongoid::Document
  extend Rolify
  rolify
  include Mongoid::Timestamps

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :invitable, :database_authenticatable, :registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable

  ## Database authenticatable
  field :email,              :type => String, :default => ""
  field :encrypted_password, :type => String, :default => ""

  validates_presence_of :email
#  validates_presence_of :encrypted_password

  # override Devise method
  # no password is required when the account is created; validate password when the user sets one
  validates_confirmation_of :password
  def password_required?
    if !persisted? 
      !(password != "")
    else
      !password.nil? || !password_confirmation.nil?
    end
  end

  # override Devise method
  def confirmation_required?
    false
  end

  # override Devise method
  def active_for_authentication?
    confirmed? || confirmation_period_valid?
  end

  ## Recoverable
  field :reset_password_token,   :type => String
  field :reset_password_sent_at, :type => Time

  ## Rememberable
  field :remember_created_at, :type => Time

  ## Trackable
  field :sign_in_count,      :type => Integer, :default => 0
  field :current_sign_in_at, :type => Time
  field :last_sign_in_at,    :type => Time
  field :current_sign_in_ip, :type => String
  field :last_sign_in_ip,    :type => String

  # Confirmable
  field :confirmation_token,   :type => String
  field :confirmed_at,         :type => Time
  field :confirmation_sent_at, :type => Time
  field :unconfirmed_email,    :type => String # Only if using reconfirmable

  ## Lockable
  # field :failed_attempts, :type => Integer, :default => 0 # Only if lock strategy is :failed_attempts
  # field :unlock_token,    :type => String # Only if unlock strategy is :email or :both
  # field :locked_at,       :type => Time

  #invitable
  field :invitation_token, :type => String
  field :invitation_sent_at, :type => Time
  field :invitation_accepted_at, :type => Time
  field :invitation_limit, :type => Integer
  field :invited_by_id, :type => String
  field :invited_by_type, :type => String

  ## Token authenticatable
  # field :authentication_token, :type => String
  # run 'rake db:mongoid:create_indexes' to create indexes
  index({ email: 1 }, { unique: true, background: true })
  field :name, :type => String
  validates_presence_of :name
  validates_uniqueness_of :name, :email, :case_sensitive => false

  attr_accessible :role_ids, :as => :admin
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :created_at, :updated_at

  # add a welcome email sender

  after_create :send_welcome_email

  def attempt_set_password(params)
    p = {}
    p[:password] = params[:password]
    p[:password_confirmation] = params[:password_confirmation]
    update_attributes(p)
  end

  # new function to determine whether a password has been set
  def has_no_password?
    self.encrypted_password.blank?
  end

  # new function to provide access to protected method pending_any_confirmation
  def only_if_unconfirmed
    pending_any_confirmation {yield}
  end

  private

  def send_welcome_email
    unless self.email.include?('@example.com') && Rails.env != 'test'
      UserMailer.welcome_email(self).deliver
      UserMailer.newusernotify(self).deliver
    end
  end

end 
```

服务器日志：（一个名为“Bob”的用户已经存在，发送电子邮件至 test@test.com。在我请求创建一个名为“Sam”和 test@test.com 的新用户后，我得到的是：

```
Started POST "/users" for 127.0.0.1 at 2012-11-14 14:06:54 -0500
Processing by RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"test@test.com", "name"=>"Sam"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (6.2630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=app_development collection=users selector={"$query"=>{"email"=>"test@test.com", "encrypted_password"=>""}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 fields=nil (5.0299ms)
  MOPED: 127.0.0.1:27017 DELETE       database=app_development collection=users selector={"_id"=>"50a3c974b8e764fc0d000005"} flags=[:remove_first] (0.1829ms)
before build resource
after build resource
  MOPED: 127.0.0.1:27017 QUERY        database=app_development collection=users selector={"email"=>"test@test.com"} flags=[:slave_ok] limit=1 skip=0 fields={:_id=>1} (1.9441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=app_development collection=users selector={"name"=>/\ASam$/i} flags=[:slave_ok] limit=1 skip=0 fields={:_id=>1} (0.8898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=app_development collection=users selector={"email"=>/\Atest@test\.com$/i} flags=[:slave_ok] limit=1 skip=0 fields={:_id=>1} (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=app_development collection=users documents=[{"_id"=>"50a3ebceb8e764fc0d000006", "role_ids"=>[], "email"=>"test@test.com", "encrypted_password"=>"", "sign_in_count"=>0, "name"=>"Sam", "updated_at"=>2012-11-14 19:06:54 UTC, "created_at"=>2012-11-14 19:06:54 UTC}] flags=[] (1.3258ms)
  Rendered user_mailer/welcome_email.html.erb (0.0ms)
  Rendered user_mailer/welcome_email.text.erb (0.0ms) 
```

另请注意：模型的 rspec 测试（如下）通过。为什么要设计删除用户，然后插入新用户？

```
require 'spec_helper'

describe User do

  before(:each) do
    @attr = { 
      :name => "Example User",
      :email => "user@example.com",
      :password => "foobar",
      :password_confirmation => "foobar"
    }
  end

  it "should create a new instance given a valid attribute" do
    User.create!(@attr)
  end

  it "should require an email address" do
    no_email_user = User.new(@attr.merge(:email => ""))
    no_email_user.should_not be_valid
  end

  it "should accept valid email addresses" do
    addresses = %w[user@foo.com THE_USER@foo.bar.org first.last@foo.jp]
    addresses.each do |address|
      valid_email_user = User.new(@attr.merge(:email => address))
      valid_email_user.should be_valid
    end
  end

  it "should reject invalid email addresses" do
    addresses = %w[user@foo,com user_at_foo.org example.user@foo.]
    addresses.each do |address|
      invalid_email_user = User.new(@attr.merge(:email => address))
      invalid_email_user.should_not be_valid
    end
  end

  it "should reject duplicate email addresses" do
    User.create!(@attr)
    user_with_duplicate_email = User.new(@attr)
    user_with_duplicate_email.should_not be_valid
  end

  it "should reject email addresses identical up to case" do
    upcased_email = @attr[:email].upcase
    User.create!(@attr.merge(:email => upcased_email))
    user_with_duplicate_email = User.new(@attr)
    user_with_duplicate_email.should_not be_valid
  end

  describe "passwords" do

    before(:each) do
      @user = User.new(@attr)
    end

    it "should have a password attribute" do
      @user.should respond_to(:password)
    end

    it "should have a password confirmation attribute" do
      @user.should respond_to(:password_confirmation)
    end
  end

  describe "password validations" do

    it "should require a password" do
      User.new(@attr.merge(:password => "", :password_confirmation => "")).
        should_not be_valid
    end

    it "should require a matching password confirmation" do
      User.new(@attr.merge(:password_confirmation => "invalid")).
        should_not be_valid
    end

    it "should reject short passwords" do
      short = "a" * 5
      hash = @attr.merge(:password => short, :password_confirmation => short)
      User.new(hash).should_not be_valid
    end

  end

  describe "password encryption" do

    before(:each) do
      @user = User.create!(@attr)
    end

    it "should have an encrypted password attribute" do
      @user.should respond_to(:encrypted_password)
    end

    it "should set the encrypted password attribute" do
      @user.encrypted_password.should_not be_blank
    end

  end

end 
```

更新：我在 Registrations 控制器中插入了一些调试语句。非常有趣的是，它们都没有被触发——只有“构建资源之前”和“构建资源之后”，而不是“FIRST IF”、“SECOND IF”或“THIRD IF”。为什么会这样？

```
 class RegistrationsController < Devise::RegistrationsController
  # override #create to respond to AJAX with a partial
    def create
      logger.debug "before build resource"
      build_resource
      logger.debug "after build resource"
      if resource.save
        if resource.active_for_authentication?
          sign_in(resource_name, resource)
          (render(:partial => 'thankyou', :layout => false) && return)  if request.xhr?
          logger.debug "FIRST IF"
          respond_with resource, :location => after_sign_up_path_for(resource)
        else
          expire_session_data_after_sign_in!
          (render(:partial => 'thankyou', :layout => false) && return)  if request.xhr?
          logger.debug "SECOND IF"
          respond_with resource, :location => after_inactive_sign_up_path_for(resource)
        end
      else
        logger.debug "THIRD IF"
        clean_up_passwords resource
        render :action => :new, :layout => !request.xhr?
      end
    end

    protected

    def after_inactive_sign_up_path_for(resource)
      # the page prelaunch visitors will see after they request an invitation
      '/thankyou.html'
    end

    def after_sign_up_path_for(resource)
      # the page new users will see after sign up (after launch, when no invitation is needed)
  #    '/thankyou.html'
      redirect_to root_path
    end

  end 
```

# petapoco - 如何在 petapoco 中使用 glimpse？

> ID：13385513
> 
> 赞同：1
> 
> 时间：2012-11-14T19:02:12.900
> 
> 标签：petapoco, glimpse

我从 nuget安装了[这个插件。](http://nuget.org/packages/PetaPoco.Glimpse)

我通过 glimpse.axd 文件启用了 glimpse，但是当我转到 petapoco 选项卡时，我看到了这条消息

```
"No database requests or database logging not switched on (Compilation debug='true' or ForceLogging='true' on PetaPoco.DatabaseWithLogging)" 
```

我在哪里设置这个日志记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:14:28.730

您需要创建一个新的，`DatabaseWithProfiling()`而不是`Database()`像往常一样。从 NuGet 中提取模型文件夹中的代码后，将其签出。

# applescript - 退出重复后AppleScript不会停止运行

> ID：13385522
> 
> 赞同：0
> 
> 时间：2012-11-14T19:03:13.770
> 
> 标签：applescript

我有以下代码。它运行，我得到了我的结果，我认为退出重复有问题，在它获得 ipad 名称后，脚本仍在运行直到超时。谁能告诉我代码有什么问题？谢谢！

* * *

```
set deviceName to "iPad"
tell application "System Events"
tell process "iTunes"
    activate
    repeat with i from 1 to the count of (row of outline 1 of scroll area 2 of window "iTunes")
        repeat with j from 1 to the count of static text of row i of outline 1 of scroll area 2 of window "iTunes"
            set xxxx to the value of item j of static text of row i of outline 1 of scroll area 2 of window "iTunes"
            if (xxxx contains deviceName) then
                print xxxx
                click row i of outline 1 of scroll area 2 of window "iTunes"
                exit repeat
            end if
            --exit repeat
        end repeat

    end repeat

end tell
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:08:22.210

问题（您要求）是您在重复中有重复。这意味着当您在子循环中并退出重复时，您将跳转到主循环。要从这里退出，您必须再次退出重复。

查看您的代码，我不理解嵌套的重复循环。您可以删除包围/主要重复，它会按预期工作。

```
set deviceName to "iPad"
tell application "System Events"
    tell process "iTunes"
        activate
        repeat with UIElement in rows of outline 1 of scroll area 2 of window "iTunes"
            if (value of static text of UIElement as text) begins with deviceName then return select UIElement
        end repeat
    end tell
end tell 
```

我使用 an 开头的原因是 contains 将单击以前的钱包菜单项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:24:45.200

如果您想在找到第一台 iPad 后退出脚本，请将 exit repeat 替换为 return。

# mysql - mysqldump 合并而不是覆盖

> ID：13385524
> 
> 赞同：3
> 
> 时间：2012-11-14T19:03:36.617
> 
> 标签：mysql, version-control, merge, mysqldump

我有一个带有可以编辑的数据库副本的开发服务器和一个具有相同数据库处于不同状态的实时真实服务器。要将数据库从开发移动到实时，我从开发服务器运行：

```
mysqldump -u root -p --opt db_name tbl_name | mysql -u user_name -p --host=live_IP -C db_name 
```

使用 db_name、tbl_name、user_name 和 live_IP 中的适当值。但是，这目前会删除实时服务器上的表并复制开发版本 - 有效地覆盖所有内容并丢弃实时表中的任何新数据。我真正想要的是在开发服务器中有新行，而冲突的行来自开发服务器的副本，但实时服务器副本中的任何新行都保持不变。这是某种合并，我无法在文档中找到类似的内容，但它似乎应该是可能的，因为它是一种常见的需求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:08:04.873

您可以通过在管道之前添加[mysqldump 选项来做到这一点。](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)在您的情况下，我认为您需要--insert-ignore、--no-create-db 和--no-create-info。

# c++ - c++ Glut display需要调用我的draw函数但我不能传递任何参数

> ID：13385528
> 
> 赞同：0
> 
> 时间：2012-11-14T19:03:45.347
> 
> 标签：c++, glut

我正在尝试在 C++ 中使用 glut 根据我输入到我的主函数中的文件中的信息来创建绘图。

```
int main (int argc, char** argv)  //I think this is all relevant info in main
{   
glutDisplayFunc (display);

fstream file = fstream ("Tree.txt");
Tree myTree = Tree(file);
}

static    //this is the function I need to draw from but it can't take any parameters
void display(void)
{  
}

static void draw_frame(Tree::Node* t) //my draw function needs access to info from my file stream
{
    int x = t->xValue;  //for example I need to access these variables
    int y = t->yValue;
} 
```

我尝试将 Tree* myTree 设为全局变量，但我遇到了更多错误，它会完全停止读取我的文件。如果有人有任何想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:08:03.013

在您的情况下，您需要将 Tree 作为全局变量。我建议从构造函数中移动你的“树构建”代码，并从主函数初始化它。类似于以下内容：

```
Tree GTree;
int main (int argc, char** argv)  //I think this is all relevant info in main
{   
    glutDisplayFunc (display);

    fstream file = fstream ("Tree.txt");
    GTree.Initialize(file);
} 
```

然后，`display`您可以使用 GTree 进行渲染。

请注意，如果您需要更新渲染，则需要调用**glutPostRedisplay**或将您的`display`作为您的**glutIdleFunc**

# java - 使用静态配置类是好的做法吗？

> ID：13385531
> 
> 赞同：2
> 
> 时间：2012-11-14T19:03:50.243
> 
> 标签：java, android

在我目前正在开发的项目中，我有很多配置设置。诸如此类的事情

*   闹钟时间
*   从服务器检索的项目数量
*   LocationManager 整数，例如最小位置

这些都是静态最终的，并且都在与值对应的类中。

我的问题是，将所有这些值移动到单个静态类有什么问题吗？

我的想法是，在测试和调整应用程序时，它会更容易管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:22:54.557

以@Snicolas 的回答为基础...

您确实应该在代码（文件或数据库）之外保留您的 CONFIGURATION 设置。但是您不应该在每次需要值时“读取”该配置，否则效率会很低。

使用类来管理配置（即 AppSettings）是一个好主意。使其成为静态是提供类似单例的访问的一种方式。在 C# 和 ASP.NET 中，Web 应用程序将保证一个且只有一个静态类实例，因此来自不同用户的多个不相关请求将共享完全相同的静态值。

但在你的情况下（我看到标签'android'）使用Java你最好的选择可能是[单例](http://en.wikipedia.org/wiki/Singleton_pattern)方法。我不知道垃圾收集在 Java 中是如何工作的，但我想说你应该使用单例来确保你的设置只有一个实例。单例确保一个实例存在（如果不存在，则创建一个），然后将其提供给调用者。

这也可以更容易地支持在应用程序运行时更改配置值的能力——您可以“观察”定期设置更改。

我不是 Java 人，但如果还没有一个库来处理这个问题，我会感到惊讶（当然不是真的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:09:24.180

我很确定您不是在谈论常数，因为您提到了闹钟时间。

在专用类中仅使用静态字段的问题是，如果设备处于内存压力之下，您的类可能会被垃圾回收。在这种情况下，当您再次使用它们时，它们只会丢失并重置。

因此，您应该真正考虑将它们保存在文件或数据库中，具体取决于您要存储的数据量。SharedPreferences 对于少量数据可能很有用，否则，请考虑使用数据库。这是一个更具可扩展性的解决方案，对于更大的数据集，访问时间会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:47:49.587

在 Rails 世界中，实现一个懒加载和缓存配置信息的配置模型类是一个很好的实践，这些配置信息以序列化的形式永久存储在一个简单的两列（键和序列数据值）表或（较少见）平面中文件。配置编辑器只是这个模型的一个视图。

这在 Android 中也应该是一个很好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:50:01.857

另一个想法是将这些常量存储在一个`properties`文件中。并在需要时加载常量。[http://viralpatel.net/blogs/loading-java-properties-files/](http://viralpatel.net/blogs/loading-java-properties-files/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-14T20:10:03.040

如果您觉得方便，这是一个很好的做法。

# javascript - AngularJS + highlight.js（用指令中的表达式评估字符串）

> ID：13385535
> 
> 赞同：6
> 
> 时间：2012-11-14T19:04:08.840
> 
> 标签：javascript, angularjs

我正在尝试创建 highlight.js 指令，但在应用范围变量时遇到问题。

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js" ></script>
<link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/default.min.css">
<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>

<div ng-app="app">
    <div ng-controller="MyCtrl">
        <snippet>&lt;script src=&quot;{{src}}&quot;&gt;&lt;/script&gt;</snippet>
        {{src}}
    </div>
</div> 
```

​</p>

```
function MyCtrl($scope) {
  $scope.src = "foo.js";   
}

app.directive('snippet', ['$timeout', function($timeout) {
    var template = '<pre><code></code></pre>';

    return {
        restrict: 'E',
        compile: function(tElement, tAttrs, transclude) {

            var rawCode = tElement.text();
            tElement.html(template);

            return function(scope, element, attrs) {
                $timeout(function() {
                    scope.$apply(function() {
                        var formattedCode = hljs.highlightAuto(rawCode);
                        $(element).find('code').html(formattedCode.value);
                    });
                }, 0);
            }
        }
    }
}]);​ 
```

这是小提琴：http: [//jsfiddle.net/dkrotts/RE7Jj/5/](http://jsfiddle.net/dkrotts/RE7Jj/5/)

如您所见， $scope.src 没有在代码段中应用它的值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T20:23:01.810

关键是你应该使用[$interpolate](http://docs.angularjs.org/api/ng.%24interpolate)而不是[$compile](http://docs.angularjs.org/api/ng.%24compile)

> **$interpolate 的描述**
> 
> 将带有标记的字符串编译为插值函数。HTML $compile 服务使用此服务进行数据绑定。请参阅 $interpolateProvider 以配置插值标记。

当你使用 $complie 时，它​​会将你的字符串变成元素。

> **$compile 的描述**
> 
> 将一段 HTML 字符串或 DOM 编译**为模板**并生成模板函数，然后可以使用该函数将范围和模板链接在一起。

（说实话，在尝试之前我并不真正理解描述。）

这是工作的[笨拙](http://plnkr.co/edit/3rtp1v?p=preview)

```
app.controller('MainCtrl', function($scope) {
  $scope.cdnPath = "//path/to/cdn/";
  $scope.version = "1.0"; 
});

app.directive('snippet', ['$timeout', '$interpolate', function($timeout, $interpolate) {
    return {
        restrict: 'E',
        template:'<pre><code ng-transclude></code></pre>',
        replace:true,
        transclude:true,
        link:function(scope, elm, attrs){             
            var tmp =  $interpolate(elm.find('code').text())(scope);
             $timeout(function() {                
                elm.find('code').html(hljs.highlightAuto(tmp).value);
              }, 0);
        }
    };
}]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:01:19.233

您需要[$compile](http://docs.angularjs.org/api/ng.%24compile)内部 HTML。请参阅下面的小提琴。您也不需要在 $apply 块中运行。

```
app.directive('snippet', ['$timeout', '$compile', function($timeout, $compile) {
    var template = '<pre><code></code></pre>';

    return {
        restrict: 'E',
        compile: function(tElement, tAttrs, transclude) {

            var rawCode = tElement.text();
            tElement.html(template);

            return function(scope, element, attrs) {

                var g = $compile(rawCode)(scope);

                $timeout(function() {
                    var text = g[0].outerHTML;
                        var formattedCode = hljs.highlightAuto(text);
                        $(element).find('code').html(formattedCode.value);
                }, 0);
            }
        }
    }
    }]);​ 
```

[http://jsfiddle.net/roytruelove/jMC9n/1/](http://jsfiddle.net/roytruelove/jMC9n/1/)

# asp.net - 使用强类型数据集更新 ASP.Net / VB.Net 数据库

> ID：13385543
> 
> 赞同：1
> 
> 时间：2012-11-14T19:04:33.550
> 
> 标签：asp.net, vb.net, dataset, strongly-typed-dataset, tableadapter

我们希望使用通过更改 ASP.Net 上的值获得的值来更新 SQL Server 2012 数据库中的数据`DetailsView`。我想使用更新数据库

*   一个强类型的 DataSet，称为`DataSetParentsDetails`
*   一个名为 TableAdapter`ParentsDetailsTableAdapter`
*   一个名为`ParentsDetails`.

这些是使用数据集设计器创建的。

这是代码隐藏文件中的代码，用于计算我们想要更新到数据库中的数量：

```
Protected Sub DetailsViewDetails_ItemCommand(sender As Object, e As System.Web.UI.WebControls.DetailsViewCommandEventArgs)
  Dim dcmAmountToAdjust As Decimal
  Dim StrSqlStatement As String

  Select Case e.CommandName
    Case "Add"
    Case "Edit"
      dcmOriginalRegistrationFee = GetValueFromLabelRegistrationFee()
    Case "Delete"
    Case "Update"
      dcmNewRegistrationFee = GetValueFromTextBoxRegistrationFee()
      dcmAmountToAdjust = dcmNewRegistrationFee - dcmOriginalRegistrationFee
      ' Update the tuition balance in the parent's data.
      '-------------------------------------------------
      StrSqlStatement =
        "Update Students " & _
        "Set RegistrationCode = RegistrationCode + @AmountToAdjust " & _
        "Where StudentID = @ID"
      ' Code to update the database goes here.
      '---------------------------------------
  End Select
End Sub 
```

我确信这个问题之前被问过很多次，但我找不到一个很好的例子来说明如何使用查询：`StrSqlStatement`通过强类型数据集更新数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:46:11.980

首先，您需要一个连接字符串，最好将连接字符串存储在`web.config`文件中：

```
<connectionStrings>
  <add name="MyConnectionString" connectionString="Data Source=putYourServerAndInstanceNameHere;Initial Catalog=putYourDatabaseNameHere;User ID=putYourSqlUsernameHere;Password=password" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

这是根元素的直接子`<configuration>`元素。有关连接字符串的更多信息，请访问[http://www.connectionstrings.com](http://www.connectionstrings.com)。

然后，您需要在代码隐藏中添加一些导入，如果您还没有将它们添加到项目中，则需要将它们添加为项目的引用：

```
Import System.Data
Import System.Data.SqlClient 
```

然后我们连接到数据库并运行我们的命令，我们使用参数，因为它们更安全。

```
'build the connection object using the string from the web.config file
Using conn As New SqlConnection(ConfigurationManager.ConnectionStrings("MyConnectionString").ConnectionString)
  'build the command object specifying the command text and the connection to use, conn
  Using cmd As New SqlCommand("UPDATE Students SET RegistrationCode = RegistrationCode + @AmountToAdjust WHERE StudentID = @ID", conn)
    'add the parameters needed by the command
    cmd.Parameters.AddWithValue("@AmountToAdjust", amountToAdjust)
    cmd.Parameters.AddWithValue("@ID", studentID)
    'try to open the connection and execute the statement
    Try
      conn.Open()
      cmd.ExecuteNonQuery()
    Catch ex As Exception
      'handle the exception here
    End Try
  End Using
End Using 
```

请注意，这里不需要使用`conn.Close()`，因为该`Using`语句会为您处理（SqlConnection 的 Dispose 方法会在连接仍处于打开状态时将其关闭）。

# mysql - $wpdb MySQL 从主表中选择并将每一行与另一个表的两行连接起来

> ID：13385544
> 
> 赞同：0
> 
> 时间：2012-11-14T19:04:37.827
> 
> 标签：mysql, sql, wordpress

$referrer 是唯一定义的变量。

main_table 保存用户和推荐人之间的关系。一个推荐人可以有很多用户。

```
user_id  | referrer
1        | seller
2        | abother seller
3        | another seller
4        | seller 
```

secondary_table 保存 user_id、meta_key 和 meta_value，其中 last_name 和 first_name 是 meta_keys。

```
user_id  | meta_key   | meta_value
1        | first_name | John
1        | last_name  | Doe
4        | first_name | Betty
4        | last_name  | Boo 
```

我需要合并以下 3 个查询

```
SELECT user_id FROM main_table WHERE referrer = $referrer

SELECT meta_value FROM secondary_table WHERE user_id = $user_id AND meta_key = first_name

SELECT meta_value FROM secondary_table WHERE user_id = $user_id AND meta_key = last_name 
```

进入一个查询，以便我可以将它与 $results = $wpdb->get_results 一起使用，然后按 last_name 对 $results 进行 asort() 以获得按字母顺序排列的输出并使用 foreach 回显 $results

```
foreach ($results as $result) {
  echo $result->user_id.' '.$result->first_name.' '.$result->last_name;
} 
```

如果 $referrer == "seller" 输出应如下所示：

```
4 Betty Boo
1 John Doe 
```

那个单一的查询应该是什么样子的？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:30:08.113

你可以使用这个：

```
select
  main_table.user_id,
  concat(s1.meta_value, ' ', s2.meta_value) as name
from
  main_table left join secondary_table s1
  on main_table.user_id = s1.user_id and s1.meta_key = 'first_name'
  left join secondary_table s2
  on main_table.user_id = s2.user_id and s2.meta_key = 'last_name'
where
  referrer = $referrer 
```

我加入`main_table`，`secondary_table twice`第一次过滤名字，第二次过滤姓氏。然后要获得名称，您只需将第一个 meta_value 与第二个连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:16:20.367

它有点棘手。您可以使用以下查询

```
select m.user_id as new_user_id, s1.meta_value as new_first_name, s2.meta_value as new_last_name from main_table m, secondary_table s1, secondary_table s2 where m.user_id=s1.user_id and m.user_id=s2.user_id and s1.meta_key='first_name' and s2.meta_key='last_name' and m.referrer='seller' order by new_last_name 
```

然后你可以做

```
$results = $wpdb->get_results(...)  
foreach ($results as $result) {
      echo $result->new_user_id.' '.$result->new_first_name.' '.$result->new_last_name;
    } 
```

# microcontroller - PIC Prgramming - 事物的基本流程

> ID：13385547
> 
> 赞同：1
> 
> 时间：2012-11-14T19:05:04.560
> 
> 标签：microcontroller, pic, microchip

有人可以向我解释一下这是如何完成的基本流程。

所以目前我是一个 USB pic 编程器，也是一个多 pic 适配器。我知道我可以使用它来将我的程序写入 PIC。但我不确定在那之前会发生什么，比如我如何用 LED 或一些输出模拟数据的输入传感器等实际测试它？

这就是我现在拥有的：[http ://www.piccircuit.com/shop/pic-programmer/26-ica01-usb-pic-programmer-set.html](http://www.piccircuit.com/shop/pic-programmer/26-ica01-usb-pic-programmer-set.html)

所以我需要将它连接到面包板？如果是这样怎么办？我完全迷路了！！这是我第一次尝试这样做。我所做的是使用我的 Synapse RF Engine EK2100 来构建我想要的。

怎么办...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:04:00.467

我不完全确定您要完成什么，但您购买的是 PIC 微控制器的程序员。在您以汇编或 C 语言编写了一些代码并将其编译为 hex 文件后，该设备将把该代码放到您单独购买的 PIC 微控制器上。您购买了 PIC 设备进行编程还是只有编程器和 EK2100 套件？如果您提供更多详细信息，我们可以为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:21:23.063

编写一个基本的“flash LED”程序，然后连接 PIC 以查看它是否有效。

热点提示 - 使用内部振荡器来最小化外部组件数量（让事情变得更简单）。浏览一个精通 PIC 的网站，例如[http://digital-diy.com/](http://digital-diy.com/)，以获得许多有趣的想法和代码示例。

那里的社区大多使用 PIC Basic 类型语言（例如 Swordfish），它们会让你的代码看起来像这样（为了便于解释，删除了标题/设置）：

```
While True
    High(LED)
    DelaymS(500)
    Low(LED)
    DelaymS(500)
Wend 
```

# asp.net - 未经身份验证的用户无法使用 IIS 7.5 看到虚拟目录中的图像

> ID：13385549
> 
> 赞同：0
> 
> 时间：2012-11-14T19:05:15.723
> 
> 标签：asp.net, image, iis, iis-7.5

我有一个网站托管在我的本地机器上进行开发。我有一个名为“content”的虚拟目录，其中包含我网站的图像（映射到 IIS 中的物理路径“C:\Content”）。问题是当用户未登录我的网站时，图像不会显示。我尝试使用这个将 web.config 文件放在内容文件夹中

```
<?xml version="1.0"?>

<configuration>
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</configuration> 
```

但这不起作用。我也尝试将其添加到我网站的 web.config 文件中

```
<location path="Content">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

但这也不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:58:59.317

该`<system.web><authorization>`元素仅指由 ASP.NET 运行时处理的内容，而不是 IIS 本身（它是`<system.webServer>`并且具有完全不同的架构）。然而，VS 中的 Cassini/dev 服务器确实使用`<system.web><authorization>`了所有资源，因为 ASP.NET 在 Cassini 下处理每个请求。

检查您的 IIS 身份验证规则以及您的 NTFS ACL。确保启用匿名身份验证并设置正确的用户身份。您可以在 IIS 管理器中执行此操作。

# javascript - 打字稿中的要求

> ID：13385556
> 
> 赞同：6
> 
> 时间：2012-11-14T19:05:30.090
> 
> 标签：javascript, typescript

有人可以解释一下这在 TypeScript 中的外观吗？可以通过进口来完成吗？

**JS：**

```
var casper = require('casper').create({}) 
```

**咖啡脚本：**

```
casper = require("casper").create() 
```

> **Visual Studio 错误：**错误 1 ​​当前范围内不存在名称“casper”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T19:27:23.147

```
import something = module('something');
var somevar = something.create({}); 
```

我认为这里要注意的一点是，今天的 TS 不允许对 module('something') 进行打点，所以你必须将你的陈述分成两部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T01:05:27.193

我整理了一篇关于使用 require.js 和 Typescript 的博客。
[http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/](http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/) 您将能够编写如下代码：

```
require["casper", (casper) => {
    var item = casper.create();
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:28:46.307

如果在编译 TypeScript 时使用模块标志：

```
--module commonjs 
```

或者

```
--module amd 
```

它将导入转换为适当的模块加载语句：

```
import something = module('something');
var somevar = something.create(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:39:14.537

如果那个 casper 东西是用 JavaScript 编写的，你也需要为它声明一个模块（否则它不会编译）。

按照惯例，您将此类声明放在名为 casper.d.ts 的单独文件中：

```
declare module casper {
    export class SomeClassInCasper {
    }

    export function someFunctionInCasper();
} 
```

您将在导入/模块上方的顶部包含对该 casper.d.ts 的引用：

```
/// <reference path="casper.d.js" />

import casper = import("casper"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-19T13:27:29.997

casper 通过 npm 在全局范围内安装。

1.  打字安装 dt~casperjs --global --save
2.  声明 var casper；（在您的代码上）

在这里可以看到一个带有打字稿的简短 casper：

[https://medium.com/@guyavraham/smoke-tests-casper-js-with-typescript-8b01b504f3a4](https://medium.com/@guyavraham/smoke-tests-casper-js-with-typescript-8b01b504f3a4)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-16T16:58:33.657

我写了一篇关于在 TypeScript 中使用 Require 的相当全面的文章。我的方法不需要你使用丑陋的

```
require(['dependency'], function() {

} 
```

句法。相反，在 TypeScript 中，您可以使用方便的`import x = module("x")`语法。

# java - 如何远程调试我的 rcp 应用程序？

> ID：13385558
> 
> 赞同：5
> 
> 时间：2012-11-14T19:05:30.303
> 
> 标签：java, eclipse, debugging, remote-debugging, rcp

因为我的 RCP eclipse 应用程序在 eclipse 之外运行时失败，但在 eclipse 内部运行时可以正常工作，所以我尝试使用 eclipse 远程调试我的应用程序，因为它在 eclipse 环境之外运行。

我在 64 位 Windows 7 机器上使用 32 位 Eclipse 3.6.1。我正在使用 32 位 Java 1.6 更新 37。我使用 Eclipse 产品导出向导来打包应用程序，最终得到一个 eclipse.exe。我创建了一个远程调试配置并将其设置为使用端口 8765（随机数）。出于调试目的，我使用以下行从命令行启动应用程序：
eclipse.exe -Xdebug -Xrunjdwp:transport=dt_socket,address=127.0.0.1:8765

根据我是通过 Eclipse 调试器附加还是侦听，我会将 server=[y/n] 选项添加到此命令行，但似乎没有任何区别。

对于配置连接类型，我尝试了标准（套接字侦听）和标准（套接字连接）。当我尝试 Socket Listen 时，我的调试器将开始监听 - “等待 vm 在端口 8765 连接”，但是当我通过命令行启动我的应用程序时，应用程序启动正常，但调试器从不附加。

当我尝试 Socket Attach 时，我首先使用命令行启动应用程序，然后当我尝试使用 eclipse 附加时，我收到消息“无法连接到远程 VM。连接被拒绝”

我尝试了各种地址组合：localhost、127.0.0.1 和我的本地 IP 地址。我每次都得到相同的结果。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-10T23:23:36.050

您缺少 -vmargs 参数。尝试“eclipse.exe -vmargs -Xdebug -Xrunjdwp:transport=dt_socket,address=127.0.0.1:8765”

我正在寻找同样的东西，并在这篇有用的帖子[http://blog.ankursharma.org/2010/05/remote-debugging-eclipse.html中找到了答案](http://blog.ankursharma.org/2010/05/remote-debugging-eclipse.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:44:51.270

调试 RCP 应用程序的另一种方法是使用“-console”“-consolelog”启动它。这为您提供了 osgi 控制台，您可以在其中检查哪些包没有（未）启动，导出的服务等。键入`help`以获取可用命令的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-12T14:05:42.200

这个更好：

[http://exploreeclipse.blogspot.com/2016/05/eclipse-rcp-remote-debugging.html](http://exploreeclipse.blogspot.com/2016/05/eclipse-rcp-remote-debugging.html)

定义服务器和挂起参数

```
$./TOS_BD-macosx-cocoa -vmargs -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8989 
```

# session - Asp.Net State Server Service 应该在所有生产 Web 服务器中运行吗？

> ID：13385562
> 
> 赞同：1
> 
> 时间：2012-11-14T19:05:37.450
> 
> 标签：session, state, mode, session-state-server

Asp.Net 2.0 会话状态模式 = 状态服务器并仅在所有网络服务器 web.config 中指向第一台服务器

我的怀疑

我们的项目有 6 台生产服务器。我是否需要确保 Asp.Net 状态服务器服务应该在所有 6 个 Web 服务器中运行？（或）它应该只在第一台服务器上运行？

# php - ssh2_auth_none 返回真

> ID：13385564
> 
> 赞同：0
> 
> 时间：2012-11-14T19:05:48.973
> 
> 标签：php, ssh, cisco

我有一个场景，当我打电话时`ssh2_auth_none`，它会返回`true`。根据文档，这似乎表明这意味着交换机被配置为允许无需身份验证即可登录。

然而，这种情况并非如此。我们正在使用密码...

这是我的代码的样子：

```
<?php
$connection = ssh2_connect('10.124.123.45', 22);

$auth_methods = ssh2_auth_none($connection, 'username');
var_dump($auth_methods);

if (in_array('password', $auth_methods)) {
       echo "Server supports password based authentication\n";
}
?> 
```

只是想知道您是否对我可以测试或检查什么来解决此问题有任何想法或意见。最终，我希望能够打电话`ssh2_connect`并`ssh2_auth_password()`登录到这个交换机。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:58:31.193

我们不得不改变我们连接到这些类型的交换机的方式——问题的根本原因是这个交换机的 ssh 实现非常有限，所以像 phpseclib 这样的流行库不起作用。

这是我们的有效代码 - 以防它帮助任何其他试图连接到 CISCO 小型企业级交换机的人。

```
 <?php
      $uname = 'myusername';
      $pswd = 'mypassword';
      $connection = ssh2_connect('123.123.123.123', 22);
      //$authentication_methods = ssh2_auth_none($connection, 'user');
      $stdio_stream = ssh2_shell($connection);
      fwrite($stdio_stream,$uname."\n");
      sleep(1);
      fwrite($stdio_stream,$pswd."\n");
      sleep(1);
      echo "Results: " . stream_get_contents($stdio_stream); 
      echo 'sending show bonjour command:<br>';
     fwrite($stdio_stream, "show bonjour".PHP_EOL);
     sleep(1);
     echo "<br>Results: " . stream_get_contents($stdio_stream); 
  ?> 
```

# dropbox - Dropbox API - 更新文件

> ID：13385569
> 
> 赞同：4
> 
> 时间：2012-11-14T19:06:31.643
> 
> 标签：dropbox

我是 Dropbox API 的新手，我想弄清楚我是否可以管理大文件（1-2 Gb）更新而不必复制整个文件。

类似于最初的分块上传。我想说，这是这个文件的一部分，从偏移量开始，`XXXX`这是新的内容。并且只发送 100Kb 或 1Mb，而不是整个文件！

我很惊讶没有人需要这样的东西，因为一旦你上传了一个大文件，使用分块上传很容易做到这一点，如果文件需要更新，仍然会有问题。特别是如果更新很小！

无论如何，感谢所有反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T08:37:44.193

这是非常增量的同步。有一个免费的，名为 OpenVCDiff。但是当谈到 Dropbox API 时，我不知道 - 我在 SO 中搜索 Dropbox 时发现了你的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T08:53:46.927

Dropbox API 不支持任何类型的增量更新。

# ruby-on-rails - 将保存前后的模型与其他模型进行比较

> ID：13385572
> 
> 赞同：0
> 
> 时间：2012-11-14T19:06:41.207
> 
> 标签：ruby-on-rails, ruby, model, callback

我很难解决这个问题。

我有一个模型（任务），它具有以下属性：：day、：room、：begin_time、：end_time、：gear、：notes 和其他（不相关）。我在 Task 模型的迁移集中也有一个linked_id_task 属性。我有这些相关的范围（我将它们链接在一起）：

```
scope :for_day, lambda { |day| where(day: day) }
scope :for_room, lambda { |room| where(room: room) }
scope :with_gear, lambda { |gear| where(gear: gear) }
@tasks_on_same_day = Task.for_day(self.day).for_room(self.room).with_gear(self.gear).all
@task_on_previous_day = Task.for_day(self.day.yesterday).for_room(self.room).with_gear(self.gear).last
@task_on_next_day = Task.for_day(self.day.tomorrow).for_room(self.room).with_gear(self.gear).first 
```

无论我是创建新任务还是更新新任务，我都希望：

在私有实例方法 prev 中检查上一个和下一个任务（**基于 :begin_time ）？**接下来呢？如果有以前的任务，我想更新它的 :notes 并将该任务添加到 :linked_task_id; 如果有下一个任务，我想用关于下一个任务的信息设置 self.notes 并将其添加到：linked_task_id。如果当天（上）、前一天或后天没有任何任务，我将返回 nil。

前天和后天很简单，因为我会得到前一天的最后一个任务（如果存在的话）或第二天的第一个任务。如果当天有多个任务，我希望能够将任务排序以轻松找到上一个和下一个任务，即

```
@self_id = @tasks_on_same_day.index(self) 
```

并使用该索引来更新上一个或下一个任务的属性。问题是，我不认为新创建的任务或更新的任务（即，我更新了 begin_time）将在 before_save 回调中可用。

我可以创建一个类方法来将自己分类到当前任务列表中。

我不是在找人为我编写这个代码，但我对我应该采取的方法感到困惑。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:47:17.050

作为我的回答的序言：我是新手。

在沮丧了一段时间之后，我开始看 RailsCasts，从昨晚离开的地方开始。我突然意识到（观看有关 ActiveRecord 查询的视频）我是个白痴。

我还没有尝试过，但我可以查询类似...

```
@previous = Task.for_day(self.day).for_room(self.room).with_gear(self.gear).where('begin_time < ?' self.begin_time).last
@next = Task.for_day(self.day).for_room(self.room).with_gear(self.gear).where('begin_time > ?' self.begin_time).first 
```

这非常容易。为了使这个问题有用，像这样的长查询字符串对性能有什么影响？

# c# - C#中的单位转换设计模式

> ID：13385573
> 
> 赞同：5
> 
> 时间：2012-11-14T19:06:48.490
> 
> 标签：c#, design-patterns, dependency-injection, loose-coupling, unit-conversion

我需要在单位之间进行转换，每个单位有 2 个部分，它的名称和一个整数，整数部分可以是正数或负数。我需要我的`Unit`班级进行依赖注入并松散耦合。例如，如果我将来需要添加一些东西，我不想更改正在使用该类的其他类。

我的单位类中还应该有一种`Convert()`方法可以在单位之间进行转换。我看了一下这些链接：

*   [.NET Framework 中的类型转换](http://msdn.microsoft.com/en-us/library/98bbex99.aspx)
*   [创建简单高效值类型的模式](https://stackoverflow.com/questions/8040999/pattern-for-creating-a-simple-and-efficient-value-type)

但这些似乎松散耦合。

请让我知道这个问题的推荐设计模式，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:38:33.030

我将为方法创建一个自定义属性，该属性指定方法可以转换的单位。然后你的转换器函数可以从被转换的项目中提取单位，并使用反射来找到那些具有转换方法的类，这些类转换为/从这些单位转换。

您确实需要一个用于转换为/从方法的核心度量单位。例如，选择公制，然后所有转换都转换为公制/从公制转换为/从第二个单位转换。然后从单位 A 到单位 B，从 A 转换为公制，然后从公制转换为 B，使用反射选择 A 和 B 转换器。

当然，由于您没有就您的请求提供太多细节，因此很难说出您到底想做什么，所以这是一个疯狂的猜测“设计”。:)

# sql - 如何将一行扩展为多行结果集？

> ID：13385574
> 
> 赞同：6
> 
> 时间：2012-11-14T19:06:49.663
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表，我试图根据第二列的值将每一行分成一个或多个行。像这样：

```
table (id, pcs):
ABC   3
DEF   1
GHJ   4

query result (id, pcs_num):
ABC   1
ABC   2
ABC   3
DEF   1
GHJ   1
GHJ   2
GHJ   3
GHJ   4 
```

我在 SQL Server 2008 中将其编写为 sproc。我最好的解决方案是使用游标并将 [pcs] 行数添加到表中每一行的临时表中。似乎必须有一个比我缺少的更简单的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T19:15:31.623

您可以使用递归 CTE：

```
;WITH CTE AS
(
    SELECT *
    FROM YourTable
    UNION ALL 
    SELECT id, pcs-1
    FROM CTE
    WHERE pcs-1 >= 1
)
SELECT *
FROM CTE
ORDER BY id, pcs
OPTION(MAXRECURSION 0) 
```

[这是一个演示](http://sqlfiddle.com/#!3/75537/1)供您尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:20:46.373

这是我的方法。使用计数表（只有一列值为 1 -> X 的表）非常容易。不需要递归，这比更大的表要快得多。

请注意，我们只制作了一个 100 行的 Tally 表，您可以随意扩展它。如果你太疯狂了，你可能需要在 sys.sysobjects 中进行另一个交叉连接来适应。真正的查询在底部，您可以看到它非常简单。

```
SELECT TOP 100
        IDENTITY( INT,1,1 ) AS N 
 INTO #Tally
FROM    sys.sysobjects sc1 ,

        sys.sysobjects  sc2

CREATE TABLE #Test
(
    Id char(3),
    pcs int
)

INSERT INTO #Test
SELECT 'ABC', 3 UNION ALL
SELECT 'DEF', 1 UNION ALL
SELECT 'GHJ', 4

SELECT #Test.Id, #Tally.N FROM #Tally
    JOIN #Test ON #Tally.N <= #Test.pcs
    ORDER BY #Test.Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T17:32:01.983

```
SELECT
  id
 ,pcs_num
FROM MyTable
CROSS APPLY (
  SELECT TOP (pcs)
    ROW_NUMBER() OVER(ORDER BY (SELECT 1)) pcs_num
  FROM master.dbo.spt_values
) t 
```

# web-applications - 如何使用 selenium 更改输入字段大小

> ID：13385579
> 
> 赞同：1
> 
> 时间：2012-11-14T19:07:15.213
> 
> 标签：web-applications, selenium, selenium-ide, fuzzing

我正在测试一个 Web 应用程序，`selenium`但我对一个特定的输入字段有一点问题。有没有办法改变输入字段的大小`selenium`？

示例：输入字段的最大长度为 8，我想将其更改为 20。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:49:51.973

由于此参数是固定的（硬编码），因此您不太可能更改输入字段的大小。您可以对 selenium 做的唯一事情是检查应用程序如何接受例如 8 个符号输入和 20 个符号输入，并验证例如验证器是否出现。

```
//8 symbols
String check1="blablabl";
//20 symbols
String check2="blablablablablablabl";
driver.findElement(By.id("input1")).clear();
driver.findElement(By.id("input1")).sendKeys(check2); 
//verify that appropriate error appeared
Assert.assertTrue(isElementPresent(By.xpath("xpath of validator message")));

driver.findElement(By.id("input1")).clear();
driver.findElement(By.id("input1")).sendKeys(check1); 
```

类似的东西。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:05:46.913

好奇你为什么要从max8换成max20？这假设如果 max8 字段设法接受直到 max20，单元测试将失败？

有 1 个技巧可以帮助你检查这个.. 使用 FireBug .. 将 HTML 允许 max8 更改为 max20 .. 并手动键入 max20 项。

如果您的应用程序没有服务器站点检查，则此技巧应能够保存 20 个字符，前提是您的数据库允许存储此 max20 ..（如果成功，则意味着您的应用程序已经存在一些安全漏洞）好运气.. :D

# html - iOS 文件输入大小

> ID：13385585
> 
> 赞同：0
> 
> 时间：2012-11-14T19:07:37.073
> 
> 标签：html, ios, file, filesize, dimensions

有没有人找到一种方法来限制通过 iOS 上传的照片的大小？使用标准文件输入字段会产生大量图像（如 2448x3264 和至少几 mb），这需要相当长的时间才能上传，尤其是在连接不佳的情况下。

我找到了一些关于[如何从文件输入中获取图像并使用 canvas 调整图像大小的](https://stackoverflow.com/questions/10333971/html5-pre-resize-images-before-uploading)教程，但我不确定这是否适用于我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:16:46.193

**更新**

**我刚刚意识到 iOS 上的 Safari 支持[HTML5 File API](http://www.w3.org/TR/FileAPI/)。**

您可以将其用于您的目的等等。

这是一篇关于如何实现此功能[的优秀文章。](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

如果您正在谈论上传到网页，您也许可以通过 Javascript 获取大小。

*请注意，这尚未经过测试。*

**输入元素**

```
<input type="file" id="uploadPhoto" onchange="checkSize(this)" /> 
```

**Javascript**

```
checkSize(el) {
    alert(el.files[0].size);
} 
```

# php - 通用 PHP/OOP 策略 - 如何在嵌套对象之间进行通信

> ID：13385586
> 
> 赞同：1
> 
> 时间：2012-11-14T19:07:41.673
> 
> 标签：php, oop

使用嵌套对象时（ObjTwo 作为 objOne 的属性）：

```
$objOne->property = new ObjTwo($objOne); 
```

最好的沟通方式是什么？以下是我能想到的几种方法：

**使用特定的 get/set 方法**

```
class ObjTwo {
    __construct($objOne){
        $prop1 = $objOne->get_prop1(); 
        // do something with prop1
        $prop2 = $objOne->get_prop2();
        // do something with prop2

        // ... Having to write all these out is kind of a pain
        //     if you're going to have 20+ vars, and there's no
        //     easy way to loop through them.
    }
} 
```

*问题：*逐行写出这些，当我添加新属性时必须更新它。

我知道建议为每个属性设置一个 get/set 方法，但是我真的很想遍历数据...

**get_object_vars() 怎么样**

```
class ObjTwo {
    __construct($objOne){
        extract(get_object_vars($objOne));
        // do something with the vars
    }
} 
```

*问题：*此方法绕过了使用 getter/setter 方法的能力，并且每个属性都必须是公共的才能访问。

**动态 getter/setter 方法调用**

我考虑过的另一种方法是创建一个字段数组，并有严格的命名 getter/setter 方法的策略：

```
class ObjTwo {
    __construct($objOne){
        $prop_array = array('prop1', 'prop2', 'prop_three');
        $values = array();
        foreach ($prop_array as $prop){
            $values[$prop] = $objOne->get_{$prop}();
        }
    }
} 
```

*问题：*每次添加新属性时，我都必须确保正确命名 get_method()，并更新 $prop_array。

**有人有更好的解决方案吗？也许只是构建一个数据数组？：**

```
$objOne->property = new ObjTwo($objOne->get_data()); 
```

* * *

**我喜欢这个解决方案**

考虑到这一点，这里有一点澄清：我不只是试图从父母到孩子制作相同的副本，反之亦然 - 我编辑了上面的例子以更好地展示这一点。它更多的只是将对象数据的子集从一个地方传递到另一个地方的想法。

*而不必写：*

```
$first_name = $this->member->get_first_name();
$last_name = $this->member->get_last_name();
$email = $this->member->get_email();
$display_name = $this->member->get_display_name();
// etc... and
$this->member->set_first_name($first_name);
$this->member->set_last_name($last_name);
$this->member->set_email($email);
$this->member->set_display_name($display_name);
// etc.. 
```

有`$this->member->get_fields('first_name', 'last_name', 'email', 'display_name');`方法怎么样？我不喜欢准确地记住字段名称（fname、f_name、first_name 等），因此您可以使用类常量：

```
$data = $this->member->get_fields(array(
    Member::FIRST_NAME, Member::LAST_NAME, Member::EMAIL, Member::DISPLAY_NAME
)); 
```

这样，我可以遍历返回的数据。

```
foreach ($data as $key=>$value) // ... 
```

并设置字段...

```
$this->member->set_fields(array(
    Member::FIRST_NAME => $first_name,   //  THE BIG ADVANTAGE HERE:
    Member::LAST_NAME => $last_name,     //  These field keys auto-complete
    Member::EMAIL => $email,             //  so you don't have to remember them!
    Member::DISPLAY_NAME => $display_name,
    // etc...
)); 
```

还在想这个……有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:45:13.730

我想你问错问题了。**此外，我认为只有提供一个真实**示例而不是那些伪示例，才能真正提供帮助。对于正确的解决方案，每个实际情况都不同。

一般来说，你所有的建议都很有味道。看来你需要的不是注入而是继承。如果您的“子”类确实需要访问另一个类的全部或大部分属性，那么它似乎应该扩展该类。

您的软件的各个部分应该尽可能少地相互了解。在您的评论中，您提到您有一个 Member 类和一个 Form 类。我不知道为什么他们中的任何一个都应该知道关于另一个的任何事情。

此外，您似乎认为您需要将每个属性映射到新类中的属性。为什么？如果您通过 custructor（= 依赖注入）将一个类的实例传递给另一个类，那么您可以将该实例映射到一个属性，然后通过该实例访问注入实例的所有属性。不需要映射。

```
class Consumer
{
    private $injectedClass;

    function __construct($injectedClass)
    {
        $this->injectedClass = $injectedClass;
    }

    public function someFunction()
    {
        //do something by using any property of the injected class
        $this->injectedClass->getProperty();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T19:16:07.567

我倾向于这样做。这可能不是最好的方法：

```
class Parent_Obj {
    $var1; // explanation
    $var2; // explanation
    $var3; // explanation
    $child_obj; // explanation

    __construction() {
        /* Do a bunch of stuff */
        $this->$child_obj = new Child_Obj ($this);
    }
}

class Child_Obj {
    $var1; // explanation
    $var2; // explanation
    $var3; // explanation
    $parent_obj; // explanation

    __construction($parent) {
        /* Do a bunch of stuff */
        $this->$parent_obj = $parent;
    }

    /* Some function that needs a method or property of the parent object */
    function some_function () { 
        /* do some stuff */
        echo $this->parent_obj->var1; // echo a property of the parent obj
    }
} 
```

我相信这个术语被称为“聚合”。

# opencv - 是否可以使用 gcov 对共享库进行代码覆盖？

> ID：13385590
> 
> 赞同：3
> 
> 时间：2012-11-14T19:08:02.403
> 
> 标签：opencv, gcov

我尝试测试一个使用 OpenCV 共享库的可执行文件。当使用 gcov 了解覆盖了哪些代码行时，我只能获得有关我的 .cpp 文件和库的 .hpp 的信息。没有显示有关库的 .cpp 文件的信息。

我编译并与 -pg --coverage 标志链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T02:26:40.827

是的，gcov 可以提供有关共享库的覆盖率信息。如果我从我的项目中得到这个工作的问题中没记错的话，你可能没有`--coverage`在动态库的链接中包含标志。这是我可以创建的最小示例。

生成文件：

```
CXXFLAGS += --coverage
LDFLAGS += --coverage

myexec: myexec.cpp libmylib.so

libmylib.so: mylib.o
    gcc --coverage -shared -Wl,-soname,libmylib.so -o libmylib.so mylib.o

mylib.o: CXXFLAGS += -fPIC 
```

myexec.cpp：

```
#include "mylib.h"

int main(int argc, char** argv)
{
    return is_even(argc);
} 
```

mylib.h

```
#ifndef MYLIB_H
#define MYLIB_H

int is_even(int num);

#endif 
```

mylib.cpp

```
#include "mylib.h"

int is_even(int num)
{
    if (num % 2)
        return false;
    else
        return true;
} 
```

make 的输出（这样你就可以准确地看到构建是什么）：

```
g++ --coverage -fPIC   -c -o mylib.o mylib.cpp
gcc --coverage -shared -Wl,-soname,libmylib.so -o libmylib.so mylib.o
g++ --coverage  --coverage  myexec.cpp libmylib.so   -o myexec 
```

我使用 运行可执行文件`LD_LIBRARY_PATH="." ./myexec a`，然后运行`gcov mylib.cpp`​​. 这是 mylib.cpp.gcov 的内容：

```
 -:    0:Source:mylib.cpp
    -:    0:Graph:mylib.gcno
    -:    0:Data:mylib.gcda
    -:    0:Runs:1
    -:    0:Programs:1
    -:    1:#include "mylib.h"
    -:    2:
    1:    3:int is_even(int num)
    -:    4:{
    1:    5:    if (num % 2)
#####:    6:        return false;
    -:    7:    else
    1:    8:        return true;
    -:    9:} 
```

# c++ - 将字符串解析为字符指针数组：char[0] 包含完整字符串，而 [1] 向前不包含任何内容

> ID：13385599
> 
> 赞同：2
> 
> 时间：2012-11-14T19:09:20.463
> 
> 标签：c++, string, parsing, pointers, char

我正在尝试将一个简单的字符串解析为 *char 数组，由于某种原因，当我使用 string.c_str() 时，它将整个字符串放入 *char[0] 并且数组的其余部分留空（我最初认为字符只能包含一个 ASCII 字符，但我猜它们作为指针的行为不同），任何人都可以扫描我的函数并告诉我是否有任何明显的错误？

```
static void SetGame()
{
    // Variable Initiation
    int myRandom = rand() % (numOfWords - 1);
    lengthOfString = wordArray[myRandom].length();

    // Reinitiate Pointer Arrays
    stringArray = new string[lengthOfString];
    isDiscoveredArray = new bool[lengthOfString];

    // Parse string to the array of characters
    *stringArray = wordArray[myRandom].c_str();

    // Set each boolean array value to false
    for (int i = 0; i < sizeof(isDiscoveredArray); i++)
    {
        isDiscoveredArray[i] = false;
    }
} 
```

这是我对指针的减速

```
// Global Variable and pointer Declerations
string *wordArray;
int numOfWords;
string *stringArray;
int lengthOfString;
bool *isDiscoveredArray; 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:15:48.113

你在这里混合类型。首先，您构建一个字符串数组并将其存储在一个指针中，然后将`const char*`来自 c_str 的第一个元素分配给 a。`string`如果您要为所选单词中的每个字符创建一个，则您当前拥有的代码将是。

使您的 "stringArray" a`const char*`适合您已有的代码，但**删除内存分配**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:15:33.417

你有一个 std::string 数组，当你尊重它时（即 *stringArray）它与 stringArray[0] 相同，所以这就是为什么它总是进入数组的第一个元素。

由于您设置的数组具有与要复制的字符串相同数量的元素，因此您可能只想使用字符串而不是字符串数组将其复制到其中。

如果它应该是 char*（字符数组），那么您将需要将作为 wordArray[myRandom].c_str() 的结果的源显式复制到您的字符数组中，而不是使用简单的赋值。

# c++ - 按值返回总是 const 吗？

> ID：13385601
> 
> 赞同：3
> 
> 时间：2012-11-14T19:09:25.113
> 
> 标签：c++, return-value, rvalue-reference, temporary-objects, pass-by-rvalue-reference

此代码无法编译：

```
class C {};

void foo (C& c) {}

C bar() { return C(); }

int main()              
{
  foo(bar());
} 
```

行中的编译错误（GCC 4.1.2）`foo(bar())`：

> 从“C”类型的临时对象对“C&”类型的非常量引用进行无效初始化

当`bar()`返回一个`mutable`对象时，它应该编译......
**为什么 C++ 不允许上面的代码？**

**编辑：**我在所有[答案中总结了](https://stackoverflow.com/a/13385827/938111)所有好主意的答案;-)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T19:13:46.553

此处适用的规则是您不能创建对临时对象的非常量引用。如果`foo`被声明为`foo(const C&)`代码就可以了。

但是，临时对象本身不是 const；您可以在其上调用非常量成员函数，例如`bar().non_const_member_function()`.

使用 C++11，可以编写 foo 来获取右值引用；在这种情况下，通话就可以了：

```
void foo(C&&);
foo(bar());  // okay 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-14T19:12:27.633

这是因为返回的值`bar`是一个*临时*值。由于它的存在是暂时的，因此您不能使用指针或对其的引用。

但是，如果您存储该临时对象的*副本*，就像在您的第二次更改中一样，您不再将对临时对象的引用传递给`foo`，而是对真实有形对象的引用。在第一种情况下，当您更改为对常量对象的引用时，编译器会确保临时对象保持足够长的时间（根据 C++ 规范）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T19:13:01.130

可修改（左值）引用不绑定到临时值。但是，常量引用*确实*绑定到临时值。与value返回的对象是否为const无关；这只是表达式是否是临时的问题。

例如，以下*是*有效的：

```
struct C { void i_am_non_const() {} };

int main()
{
    bar().i_am_non_const();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T19:13:16.900

问题不在于 的声明，`bar`而在于的声明`foo`。`foo`接受非`const`引用，并且临时对象只能绑定到`const`引用（然后扩展临时对象的生命周期以匹配它绑定到的引用的生命周期）。

允许非`const`引用绑定到临时没有多大意义。非`const`引用意味着它将修改绑定到它的任何对象。修改临时文件没有任何意义，因为它的生命周期是有限的，一旦超出范围，更改就会丢失。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T19:13:53.757

这是一种设计选择。这里没有什么是天生不可能的。只是一个设计选择。

在 C++11 中，您有第三种选择，它也是*更好的*选择：

```
void foo(C && c) {} 
```

也就是说，使用右值引用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-14T19:15:35.963

它不是 const，但它是一个临时的*rvalue*。因此，它不能绑定到非常量*左值*引用。

它可以绑定到 const 或*rvalue*引用，并且您可以在其上调用成员函数（无论是否为 const）：

```
class C { void f(); };

void foo_const(C const &);
void foo_rvalue(C &&);

foo_const( bar() );  // OK
foo_rvalue( bar() ); // OK
bar().f();           // OK 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-14T19:15:05.633

真正的硬道理是，获取对临时值的引用是没有意义的。

通过引用传递对象的要点是它允许您修改其状态。但是，在临时的情况下，就其本质而言，能够对其进行修改并不是特别有帮助，因为您无法在以后的代码中获得对它的另一个引用以查看更改。

但是，如果您有`const`参考，这会有所不同。由于您只会从`const`参考资料中阅读，因此能够在那里使用临时文件是完全有意义的。这就是为什么编译器会为您“破解”它，并为您想要“转换”为`const`引用的临时对象提供更永久的地址。

因此，规则是您不能获得`const`对临时值的非引用。（这在 C++11 中略有改变，我们有一种新类型的引用来服务于这个确切的目的，但方法应该以特殊的方式处理这些。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-14T19:23:04.610

谢谢大家的回答:-)
在这里我收集你的好主意;-)

## 回答

*按值***返回** 不是`const`。例如，我们可以调用*return by value*的非常量成员函数：

```
class C { 
  public:
    int x;
    void set (int n) { x = n; }  // non-const function
};

C bar()  { return C(); }

int main ()
{
    bar.set(5); // OK
} 
```

但是**C++ 不允许对临时对象进行非常量引用**。但是 C++11 允许对临时对象
进行非 const*右值引用。*;-)

## 解释

```
class C {};

void foo (C& c) {}

C bar()  { return C(); }
//bar() returns a temporary object
//temporary objects cannot be non-const referenced

int main()
{
  //foo() wants a mutable reference (i.e. non-const)
  foo( bar() ); // => compilation error     
} 
```

## 三个修复

1.  变更`foo`声明

    ```
     void foo (const C& c) {} 
    ```

2.  使用另一个对象

    ```
     int main()              
      {
        C c;
        foo( c = bar() );
      } 
    ```

3.  使用 C++11*右值引用*

    ```
     void foo(C && c) {} 
    ```

## 而且

为了确认临时对象是 const，上面的源代码由于同样的原因而失败：

```
class C {};

void foo(C& c) {}

int main()                
{
  foo( C() );
} 
```

# java - 有没有人有一个好的java BitBuffer？

> ID：13385603
> 
> 赞同：4
> 
> 时间：2012-11-14T19:09:37.767
> 
> 标签：java

我正在做一个学校作业（做霍夫曼编码），我需要某种位缓冲区来放入所有位。虽然我确实在谷歌上发现了几件事，但大部分东西都是垃圾 - 没有编译，引用了我没有的*其他库等。有没有人有一个真正好的位缓冲类？*我真正想做的就是一次读取和写入一个位。如果没有人有好的数据结构，是否有一些现有的数据结构可以有效地保存我自己可以用来编写的那种数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T12:28:00.817

我在解决霍夫曼代码实现时遇到了同样的问题，我使用了这个库并对其进行了测试，它可以工作..

[位输出流](https://www.cs.duke.edu/courses/spring11/cps100e/assign/huff/code/BitOutputStream.html)

```
 import java.io.*;

/**
 * Write bits-at-a-time where the number of bits is between 1 and 32.
 * Client programs must call <code>flush</code> or
 * <code>close</code> when finished writing or not all bits will be written.
 * This class is intended to be used with <code>BitInputStream</code> to
 * facilitate reading and writing data in a bits-at-a-time manner.
 * <P>
 * Updated for version 2.0 to extend java.io.OutputStream
 * <P>
 * Any exceptions generated are rethrown as <code>RuntimeException</code> objects
 * so client code does not have to catch or rethrow them.
 * <P>
 * @author Owen Astrachan
 * @version 1.0, July 2000
 * @version 2.0, October 2004
 * @version 2.1, March 2010, Fixed >> to >>> bug in writeBits
 */

public class BitOutputStream extends OutputStream
{

    private OutputStream  myOutput;
    private int           myBuffer;
    private int           myBitsToGo;

    private static final int bmask[] = {
        0x00, 0x01, 0x03, 0x07, 0x0f, 0x1f, 0x3f, 0x7f, 0xff,
        0x1ff,0x3ff,0x7ff,0xfff,0x1fff,0x3fff,0x7fff,0xffff,
        0x1ffff,0x3ffff,0x7ffff,0xfffff,0x1fffff,0x3fffff,
        0x7fffff,0xffffff,0x1ffffff,0x3ffffff,0x7ffffff,
        0xfffffff,0x1fffffff,0x3fffffff,0x7fffffff,0xffffffff
    };

    private static final int BITS_PER_BYTE = 8;

    /**
     * Required by OutputStream subclasses, write the low
     * 8-bits to the underlying outputstream
     */
    public void write(int b) throws IOException {
        myOutput.write(b);
    }

    /**
     * Create a stream that writes-through to the <code>OutputStream</code> object
     * passed as a parameter.
     * @param out is the output stream to which bits are written
     */
    public BitOutputStream(OutputStream out){
        myOutput = out;
        initialize();
    }

    private void initialize(){
        myBuffer = 0;
        myBitsToGo = BITS_PER_BYTE;
    }
    /**
     * Construct a bit-at-a-time output stream with specified file
     * name.
     * @param filename is the name of the file being written
     * @throws RuntimeException if opening file fails for either FileNotFound
     * or for Security exceptoins
     */
    public BitOutputStream(String filename)
    {
        try{
            myOutput = new BufferedOutputStream(new FileOutputStream(filename)); 
        }
        catch (FileNotFoundException fnf){
            throw new RuntimeException("could not create " + filename + " " + fnf);
        }
        catch(SecurityException se){
            throw new RuntimeException("security exception on write " + se);
        }
        initialize();
    }

    /**
     * Flushes bits not yet written, must be called by client
     * programs if <code>close</code> isn't called.
     * @throws RuntimeException if there's a problem writing bits
     */
    public void flush()
    {
        if (myBitsToGo != BITS_PER_BYTE) {
            try{
                write( (myBuffer << myBitsToGo) );
            }
            catch (java.io.IOException ioe){
                throw new RuntimeException("error writing bits on flush " + ioe);
            }
            myBuffer = 0;
            myBitsToGo = BITS_PER_BYTE;
        }

        try{
            myOutput.flush();    
        }
        catch (java.io.IOException ioe){
            throw new RuntimeException("error on flush " + ioe);
        }
    }

    /**
     * Releases system resources associated with file and
     * flushes bits not yet written. Either this function
     * or flush must be called or not all bits will be written
     * @throws RuntimeException if close fails
     */
    public void close()
    {
        flush();
        try{
            myOutput.close();
        }
        catch (IOException ioe){
            throw new RuntimeException("error closing BitOutputStream " + ioe);
        }
    }

    /**
     * Write specified number of bits from value to a file.
     * @param howManyBits is number of bits to write (1-32)
     * @param value is source of bits, rightmost bits are written
     * @throws RuntimeException if there's an I/O problem writing bits
     */

    public void writeBits(int howManyBits, int value)
    {
        value &= bmask[howManyBits];  // only right most bits valid

        while (howManyBits >= myBitsToGo){
            myBuffer = (myBuffer << myBitsToGo) |
                       (value >>> (howManyBits - myBitsToGo));
            try{
                write(myBuffer);    
            }
            catch (java.io.IOException ioe){
                throw new RuntimeException("error writing bits " + ioe);
            }

            value &= bmask[howManyBits - myBitsToGo];
            howManyBits -= myBitsToGo;
            myBitsToGo = BITS_PER_BYTE;
            myBuffer = 0;
        }

        if (howManyBits > 0) {
            myBuffer = (myBuffer << howManyBits) | value;
            myBitsToGo -= howManyBits;
        }
    }
} 
```

[位输入流](https://www.cs.duke.edu/courses/spring11/cps100e/assign/huff/code/BitInputStream.html)

```
import java.io.*;

/**
 * Reads bits-at-a-time where the number of bits is between 1 and 32.
 * Updated for version 2.0 to extend java.io.InputStream. This class
 * can be used together with <code>BitOutputStream</code> to facilitate
 * reading and writing data several bits-at-a-time. BitInputStream objects
 * that are constructed from a File support <code>reset()</code>. However,
 * if constructed from an <code>InputStream</code> an object cannot be reset.
 * <P>
 * Any exceptions generated are rethrown as <code>RuntimeException</code> objects
 * so client code does not have to catch or rethrow them. (Unless the extension
 * of <code>InputStream</code> requires throwing as another type of exception, e.g.,
 * as with method <code>read</code>.
 * <P>
 * @author Owen Astrachan
 * @version 1.0, July 2000
 * @version 2.0, October 2004
 */

public class BitInputStream extends InputStream
{
    private InputStream     myInput;
    private int             myBitCount;
    private int             myBuffer;
    private File            myFile;

    private static final int bmask[] = {
        0x00, 0x01, 0x03, 0x07, 0x0f, 0x1f, 0x3f, 0x7f, 0xff,
        0x1ff,0x3ff,0x7ff,0xfff,0x1fff,0x3fff,0x7fff,0xffff,
        0x1ffff,0x3ffff,0x7ffff,0xfffff,0x1fffff,0x3fffff,
        0x7fffff,0xffffff,0x1ffffff,0x3ffffff,0x7ffffff,
        0xfffffff,0x1fffffff,0x3fffffff,0x7fffffff,0xffffffff
    };

    private static final int BITS_PER_BYTE = 8;
    /**
     * Construct a bit-at-a-time input stream from a file whose
     * name is supplied. 
     * @param filename is the name of the file that will be read.
     * @throws RuntimeException if filename cannot be opened.
     */
    public BitInputStream(String filename)
    {
        this(new File(filename));
    }

    /**
     * Construct a bit-at-a-time input stream from <code>file</code>.
     * @param file is the File that is the source of the input
     * @throws RuntimeExceptoin if file cannot be opened.
     */
    public BitInputStream(File file)
    {
        myFile = file;  
        try {
            reset();
        } catch (IOException e) {
            throw new RuntimeException("could not open file for reading bits "+e);
        }

    }

    /**
     * Open a bit-at-a-time stream that reads from supplied InputStream. If this
     * constructor is used the BitInputStream is not reset-able.
     * @param in is the stream from which bits are read.
     */
    public BitInputStream(InputStream in){
        myInput = in;
        myFile = null;
    }

    /**
     * Return true if the stream has been initialized from a File and
     * is thus reset-able. If constructed from an InputStream it is not reset-able.
     * @return true if stream can be reset (it has been constructed appropriately from a File).
     */
    public boolean markSupported(){
        return myFile != null;
    }

    /**
     * Reset stream to beginning. The implementation creates a new
     * stream.
     * @throws IOException if not reset-able (e.g., constructed from InputStream).
     */

    public void reset() throws IOException
    {
        if (! markSupported()){
            throw new IOException("not resettable");
        }
        try{
            close();
            myInput = new BufferedInputStream(new FileInputStream(myFile));
        }
        catch (FileNotFoundException fnf){
            System.err.println("error opening " + myFile.getName() + " " + fnf);
        }
        myBuffer = myBitCount = 0;
    } 

    /**
     * Closes the input stream.
     * @throws RuntimeException if the close fails
     */

    public void close()
    {
        try{
            if (myInput != null) {
                myInput.close();
            }
        }
        catch (java.io.IOException ioe){
           throw new RuntimeException("error closing bit stream " + ioe);
        }
    }

    /**
     * Returns the number of bits requested as rightmost bits in
     * returned value, returns -1 if not enough bits available to
     * satisfy the request.
     *
     * @param howManyBits is the number of bits to read and return
     * @return the value read, only rightmost <code>howManyBits</code>
     * are valid, returns -1 if not enough bits left
     */

    public int readBits(int howManyBits) throws IOException
    {
        int retval = 0;
        if (myInput == null){
            return -1;
        }

        while (howManyBits > myBitCount){
            retval |= ( myBuffer << (howManyBits - myBitCount) );
            howManyBits -= myBitCount;
            try{
                if ( (myBuffer = myInput.read()) == -1) {
                    return -1;
                }
            }
            catch (IOException ioe) {
                throw new IOException("bitreading trouble "+ioe);
            }
            myBitCount = BITS_PER_BYTE;
        }

        if (howManyBits > 0){
            retval |= myBuffer >> (myBitCount - howManyBits);
            myBuffer &= bmask[myBitCount - howManyBits];
            myBitCount -= howManyBits;
        }
        return retval;
    }

    /**
     * Required by classes extending InputStream, returns
     * the next byte from this stream as an int value.
     * @return the next byte from this stream
     */
    public int read() throws IOException {
        return readBits(8);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:17:53.697

在此处查找位缓冲区示例

[http://www.javadocexamples.com/java_source/com/sun/java/help/search/BitBuffer.java.html](http://www.javadocexamples.com/java_source/com/sun/java/help/search/BitBuffer.java.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-14T19:17:21.547

一般来说，队列是一个很好的缓冲区（FIFO）。可以使用布尔值来表示位。Java 库中的 Queue 实现是通用的，因此您可以像这样实例化您的位缓冲区：

```
Queue<Boolean> bbuff = new Queue<Boolean>();
Boolean imabit = false; 
```

你像这样排队/缓冲位：

```
bbuff.add(imabit); 
```

然后你出列/读取（并删除）下面的位，如下所示：

```
Boolean dequeuedbit = bbuff.remove(); 
```

# wordpress - Windows 8 中的 Cufon 字体文本未对齐属性

> ID：13385606
> 
> 赞同：0
> 
> 时间：2012-11-14T19:09:51.620
> 
> 标签：wordpress, windows-8, cufon

我在我的 Wordpress 网站上遇到了 Cufon 字体的问题。字体的顶部被切断。我正在使用名为“方法”的 MySiteMyWay 主题。在使用 Firefox、IE 或 Chrome 的 Windows 8 PC 上可以看到该问题。我还没有足够的声望来发布截图，但你可以在 [http://i.stack.imgur.com/uZunp.png查看它](http://i.stack.imgur.com/uZunp.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:11:08.107

你能在其他windows操作系统上看到这个吗？我正在使用 vista 并且有类似的东西。我的情况是我发现这个[http://kaptinlin.com/support/discussion/comment/13545#Comment_13545](http://kaptinlin.com/support/discussion/comment/13545#Comment_13545)有效。然而，它确实弄乱了整体线高。

# php - 是否有 PHP 函数或方法对数据进行校验和？

> ID：13385607
> 
> 赞同：2
> 
> 时间：2012-11-14T19:09:59.750
> 
> 标签：php, mysql

我有一个我正在使用 PHP 开发的 MySQL 数据库，它将从每日数据馈送中执行地址验证。我们会在最后进行地址更正，因为我们无法控制提要的来源。

我试图想出一种方法来查看地址是否已在源头更改。如果它发生变化，那么将在我们的 MySQL 数据库上用 PHP 执行地址验证。

在不存储旧提要的副本的情况下，我认为最好对提要中的字段进行校验和并将其存储在每条记录中。然后，之后的每个提要都会查看校验和是否已更改。这是最好的方法吗？是否已经有一个 PHP 函数可以完成所有这些工作？MySQL 中的一些东西呢？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T19:17:34.837

crc32 可能是你想要的。

在 php 中：[crc32()](http://us3.php.net/manual/en/function.crc32.php) 在 Mysql 中[CRC32()](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_crc32)

crc32 可能更适合 SHA1 或 MD5 进行简单比较/数据完整性： [请参阅此处](https://stackoverflow.com/questions/996843/when-is-crc-more-appropriate-to-use-than-md5-sha1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:17:04.240

PHP 和 MySQL 都支持运行成本低的[功能；](https://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html#function_crc32)至少比 MD 或 SHA 之类的哈希算法要少。[`crc32`](http://php.net/crc32)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:34:45.627

您可以使用各种散列方法，md5 或 sha 都可以，您需要在数据库中存储要比较的散列字符串，理想情况下您想做类似的事情

```
if (sha1(strtoupper($list_of_values) )=== $stored_hashstring){
    //skip
}else{
    //update
} 
```

根据数据，您可能需要在字符串上添加额外的解析，即：删除空格等

# jquery - jQuery：替换文件名中的图像大小

> ID：13385608
> 
> 赞同：0
> 
> 时间：2012-11-14T19:10:00.523
> 
> 标签：jquery, regex, replace, filepath

输入 URL：`http://somewpsite.com/wp-content/uploads/2012/10/IMG_1234-150x150.jpg` 预期输出 URL：`http://somewpsite.com/wp-content/uploads/2012/10/IMG_1234.jpg` 当前正则表达式：`$(this).attr('src').replace('/-[\d]+x[\d]+/', '');`

假设`$(this)`代表一个`img`元素。我知道我可以`-150x150`像替换字符串一样轻松使用，但是有不同的大小，它应该能够支持更多大小，而无需返回并编辑此代码。

我希望这里有人能弄清楚我上面当前的正则表达式有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:12:23.953

问题在于 JavaScript 正则表达式不是字符串，因此您不要将它们括在引号中。

请注意，您不需要括号`\d`：

```
$(this).prop('src', function (i, v) {
    return v.replace(/-\d+x\d+\.jpg$/, '.jpg');
}); 
```

* * *

如果您还可能使用其他图像格式，请改用此格式：

```
$(this).prop('src', function (i, v) {
    return v.replace(/-\d+x\d+\.(jpg|png|gif)$/, '.$1');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:12:36.090

正则表达式是 JavaScript 中的特定文字，它们不是作为字符串创建的。只需删除单引号：

```
$(this).attr('src').replace(/-[\d]+x[\d]+/, '') 
```

请注意，`replace`这不是就地工作，而是返回结果字符串。因此，取决于您是要进一步处理它还是只是将其写回属性中，您必须将其分配给某些东西。

# java - 使用 JIT 编译器，什么是第一位的？翻译成机器码还是解释字节码？

> ID：13385612
> 
> 赞同：0
> 
> 时间：2012-11-14T19:10:16.143
> 
> 标签：java, jvm, jit

据我所知，JIT 将字节码编译成可以运行得更快的本机机器码。所以根据我的信念，我的问题的答案应该是 1.翻译成机器码 2.解释字节码。解释代码意味着执行代码。但我找到了相反的答案！谁能解释一下...在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:15:29.193

一旦你有了字节码序列的机器码（正如你所注意到的，它应该比解释更快），继续解释那个字节码序列 (*) 是没有意义的。在后台运行或尚未开始编译时进行解释更有用（无论出于何种原因——一个常见的情况是：代码执行的频率不够高，不值得编译）。

(*) 实际上，一些 JIT 编译器确实对机器代码进行了如此多的专门化，以至于它对某些代码路径或输入无效，并且在发生这些情况时不得不回退到解释/重新编译。甚至其他 JIT 编译器有时也会重新编译代码，这可能会也可能不会导致暂时返回解释。但总的来说，如果代码适用并且速度更快（它总是应该如此），那么不使用它是没有意义的。

# asp.net-mvc - 如何刷新放置在 JQuery Dialog 中的 MVC 3 部分视图的内容

> ID：13385613
> 
> 赞同：0
> 
> 时间：2012-11-14T19:10:23.600
> 
> 标签：asp.net-mvc, jquery-ui-dialog, partial-page-refresh, asp.net-mvc-partialview

我的情况很常见。我的 Web 管理中有一个主详细信息环境。我需要能够从对话框中选择大约 3500 条记录。

这就是我需要分页的原因。我的实现是在其中使用 JQuery Dialog 和 MVC 3 partial View。我需要在不刷新下划线页面的情况下刷新已打开的 JQuery 对话框的内容的可能性。

在任何页面单击 JQuery 对话框中的局部视图后

```
 <dt>
    <a href="/News/SelectArtist?PageId=2">B</a>
 </dt>
 <dt>
    <a href="/News/SelectArtist?PageId=3">C</a>
 </dt> 
```

我的页面已刷新，JQuery 对话框消失了。

这种情况有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:29:31.577

尚不清楚 News/SelectArtist 是否是应该返回您的局部视图的控制器操作，但在这里我将如何做到这一点。

您可以通过 ajax 调用此操作并刷新 jQuery 对话框的内容。

假设您的 jQuery 对话框有一个 div 包装整个内容（从您的局部视图）：

```
<div id="dialog-content">
...
<!-- this is the content of your partial view -->
</div> 
```

为您的每个页面链接添加一个 css 类和一个 data-pageid 来调用您的 SelectArtist 操作，如下所示：

```
<dt>
<a class="page-trigger" href="#" data-pageid="2">B</a>
</dt> 
```

从脚本块：

```
$(function() {
  $('.page-trigger').click(function() {
    var pageId = $(this).data('pageid');
    $.ajax('/News/SelectArtist?PageId=' + pageId, { }, function(data) {
      $('#dialog-content').html(data);
    });
  });
}); 
```

确保您的 SelectArtist 操作具有该`[HttpPost]`属性。您的对话内容将在没有页面请求的情况下更新。

```
[HttpPost]
public ActionResult SelectArtist()
{
  int pageId = int.Parse(Request.QueryString["pageId']);
  ...
  return PartialView(viewModel);
} 
```

# android - 点击按钮Android全屏显示图像

> ID：13385617
> 
> 赞同：-1
> 
> 时间：2012-11-14T19:10:33.627
> 
> 标签：android, image, button, listeners

我对 android dev 完全是个菜鸟，并提名自己为我最后一年的大学项目编写一个特殊需求教育应用程序。我正在尝试开发的元素之一是一组闪存卡（png 图像），每张卡都可以通过单击应用程序主屏幕上的相应按钮全屏显示。我可以在 Java 中轻松做到这一点，但经过 2 天的谷歌搜索和尝试各种教程后，图像仍然无法显示。我越来越担心，如果在 android 中这种直截了当的事情很难，那么这个项目就注定了，请帮忙

picView = (WebView)findViewById(R.id.pic_view); picView.setBackgroundColor(0);

```
 Button pickBtn = (Button)findViewById(R.id.pick_btn);
    pickBtn.setOnClickListener(this);

    Button loadBtn = (Button)findViewById(R.id.load_btn);
    loadBtn.setOnClickListener(this);

    Button appBtn = (Button)findViewById(R.id.app_btn);
    appBtn.setOnClickListener(this);

    picView.getSettings().setBuiltInZoomControls(true);
    picView.getSettings().setUseWideViewPort(true);
} 
```

这是我的 onClick 方法

public void onClick(View v) { if(v.getId() == R.id.app_btn) {

```
 picView.loadUrl("file:///res/drawable-hdpi/image1.png");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:15:14.917

我假设您在显示按钮和接收点击时没有问题。

因此，要全屏显示图像，一种解决方案是

*   创建一个特殊的活动（第二个）
*   然后给它一个样式让它全屏显示（基本上设置宽度，高度并删除标题栏），
*   然后给它一个带有单个 imageView 的布局，该布局将填充其父级的宽度和高度。

然后学习如何使用意图将参数从一个活动传递到另一个活动。传递资源的id来显示和显示它。

# php - 如何将 moset 树列表导出到 JV Link 目录？

> ID：13385622
> 
> 赞同：1
> 
> 时间：2012-11-14T19:10:57.017
> 
> 标签：php, phpmyadmin, joomla1.5, joomla2.5

我在 Joomla 1.5 中使用 moset 树。现在我为我的 Joomla 2.5 网站购买了 JV Link 目录。我想将我所有的列表从 moset 树（Joomla 1.5）导出到 JV Link 目录（Joomla 2.5）。我们如何出口？

# c - 将 C 指针与 char 数组一起使用

> ID：13385625
> 
> 赞同：3
> 
> 时间：2012-11-14T19:11:13.957
> 
> 标签：c, arrays, pointers, character-arrays

```
int i=512;
char *c = (char *)&i;
c[0] =1;
printf("%d",i); 
```

这将显示“513”，它将 i 加 1。

```
int i=512;
char *c = (char *)&i;
c[1] =1;
printf("%d",i); 
```

而这显示256。将其除以2。有人可以解释为什么吗？多谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T19:19:28.623

## 二进制

用二进制表示的 32 位数字 512 就是：

```
00000000000000000000001000000000 
```

因为 2 的 9 次方是 512。通常，您从右到左读取位。

以下是其他一些二进制十进制数：

```
0001 = 1
0010 = 2
0011 = 3
0100 = 4 
```

## 演员表：将 Int 重新解释为字节数组

当你这样做时：

```
int i = 512;
char *c = (char *)&i; 
```

您可能知道，您将 4 字节整数解释为字符数组（8 位字节）。如果没有，这就是发生的事情：

```
&i 
```

获取变量的地址`i`。

```
(char *)&i 
```

将其重新解释（或*强制转换*）为指向 char 类型的指针。这意味着它现在可以像数组一样使用。由于您知道 an`int`在您的机器上至少是 32 位的，因此可以使用`c[0], c[1], c[2], c[3]`.

根据系统的[字节序](http://en.wikipedia.org/wiki/Endianness)，可以排列数字的字节：最高有效字节在前（大端），或最低有效字节在前（小端）。*x86*处理器是小端的。这基本上意味着数字 512 的布局如上例所示，即：

```
00000000 00000000 00000010 00000000
    c[3]     c[2]     c[1]     c[0] 
```

我已经根据它们在内存中的布局方式将这些位分组为单独的 8 位块（字节）。请注意，您也可以在此处从右到左阅读它们，因此我们可以保持二进制数系统的约定。

## 结果

现在设置`c[0] = 1`有这个效果：

```
00000000 00000000 00000010 00000001
    c[3]     c[2]     c[1]     c[0] 
```

这是`2^9 + 2^0 == 513`十进制的。

设置`c[1] = 1`有这样的效果：

```
00000000 00000000 00000001 00000000
    c[3]     c[2]     c[1]     c[0] 
```

这是`2^8 == 256`十进制的，因为您已经用 00000001**覆盖**了第二个字节 00000010

请注意*大端*系统，*字节*将以与*小端*系统相反的顺序存储。这意味着如果你在其中一台机器上运行它，你会得到完全不同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:16:22.187

记住 char 是 8 位，512 是位表示
`512 = 10 0000 0000`

当你这样`char *c = (char *)&i;`做时：

`c[1] = 10
c[0] = 0000 0000`

当您执行 c[0] = 1 时，您将`10 0000 0001`得到 513。

当您执行 c[1] = 1 时，您将`01 0000 0000`得到 256。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T19:21:32.783

在您想知道为什么您看到的是“奇怪”之前，请考虑您正在运行代码的平台以及其中的[**字节序**](http://en.wikipedia.org/wiki/Endianness)。

然后考虑以下

```
int main(int argc, char *argv[])
{
    int i=512;
    printf("%d : ", i);
    unsigned char *p = (unsigned char*)&i;
    for (size_t j=0;j<sizeof(i);j++)
        printf("%02X", p[j]);
    printf("\n");

    char *c = (char *)&i;
    c[0] =1;
    printf("%d : ", i);
    for (size_t j=0;j<sizeof(i);j++)
        printf("%02X", p[j]);
    printf("\n");

    i = 512;
    c[1] =1;
    printf("%d : ", i);
    for (size_t j=0;j<sizeof(i);j++)
        printf("%02X", p[j]);
    printf("\n");
    return 0;
} 
```

在我的平台上（Macbook Air、OS X 10.8、Intel x64 Arch）

```
512 : 00020000
513 : 01020000
256 : 00010000 
```

将您在上面看到的内容与您希望阅读的有关[**字节序**](http://en.wikipedia.org/wiki/Endianness)的内容结合起来，您可以清楚地看到我的平台是**小字节序**。那你的呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T19:18:22.620

由于您`int`通过指针对 a进行别名`char`，并且 a`char`是 8 位宽（一个字节），因此分配：

```
c[1] = 1; 
```

将设置为的第二个`i`字节`000000001`。字节 1、3 和 4（如果`sizeof(int) == 4`）将保持不变。以前，第二个字节是`000000010`（因为我假设您使用的是基于 x86 的计算机，这是一种小端架构。）所以基本上，您将唯一设置为一个位置的位向右移动。那是除以2。

在 little-endian 机器和 32-bit 编译器上`int`，您最初在 中拥有这四个字节`i`：

```
 c[0]      c[1]      c[2]     c[3]
00000000  00000010  00000000 00000000 
```

分配后，`i`设置为：

```
 c[0]      c[1]      c[2]     c[3]
00000000  00000001  00000000 00000000 
```

因此它从 512 变为 256。

现在您应该明白为什么`c[0] = 1`会导致 513 :-) 想想哪个字节被设置为 1 并且分配根本不会改变其他字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T19:12:35.653

这取决于机器是这样`little endian`还是`big endian`数据如何存储在位中。有关更多信息，请阅读有关[字节序的信息](http://williams.comp.ncat.edu/Endian.htm)

C 语言不保证这一点。

```
512 in binary :

    =============================================
    0000 0000 | 0000 0000 | 0000 0010 | 0000 0000   ==>512
    =============================================
      12          34          56          78 
```

（0x12345678 假设这个 int 的地址）

```
char *c =(char *)&i now c[0] either point to 0x78 or 0x12
Modifying the value using c[0] may result to 513 if it points to 0x78
    =============================================
    0000 0000 | 0000 0000 | 0000 0010 | 0000 0001   ==> 513
    =============================================

or, can be 

    =============================================
    0000 0001 | 0000 0000 | 0000 0010 | 0000 0000  ==>2^24+512
    ============================================= 
```

同样对于 256 ：因为您的 c [1](http://williams.comp.ncat.edu/Endian.htm)将具有从右数第二个字节的地址。在下图中，

```
 =============================================
    0000 0000 | 0000 0000 | 0000 0001 | 0000 0000  ==>256
    ============================================= 
```

所以它在我们的系统中实现了数字的表示

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T19:26:08.830

这是因为您的机器是[little endian](http://en.wikipedia.org/wiki/Endianness)，这意味着最低有效字节首先存储在内存中。

你说`int i=512;`。`512`是`0x00000200`十六进制的（为简单起见，假设是 32 位操作系统）。让我们看看如何`i`将十六进制字节存储在内存中：

```
 00 02 00 00  // 4 bytes, least-significant byte first 
```

现在我们通过执行将相同的内存位置解释为字符数组`char *c = (char *)&i;`-**相同的内存，不同的解释**：

```
 00 02 00 00
c[0][1][2][3] 
```

现在我们改变`c[0]`了`c[0] =1;`，记忆看起来像

```
 01 02 00 00 
```

这意味着如果我们`int`再次将其视为小端（通过做`printf("%d",i);`），它是十六进制`0x00000201`，即`513`十进制。

现在，如果我们返回并更改`c[1]`为`c[1] =1;`，您的记忆现在变为：

```
 00 01 00 00 
```

现在我们回过头来把它解释为小端序`int`，它是十六进制`0x00000100`，也就是`256`十进制。

# visual-studio-2010 - 创建一个不编译项目的构建

> ID：13385630
> 
> 赞同：0
> 
> 时间：2012-11-14T19:11:26.293
> 
> 标签：visual-studio-2010, msbuild, compilation

我在 Visual Studio 2010 中有一个解决方案，它创建了一个 vsix 来将自定义项目模板安装到 VS。我将实际模板（解压缩）作为项目添加到我的解决方案中，以便于修改。它不会构建，因为`$replacements$`可构建代码中的所有内容都是非法的。

现在，这是我构建解决方案的工作流程：

1.  在模板项目上禁用构建
2.  在 Windows 资源管理器中手动压缩模板
3.  手动将 zip 复制到 VSIX 项目的 Project Templates 文件夹中
4.  在解决方案上运行构建，以便 VSIX 将使用新的压缩模板构建

我希望通过重新定义 VS 应该如何构建我的模板项目来简化这个过程......也就是说，它应该压缩它并将其移动到我的 VSIX 项目中，而不是编译。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:32:44.833

您可以将模板中项目的构建操作更改为 ZipProject。然后，您可以将 zip 文件复制到任何需要的位置。可能需要手动编辑项目文件或执行构建后操作...

# c# - 使用 C# HttpListener 提供大文件

> ID：13385633
> 
> 赞同：15
> 
> 时间：2012-11-14T19:11:41.600
> 
> 标签：c#, httplistener

我正在尝试使用 HttpListener 来提供静态文件，这适用于小文件。当文件变大时（使用 350 和 600MB 文件进行测试），服务器会因以下异常之一而阻塞：

**HttpListenerException**：*由于**线程退出或应用程序请求，I/O 操作已中止*，或者：
**HttpListenerException**：*信号量超时期限已过*。

需要改变什么来摆脱异常，让它运行稳定/可靠（和快速）？

[这里有一些进一步的阐述：这基本上是这个早先问题](https://stackoverflow.com/questions/10485985/bad-performance-when-offering-files-to-download-with-httplistener?lq=1)的后续问题。代码略微扩展以显示效果。内容写入循环使用（希望是合理的）块大小，在我的情况下为 64kB，但除了速度之外，更改值并没有什么不同（参见前面提到的旧问题）。

```
 using( FileStream fs = File.OpenRead( @"C:\test\largefile.exe" ) ) {

    //response is HttpListenerContext.Response...
    response.ContentLength64 = fs.Length;
    response.SendChunked = false;
    response.ContentType = System.Net.Mime.MediaTypeNames.Application.Octet;
    response.AddHeader( "Content-disposition", "attachment; filename=largefile.EXE" );

    byte[] buffer = new byte[ 64 * 1024 ];
    int read;
    using( BinaryWriter bw = new BinaryWriter( response.OutputStream ) ) {
        while( ( read = fs.Read( buffer, 0, buffer.Length ) ) > 0 ) {
            Thread.Sleep( 200 ); //take this out and it will not run
            bw.Write( buffer, 0, read );
            bw.Flush(); //seems to have no effect
        }

        bw.Close();
    }

    response.StatusCode = ( int )HttpStatusCode.OK;
    response.StatusDescription = "OK";
    response.OutputStream.Close();
} 
```

我正在尝试在浏览器和使用 HttpWebRequest 的 C# 程序中下载，这没有区别。

根据我的研究，我认为 HttpListener 并不能真正将内容刷新到客户端，或者至少以自己的速度这样做。我也省略了 BinaryWriter 并直接写入流 - 没有区别。在基本流周围引入了 BufferedStream - 没有区别。有趣的是，如果在循环中引入了 Thread.Sleep(200) 或稍大一些，它可以在我的盒子上运行。但是我怀疑它对于真正的解决方案是否足够稳定。[这个问题](https://stackoverflow.com/questions/794207/how-to-flush-httplistener-response-stream)给人的印象是根本没有机会让它正确运行（除了转移到我会求助的 IIS/ASP.NET，但如果可能的话，更可能远离）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T20:13:31.280

您没有向我们展示如何初始化 HttpListener 的另一个关键部分。因此，我用下面的代码尝试了你的代码，它有效

```
HttpListener listener = new HttpListener();
listener.Prefixes.Add("http://*:8080/");
listener.Start();
Task.Factory.StartNew(() =>
{
    while (true)
    {
        HttpListenerContext context = listener.GetContext();
        Task.Factory.StartNew((ctx) =>
        {
            WriteFile((HttpListenerContext)ctx, @"C:\LargeFile.zip");
        }, context,TaskCreationOptions.LongRunning);
    }
},TaskCreationOptions.LongRunning); 
```

`WriteFile`是您的代码在哪里`Thread.Sleep( 200 );`被删除。

如果您想查看它的完整代码。

* * *

```
void WriteFile(HttpListenerContext ctx, string path)
{
    var response = ctx.Response;
    using (FileStream fs = File.OpenRead(path))
    {
        string filename = Path.GetFileName(path);
        //response is HttpListenerContext.Response...
        response.ContentLength64 = fs.Length;
        response.SendChunked = false;
        response.ContentType = System.Net.Mime.MediaTypeNames.Application.Octet;
        response.AddHeader("Content-disposition", "attachment; filename=" + filename);

        byte[] buffer = new byte[64 * 1024];
        int read;
        using (BinaryWriter bw = new BinaryWriter(response.OutputStream))
        {
            while ((read = fs.Read(buffer, 0, buffer.Length)) > 0)
            {
                bw.Write(buffer, 0, read);
                bw.Flush(); //seems to have no effect
            }

            bw.Close();
        }

        response.StatusCode = (int)HttpStatusCode.OK;
        response.StatusDescription = "OK";
        response.OutputStream.Close();
    }
} 
```

# mysql - 具有求和功能时查询无法正常运行

> ID：13385635
> 
> 赞同：0
> 
> 时间：2012-11-14T19:11:50.993
> 
> 标签：mysql, sql, group-by

我正在运行一个查询：

```
select 
    iars.id,students.rollno,
    students.name as name, 
    teachers.name as tname, 
    students.studentid, 
    t1.studentid,
    sum(t1.obt) as obt1, sum(t1.benefits) as ben1, sum(t1.max)  as max1,
    (t2.obt) as obt2, (t2.benefits) as ben2, (t2.max)  as max2,
    (t3.obt) as obt3, (t3.benefits) as ben3, (t3.max)  as max3,
    (t4.obt) as obt4, (t4.benefits) as ben4, (t4.max)  as max4,
    (t5.obt) as obt5, (t5.benefits) as ben5, (t5.max)  as max5 
from groups,students
left join iars on iars.id
left join str on str.studentid=students.studentid
left join course on course.c_id=students.course 
left join teachers on teachers.id=iars.teacherid
join sgm on sgm.studentid=students.studentid
left join semdef on month
left join sps on sps.studentid=students.studentid and iars.paperid=sps.paperid
left join `attndata` `t1` on ((t1.studentid=students.studentid) and iars.id=t1.iarsid and t1.mon=1)
left join `attndata` `t2` on ((t1.studentid=t2.studentid) and t2.mon = 2 and iars.id=t2.iarsid)
left join `attndata` `t3` on ((t2.studentid=t3.studentid) and t3.mon = 4 and iars.id=t3.iarsid)
left join `attndata` `t4` on ((t3.studentid=t4.studentid) and t4.mon = 5 and iars.id=t4.iarsid)
left join `attndata` `t5` on ((t4.studentid=t5.studentid) and t5.mon = 6 and iars.id=t5.iarsid)
where students.course='1' and students.status='regular' and sps.paperid='2' and 
iars.courseid=students.course and iars.semester=str.semesterid and iars.paperid='2' and
str.semesterid='1' and str.sessionid='12' and groups.id=sgm.groupid 
group by sps.studentid , teachers.id order by students.name 
```

它是分组的，就像我想根据月份计算总和，但每当我使用总和时，它都会给我带来有趣的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:21:00.910

如果要按月计算总和，则应按日期和月份分组。与学生和老师分组将给您每月超过一排，并会产生*有趣的结果*

# actionscript-3 - 将图标嵌入 CSS 会增加 swf 大小吗？

> ID：13385637
> 
> 赞同：2
> 
> 时间：2012-11-14T19:12:10.697
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5

如果我在 CSS 文件中嵌入图标并在动作脚本代码中引用样式名称，这是一个好习惯吗？这会增加 swf 的大小吗？

任何帮助将非常感激。

谢谢， 古尔贾斯帕尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:58:35.410

是的，无论您选择哪种方式，字体都将嵌入到 SWF 文件中。

使用嵌入字体时限制文件大小的两种方法是：

*   仅包括所需的字符范围。[请参阅此页面了解更多信息](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7e04.html)。
*   您可以在主应用程序中嵌入字体并在稍后加载的应用程序的其他部分（模块或其样式表）中引用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:34:39.283

是的...嵌入。Flex 有许多内置的压缩​​算法，它们在减小文件大小方面做得非常出色。在为 Web 交付构建时，我尝试自己优化此过程，最终我无法获得比 flex 可以本地嵌入资产的文件更小的文件。

编辑：

我对添加第二个答案的假设是您询问的是图标（图像）而不是字体。

# windows-8 - 如何在 Windows 8 中找出用户在桌面而不是开始屏幕或其他商店应用程序 UI

> ID：13385638
> 
> 赞同：0
> 
> 时间：2012-11-14T19:12:11.830
> 
> 标签：windows-8, microsoft-metro, windows-store-apps

众所周知，在 Windows 8 中，如果用户位于开始屏幕或其他商店应用程序（地铁应用程序）用户界面，则桌面上的对话框对用户不可见。[我们将按照从桌面应用程序发送 toast 通知示例](http://code.msdn.microsoft.com/windowsdesktop/sending-toast-notifications-71e230a2)在我们的应用程序中添加一些 toast 通知功能。我能够让它工作。但是，如果用户已经在桌面上，我们不想发送 toast 通知。所以这意味着我们需要能够检测用户是否当前在桌面上。不知何故，我在互联网上搜索没有找到任何 API。有人可以让我知道该怎么做吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:43:22.397

Toast 通知无法知道用户所在的上下文，因此这是不可能的。

# android - 在 TextView (Android) 上获取给定偏移量的绝对位置

> ID：13385639
> 
> 赞同：5
> 
> 时间：2012-11-14T19:12:12.720
> 
> 标签：android, textview, position, character, offset

我有一个 TextView，我想在 TextView 的给定单词上放置一个纯色块，例如：

“这是一个文本字符串，我想在这个 WORD 上放置一个矩形” - 因此，“WORD”将有一个带有纯色的矩形。

为此，我正在考虑重写 onDraw(Canvas canvas) 方法，以便在文本上绘制一个块。我唯一的问题是找到一种有效的方法来获取给定单词或字符的绝对位置。

基本上，我正在寻找与[getOffsetForPosition(float x, float y) 方法完全相反的东西](http://developer.android.com/reference/android/widget/TextView.html#getOffsetForPosition%28float,%20float%29)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T15:38:03.200

基于这篇文章：[如何在 TextView 中获取 ClickableSpan 的坐标？](https://stackoverflow.com/questions/11905486/how-get-coordinate-of-a-clickablespan-inside-a-textview)，我设法使用此代码在文本顶部放置一个矩形：

```
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Paint paint = new Paint();
    paint.setStyle(Paint.Style.FILL);
    paint.setColor(Color.WHITE);

    // Initialize global value
    TextView parentTextView = this;
    Rect parentTextViewRect = new Rect();

    // Find where the WORD is
    String targetWord = "WORD";
    int startOffsetOfClickedText = this.getText().toString().indexOf(targetWord);
    int endOffsetOfClickedText = startOffsetOfClickedText + targetWord.length();

    // Initialize values for the computing of clickedText position
    Layout textViewLayout = parentTextView.getLayout();

    double startXCoordinatesOfClickedText = textViewLayout.getPrimaryHorizontal((int)startOffsetOfClickedText);
    double endXCoordinatesOfClickedText = textViewLayout.getPrimaryHorizontal((int)endOffsetOfClickedText);

    // Get the rectangle of the clicked text
    int currentLineStartOffset = textViewLayout.getLineForOffset((int)startOffsetOfClickedText);
    int currentLineEndOffset = textViewLayout.getLineForOffset((int)endOffsetOfClickedText);
    boolean keywordIsInMultiLine = currentLineStartOffset != currentLineEndOffset;
    textViewLayout.getLineBounds(currentLineStartOffset, parentTextViewRect);

    // Update the rectangle position to his real position on screen
    int[] parentTextViewLocation = {0,0};
    parentTextView.getLocationOnScreen(parentTextViewLocation);

    double parentTextViewTopAndBottomOffset = (
        //parentTextViewLocation[1] - 
        parentTextView.getScrollY() + 
        parentTextView.getCompoundPaddingTop()
    );

    parentTextViewRect.top += parentTextViewTopAndBottomOffset;
    parentTextViewRect.bottom += parentTextViewTopAndBottomOffset;

    // In the case of multi line text, we have to choose what rectangle take
    if (keywordIsInMultiLine){

        WindowManager wm = (WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();

        int screenHeight = display.getHeight();
        int dyTop = parentTextViewRect.top;
        int dyBottom = screenHeight - parentTextViewRect.bottom;
        boolean onTop = dyTop > dyBottom;

        if (onTop){
            endXCoordinatesOfClickedText = textViewLayout.getLineRight(currentLineStartOffset);
        }
        else{
            parentTextViewRect = new Rect();
            textViewLayout.getLineBounds(currentLineEndOffset, parentTextViewRect);
            parentTextViewRect.top += parentTextViewTopAndBottomOffset;
            parentTextViewRect.bottom += parentTextViewTopAndBottomOffset;
            startXCoordinatesOfClickedText = textViewLayout.getLineLeft(currentLineEndOffset);
        }

    }

    parentTextViewRect.left += (
        parentTextViewLocation[0] +
        startXCoordinatesOfClickedText + 
        parentTextView.getCompoundPaddingLeft() - 
        parentTextView.getScrollX()
    );
    parentTextViewRect.right = (int) (
        parentTextViewRect.left + 
        endXCoordinatesOfClickedText - 
        startXCoordinatesOfClickedText
    );

    canvas.drawRect(parentTextViewRect, paint);
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-18T20:09:59.850

您可以为此使用跨度。首先，您为文本创建一个 spannable，如下所示：

```
Spannable span = new SpannableString(text); 
```

然后在要突出显示的单词周围加上一个跨度，有点像这样：

```
span.setSpan(new UnderlineSpan(), start, end, 
                     Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

不幸的是，我不知道现有的跨度会在单词周围加上边框。我找到了 UnderlineSpan 和[BackgroundColorSpan](http://developer.android.com/reference/android/text/style/BackgroundColorSpan.html)，也许这些对您也有用，或者您可以查看代码，看看您是否可以基于其中之一创建 BorderSpan。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:32:37.010

您可以简单地将其字符替换为适当的 unicode 符号，例如 U+25AE（▮ 黑色垂直矩形），而不是在 WORD 上绘制一个矩形。

所以你会得到

> “这是一个文本字符串，我想在它上面放一个矩形▮▮▮▮”

如果这足够了。例如，请参阅[Wikipedia](http://en.wikipedia.org/wiki/List_of_Unicode_characters#Geometric_shapes)以获取 unicode 符号的浪费列表。

如果您确实需要绘制该黑框，只要您的文本在一行中，您就可以执行以下操作：

[按照此处](https://stackoverflow.com/questions/4794484/calculate-text-size-according-to-width-of-text-area)的说明计算“WORD”之前的文本部分的宽度以找到框的左边缘并使用相同的方法计算“WORD”的宽度以找到框的宽度。

对于多行文本，解释的方法也可能有效，但我认为您必须在这里做很多工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-09T09:25:11.447

使用`getLayout().getLineBottom`和`textpaint.measureText`手动进行逆向计算`getOffsetForPosition`。

下面是一个使用计算出的 x,y 为一些 textOffset 来定位可绘制的句柄的示例，当点击 textview 时。

```
class TextViewCustom extends TextView{
    float lastX,lastY;
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        boolean ret = super.onTouchEvent(event);
        lastX=event.getX();
        lastY=event.getY();
        return ret;
    }

    BreakIterator boundary;
    Drawable handleLeft;
    private void init() {// call  it in constructors
        boundary = BreakIterator.getWordInstance();
handleLeft=getResources().getDrawable(R.drawable.abc_text_select_handle_left_mtrl_dark);
        setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                int line = getLayout().getLineForVertical((int) lastY);
                int offset = getLayout().getOffsetForHorizontal(line, lastX);
                int wordEnd = boundary.following(offset);
                int wordStart = boundary.previous();
                CMN.Log(getText().subSequence(wordStart, wordEnd));

                int y = getLayout().getLineBottom(line);
                int trimA = getLayout().getLineStart(line);
                float x = getPaddingLeft()+getPaint().measureText(getText(), trimA, wordStart);

                x-=handleLeft.getIntrinsicWidth()*1.f*9/12;
                handleLeft.setBounds((int)x,y,(int)(x+handleLeft.getIntrinsicWidth()),y+handleLeft.getIntrinsicHeight());
                invalidate();
            }
        });
    }

    @Override
    public void setText(CharSequence text, BufferType type) {
        super.setText(text, type);
        if(boundary!=null)
            boundary.setText(text.toString());
    }

} 
```

# java - java - 如何将字符串附加到已使用Java中的JFileChooser选择的文件

> ID：13385648
> 
> 赞同：0
> 
> 时间：2012-11-14T19:12:58.863
> 
> 标签：java, jfilechooser

我正在编写一个有多个用户的程序，并且我希望每个用户都能够使用他们选择的文件名保存文件，但是，还将他们的用户名或相关键附加到文件名以帮助稍后进行搜索。我该如何调整此代码来做到这一点？

例如，用户“bob”想要将文件保存为“aFile.html”。我要实际保存的文件是“aFile_bob.html”

```
 String user = "bob";
    // select a file to save output
    JFileChooser JfileChooser = new JFileChooser(new File(defaultDirectory));
    JfileChooser.setSelectedFile(new File("TestFile.html"));
    int i = JfileChooser.showSaveDialog(null);
    if (i != JFileChooser.APPROVE_OPTION) return;
    File saveFile = JfileChooser.getSelectedFile();
    // somehow append "user" to saveFile name here?

    FileOutputStream fop = new FileOutputStream(saveFile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:31:43.790

使用`renameTo`方法，如下所示：

```
int lastDot = saveFile.getName().lastIndexOf('.');
String name = saveFile.getName();
String ext = ""; // Might not have a file extension
if(lastDot > 0) { // At least one dot
    // Take substring of the last occurrence
    ext = saveFile.getName().substring(lastDot);
    name = name.substring(0, lastDot);
}

saveFile.renameTo(new File(defaultDirectory + "/" + name + "_" + user + ext)); 
```

使用此方法，您不需要 FileOutputStream。

# java - 使用 Java 中的规则将文件从一个目录复制到另一个目录

> ID：13385650
> 
> 赞同：0
> 
> 时间：2012-11-14T19:13:06.060
> 
> 标签：java, file-io

我想在java中将文件从一个目录复制到另一个目录，但我有以下情况：

*   源目录可能有任意深度
*   我有一套复制规则，例如：
    *   “复制所有以 *.dll 结尾的文件”
    *   “复制子目录和所有内容”
    *   “仅复制此特定文件”
*   这些规则是可配置的，这意味着它们将从某个文件中读取

看看这个特殊的问题，似乎 Ant 中的复制命令可以满足我的需要，但我不能在这个项目中使用 ANT，所以我想知道是否有什么东西可以让我做 ANT 在普通的java程序

我看了一下 Apache Commons，但 FileUtils 方法似乎不包含传递“过滤器”的方法

我可以使用 File 类和一些 FilenameFilters 从头开始​​实现这一点，但我确信以前有人遇到过这个问题。

有任何想法吗？

# sql - WHERE 子句中同一列的多个条件

> ID：13385653
> 
> 赞同：8
> 
> 时间：2012-11-14T19:13:13.903
> 
> 标签：sql, sql-server-2008

我有一张像这样的桌子 -

```
RecordID   PropertyID       PropertyVal
--------------------------------------------------
3215            7           john doe
3215            11          Chicago
3215            13          Business Development Analyst
3216            7           jane doe
3216            11          Chicago
3216            13          Managing Director
3217            7           mike smith
3217            11          Chicago
3217            13          Business Development Analyst
3218            7           john smith
3218            11          Seattle
3218            13          Managing Director 
```

如何返回`PropertyID = 13 AND PropertyVal='Business Development Analyst'AND PropertyID = 11 AND PropertyVal = 'Chicago'`. 如何为同一列执行多个 where 子句？

编辑：我需要结果集看起来像这样 -

```
Name
----
John Doe
Mike Smith 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T19:15:27.863

```
select PropertyVal
from your_table
where PropertyID = 7
and RecordID in 
(
  select RecordID   
  from your_table
  where (PropertyID = 13 AND PropertyVal='Business Development Analyst')
     or (PropertyID = 11 AND PropertyVal = 'Chicago')
  group by RecordID   
  having count(distinct PropertyID) = 2
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T19:15:26.880

不确定你到底想要什么。这可能是要么

```
...
where (PropertyID = 13 AND PropertyVal='Business Development Analyst')
   or (PropertyID = 11 AND PropertyVal = 'Chicago') 
```

或者

```
...
where PropertyID in (13, 11) 
and PropertyVal in ('Business Development Analyst', 'Chicago') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-15T13:53:43.397

我们可以使用 JOIN 子句...

前任：

```
 SELECT LIST_OF_COLUMNS FROM TBL1 T1 JOIN TBL2 T2
    ON T1.COL1=T2.COL1 AND 
    T1.COL2=T2.COL2 AND 
    T1.COL3=T2.COL3 AND 
    T1.COL4=T2.COL4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-09T18:07:49.967

使用 INTERSECT 运算符

```
select PropertyVal as "Name"
from mytable
where PropertyID=7
and RecordID in 
(
    select RecordID
    from mytable
    where PropertyID = 13 AND PropertyVal='Business Development Analyst'

    intersect

    select RecordID
    from mytable
    where PropertyID = 11 AND PropertyVal='Chicago'

) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-26T17:36:36.553

```
SELECT LIST_OF_COLUMNS FROM TBL1 T1 JOIN TBL2 T2
    ON T1.COL1=T2.COL1 AND 
    T1.COL2=T2.COL2 AND 
    T1.COL3=T2.COL3 AND 
    T1.COL4=T2.COL4 
```

# java - 将哈希表保存在持久存储中

> ID：13385655
> 
> 赞同：2
> 
> 时间：2012-11-14T19:13:20.973
> 
> 标签：java, hashtable, persistent-storage

我正在编写一个程序，它从硬盘读取大量数据并根据这些数据创建一个哈希图，然后我做一些处理来稍微改变这个初始哈希图。我的问题是，每次我运行我的程序时，我都会从相同的数据创建相同的哈希图（我们称之为初始哈希图）。只有处理与一次运行不同。无论如何，我可以创建一次这个哈希图并永久保存它吗？序列化会有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:25:38.910

这是一个众所周知的问题，有很多解决方案，其中我建议两个：1.将hashmap保存在一个sql数据库表中，主键列包含键值，另一列包含相应的值；2\. 使用 nosql 数据存储，其中有很多，其中包括 Redis 或 SimpleDb。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:25:34.990

由于 HashMap 是可序列化的，我将使用这种方式来保存它：

```
public void saveStatus(Serializable object){
   try {
      FileOutputStream saveFile = new FileOutputStream("current.dat");
      ObjectOutputStream out = new ObjectOutputStream(saveFile);
      out.writeObject(object);
      out.close();
      fileOut.close();
    } catch (IOException e) {
      e.printStackTrace();
    }
} 
```

要恢复您的对象，只需这样做：

```
public Object loadStatus(){
   Object result = null;
   try {
      FileInputStream saveFile = new FileInputStream("current.dat");
      ObjectInputStream in = new ObjectInputStream(saveFile);
      result = in.readObject();
      in.close();
      fileIn.close();
    } catch (IOException e) {
      e.printStackTrace();
    }
    return result;
} 
```

然后，您只需将此方法返回的对象转换为 HashMap 并在同一位置继续。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-14T19:18:15.257

类似的问题已经在这里提出过；我推荐谷歌搜索：

```
java persistent hash table 
```

话虽如此，您可以手动将键值对保存到文件或数据库中，并在启动时重建哈希。

# c# - 默认构造函数创建的“字典”是否使用哈希码？

> ID：13385656
> 
> 赞同：4
> 
> 时间：2012-11-14T19:13:22.717
> 
> 标签：c#, .net, dictionary

我需要使用我编写的类作为键的类型`Dictionary`

我[在 MSDN 上阅读了有关默认构造函数的文档`Dictionary`](http://msdn.microsoft.com/en-us/library/x525za90.aspx)

> `Dictionary<TKey, TValue>`需要一个相等实现来确定键是否相等。此构造函数使用默认的泛型相等比较器`EqualityComparer<T>.Default`. 如果 type `TKey`实现了`System.IEquatable<T>`泛型接口，则默认相等比较器使用该实现。或者，您可以`IEqualityComparer<T>`使用接受比较器参数的构造函数来指定通用接口的实现。

这使我认为我唯一要做的就是让我的课程用于关键实现`System.IEquatable<T>`

但是我很惊讶[`System.IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)没有`HashCode()`方法。

那么以这种方式创建的字典会使用哈希码吗？如果是，它来自哪里？否则，我的字典是否会有恒定成本访问操作（我认为没有哈希码是无法实现的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:18:33.137

> 但是我很惊讶 System.IEquatable 没有 HashCode() 方法。

`System.IEquatable<T>`拥有一个 HashCode 方法是多余的，因为[System.Object](http://msdn.microsoft.com/en-us/library/system.object.aspx)（您的实现类将隐式继承）已经提供了[GetHashCode方法](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:15:31.997

是的，字典将使用哈希码。字典实际上是封面下的哈希图。

它将使用的哈希码实现是`GetHashCode`您的密钥中实现的那个。如果您自己没有定义实现，则哈希码将基于引用类型的引用，以及值类型（结构）的各个字段。当使用您自己的类作为字典中的键时，建议实现`GetHashCode`.

当您实现时`IEquatable<T>`，您必须覆盖`Equals`和`GetHashCode`on 对象以匹配您的`IEquatable<T>`. 它不在接口中的原因是它`GetHashCode`已经在 上定义`object`，所有类都派生自它，因此将它放在接口中不会有任何区别。

如果您未能实现`GetHashCode`它以匹配您的`IEquatable<T>`实现，您可能会遇到一个问题，即您将一个键放入字典中，但由于哈希码不匹配而无法再次检索它：当字典查找键时，它首先调用`GetHashCode`那个键。从这里，字典派生了内部`bucket`的，密钥应该在其中。然后它查看该特定存储桶中的所有密钥并调用`Equals`以找到正确的密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:20:19.447

它仍然使用覆盖的`object.GetHashCode()`方法来获取哈希码。有一个单独的`IEquatable<T>`接口的原因（即为什么默认`EqualityComparer<T>`不总是只调用覆盖的`object.Equals()`方法来比较两个对象）是出于性能原因 -`object.Equals()`需要一个`object`参数，因此实现必须先将其转换为目标类型执行有意义的比较（值类型也必须装箱和拆箱）；而 to 的参数`IEquatable<T>.Equals()`已经是 type `T`。这种性能考虑不适用于该`GetHashCode()`方法，因为它不带参数，因此它没有理由存在于`IEquatable<T>`接口上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:24:30.187

字典（HashSet 和 KeyedCollections）都使用 HashBuckets（为了速度）。
HashBuckets 使用 Int32 的 GetHashCode。

如果对象不相等，则它们必须具有不同的 GetHashCode。
但是两个不相等的对象可能有相同的GetHashCode。

如果 GetHashCode 相同，则决胜局为 Equals。
GetHashCode 比较更快 - 您想避免决胜局。

你想要一个好的（独特的）GetHashCode。
如果对象来自数据库并且表具有键并且该键是 Int32（或更少），则将其用于完美的哈希码。

如果您的对象没有自然键，则可以使用系统 GetHashCode。
但是，如果您有自然键，请使用它。

所有对象都实现 Object [对象类](http://msdn.microsoft.com/en-us/library/system.object.aspx)
如果您的类没有覆盖 GetHashCode，那么它将来自 Object。

建议不要使用 Tuple 或 KeyValuePair for Key，因为它们不会产生好的 GetHashCode。很多碰撞。

# javascript - 获取调整后图片的clientWidth和clientHeight

> ID：13385657
> 
> 赞同：0
> 
> 时间：2012-11-14T19:13:23.220
> 
> 标签：javascript, jquery, google-closure-library

我正在根据当前视口大小调整 JavaScript 中的图像大小。没有媒体查询和其他类似的东西，一直是 JS，也没有元素的静态大小。

所以基本上它看起来像这样：

```
 var computedHeight = viewport.height * someRatio;
    var image = goog.dom.createDom('img', {
        'src': 'the.link.to.the.image',
        'height': computedHeight + 'px',
        'width': 'auto'
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:17:00.087

正如其他人所说，在将图像插入文档之前，您无法获得尺寸。

但是你可以自己计算大小。

加载图像后，您可以访问图像的原始大小。基于此，计算缩放大小并不是很困难：

```
 var image = goog.dom.createDom('img', {
    'src': 'the.link.to.the.image',
    'height': computedHeight + 'px',
    'width': 'auto',
    'onload':function(){
      alert('width:'+
            Math.floor((this.naturalWidth*this.height)/this.naturalHeight)+
            '\nheight:'+this.height);        
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:18:30.143

显示图像后，尝试查询以下属性

```
image.offsetWidth
image.offsetHeight 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:20:41.023

试试 goog.style.getComputedStyle(image, 'width')。可能您需要先将其添加到文档中。

# mysql - JDBC MySQL - 连接关闭

> ID：13385659
> 
> 赞同：0
> 
> 时间：2012-11-14T19:13:24.463
> 
> 标签：mysql, hibernate, jpa, jdbc, glassfish

我有一个网络应用程序。我使用 JPA（Hibernate 作为供应商），该应用程序在 glassfish 服务器上运行。使用应用程序几分钟后（包括检索实体并将其保存到数据库的操作），我收到此错误：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Could not open connection
root cause

javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Could not open connection
root cause

org.hibernate.exception.GenericJDBCException: Could not open connection
root cause

java.sql.SQLException: Error in allocating a connection. Cause: java.lang.RuntimeException: Got exception during XAResource.start:
root cause

javax.resource.spi.ResourceAllocationException: Error in allocating a connection. Cause: java.lang.RuntimeException: Got exception during XAResource.start:
root cause

com.sun.appserv.connectors.internal.api.PoolingException: java.lang.RuntimeException: Got exception during XAResource.start:
root cause

com.sun.appserv.connectors.internal.api.PoolingException: java.lang.RuntimeException: Got exception during XAResource.start:
root cause

java.lang.RuntimeException: Got exception during XAResource.start:
root cause

javax.transaction.xa.XAException: com.sun.appserv.connectors.internal.api.PoolingException: javax.resource.spi.LocalTransactionException: No operations allowed after connection closed. 
```

我正在使用 JTA 事务管理器。我的服务层中的每个函数都有`@Transactional`注释。这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="myPU" transaction-type="JTA">

        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>jdbc/myDataSource</jta-data-source>

        <class>org.company.entities.User</class>
            <!-- OTHER CLASSES -->

        <exclude-unlisted-classes />

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />
            <property name="hibernate.transaction.flush_before_completion" value="true" />
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.connection.release_mode" value="auto"/>
            <property name="hibernate.current_session_context_class" value="jta"/>
            <property name="hibernate.transaction.auto_close_session" value="true"/>
<!--             <property name="hibernate.transaction.flush_before_completion" value="true"/> -->
<!--             <property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.JTATransactionFactory"/> -->
        </properties>

    </persistence-unit>
</persistence> 
```

我正在使用这个 mysql 连接器：`mysql-connector-java-5.1.22-bin.jar` 为什么会出现这个错误？i 或 JPA 在哪里关闭连接？

**编辑：**删除了“BaseEntityDAO”类的细节——不相关。我的数据源是通过 glassfish 的管理控制台配置的： 在 JDBC 连接池中：

*   资源类型：javax.sql.DataSource
*   数据源类名：com.mysql.jdbc.jdbc2.optional.MysqlDataSource
*   我使用 glassfish 的默认池设置 - 不知道它是否重要，但默认设置之一是“空闲超时”，其默认值为 300 秒。
*   在 Additional Properties 中，我有以下属性：portNumber、databaseName、serverName、user、password

在 JDBC 资源中：

*   JNDI 名称：jdbc/myDataSource
*   Pool Name：上述JDBC连接池的池名

这是我的弹簧配置：

```
<jee:jndi-lookup id="entityManagerFactory" jndi-name="persistence/myPersistenceUnit" />

<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor">
    <property name="persistenceUnits">
        <map>
            <entry key="myPersistenceUnit" value="persistence/myPersistenceUnit" />
        </map>
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />
<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager" />

<jee:jndi-lookup id="dataSource" jndi-name="jdbc/myDataSource" />

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:32:15.553

您可以使用以下配置尝试使用 C3P0：

```
<property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
<property name="c3p0.testConnectionOnCheckout">false</property>
<property name="c3p0.min_size">2</property>
<property name="c3p0.max_size">10</property>
<property name="c3p0.timeout">300</property>
<property name="c3p0.max_statements">50</property>
<property name="c3p0.idleTestPeriod">300</property> 
```

多年来，我在许多项目中都使用这种配置。

# c - C 数据类型创建

> ID：13385662
> 
> 赞同：-2
> 
> 时间：2012-11-14T19:13:34.493
> 
> 标签：c, class, struct, stdio, abstract-data-type

所以我正在尝试学习C，我知道它没有课程。但是，我只是在做 C++ 编程并创建一个特殊类型的对象，比如说汽车，我必须为它创建一个类。像这样的东西：

```
class Car {
     //code
};

void main() {
    Car c; //or Car c = new c(//constructor);
} 
```

但是我不明白当你这样的时候C怎么不能[上课](http://www.cplusplus.com/reference/clibrary/cstdio/FILE/)。您正在声明一个类型为 的变量`FILE`。那么这是否意味着文件`FILE`中有一个结构`stdio.h`？数据类型在 C 中是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:16:33.950

> 但我不明白 C 怎么不能有课程

因为它不是严格意义上的面向对象语言。

> 那么这是否意味着 FILE 是 stdio.h 文件中的结构？

是的。

> 数据类型在 C 中是如何工作的？

有一[整篇](http://ldc.usb.ve/~vtheok/cursos/ci2125/material/curso%20C%202/815.pdf)关于该主题的论文（谷歌，第一次点击）。

旁注：您**可以**使用结构在 C 中模拟面向对象的编程风格，这只是一个观点问题，您是否称之为 OO。例如，考虑使用臭名昭著的 libcurl 网络库：

```
CURL *hndl = curl_easy_init();
curl_easy_setopt(hndl, CURLOPT_URL, "http://example.com");
curl_easy_perform(hndl);
curl_easy_cleanup(hndl); 
```

这本质上是冗长（明确）地编写一些像这样的 OOP 代码：

```
CURL hndl;
hndl->url = "http://example.com";
hndl->perform(); 
```

[还有一篇](http://www.cs.rit.edu/~ats/books/ooc.pdf)关于这个主题的论文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:44:48.870

C 等效项是为`Car`的属性定义结构类型，然后定义函数来操作类型的对象`Car`。这基本上就是`FILE`类型的工作原理：

```
FILE *f = fopen("afile.txt", "r"); // open a file for reading
fgets(buffer, sizeof buffer, f);   // read from a file
fprintf(f, "%d on the wall", bottles--); // write formatted text to the file 
```

我们绝不会直接操作`FILE`类型的对象；我们只是来回传递传递指针。

没有访问控制；您不能制作 C 结构的某些部分`public`和其他部分`private`；您可以像这样隐藏实现：

```
/** Car.h */
...
struct Car; 

struct Car *createCar(void);
void deleteCar(struct Car **theCar);
int startCar(struct Car *theCar);
...

/** Car.c */

#include "Car.h"
...
struct Car {
   char *make;
   char *model;
   int  year;
   ...
};

struct Car *createCar(void)
{
  struct Car *p = malloc(sizeof *p);
  if (p)
  {
    ... // initialize attributes
  }
  return p;
}

void deleteCar(struct Car **theCar)
{
  free(*theCar);
  *theCar = NULL;
}

void startCar(struct Car *theCar)
{
  theCar->running = 1; 
}

/** main.c */
#include "Car.h"
...
int main(void)
{
  struct Car *c = createCar();
  startCar(c);
  ...
  deleteCar(&c);
} 
```

在此示例中，仅在;中`main.c`看到前向声明 由于类型不完整，只能声明*指向*类型的指针。在中，结构类型与定义一起完成，因此其中的函数可以访问这些成员。 `struct Car;``Car.h``main`*`struct Car``Car.c``struct Car {char *make; char *model; ...};``Car.c`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:21:23.147

You can use the `typedef` keyword to create types in C. I usually do this sort of thing:

```
struct car_st {
    int numberOfSeats;
};
typedef struct car_st CAR;
typedef struct car_st * CAR_PTR; 
```

Something like that.

Actually C can have classes, kind of. Early implementations of C++ and Objective C were done with preprocessors, I think. The problem is that you don't get true data hiding and methods. You end up using function pointers for methods -- and that is both a maintenance nightmare and a lot of work to set up. Not sure how you'd do inheritance, but it would probably be a mess of pointers to other structs.

So, yeah, you can slap something like that together. But please don't.*

# pandas - 使用财务数据计算数据框的回报

> ID：13385663
> 
> 赞同：24
> 
> 时间：2012-11-14T19:13:39.600
> 
> 标签：pandas, finance

我有一个包含每月财务数据的数据框：

```
In [89]: vfiax_monthly.head()
Out[89]: 
            year  month  day       d   open  close   high    low  volume  aclose
2003-01-31  2003      1   31  731246  64.95  64.95  64.95  64.95       0   64.95
2003-02-28  2003      2   28  731274  63.98  63.98  63.98  63.98       0   63.98
2003-03-31  2003      3   31  731305  64.59  64.59  64.59  64.59       0   64.59
2003-04-30  2003      4   30  731335  69.93  69.93  69.93  69.93       0   69.93
2003-05-30  2003      5   30  731365  73.61  73.61  73.61  73.61       0   73.61 
```

我正在尝试计算这样的回报：

```
In [90]: returns = (vfiax_monthly.open[1:] - vfiax_monthly.open[:-1])/vfiax_monthly.open[1:] 
```

但我只得到零：

```
In [91]: returns.head()
Out[91]: 
2003-01-31   NaN
2003-02-28     0
2003-03-31     0
2003-04-30     0
2003-05-30     0
Freq: BM, Name: open 
```

我认为这是因为算术运算在索引上对齐，这使得`[1:]`and`[:-1]`无用。

我的解决方法是：

```
In [103]: returns = (vfiax_monthly.open[1:].values - vfiax_monthly.open[:-1].values)/vfiax_monthly.open[1:].values

In [104]: returns = pd.Series(returns, index=vfiax_monthly.index[1:])

In [105]: returns.head()
Out[105]: 
2003-02-28   -0.015161
2003-03-31    0.009444
2003-04-30    0.076362
2003-05-30    0.049993
2003-06-30    0.012477
Freq: BM 
```

有没有更好的方法来计算回报？我不喜欢先转换为数组，然后再转换为 Series。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-15T00:32:51.760

代替切片，用于`.shift`移动 DataFrame/Series 中值的索引位置。例如：

```
returns = (vfiax_monthly.open - vfiax_monthly.open.shift(1))/vfiax_monthly.open.shift(1) 
```

这就是`pct_change`在引擎盖下所做的事情。您还可以将其用于其他功能，例如：

```
(3*vfiax_monthly.open + 2*vfiax_monthly.open.shift(1))/5 
```

您可能还想研究其他类型的财务数据分析的[滚动](http://pandas.pydata.org/pandas-docs/stable/computation.html#moving-rolling-statistics-moments)和[窗口](http://pandas.pydata.org/pandas-docs/stable/computation.html#expanding-window-moment-functions)函数。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-14T20:21:10.100

最简单的方法是使用 DataFrame.pct_change() 方法。

这是一个简单的例子

```
In[1]: aapl = get_data_yahoo('aapl', start='11/1/2012', end='11/13/2012')

In[2]: appl
Out[2]: 
          Open    High     Low   Close    Volume  Adj Close
Date                                                           
2012-11-01  598.22  603.00  594.17  596.54  12903500     593.83
2012-11-02  595.89  596.95  574.75  576.80  21406200     574.18
2012-11-05  583.52  587.77  577.60  584.62  18897700     581.96
2012-11-06  590.23  590.74  580.09  582.85  13389900     580.20
2012-11-07  573.84  574.54  555.75  558.00  28344600     558.00
2012-11-08  560.63  562.23  535.29  537.75  37719500     537.75
2012-11-09  540.42  554.88  533.72  547.06  33211200     547.06
2012-11-12  554.15  554.50  538.65  542.83  18421500     542.83
2012-11-13  538.91  550.48  536.36  542.90  19033900     542.90

In[3]: aapl.pct_change()
Out[3]:
                Open      High       Low     Close    Volume  Adj Close
Date                                                                   
2012-11-01       NaN       NaN       NaN       NaN       NaN        NaN
2012-11-02 -0.003895 -0.010033 -0.032684 -0.033091  0.658945  -0.033090
2012-11-05 -0.020759 -0.015378  0.004959  0.013558 -0.117186   0.013550
2012-11-06  0.011499  0.005053  0.004311 -0.003028 -0.291453  -0.003024
2012-11-07 -0.027769 -0.027423 -0.041959 -0.042635  1.116864  -0.038263
2012-11-08 -0.023020 -0.021426 -0.036815 -0.036290  0.330747  -0.036290
2012-11-09 -0.036049 -0.013073 -0.002933  0.017313 -0.119522   0.017313
2012-11-12  0.025406 -0.000685  0.009237 -0.007732 -0.445323  -0.007732
2012-11-13 -0.027502 -0.007250 -0.004251  0.000129  0.033244   0.000129 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-21T19:46:56.117

在没有任何偏差的情况下计算前瞻性回报的最佳方法是使用内置函数`pd.DataFrame.pct_change()`。在您的情况下，您只需要使用此功能，因为您有月度数据，并且您正在寻找月度回报。

例如，如果您想查看 6 个月的回报，您只需设置参数 `df.pct_change(periods = 6)`，这将为您提供 6 个月的回报。

因为您有一个相对较小的数据集，最简单的方法是重新采样您需要计算数据的参数，然后`pct_change()`再次使用该函数。

然而，由于`log`它的良好特性，通常使用计算回报的公式（如果您计划计算回报系列的统计数据）：

[![在此处输入图像描述](../Images/0f6cf33cb1e8135a7857c06763c24bd6.png)](https://i.stack.imgur.com/0eYTw.gif)

您将这样实现：

`log_return = np.log(vfiax_monthly.open / vfiax_monthly.open.shift())`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-05T07:34:44.707

也可以使用pandas 系列的混合`diff`和方法：`shift`

```
retrun = vfiax_monthly.open.diff()/vfiax_monthly.open.shift(1) 
```

# python - Google App Engine 基类和子类获取

> ID：13385668
> 
> 赞同：1
> 
> 时间：2012-11-14T19:13:55.390
> 
> 标签：python, google-app-engine

我想要一个名为 MBUser 的基类，它具有一些我不想更改的预定义属性。如果客户端想要向 MBUser 添加属性，建议将 MBUser 子类化，并将任何其他属性放入其中。

API 代码不知道客户端是否实际上是 MBUser 的子类，但这无关紧要。我们的想法是我们可以通过 id 获取 MBUser。所以我希望这会起作用：

```
def test_CreateNSUser_FetchMBUser(self):
    from nsuser import NSUser
    id = create_unique_id()
    user = NSUser(id = id)
    user.put()
    # changing MBUser.get.. to NSUser.get makes this test succeed
    get_user = MBUser.get_by_id(id)
    self.assertIsNotNone(get_user) 
```

这里 NSUser 是 MBUser 的子类。测试失败。

1.  为什么我不能这样做？
2.  什么是解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:27:34.567

模型由它们的“种类”定义，子类是不同的种类，即使看起来相同。

子类化的重点不是共享值，而是共享您为给定“种类”创建的“模式”。

在基类上创建了一个种类映射`ndb.Model`（看起来好像您在使用`ndb`，因为您提到过`get_by_id`），并且在您执行这样的查询时会查找每种种类。

对于子类，种类只是[定义](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/ndb/model.py?r=302#2751)为类名：

```
@classmethod
def _get_kind(cls):
  return cls.__name__ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:39:45.040

我刚刚发现 GAE 有一个解决方案。它被称为 PolyModel：

[https://developers.google.com/appengine/docs/python/ndb/polymodelclass](https://developers.google.com/appengine/docs/python/ndb/polymodelclass)

# ruby - Ruby - 如果网址是重定向，如何下载文件？

> ID：13385671
> 
> 赞同：3
> 
> 时间：2012-11-14T19:14:05.290
> 
> 标签：ruby, http, soundcloud, response.redirect, http-redirect

如果 url 是重定向，Ruby 如何下载文件？

我正在尝试下载此网址：

soundcloud.com/stereo-f---/cohete-amigo/download

重定向是这样的：

[ec-media.soundcloud.com/HNIGsuMJlDhy?ff61182e3c2ecefa438cd0210ad0e38569b9775ddc9e06b3c362a686319250ea5c1ae2d33d8d525807641f258e33de3cb0e559c1b591b5b00fb32d5ef9&AWSAccessKeyId=AKIAJ4IAZE5EOI7PA7VQ&Expires=1352919869&Signature=OVWD9VdV7ew%2B%2Fs%2BO0YpkKZLGOCw%3D][2]

我试过的是这样的：

```
Net::HTTP.start("ec-media.soundcloud.com") { |http|
  resp = http.get("/HNIGsuMJlDhy?ff61182e3c2ecefa438cd0210ad0e38569b9775ddc9e06b3c362a686319250ea5c1ae2d33d8d525807641f258e33de3cb0e559c1b591b5b00fb32d5ef9&amp;AWSAccessKeyId=AKIAJ4IAZE5EOI7PA7VQ&amp;Expires=1352919869&amp;Signature=OVWD9VdV7ew%2B%2Fs%2BO0YpkKZLGOCw%3D")
  open("test.wav", "wb") { |file|
    file.write(resp.body)
  }
}
puts "Done."
sleep 50 
```

我不了解/不知道任何互联网协议和重定向以及那些事情......请给我一个很好的解释或帮助我的脚本，以使用 ruby​​ 从 soundcloud 下载文件？

谢谢你

**更新**：

我已经尝试过这种方式，但出现错误：

```
Net::HTTP.start("soundcloud.com") do |http|
  resp = http.get("/dubstep-4/kill-paris-tender-love/download")

  while resp.code == '301' || resp.code == '302'
    # moved permanently or temporarily:  try again at the new location.
    resp = http.get(URI.parse(resp.header['location']))
    # ideally you should also bail if you make too many redirects.
  end

  # make sure the request was successful.
  if resp.code == '200'  
    open("test.wav", "wb"){ |file| file.write(resp.body) }
  else
    puts "Error: HTTP #{resp.code}"
  end
end 
```

错误：

```
C:/Program Files (x86)/Ruby/lib/ruby/1.9.1/net/http.rb:1860:in `initialize': undefined method `empty?' for #<URI::HTTP:0x25a9ce8> (NoMethodError)
        from C:/Program Files (x86)/Ruby/lib/ruby/1.9.1/net/http.rb:2093:in `initialize'
        from C:/Program Files (x86)/Ruby/lib/ruby/1.9.1/net/http.rb:1026:in `new'
        from C:/Program Files (x86)/Ruby/lib/ruby/1.9.1/net/http.rb:1026:in `get'
        from C:/Users/Administrador/Desktop/1.rb:59:in `block in <main>'
        from C:/Program Files (x86)/Ruby/lib/ruby/1.9.1/net/http.rb:745:in `start'
        from C:/Program Files (x86)/Ruby/lib/ruby/1.9.1/net/http.rb:557:in `start'
        from C:/Users/Administrador/Desktop/1.rb:48:in `<main>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T07:49:38.730

有一个名为 Open URI 的标准库，它比 Net HTTP 级别更高。它自动遵循重定向：

```
require 'open-uri'
file = open("http://soundcloud.com/stereo-f---/cohete-amigo/download") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:28:59.947

您需要做的是查看`resp.code`并处理重定向：

```
Net::HTTP.start("your.web.site") do |http|
  resp = http.get("/something")
  while resp.code == '301' || resp.code == '302'
    # moved permanently or temporarily:  try again at the new location.
    resp = http.get(URI.parse(resp.header['location']))
    # ideally you should also bail if you make too many redirects.
  end

  # make sure the request was successful.
  if resp.code == '200'  
    open("test.wav", "wb"){ |file| file.write(resp.body) }
  else
    puts "Error: HTTP #{resp.code}"
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:31:32.087

我建议您[在此处](http://railstips.org/blog/archives/2009/03/04/following-redirects-with-nethttp/)查看本指南，但要点是您必须检查响应的类型，然后在重定向的情况下从正文中提取 URL。

现在，SoundCloud 可能在后台使用 cookie 和临时 URL 等进行疯狂，但这是另一个需要处理的问题。

# ruby-on-rails-3 - 可确认设计的路由问题 - 仅通过电子邮件注册，出现错误“找不到 id=confirmation 的用户”

> ID：13385672
> 
> 赞同：0
> 
> 时间：2012-11-14T19:14:21.673
> 
> 标签：ruby-on-rails-3, routes, devise-confirmable

我想我有一个我无法弄清楚的 Devise 路由问题。我正在尝试实现[这种方法](https://github.com/plataformatec/devise/wiki/How-To%3a-Email-only-sign-up)，让用户使用 Devise 进行身份验证。该示例使用了haml，我试图将其翻译回erb，希望能取得一些成功。

在 Mac OS X 上开发 Rails 3.2.8，使用 PostgresQL 使用 Devise 和 simple_form

**应用程序/视图/设计/注册/new.html.erb：**

```
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
<%# simple_form_for([:backend, @user]) do |f| %>
  <%= f.error_notification %>

  <div class="inputs">
    <%= f.input :email, :required => true, :autofocus => true, :label => "Email" %>
  </div>

  <div class="actions">
    <%= f.button :submit, "Add User" %>
  </div>
<% end %> 
```

**应用程序/视图/设计/确认/show.html.erb：**

```
<%= simple_form_for(resource, :as => resource_name, :url => confirmation_path(resource_name)) do |f| %>
<div class="inputs">
    <%= f.input :password, :required => true, :label => "Password" %>
    <%= f.input :password_confirmation, :required => true, :label => "Confirm Password" %>
    <%= f.hidden_field :confirmation_token %>
</div>
<div class="actions">
  <%= f.button :submit, "Confirm" %>
</div>
<% end %> 
```

**应用程序/modesl/user.rb：**

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable,
         :timeoutable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email,
                  :password,
                  :password_confirmation,
                  :remember_me,
                  :username

  def password_required?
    super if confirmed?
  end

  def password_match?
    self.errors[:password] << "can't be blank" if password.blank?
    self.errors[:password_confirmation] << "can't be blank" if password_confirmation.blank?
    self.errors[:password_confirmation] << "does not match password" if password != password_confirmation
    password == password_confirmation && !password.blank?
  end

end 
```

**应用程序/控制器/confirmations_controller.rb：**

```
class ConfirmationsController < Devise::ConfirmationsController
  def show
    self.resource = resource_class.find_by_confirmation_token(params[:confirmation_token])
    super if resource.confirmed?
  end

  def confirm
    self.resource = resource_class.find_by_confirmation_token(params[resource_name][:confirmation_token])
    if resource.update_attributes(params[resource_name].except(:confirmation_token)) && resource.password_match?
      self.resource = resource_class.confirm_by_token(params[resource_name][:confirmation_token])
      set_flash_message :notice, :confirmed
      sign_in_and_redirect(resource_name, resource)
    else
      render :action => "show"
    end
  end
end 
```

**应用程序/配置/路由.rb：**

```
 devise_for :users, :controllers => {:confirmations => 'confirmations'}

  devise_scope :user do
    put "/confirm" => "confirmations#confirm"
  end

  resources :users 
```

当我在用户/注册页面输入我的电子邮件地址时，一切正常。我收到确认电子邮件，单击确认链接并被定向到：

> /users/confirmation?confirmation_token=[此处确认令牌]

然后，当我填写密码并提交时，我被定向到此页面：

> 用户/确认

出现以下错误：

> UsersController#update 中的 ActiveRecord::RecordNotFound 找不到 id=confirmation 的用户

我很确定这是一个路由问题。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:36:53.830

赛尔，谢谢你今晚让我的大脑运转起来。答案一直盯着我看。在路线上，我改变了

```
match "/confirm" => "confirmations#confirm" 
```

至

```
match "/confirmation" => "confirmations#confirm" 
```

现在我可以开始研究它抛出的下一个错误。再次感谢！

# php - 安卓中的 JSON 和 PHP

> ID：13385678
> 
> 赞同：1
> 
> 时间：2012-11-14T19:14:36.617
> 
> 标签：php, android, mysql, json

我尝试用 JSON 这个我的程序完成我的程序

```
package udin.tes2;

import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class LihatInfo extends Activity {

   TextView error,br1;
   String i,id_kepadatan,returnString;

    /** Called when the activity is first created. */

   @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lihat_info);

        br1=(TextView)findViewById(R.id.tv_error);

   }

   public void clickHandler(View view){
    Intent a = null;
    id_kepadatan = "5";
    switch (view.getId()){
    case R.id.lihatInfo:

ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

        postParameters.add(new BasicNameValuePair("id_kepadatan", id_kepadatan));

/*            String valid = "1";*/      

        String response = null;

        try {

           response = CustomHttpClient.executeHttpPost("http://10.0.2.2/android/cek.php", postParameters);

           String result = response.toString();  
           //parse json data

              try{
                      returnString = "";

                JSONArray jArray = new JSONArray(result);
                      for(int i=0;i<jArray.length();i++){

                              JSONObject json_data = jArray.getJSONObject(i);
                              Log.i("log_tag","id_kepadatan: "+json_data.getInt("id_kepadatan")+
                                      ", username: "+json_data.getString("username")+
                                      ", nama_jalan: "+json_data.getString("nama_jalan")+
                                      ", status: "+json_data.getString("status")+
                                      ", tanggal: "+json_data.getString("tanggal")+
                                      ", waktu: "+json_data.getString("waktu")+
                                      ", keterangan: "+json_data.getString("keterangan")
                              );

                              //Get an output to the screen
                              returnString += "\n" + json_data.getString("nama_jalan") + " -> "+ json_data.getString("status")+ " pada "+ json_data.getString("tanggal")+ " waktu "+ json_data.getString("waktu")+ " karena "+ json_data.getString("keterangan");
                      }
              }

              catch(JSONException e){
                      Log.e("log_tag", "Error parsing data "+e.toString());
              }

              try{

               br1.setText(returnString);

              }

              catch(Exception e){

               Log.e("log_tag","Error in Display!" + e.toString());;          

              }   

         }

               catch (Exception e) {

          Log.e("log_tag","Error in http connection!!" + e.toString());     

         }
        break;

   case R.id.kembali2:
        a = new Intent(this, Menu.class);
        startActivity(a);
        break;
}
   }

} 
```

这是我的 lihatInfo.php 文件

```
<?php
$conn = mysql_connect("localhost","root","");
    mysql_select_db("proyek akhir");

$query = "SELECT * FROM kepadatan WHERE  id_kepadatan > '". $_POST["id_kepadatan"]."'";
$result = mysql_query($query);
while($row=mysql_fetch_assoc($result))
$output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

但是当我部署到模拟器时，它说

“显示错误！Java.lang.NullPointerException”

你能帮助我吗？我只有 2 天完成这个请帮帮我....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:21:01.260

我相信错误就在这里

```
Log.i("log_tag","id_kepadatan: "+json_data.getInt("id_kepadatan")+
                                  ", username: "+json_data.getString("username")+
                                  ", nama_jalan: "+json_data.getString("nama_jalan")+
                       >>>>>>>>   ", status: "+json_data.getInt("status")+
                                  ", tanggal: "+json_data.getString("tanggal")+
                                  ", waktu: "+json_data.getString("waktu")+
                                  ", keterangan: "+json_data.getString("keterangan")
                          ); 
```

你可能想把它改成 getString

# javascript - CKEditor setData 未清除或更改 rte 中的文本

> ID：13385679
> 
> 赞同：2
> 
> 时间：2012-11-14T19:14:37.193
> 
> 标签：javascript, jquery, backbone.js, ckeditor, backbone-views

我在 Backbone 视图中有一个 CKEditor 实例，它带有一个插件，可以在点击时将编辑器中的任何文本发布到我的网站。我也想在点击时清除 CKEditor，但使用 setData 不起作用。它会闪烁，好像正在发生*某些*事情，但随后会重置为已经存在的相同数据。

它在插件内部调用如下：

**注意**：`THIS`是一个引用主干视图的变量

```
CKEDITOR.plugins.add( 'post', {
    init: function( editor ) {
        editor.addCommand('post', {
            exec: function(editor) {
                THIS.model.postMessageAttempt(editor.getData());
                THIS.options.data = "";
                editor.setData("");
            }
        });
        editor.ui.addButton('Post', {
            label: THIS.i18n.postText(),
            command: 'post'
        });

    }
} ); 
```

我也尝试过`setData("some text")`和`THIS.editor.setData("")`（我有一个保存在视图中的编辑器的参考），但两者都有相同的结果。关于出了什么问题的任何想法？

**编辑**
我也尝试过在这个调用中使用 CKEditor 与 jQuery 的集成，`THIS.$el.find('textarea' + this.id).val("");`它不再闪烁，但它仍然没有清除编辑器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:45:58.053

问题是双重的：首先，在函数末尾`setData`调用一个函数 ,并且该函数调用. 在函数的开头调用函数并且*该*函数调用. 我认为目标是绕过这样一个事实，即有很多浅引用而不是深度引用，但即使在未缩小的情况下，也不清楚为什么要这样做。`afterSetData``getData``getData``beforeGetData`*`setData``ckeditor.js`*

 *其次，为了正确启用/禁用从编辑器到站点的发布，*我*还调用了许多事件（焦点、键 [down] 等）。调用这导致我在插件中调用的时间问题。`disableEnablePost``disableEnablePost``getData``setData``post`

**问题：**

```
CKEDITOR.plugins.add( 'post', {
    init: function( editor ) {
        editor.addCommand('post', {
            exec: function(editor) {
                THIS.model.postMessage(editor.getData());
                THIS.options.data = "";
                editor.setData("");
            }
        });
        editor.ui.addButton('Post', {
            label: THIS.i18n.postText(),
            command: 'post'
        });
        editor.on('key', function (event) {
            THIS.disableEnablePost(editor.getCommand( 'post' ), event);
        });
    }
} ); 
```

这是我的**解决方案**：

```
CKEDITOR.plugins.add( 'post', {
    init: function( editor ) {
        editor.addCommand('post', {
            exec: function(editor) {
                THIS.model.postMessage(editor.getData());
            }
        });
       ...
    }
} ); 
```

`model.postMessage`现在在完成时触发一个事件，该事件在视图中被捕获，然后调用此函数：

```
clearRTE: function() {
    this.editor.setData("");
    this.options.data = "";
} 
```

最后，我进行了更改`disableEnablePost`，使其不会`getData`每次都调用，这不是一个好习惯。现在，它调用`editor.getSnapshot()`了更轻量级的方法，没有数据处理，也没有调用任何一个`getData`，`setData`因此更适合频繁使用。*

# wpf - 有没有办法获取绑定属性的 DataContext

> ID：13385685
> 
> 赞同：0
> 
> 时间：2012-11-14T19:14:50.940
> 
> 标签：wpf, xaml, data-binding

有没有办法在代码中获取下面定义的 ComboBox 的 Text 属性的 DataContent？

```
 <ComboBox Height="21" Text="{Binding Path=Field1.Value}">
        <ComboBox.Resources>
            <Style TargetType="ComboBox">
                <Setter Property="IsEnabled" Value="False" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Field2.Value}" Value="">
                        <Setter Property="IsEnabled" Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ComboBox.Resources>
    </ComboBox> 
```

目前 ComboBox 的 DataContext 是它所在的用户控件。这是有道理的，因为我希望我的 Text 绑定到一个属性，而我的 DataTrigger 绑定到另一个属性。但我需要获取绑定到 Text 属性的 DataContext。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:23:50.000

这样的事情应该这样做：

```
Binding binding = BindingOperations.GetBinding(yourComboBox, ComboBox.TextProperty);
object theDataContext = binding.Source; 
```

# git - 如何将 git 与 gnome-keyring 集成一起使用

> ID：13385690
> 
> 赞同：143
> 
> 时间：2012-11-14T19:15:04.947
> 
> 标签：git, gnome

Git 1.8.0 支持与 gnome-keyring 集成。

[http://www.h-online.com/open/news/item/Git-1-8-0-can-access-Windows-and-GNOME-keyrings-1733879.html](http://www.h-online.com/open/news/item/Git-1-8-0-can-access-Windows-and-GNOME-keyrings-1733879.html)

阅读有关 git 凭证助手的文档后：http: [//git-scm.com/docs/gitcredentials.html](http://git-scm.com/docs/gitcredentials.html)

我无法找到使用此新功能的方法。我该如何整合它？我正在使用 Archlinux 和从 Archlinux 的存储库安装的 git。(git 1.8.0)

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-01-25T18:45:33.653

@marcosdsanchez 的答案是针对 Arch（它回答了原始问题），但我在 Ubuntu 上。对于 git >= 2.11：

```
sudo apt-get install libsecret-1-0 libsecret-1-dev
cd /usr/share/doc/git/contrib/credential/libsecret
sudo make
git config --global credential.helper /usr/share/doc/git/contrib/credential/libsecret/git-credential-libsecret 
```

对于 git < 2.11：

```
sudo apt-get install libgnome-keyring-dev
cd /usr/share/doc/git/contrib/credential/gnome-keyring
sudo make
git config --global credential.helper /usr/share/doc/git/contrib/credential/gnome-keyring/git-credential-gnome-keyring 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-11-15T02:51:49.603

Git 1.8.0 带有 gnome-keyring 支持，但需要为您的平台编译二进制文件。

这就是在 Archlinux 中为我解决的问题：

```
$ sudo pacman -S libgnome-keyring
$ cd /usr/share/git/credential/gnome-keyring
$ make
$ git config --global credential.helper /usr/share/git/credential/gnome-keyring/git-credential-gnome-keyring 
```

@VonC 解决方案很接近，但 git config 命令应该指向可执行文件。这就是为什么它对我不起作用。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-11-14T20:02:58.800

2016 年第四季度更新：

*   Unix、Mac (Git 2.11+)

    ```
    git config --global credential.helper libsecret 
    ```

（请参阅“[使用 Git 凭证助手时出错`gnome-keyring`](https://stackoverflow.com/a/40312117/6309)”）

*   视窗：

    ```
    git config --global credential.helper manager 
    ```

（请参阅“[如何在 Windows 中退出 Git Bash 控制台？](https://stackoverflow.com/a/38553149/6309) ”：即**[Git for Windows](https://github.com/git-for-windows/git/releases)**，使用最新的[**Microsoft Git Credential Manager for Windows**](https://github.com/Microsoft/Git-Credential-Manager-for-Windows)）

* * *

原始答案（2012）

用于 Windows、Mac 和 Unix 平台的凭据助手首先在["git-credential-helper" 存储库](https://github.com/pah/git-credential-helper)中引入，**现在已包含在 git distro 中**：

> 该存储库包含一组 Git 凭证助手 ( `gitcredentials`(7))，它们是`git`（或打算在未来贡献的）的一部分。

```
$ git clone git://github.com/pah/git-credential-helper.git
$ BACKEND=gnome-keyring      # or any other backend
$ cd git-credential-helper/$BACKEND
$ make
$ cp git-credential-$BACKEND /path/to/git/crendential 
```

构建时，它将安装在`/path/to/git/credential`目录中。

> 要使用此后端，您可以通过设置将其添加到（全局）Git 配置中

（这里是 Unix）：

```
git config --global credential.helper /path/to/git/credential/gnome-keyring/git-credential-gnome-keyring 
```

* * *

适用于 Windows 的注意事项：

我想你可以让一个程序在 Windows 上运行并调用一个像“ [pypi keyring 0.10](http://pypi.python.org/pypi/keyring) ”这样的库。
但那是后端，你不能直接从 Git 中使用它。

您使用的是“凭据助手”（反过来，它将调用[它在 Windows 上想要的任何凭据 API](https://superuser.com/questions/287442/is-there-something-like-gnome-keyring-for-windows7)）。

[GitHub for Windows](http://windows.github.com/)提供了这样一个帮助程序（作为一个名为... github 的可执行文件），并且可以在 Windows 会话期间存储您的凭据。
从那个“GitHub for Windows”窗口启动一个 shell，你会看到，输入“git config --system -l”：

```
C:\Users\VonC\Documents\GitHub\test [master +2 ~0 -0 !]> git config --system -l
credential.helper=!github --credentials 
```

该`credential.helper=!github --credentials`部分将调用凭证助手“ `github`”。

```
$ git config [--global] credential.helper $BACKEND 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2018-10-11T03:50:12.730

2018 年 10 月更新

GNOME 已弃用 libgnome-keyring 并将其替换为 libsecret。提交[https://github.com/git/git/commit/87d1353a6a](https://github.com/git/git/commit/87d1353a6a)添加了一个新的凭证助手 /usr/libexec/git-core/git-credential-libsecret。

`git config --global credential.helper libsecret`

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-01-17T17:28:44.887

对于 Fedora 上的任何人，我稍微编辑了 James Ward 的答案：

```
sudo yum install libgnome-keyring-devel
cd /usr/share/doc/git/contrib/credential/gnome-keyring
sudo make
git config --global credential.helper /usr/share/doc/git/contrib/credential/gnome-keyring/git-credential-gnome-keyring 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-06-30T13:05:32.033

只需将这两行添加到您的`~/.gitconfig`文件中：

```
[credential]
    helper = gnome-keyring 
```

下次 Git 要求你输入密码时，输入的密码会保存到 Gnome Keyring 中（你可以用`seahorse`工具看到这个），之后就不会再要求你输入密码了。

这假设您的 Git 版本足够新（如 2.1.0）并且您在~~Linux~~ Fedora、RHEL 或 CentOS 下。对于旧版本或其他操作系统/发行版，请查看其他答案。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-11-05T06:14:30.613

某些发行版确实将此集成作为安装包提供，无需任何编译。根据您的 GNOME 版本，您将需要安装任何一个`gnome-keyring`或多个`libsecret`版本的软件包，例如`git-credential-gnome-keyring`(OpenSUSE Leap 42.3)。

但是，这本身不会自动启用 Git 与 GNOME 密钥环的集成。您仍然必须将 Git 配置为使用这种凭证存储方法：

```
git config --global credential.helper gnome-keyring # If you installed git-credential-gnome-keyring
git config --global credential.helper libsecret     # If you installed git-credential-libsecret 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-04-15T19:55:49.883

*我在无头服务器*上尝试[Ubuntu 的答案，](https://stackoverflow.com/a/14528360/7020378)输入令牌时出现以下错误：

 *```
Remote error from secret service: org.freedesktop.DBus.Error.UnknownMethod: No such interface 'org.freedesktop.Secret.Collection' on object at path /org/freedesktop/secrets/collection/login

store failed: No such interface 'org.freedesktop.Secret.Collection' on object at path /org/freedesktop/secrets/collection/login 
```

这是在无头服务器上为我工作的解决方案（请参阅 [https://keyring.readthedocs.io/en/latest/#using-keyring-on-headless-linux-systems](https://keyring.readthedocs.io/en/latest/#using-keyring-on-headless-linux-systems)）：

*   首先，我运行了与设置为答案中相同[的](https://stackoverflow.com/a/14528360/7020378)命令：`git-credential-libsecret``credential.helper`

```
# You may also first install gnome-keyring if not installed
sudo apt install gnome-keyring
sudo apt install libsecret-1-0 libsecret-1-dev
cd /usr/share/doc/git/contrib/credential/libsecret
sudo make
git config --global credential.helper /usr/share/doc/git/contrib/credential/libsecret/git-credential-libsecret 
```

*   然后，每当我开始使用凭据（例如，类似的命令`git push`）的会话时，我都会运行：

```
dbus-run-session -- sh  # Replace 'sh' with whatever shell you use.
gnome-keyring-daemon --unlock
# Enter your token here, then hit Enter, then Ctrl+d
# You might clean the terminal display with Ctrl+l for security reasons 
```

这会运行一个 D-Bus 会话，例如我可以在其中运行`git push`自动身份验证等。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-03-29T12:35:19.220

在 Fedora 上，您需要**安装**

```
$ sudo dnf install git-credential-libsecret 
```

并编辑您的**git 配置**以使用凭证助手。

```
[credential]
    helper = /usr/libexec/git-core/git-credential-libsecret 
```

仅供参考，该`libsecret`包裹最近已被拆分，请参阅[@rugk 的帖子](https://discussion.fedoraproject.org/t/attention-git-credential-libsecret-for-storing-git-passwords-in-the-gnome-keyring-is-now-an-extra-package/18275?u=rugk)。这就是用户需要重新安装此软件包的原因。*

# c - 在 apple darwin 中创建 GNU C 环境

> ID：13385692
> 
> 赞同：0
> 
> 时间：2012-11-14T19:15:19.323
> 
> 标签：c, darwin

我没有找到苹果 darwin 的 glibc 预编译包。我无法从源代码编译 gcc，我假设编译 glibc 也将非常困难。我想要的是：

配置 darwin 系统，使其仅使用 GNU C 运行时库以及 gcc。

如果需要，我可以指定更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:56:00.903

我还没有找到解决这个问题的方法，但现在已经无关紧要了。分段错误只能在 64 位 darwin libc 中重现。此外，在 darwin 上使用 valgrind 运行程序可以抑制故障。

这使我得出结论，问题出在代码中，而不是库中。代码一开始不是我的，因此不再是我的问题。该程序在某个阶段尝试访问未分配的内存，我的猜测是使用 glibc 以某种方式弥补了这个错误。

# tridion - SDL Tridion CME 语言包

> ID：13385695
> 
> 赞同：2
> 
> 时间：2012-11-14T19:15:25.573
> 
> 标签：tridion, tridion-2011

我四处寻找是否有任何可用于 SDL Tridion CME 的语言包，但没有找到。是否有可用的语言包以及安装步骤是什么？我目前正在使用 Tridion 2011 SP1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:44:49.370

大多数语言都是自动安装的，但我相信您可能需要在它们出现之前单独许可它们。

查看您的`license.xml`文件以查看您是否为 CM 产品提及了语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T10:39:07.780

产品中有 6 种语言可用： - 英语 - 荷兰语 - 法语 - 德语 - 西班牙语 - 日语

您的许可证指定您可以使用哪些语言。获得许可证后，语言将在“用户首选项”对话框中可用。

其他语言包可用，但仅按需提供。换句话说，如果您希望 CME 位于克林贡语中，则必须为此付费。

# c# - 无法提供存储过程参数

> ID：13385697
> 
> 赞同：2
> 
> 时间：2012-11-14T19:15:27.353
> 
> 标签：c#, asp.net, sql-server, stored-procedures

```
OpenSqlConnection();

SqlCommand cmd = new SqlCommand("ReturnCharacterInfo", Con);
cmd.Parameters.AddWithValue("@CharacterID", CharacterID);

SqlDataReader dr = cmd.ExecuteReader(); 
```

当我运行您可以在上面看到的代码时，它会引发异常

> *过程或函数“ReturnCharacterInfo”需要未提供的参数“@CharacterID”。*

但正如您在代码中看到的那样，我正在提供`@CharacterID`参数并且它不是空的或空的。

存储过程：

```
 [ReturnCharacterInfo] @CharacterID int 
as
   select 
      CharacterName, characterSurname, CharacterIsMale, CharacterAge, 
      CharacterMood, CharacterHealth, CharacterInCity, CharacterInLocation, 
      Cities.CityName, Locales.LocaleTitle 
   from 
      Characters 
   INNER JOIN 
      Cities on Cities.CityID = Characters.CharacterInCity
   INNER JOIN 
      Locales on Locales.LocaleID = Characters.CharacterInLocation
   Where 
      CharacterID = @CharacterID 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:18:23.677

我会尝试明确指定参数的类型 - 如果值为 null，则尤其重要：

```
SqlCommand cmd = new SqlCommand("ReturnCharacterInfo", Con);

// added as per CodeNaked's comment - thanks! You've nailed it right on the head!
cmd.CommandType = CommandType.StoredProcedure;

cmd.Parameters.Add("@CharacterID", SqlDbType.Int).Value = CharacterID; 
```

另外：你有错别字吗？**三重检查**所有出现的`CharacterID`- 你是否碰巧`CharachterID`在你的代码中某处有类似的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:25:03.043

正如CodeNaked所指出的，您需要设置SqlCommand的命令类型。由于存储过程的执行方式，需要告知 SqlCommand 对象它是一个存储过程。

```
OpenSqlConnection();

SqlCommand cmd = new SqlCommand("ReturnCharacterInfo", Con);
cmd.CommandType = System.Data.CommandType.StoredProcedure;
cmd.Parameters.AddWithValue("@CharacterID", CharacterID);

SqlDataReader dr = cmd.ExecuteReader(); 
```

# php - JQuery 和 Bootstrap 的 Typeahead，好像忽略了一些 JSON 结果？

> ID：13385700
> 
> 赞同：0
> 
> 时间：2012-11-14T19:15:28.940
> 
> 标签：php, javascript, jquery, twitter-bootstrap, bootstrap-typeahead

这个真的让我很烦恼，希望有人能弄清楚发生了什么。

JS：

```
 $('#search').typeahead({
    source: function(typeahead, query){ 
        $.ajax({
            url: "/autocomplete_bs.php",
            type: "GET",
            data: "q="+query ,
            dataType: "JSON",
            async: true,
            success: function(data){
                if (data == null) {
                    data = '{"name":"name","url":"url"}';
                }
                typeahead.process(data);        //If the returned object is not a null json object, THEN process it.
            }
        });
    },
    property: 'name',
    items:8,
    onselect: function (obj) { 
        window.location = obj.url;
    }
}); 
```

autocomplete_bs.php 在这里：[http ://examine.com/autocomplete_bs.php?q=xxxx](http://examine.com/autocomplete_bs.php?q=xxxx)

您可以在此处测试自动完成功能：http: [//examine.com/](http://examine.com/)（右上角）

令人难以置信的是，有些结果显示，有些则没有。

*   检查。com/autocomplete_bs.php?q=bacopa - 显示
*   检查。com/autocomplete_bs.php?q=aging - 显示
*   检查。com/autocomplete_bs.php?q=life - 不显示？
*   检查。com/autocomplete_bs.php?q=food - 只显示第一个结果，不显示第二个
*   检查。com/autocomplete_bs.php?q=creat - 显示多个结果，但跳过“什么是硝酸肌酸？”

控制台没有显示任何可以解释这一点的错误。有什么线索吗？

（对不起，因为我的声誉太低，而且我忘记了我必须破坏 URL 的其他主要登录名）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:43:09.493

Welp, turns out I forgot that typeahead has a matcher function that filters out what it shows.

So this line fixed it:

```
matcher: function () { return true; }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:48:10.627

检查.com/autocomplete_bs.php?q=life - 不显示任何内容，因为返回对象中的“名称”字段不包含任何“生命”

它返回：

```
[{"name":"Stack - Anti-Aging","url":"http://examine.com/autocomplete_go.php?q=life&url=stacks/anti-aging.html"}] 
```

因此，换句话说，您将 Typeahead 设置为***仅***显示“名称”包含实际字符串（例如“生命”）的那些结果，即使服务器返回更多项目。

# c# - 2 个 GroupJoin 在一个查询中

> ID：13385704
> 
> 赞同：-2
> 
> 时间：2012-11-14T19:15:32.980
> 
> 标签：c#, asp.net, asp.net-mvc-3, linq, entity-framework

我有一个这样的查询，它将两个实体连接在一起：

```
IEnumerable<ICD.ViewModels.HomeSearchViewModel> query =
ICDUnitOfWork.AlphaGroups.Find().GroupJoin(ICDUnitOfWork.Alphas.Find(),
                                           a => a.AlphaGroupID,
                                           g => g.AlphaGroupID,
                                           (alphaGroups, alphas) =>
                                           new ICD.ViewModels.HomeSearchViewModel
                                           {
                                               AlphaGroups =
                                                   alphaGroups,
                                               Alphas = alphas,
                                               SearchTerm = searchTerm
                                           }).OrderBy(x => x.AlphaGroups.Title); 
```

我需要将 Alphas 实体与另一个名为“代码”的实体连接起来。是否可以在单个查询中执行此操作，还是应该将其分解为 2 个单独的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:52:00.780

标准实体框架查询看起来更像：

```
var query =
  from a in dbContext.Alphas
  from g in a.AlphaGroups
  from c in a.Codes
  select new {Alpha = a, AlphaGroup = g, Code = c} 
```

也许：

```
var query =
  dbContext.Alphas.Include("AlphaGroups").Include("Codes"); 
```

为什么您的查询看起来如此糟糕？

# mysql - 如何组织地理空间的模型类和相关数据库数据？

> ID：13385709
> 
> 赞同：0
> 
> 时间：2012-11-14T19:15:56.367
> 
> 标签：mysql, ruby-on-rails, ruby, database, data-structures

我正在使用 Ruby on Rails v3.2.2 和 MySQL。我想以一种平衡的方式“抽象”和“处理”*地理*空间，但是当我不得不“发明”整体结构时，我遇到了麻烦。所以...

*如何组织地理空间的模型类和相关数据库数据？*也就是说，例如，我应该实现哪种“类型”的类——我应该使用类似 RoR 单表继承还是多态类？- ？并且，鉴于提到的模型类（或模型类），我应该将哪些表列添加到我的数据库中，以及应该如何填充这些列以便可检索（原因是我正在考虑实现一个搜索表单以便以用户友好的方式查找记录，可能带有“自动完成名称”输入字段）？

* * *

*注意*：此时，我计划在（“嵌套”空间）`continents`> `countries`> `regions`> `cities`>中“组织”一个地理空间`addresses`。但是，由于搜索表单用例的可检索性，我想只创建*一个*数据库表来处理这些空间对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:31:43.103

它认为使用belongs_to 和has_many 会很友好，即使对于自动完成和其他东西也是如此。

```
class Continent < ActiveRecord::Base
    has_many :countries
end 

class Country < ActiveRecord::Base
    belongs_to :continent
    has_many :regions
end

class Region < ActiveRecord::Base
    belongs_to :country
    has_many :cities
end 
```

类似的东西。

# php - php编码之谜

> ID：13385711
> 
> 赞同：0
> 
> 时间：2012-11-14T19:16:08.070
> 
> 标签：php, html, encoding, html-parsing, domdocument

我正在从政府网站下载 HTML 文件（没有任何 !DOCTYPE...的原始 HTML），然后提取段落以将它们放入 MySQL 数据库。

我正在使用 DOMDocument，所以我要去

```
$doc = DOMDocument();
$doc->loadHTMLFile( "../notifs/notif$notif_no.htm" ); 
```

问题的出现是因为某些字符变成了奇怪的东西：例如（一种）撇号变成了¢€™。

如果我然后尝试将此参数保存到表中的文本字段中，要么被 MySQL 拒绝，要么被记录为这些奇怪的字符......取决于文本字段的编码。

另外，如果我去 $doc->saveHTMLFile("test.htm"); 它实际上打印出奇怪的字符，而不是撇号。

我知道这与编码有关，但是几天的谷歌搜索和对 SE 问题的大量研究并没有导致解决方案。Firefox 告诉我下载的 HTML 文件采用 utf-8 编码。我尝试更改 php.ini 文件，因此 default_charset 为“utf-8”。没有喜悦。

我更像是一个应用程序程序员而不是一个网站人，所以我对编码很陌生。我试过自己破解这个，但只是不明白发生了什么或做什么。

***之后***

发现通过把

```
$file = file_get_contents("../notifs/notif$notif_no.htm");
$doc->loadHTML('<?xml encoding="UTF-8">' . $file ); 
```

然后 saveHTMLFile() 输出带有正确的撇号...就像我对 SQL INSERT INTO ... (...) VALUES (...) 字符串的回声一样。然而MySQL文本域中的文本却硬是不配合。（自然尝试了多种不同的排序规则）。同时，mb_detect_encoding ($clean_string) 打印“UTF-8”并且 mb_check_encoding ($clean_string) 返回 TRUE。

不过，另一个令人费解的事情是：如果我这样做了

```
$doc->loadHTML('<?xml encoding="latin1">' . $file ) 
```

这种相同的部分成功保持不变，一直到“UTF-8”检测到的编码。嗯嗯

***之后***

```
$doc = new DOMDocument();
$file = file_get_contents("../notifs/notif$notif_no.htm");
# without this following line adding an explicit encoding for the DOMDocument nothing worked!
$doc->loadHTML('<?xml encoding="UTF-8">' . $file ); 
```

然后，当您提取一些文本并对其进行一些清理时，将其称为 $clean_string

```
# convert difficult UTF-8 characters into HTML special sequences ("&rsquo;", etc.) 
$clean_string = mb_convert_encoding($clean_string, "HTML-ENTITIES", "UTF-8"); 
```

在此 $clean_string 之后包含诸如“......葡萄酒值得喝”之类的序列......但我，一方面，仍然很困惑，因为如果你只是去

```
echo ">>> clean string $clean_string<br>"; 
```

......“’” 序列当然会被浏览器显示为 ' （单引号）。

这对于大多数 PHPers 来说可能是绝对显而易见的......但是如果你想显示你在 $clean_string 中拥有的准确图片，你必须去

```
$decoded_clean_string = htmlspecialchars( $clean_string, ENT_QUOTES );
echo ">>> decoded string: $decoded_clean_string<br>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:28:58.130

```
$doc = DOMDocument();
$file = file_get_contents("../notifs/notif$notif_no.htm");
$file = mb_convert_encoding($file, "UTF-8");
$doc->loadHTML( $file ); 
```

值得一试？

或者

```
$file = mb_convert_encoding($file, 'HTML-ENTITIES', 'UTF-8'); 
```

# ios - iOS plist 为空

> ID：13385712
> 
> 赞同：0
> 
> 时间：2012-11-14T19:16:12.310
> 
> 标签：ios, plist

我知道在 SO 上有很多关于此的问题，但我看不出我在哪里犯了错误，并希望一些额外的眼睛会有所帮助。我已经验证 plist 在我的包中，它也在我的 docs 目录中，它包含数据。这是应用程序包的屏幕截图，顶部有 plist：

![在此处输入图像描述](../Images/90099ed01f113587187e6eb500931db2.png)

我从另一个类传入 plist 并验证它是正确的 plist。

这是我的代码：

```
-(id)init {

    if (self = [super init]) {

        //set up the appTracker
        appTracker = [[OAI_AppTracker alloc] init];

        //set up a file manager and error container
        fileManger=[NSFileManager defaultManager];

        //docs directory path
        documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

        //track event
        appTracker.appEvent = @"File Manager initialized";
        [appTracker recordEvent];

    }

    return self;
}

- (NSDictionary* ) readPlist {

    NSError* error;

    //set up dictionary to hold our app data
    NSDictionary* appData;

    //set up destination path
    NSString* destinationPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", plistToRead]];

    if ([fileManger fileExistsAtPath:destinationPath]){
        //read plist
        appData = [[NSDictionary alloc] initWithContentsOfFile:destinationPath];
    } else {

        //file doesn't exist so we have to move it to the doc folder
        NSString *sourcePath=[[[NSBundle mainBundle] resourcePath]stringByAppendingPathComponent:plistToWrite];
        [fileManger copyItemAtPath:sourcePath toPath:destinationPath error:&error];

        //now read the plist
        appData = [[NSDictionary alloc] initWithContentsOfFile:destinationPath];

    }

    NSLog(@"%@", appData);
    return appData;

} 
```

我的日志显示 NULL 而不是 plist 中的数据。感谢任何关于我做错了什么的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:18:37.110

要阅读您的 plist，请尝试以下操作：

```
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"PlistFileName" ofType:@"plist"];
NSDictionary *plistData = [[NSDictionary alloc] initWithContentsOfFile:plistPath]; 
```

# java - 我无法用 ormlite android 更新表

> ID：13385714
> 
> 赞同：0
> 
> 时间：2012-11-14T19:16:25.103
> 
> 标签：java, android, sqlite, updates, ormlite

问题是我有一个表格产品，而我的更新脚本无法正常工作。一切都返回假。

**产品类**

```
@DatabaseTable(tableName = "Product")
public class Product  {
@DatabaseField(index = true, generatedId = true)
private int productId;

@DatabaseField
private String name;

@DatabaseField
private int quantity;

//@DatabaseField(canBeNull = true)
//private Integer categorie;
//http://logic-explained.blogspot.com.ar/2011/12/using-ormlite-in-android-projects.html

@DatabaseField
private int categorie;

//@ForeignCollectionField
//private ForeignCollection<Categorie> itemsCategorie;  

@DatabaseField
private String description;

@DatabaseField
private String photo;

Product() {
}
public Product(int productId, String name, int quantity,            int categorie, String description, String photo) {
    super();
    this.productId = productId;
    this.name = name;
    this.quantity = quantity;
    this.categorie = categorie;
    this.description = description;
    this.photo = photo;
}

public void setDescription(String description) {
    this.description = description;
}
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getAddress() {
    return description;
}

public void setAddress(String address) {
    this.description = address;
}
public int getProductId() {
    return productId;
}

public void setProductId(int productId) {
    this.productId = productId;
}

public int getQuantity() {
    return quantity;
}

public void setQuantity(int quantity) {
    this.quantity = quantity;
}

public int getCategorie() {
    return categorie;
}

public void setCategorie(int categorie) {
    this.categorie = categorie;
}

public String getPhoto() {
    return photo;
}

public void setPhoto(String photo) {
    this.photo = photo;
}
public CharSequence getDesc() {
    return null;
}

} 
```

**我的脚本更新产品**

```
public boolean updateProduct(Product p) {
    boolean ret = false;
    if (productDao != null) {
        try {
            productDao = getDao(Product.class);

            UpdateBuilder<Product, Integer> updateBuilder = productDao
                    .updateBuilder();
            updateBuilder.updateColumnValue("name", p.getName());
            updateBuilder.updateColumnValue("quantity", p.getQuantity());
            updateBuilder.updateColumnValue("categorie", p.getCategorie());
            updateBuilder.updateColumnValue("description", p.getDesc());
            updateBuilder.updateColumnValue("photo", p.getPhoto());

            // but only update the rows where the description is some value
            updateBuilder.where().eq("productId", p.getProductId());
            // actually perform the update

            String str = updateBuilder.prepareStatementString();
            // UPDATE `Product` SET `name` = 'gcd' ,`quantity` = 1
            // ,`categorie` = 1 ,`description` = ? ,`photo` = '' WHERE
            // `productId` = 0

            if (productDao.update(updateBuilder.prepare()) != 1) {
                ret = false;
            } else {
                productDao.refresh(p);
                ret = true;
            }
        } catch (Exception e) {
            ret = false;
            e.printStackTrace();
        }
    }
    return ret;
} 
```

**然后我用这样的函数调用它，但总是返回 false :(**

```
public boolean updateProduct(Product p) {
    boolean ret = false; 
    try {
        ret = getHelper().updateProduct(p);

    } catch (Exception e) {
        e.printStackTrace();
        ret =false;
    }
    return ret;

} 
```

我可以创建和删除，但我不能更新。我什么都试过了。如果您花点时间回答我的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:57:44.480

对于其他开发人员，如果您遇到这样的问题，您应该确保表必须具有身份密钥。

```
@DatabaseTable(tableName = "User")
public class User  {
    @DatabaseField(generatedId = true)
    public int id;
    @DatabaseField
    public String ServiceUserId;
    @DatabaseField
    public boolean IsActive;
    @DatabaseField
    public String FirstName;
    @DatabaseField
    public String LastName;
    @DatabaseField
    public String Key;
    @DatabaseField
    public String Email;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-26T06:41:51.237

在您的情况下，您必须覆盖 equals 和 hashCode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T14:54:28.197

解决方案是简单地从数据库中获取对象产品的实例，然后修改以最终发送到 updateProduct 方法。

例如首先我需要先创建任何方法以通过 ID 获取对象

```
 // get the Instance calling to the  getProductByID
   Product p = getHelper().getProductByID(p.getId())

   //modify any value of the product
   p.setFirstName("asd");

   //call the update
   ret = getHelper().updateProduct(p); 
```

然后我的对象被更新了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-21T10:26:19.123

注意对象Id（应该相同），使用natif函数update(Product)；

# winforms - 工具提示显示不一致

> ID：13385718
> 
> 赞同：5
> 
> 时间：2012-11-14T19:16:42.810
> 
> 标签：winforms, tooltip

我有一个简单的 winforms 表单（用作模式对话框），上面有几个控件。我想为其中一个文本框控件显示一个工具提示。我在表单中添加了一个工具提示组件，并在表单的构造函数中为所需控件调用了“SetToolTip”。我正在为各种延迟属性使用默认值。

工具提示的显示非常不稳定。当鼠标悬停在文本框上时，有时会显示工具提示。有时它只会在我在控件上方移动光标时显示。将光标移出和移回可能会显示工具提示。当它确实显示时，时间似乎比 InitialDelay 长得多。如果它确实工作了几次，它就会停止工作，并且离开/进入控件的次数不会使工具提示再次出现。

我尝试将 ShowAlways 设置为 true，但这没有任何区别。

有什么建议可以让我的工具提示可靠地工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:25:00.507

我之前有可靠地工作的工具提示，这就是我为复制它所做的工作。

我在用作模态对话框的表单上放置了一个文本框、标签和工具提示控件。

我的文本框的 MouseEnter 事件处理程序如下所示：

```
 private void textBox1_MouseEnter(object sender, EventArgs e)
    {
        int XOffset = 0;
        int YOffset = -55;
        int Duration = 3000;

        toolTip1.ToolTipTitle = "ToolTip.";

        toolTip1.Show( "This is my tooltip. there are many like it but this one is mine",
               textBox1, XOffset, YOffset, Duration);
    } 
```

而已。当我用鼠标输入文本框时，工具提示出现 3 秒钟，然后消失，并且一直如此。注意我不必在任何地方调用“SetToolTip”。另外，请进行偏移，以使工具提示不会遮挡控件的任何部分，因为这似乎会引起怪异。

# vb.net - 在 VB.NET 中使用 Authorize.net 进行付款确认

> ID：13385721
> 
> 赞同：0
> 
> 时间：2012-11-14T19:16:50.390
> 
> 标签：vb.net, authorize.net

我有一个 authorize.net 帐户，并且有 5 个不同的电子商务应用程序与该帐户相关联。有些是从公共站点发布的，有些是从托管访问站点发布的。我正在使用 SIM 并且已阅读有关中继响应的信息，但据我所知，我只能列出一个 URL。这对我不起作用，因为我需要为电子商务系统的每个不同入口点使用不同的 URL。

我目前的问题是，我需要在成功完成付款后通过 guid 更新数据字段以确认购买数字商品，但如果我放入中继响应页面，它会被发送到我的所有接入点并引发错误。电子商务系统的其他部分需要在完成后发送不同的电子邮件等，而且顶层的所有 url 都是不同的。

有没有其他方法可以完成我忽略的这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:34:05.117

使用[静默帖子](http://www.johnconde.net/blog/all-about-authorize-nets-silent-post/)*。它是 Authorize.Net 相当于 Paypal 的 IPN。它只会发布到每个帐户的一个 URL，但它发生在幕后。这意味着您可以在每笔交易中发送一个自定义标志来标识购买的站点，然后让它做出相应的响应（例如发送电子邮件、更新数据库等）。

*我是此内容的作者

# css - 如何设计不同尺寸的img？

> ID：13385723
> 
> 赞同：0
> 
> 时间：2012-11-14T19:16:55.070
> 
> 标签：css, css-selectors

> **可能重复：**
> [是否存在受最大宽度或最大高度约束的 IMG 的 CSS 选择器？](https://stackoverflow.com/questions/7143242/is-there-a-css-selector-for-an-img-which-has-been-constrained-by-max-width-or-ma)

在我的页面中，我有一些不同大小的图像。 **所有图像都没有类或 id 属性。**

我想要做：

如果图像大于 680px，其边框颜色为#aaa

如果图片小于100px，则无边框；

ETC..

有没有办法做到这一点？是否有任何伪或选择器？

提前致谢。

# ios - 无法从委托方法中关闭 FBfriendPickerViewController

> ID：13385724
> 
> 赞同：0
> 
> 时间：2012-11-14T19:16:59.237
> 
> 标签：ios, facebook, delegates

我正在使用 facebook FBFriendPickerViewController 并希望用户只能选择一个朋友，然后让它关闭视图控制器。在 FBFriendPickerDelegate 中，在 selectionDidChange 方法下，我试图捕捉他们选择的朋友，然后关闭视图控制器。我不能忽略它，我觉得我以前做过很多次这样的事情，所以我觉得问这个有点愚蠢，但我觉得我已经用尽了这个的每一个变化，没有任何效果。

```
-(void)friendPickerViewControllerSelectionDidChange:(FBFriendPickerViewController *)friendPicker{
    self.selectedFriends = friendPicker.selection;
    NSLog(@"%@", self.selectedFriends);
    [friendPicker dismissViewControllerAnimated:YES completion:nil];
} 
```

我也试过

```
[[friendPicker parentViewController] dismissViewControllerAnimated:YES completion:nil];

[self.friendPickerController dismissViewControllerAnimated:YES completion:nil];

[self.navigationController dismissViewControllerAnimated:YES completion:nil];

[[friendPicker navigationController] dismissViewControllerAnimated:YES completion:nil];

[self dismissViewControllerAnimated:YES completion:nil]; 
```

一切都无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:22:52.773

由于它是您可能推送的导航 Viewcontroller，因此您需要弹出它：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T14:35:41.670

如果您以模态方式呈现friendpicker控制器，您可以使用 FBViewControllerDelegate 协议的 facebookViewControllerCancelWasPressed 和 facebookViewControllerDoneWasPressed 方法将其关闭。如果您符合 FBFriendPickerDelegate，您将自动符合第一个。

# php - 条件字符串中带有符号的 Codeigniter 查询

> ID：13385731
> 
> 赞同：0
> 
> 时间：2012-11-14T19:17:22.073
> 
> 标签：php, mysql, codeigniter, activerecord

我正在尝试在我的 CMS 中添加过滤器下拉列表，我的模型看起来像

```
public function load($sort,$order,$key,$value)
{ //        $key='listening'; //        $value="1";
            //configure pagination
    $config=array(
      'base_url'=>base_url().'/index.php/companies/index',
      'total_rows'=>$this->db->get('company')->num_rows(),
      'per_page'=>$this->settings_model->get_per_page(),
      'num_links'=>20
    );

    $this->pagination->initialize($config);

    $this->db->select('company.id, 
                       company.name, 
                       company.logo, 
                       company.status_id, 
                       company.listening',FALSE);
    $this->db->select('company_category.name as category,
                       company_category.id as category_id',FALSE);

    $this->db->select('complain_status.cs_status as status',false);
    $this->db->from('company');
    $this->db->join('company_category','company_category.id = company.category_id');
    $this->db->join('complain_stastus', 'complain_status.cs_id = company.status_id');

    if(isset($_POST['key']))
    {
       $value=  str_replace('&nbsp', ' ', $_POST['value']);
        var_dump($value);
        if($value!='0')
            $this->db->having ($_POST['key'], mysql_real_escape_string($value) );

    }
    if($sort!='' || $sort!=NULL)
        $this->db->order_by ($sort, $order);

    $this->db->limit($config['per_page'], $this->uri->segment(3));

    $result=$this->db->get();
    if(!isset($_POST['key']))
        $this->filter->set_filters_list($result->result_array());

    return $result->result();
} 
```

生成以下查询

```
SELECT company.id, company.name, company.logo, company.status_id, company.listening, company_category.name as category, company_category.id as category_id, complain_status.cs_status as status
FROM (`company`)
JOIN `company_category` ON `company_category`.`id` = `company`.`category_id`
JOIN `complain_status`  ON `complain_status`.`cs_id` = `company`.`status_id`
HAVING `category` =  'Health & recreation'
LIMIT 20 
```

如您所见，当类别等于某些带有特殊字符的字符串时出现问题，例如`Health & recreation`它失败了，即使我尝试了由 CI 生成的查询，它也可以在 MYSQL 上正常工作并得到结果

注意：我正在替换空格 `$value= str_replace('&nbsp', ' ', $_POST['value']);`，因为此数据来自选择 html 元素，当它在选项中有空格时失败，因此我必须稍后在后端代码中解析并删除它

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:29:06.010

代码点火器可能是 html_encoding 符号，以便它读取为它的 html 值。您可以通过将此行添加到运行查询的任何控制器或模型的构造函数来打开分析器来确认这一点：

```
$this->output->enable_profiler(TRUE); 
```

如果我是对的，您的查询将替换为应该在`&#38;`哪里。`&`

请注意，分析器显示`&#38;`使用 a 时`$this->db->last_query()`仍显示 a`&`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:33:24.327

要将符号插入数据库，您需要先转义这些值。在 PHP 中，您通常会使用：mysql_real_escape_string()

[如何将特殊字符插入数据库？](https://stackoverflow.com/questions/2584066/php-how-to-insert-special-characters-into-a-database)

但是，当您在 CodeIgniter 中执行此操作时，您必须使用查询绑定来自动转义数据，

```
$category = $this->input->post('category');
$status = $category = $this->input->post('status');
$status_id = $category = $this->input->post('status_id');

$sql = "SELECT * FROM company WHERE category = ? AND status = ?"; 

$this->db->query($sql, array($category, $status)); 
```

[http://ellislab.com/codeigniter/user_guide/database/queries.html](http://ellislab.com/codeigniter/user_guide/database/queries.html)（在查询绑定下）

[CodeIgniter 会自动阻止 SQL 注入吗？](https://stackoverflow.com/questions/1615792/does-code-igniter-automatically-prevent-sql-injection)

虽然它不是原始问题的一部分，但您的代码存在缺陷，因为您使用 $_POST['value'] 没有任何类型的过滤。没有什么可以阻止某人使用 SQL 注入您的表单。

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

# ruby-on-rails - Model X 和 Model Y 各有多个 Z, :dependent => :destroy。如果我摧毁X，Z会被摧毁吗？

> ID：13385733
> 
> 赞同：1
> 
> 时间：2012-11-14T19:17:30.157
> 
> 标签：ruby-on-rails, activerecord

说我有：

```
class X < ActiveRecord::Base
  has_many :z, :dependent => :destroy
end

class Y < ActiveRecord::Base
  has_many :z, :dependent => :destroy
end

class Z < ActiveRecord::Base
  belongs_to :x
  belongs_to :y
end 
```

... 然后我：

```
x.destroy 
```

`z`如果它也属于 会被销毁吗`y`？

我知道测试非常简单，如果我没有得到任何回复，我会这样做并回答我自己的问题，但除了正确答案之外，我还想更好地了解 :dependent => :destroy 的工作原理如果有任何其他影响我需要注意。ActiveRecord::Base 文档在这个主题上非常稀少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:29:42.530

它肯定会破坏所有连接的 z 对象，这会在您的数据库上产生很多业务错误。

恕我直言，我会重构这个建模。处理这种关系可能会非常糟糕。有不能改造的理由吗？

也许如果只是改变验证可以工作，或者甚至让 X 和 Y 继承一些与 X 类建立关系的其他类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:24:53.687

我没有测试过它，但我认为`z`不管它与`y`.

至于含义...`:destroy`将首先实例化每个实例`z`并调用`:destroy`它。如果由于验证/挂钩而失败，`z`那么原始文件`x`将无法被销毁。

此外，如果`x`有成千上万个`z's`可能需要一些时间，此时`:delete_all`可能会更好。

# c++ - 如何制作一个允许值超过最大 int 的枚举？

> ID：13385744
> 
> 赞同：10
> 
> 时间：2012-11-14T19:18:14.277
> 
> 标签：c++, variables, enums

我正在用 C++ 制作一个枚举，以使用二进制标志制作一个有限状态机。看起来像：

```
enum VStates
{
    NEUTRAL         =   0x00000000,     // 000000
    //  Physical Status
    DRY             =   0x00000001,     // 000001
    WET             =   0x00000002,     // 000010
    HOT             =   0x00000004,     // 000100
    COLD            =   0x00000008,     // 001000
    BURNED          =   0x00000016,     // etc..
    FROZEN          =   0x00000032,
    EROS            =   0x00000064,     // 
    THANATOS        =   0x00000128,     // 
    SLEEP           =   0x00000256,
    STUNNED         =   0x00000512,
    PARALYZED       =   0x00001024,
    POISONED        =   0x00002048,     //
    BLIND           =   0x00004096,
    SOFT            =   0x00008192,     // Flexible
    TOUGH           =   0x00016384,     // Resistent
    MAGNETIZED      =   0x00032768,
    POSSEDERUNT     =   0x00131072,     //
    // Mental Status
    ANGRY           =   0x00262144,
    DRUGGED         =   0x00524288, // Drugs Meaning
    HORNY           =   0x01048576, // Sexual Meaning
    // Material Status
    METAL           =   0x02097152,
    WOOD            =   0x04194304,
    GLASS           =   0x08388608,
    AIR             =   0x16777216,
    EARTH           =   0x33554432,
    DUST            =   0x67108864,
    LIGHT           =   0x134217728,
    SHADOW          =   0x268435456,
    WATER           =   0x536870912,
    // Total Status
    PROTECTED       =   0x1073741824,
    INVULNERABLE    =   0x2147483648

}; 
```

有些状态是不兼容的，所以我使用按位运算符来管理它们。现在，我的编译器说：

```
warning: integer constant is too large for 'long' type 
```

这是声明此枚举的正确方法吗？我喜欢避免警告，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T19:24:40.450

在 C++11 中，您可以指定枚举的基础类型。

```
#include <cstdint>

enum VStates : uint64_t {
    // Values
} 
```

在旁注中，我建议不要计算所有这些 2 的幂。您通过写入一个十六进制常量但给它一个以 10 为基数的数字，从而在计算中出错。但是，我建议不要重新计算所有这些，而是​​建议：

```
#include <cstdint>

enum VStates : uint64_t {
    NEUTRAL = 0ULL,
    DRY = 1ULL << 0,
    WET = 1ULL << 1,
    HOT = 1ULL << 2,
    COLD = 1ULL << 3,
    // etc.
} 
```

那你肯定不会犯错。`ULL`后缀确保文字被接受为至少 64 位宽的整数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-14T19:26:34.787

*（注意：为了使我的答案完整，我将添加一些我没有花时间注意到但其他人指出的内容：您使用的是`0x`前缀，这意味着您的数字将被解释为十六进制。他们实际上并没有是 2 的幂，而您的 bitflag 测试将无法正常工作！）*

如果您的枚举像这样失控，请不要使用枚举类型。使用类似[`std::bitset`](http://www.cplusplus.com/reference/stl/bitset/). 那么你的枚举可以只是一个简单的编号列表，用于表示集合中位的位置......而且你不会以指数方式耗尽你的枚举空间！

例如：

```
enum VState {
    NEUTRAL,
    DRY,
    WET,
    COLD,
    BURNED,
    FROZEN,
    /* ... */
    VState_Max
};

bitset<VState_Max> state;

state[COLD] = true;
if (state[COLD]) {
    cout << "I am cold\n";
} 
```

现在你的枚举只是很小的、可维护的数字，你不必担心在 64 位平台上或诸如此类的东西。

我注意到您在原始示例中为 NEUTRAL 提供了“0”值。如果您的意图是可以将它与其他东西结合使用......例如能够`state = NEUTRAL | INVULNERABLE | SHADOW`单独测试`NEUTRAL`，那以前是行不通的。现在它将...您只需将其保留在用于索引位集的枚举中。

*但是*，如果它打算作为“nothing set”的名称，那么您将从枚举中删除它，而是测试没有设置的位：

```
if (state.none()) {
    // we are in the "NEUTRAL" state of nothing set...
} 
```

...如果您想将所有位设置为 false，您可以选择：

```
state.reset(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T19:25:59.980

枚举有 31 个非零值，因此它们都可以放入 32 位无符号值。问题是这里的值不是位值。要么写成十进制值（去掉`0x`前面的），要么写成十六进制值（0x01、0x02、0x04、0x08、0x10、0x20、0x40等）我个人不喜欢，但有些人写这个带班次的常数：1<<0, 1<<1, 1<<2, 1<<3, etc.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T19:21:50.103

如果您使用的是 C++11，则可以将具有定义类型的强类型枚举声明为`unsigned long long`（`_int64`在 Windows 中，尽管您可能应该使用可移植的`uint64_t`），前提是这将您的范围扩展得足够远。

感谢 Joachim 提供 C++11 枚举使用示例的链接：[Strongly Typed Enums](http://en.wikipedia.org/wiki/C++11#Strongly_typed_enumerations)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T19:21:47.463

使用较小的数字。枚举只能和 long 一样大。long 的大小取决于编译器，但典型的大小是 32 位或 64 位。我在那里看到一些 10 位的十六进制数字，它们太大了。

# sql - 显示来自两个表的唯一数据

> ID：13385755
> 
> 赞同：1
> 
> 时间：2012-11-14T19:18:32.520
> 
> 标签：sql, sql-server-2008

我有两张桌子。产品 A 和产品 B。

产品A

```
ID SubId

A1 112
A1 113
A1 114
B1 111
C1 113
C1 115
D1 117
D1 118
E1 114 
```

产品B

```
ID SubId

A1 112
A1 118
B1 111
B1 113
C1 114
D1 117
D1 118
E1 115
E1 116
E1 117 
```

我想编写一个查询，它输出两列 ID 和 SubId 并显示特定 ID 的不同 SubId 列。因此，对于上述表格，对于 A 列，它将显示以下内容：

```
ID SubId

A1 112
A1 113
A1 114
A1 118 
```

我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:21:03.293

假设通过说唯一，你真的只是意味着根据你的示例结果没有重复，你想使用 UNION

```
SELECT ID, SubID
FROM tblA
UNION 
SELECT ID, SubID
FROM tblb 
```

# php - 使用PHP将多边形从json文件导入mysql

> ID：13385757
> 
> 赞同：0
> 
> 时间：2012-11-14T19:18:32.010
> 
> 标签：php, json, geometry, polygon, qgis

我正在尝试导入大量已解析的 JSON 文件（4 gb）。我想将它插入到 QGis 的 mysql 数据库中。起初我以为我可以直接使用 mongodb 和 RazorSQL 导入所有内容，但那是不可能的。我发现没有比制作脚本单独处理所有内容更快的方法了：

```
 "pandgeometrie": {
            "type": "Polygon",
            "coordinates": [
                [
                    [199801.469, 483101.581],
                    [199787.101, 483102.676],
                    [199786.139, 483090.053],
                    [199800.507, 483088.957],
                    [199801.469, 483101.581]
                ]
            ]
        }
"geometry": {
        "type": "Point",
        "coordinates": [199793.932, 483095.516]
    } 
```

我想使用 PHP 导入这些数据我想如果将多边形组合成一行多边形信息，就可以将其查询到 MYSQL。我是这样做的：

```
 $constants = get_defined_constants(true);
    $json_errors = array();
    foreach ($json  as $name->features => $value) {
            foreach ($value as  $var){
                $id = $var->id; 
                $coordinates =  $var->properties->pandgeometrie->coordinates;
                $long = $var->geometry->coordinates[0];
                $lat = $var->geometry->coordinates[1];
                $point = "POINT(". $long . " ". $lat. ")";
                var_dump($point);
                        foreach ($coordinates as  $var){

                                echo "<div>";
                                $arrPoly= array()  ;
                                        foreach ($var as  $var2){

                                                $V0 = strval($var2[0])  ;
                                                $V1 = strval($var2[1]);
                                                $Comb = $V0 ." ". $V1;
                                                array_push($arrPoly, $Comb);

                            }
                                $polyImplode = implode($arrPoly, ",");
                                $polygon = "POLYGON((".$polyImplode."))";
                                var_dump($polygon);

$query = "INSERT INTO  geometry VALUES(PolygonFromText('$polygon'),'$id',PointFromText('$point'))"; 
```

检查值时，我只得到 NULL 值。

# debugging - 如何查看 XULRunner 日志？

> ID：13385763
> 
> 赞同：4
> 
> 时间：2012-11-14T19:19:00.167
> 
> 标签：debugging, logging, xulrunner

由于我不明白的原因，我有一个基于 XULRunner 的应用程序正在崩溃。为了帮助确定问题，我想查看 XULRunner 生成的所有日志。为此：

1.  XULRunner 是否产生任何类型的错误日志？
2.  如果是这样，它们的具体位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-01T23:12:56.060

虽然有[关于为 XULRunner 打开一些日志记录的说明](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Debugging_XULRunner_applications)，但我建议使用构建[并`--enable-debug`](https://developer.mozilla.org/en-US/docs/Configuring_Build_Options)获取堆栈跟踪和/或查看该构建的控制台输出。

# java - java异常的合理寿命是多少？

> ID：13385764
> 
> 赞同：6
> 
> 时间：2012-11-14T19:19:12.783
> 
> 标签：java, exception

维护对异常的引用以供以后使用是否合理，或者是否存在将异常引用保持比 throw/catch 交互更长的时间的陷阱？

例如，给定代码：

```
class Thing {
  private MyException lastException = ...;
  synchronized void doSomethingOrReportProblem() {
    try {
      doSomething();
    } catch (MyException e) {
      if (seemsLikeADifferentProblem(e, lastException)) {
        reportProblem(e);
      }
      lastException = e;
    }
  }
} 
```

假设我的程序创建了一个生命周期与 JVM 一样长的事物，那么在维护对 lastException 的挥之不去的引用的事物中是否存在任何正确性问题？这在JDK7中是否发生了变化？（查看 OpenJDK7 中 Throwable 的源代码，似乎有一个新的四参数公共构造函数，它不在 JDK6 中，它可以创建 Throwable 而无需在构造时调用 fillInStackTrace()。）

如果 MyException 下的任何链接异常都引用了对象，是的，这将阻止这些对象被垃圾收集，但假设我对此没问题，是否有任何陷阱需要提防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:28:04.330

我建议您基本上应该像对待任何带有“后端本机代码/存储”的对象一样对待它。如果您需要保留对一些异常的引用，例如“记住”从哪里调用特定方法等，那么不要害怕这样做。另一方面，不要在没有以某种方式“监控情况”的情况下继续使用数十万个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:04:06.927

Throwable 是一个成熟的 Java 对象，只要有人引用它，它就会一直存在。自从我进入 Throwable 以来已经有一段时间了，但我想不出它可能会保留对堆栈跟踪中方法类以外的引用（只是可能）。然而，堆栈跟踪本身确实消耗了大量的存储空间。

所以它真的和任何其他中等大的物体没有什么不同。在 JVM 的整个生命周期中保留一个例外似乎一点也不奇怪。（如果您保留所有异常的记录，那可能有点多。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:37:11.963

有 2 种常见情况下，对异常的引用超出了它们的直接程序相关性：

1.  当被传递给日志框架时
2.  当被传播出容器上下文时，通常在适应合适的形式后返回到远程应用程序

# insert - 有没有办法快速将一行插入另一个表？

> ID：13385765
> 
> 赞同：0
> 
> 时间：2012-11-14T19:19:12.587
> 
> 标签：insert, sql-server-2008-r2

我有具有相同列的表 A 和表 B，假设我们有 100 列。我想将表 A 中的数据插入表 B，我有以下插入语句： INSERT INTO B (column1, column2,....) select column1, column2..., column100 from A.

有没有办法在不列出所有列的情况下插入它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:21:39.060

除非表 B 与表 A 几乎相同，否则列出所有字段是唯一的选择。

例如，如果它们是完全重复的，具有相同的字段和类型，以相同的顺序，那么

```
INSERT INTO `B` SELECT * FROM `A` 
```

是你所需要的全部。但是一旦字段之间存在不匹配，那么您就必须弄脏并列出字段。如果 B 的字段与 A 中的名称不同，则尤其如此。

# javascript - 如何 and 影响时间？

> ID：13385766
> 
> 赞同：3
> 
> 时间：2012-11-14T19:19:21.803
> 
> 标签：javascript

我刚刚使用 SnapEngage 提供的以下代码块将 SnapEngage 添加到客户的站点：

```
<script type="text/javascript">
document.write(unescape("%3Cscript src='//www.snapengage.com/snapabug.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
SnapABug.addButton("1ff63c0c-0bf1-43e2-b9ae-08de517f08dc","0","55%");
</script> 
```

我觉得中间有`</script>`和很奇怪，所以我把它们拿出来了，但后来代码停止了工作。`<script type="text/javascript">`这是为什么？它们会以某种方式影响时间吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:33:23.750

第一个脚本将`script`标签放入 HTML 中，该 HTML 加载`snapabug.js`和加载此资源是**同步**的。因此，执行下一个脚本（即 ）`SnapABug.addButton(...)`会暂停，直到下载并解释资源。这样，`SnapABug`对象在以下脚本中可见。

如果将所有 JavaScript 代码放在一个`script`标签中，它会作为一批执行。全局范围内没有`SnapABug`对象，因为尚未下载提供的脚本。

# php - 如果在 php yii 中重复，则在文件末尾添加一个值

> ID：13385770
> 
> 赞同：0
> 
> 时间：2012-11-14T19:19:28.420
> 
> 标签：php, file-upload, yii, file-exists

我正在尝试处理重复的文件名。如果用户上传了一个名为“file”的文件，那么另一个用户上传了一个名为“file”的文件，我希望能够将 1 添加到新文件中，因此它现在称为“1file”。我能够做到这一点，但我的问题是当有人第三次上传“文件”时，它会覆盖“1file”，我需要增加 1。我正在使用 yii 框架

这是我在控制器中的功能：

```
function actionIndex(){
  //$dir = Yii::getPathOfAlias('application.images');
  //$dir is a variable that will hold the files uploaded
  $dir = Yii::app()->controller->module->cssFolder;
  //uploaded is a flag to see if we need to display a success/error message
  $uploaded = false;
  $model=new CssUpload();
  if(isset($_POST['CssUpload'])){
      $model->attributes=$_POST['CssUpload'];
      //see if file is correct format and allows us to see and save the file
      $file=CUploadedFile::getInstance($model,'file');
      if($model->validate()){
         $i = 0;
         //trying to add a int to the front/end of a duplicate file
         //able to handle the duplicate one time then gets stuck in an infinete loop
         //(it actually breaks on the first duplictae but it uploads)
        do{
            if(file_exists($dir.'/'.$file)){
                    //increase $i by 1 every time it loops through
                   $i++;
                   //for test purposes only
                   echo $i;
                  //upload the file
                  $uploaded = $file->saveAs($dir.'/'.$i.$file->getName());
                   //stops the infinute loop
                   break;
           }

       }while(file_exists($dir.'/'.$file));
         //upload the original file with no new extensions
         $uploaded = $file->saveAs($dir.'/'.$file->getName());

    }
  }

  $this->render('index', array(
     'model' => $model,
     'uploaded' => $uploaded,
     'dir' => $dir,
  )); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:48:20.033

Well I think you have two options:

*   append something like `microtime()` to the end of the filename, that way it's virtually impossible for you to have the same file name twice.

*   if you need the files to be kept in order **and** don't want to use the approach above, then you'd have to store the last inserted number in a database and then retrieve it, increment and store again.

I use the YII framework as well, but can't remember of anything specific to Yii that would help you here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:31:52.117

您将必须扫描所有可能与该模式匹配的文件。

在这里查看如何使用通配符搜索查找文件：[PHP file_exists and wildcard](https://stackoverflow.com/questions/2746364/php-file-exists-and-wildcard)

从那里你 acn 做两件事。

1.  处理每个文件，读取数字，然后选择您自己的数字。
2.  Think of a pattern that is unlikely to occur in a filename like 'file-_-1'. And make the new file suffix the value of the array count(). You might miss an index this way but it is faster.

# android - 地图视图上的Android路线有两点

> ID：13385771
> 
> 赞同：1
> 
> 时间：2012-11-14T19:19:29.230
> 
> 标签：android, android-mapview

我想在地图视图上绘制实际路线。我已经尝试过示例，但似乎都在两点之间画了一条线，而不是一条路线。我使用了下面的代码，但它会自动绘制一条路线。

```
 final Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(String.valueOf(urlString)));
    intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity");
    startActivityForResult(intent, 5); 
```

我想在地图视图中用自己的航点绘制路线。

# java - 在 JSP 中使用 struts 2 比较日期

> ID：13385772
> 
> 赞同：2
> 
> 时间：2012-11-14T19:19:33.407
> 
> 标签：java, jsp, jakarta-ee, struts2, ognl

我想使用比较两个日期`Struts2`

```
One is returned from the backend  (test.currentDate) == "2012-11-15)"
The other one I just set "2014-10-19" 
```

如何比较两个日期？

我的代码如下：

```
<s:set name="currentDate"  value="%{test.currentDate}"/>
<s:set name="futureDate" value="2014-10-19"/>
<s:if test="%{#currentDate.before(#futureDate)}">
    <s:text name="test"/> <s:date name="test.currentDate" format="MM/yy"/> 
</s:if>
<s:else>
    <s:text name="test2"/>
</s:else> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T06:09:50.603

在上面，您尝试将字符串与导致问题的日期对象进行比较。我建议您编写一个帮助类来比较日期并利用 OGNL 静态方法访问。[OGNLBasics-访问静态属性](http://struts.apache.org/2.x/docs/ognl-basics.html#OGNLBasics-Accessingstaticproperties)

```
 <s:set var="currentDate" value="%{new java.util.Date()}"/>
    <s:set var="futureDate" value="%{new java.util.Date()}"/>
    <s:property value="{#currentDate}"/>
    <s:property value="{#futureDate}"/>
    <s:if test="%{@com.mycompany.temp.strtus2.example.HelloWorld@compareDate(#currentDate, #futureDate)}">
        <div>Do your stuff</div>
    </s:if>
    <s:else>
        <div>else condition</div>
    </s:else> 
```

实用类

```
public static boolean compareDate(Date currentDate, Date futureDate) {
    boolean flag = false;
    if (removeTime(currentDate).equals(removeTime(futureDate))) {
        flag = true;
    } 
    return flag;
}

public static Date removeTime(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    return cal.getTime();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:32:27.147

`futureDate`然后在 JSP 中为您的 , (例如 2014-10-19 == 1413706569870)获取时间戳长值

```
<s:if test="1413706569870l > test.currentDate.time"> 
```

或者

```
<s:if test="test.currentDate.before(new java.util.Date(1413706569870l))"> 
```

# c# - 在 C# 字符串中查找引号的所有实例

> ID：13385773
> 
> 赞同：0
> 
> 时间：2012-11-14T19:19:43.053
> 
> 标签：c#, regex

我正在尝试使用正则表达式查找和替换 C# 字符串中双引号的所有实例，但似乎无法完全掌握答案，这是我目前所拥有的：

```
private string checkEscapeChars(string s)
{
    s = Regex.Replace(s, @"[""]", String.Empty);
    return s;
} 
```

现在，运行正常，但假设我有一个字符串“这是我的”示例字符串“

我想摆脱 Sample 之前的 " 。上面的方法会起作用吗？或者它会找到并替换匹配双引号的所有实例，而不是单双引号？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T19:21:40.600

为什么要为此使用正则表达式？只需使用`String.Replace`：

```
withoutQuotes = withQuotes.Replace("\"", ""); 
```

# jquery - 将 jQuery 包含在我的页面上后，它无法运行

> ID：13385774
> 
> 赞同：3
> 
> 时间：2012-11-14T19:19:54.627
> 
> 标签：jquery, html

我发誓我之前在我的页面上包含了 jQuery 一百万次，但由于某种原因这不起作用。就好像什么都没有发生一样。

我已经包含了一个指向 jQuery.com 托管版本的外部链接。

有什么见解吗？

```
<html>
<head>
    <meta charset="utf-8" />

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js" />
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js" />
    <script>

    $(function() {
    $( "#draggable3" ).draggable({ containment: "#containment-wrapper", scroll: false });

    $("input[type=submit], a, button")
        .button()
        .click(function( event )
        {
            event.preventDefault();
            $("#infobar").append('<p>Full name = ' + $("#first").val() + ' ' +  $("#last").val() + '  </p>');  
            alert("Name added!");                 
        });

       $.getJSON('friends.json', function(data)
       {
            $.each(data, function()
            {
                $.each(this, function(k, v)
                {
                  $("#infobar").append('<p>' + v.firstName + ' '  + v.lastName + '</p>');
               });

            });     

       });
});
    </script>

    <style>
    .draggable { width: 50px; height: 50px; padding: 0.5em; float: left; margin: 0 10px 10px 0; }
#draggable, #draggable2 { margin-bottom:20px; }
#draggable { cursor: n-resize; }
#draggable2 { cursor: e-resize; }
#containment-wrapper { width: 95%; height:150px; border:2px solid #D00000 ; padding: 10px; border-style:dashed;}
#infobar {background: #E8E8E8; width:100%}
</style>

</head>
<body>

<div id="containment-wrapper">
    First Name: <input type="text" name="firstname" id="first"><br>
    Last name: <input type="text" name="lastname" id="last">
    <input type="submit" value="Calclulate" />

    <div id="draggable3" class="draggable ui-widget-content">
        <p>LET ME OUT!</p>
</div>

</div>
<div id="infobar">

  </div>

</body>
</html>​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:21:47.680

`<script>` is not self-closing

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T19:21:30.067

`<script>` elements [require an end tag](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1). You should write:

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 
```

Instead of:

```
<script src="http://code.jquery.com/jquery-1.8.2.js" />
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js" /> 
```

Also keep in mind the `type` attribute must be specified in HTML4 (it defaults to `text/javascript` in HTML5). You might want to specify it explicitly, depending on your document type.

# events - 是否可以知道何时开始监听事件？

> ID：13385775
> 
> 赞同：1
> 
> 时间：2012-11-14T19:19:55.687
> 
> 标签：events, qooxdoo

我有一个对象，我想知道什么时候有人开始听它。

就我而言，我的班级中有一个“点击”事件，它是画布元素的包装器。当有人在收听包装器时，我如何将事件附加到画布上？

谢谢 （：

（[交叉发帖](http://qooxdoo.678.n2.nabble.com/Is-possible-to-know-when-an-event-starts-to-be-listened-tp7581945.html)，因为只有 3 次浏览，还没有回复）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:23:02.093

You can overwrite addListener() in you wrapper to call your code everytime it is called.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:08:10.283

我真的不确定你打算做什么。有一个画布元素，您可以收听它的事件。一旦它在那里被触发，你可以在你的包装类中触发“click”。您不需要知道已注册的确切听众。

# smarty - 如何在 Smarty 的 WHMCS 中检测 homepage.tpl？

> ID：13385777
> 
> 赞同：1
> 
> 时间：2012-11-14T19:20:00.533
> 
> 标签：smarty, whmcs

我目前正在编辑 WHMCS 的一个模板，它是由 Smarty 编写的。

我可以使用一些简单的东西吗

```
{if $is_homepage}
    show something
{/if} 
```

哪个**主页**是从homepage.tpl 加载的，意思是索引页。因为我想加载一些代码，只在主页上。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:51:47.413

相当hacky，但你可以尝试这样的事情：

```
{if ($smarty.server.SCRIPT_NAME eq "/index.php")}

{/if} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T12:02:07.760

如果您需要优化代码，请改用它。

```
{if $filename eq "index"} 
your code here 
{/if} 
```

您不必包含像**.tpl**这样的文件扩展名（以防万一您想知道）

# integration - 将 Shopify 与 Elgg 集成

> ID：13385778
> 
> 赞同：3
> 
> 时间：2012-11-14T19:20:07.533
> 
> 标签：integration, shopify, elgg

我们正在寻求将 Shopify 商店与 Elgg（基于 PHP 的开源社交网络框架）集成。我们的 Elgg 网站将以会员制为基础。Elgg 会员将通过 Shopify 商店进行购买，我们需要能够将 Elgg 会员 ID 与 Shopify 商店上的订单相关联。

几个相关的问题...

1.  您能否将一个 ID（从我们的 Elgg 网站）传递到 Shopify 商店并将其与 Shopify 订单数据相关联？

2.  在 Shopify 订单完成时，您可以指定重定向 URL 吗？

3.  在 shopify 订单完成时，您可以指定一个用于 Restful/Ajax 事件通知的 URL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:49:44.927

1.  不，但你可以做相反的事情。您可以使用 Shopify 的身份验证系统将某人登录到 Elgg。

2.  不。

3.  不，但有用于事件通知的 webhook。

# c++ - 我无法使用 C++ 的 MPI 编译器进行编译

> ID：13385780
> 
> 赞同：4
> 
> 时间：2012-11-14T19:20:17.433
> 
> 标签：c++, compiler-construction, mpi

我试图编译一个非常简单的 MPI hello_world：

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char *argv[]) {
    int numprocs, rank, namelen;
    char processor_name[MPI_MAX_PROCESSOR_NAME];

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &numprocs);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Get_processor_name(processor_name, &namelen);

    printf("Process %d on %s out of %d\n", rank, processor_name, numprocs);

    MPI_Finalize();
} 
```

并遇到以下问题：

```
 Catastrophic error: could not set locale "" to allow processing of multibyte characters 
```

我真的不知道如何弄清楚。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T20:00:44.143

尝试定义环境变量

```
LANG=en_US.utf8
LC_ALL=en_US.utf8 
```

假设您使用的是 unix，也可以尝试在命令行中，`man locale`并`locale -a`在 google 上搜索[“utf locale”](http://google.com/search?q=utf%20locale)和类似的搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-03T21:48:46.120

正如所指出的（设置 LANG=en_US.utf8），重新定义环境变量 LANG 为我解决了这个问题。

我可能会说我正在连接到一个外国服务器，这就是我在使用英特尔编译器编译代码时遇到的问题。

# rally - 拉力赛：获取总故事点数、任务时间等

> ID：13385787
> 
> 赞同：2
> 
> 时间：2012-11-14T19:20:29.820
> 
> 标签：rally, user-stories

我正在使用 Rally 2.0p4 API 并尝试聚合数据以获取迭代列表，其中包含每次迭代的故事点总和。我目前发现的唯一方法是查询*HierarchicalRequirement*模型并循环所有数据并将其填充到数组中。这似乎不太理想，有没有办法从服务器的调用中取回总数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:54:15.577

如果您希望通过迭代和/或发布来汇总此数据，请查看：

*   迭代累积流数据
*   发布累积流量数据

Webservices API 文档中的对象：

[https://rally1.rallydev.com/slm/doc/webservice/](https://rally1.rallydev.com/slm/doc/webservice/)

这些对象将提供以下内容的每日摘要：

CardCount (# Stories/Defects) TaskEstimateTotal CardEstimateTotal CardToDoTotal

按状态，在 OID 指定的每个迭代或发布中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:55:05.493

万一其他人来看，这是 api 调用可以出现的一种方式：

```
https://rally1.rallydev.com/slm/webservice/1.30/iterationcumulativeflowdata.js?query=(%20IterationObjectID%20=%20%2211203475854%22%20)&fetch=CardCount,CardToDoTotal,CardEstimateTotal,IterationObjectID 
```

该调用语法很微妙（例如，在“查询”的右括号之前需要一个空格）。

# c# - 将会话值分配给 razor @html.displayfor

> ID：13385788
> 
> 赞同：2
> 
> 时间：2012-11-14T19:20:31.990
> 
> 标签：c#, session, razor

目前使用剃刀在mvc上工作，希望将我的会话值分配给模型，我可以知道如何完成吗？做了一些研究，但看到任何。

显示申请密码恢复的学生ID，并将学生ID保存在会话中，以便进一步处理并显示在密码恢复表中

```
 @Html.LabelFor(m => m.StudentId)
            @Html.DisplayFor(m=> m.StudentId) 
```

当我希望将我的会话分配给 m.StudentId 时，有什么办法可以解决吗？

在控制器中

```
Session["StudentId"] = passwordrecovery.StudentId; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:23:49.120

您不需要将 id 存储在会话中。使用内置的会员提供程序功能来管理用户帐户。

除此之外，我建议将视图所需的任何内容/所有内容加载到视图包中，而不是依赖其他外部数据源。这可以使用 ActionFilters 从源（如 Sesssion）中提取值并将它们放入 ViewBag 或 View Model 中来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:23:38.163

If I understand you right, the best way would probably be to create a viewmodel, to which you assign the StudentId in your action before you return the view, rather than keeping the value in the session. You then pass the viewmodel to the view, and will have access to the StudentId in your view when creating your form.

```
// Create a view model that fit your needs
public class PasswordRecoveryViewModel {
    public int StudentId { get; set; }
    // Other properties as needed
}

// Do something like this in your action
public ActionResult YourAction () {
    var model = new PasswordRecoveryViewModel {
        StudentId = 1; // Assign the ID as needed
    }    
    return View(model);
} 
```

Then at the top of your view you add this:

```
@Model YourNameSpace.PasswordRecoveryViewModel; 
```

You will then have access to your student ID with `@Html.LabelFor(m => m.StudentId)`

# java - BlueJ 中的常见错误，但它没有得到解决。关于 括号

> ID：13385792
> 
> 赞同：0
> 
> 时间：2012-11-14T19:20:56.850
> 
> 标签：java, brackets, bluej

好的，所以问题在于括号很烦人。由于某种原因，它似乎永远不会起作用。我在其他网站上检查过，但这并没有得到解决。

```
import java.util.Scanner;
class x14
    {
        int a;
        int b;
        int c;
        double b2 = Math.pow(b,2);
        double sq = Math.sqrt(b2 - 4*a*c);
        public void main()
        {
            Scanner input = new Scanner(System.in);
            System.out.println("Please input 'a'");
            a = input.nextInt();
            System.out.println("Please input 'b'");
            b = input.nextInt();
            System.out.println("Please input 'c'");
            c = input.nextInt();
            System.out.println("Thank you!");

            double x1 = 0.0;
            double x2 = 0.0;
            x1=(-b+sq)/2a;// Says "Please place ';' here"
            x2=(-b-sq)/2a;// Says "Please place ';' here"
            /* When I Try this : ((-b+sq)/2a);
             * It says i have to place ')' at the end.
             */

            System.out.println("Equation x1 : " + x1);
            System.out.println("Equation x2 : " + x2);
            if(sq > 0)
            System.out.println("The Roots are Real and unequal");
            else if(sq == 0)
            System.out.println("The Roots are Real and Equal");
            else if(sq < 0)
            System.out.println("The Roots are imaginary");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:22:29.583

您缺少乘法运算符。

```
x1=(-b+sq)/2a;// Says "Please place ';' here"
x2=(-b-sq)/2a;// 
```

应该是：（注意*）

```
 x1=((-b+sq)/(2*a);// Says "Please place ';' here"
  x2=((-b-sq)/(2*a);// 
```

# java - 如何在java中为设计着色？

> ID：13385793
> 
> 赞同：1
> 
> 时间：2012-11-14T19:20:58.277
> 
> 标签：java, colors, draw, background-color

你好！我有这个问题：我必须用java制作一个程序来设计一个人的形象，我必须画它。我已经编写了设计人类的代码，但我不知道如何用颜色填充形状。我知道我必须使用“java.awt.Color”但我不知道如何。

颜色必须是：图像的背景（黄色），头部（蓝色），手臂和腿（绿色），身体（红色）。

到目前为止，这是我的代码：

```
import javax.swing.*;
import java.awt.*;

public class DrawPanelTest {
    //creates a window to display the drawing
    public static void main(String[] args) {
        // create a new frame to hold the panel
        JFrame application = new JFrame();
        Container pane=application.getContentPane();
        // create a panel that contains our drawing
        DrawPanel panel = new DrawPanel();
        // set the frame to exit when it is closed
        application.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        // add the panel to the frame
        pane.add(panel);
        application.setContentPane(pane);
        // set the size of the frame
        application.setSize(550, 450);
        // make the frame visible
        application.setVisible( true );
    }
} 
```

这是绘制图形的位置：

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JPanel;

public class DrawPanel extends JPanel {

    public void paintComponent( Graphics g ) {
        //draw the human
        g.drawOval(300, 100, 100, 100);
        g.drawRect(300, 200, 100, 100);
        g.drawRect(400,200, 100, 10);
        g.drawRect(200,200, 100, 10);
        g.drawRect(300,300, 10, 100);
        g.drawRect(390,300, 10, 100);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:28:04.763

使用[g.fillOval()](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#fillOval%28int,%20int,%20int,%20int%29)代替 g.drawOval()

[通过g.setColor()](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#setColor%28java.awt.Color%29)设置颜色

关于背景颜色，单击上面的一个链接，搜索术语“背景”并繁荣：[Graphics.clearRect()](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#clearRect%28int,%20int,%20int,%20int%29)

文档说：

> 通过用当前绘图表面的背景颜色填充指定的矩形来清除它。

# java - java彩票程序有点卡住

> ID：13385797
> 
> 赞同：-3
> 
> 时间：2012-11-14T19:21:13.033
> 
> 标签：java, swing

在发布此之前，我确实检查了是否有类似的程序，但找不到与我创建的程序类似的程序。

在完成我的程序的 GUI 方面时，我快要抓狂了。在过去的两天里，我一直在努力完成并试图完成的是创建一个彩票程序，并且在课堂上应该显示一个徽标、一个按钮和一个包含六个数字的文本框。只有在按下按钮时才会生成数字。

我已经完成了程序的功能，但是在 GUI 方面遇到了困难，因为我的讲师没有很好地教我。

任何帮助将不胜感激，因为在编程方面我仍然是新手。

```
import javax.swing.*;
import javax.swing.JFrame;
import java.util.*;

public class LotteryNumbers extends JFrame

{       
        int[] LotteryNumbers = new int[49];
        int i;
        Random rgen = new Random();  

        //Creating an Array of 50 integers
        public void createNumbers()  
        {
            for (i=0; i < LotteryNumbers.length; i++) 
            {   
                LotteryNumbers[i] = i + 1;
            }
        }

        //Shuffling the numbers in the array
        public void shuffleNumbers()
        {
            for (int j=0; j < LotteryNumbers.length; i++) 
            {
                int randomPosition = rgen.nextInt(LotteryNumbers.length);
                int temp = LotteryNumbers[j];
                LotteryNumbers[j] = LotteryNumbers[randomPosition];
                LotteryNumbers[randomPosition] = temp;
            }
        }

        //Sorting the numbers in the array
        public void sortNumbers()
        {
            for(int i=0; i < LotteryNumbers.length-1; i++) 
            {
                for(int j=0; j < LotteryNumbers.length-1-i; j++) 
                {
                    if(LotteryNumbers[j] > LotteryNumbers[j+1]) 
                    {
                        int temp = LotteryNumbers[j];
                        LotteryNumbers[j] = LotteryNumbers[j+1];
                        LotteryNumbers[j+1] = temp;
                    }
                }
            }
        }

        // Printing the numbers out
        public int[] printnumbers( int j, int [] LotteryNumbers)
        {
            for (j = 0; j<= 6 && j >= 1; j++)
            {
                System.out.println("Lotto number: " + j + ":" + LotteryNumbers);
            }

        return LotteryNumbers;
        } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:26:49.743

你必须让你的

```
public class LotteryNumbers { 
```

扩展`JFrame`如下

```
public class LotteryNumbers extends JFrame { 
```

* * *

另外，如果您还没有这样做，我建议您使用一些 IDE（如 Eclipse、Netbeans）。

# ado.net - SqlDataReader 关闭需要 10 多秒 - 为什么？

> ID：13385805
> 
> 赞同：2
> 
> 时间：2012-11-14T19:21:43.717
> 
> 标签：ado.net, sqldatareader

我有一个案例，在非常常规的选择中，对 SqlDataReader.Close() 的调用需要 10 多秒才能返回。唯一不寻常的是 select 返回 20 行，但在这种情况下，没有任何行被读取。

```
DbDataReader reader = (DbDataReader) cmd.ExecuteReader(CommandBehavior.Default);
reader.MoveNext();
var row = de.Current;

// lots of other code that does not touch this.
reader.Close(); 
```

为什么需要这么长时间？更重要的是，我能做些什么来让它更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:33:56.340

我无法找出发生这种情况的原因/原因。因此，在关闭我的对象的调用中，我创建了一个工作线程并关闭数据读取器和连接。然后我立即返回，这样用户就不会看到任何延迟。工作正常。

**更新：**根据[SqlDataReader.Close()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.close.aspx)可以通过在调用 Close 方法之前调用关联 SqlCommand 对象的 Cancel 方法来减少它。h/t [Lingaraj Mishra](http://social.msdn.microsoft.com/profile/lingaraj%20mishra/?ws=usercard-mini)

# html - 更多奇怪的 Firefox 缓存清单行为：重定向到外部域导致 404 失败

> ID：13385806
> 
> 赞同：0
> 
> 时间：2012-11-14T19:21:44.540
> 
> 标签：html, firefox, browser-cache, cache-manifest, html5-appcache

我有一个带有缓存清单的 HTML5/Javascript（服务器上的 PHP/MySQL）应用程序，它在除 Firefox 之外的几乎所有移动和桌面浏览器上运行良好。

当我删除缓存清单时，它在 Firefox 中运行良好。因此，我无法弄清楚 Firefox 中的缓存清单有些奇怪。它正在从缓存中加载文件，即使该文件发送了 Cache-Control: no-store, no-cache 标头。

该文件处理用于获取 LinkedIn 访问令牌的 OAuth 舞蹈，并遵循以下步骤：

1.  该应用程序使用 window.location.replace('file.php') 通过 Javascript 调用文件
2.  file.php 加载并被重定向到 file.php?param=initiate
3.  file.php?param=initiate 加载，从 LinkedIn 获取请求令牌，然后重定向到 LinkedIn 授权页面，然后被重定向到 file.php?param=initiate&otherparameters
4.  file.php?param=initiate&otherparameters 加载，otherparameters 用于从 LinkedIn 获取访问令牌，然后重新加载应用程序，因为它现在具有访问权限。

但是，在 Firefox（Windows 7 上的 16.0.2）上，我得到以下信息：

1.  该应用程序使用 window.location.replace('file.php') 通过 Javascript 调用文件
2.  file.php 加载并被重定向到 file.php?param=initiate（FireBug 显示找到状态 302，响应标头显示位置 /file.php?param=initiate）
3.  file.php?param=initiate 加载，从 LinkedIn 获取请求令牌，但不重定向到 LinkedIn 授权页面：它显示 404 页面（FireBug 显示找到状态 302，响应标头显示位置 https:linkedin.com/身份验证链接，但 Firefox 没有转到 LinkedIn 页面，它对 file.php?param=initiate 发出另一个 GET 请求并从缓存中加载它：状态 200 OK（BF 缓存）并显示 404 页面）。

file.php 不在缓存清单中。

基本上，它不会从步骤 3 转到响应标头中的 Location 应该将其带到 LinkedIn 授权页面，但我不知道为什么不这样做。

有想法该怎么解决这个吗？

如果你想重现这个问题，[这里有一个测试事件的链接](https://4click.net/tech/toronto/ed/11165152)。尝试发送 LinkedIn 连接请求并观看 Firebug。此活动的所有 LinkedIn 个人资料（我的除外）都是虚拟个人资料，因此不必担心向随机陌生人发送 LinkedIn 连接请求。您必须先使用您的电子邮件注册才能获得激活链接，但如果您愿意，可以使用一次性电子邮件地址。

我尝试过的一些事情：

1.  没有缓存清单：这修复了它，但我需要离线功能
2.  发送带有 no-store、no-cache、must-ravalidate、过去过期日期等各种排列的标头。
3.  减少缓存清单中的条目数
4.  SETTINGS 的各种组合：prefer-online、NETWORK：*、NETWORK：https://* 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:54:27.450

我通过重写我的 LinkedIn/OAuth 库解决了这个问题，以便它通过 ajax 完成所有操作，而不是通过 PHP 发送 Location 标头。

在经历了很多挫折之后，我弄清楚了为什么会发生这个问题，所以希望这能帮助其他面临类似困境的人。

**事实证明，缓存清单不允许重定向到外部域** （这可能记录在某处，但是当我搜索解决方案时它没有显示给我）。

部分问题是我不知道重定向导致了问题。我认为这只是缓存清单的奇怪之处。毕竟，它在 Chrome 和 Safari 上运行良好，而且我没有从 Firebug 获得任何有用的调试信息。

[这是一篇关于缓存清单问题的有用文章](http://www.alistapart.com/articles/application-cache-is-a-douchebag/)（此问题被列为问题 #8）。

[这是 HTML 离线规范的链接](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html)（此问题似乎列在第 6.7.6(4) 节中，但该文档非常不透明，我无法判断这是否真的是它所指的内容）。

# jquery - 无法从动态中选择/获取文本 项目

> ID：13385810
> 
> 赞同：0
> 
> 时间：2012-11-14T19:21:54.053
> 
> 标签：jquery, dom, knockout.js

我正在使用 Knockout.js，并且当用户开始在搜索框中输入内容时会出现一个下拉列表（实时过滤）。目前，用户可以在列表中使用箭头并按 Enter 来填充搜索框。

> [**我的个人站点沙箱**](http://jonathonmoore.com/proto/)中有一个实时版本。

但是，我希望用户也能够滚动列表并单击项目。我不太清楚这些列表项在 DOM 中的位置，因为 Knockout.js 会动态地将它们添加进去。

这是有问题的代码的特定部分：

```
<div class="hidden" id='dropdown'>
    <ul id='dropdownList'
        data-bind="template: { name:'objects', foreach:obj }, 
                   click: function(){ $('#search').text(($(this).val());}">
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:37:08.463

看起来它正在使用 listObjItem 类创建列表项，所以你能做这样的事情吗？

```
$(function(){
   $(document).on('click', '.listObjItem', function(){
       $('#search').val($(this).text());
   });
}); 
```

**编辑**

从下面的评论中帮助澄清。现在你的代码看起来像这样。

```
<ul id='dropdownList' data-bind="template: { name:'objects', foreach:obj }, 
            click: function(){ 
                $('.listObjItem').on('click', function(){
                        $('#search').val($(this).text())
                        $('#dropdown').hide();
                        $('#search').focus();
                    ;});
                }"></ul> 
```

我所说的是将代码更改为如下所示。

```
 <ul id='dropdownList' data-bind="template: { name:'objects', foreach:obj }"></ul> 
```

并在结束正文标记之前添加以下内容。

```
<script type="text/javascript">
$(function(){
    $(document).on('click', '.listObjItem', function(){
       $('#search').val($(this).text());
       $('#dropdown').hide();
       $('#search').focus();
   });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:50:28.137

`this`点击处理程序中是模型数据。Knockout 提供事件对象作为第二个参数，然后您可以使用`event.target`：

```
click: function(data,event){ $('#search').text(($(event.target).val());} 
```

# asp.net-mvc - Dataannotations to restrict numbers only using mvc 4

> ID：13385812
> 
> 赞同：0
> 
> 时间：2012-11-14T19:22:02.970
> 
> 标签：asp.net-mvc, asp.net-mvc-4

Can I restrict user to enter only numbers using DataAnnotations?

Below is the property which I have in my Model

```
[Display(Name = "Fiscal Year")]
[Required(ErrorMessage = "Fiscal Year is required")]
public int FiscalYear { get; set; } 
```

Below is the definition which I am using in .chtml (razor view):

```
@Html.TextBoxFor(model => model.project.FiscalYear) 
```

I want to allow users only to enter numbers. Any suggestions?

Thanks, Balaji

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:58:21.063

获取名为 DataAnnotationsExtensions.. 的 Nuget 包，然后像下面这样使用它：

```
 [Integer(ErrorMessage="This is needs to be integer")]
    public int CustomerId { get; set; } 
```

假设您启用了 jQuery 验证插件和不显眼的验证，它将正确地进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:29:59.440

您可以使用正则表达式属性

# c# - WCF HTTPS SSL Self Hosted Cert. How to Get Working Correctly?

> ID：13385817
> 
> 赞同：5
> 
> 时间：2012-11-14T19:22:15.090
> 
> 标签：c#, wcf, iis, ssl, https

I am struggling to convert a silverlight application from HTTP to HTTPS using the WCF and a self signed certificate registered into IIS.

Calls i have made in the Visual Studio 2010 Command Prompt:

```
 makecert -sv SignRoot.pvk -cy authority -r signroot.cer -a
    sha1 -n "CN=Dev Certification Authority" -ss my -sr localmachine    

makecert -iv SignRoot.pvk -ic signroot.cer -cy end -pe -n
    CN="localhost" -eku 1.3.6.1.5.5.7.3.1 -ss my -sr
    localmachine -sky exchange -sp
    "Microsoft RSA SChannel Cryptographic Provider" -sy 12 
```

I have this as the end point (this is the call that still is not HTTP in Fiddler)

```
<!-- Address that the Silverlight clients will connect to -->
<!-- as specified in their web.config -->
<add key="gatewayListeningHttpURI" value="http://localhost:10201/" /> 
```

Current Server Config:

```
<!-- set up binding for duplex service -->
<bindings>
  <customBinding>
    <binding name="customDuplexBinding">
      <pollingDuplex duplexMode="MultipleMessagesPerPoll"
           maxOutputDelay="00:00:01"
   serverPollTimeout="00:01:00"
   inactivityTimeout="02:00:00"
   maxPendingMessagesPerSession="2147483647"
   maxPendingSessions="2147483647" />
      <binaryMessageEncoding>
        <readerQuotas
          maxDepth="2147483647"
          maxStringContentLength="2147483647"
          maxArrayLength="2147483647"
          maxBytesPerRead="2147483647"
          maxNameTableCharCount="2147483647" />
      </binaryMessageEncoding>
      <httpTransport
  maxBufferSize="2147483647"
  maxReceivedMessageSize="2147483647"
  transferMode="StreamedResponse"
            />
    </binding>
  </customBinding>

</bindings>

<behaviors>
  <endpointBehaviors>
    <!-- For Policy Service -->
    <behavior name="webHttpEndpointBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>

  <serviceBehaviors>
    <behavior name="sb">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <!-- This will solve a bug that happens if too many items are sent at once from the gateway to the client -->
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      <serviceThrottling
      maxConcurrentCalls="200"
      maxConcurrentSessions="200"
      maxConcurrentInstances="200" />
    </behavior>
  </serviceBehaviors>
</behaviors>

<services>
  <service name="ME.Streets.WebGateway.DuplexService.DuplexService"
     behaviorConfiguration="sb">
    <endpoint
       address="basic"
       binding="customBinding"
       bindingConfiguration="customDuplexBinding"
       contract="ME.Streets.WebGateway.DuplexService.Interface.IDuplexServiceContract">
    </endpoint>
    <endpoint
        address=""
        binding="webHttpBinding"
        behaviorConfiguration="webHttpEndpointBehavior"
        contract="ME.Streets.WebGateway.DuplexService.Interface.IPolicyRetriever"/>
    <endpoint
        address="mex"
        binding="mexHttpBinding"
        contract="IMetadataExchange"/>
  </service>
</services> 
```

Current Client Config:

```
private DuplexServiceContractClient CreateDuplexServiceClient(EndpointAddress endPoint)
    {
        PollingDuplexBindingElement pollingDuplexBindingElement = new PollingDuplexBindingElement();
        pollingDuplexBindingElement.DuplexMode = PollingDuplexMode.MultipleMessagesPerPoll;

        #if DEBUG
        pollingDuplexBindingElement.ClientPollTimeout = TimeSpan.FromMinutes(15);
        pollingDuplexBindingElement.InactivityTimeout = TimeSpan.FromMinutes(14);
        #else
        pollingDuplexBindingElement.ClientPollTimeout = TimeSpan.FromMinutes(60);
        pollingDuplexBindingElement.InactivityTimeout = TimeSpan.FromMinutes(60);
        #endif

        HttpsTransportBindingElement httpsTransportBindingElement = new HttpsTransportBindingElement();
        httpsTransportBindingElement.MaxBufferSize = int.MaxValue;
        httpsTransportBindingElement.MaxReceivedMessageSize = int.MaxValue;
        httpsTransportBindingElement.TransferMode = TransferMode.StreamedResponse;

        CustomBinding binding = new CustomBinding(
            pollingDuplexBindingElement,
            new BinaryMessageEncodingBindingElement(),
        httpsTransportBindingElement);

        var dscc = new DuplexServiceContractClient(binding, endPoint);

        dscc.InnerChannel.OperationTimeout = TimeSpan.FromMinutes(5);

#if DEBUG
        dscc.InnerChannel.OperationTimeout = TimeSpan.FromMinutes(15);
#endif
        return dscc;
    } 
```

I have deployed my silverlight applicatoin into IIS and have added the HTTPS protocol to it so that i can reach it by adding HTTPS in front of the web address.

Problem is still when i log onto the https site (https://localhost/FleetNew), I Still recieve the error of "Display MIxed Content"

When i watch in fidler, it is the call localhost:10201 that is the unsecure http call.

my netsh http show sslcert command brings me this:

```
IP:port                 : 0.0.0.0:10201
Certificate Hash        : 0fb891e03c857d1c50b63163e5a0b999ed757ea1
Application ID          : {3d5900ae-111a-45be-96b3-d9e4606ca793}
Certificate Store Name  : (null)
Verify Client Certificate Revocation    : Enabled
Verify Revocation Using Cached Client Certificate Only    : Disabled
Usage Check    : Enabled
Revocation Freshness Time : 0
URL Retrieval Timeout   : 0
Ctl Identifier          : (null)
Ctl Store Name          : (null)
DS Mapper Usage    : Disabled
Negotiate Client Certificate    : Disabled

IP:port                 : 0.0.0.0:443
Certificate Hash        : 0fb891e03c857d1c50b63163e5a0b999ed757ea1
Application ID          : {4dc3e181-e14b-4a21-b022-59fc669b0914}
Certificate Store Name  : MY
Verify Client Certificate Revocation    : Enabled
Verify Revocation Using Cached Client Certificate Only    : Disabled
Usage Check    : Enabled
Revocation Freshness Time : 0
URL Retrieval Timeout   : 0
Ctl Identifier          : (null)
Ctl Store Name          : (null)
DS Mapper Usage    : Disabled
Negotiate Client Certificate    : Disabled 
```

Please help me configure this correctly so that the call to locahost:20102 will work over ssl and HTTPS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:29:38.820

好吧，据我所知，您缺少一些使用 SSL 托管 WCF 自托管服务所需的 HTTPS 元数据端点和行为配置。执行所需操作的主要步骤如下：

1.  使用与端点 URL 的域名匹配的通用名称值创建自签名证书（用于测试目的）（最好使用您的机器名称）
2.  使用 netsh.exe 使用其指纹将端口与您的 SSL 证书绑定。
3.  将 WCF .config 文件配置为具有所需的 SSL 设置。

这是一个相当漫长的过程，因此我没有尝试在这里记录每一步，而是在博客文章中详细介绍了使用 SSL 获取 WCF 自托管服务所需的内容。这应该可以帮助您看到一个可行的解决方案，然后您可以将其应用于您的项目：

[通过自托管 WCF 服务应用和使用 SSL 证书](http://allen-conway-dotnet.blogspot.com/2012/02/applying-and-using-ssl-certificate-with.html)

# plugins - 加载页面前自动更新数据库

> ID：13385819
> 
> 赞同：0
> 
> 时间：2012-11-14T19:22:21.770
> 
> 标签：plugins, joomla, joomla2.5

我想在加载页面的其余部分之前自动更新我数据库中某些表中的（例如日期或即将发生的事件等）。例如，每周一有人第一次访问该网站。在我使用 joomla 之前，我有一个 php 脚本，我在每个页面的开头都包含了它，并且效果很好。但是对于 joomla，我不知道在哪里插入（调整后的）脚本。我应该创建一个（内容）插件吗？但是我将在哪里/如何触发它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T18:32:54.520

我通过使用一个 cron 作业来让它工作，该作业调用一个专门为此任务制作的视图。使用 URL，`&format=raw`这样就不会加载不必要的 joomla html

# asp.net-mvc-4 - How can I prevent default binders for complex types?

> ID：13385820
> 
> 赞同：6
> 
> 时间：2012-11-14T19:22:21.930
> 
> 标签：asp.net-mvc-4, model-binding

I have a model binder for a custom type `Money`. The binder works fine, but the built in binding/validation is kicking in and marking data as invalid.

My binder looks like this:

```
public class MoneyModelBinder : DefaultModelBinder 
{
    protected override void OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var money = (Money)bindingContext.Model;
        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".Amount").AttemptedValue;
        var currencyCode = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".Iso3LetterCode").AttemptedValue;

        Money parsedValue;
        if (String.IsNullOrEmpty(value))
        {
            money.Amount = null;
            return;
        }

        var currency = Currency.FromIso3LetterCode(currencyCode);

        if(!Money.TryParse(value, currency, out parsedValue))
        {
            bindingContext.ModelState.AddModelError("Amount", string.Format("Unable to parse {0} as money", value));
        }
        else
        {
            money.Amount = parsedValue.Amount;
            money.Currency = parsedValue.Currency;
        }
    }
} 
```

When a user types a value like "45,000" into a textbox my binder correctly picks up the value, parses it and sets it into the model.

The problem I have, is that the default validation then kicks in a states `The value '45,000' is not valid for Amount`, which as it's a decimal type makes sense, but I've already bound the data. How can I prevent the default binders binding data which I've already handled?

I'm not sure if this make any difference, but I'm using `Html.EditorFor` with and editor that looks like this:

```
@model Money

<div class="input-prepend">
  <span class="add-on">@Model.Currency.Symbol</span>
    @Html.TextBoxFor(m => m.Amount, new{
                            placeholder=string.Format("{0}", Model.Currency), 
                            @class="input-mini",
                            Value=String.Format("{0:n0}", Model.Amount)
                            })
    @Html.HiddenFor(x => x.Iso3LetterCode)
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T18:53:34.443

您可以将`Amount`属性标记为只读：

```
[ReadOnly(true)]
public decimal? Amount { get; set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T02:02:14.787

如果您的 ModelBinder 代码位于同一个项目中，您可以将属性设置器访问修饰符更改为内部。这样 DefaultModelBinder 看不到 setter。

```
public class MyViewModel{
 public Money Stash { get; internal set; }
} 
```

另一种方法可能是简单地使用一个字段

```
public class MyViewModel{
 public Money Stash;
} 
```

这背后的原因是 DefaultModelBinder 只绑定读写属性。上述两个建议都将阻止满足这些条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T05:36:04.703

根据我的经验，有几种方法可以做到这一点（例如，允许绑定默认活页夹，但清除属性上的错误），但是这样做的方式可以让任何维护代码的人清楚地知道你的意图是覆盖不良行为，即：

```
protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
{
    if (propertyDescriptor.Name != "Amount")
    {
        base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
    }
} 
```

在此处的 else 块中实际执行自定义绑定也可能有意义，但这由您决定。

# javascript - Import verb table data into html/css table

> ID：13385826
> 
> 赞同：1
> 
> 时间：2012-11-14T19:23:02.827
> 
> 标签：javascript, php, import

I'm creating a language learning website and in one section I'd like to have many pages each with a table of verb conjugations. It'll take ages to do each one manually, so I'd like to know if there's a way of creating a datafile that can be read from an html page, perhaps javascript or php, and data imported into the table.

Each verb would have its own datafile, which would contain an array that ideally looked like this:

> pren,prenn,av,ys,yn,owgh,ons,ir,is,sys,as,syn,sowgh,sons,as,en,es,a,en,ewgh,ens,ys,sen,ses,sa,sen,sewgh,sens,sys,iv,y,o,yn,owgh,ons,er,en,es,a,en,ewgh,ens,ys,ys

Then in the table I would specify which datafile to import, and call different entries in the array at the appropriate places to build up a verb table, so 1 and 3 would give prenav, 1 and 4 would give prenys, etc.

Does anyone know how this could be done?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:28:12.613

您可以在 PHP 中使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)和的组合来执行此操作[`explode`](http://php.net/manual/en/function.explode.php)。

`file_get_contents`将读取数据文件，您可以将其存储在字符串中，如下所示：

```
$datafile = file_get_contents('pren.txt'); 
```

将数据文件保存在字符串变量中后，可以使用`explode`将其拆分为数组，如下所示：

```
$datafileArray = explode(',', $datafile); 
```

现在您可以使用数字索引访问数组的成员，尽管需要注意的一点是它是从零开始的索引。所以它会是 0 和 2 让你'prenav'，而不是 1 和 3：

```
echo $dataFileArray[0] . $dataFileArray[2]; // "prenav"
echo $dataFileArray[0] . $dataFileArray[3]; // "prenys" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:40:33.230

假设每个动词的文件名与动词同名，文件直接在工作中，动词存储在 $verbs 中，你可以这样做：

```
<table>
<tr><td>Verb</td><td>Conjugation</td></tr>
<?php
foreach ($verbs as $verb) {
$conjugations = file_get_contents($verb);
echo "</tr><td>$verb</td><td>$conjugations</td><tr>";
}
?>
</table> 
```

# ios - UIScrollView and Tabbar

> ID：13385829
> 
> 赞同：0
> 
> 时间：2012-11-14T19:23:19.673
> 
> 标签：ios

I have a UIScrollView which contains many different labels and other stuff. I scroll the uiScrollView to the bottom and then change the tab using tabbar at the bottom which is always visible. Then I switch back to the same view which contains UIScrollView. When I try to scroll to the top it stops in the middle. How can I reset the UIScrollView or maintain the scrolled position.

I am using iOS 6 for iPhone.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:30:03.377

```
setContentOffset:animated: 
```

这将设置与接收者原点相对应的内容视图原点的偏移量。

# c# - OpenPop.NET - modifies a character in email

> ID：13385831
> 
> 赞同：2
> 
> 时间：2012-11-14T19:23:35.507
> 
> 标签：c#, vb.net, pop3, openpop

I'm using the OpenPop library to read emails. I have the problem that when reading the body of the Email, the library modifies a character. See the following example:

Email body:

> DiseÃƒÂ±o

Code c#:

```
OpenPop.Pop3.Pop3Client objPOP3 = new OpenPop.Pop3.Pop3Client();
OpenPop.Mime.Message message = default(OpenPop.Mime.Message);
OpenPop.Mime.MessagePart plainTextPart = default(OpenPop.Mime.MessagePart);
string bodyMailTxt = "";

objPOP3.Connect(Host, Port, UseSSL);
objPOP3.Authenticate(User, Password);

message = objPOP3.GetMessage(1);
plainTextPart = message.FindFirstPlainTextVersion();
bodyMailTxt = plainTextPart.GetBodyAsText(); 
```

Code vb:

```
Dim objPOP3 As New OpenPop.Pop3.Pop3Client
Dim message As OpenPop.Mime.Message
Dim plainTextPart As OpenPop.Mime.MessagePart
Dim bodyMailTxt As String = ""

ObjPOP3.Connect(Host, Port, UseSSL)
ObjPOP3.Authenticate(User, Password)

message = objPOP3.GetMessage(1)
plainTextPart = message.FindFirstPlainTextVersion()
bodyMailTxt = plainTextPart.GetBodyAsText() 
```

`bodyMailTxt` value is "DiseÃfÂ±o", which replaced the **ƒ** (latin small letter F whit hook) for **f** (latin small letter F).
I'd have to do to make this not happen?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:56:15.640

从`OpenPop.Mime.MessagePart`类的源代码来看，它看起来像这样`plainTextPart.GetBodyAsText()`获取文本 `return BodyEncoding.GetString(Body)`，其中`BodyEncoding`是类型的公共属性，`Encoding`并且`Body`是包含消息的原始字节数组的公共属性。

我不知道，也无法真正测试，但可能是消息用于解码文本的默认编码与用于发送文本的编码不同。在调用该方法之前，您可以通过尝试`plainTextPart.Encoding = Encoding.ASCII`、 或 `plainTextPart.Encoding = Encoding.UTF8`或来查看得到的结果。`plainTextPart.Encoding = Encoding.Unicode``.GetBodyAsText()`

链接到 MessagePart 源文件：

[http://hpop.svn.sourceforge.net/viewvc/hpop/trunk/OpenPop/Mime/MessagePart.cs?revision=377&view=markup](http://hpop.svn.sourceforge.net/viewvc/hpop/trunk/OpenPop/Mime/MessagePart.cs?revision=377&view=markup)

# android - 屏幕关闭后，相机预览完全黑屏，屏幕打开

> ID：13385839
> 
> 赞同：1
> 
> 时间：2012-11-14T19:23:53.433
> 
> 标签：android, camera, surfaceview

我正在使用 Android SDK 附带的 API 演示中的 CameraPreview。在相机预览运行时，如果我关闭屏幕并再次打开，相机预览会完全变黑。设备的相机应用程序以某种方式设法恢复相机预览，因此必须有一种方法。

并非我尝试过的所有设备都表现出这种行为。我无法确认，但似乎操作系统版本很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:26:09.527

您需要在暂停/恢复中释放并重新获取相机。这是我的 CameraView 小部件中的一些代码：

```
public void onPause(){
    if(camera != null){
        camera.release();
        camera = null;
    }
}

public void onResume(){
    //Need to release if we already have one, or we won't get the camera
    if(camera != null){
        camera.release();
        camera = null;          
    }
    try {
        camera = Camera.open(); 
    }
    catch (Exception e){
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T05:03:09.427

对我有帮助的是 onResume() 中的 setContentView()。

它可以是

```
protected void onResume() {
    super.onResume();
    setContentView(R.layout.xxx);
    // ...
} 
```

或者

```
private View cachedContentView;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    cachedContentView = doCreateContentView(getLayoutInflater());
    // ...
}
protected void onResume() {
    super.onResume();
    setContentView(cachedContentView);
    // ...
} 
```

他们都工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T12:27:40.457

我有同样的问题。也许，这不是最好的解决方案，但它对我有用。在 onPause() 方法中重新启动您的相机活动。

```
private boolean isBackPreesed = false;

@Override
public void onPause() {
    if (camera != null) {
        camera.release();
        camera = null;
    }

    if (!isBackPreesed) {
        finish();
        Intent restart = new Intent(this, this.getClass());
        startActivity(restart);
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        isBackPreesed = true;
    }       
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-29T05:28:37.580

我的解决方案是在surfaceDestroyed 方法中释放相机，而不是在onPause 方法中，然后在surfaceCreated 方法中重新启动相机。结果很好。

# environment-variables - 正确设置 JAVA_HOME 路径以复制文件并在 XP 中本地保存

> ID：13385840
> 
> 赞同：1
> 
> 时间：2012-11-14T19:23:55.850
> 
> 标签：environment-variables, command-prompt, java-home

这可能是一个简单的问题，但我正在尝试将我的 java_home 环境变量设置为我的 JDK 目录，因此我可以在命令提示符下运行命令来复制 WSDL 文件并将其保存在本地。我目前将我的 JAVA_HOME 路径设置为我的 JDK 安装目录，但是当我在命令提示符下运行命令时，我仍然收到错误

```
Please first set JAVA_HOME environment variable, it's jdk installation directoy 
```

我试过关闭控制台，重新输入 java_home 路径，然后再试一次，但错误仍然存​​在。设置路径后我重新启动了我的机器，但没有运气。我查看了其他帖子，但看不到任何到目前为止有效的信息。我正在运行 XP。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:30:49.860

原来它不喜欢路径中的空格，所以我用 'Progra~1' 替换了 'Program Files'，所以完整路径读取

`C:\Progra~1\Java\jdk1.6.0_07`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:35:57.903

将 JAVA_HOME 添加到系统变量。

这些说明可能*略有*偏差，我已经有一段时间没有使用 XP 了。

1.  打开 Windows 资源管理器
2.  右键单击“我的电脑”
3.  选择“属性”
4.  转到“高级”选项卡。
5.  单击环境变量
6.  单击“新建...”（或找到现有的 JAVA_HOME）
7.  设置你的 JAVA_HOME

注意：您也可以通过控制面板进入系统属性

# perl - 升级 LWP “证书验证失败”后脚本中断

> ID：13385846
> 
> 赞同：21
> 
> 时间：2012-11-14T19:24:29.030
> 
> 标签：perl, www-mechanize, lwp

我有很多脚本，其中大部分基于`WWW::Mechanize`从可通过 HTTPs 访问的杂项硬件中刮取数据。在升级了我的大部分 perl 安装及其模块后，所有使用 HTTPS:// 的脚本都因以下原因而中断`"certificate verify failed"`

这是因为较新版本的 LWP 对证书进行了适当的检查，以及 `dies`是否存在不匹配的情况。

就我而言，由于这种情况，预计证书身份验证会失败，因此我需要找到一种彻底规避此检查的方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-14T19:33:56.430

假设我想告诉你一些事情，我不想让其他人知道。我们会安排一个密码，我会用它来加密消息，然后我会将消息发送给你。

如果我不能确定向我提供密码和加密信息的人是你怎么办？那么任何数量的人都可以简单地冒充您，而加密将是徒劳的。直到最近，这还是 LWP 的 HTTPS 支持状态。

现在，LWP 实际上会检查它正在与谁交谈，除非您要求 LWP 像以前那样行事。你可以这样做：

```
my $ua = LWP::UserAgent->new(
   ssl_opts => { verify_hostname => 0 },
); 
```

如果您想影响脚本中的所有 LWP::UserAgent 实例而不在所有地方指定选项，您可以将以下内容添加到您的脚本中

```
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0; 
```

或者您可以按如下方式启动您的脚本：

```
PERL_LWP_SSL_VERIFY_HOSTNAME=0 script.pl 
```

最后，如果您希望 LWP 始终不安全，您可以将以下内容添加到您的登录脚本中：

```
export PERL_LWP_SSL_VERIFY_HOSTNAME=0 
```

但是，**我不推荐以上任何一种**。更好的选择是为您正在与之通信的主机提供证书。[（这相当于在 Firefox中](http://search.cpan.org/perldoc?LWP::UserAgent)添加异常，如果你明白我的意思的话。）请参阅`$ua->ssl_opts`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-18T20:20:40.327

对我来说，使用：

```
my $ua = LWP::UserAgent->new(
  ssl_opts => { verify_hostname => 0 },
); 
```

产量

> 不推荐对客户端使用 SSL_VERIFY_NONE 的 SSL_verify_mode 的默认值！请将 SSL_verify_mode 设置为 SSL_VERIFY_PEER 以及 SSL_ca_file|SSL_ca_path 以进行验证。如果您真的不想验证证书并保持连接对中间人攻击开放，请在您的应用程序中将 SSL_verify_mode 显式设置为 SSL_VERIFY_NONE。

使用它没有给出任何警告：

```
my $ua = LWP::UserAgent->new(
  ssl_opts => { SSL_verify_mode => 'SSL_VERIFY_NONE'},
); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-14T19:24:29.030

我在我的代码前面加上：

```
$ENV{'PERL_LWP_SSL_VERIFY_HOSTNAME'} = 0; 
```

这导致脚本以干净简单的方式绕过检查。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-09T20:48:24.060

@ikegami 为您为什么不想禁用 SSL 主机名验证提供了一个很好的论据，但没有直接提及如何避免它。

如果您使用 CA 签名证书与公共系统通信，则需要将 LWP 指向您的发行版的根证书集合。在基于 Debian 的系统（Ubuntu 等）下，它保存在`/etc/ssl/certs/`.

```
BEGIN {
    $ENV{HTTPS_CA_DIR} = '/etc/ssl/certs'
} 
```

如果您使用自签名证书与自己的服务器通信，则可以在客户端上保存该证书的副本，并将脚本指向该特定文件。

```
BEGIN {
    $ENV{HTTPS_CA_FILE} = '/path/to/my/server-certificate.crt'
} 
```

您可以在运行脚本之前在环境中设置这些（例如，从您的 shell 中导出它们），或者您可以将设置直接应用到您的 UserAgent 对象。有关详细信息，请参阅[LWP::UserAgent 文档；](http://search.cpan.org/~mschilli/libwww-perl-6.08/lib/LWP/UserAgent.pm)搜索`ssl_opts`（大约在页面的中间）。

# jquery - IE 中的 Superfish 3 级菜单部分“在顶部”，部分“在底部”

> ID：13385849
> 
> 赞同：0
> 
> 时间：2012-11-14T19:24:35.653
> 
> 标签：jquery, superfish, css

我有一个超级鱼菜单，在 Chrome、Firefox 和 Safari 中运行良好，但在 IE 中不适用（我知道，我知道......常见问题）。我的问题是我的第三级菜单“部分”出现在第二级菜单的顶部，但不是全部。

边框和背景颜色出现在 2 级菜单的顶部，但来自 2 级的文本本身“渗透”并与 3 级菜单混合显示。

这是几个屏幕截图：

IE：

![在此处输入图像描述](../Images/5c93b555a14c4c919086ea1e06c41132.png)

铬合金：

![在此处输入图像描述](../Images/4b74261a071140a7c174b9b2a26e702b.png)

我可以使背景颜色完全不同（例如红色/蓝色），并显示它们正确地“重叠”在一起——这里它们只是稍微深一点的灰色阴影。

我不知道在哪里查看我的 CSS 文件，这里是：http: [//www.willoughby-ind.com/desktopmodules/az.dnnmenu/templates/willoughby/superfish.css](http://www.willoughby-ind.com/desktopmodules/az.dnnmenu/templates/willoughby/superfish.css)

还有我的实际网站，在这里： http: [//www.willoughby-ind.com](http://www.willoughby-ind.com)

任何援助将不胜感激。我花了好几天才走到这一步，我不知道我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:53:34.523

你有没有在你的`iehacks.css`：

```
.sf-menu li {
    z-index:999;
} 
```

将其更改为低于您的第三级菜单 z-index 的值应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:05:47.617

我的解决方案没有产生我想要的结果，但至少文本不再混乱。现在 IE 在二级菜单中弹出第 3 级菜单 - 而不是在其正下方的一侧。不完美，但我认为它是可用的。

我将以下内容放入我的 iehacks.css 文件中：

```
ul.sf-menu li ul li ul li
{
    z-index: 30;
     position: fixed;}

ul.sf-menu ul ul
{ z-index: 40;
  position: fixed;
} 
```

![在此处输入图像描述](../Images/5db69ec5058c4d5c340c2be9865183f4.png)

# c - 如何在c中睡觉

> ID：13385850
> 
> 赞同：7
> 
> 时间：2012-11-14T19:24:36.177
> 
> 标签：c, sleep

> **可能重复：**
> [为什么 printf 在调用后不刷新，除非换行符在格式字符串中？](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)

当我运行类似的东西时

```
for (i = 1; i <= 10; i++) {
    sleep(1);
    printf(".");
} 
```

那么我期望的是每秒一个点十次。我得到的是十秒后的十个点。为什么会这样，我如何让程序每秒（或不同的时间间隔）实际打印一个点（或做其他事情）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T19:29:03.923

正在缓冲数据，您可以使用以下`printf()`命令强制它刷新该数据`fflush(stdout)`：

```
for (i = 1; i<=10; i++) 
{  
    sleep(1); 
    printf("."); 
    fflush(stdout);
} 
```

# asp.net - 记住我在对话框登录弹出窗口中不起作用

> ID：13385855
> 
> 赞同：1
> 
> 时间：2012-11-14T19:25:00.573
> 
> 标签：asp.net, login, asp.net-mvc-4, modal-dialog, httpcookie

我正在使用 MVC4 - 剃须刀引擎。我在控制器中使用模式对话框显示登录视图我使用“FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe)”来设置cookie。当我使用“/Account/LogOn”页面直接登录时，一切正常，如果用户选择“记住我”选项，则用户名/密码字段会正确填充。但是当我使用模式对话框显示登录视图时，它不起作用，并且用户名/密码不会从 cookie 中填写。

请让我知道如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:28:25.277

您似乎很困惑：“记住我”复选框并不是指自动填写的用户名和密码字段，而是实际上指的是身份验证 cookie 的生命周期：默认情况下，当用户关闭浏览器窗口时 cookie 将过期（导致他们重新输入他们的详细信息）。选择此选项后，身份验证 cookie 将保持不变，并且用户将在不同的浏览器会话之间保持登录状态。

当浏览器支持时，用户的用户名和密码会自动输入到表单字段中，这不是 Web 应用程序的功能（这也是不可能的，因为应用程序永远不能访问用户的纯密码，也不应该存储在曲奇饼）。这就是“您希望 Firefox 记住您在此站点的用户名和密码吗？” 提示是为了。

我同意这个术语令人困惑——“记住我”可以指浏览器记住的登录详细信息，也可以指客户端上保存的身份验证 cookie。我认为正确的解决方案是将语言从“记住我”更改为“让我在这台计算机上登录”。它更冗长，但更准确。

# linux - Linux：电源故障输入？

> ID：13385859
> 
> 赞同：0
> 
> 时间：2012-11-14T19:25:27.797
> 
> 标签：linux, interface, embedded-linux

我们正在开发一种新的嵌入式 Linux 板。我想要的一项功能是能够在断电时收到通知并进行安全关机。Linux 中是否有任何标准机制来指示电源故障事件？不希望占用完整的串行线路来处理此问题。

我们正在开发定制电源板，因此可以选择构建小型 UPS 之类的电路。问题是该电路如何告诉 Linux 电源出现故障？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:51:30.920

查看[NUT](http://www.networkupstools.org/)网络 UPS 工具。它可能已经为您用作基本操作系统的 Linux 发行版打包。

[如果您的外部板可以与现有的触点闭合驱动程序](http://www.networkupstools.org/docs/developer-guide.chunked/ar01s04.html#contact-closure)通信，则您可以按原样使用 NUT 。

触点闭合接口只适用于少量信息；旗帜，如果你愿意的话。“掉电”、“电池充电失败”等等。如果您需要从电源板返回更多信息，您可以[克隆](http://www.networkupstools.org/ups-protocols.html)现有的智能 UPS 协议。如果由于某种原因您不得不重新发明轮子，您可以为您的自定义协议[编写一个 NUT 驱动程序。](http://www.networkupstools.org/docs/developer-guide.chunked/ar01s04.html)

您会发现大多数智能 UPS 协议都使用 RS-232 串行或 USB，但我从您的问题中得到了定制的嵌入式 Linux 氛围。您可能想改用 I²C 或 SPI，因为您的微控制器可能已经有 I/O 引脚。

我希望您清楚为什么这是一个好主意，因为您已经在 Linux 之上构建：NUT 是好的、稳定的、可用的、免费的基础架构，就像 Linux 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:37:08.153

我为一台没电的 Linux 机器做了类似的事情：

简单地说：两个数字电流表，一个在电池和Linux盒子之间，一个在电池和外部电源之间。这些再次通过两个串行端口连接到机器。当外部电流表的读数比内部电流表的读数低得多（超过电池充满电的结果）时，机器上的 cron 作业将执行关机。是的，如果它是基于旧笔记本电脑或包含电池的东西，这可能会以更简单的方式完成，但这是很容易获得废弃笔记本电脑的方式:)

在我目前的工作中，我们的 Linux 系统运行在一个经常会出现电源故障的环境中。实际上并不需要安全关机，因为 CF 卡包含文件系统，然后以只读模式启动。然后所有的东西都被读入 RAM 磁盘，因此 CF 卡不会发生写入。但是，这样您显然会失去在两次启动之间进行持久存储的能力。

# python - 在 Pandas 中解析 csv 文件时，如何从字符串中删除多余的空格？

> ID：13385860
> 
> 赞同：62
> 
> 时间：2012-11-14T19:25:28.740
> 
> 标签：python, parsing, pandas

我有以下名为“data.csv”的文件：

```
 1997,Ford,E350
    1997, Ford , E350
    1997,Ford,E350,"Super, luxurious truck"
    1997,Ford,E350,"Super ""luxurious"" truck"
    1997,Ford,E350," Super luxurious truck "
    "1997",Ford,E350
    1997,Ford,E350
    2000,Mercury,Cougar 
```

我想将其解析为 pandas DataFrame，以便 DataFrame 如下所示：

```
 Year     Make   Model              Description
    0  1997     Ford    E350                     None
    1  1997     Ford    E350                     None
    2  1997     Ford    E350   Super, luxurious truck
    3  1997     Ford    E350  Super "luxurious" truck
    4  1997     Ford    E350    Super luxurious truck
    5  1997     Ford    E350                     None
    6  1997     Ford    E350                     None
    7  2000  Mercury  Cougar                     None 
```

我能做的最好的事情是：

```
 pd.read_table("data.csv", sep=r',', names=["Year", "Make", "Model", "Description"]) 
```

这让我：

```
 Year     Make   Model              Description
 0  1997     Ford    E350                     None
 1  1997    Ford     E350                     None
 2  1997     Ford    E350   Super, luxurious truck
 3  1997     Ford    E350  Super "luxurious" truck
 4  1997     Ford    E350   Super luxurious truck 
 5  1997     Ford    E350                     None
 6  1997     Ford    E350                     None
 7  2000  Mercury  Cougar                     None 
```

我怎样才能得到没有这些空格的 DataFrame？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-14T19:35:40.043

您可以使用转换器：

```
import pandas as pd

def strip(text):
    try:
        return text.strip()
    except AttributeError:
        return text

def make_int(text):
    return int(text.strip('" '))

table = pd.read_table("data.csv", sep=r',',
                      names=["Year", "Make", "Model", "Description"],
                      converters = {'Description' : strip,
                                    'Model' : strip,
                                    'Make' : strip,
                                    'Year' : make_int})
print(table) 
```

产量

```
 Year     Make   Model              Description
0  1997     Ford    E350                     None
1  1997     Ford    E350                     None
2  1997     Ford    E350   Super, luxurious truck
3  1997     Ford    E350  Super "luxurious" truck
4  1997     Ford    E350    Super luxurious truck
5  1997     Ford    E350                     None
6  1997     Ford    E350                     None
7  2000  Mercury  Cougar                     None 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-09-21T21:26:27.990

添加参数`skipinitialspace=True`为[`read_table`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_table.html)我工作。

所以试试：

```
pd.read_table("data.csv", 
              sep=r',', 
              names=["Year", "Make", "Model", "Description"], 
              skipinitialspace=True) 
```

同样的事情在`pd.read_csv()`.

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-11-14T19:29:04.327

好吧，空白在您的数据中，因此如果不读取空白就无法读取数据。但是，在您读完之后，您可以通过执行（例如，您的数据框在`df["Make"] = df["Make"].map(str.strip)`哪里）来去除空格`df`。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-09-15T14:58:36.993

我没有足够的声誉来发表评论，但是如果您有 NaN 值，上面建议使用该`map`函数的答案`strip`将不起作用，因为 strip 仅适用于字符，而 NaN 是浮点数。

我使用了一个内置的 pandas 函数来执行此操作： 你的数据框`pd.core.strings.str_strip(df['Description'])`
在哪里`df`。就我而言，我在一个大约 120 万行的数据帧上使用了它，而且速度非常快。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-02-28T04:32:14.867

我不相信 Pandas 在发布这个问题时支持这一点，但最直接的方法是`sep`在`read_csv`. 所以类似下面的东西应该适用于这个问题。

```
table = pd.read_table("data.csv", sep=' *, *') 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-04-23T07:31:01.327

[read_table](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_table.html)已**弃用**，这是文档中显示的消息。

> 自 0.24.0 版起已弃用。
> 
> 改用[pandas.read_csv()](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html)，如有必要，传递 sep='\t' 。

因此，使用**read_csv**您可以为`sep`参数传入一个正则表达式，您可以在其中将分隔符指定为

```
sep="\s*,\s*" 
```

**任意数量的空格，然后是分隔符，然后是任意数量的空格**，这将确保所有前导和尾随空格也被选为分隔符块，从而删除数据两侧的空格.

正则表达式详细信息如下：

```
\s -> white-space
* -> any number (zero or many)
, -> no meaning, direct character match 
```

所以，正则表达式`\s*,\s*`代表`white-space[any number] match a comma and white-space[any number]`.

如果您的分隔符不是逗号`,`，则将上述表达式中的替换为您的分隔符。例如：`\s*;\s*`如果`;`是你的分隔符。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-08-18T21:08:27.723

这是一个遍历每一列并应用的函数`pd.core.strings.str_strip`：

```
def df_strip(df):
  df = df.copy()
  for c in df.columns:
    if df[c].dtype == np.object:
      df[c] = pd.core.strings.str_strip(df[c])
    df = df.rename(columns={c:c.strip()})
  return df 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-05-02T18:46:24.057

str.strip() 函数在 Series 上运行得非常好。因此，我将包含空格的数据框列转换为系列，使用 str.strip() 函数去除空格，然后将转换后的列替换回数据框。下面是示例代码。

```
import pandas as pd
data = pd.DataFrame({'values': ['   ABC   ', '   DEF', '  GHI  ']})
new = pd.Series([])
new = data['values'].str.strip()
data['values'] = new 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-19T21:59:44.500

对我来说最好的方法是

```
def read_csv_regex(data, date_columns=[]):
    df = pd.read_csv(data, quotechar='"', parse_dates=date_columns)

    # remove front and ending blank spaces
    df = df.replace({"^\s*|\s*$":""}, regex=True) 

    # if there remained only empty string "", change to Nan
    df = df.replace({"":np.nan}) 
    return df 
```

您不需要编写转换器函数并将其设置为每一列，它适用于头部和尾部空间，并且现在与 regexp sep 不同的是配额问题。

见[https://towardsdatascience.com/dealing-with-extra-white-spaces-while-reading-csv-in-pandas-67b0c2b71e6a#9281](https://towardsdatascience.com/dealing-with-extra-white-spaces-while-reading-csv-in-pandas-67b0c2b71e6a#9281)

# android - AndEngine 片段

> ID：13385861
> 
> 赞同：0
> 
> 时间：2012-11-14T19:25:32.260
> 
> 标签：android, andengine

我刚开始使用 AndEngine，我想知道是否有人可以帮助我创建两个片段来分割屏幕。我尝试在 AndEngine 中使用分屏功能，但这只是复制屏幕。我想创建两个独立运行的一半。左边的屏幕是一个可滚动的菜单类型屏幕，带有按钮，可以改变触摸在右边屏幕上的作用。

所以我一直在尝试做的是设置两个片段。一个运行普通视图，另一个运行 AndEngine。到目前为止，我还没有让它工作。

有没有人知道如何编码或有更好的建议来实现相同的结果？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:06:29.390

如果您希望能够在屏幕上设置按钮，您最好使用 HUD（平视显示器）。您只需描述按钮的功能并将它们添加到 HUD 中。HUD实现示例：

```
HUD hud = new HUD();
getEngine.getCamera().setHUD(hud);
hud.attachChild(your_button); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:29:17.897

我不确定，也许这个问题已经在 AndEngine 中实现了，但我发明了解决方法：

```
Scene childScene = new Scene();
childScene.attachChild(your menu element sprite with onAreaTouched);
... here will be attached all other menu elements.
childScene.setBackgroundEnabled(false); // to make transparent background
mainScene.setChildScene(childScene, false, false, false); 
```

之后，制作物理框（在 PhysicsExample.java 中查看），但将最终的 Rectangle ground、roof、left X 坐标更改为 CAMERA_WIDTH / 2（制作屏幕的一半）

# c# - 任务栏中未显示的 WPF ToolWindow 会阻止应用程序

> ID：13385866
> 
> 赞同：3
> 
> 时间：2012-11-14T19:25:52.467
> 
> 标签：c#, wpf, dialog, taskbar

这是当您处于以下情况时会发生的问题： - 在我的应用程序中有一个主窗口 - 我创建了另一个不显示在任务栏中的窗口，并且是一个工具窗口。-我将第二个窗口显示为对话框窗口（从主窗口） -我切换到系统中运行的另一个应用程序，当我回到应用程序时显示主窗口，但它被第二个窗口锁定，没有显示。

这是第二个窗口的代码：

```
<Window x:Class="WpfApplication1.DialogWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="DialogWindow" Height="300" Width="300" WindowStartupLocation="CenterScreen" WindowStyle="ToolWindow" ShowInTaskbar="False">
   <!--Some content-->
</Windows> 
```

这是显示第二个窗口的代码：

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        var dialogWindow = new DialogWindow();
        dialogWindow.ShowDialog();
    } 
```

我该如何解决这个问题，并且仍然显示一个未在任务栏中显示的对话框窗口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T19:35:28.937

我认为您应该将该`DialogWindow.Owner`属性设置为父窗口。请参阅此答案[WPF：如何设置用户控件显示的对话框的所有者窗口？](https://stackoverflow.com/questions/607370/wpf-how-do-i-set-the-owner-window-of-a-dialog-shown-by-a-usercontrol)

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    var dialogWindow = new DialogWindow();
    dialogWindow.Owner = Window.GetWindow(this)
    dialogWindow.ShowDialog();
} 
```

这应该`DialogWindow`始终将模态置于其父级之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:33:19.510

设置`TopMost=True`为对话窗口。

# wpf - vb.net 中表单关闭事件期间的事件序列

> ID：13385867
> 
> 赞同：0
> 
> 时间：2012-11-14T19:25:59.690
> 
> 标签：wpf, vb.net, events, mvvm, setfocus

试图了解如何最好地处理结束事件。

如果我有多个打开的工作区，这些工作区在关闭时可能会将数据返回给父级，这可能意味着父级需要处理某些内容，我正在尝试找出停止关闭并将控制权返回给父工作区的最佳方法。（我可以打开不同的工作区并拥有基本上与父工作区模态的窗口。）

例如：我有一个调用地址编辑窗口的帐户工作区。我在地址编辑过程中关闭了应用程序（从托管帐户工作区的窗口）。我在工作区中有关闭事件步骤，如果它发现一个模式窗口打开，它会在该窗口工作区上执行 canclose。

假设 canclose 提示保存并关闭，退出不保存或取消关闭。如果保存，模式工作区会将地址发送回帐户工作区，由帐户工作区处理。这通常会导致不继续关闭，因为需要检查与帐户工作区相关的新数据并可能保存在那里。我希望帐户工作区成为焦点，并且我希望启动的 canclose 获得虚假回报。

我是否应该将工作空间作为一个事件来关注，然后将 false 返回给调用 canclose？

当我运行诸如 canclose 之类的进程时，我对按顺序发生的事情感到困惑，并且我触发了一个事件，即事件代码何时将相对于请求事件的代码实际执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:22:48.950

请先考虑原生[FormClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing%28v=vs.100%29.aspx)事件，而不是使用您自己的机制（并且可能重新发明轮子）。在那里，您可以[取消](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventargs.cancel%28v=vs.100%29.aspx)关闭或[将 CloseReason](http://msdn.microsoft.com/en-us/library/system.windows.forms.closereason.aspx)覆盖为自定义的非级联值，以获得更精细的操作树。

# django - 如何在动态创建的模板中包含子模板？

> ID：13385872
> 
> 赞同：0
> 
> 时间：2012-11-14T19:26:12.227
> 
> 标签：django, django-templates

我正在开发一个项目，其中一些模板作为“主题”的一部分存储在数据库中。正因为如此，我无法立即利用 Django 的大量模板渲染功能。例如：

```
# Instead of this...
return render_to_response('path/to/template', arguments, context_instance=context)

# Have to do this...
template = Template(model.template_field)
context.update(arguments)
return HttpResponse(template.render(context)) 
```

这很好，但是，我遇到的问题是包含子模板。例如，如果`model.template_field`看起来像这样......

```
<html>
    <head>
        {% include head_extra %} <!-- Another DB field -->
    </head>
    <body>
        {% include body_extra %} <!-- Another DB field -->
    </body>
 </html> 
```

...然后 Django 会抱怨该模板不存在（因为没有该名称的模板）。

如何在动态创建的模板中包含子模板？

**编辑（忽略数据库约束，并提供更多详细信息）：**
我希望用户能够通过文件上传或通过某些编辑器来定义自己的模板。

我希望他们能够通过 包含子模板`{% include %}`，但我不希望用户担心它们来自哪里。因此，我只希望它们包含这样的内容：`{% include extra_head %}`. 但是，django 肯定需要知道模板的位置才能加载它们。

当人们在 django 中需要用户定义的模板时，他们通常会做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:08:44.473

如果您愿意放弃需要`{% include %}`语句的要求，那么您可以在您认为尝试这样的事情时手动执行...

```
def view(request, id):
    theme = get_object_or_404(Theme, pk=id)
    original_context = RequestContext(request)

    page_context = Context({
        'db_head': Template(theme.head_template).render(original_context),
        'db_body': Template(theme.body_template).render(original_context)
    }

    page = Template(theme.page_template)
    return HttpResponse(page.render(page_context)) 
```

...使用这样的“模板”：

```
<html>
    <head>
        {{ db_head }}
    </head>
    <body>
        {{ db_body }}
    </body>
</html> 
```

如果您首先构建最低级别的模板，则此模式也适用于更深层嵌套的元素。您可以通过 包含现有模板`render_to_string`，但如果您想在循环上下文中包含某些内容，您仍然会遇到问题。

有点笨拙，不完全是您正在寻找的东西，但它会起作用。

# .htaccess - 重写搜索 htaccess

> ID：13385875
> 
> 赞同：0
> 
> 时间：2012-11-14T19:26:16.880
> 
> 标签：.htaccess, rewrite

我正在寻找重写搜索链接的最佳方法。在我的网站上，我有：

```
http://domain.com/search.php?keyword=blue+widget&Search=Search 
```

我想结束这个：

```
http://domain.com/blue-widget 
```

没有数据库，只有直接的 html/css。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:38:55.210

我想你想做一些更接近这个的事情：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ search.php?keyword=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ search.php?keyword=$1 
```

Jason 的回答仅适用于一个示例案例。

**更新：**

您可以向正则表达式部分添加更多字符以允许它们。例如，要允许`*`，请执行以下操作：

```
^([a-zA-Z0-9_-*]+)$ 
```

如果有人直接在 URL 中使用了错误字符，您可以将他们重定向到 404 页面。但是，如果您根据用户在表单中输入的内容调用用户的 URL，则可以在将错误字符发送到最终出现 404 页面并通知用户的 URL 之前检查错误字符的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:28:16.407

重写规则则相反。所以链接将`blue-widget`被重写为`search.php`

```
RewriteEngine On
RewriteBase /

RewriteRule ^/blue-widget$ /search.php?keyword=blue+widget&Search=Search [L] 
```

**注意：**如果您接受其他查询字符串参数，则需要使用该[`QSA`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)标志。

# .net - Floating point inconsistency in mono

> ID：13385878
> 
> 赞同：7
> 
> 时间：2012-11-14T19:26:24.930
> 
> 标签：.net, unity3d, mono, monodevelop

I trid this in .NET immediate window:

```
30f + 0.5f 
```

And get 30.5 as expected. In mono, I get 30 instead. What is the reason?

Details:

*   .NET: Visual Studio 2010 SP1
*   mono: Unity3D 3.5.6f4 equipped with MonoDevelop 2.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:23:56.697

将您的 MonoDevelop 升级到 3.0.5

# javascript - jQuery .click() works in Firebug, but not a Greasemonkey script?

> ID：13385879
> 
> 赞同：0
> 
> 时间：2012-11-14T19:26:28.450
> 
> 标签：javascript, jquery, greasemonkey

I am attempting to write my first userscript using Greasemonkey, in Firefox. I have done a good bit of research because I am new to userscripts and jQuery but I can't seem to get this simple test script to work. So far I have this in the `Test.user.js` file:

```
// ==UserScript 
// @name            Desk Notifications 
// @description     Displays special notifications to NVOWS coaches at desk.com
// @downloadURL     http://www.example.com/deskNotifications.user.js
// @include         http://nvows.desk.com/agent
// @namespace       http://www.example.com/userscripts
// @updateURL       http://www.example.com/deskNotifications.meta.js
// @version         0.1
// @grant           none
// ==/UserScript 

$(document).ready(function(){ 
    alert('Script loaded.'); 
    $('.interaction_type_60').click(function() { 
        alert("You clicked a case!"); 
    }); 
    $('.interaction_type_40').click(function() { 
        alert("You clicked a case!"); 
    }); 
}); 
```

What I need it to do is obviously a lot more complicated but because I am new to jQuery and userscripts I just wanted to make this work first. So far the "Script Loaded." is being displayed so that rules out a lot of possible problems. When I run only this part of the code in firebug it works fine:

```
$(document).ready(function(){ 
    alert('Script loaded.'); 
    $('.interaction_type_60').click(function() { 
        alert("You clicked a case!"); 
    }); 
    $('.interaction_type_40').click(function() { 
        alert("You clicked a case!"); 
    }); 
}); 
```

So that rules out having code errors or grabbing a wrong class selector. I can't see what could be the issue if the code is right and it is being executed. If anyone could help that would be greatly appreciated. I am not a newbie to programming. Just web based stuff.

Here is the part of the HTML page that I am trying to see when it is clicked.

```
<tbody id="ticket_filter_list_items" class=" ">
<tr id="ticket_filter_item_73354627" class="ticket_filter_item ticket_filter_item_table_view interaction_type_60 ticket_filter_item_open ticket_filter_item_current_selected" onclick=" ticketEditTableView(73354627, event);return false; " data-in-search="" data-ticket-id="73354627" style="">
<tr id="ticket_filter_item_73382205" class="ticket_filter_item ticket_filter_item_table_view interaction_type_40 ticket_filter_item_open " onclick=" ticketEditTableView(73382205, event);return false; " data-in-search="" data-ticket-id="73382205" style="">
</tbody> 
```

*This is off topic and not a big deal but if you see something that would make this userscript execute on pages that aren't 'http://nvows.desk.com/agent' then let me know. It says "Script loaded." every time I go to Stack Overflow. Ha.*

**--------------------------------------

UPDATE:** I just tried to do this for testing:

```
$(document)
.on('click', this, function(){
    alert('Please Work!!!!');
}) 
```

The things that I have been trying to click this whole time are the things that are not displaying the message. All of them are loaded with javascript after the page is loaded. I am almost positive that is the reason they will not allow me to click them. Is there a way to click these items. In the HTML script they look the same as the other elements.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:41:43.503

你说你已经在萤火虫控制台上运行了代码并且它工作正常，这里留下的选择很少。我相信您尝试添加这些事件的 HTML 标签尚未创建。如果这些元素是通过 JavaScript 创建的并且创建它们的代码尚未运行，则会发生这种情况。另一种可能性是元素在 DOM 上但尚未收到这些类，如果这些类是使用 JavaScript 给出的，也可能发生。

试试这个代码示例，看看它是否有帮助（让我知道结果）：

```
$(document).ready(function(){ 
    alert('Script loaded.'); 
    $(document)
        .on('click', '.interaction_type_60', function() { 
            alert("You clicked a case!"); 
        })
        .on('click', '.interaction_type_40', function() { 
            alert("You clicked a case!"); 
        }); 
}); 
```

**注意**：当您的原始代码运行时，您尝试将这些事件附加到的元素**必须**存在于 DOM 上，并且它们必须具有您定义的类。我的代码所做的是将事件附加到文档元素并查找冒泡元素链的单击事件，允许您添加包含这些选择器的新元素，并且将调用侦听器，而无需专门将事件处理程序附加到那些元素。

附言

在这种特定情况下，您甚至不需要该`$(document).ready(..)`部件。您可以使用：

```
$(document)
    .on('click', '.interaction_type_60', function() { 
        alert("You clicked a case!"); 
    })
    .on('click', '.interaction_type_40', function() { 
        alert("You clicked a case!"); 
    }); 
```

因为事件附加到始终存在的文档元素上。

**编辑：**看到你的标记后，我相信问题也可能是内联`onclick`事件使用`return false;`，这可能会阻止事件在链上进一步冒泡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:59:16.997

`.click()`您说，当您从 Firebug运行原始代码时，它可以工作。

正如 iMoses 所指出的，它不适用于 Greasemonkey 脚本，因为该脚本在页面的 javascript 创建目标节点之前触发。

您还报告该`.on()`代码在脚本或 Firebug 中都不起作用。这意味着`onclick`您的目标节点 ( `ticketEditTableView()`) 的功能是停止事件冒泡。它可能会调用`event.stopPropagation()`.

解决方案是返回，`.click()`但在将目标节点添加到页面时应用它。这可以通过[waitForKeyElements() 实用程序](https://gist.github.com/2625891)来完成。

这是**一个完整的脚本**，用于在将这些节点添加到页面`waitForKeyElements`时绑定`.click()`到这些节点：

```
// ==UserScript
// @name        Desk Notifications
// @description Displays special notifications to NVOWS coaches at desk.com
// @downloadURL http://www.example.com/deskNotifications.user.js
// @include     http://nvows.desk.com/agent
// @namespace   http://www.example.com/userscripts
// @updateURL   http://www.example.com/deskNotifications.meta.js
// @version     0.1
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant GM_addStyle directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements (
    ".interaction_type_60, .interaction_type_40", addAlertOnClick
);

function addAlertOnClick (jNode) {
    jNode.click (alertOnClick);
}

function alertOnClick (zEvent) {
    var targNode    = $(zEvent.currentTarget);
    var messageStr  = "Oopsie!";

    if (targNode.hasClass ("interaction_type_60") ) {
        messageStr  = "You clicked a type 60 case!"
    }
    else if (targNode.hasClass ("interaction_type_40") ) {
        messageStr  = "You clicked a type 40 case!"
    }

    alert (messageStr);
} 
```

# api - Is this api restful?

> ID：13385881
> 
> 赞同：6
> 
> 时间：2012-11-14T19:26:45.297
> 
> 标签：api, rest, sugarcrm

I'm trying to wrap my head around creating a restful api that reads, creates, updates, and deletes multiple records at a time. I came across SugarCRM's "restful" api and the examples they provide.

I have no idea what is considered restful about their api in their example. All of the requests to the api are **post**'ed via cURL. Retrieving records uses a cURL **post**(shouldn't they be using **get**?).

Is their api considered restful? and if so how?

[Their example retrieving multiple records](http://support.sugarcrm.com/04_Find_Answers/03_Developers/100Web_Services/100REST_API/100Examples/100PHP/Retrieving_a_list_of_records_-_REST_and_PHP "Their example")

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T20:54:07.003

当前 6.5 中的 SugarCRM REST API 绝对不是 RESTful，它更多地基于 RPC。然而，未来几个月即将推出的新版本将更加 RESTful。

请参阅维基百科以获得更好的指南......

[http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

# php - Fill using mySQL and PHP I have the following drop down list <select name="SelP"><option value="0">Please Select...</option> <option value="35">LS1</option> <option value="35">LS2</option> ID：13385882 赞同：0 时间：2012-11-14T19:26:45.567 标签：php, mysql 回答 #1 赞同：2 时间：2012-11-14T19:32:32.810 像这样的东西？ while ($row = mysql_fetch_assoc($result)) { $postcode = $row['postcode']; $minimumprice = $row['minimumprice']; echo <<<EOL <option value="$minimumprice">$postcode</option> EOL; } 注意使用heredoc 回答 #2 赞同：1 时间：2012-11-14T19:33:39.377 $select = '<select name="SelP"> <option value="0">Please Select...</option>'; $result = mysql_query($query); if($result){ while($row = mysql_fetch_array($result)) { $postcode = $row["postcode"]; $minimumprice = $row["minimumprice"]; $select .= "<option value=\"$postcode\">$minimumprice</option>"; } } $select .= '</select>'; 回答 #3 赞同：0 时间：2012-11-14T19:33:29.993 发送到服务器的唯一内容是您value=""在option. 没有其他东西被发送。如果您确实需要发送这两个值，您可能希望将 更改为value类似35,LS4. 将其中的两个值用逗号分隔。然后在服务器端，当您捕获它时，explode()将该值放入一个数组并相应地使用第 0 个和第一个元素。</select>

# variables - 为什么将变量声明的范围限制在所需的最小值会更好？

> ID：13385888
> 
> 赞同：0
> 
> 时间：2012-11-14T19:26:55.550
> 
> 标签：variables, scope, limit

如，有人告诉我，最好将某个变量保留在方法中，而不是在类范围内使用它。但为什么会这样呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:46:16.640

我认为这个想法是：

1 个变量用于 1 次使用。不要做

```
int i=0;
//some code using i

//some other code not using i

//a new code using i because you just need an int and i is already there 
```

您可以或声明一个新变量，甚至声明 2 个嵌套范围。**为什么 ？**因为如果您忘记为第二次使用重新初始化变量，那么您就有问题了。

每次使用也有 1 个变量通常更好地为变量命名，而不是像：i、counter、value、tmp 这样的名称。首选可以使您的代码更具可读性的特定名称。

此外，如果您仅在一个小范围内使用变量，则在您使用它时只会在堆栈上动态占用一些内存。如果你把它放在一个有很多变量的非常大的范围内，你将在调试器中有更多的局部变量（更难调试），你将使用内存比你真正​​需要的寿命更长（这对小变量，但可能对大变量不利，例如 STL 容器和其他东西。通常，将这种编码风格应用于任何类型的变量，即使是很小的变量，也可以帮助您处理大变量）

在您的消息中，您谈到将变量作为对象成员，而不仅仅是函数中的局部变量。同样，这会使您的对象更大，可能有部分代码未使用或未初始化此变量。

所有这些都是风格，但可以帮助您减少错误。每次使用时，您应该只有 1 个变量，只有在您使用它并在创建变量后立即对其进行初始化时。

[google cpp 关于局部变量范围的指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Local_Variables)

# mysql - 如何获取分组数据的统计信息

> ID：13385889
> 
> 赞同：1
> 
> 时间：2012-11-14T19:26:58.057
> 
> 标签：mysql

我有一张客户访问企业的表格，其中包含日期列和客户信息列。

```
+------+---------------------+------+
| id   | checkin             | name | ...
+------+---------------------+------+
|    1 | 2010-01-01 00:12:00 | Joe  | 
|    2 | 2010-01-01 00:18:00 | John |
|    3 | 2010-01-01 00:22:00 | Jane |
... 
```

我想按星期几获取统计信息，即按星期几列出的平均、最小、最大访问量。就像是：

```
+---------+---------+---------+
| day     | average | minimum | ...
+---------+---------+---------+
| Monday  | 45      | 30      | 
| Tuesday | 60      | 35      |
... 
```

我相信我需要使用子查询或连接才能做到这一点，但无法弄清楚如何。

此查询将汇总每天的访问次数

```
SELECT dayname(checkin) as day, count(*) as total
FROM customer_log
group by date(checkin) 
```

然后在上面的结果上我需要运行类似的东西

```
SELECT sum(total), max(total), min(total)
from {above table}
group by day. 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:54:21.300

试试这个：

```
SELECT dayname(checkinDate) day,
  sum(visitsPerDay) totalVisits,
  avg(visitsPerDay) avgVisits,
  max(visitsPerDay) maxVisits,
  min(visitsPerDay) minVisits
FROM (
  SELECT date(checkin) checkinDate, count(*) visitsPerDay FROM Customer_log
  GROUP BY checkinDate
) AS visitsPerDaySub
GROUP BY dayofweek(checkinDate) 
```

# java - 如何将 ArrayList 转换为字符串数组

> ID：13385890
> 
> 赞同：-4
> 
> 时间：2012-11-14T19:26:59.227
> 
> 标签：java, string, arraylist, classcastexception

我遇到的一个问题：

如果要将字符串的 ArrayList 导出到字符串数组中，可以尝试：

```
ArrayList<String> lines = new ArrayList<String>();
...
lines.add(line); // etc
...
return (String[]) lines.toArray(); 
```

并得到错误：

```
Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Ljava.lang.String;
    at wormbase.model.parser.FileParser.getDataObj(FileParser.java:45)
    at wormbase.model.parser.ModelParser.main(ModelParser.java:18) 
```

引用[this](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T%5B%5D%29)， toArray() 将返回对象列表而不是字符串。

```
return lines.toArray(new String[lines.size()]); 
```

解决了这个问题。

编辑：感谢 gangnamstyleoverflow

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:28:38.023

尝试

```
lines.toArray(new String[lines.size()]) 
```

no args toArray 返回一个 Object[] check [here](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)，因此 ClassCastException。而重载的[toArray(T)](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)返回一个 T[]。

# php - 在 PHP 中调用类并传递构造函数参数

> ID：13385891
> 
> 赞同：1
> 
> 时间：2012-11-14T19:27:05.787
> 
> 标签：php, oop, class, function

我知道如何使用：

```
call_user_func_array(array($className, $methodName), array($_POST)) ; 
```

在我的类中调用一个函数并发送参数。

但是我将如何只调用该类并将其传递给 __constructor 的参数呢？

手动做我会做：

```
$myTable = new Supertable(array('columnA', 'columnB'), 5, 'Some string') ; 
```

这会奏效。我需要什么功能来实现类似于 call_user_func_array 的功能？

这是我正在做的事情的完整背景：

```
function __autoload($classname) {
    @include $classname.'.php' ;
}

$className = 'supertable' ;
$methodName = 'main' ;

if(class_exists($className, true)) {
    if(method_exists($className, $methodName)) {
        $reflection = new ReflectionMethod($className, $methodName) ;

        if($reflection->isPublic()){
            call_user_func_array(array($className, $methodName), array($_POST)) ;
        } elseif($reflection->isPrivate()) {
            echo '<span class="state">Private</span> method <span class="methodname">'.$methodName.'</span> can not be accessed directly.' ;
        } elseif($reflection->isProtected()) {
        echo '<span class="state">Protected</span> method <span class="methodname">'.$methodName.'</span> can not be accessed directly.' ;
        }

    } else {
        echo 'The method <span class="methodname">'.$methodName.'</span> does not exist.' ;
    }
} else {
    echo 'The class <span class="classname">'.$className.'</span> does not exist.' ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:53:36.003

在这里找到了我自己的问题的答案：

[如何在 PHP 中使用 call_user_func_array 调用构造函数](https://stackoverflow.com/questions/2409237/how-to-call-the-constructor-with-call-user-func-array-in-php)

作为参考，我改变了我的脚本，如下所示：

```
function __autoload($classname)
{
    @include $classname.'.php' ;
}

$className = 'supertable' ;
$methodName = '' ;

if(class_exists($className, true))
{
if(method_exists($className, $methodName))
{
    $reflection = new ReflectionMethod($className, $methodName) ;

    if($reflection->isPublic())
    {
        call_user_func_array(array($className, $methodName), array($_POST)) ;
    }
    elseif($reflection->isPrivate())
    {
        echo '<span class="state">Private</span> method <span class="methodname">'.$methodName.'</span> can not be accessed directly.' ;
    }
    elseif($reflection->isProtected())
    {
        echo '<span class="state">Protected</span> method <span class="methodname">'.$methodName.'</span> can not be accessed directly.' ;
    }

} else {
    $reflect  = new ReflectionClass($className);
    $reflect->newInstanceArgs(array($_POST));
}
} else {
echo 'The class <span class="classname">'.$className.'</span> does not exist.' ;
} 
```

因此，如果类存在但没有给出方法，它会调用构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:02:23.263

如果这**正是**您所需要的，我不明白这一点，原因有两个：

1.  您可以通过以下方式轻松调用它：

    ```
    new $className($_POST); 
    ```

2.  `$_POST`是一个超全局的并且（我相信你知道这一点）不需要作为参数传递就可以访问。

# php - 数组在包含文件中创建得很好，但在函数中没有

> ID：13385892
> 
> 赞同：0
> 
> 时间：2012-11-14T19:27:05.920
> 
> 标签：php

我有以下创建数组的代码。

```
$qry="SELECT foo_id, foo1, foo2 FROM foo_table";
$result=mysql_query($qry);

while($row = mysql_fetch_array($result)){
extract($row);  
$my_array[$foo_id] = array('foo1' => $foo1, 'foo2'  => $foo2);
} 
```

如果我将它保存在一个单独的文件（array.php）中，然后在我的代码中“包含”它（示例 1），一切正常，$my_array 可以正常调用。但是，如果我将此代码设置为一个函数（示例 2）并从我的代码中调用它，然后尝试使用该数组，我会收到 $my_array 尚未定义的消息。

示例 1 - 显示数组

```
include 'array.php';
var_dump($my_array[1]); 
```

示例 2 - 获取错误消息 Undefined variable: $my_array

```
function create_array(){
  $qry="SELECT foo_id, foo1, foo2 FROM foo_table";
  $result=mysql_query($qry);

  while($row = mysql_fetch_array($result)){
  extract($row);    
  $my_array[$foo_id] = array('foo1' => $foo1, 'foo2'  => $foo2);
  }
}

create_array();
var_dump($my_array[1]); 
```

我在做一些根本错误的事情吗？我对php有点新，所以简单的解释将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:55:41.443

$my_array 变量是 create_array 函数的本地变量。它不存在于 create_array 之外。如果要在函数外部使用变量，则必须使用“global”关键字将其设为全局变量（不推荐），或者将数组作为返回值传回主程序。例如：

```
function create_array(){
  $qry="SELECT foo_id, foo1, foo2 FROM foo_table";
  $result=mysql_query($qry);

  while($row = mysql_fetch_array($result)){
    extract($row);    
    $my_array[$foo_id] = array('foo1' => $foo1, 'foo2'  => $foo2);
  }
    return $my_array;
}

$my_array = create_array();
var_dump($my_array[1]); 
```

PHP 变量作用域的工作方式，即使您首先在主程序中声明了 $my_array，它仍然是 create_array 函数的本地变量，除非您使用关键字“global”将其设为全局变量或将其作为参数传递给功能。它与其他一些语言不同，例如 JavaScript，在主程序中声明变量会自动为其提供全局范围。

顺便说一句，当您使用 mysql_fetch_assoc 函数从 MySQL 获取数据时，您可以节省一步，该函数将以关联数组的形式返回查询结果，其中字段名称作为键。例如，

```
while (($row = mysql_fetch_assoc()) 
```

会给你：

```
$row["foo_id"] = value1;
$row["foo1"] = value2;
$row["foo3"] = value3; 
```

我并不完全清楚您要执行的功能是什么，但我想我会指出这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:32:48.080

也许它与变量范围有关。在函数内部，只有在 self 函数的局部范围内可用的变量，除非它由关键字 global 定义。

```
function create_array(){
  global $my_array;
  $qry="SELECT foo_id, foo1, foo2 FROM foo_table";
  $result=mysql_query($qry);

  while($row = mysql_fetch_array($result)){
    extract($row);    
    $my_array[$foo_id] = array('foo1' => $foo1, 'foo2'  => $foo2);
  }
}

create_array();
var_dump($my_array[1]); 
```

或者更好的函数返回值：

```
function create_array(){
  $qry="SELECT foo_id, foo1, foo2 FROM foo_table";
  $result=mysql_query($qry);

  while($row = mysql_fetch_array($result)){
    extract($row);    
    $my_array[$foo_id] = array('foo1' => $foo1, 'foo2'  => $foo2);
  }
  return $my_array;
}

$my_array = create_array();
var_dump($my_array[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:33:13.337

您的问题涉及[变量范围](http://php.net/manual/en/language.variables.scope.php)。

有多种方法可以解决这个问题，但鉴于您的函数名称，我*希望*它`return`是数组。

例如：

```
function create_array() {
  // current code

  return $my_array;
}

$arr = create_array();
var_dump($arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:30:05.263

`$my_array`在函数内部定义，在该函数之外不存在。

尝试添加功能`return $my_array;`。`create_arry()`

然后像这样调用函数：`$my_array = create_arry();`，将该函数返回的数据存储在`$my_array`变量中。

# mvvm - MVVM 在 .NET 4.5 中实现 ICommand

> ID：13385900
> 
> 赞同：2
> 
> 时间：2012-11-14T19:27:30.490
> 
> 标签：mvvm, .net-4.5

.NET 4.5 中是否有 ICommand 的强类型实现？如果有，它住在哪里？我在博客上看到了许多 DelegateCommand 的实现，但不知道是否有官方的实现滚入基类库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:47:01.500

不，BCL 中没有 ICommand 的强类型实现。[如果您使用的是 MVVM，那么您应该使用 MVVM 框架](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)。无论如何，指挥都有限制，所以我建议看一下[Caliburn.Micro](http://caliburnmicro.codeplex.com/)的 Actions 之类的东西。

# javascript - 模型与其他模型的关系

> ID：13385903
> 
> 赞同：0
> 
> 时间：2012-11-14T19:27:48.150
> 
> 标签：javascript, backbone.js

我正在使用backbone.js，但有以下未解决的情况：
假设您有两个模型：

```
var Person = Backbone.model.extend({
    defaults: {
        name: '',
        age: 24
    }
});

var Car = Backbone.model.extend({
    defaults: {
        type: '',
        driving_person: null
    }
}); 
```

我有一个可以通过 ajax 调用调用的服务，它以以下格式返回 car json：

```
{
    car: {
        type: 'Honda Civic',
        driving_person: {
            name: 'dan',
            age: 13
        }
    }
} 
```

我还在汽车模型中添加了引用该服务的 urlRoot 属性。
现在我想使用 fetch 来加载特定的汽车，但我想在driving_person 属性中获取带有人模型的汽车模型。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:34:54.180

您的汽车模型必须包含 user_id 或 user_name 或类似的一些属性，以便您可以获取该数据并在后端进行嵌入。

您还需要使用`parse()`模型的方法。您覆盖它以解析来自服务器的 json 响应，当您解析时，您会自动在主干中创建您的用户模型（或引用它，如果它已经创建）。

但我认为你也可以在创建你的汽车模型时这样做，用它的`initialize()`方法。

那可能会更好。

但是，如果您要问的是如何根据用户选择合适的汽车，那么当您从服务器请求数据时，则此逻辑在服务器端。您需要在服务器端实现它。

如果你想在客户端的模型中嵌入一个driving_person，就像在你的json响应中一样，只需定义你的driving_person属性，它就会有json对象作为它的值。

如果你想在汽车模型中嵌入一个新的 Backbone.Model，你需要处理`initialize()`汽车模型。甚至可能`parse()`。

编辑：

如果要在获取后将用户模型嵌入到汽车模型中，则需要重写构造函数方法：

```
var Car = Backbone.Model.extend({

    constructor: function(data, options){
        this.driving_person = new User(data.driving_person);
        delete data.driving_person;
        Backbone.Model.prototype.constructor.call(this, data);
    }

    /// Your other model code like initialize, etc. 
```

编辑2：

如果您想避免每辆车都有一个新的驱动程序模型（因为可能更多的汽车将共享同一个驱动程序），那么您可能应该有一个全局变量（甚至是一个集合），它采用驱动程序模型。

它需要是前面代码中定义的全局集合。

然后，您将驱动程序添加到我给您的这个构造函数中的那个全局集合中。

假设您在代码前面定义了一个全局 DriverCollection（您可以通过以下方式执行此操作：

```
window.DriverCollection = Backbone.Collection.extend({
    model: Driver, 
```

然后，您将制作这样的汽车模型：

```
var Car = Backbone.Model.extend({   
    constructor: function(data, options){           
        if (!window.DriverCollection.find(function(driver){return driver.name == data.driving_person.name;}))
        {window.DriverCollection.add(driving_person);}
        data.driving_person = data.driving_person.name;
        Backbone.Model.prototype.constructor.call(this, data);
    }       
    /// Your other Car model code like initialize etc. 
```

这样，您的 Car 构造函数获取 JSON 数据并将驱动程序添加到全局 DriverCollection（如果它不存在），并将您的汽车`driving_person`属性`name`设置为嵌入式 json 驱动程序对象的属性。

当然，您也可以使用其他属性来引用和查找您的驱动程序，例如 id 或其他。

这样可以避免重复。

您需要为此定义 Driver 模型才能工作。

# java - 是否应该从 Java 中的非静态上下文中操作实例变量

> ID：13385904
> 
> 赞同：1
> 
> 时间：2012-11-14T19:27:52.893
> 
> 标签：java, constructor, static-methods

刚接触Java，所以如果这看起来有点幼稚，我深表歉意。我试图更好地理解在实践中访问实例/成员变量的约定。

> **可以从非静态上下文中操作非静态实例变量吗？**

例如，如何修改以下类定义以允许 id 和 version 变量递增。

```
 class Foo {

        private int id;
        private int version;
        public String product;
        public String model;

        private Foo( ) {

            // Can these variables be accessed from a non-static context?
            id++;
            version++;

        }
        ... 
```

与静态字段相比...

```
 class Foo {

        private static int id;
        private static int version;
        public String product;
        public String model;

        private Foo( ) {

            id++;
            version++;

        }
        ... 
```

第一个例子...

> 1
> 1
> 模型一
> 优先
> 
> 1
> 1
> 模型二
> 秒

第二个例子...

> 1
> 1
> 模型一
> 优先
> 
> 2
> 2
> 模型二
> 秒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:32:04.473

您可以`static-variable`从 a访问 a `non-static context`，因为`static variables`它绑定到一个类。因此，即使您在 a`non-static context`中访问它，也可以像在 中一样访问它`static context`。

例如： -

```
MyClass obj = null;
obj.staticVar = 10; 
```

令人惊讶的是，上面的代码并没有 throw ，因为无论您如何访问它，都会`NPE`访问静态变量。`class name`

所以，`obj.staticVar`实际上是替换为`MyClass.staticVar`.

但反过来是不正确的。您不能`non-static variable`从 a 访问 a `static context`。因为，在静态上下文中，您没有任何`reference`实例。如果不引用该类的实例，您将无法访问实例变量。

* * *

话虽如此，还请注意，仅仅因为您可以做某事，并不意味着这是一个好主意。修改 a `static variable`inside a `constructor`or in any`non-static context`是一个`terrible`想法。因为，您对这些变量所做的任何更改都将反映在该类的所有实例中。

相反，您应该使用 a`static-initialization block`来初始化`static`变量。`Static initialization block`时执行`class-loading`，以初始化所有`static`变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:32:13.943

如果您试图将这些属性作为`static`变量保留在类中，我强烈建议您不要这样做。这些`id`和`version`字段应该放在管理它们的特定类中，用于该对象和需要它们的每个对象。

这样，您可以向您的“IdManager”询问一个新的`id`和一个新的`version`并将它们分配给您创建的对象。

只是为了回答您的问题，一个`static`字段通过某个类的所有实例共享，因此任何修改都会影响所有实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T19:34:16.957

静态字段在实例之间**共享。**

相反，实例字段对**一个特定的实例范围**是封闭的。

这就解释了为什么当您从第二个实例中获取它们时，您的字段似乎“重置”了。

因此，要增加第一个实例的字段，请提供一些像这样的公共方法：

```
public void incrementId(){
  id++;
} 
```

这样您就可以通过以下方式实现您的要求：

```
fooOne.incrementId(); // id => 2

fooTwo.incrementId(); // id => 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T19:36:01.773

您所展示的实际上是所需的行为。

在您的第一个示例中，您声明**实例变量**并在构造函数中递增它们，**这只会影响 instance**。

在第二个示例中，您声明**静态/类变量**并在构造函数中递增它们。当您**实例化类两次**并且每次构造函数调用都会递增类变量，从而**将它们递增两次**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T19:33:27.017

我认为你真正想要的是这样的

```
 private static int globalID;
    private int id;
    private static int version;
    public String product;
    public String model;

    private Foo( ) {

        this.id = globalID;
        globalID++;
        //...
      } 
```

# android - Android包不可调试

> ID：13385915
> 
> 赞同：18
> 
> 时间：2012-11-14T19:28:39.353
> 
> 标签：android, debugging, adb

我在 中明确将我的应用程序可调试设置为 true`AndroidManifest.xml`并将其部署到我的设备上`eclipse`，但我仍然得到

```
run-as: Package 'com.mypackage' is not debuggable 
```

当我运行命令时：

```
adb -d shell 'run-as com.mypackage cat /data/data/com.mypackage/databases/mydb.db > /sdcard/mydb.db' 
```

我需要更改什么才能调试我的应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-04T15:39:23.613

您是使用`release apk`还是`debug apk`测试？如果您使用发行版，`apk`您将无法获得访问权限。我建议您直接从 Android Studio 构建应用程序（记住您的 Build Variant 必须`debug`在 Android Studio 中）并尝试使用命令`run-as "your.package.name"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-28T22:44:36.007

如果您确定您使用 和`AndroidManifest.xml`with构建`debuggable=true`，那么卸载软件包可能会起作用（注意：这也会擦除此应用程序的数据）。

```
adb uninstall your.package.name 
```

由于我不完全理解的原因，AndroidManifest.xml 似乎很粘。当我有一个非调试 APK 作为我的初始安装时，我会遇到这种情况，然后稍后加载一个可调试的 APK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-19T12:00:39.633

就像@prudhvi 所说，这可以通过设置构建变体来调试来解决

[![在此处输入图像描述](../Images/0a9a74133bcd2942ce4c84778f848a9f.png)](https://i.stack.imgur.com/95qUB.png)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-14T19:41:25.253

尝试将您的包名更改为，`com.my.pack.age`因为包名少于 4 级似乎存在问题。还要确保在`/data/system/packages.list`. 从[这里](http://code.google.com/p/android/issues/detail?id=13965)获取的信息。

# python - 向插图缩放轴添加第二个 Y 轴

> ID：13385924
> 
> 赞同：3
> 
> 时间：2012-11-14T19:29:14.857
> 
> 标签：python, matplotlib

我绘制了一个将两个 y 轴（即两个不同的 SI 刻度）与单个 x 轴相关联的图形。我必须放大一些值，并使用 Matplotlib 中的 zoom_inset_locator 技巧来管理它。我实现了缩放轴，但我缺少第二个 y 轴（参见下面的示例）：

![两个 y 轴和插图缩放](../Images/7d0381cc3d2c3f3ba575666ddd4e32df.png)

它确实尝试再次使用 twinx() 添加第二个轴，但它失败了，因为它在主 twinx（右）轴上绘制轴，但在缩放右轴上留下空白刻度，似乎给 x 轴正确的处理， 见下文：

![在此处输入图像描述](../Images/6ab741267ac7a4531be805de7e968f88.png)

有什么解决方法吗？这是我用来绘制图形的代码：

```
import numpy,os,sys
import pylab
import scipy.optimize
from mpl_toolkits.axes_grid1.inset_locator import zoomed_inset_axes
from mpl_toolkits.axes_grid1.inset_locator import mark_inset

# Initializing the curve
fig_cal=pylab.figure()
host_weight = fig_cal.add_subplot(111)
host_mass = host_weight.twinx()
Tension = numpy.linspace(0,0.08,100)
Weight = 0.5* Tension
Mass = Weight/9.81

# Plotting the curve

host_weight.plot(Tension, Weight, 'r', label='Fitted line',lw=2)
host_mass.plot(Tension, Mass)

# Cosmetic on the Figure
host_weight.set_xlabel("Tension U [$V$]")
host_weight.set_ylabel("Weight F [$N$]")
host_mass.set_ylabel("Mass M [$kg$]")
host_mass.set_ylim(host_weight.axis()[-2]/9.81, host_weight.axis()[-1]/9.81)
host_weight.grid(False)

# Zoom on the first measurement
zoom_weight = zoomed_inset_axes(host_weight, zoom = 7.5, bbox_to_anchor=(0.95,0.5), bbox_transform=host_weight.transAxes)
zoom_weight.plot(Tension[:4], Weight[:4], 'r', lw=2)
zoom_weight.set_xticks(zoom_weight.xaxis.get_majorticklocs()[::2])
zoom_weight.set_yticks(zoom_weight.yaxis.get_majorticklocs()[::2])
# zoom_mass = zoom_weight.twinx()

# zoom_mass.plot(Tension[:4], Mass[:4],alpha=0)
# zoom_mass.set_ylim(zoom_weight.axis()[-2]/9.81,zoom_weight.axis()[-1]/9.81)
mark_inset(host_weight, zoom_weight, loc1=2, loc2=4, fc="none", ec="0.5")

pylab.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:02:35.723

您可以考虑使用代码格式化程序：

代码是这样的：

```
formatter = matplotlib.ticker.EngFormatter(unit='S', places=3)
formatter.ENG_PREFIXES[-6] = 'u'
plt.axes().yaxis.set_major_formatter(formatter) 
```

看看这篇文章的情节是什么样的： [matplotlib；十的分数次方；科学计数法](https://stackoverflow.com/questions/12925456/matplotlib-fractional-powers-of-ten-scientific-notation/12936935#12936935)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:27:18.533

所以我找到了我的问题的答案......抱歉耽搁了，但我把这个问题搁置了......我确实找到了这个错误，但只是通过生成另一个缩放插图，使用 alpha 运河并禁用了很多解决方法的东西...

这是我的代码：

```
import numpy,os,sys
import pylab
from mpl_toolkits.axes_grid1.inset_locator import zoomed_inset_axes
from mpl_toolkits.axes_grid1.inset_locator import mark_inset

# Initializing the curve
fig_cal=pylab.figure()
host_weight = fig_cal.add_subplot(111)
host_mass = host_weight.twinx()
Tension = numpy.linspace(0,0.08,100)
Weight = 0.5* Tension
Mass = Weight/9.81

# Plotting the curve
host_weight.plot(Tension, Weight, 'r', label='Fitted line',lw=2)
host_mass.plot(Tension, Mass, alpha=0)

# Cosmetic on the Figure
host_weight.set_xlabel("Tension U [$V$]")
host_weight.set_ylabel("Weight F [$N$]")
host_mass.set_ylabel("Mass M [$kg$]")
host_mass.set_ylim(host_weight.axis()[-2]/9.81, host_weight.axis()[-1]/9.81)
host_weight.grid(False)

# Zoom on the first measurement
zoom_weight = zoomed_inset_axes(host_weight, zoom = 7.5, bbox_to_anchor=(0.95,0.5), bbox_transform=host_weight.transAxes)
zoom_weight.plot(Tension[:4], Weight[:4], 'r', lw=2)
zoom_weight.set_xticks(zoom_weight.xaxis.get_majorticklocs()[::2])
zoom_weight.set_yticks(zoom_weight.yaxis.get_majorticklocs()[::2])
zoom_mass = zoomed_inset_axes(host_mass, zoom = 7.5, bbox_to_anchor=(0.95,0.5),     bbox_transform=host_mass.transAxes)
zoom_mass.xaxis.set_visible(False)
zoom_mass.spines['left'].set_visible(False)
zoom_mass.spines['top'].set_visible(False)
zoom_mass.patch.set_alpha(00)
zoom_mass.yaxis.tick_right()
zoom_mass.yaxis.set_label_position('right')
zoom_mass.yaxis.set_offset_position('right')
zoom_mass.plot(Tension[:4], Mass[:4],color='w', alpha=0)
zoom_mass.set_ylim(zoom_weight.axis()[-2]/9.81,zoom_weight.axis()[-1]/9.81)

pylab.show() 
```

也许不是最好的方法，但它有效！

# python - 使用 PIL 保存 CMYK tif 图像时 Python.exe 崩溃

> ID：13385927
> 
> 赞同：2
> 
> 时间：2012-11-14T19:29:27.213
> 
> 标签：python, python-imaging-library, tiff, cmyk

我只在 PIL 中遇到 CMYK tif 图像的问题。问题是一切似乎都很好，我可以加载文件，保存它，但是当我裁剪它并尝试保存它时，python.exe 只是挂起。这是我的会议的粗略记录：

```
>>> import os
>>> from PIL import Image
>>> os.listdir(".")
['CMYK_TIFF.tif', 'GRAYSCALE_TIFF.tif', 'RGB_TIFF.tif']
>>> im = Image.open("CMYK_TIFF.tif")
>>> im
<PIL.TiffImagePlugin.TiffImageFile image mode=CMYK size=4320x3240 at 0x2630B88>
>>> points = (12, 3, 44, 88)
>>> im = im.crop(points)
>>> im
<PIL.Image._ImageCrop image mode=CMYK size=32x85 at 02630B48>
>>> im.save("new_image.tif") 
```

此时 python.exe 只是崩溃。这不是一个孤立的问题，它始终在这一点上发生。

任何帮助将不胜感激！

PD：我在 Windows 7 x64 操作系统中使用 python 2.7.3 和 PIL 1.1.7。

PD2：Python 故障转储：

```
Descripción (description)
Ruta de acceso de la aplicación con errores (filepath to the application with errors):                 C:\Python27\python.exe
Firma del problema (problem signature)
Nombre de evento de problema (name of the event or problem):    APPCRASH
Nombre de la aplicación (application name): python.exe
Versión de la aplicación (aplication version):  0.0.0.0
Marca de tiempo de la aplicación (timestamp):   4f84a524
Nombre del módulo con errores (Name of the module with errors): MSVCR90.dll
Versión del módulo con errores (version of the module with errors): 9.0.30729.6161
Marca de tiempo del módulo con errores (module timestamp):  4dace4e7
Código de excepción (exception code):   c0000005
Desplazamiento de excepción (exception displacement):   000000000001e2e0
Versión del sistema operativo (OS version): 6.1.7601.2.1.0.256.48
Id. de configuración regional (regional configuration id):  11274
Información adicional 1:    3312
Información adicional 2:    3312c03e983672d704c6ef8ee1696a00
Información adicional 3:    b29d
Información adicional 4:    b29dcc8fc6f4d939931d139c4d9e8d31

Información adicional sobre el problema
Id. de depósito:    67567272 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:40:04.550

该`crop`功能实际上是惰性的，这意味着在您尝试访问像素之前不会发生裁剪，在您的情况下发生在`save`.

你可以通过调用来强制它发生`load`：

```
>>> im = im.crop(points)
>>> im
<PIL.Image._ImageCrop image mode=CMYK size=32x85 at 02630B48>
>>> im.load()
<PixelAccess at 0x108d2ba70>
>>> im.save("new_image.tif") 
```

我最初建议这是帮助调试问题的一种方式，因为可能会发生三件事：

1.  如果`load`崩溃，问题在于强制对作物进行评估。
2.  如果`load`成功但`save`崩溃，则问题在于保存（某些）TIFF 图像。
3.  如果它们都成功了……首先想到的可能性是您没有足够的内存来同时保留裁剪和未裁剪的版本，或者在`save`触发惰性函数评估的方式中存在错误。

当然，在选项 3 中，如果您只是想通过一次性任务完成此任务，您可能不会关心进一步调试。但是很有可能它会再次弹出一个不同的图像，所以如果你试图构建一个更广泛使用的程序，最好继续调试问题（从从崩溃转储中获取堆栈跟踪开始）。

有关上述所有功能的更多详细信息，请参阅[文档](http://www.pythonware.com/library/pil/handbook/image.htm)。

# c++ - c++ 的 64 位名称修改

> ID：13385935
> 
> 赞同：8
> 
> 时间：2012-11-14T19:30:04.837
> 
> 标签：c++, visual-studio-2010, 64-bit, name-mangling

我有一些代码，其中包含以下行

```
 #pragma comment(linker, "/include:_test@12") 
```

当我使用配置类型为 32 位的 C++ Visual Studio 2010（我也在 32 位 Windows 机器上）编译代码时，使用此代码的项目工作正常。

当我将机器更改为 64 位并使用使用 C++ Visual Studio 2010 编译的 x64 配置时，出现链接错误。

32 位和 64 位的 C++ 名称修改是否不同？如果是这样，我在哪里可以找到 64 位 C++ 名称修改约定？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T19:37:53.593

是的，名称修饰在 32 位和 64 位之间是不同的。可以[在此处找到](https://en.wikiversity.org/wiki/Visual_C%2B%2B_name_mangling)涵盖确切格式的合理文章。但是，您可以通过简单地编译到两个目标并检查生成的映射文件来很快分辨出主要差异。根据我的经验，它们*几乎*相同（64 位添加了一个小数据，可能会改变其他数据）。

简单示例：`void foo();`

```
32bit: ?foo@A@@QAEXXZ
64bit: ?foo@A@@QEAAXXZ 
```

对于未损坏的 std 调用，长度后缀可能有很大不同，具体取决于参数堆栈的使用。VC++ 的默认 64 位设置不添加下划线，也不编码长度后缀。以下是使用纯开箱即用设置编译的 32/64 位配置：

```
extern "C" int _stdcall func2(int, int, char*);

32bit: _func2@12
64bit: func2 
```

没有什么意义，在那里。

完成电路，unmangled _cdecl，它执行以下操作：

```
extern "C" int _cdecl func2(int, int, char*);

32bit: _func2
64bit: func2 
```

如果看起来他们特意让你知道你在拉入或输出什么，那么证据表明你可能是正确的。

# c# - 如何使用 c# WPF 调用服装控件并将其添加到控件子项

> ID：13385940
> 
> 赞同：0
> 
> 时间：2012-11-14T19:30:27.133
> 
> 标签：c#, wpf, invoke, dispatcher

嗨，我有一个为我的网站创建的程序，我试图对其进行更新，以便代码的密集部分将在单独的线程中运行。新线程创建了几个服装控件，我需要将它们作为主 GUI 线程上的子控件放置在容器内，但每次运行代码时都会出现此错误“调用线程无法访问此对象，因为不同的线程拥有它”。抛出此错误后的调试器会突出显示 [ if (FileStack.Dispatcher.CheckAccess()) ] 下的代码部分，每次我运行代码并且程序尝试调用控件时。这是我的代码

```
 public delegate void ADDFiLEHandel(FileControlxaml File);

 public void ADDFiles(FileControlxaml File)
      {

          if (FileStack.Dispatcher.CheckAccess())
          {
              FileStack.Children.Add(File);  //this is the code that gets height-lighted by the debugger 
          }
          else
          {
                      FileStack.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new ADDFiLEHandel(ADDFiles), File);

          } 
```

然后我从新线程调用这样的调用，我必须将线程状态设置为 STA，我做错了什么我花了几个小时试图让它工作。

```
 public void createfilethread(object data)
    {
    FileControlxaml  NewFile = new FileControlxaml();
    NewFile.Title = "Hellow World";
    ADDFiles(NewFile);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:37:45.293

你不可以做这个。当您`DispatcherObject`在没有关联的线程中实例化 s 时，`Dispatcher`会创建一个新的调度程序并将其关联到该线程。您不能混合在不同线程中创建的不同 UIElement。

为什么要在第二个线程中创建 UIElements？这就是“UI 线程”的意义所在。

重新考虑你的方法。

# monitor - 如何在任何屏幕上显示“实际尺寸”？

> ID：13385942
> 
> 赞同：2
> 
> 时间：2012-11-14T19:30:32.060
> 
> 标签：monitor

我正在做一个 CAD 程序。我想在屏幕上显示实际尺寸的图纸，这意味着如果我可以在屏幕上放置尺子来测量线条，它们应该匹配。但是屏幕有不同的dpi。如何获得正确的 dpi 并计算程序的乘数？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-12T15:41:50.440

您将需要用户输入显示器的物理尺寸。详情如下...

*   鉴于 X 认为控制台的物理尺寸和分辨率是多少，您可以计算 X 认为您的显示器的物理尺寸：

    $ xdpy信息 | grep -E '尺寸|分辨率'

*   X 系统确定的显示器物理尺寸是总点数除以每英寸点数。使用您的标尺，您可以计算每英寸的实际点数并告诉 X 系统这是什么：

    $ xrandr --dpi 200

*   如果您有多个监视器，您还必须通过 --output 指定监视器的名称。

*   您的 cad 程序可能会显示图像。在这种情况下，您需要知道图像的大小和分辨率。imagemagick 包包含 idetify：

    $ 识别-详细文件名 | grep -E '几何|分辨率|打印尺寸|单位'

像 feh 和 geeqie 这样的图像查看器在显示图像时喜欢使用 1:1 图像像素来显示像素。典型的图像编辑器将以 300 dpi 创建图像，而通过电子邮件发送的图像可能会报告 72 dpi。

*   修正图像 dpi。无需更改图像本身。（图像中的实际值以每厘米像素记录。）

    $ convert -units PixelsPerInch INPUT-IMAGE -density DESIRED-DPI OUTPUT-IMAGE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T23:38:00.267

要知道屏幕的像素密度，您需要两个信息，物理尺寸和分辨率。虽然分辨率可以通过编程方式确定，但物理尺寸不能。（AFAIK）

这个想法有一些实现，软件会询问用户他们的屏幕尺寸是多少，并使用它来确定像素密度。
示例：
[http ://www.sizeis.com/](http://www.sizeis.com/)
[http://pective.com/pic/frog](http://pective.com/pic/frog)

或者，一些界面要求用户使用固定大小的项目进行校准——比如通过调整滑块直到数字剪影与信用卡匹配。
示例： http:
[//mwctoys.com/REVIEW_060412a.htm](http://mwctoys.com/REVIEW_060412a.htm)（见第二张图片） [http://beta.lifesizer.com/images/featured](http://beta.lifesizer.com/images/featured)

在任何情况下，您都必须确定显示器的物理尺寸来计算像素密度。

# java - Web Sockets + Tomcat/Glassfish + 集群 + 负载平衡 - 有哪些选项？

> ID：13385943
> 
> 赞同：3
> 
> 时间：2012-11-14T19:30:36.177
> 
> 标签：java, tomcat, glassfish, websocket, load-balancing

我正在开发一个 Java SE 7 / Java EE 6 应用程序，它可能使用 Tomcat 7 或 Glassfish 3.1（可能是 GlassFish，但尚未确定）。该应用程序将利用新的 WebSockets 技术，该技术最近已在所有主要浏览器中得到广泛采用。

通过大量研究、论坛阅读和邮件列表监控，我确定（目前，AFAICT）mod_jk/isapi_redirect 和 mod_proxy 都不可靠（或根本不）支持 WebSockets。由于这是在 Tomcat 或 GlassFish 集群中负载平衡/引导流量的两种久经考验的方法，因此这显然是一个问题。

然而，另一方面，Tomcat 和 GlassFish 都有内置的 Web 服务器，被广泛吹捧为在提供静态内容方面与 Apache 或 IIS 一样高效，因此通常不建议将 Apache 或 IIS 放在前面。这些服务器之一，除非您需要冗余/负载平衡。

所以，所有这些都让我想到了这些问题：

1.  Tomcat/GlassFish 集群中是否还需要 Apache 或 IIS 来进行负载平衡？简单地放置一个标准负载均衡器，就像您在任何其他场景中使用的一样，放在 Tomcat 或 GlassFish 服务器集群之前并完全放弃中间 Web 服务器，难道不是同样有效（或更有效吗？）？还是有一些技术原因导致标准负载均衡器无法与 TC/GF 一起使用？假设可以使用标准负载均衡器，则可以简单地找到支持 WebSockets（如 Coyote）的负载均衡器并使用它。
2.  如果标准负载均衡器根本无法与 Tomcat/GlassFish 一起使用，还有哪些其他选择？如何使用 Java EE 实现高性能和可靠的 WebSocket 技术？

**警告**：我不希望考虑仅限于愚蠢的循环协议（例如循环 DNS）的负载平衡技术。我不认为这些选项可靠/冗余，因为与集群中的另一台服务器相比，这些选项很容易被发送到已关闭或已经处理大量连接的服务器。显然，我知道像 Round-Robin DNS 这样的东西可以很容易地与 WebSockets 一起使用，而没有任何兼容性问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:52:54.553

我们将使用一种方法，将我们的 Tomcat 实例直接放在标准负载均衡器之后。我们在设置中大量使用 SSL。为了在我们的负载均衡器后面保持简单并避免在我们的 Web 容器中对 SSL/无 SSL 进行不同的配置，我们希望在我们的负载均衡器中终止 SSL。

但是，我们的负载均衡器的 SSL 解密硬件有很多问题。因此，我们最终在我们的 Web 容器和负载均衡器之间使用了 Web 服务器 (nginx)，其唯一目的是解密 SSL。

这是一个适用于我们的特殊情况，但值得牢记。除此之外，我认为没有理由在负载均衡器和 Web 容器之间保留 Web 服务器。负载均衡器应该可以与 Web 容器一起正常工作。力求简单并尽量减少设置中的不同组件。

# json - html 控件和请求参数的 XSS 问题

> ID：13385945
> 
> 赞同：1
> 
> 时间：2012-11-14T19:30:45.913
> 
> 标签：json, xss, antisamy

我需要在我的应用程序中修复 XSS 问题。现在我是 JSON 和 XSS 的新手。我想到了两种可能发生攻击的方式 - 首先是通过 html 输入控件（文本框/区域等）或通过 url 中可见的请求参数（GET）。请建议我是否在这里遗漏了什么？

我正在考虑使用 AntiSamy (https://www.owasp.org/index.php/Category:OWASP_AntiSamy_Project)。我正在考虑创建一个自定义标签，其中包含 html 控件的值，例如

<input type="text" NAME="name" value="<mytag:xssclean><c:out value= escapeXml="false"/></mytag:xssclean>

这个标签类实际上会使用 antisamy 来扫描 html 内容。这是否会在将这些参数发送到控制器类然后最终发送到数据库之前对输入到文本框/区域的任何恶意 javascript 内容进行编码？还是只对来自控制器类的内容进行编码以在 jsp 上呈现？

这是正确的方法吗？我什么时候需要在 java 端（通过使用 antisamy 直接验证的控制器类）与在 jsp（带有新标签）上进行验证？

此外，我有许多 jsp，它们没有带有 html 控件的直接表单字段，但它们的结构是动态创建的，并且将 jason 字符串提供给 jsp。jsp 将简单地具有 : where 'value' 将包含要在 html 上呈现的最终 jason（包括 html 字段）。我们是否需要在 jason 字符串上使用 antisamy 应用 XSS 解决方案，或者 jason 数据已经免受 XSS 攻击，并且类似的东西已经作为文本存在于 jason 中？对于 json 案例，我应该在哪里解决这个问题？

# wpf - 无法编辑我的 DataGrid WPF Framework 4.5 的单元格

> ID：13385950
> 
> 赞同：7
> 
> 时间：2012-11-14T19:31:25.367
> 
> 标签：wpf, xaml, data-binding, datagrid

我的 ObservableCollection 有三个项目，并且行始终显示在数据网格中。我无法将 DataGrid 的单个单元格变为编辑模式。我尝试了单击、单击、双击、F2、...，但整行都保持选中状态。如何让用户编辑数据网格。我在其他帖子中发现了类似的数据网格编辑问题，但没有人解决我的问题。这是代码（WPF NetFramework 4.5）。目的是，只有第一列是不可编辑的（只读）。

```
<DataGrid Name="myDataGrid" Grid.Row="2" AutoGenerateColumns="False" ItemsSource="{Binding}" IsReadOnly="False">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="name" IsReadOnly="True" Width="200"  >
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Name}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="Formulation" Width="100" IsReadOnly="False">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding FormulationStr}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding FormulationStr}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="volume Diff" Width="100" IsReadOnly="False">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding volumeDiff}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding volumeDiff}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T20:11:10.080

您已放置`TextBlock`in`cell template`和 in `cell editing template`。这就是为什么您在按 F2 并双击单元格时没有注意到任何变化，因为无论它是什么`TextBlock`，您都无法编辑。

要么像这样放在`TextBox`你的`CellEditingTemplate`-

```
<DataGridTemplateColumn Header="Formulation" Width="100" IsReadOnly="False">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding FormulationStr}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <TextBox Text="{Binding FormulationStr}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

或者简单地使用`DataGridTextColumn`in 代替`DataGridTemplateColumn`which 在内部提供支持你试图通过上面的代码实现什么 -

```
<DataGridTextColumn Header="Formulation" Width="100" IsReadOnly="False" Binding="{Binding FormulationStr}" /> 
```

# asp.net-mvc - 排序后webgrid为空

> ID：13385954
> 
> 赞同：2
> 
> 时间：2012-11-14T19:31:32.387
> 
> 标签：asp.net-mvc, webgrid

我在局部视图中定义了一个 webgrid。（这是一个 MVC 4 项目。） webgrid 不是局部视图中唯一的东西，因此 webgrid 绑定到局部视图模型中的一个列表。

当单击列标题时，网格会按应有的方式填充和排序，但是当我通过调用操作方法（通过使用 Ajax.BeginForm 设置的表单帖子）重新填充网格，然后单击列标题时，网格内容消失。（action 方法使用用户在表单上提供的搜索条件查询数据库。）

这可能是什么原因造成的？如何解决？

部分视图开始于：

```
@model DonationImport.Models.GiftWithSplits 
```

部分视图的内容在由以下指定的形式内：

```
@using (Ajax.BeginForm("SearchConstit", "Batch", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "constitSearchArea" })) 
```

WebGrid 定义如下：

```
@{
    var constitGrid = new WebGrid(source: Model.SearchResults, rowsPerPage: 100, ajaxUpdateContainerId: "constitGrid");                       
    <div style="overflow-x: scroll; width: 100%;">
        <div style="width: 1910px;">
            @constitGrid.GetHtml(htmlAttributes: new { id = "constitGrid" },
                columns: constitGrid.Columns(
                    constitGrid.Column(format: @<text><button onclick="selectConstituent('@item.Constituent_ID')" >select</button></text>, style: "searchResultsColumnWidth"), 
                    constitGrid.Column("Constituent_ID", header: "ConstitID", style: "searchResultsColumnWidth", format: @<text>@Html.ActionLink((string)item.Constituent_ID, "PriorGifts", new { constitID = item.Constituent_ID }, new { target = "Prior Payments" })</text>),
                        constitGrid.Column("IsActive", header: "Active", style: "searchResultsColumnWidth"),
                        constitGrid.Column("LastName", header: "Last", style: "searchResultsColumnWidth"),
                        constitGrid.Column("FirstName", header: "First", style: "searchResultsColumnWidth"),
                        constitGrid.Column("MiddleInitial", header: "M.I.", style: "searchResultsNarrowColumnWidth"),
                        constitGrid.Column("Spouse", header: "Spouse", style: "searchResultsColumnWidth"),
                        constitGrid.Column("EmailAddress", header: "E-mail", style: "searchResultsWideColumnWidth"),
                        constitGrid.Column("AddressLine1", header: "Address Line 1", style: "searchResultsWideColumnWidth"),
                        constitGrid.Column("City", header: "City", style: "searchResultsWideColumnWidth"),
                        constitGrid.Column("State", header: "State", style: "searchResultsColumnWidth"),
                        constitGrid.Column("Zip", header: "Zip", style: "searchResultsWideColumnWidth"),
                        constitGrid.Column("SearchResultsText", header: "Search Results", style: "searchResultsWideColumnWidth"),
                        constitGrid.Column("IsActivePledge", header: "Pledge", style: "searchResultsNarrowColumnWidth"),
                        constitGrid.Column("ReceiptWarning", header: "Receipt Warning", style: "searchResultsWideColumnWidth"),
                        constitGrid.Column("IsMember", header: "Mbr", style: "searchResultsNarrowColumnWidth")),
                        alternatingRowStyle: "altrow")
        </div>
    </div>
} 
```

单击时：

```
<input type="submit" value="Search" /> 
```

在表单中，调用的action方法如下：

```
[HttpPost]
public PartialViewResult SearchConstit(DonationImport.Models.GiftWithSplits g)
{           
    GiftWithSplits giftWithSplits = new GiftWithSplits(); // model (object) to be returned to the partial view

    // send back gift data which we are currently using
    giftWithSplits.GiftToVerify = g.GiftToVerify;

    // search using provided data
    string middleInitial = empty2null(g.GiftToVerify.SourceMiddleName);
    if (!string.IsNullOrWhiteSpace(middleInitial))
        middleInitial = middleInitial.Substring(0, 1); // just supply the initial, not the entire name

    string zip = empty2null(g.GiftToVerify.SourceZip);
    if (!String.IsNullOrWhiteSpace(zip))
        zip = zip.Substring(0, 5); // we want only the first 5 digits of the zip

    giftWithSplits.SearchResults = db.SearchDonor(null, g.GiftToVerify.DonationSourceCode, empty2null(g.SourceAcctMemo), null, empty2null(g.GiftToVerify.SourceLastName), 
        empty2null(g.GiftToVerify.SourceFirstName), middleInitial, empty2null(g.GiftToVerify.SourceAddress1),
        empty2null(g.GiftToVerify.SourceCity), empty2null(g.GiftToVerify.SourceState), zip, empty2null(g.GiftToVerify.SourceCountry),
        empty2null(g.GiftToVerify.SourceEmailAddress), empty2null(g.GiftToVerify.SourcePhone)).ToList();
    if (giftWithSplits.SearchResults.Count == 0)
    {
        SearchDonor_Result emptyResult = new SearchDonor_Result();
        emptyResult.Constituent_ID = "[None Found]";
        giftWithSplits.SearchResults.Add(emptyResult);
    }

    return PartialView("_ConstitSearch", giftWithSplits);
} 
```

您可能会说，我是这种 MVC 方法的初学者。

其他想法（稍后添加）...

问题的根源似乎是 WebGrid HTML 帮助为列标题生成的链接是基于与生成网格的操作方法相关的 URL。首次显示网格时，链接为：/Batch/Verify/34?sort=FirstName&sortdir=ASC，因为网格是作为整个验证视图的一部分构建的（来自验证操作方法）。但是，当搜索手动输入的搜索条件时，网格是从仅填充部分视图的 SearchConstit 操作方法构建的，因此列标题链接中的 URL 现在是：/Batch/SearchConstit?sort=FirstName&sortdir=ASC。

此外，“搜索”按钮与 POST 相关联，因为它需要从表单字段传递数据以用作搜索条件；然而，WebGrid 列标题使用的是 GET，显然没有办法强制它们发布。因此，问题似乎归结为如何在不发布表单的情况下从表单字段传递搜索条件。

我可以想到一个使用 Session 变量的可能解决方案，但我很犹豫这样做。

另一种选择可能是放弃使用 WebGrid。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-29T06:41:21.033

当我在寻找相同问题的解决方案时，我发现了你的问题。我也面临同样的问题。我使用网络网格来显示数据。我使用了过滤器/分页。我也使用文本框在网格中进行搜索。我正在打电话进行搜索。当我单击过滤器和分页按钮时，Webgrid 消失了。我google了很多，没有找到任何解决方案。最后我找到了解决方案，所以想到了发布。您需要使用 get ajax 调用而不是 post 调用来解决您的问题。不要使用 beginform post 进行搜索。

```
Index.cshtml is my main view. Here i m rendering partial view (_GridPartialView.cshtml). Index view has one webgrid and search text box.
I am using ajax call to search in webgrid. Ajax code is mention below.

**Index.cshtml:**

@model List<Login>
@{
    ViewBag.Title = "User";
}

<h2 style="background-color: grey">User</h2>

<table>

    <tr>
        <td>
           <input type="text" id="txtSearch" placeholder="  Search..." onkeyup="Search()" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            @Html.ActionLink("Create New User", "CreateUser")</td>
    </tr>
    <tr>
        <td>

                <div id="divPartialView">
                    @Html.Partial("~/Views/Shared/_GridPartialView.cshtml", Model)
                </div>

        </td>
    </tr>
</table>

<script type="text/javascript">

    function Search() {
        var searchVal = $("#txtSearch").val();

        $.ajax({

            type: "GET",
            url: '/User/Search',
            data: { searchString: searchVal },
            dataType: 'html',
            success: function (data) {
                $('#divPartialView').html(data);

            }

        });

    }
</script>

_GridUserPArtialView.cshtml: This is partial view used in index view.

@model List<Login>
  <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <style type="text/css">
        .webGrid { margin: 4px; border-collapse: collapse; width: 500px;  background-color:#FCFCFC;}
        .header { background-color: #C1D4E6; font-weight: bold; color: #FFF; }
        .webGrid th, .webGrid td { border: 1px solid #C0C0C0; padding: 5px; }
        .alt { background-color: #E4E9F5; color: #000; }
        .gridHead a:hover {text-decoration:underline;}
        .description { width:auto}
        .select{background-color: #389DF5}
    </style>

         @{
             var grid = new WebGrid(null, canPage: true, rowsPerPage: 5, selectionFieldName: "selectedRow", ajaxUpdateContainerId: "grid");
        grid.Pager(WebGridPagerModes.NextPrevious);
        grid.Bind(Model, autoSortAndPage: true, rowCount: Model.Count);}
       <div id="grid">
        @grid.GetHtml(

        tableStyle: "webGrid", mode: WebGridPagerModes.All,

                firstText: "<< First",
                previousText: "< Prev",
                nextText: "Next >",
                lastText: "Last >>",
                headerStyle: "header",
                alternatingRowStyle: "alt",
                selectedRowStyle: "select",
                columns: grid.Columns(

                grid.Column("UserName", "User Name", style: "description"),
                grid.Column("FirstName", "First Name"),
                grid.Column("LastName", "Last Name"),
                grid.Column("Action", format: @<text>

         @if (@item.LoginUserName != "administrator"){
                  @Html.ActionLink("Edit", "Edit", new { id=item.LoginUserName}) 
                  @Html.ActionLink("Delete","Delete", new { id = item.LoginUserId},new { onclick = "return confirm('Are you sure you wish to delete this user?');" }) 

                 }
                            </text>,  style: "color:Gray;" , canSort: false)
         )) 

</div>

**UserController.cs**: This is Search action method inside. usercontroller. It is HTTPGET.

[HttpGet]
        public PartialViewResult Search(string searchString)
        {
            List<Login> userListCollection = new List<Login_User>();

            userListCollection = Login_User_Data.GetAllUsers();

            if (Request.IsAjaxRequest())
            {

                if (!string.IsNullOrEmpty(searchString))
                {
                    Log.Info("UserController: Index() Started");
                    var searchedlist = (from list in userListCollection
                                        where list.FirstName.IndexOf(searchString,StringComparison.OrdinalIgnoreCase) >=0
                                        || list.LoginUserName.IndexOf(searchString, StringComparison.OrdinalIgnoreCase) >= 0
                                        || list.LastName.IndexOf(searchString, StringComparison.OrdinalIgnoreCase) >= 0
                                        select list
                                            ).ToList();

                    return PartialView("~/Views/Shared/_GridPartialView.cshtml", searchedlist);

                }
                else
                {
                    Log.Info("UserController: Search(Login_User user) Ended");
                    return PartialView("_GridPartialView", userListCollection);
                }
            }
            else
            {
                return PartialView("_GridPartialView", userListCollection);
            }

            Log.Info("UserController: Search() Ended");
        }

Hope this will help you. Let me know if you have any concern.
From: www.Dotnetmagics.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T20:12:44.720

解决方案非常简单，您需要执行 GET，每当您对 web 网格进行排序或分页时，它会尝试获取数据并点击 HttpGet Action，其工作原理如下：

```
 [HttpGet]
    public ActionResult YourActionMethod()
    {
        return PartialView("YourView",YourModel);
    } 
```

最好的部分是，在排序时，请求也会发送一个名为“sortBy”的参数，您可以在此处使用它并决定要对绑定的模型与网格做什么。您可以使用浏览器中的“开发人员工具”检查排序标头将命中的 URL。

注意：默认情况下，它将触发的操作方法与控制器名称相同。

# xcode - xcode 4.5.2 中的本地化问题

> ID：13385956
> 
> 赞同：2
> 
> 时间：2012-11-14T19:31:35.427
> 
> 标签：xcode, cocoa, localization

我在本地化项目中寻求帮助。

使用 xCode 4.5.2 在 10.7.x 上编译 - 母语是英语。

我已将本地化添加到我的项目（Localizable.strings 等），但发现该应用程序在 10.7.x 上运行时只会显示英文键值，但在 10.6.x 上运行时会正确显示系统语言键值.

要查看我的应用程序在哪里加载它的资源，我在代码中添加了：

```
NSString *Path = [[NSBundle mainBundle] pathForResource:@"Localizable" ofType:@"strings"];
NSLog(Path); 
```

但在运行 10.7.x 的 Mac 上，输出为：

```
 .app/Contents/Resources/en.lproj/Localizable.strings 
```

无论系统语言设置为什么，这都是输出。

但是，在运行 10.6.x 的 Mac 上，正确的资源将加载，系统语言设置为德语，输出为：

```
 .app/Contents/Resources/de.lproj/Localizable.strings 
```

系统语言设置为英语，输出为：

```
 .app/Contents/Resources/en.lproj/Localizable.strings 
```

我完全被难住了。任何想法都将不胜感激。

附言。我还在 10.6.8 上使用 xcode 4.2 编译，结果完全相同。

# c++ - 在 C++ 中创建默认构造函数

> ID：13385963
> 
> 赞同：13
> 
> 时间：2012-11-14T19:31:55.003
> 
> 标签：c++, default-constructor

这可能是一个愚蠢的问题，但我在网上找不到很多关于在 C++ 中创建自己的默认构造函数的信息。它似乎只是一个没有参数的构造函数。但是，我尝试像这样创建我的默认构造函数：

```
Tree::Tree()  {root = NULL;} 
```

我也试过了：

```
Tree::Tree() {} 
```

当我尝试其中任何一个时，我都会收到错误消息：

> 没有重载函数“Tree::Tree”的实例与指定的类型匹配。

我似乎无法弄清楚这意味着什么。

我正在我的`.cpp`文件中创建这个构造函数。我也应该在我的头`.h`文件（）中做些什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T19:35:15.567

成员函数（包括构造函数和析构函数）必须在类定义中声明：

```
class Tree {
public:
    Tree(); // default constructor
private:
    Node *root;

}; 
```

然后你可以在你的 .cpp 文件中定义它：

```
Tree::Tree() : root(nullptr) {
} 
```

我投入了`nullptr`for C++11。如果您没有 C++11，请使用`root(0)`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-24T08:37:52.503

**C++11**允许您像这样定义自己的默认构造函数：

```
class A {  
    public:
        A(int);        // Own constructor
        A() = default; // C++11 default constructor creation
};

A::A(int){}

int main(){
    A a1(1); // Okay since you implemented a specific constructor
    A a2();  // Also okay as a default constructor has been created
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T19:35:18.390

为任何成员函数创建定义是不够的。您还需要*声明*成员函数。这也适用于构造函数：

```
class Tree {
public:
    Tree(); // declaration
    ...
};

Tree::Tree() // definition
    : root(0) {
} 
```

作为旁注，您应该使用成员初始化器列表，并且不**应该**使用`NULL`. 在 C++ 2011 中，您想使用`nullptr`后者，在 C++ 2003 中使用`0`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-14T19:33:12.130

是的，您需要在标题中声明它。例如，将以下内容放在树类的声明中。

```
class Tree {
    // other stuff...
    Tree();
    // other stuff...
}; 
```

# linux - Bash字符串连接并获取内容

> ID：13385966
> 
> 赞同：0
> 
> 时间：2012-11-14T19:32:04.283
> 
> 标签：linux, bash

我有一个 bash 循环，我正在尝试读取所有变量：

```
var1="hello1"

var2="hello2"

var3="hello3"

for i in `seq 1 3`;
do
 ab=var$i
 # Now ab == var1, I want to echo $var1 

done 
```

我正在尝试动态获取 var(1)(2)(3) 并取出它的字符串。

**编辑：**

这里的重点是如何连接变量，例如`ab=var$i` 并使用`ab`变量（`var1`例如）作为变量，我的意思是获取`var1`值`hello1` 我并不是说如何对这个特定示例进行操作，而不是使用数组。

希望我已经澄清了自己。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:39:50.157

```
var1="hello1"
var2="hello2"
var3="hello3"

for i in `seq 1 3`;
do
    ab=var$i
    echo ${!ab}
done 
```

我不确定这是否是您更大问题的最佳解决方案，但它是您即时请求的直接解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:36:40.353

更简单的方法：

```
var1="hello1"
var2="hello2"
var3="hello3"

eval echo\ $var{1..3}\; 
```

扩展为：

```
echo $var1
echo $var2
echo $var3 
```

**输出：**

```
hello1 
hello2 
hello3 
```

# javascript - 使用 javascript 检索私人 youtube 播放列表

> ID：13385974
> 
> 赞同：1
> 
> 时间：2012-11-14T19:32:39.727
> 
> 标签：javascript, youtube-api, youtube-javascript-api

有谁知道使用javascript通过youtube api检索另一个用户的私人播放列表的好方法？我假设必须进行一些身份验证才能做到这一点，但我不熟悉从哪里开始。我的搜索没有返回太多关于此的信息。我需要使用 OAuth 之类的东西吗？谢谢！

# average - 最大子阵列变化

> ID：13385977
> 
> 赞同：1
> 
> 时间：2012-11-14T19:32:43.520
> 
> 标签：average, sub-array, kadanes-algorithm

我必须解决一个类似于最大子数组问题的问题。我必须找到平均值大于 k 的最大子数组。我想到了以下技巧。我可以将大小为 n 的数组 A[] 转换为 B[]，其中 B[i] = A[i] - k。所以现在平均值必须> 0。但是平均值大于零并不仅仅意味着总和大于零吗？所以我可以直接应用 Kadane 的算法。我对吗？（总是在有 1 个正值的约束下）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:42:31.350

不，kadane 的算法仍然会为您找到总和最大的子数组......我必须解决同样的问题。到目前为止，我发现如果我们如上所述创建数组 B，然后创建包含数组 B 的部分和的数组 C，那么我们正在寻找的最大间隔 (i,j) 具有相同的数字对于 i 和 j ！！！例如：

数组 A 是：1 10 -1 -1 4 -1 7 2 8 1 ......给定的 k 是 5，那么数组 B 是：-4 5 -6 -6 -1 -6 2 -3 3 -4数组 C 是：-4 1 -5 -11 -12 -18 -16 -19 -16 -20 所以我们要查找的子数组是 [7,2,8]，长度为 3，并且第一个和最后一个元素是-16！！！！

编辑：我忘了告诉我们正在搜索 O(n) 或 O(n*logn) 算法.... @lets_solve_it 你是对的，但你的算法是 O(n^2) 这对于我们要处理的数据。我很接近用 C++ 中的函数映射来解决它，它就像一个哈希表。我认为这是正确的方向，因为这里数组 C 的元素与其索引有直接关系！我们的教授还告诉我们，另一种可能的解决方案是再次制作数组 C 然后采用（特殊？）支点进行快速排序....但我不完全理解我们期望快速排序做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T22:05:51.070

@panos7：

创建数组 C（部分求和数组）后，您将寻找 C、Ci 和 Cj 的两个值，

这样，Cj>=Ci，并且 (ji) 尽可能“大”。(ji) --> 最大。

然后返回 ji。

在你的例子中， -16>=-18 所以你返回 ji=9-6=3

这是正确的答案！

# c - 在 Matlab 中编译 mex 文件时找不到标准 C 库

> ID：13385978
> 
> 赞同：4
> 
> 时间：2012-11-14T19:32:43.147
> 
> 标签：c, matlab, mex

更新：我在 mexopts.sh 中安装了 XCode 并更改了 SDKROOT 以反映[此处](https://stackoverflow.com/questions/9845762/matlab-mex-cant-find-standard-library-with-xcode-4-3-mac)描述的实际路径，但是当我包含 mex.h 时仍然出现此错误：

```
In file included from /Applications/MATLAB_R2012b.app/extern/include/matrix.h:294,
                 from /Applications/MATLAB_R2012b.app/extern/include/mex.h:58,
                 from test.c:2:
/Applications/MATLAB_R2012b.app/extern/include/tmwtypes.h:61:21: error: float.h: No such file or directory

    mex: compile of ' "test.c"' failed. 
```

* * *

我正在尝试通过 mex 编译一个用于 Matlab 的简单 C 文件，但它似乎永远找不到我知道已安装的默认库。例如，尝试编译以下内容：

```
#include <string.h>
int main() {
    return 0;
} 
```

给我错误：

```
test.c:1:20: error: string.h: No such file or directory
mex: compile of ' "test.c"' failed. 
```

即使它使用 gcc 编译得很好。更糟糕的是，当我尝试像这样包含 mex.h 时：

```
#include "mex.h"
int main() {
    return 0;
} 
```

我收到以下错误：

```
In file included from /Applications/MATLAB_R2012b.app/extern/include/mex.h:58,
                 from test.c:2:
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:293:20: error: stddef.h: No such file or directory
In file included from /Applications/MATLAB_R2012b.app/extern/include/matrix.h:294,
                 from /Applications/MATLAB_R2012b.app/extern/include/mex.h:58,
                 from test.c:2:
/Applications/MATLAB_R2012b.app/extern/include/tmwtypes.h:43:20: error: limits.h: No such file or directory
/Applications/MATLAB_R2012b.app/extern/include/tmwtypes.h:46:21: error: stdbool.h: No such file or directory
/Applications/MATLAB_R2012b.app/extern/include/tmwtypes.h:61:21: error: float.h: No such file or directory
/Applications/MATLAB_R2012b.app/extern/include/tmwtypes.h:777:2: error: #error "This code must be compiled using a 2's complement representation for signed integer values"
In file included from /Applications/MATLAB_R2012b.app/extern/include/matrix.h:294,
                 from /Applications/MATLAB_R2012b.app/extern/include/mex.h:58,
                 from test.c:2:
/Applications/MATLAB_R2012b.app/extern/include/tmwtypes.h:823: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'CHAR16_T'
In file included from /Applications/MATLAB_R2012b.app/extern/include/mex.h:58,
                 from test.c:2:
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:319: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'mxChar'
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:375: error: expected ')' before 'n'
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:383: error: expected ')' before 'n'
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:397: error: expected declaration specifiers or '...' before 'size_t'
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:590: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'mxGetNumberOfElements'
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:632: error: expected '=', ',', ';', 'asm' or '__attribute__' before '*' token
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:688: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'mxGetM'
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:700: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'mxGetN'
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:750: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'mxGetElementSize'
In file included from /Applications/MATLAB_R2012b.app/extern/include/mex.h:58,
             from test.c:2:
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:851:20: error: stdlib.h: No such file or directory
/Applications/MATLAB_R2012b.app/extern/include/matrix.h:1072: error: expected ')' before 'm'
In file included from test.c:2:
/Applications/MATLAB_R2012b.app/extern/include/mex.h:91: error: expected specifier-qualifier-list before 'size_t'
In file included from test.c:2:
/Applications/MATLAB_R2012b.app/extern/include/mex.h:161:19: error: stdio.h: No such file or directory

    mex: compile of ' "test.c"' failed. 
```

我认为 mex 没有为这些库寻找正确的位置，或者安装以某种方式损坏，但我不知道如何修复它。

Mac OSX Mountain Lion + XCode 4.5.2，Matlab R2012b，gcc 4.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:51:09.227

只是为了分享，我有类似的问题。我正在运行相同版本的 Matlab 并且正在查看此页面但找不到答案。我在这里找到了答案：[Matlab 2012a Mex to work with Xcode 4.5 on Mountain Lion](https://stackoverflow.com/questions/12643236/matlab-2012a-mex-to-work-with-xcode-4-5-on-mountain-lion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T06:09:19.300

包含文件需要在您的*PATH*中（键入*路径*以显示这些文件夹），除非您使用*mex -Ipathname*专门包含它们。您可以单击“文件->设置路径”并添加包含您的 string.h 的文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-21T21:13:29.083

使用命令指定以下选项，`mex`它将正常工作。请确保您在以下文件夹中有标准头文件，否则请相应更新：

```
mex -I'C:\Program Files (x86)\Windows Kits\10\Include\10.0.10150.0\ucrt'. 
```

如果你克服了这个错误，它也可能会为 .lib 提供帮助。包括类似的

```
mex -I'C:\Program Files (x86)\Windows Kits\10\Include\10.0.10150.0\ucrt' -L'C:\Program Files (x86)\Windows Kits\10\Lib\10.0.10150.0\ucrt\x64' 
```

# python - python imaplib unexpected response 220

> ID：13385981
> 
> 赞同：2
> 
> 时间：2012-11-14T19:33:02.017
> 
> 标签：python, email, response, imaplib

I have the following line of code using imaplib

M = imaplib.IMAP4('smtp.gmail.com', 587)

I get the following error from imaplib: abort: unexpected response: '220 mx.google.com ESMTP o13sm12303588vde.21'

However from reading elsewhere, it seems that that response is the correct response demonstrating that the connection was made to the server successfully at that port.

Why is imaplib giving this error?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:46:39.580

You are connecting to the wrong port. 587 is authenticated SMTP, not IMAP; the IMAP designated port number is 143 (or 993 for IMAPS).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:51:07.987

I realized I needed to do IMAP4_SSL() - has to be SSL for IMAP and for using IMAP I need the IMAP server for gmail which is imap.googlemail.com. I ultimately got it work without specifying a port. So, final code is:

M = imaplib.IMAP4_SSL('imap.googlemail.com')

# php - 在php中插入sql语句错误：未选择数据库

> ID：13385984
> 
> 赞同：0
> 
> 时间：2012-11-14T19:33:18.060
> 
> 标签：php, sql, insert

所以我正在尝试制作一个注册表单。我已经制作了一个 php MySQL 类，它使用构造函数与 new MySQLi() 建立连接以用于 verifyLogin 函数，并与 mysql_connect() 用于我的 addElement 函数。

错误在于我的 addElement 函数，SQL 语句正确写出，但似乎没有连接到数据库。我检查了所有名称是否正确。有任何想法吗？

```
<?php

class MySQL {

private $connection;
private $conn;
private $databaseName;

function __construct($dbServer, $dbUser, $dbPassword, $dbName) {
    $this->connection = new MySQLi($dbServer, $dbUser, $dbPassword, $dbName)
        or die('PROBLEM CONNECTING TO DATABASE');

    $this->conn = mysql_connect($dbServer, $dbUser, $dbPassword);
        echo $this->conn;

    $databaseName = $dbName;
}

function verifyLogin($table, $email, $password) {

    $query = "SELECT *
            FROM ?
            WHERE email = ?
            AND password = ?
            LIMIT 1";

    if($statement = $this->connection->prepare($query)) {
        $statement->bind_param('sss', $table, $email, $password);
        $statement->execute();

        if($statement->fetch()) {
            $statement->close();
            return true;    
        }
        else {
            return false;
        }
    }

}

function addElement($table, $firstName, $lastName, $email, $mobile, $password,
                        $faculty, $campus) {

    $query = "INSERT INTO $table (first_name, last_name, email, mobile, password, faculty, campus_location) 
            VALUES('$firstName', '$lastName','$email','$mobile',
            '$password','$faculty','$campus');";
    echo $query;

    mysql_select_db($this->databaseName, $this->conn);

    if(!mysql_query($query)) {
        die('Error: ' . mysql_error()); 
    }

    mysql_close($this->connection);
}

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:44:35.510

要在 MySQLi 中选择数据库，您需要像这样选择它：

```
$db = new mysqli("localhost", "my_user", "my_password", "database_name"); 
```

或者

```
$db = new mysqli("localhost", "my_user", "my_password");
$db->select_db('database_name'); 
```

与 MySQL 不同：

```
$db = mysql_connect('localhost', 'my_user', 'my_password');
$db_selected = mysql_select_db('database_name', $db); 
```

MySQLi：[http ://www.php.net/manual/en/mysqli.select-db.php](http://www.php.net/manual/en/mysqli.select-db.php)

MySQL：[http ://www.php.net/manual/en/function.mysql-select-db.php](http://www.php.net/manual/en/function.mysql-select-db.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:42:30.123

您正在混合 mysql 和 mysqli php 驱动程序。

由于不推荐使用 mysql 驱动程序，我建议使用 mysqli。

PHP 文档： [http ://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)

让您入门的良好概述： [http ://www.dreamincode.net/forums/topic/54239-introduction-to-mysqli-and-prepared-statements/](http://www.dreamincode.net/forums/topic/54239-introduction-to-mysqli-and-prepared-statements/)

# python - 在 mongo 中运行多个查询

> ID：13385986
> 
> 赞同：-2
> 
> 时间：2012-11-14T19:33:20.663
> 
> 标签：python, mongodb, pymongo, database

我有一个集合，想要得到一组满足一组条件的结果。我了解 Mongo 不允许您使用连接，因此我需要运行单独的查询并将结果连接到单个响应中。

但是是否可以将单独查询的结果连接在一起以获得预期的输出。

有没有我可以看到查询结果连接在一起的基本示例。

谢谢

例如，我可以加入这两个查询，以便获得两个查询的结果：

```
coll.find({"coordinates.type" : "Point"},{"coordinates" :1}, tailable = True, timeout = False) 
```

和：

```
coll.find({"place.bounding_box.type" : "Polygon"},{"place.bounding_box.coordinates" : 1}, tailable = True, timeout = False) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:36:00.627

在您的具体示例中，您不需要单独运行这些查询。您可以像这样加入结果：

```
coll.find(
  { $or : [ 
      { "coordinates.type" : "Point" }, 
      { "place.bounding_box.type" : "Polygon" } 
    ] 
  },
  {"coordinates" :1, "place.bounding_box.coordinates" : 1}
) 
```

您也可以使用 $and / [$elementMatch](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24elemMatch)代替 $or

# spring - 根据有关 Hibernate 中的多对多映射的特定条件检索行

> ID：13385990
> 
> 赞同：0
> 
> 时间：2012-11-14T19:33:27.737
> 
> 标签：spring, hibernate, jsp, oracle10g, hql

我只是从[我的一个问题](https://stackoverflow.com/q/13350858/1391249)中复制并粘贴一些介绍性文本，因为这个问题也涉及相同的表关系。

* * *

我在 Oracle (10g) 数据库中有许多表中的三个，如下所示。我正在使用带有 Spring 3.0.2 版的 Hibernate Tools 3.2.1.GA。

1.  **产品**- 父表
2.  **颜色**- 父表
3.  **ProductColour** - 连接表 - 分别引用`colourId`和`prodId`of`Colour`和`Product`表

其中表`ProductColour`是和之间的*连接表*。正如表名所暗示的那样， 和 之间存在多对多关系，由 映射。我认为，数据库中的关系很容易想象，只有这么多信息就很清楚了。因此，我不会不必要地详细探讨这种关系。`Product``Colour``Product``Colour``PrductColour`

in 中的实体（行）与 in`Product`中的任意数量的实体相关联，并且 in 中`Colour`的实体（行）`Colour`也可以与 in 中的任意数量的实体相关联`Product`。

* * *

由于它是多对多关系，因此它映射`Product`到`Colour`实体类 (POJO) 及其各自的实体类 (POJO) 中，并且没有可用的表的`java.util.Set`直接 POJO 类。`product_colour`

该类`Product`如下所示。

```
public class Product  implements java.io.Serializable 
{
    private BigDecimal prodId;
    private Set<Colour> colours = new HashSet<Colour>(0);

    .
    .
    .

    //Other properties with setters and getters. 
} 
```

该类`Colour`如下所示。

```
public class Colour implements java.io.Serializable 
{
    private BigDecimal colourId;
    private Set<Product> products = new HashSet<Product>(0);

    .
    .
    .

    //Other properties with setters and getters. 
} 
```

实体之间的实际映射在`xxx.hbm.xml`文件中可用，关于这个问题，我认为这是不必要的。

* * *

我想要做的是一次只检索表**中与特定产品**表`Colour`中的颜色行不匹配的那些行。在这方面，本机 Oracle SQL 语句如下所示。`ProductColour`

 **```
SELECT colour_id, colour_name, colour_hex
FROM colour
WHERE colour_id not in (SELECT colour_id FROM product_colour WHERE prod_id=81)
ORDER BY colour_id DESC 
```

哪里`prod_id`可以是`BigDecimal`Java 中动态的任何有效数字。

如前所述，该关系在 Hibernate 中可以作为多对多关系使用，没有`product_colour`可用的数据库表 POJO 类，因此，我在 Hibernate 中编写这样的 HQL 语句时摸不着头脑。我曾尝试编写这样的 HQL 语句，但没有成功。

* * *

[其余部分中提供的代码可能完全不需要审查]

因此，我遵循传统方式。我正在做的是......我首先`Product`根据动态值从实体类中检索单个产品行，`prodId`例如，

```
List<Product>list=session.createQuery("from Product where prodId=:prodId")
                  .setParameter("prodId", prodId).list(); 
```

然后使用循环，我得到了整个`Colour`集合 -`java.util.Set`对应`product_colour`于 Oracle 中的表，该表在`Product`该产品的实体中可用，例如，

```
Set<Colour>colours=new HashSet<Colour>(0);

for(Product p:list)
{
    if(p!=null)
    {               
        colours=p.getColours();
    }
} 
```

可以看出，`colours` `Set`正在使用`product_colour`Oracle 表中所有可用的颜色行（参考行）填充。

在获取所有这些行之后，我将获取与Oracle 中的表相`Colour`对应的整个实体类本身（其中的所有行），`colour`然后删除与从`product_colour`Oracle 表中检索到的行匹配的那些行（可在`colours`Set in前面的片段）满足前面提到的条件，例如，

```
List<Colour>colourList=session.createQuery("from Colour order by colourId desc").list();
Iterator<Colour>it=colourList.iterator();        

while(it.hasNext())
{
    Colour c=(Colour)it.next();
    for(Colour pc:colours)     //colours is available in the preceding snippet.
    {
        if(c==pc)
        {
            it.remove();
        }
    }
} 
```

* * *

这可以做预期的事情，但这样做可能意味着系统上的一些开销。此外，我想要实现的目标似乎无法通过这种方法实现，即**pagination**。我不能使用`setFirstResult(int)`和`setMaxResults(int)`方法来完成分页任务，否则就像下面显示的关于`Product`实体类的情况一样，

```
List<Product> products=session.createQuery("from product order by prodId desc")
                       .setMaxResults(0).setFirstResult(4); 
```

* * *

**所以问题又来了**，关于这种关系，是否可以编写这样一个 HQL 语句，该语句只能从实体类中检索那些与Oracle 表`Colour`中的颜色行不匹配的行，**如上面显示的本机 SQL 语句**？`product_colour`

 **否则如何实现分页的概念（以防万一，这是不可能的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:09:32.493

对一个非常长的问题的简短回答：

```
select colour from Colour colour 
where colour.id not in (
    select colour2.id from Product product
    inner join product.colours colour2
    where product.id = :productId) 
```****

# jquery - 如何在下拉更改时显示/隐藏数据视图 Web 部件 SharePoint Designer 2007 中的特定单元格

> ID：13385995
> 
> 赞同：1
> 
> 时间：2012-11-14T19:33:38.640
> 
> 标签：jquery, sharepoint-2007, sharepoint-designer

我有一个 SharePoint:dvdropdownlist 下拉列表，它从列表中提取选项，然后在用户提交后写回这些更改。但是，我们希望能够根据下拉列表的值在更改时隐藏或显示某些字段。

尝试使用 jquery，但收效甚微。

```
<SCRIPT type=text/javascript>

 $(document).ready(function($) {
     var selected = $("#SharePoint:dvdropdownlist option:selected").text();
    if (selected == 'Other')
     {
        $("#OtherReason").hide();
    }
});

</SCRIPT> 
```

你的意见？

# mysql - 将时间段分成日历月——mysql

> ID：13385998
> 
> 赞同：0
> 
> 时间：2012-11-14T19:33:45.780
> 
> 标签：mysql

我基本上面临与此线程中描述的相同的问题：[http](http://www.experts-exchange.com/Database/Oracle/10.x/Q_24693813.html) ://www.experts-exchange.com/Database/Oracle/10.x/Q_24693813.html 。不同之处在于我需要使用**MYSQL**找到解决方案。

我正在处理一个用电量表：

```
ID     Account   FromDate      ToDate       ElecUse   ElecDemand  ElecBillAmt
2903   100009    2010-10-14    2010-11-12   352400    668.1       12592.53
2904   100009    2010-11-12    2010-12-15   426400    666         14284.39
2905   100009    2010-12-15    2010-01-14   406800    708.4       13812.54
2906   100009    2010-01-14    2010-02-15   443200    697.9       14514.99 
```

我想每月报告一次使用情况，从每个月初开始，到每个月底结束。因此，我想要一个 MYSQL 查询，它可以从上面生成下表：

```
Account   FromDate      ToDate        ElecUse    ElecDemand    ElecBillAmt
100009    2010-10-14    2010-10-31    206579     391.51        7381.74
100009    2010-11-01    2010-11-30    378402     639.24        13002.12
100009    2010-12-01    2010-12-31    410778     680.46        13859.46
100009    2011-01-01    2011-01-31    425290     701.14        14156.77
100009    2011-02-01    2011-02-15    207750     327           6803.85 
```

感谢您的帮助，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:07:02.380

将列转换为行通常是自联接或联合的工作。

在您的所有示例中，您的 FromDate 是 ToDate 的前一个月。一个查询获取第一个月的天数，另一个查询获取第二个月的剩余天数怎么样？之后在两者之间分配 ElecUse 就很容易了。

根据您的实际数据，您可能需要更多查询（两个日期在同一个月等）。

```
select fromdate, last_day(fromdate) as todate,
  datediff(last_day(fromdate), fromdate) as days_in_month,
  datediff(todate, fromdate) as days_in_range,
  datediff(last_day(fromdate), fromdate)/datediff(todate, fromdate) as pct_in_month,
  elecuse * (datediff(last_day(fromdate), fromdate)/datediff(todate, fromdate)) as elecuse_in_month
... 
```

我留在了中间列，这样你就可以看到发生了什么：

```
+------------+------------+---------------+---------------+--------------+------------------+
| fromdate   | todate     | days_in_month | days_in_range | pct_in_month | elecuse_in_month |
+------------+------------+---------------+---------------+--------------+------------------+
| 2010-10-14 | 2010-10-31 |            17 |            29 |       0.5862 |      206579.3102 |
+------------+------------+---------------+---------------+--------------+------------------+ 
```

将其与另一个在原始行范围内执行第二个月的查询联合起来，您应该已准备就绪。

不过，请注意@OllieJones 关于 ElecDemand 的警告。